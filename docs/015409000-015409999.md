# StackOverflow 问答 15409000-15409999

# jsp - Angularjs：为文本框分配最小值

> ID：15409004
> 
> 赞同：2
> 
> 时间：2013-03-14T12:13:33.750
> 
> 标签：jsp, angularjs, angularjs-directive

我是 angularjs 的新手，我的要求是文本框的最小值应为 10，如果用户输入的值小于 10，那么只要他关注另一个文本框（此处为名称文本框），值就应该更改再次到 10。到目前为止我尝试过，但想不出更多，请帮忙，对于错误的英语和接受标准，我深表歉意：

```
<div ng-app=""><form name="myForm" ng-controller="Ctrl">Number: <input type="text" name="input" ng-model="value"
               min="10" max="500" required> Name: <input type="text" name="name" ng-model=""
               required>

<span class="error" ng-show="myForm.input.$error.required">
  Required!</span>
<span class="error" ng-show="myForm.input.$error.number">
  Not valid number!</span> 
```

```
function Ctrl($scope) {$scope.value ;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:19:10.597

而不是重置值，您应该考虑使用简单的验证错误消息，由[input[number]](http://docs.angularjs.org/api/ng.directive%3ainput.number)定义，它有自己的属性来处理最小/最大值。

否则，一旦开始重置值，用户会认为您的文本字段有问题/错误，恕不另行通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:18:53.407

您需要使用 ng-change 指令。类似于以下的东西。

```
<input type="text" name="name" ng-model="" ng-change="update()"  required> 
```

# zend-framework - Zendfamework 2.1.4 中不推荐使用查询

> ID：15409005
> 
> 赞同：1
> 
> 时间：2013-03-14T12:13:37.827
> 
> 标签：zend-framework, zend-framework2

```
'login' => array(
    'type' => 'Literal',
    'options' => array(
        'route' => '/giris',
        'defaults' => array(
            'controller' => 'zfcuser',
            'action'     => 'login',
        ),
    ),
    'may_terminate' => true,
    'child_routes' => array(
        'provider' => array(
            'type' => 'Segment',
            'options' => array(
                'route' => '/:provider',
                'constraints' => array(
                    'provider' => '[a-zA-Z][a-zA-Z0-9_-]+',
                ),
                'defaults' => array(
                    'controller' => 'ScnSocialAuth-User',
                    'action' => 'provider-login',
                ),
            ),
        ),
        'query' => array(
            'type' => 'Query',
        ),
    ),
), 
```

给出消息已弃用：自 ZF 2.1.4 起已弃用查询路由；在第 21 行的 /opt/lampp/KendindenApp/vendor/zendframework/zendframework/library/Zend/Mvc/Router/Http/Query.php 中使用 HTTP 路由器组装方法的“查询”选项

当我删除这些行时，它工作正常。

```
'query' => array(
    'type' => 'Query',
), 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T10:56:31.703

出于安全原因，我们已弃用 ZF 2.1.4 中的查询路由。更多详情请参考[http://framework.zend.com/security/advisory/ZF2013-01](http://framework.zend.com/security/advisory/ZF2013-01)

# ruby-on-rails - 检查在黄瓜导轨中具有随机 id 的复选框

> ID：15409012
> 
> 赞同：0
> 
> 时间：2013-03-14T12:14:05.783
> 
> 标签：ruby-on-rails, selenium, automation, cucumber, automated-tests

我有一个场景，我想检查/验证复选框是否被禁用/选中。我有所有必需的步骤，使用元素的 id 来验证/检查复选框。现在我有一个复选框，其 id 是在提交后随机生成的如下所示

```
<input disabled="disabled" id="event_ticket_attributes_new_1363260967734" name="event[ticket_attributes][new_1363260967734]" type="checkbox" value="true"> 
```

再次运行后，同样的场景

```
<input disabled="disabled" id="event_ticket_attributes_new_1363261186173" name="event[ticket_attributes][new_1363261186173]" type="checkbox" value="true"> 
```

**我怎样才能有一个步骤来检查/验证这种复选框？**

# android - 在文本视图中显示日语而不是中文

> ID：15409015
> 
> 赞同：4
> 
> 时间：2013-03-14T12:14:15.457
> 
> 标签：android, internationalization

在 textview 中显示日文文本时，android 默认使用中文字体，显示错误的字符，此处举例[说明](http://en.wikipedia.org/wiki/Han_unification#Examples_of_language_dependent_characters)。将语言环境设置为日语可以在模拟器上运行，但在我的 Galaxy s3 上不起作用，可能是因为它不支持日语。还有其他解决方案是从资产以编程方式设置字体，例如：

```
textView.setTypeface(Typeface.createFromAsset(getAssets(), "DroidSansJapanese.ttf")); 
```

但这似乎有点杂乱无章。有没有办法通过xml布局将字体设置为支持日语的字体？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T14:18:23.347

通常，在日本以外销售的旧版 (<4.1) Android 设备默认呈现中文版汉字。在日本境内销售的 Android 设备默认呈现日文版汉字。DroidSansJapanese 是与 DroidSans 对应的日文字体，可在 AOSP 中使用。似乎制造[商](https://github.com/android/platform_frameworks_base/blob/master/data/fonts/vendor_fonts.xml)可以在创建 Android 版本时选择在显示文本时使用系统/供应商提供的字体的偏好。即使您在 (<4.1) 非日语设备上更改您的区域设置，它仍然可以显示不正确的字符版本。

如果您想为日本的日本用户本地化您的应用程序，他们很可能会在日本购买设备，因此汉字将正确显示（假设制造商采取了上述要求）。如果您可以接受此行为，则无需进行任何更改。如果您正在构建一个针对日本以外用户（例如希望学习日语的人）的应用程序，那么这听起来可能不太好。

[Android 4.1](http://developer.android.com/about/versions/jelly-bean.html)发布后，对日式汉字的支持得到了改进。[此提交](https://github.com/android/platform_frameworks_base/commit/ac1cbaf2e5575ac75a0160e13089d51a0bb232fa#data/fonts/vendor_fonts.xml)包含有关更改内容的一些详细信息。如果您的手机当前使用的是日文语言环境，Android 应该会显示日文汉字。我已经在运行 Android 4.1 的非日本三星 Galaxy Note 2 上看到了这种行为。当我将系统语言设置为英语（英国/美国）时，我在查看汉字文本时看到了中国风格的渲染。但是，当我将语言设置为日本语时，我可以看到日本风格的渲染。我没有对此进行测试，但我想知道[以编程方式强制语言环境](http://developer.android.com/reference/java/util/Locale.html#setDefault%28java.util.Locale%29)是否也可以强制显示 4.1+ 设备的日式汉字。

您不能通过 XML 属性将字体设置为资产中的字体。您必须使用类似于您在原始问题中发布的代码在 Java 中执行此操作。要在全局范围内执行此操作，您可以创建自己的 TextView 子类来设置正确的字体，或者您可以遍历布局中的所有视图（例如，在 Activity.setContentView(int) 之后）并相应地更新它们（如果它们是 TextViews） . [在另一个问题](https://stackoverflow.com/questions/7503133/japanese-characters-looking-like-chinese-on-android)中对此解决方案有更详细的描述。包含日文字体可能会使您的 APK 膨胀相当大。

如果您正在为日本的日本用户编写应用程序，我不会费心采取任何行动，因为它应该已经为他们正确显示了。Android 4.1+ 设备的用户也有良好的体验，前提是他们使用的是日语语言环境。否则，捆绑字体就是您的答案，并且您已经对所需内容有了很好的了解。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T13:34:24.450

无法直接在 XML 中设置字体。

如果您打算使用大量日文 TextView，则创建一个自定义 View 来为您处理它可能会更容易，它可以通过其构造函数以编程方式设置字体。

然后，每当您将自定义视图放入 XML 中时，它都会有正确的字体。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T14:23:25.903

这里回答了一个非常相似的问题：

[Android 上的自定义字体](https://stackoverflow.com/questions/5694163/custom-font-on-android/14605572#14605572)

您可以使用 GitHub [https://github.com/browep/AndroidCustomFontWidgets/](https://github.com/browep/AndroidCustomFontWidgets/)中的一些代码让您在 XML 中指定字体。

```
<com.github.browep.customfonts.view.FontableTextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="This is in a custom font"
    app:font="MyFont-Bold.otf" /> 
```

# php - PHP 5.3 无法识别短对象语法

> ID：15409017
> 
> 赞同：1
> 
> 时间：2013-03-14T12:14:18.437
> 
> 标签：php, syntax

我在 PHP 5.4 中构建了一个站点，当我在 Windows 上启动它时，我注意到 PHP 5.3.15 在遇到短对象语法时会中断，例如`$dateGenerated = (new \DateTime())->format("Y-m-d H:i:s");`

是的，我可以将其设置为变量来解决问题。我在整个应用程序中都使用了这种语法，并且想知道除了将其分配给变量之外是否还有一种干净的方法来处理它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T12:19:02.377

这是PHP 5.4 中的一个[新语法特性：](http://www.php.net/manual/en/migration54.new-features.php)

> 添加了对实例化的类成员访问，例如 (new Foo)->bar()。

所以没有什么可做的。

# javascript - AngularJS 和 i18next

> ID：15409018
> 
> 赞同：5
> 
> 时间：2013-03-14T12:14:20.010
> 
> 标签：javascript, internationalization, angularjs, angularjs-directive

我见过一些 Angular 的 i18n 插件，但我不想重新发明轮子。i18next 是一个很好的库，所以我打算使用它。

我创建了一个指令 i18n，它只调用 i18n 库：

```
define(['app', 'jquery', 'i18n'], function(app, $, i18n) {'use strict';
    app.directive('i18n', function() {
        return function($scope, elm, attrs) {
            attrs.$observe('i18n', function(value) {
                if ($.fn.i18n) {// for some reason, it isn't loaded quickly enough and first directives process fails
                    $(elm).i18n();
                }
            });
        };
    });
}); 
```

在我的页面上，我可以即时更改语言：

```
<a ng-repeat="l in languages"> <img ng-src="images/{{l.id}}.png" title="{{l.label}}" ng-click="setLanguage(l.id)" /> </a> 
```

现在，我在 html 标签上定义的主控制器：

```
define(['app', 'i18n', 'jquery'], function(app, i18n, $) {'use strict';

    return app.controller('BuilderController', ['$scope', '$location',
    function BuilderController($scope, $location) {

        /* Catch url changes */
        $scope.$watch(function() {
            return $location.path();
        }, function() {
            $scope.setLanguage(($location.search()).lang || 'en');
        });

        /* Language */
        $scope.languages = [{
            id : "en",
            label : "English"
        }, {
            id : "fr",
            label : "Français"
        }];

        $scope.$watch('language', function() {
            $location.search('lang', $scope.language);
            i18n.init({
                resGetPath : 'i18n/__lng__/__ns__.json',
                lng : $scope.language,
                getAsync : false,
                sendMissing : true,
                fallbackLng : 'en',
                debug : true
            });
            $(document).i18n();
        });

        $scope.setLanguage = function(id) {
            $scope.language = id;
        };

    }]);
}); 
```

工作原理：语言观察者使用新的语言环境初始化 i18n 对象，然后使用 i18n jquery 扩展更新所有 DOM。在这个特殊事件之外，我的指令完美地完成了所有其他任务（使用 i18n 指令并在稍后呈现的模板）。

虽然它工作正常，但我知道我不应该在控制器内操作 DOM，但由于最终什么都没有发生，我还没有找到更好的解决方案。

理想情况下，我希望 Angular 重新编译所有 DOM，解析所有指令以更新标签，但我不知道该怎么做。我试过 $scope.$apply() ：不工作，因为此时我已经在摘要中使用了 Scope.onReady 插件，但没有更好的结果。

显然，我对 Angular 很陌生，而且我很难准确地理解事情是如何工作的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-27T11:27:37.057

据我所知，最好不要使用 jQuery，因为它不是必需的。您可以在没有 jQuery 的情况下使用 i18next，只需使用`window.i18n.t("YourStringToTranslate")`. ;)

因为您可以编写自己的指令，所以也不需要使用`$(document).i18n();`. 为此，我为 Angular 编写了一个简单的指令。

[https://gist.github.com/archer96/5239617](https://gist.github.com/archer96/5239617)

如您所见，您不必使用 jQuery，并且最好在指令而不是控制器中初始化 i18next。

您可以通过简单地将`ng-i18next=""`属性添加到您想要的任何元素来使用它。将您的选项传递到`$rootScope.i18nextOptions`代码中的任何位置（例如在您的控制器中）。然后它将自动更新所有翻译的元素。

我编辑了你的代码，所以它适用于我的指令。

```
define(['app', 'i18n', 'jquery'], function(app, i18n, $) {

  'use strict';

  return app.controller('BuilderController', ['$rootScope', '$scope', '$location',
    function BuilderController($rootScope, $scope, $location) {

      /* Catch url changes */
      $scope.$watch(function() {
          return $location.path();
      }, function() {
          $scope.setLanguage(($location.search()).lang || 'en');
      });

      /* Language */
      $scope.languages = [{
          id : "en",
          label : "English"
      }, {
          id : "fr",
          label : "Français"
      }];

      // This has changed
      $scope.$watch('language', function() {
        $location.search('lang', $scope.language);
        $rootScope.i18nextOptions = {
            resGetPath : 'i18n/__lng__/__ns__.json',
            lng : $scope.language,
            getAsync : false,
            sendMissing : true,
            fallbackLng : 'en',
            debug : true
        };
      });

      $scope.setLanguage = function(id) {
          $scope.language = id;
      };

  }]);
}); 
```

请注意，您必须将指令设置为您的应用程序的依赖项。还包括没有 AMD+jQuery 的 i18next 版本。如果您需要更多详细信息，可以在 gist 中找到它们。;)

* * *

现在`i18next` `angular`GitHub 上有一个可用的模块：[https ://github.com/i18next/ng-i18next](https://github.com/i18next/ng-i18next)

# mysql - 在 emacs mysql 缓冲区中编码

> ID：15409019
> 
> 赞同：2
> 
> 时间：2013-03-14T12:14:23.850
> 
> 标签：mysql, emacs, encoding, ssh

我的 mysql 缓冲区似乎有问题，我用它通过 ssh 连接连接到包含 latin1 数据的数据库。

```
live [db]> show variables like '%char%';
+--------------------------+----------------------------+
| Variable_name            | Value                      |
+--------------------------+----------------------------+
| character_set_client     | latin1                     |
| character_set_connection | latin1                     |
| character_set_database   | latin1                     |
| character_set_filesystem | binary                     |
| character_set_results    | latin1                     |
| character_set_server     | latin1                     |
| character_set_system     | utf8                       |
| character_sets_dir       | /usr/share/mysql/charsets/ |
+--------------------------+----------------------------+ 
```

显示存储在数据库中的数据没有问题：

```
live [db]> SELECT title FROM manual limit 4,1;
+----------+
| title    |
+----------+
| Allmänt |
+----------+
1 row in set (0.07 sec) 
```

（注意 ä）。

但是，当我尝试向数据库输入内容时，它的编码不正确。例如：

```
live [db]> SELECT 'ä' ;
+--+
|  |
+--+
|  |
+--+ 
```

如果我 ssh 到包含数据库的服务器，并直接与 mysql 客户端连接，我就没有这个问题。

# javascript - 将 FTL 项映射到 html 项

> ID：15409024
> 
> 赞同：1
> 
> 时间：2013-03-14T12:14:28.060
> 
> 标签：javascript, html, struts2, freemarker

我有一个 Java EE 应用程序，我在其中使用 ftl 模板生成数据网格。下面是网格模板。

```
 <tr id="_gridRow_3345${item.id}"" onclick="gridRowClick(${item.id?c},this); return true;">
            <td ${cssStyle} align="left" valign="middle" width="5%" style ="overflow: hidden;" >                
                <font> ${rowCount?c} </font>            
            </td>
            <td ${cssStyle} align="left" valign="middle" width="40%" style ="overflow: hidden;" >               
                <font> ${item.hotelName!"&nbsp;"} </font>           
            </td>
            <td ${cssStyle} align="left" valign="middle" width="40%" style ="overflow: hidden;" >               
                <font> ${item.taxCode!"&nbsp;"} </font>         
            </td>
            <td ${cssStyle} align="left" valign="middle" width="10%" style ="overflow: hidden;" >               
                <font> ${item.dispSeq!"&nbsp;"} </font>         
            </td>
        </tr> 
```

现在我想要做的是当用户点击一个项目行时，该行应该映射到一组 HTML 表单项目。例如列表框和文本框。我在我的 JS 文件中编写了一个 onGridClick 方法，对此我有一个想法！我正在解析行对象。下面是代码。

```
 setField("hotelName", gridObj.id); 
```

但是这些值没有被映射。有没有其他方法可以实现这一点。我在 Struts 框架上。请帮忙！谢谢你！

# templates - AngularJS 模板中的内联逻辑

> ID：15409025
> 
> 赞同：33
> 
> 时间：2013-03-14T12:14:31.663
> 
> 标签：templates, angularjs

有没有办法在 AngularJS 的模板中编写内联逻辑。

我想做的是这样的：

```
<div ng-repeat="item in items">
    {{item.isValid ? 'Valid item' : 'Invalid Item'}}
</div> 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-03-14T13:08:04.150

您可以使用`&&`and `||`，它最终会像三元运算符一样工作。

`{{item.isValid && 'Valid' || 'Invalid' }}`

**编辑：Angular 在 1.1.5 中引入了三元运算符：**

`{{item.isValid ? 'Valid' : 'Invalid' }}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:17:21.770

您可以使用 ng-show 插入一个跨度来显示您的条件文本

**例子**

```
<div ng-repeat="item in items">
    <span ng-show="item.isValid">
           Valid item
    </span>
    <span ng-show="!item.isValid">
           Invalid item
    </span> 
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:24:27.177

您不能在角度表达式中使用条件。而且，如果您的 div 内容很轻（只是文本），您可能需要使用 ng-bind （它还可以避免您使用额外的 span 元素）：

```
<div ng-repeat="item in items" ng-bind="{true: 'Valid item', false: 'Invalid item'}[item.isValid]"></div> 
```

# regex - 如何在“ping -a”输出中提取主机名？

> ID：15409034
> 
> 赞同：1
> 
> 时间：2013-03-14T12:14:43.667
> 
> 标签：regex, batch-file, extract, ping, hostname

我必须在“ping -a”输出中提取主机名，但我无法弄清楚，我正在考虑使用正则表达式。我需要在`r ` 和 之间提取字符` [`以获得`computername.windowsdomain.`它似乎可能吗？我在网上找不到批处理正则表达式的好资源，这都是关于 JS、PHP 和 .NET 的。

因为我是法国人，所以输出`ping -a`开始于：

```
Envoi d'une requête 'ping' sur XXXXXXXX.DOMAIN.NAME.com [127.0.0.1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:42:19.957

这样的批处理文件没有正则表达式功能。有用于过滤文本文件或程序输出中的行的选项，通过`findstr`这些选项使用它自己的正则表达式解释，看起来相似但有缺陷且有限。

在任何情况下，您都可以通过以下方式侥幸逃脱：

```
set hostname=
for /f "skip=1 tokens=2" %%x in ('ping -n 1 -a so.me.i.p') do if not defined hostname set hostname=%x
echo %hostname% 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:44:30.933

```
@ECHO OFF
SETLOCAL
FOR /f "delims=" %%i IN ('ping -n 1 -a 127.0.0.1^|find "["') DO CALL :sub %%i
ECHO hostname: %hostname%
ECHO domain: %domain%
ECHO whole chebang: %chebang%
GOTO :eof

:sub
SET hostname=%2
IF NOT %hostname:~0,1%==[ shift&GOTO sub
SET chebang=%1
FOR /f "tokens=1*delims=." %%a IN ("%1") DO SET hostname=%%a&SET domain=%%b
GOTO :eof 
```

应该为你工作。变量名不是我的专业领域......

# javascript - NodeJS - 同步 http.request 或 child_process.exec

> ID：15409039
> 
> 赞同：0
> 
> 时间：2013-03-14T12:14:53.723
> 
> 标签：javascript, node.js, synchronization

我熟悉异步执行的强度，并且知道如何使用回调。不过，出于几个原因，我希望以同步方式执行部分代码。例如，`http.get()`和`child_process.exec()`。

请注意，上面提到的两个示例都必须与事件侦听器 ( `on(...)`) 一起使用，以便收集结果和处理错误。

任何人都可以阐明这个问题的机会。一个小片段会很棒（例如，`http.get()`与其均匀处理同步）

谢谢。

**更新**：我可以用来`httpsync`生成请求并捕获响应。响应本身是一个`buffer`. 我正在使用`httysync`检索少量图像，但是在将缓冲区写入文件（使用`fs.writeFile`）时，图像无法打开。我想这与文件的某些转换有关。因此，如果有人可以帮助解决这个问题，那么它就解决了这个问题。

附上一个片段

```
var httpsync = require("httpsync");
var fs = require("fs");
var req = httpsync.get({ url : "http://www.tunisia-live.net/wp-content/uploads/2011/12/christmas-tree-wallpaper1024x768.jpg" });
var res = req.end();
fs.writeFile("out.jpg", res.data, function(err) {
    if (err)
        console.log(err);
}); 
```

# c# - 如何编辑 TableAdapter 的存储过程？

> ID：15409041
> 
> 赞同：0
> 
> 时间：2013-03-14T12:14:56.953
> 
> 标签：c#, stored-procedures, visual-studio-2012, tableadapter

使用 Visual Studio 2012，我创建了一个`TableAdapter`和一个相应的存储过程，可以通过`GetData()`. 这是使用图形查询生成器完成的。这工作正常，但我需要更改查询。

现在，这对您来说可能听起来有些无聊，但我如何编辑这个`GetData()`查询的存储过程呢？我找不到打开图形查询生成器的方法。

我从 Microsoft 找到了以下描述，它说：“TableAdapter 配置向导打开，您可以修改填充 TableAdapter 关联数据表的查询或存储过程。”

[http://msdn.microsoft.com/en-us/library/ms171902.aspx](http://msdn.microsoft.com/en-us/library/ms171902.aspx)

我遵循了这些步骤，但它不允许编辑选择语句等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:12:10.373

SQL 语句位于数据库中，而不是代码或 Visual Studio 项目中。因此，更改数据库中的语句应该可以做到。

# java - 当 Java 程序失败时，我可以修改打印的堆栈跟踪吗？

> ID：15409043
> 
> 赞同：-1
> 
> 时间：2013-03-14T12:14:59.640
> 
> 标签：java, intellij-idea, stack-trace

我正在使用 IntelliJ 的想法，每次我在编程过程中进行测试运行时我的程序崩溃，我厌倦了从堆栈跟踪中看到这么多行，我只想看到几行告诉我我的程序在哪里失败或者可能是一个对话框。有什么方法可以在想法或 Java 中实现这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:37:36.193

您可以通过为应用程序的特定行为扩展所需的异常来创建自定义异常。然后您可以覆盖方法“setStackTrace”，您可以将从现有异常中获得的堆栈跟踪转换为将发送到新异常类的参数，然后您可以从现有堆栈跟踪中提取您想要的内容并使用你想要的内容。

```
class CustomException extends Exception {
        @Override
        public void setStackTrace(StackTraceElement[] stackTrace) {
            // Get elements I want from my stack trace
                    // Then I add what I want from the existing stacktrace and add some custom content
        }
    } 
```

最好的祝福。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T12:27:03.757

此代码仅打印方法中出现的任何错误或异常的堆栈跟踪的前 5 行`doStuff()`。

```
public static void main(String[] args){
    try{
        doStuff();
    }
    catch(Throwable t){
        StackTraceElement[] elements = t.getStackTrace();
        for(int i = 0; i < 5; i++){
            System.err.println(elements[i]);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T12:43:00.450

我认为您应该看看 IntelliJ 的[控制台折叠自定义](http://blogs.jetbrains.com/idea/2010/07/console-folding-customization/)，它只会折叠堆栈跟踪的“嘈杂”部分。如果需要，您仍然可以看到整个堆栈跟踪（例如，当您试图查看谁调用了您的方法时）。

# java - 一对多映射中的@ElementCollection @CollectionTable

> ID：15409048
> 
> 赞同：8
> 
> 时间：2013-03-14T12:15:11.057
> 
> 标签：java, hibernate, jpa, jpa-2.0

我正在尝试使用嵌入式注释在 JPA 中建立关系，但我无法成功运行它，

这里我的数据库sql脚本如下，

```
create table TBL_COLLEGE(
   id integer primary key generated always as identity (start with 1000, increment by 5),
   name varchar(50)
)

create table TBL_COURSE(
   Id  integer primary key generated always as identity (start with 10, increment by 1),
   college_Id integer references TBL_COLLEGE,
   name varchar(50)
) 
```

下面是 JPA 的代码，

```
@Embeddable
public class Course {
...
...
..
@Id
@GeneratedValue(strategy= GenerationType.IDENTITY)
@Column(name="ID")
private Integer courseId;

@Column(name="NAME")
private String courseName;

@Column(name="COLLEGE_ID")
private Integer collegeId;
....
// getter and setter
} 
```

这是学院映射，

```
@Entity
@Table(name="TBL_COLLEGE")
public class College implements Serializable{
   @Id
   @GeneratedValue(strategy= GenerationType.IDENTITY)
   @Column(name="ID")
   private Integer collegeId;

   ...
   ..
   @ElementCollection(targetClass=Course.class,fetch= FetchType.LAZY)
   @CollectionTable(name="TBL_COURSE",joinColumns=@JoinColumn(name="COLLEGE_ID"))
   private Set<Course> course;
   ..
   // getter and setter
} 
```

但是，如果我尝试使用 Courses 集合来坚持 College，它会给我一个例外，

```
ERROR: HCANN000002: An assertion failure occurred (this may indicate a bug in Hibernate)
org.hibernate.annotations.common.AssertionFailure: Declaring class is not found in the inheritance state hierarchy: com.entities.Course

....
.. 
```

你能告诉我我的方法是否错误，或者我对@CollectionTable 的理解仍然很少，我错了吗

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T13:09:27.777

因为你的两个表都有自己的`ID`列，Hibernate 会希望它们都是`@Entity`类型。 `@Embeddables`没有自己的`ID`。因此，第一步是更改`Course`为 be `@Entity`，与相应`@TableName`的等。

这导致了第二个问题，即`Course`对象的集合不应该是`@ElementCollection`，而应该是[`@OneToMany`](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch07.html#collections-mapping)实体集合，并`@JoinColumn`指定`COLLEGE_ID`will 是来自 的外键`TBL_COURSE`。

最后，通过收集`Course`in`College`以及`College`id in `Course`，您暗示您想要[双向关联](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html/ch07.html#collections-bidirectional)。除其他影响外，您不应该`ID`在`Course`. 你应该只是有`College`参考。如果您不需要从`Course`->导航`College`，您可能想暂时删除它，直到您对 Hibernate 的对象映射有了更好的理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:40:07.963

虽然我的方法不合适，但它仍然适用于代码中的一些小改动，

首先，我删除了表 TBL_COURSE 并创建了一个新表，如下所示，

```
create table TBL_COURSE(    
   college_Id integer references TBL_COLLEGE,
   name varchar(50)
) 
```

在这里你可以看到我已经删除了主键，现在只有参考键和名称，

现在在 Course.java 中，我做了以下操作，

```
@Embeddable
public class Course {

// constuctor

@Column(name="NAME")
private String courseName; 
..
// setter getter
} 
```

在这里，我删除了 @Id 注释和 id 属性，我什至删除了 College_Id 映射，

其余代码与 College.java 中的代码相同，

它奏效了，

等待意见

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-03-14T12:34:14.960

您必须定义关于两个 pojo 的连接

```
@OneToMany
@JoinColumn(name=course table column id)
private Set<Course> course; 
```

# iphone - SKStoreProductViewController 无法下载应用程序

> ID：15409049
> 
> 赞同：1
> 
> 时间：2013-03-14T12:15:12.023
> 
> 标签：iphone, ios6, storekit

我正在使用 SKStoreProductViewController，如果我尝试使用真实帐户下载应用程序警报说我必须使用测试用户，但是当我使用测试用户时，结果如下

![在此处输入图像描述](../Images/a2239565d3e8706376d58c6f6f76c2d7.png)

应用程序应在明天发布，任何帮助都非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:23:21.937

`SKStoreProductViewController`在发育过程中有特殊行为。当您发布该应用程序时，它可以很好地用于购买物品。

# php - 搜索特定字符串的数组

> ID：15409053
> 
> 赞同：0
> 
> 时间：2013-03-14T12:15:23.347
> 
> 标签：php, arrays, search

我正在尝试从数组中输出特定值，但是每次运行数组时该值都在不同的位置，如下所示：

在一页上：

```
Array
(
    [id] => 12445
    [countries] => Array
        (
            [0] => Array
                (
                    [iso_3166_1] => GB
                    [certification] => 12A
                    [release_date] => 2011-07-07
                )

            [1] => Array
                (
                    [iso_3166_1] => US
                    [certification] => PG-13
                    [release_date] => 2011-07-15
                )

            [2] => Array
                (
                    [iso_3166_1] => DE
                    [certification] => 12
                    [release_date] => 2011-07-12
                )
} 
```

在另一页上：

```
Array
(
    [id] => 673
    [countries] => Array
        (
            [0] => Array
                (
                    [iso_3166_1] => US
                    [certification] => PG
                    [release_date] => 2004-06-04
                )

            [1] => Array
                (
                    [iso_3166_1] => GB
                    [certification] => PG
                    [release_date] => 2004-05-31
                )

            [2] => Array
                (
                    [iso_3166_1] => IT
                    [certification] => T
                    [release_date] => 2004-06-04
                )
} 
```

如您所见，一页上的“GB”字符串位于数组中的位置 0，而在另一页中，它位于位置 1。现在，此代码部署到的页面是动态的，所以我可以t just hard-code `$array['countries'][0]['release_date']`，其中'release_date'是我想从数组中提取的实际值，所以我想我需要代码来搜索数组中的'GB'（或'US'，或其他country 需要返回），找到包含该字符串的索引号并将其作为 $uk_release_date 或某些此类命名变量动态地放入查询中。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:20:38.227

```
$index = -1;

foreach($array['countries'] as $k=>$v) {
  if(array_search('GB', $v)) { // Search for GB
    $index = $k;
    break;
  }
}

echo $array['countries'][$index]['release_date']; // This will be the release date for GB 
```

# android - 没有手动登录就无法从网络服务器检查 Android 订阅状态 ？

> ID：15409056
> 
> 赞同：0
> 
> 时间：2013-03-14T12:15:25.970
> 
> 标签：android, web-services, login, google-play, subscription

经过深入研究，在我看来，如果没有手动登录来生成访问令牌，目前无法自动从我的 php 服务器（例如 cronjob 或订阅结束）检查 Google Play Android 订阅的状态。

这个对吗？如果不是破坏者，我是唯一一个觉得这是一个巨大的不便的人吗？我不想每天在我的网络服务器上手动登录只是为了检查 Google Play 的订阅。

请参阅： [https ://developers.google.com/android-publisher/authorization](https://developers.google.com/android-publisher/authorization)

# vb.net - 使用 TableAdapter 按日期查询 SQLite

> ID：15409060
> 
> 赞同：0
> 
> 时间：2013-03-14T12:15:30.850
> 
> 标签：vb.net, dataset, system.data.sqlite

所以......我正在使用 System.Data.SQLite 使用 VB.Net 进军 SQLite，并尝试使用带有 WHERE 子句的 TableAdapter 生成一个 GetDataBy......范围。

```
SELECT        ID, FileName, LastModified
FROM            Playlists
WHERE        (LastModified > @LastScanned) 
```

使用 DataSet 编辑器生成它，在运行时我可以在调试器中看到该参数配置为日期字段，但是当调用 .Fill() 方法时，生成的 DataTable 没有行。

使用 SQLite Administrator，如果我将日期作为字符串传递，我可以让查询工作。

```
SELECT * FROM Playlists WHERE LastModified > '1601-01-01' 
```

如果我尝试将标准更改为

```
WHERE        (LastModified > **'@LastScanned'**) 
```

然后数据集编辑器返回一个错误，指出：“*无法将条目转换为有效的日期/时间；可能需要 TO_DATE 函数。*”

所以我被困住了。将不胜感激如何获得此工作的示例。

干杯，

罗伊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:09:10.593

所以我决定在 DataSet 编辑器中重新创建 FillBy 和 GetDataBy 方法，问题就消失了。

不知道发生了什么变化，我没有以任何方式触及数据库结构，但重新运行配置向导解决了问题！

干杯，

罗伊

# mysql - mysql JOIN 中的 IF 语句 - 如果条件成功，则添加多个条件

> ID：15409062
> 
> 赞同：2
> 
> 时间：2013-03-14T12:15:37.247
> 
> 标签：mysql

情况如下：-

我想加入 2 张桌子。让我们说桌子`a`和`b`

```
SELECT * 
FROM a 
JOIN b ON a.id = b.id AND b.status = '1' 
```

这是问题所在：

```
b.status = '1' 
```

应该只在

```
b.stage in (1, 3, 5, 6, 8) 
```

如何在`ON`子句中添加这样的条件？

喜欢

```
ON a.id = b.id 
CASE
   IF (b.stage in (1, 3, 5, 6, 8))
THEN
   AND b.status = '1'
END 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T12:18:49.600

您的条件在逻辑上与“*任*一阶段不在列表中*或*状态为 1”相同：

```
SELECT * 
FROM a 
JOIN b ON a.id = b.id 
    AND (b.stage not in (1, 3, 5, 6, 8) OR b.status = '1') 
```

# c# - 无法使用我的 ASMX Web 服务

> ID：15409064
> 
> 赞同：1
> 
> 时间：2013-03-14T12:15:38.293
> 
> 标签：c#, web-services, asmx

我已经构建了这个 Web 服务，它从 SQL 中的一个表返回所有链接。我看到很多教程，他们刚刚为项目添加了一个新的 Web 引用，他们从项目中选择了 Web 服务，他们选择了他们想要的 Web 服务，然后单击添加引用，然后他们刚刚创建了一个新的网站并他们用这个代码来调用它：

```
WebServiceLinks.Service proxy = new WebServiceLinks.Service();
WebServiceLinks.Vezvi Links = proxy.GetLinks(); 
```

然后他们只是将其传递给标签。当我尝试编写 WebServiceLinks 时，我找不到 Service 类。这是我写的代码。（我使用的是 Microsoft Visual Studio 2010）。

**代码**：

```
public static string GetLinks()
{

    string query = string.Format("SELECT Link FROM Linkovi");
    StringBuilder result = new StringBuilder();
    try
    {
        conn.Open();
        command.CommandText = query;

        SqlDataReader reader = command.ExecuteReader();

        while (reader.Read())
        {
            result.Append(reader["Link"].ToString());
        }
        reader.Close();
    }
    finally
    {
        conn.Close();
    }
    return result.ToString();
} 
```

这就是我调用该方法的方式：

```
[WebMethod]
public string GetLinks()
{
    return ConnectionClass.GetLinks();
} 
```

另外，如果我能够将其传递给标签，是否可以在链接之间添加中断？

此链接帮助我解决了我的问题： [https ://www.youtube.com/watch?v=qOqEKpYbTzw](https://www.youtube.com/watch?v=qOqEKpYbTzw)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-03-14T19:21:52.563

如果它是 asmx 文件，则在 Visual Studio 中转到 Web References 文件夹，展开该文件夹，您应该会在那里看到该服务。右键单击该服务，然后单击在对象浏览器中查看。这应该会打开对象浏览器并向您显示您需要使用的类的名称空间。它可能类似于： MyWebsite.MyService 其中 MyWebsite 可能是您的项目的名称，而 MyService 可能是您的服务的名称。然后在代码中只写

```
MyWebsite.MyService service = new MyWebSite.MyService(); 
```

那应该为你得到它。

# reporting - 用于拥有 2000 万条记录的大型数据库的报告软件

> ID：15409072
> 
> 赞同：1
> 
> 时间：2013-03-14T12:16:19.293
> 
> 标签：reporting

是否有任何报告或 BI 可以在庞大的数据库上即时生成和预览？想象一下，我将创建一个报告，该报告将获取具有 2000 万条记录的单个表上的数据。我在报告或 BI 中想要的是，它应该只在数据库中获取单个页面或文档所需的数据，以便它可以立即将其显示给最终用户并在后台执行其他页面。此外，在页面之间导航时，它应该明智地处理页面，以免它留在内存中。想象一下，如果报告有 10000 页（我知道这不切实际），但最终用户却不知道实际的页数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T15:56:05.200

[DBxtra](http://www.dbxtra.com/)能够从大型数据库生成报告，它能够快速创建报告的第一页并在后台生成其余的报告。但老实说，超过 1,000 页的报告是不切实际的，除非您打算将它们存储起来以供以后审核。

# html - HTML：元素的动态大小

> ID：15409079
> 
> 赞同：0
> 
> 时间：2013-03-14T12:16:49.210
> 
> 标签：html, css, dynamic

我正在寻找一种将元素大小动态更改为页面大小的方法。
**我知道使用 javascript 是可能的。:-)**
但是还有一个使用 CSS 单位的新解决方案：**vw**、**vh**、**vmin**和**vmax**。这些单位是相对于视口的，而且效果非常好。我只有一个问题。我的页面应该有一个最小尺寸。因此，我还必须为视口设置最小尺寸，以便为相关元素提供最小尺寸。不幸的是，我没有找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:14:58.457

## **我认为你最好的选择是使用 CSS 媒体查询。**

根据您的需要，您可以根据当前媒体状态（通常是设备宽度）或特定元素为页面定义完全不同的样式表。

例如

**不同的样式表**

```
<link rel='stylesheet' href='css/base.css' />
<link rel='stylesheet' media='screen and (max-width: 700px)' href='css/small.css' />
<link rel='stylesheet' media='screen and (min-width: 701px)' href='css/large.css' /> 
```

其中定义的样式`small.css`仅在视口为 700 像素或更`large.css`小时应用，而在 701 像素以上时应用的样式。

* * *

**尺寸特定规则：**

```
body {
    background: #000;
    color: red;
}

//styles within this block are only applied when the window is <= 700px
@media all and (max-width: 700px) {
  body {
    background: #ccc;
    color: #258;
  }
} 
```

在[Chris Coyer 的 CSS 技巧](http://css-tricks.com/css-media-queries/)（它本身大量使用 CSS 媒体查询）中还有很多这样的内容

此外[，对视口单元的支持非常低](http://caniuse.com/viewport-units)，虽然媒体查询并不普遍，但它们[肯定更为普遍](http://caniuse.com/css-mediaqueries)（大约是两倍）。

# java - 最终静态整数和静态最终整数之间的区别？

> ID：15409080
> 
> 赞同：0
> 
> 时间：2013-03-14T12:16:51.753
> 
> 标签：java, static, final

`final static int x = 1;`和有什么区别`static final int x=1`吗？换句话说，java 编译器`x`在这两种情况下会以完全相同的方式表示吗？

编辑：编译器对于静态和最终是否有任何优先级或优先级？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T12:17:31.317

编译器将以相同的方式表示它们没有区别。

这只是个人喜好，我个人使用`static final`，这是我通常看到的其他开发人员使用的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T12:19:32.787

**没有语义差异。**来自 JLS（[§8.3.1 字段修饰符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1)）：

> ```
> FieldModifier: one of
>      Annotation public protected private
>      static final transient volatile 
> ```
> 
> 如果两个或多个（不同的）字段修饰符出现在字段声明中，尽管不是必需的，但习惯上它们的出现顺序与上面在 FieldModifier 的产生式中显示的顺序一致。

因此，优选的形式是

```
static final int x=1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T12:18:20.227

java编译器在两种情况下都以完全相同的方式表示x

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T12:19:15.983

没有不同。我更喜欢使用`final static int`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T12:23:19.313

这是来自 Java 语言规范[§8.3.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.1)：

`FieldModifier: one of Annotation public protected private static final transient volatile`

> 如果两个或多个（不同的）字段修饰符出现在一个字段声明中**，尽管不是必需的**，但习惯上它们的出现顺序与上面在 FieldModifier 的产生式中显示的顺序一致。

因此，在您的情况下，两者之间没有区别。只有这样`static final`更习惯。

# java - JTextArea 到文件

> ID：15409086
> 
> 赞同：2
> 
> 时间：2013-03-14T12:17:17.033
> 
> 标签：java, swing, file, jtextarea, bufferedwriter

我想将文本从 JTextArea 保存到文件中，下面的代码工作得很好，但唯一的问题是没有转换换行符。这意味着无论我在 JTextArea 中有多少行，它们都显示在文本文件中的一行中。

```
BufferedWriter writer = new BufferedWriter(new FileWriter(file));
writer.append(textArea.getText());
writer.close(); 
```

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T12:20:08.303

一个不错的解决方案是使用 JTextArea 本身附带的 Writer。等等，……例子来了……

**编辑**示例如下：

```
BufferedWriter writer = new BufferedWriter(new FileWriter(file, true)); // true for append
textArea.write(writer);
writer.close(); 
```

# html - 如何使用最小宽度、最大宽度和宽度 100%

> ID：15409091
> 
> 赞同：9
> 
> 时间：2013-03-14T12:17:43.117
> 
> 标签：html, css, width

任何人都请帮我描述一个合适的最小宽度最大宽度和宽度 100% 的例子，我为什么要专门使用这个？

**编辑**

对于大多数计算机分辨率可能匹配的最小宽度，我应该使用什么。对于大多数计算机分辨率可能匹配的最大宽度，我应该使用什么。

**编辑** 我需要更好的例子，因为 yahoo.com 使用

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-14T12:22:29.067

**min-width：**如果设置为 50px，则默认情况下，您的 div 宽度为 50px。如果 div 内的内容的宽度超过 50px，那么它（你的 div 的最小宽度）将会扩展。

**max-width：**如果设置为 50px，如果 div 内的内容宽度大于 50px，那么它（你的 div 的 max-width）将不会展开，根据你的溢出设置，可能会出现水平滚动。

**width:100%**默认情况下，div 的宽度为 100%，但如果您有浮动 div，并且希望它们占据容器的所有水平空间，那么 width:100% 确实有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T12:29:49.287

这很笼统，但是：

*   **min-width**在您将宽度设置为 % 并且您不希望元素太小的情况下非常有用。

    ```
    <div style="100%">
        <div style="width:30%;min-width:50px;"></div>
    </div> 
    ```

所以如果父 div 太小，孩子至少有 50px。

或者，如果 div 取决于父窗口宽度，则可以使用它。min-width 的优先级高于 width 和 max-width。

*   **max-width**可以以类似的方式使用。

*   **width:100%**在这里详细解释：[http ://www.impressivewebs.com/width-100-percent-css/](http://www.impressivewebs.com/width-100-percent-css/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T12:21:04.890

**最小宽度：**

div 的最小宽度，它永远不会小于给定的宽度。

如果 min-width:50px 的 div 将始终最小为 50 px 或更大。

如果 min-width:50% div 将是其所在对象的 50%。

（如果它在 1200px 的 div 中，它将是 600px）

（如果第一个 div 将是屏幕的 50%）

**最大宽度**

与最小值相同，但现在它永远不会变大而不是永远不会变小。因此，如果：

最大宽度：50%

div 永远不会大于其所在对象的 50%。

如果您希望页面在每个分辨率上看起来完全相同，则使用 %。

如果你有 1 个宽度为 80% 的 div

```
 <div id="1"> 
```

和其中 1 个 div，宽度为 50%

```
 <div id="2"> 
```

div 2 将是 80% 的 50%，因此它将是总页面的 40%。

如果您的 div 没有宽度，则可以使用 min-width 和 max width：

然后，div 将介于 min-width 和 max-width 之间，具体取决于内容。

如果你使用 width:100% 它使 div 100% 成为对象的宽度。

如果它的第一个 div 是屏幕的整个宽度。

如果它在宽度为 500px 的 div 中，则 div 将是 500 px 的 100% 所以 500px

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T12:22:14.047

**`min-width`**用于固定最小宽度，宽度值达到给定范围后，div会自动开始展开

**`max-width`**用于在该范围 div 不会得到扩展之后给出最大宽度。

**`width:100%`**将 div 扩展到浏览器/父元素的可用空间

# c# - 需要 _layout 来显示来自控制器的数据集

> ID：15409093
> 
> 赞同：0
> 
> 时间：2013-03-14T12:17:45.670
> 
> 标签：c#, asp.net-mvc, razor

我可能在这里把自己逼到了墙角，但无论如何；

我希望我的布局页面显示我从帐户控制器检索到的一些信息。我也想在没有 ViewBag 的情况下以“正确”的方式来做，所以我为它制作了一个 Controllerand Datamodel。

模型;

```
 public class Culture
    {
        public string culture { get; set; }
    } 
```

控制器;

```
public ActionResult Index()
{
    var model = new Culture {  "foo" };
    return PartialView(model);
} 
```

看法;

```
@model PlayGround.Models.Culture
@{
    Layout = null;
}
<h2>@Model.culture</h2> 
```

然后我只是从_Layout中调用它

```
 @Html.Action("index", "Culture") 
```

这工作正常，但我想在函数（帐户控制器）中设置“foo”的问题，我希望数据保持不变，直到告诉它其他东西......所以这个问题很愚蠢，但我无法得到我的绕过它，我如何从另一个控制器以一种很好的方式设置模型数据？还是我离目标有点远？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:19:25.360

我会用它`Session`来存储文化信息。

# php - Zend Framework 2：一个动作的多条路线

> ID：15409095
> 
> 赞同：3
> 
> 时间：2013-03-14T12:17:48.353
> 
> 标签：php, routing, get, zend-framework2

在 Zend Framework 2 中执行以下操作是否有更好的解决方案：

我需要这两个 URL 执行一项操作 - help/section/5 和 help/section.php?id=5

我认为这种方式太复杂了：

```
 'helpSection' => array(
            'type' => 'Zend\Mvc\Router\Http\Segment',
            'options' => array(
                'route'    => '/help/section/:id',
                'defaults' => array(
                    'controller' => 'Application\Controller\Help',
                    'action'     => 'section',
                ),
            ),
        ),
        'helpSection2' => array(
            'type' => 'Zend\Mvc\Router\Http\Segment',
            'options' => array(
                'route'    => '/help/section.php',
                'defaults' => array(
                    'controller' => 'Application\Controller\Help',
                    'action'     => 'section',
                ),
            ),
            'child_routes'  => array(
                'query' => array(
                    'type' => 'Zend\Mvc\Router\Http\Query',
                    'options' => array(
                        'defaults' => array(
                            'id' => ':id'
                        )
                    )
                ),
            ),
        ), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:26:35.273

未经测试，但这实际上可能有效......它应该与以下内容匹配：

*   /帮助/部分
*   /help/section?queryString
*   /help/section.php
*   /help/section.php?queryString
*   /帮助/部分/1
*   /help/section/1?queryString

这将是配置：

```
'type' => 'segment',
'options' => array(
    'route' => '/help/section[(.php|/:id)]',
    'defaults' => array(
        'controller' => '...',
        'action' => '...'
    ),
    'constraints' => array(
        'id' => '[0-9]+'
    )
),
'may_terminate' => true,
'child_routes' => array(
    'query' => array(
        'type' => 'query'
    )
) 
```

# database - 如何在magento的数据库中保存Json_encode数据？

> ID：15409099
> 
> 赞同：0
> 
> 时间：2013-03-14T12:17:58.523
> 
> 标签：database, json, magento, magento-1.7

我正在使用magento 1.7版本。在这个我有一个数组中的数据。我使用json将它编码`json_encode`并插入到数据库中。但是我遇到了错误

> 连接被重置。

如果我插入正常值，那么它工作正常。在数据库中，我有字段类型`longtext`。我使用了`mysql_real_escape_string()`, `base_63_encode()`，`serialize()`但没有成功。我正在使用以下代码

```
$table = Mage::getSingleton('core/resource')->getTableName('checkout_prescription_details');
$write = Mage::getSingleton('core/resource')->getConnection('core_write');

$custom = json_encode($customoptions);
$query = "insert into {$table} set `data`='$custom';          
$write->query($query); 
```

在此，当我`echo $query`然后它显示编码数据时，当我从 phpmyadmin 插入它时，它会插入数据库，但使用`$write->query($query);`它不会插入数据库。

请就此提出建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-09-20T20:58:14.490

查看 Magento 的核心 JSON 编码和解码函数

编码一个数组

> Mage::helper('core')->jsonEncode($array);

解码数组

> Mage::helper('core')->jsonDecode($jsonData);

```
Mage::getModel('checkout/prescription_details')
    ->setData('data', Mage::helper('core')->jsonEncode($customoptions))
    ->save(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:12:43.500

1.  您没有转义查询参数，并且（除了 SQL 注入）JSON 字符串通常包含单引号，这会中断查询。
2.  你不应该首先使用 SQL 查询来完成这项工作，让 Magento 为你完成这项工作。假设此表有一个模型，别名为`checkout/prescription_details`：

```
Mage::getModel('checkout/prescription_details')
    ->setData('data', json_encode($customoptions))
    ->save(); 
```

如果没有模型，请继续创建一个。你不应该有没有相应模型的数据库表。

# ios - iOS 中带有复选框控件的 AlertView

> ID：15409102
> 
> 赞同：1
> 
> 时间：2013-03-14T12:18:06.153
> 
> 标签：ios

我想在 ios 中显示一个带有通常标题、消息和两个按钮的警报视图对话框 + 另外我需要一个带有“总是显示这个”之类的消息的复选框。在苹果 HIG 文档中，他们说最好使用操作表或视图控制器，而不是在警报视图中显示更多控件。有没有其他选择？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:22:16.933

您可以创建自定义视图，您可以在其中获得所有需要的控件，如果您想显示，您还可以使用漂亮的动画来显示它们，您还可以设置一些好的图形。所以最好的方法是创建CustomView。

祝一切顺利 ！！！

# c - 从 char * 转换为 char[]

> ID：15409103
> 
> 赞同：0
> 
> 时间：2013-03-14T12:18:12.270
> 
> 标签：c, char

我在以下代码中遇到分段错误

```
static char * result;

char s[31];

int i;

random_string(s, 10);

 // for (i = 0; i < 15; i++){
 //     result[i] = s[i];
 // }

strcpy(result, s);

printf("el result es %s\n", result); 
```

其中函数 random_string 是：

```
void random_string(char * string, int length)
 {
  /* Seed number for rand() */

 int i;

for (i = 0; i < length -1; ++i){

    string[i] = rand() % 90 + 65;
 }

 string[length] = '\0';
} 
```

由于某种原因，我在使用 strcpy 时遇到了分段错误。逐字节复制也不起作用。问题是什么？我没主意了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T12:20:13.890

问题是`result`没有初始化。它会导致未定义的行为。在它可以这样使用之前，您需要确保它指向一个有效的缓冲区。例如：

```
result = malloc( strlen( s ) + 1 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T12:21:09.910

您忘记为“结果”指针分配内存。接下来试试：

```
result = malloc( strlen( s ) + 1 );
strcpy(result, s); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T12:22:06.320

静态字符 * 结果；只是一个没有任何分配内存的地址！

试试这个：[编辑]

```
char * result = (char*)malloc(strlen(s) + 1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T12:21:13.197

结果只是一个未初始化的指针。在使用 strcpy 之前，您必须将结果分配给字符缓冲区。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T12:22:49.343

您需要使用 malloc 或使用静态内存为结果指针分配一个有效的内存区域，就像您对 s 字符串所做的那样。否则，您的指针仅分配了一个随机位置，并且您的程序通过访问它来接收段错误，因为它位于程序的边界之外。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T12:38:18.027

将结果声明为 char 数组，如 static char result[10];

或为结果指针分配一些内存。

# android - 如何在地图信息气泡中添加按钮

> ID：15409105
> 
> 赞同：0
> 
> 时间：2013-03-14T12:18:18.320
> 
> 标签：android, google-maps

我正在尝试向我的地图 itemizedoverlay 添加一个按钮。现在我可以使用 itemizedoverlay 绘制一个空的气泡。但我想在上面添加一个按钮。我试图将该按钮定义为另一个叠加层并将其添加到另一个地理点并设法使其看起来像是在气泡上。但是当我放大或缩小时，对话气泡和按钮的位置会发生变化。我试图将它们设置在同一个地理点上。但之后逐项叠加的点击功能无法正常运行。我检查了很多东西，例如[https://github.com/jgilfelt/android-mapviewballoons](https://github.com/jgilfelt/android-mapviewballoons)。我不允许使用外部库。所以我需要你的帮助。提前致谢...

# extjs - 将 hbox 布局中的面板设置为父高度？

> ID：15409108
> 
> 赞同：3
> 
> 时间：2013-03-14T12:18:25.997
> 
> 标签：extjs, extjs4.1

我有一个带有`fit`布局的子面板的面板。

现在我想在右侧添加第二个子面板，所以我将布局设置为`hbox`并在第一个面板之后添加了第二个面板。

但是现在孩子没有父母的**身高**了。

该`flex`选项负责宽度，**什么负责高度**？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:21:24.857

对齐，默认情况下它会自动高度（面板的高度）。但是您可以通过在布局中添加它来使其延伸到父容器：

```
layout: {
   type: 'hbox',
   align: 'stretch'  //stretch vertically to parent
} 
```

[这里有一个解释： http](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.layout.container.HBox-cfg-align) ://docs.sencha.com/ext-js/4-1/#!/api/Ext.layout.container.HBox-cfg-align

# java - 找不到文件：在 WIFI 上完全可以，但在 3G 上我有一个例外

> ID：15409118
> 
> 赞同：0
> 
> 时间：2013-03-14T12:18:52.043
> 
> 标签：java, android, json

我的 android 应用程序设置为 minSdkVersion="16" targetSdkVersion="17"。我使用以下代码。

```
URL urlLinkSource = new URL("XXXX");
                urlLinkSourceReader = new BufferedReader(new InputStreamReader(
                        urlLinkSource.openStream(), "UTF-8"));
                ObjectMapper mapper = new ObjectMapper();
                mapper.configure(
                        DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES,
                        false);
                dataContainerListLightData = mapper.readValue(urlLinkSourceReader,
                        new TypeReference<List<DataContainerListLight>>() {
                        }); 
```

用于读取我的 JSON 数据。主要问题是当我使用 WIFI 时一切正常，当我只切换到 3G 连接时，我有下一个异常：

```
03-14 14:06:22.349: W/System.err(7578): java.io.FileNotFoundException 
```

事实上，我有 2 个 JSON 源进行处理。没有WIFI的纯3G连接是否有池连接限制或其他限制？我的异常的确切位置是 urlLinkSource.openStream() （日志在说它），我尝试了 brawser 和 wifi 测试 - 一切正常。纯 3G 模式下该异常的根源是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:46:00.863

您是否尝试过使用 3G 连接在浏览器中打开网址？您似乎想实现一个 RESTful 接口，所以我建议您使用 DefaultHttpClient。

在这里您可以看到如何实现这样的接口： [如何从 RESTful 服务器获取 JSON 内容到 Android 客户端？](https://stackoverflow.com/questions/6611663/how-to-get-json-content-from-a-restful-server-to-a-android-client)

# xcode - Xcode 一夜之间丢失了所有主题

> ID：15409125
> 
> 赞同：0
> 
> 时间：2013-03-14T12:19:10.180
> 
> 标签：xcode, color-scheme

我完全不知道会发生什么，但是 Xcode 一夜之间失去了所有的主题。我没有安装新的更新。我昨天晚上刚刚关闭了我的 Mac，今天除了标准主题之外的所有主题都消失了。

我检查了目录： ***~/Library/Application Support/Xcode/Color Themes*** ，所有主题仍然可用。我尝试删除除了一个相当新的以外的所有内容，以检查其中一个是否有问题。但这没有帮助。

我还重新启动了我的 Mac。我不知道发生了什么事？

昨天早上我在这台 Mac 上创建了一个新用户，该用户没有管理员权限，但通过以下终端命令设置为开发人员：

```
sudo dscl . append /Groups/_developer GroupMembership <username> 
```

这可能是原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T08:34:52.733

安装[Alcatraz](https://mneorr.github.io/Alcatraz)并永远解决您的问题 :)

# windows - 如何跟踪所有堆分配？

> ID：15409130
> 
> 赞同：0
> 
> 时间：2013-03-14T12:19:19.303
> 
> 标签：windows, winapi, visual-c++, memory, kernel

我想跟踪我们项目中的所有堆分配，例如directX的内存分配。我想我可以通过库绕行拦截函数rtlheapalloc rtlheaprealloc rtlheapfree 并跟踪传入的参数，这种方式正确吗？[車輛改道](http://research.microsoft.com/en-us/projects/detours/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:11:57.923

使用[umdh.exe](http://support.microsoft.com/kb/268343)

> 用户模式转储堆 (UMDH) 实用程序与操作系统一起分析特定进程的 Windows 堆分配。

# python - TypeError：“NoneType”对象在 Python 中与 BeautifulSoup 一起使用时不可调用

> ID：15409132
> 
> 赞同：2
> 
> 时间：2013-03-14T12:19:24.437
> 
> 标签：python, beautifulsoup, python-requests

今天我在玩 BeautifulSoup 和 Requests API。所以我想我会写一个简单的爬虫，它会跟随深度为 2 的链接（如果这有意义的话）。我正在抓取的网页中的所有链接都是相对的。（例如：）`<a href="/free-man-aman-sethi/books/9788184001341.htm" title="A Free Man">`所以为了让它们绝对，我想我会使用`urljoin`.

为此，我必须首先从`<a>`标签中提取 href 值，为此我认为我会使用`split`：

```
#!/bin/python
#crawl.py
import requests
from bs4 import BeautifulSoup
from urlparse import urljoin

html_source=requests.get("http://www.flipkart.com/books")
soup=BeautifulSoup(html_source.content)
links=soup.find_all("a")
temp=links[0].split('"') 
```

这给出了以下错误：

```
Traceback (most recent call last):
  File "test.py", line 10, in <module>
    temp=links[0].split('"')
TypeError: 'NoneType' object is not callable 
```

在正确阅读文档之前潜入水中，我意识到这可能不是实现我的目标的最佳方式，但为什么会有 TypeError？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T12:25:04.393

`links[0]`不是字符串，而是`bs4.element.Tag`. 当您尝试在其中查找时`split`，它会施展魔法并尝试找到名为 的子元素`split`，但没有。你称之为无。

```
In [10]: l = links[0]

In [11]: type(l)
Out[11]: bs4.element.Tag

In [17]: print l.split
None

In [18]: None()   # :)

TypeError: 'NoneType' object is not callable 
```

使用索引查找 HTML 属性：

```
In [21]: links[0]['href']
Out[21]: '/?ref=1591d2c3-5613-4592-a245-ca34cbd29008&_pop=brdcrumb' 
```

或者`get`，如果存在不存在属性的危险：

```
In [24]: links[0].get('href')
Out[24]: '/?ref=1591d2c3-5613-4592-a245-ca34cbd29008&_pop=brdcrumb'

In [26]: print links[0].get('wharrgarbl')
None

In [27]: print links[0]['wharrgarbl']

KeyError: 'wharrgarbl' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:25:08.860

因为`Tag`该类使用代理来访问属性（正如 Pavel 指出的那样 - 这用于在可能的情况下访问子元素），所以在找不到它的地方`None`返回默认值。

复杂的例子：

```
>>> print soup.find_all('a')[0].bob
None
>>> print soup.find_all('a')[0].foobar
None
>>> print soup.find_all('a')[0].split
None 
```

你需要使用：

```
soup.find_all('a')[0].get('href') 
```

在哪里：

```
>>> print soup.find_all('a')[0].get
<bound method Tag.get of <a href="test"></a>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-07T08:12:44.090

我刚刚遇到了同样的错误 - 所以四年后它的价值：如果您需要拆分汤元素，您也可以在拆分之前对其使用 str() 。在你的情况下，这将是：

```
 temp = str(links).split('"') 
```

# c++ - std::function 代替谓词的模板

> ID：15409133
> 
> 赞同：11
> 
> 时间：2013-03-14T12:19:24.757
> 
> 标签：c++, templates, c++11, stl, std-function

许多标准库算法采用谓词函数。但是，这些谓词的类型是用户提供的任意模板参数。为什么 C++11 不指定这些采用特定类型，例如`std::function`？例如：

```
template< class InputIt >
InputIt find_if( InputIt first, InputIt last,
             std::function<bool()> p ); 
```

使用 this 而不是模板作为参数类型不是更干净吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T12:30:44.743

`std::function`用于*运行时*多态性。任何特定`std::function`实例都可以存储任何类型的函子（当然，这种类型适合`std::function`' 的签名）。

标准库算法等根据其函数参数的类型进行模板化。因此，他们不需要运行时多态来完成他们的工作；它们依赖于编译时多态性。

最重要的是，此类算法不需要将运行时多态性的*成本强加给您。*如果你想要运行时多态性，你可以发送一个`std::function`或任何东西。如果你想要编译时多态性，你可以为它提供一个不使用多态调度的类型（又名：大多数函子或函数）。

运行时多态性的代价还包括无法内联函数调用。使用适当的函子（甚至函数指针，取决于您的编译器有多好），编译器通常可以根据需要内联函数调用。使用运行时多态性，您不仅要支付运行时调度的成本（可能包括额外的参数转发成本），而且还会失去重要的优化机会。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-14T12:38:46.677

表现！

模板基础功能非常非常好于`std::function`模式。我为你做了这个测试：

```
template <typename F>
void test1(const F &f)
{
    for (unsigned long long i = 0; i < 19000000; i++)
        f();
}

void test2(function<void()> &f)
{
    for (unsigned long long i = 0; i < 19000000; i++)
        f();
}

int main()
{
    {
    LARGE_INTEGER frequency, start, end;
    double interval;
    QueryPerformanceFrequency(&frequency);
    QueryPerformanceCounter(&start);

    unsigned long long x = 0;
    test1([&x]()
    {
        x++;
    });

    QueryPerformanceCounter(&end);
    interval = (double) (end.QuadPart - start.QuadPart) / frequency.QuadPart;

    cout << "Template mode: " << interval << " " << x << endl;
    }
    {
    LARGE_INTEGER frequency, start, end;
    double interval;
    QueryPerformanceFrequency(&frequency);
    QueryPerformanceCounter(&start);

    unsigned long long x = 0;
    function<void() > f = [&x]()
    {
        x++;
    };
    test2(f);

    QueryPerformanceCounter(&end);
    interval = (double) (end.QuadPart - start.QuadPart) / frequency.QuadPart;

    cout << "std::function mode:" << interval << " " << x << endl;
    }
} 
```

> 模板模式：2.13861e-006
> 
> 标准：：功能模式：0.220006

*Windows7`-O2`* Core2 Duo CPU 2.40GHz上的 gcc 4.7.2

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-14T14:37:51.137

因为`std::function`不完美。

怎么不完美？让我列举一下方法。

`{`

首先，`std::function`不支持完美转发传入的任意对象。而且，在实践中，它不能。 `std::function`向调用者公开一个固定签名，可以接受多种被调用者，完美转发需要为每个调用者和被调用者定制一个签名。它确实支持完美转发*它*在其签名中公开的参数，但这还不够。

想象一个`std::function`有两个参数`int`的 a 和一个`double`。为了让它进行完美的转发，它必须接受`int&`,`int&&`和`int const&`, 乘以相同的集合`double`（更不用说它的易变变体了）。每个`std::function`人必须接受以实现完美转发的签名数量随着它拥有的参数数量呈指数增长。 `std::function`它公开的一组签名（目前为 1 个）在实例化时是固定的，而它公开的一组模板签名是无限的，并且仅在使用时生成。这很重要，因为某些类似函数的对象确实针对这些情况进行了不同的优化！因此，`std::function`您已经消除了将呼叫完美地转发到包装类型的机会。

不完美的第二个原因`std::function`是编译器很烂。如果您将 lambda 包装在 a`std::function`然后用它调用算法，编译器理论上可以意识到这`std::function`是包装了一些固定的 lambda - 但在实践中，它忘记了这一事实，并将 视为`std::function`一些通用类的包装器. 因此，即使在签名`std::function`与算法的用例完全匹配的情况下，防止类型瓶颈`std::function`使转发不完美，实际上也会由于 执行的类型擦除而产生开销`std::function`，并且编译器将发现很难优化`std::function`呼叫“障碍”。

不完美的第三个原因`std::function`是它会鼓励算法编写者过度限制可以在算法中传递的参数。如果您检查`find_if`，天真的假设是您要查找的内容应该与存储在容器中的类型相同，或者至少是可转换的：但`std::find_if`算法只要求它们在传入的函子下是可比较的。

这使您可以编写多类型感知函子并传入与容器上的类型无关的目标对象，并且一切正常。大多数人不需要这个，他们的代码没有它就可以工作——这也很好。

天真的`std::find_if`会提取容器的底层类型，比较函数将在该类型的对之间进行 - 或者，这将是容器类型和正在搜索的事物类型之间的 4 路比较。在一种情况下，我们失去了灵活性——在另一种情况下，每个人都为一个奇怪的极端情况买单。而在 C++ 中，您应该只在需要时为需要的功能付费！

不完美的第四个原因`std::function`是它本质上是一种类型擦除工具。这些是实现细节，但我不知道与它们相差甚远的编译器。A`std::function`的目的是公开单个签名和返回值，并说“我可以存储与此签名和此返回值匹配的任何内容，您可以调用它”。它公开了一个静态运行时接口和实现来执行此任务。当您初始化 a`std::function`时，它会在编译时生成一个帮助对象，该对象将该特定对象包装在统一`std::function`接口中，然后将其存储在`pImpl`模式中。如果您不需要类型擦除，所有这些都是不必要的工作。

标准算法是关于编写几乎与手工解决方案一样高效的高级代码。即使是指针函数调用的成本也不需要解决大多数这些问题，更不用说通过类型擦除的虚拟调用了`std::function`。

`}; // enum`

`std::function`是一个很棒的回调工具，用于替换样板的单一用途`virtual`接口，以及当您需要向调用者隐藏实现细节时（例如，您需要跨越编译单元边界进行设计决策）。

好消息是，这个问题的更好解决方案正在酝酿之中。特别是，C++14 或 C++17 的目标之一是它将具有某种“概念”支持，您可以在其中说“此模板参数具有以下属性”。确切的语法是什么还远未确定——C++11 概念提案可能会走得很远——但人们对此充满热情，现在有一个工作组来解决这个问题。

当它完成时或如果它完成，您将能够用有意义的概念信息标记函子，这些信息说“这个参数不仅仅是任何类型，而是一个接受两个值的函子类型（包括包含的数据类型） )，并返回`bool`编译器、您的 IDE 和您可以理解的兼容值”，而无需查看函数的文档。

# windows - Regedit：从命令提示符查找和导出密钥

> ID：15409138
> 
> 赞同：7
> 
> 时间：2013-03-14T12:19:29.150
> 
> 标签：windows, registry, regedit

我想知道是否有任何选项可以通过命令行搜索字符串并导出 Windows 注册表中找到的所有键？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T13:04:20.417

Ex:: 如果要检查“HKLM\software\etc”键是否存在。

`reg.exe query "HKLM\Software\etc"`如果找到，将返回命令提示符中的所有子项和值，如果未找到，则返回错误。

另外，你可以直接做

```
reg.exe export "HKLM\software\etc" "C:\etc.reg" 
```

如果找到，这将导出注册表项和子项，否则如果找不到则错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T12:47:41.363

Powershell 具有注册表迭代功能。从这里开始：[http ://technet.microsoft.com/en-us/library/ee176841.aspx](http://technet.microsoft.com/en-us/library/ee176841.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-07-31T07:31:02.267

从 CMD（或 RUN）导出密钥（包含所有子密钥），即：

```
regedit /e c:\output.reg "HKEY_LOCAL_MACHINE\System\YourLocation" 
```

ps 你应该在 CMD 中使用 ADMIN PRIVILEGES 运行它。为此，右键单击`START>Run CMD (as Admin)`

# java - 基于输入的动态日志文件命名？

> ID：15409142
> 
> 赞同：0
> 
> 时间：2013-03-14T12:19:56.423
> 
> 标签：java, log4j

我的应用程序将参数作为输入，所有其他过程都基于此参数发生

我想根据输入参数创建具有名称的日志文件

谁能让我知道我该怎么做？

我正在使用 Log4J 1.2.17。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:42:50.897

复制自 log4j 手册[阅读配置部分](http://logging.apache.org/log4j/1.2/manual.html)

```
public static void main(String[] args) {

 // BasicConfigurator replaced with PropertyConfigurator.
 PropertyConfigurator.configure(args[0]); //args[0] path to your log4 conf file   
} 
```

# c# - 安装在 Program Files 中的应用程序保存的 XML：它在哪里？

> ID：15409144
> 
> 赞同：0
> 
> 时间：2013-03-14T12:20:06.330
> 
> 标签：c#, xml, program-files

我花了过去两个小时在谷歌上搜索，但没有任何结果，所以……</p>

我正在开发一个使用 XML 文件来保存数据的应用程序。这些文件应该与程序可执行文件存在于同一目录中。我用：

```
string filePath = System.IO.Path.GetDirectoryName(Application.ExecutablePath) + "\\xml\\filename.xml"; 
```

有用。

我已经在 Inno Setup 中创建了安装文件。这也很有效，可以将我的 XML 文件准确地复制到我想要它们去的地方。

我直接从安装文件夹、开始菜单图标、桌面快捷方式打开我的应用程序，它工作正常。

我对程序进行了一些更改，然后将其关闭并重新启动。一切都很好：所有保存的更改都从 XML 中读回。

但随后我打开指定的 XML 文件并没有任何变化！

我不会打扰，因为至少它正在工作，但是：

1.  当我卸载应用程序然后再次将其安装到同一目录时，对先前安装的文件所做的更改仍然存在！
2.  我很想知道发生了什么*。*

仅当程序安装到*Program Files*时才会发生这种情况。如果我将它安装到*My Documents*，更改会显示在 XML 文件中，并且在重新安装后，默认设置会按预期恢复。

我的问题是：

1.  *这些 XML 文件存储在哪里，如果指定的路径指向Program Files*并且它们不存在，我该如何加载它？
2.  显然，我该如何解决它？

**编辑** 最后在 C:\Users[USERNAME]\AppData\Local\VirtualStore\Program Files[APPNAME] 中找到了这些文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:54:45.417

检查保存到本地应用程序数据文件夹中的内容（对于 Windows 7，它是 \Users[USERNAME]\AppData\Local\）。

看起来您的应用程序无权将内容保存在 ProgramFiles 文件夹中并将其保存在可以保存的位置，可能在此位置：

```
String appData = 
    Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData); 
```

您也可以尝试以管理员身份运行您的应用程序并检查您的 xml 数据的更改是否仍然没有显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:25:31.667

你不能打印出价值

```
 System.IO.Path.GetDirectoryName(Application.ExecutablePath) 
```

那么你应该能够看到你的 xml 文件的存储位置，如果它是一个控制台应用程序，只需使用控制台打印如果它是 WPF 将它打印到标签或其他东西

# xsl-fo - xsl fo 有效页面列表

> ID：15409145
> 
> 赞同：2
> 
> 时间：2013-03-14T12:20:07.117
> 
> 标签：xsl-fo

有谁知道如何使用 xsl fo 制作有效页面列表？我似乎无法找到一种方法来做到这一点。似乎没有办法访问文档中的所有页面。如果有人知道有什么方法请告诉我，谢谢

# android - Android 屏幕类型/亮度

> ID：15409148
> 
> 赞同：4
> 
> 时间：2013-03-14T12:20:11.347
> 
> 标签：android, screen, brightness

有没有办法在android中获取有关屏幕类型的信息？我想知道我正在使用 amoled/ips/tft 的设备还是获得屏幕的最大亮度，不是相对亮度，而是尼特或坎德拉/cm2 的亮度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:39:55.990

与设备的其他物理方面（重量、长度、惯性矩等）非常相似，这些信息不会存储在手机中。我认为您可以做到这一点的唯一方法是收集信息、创建数据库并引用设备 ID 的值。

编辑：我唯一能想到的另一件事是使用设备的光传感器和某种校准设备/方法。就像是：

*   在漆黑的房间中，将设备与镜子/白色表面保持 x 距离
*   通过亮度设置以编程方式循环屏幕
*   在每一步读取光传感器

这里的限制将在于光传感器（如果它存在的话）并让人们正确校准他们的设备。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T16:54:43.507

我认为没有任何方法可以直接执行此操作，但是您可以使用获取设备名称

```
android.os.Build.MODEL; 
```

然后使用它为您需要的信息做某种网络服务。

# postgresql - pl sql查询递归循环

> ID：15409153
> 
> 赞同：0
> 
> 时间：2013-03-14T12:20:28.163
> 
> 标签：postgresql

我只有一张表“tbl_test”

下面给出了表格

```
tbl_test table
trx_id | proj_num  | parent_num|
1      | 14        | 0         |
2      | 14        | 1         |
3      | 14        | 2         |
4      | 14        | 0         |
5      | 14        | 3         |
6      | 15        | 0         | 
```

我想要的结果是：获取 trx_id 值 5 时

这是父子关系。所以，

```
trx_id -> parent_num
5      -> 3
3      -> 2
2      -> 1 
```

这意味着输出值：

```
3
2
1 
```

获取所有父链

我使用的查询：

```
SELECT *  FROM ( 
    WITH RECURSIVE tree_data(project_num, task_num, parent_task_num) AS( 
    SELECT project_num, task_num, parent_task_num 
          FROM tb_task 
          WHERE project_num = 14 and task_num = 5
             UNION ALL 
             SELECT child.project_num, child.task_num, child.parent_task_num
              FROM tree_data parent Join tb_task child 
               ON parent.task_num = child.task_num AND parent.task_num = child.parent_task_num 
             ) 
          SELECT project_num, task_num, parent_task_num 
           FROM tree_data 
              ) AS tree_list ; 
```

有谁能够帮我 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:32:50.830

pl/pgsql 不需要这样做。您可以直接在 SQL 中执行此操作。考虑：

```
WITH RECURSIVE my_tree AS (
     SELECT trx_id as id, parent_id as parent, trx_id::text as path, 1 as level
       FROM tbl_test
      WHERE trx_id = 5 -- start value
  UNION ALL
     SELECT t.trx_id, t.parent_id, p.path || ',' || t.trx_id::text, p.level + 1
       FROM my_tree p
       JOIN tbl_text t ON t.trx_id = p.parent
)
select * from my_tree; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:43:32.237

如果您使用的是 PostgresSQL，请尝试使用[WITH 子句](http://www.postgresql.org/docs/9.1/static/queries-with.html)：

```
WITH regional_sales AS (    
        SELECT region, SUM(amount) AS total_sales
         FROM orders
         GROUP BY region
         ), top_regions AS (
         SELECT region
        FROM regional_sales
        WHERE total_sales > (SELECT SUM(total_sales)/10 FROM regional_sales)
        )
SELECT region,
       product,
       SUM(quantity) AS product_units,
       SUM(amount) AS product_sales
FROM orders
WHERE region IN (SELECT region FROM top_regions)
GROUP BY region, product; 
```

# c# - 在 asp.net 中将 .ico 文件加载为位图

> ID：15409155
> 
> 赞同：1
> 
> 时间：2013-03-14T12:20:31.437
> 
> 标签：c#, asp.net

我想在我网站上的工具中显示来自其他域的网站图标，以便我可以显示每个域的“徽标”。有一个很棒的网络应用程序可以为您提取 favicon，因为识别 favicon 的 URL 可能很棘手： http: [//getfavicon.appspot.com/](http://getfavicon.appspot.com/)

例如（我不能在这里嵌入它，因为它是一个 .ico 文件）： [http ://getfavicon.appspot.com/http://stackoverflow.com](http://getfavicon.appspot.com/http://stackoverflow.com)

问题是，来自各个域的 .ico 文件大小不一，我想使用 .png 格式以特定大小在本地缓存它们。

经过研究，我发现这可以使用`System.Windows.Media.Imaging.IconBitmapDecoder`该类来完成，但它依赖于`WindowsBase`,`System.Xaml`和`PresentationCode`- 所有我不想在 asp.net 应用程序中使用的东西。

是否有另一种方法可以使用 c# 从 aspx 页面将 .ico 文件转换为 .png？

# javascript - 获取存储在var中的div的内部html

> ID：15409168
> 
> 赞同：3
> 
> 时间：2013-03-14T12:21:00.843
> 
> 标签：javascript, jquery, html

我正在从服务器获取一些数据，并且它已预先打包在元素中。问题是这些标签中有很多我不想要的东西。有没有人有任何建议只获取这些元素的 html？我有一些有用的东西，但它是hack-y，更糟糕的是，它假设我对标签的属性有所了解，而且我不会总是：

这是一些 JQuery（在此处查看实际操作：http: [//jsfiddle.net/tPJau/](http://jsfiddle.net/tPJau/)）：

```
$(function () {
    var rawString = "<div id='something' myAttr='somethingElse' > Free me!</div>";
    $('#content').append(rawString);
    var cleanString = $('#something').html();
    $('#something').remove();
    $('#content').append(cleanString);
}); 
```

这是一些html：

```
<div id="content">original content</div> 
```

这给了我

```
<div id='content'>
    original content Free me!
</div> 
```

因此，亲爱的社区，我向您提出的问题是，我如何在不知道任何关于 div 属性的情况下完成此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:28:49.693

您可以将 HTML 传递给 JQuery 函数，它将在内存中创建一个元素。

然后，您可以像操作页面中实际存在的任何其他元素一样操作该元素。

```
$(function () {
    var rawString = "<div id='something' myAttr='somethingElse' > Free me!</div>";
    var cleanString = $(rawString).html(); // ... or .text()
    $('#content').append(cleanString);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:27:20.590

试试这个

```
$(function () {
    var rawString = "<div id='something' myAttr='somethingElse' > Free me!</div>";
    var node = $('#content');
    node.html(node.html() + $(rawString).text());
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T12:27:32.700

如果您知道它，`div`那么；

```
 var cleanString = $('#content div').text(); 
```

另一种选择是使用；

```
var cleanString = $(rawString).text(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T12:27:56.147

我相信您所追求的是“释放我！”的内容。您可以使用以下命令直接从 rawString 变量中提取它：`$(rawString).html()`。这只是用 jQuery 函数包装该 HTML，它允许您获取该元素的内部 HTML。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T12:33:35.230

试试这个

```
$(function () {

    var rawString = "<div id='something' myAttr='somethingElse' > Free me!</div>";
    var rawHtml = $( rawString ).html();

    $('#content').append(        
        rawHtml
    );
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-14T12:45:57.777

正则表达式，如果你想：

```
var rawString = "<div id='something' myAttr='somethingElse' > Free me!</div>";
var re = /<[^>]+>([^<]*)/;
var matches = rawString.match(re);

$('#content').append(matches[1]); 
```

jsfiddle：http: [//jsfiddle.net/tPJau/4/](http://jsfiddle.net/tPJau/4/)

# sql-server - SSRS 2008 Report Builder 3.0：可选的用户输入参数

> ID：15409181
> 
> 赞同：2
> 
> 时间：2013-03-14T12:21:24.150
> 
> 标签：sql-server, sql-server-2008, tsql, ssrs-2008, reportbuilder3.0

我的程序允许用户输入参数`Start Date`、`End Date`和`Shift`。

我将添加另一个名为`VCN`. 这允许用户输入特定的零件编号，程序将搜索与之相关的数据。

但是，当我这样做时，我希望能够关闭其他 3 个参数。这意味着用户可以输入前 3 个参数或一个`VCN`数字。当用户输入一个`VCN`数字时，我不希望搜索受我的其他 3 个参数的约束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T23:52:56.917

乍一看，两份报告似乎更好，这将是我的偏好。

我还没有找到一种方法来禁用基于另一个参数的参数，但我建议使用该`VCN`参数作为替代。在这我会：

1.  设置`VCN`为可选并允许空值。
2.  有`VCN`一个默认值并设置为`null`并允许报告正常运行。
3.  如果用户在 中输入任何内容，`VCN`则使用它并忽略其他参数中的任何内容。
4.  然后使用 if `VCN`is null 然后禁用其他查询或根据需要执行。

# matlab - 在 arima 和估计命令中设置 MaxFunEvals

> ID：15409189
> 
> 赞同：0
> 
> 时间：2013-03-14T12:21:48.720
> 
> 标签：matlab

我正在使用 arima 来预测时间序列。我目前拥有的代码是（NRV 是要拟合的数据）：

```
temp = arima('D',1,'ARLags',[1:3],'MALags',[1:3],'SMALags',[96,96*7],'Seasonality',96);
ARIMA24 = estimate(temp,NRV);
save('ARIMA24','ARIMA24')
res24 = infer(ARIMA24,NRV);
save('res24','res24')
clear temp 
```

当我运行此代码时，我收到一条错误消息：

求解器过早停止。

```
fmincon stopped because it exceeded the function evaluation limit,
options.MaxFunEvals = 1000 (the default value). 
```

我尝试使用下面的代码为 fmincon 设置 MaxFunEvals，但我收到一条错误消息。

```
options = optimset('MaxFunEvals',2000)
temp = arima('D',1,'ARLags',[1:3],'MALags',[1:3],'SMALags',[96,96*7],'Seasonality',96);
ARIMA24 = estimate(temp,NRV,'Options',options);
save('ARIMA24','ARIMA24') % variance = [6183.97370342290;]
res24 = infer(ARIMA24,NRV);
save('res24','res24')
clear temp 
```

错误信息：

```
Argument 'Options' did not match
any valid parameter of the
parser. 
```

我希望这里的一些成员知道如何在估计命令中设置 MaxFunEvals。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T07:20:04.257

这不是一个错误。问题是，您需要更改的选项在 fmincon 函数中。为此，我猜您必须在更改选项之前“调用”此功能。可以通过以下方式完成：

```
options = optimset('fmincon');
options = optimset(options,'Algorithm','sqp','TolCon',1e-7,'MaxFunEvals',...
    3000,'Display','iter','Diagnostics','on'); 
```

此代码保留默认值，同时更改 MaxFunEvals。

# fiddler - 在 Fiddler 中查看我的 C# 应用程序的网络流量

> ID：15409190
> 
> 赞同：0
> 
> 时间：2013-03-14T12:21:50.037
> 
> 标签：fiddler

我想查看从我的 C# 程序发送的请求和响应，该程序在 Fiddler 中使用 System.Net.WebRequest。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:29:23.240

是的，

打开 Fiddler，开始使用您的应用程序，您将看到条目出现在 Web Sessions 表中。单击这些并查看 Inspectors 选项卡中发送的内容

# informatica-powercenter - Informatica：当目标从 Oracle 更改为 SQL Server 时，简单一对一映射的性能降低

> ID：15409195
> 
> 赞同：0
> 
> 时间：2013-03-14T12:22:09.070
> 
> 标签：informatica-powercenter

我有简单的 informatica(9.1) 映射（一对一），它将数据从平面文件加载到 RDBMS

加载到 Oracle db 需要 5 分钟，在 SQL Server 2008 R2 中加载相同的文件需要 20 分钟。

是否有任何改进性能的来源/指针

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T06:25:36.817

1.  检查会话日志中的线程统计信息以了解问题是在写入 db 时还是从文件中读取时。

2.  PC 服务器是否安装在 Oracle 数据库服务器上？SQL Server 的情况是否相同？SQL Server 和 PC 服务器在同一个盒子上吗？

3.  映射是使用 ODBC 还是与 DB 的本机连接？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T11:52:31.797

我能想到的几件事

*   对于这两个测试，文件是运行映射的应用服务器的本地文件吗？
*   应用服务器和数据服务器之间的连接/距离是否具有可比性
*   Session Properties 中 Target 的“Target load type”是否设置为“Bulk”？

# android - Android 检查应用程序包是否可启动

> ID：15409199
> 
> 赞同：2
> 
> 时间：2013-03-14T12:22:16.397
> 
> 标签：android, launch

我正在寻找检查应用程序是否可启动的最佳方法。有我的代码：

```
PackageManager packageManager = context.getPackageManager();
List<PackageInfo> packs = packageManager.getInstalledPackages(0);
for (int i = 0; i < packs.size(); i++) {
    PackageInfo p = packs.get(i);
    if (packageManager.getLaunchIntentForPackage(p.applicationInfo.packageName) != null) {
        // Get application info
    }
} 
```

这可行，但是当我进行应用程序分析时，我注意到 packageManager.getLaunchIntentForPackage() 方法会消耗大量执行时间，因此我正在寻找另一种方法来检查每个应用程序是否可以在没有启动意图的情况下启动。

任何的想法 ？谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T16:17:31.847

我找到了解决自己问题的方法，希望对某人有所帮助：

```
 PackageManager packageManager = context.getPackageManager();

            Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
            mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);
            final List<ResolveInfo> apps = packageManager.queryIntentActivities(
                    mainIntent, 0);
            Collections.sort(apps, new ResolveInfo.DisplayNameComparator(
                    packageManager));

            for (ResolveInfo resolveInfo : apps) {
            // Get application data here
            } 
```

# windows-phone-7 - 在Windows Phone 8中将图像列表转换为pdf

> ID：15409203
> 
> 赞同：0
> 
> 时间：2013-03-14T12:22:29.410
> 
> 标签：windows-phone-7, pdf, windows-phone-8, windows-phone

如何以编程方式将图像列表转换为 pdf。在我当前的应用程序中，我的要求是我需要从图像列表中选择一些图像，并且我需要将这些图像导入 pdf。是否有任何开源项目可用于实现此功能。任何人都可以帮助我找到解决此问题的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T19:06:37.783

ComponentOne有[一个控件](http://www.componentone.com/SuperProducts/PDFPhone/)可以完全按照您的意愿进行操作。除此之外，据我所知，没有任何公开的开源组件可以与 Windows Phone 100% 兼容。

有[SilverPDF](http://silverpdf.codeplex.com/)，但需要进行一些微调才能使其正常工作。

# facebook - 如何从 Facebook 页面提取事件

> ID：15409210
> 
> 赞同：0
> 
> 时间：2013-03-14T12:22:53.010
> 
> 标签：facebook, facebook-graph-api

我想将事件从 facebook 页面提取到官方网站，并与图形和 oauth 斗争以获取信息。

简化代码，相同代码中的第 1 阶段和第 2 阶段：

```
<?php
$app_id = '...........4639';
$app_secret = '7547xxxxxxxxxxxxxxxxxxxxxxxx';

if (isset($_GET['code'])) {
  //stage 2
  $state = $_GET['state'];
  $code = $_GET['code'];
  //the code doesn't work. If I use graph api explorer to get key, I'm all fine.
  //the code here from graph api explorer.
  //$code = 'AAAIERWeZCHZxxxxxxxxxxxxxxxxxxxxx';
  $s = "https://graph.facebook.com/_PAGE_ID?fields=feed.fields(story,message,picture)&access_token=" . $code;
  $json = file_get_contents($s);
  die($json);

} else {
  //stage 1
  $my_url = 'http://www.myself.com/fb/index.php';
  $_SESSION['state'] = md5(uniqid(rand(), TRUE)); // CSRF protection
  $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" .
    $app_id . "&redirect_uri=" . urlencode($my_url) . "&state=" . $_SESSION['state'];
  //now redirect to myself - phase2
  header("Location: " . $dialog_url);
  exit();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:27:40.387

如果有人坐在同样的烦恼中：

file_get_contents 似乎无法处理令牌请求。以下代码有效。

```
<?php
  function curlRequest($url) {
    $ch = curl_init();
    $useragent="Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.1) Gecko/20061204 Firefox/2.0.0.1";
    curl_setopt($ch, CURLOPT_USERAGENT, $useragent);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    $timeout = 5;
    curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, $timeout);
    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
  }

$app_id = '................';
$app_secret = '..................................';
$my_url = 'http://www.memyself.andi/me.php';

session_start();

$code = $_REQUEST["code"];
if(empty($code)) {
   // Redirect to Login Dialog
   $_SESSION['state'] = md5(uniqid(rand(), TRUE)); // CSRF protection
   $dialog_url = "https://www.facebook.com/dialog/oauth?client_id=" 
       . $app_id . "&redirect_uri=" . urlencode($my_url) . "&state="
       . urlencode($_SESSION['state']) . "&scope=user_birthday,read_stream";
   header("Location: " . $dialog_url);

}

  if($_SESSION['state'] && ($_SESSION['state'] === $_REQUEST['state'])) {
     $token_url = 'https://graph.facebook.com/oauth/access_token?client_id=' . 
       $app_id . '&redirect_uri=' . urlencode($my_url) .
       '&client_secret=' . $app_secret . '&code=' . urlencode($code);
     //die($token_url);
     $response = curlRequest($token_url);
     //bummer - this won't work (php 5.3/ubuntu)
     //$response = file_get_contents($token_url);
     $params = null;
     parse_str($response, $params);

     $_SESSION['access_token'] = $params['access_token'];

     $graph_url = "https://graph.facebook.com/_THE_PAGE_ID/feed?access_token=" 
       . $params['access_token'];

     $json = json_decode(file_get_contents($graph_url));
     echo serialize($json);
   }
   else {
     echo("The state does not match. You may be a victim of CSRF.");
   } 
```

# iphone - 如何在Xcode中逐帧获取图片

> ID：15409218
> 
> 赞同：1
> 
> 时间：2013-03-14T12:23:24.793
> 
> 标签：iphone, ios, xcode, camera

嗨，我想使用 iphone 后置摄像头逐帧获取相框。到目前为止我所做的。

1.  我以完整模式打开相机。

> *   (IBAction) showCameraUI { [self startCameraControllerFromViewController: self usingDelegate: self]; }
>     
>     
> *   (BOOL) startCameraControllerFromViewController: (UIViewController*) 控制器 usingDelegate: (id) delegate {

```
if (([UIImagePickerController isSourceTypeAvailable:
      UIImagePickerControllerSourceTypeCamera] == NO)
    || (delegate == nil)
    || (controller == nil))
    return NO;

UIImagePickerController *cameraUI = [[UIImagePickerController alloc] init];
cameraUI.sourceType = UIImagePickerControllerSourceTypeCamera;

// Displays a control that allows the user to choose picture or
// movie capture, if both are available:
cameraUI.mediaTypes =
[UIImagePickerController availableMediaTypesForSourceType:
 UIImagePickerControllerSourceTypeCamera];

// Hides the controls for moving & scaling pictures, or for
// trimming movies. To instead show the controls, use YES.
cameraUI.allowsEditing = NO;

cameraUI.delegate = delegate;
cameraUI.showsCameraControls=NO;
cameraUI.navigationBarHidden=YES;
cameraUI.toolbarHidden=YES;
cameraUI.wantsFullScreenLayout=YES;
cameraUI.cameraViewTransform = CGAffineTransformScale(cameraUI.cameraViewTransform, CAMERA_SCALAR_SX, CAMERA_SCALAR_SY);
UIButton *btnRecording = [UIButton buttonWithType:UIButtonTypeRoundedRect];
CGRect buttonRect =CGRectMake(190 , 420, 100, 39); // position in the parent view and set the size of the button
btnRecording.frame = buttonRect;
[btnRecording setTitle:@"Recording" forState:UIControlStateNormal];
// add targets and actions
[btnRecording addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchUpInside];
 cameraUI.cameraOverlayView= btnRecording;
[controller presentModalViewController: cameraUI animated: YES];
return YES; 
```

}

1.  设置 AVCapture 以逐帧获取图片。

> *   (void)setupCaptureSession { NSError *error = nil;

```
// Create the session
AVCaptureSession *session = [[AVCaptureSession alloc] init]; 
```

// session.AVCaptureTorchModeOn=YES;

```
// Configure the session to produce lower resolution video frames, if your
// processing algorithm can cope. We'll specify medium quality for the
// chosen device.
session.sessionPreset = AVCaptureSessionPresetLow;

// Find a suitable AVCaptureDevice
AVCaptureDevice *device = [AVCaptureDevice defaultDeviceWithMediaType:AVMediaTypeVideo];
[device lockForConfiguration:nil];
[device setTorchMode:AVCaptureTorchModeOn];  // use AVCaptureTorchModeOff to turn off
[device unlockForConfiguration];
// Create a device input with the device and add it to the session.
AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device
                                                                    error:&error];
if (!input) {
    // Handling the error appropriately.
}
[session addInput:input];

// Create a VideoDataOutput and add it to the session
AVCaptureVideoDataOutput *output = [[AVCaptureVideoDataOutput alloc] init] ; 
```

// output.alwaysDiscardsLateVideoFrames = YES; [会话添加输出：输出]；

```
dispatch_queue_t queue = dispatch_queue_create("MyQueue", NULL);
[output setSampleBufferDelegate:self queue:queue];
dispatch_release(queue);

// Specify the pixel format
output.videoSettings =
[NSDictionary dictionaryWithObject:
 [NSNumber numberWithInt:kCVPixelFormatType_32BGRA]
                            forKey:(id)kCVPixelBufferPixelFormatTypeKey];

// If you wish to cap the frame rate to a known value, such as 15 fps, set
// minFrameDuration. 
```

// output.minFrameDuration = CMTimeMake(1, 1);

```
// Start the session running to start the flow of data
  NSLog(@"session is going to start at here");
[session startRunning];

// Assign session to an ivar.
//[self setSession:session]; 
```

}

// 从样本缓冲区数据创建 UIImage - (UIImage *) imageFromSampleBuffer:(CMSampleBufferRef) sampleBuffer { NSLog(@"picture is getting"); CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer); // 锁定像素缓冲区的基地址 CVPixelBufferLockBaseAddress(imageBuffer,0);

```
// Get the number of bytes per row for the pixel buffer
size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);
// Get the pixel buffer width and height
size_t width = CVPixelBufferGetWidth(imageBuffer);
size_t height = CVPixelBufferGetHeight(imageBuffer);

// Create a device-dependent RGB color space
CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
if (!colorSpace)
{
    NSLog(@"CGColorSpaceCreateDeviceRGB failure");
    return nil;
}

// Get the base address of the pixel buffer
void *baseAddress = CVPixelBufferGetBaseAddress(imageBuffer);
// Get the data size for contiguous planes of the pixel buffer.
size_t bufferSize = CVPixelBufferGetDataSize(imageBuffer);

// Create a Quartz direct-access data provider that uses data we supply
CGDataProviderRef provider = CGDataProviderCreateWithData(NULL, baseAddress, bufferSize,
                                                          NULL);
// Create a bitmap image from data supplied by our data provider
CGImageRef cgImage =
CGImageCreate(width,
              height,
              8,
              32,
              bytesPerRow,
              colorSpace,
              kCGImageAlphaNoneSkipFirst | kCGBitmapByteOrder32Little,
              provider,
              NULL,
              true,
              kCGRenderingIntentDefault);
CGDataProviderRelease(provider);
CGColorSpaceRelease(colorSpace);

// Create and return an image object representing the specified Quartz image
UIImage *image = [UIImage imageWithCGImage:cgImage];
CGImageRelease(cgImage);

CVPixelBufferUnlockBaseAddress(imageBuffer, 0);

return image; 
```

}

> // 写入样本缓冲区时调用的委托例程 - (void)captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection { // 从样本缓冲区数据创建 UIImage NSLog( @"图片正在获取"); UIImage *image = [self imageFromSampleBuffer:sampleBuffer];

// [self.delegate cameraCaptureGotFrame:image]; }

现在委托“captureOutput”没有接到电话。我不知道我在哪里做错了。这将帮助我。提前致谢。

# html - 使用 CSS3 的线性渐变 div

> ID：15409219
> 
> 赞同：0
> 
> 时间：2013-03-14T12:23:25.863
> 
> 标签：html, css, linear-gradients

请帮助我如何使用 css 制作 div，如下图所示。

![捕获12.jpg](../Images/becd5ae46518efa4098299e9e1a89bda.png)

这是我到目前为止的代码...... [http://jsfiddle.net/L8FfE/](http://jsfiddle.net/L8FfE/)

```
<table class="screenheader" cellspacing="0" cellpadding="0" width="100%" style="padding-top: 5px;">
    <tr style="font-family: Calibri, Arial, Sans-Serif; font-size: 40pt; font-weight: bold;
    color: #fff; background: repeating-linear-gradient(180deg, #23538A , #A7CFDF 5px, #23538A  5px, #A7CFDF 10px);">
        <td width="100%" style="padding-bottom: 5px;">
            <div id="meetingname" width="100%" style="padding-left: 20px; text-align: left;">
                HI Test
            </div>
        </td>
        <td width="100%" style="padding-left: 20px; text-align: left;">
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:28:27.183

这就是你的意思吗（除了颜色，我看不懂）？
[http://jsfiddle.net/L8FfE/2/](http://jsfiddle.net/L8FfE/2/)

html:

```
<div id="background">
    <div id="overlay"></div>
</div> 
```

CSS：

```
div#background {
    width: 100%;
    height: 50px;
    background: -webkit-gradient(linear, 0 0, 0 100%, from(#053F63), to(#105C97));
    background: -webkit-linear-gradient(#053F63 0%, #105C97 100%);
    background: -moz-linear-gradient(#053F63 0%, #105C97 100%);
    background: -o-linear-gradient(#053F63 0%, #105C97 100%);
    background: linear-gradient(#053F63 0%, #105C97 100%);
}
div#overlay {
    font-family: Calibri, Arial, Sans-Serif;
    font-size: 40pt;
    font-weight: bold;
    color: #fff;
    width: 100%;
    height: 50px;
    background:    -moz-repeating-linear-gradient(rgba(35, 83, 138, 1) 5px, rgba(167, 207, 223, 0) 5px, rgba(35, 83, 138, 1) 5px, rgba(167, 207, 223, 0) 10px);
    background: -webkit-repeating-linear-gradient(rgba(35, 83, 138, 1) 5px, rgba(167, 207, 223, 0) 5px, rgba(35, 83, 138, 1) 5px, rgba(167, 207, 223, 0) 10px);
    background:         repeating-linear-gradient(rgba(35, 83, 138, 1) 5px, rgba(167, 207, 223, 0) 5px, rgba(35, 83, 138, 1) 5px, rgba(167, 207, 223, 0) 10px);
    -webkit-mask-image: -webkit-gradient(linear, 0 0, 100% 0, from(rgba(0, 0, 0, 0)), color-stop(0.4, rgba(0, 0, 0, 0)), color-stop(0.6, rgba(0, 0, 0, 1)), to(rgba(0, 0, 0, 1)));
    -webkit-mask-image: -webkit-linear-gradient(left, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0) 40%, rgba(0, 0, 0, 1) 60%, rgba(0, 0, 0, 1) 100%);
            mask-image:    -moz-linear-gradient(left, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0) 40%, rgba(0, 0, 0, 1) 60%, rgba(0, 0, 0, 1) 100%);
            mask-image:      -o-linear-gradient(left, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0) 40%, rgba(0, 0, 0, 1) 60%, rgba(0, 0, 0, 1) 100%);
            mask-image:         linear-gradient(left, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0) 40%, rgba(0, 0, 0, 1) 60%, rgba(0, 0, 0, 1) 100%);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T14:37:35.640

这不太对。您需要另一个 div 来实现左侧渐变和垂直渐变。我只为 Chrome 编写了这个，你还必须将#colors 更改为 rgba，但你可以[在这里的 JS fiddle](http://jsfiddle.net/L8FfE/3/)中看到它看起来更像 jpeg。

HTML

```
<div class="rightGradient">
    <div class="horizontal stripes"></div>
    <div class="topGradient"></div>
</div> 
```

CSS

```
.stripes {
    position: relative;
    height: 100px;
    width: 375px;
    -webkit-background-size: 100% 6px;
}

.horizontal {
    background-color: transparent;
    background-image: -webkit-linear-gradient(top, #0f5b97 50%, transparent 50%, transparent);
}

.rightGradient {
    position: absolute;
    height: 100px;
    width: 375px;
    background-image: -webkit-linear-gradient(right, #074166  20%, #0f5b97 70%);
}

.topGradient {
    position: absolute;
    top: 0px;
    height: 100px;
    width: 375px;
    background-color: transparent;
    background-image: -webkit-linear-gradient(286deg , #074166 -20%, transparent 70%);
} 
```

# java - 在 Java 运行时为本地库添加新路径

> ID：15409223
> 
> 赞同：17
> 
> 时间：2013-03-14T12:23:53.230
> 
> 标签：java, java-native-interface, native

是否可以在运行时为本机库添加新路径？`System.loadLibrary(nativeLibraryName)`（而不是使用属性 java.library.path 启动 Java），因此在尝试查找时调用将包含该路径`nativeLibraryName`。这是否可能，或者一旦 JVM 启动，这些路径就会被冻结？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-14T12:34:30.470

**[此解决方案不适用于 Java 10+]**

没有一点黑客攻击似乎是不可能的（即访问 ClassLoader 类的私有字段）

这个[博客](http://fahdshariff.blogspot.be/2011/08/changing-java-library-path-at-runtime.html)提供了两种方法。

为了记录，这里是简短的版本。

**选项 1：**用新值完全替换 java.library.path）

```
public static void setLibraryPath(String path) throws Exception {
    System.setProperty("java.library.path", path);

    //set sys_paths to null so that java.library.path will be reevalueted next time it is needed
    final Field sysPathsField = ClassLoader.class.getDeclaredField("sys_paths");
    sysPathsField.setAccessible(true);
    sysPathsField.set(null, null);
} 
```

**选项 2：**向当前 java.library.path 添加新路径

```
/**
* Adds the specified path to the java library path
*
* @param pathToAdd the path to add
* @throws Exception
*/
public static void addLibraryPath(String pathToAdd) throws Exception{
    final Field usrPathsField = ClassLoader.class.getDeclaredField("usr_paths");
    usrPathsField.setAccessible(true);

    //get array of paths
    final String[] paths = (String[])usrPathsField.get(null);

    //check if the path to add is already present
    for(String path : paths) {
        if(path.equals(pathToAdd)) {
            return;
        }
    }

    //add the new path
    final String[] newPaths = Arrays.copyOf(paths, paths.length + 1);
    newPaths[newPaths.length-1] = pathToAdd;
    usrPathsField.set(null, newPaths);
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-12-24T11:27:47.840

我在 Java 12/13 中使用了它，它应该适用于任何带有 MethodHandles 的 JVM：

```
Lookup cl = MethodHandles.privateLookupIn(ClassLoader.class, MethodHandles.lookup());
VarHandle sys_paths = cl.findStaticVarHandle(ClassLoader.class, "sys_paths", String[].class);
sys_paths.set(null); 
```

它具有作为 Java API 的好处。

它取代了：

```
 final Field sysPathsField = ClassLoader.class.getDeclaredField("sys_paths");
    sysPathsField.setAccessible(true);
    sysPathsField.set(null, null); 
```

# javascript - 是否可以将 FileReader readAsArrayBuffer 数据转换为兼容 html5 画布的 imageData

> ID：15409224
> 
> 赞同：3
> 
> 时间：2013-03-14T12:23:57.007
> 
> 标签：javascript, canvas, filereader

我正在寻找一种直接从 html5 FileReader api 将图像绘制到画布的方法。

通常的方法是创建一个新的图像对象，等待 onload 然后将其绘制到画布上`drawImage()`。

但是，对于我不需要进入的特定情况，如果可能的话，我想完全绕过图像数据的加载。

由于文件读取器 api 支持`readAsArrayBuffer()`，我想知道是否有任何方法可以获取此数组缓冲区并将其转换为画布 imageData 以便使用 ctx.putImageData(array) 来渲染图像。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:05:03.263

我认为加载图像是一个必要的步骤；在该过程的一端，您只有一个二进制 blob，它可以是 JPEG 或 PNG（或 BMP，任何其他 mime 类型），而在另一端，您有一个包含原始像素数据的数组。虽然您可以在技术上自己编写此转换的代码，但`fileReader.readAsDataURL`and`ctx.drawImage`方法会在内部为您执行此操作。

FWIW，他就是我在画布上绘制图像的方式。

```
// read binary data from file object
var fileRead = function(file){
    var reader = new FileReader();
    reader.onload = fileReadComplete;
    reader.readAsDataURL(file);
    };

// convert binary data to image object
var fileReadComplete = function(e){
    var img = new Image();
    img.src = e.target.result;
    (function(){
        if (img.complete){
            ctx.drawImage(img);
            }
        else {
            setTimeout(arguments.callee, 50);
            }
        })();
    }; 
```

# php - Swift 邮件程序默认发件人

> ID：15409227
> 
> 赞同：3
> 
> 时间：2013-03-14T12:24:00.530
> 
> 标签：php, swiftmailer

我正在尝试为 Swift Mailer 4.3.0 中的所有邮件设置默认发件人，但找不到合适的解决方案。我想避免在每条消息中使用 ->setFrom() ，因为这将是一个未来的头痛。我可以为此使用一个常量，但我正在寻找一个更优雅的解决方案。

```
$message = Swift_Message::newInstance()
                ->setSubject('subject')
                ->setFrom(array('sender@domain.com' => 'Sender'))
                ->setTo(array('recipient@domain.com'))
                ->setBody('Message'); 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T12:41:19.167

你不能。

据我所知，你不能省略这个参数。

> `From:`地址是必需的，并使用消息的方法设置`setFrom()`。`From:`地址指定了电子邮件的实际编写者，通常是发送者。

这可能是最好的解决方案：

```
->setFrom(MyClass::FROM_EMAIL); 
```

您可以尝试的一次是在您的应用程序中创建一个实例，并在您想要发送新邮件而不重新定义 from 部分时克隆它：

```
// somewhere early in your app
$message = Swift_Message::newInstance()
            ->setFrom(array('sender@domain.com' => 'Sender')); 
```

然后，在其他地方：

```
$newMessage = clone $message;
$newMessage
    ->setSubject('subject')
    ->setTo(array('recipient@domain.com'))
    ->setBody('Message')
    ->send(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-07T05:50:48.053

如果您使用 SwiftMailer ≥ 4 并且熟悉[Composer](https://getcomposer.org/)，则可以使用 SwiftMailer 的[Defaults Plugin](https://github.com/Finesse/SwiftMailerDefaultsPlugin)来实现这一点。

首先安装软件包：

```
composer require finesse/swiftmailer-defaults-plugin 
```

第二个设置`Swift_Mailer`实例：

```
$mailer = new Swift_Mailer(/* your transport here */);
$mailer->registerPlugin(new Finesse\SwiftMailerDefaultsPlugin\SwiftMailerDefaultsPlugin([
    'from' => ['sender@domain.com' => 'Sender']
])); 
```

然后在不指定发件人地址的情况下发送电子邮件：

```
$mailer->send((new Swift_Message())
    ->setSubject('subject')
    ->setTo(array('recipient@domain.com'))
    ->setBody('Message')); 
```

# java - 除了java中的一些子文件夹之外，将所有子文件夹从一个复制到另一个？

> ID：15409229
> 
> 赞同：0
> 
> 时间：2013-03-14T12:24:04.983
> 
> 标签：java

我想将所有子文件夹从输入文件夹复制到 outputDir，除了一些子文件夹。我用于复制的方法在这里。但我不知道如何过滤子文件夹。

```
public static void copyDirectory(String inputFolder, String outputDir) {
            File source = new File(inputFolder);
            File desc = new File(outputDir);
            try {
                FileUtils.copyDirectory(source, desc);
            } catch (IOException e) {
                e.printStackTrace();
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:33:04.807

您好使用以下代码：

```
public static void copyDirectory(String inputFolder, String outputDir) {
    File source = new File(inputFolder);
    File desc = new File(outputDir);

    ArrayList al=new ArrayList();//contains all your directory filter names
    try {

        for (File file : source.listFiles()) {
            if (!al.contains(file.getName())&&file.isDirectory()) {
                FileUtils.copyDirectory(source, desc);
            }
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:34:08.773

尝试这个。

```
public static void copyDirectory(String inputFolder, String outputDir) {

        File source = new File(inputFolder);
        File desc = new File(outputDir);
        String name = source.getName();
        String desti = desc.getPath() + "/" + name;
        File destination = new File(desti);
        destination.mkdir();
        File[] subFolders = source.listFiles();
        for (File subFolder : subFolders) {
             if (condition satisfies){
                 // copy to destination folder
             } else {
                 // Ignore
             }

        }

    } 
```

# android - 相对布局 Textview 文本重叠

> ID：15409230
> 
> 赞同：-1
> 
> 时间：2013-03-14T12:24:08.643
> 
> 标签：android, android-layout, textview, android-relativelayout

我的`Textview`in 有问题`RelativeLayout`。如您所见，它们相互重叠。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:paddingBottom="2dp"
android:paddingTop="2dp" >

<ImageView
    android:id="@+id/row_image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentTop="true"
    android:layout_marginBottom="1dp"
    android:layout_marginRight="2dp"
    android:contentDescription="@string/desc" />

<ImageView
    android:id="@+id/multiselect_icon"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@id/row_image"
    android:contentDescription="@string/desc"
    android:src="@drawable/singlecheck"
    android:visibility="gone" />

<TextView
    android:id="@+id/top_view"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_toRightOf="@id/multiselect_icon"
    android:dividerHeight="2sp"
    android:ellipsize="end"
    android:lineSpacingExtra="1sp"
    android:paddingBottom="13dp"
    android:paddingLeft="1dp"
    android:paddingTop="13dp"
    android:singleLine="true"
    android:textColor="?android:attr/textColorPrimaryDisableOnly"
    android:textIsSelectable="false"
    android:textSize="16sp" />

<TextView
    android:id="@+id/bottom_view"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_below="@id/top_view"
    android:dividerHeight="2sp"
    android:ellipsize="end"
    android:gravity="right"
    android:maxLength="50"
    android:paddingBottom="13dp"
    android:paddingLeft="1dp"
    android:paddingTop="13dp"
    android:singleLine="true"
    android:textColor="?android:attr/textColorPrimaryDisableOnly"
    android:textIsSelectable="false"
    android:textSize="16sp"
    android:textStyle="bold" />

    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:28:36.453

这是因为您已将 TextView 设置为 SingleLine，并且没有固定宽度。这会导致 TextView 增长到其内容的大小，从而与其他 TextView 重叠。

因此，尝试在第一个 TextView 上设置宽度，或者将两个 TextView 包装在可以控制其尺寸的 View 中。

**编辑：**

根据[Android 开发人员](http://developer.android.com/guide/topics/ui/layout/relative.html)的说法，您只需添加`android:layout_width="0dp"`到您的第一个 TextView，然后添加`android:layout_width="xdp"`到第二个，其中 x 是您希望该视图具有的宽度。

然后，RelativeLayout 应该缩放第一个 TextView 以使用其余的宽度。

# mvvm-light - MVVMLight 支持输入验证 (Silverlight)

> ID：15409231
> 
> 赞同：0
> 
> 时间：2013-03-14T12:24:09.843
> 
> 标签：mvvm-light

MVVMLight 是否支持输入验证？

谢谢，

胡安·卡洛斯·加尔维斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T16:46:12.770

因此，如果您询问 MVVM 轻框架本身是否有任何自定义构建的函数用于 WPF/silverlight 之外的验证，答案是否定的。

# blackberry - 更新连续 GPS 位置的间隔值

> ID：15409232
> 
> 赞同：0
> 
> 时间：2013-03-14T12:24:12.283
> 
> 标签：blackberry, gps, location, location-provider

我正在开发一个应该以固定间隔更新位置的 BlackBerry 应用程序。可以从滑块选择/更改间隔值。它在 1 分钟、2 分钟、5 分钟、30 分钟等之间变化。在第一次加载（启动应用程序）时，定位间隔为 30 秒。之后，我将滑块值存储在持久存储中，并根据设置的间隔相应地更新位置。运行更新位置的后台线程如下：

```
private boolean startLocationUpdate()
{
    boolean retval = false;
    try
    {
        LocationProvider locationProvider = LocationProvider.getInstance(null);
        if ( locationProvider == null )
        {
            Runnable showGpsUnsupportedDialog = new Runnable()
            {
                public void run()
                {
                    Dialog.alert("GPS is not supported on this platform, exiting...");
                    //System.exit( 1 );
                }
            };
            UiApplication.getUiApplication().invokeAndWait( showGpsUnsupportedDialog ); // Ask event-dispatcher thread to display dialog ASAP.
        }
        else
        {
            locationProvider.setLocationListener(new LocationListenerImpl(), interval, -1, -1);
            retval = true;
        }
    }
    catch (LocationException le)
    {
        System.err.println("Failed to instantiate the LocationProvider object, exiting...");
        System.err.println(le);
        System.exit(0);
    }
    return retval;
}

private class LocationListenerImpl implements LocationListener
{
    public void locationUpdated(LocationProvider provider, Location location)
    {
        if(location.isValid())
        {
            double longitude = location.getQualifiedCoordinates().getLongitude();
            double latitude = location.getQualifiedCoordinates().getLatitude();
            updateLocationScreen(latitude, longitude);
        }
    }
    public void providerStateChanged(LocationProvider provider, int newState)
    {
    }
}

private void updateLocationScreen(final double latitude, final double longitude)
{
    UiApplication.getUiApplication().invokeAndWait(new Runnable()
    {
        public void run()
        {
            double lat = latitude;
            double longi = longitude;
            lblLatitude.setText(Double.toString(lat));
            spacing.setText(", ");
            lblLongitude.setText(Double.toString(longi));
        }
    });
} 
```

除此之外，还有一个可用的“刷新”按钮，一旦单击该按钮将立即开始获取位置更新。这个按钮调用一个方法是另一个类来获取位置。方法如下：

```
try {
    Criteria myCriteria = new Criteria();
    myCriteria.setCostAllowed(false);
    LocationProvider myLocationProvider = LocationProvider.getInstance(myCriteria);
    double heading = 0;
    double velocity = 0;

    try {
        Location myLocation = myLocationProvider.getLocation(6000);
        if(myLocation.isValid())
        {
            double longitude = myLocation.getQualifiedCoordinates().getLongitude();
            double latitude = myLocation.getQualifiedCoordinates().getLatitude();
        }
        UiApplication.getUiApplication().invokeLater(new Runnable() {
            public void run() {
                //Dialog.alert("Location Updated");
            }
        });
        setLocation(myLocation.getQualifiedCoordinates(),velocity,heading);
    } catch ( InterruptedException iex ) {
        System.out.println(iex.getMessage());
    } catch ( LocationException lex ) {
        System.out.println(lex.getMessage());
    }
} catch ( LocationException lex ) {
    System.out.println(lex.getMessage());
} 
```

我面临的问题：

**1)**区间值不变。我通过从持久存储中选择值来实现更改：

```
if (PersistentStoreHelper.persistentHashtable.containsKey("gpsInterval"))
{
    String intervalValue=((String) PersistentStoreHelper.persistentHashtable.get("gpsInterval"));
    MyScreen.interval=Integer.parseInt(intervalValue);
} 
```

这永远不会为空，因为导航到此页面会插入一个 30 分钟的值。

**2）**单击“刷新”按钮后，后台线程似乎被取消了。它不再以任何间隔值运行。

我读到只创建了一个位置提供程序的实例，并且在获取位置后使用“刷新”将其取消，因此后台线程停止。**这是真的？**如果是，我怎样才能达到我想要的结果。

编辑： gpsInterval 值读取如下：

```
if (PersistentStoreHelper.persistentHashtable.containsKey("gpsInterval"))
{
    String intervalValue=((String)PersistentStoreHelper.persistentHashtable.get("gpsInterval"));
    interval=Integer.parseInt(intervalValue);
}
else
{
    interval=10;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T08:41:38.247

## 保存间隔

因此，首先，确保当您让用户通过滑块**更改**更新间隔时，您将其正确保存到`PersistentStore`. 代码应如下所示：

```
// NOTE: I would recommend persisting the slider value as an Integer, not a String,
//   but, the original code used String, so that's what this uses
hashtable.put("gpsInterval", (new Integer(intervalSlider.getValue())).toString());
PersistentObject po = PersistentStore.getPersistentObject(APP_BUNDLE_ID);
po.setContents(hashtable);
po.commit(); 
```

由于您没有发布该代码，我只是想确保它已正确保存到持久存储中。

## 更新位置提供者/侦听器

另一个问题**是**`startLocationUpdate()`您使用以下代码启动位置更新：

```
locationProvider.setLocationListener(new LocationListenerImpl(), interval, -1, -1); 
```

它使用**被调用****的那**`interval`一刻的变量值。如果您稍后更新变量，**`setLocationListener()`**`interval`

```
String intervalValue=((String) PersistentStoreHelper.persistentHashtable.get("gpsInterval"));
MyScreen.interval=Integer.parseInt(intervalValue); 
```

这对位置监听器没有影响。它将使用*原始*间隔值不断更新，而不是新的间隔值。您将不得不`setLocationListener()`再次调用，新值为`interval`. 使用您的代码，您可能应该`startLocationUpdate()`再次调用：

```
String intervalValue=((String) PersistentStoreHelper.persistentHashtable.get("gpsInterval"));
MyScreen.interval=Integer.parseInt(intervalValue);
startLocationUpdate(); 
```

## 刷新问题

我不是 100% 确定，但我的猜测是，在按下**Refresh**按钮时使用的现有代码中，您将更**改为**具有`LocationProvider`不同*条件*的不同代码。这可能是第一个被取消的原因。

尝试更改您的`startLocationUpdate()`方法以**将**提供程序保存为成员变量：

```
/** this is the one location provider used by this class! */
private LocationProvider _locationProvider;

private boolean startLocationUpdate()
{
    boolean retval = false;
    try
    {
        _locationProvider = LocationProvider.getInstance(null); 
```

然后，在您的刷新代码中，使用**相同**的位置提供程序来获取当前位置：

```
double heading = 0;
double velocity = 0;

try {
    Location myLocation = _locationProvider.getLocation(6000);
    if(myLocation.isValid()) 
```

**注意：**如果你真的想要`setCostAllowed(false)`，那很好。*第*一次分配`_locationProvider`成员变量时执行此操作。并将该提供程序/标准用于正常的定期位置更新和**刷新**按钮处理程序。我认为关键是使用相同的提供者，而不是创建具有不同标准的新提供者。

# google-apps-script - 在另一个应用程序脚本中调用应用程序脚本

> ID：15409233
> 
> 赞同：2
> 
> 时间：2013-03-14T12:24:12.807
> 
> 标签：google-apps-script

有什么方法可以调用提供内容的 Google Apps 脚本并限制在另一个 Google Apps 脚本中的某个域，该脚本由该域中的用户调用？基本上，内容服务脚本是在域管理员上运行并提供私人信息的东西。

我认为它应该在制作内容服务脚本时工作，可供匿名使用，但我希望内容服务脚本仅在域内可用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T01:05:03.400

您可以将第一个脚本发布为 Web 服务，然后远程调用这些函数。可以这样做，因为当您作为 Web 应用程序发布时，您设置了执行脚本的权限。

[https://developers.google.com/apps-script/execution_web_apps](https://developers.google.com/apps-script/execution_web_apps)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T16:38:09.950

不幸的是，这是不可能的，因为脚本请求不是以作者的名义执行的，也不是执行它的用户，因此为脚本设置匿名使用应该可以工作。

但是您可以通过 post 或 get 传递参数。因此，即使任何人都可以调用脚本，也只有使用关键参数调用的脚本才会执行某些操作

剩下的问题是使用什么：get 或 post 我不知道脚本发出的请求是否在 https 中完成，所以使用 post 可能是一个更好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-31T16:06:56.480

是你要找的图书馆吗？请记住，这可能会减慢执行速度（与正常情况下将脚本绑定到多个文件相比）

[https://support.google.com/docs/thread/13371261?hl=en](https://support.google.com/docs/thread/13371261?hl=en) 是的，这是可能的。最简单的解决方案是创建一个 Apps 脚本库。您可以使用独立脚本或绑定脚本作为库。我更喜欢使用独立的以使其更易于访问，并且您将无法使用特定于绑定脚本的函数，这些函数可能会弄乱您的脚本。

这是一个演示如何获取 GAS 库设置的快速视频。 [https://www.youtube.com/watch?v=TqWtSp4IJcg&feature=youtu.be](https://www.youtube.com/watch?v=TqWtSp4IJcg&feature=youtu.be)

# iphone - TableView 数据在滚动时消失？

> ID：15409235
> 
> 赞同：0
> 
> 时间：2013-03-14T12:24:16.863
> 
> 标签：iphone, ios, objective-c, uitableview

我尝试了很多示例但不起作用。请检查我的代码并给出解决方案。提前致谢。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier];
    }
if (indexPath.section==0)
{
    img=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    img.frame=CGRectMake(25, 15, 75, 75);
    img.layer.cornerRadius=6.0;
    img.clipsToBounds=YES;
    img.layer.borderColor=[[UIColor grayColor]CGColor];
    [img setImage:[UIImage imageNamed:@""] forState:UIControlStateNormal];
    [cell.contentView addSubview:img];

    [img addTarget:self action:@selector(takePic:) forControlEvents:UIControlEventTouchDown];
    img.titleLabel.textColor=[UIColor blackColor];
    text=[[UITextField alloc]initWithFrame:CGRectMake(105, 30, 200, 30)];
    text.placeholder=@"Name";
    [text setBorderStyle:UITextBorderStyleRoundedRect];
    [cell addSubview:text];
    [cell addSubview:img];
    else if (indexPath.section==1)
{
    UILabel *label=[[UILabel alloc]initWithFrame:CGRectMake(20, 15, 100, 20)];
    label.text=[dosageArray objectAtIndex:indexPath.row];
    label.backgroundColor=[UIColor clearColor];
    label.font=[UIFont boldSystemFontOfSize:15.0];
    label.textColor=[UIColor blackColor];
    [cell addSubview:label];
  return cell;
     }} 
```

我在 tableview 中有一个三个部分。在第一部分我有一个 textfield 和 imageview 如果我滚动 textfield 和 imageview 将消失，这就是问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:41:22.317

**注意：**如果您的数据有限，请使用**SOLUTION-1**，因为这对内存管理不利，否则**SOLUTION-2**对您有好处。（*解决方案 - 1 可能对你有帮助*）

**解决方案 - 1**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {   
    NSString *CellIdentifier = [NSString stringWithFormat:@"S%1dR%1d",indexPath.section,indexPath.row];
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if(cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    }

        cell.textLabel.text = @"NameOFData "; 

   return cell;
} 
```

# 解决方案 - 2

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {   
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)  
   {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    }

        cell.textLabel.text = @"NameOFData "; 

   return cell;
} 
```

**编辑：**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
     {   
        NSString *CellIdentifier = [NSString stringWithFormat:@"S%1dR%1d",indexPath.section,indexPath.row];
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if(cell == nil)
        {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
            if (indexPath.section==0)
           {
    img=[UIButton buttonWithType:UIButtonTypeRoundedRect];
    img.frame=CGRectMake(25, 15, 75, 75);
    img.layer.cornerRadius=6.0;
    img.clipsToBounds=YES;
    img.layer.borderColor=[[UIColor grayColor]CGColor];
    [img setImage:[UIImage imageNamed:@""] forState:UIControlStateNormal];
    [cell.contentView addSubview:img];

    [img addTarget:self action:@selector(takePic:) forControlEvents:UIControlEventTouchDown];
    img.titleLabel.textColor=[UIColor blackColor];
    text=[[UITextField alloc]initWithFrame:CGRectMake(105, 30, 200, 30)];
    text.placeholder=@"Name";
    [text setBorderStyle:UITextBorderStyleRoundedRect];
    [cell addSubview:text];
    [cell addSubview:img];
      }
        }

            cell.textLabel.text = @"NameOFData "; 

       return cell;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T04:46:57.013

试试这段代码将 NSMutableArray 添加到 all。这里 displayArray 是 NSMutableArray。

```
text.text=[displayArray objectAtIndex:1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:26:50.180

从其他部分中删除并将`cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier];` 其留空

享受编程！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T12:27:49.900

```
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

cell.textLabel.text = @"Hello";

return cell; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T12:27:57.113

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"Cell";

 UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier]; 

if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier];

    }

    cell.textLabel.text = @""// value from your datasource

    return cell;

    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T12:28:50.440

请尝试使用这个...

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {

          static NSString *CellIdentifier = @"Cell";
          UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
          if (cell == nil)
          {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier];

          }
           return cell;
    } 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-14T12:27:58.650

**解决方案 1**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier];

//your code

} 
```

**解决方案 2**

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier];

}

cell.textLabel.text= @"YOUR TEXT";

} 
```

希望这会帮助你。

一切顺利 ！！！

# fiddler - 通过 Fiddler 在 POST 请求中发送凭据

> ID：15409236
> 
> 赞同：4
> 
> 时间：2013-03-14T12:24:22.840
> 
> 标签：fiddler

如何在 POST 请求（或任何 Http 方法）中使用 Fiddler 发送凭据？我在 Composer 选项卡中看不到任何内容。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T16:37:38.537

这完全取决于您的服务器使用哪种凭据。如果它使用 HTTP 身份验证，则标头进入**Authorization**标头。如果您的服务器使用 cookie，则凭据位于**Cookie**请求标头中。如果您的服务器使用 HTTPS 客户端证书，则凭据将附加到 TLS 连接本身，并且不会出现在 HTTP 请求的任何位置。

如果您只是尝试使用当前 Windows 凭据对使用 HTTP 身份验证的服务进行身份验证，请勾选Composer**选项子选项卡上的****自动身份验证**框。

# wpf - 相对于调用按钮定位 WPF 窗口

> ID：15409237
> 
> 赞同：0
> 
> 时间：2013-03-14T12:24:23.540
> 
> 标签：wpf, vb.net, window, position

我有一个打开一个新窗口的按钮。如何相对于该按钮定位新窗口，以使窗口右侧与按钮右侧对齐并且窗口顶部与按钮底部对齐？

我试图在调用窗口中计算这样的位置，首先尝试使它们相对于调用窗口本身对齐，但它似乎不正确。

```
Dim SecondWin As New SecondWindow()
SecondWin.Top = Me.Top + Me.ActualHeight - SecondWin.Height
SecondWin.Left = Me.Left + Me.ActualWidth - SecondWin.Width
SecondWin.Show() 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-14T12:31:53.740

这听起来像是[Popup 控件](http://msdn.microsoft.com/en-us/library/ms771746%28v=vs.85%29.aspx)的用途。[SO相关](https://stackoverflow.com/questions/978186/binding-a-popup-to-another-controls-relative-screen-position)

# wpf - 为什么这个 wpf 数据绑定失败

> ID：15409241
> 
> 赞同：1
> 
> 时间：2013-03-14T12:24:34.243
> 
> 标签：wpf, data-binding, mvvm

我是一个学习Wpf数据绑定功能的新手，最近遇到一个问题让我很困惑。

假设我们在 ViewModel 中有这样的代码：

```
private Person person;    
public Person Person
{
    get { return person; }
    set
    {
        SetProperty<Person>(ref person, ref value, ()=>Person);
    }
} 
```

*忽略可怕的命名*。`Person`然后我在 Command 的 Execute() 方法中更改了以下属性：

```
//try 1
private void UpdateInfoExecute()
{
     Person.Name="somebody";
     Person.Age=22;
} 
```

最后，数据绑定失败。当我像这样更改实现时：

```
//try 2
Person = new Models.Person() { Age=22,Name="somebody"}; 
```

它成功了！

好吧，在我看来，**try 1**`Person`也像**try 2**一样改变了' 属性。该`PropertyChanged`事件侦听属性，并确保在**尝试 1**`Person`之后它会被更改。

 **我不知道这个理论，谁能指出我错过的关键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:26:25.057

我不知道 SetProperty 究竟做了什么，但在您的“try1”中，您正在更改姓名和年龄，而不是人员。因此提出了 Name 和 Age 属性，Person 的引用没有改变并且保持不变。在您的“try2”中，您实际上设置了一个新人，因此该属性被更改和提升。

解决方案：确保 Person 也实现`INotifyPropertyChanged`并确保每个属性都会引发`PropertyChanged`. 然后一切都应该正常工作。

记住`.Person`就像`.Name`只是一个财产。**

# c# - C# 数据集 Firebird DB 触发器时间戳

> ID：15409242
> 
> 赞同：1
> 
> 时间：2013-03-14T12:24:34.647
> 
> 标签：c#, triggers, dataset, timestamp, firebird

我们有一个 firebird 数据库，在 c# 中有相应的类型化数据集。

id 列具有自动增量属性。当我们插入新行时，tableadapter 会自动检索新的 id。

在某些表上，我们有一个时间戳，它在更新语句之前通过数据库上的触发器进行更新。

是否有一种简单或自动的方法可以使数据集与数据库保持同步？我知道 getchanges 和 applychanges 的方法。但是没有更简单的方法来处理这些列吗？

# jquery - 如何将动态生成的锚标签的 URL 传递给 jQuery hover() 函数？

> ID：15409243
> 
> 赞同：1
> 
> 时间：2013-03-14T12:24:42.713
> 
> 标签：jquery, html, anchor

嗨，我在这里要做的是生成 HTML 中的链接列表作为锚标记：

```
<a href="/path/100" id="clickme">One link</a>
<a href="/path/101" id="clickme">Sec link</a>
<a href="/path/102" id="clickme">Third link</a>
<a href="/path/103" id="clickme">Fourth link</a> 
```

当有人将鼠标悬停在任何链接上时，我想触发`Ajax`对特定 URL 的调用。所以我正在`hover()`为这个 id 注册一个这样的函数：

```
$('#clickme').hover(function(){
         $.ajax({
                beforeSend : function(jqXHR){
                    //Doin something
                },
                url: //should be the url from the anchor tag that fired this event(how to get it??),
                success: function(data) {
                    //Doin something
                },
                error: function(jqXHR){
                    //Doin something
                }
              });
        }); 
```

我的问题是如何将锚标记作为对象或其他东西传递，以便我可以检索任何我想要的东西`href`、链接的位置等。

对于单个锚标签，它可以工作，但对于 multiplle 则不行。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:26:47.860

您应该使用类而不是对多个对象使用相同的 id 并`this.href`为每个对象使用。不允许将相同的 id 分配给一个以上的 html 元素，尽管您可以这样做。

```
<a href="/path/100" id="clickme" class="someclass">One link</a>
<a href="/path/101" id="clickme" class="someclass">Sec link</a>
<a href="/path/102" id="clickme" class="someclass">Third link</a>
<a href="/path/103" id="clickme" class="someclass">Fourth link</a>

$('.someclass').hover(function(){
     $.ajax({
            beforeSend : function(jqXHR){
                //Doin something
            },
            url: //should be the url from the anchor tag that fired this event(how to get it??),
            success: function(data) {
                //Doin something
            },
            error: function(jqXHR){
                //Doin something
            }
          });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:26:57.603

id 应该始终是唯一的（这就是为什么它被称为 ID）.. 使其成为类并使用类选择器

**html**

```
<a href="/path/100" class="clickme">One link</a>
<a href="/path/101" class="clickme">Sec link</a>
<a href="/path/102" class="clickme">Third link</a>
<a href="/path/103" class="clickme">Fourth link</a> 
```

**jQuery**

```
$('.clickme').hover(function(){
     var $this=$(this);
     $.ajax({
            beforeSend : function(jqXHR){
                //Doin something
            },
            url: //should be the url from the anchor tag that fired this event(how to get it??),
            data:{'href':$this.attr('href')}, //this will send '/path/100' as href if u click first link 
            success: function(data) {
                //Doin something
            },
            error: function(jqXHR){
                //Doin something
            }
          });
    }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T12:27:02.860

它不起作用，因为 ID 是唯一的，并且 jQuery 只会找到 ID 的第一个实例。

```
<a href="/path/100" class="clickme">One link</a>
<a href="/path/101" class="clickme">Sec link</a>
<a href="/path/102" class="clickme">Third link</a>
<a href="/path/103" class="clickme">Fourth link</a> 
```

js

```
$('.clickme').mouseenter(function(){
    var href = $(this).attr('href');
    $.ajax({
         url : href
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T12:32:31.910

如果悬停事件处理程序可以使用`$(this)`inside 来获取 href 属性。其他答案关于使用类而不是 id 是正确的。下面的示例设置为使用“clickme”类而不是 id。

```
$('.clickme').hover(function(){
     var $this = $(this);
     var theUrl = $this.attr('href');

     $.ajax({
            beforeSend : function(jqXHR){
                //Doin something
            },
            url: theUrl
            success: function(data) {
                //Doin something
            },
            error: function(jqXHR){
                //Doin something
            }
          });
    }); 
```

# android - 使用 `setContentView()` 设置的操作栏视图不适用于通过 `onCreateOptionsMenu` 添加的项目

> ID：15409244
> 
> 赞同：1
> 
> 时间：2013-03-14T12:24:43.323
> 
> 标签：android, actionbarsherlock

在我的应用程序中，我正在使用`setCustomView`方法设置操作栏的自定义视图。此视图在中心包含蓝色背景颜色和活动标题。

这是我用于设置自定义视图的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="25dp"
    android:background="@color/darkblue" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:gravity="center"
        android:textColor="@android:color/white"
        android:textSize="15sp"
        android:paddingTop="3dp"
        android:text="@string/app_name" />

</RelativeLayout> 
```

这是在活动操作栏中添加它的代码：

```
actionBar=getActionBar();
actionBar.setCustomView(R.layout.custom_actionbar);
actionBar.setDisplayOptions(com.actionbarsherlock.app.ActionBar.DISPLAY_SHOW_CUSTOM); 
```

现在，我使用以下代码将菜单项（搜索）添加到此自定义操作栏：

```
public boolean onCreateOptionsMenu(Menu menu) {
        com.actionbarsherlock.view.MenuInflater inflater=getSupportMenuInflater();
        inflater.inflate(R.menu.search, menu);
        super.onCreateOptionsMenu(menu);
        return true;
    } 
```

但是现在这个添加的菜单（搜索）项的背景不是蓝色的，它是操作栏默认的黑色。

这是我的菜单`xml`文件：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/search"
        android:showAsAction="always"
        android:icon="@drawable/action_search"/>
   </menu> 
```

我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T11:14:01.367

i think your code is working...

![enter image description here](../Images/abfefc5c95acc1f0eb035833cee3e9ce.png)

Please compare:

```
package com.example.testaction;

import android.os.Bundle;

import com.actionbarsherlock.app.ActionBar;
import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.view.Menu;

public class MainActivity extends SherlockActivity {

    private ActionBar actionBar;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setTheme(R.style.Sherlock___Theme_Light);
        setContentView(R.layout.activity_main);

        actionBar = getSupportActionBar();
        actionBar.setCustomView(R.layout.test_action);
        actionBar
                .setDisplayOptions(com.actionbarsherlock.app.ActionBar.DISPLAY_SHOW_CUSTOM);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getSupportMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

**EDITED**

**Insted Of Above Code use Custome Theam Like below then your problem is solved:**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <!-- the theme applied to the application or activity -->
    <style name="CustomActivityTheme" parent="@android:style/Theme.Holo">
        <item name="android:actionBarStyle">@style/MyActionBar</item>
        <!-- other activity and action bar styles here -->
    </style>

    <!-- style for the action bar backgrounds -->
    <style name="MyActionBar" parent="@android:style/Widget.Holo.ActionBar">
        <item name="android:background">@color/colour_blue</item>
        <item name="android:backgroundStacked">#FFFFFF</item>
        <item name="android:backgroundSplit">@color/colour_blue</item>
    </style>

</resources> 
```

in Class:

```
package com.example.testaction;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // setTheme(R.style.Sherlock___Theme_Light);
        setContentView(R.layout.activity_main);
        /*
         * actionBar = getSupportActionBar();
         * actionBar.setCustomView(R.layout.test_action); actionBar
         * .setDisplayOptions
         * (com.actionbarsherlock.app.ActionBar.DISPLAY_SHOW_CUSTOM);
         */
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

add this style in Android Manifest:

```
<application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/CustomActivityTheme" > 
```

its look like:

![enter image description here](../Images/be415fae10167e3ade2e180b195b54c1.png)

for more detail look in to this [artical](http://developer.android.com/guide/topics/ui/actionbar.html).

# css - 当子元素被突出显示时，CSS 突出显示父元素

> ID：15409249
> 
> 赞同：4
> 
> 时间：2013-03-14T12:25:01.980
> 
> 标签：css

当我孩子或孙子悬停时，是否有一种仅用于突出显示父菜单项的 CSS 方法。

例如。

```
<ul>
  <li><a href="link">Item 1</a>
    <ul>
      <li><a href="link">Item 1.1</a></li>
      <li><a href="link">Item 1.2</a></li>
      <li><a href="link">Item 1.3</a></li>
    </ul>
  </li>
</ul> 
```

所以在上面的例子中，当“Item 1.1”、“Item 1.2”或“Item 1.3”悬停在上面时，我可以用样式定位“Item 1”吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T12:33:06.490

您可以将 :hover 应用于元素...悬停子项也意味着鼠标“悬停”在父项上。

在给出的简单情况下。

```
li:hover{font-weight: bold;} 
```

现在你想限制子元素不被悬停

```
li:hover li{font-weight: normal} 
```

现在您需要重新突出显示悬停的子项。

```
li:hover li:hover{font-weight: bold;} 
```

[JSFiddle 示例](http://jsfiddle.net/PHPsycho/wppzk/)

# ios - setAnnotation - 无法识别的选择器

> ID：15409255
> 
> 赞同：0
> 
> 时间：2013-03-14T12:25:13.603
> 
> 标签：ios, objective-c, mapkit

在点击搜索按钮后在设备上运行时，我收到此错误，但它在模拟器中运行。

```
2013-03-08 17:58:33.981 IPAD[2661:907] Slider values are:min:5000.000000 and max:500000.000000
2013-03-08 17:58:33.989 IPAD[2661:907] +[SBJsonStreamWriter initialize] NSCache supported
2013-03-08 17:58:35.278 IPAD[2661:907] count is 806
2013-03-08 17:58:35.289 IPAD[2661:907] strcount is 806
2013-03-08 17:58:35.831 IPAD[2661:907] -[REVClusterPin setAnnotation:]: unrecognized selector sent to instance 0x1cd36e00
2013-03-08 17:58:35.833 IPAD[2661:907] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[REVClusterPin setAnnotation:]: unrecognized selector sent to instance 0x1cd36e00'
*** First throw call stack:
(0x32f432a3 0x3addc97f 0x32f46e07 0x32f45531 0x32e9cf68 0x33d5f18b 0x33d5eeb1 0x33d5bac7 0x33d5eb1b 0x59eb5 0x69201 0x34d6a595 0x34dbf14b 0x34dbf091 0x34dbef75 0x34dbee99 0x34dbe5d9 0x34dbe4c1 0x34dacb93 0x34dac833 0xa90f7 0x9eebd 0x3387e6fd 0x337be1f9 0x337be115 0x32c2045f 0x32c1fb43 0x32c47fcb 0x32e8974d 0x32c4842b 0x32bac03d 0x32f18683 0x32f17ee9 0x32f16cb7 0x32e89ebd 0x32e89d49 0x36a3c2eb 0x34d9f301 0xa1227 0x43620)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:30:08.143

它为此崩溃了

```
[REVClusterPin setAnnotation:]: 
```

很可能是因为您在此处传递的值不会退出。或者您忘记在您的 xib 中绑定您的任何控件。

# asp.net-mvc - 围绕图像的 MVC4 链接 - IE9

> ID：15409258
> 
> 赞同：0
> 
> 时间：2013-03-14T12:25:27.517
> 
> 标签：asp.net-mvc, internet-explorer, url

我在 MVC4 应用程序中内置的一些图像链接发生了一些非常奇怪的事情。

它们在 Razor 视图中定义，如下所示：

```
 <a href="@Url.Action("Register", "Account")">
            <img src="~/Images/register.png" alt="register-graphic" title="Register" />
        </a> 
```

当我调试这个页面加载和上面定义的所有三个图像链接实例都很好。单击任何图像，浏览器将导航到目标。

在 Firefox、Chrome 中完美运行……但是，其他浏览器的精美制作完全失败了。

如果我在第一次加载时在 IE 中调试它，所有链接都很好，如果我导航到它工作的页面之一，如果我点击主页链接返回原始页面，一切都很好。

但是，如果我单击其中一个链接，访问该页面并单击后退按钮，则所有链接都将被终止，图像上仍然存在的唯一链接是页面中的第一个链接，并且似乎获得了副本所有页面的 HTML 作为 URL ！！！！！！

我在 IE 中尝试了所有各种渲染模式，它们的行为都相同。

我真的不知道该怎么解决这个问题。

据我所知，IE 只是让每个新版本的 Web 开发变得更加困难，我认为到 2013 年 IE 将被排序...... :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T15:42:03.763

这还不是一个答案，但在其他机器上测试过这个行为在其他机器上按预期工作......非常奇怪

# xpath - 检查 section 元素中的第二个子元素是否为图形

> ID：15409262
> 
> 赞同：0
> 
> 时间：2013-03-14T12:25:32.150
> 
> 标签：xpath

我需要检查 section 元素中的第二个孩子是否是图形。我的 XML 结构如下所示：

```
<section>
<title>Something</title>
<figure><graphic></graphic></figure>
<figure><graphic></graphic></figure>
<p>Some text</p>
</section> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:33:16.523

此 XPath 表达式应返回其第二个子元素为图形的所有部分。

```
//section[child::*[2][self::figure]] 
```

您是否尝试理解对[检查前面的兄弟姐妹是否是标题元素](https://stackoverflow.com/questions/15407488/check-if-preceding-sibiling-is-a-title-element)的回复？

# php - 收到错误“ns_error_unknown_protocol

> ID：15409270
> 
> 赞同：0
> 
> 时间：2013-03-14T12:25:58.993
> 
> 标签：php, javascript, protocols

当我在 firefox 中运行此代码时，我收到错误“ns_error_unknown_protocol”。我的代码有什么问题？我在 google chrome 中运行它，但它运行没有任何问题。它没有显示任何错误消息？请帮帮我。

我的 javascript 是

```
<script>
    $(document).ready(function() 
    {
var wrong="nnnn.htm";  
    var name = prompt("Please type in the password",''); 
    $.ajax({
    type: 'POST',
    dataType: 'json',
    url: 'password.php',
    data: {
    name: name
        },
    success: function(data) 
    {
        if (data.success == "good") 
             {

                 window.location.href =data.address;

             }    
        else 
             {
                 alert(data);
                location.href=wrong
             }
    },
    error: function(data) 
    {

        location.href=wrong;
    },
        });
        });
    </script> 
```

我的 php 页面是

```
<?php
$password="123";
$prompt_password=$_POST['name'];
$success="good";
if($prompt_password==$password)
{
$output =  array('success'=>'good',
          'address'=>'itms-services://?action=download-   manifest&url=http://feathersoft.net/projects/tests/Corelogic/Alert/AlertApp.plist');
echo json_encode($output,JSON_FORCE_OBJECT);
}
else
{
echo "error";
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:34:56.963

Firefox 显示该错误，因为它现在不知道如何处理`itms-services://`协议。

转到`about:config`Firefox 并搜索`network.protocol-handler`是否可以看到任何设置，`network.protocol-handler.external.itms-services`然后只有 Firefox 可以处理您的请求。

更改`self.location.href = data.address`为`self.location = data.address`as`href`用于 HTTP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:29:29.040

错误消息`ns_error_unknown_protocol`基本上是说浏览器不知道如何处理您的自定义协议`itms-services://`。

我认为这与 href 设置有关。

尝试将其更改为

```
self.location = data.address; 
```

# vb.net - 检查句柄是否存在

> ID：15409275
> 
> 赞同：1
> 
> 时间：2013-03-14T12:26:32.197
> 
> 标签：vb.net, window, handle

我正在使用此代码来检测特定窗口何时处于活动状态，以及何时将句柄保存在变量中：

```
 Dim kiosk As IntPtr
    Dim l As Integer = GetWindowTextLength(GetForegroundWindow())
    Dim WindowTextBuffer As String = New String(Chr(0), l)
    GetWindowText(GetForegroundWindow(), WindowTextBuffer, l + 1)

    Debug.WriteLine(WindowTextBuffer)

    If WindowTextBuffer = "FFKiosk" Then
        kiosk = GetForegroundWindow()
    End If 
```

到目前为止一切正常。但我想验证这个窗口是否仍然处于活动状态，如果不是，我想将 kiosk 变量设置为 null。如何验证此句柄是否仍然有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:55:41.080

好吧，您的具体问题的答案是：从 User32.dll 导入 IsWindow 函数

```
<DllImport("user32.dll", CharSet:=CharSet.Auto, ExactSpelling:=True)> _
Public Shared Function IsWindow(ByVal hWnd As IntPtr) As Boolean
End Function 
```

然后，

```
If IsWindow(kiosk) Then
    ' do something
End If 
```

但是 MSDN[警告说，](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633528%28v=vs.85%29.aspx)如果您的线程不是创建窗口的线程：“线程不应将 IsWindow 用于它未创建的窗口，因为在调用此函数后窗口可能会被销毁。此外，因为窗口句柄被回收的句柄甚至可以指向不同的窗口。”

相反，最好获取进程 ID 并检查进程是否仍在运行。

```
 Dim processes As System.Diagnostics.Process() = System.Diagnostics.Process.GetProcessesByName("theExeName")
    Dim processIds(processes.Length) As Integer

    If processes.Length > 0 Then
        Dim i As Integer = 0
        For Each processId As Integer In processIds
            processIds(i) = processes(i).Id
        Next 
```

# windows-phone-7 - Windows Phone 枢轴和混合

> ID：15409276
> 
> 赞同：0
> 
> 时间：2013-03-14T12:26:37.790
> 
> 标签：windows-phone-7, pivot, mvvm-light, datatemplateselector

我正在尝试`Pivot Page`在 Windows Phone 上设计一个，每个 Pivot Item 都会有一个不同的模板。我正在使用 MVVM Light，并且`ViewModelLocator`我想要一个属性 `List<ViewModelBase>`（或另一个具有我的 PivotItems ViewModels 的一些公共属性的 Base 类）并将其绑定到我的 Pivot 的 ItemsSource 属性。我也想使用一个`DataTemplateSelector`，所以我可以在每个 Pivot 的 DataTemplates 之间进行选择。我将它们存储在`ResourceDictionary`.

问题是由于某种原因，我在 Blend 中看不到我`desing-data`的，我的意思是我不能玩每个 PivotItem 并处理它的模板。

如果我要`PivotItems`手动添加，并将`DataContext`它们中的每一个设置为我的特定`ViewModelBase subclass`，那么它会起作用，而且我也不必使用，`DataTemplateSelector`因为我可以将 DataTemplate 从 Blend 手动设置为每个数据透视项。

我正在尝试做这一切，因为我想更改`DataTemplate of the PivotHeader`，但我无法绑定它，因为我无法选择 DataContext，所以如果我要使用 a`List<ViewModelBase>`与 ItemsSource 绑定，那么当我会尝试编辑 HeaderDataTemplate，HeaderTemplate 中的 DataContext 将已设置为 ViewModelBase（或我将用于派生每个 PivotItem 的 ViewModel 的任何 Base）。

我正在使用`Visual Studio 2010 Express`和`Microsoft Expression`Blend 4。

谢谢你。

# c# - 为正确的构造函数注入和 ISP（SOLID）定义抽象

> ID：15409278
> 
> 赞同：2
> 
> 时间：2013-03-14T12:26:48.700
> 
> 标签：c#, design-patterns, dependency-injection, abstraction

假设出于不同的原因我想对集合进行抽象操作：

现在为了简单起见，让我们对一个集合进行推理

```
class Book {
  public string Title { get; set; };
  public string SubTitle { get; set; }
  public bool IsSold { get; set; }
  public DateTime SoldDate { get; set; }
  public int Volums { get; set; }
} 
```

我有一种只需要搜索`Book::Title`（区分大小写或不区分大小写）的类型，因此我可以定义我的抽象：

```
interface ITitleSearcher {
  bool ContainsTitle(string title);
} 
```

然后实施

```
class CaseSensitiveTitleSearcher : ITitleSearcher { ... }
class NoCaseSensitiveTitleSearcher : ITitleSearcher { ... } 
```

并将其作为

```
class TitleSearcherConsumer  {
  public TitleSearcherConsumer(ITitleSearcher searcher) { // <- ctor injection
  }
} 
```

直到这里我都清楚了，据我所知，[接口隔离原则](http://en.wikipedia.org/wiki/Interface_segregation_principle)也得到了遵守。

继续开发我必须满足其他要求，所以我定义然后实现其他接口，`ITitleSearcher`例如：

```
class CaseSensitiveSubTitleSearcher : ISubTitleSearcher { ... }
class SoldWithDateRangeSearcher : ISoldDateRangeSearcher { ... } 
```

为了不违反 DRY（不要重复自己），我可以创建一个包装器`IEnumerable<Book>`：

```
class BookCollection : ITitleSearcher, ISubTitleSearcher, ISoldDateRangeSearcher
{
  private readonly IEnumerable<Book> books;

  public BookCollection(IEnumerable<Book> books)
  {
    this.books = books;
  }
  //...
} 
```

现在，如果我有一个像我这样的消费者，`TitleSearcherConsumer`我可以毫无问题地传递一个`BookCollection`.

但如果我有这样的消费者：

```
class TitleAndSoldSearcherConsumer {
  public TitleAndSoldSearcherConsumer(ITitleSearcher src1, ISoldDateRangeSearcher src2) {

  }
} 
```

我无法将`BookCollection`实例注入`TitleAndSoldSearcherConsumer`ctor；我必须传递每个接口的实现。

是的，我可以`IBookCollection`用其他接口的所有方法定义一个并在所有消费者中使用它，但是这样做不会违反 ISP 吗？

我可以同时靠近 ISP/SOLID 和 DRY 吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T13:25:07.647

> 是的，我可以用其他接口的所有方法定义一个 IBookCollection 并在所有消费者中使用它，但这样做不会违反 ISP 吗？

您不会违反 ISP，但您的藏书将开始承担太多责任，您将违反单一责任原则。

让我担心的另一件事是`ITitleSearcher`接口的多个实现。我不确定这里是否违反了某些设计原则，但您的设计中似乎有些含糊不清，您可能应该看看。此外，对于每个搜索操作，您都在创建一个新的抽象。您已经拥有`ITitleSearcher`,`ISubTitleSearcher`和`ISoldDateRangeSearcher`并且可能会再添加几十个。我认为您在这里缺少的是对系统中查询的一般抽象。所以这是你可以做的：

定义查询参数的抽象：

```
public interface IQuery<TResult> { } 
```

这是一个没有成员的接口，只有一个泛型类型`TResult`。描述了该`TResult`查询的返回类型。例如，您可以按如下方式定义查询：

```
public class SearchBooksByTitleCaseInsensitiveQuery : IQuery<Book[]>
{
    public string Title;
} 
```

这是接受 a`Title`并返回的查询的定义`Book[]`。

您还需要对知道如何处理特定查询的类进行抽象：

```
public interface IQueryHandler<TQuery, TResult>
    where TQuery : IQuery<TResult>
{
    TResult Handle(TQuery query);
} 
```

看看该方法如何接受 a`TQuery`并返回 a `TResult`？一个实现可能如下所示：

```
public class SearchBooksByTitleCaseInsensitiveQueryHandler :
    IQueryHandler<SearchBooksByTitleCaseInsensitiveQuery, Book[]>
{
    private readonly IRepository<Book> bookRepository;

    public SearchBooksByTitleCaseInsensitiveQueryHandler(
        IRepository<Book> bookRepository) {
        this.bookRepository = bookRepository;
    }

    public Book[] Handle(SearchBooksByTitleCaseInsensitiveQuery query) {
        return (
            from book in this.bookRepository.GetAll()
            where book.Title.StartsWith(query.Title)
            select book)
            .ToArray();
     }
} 
```

现在消费者可以依赖这样的特定`IQueryHandler<TQuery, TResult>`实现：

```
class TitleSearcherConsumer  {
    IQueryHandler<SearchBooksByTitleCaseInsensitiveQuery, Book[]> query;
    public TitleSearcherConsumer(
      IQueryHandler<SearchBooksByTitleCaseInsensitiveQuery, Book[]> query) {
    }

    public void SomeOperation() {
        this.query.Handle(new SearchBooksByTitleCaseInsensitiveQuery
        {
            Title = "Dependency Injection in .NET"
        });
    }
} 
```

**这到底给我带来了什么？**

*   通过定义`IQueryHandler<TQuery, TResult>`查询，我们定义了系统中非常常见的模式（查询）的一般抽象。
*   `IQueryHandler<TQuery, TResult>`定义单个成员并遵守 ISP 。
*   `IQueryHandler<TQuery, TResult>`实现实现单个查询并遵守 SRP。
*   该`IQuery<TResult>`接口允许我们对查询及其结果进行编译时支持。消费者不能错误地依赖返回类型不正确的处理程序，因为它不会编译。
*   通用`IQueryHandler<TQuery, TResult>`抽象允许我们将各种横切关注点应用于查询处理程序，而无需更改任何实现。

特别是最后一点很重要。诸如验证、授权、日志记录、审计跟踪、监控和缓存等横切关注点都可以使用装饰器非常容易地实现，而无需更改**处理程序实现和消费者**。看看这个：

```
public class ValidationQueryHandlerDecorator<TQuery, TResult>
    : IQueryHandler<TQuery, TResult>
    where TQuery : IQuery<TResult>
{
    private readonly IServiceProvider provider;
    private readonly IQueryHandler<TQuery, TResult> decorated;

    public ValidationQueryHandlerDecorator(
        Container container,
        IQueryHandler<TQuery, TResult> decorated)
    {
        this.provider = container;
        this.decorated = decorated;
    }

    public TResult Handle(TQuery query)
    {
        var validationContext =
            new ValidationContext(query, this.provider, null);

        Validator.ValidateObject(query, validationContext);

        return this.decorated.Handle(query);
    }
} 
```

这是一个装饰器，可以在运行时围绕所有命令处理程序实现进行包装，从而增加对其进行验证的能力。

有关更多背景信息，请查看这篇文章：[同时...在我的架构的查询方面](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:40:34.077

你的界面太具体了imo。有一个谓词

```
interface ISearcher {
  bool IsAMatch(Book book);
} 
```

并从中获得您的搜索者。另外，不要将搜索功能放入您的收藏中 - 收藏用于存储和迭代。也许我只是描述了访问者模式。

# node.js - 使用 expressjs 发布到远程 url

> ID：15409288
> 
> 赞同：3
> 
> 时间：2013-03-14T12:27:12.580
> 
> 标签：node.js, backbone.js, express

我的 server.js 中有这个

```
app.post("/leadAPI/ed",function(request,response){
//api post code here
}); 
```

在这个发布请求中，我需要将请求正文中包含的数据发布到具有特定 URL 的某些外部 API，并使用 response.send 将响应发回。如何以干净的方式做到这一点。在expressjs中有什么内置的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T12:59:21.687

正如 Andreas 所说，这不是 express 的职责。它的职责是在 HTTP 请求进来时调用你的函数。

您可以使用 node 的内置 HTTP 客户端，正如 Andreas 在评论中提到的那样，向您的外部站点发出请求。

尝试这样的事情：

```
var http = require('http');

app.post("/leadAPI/ed", function(request, response) {
  var proxyRequest = http.request({
      host: 'remote.site.com',
      port: 80,
      method: 'POST',
      path: '/endpoint/url'
    },
    function (proxyResponse) {
      proxyResponse.on('data', function (chunk) {
        response.send(chunk);
      });
    });

  proxyRequest.write(response.body);
  proxyRequest.end();
}); 
```

我确定您需要对其进行调整以处理分块响应并找出传输编码，但这就是您需要的要点。

有关详细信息，请参阅

[http://nodejs.org/api/http.html](http://nodejs.org/api/http.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T13:04:07.113

我会为此使用 Mikeal Rogers 的[请求](https://github.com/mikeal/request)库：

```
var request = require('request');

app.post("/leadAPI/ed",function(req, res){
  var remote = request('remote url');

  req.pipe(remote);
  remote.pipe(res);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-07T12:42:08.380

你可以这样做。

```
var request = require('request');
var url = "<remote url>"
app.post("/leadAPI/ed",function(request, response){
  request.get({url:url, headers:request.headers, body:request.body}, function (err, res, body) {
    if(!err) {
      response.status(200).send(res) // JSON.stringify(res) if res is in json
    }
  })
}) 
```

请记住，两者的内容类型应该相同。

# jquery - $('html, body').animate 在 iPad 上的 jquery 性能

> ID：15409289
> 
> 赞同：0
> 
> 时间：2013-03-14T12:27:18.467
> 
> 标签：jquery, html

我想在 2 秒内向下滚动大约 500 像素的网页，以显示刚刚从 ajax 调用传入的新数据。我使用了以下代码段：

```
$('html, body').animate({'scrollTop':'+=500'}, 2000); 
```

在 PC 上设置相当快，但在 iPad 上调用动画大约需要 650 毫秒。整个页面被冻结（动画加载 .gif 也被冻结）。为什么这么慢？我能做些什么来加快这个设置调用吗？

# javascript - javascript中的转义字符，将\"替换为仅"

> ID：15409292
> 
> 赞同：0
> 
> 时间：2013-03-14T12:27:21.430
> 
> 标签：javascript, regex, json, extjs, extjs4

我有一个 json 对象，它将从服务器端返回，如下所示。

```
{"name":"value which has \" "} for Ex : {"Key":"This Key\" "} 
```

当我在客户端收到此响应时，它会自动编码为 stringify 后的结果

```
 {"Key":"This Key\\\" "} 
```

现在我想替换`\\\"`to only`\"` 所以我的 UI 只能显示`This Key"`

直到我尝试做`jsonString.replace(/\\\"/g,'\"');` 但给出的输出`This Key\\"`

请帮助我，我错了..

问候， 普尼斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:32:46.400

您似乎正在尝试使用正则表达式编写 JSON 解析器。不要那样做，使用现有的。

```
var data = JSON.parse(string_of_json);
var key = data.Key; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T12:32:28.473

您可以使用 replace() 函数：

```
str.replace('\\\\"','\"'); 
```

有用。

PS你忘记了一个“\”

# android - 未调用 Android/Monodroid ApplyTransformation

> ID：15409294
> 
> 赞同：1
> 
> 时间：2013-03-14T12:27:32.017
> 
> 标签：android, animation, xamarin.android

我正在使用自定义动画来扩展和收缩我的视图，在 SO 上的另一个答案中找到。我的问题是，ApplyTransformation 永远不会被调用，因此没有任何反应。

还有什么我应该做的吗？

```
private void BrandTextClicked (object sender, EventArgs e)
{
    Animation animation = null;
    if (expanded) {
        animation = new ExpandAnimation (listView, 0, height);
    } else {
        animation = new ExpandAnimation(listView, height, 0);
    }
    animation.Duration = 500;
    animation.Interpolator = new AccelerateInterpolator(1);
    listView.Animation = animation;
    animation.StartNow ();
    listView.Invalidate ();

    expanded = !expanded;
} 
```

...

```
public class ExpandAnimation : Animation {
    private int mStartHeight;
    private int mDeltaHeight;
    private View mContent;

    public ExpandAnimation(View content, int startHeight, int endHeight) : base() {
        mContent = content;
        mStartHeight = startHeight;
        mDeltaHeight = endHeight - startHeight;
    }

    public override void Initialize (int width, int height, int parentWidth, int parentHeight)
    {
        base.Initialize (width, height, parentWidth, parentHeight);
    }

    protected override void ApplyTransformation(float interpolatedTime, Transformation t) {
        ViewGroup.LayoutParams lp = mContent.LayoutParameters;
        lp.Height = (int) (mStartHeight + mDeltaHeight *
                           interpolatedTime);
        mContent.LayoutParameters = lp;
        mContent.RequestLayout();
    }

    public override bool WillChangeBounds() {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T00:54:06.413

我最终使用了 Android.Animation 包/命名空间和 ValueAnimation，如下所示：

```
 ValueAnimator animator = null;
    if (expanded) {
        handle.SetImageResource(Android.Resource.Drawable.ArrowDownFloat);
        animator = ValueAnimator.OfObject (new HeightEvaluator (listView), height, 0);
    } else {
        handle.SetImageResource(Android.Resource.Drawable.ArrowUpFloat);
        animator = ValueAnimator.OfObject (new HeightEvaluator (listView), 0, height);
    }

    animator.SetDuration(500);
    animator.SetInterpolator(new AccelerateInterpolator (1));
    animator.Start ();

    expanded = !expanded; 
```

# java - Pattern.quote 方法有什么用？

> ID：15409296
> 
> 赞同：67
> 
> 时间：2013-03-14T12:27:34.830
> 
> 标签：java, regex, pattern-matching

我正在尝试`Pattern.quote`使用以下代码来理解：

```
String pattern = Pattern.quote("1252343% 8 567 hdfg gf^$545");
System.out.println("Pattern is : "+pattern); 
```

产生输出：

```
Pattern is : \Q1252343% 8 567 hdfg gf^$545\E 
```

什么是`\Q`和`\E`这里？文档描述说：

> `String`返回指定的文字模式`String`。
> 
> 此方法生成 a `String`，可用于创建`Pattern`匹配字符串的 a ，就`s`好像它是文字模式一样。
> 
> 输入序列中的元字符或转义序列将没有特殊含义。

但是`Pattern.quote`的返回类型是`String`而不是编译`Pattern`对象。

为什么需要这种方法？有哪些使用示例？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2013-03-14T12:30:19.527

`\Q`表示“文字文本的开头”（即正则表达式“打开引号”）
`\E`表示“文字文本的结尾”（即正则表达式“关闭引号”）

调用该`Pattern.quote()`方法会将字符串包装在 中`\Q...\E`，从而将文本转换为正则表达式*文字*。例如，`Pattern.quote(".*")`将匹配一个点，然后是一个星号：

```
System.out.println("foo".matches(".*")); // true
System.out.println("foo".matches(Pattern.quote(".*"))); // false
System.out.println(".*".matches(Pattern.quote(".*"))); // true 
```

该方法的目的是不要求程序员必须记住特殊术语`\Q`，`\E`并为代码增加一点可读性 - 正则表达式已经很难阅读了。比较：

```
someString.matches(Pattern.quote(someLiteral));
someString.matches("\\Q" + someLiteral + "\\E")); 
```

参考[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#quote%28java.lang.String%29)：

> 返回指定字符串的文字模式字符串。
> 
> 此方法生成一个字符串，可用于创建一个模式，该模式将匹配字符串 s，就好像它是文字模式一样。
> 
> 输入序列中的元字符或转义序列将没有特殊含义。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-14T12:32:28.297

该`Pattern.quote`方法引用正则表达式模式的一部分以使正则表达式将其解释为字符串文字。

假设您在搜索程序中有一些用户输入，并且您想对其进行正则表达式。但是这个输入可能有不安全的字符，所以你可以使用

```
Pattern pattern = Pattern.compile(Pattern.quote(userInput)); 
```

此方法不引用 a`Pattern`但是，正如您所指出的，将 a 包含`String`在正则表达式引号中。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-03-14T12:30:24.607

`\Q`和`\E`，除其他外，在[java.util.regex.Pattern](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html) Javadoc 页面上进行了详尽的记录。它们的意思是“begin **Q** uote”、“ **E** nd quote”，并划定一个所有字符都具有字面意义的区域。使用 return of 的方法`Pattern.quote`是将其提供给`Pattern.compile`，或任何其他接受模式字符串的方法，例如`String.split`.

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-14T12:30:04.483

如果您编译由返回的字符串`Pattern.quote`，您将获得与您d`Pattern`的文字字符串匹配的a。`quote`

`\Q`并`\E`标记字符串引用部分的开头和结尾。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-03-14T12:30:31.110

正则表达式经常与普通字符串发生冲突。假设我想要一个正则表达式来搜索仅在运行时才知道的某个字符串。我们如何确定字符串没有正则表达式的含义 eg( `".*.*.*"`)？我们引用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-02T07:54:47.303

此方法用于使模式被视为文字字符序列。这与 a 具有相同的效果**`PATTERN`。`LITERAL`**旗帜。

# c# - C#返回int并在返回后增加值

> ID：15409298
> 
> 赞同：-3
> 
> 时间：2013-03-14T12:27:48.887
> 
> 标签：c#, properties

我有一个接收 的属性，`int`每个 get Number 都会返回`int`，然后我需要将 加`int`一。
如果我这样做：

```
 public int Number
    {
        set;
        get
        {
            Number++;
            return Number;
        }
    } 
```

它不好，因为如果我从7000开始，它将从7001开始。
返回后如何增加？

我可以使用`return Number++;`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T12:29:01.283

首先，您当前的代码将抛出[StackOverflowException](http://msdn.microsoft.com/en-us/library/system.stackoverflowexception%28v=vs.71%29.aspx)

为什么？因为它会返回`Number`，但要返回`Number`它会读取`Number`值。所以它会`get`无限调用。

其次，使用[Postfix 增量运算符](http://msdn.microsoft.com/en-us/library/aa691363%28v=vs.71%29.aspx)来解决您的主要问题。

试试这个：

```
 private int number;

    public int Number
    {
        set { number = value; }
        get
        {
            return number++;
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T12:40:11.983

我会避免这样做。

关于属性的第一个最佳实践是*一致性*，即当调用 getter 时，您的属性不应该修改您的类的成员。基本上，对 getter 的多次连续调用应该返回相同的值（有例外，例如`DateTime.Now`，但那些是边缘情况）。

如果你想计算一个操作（在你的情况下是增量），你可能应该使用一个函数。

来自[MSDN](http://msdn.microsoft.com/en-us/library/ms229006.aspx)：

> 一般来说，方法代表动作，属性代表数据。属性像字段一样使用，这意味着属性不应计算复杂**或产生副作用**。

您可以看到的第一个副作用是调试器会默默地增加您的号码，以防您对您的财产进行监视......

# c# - 从字符串值递增数字

> ID：15409303
> 
> 赞同：4
> 
> 时间：2013-03-14T12:27:57.357
> 
> 标签：c#

由于某种原因，我的申请中有两个 5 位数字。

下面的代码给你一个简单的想法。

```
string s = "00001"; // Initially stored somewhere.
//Operation start
string id = DateTime.Now.ToString("yy") + DateTime.Now.AddYears(-1).ToString("yy") + s;
//Operation end

//Increment the value of s by 1\. i.e 00001 to 00002 
```

这可以通过将**s**的值转换为 int 并将其递增 1 来轻松完成，但毕竟我还必须将 s 的递增值存储在 5 位中，因此它将是**"00002"**。

这种想法让我很痛苦...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T12:29:47.307

利用

```
string s = "00001";
int number = Convert.ToInt32(s);
number += 1;
string str = number.ToString("D5"); 
```

获得至少 5 位数。

[“D”（或十进制）格式说明符](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx#DFormatString)

> **如果需要，该数字在其左侧填充零以产生精度说明符给出的位数。**如果未指定精度说明符，则默认值是表示不带前导零的整数所需的最小值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-14T12:30:35.990

这似乎对我有用。

```
string s = "00001";
int i = Int32.Parse(s);
i++;
s = i.ToString("D" + s.Length); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T12:30:46.447

所以我想你想知道如何将 an 转换`int`为 5 digit `string`。

你可以这样做：

```
int i = 1;
string s = i.ToString("D5");
//s = "00001" 
```

这里有很多[格式示例](http://msdn.microsoft.com/en-gb/library/dwhawy9k.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T12:31:15.310

用于`String.Format()`实现此目的：

```
string str = String.Format({0:#####}, s); 
```

看[这里](http://alexonasp.net/samples/stringformatting/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T12:33:01.810

这可以使用以下`PadLeft`功能：

```
int i = 1; // Initially stored somewhere.
//Operation start
string id = DateTime.Now.ToString("yy") + DateTime.Now.AddYears(-1).ToString("yy") + i.ToString().PadLeft(5, '0');
//Operation end 
```

# php - 如何使用 php nusoap 响应 wsdl 策略

> ID：15409306
> 
> 赞同：1
> 
> 时间：2013-03-14T12:28:05.700
> 
> 标签：php, authentication, wsdl, nusoap, policy

我希望使用 wsdl 文件中描述的 web 服务。我正在使用 php 和 nusoap 库。

我不确定如何正确响应以下政策要求：

```
<wsp:Policy wsu:Id="MyPolicies">
    <wsp:ExactlyOne>
        <wsp:All>
            <sp:TransportBinding>
                <wsp:Policy>
                    <sp:TransportToken>
                        <wsp:Policy>
                            <sp:HttpsToken RequireClientCertificate="false"/>
                       </wsp:Policy>
                    </sp:TransportToken>
                   <sp:AlgorithmSuite>
                       <wsp:Policy>
                           <sp:Basic256/>
                       </wsp:Policy>
                   </sp:AlgorithmSuite>
                   <sp:Layout>
                        <wsp:Policy>
                            <sp:Lax/>
                        </wsp:Policy>
                   </sp:Layout>
                   <sp:IncludeTimestamp/>
               </wsp:Policy>
           </sp:TransportBinding>
           <sp:SignedSupportingTokens>
               <wsp:Policy>
                   <sp:UsernameToken sp:IncludeToken="http://schemas.xmlsoap.org/ws/2005/07/securitypolicy/IncludeToken/AlwaysToRecipient">
               <wsp:Policy>
                   <sp:WssUsernameToken10/>
               </wsp:Policy>
           </sp:UsernameToken>
       </wsp:Policy>
       </sp:SignedSupportingTokens>
      <sp:Wss10>
         <wsp:Policy/>
     </sp:Wss10>
  </wsp:All>
</wsp:ExactlyOne> 
```

在寻找解决方案时，我一直在阅读有关 WSDL 策略的大量信息，但我仍然无法弄清楚我需要如何设置我的 nusoap 客户端以正确响应这些策略。现在我从 web 服务得到这个响应：

```
An error occurred when verifying security for the message. 
```

任何帮助或阅读材料将不胜感激！

# cassandra - 使用 Cassandra CQL/JDBC 驱动程序时设置集群名称

> ID：15409308
> 
> 赞同：2
> 
> 时间：2013-03-14T12:28:06.223
> 
> 标签：cassandra, cql

我正在使用从[谷歌代码](http://code.google.com/a/apache-extras.org/p/cassandra-jdbc/)获得的 Cassandra CQL/JDBC 驱动程序，但它似乎不允许我提供集群名称 - 有没有办法？

我使用集群名称来确保我不会对实时系统运行命令，它与我的开发系统具有不同的集群名称。

编辑：澄清一下，我有两个完全独立的 Cassandra 集群，一个用于测试，一个用于测试。它们具有不同的集群名称，以确保我不会意外地在实时集群上运行用于测试集群的测试代码。因此，我需要使用的任何客户端都必须让我设置一个集群名称。赫克托这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T13:07:15.290

您必须在两个不同的集群上镜像数据。您不能使用不同的名称访问同一个集群。

要重命名您的集群（从默认的“测试集群”），您可以编辑`location/of/cassandra/conf/cassandra.yaml`. 最重要的是，如果您需要更多详细信息，请查看 datastax[配置文档](http://www.datastax.com/docs/1.0/configuration/node_configuration#cluster-name)和说明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:21:12.053

没有用于检查 Cassandra 客户端的集群名称的内​​置保护。它旨在确保来自不同集群的节点不会尝试连接在一起，但不能确保客户端连接到正确的集群。虽然可以将此检查添加到客户端（因为集群名称已暴露给客户端），但我不知道有任何客户端这样做。

我强烈建议您在不同的环境中设置防火墙以避免这种错误。如果这不可能，您应该选择不同的端口以避免混淆。使用 cassandra.yaml 中的“rpc_port”设置更改此设置。

# ios - 从 IOS SIMULATOR 的文件系统中删除文件

> ID：15409310
> 
> 赞同：1
> 
> 时间：2013-03-14T12:28:13.797
> 
> 标签：ios, objective-c

如何从模拟器中访问应用程序时创建的应用程序库文件夹中的图像文件夹中删除图像。必须通过编码删除文件，即当应用程序开始运行时。

IOS模拟器的文件系统中存在的文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:48:22.663

保存在库文件夹中的文件存在于路径中

/Users/YourSystemName/Library/Application Support/iPhone Simulator/6.0 or 5.0 or etc/Applications

您可以从此文件夹中删除特定应用程序的文件。

但是你可以简单地**重置iphone模拟器的内容和设置**来重置。这可以通过

1.  选择ios模拟器。
2.  转到顶部菜单并选择 iphone 模拟器。
3.  选择选项重置内容和设置，然后重置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T12:33:53.220

模拟器安装应用程序在这里。

```
/Users/<system username>/Library/Application Support/iPhone Simulator/User/Applications 
```

GUID 文件和目录安装在您的模拟器上。或者您可以通过长按左键和十字来卸载应用程序。试试这个，让我知道任何查询。

# ios - Objective C removeAllObjects NSMutableArray

> ID：15409312
> 
> 赞同：-1
> 
> 时间：2013-03-14T12:28:22.017
> 
> 标签：ios, objective-c, xcode, arrays, nsmutablearray

我有一个可变数组：

```
NSMutableArray *locations = [[NSMutableArray alloc] init]; 
```

当我调用 IBAction（我猜如果用户一直按下它可能会调用 1000 次）时，它会将引脚放置在地图上，并存储在该数组中。

我在创建数组后调用了它：

```
[locations removeAllObjects] 
```

但是引脚仍然相互重叠，这是否正确清除了阵列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:35:04.860

```
- (void)removeAllAnnotations {

    NSMutableArray *annotationsToRemove = [NSMutableArray arrayWithCapacity:[self.map.annotations count]];
    for (int i = 0; i < [self.map.annotations count]; i++) {

            [annotationsToRemove addObject:[self.map.annotations objectAtIndex:i]];
    }

    [self.map removeAnnotations:annotationsToRemove];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:38:22.280

在“removeAllObjects”行下添加以下代码行

```
[mapView removeAnnotations:mapView.annotations]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:39:10.207

这不是由于阵列中的对象的清除。您必须通过调用从 mapView 中删除注释

[mapViewObjectName removeAnnotions: 位置];

然后，您在位置数组中分配的所有注释都将被删除。

谢谢你

# memory - Fortran 开发人员可以做的所有可能的内存错误是什么？

> ID：15409314
> 
> 赞同：-1
> 
> 时间：2013-03-14T12:28:27.107
> 
> 标签：memory, fortran

对于 C/C++，我对可能导致内存泄漏、内存损坏等的用例有很好的了解……但是 Fortran 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:04:08.753

我想说，指针分配绝对是在 Fortran 中创建内存泄漏的一种方式（并且可能是唯一明显的方式）：

```
program test
  implicit none

  integer :: ii
  integer, pointer :: leak(:)

  do ii = 1, 10000000
    allocate(leak(1000))
    leak(:) = 0
  end do

end program test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:59:49.197

正如其他答案所述，您可以使用指针导致内存泄漏。

有两种明显的方式会导致内存损坏。您可以写入不存在的数组元素：

```
real :: a (100)
a (101) = 3.0 
```

您还可以调用调用中的参数与实际子例程中的参数不匹配的子例程。有很多方法可以做到这一点。

内存损坏可能很糟糕，因为症状可能在错误发生很久之后才变得可见，或者因为它会导致非信息性错误（例如，“分段错误”）。使用现代 Fortran、正确编码和使用编译器提供的完整错误检查选项，我提到的两种方法将被 Fortran 编译器检测到，并提供信息性消息。运行时下标检查将检测对数组不存在元素的写入。如果您使子程序显式接口，编译器将在编译时检测调用和过程中的参数之间的不匹配。最简单的方法是将过程（子例程和函数）放入模块中并使用这些模块。

# documentation - JIRA - searchrequest.xml 的文档

> ID：15409316
> 
> 赞同：2
> 
> 时间：2013-03-14T12:28:28.160
> 
> 标签：documentation, jira

我的 BSc 论文是一个`searchrequest.xml`强烈使用的 JIRA 小工具。

我通过从不同页面收集的观察来使用此功能：

*   例如 [http://pulasthisupun.blogspot.fi/2011/03/retrieving-and-filtering-jira-issue.html](http://pulasthisupun.blogspot.fi/2011/03/retrieving-and-filtering-jira-issue.html)

以及来自其他小工具的源代码。

有没有关于这个功能的官方文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T22:15:51.400

[在https://developer.atlassian.com/display/JIRADEV/Search+Request+View+Plugin+Module](https://developer.atlassian.com/display/JIRADEV/Search+Request+View+Plugin+Module)有一些关于此的文档， 但大多数参数现在作为 JQL 语句传递

# jquery - 来自与主网格相同数据的子网格

> ID：15409318
> 
> 赞同：0
> 
> 时间：2013-03-14T12:28:35.640
> 
> 标签：jquery, jquery-plugins, jqgrid

我通过 json（来自 mysql）加载我的主网格数据。

我的网格由订单组成。每个订单包含许多项目（订单行）。

我想在加载时在一个查询中查询所有订单行。这些订单行应按订单 ID 分组。

这就是我想要的： 主网格：每个 id 只显示一行（子行中的值总计） 子网格：每个主行上都有一个“+”。当我单击它时，会出现子网格，显示每个子行

jqGrid可以做到这一点吗？还是我*必须*对子网格进行额外查询？

最好的问候奥莱

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:43:04.163

```
<script type="text/javascript">
jQuery(document).ready(function(){ 
jQuery("#list").jqGrid({
url:'example.php',
datatype: 'xml',
mtype: 'GET',
colNames:['Inv No','Date', 'Amount','Tax','Total','Notes'],
colModel :[ 
  {name:'invid', index:'invid', width:55}, 
  {name:'invdate', index:'invdate', width:90}, 
  {name:'amount', index:'amount', width:80, align:'right'}, 
  {name:'tax', index:'tax', width:80, align:'right'}, 
  {name:'total', index:'total', width:80, align:'right'}, 
  {name:'note', index:'note', width:150, sortable:false} 
],
pager: '#pager',
rowNum:10,
rowList:[10,20,30],
sortname: 'invid',
sortorder: 'desc',
viewrecords: true,
caption: 'My first grid',
subGrid: true,
subGridRowExpanded: function(subgrid_id, row_id) {
// we pass two parameters
// subgrid_id is a id of the div tag created within a table
// the row_id is the id of the row
// If we want to pass additional parameters to the url we can use
// the method getRowData(row_id) - which returns associative array in type name-value
// here we can easy construct the following
   var subgrid_table_id;
   subgrid_table_id = subgrid_id+"_t";
   jQuery("#"+subgrid_id).html("<table id='"+subgrid_table_id+"' class='scroll'></table>");
   jQuery("#"+subgrid_table_id).jqGrid({
      url:"subgrid.php?q=2&id="+row_id,
      datatype: "xml",
      colNames: ['No','Item','Qty','Unit','Total'],
      colModel: [
        {name:"num",index:"num",width:80,key:true},
        {name:"item",index:"item",width:130},
        {name:"qty",index:"qty",width:80,align:"right"},
        {name:"unit",index:"unit",width:80,align:"right"},           
        {name:"total",index:"total",width:100,align:"right",sortable:false}
      ],
      height: '100%',
      rowNum:20,
      sortname: 'num',
      sortorder: "asc"
   });
    }
  }); 
}); 
</script> 
```

参考：[http ://www.trirand.com/jqgridwiki/doku.php?id=wiki:subgrid_as_grid](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:subgrid_as_grid)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:11:38.640

如果您需要显示大约 100 个订单，特别是如果您使用带有快速 JavaScript 的 Chrome 等现代网络浏览器，您可以*在客户端*完成所有工作。服务器应该只提供按 id 排序的所有数据。您可以使用 . 一次加载所有日期`loadonce: true`。

我建议您仔细阅读基于先前答案（[这个](https://stackoverflow.com/a/14205263/315935)[和](https://stackoverflow.com/a/10178440/315935)另一个[）](https://stackoverflow.com/a/13241406/315935)的想法的答案。我认为它可以解决您的问题。

# three.js - 使用threejs的超级示例抗锯齿

> ID：15409321
> 
> 赞同：9
> 
> 时间：2013-03-14T12:28:38.580
> 
> 标签：three.js, webgl

我想以两倍于画布的分辨率渲染我的场景，然后在显示之前缩小它。我将如何使用threejs来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-06-12T16:38:46.843

对我来说，最好的方法是在不太多工作的情况下获得完美的 AA（参见下面的代码） ps：如果你增加超过 2 个，它的开始就太锐化了

`renderer = new THREE.WebGLRenderer({antialiasing:true});
renderer.setPixelRatio( window.devicePixelRatio * 1.5 );`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-05T11:21:13.293

这是我的解决方案。源评论应该解释发生了什么。设置（初始化）：

```
var renderer;
var composer;
var renderModel;
var effectCopy;

renderer = new THREE.WebGLRenderer({canvas: canvas});

// Disable autoclear, we do this manually in our animation loop.
renderer.autoClear = false;

// Double resolution (twice the size of the canvas)
var sampleRatio = 2;

// This render pass will render the big result.
renderModel = new THREE.RenderPass(scene, camera);

// Shader to copy result from renderModel to the canvas
effectCopy = new THREE.ShaderPass(THREE.CopyShader);
effectCopy.renderToScreen = true;

// The composer will compose a result for the actual drawing canvas.
composer = new THREE.EffectComposer(renderer);
composer.setSize(canvasWidth * sampleRatio, canvasHeight * sampleRatio);

// Add passes to the composer.
composer.addPass(renderModel);
composer.addPass(effectCopy); 
```

将动画循环更改为：

```
// Manually clear you canvas.
renderer.clear();

// Tell the composer to produce an image for us. It will provide our renderer with the result.
composer.render(); 
```

注意：EffectComposer、RenderPass、ShaderPass 和 CopyShader 不是默认的 three.js 文件的一部分。除了 three.js 之外，您还必须包含它们。在撰写本文时，可以在示例文件夹下的[threejs](https://github.com/mrdoob/three.js/)项目中找到它们：

```
/examples/js/postprocessing/EffectComposer.js
/examples/js/postprocessing/RenderPass.js
/examples/js/postprocessing/ShaderPass.js
/examples/js/shaders/CopyShader.js 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T14:37:42.217

以下是您可以解决的方法：在您的three.js初始化代码中，当您创建渲染器时，将其设置为主画布尺寸的两倍，并将其设置为渲染到两倍的辅助隐藏画布元素与您的主画布一样大。在辅助画布上执行必要的图像处理，然后在主画布上显示结果。

# ios - iOS 应用程序更新后无法打开

> ID：15409323
> 
> 赞同：2
> 
> 时间：2013-03-14T12:28:43.423
> 
> 标签：ios, cocoa-touch, keychain, crash-reports, sfhfkeychainutils

我们有一个应用程序在应用程序商店中运行了将近一年，并且我们收到了一些客户的差评，更新后无法打开应用程序。

用户报告他们在删除并随后重新安装应用程序后无法启动该应用程序。一位用户确实表示，他们只能在 iPhone 恢复出厂设置后才能启动该应用程序。

我们认为该问题与钥匙串有关，因为这似乎在系统中持续存在。出于这个原因，我们将用于访问钥匙串的第三方库更新为[https://github.com/soffes/sskeychain](https://github.com/soffes/sskeychain)。此更改是在版本 1.4.1 中进行的。

发布 1.4.1 后，一些用户表示他们终于能够打开该应用程序。不幸的是，由于我们无法调试问题，我们无法确定可能已解决的问题。此外，我们看到其他用户在升级到 1.4.1 和 1.4.2 时仍然遇到同样的问题。

我们也在考虑这个问题可能与我们的依赖库之一有关：

*   Flurry 分析
*   脸书 iOS SDK
*   贝宝 MPL
*   Hockeyapp ios 库
*   ASIHTTP请求
*   我们不使用 CoreData

我们无法使用标准 iOS 工具对此进行调试，我们甚至不能指望 hockey 应用程序向我们提供崩溃报告，因为该应用程序在发送之前已关闭。

我们不理解这种行为，并且在从应用商店更新时，我们显然无法控制应用。应用程序在删除时是否有任何保留？如果没有，您是否知道任何可能阻止打开重新安装的应用程序的事情？

编辑：我们在 applicationDidFinishLaunching: 应用程序委托的方法中配置 hockeyapp 库：

```
[[BITHockeyManager sharedHockeyManager] configureWithIdentifier:QUINCY_APP_IDENTIFIER delegate:self];
[[BITHockeyManager sharedHockeyManager] setDisableUpdateManager:YES];
[[[BITHockeyManager sharedHockeyManager] crashManager] setCrashManagerStatus:BITCrashManagerStatusAutoSend];
[[BITHockeyManager sharedHockeyManager] startManager];
#ifdef DEBUG
  [[BITHockeyManager sharedHockeyManager] setDebugLogEnabled:YES];
#endif 
```

应用程序标识符在构建设置中配置，并且每个配置都不同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T13:33:08.200

一般来说，启动时可能会出现多个问题：

1.  **所需的库未**正确链接：但这不可能是问题，因为那时所有应用程序启动都会崩溃！

2.  启动时间过长，应用程序被看门狗杀死。

    如果您正在运行循环中的主线程上迁移大量数据，这可能是您的问题`applicationDidFinishLaunching:`，因此应用程序对用户输入没有响应，因此将在大约 20 秒后被看门狗杀死。

    确保在不阻塞主线程的情况下进行迁移！

3.  您在启动时遇到崩溃（不是杀戮！）。由于应用程序在 HockeyApp SDK 发送崩溃之前崩溃，您将无法获得这些崩溃报告。

    HockeyApp iOS SDK 提供了一种机制来处理这些问题，请按照以下页面中的说明进行操作：http: [//support.hockeyapp.net/kb/how-tos-faq/how-to-handle-crashes-during-startup-在 iOS 上](http://support.hockeyapp.net/kb/how-tos-faq/how-to-handle-crashes-during-startup-on-ios)

所以 2\. 或 3\. 都是你的问题。如果您有机会直接联系受影响的用户，您可以索要 iOS 生成的崩溃报告。否则请检查我给出的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:44:28.933

我们曾经遇到过这个问题。该应用程序作为 Ad Hoc 构建运行良好。苹果测试并批准了它；但是，最终用户会在打开时立即崩溃。

对我们来说，事实证明我们没有正确传递我们的 HockeyApp 生产 API 密钥。

一旦我们得到固定用户就可以了。例如：

```
[[BITHockeyManager sharedHockeyManager] configureWithBetaIdentifier:@"betaKeyHere"
                                                     liveIdentifier:@"liveKeyHere"
                                                           delegate:self]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T11:48:54.707

我不敢相信，但我终于找到了应用程序崩溃的原因。

[[NSLocale currentLocale] objectForKey: NSLocaleCountryCode] 有时返回 nil。我假设这总是有效的，但显然我错了。

我在这里发现了另一个问题[NSLocaleCountryCode 返回 nil](https://stackoverflow.com/questions/15202454/nslocalecountrycode-returns-nil)。它应该是跟进这个问题的正确地点。

感谢@kerni 的建议，我能够让 hockeyapp 发送应用程序启动崩溃的报告，但不幸的是，这还不足以理解发生了什么：报告的堆栈跟踪不清楚。

经过几次尝试，我发现了另一个与乱舞有关的坏事。这是捕获系统异常并避免 hockeyapp 正确处理崩溃并生成合理的报告。这个讨论对我识别和纠正我的混乱集成代码非常有帮助：http: [//support.hockeyapp.net/discussions/questions/1359-more-information-for-crashes-with-reason-no-reason-found](http://support.hockeyapp.net/discussions/questions/1359-more-information-for-crashes-with-reason-no-reason-found)

在此更改之后，我终于能够在 hockeyapp 上看到一个不错的崩溃报告并确定我的问题：当前语言环境。

# windows-phone-8 - Windows Phone 8 中的独立存储中的图像没有被替换

> ID：15409324
> 
> 赞同：0
> 
> 时间：2013-03-14T12:28:43.910
> 
> 标签：windows-phone-8, isolatedstorage

我在隔离存储中存储了一些图像，我试图通过使用来替换它们

```
 using (IsolatedStorageFile isStore = IsolatedStorageFile.GetUserStoreForApplication()){
 if (isStore.FileExists(fileName)){
     isStore.DeleteFile(fileName);
 }
 using (IsolatedStorageFileStream targetStream = isStore.OpenFile(fileName, FileMode.Create, FileAccess.Write)){
   // Initialize the buffer for 4KB disk pages.
   byte[] readBuffer = new byte[4096];
   int bytesRead = -1;
   // Copy the thumbnail to the local folder. 
   while ((bytesRead = e.ImageStream.Read(readBuffer, 0, readBuffer.Length)) > 0){
      targetStream.Write(readBuffer, 0, bytesRead);
      targetStream.Close();
   }
} 
```

现在，当我尝试访问新文件时，我最终看到了旧照片。新照片不会立即被替换。

但是当我关闭应用程序并再次获取它时，我得到了新照片。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T08:40:00.880

我使用 ImageBrush 绘制背景网格，并且只绑定 ImageBrush 的 ImageSource。我猜这个 ImageBrush 没有得到更新，所以我没有更改 ImageBrush 的源，而是创建了一个新对象并将其分配给 Grid.Background。所以现在它可以工作了:)

# php - 将数据从php导出到excel文档

> ID：15409326
> 
> 赞同：0
> 
> 时间：2013-03-14T12:28:47.837
> 
> 标签：php, sql, excel, export-to-excel

我有许多从 SQL db 计算的变量，我想从结果中生成一个 excel 文档。我想知道指定要插入这些变量的单元格的最佳方法是什么？例如 $consumable_sum => A2，所以当我生成 excel 表单元格 A2 时应该有包含 $consumable_sum 的内容。另外什么是生成excel文档的最佳方法。我通过互联网搜索过，有很多方法。非常感谢！

# android - 操作栏 .selectTab() 和 .setSelectedNavigationItem() 不起作用

> ID：15409330
> 
> 赞同：0
> 
> 时间：2013-03-14T12:28:56.753
> 
> 标签：android, tabs, android-actionbar, spinner, android-tabs

我有一个带有多个选项卡的 ActionBar，每个选项卡都链接到一个片段。我遇到的问题是，当我使用`bar.selectTab(Tab)`or时`bar.setSelectedNavigationItem(int)`，它不起作用。Specifically, this problem occurs when the tabs get reduced down to a Spinner in the ActionBar.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T12:28:56.753

ActionBar存在一个**已知错误**，特别是上面提到的方法，特别是当 ActionBar 的选项卡被缩减为 Spinner 时。

这是我的解决方法。如果选项卡已缩减为 Spinner，它会使用反射钻入 ActionBar。在您的 Activity 类中，创建如下方法：

```
/**
 * A documented and yet to be fixed bug exists in Android whereby
 * if you attempt to set the selected tab of an action bar when the
 * bar's tabs have been collapsed into a Spinner due to screen
 * real-estate, the spinner item representing the tab may not get
 * selected. This bug fix uses reflection to drill into the ActionBar
 * and manually select the correct Spinner item 
 */
private void select_tab(ActionBar b, int pos) {
    try {
        //do the normal tab selection in case all tabs are visible
        b.setSelectedNavigationItem(pos);

        //now use reflection to select the correct Spinner if
        // the bar's tabs have been reduced to a Spinner

        View action_bar_view = findViewById(getResources().getIdentifier("action_bar", "id", "android"));
        Class<?> action_bar_class = action_bar_view.getClass();
        Field tab_scroll_view_prop = action_bar_class.getDeclaredField("mTabScrollView");
        tab_scroll_view_prop.setAccessible(true);
        //get the value of mTabScrollView in our action bar
        Object tab_scroll_view = tab_scroll_view_prop.get(action_bar_view);
        if (tab_scroll_view == null) return;
        Field spinner_prop = tab_scroll_view.getClass().getDeclaredField("mTabSpinner");
        spinner_prop.setAccessible(true);
        //get the value of mTabSpinner in our scroll view
        Object tab_spinner = spinner_prop.get(tab_scroll_view);
        if (tab_spinner == null) return;
        Method set_selection_method = tab_spinner.getClass().getSuperclass().getDeclaredMethod("setSelection", Integer.TYPE, Boolean.TYPE);
        set_selection_method.invoke(tab_spinner, pos, true);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

示例用法可能是：

```
private void delete_fragment_and_tab(String fragment_tag) {

    //remove the fragment
    FragmentTransaction ft = getFragmentManager().beginTransaction();
    ft.remove(getFragmentManager().findFragmentByTag(fragment_tag));

    //now remove the tab from the ActionBar
    //and select the previous tab
    ActionBar b = getActionBar();
    Tab tab = b.getSelectedTab();
    bar.removeTab(tab);
    select_tab(bar, bar.getNavigationItemCount() -1); 
} 
```

# php - JavaScript Countdown (count up) 毫秒太快，不会加载下一页？

> ID：15409336
> 
> 赞同：0
> 
> 时间：2013-03-14T12:29:21.203
> 
> 标签：php, javascript, performance, setinterval, countdown

`setInterval(function()`当我放下（或向上，我猜，速度明智）到`100`或`500`不会加载时， javascript太快 了，`mypage.php`因为我认为它没有时间？也不想放慢反击速度。那么有没有可以等效的php？（像这样的小数字显示，见jsfiddle）还是有更好的javascript计数器？更喜欢php，有什么想法吗？

非常感谢，任何帮助都会很棒。

将页面链接更改为`#`因为它会冻结其他内容 [http://jsfiddle.net/aEXgB/2/](http://jsfiddle.net/aEXgB/2/) 也添加`exit;`但没有帮助。

```
<html>
<head>
<script type="text/javascript">
function countdown() {
   var i = document.getElementById('counter');
   if (parseInt(i.innerHTML)>=3000) {
       location.href = 'mypage.php';
       exit;
   }
   i.innerHTML = parseInt(i.innerHTML)+1;
}
setInterval(function(){ countdown(); },.75);
</script>
</head>
<body>

<div style="margin-left:20px; float:left;"><p>Countdown:<font color="#33CC00"> <span     id="counter">10 </span></font></p></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:37:55.137

代替

```
setInterval(function(){ countdown(); },.75); 
```

和

```
var t = setInterval(function(){ countdown(); },.75); 
```

然后就在函数退出之前，添加；

```
clearInterval(t); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:35:24.470

JS：

```
var sec = 0;
var interval = 750; // milliseconds
var stop = 5; // seconds
function pad ( val ) { return val > 9 ? val : "0" + val; }
setInterval( function(){
     if(document.getElementById("seconds").innerHTML <  stop) {
        document.getElementById("seconds").innerHTML=pad(++sec%60);
     } else {
        location.href = 'http://google.nl'
     }
}, interval); 
```

html:

```
<div id="seconds></div> 
```

小提琴：http: [//jsfiddle.net/5tM3A/5/](http://jsfiddle.net/5tM3A/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:43:10.497

首先，我不明白为什么当你计数时它被称为倒计时。

其次，我认为最好更新计数器然后检查值。这样你就不需要额外调用这个`coundown`函数了。

第三，在改变位置之前清除间隔，因为间隔可能再次被触发太快。

第四，这实际上在 jsfiddle 中不起作用，因为 jsfiddle 如何使用 iframe :)

```
var interval = setInterval(function(){ countdown(); },.75);
function countdown() {
    var i = document.getElementById('counter');
    i.innerHTML = parseInt(i.innerHTML)+1;
    if (parseInt(i.innerHTML)>=3000) {
        clearInterval(interval);
        window.location.href = "mypage.php";
    }
} 
```

# ruby-on-rails - Rails 资产管道 Retina @2x 和缓存破坏者时间戳不一致

> ID：15409338
> 
> 赞同：11
> 
> 时间：2013-03-14T12:29:23.263
> 
> 标签：ruby-on-rails, asset-pipeline, retina-display, retina.js

Retina.js 查找具有相同文件名但在文件扩展名前带有 @2x 的图像

rails 资产管道在文件名的末尾添加了一个缓存破坏时间戳

这意味着retina.js 正在寻找`filename-cachebuster@2x.png`但文件位于`filename@2x-cachebuster.png`

有人可以解决这个问题吗？

谁错了，即如果原始文件名与指示它具有缓存破坏哈希的模式匹配，是否应该训练retina.js查找文件`filename@2x-cachebuster.png`，或者是否应该更改rails管道以确保@2x始终位于之前文件扩展名？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T20:51:28.013

这本身似乎有点工作，但看起来正确的方法是：

```
<%= image_tag('image', retina: true) %> 
```

这将添加retina.js 将拾取的正确data-at2x 属性

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-09T11:51:53.123

该`retina.js`文档建议使用 rails helper 方法：

```
def image_tag_with_at2x(name_at_1x, options={})
  name_at_2x = name_at_1x.gsub(%r{\.\w+$}, '@2x\0')
  image_tag(name_at_1x, options.merge("data-at2x" => asset_path(name_at_2x)))
end 
```

有关更多信息，请查看**[Retina.js 文档](https://github.com/imulus/retinajs#ruby-on-rails-3x)**。

还要确保您拥有支持该属性的最新版本的**[Retina.js 。](https://github.com/imulus/retinajs)**`data-at2x`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-24T15:24:48.857

对于除图像标签（即 CSS 背景图像，`img`在我从事过的大多数应用程序中使用的标签比标签更广泛）以外的任何东西，我已经通过编写一个像魅力一样的 LESS 帮助器来解决它。

```
.at2x(@path, @w: auto, @h: auto) {
  background-image: image-url(@path);
  @at2x_path: ~`"@{path}".replace(/(.*)\.([^.]+)$/, "$1@2x.$2")`;

  @media all and (-webkit-min-device-pixel-ratio : 1.5) {
    background-image: image-url(@at2x_path);
    background-size: @w @h;
  }
} 
```

# python - 带有 IpAddressField 的 django 模型在 syncdb 中引发错误

> ID：15409346
> 
> 赞同：1
> 
> 时间：2013-03-14T12:29:48.027
> 
> 标签：python, django, model, ip, field

我有一个`models.py`定义了以下类的文件：

```
from django.db import models
from bands.models import Genre, Song

class Lyric(models.Model):
    """A music lyric"""
    class Meta:
        db_table = 'lyric'
    genre = models.ForeignKey(Genre)
    song = models.ForeignKey(Song,unique=True)
    lyric_text = models.TextField()
    created_at = models.DateTimeField()
    def __unicode__(self):
        return "\"" + self.title + "\" by " + self.author
    def lyric_short(self, length=100):
        return self.lyric_text[:length] + "..."

class LyricComment(models.Model):
    """Comment on a lyric"""
    class Meta:
        db_table = 'lyric_comment'
    lyric = models.ForeignKey(Lyric)
    text = models.TextField()
    author = models.CharField(max_length=64)
    ip = models.IpAddressField()
    created_at = models.DateTimeField()
    def __unicode__(self):
        return "\"" + self.text[:10] + "...\" by " + self.author
    def text_short(self, length=100):
        return self.text[:length] + "..." 
```

运行时：

```
$ python manage.py syncdb 
```

抛出以下错误：

```
AttributeError: 'module' object has no attribute 'IpAddressField' 
```

有什么问题`ip = models.IpAddressField()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T12:30:19.610

它的拼写`IPAddressField`，大`P`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:34:45.070

这是拼写错误。

更改`ip = models.IpAddressField()` 为`ip = models.IPAddressField()`

# sql - 计算具有重复和缺失值的时间序列中的增量

> ID：15409350
> 
> 赞同：1
> 
> 时间：2013-03-14T12:30:06.480
> 
> 标签：sql, oracle, time-series

我有一个 Oracle 表，它由 logtime/value1、value2... 的元组以及诸如计量点 ID 之类的附加列组成。这些值是每个单调递增的不同计数器的采样值，即新值不能小于旧值。但是，多个采样的值可以保持相等，有时值可能会丢失，因此相应的表条目为 NULL，而同一 logtime 的其他值是有效的。此外，日志时间之间的间隔不是恒定的。

在下文中，为简单起见，我将只考虑 logtime 和一个计数器值。

我必须计算从每个日志时间到前一个日志时间的增量。[使用此处](https://stackoverflow.com/questions/14717393/sql-query-calculating-the-deltas-in-a-time-series)另一个问题中描述的方法为每个 NULL 值提供两个 NULL 增量，因为两个减法无效。当连续值相同时，第二个解决方案将失败，因为与前一个值的差异被计算了两次。

另一种解决方案是构造一个派生表/视图，将那些 NULL 值替换为最新的旧有效值。我的方法如下所示：

```
SELECT A.logtime, A.val,
(A.val - (SELECT MAX(C.val) 
          FROM tab C 
          WHERE logtime = 
             (SELECT MAX(B.logtime) 
              FROM tab B 
              WHERE B.logtime < A.logtime AND B.val IS NOT NULL))) AS delta
FROM tab A; 
```

我怀疑这会导致查询效率很低，尤其是在对表中的所有 N 个计数器执行此操作时，这将导致 (1 + 2*N) SELECTs。它也没有利用计数器单调递增的事实。

有没有其他方法？我认为其他人也有类似的问题。

一个明显的解决方案当然是填充那些 NULL 值以构建新表或修改现有表，但不幸的是，在这种情况下这是不可能的。在进入时避免/消除它们也是不可能的。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:48:39.687

```
select 
   logtime, 
   val, 
   last_value(val ignore nulls) over (order by logtime) 
      as not_null_val,
   last_value(val ignore nulls) over (order by logtime) - 
      last_value(val ignore nulls) over (order by logtime rows between unbounded preceding and 1 preceding) 
      as delta  
from your_tab order by logtime; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T08:15:41.043

我找到了一种使用 Oracle SQL 的内置 LAG 函数来避免嵌套 SELECT 语句的方法：

```
SELECT logtime, val,
       NVL(val-LAG(val IGNORE NULLS) OVER (ORDER BY logtime), 0) AS delta
FROM tab; 
```

似乎按我的意图工作。

*（此处重复作为单独的答案）*

# jquery - 在文件打开对话框出现之前上传显示警报

> ID：15409361
> 
> 赞同：1
> 
> 时间：2013-03-14T12:30:31.623
> 
> 标签：jquery, flash-cs5

我正在使用 jQuery 和 ASP.NET 使用[Uploadify](http://www.uploadify.com/) Flash 版本控制。一切正常。我的问题是，当用户单击选择文件按钮时，我需要在打开该对话框以选择要上传的文件之前显示警报。我正在使用 Uploadify JS v1.6.2。我也试过`OnDialogOpen`和 onOpen。但是它不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:10:47.657

我不知道uploadify，但基本上它应该像这样工作：

你的jQuery：

```
$("#fileInput").click(function() {
  alert("alert!");
}); 
```

你的文件输入：

```
<input type="file" id="fileInput" /> 
```

# django - Django：SocialApp 匹配查询不存在

> ID：15409366
> 
> 赞同：48
> 
> 时间：2013-03-14T12:30:45.903
> 
> 标签：django, django-allauth

我正在使用 django-allauth，并配置`localhost:9000/admin/` 了以下详细信息：

```
socialapp .
provider:
Name:
Client id:
App ID, or consumer key
Key:
Secret:  etc . 
```

我设置`SITE_ID = 2`（因为我将默认站点更改`example.com`为`localhost:9000`）

在 settings.py 中：

```
 INSTALLED_APPS = (
        'django.contrib.auth',
        'django.contrib.contenttypes',
        'django.contrib.sessions',
        'django.contrib.sites',
        'django.contrib.messages',
        'django.contrib.staticfiles',
        'django.contrib.admin',
        'uni_form',
        'allauth',
        'allauth.account',
        'allauth.socialaccount',
        'bootstrapform',
        # 'allauth.socialaccount.providers.twitter',
        # 'allauth.socialaccount.providers.openid',
         'allauth.socialaccount.providers.facebook',
    )
    SOCIALACCOUNT_PROVIDERS = \
        { 'facebook':
            { 'SCOPE': ['email', 'publish_stream'],
              'AUTH_PARAMS': { 'auth_type': 'reauthenticate' },
              'METHOD': 'oauth2' ,
              'LOCALE_FUNC': 'path.to.callable'} } 
```

当我去：

```
http://localhost:9000/accounts/facebook/login 
```

我得到：

```
Error :  `SocialApp matching query does not exist. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2013-03-15T09:35:23.047

使用 Django 管理员，您需要创建一个`SocialApp`列出您的 Facebook 应用程序凭据的列表。确保此应用程序附加到正确的站点（如，`django.contrib.sites.models.Site`）。

在您的情况下，需要有一个`django.contrib.sites.models.Site`id=2 的实例（检查站点管理员），该实例被列为`SocialApp`.

如果`SocialApp`缺少 ，或者如果它已创建但未附加到与您的 匹配的站点`settings.SITE_ID`，`allauth`则不知道要选择哪个应用程序，从而导致您在上面列出的错误消息。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-11-04T15:18:15.063

对我来说，当我进入时它显示了这个错误`settings.py`：

```
SITE_ID = 1 
```

当我将其更改为`2`：

```
SITE_ID = 2 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2020-03-12T09:38:28.547

就我而言，在**添加社交应用程序**页面上，我忘记将我的网站选择为`"Chosen sites"`‍♂️</p>

请参阅下面的屏幕截图*（右下角是选择的站点列表）*： [![在此处输入图像描述](../Images/3747c6866b8fc354136a0ede512f3140.png)](https://i.stack.imgur.com/fKk8P.png)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2020-10-25T13:26:45.000

**第 1 步：转到您的管理页面。** 寻找`social application`

[![在此处输入图像描述](../Images/a26892c636c14d9afd3ca4bd57d5f0e8.png)](https://i.stack.imgur.com/3ZTVZ.png)

**第 2 步：现在添加如下图所示的行。提供您的客户 ID 和由 google api 提供的密钥并`available site (example.com)`移至`chosen sites`** [![在此处输入图像描述](../Images/a1fc9b92eaeb121b90b0a1a666b9b398.png)](https://i.stack.imgur.com/cLvNI.png)

**第3步：现在进入`sites`管理页面的侧面导航并像下图一样自定义并保存**

[![在此处输入图像描述](../Images/af0970682ae0a1f6ab5b726b5bca3c9b.png)](https://i.stack.imgur.com/wfEt4.png)

**第 4 步：现在，`SITE_ID = 1`在 settings.py 文件中添加。**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-01-22T17:03:25.687

作为将其放入管理员的替代方案，您还可以将其放入您的设置中，如下所示：（至少在 2022 年版本为 django-allauth==0.45.0

```
SOCIALACCOUNT_PROVIDERS = {
    'discord': {
        # From https://developer.twitter.com
        'APP': {
            'client_id': os.environ['TWITTER_API_KEY'],
            'secret': os.environ['TWITTER_API_SECRET'],
            'key': os.environ['TWITTER_APP_ID'],
        }
    },
    'twitter': {
        # From https://developer.twitter.com
        'APP': {
            'client_id': os.environ['TWITTER_API_KEY'],
            'secret': os.environ['TWITTER_API_SECRET'],
            'key': os.environ['TWITTER_APP_ID'],
        }
    },
} 
```

# c# - 在单独的线程中懒惰地编译 .NET 正则表达式

> ID：15409374
> 
> 赞同：1
> 
> 时间：2013-03-14T12:31:04.837
> 
> 标签：c#, regex, performance, threadpool, jit

我一直在使用 C# 正则表达式，它被大量用作 Web 应用程序中自定义模板系统的一部分。表达式很复杂，我注意到使用 Regex.Compiled 选项带来的实际性能提升。然而，编译的初始成本在开发过程中是令人讨厌的，尤其是在迭代单元测试期间（[这里](http://www.codinghorror.com/blog/2005/03/to-compile-or-not-to-compile.html)提到了这个一般的权衡）。

我目前正在尝试的一种解决方案是惰性正则表达式编译。这个想法是，我可以通过在单独的线程中创建正则表达式的编译版本并在准备好时将其替换来获得两全其美的效果。

我的问题是：是否有任何理由说明这可能是一个坏主意？我之所以问，是因为我不确定跨线程分配诸如 jitting 和程序集加载之类的成本是否真的有效（尽管从我的基准测试中看来）。这是代码：

```
public class LazyCompiledRegex
{
    private volatile Regex _regex;

    public LazyCompiledRegex(string pattern, RegexOptions options)
    {
        if (options.HasFlag(RegexOptions.Compiled)) { throw new ArgumentException("Compiled should not be specified!"); }
        this._regex = new Regex(pattern, options);
        ThreadPool.QueueUserWorkItem(_ =>
        {
            var compiled = new Regex(pattern, options | RegexOptions.Compiled);
            // obviously, the count will never be null. However the point here is just to force an evaluation
            // of the compiled regex so that the cost of loading and jitting the assembly is incurred here rather
            // than on the thread doing real work
            if (Equals(null, compiled.Matches("some random string").Count)) { throw new Exception("Should never get here"); }

            Interlocked.Exchange(ref this._regex, compiled);
        });
    }

    public Regex Value { get { return this._regex; } }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T13:13:15.067

听起来您想[`Regex.CompileToAssembly`](http://msdn.microsoft.com/en-us/library/9ek5zak6.aspx)用作编译时间步骤。

# java - 使用 Javassist 生成 Invokedynamic

> ID：15409377
> 
> 赞同：4
> 
> 时间：2013-03-14T12:31:10.113
> 
> 标签：java, code-generation, javassist, invokedynamic

我想，我正在尝试做一些相对简单的事情。以 doSomething(int) 方法的以下 Java 字节码为例：

```
public java.lang.String doSomething(int i);
0 iload_1 [i]
1 invokestatic MyHelper.doSomething(int) : Java.lang.String
4 areturn 
```

这个字节码几乎只将调用转发给静态助手。

我现在要做的是使用Javassist 将invokestatic 替换为invokedynamic。我知道如何用 ASM 做到这一点，因此只是假设我出于纯粹的好奇想知道它是如何工作的。以下是我的一些问题：

1) 以下是否正确：我不能使用 javassist CtMethod.instrument() 或 CtMethod.insertAt() 方法，因为这些方法需要一个包含有效 Java 表达式的字符串，而我不能用 Java 语法编写一个 invokedynamic？

2）invokestatic 的参数就像invokevirtual 或invokestatic 的参数一样处理，对吧？我的意思是，您将参数放在invokedynamic 之前的堆栈中，就像您为invokevirtual 所做的那样？

3) 是否有使用 Javassist 创建调用动态字节码的示例代码（或者你能想出一些）？

这是我目前所知道的：你可以创建一个字节码对象，它有一个 addInvokedynamic() 方法。但这需要 BootstrapMethodsAttribute 中的 BootstrapMethod 索引。BootstrapMethod 反过来期望常量池中的方法句柄信息的索引，该索引需要方法引用等。所以本质上你必须自己管理整个常量池条目。没关系，但我担心我做错了，以后会引入奇怪的问题。有没有更简单的方法来做到这一点（一个辅助方法左右）？我的代码大致看起来像这样（我并没有真正“重写”上面的调用静态但是：

```
void transform(CtMethod ctmethod, String originalCallDescriptor) {

    MethodInfo mInfo = ctmethod.getMethodInfo();
    ConstPool pool = ctmethod.getDeclaringClass().getClassFile().getConstPool();

    /* add info about the static bootstrap method to the constant pool*/
    int mRefIdx = /*somehow create a method reference entry*/
    int mHandleIdx = constPool.addMethodHandleInfo(ConstPool.REF_invokeStatic, mRefIdx);

    /* create bootstrap methods attribute; there can only be one per class file! */
    BootstrapMethodsAttribute.BootstrapMethod[] bms = new BootstrapMethodsAttribute.BootstrapMethod[] {
        new BootstrapMethodsAttribute.BootstrapMethod(mHandleIdx, new int[] {})
    };
    BootstrapMethodsAttribute bmsAttribute = new BootstrapMethodsAttribute(constPool, bms);
    mInfo.addAttribute(bmsAttribute);

    //... and then later, finally
    Bytecode bc = new Bytecode(constPool);
    ... push parameters ...
    bc.addInvokedynamic(0 /*index in bms array*/, mInfo.getName(), originalCallDescriptor);

    //replace the original method body with the one containing invokedynamic
    mInfo.removeCodeAttribute();
    mInfo.setCodeAttribute(bc.toCodeAttribute());

} 
```

非常感谢您的帮助和时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T00:06:16.793

我必须说这是你在这里遇到的一个非常有趣的问题。如果我的回答有点长，我很抱歉，但我已尽力为您提供尽可能多（我认为是）有用的信息，以帮助您和其他遇到此问题的人。

## 问题 1

> 以下是否正确：我不能使用 javassist CtMethod.instrument() 或 CtMethod.insertAt() 方法，因为这些方法需要一个包含有效 Java 表达式的字符串，而我不能用 Java 语法编写一个 invokedynamic？

你是对的。

**CtMethod.insertAt()**只能用于 Java 代码而不是字节码操作码。 **另一方面， CtMethod.instrument()**允许您处理字节码，甚至可以使用[ExprEditor](http://www.csg.is.titech.ac.jp/~chiba/javassist/html/javassist/expr/ExprEditor.html)和[CodeConverter](http://www.csg.is.titech.ac.jp/~chiba/javassist/html/javassist/CodeConverter.html)以非常有限的方式对其进行修改。但是正如我所说，它们允许您更改的内容非常有限，并且对于您要实现的目标，这两个修饰符都无法帮助您。

## 问题2

> invokestatic 的参数的处理方式与 invokevirtual 或 invokestatic 的参数一样，对吧？我的意思是，您将参数放在invokedynamic 之前的堆栈中，就像您为invokevirtual 所做的那样？

我不知道我是否完全理解您在这里真正要问的内容（您在第一句话中重复了 invokestatic ）。我认为您要问的问题（如果我错了，请纠正我）是，如果*invokedynamic*中的参数的处理方式与它们在*invokevirtual*和*invokestatic*中的处理方式相同。使您能够简单地为*invokedynamic切换**invokevirtual*和*invokestatic*。我会假设它是在回答这个问题时......

 *首先需要注意的是，在处理堆栈时， *invokevirtual*和*invokestatic*本身是不同的。*Invokevirtual*除了将所需的参数推入堆栈之外，正如*invokestatic*所做的那样，它还推入对象引用，以便可以链接方法调用。

* * *

**边注**

您可能已经知道这一点，但我添加了这些附加信息，以防其他人遇到这个问题并且想知道为什么*invokestatic*和*invokevirtual*以不同的方式处理堆栈。

*   *invokestatic*操作码用于调用类中的静态方法，这意味着在编译时 JVM 确切地知道如何进行方法调用链接。

*   另一方面，*invokedynamic*操作码用于对象实例的方法调用。由于在编译时无法知道将方法调用链接到哪里，因此只有在 JVM 知道正确的对象引用时才能在运行时链接。

* * *

当对操作码的工作方式有疑问时，我的建议是查看[JVM 规范中有关](http://docs.oracle.com/javase/specs/jvms/se7/html/)[JVM 指令集](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html)的章节（链接适用于 JVM 7，即编写本文时的当前版本）。

我刚刚这样做是为了检查我们在这里谈论的 3 个操作码。

两个操作码[invokestatic](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.invokestatic)和[invokedynamic](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.invokedynamic)具有相同的操作数堆栈定义：

```
..., [arg1, [arg2 ...]] →

... 
```

正如我之前所说， [invokevirtual](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-6.html#jvms-6.5.invokevirtual)具有不同的操作数堆栈定义，即：

```
..., objectref, [arg1, [arg2 ...]] →

... 
```

我在这里的第一个假设（我必须警告您，我还没有深入了解*invokedynamic*操作码）是您无法像使用*invokestatic*那样简单地更改*invokevirtual*的*invokevirtual*。我这样说是因为*invokedynamic*不期望堆栈中有任何对象引用。

 **为了更好地理解这种情况，我的建议是使用[java.lang.invoke](http://docs.oracle.com/javase/7/docs/api/java/lang/invoke/package-summary.html)包在 Java 中编写一个示例，这将允许您创建使用*invokedynamic*操作码的 java 字节码。编译类后，使用命令检查生成的字节码`javap -l -c -v -p`。

## 问题 3

> 是否有使用 Javassist 创建调用动态字节码的示例代码（或者你能想出一些）？

不是我知道的。我也用谷歌搜索了一下（你可能也已经这样做了），但我什么也没找到。我认为您的帖子将给出 javassist 的第一个代码示例:)

## 还有一些笔记

> 所以本质上你必须自己管理整个常量池条目。没关系，但我担心我做的不对，以后会引入奇怪的问题

只要您使用[ConstPool](http://www.csg.is.titech.ac.jp/~chiba/javassist/html/javassist/bytecode/ConstPool.html)类来管理您的常量池，javassist 就会为您处理所有事情而不会产生问题。

此外，如果您创建了一个损坏的容器池，最常见（很可能总是）会发生的情况是，一旦您尝试加载类或调用修改后的方法，您就会遇到 ClassFormatException 错误。我会说这是它是否有效的情况之一。

我想不出这样一种场景，可以隐藏某种奇怪的错误，等待那个讨厌的时刻困扰你，而你却不那么期待（注意我说我想不到，并不真的意味着他们没有存在）。我什至敢说，只要你可以加载类并调用它的方法而不让 JVM 崩溃，你就可以了。

> 有没有更简单的方法来做到这一点（一个辅助方法左右）？

我不这么认为。Javassist 在字节码修改方面为您提供了很多帮助，但它是在您使用更高级别的 API 时（例如，编写 java 代码并注入该代码或移动/复制 CtMethods、Ctclasses 等）。当您使用必须处理所有字节码的低级 API 时，您几乎只能靠自己了。

我知道这可能不是您正在寻找的答案，但我希望我已经对这个主题有所了解。***

# javascript - jQuery Flot 不透明度取决于值

> ID：15409380
> 
> 赞同：1
> 
> 时间：2013-03-14T12:31:26.990
> 
> 标签：javascript, jquery, charts, plot, flot

一切顺利。

我需要根据它的值更改浮动条/饼图的颜色。

例如我有数据

```
data = [
    { label: "Label 1", color: "orange", data: 10}
    { label: "Label 2", color: "orange", data: 20}
    { label: "Label 3", color: "orange", data: 70}
];

$.plot(placeholder, data, options); 
```

作为最大的标签 3 应保持橙色，标签 2 和标签 1 应具有不透明度（例如，每个 -10% 将赋予 -10 不透明度）。

像这样的东西：

![在此处输入图像描述](../Images/662cf571ddd3dfd742142e481dce4fe9.png)

任何正确方向的想法或提示？

谢谢！

PS 标签值会动态变化，所以我不能只添加预定义的颜色。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T13:15:52.703

已编辑，这应该可以

```
 var data = [{ label: "Label 1", color: "rgba(255,165,0,1.0)", data: 10},
        { label: "Label 2", color: "rgba(255,165,0,1.0)", data: 20},
        { label: "Label 3", color: "rgba(255,165,0,1.0)", data: 70}]

    var maxOpacity = 0;

    data.forEach(function(a) {
        maxOpacity = Math.max(a.data, maxOpacity);
    });

    data.forEach(function(a) {
        var opacity = (((a.data * 100) / maxOpacity) / 100).toFixed(2);

        if (a.color.indexOf('rgba') == 0) {
            var b = a.color.split(',');
            b[3] = opacity;
            a.color = b.join(",") + ")";
        }
    });

    var placeholder = $("#placeholder");

    $.plot(placeholder, data, {
        series: {
            pie: { 
                show: true
            }
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:49:49.003

也许这个代码片段可以帮助你。我没有测试它，它可能不完全适合你的代码，但我认为我的主要想法是可见的:)。

```
var array = [{ label: "Label 1", color: "orange", data: 10},
    { label: "Label 2", color: "orange", data: 20},
    { label: "Label 3", color: "orange", data: 70}];

array.sort(function(a, b){
    var a1= a.data, b1= b.data;
    if(a1== b1) return 0;
    return a1 > b1? 1: -1;
});

var arrLength = array.length;
var opacitySteps = 100 / arrLength;

for (var i = 0; i < arrLength; i++) {
    element = arr[i];
    element.color = opacitySteps * i;
} 
```

# c# - 根据最新的日期时间抓取列表项

> ID：15409382
> 
> 赞同：3
> 
> 时间：2013-03-14T12:31:36.400
> 
> 标签：c#, asp.net, linq, datetime

我用这段代码抓取文章。

```
List<view_M04FrontpagesEntity> fList = new view_M04FrontpagesService().GetByCategoryId(0);

var article = new M02ArticlesService().GetById(fList.First<view_M04FrontpagesEntity>().M02ArticleId); 
```

我想获取最新的文章`article.UpdatedDate`如何用 linq 或其他方法最好地做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T12:35:23.030

使用`MaxBy`方法提供了我的[MoreLinq](https://code.google.com/p/morelinq/)

```
List<view_M04FrontpagesEntity> fList = new view_M04FrontpagesService().GetByCategoryId(0);

var newest = fList.MaxBy(article => article.UpdatedDate); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-14T12:35:58.593

您可以在 LInQ 中使用 OrderByDescending。

```
var query = myList.Where(x =>x=="somePredicate")
                  .OrderByDescending(x => x.UpdatedDate ).FirstOrDefault(); 
```

返回序列的第一个元素，如果序列不包含任何元素，则返回默认值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T12:37:47.020

```
var first = articles.OrderByDescending( a => a.UpdateDate ).First(); 
```

一般来说，就是这样。您需要自己将其转移到您的代码中，因为您发布的代码都没有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T12:38:08.800

```
var result = (from article in fList
        orderby article.UpdatedDate descending
        select article).First(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-15T08:13:51.650

这是按预期工作的。

```
var m04FrontpagesEntities = new view_M04FrontpagesService().GetByCategoryId(0).ToList().Select(x => new M02ArticlesService().GetById(x.M02ArticleId)).ToList().OrderByDescending(x => x.UpdatedDate); ;
var article = m04FrontpagesEntities.First(); 
```

# c# - 二叉树节点比例计算

> ID：15409383
> 
> 赞同：0
> 
> 时间：2013-03-14T12:31:45.480
> 
> 标签：c#, asp.net-mvc, binary-tree

我有一个二叉树格式的用户层次结构（因为一个用户最多可以添加 2 个用户）。下面是一个示例结构

![用户层次结构](../Images/d2188aff98a344ce5bc0ca322d6ba7b9.png)

**问题**

1.  每周我必须计算添加了多少用户`2:1`或`1:2`未登录用户进行付款。`2:1`ratio（以红色突出显示）表示`User A`添加`User B1`&`User B2`和`User B1`添加`User C1`。同样在`1:2`比率（以黄色突出显示）中，`User B2`具有`User D1 & D2`但仅`User D1`具有`User E1 & E2`所以它满足`1:2`比率。
2.  因此，如果添加了更多用户，那么我们显然必须在第一周跳过已经以上述比率计算的用户。在计算一周的付款时，我们必须牢记这一点。

**换句话说问题**

每周我必须向我或我的子层次结构中的成员直接或间接推荐的用户付款。付款条件是`2:1 or 1:2`每个会员可以推荐2个直属会员。

在用户表中，我将`UserId`身份和`ParentId`列作为自我引用来跟踪成员的父级。如果需要，我已准备好更改我的表结构。

# android - 保存列表视图项

> ID：15409387
> 
> 赞同：2
> 
> 时间：2013-03-14T12:31:53.153
> 
> 标签：android, listview

我正在尝试实现一个列表视图，而我真正想要的是：

应用程序启动，从 ListView 中选择**1 个项目并启动 web 视图。****这一步完成**

但我想要的是**2.**当我启动应用程序时，它将从该项目开始，不再显示列表。所以它会继续从我第一次按下的那个项目开始。我希望有人可以向我展示一个我可以遵循的教程或一些关键字，我会尝试看看我是否可以做到。

**更新 --> 代码*

```
 public class AndroidListViewActivity extends ListActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    String[] adobe_products = getResources().getStringArray(R.array.adobe_products);

    this.setListAdapter(new ArrayAdapter<String>(this, R.layout.list_item, R.id.label, adobe_products));

    ListView lv = getListView();

    SharedPreferences prefs = getSharedPreferences("PREFERENCE", MODE_PRIVATE);
    boolean firstrun = prefs.getBoolean("firstrun", true);

    if (firstrun) {
          SharedPreferences.Editor editor = prefs.edit();
          editor.putBoolean("firstrun", false);
          editor.apply();

          // listening to single list item on click
          lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

              Intent i = new Intent(getApplicationContext(), EnkeltView.class);
              // sending data to new activity
              i.putExtra("url", "https://google.dk");
              startActivity(i);

            }
          });           
        }
    // Save the state
    getSharedPreferences("PREFERENCE", MODE_PRIVATE)
        .edit()
        .putBoolean("firstrun", false)
        .commit();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:44:40.197

使用 SharedPreference 的工作方式类似于数据库，但规模较小：[SharedPreference](http://developer.android.com/guide/topics/data/data-storage.html#pref)

Android 文档：此数据将在用户会话中持续存在（即使您的应用程序被终止）。

因此，当设备重新启动或强制关闭时，不应擦除 SharedPreferences。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:36:02.700

您可以在第一次将项目存储在共享首选项中，在第二次您可以检查您的共享首选项是否不为空，然后它会启动存储在其中的项目的应用程序。

# mysql - mysql在需要首先根据case语句的结果修改的aa字段上获取平均值

> ID：15409389
> 
> 赞同：0
> 
> 时间：2013-03-14T12:31:57.463
> 
> 标签：mysql, case, average

我正在尝试使用 mySQL 在指定日期范围内获取字段“权重”的每周平均值。此处工作中的扳手是重量在某些记录中以 Kg 为单位，而在其他记录中以 lbs 为单位。表中还有一个标志 (unitsMode)，用于指定权重是公制还是英制。所以我需要根据unitsMode对权重字段进行计算——我正在使用CASE。但现在我不能做平均，或者说不知道“在哪里”做平均。我将其作为存储过程执行，当前代码如下：

```
PROCEDURE `weeklyweighttest`(IN uId INTEGER, IN rangeStart DATE, IN rangeEnd DATE)
BEGIN
select weight,unitsMode, floor(DATEDIFF(entryDate,curdate())/7) as weeks_ago, CASE unitsMode
          WHEN 1 THEN truncate((weight/2.2),2)
          WHEN 0 THEN truncate(weight,2)
         END  AS calcWeight
 FROM `mydatabasetable` WHERE userId=uId AND entryDate >= rangeStart AND entryDate <= rangeEnd
 GROUP BY floor(DATEDIFF(entryDate,curdate())/7);
END 
```

非常感谢您在这里的任何输入

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:50:53.350

尝试将`AVG`case 语句放在周围：

```
 AVG(CASE unitsMode
         WHEN 1 THEN truncate((weight/2.2),2)
         WHEN 0 THEN truncate(weight,2)
     END) AS calcWeight 
```

# grails - 在 grails 应用程序中缩小 js 和 css 的方法

> ID：15409391
> 
> 赞同：8
> 
> 时间：2013-03-14T12:32:10.000
> 
> 标签：grails, minify

我正在缩小 grails 应用程序中的 js 和 css 文件。我最初的计划是使用资源插件来缩小资源（还查看了 jawr 和 performance-ui，但这些天资源似乎是事实上的标准）。

Resources 可以很容易地使用 YUI 缩小单个 CSS 文件，但是我们有超过 40 个 JS 文件，我们想将它们连接成一个文件（并且文件也需要以正确的顺序连接）我没有看到任何暗示 Resources 支持开箱即用的东西，这些是我们迄今为止计划的方法：

1.  添加新的 grails taglib 以连接 js 和 css 文件以创建一个 js 和一个 css 文件并使用资源插件缩小。一个简单的实现将意味着每次提供页面时 yui-minify 都会运行（！！）所以我们需要以某种方式引入缓存。

2.  使用 BuildConfig 的 grails.war.resources 来缩小 js 和 css。这将解决缓存问题，因为资源只会在构建时构建和缩小，但需要我们使用 grails run-war 在本地进行测试，因此任何与缩小相关的错误都不会在开发后期被捕获循环。

这一定是一个相当普遍的问题。其他人在做什么？想听听我可以使用的任何其他方法或最佳实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:50:31.240

You can make all your resources using the same bundle, with this, you will have only one merged js. Example:

```
main {
  resource id: 'mainjs', url: 'js/main.js'
  defaultBundle: 'mybundle'
}

second {
  resource id: 'secondjs', url: 'js/second.js'
  defaultBundle: 'mybundle'
} 
```

According to the docs:

> The "bundle" mapper adds together resources of the same type to reduce the number of files your client pages request.
> 
> The "bundle" mapper looks at the value of the "bundle" property on resources and if found, will add the resource to a new synthetic aggregated resource.
> 
> This aggregated resource is itself processed through mappers, so it is subject to the other optimisations you apply to the kind of resource the bundle is aggregating.
> 
> Bundles are always in the base directory of the static resources folder - which means references to files inside the bundle must be re-adjusted so they continue to refer to the same files. This is made possible for CSS files by the csspreprocessor and cssrewriter mappers.

# xpath - 如何在一个查询中设置两个 xPath 查询？

> ID：15409394
> 
> 赞同：0
> 
> 时间：2013-03-14T12:32:15.050
> 
> 标签：xpath, xquery

这是我的全部代码：-

```
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script>
        var xml;
        $.get(
        "xml_converted.xml",
        null,
        function (data) {
            xml = data;
        },
        "xml"
    );

        function get_node(ls)
        {
         var elName = $('#select').val();
         var value = $('#value').val();

        var xPath = '//*[translate(translate(translate("' + elName + '","-","")," ",""),":","") '+ ls +' translate(translate(translate(@value,"-","")," ",""),":","")]/../../@value';

         var iterator = xml.evaluate(xPath, xml.documentElement, null,
                XPathResult.UNORDERED_NODE_ITERATOR_TYPE, null);
            var thisNode = iterator.iterateNext();
            var str = '';
            while (thisNode) {
                if (str) {
                    str += ', ';
                }
                str += thisNode.textContent;
                thisNode = iterator.iterateNext();
            }
            $("#result").text(str);
            if (str == null || str == "")
            return false;
            else
            return true;
        }
    </script>
</head>
<body>
    <input type="text" id="select">
    <input type="text" id="value">
    <input type="button" value="Less than" onclick="get_node('>')">
    <input type="button" value="Grater than" onclick="get_node('<')">
    <input type="button" value="Equal" onclick="get_node('=')">
    <div id="result">
    </div>
</body>
</html> 
```

这是我的 xml 字段示例：-

```
 <products>
      <product_id value="1">
        <tab_id value="351">
          <tab_name value="test1"/>
          <dist_region value="5,5068,5069"/>
          <reg_str_dt value="2013-01-14 20:35:00"/>
          <individual_strdt value="2013-01-14 20:35:00"/>
        </tab_id>
      </product_id>
      <product_id value="2">
        <tab_id value="352">
          <tab_name value="test2"/>
          <dist_region value="5,5069,5070"/>
          <reg_str_dt value="2013-01-14 20:35:00"/>
          <individual_strdt value="2013-01-14 20:35:00"/>
        </tab_id>
      </product_id>
   </productS> 
```

在我的 xml 文件中，我有一个选项卡`dist_region_value="5,5069,5070"`，这种类型的值用于检查我有一个 xpath：-

```
var xPath = '//*[contains(concat(@value, ","),"' + elName+ ',")]/../../@value'; 
```

另一个 xpath 查询是：-

```
var xPath = '//*[translate(translate(translate("' + elName + '","-","")," ",""),":","") '+ ls +' translate(translate(translate(@value,"-","")," ",""),":","")]/../../@value'; 
```

如何在一个查询中设置两者？

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:52:56.663

这个怎么样：

```
var xPath = '//*[contains(concat(@value, ","), "' + elNname+ ',") and ' + 
                ' translate("' + elName + '"," -:","") '+ ls + 
                ' translate(@value," -:","")]/../../@value'; 
```

如此处所示，您也不需要将多个翻译嵌套在一起。

# .net - 在没有查询功能的情况下使用微风

> ID：15409398
> 
> 赞同：1
> 
> 时间：2013-03-14T12:32:25.863
> 
> 标签：.net, breeze

我有兴趣在我的 .net mvc3 应用程序中使用微风js，但主要是为了它的更改跟踪（我不想处理查询客户端）。有没有办法做到这一点？
我注意到，为了创建一个 EntityManager，您似乎需要从控制器支持一个 Iqueryable。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-15T19:23:23.560

不需要从控制器返回 IQueryable。很简单，如果您不返回 IQueryable，您的控制器将无法处理从客户端传递的任何客户端“where”、“orderBy”、“select”等操作。（请注意， withParameters 仍然可以工作）。

所以这些都是有效的。

```
[HttpGet]
public Object Customers() {
  return  < your code >;
}

[HttpGet]
public Object Stuff() {
  return new { Customers = <your code>, Products = <your code> }
}

[HttpGet]
public List<Person> PersonsOlderThan(age) {
  return < your code >;
} 
```

您仍然需要从服务器返回元数据或在客户端上定义它。

希望这可以帮助。

# internet-explorer - 无法在 IE 上执行 webdriver 脚本

> ID：15409408
> 
> 赞同：0
> 
> 时间：2013-03-14T12:32:44.987
> 
> 标签：internet-explorer, webdriver

我想在 IE 上执行 webdriver 脚本。我为此使用以下代码：-

```
System.setProperty("webdriver.ie.driver", "E:\\drivers\\IEDriverServer.exe");  
fDriver= new InternetExplorerDriver(); 
```

这将启动浏览器并打开所需的 url，但无法识别页面上的任何元素。相同的代码在 FF 和 chrome 上运行良好。我正在使用以下代码来识别元素：-

```
login_page_ctrl = findElement(By.id("password"));  
login_page_ctrl.clear();  
login_page_ctrl.sendKeys("1234"); 
```

有没有其他方法可以在 webdriver 中识别 IE 上的元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T18:14:48.787

我在不同的场合遇到过同样的问题，看看这个 Xpath finder 我发现它很有用。

[https://code.google.com/p/fire-ie-selenium/downloads/detail?name=Fire-IEBrowser1.1.xlsm](https://code.google.com/p/fire-ie-selenium/downloads/detail?name=Fire-IEBrowser1.1.xlsm)

# jquery - 对每个类别的信封进行排序

> ID：15409410
> 
> 赞同：2
> 
> 时间：2013-03-14T12:32:46.553
> 
> 标签：jquery, ajax, django

我在将类别和信封分类在一起时遇到问题。我首先创建了类别的排序，它起作用了。然后我创建下一个信封。当我拖动其中一个信封时，数据在顶部，当我放下它时，类别 ID 是错误的。每次我在任何类别中拖放不同的信封时，类别 ID 都是相同的。我无法获得确切的类别 ID。我不知道如何在一页中实现这两个功能。我不知道如何对每个类别的信封进行分类。：/

排序代码基于此处： http: [//farhadi.ir/projects/html5sortable/](http://farhadi.ir/projects/html5sortable/)

这是我的代码： http: [//pastebin.com/UKZvz0SU](http://pastebin.com/UKZvz0SU)

视图和网址正在工作。我的问题是我无法对那里的信封进行分类。我无法为他们找到确切的类别。

页面示例图片：

![在此处输入图像描述](../Images/821cdcea6861d018ea44d5e3e2b84b29.png)

# ruby - 如何指定在 Mac OS X 上安装 RVM 的位置？

> ID：15409413
> 
> 赞同：1
> 
> 时间：2013-03-14T12:33:01.710
> 
> 标签：ruby, xcode, macos, rvm, homebrew

我在安装 Homebrew 和 XCode 命令行工具后尝试安装 RVM，测试结果很好。

我的问题是因为我使用了 OWC 内部 SSD + 内部 HD OS X (10.7) 安装，如[本视频所示](http://www.youtube.com/watch?v=Ou-heXnkPP4)。这意味着 OS X 安装在我的内部 SSD 上，而 ~/user 位于内部 HD 驱动器上。

当我尝试安装时：

```
Rubens-MacBook-Pro:~ rkostucki$ curl -L https://get.rvm.io | bash -s stable
  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100 11745  100 11745    0     0   8475      0  0:00:01  0:00:01 --:--:--  8475
mkdir: /rkostucki.rvm: Permission denied
Rubens-MacBook-Pro:~ rkostucki$ 
```

发生的情况是 RVM 试图安装到 SSD`users`而不是 HD 上，其中 Ruby、Homebrew 和我所有的其他文件都位于操作系统之外。我知道这是一个奇怪的设置。

如何明确告诉 RVM 安装在正确的位置？

我尝试删除 RVM。我尝试删除`/rkostucki.rvm`并让它重新创建。我进入我的 SSD/用户手动删除 /rkostucki.rvm

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:25:36.283

问题是 RVM（以及编译工具链）对带有空格的路径的支持非常有限，看起来指令不完整：

```
sudo mkdir /$USER.rvm
sudo chown $USER: /$USER.rvm
sudo ln -s "$HOME/.rvm/" /$USER.rvm
echo "export rvm_path=/$USER.rvm" >> "$HOME/.rvmrc" 
```

这应该可以解决问题 - 请[为 RVM 打开一张票，](https://github.com/wayneeseguin/rvm/issues)以便为每个人修复它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:35:02.797

尝试将`.rvm`文件夹复制到您想要的驱动器上，然后使用以下命令创建从那里到原始位置的软链接：

```
ln -s real_location pretend_location 
```

RVM 需要一组已知的位置，而您却在弄乱它的想法。对于像 RVM 这样的工具来说，这不是一件好事，因为它们很容易让你变得顽固。软链接可能会欺骗它足够长的时间，让您完成一些工作。

如果这不起作用，请尝试使用 rbenv。我最近一直在使用它。RVM 很强大，但我并不需要所有这些。rbenv 没有那么强大，也没有那么复杂，因此，我发现它不太可能混淆。

# ruby - 安装jekyll后，得到-bash: jekyll command not found

> ID：15409418
> 
> 赞同：3
> 
> 时间：2013-03-14T12:33:12.793
> 
> 标签：ruby, jekyll

嘿，jekyll 用户...我是使用 ruby​​/rvm 的新手，并按照说明在本地的 mac 上安装它，然后安装了 jekyll gem，但是当我尝试运行 jekyll 命令时，我得到了

```
bash: jekyll: command not found 
```

有什么建议吗？

我知道当我安装 rvm 时（或者可能是在 homebrew 安装期间），我收到了一个通知，说我两者都有`.profile`，`.bash_profile`并且它要求我添加`source ~/.profile`，`.bash_profile`这可能是问题吗？

我也尝试使用此命令进行安装`gem install --source http://rubygems.org jekyll` ，它说它已安装，但是当我在终端中尝试 jekyll 时，我一直找不到命令。

如果我需要发布更多信息以提供帮助，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T05:51:11.877

> 我知道当我安装 rvm 时（或者可能是在 homebrew 安装期间），我收到一条通知，说我同时拥有 .profile 和 .bash_profile 并且它要求我将 source ~/.profile 添加到 .bash_profile 可能是问题？

是的。按照那里所说的去做，您应该可以访问该`jekyll`命令。

```
user$ echo "source $HOME/.rvm/scripts/rvm" >> ~/.bash_profile 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T19:54:09.067

我阅读了网络上的大多数解决方案，其中大多数似乎都建议更改 $PATH。我不喜欢编辑我的路径，除非我必须这样做，所以我只是做了一个符号链接：

```
ln -s /usr/local/Cellar/ruby/2.0.0-p247/lib/ruby/gems/2.0.0/gems/jekyll-1.2.1/bin/jekyll 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-05T04:48:55.217

这是 2020 年（很快 2021 年）的更新答案。

安装 gems 后出现“找不到命令”的原因之一是因为它们安装在 bash shell 还不知道的位置。计算机查找命令的方式是查看`PATH`，这是计算机应在其中查找命令的文件夹列表，例如`jekyll`.

gem 的位置取决于您安装 Ruby 的方式，并且由于[在 Mac 上安装 Ruby 有多种方法](https://www.moncefbelyamani.com/the-definitive-guide-to-installing-ruby-gems-on-a-mac/)，如何修复“找不到命令”错误将取决于您安装 Ruby 的方式。如果您使用了 Ruby 管理器，例如 RVM、rbenv 或 chruby，那么您可能错过了安装说明中的一个步骤。他们通常会`PATH`使用脚本自动为您处理。如果你用 Homebrew 安装了 Ruby，那么你需要添加`/usr/local/lib/ruby/gems/2.7.0/bin`到你的Ruby 中`PATH`，例如：

```
echo 'export PATH="/usr/local/opt/ruby/bin:/usr/local/lib/ruby/gems/2.7.0/bin:$PATH"' >> ~/.bash_profile 
```

（如果您正在使用，请替换`.bash_profile`为。如果您不确定您使用的是哪个外壳，请阅读以下内容：https: [//www.moncefbelyamani.com/which-shell-am-i-using-how-can-i-开关/](https://www.moncefbelyamani.com/which-shell-am-i-using-how-can-i-switch/) )`.zshrc``zsh`

我坚信应该只推荐一种安装 Ruby 的方法，那就是使用 Ruby 管理器。我更喜欢[chruby](https://github.com/postmodern/chruby)，因为它最轻且最容易使用。我编写了一个脚本，它会自动为你设置一个合适的 Ruby 环境`chruby`，包括更新你`PATH`和其他所有必要的东西，以便能够立即安装和使用它们而不会出现任何错误。

您可以在这些文章中阅读有关我的脚本和其他修复“找不到命令”错误的方法的更多信息：

[https://www.moncefbelyamani.com/troubleshooting-command-not-found-in-the-terminal/](https://www.moncefbelyamani.com/troubleshooting-command-not-found-in-the-terminal/) [https://www.moncefbelyamani.com/how-to-install-jekyll-on-a-mac-the-简易方式/](https://www.moncefbelyamani.com/how-to-install-jekyll-on-a-mac-the-easy-way/) [https://www.moncefbelyamani.com/the-definitive-guide-to-installing-ruby-gems-on-a-mac/](https://www.moncefbelyamani.com/the-definitive-guide-to-installing-ruby-gems-on-a-mac/)

# mercurial - 如何为 Windows 控制台编码颜色

> ID：15409422
> 
> 赞同：3
> 
> 时间：2013-03-14T12:33:17.770
> 
> 标签：mercurial

我尝试为我的 mercurial（版本 2.4.2+20130203）日志设置模板。尝试了以下模板：

```
lg = glog --template "\033[31m({rev})  {node|short}\033[0m \x1b[35m [{branch}] \033[1;34m<{author|person}>\033[0m \033[32m({date|age})\033[0m \n\t\t{desc}\n\033[0m" 
```

它适用于`color.mode`set to `ansi`。但是标准`hg status`不显示任何颜色，而是显示混乱：

```
←[0;35;1;4m? patch.patch←[0m 
```

当我更改`color.mode` 为`win32` `hg status`运行良好时，但`hg lg`显示的树没有任何颜色（并且没有`←[0;`混乱）。

另一个奇怪的事情是，当我使用与默认相同的模板时，它在渲染颜色时呈现`ui.logtemplate`混乱。`hg lg`

还尝试将 TERM 设置为空字符串 - 没有结果。

应该如何为颜色模式指定`win32`颜色？

谢谢。

# ruby-on-rails - Heroku h10 错误未初始化常量 CarrierWave (NameError)

> ID：15409428
> 
> 赞同：0
> 
> 时间：2013-03-14T12:33:41.780
> 
> 标签：ruby-on-rails, heroku, carrierwave

当我尝试在 heroku 上使用 git 部署 Rails 应用程序时，出现 h10 错误。日志显示它在显示消息的位置退出：

```
2013-03-14T12:00:24+00:00 app[web.1]: /app/app/uploaders/image_uploader.rb:3:in `<top     (required)>': uninitialized constant CarrierWave (NameError)
2013-03-14T12:00:24+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
2013-03-14T12:00:24+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:438:in `each'
2013-03-14T12:00:24+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.6/lib/rails/engine.rb:438:in `block in eager_load!' 
```

有人可以帮我吗？我尝试了很多事情，但似乎找不到解决方案。我的 Gemfile 中有载波 gem，还有一个 image_uploader.rb，就像在 railscasts 上解释的那样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T23:05:43.633

您是否在 Gemfile 中包含了 gem 'carrierwave'？

# html - 如何限制文本宽度

> ID：15409429
> 
> 赞同：30
> 
> 时间：2013-03-14T12:33:45.177
> 
> 标签：html, css

我想限制一段文本的宽度，这样它看起来就像在每行的 ned 处都有 br 。

像这样的东西：

```
Texttttttttttttttttttttt
tttttttttttttttttttttttt
tttttttttttttttttttttttt 
```

由此：

文字tttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttt

我试图指定 div 或 p 的宽度，但它对我不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-03-14T12:36:25.813

您可以像这样应用 css：

```
div {
   word-wrap: break-word;
   width: 100px;
} 
```

通常浏览器不会断词，但`word-wrap: break-word;`也会强制它断词。

演示：http: [//jsfiddle.net/Mp7tc/](http://jsfiddle.net/Mp7tc/)

[有关自动换行的](https://developer.mozilla.org/en-US/docs/CSS/word-wrap)更多信息

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-08-31T06:52:49.477

```
 display: inline-block;
max-width: 80%;
height: 1.5em;
overflow: hidden;
text-overflow: ellipsis;
white-space: nowrap; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T12:36:44.353

您可以使用`word-wrap : break-word;`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T12:36:07.713

尝试

```
<div style="max-width:200px; word-wrap:break-word;">Texttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttttt</div> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-14T12:37:49.080

使用 CSS 属性`word-wrap: break-word;`

请参见此处的示例：http: [//jsfiddle.net/emgRF/](http://jsfiddle.net/emgRF/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T12:38:36.917

试试这个：

```
<style> 
p
{
    width:100px; 
    word-wrap:break-word;
}
</style>

<p>Loremipsumdolorsitamet,consecteturadipiscingelit.Fusce non nisl
non ante malesuada mollis quis ut ipsum. Cum sociis natoque penatibus et magnis dis 
parturient montes, nascetur ridiculus mus. Cras ut adipiscing dolor. Nunc congue, 
tellus vehicula mattis porttitor, justo nisi sollicitudin nulla, a rhoncus lectus lacus 
id turpis. Vivamus diam lacus, egestas nec bibendum eu, mattis eget risus</p> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-14T12:39:30.103

我认为您要做的是包装没有空格的长文本。

看看这个：[Hyphenator.js](https://code.google.com/p/hyphenator/)和它的[演示](http://hyphenator.googlecode.com/svn/tags/Version%204.0.0/WorkingExample.html)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-08-26T14:58:29.503

```
<style>
     p{
         width:     70%
         word-wrap: break-word;
     }
</style> 
```

这在我的情况下不起作用。添加以下样式后效果很好。

```
<style>
     p{
        width:     70%
        word-break: break-all;
     }
</style> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-07-05T10:23:32.813

```
word-break:break-all; 
```

为我完成了这项工作

从：

qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq

到：

qqqqqqqqqqqqqqqqq

qqqqqqqqqqqqqqqqq

qqqqqqqqqqqqqqqqq

qqqqqqqqqqq

```
word-wrap: ... 
```

不工作

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-23T01:20:25.877

这里的许多答案都非常好并且非常相似。我担心的是以像素为单位指定宽度，这意味着文本在高分辨率屏幕上可能看起来很皱。最好根据一行中的最大字符数来指定宽度。我还喜欢在`<div>`小型单文件 index.html 项目中指定样式。对于现实项目，当然，样式应该进入一个单独的 css 文件。

```
<div style="word-wrap: break-word; max-width: 50ch;>Your text goes here</div> 
```

# function - 如何仅包含程序集包含文件的部分

> ID：15409430
> 
> 赞同：1
> 
> 时间：2013-03-14T12:33:46.943
> 
> 标签：function, assembly, include, x86, masm

我为我的汇编程序中的通用用途创建了一个单独的包含文件。（例如字符串操作/格式化输入/等。）当我包含这些文件时，我注意到所有函数都包含在目标二进制文件中。

有没有办法只包含使用过的函数（比如在 C/C++ 库文件中使用包含文件）？

我正在使用 MASM 并针对 x86。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:46:22.833

要从目标文件中提取单独的函数，链接器需要知道每个函数的开始位置和结束位置。它不能可靠地从装配中分辨出来，所以你需要帮助它。

一种常见的方法是将每个函数放入一个单独的文件中，然后像这样组装它们；这样，链接器可以独立地包含或排除每个目标文件。这是最简单的方法，适用于大多数汇编程序，而不仅仅是 MASM，所以我建议尝试一下。

另一种方法是将每个函数放入一个单独的段中；MS 链接器可以排除未使用的段，但*前提*是它们被标记为所谓的“COMDAT”（公共数据）。不幸的是，MASM 不支持设置此属性。

已经有一些工作是将此信息添加到 OBJ 文件作为后处理步骤，但不幸的是，该工具的存档似乎从 Internet 上消失了：

[与 MASM 的功能级链接](http://wayback.archive.org/web/20040212035208/http://www.launcherasm.com/technical/comdats.html)

附加链接：

[如何用MASM实现“功能级联动”？](http://www.asmcommunity.net/board/index.php?topic=9910.0)（包括用于半自动拆分成多个文件的工具）。

[平面汇编器 - COMDAT 支持](http://board.flatassembler.net/topic.php?t=4706)

[MSDN 论坛 - Comdat](http://social.msdn.microsoft.com/Forums/en-US/vclanguage/thread/09bb0ad3-6415-4384-a9df-3e6720c38189)

[JWASM：支持 COFF COMDAT](http://sourceforge.net/projects/jwasm/forums/forum/927109/topic/4735686/)

最后一个链接提到“jwasm v2.10 中添加了对 COMDAT 的支持”。

# javascript - HTML 完全删除并忽略了我从 JSON 响应中得到的字符串中的控制字符

> ID：15409435
> 
> 赞同：0
> 
> 时间：2013-03-14T12:34:00.243
> 
> 标签：javascript, html, json

我有一个小问题。

我在 JSON 响应中得到一个字符串，其中包含控制字符（\n）。

```
"ClData":" stream TV and films online. O\u0027Dwyer is accused of being the    administrator of the site. \n\nStudent O\u0027Dwyer was arrested on 23 May and spent the night in custody, before his aunt posted bail of £3,000." 
```

现在当我使用

```
console.log(root.CatLong.ClData) 
```

我在控制台中得到格式化的文本。

但如果我使用

```
content.innerHTML = root.CatLong.ClData 
```

它显示它没有“\ n”但完全未格式化。

是我这边的错误还是 .innerHTML 无法解释控制字符。

预先感谢最大

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:46:07.750

就浏览器而言，“\n”只是空白，将被忽略。尝试将文本包含在 pre 标记中，以告诉浏览器它是预先格式化的。

```
content.innerHTML = "<pre>" + root.CatLong.ClData + "</pre>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:45:38.297

`<br>`我必须用这个删除他的答案的人指出的替换 \n

```
content.innerHTML = root.CatLong.ClData.replace((/\n/g,"<br>"); 
```

# android - 反转旋转矩阵交换俯仰和滚动

> ID：15409436
> 
> 赞同：0
> 
> 时间：2013-03-14T12:34:04.307
> 
> 标签：android, opengl-es, sensors, rotational-matrices, matrix-inverse

我从 TYPE_ROTATION_VECTOR 向量值中得到了旋转矩阵。并尝试使用它来旋转我的应用程序中的对象。工作得很好。但我真正想要的是旋转与设备运动方向相反的对象。比如说，设备绕 x 轴旋转 30 度，我需要我的对象绕 x 轴旋转 -30 度。它必须有一种效果，就好像物体停留在它不考虑设备移动的地方一样。为此，我反转（转置）了旋转矢量。现在围绕 x 和 y 轴的旋转完全不正确，看起来它们被交换了。当我围绕 x 旋转设备时，对象围绕 y 旋转，反之亦然。我的一段代码：

```
case Sensor.TYPE_ROTATION_VECTOR:

         SensorManager.getRotationMatrixFromVector( mRotationMatrix , event.values);
         Matrix.transposeM(mInvertedRotationMatrix, 0, mRotationMatrix, 0);
         Quaternion quat = new Quaternion();
         quat.fromRotationMatrix(mInvertedRotationMatrix);
          mRenderer.setQuat(quat);
        }
....

Quaternion quat = new Quaternion();
    public void setQuat(Quaternion quat)
    {
        this.quat = quat;
        mObjectGroup.setOrientation(quat);
    } 
```

mObjectGroup 是设备旋转时应该旋转的模型

...

```
public void setOrientation(Quaternion quat) {
        mOrientation.setAllFrom(quat);
    }
...

mOrientation = new Quaternion();
...
public Quaternion() {
        setIdentity();
        mTmpVec1 = new Number3D();
        mTmpVec2 = new Number3D();
        mTmpVec3 = new Number3D();
    }

public Quaternion setIdentity() {
        w = 1;
        x = 0;
        y = 0;
        z = 0;
        return this;
    }
 ...

public Number3D() {
        this.x = 0;
        this.y = 0;
        this.z = 0;
    }

    public void setAllFrom(Quaternion other) {
        this.w = other.w;
        this.x = other.x;
        this.y = other.y;
        this.z = other.z;
    } 
```

编辑：当我沿 Y 轴旋转设备时，对象围绕 Z 轴旋转，当设备沿 X 轴旋转时，对象围绕 Y 轴旋转

# asp.net - Windows Azure 上的 ASP.NET 应用程序性能问题

> ID：15409444
> 
> 赞同：5
> 
> 时间：2013-03-14T12:34:25.527
> 
> 标签：asp.net, performance, azure, hosting, load-time

我们在 Windows Azure 上部署了一个应用程序作为 Web 角色，我们使用 Pingdom 来测试页面加载时间：[http ://tools.pingdom.com/fpt/](http://tools.pingdom.com/fpt/)

Windows Azure 上的应用程序的 URL 是：http: [//www.doctorspring.com](http://www.doctorspring.com)。应用程序的加载时间通常在 7 秒左右。该数据库是 SQL Azure 数据库，并且角色和数据库位于同一区域中。

pingdom 结果示例：[http ://tools.pingdom.com/fpt/#!/CllGggrMz/http://www.doctorspring.com/](http://tools.pingdom.com/fpt/#!/CllGggrMz/http://www.doctorspring.com/)

pingdom 结果示例（使用 gzip）：[http ://tools.pingdom.com/fpt/#!/f2TUbR6OX/www.doctorspring.com](http://tools.pingdom.com/fpt/#!/f2TUbR6OX/www.doctorspring.com)

怀疑 Azure 可能是问题所在，我们尝试了 Somee 的免费托管：http: [//www.doctorspring.somee.com](http://www.doctorspring.somee.com) Somee 上的应用程序加载时间约为 3.5 秒。

pingdom 结果示例：[http ://tools.pingdom.com/fpt/#!/o3gZOjTwH/http://www.doctorspring.somee.com/](http://tools.pingdom.com/fpt/#!/o3gZOjTwH/http://www.doctorspring.somee.com/)

这对我们来说是一个巨大的性能问题。您能否帮助我们了解 Azure 的问题或提出一种方法，我们如何才能克服它？

谢谢，马尼什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:42:25.320

在这两种情况下，加载主页的速度都慢得让人无法接受——生成一个页面需要 3.5 秒，这比网站没有加载时所需的速度慢 10 倍左右。我希望网站在这种性能下即使在中等负载下也会崩溃。

在不知道网站是如何构建的情况下，很难解释一个环境比另一个环境快的原因——但我的猜测是生成页面的任何东西（某种 CMS？）都是原因。众所周知，Azure 在进行数据库查询时会有点慢——尽管通常这只会在极端条件下表现出来。

我建议调整 CMS - 尤其是缓存。我们发现 Azure 通常非常快，但是在进行数据库查找时（例如，为 CMS 检索内容），它可能是可变的；如果您的 CMS 正在执行大量数据库查询来获取主页内容，那么它会很慢。

运行 Yslow 也是值得的——在提高性能方面有一些唾手可得的成果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T16:46:11.443

您在 Azure 中运行哪些服务？网络角色、虚拟机、网站？您是否从主页连接到 Azure 数据库实例（如果是，您进行了多少不同的调用）？我从伦敦获得了大约 7.5 秒的加载时间，但老实说，即使 3 秒对于主页来说也太慢了。很难知道是什么导致页面加载时间延长，但如果您连接到数据库实例，您可以做很多事情，例如

1.  呈现页面并进行一些异步调用以假脱机附加数据。

2.  确保您的 Azure 服务运行紧密

3.  考虑将数据库内容缓存到 blob。例如，对于“过去 24 小时内回答的医疗问题”中的数据，如果您在每次加载时都从数据库中提取此数据，您可以通过定期将其缓存到存储在 blob 容器中的 html 文件并将其注入页面来显着加快访问速度.

4.  如果您必须从主页进行数据库调用，请尝试通过将查询批处理到存储过程中来尽可能少地进行往返。

我在这里做了很多假设，但是您当然可以做一些事情来大幅提高此页面的性能。

# javascript - 单击不同的缩略图时应用不同的规则（jquery）

> ID：15409447
> 
> 赞同：4
> 
> 时间：2013-03-14T12:34:42.453
> 
> 标签：javascript, jquery, css, image, gallery

我几乎是 HTML/CSS 领域的新手，自从我开始构建我的第一个网站以来，我一直面临着 jquery 挑战。我想使用缩略图创建一个 jquery 驱动的图像库。我为此遵循的教程是 Ivan Lazarevic 的（[http://workshop.rs/2010/07/create-image-gallery-in-4-lines-of-jquery/](http://workshop.rs/2010/07/create-image-gallery-in-4-lines-of-jquery/)）。我还通过这个线程使用了 Stackoverflow 的论坛：http: [//goo.gl/ILzsx](http://goo.gl/ILzsx)。

他提供的代码将显示的大图像替换为已单击的较大版本的缩略图。这似乎工作得非常顺利，但仅适用于具有相同方向的图片。以下代码出现在两个不同的文件中，从而确定了水平和垂直图像之间的差异：

```
 <div id="mainImage">
     <img id="largeImage" src="Images/Projects/UOW/UOWII_large.jpg"/>
   </div> 
```

和：

```
 <div id="mainImageVERTICAL">
     <img id="largeImageVERTICAL" src="Images/Projects/UOW/UOWI_large.jpg" />
   </div> 
```

我为*largeImage*和*largeImageVERTICAL*参数创建了不同的 CSS 规则，具体取决于图像是纵向还是横向。

```
 #largeImage { 
   position: fixed;
   height: 83%;
   width:auto;
   top: 15%;
   left: 5%;
   } 
```

和：

```
 #largeImageVERTICAL { 
   position: fixed;
   height: 83%;
   width:auto;
   top: 15%;
   left: 36.36%;
   } 
```

这两条规则只是将图像放置在屏幕的不同点。但是，我想知道的是如何修改我的代码，以便我可以创建一个包含纵向和横向图像的页面，应用属于每个图像的 CSS 规则。到目前为止，我所拥有的是我从拉扎雷维奇的方法中得到的，即：

```
 $('#thumbs img').click(function(){
   $('#largeImage').attr('src',$(this).attr('src').replace('thumb','large'));
   }); 
```

此代码只是用更大的图片替换缩略图。如前所述，我希望能够将正确的规则应用于正确的图像，并且我假设这必须通过一些 JS 编码来完成，而我对此几乎一无所知。

我会很感激一些帮助，以便我可以继续这个项目。任何想法如何使这项工作？也许是一个 JS 函数，它告诉机器根据点击的图像使用一个或另一个 CSS 规则？我真的被困在这里了...

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:02:16.567

有几种方法可以做到这一点。

使用 HTML5属性来指定应该更新`data-*`哪些元素。`<img>`所以：

```
<div id="thumbs">
    <img src="img.jpg" data-large="largeImage"/>
    <img src="anotherimg.jpg" data-large="largeImageVERTICAL"/>
</div> 
```

然后：

```
$('#thumbs img').click(function(e) {
    var imageId = $(this).attr('data-large'),
        newSrc = this.src.replace('thumb', 'large');
    $('#' + imageId).attr('src', newSrc);
}); 
```

或者，使用缩略图的尺寸来确定它是纵向还是横向：

```
$('#thumbs img').click(function(e) {
    var $this = $(this),
        height = $this.height(),
        width = $this.width(),
        newSrc = this.src.replace('thumb', 'large');
    var imageId = (height > width) ? 'largeImageVERTICAL' : 'largeImage';
    $('#' + imageId).attr('src', newSrc);
}); 
```

在任何一种情况下，您都可能需要隐藏另一个未使用的`<img>`元素，这样您就不会显示先前为另一个方向选择的图像。

实现这一目标的一种方法是：

```
var alternateImageId = (imageId === 'largeImage') ? 'largeImageVERTICAL' : 'largeImage';
$('#' + alternateImageId).hide(); 
```

将上面两行添加到上面的`click`事件处理函数中，调用`.show()`后调用`.attr('src', ...)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:06:28.107

使用类而不是 id。

```
#largeImage{ 
   top: 15%;
   width:auto;
   height: 83%;
   position: fixed;
}
.portrait{ 
   left: 36.36%;
}
.landscape{ 
   left: 5%;
} 
```

**js**

```
$('#largeImage').on('load', function () {
    var that = $(this);
    if (that.width() < that.height()) {
        that.addClass('portrait');
    } else {
        that.addClass('landscape');
    }
});
$('#thumbs').on('click', 'img', function () {
    $('#largeImage').attr('src',$(this).attr('src').replace('thumb','large'));
}); 
```

# java - 使用 XML 的 Struts2 验证不起作用？

> ID：15409448
> 
> 赞同：0
> 
> 时间：2013-03-14T12:34:42.720
> 
> 标签：java, struts2

我正在尝试使用使用 XML 的 Struts2 验证来检查客户输入的各种字段。我的`struts.xml`extends `struts-default`，我有一个非常简单的操作类`TestAction`extends `ActionSupport`，但它不起作用。

如果有人能够帮助我了解我所缺乏的东西，我将非常感激。

这是我所拥有的：

**CustomerAction-validation.xml**

```
<?xml version="1.0" encoding="UTF-8"?>

  <!DOCTYPE validators PUBLIC "-//Apache Struts//XWork Validator 1.0.2//EN" "http://struts.apache.org/dtds/xwork-validator-1.0.2.dtd">
<validators>
    <field name="customerName">
        <field-validator type="requiredstring">
            <message>Required</message>
        </field-validator>
    </field>
</validators> 
```

**struts.xml**

```
<action name="addCustomer" class="com.yell.hibu.action.CustomerAction"
            method="execute">
            <interceptor-ref name="validation"/> 
             <param name="excludeMethods">  
                    input,back,cancel,browse  
                </param>
            <interceptor-ref name="fileUpload">
                <param name="maximumSize">2097152</param>
                <param name="allowedTypes">
                    image/png,image/gif,image/jpeg,image/pjpeg
                </param>
            </interceptor-ref>
            <interceptor-ref name="defaultStack"></interceptor-ref>
            <result name="success">/success.jsp</result>
            <result name="input">/registration.jsp</result>
        </action> 
```

在这里，我只有 1 个字段的 Registration.jsp

```
<s:form action="addCustomer" id="register-form" method="post"  validate="true" theme="xhtml" enctype="multipart/form-data">
<s:actionerror/>
<s:fielderror/>
<s:textfield name="customer.customerName" label="Customer Name:" cssClass="tooltip"  title="Max 10 characters allowed." maxlength="10"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:51:20.103

您的

```
<interceptor-ref name="validation"/> 
```

是自闭的，那么

```
<param name="excludeMethods">  
        input,back,cancel,browse  
</param> 
```

永远不会被阅读。

`Validation Interceptor`应该在*之后* `Params Interceptor`运行，如[文档中的示例](http://struts.apache.org/release/2.3.x/docs/validation-interceptor.html)所示。

同样，根据文档，

> 此拦截器通常是堆栈中应用的最后一个（或倒数第二个）拦截器之一，因为它假定所有值都已在操作上设置。

然后，尝试这样做：

```
<action name="addCustomer" class="com.yell.hibu.action.CustomerAction" 
        method="execute">

    <interceptor-ref name="defaultStack"></interceptor-ref>

    <interceptor-ref name="validation"> 
        <param name="excludeMethods">  
            input,back,cancel,browse  
        </param>
    </interceptor-ref>

    <interceptor-ref name="fileUpload">
        <param name="maximumSize">2097152</param>
            <param name="allowedTypes">
                image/png,image/gif,image/jpeg,image/pjpeg
            </param>
    </interceptor-ref>

    <result name="success">/success.jsp</result>
    <result name="input">/registration.jsp</result>
</action> 
```

如果它不起作用，也发布您的 JSP 和 Action。

希望有帮助

# jquery - 从 json javascript 将 initialValues 设置为组合框

> ID：15409451
> 
> 赞同：0
> 
> 时间：2013-03-14T12:34:49.400
> 
> 标签：jquery, json, combobox

我从我`input-combobox`的问题`outocomplete`中获取数据`json`是我想在打开时显示所有数据`combobox`（当单击按钮时），我需要`initialValues`在我的函数中定义，但我不知道如何。

编码：

```
 $(document).ready(function () {
                $("#auto").combobox({
                    initialValues: {//here I don't know what to write
                    },
                    source: function (request, response) {
                        $.getJSON('http://<%=HttpContext.Current.Items["ip"].ToString()%>/JSON/Auctocomplete.aspx?city=1' + "&term=" + request.term, function (data) { response(data); });
                    }
                });
            });

$.widget("ui.combobox", {
        _create: function () {
            var _self = this
                , options = $.extend({}, this.options, {
                    minLength: 0,
                    source: function (request, response) {
                        if (!request.term.length) {
                            response(_self.options.initialValues);
                        } else {
                            if (typeof _self.options.source === "function") {
                                _self.options.source(request, response);
                            } else if (typeof _self.options.source === "string") {
                                $.ajax({
                                    url: _self.options.source,
                                    data: request,
                                    dataType: "json",
                                    success: function (data, status) {
                                        response(data);
                                    },
                                    error: function () {
                                        response([]);
                                    }
                                });
                            }
                        }
                    }
                });

            this.element.autocomplete(options);

            this.button = $("<button type='button'>&nbsp;</button>")
                .attr("tabIndex", -1)
                .attr("title", "הראה את כל הערים")
                .insertAfter(this.element)
                .button({
                    icons: {
                        primary: "ui-icon-triangle-1-s"
                    },
                    text: false
                })
                .removeClass("ui-corner-all")
                .addClass("ui-corner-right ui-button-icon")
                .click(function () {
                    if (_self.element.autocomplete("widget").is(":visible")) {
                        _self.element.autocomplete("close");
                        return;
                    }
                    _self.element.autocomplete("search", "");
                    _self.element.focus();
                });
        }
    }); 
```

# c - 未分配重新分配的指针

> ID：15409453
> 
> 赞同：5
> 
> 时间：2013-03-14T12:34:54.387
> 
> 标签：c, pointers

实际上这是一个纯 C 程序。当我用 Xcode 编译时。错误消息说“未分配重新分配的指针”

```
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
int LocateElem(int *p1,int e,int leng1);
void Display(int max, int array[]);
int GetElem(int * p, int pass);
int Union(int *p1,int *p2, int leng1, int leng2);
int ListInsert(int *p, int e, int lengA);
int* GetData(int* pArray, int Array_size);
void Show(int *p, int leng);

void InitList_Sq(int  *L);
int *p_A,*p_B;
int m,n;

int main()
{
    clock_t begin, end;
    double  cost;
    begin = clock();

    printf("How many elements of A u want:");
    scanf("%d",&m);
    if (m<0) {
        printf("Error!");
        return 0;
    }
    printf("How many elements of B u want:");
    scanf("%d",&n);
    if (n<0) {
        printf("Error!");
        return 0;
    }

    p_A=(int *)malloc(m*sizeof(int));
    p_B=(int *)malloc(n*sizeof(int));
    if (p_A==NULL) {
        printf("Error allocating memory!\n"); //print an error message
        return 0; //return with failure
    }
    if (p_B==NULL) {
        printf("Error allocating memory!\n"); //print an error message
        return 0; //return with failure
    }

    int *pLast_A, * pLast_B;
    printf("Array A is :\n");
    pLast_A=GetData(p_A, m);
    printf("\nArray B is :\n");
    pLast_B=GetData(p_B, n);

    int newLeng;
    newLeng=Union(p_A,p_B,m,n);

    printf("\nThe Union set is :\n");
    Show(p_A, newLeng);

    free(p_A);
    free(p_B);
    end = clock();
    cost = (double)(end - begin) / CLOCKS_PER_SEC;
    printf("\n%lf seconds", cost);
    return 1;

}

int* GetData(int* pArray, int Array_size){
    int* pFill= pArray;
    int count;
    srand((unsigned) time(NULL));
    for ( count=0; count< Array_size; count++) {
        *(pFill+count)=rand()%1000;
        printf("%d\t", * (pFill+count));
    }
    return pFill+count;
}

int Union(int *p1,int *p2, int leng1, int leng2){
    for (int count=0; count<leng2; count++) {
        int e=GetElem(p2, count);
        while(LocateElem(p1, e, leng1)==0){
            leng1=ListInsert(p1, e, leng1);
        }
    }
    return leng1; 
}

int GetElem(int *p, int pass){
    return  *(p+pass);
}

int LocateElem(int *p1,int e,int leng1){
    for (int count=0; count<leng1; count++)
        if (e==*(p1+count))
            return 1;
        else
            return 0;

}

int ListInsert(int *p, int e, int lengA){
    lengA+=1;
    int* temp;
    temp=(int*)realloc(p, lengA*sizeof(int));
    if (temp==NULL) {
        printf("Error allocating memory!\n"); //print an error message
        free(temp);
        return 0; //return with failure
    }
    else{
        p=temp;
        *(p+lengA-1)=e;

    }
    return lengA;

}

void Show(int *p, int leng){
    for (int count=0; count<leng; count++) {
        printf("%d\t", *(p+leng));
    }
} 
```

`temp=(int*)realloc(p, lengA*sizeof(int))`编译后，xcode 在带有信号 SIGABRT的行处给出断点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T12:37:40.220

问题在于：

```
int ListInsert(int *p, int e, int lengA){
    int* temp;
    temp=(int*)realloc(p, lengA*sizeof(int));
    ...
    else {
        p=temp; // <<<<< THIS 
```

的新值`p`不会传播回`ListInsert`的调用者。发生这种情况是因为`p`按值传递。

你需要`int *p`变成`int **p`.

# vba - 通过自定义按钮运行宏时 VBA 错误“参数数量错误或属性分配无效”

> ID：15409457
> 
> 赞同：15
> 
> 时间：2013-03-14T12:35:02.950
> 
> 标签：vba, tabs, ribbon, ms-word, word-2007

我有一个宏，我通过自定义 UI 编辑器添加的选项卡/组/按钮调用 -

```
<customUI xmlns="http://schemas.microsoft.com/office/2006/01/customui">
    <ribbon startFromScratch="false">
        <tabs>
            <tab id="tabCustomActions" label="Custom ActionsXXX" insertAfterMso="TabDeveloper">
                <group id="GroupTLA" label="TLA Actions">
                    <button id="buttonFormatTLA" label="Format as TLA" image="TLALogo" size="large" onAction="start_tla" />
                </group>
            </tab>
        </tabs>
    </ribbon>
</customUI> 
```

该按钮显示得很好，带有我的自定义徽标，但是当我单击该按钮时，我会收到以下错误 -

![VBA 错误](../Images/c5ad18b5e6772b8e728e2c18267288b4.png)

出现此错误后，VBA 没有像通常那样打开，如果我打开开发人员控制台然后尝试单击按钮，则 VBA 中的代码不会被指示为问题。

奇怪的是，如果我尝试手动运行宏，它可以正常工作，没有错误。有没有人有任何想法如何解决这个问题？

如果您想查看，这是我在[Pastebin](http://pastebin.com/H3eQ2XXQ)中的完整代码。谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-14T12:50:29.543

`start_tla`您的 VBA 代码中的回调调用签名错误。

*如果您在Custom UI Editor*中打开文件，菜单右侧有一个名为**Generate Callbacks**的按钮。如果您按下它，它将为您的 VBA 代码提供正确的回调，以匹配文件中的功能区 xml：

```
'Callback for buttonFormatTLA onAction
Sub start_tla(control As IRibbonControl)
    'Your code goes here
End Sub 
```

根据 Pastebin 链接，您的 sub 看起来像这样，没有`control As IRibbonControl`参数：

```
Public Sub start_tla() 
```

# c++ - 跨 MSVCRT 版本分配 C++ 对象

> ID：15409460
> 
> 赞同：1
> 
> 时间：2013-03-14T12:35:09.377
> 
> 标签：c++, static-linking, msvcrt

我有 VS2010，我需要构建应用程序。我也有 .dll 与 .lib 和 .h 用 VS2005 构建。该库依赖于 log4cxx.dll（我构建了 2010 并下载了 2005 二进制文件）。当我调用返回对构建对象的引用的库接口方法时，它会抛出 AV 异常。我无法使用其他版本构建我的应用程序，并且我已经尝试更改为多线程调试我的应用程序类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:47:17.570

您获得的对象很可能具有另一种内存布局。如果您跨运行时边界传递 c++ 对象，您应该确保接收对象具有相同的布局。例如，如果 VS2005 编译器已对其字段重新排序以进行优化，而 VS2010 则以其他方式完成。或者您使用的类之一（例如 std::string）在版本之间发生了变化。阅读如何从 COM 方法返回对象。

一个运行时中的对象分配和另一个运行时中的释放也存在问题......

作为一种解决方案，您可以尝试安装 VS2005，但不能保证最终结果相同

# spring - 强制 JBoss AS 7 在 Spring 项目中使用源（开发）目录中的静态文件

> ID：15409465
> 
> 赞同：1
> 
> 时间：2013-03-14T12:35:38.920
> 
> 标签：spring, jakarta-ee, jboss, static-files

我想加快开发周期：通过消除此类文件类型的**构建**和**部署阶段来***读/写代码、构建、部署、测试：*

 *****   CSS (.css)
*   JavaScript (.js)
*   图片（.png、.jpg、.gif）

因为 CSS/JS/img 是**静态**文件（不需要**构建**阶段），我希望 JBoss 可以扫描文件时间戳更改以更新静态文件缓存。

我在**web.xml**中有这样的代码：

```
<servlet>
    <servlet-name>resources</servlet-name>
    <servlet-class>org.springframework.web.servlet.ResourceServlet</servlet-class>
    <load-on-startup>0</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>resources</servlet-name>
    <url-pattern>/js/**</url-pattern>
    <url-pattern>/css/**</url-pattern>
    <url-pattern>/images/**</url-pattern>
</servlet-mapping> 
```

所以我需要把它改成能提供 CSS/JS/imgs 完整路径的东西，比如`~/devel/$proj/src/main/webapp`. 另外我认为静态内容可能由 JBoss 本身而不是 Spring 提供。

总结：如何使用 JBoss AS 7 配置 Java EE 项目以从选定的（在我的情况下为开发）目录提供静态文件，而其他文件像往常一样通过 .war 文件部署（我部署`mvn -DskipTests=true package jboss-as:deploy`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:36:40.793

花了4个小时后，我让它工作了！但不是一般情况，因为基于新 Spring 3.x 系列的解决方案。

对于一般案例解决方案，您必须实现自己的 servlet，例如著名的博客文章：[http ://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html](http://balusc.blogspot.com/2009/02/fileservlet-supporting-resume-and.html)

我不喜欢编写代码，但喜欢配置已经预构建的组件！

所以首先我将所有 URL 的请求处理程序更改为`org.springframework.web.servlet.DispatcherServlet`：

```
<servlet>
    <servlet-name>dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>dispatcher</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

在我有之前：

```
<url-pattern>*.htm</url-pattern>
<url-pattern>*.xml</url-pattern> 
```

因此`*.js`，由默认容器（JBoss）servlet 管理`*.css`的`*.png`文件和任何选项进一步无效......

接下来我使用 Spring 3.0 的特性`<mvc:resources>`( `xmlns:mvc="http://www.springframework.org/schema/mvc"`) 和`file:`资源类型：

```
<mvc:resources mapping="/css/**" location="file:/home/user/devel/proj/src/main/webapp/css/"/>
<mvc:resources mapping="/images/**" location="file:/home/user/devel/proj/src/main/webapp/images/"/>
<mvc:resources mapping="/js/**" location="file:/home/user/devel/proj/src/main/webapp/js/"/> 
```

每当我在浏览器中保存`.js`或`.css`归档和刷新网页时，我都会获得新内容！

*因此，将静态内容部署时间从 2 分钟减少到 1 秒*！！！

**更新**切换到 Tomcat 7 后，我配置上下文`/opt/apache-tomcat-7.0.40/conf/Catalina/localhost/CTXNAME.xml`：

```
<Context docBase="/home/user/devel/proj-dev/src/main/webapp"
         reloadable="true">
    <Resources className="org.apache.naming.resources.VirtualDirContext"
               extraResourcePaths="/WEB-INF/classes=/home/user/devel/proj-dev/target/classes,/WEB-INF/lib=/home/user/devel/proj-dev/target/proj/WEB-INF/lib"/>
    <Loader className="org.apache.catalina.loader.VirtualWebappLoader"
            virtualClasspath="/home/user/devel/proj-dev/target/classes;/home/user/devel/proj-dev/target/proj/WEB-INF/lib"/>
    <JarScanner scanAllDirectories="true"/>
</Context> 
```

根据：

*   [http://tomcat.apache.org/tomcat-7.0-doc/config/context.html](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html)
*   [http://tomcat.apache.org/tomcat-7.0-doc/config/resources.html](http://tomcat.apache.org/tomcat-7.0-doc/config/resources.html)
*   [http://tomcat.apache.org/tomcat-7.0-doc/config/loader.html](http://tomcat.apache.org/tomcat-7.0-doc/config/loader.html)

现在 JS/CSS/JSP 文件`F5`在浏览器中更新。为了使用新的`.class`调用`mvn compile`。引导调用`mvn package`****

# javascript - 带有图形更新的 Treeview 复选框选择无法正常工作

> ID：15409466
> 
> 赞同：1
> 
> 时间：2013-03-14T12:35:42.593
> 
> 标签：javascript, kendo-ui

在我的项目中，我有图表和树形视图，而页面加载图表更新无法正常工作意味着在树形视图中只有两个复选框在页面加载中被选中，但图表显示所有字段值。我需要在页面加载时仅在图表中显示复选框选中的字段值， （页面加载后它工作正常）。

这是小提琴：http: [//jsfiddle.net/RHh67/64/](http://jsfiddle.net/RHh67/64/)

我的图表代码：

```
$("#myChart").kendoChart({
    theme: $(document).data("kendoSkin") || "default",
    dataSource: {
        data: tmpData2,
        sort: {
            field: "date",
            dir: "asc"
        },
        schema: {
            model: {
                fields: {
                    date: {
                        type: "date"
                    }
                }
            }
        }
    },
    title: {
        text: "My Date-aware Chart"
    },
    legend: {
        position: "bottom"
    },
    seriesDefaults: {
        type: "line",
        labels: {
            visible: true
        },
        missingValues: "gap"
    },
    series: series,
    valueAxis: [{
        name: "A",
        labels: {
            format: "{0}%"
        }
    },
    {
        name: "B",
        labels: {
            format: "{0}D"
        }
    }],
    categoryAxis: {
        type: "Date",
        field: "date",
        axisCrossingValue: [0, 1000]
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T12:37:07.547

定义`redrawChart`用新系列刷新图表的 a：

```
function redrawChart() {
    var chart = $("#myChart").data("kendoChart");

    var checkedSeries = [];

    $("#treeview").find(":checked").each(function () {
        var nodeText = $(this).parent().parent().text();

        $.each(series, function (index, series) {
            if (series.field == nodeText) {
                checkedSeries.push(series);
            }
        });
    });

    chart.options.series = checkedSeries;
    chart.refresh();
} 
```

需要调用此函数：

1.  在你的树变化。
2.  设置初始可见系列后。

此外，将初始系列的选择移至 JavaScript 代码的末尾。我的意思是，首先初始化`treeview`，`chart`然后才初始化初始值。

```
tree.dataItem(".k-item:nth(2)").set("checked", true);
tree.dataItem(".k-item:nth(3)").set("checked", true);
updateChks();
redrawChart(); 
```

完整的运行版本在这里[http://jsfiddle.net/OnaBai/RHh67/68/](http://jsfiddle.net/OnaBai/RHh67/68/)

# .htaccess - 相对路径在 .htaccess rewriterule 中不起作用 - 需要在不更改 URL 的情况下重定向

> ID：15409468
> 
> 赞同：1
> 
> 时间：2013-03-14T12:35:46.370
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, relative-path

看起来这里有很多关于 RewriteRules、相对路径和在不更改 URL 的情况下重定向的问题 - 但是，在我的所有搜索中，它们似乎都没有回答我的具体情况。

这是我当前的 .htaccess 文件：

```
 RewriteEngine On

 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-l
 RewriteCond {REQUEST_FILENAME} !^images
 RewriteRule ^files(.*)$ ../../fileManager/server/php/files$1 [L] 
```

基本上这样做是，如果某人输入的 URL 在根目录之后包含单词“files”，那么它会将它们重定向到两个目录的路径，该路径实际上包含该文件。

例如，如果您访问“ [http://www.example.com/files/username/myImage.jpg](http://www.example.com/files/username/myImage.jpg) ”，它实际上会将您重定向到“ [http://s281192971.onlinehome.us/cms/fileManager/server/ php/文件/用户名/myImage.jpg](http://s281192971.onlinehome.us/cms/fileManager/server/php/files/username/myImage.jpg) “。

这样做的问题是它在本地工作得很好，但是当我将它上传到我的服务器时，它就停止工作了。

我发现的一种方法是只指定文件路径的绝对路径，如下所示：

```
 RewriteRule ^files(.*)$ http://s281192971.onlinehome.us/cms/fileManager/server/php/files$1 [L] 
```

这“有效”——但问题是，它也改变了 URL。我宁愿保留用户输入的 URL（[http://www.example.com/files/username/myImage.jpg](http://www.example.com/files/username/myImage.jpg)），而不是绝对路径。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:52:43.007

我没有尝试过，但文档声明您可以使用 URL 路径进行替换。

[http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

我的猜测是让你的规则像：

```
RewriteRule ^cms/mysite/files(.*)$ /fileManager/server/php/files$1 [L] 
```

# ruby-on-rails - 在 mongoid 中查询包含哈希的数组字段

> ID：15409469
> 
> 赞同：5
> 
> 时间：2013-03-14T12:35:49.813
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

我有一个这样的模型

```
class User
  include Mongoid::Document
  field :c, as: :categories, type: Array
end 
```

我正在像这样存储它的信息：

```
a = UserCheckin.new
a.c = [{id: rand(1000), name: 'a'}, {id: rand(1000), name: 'b'}, {id: rand(1000), name: 'c'}]
a.save 
```

我不知道我是否通过在其上存储哈希来滥用数组类型，但问题是 mongodb 并没有抱怨它。

如何查询类别名称为“a”或类别 ID 高于 2 的用户之类的内容？

提前致谢，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-15T11:39:04.357

我似乎找到了答案......对于剩下的任何人，我会在这里发布。

```
User.where(c: {'$elemMatch' => {name: 'a'}}) 
```

它将返回所有用户，其类别数组具有一个或多个名称为“a”的元素。

# json - 无法使 @JsonIdentityInfo 注释工作

> ID：15409473
> 
> 赞同：2
> 
> 时间：2013-03-14T12:35:55.867
> 
> 标签：json, rest, jakarta-ee, jackson

我在两个对象之间有双向关系。我有一个使用 Jersey 1.17 和 Jackson 2.1.4 的 RESTful Web 服务。我还在使用 @JsonIdentityInfo 注释（显然是错误的方式！）来阻止 Json 进入无限循环。但是，生成的 Json 仍然是两个对象之间的无限循环。

第一个对象是：

```
@JsonIdentityInfo(generator = ObjectIdGenerators.IntSequenceGenerator.class, property = "@id")
public class Child {

    private long value;
    private Parent parent;

    public long getValue() {
        return this.value;
    }

    public void setValue(long value) {
        this.value = value;
    }

    public Parent getParent() {
        return this.parent;
    }

    public void setParent(Parent parent) {
        this.parent = parent;
    }

} 
```

第二个对象是：

```
@JsonIdentityInfo(generator = ObjectIdGenerators.IntSequenceGenerator.class, property = "@id")
public class Parent {

    private long value;
    private Set<Child> childs = new HashSet<Child>(0);

    public long getValue() {
        return this.value;
    }

    public void setValue(long value) {
        this.value = value;
    }

    public Set<Child> getChilds() {
        return this.childs;
    }

    public void setChilds(Set<Child> childs) {
        this.childs = childs;
    }

} 
```

这是生成 Json 的方法。

```
@GET
@Path("/test")
@Produces(MediaType.APPLICATION_JSON)
public Child getChild() {

    Child child = new Child();
    Parent parent = new Parent();
    child.setValue(1L);
    parent.setValue(2L);
    child.setParent(parent);
    Set<Child> childs = new HashSet<Child>(0);
    childs.add(child);
    parent.setChilds(childs);
    return child;

} 
```

**编辑：**

生成的 Json 如下所示：

```
{"value":1,"parent":{"value":2,"childs":[{"value":1,"parent":{"value":2,"childs":[... 
```

并且这 9 行在服务器的日志文件中一遍又一遍地重复......

```
at org.codehaus.jackson.map.ser.std.AsArraySerializerBase.serialize(AsArraySerializerBase.java:86)
at org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:446)
at org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:150)
at org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:112)
at org.codehaus.jackson.map.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:446)
at org.codehaus.jackson.map.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:150)
at org.codehaus.jackson.map.ser.BeanSerializer.serialize(BeanSerializer.java:112)
at org.codehaus.jackson.map.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:72)
at org.codehaus.jackson.map.ser.std.CollectionSerializer.serializeContents(CollectionSerializer.java:23) 
```

web.xml 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
  xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
  id="WebApp_ID" version="2.5">
  <display-name>Jersey REST Service</display-name>
  <servlet>
    <servlet-name>Jersey REST Service</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
      <param-name>com.sun.jersey.config.property.packages</param-name>
      <param-value>test</param-value>      
    </init-param>
    <init-param>
        <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
        <param-value>true</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Jersey REST Service</servlet-name>
    <url-pattern>/api/*</url-pattern>
  </servlet-mapping>
 </web-app> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-18T22:07:47.673

您说您使用的是 Jackson 2.1.4，但堆栈跟踪显示 Jackson 的包以“ `org.codehaus.jackson`”开头，这是 Jackson 1.x 的基本包。Jackson 2.x 的基础包是“ `com.fasterxml.jackson`”。因此 Jersey 配置了 Jackson 1.x（很可能是 1.9.2，这是[Jersey 1.17 中的默认值](http://central.maven.org/maven2/com/sun/jersey/jersey-project/1.17/jersey-project-1.17.pom)）。我的猜测是，您正在使用从 Jackson 2.x 导入的 Annotations 对代码进行注释，但 Jersey 使用的 Jackson 库不知道这些，因此无法序列化。

您的代码在 Jackson 2.3.0 中对我很有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T13:07:10.757

对于字段之间的双向链接，您应该查看[@JsonManagedReference](http://fasterxml.github.com/jackson-annotations/javadoc/2.1.0/com/fasterxml/jackson/annotation/JsonManagedReference.html)和[@JsonBackReference](http://fasterxml.github.com/jackson-annotations/javadoc/2.1.0/com/fasterxml/jackson/annotation/JsonBackReference.html)注释。~~我认为@JsonIdentifyInfo 根本无法达到这种行为。~~

```
public class Parent {

private long value;
@JsonManagedReference private Set<Child> childs = new HashSet<Child>(0);

public long getValue() {
    return this.value;
}

public void setValue(long value) {
    this.value = value;
}

public Set<Child> getChilds() {
    return this.childs;
}

public void setChilds(Set<Child> childs) {
    this.childs = childs;
}

} 
```

…</p>

```
public class Child {

private long value;
@JsonBackReference private Parent parent;

public long getValue() {
    return this.value;
}

public void setValue(long value) {
    this.value = value;
}

public Parent getParent() {
    return this.parent;
}

public void setParent(Parent parent) {
    this.parent = parent;
}

} 
```

[您可以在此处](http://wiki.fasterxml.com/JacksonFeatureBiDirReferences)找到更多示例。

# android - 在 NDK 中在 C++ 和 Java 之间传递类

> ID：15409474
> 
> 赞同：0
> 
> 时间：2013-03-14T12:35:56.233
> 
> 标签：android, android-ndk, java-native-interface

我有一个类，我想在 C++ 和一个 Android 项目之间传递。

班上：

```
public class SomeData {
    public SomeData ( byte[] data )
    {
        m_data = data;
    }

    public byte[] getData ()
    {
        return m_data;
    }

    public byte[] m_data;
... some other fields ...

} 
```

我想将它传递给 C++ 函数（当然使用 JNI 接口），然后能够检索它。

即 - 类似的东西

```
public static native SomeData  getData(); 
```

C++ 应该能够在哪里创建该类并将其传回。

如何才能做到这一点？

非常感谢

# sql - 在同一个表中使用外部连接进行 Sql 选择

> ID：15409475
> 
> 赞同：1
> 
> 时间：2013-03-14T12:35:56.523
> 
> 标签：sql, derby

任何人都可以帮助查询以选择仅输入特定科目而不输入其他科目的学生。假设我只在“Eng.Maths”中说。

```
STUDENT SUBJECT     MARK
Vels    Eng.Maths   60
Vels    Data.Mining 65
Stivel  Eng.Maths   55
Stivel  Data.Mining 69
Raj     Eng.Maths   66 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T12:38:12.060

```
SELECT * FROM Table1 t1
WHERE subject = 'Eng.Maths'
AND NOT EXISTS (SELECT NULL FROM Table1 t2
                WHERE t1.Student = t2.Student
                AND t2.Subject <> t1.subject) 
```

[SqlFiddle](http://sqlfiddle.com/#!2/d3e04d/2)

# windows - 需要将偶数和奇数文件移动到单独的文件夹

> ID：15409478
> 
> 赞同：-1
> 
> 时间：2013-03-14T12:36:01.633
> 
> 标签：windows, for-loop, batch-file, cmd

我有一个文件夹，其中包含来自两个高速相机测量系统的大约 2000 张图片 (.tif)。一半的图片来自一个文件名*编号为*_0.tif 的相机，其他图片来自另一个相机*编号为*_1.tif 的照片。这些数字是有序的，并且总是有相同数字的 _0 和 _1 副本（使用左右相机在同一时刻拍摄的照片）。文件夹中还有一些其他文件。我想制作一个批处理文件，它将创建左右两个文件夹，并将 _0 和 _1 文件分开。文件夹中的其余文件必须保留在原始文件夹中。我没有太多时间学习命令提示符语法和代码；我尝试了使用 xcopy 构建，然后除了 *_1.tif，但这没有用。我在 Windows 7 操作系统上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:38:33.633

如果您不想使用比命令提示符批处理脚本更“强大”的语言的 PowerShell 或脚本：

1.  查找所有以 _0 或 _1 结尾的文件并将它们复制到另一个目录
2.  循环遍历第二个目录中的所有文件并每隔一秒移动到第三个目录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:33:21.557

```
move *_1.tif "oddfolder"
move *_0.tif "evenfolder" 
```

# jsf - 在 JSF 中创建自定义严重性消息

> ID：15409487
> 
> 赞同：7
> 
> 时间：2013-03-14T12:36:26.223
> 
> 标签：jsf, primefaces

我正在使用 JSF 消息将**错误/警告/信息**消息显示到我的 Web 应用程序中。我也[`<p:messages>`](http://www.primefaces.org/showcase/ui/messages.jsf)用不同的样式在浏览器中渲染它们。

尽管如此，我需要为我的一些消息创建一种新样式，使其余消息保持原样。换句话说，我需要为我的 JSF 消息创建一个**ok**严重性，它将在绿色框中显示信息，并带有勾号。

尽管我一直在研究库类，但这似乎不是实现这一目标的直接方式。严重性作为枚举存储在`FacesMessages$Severity`类中，并具有私有构造函数。我必须直接覆盖源代码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T13:00:49.130

如果不破解 JSF API/impl，这是不可能的，不。

只需重复使用`INFO`严重性，或滥用您显然未使用的严重性：`FATAL`. 或者，如果功能需求纯粹是展示性的，则可以添加一些 JS/jQuery/CSS 来实现它。

一个激进的替代方案是使用自定义消息包装器和自定义消息组件重新发明 JSF 消息系统。

# windows - 带有 JRE 检查的 Java 应用程序的 Windows exe 启动器

> ID：15409490
> 
> 赞同：3
> 
> 时间：2013-03-14T12:36:38.550
> 
> 标签：windows, exe, java, launcher

我需要分发 Java 应用程序，并且我希望安装程序在所有情况下都可以安装它。

我需要创建一个`*.exe`启动器来检查已安装的 JRE 和

1.  如果未安装所需的 JRE，则显示一个带有正确链接的窗口。
2.  如果安装了所需的 JRE，请启动正确的可执行 jar 文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T12:56:30.863

我对 WinRun4J 很满意：[http ://winrun4j.sourceforge.net/](http://winrun4j.sourceforge.net/)

它正在积极开发中，我建议的一些改进很快得到实施。

当前唯一缺少的（从我的角度来看）是指定 JRE 的“相对”路径以允许将 JRE 与应用程序捆绑在一起。

为了节省您阅读手册的精力，这就是我为我的启动器所做的：

重命名`WinRun4j.exe`为`MyApp.exe`，然后：

```
rcedit /C MyApp.exe
rcedit /I MyApp.exe myapp.ico
rcedit /N MyApp.exe MyApp.ini 
```

放入一个不错的小批处理文件中，无需执行“手动”操作。

您只需执行**一次**（如果您的库路径发生更改）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T12:40:56.420

例如，您可以使用 JSmooth：http: [//jsmooth.sourceforge.net/](http://jsmooth.sourceforge.net/)

# c# - 传递方法并调用内部函数

> ID：15409496
> 
> 赞同：4
> 
> 时间：2013-03-14T12:36:53.563
> 
> 标签：c#, reflection

我有对象`var channel = new Chanel();` 这个对象有几个我在函数内部调用的方法，如下所示：

```
private bool GetMethodExecution()
{
   var channel = new Channel();
   channel.method1();
   channel.method2();
} 
```

类的所有方法都`Channel`派生自接口`IChannel`。我的问题是我如何调用方法`GetMethodExecution()`并传递我想要执行的*方法，然后根据传递的参数在这个函数中执行它。*

我需要的是调用 GetMethodExectution(IChannle.method1) 然后在这个函数内的对象上调用它。这可能吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T12:39:19.880

```
private bool GetMethodExecution(Func<Channel, bool> channelExecutor)
{
   var channel = new Channel();
   return channelExecutor(channel);
} 
```

现在您可以通过 lambda 传递方法，例如：

```
GetMethodExecution(ch => ch.method1());

GetMethodExecution(ch => ch.method2()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:40:34.887

你在寻找这样的东西吗？

```
private bool GetMethodExecution(int method)
{
   switch (method)
   {
       case 1: return new Channel().method1();
       case 2: return new Channel().method2();
       default: throw new ArgumentOutOfRangeException("method");
   }
} 
```

```
GetMethodExecution(1);
GetMethodExecution(2); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T12:52:32.867

您可以使用`Func` *Delegate*执行以下操作：

```
private bool GetMethodExecution(Func<bool> Method)
{
    return Method()
}

public bool YourCallingMethod()
{
    var channel = new Channel();         
    return GetMethodExecution(channel.method1); // Or return GetMethodExecution(channel.method2);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T13:45:36.000

如果要将**方法名称**作为参数传递并在代码块中调用它，可以使用反射，如下所示：

```
private bool GetMethodExecution(string methodName)
{
   var channel = new Channel();

   Type type = typeof(Channel);
   MethodInfo info = type.GetMethod(methodName);

   return (bool)info.Invoke(channel, null); // # Assuming the methods you call return bool
} 
```

# c# - 执行按钮单击时使 wpf UI 响应

> ID：15409501
> 
> 赞同：6
> 
> 时间：2013-03-14T12:37:08.553
> 
> 标签：c#, wpf, multithreading, background-process

在我的 wpf (c#) 应用程序中，当用户按下按钮时会执行一个漫长的过程。当按下按钮直到执行完完整代码时，窗口冻结，用户无法在窗口中执行任何其他任务。如何将按钮单击代码作为后台进程，以便窗口响应用户。我尝试了以下方法，但没有成功。

```
private void btn_convert_Click(object sender, RoutedEventArgs e)
{
    Dispatcher.CurrentDispatcher.BeginInvoke(DispatcherPriority.Background, 
    new Action(() => { 

         WorkerMethod();
    }));
} 
```

其中 WorkerMethod 是包含整个代码的函数。任何建议。

问候，
桑吉萨

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T12:53:24.997

如果你的目标是 .NET 4.5，你可以使用`async/await`来让你的 UI 响应：

```
private async void btn_convert_Click(object sender, RoutedEventArgs e)
{
    await WorkerMethod();
} 
```

修改你的`WorkerMethod`：

```
private Task WorkerMethod()
{
    return Task.Run(() =>
        {
           // your long running task here
        });
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-14T12:40:46.173

您在这里实际上所做的是要求 UI 线程通过 Dispatcher 运行您的繁重任务。

您应该创建一个新线程/任务并让它运行您的后台方法：

```
Thread t = new Thread(() => WorkerMethod());
t.Start(); 
```

欲了解更多信息，请阅读：

[WPF BackgroundWorker 与 Dispatcher](https://stackoverflow.com/questions/3762576/wpf-backgroundworker-vs-dispatcher)

[了解 WPF 中的“调度程序”](http://weblogs.asp.net/pawanmishra/archive/2010/06/06/understanding-dispatcher-in-wpf.aspx)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-14T12:43:04.817

此处答案的替代方案是 BackgroundWorker。它还有一个额外的好处，就是在完成后将您返回到 GUI 线程。

```
private void btn_convert_Click(object sender, RoutedEventArgs e)
{
    BackgroundWorker worker = new BackgroundWorker();
    worker.DoWork += WorkerMethod;
    worker.RunWorkerCompleted += WorkerEnded;
    worker.RunWorkerAsync();
}

private void WorkerMethod()
{
    // New thread, cannot access GUI
}

private void WorkerEnded()
{
    // Back on the GUI Thread
    // Worker is finished
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T12:40:28.630

您正在调用 上的方法`UI-Dispatcher`，这将使 UI 冻结。使用在您的点击事件中创建一个新线程

```
private void btn_convert_Click(object sender, RoutedEventArgs e)
    {
         Thread t = new Thread(new ThreadStart(WorkerMethod));
         //assign STA or MTA, etc....
         t.Start();
    } 
```

[在此处](http://msdn.microsoft.com/en-us/library/xx3ezzs2.aspx)查找有关“System.Threading.Thread”的信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-06T13:40:21.727

我想象了另一种我非常自豪的方式：如果多线程仅允许 IHM 为进度条设置动画，如果用户不应该与确保进程的 ihm 交互，或者只是没有时间开发p多线程，你不能让你的应用程序在没有反馈的情况下冻结：

您可以开发一个加载器，该加载器启动到另一个 STA 线程，该线程创建另一个窗口并在冻结窗口的中间显示此加载器。

这是我撰写的一篇文章和此类解决方案的实现的帖子：

[http://charly-studio.com/blog/a-loader-for-wpf-long-ui-process/](http://charly-studio.com/blog/a-loader-for-wpf-long-ui-process/)

这是我使用组件的方式：

```
private void MainWindow_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    // Long UI process context
    using (new LongUIProcessContext("Wait while loading..."))
    {
        Thread.Sleep(2000);

        // Sub long ui process context
        using (new LongUIProcessContext("Wait while loading 2..."))
        {
            Thread.Sleep(2000);
        } 

        // Another sub long ui process context
        using (new LongUIProcessContext("Wait while loading 3..."))
        {
            Thread.Sleep(2000);
        }
    }
} 
```

这是我建议的替补席的样子： ![长UI工艺台](../Images/757af5b88d2d62b5b8ba4c8839175013.png)

这是我制作的工作台的直接链接，您可以在其中找到组件：

[bench 解决方案直接下载](http://charly-studio.com/blog/wp-content/uploads/2013/09/WpfLongUIProcess_130906.zip)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-14T12:45:18.180

尝试使用 Backgroundworker 类。您必须注册到 DoWork 事件并创建一个事件处理程序，将所有处理代码放入其中。您使用 RunWorkerAsync 方法启动工作程序。还有一种方法可以报告您的工人进度“ReportProgress”。RunWorkerCompleted 将在您的工作人员处理完您的代码时向您显示。在BackgroundWorker之后尝试在互联网上搜索，您会发现很多如何使用它的示例

# objective-c - 如何在鼠标悬停时突出显示 IKImageBrowserView 的单元格？

> ID：15409502
> 
> 赞同：5
> 
> 时间：2013-03-14T12:37:13.730
> 
> 标签：objective-c, macos, cocoa

当鼠标悬停在`IKImageBrowserView`.

具体来说，我想稍微调整一下单元格的大小，使其在鼠标悬停时显得稍大一些。或者，突出显示背景/边框就可以了。

不幸的是，`IKImageBrowserCell`不是 的子类`NSCell`，而是`NSObject`，我在 API 中找不到解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T17:13:01.897

您可以尝试继承 IKImageBrowserView 并将 NSTrackingArea 添加[到](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSTrackingArea_class/Reference/Reference.html)可见矩形。然后，您可以[实现 -mouseMoved: 与跟踪区域](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/EventOverview/TrackingAreaObjects/TrackingAreaObjects.html#//apple_ref/doc/uid/10000060i-CH8-SW8)一起使用 -indexOfItemAtPoint: 定位正确的图像单元格，然后使用[-itemFrameAtIndex](https://developer.apple.com/library/mac/documentation/graphicsimaging/Reference/IKImageBrowserView/IKImageBrowserView_Reference.html#//apple_ref/doc/uid/TP40004708-CH3-SW41) [:](https://developer.apple.com/library/mac/documentation/graphicsimaging/Reference/IKImageBrowserView/IKImageBrowserView_Reference.html#//apple_ref/doc/uid/TP40004708-CH3-SW40)获取其帧。

与其尝试使用 IKImageBrowserView 的黑盒图层和绘图，不如在新发现的框架上方添加自己的图层（或无边框窗口）并使用标准动画来增长/缩小/动画/发光/摇晃/无论这个“作弊” “ 细胞。让点击“通过”（并隐藏您的“作弊”单元格），以便正常的拖放机制工作相同。IKImageBrowserView 有它自己的 -setForegroundLayer: 方法，它允许你添加一个“覆盖层”——我想非常适合这个目的。

如果它是我自己的，那将是我第一次尝试解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-17T00:59:04.137

虽然这已经得到回答（虽然没有代码），但我也遇到了同样的要求，我通过继承 IKImageBrowserView 来实现它。下面是我的代码，我希望它会对某人有所帮助。要使用它，只需将 xib/nib/storyboard 中的图像浏览器视图类设置为 CustomIKImageBrowserView 并将以下类添加到项目中。

```
 #import <Quartz/Quartz.h>
    #import "CustomizableNSView.h"
    @interface CustomIKImageBrowserView : IKImageBrowserView
    {
        NSTrackingArea *trackingArea;
        NSInteger lastHoverIndex;
        CustomizableNSView *hoverView ;
    }
    @end 
```

实现类是：

```
#import "CustomIKImageBrowserView.h"

    @implementation CustomIKImageBrowserView

- (void)awakeFromNib {
    [self addCustomTrackingAreaToChangeMouseCursor];
}

- (void) updateTrackingAreas {
    if (trackingArea)
        [self removeTrackingArea:trackingArea];
    [self addCustomTrackingAreaToChangeMouseCursor];
}

- (void) addCustomTrackingAreaToChangeMouseCursor{
    trackingArea = [[NSTrackingArea alloc]  initWithRect:self.bounds options:NSTrackingMouseEnteredAndExited | NSTrackingActiveAlways | NSTrackingMouseMoved owner:self userInfo:nil];
    [self addTrackingArea:trackingArea];
}

- (void) mouseMoved:(NSEvent *)theEvent{
    NSPoint currentPosition = [self convertPoint:[theEvent locationInWindow] fromView:nil];

    NSInteger idx  = [self indexOfItemAtPoint:currentPosition];
    if(idx != NSNotFound) {
        [[NSCursor pointingHandCursor] push];
        //NSLog(@"DslrIKImageBrowserView = %ld and %ld",idx,lastHoverIndex);
        if (lastHoverIndex == idx) {
            return;
        } else {
            if(hoverView)
                [hoverView removeFromSuperview];
        }

        lastHoverIndex = idx;
        IKImageBrowserCell *cell = [self cellForItemAtIndex:idx];
        NSRect r = cell.imageFrame;
        r.size.width = r.size.width + 6;
        r.size.height = r.size.height + 6;
        r.origin.x = r.origin.x - 3;
        r.origin.y = r.origin.y - 3 ;

        hoverView = [[CustomizableNSView alloc] initWithFrame:r];
        hoverView.borderColor   = [NSColor colorWithCalibratedRed:136/255.0 green:185/255.0 blue:236/255.0 alpha:1.0];
        hoverView.borderRadious = 0;
        hoverView.borderWidth   = 6;
        hoverView.backgroundColor = [NSColor colorWithCalibratedRed:0 green:191.0/255.0 blue:1.0 alpha:0.3];
        [self.superview addSubview:hoverView];

    } else
    {
        lastHoverIndex = -1;
        [[NSCursor arrowCursor] push];
        if(hoverView)
            [hoverView removeFromSuperview];
    }
}

- (void)mouseEntered:(NSEvent *)theEvent{
    [[NSCursor pointingHandCursor] push];
}

- (void) mouseExited:(NSEvent *)theEvent{
    //[[NSCursor arrowCursor] push];
    lastHoverIndex = -1;
    if(hoverView) [hoverView removeFromSuperview];
} @end 
```

而 CustomizableNSView 是：

```
#import <Cocoa/Cocoa.h>

@interface CustomizableNSView : NSView
{

}
@property (nonatomic) NSRect boundsToCustomize;
@property (nonatomic) CGFloat borderWidth;
@property (nonatomic) CGFloat borderRadious;
@property (nonatomic) NSColor *borderColor;
@property (nonatomic) NSColor *backgroundColor;

@end
=================
#import "CustomizableNSView.h"

@implementation CustomizableNSView

- (void)drawRect:(NSRect)dirtyRect {

    [super drawRect:dirtyRect];
    NSRect r = self.bounds;

    if(!NSIsEmptyRect(self.boundsToCustomize))
        r = self.boundsToCustomize;
    if(self.borderColor){
        NSBezierPath * bgPath = [NSBezierPath bezierPathWithRoundedRect: r xRadius: self.borderRadious yRadius: self.borderRadious];
        bgPath.lineWidth = self.borderWidth;
        NSAffineTransform * t = [NSAffineTransform transform];
        [t translateXBy: 0.5 yBy: 0.5];
        [bgPath transformUsingAffineTransform: t];
        //NSColor* rgbColor = [NSColor colorWithCalibratedRed:101.0/255.0 green: 101.0/255.0  blue:101.0/255.0  alpha:0.5];
        [self.borderColor set];
        [bgPath stroke];

        if(self.backgroundColor){
            [self.backgroundColor set];
            [bgPath fill];
        }
    }

}
@end 
```

我希望它可以帮助某人并加快开发速度。

# apache-flex - Flex 瞬态 dto 停止 collectionChanged 事件自定义 ComboBox

> ID：15409503
> 
> 赞同：0
> 
> 时间：2013-03-14T12:37:22.813
> 
> 标签：apache-flex, dto, itemrenderer, transient

当DTO 的属性发生更改时，我遇到了`collectionChanged`触发事件的问题。`transient`我有一个 custom `ComboBox`，`CheckBox` `itemRenderer`每行都有一个，它保持打开状态，直到用户将焦点从它移开。`dataProvider`是一个`ArrayCollection`。_ `FooDto`我希望能够切换 的`visible`属性，但由于被更改`FooDto`而停止关闭。`ComboBox``dataProvider`

```
[Bindable]
class FooDto {
  public var id:int;
  public var name:String;
  [transient]public var visible:Boolean;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:40:37.937

[Transient] 元数据是为了防止在将属性发送到服务器时对其进行序列化。它不会阻止属性可绑定。

我建议您创建一个方法 setVisible() 而不是使用属性。如果您随后设置了私有变量，则不会触发集合更改。除了“可见”属性之外，您还可以使 FooDto 中的每个属性都可绑定。

# paypal - 如何在 Pay Pal 开发者帐户中创建定期帐单？

> ID：15409507
> 
> 赞同：0
> 
> 时间：2013-03-14T12:37:30.410
> 
> 标签：paypal

与该论坛上的许多人一样，我完全被 PayPal 的新开发者网站弄糊涂了，并发现自己遇到了关于定期计费的问题。

我已经成功设置了一个帐户，我可以使用该帐户创建一个企业帐户和个人帐户，但是当我尝试创建一个定期计费按钮时，系统不允许这样做，因为它希望您注册高级服务（这就是为什么您需要在我不知道的测试站点中获得这些权限，但是您去）。无论如何，当您单击链接订阅高级服务时，系统会将您带入实时系统！这没有任何意义。

所以我的问题是其他人是否与我处于同一位置，以及是否有人真正成功地在 PayPal 的一个新测试账户中使用定期计费。

顺便说一句，我是英国客户，并且有一个订阅高级服务的实时贝宝帐户，但我显然想在沙盒模式下进行测试，而不是我的真实帐户！

我收到了来自商家支持的电子邮件，说修复将在接下来的几天左右到期，但我只是想知道到目前为止其他人的经历如何。

谢谢

史蒂文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:39:05.963

根据您尝试使用的重复功能类型，可能必须在您创建的帐户上另外设置。有订阅，可以免费使用，您可以从您的帐户为这些订阅生成 HTML 代码。然后是增强的定期付款，基本上这些类似于订阅，但允许您的买家使用信用卡付款，而无需像订阅那样拥有 PayPal 帐户。您还可以设置分期付款计划，这些按钮可以从您的帐户中生成。最后是定期付款，例如增强型定期付款，这也是一项付费服务​​。这允许您使用 API 创建重复配置文件，还允许您将买家留在您的网站上，而无需将他们重定向到 PayPal。

如果您需要在您的帐户上启用一项功能，如果您可以提供您的票号和您需要启用此功能的测试沙盒卖家帐户，我将查看它，看看我是否可以从我的角度进行切换。

# mysql - 如何添加百分比并将结果插入到不同的表中

> ID：15409509
> 
> 赞同：1
> 
> 时间：2013-03-14T12:37:33.220
> 
> 标签：mysql, sql

我正在尝试从即期汇率提供卖出汇率和买入汇率。目前我有一个名为**Currency**的表，其中包含**[currency_code]**和**[Rate]**。我还有一个名为**Transaction**的表，其中包含**[Tran_ID]**、**[Buying_rate]**和**[Selling_rate]** 我想从**[Rate]**中添加 3 %并将其存储到**[Buying_rate]**中。我还想减去 3% 并将其存储到**[Selling_rate]**中。

![在此处输入图像描述](../Images/9edf1280cabc38b858f6085dca8358e7.png)

我已经在网上寻找教程，但我找不到任何教程。如果可以展示演示，我将不胜感激。

我已应用查询

```
 insert into Transaction Set 
 Tran_id = 1,
 Buying_Rate = (select (rate + (3*Rate)/100) as ratepos from currency  ),
 Selling_Rate = (select (rate - (3*Rate)/100) as rateneg from currency  ) 
```

我收到此错误消息 =>>> #1242 - 子查询返回超过 1 行

**Transaction**的表结构

 **```
Field        Type    Collation  Attributes  Null    Default Extra   Action
Tran_ID      int(11)            No  None    auto_increment                          
Buying_Rate  float          No  None                                
Selling_Rate float          No  None 
```

**货币**表结构

 **```
Field          Type   Collation     Attributes  Null    Default Extra   Action
currency_code  varchar(255)   latin1_swedish_ci No                                  
Rate           float                            Yes       NULL 
```

在**Transaction**表上，它的意思是空的，以便新的销售和购买率存储在他们的输出示例中

在**Transaction**表上，它的意思是空的，以便新的销售和购买率存储在他们的输出示例中

```
**|Tran_ID|Buying_rate|Selling_Rate| ** 
  | 1     |   1.1842  | 1.1242     | 
```

上面的例子显示了欧元货币加上 3% 和减去 3%

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:47:12.850

只是一个关于如何做的想法

```
 insert into Transaction Set 
 Trans_id = your_transaction_id ,
 Buying_ID = (select (rate + (3*Rate)/100) as ratepos from Currency 
              where currency_code = 'euro'),
 Selling_ID = (select (rate - (3*Rate)/100) as rateneg from Currency 
               where currency_code = 'euro' ) 
```

编辑。

[**演示在这里**](http://sqlfiddle.com/#!2/dd142/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:59:30.343

你可以这样做：

```
Insert into Transaction  
Select Top 1 'Enter Trans_id', (Rate + (3*Rate)/100),(Rate - (3*Rate)/100) From Currency 
```****

# php - Index.php 有效，而 Index.html 不适用于 WAMP 上的本地主机

> ID：15409514
> 
> 赞同：2
> 
> 时间：2013-03-14T12:37:43.000
> 
> 标签：php, html, iframe, indexing, localhost

我有一组在项目的 HTML 文件中运行的 PHP 脚本。有一个带有选项卡的主窗口，每个选项卡都会调用这些包含 HTML 的 PHP 文件之一。为此，我使用 iframe。PHP 脚本连接到 MySQL 数据库以检索数据并按用户要求显示。我为此目的使用 WAMP，并将 HTML 页面设置为索引文件。但是，如果我将 HTML 页面作为索引文件，则选项卡不会响应。如，我可以看到选项卡，但它没有连接到数据库，也没有检索数据。如果我将相同的文件保存为 PHP 索引文件而不进行任何更改，我将无法再看到框架和选项卡，但 PHP 脚本可以正常工作，并且可以轻松地从数据库中检索数据。我用我的每一个标签都试过这个，每次，PHP脚本都可以工作，而包括PHP在内的HTML却没有 吨。我究竟做错了什么 ？如何使用 PHP 制作 HTML 页面？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:41:42.520

在 .html 页面上执行 PHP 的方法是修改您的 .htaccess 文件。该文件可能是隐藏的，因此根据您的 FTP 程序，您可能需要修改一些设置才能看到它。然后你只需要为 .html 添加这一行：

```
AddType application/x-httpd-php .html` 
```

或者对于 .htm

```
AddType application/x-httpd-php .htm` 
```

如果您只打算在一页上包含 PHP，最好这样设置：

```
<Files yourpage.html>
AddType application/x-httpd-php .html
</Files> 
```

此代码只会使 PHP 在 yourpage.html 文件上可执行，而不是在所有 html 页面上。

或者`httpd.conf`如果你想要它在全球范围内

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-25T18:17:46.267

左键单击计算机右下角托盘中的 Wamp 图标 >> Apache >> 左键单击 httpd.conf >> 向下滚动 2/3 >> 添加 AddType application/x-httpd-php .html 到如图所示下面>>保存并关闭它>>重新启动Wamp>>完成！

AddType application/x-compress .Z
AddType application/x-gzip .gz .tgz
AddType application/x-httpd-php .php
AddType application/x-httpd-php .php3
AddType application/x-httpd-php .html

# c# - 如何通过 mp3 流/响应从控制器查看？

> ID：15409523
> 
> 赞同：3
> 
> 时间：2013-03-14T12:38:11.643
> 
> 标签：c#, asp.net, asp.net-mvc

我正在开发 asp.net 应用程序，并且正在从我的视图中调用控制器操作。此视图需要将 mp3 返回到被调用函数。Actionresult 的类型是什么。被调用的函数返回 mp3 响应。如何在内存中保存 api 返回的内存中的 mp3 响应并返回查看？

这是我的控制器方法代码：

```
 public ActionResult getrecording()
        {
            byte[] file = new byte[100]; // Convert.ToByte("https://api.abc.com/api/v2/GetRecording?access_token=dfsdfsdfsdfsdfsdfsdfsdfsfsfdsf");

            //return (new FileStreamResult(fileStream, "audio/mpeg"));
            ////return (new FileContentResult(data, "audio/mpeg"));
        } 
```

这是查看代码

```
 $("#jquery_jplayer_1").jPlayer({
                ready: function (event) {
                    $(this).jPlayer("setMedia", {
                          mp3: "/recording/getrecording" 
                    });
                },
                swfPath: "../../Content/JPlayer/js",
                supplied: "mp3",
                wmode: "window",
                size: 100,
                duration: "#duration"
            }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T12:40:05.590

您可以使用 WebClient 下载远程文件，然后将其流式传输到响应：

```
public ActionResult getrecording()
{
    var client = new WebClient();
    var stream = client.OpenRead("https://api.abc.com/api/v2/GetRecording?access_token=dfsdfsdfsdfsdfsdfsdfsdfsfsfdsf");
    return File(stream, "audio/mpeg");
} 
```

如果您希望提示客户端下载文件，只需添加一个名称：

```
public ActionResult getrecording()
{
    var client = new WebClient();
    var stream = client.OpenRead("https://api.abc.com/api/v2/GetRecording?access_token=dfsdfsdfsdfsdfsdfsdfsdfsfsfdsf");
    return File(stream, "audio/mpeg", "foo.mp3");
} 
```

# c# - 如何在 MVC 中的另一个页面中显示部分 html 页面

> ID：15409536
> 
> 赞同：1
> 
> 时间：2013-03-14T12:38:40.037
> 
> 标签：c#, asp.net-mvc, html

我有一个页面，我想在站点内的其他页面上显示 5 或 6 次瞥见。

对于每个主题页面，我都有一个包含 html 的字段...

我对建议感到好奇，因为预览大约是实际页面大小的 1/3.... 我不想只在预览中显示页面的左上角。

我想过抓住第一个 x 字符并显示它....但是，我最终得到了一个混乱的 html，它把页面的其余部分都扔掉了。

谁能告诉我他们会怎么处理？我可以呈现类似于 iframe 的 html 预览吗？我怎样才能在 MVC 中做到这一点。

或者，我可以以一种像样的方式从 HTML 中删除文本吗？我可以只使用 html 的可见文本....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:52:33.457

要在 ASP.NET MVC 中显示另一个页面，您可以使用`@HTML.Partial("MyViewPartial")`( [Html.Partial](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.partialextensions%28v=vs.108%29.aspx) )

在您当前的页面中：

```
<section id="login">
    @Html.Partial("_MyViewPartial")   
</section> 
```

而你的部分观点：

```
@{
      ViewBag.Title="MyViewPartial" 
      Layout=null;
 }
<h2> MyPartialView </h2> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:46:49.903

您可以使用`HttpClient`Object 为您获取资源。（如果您有 5 个或 6 个请求，您甚至可以并行化请求，因为 HttpClient 将返回一个任务）。如果您获得了资源的字符串表示，您可以将其传递给您的视图，然后浏览器将负责呈现 html，但维护 css 会很棘手。

# ios - 如何创建自定义标签栏？

> ID：15409537
> 
> 赞同：2
> 
> 时间：2013-03-14T12:38:41.787
> 
> 标签：ios, uitabbarcontroller

大家好，我正在尝试在 IOS 中创建一个标签栏。首先，标签栏将有 3 个项目。并且 3 个项目的图像宽度不同。前 2 个标签栏是 75 像素，第三个是 170 像素。（每个标签栏都有自定义图像）

![在此处输入图像描述](../Images/4fbf20593df2fbc4f4b5d292e42a1231.png) 有可能实现这样的目标吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:47:04.280

有很多第三方库可用，因此您可以使用其中之一。

对于起点，您可以参考[this](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=tabbar)。

希望这会帮助你。

一切顺利 ！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:00:04.287

将背景灰色图像的图像放入标签栏背景图像

```
tabBarCntrl.tabBar.backgroundImage = [UIImage imageNamed:@"graybackground.png"]; 
```

将所需的帧设置为 a、b、c 图像视图。并将红色图像设置为这些图像视图。

```
aImageView=[[UIImageView alloc]initWithFrame:CGRectMake(15, 420, 50, 50)];

bImageView=[[UIImageView alloc]initWithFrame:CGRectMake(95, 420,50, 43)];

cImageView=[[UIImageView alloc]initWithFrame:CGRectMake(175, 420, 100, 50)];

aImageView.image=[UIImage imageNamed:@"a.png"];

bImageView.image=[UIImage imageNamed:@"b.png"];

cImageView.image=[UIImage imageNamed:@"c.png"]; 
```

subview 三个图像到 tabbarcontroller

```
[tabBarCntrl.view addSubview:customersImageView];
[tabBarCntrl.view addSubview:invoicesImageView];
[tabBarCntrl.view addSubview:dashboardImageView];

[self.window addSubview:self.tabBarCntrl.view]; 
```

# windows - 将 JBoss 7.1.1.Final 作为 Windows 服务运行

> ID：15409538
> 
> 赞同：4
> 
> 时间：2013-03-14T12:38:42.920
> 
> 标签：windows, jboss, windows-services, jboss7.x

将 JBoss 7 作为 Windows 服务运行的正确指令是什么？

配置：Windows Server 2008 64 位，
Java 版本“1.6.0_26”64 位，
JBoss 7.1.1.Final。

我找不到任何有关如何执行此操作的官方手册。
谢谢你。

PS：在stackoverflow上已经关闭了一个类似的问题 - [How to configure Jboss 7 (v7.1.0) to run as a windows service](https://stackoverflow.com/questions/9400406/how-to-configure-jboss-7-v7-1-0-to-run-as-a-windows-service)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T13:02:59.853

好的，我发现最相关的来源是这两个链接：
- [Jboss 7.1.1 作为 Windows 服务](https://community.jboss.org/message/724488)，
-[将 JBoss AS 7 作为 Windows 服务运行](https://community.jboss.org/wiki/RunningJBossAS7AsAWindowsService)

对我来说最奇怪的是在[http://www.jboss.org/jbossweb/downloads/jboss-native-2-0-10.html](http://www.jboss.org/jbossweb/downloads/jboss-native-2-0-10.html)对于**JBoss 7**没有任何特定的本机连接器。
所以我们需要修改**JBoss 5**连接器（特别是*service.bat*文件）以反映 JBoss 版本 7 的结构变化。

从[此处](https://community.jboss.org/message/724488)获取更新的 service.bat （所有更改都以粗体显示）。
变化如下：

1.  我们应该更改服务名称（Jboss 5 到 Jboss 7）
2.  将所有 run.bat 调用切换到standalone.bat 调用
3.  用新命令替换所有关机调用（因为不再有任何shutdown.bat！忽略这可能会导致调用Windows关机命令！）
4.  （可选）修改 JAVA_OPTS。

PS考虑阅读[这篇](http://canotech.wordpress.com/2012/08/10/running-jboss7-in-service-mode-using-java-service-wrapper/)文章作为另一种方式去。但是我还没有尝试过。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T12:40:22.170

[这](https://community.jboss.org/wiki/RunningJBossAS7AsAWindowsService?_sscc=t)看起来像一个全面的指南。

> 首先，从 [http://www.jboss.org/jbossweb/downloads/jboss-native-2-0-10](http://www.jboss.org/jbossweb/downloads/jboss-native-2-0-10)获取适当的本地连接器（x86 用于 32 位主机，x64 用于 64 位）。如果您不确定，请使用 32 位版本，因为它们也适用于 64 位系统，但反之则不然。解压 JBoss 主文件夹中的存档。然后对service.bat文件做一些修改

（然后列出了几个修改）

# sql - LEFT OUTER JOIN 和 NOT EXISTS 查询

> ID：15409544
> 
> 赞同：6
> 
> 时间：2013-03-14T12:38:59.643
> 
> 标签：sql, sql-server-2005, left-join

我在复杂的连接中遇到了困难，我需要连接两次相同的两个表，并确保每次只使用特定记录（最近的记录）完成连接。

```
SELECT c.collection_id      AS collections, 
       s.strat_id           AS StrategyId, 
       s.strat_version      AS StrategyVersion, 
       ssb.side_ordering    AS SSB_SO, 
       ssb2.side_ordering   AS SSB2_SO, 
       Invoice1.invoice_id  AS Inv1ID, 
       Invoice2.invoice_id  AS Inv2ID, 
       Invoice1.printeddate AS Inv1PrintedDate, 
       Invoice2.printeddate AS Inv2PrintedDate 
  FROM dbo.collections AS c 
       INNER JOIN dbo.strategies AS s 
               ON c.collection_id = s.collection_id 
       INNER JOIN dbo.side_strat_brkrgs AS ssb 
               ON s.collection_id = ssb.collection_id 
                  AND s.strat_id = ssb.strat_id 
                  AND s.strat_version = ssb.strat_version 
       INNER JOIN dbo.strat_sides AS ss 
               ON ss.strat_side_id = ssb.strat_side_id 
       LEFT OUTER JOIN dbo.side_strat_brkrgs AS ssb2 
                    ON ssb2.collection_id = ssb.collection_id 
                       AND ssb2.strat_id = ssb.strat_id 
                       AND ssb2.strat_version = ssb.strat_version 
                       AND ssb2.side_ordering <> ssb.side_ordering 
       INNER JOIN dbo.strat_sides AS ss2 
               ON ss2.strat_side_id = ssb2.strat_side_id 
       LEFT OUTER JOIN dbo.newinvoiceitem AS InvoiceItem1 
                    ON ssb.collection_id = InvoiceItem1.collection_id 
                       AND ssb.side_ordering = InvoiceItem1.side_ordering 
                       AND s.strat_id = InvoiceItem1.strat_id 
       LEFT OUTER JOIN dbo.newinvoice AS Invoice1 
                    ON Invoice1.invoice_id = InvoiceItem1.invoice_id 
       LEFT OUTER JOIN dbo.newinvoiceitem AS InvoiceItem2 
                    ON ssb2.collection_id = InvoiceItem2.collection_id 
                       AND ssb2.side_ordering = InvoiceItem2.side_ordering 
                       AND s.strat_id = InvoiceItem2.strat_id 
       LEFT OUTER JOIN dbo.newinvoice AS Invoice2 
                    ON Invoice2.invoice_id = InvoiceItem2.invoice_id 
 WHERE NOT EXISTS (SELECT 1 
                     FROM dbo.newinvoiceitem tempInvoiceItem1 
                          INNER JOIN dbo.newinvoice AS tempInvoice1 
                                  ON tempInvoice1.invoice_id = 
                                     tempInvoiceItem1.invoice_id 
                    WHERE tempInvoiceItem1.collection_id = ssb.collection_id 
                          AND ssb.side_ordering = tempInvoiceItem1.side_ordering 
                          AND s.strat_id = tempInvoiceItem1.strat_id 
                          AND s.strat_version = tempInvoiceItem1.strat_version 
                          AND tempInvoice1.printeddate > Invoice1.printeddate) 
       AND NOT EXISTS (SELECT 1 
                         FROM dbo.newinvoiceitem tempInvoiceItem2 
                              INNER JOIN dbo.newinvoice AS tempInvoice2 
                                      ON tempInvoice2.invoice_id = 
                                         tempInvoiceItem2.invoice_id 
                        WHERE 
               tempInvoiceItem2.collection_id = ssb2.collection_id 
               AND ssb2.side_ordering = tempInvoiceItem2.side_ordering 
               AND s.strat_id = tempInvoiceItem2.strat_id 
               AND s.strat_version = tempInvoiceItem2.strat_version 
               AND tempInvoice2.printeddate > Invoice2.printeddate) 
       AND c.collection_id = 16447 
```

我得到以下结果：

```
16447   1   3   1   0   3785    3183    2010-05-06 17:52:00 2010-05-06 17:52:00 
16447   1   3   1   0   3785    4033    2010-05-06 17:52:00 2010-05-10 16:32:00 
16447   1   3   1   0   4137    3183    2010-05-20 17:08:00 2010-05-06 17:52:00 
16447   1   3   1   0   4137    4033    2010-05-20 17:08:00 2010-05-10 16:32:00 
```

虽然我实际上只期待最后一行。我哪里错了？

如您所见，我不能使用 MAX() 来检索最高记录，因为我需要通过 JOIN 查找另一个属性，并且我被迫使用 NOT EXIST

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T13:12:00.467

试试这个谓词

```
 WHERE EXISTS (SELECT 1 
               FROM dbo.newinvoiceitem tempInvoiceItem1 
                 INNER JOIN dbo.newinvoice AS tempInvoice1 
                   ON tempInvoice1.invoice_id = tempInvoiceItem1.invoice_id 
               WHERE tempInvoiceItem1.collection_id = ssb.collection_id 
                 AND ssb.side_ordering = tempInvoiceItem1.side_ordering 
                 AND s.strat_id = tempInvoiceItem1.strat_id 
               HAVING MAX(tempInvoice1.printeddate) = Invoice1.printeddate
                 OR Invoice1.printeddate IS NULL
               )                          
       AND EXISTS (SELECT 1 
                   FROM dbo.newinvoiceitem tempInvoiceItem2 
                     INNER JOIN dbo.newinvoice AS tempInvoice2 
                       ON tempInvoice2.invoice_id = tempInvoiceItem2.invoice_id 
                   WHERE tempInvoiceItem2.collection_id = ssb2.collection_id 
                     AND ssb2.side_ordering = tempInvoiceItem2.side_ordering 
                     AND s.strat_id = tempInvoiceItem2.strat_id 
                   HAVING MAX(tempInvoice2.printeddate) = Invoice2.printeddate
                     OR Invoice2.printeddate IS NULL
                   ) 
       AND c.collection_id = 16447 
```

或者

```
 WHERE EXISTS (SELECT 1 
               FROM dbo.newinvoiceitem tempInvoiceItem1 
                 INNER JOIN dbo.newinvoice AS tempInvoice1 
                   ON tempInvoice1.invoice_id = tempInvoiceItem1.invoice_id 
               WHERE tempInvoiceItem1.collection_id = ssb.collection_id 
                 AND ssb.side_ordering = tempInvoiceItem1.side_ordering 
                 AND s.strat_id = tempInvoiceItem1.strat_id 
               HAVING MAX(tempInvoice1.printeddate) = Invoice1.printeddate                     
               )                          
       AND EXISTS (SELECT 1 
                   FROM dbo.newinvoiceitem tempInvoiceItem2 
                     INNER JOIN dbo.newinvoice AS tempInvoice2 
                       ON tempInvoice2.invoice_id = tempInvoiceItem2.invoice_id 
                   WHERE tempInvoiceItem2.collection_id = ssb2.collection_id 
                     AND ssb2.side_ordering = tempInvoiceItem2.side_ordering 
                     AND s.strat_id = tempInvoiceItem2.strat_id 
                   HAVING MAX(tempInvoice2.printeddate) = Invoice2.printeddate
                   ) 
       AND c.collection_id = 16447 OR Invoice1.printeddate IS NULL
         OR Invoice2.printeddate IS NULL 
```

# php - 如何使用会话将表单数据存储在数组中？

> ID：15409545
> 
> 赞同：0
> 
> 时间：2013-03-14T12:39:00.097
> 
> 标签：php, arrays, session

我必须使用会话将表单数据（即学生的卷号和分数）存储在数组中。当我这样做时，以前的值会在提交表单后被新值覆盖。我想用新索引将数组中的值添加到前一个值旁边。

这是我的表格

```
<form action="#" method="post">
    Roll No:<input type="text" name="rollno" value="" id="rollno"  />
    Marks:<input type="text" name="marks" value="" id="marks"  />
    <input type="submit" name="submit" value="Submit" onclick="return validate();" />
</form> 
```

和

```
<?php
session_start();
//session_destroy();
$_SESSION['status'] = array();

$_SESSION['status'][] = @$_POST['rollno'];
$_SESSION['status'][] = @$_POST['marks'];

print_r($_SESSION['status']);                    
?> 
```

我该怎么做请帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:44:25.130

这是一种方式...

```
<?php
session_start();
$i=0;

while(isset($_SESSION[$i])) $i++;

$_SESSION[$i]['rollno'] = $_POST['rollno'];
$_SESSION[$i]['marks'] = $_POST['marks'];
-
-
-
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:47:04.113

您可以像这样将序列化数组添加到会话中：

```
$_SESSION['key'] = serialize($yourArray); 
```

然后，当您想添加某些内容时，只需对其进行反序列化、修改并将其放回会话中即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:56:26.013

我会用一个样本来解释

```
 <?php
    session_start();

    $_SESSION['data']= array();
    $details1=array('pappu','10');
    $details2=array('tippu','12');

    array_push($_SESSION['data'],$details1);
    array_push($_SESSION['data'],$details2);

    foreach ($_SESSION['data'] as $eacharray) {
    while (list(, $value) = each ($eacharray)) {
        echo "Value: $value<br>\n";
    }
    }

?> 
```

*输出*

> 值：pappu
> 值：10
> 值：tippu
> 值：12

**你可以试试**

```
 $rollArray=array($_POST['rollno'],$_POST['marks']);
 array_push($_SESSION['status'], $rollArray);

 foreach ($_SESSION['status'] as $eacharray) {
    while (list(, $value) = each ($eacharray)) {
        echo "Value: $value<br>\n";
    }
    } 
```

# php - php下一页和上一页从mysql获取数据

> ID：15409547
> 
> 赞同：0
> 
> 时间：2013-03-14T12:39:03.650
> 
> 标签：php, html, mysql

我正在使用搜索项来过滤城市、性别、职业和州。它应该每页显示 3 行。但它显示第一页。当我按下最后一页时，它又回到了主页。

```
<?php
if(isset($_POST['submit']))
{                           
    $con = mysql_connect("localhost","root","");

    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("nursingcarein",$con);

    if (isset($_GET["page"])) {
        $page  = $_GET["page"]; 
    } else { 
        $page=1; 
    };

    $start_from = ($page-1) * 3;
    /*pass the values(city,gender,profession,state) frm search */

    $city=$_POST['city'];

    $gender=$_POST['gender'];

    $profession=$_POST['profession'];

    $state=$_POST['state']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:58:08.407

我不确定这是否是您的问题，但以下代码：

```
LIMIT $start_from, 3 
```

`$start_from`如果大于 3则不起作用。如果您想要 3 条记录，则必须这样做：

```
$end = $start_from + 3;
// Your code here
LIMIT $start_from, $end 
```

# smalltalk - Smalltalk VM和图像的关系？

> ID：15409567
> 
> 赞同：2
> 
> 时间：2013-03-14T12:41:07.433
> 
> 标签：smalltalk

我想错了。我认为 Smalltalk 是单体的东西，但最近我意识到 Smalltalk 被分离为 VM 和图像。在这种情况下，我可以称 VM 是必不可少的部分，而映像只是应用程序的集合。语言语法只是制作图像代码的帮手。

这让我有一些疑问。

1.  似乎可以在任何 Smalltalk VM 上运行*映像。*这是真的？例如，我可以从任何 Smalltalk VM 运行 Seaside 吗？

2.  似乎所有 Smalltalk VM 都应该完全兼容。至少在一组功能和执行源代码方面。这是真的？

3.  是否可以在裸机 VM 上构建我自己的*映像？*这不实用，但应该很适合学习。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T18:29:57.900

为了回答问题 3)，关于图像创建，另一个 POV 是基于生物隐喻的。

从头开始创建图像非常困难，就像从头开始构建活细胞非常困难：需要考虑很多相互作用（创造论者会说你必须是上帝才能做到这一点）。

但是，克隆图像是一个非常简单的操作，就像克隆一个单元格（您只需让它克隆自己）。这很容易，我们通常只是克隆 - 例如，Squeak 和 Pharo 图像现在已有数十年历史了 - 请参阅关于squeak-dev 邮件列表上*的对象生命的有趣讨论*[http://forum.world.st/About-a-object -life-td4653839.html](http://forum.world.st/About-a-object-life-td4653839.html)。

请注意，gnu-Smalltalk 具有从头开始组装图像的所有工具，并且 Pharo 计划重新创建此类工具。

最后一点，Squeak 关心向后兼容性，最近的解释器 VM 仍然提供必要的接口来运行十年前冻结的图像。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T13:12:33.413

我将尝试回答您的问题（您肯定这里的其他 Smalltalkers 会提供更多详细信息）：

> 1.  这似乎可以在任何 Smalltalk VM 上运行映像。这可能吗？例如，我可以从任何 Smalltalk VM 运行 Seaside 吗？

Smalltalk有很多方言，也就是说Image+Vm的组合有很多。其中一些是[Pharo](http://www.pharo-project.org/)，[Squeak](http://www.squeak.org/)，[VisualWorks](http://www.cincomsmalltalk.com/main/)，[Dolphin](http://www.object-arts.com/)，[GNU Smalltalk](http://smalltalk.gnu.org/)，[Amber](http://amber-lang.net/)，[Gemstone](http://www.gemstone.com/products/gemstone)（我肯定会错过更多）。但是，每个映像都使用其特定的 VM 运行，因为诸如原语或内存管理之类的东西是由每个 VM 定义的。事实上，根据 Smalltalk 的风格，即使在主要版本之间，图像也可能不兼容。

话虽如此，Seaside 是一个特殊的 Web 框架，已被移植到不同的 Smalltalk 风格。因此，您可以在一个 St（例如 Pharo）中编写基于 Seaside 的应用程序，然后将代码导出并导入另一个 St（例如 Gemstone）。

> 这似乎所有的 Smalltalk VM 都应该完全兼容。至少在一组功能和执行源代码方面。这是真的？

是的，基本**概念**在大多数 Smalltalks 中是相同的。如果您想与风味兼容，您应该尝试遵守 ANSI Smalltalk 规范，并且您将能够（有些头疼:)）跨方言移动代码。但是请注意，这不是常见的事情，因为大多数时候您将使用特定的一个（也许 Squeak/Pharo <=> Gemstone 组合是最常见的，并且 AFAIK 它工作得很好）。

> 是否可以在裸机 VM 上构建我自己的映像？这不实用，但应该很适合学习。

正如我之前所说，为了做到这一点，你应该注意图像中的许多东西。所以，从技术上讲，是的，你可以，实际上，这很难。Mariano有一系列题为“虚拟机之旅”的[博客文章，您会发现这些文章很有趣。此外，AFAIK Tim Budd 创建了](http://marianopeck.wordpress.com/tag/vm/)[Little Smalltalk](http://en.wikipedia.org/wiki/Little_Smalltalk)作为学习资源（我需要找到引用:(）。无论如何，有无数人构建自己的 Smalltalk VM 以了解其工作方式的示例。这是一项艰苦的工作，但您肯定会学到很多东西（我知道您要求构建映像，但知道您也可以搭建VM）哦，你可能对[这个链接](http://astares.blogspot.com.ar/2011/03/birth-of-smalltalk-image.html)也有兴趣。

高温高压

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T14:55:35.863

不同供应商的 Smallatalk 虚拟机通常不兼容，用一个虚拟机保存的图像不能加载到另一个虚拟机，至少不能直接加载。例外是 Squeak 和 Pharo 映像共享（或大部分时间）相同的 VM 接口。

Seaside 程序可以（并且确实）作为源包在不同 VM 中的图像之间传输。

可以从头开始构建映像，但需要对 VM 有很好的了解。您可能会发现[Spoon](http://www.netjam.org/spoon/)系统很有趣。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T12:56:47.823

VM 是 Smalltalk 字节码和系统之间的一层。所以主要思想是当你执行 4 + 5 时，调用一个 VM*原语*，它执行相应的机器代码来总结这些东西，因为 CPU 不知道什么是“对象”。所以你不能在任何东西上运行任何东西。这就是 NBCog 存在的原因。Native Boost 需要一些在 Cog vm 中没有实现的特殊原语，因此它只能在 NBCog 上工作。我不明白你的第三个问题。VM 采用 smalltalk 字节码并输出机器码。什么是准系统 VM？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-22T05:29:57.310

没有图像就无法运行 Smalltalk 虚拟机。这是一个完全没有意义的想法 - vm 的全部意义在于运行映像。这就像在没有图片的情况下运行图片查看器。

# android - 在自定义 DialogPreference 中加载列表视图之前加载进度条

> ID：15409568
> 
> 赞同：0
> 
> 时间：2013-03-14T12:41:07.820
> 
> 标签：android, android-layout

问题是进度微调器仅在 api 调用完成后加载。我想只有在我返回视图之后才有意义。我不确定如何在进行 api 调用之前和期间将其添加到对话框中？

```
protected View onCreateDialogView() {

    subscriptions = null;
    LayoutInflater inflater = ((SettingsActivity) ctx).getLayoutInflater();
    final View vw = inflater.inflate(R.layout.channel_content_view, null);

    header = ((SettingsActivity) ctx).getLayoutInflater().inflate(R.layout.channels_header,null);
    ((TextView) header.findViewById(R.id.channels_header)).setText("Channels"); 

    LinearLayout linlaHeaderProgress = (LinearLayout) vw.findViewById(R.id.channelsProgress);
    linlaHeaderProgress.setVisibility(View.VISIBLE);

//        Do this in a new Thread

    final ListView lv = (ListView) vw.findViewById(R.id.list);

//        ((TextView) lv.findViewById(R.id.channel_desciption)).setText("CHANNELS");
    Thread thread = new Thread()
    {
        @Override
        public void run() {
//                      get the all the channels from api on web
                    channels = Json.getJson(apiurl + "/rest/channel/"+ linkid +"/"+ username, "GET", null);
        }
    };

    thread.start(); 

    lv.addHeaderView(header);

    return vw;
} 
```

频道内容视图.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/channels_list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:orientation="horizontal" >
    <LinearLayout
        android:id="@+id/channelsProgress"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:orientation="vertical"
        android:visibility="gone" >

        <ProgressBar
            android:id="@+id/pbChannelsProgress"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </ProgressBar>
    </LinearLayout>
    <ListView
        android:id="@+id/list"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:descendantFocusability="blocksDescendants" >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T08:30:38.240

这实际上是我的布局的一个非常简单的问题

c将我的布局更改为：有效

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/channels_list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:clickable="true"
    android:orientation="horizontal" >
    <LinearLayout
        android:id="@+id/channelsProgress"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:orientation="vertical"
        android:visibility="gone" >

        <ProgressBar
            android:id="@+id/pbChannelsProgress"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:descendantFocusability="beforeDescendants" >
        </ProgressBar>
    </LinearLayout>
    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:descendantFocusability="afterDescendants" >
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:02:52.707

我有两个建议给你：

1.  可能是线程执行太快，以至于它在显示进度条之前提前结束。我会将线程保持在睡眠模式，看看是否是这种情况。**（这只是为了确认不使用此方法会导致和额外延迟的情况）**

    例如尝试放置这个：

    ```
     Thread thread = new Thread()
          {
              @Override
              public void run() {
              try{
                 Thread.sleep(3000);
              }
              catch(Exception e){}
      //                      get the all the channels from api on web
                          channels = Json.getJson(apiurl + "/rest/channel/"+ linkid +"/"+ username, "GET", null);
              }
          }; 
    ```

    1.  此外，如果上述方法不起作用，请尝试以下方法 Shwoing the Progress Bar，看看它是否有效：

    调用 showProgressBar() 方法，您将从那里创建对话框的实例，或者如果不可能，则开始 onCreateDialog 方法：

    ```
     void showProgressBar(Context ctx){

        progressBar = new ProgressDialog(ctx);  //this is a context object probably ctx object will go here as 
        progressBar.setCancelable(false);
        progressBar.setMessage("Heavy Process....");
        progressBar.setProgressStyle(ProgressDialog.STYLE_SPINNER);

        progressBar.show();
        }

     protected View onCreateDialogView() {

        ///I think ctx is an Activity
        showProgressBar(ctx);  ///if it is not possible to call showProgressBar() from where you are instantiating the Dialog

         subscriptions = null;
         LayoutInflater inflater = ((SettingsActivity) ctx).getLayoutInflater();
         final View vw = inflater.inflate(R.layout.channel_content_view, null);

         header = ((SettingsActivity) ctx).getLayoutInflater().inflate(R.layout.channels_header,null);
         ((TextView) header.findViewById(R.id.channels_header)).setText("Channels"); 

        /*
         Commented below lines of Progress Bar because we are displayin it above.
         */
         //LinearLayout linlaHeaderProgress = (LinearLayout) vw.findViewById(R.id.channelsProgress);
         ///linlaHeaderProgress.setVisibility(View.VISIBLE);

     //                 Do this in a new Thread

         final ListView lv = (ListView) vw.findViewById(R.id.list);

     //        ((TextView) lv.findViewById(R.id.channel_desciption)).setText("CHANNELS");

         Thread thread = new Thread()
         {

        @Override
        public void run() {

     //                      get the all the channels from api on web

                channels = Json.getJson(apiurl + "/rest/channel/"+ linkid +"/"+ username, "GET", null);

        }

         };

         thread.start(); 

         lv.addHeaderView(header);

         return vw;
     } 
    ```

此外，如果您想在对话框中嵌入 ProgressBar，则必须创建一个活动并将其显示为对话框。为此只需添加

[下面从 Android 文档页面 ( http://developer.android.com/guide/topics/ui/dialogs.html](http://developer.android.com/guide/topics/ui/dialogs.html) )复制：

提示：如果您想要自定义对话框，则可以将 Activity 显示为对话框，而不是使用对话框 API。只需创建一个活动并将其主题设置为清单元素中的 Theme.Holo.Dialog ：

注意 您的 onCreateDialogView 中的大部分代码都非常容易移植到 Activity onCreate() 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:07:50.117

不知道这是否可行，但您可以尝试先创建对话框，然后更改内容！

这很丑陋，可以用 AsyncTask 轻松重写，但我认为它可以解决问题：

```
protected View onCreateDialogView() {

    subscriptions = null;
    LayoutInflater inflater = ((SettingsActivity) ctx).getLayoutInflater();
    final View vw = inflater.inflate(R.layout.channel_content_view, null);    
    LinearLayout linlaHeaderProgress = (LinearLayout) vw.findViewById(R.id.channelsProgress);
    linlaHeaderProgress.setVisibility(View.VISIBLE);
    ((TextView) header.findViewById(R.id.channels_header)).setText("Channels"); 

    //        Do this in a new Thread   
    Thread thread = new Thread()
    {
        @Override
        public void run() {
//                      get the all the channels from api on web
                    channels = Json.getJson(apiurl + "/rest/channel/"+ linkid +"/"+ username, "GET", null);
                    setListLayout(vw,linlaHeaderProgress);
        }
    };
    thread.start(); 

    return vw;
}

protected void setListLayout(View vw,View progressBar){

     runOnUiThread(new Runnable() {
                public void run() {
                    Thread.sleep(500); // to avoid super fast results from the server and always display the loader bar for a while
                    header = ((SettingsActivity) ctx).getLayoutInflater().inflate(R.layout.channels_header,null);    
                    final ListView lv = (ListView) vw.findViewById(R.id.list);
                    lv.addHeaderView(header);
                    progressBar.setVisibility(hidden);
                    lv.setVisibility(visible);

                }
            });

} 
```

# schema - HBase：行键大小

> ID：15409579
> 
> 赞同：6
> 
> 时间：2013-03-14T12:41:30.310
> 
> 标签：schema, hbase

我来自 RDBMS 背景，最近开始阅读 HBase。我知道没有二级索引，我们不应该尝试做类似的事情：

```
SELECT * FROM tbl_photo WHERE album_id = 1969 
```

我想知道是否所有信息都可以用来创建行键本身。

例如。有一个用户在照片共享服务提供商处注册了他/她的电子邮件。用户可以创建一个相册（可以创建多个相册）并将照片上传到它。另一个用户对照片发表评论，一些用户对评论投赞成票/反对票。

识别这种投票的关键可能看起来像`email:album:ts:photo:ts:comment:ts:vote:ts`。这把钥匙有意义吗？它比推荐的要长吗？( `ts stands timestamp`)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T14:09:18.133

从某种意义上说，这确实是有道理的，但是如果您的所有信息都在您的密钥中，您会在列中存储什么？您是否总是能够从客户端应用程序的角度形成该密钥？HBase 模式设计是一个相当困难的话题，如果您有空闲时间，您绝对应该观看去年 HBaseCon 的视频：[**Ian Varley 的 HBase Schema Design**](http://www.cloudera.com/content/cloudera/en/resources/library/hbasecon/video-hbasecon-2012-hbasecon-2012.html)。

就我而言，在设计 HBase 行键时要记住的最重要的事情是“我将如何检索我的数据？”。

如果您（如在您的示例中）想要从特定相册中检索图片，为什么不将行键设置为类似`email:album`，让不同的列族存储您的图片、评论、...

现在，当您这样做并且想要检索特定图片时，您必须扫描所有相册。因此，为了防止这种情况，您可以`email:picture`改为使用 as key，但这只会反过来产生同样的问题。您也可以使用`email:album:picture`，但是如果您想从特定相册中获取所有图片，您应该知道图片的标识符，否则您将无法形成您的密钥。

另一方面，如果用户例如只能拥有 2000 张图片，则使用`email:picture`or`email:album`作为键并指定列过滤器`album`或`picture`不会成为问题，那么 HBase 将循环最多 2000 行，这不会花费那么长时间。

话虽如此，根据您使用的 HBase 版本，您可以使用[FuzzyRowFilter](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/FuzzyRowFilter.html)实现某种二级索引。

# iphone - 如何将带有 CAEmitterLayer 的 UIView 添加到我的游戏中？

> ID：15409581
> 
> 赞同：0
> 
> 时间：2013-03-14T12:41:32.390
> 
> 标签：iphone, ios, objective-c, quartz-core, caemitterlayer

当我的用户在屏幕上拖动手指时，我想产生一些粒子。我有所有的拖动代码，但我的问题是我根本看不到任何粒子绘制！

通过一些谷歌搜索，我提出了以下类，我已经创建了 UIView 的子类：

```
#import "PrettyTouch.h"
#import <QuartzCore/QuartzCore.h>

@implementation PrettyTouch
{
    CAEmitterLayer* touchEmitter;
}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        touchEmitter = (CAEmitterLayer*) self.layer;
        touchEmitter.emitterPosition= CGPointMake(0, 0);
        touchEmitter.emitterSize = CGSizeMake(5,5);
        CAEmitterCell* touch = [CAEmitterCell emitterCell];
        touch.birthRate = 0;
        touch.lifetime = 0.6;
        touch.color = [[UIColor colorWithRed:0.2 green:0.3 blue:1.0 alpha:0.06] CGColor];
        touch.contents = (id)[[UIImage imageNamed:@"part.png"]CGImage];
        touch.velocity = 0;
        touch.velocityRange = 50;
        touch.emissionRange = 2*M_PI;
        touch.scale = 1.0;
        touch.scaleSpeed = -0.1;
        touchEmitter.renderMode = kCAEmitterLayerAdditive;
        touchEmitter.emitterCells = [NSArray arrayWithObject:touch];

    }
    return self;
}
+ (Class) layerClass 
{
    //tell UIView to use the CAEmitterLayer root class
    return [CAEmitterLayer class];
}

- (void) setEmitterPosition:(CGPoint)pos
{
    touchEmitter.emitterPosition = pos;
}
- (void) toggleOn:(bool)on
{
    touchEmitter.birthRate = on? 300 : 0;
}

@end 
```

然后在我的游戏视图控制器类中，在 viewDidLoad 中，我这样做了：

```
@implementation PlayViewController
{
   //...
   PrettyTouch* touch;

}

- (void)viewDidLoad
{
    [super viewDidLoad];
    //...
    touch = [[PrettyTouch alloc]initWithFrame:self.view.frame];
    touch.hidden = NO;
    [self.view addSubview:touch];
    //... 
```

然后在我的 UIPanGestureRecogniser 函数中，我会`[touch toggleOn:YES];`在手势开始`[touch setEmitterPosition:[gest locationInView:self.view]];`时和函数被调用时调用。（gest 是 UIPanGestureRecognizer*）。

我可能会丢失什么或者我需要做什么才能获得粒子图？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T17:27:20.790

这里有两个`birthRate`属性在起作用。

*   每个`CAEmitterCell`人都有一个`birthRate`财产。
    这是该细胞的固定出生率。

*   有`CAEmitterLayer`一个`birthRate`属性。
    这是一个应用于每个细胞属性的*乘数*`birthRate`，以得出实际的出生率。

您的代码混淆了两者 - 您在初始化时将单元格的birthRate 设置为零，但在切换方法中更改图层的birthRate 乘数。

两种解决方案...

1 -`toggleOn:`设置单元格的出生率，而不是图层的乘数：

```
- (void) toggleOn:(bool)on
  {
     CAEmitterCell* emitterCell = [self.touchEmitter.emitterCells objectAtIndex:0];
    [emitterCell setBirthRate:on? 300 : 0];
  } 
```

2 - 在您的初始化中，将单元格的出生率设置为非零：

```
 touch.birthRate = 1.0; 
```

然后，您使用的乘数`toggleOn`将应用于此数字。

# ruby - 如何建立厂女会？

> ID：15409584
> 
> 赞同：1
> 
> 时间：2013-03-14T12:41:43.793
> 
> 标签：ruby, ruby-on-rails-3, factory-bot

我在建立协会时遇到了麻烦。我的模型定义如下：

```
class Conversation
  belongs_to :user1
  belongs_to :user2
  has_many :messages
end 
```

我已经定义了这些工厂

```
factory :user do
  name "name"
end

factory :female, parent: :user do
  gender 'f'
end 

factory :male, parent: :user do
  gender 'm'
end 

factory :message do
  message "message"
  conversation
end 
```

现在我正在尝试像这样创建工厂“conversation_with_messages”

```
factory :conversation do
    read false
    association :user1, factory: :male
    association :user2, factory: :female    
    factory :conversation_with_messages do

      ignore do
        messages_count 10
      end

      after(:create) do |conversation, evaluator|
        FactoryGirl.create_list(:message, evaluator.messages_count, author: conversation.user1)
      end
    end
  end 
```

但是这样做`FactoryGirl.create(:conversation_with_messages)`会导致数据库错误，提示 user1_id 列必须不为空。

我想知道为什么这个专栏没有填满，我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:06:34.623

您是否`class_name`在对话模型中指定了关系？

```
class Conversation
  belongs_to :user1, class_name: 'User'
  belongs_to :user2, class_name: 'User'
  has_many :messages
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:43:10.220

当测试很困难时，请考虑修改您的设计。脑海中浮现出两个想法：

**1)*必须* `User`s 有多个`Conversation`s？**

如果像 Twitter 的直接消息模型（任意两个用户之间的一个持续对话）这样的东西是可以接受的，那么你可以选择类似的东西：

```
class Message < ActiveRecord::Base
  belongs_to :sender, class_name: 'User'
  belongs_to :recipient, class_name: 'User'

  default_scope order("created_at DESC")

  def read?
    !self.unread?
  end

  def read_or_unread
    self.unread? ? "unread" : "read"
  end
end

class User < ActiveRecord::Base
  has_many :messages, foreign_key: :recipient_id

  def messages_grouped_by_sender
    msg_ids = messages.select("MAX(id) AS id").group(:sender_id).collect(&:id)
    Message.includes(:sender).where(id: msg_ids)
  end
end

class Conversation

  THEM_TO_ME = "sender_id = :their_id AND recipient_id = :my_id"
  ME_TO_THEM = "sender_id = :my_id AND recipient_id = :their_id"

  def initialize(me, them)
    @me = me
    @them = them
  end

  def them
    @them
  end

  def thread
    Message.where("#{ME_TO_THEM} OR #{THEM_TO_ME}", ids)
  end

  def unread?
    # Checking only the newest message is good enough
    messages_to_me.first.try(:unread)
  end

  def mark_as_read
    messages_to_me.where(:unread => true).update_all(:unread => false)
  end

  def to_or_from_me(message)
    message.sender == @me ? "From" : "To"
  end

  private

  def messages_to_me
    Message.where(THEM_TO_ME, ids)
  end

  def ids
    { :my_id => @me.id, :their_id => @them.id }
  end
end 
```

**2) `Conversation`s 是否需要持久化到数据库中？**

如果`Message`看起来像下面这样，那么您可以`Conversation`通过接收一条消息然后遵循先前的消息链来初始化 a。

```
class Message < ActiveRecord::Base
  belongs_to :sender, class_name: 'User'
  belongs_to :recipient, class_name: 'User'
  belongs_to :previous_message, class_name: 'Message'
end

class Conversation
  def initialize(message)
    @message = message
  end

  def messages
    //use @message to follow the chain of messages
  end
end 
```

# wpf - 使用 messenger 将参数从一个视图模型传递到另一个视图模型

> ID：15409586
> 
> 赞同：4
> 
> 时间：2013-03-14T12:41:44.807
> 
> 标签：wpf, mvvm-light

每当我想从 View 模型打开一个新窗口时，通常我都会使用 messenger 。但现在我想从视图模型打开一个新窗口，并将一个对象从调用视图模型传递给被调用的视图模型。我该如何实施？在我的 viewmodelbase 类中，目前我有以下方法。

```
public void SendNotificationMessage(string notification)
        {
            Messenger.Default.Send<NotificationMessage>(new NotificationMessage(notification));
        }

        public void SendNotificationMessageAction(string notification, Action<object> callback)
        {
            var message = new NotificationMessageAction<object>(notification, callback);
            Messenger.Default.Send(message);
        } 
```

请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T13:00:36.970

你的语法看起来像这样：

```
//Subscribe
Messenger.Default.Register<OpewNewWindowMessage>(OpenNewWindowMethod);

// Broadcast
var message = new OpewNewWindowMessage();
message.ViewModel = this;
Messenger.Default.Send<OpewNewWindowMessage>(message);

// Subscribed method would look like this
void OpenNewWindowMethod(OpewNewWindowMessage e)
{
    // e.ViewModel would contain your ViewModel object
} 
```

在上面的示例中，您将创建一个名为的新类`OpewNewWindowMessage`并为其赋予属性`ViewModel`，然后您将在广播消息之前填充该值。

将`OpenNewWindowMethod()`收到消息，并可以访问`OpewNewWindowMessage.ViewModel`ViewModel 属性

从技术上讲，如果您只传递一个属性，则不需要创建消息对象，但是我通常发现，如果您创建一个消息对象而不是使用`<object>`您在您的代码。

# php - 绘制点组的功能给我一个警告或根本不绘制

> ID：15409588
> 
> 赞同：0
> 
> 时间：2013-03-14T12:41:52.617
> 
> 标签：php, random, null, warnings, pixel

以下简单代码在给定图像上生成点（这也是动态生成的），但由于未知原因，我看不到它们......

```
for ($i = 0; $i < $max; $i++)
{
  $xcoords = mt_rand(50, 450);
  $ycoords = mt_rand(50, 450);
  if ($ycoords > 300)
  {
    drawMe($red);
  }
  elseif ($ycoords > 150 && $ycoords < 300)
  {
    drawMe($green);
  }
  else
  {
    drawMe($blue);
  } 
```

这是使用颜色的代码：

```
$red = imagecolorallocate($im, 255, 0, 0);
$green = imagecolorallocate($im, 0, 128, 0);
$blue = imagecolorallocate($im, 0, 0, 255); 
```

这是 drawMe() 函数：

```
function drawMe($color)
{
  ob_start();
  imagesetpixel($im, $xcoords, $ycoords - 1, $color);
  imagesetpixel($im, $xcoords + 1, $ycoords - 1, $color);
  imagesetpixel($im, $xcoords + 1, $ycoords, $color);
  imagesetpixel($im, $xcoords + 1, $ycoords + 1, $color);
  imagesetpixel($im, $xcoords, $ycoords, $color); // main dot !!!
  imagesetpixel($im, $xcoords, $ycoords + 1, $color);
  imagesetpixel($im, $xcoords - 1, $ycoords + 1, $color);
  imagesetpixel($im, $xcoords - 1, $ycoords, $color);
  imagesetpixel($im, $xcoords - 1, $ycoords - 1, $color);
  return ob_get_clean();
} 
```

如果我删除 ob_start 和 ob_get_clean，我会收到警告：

```
Warning: imagesetpixel() expects parameter 1 to be resource, null given in /var/www/test.php on line 75 to 83 
```

那是 $im 和背景：

```
$im = imagecreate(640, 480);
$bg = imagecolorallocate($im, 255, 255, 255); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:47:26.473

您需要在开始之前将新的 $im 定义为新图像

你可以使用 imagick 类

```
$image = new Imagick();
$image->newImage(100, 100, new ImagickPixel('red'));
$image->setImageFormat('png'); 
```

# java - Android Edittext 中的“退格”字符 '\b' 不起作用？

> ID：15409589
> 
> 赞同：1
> 
> 时间：2013-03-14T12:41:54.573
> 
> 标签：java, android

我正在尝试查看其他人开发 android 虚拟键盘的代码。

我有一个手势 [swipeLeft] 与退格手势之一挂钩，我使用以下方法来实现它：

```
playSound(backspacePlayer); // background sound
InputConnection connection = getCurrentInputConnection();
connection.commitText("\b", 1); 
```

**我的主要问题是我可以听到退格的声音，但它没有在 EditText 中执行。我的意思是这些字符不会在 EditText 中被删除。**

我使用的代码可以吗？或者将“\ b”提交给文本是否有问题。此代码也适用于除退格之外的所有其他字符！

任何帮助都是极好的 ！阿迪特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:40:05.147

我找到了答案而没有陷入“输入连接”的麻烦

```
 keyDownUp(KeyEvent.KEYCODE_DEL) 
```

这模拟了删除键的按下！

给了我 EditText 所需的退格键！耶！

# magento - 不四舍五入的 Magento 价格格式

> ID：15409592
> 
> 赞同：0
> 
> 时间：2013-03-14T12:42:01.437
> 
> 标签：magento

我有以下价格

$价格 = 7.358;

我想要将其格式化为小数点后两位数后的以下结果

$result = 7.35 但不是以下

$结果 = 7.36;

我怎样才能在 Magento 中做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:31:56.590

您将不得不重写[Mage_Directory_Model_Currency](http://svn.magentocommerce.com/source/branches/1.7/app/code/core/Mage/Directory/Model/Currency.php)。这个类有一个`format()`方法。

**原始版本：**

```
public function format($price, $options=array(), $includeContainer = true, $addBrackets = false)
{
    return $this->formatPrecision($price, 2, $options, $includeContainer, $addBrackets);
} 
```

如果您遵循对 formatPrecision 的调用，您将看到舍入归结为`Zend_Currency`，除了精度之外，您对其没有任何影响。因此，在所有这些发生之前，您必须在 format 方法中四舍五入。

**更新后的版本：**

```
public function format($price, $options=array(), $includeContainer = true, $addBrackets = false)
{
    $price = bcdiv($price, 1, 2);
    return $this->formatPrecision($price, 2, $options, $includeContainer, $addBrackets);
} 
```

请注意，您永远不应该编辑核心文件。进行此更改的一种快速而肮脏的方法是将文件复制`app/code/core/Mage/Directory/Model/Currency.php`到`app/code/local/Mage/Directory/Model/Currency.php`并修改此副本。但推荐的“Magento 方式”是重写类。如果您不知道该怎么做，请查看“Magento 模型重写”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-10T11:39:56.690

根据您希望发生这种情况的位置，您可以修改显示模板而不是使用核心代码。即，如果在目录/产品视图页面上，您可以将目录/产品/价格.phtml 移动到您的主题文件夹并创建格式化功能。

# bash - 使用 hexdump 或 xxd 等 shell 实用程序打印十六进制 Unicode 代码点

> ID：15409595
> 
> 赞同：4
> 
> 时间：2013-03-14T12:42:16.530
> 
> 标签：bash, unicode

Bash 4.2 和 zsh 支持`echo $'\u30a2'`，但是有没有使用通用 shell 实用程序的替代方法？

```
$ ruby -e 'puts ARGV[0].chars.map{|c|c.ord.to_s(16)}.join(" ")' aäア
61 e4 30a2 1d400 
```

这不适用于 U+10000 或其上方的字符：

```
$ printf %s aäア | iconv -f $(locale charmap) -t UTF-16BE | xxd -p
006100e430a2d835dc00 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-02T08:48:16.040

[我在https://raw.github.com/lhunath/scripts/master/bash/bashlib/bashlib](https://raw.github.com/lhunath/scripts/master/bash/bashlib/bashlib)找到了这个函数：

```
hex() { 
  printf '%x' "'$1"
} 
```

更多示例：

```
$ printf %x\\n \'ア
7fc2
$ LC_CTYPE=C printf %x\\n \'ア
e3
$ printf %s $'  \n\n\\'|while IFS= read -r -d '' -n1 c;do printf %x\\n "'$c";done
20
20
a
a
5c
$ printf %s aäア|while IFS= read -r -d '' -n1 c;do printf '%s %x\n' "$c" "'$c";done
a 61
ä e4
ア 30a2
 1d400 
```

这`printf`适用于 bash 4.2 和 zsh 4.3.11 中的内置函数，但不适`printf`用于 bash 3.2 中的内置函数或 OS X 的`/usr/bin/printf`.

`-n1`一次读取一个字符，并将`-d ''`分隔符从 更改`\n`为`\0`，因此`read`还包括换行符（但不包括 NUL 字符）。`read`POSIX 指定的唯一选项是`-r`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-02T14:54:07.553

一个简单的 Python 2.7 脚本就可以完成这项工作（称之为 a.py）[下面的脚本假定您的 shell 编码默认为 UTF8 - 如果需要，您可能必须更改它]：

```
import sys

for i in unicode(sys.argv[1], 'utf-8'):
    print i.encode("utf_16_be").encode("hex") 
```

测试：

```
$ python a.py aäア
0061
00e4
30a2
d835dc00 
```

# java - 使用 IntelliJ 调试 GWT

> ID：15409596
> 
> 赞同：3
> 
> 时间：2013-03-14T12:42:19.023
> 
> 标签：java, gwt, intellij-idea

我是一个关于如何使用 IntelliJ 调试 GWT 的问题。

我有一个可以在 IntelliJ 中调试的 maven GWT 项目。但是，一旦我更改了一些 GWT 类，我必须手动编译它才能使其生效。

我知道在 Eclipse 中，一旦更改了 GWT 类，通过刷新网页将自动更新生成的 javascript。但 IntelliJ 似乎并没有这样做。

我是不是配置错了什么？有人用 IntelliJ 开发 GWT 吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T03:50:28.293

调试 GWT 代码的常用方法是使用“进程外托管模式”，其中不涉及 javascript，而是托管模式通过扩展与浏览器通信并指示如何更改 DOM。

请参阅[https://code.google.com/p/google-web-toolkit/wiki/UsingOOPHM](https://code.google.com/p/google-web-toolkit/wiki/UsingOOPHM)。

如果您使用它，IntelliJ 就像其他任何服务器一样运行/调试 Java 服务器。保存时，应将项目中类的更改热加载到已调试的 JVM 中（我假设 IntelliJ 支持）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:55:29.203

我正在使用 IDEA 12 开发 GWT 应用程序。在我看来，它比 Eclipse 效果更好。尝试将项目作为 GWT 模块运行。它速度更快，无需额外设置即可调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T16:08:53.050

请注意，GWT 集成仅包含在 IntelliJ 的终极版中。对于社区版，让 GWT 调试正常运行有点棘手。但这是可行的。

我们在这里做的一件事是分解战争，然后在战争源文件夹和分解的战争文件夹之间添加一个 NTFS 连接点。然后，这将使文件保持同步，并允许客户端各个部分的动态更新。

IE。/path/to/source/war -> /path/to/target/exploded/war 之间的链接

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T03:43:51.310

**GWT Eclipse dev 101** - 当您在刷新页面时更改 java 类时，Eclipse 不会更新 javascript。我对此深信不疑。

仅当您执行 GWT 编译器时，GWT 才会更新 eclipse/idea/console 中的 javascript。我们倾向于避免，因为它会扼杀大型项目的生产力。

请说明您使用的是哪个 Intellij idea 版本的社区版或终极版。GWT 终极版带有“本机”gwt 插件，开箱即用。

如前所述，我的 trappski 使用社区版有点棘手，并遵循他的方法。

# css - CSS3滤镜模糊关键帧动画

> ID：15409605
> 
> 赞同：6
> 
> 时间：2013-03-14T12:42:40.750
> 
> 标签：css, animation, filter, blur, keyframe

我想要完成的是图像悬停上的短高斯模糊动画。有点像将焦点放在相机上。（聚焦-模糊-聚焦）。

这是我到目前为止得到的：

```
@-webkit-keyframes image_blur {
    0% { -webkit-filter: blur(0px);}
    50%; { -webkit-filter: blur(5px);}
    100% { -webkit-filter: blur(0px);}
}

#image {
    width    : 290px;
    height   : 160px;
    background: url(images/test1.jpg);
}

#image:hover {
    -webkit-animation: image_blur 2s; 
} 
```

这似乎不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T12:57:29.253

去除那个 ”;” 在您的`@-webkit-keyframes`.
它会起作用的。

```
0% { -webkit-filter: blur(0px);}
50%; { -webkit-filter: blur(5px);}
100% { -webkit-filter: blur(0px);} 
```

改用这个

```
0% { -webkit-filter: blur(0px);}
50% { -webkit-filter: blur(5px);}
100% { -webkit-filter: blur(0px);} 
```

# java - 将 WrappedString 和 String 添加到 HashSet 之间的区别

> ID：15409606
> 
> 赞同：1
> 
> 时间：2013-03-14T12:42:45.730
> 
> 标签：java, collections, hashset

请帮助我确定像这样将 WrappedString 添加到 hashSet 之间的区别：

```
public class WrappedString {
private String s;
 public WrappedString(String s) { this.s = s; }
 public static void main(String[] args) {
 HashSet<Object> hs = new HashSet<Object>();
 WrappedString ws1 = new WrappedString("aardvark");
 WrappedString ws2 = new WrappedString("aardvark");
 hs.add(ws1); hs.add(ws2);
 System.out.println(hs.size()); // outputs 2

   }

} 
```

以及以下内容：

```
public class WrappedString {
private String s;
 public WrappedString(String s) { this.s = s; }
 public static void main(String[] args) {
 HashSet<Object> hs = new HashSet<Object>();
 String s1 = new String("aardvark");
 String s2 = new String("aardvark");
 hs.add(s1); hs.add(s2);
 System.out.println(hs.size()); // outputs 1
   }

} 
```

我知道任何对象在 hashSet 中只存在一次，并且类型的两个实例`WrappedString`被认为是不同的变量，尽管它们具有相同的值，但是为什么它以不同的方式对待 String 类型的两个实例（尽管它们是两个不同的，但仅存储一个实例对象）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T12:45:38.007

主要区别在于`String`实现`equals`，而您`WrappedString`没有。因此，从 HashSet 的角度来看，您可以添加任意数量`new String("aardvark")`的内容，它们都将被视为相同（因为`new String("aardvark").equals(new String("aardvark"))`是真的）并且只会添加一个。

而两个不同的`WrappedString`实例将不相等，即使它们包含的字符串相等（因为`new WrappedString("aardvark").equals(new WrappedString("aardvark"))`为假），所以集合不会将它们视为重复。

如果你想要一个类似于 的行为`String`，你需要在你的类中实现`equals`和。`hashcode``WrappedString`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:45:55.330

WrappedString 类中的覆盖`equals`和`hashcode`方法，那么它将按照您期望的方式运行。WrappedString 是不同的对象，即使这些对象包含相同的字符串对象。添加哈希码和等于，如下所示。

```
public class WrappedString {
    private String s;

    public WrappedString(String s) {
        this.s = s;
    }

    public static void main(String[] args) {
        HashSet<Object> hs = new HashSet<Object>();
        WrappedString ws1 = new WrappedString("aardvark");
        WrappedString ws2 = new WrappedString("aardvark");
        hs.add(ws1);
        hs.add(ws2);
        System.out.println(hs.size()); // outputs 2

    }
    @Override
    public boolean equals(Object obj) {
        WrappedString ws = (WrappedString)obj;
        return this.s.equals(ws.s);
    }
    @Override
    public int hashCode() {
        return this.s.hashCode();
    }

} 
```

现在哈希集的大小将是 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:47:05.487

考虑“等于”方法。对于字符串：`new String("aardvark").equals(new String("aardvark"))`将返回`true`，并且哈希集不会添加两个相等的实例。在您的包装器上，您没有实现 equals 方法，因此比较地址并且两个实例不相等 - 因此它们都插入到集合中。

# php - 将字符串转换为 utf-8

> ID：15409614
> 
> 赞同：1
> 
> 时间：2013-03-14T12:43:01.223
> 
> 标签：php, utf-8, pdo

我一直在这里阅读很多答案，但无论我尝试什么，我都无法解决这个问题。

**问题**

我有正在导入数据库的数据。此数据具有特殊字符，例如 ' “ ” - é（但不仅限于这些字符）。

显示数据时，它们显示为黑色菱形。

**我试过的**

我遵循了这个： http: [//kunststube.net/frontback/](http://kunststube.net/frontback/)但是当我进行导入时，它只是在第一个 ' 处中断并忽略字符串的其余部分（仍然正确插入）。

我尝试使用 转换字符串`utf8_encode()`，我尝试过`htmlentities()`并且尝试过使用`mb_convert_encoding()`所有不同的结果，但实际上并没有完全解决问题，有些删除了一些字符，有些在 IE 上给出了 lil 方块等。

**我认为问题是**

我认为问题在于不知道原始编码，所以我运行`mb_detect_encoding()`它并没有返回任何内容 - 那是什么意思？我猜它无法检测到编码。

所以我正在努力解决的是如何在不破坏字符串的情况下将其编码为 utf8，以便我可以正确存储它。

**观察**

如果我设置`header('Content-Type: text/html; charset=utf-8');`我们会得到黑色菱形，但如果我设置`header('Content-Type: text/html; charset=ISO-8859-1');`它会正确显示。

所以知道 - 我应该在 ISO-8859-1 中显示我的整个网站**还是**应该将该字符串转换为 utf8 .. 是否有偏好如何做到这一点？

当数据库是 latin1 并且我没有在 PDO 连接中包含字符集时，数据已正确存储在数据库中

**其他**

我正在使用 PDO

```
new PDO("mysql:host=" . $G['PDO_HOST'] . ";dbname=" . $G['PDO_DB'] . ";charset=utf-8", $G['PDO_USER'], $G['PDO_PASS'],array(PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES 'utf8'")); 
```

问题字符串的副本：

```
Informed by his eclectic background and varied passions for décor, travel, entertaining and food, Nathan Turner’s American Style will appeal to readers looking to incorporate Turner’s stylish and relaxed aesthetic into their home and life. 
```

Any input on this would be really appreciated - been struggling for a while on this

**UPDATE**

Here is my table

```
CREATE TABLE IF NOT EXISTS `page` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `title` varchar(255) NOT NULL,
  `url` varchar(255) NOT NULL,
  `summary` text NOT NULL,
  `content` text NOT NULL,
  `search` text NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=937 ; 
```

So the table is utf8 format.

I have changed the DB connection to:

```
$dbc = new PDO("mysql:host=" . $G['PDO_HOST'] . ";dbname=" . $G['PDO_DB'], $G['PDO_USER'], $G['PDO_PASS']);
$dbc->query("SET NAMES utf8"); 
```

As "Your Common Sense" pointed out about the PHP version.

But now I have this all set, it cuts of the insert at the first ’</p>

String: `With a style that is accessible and chic, Turner’s aesthetic is Nate meets Colin and the Magazine.`

Stored: `With a style that is accessible and chic, Turner`

**UPDATE 2**

I am using prepared statements.. so the content that is breaking is here:

```
$stmt->bindParam(':content',$content, PDO::PARAM_STR); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:45:17.057

```
charset=utf8
           ^ should be NO dash here 
```

Also, if your PHP version below 5.3.6, it won't work anyway, `SET NAMES utf8` query have to be run after connect.

As for the inserts, them doesn't cut anything. It's your HTML fields.

to output an HTML attribute, always use [htmlspecialchars](http://php.net/htmlspecialchars) with ENT_QUOTES flag.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-14T13:25:12.787

In database set the particular field of the collation type as 'utf8_general_ci' in the table.

# html - 如何使用 iTextSharp 从 HTML 创建 PDF/A 文件

> ID：15409617
> 
> 赞同：0
> 
> 时间：2013-03-14T12:43:06.760
> 
> 标签：html, itextsharp, pdfa

我想使用 iTextsharp 从 HTML 创建 PDF/A，但是很难创建验证为 PDF/ 的内容。这是我用来测试功能的代码。需要改变什么才能得到我想要的？

```
 static void Main(string[] args)
    {
        //create stylesheet (used to change font from default Helvetica in order to embed font in PDF/A)
        var styles = new StyleSheet();
        var fontPath = Environment.GetEnvironmentVariable("SystemRoot") + "\\fonts\\verdana.ttf";
        FontFactory.Register(fontPath);
        styles.LoadTagStyle("body", "face", "Verdana");

        var pdFdocument = new Document(PageSize.A4);
        const string strPdFpath = @"MyPDF.pdf-PDFX1A2001";
        var sr = new StringReader("<html><head></head><body><h1>Dette er en HTML-fil</h1><p>Dette er litt tekst i html-fila</p><br /><p>Dette er enda ett avsnitt. iTextSharp ser ut til å fungere greit...</p></body></html>");

        var htmlParser = new HTMLWorker(pdFdocument, null, styles);
        PdfWriter writer = PdfWriter.GetInstance(pdFdocument, new FileStream(strPdFpath, FileMode.OpenOrCreate));
        writer.PDFXConformance = PdfWriter.PDFX1A2001;
        pdFdocument.Open();
        htmlParser.Parse(sr);
        pdFdocument.Close();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:05:30.653

`PDFX1A2001`需要 1.3 版或更低版本的 PDF，但`PDFXConformance`单独设置属性并不能做到这一点，您必须手动进行：

```
writer.SetPdfVersion(PdfWriter.PDF_VERSION_1_3); 
```

此外，您还需要调用`CreateXmpMetadata()`“应用”元数据。

```
writer.CreateXmpMetadata(); 
```

[大多数](https://stackoverflow.com/a/8719794/231316) [人](https://stackoverflow.com/a/2701332/231316)似乎在关闭文档之前就这样做了，但我不知道这是否是一项要求。

# spring - Spring Security 3.1 - 多个身份验证管理器 - 执行操作取决于成功的方法

> ID：15409618
> 
> 赞同：0
> 
> 时间：2013-03-14T12:43:08.570
> 
> 标签：spring, spring-security, spring-ldap

我的 app-security.xml 上有这个，如果用户登录 LDAP，我想做一些任务，如果用户登录 DB，我想做其他任务，等等。

```
 <ldap-server url="ldap://192.168.0.55:389/dc=fluxit,dc=com,dc=ar"
                   manager-dn="uid=admin,ou=system" 
                   manager-password="infra123" 
  />

    <authentication-manager>

        <authentication-provider user-service-ref='databaseAuthManager'>
            <password-encoder ref="encoder" />
        </authentication-provider>

        <authentication-provider>
            <password-encoder ref="encoder" />
            <user-service id="textFileAuthManager" properties="classpath:auth/users.properties" />
        </authentication-provider>

        <ldap-authentication-provider
            user-search-filter="(uid={0})" user-search-base="ou=users"
            group-search-filter="(uniqueMember={0})" group-search-base="ou=groups"
            group-role-attribute="cn" role-prefix="ROLE_">
        </ldap-authentication-provider>

    </authentication-manager> 
```

我可以在春天这样做吗？我已经在谷歌上搜索了一段时间，但没有找到答案。

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:11:50.927

我认为您的要求的困难在于身份验证管理器不保留特定身份验证提供者是实际验证请求的信息。如果您有那条信息，您可以轻松地编写一个自定义`AuthenticationSuccessHandler`来实现某些行为，该行为取决于成功的身份验证方法。

如果你真的需要这个功能，我可以提出一个可能的解决方案：实现一个 custom `ProviderManager`，它将使用一个装饰器包装身份验证对象，该装饰器保存对成功身份验证提供程序的引用。由于 的实现`ProviderManager`不提供可用于此的扩展点，因此您基本上需要复制整个类以进行所需的增强。然后您将不得不在`<authentication-manager>`不使用安全命名空间的情况下重写配置的整个部分，因为它不允许您替换默认`AuthenticationManager`实现。

这既不是太优雅也不是很简单的解决方案，所以可能有一些更好的方法来做到这一点。

# java - 在菜单栏上添加带有图像的菜单项

> ID：15409620
> 
> 赞同：0
> 
> 时间：2013-03-14T12:43:12.997
> 
> 标签：java, menuitem, zk

尝试添加带有图像且没有标签的菜单项。

```
<borderlayout> <north> <menubar>
<menuitem image="/test/image.gif" onclick="@command('doSomething')"/> <menuitem &gt;="" <="" menubar=""> </north> . . </borderlayout> 
```

如果我添加一个没有任何标签的图像，它会从两侧（右侧和底部）切割图像，如果我在标签中使用一些文本，则会显示完整的图像，

我的问题是我必须显示一个只有图像而没有文字的菜单项。我无法更改图像的大小。

以下代码有效，但我不想添加标签

```
<borderlayout> <north> <menubar>
<menuitem label="a" image="/test/image.gif" onclick="@command('doSomething')"/> <menuitem &gt;="" <="" menubar=""> </north> . . </borderlayout> 
```

有人可以知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T05:08:29.940

我不太确定这是否是你想要的。

如果您无法更改图像的大小，则必须使用 css 调整图像以适合 menuitem。

这是一个使用 css3 属性的示例`background-size`

```
<zk>
  <style>
    .shrink .z-menuitem-img{
      background-size:24px 24px;
    }
  </style>
  <menubar>
    <menu label="test">
      <menupopup>
        <menuitem sclass="shrink" image="https://www.google.com.tw/images/icons/product/chrome-128.png" />
        <menuitem                 image="https://www.google.com.tw/images/icons/product/chrome-128.png" />
      </menupopup>
    </menu>
  </menubar>
</zk> 
```

你可以看到这个例子在[ZkFiddle中运行](http://zkfiddle.org/sample/1l6tehq/7-put-a-large-image-in-menuitem)

# android - 如何在 Android 上使用 breakpad 将 dmp 文件上传到服务器？

> ID：15409621
> 
> 赞同：1
> 
> 时间：2013-03-14T12:43:13.230
> 
> 标签：android, google-breakpad

我想使用 breakpad 收集我的 Android 应用程序的 C++ 端崩溃信息。

我已经成功构建了 breakpad 工具链，并且可以正确地表示堆栈跟踪。

### 我的问题是：

如何在 Android 上将 minidump 文件上传到我的服务器？断板源代码中有解决方案吗？

或者我应该自己实现这一切？

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T02:35:01.717

可惜没有人回答这个问题……所以我只是自己实现了这个上传操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-05T04:34:39.183

您可以使用此示例代码将 breakpad 崩溃上传到曲棍球： [https ://github.com/ashtom/breakapp](https://github.com/ashtom/breakapp)

我为我的项目做了同样的事情并且工作正常。Hockey 有一个 api，您可以访问所有数据。或者你使用他们的后端。

# ios - iOS 应用程序可以共享数据吗？

> ID：15409622
> 
> 赞同：1
> 
> 时间：2013-03-14T12:43:15.530
> 
> 标签：ios

我正在开发一组可能会使用大量常见数据的应用程序，我的意思是几百 Mb 的相同核心数据集。

这类似于如果我有一组可下载的地图，并且有几个应用程序将其用于不同的事情。

iOS是否允许以任何方式在应用程序之间共享数据...我希望人们会购买多个应用程序，因为它们位于同一区域。还是拥有一个应用程序并通过应用程序内购买销售每个“应用程序”的功能的正确方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:09:41.367

您可以在 iOS 中的应用程序之间共享数据，但是，当然有限制。取决于数据量和数据本身。

您可以共享数据的方式：-

1 UIPasteBoard - 创建一个没有安全性的通用粘贴板

2 URL Scheme——要为你的应用注册一个 URL 类型，在你的应用的 Info.plist 文件中包含 CFBundleURLTypes 键

采用

```
[[UIApplication sharedApplication] openURL:
  [NSURL URLWithString:@"yourApp://yourData"]]; 
```

共享数据。

并接收数据，4.1 及更早版本的委托

```
-application:handleOpenURL: 
```

供以后使用：-

```
application:openURL:sourceApplication:annotation: 
```

3 用于在地址簿中共享的虚拟联系人

4 您甚至可以在 Keychain 上共享数据，但仅适用于 iOS 3.xxxx。

# css - 垂直对齐 div，同时保持它们以“列表样式”排序

> ID：15409627
> 
> 赞同：0
> 
> 时间：2013-03-14T12:43:39.080
> 
> 标签：css, html, alignment

我已经到了一个地步，我真的想不出任何解决这个问题的办法了。我想要实现的是：我在一些 div 中填充内容，例如从 0-10 的值。然后，在显示它们时，它们应该以响应用户窗口大小的方式列出。在大屏幕上，它应该如下所示：

```
1 | 4 | 7 | 10
2 | 5 | 8 
3 | 6 | 9 
```

在较小的屏幕上：

```
1 | 5 | 9
2 | 6 | 10
3 | 7
4 | 8 
```

我通过给 div 赋予`float: left;`属性来尝试它，它给了我这样的输出：

```
1 | 2 | 3 | 4
5 | 6 | 7 | 8
9 | 10 
```

问题是：顺序与预期输出中的不同，并且：首先填充“行”，而不是列。有谁知道解决方案如何仅使用 css 和 html 就可以实现这样的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:52:47.547

现代解决方案是 CSS 多列模块。你可以像这样使用它：

```
.content {
    -webkit-column-width: 80px;
    -webkit-column-gap: 5px;
} 
```

[http://jsfiddle.net/EN92F/](http://jsfiddle.net/EN92F/)

检查[支持](http://caniuse.com/#feat=multicolumn)，IE10+。

如果浏览器（例如 IE8）不支持它，它会优雅地降级为单列布局，就像这里[http://jsfiddle.net/EN92F/1/](http://jsfiddle.net/EN92F/1/)一样，这还不错。

进一步阅读[使用 CSS 多列布局](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_multi-column_layouts)。

# cocoa - 核心动画动作过渡：如何正确

> ID：15409635
> 
> 赞同：0
> 
> 时间：2013-03-14T12:44:12.203
> 
> 标签：cocoa, core-animation

我在主窗口的内容视图中制作了一个带有一个视图的测试项目。窗口有两个按钮：出现和消失。我想要在按下显示按钮时为视图外观设置动画，并在按下消失按钮时为消失设置动画。我想通过图层操作来做到这一点。换句话说，我想在每次从超级视图中添加或删除视图时制作动画。所以，在代码中我只想写 [parent addSubview:view] 或 [view removeFromSuperview] 并且动画应该在那一刻起作用。所以，Layer Actions 似乎符合我的需要。

这是应用程序屏幕截图和[源代码](https://www.dropbox.com/s/awtqieukeqc5eul/TestTransitionAnimation.zip)（XCode 4.6）：

![在此处输入图像描述](../Images/4a00e81e78d983337dc2b414039fb8b0.png)

**这是我所做的：**

我创建一个将出现/消失的视图并添加图层操作：

```
_coloredView = [[ColoredView alloc] initWithFrame:NSMakeRect(0, 0, 200, 200)];
_coloredView.bgColor = [NSColor yellowColor];
_coloredView.wantsLayer = YES;

// making appear transition from left

CATransition *appearTransition = [CATransition animation];
[appearTransition setDuration:2];
[appearTransition setType:kCATransitionPush];
[appearTransition setSubtype:kCATransitionFromLeft];
[_coloredView.layer addAnimation:appearTransition forKey:kCAOnOrderIn]; 
```

然后当点击出现按钮时，我打电话

```
[contentView addSubview:self.coloredView]; 
```

当点击消失时，我调用：

```
[self.coloredView removeFromSuperview]; 
```

并且似乎某些部分有效。黄色矩形第一次出现时应如此。但是，这里列出了一些非常奇怪的事情：

1.  每次单击按钮时我都应该调用`addAnimation:forKey:`（在视图消失后），因为第一次出现动画后将不再起作用。

2.  消失根本不起作用（如果我在视图初始化之后或按下消失按钮之前尝试添加代码）

3.  当我尝试通过动画器添加子视图时，我的过渡不起作用 - 只显示默认的淡入动画。

4.  似乎在从左到右的移动过程中某种褪色的作品。当您将持续时间设置为更大的值时，它是可见的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:20:11.970

Try `@"subviews"` instead of `kCAOnOrderIn`

# c# - 在 MSAccess 中禁用外键约束

> ID：15409636
> 
> 赞同：1
> 
> 时间：2013-03-14T12:44:18.267
> 
> 标签：c#, sql, ms-access, foreign-keys

在数据传输期间，我想禁用/启用

*   表上的所有外键

*   所有表上的所有外键

通过**MSAccess**中的查询。我将从 C# 模块调用查询它。会有批量插入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:56:29.613

你可以从做你的事情中删除你的关系`MSysRelationships`，确保它都是有效的，然后重新创建记录`MSysRelationships`。

不过这似乎很难。您故意将不良数据放入带有约束的表中。为什么不将数据放入与具有约束的表具有相同设计的临时表中，然后根据您在关系中建立的规则使用插入查询将记录移动到规范表中。这样一来，您就永远不会放弃关系，也不会冒着用坏数据毁坏您的表的风险。

# javascript - 如何在一个范围内执行 JS 代码的不同部分

> ID：15409639
> 
> 赞同：3
> 
> 时间：2013-03-14T12:44:25.480
> 
> 标签：javascript, scope

我有几个脚本块相互依赖。我需要在一个范围内执行它们。

我的尝试：

```
var scopeWrapper = {}; 

with(scopeWrapper) {
    (function() {
        this.run = function(code) {
            eval(code);
        };
    }).call(scopeWrapper);
}

scopeWrapper.run('function test() { alert("passed"); }');
scopeWrapper.run('test();'); 
```

我收到“未定义测试”错误。似乎代码是在不同的范围内执行的。为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T12:47:34.763

**编辑：** [Bergi](https://stackoverflow.com/questions/15409639/how-to-execute-different-partsof-the-js-code-in-one-scope/15409716#comment21790093_15409716)指出我原来的答案是错误的，他是正确的。由于`eval`在其自己的范围内运行，并且函数构造函数仍然根据[规范](http://es5.github.com/#x10.4.2)在函数范围内运行，这两者都不可能。

虽然我自己用 node.js 做了几次这样的事情，使用的`vm`模块可以让你更精细地控制代码的执行位置，但似乎浏览器需要不同的方法。

以这种方式共享变量的唯一方法是在 JavaScript 执行的全局范围内（可能在 iframe 中）这样做。你可以做到这一点的一种方法是脚本标签注入。

```
function run(code){
    var sc = document.createElement("script");
    sc.setAttribute("type","text/javascript");
    sc.innerHTML = code;
    document.body.appendChild(sc);
}

run("var x = 5");
run("document.write(x)"); 
```

（[这里是这个代码在行动](http://codepen.io/anon/pen/exynf)）

至于范围包装器，而不是将它们注入到同一帧中，而是将它们注入另一个`iframe`. 这会将他们的窗口对象范围限定为该 iframe，并允许您共享上下文。

我为我之前的回答谦虚地道歉，我误读了规范。我希望这个答案对你有所帮助。

我将之前的答案留在这里，因为我仍然相信它提供了一些关于构造函数如何工作`eval`的见解`Function`。

* * *

在非严格模式下运行代码时，`eval`在页面的当前上下文中运行函数声明完成后，它声明的范围会消失，函数也会随之消失。

考虑使用[Function 构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function#Example.3A_Specifying_arguments_with_the_Function_constructor)，然后`.call`ing 它

在你的情况下，这将是这样的：

```
var scopeWrapper = {}; 
scopeWrapper.run = function(code){
    var functionToRun = new Function(code);
    functionToRun.call(scopeWrapper);
}
scopeWrapper.run('this.test = function() { alert("passed"); }');
scopeWrapper.run("this.test()") 
```

这是直接[来自规范的参考：](http://es5.github.com/#x10.4.2)

> 如果没有调用上下文或者如果 eval 代码没有通过对 eval 函数的直接调用 (15.1.2.1.1) 进行评估，则初始化执行上下文，就好像它是使用 eval 代码作为 C 的全局执行上下文一样如 10.4.1.1 中所述。

如果此代码在 node.js 中运行，请考虑使用[vm](http://nodejs.org/api/vm.html)模块。另请注意，这种方法仍然不安全，因为它允许您运行的代码更改您的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:54:37.713

`test`仅存在于`this.run`且仅在调用时：

```
// global scope
(function(){
  // local scope (equivalent of your "run" function scope)
  eval('function f(){};');
  console.log(f); // prints "function f(){}"
})();
console.log(f); // prints "ReferenceError: f is not defined" 
```

每次调用`run`都会创建一个新的范围，其中每个`code`都单独评估。

# html - 使用负边距使块级元素位于其内容区域之外

> ID：15409647
> 
> 赞同：1
> 
> 时间：2013-03-14T12:44:46.917
> 
> 标签：html, css, mobile, margin

我需要使块级元素位于其内容区域之外。内容区域周围有 10px 的边距；这意味着（如预期的那样）其中的项目周围有 10 像素的边缘。我需要消除这个边缘，但保留 10px 的边距（因为它在网站的其他地方需要。）

我整理了一个[颜色编码的 JSFiddle](http://jsfiddle.net/SxbZe/)来提供帮助，这更有意义。本质上，保持 HTML 和 CSS 的边距不变，我需要我的红色 h2 扩展以触及视口的任一边缘，就好像它们是 100% 一样。

如何实现？我知道使用负边距是可能的，但我似乎无法让它发挥作用。

```
<div class="contentMain">
<div class="mobCategory">
    <h2><a href="#">Item one</a></h2>
    <h2><a href="#">Item two</a></h2>
    <h2><a href="#">Item three</a></h2>
</div> 
```

```
body{
        background-color:orange;
    }
    .contentMain{
        background-color:olive;
        margin:10px;
    }

    .mobCategory h2 a{
        background-color:red; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:55:40.667

将负边距添加到您的 h2：

[http://jsfiddle.net/SxbZe/6/](http://jsfiddle.net/SxbZe/6/)（注意正文的边距设置为 0）

```
.mobCategory h2 {
    margin-left: -10px;
    margin-right: -10px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:51:47.263

您可以通过添加负边距和填充来抵消差异来破解它：

```
.mobCategory h2 a {
    margin-left: -10px;
    padding-right: 20px;
} 
```

[JSFiddle 示例](http://jsfiddle.net/SxbZe/2/)。

# asp.net - 文本框自动回发

> ID：15409655
> 
> 赞同：0
> 
> 时间：2013-03-14T12:44:59.447
> 
> 标签：asp.net, user-controls, updatepanel, postback, autopostback

我有一个自定义的 asp.net 用户控件，其中有一个更新面板。在此更新面板中，我拥有向用户显示的所有控件和内容。在这些控件中有两个文本框，它们的 AutoPostback = true。这是因为当它们的值改变时，页面的结构也会随之改变。这可以按要求工作，但是当我快速连续修改两个文本框时，第一个自动回发工作，而第二个不触发。似乎在进行第一次回发时，任何其他尝试的回发都将被忽略。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:29:38.440

此行为是设计使然。通常的方法是使用`UpdateProgress`控件在回发过程中禁用页面上的用户输入。

或者，您可以添加自己的更智能`onchange`地调用的事件处理程序`__doPostBack()`（通过使用计时器等），以避免针对您的特定场景出现此问题。您也可以尝试在提交新回发之前中止任何回发过程。

可能有用的资源： http: [//www.dotnetcurry.com/ShowArticle.aspx? ID=176](http://www.dotnetcurry.com/ShowArticle.aspx?ID=176)

# jquery - 在 jQuery 中传递变量以更改对话框标题

> ID：15409658
> 
> 赞同：0
> 
> 时间：2013-03-14T12:45:12.663
> 
> 标签：jquery, jquery-ui

我正在尝试设置一个对话框，我希望将按下的按钮的名称转移到对话框中，但我不知道该怎么做。

到目前为止，我有：

```
$(document).ready(function(){
$("#x").live('click', function(){
 var name = $(this).attr('name');  //want to pass this to the next jquery
 $('#dialog_box').dialog("open");
});
var input = $("#input");    
$("#dialog_box").dialog({
    autoOpen: false,
    resizable: false,
    height:180,
    width: 350,
    modal: true,
    buttons: {
        "Update": function(){
            alert(name);
        }
    }
  });
}); 
```

另外，一旦转移以更新对话框的标题（下面的标记），我将如何使用该变量？

```
<div id="dialog_box" title="name variable here">
 <form id="dialog_form" name="dialog_form">
  <fieldset>
   <input type="text" name="input" id="input"/>
  </fieldset>
 </form>                
</div> 
```

任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:47:33.287

请使用合适的名称更改文本框 ID。

试试这样。

```
var titleValue=$("#input").val();
$( "#dialog_box" ).dialog({ title: titleValue }); 
```

或者您可以像这样覆盖默认值

```
$("#dialog_box").dialog("option", "title", $('#titleText').val()); 
```

按钮单击处理程序。

```
 $('#btnOpendialog').on('click', function (e) {
     e.preventDefault();
     $("#dialog_box").dialog('open');
     $("#dialog_box").dialog("option", "title", $('#titleText').val()); // to change the dialog title. 

 }) 
```

[工作演示](http://jsfiddle.net/qmtju/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:59:41.370

首先`.live()`不推荐使用，我建议使用`.on()`和尝试`.data()`方法

```
$(document).on('click', '#x', function(){
    $('#dialog_box').data('name', $(this).attr('name'));  //passed to dialog
    $('#dialog_box').dialog("open");
}); 
```

在对话框中调用

```
 $("#dialog_box").dialog({
      autoOpen: false,
      resizable: false,
      height:180,
      width: 350,
      title: $(this).data('name'), //will set dialog title 
      modal: true,
      buttons: {
        "Update": function(){
            alert($(this).data('name')); //should return input value
        }
    }
  });
}); 
```

# c# - 一个有问题的内部进入压倒一切的 Equals

> ID：15409659
> 
> 赞同：0
> 
> 时间：2013-03-14T12:45:14.467
> 
> 标签：c#, overriding, equals

遵循[覆盖 Equals() 和运算符 == 的指南（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173147.aspx)，在覆盖 equals(object) 和 equals(type) 时覆盖 gethashcode 似乎是可取的。

据我了解，关于什么是覆盖 Equals 的最佳实现存在无休止的讨论。但是，我仍然希望更好地理解 Equals 概念并自行决定。

我的**问题**可能有点无聊，但我们开始吧：

*   *Equals(object) 和 Equals(type) （独立于给定参数）*之间的主要区别是什么？

据我了解*（我可能完全错了，所以这同时是一个问题）*：

> Equals(object) 是一种内置方法，它（默认情况下）查看对象引用是否相同。Equals(Type) 是您创建的本地方法。所以事实上，你在那个类中拥有的是带有 2 个重载的 Equals 方法。

*   为什么他们要两次检查财产平等？

在*等于（对象）*：

```
 return base.Equals(obj) && z == p.z; 
```

并在*equals(type)*中：

```
 return base.Equals((TwoDPoint)p) && z == p.z; 
```

*   为什么建议实现 Equals(type) 方法？

*   我的大部分问题都在我在问题 1 中的陈述中被说唱。所以请注意任何错误或误导性的论点。另外，请随时添加任何信息，它肯定会有所帮助。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:49:35.987

首先让我们区分这两种方法

[`object.Equals()`](http://msdn.microsoft.com/en-us/library/system.object.equals.aspx)是根上的一个方法，`object`它被标记为`virtual`，因此可以在派生类中被*覆盖。*

[`IEquatable<T>.Equals`](http://msdn.microsoft.com/en-us/library/ms131190.aspx)是通过*实现*[`IEquatable<T>`](http://msdn.microsoft.com/en-us/library/ms131187.aspx)接口得到的方法。

后者用于确定泛型集合内的相等性；所以说文档：

> IEquatable<T> 接口由 Dictionary<TKey、TValue>、List<T> 和 LinkedList<T> 等泛型集合对象在 Contains、IndexOf、LastIndexOf 和 Remove 等方法中测试相等性时使用。应该为可能存储在通用集合中的任何对象实现它。

前者用于确定其他地方的平等。

因此，在基础工作到位的情况下，让我们尝试回答您的一些具体问题

> Equals(object) 和 Equals(type) 之间的主要区别是什么（独立于给定参数）？

一个对任何类型进行操作，另一个比较相同类型的实例

> 为什么他们要两次检查财产平等？

他们没有，通常只使用一个。然而，一个实现经常在内部调用另一个实现

> 为什么建议实现 Equals(type) 方法？

答案在上面 - 如果您打算将对象存储在通用集合中

附带说明一下，这可能有助于您理解这一点，相等检查的默认行为是检查*引用*是否相同（即，一个对象与另一个对象完全相同）。经常覆盖/实现不同的相等逻辑用于比较对象字段中的某些数据（类似于您的示例`z == p.z`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-28T22:22:42.960

重载之间的一个区别是，如前所述，一个将在将对象与编译时已知为同一类型的事物进行比较时调用，而另一个将在所有其他情况下调用。另一个没有提到的非常重要的区别是，它`Equals(ownType)`不仅作用于 的事物`ownType`，而且作用于隐含可转换为 的事物`ownType`。因此，`Equals`不能期望在可转换类型的对象之间实现等价关系，除非强制其操作数为 type `Object`。例如，考虑

```
(12.0).Equals(12); 
```

将整数值 12 转换为`Double`值 12.0。由于传递的值的类型和值与被调用`12.0`的方法精确匹配，因此返回.`Equals``true`

```
(12).Equals(12.0); 
```

Because `Double` is not implicitly convertible to `Int32`, passes the `Double` value as `Object` instead. Since the `Double` does not match the type of the `12` whose `Equals` method is being invoked, the method returns `false`.

The virtual method `Equals(Object)` implements an equivalence relation; in many cases involving implicit type conversions, the type-specific methods cannot be expected to do so.

# python - 访问列表中字典中的项目

> ID：15409660
> 
> 赞同：0
> 
> 时间：2013-03-14T12:45:16.330
> 
> 标签：python, list, dictionary, geolocation

我目前正在使用 python（在 Ubuntu 上）开发一个可视化跟踪路由程序。我正在使用 pygeoip 来获取坐标（以及其他信息）。我将每个 IP 的数据存储在一个列表（listcoor）中。我遇到的问题是在将特定字典项放入 listcoor 后访问它

```
def vargeolocating(matchob): # matchob is a list of IPs
    print "Geolocating IP addresses"
    gi = GeoIP.open("/usr/share/GeoIP/GeoLiteCity.dat",GeoIP.GEOIP_STANDARD)
    i = 0
    listcoor = []
    while ( i < len(matchob)):
        holder = gi.record_by_addr(matchob[i])
        if holder is None:# for local addresses
            print "None"
        else:       
            listcoor.append(holder) 
        i = i + 1 
    print holder['longitude'] # Prints out the last longitude
    print listcoor[12] # Prints all information about the last IP (this longitude matchs the above longitude
    print listcoor[12['longitude']] # Should print just the longitude, matching the two longitudes above 
```

最后打印显示错误“TypeError: 'int' object has no attribute ' **getitem** '”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:46:45.407

您正在尝试索引`12`，但无法索引整数；移动索引语法以索引上索引的*结果*：`12``listcoor`

```
listcoor[12]['longitude'] 
```

正在发生的事情是这样的：

```
>>> 12['longitude']
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: 'int' object is unsubscriptable 
```

# c# - 在不覆盖 exe 文件的情况下更新游戏

> ID：15409672
> 
> 赞同：0
> 
> 时间：2013-03-14T12:45:47.657
> 
> 标签：c#, dll, window

我想做的是制作一个游戏和一个更新游戏的启动器。

此启动器将更新游戏而不覆盖游戏的 .exe 文件。

我认为这可以通过使用 dll 来实现，但我不知道在哪里学习这个......

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:45:05.997

在我看来，您希望在不修改可执行文件（无论是游戏还是其他程序）的情况下修改正在运行的进程的内存。

您可以使用属于 kernel32.dll 库的 ReadProcessMemory 和 WriteProcessMemory API 调用来读取和写入正在运行的进程的内存。您还需要使用 OpenProcess 创建进程的有效句柄，然后才能读取和写入其内存。

根据您使用的语言，访问它们非常简单。在 C# 中，您需要使用以下语法声明一个 Dll 导入：

```
[DllImport("kernel32.dll")]
public static extern IntPtr OpenProcess(uint dwDesiredAccess, bool bInheritHandle, int dwProcessId);

[DllImport("kernel32.dll")]
public static extern bool ReadProcessMemory(IntPtr hProcess, int lpBaseAddress, ref byte[] buffer, int size, ref int lpNumberOfBytesRead);

[DllImport("kernel32.dll")]
public static extern bool WriteProcessMemory(IntPtr hProcess, int lpBaseAddress, ref byte[] buffer, int size, ref int lpNumberOfBytesWritten); 
```

然后，您使用 OpenProcess 获取进程的句柄，并使用 ReadProcessMemory 和 WriteProcessMemory 适当地读取和写入内存。

您可以使用 OLLYDBG 之类的调试工具来帮助您找出要编辑的内存位置。另一个很棒的工具是 ArtMoney，它允许您监控和跟踪运行过程中的值，以识别存储游戏信息的位置，例如金钱、健康等。

如果您需要进一步的帮助，添加一些关于您正在做什么的附加信息可能会很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:56:35.833

有许多资源可用于学习如何制作 dll 项目。

从微软教程开始 - [http://msdn.microsoft.com/en-us/library/ms235636(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms235636(v=vs.100).aspx)

从一开始就仔细考虑游戏的设计。为了使它更易于管理和更容易更新，您可能希望将您的游戏分成核心部分，即物理、渲染等，并将它们作为 dll。

如果以后升级渲染器，您只需要交换 dll，或者如您所说，拥有一个覆盖客户端计算机上的渲染器 dll 的启动器。

使用 dll 的一些缺点是您现在需要为游戏提供更多文件，并且最终用户可能会发现为了他们自己的修改目的而包装您的 dll 更容易（尽管也许您发现使游戏可修改是一个加号？）。

# php - PHP网站统计

> ID：15409677
> 
> 赞同：0
> 
> 时间：2013-03-14T12:46:00.023
> 
> 标签：php, mysql, statistics

我已将此 PHP 代码放在我的 index.php 页面的最顶部

```
<?php
session_start();
include 'includes/dbconnection.php';

$sql="INSERT into site_statistics (ipaddress, datetime, url) values ('".$_SERVER['REMOTE_ADDR']."', '".date("Y-m-d H:i:s")."', '".$_SERVER['PHP_SELF']."') ";
$rs=mysql_query($sql,$conn) or die(mysql_error());
?> 
```

它可以插入数据库，但是当我刷新一次时，它似乎总是在表中放置多行

session_start(); 用于我的购物车，所以我无法删除它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:48:17.490

添加一个 varchar(32) 列，使其成为主键，并将会话 ID 插入其中。IE。

```
$sql="INSERT into site_statistics (sid, ipaddress, datetime, url) values ('" . session_id() . "', '".$_SERVER['REMOTE_ADDR']."', '".date("Y-m-d H:i:s")."', '".$_SERVER['PHP_SELF']."') "; 
```

会话 ID 在该特定时间对访问者来说是唯一的，因此它作为主键将防止同一访问者在该特定访问中多次插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:57:33.097

如果您需要在页面刷新时更新字段，请使用

```
REPLACE INTO 
```

在您的 sql 查询中，但如果没有，您可以先使用检查数据库

```
if(...){
  ...
} 
```

陈述。

# php - 将数组插入mysql数据库

> ID：15409681
> 
> 赞同：3
> 
> 时间：2013-03-14T12:46:06.807
> 
> 标签：php, mysql, arrays

我有以下数组，我想将其插入 mysql 数据库。

*   项目[0] = 足球
*   项目[1] = 橄榄球
*   项目[2] = 足球
*   项目[3] = 投球
*   项目[4] = 曲棍球

我正在使用以下函数插入位于functions.php中的数据库：

```
//Capture items 
    function item($register_data)
    {
        array_walk($register_data,'array_clean');

        $fields = ' '.implode(',',array_keys($register_data)).' ';
        $data = '\''.implode('\',\'',$register_data).'\'';

        //Insert user Data into the database
        $query = "INSERT INTO items ($fields) VALUES ($data)";
        mysql_query($query);
    } 
```

现在这就是我插入的方式：

```
for($i =0;$i<4;$i++)
                {
                    $item = array($i = item[i]);        
                }

//Call the function to insert into the database
item($item); 
```

这种方法似乎不起作用。请协助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:16:19.893

由于您的 items 表有两列，其中一列是`id`(auto increment) 您将要跳过它并仅指定第二列`ItemName`。[这在本页](http://dev.mysql.com/doc/refman/5.1/en/example-auto-increment.html)的 mysql 文档中有描述。

假设您要在此表中插入 5 项运动：

```
$sports[0] = "Soccer";
$sports[1] = "Rugby";
$sports[2] = "Football";
$sports[3] = "Netball";
$sports[4] = "Hockey"; 
```

您会希望查询看起来像以下几行：

```
INSERT INTO items (ItemName) VALUES ('Soccer'), ('Rugby'), ('Football'), ('Netball'), ('Hockey'); 
```

代码看起来像这样：

```
function insert($insert_data)
{
    $fields = implode(', ', $insert_data);
    $data = '(\''.implode('\'), (\'', $insert_data).'\')';

    //mysql_query("INSERT INTO items (ItemName) VALUES $data;");
    echo "INSERT INTO items (ItemName) VALUES $data;";
}

$sports = array();
$sports[0] = "Soccer";
$sports[1] = "Rugby";
$sports[2] = "Football";
$sports[3] = "Netball";
$sports[4] = "Hockey";

insert($sports); 
```

您可能还想先[清理](http://php.net/manual/en/mysqli.real-escape-string.php)字符串并查看[mysqli](http://www.php.net/manual/en/book.mysqli.php)，因为[mysql](http://www.php.net/manual/en/book.mysql.php)已经过时了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:55:56.793

PHP 有一个内置的序列化和反序列化函数（[http://php.net/manual/en/function.serialize.php](http://php.net/manual/en/function.serialize.php)）。您可以将任何对象或数组传递给它，它会返回一个序列化的字符串，您可以将其存储在数据库的单个字段中。

# android - 安卓GPS校准

> ID：15409683
> 
> 赞同：5
> 
> 时间：2013-03-14T12:46:09.887
> 
> 标签：android, gps, location, locationmanager, location-provider

当移动很远的距离时，比如去另一个城市，在 GPS 关闭的情况下，打开 GPS 需要很长时间才能获得第一个正确的点。

因此，例如，如果我注册到 gps 提供商，则可能需要长达 10 分钟才能完成第一次 onLocationChanged 调用。

网络提供商的响应速度更快，但准确性较低。

有没有办法帮助gps提供商？给它一个大概的位置（来自网络提供商的那个），以便它可以更快地找到我的位置？

我认为谷歌地图做了某种优化，因为他们的应用程序比我的基本应用程序更快地找到我的位置，只注册到 gps 提供商。

知道如何以不错的精度（<30 m）加速获取我的位置的过程吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T13:24:19.143

你是对的，如果你在手机关机的情况下移动很长一段路，那么卫星定位可能需要很长时间。这就是 AGPS 提供帮助的地方。“A”代表“辅助”，它的实现在很大程度上取决于运营商和手机。从本质上讲，它从手机信号塔或咖啡店等公共 WiFi 获取大致位置，然后下载星历和年历数据，这些数据告诉手机当时可能在该大致位置的头顶上有哪些卫星。然后手机可以首先开始收听与可见卫星相对应的频率。这应该加快第一次修复的时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:24:10.423

常见的做法是使用 WiFi SSID 或您注册的手机信号塔的位置，通过 WeFi 或 Skyhook 等提供商查找您当前的位置。谷歌为此使用了自己的服务（并且[看到没有其他人这样做](http://www.theverge.com/2011/05/12/google-android-skyhook-lawsuit-motorola-samsung/)）。

如果您的智能手机有气压计，另一种方法是查看气压并尝试将其固定到某个位置。虽然所有这些方法理论上都可以离线使用，但从互联网上获取数据更容易。

另请注意，手机上不准确的 NTP 设置可能会导致 GPS 搜索时间延长。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T18:30:17.230

> 有没有办法帮助gps提供商？

NickT 已经回答了这个问题，但安卓手机必须调用 AGPS。在您的应用程序中，您无法控制它。

> 我认为谷歌地图做了某种优化，因为他们的应用程序比我的基本应用程序更快地找到我的位置，只注册到 gps 提供商。

这不应该是这样，可能你做错了什么，或者谷歌应用程序可以启用辅助 GPS。尝试与其他安卓 GPS 应用程序进行比较（例如与 Motion-X-GPS 进行比较）

> 第一次 onLocationChanged 调用可能需要 10 分钟。

通常这太长了，要么您的手机已知 GPS 质量较弱，要么设备没有自由视野以打开天空。即使没有辅助 GPS，在 45 秒后，您应该有一个有效的 GPS 位置（假设可以自由查看开阔的天空）。但是这种情况可能会发生，无论是您第一次在设备上使用 GPS 时，还是当您乘飞机飞往距离您最后一个 GPS 位置较远的位置时。

在我的 iPhone 上，当另一个 GPS 应用程序以某种方式令人不安时，我很少看到这种情况，在重新启动设备后 GPS 立即有效。

再次检查是否是您的应用程序的故障，通过比较其他应用程序是否也需要 10 分钟。（这可能是您的错，当您等待接收精度 <30m 而其他应用程序会占据他们获得的第一个有效位置时。

如果 google 也需要 10 分钟，那么您在该手机上无能为力，只能将其暴露在良好的天空视野中。
（在城市峡谷内，更难获得有效的第一次修复，然后在大地方。
）

# ruby-on-rails - 在 ruby on rails 中为哈希添加值

> ID：15409684
> 
> 赞同：0
> 
> 时间：2013-03-14T12:46:23.350
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, hash

我在向 ruby​​ on rails 中的哈希添加新键和值时遇到问题。该方法看起来像这样，带有两个调试打印，并且应该简单地添加具有索引 + 1 作为值的提供程序键，以便稍后访问具有正确 ID 的提供程序。

```
search_result.each_with_index do |articles, index|
  puts "merge-articles: #{articles}"
  articles.each{ |article| article[:provider] = index + 1;}
  puts "merge-articles(later): #{articles}"
end 
```

我从 puts 中得到了这些输出，这在我看来非常好：

```
merge-articles: [{:ean=>"9780234474278", :author=>"Dan Brown", :name=>"The Da Vinci Code", :price=>19.65, :image=>"www.google.de/image.png"}]
merge-articles(later): [{:ean=>"9780234474278", :author=>"Dan Brown", :name=>"The Da Vinci Code", :price=>19.65, :image=>"www.google.de/image.png", :provider=>2}] 
```

仅测试密钥是否存在的规范会出现此错误：

```
 Failure/Error: HomeController.merge(@no_same_items_merge).each do |item|
 TypeError:
   can't convert Symbol into Integer
 # ./app/controllers/home_controller.rb:41:in `[]='
 # ./app/controllers/home_controller.rb:41:in `block (2 levels) in merge'
 # ./app/controllers/home_controller.rb:41:in `each'
 # ./app/controllers/home_controller.rb:41:in `block in merge'
 # ./app/controllers/home_controller.rb:39:in `each'
 # ./app/controllers/home_controller.rb:39:in `each_with_index'
 # ./app/controllers/home_controller.rb:39:in `merge'
 # ./spec/controllers/home_controller_spec.rb:104:in `block (5 levels) in <top (required)>' 
```

编辑：RSpec 测试如下所示：

```
 it "should return an array of right formatted hashes" do
      HomeController.merge(@no_same_items_merge).each do |item|
        item.should have_key(:name)
        item.should have_key(:ean)
        item.should have_key(:author)
        item.should have_key(:description)
        item.should have_key(:url)
        item.should have_key(:prices)
        item.should have_key(:images)
      end
    end 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T14:00:53.237

在规范中，设置`article`为一个`Array`，而不是一个`Hash`。

# database - 将 PostgreSQL 数据库从 Windows 移动到具有不同排序规则的 CentOS

> ID：15409686
> 
> 赞同：2
> 
> 时间：2013-03-14T12:46:33.110
> 
> 标签：database, windows, postgresql, centos

我们在 Windows 上有一个生产服务器，其 PostgreSQL 数据库描述为：

```
LC_COLLATE = 'Portuguese_Brazil.1252'
LC_CTYPE = 'Portuguese_Brazil.1252' 
```

问题是，当我们在我们的开发机器上工作时，它们都是 CentOS，PostgreSQL 安装只允许我们创建这种格式的数据库：

```
LC_COLLATE = 'en_US.UTF8'
LC_CTYPE = 'en_US.UTF8' 
```

或者

```
LC_COLLATE = 'pt_BR.UTF8'
LC_CTYPE = 'pt_BR.UTF8' 
```

这影响了我们在每个日期和时间戳上存储日期和时间戳的方式。
如何在 centOS 机器上复制 windows 数据库的排序规则？反过来也可以解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:21:35.070

您可以在 postgresql.conf 中设置日期格式：

```
datestyle = 'iso, mdy' 
```

调整`mdy`零件。查看[语言环境和格式](http://www.postgresql.org/docs/9.2/interactive/runtime-config-client.html#RUNTIME-CONFIG-CLIENT-FORMAT)

日期是如何输入的？如果日期输入格式以四位数年份开头，则它是明确的：

```
'2013-03-14 10:19' 
```

尝试在任何地方使用该格式。检查[日期输入格式详细信息](http://www.postgresql.org/docs/9.2/interactive/datatype-datetime.html#DATATYPE-DATETIME-INPUT)

正如@a_horse 所评论的，日期存储格式始终相同，即二进制。您可以配置的是输入和输出格式。

# security - 远程服务器上的缓冲区溢出

> ID：15409688
> 
> 赞同：3
> 
> 时间：2013-03-14T12:46:36.557
> 
> 标签：security, sockets, client-server, buffer-overflow, exploit

我是一名计算机安全专业的学生，​​我正在做一个关于远程缓冲区溢出的项目。我用 C 语言开发了一个易受攻击的服务器，不安全地使用了 strncpy 函数，该函数实际上在 512 字节缓冲区上复制了 1024 字节，并利用了一个漏洞来测试漏洞。

我的服务器代码的结构基本上是这样的：

```
main()
{
    /* socket programming stuff here */

    /* accept input string with busy waiting loop */

    /* call vulnerable function to process string */

    /* the rest of the code should be never executed if attack succeeds*/
 }

vuln (descriptor, pointer to buffer)
{
    /* copies to smaller buffer overflowing it to overwrite return address */

    /* call other_function */

    /* returns control to main */
 }

 other_function()
 {
     /* do other stuff */
 } 
```

我使用 -fno-stack-protector、-static 和 -z execstack 标志编译它，并在我的 Ubuntu 机器上关闭了 ASLR。

一般的想法是执行一个简单的端口绑定shellcode并获得一个远程shell。问题是我在 gdb 上继续收到以下错误：

" 警告：无法插入断点 0。访问内存地址 0x90909090 时出错：输入/输出错误。

0xbffec8c 在 ?? ()"

将执行流程从易受攻击的函数恢复到调用 main 的返回地址位于地址 0xbfffedc4：

0xbffffedbc: 0x08049940 0xbffff258 **0x08049097** 0x00000008

我设法用一个指向我的 nop 雪橇的有意义的地址覆盖它，但由于某种原因，我无法让我的机器执行 NOP 指令以最终到达 shellcode。恶意缓冲区的总体布局是：

[nop sled (大约 420 字节)] [shellcode] [repeated ret addr] 0xbfffebbc - 0xbfffed5c 0xbfffed60 0xbfffedbc - 0xbffffefb4

...并且 EIP 被重定向到 0xbffec8c，大致位于 NOP 雪橇的中间。

segfault 错误后，`info r`表示 EIP 已正确加载所需地址 (0xbfffec8c)：

```
eax            0xffffffff   -1
ecx            0x80f3840    135215168
edx            0x61e    1566
ebx            0x0  0
esp            0xbfffedc8   0xbfffedc8
ebp            0xbfffec8c   0xbfffec8c
esi            0x0  0
edi            0xbfffec8c   -1073746804
eip            0xbfffec8c   0xbfffec8c
eflags         0x282    [ SF IF ]
cs             0x73 115
ss             0x7b 123
ds             0x7b 123
es             0x7b 123
fs             0x0  0
gs             0x33 51 
```

...如果我反汇编堆栈内存的那个区域，我会得到预期的缓冲区内容（许多 0x90 后跟我的 shellcode）：

```
(gdb) x/128xw 0xbfffec8c
0xbfffec8c: 0x90909090  0x90909090  0x90909090  0x90909090
0xbfffec9c: 0x90909090  0x90909090  0x90909090  0x90909090
0xbfffecac: 0x90909090  0x90909090  0x90909090  0x90909090
0xbfffecbc: 0x90909090  0x90909090  0x90909090  0x90909090
0xbfffeccc: 0x90909090  0x90909090  0x90909090  0x90909090
0xbfffecdc: 0x90909090  0x90909090  0x90909090  0x90909090
0xbfffecec: 0x90909090  0x90909090  0x90909090  0x90909090
0xbfffecfc: 0x90909090  0x90909090  0x90909090  0x90909090
0xbfffed0c: 0x90909090  0x90909090  0x90909090  0x90909090
0xbfffed1c: 0x90909090  0x90909090  0x90909090  0x90909090
0xbfffed2c: 0x90909090  0x90909090  0x90909090  0x90909090
0xbfffed3c: 0x90909090  0x90909090  0x90909090  0x90909090
0xbfffed4c: 0x90909090  0x90909090  0x90909090  0x90909090
0xbfffed5c: 0x90909090  0x9958666a  0x5243db31  0x026a016a
0xbfffed6c: 0x80cde189  0x58666a96  0x68665243  0x5366697a
0xbfffed7c: 0x106ae189  0xe1895651  0x66b080cd  0x56534343
0xbfffed8c: 0x80cde189  0x524366b0  0xe1895652  0x6a9380cd
0xbfffed9c: 0x3fb05902  0x794980cd  0x520bb0f9  0x732f2f68
0xbfffedac: 0x622f6868  0xe3896e69  0x53e28952  0x80cde189
0xbfffedbc: 0xbfffec8c  0xbfffec8c  0xbfffec8c  0xbfffec8c 
```

请帮助我找出问题所在，如果您能够从我提供的信息中识别出问题，而不是确切的解决方案，那么只是关于我应该寻找什么的提示或建议。我不想作弊:)

感谢您的时间。亲切的问候，曼科

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T13:22:57.777

似乎在执行的特定点 eip 有 0x90909090 这当然超出了堆栈范围。或者它可能是在异常发生后传输代码执行的 seh。使用 nopseled 大小的模式并找到新的“访问内存地址 0x__ 时出错”以找到问题所在

如果我可以说，我没有看到重复返回地址的任何原因。如果你喜欢尝试在 eip 覆盖后添加 shellcode。如果可能的话，那会更容易，（如果缓冲区可以被无限覆盖）

在你的情况下， [nop sled (bytes until eip overwrite - bytes of shellcode)] [shellcode][eip overwrite value(bffffec8c)][optional: nopsled] 就足够了。

# c++ - Win32 自定义文本框

> ID：15409691
> 
> 赞同：0
> 
> 时间：2013-03-14T12:46:40.810
> 
> 标签：c++, c, winapi, visual-c++

**代码：**

HWND MyTextField;

```
MyTextField = CreateWindowEx(WS_EX_APPWINDOW,"EDIT","Window Title :P", WS_CHILD|WS_VISIBLE, 0,100,105,17,hWnd,(HMENU)SOME_KIND_OF_ID,GetModuleHandle(NULL),NULL); 
```

上面提供了一个白框（文本窗口），用户可以在其中输入。有没有模拟文本框，但删除背景颜色？

我试图在聊天窗口中放置一个文本框，但聊天窗口是黑色的！我不能在黑色聊天窗口中有白色文本框！我可以使文本框背景透明吗？

如果可能的话，我想将回车（闪烁的垂直线表示用户可以输入的位置）放在我想要的任何地方，而实际上在后台没有文本框！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:53:29.200

正如谷歌所说，你应该`WM_CTLCOLORSTATIC`在父窗口 中处理[http://www.daniweb.com/software-development/cpp/threads/285967/winapi-background-color-of-edit](http://www.daniweb.com/software-development/cpp/threads/285967/winapi-background-color-of-edit)

# javascript - 是什么导致了 Safari 和 Chrome 中的 TinyScroll 滞后/延迟

> ID：15409707
> 
> 赞同：1
> 
> 时间：2013-03-14T12:47:14.620
> 
> 标签：javascript, jquery, google-chrome, safari, tinyscrollbar

[页面http://baijs.nl/tinyscrollbar/](http://baijs.nl/tinyscrollbar/)上有一个 JQuery 自定义滚动条，当使用 Opera 或 Mozilla 查看时，滚动效果很好，但是使用 Safari 或 Chrome 查看时，会出现这种烦人的延迟/延迟（大约1秒）从拖到反应，应该是无缝的。我正在使用 Windows 7 Pro x64。

发现了一些可能相关的东西： [使用 tinyscrollbar 更新的 JavaScript 性能非常慢](https://stackoverflow.com/questions/15055353/very-slow-javascript-performance-using-tinyscrollbar-update)

# android - 获取列表中当前显示的片段，如 UI

> ID：15409709
> 
> 赞同：1
> 
> 时间：2013-03-14T12:47:23.657
> 
> 标签：android, android-fragments

我在活动 UI 中添加片段以及标签。所以它看起来像可滚动的 UI 列表。在 onResume 活动中，我只想获取屏幕上显示的片段。

因此，例如 UI 列表中有 10 个片段，用户在 Ui 上只能看到其中的 5 个，并且在滚动时可以看到剩余的片段。

我想要前 5 个可见的片段。这是马代码。

```
 @Override
    protected void onResume() {
    super.onResume();

    Fragment listitemFragment = getSupportFragmentManager().findFragmentByTag(TAG);
    if(listitemFragment != null && listitemFragment.isVisible()) {
      //my code
    }
} 
```

isVisible() 对所有 10 个片段都返回 true，即使用户只能在屏幕上看到 5 个片段。请帮我。这是正确的做法吗？有什么不同的方法吗？还是我做错了什么？

提前致谢

# http-status-code-404 - Magento 2 404 错误管理面板

> ID：15409710
> 
> 赞同：5
> 
> 时间：2013-03-14T12:47:24.603
> 
> 标签：http-status-code-404, admin, magento2

最近我安装了 Magento 2.0 版

安装成功后，我尝试登录管理面板，但它说 404 未找到。

我真的不明白是什么导致了这样的问题。此外，从 URL 可以看出我已登录到 admin oanel，但仪表板不可见。

[网址：](http://example.com/magento-2/index.php/admin/admin/dashboard/index/key/9413917f383b1e505ea5d4cb3b79f61e/)

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-03T12:56:17.523

我遇到过同样的问题。我必须启用`mod_rewrite`模块并将apache 配置文件中的目录设置为`AllowOverride`。`all``/var/www/html`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-27T21:19:59.700

也许是一个已知问题？一些关于当前工作的信息。

[https://github.com/magento/magento2/issues/254](https://github.com/magento/magento2/issues/254)

据此，这可能会解决它：

快速修复：在 app/code/Mage/Install/Model/Installer/Db.php:64 粘贴以下内容

```
if($extName == 0) {
  continue;
} 
```

后

```
foreach ($extensions as $extName) { 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-08-07T17:46:33.520

问题在于获取 REQUEST_URI 环境变量值并使用 SCRIPT_FILENAME 和 SCRIPT_NAME 环境变量值检查它。

所以问题的一个原因是在请求路径中添加了 /index.php/ 前缀，并且 Magento url 生成有这个值硬编码给管理员。

覆盖 /app/code/core/Mage/Core/Mode/store.php 文件中名为 _updatePathUseRewrites 的方法：替换此函数：

```
protected function _updatePathUseRewrites($url)
{
if ($this->isAdmin()    || !$this->getConfig(self::XML_PATH_USE_REWRITES) || !Mage::isInstalled()) {
$url .= basename($_SERVER['SCRIPT_FILENAME']).'/';        }
return $url;
} 
```

和

```
 protected function _updatePathUseRewrites($url)
{
if ($this->isAdmin()    || !$this->getConfig(self::XML_PATH_USE_REWRITES) || !Mage::isInstalled()) {
$url .= '/';        }
return $url;
} 
```

这肯定会解决你的问题

# iphone - 从 END 修剪字符串

> ID：15409712
> 
> 赞同：-1
> 
> 时间：2013-03-14T12:47:32.577
> 
> 标签：iphone, nsstring

我想从字符串的末尾字符串字符串，是否有任何字符串的 api 函数只能从字符串的结尾删除空格和换行符。

我编写了手动代码来从字符串末尾搜索字符并删除空格和换行符，但这可能会减慢进程。

需要API函数..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:54:46.650

试试这个可能对你有帮助

```
-(NSString *)removeEndSpaceFrom:(NSString *)strtoremove{
    NSUInteger location = 0;
    unichar charBuffer[[strtoremove length]];
    [strtoremove getCharacters:charBuffer];
    int i = 0;
    for ( i = [strtoremove length]; i >0; i--){
        if (![[NSCharacterSet whitespaceCharacterSet] characterIsMember:charBuffer[i - 1]]){
            break;
        }
    }
    return  [strtoremove substringWithRange:NSMakeRange(location, i  - location)];
} 
```

和

```
 NSString *string = @"          this text has spaces before and after         ";
    NSString *trimmedString = [self removeEndSpaceFrom:string];
    NSLog(@"%@",trimmedString); 
```

# meteor - Meteor.userId 在服务器更改开发重新加载时丢失

> ID：15409714
> 
> 赞同：0
> 
> 时间：2013-03-14T12:47:33.923
> 
> 标签：meteor

我正在构建一个有点大的应用程序。更改代码时，服务器重新启动并在客户端上强制刷新。

客户端保留他的会话数据，但我似乎丢失了 Meteor.Collection 以前同步的数据，迫使我的用户重新同步所有内容。

我使用 0.5.7（在 0.5.8 中没有看到任何关于此的内容）

这是预期的行为还是我错过了什么？

这可以通过在客户端启动时添加类似的东西来测试（假设组件是你的 Meteor.Collection）

```
console.log("Length: ", Components.find().fetch().length); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-20T13:46:09.727

不，你没有错过任何东西。收集数据应在代码推送时重新同步。但是，如果您的集合数据加载时间超过一两秒，您应该考虑通过创建仅发送客户端当前需要的数据的更细粒度的订阅来尝试向客户端发送更少的数据。

# c# - 为正在运行的程序的每个实例设置 ID 号

> ID：15409715
> 
> 赞同：0
> 
> 时间：2013-03-14T12:47:34.063
> 
> 标签：c#, windows, winforms

基本上，我需要做的是为我的程序运行的每个实例设置一个数字，这样我就可以知道哪个程序在做什么。

我正在模拟一个汽油泵应用程序，我需要它，所以每次它运行第一个运行的程序将始终是泵 1，然后是 2 直到 6。成品将有 6 个正在运行的程序实例，这些实例将始终标记为 1 -6（无随机生成）

我认为这与应用程序配置文件有关，但我真的不确定我将如何去做。有任何想法吗？

抱歉，它含糊不清，但很难描述问题。提前致谢

编辑：这个想法是我可以使用这个唯一的 ID 发送到销售点来识别正在使用的泵

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:49:18.580

只需将数字作为应用程序设置放入 app.config [http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.appsettings.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.appsettings.aspx)

从文章

添加这样的设置

```
 <appSettings>
  <add key="IdValue" value="1" /> 
```

并像这样将它们放入您的代码中

```
 var appSettings = ConfigurationManager.AppSettings;
     var id = appSettings["IdValue"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T12:55:21.800

您可以让应用程序检查“下一个号码”的配置。然后，一旦应用程序加载，该应用程序就会执行 nextNumber + 1 并更新配置文件。您可能还希望在配置文件中有一个堆栈变量，以便您可以跟踪数字（例如：“1,2,3,4,5,6”），如果您删除一个重置下一个数字 - 1 和从堆栈变量中删除数字......所以你基本上跟踪实例的数量和它们的标签......所以你没有2个相同数量的泵。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:01:48.627

我所做的只是制作一个初始化表格，让用户在程序第一次运行时选择它是哪个泵。这样我就可以使用 WCF 服务来动态生成创建的泵数量。它不会更改应用程序配置，因此不能完全回答我的问题，但足以让它按照我的需要工作。

# c# - 如何为员工表中的记录分配唯一标识符？

> ID：15409718
> 
> 赞同：0
> 
> 时间：2013-03-14T12:47:40.870
> 
> 标签：c#, sql-server

我知道这是第一个标准问题，但有人问我，但我无法给他适当的答案。有两个表在.Employee 表中`Employee,Technology`保存了多对多关系，其中包含字段，其中技术具有字段， 这两个表允许名称重复。我应该定义哪个唯一约束以允许唯一条目？`employee_technology_rel``emp_id (auto_increment)``emp_name(varchar)``DOB (date)``tech_id(auto_increment)``tech_name(varchar)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:51:23.033

You can define the unique entry on table `employee_technology_rel`,

```
ALTER TABLE employee_technology_rel 
       ADD CONSTRAINT emptech_pk PRIMARY KEY (emp_id, tech_id)
// or if you have set a primary key already, you can still define via UNIQUE
ALTER TABLE employee_technology_rel 
       ADD CONSTRAINT emptech_uq UNIQUE (emp_id, tech_id) 
```

what it does is it only allows *unique technology for every employee*.

in order for you to have unique `emp_name` on table `Employee` as well as unique `tech_name` on table `Technology`, you can also alter the table by adding unique constraint

```
ALTER TABLE Employee ADD CONSTRAINT emp_uq UNIQUE (emp_name)
ALTER TABLE Technology ADD CONSTRAINT tech_uq UNIQUE (tech_name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:51:28.760

You want a composite primary key defined on the two columns in employee_technology_rel: emp_id and tech_id.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:55:33.490

> 唯一索引和唯一约束相同。他们达到相同的目标。两者的 SQL 性能相同。
> 
> **添加唯一约束** ALTER TABLE dbo。在 [PRIMARY] 上添加约束唯一非聚集 ( )
> 
> **在 dbo 上添加唯一索引** CREATE UNIQUE NONCLUSTERED INDEX。( ) 开 [主要]

来源[sqlauthority.com](http://blog.sqlauthority.com/2007/04/26/sql-server-difference-between-unique-index-vs-unique-constraint/)和[msdn](http://msdn.microsoft.com/en-us/library/aa224827%28v=sql.80%29.aspx)来自 Google 搜索：“ [SQL 服务器唯一索引](https://www.google.se/search?q=SQL%20server%20unique%20index)”。

# php - 在 PHP 中检索加密的密码

> ID：15409719
> 
> 赞同：0
> 
> 时间：2013-03-14T12:47:40.807
> 
> 标签：php, mysql, sha1, password-encryption

以下代码是我用来在 PHP 中加密密码的代码...

```
$password = sha1(sha1($_POST['password']).sha1("mySalt@$#(%")); 
```

我可以使用什么代码让用户可以使用他们输入的内容登录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:49:45.120

`sha1` is a hashing algorithm, not a 2-way encryption. You cannot retrieve the original password.

1.  Hash the submitted password using the same algorithm.
2.  Fetch, from your database, the password hash for the user in question.
3.  Compare the two hashes. If they match, the credentials are OK.

* * *

*   Don't use sha1 for password hashing, [it isn't safe enough](http://www.php.net/manual/en/faq.passwords.php#faq.passwords.fasthash)
*   [Use a unique salt per credential](https://www.owasp.org/index.php/Password_Storage_Cheat_Sheet#Use_a_cryptographically_strong_credential-specific_salt), don't reuse the same one each time.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:51:07.587

You should use [crypt](http://php.net/crypt) for password hashing, sha1/md5 are too weak.

All you need:

```
function check_password($password) {  
    ...//get db password to compare
    if (crypt($post_password, $db_results[0]['password']) == $db_results[0]['password']) {  
        return true;  
    } else { return false; }
} 
```

# .net - Web 应用程序试图在 ASP.NET MVC4 应用程序中加载 System.Web.Mvc，Version=1.0.0.0

> ID：15409722
> 
> 赞同：2
> 
> 时间：2013-03-14T12:47:44.310
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-4, dotnetopenauth

出于某种原因，当我尝试`AccountController`在我的 MVC4 应用程序中发布到其中一个 ActionMethods 时，它告诉我它无法加载`System.Web.Mvc, Version=1.0.0.0`或其依赖项之一。我不确定为什么在我实际使用运行时版本 4 时它会尝试加载此程序集。

我怀疑其中一个引用的程序集可能会导致此问题，但我不确定。我的主要嫌疑人是`DotNetOpenAuth.Core`因为以下痕迹：

> === 预绑定状态信息 === LOG: User = NT AUTHORITY\NETWORK SERVICE LOG: DisplayName = System.Web.Mvc, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35 (Full-specified) LOG: Appbase = file:///C:/tfs/AMS/Main/AMS/AuthServer/ LOG: Initial PrivatePath = C:\tfs\AMS\Main\AMS\AuthServer\bin 调用程序集：DotNetOpenAuth.Core，版本=4.2。 0.0，文化=中性，PublicKeyToken=2780ccd10d57b246。=== LOG：此绑定在默认加载上下文中开始。LOG：使用应用程序配置文件：C:\tfs\AMS\Main\AMS\AuthServer\web.config LOG：使用主机配置文件：C:\Windows\Microsoft.NET\Framework64\v4.0.30319\aspnet.config LOG：使用 C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config 中的机器配置文件。LOG：后策略参考：System.Web.Mvc，Version=1.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35 日志：尝试下载新 URL 文件：///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/d0b0b808/59620299/System.Web。 Mvc.DLL。日志：尝试下载新 URL 文件：///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/d0b0b808/59620299/System.Web.Mvc/System.Web.Mvc .DLL。日志：正在尝试下载新的 URL 文件：///C:/tfs/AMS/Main/AMS/AuthServer/bin/System.Web.Mvc.DLL。警告：比较程序集名称导致不匹配：主要版本错误：无法完成程序集设置（hr = 0x80131040）。探测终止。Web.Mvc.DLL。日志：尝试下载新 URL 文件：///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/d0b0b808/59620299/System.Web.Mvc/System.Web.Mvc .DLL。日志：正在尝试下载新的 URL 文件：///C:/tfs/AMS/Main/AMS/AuthServer/bin/System.Web.Mvc.DLL。警告：比较程序集名称导致不匹配：主要版本错误：无法完成程序集设置（hr = 0x80131040）。探测终止。Web.Mvc.DLL。日志：尝试下载新 URL 文件：///C:/Windows/Microsoft.NET/Framework64/v4.0.30319/Temporary ASP.NET Files/root/d0b0b808/59620299/System.Web.Mvc/System.Web.Mvc .DLL。日志：正在尝试下载新的 URL 文件：///C:/tfs/AMS/Main/AMS/AuthServer/bin/System.Web.Mvc.DLL。警告：比较程序集名称导致不匹配：主要版本错误：无法完成程序集设置（hr = 0x80131040）。探测终止。未能完成程序集设置 (hr = 0x80131040)。探测终止。未能完成程序集设置 (hr = 0x80131040)。探测终止。

当我尝试发布到以下方法时发生异常：

```
 [HttpPost]
    public ActionResult Login(String username, String password)
    {
        var request = Session[SESSION_KEY] as EndUserAuthorizationRequest;
        if (request != null)
        {
            Guid siteId = Guid.Parse(request.ClientIdentifier);
            Boolean isAuthenticated = this._identityProviderManager.Authenticate(siteId, "FA", username, password);
            if (isAuthenticated)
            {
                var serviceHost = new AuthorizationServerHost();
                var authorizationServer = new DotNetOpenAuth.OAuth2.AuthorizationServer(serviceHost);
                var approvalMessage = authorizationServer.PrepareApproveAuthorizationRequest(request, username, request.Scope);
                return authorizationServer.Channel.PrepareResponse(approvalMessage).AsActionResult();

            }
        }
        return View();
    } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T17:15:12.740

好的，我找到了解决方案。显然我必须将以下内容添加到 web.config 文件中。

```
 <runtime>
    <!-- This prevents the Windows Event Log from frequently logging that HMAC1 is being used (when the other party needs it). -->
    <legacyHMACWarning enabled="0" />
    <!-- When targeting ASP.NET MVC 3, this assemblyBinding makes MVC 1 and 2 references relink
             to MVC 3 so libraries such as DotNetOpenAuth that compile against MVC 1 will work with it.
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <dependentAssembly>
                <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" />
                <bindingRedirect oldVersion="1.0.0.0-3.0.0.0" newVersion="3.0.0.0" />
            </dependentAssembly>
        </assemblyBinding>
         -->
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-4.0.0.0" newVersion="4.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime> 
```

希望这会帮助遇到同样问题的其他人。

# regex - 正则表达式将 CamelCase 标识符转换为 UPPER_CASE

> ID：15409724
> 
> 赞同：1
> 
> 时间：2013-03-14T12:47:58.140
> 
> 标签：regex

我有以下几行

```
GetAuthServerList
GetAuthServerConfiguration
AddAuthServer 
```

我必须将它们转换为

```
GET_AUTH_SERVER_LIST
GET_AUTH_SERVER_CONFIGURATION 
```

等等。

我试图`([A-Z][a-z]+)`用`\1_`崇高的文本编辑器替换，但它也替换了最后一次搜索。如何跳过该行的最后一场比赛？

我可以`_`在一次替换中同时插入小写字母并将其变为大写字母吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T13:04:08.990

查找内容： `([a-z])([A-Z])`
替换为： `\1_\2`
您可以选择在崇高文本中将选择转换为大写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T12:56:41.113

我没有安装 sublime，但试试这个：

```
[a-z](?=[A-Z]) 
```

将其替换为`&_`

或者

```
 replace ([a-z])(?=[A-Z])  with \1_ 
```

在**vim**中它将是：

```
%s/\v[a-z]([A-Z])@=/&_/g 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T12:50:29.837

使用负前瞻进行一些修改应该会有所帮助

```
([A-Z][a-z]+)(?!$) 
```

# java - 在 ByteBuffer 上缺少一些绝对方法

> ID：15409727
> 
> 赞同：6
> 
> 时间：2013-03-14T12:47:59.160
> 
> 标签：java

也许我以错误的方式解决这个问题，但我错过了一些*绝对*的 put 方法[`ByteBuffer`](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html)。

如果您看一下，`ByteBuffer`您会发现大多数 put 方法都有绝对变体和相对变体。

除了：

*   将`byte`数组的一部分写入`ByteBuffer`.
*   将 a`ByteBuffer`写入`ByteBuffer`.

..而我正是需要这些。

要清楚`ByteBuffer`有方法：

```
 put(byte[] src, int offset, int length)
 put(ByteBuffer src) 
```

但缺乏：

```
 put(int index, byte[] src, int offset, int length)
 put(int index, ByteBuffer src) 
```

我有理由不想移动缓冲区的位置指针，因此我只想使用绝对 put 方法。

知道为什么这些方法被遗漏了吗？

我当然可以在不移动缓冲区的位置指针的情况下模仿丢失的方法，但这将涉及循环源字节。Javadoc 明确指出，这些方法（可能）比移动比循环和逐个移动字节更有效。我相信 Javadoc，因为我的测试表明相同。我需要尽可能多地从我的实现中挤出速度，因此我当然倾向于利用我可以得到的任何批量方法......如果它们存在的话。

Incedentially[`ByteBuffer`](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html)也缺少`get`用于部分字节数组移动的绝对方法。但我目前实际上并不需要这种方法。但又奇怪它不存在。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T16:27:03.573

获得所需方法的一种方法是让第二个 ByteBuffer 共享相同的内存，这样您就可以在不更改原始位置的情况下更改其位置。

不幸的是，该[`slice`](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html#slice%28%29)方法也没有位置参数。相反，它使用原始缓冲区的当前位置。所以你不能这样做：

```
dstBuffer.slice(100).put(srcBuffer); 
```

这里有一些想法，没有特别的顺序，除了我想到的顺序：

*   如果它适合您使用缓冲区的方式，您可以准备一份缓冲区副本，`slice()`并在您需要将数据放置在与原始位置无关的位置时保留它。

*   如果您要绝对放置的位置始终大于或等于原始缓冲区的位置指针，您可以执行以下操作：

    ```
    dstBuffer.slice().position(desiredPosition - dstBuffer.position()).put(srcBuffer); 
    ```

~~不幸的是，这不能放在更早的位置，因为切片上的位置不允许为负数。~~ **编辑**：没关系，我忘记了[重复](http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html#duplicate%28%29)方法。请参阅@BorisBrodski 的最佳答案。

*   如果您不使用直接字节缓冲区，则 System.arraycopy 既简单又快速：

    ```
    System.arraycopy(
        srcBuffer.array(), srcBuffer.arrayOffset() + srcBuffer.position(),
        dstBuffer.array(), dstBuffer.arrayOffset() + desiredPosition,
        srcBuffer.remaining()
    ); 
    ```

*   如果不需要并发访问，则可以在需要进行绝对放置时临时更改缓冲区的位置，然后再将其放回。如果您需要并发访问但线程争用较低，则可以同步对缓冲区的所有访问（可能很明显，但为了完整性而包含在内）：

    ```
    synchronize (lock) {
        int originalPosition = dstBuffer.position();
        dstBuffer.position(desiredPosition);
        dstBuffer.put(srcBuffer);
        dstBuffer.position(originalPosition);
    } 
    ```

*   如果其他想法都不适合您，您可以破解缓冲区。这很混乱，但这里有一个例子：

    ```
    private static final sun.misc.Unsafe UNSAFE;
    static {
        Object result = null;
        try {
            Class<?> klass = Class.forName("sun.misc.Unsafe");
            for (Field field : klass.getDeclaredFields()) {
                if (field.getType() == klass &&
                    (field.getModifiers() & (Modifier.FINAL | Modifier.STATIC)) ==
                        (Modifier.FINAL | Modifier.STATIC)) {
                    field.setAccessible(true);
                    result = field.get(null);
                    break;
                }
            }
        } catch (Throwable t) {}
        UNSAFE = result == null ? null : (sun.misc.Unsafe)result;
    }

    private static final Field ADDRESS_FIELD;
    static {
        Field f;
        try {
            f = Buffer.class.getDeclaredField("address");
            f.setAccessible(true);
        } catch (NoSuchFieldException | SecurityException e) {
            f = null;
        }
        ADDRESS_FIELD = f;
    }

    public static void absolutePut(ByteBuffer dstBuffer, int dstPosition, ByteBuffer srcBuffer) {
        if (!srcBuffer.isDirect()) {
            absolutePut(dstBuffer, dstPosition,
                srcBuffer.array(), srcBuffer.arrayOffset() + srcBuffer.position(),
                srcBuffer.remaining());
            return;
        }

        if (UNSAFE != null && ADDRESS_FIELD != null && dstBuffer.isDirect()) {
            try {
                long dstAddress = (long)ADDRESS_FIELD.get(dstBuffer) + dstPosition;
                long srcAddress = (long)ADDRESS_FIELD.get(srcBuffer) + srcBuffer.position();
                UNSAFE.copyMemory(srcAddress, dstAddress, srcBuffer.remaining());
            } catch (IllegalAccessException e) {
                throw new RuntimeException(e);
            }
        } else {
            // fallback to basic loop
            for (int i = srcBuffer.position(); i < srcBuffer.limit(); i++) {
                dstBuffer.put(dstPosition + i, srcBuffer.get(i));
            }
        }
    }

    public static void absolutePut(ByteBuffer dstBuffer, int dstPosition, byte[] src, int srcOffset, int length) {
        if (UNSAFE != null && ADDRESS_FIELD != null && dstBuffer.isDirect()) {
            try {
                long dstAddress = (long)ADDRESS_FIELD.get(dstBuffer) + dstPosition;
                UNSAFE.copyMemory(
                    src, UNSAFE.arrayBaseOffset(byte[].class) + srcOffset,
                    null, dstAddress,
                    length);
            } catch (IllegalAccessException e) {
                throw new RuntimeException(e);
            }
        } else {
            // fallback to System.arraycopy
            System.arraycopy(
                src, srcOffset,
                dstBuffer.array(), dstBuffer.arrayOffset() + dstPosition,
                length);
        }
    } 
    ```

我已经用直接和非直接缓冲区的混合对这段代码进行了一些最小的测试，***看起来***还可以。如果反射技术失败（例如，因为您在 applet 安全沙箱中或 Java 实现不兼容），它可以退回到更简单的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T16:39:26.027

在我看来，那些方法被遗漏了，因为不存在其他这样的方法。有一堆绝对方法采用包括“字节”在内的基元，但没有采用基元*数组*的绝对方法。

解决方案可能是：

```
((ByteBuffer)buffer.duplicate().position(index)).put(src, offset, length);
((ByteBuffer)buffer.duplicate().position(index)).put(otherByteBuffer); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T15:17:18.890

```
static void put(ByteBuffer buffer, int index, ByteBuffer src)
{
    int p0 = buffer.position();
    buffer.position(index);
    buffer.put(src);
    buffer.position(p0);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-13T21:18:52.893

这是我用于绝对批量的内容`get()`：

```
// Perform a bulk get() that doesn't modify the buffer
public void get(ByteBuffer buf, int position, byte[] dest, int off, int len) {
    if (buf.hasArray())
        System.arraycopy(buf.array(), buf.arrayOffset() + position, dest, off, len);
    else if (len < 256) {        // 256 is a wild guess TODO: performance testing
        while (len-- > 0)
            dest[off++] = buf.get(position++);
    } else
        ((ByteBuffer)buf.duplicate().position(position)).get(dest, off, len);
} 
```

类似的方法适用于`put()`.

# html - 为 excel 文档生成 HTML 时添加软中断

> ID：15409729
> 
> 赞同：0
> 
> 时间：2013-03-14T12:48:13.083
> 
> 标签：html, excel

当我从 Word 或 HTML 中复制带有单元格中换行符的表格时，Excel 会将文本中的每一行转换为单个单元格。例如：

html:

```
<tr>
    <td>
    cell 1 line 1<br/>
    cell 1 line 2<br/>
    </td>
<tr>
<tr>
    <td>
    cell 2
    </td>
</tr> 
```

被翻译成以下 3 个单元格而不是 2 个单元格：

```
A1 -> cell 1 line 1
A2 -> cell 1 line 2
A3 -> cell 2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:48:13.083

在网上搜索后，我最终在一个旧论坛中找到了答案：

我找到的解决方案是添加到样式表中：

```
br {mso-data-placement:same-cell;} 
```

# ios - 如果我在 ipad 设备中运行应用程序，我会收到以下错误，但它在模拟器中工作

> ID：15409734
> 
> 赞同：-3
> 
> 时间：2013-03-14T12:48:20.603
> 
> 标签：ios

2013-03-14 18:06:09.727 IPAD[5341:907]-[REVClusterPin setAnnotation:]: 无法识别的选择器发送到实例 0x1fe6a8b0 2013-03-14 18:06:09.729 IPAD[5341:907] *** 由于应用程序终止uncaught exception 'NSInvalidArgumentException', reason: '-[REVClusterPin setAnnotation:]: unrecognized selector sent to instance 0x1fe6a8b0' *** First throw call stack: (0x32f432a3 0x3addc97f 0x32f46e07 0x32f45531 0x32e9cf68 0x33d5f18b 0x33d5eeb1 0x33d5bac7 0x33d5eb1b 0xc017d 0xcf419 0x34d6a595

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:25:26.687

如果应用程序在模拟器中而不是在设备上运行，最大的问题之一是模拟器对 bundle 中的文件不区分大小写。因此，请检查图像文件是否命名为“Test.png”，并且在代码中您可能会编写 test.png。这适用于模拟器，但不适用于设备。

希望这可以帮助。

# inno-setup - 使用 inno-setup 在用户 AppData 文件夹中安装文件

> ID：15409739
> 
> 赞同：16
> 
> 时间：2013-03-14T12:48:33.370
> 
> 标签：inno-setup

我正在使用 Inno-Setup 版本 5.5.3(a)。

```
[Files]
Source: "C:\GPT\GPT.exe"; DestDir: "{app}"; Flags: ignoreversion
Source: "C:\GPT\GPT.dat"; DestDir: "{app}"; Flags: ignoreversion
; NOTE: Don't use "Flags: ignoreversion" on any shared system files 
```

我想将“GPT.dat”文件安装到名为“GPT”的自定义文件夹中的用户 AppData 文件夹中

例如 AppData\GPT\

例如，在我的 delphi 代码中，我在用户 AppData 路径中创建了一个名为“GPT”的文件夹。这些是我想放置文件的地方

```
var
  path: array[0..MAX_PATH] of char;

 SHGetFolderPath(0, CSIDL_APPDATA, 0, SHGFP_TYPE_CURRENT, @path);
 userPath:= Path;
 UserPath:= UserPath + '\GPT\';
 if not DirectoryExists(UserPath) then
   CreateDir(UserPath); 
```

谁能告诉我如何编辑我的 Inno 脚本的 [Files] 部分来实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-03-14T13:42:38.450

您需要使用[`{userappdata}`](http://jrsoftware.org/ishelp/topic_consts.htm#userappdata)仅映射到[`CSIDL_APPDATA`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762494%28v=vs.85%29.aspx#CSIDL_APPDATA)项目 ID 的常量作为文件的目标目录：

```
[Files]
Source: "C:\GPT\GPT.dat"; DestDir: "{userappdata}\GPT\"; Flags: ignoreversion createallsubdirs recursesubdirs comparetimestamp 
```

{userappdata} & {commonappdata} 应用程序数据文件夹的路径。

```
 CSIDL_APPDATA = {userappdata} = C:\Documents and Settings\username\Application Data
 CSIDL_COMMON_APPDATA = {commonappdata} = C:\Documents and Settings\All Users\Application Data 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-05-25T12:33:35.457

您需要使用：{userappdata}
如果您查看 Inno Setup 文档：

```
{userappdata} = C:\Documents and Settings\username\AppData\Roaming\
{commonappdata} = C:\Documents and Settings\All Users\AppData\Roaming\ 
```

{localappdata} ：本地**（非漫游）**应用程序数据文件夹的路径。
{userappdata} & {commonappdata} ：应用程序数据文件夹的路径。

我用 ：

```
[Files]
Source: MyPath\* ;  Flags: recursesubdirs createallsubdirs; DestDir: {userappdata}\MySoftware\ ; Components: ConfigFiles 
```

我的配置文件在：

**C:\Users*** \AppData\Roaming\MySoftware**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T10:33:29.457

如果我正确解释 Mirals 评论，使用 {programdata} 似乎更合适。

但是，在 XP 上没有 {programdata}，只有 {commonappdata} 或 {userappdata}，所以我必须多样化我的安装。{programdata} 是后来的发明。

一个令人不安的陷阱是，当桌面和 userappdata 被镜像到服务器（“漫游配置文件”）时，如果他们使用 userappdata 进行 ini 文件存储，这会大大减慢程序的速度，至少这是我的经验。

# knockout.js - 具有批量编辑功能的 Knockout-Kendo Grid 不会更新视图模型

> ID：15409741
> 
> 赞同：3
> 
> 时间：2013-03-14T12:48:34.877
> 
> 标签：knockout.js, kendo-ui

我不知道我的实现有什么问题，但是如果我将可编辑的 KendoUI Grid 与 Knockout-Kendo 一起使用，我将无法更新我的视图模型。如果我更改某些特定的表字段并记录视图模型，它将不会得到任何更新。

```
<button data-bind="click: log">Log ViewModel</button>
<div id="gr" data-bind="kendoGrid: options"></div>

var pStyleHeader_ViewModel = function() {
this.options = {
    data: ko.observableArray([{ StyleNo : ko.observable("1BA0012"),
                                Description : ko.observable(""),
                            StyleType : ko.observable("10"),
                            DueDate : ko.observable(new Date("2012-10-31T00:00:00+02:00"))}]),
    sortable: true,
    columns: [{"field":"StyleNo","title":"Style No"},{"field":"Description","title":"Description"},{"field":"StyleType","title":"Style Type","editor":StyleTypeDropDownEditor,"values":StyleTypeValues},{"field":"DueDate","title":"Due Date","type":"date","format":"{0:MM/dd/yyyy}"}],
    editable: true,
    selectable: true,
    pageable: { pageSize: 5 }
};

ko.applyBindings(new pStyleHeader_ViewModel()); 
```

你可以在这里看到一个例子：http: [//jsfiddle.net/aleksanderson/hd5c8/](http://jsfiddle.net/aleksanderson/hd5c8/)

这种行为的原因是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T14:03:18.700

目前，数据源到 KO 的集成并不是无缝的。由于 Kendo 小部件不知道如何直接处理 observable，因此 ko-kendo 为小部件提供了“干净”版本的数据。这意味着对该数据的更新不会自动显示在视图模型数据中。

我希望探索与 Knockout（可能是 KO 数据源）更好的数据源集成，其中 autoSync 将更新视图模型。这有望在短期内发生。

目前，您可以使用一些模式将数据从网格同步到您的虚拟机。

示例：http: [//jsfiddle.net/rniemeyer/73mjn/](http://jsfiddle.net/rniemeyer/73mjn/)

这是一个示例视图模型：

```
var Person = function(data) {
   this.first = ko.observable();
   this.last = ko.observable();

   this.full = ko.computed(this.getFull, this);

   //initialize it the first time
   this.initialize(data);
};

ko.utils.extend(Person.prototype, {
    getFull: function() {
      return this.first() + ' ' + this.last();     
    },
    //can be called at anytime to initialize/update data
    initialize: function(data) {
      this.first(data.first);
      this.last(data.last);        
    }
});

var ViewModel = function() {
     this.people = ko.observableArray([
         new Person({ first: "Bob", last: "Smith" }),
         new Person({ first: "Doug", last: "Jones" }),
         new Person({ first: "Sally", last: "Green" })
     ]);

    //store a reference to the widget, so we can get at the modified data
    this.people.grid = ko.observable();

    //reconcile the grid data with the view model data
    this.syncData = function() {
       var people = this.people() || [],
           gridPeople = this.people.grid().dataSource.data() || [],
           person, gridPerson, i, length;

        //loop through the grid's people and update each vm person
        for (i = 0, length = gridPeople.length; i < length; i++) {
            gridPerson = gridPeople[i];
            person = people[i];

            //add a new person, if necessary
            if (!person) {
               people.push(new Person(gridPerson));   
            } else {
               person.initialize(gridPerson);   
            }
        }
    };
}; 
```

# android - 一种使用带有pygame的blender动画将其导出到android的方法

> ID：15409747
> 
> 赞同：1
> 
> 时间：2013-03-14T12:48:47.410
> 
> 标签：android, pygame, blender

关于搅拌机的两个主要问题

1.  有没有办法使用使用 blender 框架制作的东西在 pygame 上使用它，以便可以将其导出到 android？

2.  一种从搅拌机中导出材料的方法，以便可以直接与 Android 上的应用程序一起使用。

PD：我看到了搅拌机页面和一些这样做的方法，但它们都在测试版上等等......

# sql - 结果集未返回

> ID：15409749
> 
> 赞同：0
> 
> 时间：2013-03-14T12:48:52.180
> 
> 标签：sql, sql-server

即使当前没有数据，如何确保这始终返回结果集？

现在如果`#TMP_SUMMARY1`不返回任何行。

如何确保下面的查询返回给我一个没有行的表，而不仅仅是向我显示此消息选项卡，下面有此消息且没有结果选项卡。

> （0 行受影响）

在这种情况下不返回结果集让我做噩梦！

```
IF (@SUMMARY = 'Agent Summary')

BEGIN

DECLARE @cols1 AS NVARCHAR(MAX),
    @colSum1 AS NVARCHAR(MAX),
    @query1  AS NVARCHAR(MAX)

select @cols1 = STUFF((SELECT distinct ',' + QUOTENAME(Agent) 
                    from #TMP_SUMMARY1
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') ,1,1,'')
print @cols1

select @colSum1 = STUFF((SELECT distinct ', Sum(' + QUOTENAME(Agent)+') as ' +QUOTENAME(Agent)
                    from #TMP_SUMMARY1
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') ,1,1,'')

print @colSum1 

set @query1 = 'select 
                case when [PAYMENT TYPE] is null then ''*GRAND TOTAL'' else [Credit/Debit] end [Credit/Debit],
                case when [PAYMENT TYPE] is null then '''' else [PAYMENT TYPE] end [PAYMENT TYPE],
                '+@colSum1 +'
              from
              (
                select  [Agent] , 
                  [Credit/Debit], 
                  [PAYMENT TYPE], 
                  value
                from #TMP_SUMMARY2
                unpivot
                (
                  value
                  for [Credit/Debit] in ([Amount Credit], [Amount Debit])

                ) unpiv
              ) src
              pivot
              (
                sum(value)
                for agent in ('+@cols1+')
              ) piv
              group by GROUPING SETS ([Credit/Debit], [PAYMENT TYPE]), ([Credit/Debit])'

execute(@query1)  

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:28:18.230

如果#TMP_SUMMARY1 中没有行，则@cols1 和@colsum1 的值将为空，并且您的动态sql 将具有无效的语法。为什么不直接用一个包裹你的动态 sql

```
If (@cols1 is not null) 
```

并且在没有列时不执行该语句。

# python - Python 2 中奇怪的 xrange() 行为

> ID：15409752
> 
> 赞同：1
> 
> 时间：2013-03-14T12:48:58.207
> 
> 标签：python

我熟悉 和 之间的`range()`区别`xrange()`。我注意到一些奇怪的东西`xrange()`：

```
>>> xrange(1,10,2)
xrange(1, 11, 2)

>>> xrange(1,10,4)
xrange(1, 13, 4) 
```

从功能上讲，它是正确的：

```
>>> for item in xrange(1,10,4):
...     print item
... 
1
5
9
>>> 
```

但是，如您所见，返回`xrange`对象中的停止值是最后一个合法值之后的下一个较高值。有什么理由吗？

`range()`它现在在 Python 3 中提供与 Python 2 中相同的功能，`xrange`其行为符合预期：

```
>>> range(1,10,4)
range(1, 10, 4)
>>> range(1,10,2)
range(1, 10, 2)
>>> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T12:49:45.247

`range`or的停止值`xrange`总是排他的。

引用[文档](http://docs.python.org/2/library/functions.html#range)（Python 2）：

> 如果`step`为正，则最后一个元素最大`start + i * step` **小于** `stop`; 如果为负数，则最后一个元素是**大于**`step`的最小元素。`start + i * step` **`stop`**

 **对于[Python 3](http://docs.python.org/3/library/stdtypes.html#range)：

> 对于正数`step`，范围 r 的内容由公式`r[i] = start + step*i`where`i >= 0`和确定**`r[i] < stop`**。
> 
> 对于负数`step`，范围的内容仍然由公式确定`r[i] = start + step*i`，但约束条件是`i >= 0`和**`r[i] > stop`**。

* * *

关于您的问题的第二`repr()`部分`xrange`：

`xrange(1, 10, 4)`并且`xrange(1, 13, 4)`是相同的，`repr()`对于原生 python 对象，通常返回有效的 python 代码来重新创建对象。这不需要与最初创建对象的 python 代码完全相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T13:00:41.733

`xrange(1, 10, 4)`相当于`xrange(1, 13, 4)`。要使用您的示例：

```
>>> for item in xrange(1,13,4):
...     print item
... 
1
5
9
>>> 
```

`xrange`在 Python 2 中规范化了`start, stop, step`参数。在内部，`xrange`实现存储三重开始、步长和长度（`xrange`对象中的元素数量），而不是开始、步长和停止。以下是如何`xrange.__repr__()`实现 [1]：

```
rtn = PyString_FromFormat("xrange(%ld, %ld, %ld)",
                          r->start,
                          r->start + r->len * r->step,
                          r->step); 
```

[1] [https://github.com/replit/empythoned/blob/master/cpython/Objects/rangeobject.c](https://github.com/replit/empythoned/blob/master/cpython/Objects/rangeobject.c)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T12:56:41.273

真的有关系吗？

*效果*是一样的。10 和 11 都不包含在 的输出中`xrange()`，`xrange(1, 11, 2)`并且*等价*于`xrange(1, 10, 2)`。

Python 2 范围类型（​​的结果`xrange()`）存储范围长度，而不是结束值，因此要创建`repr`输出，它会为您计算结束值。并且由于您使用了步长值，因此计算显示了公式的结果`start + length * step`。对于实现，长度是更重要的值，`end`可以安全地丢弃该值并根据需要重新计算。

因此，当您创建时`xrange(1, 10, 2)`，它会计算范围长度并存储*它*而不是结束值：

```
if (step > 0 && lo < hi)
return 1UL + (hi - 1UL - lo) / step;
else if (step < 0 && lo > hi)
return 1UL + (lo - 1UL - hi) / (0UL - step);
else
return 0UL; 
```

*除了*长度之外， Python 3 Range 对象还存储结束值，因此您可以查询该对象并将其显示在`repr`输出中。**

# android - 即使使用最佳提供者，getLastKnownLocation() 也会返回 null

> ID：15409754
> 
> 赞同：1
> 
> 时间：2013-03-14T12:49:03.970
> 
> 标签：android, location, locationmanager

这是我用来获取当前位置的代码：

```
mgr = (LocationManager) getSystemService(LOCATION_SERVICE);
Criteria criteria = new Criteria();
best = mgr.getBestProvider(criteria, true);
if (best == null) {
    //ask user to enable atleast one of the Location Providers
} else {
    Location location = mgr.getLastKnownLocation(best);
//But sometimes it returns null
} 
```

几乎每次`best = network`

但有时它不提供**位置。**

```
mgr.getLastKnownLocation(best) returns null 
```

**还：**

```
onResume() {
    mgr.requestLocationUpdates(best, 15000, 10, this);
} 
```

**和**

```
onPause() {
    mgr.removeUpdates(this);
} 
```

这种情况有没有替代方案？

一种选择可能是

```
List<String> providers = mgr.getAllProviders(); 
```

存储所有提供程序并逐个进行。但从未在任何地方看到此推荐。此外，文档建议是要求最好的提供者。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T13:08:45.263

`getLastKnownLocation()`仅在最近使用过该提供者时才返回该提供者的 Location 对象。如果不是最近，Android 会假定该提供者提供的最后一个位置已过时且错误，并返回 null。

在这种情况下，您必须等待 LocationListener 的`onLocationChanged()`方法被调用，然后才能获得可用的位置。

# javascript - 任何滑块不能与 a4j:ajax 一起使用？

> ID：15409756
> 
> 赞同：2
> 
> 时间：2013-03-14T12:49:07.920
> 
> 标签：javascript, ajax, jsf, anythingslider

我正在尝试使用 Anythingslider 在 div 之间滑动：

```
 <h:panelGroup id="preview" layout="block"
        style="float: left; margin-left: 100px;">

        <ul id="slider">
            <li><ui:include src="./preview/WelcomePreview.xhtml" /></li>
            <li><ui:include src="./preview/CardPreview.xhtml" /></li>
        </ul>

    </h:panelGroup> 
```

但是，一旦我在站点中包含一个表格，它就不再起作用了。请注意，我没有将表格包含在我包含在滑块中的 div 中！它在列表之外。也许不是导致错误的表。

这是我尝试包含的 html：

```
<rich:collapsiblePanel header="Title" switchType="client"
    expanded="false">

    <table style="table-layout: fixed;">
        <h:form>

            <tr>
                <td class="firstTD"><h:outputLabel value="Title: " /></td>
                <td><h:inputText id="title"
                        value="#{skinningBean.currentSkin.title}">
                        <a4j:ajax event="keyup" render="preview" />
                    </h:inputText></td>
            </tr>
        </h:form>
    </table>
</rich:collapsiblePanel> 
```

**编辑**

我已经发现，这行代码会产生错误：

```
 <a4j:ajax event="keyup" render="titlePreview" /> 
```

使用ajax时有什么办法让它正常工作吗？

**编辑**

为了避免找不到正确的 javascript 函数，我做的第一件事是添加 jQuery noConflict 标记：

```
<script type="text/javascript">
    var $jq = jQuery.noConflict();
  $jq(function($){
  $('#slider1').anythingSlider();
});
</script> 
```

现在我唯一的问题是，一旦页面上呈现了某些内容，javascript 就不再工作了。我想这是因为 javascript 只是在页面初始化时加载的。由于性能，渲染不会加载整页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:36:42.910

[`noConflict()`模式](http://api.jquery.com/jQuery.noConflict/)设置不正确。它应该在文档就绪函数之外完成，如下所示：

```
var $jq = jQuery.noConflict();
$jq(function($){
  $('#slider1').anythingSlider();
}); 
```

* * *

我以前从未使用过 a4j，但快速浏览一下文档，我认为`oncomplete`需要使用该属性来重新初始化滑块。尝试这样的事情：

```
<a4j:ajax event="keyup" render="preview" oncomplete="initSlider()" /> 
```

然后将javascript更改为：

```
var $jq = jQuery.noConflict();

function initSlider() {
  $jq(function($){
    $('#slider1').anythingSlider();
  });
} 
```

正如我所说，我对使用 a4j 一无所知，但这看起来可能有效。

# sql-server - 我在哪里找到了在 SQL Server 2008 管理工作室中执行查询的毫秒数？

> ID：15409759
> 
> 赞同：5
> 
> 时间：2013-03-14T12:49:18.887
> 
> 标签：sql-server, sql-server-2008

我在哪里找到了在 SQL Server 2008 Management Studio 中执行查询的毫秒数？

在实际执行计划中，我看不到时间。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-14T12:53:34.933

在查询的开始和结束时使用[SET STATISTICS TIME ON/OFF](http://msdn.microsoft.com/en-us/library/ms190287.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:09:39.627

几个地方：

*   [`sys.dm_exec_query_stats`](http://msdn.microsoft.com/en-us/library/ms189741.aspx)有`last_worker_time`并且`last_elapsed_time`
*   [SQL:StmtCompleted](http://msdn.microsoft.com/en-us/library/ms189886.aspx)捕获`Duration`
*   [RPC](http://msdn.microsoft.com/en-us/library/ms175543.aspx)同上：已完成
*   SP同上[：StmtCompleted](http://msdn.microsoft.com/en-us/library/ms189570.aspx)
*   `set statistics time on`正如杰克已经指出的那样
*   [XEvents](http://www.sqlskills.com/blogs/jonathan/category/xevent-a-day-series/)基本上可以跟踪*所有内容*以及更多内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-02-06T08:57:14.930

```
 CultureInfo newCulture = (CultureInfo)System.Threading.Thread.CurrentThread.CurrentCulture.Clone();
 newCulture.DateTimeFormat.ShortDatePattern = "MM-dd-yyyy";
 newCulture.DateTimeFormat.DateSeparator = "-";
 Thread.CurrentThread.CurrentCulture = newCulture; 
```

# java - 如何获取 ConstraintValidatorContext？

> ID：15409763
> 
> 赞同：6
> 
> 时间：2013-03-14T12:49:28.027
> 
> 标签：java, jakarta-ee, bean-validation

我正在编写对 Bean Validation (JSR-303) 进行显式调用的代码，如下所示：

```
public class Example {

    @DecimalMin(value = "0")
    private static final String ANNOTATED = "";

    public void isPossitiveNumber(String str){

        ValidatorFactory factory =
             Validation.buildDefaultValidatorFactory();

        ConstraintValidator<DecimalMin, String>
             validator = 
                  factory.getConstraintValidatorFactory().getInstance(
                          DecimalMinValidatorForString.class);

        validator.initialize(
                  ReflectionUtils.findField(getClass(), "ANNOTATED")
                         .getAnnotation(
                          DecimalMin.class));

        boolean isValid = validator.isValid(str, null);

        return isValid;

    }

} 
```

注意这一行**boolean isValid = validator.isValid(str, null);** 我转移`null`是`ConstraintValidatorContext`因为我没有办法获得/建造它。在这种特殊情况下，这很好，因为内部没有使用`ConstraintValidatorContext`，但很明显是一个hack。我应该如何获得`ConstraintValidatorContext`？

**添加**

我被要求提供用例。因此，例如，我正在编写自定义验证器，并且我想重用现有的验证。或者我正在编写上面描述的平面 Java 代码，我想重用现有的验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-06-13T10:42:08.647

我最近遇到了与 OP 完全相同的问题。然而，与公认的答案相反，可以编写包含 ConstraintValidationContext 的单元测试。这个优秀的链接解释了如何做到这一点， http: [//farenda.com/java/bean-validation-unit-testing/](http://farenda.com/java/bean-validation-unit-testing/)

基本上你需要使用 ValidatorFactory 来获得一个 Validator 接口，然后在该接口上调用 validate(c) ，其中参数 c 是包含 bean 验证注释的类的实例。代码示例更清晰，代码示例取自上述链接。

```
 public class Player {

   // name have to be 3 chars:
   @Size(min = 3, max = 3)
   private String name;

   // possible score in game:
   @Min(0) @Max(100)
   private int score;

   public Player(String name, int score) {
      this.name = name;
      this.score = score;
   }

   // just for logs
   @Override
   public String toString() {
      return "Player{name='" + name + '\'' + ", score=" + score + '}';
   }
}

public class PlayerValidationTest {
   private static ValidatorFactory validatorFactory;
   private static Validator validator;

   @BeforeClass
   public static void createValidator() {
      validatorFactory = Validation.buildDefaultValidatorFactory();
      validator = validatorFactory.getValidator();
   }

   @AfterClass
   public static void close() {
      validatorFactory.close();
   }

   @Test
   public void shouldDetectInvalidName() {
      //given too short name:
      Player player = new Player("a", 44);

      //when:
      Set<ConstraintViolation<Player>> violations
            = validator.validate(player);

      //then:
      assertEquals(violations.size(), 1);
  } 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-15T09:45:49.870

简单的答案是你不能。*ConstraintValidatorContext*是一个接口，没有 Bean Validation API 来获取这样的实例。您可以编写自己的实现，但要正确实现它，您必须重新实现 Bean Validation 提供程序的许多功能。例如，查看 Hibernate Validator 特定实现 - [https://github.com/hibernate/hibernate-validator/blob/master/engine/src/main/java/org/hibernate/validator/internal/engine/constraintvalidation/ConstraintValidatorContextImpl。爪哇](https://github.com/hibernate/hibernate-validator/blob/master/engine/src/main/java/org/hibernate/validator/internal/engine/constraintvalidation/ConstraintValidatorContextImpl.java)

也就是说，我相信您的重用尝试是错误的。这不在 Bean Validation 的缩进中，您最终会得到不可移植且难以维护的代码。如果您想重用现有约束，请查看约束组合，例如 @NotEmpty 重用 @NotNull 和 @Size

```
@Documented
@Constraint(validatedBy = { })
@Target({ METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR, PARAMETER })
@Retention(RUNTIME)
@ReportAsSingleViolation
@NotNull
@Size(min = 1)
public @interface NotEmpty {
    String message() default "{org.hibernate.validator.constraints.NotEmpty.message}";

    Class<?>[] groups() default { };

    Class<? extends Payload>[] payload() default { };

    /**
     * Defines several {@code @NotEmpty} annotations on the same element.
     */
    @Target({ METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR, PARAMETER })
    @Retention(RUNTIME)
    @Documented
    public @interface List {
        NotEmpty[] value();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T14:31:08.393

您应该为在这种情况下验证的约束声明一个组。然后您可以调用该组的正常验证。有关组定义及其语义，请参见规范的第 2.1.1.2 节和第 3.4 节。为了验证组，您只需调用`Validator.validate(T Object, Class<?>... groups)`. `ConstraintValidatorContext`在这种情况下，没有必要搞乱。

# java - 如何在 JFrame 中停止调整 JPanel 的大小

> ID：15409767
> 
> 赞同：0
> 
> 时间：2013-03-14T12:49:36.040
> 
> 标签：java, swing, layout, jpanel

我有扩展JPanel的提醒类，带有boxlayout和

```
setPreferredSize(new Dimension(500,500)) 
```

在主类中，我有 JFrame

```
rem = new Reminder();

            frame.setSize(900,900);
            rem.setMaximumSize(new Dimension(500,500));
            frame.getContentPane().removeAll();
            frame.setLayout(new BorderLayout());
            frame.add(rem,BorderLayout.CENTRE);
            frame.validate();
            frame.repaint(); 
```

我希望 jframe 中心的提醒面板不改变其大小（500,500），并且框架不应该改变它的大小（900,900）。当我运行上面的代码时，rem 面板完全展开了。如何使rem面板居中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:00:29.817

简单的方法：使用 AbsoluteLayout 并使用图形编辑器将“rem”准确定位在您想要的位置。然后为框架设置不变的大小：

```
 frame.setResizable(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:54:10.743

不要使用`BorderLayout`. 如果 BorderLayout 正是您不想要的，为什么还要使用它？

编辑：`BoxLayout`是一种选择，如果您真的需要自己绝对定位所有内容，您也可以决定不使用布局管理器，例如[http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:03:57.580

另外，如果您想使用 Borderlayout，我很确定这是您的代码中的错字：

```
frame.add(rem,BorderLayout.CENTRE); 
```

应该：

```
frame.add(rem,BorderLayout.CENTER); 
```

会不会是这件小事让你烦恼？

# c# - 从类库调用 WCF 服务：App.Config 与 Web.Config？

> ID：15409773
> 
> 赞同：1
> 
> 时间：2013-03-14T12:49:45.497
> 
> 标签：c#, wcf

从现有的`WebApplication`我用来调用 WCF 服务。这些服务的代理是使用添加服务参考菜单创建的。从而在该项目中生成>> Web.config。

我`class library project`在解决方案中添加了另一个。该项目还添加了对服务的引用。从而在该项目中生成>> App.Config 文件。

我理解，在 N 层应用程序中，我们应该有到服务的公共网关。只是出于好奇，我想知道-

> 对于源自 WebApp、传播到类库的 WCF 调用，将引用哪个配置文件 (App/Web) 来定位客户端端点配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:22:12.563

该`web.config`文件将用于定位服务。

原因是在这种情况下，app 域属于 web 应用程序，而不是类库，并且此应用程序域的默认配置文件是`web.config`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:20:17.380

@musefan 是正确的。使用的是 web.config。

如果需要，可以将一些配置部分拆分为单独的文件，并从主 web.config 中引用它们。您可能希望这样做，以便可以在一个地方维护 WCF 客户端和服务器配置，以确保它们是一致的。

例如，如果你想分开这个`<client>`部分，你可以这样做：

```
<client configSource="client.xml" /> 
```

其中 client.xml 是一个包含相关客户端配置信息的文件。

这篇博文更详细地告诉你如何做到这一点。

[http://blog.andreloker.de/post/2008/06/keep-your-config-clean-with-external-config-files.aspx](http://blog.andreloker.de/post/2008/06/keep-your-config-clean-with-external-config-files.aspx)

# css - Padding in responsive email design

> ID：15409777
> 
> 赞同：0
> 
> 时间：2013-03-14T12:49:55.297
> 
> 标签：css, responsive-design, media-queries, html-email

I can't seem to find a definitive answer to my query and especially as this is all a new field to me, finding it a little tricky but i'm almost there :)

I am basically trying to add a padding style to the social icons at the top of th email so that when the browser is resized, (essentially looked at on a smartphone) there is sufficient space between each icon.

When the screen is at full size it has equal spacing more so because the columns it sits in are loosely defined. It would be great to not have to cheat and use one image but rather the spacing kicks into effect as the screen decreases past breakpoints.

Code is below:

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!-- If you delete this tag, the sky will fall on your head -->
<meta name="viewport" content="width=device-width" />

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>ZURBemails</title>
<link href="stylesheets/email2.css" rel="stylesheet" type="text/css" />
<style>
@charset "UTF-8";
/* CSS Document */

/* ------------------------------------- 
        GLOBAL 
------------------------------------- */
* { 
    margin:0;
    padding:0;
}
* { font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; }

img { 
    max-width: 100%; 
}
.collapse {
    margin:0;
    padding:0;
}
body {
    -webkit-font-smoothing:antialiased; 
    -webkit-text-size-adjust:none; 
    width: 100%!important; 
    height: 100%;
}

/* ------------------------------------- 
        ELEMENTS 
------------------------------------- */
a { color: #2BA6CB;}

.btn {
    text-decoration:none;
    color: #FFF;
    background-color: #666;
    padding:10px 16px;
    font-weight:bold;
    margin-right:10px;
    text-align:center;
    cursor:pointer;
    display: inline-block;
}

p.callout {
    padding:15px;
    background-color:#ECF8FF;
    margin-bottom: 15px;
}
.callout a {
    font-weight:bold;
    color: #2BA6CB;
}

p.subtext {
    padding:0 15px;
    margin-bottom: 15px;
}
.subtext a {
    font-weight:bold;
    color: #2BA6CB;
}

table.social {
/*  padding:15px; */
    background-color: #ebebeb;

}
.social .soc-btn {
    padding: 3px 7px;
    font-size:12px;
    margin-bottom:10px;
    text-decoration:none;
    color: #FFF;font-weight:bold;
    display:block;
    text-align:center;
}
a.fb { background-color: #3B5998!important; }
a.tw { background-color: #1daced!important; }
a.gp { background-color: #DB4A39!important; }
a.ms { background-color: #000!important; }

.body-wrap tr .container .content .nav {
    text-align: center; 
    color:#696969;
    margin-top:-10px;
    margin-bottom:5px;
    line-height:1.5;
}
.body-wrap tr .container .content .nav a {
    text-decoration:none;   
    color:#696969;
}

.sidebar .soc-btn { 
    display:block;
    width:100%;
}

p.topNote { border-top: 4px solid #1b3281; margin-top:-2px;}

/* ------------------------------------- 
        HEADER 
------------------------------------- */
table.head-wrap { width: 100%;}

.header.container table td.logo { padding: 15px; }
.header.container table td.label { padding: 15px; padding-left:0px;}

/* ------------------------------------- 
        BODY 
------------------------------------- */
table.body-wrap { width: 100%;}

/* ------------------------------------- 
        FOOTER 
------------------------------------- */
table.footer-wrap { width: 100%;    clear:both!important;
}
.footer-wrap .container td.content  p { border-top: 1px solid rgb(215,215,215); padding-top:15px;}
.footer-wrap .container td.content p {
    font-size:10px;
    font-weight: bold;

}

/* ------------------------------------- 
        TYPOGRAPHY 
------------------------------------- */
h1,h2,h3,h4,h5,h6 {
font-family: "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", sans-serif; line-height: 1.1; margin-bottom:15px; color:#000;
}
h1 small, h2 small, h3 small, h4 small, h5 small, h6 small { font-size: 60%; color: #6f6f6f; line-height: 0; text-transform: none; }

h1 { font-weight:bold; font-size: 27px; color:#1b3180;}
h2 { font-weight:bold; font-size: 22px; color:#1b3180;}
h3 { font-weight:900; font-size: 22px; color:#0166b1;}
h4 { font-weight:500; font-size: 20px; color:#0166b1;}
h5 { font-weight:900; font-size: 17px;}
h6 { font-weight:900; font-size: 14px; text-transform: uppercase; color:#444;}

.collapse { margin:0!important;}

p, ul { 
    margin-bottom: 10px; 
    font-weight: normal; 
    font-size:14px; 
    line-height:1.6;
}
p.lead { font-size:17px; }
p.last { margin-bottom:0px;}

ul li {
    margin-left:5px;
    list-style-position: inside;
}

/* ------------------------------------- 
        SIDEBAR 
------------------------------------- */
ul.sidebar {
    background:#ebebeb;
    display:block;
    list-style-type: none;
}
ul.sidebar li { display: block; margin:0;}
ul.sidebar li a {
    text-decoration:none;
    color: #666;
    padding:10px 16px;
/*  font-weight:bold; */
    margin-right:10px;
/*  text-align:center; */
    cursor:pointer;
    border-bottom: 1px solid #777777;
    border-top: 1px solid #FFFFFF;
    display:block;
    margin:0;
}
ul.sidebar li a.last { border-bottom-width:0px;}
ul.sidebar li a h1,ul.sidebar li a h2,ul.sidebar li a h3,ul.sidebar li a h4,ul.sidebar li a h5,ul.sidebar li a h6,ul.sidebar li a p { margin-bottom:0!important;}

/* --------------------------------------------------- 
        RESPONSIVENESS
        Nuke it from orbit. It's the only way to be sure. 
------------------------------------------------------ */

/* Set a max-width, and make it display as block so it will automatically stretch to that width, but will also shrink down on a phone or something */
.container {
    display:block!important;
    max-width:640px!important;
    margin:0 auto!important; /* makes it centered */
    clear:both!important;
}

/* This should also be a block element, so that it will fill 100% of the .container */
.content {
    padding:15px;
    max-width:600px;
    margin:0 auto;
    display:block; 
}

/* Let's make sure tables in the content area are 100% wide */
.content table { width: 100%; }

/* Odds and ends */
.column {
    width: 300px;
    float:left;
}
.column tr td { padding: 15px; }
.column-wrap { 
    padding:0!important; 
    margin:0 auto; 
    max-width:600px!important;
}
.column table { width:100%;}
.social .column {
    width: 280px;
    min-width: 279px;
    float:left;
}

/* Be sure to place a .clear element after each set of columns, just to be safe */
.clear { display: block; clear: both; }

.double .column {
    width: 280px;
    min-width: 279px;
    float:left;
}

.socialicons { padding-left:3px; }

/* ------------------------------------------- 
        PHONE
        For clients that support media queries.
        Nothing fancy. 
-------------------------------------------- */
@media only screen and (max-width: 600px) {

    a[class="btn"] { display:block!important; margin-bottom:10px!important; background-image:none!important; margin-right:0!important;}

    div[class="column"] { width: auto!important; float:none!important;}

    table.social div[class="column"] {
        width:auto!important;
    }

    /* flex the hero image */
.container img {  width:100% !important; }

}

</style>
</head>

<body bgcolor="#ececec">

<!-- HEADER -->
<table class="head-wrap" bgcolor="#ffffff" width="100%">
    <tr>
        <td></td>
        <td class="header container">

                <div class="content">
                  <table bgcolor="#ffffff">
                    <tr>
                        <td height="42" style=" padding-right:10px;">
                        <img src="http://placehold.it/500x26"></td>
                        <td rowspan="4" align="right"><img src="http://www.google.co.uk/emails/Template2013/images/atol.jpg"/></td>
                    </tr>
                    <tr>
                      <td style="color: #CCCCCC;"><img src="http://placehold.it/265x20"></td>
                    </tr>
                    <tr>
                      <td style="color: #CCCCCC;">&nbsp;</td>
                    </tr>
                    <tr>
                      <td style="color: #CCCCCC;"><table width="100%" border="0" cellspacing="0" cellpadding="0">
                      <tr>
                            <td width="31%">&nbsp;</td>
                            <td width="30%"><table width="100%" border="0" cellspacing="0" cellpadding="0" align="right">
                              <tr>
                      <td style="color: #CCCCCC;">&nbsp;</td>
                    </tr>
                            </table></td>
                        </tr>
                      </table></td>
                    </tr>
                  </table>
                    <table width="100%" border="0" cellpadding="0" cellspacing="0" class="socialicons">
                      <tr>
                        <td width="51%">&nbsp;</td>
                        <td width="13%">&nbsp;</td>
                        <td width="8%"><img src="http://www.google.co.uk/emails/Template2013/images/FB.png" alt="Facebook icon" width="24" height="23" border="0" class="socialicons"/></td>
                        <td width="7%"><img src="http://www.google.co.uk/emails/Template2013/images/twit.png" border="0" width="24" height="23" alt="Facebook icon" /></td>
                        <td width="7%"><img src="http://www.google.co.uk/emails/Template2013/images/youtube.png" border="0" width="24" height="23" alt="Facebook icon" /></td>
                        <td width="8%"><img src="http://www.google.co.uk/emails/Template2013/images/flickr.png" border="0" width="24" height="23" alt="Facebook icon" /></td>
                        <td width="6%"><img src="http://www.google.co.uk/emails/Template2013/images/gplus.png" border="0" width="24" height="23" alt="Facebook icon" /></td>
                      </tr>
                  </table>
                </div>

  </td>
        <td></td>
    </tr>
</table><!-- /HEADER -->

<!-- BODY -->
<table class="body-wrap">
    <tr>
        <td></td>
        <td class="container" bgcolor="#FFFFFF">

            <div class="content">
                 <table class="nav" width="100%">
                            <tr>
                              <td class="container" bgcolor="#FFFFFF">&nbsp;&nbsp; 
<a href="http://www.google.co.uk/ski-resorts/austria-ski-holidays/?em=cs080213" target="_blank">Austria</a>&nbsp; &#124; 
<a href="http://www.google.co.uk/ski-resorts/france-ski-holidays/?em=cs080213" target="_blank" >France</a>&nbsp; &#124;
<a href="http://www.google.co.uk/ski-resorts/italy-ski-holidays/?em=cs080213" target="_blank" > Italy</a>&nbsp; &#124; 
<a href="http://www.google.co.uk/ski-resorts/switzerland-ski-holidays/?em=cs080213" target="_blank" >Switzerland</a>&nbsp; &#124;
<a href="http://www.google.co.uk/ski-resorts/canada-ski-holidays/?em=cs080213" target="_blank" > Canada</a>&nbsp; &#124;
<a href="http://www.google.co.uk/ski-resorts/usa-ski-holidays/?em=cs080213" target="_blank" > USA</a>&nbsp; &#124; 
<a href="http://www.google.co.uk/ski-resorts/ski-holidays/?em=cs080213" target="_blank"> All Ski destinations</a></td>
                            </tr>
                        </table>
            <table>
                <tr>
                    <td>
                    <!-- A Real Hero (and a real human being) -->
                        <p><img src="http://www.google.co.uk/emails/Template2013/images/hero_image_template.jpg" />  

                       </p><!-- /hero -->
                      <p class="topNote"></p>
                      <!-- Callout Panel -->
                      <h1>Welcome Mr Smith,</h1>
                        <p class="callout">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt.
                         Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt.
                    </p>
                        <br />
                  <h3>Subheader 1</h3>

                        <p class="subtext">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et.</p>
                       <table class="double" width="100%">
                            <tr>
                                <td>

                                    <!--- column 1 -->
                                  <table align="center" class="column">
                                        <tr>
                                            <td>                
                                    <p><img src="http://placehold.it/280x150" /></p>                                        
                                            </td>
                                        </tr>
                                  </table><!-- /column 1 -->    

                                    <!--- column 2 -->
                                    <table align="left" class="column" bgcolor="">
                                        <!--<tr bgcolor="#1b3281">
                                            <td>                                
                                                <p style="color:#FFFFFF; font-weight:bold;">Delta Whistler Village, CANADA</p>
                                            </td>
                                      </tr>-->
                                        <tr>
                                          <td>
                                                          <h4>Delta Whistler Village</h4>

                                          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Duis autem vel eum iriure dolor in hendrerit in </p></td>
                                      </tr>                
                                  </table>                                <!-- /column 2 -->

                              </td>
                            </tr>
                        </table> <br />
                         <table class="double" width="100%">
                            <tr>
                                <td>

                                    <!--- column 1 -->
                                  <table align="center" class="column">
                                        <tr>
                                            <td>                
                                    <p><img src="http://placehold.it/280x150" /></p>                                        
                                            </td>
                                        </tr>
                                  </table><!-- /column 1 -->    

                                    <!--- column 2 -->
                                    <table align="left" class="column" bgcolor="">
                                        <!--<tr bgcolor="#1b3281">
                                            <td>                                
                                                <p style="color:#FFFFFF; font-weight:bold;">Delta Whistler Village, CANADA</p>
                                            </td>
                                      </tr>-->
                                        <tr>
                                          <td>
                                                          <h4>Delta Whistler Village</h4>

                                          <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Duis autem vel eum iriure dolor in hendrerit in </p></td>
                                      </tr>                
                                  </table>                                <!-- /column 2 -->

                              </td>
                            </tr>
                        </table> 

                        <!-- A Real Hero (and a real human being) -->
                        <p>&nbsp;</p><!-- /hero -->

                    <!-- Callout Panel -->
                        <p class="callout">
                            Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt. <a href="#">Do it Now! &raquo;</a>
                        </p><!-- /Callout Panel -->

                        <h3>Title Ipsum <small>This is a note.</small></h3>
                        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
                        <a class="btn">Click Me!</a>

                        <br/>
                        <br/>                           

                        <!-- social & contact -->
                        <table class="social" width="100%">
                            <tr>
                                <td>

                                    <!--- column 1 -->
                                    <table align="left" class="column">
                                        <tr>
                                            <td>                

                                                <h5 class="">Connect with Us:</h5>
                                                <p class=""><a href="#" class="soc-btn fb">Facebook</a> <a href="#" class="soc-btn tw">Twitter</a> <a href="#" class="soc-btn gp">Google+</a></p>

                                            </td>
                                        </tr>
                                    </table><!-- /column 1 -->  

                                    <!--- column 2 -->
                                    <table align="left" class="column">
                                        <tr>
                                            <td>                

                                                <h5 class="">Contact Info:</h5>                                             
                                                <p>Phone: <strong>408.341.0600</strong><br/>
                Email: <strong><a href="emailto:hseldon@trantor.com">hseldon@trantor.com</a></strong></p>

                                            </td>
                                        </tr>
                                    </table><!-- /column 2 -->

                                    <span class="clear"></span> 

                                </td>
                            </tr>
                        </table><!-- /social & contact -->

                    </td>
                </tr>
            </table>
            </div>

        </td>
        <td></td>
    </tr>
</table><!-- /BODY -->

<!-- FOOTER -->
<table class="footer-wrap">
    <tr>
        <td></td>
        <td class="container">

                <!-- content -->
                <div class="content">
                <table>
                <tr>
                    <td align="center">
                        <p>
                            <a href="#">Terms</a> |
                            <a href="#">Privacy</a> |
                            <a href="#"><unsubscribe>Unsubscribe</unsubscribe></a>
                        </p>
                    </td>
                </tr>
            </table>
                </div><!-- /content -->

        </td>
        <td></td>
    </tr>
</table><!-- /FOOTER -->

</body>
</html> 
```

I am open to differing suggestions also.

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:59:22.753

问题：你总是需要 5px 的空间吗？

一种方法是在项目之间添加空 td 并将宽度设置为 5 像素，但是，几乎可以通过添加应用默认字体设置的非宽度声明单元格来实现相同的效果，或者我应该说“隐含”，因为前景与秋天回到用户在未声明时为字体大小显示设置的任何内容（由于某种原因不是级联的一部分......）“空”且没有宽度使它们的宽度为“自动”，这意味着它们具有响应性类型趋势，而不是被迫进入设定的宽度。请参见下面的示例：

```
<table width="100%" border="0" cellpadding="0" cellspacing="0" class="socialicons">
                      <tr>
                        <td width="51%">&nbsp;</td>
                        <td width="10%">&nbsp;</td>
                        <td width="8%" style="font-size:3px; line-height:3px;"><img src="http://www.google.co.uk/emails/Template2013/images/FB.png" alt="Facebook icon" width="24" height="23" border="0" class="socialicons"/></td>
                        <td>&nbsp;</td>
                        <td width="7%" style="font-size:3px; line-height:3px;"><img src="http://www.google.co.uk/emails/Template2013/images/twit.png" border="0" width="24" height="23" alt="Facebook icon" /></td>
                        <td>&nbsp;</td>
                        <td width="7%" style="font-size:3px; line-height:3px;"><img src="http://www.google.co.uk/emails/Template2013/images/youtube.png" border="0" width="24" height="23" alt="Facebook icon" /></td>
                        <td>&nbsp;</td>
                        <td width="8%" style="font-size:3px; line-height:3px;"><img src="http://www.google.co.uk/emails/Template2013/images/flickr.png" border="0" width="24" height="23" alt="Facebook icon" /></td>
                        <td>&nbsp;</td>
                        <td width="6%" style="font-size:3px; line-height:3px;"><img src="http://www.google.co.uk/emails/Template2013/images/gplus.png" border="0" width="24" height="23" alt="Facebook icon" /></td>
                      </tr>
                  </table> 
```

旁注：当混合百分比和固定宽度时，最好将一个没有宽度的单元格声明为“自动”大小，以补偿极小或极大宽度的视图。

当然，这是假设`<head>`某些电子邮件客户端正在剥离 css 中的任何声明，并且您需要后备布局修复。

添加在：

```
<td width="8%" style="min-width:20px (or whatever your pixel width for the icon is); ... width:20px\9;"><img> 
```

IE inline 的反斜杠+9 hack 将宽度强制为 20 像素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:03:08.633

尝试在您的媒体查询中输入类似这样的内容

```
.socialicons { padding-left: 14%; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T21:08:43.353

尝试使用`cellpadding="5"`. 这将在所有表格单元格之间保留 5px。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-16T19:30:44.870

将填充设置为 0 并在正文中的图像之间，使用类似图像间隔的东西来定义你想要的图标之间的宽度。间隔是空白图像，其中没有任何内容。这将消除 css 并使其与所有电子邮件客户端更加一致。

```
<table cellpadding="0" cellspacing="0" border="0">
 <tr>
  <td><img src="images/spacer.gif" width="1" height="10" style="display:block"/></td>
 </tr>
</table> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-16T22:44:12.057

您可以使用的一个技巧是

```
<table width="680" border="0" cellpadding="0" cellspacing="0" align="center" bgcolor="#ebebeb">
<tr>
    <td width="100%">
        <table align="center" border="0" cellpadding="0" cellspacing="0" width="100%">
            <tr>
                <td>
                    <table cellpadding="0" cellspacing="0" border="0" align="center">
                        <tr>
                            <td valign="top" style="font-size: 12px; color: #a2a2a2; font-weight: normal; font-family: Helvetica, Arial, sans-serif; line-height: 26px; vertical-align: top; text-align:center; padding:20px 0 15px">
                                <table align="center">
                                    <tr>
                                        <td>
                                            <a style="text-decoration:none" href="https://www.example.com">
                                                <img src="https://www.emailonacid.com/images/emails/stamplia1/facebook.png" width="35" height="35" alt="Facebook" title="Facebook" border="0" />
                                            </a>
                                        </td>
                                        <td>
                                            <a style="text-decoration:none" href="https://www.example.com">
                                                <img src="https://www.emailonacid.com/images/emails/stamplia1/twitter.png" width="35" height="35" alt="Twitter" title="Twitter" border="0" />
                                            </a>
                                        </td>
                                        <td>
                                            <a style="text-decoration:none" href="https://www.example.com">
                                                <img src="https://www.emailonacid.com/images/emails/stamplia1/google.png" width="35" height="35" alt="Google" title="Google" border="0" />
                                            </a>
                                        </td>
                                        <td>
                                            <a style="text-decoration:none" href="https://www.example.com">
                                                <img src="https://www.emailonacid.com/images/emails/stamplia1/rss.png" width="35" height="35" alt="RSS" title="RSS" border="0" />
                                            </a>
                                        </td>
                                        <td>
                                            <a style="text-decoration:none" href="https://www.example.com">
                                                <img src="https://www.emailonacid.com/images/emails/stamplia1/mail.png" width="35" height="35" alt="Mail" title="Mail" border="0" />
                                            </a>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </td>
</tr> 
```

这是一个 jsfiddle，查看它的实际效果：http: [//jsfiddle.net/ahykdum5/](http://jsfiddle.net/ahykdum5/)

# java - 从 Java\httpclient 3\linux 连接到 NTLMv2

> ID：15409778
> 
> 赞同：5
> 
> 时间：2013-03-14T12:50:07.467
> 
> 标签：java, authentication, httpclient, ntlm, ntlmv2

我正在使用 MAC 和 LINUX、java6 和 apache http-client 3.1 通过 NTLM auth 连接到共享点。

[我使用http://jcifs.samba.org/](http://jcifs.samba.org/)连接到 ntlm ，它工作正常，直到我不得不连接到 NTLMv2。我试过这个 [http://devsac.blogspot.com/2010/10/supoprt-for-ntlmv2-with-apache.html](http://devsac.blogspot.com/2010/10/supoprt-for-ntlmv2-with-apache.html) 但它不适用于 NTLMv2，

有什么方法可以让我的 httpclient 3.1 连接到 NTLMv2 吗？如果没有，有没有办法在没有 httpclient 的情况下将 java 连接到 NTLMv2？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T19:50:41.423

找到了答案，httpclient 版本 4.2.3 + 支持 NTLMv2 开箱即用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-15T15:10:24.320

我能够使用 httpclient 3.1 连接到 ntlm v2： [http ://devsac.blogspot.com/2010/10/supoprt-for-ntlmv2-with-apache.html?showComment=1381849801529#c7263680121593236558](http://devsac.blogspot.com/2010/10/supoprt-for-ntlmv2-with-apache.html?showComment=1381849801529#c7263680121593236558)

顺便说一句 - httpclient 4.x 支持 ntlm v2 开箱即用。

# ruby-on-rails-3 - Rails 3 - how to assign the value to nested attributes before calling save in update action

> ID：15409779
> 
> 赞同：0
> 
> 时间：2013-03-14T12:50:10.700
> 
> 标签：ruby-on-rails-3, validation, attributes

Models associations are

document.rb

```
has_many :sections
accepts_nested_attributes_for :sections, :allow_destroy => :true, :reject_if => proc { |attrs| attrs.all? { |k, v| v.blank? } } 
```

section.rb

```
belongs_to :document
has_many :paragraphs, :dependent => :destroy
has_many :contents :through => :paragraphs
validates :user_id, :presence =>  { :message => "Must be filled" } 
```

paragraph.rb

```
attr_accessible :user_id, :section_id, :content_id
belongs_to :section
belongs_to :content
validates :user_id, :section, :content, :presence =>  { :message => "Must be filled" } 
```

paragraphs table just like a intermediate table for sections and contents and I want to save records in documents, sections and paragraphs table using single submission. So I designed form as like

**_form.html.erb**

```
<%= form_for @document, :validate => true do |f| %>
    <%= f.error_messages %>
    <%= f.text_field :name %>
    <% f.fields_for :sections do |builder| %> 
   <%= builder.text_field :name %>
   <%= builder.select :content_ids .... {:multiple => true} %>
    <% end %>
<% end %> 
```

example parameters when submiting the form

```
{"document"=>{"name"=>"sdf", "sections_attributes"=>{"0"=>{"name"=>"sdf", "description"=>"sdf", "_destroy"=>"0", "content_ids" => ["1", "2"]}}, "commit"=>"Update Document", "id"=>"3"} 
```

In additionally, I am updating current_user's id to user_id column of paragraphs table.

update

```
@document = Document.find(params[:id])
@document.attributes = params[:document]
@document.sections.each {|section| 
  section.user_id = current_user.id 
  section.paragraphs.each {|paragraph| paragraph.user_id = current_user.id}
}
if @document.save!
  # success
else
  render :action => 'edit'
end 
```

I got "Validation failed: User Must be filled".

Is validation triggered when assigning attributes using object.attributes= as above

How to assign the value to user_id in paragraph object before calling save method

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:40:42.877

可能有帮助。

```
<%= f.hidden_field :user_id, value: current_user.id %> 
```

# sql-server-2005 - how to restore TFS project?

> ID：15409783
> 
> 赞同：0
> 
> 时间：2013-03-14T12:50:28.997
> 
> 标签：sql-server-2005, tfs, tfs-2005

I deleted a project folder in TFS, without realizing and checked in pending changes as well.

The local project copy was in offline state and I mistakingly made it online. Because of this I lost the only copy I had. Is there a way to restore the project? I know this is foolish and careless but I made the mistake already. Please help.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:59:00.773

检查这个：[这里](https://stackoverflow.com/questions/10479441/tfs-restore-deleted-folders-and-items)

在团队资源管理器中（在 Visual Studio 中）：工具 | 选项 | 源代码管理 | Visual Studio Team Foundation Server 并选择显示已删除项目...

然后在源代码管理资源管理器中，您会看到项目变灰。您可以右键单击它们并取消删除。（只有在取消删除后，它们将包含在您当前的工作区中时，此选项才可用）。

或者使用 TFS PowerToys，您可以查看历史并右键单击以选择“回滚整个变更集”：这将创建挂起的更改以恢复所选变更集的更改。

# c# - How to use Orderby for creating dynamic linq queries?

> ID：15409788
> 
> 赞同：4
> 
> 时间：2013-03-14T12:50:39.350
> 
> 标签：c#, linq

I have linq query which is as follows

```
string sortby="Date"; //it can be name or something else as well

var query=(from t in Uow.Transactions.GetAllWithReferences()
           orderby t.Date descending
           select t); 
```

But I want to orderby differently based on sortby variable value. How can i do that using Linq?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:00:17.187

使用反射：

```
string sortby="Date" //it can be name or something else as well

var query=(from t in Uow.Transactions.GetAllWithReferences()
           orderby t.GetType().GetProperty(sortby).GetValue(t, null) descending
           select t); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:05:38.303

如果您使用 OrderBy() LINQ 扩展方法，您可以传入一个谓词，它可能类似于（未经测试）：

```
Predicate orderByClause;
if ( blah == "date" )
    orderByClause = { order => order.Date };

if ( blah == "something else" ) 
    orderByClause = { order => order.SomethingElse };

var oSortedList = oResultList.OrderBy( orderByClause ); 
```

我确定语法是否可行，但我之前做过类似的事情......

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T13:02:40.017

对于示例类：

```
private class Tst
{
    public int field1 { get; set; }

    public string field2 { get; set; }

    public string field3 { get; set; }
} 
```

你可以这样做：

```
var index = 1;

var sortedList = (from l in list
                  orderby index == 1 ? l.field1.ToString() : index == 2 ? l.field2 : l.field3  
                  select l); 
```

但是由于字段具有不同的类型，您必须进行一些类型转换，如您所见`l.field1.ToString()`

使用 lambda 的方法是：

```
var sortedList =
    list.OrderBy(l => 
            index == 1 ? l.field1.ToString() 
            : index == 2 ? l.field2 
            : l.field3)
        .Select(l => l).ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-14T13:08:36.760

你可以使用一个库，这是我最喜欢的一个：http: [//dynamite.codeplex.com/](http://dynamite.codeplex.com/)

# c# - Adding an application firewall rule to both private and public networks via win7 FirewallAPI

> ID：15409790
> 
> 赞同：8
> 
> 时间：2013-03-14T12:50:42.420
> 
> 标签：c#, firewall, windows-firewall, windows-firewall-api, firewall-access

A little background: Basicaly I'd like to add a program firewall access rule to both private and public networks.

I used to use this- "netsh firewall add allowedprogram program= "Path.." name=AppName ENABLE scope=ALL profile=CURRENT"

But now I'd like to automate the proccess a little using a COM object. Found this shiny piece of code - [http://web.archive.org/web/20070707110141/http://www.dot.net.nz/Default.aspx?tabid=42&mid=404&ctl=Details&ItemID=8](http://web.archive.org/web/20070707110141/http://www.dot.net.nz/Default.aspx?tabid=42&mid=404&ctl=Details&ItemID=8)

And after implementing the class I've been trying to use- FirewallHelper.Instance.GrantAuthorization(@"Path... ","AppName ",NET_FW_SCOPE_.NET_FW_SCOPE_ALL,NET_FW_IP_VERSION_.NET_FW_IP_VERSION_ANY);

The problem I'm facing is that the GrantAuthorization method will only add a rule for the public OR private network whereas my old netsh command would 2 rules for- 1 for each network.

The commands actually seems very similar so it is kinda buffling to me.

So... how to add both network rules?

Shaun

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-12-01T10:25:45.537

我的回答来自大卫的回答，但更详细。并修复有关设置 Localports 的问题。您需要在设置 Localports 之前设置协议。更多细节如下：

首先，您需要导入参考FirewallAPI.dll。它在“C:\Windows\System32\FirewallAPI.dll”中，然后：

```
using NetFwTypeLib; 
```

并将代码插入您的：

```
 Type tNetFwPolicy2 = Type.GetTypeFromProgID("HNetCfg.FwPolicy2");
        INetFwPolicy2 fwPolicy2 = (INetFwPolicy2)Activator.CreateInstance(tNetFwPolicy2);
        var currentProfiles = fwPolicy2.CurrentProfileTypes;

        // Let's create a new rule
        INetFwRule2 inboundRule = (INetFwRule2)Activator.CreateInstance(Type.GetTypeFromProgID("HNetCfg.FWRule"));
        inboundRule.Enabled = true;
        //Allow through firewall
        inboundRule.Action = NET_FW_ACTION_.NET_FW_ACTION_ALLOW;
        //Using protocol TCP
        inboundRule.Protocol = 6; // TCP
        //Port 81
        inboundRule.LocalPorts = "81";
        //Name of rule
        inboundRule.Name = "MyRule";
        // ...//
        inboundRule.Profiles = currentProfiles;

        // Now add the rule
        INetFwPolicy2 firewallPolicy = (INetFwPolicy2)Activator.CreateInstance(Type.GetTypeFromProgID("HNetCfg.FwPolicy2"));
        firewallPolicy.Rules.Add(inboundRule); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-14T17:48:52.700

我认为您最好的选择是[与具有高级安全 API 的 Windows 防火墙](http://msdn.microsoft.com/en-us/library/windows/desktop/ff956124%28v=vs.85%29.aspx "具有高级安全 API 的 Windows 防火墙")对话。

“C# INetFwRule2”的快速谷歌将向您展示如何注册或更新防火墙规则的大量示例。

为了增加公共和私人政策，我使用了一些类似的东西

```
Type tNetFwPolicy2 = Type.GetTypeFromProgID("HNetCfg.FwPolicy2");
INetFwPolicy2 fwPolicy2 = (INetFwPolicy2)Activator.CreateInstance(tNetFwPolicy2);
var currentProfiles = fwPolicy2.CurrentProfileTypes;

// Let's create a new rule

INetFwRule2 inboundRule = (INetFwRule2)Activator.CreateInstance(Type.GetTypeFromProgID("HNetCfg.FWRule"));
inboundRule.Enabled = true;
inboundRule.LocalPorts = "1234";
inboundRule.Protocol = 6; // TCP
// ...
inboundRule.Profiles = currentProfiles;

// Now add the rule

INetFwPolicy2 firewallPolicy = (INetFwPolicy2)Activator.CreateInstance(Type.GetTypeFromProgID("HNetCfg.FwPolicy2"));
firewallPolicy.Rules.Add(inboundRule); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-05-25T02:27:07.887

这个页面没有说这个已经被回答并且是旧的，所以以防万一，以备将来使用，我会回答这个。

首先，导入位于“C:\Windows\System32\FirewallAPI.dll”的引用 FirewallAPI.dll，然后添加 using 指令

```
using NetFwTypeLib; 
```

该`inboundRule.Profiles`属性似乎被归类为具有以下值的一组标志（该属性的类型是 int，所以我做了一个枚举）：

```
public enum FirewallProfiles
{
    Domain = 1,
    Private = 2,
    Public = 4
} 
```

因此，使用该代码，我们可以将配置文件更改为以下内容：

```
// Create a new rule
INetFwRule2 inboundRule = (INetFwRule2)Activator.CreateInstance(Type.GetTypeFromProgID("HNetCfg.FwRule"));
// Enable the rule
inboundRule.Enabled = true;
// Allow through firewall
inboundRule.Action = NET_FW_ACTION_.NET_FW_ACTION_ALLOW;
// Using protocol TCP
inboundRule.Protocol = 6; // TCP
// Set port number
inboundRule.LocalPorts = "1234";
// Name of rule
inboundRule.Name = "Name Of Firewall Rule";
// Set profiles
inboundRule.Profiles = (int)(FirewallProfiles.Private | FirewallProfiles.Public);

// Add the rule
INetFwPolicy2 firewallPolicy = (INetFwPolicy2)Activator.CreateInstance(Type.GetTypeFromProgID("HNetCfg.FwPolicy2"));
firewallPolicy.Rules.Add(inboundRule); 
```

或者您可以更改`inboundRule.Profiles`为 int 值。

两个注意事项：

1：如果您不在管理权限下运行此代码，

```
firewallPolicty.Rules.Add(inboundRule); 
```

会抛出异常。

2：`inboundRule.Profiles`必须在1到7之间，否则会抛出异常

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-21T15:48:31.320

以防万一你们想要**出站**规则：

```
inboundRule.Direction = NET_FW_RULE_DIRECTION_.NET_FW_RULE_DIR_OUT; 
```

# android - Intent from sensor listener within application class

> ID：15409792
> 
> 赞同：1
> 
> 时间：2013-03-14T12:50:53.197
> 
> 标签：android, android-intent

I am trying to include shake functionality in my app. For that i require to intent an activity upon phone shake irrespective of where the user is in the application. Now i placed my sensor code in the application class but in order to intent it requires context. Am i on a right way or is there any other way to achieve this functionality ? Here's my code

```
public class MyApplication extends Application {

/* variables for shake detection */
private SensorManager mSensorManager;
private float mAccel; // acceleration apart from gravity
private float mAccelCurrent; // current acceleration including gravity
private float mAccelLast; // last acceleration including gravity
@Override
public void onCreate(){

    /* sensor shake detection */
  mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
    mSensorManager.registerListener(mSensorListener, mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL);
    mAccel = 0.00f;
    mAccelCurrent = SensorManager.GRAVITY_EARTH;
    mAccelLast = SensorManager.GRAVITY_EARTH;   
}

private final SensorEventListener mSensorListener = new SensorEventListener() {

    public void onSensorChanged(SensorEvent se) {
      float x = se.values[0];
      float y = se.values[1];
      float z = se.values[2]; 
      mAccelLast = mAccelCurrent;
      mAccelCurrent = (float) Math.sqrt((double) (x*x + y*y + z*z));
      float delta = mAccelCurrent - mAccelLast;
      mAccel = mAccel * 0.9f + delta; // perform low-cut filter

      if(mAccel > 3.0f)
      {
         // Toast.makeText(getBaseContext(), "Phone shaked", Toast.LENGTH_SHORT).show();
          Intent intent = new Intent(getApplicationContext(),LiveSearchActivity.class);
          startActivity(intent);

      }
    }

    public void onAccuracyChanged(Sensor sensor, int accuracy) {

    }

  }; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:17:30.670

您的课程正在扩展应用程序，而不是您应该扩展 Activity。

```
public class MyApplication extends Activity
{
    @Override
    protected void onCreate(Bundle Sumit)
    { 
        super.onCreate(Sumit);
    }    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:40:58.743

试试这个代码。我已经检查过了。有效 。现在它会正确地重定向到你的手机震动后你想去的地方。希望它会帮助你。

```
package com.example.stack;

import android.app.Application;
import android.content.Context;
import android.content.Intent;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;

public class MyApplication extends Application {

/* variables for shake detection */
private SensorManager mSensorManager;
private float mAccel; // acceleration apart from gravity
private float mAccelCurrent; // current acceleration including gravity
private float mAccelLast; // last acceleration including gravity
Context context;
@Override
public void onCreate(){

    context=this;
    /* sensor shake detection */
  mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
    mSensorManager.registerListener(mSensorListener, mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL);
    mAccel = 0.00f;
    mAccelCurrent = SensorManager.GRAVITY_EARTH;
    mAccelLast = SensorManager.GRAVITY_EARTH;   
}

private final SensorEventListener mSensorListener = new SensorEventListener() {

    public void onSensorChanged(SensorEvent se) {
      float x = se.values[0];
      float y = se.values[1];
      float z = se.values[2]; 
      mAccelLast = mAccelCurrent;
      mAccelCurrent = (float) Math.sqrt((double) (x*x + y*y + z*z));
      float delta = mAccelCurrent - mAccelLast;
      mAccel = mAccel * 0.9f + delta; // perform low-cut filter

      if(mAccel > 3.0f)
      {
         // Toast.makeText(getBaseContext(), "Phone shaked", Toast.LENGTH_SHORT).show();
          Intent intent = new Intent(context,MainActivity.class);
          intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);       

          startActivity(intent);

      }
    }

    public void onAccuracyChanged(Sensor sensor, int accuracy) {

    }

  };

} 
```

# vim - 在 vim noremap 中传递 ^C

> ID：15409793
> 
> 赞同：1
> 
> 时间：2013-03-14T12:50:54.427
> 
> 标签：vim, terminal

我在 ubuntu 12.10 上使用 vim (v7.3) 和 guake 终端作为 Octave DE。

如果我想停止一个进程，我可以转到终端并按 ctrl-c。我想通过 vim 中的重新映射来做到这一点。

现在，如果我在 vim 中输入序列

```
:!guake -e "^C" 
```

（其中 ^C 表示文字字符序列“ctrl-v ctrl-c”）停止命令被发送到 guake 终端，就好像我在焦点位于终端时按下 ctrl-c 一样。但是，当我尝试将键重新映射到 .vimrc 中的上述序列时，如下所示：

```
nnoremap <leader>w :!guake -e "^C"<cr> 
```

它似乎不起作用。当我按 ,w （“，”是我的领导）时，什么也没有发生。我怀疑 ^C 命令被 vim 解释为中止字符序列，就好像我输入了

```
:!guake -w " 
```

然后用 ctrl-c 中止。

是否可以以我尝试的方式包含 ^C 字符（我相信 ascii 0x03）？

如果没有，关于替代方案的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:34:35.430

只需将相同的键（以 Vim 的表示法）传递给映射，然后以交互方式按下它们：

```
:nnoremap <leader>w :!guake -e "<C-v><C-c>"<cr> 
```

# c++ - Iterating over edges and getting their vertices with OpenMesh

> ID：15409794
> 
> 赞同：0
> 
> 时间：2013-03-14T12:50:57.337
> 
> 标签：c++, iterator, mesh, openmesh

I am starting to use OpenMesh to go through meshes which may have wholes and am wondering what is the good way to actually retrieve the vertices associated with each edge.

For half-edges, there are the methods `opposite_he_opposite_vh` and `opposite_vh` of the mesh, but these trigger an error if the opposite half-edge does not exist (we are currently on a boundary half-edge).

Given that I'll encounter these often, what's a better way to iterate over all edges (I actually don't specifically care about half-edge, I'm getting data for each edge, but the direction doesn't matter. What I need are the two vertices)?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-07T10:06:21.443

我认为你可以使用：

1.  `MyMesh::to_vertex_handle(MyMesh::HalfedgeHandle)`
2.  `MyMesh::from_vertex_handle(MyMesh::HalfedgeHandle)`

请确认您可以找到这些方法 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-20T01:29:37.767

你想要的可能是这个例子：

```
for ( mesh_t::EdgeIter eit   = _m.edges_begin(); eit != edgesEnd; ++eit) {
  const MeshType::Point to   = _m.point(_m.to_vertex_handle(_m.halfedge_handle(eit,0)));
  const MeshType::Point from = _m.point(_m.from_vertex_handle(_m.halfedge_handle(eit,0)));
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-21T02:20:17.020

其他答案之一对我不起作用 b/c 迭代器需要被取消引用。这就是我使用 OpenMesh 4.1 的
方式 最佳实践可能有所改变；OpenMesh 6.2 现已推出，但我还没有切换。

```
MyMesh mesh;    // create the mesh instance
...             // build your mesh

// use an edge iterator to iterate over all the edges
for (MyMesh::EdgeIter eit = mesh.edges_begin(); eit != mesh.edges_end(); ++eit) 
{       
    // check for boundary.  (one halfedge won't be valid if boundary)
    // note: you have to dereference the edge iterator
    if (!mesh.is_boundary(*eit))
    {
        // if you want vertex handles use:
        auto vh1 = mesh.to_vertex_handle(mesh.halfedge_handle(*eit, 0));
        auto vh2 = mesh.from_vertex_handle(mesh.halfedge_handle(*eit, 0));

        // if you want handles of faces adjacent to the edge use:
        auto fh1 = mesh.face_handle(mesh.halfedge_handle(*eit, 0));
        auto fh2 = mesh.opposite_face_handle(mesh.halfedge_handle(*eit, 0));

        // if you need normal vectors of those faces use:
        auto face1Norm = mesh.normal(fh1);
        auto face2Norm = mesh.normal(fh2);
    }
    else  // boundary.  One of the half edges won't be valid
        std::cout << "found a boundary edge.  skipping it" << std::endl;

} 
```

# android - Log not working (or seems to drop some lines)

> ID：15409796
> 
> 赞同：1
> 
> 时间：2013-03-14T12:50:59.297
> 
> 标签：android, android-service, android-logcat

EDIT: A more honed version of this question, with a good answer, is at: [Rather odd behaviour of Log](https://stackoverflow.com/questions/16001529/rather-odd-behaviour-of-log)

EDIT: The (bizarre) solution is reported as an answer below.

I have a service as part of an application which is running reasonably well, although there is an unusual bit of behaviour which I am trying to understand. To do this, I have been putting Log.d statement in various methods in classes to report state information at various points. All of these seem to be working (ie reporting the information) except those in the Service class. I know that the service is started because (a) it does something and (b) the threads it instantiates are issuing Log.d messages. However, even right at the start:

```
@Override
public void onCreate() {
    super.onCreate();
    Log.d("SMS", "onCreate()");
    onCreateReal();
} 
```

This log message never appears. What might I be doing wrong?

The manifest is as follows:

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.stuff.myapp"
android:versionCode="1111111"
android:versionName="0.1" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="16" />
<uses-permission android:name="android.permission.INTERNET"/>

<application
    android:allowBackup="true"
    android:icon="@drawable/icon"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <activity
        android:name="com.stuff.myapp.Core"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <service android:name="MyService"></service>

    <receiver android:name="com.stuff.myapp.WidgetInitiator">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE"/>
        </intent-filter>
        <meta-data android:name="android.appwidget.provider" android:resource="@xml/widget_information"/>
    </receiver>

    <activity android:name="com.stuff.myapp.ConfigWidgetActivity"
         android:theme="@android:style/Theme.Translucent">
    </activity>
</application> 
```

[EDIT: another observation] As part of the app, I am calling a BroadcastReceiver class every 2 minutes (in testing). The class is stand alone (ie not inside any of the other classes). It does a Log.d every time it is called by AlarmManager. But only some of he Log calls make it to logcat. Again, suggestions welcome for what might be going on here.

[EDIT: I have corrected the above because the Threads it instantiates report Log calls correctly, but classes it instantiates don't.]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T20:19:09.993

在解决了潜在问题（请参阅[Service being re-Created by AlarmManager](https://stackoverflow.com/questions/15435117/service-being-re-created-by-alarmmanager/15691054#15691054)）做了大量工作之后，我仍然遇到了这个问题。该服务仍然没有记录。我无法解释，将 TAG 从“SMS”更改为“SMservice”使其工作。除了似乎可以解决问题之外，我无法提供任何好的解释。

而且，为了节省您的询问，如果我将 TAG 改回“SMS”，则消息会再次消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T12:57:24.603

您应该在 logcat 中使用“tag:SMS”作为过滤器。

# php - Symfony 1.4 preUpdate method never firing

> ID：15409801
> 
> 赞同：0
> 
> 时间：2013-03-14T12:51:17.763
> 
> 标签：php, doctrine, symfony-1.4

I've got the following model class:

```
class ContractDetails extends BaseContractDetails {

    public function updateContractDetailsByConId($conId, $key, $value) {
        $q = Doctrine_Query::create()
              ->update('ContractDetails');
        if ($value === null) {
            $q->set($key, 'NULL');
        } else {
            $q->set($key, '?', $value);
        }

        $q->where('cd_con_id = ?', $conId)
                ->execute();

        return $q;
    }
    public function preUpdate($values) {
        $test = "test";
    }
 } 
```

What I want is to run some code before the "updateContractDetailsByConId" method row is updated. From my investigations I should be able to use the built in hooks i.e. preUpdate But the preUpdate method is never running.

Any ideas why not?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:59:11.173

当您从 DQL 查询更新时，您需要挂钩到 DQL 回调。有关更多信息，请参阅[此处的文档。](http://docs.doctrine-project.org/projects/doctrine1/en/latest/en/manual/event-listeners.html#dql-hooks)

在您的代码中，您需要更新`preUpdate`for

```
public function preDqlUpdate($values) {
   $test = "test";
} 
```

不要忘记，如文档中所述，您需要隐式打开 DQL 回调。在您的 ProjectConfiguration.class.php 文件中，添加：

```
public function configureDoctrine(Doctrine_Manager $manager)
{
   $manager->setAttribute(Doctrine::ATTR_USE_DQL_CALLBACKS, true);
} 
```

# jquery - Several jQuery issues - how do I turn my gallery functions on and off depending on the window size?

> ID：15409802
> 
> 赞同：1
> 
> 时间：2013-03-14T12:51:18.860
> 
> 标签：jquery, function, gallery, window-resize

I'd appreciate some help with my jQuery gallery I'm trying to write. I'm way out of my depth compared to the small bits of jQuery I usually write, I've been searching a lot and reading things but pulling it all together is proving VERY hard for me!

Here's the general idea;

*   I have my own small function which adds an additional thumbnail to a gallery. When a thumbnail is clicked the main (larger) image changes to display the selected image. This works ok, but when calling this function multiple times I get duplicate thumbnails. This is a symptom on my main issue (turning functions on and off). This gallery will run on smaller screens (set to 980 as you'll see).

*   My second function is a plugin called fancyBox. I'd like this to work on windows larger than 980\. I was planning to deactivate this in a very simplistic manner, which is using `removeClass()` to take away the "fancybox" class the plugin uses. This may not be sufficient though, as a window resize may cause this plugin to be called over and over again. I would love to know more about this subjet.

*   I found some script from Paul Irish's site which is designed to slow down the rate at which the window resize fires. This will hopefully make the load on the clients machine much lower.

*   The two pieces of functionality are controlled by this: `jQuery(window).smartresize(function()` - I'll post the full snippets below.

So..my issue/question is this. How do I turn these two pieces of functionality on and off when the window is resized? I don't know enough (so please don't laugh!), but I'm expecting I need to get rid of data (event listeners?) or something like that? I just don't know. As I make responsive websites I would really like to know how to get this working because I'm bound to use it over and over.

Here is what I have so far:

```
 //window resize function, to slow down the response
    (function(jQuery,sr){

      // debouncing function from John Hann
      // http://unscriptable.com/index.php/2009/03/20/debouncing-javascript-methods/
      var debounce = function (func, threshold, execAsap) {
          var timeout;

          return function debounced () {
              var obj = this, args = arguments;
              function delayed () {
                  if (!execAsap)
                      func.apply(obj, args);
                  timeout = null;
              };

              if (timeout)
                  clearTimeout(timeout);
              else if (execAsap)
                  func.apply(obj, args);

              timeout = setTimeout(delayed, threshold || 100);
          };
      }
    // smartresize 
    jQuery.fn[sr] = function(fn){  return fn ? this.bind('resize', debounce(fn)) : this.trigger(sr); };

    })(jQuery,'smartresize'); 
```

My dodgy gallery..

```
 // gallery function
    var responsiveGallery = 
    //responsive gallery
    function tabletGallery(){
        var featuredImg = $('.gallery .featured_img a').attr('href');
        var featuredImgThumb = $('.gallery .featured_img a').data('thumb');
        //count children for class
        var newClass = $('ul#gallery_thumbnails li').length + 1;
        $('ul#gallery_thumbnails').append(
            $('<li>').addClass('_' + newClass).append(
                $('<span>').addClass('img_shell').append(
                    $('<a>').attr('href', featuredImg).append(
                        $('<img>').attr('src', featuredImgThumb)
                    )
                )
            )
        );
        $('.gallery .featured_img a').click(function(e){ e.preventDefault(); });
        $('ul#gallery_thumbnails a').click(function(e){
            e.preventDefault();
            var bigLink = $(this).attr('href');
            $('.gallery .featured_img img').attr('src', bigLink);
        });
    } 
```

This is where I think I need to stop the gallery from working

```
 // destroy gallery
    var destroyGallery = 
    function destroyGallery(){
        $('.gallery a').unbind(click);
    } 
```

And here's the window resize function working

```
 // usage:
    jQuery(window).smartresize(function(){
        var WW = jQuery(window).width();
        if(WW < 980)
        {
            responsiveGallery();
            jQuery('.gallery a').removeClass('fancybox');
        }
        else
        {
            destroyGallery();
            jQuery('.fancybox').fancybox({ nextEffect:"fade" , prevEffect:"fade", padding:5 }); 
        }
    }); 
```

I'm aware this is a large post, but I'm hoping I'm not too far off completing this. Thank you very much for taking the time to look at this.

# r - R package compilation with dependency on data.table

> ID：15409806
> 
> 赞同：10
> 
> 时间：2013-03-14T12:51:22.020
> 
> 标签：r, data.table

I am trying to create an R package with a function using the `J` of data.table. When I run `R CMD check`, I have a NOTE : no visible global function definition for 'J' although I've added data.table as a dependency in the DESCRIPTION file.

> Package: rfPred
> Type: Package
> Title: Assign rfPred functional prediction scores to a missense variants list
> Version: 1.0
> Date: 2013-03-14
> Author: me
> Maintainer:me
> Depends: data.table
> [..]

I've tried to use another function of the data.table package in the package I want to create, but I haven't the same problem as for J.

Do you have a solution ?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T13:44:22.937

`J()`作为一个独立的功能已从`data.table`. 它仅供内部使用`DT[...]`，它仍然可以工作。但是对于依赖`data.table`和`J()`正确使用的包，比如你的包，需要一个额外的步骤来避免注释（见下文）。

首先背景和为什么`J()`被删除。[新闻](https://r-forge.r-project.org/scm/viewvc.php/pkg/NEWS?view=markup&root=datatable)摘录：

### v1.8.2（2012 年 7 月）：

*   J() 别名现在在 DT[...] 之外已弃用，但仍可在 DT[...] 内部工作，就像在 DT[J(...)] 中一样。J() 与 XLConnect (#1747) 和 rJava (#2045) 包中的函数 J() 冲突。对于 data.table 而言，更改更容易，也具有一些效率优势。当在 DT[...] 之外使用时，下一版本的 data.table 将从 J() 发出警告。之后的版本将删除它。只有这样才能解决与 rJava 和 XLConnect 的冲突。请在 DT[...] 之外直接使用 data.table() 而不是 J()。

### v1.8.4（2012 年 11 月）：

*   J() 现在发出警告（在DT[...]*外部*使用时），不推荐在 DT[...] 外部使用它。请参阅 v1.8.2 中的以下项目。在 DT[...] 之外直接使用 data.table() 而不是 J()。或者，自己定义一个别名。J() 将继续*在*DT[...] 内工作，如文件所述。

### v1.8.8（现在在 CRAN，2013 年 3 月）：

*   J() 别名现在已在 DT[...]*外部*删除，但仍可在 DT[...] 内部工作；即，DT[J(...)] 很好。正如 v1.8.2 中的警告（请参阅此文件中的下文）并在 v1.8.4 中使用 warning() 弃用。这解决了与 XLConnect (#1747) 和 rJava (#2045) 包中的函数 J() 的冲突。请在 DT[...] 之外直接使用 data.table() 而不是 J()。

顺便说一句，r-devel 上还有一个最近的相关线程：
[http ://r.789695.n4.nabble.com/conflict-between-rJava-and-data-table-tp4659935p4659984.html](http://r.789695.n4.nabble.com/conflict-between-rJava-and-data-table-tp4659935p4659984.html)

**`R CMD check`现在为您的包裹上产生的注释**

您的包裹在`J()`内部使用`DT[...]`并且工作正常。唯一的问题是来自 R CMD 检查的注释：

```
no visible global function definition for 'J' 
```

以下是所有已知选项：

*   忽略注释。（我也不喜欢这个，只是作为一种选择）。只需要处理 WARNING 和 ERROR。
*   替换`J`为`list`。是等价的。
*   `J=NULL`在你的包中定义某个地方。（我们研究了`data.table`导出`J=NULL`，因此您不必这样做，但决定不这样做，因为在提示符下`data.table`输入的任何用户`J`都会看到`NULL`这可能会造成混淆。）
*   或者`?utils::globalVariables`按照 Ben Bolker 在评论中的建议使用。

有关此特定注释的更多背景信息在此相关问题中：

**[R CMD检查中的全局变量注释没有可见的绑定](https://stackoverflow.com/questions/8096313/no-visible-binding-for-global-variable-note-in-r-cmd-check)**

# iphone - iphone上表格视图中单元格的奇怪行为，如果一个导致另一个变化，则更改

> ID：15409814
> 
> 赞同：0
> 
> 时间：2013-03-14T12:51:35.447
> 
> 标签：iphone, ios, objective-c, xcode, uitableview

我的应用程序有一个来自服务器的列表，每次滚动时我都会发送新数据请求并重新加载它。我接受了 10 个细胞。这工作就好了。

但问题是，如果我更改例如 1 个单元格中的值，它会在单元格 8、15 等中更改。

数据是类，我从服务器获取信息以显示在单元格中。getDataAt 是我的单元格类中的方法，它将值放入单元格中。

在 numberOfRowsInSection 中，我正在检查列表是否完整，表格视图显示附加单元格以加载更多行，如果列表不完整，则意味着没有更多行可显示并且此单元格将不会显示。

代码 ：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    if (indexPath.row < [self.list size])
     {

        static NSString *cellIdentifier = @"CellIdentifier";

        self.cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier forIndexPath:indexPath];

        Data* data = [self.list getDataAt:indexPath.row];

        NSLog(@"%@", indexPath);
        cell.delegate = self;
        [cell setCell:data];

        return  _cell;

    }

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section  {

return [self.list size] + (self.list.complete ? 0 : 1);

} 
```

到目前为止我发现的是，当我向上和向下滚动时，indexPath 会变得混乱，当他再添加 10 个单元格时，它需要 indexPath.row 以前的单元格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T12:54:21.497

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
 {   
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)  
   {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    }
    if (indexPath.row < [self.list size]) 
     {
        Data* data = [self.list getDataAt:indexPath.row];
        NSLog(@"%@", indexPath);
        [cell setCell:data];
     }

   return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T14:11:35.040

在大多数情况下，您不需要检查行索引是否超出范围 - 相反，您应该在 numberOfRowsInSection 方法中正确返回值。如果 (indexPath.row < [self.list size]) 错误，你会返回什么？如果你返回 nil - 它会崩溃。

此外，这可能是一个错误：您使用不同的变量来访问单元格：'cell' 和 '_cell'。并且不需要将最后一个单元格保存在局部变量中。

我假设您之前为表格视图注册了可重用单元格的类（或笔尖）。

尝试这样的事情：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *cellIdentifier = @"CellIdentifier";

    MyCustomCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier forIndexPath:indexPath];
    cell.delegate = self;
    Data* data = [self.list getDataAt:indexPath.row];
    [cell setCell:data];
    return  cell;

}

– tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [self.list size];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T07:31:56.787

主要问题是单元格分配效率不高。您需要以自己的方式实现以下内容：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier: cellIdentifier] autorelease];
    [self setCell:cell atIndex:indexPath.row];
    }
    else{
    [self reuseCell:cell atIndex:indexPath.row];
    }
    return cell;
} 
```

setCell:atIndex: 方法如下：

```
setCell:(UITableViewCell*)cell atIndex:(int)index{
Data* data = [self.list getDataAt:index];
[cell setCell:data];
} 
```

假设您的单元格上有一个标签，您将在 setCell 上的单元格上添加标签。

```
(void)setCell:(Data*)data{
label.text = @"text from data";
[cell addSubView:label];//this is the important part, you are adding the label on cell as a subview
//doing other stuff
} 
```

现在，reuseCell 方法将类似于以下（假设您的单元格上有一个标签，此时您需要重置标签，而不是分配或添加标签到您的单元格）：

```
reuseCell:(UITableViewCell*)cell atIndex:(int)index{
Data* data = [self.list getDataAt:index];
cell.label.text = @"text from data";//here your are modifying the label, not adding the label as a subView of the cell
//doing other stuff
} 
```

最后，您无需检查“indexPath.row < [self.list size]”，因为您已经在说“- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger) 上的单元格总数”部分”。

如果您可以提供“setCell：”方法的详细信息以及为什么使用单元格作为属性，我会更清楚地描述它。

# r - 索引相关矩阵

> ID：15409820
> 
> 赞同：2
> 
> 时间：2013-03-14T12:51:55.127
> 
> 标签：r

我有两个与以下示例类似的矩阵

# 垫子1

```
 row.names  geneid1  geneid2  geneid3  geneid4  geneid5
   sample1    0.99       8.76    8.78    7.65     5.4
   sample2    5.6        6.76    7.4     9.08     8.2
   sample4    7.5        6.4     6.4     6.1      8.6 
```

# 垫子2

```
 row.names  geneid1  geneid2  geneid3  geneid4  geneid5
   sample1    0.98       8.76    8.78    4.65     5.4
   sample2    0.6        6.76    1.4     9.78     6.2
   sample4    9.5        9.4     3.4     5.1      8.0 
```

如果我发现它们之间的相关性和

```
 cormat<cor(mat1,mat2) 
```

结果矩阵看起来像这样

```
 geneid1  geneid2  geneid3  geneid4  geneid5
   geneid1    0.1       0.14    0.58    0.89    0.5
   geneid2    0.6       -0.2    0.4     0.45    0.6
   geneid3    0.5        0.7    0.3    -0.4     0.76
   geneid4    0.65       0.64   0.76   0.45     0.7
   geneid5    0.3        0.2    0.6     0.2     0.2 
```

我想在矩阵中选择那些高于阈值 0.5 的值并省略其余的值。我只想要在行和列上高于该值的基因 ID 号。我尝试使用

```
 which(cormat>0.5) 
```

但我不明白如何用原始矩阵索引它们，只保留那些高于 0.5 的行和列。除了索引之外，还有其他方法可以选择高度相关的值进行进一步分析。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T12:53:44.987

使用参数`arr.ind`：

```
which(cormat>0.5,arr.ind=TRUE)

set.seed(1)
m <- matrix(runif(9),3,3)
m
          [,1]      [,2]      [,3]
[1,] 0.2655087 0.9082078 0.9446753
[2,] 0.3721239 0.2016819 0.6607978
[3,] 0.5728534 0.8983897 0.6291140
which(m < 0.5)
[1] 1 2 5
which(m < 0.5, arr.ind=TRUE)
     row col
[1,]   1   1
[2,]   2   1
[3,]   2   2
m[which(m < 0.5, arr.ind=TRUE)]
[1] 0.2655087 0.3721239 0.2016819 
```

# javascript - 唯一约束 JayData

> ID：15409821
> 
> 赞同：0
> 
> 时间：2013-03-14T12:51:55.083
> 
> 标签：javascript, unique-constraint, jaydata

有没有办法指定 JayData 的字段必须是唯一的（与 SQL 相同）？

例如：

```
$data.Entity.extend("Test", {
    Id: { type: "int", key: true, computed: true },
    Name: { type: "string", required: true, unique: true, maxLength: 200 }
}); 
```

如果关键字不存在，怎么办？实际上，如果元素已经存在，我不希望添加它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T19:14:14.163

如果您不需要自动生成的 id 字段，则将 name 声明为键并计算为 false，因此它将是一个唯一字段。如果您想保留 id 字段，那么您可以使用唯一索引来实现您想要的。索引支持在专业提供商中。

# html - 如何在不是允许标签列表之一的大块文本中查找/突出显示 HTML 标签？

> ID：15409822
> 
> 赞同：2
> 
> 时间：2013-03-14T12:51:58.947
> 
> 标签：html, parsing

我有一个大型数据集，其中包含许多正在迁移到另一个系统的富文本编辑内容 blob。在允许的 HTML 标签方面，新系统比旧系统更严格，我们需要能够识别数据中的哪些标签会被剪切或编码并在输入时以错误的方式包含在内容中，然后再迁移数据.

例如，给定这个 HTML：

```
<h1>My page</h1><p>Lorem ipsum<marquee>SURPRISE!</marquee></p> 
```

我们不会对“h1”和“p”标签感兴趣（它们在某处的例外列表中列出），但理想情况下，我们希望能够在视觉抽查中看到突出显示的“marquee”标签坏标签可以很容易地识别和手动处理（现在我们预计数据集中不会有很多坏标签。）

去除不需要的标签很容易（想想简单的 PHP/Python/whatever）——但我们不想这样做并且可能会丢失数据。

同样，编码标签很容易，但我们不想将丑陋的无用标签作为内容的一部分导入。

做这种事情的最好方法是什么？我不禁认为我缺少一个简单的解决方案，或者我正在以错误的方式思考它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:10:52.370

在这种情况下，CSS 可能是你的朋友

```
 * {
     text-decoration: line-through;
    }
   h1, p <list other allowed tags> {
    text-decoration: none;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:25:13.740

您可以想象地使用 XPath 来获取惊喜元素的列表：

```
//*[name() != 'h1'
    and name() != 'p'
    and name() != 'b'
    and name() != 'span'
    and name() != 'div'
    and name() != 'body'
    and name() != 'a'] 
```

使用您选择的语言或[XPath Helper](https://chrome.google.com/webstore/detail/xpath-helper/hgimnogjllphhhkhlmebbmlgjoejdpjl?hl=en) (Chrome) 之类的语言。

“ [XPath 1.0 to find if an element's value is in a list of values](https://stackoverflow.com/questions/3025885/xpath-1-0-to-find-if-an-elements-value-is-in-a-list-of-values) ”的答案可能会给出一个更容易阅读的答案。

# javascript - Django Post 请求适用于 chrome 但不适用于 Firefox

> ID：15409823
> 
> 赞同：2
> 
> 时间：2013-03-14T12:52:03.810
> 
> 标签：javascript, django, google-chrome, firefox, post

我有这个项目，除了两件事外，他似乎工作得很好。当我执行**POST REQUEST**（之前的一些 ajax 调用之后）时： **首先：**我在 Chrome 版本 25.0.1364.172 上得到了一个`error: [Errno 32] Broken pipe`，但一切似乎仍然正常。 **第二：**在 Firefox 19.0.2 中没有任何反应.. 它`csrfmiddlewaretoken` 在我的 url 中添加并显示 200 并使用我的 javascript 操作重新加载页面，但在 django 端似乎实际上没有做任何事情。

代码：

```
<form class="form-horizontal">
    <div class="control-group">
        <label class="control-label" for="appName">App Name</label>
        <div class="controls">
            <input type="text" id="appName" placeholder="App Name">
        </div>
    </div>
    <div class="control-group">
        <label class="control-label" for="appDescription">App Description</label>
        <div class="controls">
            <textarea id ="appDescription" placeholder="App Description" rows="3"</textarea>
        </div>
    </div>
    <div class="form-actions">
    {% csrf_token %}
    <button type="submit" class="btn btn-primary" name="create" onclick="createCity('create','user')">Create</button>
    </div>
</form> 
```

javascript:

```
$.post(url, { city_id : city_id ,type : type, city: cityStr, pois: poisStr, poisdelete: poisDeleteStr, kmz: kmzStr,kmzdelete : kmzDeleteStr,limits : limitsStr, limitsdelete : limitsDeleteStr, area_name : area_nameStr , action : actionStr , imageReplace : imageReplaceStr}, function(data,status) {
    if (data=='city_already_exists')
        alert(data);
    else {
        /*var username=window.location.pathname.split("/");
        window.location = "/"+username[1]+"/smarturbia/cities";*/
        alert(data);
        location.reload();  //otherwise does not work with firefox
    }
}); 
```

姜戈：

```
class CreateCityView(LoginRequiredMixin, JSONResponseMixin, CheckTokenMixin, CurrentUserIdMixin, View):

    @method_decorator(csrf_protect)
    def dispatch(self, *args, **kwargs):
        return super(CreateCityView, self).dispatch(*args, **kwargs)

    def post(self, request, *args, **kwargs):
         ...

return self.render_json_response(city_json) 
```

一个帖子如何在 chrome 中而不是在 Firefox 中工作？我应该怎么做才能让它同时工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T15:27:38.037

通过更改 html 中的 to 来修复它。小错误，大问题..

# cocoa - NSOutlineView 的固定窗口

> ID：15409825
> 
> 赞同：0
> 
> 时间：2013-03-14T12:52:17.230
> 
> 标签：cocoa

我用自己的数据源创建 NSOutlineView。现在的问题是，在扩展项目时，它会向上和向右扩展，而我已经提到了框架。如何解决这个扩展？我想要一个固定的窗口。

```
 NSOutlineView *     outlineview;    ///< Outline view.
    OutlineDataSource * datasource;     ///< Data source.

//Create the outline view.
outlineview     = [[NSOutlineView alloc] initWithFrame:NSMakeRect (10, 430, 400, 800)];
[outlineview setDelegate:self];

//Create the data source.
datasource  = [[OutlineDataSource alloc]init];

//Set the data source.
[outlineview setDataSource:(id<NSOutlineViewDataSource>)datasource];
    NSTableColumn *c    = [[NSTableColumn alloc] initWithIdentifier: @"Cases"];

//Create a column.
[c setEditable: NO];
[c setMinWidth: 450];
[outlineview addTableColumn: c];
[outlineview setOutlineTableColumn: c];

//Add the outline view to the window.
[view addSubview: outlineview]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:26:36.290

您需要在 Interface Builder 中设置适当的约束，包括适当的优先级。

在您的情况下，大纲视图和/或封闭滚动视图的优先级应低于窗口宽度。

这可能需要一些试验，并且在第一次获得所有约束时可能会有点挑战。

如果您不使用 Interface Builder，您可以在[docs](http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/Introduction.html#//apple_ref/doc/uid/TP40010853-CH1-SW1)中阅读有关您的选项的信息。

同一文档中的调试建议也非常有用。

# java - 在 Liferay 中创建组时出现 IllegalArgumentException

> ID：15409826
> 
> 赞同：0
> 
> 时间：2013-03-14T12:52:20.850
> 
> 标签：java, liferay, liferay-6, illegalstateexception, illegalargumentexception

我正在尝试使用类[GroupLocalServiceUtil的](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portal/service/GroupLocalServiceUtil.html#addGroup%28long,%20java.lang.String,%20long,%20long,%20java.lang.String,%20java.lang.String,%20int,%20java.lang.String,%20boolean,%20boolean,%20com.liferay.portal.service.ServiceContext%29)[addGroup](http://docs.liferay.com/portal/6.1/javadocs/com/liferay/portal/service/GroupLocalServiceUtil.html#addGroup%28long,%20java.lang.String,%20long,%20long,%20java.lang.String,%20java.lang.String,%20int,%20java.lang.String,%20boolean,%20boolean,%20com.liferay.portal.service.ServiceContext%29)方法在 Liferay 中创建一个新组。我根据文档传递参数类型，但是它会莫名其妙地抛出一个。这是我的纯代码：`IllegalArgumentException`

```
ServiceContext sc = new ServiceContext();
sc.setScopeGroupId(10);
GroupLocalServiceUtil.addGroup(11101, "com.liferay.portal.model.Group", 0, 0, "aaa","foo", description, 
            10, null, true, true, sc); 
```

怎么了？我可以将 ServiceContext 参数设置为 null 吗？

**更新：**我使用的版本是 6.1。异常的堆栈跟踪是：

```
Caused by: java.lang.IllegalStateException: Something went wrong: 
at com.pro.liferay.startUpHook.ReadGroupFromCsv.addData(ReadGroupFromCsv.java:69)
at com.pro.liferay.startUpHook.CreateUserOnStartUp.run(CreateUserOnStartUp.java:27)
at com.liferay.portal.kernel.events.InvokerSimpleAction.run(InvokerSimpleAction.java:42)
at com.liferay.portal.deploy.hot.HookHotDeployListener.initEvent(HookHotDeployListener.java:1177)
at com.liferay.portal.deploy.hot.HookHotDeployListener.initEvents(HookHotDeployListener.java:1239)
at com.liferay.portal.deploy.hot.HookHotDeployListener.initPortalProperties(HookHotDeployListener.java:1595)
at com.liferay.portal.deploy.hot.HookHotDeployListener.doInvokeDeploy(HookHotDeployListener.java:563)
at com.liferay.portal.deploy.hot.HookHotDeployListener.invokeDeploy(HookHotDeployListener.java:273)
... 23 more
Caused by: java.lang.IllegalArgumentException
at com.liferay.portal.service.impl.GroupLocalServiceImpl.addGroup(GroupLocalServiceImpl.java:276)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:122)
at com.liferay.portal.spring.transaction.TransactionInterceptor.invoke(TransactionInterceptor.java:71)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ChainableMethodAdvice.invoke(ChainableMethodAdvice.java:57)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.security.pacl.PACLAdvice.invoke(PACLAdvice.java:51)
at com.liferay.portal.spring.aop.ServiceBeanMethodInvocation.proceed(ServiceBeanMethodInvocation.java:118)
at com.liferay.portal.spring.aop.ServiceBeanAopProxy.invoke(ServiceBeanAopProxy.java:211)
at $Proxy23.addGroup(Unknown Source)
at com.liferay.portal.service.GroupLocalServiceUtil.addGroup(GroupLocalServiceUtil.java:300)
at com.pro.liferay.startUpHook.customutils.GroupUtil.addGroup(GroupUtil.java:63)
at com.pro.liferay.startUpHook.customutils.GroupUtil.addGroup(GroupUtil.java:69)
at com.pro.liferay.startUpHook.ReadGroupFromCsv.addData(ReadGroupFromCsv.java:67)
... 30 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:02:13.807

我正在使用**Liferay 6.1.1**，在第 276 行`GroupLocalServiceImpl.addGroup`可以看到：

```
if (className.equals(Group.class.getName())) {
    if (!site && (liveGroupId == 0)) {
        throw new IllegalArgumentException(); // this is line 276
    }
} 
```

所以你必须设置`site=false`和`liveGroupId=0`。

无论如何，我曾经使用这段代码来创建网站（我重复一遍，**Liferay 6.1.1**），据我所知，它工作得非常好；）

```
GroupLocalServiceUtil.addGroup(userId, Group.class.getName(), 0, "title","description",GroupConstants.TYPE_SITE_OPEN, "/siteFriendlyUrl", true, true, new ServiceContext()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:12:09.487

*   你确定`url`可以为空吗？
*   你能用 Group.class.getName() 替换类名吗？

# android - 签名验证失败 - Android 应用内购买

> ID：15409833
> 
> 赞同：15
> 
> 时间：2013-03-14T12:52:33.677
> 
> 标签：android, in-app-purchase

我已经在一个 Android 应用程序上实现了应用计费，虽然它适用于测试常量，但它在实际产品上会中断。

我已将应用程序作为草稿上传到 Google Play，创建并发布产品，在设备上安装完全相同的应用程序（包括正确的 base64EncodedPublicKey）并使用正确的测试帐户（设备上的主帐户和我设置的帐户）在我的开发者帐户上）

流程是我进入Google Play Activity，在那里我可以看到产品及其详细信息，我按购买，输入测试帐户密码，它退出活动，收到祝贺消息并

> 产品签名验证失败（响应：-1003：购买签名验证失败）

该项目实际已购买（它显示在 Google Checkout 上，并且在第二次购买尝试时显示“项目已拥有”）。此外，我只使用了 Google 的 TriviaDrive 示例代码。

任何建议都非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-23T18:17:14.207

在 In App Billing 文档中有一个名为[Initiate your connection to Google Play](http://developer.android.com/training/in-app-billing/preparing-iab-app.html#Connect)的部分。

它告诉你你需要一个 base64 编码的公钥来实例化你的 IabHelper。您可以从 Google Play 开发者控制台获取此代码。登录控制台，单击应用程序，然后转到“服务和 API”选项卡。

```
IabHelper mHelper;

@Override
public void onCreate(Bundle savedInstanceState) {
   // ...
   String base64EncodedPublicKey;

   // compute your public key and store it in base64EncodedPublicKey
   mHelper = new IabHelper(this, base64EncodedPublicKey);
} 
```

请考虑文档中建议的安全建议：

> 安全建议：强烈建议您不要硬编码 Google Play 提供的确切公共许可证密钥字符串值。相反，您可以在运行时从子字符串构造整个公共许可证密钥字符串，或者在将其传递给构造函数之前从加密存储中检索它。这种方法使恶意第三方更难修改您的 APK 文件中的公共许可证密钥字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-29T06:32:21.610

此错误可能出现在 IAB v3 中的另一个原因是，如果您在一台设备上购买了产品（例如订阅），并且购买信息没有完全进入另一台设备上 Play 商店应用程序的缓存中。

我有一个可怕的时期，在 Kitkat 手机上购买订阅后，另一部手机（姜饼）出现此 -1003 错误。我将其追溯到 getpurchases() 方法仅返回带有（正确）列表购买的 INAPP_PURCHASE_ITEM_LIST 的事实。INAPP_PURCHASE_DATA_LIST 和 INAPP_DATA_SIGNATURE_LIST 返回为空。（即使我可以在 Play 应用中看到订阅。）

签名为空，所以它当然得到了签名验证错误。在对为什么它不起作用而感到头疼/恐慌之后，突然它在我没有做任何事情的情况下起作用了。我认为 Google Services/Play 应用程序最终刷新了缓存并自行更新。

鉴于此，我认为解决方案可能是在完整的购买信息传播到 Play Services 之前使该错误保持沉默...... w/iabhelper 它类似于：

```
if (result.getResponse() != IabHelper.IABHELPER_VERIFICATION_FAILED)
                    complain("Failed to query inventory: " + result);
Log.d(TAG, "Query inventory was NOT successful."); 
```

这似乎是一个相当大的错误——我认为，Play 商店应该等到它知道有关购买的所有信息后再将其传递给应用程序。我不知道这个问题是否会在购买流程的其他方面表现出来，但你去吧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-14T12:34:59.173

我的订阅有这个问题，因为我没有设置“itemType”

```
 mHelper.launchPurchaseFlow(this,
            SKU_INFINITE_GAS, IabHelper.ITEM_TYPE_SUBS,
            RC_REQUEST, mPurchaseFinishedListener, payload); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-29T09:00:48.967

1> 产品签名验证失败（响应：-1003：购买签名验证失败）

此错误背后的原因是 Base64Encoded 不匹配。从发布者帐户获取许可证密钥，将其复制到某些文本编辑器中，删除所有空格并粘贴。

2> “商品已拥有” 当我们从谷歌收到应用内购买的 OK 响应时，我们需要消费应用内产品以通知其已购买和交付。但是，如果您以某种方式崩溃或忘记使用它，谷歌将不允许您再次购买它，直到您使用它。在您的场景中，应用程序抛出签名验证失败错误..这就是第二个问题的原因

希望这有帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-11T08:09:28.130

请务必使用密钥对文件进行 UTF8 编码

# iphone - 试图强制一个方法等待另一个方法结束

> ID：15409836
> 
> 赞同：0
> 
> 时间：2013-03-14T12:52:43.427
> 
> 标签：iphone, ios, objective-c, ios6, objective-c-blocks

我有一种方法给我带来了一些问题。我正在尝试一个接一个地执行两种方法，但是第二种方法在第一种方法完成之前一直在启动。我相当肯定这与第一种方法中有一个块有关，但由于我不太了解它们，我无法修复它，甚至无法在此处使用其他答案。任何帮助或建议将不胜感激！

顶级方法：

```
- (IBAction)SendTextTapped:(id)sender{
  NSLog(@"Entered tapped method");
  [self setLocation];
  NSLog(@"Supposedly past setLocation");
  [self sendInAppSMS:globalLocation];
  } 
```

第一个辅助方法：

```
- (void)setLocation{
  CLLocation *location = locationManager.location;
  CLGeocoder *geocoder = [[CLGeocoder alloc] init];
  CLLocation *newerLocation =[[CLLocation alloc]initWithLatitude:location.coordinate.latitude
                                                       longitude:location.coordinate.longitude];
  NSLog(@"%f",location.coordinate.longitude);
  [geocoder reverseGeocodeLocation:newerLocation completionHandler:^(NSArray *placemarks, NSError *error) {
    if (error) {
      NSLog(@"Geocode failed with error: %@", error);
      return;
    }
    //NSLog(@"Entered geocoder");

    if (placemarks && placemarks.count > 0) {
      CLPlacemark *placemark = placemarks[0];

      NSDictionary *addressDictionary =
      placemark.addressDictionary;

      NSLog(@"%@ ", addressDictionary);
      NSString *address = [addressDictionary objectForKey:(NSString *)kABPersonAddressStreetKey];
      globalLocation=[NSString stringWithFormat:@"pickup: %@, %@\n person: Joe Blow", address,placemark.subLocality];
      NSLog(globalLocation);
      dispatch_async(dispatch_get_main_queue(), ^{});
    }
  }];

} 
```

第二个辅助方法：

```
-(void) sendInAppSMS:(NSString *)message
{
  NSLog(@"Entered sendInAppSMS");
    MFMessageComposeViewController *controller = [[MFMessageComposeViewController alloc] init];
    if([MFMessageComposeViewController canSendText])
    {
        controller.body = message;
        controller.recipients = [NSArray arrayWithObjects:@"123456", nil];
        controller.messageComposeDelegate = self;
        [self presentViewController:controller animated:YES completion:nil];
    }
} 
```

当我在一种方法中拥有所有代码时，一切正常，但要继续我的项目，我需要能够分离出这些操作。

谢谢你提供的所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:07:45.580

你必须这样称呼它：

```
[self setLocationWithCompletionHandler:^(NSString *message) {
    [self sendInAppSMS:message];
}]; 
```

将您的方法转换为：

```
- (void)setLocationCompletionHandler:(void (^)(NSString *message))completionHandler{
    ....
    dispatch_async(dispatch_get_main_queue(), ^{
        if (completionHandler) completionHandler(globalLocation);
    });
} 
```

# java - 在我的 Maven 项目结构中哪里可以找到我的 UML 图文件？

> ID：15409839
> 
> 赞同：3
> 
> 时间：2013-03-14T12:52:54.370
> 
> 标签：java, eclipse, maven, uml

对于我的 Java 项目，我使用[ObjectAid](http://www.objectaid.com/) eclipse 插件作为我的域类的 UML 可视化工具。每个类图都是一个*.ucls*资源文件。

根据 Maven 原则，我需要在项目结构中的哪里找到我的 *.ucls 文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T13:13:59.053

关于存储文档的位置没有通用的 Maven 约定。只要它不干扰构建过程，您就可以自由地将其放置在您喜欢的任何地方。

我们将文档存储在 内部`/src/main/doc`，但这只是团队范围内的共识，因此请随意选择您自己的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T13:17:58.130

任何你想要的地方，除非它们是自动生成的。

如果它们是在构建期间生成的，它们属于`target`.

如果不是，这在某种程度上取决于您实际上将如何处理它们。我有点质疑将它们保留在项目中的想法，但我很同情希望它们成为项目的一部分——我只是不相信它们不完全属于其他地方，比如项目 wiki/CMS/等等

我将书面文档保留在顶层`docs`，因为它不是源代码：IMO 源代码是“在构建期间使用的东西”，而文档不是（除非它是，例如，如果它需要从一种格式转换为其他）。

# git - Git 推送错误 | Bitbucket 存储库

> ID：15409841
> 
> 赞同：1
> 
> 时间：2013-03-14T12:52:56.157
> 
> 标签：git, push, bitbucket

我们正在尝试将本地内容推送到“Bitbucket”中的存储库，但在提交文件后尝试“git push”时出现以下错误。

错误信息

```
$ git push -u origin master
fatal: 'origin' does not appear to be a git repository
fatal: Could not read from remote repository. 
```

你们能在这方面帮助我们吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-12T16:01:17.720

我刚刚遇到了同样的问题，这可能对你有帮助：

```
#initialize git in the folder   
git init
#add remote repository (this did not work for me)
git remote add origin https://myusername@bitbucket.org/myusername/myrepo.git
#...so i changed it later (after some git add and commit commands)
git remote set-url origin https://myusername@bitbucket.org/myusername/myrepo.git
#now it worked:
git push -u origin master 
```

如果您收到错误消息`remote origin already exists`，请运行以下命令：

```
git remote rm origin 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-14T14:44:02.927

看起来很像您未能运行`git remote add`命令。

通常这看起来像

```
git remote add origin ssh://git@bitbucket.org/[USERNAME]/[REPONAME].git 
```

但是，如果您遵循此处的文档，您应该能够为您的存储库找到正确的信息：[https ://confluence.atlassian.com/display/BITBUCKET/Importing+code+from+an+existing+project](https://confluence.atlassian.com/display/BITBUCKET/Importing+code+from+an+existing+project)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T13:17:45.577

你可以试试`git push --mirror url-of-your-bitbucket-remote`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-28T14:14:13.010

我错误地跟随原点缺少“我”。

```
git remote add orign url 
```

仅在使用以下命令查看时才发现

```
git remote -v 
```

并使用删除它

```
git remote remove orign 
```

并使用正确的拼写再次创建它

```
git remote add origin url 
```

# ios - 只有单个 uitableview 单元格可以拖动和重新排序

> ID：15409845
> 
> 赞同：1
> 
> 时间：2013-03-14T12:53:02.093
> 
> 标签：ios, uitableview

是否有可能在 uitableview 中，当 tableview 进入编辑模式时，只有选定的单元格能够重新排序，而其他单元格将无法拖动。我试图将所有单元格的“showsreordercontrol”设置为 NO，并且仅将选定单元格的属性设置为 YES；但它没有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T07:11:11.607

我通过将选定单元格的 indexpath.row 与 indexpath.row 进行比较来实现它。在这个方法中

```
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath 
```

# ssl - 对于新的 SSL 证书请求，您是否需要包含端口？

> ID：15409849
> 
> 赞同：3
> 
> 时间：2013-03-14T12:53:13.697
> 
> 标签：ssl, openssl

我为将通过[https://xx.xxxxx.com:8443](https://xx.xxxxx.com:8443)访问的站点新建了一个新的 SSL 证书。在创建 CSR 期间，我是否需要包含站点的端口号才能正确识别站点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T13:11:14.703

不，证书包含 DNS 名称，并且端口号不是您服务器的 DNS 名称的一部分。

因此，只需使用没有协议规范和端口的服务器名称。

# razor - 如何从 Razor 视图调用控件

> ID：15409850
> 
> 赞同：-2
> 
> 时间：2013-03-14T12:53:17.343
> 
> 标签：razor, asp.net-mvc-4

我在移动网站上工作，我使用剃须刀引擎创建了我的代码来从 ID 的数据库中检索字段。我为 ID 添加了默认值，但我想要来自隐藏控件的 ID。

看法：

```
 <fieldset>
        <legend></legend>
      @Html.HiddenFor(model=>model.ID)
        <div class="editor-label ">
            @Html.LabelFor(model => model.User)
        </div>
        <div class="editor-field create-Bt3">
            @Html.EditorFor(model => model.User)
            @Html.ValidationMessageFor(model => model.User)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.Password)
        </div>
        <div class="editor-field create-Bt3">
            @Html.EditorFor(model => model.Password)
            @Html.ValidationMessageFor(model => model.Password)
        </div>
        <div>
            <p class="create-Bt ">
                <input type="submit" value="Insert" />
            </p>
        </div>
    </fieldset> 
```

控制器：

```
[HttpPost]
public ActionResult LoginIndex(string Role)
{
    var data = db.Login.ToList();

    if (Role == "DataEntry")
    {
        Response.Redirect("../Category/Index");
    }
    else
    {
        Response.Redirect("../Login/Index");
    }
    return View();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:07:47.387

您可以为使用创建的元素设置显式 ID`@Html.Hiddenfor`

Razor 允许您传递一个对象，或者一个`dictionary<string, object>`设置它生成的控件的 html 参数的对象。

使用它，您的代码将如下所示：

```
@Html.HiddenFor(model=>model.ID, new {Id="hiddenInputId"}); 
```

这将生成以下内容：（值可能与我的示例不同）

```
 <input type="hidden" id="hiddenInputId" name="Id" Value="0" /> 
```

# mkmapview - 如何将 MKMapView 置于指南针模式？

> ID：15409854
> 
> 赞同：5
> 
> 时间：2013-03-14T12:53:25.090
> 
> 标签：mkmapview, mapkit, compass-geolocation

我在我的 .xib 上放置了一个 MKMapView。
它工作正常，但我需要地图根据指南针方向旋转？

我已阅读有关“指南针模式”的信息。
也许我需要将 compassMode 的 MKMapView 属性设置为 true。但我在 MKMapView 的属性中找不到此类选项的任何复选框。

那么如何为我的地图视图启用指南针模式？
是否没有用于打开此功能的复选框。
顺便提一句，。我什至在 developer.apple.com 上观看了 46 分钟的视频

“使用 MapKit 在地理上可视化信息”。
该视频演示了一个在这种指南针模式下工作的应用程序。但是我从来没有看到任何关于如何让它像那样工作的解释。任何建议都会很棒。-jd

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-14T19:36:09.940

```
[mapView setUserTrackingMode:MKUserTrackingModeFollowWithHeading]; 
```

# jquery - jQuery Validation Plugin - 根据下拉响应制作所需的复选框组

> ID：15409858
> 
> 赞同：1
> 
> 时间：2013-03-14T12:53:36.287
> 
> 标签：jquery, forms, jquery-validate, conditional

我第一次使用带有 HTML 表单的 jQuery Validation 插件。我习惯于为此使用普通的旧 javascript，但我非常喜欢这个插件！无论如何，我坚持尝试进行一些条件验证。

场景：我有一个表格中的两部分问题。第一部分是是/否下拉菜单（必需）。第二部分是一组复选框，如果您在上一个下拉菜单中选择“是”，则必须至少选中其中一个。

```
<div>
<p><span class="bold large-font">8.</span> Some question to answer Yes or No to...</p>
<div class="margin-left-fifty">
    <select id="Q8" class="Q8" name="Q8">
        <option value="" selected></option>
        <option value="Yes">Yes</option>
        <option value="No">No</option>
    </select>
</div>
<div class="margin-left-fifty">
    <p><span class="underline italic">If Yes,</span> indicate which areas...</p>
</div>
<div class="margin-left-eighty">
    <input id="Q8yesA" class="Q8yes" name="Q8yesA" type="checkbox" value="Yes" />                    
    <label for="Q8yesA"><span class="small-font">a.</span> Option A</label>
    <br />
    <input id="Q8yesB" class="Q8yes" name="Q8yesB" type="checkbox" value="Yes" />                                            
    <label for="Q8yesB"><span class="small-font">b.</span> Option B</label>
    <br />
    <input id="Q8yesC" class="Q8yes" name="Q8yesC" type="checkbox" value="Yes" />                                            
    <label for="Q8yesC"><span class="small-font">c.</span> Option C</label>
    <br />
    <input id="Q8yesD" class="Q8yes" name="Q8yesD" type="checkbox" value="Yes" />                        
    <label for="Q8yesD"><span class="small-font">d.</span> Other</label>
    <input name="Q8yesDlist" type="text" maxlength="255" size="50" value="" placeholder="Please list..." />                    
</div> 
```

请注意，这是一个相当大的调查的一部分，因此为了更容易和更快地进行整理，我将每个回复都设为了个人，而不是使用数组。

我相信我用来验证复选框的代码来自这里： [validation for at least one checkbox](https://stackoverflow.com/questions/11512448/validation-for-at-least-one-checkbox)

所以现在，我的函数看起来像这样：

```
$(function(){

$.validator.addMethod('Q8yes', function (value) {
return $('.Q8yes:checked').size() > 0; }, 'Please check at least one box for Question 8.');

var checkboxes8 = $('.Q8yes');
var checkbox_names8 = $.map(checkboxes8, function(e,i) { return $(e).attr("name")}).join(" ");              

$('#survey').validate({
groups: {
    checks8: checkbox_names8
},
rules: {
  Q8: "required",
},
messages: {
  Q8: "Please answer Question 8.",                              
},
errorContainer: $('#errorContainer'),
errorLabelContainer: $('#errorContainer ul'),
wrapper: 'li'
});
}); 
```

我一直在尝试将 addMethod 包装在 If 语句中，但无法弄清楚。我什至不确定这是否是正确的想法。

非常感谢您的帮助！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:11:14.320

有几种方法可以做到这一点，您正在寻找其中一种方法。不过我会建议一种不同的方式。`name`首先，重新组织您的复选框以使其具有相同的属性但具有不同的属性是有意义的`value`。这将使它们在 jQuery Validate 中表现得更好。这就是你现在所拥有的：

```
<input id="Q8yesA" class="Q8yes" name="Q8yesA" type="checkbox" value="Yes" /> 
```

将其更改为：

```
<input id="Q8yesA" class="Q8yes" name="Q8yes" type="checkbox" value="Q8yesA" /> 
```

现在，对于实际的 jQuery Validate 代码。如果按照我建议的方式执行此操作，您可能不需要组，相反，您可以`rules`看起来像这样：

```
rules: {
    Q8: "required",
    Q8yes: {
        required: '#Q8 option[value="Yes"]:selected'
    },
    Q8yesDlist: {
        required: '#Q8yesD:checked'
    }
 } 
```

我已经使用了[所需](http://docs.jquery.com/Plugins/Validation/Methods/required#dependency-expression)规则的`dependency-expression`版本。

这是它的实际效果：http: [//jsfiddle.net/ryleyb/fccPf/](http://jsfiddle.net/ryleyb/fccPf/)

# ghostscript - 当我们使用 gs 命令将 ps 转换为 pcl 文件时如何减小 PCL 文件大小

> ID：15409859
> 
> 赞同：1
> 
> 时间：2013-03-14T12:53:38.840
> 
> 标签：ghostscript, postscript, printer-control-language

我正在使用 ghostscript 将 PDF 文件转换为 PS 文件。PS 文件的大小是正常的，但是当我将 PS 文件转换为 PCL 文件时，大小会变得非常大。我用 gs 命令尝试了许多选项来优化大小，但不知何故没有成功。有人可以给我任何提示我应该尝试什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T15:10:34.830

PCL 驱动程序基本上将输入渲染为图像，然后用足够的 PCL 将其包装起来以使其打印。缩小分辨率的唯一真正选择是降低分辨率（如果您以 600 dpi 运行，则可以转到 300，PCL 仅支持 300 或 600 dpi）

# c# - c#使用tabcontrol禁用箭头导航

> ID：15409864
> 
> 赞同：1
> 
> 时间：2013-03-14T12:53:50.787
> 
> 标签：c#, winforms, visual-studio-2008, tabcontrol, onkeyup

我的表单中有一个 tabcontrol，我需要使用 keyup 事件来管理一些东西。

当我按下左键或右键时，标签页会发生变化，我希望禁用 tabcontrol 键盘导航。

有可能这样做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T13:05:06.990

您不需要扩展 TabControl，只需订阅它的 KeyDown 事件并处理它。

```
tabControl1.KeyDown+=new KeyEventHandler(tabControl1_KeyDown); 
```

* * *

```
private void tabControl1_KeyDown(object sender, KeyEventArgs e)
        {
            if (e.KeyCode == Keys.Left || e.KeyCode == Keys.Right)
            {
                e.Handled = true;
            }
        } 
```

tabControl1 不会更改页面。表单的 KeyUp 和 tabControl1 正常触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:05:36.803

我的建议是您只需在`Form`关卡中抓取这些键并将`Handled`属性设置为`true`（通过返回`true`），以便控件不会获得按键。

将此方法添加到您的`Form`：

```
protected override bool ProcessCmdKey(ref Message msg, Keys keyData)
{
    if (keyData == Keys.Left || keyData == Keys.Right)
    {
        // do what you need to do and the
        // return true will stop processing
        return true;
    }

    return base.ProcessCmdKey(ref msg, keyData);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-14T13:22:25.203

我想你正在寻找这个。

```
if (e.KeyCode == Keys.Tab) 
{
    //your logic
    e.SuppressKeyPress();
} 
```

[这是我从那里得到的](https://stackoverflow.com/questions/3749674/how-to-intercept-the-tab-key-press-to-prevent-standard-focus-change-in-c-sharp)

# automation - open-office 要点，导入 html 时的样式

> ID：15409867
> 
> 赞同：0
> 
> 时间：2013-03-14T12:54:04.050
> 
> 标签：automation, openoffice.org

我正在导入 html 以打开办公室并将其转换为 odt（使用 PyODConverter），然后使用 zip 替换样式表 style.xml。

我在项目符号列表的间距方面遇到问题，但无法更改。项目符号列表具有文本正文样式，因此如果我更改它，所有段落也会更改。

有没有办法在导入（从 html 中）时自动使项目符号列表具有不同的样式？或者设置仅适用于作为项目符号列表的文本正文的样式？

如有必要，我可以编辑 style.xml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T12:12:43.190

我使用了条件格式。

*   将 doc 作为 odt 加载（加载 html 不起作用：我找不到选项*）。
*   根据文本正文（或该部分已有的格式）为您想要的内容添加新格式。
*   修改文本正文格式，选择条件*，并将编号级别链接到您的新样式。

然后保存文件并使用 zip 提取 style.xml，以供以后使用。

# c++ - 在另一个对象中创建一个对象会更改“this”

> ID：15409868
> 
> 赞同：0
> 
> 时间：2013-03-14T12:54:08.477
> 
> 标签：c++, visual-studio-2012, crash

我有一个 C++ 类*RendererWidget*，它有一个*init()*方法。使用 Visual Studio 2012 编译并运行它后，我在一个非常奇怪的位置发生了崩溃：

```
bool RendererWidget::init(Renderer *renderer)
{
  /* ... */
  mRenderer = renderer;
  mViewport = new Viewport();

  return mRenderer->init(mViewport);
} 
```

该函数被传递一个非 nullptr 渲染器，然后创建一个*Viewport*对象，该对象具有一个简单的构造函数。问题是在*mViewport = new Viewport();之前* ，*this*和*mRenderer*有一些定义的值，之后，*this*更改为完全不同的值，*mRenderer*更改为 0x0，这会导致稍后崩溃。可能的原因是什么？

按照评论的建议进行编辑：

完整的初始化（）：

```
bool RendererWidget::init(Renderer *renderer)
{
    Engine *engine = Engine::instance();

    if (renderer)
    {
        mRenderer = renderer;
        mOwnsRenderer = false;
    }
    else
    {
        mRenderer = engine->createRenderer();
        if (!mRenderer)
            return false;

        mOwnsRenderer = true;
    }

    mViewport = new Viewport();

    // this and mRenderer are already changed here, mViewport is a valid pointer
    mViewport->initFromOther(reinterpret_cast<HWND>(winId()));

    // crash
    return mRenderer->init(mViewport, engine->getMainRenderer());
} 
```

视口：

```
Viewport::Viewport()
    : mHandle(NULL)
    , mRenderer(nullptr)
    , mAudio(nullptr)
    , mInput(nullptr)
    , mOwnsHandle(true)
{
}

void Viewport::initFromOther(SystemWndHandle hWnd)
{
    mHandle = hWnd;
    mOwnsHandle = false;
} 
```

# c# - 未映射源属性时强制抛出异常

> ID：15409871
> 
> 赞同：8
> 
> 时间：2013-03-14T12:54:14.007
> 
> 标签：c#, automapper

在 AutoMapper 2.2.1 中，有什么方法可以配置我的映射，以便在未明确忽略某个属性时引发异常？例如，我有以下类和配置：

```
public class Source
{
    public int X { get; set; }
    public int Y { get; set; }
    public int Z { get; set; }
}

public class Destination
{
    public int X { get; set; }
    public int Y { get; set; }
}

// Config
Mapper.CreateMap<Source, Destination>(); 
```

我使用此配置收到的行为是设置了`Destination.X`and`Destination.Y`属性。此外，如果我测试我的配置：

```
Mapper.AssertConfigurationIsValid(); 
```

然后我将不会收到任何映射异常。我想要发生的是因为没有被明确忽略`AutoMapperConfigurationException`而被抛出。`Source.Z`

我想要它，以便我必须明确忽略 Z 属性才能`AssertConfiguartionIsValid`无例外地运行：

```
Mapper.CreateMap<Source, Destination>()
      .ForSourceMember(m => m.Z, e => e.Ignore()); 
```

目前，AutoMapper**不会**抛出异常。如果我没有明确指定`Ignore`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-14T17:10:06.763

这是断言所有源类型属性都已映射的方法：

```
public static void AssertAllSourcePropertiesMapped()
{
    foreach (var map in Mapper.GetAllTypeMaps())
    {
        // Here is hack, because source member mappings are not exposed
        Type t = typeof(TypeMap);
        var configs = t.GetField("_sourceMemberConfigs", BindingFlags.Instance | BindingFlags.NonPublic);
        var mappedSourceProperties = ((IEnumerable<SourceMemberConfig>)configs.GetValue(map)).Select(m => m.SourceMember);

        var mappedProperties = map.GetPropertyMaps().Select(m => m.SourceMember)
                                  .Concat(mappedSourceProperties);

        var properties = map.SourceType.GetProperties(BindingFlags.Instance | BindingFlags.Public);

        foreach (var propertyInfo in properties)
        {
            if (!mappedProperties.Contains(propertyInfo))
                throw new Exception(String.Format("Property '{0}' of type '{1}' is not mapped", 
                                                  propertyInfo, map.SourceType));
        }
    }
} 
```

它检查所有已配置的映射并验证每个源类型属性是否已定义映射（映射或忽略）。

用法：

```
Mapper.CreateMap<Source, Destination>();
// ...
AssertAllSourcePropertiesMapped(); 
```

抛出异常

> “YourNamespace.Source”类型的属性“Int32 Z”未映射

如果您忽略该属性，一切都很好：

```
Mapper.CreateMap<Source, Destination>()
      .ForSourceMember(s => s.Z, opt => opt.Ignore());
AssertAllSourcePropertiesMapped(); 
```

# asp.net-mvc - 日期时间格式全局更改

> ID：15409877
> 
> 赞同：3
> 
> 时间：2013-03-14T12:54:31.740
> 
> 标签：asp.net-mvc, asp.net-mvc-3

而不是对数据时间值使用这样的东西：

```
@Html.DisplayTextFor("", String.Format("{0:MM/dd/yyyy}", Model.DOB)) 
```

是否可以在 asp.net mvc 3.0 中全局设置格式（例如在 web.config 中）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T12:56:47.980

在以下位置创建一个 DisplayTemplate`Views/Shared/DisplayTemplates/DateTime.cshtml`

```
@model DateTime

@String.Format("{0:MM/dd/yyyy}", Model)) 
```

每当你使用`@Html.DisplayFor()`一个`DateTime`属性时，MVC 都会使用这个模板。

# java - 无法在休眠中获取父数据

> ID：15409878
> 
> 赞同：0
> 
> 时间：2013-03-14T12:54:32.610
> 
> 标签：java, oracle, hibernate

嗨，我有一个涉及多对多关系的休眠问题。我有两张多对多的表，所以我又介绍了一张保存两张表之间关系的表。在我的配置（hbm）文件中，我设置了lazy="false" 和fetch="join"，因为我想在查询父表时同时获取父子信息。现在我想从第三个表中获取父表数据（它包含两个表之间的关系）。但我无法获取父母信息，我收到以下异常。

**配置片段**

```
Parent 1 - 
    <hibernate-mapping>
        <class name="com.sample.Technology" table="TECHNOLOGY">
            <id name="technologyId" type="big_decimal">
                <column name="TECHNOLOGY_ID" precision="22" scale="0" />
                <generator class="increment" />
            </id>
            <property name="technologyName" type="string">
                <column name="TECHNOLOGY_NAME" length="50" not-null="true" unique="true" />
            </property>
            <property name="technologyDesc" type="string">
                <column name="TECHNOLOGY_DESC" length="500" />
            </property>
            <set name="regionTechnologyCapabilities" table="REGION_TECHNOLOGY_CAPABILITY" cascade="all" inverse="true" lazy = "false" fetch="join">
                <key>
                    <column name="TECHNOLOGY_ID" precision="22" scale="0" not-null="true" unique="true" />
                </key>
                <one-to-many class="com.sample.RegionTechnologyCapability" />
            </set>
        </class>
    </hibernate-mapping>
Parent 2 : -

<class name="com.sample.Region" table="REGION">
    <id name="regionId" type="big_decimal">
        <column name="REGION_ID" precision="22" scale="0" />
        <generator class="increment" />
    </id>
    <property name="regionName" type="string">
        <column name="REGION_NAME" length="50" not-null="true" unique="true" />
    </property>
    <property name="regionDesc" type="string">
        <column name="REGION_DESC" length="500" />
    </property>
    <set name="regionTechnologyCapabilities" table="REGION_TECHNOLOGY_CAPABILITY" cascade="all" inverse="true" lazy = "false" fetch="join">
        <key>
            <column name="REGION_ID" precision="22" scale="0" not-null="true" unique="true" />
        </key>
        <one-to-many class="com.sample.RegionTechnologyCapability" />
    </set>
</class>

Relational Table 3 :-    <class name="com.sample.RegionTechnologyCapability" table="REGION_TECHNOLOGY_CAPABILITY">
        <id name="regionTechCapbId" type="big_decimal">
            <column name="REGION_TECH_CAPB_ID" precision="22" scale="0" />
            <generator class="increment" />
        </id>
        <many-to-one name="region" class="com.sample.Region" fetch="join">
            <column name="REGION_ID" precision="22" scale="0" not-null="true" />
        </many-to-one>
        <many-to-one name="technology" class="com.sample.Technology" fetch="join">
            <column name="TECHNOLOGY_ID" precision="22" scale="0" not-null="true" />
        </many-to-one>
    </class> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T16:48:37.963

为什么要手动映射连接表？使用双向多对多并让 Hibernate 处理连接表！

```
<hibernate-mapping>
    <class name="com.sample.Technology" table="TECHNOLOGY">
        <id name="technologyId" type="big_decimal" column="TECHNOLOGY_ID">
            <generator class="increment"/>
        </id>
        <set name="regions" table="REGION_TECHNOLOGY" inverse="true">
            <key column="TECHNOLOGY_ID"/>
            <many-to-many column="REGION_ID" class="com.sample.Region"/>
        </set>
    </class>
</hibernate-mapping>

<hibernate-mapping>
    <class name="com.sample.Region" table="REGION">
        <id name="regionId" type="big_decimal" column="REGION_ID">
            <generator class="increment"/>
        </id>
        <set name="technologies" table="REGION_TECHNOLOGY">
            <key column="REGION_ID"/>
            <many-to-many column="TECHNOLOGY_ID" class="com.sample.Technology"/>
        </set>
    </class>
</hibernate-mapping> 
```

# c - 如何计算算法的执行时间和实时性

> ID：15409880
> 
> 赞同：0
> 
> 时间：2013-03-14T12:54:38.600
> 
> 标签：c, algorithm, real-time

你如何使用clock()计算出程序的真实世界时间和执行时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:46:26.463

如果时钟（）是必需的，我无能为力。如果“获取执行时间”部分是您想要的，您可以查看 gcc（gnu 编译器）的分析选项。您将代码链接到专门编译的库，这些库提供分析信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T16:37:53.000

使用clock() 来查找程序的执行时间可能不是一个好主意。

但我可以为您的问题提出一种可能的解决方案。您必须在每个将正在运行的进程发送到等待状态或阻塞状态的 C 语句之前和之后使用 clock() 来测量时间。例如，您的程序可能正在等待子进程终止或阻塞，直到用户输入一些数据。因此，在这种情况下，您的程序没有使用 CPU。所以你必须从程序的总运行时间中扣除这段时间。

```
int sum,n1,n2;
clock_t t1, t2, t3, t4;
long int x;
double dur1,dur2;

t1 = clock();

printf("\nEnter two numbers:\n");

t2 = clock();

scanf("%d%d",&n1,&n2);

t3 = clock();

sum= n1 + n2;

printf("\nSum is %d\n",sum);

t4 = clock();

dur1 = ( double ) ( t4 - t1 ) / CLOCKS_PER_SEC;

dur2 = ( double ) ( ( t4 - t1 ) - ( t3 - t2 ) ) / CLOCKS_PER_SEC;

printf( "\nThe Total Running time of the proces is %lf\n", dur1 ); 
printf( "\nThe CPU time taken by the proces is %lf\n", dur2 ); 
```

当然，对于任意大的程序，这个程序只会给出一个粗略的估计。对于小型程序，估计并非全部有用。

# c++ - C ++ Qt - 仅在最后一个回复完成后发送POST请求

> ID：15409882
> 
> 赞同：0
> 
> 时间：2013-03-14T12:54:41.347
> 
> 标签：c++, qt, post

我有一个桌面应用程序，它使用 POST 请求将 JSON 字符串（一些设备信息）发送到 Web 服务，如果请求成功或在数据库中存储信息时发生错误，Web 服务会回复一个小的 JSON 字符串作为指示.

当用户单击按钮并执行以下操作时会发送此数据：

```
foreach(QString device, deviceList)
{
    QByteArray jsonString = device.toUtf8();
    currentRecord = device;

    // POST data size for "Content-Length" header
    QByteArray postDataSize = QByteArray::number(jsonString.size());

    // Build POST request
    QUrl serviceURL("http://www.mywebsite.com/awesomeWebService");
    QNetworkRequest request(serviceURL);
    request.setRawHeader("Content-Type", "application/json");
    request.setRawHeader("Content-Length", postDataSize);

    // Send POST request
    networkManager->post(request, jsonString);
} 
```

当发送每个 POST 请求时，我会在一个名为 replyFinished() 的插槽中处理回复的 finished() 信号。我知道 QNetworkAccessManager（在我的例子中是 networkManger）正在异步发送请求，所以我认为理论上我可以收到列表中第一个设备的回复，而不是第二个设备的回复。

如果所有信息都成功发送，那么我在 replyFinished() 方法中处理回复的顺序并不重要，但是如果服务器端发生错误，我希望能够知道 Web 服务针对哪个设备字符串给了我一个错误。如果 Web 服务向我返回带有错误指示符的设备字符串，这可以完成，但这没有实现，如果可能的话，我必须想办法在我这边做。这就是为什么我把 currentRecord = device; 在 foreach 循环中，试图跟踪设备字符串（并在 replyFinished() 方法中使用它，但它似乎不起作用。

有没有什么办法可以在我收到最后一个请求的回复后强制发送下一个 POST 请求？

我尝试使用这样的东西（当回复完成时，while循环会中断），但应用程序冻结了：

```
QNetworkReply *reply;
while(!reply->isFinished())
{
    reply = networkManager->post(request, jsonString);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T13:57:56.297

坐在 while 循环中会阻止 Qt 处理传入事件，这就是您的应用程序冻结的原因。相反，您应该发出一个请求，等待`finished()`信号，然后从您的`replyFinished()`插槽发出队列中的下一个请求。重复直到所有请求都完成。

# ios - 在 UIScrollView ios 5 中创建 3D 效果

> ID：15409889
> 
> 赞同：0
> 
> 时间：2013-03-14T12:54:49.723
> 
> 标签：ios, 3d, uiscrollview

我试图在滚动时创建 3d 效果，我有 4 个`UIScrollViews`（具有相同的框架）在彼此之上。我需要它们以不同的速度滚动 - 因此后滚动将以最慢的速度移动，而顶部滚动将以最高的速度移动。但是当减速完成时，所有应该都有相同的`contentOffset`。

`scrollDidScroll`我使用顶部的委托方法`scrollView`来滚动所有其他内容`scrollViews`，但我遇到了内存问题（即使我总是删除不必要的视图 - 所以每次滚动总是只有 3 个视图。

总之很糟糕！动作缓慢...有人有什么建议或启发性的材料可以阅读吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:14:54.873

您想要实现的是视差滚动。我的 cocos2d 经验告诉我使用 cocos2d，但正如问题的原作者所建议的那样，也有可能使用 Core Animation。Cocos2d 包含*CCParallaxNode*来有效地帮助创建这样的滚动效果：

[http://www.raywenderlich.com/3611/how-to-make-a-space-shooter-iphone-game](http://www.raywenderlich.com/3611/how-to-make-a-space-shooter-iphone-game)

[http://www.cocos2d-iphone.org/archives/22](http://www.cocos2d-iphone.org/archives/22)

[CCParallaxNode parallaxRatio（解释）](https://stackoverflow.com/questions/6572163/ccparallaxnode-parallaxratio-explanation)

正如这个问题的作者在评论中所写的那样，使用 Core Animation 也有很好的教程：

[http://mysterycoconut.com/blog/2011/09/cag4/](http://mysterycoconut.com/blog/2011/09/cag4/)

希望它可以帮助其他人启发下一步。

# java - 我应该使用多少线程来渲染图像？

> ID：15409891
> 
> 赞同：1
> 
> 时间：2013-03-14T12:54:52.583
> 
> 标签：java, multithreading, concurrency, threadpool, bufferedimage

我见过非常相似的问题，但似乎没有一个提供任何科学评估。我的问题是我想优化 Java 线程池中用于分形渲染应用程序的线程数。

通过将图像分割成子图像，我能够同时渲染每个子图像是完全独立的。

所以我的想法是根据处理器中可用线程的数量制作一个固定的线程池。然后每个线程可以渲染一个或多个子图像。如果我这样做，我应该使用什么比例的线程与子图像？有没有更好的方法来分担负载？

如果我有很多具有不同内核数量的计算机，我可以通过实验自己找到答案。不幸的是我没有这种奢侈=[

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T13:03:10.353

在目前系统上没有运行其他 CPU 密集型应用程序的前提下，每个处理器拥有一个线程通常是理想的。

这背后的基本原理是线程之间的切换是一项昂贵的操作（相对而言），因此有效使用多核 CPU 的最佳方法是避免线程切换，同时仍为 CPU 提供足够的线程以便利用每个内核。

系统的CPU核数可以通过

`Runtime.getRuntime().availableProcessors();`

在具有超线程的系统上，这将为您提供虚拟 CPU 的数量，而不是物理 CPU 的数量。当您为每个虚拟内核运行一个线程而不是每个物理内核运行一个线程时，每个线程可能需要更长的时间才能完成，但总体而言，它们可以同时完成更多工作，因为 CPU 的内部资源可以得到更有效的利用。因此，您应该为每个虚拟核心运行一个，除非每个单独的线程尽可能快地完成对您很重要（在这种情况下，您可能会考虑使用单线程，因为执行单线程的多核英特尔 CPU 会超频它的核心运行并在核心之间切换，以便其他核心冷却）。

对于要交付给最终用户的应用程序，您可能会考虑将此值用作默认值，但允许他们更改它，因为用户可能希望与其他 CPU 密集型应用程序并行运行您的程序。在这种情况下，他们可能希望减少您的应用程序产生的线程数，以免减慢其他线程的速度。

# linux - 了解 netfilter REDIRECT 目标

> ID：15409895
> 
> 赞同：1
> 
> 时间：2013-03-14T12:55:01.367
> 
> 标签：linux, networking, iptables, nat, netfilter

只是在玩 netfilter REDIRECT-Target 。我想知道使用“--to-ports”（复数）时如何更改目标端口。

```
iptables -I PREROUTING -t nat -i test -p TCP --dport 2800 -j REDIRECT --to-ports 2900-2905 
```

第一场比赛/命中 2800 -> 2900 ?
第二场比赛/命中 2800 -> 2901 ?
第三场比赛/命中 2800 -> 2902 ?

在我的测试中，唯一使用的端口是第一个： 2900 。在这种情况下，范围参数“--to-ports”让我感到困惑。原始端口会影响范围内正在使用的端口吗？ 使用“--to-ports”指定范围*时*，使用*哪个端口？*“--to-port” 也可以，但手册页中没有提到。

 *谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:59:37.617

`netfilter`是无状态的，它不能跟踪端口状态，所以循环是不可能实现的。

此参数旨在解决端口冲突问题，例如检查此规则：

```
iptables -t nat -A PREROUTING -p tcp --dport 1000:2000 -j REDIRECT --to-ports 2900 
```

如果客户端想要建立 2 个连接

```
client:3000 <---> server:1000
client:3000 <---> server:1001 
```

这是可能的，因为客户端可以重用其端口。如果服务器将两个连接都重定向到端口 2900，则会导致问题，这两个连接变得相同。

所以服务器需要多个冗余端口来避免这个问题。但如果客户端不重用其端口，则不会发生这种情况。*

# extjs4 - Extjs XTemplate 无法正确呈现

> ID：15409896
> 
> 赞同：0
> 
> 时间：2013-03-14T12:55:06.450
> 
> 标签：extjs4, extjs4.1, extjs3

您好我正在使用 ExtJs 和 flickr API 创建一个 flickr 搜索。当我使用 XTemplate 在面板中渲染图像时检索 json 响应后，div 被添加到它之前的 div 中。它成为包含图像的上述 div 的子项。

负责它的代码是这样的：

```
JSONPStore.on('load', function(){

var record = JSONPStore.getAt(0);

if(record){
    data = record.raw.photos.photo;
    //console.log(JSONPStore);
    var newEl = Ext.create('Ext.panel.Panel', {
        width: 1240,
        margin: '0 20 0 20',
        id: 'pnlEl',
        store: JSONPStore,
        overflowY: 'auto',
        items: [
            {
                xtype: 'panel',
                id: 'toBeAdded',
                overflowY: 'auto',
                width: 600,
                layout: 'fit',
                style: "margin:15px",
                    bodyStyle: "padding:5px;font-size:11px;",
                    listeners:{
                        render: function(){
                            var tpl = new Ext.XTemplate(
                                    '<tpl for=".">',
                                        //'<div class="actualImg">',
                                            '<div>',
                                            '<span>{title}</span>',
                                            '<img src="http://farm{farm}.staticflickr.com/{server}/{id}_{secret}.jpg"',
                                            '</div>',
                                    '</tpl>'

                        );
                        //console.log(this);
                        tpl.append(this.body, data);

                    }
                }
            }
        ]
    });

    if(vport.layout.align === 'stretch'){
        vport.add(newEl) ;
        vport.doComponentLayout();
    }

}
else{
    console.log('Not Defined');
}JSONPStore.on('load', function(){

var record = JSONPStore.getAt(0);

if(record){
    data = record.raw.photos.photo;
    //console.log(JSONPStore);
    var newEl = Ext.create('Ext.panel.Panel', {
        width: 1240,
        margin: '0 20 0 20',
        id: 'pnlEl',
        store: JSONPStore,
        overflowY: 'auto',
        items: [
            {
                xtype: 'panel',
                id: 'toBeAdded',
                overflowY: 'auto',
                width: 600,
                layout: 'fit',
                style: "margin:15px",
                    bodyStyle: "padding:5px;font-size:11px;",
                    listeners:{
                        render: function(){
                            var tpl = new Ext.XTemplate(
                                    '<tpl for=".">',
                                        //'<div class="actualImg">',
                                            '<div>',
                                            '<span>{title}</span>',
                                            '<img src="http://farm{farm}.staticflickr.com/{server}/{id}_{secret}.jpg"',
                                            '</div>',
                                    '</tpl>'

                        );
                        //console.log(this);
                        tpl.append(this.body, data);

                    }
                }
            }
        ]
    });

    if(vport.layout.align === 'stretch'){
        vport.add(newEl) ;
        vport.doComponentLayout();
    }

}
else{
    console.log('Not Defined');
} 
```

}， 这）;

我想用面板内的 div 创建一个类似平铺的结构。但这是在其他 div 中创建 div。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T18:19:49.697

您的代码存在许多问题：

*   这是过度嵌套的经典案例，您不需要内部面板
*   外部面板应该是一个单独的类，然后您可以实例化它
*   `Ext.panel.Panel`对 Stores 一无所知，因此为它分配一个什么也不做。`Ext.grid.Panel`你可能想看看
*   `id`除非绝对必要，否则应避免使用财产；这`id`直接转换为 DOM，如果您稍后尝试重用此组件，您将收到异常
*   在这种情况下，布局无关，它用于布局容器的子*组件*。由于内部面板中没有，因此`layout`是多余的
*   模板中的 HTML 已损坏：您打开了两个 div 但只关闭了一个，并且 img 标签格式不正确
*   您无需在每次渲染组件时都创建和应用模板；事实上，这样做可能是最糟糕的性能方面。将模板分配给`tpl`外部面板中的配置，并`update`在数据到达时调用它

您可能想查看数据视图示例：[http ://docs.sencha.com/ext-js/4-2/#!/example/view/data-view.html](http://docs.sencha.com/ext-js/4-2/#!/example/view/data-view.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T10:39:44.370

Ext.panel.Panel 采用数据属性，这导致错误地假设它采用商店，在这种情况下，您应该使用数据视图，而不是采用模板和商店作为配置的面板。所以“待添加”应该是一个数据视图，而不是一个面板。

[http://docs.sencha.com/ext-js/4-2/#!/api/Ext.view.View-cfg-store](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.view.View-cfg-store)

# listview - listview 中的第一行应该不同

> ID：15409897
> 
> 赞同：1
> 
> 时间：2013-03-14T12:55:06.870
> 
> 标签：listview

我想在 Outlook -> 联系人中添加一行（“单击此处添加..”）。在列标题下方，第一行与另一行不同，并且具有其他功能。它不是 ItemContent 的一部分

在我的 xaml 中，我有带有可编辑文本框的列表视图。

```
 <ListView.View>
                            <GridView>
                                <!--  <GridViewColumn Width="140" Header="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=ColumnTitle}" />-->
                                <GridViewColumn Width="290" Header="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=ColumnTitle}" >
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                           <local:EditableTextBlock Text="{Binding UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Stretch"  Height="23" />

                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                                <GridViewColumn Width="10"  >
                                    <GridViewColumn.CellTemplate>
                                        <DataTemplate>
                                            <local:EditableTextBlock Text="{Binding UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Stretch"  Height="23" />

                                        </DataTemplate>
                                    </GridViewColumn.CellTemplate>
                                </GridViewColumn>

                            </GridView>
                        </ListView.View> 
```

# ios - 智能横幅停止工作

> ID：15409902
> 
> 赞同：2
> 
> 时间：2013-03-14T12:55:21.727
> 
> 标签：ios

我注意到智能横幅已经有一段时间没有出现在我们的网页上来宣传我们的应用程序了。假设我有问题，我尝试了一些没有成功的事情。这不是电话，因为我可以看到 ted.com 智能横幅。仅使用 ted 智能横幅代码（在 iOS 设备上测试）创建了一个简单页面： [http](http://devgm2.walkjogrun.net/utils/ted.html) ://devgm2.walkjogrun.net/utils/ted.html 可以。将他们的应用 ID 替换为我的： [http://devgm2.walkjogrun.net/utils/sb.html](http://devgm2.walkjogrun.net/utils/sb.html) 嗯。这绝对是我的应用 ID，我们肯定还在应用商店中。

有没有其他人看到这个问题？

更新：2013 年 3 月 28 日 - 我的 iPhone 5 上仍在发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-26T15:13:03.197

您之前是否关闭了页面上的智能横幅？因为如果是这样，它就不会再显示了。这存储在 cookie 中。因此，也许可以尝试为您的网站清除手机上的 cookie，看看它是否显示。

# php - 防止 PHP 搜索表单中出现空白字段

> ID：15409906
> 
> 赞同：0
> 
> 时间：2013-03-14T12:55:38.400
> 
> 标签：php, mysql

我有一个指向搜索我的数据库的`PHP`脚本的 HTML 表单。`MySQL`如果用户没有在表单中输入任何值，我想向他们返回一条错误消息。我已经尝试了下面的代码，但现在发生的情况是，即使我在表单字段中输入了一个值，它也会返回下面的错误消息。如果下面的命令不是最好的，你能指出什么是错误的，或者甚至建议一个替代方案。

```
if ($_POST['checkbox01'] == "on")
{
    $result = mysql_query("SELECT * FROM colour", $connection) or die("Cannot run     query");
    //Search for all records
}

elseif (!$_POST[''])
//Or else, if no fields are filled in...
{
    die('Please complete at least one search field');
    //Give an error message
}

else
... //Search the MySQL db using vaues entered into the form 
```

（我也试过...）

```
elseif(empty($_POST[''])) 
{
die('Please complete at least one search field');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:05:24.883

我认为[isset](http://php.net/manual/en/function.isset.php)函数是您在这里需要的，我会将它与逻辑结合起来检查您的所有表单输入字段，例如（快速 hacky 示例 - 尽管不要使用 die 作为真正的解决方案）：

```
vfield1 = "";
vfield2 = "";
vfield3 = "";

if (isset($_POST['field1'])) { vfield1 = $_POST['field1']; }
if (isset($_POST['field2'])) { vfield2 = $_POST['field2']; }
if (isset($_POST['field3'])) { vfield3 = $_POST['field3']; }

if (vfield1.vfield2.vfield3 == "") {
    die('Please complete at least one search field');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:05:12.100

$_POST[''] 不会做任何事情，$_POST 是从表单发送的字段数组。例如，如果您有一个简单的登录表单（用户名/密码），则 $_POST 数组将类似于：

```
array('username' => 'value', 'password' => 'value'); 
```

如果要检查所有字段是否为空，最好在数组中运行一个循环。例如：

```
foreach($_POST as $key => $value) {
   if($value == "") { die("Please enter a value into $key") }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:21:18.083

这也将起作用：

```
<?php

echo '
<form action="" method="post">
<input type="text" name="search"><input type="submit" name="submit" value="Search">
</form>';

if(isset($_POST['submit'])) {

    // Check if NOT searchfield is emty
    if(!$_POST['search'] == "") {
        echo $_POST['search'];
    }

    else {
        echo 'You have to search for something!';
    }

}

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T13:03:00.727

也许看看[这个](http://www.1stwebdesigner.com/tutorials/building-real-time-form-validation-using-jquery/)？这是一个实时验证，非常适合我的表单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-14T13:03:06.313

在旁注中，如果您检查复选框以指定一个值，它可能会有所帮助，即：

```
<input type="checkbox" name="search_active" value="t" /> 
```

....然后在 PHP 中检查它

```
if ($_POST['search_active'] == "t") { // box checked } else { //box not checked } 
```

无论如何，要检查列，我会用强制列填充一个数组，然后在 POST 数组上进行 foreach 以检查列是否都在那里。

...更好的是使用某种 jQuery 验证，这意味着您甚至不需要重新加载页面:)

这是一些用强制列填充数组的示例代码:)

```
$field_check = array("field1", "field2", "field3");
foreach ($field_check as $field) { 
   if (empty($_POST[$field])) { 
      die("Please enter a value into $field");
   }
}
// if we have got to here - continue with the search.
mysql_query(....); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-14T13:04:21.650

这样的事情应该更容易在客户端使用一些 Javascript 来实现。jQuery为此提供了一些非常有用的方法，例如：

```
$('#Your_Form input').blur(function()
{
    if( $(this).val().length == 0 ) {
        $('#warningDiv').addClass('warning');
    }
    else{
        $('#warningDiv').removeClassClass('warning');
    }
}); 
```

而`#warningDiv`当输入为空时，可能是一个 div 变为红色。您还可以在输入按键/更改事件中实现类似的行为，以定期检查值。

如果您坚持在服务器端执行此操作，我建议您使用不同的答案。

# c++ - 在不安装 Visual Studio 的情况下使用 Microsoft C++ 编译器

> ID：15409908
> 
> 赞同：14
> 
> 时间：2013-03-14T12:55:50.860
> 
> 标签：c++, visual-studio, visual-c++

在我们的团队中，开发人员都有 Visual Studio 2012，我们也使用 TFS2012 构建。出于空间和可管理性的原因，我们不在我们的（许多）构建代理上安装 Visual Studio。到目前为止，这适用于 C# 项目 (csproj)。

现在我们要添加对 C++ 项目 (vcxproj) 的支持。这些构建在开发者的机器上，而不是构建代理上——我们得到： `X.vcxproj(31,3): error MSB4019: The imported project "C:\Microsoft.Cpp.Default.props" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.`

我想这是因为 C++ 编译器和目标仅与 VS 一起安装。

1.  有没有办法只检查编译器和目标，并在我们的 common.targets 中设置一些属性指向那里？
2.  如果做不到这一点，我需要在每个构建代理上安装以支持 C++ 编译的最低要求是多少？我能找到的最少的是 VS Express，它仍然太合我的胃口。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-14T13:28:57.200

对于 C# 来说很简单，编译 C# 程序的能力在 System.CodeDom 框架中是天生的，所以只需安装 .NET 就足够了。对于 C++ 而言并非如此。您至少需要安装 Windows SDK，半场演出。这包括低于 8.0 的 SDK 版本中的 C++ 编译器

但是，您接下来会担心如何找到在该机器上获取类库的方法。例如 ATL 和 MFC。你不能只是复制它们，这违反了许可证。更糟糕的是，微软不再像过去那样做生意了。自 VS2012 以来，他们切换到快速发布周期，更新以几个月的方式发布。这些不是您可以忽略的更新，它们添加了相当大的块来实现 C++11。绝对是您的 C++ 程序员想要使用的那种。

一般来说，SDK 版本的 C++ 编译器只是与 VS 版本不同步，Windows 团队没有义务保持更新。构建机器*永远*不应该做的一件事是运行一组与程序员使用的构建工具不同的构建工具。这使得开发人员无法复制的构建中断成为一个令人讨厌的争论点。除非你喜欢让你的生活变得复杂，否则信息是明确的。不要这样做，安装VS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:17:19.713

早期 TFS 版本也存在此问题。据我所知，唯一的解决方案是将目标复制到代理。创建此文件夹的副本就足够了：

> `MSBuild\Microsoft\VisualStudio\v11.0\*.*`

至少您不必在代理上安装 Visual Studio（除非您想自动创建安装项目）。

该错误也得到了描述[here](http://myalmblog.com/2010/01/04/msb4019-error-on-newly-built-tfs-2010-beta-2-build-server/)。

# ruby-on-rails - 关联关节数据

> ID：15409911
> 
> 赞同：0
> 
> 时间：2013-03-14T12:56:14.777
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations

Rails新手在这里，我有两个模型相关

```
 class User < ActiveRecord::Base
    has_many :images

  class Image < ActiveRecord::Base
    belongs_to :user 
```

我知道你可以获取用户图像，我也可以使用我的 current_user 方法返回我当前用户的信息

```
@user.images or current_user.images 
```

如果我希望它像使用普通 sql 一样在一行中返回图像数据和用户数据怎么办？

```
SELECT u.* FROM users u
JOIN images i
ON i.user_id = u.id etc.. 
```

最好和最有效的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:58:46.750

查询 -

```
SELECT u.* FROM users u
JOIN images i
ON i.user_id = u.id etc.. 
```

相当于 -

```
@user.joins(:images) 
```

更新：

仅获取某些字段-

```
@comments = @user.joins(:images).select("images.path, images.path_thumb, users.username") 
```

# android - 我应该在 MainActivity 扩展 Activity 中使用 AsyncTask 类吗？

> ID：15409912
> 
> 赞同：14
> 
> 时间：2013-03-14T12:56:19.643
> 
> 标签：android, android-asynctask

我想知道是否在运行线程`AsyncTask`的主要活动（ ）中使用。`MainActivity.java`

例如，我注意到许多教程在使用`AsyncTask`它们时在主类中声明了一个私有类，扩展`Activity`而不是为它创建一个独立的`.java`文件`AsyncTask`( `MyAsyncTask.java`) `class`。

但是我注意到，当使用独立文件时，我无法运行`runOnUIThread`()，因为它属于`Activity`该类，所以我将如何能够在扩展而不是扩展的独立`AsyncTask`(MyAsyncTask.java) 中使用此方法。`AsyncTask``Activity`

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-14T12:59:36.650

那完全没问题。我经常这样做，但这取决于你如何使用它。如果它可以被其他人使用，`Activities`那么我给它自己的类或共享类。但如果它是出于单一目的，那么我会将其设为`MainActivity`.

使其成为内部类的好处是它可以直接访问该类的成员变量。如果你把它变成一个单独的类，那么你只需要为它创建一个构造函数，如果你需要传入`params`诸如 a`context`或其他变量。

我不知道你在做什么，但我不确定你需要`runOnUiThread()`。您可以在您的`AsyncTask`文件中创建一个构造函数，并让它接受`context`作为参数和您需要的任何其他内容。`UI`然后你可以更新`onPostExecute()`

**例子**

```
public class MyAsyncTask extends AsyncTask{

    private Context context; 

    public MyAsyncTask(Context context) {  // can take other params if needed
        this.context = context;
    }

    // Add your AsyncTask methods and logic
    //you can use your context variable in onPostExecute() to manipulate activity UI
} 
```

然后在你的调用它`MainActivity`

```
MyAsyncTask myTask = new MyAsyncTask(this);  //can pass other variables as needed
myTask.execute(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-14T13:05:00.197

通常，我们将`AsyncTask`其放在同一个类中，以便更清楚地表明它仅由相同的活动使用。

如果您希望它`AsyncTask`被多个活动重用，您可以简单地创建一个独立的类并通过构造函数从活动传递参数

您可以在 AsyncTask 中创建一个接口，以将 AsyncTask 的响应发送到您的活动，如下所示，并在需要时调用您的侦听器方法。我称之为`onPostExecute()`：

```
public class DeckDownloader extends AsyncTask<Void, Void, String> {

    OnDownloadUpdateListener listener;

    public interface OnDownloadUpdateListener {
         public void OnDownloadDeckFinish(String Response);     
    }

    public DeckDownloader(Context ctx, OnDownloadUpdateListener listener) {
         mContext = ctx;
         this.listener = listener;
    }

    @Override
    protected String doInBackground(Void... params) {
         String str = "downloading";
         //your async code goes here
         return str;
    }

     @Override
     protected void onPreExecute() {
          super.onPreExecute();
     }

     @Override
     protected void onPostExecute(String result) {
          if( listener != null ) {
                listener.OnDownloadDeckProgress(result);
          }
     }
} 
```

在您的 Activity 类中，您需要实现该侦听器并编写代码以更新该实现方法中的 textview：

```
 public class myActivity extends Activity{
          private DeckDownloader.OnDownloadUpdateListener downloadListener;
          TextView txtAsyncResponse;

          @Override
          public void onCreate(Bundle savedInstanceState) {
              super.onCreate(savedInstanceState);
              txtAsyncResponse = (TextView) findViewById(R.id.txtAsyncResponse);

            downloadListener = new DeckDownloader.OnDownloadUpdateListener() {
               @Override
               public void OnDownloadDeckFinish(String Response) {
                    txtAsyncResponse.setText(Response);
               }
            };
    } 
```

并且您可以编写以下代码以在需要时在您的活动中启动 AsyncTask，例如按钮单击事件或其他

```
 DeckDownloader mTask = new DeckDownloader(this.getApplicationContext(), downloadListener);
 mTask.execute(); 
```

这可能是你想要的东西！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-14T13:00:10.223

我相信在大多数教程中，他们会选择最容易理解/阅读的内容，而不是实际上最好的。

使用内部类，您可以保持 Activity 的变量可用，这可以更简单。

一般来说，您应该尽可能地封装您的 AsyncTask，以便您可以从代码中的任何其他点重用它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T13:01:45.337

是的。您可以`AsyncTask class`在您的`MainActivity.java`.

```
public class CategoryListScreen extends Activity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        new loadcategory().execute();
    }

    class loadcategory extends AsyncTask<Void, Void, Void> {

        @Override
        protected Void doInBackground(Void... params) { }
        protected void onPostExecute(Void param) { }
    } // AsyncTask over
}//main class over 
```

# highcharts - 如何在 Highstock 中的自定义坐标处定位 RangeSelector / 缩放按钮

> ID：15409914
> 
> 赞同：5
> 
> 时间：2013-03-14T12:56:25.290
> 
> 标签：highcharts, highstock

我正在使用 highstock 图表并希望将缩放按钮（1m、2m 等）移动到不同的位置。

我检查了他们的[API](http://api.highcharts.com/highstock#rangeSelector)，目前似乎没有这样做的选项。源代码还表明该位置是硬编码的，因此我认为我不能使用一些未记录的属性轻松注入该位置

## 高库存来源

```
Highcharts.RangeSelector.prototype.render = function (min, max) {
...
rangeSelector.zoomText = renderer.text(lang.rangeSelectorZoom, plotLeft, chart.plotTop - 10)
                .css(options.labelStyle)
                .add();

// button starting position
buttonLeft = plotLeft + rangeSelector.zoomText.getBBox().width + 5;
...
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T12:56:25.290

这可以通过覆盖当前渲染方法，然后在调用实际渲染方法后将框移动到所需位置来完成

```
var orgHighchartsRangeSelectorPrototypeRender = Highcharts.RangeSelector.prototype.render;
Highcharts.RangeSelector.prototype.render = function (min, max) {
    orgHighchartsRangeSelectorPrototypeRender.apply(this, [min, max]);
    var leftPosition = this.chart.plotLeft,
        topPosition = this.chart.plotTop+5,
        space = 2;
    this.zoomText.attr({
        x: leftPosition,
        y: topPosition + 15
    });
    leftPosition += this.zoomText.getBBox().width;
    for (var i = 0; i < this.buttons.length; i++) {
        this.buttons[i].attr({
            x: leftPosition,
            y: topPosition 
        });
        leftPosition += this.buttons[i].width + space;
    }
}; 
```

在创建任何图表之前需要运行此代码

[**定位缩放按钮 | Highchart & Highstock @ jsFiddle**](http://jsfiddle.net/jugal/GX749/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T15:13:29.760

目前这是不可能的，但你可以在这里发声[http://highcharts.uservoice.com/forums/55896-general/suggestions/2436599-add-ability-to-change-rangeselector-position](http://highcharts.uservoice.com/forums/55896-general/suggestions/2436599-add-ability-to-change-rangeselector-position)

# android - 如何使用一些预定义的文本和图像打开 Facebook Write Post

> ID：15409920
> 
> 赞同：2
> 
> 时间：2013-03-14T12:56:38.207
> 
> 标签：android, facebook, sharing

如果我使用带有 ACTION_SEND 的 Intent 并键入“text/plain”并且 EXTRA_TEXT Facebook 不会预填充任何内容。这是我已经看到的。每个人都说，使用 Facebook SDK，但我不希望我的应用程序自动发布任何内容，也不想处理来自我的应用程序的登录令牌。我只希望用预定义的文本、链接和图像打开 Write Post Facebook 屏幕。就像我从 Gallery 应用程序共享图像一样。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:21:42.720

好的，不可能通过 Intent 做到这一点。显示文本、图像+链接并让用户在发布之前写一些东西的唯一解决方案是使用丑陋的提要对话框（或使用 EditText 创建自定义活动，用户可以在其中写一些东西）。

这是有效的代码：

```
public class FacebookPostActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_facebook_post);

    Session.openActiveSession(this, false, new Session.StatusCallback() {
        @Override
        public void call(Session session, SessionState state, Exception exception) {
            if(session.isOpened()){
                publishFeedDialog();
            }
        }
    });
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);
}

private void publishFeedDialog() {
    Bundle params = new Bundle();
    params.putString("name", "Facebook SDK for Android");
    params.putString("caption", "Build great social apps and get more installs.");
    params.putString("description", "The Facebook SDK for Android makes it easier and faster to develop Facebook integrated Android apps.");
    params.putString("link", "https://developers.facebook.com/android");
    params.putString("picture", "https://raw.github.com/fbsamples/ios-3.x-howtos/master/Images/iossdk_logo.png");

    WebDialog feedDialog = new WebDialog.FeedDialogBuilder(this, Session.getActiveSession(), params)
            .setOnCompleteListener(new OnCompleteListener() {
                @Override
                public void onComplete(Bundle values, FacebookException error) {
                    if(error == null){
                        final String postId = values.getString("post_id");
                        if(postId != null){
                            Toast.makeText(FacebookPostActivity.this, "Posted story, id: " + postId, Toast.LENGTH_SHORT).show();
                        }else{
                            Toast.makeText(FacebookPostActivity.this, "Publish cancelled", Toast.LENGTH_SHORT).show();
                        }
                    }else if(error instanceof FacebookOperationCanceledException){
                        // User clicked the "x" button
                        Toast.makeText(FacebookPostActivity.this, "Publish cancelled", Toast.LENGTH_SHORT).show();
                    }else{
                        // Generic, ex: network error
                        Toast.makeText(FacebookPostActivity.this, "Error posting story", Toast.LENGTH_SHORT).show();
                    }
                }
            }).build();

    feedDialog.show();
} 
```

}

# mysql - 在 from 语句中插入 select 语句

> ID：15409924
> 
> 赞同：0
> 
> 时间：2013-03-14T12:56:46.680
> 
> 标签：mysql, sql, sql-server

我正在尝试写这样的东西：

```
SELECT COUNT(*)
FROM
    SELECT TOP 3 (*)
    FROM TA
    WHERE TA.X = 'derp' 
```

基本上我想在计算之前对我的查询设置一个上限，所以我需要将它插入到 FROM 中，但我似乎无法获得正确的语法；将不胜感激任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:00:53.543

你的问题非常令人困惑。但是假设您要询问如何构造子查询，那么您需要在查询周围使用括号并为结果设置别名：

```
SELECT COUNT(*)
FROM
   (
    SELECT TOP 3 *
    FROM TA
    WHERE TA.X = 'derp'
   ) TableAlias 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:01:03.313

Sql 服务器：

```
SELECT COUNT(*)
FROM (SELECT TOP 3 *
      FROM TA
      WHERE TA.X = 'derp') as t 
```

mysql

```
SELECT count(*)
FROM (SELECT NULL 
      FROM TA
      WHERE TA.X = 'derp'
      LIMIT 3) as t 
```

# java - 时间戳/日期错误 Java

> ID：15409931
> 
> 赞同：0
> 
> 时间：2013-03-14T12:56:56.650
> 
> 标签：java, sql, database, date, timestamp

我在将时间戳插入数据库时​​遇到了一些问题（格式有问题。数据库接受`dd.MM.yyyy`）。当我将其转换`Date`为`TimeStamp`然后将其插入数据库时​​，它失败了。的格式`TimeStamp`是`yyyy-MM-dd`.

你有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:00:33.090

如果您的数据库真的坚持使用 dd.MM.yyyy 并且您没有选择使用类似的东西，`makedate(format, myDateInTheGivenFormat)`那么您必须自己在 Java 中重新格式化。

用于`SimpleDateFormat`根据数据库的需要重新格式化您的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:05:49.260

请检查 java.sql.Date，这可以帮助你

# php - sprintf 不能正常工作

> ID：15409932
> 
> 赞同：-3
> 
> 时间：2013-03-14T12:56:59.223
> 
> 标签：php, printf

我希望数字“9239”出现“9.24”。“9.2”同上显示“9.20”。“10”的同上出现“10.00”......

我用

`$carat = sprintf ('%02d.2f', $carat);`

但这并不

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T12:58:30.233

您不能仅使用`printf`格式化来做到这一点。首先将其转换为适当的数字：

```
$carat = sprintf('%.02f', $carat / 1000); 
```

演示：

```
php > printf("%.02f\n", 9239 / 1000);
9.24
php > printf("%.02f\n", 9200 / 1000);
9.20 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:02:02.013

我建议你好好看看 number_format() 函数

取自 php.net 的示例如下

```
<?php

$number = 1234.56;

// english notation (default)
$english_format_number = number_format($number);
// 1,235

// French notation
$nombre_format_francais = number_format($number, 2, ',', ' ');
// 1 234,56

$number = 1234.5678;

// english notation without thousands separator
$english_format_number = number_format($number, 2, '.', '');
// 1234.57

?> 
```

我还可以建议有一个专门针对金钱的函数，[money_format()](http://php.net/manual/en/function.money-format.php)

money_format() 函数会根据您的[setLocale](http://php.net/manual/en/function.setlocale.php)进行调整。

[php.net 上的 number_format()](http://php.net/manual/en/function.number-format.php)

# c# - EF SaveChanges 优化？

> ID：15409933
> 
> 赞同：3
> 
> 时间：2013-03-14T12:57:00.753
> 
> 标签：c#, entity-framework

为什么 DbContext`ctx`在每次`SaveChanges()`执行后处理得更快？

第一个样本：

```
var ctx = new DomainContext(); 
foreach (var item in deals)
        {
            DealsOfReutersAddition newDealAddition =
                        new DealsOfReutersAddition
                        {
                            DealsOfReutersId = item.DealsOfReutersId,
                            DealDate = DateTime.Parse(item.DateConfirmed ?? "01 01 01", new CultureInfo("en-US")),
                        };
            ctx.DealsOfReutersAdditions.Add(newDealAddition);
            ctx.SaveChanges();
        }

ctx.Dispose(); 
```

第二个样本：

```
foreach (var item in deals)
        {
            DealsOfReutersAddition newDealAddition =
                        new DealsOfReutersAddition
                        {
                            DealsOfReutersId = item.DealsOfReutersId,
                            DealDate = DateTime.Parse(item.DateConfirmed ?? "01 01 01", new CultureInfo("en-US")),
                        };
            var ctx = new DomainContext(); 
            ctx.DealsOfReutersAdditions.Add(newDealAddition);
            ctx.SaveChanges();
            ctx.Dispose();
        } 
```

在 1000 行上，第二个样本估计为 8 秒，而第一个样本为 140 秒。有什么方法可以清理 ctx 而不是重新创建？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T13:40:27.583

正如@JensKloster 在评论中所说的那样，您绝对不想`SaveChanges`在循环中每次都调用。但我实际上会抵制将其置于循环之外的诱惑。随着上下文跟踪的对象数量越来越多，会用完更多的内存，这会使保存变得越来越慢。

那么，我为您提供的解决方案是在循环中设置一个正在运行的计数器来确定您何时进行保存：

```
int numberOfRecords = 0;
using(var ctx = new DomainContext())
{
  foreach (var item in deals)
          {
              DealsOfReutersAddition newDealAddition =
                          new DealsOfReutersAddition
                          {
                              DealsOfReutersId = item.DealsOfReutersId,
                              DealDate = DateTime.Parse(item.DateConfirmed ?? "01 01 01", new CultureInfo("en-US")),
                          };

              ctx.DealsOfReutersAdditions.Add(newDealAddition);

              numberOfRecords++;
              if(numberOfRecords % 500 == 0) //Saves after every 500 rows.
              {
                ctx.SaveChanges();
              }
           }
} 
```

# android - Collision AndEngine 时形状重叠

> ID：15409934
> 
> 赞同：1
> 
> 时间：2013-03-14T12:57:02.973
> 
> 标签：android, andengine

我是新手`AndEngine`。我在屏幕上有三个矩形。我已经设置`onAreaTouched`了这些矩形。

当移动这些矩形之一时，如果它们发生碰撞，它们就会相互重叠。

```
this.mScene.registerUpdateHandler(new IUpdateHandler() {

        @Override
        public void onUpdate(float pSecondsElapsed) {

            if (rect1.collidesWith(rect2)
                    || rect1.collidesWith(rect3)) {
                // rect1 should not move further 
            }
        }

        @Override
        public void reset() {
            // TODO Auto-generated method stub

        }

    }); 
```

如果 rect1 与 rect2 碰撞，我不想重叠它们，那么 rect1 不应该进一步移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T07:05:09.613

试试下面的代码，我认为它对你有帮助。

```
this.mScene.registerUpdateHandler(new IUpdateHandler() {

    @Override
    public void onUpdate(float pSecondsElapsed) {

        if (isMoveTouch && (rect1.collidesWith(rect2)
                || rect1.collidesWith(rect3))) {
              isMoveTouch=false
            // rect1 should not move further 
        }
    }

    @Override
    public void reset() {
        // TODO Auto-generated method stub

    }

});

@Override
public boolean onSceneTouchEvent(Scene pScene, TouchEvent pSceneTouchEvent) {

    if (pSceneTouchEvent.isActionDown()) {
        return true;
    }
    if (pSceneTouchEvent.isActionMove() && isMoveTouch) {
        // rect1 movement code
        return true;
    }
    if (pSceneTouchEvent.isActionUp()) {
        isMoveTouch = true;
        return true;
    }

    return false;
} 
```

# .net - 在NHibernate中查询二级缓存

> ID：15409935
> 
> 赞同：0
> 
> 时间：2013-03-14T12:57:04.497
> 
> 标签：.net, nhibernate

# 设置

## 映射

我有一个 MyItem 类，它有一个由 MyDetail 项组成的延迟加载集合：

```
[Serializable]
class MyItem : IComparable, ICloneable
{
  public virtual int ID { get; set; }
}

[Serializable]
class MyDetail : ICloneable
{
  public virtual int ID { get; set; }
  public virtual MyItem EnclosingItem { get; set; }
}

void MyItemMap(IClassMapper<MyItem> ca)
{
  ca.Lazy(false);
  ca.Cache(cm => { cm.Usage(CacheUsage.NonstrictReadWrite); cm.Region(cacheRegion); });
  ca.Id(x => x.ID, cm => { cm.Generator(Generators.Native); });
  ca.Discriminator(cm => { cm.Column("Type"); cm.Type(NHibernateUtil.String); });
  ca.Bag(x => x.Details, cm =>
  {
    cm.Key(k => k.Column("ItemID"));
    cm.Inverse(true);
    cm.Type<DetailFactory>();
    cm.Cascade(Cascade.All | Cascade.DeleteOrphans);
    cm.Fetch(CollectionFetchMode.Select);
    cm.Lazy(CollectionLazy.Lazy);
    cm.Cache(m => { m.Usage(CacheUsage.NonstrictReadWrite); });
  } cr => cr.OneToMany());
}

void MyDetailMap(IClassMapper<MyDetail> ca)
{
  ca.Lazy(true);
  ca.Cache(cm => { cm.Usage(CacheUsage.NonstrictReadWrite); cm.Region(cacheRegion); });
  ca.Id(x => x.ID, cm => { cm.Generator(Generators.Native); });
  ca.ManyToOne(x => x.EnclosingItem, cm => { cm.Column("ItemID"); cm.NotNullable(true); cm.Fetch(FetchKind.Select); cm.Lazy(LazyRelation.Proxy); });
} 
```

## 该系列

加载关联的 MyDetail 项的类是 PersistentGenericBag：

```
class DetailList : PersistentGenericBag<MyDetail>
{
} 
```

## 采集工厂

这是通过自定义集合工厂发生的：

```
class DetailFactory : IUserCollectionType
{
  public IPersistentCollection Instantiate(ISessionImplementor session, ICollectionPersister persister)
  {
    return new DetailList(session);
  }

  public IPersistentCollection Wrap(ISessionImplementor session, object collection)
  {
    return new DetailList(session, (IList<MyDetail>)collection);
  }
} 
```

# 问题

假设我已经加载了一个 MyItem 并且我至少请求了一次详细信息，所以我的二级缓存 (SLC) 包含所有这些内容。还假设我只积极使用 1 个细节，而实际上有 100 个细节连接到 MyItem。这意味着，每当我从 SLC 访问 MyItem 并访问我感兴趣的一个细节时，整个集合都会实现：

```
// Get item coming from SLC
MyItem myItem = nhSession.Get(id);

// Access detail, materializing all MyDetails from SLC
MyDetail myDetail = myItem.Details["Interesting"];

// Normally, this last line will invoke the default NH proxy
// which then materializes the Details collections, fetching
// all details belonging to myItem from the database, or from
// the SLC for that matter.
//
// To cater for my scenario, I've got access to an interceptor
// to do my own processing (the details to how this is hooked
// up are not very relevant). This interceptor should somehow
// be able to, instead of initializing the collection, return
// the result from the SLC rightaway. This would prevent
// the materialization of possibly large collections. 
```

# 解决优化问题

现在我想通过绕过集合加载来优化这个场景，并直接查询 SLC 以了解该细节的存在。请注意，我的问题不是从代码中截取实际的详细信息调用，而是干预以何种方式返回的内容。

我正在使用 SysCache，所以理论上我可以读出 ASP.NET 缓存，但由于缓存键是 NH 的实现细节，我不确定这是一个好主意。

有人给我指点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T08:43:41.583

我已经完成了这项工作，但最终结果是我的应用程序现在甚至需要更长的时间。由于这对我来说还没有意义，我仍在调查，但无论如何我都会发布代码。

首先，我连接了一个听众。每次保存 MyDetail 时，它都会插入一个额外的映射。这意味着，除了在 SLC 中有 MyDetail 的 ID 之外，我还可以通过 EnclosureItem.ID 和 MyDetail.Name 来查找它们。

```
class PostLoadListener : IPostLoadEventListener
{
  public void OnPostLoad(PostLoadEvent @event)
  {
    // Only act when MyDetail is loaded
    var detail = @event.Entity as MyDetail;
    if (detail == null) return;

    ISessionImplementor session = @event.Session;
    var persister = @event.Persister;

    // Still tak into account caching settings (copied over these checks from NH)
    if (persister.HasCache == false || ((session.CacheMode & CacheMode.Put) != CacheMode.Put)) return;

    // Create the mapping by combining the collection ID and the detail
    // name, which together are being mapped to the actual detail ID
    var id = detail.EnclosingItem.ID + "#" + detail.Name;
    var cacheKey = new CacheKey(id, NHibernateUtil.String, PersistentContentDetailsList.IdMapRole, session.EntityMode, session.Factory);

    // Cache the mapping [detail.EnclosingItem.ID#detail.Name] => [detail.ID]
    persister.Cache.Put(cacheKey, detail.ID, session.Timestamp, null, null, true);
  }
} 
```

然后，我确保我的 DetailList 在适用时进行上述查找：

```
class DetailList : PersistentGenericBag<MyDetail>
{
  public MyDetail this[string name]
  {
    get { MyDetail detail; TryGetValue(name, out detail); return detail; }
    set { /* */  }
  }

  private IList<ContentDetail> List { get { return this; }
  }

  /*
  * If the collection was already initialized, it doesn't make sense
  * to reach for the SLC, so skip it in that case. If it wasn't,
  * then try to fetch from the SLC. If the detail wasn't found there,
  * initialize the collection by triggering the enumerator and
  * subsequently find the detail by name.
  */
  public bool TryGetValue(string name, out MyDetail value)
  {
    return
      (value = WasInitialized
                 ? List.FirstOrDefault(i => i.Name == name)
                 : (GetCachedDetail(name) ?? List.FirstOrDefault(i => i.Name == name))
      ) != null;
  }

  /*
  * GetCachedDetail uses the collection identifier, combines it with
  * the detail name, and tries to find that mapping in the SLC.
  * If it exists, the ID is returned. So basically, you get to know
  * which MyDetail to fetch from the SLC when you know its EnclosingItem
  * and its name.
  */
  private ContentDetail GetCachedDetail(string name)
  {
    var mapId = Key + "#" + name;
    var persister = Session.Factory.GetEntityPersister(typeof(ContentDetail).FullName);
    var key = new CacheKey(mapId, NHibernateUtil.String, IdMapRole, Session.EntityMode, Session.Factory);
    var cacheEntry = persister.Cache.Get(key, Session.Timestamp);

    // This last step might be optimized by only executing the relevant 
    // loading statements of the Session.Load invocation chain
    return cacheEntry != null ? ((ISession)Session).Load<MyDetail>((int)cacheEntry) : null;
  }
} 
```

# php - 用哪个经纱包来包裹字符串

> ID：15409938
> 
> 赞同：-1
> 
> 时间：2013-03-14T12:57:10.720
> 
> 标签：php, string

我是 php 新手，我知道我可以用单引号`(')`或双引号包裹字符串`(")`。有什么不同，最好的使用方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:58:13.930

将字符串用单引号`(')`而不是双引号括起来`(")`更快，因为 PHP 在 "..." 中而不是在 '...' 中搜索变量，当您不使用需要在字符串中评估的变量时使用它。

# telerik - KendoUI 集成到 Durandal JS

> ID：15409941
> 
> 赞同：4
> 
> 时间：2013-03-14T12:57:15.650
> 
> 标签：telerik, kendo-ui, cordova, durandal

我正在构建一个 phonegap 应用程序并计划使用 Telerik 的 Kendo UI 框架来生成 UI。Telerik Kendo UI 已经有一个 MVVM 实现，我想使用它而不包括 Knockout JS。这是支持的东西，还是 Durandal JS 与 Knockout 深度集成？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T14:00:53.473

Roger Gullhaug 写了一篇博文，详细介绍了如何将 Durandal 与 Kendo UI 的数据绑定一起使用：[Using Durandal and KendoUI together](http://rgullhaug.wordpress.com/2013/03/06/using-durandal-and-kendoui-together/)

此外，Durandal 官方文档也提到了剑道：[KendoUI](http://durandaljs.com/documentation/KendoUI/)

# regex - 如何在shell中拆分字符串

> ID：15409947
> 
> 赞同：4
> 
> 时间：2013-03-14T12:57:47.290
> 
> 标签：regex, string, bash, shell

我有一个变量

```
string="ABC400p2q4". 
```

我怎样才能分开`ABC400`和`p2q4`。我需要将它分成两个变量，结果我得到

```
echo $var1
ABC400
echo $var2
p2q4 
```

可以用任何字母字符代替 ABC；可以用任何其他数字代替 400；但是`p`and`q`是固定的并且可以代替 2 和 4 也可以有任何数字。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-14T13:09:07.477

无需基于正则表达式模式进行拆分，因为它们是固定长度的子字符串。纯粹`bash`你会这样做：

```
$ string="ABC400p2q4"

$ var1=${string:0:6}

$ var2=${string:6}

$ echo $var1
ABC400

$ echo $var2
p2q4 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T13:26:17.097

使用[bash](/questions/tagged/bash "显示标记为“bash”的问题")和特殊`BASH_REMATCH`数组（非固定长度）：

```
$ string='ABC400p2q4'
$ [[ $string =~ ^([a-zA-Z]+[0-9]+)(.*) ]]
$ echo ${BASH_REMATCH[1]}
ABC400
$ echo ${BASH_REMATCH[2]}
p2q4 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-14T13:00:30.813

## 尝试这样做

使用[bash](/questions/tagged/bash "显示标记为“bash”的问题")和[*进程替换*](http://mywiki.wooledge.org/ProcessSubstitution)（非固定长度）：

```
read var1 var2 < <(sed -r 's/^[a-zA-Z]+[0-9]+/& /' <<< 'ABC400p2q4') 
```

或者这个使用*here-string*

```
read var1 var2 <<< $(sed -r 's/^[a-zA-Z]+[0-9]+/& /' <<< 'ABC400p2q4') 
```

[或肯特](https://stackoverflow.com/users/164835/kent)的简短`sed substitution`版本

```
's/([0-9])p/\1 p/' 
```

## 笔记

`&`在`sed`命令中代表*替换的匹配左侧部分* `s///`

## 输出

```
$ echo $var1
ABC400
$ echo $var2
p2q4 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T13:28:02.230

如果您的字符串保持单一长度，则 sudo_O 提供的答案是完美的。但是，如果不是这种情况，bash 确实为您提供了与[builtins 匹配的字符串正则表达式](http://tldp.org/LDP/abs/html/refcards.html#AEN22664)。

```
$ string="ABC400p2q4"

$ var1=$( expr match "$string" '\(.{6}\)' )

$ var2=$( expr match "$string" '.*\(.{4}\)' ) 
```

用您实际需要的任何内容替换正则表达式。

# sql-server-2005 - 使用 OnError 处理程序中的“发送邮件任务”发送日志文件失败

> ID：15409948
> 
> 赞同：2
> 
> 时间：2013-03-14T12:57:47.450
> 
> 标签：sql-server-2005, ssis

我有一个配置为创建日志文件的包。发生错误时，我希望包的 OnError 事件处理程序发送一封电子邮件，其中包含日志文件作为附件。这失败并显示以下消息：

> 文件“C:\Log\blablabla.txt”不存在，或者您没有访问该文件的权限。

该文件确实存在，所以问题一定是我没有访问它的权限。包能够创建文件，这是否意味着由于包仍在执行（因此写入文件）而无法访问该文件？

**配置：** SQL-Server 2005。属性 DelayValidation == True。

**编辑：**我偶然发现了这个问题的解决方案。将任务本身的 DelayValidation 设置为 True 是不够的。您还必须为包含该任务的事件处理程序（在本例中为 OnError）设置它。对包成功时执行的发送邮件任务执行相同的操作（因此在控制流中）仍然会产生相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:28:47.550

要通过发送电子邮件任务发送附件，您应该具有系统管理员权限。

# android - 7 英寸平板电脑的布局文件夹名称

> ID：15409950
> 
> 赞同：5
> 
> 时间：2013-03-14T12:57:51.740
> 
> 标签：android, android-layout, android-resources

我有两个布局文件夹，`layout-sw600dp`用于 7" Tablet (1024X600) mdpi 和另一个名称`layout-xlarge`为 12" Tablet (1280X800) mdpi。问题是，当我在 7" 模拟器中运行我的项目时，它会从`layout-xlarge`文件夹而不是`layout-sw600dp`.为我提供解决此问题的有效解决方案。在此先感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-14T20:52:16.143

这里要记住的是，使用`swXXXdp`资源标识符仅适用于运行 Android 3.2+ 的设备（即添加时）。旧设备将无法识别，因此不会使用这些标识符，因此如果您打算支持运行 Android < 3.2 的平板电脑，则必须使用旧标识符 ( `small`, `normal`, `large`, )。`xlarge`截至目前，只有 0.3% 的平板电脑运行 Android 3.1 (API 12)，因此不完全支持它们是一个安全的调用 - [http://developer.android.com/about/dashboards/index.html](http://developer.android.com/about/dashboards/index.html)。

有一篇很棒的博客解释了如何使用这些较新的资源标识符。 [http://android-developers.blogspot.com/2011/07/new-tools-for-managing-screen-sizes.html](http://android-developers.blogspot.com/2011/07/new-tools-for-managing-screen-sizes.html)

对于您的特定问题，假设您的平板电脑布局仅支持 Android 3.2+，请将`layout-xlarge`文件夹更改`layout-sw720dp`为支持 10"+ 平板电脑，并且您`layout-sw600dp`将支持 7" 平板电脑布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:42:42.663

布局文件夹的选项非常多。您不仅可以指定诸如`layout-land/`or之类的内容`layout-large`，还可以指定它们的混合，例如`layout-large-land/`or `layout-xhdpi-land/`。[您可以在 Android Developers](http://developer.android.com/guide/practices/screens_support.html#qualifiers "Android 开发者 - 支持多种屏幕尺寸")中查看所有限定词。

对于您的问题，请检查您的平板电脑模拟器的尺寸是否具有正确的屏幕分辨率。您可以在创建 AVD 时指定特定的屏幕分辨率。此外，当指定 时`layout-sw600dp/`，它会检查您当前正在运行的活动的实际可用宽度的宽度。例如，在运行 4.2 的平板电脑上，屏幕底部约 50dp 用于系统栏，如果不是全屏模式，部分用于顶部操作栏。这些会将实际 dp 降低到 600 以下。

# c# - MVC 修改对象内的列表

> ID：15409953
> 
> 赞同：0
> 
> 时间：2013-03-14T12:58:00.123
> 
> 标签：c#, .net, asp.net-mvc, web

我有一个基本的创建/编辑/删除/索引格式，由 MVC 和我的班级（ClassA）创建。该类包含一个对象列表（ClassB）。

当我调用视图来编辑对象时，我可以编辑 ClassA 的所有成员（文本字段等），但是如何编辑对象列表然后仍然让它们返回到 post 操作？

当我尝试创建和迭代对象并将它们添加到表单时，它不会与对象（ClassA）一起返回，并且对象列表为空。

请帮忙。这样做的最佳做法是什么？

下面是一个例子

```
 public ActionResult Edit(int id)
    {
        ClassA objA = db.ClassAs.Single(a => a.id == id);

        objA.myListOfBs.Add(new ClassB());

        return View(objA);
    }

     [HttpPost]
    public ActionResult Create(ObjectA obj)
    {
        obj.myListOfBs <--- this is empty! :(
        if (ModelState.IsValid)
        {
        }

        return View(obj);
      } 
```

模型类是：

```
class ClassA {
        int id;
    List<ClassB> myListOfBs;
 }

 class ClassB {
    int id;
    string name;
 } 
```

这是我的看法

```
@model MyProject.Models.ClassA

@{
    ViewBag.Title = "ClassA Object";
}
@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Objects</legend>

        @Html.EditorFor(model => model.myListOfBs)

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T16:52:56.350

找出为什么会这样。这是我的一个错误，但我没有意识到会导致它。

我的主要对象中的对象已声明

```
class ClassA {
 public ClassB country;
} 
```

代替

```
class ClassA {
 public ClassB country {get; set;}
} 
```

所以它似乎必须是正确绑定对象的属性。

**主要问题在这里解决**

我还想补充一点，尽管添加 set/get 标记允许将对象传递到帖子，但它仍然不适用于对象内的列表。

我终于在这里找到了如何做到这一点（[ASP.NET MVC 3 Binding to a Collection inside an Object](https://stackoverflow.com/questions/9231992/asp-net-mvc-3-binding-to-a-collection-inside-an-object)），基本上你需要映射到模型中的特定项目

例子：

```
 @for (int i = 0; i < Model.myListOfBs.Count; i++)
 {
     <div>
        @Html.LabelFor(m => Model.myListOfBs[i].name )
    </div>
    <div>
        @Html.TextBoxFor(m => Model.myListOfBs[i].name )
    </div>
 } 
```

显式映射到数组位置就可以了。由于您无法使用 foreach 显式映射到列表中的某个项目，因此它失败了。

此外，如果您像我一样使用实体框架，您很可能必须使用 ViewModel 来访问数组元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:02:24.130

我以前见过这个。执行此操作的最简单方法（使用此示例结构）是：

视图模型：

```
public string CompanyName { get; set; }
public List<ViewModelOfObjects> SubObjects { get; set; } 
```

如您所见，您的子对象应该有自己的 ViewModel，然后您可以在 View 中执行此操作。

```
@model YourMainViewModel

@Html.EditorFor(model => model.CompanyName)

// MVC is clever enough to work this out and list all the sub-Views, even if they are hidden fields and not editable.
@Html.EditorFor(model => model.SubObjects) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:09:43.627

我过去这样做的方法是使用模型绑定器可以识别的命名约定来绑定集合。

例如，在您的情况下，您的视图中可能有以下内容：

```
@model ClassA
int index = 0;
@foreach (var classB in Model.myListOfBs)
{
    //Notice the use of "obj", this matches the name of your model parameter in your post action
    @Html.Hidden("obj.myListOfBs.Index", index)
    @Html.TextBox("obj.myListOfBs[" + index + "].name", classB.name)
    index++;
} 
```

将此表单发布到您的操作时，模型绑定器将使用上面详述的索引命名约定将每个字段绑定到模型中的 myListOfBs 集合。

或者，正如@thedixon 所指出的，MVC 框架可以自动创建字段名称（**我不确定这在所有版本的 ASP.NET MVC 中是否可行**）：

```
@Html.EditorFor(model => model.myListOfBs) 
```

# xslt - XSLT 分组后的记录数

> ID：15409965
> 
> 赞同：0
> 
> 时间：2013-03-14T12:58:42.733
> 
> 标签：xslt, count, grouping

我有一组项目，我使用 muenchian 方法使用键对它们进行分组。这很好用，我的问题是，如何在分组后获取记录数并使用消息头中的数字？

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="groups" match="RECORD" use="VALUE"/>
   <xsl:template match="Test">
   <Header>
      <NoOfRecords>
         <HOW TO GET THE NO OF RECORDS= HERE?/>
      </NoOfRecords>
    </Header>
    <Message>
       <xsl:for-each select="RECORD[generate-id(.)=generate-id(key('groups',VALUE))]">
          <Value>
             <xsl:value-of select="VALUE/text()" />
          </Value>
       </xsl:for-each>
    </Message>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:03:54.987

这应该这样做：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:key name="groups" match="RECORD" use="VALUE"/>
  <xsl:template match="Test">
    <xsl:variable name="distinctItems"
                  select="RECORD[generate-id()=generate-id(key('groups',VALUE)[1])]" />
    <Header>
      <NoOfRecords>
        <xsl:value-of select="count($distinctItems)"/>
      </NoOfRecords>
    </Header>
    <Message>
      <xsl:for-each select="$distinctItems">
        <Value>
          <xsl:value-of select="VALUE/text()" />
        </Value>
      </xsl:for-each>
    </Message>
  </xsl:template>
</xsl:stylesheet> 
```

虽然我当然会建议将其分成两个模板：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>
  <xsl:key name="groups" match="RECORD" use="VALUE"/>
  <xsl:template match="Test">
    <xsl:variable name="distinctItems"
                  select="RECORD[generate-id()=generate-id(key('groups',VALUE)[1])]" />
    <Header>
      <NoOfRecords>
        <xsl:value-of select="count($distinctItems)"/>
      </NoOfRecords>
    </Header>
    <Message>
      <xsl:apply-templates select="$distinctItems" />
    </Message>
  </xsl:template>

  <xsl:template match="RECORD">
    <Value>
      <xsl:value-of select="VALUE/text()" />
    </Value>
  </xsl:template>
</xsl:stylesheet> 
```

# google-maps-api-3 - Google Maps Directions Service - 需要 3 个不同的距离

> ID：15409968
> 
> 赞同：0
> 
> 时间：2013-03-14T12:58:50.237
> 
> 标签：google-maps-api-3

我正在使用谷歌地图方向服务如下：

```
directionsDisplay = new google.maps.DirectionsRenderer();

var directionsService = new google.maps.DirectionsService();

var start = arrObjLatLngs[0];
var end = arrObjLatLngs[arrObjLatLngs.length - 1];

arrObjWaypoints = [];

// Get waypoints
if (arrObjLatLngs.length > 2) {

    for (var i = 0; i < arrObjLatLngs.length; i++) {

        arrObjWaypoints.push({
            location:arrObjLatLngs[i],
            stopover:true}
        );  

    }

}

var request = {
    origin:start,
    destination:end,
    travelMode: google.maps.DirectionsTravelMode.DRIVING,
    unitSystem: google.maps.DirectionsUnitSystem.METRIC,
    provideRouteAlternatives: false,
    waypoints: arrObjWaypoints
};

directionsService.route(request, function(response, status) {

    if (status == google.maps.DirectionsStatus.OK) {

        if (boolShowMap) {

            directionsDisplay.setMap(MapObject);
            $('#cp-div-map').dialog('open');
            google.maps.event.trigger(MapObject, 'resize');
            directionsDisplay.setDirections(response);

        } else {

            var total_distance = 0;

            // Add up distance of all available legs
            for (var i = 0; i < response.routes[0].legs.length; i++) {

                total_distance += parseInt(response.routes[0].legs[i].distance.value);

            }

            callBack(total_distance);

        }

    }

}); 
```

`start`基本上，第一位可以得到和之间的距离`end`......但是，我还需要一个单独的值来计算和之间的距离`base`和`start`第三个距离之间`base`的距离`end`。

我试过这个： -

```
var directionsServicePickup = new google.maps.DirectionsService();

var base = "52.781048888889, -1.2110222222222546";

var request2 = {
    origin:base,
    destination:start,
    travelMode: google.maps.DirectionsTravelMode.DRIVING,
    unitSystem: google.maps.DirectionsUnitSystem.METRIC,
    provideRouteAlternatives: false,
    waypoints: arrObjWaypoints
};

directionsServicePickup.route(request2, function(response, status) {

    if (status == google.maps.DirectionsStatus.OK) {

            var total_pickup_distance = 0;

            // Add up distance of all available legs
            for (var i = 0; i < response.routes[0].legs.length; i++) {

                total_pickup_distance += parseInt(response.routes[0].legs[i].distance.value);

            }

            var km = parseInt(total_pickup_distance) / 1000;

            // Convert KM into Miles
            var pickup_distance = parseInt((km / 8) * 5);

            alert('Pickup='+pickup_distance);

            var runin_pickup = 1200;

            // Send to our checkRuninTariff function
            checkRuninTariff(runin_pickup);

        }

}); 
```

但这似乎覆盖了我发送的第一个请求。我对这个 API 不太熟悉，所以对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:38:10.327

如果您需要地点之间的距离（但不是方向），请使用[DistanceMatrix](https://developers.google.com/maps/documentation/javascript/distancematrix)

它将在一次呼叫中计算多个位置之间的行驶距离。

[文档中的示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/distance-matrix)

# uml - 按摩椅的UML图

> ID：15409972
> 
> 赞同：-2
> 
> 时间：2013-03-14T12:59:07.897
> 
> 标签：uml

我需要为按摩椅系统绘制几个不同的 UML 图。有一个遥控器可以控制椅子的功能，椅子带有一些按摩马达，一切都与投币系统连接，但投币系统是可选的。我不知道从哪里开始，如果只关注椅子和那里发生的事情。或者例如遥控器向椅子发送命令以进行背部按摩。你能从你的角度给我一些例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:01:29.800

查看[DatabaseAnswers](http://www.databaseanswers.org/data_models/)以获取数据模型的一些示例......您应该能够通过根据您的需要修改它们来创建一个体面的 UML 图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T13:10:13.730

如果您提到您感兴趣的 UML 图（例如用例、类等），这将非常有帮助。每个人都有自己的要求。

首先，我认为您需要指定项目中的实体（例如用户、操作员、系统）以及它们的功能角色和操作是什么。

好的，我想用户可能的用例图是......

演员_客户：

*   支付
*   选择身体的一部分 --extend--> head / back / etc
*   选择速度/强度

也许开始（包括选择）/停止/暂停

# .net - 从框架内更新主页上元素的属性

> ID：15409973
> 
> 赞同：0
> 
> 时间：2013-03-14T12:59:09.367
> 
> 标签：.net, silverlight, xaml, binding, silverlight-4.0

所以我有这个包含**HyperLinkBut​​ton的 Main Page（一个****UserControl** ） ，它使**Frame**导航到某个**Page**（使用按钮的**NavigateUri**属性）。每当在页面上触发某个事件（例如，**单击**事件）时，我想从显示在框架中的页面的代码隐藏中更新此按钮的**内容属性。**

 ******因此，必须可以从包含它的 UserControl 范围之外访问此 Content 属性......而且我似乎无法使 HyperLinkBut​​ton 或其 Content 属性成为静态！

我尝试在 Content 属性上使用 { **Binding** } 将其绑定到我的 UserControl 中的一些简单的静态字符串，但到目前为止，这让我无处可去......编译时我得到“非静态”错误，或者 XAML 说我字符串不存在...有没有人知道我在那里缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:28:48.683

您可以使用 App.Current.RootVisual 获取对 silveright 导航项目的 MainPage 的引用（我假设您的项目就是这样）。从该参考资料中，您可以访问 Button 而无需求助于静态成员等。您可能需要在 XAML 中命名 HyperLinkBut​​ton，以便能够从您对 MainPage 的引用中引用它。******

# specifications - 基于已有需求的需求

> ID：15409974
> 
> 赞同：-1
> 
> 时间：2013-03-14T12:59:09.863
> 
> 标签：specifications, requirements

让我们假设有一个功能齐全的工作系统，并且该系统现在将针对另一个国家进行调整。有些功能保持原样，有些会调整，有些会从头开始定义。

在这种情况下，您会以哪种形式编写需求？新规范是否应该提及已经存在的功能？每个功能都应该被描述为新的吗？如果有一个大的用例需要对新的国家进行小改动，它应该描述完整还是只是差异？如此小的变化的上下文是什么，以便开发人员了解它的含义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T13:06:02.727

> 在这种情况下，您会以哪种形式编写需求？

和以前一样，如果你满意的话。

> 新规范是否应该提及已经存在的功能？

它真的应该。这将帮助开发人员并降低开发冗余逻辑的风险。

> 每个功能都应该被描述为新的吗？

在大多数情况下，创建如此多的重复内容是违反经济原因的。它不会给您带来任何附加值，但会花费大量宝贵的时间和金钱。重用需求有助于做得更好。

此外，如果您在现有需求之上指定，您将非常了解可以从现有需求中使用的内容、配置内容的位置以及添加新内容的位置（请参阅第二句）。

是的，您的要求将基于您已经指定的内容。

此规则的例外情况可能是 (a) 将新需求指定为差异比从头开始更费力。然后你可能会问新东西是否真的基于现有的。

或者，(b) 回想起来，您可能会发现已经记录在案的需求质量很差。然后它可以帮助给它一种新的方法。

> 如果有一个大的用例需要对新的国家进行小改动，它应该描述完整还是只是差异？

如果你有空间，你可以把它放在现有的图表中。或者您可以创建子图并链接到它们以获取详细信息。目标应该是保持图表简洁易懂。泛化和`extend`/`include`是你的朋友。

# sql - 获得计数

> ID：15409977
> 
> 赞同：0
> 
> 时间：2013-03-14T12:59:13.847
> 
> 标签：sql, sql-server

我是 SQL 新手，并且已经在这段代码上停留了几天。

```
select distinct Count( AGVGLST.AGVGLST_PIDM ) "Count_AGVGLST_PIDM",
       Count( (select distinct pidm
       from donor
       where donor.pidm = agvglst_pidm
       and donor.cfae_cat IN ('ALMB','ALMX')) ) "Cfae"
  from AGVGLST
 where AGVGLST.AGVGLST_DESG ='1125'
       and AGVGLST.AGVGLST_FISC_CODE ='2010'
       and not exists(select 'x'
       from agvglst b
       where b.agvglst_pidm = agvglst_pidm
       and b.agvglst_desg <> '1125'
       and b.agvglst_fisc_code = '2010') 
```

我正在尝试仅获取此目标“1125”的计数，因此我需要引用它两次，并且由于某种原因，当我知道有捐赠者仅向该特定目标捐赠时，我的计数为零。我确信这是我想念的愚蠢的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T13:10:40.117

```
 not exists(select 'x'
   from agvglst b
   where b.agvglst_pidm = agvglst_pidm
   and b.agvglst_desg <> '1125'
   and b.agvglst_fisc_code = '2010') 
```

可能是这在这里造成了问题。可以有指定不是“1125”但agvglst_fisc_code 是“2010”的捐助者。因此，由于存在记录，您的不存在限制了“1125”的计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:11:01.730

当本应简单的事情开始变得过于复杂时；是时候备份并重新开始了：

```
select 
  AGVGLST_DESG,
  coun(*) as "Count_AGVGLST_PIDM"
from AGVGLST
where AGVGLST_DESG = '1125'
group by 
  AGVGLST_DESG 
```

任何其他过滤器字段都将添加到选择列表和分组列表中，然后添加到 where 子句中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:34:24.763

如果你运行这个查询呢？

```
SELECT 
    COUNT(a.AGVGLST_PIDM) "Count_AGVGLST_PIDM",
FROM AGVGLST a
WHERE 
    a.AGVGLST_DESG      = '1125'
AND a.AGVGLST_FISC_CODE = '2010'
AND NOT EXISTS(
            SELECT 'x'
            FROM 
                agvglst b
            WHERE b.agvglst_pidm = a.agvglst_pidm
            AND b.agvglst_desg <> '1125'
            AND b.agvglst_fisc_code = '2010'
        ) 
```

# python - django 在 syncdb 时不加载初始固定装置

> ID：15409978
> 
> 赞同：2
> 
> 时间：2013-03-14T12:59:16.553
> 
> 标签：python, django, django-fixtures

我有一个具有以下结构的 django 项目：

```
/djninja # project dir
  /djninja # main app dir
  /bands # app dir
  /fans # app dir
  /lyrics # app dir 
```

我创建了一个`initial_data.yaml`文件来制作`syncdb`负载装置（我更喜欢 YAML 格式）。根据[文档](https://docs.djangoproject.com/en/1.5/howto/initial-data/)，我将把它放在任何 app`fixtures`子目录中。所以我做到了，我有：

```
/djninja
  /djninja
  /bands
    /fixtures
      - initial_data.yaml
  /fans
  /lyrics 
```

但是 syncdb 忽略了该文件。然后我把它移到主项目目录中：

```
/djninja
  /djninja
    /fixtures
      - initial_data.yaml
  /bands
  /fans
  /lyrics 
```

它仍然被省略。我想在`syncdb`命令中加载固定装置我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-25T15:21:16.160

显然 Django`INSTALLED_APPS`会`models.py`在其中指定的应用程序中查找固定装置。

因此，如果您的应用程序缺少一个，请创建一个空的`models.py`，Django 不会跳过在该应用程序中查找固定装置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:03:31.710

`initial_data.yaml`只要满足以下条件，就应该捡起：

*   你已经安装了 pyyaml
*   它位于(in )`fixtures`中列出的应用程序之一的目录中`INSTALLED_APPS``settings.py`

因此，鉴于您有 pyyaml，它可能是后者。请确保您的`fixtures`目录位于其中列出的应用程序之一中，`INSTALLED_APPS`并且您应该已启动并运行。

在这种布局的情况下：

```
/djninja
  /djninja
  /bands
    /fixtures
      - initial_data.yaml
  /fans
  /lyrics 
```

添加`bands`to`INSTALLED_APPS`应该可以解决问题，因为`bands`它是一个有效的包并且是 on `PYTHONPATH`。

如果您希望 Django 在其他目录中查找夹具，您可以按照文档的[“Django 在哪里找到夹具文件”小节中](https://docs.djangoproject.com/en/dev/howto/initial-data/#where-django-finds-fixture-files)给出的建议并使用该`FIXTURE_DIRS`设置，使其成为要查看的额外目录的列表。

# cordova - phonegap 单点登录

> ID：15409979
> 
> 赞同：4
> 
> 时间：2013-03-14T12:59:17.753
> 
> 标签：cordova, jquery-mobile, single-sign-on

我正在构建一个 PhoneGap 应用程序，其中一个要求是支持 SSO（单点登录）。

我有一个支持不同类型身份验证的 Web 应用程序。现在我正在为同一个 Web 应用程序构建一个移动应用程序（使用 PhoneGap），并希望使用相同的身份验证方法从移动设备登录，我用于从 Web 应用程序登录

基本上，PhoneGap 移动应用程序应该使用与用户从桌面登录 Web 应用程序相同的身份验证方法（例如客户门户/SAML/NT Auth 等）

The main problem I'm facing is, if the web application is configured to use Customer Portal for authentication, then the user should be redirected to the portal and after authentication he should be redirected back to the mobile (PhoneGap) application and should get a authentication token which can be used by the mobile app for further requests.

I was trying to use the InAppBrowser/ChildBrowser plugin to open the external URL (customer portal) and post data (authentication token) from InAppBrowser to the PhoneGap mobile app but I'm not sure if this is the correct approach or even if it is feasible.

Please can somebody help me in if the above approach is feasible or is there any other approach I have to take.

Thanks in advance

# android - Piso S1 adb 有效，但 fastboot 无效。Linux

> ID：15409982
> 
> 赞同：1
> 
> 时间：2013-03-14T12:59:25.653
> 
> 标签：android, adb, udev, ubuntu-12.10, fastboot

开发者模式下设备的 lsusb（ADB 连接正常）。

```
Bus 002 Device 008: ID 2207:0010  
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.00
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64 
  idVendor           0x2207 
  idProduct          0x0010 
  bcdDevice            2.22
  iManufacturer           2 samsung
  iProduct                3 SGH-I777
  iSerial                 4 YNNFP969J2
  bNumConfigurations      1
  Configuration Descriptor: 
```

lsusb -v 设备处于引导加载程序模式。

```
Bus 002 Device 009: ID 2207:300a  
Couldn't open device, some information will be missing
Device Descriptor:
  bLength                18
  bDescriptorType         1
  bcdUSB               2.01
  bDeviceClass            0 (Defined at Interface level)
  bDeviceSubClass         0 
  bDeviceProtocol         0 
  bMaxPacketSize0        64
  idVendor           0x2207 
  idProduct          0x300a 
  bcdDevice            1.00
  iManufacturer           0 
  iProduct                0 
  iSerial                 0 
  bNumConfigurations      1
  Configuration Descriptor: 
```

/etc/udev/rules.d/51-android.rules

```
SUBSYSTEM=="usb", ATTR{idVendor}=="2207", ATTR{idProduct}=="300a" , MODE="0600"
SUBSYSTEM=="usb", ATTR{idVendor}=="2207", ATTR{idProduct}=="0010" , MODE="0600" 
```

快速启动设备是空的......顺便说一下我使用的是Xubuntu 12.10。我会感谢你的帮助。塞巴斯蒂安。

# servicestack - Servicestack json客户端发布方法未正确反序列化

> ID：15409983
> 
> 赞同：1
> 
> 时间：2013-03-14T12:59:25.980
> 
> 标签：servicestack

当我使用 POST 时，ServiceStack Json 客户端没有反序列化我的结果时遇到问题。get 方法将响应反序列化为 UserCredentials 对象没有问题，但是当我使用 POST 方法时，它返回一个具有所有 null 属性的对象。如果我将传递给 Post 方法的类型更改为字典，我可以看到它得到了正确的结果，并且我可以看到来自 Fiddler 的其余调用在 http 级别成功。

```
 public UserCredentials Login(string uname, string pwd)
    {
        var url = "/login";
        //note that I have to send a dictionary because if I sent a Login Object with username and password it erronously sends {Login:} in the raw request body instead of {"Uname":uname, "Password":password}

        var login = new Dictionary<string, string>() { { "Uname", uname }, { "Password", pwd } };
        var result = client.Post<UserCredentials>(url, login);

        return result;

    } 
```

这是响应（这是来自服务器的正确和预期的 http 响应）

```
HTTP/1.1 200 OK
Server: nginx
Date: Thu, 14 Mar 2013 12:55:33 GMT
Content-Type: application/json; charset=utf-8
Connection: keep-alive
Vary: Accept-Encoding
Cache-Control: no-cache
Pragma: no-cache
Expires: -1
Content-Length: 49

{"Uid":1,"Hash":"SomeHash"} 
```

这是 UserCredentials 类

```
 public class UserCredentials
  {
    public long Uid;
    public string Hash;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T21:47:50.097

我认为您只需要制作 Uid 和 Hash 公共属性而不是公共字段。不过，如果是这种情况，我不确定您的 GET 请求如何正确反序列化。

```
public class UserCredentials
{
    public long Uid {get; set;}
    public string Hash {get; set;}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-14T17:41:04.003

您的 ServiceStack 服务器端代码是什么样的？在服务器上执行以下操作应该允许您像这样使用 JsonServiceClient：

调用登录服务：

```
var client = new JsonServiceClient("http://url.com/login");
var response = client.Post<LoginResponse>(new Login() {Uname = "username", Password = "secret"});
var credentials = response.Credentials; 
```

登录服务实现：

```
public class Login : IReturn<LoginResponse>
{
    public string Uname { get; set; }
    public string Pasword { get; set; }
}

public class UserCredentials
{
    public long Uid {get; set;}
    public string Hash {get; set;}
}

public class LoginResponse : IHasResponseStatus
{
    public LoginResponse()
    {
        this.ResponseStatus = new ResponseStatus();
    }

    public UserCredentials UserCredentials { get; set; }
    public ResponseStatus ResponseStatus { get; set; }
}

public class LoginService : Service
{
    public LoginResponse Post(Login request)
    {
        //Code to Get UserCredentials
        return new LoginResponse {UserCredentials = new UserCredentials()};
    }
} 
```

# database - 将内存中的 sqlite 数据库转换为 char 数组

> ID：15409985
> 
> 赞同：1
> 
> 时间：2013-03-14T12:59:27.003
> 
> 标签：database, sqlite

我有一个内存中的 sqlite 数据库，我想将其转换为 char 数组，以将其写入闪存。我用谷歌搜索并找到了这个解决方案：[Loading and Saving In-Memory Databases](http://www.sqlite.org/backup.html)。由于我在新硬件 ( `SQLITE_OS_OTHER=1`) 上使用 sqlite，因此需要一个新的 VFS，但问题是；由于我的硬件上没有文件系统（即打开文件），剩下的唯一方法是将内存中的 sqlite 转换为 char*。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:19:50.333

内存数据库与文件无关。要访问此类数据库的数据，您必须[定义自己的页面缓存实现](http://www.sqlite.org/c3ref/pcache_methods2.html)。

但是，编写一个将闪存视为一个大文件（或两个文件，如果您需要回滚日志）的 VFS 会更容易。

# php - 单引号在 sql 查询中被转换为 backstik：wordpress

> ID：15409986
> 
> 赞同：2
> 
> 时间：2013-03-14T12:59:29.310
> 
> 标签：php, sql, wordpress

> $login_sql="SELECT * FROM tbuser_info WHERE user_name='".$user."' AND password='".$pass."' AND is_approve='".$approve."'";

是我的 php 变量定义了一个 sql 查询...但是当它在 wordpress 中执行时，单引号正在转换为 backstik...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:29:19.713

您已经发布了查询本身，但没有发布实际查询数据库的代码。我怀疑您的问题出在该代码中。但是，我推荐这个：

```
$login_sql="SELECT * FROM tbuser_info WHERE user_name=%s AND password=%s AND is_approve=%s";
$result = $wpdb->get_results($wpdb->prepare($login_sql,$user,$pass,$approve)); 
```

这应该可以解决您的引号问题，`$wpdb->prepare`并将它们添加到字符串中。它还有助于解决 SQL 注入问题。

## 参考：

[http://codex.wordpress.org/Class_Reference/wpdb](http://codex.wordpress.org/Class_Reference/wpdb)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:04:06.580

关于什么？

```
$login_sql = "SELECT * ROM tbuser_info WHERE user_name=\"{$user}\" AND password=\"{$pass}\" AND is_approve=\"{$approve}\""; 
```

# java - 方法跳过返回语句

> ID：15409994
> 
> 赞同：0
> 
> 时间：2013-03-14T12:59:56.123
> 
> 标签：java, object, unmarshalling

我有一个解组方法：

```
public static Object unmarshalXmlTo0100(String xmlMsg, String destination, String resource) throws Exception {
    //init unmarshaller
    ByteArrayInputStream input = new ByteArrayInputStream(xmlMsg.getBytes());
    JAXBContext context = JAXBContext.newInstance(destination);
    Unmarshaller unmarshaller = context.createUnmarshaller();

    //init schema
    SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
    Schema schema = schemaFactory.newSchema(XmlParser.class.getClassLoader().getResource(resource));
    unmarshaller.setSchema(schema);

    //unmarschal
    Object data = unmarshaller.unmarshal(input);

    //return message
    return data;
 } 
```

现在由于某种原因，当我使用以下方法调用该方法时：

```
processDataObj = MainXMLParser.unmarshalXmlTo0100(processData, "cp.jaxb.planningBericht.classes", "source/xml/cp_md_format_planningBericht.xsd"); 
```

一切顺利。

但是当我使用以下内容时：

```
processDataObj = MainXMLParser.unmarshalXmlTo0100(processData, "cp.jaxb.beschikbaarheidBericht.classes", "source/xml/cp_md_format_beschikbaarheidBericht.xsd"); 
```

解组器不返回任何内容，但它会继续运行，因此 proccesDataObj 是空的......

我不知道出了什么问题...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:04:24.107

您确定其他 XSD 文件存在于上述位置吗？您是否肯定这个 XSD 方案实际上是“正确的”（例如，具有预期的名称空间和其他类型）？

# c# - 如何动态更改页面模板

> ID：15409999
> 
> 赞同：0
> 
> 时间：2013-03-14T13:00:24.087
> 
> 标签：c#, asp.net, templates

我想在某些点击事件上更改页面的内部模板，但不更改主布局。

页面内容存储在数据库中。每个模板都有一个ID。

问题是如何显示新模板？这可能吗？欢迎任何想法或建议...

我正在使用 MVC3。我可以使用部分视图作为模板并在 ajax 调用上加载此视图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T13:06:46.463

您需要创建 http 处理程序。
使用 jQuery 来调用它。
并使用 jTemplate 进行格式化。
这里有几个链接
[http://www.joe-stevens.com/2010/01/05/using-the-jtemplate-jquery-plugin-with-ajax-and-asp-net/](http://www.joe-stevens.com/2010/01/05/using-the-jtemplate-jquery-plugin-with-ajax-and-asp-net/)
[http://encosia.com/使用-asp-nets-httphandler-to-bridge-the-cross-domain-gap/](http://encosia.com/use-asp-nets-httphandler-to-bridge-the-cross-domain-gap/)
[http://www.dotnetcurry.com/ShowArticle.aspx?ID=573](http://www.dotnetcurry.com/ShowArticle.aspx?ID=573)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T13:09:28.817

如果没有更多关于什么是模板的信息，我只能告诉你，你可以使用 UpdatePanel 或 Ajax.Load 函数来动态加载页面的新部分。（或更改整个页面而不重新加载）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T15:39:36.633

使用 ajax 调用的局部视图是 MVC3 razor 模板的最佳解决方案！（例如：$('#container').load('_yourPartial.cshtml', '#right');）

示例： http: [//www.codemein.net/2012/05/how-to-refresh-partial-view-with-ajax-asp-net/](http://www.codemein.net/2012/05/how-to-refresh-partial-view-with-ajax-asp-net/)（不是来自我）