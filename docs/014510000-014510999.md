# StackOverflow 问答 14510000-14510999

# internet-explorer - 在 IE 中显示 1,1,1,1 而不是 1,2,3,4（尝试过的列表项）

> ID：14510003
> 
> 赞同：0
> 
> 时间：2013-01-24T20:21:04.107
> 
> 标签：internet-explorer, html-lists

我有一个有序列表，其中任何版本的 Internet Explorer 都选择为 1、1、1、1 而不是 1、2、3、4。在阅读完此内容后，会出现这种情况，因为在 li 上设置了宽度，您需要添加 'display: list-item;' 到 li 让它工作 - 我试过没有结果，我也试过完全删除宽度，但同样的问题。

这是我的清单：

```
<div id="nav">
<ul>
    <li><a href="/">Home</a></li>
    <li>
        <a href="#">New Products</a>
        <ol class="newProducts">
            <li><a href="#"><span>Link 1</span></a></li>
            <li><a href="#"><span>Link 2</span></a></li>
            <li><a href="#"><span>Link 3</span></a></li>
            <li><a href="#"><span>Link 4</span></a></li>
            <li><a href="#"><span>Link 5</span></a></li>
            <li><a href="#"><span>Link 6</span></a></li>
            <li><a href="#"><span>Link 7</span></a></li>
            <li><a href="#"><span>Link 8</span></a></li>
        </ol>
    </li>
    <li><a href="news.html">News</a></li>
    <li><a href="payment-and-shipping.html">Payment &amp; Shipping</a></li>
</ul></div> 
```

这是我的CSS：

```
<pre>
#nav ul, #nav ol {
position: absolute;
top: 158px;
    left: 0px;
    list-style: none;
    text-transform: uppercase;
}

#nav ul > li {
    float: left;
    padding: 10px;
    border-right: 2px solid #000000;
    font-size: 16px;
    position: relative;
}    

#nav ul > li:hover {
    background: url(../images/headerHover.png) bottom no-repeat;
    padding-bottom: 10px;
}    

#nav ul > li a {
    color: #FFFFFF; 
}

#nav ul > li > ol {
    display: none;
}

#nav ul > li:hover ol {
    margin-top: -120px;
    left: 0px;
    display: block;
    padding-top: 7px;
    list-style: decimal outside;
    font-size: 10px;
    color: #fdc800;
    font-family: Arial, Helvetica, sans-serif;
    display: block;
    text-transform: none;
}    

#nav ul > li:hover ol > li {
    text-align: left;
    padding: 0px 0px 5px 0px;
    width: 240px;
    border: 0px;
}    

#nav ul > li:hover ol > li:hover {
    background: none;   
}

#nav ul > li:hover ol > li a {
    color: #FFFFFF;
    text-decoration: none;
}    
</pre> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-04-29T18:48:46.857

这就是我解释您的问题的方式：

1.  当您使用 CSS 将列表更改为顶级导航时，您不需要项目符号或编号列表。您的具体问题是有序列表在 IE 中未显示数字（仅 1 或无），但是，当用户单击导航以展开它时。
2.  当您的 CSS 在某些较旧的 IE 浏览器（如 IE5）中失败时，您确实希望列表也返回到编号的垂直列表。目前，它在 IE5 中不显示列表编号。

那是对的吗？

首先，要实现这一点，您必须从 CSS 中删除“list-style:none”，这会破坏`<ul>`和`<ol>`列表项。它们不再使用该 CSS 声明作为有序或无序列表执行。这就是从所有 IE 浏览器中显示的列表中删除“数字”的原因。通过删除该属性，数字现在将与项目符号一样显示。

其次，IE5 和更早版本的浏览器不知道子选择器是什么 ( `ul > li`)，因此您可以安全地使用该 CSS 规则对 IE6 或更高版本的浏览器隐藏项目符号和数字，并让 IE5 或更早版本的浏览器返回显示其 1 的有序列表格式， 2., 3\. 等数字正常。因此，要解决此问题，请进行如下所示的更改：

```
<style>
#nav ul, #nav ol {
  /* Hide this and let your lists return to being lists again */
  /*list-style: none;*/
}

#nav ul > li {
  /* Now hide the numbers and bullets from IE6 or greater which are able to be a navigation banner and do not need to shows list numbers or bullets */
  list-style-type: none;
}
</style> 
```

# c# - 用 httpResponse.End 摆脱 ThreadAbortException

> ID：14510006
> 
> 赞同：3
> 
> 时间：2013-01-24T20:21:09.717
> 
> 标签：c#, asp.net, .net, vb.net

有谁知道`httpResponse.End()`用不会引发`ThreadAbortException`性能问题的东西替换的方法？有人建议做一个'HttpContext.Current.ApplicationInstance.CompleteRequest()'，但这并不能做所有事情`httpResponse.End()`，比如向客户端发送缓冲数据，这对我来说是个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:28:13.167

首先，我怀疑这是否*真的*会造成重大问题。但是，无论如何，这通常都不是一个好主意……这是对异常的滥用，真的。（无论如何，海事组织。）

从[文档中](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.end.aspx)：

> 提供此方法只是为了与 ASP 兼容，即与 ASP.NET 之前的基于 COM 的 Web 编程技术兼容。如果您想跳转到 EndRequest 事件并向客户端发送响应，请[`CompleteRequest`](http://msdn.microsoft.com/en-us/library/system.web.httpapplication.completerequest.aspx)改为调用。

显然，当前方法在您调用后仍会继续`CompleteRequest`，因此您需要确保干净地完成当前事件的处理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:57:12.063

好的，我能够在[这里](https://stackoverflow.com/questions/1087777/is-response-end-considered-harmful)找到答案。如果您向下滚动到“Jay Zalos”的答案。我替换`httpResponse.End()`为以下 3 行：

```
Response.Flush()
Response.SuppressContent = True
HttpContext.Current.ApplicationInstance.CompleteRequest() 
```

# css - 我可以使用与内置字体同名的自定义@font-face 字体吗？

> ID：14510010
> 
> 赞同：2
> 
> 时间：2013-01-24T20:21:22.047
> 
> 标签：css, font-face

如果我有一个自定义字体并且我称之为“verdana”，那会与浏览器的内置 verdana 字体冲突吗？当我做：

```
font-family: 'verdana'; 
```

浏览器会使用我的自定义字体还是内置字体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:35:58.727

是的，您可以使用可能与已安装字体名称一致的自定义字体名称。但是，如果有人偷看您的代码，使用像 Verdana 这样的名称可能会令人困惑，并且可能看起来很可疑（非法使用字体）。

CSS3 字体草案[说](http://www.w3.org/TR/css3-fonts/#font-family-desc)：“如果字体系列名称 [in `@font-face`] 与给定用户环境中可用的字体系列相同，它有效地隐藏了使用样式表的文档的底层字体。这允许网络作者自由选择字体系列名称，而不必担心与给定用户环境中存在的字体系列名称发生冲突。”</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:31:30.370

您可能会发现本文的某些部分很有趣： http: [//www.practicalecommerce.com/articles/3080-How-Browsers-Manage-Fonts](http://www.practicalecommerce.com/articles/3080-How-Browsers-Manage-Fonts)。

简短的回答是浏览器应该使用您安装的任何版本的 Verdana。这里的例外是如果您使用“src: url()”，那么它应该从该 URL 加载字体文件。如果是这种情况，这是一个很好的资源：http: [//www.html5rocks.com/en/tutorials/webfonts/quick/](http://www.html5rocks.com/en/tutorials/webfonts/quick/)。

如果您想使用您的字体并且您担心某些浏览器可能刚刚启动并决定使用本地 Verdana，您可以在您的服务器上重命名 ttf 或 eot 并使用 Verdana-Mine 作为 font-family 和 src 作为网址（'verdana-mine.ttf'）。

# jquery - 如何修复下面代码中的未定义值错误

> ID：14510017
> 
> 赞同：0
> 
> 时间：2013-01-24T20:21:38.510
> 
> 标签：jquery, html

我正在检索一个`referenceError stating: value is not defined`. 我试图将一个`Remove`按钮设置为一个值，以便它删除与该值关联的文本输入。但我不知道要设置什么`value`来修复错误，因为`var value=''`没有用。我应该设置`value`什么？

下面是代码：

```
function stopImageUpload(success, imageID, imagefilename){

      var result = '';
      imagecounter++;

      if (success == 1){
         result = '<span class="imagemsg'+imagecounter+'">The file was uploaded successfully</span>';   
            $('.hiddenimg').eq(window.lastUploadImageIndex).append('<input type="text" name="imgid[]" id="'+imageID+'" value="' + imageID + '" />');
            $('.listImage').eq(window.lastUploadImageIndex).append('<div>' + htmlEncode(imagefilename) + '<button type="button" class="deletefileimage" data-imageID="'+imageID+'"  data-image_file_name="' + imagefilename + '" value="'+imageID+'">Remove</button><br/><hr/></div>');
         }

  var _imagecounter = imagecounter;

$('.listImage').eq(window.lastUploadImageIndex).find(".deletefileimage").on("click", function(event) {
    jQuery.ajax("deleteimage.php?imagefilename=" + $(this).attr('data-image_file_name')).done(function(data) {
        $(".imagemsg" + _imagecounter).html(data);
    });

    var buttonid = $(this).attr(value);
    $(this).parent().remove();
     $("#"+ buttonid  +"").remove();
});

      return true;   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:25:24.767

改变

```
var buttonid = $(this).attr(value); 
```

到

```
var buttonid = $(this).attr('value'); 
```

或将值初始化为某个属性名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:27:32.237

看来你需要

```
var buttonid = $(this).attr('value'); 
```

或者`value`是一个未定义的变量

# spring - SWF 在评估转换时忽略 FacesMessage 重定向到下一个视图而不更新表单

> ID：14510018
> 
> 赞同：0
> 
> 时间：2013-01-24T20:21:44.073
> 
> 标签：spring, jsf-2, groovy, primefaces, spring-webflow

在转换时，流重定向没有在 FacesContext 的当前实例中呈现 FacesMessage（与 MessageContext 相同的问题）我检查了 FacesContext 中 FacesMessage 的存在是正确的，但出于某种原因，即使上下文我也不会触摸重定向里面包含消息

春季应用程序上下文：

```
<faces:resources/>
<bean class="org.springframework.webflow.mvc.servlet.FlowHandlerMapping"
      p:order="1"
      p:flowRegistry-ref="flowRegistry">
    <property name="defaultHandler">
        <!--If no flow match, map path to a view to render; e.g. the "/home" path
        would map to the view named "home" -->
        <bean class="org.springframework.web.servlet.mvc.UrlFilenameViewController"/>
    </property>
</bean>
<bean id="faceletsViewResolver"
      class="org.springframework.web.servlet.view.UrlBasedViewResolver"
      p:viewClass="org.springframework.faces.mvc.JsfView"
      p:prefix="/WEB-INF/"
      p:suffix=".xhtml"/>
<bean class="org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter"/>
<bean class="org.springframework.faces.webflow.JsfFlowHandlerAdapter"
      p:flowExecutor-ref="flowExecutor"/>
<webflow-config:flow-executor id="flowExecutor">
    <webflow-config:flow-execution-listeners>
        <webflow-config:listener ref="facesContextListener"/>
        <webflow-config:listener ref="jpaFlowExecutionListener"/>
        <webflow-config:listener ref="securityFlowExecutionListener"/>
    </webflow-config:flow-execution-listeners>
</webflow-config:flow-executor>
<webflow-config:flow-registry id="flowRegistry"
                              flow-builder-services="facesFlowBuilderServices" base-path="/WEB-INF/flows">
    <webflow-config:flow-location-pattern
            value="/**/*-flow.xml"/>
</webflow-config:flow-registry>
<faces:flow-builder-services id="facesFlowBuilderServices"
                             development="true"/>
<bean id="facesContextListener"
      class="org.springframework.faces.webflow.FlowFacesContextLifecycleListener"/>
<bean id="jpaFlowExecutionListener"
      class="org.springframework.webflow.persistence.JpaFlowExecutionListener">
    <constructor-arg ref="entityManagerFactory"/>
    <constructor-arg ref="transactionManager"/>
</bean>
<bean id="securityFlowExecutionListener"
      class="org.springframework.webflow.security.SecurityFlowExecutionListener"/> 
```

控制器 ：

```
@Named("registrationController")
class RegistrationController implements Serializable {

@Inject
@LangServiceQualifier
ILangService langService
@Inject
@RegistrationServiceQualifier
IRegistrationService registrationService

void validate(RegistrationModel model) {
    model.user.profile.lang ?: model.user.profile.setLang(registrationLang())
    try {
        registrationService.validate(model)
        model.header = new RequestHelper(request: FacesUtils.request).header
    } catch (RegistrationException re) {
        FacesContext context = FacesUtils.context
        re.messages.each {
            switch (it) {
                case new UsernameAlreadyExistsException().message:
                    context.addMessage("register_form_username_inputText_id",
                            new FacesMessage(
                                    severity: FacesMessage.SEVERITY_ERROR,
                                    summary: FacesUtils.bundle.getString(it)))
                    break
                case new PrimaryEmailAlreadyExistsException().message:
                    context.addMessage("register_form_currentEmailValue_inputText_id",
                            new FacesMessage(
                                    severity: FacesMessage.SEVERITY_ERROR,
                                    summary: FacesUtils.bundle.getString(it)))
                    break
                case new EmailRetypeException().message:
                    context.addMessage("register_form_currentEmailValueRetype_inputText_id",
                            new FacesMessage(
                                    severity: FacesMessage.SEVERITY_ERROR,
                                    summary: FacesUtils.bundle.getString(it)))
                    break
                case new PasswordRetypeException().message:
                    context.addMessage("register_form_password_inputText_id",
                            new FacesMessage(
                                    severity: FacesMessage.SEVERITY_ERROR,
                                    summary: FacesUtils.bundle.getString(it)))
                    break
            }
        }
    }
} 
```

spring web 流定义：

```
<flow xmlns="http://www.springframework.org/schema/webflow"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/webflow
    http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

<on-start>
    <evaluate expression="requestParameters.contains('from')?requestParameters.get('from'):'home'"
              result="flowScope.from"/>
    <evaluate expression="registrationService.initModel()"
              result="flowScope.model"/>
</on-start>

<view-state id="enterRegistration" model="model">
    <transition on="cancelRegistrationAction" to="exitRegistrationAction"/>
    <transition on="validateRegistrationAction" to="reviewRegistration">
        <evaluate expression="registrationController.validate(model)"/>
    </transition>
</view-state>

<view-state id="reviewRegistration" model="model">
    <transition on="cancelRegistrationAction" to="exitRegistrationAction"/>
    <transition on="reviseRegistrationAction" to="enterRegistration"/>
    <transition on="confirmRegistrationAction" to="exitRegistrationAction">
        <evaluate expression="registrationService.register(model)"/>
    </transition>
</view-state>

<end-state id="exitRegistrationAction" view="externalRedirect:#{from}"/>

<on-end>
    <evaluate expression="registrationController.clearRegistrationModel(flowScope.model)"/>
</on-end> 
```

JSF 页面：

```
<h:form id="register_form">
                            <p:messages id="register_form_messages_id"/>
                                <p:outputLabel for="register_form_username_inputText_id"
                                               value="#{msgs['user.username.label']}"/>
                                <p:inputText id="register_form_username_inputText_id"                                            
                                             label="#{msgs['user.username.label']}"
                                             value="#{model.username}"/>
                                <p:outputLabel for="register_form_currentEmailValue_inputText_id"
                                               value="#{msgs['user.currentEmailValue.label']}"/>
                                <p:inputText id="register_form_currentEmailValue_inputText_id"
                                             label="#{msgs['user.currentEmailValue.label']}"
                                             value="#{model.email}"/>
                                <p:outputLabel
                                    for="register_form_currentEmailValueRetype_inputText_id"
                                    value="#{msgs['user.currentEmailValueRetype.label']}"/>
                                <p:inputText
                                    id="register_form_currentEmailValueRetype_inputText_id"
                                    label="#{msgs['user.currentEmailValueRetype.label']}"
                                    value="#{model.emailRetype}"/>
                                <p:outputLabel for="register_form_password_inputText_id"
                                               value="#{msgs['user.password.label']}"/>
                                <p:password id="register_form_password_inputText_id"
                                            label="#{msgs['user.password.label']}"
                                            value="#{model.password}"/>
                                <p:outputLabel for="register_form_passwordRetype_inputText_id"
                                               value="#{msgs['user.passwordRetype.label']}"/>
                                <p:password id="register_form_passwordRetype_inputText_id"
                                            label="#{msgs['user.passwordRetype.label']}"
                                            value="#{model.passwordRetype}"/>
                                <p:commandButton
                                    id="exit_registration_cmd_btn_id"
                                    action="cancelRegistrationAction"
                                    value="#{msgs['cancel.button']}"
                                    immediate="true"/>

                                <p:commandButton
                                    id="validate_registration_cmd_btn_id"
                                    action="validateRegistrationAction"
                                    value="#{msgs['register.label']}"
                                    update="@form"
                                    ajax="false"/>
                    </h:form> 
```

我在 openjdk7 tomcat7 mojarra primefaces 下运行，问题与 glassfish 3.1.2、groovy 2.0.5 和 groovy eclipse 编译器、spring 3.2、spring webflow 2.3.1 相同

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T01:36:42.273

好的，我找到了一种解决方法，但仍然不知道 JSF 生命周期中的“法院电路”是什么，不让消息显示在转换的评估中，所以我不得不使用决策状态来阻止转换并更改控制器方法签名，并使验证过程返回一个布尔值以指示环境验证的天气，并且这种方式强制使用相同的填充请求映射留在此视图上。

```
import javax.faces.application.FacesMessage
import javax.faces.context.FacesContext
import javax.inject.Inject
import javax.inject.Named
import javax.servlet.http.HttpServletRequest

@Named("registrationController")
class RegistrationController {

static final Logger log = LoggerFactory.getLogger(RegistrationController)

Logger getLog() { return log }

@Inject
@LangServiceQualifier
ILangService langService
@Inject
@RegistrationServiceQualifier
IRegistrationService registrationService

Lang registrationLang() {
    return langService.supportedLangs.find {
        it.code == FacesContext
                .currentInstance
                .externalContext
                .requestLocale
                .language
    } as Lang ?: langService.defaultLang
}

Boolean validateModel(RegistrationModel registrationModel) {
    FacesContext context = FacesContext.currentInstance
    ResourceBundle bundle = ResourceBundle.getBundle(
            II18nConfigService.BUNDLE_BASE_NAME_VALUE,
            context.viewRoot.locale,
            Thread.currentThread().contextClassLoader)
    registrationModel.user.profile.lang ?: registrationModel.user.profile.setLang(registrationLang())
    try {
        registrationService.validate(registrationModel)
        registrationModel.header = new RequestHelper(
                request: context
                        .externalContext
                        .request as HttpServletRequest).header
    } catch (RegistrationException re) {
        assert !re.messages.empty
        re.messages.each {
            switch (it) {
                case new UsernameAlreadyExistsException().message:
                    context.addMessage "register_form_username_inputText_id",
                            new FacesMessage(
                                    severity: FacesMessage.SEVERITY_ERROR,
                                    summary: bundle.getString(it))
                    break
                case new PrimaryEmailAlreadyExistsException().message:
                    context.addMessage "register_form_currentEmailValue_inputText_id",
                            new FacesMessage(
                                    severity: FacesMessage.SEVERITY_ERROR,
                                    summary: bundle.getString(it))
                    break
                case new EmailRetypeException().message:
                    context.addMessage "register_form_currentEmailValueRetype_inputText_id",
                            new FacesMessage(
                                    severity: FacesMessage.SEVERITY_ERROR,
                                    summary: bundle.getString(it))
                    break
                case new PasswordRetypeException().message:
                    context.addMessage "register_form_password_inputText_id",
                            new FacesMessage(
                                    severity: FacesMessage.SEVERITY_ERROR,
                                    summary: bundle.getString(it))
                    break
            }
        }
        return Boolean.FALSE
    }
    return Boolean.TRUE
}
} 
```

流定义

```
<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/webflow
    http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">
<on-start>
    <evaluate expression="requestParameters.contains('from')?requestParameters.get('from'):'home'"
              result="flowScope.from"/>
    <evaluate expression="registrationService.initModel()"
              result="flowScope.registrationModel"/>
</on-start>

<view-state id="enterRegistration" model="registrationModel">
    <transition on="validateRegistrationAction" to="isValidModelDecision">
        <evaluate expression="registrationController.validateModel(registrationModel)"
                  result="flowScope.isValidModel"/>
    </transition>
    <transition on="cancelRegistrationAction" to="exitRegistrationAction" history="discard"/>
</view-state>

<decision-state id="isValidModelDecision">
    <if test="isValidModel" then="reviewRegistration" else="enterRegistration"/>
</decision-state>

<view-state id="reviewRegistration" model="registrationModel">
    <transition on="reviseRegistrationAction" to="enterRegistration"/>
    <transition on="confirmRegistrationAction" to="exitRegistrationAction">
        <evaluate expression="registrationService.register(registrationModel)" />
    </transition>
    <transition on="cancelRegistrationAction" to="exitRegistrationAction"     history="discard"/>
</view-state>

<end-state id="exitRegistrationAction" view="externalRedirect:#{from}"/>
</flow> 
```

这只是一种解决方法，而不是解释我的代码有什么问题，只是我的黑客继续。

# java - jxpath 的 Java 枚举

> ID：14510026
> 
> 赞同：0
> 
> 时间：2013-01-24T20:22:16.440
> 
> 标签：java, coding-style, constants, jxpath

我有一些 jxpath，我想将它们放在一个枚举中，我将使用一个映射与 JSF 页面共享，该映射将使 EL 可以使用它们作为 jxpath 执行 createPathAndSetValue 的键。

然后我可以轻松地填写模型，而无需创建大量的 getter 和 setter。像这样：

```
<h:inputText value="#{backingBeanMap[backingBeanMap.billingAddress_postalCode]}" /> 
```

我有这样的东西

```
public enum MWField {
    isGiftJoin,
    billingAddress_postalCode,
    ...
    associates$3_memberInfo_membershipType_type;

    public final String xpath;

    MWField(){
        this.xpath = name().replace('_', '/').replace("$0", "[0]")
        .replace("$1", "[1]").replace("$2", "[2]")
        .replace("$3", "[3]").replace("$4", "[4]")
        .replace("$5", "[5]").replace("$6", "[6]")
        .replace("$7", "[7]").replace("$6", "[6]")
        .replace("$9", "[9]").replace("$10", "[10]");
    }
} 
```

我使用名称 isGiftJoin 或 billingAddress_postalCode 而不是大写名称，并在构造函数中将 _ 替换为 / （因此 xpath 属性是实际的 xpath）。只要所有属性的名称中都没有 _（它们没有），我就完成了。枚举不会是“大写”，但枚举并不是真正的常量，因为 RED 是一个常量。在这里，它们是指向数据的类的实例，并且不打算以这种方式“恒定”。

这些名称是否太奇怪和不标准？被链接到 C 风格的常量大写标准是愚蠢的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:28:09.937

您是在问是否*可以*随意命名枚举？

当然; 为什么不？使用适合您的标准。就个人而言，我只为静态决赛保留所有大写字母，并且倾向于为枚举值使用类命名约定。

我*不是*名称中下划线的忠实拥护者，但是在您的情况下，由于您故意创建了层次结构，因此我对此没有太大的问题。

我*想*知道命名路径是否真的需要枚举：您是否需要在 switch 语句中使用它们（在 JDK 6 或更低版本中）？是否有理由将它们表示为字符串以外的任何东西？没有路径的名字有价值吗？

# python - 从英文文本中提取产品名称

> ID：14510028
> 
> 赞同：0
> 
> 时间：2013-01-24T20:22:20.483
> 
> 标签：python, algorithm, language-agnostic, nlp

我想从英文文本中提取正在销售的产品名称。

例如：

> “我正在出售全新的 Xbox”
> 
> “卖很少用的27寸电视”

应该给我`"xbox"`和`"27 inch TV"`

目前我唯一能想到的就是在一个巨大的重要名词和重要形容词列表中硬编码：`['tv', 'fridge', 'xbox', 'laptop', etc]`

有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:27:42.610

看起来 nltk 会给你一个单词列表和它们的词性。既然你只对名词感兴趣？[这](https://nltk.googlecode.com/svn/trunk/doc/howto/tag.html)将为您提供

```
>>> from nltk import pos_tag, word_tokenize
>>> pos_tag(word_tokenize("John's big idea isn't all that bad.")) 
[('John', 'NNP'), ("'s", 'POS'), ('big', 'JJ'), ('idea', 'NN'), ('is',
'VBZ'), ("n't", 'RB'), ('all', 'DT'), ('that', 'DT'), ('bad', 'JJ'),
('.', '.')] 
```

# php - 未定义的方法 mysqli_stmt::get_result()

> ID：14510035
> 
> 赞同：0
> 
> 时间：2013-01-24T20:22:49.133
> 
> 标签：php, mysqli

在我的服务器上，我收到此错误

```
Fatal error: Call to undefined method mysqli_stmt::get_result() in /var/www/virtual/fcb/htdocs/library/mysqlidbclass.php on line 144 
```

我有一个这样的包装器：

```
<?php

/* https://github.com/aaron-lord/mysqli */

class mysqlidb {
    /**
     * Set up the database connection
     */

    public function __construct($server,$user,$password,$db){
        $this->connection = $this->connect($server, $user, $password, $db, true);
    }

    /**
     * Connect to the database, with or without a persistant connection
     * @param  String  $host       Mysql server hostname
     * @param  String  $user       Mysql username
     * @param  String  $pass       Mysql password
     * @param  String  $db         Database to use
     * @param  boolean $persistant Create a persistant connection
     * @return Object              Mysqli
     */
    private function connect($host, $user, $pass, $db, $persistant = true){
        $host = $persistant === true ? 'p:'.$host : $host;

        $mysqli = new mysqli($host, $user, $pass, $db);

        if($mysqli->connect_error)
            throw new Exception('Connection Error: '.$mysqli->connect_error);

        $mysqli->set_charset('utf8');

        return $mysqli;
    }

    /**
     * Execute an SQL statement for execution.
     * @param  String $sql An SQL query
     * @return Object      $this
     */
    public function query($sql){
        $this->num_rows = 0;
        $this->affected_rows = -1;

        if(is_object($this->connection)){
            $stmt = $this->connection->query($sql);

            # Affected rows has to go here for query :o
            $this->affected_rows = $this->connection->affected_rows;
            $this->stmt = $stmt;
            return $this;
        }
        else {
            throw new Exception;
        }
    }

    /**
     * Prepare an SQL statement
     * @param  String $sql An SQL query
     * @return Object      $this
     */
    public function prepare($sql){
        unset($this->stmt);
        $this->num_rows = 0;
        $this->affected_rows = -1;

        if(is_object($this->connection)){
            # Ready the stmt

            $this->stmt = $this->connection->prepare($sql);

            if (false===$this->stmt)
            {
                print('prepare failed: ' . htmlspecialchars($this->connection->error)."<br />");
            }

            return $this;
        }
        else {
            throw new Exception();
        }
    }

    public function multi_query(){ }

    /**
     * Escapes the arguments passed in and executes a prepared Query.
     * @param Mixed $var   The value to be bound to the first SQL ?
     * @param Mixed $...   Each subsequent value to be bound to ?
     * @return Object      $this
     */
    public function execute(){
        if(is_object($this->connection) && is_object($this->stmt)){
            # Ready the params
            if(count($args = func_get_args()) > 0){
                $types = array();
                $params = array();

                foreach($args as $arg){
                    $types[] = is_int($arg) ? 'i' : (is_float($arg) ? 'd' : 's');
                    $params[] = $arg;
                }

                # Stick the types at the start of the params
                array_unshift($params, implode($types));

                # Call bind_param (avoiding the pass_by_reference crap)
                call_user_func_array(
                    array($this->stmt, 'bind_param'),
                    $this->_pass_by_reference($params)
                );
            }

            if($this->stmt->execute()){
                # Affected rows to be run after execute for prepares
                $this->affected_rows = $this->stmt->affected_rows;
                return $this;
            }
            else {
                throw new Exception($this->connection->error);
            }
        }
        else {
            throw new Exception;
        }
    }

    /**
     * Fetch all results as an array, the type of array depend on the $method passed through.
     * @param  string  $method     Optional perameter to indicate what type of array to return.'assoc' is the default and returns an accociative array, 'row' returns a numeric array and 'array' returns an array of both.
     * @param  boolean $close_stmt Optional perameter to indicate if the statement should be destroyed after execution.
     * @return Array              Array of database results
     */
    public function results($method = 'assoc', $close_stmt = false){
        if(is_object($this->stmt)){
            $stmt_type = get_class($this->stmt);

            # Grab the result prepare() & query()
            switch($stmt_type){
                case 'mysqli_stmt':
                    $result = $this->stmt->get_result();
                    $close_result = 'close';
                    break;

                case 'mysqli_result':
                    $result = $this->stmt;
                    $close_result = 'free';
                    break;

                default:
                    throw new Exception;
            }

            $this->num_rows = $result->num_rows;

            # Set the results type
            switch($method) {
                case 'assoc':
                    $method = 'fetch_assoc';
                    break;

                case 'row':
                    //return 'fetch_row';
                    $method = 'fetch_row';
                    break;

                default:
                    $method = 'fetch_array';
                    break;
            }

            $results = array();
            while($row = $result->$method()){
                $results[] = $row;
            }

            $result->$close_result();
            return $results;
        }
        else {
            throw new Exception;
        }
    }

    /**
     * Turns off auto-committing database modifications, starting a new transaction.
     * @return bool Dependant on the how successful the autocommit() call was
     */
    public function start_transaction(){
        if(is_object($this->connection)){
            return $this->connection->autocommit(false);
        }
    }

    /**
     * Commits the current transaction and turns auto-committing database modifications on, ending transactions.
     * @return bool Dependant on the how successful the autocommit() call was
     */
    public function commit(){
        if(is_object($this->connection)){
            # Commit!
            if($this->connection->commit()){
                return $this->connection->autocommit(true);
            }
            else {
                $this->connection->autocommit(true);
                throw new Exception;
            }
        }
    }

    /**
     * Rolls back current transaction and turns auto-committing database modifications on, ending transactions.
     * @return bool Dependant on the how successful the autocommit() call was
     */
    public function rollback(){
        if(is_object($this->connection)){
            # Commit!
            if($this->connection->rollback()){
                return $this->connection->autocommit(true);
            }
            else {
                $this->connection->autocommit(true);
                throw new Exception;
            }
        }
    }

    /**
     * Return the number of rows in statements result set.
     * @return integer The number of rows
     */
    public function num_rows(){
        return $this->num_rows;
    }

    /**
     * Gets the number of affected rows in a previous MySQL operation.
     * @return integer The affected rows
     */
    public function affected_rows(){
        return $this->affected_rows;
    }

    /**
     * Returns the auto generated id used in the last query.
     * @return integer The last auto generated id
     */
    public function insert_id(){
        if(is_object($this->connection)){
            return $this->connection->insert_id;
        }
    }

    /**
     * Fixes the call_user_func_array & bind_param pass by reference crap.
     * @param  array $arr The array to be referenced
     * @return array      A referenced array
     */
    private function _pass_by_reference(&$arr){ 
        $refs = array(); 
        foreach($arr as $key => $value){
            $refs[$key] = &$arr[$key]; 
        }
        return $refs; 
    }
}

?> 
```

有没有办法使用另一个功能，这样我就不必重写整个应用程序？如果有请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:25:31.873

请阅读此方法的用户说明：

[http://php.net/manual/en/mysqli-stmt.get-result.php](http://php.net/manual/en/mysqli-stmt.get-result.php)

它需要 mysqlnd 驱动程序。如果它没有安装在您的网络空间中，您将不得不使用`BIND_RESULT`&`FETCH`

[http://www.php.net/manual/en/mysqli-stmt.bind-result.php](http://www.php.net/manual/en/mysqli-stmt.bind-result.php)

[http://www.php.net/manual/en/mysqli-stmt.fetch.php](http://www.php.net/manual/en/mysqli-stmt.fetch.php)

[从这里](https://stackoverflow.com/questions/8321096/call-to-undefined-method-mysqli-stmtget-result/8343970#8343970)提取

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-21T12:08:15.380

此错误的原因是您的服务器没有安装 mysqlnd 驱动程序驱动程序。（见[这里](https://stackoverflow.com/a/8343970/5869513)。）如果您有管理员权限，您可以自己安装它，但还有一种更简单的方法：

我编写了两个简单的函数，它们提供与 相同的功能`$stmt->get_result();`，但它们不需要 mysqlnd 驱动程序。

您只需**更换**

`$result = $stmt->get_result();` **和** `$fields = bindAll($stmt);`

**和**

`$row= $stmt->get_result();` **与** `$row = fetchRowAssoc($stmt, $fields);`.

（要获取返回的行数，您可以使用`$stmt->num_rows`。）

您只需将我编写的**这两个函数****放在您的 PHP 脚本中的某个**位置。（例如在底部）

```
function bindAll($stmt) {
    $meta = $stmt->result_metadata();
    $fields = array();
    $fieldRefs = array();
    while ($field = $meta->fetch_field())
    {
        $fields[$field->name] = "";
        $fieldRefs[] = &$fields[$field->name];
    }

    call_user_func_array(array($stmt, 'bind_result'), $fieldRefs);
    $stmt->store_result();
    //var_dump($fields);
    return $fields;
}

function fetchRowAssoc($stmt, &$fields) {
    if ($stmt->fetch()) {
        return $fields;
    }
    return false;
} 
```

*它是如何工作的*：

我的代码使用该`$stmt->result_metadata();`函数来确定返回了多少和哪些字段，然后自动将获取的结果绑定到预先创建的引用。奇迹般有效！

也张贴[在这里](https://stackoverflow.com/a/48905431/5869513)。

# meteor - 流星：设置字段后打开对话框

> ID：14510046
> 
> 赞同：0
> 
> 时间：2013-01-24T20:23:26.097
> 
> 标签：meteor, sample

我正在尝试使用“编辑派对”功能完成派对演示我了解创建对话框会在设置会话 showCreateDialog 时打开

```
{{#if showCreateDialog}}
    {{> createDialog}}
 {{/if}} 
```

这显示了popin，但我想设置为打开后的字段，我看不到打开操作后如何操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:22:16.600

您可以在模板的[呈现事件](http://docs.meteor.com/#template_rendered)中设置操作 DOM 。但是如果你发现自己在这里写了很多胶水代码（`$("#someInput").val("someVal")`）那么要**小心，**因为你可能走错了路！

```
Template.createDialog.rendered = function() {
    // you can manipulate the DOM here
} 
```

请记住，您可以将字段值绑定到实例，因此类似下面的内容将自动绑定您的对象

```
<template name="editDialog">
    {{#with party}}
        <input type="text" id="myPartyName" value="{{name}}" />
        ...
    {{/with}}
</template>

Template.editDialog.party = function() {
    return Parties.findOne(Session.get("selectedParty"));
}; 
```

# vb.net - 更改设计器生成的表单的类

> ID：14510050
> 
> 赞同：0
> 
> 时间：2013-01-24T20:23:36.603
> 
> 标签：vb.net, winforms, visual-studio-2008, windows-forms-designer

我想将设计器生成的 Form 类从 Form 更改为 Form 的子类。这可以在 .designer 文件中完成。当然，问题在于设计者重新生成代码的风险。

有没有办法通过设计器更改类（不重做所有事情），或者有没有办法安全地更改 .designer 文件而不会有被覆盖的风险？

来自 .Designer.vb：

```
<Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
Partial Class frmReportSelection
    Inherits System.Windows.Forms.Form
    ' ...
End Class 
```

想把这个改成`Inherits DerivedForm`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T15:47:16.787

这真的很简单，只需在解决方案资源管理器中单击“显示所有文件”，打开`.Designer.vb`文件并手动编辑.`Inherits Form``Inherits FormChildClass`

我用大约 50 个表单完成了此操作，并且 VS 尝试覆盖没有问题。

# javascript - JQuery：在 .each() 循环中使用“this”

> ID：14510055
> 
> 赞同：0
> 
> 时间：2013-01-24T20:23:59.443
> 
> 标签：javascript, jquery, loops, this

> **可能重复：**
> [jQuery 每个 this](https://stackoverflow.com/questions/6409039/jquery-each-this)

我有一个循环遍历某个类的每个元素：

```
$(".myclass").each(function(i) {

}); 
```

我正在尝试使用 获取该元素的子元素`this.find("tag")`，但它给了我一个错误。在那个循环里面，`this`指的是什么？怎么样`$(this)`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T20:24:56.140

`this`是原始 DOM 节点。如果你想在上面使用 jQuery 函数，你需要使用`$(this)`.

# ruby - 数组中数组的 Ruby 哈希

> ID：14510059
> 
> 赞同：2
> 
> 时间：2013-01-24T20:24:15.970
> 
> 标签：ruby, arrays, hash

我有以下数组

```
a=[["kvm16", "one-415"], ["kvm16", "one-416"], ["kvm5", "one-417"]] 
```

我想将其转换为看起来像这样的哈希

```
{"kvm5"=>["one-417"], "kvm16"=>["one-417", "one-416"]} 
```

我尝试过的一切都会压低价值。

```
v=Hash[ a.collect do |p| [p[0], [ p[1] ] ] end ]
=> {"kvm5"=>["one-417"], "kvm16"=>["one-416"] } 
```

我在想我可以检查 v[p[0]] 是否是一个数组，但是该变量未在此块内定义。

有没有一种干净的方法来完成我正在寻找的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T20:26:34.103

是的，你必须自己做，我害怕。

```
a = [["kvm16", "one-415"], ["kvm16", "one-416"], ["kvm5", "one-417"]]

h = a.each_with_object({}) do |(k, v), memo|
  (memo[k] ||= []) << v
end

h # => {"kvm16"=>["one-415", "one-416"], "kvm5"=>["one-417"]} 
```

或者，如果您使用的是较旧的 ruby​​ (1.8.x)：

```
h = {}
a.each do |k, v|
  (h[k] ||= []) << v
end

h # => {"kvm16"=>["one-415", "one-416"], "kvm5"=>["one-417"]} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T20:49:36.723

让我们看看一些函数式方法。这是一个常见的抽象，你可以在 Facets 中找到它为[Enumerable#map_by](http://rdoc.info/github/rubyworks/facets/master/Enumerable#map_by-instance_method)：

```
require 'facets'
hs.map_by { |k, v| [k, v] }
#=> {"kvm16"=>["one-415", "one-416"], "kvm5"=>["one-417"]} 
```

这种模式取代了繁琐的`group_by`++ `map`：`Hash`

```
Hash[hs.group_by(&:first).map { |k, gs| [k, gs.map(&:last)] }]
#=> {"kvm16"=>["one-415", "one-416"], "kvm5"=>["one-417"]} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:53:00.080

这个有。面对我的 ruby​​ 版本中没有 each_with_object 和我到达的一些 googleze

```
{}.tap{ |h| items.each{ |item| h[item.id] = item } }
=> {"kvm5"=>["one-417"], "kvm16"=>["one-415", "one-416"]} 
```

非常感谢塞尔吉奥让我沿着这条线思考

# c# - 如何按名称查找文本框并将其内容写入文本文件

> ID：14510065
> 
> 赞同：-1
> 
> 时间：2013-01-24T20:24:34.643
> 
> 标签：c#

> **可能重复：**
> [在 C# winforms 中按名称查找控件](https://stackoverflow.com/questions/4483912/find-a-control-in-c-sharp-winforms-by-name)

我将尝试解释它.. 所以我有一个 for 循环，每次我想加载与循环整数相等的文本框编号。

这是我的代码：

```
for(int i=1 ; i<=indulok+1 ; i++)
{
    StreamWriter sw = new StreamWriter("futamok/"+comboBox1.Text + "/" + indulok + ".txt");
    sw.WriteLine(textBox1.Text);
    sw.Dispose();
} 
```

现在我想将 textBox1.Text 替换为如下内容：

```
sw.WriteLine(textBox + i + .Text); 
```

但这当然行不通。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T20:37:18.003

这是一种按名称查找控件的替代方法。

```
 for (int i = 1; i <= indulok + 1; i++)
        {
            if (this.Controls.ContainsKey("textBox" + i.ToString()))
            {
                TextBox txtBox = this.Controls["textBox" + i.ToString()] as TextBox;
                if (txtBox != null)
                {
                    string FileName = "C:\\" + i.ToString() + ".txt";
                    System.IO.File.WriteAllText(FileName, txtBox.Text);
                }
            }
        } 
```

如果您的控件嵌套在其他控件（即 GroupBox）中，您可能需要使用 Find 函数

```
 for (int i = 1; i <= indulok + 1; i++)
        {
            Control[] controls = this.Controls.Find("textBox" + i.ToString(), true);
            if (controls.Length > 0)
            {
                TextBox txtBox = controls[0] as TextBox;
                if (txtBox != null)
                {
                    string FileName = "C:\\" + i.ToString() + ".txt";
                    System.IO.File.WriteAllText(FileName, txtBox.Text);
                }
            }
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T20:26:50.587

您可以将文本框放入某种索引集合中。其中最简单的是一个数组

所以，假设你有一些像

```
textBox[] textBoxes 
```

然后你可以打电话

```
sw.WriteLine(textBoxes[i].text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:50:54.870

我猜你正在运行某种 Windows 窗体项目？如果是，您可以循环 Controls-array 以查找所有文本框：

```
foreach (Control c in this.Controls)
{
    if (c.GetType() == textBox1.GetType())
        sw.WriteLine(c.Text);
} 
```

# python - 调用变量时python urllib2失败

> ID：14510066
> 
> 赞同：0
> 
> 时间：2013-01-24T20:24:36.570
> 
> 标签：python, beautifulsoup, urllib2

我正在使用漂亮的汤来抓取数据。我有一个要循环代码的 url 列表，因此我需要在`urllib2.Request`命令中包含一个变量。当我添加一个变量时，`urllib2.Request`我得到了这个错误（urllib2.py 的第 1240 行）：

```
raise URLError('unknown url type: %s' % type) 
```

这是我的代码：

```
from bs4 import BeautifulSoup
import urllib2

webstring = "/DIRECTORY/"+"'"  
webfull = "urllib2.Request('http://www.caao.org"+webstring+", None, headers)"

print webfull

#webfull prints: urllib2.Request('http://www.caao.org/DIRECTORY/', None, headers)

headers = { 'User-Agent' : 'Mozilla/5.0' }
html = urllib2.urlopen(webfull).read()
soup = BeautifulSoup(html)

print soup 
```

变量`webfull`打印出正确的代码。我可以将它剪切并粘贴到 urlopen 中，它会起作用。像这样：

```
from bs4 import BeautifulSoup
import urllib2

headers = { 'User-Agent' : 'Mozilla/5.0' }
html = urllib2.urlopen(urllib2.Request('http://www.caao.org/DIRECTORY/', None, headers)).read()
soup = BeautifulSoup(html)

print soup 
```

我尝试使用多个网站作为测试，并且尝试在某些字符串上使用三双引号（如下所示），但我总是遇到同样的`unknown url type`错误。

```
webstring = "/DIRECTORY/"+"'"
web1 = """'http://www.caao.org"""+webstring+", None, headers)" 
```

* * *

作为旁注：

我是 python 新手，我试图从同一个网站的多个页面中抓取数据。上面的代码是让我运行我的 URL 列表，以便在每个页面上运行我漂亮的汤代码。如果有更简单的方法可以遍历 URL 列表并用于`urllib2.urlopen`打开每个页面以便我可以运行我的抓取代码，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:30:17.587

只需动态构建您的 URL，然后将其传递给函数。不要传递您希望调用的函数的字符串表示形式 - 这不起作用。

```
from bs4 import BeautifulSoup
import urllib2

headers = { 'User-Agent' : 'Mozilla/5.0' }

webstring = "/DIRECTORY/"
url = "http://www.caao.org"+webstring

html = urllib2.urlopen(urllib2.Request(url, None, headers)).read()
soup = BeautifulSoup(html)

print soup 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:30:33.477

您在这里遇到的问题是您试图将字符串解释为一段代码。

期望的是，当您`urllib`传入一个字符串时，它将是一个字符串。你可能应该做的是：

```
from bs4 import BeautifulSoup
import urllib2

webstring = "/DIRECTORY/" 
url = "http://www.caao.org"+webstring

headers = { 'User-Agent' : 'Mozilla/5.0' }
html = urllib2.urlopen(urllib2.Request(url, None, headers)).read()
soup = BeautifulSoup(html)

print soup 
```

字符串就是你想要的url，然后你把它传递给`urllib2.Request`

# php - UPDATE 仅使用 PHP 在 MySQL 表中提供字段

> ID：14510070
> 
> 赞同：2
> 
> 时间：2013-01-24T20:24:41.450
> 
> 标签：php, mysql, mysqli

我有一个用户表和`id`字段和 10 个其他字段，用于存储用户可以通过各种 Web 表单更改的各种类型的用户详细信息。我想要一个 PHP 脚本来获取这些字段的某些子集的 POST 更改值，并且只更新在 POST 数据中收到的那些字段。我发现以一种不糟糕的方式很难做到这一点。我们在此应用程序的其余部分中使用 mysqli 进行所有数据库交互，因此强烈首选基于 mysqli 的解决方案。

到目前为止我已经考虑并驳回的选项：

1) 为 POST 数据中提供的每个字段运行单独的`UPDATE`查询 -*糟糕，我不想在一次查询中完成最多 10 次的数据库访问。*

2）有一个字典将字段名称映射到字段的数据类型，并通过循环提供的字段来迭代构造查询，检查它们是否是文本字段，调用`mysqli_real_escape_string`字符串字段并以其他方式清理其他字段（例如按类型检查或`sprintf`使用 '%i' 占位符）。-*呸！如果我小心点，我可能可以安全地这样做，但我不想养成使用这种方法的习惯，因为如果我不小心，我会让自己对 SQL 注入持开放态度。参数化查询不会给我带来危险的可能性，但这种方法可以。我的理想是永远不要手动将任何数据连接到 SQL 查询中，并且始终依赖参数化查询；其他语言的数据库库，如 Python，*

3) 使用参数化查询 - 这是我对所有事情的理想选择，因为只要我通过`bind_param`mysqli 语句对象的方法将所有外部提供的数据插入到我的查询中，我就不会受到 SQL 注入的影响并且不必担心清理，但在这里使用参数化查询似乎是不可能的。问题是`bind_param`需要将数据作为变量传递，因为第一个参数之后的所有参数都是通过引用传递的。我可以相当优雅地迭代地构造一个带有`?`占位符的查询，当我在它构造作为第一个参数传递给`bind_param`（`'ssiddsi'`等）的类型字符串时，我无法在运行时选择哪个我传递给我的 10 个字段`bind_params`（除非我有一个`switch`包含 10^2 个案例的声明）。

是否有一些我缺少的 PHP 语言结构（类似于数组解包的东西）允许我在运行时选择哪些变量作为参数传递给`bind_param`？或者有没有其他我没有考虑过的方法可以让我干净安全地解决这个简单的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:38:10.303

您可以通过我的[SafeMySQL 库](https://github.com/colshrapnel/safemysql/blob/master/safemysql.class.php)轻松组合 2 和 3 。代码看起来像

```
$allowed = array('title','url','body','rating','term','type');
$data    = $db->filterArray($_POST,$allowed);
$sql     = "UPDATE table SET ?u WHERE id=?i";
$db->query($sql, $data, $_POST['id']); 
```

请注意，`$allowed`数组不会使所有这些字段都必须更新 - 它只是将 POST 字段过滤掉。因此，即使只有 id 和 url 的 $_POST 也会被正确更新。

尽管如此，使用准备好的语句虽然很麻烦，但也很有可能。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-06-17T18:11:44.170

请参阅下面的代码

```
public function update($data, $table, $where) {
    $data_str = '' ;
    foreach ($data as $column => $value) {
        //append comma each time after first item
        if (!empty($data_str)) $data_str .= ', ' ;
        $data_str .= "$column = $value" ;
    }
    $sql = "UPDATE $table SET $data_str WHERE $where";
    mysqli_query($sql) or die(mysqli_error());
    return true;
} 
```

$data 是一个数组，在您的情况下它是 $_POST。

如果您想更具体地了解要从 $_POST 数组保存的数据，您可以定义一个允许列的数组。例如，

```
$allowed = array('id', 'username', 'email', 'password'); 
```

通过这样做，您可以过滤 $_POST 数组并将其传递给 update() 函数。

# javascript - Uncaught TypeError: undefined is not a function Java Scripts

> ID：14510071
> 
> 赞同：0
> 
> 时间：2013-01-24T20:24:43.473
> 
> 标签：javascript

```
function correlativo(sucursal){

    var tipo=document.getElementById('tipo').value;
    var correlativo= document.getElementById('correlativo')

    var ajax=nuevoAjax(); 
    ajax.open("POST", "../ajax/correlativo_ajax.php", true); 
    ajax.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"); 
    ajax.send("tipo="+tipo+"&sucursal="+sucursal); 

    ajax.onreadystatechange=function() 
    { 
        if (ajax.readyState==4) 
        { 
            var respuesta=ajax.responseXML; 
            correlativo.innerHTML=respuesta.getElementsByTagName("correlativo")[0].childNodes[0].data; 

        } 
    }
}
function guardarOt(){

    //
    var sucursal_ciudad = document.getElementById('sucursal_ciudad').value;

    correlativo(sucursal_ciudad); //This line i get the ERROR
} 
```

我有这个错误：C，我不知道为什么。Uncaught TypeError: undefined is not a function 当我调用这个函数 correlativo(); 我收到此错误，我不知道为什么；（，请帮助我，我需要很多解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:39:58.473

这很可能是由于[浏览器“功能”](https://stackoverflow.com/questions/6381425/should-the-id-of-elements-be-made-global-variables-and)创建了与页面上的每个元素相对应的全局变量，并将元素的 ID 作为变量名称。

如果您的页面上有一个带有 ID 的元素`correlativo`（您可能会在执行 时这样做`getElementById('correlativo')`），这将有效地覆盖您的声明`function correlativo ...`，导致当您尝试从 执行它时它不存在`guardarOt`。

TLDR：将您的函数名称更改为`correlativo`其他名称，它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:37:25.727

您有一个名为 的函数和一个变量`correlativo`。改变其中之一。

您还拥有`nuevoAjax`未在提供的代码中定义的内容。确保这是一个函数。不是变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:37:42.917

您一定缺少 nuevoAjax。

```
function nuevoAjax(){
    var xmlhttp=false;
    try {
        mlhttp = new ActiveXObject("Msxml2.XMLHTTP"); 
    } catch (e) {
        try {
            xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
        } catch (E) {
            xmlhttp = false;
        }
        }
    if (!xmlhttp && typeof XMLHttpRequest!='undefined') {
        xmlhttp = new XMLHttpRequest();
    }
    return xmlhttp;
}; 
```

# android - 活动从片段返回结果后从活动显示警报对话框

> ID：14510073
> 
> 赞同：0
> 
> 时间：2013-01-24T20:24:52.963
> 
> 标签：android

标题可能不是很清楚，用简短的标题很难解释。但问题就在这里。

我有一个活动，`MainActivity`然后在 start to show 时显示一个活动`FragmentA`。其中`MainActivity`显示了一个菜单，可通过 FragmentA 访问该菜单。从 FragmentA 的菜单中，用户单击 Generate Password，然后调用另一个`GeneratePassword`名为 using的活动`startActivityForResult`。当用户按下提交按钮时，用户将被发送回 FragmentA`onActivityResult`和`MainActivity`. 在这个函数中，我使用了一个通用类，它允许我显示一个带有是和否按钮的 AlertDialog。如果我取出 common.showYesNoDialog() if 语句，OnActivityResult 工作正常，但是在使用它时我得到一个异常

```
android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application 
```

下面是启动 GeneratePassword 活动的代码

```
Intent generatePasswrodIntent = new Intent(mMainActivity, GeneratePassword.class);
                startActivityForResult(generatePasswrodIntent, AddNewLogin.GENERATE_PASSWORD);
                return(true); 
```

下面是设置 GeneratePassword 活动结果的代码

```
Intent intent = new Intent();
        Bundle bundle = new Bundle();
        bundle.putString("password", generatePassword.generatePassword());
        intent.putExtras(bundle);
        setResult(AddNewLogin.GENERATE_PASSWORD, intent);
        finish(); 
```

下面是显示警报对话框的 onActivityResult 的代码

```
Bundle bundle = data.getExtras();

        String password = bundle.getString("password");
        Log.d("PASSWORD", password);
        if (common.showYesNoDialog("Your Generated Password Is:\n " + password + "\nDo you want to copy this to the clipboard?", false))
        {
            ClipboardManager clipboard = (ClipboardManager)getSystemService(CLIPBOARD_SERVICE);
            clipboard.setText(password);
        } 
```

下面是 YesNoDialog 函数，但我知道这很好用，因为我已经在我的应用程序中的多个地方使用它没有问题。

```
final Handler handler = new Handler()
        {
            @Override
            public void handleMessage(Message mesg)
            {
                throw new RuntimeException();
            }
        };
        AlertDialog.Builder builder = new AlertDialog.Builder(context);
        builder.setCancelable(isCancelable);
            builder.setMessage(message)
            .setPositiveButton("Yes", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    dialogResult = true;
                    handler.sendMessage(handler.obtainMessage());
                }
            })
            .setNegativeButton("No", new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int which) {
                    dialogResult = false;
                    handler.sendMessage(handler.obtainMessage());
                }
            });
        AlertDialog alert = builder.create();
        alert.show();
        try
        {
            Looper.loop();
        }
        catch (RuntimeException ex)
        {
            Log.d("Dialog Error", ex.toString());
        }
        return dialogResult; 
```

下面是我如何初始化公共类

```
Common common = new Common(getApplicationContext()); 
```

而不是getApplicationContext，我尝试使用`this`但没有任何区别。

我只是不明白这里发生了什么。

感谢您的任何帮助，您可以提供

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:38:35.467

问题出在你的`showYesNoDialog()`. showYesNoDialog() 方法的布尔参数有什么作用？

# java - 使用 soundPool 时，我的第一个声音循环其余的抛出状态 12

> ID：14510074
> 
> 赞同：1
> 
> 时间：2013-01-24T20:24:53.417
> 
> 标签：java, android, soundpool

当使用 soundPool 我的第一个声音循环时，其余的抛出状态 12 这里是代码

```
public SoundPool soundPool = new SoundPool(5, AudioManager.STREAM_MUSIC, 100);
public HashMap<Integer, Integer> soundsMap;

public int playSound(int sound, int loop) {
   if (curs != sound)
   {
   curs = sound;   
       AudioManager mgr = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
       float streamVolumeCurrent = mgr.getStreamVolume(AudioManager.STREAM_MUSIC);
       float streamVolumeMax = mgr.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
       float volume = streamVolumeCurrent / streamVolumeMax;  
       return soundPool.play(soundsMap.get(sound), volume, volume, 1, loop, 1);

     }else
   {
       return 0;
   }
 } 
```

只有当我将循环设置为 -1 时才会发生这种情况，它们是非常小的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T06:40:07.880

尝试使用带有 .ogg 格式的小文件（推荐），我还添加了 1 秒的睡眠时间以使其缓冲。如果没有缓冲并尝试播放，则基本上会出现内存不足

```
new Thread() {
            public void run() {

                try {
                    sleep(900);
                    mSoundManager.playSound(1);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            };
        }.start(); 
```

# macos - Gentoo 前缀中的 Emacs 没有接收到输入

> ID：14510078
> 
> 赞同：1
> 
> 时间：2013-01-24T20:25:01.920
> 
> 标签：macos, emacs, osx-mountain-lion, gentoo

我在 OS-X (10.8.2) 上的 Gentoo Prefix 安装中安装了 Emacs。Emacs 在终端 (-nw) 中启动时可以工作。但是，当没有选项启动时，虽然它创建了一个窗口，但它不会接收来自键盘的输入 - 输入会转到启动 emacs 的 shell。鼠标输入似乎没问题，但在屏幕顶部运行的应用程序菜单（与 emacs 窗口分开）仍然显示“终端”。

这是使用的选项列表（我没有触摸 USE 标志，所以这是默认设置）。我注意到'aqua' 为ON 而'X' 为OFF，这似乎是正确的（未安装X 服务器）。

```
~/Gentoo $ emerge -pv emacs

These are the packages that would be merged, in order:

Calculating dependencies... done!
[ebuild   R    ] app-editors/emacs-24.2:24::gentoo [24.2:24::gentoo_prefix] USE="aqua xpm 
    -X -Xaw3d (-alsa) -athena -dbus -games -gconf -gif -gnutls (-gpm) -gsettings -gtk -gtk3 
    -gzip-el (-hesiod) -imagemagick -jpeg -kerberos -libxml2 -livecd (-m17n-lib) -motif 
    -pax_kernel -png (-selinux) -sound -source -svg -tiff -toolkit-scroll-bars -wide-int 
    -xft" 0 kB

Total: 1 package (1 reinstall), Size of downloads: 0 kB
~/Gentoo $ 
```

我可以在打开“X”的情况下进行重建，但保留原生构建会很好。任何建议如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-27T11:24:30.050

我最近遇到了一个 gui 应用程序（OS X Snow Leopard 上的 SAGA GIS）从终端启动创建窗口但不生成 SAGA 应用程序菜单的问题。解决方案是将程序包装在“应用程序包”中，请参阅：

[在 Mac OS X 上编译 SAGA](http://sourceforge.net/apps/trac/saga-gis/wiki/Compiling%20SAGA%20on%20Mac%20OS%20X)

即使这样，SAGA 也不能完全使用。至于 emacs，我通过 macports 安装了 emacs-app 24.3.1（支持本机和 X 模式），但发现它有时会在询问“是或否”答案时忽略键盘输入——这是我唯一的方法发现recovery就是杀掉emacs进程。

# ruby - Nanoc - 在编译/自动编译期间跳过文件

> ID：14510089
> 
> 赞同：1
> 
> 时间：2013-01-24T20:25:52.083
> 
> 标签：ruby, erb, nanoc

我正在使用 Nanoc 构建一个站点，并拥有一个文件（带有它自己的布局文件），它可以读取所有其他文件的元数据，执行一些魔法并保存文件。不幸的是，这个过程需要很长时间，使用自动编译开发其他视图也需要很长时间。是否可以将一些文件添加到不会被排入编译的忽略列表（并在编译到生产期间将它们从忽略中删除）？还是有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:01:41.633

据我所知，nanoc 将始终从您的目录中读取所有数据。`preprocess`您可以通过实现删除一些生成的`items`条目的方法来从进一步处理中删除文件...例如`Rules`：

```
preprocess do
  skip_unimportant_items
end 
```

在 lib/ 中的 .rb 文件中：

```
def skip_unimportant_items
  @items.delete_if { |i| !i[:important] }
end 
```

`important`这将删除其各自元数据中没有元素（或元素设置为 false）的所有项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T08:58:30.863

您是否尝试过 Nanoc Doc 推荐：

```
ignore '/assets/layouts/your_files/*/' 
```

[http://nanoc.ws/doc/rules/](http://nanoc.ws/doc/rules/)

# javascript - 如何为 JavaScript 重定向和关闭添加延迟？

> ID：14510090
> 
> 赞同：0
> 
> 时间：2013-01-24T20:25:52.947
> 
> 标签：javascript, window

有谁知道如何在此脚本重定向并关闭窗口之前添加 5 秒延迟？

```
<script>
    window.opener.location = '/redirect.html';
    window.close();
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T20:27:19.500

使用[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)：

```
setTimeout(function() {
    window.opener.location = '/redirect.html';
    window.close();
}, 5000); 
```

它通过传入一个函数和一定的延迟来工作，以毫秒为单位。该函数将在延迟到期后调用。

# android - 在单个视图上设置样式不起作用

> ID：14510091
> 
> 赞同：1
> 
> 时间：2013-01-24T20:25:57.330
> 
> 标签：android, actionbarsherlock, android-theme

在我的一项活动中，我无法为个人视图设置主题。

在我的清单中的应用程序标签中设置主题非常有效，在清单中的活动标签中设置主题也是如此。

无论我是否在清单中设置了主题，如果我尝试在单个视图上设置主题：

```
<TextView
        android:id="@+id/userFullNameTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_marginTop="5dp"
        android:layout_toRightOf="@+id/profileImageView"
        android:text="Bobby Joe"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:theme="@style/Theme.Sherlock.Light" /> 
```

视图始终以默认主题（清单中未设置任何内容）或清单中指定的相同主题出现。

我没有在我的 xml 文件中的任何地方覆盖 Theme.Sherlock.Light 主题。我尝试了几种不同的主题组合，但无济于事。哦，我显然在使用 ActionBarSherlock。

**编辑**

如果我创建一个新样式：

```
<style name="SideMenuStyle" parent="Theme.Sherlock.Light" >
</style> 
```

并在我的 xml 中使用这种样式，它仍然没有显示正确的样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:06:11.147

没有`android:theme`为视图定义 xml 属性。您可以改用`style`xml 属性，但您必须引用视图的样式而不是整个主题。像这样使用它：

```
<TextView
    android:id="@+id/userFullNameTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_marginTop="5dp"
    android:layout_toRightOf="@+id/profileImageView"
    android:text="Bobby Joe"
    android:textAppearance="?android:attr/textAppearanceMedium"
    style="@style/MyTextViewStyle" /> 
```

请注意，您还可以为主题`TextView`范围内的所有实例或任何其他小部件定义默认主题。因为`TextView`这意味着`android:textViewStyle`在主题中定义：

```
<style name="MyTheme" parent="@style/Theme.Sherlock">
    <item name="android:textViewStyle">@style/MyTextViewStyle</item>
</style> 
```

# entity-framework - 实体框架 6 + SQLite

> ID：14510096
> 
> 赞同：12
> 
> 时间：2013-01-24T20:26:12.163
> 
> 标签：entity-framework, sqlite, ado.net, entity-framework-6

我正在尝试使用 EF6 alpha 和 SQLite 1.0.66.0

我的 .config 文件：

```
<connectionStrings>
   <add connectionString="data source=:memory:;" name="TestDbContext" providerName="System.Data.SQLite" />
</connectionStrings>
<entityFramework>
   <providers>
      <provider invariantName="System.Data.SQLite" type="System.Data.SQLite.SQLiteFactory, System.Data.SQLite, Version=1.0.66.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139" />
   </providers>
</entityFramework>
<runtime>
   <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
     <dependentAssembly>
        <assemblyIdentity name="EntityFramework" publicKeyToken="b77a5c561934e089" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-5.0.0.0" newVersion="5.0.0.0" />
     </dependentAssembly>
   </assemblyBinding>
</runtime>
<system.data>
  <DbProviderFactories>
     <remove invariant="System.Data.SQLite"/>
       <add name="SQLite Data Provider" invariant="System.Data.SQLite"
           description=".Net Framework Data Provider for SQLite"
           type="System.Data.SQLite.SQLiteFactory, System.Data.SQLite, Version=1.0.66.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139" />
  </DbProviderFactories>
</system.data> 
```

当我跑

```
using (var dbContext = new TestDbContext())
{
    if (dbContext.Database.Exists())
    {
        dbContext.Database.Delete();
    }
    dbContext.Database.Create();
} 
```

我收到一个错误：

> System.InvalidOperationException：System.InvalidOperationException：实体框架提供程序类型“System.Data.SQLite.SQLiteFactory，System.Data.SQLite，版本=1.0.66.0，文化=中性，PublicKeyToken=db937bc2d44ff139”的“实例”成员没有返回一个继承自“System.Data.Entity.Core.Common.DbProviderServices”的对象。实体框架提供者必须从此类扩展，并且“实例”成员必须返回提供者的单例实例。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-06-20T09:36:02.483

如果您使用 EF 6.1.3 + System.Data.SQLite v1.0.96.0，只需在 web.config 中调整（添加）以下声明。（你可以用一些文本比较工具找到不同之处，我已经给它们编号了）。

```
 <entityFramework>
        <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
            <parameters>
                <parameter value="mssqllocaldb" />
            </parameters>
        </defaultConnectionFactory>
        <providers>
            <provider invariantName="System.Data.SqlClient" type="System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer" />
            <provider invariantName="System.Data.SQLite.EF6" type="System.Data.SQLite.EF6.SQLiteProviderServices, System.Data.SQLite.EF6" /> 

            <!-- 1\. Solves SQLite error of "Unable to find the requested .Net Framework Data Provider."-->
            <provider invariantName="System.Data.SQLite" type="System.Data.SQLite.EF6.SQLiteProviderServices, System.Data.SQLite.EF6" />

        </providers>
    </entityFramework>
    <system.data>
        <DbProviderFactories>
            <remove invariant="System.Data.SQLite.EF6" />
            <add name="SQLite Data Provider (Entity Framework 6)" invariant="System.Data.SQLite.EF6" description=".NET Framework Data Provider for SQLite (Entity Framework 6)" type="System.Data.SQLite.EF6.SQLiteProviderFactory, System.Data.SQLite.EF6" /> 

            <!-- 2\. Solves SQLite error of "Unable to find the requested .Net Framework Data Provider."-->
            <remove invariant="System.Data.SQLite"/>
            <add name="SQLite Data Provider" invariant="System.Data.SQLite"
                description=".Net Framework Data Provider for SQLite" type="System.Data.SQLite.SQLiteFactory, System.Data.SQLite" />

        </DbProviderFactories>
    </system.data> 
```

这个对我有用。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-24T21:38:09.040

System.Data.SQLite 实体框架提供程序需要更新才能与实体框架的版本 6 一起使用。（请参阅[为 EF6 重建 EF 提供程序](http://entityframework.codeplex.com/wikipage?title=Rebuilding%20EF%20providers%20for%20EF6)）

对于 SQLite，这是一个相当简单的任务：

1.  下载并打开 System.Data.SQLite.Linq 项目
2.  删除对 System.Data.Entity.dll 的引用
3.  添加对 EntityFramework.dll 版本 6 的引用
4.  更新损坏的命名空间引用
5.  重建提供者

**2013 年 6 月 21 日更新：** 我在我的博客上分享了提供程序的更新版本。有关更多信息，请参阅[实体框架 6 上的 System.Data.SQLite 。](http://brice-lambson.blogspot.com/2013/06/systemdatasqlite-on-entity-framework-6.html)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-03-07T15:11:09.097

我将带有 Sqlite 的 EF 6.0 的工作解决方案放在我的 Bitbucket 帐户上：[https://zchpit@bitbucket.org/zchpit/sqlitesamples.git](https://zchpit@bitbucket.org/zchpit/sqlitesamples.git)

或 git [https://github.com/zchpit/SQLiteSamples](https://github.com/zchpit/SQLiteSamples)

您可以从该 git 存储库下载工作解决方案。在我的解决方案中，我通过以下方式连接到 Sqlite：

*   数据阅读器
*   简单数据
*   英孚 6.0

ps 我的 App.config

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="true" />
  </configSections>
  <startup useLegacyV2RuntimeActivationPolicy="true">
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0,Profile=Client" />
  </startup>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Data.SQLite" publicKeyToken="db937bc2d44ff139" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-1.0.96.0" newVersion="1.0.96.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
  <system.data>
    <DbProviderFactories>
      <remove invariant="System.Data.SQLite.EF6" />
      <add name="SQLite Data Provider" invariant="System.Data.SQLite" description="Data Provider for SQLite" type="System.Data.SQLite.SQLiteFactory, System.Data.SQLite" />
    </DbProviderFactories>
  </system.data>
  <connectionStrings>
    <add name="SqlLiteContext" connectionString="Data Source=|DataDirectory|MyDatabase.sqlite" providerName="System.Data.SQLite" />
  </connectionStrings>
  <entityFramework>
    <providers>
      <provider invariantName="System.Data.SQLite" type="System.Data.SQLite.EF6.SQLiteProviderServices, System.Data.SQLite.EF6"/>
    </providers>
    <defaultConnectionFactory type="System.Data.SQLite.SQLiteFactory, EntityFramework">
      <parameters>
        <!---parameter value="v11.0" />-->
      </parameters>
    </defaultConnectionFactory>
  </entityFramework>
</configuration> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-15T08:20:54.577

System.Data.SQLite 1.0.91.0 已更新以支持 EF6。非常感谢 Brice 的 EF SQLite 优秀教程和更新。如果您希望它与本教程一起使用，您需要更新您的 app.config 以进行新更改。我可以确认这在 VS 2010 上对我有用：

```
<?xml version="1.0"?>
<configuration>
<configSections>
<!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
<section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false"/>
</configSections>
<entityFramework>
<defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
  <parameters>
    <parameter value="v11.0"/>
  </parameters>
</defaultConnectionFactory>
<providers>
  <provider invariantName="System.Data.SQLite" type="System.Data.SQLite.EF6.SQLiteProviderServices, System.Data.SQLite.EF6, Version=1.0.91.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139" />
</providers>
</entityFramework>
<system.data>
<DbProviderFactories>
  <remove invariant="System.Data.SQLite" />
  <add name="SQLite Data Provider" invariant="System.Data.SQLite" description=".Net Framework Data Provider for SQLite" type="System.Data.SQLite.SQLiteFactory, System.Data.SQLite, Version=1.0.91.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139" />
</DbProviderFactories>
</system.data>
<connectionStrings>
<add name="ChinookContext" connectionString="Data Source=|DataDirectory|Chinook_Sqlite_AutoIncrementPKs.sqlite" providerName="System.Data.SQLite"/>
</connectionStrings>
</configuration> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-21T12:08:34.223

重新安装 NuGet 包（System.Data.SQLite 版本 1.0.94.1）时，异常消失了

> 更新包——重新安装 System.Data.SQLite

# javascript - Jquery 文件上传和 Backbone 的上下文

> ID：14510100
> 
> 赞同：0
> 
> 时间：2013-01-24T20:26:34.517
> 
> 标签：javascript, jquery, backbone.js, coffeescript, jquery-file-upload

我遇到了 jquery-file-upload 和 Backbone 的上下文问题。在 fileupload 'done' 回调中，我想调用 Backbone 视图中定义的另一个函数，但我丢失了上下文。

```
class MyBackboneView extends Backbone.view

    initialize_fileupload: ->
        $('form#my_form').fileupload
            done: (e, data) ->
                this.some_function()

    some_function: ->
        ... 
```

浏览器控制台中返回的错误是“Uncaught TypeError: Object # has no method 'some_function'”，因为“this”不再指代 Backbone 视图，而是指 jquery 表单元素。

有没有办法从回调中访问视图中的该函数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T20:52:23.933

每个函数 ( `->`) 都有自己的上下文 ( `this`)。这包括`done: (e, data) -> ...`，以及`initialize_fileupload: -> ...`。而且，在这种情况下，它们每个都有自己的上下文值，所以`this.some_function()`不引用你的`view`.

因此，您必须定义`done`以保留周围的上下文 (the `view`)。这可以在 CoffeeScript 中通过使用“[胖箭头](http://coffeescript.org/#fat_arrow)”（`=>`）来定义来完成：

```
initialize_fileupload: ->
    $('form#my_form').fileupload
        done: (e, data) =>
            this.some_function() 
```

也可以通过将上下文值存储在作用域变量中来完成：

```
initialize_fileupload: ->
    thisView = this
    $('form#my_form').fileupload
        done: (e, data) ->
            thisView.some_function() 
```

或者通过[将函数绑定](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)到周围的上下文：

```
initialize_fileupload: ->
    $('form#my_form').fileupload
        done: ((e, data) ->
            this.some_function()
        ).bind(this) 
```

# c# - 创建通用类 C#

> ID：14510104
> 
> 赞同：2
> 
> 时间：2013-01-24T20:26:57.050
> 
> 标签：c#, c#-4.0, generics

我正在为实体列表开发一个存储库，我应该多次重复同一个类，唯一的区别是类型类型..有没有办法让它通用？

它应该很容易，当然我不知道如何使这个通用：

```
 private Namespace.DAL.UserProfileRepository _rep = new Namespace.DAL.UserProfileRepository(); 
```

我正在重复这个课程：

```
public class UserProfileRepository : IEntityRepository<IUserProfile>
{
   private Namespace.DAL.UserProfileRepository _rep = new Namespace.DAL.UserProfileRepository();

   public IUserProfile[] GetAll()
   {
     return _rep.GetAll();
   }

   public IUserProfile GetById(int id)
   {
     return _rep.GetById(id);
   }

   public IQueryable<IUserProfile> Query(Expression<Func<IUserProfile, bool>> filter)
   {
     return _rep.Query(filter);
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:58:05.183

@NickBray 一针见血。无论实际的具体存储库实现有多么不同或相似`DAL`，您的示例中的类都应该通过接口公开存储库实例。

理想情况下，公开的接口将被声明为这样。

```
interface IUserProfileRepository : IEntityRepository<IUserProfile>
{
} 
```

这样，您可以`IUserProfile`根据需要添加自定义方法。而`IEntityRepository`接口将定义常用方法`Add`、、`Update`和`Remove`各种`QueryXXX`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:12:07.900

我希望这个例子对你有帮助。如果我正确理解了您的问题，您希望基于“IEntityRepository”接口使您的存储库可生成。

尝试这样的事情：

```
 public class UserProfileRepository<TUserProfile> : IEntityRepository<TUserProfile> where TUserProfile : IUserProfile
    {
       private Namespace.DAL.UserProfileRepository _rep = new Namespace.DAL.UserProfileRepository();

       public TUserProfile[] GetAll()
       {
         return _rep.GetAll();
       }

       public TUserProfile GetById(int id)
       {
         return _rep.GetById(id);
       }

       public IQueryable<TUserProfile> Query(Expression<Func<TUserProfile, bool>> filter)
       {
         return _rep.Query(filter);
       }
    } 
```

# selenium - 使用 Selenium 自动测试 Web 应用程序

> ID：14510110
> 
> 赞同：0
> 
> 时间：2013-01-24T20:27:12.843
> 
> 标签：selenium, selenium-webdriver

有没有什么工具可以用来设置自动运行，我正在盯着看，我找到了 selenium 测试运行器？有这么多工具，很难弄清楚哪个是最好的

我正在使用 C# 并使用 MSTest 作为测试框架，我期待着看看我是否可以从 MSTEST 中的测试中获得一种方法

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:24:15.337

这是一个非常主观的问题。每个要求都有自己的正确答案。无论如何，我会尽量满足一些要求，并且会随着我了解更多而更新。

如果您正在自动化 Web 应用程序浏览器测试（没有 flash 播放器和 silverlight），我会说 selenium 是要走的路。还有一些方法可以自动化闪光灯和银光，但这是另一个问题的答案。

Selenium 无论如何也是一种自动化，您的选择将是选择哪个测试框架。所以这里有几个选项：

**1.与CI工具集成：**

如果您想将您的测试组织为独立的原子单元，并希望将它们集成到某些 CI 服务器（例如 TeamCity）。我会推荐使用[NUnit](http://www.nunit.org/)来运行你的 selenium 测试。

**2\. 行为测试**

这是软件开发和我们如何测试产品的新趋势。使用行为（即业务规范）之类的语言。根据我的经验，编写验收测试也是一种非常好的格式。您可以将硒与[Nbehave](http://nbehave.org/)或[SpecFlow之类的东西一起使用](http://www.specflow.org/specflownew/)

**3.集中测试管理和执行**

现在这可能并不适合所有人，但我发现[FitNesse](http://www.syterra.com/FitSharp.html)（及其 c# 绑定）在维护和执行 selenium 测试用例方面非常有用。

请注意，鉴于问题的范围，此答案可能不正确，并且肯定不完整。尽管如此，我还是尝试提供一些指示。

# c - 尝试使用扑克游戏的冒泡排序方法对 C 中的值进行排序

> ID：14510114
> 
> 赞同：0
> 
> 时间：2013-01-24T20:27:15.797
> 
> 标签：c, sorting, gcc, poker

所以我创建了一个（主要是工作的）扑克手牌计分表，我目前唯一遇到的问题是我需要对卡片的值进行排序，以便正确识别顺子或类似牌。

目前，我的程序返回要显示已排序整数数量的外键。

我当前的输入：6D 7D 9D 8C 5D

我当前的输出：

```
 Six of diamonds
  Seven of diamonds 
  Nine of diamonds 
  Eight of clubs 
  Five of diamonds 
  � <--- (This is where I have told it to display the Numbers in order)
  High Card! 1 point. 
```

基本上我知道我的得分是正确的，只是排序不起作用。

我的代码

```
 #include <stdio.h>

int main( void )
{
 char cardval[10] = {'\0'}, count;
 char maincard[2] = {'\0'};
 int intval[5], i;
 int tempval;
 int dupecount = 0;
 int suitcount = 0;
 int a;

 for(count=0;count<10;count++)
 {   
  scanf(" %c", &(cardval[count] ) );
  scanf(" %d", &(intval[i]) );
  i++;
  count++;
  scanf(" %c", &(cardval[count] ) );

  strcpy( maincard, &cardval[count-1] );
  strcat( maincard, &cardval[count] ); 
  switch (maincard[0])
  {
   case '2':
      printf ( "Two of ");
   break;
   case '3':
      printf ( "Three of ");
   break;
   case '4':
      printf ( "Four of ");
   break;
   case '5':
      printf ( "Five of ");
   break;
   case '6':
      printf ( "Six of ");
   break;
   case '7':
      printf ( "Seven of ");
   break;
   case '8':
      printf ( "Eight of ");
   break;
   case '9':
      printf ( "Nine of ");;
   break;  
   case 'J':
      printf( "Jack of ");
   break;
   case 'Q':
      printf( "Queen of ");
   break;
   case 'K':
      printf( "King of ");;
   break;
   case '0':
      printf( "Ten of ");
   break;
   case 'A':
      printf( "Ace of ");
   break;
   default:
      printf( "\n %c is an incorrect input, please enter a number 0, 2-9, A,K,Q,J", maincard[0]);
      return 0;
   break;
  } 
  switch (maincard[1])
  {
   case 'D':
      printf( "diamonds");
   break;
   case 'S':
      printf( "spades");
   break;
   case 'H':
      printf( "hearts");
   break;
   case 'C':
      printf( "clubs");
   break;
   default:
      printf( "\n %c is an incorrect input, please enter D, S, H, or C as a suit", maincard[1]);
      return 0;
   break;
  }
  printf ("\n");
 }
 for ( a=0; a<5; a++ )
 {
  for ( i=0; i<5-1; i++)
   {
     if ( intval[i] > intval[i+1])
      {
       tempval = intval[i];
       intval[i] = intval[i+1];
       intval[i+1] = tempval;
       tempval = intval [i];
      }
  }
}
printf("%c", intval); 
```

我的代码排序部分有什么问题？似乎没有正确记录 intval。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:30:26.440

`intval`是一个 5 个整数的数组。所以以下是错误的：

```
printf("%c", intval); 
```

要打印数组，请使用循环：

```
for(i=0;i<5;i++)
printf("%d ", intval[i]); 
```

* * *

`i``intval[i]`使用 scanf阅读时未初始化。

```
 scanf(" %d", &(intval[i]) ); 
```

将其初始化为 0。

```
int intval[5], i = 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:33:49.817

尝试这个。

```
if ( intval[i] > intval[i+1])
  {
   tempval = intval[i+1];
   intval[i+1] = intval[i];
   intval[i]=tempval; 
  } 
```

# .net - 实体框架 - 在 Win Form App 中接受对象更改（算法）

> ID：14510116
> 
> 赞同：0
> 
> 时间：2013-01-24T20:27:21.123
> 
> 标签：.net, algorithm, entity-framework

全部，

我正在尝试一种方法（算法），将实体对象列表传递给我的 UI（Win 表单应用程序）中的表单进行编辑（比如在网格中 - 这与此无关 - 这是我想要的概念建立）。表单，比如说它被命名为 FormEdit，有一个 OK、Cancel 和 Apply 按钮。

例如，我的实体具有以下层次结构：

```
Class Entity1
   ...
   Entity2List As EntityCollection(Of Entity2)
   ...
End Class 

Class Entity2
    ...
    SomeValue As String   ' This would be a field in my entity mapping to the database
    ... 
```

它是我要在 FormEdit 中编辑的 Entity2List。

FormEdit 将从我的主窗体触发，该主窗体将传入 Entity2List。主窗体中将有一个保存按钮，它将执行 context.SaveChanges()。主窗体将执行初始加载。

单击“确定”后，任何更改都将保留，并且 FormEdit 将关闭。单击应用时，应保留任何更改。单击取消时，我想忽略在 FormEdit 中所做的任何编辑并将其关闭，以便 Entity1.Entity2List 在加载 FormEdit 时处于初始状态（除非单击应用 - 请参见下面的场景）。

现在，我可以多次进入 FormEdit，因此所做的任何更改都需要在该表单的范围内。因此，假设我执行以下操作，给定以下初始状态：

Entity1 中有一个记录/行/对象。Entity1.Entity2List 包含 2 个记录/行/对象，具有以下内容：

```
Record1:  SomeValue = 33
Record2:  SomeValue = 10 
```

**方案 1**

1.  启动应用程序 - 加载到主窗体中的实体。
2.  单击编辑按钮以触发以 Entity1(Instance).Entity2List 作为参数的 FormEdit 的显示。
3.  向网格添加一个新行，这反过来又向 Entity1.Entity2List 添加一行。
4.  修改 Record1，将 SomeValue 从 33 改为 100。
5.  单击取消。这应该将 Entity1.Entity2List 返回到它的初始状态。

**方案 2**

1.  启动应用程序 - 加载到主窗体中的实体。
2.  单击编辑按钮以触发以 Entity1(Instance).Entity2List 作为参数的 FormEdit 的显示。
3.  修改 Record1，将 SomeValue 从 33 改为 100。
4.  单击应用。
5.  修改 Record1，将 SomeValue 从 100 更改为 -9。
6.  单击取消。这将恢复在步骤 5 中所做的更改。在单击应用时将记住在步骤 3 中所做的更改。

我需要某种机制来跟踪这样的变化。单击确定/应用时，将对我的上下文中的对象进行更改。

有什么方法可以做到这一点？欢迎所有想法和建议。

干杯，

安德斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:04:49.320

如果您要打开第二个表单以编辑出现在第一个表单的列表中的单个实体的集合，那么我会考虑每次为 FormEdit 使用新的上下文。如果每个实体的 Entity2 集合从未在第一个表单上显示或与之交互，那么我认为使用单个上下文没有任何优势。事实上，[随着越来越多的实体被添加到集合中，对两种表单使用单一上下文会增加内存消耗，增加并发问题的机会，并增加应用程序的不稳定性](http://msdn.microsoft.com/en-us/data/jj729737)。

使用第二个上下文可以很容易地通过调用来取消更改`context.Dispose()`。否则，您将不得不遍历`DbEntityEntry`上下文更改跟踪器中的所有对象并设置`CurrentValues`回`OriginalValues`，丢弃您可能添加的任何新 entity2 对象并更改任何已删除 entity2 对象的状态。Apply 和 Ok 按钮只需要调用`context.SaveChanges()`单独的上下文。

如果您需要在两个表单上同步实体状态，您可以查看分离实体并将它们添加到您正在处理的相关上下文中，或者在 form2 关闭后简单地在 form1 上重新加载实体。

# java - Java .hasNextInt() 不匹配异常

> ID：14510119
> 
> 赞同：0
> 
> 时间：2013-01-24T20:27:32.220
> 
> 标签：java

我有一个格式如下的 .txt 文件

```
The Shawshank Redemption 
100 
19.95 
DVD 
```

还有更多行，但我试图将这些值存储到四个不同的 ArrayList 中。问题是得到错误 java.util.InputMismatchException。这是我的代码：

```
while(list.hasNext() && !list.nextLine().equals("")){
                titleList.add(list.nextLine());
                quantityList.add(list.nextInt());       
                priceList.add(list.nextDouble());
                typeList.add(list.nextLine());          
            } 
```

程序在quantityList.add(list.nextInt())处崩溃；告诉我下一行不是和 int，给了我那个错误。如果我使用 nextLine()，它会读取它。任何人都可以给我的任何提示都会非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:29:57.940

您已经阅读了 while 语句中的第一行：-

```
while(list.hasNext() && !list.nextLine().equals("")) 
```

然后，当您再次`nextLine`第一次调用时，您实际上是在读取整数 (100)，使用`list.nextLine`这就是您得到该异常的原因。因为您现在可能正在将 a 存储`String`在`Integer List`. 只需从`while`.

第二个问题是，您只检查`list.hasNext()`过一次，然后您正在阅读`4 inputs`。如果您没有输入，那可能会再次引发异常。因此，您还需要注意这一点。

您将遇到的另一个问题是由于使用了`list.nextInt()`and `list.nextDouble()`。请记住，这些方法读取输入直到最后的`newline`字符。因此，读取后留下的换行符将被读取`method`输入的以下调用读取，如果没有消耗。因此，您还需要`list.next()`在这两个方法之后添加一个空调用，以使用`newline`, 以便used after`newline`不会读取，否则您将继续收到异常。`list.nextDouble()``list.nextInt()`

* * *

除了这些问题，我建议您创建一个`Class`存储这些属性的对象，并拥有`List`该类的对象，而不是拥有 4 个不同的列表。

# xcode - nstableview 中的安全文本字段

> ID：14510122
> 
> 赞同：0
> 
> 时间：2013-01-24T20:27:33.407
> 
> 标签：xcode, security, textbox, nstableview

首先，可以说我搜索了相当多的答案，但无法找到答案。

我有一个 nstableview，有 5 列，全部带有文本字段单元格。其中一列是密码列。我希望此列隐藏键入的字符。那怎么办？我通过谷歌搜索找到的唯一方法是插入“图像和文本单元格视图”，删除图片和文本框并输入安全文本框。但我不喜欢这个选项，因为密码列看起来与其他列不同，如果可能的话，我想保留普通 nstableview 的默认外观。

这可能吗？如果是，如何？

谢谢！

伊戈尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:33:32.873

打开你的 .xib 文件

在您的 TableView 中选择要更改为“密码”样式的文本单元格

转到身份检查员

在“类”字段中，将 NSTextFieldCell 替换为 NSSecureTextFieldCell

而已 ：）

# python - 在 python 2.7.3 中完美工作，但在 python 3 中出错

> ID：14510133
> 
> 赞同：-4
> 
> 时间：2013-01-24T20:28:16.550
> 
> 标签：python, python-3.x

因此，当我使用命令 ./randline.py test.txt 在 python 2.7.3 中运行此代码时，此代码可以正常工作。但是，当我尝试在 python 3 中运行此代码时，我收到一条错误消息“/usr/bin/python：无法打开文件 '3'：[Errno 2] 没有这样的文件或目录”

```
import random, sys
 from optparse import OptionParser

class randline:
   def __init__(self, filename):
       f = open(filename, 'r')
       self.lines = f.readlines()
       f.close()

   def chooseline(self):
       return random.choice(self.lines)

def main():
   version_msg = "%prog 2.0"
   usage_msg = """%prog [OPTION]... FILE

Output randomly selected lines from FILE."""

   parser = OptionParser(version=version_msg,
                      usage=usage_msg)
   parser.add_option("-n", "--numlines",
                  action="store", dest="numlines", default=1,
                  help="output NUMLINES lines (default 1)")
   options, args = parser.parse_args(sys.argv[1:])

   try:
       numlines = int(options.numlines)
   except:
       parser.error("invalid NUMLINES: {0}".
                    format(options.numlines))
   if numlines < 0:
       parser.error("negative count: {0}".
                 format(numlines))
   if len(args) != 1:
       parser.error("wrong number of operands")
   input_file = args[0]

   try:
       generator = randline(input_file)
       for index in range(numlines):
           sys.stdout.write(generator.chooseline())
   except IOError as (errno, strerror):
       parser.error("I/O error({0}): {1}".
                    format(errno, strerror))

if __name__ == "__main__":
     main() 
```

python 3解释器的这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T20:33:37.363

看起来你正在跑步`python 3`（有空格）。你应该`python3`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:27:40.383

由于 python2.7.3 和 python3.* 具有不同的语法，因此代码使用 python2.7.3 工作，然后可能无法使用 python3.* 工作。例如

**print 'hello world'**
使用 python2.7.3 工作，但使用 python3.* 收到错误。要运行它，我们必须使用**print('Hello world')**

所以只需将语法更改为 python3.* 格式。但我的建议是使用 python2.7.3 来运行你的代码。

# webdriver - 单击链接后 Click() 方法不返回

> ID：14510135
> 
> 赞同：0
> 
> 时间：2013-01-24T20:28:19.093
> 
> 标签：webdriver, selenium-webdriver

我有一个在我的页面上正确找到的 Web 元素（链接）。

`<a onclick="javascript:doPostDMS('en-us'); return false;" id="btnPentana" title="Post To DMS" class="shelf-button lnkPostToDMS" href="javascript:__doPostBack('btnPentana','')"></a>`

我遇到的问题是当我执行单击时，单击按钮，打开一个新的浏览器窗口（这告诉我我确实单击了），但是单击方法没有返回并且测试挂起。

使用以下代码：

`Console.WriteLine("Before");`

`element.Click();`

`Console.WriteLine("After");`

我看到写入控制台的 Before 语句。我看到新窗口打开（单击链接的结果）。我没有看到“之后”。

我正在使用 Selenium DotNet，2.29.1 我已经尝试过使用 Chrome 和 Firefox 浏览器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:07:24.380

我唯一能想到的尝试是为/单击添加超时功能，然后捕获错误。我知道点击可能有问题。

# c++ - 如何使用 C++ 以编程方式检测 Mac 上的串行端口？

> ID：14510137
> 
> 赞同：1
> 
> 时间：2013-01-24T20:28:28.573
> 
> 标签：c++, macos, serial-port, detect

> **可能重复：**
> [MacOS：以编程方式查找串行端口？](https://stackoverflow.com/questions/8632558/macos-programmatically-finding-serial-ports)

我正在尝试使用 C++ 以编程方式检测 Mac 上的串行端口（设备）。我找到的示例都假设您知道设备名称。例如：

```
int d = open("/dev/tty.usbserial-A4001nU7", O_RDWR | O_NOCTTY | O_NDELAY); 
```

通常推荐的方法是在终端命令行中使用 ls /dev/tty.* 或 ls /dev/cu.*。但我需要以编程方式执行此操作。非常感谢所有帮助。

# perl - 在 Perl 中解析巨大的文本文件

> ID：14510146
> 
> 赞同：0
> 
> 时间：2013-01-24T20:29:12.353
> 
> 标签：perl, parsing

我有大约 30 GB 的基因组文件，如下所示，

```
>2RHet assembled 2006-03-27 md5sum:88c0ac39ebe4d9ef5a8f58cd746c9810
GAGAGGTGTGGAGAGGAGAGGAGAGGAGTGGTGAGGAGAGGAGAGGTGAG
GAGAGGAGAGGAGAGGAGAGGAATGGAGAGGAGAGGAGTCGAGAGGAGAG
GAGAGGAGTGGTGAGGAGAGGAGAGGAGTGGAGAGGAGACGTGAGGAGTG
GAGAGGAGAGTAGTGGAGAGGAGTGGAGAGGAGAGGAGAGGAGAGGACGG
ATTGTGTTGAGGACGGATTGTGTTACACTGATCGATGGCCGAGAACGAAC 
```

我正在尝试解析文件并快速完成我的任务，逐个字符地使用下面的代码，但字符没有被打印出来

```
open (FH,"<:raw",'genome.txt') or die "cant open the file $!\n";

until ( eof(FH) ) {

$ch = getc(FH);
print "$ch\n";# not printing ch

}
close FH; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:48:27.373

你的错误是忘记了`eof`：

```
until (eof FH) { ... } 
```

但这*不太*可能是最有效的解决方案：Perl 比……C 慢，所以我们希望循环迭代尽可能少，并且在 perl 内部完成尽可能多的工作。这意味着逐字符读取文件速度很*慢*。

另外，使用词法变量（用 声明`my`）而不是全局变量；这可以提高性能。

要么选择一个自然的记录分隔符（如`\n`），要么读取一定数量的字节：

```
local $/ = \256; # read 256 bytes at a time.
while (<FH>) {
  # do something with the bytes
} 
```

（见[perlvar](http://perldoc.perl.org/perlvar.html#%24INPUT_RECORD_SEPARATOR)）

你也可以摆脱所有的奢侈品`open`，`readline`甚至`getc`为你做的，使用`sysopen`和`sysread`完全控制。然而，这种方式是疯狂的。

```
# not tested; I will *not* use sysread.
use Fcntl;
use constant NUM_OF_CHARS => 1; # equivalent to getc; set higher maybe.
sysopen FH, "genome.txt", O_RDONLY or die;

my $char;
while (sysread FH, $char, NUM_OF_CHARS, 0) {
  print($char .= "\n");  # appending should be better than concatenation.
} 
```

如果我们走了那么远，使用[Inline::C](https://metacpan.org/module/SISYPHUS/Inline-0.51/C/C.pod)只是一个小步骤，可能更可取。

# c++ - 用于表示偏序的 C/C++ 图形接口

> ID：14510148
> 
> 赞同：0
> 
> 时间：2013-01-24T20:29:26.317
> 
> 标签：c++, directed-acyclic-graphs, partial-ordering

在我的代码中，我使用了一个表示有向无环图的类。我自己写了代码，并不难。但后来我意识到我的应用程序有更多的要求：图必须是传递减少的，即偏序的唯一表示。每次用户在图形的可视 GUI 表示上进行拖放或剪切/复制/粘贴时，都必须对其进行验证并适应此要求。现在事情变得更加复杂了。所以我确实计划了如何安全地执行所有图形操作等，但在我真正深入研究代码之前，我想知道：

是否有用于部分订单的已知 C/C++ 接口？（最好是 C++）

我发现了很多图形库，但我已经有了简单的非循环有向图代码。我找不到任何专门处理传递减少图的东西（我不需要邻接矩阵，数据来自用户，所以在这里效率低下......这是用户数据的小图，而不是用于数学用途）

我正在寻找一个接口，它可以自动检测不必要的连接并删除它们，进行测试以查看节点复制/移动操作是否按偏序有效，即保留偏序的属性等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:50:53.153

据我所知，通常程序在用于非数学目的时都有自己的图形类。发生这种情况是因为图可能比 STL 容器（向量、列表等）等线性容器复杂得多。

由于您在数学或算法领域没有任何特殊需求（在您的情况下，搜索算法将是一个简单的循环，在大多数情况下您不需要更多，当然在（过早） 优化）。如果你这样做了，你就有了 boost::graph，但我怀疑它会使事情复杂化，而不是帮助你。

所以我说，写一个好的图/节点类，如果它足够好并且为通用目的而编写，我们都可以从中受益。没有人回答这个问题，因为实际上没有符合您需求的现有公共代码。一次编写好的自由代码，然后它就可以在任何地方使用。祝你好运。

PS 你自己的搜索算法可能比为通用图形库编写的算法快得多，例如 boost::graph，因为你可以利用特定图形的已知限制和规则，从而使搜索速度更快。例如，在传递约简图中，如果 A 是 B 的父级，则 A 不能也将 b 作为非子后裔（例如孙子），因此您可以使用此知识优化搜索。您付出的代价是在更改图表时进行大量测试，但您会获得很多回报，因为搜索/扫描可以变得更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:12:20.583

我建议添加一个偏序验证方法。进行编辑时，制作整个图表的副本，将编辑应用于一个副本，然后对其进行验证。如果通过，保留修改后的副本。如果没有通过，请恢复到保存的副本。

也许验证器可以找到所有底部节点，为每个节点构建一组其祖先（或后代，如果你这样称呼它们）并检查重复条目。如果您只期望小图，我会恢复搜索的递归。

# c# - EF5 和简单成员资格的数据库初始化问题

> ID：14510150
> 
> 赞同：1
> 
> 时间：2013-01-24T20:29:35.177
> 
> 标签：c#, .net, asp.net-mvc-4, entity-framework-5, simplemembership

我的 global.asax 文件中有两个数据库初始化程序。

一个，它应该使用相关表创建我的数据库，第二个它初始化简单成员资格所需的所有表。

我遇到的问题是应该创建我的数据库的第一个初始化方法没有做任何事情（至少看起来是这样）。简单的成员初始化程序工作正常。

我想从我的上下文创建的表只有在我的存储库类中创建上下文的新实例时才会创建。然后这会失败，因为它试图创建一个已经存在的用户配置文件表，因为`WebSecurity.InitialiseDatabaseConnection`初始化程序已经创建了它？

关于为什么在存储库方法中创建上下文之前不执行第一个数据库初始化程序的任何想法？

该数据库是 SQL Server LocalDB。

这是我的`Application_Start`方法`Global.asax.cs`：

```
protected void Application_Start()
{
    Database.SetInitializer(new MigrateDatabaseToLatestVersion<MyContext, Configuration>());
    WebSecurity.InitializeDatabaseConnection("MyDb", "UserProfile", "UserId", "UserName", autoCreateTables: true);

    AreaRegistration.RegisterAllAreas();

    WebApiConfig.Register(GlobalConfiguration.Configuration);
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    BundleConfig.RegisterBundles(BundleTable.Bundles);
    AuthConfig.RegisterAuth();

    ViewEngines.Engines.Clear();
    ViewEngines.Engines.Add(new RazorViewEngine());
} 
```

这是上下文类：

```
public class MyContext : DbContext
{
    public MyContext()
        : base("name=MyDb")
    {

    }

    public DbSet<MyEntity> myEntity{ get; set; }
    public DbSet<UserProfile> UserProfiles { get; set; }

} 
```

这是存储库方法：

```
using (var db = new MyContext())
{

    var user = _userRepository.GetUserByUserName(userName);

    db.UserProfiles.Attach(user);

    if (rack.Id == 0)
    {
        rack.DateAdded = DateTime.Now;
        rack.AddedBy = user;

        db.MyEntity.Attach(rack);
        db.Entry(rack).State = EntityState.Added;
        db.SaveChanges();
    }
    else
    {
        db.MyEntity.Attach(rack);
        db.Entry(rack).State = EntityState.Modified;
        db.SaveChanges();
    }
} 
```

**编辑：** 我已将 SimpleMembership 初始化程序移至我的配置类的种子方法，如下所示，虽然这解决了以正确顺序创建表的问题，但我仍然不知道为什么数据库没有得到在`Application_Start`方法中调用初始化程序时初始化

```
protected override void Seed(RackTrackContext context)
    {
        WebSecurity.InitializeDatabaseConnection("MyDb", "UserProfile", "UserId", "UserName", autoCreateTables: true);

        if (!Roles.RoleExists("Administrator"))
            Roles.CreateRole("Administrator");

        if (!WebSecurity.UserExists("User1"))
            WebSecurity.CreateUserAndAccount(
                "User1",
                "CodeMonkey"
                );

        if (!Roles.GetRolesForUser("User1").Contains("Administrator"))
            Roles.AddUsersToRoles(new[] { "User1" }, new[] { "Administrator" });
    } 
```

**编辑二：**

为了让它工作，我在 Application_start 方法中创建了一个新的上下文，并从数据库中检索了一个结果。然后在我希望应用它们的阶段应用迁移。

它很乱，很丑陋，也不会赢得任何奖项，但是嘿，它很管用，而且这样做时没有动物受到伤害，所以就这样吧。

```
 protected void Application_Start()
    {
        Database.SetInitializer(new MigrateDatabaseToLatestVersion<MyContext, Configuration>());

        //this code is here to ensure that the context is created and migrations applied,
        //prior to the user seeing the start screen for the app. Must be a better way of doing it....
        using (var db = new MyContext())
        {
            var results = db.MyEntity.FirstOrDefault();
        } 
```

如果有人能告诉我更好的方法，有一些代表可供抢夺！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T13:58:51.727

代替

```
 using (var db = new MyContext())
    {
        var results = db.MyEntity.FirstOrDefault();
    } 
```

尝试

```
new MyContext().Database.Initialize(false)
if (!WebSecurity.Initialized)
    WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

# scala - mapValues 如何在 Scala 中转换为并行集合

> ID：14510151
> 
> 赞同：1
> 
> 时间：2013-01-24T20:29:35.943
> 
> 标签：scala

我正在尝试在我分组的集合中进行简单的聚合。像这样：

```
case class Foo(key:String, value:Int)
val minPerKey = lotsOfFoos.groupBy(_.key).mapValues(_.minBy(_.value)) 
```

现在我想并行执行相同的操作，但 ParMap 没有 mapValues 函数。

为什么会这样，我应该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:48:53.520

Scala 2.10 具有用于 ParMap 的 mapValues。

但是将 mapValues 与 ParMap 一起使用并没有太多好处。mapValues 方法只是为您提供了一个在读取值时应用您的函数的新 Map，它实际上并没有更改 Map 中的值。因此，您需要执行一些其他操作来强制使用映射值创建新 Map。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:35:27.887

由于 ParMapLike 上不存在 mapValues，因此剩下两个选项：

1.  只需使用地图：`.map{case (key, value) => (key->value.minBy(_.value)) }`
2.  走出平行宇宙：`.toMap.mapValues(_.minBy(_.value))`

我不知道为什么 mapValues 不仅仅在 ParMapLike 上实现

# javascript - history.back() 清除表单值

> ID：14510153
> 
> 赞同：2
> 
> 时间：2013-01-24T20:29:39.387
> 
> 标签：javascript, jquery, jquery-mobile, history

我有一个表单，用户在其中输入了一些信息。单击提交按钮后，脚本会检查条目。如果出现问题，用户必须返回并修复它。

但是当我使用时`history.back()`，页面将被重新加载并且所有条目都消失了。我怎样才能使它与 jQuery Mobile 一起工作？

```
<a href="javascript:history.back()" data-icon="back" data-role="button" data-theme="b">Back</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:43:38.513

Simply try this

```
javascript:history.go(-1) 
```

This is worth reading to... [https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

These are Plugins..If You don't want to add plugins then avoid it..but it works great and servers the purpose.

[http://benalman.com/projects/jquery-bbq-plugin/](http://benalman.com/projects/jquery-bbq-plugin/)

[https://github.com/browserstate/history.js](https://github.com/browserstate/history.js)

In any case you will have to add some logic to make the data persist in some state or session to use it when you come back.

**Jquery Mobile Specific solution:**

```
data-rel="back" on anchor tag. 
```

[http://jquerymobile.com/demos/1.0a4.1/#docs/forms/../../docs/content/../../docs/forms/../../docs/forms/../../docs/pages/docs-pages.html](http://jquerymobile.com/demos/1.0a4.1/#docs/forms/../../docs/content/../../docs/forms/../../docs/forms/../../docs/pages/docs-pages.html) See Back Linking in JQuery Mobile.

# android - android通过java活动改变textview drowabletop

> ID：14510154
> 
> 赞同：0
> 
> 时间：2013-01-24T20:29:46.497
> 
> 标签：android, textview

我有 tetview

```
<TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dip"
            android:drawableTop="@drawable/new" /> 
```

我想更改`drawableTop`by java 活动，请问如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:32:31.360

首先，为您的 TextView 分配一个 id。然后你可以[`setCompoundDrawablesWithIntrinsicBounds()`](http://developer.android.com/reference/android/widget/TextView.html#setCompoundDrawablesWithIntrinsicBounds%28int,%20int,%20int,%20int%29)在你的Activity中使用改变TextView的drwables：

```
Textview t = (TextView) findViewById (R.id.textView);
t.setCompoundDrawablesWithIntrinsicBounds (0,R.drawable.new,0,0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:34:11.940

利用 ：

```
//to is the drawable
  textView.setCompoundDrawables(null, top, null, null); 
```

# jquery - 根据彼此的值要求字段

> ID：14510155
> 
> 赞同：0
> 
> 时间：2013-01-24T20:29:50.810
> 
> 标签：jquery, jquery-validate

![截屏](../Images/5f91f7a3ecfd50e2ba1eb260fd1cab8a.png)

我有上面的字段，我想要求他们为至少一个输入大于 0 的值，但他们也可以有桌子和座位。

我的 HTML：

```
 <div class="form-row reserve">
    <input type="text" name="tables" id="tables" value="0"/>
        <label for="tables">corporate tables (10 seats) @ $1,950 each and/or</label>
   </div>
   <div class="form-row reserve">
    <input type="text" name="individual" id="individual" value="0"/>
        <label for="individual">individual seats @ $225 each</label>
   </div> 
```

我已经尝试过了，但它似乎不起作用：

```
tables: {
    required: function(element){
        return $("#individual").val() == 0;
    }
},

individual: {
    required: function(element){
        return $("#tables").val() == 0;
    }
} 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:55:26.453

您不能在`rule`这样的内部使用函数。 `required:`通常只接受`true`or `false`。但是，您也可以使用[`depends`](http://docs.jquery.com/Plugins/Validation/validate#toptions)在`true/false` `rule`...

```
rules: {
    tables: {
        required: {
            depends:  function(element) {
                return $("#individual").val() === 0;
            }
        }
    }
} 
```

但是，使用上述方法，您的表单将始终通过验证，因为这两个字段都不是空的（*它们包含 "0"*）。因此，`required`规则总是得到满足。见：http: [//jsfiddle.net/vcnt9/](http://jsfiddle.net/vcnt9/)

您无法通过`0`从两个字段中删除默认值来修复它，因为该`depends`功能永远不会得到满足，并且这些字段仍然是可选的。见：http: [//jsfiddle.net/vcnt9/1/](http://jsfiddle.net/vcnt9/1/)

或者，您无法通过应用规则`depends`来解决此问题`min: 1`，因为它只允许与`true`或的规则一起使用`false`。

* * *

最好的解决方案是[使用`addMethod`](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)为这两个字段[创建自己的规则。](http://docs.jquery.com/Plugins/Validation/Validator/addMethod#namemethodmessage)使用“小于或等于”运算符 ( `<=`) 排除负数。

```
$.validator.addMethod("myMethod", function (value, element) {
    if (($("#individual").val() <= 0) && ($("#tables").val() <= 0)) {
        return false;
    } else {
        return true;
    }
}, "Please enter at least one field"); 
```

**工作演示：http: [//jsfiddle.net/v4UGM/](http://jsfiddle.net/v4UGM/)**

# count - 内连接和计数，Microsoft SQL

> ID：14510160
> 
> 赞同：0
> 
> 时间：2013-01-24T20:30:11.167
> 
> 标签：count, nested, inner-join

我正在尝试使用内部连接在嵌套语句中进行计数

```
select  a.app_id, a.first_name, a.last_name, d.svd_id
from    wwhs_app a inner join
        wwhs_svc d on a.app_id = d.app_id
where   a.app_id in(
        select  top 50 app_id
        from wwhs_app
        Where app_create_dt > '2012-07-23 00:00:00') 
```

我也需要计算 svd_id，但每次尝试都会出错。建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T01:44:19.713

您需要计算 svd_id 但它不在查询中。
您的意思是“app_id”吗？
尝试这个...

```
    选择 a.app_id、a.first_name、a.last_name、d.svd_id
    FROM wwhs_app 一个
    在 a.app_id = d.app_id 上的内部连接 ​​wwhs_svc d
    WHERE a.app_id in (
         选择 TOP 50 app_id, COUNT(*) 作为 id_count
         FROM wwhs_app
         WHERE app_create_dt > '2012-07-23 00:00:00'
    GROUP BY app_id ORDER BY id_count)

```

# javascript - HTML5 + JS：可旋转字符的碰撞检测

> ID：14510164
> 
> 赞同：8
> 
> 时间：2013-01-24T20:30:26.483
> 
> 标签：javascript, html, rotation, transform, collision

我正在为我的游戏开发碰撞系统；这是一个自上而下的射击游戏，角色始终是静态的 - 而其他一切（地图/关卡）都在他周围移动。

角色也会旋转，因此它始终面向鼠标位置。

考虑到这一点，我似乎无法理解我的碰撞系统，这需要考虑角色旋转，对吧？

我基本上只是想检查给定的对象是否完全“触摸”了我的角色/精灵。我不太确定我使用的数学是否正确。

这是我的碰撞检测（称为每次更新）：

```
function detectCollisions(){

    //Detect for game props
    if(collides(Map, TestProp)){
        console.debug("Touching...");
    }

}

function collides(a, b){

    //ctxMap.setTransform(1, 0, 0, 1, -Map.x + gameWidth/2, -Map.y + gameHeight/2);

    //var transX = -Map.x + gameWidth/2;
    //var transY = -Map.y + gameHeight/2;

    //need to take player rotation into account too!

    //console.debug(a.x + " " + b.x + " " + b.width + " " + Player.width); //A Width

    /*return  a.x < b.x + b.width && a.x + Player.width > b.x &&
            a.y < b.y + b.height && a.y + Player.height > b.y;*/

    var xOffset = Math.cos(Player.characterRotation); //+ Player.width;
    var yOffset = Math.sin(Player.characterRotation); //+ Player.height;

    return  Map.x + xOffset > b.x && Map.x + xOffset < b.x + b.width &&
            Map.y + yOffset > b.y && Map.y + yOffset < b.y + b.height;

} 
```

另外，不确定这是否相关，但这是用于移动我的地图画布的转换：

```
ctxMap.setTransform(1, 0, 0, 1, -Map.x + gameWidth/2, -Map.y + gameHeight/2); 
```

如果有人在这里帮助我，将不胜感激:) 谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T00:46:48.727

就个人而言，我不会太担心角色碰撞。我这么说的原因很简单。

让我们看看你是在靠近墙壁走的。然后你转身跟随鼠标，然后精灵与墙壁重叠。你现在做什么？要么停止转动，这会搞砸运动，要么让精灵重叠，玩家完全卡住，直到他们再次自由。

我的偏好是使用碰撞圈。如果玩家距离墙壁的距离小于 R 像素，则将其视为碰撞并阻止玩家移动。这样，即使玩家转身，精灵也不会导致玩家卡住，并且始终能够离开墙壁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:19:49.433

这次我进入了 ludum dad，做了一个教程来解释我的基本代码。教程可以在这里找到：[http ://www.philjeffes.co.uk/wordpress/?p=63](http://www.philjeffes.co.uk/wordpress/?p=63)

这演示了一个基于圆的碰撞检测示例 - 请随意使用任何代码。以下代码是对该代码的改编，用于一般用途：

```
function CollisionCheck(obj1,obj2){
    // If the two objects are less the sum of their collision radii apart then they have collided
    // Note that one obj is obj (with a loc and a size) and the other is this.
    // Returns true if the objects are touching

    var dist = obj2.size + obj1.size; // The distance they must be apart to be not touching
    if(obj1.x-obj2.x>dist || obj1.x-obj2.x<-dist)
       return false; // Too far apart in x plane
    if(obj1.y-obj2.y>dist || obj1.y-obj2.y<-dist)
       return false; // Too far apart in y plane

    var xDist = obj1.x-obj2.x;
    var yDist = obj1.y-obj2.y;

   var hyp = Math.sqrt((xDist*xDist)+(yDist*yDist));

   if(hyp<dist)
    return true;

   return false;

} 
```

**编辑**

删除了评论中 vals 指出的 Math.abs 调用。

# android - 提供额外的媒体资源（图形/声音）作为 Google Play 应用内计费项目

> ID：14510165
> 
> 赞同：5
> 
> 时间：2013-01-24T20:30:28.030
> 
> 标签：android, in-app-purchase, in-app-billing

在可通过 Google Play 获得的 Android 应用中，我想提供可通过应用内结算购买的其他商品。

我想提供的项目类型是媒体内容，例如图形和声音，通常会进入`res`应用程序的文件夹。

当然，问题是这些资源必须受到保护。在其[文档](http://developer.android.com/google/play/billing/billing_best_practices.html)中，Google 建议不要将内容存储在应用程序包中，而是在购买项目后获取密钥，然后将密钥发送到远程服务器，在那里检查密钥，如果成功，提供的图形/声音下载到应用程序。

从安全的角度来看，这听起来不错。但是如果我这样做了，我就不能像正常访问资源那样容易地使用内容了。例如，如果用户可以获得额外的背景 PNG，我不能使用`R.drawable.new_background`但必须以编程方式解码位图，对吗？

那么，通过应用内计费下载其他媒体内容是否有任何替代方案或最佳实践？

我想说，既然每个有足够决心的人都可以对代码进行逆向工程，那么为什么不只是将内容存储在应用程序中，而是要严格检查用户是否会使用该内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T03:46:25.153

答案在某种程度上取决于您的具体问题，根据您的问题，可能是以下 1 或 2：

1) 我担心有人可以*在*我的应用程序中使用我的资源而无需付费，或者

2) 我担心用户（*已付费或未*付费的*用户）**会*删除我的资源并在我的应用程序*之外*使用它们。

 ***您的问题（但其他人试图解决的问题）似乎没有表明另一种可能性是：

3）我担心我的初始APK下载太大，因为下载了大量的资源，只有他们用户会决定使用其中的一部分。

如果您唯一关心的是第 1 项，那么您可以像往常一样存储您的资源，但在您的应用程序内部，拒绝加载/使用您尚未收到应用程序内付款的任何资源。这当然是最简单的方法。

如果您关心的是第 2 项，那么您可以在您的 APK 中包含原始文件夹中的加密二进制存档，并在该资源被授权（例如，通过付款）供应用程序使用时从中解码特定资源。正如其他人所指出的，这在处理器负载方面并不是什么大问题，它确实提供了一些防止意外盗窃的保护。当然，如果您要与那些破坏您的加密并窃取您的资源的“创意抄袭”矛盾者之一打交道，总是有版权法。

如果您关心的是第 3 项，那么您将需要一个可以从中检索您的项目的外部服务器。在应用程序外部实施这种存储时，Google App Engine 是一种流行的托管选择。您可能只想将任何购买/下载的资源缓存在应用程序自己的外部文件夹中的加密存档中（由 getExternalFilesDir() 返回），然后按照上面的第 2 项读取和解密它。当您的应用程序被卸载时，这些文件将被自动删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T17:57:57.530

不在应用程序中存储额外内容的明显原因之一是应用程序的应用程序下载大小。如果您将音频作为附加内容提供，它会显着增加应用程序的大小。用户关心它。此外，它还可以更轻松地发布其他内容，因为您可以通过服务器端/开发人员控制台来完成，而无需发布应用程序更新。此外，如果您想提供高质量的图形，您将能够直接向设备提供适当版本的图像，而无需存储所有密度/屏幕尺寸版本。

如果您担心安全性，您始终可以使用加密和签名来访问资源，并通过适当地混淆您的代码（甚至将与安全/解密相关的代码移动到本机端，这也将使其更快）使攻击者的生活更加困难。

是的，这会产生一个缺点，您必须以编程方式对它们进行解码，并且对此无能为力。老实说，我不明白它为什么这么重要，相反，我认为您将拥有更多数据驱动的资源访问权限非常方便。

作为总结，我真的不认为有任何标准可以做到这一点，这取决于您的应用程序和内容类型。如果您提供固定数量的 5-10 张图片，那么将它们保存在本地是完全可以的，如果内容更丰富、项目更多、资源更重，那么客户端-服务器更适合您。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T19:32:57.953

一种解决方案肯定是以下方法，其中两个应用程序共享相同的用户 ID。但这显然不如应用内购买那么优雅，而且有点hacky。

1.  创建两个应用相同`android:sharedUserId`的应用`AndroidManifest.xml`
2.  将付费内容存储在第二个应用程序中，即从现在开始的库应用程序，仅包含那些图像（除了必要的文件夹和清单）
3.  使用相同的密钥为两个 APK 签名
4.  像往常一样免费提供第一个应用程序，并将第二个应用程序设为付费应用程序
5.  在免费应用程序中，使用`PackageManager`检查是否安装了第二个 APK
6.  如果是，则使用为第二个应用程序`createPackageContext()`创建一个`Context`，然后用于从第一个应用程序访问第二个应用程序的资源

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T17:07:21.617

Google Play 提供可购买的扩展包。这些是可以在购买后下载的大型扩展程序，并且与您的应用程序是分开的。这是一种可能性。

[http://developer.android.com/google/play/expansion-files.html](http://developer.android.com/google/play/expansion-files.html)

根据您想要的安全程度以及媒体的大小，您可以使用密钥加密媒体，并将其与您的应用程序一起存储。它将与应用程序一起下载并安装，但无法访问。应用内购买完成后，您可以解密内容并将其提供给用户。您可以将密钥存储在应用程序的源代码中以对其进行解密，也可以在您自己的服务器上验证购买并从您的服务器检索密钥。***

# android - 如何向 API v2 Google Maps 标记添加按钮

> ID：14510167
> 
> 赞同：4
> 
> 时间：2013-01-24T20:30:46.353
> 
> 标签：android, google-maps, marker

我正在开发一个 android Google Maps 应用程序，并且在使用地图标记时遇到了问题。

这个问题可能有一个简单的解决方案，但经过搜索，我只找到了有关如何使用按钮添加标记的链接。我想要的是不同的：我想要一个标记，其相应的对话框有一个按钮。

有没有人做过类似的事情？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T20:43:59.957

虽然您可以创建一个`InfoWindowAdapter`，并将其附加到您的`GoogleMap`via `setInfoWindowAdapter()`，以定制信息窗口的内容以包含 a `Button`，但`Button`将无法单击。不显示您`View` 从`getInfoContents()`in返回。`InfoWindowAdapter`相反，它被转换为 a `Bitmap`，并且该图像就是显示的内容。

但是，您可以`OnInfoWindowClickListener`通过`setOnInfoWindowClickListener()`您的`GoogleMap`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T20:56:07.973

@CommonsWare 关于`InfoContent`转换为 a 的评论`Bitmap`是正确的。因此，您不能使用 InfoWindows。尝试使用该`GoogleMap.OnMarkerClickListener`事件来在 MapView 顶部显示您自己的视图。这`GoogleMap.OnMarkerClickListener`将帮助您使用单击的标记作为参数。

如果要在正确的位置显示视图，则必须计算屏幕位置。使用 Projection 的`toScreenLocation(LatLng location)`返回方法`Point` 将 LatLng 转换为 GoogleMap 的屏幕位置。

有关详细信息，请参阅[投影](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/Projection)。

# android - Android 获取所有已安装应用的列表

> ID：14510171
> 
> 赞同：3
> 
> 时间：2013-01-24T20:30:51.557
> 
> 标签：android, android-package-managers

我使用以下代码获得了已安装应用程序的列表：

```
public List<ResolveInfo>() {
    PackageManager pm=getPackageManager();
    Intent main=new Intent(Intent.ACTION_MAIN, null);

    main.addCategory(Intent.CATEGORY_LAUNCHER);

    List<ResolveInfo> launchables=pm.queryIntentActivities(main, 0);

} 
```

只有一个问题：它仅列出具有 MAIN 活动的应用程序。如何获取所有已安装应用程序的列表？请注意，我在需要 List 是 ResolveInfo 的项目中使用了此代码，因此请仅回答返回 ResolveInfo 列表的代码。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T21:28:20.617

您是否尝试过：

```
 List<ApplicationInfo> packages = pm
            .getInstalledApplications(PackageManager.GET_META_DATA); 
```

（在[这里](https://stackoverflow.com/a/5097838/1668144)找到）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T21:25:06.440

你的问题不太合理；你提出了一个不合理的要求。你说你想要一个所有已安装应用程序的列表，但你还想要一个`List`对象`ResolveInfo`。的[文档`ResolveInfo`](http://developer.android.com/reference/android/content/pm/ResolveInfo.html)将其描述为：

> 从针对 IntentFilter 解析意图返回的信息。

应用程序和`IntentFilter`s 不是一一关联的。您希望`ResolveInfo`对象包含什么？如果一个包裹不止一个，你想要哪一个？

`PackageManager`确实包括一个方法[`getInstalledApplications`](http://developer.android.com/reference/android/content/pm/PackageManager.html#getInstalledApplications%28int%29)，但它返回一个对象`List`，`ApplicationInfo`这是一种更适合这种查询的类型。同样，还有一个[`getInstalledPackages`](http://developer.android.com/reference/android/content/pm/PackageManager.html#getInstalledPackages%28int%29)方法可以返回一个`List`对象`PackageInfo`。

# visual-studio - “通过 Visual Studio 或其他支持 Windows Installer 的安装编辑器将文件包装在另一个安装包中”是什么意思？

> ID：14510174
> 
> 赞同：1
> 
> 时间：2013-01-24T20:31:00.067
> 
> 标签：visual-studio, wrapper

我在 Visual Studio 2012 中工作，但我缺少“Microsoft.Office.Interop.Excel”程序集。从[http://www.microsoft.com/en-us/download/details.aspx?id=3508](http://www.microsoft.com/en-us/download/details.aspx?id=3508)下载缺少的 exe 后，
说明如下：
“通过 Visual Studio 将 O2010pia.msi 文件包装在另一个安装包中或其他支持 Windows Installer 的安装编辑器”
我运行了 exe，但 Visual Studio 中仍然缺少缺少的程序集。我对开发很陌生，在谷歌搜索了一段时间后，我并没有更接近理解这意味着什么。我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T21:54:31.020

您没有正确阅读。该页面显示“使用以下安装方法之一” **。**您要问的是当您为程序创建安装程序时所做的事情，以便 PIA 也安装在您的客户端计算机上。你还不在那里。

你不应该再这样做了，自 VS2010 以来 PIA 已经过时了。替换为“嵌入互操作类型”功能，即“NoPIA”。项目，添加引用，单击 COM，选择“Microsoft Excel xx.x 对象库”条目，其中 xx.x 是您在计算机上安装的 Office 版本号。这会自动将 Microsoft.Office.Core 和 Microsoft.Office.Interop.Excel 引用添加到您的项目中。将他们的 Embed Interop Types 属性设置为 True，这样您就不必在客户端机器上安装任何东西。

如果您没有看到此条目，那么您将需要在您的计算机上安装 Office。添加引用以及调试和测试代码时需要。

# .net - 从数据模型生成的所有实体的列表

> ID：14510178
> 
> 赞同：4
> 
> 时间：2013-01-24T20:31:18.537
> 
> 标签：.net, visual-studio-2010, entity-framework

如何获取从实体数据模型 (*.edmx) 生成的所有实体类型的列表？

我已经拥有数据库中的表名和模型实例 (.edmx)。

我想要一个所有数据实体的类型实例。

假设我的数据库有两个表： Employee EmployeeType

然后模型将生成 2 个类并映射数据。我正在搜索的是一种获取列表（类型）的方法。在这种情况下，结果列表将包含一个 Employee.GetType() 和 EmployeeType.getType() 的实例

谢谢！

（VS2010、VB.NET、EF4）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:23:10.410

其中一种方法是：

```
((EdmItemCollection)ctx
    .MetadataWorkspace
    .GetItemCollection(DataSpace.CSpace))
    .GetItems<EntityType>() 
```

我以前没有尝试过，但您甚至可以直接从工作区获取项目：

```
ctx.MetadataWorkspace.GetItems<EntityType>(DataSpace.CSpace) 
```

如果您使用的是 DbContext，则可以按如下方式获取 ObjectContext：

```
((IObjectContextAdapter)ctx).ObjectContext 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:34:01.170

```
using (AdventureWorksEntities context = new AdventureWorksEntities())
{
    IQueryable<Product> productsQuery = from product in context.Products
                                        select product;

    Console.WriteLine("Product Names:");
    foreach (var prod in productsQuery)
    {
        Console.WriteLine(prod.Name);
    }
} 
```

[对象查询 - MSDN](http://msdn.microsoft.com/en-us/library/vstudio/bb896241%28v=vs.100%29.aspx)

# java - 有人可以说明将 Java 或 Groovy 等语言视为静态或动态类型或动态语言的概念吗？

> ID：14510184
> 
> 赞同：1
> 
> 时间：2013-01-24T20:31:45.893
> 
> 标签：java, groovy

我只是想弄清楚什么时候是一种已知是静态或动态类型的编程语言，或者同时被认为是静态类型和动态语言或动态类型和动态语言的概念。

我感到困惑的是，如果在 Java 的情况下变量的类型已知或在编译时定义时已知一种语言是静态类型的，即

```
//Java illustration of statically typed  
int x, y; //explicit type declaration 
x = 5, y = 10; //Now we use the variables 

//Groovy illustration of statically typed 
def x, y //explicit type declaration 
x = 1, y = 10 //now we use the variables 
```

根据阅读各种在线资源，它说被认为是静态类型的语言列表不包括 Groovy，而是 Java 和 C++。

此外，如果 Groovy 是一种动态语言（DL 的定义 - DL 是一种在编译时进行很少或不进行检查的语言，而是在运行时进行检查）。这是否意味着 Groovy 也是一种动态类型语言，因为对于被认为是动态类型的变量“是在运行时而不是编译时知道变量的类型”。

```
//Illustration of a language being dynamically typed according to DT and DL definition
x = 5 //directly using the variable (exceptable in Python and PHP but not in Java/Groovy) 
```

如果在 Groovy 中是这种情况，那么上述 Groovy 静态类型化的代码说明与 Groovy 在运行时完成的检查定义相矛盾。

这是否意味着 java groovy 都不是动态类型语言，因为直接使用变量会在 Java 和 groovy 中抛出编译器错误。

如果我错了，请纠正我。请提供带有代码说明的示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T21:44:09.897

我把它作为评论，但它被埋没了一点。

def 确实给出了一个类型，它使用“对象”的类型。就好像在 Java 中定义的每个变量都被定义为一个对象......（因此，Groovy 中的 def x=7 与 Java 中的 Object x=7 完全相同，没有更多或更少类型）。

这些对象总是以两种语言携带它们的类型信息。这两个也是等价的：

```
时髦的：
定义 x=5
断言（x == 5）
x="嘿，我换了类型！"
assert(x == "嘿，我换了类型！")

爪哇：
对象 x=5
断言（x == 5）；
x="嘿，我——嗯，我有点改变了我的类型！"
assert(x.equals("嘿，我——我有点改变了我的类型！"))

```

最大的区别是Java强制（在编译时）你只调用它认为你拥有的类类型的已知方法。所以在上面的例子中，.toString() 和 .equals() 确实是唯一有用的方法. 要进行数学运算，您必须执行以下操作：

```
对象 x=5；
对象 y=7；
对象 z=(int)x + (int) y；
断言（z == 12）；  
// 我相信 Integer z 会自动转
// 这里是一个int，但这可能无法编译:)

```

在 Groovy 中，该语言将简单地尝试调用该方法，并在运行时成功或失败。

这可以通过使用反射与 Java 进行模拟，您可以将所有内容都输入为“Object”（就像使用 groovy 的“def”一样）并编写一个反射实用程序来执行以下操作：

```
Object s="Hey, Wassup???";
对象 s2=magic(s, "toLowerCase")
断言（s2.equals（“嘿，wassup？？？”））；

```

Groovy 只是隐藏了“魔法”。

所以我不认为你可以说一个本质上比另一个更具动态性，尽管你可能会说使用反射使两种语言都动态化，你也可以说 Groovy 使用反射比 java 多很多......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:17:29.593

静态和动态类型主要是对**变量**（以及函数参数和返回值）的类型的描述。在许多静态类型语言中，您必须声明变量的类型，以便编译器知道哪些操作是有效的以及应该使用哪个重载版本的函数/操作符。一些现代静态类型语言（包括大多数函数式语言）具有类型推断功能，因此大多数时候您不必声明变量的类型。但是，变量仍必须具有**固定**类型。如果你将不同类型的值赋给同一个变量，编译器要么拒绝编译，要么只允许你做所有共同的操作。真正的强类型语言不能出现与类型相关的运行时故障。

在动态类型语言中，变量只是一个名称。您可以将任何类型的值分配给任何变量，并且可以通过分配不同类型的值来更改类型。只能在执行语句时检查函数调用或变量操作的有效性。（您可以将其视为将 Java 中的每个变量声明为 Object，并在使用时将它们转换为所需的类型。当然，编译器不会尝试确定转换是否成功，而是会插入可能导致运行失败的转换检查时间。）

动态语言通常意味着放宽编译器检查的大部分内容（语法可能是唯一事先检查的内容）。这通常意味着变量的存在甚至函数调用的有效性在必要时才被验证。他们通常使用动态类型，因为静态类型不利于放松。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:35:54.843

请注意，在 Java 中，您必须告诉它变量的完整类型。'int' 在你的例子中。您可以说“float”或“Map”或“MyClassWithALongName”。

在 Groovy 中，您只是说 'def' 表示有一个变量，但您没有告诉它内容类型。

# tsql - 在游标结果上使用 case 语句为变量赋值

> ID：14510186
> 
> 赞同：0
> 
> 时间：2013-01-24T20:31:49.230
> 
> 标签：tsql, casting, cursor, set, fetch

我正在尝试编写一个快速实用程序来帮助我生成用于编写其他 SQL 的东西——尤其是变量声明。输出不需要漂亮或完美（还），但它必须足够接近，以便我可以快速、轻松地修复它。（是的，我知道它还没有处理所有案例。这是一个简单的案例来说明问题。）

```
use myDB

DECLARE @varcharflds table
(tname  varchar(50) not null, 
 fname  varchar(50) not null,
 dtype  varchar(50) not null,
 dlen   varchar(50) 
)

INSERT INTO @varcharflds
  SELECT TABLE_NAME,COLUMN_NAME,DATA_TYPE,CHARACTER_MAXIMUM_LENGTH
     FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_NAME='myTable'

select * from @varcharflds
declare utable_cursor cursor FOR
select tname, fname, dtype, dlen from @varcharflds
open utable_cursor
Declare @tname varchar(50),@fname varchar(50), @dtype varchar(50), @dlen varchar(50)
Declare @vardefstring4 varchar(3000)
Set @vardefstring4 = ''        

Fetch Next from utable_cursor into @tname, @fname, @dtype, @dlen
WHILE @@FETCH_STATUS = 0
BEGIN
  print @dlen
  set @vardefstring4 = @vardefstring4 +
     (case WHEN @dtype in ('datetime', 'date', 'bit')
      THEN @dtype ELSE  '(' + cast (@dlen as varchar(5)) + ')' END) + ', '
   Fetch Next from utable_cursor into @tname, @fname, @dtype, @dlen
END

print '>' + @vardefstring4 + '<'
print 'done' 
```

问题是读取 cast (@dlen as varchar(5)) 的部分。如果我用字符串常量替换它，它可以工作，但除常量之外的任何类型的表达式都不起作用。它打印“完成”消息，但不打印第一个消息 - 甚至不打印尖括号。我尝试在它周围放置一个 try catch 并打印一条错误消息 - 没有消息。我想也许它使用了一些我不知道的类型和空 dlen ...不。我已经为此工作了一段令人尴尬的时间。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:56:32.167

我不知道为什么我的原始解决方案不起作用，但我确实找到了一种不同的方法，通过如下替换集合：

set @vardefstring4 = @vardefstring4 + (@dlen 为空的情况 THEN @dtype ELSE @dtype + '(' + cast (@dlen as varchar(5)) + ')' END) + ', '

这样做的好处是它确实有效（而且我更喜欢这种逻辑）。

# php - 来自不同目录问题的 PHP ZipArchive::AddFile

> ID：14510188
> 
> 赞同：1
> 
> 时间：2013-01-24T20:32:08.287
> 
> 标签：php, imagemagick, wkhtmltopdf, zipfile

我正在使用 PHP 的 ZipArchive 类将生成的 PDF 文件添加到 zip 存档中。生成的 PDF 存储在 C:\pdfgenerator （不是我的 www 目录）中，而 zip 文件本身创建并存储在 C:\Program Files\Apache Software Foundation\Tomcat 6.0\webapps\med （我的网站所在的目录生活）。

这是我用来创建 PDF/Zip 并尝试将 PDF 存储在 Zip 中的代码：

```
/* build zip & directory for PDFs */
$zip = new ZipArchive;
$time = microtime(true);

if($res = $zip->open("pdf/mf-pdfs_" . $time . ".zip", ZipArchive::CREATE) === TRUE) {
    echo "created";
    } else {
    echo "failed";
    }

$num = 0;
while($row = mysql_fetch_array($result)) {

    /* associate a random # assigned to each PDF file name */
    $num++;
        include($form);
    $rand = rand(1,50000);
     $file_num = $num * $rand;

    $fo = fopen('c:\\pdfgenerator\\mf_pdf-' . $time . '-' . $file_num . '.html', 'w') or die("can't open file");

    fwrite($fo, $output);
    echo shell_exec('c:\wkhtmltopdf\wkhtmltoimage c:\\pdfgenerator\\mf_pdf-' . $time . '-' . $file_num . '.html c:\\pdfgenerator\\mf_pdf-' . $time . '-' . $file_num . '.jpeg');

    /* the follow uses ghost script to execute the ImageMagick convert command from cmd.exe */
    $magick_dir = 'C:\imagemagick' ; // install IM in short DOS 8.3 compatible path
    $send_cmd=$magick_dir .'\convert c:\\pdfgenerator\\mf_pdf-' . $time . '-' . $file_num . '.jpeg -resize "1710x2200^!" c:\\pdfgenerator\\mf_pdf-' . $time . '-' . $file_num . '.jpeg' ;

    $result = shell_exec($send_cmd);
    $send_cmd=$magick_dir .'\convert c:\\pdfgenerator\\mf_pdf-' . $time . '-' . $file_num . '.jpeg c:\\pdfgenerator\\mf_pdf-' . $time . '-' . $file_num . '.pdf';
    $result = shell_exec($send_cmd) ;

    /* EO ghostscript code */

/* add the newly generated files to the Zip Archive */
    if ($res === TRUE) {
    //echo "RESULT TRUE...";
     if($zip->addFile('c:/pdfgenerator/mf_pdf-' . $time . '-' . $file_num . '.pdf','c:/pdfgenerator/mf_pdf-' . $time . '-' . $file_num . '.pdf') === TRUE) {
        echo "addded";
        } else {
        echo "not added";
        }
    //echo "FILE ADDED!";
    } 
 /* EO Zip Archive */

} 
```

当我将 PDF 和 Zip 文件存储在同一个父目录 (/med) 中时，脚本运行得非常好。

是否可以使用 Zip 存档类并将文件添加到不在同一父目录中的 Zip？我尝试了许多更改，但无法让 AddFile 正常工作。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:40:49.953

听起来这是Apache运行的用户权限的问题

[找出在 Windows 中运行的 Apache 用户是什么？](https://stackoverflow.com/questions/10289133/finding-out-what-user-apache-is-running-as-in-windows)

Apache 用户至少需要对 C:\pdfgenerator 具有读取权限

# asp.net-mvc-4 - MVC4：在会话结束时删除自定义行

> ID：14510189
> 
> 赞同：1
> 
> 时间：2013-01-24T20:32:15.033
> 
> 标签：asp.net-mvc-4, cross-domain, forms-authentication, session-cookies

我正在表中为用户会话创建一个条目，该条目映射到用于跨域访问 API 的 guid。表中的行看起来像 [guid, cookie] 并在登录时填充。

```
session.guid = Guid.NewGuid();
session.cookie = FormsAuthentication.GetAuthCookie(sUser.email, false).Value; 
```

我遇到的问题是会话结束时从数据库中删除它。到目前为止，我有这个似乎不起作用。

在 Session_End() 中：

```
var cookie = HttpContext.Current.Request.Cookies[FormsAuthentication.FormsCookieName];
string cValue = cookie.Value;

using (var db = new xEntities())
{
     Session session = db.Sessions.Where(p => p.cookie == cValue).FirstOrDefault();
     db.Sessions.Remove(session);
     db.SaveChanges();
} 
```

谁能阐明我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:47:58.157

与此同时，我设法找到了一个笨重的替代方案：

```
DateTime now = DateTime.Now;
Session session = new Session();
session.guid = Guid.NewGuid();
session.cookie = FormsAuthentication.GetAuthCookie(sUser.email, false).Value;
session.started = now;

using (var db = new xEntities())
{
   db.Sessions.Add(session);
   db.SaveChanges();
}

using (var db = new xEntities())
{
   List<Session> sessions = db.Sessions.ToList();
   now = now.AddMinutes(-60);

   foreach(Session s in sessions)
   {
      if (s.started < now)
      {
         db.Sessions.Remove(s);
      }
   }
   db.SaveChanges();
} 
```

# jquery - 带有轮播的 jQuery Cycle2 插件不工作；控制台没有错误

> ID：14510190
> 
> 赞同：2
> 
> 时间：2013-01-24T20:32:17.357
> 
> 标签：jquery, jquery-plugins, plugins

我正在尝试在网站上使用 jQuery Cycle2 插件，而且我对 jQuery 很陌生，因此很难进行故障排除。我在 JavaScript 控制台中看不到任何错误。我的代码在下面，[我还在这里做了一个通过验证的 jsfiddle](http://jsfiddle.net/Z5cvq/1/)。它可以在本地工作，但是当我将其插入 OpenCMS 时，轮播中的幻灯片超出了它们的容器并且大小为 100%，并且没有任何内容是可点击的（这意味着即使单击过大的轮播图像也不会更改第一个 div 中的幻灯片，即坐在一切后面）。

我插入的站点正在运行 jQuery 1.3.2，我无法更改或更新它，所以我使用了 noConflict。在我使用 noConflict 之前，网站的其他部分已经损坏并且滑块无法正常工作。现在网站的其他部分都可以，但滑块仍然无法正常工作。

滑块使用 div 上的 data 属性来传递选项，我认为它可能不起作用，因为站点文档类型是 XHTML 1.0。但是，当我更改本地文件上的文档类型以匹配我正在使用的站点时，滑块仍然有效。

我还尝试[按照此处的说明](http://jquery.malsup.com/cycle2/api/)以编程方式设置选项，但即使在我的本地机器上我也无法让它工作......我认为我不知道足够的 JavaScript 来正确编写代码。

我很困惑，也没有经验，不知道如何在没有任何帮助的情况下解决这个问题。有任何想法吗？

谢谢你。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
            <html>
            <head>
            <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
            <title>Soleil Cycle2 Carousel Pager</title>
            <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script> 
            <script type="text/javascript" src="../js/jquery.cycle2.js"></script> 
            <script type="text/javascript" src="../js/jquery.cycle2.carousel.js"></script>   
            <script type="text/javascript">
            var jQuery_1_9_0 = $.noConflict(true);
            jQuery_1_9_0(document).ready(function($){
            var slideshows = $('.cycle-slideshow').on('cycle-next cycle-prev', function(e, opts) {
                slideshows.not(this).cycle('goto', opts.currSlide);
            });

            $('#cycle-2 .cycle-slide').click(function(){
                var index = $('#cycle-2').data('cycle.API').getSlideIndex(this);
                slideshows.cycle('goto', index);
            });

            });
            </script> 
            <style type="text/css">
            #soleil-intro * { -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; }
            #soleil-intro #cycle-1 div { width:950px; }
            #soleil-intro #cycle-2 .cycle-slide { border:3px solid #fff; }
            #soleil-intro #cycle-2 .cycle-slide-active { border:3px solid #f6d609; }
            #soleil-intro #soleil-slideshow-1 { max-width: 980px; margin: auto; z-index: 1; position: relative; }
            #soleil-intro #soleil-slideshow-2 { max-width: 940px; margin: auto; z-index: 1; position: relative; margin-top: 10px;  }
            #soleil-intro .cycle-slideshow img { width: 100%; height: auto; display: block; }
            #soleil-intro .arrow {float: left; width: 15px; position: relative; top: 200px;}
            </style>
            </head>
            <body>
            <div id="soleil-intro">
            <div id="soleil-slideshow-1">
                <p class="arrow">
                    <a href="#" class="cycle-prev">&laquo;</a> 
                </p>
                <div style="float: left;" id="cycle-1" class="cycle-slideshow"
                    data-cycle-slides="> div"
                    data-cycle-timeout="0"
                    data-cycle-prev="#soleil-slideshow-1 .cycle-prev"
                    data-cycle-next="#soleil-slideshow-1 .cycle-next"
                    data-cycle-fx="scrollHorz"
                    >
                    <div><img src="../soleil1.jpg" width="980" height="425"></div>
                    <div><a href="test.html"><img src="../soleil2.jpg" width="980" height="425"></a></div>
                    <div><img src="../soleil3.jpg" width="980" height="425"></div>
                    <div><img src="../soleil4.jpg" width="980" height="425"></div>
                    <div><img src="../soleil5.jpg" width="980" height="425"></div>
                    <div><img src="../soleil3.jpg" width="980" height="425"></div>
                    <div><img src="../soleil4.jpg" width="980" height="425"></div>      
                </div>
                    <p class="arrow">
                    <a href="#" class="cycle-next"><img src="../arrow.gif" style="display:inline;" alt="arrow" height="12" width="16" border="0" /></a>
                </p>
            </div>
            <div style="clear: both;"></div>
            <div id="soleil-slideshow-2" style="clear: both;">
                <div id="cycle-2" class="cycle-slideshow"
                    data-cycle-slides="> div"
                    data-cycle-timeout="0"
                    data-cycle-prev="#soleil-slideshow-2 .cycle-prev"
                    data-cycle-next="#soleil-slideshow-2 .cycle-next"
                    data-cycle-fx="carousel"
                    data-cycle-carousel-visible="3"
                    data-cycle-carousel-fluid="true"
                    data-allow-wrap="false"
                    >
                    <div><img src="../soleil1.jpg" width="100" height="100"></div>
                    <div><img src="../soleil2.jpg" width="100" height="100"></div>
                    <div><img src="../soleil3.jpg" width="100" height="100"></div>
                    <div><img src="../soleil4.jpg" width="100" height="100"></div>
                    <div><img src="../soleil5.jpg" width="100" height="100"></div>
                    <div><img src="../soleil3.jpg" width="100" height="100"></div>
                    <div><img src="../soleil4.jpg" width="100" height="100"></div>
                </div>
            </div>
            </div> <!-- #soleil-intro -->
            </body>
            </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:58:37.337

如果您提到要将其集成到哪个 CMS 中会很有帮助，请使用以下代码：

需要在 jquery.1.9 文件之后粘贴 noConflict 。

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script> 

<script type="text/javascript">
            var jQuery_1_9_0 = $.noConflict(true);
</script>
<script type="text/javascript" src="../js/jquery.cycle2.js"></script> 
<script type="text/javascript" src="../js/jquery.cycle2.carousel.js"></script>   

<script type="text/javascript">
    jQuery_1_9_0(document).ready(function(){
        var slideshows = jQuery_1_9_0('.cycle-slideshow').on('cycle-next cycle-prev', function(e, opts) {
            slideshows.not(this).cycle('goto', opts.currSlide);
        });

        jQuery_1_9_0('#cycle-2 .cycle-slide').click(function(){
            var index = jQuery_1_9_0('#cycle-2').data('cycle.API').getSlideIndex(this);
            slideshows.cycle('goto', index);
        });
    });
</script> 
```

希望它能解决问题。

这是更新的小提琴：http: [//jsfiddle.net/Z5cvq/8/](http://jsfiddle.net/Z5cvq/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T17:51:33.700

这个问题是在搜索我自己的 jquery cycle2 问题时出现的，但顺便说一句，您的幻灯片容器的开始 DIV 标记中有一个错字。在“数据循环幻灯片”属性的值字段中，右尖括号过早地关闭了 DIV 打开标记。它应该是：

```
<div style="float: left;" id="cycle-1" class="cycle-slideshow"
                data-cycle-slides="div"
                data-cycle-timeout="0"
                data-cycle-prev="#soleil-slideshow-1 .cycle-prev"
                data-cycle-next="#soleil-slideshow-1 .cycle-next"
                data-cycle-fx="scrollHorz"
                > 
```

# javascript - 从 UIWebView 在 Safari 中打开（使用 youtube.com）

> ID：14510191
> 
> 赞同：0
> 
> 时间：2013-01-24T20:32:25.720
> 
> 标签：javascript, ios, uiwebview, youtube

这是我做过的最令人沮丧的事情。我有一个 UIWebView。它转到[http://m.youtube.com](http://m.youtube.com)。我希望我按下的任何后续链接都被发送到 Safari，而不是 UIWebView。很简单，对吧？这是您会一遍又一遍地找到的代码：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    if (navigationType == UIWebViewNavigationTypeLinkClicked) {

        [[UIApplication sharedApplication] openURL:request.URL];
        return NO;
    }

    return YES;
} 
```

但这不起作用。所以我`UIWebViewNavigationTypeLinkClicked`改为`UIWebViewNavigationTypeOther`. 当视图加载时，它会立即在 Safari 中打开。又不是我想要的。所以我这样做了：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
    if (navigationType == UIWebViewNavigationTypeOther) {

        NSLog(@"It works!");

//        [[UIApplication sharedApplication] openURL:[NSURL URLWithString:[urlArr objectAtIndex:indexPath.row]]];
       return YES;
   }

   return NO;
} 
```

检查后续点击是否会通过此处而不会通过。日志只显示“它有效！” 当视图最初加载时。任何后续点击都不会显示任何内容。

因此，我尝试寻找 URL 更改和 Javascript 更改，但仍然没有。还有什么我可以做的吗？

**（顺便提一下，这段代码在任何其他网站上都可以工作，比如 stackoverflow.com - 任何后续的链接点击，我都会被带到 Safari。它只不适用于 YouTube）**

这是我在 youtube 上按下链接时从日志中得到的信息：

```
2013-01-24 21:08:25.886 HatFilms[30079:c07] [MPAVController] Autoplay: Enabling autoplay
2013-01-24 21:08:25.886 HatFilms[30079:c07] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1)
2013-01-24 21:08:25.887 HatFilms[30079:c07] setting movie path: http://r1---sn-5n3-n1qe.c.youtube.com/videoplayback?mv=m&mt=1359061639&ms=au&yms=Ag6pZvjqA20&source=youtube&key=yt1&el=watch&upn=g2ConWh5QJ0&id=201015c58a31c984&cp=U0hUTlBTVF9LS0NONF9ITVhCOlhkN3FFcm5zWDY5&ip=31.205.57.12&newshard=yes&fexp=909714%2C901802%2C919358%2C914066%2C916625%2C902534%2C920704%2C912806%2C922403%2C922405%2C929901%2C913605%2C925710%2C929104%2C920201%2C913302%2C919009%2C911116%2C926403%2C910221%2C901451&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&sver=3&expire=1359086161&dnc=1&app=youtube_mobile&ratebypass=yes&itag=18&signature=A434075DABFEBB44E5F0588B7430D04A931684B0.648F49C3F4D254E29B970A6AA68BAC1C08280B97&ipbits=8
2013-01-24 21:08:25.887 HatFilms[30079:c07] [MPAVController] Autoplay: Enabling autoplay
2013-01-24 21:08:25.895 HatFilms[30079:c07] [MPCloudAssetDownloadController] Prioritization requested for media item ID: 0 
```

如果我记录 UIWebView 收到的所有内容：

```
2013-01-24 21:50:31.642 HatFilms[30372:c07] [MPAVController] Autoplay: Enabling autoplay
2013-01-24 21:50:31.642 HatFilms[30372:c07] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1)
2013-01-24 21:50:31.642 HatFilms[30372:c07] setting movie path: http://r1---sn-5n3-n1qe.c.youtube.com/videoplayback?expire=1359086161&key=yt1&sver=3&app=youtube_mobile&el=watch&signature=44DA69CF58A649EAA813EE2A8E91B38BB164CB9D.2DA718585DEDB6F55E4ABBDD247602E713981C83&source=youtube&upn=3Qgzgd7FAjY&newshard=yes&ratebypass=yes&ipbits=8&itag=18&yms=Ag6pZvjqA20&fexp=909714%2C901802%2C919358%2C914066%2C916625%2C902534%2C920704%2C912806%2C922403%2C922405%2C929901%2C913605%2C925710%2C929104%2C920201%2C913302%2C919009%2C911116%2C926403%2C910221%2C901451&ip=31.205.57.12&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&cp=U0hUTlBTVF9LS0NONF9ITVhCOlhkN3FFcm5zWDY5&dnc=1&id=201015c58a31c984&mv=m&mt=1359064215&ms=au
2013-01-24 21:50:31.643 HatFilms[30372:c07] [MPAVController] Autoplay: Enabling autoplay
2013-01-24 21:50:31.646 HatFilms[30372:c07] [MPCloudAssetDownloadController] Prioritization requested for media item ID: 0
2013-01-24 21:50:32.333 HatFilms[30372:c07] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1)
2013-01-24 21:50:32.349 HatFilms[30372:c07] [MPAVController] Autoplay: _streamLikelyToKeepUp: 0 -> 1
2013-01-24 21:50:32.350 HatFilms[30372:c07] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1)
2013-01-24 21:50:32.768 HatFilms[30372:c07] [MPAVController] Autoplay: Enabling autoplay
2013-01-24 21:50:32.786 HatFilms[30372:c07] [MPAVController] Autoplay: Enabling autoplay 
```

感谢您的关注

# c# - 如何从 NHibernate 中的多个表中获取和保存单个连接值？

> ID：14510196
> 
> 赞同：0
> 
> 时间：2013-01-24T20:32:49.713
> 
> 标签：c#, .net, nhibernate, nhibernate-mapping

至于我们在做什么，我不能说得太具体，但这里有：

我们的代表是我们的客户，他们每个人只能与一家公司合作，但每个公司都有自己识别代表的方式，但是所有代表都存储在我们的`Rep`表中。

`Rep`我们表中的 PK是`RepID`，但是由于他们各自的公司分配给他们的 ID，我们也有一个 varchar `RepNumber`。

输入表/实体`RepAddress`。该**表**有一个 FK 到`Rep`via `RepID`，但是由于遗留系统，**该类** `RepAddress`必须具有`RepNumber`。

我想要完成的是能够`RepAddress`通过设置`RepNumber`并让NHibernate`RepID`从基于.**`RepAddress`**`Rep``RepNumber`

这是我对 RepAddress 映射的失败尝试：

```
<class name="RepAddress">
    <id name="AddressID">
      <generator class="native" />
    </id>
    <property name="AddressType" column="AddressTypeID" />
    <property name="AttentionLine" />
    <property name="CareOfLine" />
    <property name="AddressLine1" />
    <property name="AddressLine2" />
    <property name="AddressLine3" />
    <property name="City" />
    <property name="ZipCode" />
    <property name="State" column="StateTypeID" />
    <property name="Province" column="ProvinceTypeID" />
    <property name="Country" column="CountryTypeID" />
    <property name="LastModifiedDate" />
    <property name="SessionActivityID" />

    <join table="Rep">
      <key column="RepID"/>
      <property name="RepNumber" />
    </join>
</class> 
```

感谢您在高级方面的任何帮助！如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:36:34.170

你的`RepAddress`类应该有一个实例的引用（在文档中`Rep`查找）`many-to-one`

由于`RepNumber`不是 PK，因此您需要查询来获取`Rep`实例。然后你只需分配它。

如果您有`RepID`，您将能够执行以下操作，这不需要数据库往返：

```
repAddress.Rep = session.Load<Rep>(repId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:40:01.247

NHibernate 级联：

实体与其他对象有关联，这可能是与单个项目的关联（多对一）或与集合的关联（一对多，多对任意）。无论如何，您可以告诉 NHibernate 自动遍历实体的关联，并根据级联选项进行操作。例如，使用 save-update 级联将未保存的实体添加到集合中将导致它与其父对象一起保存，而无需我们方面的任何明确说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:08:15.240

我会说：这是纯粹的业务逻辑。不要试图让NH为你做这件事。

通常，当您在 UI (DTO) 中的数据和数据库中的实体之间做出区别时会容易得多。这允许在将数据存储到数据库之前解释来自 UI 的数据的逻辑。当您在 UI 中有实体时，您很快就会迷失方向。

# php - 语法错误，出现意外的 T_STRING

> ID：14510197
> 
> 赞同：-2
> 
> 时间：2013-01-24T20:32:49.277
> 
> 标签：php, syntax-error

我正在尝试将图像添加到我的脚本中，但我不断收到以下错误：

解析错误：语法错误，第 59 行 /home/paidtosi/public_html/pages/shoutbox/index.php 中的意外 T_STRING

这是第 59 行：

```
$image24 = "<img src="pulpit.jpg" alt="Pulpit rock" width="304" height="228">" 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:35:27.917

要在双引号字符串中使用双引号，您必须使用`\"`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:35:50.523

```
$image24 = '<img src="pulpit.jpg" alt="Pulpit rock" width="304" height="228">'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T20:36:06.950

用这个替换你的行：

```
 $image24 = '<img src="pulpit.jpg" alt="Pulpit rock" width="304" height="228">'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T20:37:00.360

您是否尝试转义双引号内的双引号？或者对整个字符串使用单引号，同时保持双引号不变。

# mysql - 使用 ORDER BY 子句时的 Mysql SLOW UNION 查询

> ID：14510201
> 
> 赞同：0
> 
> 时间：2013-01-24T20:33:12.770
> 
> 标签：mysql, performance

我有两张表：附件和订单。

[accessories.category] ​​包含一个类别列表，即 Red、Green、Blue ... orders 表包含过去订单的列表。

我要选择：

```
10 records from [accessories.category] WHERE category = 'Red' AND
10 records from [accessories.category] WHERE category = 'Green' AND
10 records from [accessories.category] WHERE category = 'Blue' 
```

我还想引用连接 [accessories.catno] 的订单表，它等于 [orders.catno]，仅显示 [accessories.stocklevel] >0 的产品，并按 COUNT(orders.sold) DESC 订购记录集（显示畅销商品第一的）。

因为我想从每个类别中获取一组记录，所以我认为 UNION ALL 查询是合适的，而且确实有效。问题是投入生产的速度不够快，因为在我的开发盒上执行需要 0.3 秒。如果我删除“ORDER BY sold DESC”，查询只需 0.0236 秒，这是可以接受的。问题是我不能丢失 ORDER BY。

顺便说一句：我已经索引了我需要的所有字段。这是查询：

```
(SELECT 
accessories.catno, 
accessories.category, 
accessories.header, 
accessories.description, 
accessories.specialoffer, 
accessories.picture, 
accessories.unit, 
accessories.addinfo, 
accessories.post, 
accessories.price, 
accessories.vat, 
accessories.soundclip, 
COUNT(orders.catno) AS sold 
FROM 
accessories, orders 
WHERE 
orders.catno = accessories.catno 
AND 
accessories.category = 'Red' 
AND accessories.stocklevel > 0 AND 
accessories.category = 'Red' 
GROUP BY catno 
ORDER BY sold DESC 
LIMIT 10) 

UNION ALL 

(SELECT 
accessories.catno, 
accessories.category, 
accessories.header, 
accessories.description, 
accessories.specialoffer, 
accessories.picture, 
accessories.unit, 
accessories.addinfo, 
accessories.post, 
accessories.price, 
accessories.vat, 
accessories.soundclip, 
COUNT(orders.catno) AS sold 
FROM 
accessories, orders 
WHERE 
orders.catno = accessories.catno 
AND 
accessories.category = 'Green' 
AND accessories.stocklevel > 0 AND 
accessories.category = 'Green' 
GROUP BY catno 
ORDER BY sold DESC 
LIMIT 10) 

UNION ALL

(SELECT 
accessories.catno, 
accessories.category, 
accessories.header, 
accessories.description, 
accessories.specialoffer, 
accessories.picture, 
accessories.unit, 
accessories.addinfo, 
accessories.post, 
accessories.price, 
accessories.vat, 
accessories.soundclip, 
COUNT(orders.catno) AS sold 
FROM 
accessories, orders 
WHERE 
orders.catno = accessories.catno 
AND 
accessories.category = 'Blue' 
AND accessories.stocklevel > 0 AND 
accessories.category = 'Blue' 
GROUP BY catno 
ORDER BY sold DESC 
LIMIT 10) 
```

不确定我是否在此查询中要求太多，或者是否需要重新考虑。有任何想法吗？

添加了 EXPLAIN 的输出。

![解释输出](../Images/aa3c8f4659f30c72297d8117570ef039.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:07:34.317

正如亚历克斯建议的那样，您可以制作一个专栏并使用触发器使其保持最新状态。或者您可以定期运行查询（每小时？每 5 分钟？每 1 分钟？）并将结果保存在另一个表中（或者更好的是，缓存我猜你正在从中生成的 html 并完全避免查询）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:49:03.667

试试这个查询，虽然它未经测试，但试一试

```
SET @level = 0;
SET @group = '';

SELECT 
    *
FROM (
    SELECT
      accessories.catno,
      accessories.category,
      accessories.header,
      accessories.description,
      accessories.specialoffer,
      accessories.picture,
      accessories.unit,
      accessories.addinfo,
      accessories.post,
      accessories.price,
      accessories.vat,
      accessories.soundclip,
      COUNT(orders.catno)      AS sold,
          @level := IF(@group = accessories.category, @level+1, 1) AS level, 
          @group := accessories.category as E_Group 
    FROM accessories,
      orders
      left join orders
        on orders.catno = accessories.catno
    WHERE accessories.stocklevel > 0
    GROUP BY orders.catno, accessories.category
    ORDER BY orders.sold DESC
) rs
WHERE level < 11 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:54:54.920

试试这个查询

```
 (  SELECT * FROM ( SELECT
accessories.catno, 
accessories.category, 
accessories.header, 
accessories.description, 
accessories.specialoffer, 
accessories.picture, 
accessories.unit, 
accessories.addinfo, 
accessories.post, 
accessories.price, 
accessories.vat, 
accessories.soundclip, 
COUNT(orders.catno) AS sold 
FROM 
accessories, orders 
WHERE 
orders.catno = accessories.catno 
AND 
accessories.category = 'Red' 
AND accessories.stocklevel > 0 AND 
accessories.category = 'Red' 
GROUP BY catno )
ORDER BY sold DESC 
LIMIT 10 )

UNION ALL 

( SELECT * FROM (SELECT
accessories.catno, 
accessories.category, 
accessories.header, 
accessories.description, 
accessories.specialoffer, 
accessories.picture, 
accessories.unit, 
accessories.addinfo, 
accessories.post, 
accessories.price, 
accessories.vat, 
accessories.soundclip, 
COUNT(orders.catno) AS sold 
FROM 
accessories, orders 
WHERE 
orders.catno = accessories.catno 
AND 
accessories.category = 'Green' 
AND accessories.stocklevel > 0 AND 
accessories.category = 'Green' 
GROUP BY catno )
ORDER BY sold DESC 
LIMIT 10)

UNION ALL

( SELECT * FROM ( SELECT 
accessories.catno, 
accessories.category, 
accessories.header, 
accessories.description, 
accessories.specialoffer, 
accessories.picture, 
accessories.unit, 
accessories.addinfo, 
accessories.post, 
accessories.price, 
accessories.vat, 
accessories.soundclip, 
COUNT(orders.catno) AS sold 
FROM 
accessories, orders 
WHERE 
orders.catno = accessories.catno 
AND 
accessories.category = 'Blue' 
AND accessories.stocklevel > 0 AND 
accessories.category = 'Blue' 
GROUP BY catno )
ORDER BY sold DESC 
LIMIT 10) 
```

# firefox-addon - Firefox Add-On , 如何返回面板显示的网页

> ID：14510202
> 
> 赞同：0
> 
> 时间：2013-01-24T20:33:12.863
> 
> 标签：firefox-addon, firefox-addon-sdk

我开发了一个实现小部件的插件，小部件包含一个面板，面板包含一个名为 display.html 的页面。display.html 显示我需要的一些信息，最后有一个按钮可以转到下一个页面，该页面包含一个名为 display2.html 的页面。现在的问题是我想随时返回上一页。我无法向 display2.html 添加任何内容（例如返回的按钮或链接）
我想知道是否有办法通过右键单击小部件或使用任何其他事件返回到 display.html。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T21:18:07.973

面板中没有典型的导航控件，因此您需要自己提供后退按钮。

# wijmo - Wijgrid：警报“defaultAfterCellEdit：c 为空”

> ID：14510203
> 
> 赞同：1
> 
> 时间：2013-01-24T20:33:16.040
> 
> 标签：wijmo

从数组中删除元素后

```
afterCellUpdate: function(e, args) {
        d = $('#my-grid').wijgrid('data');
        for(var i in d) {
            // remove element if Zero or is not a Number
            if ((parseFloat(d[i].qty) == 0) ||
                (isNaN(parseFloat(d[i].qty)))) {
                d.splice(i,1);
            }
        }
        $('#my-grid').wijgrid('ensureControl', true);
} 
```

将导致此警报

```
defaultAfterCellEdit: c is null 
```

我该如何处理这个消息？

[http://wijmo.com/topic/defaultaftercelledit-c-is-null/](http://wijmo.com/topic/defaultaftercelledit-c-is-null/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T06:45:40.020

出现此问题的原因是您在 afterCellEdit 事件处理程序中重新绑定网格，而调用该事件的网格代码仍在执行。更好的解决方案是使用在每一行中呈现的“删除”按钮。

您可以参考 wijmo 论坛链接，即[http://wijmo.com/topic/defaultaftercelledit-c-is-null/](http://wijmo.com/topic/defaultaftercelledit-c-is-null/)以获取完整说明。

# symfony - 如何向 SonataMediaBundle 添加其他文件扩展名？

> ID：14510205
> 
> 赞同：1
> 
> 时间：2013-01-24T20:33:20.937
> 
> 标签：symfony, symfony-sonata

我需要上传其他文件类型，如（.ttf），但我不能。

现在，我正在 DependencyInjection 中编辑默认源文件 configuration.php。我不，这是最糟糕的解决方案，但我不知道如何正确地做到这一点。

在他们的文档中，他们不建议任何配置。

[SonataMediaBundle 文档](https://github.com/sonata-project/SonataMediaBundle/blob/master/Resources/doc/reference/advanced_configuration.rst)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-09T14:04:50.910

在您的 SonataMediaBundle 配置中，您必须添加`allowed_extensions`和`allowed_mime_types`参数。

文件提供者的配置示例：

```
sonata_media:
    providers:
        file:
            allowed_extensions: ['ttf', 'pdf']
            allowed_mime_types: ['application/octet-stream', 'application/pdf'] 
```

# html - 列表未在 IE7/8 中正确显示。图像、边界半径等

> ID：14510214
> 
> 赞同：0
> 
> 时间：2013-01-24T20:33:46.250
> 
> 标签：html, css, list, sass, css-position

首先，jsfiddle：http: [//jsfiddle.net/MhFk4/2/](http://jsfiddle.net/MhFk4/2/)

在 IE9 中一切正常，但在 IE8 及以下版本我遇到了问题.. 在开发站点上，IE8 中只显示了一个按钮（但在小提琴上它显示了，但边框半径是'不能正常工作？）

这是实际的开发站点，看看 IE8 在那里做了什么：http: [//tinyurl.com/bxy449e](http://tinyurl.com/bxy449e)

```
.view-home-cta-view {
ul {
    list-style: none;
    margin: 40px 0 0;
    padding: 0;
    height: 380px;

    li {
        float:left;
        margin: 0 25px 0 0;
        position:relative;

        .views-field-field-cta-image {
            border: 10px solid #fff;
            @include border-radius(150px);
            width:270px;
            box-shadow:0 0 25px rgba(0, 0, 0, 0.7);

            -moz-background-clip: padding; 
            -webkit-background-clip: padding-box; 
            background-clip: padding-box;

            img {
                max-width:100%;
                height: auto;
                @include border-radius(140px);
            }
        }
        .views-field-field-regular-link {
            font-family: $o;
            font-size:22px;
            width:100%;
            position:absolute;
            bottom:14px; // 60px up from bottom
            left: 0;
            z-index: 3000;
            a {
                color:#fff;
                text-decoration: none;
                background: $green;
                display:block;
                text-align:center;
                line-height:22px;
                padding: 13px 0 15px;
                @include border-radius(5px);
                box-shadow:0 0 10px rgba(0, 0, 0, 0.7);
                @include transition(0.5s);
                &:hover {
                    background: lighten($green,5%);
                }
            }
        }
        .views-field-field-attachment-link {
            font-family: $o;
            font-size:16px;
            width:100%;
            position:absolute;
            bottom:-20px;
            left:0;
            a {
                color:#fff;
                text-decoration: none;
                background: $brown;
                display:block;
                text-align:center;
                @include border-radius(0 0 5px 5px);
                margin: 0 20px;
                padding: 8px 0 10px;
                line-height:16px;
                box-shadow:0 0 7px rgba(0, 0, 0, 0.6);
                @include transition(0.5s);
                &:hover {
                    background: lighten($brown,5%);
                }
            }
        }

        &.views-row-last {
            margin-right: 0;
        }
    }
}} 
```

所有的 SCSS 代码都在 JSfiddle 中（带有 mixins 和颜色变量）。如果有人能对此有所了解，我将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:59:23.480

这里的问题围绕着`z-index`，我设法通过将 a`z-index`应用于元素内部的每个容器 div并在其本身上`li`添加一个额外的来解决它。`z-index``li`

# python - 是否有用于对 Big-O 复杂性进行编程操作的库？

> ID：14510216
> 
> 赞同：4
> 
> 时间：2013-01-24T20:33:48.727
> 
> 标签：python, complexity-theory, time-complexity, asymptotic-complexity, sympy

我对可以推断其自身时间复杂度的编程语言感兴趣。为此，以某种方式以编程方式表示时间复杂度将非常有用，这将允许我执行以下操作：

```
f_time = O(n)
g_time = O(n^2)
h_time = O(sqrt(n))

fastest_asymptotically = min(f_time, g_time, h_time)  # = h_time
total_time = f_time.inside(g_time).followed_by(h_time)  # = O(n^3) 
```

我目前正在使用 Python，但我并没有特别依赖于一种语言。我已经尝试过[sympy](http://sympy.org/en/index.html)，但我无法在那里找到我需要的开箱即用的东西。

是否有提供此功能的库？如果没有，是否有一种简单的方法可以使用符号数学库完成上述操作？

**编辑**：我按照[@Patrick87的建议编写](https://stackoverflow.com/users/847269/patrick87)[了一个简单的库](https://github.com/perimosocordiae/bigO)，它似乎有效。不过，我仍然对这个问题是否有其他解决方案感兴趣。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-25T17:56:15.400

SymPy 目前仅支持在 0 处展开（您可以通过执行移位来模拟其他有限点）。它不支持算法分析中使用的无穷大扩展。

但它会是一个很好的基础包，如果你实现它，我们很乐意接受补丁（注：我是 SymPy 核心开发人员）。

请注意，通常问题很棘手，特别是如果您有两个变量，甚至是符号常量。如果您想支持振荡功能，这也很棘手。编辑：如果您对振荡函数感兴趣，[这个](https://groups.google.com/d/topic/sympy/h3aVz3y3n7g/discussion)SymPy 邮件列表讨论会提供一些有趣的论文。

编辑 2：我建议不要在不使用计算机代数系统的情况下尝试自己从头开始构建它。您最终将不得不编写自己的计算机代数系统，这是大量的工作，如果您想正确地完成并且不让它变慢，甚至需要更多的工作。已经存在大量系统，包括许多可以充当代码库的系统（例如 SymPy）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:02:02.220

如果您只使用大 O 表示法并且对一个函数的增长速度是否比另一个函数更快或更慢感兴趣，渐近地说......

1.  给定函数 f 和 g
2.  使用计算机代数包计算当 n 趋于 f(n)/g(n) 的无穷大时的极限
3.  如果极限发散到+无穷大，那么 f > g - 在 g = O(f) 但 f != O(g) 的意义上。
4.  如果极限发散到 0，则 g < f。
5.  如果极限收敛到一个有限数，则 f = g（在 f = O(g) 和 g = O(f) 的意义上）
6.  如果限制未定义...击败我！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T21:12:15.507

实际上，您正在构建/寻找可以处理的**表达式简化器：**

*   **+**（用你的话来说`followed_by`：）
*   *****（用你的话来说`inside`：）
*   **^，日志，！**（表示复杂性）
*   **变量**（如`n`, `m`）
*   **常数**（如`2^n`）

例如，正如您给出的那样`f_time.inside(g_time).followed_by(h_time)`，它可能是如下表达式：

`n*(n^2)+(n^(1/2))`

，并且您期望处理器将其输出为：`n^3`.

所以一般来说，你可能想要使用一个[通用的表达式简化](https://stackoverflow.com/questions/7540227/strategies-for-simplifying-math-expressions)器（如果你想让它变得有趣，去检查[Mathemetica](http://www.wolfram.com/learningcenter/tutorialcollection/MathematicsAndAlgorithms/MathematicsAndAlgorithms.pdf)是如何做到的）来得到一个简化的表达式`n^3+n^(1/2)`，然后你需要一个额外的处理器来选择这个术语表达式的最高复杂性并摆脱其他术语。这很容易，只需使用一个表格来定义每种符号的复杂性顺序。

请注意，在这种情况下，表达式只是符号，您应该将其写为`string`（例如：）`f_time = "O(n)"`，而不是函数。

# java - setMargins() 不起作用 - Android

> ID：14510223
> 
> 赞同：0
> 
> 时间：2013-01-24T20:34:12.070
> 
> 标签：java, android, textview, android-relativelayout, margins

我一直在寻找这个问题的解决方案一个多小时，但没有一个有效。：/

我想将 TextView 的上边距设置为取决于整数位置的值。但不知何故，利润不会出现......

```
public void addElements(int position, String title,int colour, RelativeLayout ld){
            int px = (int) TypedValue.applyDimension(
                    TypedValue.COMPLEX_UNIT_DIP,
                    1, 
                    res.getDisplayMetrics()
            );

            int pos = 168*px;

            LayoutParams params;

            params = new LayoutParams(LayoutParams.MATCH_PARENT,144*px);
            params.setMargins(0, 168, 0, 0);

            TextView tv = new TextView(activity);
            tv.requestLayout();
            tv.setBackgroundResource(colour);
            tv.setText(title);
            tv.setSingleLine(false);
            ld.addView(tv, params);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:43:44.683

试试这个：

```
 RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.MATCH_PARENT, 144);
    params.setMargins(0, 168, 0, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:40:46.917

LayoutMargins 是为 ViewGroup 保留的，例如 RelativeLayout、LinearLayout 等。大多数常见的视图（例如 TextView）使用填充来添加额外的间距。

这应该有效：

`tv.setPaddingRelative(0,168,0,0);`

# javascript - Javascript 二维数组

> ID：14510225
> 
> 赞同：2
> 
> 时间：2013-01-24T20:34:38.860
> 
> 标签：javascript, arrays, multidimensional-array

我已经声明了一个二维数组，如下所示：

```
a = [[]] 
```

但是，当我尝试使用 0 以外的第一个维度索引给出第二个维度值时，它不起作用：

```
a[1][0] = "foo" //returns error 
```

有没有比手动将所需的每个索引定义为数组更好的方法，即：

```
a[1] = [];
a[2] = [];
a[3] = [];
//et cetera 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T20:48:30.860

javascript 中不存在 N 维数组 - 您只需制作包含数组作为元素的数组。

您收到错误是因为`a = [[]];`声明了一个包含**一个**元素的数组，而该元素恰好也是一个数组。因此`a[0]`是内部数组，但`a[1]`不存在，因为您从未声明过它。正确声明“二维数组”的最简单方法是使用循环：

```
var outerArray = [];
var numInternalArrays = 5;
for (var i = 0; i < numInternalArrays; i++) {
    outerArray[i] = [];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T21:46:12.397

如果你知道根数组应该有多少个元素，你可以这样做：

```
var arr = 
    (Math.pow(2,10)-1).toString(2)  // Binary string of 1s. Its length being 10
    .split('')                      // Create an array from this string
    .map(function(){return [];});   // Map a new empty array to each index

console.log(arr);                   // [[],[],[],[],[],[],[],[],[],[]] 
```

这完成了同样的事情：

```
for(var arr = [], i=10; i--; arr[i]=[]); 
```

`arr`由于javascript没有块作用域，因此无需在for循环之外声明，它将被添加到执行它的作用域中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-24T20:47:43.177

```
a = [[]] 
```

这是一个数组，第一项是数组。这就是为什么索引到第一项仍然有效（a[0][0]）。

如果要将第二项作为数组访问，则需要将数组创建为

```
a = [[],[]] 
```

[有关如何在 JavaScript 中创建二维数组的](https://stackoverflow.com/questions/966225/how-can-i-create-a-two-dimensional-array-in-javascript)示例，请参阅此问题 ？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T20:36:07.920

如果我理解正确，请使用循环：

```
for (var i = y; i--; a[i] = []); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-24T20:46:53.573

javascript 中没有多维数组。
您正在做的是一个数组数组，但最外面的数组只有一个元素（即元素 0），其值是另一个数组。所以 a[1]（或更一般地 a[1][x]）是无效的，因为最外面的数组只有一个元素。
所以你可以做 a[0][x] = "foo" 但不能反过来。

因此，您可以使用 for 循环初始化数组，也可以执行类似 var a =[[][][][][]]; 之类的操作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-24T21:24:59.217

您可以让数组数组以如下方式开始：

```
var a = []; // start with the column array 
```

然后，当您想将某些东西放在某个位置时，`[i][j]`我们可以将“i”称为行索引，将“j”称为列索引。

```
if (!a[i]) {   // check for row existing
    a[i] = []; // .. and create it if not 
}
a[i][j] = 'foo'; // put something in the array cell 
```

请注意，这只有效，因为我们总是在创建新行数组后立即将其放入新行数组中。如果你把 0 或 "" 放在那里而不是 'foo'，它可能不起作用。

javascript中有很多“假”的东西，包括“空”、“未定义”和“0”，我只是不知道一个空数组或一个包含一个空字符串元素的数组是否被认为是假的. 因此，您必须进行一些实验，以准确检测丢失的行数组，以便将其添加进去。

# php - 使用 utf8 时 PDO/MySQL 的神秘持续时间

> ID：14510229
> 
> 赞同：1
> 
> 时间：2013-01-24T20:34:57.190
> 
> 标签：php, mysql, utf-8, pdo

我正在构建一个使用 PHP / PDO-MySQL 的 webapp，但是我的页面生成时间有问题。数据库完全设置为 utf8，但是当我使用`PDO::quote()`时，引用一个字符串大约需要 1 秒。（太长了……）

当我`SET NAMES utf8`用来设置字符集（因此它在 my.ini 中设置）时，`PDO::quote()`只需要 0.00001 秒，**但** `SET NAMES utf8`需要 1 秒。那么，我怎样才能减少*这两个*持续时间？

* * *

*   PHP版本：*5.4.3*
*   MySQL 版本：*5.5.24*

# sql - 在产品上运行的这个简短的 SQL 脚本的哪一部分不是最佳的？

> ID：14510232
> 
> 赞同：-1
> 
> 时间：2013-01-24T20:35:08.263
> 
> 标签：sql, sql-server, database, tsql

我在我们的生产数据库上运行一个脚本，引用两个表：我们的用户表（其中 3700 个）和他们所做的报价表（其中 280000 个）。Quote 是我们应用程序中的主要对象，一个非常大的对象，为其创建和填充了许多数据表。我的目标是从所有报价中清除数据库，但由一小部分用户组成的报价除外。

我首先创建一个临时表，其中包含这些用户的 id（它也在脚本中使用），然后创建一个游标，该游标在主表中运行，用于列出引号以及从用户组创建的那些引号必要的清洁。

我看到这个脚本将执行大约 26 小时，我认为这很奇怪，因为我需要大约 15 分钟来恢复数据库，我猜最重的 sql 在那里执行。但是，数据库的重量超过 100GB。

是否有脚本的某些部分是我非常不理想的，或者您有一些建议如何通过更短的执行来完成。

我们正在运行 SQL Server 2008 R2。

这是脚本的草图。

```
CREATE table #UsersIdsToStay(user_id int)
INSERT INTO #UsersIdsToStay
select user_id 
from users 
where user_name like '%SOMESTRING '
-----
declare @QuoteId int
declare @UserId int

declare QuoteCursor cursor for 
select DISTINCT QuoteId, UserId
from QuotesTable
where UserId not in 
    (
        select * from #UsersIdsToStay
    )

open QuoteCursor
while 1=1
begin
    fetch QuoteCursor into @QuoteId, @UserId
    if @@fetch_status != 0 break

    -- all the deletions from related tables are executed here using @QuoteId and @UserId
    exec('delete from QuoteHistory where QuoteId = ' + @QuoteId + ' and UserId = ' + @UserId )
    exec('delete from QuoteRevisions where QuoteId = ' + @QuoteId + ' and UserId = ' + @UserId )
    exec('delete from QuoteItems where QuoteId = ' + @QuoteId + ' and UserId = ' + @UserId )
    ....

end
close QuoteCursor;
deallocate QuoteCursor 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:05:19.747

游标限制您一次只能删除每个相关表上的单个 User_Id/Quote_Id 组合。通过使用连接，您将能够批量删除。

您还可以使用公用表表达式 (CTE) 切换临时表。如果这是一个一次性脚本，那么临时表应该没问题，但对于生产代码，我会创建一个 CTE。

```
 if OBJECT_ID('tempdb..#quotesToDelete') is not null
            drop table #quotesToDelete

    select distinct 
                ut.user_id, 
                qt.quote_id
        into #quotesToDelete
    from    dbo.QuotesTable qt (nolock)
        inner join dbo.UsersTable ut (nolock)
            on qt.user_id = ut.user_id
    where ut.user_name not like '%SOMESTRING '

    -- all the deletions from related tables are executed here using @QuoteId and @UserId

    -- relatedtableA
    delete a
    from relatedtableA a
        inner join #quotesToDelete b
        on a.user_id = b.user_id
        and a.quote_id = b.quote_id

    -- relatedtableB
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:04:16.140

由于您不显示删除，因此无法向您展示如何避免光标。

但是可以在没有临时工的情况下很容易做到这一点

```
select DISTINCT QuoteId, UserId
from QuotesTable
where UserId not in 
    (
        select user_id 
        from users 
        where user_name like '%SOMESTRING '
    ) 
```

或者

```
select DISTINCT QuoteId, UserId
from QuotesTable 
left join UserId 
  on UserId.user_id = QuotesTable.UserId 
 and user_name like '%SOMESTRING '
where UserId.user_id is null 
```

问题是游标，你不需要它

```
CREATE table #QuotesToDelete(QuoteId int, UserID int)
insert into #QuotesToDelete
select DISTINCT QuoteId, UserId
    from QuotesTable 
    left join UserId 
      on UserId.user_id = QuotesTable.UserId 
     and user_name like '%SOMESTRING '
    where UserId.user_id is null 
delete  QH
from QuoteHistory QH 
join #QuotesToDelete 
  on #QuotesToDelete.QuoteId = QH.QuoteId 
 and #QuotesToDelete.UserID  = QH.UserID
delete  QR
from QuoteRevisions QR 
join #QuotesToDelete 
  on #QuotesToDelete.QuoteId = QR.QuoteId 
 and #QuotesToDelete.UserID  = QR.UserID 
```

# ruby-on-rails-3 - 如何创建感谢页面？

> ID：14510234
> 
> 赞同：-1
> 
> 时间：2013-01-24T20:35:27.433
> 
> 标签：ruby-on-rails-3

我正在尝试创建一个感谢页面，我的路线运行良好，因为我测试了它的 url 并且运行良好，但是当我尝试在创建操作中重定向时，我得到：

```
Routing Error

No route matches {:action=>"thank_you", :locale=>:en, :controller=>"appointments"} 
```

控制器

```
 def create
    @appointment = Appointment.new(params[:appointment])

      if @appointment.save
        #send email
        AppointmentMailer.appointment_confirmation(@appointment).deliver
        AppointmentMailer.new_appointment(@appointment).deliver
        redirect_to :action => "thank_you"
      else
        render :action => 'new', :alert => @appointment.errors.full_messages.split(', ')
      end
  end

  def thank_you
      @appointment = Appointment.find(params[:id])
  end 
```

路线

```
resources :appointments, :except => :new do
      member do
        get :thank_you
      end
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:39:23.580

您需要[将其添加为 RESTful 操作](http://guides.rubyonrails.org/routing.html#adding-more-restful-actions)（或假定默认匹配路由）。

简而言之：

```
resources :appointments do
  member do
    get 'thank_you'
  end
end 
```

或者：

```
resources :appointments do
  get 'thank_you', :on => :member
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:40:40.567

要获得一个新页面，您需要做的不仅仅是编辑控制器。

1.  编辑 config/routes.rb 并包含

    ```
    match "/appointments/thank_you" => "appointments#thank_you" 
    ```

2.  您可能想`render`在控制器中插入命令，这会给您带来一个感谢您必须创建的视图...

# postgresql - PostgreSQL 与 Mac 上的 Homebrew

> ID：14510237
> 
> 赞同：18
> 
> 时间：2013-01-24T20:35:28.710
> 
> 标签：postgresql, osx-mountain-lion

首先，我使用自制软件并安装 postgresql，并收到以下成功消息：

> ==> 总结 /usr/local/Cellar/postgresql/9.2.2：2819 个文件，39M，68 秒内建好

然后我需要运行这个命令：

```
initdb `brew --prefix`/var/postgres -E utf8 
```

但这是我得到的信息：我该怎么办？也在 OSX 10.8.2 上运行

> 属于该数据库系统的文件将归用户“JonyIve”所有。该用户还必须拥有服务器进程。
> 
> 数据库集群将使用语言环境“en_US.UTF-8”进行初始化。默认文本搜索配置将设置为“英语”。
> 
> initdb: 目录 "/usr/local/var/postgres" 存在但不为空 如果要创建新的数据库系统，请删除或清空目录 "/usr/local/var/postgres" 或使用参数运行 initdb除了“/usr/local/var/postgres”。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-23T02:35:04.180

假设这是新安装而不是重新安装，我认为解决您的问题很简单：

```
initdb `brew --prefix`/var/postgres/data -E utf8 
```

通常，数据目录称为“数据”，位于 postgresql 主目录下。这允许共享日志文件访问等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-14T07:23:36.160

如果您知道可以在不破坏任何内容的情况下执行此操作，则另一种选择始终只是根据消息删除目录

> 删除或清空目录“/usr/local/var/postgres”

通过

`rm -rf /usr/local/var/postgres`

# javascript - 使用选项元素显示两个 div

> ID：14510239
> 
> 赞同：1
> 
> 时间：2013-01-24T20:35:40.633
> 
> 标签：javascript, jquery, html

我是 javascript 和 stackoverflow 的新手。

请暴露我的英语知识和javascript知识。

在这里......我的页面中有选择选项下拉菜单。我有div。

下面是我的代码，这在 Firefox 中运行良好，但在 ie 或 google chrome 中运行良好

```
function show_visibility(){
for(var i = 0,e = arguments.length;i < e;i++){
var myDiv = document.getElementById(arguments[i]).style;
myDiv.display = 'block';
}
}

function hide_visibility(){
for(var i = 0,e = arguments.length;i < e;i++){
var myDiv = document.getElementById(arguments[i]).style;
myDiv.display = 'none';
}
} 
```

这是我的html代码…………

```
<select style="width:205px;padding:4px;margin-left:1px;">
  <option onClick="show_visibility('foo1','foo4');hide_visibility('foo2','foo3', 'foo4','foo5','foo6','foo7') ">Program Eligibility Report</option>
  <option onClick="show_visibility('foo2','foo5');hide_visibility('foo1','foo3', 'foo4','foo6') ">Audit Report</option>
  <option onClick="show_visibility('foo3','foo6');hide_visibility('foo1','foo2', 'foo4','foo5') ">Status Change Report</option>
  <option value="option4">Family Affiliation Audit Report</option>
  <option value="option5">Marketing Category Report</option>
  <option value="option6">Pending Approval Report</option>
</select> 
```

对于上述代码在 Firefox 中完美运行，但在 IE 中无法运行

请在这里帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:44:18.760

您需要挂钩`onchange`SELECT 本身的事件，并从那里确定选择了哪个选项。

```
<select onchange="selChange(this)">... 
```

JS：

```
function selChange(select) {
    selectedValue = select.options[select.selectedIndex].value;
    if(selectedValue == 'whatever') {
    ....your code...
    }
} 
```

# api - BigCommerce PHP API Ciper 错误

> ID：14510241
> 
> 赞同：0
> 
> 时间：2013-01-24T20:35:43.753
> 
> 标签：api, bigcommerce

我正在使用 BigCommerce PHP API，当它尝试连接到我的商店或 webdav 商店时收到此错误：

*设置密码列表失败*

从同一台服务器，我通过命令行使用 cURL 连接到两个站点。我安装了启用 SSL 的 cURL php 模块。任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T20:49:17.877

我们使用基于以下内容的对象

```
<?php
// provision for laziness
if( 
    (array_key_exists('store_url', (array)$settings)) &&
    (array_key_exists('username', $settings)) && 
    (array_key_exists('api_key', $settings)) 
) {
    // Config Basic
    BC::configure(
        array(
            'store_url' => $settings['store_url'],
            'username'  => $settings['username'],
            'api_key'   => $settings['api_key']
        )
    );

    // Set Cipher if needed
    if(array_key_exists('cipher',$settings)) {
        BC::setCipher('RC4-SHA');
    } else {
        BC::verifyPeer(false);
    }

    // Set Proxy if needed
    if(array_key_exists('proxy',$settings)) {
        BC::useProxy($settings['proxy']['url'], $settings['proxy']['port']);
    }
}
// Run your code here... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:18:36.960

我正在使用 wamp 并测试了这个。

为了解决这个问题，我更新了连接 api 文件

curl_setopt($this->curl, CURLOPT_SSL_VERIFYPEER, 1); curl_setopt($this->curl, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($this->curl, CURLOPT_CAINFO, 'C:\xampp\htdocs\big\Bigcommerce\Certs\cacert.pem');

和文件来自

[http://curl.haxx.se/docs/caextract.html](http://curl.haxx.se/docs/caextract.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T22:46:13.620

我认为您必须启用“rsa_rc4_128_sha”密码。默认情况下它可能未启用。你能试一下吗

```
Connection::setCipher() 
```

在提出请求之前？默认情况下，这会将密码设置为默认密码。

在 BC github repos 中有一些关于此的历史 -

[https://github.com/bigcommerce/bigcommerce-api-php/pull/10](https://github.com/bigcommerce/bigcommerce-api-php/pull/10)

[https://github.com/bigcommerce/bigcommerce-api-php/pull/11](https://github.com/bigcommerce/bigcommerce-api-php/pull/11)

希望这可以帮助。

# php - Apache 不会使用 PHP 连接到 SQL Server

> ID：14510243
> 
> 赞同：2
> 
> 时间：2013-01-24T20:35:49.993
> 
> 标签：php, sql, sql-server, sql-server-2008, apache

我正在尝试通过 php 从 apache linux 服务器打开与 Windows 计算机上的 SQL Server 2008 的连接。我已经在防火墙上打开了适当的端口，但我得到了最模糊的错误

> 警告：mssql_connect() [function.mssql-connect]：无法连接到服务器：xxx.xxx.xx.xxx,xxxx

和：

```
$myServer = "xxx.xxx.xx.xxx,1433"; //with port number; tried both backslash and colon
$myUser = "un";
$myPass = "pw";
$myDB = "db"; 

//connection to the database
$dbhandle = mssql_connect($myServer, $myUser, $myPass)
  or die( mssql_get_last_message()); 
```

有没有办法获得更具体的错误信息？或者我可以通过某种方式测试两台计算机是否正在通信，以便我可以尝试开始定位问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:10:03.723

这是我用来将 PHP 连接到 MSSQL 从 Ubuntu 机器到 Windows SQL Server 的代码，我不知道它是否对你有帮助，但这段代码现在已经成功运行，所以我知道它可以在我们的环境中工作。 .

如您所见，我使用 PDO 而不是 mssql_* 函数。在 Ubuntu 上，我需要安装 php5-sybase 包来获取 dblib 驱动程序。

PHP：

```
<?php
try{
   $con = new PDO("dblib:dbname=$dbname;host=$servername", $username, $password);
}catch(PDOException $e){
   echo 'Failed to connect to database: ' . $e->getMessage() . "\n";
   exit;
}
?> 
```

/etc/odbc.ini

```
# Define a connection to the MSSQL server.
# The Description can be whatever we want it to be.
# The Driver value must match what we have defined in /etc/odbcinst.ini
# The Database name must be the name of the database this connection will connect to.
# The ServerName is the name we defined in /etc/freetds/freetds.conf
# The TDS_Version should match what we defined in /etc/freetds/freetds.conf
[mssqldb]
Description             = MSSQL Server
Driver                  = freetds
Database                = MyDB
ServerName              = mssqldb
TDS_Version             = 8.0 
```

/etc/odbcinst.ini

```
# Define where to find the driver for the Free TDS connections.
[freetds]
Description     = MS SQL database access with Free TDS
Driver          = /usr/lib/i386-linux-gnu/odbc/libtdsodbc.so
Setup           = /usr/lib/i386-linux-gnu/odbc/libtdsS.so
UsageCount      = 1 
```

/etc/freetds/freetds.conf

```
[global]
        # If you get out-of-memory errors, it may mean that your client
        # is trying to allocate a huge buffer for a TEXT field.  
        # Try setting 'text size' to a more reasonable limit 
        text size = 64512

# Define a connection to the MSSQL server.
[mssqldb]
        host = mssqldb
        port = 1433
        tds version = 8.0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-22T15:02:44.843

我今天遇到了同样的问题。这对我有用：

而不是这个

```
$myServer = "xxx.xxx.xx.xxx,1433"; //with port number; tried both backslash and colon 
```

尝试这个：

```
$myServer = "mssqldb"; //must correspond to [entry] in freetds.conf file 
```

在您的情况下，为了清楚起见，我将重命名条目并将完全限定的主机名用于配置文件中的条目

```
# Define a connection to the MSSQL server.
[mssqldbAlias]
        host = mssqldb.mydomain.com
        port = 1433
        tds version = 8.0 
```

**mssql_connect() 调用中的第一个参数必须对应于 freetds.conf 文件中的 [entry]。** 所以你的电话变成了

```
$myServer = "mssqldbAlias"; 
//connection to the database
$dbhandle = mssql_connect($myServer, $myUser, $myPass)
  or die( mssql_get_last_message()); 
```

# html - 滚动条当前夹在最终表格列下方

> ID：14510247
> 
> 赞同：7
> 
> 时间：2013-01-24T20:36:01.010
> 
> 标签：html, css, jsfiddle

是什么导致滚动条没有在这个小提琴的表格一侧被剪辑：http: [//jsfiddle.net/m4HB3/8/](http://jsfiddle.net/m4HB3/8/) 目前它位于最后一列下方，这意味着它占用了一些列空间和从而导致与表的对齐问题。

表格标题是固定的，因为我想要一个带有固定标题的滚动表格。

问题可能是为表格和各个列设置的宽度吗？

有人也可以在 jsfiddle 之外的脚本上发送他们的答案并将其直接放在浏览器上，因为我已经看到了一些示例，其中某些东西在 jsifddle 中工作，但在浏览器的主应用程序中却没有工作。

HTML：

```
 <table id="tableqanda" cellpadding="0" cellspacing="0">
    <thead>
    <tr>
        <th width="5%" class="questionno">Question No.</th>
        <th width="27%" class="question">Question</th>
        <th width="7%" class="option">Option Type</th>
        <th width="11%" class="image">Image</th>

    </tr>
    </thead>
    </table>
    <div id="tableqanda_onthefly_container">
    <table id="tableqanda_onthefly" cellpadding="0" cellspacing="0">
    <tbody>
        <tr class="tableqandarow">
<td width="5%" class="questionno">1</td>
<td width="27%" class="question">What is a RAM?</td>
<td width="7%" class="option">A-E</td>
<td width="11%" class="imagetd"><ul class="qandaul"><li>Lighthouse_4.jpg</li></ul></td>
</tr>
<tr class="tableqandarow">
<td width="5%" class="questionno">2</td>
<td width="27%" class="question">Name 3 car maneuvers you may do in a test?</td>
<td width="7%" class="option">A-F</td>
<td width="11%" class="imagetd"><ul class="qandaul"><li>Tulips_3.jpg</li></ul></td>
</tr>
    </tbody>
    </table>
    </div> 
```

CSS：

```
#tableqanda_onthefly_container
{
    width:100%;
    overflow-y: auto;
    overflow-x: hidden;
    max-height:25px;
}

#tableqanda_onthefly
{
    width:100%;
    overflow-y: auto;
    overflow-x: hidden;
    clear:both;
}

#tableqanda_onthefly td
{
    border:1px black solid;
    border-collapse:collapse;
}

#tableqanda, #tableqanda_onthefly{
    border:1px black solid;
    border-collapse:collapse;
    table-layout:fixed;
    word-wrap:break-word;
}       

#tableqanda{
    width:100%;
    margin-left:0;
    float:left;
}

#tableqanda td { 
    vertical-align: middle;
    border:1px black solid;
    border-collapse:collapse;
}

#tableqanda th{
    border:1px black solid;
    border-collapse:collapse;
    text-align:center;
}

.tableqandarow{
    border:1px black solid;
    border-collapse:collapse;
} 
```

**更新：**

[http://jsfiddle.net/m4HB3/37/](http://jsfiddle.net/m4HB3/37/)

我有一个完美运行的 js 小提琴。但是，如果您将代码复制到标准 html 中，则列不对齐。如果您可以使用表格侧面的滚动条使列与其标题正确对齐，那么这将是完美的答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T02:12:21.023

那对你有用吗？

在您的 div 中使用此处的 script/jQuery 滚动，稍微修改 css 以提供侧滚动。

**请参阅：http: [//jsfiddle.net/m4HB3/177](http://jsfiddle.net/m4HB3/177)**

**这是独立版本：[http ://webapper.pl/demo.html](http://webapper.pl/demo.html)**

我没有花太多时间在 CSS 上，但我相信你可以让它看起来很漂亮。

```
var ele = $('.scroll');
var scroll = 25;

$('.up').on('click',function() {
        ele.scrollTop( ele.scrollTop() - scroll );
});

$('.down').on('click',function() {
        ele.scrollTop( ele.scrollTop() + scroll );
}); 
```

或者您可以使用静态表格宽度（这也可以解决您的问题）：

[http://jsfiddle.net/m4HB3/178/](http://jsfiddle.net/m4HB3/178/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T01:16:27.867

这是基于[Sara的](https://stackoverflow.com/users/1684247/sara)[链接问题](https://stackoverflow.com/questions/13043837/scrollable-table-with-fixed-header)的小提琴：

# [**演示**](http://jsfiddle.net/eYFKg/)

**html**

```
<div id="tableContainer" class="tableContainer">
<table width="100%" cellspacing="0" cellpadding="0" border="0" class="scrollTable">
    <col width="10%" />
    <col width="54%" />
    <col width="14%" />
    <col width="22%" />
    <thead class="fixedHeader">
        <tr>
            <th class="questionno">Question No.</th>
            <th class="question">Question</th>
            <th class="option">Option Type</th>
            <th class="image">Image</th>
        </tr>
    </thead>
    <tbody class="scrollContent">
        <tr>
            <td class="questionno">1</td>
            <td class="question">What is a RAM?</td>
            <td class="option">A-E</td>
            <td class="imagetd"><ul class="qandaul"><li>Lighthouse_4.jpg</li></ul></td>
        </tr>
        <tr>
            <td class="questionno">2</td>
            <td class="question">Name 3 car maneuvers you may do in a test?</td>
            <td class="option">A-F</td>
            <td class="imagetd"><ul class="qandaul"><li>Tulips_3.jpg</li></ul></td>
        </tr>
        <tr>
            <td class="questionno">3</td>
            <td class="question">What is a RAM?</td>
            <td class="option">A-E</td>
            <td class="imagetd"><ul class="qandaul"><li>Lighthouse_4.jpg</li></ul></td>
        </tr>
        <tr>
            <td class="questionno">4</td>
            <td class="question">Name 3 car maneuvers you may do in a test?</td>
            <td class="option">A-F</td>
            <td class="imagetd"><ul class="qandaul"><li>Tulips_3.jpg</li></ul></td>
        </tr>
        <tr>
            <td class="questionno">5</td>
            <td class="question">What is a RAM?</td>
            <td class="option">A-E</td>
            <td class="imagetd"><ul class="qandaul"><li>Lighthouse_4.jpg</li></ul></td>
        </tr>
        <tr>
            <td class="questionno">6</td>
            <td class="question">Name 3 car maneuvers you may do in a test?</td>
            <td class="option">A-F</td>
            <td class="imagetd"><ul class="qandaul"><li>Tulips_3.jpg</li></ul></td>
        </tr>
        <tr>
            <td class="questionno">7</td>
            <td class="question">What is a RAM?</td>
            <td class="option">A-E</td>
            <td class="imagetd"><ul class="qandaul"><li>Lighthouse_4.jpg</li></ul></td>
        </tr>
        <tr>
            <td class="questionno">8</td>
            <td class="question">Name 3 car maneuvers you may do in a test?</td>
            <td class="option">A-F</td>
            <td class="imagetd"><ul class="qandaul"><li>Tulips_3.jpg</li></ul></td>
        </tr>
    </tbody>
</table>
</div> 
```

**css**

```
div.tableContainer {
    clear: both;
    border: 1px solid #963;
    overflow: auto;
}

html>body tbody.scrollContent {
    display: block;
    height: 100px;
    overflow: auto;
    width: 100%
}

html>body thead.fixedHeader tr {
    display: block
}

html>body td {
    box-sizing: border-box;
    border: 1px solid grey;
}

table .questionno {
    width: 10%;
}
table .question {
    width: 54%;
}
table .option {
    width: 14%;
}
table .image {
    width: 22%;
} 
```

# android - speex 和 jspeex 解码

> ID：14510251
> 
> 赞同：1
> 
> 时间：2013-01-24T20:36:09.230
> 
> 标签：android, decoding, speex, jspeex

Jspeex 有一种解码方法，如下所示：

```
 public static int decode(byte[] input, int offset, int length, byte[] output) throws StreamCorruptedException {

    SpeexDecoder decoder = new SpeexDecoder();
    decoder.init(0, 8000, 1, true, length);
    decoder.bits.read_from(input, offset, length);
    int o_offset = 0;
    while ( decoder.bits.getBufferSize() < length )
    {
        decoder.decodeToByteArray(output, o_offset);
        o_offset += 320;
    }

    return o_offset;
} 
```

作为输入，我给出了一个长度不确定的字节数组，但方法只是正确地填充了我的输出缓冲区。换句话说，我给出了一堆彼此相邻的帧，但是解码器可以处理连续的帧。但是有些机器速度很慢，所以我决定将 speex 与 jni 包装器一起使用。同样，我们有一个方法如下所示：

```
public short[] decode(byte[] frame)
{
    return decode(slot, frame);
}

private native static short[] decode(int slot, byte[] frame); 
```

以上 jni 包装的解码方法只接受单帧。所以我的问题是我们如何使用 jni 包装的 speex 对 jspeex 做完全相同的事情。

PS：我试图将连续帧分成单独的帧，但连续帧的长度与 number_of_frames X length_of_a_frame 不匹配。

对不起我的真棒（？）英语，提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-09T16:18:07.850

对于那些面临同样问题的人来说，这就是你的做法：你最好在 jni 中做。

```
for(int i=0;i<frames;i++) {
    if(speex_decode_int(dec_state, &dbits, output_buffer+i*dec_frame_size)!=0) {
        __android_log_print(ANDROID_LOG_ERROR, "Speex_jni", "Error in decoding");
        return (jint)0;
    }
} 
```

你需要知道`frames`寿数。

# powershell - 如何使用不在 MS Active Directory 中的 Powershell 查询 LDAP 组的成员

> ID：14510254
> 
> 赞同：2
> 
> 时间：2013-01-24T20:36:27.093
> 
> 标签：powershell, directory, ldap

我想要完成的只是返回一个 LDAP 组是否有任何成员。所以，我有一个组列表，我想查询每个组的成员列表，以确保每个组中至少有 1 个成员。

我正在使用 powershell，这不是 Active Directory。

这就是我目前正在尝试的

```
$user = "username"
$pwd = "password"
$de = "LDAP://[SERVERNAME]/cn=user,ou=people,o=company"
$deObject = New-Object -TypeName System.DirectoryServices.DirectoryEntry($de,$user,$pwd,'FastBind') 
```

这将返回一个 DirectoryEntry 对象（至少据我所知）。我真的看不到任何属性或任何东西，除非我执行以下操作：

```
$deObject.Name 
```

这将返回“用户”的 cn，仅此而已。有什么建议么？

我试过了：

```
$deObject.Properties
$deObject.Properties['member']
$deObject.Properties.Values['member'] 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T09:26:15.963

这将显示所有属性：

```
$deObject | Format-List * -force 
```

这将返回一个组中的成员数：

```
$deObject.member.Count 
```

# c# - 如何在 Sharepoint 站点工作流 2010 中获取当前用户？

> ID：14510256
> 
> 赞同：1
> 
> 时间：2013-01-24T20:36:34.530
> 
> 标签：c#, sharepoint-2010, workflow

在创建项目时，我试图在 sharepoint 站点工作流 2010 中找到当前登录的用户。基于用户，我想检索当前用户的项目经理。每次尝试检索当前用户名时，它都会提供**System Account**。

我什至尝试以其他用户身份登录，但仍将**系统帐户**显示为当前用户。

我尝试了以下选项：

```
SPUser user = workflowProperties.OriginatorUser;

SPUser user = SPContext.Current.Web.CurrentUser;

SPWeb web = SPContext.Current.Web;
SPUser user = web.CurrentUser;

 SPContext.Current.Web.CurrentUser.LoginName; 
```

但一切都失败了。确定我做错了什么。我不知道正确的程序。一些程序给我空或对象引用未设置为对象或系统帐户详细信息的实例。我什至尝试过使用提升的权限，它给了我空值。

```
SPSecurity.CodeToRunElevated elevatedSubmit = new SPSecurity.CodeToRunElevated(delegate
        {
            //SPUser user = SPContext.Current.Web.CurrentUser;
            //string strAssignedTo = user.Name;

            string sspURL = "http://localhost/PWA/default.aspx";
            SPSite site = new SPSite(sspURL);
            SPWeb web = site.OpenWeb();
            SPUser theUser = web.CurrentUser;
            string strUserName = theUser.Name;
        });

        SPSecurity.RunWithElevatedPrivileges(elevatedSubmit); 
```

在尝试通过工作流检索当前用户之前，我是否应该将用户显式添加为 SPUser 或任何其他更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:59:43.317

[SharePoint 2010 获取当前用户名/登录用户](http://yalla.itgroove.net/2011/12/sharepoint-2010-get-current-username-logged-in-user/)

检查此 StackExchange 答案以及 [获取当前用户与站点工作流交互](https://sharepoint.stackexchange.com/questions/26583/get-the-current-user-interacting-with-a-site-workflow)

如果您想在登录时获取当前用户，可以尝试这样的事情

```
SPWeb webSite = SPControl.GetContextWeb(SPContext);
SPUser spUser = webSite.CurrentUser;
string strUserName = spUser.LoginName; 
```

使用下面的这一行将返回**OriginatorUser 但是如果您没有以管理员身份登录，您将获得系统帐户用户名**

```
//This give the Login name e.g <domain>\<name>  
workflowProperties.OriginatorUser.LoginName; 
```

** 注意 ** 我注意到在您的代码中，您尝试获取/分配用户两次，如果您决定使用您的代码，则只需要此行

```
SPUser user = SPContext.Current.Web.CurrentUser; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T05:07:55.087

它似乎工作：

```
 SPUser user = this.workflowProperties.OriginatorUser; 
```

`RunWithElevatedPrivileges``system account`除了通过 reverto 调用获得的特权之外，还为您提供特权。

该代码是在[SPSecurity.RunWithElevatedPrivileges](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spsecurity.runwithelevatedprivileges.aspx)方法上执行的吗？

**这是我发现的另一个技巧：**

```
string ModifiedbyUserName = Convert.ToString(workflowProperties.Item.GetFormattedValue("Modified By")); 
```

看到这个：[工作流程中的登录用户](http://www.sharepointkings.com/2008/08/how-to-get-currently-logged-in-user-in.html)

有帮助有帮助！！

# java - 类型无法解析

> ID：14510258
> 
> 赞同：3
> 
> 时间：2013-01-24T20:36:42.043
> 
> 标签：java

这是我的代码：

```
import javax.swing.*;
import java.awt.*;

public class FirstGui extends JFrame {
    private JLabel label;
    private JButton button;

    public FirstGui() {

        setLayout(new FlowLayout());

        button = new JButton("Click for sex");
        add(button);

        label = new JLabel("");
        add(label);

        event e = new event();
        button.addActionListener(e);
    }

    public class event implements ActionListener {

        public void actionPerformed(ActionEvent e) {

            label.setText("how you can see wors here");

        }
    }

    public static void main(String [] args) {
        FirstGui gui = new FirstGui();

        gui.setDefaultCloseOperation(EXIT_ON_CLOSE);
        gui.setSize(200, 200);
        gui.setTitle("Title");
        gui.setVisible(true);

    }   

} 
```

它会产生一个错误：

ActionEvent 无法解析为 FirstGui.java /Test/src 第 26 行 Java 问题

ActionListener 无法解析为 FirstGui.java /Test/src 第 24 行 Java 问题

AbstractButton 类型中的方法 addActionListener(ActionListener) 不适用于参数 (FirstGui.event) FirstGui.java /Test/src 第 21 行 Java 问题

有什么问题？？？我是 Java 新手。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T20:40:39.363

导入以下内容：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:39:52.160

`ActionEvent`并`ActionListener`位于`java.awt.event`包装内。

进口`java.awt.*`是不够的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:42:26.293

Both of these classes require you to import them. You can do so by importing everything in java.awt.event:

```
import java.awt.event.*; 
```

or you may just want to import specifically what you're using:

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener; 
```

Remember that it's considered good practice to import individual classes (the latter option) instead of importing whole packages.

If you ever get stuck like this again, looking at [The Docs for any Java Class](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/ActionEvent.html) will tell you exactly what you need to import with a little diagram that looks like this:

```
java.lang.Object
   java.util.EventObject
      java.awt.AWTEvent
          java.awt.event.ActionEvent 
```

# python - 反向索引Python中的列表列表

> ID：14510259
> 
> 赞同：1
> 
> 时间：2013-01-24T20:36:44.697
> 
> 标签：python, list, list-comprehension

这应该是微不足道的。然而，我对我的把戏并不是 100% 确定的。

我有一个列表列表 (lol ;))，它捕获了图形节点之间的边缘关系。假设我有一个有*向*图，其中有 4 个节点标记为 0、1、2、3。边是 {(0,2),(0,3),(1,0),(1,3),(2, 1)} 所以邻接lol（叫它`a`）是

```
a = [[2,3],[0,3],[1],[]] 
```

我现在想找到发生率lol，即一个列表列表，指示哪些节点发生在哪些节点上。对于这个例子，发生率lol（称之为`b`）将是：

```
[[1], [2], [0], [0, 1]] 
```

我尝试了以下代码：

```
b = [[],[],[],[]]
[b[j].append(i) for i,x in enumerate(a) for j in x] 
```

这给了我正确的关联矩阵`b`。

第二步虽然可行，但理想情况下应该是`b[j].append(i) for i,x in enumerate(a) for j in x`，没有开`[`闭`]`。但是没有它，Python 解释器会发出语法错误。有没有更好的表达方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:31:18.877

您的问题本质上是关于使用列表推导来解决副作用。正如例如[这个问题的答案](https://stackoverflow.com/questions/5753597/is-it-pythonic-to-use-list-comprehensions-for-just-side-effects)所说，将其分解为一个 for 循环（或多个循环）是要走的路：

```
for i, x in enumerate(a):
    for j in x:
        b[j].append(i) 
```

另外，请注意，列表推导式用于以非常自然、简单的方式构建列表，就像数学家习惯做的那样。这就是为什么在 Python 中，语法需要方括号（在您的情况下）。

# jquery - jQuery 如果“this”包含

> ID：14510261
> 
> 赞同：26
> 
> 时间：2013-01-24T20:37:00.827
> 
> 标签：jquery, this, contains

我正在尝试将包含特定文本字符串的任何元素更改为红色。在我的示例中，我可以让子元素变为蓝色，但是我编写“替换我”行的方式有些不正确；不会发生红色变化。我注意到“包含”方法通常写成，`:contains`但我无法用`$(this)`.

```
$('#main-content-panel .entry').each(function() {
       $(this).css('color', 'blue');      
});         

$('#main-content-panel .entry').each(function() {
   if($(this).contains("Replace Me").length > 0) {
        $(this).css('color', 'red'); 
    }      
}); 
```

小提琴：http: [//jsfiddle.net/zatHH/](http://jsfiddle.net/zatHH/)

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2013-01-24T20:41:16.410

`:contains`是一个选择器。要检查选择器是否适用于给定变量，您可以使用[`is`](http://api.jquery.com/is/)：

```
if($(this).is(':contains("Replace Me")')) 
```

然而，在这种情况下，Vega 的解决方案更清洁。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-01-24T20:39:02.393

~~我认为`.contains`jQuery 中没有函数。~~有一个`.contains`函数，但该函数用于查看 DOM 元素是否是另一个 DOM 元素的后代。[请参阅 .contains 的文档。](http://api.jquery.com/jQuery.contains/) （[归功于@beezir](https://stackoverflow.com/users/1973612/beezir)）

我认为您正在寻找`:contains`选择器。请参阅下面的更多细节，

```
$('#main-content-panel .entry:contains("Replace Me")').css('color', 'red'); 
```

[http://jsfiddle.net/zatHH/1/](http://jsfiddle.net/zatHH/1/)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-01-24T20:48:05.307

您可以使用它`match`来查找特定元素内的文本

```
$('#main-content-panel .entry').each(function() {
    $(this).css('color', 'blue');      
});			

$('#main-content-panel .entry').each(function() {
    if($(this).text().match('Replace Me')) {
        $(this).css('color', 'red'); 
    }      
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div id="main-content-panel">
    <div class="entry">ABC</div>
    <div class="entry">ABC Replace Me</div>
    <div class="entry">ABC</div>
    <div class="entry">ABC Replace Me</div>
</div>
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-01-22T07:30:56.897

我认为我们应该将文本转换为小写。最好用小写和大写检查。

```
$('#main-content-panel .entry').each(function() {
    var ourText = $(this).text().toLowerCase(); // convert text to Lowercase
    if(ourText.match('replace me')) {
        $(this).css('color', 'red'); 
    }      
}); 
```

# actionscript-3 - “级联”资源包 flex/AS3

> ID：14510266
> 
> 赞同：0
> 
> 时间：2013-01-24T20:37:18.867
> 
> 标签：actionscript-3, apache-flex, air, resources

我有一个使用本地化的 adobe Air 应用程序。该应用程序`/locale/en_US/resources.properties`默认使用定义的资源，但用户可以通过我们数据中的标志切换到法语。

我的问题很简单，但我一直无法找到相关文档...

`en_US`如果在捆绑包中找不到特定条目，我希望应用程序默认为捆绑包中的资源条目`fr_FR`。

因此，如果我调用`{resourceManager.getString('resources','foo.bar')}`但未`foo.bar`在法语包中定义（并且登录的用户是法语），则默认为我在英语包中定义的内容。

有没有人在 Air 应用程序中进行过类似的工作？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:13:41.643

您需要将[localeChain](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/resources/IResourceManager.html#localeChain)设置`resourceManager`为一个数组，其中第一个值是主要语言，第二个是后备语言。应该是这样的：

```
resourceManager.localeChain = [ "fr_FR", "en_US" ]; 
```

这将告诉 Flex 首先在资源中查找键`fr_FR`，如果不存在，则回退到`en_US`资源中。

# css - 具有水平滚动的 dgrid

> ID：14510268
> 
> 赞同：3
> 
> 时间：2013-01-24T20:37:29.507
> 
> 标签：css, dojo, dgrid

我有一个 dgrid 在包含许多列的表中显示数据。dgrid 的默认布局导致所有列在页面上可见，这意味着它们被折叠并且无法看到每列中的完整标题或数据。

![具有默认布局的表格](../Images/eac66c0876592c0c80dee135c675ccb1.png)

我想显示所有展开的列以查看其中包含的所有数据和标题信息。然后，我需要一个水平滚动条来横向滚动以查看所有列。我可以通过更改`dgrid-row-table`from `table-layout: fixed`to的默认布局来做到这一点`table-layout: auto`，但是列没有对齐。

![包含未对齐的完整列的表](../Images/48f2e8b677e936f6122c09795f7eae40.png)

有没有办法使用`dgrid/OnDemandGrid`多列和水平滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:03:23.837

我的解决方案不使用 dgrid/OnDemandGrid 但仍然有效。

1 /将您的网格放入容器中，如下所示：

```
<div id="container">
    <div id="grid" style="width:100%;height:100%"></div>
</div> 
```

2/ 在你的 CSS 中设置宽度、高度和滚动：

```
#container{
    height: 200px;
    width: 800px;
    overflow: auto;
} 
```

3/ 在你的网格结构中将元素“width”设置为“auto”：

```
var gridLayout = [  
                  {
                      defaultCell: { width: 8, editable: false, type: cells._Widget, styles: 'text-align: right;'  },
                      cells:    [
                                 { name: "ID"               , field: "id"           , width: "auto" },
                                 { name: "Reg."             , field: "reg"          , width: "auto", editable: true },
                                 { name: "Type"             , field: "type"         , width: "auto" }
                  ]; 
```

（例如）

行将具有足够大的大小以完全显示其最大的内容，并且 div 容器将具有滚动。

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T08:30:29.343

dGrid 开箱即用地支持这一点。您需要做的就是为 dgrid 设置一个宽度并为每列设置一个最小值。如果列的宽度大于 dgrid 的宽度，它将水平滚动：

JS 小提琴 [http://jsfiddle.net/e9jad/7/](http://jsfiddle.net/e9jad/7/)

```
 .dgrid-grid {
    width: 100%
 }
 .dgrid-cell {
    width: 400px;
 } 
```

请记住，默认情况下 dgrid 的高度设置为 30em，因此您可能需要更改此设置，否则滚动可能会超出控件的底部。

您还可以在 dojo 测试中查看示例 [http://dojofoundation.org/packages/dgrid/js/dgrid/test/widths.html](http://dojofoundation.org/packages/dgrid/js/dgrid/test/widths.html)

# function - DDD：无副作用函数的难题

> ID：14510273
> 
> 赞同：7
> 
> 时间：2013-01-24T20:37:48.463
> 
> 标签：function, domain-driven-design

我为这么多问题道歉，但我觉得它们只有在被视为一个整体时才最有意义

注意 - 所有引述均来自[DDD：解决软件核心的复杂性](https://rads.stackoverflow.com/amzn/click/com/0321125215)（第 250 和 251 页）

1)

> 操作大致可以分为两类，命令和查询。
> 
> ...
> 
> 返回结果而不产生副作用的操作称为函数。一个函数可以被多次调用，每次都返回相同的值。
> 
> ...
> 
> 显然，您无法避免大多数软件系统中的命令，但可以通过两种方式缓解该问题。首先，您可以将命令和查询严格隔离在不同的操作中。确保导致更改的方法不返回域数据并保持尽可能简单。以不会导致可观察到的副作用的方法执行所有查询和计算

a) 作者暗示查询是一个函数，因为它不会产生副作用。他还指出，函数将始终返回相同的值，我假设他的意思是对于相同的输入，我们将始终得到相同的输出？

b）假设我们有一个`QandC(int entityId)`查询特定*域实体*的方法，它从中提取某些值，这些值又用于初始化一个*新的值对象*，然后这个 VO 返回给调用者。根据上面的引用不是`QandC`一个函数，因为它不会改变任何状态吗？

c) 但作者还认为，对于相同的输入，一个函数总是会产生相同的输出，而 的情况并非如此`QandC`，因为如果我们多次调用`QandC`，它将产生不同的结果，假设在两次调用之间的时间实体被修改甚至删除。因此，我们怎么能声称`QandC`是一个函数？

d)

> 确保导致更改的方法不返回域数据...

原因是返回的非 VO 的状态可能会在未来的某些操作中发生变化，因此这些方法的副作用是不可预测的？

e)

> 确保导致更改的方法不返回域数据...

返回*实体*的*查询方法*是否仍被视为函数，即使它没有改变任何状态？

 *2)

> VALUE OBJECTS 是不可变的，这意味着除了仅在创建期间调用的初始化程序之外，它们的所有操作都是函数。
> 
> ...
> 
> 将逻辑或计算与状态更改混合的操作应重构为两个单独的操作。但根据定义，这种将副作用分离为简单命令方法的方法仅适用于实体。在完成重构以将修改与查询分开后，考虑进行第二次重构，将复杂计算的责任转移到 VALUE OBJECT 中。通过派生 VALUE OBJECT 而不是更改现有状态，或者将整个责任转移到 VALUE OBJECT 中，通常可以完全消除副作用。

一个）

> VALUE OBJECTS 是不可变的，这意味着除了仅在创建期间调用的初始化程序之外，它们的所有操作都是函数……但是根据定义，这种将副作用分离为简单命令方法的方法仅适用于实体。

我认为作者是说在 VO 上定义的所有方法都是函数，这是没有意义的，因为即使在 VO 上定义的方法不能改变自己的状态，它仍然可以改变其他非 VO 对象的状态？！

b) 假设在实体上定义的方法不会改变任何状态，我们是否认为这样的方法是一个函数，即使它是在实体上定义的？

C）

> ...考虑进行第二次重构，将复杂计算的责任转移到 VALUE OBJECT 中。

为什么作者建议我们只应该从实体重构那些执行复杂计算的函数？为什么我们不应该重构更简单的函数呢？

d)

> ...考虑进行第二次重构，将复杂计算的责任转移到 VALUE OBJECT 中。

无论如何，为什么作者建议我们应该从实体中重构函数并将它们放在 VO 中？仅仅因为它让客户更清楚这个操作可能是一个函数？

e)

> 通过派生 VALUE OBJECT 而不是更改现有状态，或者将整个责任转移到 VALUE OBJECT 中，通常可以完全消除副作用。

这没有意义，因为作者似乎在争论如果我们将命令（即改变状态的操作）移动到 VO 中，那么我们将在本质上消除任何副作用，即使命令正在改变状态。所以有什么想法，作者实际上想说什么？

**更新：**

1b)

> 这取决于视角。数据库查询不会更改状态，因此没有副作用，但是它本质上不是确定性的，因为正如您指出的那样，数据可以更改。在本书中，作者指的是与值对象和实体相关联的函数，它们本身并不进行外部调用。因此，这些规则不适用于 QandC。

所以作者只描述了不进行外部调用的函数，因此这不是`QandC`作者描述的一种函数吗？

1c)

> QandC 本身不会改变状态 - 没有副作用。但是，基础状态可能会在带外更改。因此，它不是一个纯函数。

但这也不是作者定义它们的意义上的无副作用功能吗？

1d)

> 同样，这是基于 CQS。

我知道我在重复自己，但我认为书中的讨论是基于 CQS 的，并且 CQS 不认为是无副作用的函数，因为有时会通过修改其状态（通过其他操作）`QandC`返回实体`QandC`未来？

1e)

> 从 CQRS 的角度来看，它被认为是一个查询，**但由于缺乏确定性，它不能被称为函数，因为 VO 上的纯函数是函数。**

*   我不太明白你想说什么（令人困惑的部分以粗体显示）。也许虽然`QandC`被认为是一个查询，但由于返回一个实体，它不被认为是一个函数，并且这样的副作用是不可预测的，这使得`QandC`本质上是不确定的

*   所以作者只是在隐含假设下做出这些陈述（参见**1e**中的引用 ），即 VO 中定义的任何操作都不会尝试改变非 VO 对象的状态？

2d)

> 鉴于 VO 是不可变的，它们是存放纯函数的合适场所。这是将领域知识从技术限制中解放出来的又一步。

*   我不明白为什么将功能从实体转移到 VO 将有助于将领域知识从技术限制中解放出来（我也不确定你所说的技术是什么意思——技术相关的技术或......）？

*   我认为将函数放入 VO 的其他原因是因为（对于客户端）这是一个函数更加明显？

2e)

> 我认为这是对事件溯源的暗示。您无需更改现有状态，而是添加一个表示更改的新事件。仍然存在净副作用，但现有状态保持稳定。

我必须承认我对偶数源编程一无所知，因为我想首先围绕 DDD 进行研究。无论如何，所以作者并没有暗示仅仅将命令移动到 VO 会自动消除副作用，而是必须采取一些额外的行动（例如实现事件源），只是他“忘记”提到那部分?

**第二次更新：**

2d)

> 实体的定义特征之一是它的身份……通过将业务逻辑放入 VO，您可以在实体身份的上下文之外考虑它。这使得更容易测试这个逻辑等等。

我有点理解你的意思（当从远处思考这个概念时），但另一方面我真的不明白。为什么实体内的功能会受到该实体的身份的影响（假设该功能是纯功能，换句话说，它不会改变状态并且是确定性的）？

2e)

> 是的，这就是我对它的理解——仍然存在净“副作用”。但是，有不同的方法可以达到副作用。一种方法是改变现有状态。另一种方法是使用表示该更改的对象使状态更改显式。

我-只是为了确定...从您的回答中，我了解到作者并没有暗示仅通过将命令移入VO就可以消除副作用吗？

II - 好的，如果我理解正确，我们可以将命令移动到 VO 中（即使 VO 不应该改变任何东西的状态，因此不应该引起任何副作用）并且 VO 中的这个命令仍然被允许产生某种副作用，但是通过使状态更改显式（我将其解释为更改的内容作为 VO 返回给调用者），这种副作用在某种程度上更容易接受（或更多可控）？

3）我必须说我还是不太明白为什么状态改变方法 SC 不应该返回域对象。也许是因为非 VO 可能会在未来的某些操作中发生变化，因此 SC 的副作用非常不可预测？

**第三次更新：**

> 将状态管理委托给实体并将行为的实施委托给 VO 会产生一定的优势。一是基本职责分工。

a）您的意思是，即使方法描述了实体的行为（因此包含此方法的实体遵守 SRP ）并且因此属于实体，将其移动到 VO 中可能仍然是个好主意？因此，本质上，我们会将一个实体的职责划分为两个更小的职责？

b）但是不会将行为移动到 VO 中，基本上不会将该实体变成一个纯粹的数据容器（我知道该实体仍将管理其状态，但仍然......）？

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T21:25:51.220

1a) 是的。关于从命令中分离查询的论述是基于[命令-查询分离原则](http://en.wikipedia.org/wiki/Command-query_separation)。

1b) 这取决于视角。数据库查询不会更改状态，因此没有副作用，但是它本质上不是确定性的，因为正如您指出的那样，数据可以更改。在本书中，作者指的是与值对象和实体相关联的函数，它们本身并不进行外部调用。因此，这些规则不适用于`QandC`. 然而，决定论可以被捏造，提供一定程度的“纯粹性”。例如，可以创建一个可序列化的事务，它可以确保数据在其持续时间内不会发生变化。

1c)`QandC`本身不会改变状态 - 没有副作用。但是，基础状态可能会在带外更改。因此，它不是[纯函数](http://en.wikipedia.org/wiki/Pure_function)。但是，`QandC`不改变状态的限制仍然很有价值。[CQRS](http://martinfowler.com/bliki/CQRS.html)是CQS在分布式场景中的应用，恰如其分地体现了价值。

1d) 同样，这是基于 CQS。对此的另一种看法是“[告诉-不问”原则](http://pragprog.com/articles/tell-dont-ask)。然而，鉴于对这些原则的理解，该规则可以弯曲 IMO。例如，一个副作用方法可以返回一个表示结果的 VO。但是，在某些情况下，例如 CQRS + 事件溯源，可能希望命令返回 void。

1e) 从 CQRS 的角度来看，它被认为是一个查询，但由于缺乏确定性，它不能被称为函数，因为 VO 上的纯函数是函数。

2a) 不，VO 函数不应该改变任何东西的状态，它应该返回一个新对象。

2b) 是的。

2c）因为功能纯度在更复杂的场景中往往变得更加重要。但是，正如您所指出的，这并不是一个明确而明确的规则。它不应该基于复杂性，而是基于手头的域。

2d) 鉴于 VO 是不可变的，它们是存放纯函数的合适场所。这是将领域知识从技术限制中解放出来的又一步。

2e) 我认为这是对事件溯源的暗示。您无需更改现有状态，而是添加一个表示更改的新事件。仍然存在净副作用，但现有状态保持稳定。

**更新**

1b) 是的。

1c) 它是一个无副作用的函数，但它不是一个确定性函数，因为它不能被认为在给定相同输入的情况下总是返回相同的值。例如，返回当前时间的函数是无副作用的函数，但在后续调用中肯定不会返回相同的值。

1d)`QandC`可以被认为是无副作用的，但不是纯粹的。另一种看待函数纯度的方法是参照透明性——在不改变程序行为的情况下用函数调用的值替换函数调用的能力。换句话说，提出问题并不会改变答案。`QandC`可以保证，但只能在事务等上下文中。所以 QandC 可以被认为是一个函数，但仅限于特定的上下文。

1e) 我认为令人困惑的部分是作者专门讨论了 VO 和实体上的功能 - 而不是数据库查询，因为我们正在谈论两者。我的陈述将讨论扩展到数据库查询和给定某些限制的 CQRS，即环境事务。

2d）我可以看到我说的有点含糊，我变得懒惰了。实体的定义特征之一是其身份。它在其整个生命周期中保持其身份，而其状态可能会发生变化。通过将业务逻辑放入 VO，您可以在实体身份的上下文之外考虑它。这使得更容易测试这个逻辑等等。

2e) 是的，这就是我对它的理解——仍然存在净“副作用”。但是，有不同的方法可以达到副作用。一种方法是改变现有状态。另一种方法是使用表示该更改的对象使状态更改显式。

**更新 2**

2d）这一点可以争论，也可以是一个偏好问题。一种观点是该想法基于单一职责原则（SRP）。实体的责任是将身份与行为和状态联系起来。行为将输入与现有状态相结合以产生状态转换。将状态管理委托给实体并将行为的实施委托给 VO 会产生一定的优势。一是基本职责分工。另一个更微妙，也许更有争议。逻辑可以以无状态的方式考虑。这使得思考这样的逻辑更容易，更像是思考一个所有变化都是显式的数学方程——没有隐藏状态。

2e.1) 是的，消除净副作用会改变行为，这不是目标。

2e.2) 是的。

3) 返回 void 的命令有几个优点。一是他们自然而然地更擅长异步场景——无需等待结果。另一个是它允许您将操作表示为单个命令对象 - 再次，因为没有返回值。这适用于 CQRS 和事件溯源。在这些情况下，任何命令输出都作为事件而不是结果进行调度。但同样，如果这些要求不适用，则返回结果对象可能是合适的。

**更新 3**

a) 是的，这是一种特定类型的分区。

b) 实体的职责是通过委托给 VO 并应用由此产生的状态变化来协调行为。*

# ruby-on-rails - Rails 查询包括？数组

> ID：14510275
> 
> 赞同：0
> 
> 时间：2013-01-24T20:38:10.130
> 
> 标签：ruby-on-rails, rails-activerecord

我将 Section id 的数组存储为整数。`event.sections #=> ["1","115","130"]` 没有 Events has_many Sections 关系。也许这是一个问题。我只需要 Section 中的 id 而不需要其他任何东西，所以我将整数数组存储为 Postgres 中的序列化字符串。

我可以做这样的事情，它返回一个事件数组：

```
Event.upcoming.select { |m| m.sections.include? @section.id.to_s} 
```

有没有办法查询这个来取回 ActiveRecord::Relation？

编辑 - - -

我之前的选择查询不正确，因为如果`@section.id = "1"`那样，它将匹配并选择具有这些 id 的事件`"1", "10", "21", "100"`

这是正确的选择语句：

`Event.upcoming.select {|e| ( e.newsletters.split(",").flatten.grep /^#{@section.id.to_s}$/ ).presence }`

# r - 从缩放和居中的数据中缩减 R 中的线性回归系数

> ID：14510277
> 
> 赞同：4
> 
> 时间：2013-01-24T20:38:14.173
> 
> 标签：r, transform, regression

由于变量之间的测量单位不同，我正在使用 OLS 拟合线性模型，并使用 R 中的函数比例缩放我的回归量。然后，我使用 lm 命令拟合模型并获得拟合模型的系数。据我所知，拟合模型的系数与原始回归变量的单位不同，因此必须先按比例缩小，然后才能对其进行解释。我一直在寻找一种直接的方法来做到这一点，但找不到任何东西。有谁知道这是怎么做到的吗？

请看一下代码，你能帮我实现你提出的建议吗？

```
library(zoo)
filename="DataReg4.csv"
filepath=paste("C:/Reg/",filename, sep="")
separator=";"
readfile=read.zoo(filepath, sep=separator, header=T, format = "%m/%d/%Y", dec=".")
readfile=as.data.frame(readfile)
str(readfile)
DF=readfile
DF=as.data.frame(scale(DF)) 
fm=lm(USD_EUR~diff_int+GDP_US+Net.exports.Eur,data=DF)
summary(fm)
plot(fm) 
```

对不起，这是数据。

> [http://www.mediafire.com/?hmcp7urt0ag8187](http://www.mediafire.com/?hmcp7urt0ag8187)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-24T23:31:39.097

如果您使用`scale`带有默认参数的函数，那么您的回归量将居中（减去它们的平均值）并除以它们的标准偏差。您可以解释系数而不将它们转换回原始单位：

保持其他一切不变，平均而言，其中一个回归变量的一个标准差变化与对应于该回归变量系数的因变量的变化相关。

如果您在模型中包含截距项，请记住截距的解释会发生变化。现在，估计的截距表示所有回归变量都处于平均水平时因变量的平均水平。这是从每个变量中减去平均值的结果。

要解释非标准差项中的系数，只需计算每个回归量的标准差并将其乘以系数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-10-30T03:03:39.117

为了从使用缩放预测变量和非缩放响应变量完成的回归中去缩放或反向转换回归系数，截距和斜率应计算为：

```
A = As - Bs*Xmean/sdx
B = Bs/sdx 
```

因此回归是，

```
Y = As - Bs*Xmean/sdx + Bs/sdx * X 
```

在哪里

```
As = intercept from the scaled regression
Bs = slope from the scaled regression
Xmean = the mean of the scaled predictor variable
sdx = the standard deviation of the predictor variable 
```

如果`Y`也进行了缩放，则可以对其进行调整，但看起来您最终决定不对数据集执行此操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T23:24:35.777

如果我理解您的描述（不幸的是目前没有代码），您将获得 Y ~ As + Bs*Xs 的标准化回归系数，其中所有这些“s”项目都是缩放变量。然后，这些系数是 Y 的标准偏差尺度上的预测变化，与 X 的一个标准偏差的 X 变化相关联。该`scale`函数将记录 hte 缩放对象的属性中的平均值和标准偏差。如果没有，那么您将在控制台日志中的某处获得这些估计。对于 X 中的 dX 变化，估计的 dY 变化应为：dY*(1/sdY) = Bs*dX*(1/sdX)。预测应该是这样的：

```
Yest = As*(sdX) + Xmn + Bs*(Xs)*(sdX) 
```

您可能不需要标准化 Y 值，我希望您不需要标准化，因为这样可以更轻松地处理 X 均值的调整。如果您想要实施和检查答案，请放入一些代码和示例数据。我认为@DanielGerlance 说乘以 SD 而不是除以 SD 是正确的。

# assembly - 为什么 MOV 不能将两个操作数都作为内存位置？

> ID：14510280
> 
> 赞同：8
> 
> 时间：2013-01-24T20:38:18.947
> 
> 标签：assembly, x86-16

我读到该`MOV`指令的两个操作数都不能有内存位置。

像 :`MOV [0012H], [0016H]`是不允许的。

为什么这样？

其他指令是否可以为其两个操作数提供内存位置？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T23:19:23.050

这是他们创建 CPU 时的设计决定。你有更多的寻址模式和更多的指令，指令得到的更大（就表示指令所需的位数而言）。更大的指令需要更长的时间从内存中获取。

换句话说，x86 的指令集不是[正交](http://en.wikipedia.org/wiki/Orthogonal_instruction_set)的。只编写非常有限的汇编代码并不一定是坏事，至少现在不是。

其他一些 CPU（例如同一时代设计的 MC680xx）可以做到这一点。

# objective-c - loginwindow 通知或获取有关用户注销的通知

> ID：14510282
> 
> 赞同：0
> 
> 时间：2013-01-24T20:38:21.403
> 
> 标签：objective-c, c, cocoa

用户注销时是否可以向我的预登录代理发送通知？不是快速的用户切换通知（NSWorkspaceSessionDidBecomeActiveNotification 和 NSWorkspaceSessionDidResignActiveNotification）。这有效，但仅适用于快速用户切换，至少我理解。我可以使用我的守护进程从 utmpx 字典中访问上次注销信息，但是我如何告诉它在 loginwindow 上运行搜索？是否可以在 SIGTERM 处理程序中执行此操作？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:32:45.263

我找到了我要找的东西。[http://developer.apple.com/library/mac/#qa/qa1133/_index.html](http://developer.apple.com/library/mac/#qa/qa1133/_index.html) SystemConfiguration 框架可以解决问题，如果有人问的话。

# sql - SQL - 来自不在查询中的字符串的语法错误

> ID：14510284
> 
> 赞同：3
> 
> 时间：2013-01-24T20:38:31.673
> 
> 标签：sql, sql-server, vb.net, executenonquery

在我的应用程序中，我在多个位置收到一个奇怪的错误。基本上，我使用 SqlManager 和`executeNonQuery()`方法调用数据库中的存储过程，但我得到一个异常说：

> *'44444' 附近的语法不正确*

在 Visual Studio 中。问题是，我的值都不等于 '44444' 并且该字符串不在存储过程中。当我使用 SQL Server Profiler 开始跟踪时，我看不到该值。

我试过用谷歌搜索这个问题，唯一的问题是有人在将空值放入外键时遇到类似问题（我的值都不是空的）。

我调用存储过程的函数：

```
Try
    Dim p As New List(Of SQLParametre)()
    p.Add(New SQLParametre("@InvcNum", invcNum, SQLParametreType.String))
    p.Add(New SQLParametre("@Sale", sale, SQLParametreType.Decimal))
    p.Add(New SQLParametre("@Commission", commission, SQLParametreType.Decimal))
    p.Add(New SQLParametre("@UpdtDate", DateTime.Today, SQLParametreType.Date))
    m_Manager.executeNonQuery("TheSP", p)
    Return True
Catch ex As Exception
    m_Log.WriteLog("theSP crashed", ex.Message)
    Return False
End Try 
```

存储过程：

```
ALTER PROCEDURE [dbo].[TheSP]
@InvcNum varchar(9),
@Sale money,
@Commission money,
@UpdtDate as smalldatetime
AS
UPDATE tbInvc SET
  Sale = Sale + @Sale,
  Comm = Comm + @Commission,
  updateDate = @UpdtDate
WHERE (Num = @InvcNum) 
```

有人遇到过类似的问题，即不在查询/存储过程中的字符串引发语法错误吗？

编辑：我正在使用 Visual Studio 2012 和 SQL Server Management Studio 2012，并修复了存储过程中因更改列名称而导致的拼写错误。

**更新**

在 Management Studio 中运行存储过程后，我看到那里也出现了错误，所以错误不应该出现在 vb 代码中。

Management Studio 引发的错误也与我在 VS2012 中的异常中得到的错误不同：

> *消息 102，级别 15，状态 1，过程 tbInvc_UTrig，第 14 行
> “44444”附近的语法不正确。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:12:26.153

根据评论线程：问题似乎与附加到表的触发器有关。

# iphone - iOS - setIdleTimerDisabled:NO 不工作

> ID：14510285
> 
> 赞同：6
> 
> 时间：2013-01-24T20:38:35.933
> 
> 标签：iphone, ios, uiapplicationdelegate

我有一个使用摄像机的应用程序，因此屏幕不会变暗。禁止屏幕变暗可以正常工作，如下所示：

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    [[UIApplication sharedApplication] setIdleTimerDisabled:YES];
} 
```

但是，当应用程序关闭并进入后台时，将 IdleTimer 设置回 NO 不起作用。屏幕在主屏幕上永久显示。这就是我试图做到这一点的方式。

```
- (void)applicationWillResignActive:(UIApplication *)application
{
    [[UIApplication sharedApplication] setIdleTimerDisabled:NO];
} 
```

有没有更好的地方添加这行代码？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-22T09:52:15.097

我也出现了同样的问题。实际上它确实有效，但仅在您的设备未连接到 xCode 时才有效。尝试断开设备，然后测试此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:42:01.827

你为什么不尝试使用你的代码

applicationWillEnterForeground

委托方法。

希望这份工作适合你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-05-11T08:55:24.647

**斯威夫特版本：**

```
public func applicationWillResignActive(application: UIApplication) {
    UIApplication.sharedApplication().idleTimerDisabled = false
}

public func applicationDidBecomeActive(application: UIApplication) {
    UIApplication.sharedApplication().idleTimerDisabled = true
} 
```

# python - 插件架构 - 插件管理器与插件导入检查 *

> ID：14510286
> 
> 赞同：7
> 
> 时间：2013-01-24T20:38:37.277
> 
> 标签：python, plugins

我目前正在编写一个允许用户通过“插件”类型架构扩展它的应用程序。他们可以基于我提供的 BaseClass 对象编写额外的 python 类，这些类是针对各种应用程序信号加载的。作为插件加载的类的确切数量和名称在应用程序启动之前是未知的，但仅在启动时加载一次。

在研究解决此问题的最佳方法期间，我提出了两种常见的解决方案。

**选项 1 - 使用 imp、pkgutil 等自行滚动。**
例如，请参阅[this answer](https://stackoverflow.com/questions/2267984/dynamic-class-loading-in-python-2-6-runtimewarning-parent-module-plugins-not)或[this one](https://stackoverflow.com/questions/301134/dynamic-module-import-in-python)。

**选项 2 - 使用插件管理器库**
随机挑选一对

*   [直接插件](https://github.com/ironfroggy/straight.plugin)
*   [狂吠](http://yapsy.sourceforge.net/)
*   [这种方法](http://martyalchin.com/2008/jan/10/simple-plugin-framework/)

我的问题是 - 前提是必须重新启动应用程序才能加载新插件 - 上述方法是否比从[这个 SO 答案](https://stackoverflow.com/questions/1796180/python-get-list-of-all-classes-within-current-module)和[这个](https://stackoverflow.com/a/8093671/233608)答案启发的东西有任何好处，例如：

```
import inspect
import sys
import my_plugins

def predicate(c):
    # filter to classes
    return inspect.isclass(c)

def load_plugins():
    for name, obj in inspect.getmembers(sys.modules['my_plugins'], predicate):
        obj.register_signals() 
```

与上述方法相比，这种方法有什么缺点吗？（除了所有插件必须在同一个文件中）谢谢！

**编辑**
评论请求更多信息......我能想到的唯一额外的事情是插件使用[blinker](http://discorporate.us/projects/Blinker/)库来提供他们订阅的信号。每个插件可以订阅不同类型的不同信号，因此必须有自己特定的“注册”方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-01-29T18:19:08.463

从[Python 3.6](https://docs.python.org/3/whatsnew/3.6.html)开始，添加了一个新的类方法[`__init_subclass__`](https://docs.python.org/3/reference/datamodel.html#object.__init_subclass__)，每当创建新的子类时都会在基类上调用该方法。

这种方法可以通过删除元类来进一步简化上述 will-hart 提供的解决方案。

该[`__init_subclass__`](https://docs.python.org/3/reference/datamodel.html#object.__init_subclass__)方法是在[PEP 487 中引入的：更简单的类创建定制](https://www.python.org/dev/peps/pep-0487/)。PEP 附带了一个插件架构的最小示例：

> 现在可以在不使用元类的情况下自定义子类创建。[`__init_subclass__`](https://docs.python.org/3/reference/datamodel.html#object.__init_subclass__)每当创建新的子类时，都会在基类上调用新的类方法：
> 
> ```
> class PluginBase:
>     subclasses = []
> 
>     def __init_subclass__(cls, **kwargs):
>         super().__init_subclass__(**kwargs)
>         cls.subclasses.append(cls)
> 
> class Plugin1(PluginBase):
>     pass
> 
> class Plugin2(PluginBase):
>     pass 
> ```

上面的 PEP 示例存储对`Plugin.plugins`字段中类的引用。

如果要存储插件类的实例，可以使用如下结构：

```
class Plugin:
    """Base class for all plugins. Singleton instances of subclasses are created automatically and stored in Plugin.plugins class field."""
    plugins = []

    def __init_subclass__(cls, **kwargs):
        super().__init_subclass__(**kwargs)
        cls.plugins.append(cls())

class MyPlugin1(Plugin):
    def __init__(self):
        print("MyPlugin1 instance created")

    def do_work(self):
        print("Do something")

class MyPlugin2(Plugin):
    def __init__(self):
        print("MyPlugin2 instance created")

    def do_work(self):
        print("Do something else")

for plugin in Plugin.plugins:
    plugin.do_work() 
```

输出：

```
MyPlugin1 instance created
MyPlugin2 instance created
Do something
Do something else 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-01T09:38:06.680

元[类方法](http://martyalchin.com/2008/jan/10/simple-plugin-framework/)对于 Python < 3.6 中的这个问题很有用（请参阅@quasoft 对 Python 3.6+ 的回答）。它非常简单，可以自动作用于任何导入的模块。此外，可以轻松地将复杂的逻辑应用于插件注册。这个需要：

元[类](https://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python)方法的工作原理如下：

1) 定义了一个自定义`PluginMount`元类，它维护所有插件的列表

2）`Plugin`定义一个类，将其设置`PluginMount`为其元类

3）当一个派生自`Plugin`-的对象`MyPlugin`被导入时，它会触发`__init__`元类上的方法。这会注册插件并执行任何特定于应用程序的逻辑和事件订阅。

或者，如果您将`PluginMount.__init__`逻辑放入其中，则每当创建派生类`PluginMount.__new__`的新实例时都会调用它。`Plugin`

```
class PluginMount(type):
    """
    A plugin mount point derived from:
        http://martyalchin.com/2008/jan/10/simple-plugin-framework/
    Acts as a metaclass which creates anything inheriting from Plugin
    """

    def __init__(cls, name, bases, attrs):
        """Called when a Plugin derived class is imported"""

        if not hasattr(cls, 'plugins'):
            # Called when the metaclass is first instantiated
            cls.plugins = []
        else:
            # Called when a plugin class is imported
            cls.register_plugin(cls)

    def register_plugin(cls, plugin):
        """Add the plugin to the plugin list and perform any registration logic"""

        # create a plugin instance and store it
        # optionally you could just store the plugin class and lazily instantiate
        instance = plugin()

        # save the plugin reference
        cls.plugins.append(instance)

        # apply plugin logic - in this case connect the plugin to blinker signals
        # this must be defined in the derived class
        instance.register_signals() 
```

然后是一个基本插件类，如下所示：

```
class Plugin(object):
    """A plugin which must provide a register_signals() method"""
    __metaclass__ = PluginMount 
```

最后，一个实际的插件类如下所示：

```
class MyPlugin(Plugin):
    def register_signals(self):
        print "Class created and registering signals"

    def other_plugin_stuff(self):
        print "I can do other plugin stuff" 
```

可以从任何已导入的 python 模块访问插件`Plugin`：

```
for plugin in Plugin.plugins:
    plugin.other_plugin_stuff() 
```

查看[完整的工作示例](https://gist.github.com/will-hart/5899567)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-14T10:15:53.723

will-hart 的方法对我来说是最有用的！因为我需要更多控制，我将 Plugin Base 类包装在一个函数中，例如：

```
def get_plugin_base(name='Plugin',
                       cls=object,
                       metaclass=PluginMount):

    def iter_func(self):
        for mod in self._models:
            yield mod

    bases = not isinstance(cls, tuple) and (cls,) or cls

    class_dict = dict(
        _models=None,
        session=None
    )

    class_dict['__iter__'] = iter_func

    return metaclass(name, bases, class_dict) 
```

接着：

```
from plugin import get_plugin_base
Plugin = get_plugin_base() 
```

这允许添加额外的基类或切换到另一个元类。

# c++ - 在 C++11 中将 fstream 引用作为函数参数传递

> ID：14510295
> 
> 赞同：0
> 
> 时间：2013-01-24T20:39:30.147
> 
> 标签：c++, c++11, clang, fstream

我今天刚刚遇到一个问题：以下代码似乎在 MSVC++ 2010 中有效，但不适用于 Clang LLVM 4.1（使用 GNU++11）。

```
#include <fstream>

void foo(std::fstream& file){
    file << "foo";
}
int main() {
   std::fstream dummy("dummy");
   foo(dummy);
   return 0;
} 
```

生成

```
Invalid operands to binary expression (std::fstream (aka basic_fstream<char>) and const char[4]) 
```

在铿锵。我认为通过引用传递 iostream 参数将是 C++ 中的常见做法。我什至不确定这是否与 clang、C++11 或其他任何东西有关。

知道如何将流传递给函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T09:24:45.377

我假设您的原始代码（您仅在原始问题中部分发布）看起来像这样：

```
#include <iosfwd>

void foo(std::fstream& file){
    file << "foo";
}

int main() {
   std::fstream dummy("dummy");
   foo(dummy);
   return 0;
} 
```

实际上，这会在 clang++ 3.2 中给出以下错误消息

```
Compilation finished with errors:
source.cpp:4:10: error: invalid operands to binary expression ('std::fstream' (aka 'basic_fstream<char>') and 'const char [4]')
file << "foo";
~~~~ ^ ~~~~~
source.cpp:8:17: error: implicit instantiation of undefined template 'std::basic_fstream<char, std::char_traits<char> >'
std::fstream dummy("dummy");
^
/usr/lib/gcc/x86_64-linux-gnu/4.7/../../../../include/c++/4.7/iosfwd:118:11: note: template is declared here
class basic_fstream;
^
2 errors generated. 
```

不幸的是，您只发布了第一条错误消息，而没有发布第二条。

从第二条错误消息中，很明显你只是`#include <iosfwd>`而不是`#include <fstream>`. 如果你解决了这个问题，一切都会好起来的。

请下次发布完整代码和所有错误消息。

# asp.net - Kentico - 更改 SearchResults 转换以显示修改日期而不是创建日期

> ID：14510297
> 
> 赞同：1
> 
> 时间：2013-01-24T20:39:42.970
> 
> 标签：asp.net, kentico

我正在使用 Kentico v7。我正在使用智能搜索结果小部件，并且正在使用内置转换来呈现 HTML（文档类型 -> 根 -> SmartSearchResults（ASCX 类型）。我注意到转换使用的是“创建”日期，但是我们希望看到“Last Modified Date”。我已经研究了如何获取最后修改日期而不是创建日期，我发现它非常复杂。

我评估了 CMSModules\SmartSearch\Controls\SearchResults.ascx.cs 控件，发现它调用了 SearchHelper 类和 Search() 方法。我能够评估这种方法，并看到检索数据的逻辑非常复杂。

我可以采取什么方法将日期更改为“上次修改”而不是“创建”日期？

（我意识到这是一个非常具体的 Kentico 问题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T03:21:19.440

您应该能够通过将以下内容添加到转换中来做到这一点

```
<%# GetSearchValue("DocumentModifiedWhen") %> 
```

这也可以用于获取搜索文档的其他值。

# java - WebSphere Commerce：控制器命令与任务命令？

> ID：14510299
> 
> 赞同：2
> 
> 时间：2013-01-24T20:39:55.763
> 
> 标签：java, websphere, websphere-7, websphere-commerce, wcs

对于新手，您如何解释控制器命令和任务命令之间的区别？各自的目的是什么？使用这两种命令的示例可能是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T20:45:33.247

请参阅此文档：[http ://pic.dhe.ibm.com/infocenter/wchelp/v6r0m0/index.jsp?topic=%2Fcom.ibm.commerce.developer.doc%2Fconcepts%2Fcsdcommand_framework.htm](http://pic.dhe.ibm.com/infocenter/wchelp/v6r0m0/index.jsp?topic=%2Fcom.ibm.commerce.developer.doc%2Fconcepts%2Fcsdcommand_framework.htm)

基本上，任务是更大过程中的一个步骤。控制器通常调用完成整个过程所需的任务。如果您有两个需要相同任务的进程（命令控制器），它们每个都调用该任务并且不需要在每个控制器中复制该任务的行为。

考虑制作花生酱三明治和火腿三明治作为您的两个命令控制器。拿一个盘子，把面包放在盘子里，把上面的面包片放在三明治上。获取 ham 或获取 PB 将是仅在适当的命令控制器中使用的任务。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-24T02:12:44.067

控制器命令是根据请求调用的命令，就像我们在 Spring 中的 struts 和控制器中具有操作一样。任务是更大过程中的一个步骤。任务命令是为控制器命令执行特定任务的命令，如其他框架中的服务类。为了完成请求，一个控制器命令可以调用多个任务命令。

其他区别是 - 一个。控制器命令有一个 url 映射，而任务命令没有映射到它们的 URL。湾。控制器命令在任务命令之前被调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T02:36:02.417

**控制器命令**

*   保存动作的完整业务逻辑。不能作为独立请求执行，但应从另一个命令调用。需要定义和执行资源级访问控制策略。

Ex - UserRegistrationAddCmd 用于注册用户。

**任务命令**

*   包含动作中涉及的部分逻辑，即；执行特定任务。可以作为独立请求执行。不需要访问控制，因为这是从已经定义了策略的控制器命令执行的。

Ex-UpdateCredentialsCmd 从 UserRegistrationAddCmd 调用以加密和更新用户的凭据。

# python - 用于存储游戏地图的列表或字典

> ID：14510303
> 
> 赞同：1
> 
> 时间：2013-01-24T20:40:14.073
> 
> 标签：python, list, dictionary

所以我目前有一个定义游戏地图的对象的二维列表，其中每个对象代表该地图上的一个图块。当我将代码重新用于其他用途时，我想知道使用字典来存储地图数据或继续使用列表是否更有意义。对于列表，索引表示映射的 x 和 y，而在字典中，（x，y）元组将是字典的键。

我问的原因是因为地图更改是一个罕见的事件，所以数据是相当静态的，据我所知，相当恒定的查找在字典中会更快。它还应该简化循环遍历地图以绘制它。大多数情况下，我认为使用字典将简化对数据的访问，尽管我不确定在所有情况下都会如此。

这些好处值得我假设字典占用的额外内存吗？或者我什至对好处是好处是正确的？

**编辑** 我知道当前的方法有效，更重要的是为了获得更清晰的代码并发现任何潜在的缺点而进行切换是否有意义。像遍历数组这样的东西会来自类似的东西

```
for i in range(size[0]):
    for e in range(size[1]):
        thing.blit(....using i and e) 
```

至

```
for i, e in dict.items():
    i.blit(....using i and e) 
```

或查找 dict 项目将是

```
def get(x, y):
    if (x in range(size[0])) and (y in range(size[1])):
        return self.map[x][y].tile 
```

至

```
def get(item):
    return self.dict.get(item) 
```

它不多，但它有点清洁，如果它没有更慢并且没有其他缺点，我认为没有理由不这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:43:26.103

I would be wary of premature optimization.

Does your current approach have unacceptable performance? Does the data structure you're using make it harder to reason about or write your code?

If there isn't a specific problem you need to solve that can't be addressed with your current architecture, I would be wary about changing it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:50:33.753

我不确定你会得到“正确”的答案，但是当我在 Python 中创建 *Game of Life * 时，我使用了`dict`. 实际上，多维列表的查找成本和 a 中的查找成本之间应该没有实质性差异`dict`（两者都是 O(1)），但是如果您使用的是 a`dict`那么您无需担心实例化整个游戏板。在国际象棋中，这意味着您只创建 32 个棋子，而不是 64 个方格和 32 个棋子。另一方面，在*围棋*游戏中，您只能创建 1 个对象，而不是 361 个列表单元。

也就是说，在 dict 的情况下，您将需要实例化`tuple`s。如果您可以缓存这些（或仅迭代`dict`'s 键），那么也许您将获得世界上最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:46:13.280

这是参考有关 python 列表与字典的速度和内存使用情况的一个很好的答案：[https ://stackoverflow.com/a/513906/1506904](https://stackoverflow.com/a/513906/1506904)

在您获得一个非常大的数据集之前，如果您当前的方法对您很有效，那么它很可能非常适合您。

# winapi - 当有多个进程打开时，TerminateProcess 不工作

> ID：14510304
> 
> 赞同：1
> 
> 时间：2013-01-24T20:40:19.913
> 
> 标签：winapi, createprocess

我正在使用`CreateProcess`运行 Adob​​e Acrobat Reader 来显示 PDF 文件。我想关闭该应用程序。我正在尝试使用`TerminatePocess`关闭应用程序。如果只有一个应用程序实例正在运行，则`TerminateProcess`可以正常工作。但如果有多个实例在运行，它不会关闭。如果在我的程序之外打开 PDF 文件，并且我的程序运行 Acrobat Reader 打开不同的文件，`TerminateProcess`则不会关闭我打开的阅读器。

我在用：

```
result = CreateProcess(NULL, LaunchExeCharString, NULL, NULL, FALSE, bWait ? HIGH_PRIORITY_CLASS : NULL, NULL, WorkingPathName, &StartupInfo, &ProcessInformation); 
```

阅读器的名称在哪里`LaunchExeCharString`(AcroRd32.exe)。

`StartupInfo`如下：

```
StartupInfo.cb              = sizeof(STARTUPINFO);
StartupInfo.lpReserved      = NULL;
StartupInfo.lpDesktop       = NULL;
StartupInfo.lpTitle         = NULL;
StartupInfo.dwX             = 0;
StartupInfo.dwY             = 0;
StartupInfo.dwXSize         = 0;
StartupInfo.dwYSize         = 0;
StartupInfo.dwXCountChars   = 0;
StartupInfo.dwYCountChars   = 0;
StartupInfo.dwFillAttribute = 0;
StartupInfo.dwFlags         = STARTF_USESHOWWINDOW;
StartupInfo.wShowWindow     = RunMode;
StartupInfo.cbReserved2     = 0;
StartupInfo.lpReserved2     = NULL;
StartupInfo.hStdInput       = NULL;
StartupInfo.hStdOutput      = NULL;
StartupInfo.hStdError       = NULL; 
```

然后我用

```
TerminateProcess(ProcessInformation.hProcess, 0); 
```

就像我说的，如果另一个 PDF 文件打开，TerminateProcess 不会终止我的 acrord32.exe 实例。仅当我是唯一一个运行 acrord32 的人时它才有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:17:16.257

`CreateProcess()`只能给你一个`HANDLE`它直接创建的进程。有时，一个应用程序可能会启动另一个自己的进程来完成它的工作，或者它可能会将信息（如传递的文件名）传递给另一个正在运行的进程，然后自行退出。如果这就是 Adob​​e 在内部所做的，那么这些行为将解释您所看到的症状。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T12:39:32.713

好的，您启动一​​个 Adob​​e Reader 实例，然后用户*阅读*PDF 内容。但是你是谁来决定Reader 什么*时候*应该关闭？让最终用户决定何时关闭所述应用程序。您是否在应用程序关闭之前等待几秒钟/几分钟 - 这是一个糟糕的设计。当您的应用程序应该关闭时，您是否在您的应用程序中为用户提供了一个选项（如某个`Close Adobe Reader`按钮） - 这不是一个好的选择！

对于刚刚启动的应用程序，您应该只使用`ShellExecute`或`ShellExecuteEx`打开所需的文件**。**操作系统（即*Shell*）将确定如何打开特定文件。您如何知道 Adob​​e Reader 安装在`Program Files`哪里`Program Files (x86)`？安装了哪个版本的 Reader？那么任何其他应用程序呢，比如文字处理器或媒体播放器？你是谁来使用**非常特定的**程序打开文件来打开文件的，你来决定何时终止这个过程。

不仅如此，您的应用程序可能会产生其他进程 - 您会关闭所有子进程（沿着进程树）吗？

# r - 加入两个 data.tables 后创建新列

> ID：14510305
> 
> 赞同：3
> 
> 时间：2013-01-24T20:40:20.953
> 
> 标签：r, join, data.table

我有两个 data.tables`main`和`metrics`，两者都由`cid` 我想将`main`位于度量中的几个值中的每一个的平均值添加到表中。

但是，我想过滤`code`，只`metrics`用给定的`code`.

```
> metrics
    cid code  DZ value1 value2
1: 1001    A 101      8     21
2: 1001    B 102     11     26
3: 1001    A 103     17     25
4: 1002    A 104     25     39
5: 1002    B 105      6     30
6: 1002    A 106     23     40
7: 1003    A 107     27     32
8: 1003    B 108     16     37
9: 1003    A 109     14     42

# DESIRED OUTPUT
> main
    cid  A.avg.val1   A.avg.val2    B.avg.val1      B.avg.val2    
1: 1001    12.5         23.0            11              26                      
2: 1002    24.0         39.5             6              30            
3: 1003    20.5         37.0            16              37            

#  SAMPLE DATA
set.seed(1)
main <- data.table(cid=1e3+1:3, key="cid")
metrics <- data.table(cid=rep(1e3+1:3, each=3), code=rep(c("A", "B", "A"), 3), DZ=101:109, value1=sample(30, 9), value2=sample(20:50, 9), key="cid")
code.filters <- c("A", "B") 
```

这些行获得了所需的输出，但我很难将新的 col 分配回 main。（另外，最好以编程方式进行）。

```
main[metrics[code==code.filters[[1]]]][,  list(mean(c(value1))), by=cid]
main[metrics[code==code.filters[[1]]]][,  list(mean(c(value2))), by=cid]
main[metrics[code==code.filters[[2]]]][,  list(mean(c(value1))), by=cid]
main[metrics[code==code.filters[[1]]]][,  list(mean(c(value2))), by=cid] 
```

此外，有人可以解释为什么以下行只取每组中的最后一个值吗？

```
main[metrics[ code=="A"],  A.avg.val1 := mean(c(value1))] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:48:57.537

你不需要`main`。您可以直接从`metrics`以下方式获取它：

```
> tmp.dt <- metrics[, list(A.avg.val1 = mean(value1[code=="A"]), 
                 A.avg.val2 = mean(value2[code=="A"]), 
                 B.avg.val1 = mean(value1[code == "B"]), 
                 B.avg.val2 = mean(value2[code == "B"])), by=cid]

#     cid A.avg.val1 A.avg.val2 B.avg.val1 B.avg.val2
# 1: 1001       12.5       23.0         11         26
# 2: 1002       24.0       39.5          6         30
# 3: 1003       20.5       37.0         16         37 
```

如果您仍想使用以下方法进行子集化`main`：

```
main <- data.table(cid = c(1001:1002))
> tmp.dt[main]

#     cid A.avg.val1 A.avg.val2 B.avg.val1 B.avg.val2
# 1: 1001       12.5       23.0         11         26
# 2: 1002       24.0       39.5          6         30 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T20:49:27.783

我会分两步完成。首先，得到你的手段，然后`reshape`是数据

```
foo <- main[metrics]
bar <- foo[, list(val1 = mean(value1), 
                  val2 = mean(value2)), 
           by=c('cid', 'code')]

library(reshape2)
bar.melt <- melt(bar, id.var=c('cid', 'code'))
dcast(data=bar.melt,
      cid ~ code + variable) 
```

但实际上，我可能会将数据保留为“长”格式，因为我发现它更容易使用！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T21:04:27.053

根据@Arun 的回答，以下得到了想要的结果：

```
invisible( 
sapply(code.filters, function(cf)
    main[metrics[code==cf, list(avgv1 = mean(value1), avgv2 = mean(value2)), by=cid],
      paste0(cf, c(".avg.val1", ".avg.val2")) :=list(avgv1, avgv2)]
))

> main
    cid A.avg.val1 A.avg.val2 B.avg.val1 B.avg.val2
1: 1001       12.5       23.0         11         26
2: 1002       24.0       39.5          6         30
3: 1003       20.5       37.0         16         37 
```

# java - 收到 FTP 响应 421。服务器关闭连接

> ID：14510307
> 
> 赞同：0
> 
> 时间：2013-01-24T20:40:34.640
> 
> 标签：java, ftp, apache-commons, apache-commons-net

我正在尝试使用此代码[访问 FTP 使用 java连接到 FTP 站点](http://www.kodejava.org/examples/357.html)

但我得到了这个例外：

```
org.apache.commons.net.ftp.FTPConnectionClosedException: FTP response 421 received.  Server closed connection. 
```

那么我做错了什么？我可以使用我的浏览器毫无问题地访问这个 FTP 位置

有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:01:47.737

很难说，尝试添加一个协议 Listner（在 client.connect() 之前获取更多信息：

```
 client.addProtocolCommandListener(new PrintCommandListener(new PrintWriter(System.out), true)); 
```

# java - WSO2 和 Java 客户端定期请求

> ID：14510311
> 
> 赞同：1
> 
> 时间：2013-01-24T20:40:48.127
> 
> 标签：java, wso2, wso2esb

我为部署在 WSO2ESB 上的 WebService 生成了一个 Java 客户端，通过这个客户端，我尝试使用循环和睡眠发送定期请求，但我收到了相同的响应（值，WS 接收请求的时间，发送时间响应） ！！

我有存根类，我在主类中调用的 Java 客户端是：

```
package org.wso2.cs.helloservices;
import java.rmi.RemoteException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;
import org.wso2.cs.helloservices.HelloProviderStub.SayHello;
import org.wso2.cs.helloservices.HelloProviderStub.SayHelloResponse;

public class Consumer {

public ArrayList <SayHelloResponse> consumer(int requestsNumber, int sleep, int reliability) throws 

RemoteException, InterruptedException{
    ArrayList <SayHelloResponse> listResp = new ArrayList<SayHelloResponse>();

    HelloProviderStub Stub= new HelloProviderStub();

    for (int i=0; i<requestsNumber; i++){
        Thread.sleep(3000);
        SayHello request=new SayHello();
        SimpleDateFormat dateFormat = new SimpleDateFormat("mm:ss");

        request.setSleep(sleep);
        request.setReliability(reliability);
        SayHelloResponse resp=Stub.sayHello(request);
        listResp.add(resp);
    }
    return listResp;
  }
 } 
```

例如，响应是：

```
Result of Request: 1
---------------------
Receiving Request : 2013:01:24:21:22:30:00935
Sending Response  : 2013:01:24:21:22:31:00935
Response          : Test

Result of Request: 2
---------------------
Receiving Request : 2013:01:24:21:22:30:00935
Sending Response  : 2013:01:24:21:22:31:00935
Response          : Test 
```

请有任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T04:17:04.107

可能是响应是由缓存生成的，因为它们看起来相同。如果允许此功能正常工作，则该服务对 DoS（拒绝服务）攻击开放。

# symfony - 从原始 sql 查询到 symfony 2 sql 查询

> ID：14510313
> 
> 赞同：0
> 
> 时间：2013-01-24T20:40:51.070
> 
> 标签：symfony, doctrine

我有这个 sql 查询：

```
SELECT * from gift WHERE NOW() >= `validbegin` AND NOW() <= `validend` ORDER BY `points`n ASC 
```

我需要将其转换为 Symfony 2 查询以将数据获取到对象调用 Gift。到目前为止，我有这个：

```
 $query = $giftRepository->createQueryBuilder('p')
        ->where('NOW() >= validbegin AND NOW() <= p.validend')
        ->orderBy('p.points', 'ASC')
        ->getQuery();
    $gifts = $query->getResult(); 
```

但这给了我：

> [语法错误] 第 0 行，第 53 列：错误：预期的已知函数，得到 'NOW'

任何的想法？

附言。也试过 p.NOW()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:43:15.223

试试这个 ：

```
$query = $giftRepository->createQueryBuilder('p')
    ->where(':now >= validbegin AND :now <= p.validend')
    ->setParameter('now', new \DateTime())
    ->orderBy('p.points', 'ASC')
    ->getQuery();
$gifts = $query->getResult(); 
```

您从 php 生成字段，然后教义会自动将其转换为 mysql 时间戳

# r - 在 knitr 中显示 R 源文件列表

> ID：14510317
> 
> 赞同：1
> 
> 时间：2013-01-24T20:41:05.153
> 
> 标签：r, knitr, r-markdown

> **可能重复：**
> [Sweave，包括源 R-Function 文件](https://stackoverflow.com/questions/10715916/sweave-include-sourced-r-function-files)

我正在使用 knitr 进行报告。我将所有分析代码作为函数编写在一个单独的 R 文件中。然后我使用这些函数在 R Markdown 文件中编写了分析命令。最终生成的 HTML 文件看起来不错。我想在 R Markdown 文档中添加最后一个部分，我可以在其中列出原始 R 文件中的所有函数。我做了以下事情：

```
Source code for functions used
========================================================

```{r}
source('my_functions.r');
``` 
```

生成的 HTML 文件中的输出如下：

```
## 
## > xx <- function(a = 100) {
## +   plot(1 : 100);
## + } 
```

这看起来不漂亮。我想正确格式化 knitr 中的 R 文件列表。我总是可以复制和粘贴，但我正在寻找更优雅的解决方案。谢谢！

# java - 在不使用实例的情况下获取泛型集合的类

> ID：14510319
> 
> 赞同：0
> 
> 时间：2013-01-24T20:41:09.367
> 
> 标签：java, reflection, parameterized

我想做类似以下的事情：

```
public class Test {
    public static void main(String[] args) {
        Map<String, Set<String>> map = new HashMap<String, Set<String>>();
        map.put("key1", new HashSet<String>());

        Set<String> theSet = getObjectAs(map, ***Set<String>.class***);
    }

    private static <T> T getObjectAs(Object object, Class<T> cls){
        return cls.cast(object);
    }
} 
```

但这不起作用，我无法使用 .class 将类对象从该 Set 中取出（参见粗体），因为它是参数化的。

我想让该方法返回一个类型可能会有所不同的 Set（它并不总是一组字符串），但我知道并且可以将其作为参数提供。

还有另一种方法可以做这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:43:14.750

The only way you can possibly do this is to accept that you need to do unsafe casts. There is no such thing as `Set<String>.class`, because it would be exactly equal, in every respect, to `Set.class`.

The only other thing you might be able to do is use one of the "generic Class" types from a library somewhere, like [Guava's `TypeToken`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/reflect/TypeToken.html), but this wouldn't let you get around the need for unsafe casts -- it would only let you specify it with generics. Guava's [`TypeToInstanceMap`](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/reflect/TypeToInstanceMap.html) works similarly.

# php - 在 PHP 中使用时间戳的错误

> ID：14510321
> 
> 赞同：1
> 
> 时间：2013-01-24T20:41:14.000
> 
> 标签：php

我收到错误：遇到格式不正确的数值

这是我的代码：

```
<?php

$timestamp= '2013-01-20 18:20:20';

$datetime= date('F j, Y', $timestamp);

    echo $datetime;

?> 
```

这将返回 1970 年 1 月 1 日，这是不对的。我究竟做错了什么？顺便说一句：我所有的 $timestamp 变量都将采用这种格式。我在我的 MySQL 数据库表中使用日期时间。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T20:41:57.167

该`date`函数需要一个时间戳，它是一个 int，您需要使用它来调用它

```
date('F j, Y', time()); 
```

或者

```
$timestamp= '2013-01-20 18:20:20';
date('F j, Y', strtotime($timestamp)); 
```

有关如何使用该功能的信息，请参阅[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)`date`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T20:42:10.333

'2013-01-20 18:20:20' 不是时间戳。您必须将其转换为时间戳。您可以使用 strtotime 函数来执行此操作。

```
$timestamp= strtotime('2013-01-20 18:20:20'); 
```

# java - JAVA：调度线程工作的最佳方式是什么？

> ID：14510322
> 
> 赞同：0
> 
> 时间：2013-01-24T20:41:14.977
> 
> 标签：java, multithreading

我需要制作一个`Thread`在程序运行时启动它的工作，并在程序关闭时停止工作。这`Thread`将每 1 分钟检查一次。

这种调度的最佳方式是什么，使用`Thread.sleep()`或使用 a`Timer`或什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:50:23.293

你没有提供任何代码，但是有很多关于这类事情的例子，这里有一个：

```
import static java.util.concurrent.TimeUnit.*;
class BeeperControl {
private final ScheduledExecutorService scheduler =
       Executors.newScheduledThreadPool(1);

    public void beepForAnHour() {
        final Runnable beeper = new Runnable() {
                public void run() { System.out.println("beep"); }
            };
        final ScheduledFuture<?> beeperHandle =
            scheduler.scheduleAtFixedRate(beeper, 10, 10, SECONDS);
        scheduler.schedule(new Runnable() {
                public void run() { beeperHandle.cancel(true); }
            }, 60 * 60, SECONDS);
    }
 } 
```

[http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleAtFixedRate(java.lang.Runnable](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ScheduledExecutorService.html#scheduleAtFixedRate(java.lang.Runnable)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T20:51:50.020

*   创建一个通过[Executors#newSingleThreadScheduledExecutor(](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executors.html#newSingleThreadScheduledExecutor%28%29)`ScheduledExecutorService` )
*   [使用ScheduleExecutorService#scheduleAtFixedRate](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html#schedule%28java.lang.Runnable,%20long,%20java.util.concurrent.TimeUnit%29)安排您的线程
*   在应用程序结束时，调用[ScheduledExecutorService#shutdownNow()](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ExecutorService.html#shutdownNow%28%29)

所以你会有类似的东西

```
public class Application {
     private final ScheduledExecutorService executor;
     private final Runnable task;

     public Application(ScheduledExecutorService executor, Runnable task) {
         this.executor = executor;
         this.task = task;
     }

     public void init() {
         executor.scheduleAtFixedRate(task, 0, 60, TimeUnit.SECONDS);
     }
     public void shutdown() {
         executor.shutdownNow();
     }
} 
```

你将使用类似的东西创建你的应用程序

```
 // ....
 Application app = new Application(Executors.newSingleThreadScheduledExecutor(), task);
 app.init();
 // ....
 // at end
 app.shutdown(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-15T11:39:05.027

要使线程在程序运行时开始工作并在程序关闭时终止，请将此线程标记为守护线程：

```
Thread myThread=new Thread();
myThread.setDaemon(true);
myThread.start(); // forget about it, no need to explicitly kill it 
```

# javascript - 基于已知路线的 Google Maps JavaScript API v3 标记动画

> ID：14510324
> 
> 赞同：1
> 
> 时间：2013-01-24T20:41:20.257
> 
> 标签：javascript, google-maps-api-3

我一直在寻找一个很好的解决方案来使用 Google Maps JavaScript API V3 为标记设置动画。标记将在使用纬度和经度坐标定义的预定路径上进行动画处理。

对于我所做的所有研究，我仍然找不到与 JavaScript Google Maps API 版本 3 兼容的解决方案。查看[此](https://stackoverflow.com/questions/665193/how-to-animate-a-custom-google-maps-marker-along-a-route)较早的 StackOverflow 帖子，显然可以使用 API 的第 2 版进行动画处理，使用`GRoute`计时器将标记的位置设置为沿路线的点。

这是之前建议的代码。我理解它在逻辑上是如何工作的，但我不知道如何将它移植到与 Google Maps API 的第 3 版一起使用：

```
function moveToStep(yourmarker,yourroute,c) {
    if {yourroute.getNumSteps() > c) {
        yourmarker.setLatLng(yourroute.getStep(c).getLatLng());
        window.setTimeout(function(){
            moveToStep(yourmarker,yourroute,c+1);
        },500);
    }
}

moveToStep(marker,route,0); 
```

没有提到`GRoute`, `getNumSteps`（我假设它返回给定路线上定义的坐标数，`setLatLng`（我相信哪个获得标记的纬度和经度坐标），或者`moveToStep`（实际上移动标记）在版本 3[完整的文档和参考](https://developers.google.com/maps/documentation/javascript/reference)。

似乎 Google 已经将 API 从版本 2 完全重写到版本 3，因为这些功能（似乎非常基本）都已被删除或重命名（我不确定是哪个。）

我在 JavaScript API 版本 3 中看到的唯一动画是用于在标记首次出现在地图上时为其设置动画，方法是将它们设置为`BOUNCE`或`DROP`. 但是，这些实际上并不会移动标记的纬度/经度坐标，而只是移动它们在地图上的放置方式。[这两个标记动画在此处](https://developers.google.com/maps/documentation/javascript/overlays#MarkerAnimations)的 API 参考中有所提及。

在前面提到的同一篇 StackOverflow 帖子中，提供了一个[链接](http://www.kmcgraphics.com/google/)，指向使用 JavaScript API 的标记动画的工作示例。然而，正如评论者指出的那样，动画是使用该库的早期版本完成的（可[在此处](http://econym.org.uk/gmap/epoly.htm)获得。）

最后，我想我有两个问题：

**1：是否可以使用 Google Maps V3 API 沿给定路径设置动画标记？**

如果没有，那么

**2：我会被迫使用已弃用的库来实现这一点，还是有其他已知的解决方案？**

非常感谢您提供的任何可能有助于解决此问题的贡献！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T21:03:52.280

是的。在 v3 中，可以从[DirectionsService](https://developers.google.com/maps/documentation/javascript/reference#DirectionsService)沿路线为标记设置动画。

[此示例](http://www.geocodezip.com/v3_animate_marker_directions.html)使用移植到 v3 的 Mike Williams 的 epoly 库版本。

[概念证明小提琴](http://jsfiddle.net/geocodezip/kzcm02d6/136/)

**代码片段：**

```
var map;
 var directionDisplay;
 var directionsService;
 var stepDisplay;
 var markerArray = [];
 var position;
 var marker = null;
 var polyline = null;
 var poly2 = null;
 var speed = 0.000005,
   wait = 1;
 var infowindow = null;

 var myPano;
 var panoClient;
 var nextPanoId;
 var timerHandle = null;

 function createMarker(latlng, label, html) {
   // alert("createMarker("+latlng+","+label+","+html+","+color+")");
   var contentString = '<b>' + label + '</b><br>' + html;
   var marker = new google.maps.Marker({
     position: latlng,
     map: map,
     title: label,
     zIndex: Math.round(latlng.lat() * -100000) << 5
   });
   marker.myname = label;
   // gmarkers.push(marker);

   google.maps.event.addListener(marker, 'click', function() {
     infowindow.setContent(contentString);
     infowindow.open(map, marker);
   });
   return marker;
 }

 function initialize() {
   infowindow = new google.maps.InfoWindow({
     size: new google.maps.Size(150, 50)
   });
   // Instantiate a directions service.
   directionsService = new google.maps.DirectionsService();

   // Create a map and center it on Manhattan.
   var myOptions = {
     zoom: 13,
     mapTypeId: google.maps.MapTypeId.ROADMAP
   }
   map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);

   address = 'new york'
   geocoder = new google.maps.Geocoder();
   geocoder.geocode({
     'address': address
   }, function(results, status) {
     map.setCenter(results[0].geometry.location);
   });

   // Create a renderer for directions and bind it to the map.
   var rendererOptions = {
     map: map
   }
   directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);

   // Instantiate an info window to hold step text.
   stepDisplay = new google.maps.InfoWindow();

   polyline = new google.maps.Polyline({
     path: [],
     strokeColor: '#FF0000',
     strokeWeight: 3
   });
   poly2 = new google.maps.Polyline({
     path: [],
     strokeColor: '#FF0000',
     strokeWeight: 3
   });
 }

 var steps = []

 function calcRoute() {

   if (timerHandle) {
     clearTimeout(timerHandle);
   }
   if (marker) {
     marker.setMap(null);
   }
   polyline.setMap(null);
   poly2.setMap(null);
   directionsDisplay.setMap(null);
   polyline = new google.maps.Polyline({
     path: [],
     strokeColor: '#FF0000',
     strokeWeight: 3
   });
   poly2 = new google.maps.Polyline({
     path: [],
     strokeColor: '#FF0000',
     strokeWeight: 3
   });
   // Create a renderer for directions and bind it to the map.
   var rendererOptions = {
     map: map
   }
   directionsDisplay = new google.maps.DirectionsRenderer(rendererOptions);

   var start = document.getElementById("start").value;
   var end = document.getElementById("end").value;
   var travelMode = google.maps.DirectionsTravelMode.DRIVING

   var request = {
     origin: start,
     destination: end,
     travelMode: travelMode
   };

   // Route the directions and pass the response to a
   // function to create markers for each step.
   directionsService.route(request, function(response, status) {
     if (status == google.maps.DirectionsStatus.OK) {
       directionsDisplay.setDirections(response);

       var bounds = new google.maps.LatLngBounds();
       var route = response.routes[0];
       startLocation = new Object();
       endLocation = new Object();

       // For each route, display summary information.
       var path = response.routes[0].overview_path;
       var legs = response.routes[0].legs;
       for (i = 0; i < legs.length; i++) {
         if (i == 0) {
           startLocation.latlng = legs[i].start_location;
           startLocation.address = legs[i].start_address;
           // marker = google.maps.Marker({map:map,position: startLocation.latlng});
           marker = createMarker(legs[i].start_location, "start", legs[i].start_address, "green");
         }
         endLocation.latlng = legs[i].end_location;
         endLocation.address = legs[i].end_address;
         var steps = legs[i].steps;
         for (j = 0; j < steps.length; j++) {
           var nextSegment = steps[j].path;
           for (k = 0; k < nextSegment.length; k++) {
             polyline.getPath().push(nextSegment[k]);
             bounds.extend(nextSegment[k]);

           }
         }
       }

       polyline.setMap(map);
       map.fitBounds(bounds);
       //        createMarker(endLocation.latlng,"end",endLocation.address,"red");
       map.setZoom(18);
       startAnimation();
     }
   });
 }

 var step = 50; // 5; // metres
 var tick = 100; // milliseconds
 var eol;
 var k = 0;
 var stepnum = 0;
 var speed = "";
 var lastVertex = 1;

 //=============== animation functions ======================
 function updatePoly(d) {
   // Spawn a new polyline every 20 vertices, because updating a 100-vertex poly is too slow
   if (poly2.getPath().getLength() > 20) {
     poly2 = new google.maps.Polyline([polyline.getPath().getAt(lastVertex - 1)]);
     // map.addOverlay(poly2)
   }

   if (polyline.GetIndexAtDistance(d) < lastVertex + 2) {
     if (poly2.getPath().getLength() > 1) {
       poly2.getPath().removeAt(poly2.getPath().getLength() - 1)
     }
     poly2.getPath().insertAt(poly2.getPath().getLength(), polyline.GetPointAtDistance(d));
   } else {
     poly2.getPath().insertAt(poly2.getPath().getLength(), endLocation.latlng);
   }
 }

 function animate(d) {
   // alert("animate("+d+")");
   if (d > eol) {
     map.panTo(endLocation.latlng);
     marker.setPosition(endLocation.latlng);
     return;
   }
   var p = polyline.GetPointAtDistance(d);
   map.panTo(p);
   marker.setPosition(p);
   updatePoly(d);
   timerHandle = setTimeout("animate(" + (d + step) + ")", tick);
 }

 function startAnimation() {
   eol = google.maps.geometry.spherical.computeLength(polyline.getPath());
   map.setCenter(polyline.getPath().getAt(0));
   // map.addOverlay(new google.maps.Marker(polyline.getAt(0),G_START_ICON));
   // map.addOverlay(new GMarker(polyline.getVertex(polyline.getVertexCount()-1),G_END_ICON));
   // marker = new google.maps.Marker({location:polyline.getPath().getAt(0)} /* ,{icon:car} */);
   // map.addOverlay(marker);
   poly2 = new google.maps.Polyline({
     path: [polyline.getPath().getAt(0)],
     strokeColor: "#0000FF",
     strokeWeight: 10
   });
   // map.addOverlay(poly2);
   setTimeout("animate(50)", 2000); // Allow time for the initial map display
 }

 //=============== ~animation funcitons =====================

 google.maps.event.addDomListener(window, "load", initialize);
 /*********************************************************************\
 *                                                                     *
 * epolys.js                                          by Mike Williams *
 * updated to API v3                                  by Larry Ross    *
 *                                                                     *
 * A Google Maps API Extension                                         *
 *                                                                     *
 * Adds various Methods to google.maps.Polygon and google.maps.Polyline *
 *                                                                     *
 * .Contains(latlng) returns true is the poly contains the specified   *
 *                   GLatLng                                           *
 *                                                                     *
 * .Area()           returns the approximate area of a poly that is    *
 *                   not self-intersecting                             *
 *                                                                     *
 * .Distance()       returns the length of the poly path               *
 *                                                                     *
 * .Bounds()         returns a GLatLngBounds that bounds the poly      *
 *                                                                     *
 * .GetPointAtDistance() returns a GLatLng at the specified distance   *
 *                   along the path.                                   *
 *                   The distance is specified in metres               *
 *                   Reurns null if the path is shorter than that      *
 *                                                                     *
 * .GetPointsAtDistance() returns an array of GLatLngs at the          *
 *                   specified interval along the path.                *
 *                   The distance is specified in metres               *
 *                                                                     *
 * .GetIndexAtDistance() returns the vertex number at the specified    *
 *                   distance along the path.                          *
 *                   The distance is specified in metres               *
 *                   Returns null if the path is shorter than that      *
 *                                                                     *
 * .Bearing(v1?,v2?) returns the bearing between two vertices          *
 *                   if v1 is null, returns bearing from first to last *
 *                   if v2 is null, returns bearing from v1 to next    *
 *                                                                     *
 *                                                                     *
 ***********************************************************************
 *                                                                     *
 *   This Javascript is provided by Mike Williams                      *
 *   Blackpool Community Church Javascript Team                        *
 *   http://www.blackpoolchurch.org/                                   *
 *   http://econym.org.uk/gmap/                                        *
 *                                                                     *
 *   This work is licenced under a Creative Commons Licence            *
 *   http://creativecommons.org/licenses/by/2.0/uk/                    *
 *                                                                     *
 ***********************************************************************
 *                                                                     *
 * Version 1.1       6-Jun-2007                                        *
 * Version 1.2       1-Jul-2007 - fix: Bounds was omitting vertex zero *
 *                                add: Bearing                         *
 * Version 1.3       28-Nov-2008  add: GetPointsAtDistance()           *
 * Version 1.4       12-Jan-2009  fix: GetPointsAtDistance()           *
 * Version 3.0       11-Aug-2010  update to v3                         *
 *                                                                     *
 \*********************************************************************/

 google.maps.LatLng.prototype.latRadians = function() {
   return this.lat() * Math.PI / 180;
 }

 google.maps.LatLng.prototype.lngRadians = function() {
   return this.lng() * Math.PI / 180;
 }

 // === A method which returns a GLatLng of a point a given distance along the path ===
 // === Returns null if the path is shorter than the specified distance ===
 google.maps.Polyline.prototype.GetPointAtDistance = function(metres) {
   // some awkward special cases
   if (metres == 0) return this.getPath().getAt(0);
   if (metres < 0) return null;
   if (this.getPath().getLength() < 2) return null;
   var dist = 0;
   var olddist = 0;
   for (var i = 1;
     (i < this.getPath().getLength() && dist < metres); i++) {
     olddist = dist;
     dist += google.maps.geometry.spherical.computeDistanceBetween(this.getPath().getAt(i), this.getPath().getAt(i - 1));
   }
   if (dist < metres) {
     return null;
   }
   var p1 = this.getPath().getAt(i - 2);
   var p2 = this.getPath().getAt(i - 1);
   var m = (metres - olddist) / (dist - olddist);
   return new google.maps.LatLng(p1.lat() + (p2.lat() - p1.lat()) * m, p1.lng() + (p2.lng() - p1.lng()) * m);
 }

 // === A method which returns the Vertex number at a given distance along the path ===
 // === Returns null if the path is shorter than the specified distance ===
 google.maps.Polyline.prototype.GetIndexAtDistance = function(metres) {
   // some awkward special cases
   if (metres == 0) return this.getPath().getAt(0);
   if (metres < 0) return null;
   var dist = 0;
   var olddist = 0;
   for (var i = 1;
     (i < this.getPath().getLength() && dist < metres); i++) {
     olddist = dist;
     dist += google.maps.geometry.spherical.computeDistanceBetween(this.getPath().getAt(i), this.getPath().getAt(i - 1));
   }
   if (dist < metres) {
     return null;
   }
   return i;
 }
```

```
html {
  height: 100%;
}
body {
  height: 100%;
  margin: 0px;
  font-family: Helvetica, Arial;
}
```

```
<script src="https://maps.googleapis.com/maps/api/js?libraries=geometry&key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<div id="tools">
  start:
  <input type="text" name="start" id="start" value="union square, NY" />end:
  <input type="text" name="end" id="end" value="times square, NY" />
  <input type="submit" onclick="calcRoute();" />
</div>

<div id="map_canvas" style="width:100%;height:100%;"></div>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T21:11:25.453

一种方法是沿路线生成一系列位置（例如 500 个不同的位置），然后`marker.setPosition(nextLocation)`每隔 X 毫秒调用一次，例如使用 setTimeout。

Alternatively, you can use a [symbol on your polyline](https://developers.google.com/maps/documentation/javascript/overlays#PolylineSymbols), setting the percentage along the path, again in a setTimeout approach. This has the advantage you don't need to compute the locations, you can just slowly move it some tiny percentage along each X milliseconds.

# ruby-on-rails-3 - Rails 形成关联

> ID：14510329
> 
> 赞同：0
> 
> 时间：2013-01-24T20:41:44.710
> 
> 标签：ruby-on-rails-3, forms

我目前在我的应用程序中有一个使用选择表单助手的表单。它访问 2 个变量：

```
@user = ['JM', 'JH', 'RY']
@name = ['JASON', 'JOHN', 'RYAN'] 
```

我的表格如下所示：

```
 <%= form_for(:event, :url => {:action => :update, :id => @event.id}) do |e| %>
    <table>
        <tr>
          <th>Initails</th>
          <td><%= e.select(:initials, (@user)) %></td>
          <th>Priroty</th>
          <td><%= e.select(:priroty, (1..10)) %></td>
        </tr>
        <tr>
          <th>Name</th>
          <td><%= e.select(:name, (@name)) %></td>
          <th>Event</th>
          <td><%= e.text_field(:event_name) %></td>
        </tr>
        <tr>
          <th>Deadline:</th>
          <td><%= e.datetime_select(:deadline, :order => [ :month, :day]) %></td>
          <th>Complete ?</th>
          <td><%= e.check_box(:complete) %></td>
        </tr>
        <tr>
          <th>Event Description</th>
          <td><%= e.text_area(:event_description, :size => '80x10') %></td>
        </tr>
        <tr>
          <th>Comments</th>
          <td><%= e.text_area(:comment, :size => '80x10') %></td>
        </tr>
    </table>
      <table>
          <div class="actions">
            <%= e.submit %>
          </div>
      </table>
  <% end %> 
```

当我选择我的姓名首字母并显示@user 时，我正在尝试填充使用@name 的名称字段。有人知道如何关联 2，所以当我选择 JM 时，它会在名称字段中拉出 Jason？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:48:12.620

没有`javascript`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:51:32.300

看看[observe_field](http://apidock.com/rails/ActionView/Helpers/PrototypeHelper/observe_field)

还有这个[教程](http://www.plexusweb.com/staff/charlie/blog/post/302/Dynamic-Select-Menus-in-Rails-using-ObserveField)

# gzip - 如何为 favicon.ico 启用 gzip 压缩？

> ID：14510331
> 
> 赞同：12
> 
> 时间：2013-01-24T20:41:51.440
> 
> 标签：gzip, apache, favicon

你如何启用 Apache 来压缩图标？

```
FAILED - (11.6 KB, compressed = 5.7 KB - savings of 5.9 KB) - http://website/favicon.ico 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-10-23T19:01:51.037

从您的示例来看，失败来自 WebPagetest。
将下面的行添加到文件中`/etc/apache2/mods-enabled/deflate.conf`（对于 Ubuntu 12.04 上的 Apache 2.2）：

```
AddOutputFilterByType DEFLATE image/x-icon 
```

之后重新加载apache。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-06T09:20:58.293

这是我使用 Nginx 进行资产压缩的配置：

```
gzip on;
gzip_min_length  1100;
gzip_buffers  4 32k;
gzip_types  text/plain
            application/x-javascript
            text/xml
            text/css
            font/woff
            application/font-woff
            font/truetype
            font/opentype
            font/eot
            application/vnd.ms-fontobject
            image/svg+xml
            image/x-icon;
gzip_vary on; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-05-02T10:26:51.377

您可以使用 imagemagick 来压缩 ico 文件：

```
compress -color 16 PATHTOORIGINAL/file.ico PATHTONEW/file.ico 
```

# javascript - knockout.js 对表格单元格内容的可见绑定不起作用

> ID：14510334
> 
> 赞同：1
> 
> 时间：2013-01-24T20:42:08.837
> 
> 标签：javascript, knockout.js, toggle

我第一次使用 knockout.js (v2.2.1)，并尝试构建一个表格，其中元素基于视图模型中的“IsReadOnly”属性在文本和输入字段之间切换。这是使用表格单元格内的跨度和输入标签上的“可见”来完成的。

这是表格：

```
<table>
 <tr>
   <td colspan="2">
     <button id="btnEditSave" data-bind="text: btnEditSave, click: doEditSave" style="float:right;" />
   </td>
 </tr>
 <tr>
  <td>Server Name: </td>
  <td>
   <span data-bind="text: Server.ServerName, visible: IsReadOnly() == true" />
   <input data-bind="value: Server.ServerName, visible: IsReadOnly() == false" maxlength="50" style="width:400px;" />
  </td>
 </tr>
</table> 
```

和模型：

```
var ServerViewModel = function () {
    // Data
    var self = this;
    self.IsReadOnly = ko.observable(true);       // the form's input mode
    self.btnEditSave = ko.observable("Edit");    // the Edit/Save button text
    self.Server = ko.observable({});             // the Server object

    // Operations
    self.doEditSave = function () {
        var flag = self.IsReadOnly();
        if (flag) {
            // switch to Edit mode
            self.btnEditSave("Save");
            self.IsReadOnly(false);
        }
        else {
            // will eventually save the form data here...

            // switch back to readOnly
            self.btnEditSave("Edit");
            self.IsReadOnly(true);
        }
    }
} 
```

一切都按预期切换，除了不显示输入字段。我尝试了各种形式的输入标签的“可见”表达式，但没有任何效果。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:19:37.467

我认为你应该写`...value: Server().ServerName,...`和`...text: Server().ServerName,...`as`Server`是一个`observable`.

其他一切对我来说似乎都很合适。

顺便说一句：一个[jsfiddle](http://www.jsfiddle.net)会很有帮助。

## 编辑：

我刚刚设置了一个jsfiddle：http: [//jsfiddle.net/GRShn/1/](http://jsfiddle.net/GRShn/1/)

问题是你写了一个***自闭合的*跨度**——它***不能*是**自闭合的。只是`write <span ...></span>`代替`<span ... />`并且**您的初始版本有效**！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:31:27.207

我无法确定为什么我的第一个示例不起作用，但我确实找到了解决方案：使用与“IsReadOnly”相反的另一个属性“IsEditable”，因此我的表达式仅测试为真。

表格行现在是：

```
<tr>
  <td>Server Name: </td>
  <td>
   <input data-bind="value: Server.ServerName, visible: IsEditable" maxlength="50" style="width:400px;" />
   <span data-bind="text: Server.ServerName, visible: IsReadOnly" />
  </td>
 </tr> 
```

模型是：

```
var ServerViewModel = function () {
    // Data
    var self = this;
    self.IsReadOnly = ko.observable(true);       // the form's input mode
    self.IsEditable = ko.observable(false);      // <<--- the workaround
    self.btnEditSave = ko.observable("Edit");    // the Edit/Save button text
    self.Server = ko.observable({});             // the Server object

    // Operations
    self.doEditSave = function () {
        var flag = self.IsReadOnly();
        if (flag) {
            // switch to Edit mode
            self.btnEditSave("Save");
            self.IsReadOnly(false);
            self.IsEditable(true);
        }
        else {
            // switch back to readOnly
            self.btnEditSave("Edit");
            self.IsReadOnly(true);
            self.IsEditable(false);
        }
      }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:44:15.073

尝试：

```
 <span data-bind="text: Server.ServerName, visible: IsReadOnly"></span>
 <input data-bind="value: Server.ServerName, visible: !IsReadOnly()" maxlength="50" style="width:400px;" /> 
```

编辑：Warappa 在自动闭合跨度上的成功。淘汰赛不喜欢他们。

# regex - Regex - scrape only root domains from urllist on webpage

> ID：14510335
> 
> 赞同：0
> 
> 时间：2013-01-24T20:42:09.320
> 
> 标签：regex

I want regex code for only scraping .com domains without any subfolders or anything after the .com.

for example: on a webpage with a list of urls i want to scrape [http://www.google.com](http://www.google.com) and [http://www.yahoo.com](http://www.yahoo.com) but not [http://www.google.com/hello.html](http://www.google.com/hello.html) or [http://www.yahoo.com/news/](http://www.yahoo.com/news/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:50:44.787

尝试这个：

`(https?:\/\/)?www.[a-zA-Z0-9-]+\.[^/\s]*`

# c# - 试图理解为什么 ReSharper 告诉我表达总是错误的

> ID：14510338
> 
> 赞同：13
> 
> 时间：2013-01-24T20:42:14.000
> 
> 标签：c#, asp.net, resharper

我有一个条件，我正在写它检查三件事。

```
if(LoggedInMembershipUser == null || obj == null || boolVal) 
```

在这种情况下，“LoggedInMembershipUser”只是 Membership.GetUser()，“obj”是一些随机业务对象，“boolVal”显然是一个布尔值。当我编写上述语句时，ReSharper 告诉我语句的 boolVal 部分始终为假。但是当我把 boolVal 放在下面的开头时，我没有得到那个通知。

```
if(boolVal|| LoggedInMembershipUser == null || obj == null) 
```

为什么第一个总是假的，而第二个却不是？

编辑：这是在网格视图的行数据绑定中。网格显示来自具有相同基类的两个对象的结果，因此如果“obj”是其中一种对象类型而不是另一种，则“obj”将具有一个值。boolVal 是它是哪种类型的对象的指标，所以现在我考虑一下，我猜如果 obj 为空，那么 boolVal 将始终为真。ReSharper 是否以某种方式意识到了这一点？哦，我敢打赌，这是因为在我的行上方查看我的代码：

```
if (!uploaded){
    var obj = GetObjectLogic();
} 
```

好的，感谢您的帮助评论。我想这可以被投票删除或其他。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-24T21:01:02.407

如果没有更多的方法，很难确定，但它确实看起来像以下：

ReSharper 已确定，唯一`boolVal`可能为真的方法是至少其中一个`LoggedInMembershipUser`or`obj`为空。除非两者都不为空，否则第一个`if`永远不会到达该部分。`boolval`因此，在`boolVal`被评估的地方，它一定是假的。

如果您对条件重新排序，则该逻辑不再成立。ReSharper 可能会分析该表达式，确定所有部分都是快速且无副作用的，并注意到`boolVal`在第二种情况下也没有必要，但该分析有些困难，并且显然尚未编写。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-29T15:57:19.587

每次我`Expression is always true|false`使用 ReSharper 调查一个意想不到的场景时，该工具都被证明比我更聪明。例如，ReSharper 知道继承树；在这个代码块中：

```
void doSomething(Object obj)
{
    if(obj is StreamReader || obj is TextReader)
        foo();
} 
```

...ReSharper 将标记`(obj is TextReader)`为`Expression is always false`，因为`(obj is StreamReader)`代码分支已经捕获了任何`TextReader`对象并跳转到`foo()`，从而使任何进一步的评估短路。

# android - 以编程方式创建自定义搜索栏（无 XML）

> ID：14510343
> 
> 赞同：1
> 
> 时间：2013-01-24T20:42:27.503
> 
> 标签：android, seekbar

目前我正在尝试在不使用 xml 的情况下创建自定义 Seekbar，因为需要更改背景和进度条的图像。这就是我目前所拥有的：

```
Drawable drawable = new BitmapDrawable(appState.images.get(Integer.parseInt(image)));   
this.setBackgroundDrawable(drawable);

Drawable drawable2 = new BitmapDrawable(appState.images.get(Integer.parseInt(image_a)));    
this.setProgressDrawable(drawable2);

this.setProgress(0); 
```

但是 progressDrawable 只是设置为 Seekbar 的整个大小，当我将拇指左右移动时没有任何反应。有没有人有任何想法，因为我完全被难住了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T21:51:54.973

所以这个先前的答案对你有用：

[以编程方式更改搜索栏的大小，但不能让拇指大于栏](https://stackoverflow.com/questions/13158831/changing-the-size-of-the-seekbar-programmatically-but-cant-get-the-thumb-to-be-l)

来自原始提问者：

> 最后我使用这个代码：

```
public void setSeekBarImages(){
    Drawable drawable = new
             BitmapDrawable(appState.images.get(Integer.parseInt(image_a)));
    ClipDrawable clip = new ClipDrawable(drawable,
             Gravity.LEFT,ClipDrawable.HORIZONTAL);
    Drawable drawable2 = new
             BitmapDrawable(appState.images.get(Integer.parseInt(image))); 
    InsetDrawable d1= new InsetDrawable(drawable2,5,5,5,5);
    //the padding u want to use
    setThumb(null);
    LayerDrawable mylayer = new LayerDrawable(new Drawable[]{d1,clip});
    setProgressDrawable(mylayer);
    setProgress(0);
} 
```

# java - Java: changeable timer for a small game

> ID：14510344
> 
> 赞同：0
> 
> 时间：2013-01-24T20:42:27.930
> 
> 标签：java, timer

In the series of my Boggle questions here's the next.

I need a timer that is customizable by the player. Before a game of Boggle starts, the player can choose a time between 30 and 180 seconds. I tried it with a `Timer` linked to a `TimerTask`, this works in the first run of the game but when I go change the seconds in the `TimerTask` and do another run it says task is busy or has been cancelled. What's the best way to implement a timer that gets reset when a game starts and has a customizable time limit. Can a `Timer`/ `TimerTask` be reset?

**The code:**

class CountDown:

```
public class CountDown {
Timer timer;
DisplayCountDown displayCountDown;

public CountDown(DisplayCountDown displayCountDown) {
    timer = new Timer();
    this.displayCountDown = displayCountDown;
    timer.schedule(this.displayCountDown, 0, 1000);
}

public DisplayCountDown getDisplayCountDown() {
    return displayCountDown;
}

public Timer getTimer() {
    return timer;
}
} 
```

class DisplayCountDown:

```
public class DisplayCountDown extends TimerTask {
private int seconds = 30;

public void run() {
    if(seconds > 0) {
        seconds--;
    } else {
        return;
    }
}

public void setSeconds(int seconds) {
    this.seconds = seconds;
}

public int getSeconds() {
    return seconds;
}
} 
```

To reset the timer I try this:

```
countDown = null;
countDown = new CountDown(displayCountDown); 
```

I get this error when I run it a second time: `Exception in thread "main" java.lang.IllegalStateException: Task already scheduled or cancelled`

EDIT: what's wrong? Why does this get so much negative reputation? I'm not asking for you guys to just give me a solution, I know you guys hate it and that's not at all what I want... I just want to get back on track, a name of a class would be enough for me... For all clearness: I'm not asking for a finished solution, just for some tips :/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:22:33.227

“如果计时器的任务执行线程意外终止，例如，因为调用了它的停止方法，那么任何进一步尝试在计时器上安排任务都会导致 IllegalStateException，就像调用了计时器的取消方法一样。”

来自[http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)

因此，一种解决方案是在取消第一个计时器后创建一个新计时器。

另一种解决方案是：您可以让一个计时器永远运行，而不是停止和启动计时器，并让所有 DisplayCountDown 实例订阅全局计时器（例如，通过填写一个列表，让计时器遍历列表并通知每个显示倒计时）

# java - NullPointerException when clicking ListView item

> ID：14510346
> 
> 赞同：0
> 
> 时间：2013-01-24T20:42:34.327
> 
> 标签：java, android

I have a `ListView` with set `onItemClickListener`:

```
@Override
public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
    // not important
    if (!found) {
        activity.addSelectedIngredient(ingred);
        parent.getChildAt(position).setBackgroundColor(Color.parseColor("#ff99FE80"));
    } else {
        activity.removeSelectedIngredient(ingred);
        parent.getChildAt(position).setBackgroundColor(Color.WHITE);
    }
} 
```

The `NullPointerException` is thrown when parent hasn't got child on selected position (e.g. 15). Why? How it's possible that the element might not be present if she already selected it?

Edit:

```
if (!found) {
    activity.addSelectedIngredient(ingred);
    view.setBackgroundColor(Color.parseColor("#ff99FE80"));
} else {
    activity.removeSelectedIngredient(ingred);
    view.setBackgroundColor(Color.WHITE);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:49:02.893

getChildAt 返回 listView 的孩子。getChildAt 位置与适配器中的位置不同。您的适配器中可以有 1000 个项目，而列表视图中只有几个子视图，因为视图正在重用。

我觉得你应该改变

```
parent.getChildAt(position).setBackgroundColor(Color.WHITE); 
```

至

```
view.setBackgroundColor(Color.WHITE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:48:35.623

尝试，

```
if (!found) {
    activity.addSelectedIngredient(ingred);
    view.setBackgroundColor(Color.parseColor("#ff99FE80"));
} else {
    activity.removeSelectedIngredient(ingred);
    view.setBackgroundColor(Color.WHITE);
} 
```

解释：所以发生的事情是父级具有该视图但索引被重置。因此，您显然不知道将哪个索引分配给您的元素，这取决于列表视图已兑现元素的现金。因此，您应该使用视图，而不是让孩子。这与您刚刚单击的项目完全相同。

# c# - PostMessage not working with console window whose output is redirected and read asynchronously

> ID：14510350
> 
> 赞同：2
> 
> 时间：2013-01-24T20:42:43.533
> 
> 标签：c#, console, stdout, io-redirection, postmessage

I Have a GUI app that reads a console application that shows output and waits for F4 to exit, I've managed to launch the process with:

```
p.StartInfo.FileName = "consoleapp.exe";
p.StartInfo.RedirectStandardOutput = false;
p.StartInfo.RedirectStandardInput = false;
p.StartInfo.UseShellExecute = false;
p.StartInfo.CreateNoWindow = false; 
p.StartInfo.WindowStyle = ProcessWindowStyle.Minimized;
p.OutputDataReceived += new System.Diagnostics.DataReceivedEventHandler(ConsoleOutputHandler);
p.Start();
p.BeginOutputReadLine(); 
```

And I can send F4 using:

```
PostMessage(p.MainWindowHandle, (uint)WM_KEYUP, (IntPtr) Keys.F4, (IntPtr) 0x3E0001 ); 
```

Everything works fine until I redirect StandardOutput with:

```
p.StartInfo.RedirectStandardOutput = true; 
```

That way PostMessage still send the event (checked by Spy++), but the console app doesn't recognize it.

Changing "RedirectStandardInput" didn't make any progress.

Any thoughts?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T17:57:05.563

我做的！

我在我的应用程序启动时运行它：

```
AllocConsole();
uint codepage = GetACP();
SetConsoleOutputCP(codepage);

IntPtr handleconsole = new IntPtr();
handleconsole = GetConsoleWindow(); 
```

然后用..创建进程

```
p.StartInfo.RedirectStandardOutput = true; 
p.StartInfo.RedirectStandardInput = false; 
p.StartInfo.RedirectStandardError = true; 
```

这为我的应用程序创建了一个控制台，在此之后每个启动的进程都会继承该控制台，因此即使您调用 ShowWindow 来隐藏它，也很容易读取标准输出。

之后，我创建了一个 INPUT_RECORD 来发送 F4 键：

```
inHandle = GetStdHandle(STD_INPUT_HANDLE);
record[0].EventType = KEY_EVENT;
record[0].KeyEvent.bKeyDown = true;
record[0].KeyEvent.dwControlKeyState = 0;
record[0].KeyEvent.wRepeatCount = 1;
record[0].KeyEvent.wVirtualKeyCode = VirtualKeys.F4;
record[0].KeyEvent.wVirtualScanCode = MapVirtualKey(VK_F4, MAPVK_VK_TO_VSC);

record[1].EventType = KEY_EVENT;
record[1].KeyEvent.bKeyDown = false;
record[1].KeyEvent.dwControlKeyState = 0;
record[1].KeyEvent.wRepeatCount = 1;
record[1].KeyEvent.wVirtualKeyCode = VirtualKeys.F4;
record[1].KeyEvent.wVirtualScanCode = MapVirtualKey(VK_F4, MAPVK_VK_TO_VSC);

WriteConsoleInput(inHandle, record, 1, out written); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T15:05:37.097

你可能不想用`PostMessage`这个。由于您的目标是一个控制台应用程序，您应该使用 Win32 API 通过 p/invoke 将密钥写入其输入缓冲区`WriteConsoleInput`，如下所示：

```
p.StartInfo.RedirectStandardInput = true ;
// the rest of your code 

int written ;
var record = new KEY_INPUT_RECORD
{
    EventType = KEY_EVENT,
    bKeyDown  = true,
    wVirtualKeyCode = VK_F4,
    // maybe set other members, use ReadConsoleInput 
    // to get a sample and hard-code it
    // you might even use a byte array representation
    // of the input record, since you only need one key
} ;

WriteConsoleInput (((FileStream)p.StandardInput.BaseStream).SafeFileHandle,
    ref record, 1, out written) ; 
```

# sql-server - 域上的 SQL Server 连接字符串

> ID：14510351
> 
> 赞同：0
> 
> 时间：2013-01-24T20:42:43.943
> 
> 标签：sql-server

我在我的域连接机器上有一个本地 SQL Server 数据库，我试图通过 WPF 应用程序连接到该数据库。原来的 connstring 是：

```
Server=MyMachine.MyDomain.local;Database=MyDomain;Trusted_Connection=True 
```

这导致连接失败（可以通过 SSMS 连接就好了），访问被拒绝。当我将 connstring 更改为：

```
Server=MyMachine;Database=MyDomain;Trusted_Connection=True 
```

一切都正确连接。关于为什么的任何想法？这没什么大不了的，因为它是一个测试数据库，但我想了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:46:13.077

这是一个猜测，但我敢打赌，名称解析失败了。不知何故，dns 查找失败，但短名称有效，因为它尝试 netbios 查找而不是 dns 查找。如果您输入服务器 IP 地址，它也可能有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:01:07.570

我终于找到了问题：协议 TCP/IP 被禁用，所以似乎通过 MyMachine.MyDomain.local 调用它是在尝试使用 TCP/IP 协议，即使它在我的本地机器上。

# regex - Sed script - Removing lines

> ID：14510354
> 
> 赞同：0
> 
> 时间：2013-01-24T20:43:09.823
> 
> 标签：regex, sed

I need help with my sed script. I have a XML-file where I have to remove everything except the text enclosed in these tags:

```
<TEXT>......</TEXT>
<HEADLINE>......</HEADLINE> 
```

How do I write the sed code ? I know how to remove everything except the text enlosed in ONE tag.

```
s/.*<TEXT>\(.*\)<\/TEXT>.*/\1/ 
```

But how do i write the sed code for many tags ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:49:51.350

您可以将多个命令传递给`sed`：

```
$ echo '<TEXT>Hello</TEXT>
<HEADLINE>there</HEADLINE>' | sed -n 's/.*<TEXT>\(.*\)<\/TEXT>.*/\1/gp; s/.*<HEADLINE>\(.*\)<\/HEADLINE>.*/\1/gp' 
Hello
there 
```

但是在将正则表达式应用于类似 XML 的文件时，您确实应该小心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:50:02.850

假设您有有效的 XML：

```
sed '/.*<\(TEXT\|HEADLINE\)>\(.*\)<\/\(TEXT\|HEADLINE\)>.*/!d;s//\2/' yourfile.xml 
```

如果要使用*sed*脚本，请添加以下行：

```
/.*<\(TEXT\|HEADLINE\)>\(.*\)<\/\(TEXT\|HEADLINE\)>.*/!d;s//\2/ 
```

然后运行：

```
sed -f yourscript.sed < yourfile.xml 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:07:10.063

这可能对您有用（GNU sed）：

```
 sed -r '/<(text|headline)>/I!d;s//&\n/;s/^[^\n]*\n//;:a;/<\//!{$!{N;ba}};s/\n/ /g;s/<\//\n&/;P;D' file 
```

这将删除所有文本，接受介于`TEXT`和`HEADLINE`标记之间的文本，并且在多行值上用空格替换换行符。

# typo3 - Importing tt_news articles in typo3

> ID：14510357
> 
> 赞同：0
> 
> 时间：2013-01-24T20:43:14.527
> 
> 标签：typo3, tt-news

I have imported over 1000 articles from one version of tt_news (2.5.2) to the latest version, I also imported the news categories. Everything seemed to come across except the news categories don't appear to be assigned to the articles if you view them in list > news articles folder, but they do appear when you go into the table in the database. eg the article with uid = 1 has category 2 assigned to it in the tt_news table but when you view it in list > news articles it says has no categories assigned. Is there some bulk action I can use here to get all the categories assigned?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T12:19:40.287

`category`表中的`tt_news`列表示分配给新闻文章的类别数，而新闻与类别之间的关系在`tt_news_cat_mm`表中。

因此，请检查`tt_news_cat_mm`表格并查看关系是否确实如预期的那样存在。该`uid_local`列包含新闻文章的 UID，而该`uid_foreign`列包含新闻类别的 UID。

# java - 你能模拟一个使用 Mockito 调用静态方法的非静态方法吗？

> ID：14510358
> 
> 赞同：3
> 
> 时间：2013-01-24T20:43:23.973
> 
> 标签：java, unit-testing, mocking, tdd, mockito

我知道你不能使用 mockito 来模拟静态方法。但是我试图模拟的方法不是静态的，但它调用了静态方法。那么我可以模拟这个方法吗？

运行测试时出现异常。对静态方法的调用是此异常的原因吗？

**要测试的类：**

```
public class MyAction{
        public ActionForward search(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) throws Exception {
            MyService service = new MyService();
            **form.setList(service.getRecords(searchRequest));**
        }
    } 
```

**模拟类和方法：**

```
public class MyService{
    public List getRecords(SearchRequest sr){
        List returnList = new ArrayList();
        MyDao dao = DAOFactory.getInstance().getDAO();---->Call to static method
        // Some codes
        return returnList;
    }
} 
```

**具有静态方法的类：**

```
public class DAOFactory{
        private static DAOFactory instance = new DAOFactory();

         public static DAOFactory getInstance() {------> The static method
            return instance;
        }       
    } 
```

**我的测试：**

```
@Test
public void testSearch() throws Exception{
    MyService service = mock(MyService.class);
    MyAction action = new MyAction();

    List<MyList> list = new ArrayList<MyList>();
    when(service.getRecords(searchRequest)).thenReturn(list);
    ActionForward forward = action.search(mapping, form, request, response);        
} 
```

这是我运行测试时的堆栈跟踪。请记住，为简单起见，我更改了类的名称。 ![在此处输入图像描述](../Images/f7635a3abf5d6097cafad32e07c8173e.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T20:48:12.843

问题是您的`search`方法不能使用服务模拟，因为它通过`MyService service = new MyClass();`. 因此，您必须重构`MyAction`该类以允许`MyService`注入并在其中注入一个模拟。或者使用更重的武器——PowerMock。

**最简单、最安全的重构**

在您的 IDE 中使用“提取方法”重构来提取构造“new MyClass()”。所以会变成：

```
public class MyAction{
        public ActionForward search(ActionMapping mapping, ActionForm form, HttpServletRequest request, HttpServletResponse response) throws Exception {
            MyService service = getMyService();
            **form.setList(service.getRecords(searchRequest));**
        }
        MyService getMyService() {
          return new MyClass();
        }

    } 
```

然后在您的单元测试中，您可以通过创建内部子类来注入模拟：

```
public class MyActionTest {
   private MyService service = mock(MyService.class);
   private MyAction action = new MyAction(){
       @Override
       MyService getMyService() {return service;}
   };

    @Test
    public void testSearch() throws Exception{

        List<MyList> list = new ArrayList<MyList>();
        when(service.getRecords(searchRequest)).thenReturn(list);
        ActionForward forward = action.search(mapping, form, request, response);        
    }

} 
```

# jquery - Access jQuery UI datepicker cell on beforeShowDay

> ID：14510361
> 
> 赞同：0
> 
> 时间：2013-01-24T20:43:34.623
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker, uidatepicker

I would like to be able to add a data attribute to a cell of a jQuery UI datepicker. I've looked into using the beforeShowDay, but it appears to only give the date. Is there an efficient way to select the table cell corresponding to that date?

# mysql - 如何通过网络散列和加密密码？

> ID：14510367
> 
> 赞同：2
> 
> 时间：2013-01-24T20:43:48.053
> 
> 标签：mysql, encryption, hash, cryptography

我正在处理一个宠物项目，我想添加用户注册支持。经过一番研究，我决定在我的数据库中保存散列密码和盐，而不是原始密码。但是，我对步骤是什么以及顺序感到困惑。以下是我的假设：

**注册**

1.  客户端将用户名和密码发送到服务器（https）
2.  服务器抓取密码，生成随机盐
3.  Base64 编码盐
4.  使用 stringify salt 对密码进行哈希处理
5.  Base64 编码密码
6.  将密码和盐保存到数据库中

**登录**

1.  客户端将用户名和密码发送到服务器（https）
2.  服务器获取用户名和密码，从数据库中查找散列 psw 和 salt
3.  使用盐的哈希密码，base64 编码结果
4.  将密码与数据库中的散列 psw 进行比较
5.  如果匹配，则验证用户

我正在实施我的系统作为我的假设，并且一切似乎都有效。但是我不确定 base64 编码部分。将密码和盐从二进制编码为字符串的目的是什么，我可以跳过这一步吗？如果我假设的过程是错误的，那么正确的步骤是什么？

PS我使用express.js作为服务器，mysql作为数据库

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:34:47.317

一般的想法是好的，但我有一些评论：

*   您应该使用 PBKDF（一种基于密码的密钥派生函数），而不是使用散列。最好使用标准化版本，即 PBKDF2。与盐一起，您还应该选择多次迭代来阻止攻击。
*   确保您始终对用户名和密码使用相同的字符编码。
*   密码算法应该基于二进制输入和输出。
*   在您将二进制数据存储或加载到文本演示文稿时，您应该分别使用 Base 64 编码/解码。

所以该方案包含以下问题：

*   使用哈希而不是 PBKDF。
*   使用 base 64 编码的 salt 作为哈希的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:59:31.837

您需要了解盐的含义。它只是一种使用彩虹表对可能的蛮力攻击设置障碍的方法。这意味着一些坏人会用高计算能力尝试所有可能生成的哈希值。然后尝试从这样的哈希中提取纯文本。
因此，盐可以确保即使在这种攻击下返回的纯文本不是正确的。

例如：用户名：“Xavier_Ex” 密码：“Ilovestackoverflow”

这样的密码将被散列为“sfhj87s&^f”。现在彩虹表也可以说“sfhj87s&^f” -> Ilovestackoverflow... bleh，你的密码被破解了。

但是当加盐时，它会像“Ilovestackoverflow”->“Io*ves5tacmkove3rflow”。当这是散列时“Io * ves5tacmkove3rflow”->“dfgdfgdf”

使用“dfgdfgdf”将返回“Io*ves5tacmkove3rflow”的彩虹表..您的密码仍然是秘密的。

简而言之..你可以跳过这个，除非你确实需要这种保护。

# cuda - Implementing parallel merging in CUDA with shared memory does not enhance performance

> ID：14510371
> 
> 赞同：0
> 
> 时间：2013-01-24T20:44:05.797
> 
> 标签：cuda, merge, shared-memory

I am trying to implement a parallel merging algorithm in CUDA. The algorithm is designed to be executed in one thread block. Its basic idea is to compute the global rank of each element in two input sequences. Since these two input sequences are sorted, a element's global rank is equal to its index in its original sequence plus its rank in the other sequence which is computed by binary search. I think the best strategy for implementing such algorithm is to load two sequences into shared memory to reduce the global memory read. However, when I compared two version of implementation, one using shared memory and one without using shared memory, I can't see the performance enhancement. I wonder if I am doing something wrong.

hardware: GeForce GTX 285, Linux x86_64. time to merge two sequences of 1024 elements for both implementations is about 0.068672 ms.

```
__global__ void localMerge(int * A, int numA,int * B,int numB,int * C){
extern __shared__ int  temp[]; // shared memory for A and B; 
int tx=threadIdx.x;
int size=blockDim.x;
int *tempA=temp;
int *tempB=temp+numA;

int i,j,k,mid;
    //read sequences into shared memory 
for(i=tx;i<numA;i+=size){
    tempA[i]=A[i];
}
for(i=tx;i<numB;i+=size){
    tempB[i]=B[i];
}
__syncthreads();
    //compute global rank for elements in sequence A
for(i=tx;i<numA;i+=size){
    j=0;
    k=numB-1;
    if(tempA[i]<=tempB[0]){
        C[i]=tempA[i];
    }
    else if(tempA[i]>tempB[numB-1]){
        C[i+numB]=tempA[i];
    }
    else{
        while(j<k-1){
            mid=(j+k)/2;
            if(tempB[mid]<tempA[i]){
                j=mid;
            }
            else{
                k=mid;
            }
        }
        //printf("i=%d,j=%d,C=%d\n",i,j,tempA[i]);
        C[i+j+1]=tempA[i];
    }
}   
    //compute global rank for elements in sequence B
for(i=tx;i<numB;i+=size){
    j=0;
    k=numA-1;
    if(tempB[i]<tempA[0]){
        C[i]=tempB[i];
    }
    else if(tempB[i]>=tempA[numA-1]){
        C[i+numA]=tempB[i];
    }
    else{
        while(j<k-1){
            mid=(j+k)/2;
            if(tempA[mid]<=tempB[i]){
                j=mid;
            }
            else{
                k=mid;
            }
        }
        //printf("i=%d,j=%d,C=%d\n",i,j,tempB[i]);
        C[i+j+1]=tempB[i];
    }
}    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T23:09:14.953

应用“[合并路径](http://www.cc.gatech.edu/~ogreen3/_docs/GPU%20Merge%20Path%20-%20A%20GPU%20Merging%20Algorithm.pdf)`__shared__`”算法可能比依靠在内存中的两个输入列表中进行并行细粒度二进制搜索的集合更幸运。使用`__shared__`内存来解决这个问题不太重要，因为该算法中存在的重用可以很好地被缓存捕获。

使用这种合并算法，其想法是 CTA 的每个线程都负责`k`在合并结果中生成输出。这有一个很好的特性，即每个线程的工作大致一致，并且涉及的二进制搜索是相当粗粒度的。

线程`i`同时搜索两个输入列表*以*`k*i`查找第 th 个输出元素在每个列表中的位置。然后工作很简单：每个线程依次合并`k`输入列表中的项目并将它们复制到`k*i`输出中的位置。

具体可以参考[Thrust 的实现](https://github.com/thrust/thrust/blob/master/thrust/system/cuda/detail/merge.inl#L79)。

# c - 警告：赋值使指针来自整数而没有强制转换未定义

> ID：14510372
> 
> 赞同：2
> 
> 时间：2013-01-24T20:44:06.150
> 
> 标签：c, amiga

我意识到有很多与这个问题相关的问题，但我无法从我读过的那些中获得头脑或故事。

我正在尝试开始为 Amiga 学习 C，并决定按照本教程进行尝试： [http ://www.pcguru.plus.com/tutorial/amiga_c.html](http://www.pcguru.plus.com/tutorial/amiga_c.html)

达到这一点，我已经遇到了菜鸟问题：

```
#include <proto/intuition.h>
#include <intuition/screens.h>
#include <proto/dos.h>
#include <stdio.h>
int main(void) {

   struct Screen *myScreen;
   if (myScreen = LockPubScreen(NULL)) {
        printf("Public Screen locked.\n");
        Delay(100);
        UnlockPubScreen(NULL, myScreen);
        printf("Public Screen unlocked.\n");
   }
   return 0;
} 
```

我正在使用 GCC 编译器和 Shell 中的以下命令：

```
gcc -o LockPubScreen LockPubScreen.c 
```

这将返回以下内容：

```
Warning: assignment makes pointer from integer without a cast
undefined reference to 'LockPubScreen'
undefined reference to 'Delay'
undefined reference to 'UnlockPubScreen 
```

除了“HelloWorld”之外，这是第一次尝试使用 C 语言或对 Amiga 进行编程，所以我想我错过了一些明显的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:53:19.580

您可能需要包含一个或多个这些附加文件来获取您缺少的函数的原型：

```
#include <intuition/gadgetclass.h>
#include <intuition/IntuitionBase.h>
#include <libraries/gadtools.h>
#include <clib/exec_protos.h>
#include <clib/intuition_protos.h>
#include <clib/gadtools_protos.h> 
```

然后，正如 NPE 建议的那样，如果您的编译器默认不包含必需的库，并且您没有指定它，则可能会遇到链接错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T22:15:07.770

如果您提到您正在尝试在 AmigaOS 4.x 下编译该程序，那么答案将是显而易见的。OS4 中的库函数调用也必须包含库接口 - IIntuition->LockPubScreen()、IDOS->Delay() 等 - 或者您必须`#define __USE_INLINE__`在代码的开头。

# html - 如何将ul元素水平对齐到中心

> ID：14510375
> 
> 赞同：2
> 
> 时间：2013-01-24T20:44:27.323
> 
> 标签：html, css, alignment, html-lists

我无法将包含在 a 中的菜单`ul`与其容器的水平中心对齐。怎么做？

在 jsFiddle 上查看菜单的[现场演示](http://jsfiddle.net/krishnathota/tU8R5/)。

```
<li><a href="aboutus.php">AboutUs</a>
    <ul class="sub">
        <li><a href="aboutsquare.php">About Square Innovations</a></li>
        <li><a href="ourvision.php">Our Vision</a></li>
        <li><a href="ourmission.php">Our Mission</a></li>
        <li><a href="trainerprofiles.php">Trainer Profiles</a></li>
        <li><a href="funclass.php">Fun In Our ClassRooms</a></li>
    </ul>
</li> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T21:02:20.127

您可以将元素作为页面流中的内联级元素进行寻址`ul`，同时保留其块级特征（使用`inline-block`显示值） - 应用此功能后，它可以像任何内联级元素一样在其容器内简单地对齐，使用`text-align`.

要实现这一点，请添加以下规则：

```
#container {
    text-align: center;
}
ul {
    display: inline-block;
} 
```

这是**[更新的演示](http://jsfiddle.net/tU8R5/4/)**。

### 参考

*   [`display`在 Mozilla 开发者网络上](https://developer.mozilla.org/en-US/docs/CSS/display)

* * *

~~***免责声明：**对的支持`inline-block`有些有限*~~*不！它现在实际上已经很广泛了，请参阅[caniuse.com 上的兼容性表](http://caniuse.com/#search=inline-block)。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T21:44:15.747

只要菜单保持在一行，就有一个非常简洁、完全跨浏览器和动态的“技巧”来实现这一点。这里解释得很好：http: [//matthewjamestaylor.com/blog/beautiful-css-centered-menus-no-hacks-full-cross-browser-support](http://matthewjamestaylor.com/blog/beautiful-css-centered-menus-no-hacks-full-cross-browser-support)

根据我的经验，旧版浏览器通常不支持针对此问题的内联块。老实说，我从不使用它。我总是选择马修詹姆斯泰勒描述的聪明方法。

**编辑：** 根据要求，我将简要描述该技术。您的 html 应该看起来像一个普通的链接列表，周围有一个额外的包装 div。像这样的东西：

```
<div class="menu-wrapper">
  <ul>
    <li><a ...>link</a></li>
    <li><a ...>link</a></li>
    <li><a ...>link</a></li>
  </ul>
</div> 
```

现在剩下的就是css工作了。步骤如下：

*   将包装器浮动到左侧并为其设置 100% 的宽度以使其占据整个视口宽度
*   `ul`将 the和 the都浮动`li`到左侧，不要给它们任何宽度以使它们适应其内容。
*   给出的`ul`a `position: relative`。`left: 50%`这将使它的左边缘移动到其父级的中心，这意味着视口的中心。
*   最后你应该给你`li`的`position: relative`. `left: -50%`这将使它们越过父对象的左边缘，`ul`并使列表的中心与`li`父对象的左边缘对齐`ul`。由于我们在上一步中将该边缘设置为视口的中心，因此菜单现在有效地居中。

正如我之前所说，*所有功劳归功于 Matthew James Taylor*，并且一定要查看[他的详尽解释](http://matthewjamestaylor.com/blog/beautiful-css-centered-menus-no-hacks-full-cross-browser-support)。他制作的图纸使其更容易理解。

**编辑**
根据要求，我设置了一个小小提琴来演示该技术：http: [//jsfiddle.net/fDmCQ/](http://jsfiddle.net/fDmCQ/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T20:52:50.120

更改 to 的边距`<ul>`并`0 auto`给它一个宽度（~575px 或更大）。

**[jsFiddle 示例](http://jsfiddle.net/j08691/tU8R5/2/)**

```
 ul {
     font-family: Arial, Verdana;
     font-size: 14px;
     margin: 0 auto;
     padding: 0;
     width:600px;
     list-style: none;
     text-align: center;
 } 
```

# java - Get width and height of Image app engine

> ID：14510377
> 
> 赞同：2
> 
> 时间：2013-01-24T20:44:35.093
> 
> 标签：java, google-app-engine

```
ImagesService imagesService = ImagesServiceFactory.getImagesService();
BlobKey bk = currentProfile.getProfileBlobKey();
Image oldImage = ImagesServiceFactory.makeImageFromBlob(bk);
Transform resize = ImagesServiceFactory.makeResize(500, 500);
Image newImage = imagesService.applyTransform(resize, oldImage);
int imageWidth = newImage.getWidth();
int imageHeight = newImage.getHeight(); 
```

This code doesn't seem to work since `ImagesServiceFactory.makeImageFromBlob(bk);` doesn't return a real Image. Does anyone know a workaround for this? This seems to be the expected behavior. This issue is discussed [here](http://code.google.com/p/googleappengine/issues/detail?id=4757) but they don't have a solution for getting the height and width just the byte[]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:30:14.617

尝试这个：

```
FileService fileService = FileServiceFactory.getFileService();
AppEngineFile blobFile = fileService.getBlobFile(blobKey);
FileReadChannel readChannel = fileService.openReadChannel(blobFile, false);
byte[] imageData = getBytes(Channels.newInputStream(readChannel));
Image oldImage = ImagesServiceFactory.makeImage(imageData);
// now you have the real Image 
```

还有这个用于读取输入流的小片段：

```
public static byte[] getBytes(InputStream is) throws IOException {
    ByteArrayOutputStream buffer = new ByteArrayOutputStream();

    int len;
    byte[] data = new byte[10000];
    while ((len = is.read(data, 0, data.length)) != -1) {
        buffer.write(data, 0, len);
    }

    buffer.flush();
    return buffer.toByteArray();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:53:09.603

你试过 ImageReader 类吗？

# jquery - Inserting into Database using Codeigniter

> ID：14510378
> 
> 赞同：0
> 
> 时间：2013-01-24T20:44:40.897
> 
> 标签：jquery, database, codeigniter, object, model

I am trying to enter some data which I post to the server via jquery.post into a database.

```
note = { // note object that will be sent to the server
    title: $('input.xlarge').val(); ,
    message: $('textarea.xlarge').val(); ,
    }

$.post(link + "cart/addtodb", note,
            function(data){

            if(data == 'true'){
                alert('Your note has been saved');
            }else{
                alert("Something went wrong");
            }   

         }); 
```

Here is my codeigniter php code for the controller to which the data is being sent:

```
public function addtodb()
    {
     $note = $this->input->post('note');
     $this->postit_model->addnote($note);
     echo 'true';  //send true response to client after note has been added to db
    } 
```

Now I have a database table called posts with the fields: `id, title, message.` I want to insert the passed set of data into the database.

Questions: -Do the names in the jQuery object that i send to the server have to be the same as the field names in the database to be able to use the codeigniter $this->db->insert('mytable', $data); method?

-How would i go about inserting the values `title` and `message` without explicitly specifying at which `id` i want to insert them so that this dataset will just be added to the database in the first empty spot.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:11:48.253

> 我发送到服务器的 jQuery 对象中的名称是否必须与数据库中的字段名称相同才能使用 codeigniter $this->db->insert('mytable', $data); 方法？

不，您在`$data`数组中指定字段名称：

```
$data = array(
    'field_name' => 'field value',
    'other_field' => 'other field value'
);
$this->db->insert('my_table', $data); 
```

[http://ellislab.com/codeigniter/user-guide/database/active_record.html#insert](http://ellislab.com/codeigniter/user-guide/database/active_record.html#insert)

> 如果不明确指定要在哪个 id 处插入它们，我将如何插入值标题和消息，以便将这个数据集添加到数据库的第一个空白处。

创建数据库表时，应将该`id`字段指示为主键/自增。`id`这将根据表中的行数自动生成值。这是标准过程，如果您从其他地方获得数据库或遵循教程，则可能是如何设置数据库的。

[http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.0/en/example-auto-increment.html)

# html - DOCTYPE 打破 css 背景颜色

> ID：14510383
> 
> 赞同：0
> 
> 时间：2013-01-24T20:45:03.253
> 
> 标签：html, css, background-color, doctype

我最近将 DOCTYPE 添加到页面中，但这会导致某些表格单元格格式中断。页面加载时，单元格应显示为绿色背景。

[这是正在发生的事情](http://jsfiddle.net/96SrB/)（小提琴）

请注意页面加载时没有内联样式标记中指定的绿色背景。如果我将鼠标悬停在上面，样式就会生效并保持不变。

页面应该加载正确呈现的背景颜色（无需鼠标悬停来启动它）。

我无法显示工作示例，因为 JSFiddle 在其页面上包含 DOCTYPE。如果我删除 DOCTYPE 行，css 会按预期工作。

这是代码，带有 DOCTYPE 行：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Test</title>
    <body>
    <table width="100%">
    <tbody>
    <tr style=" background-color:#FFFEF7; ">
        <td style="color:FFFFFF; background-color:009C00;" title="It's Hard Being Green" onmouseover="this.style.background='#40b540'; this.style.cursor='pointer'" onmouseout="this.style.background='#009C00';">It's Hard Being Green</td>
    </tr>
    </tbody>
    </table>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T20:46:59.240

尝试添加`#`颜色声明：

```
<tr style=" background-color:#FFFEF7; ">
        <td style="color:#FFFFFF; background-color:#009C00;" ... 
```

# c# - 如何评论 Visual Studio 智能感知类的属性？

> ID：14510386
> 
> 赞同：8
> 
> 时间：2013-01-24T20:45:20.160
> 
> 标签：c#, visual-studio, intellisense

我知道使用 /// 来注释函数是正确的方法，它也适用于属性，如下面的代码所示

```
/// <summary>
/// This is for demo
/// </summary>
public class Foo
{
    /// <summary>
    /// Description A (working for intellisense)
    /// </summary>
    public int iA { get; set; }

    /// Description B (not working for intellisense)
    public int iB { get; set; }

    public int iC { get; set; }
} 
```

![在此处输入图像描述](../Images/d8e03f0cfbdad30fbd9235fdea8103de.png)

我想知道是否有比 /// 更简单的方法来评论智能感知的类属性，而 /// 最少 3 行。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-24T20:48:01.370

它只是 XML。如果你愿意，你可以在一行中完成。

```
/// <summary>Description A (working for intellisense)</summary>
public int iA { get; set; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T20:49:04.940

您可以使用[GhostDoc](http://submain.com/products/ghostdoc.aspx)，它会自动生成一些简单但有用的评论。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-08-28T09:52:23.430

根据官方 .NET 指南 [https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/xmldoc/value ，文档中属性的推荐标记是 <value>](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/xmldoc/value)

```
/// <value>The Name property gets/sets the value of the string field, _name.</value> 
```

# android - 如何要求用户从代码中评价我的应用程序？

> ID：14510387
> 
> 赞同：1
> 
> 时间：2013-01-24T20:45:20.503
> 
> 标签：android, google-play

我知道如何通过代码从我的应用程序调用 Google Play。但是，它会从我的应用程序启动 Google Play 的主页。用户可能想去添加评分，但是有更直接的方法吗？

就像，我可以在我的应用程序中设置一个“讨厌它”按钮，这将导致在 Google Play 上为我的应用程序发布 1 颗星，以及一个“喜欢它”按钮将导致 5 颗星吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:53:26.360

我在我的应用程序中所做的是在应用程序启动几次后向用户显示一个对话框，比如 15 次或类似的次数（如果您的用户经常使用该应用程序，他们更有可能认为它很好，因为他们正在使用该应用程序，所以在使用的第一天不要问他们）。对话框显示的是一个文本，您要求用户对应用程序进行评分、忽略等。如果他们按“评分”并且链接到 google play，他们可能会对该应用程序进行评分，因为他们已经决定按对话框中的按钮。我不知道有一种“直接”的方法可以像你想的那样做到这一点。试试我的方法。

请参阅我的示例[代码示例](http://pastebin.com/79YRKYD2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T00:13:56.883

Android 应用程序必须由用户在 Google Play 商店中进行评分。您可以做的最好的事情是将用户重定向到您的应用程序的 Google Play 页面。

因此，您不可能实现一种简单的方法让用户直接在您的应用程序中授予您 1 到 5 星评级。

# java - 如何在java中使用命令行参数接受值

> ID：14510389
> 
> 赞同：-2
> 
> 时间：2013-01-24T20:45:31.020
> 
> 标签：java

> **可能重复：**
> [什么是“String args[]”？在爪哇](https://stackoverflow.com/questions/890966/what-is-string-args-in-java)

如何在 java 中使用命令行参数接受值？每当我尝试这样做时，它都会显示

`Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 0`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:48:23.333

你试过什么？`args`有关如何访问数组的信息，请参见此块。您需要提供更多详细信息来说明为什么会出现越界异常，否则将其用作模板。

```
public static void main(String args[]) {
    for (int i = 0; i < args.length; i++) {
        System.out.println("Argument #" + i + " = " + args[i]);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:49:16.107

从命令行：

```
java MyApp firstParameter secondParameter 
```

在您的应用中；

```
public static void main(String[] argv) {

     for(String parameter: argv) {

        System.out.println(parameter + "\n")

     }

} 
```

# testing - 在相同的浏览器会话中使用 Selenium

> ID：14510392
> 
> 赞同：0
> 
> 时间：2013-01-24T20:45:47.683
> 
> 标签：testing, selenium, junit

```
import java.util.regex.Pattern;
import java.util.concurrent.TimeUnit;
import org.junit.*;
import static org.junit.Assert.*;
import static org.hamcrest.CoreMatchers.*;
import org.openqa.selenium.*;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.ie.InternetExplorerDriver;
import org.openqa.selenium.support.ui.Select;

public class Test1 {
  private WebDriver driver;
  private String baseUrl;
  private boolean acceptNextAlert = true;
  private StringBuffer verificationErrors = new StringBuffer();

  @Before
  public void setUp() throws Exception {
    System.setProperty("webdriver.ie.driver",  "D:/Development/ProgrammingSoftware/Testing/IEDriverServer.exe");

    WebDriver driver = new InternetExplorerDriver();
    baseUrl = "http://seleniumhq.org/";
    driver.manage().timeouts().implicitlyWait(30, TimeUnit.SECONDS);
  }

  @Test
  public void test1() throws Exception {
    driver.get(baseUrl + "/download/");
    driver.findElement(By.linkText("Latest Releases")).click();
    driver.findElement(By.linkText("All variants of the Selenium Server: stand-alone, jar with dependencies and sources.")).click();
  }

  @After
  public void tearDown() throws Exception {
    driver.quit();
    String verificationErrorString = verificationErrors.toString();
    if (!"".equals(verificationErrorString)) {
      fail(verificationErrorString);
    }
  }

  private boolean isElementPresent(By by) {
    try {
      driver.findElement(by);
      return true;
    } catch (NoSuchElementException e) {
      return false;
    }
  }

  private String closeAlertAndGetItsText() {
    try {
      Alert alert = driver.switchTo().alert();
      if (acceptNextAlert) {
        alert.accept();
      } else {
        alert.dismiss();
      }
      return alert.getText();
    } finally {
      acceptNextAlert = true;
    }
  }
} 
```

我希望 IE 具有相同的会话，但此代码始终打开一个新的 IE 实例。我如何得到这份工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T11:56:39.663

我认为不可能将驱动程序附加到现有会话。

如果您已经执行完一个测试方法，并且如果您想执行另一个类或包中存在的另一个测试方法，请通过将当前驱动程序传递给该方法来调用该方法，以便您可以在那里使用驱动程序的当前实例.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-26T04:00:48.163

这个问题在过去已经被问过好几次了，而我要回答的问题甚至都不是最近的。但是我仍然会继续发布答案，因为最近我被与同一浏览器会话相关的问题所困扰。我如何能够利用已经打开的浏览器，以便我可以继续我的测试运行，而不是从头开始重新启动它。在浏览大量页面之后，当您遇到重新启动 Selenium 测试的问题时，在某些情况下甚至会很费力。相反，我想知道“银弹在哪里？”。终于看到了“ [http://tarunlalwani.com/post/reusing-existing-browser-session-selenium/ ”写的一篇文章](http://tarunlalwani.com/post/reusing-existing-browser-session-selenium/)“。但是仍然有一些缺失的链接。所以我想在这里借助一个合适的例子来解开它。在下面的代码片段中，我试图在 Chrome 浏览器的 Selenium 会话中启动 SeleniumHQ 并单击下载链接.

```
 System.setProperty("webdriver.chrome.driver","C:\\Selenium\\chromedriver.exe");
//First Session
        ChromeDriver driver = new ChromeDriver();
        HttpCommandExecutor executor = (HttpCommandExecutor) 
        driver.getCommandExecutor();
        URL url = executor.getAddressOfRemoteServer();
        SessionId session_id = driver.getSessionId();
        storeSessionAttributesToFile("Id",session_id.toString());
        storeSessionAttributesToFile("URL",url.toString());
        driver.get("https://docs.seleniumhq.org/");
        WebElement download = driver.findElementByLinkText("Download");
        download.click(); 
```

如果您阅读了上面的代码，我将捕获 Selenium 远程服务器的 URL 和当前 selenium（浏览器）会话的会话 ID，并将其写入属性文件。现在，如果我需要继续在同一个浏览器窗口/会话中执行，尽管停止了当前的测试运行，我需要做的就是在上述代码片段中注释第一个会话下面的代码，并从下面的代码继续你的测试：

```
System.setProperty("webdriver.chrome.driver","C:\\Selenium\\chromedriver.exe");
//First Session
  //ChromeDriver driver = new ChromeDriver();
  //HttpCommandExecutor executor = (HttpCommandExecutor) driver.getCommandExecutor();
 //URL url = executor.getAddressOfRemoteServer();
//SessionId session_id = driver.getSessionId();
//storeSessionAttributesToFile("Id",session_id.toString());
//      storeSessionAttributesToFile("URL",url.toString());
//      driver.get("https://docs.seleniumhq.org/");
//      WebElement download = driver.findElementByLinkText("Download");
//      download.click();
//Attaching to the session
    String existingSession = readSessionId("Id");
    String url1 = readSessionId("URL");
    URL existingDriverURL = new URL(url1);
    RemoteWebDriver attachToDriver = createDriverFromSession(existingSession, existingDriverURL);
    WebElement previousReleases = attachToDriver.findElementByLinkText("Previous Releases");
    previousReleases.click(); 
```

现在您可能必须重构并重命名驱动程序对象（即使保留名称仍然可以，但我只是想区分将其附加到现有驱动程序和启动驱动程序）。在上面的代码块中，我在读取并分配 URL 和 sessionid 并从会话创建驱动程序以继续利用浏览器和会话之后继续我的测试。请查看下面的完整代码：

```
package org.openqa.selenium.example;

import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.lang.reflect.Field;
import java.net.URL;
import java.util.Collections;
import java.util.Properties;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.remote.Command;
import org.openqa.selenium.remote.CommandExecutor;
import org.openqa.selenium.remote.DesiredCapabilities;
import org.openqa.selenium.remote.HttpCommandExecutor;
import org.openqa.selenium.remote.RemoteWebDriver;
import org.openqa.selenium.remote.Response;
import org.openqa.selenium.remote.SessionId;
import org.openqa.selenium.remote.http.W3CHttpCommandCodec;
import org.openqa.selenium.remote.http.W3CHttpResponseCodec;

public class AttachingToSession {

public static String SESSION_FILE = "C:\\example\\Session.Properties";
public static Properties prop = new Properties();

public static void main(String[] args) throws Exception {
    System.setProperty("webdriver.chrome.driver","C:\\Selenium\\chromedriver.exe");
//First Session
    ChromeDriver driver = new ChromeDriver();
    HttpCommandExecutor executor = (HttpCommandExecutor) driver.getCommandExecutor();
    URL url = executor.getAddressOfRemoteServer();
    SessionId session_id = driver.getSessionId();
    storeSessionAttributesToFile("Id",session_id.toString());
    storeSessionAttributesToFile("URL",url.toString());
    driver.get("https://docs.seleniumhq.org/");
    WebElement download = driver.findElementByLinkText("Download");
    download.click();
//Attaching to the session
    String existingSession = readSessionId("Id");
    String url1 = readSessionId("URL");
    URL existingDriverURL = new URL(url1);
    RemoteWebDriver attachToDriver = createDriverFromSession(existingSession, existingDriverURL);
    WebElement previousReleases = attachToDriver.findElementByLinkText("Previous Releases");
    previousReleases.click();
}

public static RemoteWebDriver createDriverFromSession(final String sessionId, URL command_executor){
    CommandExecutor executor = new HttpCommandExecutor(command_executor) {

        @Override
        public Response execute(Command command) throws IOException {
            Response response = null;
            if (command.getName() == "newSession") {
                response = new Response();
                response.setSessionId(sessionId);
                response.setStatus(0);
                response.setValue(Collections.<String, String>emptyMap());
                try {
                    Field commandCodec = null;
                    commandCodec = this.getClass().getSuperclass().getDeclaredField("commandCodec");
                    commandCodec.setAccessible(true);
                    commandCodec.set(this, new W3CHttpCommandCodec());

                    Field responseCodec = null;
                    responseCodec = this.getClass().getSuperclass().getDeclaredField("responseCodec");
                    responseCodec.setAccessible(true);
                    responseCodec.set(this, new W3CHttpResponseCodec());
                } catch (NoSuchFieldException e) {
                    e.printStackTrace();
                } catch (IllegalAccessException e) {
                    e.printStackTrace();
                }

            } else {
                response = super.execute(command);
            }
            return response;
        }
    };

    return new RemoteWebDriver(executor, new DesiredCapabilities());
}

public static void storeSessionAttributesToFile(String key,String value) throws Exception{
        OutputStream output = null;
        try{
            output = new FileOutputStream(SESSION_FILE);
            //prop.load(output);
            prop.setProperty(key, value);
            prop.store(output, null);
        }
        catch(IOException e){
            e.printStackTrace();
        }
        finally {
            if(output !=null){
                output.close();
            }
        }

}

public static String readSessionId(String ID) throws Exception{

    Properties prop = new Properties();
    InputStream input = null;
    String SessionID = null;
    try {
        input = new FileInputStream(SESSION_FILE);
        // load a properties file
        prop.load(input);
        // get the property value and print it out
        System.out.println(prop.getProperty(ID));
        SessionID = prop.getProperty(ID);
    } catch (IOException ex) {
        ex.printStackTrace();
    } finally {
        if (input != null) {
            try {
                input.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
    return SessionID;
}
} 
```

# jquery - 水平滚动 Jquery 隐藏/显示滚动箭头

> ID：14510395
> 
> 赞同：4
> 
> 时间：2013-01-24T20:45:53.873
> 
> 标签：jquery, scroll, jquery-animate, horizontalscrollview

我正在尝试构建一个带有前进和后退箭头的水平滚动站点（您可以在此处查看粗略的 js fiddle：http: [//jsfiddle.net/KcDqu/5/](http://jsfiddle.net/KcDqu/5/)）

这是我到目前为止得到的 jquery：

```
$(document).ready(function() {
$('a.right-arrow').click(function() {
   $('section').animate({
   marginLeft: "+=920"
   }, "medium");
   });
   $('a.left-arrow').click(function() {
   $('section').animate({
   marginLeft: "-=920"
   }, "medium");
   });
}); 
```

到目前为止，这工作正常。但是，我想补充两点。首先，在初始显示上，应该没有向左箭头，因为左侧没有要查看的内容，我不希望用户只是滚动到空白区域。

其次，我希望隐藏右箭头，因为同样的原因，当没有更多内容显示在右侧时。

似乎无法找出最好的方法来做到这一点......

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:03:27.697

代码有点困难，因为您的水平幻灯片被硬编码为 920，而这并不总是窗口的宽度。这将导致某些内容被跳过，具体取决于窗口的大小。

让箭头正确使用这个 jQuery：

```
$(document).ready(function () {
    var leftMargin = 0;
    var width = $(document).width();
    var windowWidth = $(window).width();
    $('.left-arrow').click(function () {
        $('section').animate({
            marginLeft: "+=" + windowWidth 
        }, "medium");

        $('.right-arrow').show();
        leftMargin = (leftMargin - windowWidth)
        if (leftMargin == 0) {
            $('.left-arrow').hide();
        }
    });
    $('.right-arrow').click(function () {
        $('section').animate({
            marginLeft: "-=" + windowWidth
        }, "medium");

        $('.left-arrow').show();
        leftMargin = (leftMargin + windowWidth);
        if (leftMargin > width - windowWidth) {
            $('.right-arrow').hide();
        }
    });
}); 
```

这也会将您的箭头设置为滑动到窗口的宽度，因此不会错过任何内容。

还有[jsFiddle](http://jsfiddle.net/gNRkH/3/)

**编辑：**删除 else 因为它们是不需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:58:17.297

您可以获取节的`margin-left`值并将其用于编写条件。不要忘记在 animate 函数的回调函数中使用条件来获取准确的值。

[**这是jsFiddle。**](http://jsfiddle.net/xxge8/19/)

```
$(document).ready(function() {
    var windowWidth = $(window).width();
    var maxRange = windowWidth * -2;

    //note: all of the conditions are same
    var val = parseInt($('section').css('margin-left'));
    if( val >= 0 ) { $('.right-arrow').hide();$('.left-arrow').show(); }
    else if( val < 0 && val > maxRange) { $('.right-arrow, .left-arrow').show(); }
    else if( val <= maxRange) { $('.left-arrow').hide();$('.right-arrow').show();  }

    $('a.right-arrow').click(function() {
        $('section').animate({ marginLeft: "+=" +windowWidth+ "px" },600,function() {
            var val = parseInt($('section').css('margin-left'));
            if( val >= 0 ) { $('.right-arrow').hide();$('.left-arrow').show(); }
            else if( val < 0 && val > maxRange) { $('.right-arrow, .left-arrow').show(); }
            else if( val <= maxRange) { $('.left-arrow').hide();$('.right-arrow').show();  }
        });
    });
    $('a.left-arrow').click(function() {
        $('section').animate({ marginLeft: "-=" +windowWidth+ "px" },600,function() {
            var val = parseInt($('section').css('margin-left'));
            if( val >= 0 ) { $('.right-arrow').hide();$('.left-arrow').show(); }
            else if( val < 0 && val > maxRange) { $('.right-arrow, .left-arrow').show(); }
            else if( val <= maxRange) { $('.left-arrow').hide();$('.right-arrow').show();  }
        });
    });
}); 
```

并注意不要`else`在这些情况下使用，它可能会产生冲突。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T22:20:04.093

通常我会给你一些现有滑块脚本的链接，但我不知道有任何可以很好地调整大小。

所以我从我自己的 PHP 异常处理程序中改编了一些代码:)

```
$('#list').each(function(){

  var list = $(this),
      currentPos = 0,
      itemCount = list.children().length;

  $('.right, .left').click(function(){

    // +100 = right, -100 = left
    var direction = $(this).hasClass('right') ? 100 : -100,
        nextIndex = direction > 0 ? currentPos + 1 : currentPos - 1;

    // do nothing if there is animation happening,
    // or if index is out of boundaries
    if($('> li', list).is(':animated') 
       || (direction > 0 && nextIndex > itemCount - 1)
       || (direction < 0 && nextIndex < 0)
     ) return;

    var next = $('> li:eq(' + nextIndex + ')', list),
        current = $('> li:eq(' + currentPos + ')', list);

    currentPos = nextIndex;

    // determine if the link needs to be hidden
    $('.left, .right').removeClass('hide');      
    if(currentPos === 0 || currentPos === itemCount - 1)
        $(this).addClass('hide');

    // adjust height of the container
    list.css('height', Math.max(current.outerHeight(true), next.outerHeight(true)) + 'px');

    // make the current slide absolute
    current.css({
      position: 'absolute',
      left: 0,
      top: 0,
      width: '100%',
      height: current.outerHeight(true) + 'px'
    });

    // show the next slide
    next.css({
      position: 'absolute',
      left: direction + '%',
      top: 0,
      width: '100%',
      height: next.outerHeight(true) + 'px'
    }).show().animate({left: '0%'}, 300, 'swing', function(){
      next.css({
        position: 'relative',
        left: 'auto',
        top: 'auto'
      });

    });

    // hide the current slide
    current.animate({left: (-direction) + '%'}, 300, 'swing', function(){
      current.hide();                      
    });                                       

  });

  // mouse wheel action within the list area
  list.mousewheel(function(event, delta){               
    (delta > 0) ? $('.right').click() :$('.left').click();                                 
  });

}); 
```

CSS：

```
.hide{
  display:none;
}    

#list{
  position: relative;
  width: 100%;
  overflow: hidden;
}

#list > li{
  display: none;
}

#list > li:first-child{
  display: block;
} 
```

HTML 结构应如下所示：

```
<a class="left"> left </a>
<a class="right"> right </a>

<ul id="list">                    
   <li> ... </li>
   ...         
</ul> 
```

[**演示**](http://jsfiddle.net/NGfCP/)

[鼠标滚轮](https://github.com/brandonaaron/jquery-mousewheel)jQuery 插件。如果您不需要鼠标滚轮支持，请删除最后一个事件。

# c# - 无法在 VS web express 2012 中创建 MVC4 新项目：无效的 url

> ID：14510405
> 
> 赞同：1
> 
> 时间：2013-01-24T20:46:31.010
> 
> 标签：c#, asp.net-mvc, visual-studio, visual-studio-2012

我创建了一个新项目，然后我看到了这个错误：

```
the local iis server url is not valid URL that includes the protocol (http:// or https://) invalid url: the hostname could not be parsed 
```

有谁能够帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-04T09:08:28.887

就我而言，这是因为我在名为“S”的 VS 解决方案中有一个名为“A”的 ASP.NET 项目，然后我删除了“A”以创建一个新的 ASP.NET 项目，也称为“A”，但配置不同。在这种奇怪的情况下，IIS 将无法创建绑定到与另一个同名项目的 URI。

解决方案：

转到“C:\Users\\Documents\IISExpress\config”并打开文件“applicationhost.config”，然后删除所有引用您站点的“站点”标签，例如

```
<site name="MyWeb" id="27">
            <application path="/" applicationPool="Clr4IntegratedAppPool">
                <virtualDirectory path="/" physicalPath="C:\Proyects\C#\MyWeb\MyWeb" />
            </application>
            <bindings>
                <binding protocol="http" bindingInformation="*:12199:localhost" />
            </bindings>
        </site> 
```

还有“位置”标签，如

```
<location path="MyWeb">
    <system.webServer>
        <security>
            <authentication>
                <windowsAuthentication enabled="true" />
                <anonymousAuthentication enabled="false" />
            </authentication>
        </security>
    </system.webServer>
</location> 
```

保存 .config 文件，重新打开 VS 并尝试创建项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:22:22.887

右键单击您的项目 -> 属性 -> 单击 Web 选项卡：

![特性](../Images/c14579e0c483dc96d2a6b88df116a6ab.png)

如果你想使用`IIS Express`你必须在这里设置它（见图片中的例子）

请注意`IIS`和`IIS Express`是 2 个不同的应用程序（[http://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview](http://www.iis.net/learn/extensions/introduction-to-iis-express/iis-express-overview)）。

# android - Android Google Maps API：隐藏标记片段

> ID：14510406
> 
> 赞同：8
> 
> 时间：2013-01-24T20:46:38.110
> 
> 标签：android, google-maps-android-api-2

我正在使用 Google Maps API v2 并尝试将参考 ID 嵌入到标记信息窗口中。当用户点击信息窗口时，它应该将参考 ID 传递给新的意图。

我实际上不希望用户可以看到参考 ID。我将参考 ID 添加为片段并使用 marker.getSnippet() 获取参考 ID 以传递给新活动。有没有办法隐藏片段以使用户看不到它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T20:49:06.657

通过 自定义信息窗口内容`InfoWindowAdapter`，将其附加到您的`GoogleMap`via `setInfoWindowAdapter()`。在适配器上实现`onInfoContents()`以返回不包含您的代码段的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-21T08:49:31.073

我一直在寻找同样的东西，我自己也发现了一些有趣的东西。这个技巧可能看起来很愚蠢，但效果很好。从 onMarkerClick(Marker m) 中的代码段获取值后，**我****将**其设置回 null :D 这是代码：

```
@Override
public boolean onMarkerClick(Marker marker) {
    locationMarker = marker;
    Intent intent = new Intent(getApplicationContext(),MarkerInfoView.class);
    String uid = marker.getSnippet();
    marker.setSnippet("");
    intent.putExtra(UID,uid);
    startActivity(intent);
    return false;
} 
```

因此，在**onClick()**上，它显示标题并打开另一个活动并在那里显示用户的相关其他信息。如果它对你有用，请给我疯狂的拇指赞；）让我知道是否有人在跟踪用户和标记点击操作方面需要其他编码帮助。我会尽可能地帮助你。祝你好运（y）

截图在这里： [![在此处输入图像描述](../Images/5050c307e31c8469b4de81c19e9ef20c.png)](https://i.stack.imgur.com/aCc1o.png)

# silverlight - 应用样式时，Silverlight DataGrid 列标题不会与数据对齐

> ID：14510416
> 
> 赞同：1
> 
> 时间：2013-01-24T20:47:11.667
> 
> 标签：silverlight, xaml, datagrid

我有一个 Silverlight 数据网格，它应用了 RowStyle 来突出显示某些行。屏幕上无法容纳的列数，因此有一个水平滚动条。但是，当向右滚动时，数据列很快就会与标题不同步。

我通过将样式定义直接移动到 XAML 中的数据网格代码中尝试了[此处](https://stackoverflow.com/questions/7848125/align-header-and-rows-in-a-styled-datagrid-in-silverlight)建议的解决方案，但这对我不起作用。我知道是风格导致了问题，但我无法确定罪魁祸首是哪一部分！我在下面提供了样式和数据网格定义。任何建议，将不胜感激！

```
<sdk:DataGrid MinHeight="100" Margin="0,0,0,30" AutoGenerateColumns="False" Name="dgResults" ItemsSource="{Binding Path=FindResults}" SelectedItem="{Binding Path=CurrentItem, Mode=TwoWay}"
                                    RowStyle="{StaticResource RowColorableDataGrid}" toolkit:DockPanel.Dock="Bottom">
                        <i:Interaction.Behaviors>
                            <behavior:SelectRowOnRightClickBehavior />
                            <mybehavior:DepartureContextMenuBehavior/>
                        </i:Interaction.Behaviors>
                        <sdk:DataGrid.Columns>
                            <sdk:DataGridTemplateColumn CanUserReorder="False" CanUserResize="True" CanUserSort="False" Header="Select">
                                <sdk:DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox ClickMode="Press" IsChecked="{Binding Path=IsSelected, Mode=TwoWay}" Width="Auto" IsEnabled="True"/>
                                    </DataTemplate>
                                </sdk:DataGridTemplateColumn.CellTemplate>
                            </sdk:DataGridTemplateColumn>
                            <sdk:DataGridTextColumn Header="Code" Binding="{Binding Path=Tourcode}" IsReadOnly="True" Width="Auto" />
                            <sdk:DataGridTextColumn Header="Tour" Binding="{Binding Path=TourDescription}" IsReadOnly="True" Width="200" />
                            <sdk:DataGridTextColumn Header="Brand" Binding="{Binding Path=Brand}" IsReadOnly="True" Width="Auto" />
                            <sdk:DataGridTextColumn Header="Land Start Date" Binding="{Binding Path=LandStartDate}" IsReadOnly="True" Width="Auto" />
                            <sdk:DataGridTextColumn Header="Land End Date" Binding="{Binding Path=LandEndDate}" IsReadOnly="True" Width="Auto" />
                            <sdk:DataGridTextColumn Header="Status" Binding="{Binding Path=Status}" IsReadOnly="True" Width="Auto" />
                            <sdk:DataGridTextColumn Header="TIP Avail" Binding="{Binding Path=Availability}" IsReadOnly="True" Width="Auto" />
                            <sdk:DataGridTextColumn Header="GSpace" Binding="{Binding Path=GSpace}" IsReadOnly="True" Width="Auto" />
                            <sdk:DataGridTextColumn Header="Per PAX (TWN)" Binding="{Binding Path=PricePerPaxTwin}" Width="Auto" />
                            <sdk:DataGridTextColumn Header="Per PAX (SGL)" Binding="{Binding Path=PricePerPaxSingle, StringFormat='+0;-0;0'}" Width="Auto" />
                            <sdk:DataGridTextColumn Header="Per PAX (TPL)" Binding="{Binding Path=PricePerPaxTriple, StringFormat='+0;-0;0'}" Width="Auto" />
                        </sdk:DataGrid.Columns>
                    </sdk:DataGrid> 
```

这是 RowStyle XAML：

```
<Style TargetType="data:DataGridRow" x:Key="RowColorableDataGrid">
        <Setter Property="IsTabStop" Value="False"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="data:DataGridRow">
                    <localprimitives:DataGridFrozenGrid x:Name="Root">
                        <localprimitives:DataGridFrozenGrid.Resources>
                            <Storyboard x:Key="DetailsVisibleTransition">
                                <DoubleAnimation Duration="00:00:0.1" Storyboard.TargetName="DetailsPresenter" Storyboard.TargetProperty="ContentHeight"/>
                            </Storyboard>
                        </localprimitives:DataGridFrozenGrid.Resources>
                        <localprimitives:DataGridFrozenGrid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </localprimitives:DataGridFrozenGrid.RowDefinitions>
                        <localprimitives:DataGridFrozenGrid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition/>
                        </localprimitives:DataGridFrozenGrid.ColumnDefinitions>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="NormalAlternatingRow">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" Storyboard.TargetName="BackgroundRectangle" Storyboard.TargetProperty="Opacity" To="1"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" Storyboard.TargetName="BackgroundRectangle" Storyboard.TargetProperty="Opacity" To=".5"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="NormalSelected">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" Storyboard.TargetName="BackgroundRectangle" Storyboard.TargetProperty="Opacity" To="1"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="MouseOverSelected">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" Storyboard.TargetName="BackgroundRectangle" Storyboard.TargetProperty="Opacity" To="1"/>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="UnfocusedSelected">
                                    <Storyboard>
                                        <DoubleAnimation Duration="0" Storyboard.TargetName="BackgroundRectangle" Storyboard.TargetProperty="Opacity" To="1"/>
                                        <ColorAnimation Duration="0" Storyboard.TargetName="BackgroundRectangle" Storyboard.TargetProperty="(Fill).Color" To="#FFE1E7EC"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                            <VisualStateGroup x:Name="ValidationStates">
                                <VisualState x:Name="Valid"/>

                                <VisualState x:Name="Invalid">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Duration="0" Storyboard.TargetName="BackgroundRectangle" Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="Collapsed"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <DoubleAnimation Duration="0" Storyboard.TargetName="InvalidVisualElement" Storyboard.TargetProperty="Opacity" To="1"/>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Rectangle x:Name="BackgroundRectangle" Fill="{Binding RowBackgroundColor, Mode=OneWay}" Grid.ColumnSpan="2" Grid.RowSpan="2"/>
                        <Rectangle x:Name="InvalidVisualElement" Fill="#FFF7D8DB" Opacity="0" Grid.ColumnSpan="2" Grid.RowSpan="2"/>
                        <localprimitives:DataGridRowHeader x:Name="RowHeader" localprimitives:DataGridFrozenGrid.IsFrozen="True" Grid.RowSpan="3"/>
                        <ContentControl x:Name="contentControl" Foreground="{Binding RowForegroundColor, Mode=OneWay}">
                            <localprimitives:DataGridCellsPresenter x:Name="CellsPresenter" localprimitives:DataGridFrozenGrid.IsFrozen="True" Grid.Column="1"/>
                        </ContentControl>
                        <localprimitives:DataGridDetailsPresenter x:Name="DetailsPresenter" Grid.Column="1" Grid.Row="1"/>
                        <Rectangle x:Name="BottomGridLine" Height="1" HorizontalAlignment="Stretch" Grid.Column="1" Grid.Row="2"/>
                    </localprimitives:DataGridFrozenGrid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

# php - 即使应该输出内容，重定向标头也有效

> ID：14510417
> 
> 赞同：2
> 
> 时间：2013-01-24T20:47:16.750
> 
> 标签：php, redirect, http-headers, wamp

以下将我重定向到 google.com

```
Hello!!!
<?php
echo 'ouch!';
header('Location: http://www.google.com');
?> 
```

这不应该因为在发送标题之前输出文本而不起作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:49:59.087

不，除非您在重定向之前刷新输出，否则它将始终重定向

```
Hello!!!
<?php
    echo 'ouch!';
    flush(); //This will cause an error on the next line and stop the page from redirecting
    header('Location: http://www.google.com');
?> 
```

不会重定向，但会生成有关已发送标头的错误

# php - 用 PHP 解码 JSON

> ID：14510418
> 
> 赞同：-5
> 
> 时间：2013-01-24T20:47:17.413
> 
> 标签：php, json

```
{"2":[[[["16","23:00"]],["18","22:00"]]],"1":[["20","20:00"]]} 
```

我需要像这样动态打印值：

```
<p> 2 </p>
      <ul>
        <li>16 ---- 23:00 </li>
        <li>18 ---- 22:00 </li>
     </ul>
<p> 1 </p>
      <ul>
        <li>20 --- 20:00</li>
     </ul> 
```

是函数json_decode()返回的数组数据；我怎样才能像上面的例子一样打印它......谢谢。我知道我需要使用循环，但是，谁能帮我构建它？

```
Array
(
    [2] => Array
        (
            [0] => Array
                (
                    [0] => Array
                        (
                            [0] => Array
                                (
                                    [0] => 16
                                    [1] => 23:00
                                )

                        )

                    [1] => Array
                        (
                            [0] => 18
                            [1] => 22:00
                        )

                )

        )

    [1] => Array
        (
            [0] => Array
                (
                    [0] => 20
                    [1] => 20:00
                )

        )

) 
```

问题，当我需要查看值时显示数组，返回一些像这样：

```
Array
(
    [1] => Array
        (
            [0] => Array
                (
                    [0] => Array
                        (
                            [0] => Array
                                (
                                    [0] => 14
                                    [1] => 23:00
                                )

                        )

                    [1] => Array
                        (
                            [0] => 19
                            [1] => 21:00
                        )

                )

        )

    [2] => Array
        (
            [0] => Array
                (
                    [0] => Array
                        (
                            [0] => Array
                                (
                                    [0] => 15
                                    [1] => 23:00
                                )

                        )

                    [1] => Array
                        (
                            [0] => 17
                            [1] => 20:00
                        )

                )

        )

)

1

    Array----
    19----21:00

2

    Array----
    17----20:00 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:39:11.643

您需要展平阵列。试试这个：

```
<?
function array_flatten_recursive($array) {
   if (!$array) return false;
   $flat = array();
   $RII = new RecursiveIteratorIterator(new RecursiveArrayIterator($array));
   foreach ($RII as $value) $flat[] = $value;
   return $flat;
}

$jencoded = '{"2":[[[["16","23:00"]],["18","22:00"]]],"1":[["20","20:00"]]}';
$jdecoded = json_decode($jencoded);

foreach ($jdecoded as $paragraph => $paragraph_values) {
        echo "<p> $paragraph </p>\n";

        echo "   <ul>\n";
        $flattened = array_flatten_recursive($paragraph_values);
        for ($i=1; $i<count($flattened); $i+=2) {
                echo "      <li>";
                echo $flattened[$i-1];
                echo " ---- ";
                echo $flattened[$i];
                echo " </li>\n";
        }
        echo "   </ul>\n";
}
?> 
```

根据问题作者在评论中的要求，下面的代码可用于按段落 id 对输出进行排序。每个段落数据按时间排序。

```
<?

$jencoded = '{"2":[[[["16","23:00"]],["18","22:00"]]],"1":[["20","20:00"]]}';

function array_flatten_recursive($array) { 
   if (!$array) return false;
   $flat = array();
   $RII = new RecursiveIteratorIterator(new RecursiveArrayIterator($array));
   foreach ($RII as $value) $flat[] = $value;
   return $flat;
}
function array_compare_by_time( $a, $b )
{
  if ($a->value == $b->value) { return 0; } 
  return ($a->value < $b->value) ? -1 : 1;
}

function array_sort_by_time($array) {
        //print_r($array);
        $a = array();

        for ($i=1; $i<count($array); $i+=2) {
                $o = new stdClass;
                $o->key = $array[$i-1];
                $o->value = $array[$i];
                $a[] = $o;
        }
        usort($a,'array_compare_by_time');
        return (array) array_flatten_recursive((array)$a);
} 

$jdecoded = (array)json_decode($jencoded);
asort($jdecoded, SORT_NUMERIC);

foreach ($jdecoded as $paragraph => $paragraph_values) {
        echo "<p> $paragraph </p>\n";

        echo "   <ul>\n";
        $flattened = array_flatten_recursive($paragraph_values);
        $flattened = array_sort_by_time($flattened);

        for ($i=1; $i<count($flattened); $i+=2) {
                echo "      <li>";
                echo $flattened[$i-1];
                echo " ---- ";
                echo $flattened[$i];
                echo " </li>\n";
        }

        echo "   </ul>\n";
}
?> 
```

现在的输出是：

```
<p> 1 </p>
   <ul>
      <li>20 ---- 20:00 </li>
   </ul>
<p> 2 </p>
   <ul>
      <li>18 ---- 22:00 </li>
      <li>16 ---- 23:00 </li>
   </ul> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T20:51:54.533

您可以使用 json_decode 功能

**例子：**

```
<?php
$a = json_decode('{"2":[[["16","23:00"],["18","22:00"]]],"1":[[["20","20:00"]]]}',true);
foreach($a as $i=>$b){
    echo "<p>";
    echo $i;
    echo "<ul>";
    foreach($b as $c){
        foreach($c as $d){
            echo "<li>";
            echo $d[0] . "----" . $d[1];
            echo "</li>";
        }
    }
    echo "</ul>";
    echo "</p>";
}
?> 
```

# java - 从 Spring 应用程序中删除 JSESSIONID cookie

> ID：14510420
> 
> 赞同：2
> 
> 时间：2013-01-24T20:47:38.087
> 
> 标签：java, spring, session, spring-security

我有一个无状态的 Spring 应用程序，所以我没有使用会话。我想禁用与会话有关的所有内容。我有一个 context.xml Tomcat 配置，我在其中添加了这个：

```
<Manager pathname="" /> 
```

来源^：http: [//tomcat.apache.org/tomcat-6.0-doc/config/manager.html](http://tomcat.apache.org/tomcat-6.0-doc/config/manager.html)

我还在我的 spring security xml 文件中的每个 http 块中添加了这个：

```
create-session="stateless" disable-url-rewriting="true" 
```

即使完成了这些事情，如果我手动删除我的 JSESSIONID cookie，我点击的任何页面都会再次添加它。我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:08:04.847

在您的 tomcat 配置中，您可以尝试将以下属性添加到您的 Context 元素

```
<Context cookies=false disableURLRewriting=true ... 
```

来自[tomcat 6 文档](http://tomcat.apache.org/tomcat-6.0-doc/config/context.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T14:17:25.950

JSP 默认创建会话，因此这是[最可能的原因](http://static.springsource.org/spring-security/site/faq/faq.html#faq-unwanted-session-creation)。

利用

```
<%@ page session="false" %> 
```

以防止会话创建。

如果您还添加

```
<debug /> 
```

在 Spring Security 配置的顶部，它将记录新的会话创建以及堆栈转储，因此您可以确定它们发生的位置。

这添加到过滤器链中的调试过滤器是一个有用的功能，用于跟踪在开发过程中如何处理请求，而不仅仅是会话创建问题。

# python - 从模型中读取数据

> ID：14510427
> 
> 赞同：1
> 
> 时间：2013-01-24T20:47:57.100
> 
> 标签：python, model, treeview, pyqt

我正在开发一个 PyQt 应用程序，它有一个 TreeView，并使用模型在那里显示数据。让我先介绍代码，然后描述我遇到的困难。

```
class MainWindow(QtGui.QMainWindow):
    def __init__(self):
        QtGui.QMainWindow.__init__(self)

        self.ui = mainwindow.Ui_uiMainWindow()
        self.ui.setupUi(self)

        self.root = Node('root')
        self.childNode = ChildNode('child node', self.root)
                self.childNode2 = ChildNode('child node2', self.root)

        self._model = PreferencesModel(self.root, self)
        self.ui.uiTree.setModel(self._model)

        self._propEditor = PropertiesEditor(self)
        self.ui.layoutMain.addWidget(self._propEditor)
        self._propEditor.setModel(self._model)

        self.ui.uiSave.clicked.connect(self.savePreferences)

        QtCore.QObject.connect(self.ui.uiTree.selectionModel(),
            QtCore.SIGNAL("currentChanged(QModelIndex, QModelIndex)"),
            self._propEditor.setSelection)

    def savePreferences(self):
            pass 
```

我想做的是读取所有属性`childNode`，`childNode2`例如，并将它们保存到`savePreferences`方法中的 json 或 xml 文件中。但是，我不知道是否应该使用`self.childNode.attribute`或 using读取（或写入）值`self._model`。

# php - 迷失在从 mysql 日志制作统计图形的逻辑背后

> ID：14510430
> 
> 赞同：1
> 
> 时间：2013-01-24T20:48:06.577
> 
> 标签：php, mysql, logic, flot

谢谢阅读。这不是一个编码问题，而是一个逻辑问题。但是，如果我当前的逻辑是错误的，将不胜感激一些编码帮助。

我在我的数据库上创建了一个表，该表记录了我网站上发生的所有事情。当用户注册时，它会被保存。当他再次登录时。等等。每个动作都由一个数字表示。

数据看起来像这样

```
----------------------------
| id | action | timestamp  | 
----------------------------
| 1  | 1      | 1299132900 |
| 2  | 2      | 1346876672 |
| 3  | 14     | 1351983948 |
| 4  | 1      | 1359063373 |
---------------------------- 
```

ID 和操作的类型为 INT(11)，时间戳为 TIMESTAMP

我正在使用查询来检索过去 30 天的所有记录。

```
SELECT id, action, timestamp FROM log WHERE timestamp >= DATE_SUB( CURDATE(),INTERVAL 30 DAY) 
```

它有效，并为我提供了所有正确的值。

我需要安排这些数据以制作浮动图形。

在我看来，有两个步骤：

1.  按操作编号对结果进行分组。
2.  然后，在每个组内，按日期分隔值，因此图形的 X 轴是日期，Y 轴是计数。
3.  使用这些数组，我可以制作不同的 javascript 数据来传递给 flot。

我在正确的轨道上吗？应该有几个 mysql 查询，还是一个 GROUP BY 子句？我有点迷失在这里，希望有任何帮助。

# r - 是否有可能将（二进制）栅格数据直接传递给空间对象？

> ID：14510435
> 
> 赞同：0
> 
> 时间：2013-01-24T20:48:14.417
> 
> 标签：r, rcurl, rgdal

我使用 curl 数据包的 getBinaryURL 从网络接收光栅数据（png、tiff、...）并将数据保存到磁盘。该栅格数据稍后用于空间分析，我目前使用栅格（和 rgdal）数据包来加载栅格数据并创建栅格对象。

```
library(RCurl)
url<-"http://demo.mapserver.org/cgi-bin/wms?version=1.1.1&service=WMS&request=GetMap&VERSION=1.1.1&LAYERS=continents&WIDTH=500&HEIGHT=500&BBOX=0,45,15,60&SRS=EPSG:4326&FORMAT=image/png"
map_png = getBinaryURL(url)
#saving the png to disk
map_file <- file("C:/Users/.../map.png", "wb")
writeBin(map_png, map_file)
close(map_file)

#loading png as raster
library(raster)
map <- raster("C:/Users/.../map.png")
#projection and extend
projection(map)<-"+proj=longlat +datum=WGS84 +ellps=WGS84 towgs84=0,0,0"
map@extent@xmin<-0
map@extent@xmax<-15
map@extent@ymin<-45
map@extent@ymax<-60 
```

它可以工作，但是原始数据的保存和加载部分并不是很好。所以我喜欢将“原始”（map_png）对象直接传递给“RasterLayer”（地图）对象。像这样：

```
map <- raster(map_png) 
```

有人知道如何存档吗？

-

我知道我可以解码 png 或使用数据包 png 进行解码，但是对于许多不同的输入格式，这不是一种理想的方式。更具体地说，我举了一个例子，以获取时间增益，直接使用获取后已经可用的二进制对象`getBinaryURL()`

```
system.time(
for(i in 1:200){
map_file <- file("C:/.../map.png", "wb")
writeBin(map_png, map_file)
close(map_file)
map <- raster("C:/.../map.png")
}
)

system.time(
for(i in 1:200){
xx <- readPNG(map_png)
map <- raster(xx[,,2])
}
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:30:41.547

用户，您可以做一些事情。最好的方法是在调用时安装mapserver 格式参数`rgdal`并将[其更改为地理格式](http://demo.mapserver.org/cgi-bin/wms?version=1.1.1&service=WMS&request=GetMap&VERSION=1.1.1&LAYERS=continents&WIDTH=500&HEIGHT=500&BBOX=0,45,15,60&SRS=EPSG:4326&FORMAT=Gtiff)，例如 GeoTIFF (' `Gtiff`)。参数选项在[这里](http://mapserver.org/mapfile/outputformat.html)。这将保留地理配准。安装`rgdal`后，您可以非常轻松地读取文件：

```
url <- "http://demo.mapserver.org/cgi-bin/wms?version=1.1.1&service=WMS&request=GetMap&VERSION=1.1.1&LAYERS=continents&WIDTH=500&HEIGHT=500&BBOX=0,45,15,60&SRS=EPSG:4326&FORMAT=Gtiff"
download.file(url, destfile="my.tiff")
map <- brick("my.tiff")
map2 <- raster(map, layer=2)

map
class       : RasterBrick 
dimensions  : 500, 500, 250000, 3  (nrow, ncol, ncell, nlayers)
resolution  : 0.03, 0.03  (x, y)
extent      : 0, 15, 45, 60  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0 
data source : ~/my.tiff 
names       : my.1, my.2, my.3 
min values  :    0,    0,    0 
max values  :  255,  255,  255 

map2
class       : RasterLayer 
band        : 2 
dimensions  : 500, 500, 250000  (nrow, ncol, ncell)
resolution  : 0.03, 0.03  (x, y)
extent      : 0, 15, 45, 60  (xmin, xmax, ymin, ymax)
coord. ref. : +proj=longlat +datum=WGS84 +no_defs +ellps=WGS84 +towgs84=0,0,0 
data source : ~/my.tiff 
names       : my.2 
values      : 0, 255  (min, max) 
```

![在此处输入图像描述](../Images/2b3fd7c7d25464df002e1d774f11639b.png)

如果你想使用 png 格式，如果你使用`png`包会更容易：

```
library(png)
library(RCurl)
url <-"http://demo.mapserver.org/cgi-bin/wms?version=1.1.1&service=WMS&request=GetMap&VERSION=1.1.1&LAYERS=continents&WIDTH=500&HEIGHT=500&BBOX=0,45,15,60&SRS=EPSG:4326&FORMAT=image/png"
map_png <- getBinaryURL(url)
xx <- readPNG(map_png)
map <- raster(xx[,,2]) # The png is read as an array, and your data is in the second layer. 
```

# javascript - 在 Node.js 中克隆一个函数

> ID：14510436
> 
> 赞同：1
> 
> 时间：2013-01-24T20:48:16.330
> 
> 标签：javascript, node.js

> **可能重复：**
> [在 Node.js 中克隆对象](https://stackoverflow.com/questions/5055746/cloning-an-object-in-node-js)

我想克隆 Cheerio 函数对象，但使用常规方法时遇到问题。

所以，说对象是`$object`，我试图克隆它：

```
eval("var clone = " + $object.toString()); 
```

但随后我收到此错误消息：

```
var clone = [object Function] 
```

这是原始的输出`$object`

```
{ [Function: initialize]
  _root: 
   { type: 'root',
     name: 'root',
     parent: null,
     prev: null,
     next: null,
     children: [] } } 
```

那么，有谁知道我如何克隆这个东西（以快速的方式？）

# android - 在 Android 中通知用户新推文

> ID：14510437
> 
> 赞同：2
> 
> 时间：2013-01-24T20:48:16.670
> 
> 标签：android, twitter, notifications

我设计了一个应用程序来帮助玉米农民识别疾病和虫害问题，以更好地照顾他们的作物，我还集成了一个 Twitter 提要，让他们可以看到当地推广服务代理之一的最新推文。这些推文将让农民了解已报告或正在传播的任何当地虫害/疾病问题，以便农民做好准备，并希望在问题变得严重之前修复他们的作物。

我想知道的是如何让我的应用程序检查新推文并通知用户。我正在使用“http://api.twitter.com/1/statuses/user_timeline.json”来获取推文，所以我不相信推送通知会起作用。这是可能的，还是有另一种方法来检查和通知用户？

**tl;dr：**我的应用程序如何通知用户新的推文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:06:42.837

您可以检查的一种方法是轮询，但实际上并不推荐这样做。您还可以使用一些发布-订阅机制实现您自己的服务器。

但话虽如此，Twitter 认识到了这个用例并提供了[Streaming API](https://dev.twitter.com/docs/streaming-apis)。这将是实现您正在谈论的内容的最佳方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:35:26.957

你可以试试下面的代码。可能包含一些语法错误。

```
public class TwitterUpdater {
     Context context;
     public TwitterUpdate(Context ctx){
        context = ctx;
        Timer timer = new Timer;
        timer.scheduleAtFixedRate(new TwitterTask(), 0, 300000);
     }

}

public class TwitterTask extends TimerTask{
    @Override
    public void run() {
        // TODO Auto-generated method stub
        this.loadMessages();
    }

}
public void loadMessages(){
        StringBuilder builder = new StringBuilder();
        HostnameVerifier hostnameVerifier = org.apache.http.conn.ssl.SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER;

           DefaultHttpClient client = new DefaultHttpClient();

           SchemeRegistry registry = new SchemeRegistry();
           SSLSocketFactory socketFactory = SSLSocketFactory.getSocketFactory();
           socketFactory.setHostnameVerifier((X509HostnameVerifier) hostnameVerifier);
           registry.register(new Scheme("https", socketFactory, 443));
           SingleClientConnManager mgr = new SingleClientConnManager(client.getParams(), registry);
           DefaultHttpClient httpClient = new DefaultHttpClient(mgr, client.getParams());

           // Set verifier      
           HttpsURLConnection.setDefaultHostnameVerifier(hostnameVerifier);

        HttpGet httpGet = new HttpGet("https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=<Your twitter account name>");
        try {
          HttpResponse response = httpClient.execute(httpGet);
          StatusLine statusLine = response.getStatusLine();
          int statusCode = statusLine.getStatusCode();
          if (statusCode == 200) {

            HttpEntity entity = response.getEntity();
            InputStream content = entity.getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(content));
            String line;
            while ((line = reader.readLine()) != null) {
              builder.append(line);
            }
            JSONArray obj = new JSONArray(builder.toString());
            if (obj.getClass() == JSONArray.class){
                JSONArray  results = obj;
                for(int i = 0; i < results.length(); i++){
                    JSONObject result = results.getJSONObject(i);

                    JSONObject user = result.getJSONObject("user");
                    if(((String) user.get("screen_name")).compareToIgnoreCase("TNCVB")== 0){
                        String name = user.getString("screen_name");
                        String text =result.getString("text");
                        String timestamp = result.getString("created_at");
                        //Put them in an object and add to array or something
                    }
                }
            }

                Intent nintent = new Intent(context, MyActivity.class);
                PendingIntent pintent = PendingIntent.getActivity(context, 0, nintent, 0);

                NotificationCompat.Builder mBuilder =
                        new NotificationCompat.Builder(context)
                        .setSmallIcon(R.drawable.ic_launcher)
                        .setContentTitle("Update")
                        .setContentIntent(pintent)
                        .setContentText("New messages are available.");
                NotificationManager notificationManager = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
                notificationManager.notify(007, mBuilder.build());
          } else {
            Log.e("JSON Error:", "Failed to download file");
          }
        } catch (ClientProtocolException e) {
          e.printStackTrace();
        } catch (IOException e) {
          e.printStackTrace();
        }catch(Exception e){

        }

    }
} 
```

# javascript - javascript导致第二个弹出窗口发生？

> ID：14510438
> 
> 赞同：1
> 
> 时间：2013-01-24T20:48:19.817
> 
> 标签：javascript

一旦用户在 html 表单上单击提交，我就会使用这个 javascript。我想要实现的是弹出一个 jquery 窗口。但是，虽然它确实这样做了，但浏览器也在同时打开一个新的 _blank 目标窗口，我不希望它这样做。

有没有办法阻止这种情况，所以我只有一个 jquery“shadowbox”窗口出现？

```
<script>
    $(document).ready(function() {
        $('#myform').submit(function() {
            Shadowbox.open({
            content:    '<iframe src="loginin.php" width="500" height="300" scrolling="no" style="overflow:hidden; border:none;"></iframe>',
            player:     "html",
            height:     300,
            width:      500
        });

        this.target = 'formpopup';
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:49:57.497

设置`this.target = "formpopup"`是告诉表单提交到一个名为“formpopup”的新窗口/选项卡。删除该行，然后取消该事件。

# android - android获取已设置为textview的drawabletop的drawable

> ID：14510446
> 
> 赞同：27
> 
> 时间：2013-01-24T20:48:39.207
> 
> 标签：android, textview

我有文本视图

```
<TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="20dip"
            android:drawableTop="@drawable/new" /> 
```

我想在活动 jave 上知道设置了哪个图像`drawableTop`，如何设置？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-24T20:56:46.357

利用

```
 Drawable[] drawables = textView.getCompoundDrawables(); 
```

另外，如果您想比较两个可绘制对象。

```
Bitmap bitmap = ((BitmapDrawable)drawables[1] ).getBitmap();
Bitmap bitmap2 = ((BitmapDrawable)getResources().getDrawable(R.drawable.twt_hover)).getBitmap();

if(bitmap == bitmap2)
    {
        //Code blcok
    } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-24T20:59:37.270

首先，给您`TextView`一个 ID，以便您可以在以下位置找到它`Activity`：

```
<TextView
    android:id="@+id/textView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="20dip"
    android:drawableTop="@drawable/new" /> 
```

其次，在你`Activity`找到你的并在调用之后`TextView`在你的方法中获取复合可绘制对象：`onCreate``setContentView`

```
TextView textView = (TextView) findViewById(R.id.textView);
// Left, top, right, bottom drawables.
Drawable[] compoundDrawables = textView.getCompoundDrawables();
// This is the top drawable.
Drawable topCompoundDrawable = compoundDrawables[1]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T20:57:55.403

我认为你应该使用 textView.getCompoundDrawables(); 至于从可绘制顶部获得，我认为这将是第二个可绘制的，例如

```
Drawables tmp[] = textView.getCompoundDrawables();
tmp[1];  //this should be your top drawable but not 100% sure. 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-24T20:58:20.597

您无法在运行时获取可绘制 ID。TextView 仅在其构造函数中使用 ID 来加载相应的可绘制对象。加载可绘制对象后，ID 消失了。

在某些情况下，根本没有可绘制的 ID。drawableTop 可以是颜色 rgb 值。

# java - 是否可以/需要加快同一条目上的 HashMap 操作？

> ID：14510451
> 
> 赞同：1
> 
> 时间：2013-01-24T20:48:54.697
> 
> 标签：java, map, hashmap

假设我希望检查`HashMap`条目然后替换它：

```
if( check( hashMap.get(key) ) ) {
    hashMap.put(key, newValue);
} 
```

这将导致内部搜索过程`HashMap`运行两次：一次 while`get`和另一次 while `put`。这看起来无效。是否可以修改已找到的 Map 条目的值？

**更新**

我知道我可以制作一个包装器，并且我知道我在改变条目时遇到了问题。但问题是为什么？可能是`HashMap`记得上次搜索改进重复一次？为什么没有方法来做这样的操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:50:13.013

编辑：我刚刚发现您*可以*[`Map.Entry.setValue`](http://docs.oracle.com/javase/7/docs/api/java/util/Map.Entry.html#setValue%28V%29)通过（并且`HashMap`实现是可变的）修改条目。不过，获取特定键的条目是一件痛苦的事，而且我不记得曾经见过有人这样做。据我所知，您可以获得一*组*条目，但无法获得单个键的条目。

有一种*邪恶*的做法 -`HashMap`在`java.util`包中声明您自己的子类，并创建一个仅委托给包私有现有方法的*公共*方法：

```
package java.util;

// Please don't actually do this...
public class BadMap<K, V> extends HashMap<K, V> {
    public Map.Entry<K, V> getEntryPublic(K key) {
        return getEntry(key);
    }
} 
```

不过这很恶心。

您通常不会修改*条目*- 但当然您可以更改值中的数据，如果那是可变类型的话。

我非常怀疑这*实际上是*一个性能瓶颈，除非你经常这样做。在开始尝试微调可能不是问题的东西之前，您应该分析您的应用程序以向自己证明这是一个真正的问题。

如果它*确实*是一个问题，您可以将（比如说）a 更改`Map<Integer, String>`为 a`Map<Integer, AtomicReference<String>>`并将 the`AtomicReference<T>`用作简单的可变包装器类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T21:10:10.147

对您的问题发表评论的信息太多。检查 Hashmap 的文档。

> 此实现为基本操作（get 和 put）提供恒定时间性能，假设哈希函数将元素正确地分散在桶中。集合视图的迭代需要的时间与 HashMap 实例的“容量”（桶的数量）加上它的大小（键值映射的数量）成正比。因此，如果迭代性能很重要，则不要将初始容量设置得太高（或负载因子太低），这一点非常重要。

恒定时间意味着执行 get 和 put 操作总是需要相同的时间 [O(1)]。所需的时间量将是线性的，取决于您需要循环的次数 [O(n)]。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T21:00:56.583

看看 trove ( [http://trove4j.sourceforge.net/](http://trove4j.sourceforge.net/) )，他们的地图确实有几种你想要的方法：

*   调整或放置
*   放置如果不存在

我不知道这是如何在内部实现的，但我猜想由于 trove 是高性能的，所以只会有一个查找。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-24T20:53:22.357

如果条目是可变的，您可以更改它。你可以这样做的一个例子是

```
private final Map<String, List<String>> map = new LinkedHashMap<>();

public void put(String key, String value) {
    List<String> list = map.get(key);
    if (list == null)
        map.put(key, list = new ArrayList<>());
    list.add(value);
} 
```

这允许您更新一个值，但您无法在一次操作中查找和替换一个值。

# ruby-on-rails - Ruby - 添加到多维数组

> ID：14510456
> 
> 赞同：5
> 
> 时间：2013-01-24T20:49:03.813
> 
> 标签：ruby-on-rails, ruby, multidimensional-array

我想循环一个进程并每次将一个对象添加到我的数据库中，但如果它没有正确添加，我想在一个多维数组中收集错误。一个数组将保留有错误的批次，第二个数组将包含错误消息。

这里是我的报关表：

```
errors = [[],[]] 
```

所以我希望数组的格式如下：

```
[[lot_count, "#{attribute}: #{error_message}" ]] 
```

循环后应该是这样的：

```
[[1, "Name: Can not be blank" ],[1, "Description: Can not be blank" ],[2, "Name: Can not be blank" ]] 
```

我的问题是它不会将它添加到数组中。我不确定多维数组的语法是否不同。

这在我的数组中没有给我任何东西

```
errors.push([[lot_count, "#{attribute}: #{error_message}" ]]) 
```

这也没有给我任何东西

```
errors += [[lot_count, "#{attribute}: #{error_message}" ]] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:52:25.913

推送时，您似乎将数组嵌套得太深：

```
errors.push([lot_count, "Foo:Bar"])
# => [[], [], [1, "Foo:Bar"]] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T20:54:10.447

你可以从一个空数组开始......

```
errors = [] 
```

...然后构建单个错误数组...

```
e = [lot_count, "#{attribute}: #{error_message}" ] 
```

...并将其推到错误数组的末尾。

```
errors << e
# or errors.push(e) 
```

这将为您提供最终结果

```
[[1, "Name: Can not be blank" ],[1, "Description: Can not be blank" ],[2, "Name: Can not be blank" ]] 
```

# c++ - boost::interprocess::message_queue 构造函数失败

> ID：14510460
> 
> 赞同：1
> 
> 时间：2013-01-24T20:49:07.480
> 
> 标签：c++, boost, boost-interprocess

boost::interprocess::message_queue 构造函数在进程在不同用户下运行时失败。
更具体一点。我在 proc1 中创建 message_queue。并尝试从 proc2（另一个用户）打开相同的 message_queue。
有可能让它工作吗？或者我应该找到另一种方法来同步我的流程？

boost-1.52
操作系统：Windows 7 x86
编译器：MSVC 2010

PS 代码很简单。如果两个进程都是从同一个用户启动的，则完全可以工作。

PPS 这是我收到的一个消息框。我无法调用 LastWindowError()...

```
---------------------------
Error
---------------------------
Runtime Error (at 18:421):

External exception E06D7363.
---------------------------
ОК   
--------------------------- 
```

我的代码（Process2）：

```
 void ipcMsg1(HWND hWnd) {
    util::MsgBox mb(hWnd, L"Sending Message1");
    try {
        mb.info(L"create mq");
        bipc::message_queue mq(bipc::open_or_create, plmqproto::g_mqName, plmqproto::g_mqSize, sizeof(int));
        mb.info(L"created");
        const int msg = plmqproto::g_mqMessage1;
        mq.send(&msg, sizeof(msg), 0);
        bipc::message_queue::remove(plmqproto::g_mqName);
    } catch(const bipc::interprocess_exception &ex) {
        mb.error(plcore::stringToWString(ex.what()));
        std::wstringstream ss;
        const unsigned long we = GetLastError();
        ss << L">1\. GetLastError: " << we << std::endl;
        ss << L" " << plcore::GetWindowsErrorMessage(we); 
        mb.error(ss.str());
    } catch(const std::exception &ex) {
        mb.error(plcore::stringToWString(ex.what()));
        std::wstringstream ss;
        const unsigned long we = GetLastError();
        ss << L">2\. GetLastError: " << we << std::endl;
        ss << L" " << plcore::GetWindowsErrorMessage(we); 
        mb.error(ss.str());
    } catch(...) {
        std::wstringstream ss;
        const unsigned long we = GetLastError();
        ss << L">3\. GetLastError: " << we << std::endl;
        ss << L" " << plcore::GetWindowsErrorMessage(we); 
        mb.error(ss.str());
    }
} 
```

所以。我只收到“创建 mq”消息框。然后失败。

Boost 升级没有帮助。

# perl - 为什么 Perl 中的“bob”==“godzilla”？

> ID：14510463
> 
> 赞同：3
> 
> 时间：2013-01-24T20:49:16.337
> 
> 标签：perl, argv

今天在 Perl 课上，一个学生交了一份让我烦恼的作业。我们正在研究 ARGV，但结果不是我所期望的。他的程序（meme.pl）是：

```
#!/usr/bin/perl
$A = $ARGV[0];
chomp($A);
if ($A == "godzilla"){
    print "$A\n";
}
else {
    print "We need a monster's name\n";
} 
```

如果我输入：

```
% ./meme.pl bob 
```

结果是

```
% bob 
```

所以变量赋值有效，但无论在命令行上键入什么，条件 ($A == "godzilla") 都是正确的。我预计既然 $ARGV[0] 是“bob”并且 $A=$ARGV[0]，那么 $A="godzilla" 就不应该是真的。

我错过了什么？我已经梳理了这段代码几个小时，我知道我只是忽略了一些小事情。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-24T20:52:11.210

使用`eq`, not`==`来测试字符串是否相等：

```
if ($A eq "godzilla"){ 
```

更多信息可在[perldoc perlop 获得](http://perldoc.perl.org/perlop.html#Equality-Operators)。

**注意：**将`use strict;`和添加`use warnings;`到脚本的顶部会引导您朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-24T20:55:22.257

`use strict;`并且`use warnings;`应该在我的书中...即时F。

但是没有......使用“==”评估所有字符串 - 除了那些以“123bob”之类的数字开头的字符串（见下面的评论） - 作为数字0。这就是为什么它评估为真 - 它是“转向成”的说法`0 == 0`。`use warnings;`会告诉你有什么事情发生了。

正如许多人所说 -`eq`用于字符串。

更多证据和选项可以在这里找到：（http://perlmeme.org/howtos/syntax/comparing_values.html）

相关摘录（示例程序）：

```
#!/usr/bin/perl
use strict;
use warnings;

my $string1 = 'three';
my $string2 = 'five';

if ($string1 == $string2) {
    print "Equal\n";
} else {
    print "Not equal\n";
} 
```

从上面的示例中，您会收到警告消息，并且两个字符串的计算结果都为零：

```
Argument "five" isn't numeric in numeric eq (==) at ./test.pl line 8.
Argument "three" isn't numeric in numeric eq (==) at ./test.pl line 8.
Equal 
```

* * *

你没有得到那些警告......只是“平等”，这要归功于你的 - errr......你的学生的......*咳嗽*...... - 代码`use warnings;`的顶部。;)

 ** * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-24T20:53:36.673

比较字符串时，必须使用“eq”而不是“==”。所以更换

```
($A == "godzilla") 
```

经过

```
($A eq "godzilla") 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-24T20:59:10.880

其他人所说的关于使用`eq`比较字符串是正确的。但是，测试通过了，因为当与`==`字符串 'bob' 和字符串 'godzilla' 进行数字比较时，结果都为 0，所以测试通过并且你得到`bob`.*

# ruby - 有没有办法根据条件替换运算符？

> ID：14510464
> 
> 赞同：0
> 
> 时间：2013-01-24T20:49:24.393
> 
> 标签：ruby

我有一个 if/else 条件，if 和 else 部分是相同的，除了使用的运算符。在一种情况下`<`，在另一种情况下`>`。有没有办法有条件地设置该运算符以干燥代码？

```
if count_year < end_year
    while count_year <= end_year
        if count_year % 4 == 0
            if count_year % 100 != 0
                all_years << count_year unless (count_year % 400 == 0)
            end
        end
        count_year += 1
    end
    puts all_years
elsif count_year > end_year
    while count_year >= end_year
        if count_year % 4 == 0
            if count_year % 100 != 0
                all_years << count_year unless (count_year % 400 == 0)
            end
        end
        count_year -= 1
    end
    puts all_years.reverse
end 
```

这是打印两个给定年份之间的闰年程序的一部分。我觉得必须有一种方法不必重复循环两次。类似的东西：`count_year < end_year ? operator = "<" : operator = ">"`- 然后使用该变量将运算符替换为代码块或其他东西？有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T20:56:52.340

对于一个小的改进，您可以将真正相同的部分提取到一个方法中。然后重复不再如此庞大。

```
# I'm too lazy to come up with a proper name for it.
def foo count_year, all_years
  if count_year % 4 == 0
    if count_year % 100 != 0
      all_years << count_year unless (count_year % 400 == 0)
    end
  end
end

# later...

if count_year < end_year
  while count_year <= end_year
    foo count_year, all_years
    count_year += 1
  end
  puts all_years
elsif count_year > end_year
  while count_year >= end_year
    foo count_year, all_years
    count_year -= 1
  end
  puts all_years.reverse
end 
```

## 但是，运算符替换...

是的，有一种方法可以动态选择运算符进行评估。你看，ruby 中的运算符只是方法调用，仅此而已。这两行是等价的：

```
7 > 5
7.>(5) 
```

这是一个选择随机运算符进行比较的片段。我把它留给你来适应你的问题（如果你愿意，那就是。我建议你不要这样做）。

```
def is_7_greater_than_5
  operator = [:<, :>].sample # pick random operator
  7.send(operator, 5)
end

is_7_greater_than_5 # => false
is_7_greater_than_5 # => false
is_7_greater_than_5 # => true
is_7_greater_than_5 # => true
is_7_greater_than_5 # => true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T21:00:03.610

```
def example count_year, end_year
  all_years = []

  dir, test = count_year < end_year                      ?
    [ 1, proc { |c, e| c <= e }] : count_year > end_year ?
    [-1, proc { |c, e| c >  e }] :
    [ 0, proc { |c, e| false  }]

  while test.call count_year, end_year
    if count_year % 4 == 0
      if count_year % 100 != 0
        all_years << count_year unless count_year % 400 == 0
      end
    end
    count_year += dir
    puts dir > 0 ? all_years : all_years.reverse
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:52:11.947

哇。为什么你做一个代码高尔夫练习并这么快就接受了答案？嘘！:( 呵呵。开个玩笑。早起的鸟儿有虫吃。我可能太从字面上理解了这个问题，因为我认为你只是想尝试比较。

我会使用 ruby​​ 的内置函数并将这个方法分解为一个类。:)

```
require 'date'

class LeapYearFinder

  attr_reader :years, :years_reversed

  def initialize(start_year, end_year)
    @start_year    = Date.parse("1/1/#{start_year.to_s}")
    @end_year      = Date.parse("1/1/#{end_year.to_s}")
    @years         ||= leap_years
  end

  def compare_range
    @compare_range ||= Range.new(@start_year, @end_year)
  end

  def leap_years
    years = []
    compare_range.step {|x| years << x.year if x.leap? }
    years.uniq!
  end

  def years_reversed
    @years.reverse
  end

end

lp = LeapYearFinder.new(1900, 2012)

puts "Years putzed"
lp.years.map {|x| puts x}

puts "Years reversed"
lp.years_reversed.map {|x| puts x} 
```

### 一些极端案例问题

*   处理反向日期输入
*   正确地通过范围，从而避免*uniq!* 并且可能会产生更好的性能

# c# - 在 UI 线程被阻塞时确保流畅的 Storyboard 动画

> ID：14510466
> 
> 赞同：2
> 
> 时间：2013-01-24T20:49:30.460
> 
> 标签：c#, multithreading, animation, windows-phone-8, visual-glitch

在我的 WP8 应用程序中，我有一个`UserControl`带有活动情节提要动画的动画，它可以让它`UserControl`朝着想要的方向移动。在该动画的某个时刻，我以编程方式将秒添加`UserControl`到场景中。

问题是第二个，动态添加`UserControl`的内部包含很多元素并且需要大量时间来渲染。当它加载时，我的手机上的 UI 被阻塞了大约 50 毫秒，并且 first`UserControl`的 Storyboard 动画中的故障非常明显。

问题是我能做些什么呢？我应该以某种方式在不同的线程中运行动画吗？如果是这样，那么一些通用示例/链接/手册将有很大帮助，因为我不太精通线程业务。如果那不是一个选择，那么我想听听这里有什么可以帮助我的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:59:29.013

我不建议在 windows-phone 上使用线程；如果您有需要在线程之间共享的数据，您也应该避免使用线程。可以做到，但并不容易。

如果可能的话，我会预先加载您的用户控件（或控件组），然后根据需要显示/隐藏它们。这应该可以防止您看到的故障。如果您需要有关如何预加载的帮助，请发布一些您如何动态加载控件的示例，我们可能会为您提供帮助。

如果您确实需要执行多线程，我建议您在此处使用后台工作人员更多详细信息：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/cc221403(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/cc221403(v=vs.105).aspx)

# javascript - Jquery将对象转换为字符串和切片

> ID：14510472
> 
> 赞同：0
> 
> 时间：2013-01-24T20:49:46.293
> 
> 标签：javascript, jquery

通过基于 ajax 的脚本我得到对象：

例如：

```
item.TYP_PCON_START 
```

哪个值是，例如 201212...当我尝试对他进行切片时，我得到 oject 错误...

我怎么能切片这个对象，例如我得到 2012，或者最好在最前面设置两个最后一个数字并添加点，比如：

```
12.2012 
```

我怎么能这样做？（我将此文本附加为选择列表的值）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:55:31.110

您需要对字符串属性进行切片，而不是对象本身：

```
item.TYP_PCON_START.slice(-2) + '.' + item.TYP_PCON_START.slice(0, 4);
> '12.2012' 
```

[http://jsfiddle.net/4Hdme/](http://jsfiddle.net/4Hdme/)

编辑：如果您的属性是数字，则必须在尝试对其进行切片之前将其转换为字符串：

```
var propertyAsString = item.TYP_PCON_START.toString();
propertyAsString.slice(-2) + '.' + propertyAsString.slice(0, 4);
> '12.2012' 
```

[http://jsfiddle.net/4Hdme/1/](http://jsfiddle.net/4Hdme/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:12:46.580

```
 var a = item.TYP_PCON_START,
        a = a+"",
        a = a.split("");
    a.splice(2,0,".");
    a = a.join("");
    a = parseFloat(a);
    console.log(a); 
```

# mysql - mysql查询：如何根据时间选择不同的

> ID：14510479
> 
> 赞同：0
> 
> 时间：2013-01-24T20:50:08.090
> 
> 标签：mysql

我有一张看起来像这样的桌子

```
|ID|TIME-|
|01|01:15|
|01|01:30|
|02|01:35|
|02|01:36|
|02|05:30|
|02|10:30|
|01|12:30| 
```

我想要的是仅当它们落在同一小时标记内时才选择不同的 id，所以我正在寻找的结果是：

```
|ID|TIME|
|01|1:15|
|02|1:35|
|02|5:30|
|02|10:30|
|01|12:30| 
```

TIME 是 mysql 日期格式。

我该如何写这个查询？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T20:54:08.040

你可以这样做。这将为每个 ID 提供一条记录，小时显示给定小时的第一个时间值。

```
SELECT ID, TIME

FROM  <yourtable>

GROUP BY ID, HOUR(TIME)

ORDER BY ID, TIME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:55:44.300

假设 TIME 是时间戳或日期时间

```
SELECT ID, TIME
FROM  yourtable
GROUP BY ID, floor(TIME/3600) 
```

这是 mysql 特定的

```
SELECT ID, TIME
FROM  yourtable
GROUP BY ID, TIME DIV 3600 
```

# python - 使用 Python 2.7 解析 HTML

> ID：14510480
> 
> 赞同：0
> 
> 时间：2013-01-24T20:50:11.737
> 
> 标签：python, html, parsing, python-2.7, beautifulsoup

晚上的人（或早上，取决于你在哪里:)）。

我正在寻找一个包含多个片段的网页，类似于以下内容：-

```
> <p><a name="Abercrombie"></a></p> <h3>Abercrombie Council</h3> <p>Mr
> Billy Smith<br />The Managing Director<br />123 Jones Street,
> London<br />T:02081234567<br /><a
> href="mailto:billysmith@example.com">Email</a></p> 
```

我想要做的是从网页中捕获源代码，然后对其进行解析，提取上面的唯一信息，并将其放入制表符分隔的文档中的行中，最后换行 - 拆分标题、名称办公室、个人姓名、工作角色、地址、电话号码、电子邮件地址。

我一直在考虑使用 BeautifulSoup，但我只是想知道是否还有其他更合适的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:15:41.313

我会说 BeautifulSoup 将是您最好和最简单的选择，它可以解析页面或 HTML 块。你也可以试试scrapy甚至scraperwiki

**BS 的示例用法**

```
import BeautifulSoup
import urllib2

get = urllib2.urlopen('http://site.com').read()
dom = BeautifulSoup.BeautifulSoup(get)
data = dom.findAll('p', {'class' : 'address'}) # <p class='address'>....</p>

for i in data:
    print data 
```

更多示例：[http ://www.crummy.com/software/BeautifulSoup/bs3/documentation.html](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:10:16.090

BeautifulSoup 是一个不错的流行库，但你也可以看看[lxml](http://lxml.de/parsing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T22:27:17.813

Web 抓取框架 Scrapy 是此类任务的不错选择[http://scrapy.org/](http://scrapy.org/)因为它不仅可以解析和提取数据，还可以运行自动抓取作业。

# foursquare - Venue Timeseries 的结果在哪个时区返回？

> ID：14510488
> 
> 赞同：1
> 
> 时间：2013-01-24T20:50:25.590
> 
> 标签：foursquare

我最初预计结果将采用 UTC，但看起来它们可能是场地的当地时间或通常是东部时间。我管理的场地的数据有点太稀疏，目前无法具体说明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T20:34:01.717

对场地/时间序列的响应以场地的时区返回。您需要点击场地详细信息 api 来找出答案。

# mysql - 手动选择外键列mysql工作台

> ID：14510494
> 
> 赞同：1
> 
> 时间：2013-01-24T20:50:42.053
> 
> 标签：mysql, mysql-workbench, workbench

假设我在 MySQL 数据库中有一堆 MyISAM 表。我知道如果我的表是 InnoDB MySQL Workbench 会自动获取表之间的关系。但是，如果我的表是 MyISAM，有没有一种方法可以选择在 MySQL Workbench 中用作外键的列，而不需要 MySQL Workbench 在我的表模式中添加列？例如，假设我在一个名为的表中有这些列`users`：

```
id              PRIMARY KEY
username        VARCHAR (255)
password        VARCHAR (255)
email           VARCHAR (255)
user_type_id    INT 
```

正如您在上面看到的，`user_type_id`将是来自名为 的表的外键`user_types`。`users`如果我在我的表和`user_types`MySQL Workbench 中添加多对一关系，`user_types_id`则会自动将一列添加到我的表的模式中`users`（因为 MySQL Workbench 通常将其视为外键）。我不希望这种情况发生，我希望能够告诉 MySQL Workbench 使用该列`user_type_id`作为我的外键。我有什么办法可以做到吗？

谢谢

**注意：**当我在 MySQL Workbench 的模型视图上双击一个表时，有一个外键选项卡，但是当我这样做时，我得到以下文本：

**注意：只能为某些存储引擎（如 InnoDB）定义外键。服务器接受其他存储引擎的外键定义，但默默地忽略它们。将您的表引擎切换到支持外键的引擎，以便在此处进行调整。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T08:27:26.493

您可以暂时切换到 InnoDB，定义关系并切换回 MyISAM。关系将保持不变。但是，除了记录您的意图之外，它们没有任何实际用途。

如果这就是你想要的，那就继续吧。

顺便说一句：FK 标签页仅在 Windows 上不可用（对于不支持 FK 的引擎），因为我们已经看到许多用户抱怨为 MyISAM 定义了 FK，只是为了在他们的目标数据库中看到没有效果。在 Linux + OS X 上，无论选择何种存储引擎，您都可以在 FK 上工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T20:55:50.527

如果我正确理解了您的问题，我相信您可以从表本身的外键选项卡中执行此操作。如果您从模型概览中双击一个表，则在底部选项卡上有一个外键选项卡。您可以手动添加外键，但您可以从该对话框中选择。那有意义吗？

# performance - 页面加载时间减少 200 毫秒是否显着？

> ID：14510499
> 
> 赞同：4
> 
> 时间：2013-01-24T20:51:20.110
> 
> 标签：performance, user-interface, seo, page-load-time, labjs

我在我开发的一个站点中使用实验室 js 进行了一些测试，页面加载时间减少了 200 毫秒。现在后端处理后花费的总时间约为 1.5 秒。

如果值得麻烦，我正在徘徊。200ms 是一个巨大的收益吗？一个荒谬的？我知道页面加载时间会影响页面排名，但是 200 毫秒会产生如此大的差异吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-24T20:54:56.457

引用[*毫秒就是金钱：云中的性能有多重要*](http://www.carbon60.com/milliseconds-are-money-how-much-performance-matters-in-the-cloud/)：

> ### 5) 毫秒很重要的证明……</h3>
> 
> 云行业的大佬们已经深入挖掘并证明了这些毫秒很重要：
> 
> *   Amazon.com 的加载时间每增加 100 毫秒，销售额就会下降 1%（Kohavi 和 Longbotham 2007）。
>     
>     
> *   Google 发现，从 0.4 秒内加载 10 个结果页面到在 0.9 秒内加载 30 个结果页面的变化减少了 20% 的流量和广告收入（Linden 2006）。
>     
>     
> *   Google 搜索发现 400 毫秒的延迟会导致搜索/用户发生 -0.59% 的变化。更重要的是，即使在延迟消除后，这些用户的搜索量仍然减少了 -0.21%，这表明较慢的用户体验会影响长期行为。
>     
>     
> *   谷歌的另一项研究发现，额外 500 毫秒的加载时间会导致 20% 的流量下降。
>     
>     
> *   雅虎还发现，一个慢 400 毫秒的页面会在页面完成加载之前看到多出 5-9% 的人离开。

我认为这回答了你的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T20:56:23.957

恕我直言，绝对 200 毫秒的增益并不是一个巨大的增益。

但是...如果您花几天时间进行优化，并且每天设法获得 200 毫秒，那将变得非常重要。

你应该问自己的是：当我打开我的页面时，我是否想点击离开？就好像你是一只咔哒咔哒的含咖啡因的猴子，我的意思是。

如果您想留下来，请不要优化。如果您觉得在页面加载之前看到太多微秒的空白页面，请继续优化。

# php - 在mysql查询中使用php time()函数计算两个日期之间的差异

> ID：14510500
> 
> 赞同：1
> 
> 时间：2013-01-24T20:51:22.590
> 
> 标签：php, mysql

我已经搜索过这个，但我找不到任何东西。

我有一个文章表。当我写新文章时，我使用 php time() 函数将时间写入 mysql 表。

我的桌子是

id文章时间

时间数据类型为 INT(UNSIGNED)

我的问题是我想显示上周到今天或上个月到今天的文章。

我的mysql查询应该如何？

通常我这样做

```
SELECT * FROM articles ORDER BY Time DESC 
```

所以这给了我从今天到过去的数据。我该怎么做？我想不出解决办法。我应该一起使用 php-mysql 还是只能用 mysql 来处理？你能给我想法或例子吗？谢谢。

编辑：

我按照建议更改为日期时间，现在我认为我有时区问题

现在我的 ago() 函数工作晚了 2 小时。

```
<?php 
date_default_timezone_set('Europe/Istanbul'); //timezone function 
ago($time)
{
   $periods = array("saniye", "dakka", "saat", "gün", "hafta", "ay", "yıl", "baya");
   $lengths = array("60","60","24","7","4.35","12","10");

   $now = time();

       $difference     = $now - $time;
       $tense         = "önce";

   for($j = 0; $difference >= $lengths[$j] && $j < count($lengths)-1; $j++) {
       $difference /= $lengths[$j];
   }

   $difference = round($difference);

   return "$difference $periods[$j] önce ";
} //ago function 

echo $Date = ago(strtotime($data['WriteTime'])). 'önce';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:57:07.143

好吧，您在使用 unix 时间戳整数存储在数据库中时犯了一个初学者错误。您应该几乎总是使用日期/日期时间字段类型，因为您总是需要查询那些在不使用 unix 时间戳时更容易的字段。

`NOW()`因此，将您的字段转换为日期时间，在添加行时使用 MySQL将当前时间戳插入字段。

然后查看 MySQL 数据/时间函数以根据您的意愿查询该字段。

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:55:08.540

假设您的`time`列是 Unix 时间戳，您可以尝试这样的事情：（未测试）

```
SELECT ... 
FROM magic
WHERE `time` BETWEEN DATE_SUB(FROM_UNIXTIME(`time`), INTERVAL 1 WEEK) AND NOW() 
```

对于您的月份，您将使用`INTERVAL 1 MONTH`. 请将您的列转换为常用数据类型，并且不要使用保留字作为列名。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T20:55:21.820

首先制作`time`一个`date type field` （并给它一个有意义的不同名称`article_date`，例如例如）

然后使用这个查询：

```
SELECT  * FROM    articles 
WHERE   article_date BETWEEN CURDATE() - INTERVAL 7 DAY AND CURDATE() 
```

# asp.net - 使用 .net 4 URL 路由根据查询字符串将一个 ASPX 页面重定向到另一个页面？

> ID：14510502
> 
> 赞同：1
> 
> 时间：2013-01-24T20:51:32.717
> 
> 标签：asp.net, url-routing

我们正在稍微重构我们的 ASP.Net 站点，我们需要将大量页面请求重定向到新页面。我想知道我们是否可以为此使用 .Net 4 的路由机制。将会发生的是请求`OldPage.aspx?i=Parm1`现在将转到`NewPage1.aspx`并且`OldPage.aspx?i=Parm2`将转到`NewPage2.aspx`。

我知道我们可以这样做`OldPage.aspx`：

```
private void Page_Load(object sender, System.EventArgs e)
{
   Response.Status = "301 Moved Permanently";
   Response.AddHeader("Location","http://www.new-url.com");
} 
```

但是我们可以使用路由从一个 aspx 页面（和参数）映射到另一个 aspx 页面吗？看起来 RouteTable 更适合设置 MVC 样式路由，而不是处理从一个 ASPX 页面到另一个页面的重定向。但是，如果我可以让它与 RouteTable 一起使用，我可以删除 OldPage.aspx。

```
routes.MapPageRoute(
   "MarketReports",               // Route name
   "Reports/{*i}",  // Route URL
   "~/pageControl2.aspx"      // Web page to handle route
); 
```

# .net - 如何测试多个 XPath 表达式选择的节点集是否不重叠？

> ID：14510504
> 
> 赞同：0
> 
> 时间：2013-01-24T20:51:43.990
> 
> 标签：.net, xpath

我有 XPath 表达式的列表。.NET 中是否有一种方便的方法来测试列表中没有 XPath 表达式在其寻址范围内重叠？例子：

```
string1 = /nodeA/nodeB/nodeC  
string2 = /nodeA/modeB/nodeD 
```

会生成`false`，因为没有重叠。

```
string1 = /nodeA/nodeB/nodeC  
string2 = /nodeA/nodeB/nodeC/nodeF 
```

在这对参数的情况下，它将返回`true`，因为表达式选择的元素集`string1`与评估的结果重叠`string2`。

编辑：
鉴于下面的答案，我了解到有一个可用的“相交”解决方案，但由于我需要解决重叠“冲突”而不在 XML 文档上应用表达式，所以我无法使用它。我现在明白，任意情况几乎是不可能的。所以我的解决方案是限制允许的表达式类型并进行字符串比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:40:12.450

我曾经为用于为 XSLT 2.0 和相关规范生成勘误表的样式表编写了与此类似的目的的代码。你可能会发现它给了你一些想法。这包含检查规范中没有文本受到多个勘误“影响”的逻辑。代码如下（它使用 saxon:evaluate 因为定义勘误表的 XML 文档包含指示基本文档中的哪些部分“受影响”的 XPath 表达式）。

这里的一个关键目标不是确定两个 XPath 表达式是否选择重叠节点，而是确定 N 个这样的表达式是否有任何重叠，其中表达式是事先不知道的——我们希望这样做而不寻找所有表达式对之间的重叠。

这里有一个有趣的表达式：count($x) != count($x/.)。这里 ($x/.) 用于强制从节点序列中消除重复节点，因此测试是询问重复消除是否会删除任何节点，即 $x 是否包含任何重复。

```
<!-- The following template checks that there is no element in the source document
     that is replaced or deleted by more than one erratum -->

<xsl:template name="check-for-conflicts">
  <xsl:variable name="directly-affected-elements" 
      select="er:eval-all(/er:errata/er:erratum[not(@superseded)]//er:old-text[not(starts-with(@action, 'insert-'))])"/>
  <xsl:variable name="all-affected-elements"
      select="for $e in $directly-affected-elements return $e/descendant-or-self::*"/>
  <xsl:if test="count($all-affected-elements) != count($all-affected-elements/.)">
     <!-- we now know there are duplicates, we just need to identify them... -->
     <xsl:for-each-group select="$all-affected-elements" group-by="generate-id()">
       <xsl:if test="count(current-group()) gt 1">
         <xsl:variable name="id" select="(ancestor::*/@id)[last()]"/>
         <xsl:variable name="section" select="$spec/key('id',$id)"/>
         <xsl:variable name="section-number">
           <xsl:number select="$section" level="multiple" count="div1|div2|div3|div4"/>
         </xsl:variable>
         <xsl:variable name="loc" select="er:location($section, .)"/>
         <p style="color:red">
           <xsl:text>WARNING: In </xsl:text>
           <xsl:value-of select="$section-number, $section/head"/>
           <xsl:text> (</xsl:text>
           <xsl:value-of select="$loc"/>
           <xsl:text>) Element is affected by more than one change</xsl:text>
         </p>
       </xsl:if>
     </xsl:for-each-group>
   </xsl:if>           
</xsl:template>

<!-- Support function for the check-for-conflicts template.
     This function builds a list (retaining duplicates) of all elements
     in the source document directly affected by a replacement or deletion.
     "Directly affected" means that the element is explicitly selected for replacement
     or deletion; the descendants of this element are indirectly affected. -->       

<xsl:function name="er:eval-all" as="element()*">
  <xsl:param name="in" as="element(er:old-text)*"/>
  <xsl:for-each select="$in">
    <xsl:variable name="id" select="@ref"/>
    <xsl:variable name="section" select="$spec/key('id',$id)"/>
    <xsl:variable name="exp" select="@select"/>
    <xsl:variable name="nodes" select="$section/saxon:evaluate($exp)"/>
    <xsl:sequence select="$nodes"/>
  </xsl:for-each>
</xsl:function> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:12:10.863

您可以使用 XPath 2.0 中引入的[`intersect`运算符](http://saxon.sourceforge.net/saxon7.5/expressions.html#except)来检查这些表达式选择的集合的交集是否为空。

```
/nodeA/nodeB/nodeC intersect /nodeA/nodeB/nodeC/nodeF 
```

AFAIK，[Saxon](http://saxon.sourceforge.net/)支持 XPath 2.0，它可用于 .NET 平台。[在这个 SO question](https://stackoverflow.com/questions/1525299/xpath-and-xslt-2-0-for-net)的答案中提到了一些替代方案。你必须自己环顾四周。我不是一个真正的 .NET 人，所以我不熟悉平台中的新功能。

您还可以寻找基于 LINQ to XML 的解决方案。[在这个 msdn 线程](http://social.msdn.microsoft.com/Forums/en/xmlandnetfx/thread/cc7fe5ca-f52c-41b7-928c-7ab52ae3f25a)中讨论了这样的方法。这是[OP（Santosh Benjamin's）博客上的摘要。](http://santoshbenjamin.wordpress.com/2009/11/28/using-intersect-with-linq-to-xml/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:29:35.707

没有真正的机会计算所有可能输入的重叠，但您可以轻松地为给定的输入计算重叠。

# 在给定输入上重叠

```
/nodeA/nodeB/nodeC//*[. = /nodeA/modeB/nodeD//*] 
```

将在左查询的结果集中找到所有节点，这些节点也包含在右查询中。这模仿`intersect`了@Tom 为 XPath 1.0 提出的建议。如果它返回一个空集，则该输入的查询不会重叠，如果有结果，它们就会重叠。

# 为什么很难在任意输入上找到重叠

考虑两个查询，例如

*   `//*[@id]`（返回具有“id”属性的 als 节点）
*   `//someNode`（返回所有`<someNode/>`元素）

如果有一个元素`<someNode id="..."/>`，就会有重叠，否则没有。为任意输入上的任意 XPath 表达式解决这个问题将变得非常困难。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T22:50:19.580

**对于两个 XPath 表达式，请使用**：

```
not(Expr1[count(.|Expr2) = count(Expr2)]) 
```

如果对您拥有的每一对表达式进行评估，并且答案始终为`true()`，那么只有这样，没有两个表达式会选择同一个节点。

**如果需要查找是否有一个节点被所有表达式选中**：

```
not((Expr1 | Expr2 ... | ExprN)
      [count(.|Expr1) = count(Expr1)
     and
       count(.|Expr2) = count(Expr2)
     .  .  .  .  .  .  .  .  .  .  .  .
     and
       count(.|ExprN) = count(ExprN)
      ]
    ) 
```

是`true()`如果没有这样的节点。

# windows - 如何使用 Visual Studio 2010 安装 TypeScript

> ID：14510511
> 
> 赞同：39
> 
> 时间：2013-01-24T20:52:17.093
> 
> 标签：windows, visual-studio-2010, installation, typescript

这是一个流行的问题，我将提供答案。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-24T20:52:17.093

# 打字稿版本 0.9.1.1

Typescript 0.9.5+ 依赖于 Microsoft.VisualStudio.Shell.11.0.dll。因此，这些说明将不再更新。

以下内容用于教育目的。请遵守所有许可和重新分发要求。对于以前版本的 TypeScript，请参阅此答案的编辑历史记录。

1.  关闭 Visual Studio
2.  安装[Wix 工具集](http://wixtoolset.org/)
3.  下载[TypeScript for Visual Studio 2012](http://www.microsoft.com/en-us/download/details.aspx?id=34790)版本 0.9.1.1 并将安装程序可执行文件放在其自己的临时目录中。
4.  在临时目录中打开命令窗口。
5.  执行命令`"%wix%\bin\dark.exe" -x .\TypeScriptSetup TypeScriptSetup.0.9.1.1.exe`
6.  转到目录 .\TypeScriptSetup\AttachedContainer\packages\TypeScript_CORE
7.  执行以下命令

    ```
    IF NOT DEFINED ProgramFiles(x86) SET ProgramFiles(x86)=%ProgramFiles%
    SET VSDir=%ProgramFiles(x86)%\Microsoft Visual Studio 10.0\Common7\IDE
    SET Devenv=%VSDir%\devenv.exe 
    ```

## 对于 Windows 7 用户

执行命令：

`TypeScript_CORE.msi /l* log.txt VS11_EXTENSIONS_DIR="%VSDir%\Extensions\Microsoft" VS11_NEWSCRIPTITEMS_DIR="%VSDir%\NewFileItems" VS11DEVENV="%Devenv%" VS11_TARGETSINSTALLFOLDER="%ProgramFiles(x86)%\MSBuild\Microsoft\VisualStudio\v10.0\TypeScript"`

## 对于 Windows Vista 用户

您将需要使用 Wix 构建一个新的安装程序

1.  执行命令`"%wix%\bin\dark.exe" -x .\TypeScript_CORE TypeScript_Core.msi`
2.  可选择将 TypeScript_CORE.wxs 复制到 TypeScript_CORE.wxs.bak（建议）
3.  编辑 TypeScript_CORE.wxs 替换下面显示的行。为避免可能的版权问题以及由于 StackOverflow 的大小限制，整个更新文件尚未发布。我能做的最好的就是发布差异报告。第一列中的数字是原始文件的行号。第二列中的数字是编辑文件中的行号。由于删除的行，编辑文件中的行号会更低。

```
-------------------------------------------------- ----------------------
3 <Product Id="{5A908D89-0620-4CC0-A8B8-2CB4A7B0772C}" Codepage="1252" Language="1033" Manufacturer="Microsoft Corporation" Name="TypeScript for Microsoft® Visual Studio® 2012" UpgradeCode="{ F15B62A0-4478-4924-876A-867617EC4B8C}" 版本="0.9.1.1">
4 <Package Comments="此安装程序数据库包含安装 TypeScript for Microsoft® Visual Studio® 2012 所需的逻辑和数据。" Compressed="yes" Description="TypeScript for Microsoft® Visual Studio® 2012" InstallerVersion="500" Languages="1033" Manufacturer="Microsoft Corporation" Platform="x86" />
    3 <Product Id="{5A908D89-0620-4CC0-A8B8-2CB4A7B0772C}" Codepage="1252" Language="1033" Manufacturer="Microsoft Corporation" Name="TypeScript for Microsoft® Visual Studio® 2010" UpgradeCode="{ F15B62A0-4478-4924-876A-867617EC4B8C}" 版本="0.9.1.1">
    4 <Package Comments="此安装程序数据库包含安装 TypeScript for Microsoft® Visual Studio® 2010 所需的逻辑和数据。" Compressed="yes" Description="TypeScript for Microsoft® Visual Studio® 2010" InstallerVersion="405" Languages="1033" Manufacturer="Microsoft Corporation" Platform="x86" />
-------------------------------------------------- ----------------------
-------------------------------------------------- ----------------------
15（删除） <CustomAction Id="VS11_CAUpdateConfig" Property="VS11DEVENV" ExeCommand="/updateConfiguration" Return="ignore" Execute="deferred" Impersonate="no" />
16（删除） <CustomAction Id="VWD11_CAUpdateConfig" Property="VWD11EXPRESS" ExeCommand="/updateConfiguration" Return="ignore" Execute="deferred" Impersonate="no" />
-------------------------------------------------- ----------------------
-------------------------------------------------- ----------------------
222 <目录 ID="MSBuild_Microsoft_VisualStudio_11" 名称="v11.0">
    220 <目录 ID="MSBuild_Microsoft_VisualStudio_11" 名称="v10.0">
-------------------------------------------------- ----------------------
-------------------------------------------------- ----------------------
293 <Feature Id="TypeScriptInstallation" Level="1" Title="TypeScript for Microsoft&® Visual Studio® 2012 Setup">
    291 <Feature Id="TypeScriptInstallation" Level="1" Title="TypeScript for Microsoft&® Visual Studio® 2010 设置">
-------------------------------------------------- ----------------------
-------------------------------------------------- ----------------------
427（删除）<Property Id="WixPdbPath" Value="D:\nightly\release-0.9.1.1\srcSetup\wix\outs\x86ret\enu\cooked\TypeScript_CORE_net.wixpdb" />
-------------------------------------------------- ----------------------
-------------------------------------------------- ----------------------
663 <ProgressText Action="CAIsVSRunning">检查 Microsoft® Visual Studio® 2012 是否正在运行</ProgressText>
    660 <ProgressText Action="CAIsVSRunning">检查 Microsoft® Visual Studio® 2010 是否正在运行</ProgressText>
-------------------------------------------------- ----------------------
-------------------------------------------------- ----------------------
712 <Control Id="VSRunningStatus" Type="Text" X="25" Y="110" Width="320" Height="110" Text="Microsoft® Visual Studio® 2012 正在运行，建议您在继续 [ProductName] 安装程序之前将其关闭。” TabSkip="是" />
    709 <Control Id="VSRunningStatus" Type="Text" X="25" Y="110" Width="320" Height="110" Text="Microsoft® Visual Studio® 2010 正在运行，建议您在继续 [ProductName] 安装程序之前将其关闭。” TabSkip="是" />
-------------------------------------------------- ----------------------
-------------------------------------------------- ----------------------
739(delete) <Control Id="LaunchScreenAgreeLine" Type="Hyperlink" X="25" Y="138" Width="320" Height="14" Text="你必须同意<a href="[ EulaURLName]">许可条款</a>在你可以安装 TypeScript 之前"TabSkip="yes">
740（删除）<Condition Action="hide">已安装</Condition>
741（删除）</控制>
-------------------------------------------------- ----------------------
-------------------------------------------------- ----------------------
799 <自定义操作="WindowsFolder_x86_VC.F9D0B380_EB85_31D4_96AC_C6CB40086A55" 序列="1" />
    793 <自定义操作="WindowsFolder_x86_VC.F9D0B380_EB85_31D4_96AC_C6CB40086A55" 序列="2" />
-------------------------------------------------- ----------------------
-------------------------------------------------- ----------------------
803（删除）<自定义操作=“VS11_CAUpdateConfig”序列=“6598”>VS11DEVENV</自定义>
804(删除) <自定义操作="VWD11_CAUpdateConfig" Sequence="6599">VWD11EXPRESS</自定义>
-------------------------------------------------- ----------------------
-------------------------------------------------- ----------------------
830 <InstallFinalize Sequence="6600" />
    第822章
-------------------------------------------------- ----------------------
-------------------------------------------------- ----------------------
834 <自定义操作="SystemFolder_x86_VC.F9D0B380_EB85_31D4_96AC_C6CB40086A55" 序列="1" />
    826 <自定义操作="SystemFolder_x86_VC.F9D0B380_EB85_31D4_96AC_C6CB40086A55" 序列="2" />
-------------------------------------------------- ----------------------
-------------------------------------------------- ----------------------
860 <自定义操作="SystemFolder_x86_VC.F9D0B380_EB85_31D4_96AC_C6CB40086A55" 序列="3" />
    852 <自定义操作="SystemFolder_x86_VC.F9D0B380_EB85_31D4_96AC_C6CB40086A55" 序列="4" />
-------------------------------------------------- ----------------------
-------------------------------------------------- ----------------------
874 <自定义操作="WindowsFolder_x86_VC.F9D0B380_EB85_31D4_96AC_C6CB40086A55" 序列="3" />
    866 <自定义操作="WindowsFolder_x86_VC.F9D0B380_EB85_31D4_96AC_C6CB40086A55" 序列="4" />
-------------------------------------------------- ----------------------
-------------------------------------------------- ----------------------
889 <自定义操作="WindowsFolder_x86_VC.F9D0B380_EB85_31D4_96AC_C6CB40086A55" 序列="3" />
    881 <自定义操作="WindowsFolder_x86_VC.F9D0B380_EB85_31D4_96AC_C6CB40086A55" 序列="4" />
-------------------------------------------------- ----------------------

```

4.  执行命令`"%wix%\bin\candle.exe" TypeScript_CORE.wxs`
5.  执行命令`"%wix%\bin\light.exe" -o TypescriptVista TypeScript_CORE.wixobj`
6.  执行命令`TypeScriptVista.msi /l* log.txt VS11_EXTENSIONS_DIR="%VSDir%\Extensions\Microsoft" VS11_NEWSCRIPTITEMS_DIR="%VSDir%\NewFileItems" VS11DEVENV="%Devenv%"`

## 配置文件

现有项目需要将以下元素添加到项目文件的底部。请注意在 BeforeBuild 元素之前添加的元素。

```
 <PropertyGroup Condition="'$(Configuration)' == 'Debug'">
    <TypeScriptTarget>ES3</TypeScriptTarget>
    <TypeScriptIncludeComments>true</TypeScriptIncludeComments>
    <TypeScriptSourceMap>true</TypeScriptSourceMap>
  </PropertyGroup>
  <PropertyGroup Condition="'$(Configuration)' == 'Release'">
    <TypeScriptTarget>ES3</TypeScriptTarget>
    <TypeScriptIncludeComments>false</TypeScriptIncludeComments>
    <TypeScriptSourceMap>false</TypeScriptSourceMap>
  </PropertyGroup>
  <Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)\TypeScript\Microsoft.TypeScript.targets" />
  <!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
     Other similar extension points exist, see Microsoft.Common.targets.
  <Target Name="BeforeBuild">  
  </Target>
  <Target Name="AfterBuild">
  </Target>--> 
```

## 杂项

在 TypeScript 不再出现在“*程序和功能*”列表中之前，可能需要进行两次卸载。首次卸载后，按 F5 刷新应用程序列表。卸载后某些文件可能仍然存在。

TypeScript_CORE.msi 中有调试器路径的其他自定义属性。我假设此时 VS 2010 与脚本调试回不同的源文件不兼容。但是，其他人可能希望尝试使其正常工作。其他自定义属性名称是：VS11_DEBUGGER_DIR、VS11_DEBUGGER_X64_DIR 和 VS11_REMOTEDEBUGGER_DIR

有额外的自定义属性可以使用 Visual Web Developer 或 Visual Web Developer Express 中的一个或两个进行安装。我没有能力测试这些产品的安装。TypeScript_CORE.msi 文件中与此安装相关的自定义属性为：VWD11_EXTENSIONS_DIR、VWDExpress11 和 VWD11_NEWSCRIPTITEMS_DIR

## 功能性

*   新的项目类型和项目类型可用。
*   工具\选项菜单下的 TextEditor\TypeScript 部分。
*   .ts 文件的智能感知编辑。
*   .js 文件是在构建或保存时构建的（当在文本编辑器选项中设置了构建保存时）。
*   .js 文件在解决方案资源管理器中显示为 .ts 文件的子文件，但保存在与 .ts 文件相同的路径中。（v 0.9.1.1 默认不包含项目中的 .js 文件）
*   发布时不包含 .ts 文件，仅包含 .js 文件。
*   .ts 文件有自己的图标，并与 Visual Studio 相关联。

## 修订记录

*   TypeScript 0.9.1.1 版更新
*   针对 TypeScript 版本 0.8.3.1 更新
*   修复了为 0.8.3 复制 MSBUILD 目录的缺失指令

## 截图

![项目模板截图](../Images/ca81e04e40f79f3cc0ebf1b774ff8fe8.png) ![编辑器截图](../Images/bbb654eddd1a06355f0d237dcabc2674.png) ![解决方案资源管理器屏幕截图](../Images/fbecb78787dc286370fd9c89fdefd26e.png) ![TypeScript 选项截图](../Images/84ad72a0d060a50cb4111279d56584b0.png) ![文件图标截图](../Images/9b9916c76fe03f62abedc51da935d4ba.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-11T07:18:48.513

遵循[Richard Collette 的 Windows 7 说明](https://stackoverflow.com/a/14510512/238753)后，安装程序应产生以下错误，然后完成：

> 无效的命令行。未知开关：updateConfiguration。使用：devenv [解决方案文件 | 项目文件 | anyfile.ext] [开关]

如果这导致任何问题，运行以下命令可能会有所帮助

```
"%Devenv%" /Setup 
```

# java - 是否可以使用 JFileChooser 一次选择多个目录

> ID：14510515
> 
> 赞同：1
> 
> 时间：2013-01-24T20:52:27.270
> 
> 标签：java, jfilechooser, directory

正如标题所述，有没有办法使用 JFileChooser 一次选择多个目录（主目录中的所有子目录），这样我就不必为每个目录重新打开文件选择器窗口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:07:54.073

问完之后，我又一次解决了自己的问题。

之前阻止我让它工作的事情是我使用了多选检查而不是多选设置，显然是使用了错误，并且我一直收到错误。无论如何，工作版本如下：

```
class AddDirectory implements ActionListener {
    public void actionPerformed(ActionEvent ae) {
        File[] theDir = null;
        theDir = selectDir();
        if(theDir != null) {
            for(File z : theDir) {
                String[] curRow = { z.toString(), "Waiting"};
                dlm.addRow(curRow);
            }
        }
        return;
    }   
    private File[] selectDir() {
        JFileChooser fileChooser = new JFileChooser(lastDir);
        fileChooser.setMultiSelectionEnabled(true);
        fileChooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
        int showOpenDialog = fileChooser.showOpenDialog(null);
        if (showOpenDialog != JFileChooser.APPROVE_OPTION) {
            return null;
        }
        File[] uploadDir = fileChooser.getSelectedFiles();
        lastDir = new File(uploadDir[uploadDir.length-1].getParent());
        return uploadDir;
    }
} 
```

一旦我得到这些目录，它们就会被加载到一个 JTable 中进行修改，然后再在它们上运行我的其余代码。

# objective-c - 加速循环以创建长字符串

> ID：14510516
> 
> 赞同：1
> 
> 时间：2013-01-24T20:52:35.120
> 
> 标签：objective-c, performance, cocoa, loops, nsstring

我通过`NSNumber`在四个不同的数组中格式化 s 创建一个很长的字符串：

```
NSString *datos = @"";

for (NSInteger counter = 0; counter < [latOut count]; counter++) {
    datos = [datos stringByAppendingString:[NSString stringWithFormat:@"%.0005f,", [[latOut objectAtIndex:counter] floatValue]]];
    datos = [datos stringByAppendingString:[NSString stringWithFormat:@"%.0005f,", [[lonOut objectAtIndex:counter] floatValue]]];
    datos = [datos stringByAppendingString:[NSString stringWithFormat:@"%ld,", [[tipoOut objectAtIndex:counter] integerValue]]];
    datos = [datos stringByAppendingString:[NSString stringWithFormat:@"%ld\n", [[velocidadOut objectAtIndex:counter] integerValue]]];
}

NSString *curDir = [[NSFileManager defaultManager] currentDirectoryPath];

NSString *path = @"";
path = [path stringByAppendingPathComponent:curDir];
path = [path stringByAppendingPathComponent:@"data.csv"];

// Y luego lo grabamos
[datos writeToFile:path atomically:YES encoding:NSASCIIStringEncoding error:&error]; 
```

计数为 18,000 个条目，此循环需要将近 2 分钟才能完成。

我怎样才能让这更快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T20:59:15.130

我在这里看到的主要建议是，由于您经常使用字符串，`NSMutableString`因此应该使用更有效的方法：

```
// give a good estimate of final capacity
NSMutableString *datos = [[NSMutableString alloc] initWithCapacity:100000];

for (NSInteger counter = 0; counter < [latOut count]; counter++) {
  [datos appendFormat:@"%.0005f", [[latOut objectAtIndex:counter] floatValue]];
  ...
} 
```

这将避免大量不必要的临时不可变字符串分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T20:59:21.320

您的内存消耗也可能令人震惊。使用可变字符串而不是创建数千个临时字符串：

```
NSMutableString *datos = [NSMutableString string];

for (NSInteger counter = 0; counter < [latOut count]; counter++) {
    [datos appendFormat:@"%.0005f, %.0005f, %ld, %ld\n", [[latOut objectAtIndex:counter] floatValue], 
                                                         [[lonOut objectAtIndex:counter] floatValue], 
                                                         [[tipoOut objectAtIndex:counter] integerValue], 
                                                         [[velocidadOut objectAtIndex:counter] integerValue]];
} 
```

# php - jquery .html 返回未定义

> ID：14510518
> 
> 赞同：-1
> 
> 时间：2013-01-24T20:52:42.903
> 
> 标签：php, jquery, ajax

我有 ajax 帖子，它将网站发布到 php，然后返回它，我正在使用 jquery 查找并返回元素文本。这是在某些元素上起作用，但不是全部，我不明白为什么。对于正文元和标题标签，它返回未定义。是我的 php 还是 ajax 帖子？

jQuery/ajax

```
var dataString = name;
        //alert (dataString);return false;

            $.ajax({
      type: "POST",
      url: "senddom.php",
      data: {"dataString" : dataString },
      dataType: "json",
      success: function(response) {
   var gdom = response;
  $('body').append("<p> contents of title:" + $(response).find('Title').html()+ "</p>");          
  $('body').append("<p> contents of meta:" + $(response).find('meta').html()+ "</p>");      
  $('body').append("<p> contents of all: " + $(response).find('body').html() + "</p>");

 $(response).find('p').each(function() {
  $('body').append("<p> contents of p: " + $(this).html() + "</p>");
}); 
```

我的PHP

```
<?php 
    $site= $_POST['dataString'];             // get data
function curl_get($site){
    $useragent = 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.0.3705; .NET CLR 1.1.4322; Media Center PC 4.0)';
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$site);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,5);
    curl_setopt($ch, CURLOPT_USERAGENT, $useragent); 
    $data=curl_exec($ch);
    curl_close($ch);
    return $data;

}

function getdom($site){
    $html = curl_get($site);
    // Create a new DOM Document
    $xml = new DOMDocument();
    @$xml->loadHTML($html);
   echo json_encode($html);
}

echo getdom($site);
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T20:55:44.693

您的 AJAX 调用需要 JSON 数据来响应请求，因此回调`response`中的变量`success`将是某种对象。您不能将常规对象传递给 jQuery 函数，它不是为处理它而设计的。

像使用任何其他对象一样使用对象，使用点 - `object.property`- 或方括号 - `object["property"]`- 符号。或者更改您的服务器端代码，使其返回可用格式（HTML 或 XML）而不是 JSON。

# console - 码头连接

> ID：14510519
> 
> 赞同：0
> 
> 时间：2013-01-24T20:52:45.470
> 
> 标签：console, jetty

有没有办法用 Jetty 将某些东西登录到服务器控制台，特别是当一个人连接时，有没有办法将它打印到控制台中？

任何人都知道如何做这些，或者可以将我链接到解释它的网站吗？

我在谷歌上没有找到太多关于它的信息。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T12:35:24.117

哪个版本的码头？您可以简单地在连接器等上启用调试日志记录。无论您确切想要/需要记录的是什么。

但是，如果您只是在寻找请求日志，请查看以下内容：http: [//www.eclipse.org/jetty/documentation/current/configuring-logging.html#configuring-jetty-request-logs](http://www.eclipse.org/jetty/documentation/current/configuring-logging.html#configuring-jetty-request-logs)

# linux - 在解析（即扩展）通配符时停止 Linux shell

> ID：14510521
> 
> 赞同：2
> 
> 时间：2013-01-24T20:52:49.010
> 
> 标签：linux, shell, wildcard

在典型的 Linux shell 中，您可以使用`Ctrl+c`来停止执行命令。如果您已经开始运行使用通配符（例如 *）来查找具有特定模式的所有文件，并且如果您有很多文件需要搜索，那么 shell 可能需要很长时间才能将通配符扩展为实际的文件名。同时 Ctrl+c 不会停止 shell。Shell 继续解析通配符。Ctrl+c 只有在 shell 解析通配符后才会生效，这可能需要相当长的时间。

有没有办法在尝试扩展通配符时停止 shell？

这是在`GNU bash, version 4.1.5(1)-release (x86_64-pc-linux-gnu)`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:26:59.483

如果 shell 似乎花费了非常长的时间来扩展通配符，那么您很可能会发生以下情况之一：

1.  你正在做类似的事情`*/*/*/*/*/*`- 解决方案：不要那样做；找到一种方法将你正在做的事情分解成更小的部分，或者至少更有效地处理它
2.  您的目录中有大量文件 - 解决方案：不要这样做；目录中有太多文件是许多文件系统上众所周知的性能杀手（尽管有些处理它比其他更好）
3.  您的文件系统要么是网络链接上的网络文件系统（NFS、Samba/CIFS、sshfs 等），速度有点慢，要么是 CD/DVD 之类的慢速物理介质上。除了一次匹配更少的文件或等待它之外，这里没什么可做的。
4.  您的文件系统通常很快，但它位于老化的硬盘驱动器上，该驱动器开始出现读/写错误，导致尝试重新定位扇区，这看起来像是大量超时。检查您的系统日志中是否有可怕的磁盘消息，如果是这种情况，请购买新磁盘并将数据转移到昨天。
5.  应该还有其他...

与此同时，其他建议/评论/答案指出了在外壳挂起时杀死外壳的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:09:10.483

我想你可以杀死这个过程。`Ctrl-z`停止, `ps aux | grep processname`, 获取进程 ID, 然后`kill processid`.

# html - IE 中的 Jade 模板未呈现复选框

> ID：14510523
> 
> 赞同：0
> 
> 时间：2013-01-24T20:52:51.453
> 
> 标签：html, input, internet-explorer-9, pug

我正在尝试在客户端 Jade 模板中实现搜索栏模板。

```
table.SearchBar(cellpadding="0", cellspacing="0")
    tr
        td.SearchCell
            div.SearchIndicator(id="SearchIndicator_#{eId}")
            input.SearchText.Initializing(id="SearchText_#{eId}", type="text", placeholder="gathering contacts list...")
        -if(parentName === "Contacts")
            td.SearchCell(style="width: 100px;")
                button.PresenceButton(id="PresenceButton_#{eId}")
                    input.PresenceCheckbox(type="checkbox", name="Presence", id="PresenceCheckbox_#{eId}")
                    p.PresenceLabel online only? 
```

在 Chrome && Firefox 中，一切都很好。在 IE 9 中，只有复选框根本无法呈现，不会出现在 Web 检查器中，并且它的缺失也会导致脚本稍后出现错误。

这是要了我的命。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:12:10.443

呃...您不能将**INPUT**元素放在Internet Explorer 中的**BUTTON元素中。**

# backbone.js - 在 Relational Backbone 中，什么时候是在创建模型之前拦截来自服务器的响应的正确时间？

> ID：14510528
> 
> 赞同：0
> 
> 时间：2013-01-24T20:53:04.173
> 
> 标签：backbone.js, backbone-relational

我有一个非常复杂的主干模型结构。

*   m.Question：是一个基础问题。如果这是 C++，那将是一个“抽象”模型，因为只有它的子级会被实例化
*   m.NumericQuestion：扩展 m.Question
*   m.MultipleChoiceQuestion：扩展 m.Question
*   m......问题：你会得到很多问题类型
*   c.Questions：m.Question 孩子的集合

当被保存到数据库时，它们都有一个名为“type”的属性，它决定了它应该是什么模型。

当从服务器检索原始问题时，它们被放置在 Questions 集合（c.Questions）中。Backbone 应该解析来自服务器的响应并根据类型制作适当的模型。

所以我为 c.Questions 写了一个 _prepareModel() 函数。

但是当我执行 c.Questions.fetch() 时，我发现首先调用 Backbone.Collection.prototype._prepareModel （Backbone 关系具有的那个）！有没有办法可以事先拦截模型创建？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:17:22.823

覆盖模型的`parse`功能：[http ://backbonejs.org/#Model-parse](http://backbonejs.org/#Model-parse)

您也可以为集合执行此操作：http: [//backbonejs.org/#Collection-parse](http://backbonejs.org/#Collection-parse)

像这样：

```
var MyModel = Backbone.Model.extend){
    parse: function(resp) {
        // your parse function returns the attributes that you want your new model to have
    }
}); 
```

对于一个集合，`parse`应该返回一个属性对象数组。

如果你想在获取后进一步操作属性，你可以[做一些花哨的事情`initialize`](http://backbonejs.org/#Model-constructor)，比如将一个属性放入另一个 Backbone 模型中，如下所示：

```
initialize: function() {
    this.set('attributeThatIsAnArray',new MyCollection(this.get('attributeThatIsAnArray')));
} 
```

您可以查看[另一个 Stack Overflow 问题](https://stackoverflow.com/questions/14444233/converting-json-data-to-backbone-model-with-child-collection/14450528#14450528)以获取另一个示例： [Converting JSON data to Backbone Model with child Collection](https://stackoverflow.com/questions/14444233/converting-json-data-to-backbone-model-with-child-collection/14450528#14450528)

# search - solr 搜索返回不同的结果

> ID：14510529
> 
> 赞同：0
> 
> 时间：2013-01-24T20:53:06.780
> 
> 标签：search, solr

有一个字符串字段 myField 类型为小写

```
<fieldType name="lowercase" class="solr.TextField" positionIncrementGap="100">
      <analyzer>
        <tokenizer class="solr.KeywordTokenizerFactory"/>
        <filter class="solr.LowerCaseFilterFactory" />
      </analyzer>
    </fieldType> 
```

*   `q=(MyField:["" TO *])`返回 210470 个文档
*   `q=(MyField:[* TO *])` 返回 210730 个文档

谁能解释上述两个查询之间的区别？如何查询那些 210730-210470=260 文档？尝试`q=(MyField:[* TO *]) AND (-MyField:["" TO *])`返回 0 doc。

谢谢

编辑：femtoRgon 的查询可以找到那 260 个文档。检查后我注意到这些文档中 MyField 的所有值都以“！”开头 （例如“！abc”，“！dfd”等）。我仍然不确定为什么 MyField:[" TO *] 与那些文档不匹配？

# java - Java IndexOutOfBoundsException 读取数学表达式时出错

> ID：14510530
> 
> 赞同：2
> 
> 时间：2013-01-24T20:53:08.013
> 
> 标签：java, indexoutofboundsexception

我试图从 JOptionPane 读取像 3+9-2*10/5 这样的数学表达式并得到它的结果——当然要考虑操作的顺序。我使用 String.split() 将字符串拆分为数字和操作数，并创建了一个用于查找乘号或除号的 for 循环——在这种情况下，它正在检测字符串“*”，因为它首先出现在字符串中。

```
public static void main(String[] args)
{
    String mathString = JOptionPane.showInputDialog("Please type a simple math expression (i.e., without parentheses).");

    String[] parsedIntegers = mathString.split("\\D");
    String[] parsedOperands = mathString.split("\\d+");
    parsedOperands[0] = null;
    System.out.println(Arrays.toString(parsedIntegers));
    System.out.println(Arrays.toString(parsedOperands));

      for (int index = 1; index <= parsedOperands.length; index = index + 1)
      {

          if (parsedOperands[index].equals("*"))
           {
                 System.out.println("The multiplication sign is at index " + index + ".");
                 int multResult = Character.getNumericValue(parsedIntegers[index - 1].charAt(index - 1)) * Character.getNumericValue(parsedIntegers[index].charAt(index));
                 System.out.println(multResult);
           }
      }
} 
```

字符串数组 parsedOperands 如下所示：[null, +, -, *, /]。字符串数组 parsedIntegers 如下所示：[3, 9, 2, 10, 5]。

但是，当我在 parsedOperands 中查找位于索引 3 处的“*”，然后尝试将 parsedIntegers 中的 (index - 1) 和 (index) 中的内容相乘时，Java 返回一个 IndexOutOfBoundsException。为什么会这样？我错过了什么吗？

这是错误：

```
[3, 9, 2, 10, 5]

Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: 2

[null, +, -, *, /]

The multiplication sign is at index 3.
    at java.lang.String.charAt(String.java:658)
    at programmingpractice.SolveMathExpression.main(SolveMathExpression.java:49)
Java Result: 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:55:37.737

您应该停在比 parsedOperands.length 少一的位置，因此您应该使用`<`，而不是`<=`：

```
for (int index = 1; index < parsedOperands.length; index = index + 1) 
```

顺便说一句，有一个特殊的运算符 (++) 用于将数字加一。这段代码更短，但相当于上面的代码：

```
for (int index = 1; index < parsedOperands.length; index++) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T20:55:35.237

您还在考虑等于数组长度的索引。即，您的数组长度为 4，并且由于您的条件，您的 for 循环还会检查索引 4 处的元素`( index <= parsedOperands.length;)`

```
 for (int index = 1; index <= parsedOperands.length; index = index + 1) 
```

应该

```
 for (int index = 1; index <= parsedOperands.length-1; index = index + 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T20:58:11.900

乐：

您的错误实际上在这里：

```
int multResult = Character.getNumericValue(parsedIntegers[index - 1].charAt(index - 1)) * Character.getNumericValue(parsedIntegers[index].charAt(index)); 
```

你应该使用

```
int multResult = Integer.valueOf(parsedIntegers[index - 1]) * Integer.valueOf(parsedIntegers[index]); 
```

这允许您使用具有尽可能多的数字的整数。

但其余的仍然存在。Java 数组是基于 0 的。重写你的`for`陈述如下：

`for (int index = 1; index < parsedOperands.length; index++)`

实际上最后一部分 ,`index++`只是看起来更好的东西（至少对我来说），因为您的变体 ( `index = index + 1`) 也可以。

另请参阅[此](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)以获取更多信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T21:00:07.303

数组中的每个元素`parsedIntegers`都是一个单字符串，所以当你使用 时`charAt`，它应该是`charAt(0)`：

```
int multResult = Character.getNumericValue(parsedIntegers[index - 1].charAt(0)) *
                 Character.getNumericValue(parsedIntegers[index].charAt(0)); 
```

使用`charAt(index)`or `charAt(index - 1)`there 尝试读取单字符字符串的末尾并抛出`StringIndexOutOfBoundsException`你得到的。

但是，一个更强大的方法可能是使用`Integer.parseInt`这样你就可以拥有多位整数：

```
int multResult = Integer.parseInt(parsedIntegers[index - 1]) *
                 Integer.parseInt(parsedIntegers[index]); 
```

# android - OpenGLES 2.0 Android的最佳方式水平滚动到GL表面视图的一部分

> ID：14510543
> 
> 赞同：0
> 
> 时间：2013-01-24T20:53:51.817
> 
> 标签：android, opengl-es-2.0, horizontal-scrolling

我是 Android OpenGL 2.0 的新手。我想知道如何实现水平滚动到仅部分视图和垂直滚动以完成视图的最佳方法。我能够实现水平和垂直滚动到完整的视图。如果我必须使用图层，您能否解释一下如何分别在这些图层上实现图层和绘制形状。

我尝试使用两个不同的 SurfaceView，但它不起作用。这是我的水平滚动代码。

@Override public void onDrawFrame(GL10 未使用) {

```
 GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT);

    // Set the camera position (View matrix)
    Matrix.setLookAtM(mVMatrix, 0, mXOffset, mYOffset, -3, mXOffset, mYOffset, 0f, 0.0f, 1.0f, 0.0f);

    // Calculate the projection and view transformation
    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0);

    mGraph.draw(mMVPMatrix);

    mLine.draw(mMVPMatrix);
    msquare.draw(mMVPMatrix);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:41:43.967

您能否澄清“部分视图”和“完整视图”的含义？一般来说，你的方向是正确的 - 你最好移动坐标系（Matrix.translateM 用于基于android的实现）或移动你有代码要做的相机。正如你所提到的，这将改变一切。您可以将多个模型视图投影矩阵发送到顶点着色器，然后根据像素位置决定使用哪个。

不过，我不确定您要达到什么目标，因此更多详细信息将有助于我提供更好的建议。

# .net-3.5 - SmartDevice 项目中缺少 Data.SqlClient 命名空间 (Windows Mobile)

> ID：14510545
> 
> 赞同：1
> 
> 时间：2013-01-24T20:54:01.427
> 
> 标签：.net-3.5, sql-server-ce, windows-mobile-6.5, sqlclient, smart-device

我开始在 Windows Mobile 6.5 上编程。我安装了 VS2008、SDK 6.0 和 DTK 6.5.3。创建项目（WM 6.0、.NET 3.5）并且不使用 System.Data.SqlClient。我 System.Data 只有 Common，SqlTypes。参考文献由创建者提供。

> SqlCommand comm = new SqlCommand(sSQL, new SqlConnection(sConn)); 无法解析符号“SqlCommand”

我错过了什么？如何从设备连接 Sql Server？互联网上的许多示例都包含此方法。

我还安装了 .NET 4.0、4.5 和 VS 2012。

![没有 SqlClient 参考](../Images/b237d965773051cc36822cf34e57b8c9.png) ![没有解决选项](../Images/db27142af5d912064e46ec09311c43ad.png) ![.NET 3.5 桌面 WinForm](../Images/e48d365466ff7f1c0f1e02a3f9f7d47c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T16:58:12.163

虽然我不知道 TDK 是什么，但是你需要单独下载和安装 sql server ce/compact 来获取 SQLClientCE 等对象：

[视窗桌面](http://www.microsoft.com/en-us/download/details.aspx?id=5783)

[视窗手机](http://www.microsoft.com/en-us/download/details.aspx?id=8831)

对于 WINDOWS MOBILE 使用安装第二个链接下载！

请注意，无法使用 .NET 4 或 VS 2012 或 VS 2010 开发 Windows Mobile 6.5 应用程序。Windows Mobile / 嵌入式手持编程仅支持 VS 2008！

安装 Sql Server Compact for Mobile 后，您将拥有一个新程序目录“C:\Program Files (x86)\Microsoft SQL Server Compact Edition\v3.5”（另请参见随附的 slq_server_compact35_files.txt）。

```
Folder PATH listing
Volume serial number is 00000200 7803:48E6
C:.
|   EULA_EN.rtf
|   EULA_ENU.rtf
|   ReadmeSSCE35_ENU.htm
|   REDIST_ENU.TXT
|   sqlceca35.dll
|   sqlcecompact35.dll
|   sqlceer35EN.dll
|   sqlceme35.dll
|   sqlceoledb35.dll
|   sqlceqp35.dll
|   sqlcese35.dll
|   System.Data.SqlServerCe.Entity.dll
|   
+---Desktop
|   |   System.Data.SqlServerCe.dll
|   |   
|   \---EN
|           System.Data.SqlServerCe.xml
|           
+---Devices
|   |   EULA_ENU.rtf
|   |   System.Data.SqlServerCe.dll
|   |   
|   +---Client
|   |   |   System.Data.SqlClient.dll
|   |   |   
|   |   +---EN
|   |   |       System.Data.SqlClient.xml
|   |   |       
|   |   +---wce400
|   |   |   \---armv4
|   |   |           dbnetlib.dll
|   |   |           sql.dev.ENU.ppc.wce4.armv4.CAB
|   |   |           sql.ppc.wce4.armv4.CAB
|   |   |           
|   |   \---wce500
|   |       +---armv4i
|   |       |       dbnetlib.dll
|   |       |       sql.dev.ENU.phone.wce5.armv4i.CAB
|   |       |       sql.dev.ENU.ppc.wce5.armv4i.CAB
|   |       |       sql.dev.ENU.wce5.armv4i.CAB
|   |       |       sql.phone.wce5.armv4i.CAB
|   |       |       sql.ppc.wce5.armv4i.CAB
|   |       |       sql.wce5.armv4i.CAB
|   |       |       
|   |       +---mipsii
|   |       |       dbnetlib.dll
|   |       |       sql.dev.ENU.wce5.mipsii.CAB
|   |       |       sql.wce5.mipsii.CAB
|   |       |       
|   |       +---mipsii_fp
|   |       |       dbnetlib.dll
|   |       |       sql.dev.ENU.wce5.mipsii_fp.CAB
|   |       |       sql.wce5.mipsii_fp.CAB
|   |       |       
|   |       +---mipsiv
|   |       |       dbnetlib.dll
|   |       |       sql.dev.ENU.wce5.mipsiv.CAB
|   |       |       sql.wce5.mipsiv.CAB
|   |       |       
|   |       +---mipsiv_fp
|   |       |       dbnetlib.dll
|   |       |       sql.dev.ENU.wce5.mipsiv_fp.CAB
|   |       |       sql.wce5.mipsiv_fp.CAB
|   |       |       
|   |       +---sh4
|   |       |       dbnetlib.dll
|   |       |       sql.dev.ENU.wce5.sh4.CAB
|   |       |       sql.wce5.sh4.CAB
|   |       |       
|   |       \---x86
|   |               dbnetlib.dll
|   |               sql.dev.ENU.wce5.x86.CAB
|   |               sql.wce5.x86.CAB
|   |               
|   +---EN
|   |       System.Data.SqlServerCe.xml
|   |       
|   +---wce400
|   |   \---armv4
|   |           sqlce.dev.ENU.ppc.wce4.armv4.CAB
|   |           sqlce.ppc.wce4.armv4.CAB
|   |           sqlce.repl.ppc.wce4.armv4.CAB
|   |           sqlceca35.dll
|   |           sqlcecompact35.dll
|   |           sqlceer35EN.dll
|   |           sqlceme35.dll
|   |           sqlceoledb35.dll
|   |           sqlceqp35.dll
|   |           sqlcese35.dll
|   |           upgrade.exe
|   |           
|   \---wce500
|       +---armv4i
|       |       sqlce.dev.ENU.phone.wce5.armv4i.CAB
|       |       sqlce.dev.ENU.ppc.wce5.armv4i.CAB
|       |       sqlce.dev.ENU.wce5.armv4i.CAB
|       |       sqlce.phone.wce5.armv4i.CAB
|       |       sqlce.ppc.wce5.armv4i.CAB
|       |       sqlce.repl.phone.wce5.armv4i.CAB
|       |       sqlce.repl.ppc.wce5.armv4i.CAB
|       |       sqlce.repl.wce5.armv4i.CAB
|       |       sqlce.wce5.armv4i.CAB
|       |       sqlceca35.dll
|       |       sqlcecompact35.dll
|       |       sqlceer35EN.dll
|       |       sqlceme35.dll
|       |       sqlceoledb35.dll
|       |       sqlceqp35.dll
|       |       sqlcese35.dll
|       |       upgrade.exe
|       |       
|       +---mipsii
|       |       sqlce.dev.ENU.wce5.mipsii.CAB
|       |       sqlce.repl.wce5.mipsii.CAB
|       |       sqlce.wce5.mipsii.CAB
|       |       sqlceca35.dll
|       |       sqlcecompact35.dll
|       |       sqlceer35EN.dll
|       |       sqlceme35.dll
|       |       sqlceoledb35.dll
|       |       sqlceqp35.dll
|       |       sqlcese35.dll
|       |       upgrade.exe
|       |       
|       +---mipsii_fp
|       |       sqlce.dev.ENU.wce5.mipsii_fp.CAB
|       |       sqlce.repl.wce5.mipsii_fp.CAB
|       |       sqlce.wce5.mipsii_fp.CAB
|       |       sqlceca35.dll
|       |       sqlcecompact35.dll
|       |       sqlceer35EN.dll
|       |       sqlceme35.dll
|       |       sqlceoledb35.dll
|       |       sqlceqp35.dll
|       |       sqlcese35.dll
|       |       upgrade.exe
|       |       
|       +---mipsiv
|       |       sqlce.dev.ENU.wce5.mipsiv.CAB
|       |       sqlce.repl.wce5.mipsiv.CAB
|       |       sqlce.wce5.mipsiv.CAB
|       |       sqlceca35.dll
|       |       sqlcecompact35.dll
|       |       sqlceer35EN.dll
|       |       sqlceme35.dll
|       |       sqlceoledb35.dll
|       |       sqlceqp35.dll
|       |       sqlcese35.dll
|       |       upgrade.exe
|       |       
|       +---mipsiv_fp
|       |       sqlce.dev.ENU.wce5.mipsiv_fp.CAB
|       |       sqlce.repl.wce5.mipsiv_fp.CAB
|       |       sqlce.wce5.mipsiv_fp.CAB
|       |       sqlceca35.dll
|       |       sqlcecompact35.dll
|       |       sqlceer35EN.dll
|       |       sqlceme35.dll
|       |       sqlceoledb35.dll
|       |       sqlceqp35.dll
|       |       sqlcese35.dll
|       |       upgrade.exe
|       |       
|       +---sh4
|       |       sqlce.dev.ENU.wce5.sh4.CAB
|       |       sqlce.repl.wce5.sh4.CAB
|       |       sqlce.wce5.sh4.CAB
|       |       sqlceca35.dll
|       |       sqlcecompact35.dll
|       |       sqlceer35EN.dll
|       |       sqlceme35.dll
|       |       sqlceoledb35.dll
|       |       sqlceqp35.dll
|       |       sqlcese35.dll
|       |       upgrade.exe
|       |       
|       \---x86
|               sqlce.dev.ENU.wce5.x86.CAB
|               sqlce.repl.wce5.x86.CAB
|               sqlce.wce5.x86.CAB
|               sqlceca35.dll
|               sqlcecompact35.dll
|               sqlceer35EN.dll
|               sqlceme35.dll
|               sqlceoledb35.dll
|               sqlceqp35.dll
|               sqlcese35.dll
|               upgrade.exe
|               
+---Include
|       sqlce_err.h
|       sqlce_oledb.h
|       sqlce_sync.h
|       
+---Private
|       System.Data.SqlServerCe.dll
|       System.Data.SqlServerCe.Entity.dll
|       
+---Samples
|       Northwind.sdf
|       
\---Tools
    |   ConnWiz.exe
    |   EULA_ENU.rtf
    |   Microsoft.SqlServerCe.Client.dll
    |   Microsoft.SqlServerCe.Enumerator.dll
    |   Microsoft.SqlServerCe.ManagementUI.dll
    |   Microsoft.SqlServerCe.ReplWiz.dll
    |   SSCEServerTools-ENU.msi
    |   
    \---SQLWorkbenchProjectItems
        |   SQLWorkbenchProjectItems.vsdir
        |   
        \---SqlCe
            |   sqlce.vsdir
            |   SQLCEFile.sqlce
            |   
            +---Database
            |       Create Database.sqlce
            |       Drop Database.sqlce
            |       
            +---Index
            |       Create Index.sqlce
            |       Create Unique Index.sqlce
            |       Drop Index.sqlce
            |       
            \---Table
                    Alter Table Add Column.sqlce
                    Alter Table Add Primary Key.sqlce
                    Alter Table Drop Column.sqlce
                    Alter Table Drop Constraint.sqlce
                    Create Table Primary Key.sqlce
                    Create Table with Identity Column.sqlce
                    Create Table.sqlce
                    Drop Table.sqlce 
```

现在，在您开始一个新的 SmartDevice 项目或打开一个现有项目后，您必须添加对 System.Data.SqlClient 或 System.Data.SqlServerCE 的引用：

![将 SQL 程序集添加到 SmartDevice 项目](../Images/4947e82f6e7d12f4802ce3c197a098c9.png)

# java - 休眠问题：外键必须与引用的主键具有相同的列数

> ID：14510547
> 
> 赞同：7
> 
> 时间：2013-01-24T20:54:07.353
> 
> 标签：java, sql, hibernate, foreign-keys, composite-key

目标：我想将 ImportJob 中的 importJobId 作为分配表 id 的外键，这样当我们有 importJobId 时，只有我们可以在分配中有 id，因为没有 Job 就不能有任何分配。

ImportJob 表的复合主键为 [ORGID,IMPORTJOBTYPE] 并尝试使用在休眠中创建外键关系

```
 <id name="id"
        column="ID">
        <generator class="native"/>
    </id>
    <many-to-one name="importjobid"
                 class="com.delta.pdo.admin.ImportJob"
                 cascade="save-update"/> 
```

在 Allocation.hbm.xml 中无法正常工作，并且收到错误消息：

```
Foreign key (FKB29B5F7366007086:ALLOCATIONS [importjobid])) 
must have same number of columns as the 
referenced primary key (IMPORTJOBMANAGMENT [ORGID,IMPORTJOBTYPE]) 
```

这是我的 ImportJob.hbm.xml 文件

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
        "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
        "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
    <class name="com.delta.pdo.admin.ImportJob" table="IMPORTJOB" lazy="false">
        <!-- we don't cache this since the commissions code is too screwed up to work with -->
        <composite-id>
            <key-property name="orgId" type="long" column="ORGID"/>
            <key-property name="importJobType" type="java.lang.String" column="IMPORTJOBTYPE"/>
        </composite-id>

        <!-- Make sure importjobid is not-null='true '-->
        <property name="importjobid" type="long" column="IMPORTJOBID" />
        <property name="allocations" type="boolean" column="ALLOCATIONS" />
    </class>
</hibernate-mapping> 
```

以下是供参考的 bean 类：

```
public class AllocationBean extends WorkbenchBeanBase
{
    private static final Logger log = Logger.getLogger(AllocationBean.class);
    private Float allocations;
    private String importJobType;
    private long id;
    private long orgId;
}

public class ImportJobManagment implements Serializable
{
    private long importjobid;
    private long orgId;
    private String importJobType;
    private boolean allocations = false;
} 
```

`getter/setter`为了简单起见，我已经删除了。

**更新：1** 现在的设置方式，我在一个表中有 id 列，该表具有对 orgId 和 importJobType 的复合键的外键引用，不确定我们是否可以这样做并且将单列外键键控到另一个的复合键表，但这是我的用例。

**更新：2**

感谢您提供令人敬畏的细节，这肯定会增强我对外键实现的了解，但我的最终目标是在两个表之间进行一对一映射，其中表 A 具有用于识别该表和表 B 中唯一行的复合键，我想有主键，它有对表 A 的外键引用，这样如果我们在表 A 中有条目，那么相同的 jobId 条目应该在表 B 中，现在我明白你的意思是我们不能在表 B 中有单列主键来引用表 A 中的复合键。

所以基本上我希望在表 A 具有复合主键和表 B 具有使用休眠的单列主键的表之间进行一对一映射，这当然会得到提到的错误，所以现在我要在表中创建复合键B 现在也对表 A 进行外键引用，稍后我将用我的发现验证和更新我的问题，再次感谢您的详细输入。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-24T22:36:07.033

该错误不言自明，为了引用复合主键，您需要一个复合外键。（复合主键声明您需要 2 个字段的唯一组合来创建键 - 那么您不可能仅使用 1 列引用唯一键。）

至于如何通过使用 xml 映射文件来实现这一点，我不确定，现在大多数人都使用注释..

至于您的 Java 类，我假设 ImportJobManagement 拥有一个 ImportJob，因此该类不应引用 id，而是对象本身，如下所示：

```
public class ImportJobManagment implements Serializable {
    private ImportJob importJob;
    ...
} 
```

Java 类应该只引用另一个类，而不是复合键的成员——这取决于从复合键映射到 Java 成员变量的映射。

更新答案：

简短的回答是不，你不能。外键的工作方式是让您引用表中的特定行。而且，为了确保引用特定的行，您需要一个标识，该标识仅描述一行，而没有其他行。在 SQL 中，有一个实现这一点的结构，即唯一键。通过声明一列（或列的组合）是唯一的，您知道它/它们的组合值将是唯一的，整个表中最多有 1 行具有此值，否则将违反约束.

因此，外键指的是单个唯一受约束的列，或跨多个列的复合唯一键。由于所有表都已经有一个唯一键，即主键（始终是唯一的），因此通常将其用于外键引用，但任何 unqiue 列都可以使用。

最简单的情况是当我们想要引用具有单列唯一键的表时。两个简单的表 A，它包含一个单列“id”，B，它包含一个“id”列，还有另一个列，a_id，它具有 A 的“id”列的外键。这个的一个实例情况可能是这样的：

```
A:
| id | 
|----|
|  1 |
|  2 |
|  3 |

B:
| id | a_id |
| 2  |  3   |
| 3  |  1   | 
```

这里，B中的每一行引用A中的一行。它是直接引用，表B中a_id中的值直接对应于A''id'列中的值。所以 id 为 2 的 B 引用了 id 为 3 的 A，依此类推。

现在让我们看看如何使用复合唯一键引用表。让我们保留我们的示例，但现在 A 有另一列 'sec_id'，它与 'id' 一起组成一个复合主键。

```
A:
| id | sec_id |
|----|--------|
| 1  |   3    |
| 3  |   1    |
| 3  |   7    |

B:
| id | a_id |
|----|------|
| 2  |  3   | 
```

在这种情况下，我们在 B 中遇到了问题。由于外键必须引用它所引用的表中的单行，这显然是行不通的。值“3”代表 A 中的哪一行？第一行的 sec_id？第二个或第三个中的 id （但在这种情况下，是哪一个？）？答案当然不是，B 中没有足够的信息来引用 A 中的单行，所以 SQL 就没有它。因此不允许添加这样的外键。

为了让 B 引用 A，它需要同时引用 A 的 'id' 列和 A 的 'sec_id' 列，因为 A 中的单行由其唯一组合 ('id', 'sec_id' ) 对。所以 B 看起来像这样：

```
| id | a_id | a_sec_id |
|----|------|----------|
| 1  |  1   |     3    |
| 2  |  3   |     1    |
| 3  |  3   |     7    | 
```

现在，B 拥有足够的信息来引用 A 中的单行，并且如数据所示，确实如此。

再次更新：

我目前正在阅读 JPA 认证，并且已经阅读了关于复合键映射的章节。为了映射复合主键，您需要一个映射键属性的主键类。有两种方法，一种是键属性也必须映射到实体本身，另一种是用作嵌入键。

我将提供代码示例，它们很能说明问题（它使用注释，你真的应该这样做。）

第一个示例是基本示例，具有常规的 id-class（未嵌入）。在这里，我们有一个 Employee 实体，其中主键由一个整数 id 和一个国家/地区组成（如果在不同的国家/地区，两个员工可以具有相同的 id）。

```
@Entity
@IdClass(EmployeeId.class)
public class Employee {
    @Id private String country
    @Id
    @Column(name = "EMP_ID")
    private int id;
    private String name;
    ...
}

public class EmployeeId implements Serializable {
    private String country;
    private int id;

    public EmployeeId() { }
    public EmployeeId(final String country, final int id) {
        this.country = country;
        this.id = id;
    }

    //getters for the properties

    public boolean equals(final Object other) {
    //must be implemented
    }

    public int hashCode() {
    //must be implemented
    }
} 
```

笔记：

*   类上的@IdClass-annotation。
*   id-class 的两个属性也必须在实体中定义
*   id-class 必须实现 equals 和 hashcode

另一种方法是通过嵌入的 id-class：

```
@Entity
public class Employee {
    @EmbeddedId
    private EmployeeId id;
    private String name;

    public Employee(final String country, final int id) {
        this.id = new EmployeeId(country, id);
    }

    public String getCountry() {
        return id.getCountry();
    }
}   

@Embeddable
public class EmployeeId {
   private String country;
   @Column(name = "EMP_ID")
   private int id;

   //constructor + getters + equals +hashCode
} 
```

笔记：

*   无需在实体中定义 id-attributes
*   要从实体中获取 id-class 的属性，您需要从 id-class 中获取它们

我更喜欢后者，因为它更紧凑并且不包含重复，但是我不知道如何使用这两个比较..

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-11-27T04:35:22.370

导入作业.hbm.xml

使用这个添加`insert = false`到 importjobid 如下所示：

```
<property name="importjobid" type="long" 
    column="importjobid" type="long" insert="false"/> 
```

# git - 将分支推送到 github 上的新存储库

> ID：14510550
> 
> 赞同：0
> 
> 时间：2013-01-24T20:54:10.893
> 
> 标签：git, github

我在一些开源博客软件上做了 git clone，然后在我的本地机器上创建了一个名为`myblog`. 因此，当我去推送到github时，我无法做到

```
git remote add origin https://github.com/Me/myrepository.git 
```

因为原点已经存在，我从中克隆。

因此，我做了

```
git remote add myblog  https://github.com/Me/myrepository.git 
```

我做了“myblog”，因为它是我的分支的名称，也许这不是必需的。推动我说过要推动你去做的指示

```
 git push origin master 
```

但由于我没有推动起源，也没有推动大师，我做到了

```
 git push myrepository myblog 
```

但它说“myrepository”似乎不是一个 git 存储库。然后我做了

```
git push myblog myblog 
```

第一个“myblog”用于存储库，第二个用于我的分支。这种推动奏效了。实际的应用程序在我的 github 帐户上。我能看到它。但是，当我尝试对其（即我推送的应用程序）进行 git clone 时，它​​会将其（您在图像中看到的）复制到我机器上的目录中（而不是博客应用程序）

![在此处输入图像描述](../Images/f83a0ae5f34f85633981a86a0836e3c4.png)

我无法将 github 存储库中的博客软件克隆回我的机器上。同样重要的是要知道，当我试图弄清楚事情时，我也做到了

```
git push -u myblog 
```

它说

```
! [rejected]        master -> master (non-fast-forward) 
```

我的问题：当应用程序实际上在我的 github 帐户上时，为什么要将它（您在图像中看到的）复制到我计算机上的目录中。而且，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:24:18.813

当您在 github 上创建存储库时，它会创建一个`master`包含 README 的分支。当你推送`myblog`分支时，你在`myblog`服务器上创建了一个分支，只留下一个`master`分支（仍然只是一个 README）。

看起来您已经将本地`master`分支更改为不再与删除`master`分支直接相关（因此是非快进消息）。如果你想忘记旧的`master`内容，你可以强制 git 用`git push -f`.

当您`push`没有指定分支时，默认（在 git 2.0 中更改）是推送所有匹配的分支。因此，两者都`myblog`将`master`被推送（假设它们都存在于本地和远程存储库中）。如果你只是想推送`myblog`而不担心与 冲突`master`，你可以指定名称，即`git push myblog myblog`。

或者，您可以将默认推送行为切换为`simple`（git 2.0 中的新默认值），它只会推送当前分支（假设名称在本地和远程之间匹配）。用`git config push.default simple`.

# c# - 在 c# 中点源一个 powershell 脚本不起作用

> ID：14510551
> 
> 赞同：2
> 
> 时间：2013-01-24T20:54:13.103
> 
> 标签：c#, powershell

我有一个powershell脚本，比如：function2.ps1：

```
function try2
{
    return "Hello"
} 
```

然后在c#中，我有：

```
RunspaceConfiguration rsc = RunspaceConfiguration.Create();
Runspace rs = RunspaceFactory.CreateRunspace(rsc);
rs.Open();

RunspaceInvoke si = new RunspaceInvoke(rs);
PowerShell ps = PowerShell.Create();

ps.Commands.AddScript(". .\\function2.ps1");
ps.Invoke();

ps.AddCommand("try2");
ps.Invoke(); 
```

它发出 System.Managment.Automation.CommandNotFoundException 说 try2 不被识别为 cmdlet、函数、脚本文件的名称，等等等等。

这真的很棘手，我错过了什么？:)

**更新：**

function.ps1 位于：c:\function.ps1。

目前的做法是：

```
ps.Commands.AddScript(@"cd C:\; . .\function.ps1;try2");
ps.Invoke(); 
```

但仍然失败，甚至更有趣：

```
ps.Commands.AddScript(@"cd C:\; . .\function222222222222222222.ps1;try2");
ps.Invoke(); 
```

虽然我 100% 确定 function22222222222222222222.ps1 不存在但不会给出错误。确定提供文件路径有问题...

**[更新]**

原来是因为powershell文件中引用程序集的一些运行时错误：这个程序集是由比当前加载的运行时更新的运行时构建的，无法加载。

把目标框架从4.0改成3.5后，发现打印了hello！所以错误不是关于调用脚本，而是关于脚本本身。很抱歉造成混乱，谢谢大家！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:23:21.063

我认为您需要指定`function2.ps1`. ".\function2.ps1" 只会在当前目录中查找脚本，即 C# 进程的初始工作目录设置为什么，除非您在 C# 代码中的某处更改了它。您也可以在脚本中更改它，例如：

```
ps.Commands.AddScript(@"cd <path>; . .\function2.ps1; try2"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:40:09.477

从 C# 运行 .ps1 脚本的一种方法（非常接近您的方法）可以在以下位置找到：

[http://www.codeproject.com/Articles/18229/How-to-run-PowerShell-scripts-from-C](http://www.codeproject.com/Articles/18229/How-to-run-PowerShell-scripts-from-C)

为了运行脚本，您似乎缺少一些管道命令。

例如：

```
Pipeline pipeline = runspace.CreatePipeline();
pipeline.Commands.AddScript(scriptText);

pipeline.Commands.Add("Out-String");

// execute the script

Collection<psobject /> results = pipeline.Invoke(); 
```

如果您找不到 System.Management.Automation dll，那么您可能需要下载更新版本的**Windows SDK**，如果没有，您可以在以下位置找到它：C:\Program Files (x86)\Reference Assemblies \Microsoft\WindowsPowerShell\v1.0\

来自：[在 Visual Studio 中引用 system.management.automation.dll](https://stackoverflow.com/questions/1186270/referencing-system-management-automation-dll-in-visual-studio)

# c# - MVC.Net 向浏览器发送“<>”标签

> ID：14510554
> 
> 赞同：0
> 
> 时间：2013-01-24T20:54:15.880
> 
> 标签：c#, asp.net-mvc-2

我们的 MVC.Net 应用程序有时会返回没有内容的标签。更具体地说， 和 之间没有任何`<`内容`>`。调出 IE-8 开发人员工具来检查返回的 HTML 会发现一个无名标记：`<>`及其结束标记：`</>`。问题是间歇性的。通常，刷新页面会清除问题。但它足够频繁，用户抱怨足够多，以至于管理层希望修复它。

**出现问题时，浏览器的 HTML 源代码如下所示：**

```
<TR sizcache="5" sizset="47">
    <TD class="label table-col-3">
        Manager:
    </TD>
    <TD class="table-col-7 last" sizcache="5" sizset="49">
        <A href="http://localhost:57791/Profile/22/Last%2c-First-MI" jQuery1359570774586="26">Last, First MI</A> 
    </TD>
</TR>
<>
  <div>
  </div>
</> 
```

**通常，浏览器的 HTML 应该如下所示：**

```
<TR sizcache="5" sizset="47">
    <TD class="label table-col-3">
        Manager:
    </TD>
    <TD class="table-col-7 last" sizcache="5" sizset="49">
        <A href="http://localhost:57791/Profile/22/Last%2c-First-MI" jQuery1359570774586="26">Last, First MI</A> 
    </TD>
</TR>
<TR id="link-admin-assistant-28" data-update="type: 'replace-portion', dataType: 'html', target: 'link-admin-assistant-28', source: 'link-admin-assistant-28'" sizcache="5" sizset="51">
    <TD class="label table-col-3">
        Admin Assistant:
    </TD>
    <TD class="table-col-7 last" sizcache="5" sizset="53">
        <A title="Edit Administrative Assistant" href="http://localhost:57791/Person/AdminAssistantForm?clientID=28" jQuery1359570774586="27">Last2, First2 M2</A> 
    </TD>
</TR>
<TR sizcache="5" sizset="55">
    <TD class="label table-col-3">
        Type:
    </TD>
    <TD class="table-col-7 last">
        Employee 
    </TD>
</TR> 
```

**应用详情**

该应用程序是使用 MVC.Net 2 构建的。我们已经升级到使用 .Net 4.0。还有大量用于客户端脚本和处理 AJAX 调用的 JQuery。

由于视图的 *.ascx 页面仅包含格式良好的 HTML5，并散布着服务器端代码片段，因此我看不到 Web 服务器如何返回“<>”标签。

问题出现在管理器和矩阵管理器 IF 块之后的某处。出现问题时，不会显示 EmployeeType。

**我认为出现问题的代码部分** （基于 IE 开发工具中的可见 HTML）

```
<% if (managerPersonID != null && managerPersonID > 0 && !managerDisplayName.IsNullOrEmptyTrimmed()) { %>
<tr>
    <td class="label table-col-3">Manager:</td>
    <td class="table-col-7 last"><%--<a href="<%=Url.Action("Details", new { ID = manager.PersonID, Name = manager.DisplayName, GAL = "" })%>"><%=manager.DisplayName%></a>--%>
        <%= Html.ActionLink(managerDisplayName, "Details", "Person", new { ID = managerPersonID, Name = managerDisplayName.Replace(" ", "-"), GAL = "" }, new {}) %>
        <%--Matrix Manager--%>
        <% if (matrixPersonID != null && matrixPersonID > 0 && !matrixDisplayName.IsNullOrEmptyTrimmed()) { %>
            <span class="label">&#8212; Matrix:</span>
            <%--<a href="<%=Url.Action("Details", new { ID = matrixManager.PersonID, Name = matrixManager.DisplayName, GAL = "" }) %>"><%=matrixManager.DisplayName%></a>--%>
            <%= Html.ActionLink(matrixDisplayName, "Details", "Person", new { ID = matrixPersonID, Name = matrixDisplayName.Replace(" ", "-"), GAL = "" }, new {}) %>
        <% } %>
    </td>
</tr>
<% } %>

<!-- Error seems to occur somewhere after here -->

<%--Sponsoring Manager--%>
<% if (Model.SponsoringManagerPersonID != null && Model.SponsoringManagerPersonID > 0 && !Model.SponsoringManagerDisplayName.IsNullOrEmptyTrimmed()) { %>
<tr>
    <td class="label table-col-3">Sponsor:</td>
    <td class="table-col-7 last">
        <%--<a href="<%=Url.Action("Details", new { ID = Model.SponsoringManager.PersonID, Name = Model.SponsoringManager.DisplayName, GAL = "" })%>"><%=Model.SponsoringManager.DisplayName%></a>--%>
        <%= Html.ActionLink(Model.SponsoringManagerDisplayName, "Details", "Person", new { ID = Model.SponsoringManagerPersonID, Name = Model.SponsoringManagerDisplayName.Replace(" ", "-"), GAL = "" }, new {}) %>
    </td>
</tr>
<% } %>

<%-- Administrative Assistant --%>
<% Html.RenderPartial("AdminAssistant", Model.AdministrativeAssistant); %>

<%--Employee Type--%>
<tr>
    <td class="label table-col-3">Type:</td>
    <td class="table-col-7 last">
        <%= Enum.GetName(typeof(Person.PersonType), Model.EmployeeType ?? (int)Person.PersonType.Default) %>
    </td>
</tr>

 <!-- Error appears to occur somewhere before here --> 
```

**AdminAssistant 部分视图**

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<AdminAssistantLink>" %>
<%
    bool IsProfileView = ((bool?)ViewData["IsProfileView"]) ?? false;
    string AdminAssistLinkID = "link-admin-assistant-" + Model.ProfilePersonID;
%>
<%-- Administrative Assistant --%>
<% if (IsProfileView && Role.AllowProfileEditSpecific(Model.ProfilePersonID)) { %>
    <%--Edit mode--%>
    <tr id="<%= AdminAssistLinkID %>" data-update="type: 'replace-portion', dataType: 'html', target: '<%= AdminAssistLinkID %>', source: '<%= AdminAssistLinkID %>'">
        <td class="label table-col-3">Admin Assistant:</td>
        <td class="table-col-7 last">
            <% if (Model.AdminAssistantPersonID != null && !Model.AdminAssistantDisplayName.IsNullOrEmptyTrimmed()) { %>
                <%-- Display currently selected assistant, with link to edit --%>
                <%= Html.ActionLink(Model.AdminAssistantDisplayName, "AdminAssistantForm", "Person", new { clientID = Model.ProfilePersonID }, new { title = "Edit Administrative Assistant" }) %>
            <% } else { %>
                <%-- Display link to add assistant --%>
                <%= Html.ActionLink("Add Administrative Assistant", "AdminAssistantForm", "Person", new { clientID = Model.ProfilePersonID }, new {title = "Add Administrative Assistant" }) %>
            <% } %>
        </td>
    </tr>
<% } else { %>
    <%--Link to Profile--%>
    <% if (Model.AdminAssistantPersonID != null && !Model.AdminAssistantDisplayName.IsNullOrEmptyTrimmed()) { %>
    <tr>
        <td class="label table-col-3">Admin Assistant:</td>
        <td class="table-col-7 last">
            <%= Html.ActionLink(Model.AdminAssistantDisplayName, "Details", "Person", new { ID = Model.AdminAssistantPersonID, Name = Model.AdminAssistantDisplayName.Replace(" ", "-"), GAL = "" }, new {}) %>
        </td>
    </tr>
    <% } %>
<% } %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:26:05.730

也许是你的评论标签？这些是合法的剃刀语法吗？

```
<%--Sponsoring Manager--%>
...
<%-- Administrative Assistant --%>
...
<%--Employee Type--%> 
```

我没有要测试的 MVC 2 站点，所以我不知道它们将如何显示。在 MVC 3 中，标签按原样显示在浏览器标记中。

# java - 处理传入 Web 服务的多行文本

> ID：14510555
> 
> 赞同：0
> 
> 时间：2013-01-24T20:54:18.097
> 
> 标签：java, string, web-services, jakarta-ee, jaxb

我正在开发一个接收对象“Person”的网络服务。“Person”将有一个名为“message”（字符串）的字段。消息可以是客户端放入其中的任何文本。它可以扩展到多行，也可以包含特殊字符。

现在，在服务层中，将“消息”字段声明为字符串是否是一个不错的选择。或者有没有更好的选择。

如果我将字符串类型用于“消息”，用户发送的确切文本是否会在服务层中收到，或者我是否必须添加任何编码器/解码器？

我使用客户端发送的这个“消息”来使用 sendmail 发送电子邮件。

---提前谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:04:14.893

不是编码器，但是是的，您必须稍微更改文本：传入文本中的换行符会因操作系统/浏览器而异，并根据电子邮件标准[RFC 2822](http://www.faqs.org/rfcs/rfc2822.html)第 2.1 节：

> 消息被分成多行字符。行是由回车和换行这两个字符分隔的一系列字符；即，回车 (CR) 字符（ASCII 值 13）紧跟换行 (LF) 字符（ASCII 值 10）。（回车/换行对在本文档中通常写为“CRLF”。）

在 Java 中，`CRLF`表示为`"\r\n"`，因此您需要将文本中的换行符替换为 ，最好使用 RegEx 来实现，如下所示：

```
message = message.replaceAll("\\r?\\n", "\r\n") 
```

# ios - UITextField 光标大小减小

> ID：14510558
> 
> 赞同：3
> 
> 时间：2013-01-24T20:54:25.123
> 
> 标签：ios, uitextfield, caret

我的项目中有一个 UITextField，带有用于输入文本的外部自定义字体（TradeGothic - Bold）。问题是，在以编程方式设置字体后，文本字段中出现的闪烁光标的大小会以某种方式减小！我附上了截图：

![没有自定义字体](../Images/b350d37b8a1f7719438973d497584982.png)

![在此处输入图像描述](../Images/933be454920756303f144bffeda73183.png)

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-12T23:33:06.943

如果您有附加到文本字段的约束，则需要使它们更大。

# mysql - 客户，前景。数据库设计

> ID：14510559
> 
> 赞同：0
> 
> 时间：2013-01-24T20:54:26.510
> 
> 标签：mysql, database, database-design

我们目前有潜在客户表以及相关表格，如通信和联系人等。我试图找出当潜在客户成为客户时的最佳设计。正如我所看到的，有两种选择。一种方法是在该表中为潜在客户提供一个布尔字段。另一种方法是在潜在客户成为客户时将其插入客户表中。我认为两者都会起作用，但我担心如果我选择不好，我将来会在自己的脚下开枪。

我应该补充一点，客户的相关表格比潜在客户多得多。发票、发货等表格

有谁知道哪种设计效果更好？或者有没有更好的选择我没有考虑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T21:19:26.983

我会选择布尔值。创建一个客户表并在未来迁移所有潜在客户有多难？为什么要添加多个表的开销？现在您可能必须检查这两个表......取决于您网站的使用情况。

```
 SELECT * FROM users WHERE payingcustomer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-27T02:46:53.033

取决于这两种型号的区别是什么。

一些 CRM 系统总是将客户作为潜在客户进行管理。你可以卖给他们一次，但我想你以后想卖其他东西。因此，您始终保留联系数据。如果是这种情况，我建议您像使用旗帜`is_customer`或其他东西的潜在客户一样管理客户。

当潜在客户成为客户时，您可以添加相关表格，如发票，同时将调度添加到发票等。但仍可用于探矿。

我希望这可以帮助你！

# google-apps-script - 制作电子表格标题的列表框

> ID：14510564
> 
> 赞同：0
> 
> 时间：2013-01-24T20:54:52.617
> 
> 标签：google-apps-script

我正在尝试在 UiApp 中查看一些电子表格数据，但遇到了一个简单的问题，超出了我的工资等级。

我已经使用列表框打开了电子表格并拉出了标题，现在想在另一个列表框中显示电子表格标题。当我知道如何从数组中填充列表框时，它不起作用，所有标题都显示为一个项目。

以下是日志中的标题：

```
*[[Item Name, Item Sku/Model#, Main, Seler Logo, UPC, M.S.R.P., MAP Price, Website Customer Price, Amazon Competitive Situation, Ship Weight, FedEx Ground HD 06413 to 90210, Amazon Selling Price, Shipping Charge, Selling Price + Shipping Charge, Amazon Commission @ 15%, Product Cost, Shipping Cost FedEx Ground HD (FR. Col L), Profit, Margin %, Actual Weight, Length, Width, Height, Description/Copy, Technical Specs, Order Fullfilled by:, Shipment Within:, Stock Level, ]]* 
```

我使用以下代码将它们添加到列表框中：

```
var listbox = app.createListBox();
for(i in data){
listbox.addItem(data[i]);  
  } 
```

我猜这是额外的一组括号，但我之前不需要从数据字符串中删除任何内容。一点帮助？

谢谢，马丁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:49:17.197

这确实是一个二维数组，这里只有列是感兴趣的，因为你只取了一行，改变如下：

```
var listbox = app.createListBox();
for(i in data[0]){
listbox.addItem(data[0][i]);  
  } 
```

# python - 在一个 ec2 实例的不同子域上运行多个 Flask 应用程序

> ID：14510567
> 
> 赞同：3
> 
> 时间：2013-01-24T20:55:03.733
> 
> 标签：python, dns, apache2, flask

我有一个 Amazon EC2 实例运行我用 Flask 构建的动态网站。

我不确定在同一个 ec2 实例上运行不同 webapp 的最佳方法是什么。我在这里阅读了有关应用程序调度的信息：http: [//flask.pocoo.org/docs/patterns/appdispatch/](http://flask.pocoo.org/docs/patterns/appdispatch/)和有关 Apache2 虚拟主机的信息：[http](http://blog.agdunn.net/?p=162) ://blog.agdunn.net/?p=162 。

我想在 ec2 实例上运行我的主网站 www.mydomain.com（我已经在工作），然后链接到我构建的其他 Flask 应用程序，例如在 www.subdomain.mydomain.com 上。

这可以通过使用虚拟主机还是在 wsgi 层使用应用程序调度来完成？如果是这样，哪个更好？

一如既往地非常感谢帮助和建议。

**编辑：感谢您的回复**

现在我正在尝试运行主站点，这是一个存储在`var/www/mysite`主域之外的烧瓶应用程序`domain.co.za`和另一个应用程序，它位于`var/www/flaskhello/flaskhello`子域之外`hello.domain.co.za`。目前，测试子域应用程序只是一个烧瓶 hello world 应用程序。我有如下指定的 apache2 配置文件和 wsgi 文件。

我遇到的问题是，flaskhello 应用程序同时从`domain.co.za`和显示`hello.domain.co.za`。由于某种原因，该`var/www/flaskhello/flaskhello/index.wsgi`文件似乎优先于`var/www/mysite/index.wsgi`，并且只有我对其中的`sys.path.insert...`行所做的更改似乎才有效。

**编辑 2**

现在我已经阅读[了这个 Google Groups thread](https://groups.google.com/forum/?fromgroups=#!topic/modwsgi/qJAGg5IXY3s)，这与我正在尝试做的事情类似，但使用的是 DJango。仍然没有成功，但这让我们怀疑这是否`WSGIApplicationGroup %{GLOBAL}`是导致问题的原因。我尝试对此进行一些更改，但我不完全确定我在做什么，也找不到任何关于如何在 WSGI 中使用 ApplicationGroups 的好的文档。

再次感谢您的帮助。

--

我有以下文件

`etc/apache2/sites-enabled/019-domain.co.za`和`etc/apache2/sites-available/domain.co.za`

```
<VirtualHost *:80>
     WSGIDaemonProcess index
 WSGIScriptAlias / /var/www/mysite/index.wsgi

 <Directory /var/www/index>
        WSGIProcessGroup index
    WSGIApplicationGroup %{GLOBAL}
    Order deny,allow
    Allow from all
 </Directory>
</VirtualHost> 
```

`etc/apache2/sites-enabled/018-hello.domain.co.za`和`etc/apache2/sites-available/hello.domain.co.za`

```
<VirtualHost *:80>
 WSGIScriptAlias / /var/www/flaskhello/flaskhello/index.wsgi

 <Directory /var/www/index>
        WSGIProcessGroup index
    WSGIApplicationGroup %{GLOBAL}
    Order deny,allow
    Allow from all
 </Directory>
</VirtualHost> 
```

`var/www/mysite/index.wsgi`

```
import sys
sys.path.insert(0,'/var/www/mysite')

from index import app as application 
```

`var/www/flaskhello/flaskhello/index.wsgi`

```
import sys
sys.path.insert(0,'/var/www/flaskhello/flaskhello')

from index import app as application 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T22:44:41.803

最终得到这个工作
有用的阅读：[Aagudnn.net 博客文章](http://blog.agdunn.net/?p=162)和[Graham 在 Google Groups 上的回答](https://groups.google.com/forum/?fromgroups=#!topic/modwsgi/Mr8y68ikj_g)。

事实证明，我的一条路径是错误的，我仍然需要设置配置文件的 ServerName 和 ServerAlias 部分*。*此外，我不能为两个单独的 DaemonProcesses 使用相同的名称。

现在一切正常。

我的最终配置文件：

```
<VirtualHost *:80>
    ServerName www.domain.co.za
    ServerAlias domain.co.za
         WSGIDaemonProcess www.domain.co.za
     WSGIScriptAlias / /var/www/mysite/index.wsgi
     <Directory /var/www/mysite/index>
            WSGIProcessGroup index
        WSGIApplicationGroup %{GLOBAL}
        Order deny,allow
        Allow from all
     </Directory>
</VirtualHost> 
```

和

```
<VirtualHost *:80>
ServerName www.hello.domain.co.za
    WSGIDaemonProcess www.hello.domain.co.za
 WSGIScriptAlias / /var/www/flaskhello/flaskhello/index.wsgi
 <Directory /var/www/flaskhello/flaskhello>
        WSGIProcessGroup www.hello.domain.co.za
    Order deny,allow
    Allow from all
 </Directory>
</VirtualHost> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-25T11:42:34.357

这是绝对可行的。如果您计划使用不同的域，您当然需要使用虚拟主机，并且您可能希望查看 virtualenv 以分离应用程序 python 堆栈（甚至 LXC 容器以提高安全性）。如果您打算使用不同的应用程序，那么它们将具有单独的调度命名空间，因此您必须使用不带 url_for 作为参数的重定向，而是使用实际的硬链接 url。这是非常典型的设置，应该很容易实现 - 当您遇到第一个具体问题时请回复我们 :)

# sql - 从非 dbo 查询架构中选择表会导致错误

> ID：14510568
> 
> 赞同：0
> 
> 时间：2013-01-24T20:55:05.393
> 
> 标签：sql, sql-server, sql-server-2008

我在汽车模式中有一些表。

我将用户的默认架构更改为`car`但是当我尝试执行以下操作时：

```
select * from toyota 
```

我仍然得到以下信息：

> 消息 208，级别 16，状态 1，第 2 行无效的对象名称“toyota”。

我必须`car`在它像这样工作之前指定：

```
select * from car.toyota 
```

我已经这样做了：

```
ALTER USER mex WITH NAME = mex;

ALTER USER mex WITH DEFAULT_SCHEMA = car; 
```

还有什么我想念的吗？我怎样才能保留`car`模式，但仍然能够只使用表名来查询它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T20:58:51.340

通常你必须在使用 select 语句之前这样做：

```
USE [Car]
GO
SELECT * FROM TOYOTA 
```

当然，如果您使用的是 Latin1_General_CI_AI 排序规则。否则，您必须非常小心区分大小写的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T13:18:41.243

更改用户的默认模式应该可以解决问题。所以，我不得不问一个愚蠢的问题：您是否以您更改了默认架构的用户身份运行此查询？

# php - php多数据库字段更新

> ID：14510575
> 
> 赞同：-1
> 
> 时间：2013-01-24T20:55:36.260
> 
> 标签：php

不知道我是否缺少任何语法：

```
for($i=1; $i<9; $i++)
{
    if($weekInfo == "week". $i)
    {
        //echo "d".$i;
        $Query="UPDATE databaseName SET 'd'.$i='" .addslashes($d1). "',weekInfo='" .addslashes($weekInfo). "' WHERE uid='".addslashes($uid)."'";
        $result = mysql_query($Query);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:05:00.417

除了不使用`mysql_`函数之外，您似乎只需要一些反引号。我还建议您事先明确定义列名。您应该打开错误报告，因为它可以帮助您找出问题的来源。至少，`echo $Query;`。

```
for($i=1; $i<9; $i++) {
    if($weekInfo == "week". $i) {
        $columnName = 'd' . $i;

        $Query="UPDATE db.table SET `$columnName` = '" .addslashes($d1). "', weekInfo='" .addslashes($weekInfo). "' WHERE uid='".addslashes($uid)."'";
        $result = mysql_query($Query);
    }
} 
```

# php - $_POST 变量不通过 PHP

> ID：14510579
> 
> 赞同：-1
> 
> 时间：2013-01-24T20:55:46.247
> 
> 标签：php, variables, post

我知道关于这个主题还有很多其他问题，但并不具体，我在使用 mysql 而不是 mysqli 时也有页面工作，我最近用 mysqli 修改了一些网页，因此正在更新以保持一致。我玩过双引号、mysqli_real_escape_string 之类的东西，但 $sql 字符串的输出是 SELECT * FROM user_login WHERE username='' 和 password='' 所以这显然是 $_POST[] 变量的问题。

任何帮助深表感谢。

我发布表格的代码是；

```
<?php 
 session_start();
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Login Page</title>
</head>

<body>
<table width="300" border="0" align="Center" cellpadding="0" cellspacing="1" bgcolor="="#cccccc">
<tr>
<form id="form1" name="form1" method="post" action="../customers/checklogin.php">
<td>
<table width = "100%" border ="0" cellpadding="3" cellspacing="1" bgcolor="#FFFFFF">
<tr>
<td colspan="3"><p><Strong> CUSTOMER LOGIN </strong></p></td>
</tr>
<tr>
<td width = "78">Username</td>
<td widith = "6">:</td>
<td width = "294"><input name="myusername" type="text" id="myusername"></td>
</tr>
<tr>
<td>Password</td>
<td>:</td>
<td><input name="mypassword" type="text" id="mypassword"></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td><input type="submit" name="Submit" value="Login">   </td>
</tr>
</table>
</td>
</form>
</tr>
</table>

<form id="form2" name="logo" method="post" action="../customers/logout.php">
<input type="submit" name="logout" value="Logout">
</form>

</body>
</html> 
```

而另一页是；

```
 <?php 
ob_start();
    session_start();
    echo session_id();

$host = "localhost";
$username="username";
$password = "password";
$db_name = "database";
$tbl_name = "user_login";

//Connect to server and select database
//mysql_connect("$host","$username","$password") or die("Cannot connect");
//mysql_select_db("$db_name") or die ("Cannot select Database");

$mysqli = new mysqli($host, $username, $password, $db_name);

/*if(isset($_SESSION["loggedin"]))
{
    die("you are already logged in");
}*/ // I had put this in but removed to debug

//username and password sent from the form, I have also tried with double quotes
$myusername = $_POST['myusername'];
$mypassword = $_POST['mypassword'];

//security to stop insertion of slashs

$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysqli_real_escape_string($myusername);
$mypassword = mysqli_real_escape_string($mypassword);
$sql = "SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
$result = mysqli_query($mysqli, $sql);

// Mysql_num_row is counting table row
$count = mysqli_num_rows($result);

//If result matched $myusername and $mypassword, table row must be 1 row
ob_clean();
if($count==1){
    //register $myusername and $mypassword and redirect to the file
    $_SESSION["loggedin"]= "YES";
    $_SESSION["username"] = $username;
//      $_SESSION["Hotel_Chain"] = mysqli_query($mysqli,"SELECT Hotel_Group FROM user_login WHERE username = '".$username."'");
header("Location: login_success.php"); 
exit();}

//  echo "it worked";   }
    else {
        echo "Wrong Username or Password";
        echo $sql;
        echo "<br /> Username : ";
        echo $myusername;
        echo "<br /> Password : ";
        echo $mypassword;
    }
//  ob_flush();
    ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Check Login</title>
</head>

<body>
<?php 
if($_SESSION["loggedin"]<>"YES"){echo $count;
echo $sql;
?>
<form id="form5" name="backtomain" method="post" action="../customers/main_login.php">
<input type="Submit" name="backtomain" value="Try again" />
</form>    
<?php
}
else{
//  print mysqli_query($mysqli,$sql);
}
?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:02:05.497

尝试使用简单的引号和连接。

```
$sql = 'SELECT * FROM $tbl_name WHERE username="'.$myusername.'" AND password="'.$mypassword.'"; 
```

尝试在每个更改其的函数之前和之后打印您的变量。很容易理解会发生什么。

# emacs - 在 Emacs 中修改光标下的面，包括在 ansi-term 上

> ID：14510580
> 
> 赞同：2
> 
> 时间：2013-01-24T20:55:46.230
> 
> 标签：emacs, ipython, emacs-faces

有没有办法轻松修改`font-face`光标下的？

例如，下面的蓝色文本很难阅读：

                           ![在此处输入图像描述](../Images/67dbb40de2e02651c9fca01c84a15a63.png)

以上是输出

```
ipython --color "Linux" 
```

`ansi-term`在with `tango-dark`in上运行`Emacs 24.1`，即 `(load-theme 'tango-dark t)`

如果我`what-cursor-position`在上面的图像上运行（这里描述：[Get font face under cursor in Emacs](https://stackoverflow.com/questions/1242352/get-font-face-under-cursor-in-emacs)），我得到：

```
 position: 30385 of 30477 (100%), column: 22
            character: / (displayed as /) (codepoint 47, #o57, #x2f)
    preferred charset: ascii (ASCII (ISO646 IRV))
code point in charset: 0x2F
               syntax: _    which means: symbol
             category: .:Base, a:ASCII, l:Latin, r:Roman
          buffer code: #x2F
            file code: #x2F (encoded by coding system nil)
              display: by this font (glyph code)
    xft:-unknown-DejaVu LGC Sans Mono-bold-normal-normal-*-11-*-*-*-m-0-iso10646-1 (#x12)

Character code properties: customize what to show
  name: SOLIDUS
  old-name: SLASH
  general-category: Po (Punctuation, Other)
  decomposition: (47) ('/')

There are text properties here:
  face                 (:weight bold :foreground "blue2" :background unspecified) 
```

我怎样才能修改这个字体？

如果您想知道 IPython 仅支持三种颜色集：

*   `Nocolor`
*   `Linux`（我上面使用的那个）
*   `LightBG`（用于浅色背景）

## 更新：

我认为`font-lock-string-face`是一张不同的脸：

                        ![在此处输入图像描述](../Images/c42e1ac77fe8d3bdd881c495048eb19a.png)

事实上，我认为这不是 IPython 用来表示字符串的面，而是`python-mode`用来表示带有常规 python 代码的缓冲区中的字符串的面（`tango-dark`见下文）。

                                          ![在此处输入图像描述](../Images/13a9b34537ea0ca3e6cb974629d5ae80.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T00:02:59.030

It is possible to change the way ansi colors are shown:

```
(defface term-color-red
    '((t (:foreground "#ff0000" :background "#ff0000")))
  "Unhelpful docstring.") 
```

Here is the whole bunch:

```
term-color-red
term-color-green
term-color-black
term-color-yellow
term-color-blue
term-color-magenta
term-color-cyan
term-color-white 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T20:58:12.327

`M-x customize-face`将光标悬停在要修改的特定内容上。也可以使用`set-face-foreground`，`set-face-background`具体取决于您想要做什么（有时最好更改背景颜色以使字体更容易在终端中看到）。

所以我检查了 IPython，正如我在下面的评论中提到的那样，`ipython.el`并没有突出显示它自己。着色都是使用终端 ANSI 颜色完成的。在某些终端中，可以通过 a`.bashrc`或`.zshrc`任何您的 shell 更改颜色并可能运行它`M-x term`。通过 Emacs 本身，我看不到更改它的方法，因为 IPython 只有 3 个默认方案，并且据我所知无法指定任何特定的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T19:01:18.697

像[sabof](https://stackoverflow.com/a/14513118/1225607)一样，我认为您看到的颜色是由 设置的`ansi-term`，而不是由 Emacs 的颜色主题设置的。

配置这些颜色的一种方法是设置`ansi-term-color-vector`变量。查看代码`term.el`有助于理解该变量的含义：它包含 8 个[ansi 颜色转义码](https://en.wikipedia.org/wiki/ANSI_escape_code#Colors)的颜色规范：

```
(defvar ansi-term-color-vector
  [unspecified "black" "red3" "green3" "yellow3" "blue2"
   "magenta3" "cyan3" "white"]) 
```

* * *

这是我的设置（可能适合你，因为我也在使用深色 Tango 主题）：

```
;; ANSI Term colors
(setq ansi-term-color-vector
      [unspecified "#000000" "#b21818" "#18b218" "#BE5F00"
                   "#6D85BA" "#b218b2" "#18b2b2" "#b2b2b2"]) 
```

# c# - ExchangeManagementShell - 如何获取 MailboxDatabase 的所有副本的 EdbFilePath 和 LogFolderPath...（请注意对所有副本感兴趣）？

> ID：14510585
> 
> 赞同：0
> 
> 时间：2013-01-24T20:55:53.863
> 
> 标签：c#, powershell, exchange-server, exchange-server-2010

如何获取 DatabaseCopy 的 EdbFilePath 和 LogFolderPath 信息？

请从下面查看我可以获取 MailboxDatabase 的信息。但不适用于 MailboxDatabaseCopies？

[PS] C:\Windows\system32>$md | 选择名称、edbfilepath、LogFolderPath、logfileprefix

名称 EdbFilePath LogFolderPath LogFilePrefix ---- ------------ ------------- ------------- 邮箱数据库 1653755753 C: \Program Files\Microsoft... C:\Program Files\Microsoft... E00

[PS] C:\Windows\system32>$md.gettype().fullname Microsoft.Exchange.Data.Directory.SystemConfiguration.MailboxDatabase [PS] C:\Windows\system32>$mdc = $md.DatabaseCopies[0] [ PS] C:\Windows\system32>$mdc | 选择名称、edbfilepath、LogFolderPath、logfileprefix

名称 edbfilepath LogFolderPath logfileprefix ---- ----------- ------------- -------------

[PS] C:\Windows\system32>$mdc.gettype().fullname Microsoft.Exchange.Data.Directory.SystemConfiguration.DatabaseCopy

[PS] C:\Windows\system32>$mdc

DatabaseName：邮箱数据库 1653755753 HostServerName：NAG1-HRV-VM-R2 ActivationPreference：1 ParentObjectClass：msExchPrivateMDB ReplayLagTime：00:00:00 TruncationLagTime：00:00:00 AdminDisplayName：ExchangeVersion：0.10 (14.0.100.0) DistinguishedName：CNNA= HRV-VM-R2,CN=邮箱数据库 1653755753,CN=数据库,CN=Exchange 管理组 (FYDIBOHF23SPDLT),CN=管理组,CN=NagExchange2010,CN=Microsoft Exchange,CN=服务,CN=配置,DC=nagdc ,DC=esi,DC=emc,DC=com 身份：邮箱数据库 1653755753\NAG1-HRV-VM-R2 Guid：175a24db-426c-47a1-8ad6-ff5ae6b56aca 对象类别：nagdc.esi.emc.com/Configuration/Schema/ ms-Exch-MDB-复制对象类：{顶部，msExchMDBCopy} WhenChanged：1/7/2013 7:28:45 PM WhenCreated：1/7/2013 7:28:45 PM WhenChangedUTC：1/8/2013 3:28:45 AM WhenCreatedUTC：1/8/2013 3：上午 28:45 组织 ID：OriginatingServer：NAG3-HRV-VM-R2.nagdc.esi.emc.com IsValid：真

问候，

梦想家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T06:38:42.947

请参阅：[http ://technet.microsoft.com/en-us/library/dd979782(v=exchg.141).aspx](http://technet.microsoft.com/en-us/library/dd979782%28v=exchg.141%29.aspx)

DAG 数据库的*副本*不能位于不同的路径上。*这就是为什么在添加数据库副本*时无法指定它的原因（但是，在*创建*数据库时必须指定路径）。一旦建立，您将无法更改单个副本的路径。如果您确实为数据库更改它，则该路径必须存在于所有将保存副本的服务器上。

因此，为了回答您的问题，您在示例中运行的第一个查询显示了主动副本和所有被动副本的日志和数据库的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:14:38.710

标题说您想获取 EDB 和日志的文件/文件夹路径，但我认为您已经找到了（从第一个示例中）。

如果您想获取（DAG 的）数据库副本的文件夹路径，它们与“主”数据库相同。

DAG 数据库和日志*路径*在拥有数据库副本的所有服务器上必须相同（尽管底层存储不需要相同）。

# database - Neo4j 带循环的最短路径

> ID：14510586
> 
> 赞同：1
> 
> 时间：2013-01-24T20:55:53.810
> 
> 标签：database, graph, path, neo4j, shortest

我已经评估 Neo4j 1.9.M03 有一段时间了，并且达到了我没想到的程度。

我有一个约 140,000 个顶点的图。我也有三类边，我们称它们为父亲、母亲和丈夫。每个类大约有 80,000 条边。没有属性，也没有索引。顶点存储大小约为 1.3 MB，边缘存储约为 8 MB。

数据源自 SQL Server，并且已知从 SQL 迁移到 Neo4j 的质量是正确的。对几十个顶点对运行SQL最短路径存储过程，已知最短路径距离和路径。

最短路径查询是 Cypher：`START one=node(0), two=node(1234) MATCH p = shortestPath(one-[*..1000]-two) RETURN p;`

**部分测试用例一：**我只使用丈夫和父亲的关系，循环的出现（例如`v[0] -> v[1] -> v[2] -> v[0])`很低。如果我在特定的已知长路径（例如已知为~450 跳）上执行最短路径计算，它会在 50ms 内返回（非缓存），路径约为 550 跳。预计长度会增加，因为我们排除了部分边。

**部分测试用例二**：同样，如果我只使用夫妻关系，循环的发生率（例如`v[0] -> v[1] -> v[2] -> v[0])`很低。如果我执行相同的最短路径，我会得到与以前相同的顺序的结果：大约 50 毫秒（非缓存)，路径长度也有类似的增加。

**完整测试案例**：我使用所有（父亲、母亲和丈夫）关系。由于常见情况，现在可以预见循环的发生率很高`v[0] mother-> v[1] husband-> v[2] <-father v[0]`。当我执行最短路径查询时，JVM 分配了 4 GB 的内存并且计算没有完成。**这就是问题。**

* * *

我的论点是循环的定期发生导致了这种行为，否则当我只添加另一类父边时，我不会期望性能有如此巨大的差异——除非最短路径算法没有考虑循环。

我直接使用 Java API 应用了 Dijkstra 算法，所有边的成本为 1，并获得了与使用的标准 ShortestPath 算法相似的结果。结果，我在 IntelliJ 调试 6 分钟后收到了这个异常。

```
Exception in thread "main" java.lang.OutOfMemoryError: GC overhead limit exceeded
    at org.neo4j.kernel.impl.util.RelIdArray$RelIdIteratorImpl.<init>(RelIdArray.java:661)
    at org.neo4j.kernel.impl.util.RelIdArray$DirectionWrapper$3.iterator(RelIdArray.java:327)
    at org.neo4j.kernel.impl.util.RelIdArray.iterator(RelIdArray.java:270)
    at org.neo4j.kernel.impl.core.NodeImpl.getAllRelationships(NodeImpl.java:172)
    at org.neo4j.kernel.impl.core.NodeImpl.getRelationships(NodeImpl.java:270)
    at org.neo4j.kernel.impl.core.NodeProxy.getRelationships(NodeProxy.java:82)
    at org.neo4j.kernel.StandardExpander$AllExpander.doExpand(StandardExpander.java:303)
    at org.neo4j.kernel.StandardExpander$RelationshipExpansion.iterator(StandardExpander.java:194)
    at org.neo4j.kernel.impl.traversal.TraversalBranchImpl.expandRelationshipsWithoutChecks(TraversalBranchImpl.java:114)
    at org.neo4j.kernel.impl.traversal.TraversalBranchImpl.expandRelationships(TraversalBranchImpl.java:104)
    at org.neo4j.kernel.impl.traversal.TraversalBranchImpl.initialize(TraversalBranchImpl.java:130)
    at org.neo4j.kernel.impl.traversal.TraversalBranchImpl.next(TraversalBranchImpl.java:150)
    at org.neo4j.graphalgo.impl.util.BestFirstSelectorFactory$BestFirstSelector.next(BestFirstSelectorFactory.java:73)
    at org.neo4j.kernel.impl.traversal.TraverserIterator.fetchNextOrNull(TraverserIterator.java:65)
    at org.neo4j.kernel.impl.traversal.TraverserIterator.fetchNextOrNull(TraverserIterator.java:34)
    at org.neo4j.helpers.collection.PrefetchingIterator.hasNext(PrefetchingIterator.java:55)
    at org.neo4j.graphalgo.impl.util.StopAfterWeightIterator.fetchNextOrNull(StopAfterWeightIterator.java:45)
    at org.neo4j.graphalgo.impl.util.StopAfterWeightIterator.fetchNextOrNull(StopAfterWeightIterator.java:29)
    at org.neo4j.helpers.collection.PrefetchingIterator.hasNext(PrefetchingIterator.java:55)
    at org.neo4j.helpers.collection.IteratorUtil.firstOrNull(IteratorUtil.java:51)
    at org.neo4j.helpers.collection.IteratorUtil.firstOrNull(IteratorUtil.java:201)
    at org.neo4j.graphalgo.impl.path.Dijkstra.findSinglePath(Dijkstra.java:98)
    at org.neo4j.graphalgo.impl.path.Dijkstra.findSinglePath(Dijkstra.java:50)
    at ShortestPathCalc.Dijkstra(Main.java:198)
    at Main.main(Main.java:53)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

你觉得我说的对吗？这是图形数据库或其最短路径算法的已知限制吗？对我来说，以前访问过的顶点不会存储在哈希表中似乎很愚蠢，这样最短路径算法就不会多次尝试离开以前访问过的顶点。

* * *

**2013 年 1 月 25 日更新**

一个 Github 回购，所以你可以跟随！

```
https://github.com/squirrelsama/neo4j-shortestpath-issue 
```

* * *

**2013 年 2 月 7 日更新**

请参阅已接受的答案。简而言之，周期与它无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-27T21:02:27.893

使用 neo4j 遍历框架，您可以选择在遍历中使用的唯一性，例如 RELATIONSHIP_GLOBAL，这样它在遍历期间只遍历关系一次。这可能会解决您的问题：

```
// 单向
Traversal.traversal（唯一性.RELATIONSHIP_GLOBAL）
         .evaluator(Evaluators.returnWhereEndNodeIs(myEndNode)
         .traverse(myStartNode);

// 双向
Traversal.bidirectionalTraversal()
         .mirroredSides( Traversal.traversal( Uniqueness.RELATIONSHIP_GLOBAL ) )
         .traverse(myStartNode, myEndNode);

```

以上示例是原则性的，但可能需要修改才能与您的查询一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T03:08:01.553

如果尝试获取节点 44715 和 17173 之间的最短路径，已知其最短路径为 112 跳，则可以观察到该问题。

如果我们将最短路径评估限制为 111 跳，则查询会很快完成，但没有路径。`START one=node(44715), two=node(17173) MATCH p = shortestPath(one-[*..111]-two) RETURN p;`

但是，如果我们将最短路径评估限制为 112 跳，我们会观察到查询无法完成，并且 JVM 会迅速分配高达 4 GB 的内存。`START one=node(44715), two=node(17173) MATCH p = shortestPath(one-[*..112]-two) RETURN p;`

Neo 已确认这是与要返回的 Path 对象的组装有关的边缘案例错误。它在他们的错误积压中。

换句话说，周期与问题无关。

# debugging - phonegap windows phone，适用于android和ios，但不适用于windows？

> ID：14510587
> 
> 赞同：3
> 
> 时间：2013-01-24T20:55:53.907
> 
> 标签：debugging, windows-phone-7, cordova, visual-studio-debugging

我有一个可以在 android 和 ios 中运行的 phonegap 应用程序，但是当我将它移植到 windows phone 时它​​无法正常工作。它在模拟器上加载得很好，它显示了页面渲染和样式很好，但是单击页面上的登录按钮没有任何作用。我尝试禁用除cordova文件之外的所有javascript文件并尝试“alert（）”，但没有奏效。您如何调试 javascript 错误，在仿真期间运行的调试器仅显示以下内容：

```
GapBrowser_Navigated :: /app/www/login.html
'UI Task' (Managed): Loaded 'System.ServiceModel.Web.dll'
'UI Task' (Managed): Loaded 'System.ServiceModel.dll'
The thread '<No Name>' (0xf6200ba) has exited with code 0 (0x0).
'UI Task' (Managed): Loaded 'System.SR.dll'
A first chance exception of type 'System.ArgumentException' occurred in mscorlib.dll
The thread '<No Name>' (0xf0d00ea) has exited with code 0 (0x0). 
```

我不知道如何调试它（并且阅读帖子听起来好像有关的信息甚至不应该成为问题），有人能指出我正确的方向吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:31:16.907

看起来它是由在 deviceready 事件之前使用 cordova api 触发的 javascript 引起的，它从未在 android 或 ios 中发生过，但我猜 Windows 中的执行时间导致了竞态条件。此外，在执行 window.location 之后，我使用“throw”来杀死 javascript，这样就没有执行其他任何操作，这在 windows 上不起作用，但在其他两个上起作用。

# r - 获得线性回归系数矩阵的更好方法

> ID：14510591
> 
> 赞同：1
> 
> 时间：2013-01-24T20:56:05.233
> 
> 标签：r, function, loops, matrix

我有一个 xts 对象 X

```
dput(x)
structure(c(111.09, 110.95, 110.71, 110.79, 110.72, 110.83, 110.75, 
110.74, 110.85, 110.95, 110.98, 120.99, 121.27, 120.61, 120.55, 
120.76, 120.86, 120.82, 120.88, 121.1, 120.86, 120.76, 111.29, 
111.08, 110.95, 110.88, 111.05, 111.17, 111.17, 111.17, 111.2, 
111.19, 111.28), .Dim = c(11L, 3L), .Dimnames = list(NULL, c("val1", 
"val2", "val3")), index = structure(c(1356987540, 1357160340, 
1357246740, 1357333140, 1357592340, 1357678740, 1357765140, 1357851540, 
1357937940, 1358197140, 1358283540), tzone = "GMT", tclass = c("POSIXct", 
"POSIXt")), .indexCLASS = c("POSIXct", "POSIXt"), .indexTZ = "GMT", tclass = c("POSIXct", 
"POSIXt"), tzone = "GMT", class = c("xts", "zoo")) 
```

它的数据看起来像这样

```
 val1   val2   val3
2012-12-31 20:59:00 111.09 120.99 111.29
2013-01-02 20:59:00 110.95 121.27 111.08
2013-01-03 20:59:00 110.71 120.61 110.95
2013-01-04 20:59:00 110.79 120.55 110.88
2013-01-07 20:59:00 110.72 120.76 111.05
2013-01-08 20:59:00 110.83 120.86 111.17
2013-01-09 20:59:00 110.75 120.82 111.17
2013-01-10 20:59:00 110.74 120.88 111.17
2013-01-11 20:59:00 110.85 121.10 111.20
2013-01-14 20:59:00 110.95 120.86 111.19
2013-01-15 20:59:00 110.98 120.76 111.28 
```

我可以通过使用得到每个 val（val1、val2、val3）`cor(x, method="pearson")`之间的相关性，我想要一个类似的矩阵，但我想要线性回归系数而不是三个 val 之间的相关性。我创建了一个完全符合我要求的函数，但 R 对我来说是新的，我觉得我是以非常 C/C++ 的方式完成的。我希望也许有人可以帮助我创建一个更像 R 的解决方案（也许使用其中一种 apply 方法，或者甚至是指向可以帮助我理解如何进行此类操作的东西的链接）。

我创建的函数如下所示

```
getLmFromValues <- function( vals ) {

    #create an empty data.frame
    df <- data.frame( matrix(0, nrow = ncol(vals), ncol = ncol(vals) ) )

    colnames(df) <- colnames(vals)
    rownames(df) <- colnames(vals)

    for( outer in 1:ncol(vals) ) {

        for ( inner in 1:ncol(vals) ) {

            if ( inner == outer ) {
                df[outer,inner] <- NA #could also be 1
            }
            else {
                            #get linear model of vectors and store the slope coeficient
                df[outer, inner] <- coef( lm( vals[,outer] ~ vals[,inner] ) )[2]
            }
        }
    }

    return( df )
} 
```

我的函数的输出如下所示

```
 val1      val2      val3
val1        NA 0.3015123 0.6071429
val2 0.8122685        NA 0.7978208
val3 0.6384838 0.3114367        NA 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T21:14:24.700

具有单个线性预测变量的回归模型的斜率仅为 $\hat\beta = \rho \times \frac{\sigma_y}{\sigma_x}$。因此，您可以根据标准差将相关矩阵乘以对角矩阵：

```
mysd <- sqrt( diag( var(mydata) ) )

diag( mysd ) %*% cor(mydata) %*% diag( 1/mysd )

          [,1]      [,2]      [,3]
[1,] 1.0000000 0.3015123 0.6071429
[2,] 0.8122685 1.0000000 0.7978208
[3,] 0.6384838 0.3114367 1.0000000 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T21:09:03.937

像这样的东西？首先用 . 创建所有可能的组合`expand.grid`。然后，使用`apply`它将 a`matrix`作为其第一个参数，后跟一个 index = `1`here（用于按行），然后它允许定义一个函数。请注意，索引也可以是 2，这意味着这些值将按列发送，这是我们不想要的。Index = 1 表示来自 idx 的值将作为 (1,1)、(2,1) 等传递。一次一个。我们用它来创建一个函数，它的参数 ix 每次都是 (1,1), (2,1) ... 并使用一个简单的 if-else 语句构造所有输出。然后将其塑造成您需要的矩阵形式。我希望这会有所帮助。

```
idx <- expand.grid(1:3, 1:3)
out <- apply(idx, 1, function(ix) {
    if (all(ix==ix[1])) {
        return(NA)
    } else {
        summary(lm(x[1:11, ix[1]] ~ x[1:11, ix[2]]))$coefficients[2,1]
    }
})

> out.m <- matrix(out, ncol=3)
> out.m

#           [,1]      [,2]      [,3]
# [1,]        NA 0.3015123 0.6071429
# [2,] 0.8122685        NA 0.7978208
# [3,] 0.6384838 0.3114367        NA 
```

# java - 找到的 .sendToAll() 方法是什么类

> ID：14510600
> 
> 赞同：0
> 
> 时间：2013-01-24T20:56:47.050
> 
> 标签：java

我正在关注一个关于java中套接字编程的材料，我遇到了问题。我的服务器对象没有 .sendToAll() 方法和 .removeConnection() 方法。请有人指出我正确的方向。下面是代码。

```
public class ServerThread extends Thread {
Server server;
Socket socket;

public ServerThread(Server server, Socket socket){
    this.server = server;
    this.socket = socket;

    //start the thread
    start();
}
public void run(){
    try{
        DataInputStream din = new DataInputStream(socket.getInputStream());

        while (true){
            String message = din.readUTF();

            System.out.println("Sendong "+ message);

            server.sendToAll(message);
        }
    }catch(EOFException x){

    }catch (IOException x){
        x.printStackTrace();
    }finally{
        server.removeConnection(socket);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:13:53.580

您需要确定用于服务器的类。查看该类的包导入。

然后检查该服务器类的 API 以查看它是否定义了您尝试进行的 API 调用。

# python - 使用 ConditionalFreqDist 时出现语法错误

> ID：14510612
> 
> 赞同：-4
> 
> 时间：2013-01-24T20:57:14.707
> 
> 标签：python

我正在尝试获取 ConditionalFreqDist 但 Python 在第三行一直给我一个语法错误（对于 .. 中的类别）。我无法弄清楚问题，任何想法（我是初学者）。

```
 def persoonlijkvnw(mijn_corpus):
    cfd = nltk.ConditionalFreqDist(category,word)
    for category in mijn_corpus.categories()
    for word in mijn_corpus.words(categories=category)
    category = mijn_corpus.categories()
    persoonlijke_vnw = ['ik','jij','hij','wij','jullie','zij']
    cfd.tabulate(conditions=category, samples=persoonlijke_vnw) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:15:03.170

首先，有关基本语法的信息，您可能应该参考 Python 教程。

我将引用有关[复合语句](http://docs.python.org/2/reference/compound_stmts.html)的官方文档：

> 复合语句由一个或多个“从句”组成。一个子句由一个标题和一个“套​​件”组成。特定复合语句的子句标题都处于相同的缩进级别。每个子句标题都以唯一标识关键字开头，并**以冒号结尾**。套件是由子句控制的一组语句。一个套件可以是一个或多个分号分隔的简单语句，位于与标题相同的行上，位于标题的冒号之后，也可以是**一个或多个缩进语句，位于后续行**中。只有后一种形式的套件可以包含嵌套的复合语句

（重点是我的）。

正如您从同一页面中看到的那样，`for`循环也是[一个复合语句](http://docs.python.org/2/reference/compound_stmts.html#the-for-statement)，并且由于在您的情况下“套件”与“标题”不在同一行，因此它们应该缩进。此外，“标题”的末尾需要一个冒号。

没有缩进，我们不能说循环体在哪里结束，但我提到的可能只是这段代码问题的一部分。

例如，`category`变量用作外部循环计数器，但在循环中重新分配。这不是语法错误，但可能是也可能不是作者的疏忽。

# uiscrollview - 默认情况下在 UICollectionView 中滚动 UISearchBar

> ID：14510614
> 
> 赞同：0
> 
> 时间：2013-01-24T20:57:21.717
> 
> 标签：uiscrollview, uicollectionview, contentoffset

我正在开发一个使用 UICollectionView（实际上是 PSUICollectionView）的项目，并且我在这个集合视图的顶部添加了一个 UISearchBar。我现在想做的是默认滚动这个搜索栏，直到用户把它拉下来。这种行为在 UITableView 中很容易实现，但是 UICollectionView 的 contentSize 直到 viewDidAppear 才被初始化！所以将 contentOffset 的 Y 设置为搜索栏高度没有任何效果，除非它是在 viewDidAppear 中完成的（这不是我想要的）。有人想出将 UISearchBar 与 UICollectionView 一起使用，以及如何使其默认滚动关闭吗？

谢谢！-阿米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T00:29:51.720

我通过添加延迟然后调用此方法做了类似的事情：

```
[self.collectionView scrollToItemAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] atScrollPosition:UICollectionViewScrollPositionTop animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T17:24:42.297

这个解决方案对我有用

1.确保你先点击

![](../Images/602e7310c5787b585b033574b48ef5d8.png)

2.自定义类

![](../Images/cc3e096b560b040c053f5fa0854d128f.png)

3.给出一个标识符

![在此处输入图像描述](../Images/acade1e50e40d4092b5139f7da312899.png)

4.

```
-(UICollectionReusableView *)collectionView:(UICollectionView *)collectionView
          viewForSupplementaryElementOfKind:(NSString *)kind
                                atIndexPath:(NSIndexPath *)indexPath
{
    return [self.imageCollection dequeueReusableSupplementaryViewOfKind:UICollectionElementKindSectionHeader withReuseIdentifier:@"collectionViewHeader" forIndexPath:indexPath];
} 
```

5.在故事板上添加搜索栏到标题部分。

应该管用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-24T11:13:17.530

我最终使用了这个技巧：

调整 viewdidload 中的插图并在 viewdidappear 中重新设置它，并设置它们的内容。

ViewDidLoad：

```
[self.mainCollectionView setContentInset:UIEdgeInsetsMake(-44, 0, 0, 0)];
firstTime = TRUE; 
```

viewDidAppear:

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    if (firstTime) {
        [self.mainCollectionView setContentInset:UIEdgeInsetsMake(0, 0, 0, 0)];
        [self.mainCollectionView setContentOffset:CGPointMake(0, 44)];
        firstTime = FALSE;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T23:03:19.450

我的问题没有得到任何回应，但我会发布我最终完成的事情。我使用了滚动视图并将搜索栏和集合视图作为子视图添加到滚动视图。这是解决方案的关键，但实际上让它运作良好是相当棘手的。将集合视图添加为子视图时，您必须做的是使其框架高度与其 contentSize 相同。这确保集合视图本身不会滚动，而超级视图将处理滚动。要记住的另一件事是，与 UITableView 不同，UICollectionView 对象在 viewDidAppear 之前不会更新其 contentSize。所以我不得不在viewWillAppear中设置一个假的frame和contentSize，然后在viewDidAppear中重新调整。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T06:01:44.057

在我看来，无论是将集合视图添加到其集合视图控制器的方式还是另一个视图控制器呈现该集合视图控制器的方式都有问题。您是否使用任何自定义视图控制器容器？如果是这样，请务必通知 childViewControllers（如您的 collectionView）它已添加到父级。

如果这些都不是，那么可能是您在到达 viewDidAppear 之前没有加载数据对象。如果您将它们手动加载到数组中，您何时调用 reloadData？如果您使用 NSFetchedResultsController 在视图出现之前检查您是否已获取对象，因为需要它们来计算 contentSize。

您是否继承了 UICollectionViewFlowLayout？如果是这样，是在视图出现之前调用 prepareLayout 吗？

答案不多，但听起来您的问题可能出在几个地方。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-04-09T21:43:07.237

我的解决方案：

1.  在`viewDidLoad`最初通过设置`contentInset`'s隐藏搜索栏`top`：

    `self.collectionView.contentInset = UIEdgeInsetsMake(-56.0, 0.0, 0.0, 0.0)`

2.  当用户向下滚动超过阈值时，清除`contentInset`以显示搜索栏：

    `- (void)scrollViewDidScroll:(UIScrollView *)scrollView { if (scrollView.contentOffset.y < -30.0) { [UIView animateWithDuration:0.25 animations:^{ self.collectionView.contentInset = UIEdgeInsetsZero; }]; } }`

# php - 尊重验证查找特定键的消息

> ID：14510615
> 
> 赞同：3
> 
> 时间：2013-01-24T20:57:25.503
> 
> 标签：php, validation, respect-validation

如何为我的验证的特定键获取自定义消息？

例如这个：

```
try {
    Respect\Validation\Validator::create()
        ->key('foo', v::length(20))
        ->key('bar', v::max(5))
        ->assert([
            'foo' => 'Hello, world!',
            'bar' => 30,
        ]);
} catch (Respect\Validation\Exceptions\ValidationException $exception) {
    $errors = $exception->findMessages([
        'key' => 'My custom message',
    ]);
    var_dump($errors, $exception->getFullMessage());
} 
```

返回这个：

```
array (size=1)
  'key' => string 'My custom message' (length=17)

\-These rules must pass for "Array"
  |-My custom message
  | \-These rules must pass for "Hello, world!"
  |   \-"Hello, world!" must have a length greater than 20
  \-Key bar must be valid on bar
    \-These rules must pass for "30"
      \-"30" must be lower than 5 
```

如何为`foo`密钥制作自定义消息，并单独制作`bar`密钥？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T12:01:46.740

试试这个：

```
try {
    Respect\Validation\Validator::create()
        ->key('foo', v::length(20))
        ->key('bar', v::max(5))
        ->assert([
            'foo' => 'Hello, world!',
            'bar' => 30,
        ]);
} catch (Respect\Validation\Exceptions\ValidationException $exception) {
    $errors = $exception->findMessages([
        'foo' => 'My foo message',
        'bar' => 'My bar message',
    ]);
    var_dump($errors, $exception->getFullMessage());
} 
```

另请注意，这应该适用于嵌套数组：

```
try {
    Respect\Validation\Validator::create()
        ->key('foo', v::length(20))
        ->key('bar', v::arr()
            ->key('baz', v::max(5))
        )
        ->assert([
            'foo' => 'Hello, world!',
            'bar' => [
                'baz' => 30,
            ]
        ]);
} catch (Respect\Validation\Exceptions\ValidationException $exception) {
    $errors = $exception->findMessages([
        'foo' => 'My custom foo message',
        'bar' => 'My custom bar message',
        'baz' => 'My custom baz message',
    ]);
    var_dump($errors, $exception->getFullMessage());
} 
```

# c# - 无法解析来自加密密码键盘的 XML 响应

> ID：14510616
> 
> 赞同：0
> 
> 时间：2013-01-24T20:57:28.977
> 
> 标签：c#, xml, parsing

我目前正在尝试编写对 IDTech 加密密码键盘/读卡器（HIDUSB 设备）的支持。在进入（刷卡或键控）后，设备会以 XML 格式发送响应，如下所示：

```
<DvcMsg Ver="1.1"><Dvc App="SecureKey Demo Software" AppVer="1.0" DvcType="M130-IDTECH" DvcSN="54114600381" Entry="SWIPE"></Dvc><Card CEncode="0" ETrk1="ýÚ‹çMŒ·¯×Õ³a+.7ãN2†ÖcƒTWïX¿6`Eåq1Bk_–Ø‚ÑM€œœåê`S" ETrk2="ÓÙ|•QÎŠkÄn`å ¤óhîõRÐ3ÌÐ€{Rs¤Ì7MX¯nw" CDataKSN="P&ƒµ" Exp="0512" MskPAN="4444******4444" CHolder="PAYMENTECH" EFormat="4"></Card><Addr></Addr><Tran TranType="CREDIT"></Tran></DvcMsg> 
```

我意识到 ETrk1、ETrk2 和 CDataKSN 属性中的加密信息包含无效字符，这些字符会阻止任何 XML 解析器。是否有一种方法可以使用不同的字符编码来生成每个字符的十六进制等效项，以便可以解析 XML，或者我是否需要首先操作 XML 字符串来完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T01:48:22.643

您可以通过查找非法字符并将其替换为字符代码 (&#xxxx) 来预处理字符串。不过，有一天我会担心加密的 blob 包含一个密切的引用。如果这是一种可能性，我看不到编写自己的解析器的方法。

另一种方法是根本不将其视为 XML，而只是将其视为带有一些插入变量部分的大部分固定文本。所以要么运行一个正则表达式，或者如果字段是固定长度的，你甚至可以只做 SubString 调用。如果格式发生变化，这显然更容易中断。

# nlp - 词干提取有什么用？

> ID：14510618
> 
> 赞同：7
> 
> 时间：2013-01-24T20:57:37.207
> 
> 标签：nlp, stanford-nlp

简单的问题：我们什么时候词干或词形还原？词干提取是否对所有 nlp 过程都有帮助，或者是否存在使用完整形式的单词可能会提高准确性或精度的应用程序？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-25T15:49:12.700

在基于机器学习的 NLP 环境中，词干提取使您的训练数据更加密集。它将字典的大小（语料库中使用的单词数量）减少了两倍或三倍（对于像法语这样具有许多变化的语言，例如在动词的情况下，单个词干可以生成几十个单词）。

拥有相同的语料库，但输入维度更少，ML 会更好地工作。回忆应该真的更好。

不利的一面是，如果在某些情况下，实际单词（而不是其词干）有所不同，那么您的系统将无法利用它。所以你可能会失去一些精度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T21:05:58.093

> 我们什么时候词干或词形还原？

词干提取是一种有用的单词“标准化”技术。考虑作为搜索文档语料库的示例。更具体地说，我们可能会准备一堆文档，以便在某种搜索索引中进行搜索。在创建搜索索引时，我们采用相似的术语并将它们作为词根词干，以便对其他形式的词的搜索与我们的文档相匹配。

考虑，对于 e 下列术语

*   索引器
*   索引
*   可转位

假设我们将这些中的每一个都转换为`index`搜索索引中的术语。每当我们遇到其中之一时，我们将使用根形式“索引”而不是文档中存在的单词。

同样，我们在运行搜索查询之前执行相同的步骤，例如`database indexing`.

查询将被转换为`database index`，匹配所有具有任何形式的“索引”的文档，最喜欢增加我们搜索结果的相关性。

在全文搜索中，在执行短语搜索时保留词干很有用，我们可能会拼出语法正确的短语。就像确切的短语一样`"Doug likes indexing databases"`。在这种情况下，我们希望全文搜索中的完整“索引”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-25T19:32:24.233

词干对于各种任务非常有用。例如，如果您正在处理文档相似性，则对数据进行规范化要好得多。删除所有格，停用词，小写所有内容，去除标点符号和单反。另一个建议是对单词进行排序。这对于二元组来说并没有那么糟糕，但对于更大的项来说可能看起来很奇怪。

```
Stack Exchange's
stack exchange
STACK EXCHANGE
Exchange, Stack
Stack Exchange (WEB)
StAcK Exchanges 
```

为了进一步计算，所有这些都应该标准化为“交换堆栈”。

# linux - 如何在 64 位主机上以 32 位模式构建 UML（用户模式 linux）

> ID：14510619
> 
> 赞同：1
> 
> 时间：2013-01-24T20:57:52.550
> 
> 标签：linux, kernel

我正在尝试在 64 位 linux 主机上构建 32 位 UML（用户模式 ​​Linux）内核。我怎样才能做到这一点？

我能够构建 64 位 UML 内核，如下所示：

```
make defconfig ARCH=um
make ARCH=um 
```

UML 内核源代码树是 linux 2.6.27。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T03:29:42.400

尝试使用`ARCH=um SUBARCH=i386`

# java - 如何让 Java 线程通知自己？

> ID：14510620
> 
> 赞同：2
> 
> 时间：2013-01-24T20:57:52.917
> 
> 标签：java, multithreading

我有一个处理队列中操作的线程。基本上，永远循环。如果队列中有操作，则将操作出列并执行。如果没有操作，请等到您被告知有操作。

在伪代码中（暂时忽略关键部分）：

```
public class OperationHandler extends Thread {
    private Deque<Operation> queue = new LinkedList<>();
    public void run() {
        while (true) {
            if (queue isn't empty) {
                 dequeue the operation and execute it
            }
            else {
                wait;
            }
        }
    }

    public void operationRequired() {
        add operation to queue
        notify yourself / return to infinite while loop
    }
} 
```

基本上，一个 Controller 类初始化 this`OperationHandler`并`start()`s 它。每当一些请求到达时，控制器就会调用`operationRequired`线程，以便在无限`while`循环中异步处理操作。有什么办法可以做到这一点？

我试过了`this.wait()`，`this.notify()`但我要么死锁，要么`IllegalMonitorStateException`取决于不同的同步块。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T21:00:44.540

> 如何让 Java 线程通知自己？

您无法让 Thread 通知自己，因为它被阻止在`wait()`. 您*可以*让另一个线程通过在线程锁定并调用的同一对象上同步来通知该线程`notify()`。请参阅下面的代码以获取示例。

也就是说，我建议`BlockingQueue`在这方面使用 a 来共享数据。它负责所有的锁定和信令。线程所做的只是调用`take()`，它将等待下一个操作被添加到队列中`put()`。

最后，始终建议实施`Runnable`而不是扩展`Thread`. 一旦你把你的线程变成一个可运行的，你就可以使用`ExecutorService`@Peter在他的回答中提到的类。使用`ExecutorService`您的代码将如下所示：

```
 public class OperationHandler implements Runnable {
     public void run() {
        // no looping or dequeuing needed
        // just execute the job
     }
 }

 // create a thread pool with a single thread worker
 ExecutorService threadPool = Executors.newSingleThreadExecutor();
 // or create a thread pool with 10 workers
 // ExecutorService threadPool = Executors.newFixedThreadPool(10);
 // or you can create an open-ended thread pool
 // ExecutorService threadPool = Executors.newCachedThreadPool();
 ...
 // do this once or many times
 threadPool.submit(new OperationHandler());
 ... 
```

但是，如果您仍想调整代码以使其正常工作：

```
 private final Object lockObject = new Object();
  public void run() {
     synchronized (lockObject) {
        ...
        lockObject.wait();
     }
  }

  // called by another thread
  public void operationRequired() {
     synchronized (lockObject) {
        ...
        lockObject.notify();
     }
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T21:01:20.187

如果在没有线程等待（）时通知（），它将被忽略。即，线程通知自己是没有意义的，因为它不能同时等待和通知。

如果你有一个队列和线程，你可能应该使用一个包装两者的 ExecutorService。顺便说一句，它使用 BlockingQueue

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T21:02:11.277

如果您的`operationRequired`方法正在等待，则不能使用同一线程调用它。尽管它在同一个线程类中，但很可能会与另一个线程一起执行。

所以使用正常同步：首先进入监视器，`synchronized`然后等待或通知。另一种选择是使用队列形式`java.util.concurrent.*`。他们在内部支持这些东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T10:07:11.170

美国 a`BlockingQueue`及其`take()`操作。它已经嵌入了等待和通知。

# python - WTForms 创建自定义小部件

> ID：14510630
> 
> 赞同：10
> 
> 时间：2013-01-24T20:58:14.077
> 
> 标签：python, flask, wtforms, flask-wtforms

WTForms 文档严重不足，它们甚至没有向您展示一个尚未从另一个小部件派生的自定义小部件的示例。

我正在尝试制作一个按钮类型，这不是`<input>`html 中的：

```
submit = InlineButton(name='submit', type='submit', title='Save this page', textWithinSpan='Save') 
```

这就是我正在尝试的：

```
from flask.ext.wtf import Required, Length, EqualTo, Field, TextInput, html_params
from flask import Markup

class InlineButtonWidget(object):
  text = ''
  html_params = staticmethod(html_params)

  def __init__(self, input_type='submit', **kwargs):
    self.input_type = input_type

  def __call__(self, field, **kwargs):
    kwargs.setdefault('id', field.id)
    kwargs.setdefault('type', self.input_type)
    if 'value' not in kwargs:
        kwargs['value'] = field._value()
    return Markup('<button type="submit" %s><span>%s</span></button>' % (self.html_params(name=field.name, **kwargs), kwargs['textWithinSpan']))

class InlineButton(Field):
  widget = InlineButtonWidget()

  def __init__(self, label='', **kwargs):
    self.widget = InlineButtonWidget('submit', label)
  def __call__(self, **kwargs):
    return self.widget(self, **kwargs)
  def _value(self):
    if self.data:
        return u', '.join(self.data)
    else:
        return u''

class SignupForm(Form):
    name = TextField('Name', [Length(min=1, max=200)])
    submit = InlineButton(name='submit', type='submit', title='Save this page', textWithinSpan='Save') 
```

我什至不需要 Field 派生对象。但是当你只单独使用 Widget 时它不会显示。

当你使用 Field 对象时，它会给你各种无效参数错误。

即使深入研究 WTForms 源代码，也很难理解为什么它不会将 Kwargs 从表单传递到小部件。

**- - 更新 - -**

好的，在我提交问题后，我基本上想出了一个可行的解决方案：

```
class InlineButtonWidget(object):
    html_params = staticmethod(html_params)

    def __init__(self, input_type='submit', text=''):
        self.input_type = input_type
        self.text = text

    def __call__(self, field, **kwargs):
        kwargs.setdefault('id', field.id)
        kwargs.setdefault('type', self.input_type)
        if 'value' not in kwargs:
            kwargs['value'] = field._value()
        return Markup('<button type="submit" %s><span>%s</span></button>' % (self.html_params(name=field.name, **kwargs), field.text))

class InlineButton(Field):
  widget = InlineButtonWidget()

  def __init__(self, label=None, validators=None, text='Save', **kwargs):
    super(InlineButton, self).__init__(label, validators, **kwargs)
    self.text = text

  def _value(self):
        if self.data:
            return u''.join(self.data)
        else:
            return u''

class SignupForm(Form):
    name = TextField('Name', [Length(min=1, max=200)])
    submit = InlineButton('submit', text='Save', description='Save this') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T21:35:27.633

在更新下回答，但在字段派生类中需要这个初始化。

```
def __init__(self, label=None, validators=None, text='Save', **kwargs):
    super(InlineButton, self).__init__(label, validators, **kwargs)
    self.text = text 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-07T07:24:34.403

您可以利用该字段上的有用属性，即此实例的“描述”和“标签”。这产生了一个更简单的设置：

```
from wtforms.widgets.core import HTMLString, html_params, escape

class InlineButtonWidget(object):
    def __call__(self, field, **kwargs):
        kwargs.setdefault('type', 'submit')
        # Allow passing title= or alternately use field.description
        title = kwargs.pop('title', field.description or '')
        params = html_params(title=title, **kwargs)

        html = '<button %s><span>%s</span></button>'
        return HTMLString(html % (params, escape(field.label.text))) 
```

用法：（为可读性包装）

```
class MyForm(Form):
    foo = BooleanField(
        u'Save',
        description='Click here to save',
        widget=InlineButtonWidget()
    ) 
```

或者，为其设置字段类型：

```
class InlineButtonField(BooleanField):
    widget = InlineButtonWidget()

class MyForm(Form):
    foo = InlineButtonField('Save', description='Save Me') 
```

# jquery - 如何使用 jquery 删除子元素和空格？

> ID：14510631
> 
> 赞同：2
> 
> 时间：2013-01-24T20:58:17.407
> 
> 标签：jquery, dom-manipulation

如何使用 jquery 删除子元素和空格？

我有以下内容：

```
<div class="sectionA"> <p>sfadfafdafdafdaf</p>  </div> 
```

如果我做：

```
$(".sectionA *").remove(); 
```

我明白了：

```
<div class="sectionA">   </div> 
```

`<p>`删除子元素后如何删除空格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T21:01:38.297

您需要的是该[`.empty()`](http://api.jquery.com/empty/)方法，该方法可以执行您所描述的操作：

> 此方法不仅删除子（和其他后代）元素，还删除匹配元素集中的任何文本。这是因为，根据 DOM 规范，元素中的任何文本字符串都被视为该元素的子节点。

例子：

```
 $(".sectionA").empty(); 
```

[jsFiddle 演示](http://jsfiddle.net/LF3j7/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T21:00:53.523

在其中放置一个空字符串：

```
 $(".sectionA").html(''); 
```

# android - 在android中拨打号码时启动应用程序

> ID：14510632
> 
> 赞同：4
> 
> 时间：2013-01-24T20:58:19.100
> 
> 标签：android

这里正在执行一项任务，当我通过拨号器拨打特定号码（如 123）然后打开一个新活动，如果拨打另一个号码，那么它将拨打电话。在拨号 123 上要求拨打电话或打开应用程序。因此，请向我提供有关此的信息，我该如何执行此操作。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T04:30:30.217

您需要创建一个广播接收器。在清单中

```
 <receiver android:name=".yourReceiver">
        <intent-filter android:priority="10">
            <action android:name="android.intent.action.NEW_OUTGOING_CALL"></action>
        </intent-filter>
    </receiver> 
```

在代码中

```
 public class yourReceiverextends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent) {
            //startyour activity
        }
    } 
```

不要忘记使用权限

```
android.permission.PROCESS_OUTGOING_CALLS 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T00:25:55.607

这段代码是真的，但在 AndroidManifest 中：

```
<receiver android:name=".CallReceiver"> 
    <intent-filter android:priority="10">
        <action android:name="android.intent.action.NEW_OUTGOING_CALL"></action>
    </intent-filter>
</receiver> 
```

* * *

然后在 CallReceiver 中扩展 BroadcastReceive：

```
public class PhoneCallReceive extends BroadcastReceiver {

private static final String TAG = "VahidTAG";

@Override
public void onReceive(Context context, Intent intent) {
        Log.v(TAG, "in Calling");
} 
```

# python - 在 Python 中一次打开一个文件是否安全？

> ID：14510634
> 
> 赞同：23
> 
> 时间：2013-01-24T20:58:30.533
> 
> 标签：python, file, seek

我似乎记得在程序中多次打开文件可能会导致共享查找指针的低级语言的情况。通过在 Python 中搞乱一点，这对我来说似乎没有发生：

```
$ cat file.txt
first line!
second
third
fourth
and fifth 
```

```
>>> f1 = open('file.txt')
>>> f2 = open('file.txt')
>>> f1.readline()
'first line!\n'
>>> f2.read()
'first line!\nsecond\nthird\nfourth\nand fifth\n'
>>> f1.readline()
'second\n'
>>> f2.read()
''
>>> f2.seek(0)
>>> f1.readline()
'third\n' 
```

这种行为是否安全？我很难找到一个说没关系的消息来源，如果我能依赖这个，那会很有帮助。

我没有将位置视为文件对象的属性，否则我对此更有信心。我知道它可以在迭代器内部保存，但不知道 .tell() 在这种情况下如何得到它。

```
>>> dir(f1)
['__class__', '__delattr__', '__doc__', '__getattribute__', '__hash__',
 '__init__', '__iter__', '__new__', '__reduce__', '__reduce_ex__', '__repr__',
 '__setattr__', '__str__', 'close', 'closed', 'encoding', 'fileno', 'flush',
 'isatty', 'mode', 'name', 'newlines', 'next', 'read', 'readinto', 'readline',
 'readlines', 'seek', 'softspace', 'tell', 'truncate', 'write', 'writelines',
 'xreadlines'] 
```

* * *

**更新在**[Python Essential Reference](https://rads.stackoverflow.com/amzn/click/com/0672329786)
的第 161 页上，它指出

> 同一个文件可以在同一个程序（或不同程序）中多次打开。打开文件的每个实例都有自己的文件指针，可以独立操作。

所以它实际上似乎是安全的、明确的行为

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-24T21:01:23.727

在现代操作系统上（1969 年后的类 UNIX 操作系统，或 2000 年后的 Windows，可能在此之前，但我将 Win2K 视为第一个“现代”Windows），打开文件的每个实例（文件描述符）有自己的查找指针。Python 的类中没有魔法`file`可以导致实例共享状态；`file`是一个普通C文件句柄的包装器，它本身封装了一个OS文件描述符，以及对应的C函数的实现`file.tell()`和调用。（有关混乱的细节，请参阅 CPython 的。）C 库行为和底层操作系统的行为之间可能存在差异，但在这种特殊情况下，这不是一个因素。`file.seek()``stdio`[`fileobject.c`](http://svn.python.org/view/python/trunk/Objects/fileobject.c?view=markup)

如果您使用 IronPython 或 Jython，它将使用标准 .Net 或 Java 文件对象作为其底层实现，而后者又将使用标准 C 库或 OS 实现。

所以你的方法很好，除非你以某种方式在一些具有奇怪 I/O 行为的非标准操作系统上运行 Python。

如果不及时刷新，可能会在写的时候得到意想不到的结果；数据在实际到达磁盘之前可能会在内存中停留一段时间，并且可供您在同一文件上打开的其他文件描述符使用。正如 abarnert 在评论中指出的那样，这无论如何都是有问题的，除非在非常简单的情况下。

# twitter - twitter4j 无法识别 setRpp 或 Tweet 类

> ID：14510641
> 
> 赞同：1
> 
> 时间：2013-01-24T20:59:01.220
> 
> 标签：twitter, processing, twitter4j

我正在尝试使用 twitter4J 通过处理设置 twitter 搜索。我有最新版本的处理 (2.0) 和最新版本的 twitter4j (3.0.3)。我在运行下面粘贴的代码时遇到错误（除了我 xxx'ed out twitter 特定字符串）：“函数 setRpp(int) 不存在”

我在处理论坛中找到了类似的查询：[https ://forum.processing.org/topic/twitter4j-for-a-noob](https://forum.processing.org/topic/twitter4j-for-a-noob)

该线程的建议是：尝试找出 twitter4J 以及遇到类似的错误。

你可以切换到 twitter4J 的早期版本——v2.2.5——或者你必须弄清楚从 twitter4j 2.xx 到 3.xx 所做的更改

尝试将“setRpp(1)”更改为“count(1)”。

“推文”也可能不起作用——您可以尝试将其更改为“状态”。

* * *

当我切换 setRpp > count 和 Tweet > Status 时，处理似乎找不到函数，“getFromUser”错误：函数 getFromUser() 不存在

我假设 getFromUser 是 Tweet 类的一个函数，并且因为我将类从 Tweet 更改为 Status，处理无法再找到该函数。

有没有其他人遇到过这些问题？请告诉我，谢谢！

一个

我的代码：

```
/*

Just a simple Processing and Twitter thingy majiggy

RobotGrrl.com

Code licensed under:
CC-BY

*/

// First step is to register your Twitter application at dev.twitter.com
// Once registered, you will have the info for the OAuth tokens
// You can get the Access token info by clicking on the button on the
// right on your twitter app's page
// Good luck, and have fun!

// This is where you enter your Oauth info
static String OAuthConsumerKey = "xxx";
static String OAuthConsumerSecret = "xxx";

// This is where you enter your Access Token info
static String AccessToken = "xxx";
static String AccessTokenSecret = "xxxx;

// Just some random variables kicking around
String myTimeline;
java.util.List statuses = null;
User[] friends;
Twitter twitter = new TwitterFactory().getInstance();
RequestToken requestToken;
String[] theSearchTweets = new String[11];

void setup() {

  size(100,100);
  background(0);

  connectTwitter();
  sendTweet("Hey from Simple Processing woop woop #RobotGrrl");

}

void draw() {

  background(0);

}

// Initial connection
void connectTwitter() {

  twitter.setOAuthConsumer(OAuthConsumerKey, OAuthConsumerSecret);
  AccessToken accessToken = loadAccessToken();
  twitter.setOAuthAccessToken(accessToken);

}

// Sending a tweet
void sendTweet(String t) {

  try {
    Status status = twitter.updateStatus(t);
    println("Successfully updated the status to [" + status.getText() + "].");
  } catch(TwitterException e) { 
    println("Send tweet: " + e + " Status code: " + e.getStatusCode());
  }

}

// Loading up the access token
private static AccessToken loadAccessToken(){
  return new AccessToken(AccessToken, AccessTokenSecret);
}

// Get your tweets
void getTimeline() {

  try {
    statuses = twitter.getUserTimeline(); 
  } catch(TwitterException e) { 
    println("Get timeline: " + e + " Status code: " + e.getStatusCode());
  }

  for(int i=0; i<statuses.size(); i++) {
    Status status = (Status)statuses.get(i);
    println(status.getUser().getName() + ": " + status.getText());
  }

}

// Search for tweets
void getSearchTweets() {

  String queryStr = "@RobotGrrl";

  try {
    Query query = new Query(queryStr);    
    query.setRpp(10); // Get 10 of the 100 search results  
    QueryResult result = twitter.search(query);    
    ArrayList tweets = (ArrayList) result.getTweets();    

    for (int i=0; i<tweets.size(); i++) {   
      Tweet t = (Tweet)tweets.get(i);   
      String user = t.getFromUser();
      String msg = t.getText();
      Date d = t.getCreatedAt();    
      theSearchTweets[i] = msg.substring(queryStr.length()+1);

      println(theSearchTweets[i]);
    }

  } catch (TwitterException e) {    
    println("Search tweets: " + e);  
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-08T03:18:31.433

听起来你有新的 twitter4j 库。没问题，我使用的是 3.0.3 的 twitter4j，看起来情况有所改变。这就是我的工作：

```
TwitterFactory twitterFactory; 
```

一个新的公共 TwitterFactory twitterFactory，在 connectTwitter() 中，我基本上交换了你所拥有的东西。

```
ConfigurationBuilder cb = new ConfigurationBuilder();
cb.setOAuthConsumerKey(OAuthConsumerKey);
cb.setOAuthConsumerSecret(OAuthConsumerSecret);
cb.setOAuthAccessToken(AccessToken);
cb.setOAuthAccessTokenSecret(AccessTokenSecret);
twitterFactory = new TwitterFactory(cb.build());
twitter = twitterFactory.getInstance(); 
```

创建我的 Twitter`twitter`对象。我很确定这就是我所做的全部更改，但如果我错过了什么，这里有一个要点[https://gist.github.com/loadedsith/5113946](https://gist.github.com/loadedsith/5113946)

你的标题做得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:54:38.270

我也遇到了这个问题，getFromeUser() 不再是 Status 方法。现在您需要创建一个 User 类，然后使用 getName() 获取其名称。我确实喜欢这样：

```
Status t=(Status) tweets.get(i);
User u=(User) t.getUser();
String user=u.getName(); 
```

我希望这对你有所帮助。

H。

# php - 与 SecureNet 支付网关集成

> ID：14510644
> 
> 赞同：7
> 
> 时间：2013-01-24T20:59:12.080
> 
> 标签：php, wcf, soap, wsdl, soap-client

我正在尝试将我们的软件与 SecureNet 网关集成。他们有一个基于 SOAP 的 API。

我遇到的问题是他们的 WSDL 文件确实不适用于 PHP。具体来说，他们的 WSDL 文件使用语句拆分为多个文件，`wsdl:import`导入位置为`http`. 在他们的测试服务器上`http`，`https`端口是开放的，所以 PHP 可以读取 WSDL 文件。在他们的生产服务器上只`https`打开，但他们的位置块仍然引用`http`，所以 PHP 超时！如果是这样，`https`它会工作得很好。

他们的建议是从他们的测试服务器中提取 WSDL 文件，但覆盖该位置。他们告诉我他们的测试服务器应该始终处于启动状态，但我觉得依靠两个系统来让我们的交易正常工作并不自在。

另一种选择是使用他们的 XML post API ......但问题是您必须以正确的顺序指定每个字段（需要或不需要）。最糟糕的是这个 API 的错误消息是简单`Unknown Error.`的，所以几乎不可能弄清楚我错过了什么。

我需要第三种选择。如果我可以加载 WSDL 文件（可以在测试中，而不是在生产中），那么肥皂效果很好。我认为他们正在使用 WCF，我相信这是 .NET 的东西。应该有一个“?simpleWSDL”和“?wsdl”选项，但在他们的 WCF 版本上没有它。

这是他们的 WSDL 文件（测试服务器）：[https ://certify.securenet.com/API/Gateway.svc?wsdl](https://certify.securenet.com/API/Gateway.svc?wsdl)

**编辑：**

这是可重现的代码：

```
$client = new SoapClient("https://gateway.securenet.com/API/Gateway.svc?wsdl");
// Hangs and throws exception in construct 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T09:14:51.753

这听起来更像是远程 WSDL 文件中的错误，类似于通过 SSL 访问包含非 SSL 资产的网站会导致警告。

幸运的是，看起来我们可以解决它。[SoapClient 手册页](http://www.php.net/manual/en/class.soapclient.php#102839)有一个类似的端口号解决方法，由用户 jjlopez 发布。

解决方法是扩展基础 SoapClient 类以重写它将向其发出请求的 URL，如下所示：

```
class SecureSoapClient extends \SoapClient
{
    protected $_scheme;

    public function __construct($wsdl, $options)
    {
        $this->_scheme =  parse_url($wsdl, PHP_URL_SCHEME);
        return parent::__construct($wsdl, $options);
    }

    public function __doRequest($request, $location, $action, $version, $one_way = 0) {
        $currentScheme = parse_url($location, PHP_URL_SCHEME);
        $location = preg_replace('^' . $currentScheme, $this->_scheme, $location);
        return parent::__doRequest($request, $location, $action, $version, $one_way);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T09:24:59.040

您可以从生产服务器中提取 WSDL 并使用[SoapClient::__setLocation以编程方式覆盖该位置](http://php.net/manual/en/soapclient.setlocation.php)

# flash - 如何配置/使用 Flash player 调试版本

> ID：14510645
> 
> 赞同：0
> 
> 时间：2013-01-24T20:59:13.403
> 
> 标签：flash, debugging

我已经从 Adob​​e Flash 站点安装了 Flash 11（最新）activex 插件调试版本（我使用 IE 在 Windows 7 上启动内容）。我正在尝试查看是否可以确定导致 3rd 方 Flash 文件正常工作的原因。

但是，我似乎找不到任何关于如何实际使用或配置此版本的调试器的文档。我已经浏览了整个 Flash 网站，但也许我是盲人。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:01:18.673

您只需访问该站点并查看需要调试的内容。如果您正在查看的 Flash 电影产生任何错误，则会弹出错误控制台。基本上调试版本只是替换浏览器中的正常版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T16:24:21.327

“所以没有配置选项，也没有办法手动启动调试器？”

第二个问题首先：“调试器”是“Flash Player 调试版本” - 当您安装它时，您已经安装了调试器。

对其进行配置，使其应在日志文件中显示代码吐出的跟踪。“keeg”提供的评论告诉了信息在哪里（这里又是）：
[http ://helpx.adobe.com/flash-player/kb/configure-debugger-version-flash-player.html](http://helpx.adobe.com/flash-player/kb/configure-debugger-version-flash-player.html)

或在这里：（它们几乎相同）
[http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7ed6.html](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7ed6.html)

mm.cfg 内容应该是这样的文本文件：

```
 ErrorReportingEnable=1
 TraceOutputFileEnable=1 
```

# asp.net-mvc - ASP MVC3 链接到另一个视图/控制器？

> ID：14510653
> 
> 赞同：1
> 
> 时间：2013-01-24T20:59:36.380
> 
> 标签：asp.net-mvc, asp.net-mvc-3

创建从一个控制器视图导航到另一个控制器视图的链接的语法是什么？以下是应该允许用户从视图导航到`Index.cshtml`视图的代码。我需要传递 的值，以便页面确切地知道要显示谁。`FollowUpItems``Details.cshtml``Agent``item.Key1``Details.cshtml`

我收到以下错误，但我不知道这意味着什么（我对任何缺乏信息表示歉意，我对 ASP MVC 还是很陌生）：

'参数字典包含'Monet.Controllers.FollowUpController'中方法'System.Web.Mvc.ViewResult Details（Int32）'的不可空类型'System.Int32'的参数'id'的空条目。可选参数必须是引用类型、可空类型或声明为可选参数。参数名称：参数'

```
 <td>
        @Html.ActionLink(item.Key1, "Details", "Agent", new { id = item.Key1 })
    </td> 
```

这是我试图导航到的页面的 Index() 方法标题：

```
 public ActionResult Index(string searchString, string sortOrder, string currentFilter, int? page)
    { 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T21:08:56.187

试试这个[重载](http://msdn.microsoft.com/en-us/library/dd504972%28v=vs.108%29.aspx)

```
@Html.ActionLink(item.Key1, "Details", "Agent", new { id = item.Key1 },null) 
```

第三个参数是路由值，第四个参数是 html 属性。如果你希望你的链接有一些 html 属性，你可以像这样删除带有一些 html 属性的 null

```
@Html.ActionLink(item.Key1, "Details", "Agent",
                           new { id = item.Key1 }, new { class="myCssClass}) 
```

[这](http://msdn.microsoft.com/en-us/library/system.web.mvc.html.linkextensions.actionlink%28v=vs.108%29.aspx)是所有可用重载的完整列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:06:43.690

只需删除 new{id=item.key1} 做一些类似的事情。

```
 @Html.ActionLink(item.Key1, "Details", "Agent"); 
```

或者您可以通过将 key1 的类型更改为 int 来做到这一点？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:55:49.677

我建议你使用[T4MVC](http://t4mvc.codeplex.com/)然后你可以使用这样的东西： `@Url.Action(MVC.MyCOntroller.MyMethod()`

希望这可以帮助。

# css - 使用 ::selection 更改文本突出显示的颜色会使文本混乱

> ID：14510656
> 
> 赞同：0
> 
> 时间：2013-01-24T20:59:40.443
> 
> 标签：css, colors, selection, highlighting

我一直发现我突出显示的文本在我建立的一些网站中混杂在一起。

这是一个示例 - 尝试突出显示此页面上的大标题以了解我的意思[http://revelation.org.uk](http://revelation.org.uk)

我已将其缩小到以下代码：

```
::-moz-selection    { background:#6c5ea6; color:#f7f7f7; text-shadow: none; }
::selection     { background:#6c5ea6; color:#f7f7f7; text-shadow: none; } 
```

当我删除`color:#f7f7f7;`它时，它会解决问题，但如果可以的话，我想使用这种颜色来突出显示文本。

有任何想法吗？

# joomla - 在 Joomla 2.5 中为文章添加附加图像

> ID：14510657
> 
> 赞同：0
> 
> 时间：2013-01-24T20:59:42.620
> 
> 标签：joomla, joomla2.5

我想在 Joomla 的一篇文章中包含多个图像，并在模板中决定在页面上显示它们的位置。

有没有办法增加您可以从默认的介绍图像和全文图像字段中获得的图像数量？

理想情况下，我想创建新的文章自定义字段，将类型设置为图像，然后这些新的图像自定义字段在文章创建屏幕中。Joomla 可以做到这一点吗？不幸的是，我是 Joomla 平台的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T09:42:07.917

您可以使用插件覆盖表单以添加字段，因为数据保存在 json 中，因此无需设置存储位置即可使用。然后做一个布局覆盖器来做定位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T12:05:05.167

您在没有文章的情况下添加多个图像您有该类型的一种方法添加图像您知道在 joomla 中的组件您需要首先创建自定义组件而不是在菜单中添加而不是添加多个图像而不是检查添加图像的位置`?tp=1` 添加 url最后的

# css - 垂直拉伸绝对定位的 div 到页面大小

> ID：14510661
> 
> 赞同：1
> 
> 时间：2013-01-24T20:59:53.617
> 
> 标签：css

我正在尝试将元素的内容用作页面背景。我可以让它在我的浏览器窗口的长度上正常工作，但是一旦内容滚动，div 就会停止。 [http://jsfiddle.net/MaxPRafferty/QXYDb/](http://jsfiddle.net/MaxPRafferty/QXYDb/)

html:

```
<html><head><title></title></head>
  <body>
    <div id="background"></div>
    <div id="content" style="height:900px;">Lorem Ipsum
      <br />...an arbitrary amount of content...</div>
  </body>
</html> 
```

CSS：

```
#content, #background {
  position:absolute;
  top:0; right:0; bottom:0; left: 0;
}
#content {
  z-index:2;
}
#background {
  background:red;
  z-index:1;
} 
```

我已经尝试过所有旧的仿柱技巧的变体，但这些技巧的问题是使用背景来掩盖不同的高度 - 在这种情况下，背景是有区别的。

我可以用 javascript 轻松做到这一点，但如果我能用纯 css 做到这一点，我会很高兴。我已经敲了几天，没有任何进展，所以谢谢你的想法。

编辑1：我希望背景与内容一起滚动，因为实际上背景将包含重复或可能大于视口的内容：http: [//jsfiddle.net/MaxPRafferty/gquHF/](http://jsfiddle.net/MaxPRafferty/gquHF/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:28:58.500

只需将背景固定而不是绝对定位：http: [//jsfiddle.net/QXYDb/4/](http://jsfiddle.net/QXYDb/4/)

CSS看起来像这样：

```
#background {
  position:fixed;
  top:0;
  right:0;
  bottom:0;
  left: 0;
}
#content {
  position:absolute;
  top:0;
  right:0;
  bottom:0;
  left: 0;
} 
```

这会导致背景始终保持在相对于视口的位置。

# php - 通过属性“name”获取 DomXPath 值

> ID：14510662
> 
> 赞同：0
> 
> 时间：2013-01-24T20:59:54.217
> 
> 标签：php, domdocument, html, domxpath

我正在尝试从[EDGAR](http://www.sec.gov/cgi-bin/browse-edgar)获取 CIK 代码。他们不给`id`他们的元素 s，但他们至少给了一个`name`.

在这种情况下，当有结果时，页面将有一个`hidden`with `name="CIK"`。

我在 a 中有页面，在 a`DOMDocument`中有页面`DomXPath`。我如何获得该字段的值？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:22:35.293

一旦您浏览文档就很简单。

`$CIK = $finder->query("//hidden[@name='CIK']");`

哦，不过我不会用那个。他们`html`不过是一团糟，到处都是错误。

* * *

改用[这个](https://stackoverflow.com/a/4920893/1382306)。

# asp.net-mvc-3 - MVC 3：从缓存中返回不可变对象

> ID：14510666
> 
> 赞同：0
> 
> 时间：2013-01-24T21:00:10.927
> 
> 标签：asp.net-mvc-3, c#-4.0, caching

我有一个调用外部 API 来获取数据的 MVC 3 应用程序。API 返回 XML，然后我将其序列化为对象。其中一些对象在一天中不会更改，因此我将它们缓存以减少开销。我的问题是，如果我从缓存中取出一个项目并对其进行操作，它也会更改缓存的值。我认为这是因为只返回对缓存项的引用。我正在使用 System.Web.HttpRuntime.Cache 来缓存对象。有没有办法将缓存中的项目作为不可变对象返回？或者轻松返回对象的克隆？我尝试将缓存的值反序列化回 XML，然后将其序列化为一个新对象，尽管这可行，但它增加了很多开销，并导致站点在负载下执行得很差。我可以为每个项目实现 ICloneable，但是随后我必须为我的每个类编写一个深度克隆方法，这将花费大量时间，并且可能会产生与序列化相同的开销问题。我想知道是否有更快的方法。

可以说我有一个缓存的人员列表。如果我这样做：

```
var people = Cache.Get<List<Person>>("people");
people.Remove(p => p.LastName != "Smith");
return View(people); 
```

这将从视图和缓存列表中删除姓氏不是 Smith 的所有人员。该项目的未来获取将只返回史密斯。

我可以通过这样做来解决这个问题：

```
var people = Cache.Get<List<Person>>("people");
var viewlist = people.Where(p => p.LastName == "Smith").ToList();
return View(viewlist); 
```

这不会影响缓存的值。显然，我可以在代码中的任何地方执行此操作，但考虑到我缓存的项目数量，我必须确保每次都执行此操作。如果我尝试编辑从缓存中获取的对象，如果我可以让代码抛出编译时（甚至是运行时）错误，那就更好了。

我的缓存方法：

```
static object lockobj = new object();
public static T Get<T>(string index) //where T : new()
{
    T data;
    lock (lockobj)
    {
        data = (T)_cache[index];
    }
    return data;
}

public static T CacheInsert<T>(T obj, string index, CacheDependency dependencies,
        DateTime absoluteExpiration, TimeSpan slidingExpiration,
        CacheItemPriority priority, CacheItemRemovedCallback callback)
{
    T data;
    lock (lockobj)
    {
        data = (T)_cache[index];
        if (data == null)
        {
            _cache.Insert(index, obj, dependencies, absoluteExpiration, slidingExpiration, priority, callback);
            data = obj;
        }
    }
    return data;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T05:48:58.460

这是因为您正在使用 List 集合类型。列表提供对当前集合的引用。如果您不想修改缓存集合，则必须复制您的集合并运行过滤器。或者从不允许修改当前集合的缓存中返回 ienumarable 并执行过滤器之类的必要操作。

如果你需要它的例子，请告诉我。

# css - 处理css html div 垂直和水平对齐

> ID：14510667
> 
> 赞同：2
> 
> 时间：2013-01-24T21:00:12.213
> 
> 标签：css, layout, html

我有这个布局：

```
<div id="container">
<div id="left">LEFT</div>
<div id="mtop">MIDTOP</div>
<div id="mbotton">MIDBOT</div>
<div id="right">RIGHT</div>
<div id="botton">BOTTON</div>
</div> 

#container {
    height:200px;
    width:300px;
    vertical-align:middle;
    display:table-cell;
    background-color:yellow;
}
#left {
    height:100px;
    color:white;
    background-color:blue;
    font-size:20px;
    width:100px;
}
#right {
    height:100px;
    color:white;
    background-color:red;
    font-size:20px;
    width:100px;
}
#botton {
    height:20px;
    display: block;
    vertical-align: botton color:white;
    background-color:green;
    font-size:20px;
    width:100%;
}
#mtop {
    height:50px;
    color:white;
    background-color:orange;
    font-size:20px;
    width:100px;
}
#mbotton {
    height:50px;
    color:white;
    background-color:pink;
    font-size:20px;
    width:100px;
}
#left, #right {
        display: inline-block;
        vertical-align: middle
    }
#mtop, #mbotton {
        display: inline-block;
        vertical-align: top
} 
```

[现场演示 jsFiddle](http://jsfiddle.net/berable/NNvMp/ "现场演示 jsFiddle")

但我需要这个布局

[布局](http://i.stack.imgur.com/F2XMm.png)

谢谢你帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:09:26.783

将您的中间 div 包裹在父 div 中，并给出左、中和右 div `float: left`，以便它们彼此相邻显示。

中间 div 的 CSS：

```
#middle {
  width: 100px;
  float: left;
} 
```

见[演示](http://jsfiddle.net/NNvMp/13/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T21:40:48.407

当您将 div 移到`#right`div 上方时`#mtop`，您只需要一个`float: left`用于`#left`div 和一个`float: right`用于`#right`div

HTML：

```
<div id="container">
    <div id="left">LEFT</div>
    <div id="right">RIGHT</div>
    <div id="mtop">MIDTOP</div>
    <div id="mbotton">MIDBOT</div>
    <div id="botton">BOTTON</div>
</div> 
```

CSS：

```
#left {
    float: left;
}
#right {
    float: right;
} 
```

您还应该删除所有这些`vertical-align`s 并更改

```
#container {
    height:200px;
    width:300px;
    vertical-align:bottom;
    display:table-cell;
    background-color:yellow;
} 
```

然后所有`div`s 将整齐地对齐在`#container`.

修改后[的 JSFiddle](http://jsfiddle.net/NNvMp/22/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T21:05:53.640

您应该创建一个`<div>`以同时包含`MIDTOP`和`MIDBOT`

更好的是，完全避免使用 Container`<div>`并使用`<table>`0 px 边框。

# soap-client - 在 python 中使用 suds 执行 SOAP 请求时出现异常

> ID：14510670
> 
> 赞同：0
> 
> 时间：2013-01-24T21:00:39.703
> 
> 标签：soap-client, python-2.6, suds

我正在访问我们的 jira 系统以通过 SOAP 获取一些信息。他们最近更新了 jira 系统，我开始看到一些问题。这个问题是众所周知的，但我无法理解发布的解决方案。

文件“C:\CRMAPPS\APPS\PYTHON~1\lib\xml\sax\handler.py”，第 38 行，在 fatalError 中引发异常 xml.sax._exceptions.SAXParseException::756:14: no element found

查询函数——JQLStr = """ project=%s and (summary ~ "\"%s"" OR description ~ "\"%s"" ) and key >= %s ORDER BY key ASC"""%(self .proj, buildID, buildID, ind)

问题 = self.client.service.getIssuesFromJqlSearch (self.auth, JQLStr, 500)

它可以通过我的快速而肮脏的修复正常工作，将 500 个结果更改为 1。问题 = self.client.service.getIssuesFromJqlSearch (self.auth , JQLStr , 1)

但最近它没有给我正确的号码票。我想知道是否需要更新 SUDS/Python 或向负责保持 Jira 正常运行的 IT 人员投诉。

我负责 10 多个报告脚本，由于上述 2 个原因，这些脚本目前在功能上出现故障或崩溃。在如此紧迫的日程安排下，我无法负担使用不同的 soap 客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:57:46.293

这可能不完全是泡沫问题。你能粘贴你的完整代码吗？

当您使用工具（可能是 SOAPUI）调用服务时，您是否验证了相同的服务调用返回结果？

# javascript - 在另一个函数中调用 javascript 函数时，它是否同步执行？

> ID：14510673
> 
> 赞同：1
> 
> 时间：2013-01-24T21:00:51.027
> 
> 标签：javascript

在以下代码中：

```
function doStuffA() {
 // DO SOME THINGS

 doStuffB();

 // DO SOME MORE THINGS
}
function doStuffB() {
// DO B THINGS
}
doStuffA(); 
```

代码执行的顺序是什么？

是吗：

```
1\. DO SOME THINGS
2\. DO B THINGS
3\. DO SOME MORE THINGS 
```

或者：

```
1\. DO SOME THINGS
2\. DO B THINGS & DO SOME MORE THINGS - AT THE SAME TIME 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T21:03:41.597

假设您打算打电话给`doStuffB`in `doStuffA`，并打电话给`doStuffA`某处......

Javascript 传统上是同步执行的。

所以：

```
1\. DO SOME THINGS
2\. DO B THINGS
3\. DO SOME MORE THINGS 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T21:58:24.230

关于您的语法有很多讨论，但我认为我可以很好地填补空白以理解您的要求。您想知道 JavaScript 是否按顺序执行；具体来说，如果函数调用将暂停调用函数的执行，直到被调用函数终止。

## 一般情况

对于一般情况，答案是肯定的。下面是一些示例代码来说明这一点：

```
var count = 0;
var result = "";

function a() {
    result += "first part of A. \n";    
    b();    
    result += "last part of A. ";
}

function b() {
    for (var i = 0; i < 100000; i++) {
        count++;
    }
    result += "even after " + count + " cycles, A waits for B. \n";
}

a();
console.log(result); 
```

jsFiddle 上的可运​​行版本：http: [//jsfiddle.net/jmorgan123/574Rh/](http://jsfiddle.net/jmorgan123/574Rh/)

试试看。你会看到结果是：

```
first part of A. 
even after 100000 cycles, A waits for B. 
last part of A. 
```

## 规则的例外

这也有例外，它们非常重要。当您设置间隔或超时时，程序会启动一个计时器并计划在计时器完成时运行一个函数。但它不会等待这种情况发生。一旦计时器启动，程序的其余部分将继续执行其他任务：

```
//won't do what you want:
result += "first part of A ";  
setInterval(b, 1000);
result += "last part of A "; 
```

在这种情况下，当`a()`完成运行时，`result`将是：

```
first part of A, last part of A 
```

事实上，这就是您将看到的全部内容，因为`console.log(result)`will run before`b()`确实如此。

JS 延迟执行的另一个重要案例是在 AJAX 调用中；这总是让人绊倒。这是这个错误的一个例子：

```
//also won't do what you want:
result += "first part of A ";
$.get('ajax/test.html', function(data) {
    result += "now with AJAX! "; 
});
result += "last part of A "; 
```

同样，结果将是运行`first part of A, last part of A`时`console.log(result)`。保证代码在 AJAX 调用*之后*运行的唯一方法是将其放入回调中：

```
var result = "";

function a() {
    result += "first part of A ";
    $.get('ajax/test.html', function(data) {
        result += "now with AJAX! "; 
        result += "last part of A ";
        console.log(result);
    });
}

a(); 
```

## `alert()`和`confirm()`

最后一点：有趣的是，函数`alert()`和`confirm()` **do**实际上是中断控制流。如果您的代码如下所示：

```
result += "first part of A, ";  
result += confirm("what is your choice?"); //let's assume you click 'OK' here
result += ", last part of A"; 
```

...结果将是`first part of A, true, last part of A`无论您等待多长时间单击“确定”。`confirm`并且`alert`是 JavaScript 在等待某些外部源时暂停执行的唯一情况（如果我错了，请纠正我）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-24T21:09:48.037

好吧，假设你想打电话`doStuffA()`...

```
 function doStuffA() {
     // DO SOME THINGS

     doStuffB();

     // DO SOME MORE THINGS
    }
    function doStuffB() {
    // DO B THINGS
    } 
```

以上将导致

```
1\. DO SOME THINGS
2\. DO B THINGS
3\. DO SOME MORE THINGS 
```

如果您想要异步方法，您将使用`setTimeout()`. 以下是一些文档：[https ://developer.mozilla.org/en-US/docs/DOM/window.setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)

IE

```
 function doStuffA() {
     // DO SOME THINGS

       setTimeout(doStuffB,1);

     // DO SOME MORE THINGS
    }
    function doStuffB() {
    // DO B THINGS
    } 
```

# java - ExecutorCompletionService 只在单个线程中运行，但 ExecutorService 使用所有 CPU

> ID：14510678
> 
> 赞同：3
> 
> 时间：2013-01-24T21:01:17.860
> 
> 标签：java, concurrency, threadpool, executorservice

我有一堆`Callable`s 我想并行运行并获得结果。我的机器上有 12 个内核；以下代码在 100% CPU 使用率下按预期工作：

```
exec = Executors.newFixedThreadPool(maxThreads);
for(Callable<T> job : jobs) exec.submit(job);
// System runs at 100% CPU. 
```

但是，这种情况并不理想，因为我想在任务返回时对其结果进行处理。因此，我将 s 包装`ExecutorService`在 a中，当它们完成`CompletionService`时将它们排队：`Future`

```
exec = Executors.newFixedThreadPool(maxThreads);
ecs = new ExecutorCompletionService<T>(exec);
for(Callable<T> job : jobs) ecs.submit(job);
// System runs threads one at a time. 
```

现在我的代码运行速度慢了 12 倍。检查底层代码后，我看到`ExecutorCompletionService`调用`execute()`了`ExecutorService`而不是`submit()`，但我不明白这将如何导致它表现出奇怪的行为。

关于可能导致这种情况的任何想法？

**编辑：这里没有区别。速度变慢是由于在进行此更改的同时对代码的不同部分进行了更改，并且两者之间存在混淆。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:10:34.847

`execute(...)`应该执行相同的`submit(...)`。唯一的区别是`submit(...)`返回一个`Future`. `ExecutorCompletionService`不需要未来，因为它将提交的任务包装在自己的内部`Runnable`。

性能更改必须针对其他一些更改。`BlockingQueue`我知道您向我们展示了 ECS 构造函数，但只是为了确保您没有传入`ExecutorCompletionService`右边界？使用有界队列将阻止线程完成并移动到下一个作业，直到作业出队。

我们可以看到更多的代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:10:26.797

使用 ExecutorService，你能收集到 submit 和 get() 返回的 Futures 结果吗？

# windows - 批处理脚本未将变量设置为值

> ID：14510682
> 
> 赞同：0
> 
> 时间：2013-01-24T21:01:27.080
> 
> 标签：windows, batch-file

我输入了这个，它根本不起作用

```
set ifpath=C:\Program Files\App

if exist %ifpath% SET ppath=C:\Program Files ELSE SET ppath=C:\Program Files(x86)

echo "%ppath%\App" 
```

很简单，但我花了几个小时试图让脚本正常工作。回显时它一直缺少ppath。如果我删除条件并简单地将 ppath 设置为路径，它会显示。

目标是检测 Program Files(x86) 是否存在，如果存在则安装在那里，否则只是 Program Files。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:41:26.607

你有2个问题。

1）`%ifpath%`必须引用你的，因为它包含空格。没有引号， IF EXIST 认为名称停止第一个空格。

2) 批处理解析器不知道 SET 命令的值何时结束。它将 ELSE 子句视为值的一部分。这很容易用括号解决。

```
set "ifpath=C:\Program Files\App"
if exist "%ifpath%" (SET ppath=C:\Program Files) ELSE SET ppath=C:\Program Files(x86)
echo "%ppath%\App" 
```

让我们假设您颠倒了测试并从`(x86)`版本开始。简单地添加括号并不能解决问题，因为解析器会认为该值以`(x86)`. 这可以通过转义来解决：

```
set "ifpath=C:\Program Files(x86)\App"
if exist "%ifpath%" (SET ppath=C:\Program Files(x86^)) ELSE SET ppath=C:\Program Files
echo "%ppath%\App" 
```

或者更好的方法是使用引号：

```
set "ifpath=C:\Program Files(x86)\App"
if exist "%ifpath%" (SET "ppath=C:\Program Files(x86)") ELSE SET "ppath=C:\Program Files"
echo "%ppath%\App" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:19:12.940

你可以这样做：

```
if exist "%ifpath%" ( call :PF ) else ( call :PFx86 )
:PF
set "ppath=c:\Program Files"
goto :EOF
:PFx86
set "ppath=c:\Program Files(x86)"
goto :EOF 
```

有时`call`，当我的模糊范围`if`和`for`困惑时，我会做这样的陈述。我承认这很老套和浪费，但它非常适合给你的生活贴上创可贴并继续前进。:)

# ios - 特定价格层的本地 AppStore 货币作为变量？

> ID：14510684
> 
> 赞同：2
> 
> 时间：2013-01-24T21:01:44.273
> 
> 标签：ios, cocoa-touch, localization, app-store, currency

我正在尝试为我们自己在 appstore 中的其他应用之一创建自定义“广告”。一切都运行良好，但在我们现在正在编写的广告中，`NSLog(@"For only $0.99");` 如何根据本地“登录”应用商店将此变量设为变量？我想它应该看起来像这样：

```
NSString *price = [something localPriceForTier:1];
NSLog(@"For only %@", price); 
```

它会根据我发送的价格等级为 1 来说明用户所在的货币和价值是什么。我想我以前见过这样的应用程序，但我不知道要搜索什么.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:29:21.687

据我所知，Store Kit 没有任何要求通用价格等级的功能。您必须询问您的一种产品的当前当地价格。这是一些代码：

```
- (void) requestProductData
{
    SKProductsRequest *request= [[SKProductsRequest alloc] initWithProductIdentifiers:
            [NSSet setWithObject: yourProductIdentifier]];
    request.delegate = self;
    [request start];
} 
```

回调函数：

```
- (void)productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response
{
    NSArray *myProducts = response.products;
    SKProduct *product = [myProducts objectAtIndex:0];
    NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
    [numberFormatter setFormatterBehavior:NSNumberFormatterBehavior10_4];
    [numberFormatter setNumberStyle:NSNumberFormatterCurrencyStyle];
    [numberFormatter setLocale:product.priceLocale];
    NSString *formattedString = [numberFormatter stringFromNumber:product.price];

    NSLog(@"For only %@", formattedString);
} 
```

The above snippets are explained in detail in the official In-App Purchase Programming Guide: [http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008267](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008267)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:25:37.220

该信息不会保存在设备上，如果需要，您必须获取它。因此，您要做的是[`SKProductsRequest`](http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKProductsRequest/Reference/Reference.html#//apple_ref/doc/uid/TP40008417)使用适当的产品标识符（您可以从 iTunes Connect 获得）创建一个，等到您的代表获得合适的产品标识符，您可以从中获得适当的产品标识符，您可以[`SKProductsResponse`](http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKProductsResponse/Reference/Reference.html#//apple_ref/doc/c_ref/SKProductsResponse)从那里[`SKProduct`](http://developer.apple.com/library/ios/#documentation/StoreKit/Reference/SKProduct_Reference/Reference/Reference.html#//apple_ref/occ/cl/SKProduct)使用`price`and`priceLocale`与数字格式化程序获取带有适当货币符号的本地价格字符串。文档中有一些示例代码`SKProduct`。

# javascript - 如何仅显示首次访问者特定的工具提示？

> ID：14510695
> 
> 赞同：1
> 
> 时间：2013-01-24T21:02:16.670
> 
> 标签：javascript, html, .htaccess, cookies

我只想让初次使用的用户“浏览”我的网站。我想用 JavaScript 做。我的意思是，如果用户从未看过我的网站并且这是他/她的第一次访问，他们将获得有关如何使用该网站的教程。如果他们再次访问或重新加载页面，他们不应该看到工具提示。这可以用 JavaScript Cookies 完成吗？我找到了一个 PHP 代码，但我现在想避免使用 PHP。

```
<?php
// Top of the page, before sending out ANY output to the page.
    $user_is_first_timer = !isset( $_COOKIE["FirstTimer"] );

// Set the cookie so that the message doesn't show again
    setcookie( "FirstTimer", 1, strtotime( '+1 year' ) );
?>

<H1>hi!</h1><br>

<!-- Put this anywhere on your page. -->
<?php if( $user_is_first_timer ): ?>
    Hello there! you're a first time user!.
<?php endif; ?> 
```

如果用JS做不到，可以用.htaccess做吗？我还发现了这个：

```
RewriteEngine on
RewriteCond %{HTTP_REFERER} ^(www\.)?(https?://)?(?!example\.com) [NC]
Rewriterule ^(.*)$ http://example.com/welcome.html [r=307,NC] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T21:06:00.260

当然，虽然我更喜欢使用`localStorage`来存储“用户之前访问过”信息，因为如果您设置了一个 cookie，那么该 cookie 将随每个发送到服务器。单身的。要求。制成。至。您的。服务器。

所以，试试这个：

```
if( !window.localStorage) {
    // no localStorage (old browser) - either fall back to cookie method,
    // or just do nothing and skip the whole tour thing - if the user
    // can't be bothered to upgrade, why should you bother to accomodate them?
}
else {
    if( !window.localStorage.isReturningVisitor) {
        // do all the tour stuff here
        window.localStorage.isReturningVisitor = true;
    }
} 
```

# c - 在程序集 x86 或 ARM 中引发 softirq

> ID：14510698
> 
> 赞同：0
> 
> 时间：2013-01-24T21:02:21.773
> 
> 标签：c, assembly, linux-kernel, x86, arm

我熟悉[x86上的](http://en.wikipedia.org/wiki/INT_%28x86_instruction%29)[说明`int`](http://en.wikipedia.org/wiki/INT_%28x86_instruction%29)。

1.  是否可以内联汇编`int my_unique_number`并与 执行指令时
    `requst_irq(my_unique_number , function);`要调用的函数一起使用？

2.  那么ARM有没有类似的方式来使用[`SWI immed_8`指令](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0068b/BABFCEEG.html)或[SVC](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.ddi0290g/ch02s08s13.html)？
3.  我可以做同样的把戏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:05:29.400

在 Linux 内核中，简单地在内核中实现自己的系统调用并使用`syscall(your_number)`函数调用它比自己编写汇编代码要简单得多。

这样做非常简单[http://www.linuxjournal.com/article/3326](http://www.linuxjournal.com/article/3326)这里有一篇文章的链接，该文章描述了如何做到这一点，用比我用的少得多的字眼。

# java - 3 个嵌套循环的大 O

> ID：14510701
> 
> 赞同：12
> 
> 时间：2013-01-24T21:02:32.323
> 
> 标签：java, loops, big-o, nested-loops

另一个大 O 表示法问题......以下代码的大 O 是什么：

```
 for (int i = n; i > 0; i = i / 2){
        for (int j = 0; j < n; j++){
           for (int k = 0; k < n; k++){
              count++;
           }
        }
     } 
```

我的想法：所以分解它，我认为外部循环是`O(log2(n))`，那么每个内部循环`O(n)`都会导致`O(n^2 * log2(n))` 问题 #1 是否正确？

问题 #2：当组合嵌套循环时，是否总是像将每个循环的 Big O 相乘一样简单？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-24T21:05:37.773

当循环计数器不相互依赖时，总是可以从内向外工作。

最里面的循环总是花费时间 O(n)，因为不管 j 和 i 的值如何，它都会循环 n 次。

当第二个循环运行时，它会运行 O(n) 次迭代，每次迭代都做 O(n) 次工作以运行最里面的循环。这需要时间 O(n ² )。

最后，当外循环运行时，它每次迭代都会做 O(n ^(2 ) 的工作。)它还运行 O(log n) 次迭代，因为它运行的次数等于在达到 1 之前必须将 n 除以 2 的次数。因此，总工作量为 O(n ² log n)。

通常，您不能只是将循环相乘，因为它们的边界可能相互依赖。但是，在这种情况下，由于没有依赖关系，因此运行时可以成倍增加。希望上述推理能够解释为什么会这样——这是因为如果你从内到外思考每个循环做了多少工作以及它做了多少次，运行时最终会成倍增加。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T21:05:24.453

1.  是的，这是正确的：外部循环是`logN`，另外两个是`N`每个，总共`O(N^2*LogN)`
2.  在简单的情况下，是的。在更复杂的情况下，当循环索引从其他索引指示的数字开始时，计算会更复杂。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-24T21:28:35.753

为了更正式地回答这个问题（注意：稍微），比如说`T(n)`完成算法所需的时间（或操作次数）。然后，对于外循环，`T(n) = log n*T2(n)`，其中`T2(n)`是循环*内*的操作数（忽略任何常数）。类似地，T2(n) = n*T3(n) = n*n。

然后，使用以下定理：

> 若f [1] (n) = O(g [1] (n))且f [2] (n) = O(g [2] (n))，则f [1] (n)×f [2] (n) = O(g [1] (n ) )×g [2] (n))
> [（来源和证明）](http://www.brpreiss.com/books/opus4/html/page60.html)

这给我们留下了 T(n) = O(n ² logn)。

“组合嵌套循环”只是这个定理的一个应用。问题在于准确计算每个循环使用了多少操作，在这种情况下这很简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-15T12:51:01.507

您可以使用 Sigma Notation 正式进行，以忠实地模仿您的循环：

![在此处输入图像描述](../Images/acc37124611c7ade6b99dccd858f9c89.png)

# c++ - 使用 ctypes 从 python 到 c++ 的数据传输

> ID：14510706
> 
> 赞同：1
> 
> 时间：2013-01-24T21:03:05.563
> 
> 标签：c++, python, numpy, ctypes

我有 c++ 库，其中的函数是从 python 端调用的。其中一个函数获取一个数组指针，该数组在 python 端具有 [0:255] 中的值并定义为

```
 seq1=numpy.array(image,dtype=numpy.uint8).flatten()
 seq=numpy.zeros((w*h*3),dtype=numpy.uint8) 
```

函数调用如下

```
myCppFunction(ctypes.c_void_p(seq.ctypes.data),
                     ctypes.c_void_p(seq1.ctypes.data), 
...) 
```

在 C++ 端，函数定义为

```
void myCppFunction(ushort *seq, ushort *sequence1, ...) 
```

当我简单地将在 C++ 端收到的内容打印为 seq、sequence1 时，我得到的值远高于无符号短范围，并且零序列没有用零填充。编译运行良好，但实际运行会导致分段错误。我哪里错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:13:13.523

`ushort`是 2 个字节，`numpy.uint8`是 1 个字节。

# c# - TransformToVisual 到同一窗口内不同可视树中的元素

> ID：14510707
> 
> 赞同：0
> 
> 时间：2013-01-24T21:03:12.850
> 
> 标签：c#, .net, wpf, drag-and-drop, transform

这与我正在实现的一些自定义拖放功能有关。

在我将 ContentPresenter 加入其中之前，一切都运行良好。

我有一个包含 ContentPresenter 的窗口。

这个 ContentPresenter 的内容绑定了动态弹出和弹出的不同用户控件。

我遇到的问题是我需要对 ContentPresenter 中包含的控件执行 TransformToVisual ，该控件相对于位于此 COntentPresenter 所在的主窗口之外的控件。

概括：

Window -> Canvas 称为 MyCanvas -> ContenPresenter（Content Presenter 包含一个名为 MyListView 的 ListView）

我想调用 MyListView.TransformToVisual(MyCanvas)。

这似乎是不允许的，因为我收到错误消息：“指定的 Visual 和此 Visual 不共享共同的祖先，因此两个 Visual 之间没有有效的转换。”

以下片段的注释： 1\. _targetBoundingBoxes 是一个 UIElements 列表，它应该接受拖动 2\. 当我拖动时，我在屏幕上移动了一个画布 (_canvasThatIsBeingDraggedAround)。3\. 当它移动时，我正在查询当前 MousePosition 是否落在任何 _dropTargets 内。

失败的代码片段：

```
 _targetBoundingBoxes.Clear();
  foreach (var item in _dropTargets)
  {
    GeneralTransform t = item.TransformToVisual(_canvasThatIsBeingDraggedAround);
    Rect _dropBoundingBox = t.TransformBounds(new Rect(0, 0, item.RenderSize.Width, item.RenderSize.Height));
    _targetBoundingBoxes.Add(item, _dropBoundingBox);
  }
<Window>
    <StackPanel>
        <Button Margin="0,50,0,0" Height="50"/>
        <ContentPresenter Name="HI" Content="{Binding Blah}"/>
    </StackPanel>
</Window>

      //Create a canvas which will be used as the dragged adorner.  Canvas is used since you can set the Left and Top positions.
  if (_topWindow.FindName("adornerLayer") == null)
  {
    //grab the existingContent
    UIElement existingContent = (UIElement)_topWindow.Content;

    //create a Grid wrapper around the entire window content so we can add the new canvas adornerLayer as a child in addition to the existing content
    Grid nonLayoutCanvas = new Grid(); nonLayoutCanvas.VerticalAlignment = VerticalAlignment.Stretch; nonLayoutCanvas.HorizontalAlignment = HorizontalAlignment.Stretch;

    //create the hidden Canvas that we will draw to and move around the screen
    Canvas adornerCanvas = new Canvas(); adornerCanvas.Visibility = Visibility.Collapsed; adornerCanvas.Name = "adornerLayer";
    adornerCanvas.Effect = new DropShadowEffect() { ShadowDepth = 5, BlurRadius = 5, Color = Colors.Silver };

    //reset the content to the nonLayout Canvas
    _topWindow.Content = nonLayoutCanvas;

    //add the original content and the new canvas to the grid above
    nonLayoutCanvas.Children.Add(existingContent);
    nonLayoutCanvas.Children.Add(adornerCanvas);

    _topWindow.RegisterName("adornerLayer", adornerCanvas);
  }

  _canvasThatIsBeingDraggedAround = (Canvas)_topWindow.FindName("adornerLayer"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:05:01.040

更改`TransformToVisual`为`TransformToAncestor`。

# android - 如何延迟执行android

> ID：14510709
> 
> 赞同：16
> 
> 时间：2013-01-24T21:03:26.297
> 
> 标签：android, multithreading, postdelayed

我正在构建一个具有 AI 功能的安卓棋盘游戏。AI 得到一个转折点，必须调用一系列操作，然后将无效发布到我的自定义视图以进行更新。

我需要放慢这些动作，这样用户才能看到 AI 轮到它了，而不是一闪而过。

我已经尝试过这些方面的东西

```
 try {
        doFirstThing();
        Thread.sleep(500)
        //post invalidate

        doNextThing();
        Thread.sleep(1000)
        //post invalidate
     }
     catch (Exception e) {
     } 
```

但是，这绝对没有效果。如果这不明显，这也将在单独的线程中运行。

我看过处理程序的最佳选择是什么，但它们不需要正确，因为我需要按顺序执行一系列任务，每次更新视图。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-24T21:21:34.530

使用处理程序，如果您从 UI 线程执行，这是一个好主意...

```
 final Handler h = new Handler();

    final Runnable r2 = new Runnable() {

        @Override
        public void run() {
            // do second thing
        }
    };

    Runnable r1 = new Runnable() {

        @Override
        public void run() {
            // do first thing
            h.postDelayed(r2, 10000); // 10 second delay
        }
    };

    h.postDelayed(r1, 5000); // 5 second delay 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-02-26T21:52:07.573

只是添加一个示例：以下代码可以在 UI 线程之外执行。毫无疑问，必须使用 Handler 来延迟 Android 中的任务

```
Handler handler = new Handler(Looper.getMainLooper());
final Runnable r = new Runnable() {
    public void run() {
        //do your stuff here after DELAY milliseconds
    }
};
handler.postDelayed(r, DELAY); 
```

# c++ - C++ 类的大小是如何确定的？

> ID：14510711
> 
> 赞同：10
> 
> 时间：2013-01-24T21:03:32.007
> 
> 标签：c++, memory-alignment

**摘要**：编译器如何在编译过程中静态确定 C++ 类的大小？

**详情**：

我试图了解用于确定类将使用多少内存以及如何对齐内存的规则。

例如下面的代码声明了 4 个类。前 2 个各 16 个字节。但是 3 是 48 个字节，尽管它包含与第一个 2 相同的数据成员。而第四个类具有与第三个相同的数据成员，只是顺序不同，但它是 32 个字节。

```
#include <xmmintrin.h>
#include <stdio.h>

class TestClass1 {
  __m128i vect;
};

class TestClass2 {
  char buf[8];
  char buf2[8];
};

class TestClass3 {
  char buf[8];
  __m128i vect;
  char buf2[8];
};

class TestClass4 {
  char buf[8];
  char buf2[8];
  __m128i vect;
};

TestClass1 *ptr1;
TestClass2 *ptr2;
TestClass3 *ptr3;
TestClass4 *ptr4;
int main() {
  ptr1 = new TestClass1();
  ptr2 = new TestClass2();
  ptr3 = new TestClass3();
  ptr4 = new TestClass4();
  printf("sizeof TestClass1 is: %lu\t TestClass2 is: %lu\t TestClass3 is: %lu\t TestClass4 is: %lu\n", sizeof(*ptr1), sizeof(*ptr2), sizeof(*ptr3), sizeof(*ptr4));
  return 0;
} 
```

我知道答案与类的数据成员的对齐有关。但我试图准确理解这些规则是什么以及它们在编译步骤中是如何应用的，因为我有一个具有`__m128i`数据成员的类，但数据成员不是 16 字节对齐的，这会导致编译器出现段错误生成`movaps`用于访问数据的代码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-24T21:14:35.090

对于 POD（普通旧数据），规则通常是：

*   结构中的每个成员都有一些大小*s*和一些对齐要求*a*。
*   编译器从大小*S*设置为零和对齐要求*A*设置为一（字节）开始。
*   编译器按顺序处理结构中的每个成员：

1.  考虑成员的对齐要求*a*。如果*S*当前不是 a 的倍数*，*则添加足够的字节*S*使其成为 a 的*倍数*。这决定了会员的去向；它将从结构的开头开始偏移*S*（对于*S*的当前值）。
2.  将*A*设置为*A*和*a 的*最小公倍数¹。
***   将*s*添加到*S*，为成员留出空间。**

 ***   当为每个成员完成上述过程时，考虑结构的对齐要求*A*。如果*S*当前不是*A*的倍数，则将其添加到*S*使其成为*A*的倍数。

完成上述操作后，结构的大小就是*S*的值。

此外：

*   如果任何成员是一个数组，它的大小就是元素个数乘以每个元素的大小，它的对齐要求就是一个元素的对齐要求。
*   如果任何成员是结构，则其大小和对齐要求如上计算。
*   如果任何成员是联合体，则其大小是其最大成员的大小加上刚好足以使其成为所有成员对齐的最小公倍数^(1的倍数。)

考虑你的`TestClass3`：

*   *S*从0开始，*A*从1开始。
*   `char buf[8]`需要 8 个字节和对齐 1，所以*S*增加 8 到 8，*A*保持 1。
*   `__m128i vect`需要 16 个字节和 16 个对齐。首先，必须将*S*增加到 16 以提供正确的对齐。然后*A*必须增加到 16。然后*S*必须增加 16 为 腾出空间`vect`，所以*S*现在是 32。
*   `char buf2[8]`需要 8 个字节和对齐 1，因此*S*增加 8 到 24，*A*保持 16。
*   最后，*S*是 24，不是*A*（16）的倍数，所以*S*必须增加 8 到 32。

所以大小`TestClass3`是32字节。

对于基本类型（`int`、`double`等），对齐要求是实现定义的，通常主要由硬件决定。在许多处理器上，当数据具有一定的对齐方式时（通常当其在内存中的地址是其大小的倍数时）加载和存储数据会更快。除此之外，上述规则主要来自逻辑。他们将每个成员放置在必须满足对齐要求的位置，而不会占用不必要的空间。

## 脚注

¹对于一般情况，我将其表述为使用对齐要求的最小公倍数。但是，由于对齐要求始终是 2 的幂，因此任何一组对齐要求的最小公倍数是其中最大的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-24T21:23:12.590

如何确定类的大小完全取决于编译器。编译器通常会编译以匹配特定的应用程序二进制接口，这取决于平台。

但是，您观察到的行为非常典型。编译器正在尝试对齐成员，以便它们每个都以它们的大小的倍数开始。在 的情况下`TestClass3`，成员之一是类型`__m128i`和`sizeof(__m128i) == 16`。因此它会尝试将该成员对齐以从 16 的倍数的字节开始。第一个成员是类型`char[8]`，因此占用 8 个字节。如果编译器将`_m128i`对象直接放在第一个成员之后，它将从位置 8 开始，这不是 16 的倍数：

```
0               8               16              24              32              48
┌───────────────┬───────────────────────────────┬───────────────┬┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄
│    char[8]    │            __m128i            │    char[8]    │           
└───────────────┴───────────────────────────────┴───────────────┴┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄ 
```

因此，它更喜欢这样做：

```
0               8               16              24              32              48
┌───────────────┬┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┬───────────────────────────────┬───────────────┐┄┄┄
│    char[8]    │               │           __m128i             │    char[8]    │
└───────────────┴┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┴───────────────────────────────┴───────────────┘┄┄┄ 
```

这使它的大小为 48 字节。

当您重新排序成员以获取`TestClass4`布局时：

```
0               8               16              24              32              48
┌───────────────┬───────────────┬───────────────────────────────┬┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄
│    char[8]    │    char[8]    │           __m128i             │        
└───────────────┴───────────────┴───────────────────────────────┴┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄┄ 
```

现在一切都正确对齐了——数组的偏移量是 1 的倍数（元素的大小），`__m128i`对象的偏移量是 16 的倍数——总大小为 32 个字节。

编译器不只是自己重新排列的原因是因为标准规定类的后面成员应该有更高的地址：

> 分配具有相同访问控制（第 11 条）的（非联合）类的非静态数据成员，以便后面的成员在类对象中具有更高的地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:21:27.147

这些规则是由正在使用的应用程序二进制接口规范确定的，它确保了不同系统之间共享此接口的程序的兼容性。

对于 GCC，这是 Itanium ABI。

（不幸的是，它不再公开可用，尽管我确实找到[了一面镜子](http://www.swag.uwaterloo.ca/acd/docs/ItaniumC++ABI.htm)。）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-24T21:15:50.837

如果你想确保对齐，你应该在你的 h 文件中使用“pragma pack(1)”看看这篇文章： [http ://tedlogan.com/techblog2.html](http://tedlogan.com/techblog2.html)**

# c - fscanf 和 EOF 中的否定扫描集

> ID：14510715
> 
> 赞同：2
> 
> 时间：2013-01-24T21:03:39.037
> 
> 标签：c, file-io, eof, scanf

我的文件中有一个逗号分隔的字符串列表：

姓名 1，姓名 2，姓名 3，

我想读那些跳过所有逗号的名字。我写了以下循环：

```
while(true)
{
    if(fscanf(file, "%[^,],", my_string) != 1)
    {
        break;
    }

    //...
} 
```

但是，它总是比预期的多执行一次。给定文件中的 3 个名称，循环将执行其语句 4 次。为什么会这样？EOF 指标是否排在我的否定扫描集**[^,] 中**？如果是这样，那么我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:38:02.280

我很确定这正是你想要的。我对算法所做的唯一修改是`%`在格式字符串中添加前导空白清除。另外，我修改了它以从命令行 arg 打开文件。这样更容易测试。希望没问题。

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char *argv[])
{
    if (argc != 2)
        return EXIT_FAILURE;

    FILE *fp = fopen(argv[1], "r");
    if (NULL == fp)
        return EXIT_FAILURE;

    char str[100];
    int count=0;
    while (1)
    {
        if(fscanf(fp, " %[^,],", str) != 1)
            break;
        printf("%s\n", str);
        ++count;
    }

    printf("Parsed %d strings.", count);
    return EXIT_SUCCESS;
} 
```

**输出**

```
Name 1
Name 2
Name 3
Parsed 3 strings. 
```

我相信您所看到的循环中的“第四次”执行是失败条件，它由于无法解析而中断循环，除非我遗漏了某些内容或不理解您所看到的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:47:02.893

为什么你的循环语句执行 4 次。第 4 条 fscanf 语句后循环中断，并且不执行下面的代码。EOF 指标不排名到您的否定集但是也许您正在寻找更紧凑的解决方案，如下所示：

```
while(fscanf(file, "%[^,],", my_string)!=EOF )
    {

        //do something
    } 
```

如果没有，请发布更详细的代码和您的测试文件

# ruby-on-rails - 分页器显示奇怪的结果。为什么？

> ID：14510717
> 
> 赞同：0
> 
> 时间：2013-01-24T21:03:42.880
> 
> 标签：ruby-on-rails, ruby-on-rails-3, kaminari

我`kaminari`用于分页。然后我有 3 个模型，例如`User`、`Community`和`Uniquecode`。

我正面临一个问题，其中显示的记录数量在每个参数 [：page] 处有所不同（更改）。

另外，如果我放`<% @uniquecode_count %>`，它返回'1'......因为有3条相关记录，它必须是'3'。

这真的很奇怪。就我而言。我有相关的 3 条 Uniquecode 记录。
正如我`paginates_per 1`在 Uniquecode 模型中所做的那样，它应该在每一页只显示 1 条记录。然而结果是

*   在佩奇。1 它显示 3 条记录
*   在佩奇。2 它显示 2 条记录
*   在佩奇。3 它显示 1 条记录

为什么这样做？我从来没有见过Kaminari这样做。

谁能帮我解决这个问题？

我这样定义关联

```
User has_many :communities
User has_many :uniquecodes

Community belongs_to :user
Community has_many :uniquecodes

Uniquecode belongs_to :user
Uniquecode belongs_to :community 
```

**唯一码模型**

```
paginates_per 1 
```

**控制器**

```
@user = User.find(params[:id])
@uniquecodes = @user.uniquecodes.page(params[:page])
@uniquecodes_count = @uniquecodes.count 
```

**看法**

```
<%= paginate @uniquecodes, :window => 4 %>
<% @uniquecodes.recent.each do |uniquecode| %>   
    <%= render 'uniquecodes/uniquecode', :uniquecode => uniquecode %>
<% end %>

<% @uniquecode_count %>  => this shows '1'. It has to show '3' though. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:18:19.843

代替

```
@uniquecodes = @user.uniquecodes.page(params[:page]) 
```

经过

```
@uniquecodes = Kaminari.paginate_array(@user.uniquecodes).page(params[:page]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:07:01.797

也许您应该为您的唯一代码设置默认顺序..？

# php - 页面之间的 PHP 会话变量

> ID：14510718
> 
> 赞同：1
> 
> 时间：2013-01-24T21:03:47.183
> 
> 标签：php, mysql, session

我有一个表格供用户输入信息。表格有 4 页。第一页是用户输入的客户详细信息，它使用 POST 发送到下一页，在第二页上发送到“客户”表中的 mysql 数据库。

但是，接下来的两页都链接到“雇用”表。第 2 页上的数据使用 POST 移动到第 3 页，第 3 页上的数据使用 POST 移动到第 4 页。

我决定使用会话变量来移动从第 2 页获取的所有数据并发送到第 3 页以移动到第 4 页，我计划将所有雇用数据然后放入数据库中，但是使用 SESSION 移动的数据没有'似乎不想移动到下一页。

我确信 POST 方法正在工作并且将数据输入数据库正在工作，但它不是正确的数据（例如时间只是 00:00:00），这意味着变量不会在页面之间移动。我已经四处搜索，但我很挣扎，而且我是 php 新手，所以我才刚刚发现会话变量！

欢迎任何帮助。

第三种形式代码：

```
<?php
session_start();
$_SESSION['time'] = $time;
$_SESSION['date'] = $date;
$_SESSION['length'] = $length;
$_SESSION['numberofpeople'] = $numberofpeople;
$_SESSION['pickuplocation'] = $pickuplocation;
$_SESSION['destination'] = $destination;
$_SESSION['useofbus'] = $useofbus;
$_SESSION['day'] = $day;
$_SESSION['month'] = $month;
$_SESSION['year'] = $year;
$_SESSION['cost'] = $cost;
$_SESSION['customerid'] = $customerid;
$_SESSION['driverid'] = $driverid;
$_SESSION['endtime'] = $endtime;
session_write_close();
?> 
```

第四页也是最后一页代码：

```
<?php
session_start();
$time = $_SESSION['time'];
$date = $_SESSION['date'];
$length = $_SESSION['length'];
$numberofpeople = $_SESSION['numberofpeople'];
$pickuplocation = $_SESSION['pickuplocation'];
$destination = $_SESSION['destination'];
$useofbus = $_SESSION['useofbus'];
$day = $_SESSION['day'];
$month = $_SESSION['month'];
$year = $_SESSION['year'];
$cost = $_SESSION['cost'];
$customerid = $_SESSION['customerid'];
$driverid = $_SESSION['driverid'];
$endtime = $_SESSION['endtime'];
session_write_close();
?>

<?php

$payment = $_POST['payment'];
$information = $_POST['information'];

$con = mysql_connect("localhost","busassociation","fishie123");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("busassociation", $con);

//INSERT INTO DATABASE

$sql = "INSERT INTO hire (customerid, driverid, time, endtime, date, length,     pickuplocation, destination, useofbus, numberofpeople, cost, day, month, year, payment, information) VALUES ('$customerid', '$driverid', '$time', '$endtime', '$date', '$length', '$pickuplocation', '$destination', '$useofbus', '$numberofpeople', '$cost', '$day', '$month', '$year', '$payment', '$information')";

if (!mysql_query($sql,$con))
{
die('Error: ' . mysql_error());
}
echo "";

mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:11:50.483

你的主机是什么？有时主机会停用会话，这确实很少见，但可能会发生。我确定您不能使用带有“免费”主机的会话（免费是提供低级主机的法国 FAI）。

去获取一些关于你的主机的信息。

如果您想确保会话在 PHP 中运行良好，请执行两个测试页面。

page1.php

```
<?php session_start(); $_SESSION['test']='Earth is our mother'; ?> 
```

page2.php

```
<?php session_start();
      if(isset($_SESSION['test'])) echo $_SESSION['test'];
      else echo 'session problem';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:26:56.587

我认为您应该在第 2 页而不是在第 3 页中定义会话变量

# jquery - asp.net razor 将自动完成值添加到 html 文本框

> ID：14510720
> 
> 赞同：0
> 
> 时间：2013-01-24T21:03:54.003
> 
> 标签：jquery, asp.net, razor

我有一个剃刀形式的主题框，它也添加了默认措辞。但我想在下拉框中添加用户选择的内容。下拉框 id 是 CustomFieldValue8。我该怎么做？我是剃须刀的新手。如果重要的话，这是一个自动完成文本框，Jquery。

```
<td colspan="2">

        @LangStrings.Subject<br />
        @Html.TextBoxFor(model => model.Subject, new { @Value = "Specification Change Request", @style = "width:30%" })
        @Html.ValidationMessageFor(model => model.Subject)
    </td> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:29:18.033

我希望这些页面可以帮助：

[http://jqueryextensions.codeplex.com/](http://jqueryextensions.codeplex.com/)

[http://mvcautocomplete.codeplex.com/](http://mvcautocomplete.codeplex.com/)

[http://blogs.msdn.com/b/miah/archive/2008/11/13/autocompletion-textbox-in-mvc-using-jquery.aspx](http://blogs.msdn.com/b/miah/archive/2008/11/13/autocompletion-textbox-in-mvc-using-jquery.aspx)

[http://carlhoerberg.com/how-to-use-jquery-ui-autocomplete-with-aspnet](http://carlhoerberg.com/how-to-use-jquery-ui-autocomplete-with-aspnet)

[http://autocompletedotnet.codeplex.com/documentation#Asp.Net%20MVC](http://autocompletedotnet.codeplex.com/documentation#Asp.Net%20MVC)

例如，如果您使用最后一个自动完成并下载 dll，您可以在视图中简单地使用自动完成，如下所示：

```
@Html.AutoCompleteTextBox("country", 
                 new Uri("/Countries/SearchByFirstLetters", UriKind.RelativeOrAbsolute), 
                 "Name") 
```

# javascript - 将 360 jQuery 轮限制为 300

> ID：14510726
> 
> 赞同：2
> 
> 时间：2013-01-24T21:04:17.423
> 
> 标签：javascript, jquery, rotation

我的播放器页面上有一个 360 度旋转轮，最终充当音量按钮。

我需要将其功能限制在 270 度而不是 360 度（从 7 点到 5 点），这样它才能产生最小到最大的效果。

我怎样才能使用附加的代码来实现这一点？

[播放器页面](http://www.tranceil.fm/player2)

```
 $('#metal .indicator-cw').bind('touchmove', function(event){
        updateMetal();
    });
    $("#metal .indicator-cw").mousemove(updateMetal);

    function updateMetal(){
var number = $("#metal .result-cw").text();
var Degrees = parseInt(number);
var vol = ((Degrees + 150) % 360) * (1/270);    
$musicPlayer.jPlayer("volume", vol);

$("#rotateit").css({'transform':'rotate(' + (Degrees) + 'deg)', '-webkit-transform':'rotate(' + (Degrees) + 'deg)', '-o-transform':'rotate(' + (Degrees) + 'deg)', '-moz-transform':'rotate(' + (Degrees) + 'deg)', '-ms-transform':'rotate(' + (Degrees) + 'deg)' });
    if (Degrees > 120 || Degrees < 210) return;
    }
    //js code for the metal style wheel - above 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:32:20.547

添加此项以停止更新音量轮

```
if (Degrees > 150 && Degrees < 210) return; 
```

您还需要稍微不同地计算音量

```
//This shifts the degrees from 210-120 to be 0-270 and then scales it to 0-1
var vol = ((Degrees + 150) % 360) * (1/300); 
```

# java - 为什么我的字体不渲染？

> ID：14510730
> 
> 赞同：0
> 
> 时间：2013-01-24T21:04:32.723
> 
> 标签：java, fonts, lwjgl, nifty-gui

我一直在使用带有 lwjgl 的漂亮 GUI，它运行良好，但我不知道如何让它使用我提供的字体；它似乎只能呈现默认字体。我已将带有 .fnt 文件的文件夹添加到运行时类路径（通过 eclipse），这样就不会发生“找不到资源”异常，但是当我运行程序时，任何使用我的字体的文本字段都不会' t 渲染。

这是源代码，它在左上角呈现两个文本字段，在中心呈现两个白色形状。除非我使用默认字体，否则右侧的文本字段不会呈现。

```
package game;
import static org.lwjgl.opengl.GL11.*;

import org.lwjgl.opengl.*;

import de.lessvoid.nifty.Nifty;
import de.lessvoid.nifty.builder.LayerBuilder;
import de.lessvoid.nifty.builder.ScreenBuilder;
import de.lessvoid.nifty.builder.TextBuilder;
import de.lessvoid.nifty.nulldevice.NullSoundDevice;
import de.lessvoid.nifty.renderer.lwjgl.input.LwjglInputSystem;
import de.lessvoid.nifty.renderer.lwjgl.render.LwjglRenderDevice;
import de.lessvoid.nifty.screen.Screen;
import de.lessvoid.nifty.tools.TimeProvider;

public class NiftyWontUseMyFont {
    private Nifty nifty;
    private Screen screen;
    private float[] WINDOW_DIMENSIONS = {640,480};
    public NiftyWontUseMyFont() throws Exception{
            //init display
            Display.setDisplayMode(new DisplayMode(640,480));
            Display.create();

            //init nifty gui
              LwjglInputSystem inputSystem = new LwjglInputSystem();
              inputSystem.startup();
              nifty = new Nifty(
                new LwjglRenderDevice(),
              new NullSoundDevice(),
                inputSystem,
              new TimeProvider());
            // load default styles
            nifty.loadStyleFile("nifty-default-styles.xml");
            // load standard controls
            nifty.loadControlFile("nifty-default-controls.xml");
            screen = new ScreenBuilder("start") {{
                  layer(new LayerBuilder("baseLayer") {{
                    childLayoutHorizontal();
                    text(new TextBuilder("test"){{
                        font("aurulent-sans-16.fnt");
                        color("#f00f");
                        backgroundColor("#33af");
                        text("l33t");
                    }});
                    text(new TextBuilder("test2"){{
                        font("16-Jackash.fnt");//doesn't work with this external font
//                      font("aurulent-sans-16.fnt");//works with the default font
                        color("#f00f");
                        backgroundColor("#33af");
                        text("l33t");
                    }});
                  }});
                }}.build(nifty);
                nifty.gotoScreen("start");

        //init opengl
                glDisable(GL_DEPTH_TEST);
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        glOrtho(0,640,480,0,1,-1);
        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();
        glViewport(0,0,640,480);
        glPushMatrix();

        glPopMatrix();
        while(!Display.isCloseRequested())
        {
            //render

            glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
            glBegin(GL_QUADS);
            glTexCoord2f(0,0);glVertex2i(400,400); //Upper left
            glTexCoord2f(1,0);glVertex2i(450,400);//upper right
            glTexCoord2f(1,1);glVertex2i(450,450);//bottom right
            glTexCoord2f(0,1);glVertex2i(400,450);//bottom left 
            glEnd();

            glBegin(GL_LINES);
                glVertex2i(100,100);
                glVertex2i(200,200);
            glEnd();

            nifty.update();

            glPushMatrix();
            glPushAttrib(GL_ALL_ATTRIB_BITS);
            nifty.render(false);
            glPopAttrib();
            glPopMatrix();
            Display.update();
            Display.sync(60);
        }
        Display.destroy();
    }
    public static void main(String[] args) throws Exception {
        new NiftyWontUseMyFont();

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T22:27:47.810

当我将具有该名称的 fnt 添加到我的类路径时，您的示例对我有用。我正在使用 maven，我刚刚将 .fnt 放入 src/main/resources。当您指定字体名称时，Nifty 期望它可以在相对于当前目录的文件系统中或在类路径的根目录中作为类路径资源访问。

没有什么特别的事情发生。[您可以在此处](https://github.com/void256/nifty-gui/blob/1.4/nifty-core/src/main/java/de/lessvoid/nifty/tools/resourceloader/NiftyResourceLoader.java)检查加载资源的类

但是，您的 .fnt 文件可能存在问题。您是如何创建该文件的？通常，您需要将相应的 .png 或 .tga 放在与 .fnt 相同的位置，并且 .fnt 内有对 Nifty 读取的实际图像文件的引用。也许 Nifty 可以找到 .fnt 但找不到实际的图像资源？

# xml - 无法使用命名空间对 xml 文件中的节点进行排序

> ID：14510732
> 
> 赞同：0
> 
> 时间：2013-01-24T21:04:37.123
> 
> 标签：xml, xslt

我正在尝试访问使用命名空间的 .xml 文件中的节点并对其进行排序。它不起作用，我认为它与命名空间有关，无法正确限定它们。

我有一个 index.xml，我用它来组合我需要的文档，看起来像这样：

```
<?xml version="1.0" encoding="ISO-8859-1"?>

<?xml-stylesheet type="text/xsl" href="merge.xsl"?>

<pic:catalog xmlns:pic = "pictureCatalog">
    <pic:logo>Logo</pic:logo>
    <Author>User Name</Author>
    <pic:allPhotos>photos</pic:allPhotos>
</pic:catalog> 
```

照片.xml 看起来像这样：

```
<?xml version="1.0"?>
<pic:photoCatalog xmlns:pic="pictureCatalog">

    <pic:photo>
           <pic:title>Alcazar</pic:title>
           <pic:location>Segovia - Spain</pic:location>
           <pic:date>Jan 2013</pic:date>
           <pic:camera>Sony</pic:camera>
           <pic:resolution>12px</pic:resolution>
           <pic:format>.jpg</pic:format>
           <pic:description>
            Medieval Castle over the hill overlooking the city.
           </pic:description>
    </pic:photo>

</pic:photoCatalog> 
```

我的 xsl 样式表如下所示：

```
 <!-- All the photos-->
   <xsl:template match = "pic:catalog/pic:allPhotos">
     <html>
         <head>
            <link rel="stylesheet" type="text/css" href="Style.css" />
         </head>
         <body>

        <xsl:for-each select="pic:photoCatalog/pic:photo"><br/>
              <xsl:sort select="pic:location"/>
              <xsl:value-of select="pic:photoCatalog/pic:photo/pic:location"/>
           </xsl:for-each>

         </body>
   </html>
   </xsl:template> 
```

任何人都可以帮忙吗？

蓝牙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T23:15:11.710

您在此处有两个 XML 文件，但您的 XSLT 仅应用于 index.xml，在任何地方都没有引用 photos.xml。如果要访问第二个 XML 文档，通常会期望在 XSLT 中看到**文档引用。**

看起来第二个文件名保存在 index.xml 的**pic:allPhotos**元素中，并且您希望访问该文件并遍历照片。在这种情况下，您需要更改您的**xsl:for-each**以像这样访问文档

```
 <xsl:for-each select="document(concat(., '.xml'))/pic:photoCatalog/pic:photo"> 
```

下一个问题是此时您在**xsl:sort**语句之前输出了一个**br**元素。这是无效的，因为**xsl:sort**应该紧跟在**xsl:for-each**之后。

 ******```
<xsl:for-each select="document(concat(., '.xml'))/pic:photoCatalog/pic:photo">
   <xsl:sort select="pic:location"/>
   <br/> 
```

此外，您的**xsl:value-of**也不完全正确。正如这点所说的那样，您处于**xsl:for-each**循环中，因此已经定位在**pic:photo**元素上，因此可以将其简化为

```
<xsl:value-of select="pic:location"/> 
```

尝试以下 XSLT

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" xmlns:pic="pictureCatalog" exclude-result-prefixes="pic">

   <xsl:template match="/pic:catalog">
      <xsl:apply-templates select="pic:allPhotos"/>
   </xsl:template>

   <xsl:template match="pic:catalog/pic:allPhotos">
      <html>
         <head>
            <link rel="stylesheet" type="text/css" href="Style.css"/>
         </head>
         <body>
            <xsl:for-each select="document(concat(., '.xml'))/pic:photoCatalog/pic:photo">
               <xsl:sort select="pic:location"/>
               <br/>
               <xsl:value-of select="pic:location"/>
            </xsl:for-each>
         </body>
      </html>
   </xsl:template>
</xsl:stylesheet> 
```

输出以下内容

```
<html>
<head>
<META http-equiv="Content-Type" content="text/html">
<link rel="stylesheet" type="text/css" href="Style.css">
</head>
<body><br>Segovia - Spain</body>
</html> 
```

顺便说一句，您的命名空间都存在且正确！（好吧，假设您也已在**xsl:stylesheet**上声明它已更正）******

# android - 适用于 Android 2.3 的 ActionBarSherlock ShareActionProvider 无法正常工作

> ID：14510738
> 
> 赞同：1
> 
> 时间：2013-01-24T21:05:05.010
> 
> 标签：android, actionbarsherlock, shareactionprovider

我正在使用 ABS ShareActionProvider。我已遵循此代码：[https](https://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/demos/src/com/actionbarsherlock/sample/demos/ShareActionProviders.java) ://github.com/JakeWharton/ActionBarSherlock/blob/master/samples/demos/src/com/actionbarsherlock/sample/demos/ShareActionProviders.java及其与最新版本的Android（4.0 +) 但不适用于 Android 2.x，我无法单击该图标。

这是我的代码：

```
@Override
public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
    inflater.inflate(R.menu.share, menu);

    MenuItem actionItem = menu.findItem(R.id.menu_item_share_action_provider_action_bar);
    actionProvider = (ShareActionProvider) actionItem.getActionProvider();
    actionProvider.setShareHistoryFileName(null);
    actionProvider.setShareIntent(share("More apps : https://play.google.com/store/apps/developer?id=Stéphane+Mathis"));

    if(mItem != null)
    {
        actionProvider.setShareIntent(share(mItem.content));        
    }

    super.onCreateOptionsMenu(menu, inflater);
}

private Intent share(String message) 
{
    final Intent MessIntent = new Intent(Intent.ACTION_SEND);
    MessIntent.setType("text/plain");
    MessIntent.putExtra(Intent.EXTRA_TEXT, message);
    return MessIntent;
} 
```

我错过了什么 ？

编辑：我尝试了 ABS 的“官方”演示，它在模拟器中不起作用，但它在真实设备上运行。这与我的代码相同，使用真实设备（使用 4.1.2、4.2.1 和 2.3.3 测试）但不在模拟器中。那我该怎么办？当我在模拟器中测试它时发布一个不起作用的应用程序，我感到不舒服。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T15:37:48.847

我认为这是由于[此处](https://github.com/JakeWharton/ActionBarSherlock/issues/415)描述的错误，简而言之，模拟器安装的应用程序不超过 1 个能够获得此共享意图。

# javascript - 让javascript实时发生

> ID：14510739
> 
> 赞同：0
> 
> 时间：2013-01-24T21:05:05.437
> 
> 标签：javascript, dom

我从一个带有圆形边框的 div 制作了一个圆圈。我已经使用 jquery ui 使这个 div 可拖动。我想知道如何制作它，以便越向左拖动 div，它的不透明度就越低。这是我已经编码的片段：

```
<script type="text/javascript" language="javascript">

$(function() {
    $( "#circle" ).draggable();
  });

  var circ = document.getElementById('circle');
  var num = circ.style.left/1000;

</script>
</head>

<body>
<div id="circle"></div>

<script type="text/javascript">circ.style.opacity = num;</script>
</body>
</html> 
```

我知道我可以通过将 circ.style.opacity = num; 进入一个函数并调用该函数，但我想知道是否有办法让它自动更改？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:49:52.933

正如其他人已经建议的那样，只需在`drag`回调中计算您的不透明度并设置不透明度。`drag`回调被连续调用，直到拖动停止。这就是“实时”更新的工作方式。

例子：

```
$('#circle').draggable({
    "drag": function (e, ui) {
        var percentOpacity = someVal; //compute this however you like
        $(this).css('opacity', percentOpacity);
    }
}); 
```

**工作演示**：http: [//jsfiddle.net/gzA8w/](http://jsfiddle.net/gzA8w/)

在工作演示中，我只是根据元素距文档右边缘的像素数来计算不透明度。你走得越远，它就越透明。

# ios - 服务器迁移后未收到 APNS

> ID：14510740
> 
> 赞同：0
> 
> 时间：2013-01-24T21:05:07.080
> 
> 标签：ios, push-notification, apple-push-notifications

我们的 iOS 应用成功实现了 APNS。有时它没有收到，但几乎 90% 的时间都可以。

现在我们需要迁移整个服务器端（用 PHP 编写）代码。
几个小时后，一切都完成了，认为迁移已经完成（所有 webview 都正确显示，用户数据等）。但是，当我的同事尝试向我的 iOS 应用程序发送推送通知时，它无法接收。服务器日志表明 APNS 已成功发送并且没有错误。有趣的是，当他尝试通过网络浏览器发送 APNS（点击 URL 发送命令）时，它被成功接收。

现在我们不知道从这里去哪里，也不知道该做什么。我们是否缺少在这种情况下所需的一些过程？例如，如果我们要迁移整个系统，是否应该为 APNS 重新创建认证文件？迁移服务器时是否需要修改任何 iOS 代码？（除了对服务器 URL 的引用。我们已经检查过了）

我知道这个问题太模糊了，但它刚刚发生，我们真的想不出任何理由。如果有任何关于 APNS 服务器迁移的指导，我们将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T13:27:50.687

你是对的，太多的未知数给你一个直截了当的答案:)

但是，如果我理解正确，当您从 Web 浏览器触发 PHP 时，推送会起作用。当它通过命令行触发时，它不会。

确保通过命令行执行脚本的用户属于一个有足够权限执行 PHP 脚本中所有语句的组。例如，如果您使用 fwrite 命令，则执行脚本的用户必须属于有权访问文件系统的组。

# c# - 如何确保消息传递到 SOAP 端点？

> ID：14510741
> 
> 赞同：0
> 
> 时间：2013-01-24T21:05:10.710
> 
> 标签：c#, .net, asp.net-mvc, wcf

我在 ac#MVC 项目中使用了一个臭名昭著的不可靠的 SOAP Web 服务。我无法控制该服务。它偶尔会长时间停止响应。有没有一种简单的方法，从客户端，以设定的时间间隔继续重试发送消息，直到我收到来自服务的响应？

我查看了 MSMQ 和 ws-reliability，但在我看来，这两个选项都需要对 Web 服务进行一些控制。有什么可以帮助我从客户端做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:38:31.007

正如您可能已经发现的那样，您的问题对许多人来说是一个大问题。查找“幂等”和“webservice”。幂等性不仅仅意味着能够确保请求/响应，而且搜索将为您提供大量好东西可供阅读。

如果“长时间停止响应”意味着几秒钟，而很少被调用，那么 DarkWanderer 为此类问题展示了一种非常强力的解决方案。

但是如果你有很多调用，睡眠可能会占用你的工作线程，所以你只需要依赖某种队列。

如果您的调用是非事务性的和非关键的，那么您当然可以编写自己的队列机制。虽然这看起来很简单，但它可能仍然需要线程、复杂的回调、日志记录、主动错误处理等等。许多可怜的人报告说，最初的简单解决方案变成了维护的噩梦。

现在我看到您的要求之一是它必须能够在应用程序池回收中存活下来。然后我们处于最后一类关键（可能是事务性）排队。

为什么我会从一开始就推荐 MSMQ。它可以处理您的所有问题，并且 api 在 .net 中并且现在非常好。是的，它会增加您的整体解决方案的复杂性，但这源于您的问题域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:07:42.680

```
while (true) {
    try {
        var response = webServiceClient.CallMethod();
        if (response.Successful())
            break;
        Sleep(retryInterval);
    } catch {}
} 
```

* * *

这意味着，您只需要继续调用 Web 服务，不需要消息队列或其他东西。这是否回答你的问题？

# javascript - Javascript - 动态填充表（数据表）

> ID：14510745
> 
> 赞同：1
> 
> 时间：2013-01-24T21:05:23.820
> 
> 标签：javascript, json, html, twitter-bootstrap, datatables

两个初学者 javascript/网页设计问题合二为一。我正在使用 twitter bootstrap，我购买了两个模板来帮助解决这个问题并实现我想要的功能。两个模板都提供了基于 Datatables 的动态表（参考：[http](http://www.datatables.net/) ://www.datatables.net/ ）。两者都提供了硬编码数据的示例。我希望使用来自服务器请求的 JSON 数据动态填充表

1.  一个表格示例填充了所有列，我想添加一个带有按钮的额外列来执行操作。我不确定如何正确执行此操作，因为服务器请求只会返回 4 列的数据，但我想为每一行添加一个带有按钮的新列。我的第一个想法是在我们的 JSON 数据中有占位符数据，可以替换为

    `$('tr last-child').html("<a class-btn>");`

或类似的东西。这是一个好的解决方案吗？任何想法，将不胜感激。

1.  第二个模板已经有一个带有按钮的列，也填充了硬编码数据。在这种情况下，处理填充此表的正确方法是什么，因为服务器调用将返回带有 4 列数据的 JSON 数据，但该表将有 5 列（一行按钮）。

任何提示非常感谢。

干杯

# batch-file - 将所有目录名称存储在变量中

> ID：14510747
> 
> 赞同：-1
> 
> 时间：2013-01-24T21:05:25.003
> 
> 标签：batch-file

如何编写一个 Windows 批处理文件，将所有文件夹名称存储在单个变量的目录中？我不知道在任何给定时间目录中有多少文件夹。我很确定我需要一个 for 循环。

这是我迄今为止尝试过的：

```
 @ECHO OFF
    set /a c=1
    setlocal ENABLEDELAYEDEXPANSION
    for /d %%f in (c:\users\*) do echo.file %%f
    for /d %%A in (c:\users\*) do (set "var!c!=%%A")
    ECHO.%var!c!% 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:40:55.653

也许您可以做的是编写命令的输出

```
dir /AD 
```

在一些称为folders.txt的文件中，然后可以通过将文件夹存储到任何数组变量中来对文件夹数量进行操作，就像这样。

```
for %%G in (folders.txt) do (
set /a count+=1
call :exec1 %%~nG
echo %%~nG
)
goto :continue1

:exec1
echo %count%
set mapArray[%count%]=%1
goto :end

:continue1
:end 
```

# python - Python 的 SQL 解析库

> ID：14510749
> 
> 赞同：12
> 
> 时间：2013-01-24T21:05:33.480
> 
> 标签：python, sql, parsing, sql-parser

我们需要一个用于 Python 的 SQL 解析或分解库。我们希望能够输入 SQL 文本查询，然后将查询部分作为结果返回。它不需要花哨或任何东西，但我们*希望*避免自己进行解析。理想情况下，我们可以这样做：

```
the_query = "select something from some_table where blah = 'thing' limit 15"
query_parts = the_library.parse(the_query)
print query_parts.limit().val()

>>> '15' 
```

这也是：

```
the_query = "select something from some_table where blah = 'thing'"
query_parts = the_library.parse(the_query)
print query_parts.limit().val()

>>> None 
```

任何人都可以给我们任何指示吗？如果功能更有限，那也没关系。

非常感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-24T22:41:53.853

You might like to take a look at [sqlparse](http://code.google.com/p/python-sqlparse/)

Blatantly stolen from their homepage:

```
>>> # Parsing
>>> res = sqlparse.parse('select * from "someschema"."mytable" where id = 1')
>>> res
<<< (<Statement 'select...' at 0x9ad08ec>,)
>>> stmt = res[0]
>>> stmt.to_unicode()  # converting it back to unicode
<<< u'select * from "someschema"."mytable" where id = 1'
>>> # This is how the internal representation looks like:
>>> stmt.tokens
<<<
(<DML 'select' at 0x9b63c34>,
 <Whitespace ' ' at 0x9b63e8c>,
 <Operator '*' at 0x9b63e64>,
 <Whitespace ' ' at 0x9b63c5c>,
 <Keyword 'from' at 0x9b63c84>,
 <Whitespace ' ' at 0x9b63cd4>,
 <Identifier '"somes...' at 0x9b5c62c>,
 <Whitespace ' ' at 0x9b63f04>,
 <Where 'where ...' at 0x9b5caac>)
>>> 
```

# android - Locale.SPANISH 在哪里？

> ID：14510750
> 
> 赞同：25
> 
> 时间：2013-01-24T21:05:34.617
> 
> 标签：android, locale

我尝试将我的应用程序的语言更改为西班牙语，但我找不到它。

```
Configuration c = new Configuration(getResources().getConfiguration());
c.locale = Locale.SPANISH; // does not exists 
```

但这有效：

```
c.locale = Locale.ENGLISH; 
```

有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-01-24T21:08:56.543

你试过了吗`Locale spanish = new Locale("es", "ES");`

（请参阅[本地化 Android](https://stackoverflow.com/questions/3615587/localization-android)）

# drupal-7 - Drupal Views 变量 $rows 输出为字符串

> ID：14510752
> 
> 赞同：0
> 
> 时间：2013-01-24T21:05:47.633
> 
> 标签：drupal-7, drupal-views, drupal-theming, theming

我已经为我的视图开发了一个自定义的 .tpl.php 文件，并且在过去它已经工作了。突然，在使用 MAMP 处理我的 Macbook 时，Drupal 决定 $views->rows 需要作为字符串类型而不是数组输出。我在网上和这里搜索过答案，但找不到。我没有在我的 template.php 文件中为主题做任何预处理或 views_render 钩子。有没有人有任何想法或以前看过这个？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:14:59.503

浏览完 Views 模块代码后，我找不到一个 _render 挂钩，我可以更改它以使 $rows 返回到 Array 类型。我确实浏览了 modules/views/theme/views-view.tpl.php

所以我用views-view.tpl.php代码替换了我自己模板中的大部分代码，并用以前的版本替换了数据库，这样我就可以完全重新开始了。原来问题在于我的模板文件没有输出暴露的过滤器等，以及使用的视图

打印 $rows

而不是使用 $rows 作为数组。似乎我使用的任何版本的视图都使用 $rows 变量作为字符串。所以我在 Rewrite Results 框中放入了一个 %SPLIT% 字符串，这样我就可以做一个 PHP preg_split，将结果数组输入我的函数以生成我需要的东西，然后做一个 preg_replace 来摆脱 %SPLIT% $rows 中的字符串。结果看起来像我所拥有的。

因此，最重要的是，视图中的未格式化字段现在将 $rows 输出为字符串变量而不是数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T18:49:53.037

如果满足条件，我在尝试以不同的方式为某一行设置主题时也发现了这一点。大多数事情都可以在 Views UI 中完成，但我无法弄清楚这一点。我终于能够在我的 template.php 文件中使用 yourtheme_preprocess_views_view_unformatted(&$vars) 来做到这一点。$rows 在那里的行为似乎仍然像一个数组（尽管它后来又变成了一个字符串）。

```
function yourtheme_preprocess_views_view_unformatted(&$vars) {

  if ($vars['view']->name == "name_of_view") {

    $rows = $vars['rows'];

    $newRows = array();

    foreach ($rows as $r) {

      $test = strpos($r, "string_i_looked_for");

        if ($test) {
          $newRows[] = "<hr>$r"; // I needed to put in a divider if the condition was met.
        }

        else {
          $newRows[] = $r;
        }
     }
  $vars['rows'] = $newRows; // So that the array of new rows is what will be sent along.
  } 
} 
```

我的实际问题只在测试的第一个实例中需要除法器，所以我也使用了一个计数器，但我认为上面的例子给出了这个想法。

# perl - 如何从 Perl/TK 中的子例程中获取调用方小部件？

> ID：14510754
> 
> 赞同：3
> 
> 时间：2013-01-24T21:05:48.553
> 
> 标签：perl, tk

在 perl Tk 中，我想问一下在使用 -command 选项时如何获取调用小部件。

我有一个由以前未知数量的条目动态创建的对话框小部件。有条目小部件，每个旁边都有一个按钮，可以在其中浏览条目的可能（有用）字符串。

因此，如果按下 2nd Entry 旁边的按钮，则结果应存储在 2nd Entry 中，依此类推。

代码如下所示。

```
my $count = 0;
my @name = ();
my @val = ();
my @edit = ();
my @button = ();

my $fr = $wind->Frame->pack;

foreach ( @outputs ) {  
    $name[$count] = helper::trim($_);
    $val[$count] = '';

    $fr->Label(-text => $name[$count])->grid(-row => $count, -column => 0, -sticky => 'w');
    $edit[$count] = $fr->Entry(-textvariable => \$val[$count], -width => 30)->grid(-row => $count, -column => 1);
    $button[$count] = $fr->Button(-width => 20, -text => 'Select', 
            -command => sub { &select(\$val[$count], \$edit[$count]); } 
        )->grid(-row => $count, -column => 2);

    $count++;
} 
```

但是，由于在构建完整对话框后调用 &select，$count 总是在最后一个值上，我没有得到信息，我按下了哪个按钮。线为

```
-command => sub { &select(\@val, \@edit, $count); } 
```

也没有工作。

有没有办法获取调用子例程的小部件（所以我可以在相应的按钮中以某种方式存储必要的信息）或在这样的调用中使用实际值（此处为 $count）？

此致。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T21:27:32.890

回调内部：

```
my $caller = $Tk::widget; 
```

# assembly - 字符串打印函数 x86 汇编

> ID：14510756
> 
> 赞同：0
> 
> 时间：2013-01-24T21:05:53.430
> 
> 标签：assembly, x86

我想在 x86 程序集中创建一个函数，它可以采用任何给定的字符串（任意长度）并将其打印到 DOS 视频内存中以在屏幕上打印出来。我已经设法做这样的事情，但仅限于指定的长度（例如整个扩展寄存器）。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:13:05.757

您需要选择一个分隔符，然后打印到该分隔符（而不仅仅是使用计数）。如果您已经可以通过计数来完成，那么对您来说应该非常简单。

# java - 本地 XARecoveryModule.xaRecovery 得到 XA 异常

> ID：14510762
> 
> 赞同：12
> 
> 时间：2013-01-24T21:06:03.433
> 
> 标签：java, jboss, jms, jboss7.x, hornetq

关于可能导致此异常的任何想法：

```
03:54:34,497 WARN  [com.arjuna.ats.jta] (Periodic Recovery) ARJUNA016027: Local XARecoveryModule.xaRecovery got XA exception XAException.XAER_RMERR: javax.transaction.xa.XAException: Error trying to connect to any providers for xa recovery
    at org.hornetq.jms.server.recovery.HornetQXAResourceWrapper.getDelegate(HornetQXAResourceWrapper.java:275) [hornetq-jms-2.2.13.Final.jar:]
    at org.hornetq.jms.server.recovery.HornetQXAResourceWrapper.recover(HornetQXAResourceWrapper.java:77) [hornetq-jms-2.2.13.Final.jar:]
    at com.arjuna.ats.internal.jta.recovery.arjunacore.XARecoveryModule.xaRecovery(XARecoveryModule.java:503) [jbossjts-4.16.2.Final.jar:]
    at com.arjuna.ats.internal.jta.recovery.arjunacore.XARecoveryModule.resourceInitiatedRecoveryForRecoveryHelpers(XARecoveryModule.java:471) [jbossjts-4.16.2.Final.jar:]
    at com.arjuna.ats.internal.jta.recovery.arjunacore.XARecoveryModule.bottomUpRecovery(XARecoveryModule.java:385) [jbossjts-4.16.2.Final.jar:]
    at com.arjuna.ats.internal.jta.recovery.arjunacore.XARecoveryModule.periodicWorkSecondPass(XARecoveryModule.java:166) [jbossjts-4.16.2.Final.jar:]
    at com.arjuna.ats.internal.arjuna.recovery.PeriodicRecovery.doWorkInternal(PeriodicRecovery.java:789) [jbossjts-4.16.2.Final.jar:]
    at com.arjuna.ats.internal.arjuna.recovery.PeriodicRecovery.run(PeriodicRecovery.java:371) [jbossjts-4.16.2.Final.jar:]
Caused by: java.lang.IllegalStateException: Cannot create session factory, server locator is closed (maybe it has been garbage collected)
    at org.hornetq.core.client.impl.ServerLocatorImpl.assertOpen(ServerLocatorImpl.java:1823) [hornetq-core-2.2.13.Final.jar:]
    at org.hornetq.core.client.impl.ServerLocatorImpl.createSessionFactory(ServerLocatorImpl.java:699) [hornetq-core-2.2.13.Final.jar:]
    at org.hornetq.jms.server.recovery.HornetQXAResourceWrapper.connect(HornetQXAResourceWrapper.java:321) [hornetq-jms-2.2.13.Final.jar:]
    at org.hornetq.jms.server.recovery.HornetQXAResourceWrapper.getDelegate(HornetQXAResourceWrapper.java:251) [hornetq-jms-2.2.13.Final.jar:]
    ... 7 more 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-22T09:15:14.027

我也面临同样的问题。除了 Claudiu 发布的链接之外，[此](https://bugzilla.redhat.com/show_bug.cgi?id=914860)链接也很有帮助。

`jbossas-7/jbossas-7/standalone`根据用户的建议，停止 AS7，清除**数据**和**tmp**目录，然后重新启动 AS7 解决了我的问题。

在这里发布它可能会对某人有所帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-02-08T10:27:36.850

使用 SYS 用户在 SQL 控制台中执行这些命令，这对我来说非常有效：

```
 GRANT SELECT ON sys.dba_pending_transactions TO <user>;
  GRANT SELECT ON sys.pending_trans$ TO <user>;
  GRANT SELECT ON sys.dba_2pc_pending TO <user>;
  GRANT EXECUTE ON sys.dbms_xa TO <user>;
  GRANT FORCE ANY TRANSACTION TO <user>; 
```

更改`<user>`用户 jboss 用于连接数据库

# database - NoSQL 技术、用例、优势和劣势

> ID：14510765
> 
> 赞同：5
> 
> 时间：2013-01-24T21:06:33.053
> 
> 标签：database, nosql, scalability, bigdata

我对非关系数据库真的很感兴趣，但由于许多原因只熟悉其中的一小部分。因此，我想列出**您在基本用例中使用的所有 NoSQL 技术、优缺点。**

如果您在工作中遇到一些具体的问题，涉及到一些技术、有趣的经历等，欢迎您与社区分享。

* * *

我个人曾与：

**蒙古数据库：**

用例：如果您需要良好的聚合功能，自动复制，我认为这是最好的之一。规模不错。有许多功能可以像日常使用的数据库一样使用它，如果由于某种原因您不想使用 SQL 解决方案 - Mongo 可能是不错的选择。如果您需要动态查询，mongo 也很棒。还有 mongodb 支持索引 - 这也是一个重要的特性。

*优点*：速度快、规模大、易于使用、内部地理空间索引

*缺点*：写入操作相对较慢，阻塞原子操作可能会产生很多问题。消耗内存的进程可能会“吃掉”所有可用的内存。

**沙发数据库：**

用例：我在 Wiki 喜欢的项目中使用它，我认为这种情况是完美的数据库。每个文档在更新期间自动保存在新修订中的事实有助于查看所有更改。用于累积、偶尔更改的数据，在这些数据上运行预定义的查询。

*优点*：易于使用，面向 REST 的界面，版本。

*缺点*：当文档数量很大（超过一百万）时性能问题，有点纯粹的查询功能（可以通过添加 Lucene 来解决）

**简单数据库：**

用例：这是来自亚马逊的数据服务，是他们提供的所有东西中最便宜的。功能非常有限，因此如果您想使用亚马逊服务，主要用例是使用它，但支付尽可能少的费用。

*优点*：便宜，所有数据都像文本一样存储 - 操作简单，易于使用。

*缺点*：非常有限（文档大小、集合大小、属性计数、属性大小）。像文本一样存储所有数据的方式也会在按日期或按数字排序期间产生额外的问题（因为它使用字典排序，在保存日期或数字时需要一些解决方法）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:09:45.203

**卡桑德拉**

如果写作是您的主要目标，Cassandra 是完美的解决方案，它旨在写入大量内容（在某些情况下，写作可能比阅读更快），因此非常适合记录日志。它对数据分析也非常有用。除了 Cassandra 内置了地理分布功能。

**由 Apache 支持的优势**（良好的社区和高质量），快速编写，没有单点失败。扩展时易于管理（易于部署和扩大集群）。

**弱点**索引实现有问题，按索引查询有一定的局限性，如果使用索引插入性能下降。流数据传输的问题。

# android - 每30分钟后如何触发警报

> ID：14510766
> 
> 赞同：2
> 
> 时间：2013-01-24T21:06:40.860
> 
> 标签：android, multithreading, android-intent, service, broadcastreceiver

**-**是的，我知道这个问题以前在这里被问过，他们的链接是：

[Android：闹钟每 30 分钟播放一次，从 12:30 开始](https://stackoverflow.com/questions/10039593/android-alarm-to-be-play-every-30-minutes-and-it-start-from-1230)

[使用 Alarmmanager 在特定时间启动服务](https://stackoverflow.com/questions/3052149/using-alarmmanager-to-start-a-service-at-specific-time)

[Android：闹钟每 30 分钟播放一次，从 12:30 开始](https://stackoverflow.com/questions/10039593/android-alarm-to-be-play-every-30-minutes-and-it-start-from-1230/10039699#10039699)

**-**现在就我而言，我希望**我的应用程序在一天中的任何时间安装**，然后它**每三十分钟开始响铃**，但**不是从安装时开始，而是按照以下示例的顺序...**

**例如：**

`-->`我在上午 11:15 安装了应用程序。

`-->`现在，当我的手机时钟在上午 11:30 响起时，它应该开始响铃，然后在下午 12:00 再次响铃，然后在下午 12:30 等等......

**-**现在在我的情况`setRepeating`下`AlarmManager`是不开火，或者即使开火它也不起作用....

**-**我尝试使用`Threads within Service`，它有效，但使整个过程变得繁重，几乎无法运行。

这是我的代码............

**测试服务.java**

//它是保持运行的服务。

```
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;
import java.util.concurrent.TimeUnit;

import android.app.AlarmManager;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Intent;
import android.content.SharedPreferences;
import android.media.MediaPlayer;
import android.os.IBinder;
import android.widget.Toast;

public class TestService extends Service {
    /*
     * public static SharedPreferences myPrefs; public static
     * SharedPreferences.Editor prefsEditor;
     */
    private PendingIntent pendingIntentFri;
    private boolean ENABLE;
    private boolean isDone = true;
    Intent myIntent;

    @Override
    public void onCreate() {
        // TODO Auto-generated method stub
        // Toast.makeText(this, "MyAlarmService.onCreate()",
        // Toast.LENGTH_LONG).show();

        // Toast.makeText(this, "Test.onCreate()", Toast.LENGTH_LONG).show();
    }

    @Override
    public IBinder onBind(Intent intent) {
        // TODO Auto-generated method stub
        // Toast.makeText(this, "Test.onBind()", Toast.LENGTH_LONG).show();
        return null;
    }

    @Override
    public void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        Toast.makeText(this, "Test.onDestroy()", Toast.LENGTH_LONG).show();
    }

    @Override
    public void onStart(Intent intent, int startId) {

        System.out
                .println("I reached TEST SERVICE.........................................................");
        // TODO Auto-generated method stub
        super.onStart(intent, startId);
        // Toast.makeText(this, "Test.onStart()", Toast.LENGTH_LONG).show();
        /*
         * Intent myIntent = new Intent(TestService.this, MyAlarmService.class);
         * pendingIntent = PendingIntent.getService(TestService.this, 0,
         * myIntent, 0);
         */

        // myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
        ENABLE = ClockActivity.myPrefs.getBoolean("enable", false);
        System.out.println("ALARM SERVICE RECREATED WITH THE VALUE :::::: "
                + ENABLE);

        System.out
                .println("FROM TESTSERVICE..........................................:"
                        + ENABLE);

        if (ENABLE) {

            System.out
                    .println("FROM IF ENABLED BLOCK TESTSERVICE..........................................:"
                            + ENABLE);
            startAlarm();
        } else {

            System.out.println("FROM ELSE ITS NOT ENABLED: " + ENABLE);
        }
    }

    public void startAlarm() {
        // AlarmManager alarmManager =
        // (AlarmManager)getSystemService(ALARM_SERVICE);
        myIntent = new Intent(TestService.this, MyAlarmService.class);
        // pendingIntent = PendingIntent.getService(SettingsActivity.this, 0,
        // myIntent, 0);

        // Working for the Perfect Time...
        Calendar cur_cal = new GregorianCalendar();
        cur_cal.setTimeInMillis(System.currentTimeMillis());// set the current
                                                            // time and date for
                                                            // this calendar
        final Calendar cal = new GregorianCalendar();
        // cal.add(Calendar.DAY_OF_YEAR, cur_cal.get(Calendar.DAY_OF_YEAR));
        cal.set(Calendar.HOUR, cur_cal.get(Calendar.HOUR));
        cal.set(Calendar.MINUTE, cur_cal.get(Calendar.MINUTE));
        cal.set(Calendar.SECOND, cur_cal.get(Calendar.SECOND));
        // cal.set(Calendar.MILLISECOND, cur_cal.get(Calendar.MILLISECOND));
        cal.set(Calendar.DATE, Calendar.DATE);
        cal.set(Calendar.MONTH, Calendar.MONTH);

        Intent myIntentFri = new Intent(TestService.this, MyAlarmService.class);
        pendingIntentFri = PendingIntent.getService(TestService.this, 0,
                myIntentFri, 0);
        final AlarmManager alarmManagerFri = (AlarmManager) getSystemService(ALARM_SERVICE);
        // alarmManager.set(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),
        // pendingIntent2);

        alarmManagerFri.setRepeating(AlarmManager.RTC_WAKEUP,
                cal.getTimeInMillis(), (30 * 60) * 1000, pendingIntentFri);// for
                                                                            // 30
                                                                            // minutes

    }

    @Override
    public boolean onUnbind(Intent intent) {
        // TODO Auto-generated method stub
        // Toast.makeText(this, "MyAlarmService.onUnbind()",
        // Toast.LENGTH_LONG).show();
        return super.onUnbind(intent);
    }

} 
```

**MyAlarmService.java**

// 存放逻辑的文件

```
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;

import android.app.Service;
import android.content.Intent;
import android.content.SharedPreferences;
import android.media.MediaPlayer;
import android.os.IBinder;
import android.os.SystemClock;
import android.sax.EndTextElementListener;
import android.widget.Toast;

public class MyAlarmService extends Service {
    public static SharedPreferences myPrefs;
    public static SharedPreferences.Editor prefsEditor;
    private boolean SILENCE;

    @Override
    public void onCreate() {
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
    }

    @Override
    public void onStart(Intent intent, int startId) {
        super.onStart(intent, startId);

        System.out
                .println("I AM IN  MYALARMSERVICE..............................................");
        Calendar ct = Calendar.getInstance();
        ct.setTimeInMillis(System.currentTimeMillis());
        int Hour = ct.get(Calendar.HOUR_OF_DAY);
        int Minute = ct.get(Calendar.MINUTE);
        System.out.println("Hour and Minute in Calender is: " + Hour + ":"
                + Minute);

        myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
        SILENCE = myPrefs.getBoolean("silence", false);

        int sHour = myPrefs.getInt("start_hour", 01);
        int sMinute = myPrefs.getInt("start_minute", 00);
        int eHour = myPrefs.getInt("end_hour", 02);
        int eMinute = myPrefs.getInt("end_minute", 00);

        System.out.println("======== SILENCE PERIOD ==========");
        System.out.println("The Start Time is: " + sHour + ":" + sMinute);
        System.out.println("The END Time is: " + eHour + ":" + eMinute);
        System.out.println("==================================");

        Calendar currentTime = new GregorianCalendar();

        // currentTime.set(Calendar.HOUR_OF_DAY, Calendar.HOUR_OF_DAY);
        // currentTime.set(Calendar.MINUTE, Calendar.MINUTE);
        // currentTime.set(Calendar.SECOND, Calendar.SECOND);
        // currentTime.set(Calendar.DATE, Calendar.DATE);
        // currentTime.set(Calendar.MONTH, Calendar.MONTH);

        Calendar start_time = new GregorianCalendar();
        start_time.set(Calendar.HOUR_OF_DAY, sHour);
        start_time.set(Calendar.MINUTE, sMinute);
        // start_time.set(Calendar.SECOND, Calendar.SECOND);
        // start_time.set(Calendar.DATE, Calendar.DATE);
        // start_time.set(Calendar.MONTH, Calendar.MONTH);

        Calendar end_time = new GregorianCalendar();
        end_time.set(Calendar.HOUR_OF_DAY, eHour);
        end_time.set(Calendar.MINUTE, eMinute);

        // if((sHour>eHour)){ // if the Start == PM and End == AM
        // System.out.println("Day is increase. . . .");
        // end_time.add(Calendar.DATE, 1);
        // // end_time.set(Calendar.SECOND, Calendar.SECOND);
        // // end_time.set(Calendar.DATE, Calendar.DATE);
        // // end_time.set(Calendar.MONTH, Calendar.MONTH);
        // }else{ // if the Start == PM and End == AM
        //
        // System.out.println("Day is same. . . .");
        //
        // // end_time.set(Calendar.SECOND, Calendar.SECOND);
        // // end_time.set(Calendar.DATE, Calendar.DATE);
        // // end_time.set(Calendar.MONTH, Calendar.MONTH);
        // }

        System.out
                .println("=============== CURRENT TIME DETAIL ===============");
        System.out.println("CURRENT TIME:   " + currentTime.getTime());
        System.out
                .println("CURRENT DATE:   " + currentTime.getTime().getDate());
        System.out.println("CURRENT HOUR:   "
                + currentTime.getTime().getHours());
        System.out
                .println("===================================================");
        System.out.println("");
        System.out.println("");
        System.out.println("=============== START TIME DETAIL ===============");
        System.out.println("START DATE:   " + start_time.getTime().getDate());
        System.out.println("START TIME:   " + start_time.getTime());
        System.out.println("START HOUR:   " + start_time.getTime().getHours());
        System.out
                .println("===================================================");
        System.out.println("");
        System.out.println("");
        System.out.println("=============== END TIME DETAIL ===============");
        System.out.println("END TIME:   " + end_time.getTime());
        System.out.println("END DATE:   " + end_time.getTime().getDate());
        System.out.println("END HOUR:   " + end_time.getTime().getHours());
        System.out
                .println("===================================================");
        System.out.println("");
        System.out.println("");

        System.out.println(start_time.getTimeInMillis() + " < "
                + System.currentTimeMillis() + " && "
                + System.currentTimeMillis() + " > "
                + end_time.getTimeInMillis());

        if (!SILENCE) {
            System.out.println("SILENCE in if is :" + SILENCE);
            fireAlarm(Hour, Minute);
        } else {

            System.out.println("SILENCE in else is: " + SILENCE);

            if (sHour > eHour) { // FOR START == PM and END == AM

                System.out.println("FOR start=PM AND end=AM");

                if (((((start_time.getTimeInMillis() <= System
                        .currentTimeMillis())) || ((System.currentTimeMillis() <= (end_time
                        .getTimeInMillis()) + ((3 * 60) * 1000)))))) {
                    System.out.println("You are in Silent mode");
                    Toast.makeText(getApplicationContext(),
                            "Ship's Clock is Silent", Toast.LENGTH_SHORT)
                            .show();
                } else {
                    fireAlarm(Hour, Minute);
                }
            } else { // FOR START == AM/PM and END == AM/PM

                System.out.println("FOR start=AM/PM AND end=AM/PM");

                if (((((start_time.getTimeInMillis() <= System
                        .currentTimeMillis())) && ((System.currentTimeMillis() <= (end_time
                        .getTimeInMillis()) + ((3 * 60) * 1000)))))) {
                    System.out.println("You are in Silent mode");
                    Toast.makeText(getApplicationContext(),
                            "Ship's Clock is Silent", Toast.LENGTH_SHORT)
                            .show();
                } else {
                    fireAlarm(Hour, Minute);
                }
            }

        }
    }

    public void fireAlarm(int Hour, int Minute) {

        // if(Hour>12){
        // Toast.makeText(getApplicationContext(),
        // "Please Set the More the 12 Hour", Toast.LENGTH_SHORT).show();
        // }

        // 12:30
        if ((Hour == 12) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("ONE Bell");
            playSound(R.raw.one_bell);
        }
        // 01:00
        if ((Hour == 1) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("TWO Bell");
            playSound(R.raw.two_bells);
        }
        // 01:30
        if ((Hour == 1) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("THREE Bell");
            playSound(R.raw.three_bells);
        }
        // 02:00
        if ((Hour == 2) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("FOUR Bell");
            playSound(R.raw.four_bells);
        }
        // 02:30
        if ((Hour == 2) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("FIVE Bell");
            playSound(R.raw.five_bells);
        }
        // 03:00
        if ((Hour == 3) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("SIX Bell");
            playSound(R.raw.six_bells);
        }
        // 03:30
        if ((Hour == 3) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("SEVEN Bell");
            playSound(R.raw.seven_bells);
        }
        // 04:00
        if ((Hour == 4) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("EIGHT Bell");
            playSound(R.raw.eight_bells);
        }
        // 04:30
        if ((Hour == 4) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("ONE Bell");
            playSound(R.raw.one_bell);
        }
        // 05:00
        if ((Hour == 5) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("TWO Bell");
            playSound(R.raw.two_bells);
        }
        // 05:30
        if ((Hour == 5) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("THREE Bell");
            playSound(R.raw.three_bells);
        }
        // 06:00
        if ((Hour == 6) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("FOUR Bell");
            playSound(R.raw.four_bells);
        }
        // 06:30
        if ((Hour == 6) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("FIVE Bell");
            playSound(R.raw.five_bells);
        }
        // 07:00
        if ((Hour == 7) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("SIX Bell");
            playSound(R.raw.six_bells);
        }
        // 07:30
        if ((Hour == 7) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("SEVEN Bell");
            playSound(R.raw.seven_bells);
        }
        // 08:00
        if ((Hour == 8) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("EIGHT Bell");
            playSound(R.raw.eight_bells);
        }
        // 08:30
        if ((Hour == 8) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("ONE Bell");
            playSound(R.raw.one_bell);
        }
        // 09:00
        if ((Hour == 9) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("TWO Bell");
            playSound(R.raw.two_bells);
        }
        // 09:30
        if ((Hour == 9) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("THREE Bell");
            playSound(R.raw.three_bells);
        }
        // 10:00
        if ((Hour == 10) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("FOUR Bell");
            playSound(R.raw.four_bells);
        }
        // 10:30
        if ((Hour == 10) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("FIVE Bell");
            playSound(R.raw.five_bells);
        }
        // 11:00
        if ((Hour == 11) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("SIX Bell");
            playSound(R.raw.six_bells);
        }
        // 11:30
        if ((Hour == 11) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("SEVEN Bell");
            playSound(R.raw.seven_bells);
        }
        // 12:00
        if ((Hour == 12) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Eight Bell");
            playSound(R.raw.eight_bells);
        }
        // 00:00
        if ((Hour == 00) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Eight Bell");
            playSound(R.raw.eight_bells);
        }
        // 00:30
        if ((Hour == 00) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("One Bell");
            playSound(R.raw.one_bell);
        }
        // //////////////////// FOR 24 HOUR

        // 13:00
        if ((Hour == 13) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Two Bell");
            playSound(R.raw.two_bells);
        }
        // 13:30
        if ((Hour == 13) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Three Bell");
            playSound(R.raw.three_bells);
        }
        // 14:00
        if ((Hour == 14) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Four Bell");
            playSound(R.raw.four_bells);
        }
        // 14:30
        if ((Hour == 14) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Five Bell");
            playSound(R.raw.five_bells);
        }
        // 15:00
        if ((Hour == 15) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Six Bell");
            playSound(R.raw.six_bells);
        }
        // 15:30
        if ((Hour == 15) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Seven Bell");
            playSound(R.raw.seven_bells);
        }
        // 16:00
        if ((Hour == 16) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Eight Bell");
            playSound(R.raw.eight_bells);
        }
        // 16:30
        if ((Hour == 16) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("One Bell");
            playSound(R.raw.one_bell);
        }
        // 17:00
        if ((Hour == 17) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Two Bell");
            playSound(R.raw.two_bells);
        }
        // 17:30
        if ((Hour == 17) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Three Bell");
            playSound(R.raw.three_bells);
        }
        // 18:00
        if ((Hour == 18) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Four Bell");
            playSound(R.raw.four_bells);
        }
        // 18:30
        if ((Hour == 18) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Five Bell");
            playSound(R.raw.five_bells);
        }
        // 19:00
        if ((Hour == 19) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Six Bell");
            playSound(R.raw.six_bells);
        }
        // 19:30
        if ((Hour == 19) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Seven Bell");
            playSound(R.raw.seven_bells);
        }
        // 20:00
        if ((Hour == 20) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Eight Bell");
            playSound(R.raw.eight_bells);
        }
        // 20:30
        if ((Hour == 20) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("One Bell");
            playSound(R.raw.one_bell);
        }
        // 21:00
        if ((Hour == 21) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("two Bell");
            playSound(R.raw.two_bells);
        }
        // 21:30
        if ((Hour == 21) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Three Bell");
            playSound(R.raw.three_bells);
        }
        // 22:00
        if ((Hour == 22) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Four Bell");
            playSound(R.raw.four_bells);
        }
        // 22:30
        if ((Hour == 22) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Five Bell");
            playSound(R.raw.five_bells);
        }
        // 23:00
        if ((Hour == 23) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Six Bell");
            playSound(R.raw.six_bells);
        }
        // 23:30
        if ((Hour == 23) && (Minute == 30)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Seven Bell");
            playSound(R.raw.seven_bells);
        }
        // 24:00
        if ((Hour == 24) && (Minute == 00)) {
            System.out.println("The Time is: " + Hour + " : " + Minute);
            System.out.println("Eight Bell");
            playSound(R.raw.eight_bells);
        }
    }

    @Override
    public boolean onUnbind(Intent intent) {
        // TODO Auto-generated method stub
        // Toast.makeText(this, "MyAlarmService.onUnbind()",
        // Toast.LENGTH_LONG).show();
        return super.onUnbind(intent);
    }

    public void playSound(int resources) {

        MediaPlayer mp = MediaPlayer.create(getApplicationContext(), resources);
        mp.start();

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:58:38.693

好吧，这很糟糕：

```
 cal.set(Calendar.DATE, Calendar.DATE); <-- This sets the day of the month to 5!
    cal.set(Calendar.MONTH, Calendar.MONTH); <-- This sets the month to 2 (March)! 
```

你想在这里做什么？

你为什么不直接用你想要的参数创建一个日历，像这样：

```
Calendar cal = new GregorianCalendar(); // Current date and time
cal.set(Calendar.MILLISECOND, 0);
cal.set(Calendar.SECOND, 0);
// Round minutes up to next multiple of 30
int minutes = cal.get(Calendar.MINUTE);
if (minutes < 30) {
    cal.set(Calendar.MINUTE, 30);
} else {
    cal.set(Calendar.MINUTE, 0);
    cal.add(Calendar.HOUR, 1); // Next hour (will roll the day/month/year over if needed)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T22:20:52.873

另一种方法是获取当前时间并以毫秒为单位添加 30 分钟：

```
30 mins (30 mins to ms = 60s * 1000ms * 30) = 1800000 ms

long Offset = Calendar.getInstance().getTimeInMillis() + 1800000; 
```

并且您应该打印在调试**期间**为警报设置的时间，以确保它设置为在正确的时间响起。

在日历实例上使用 getTime() 方法，然后在本地时间打印它。

# github - GitHub：合并旧分支

> ID：14510772
> 
> 赞同：1
> 
> 时间：2013-01-24T21:06:50.203
> 
> 标签：github, branch, branching-and-merging, branching-strategy

因此，假设您从 master 分支为您的应用程序创建一个“新功能 #101”。现在这个特性要等到 X 个月后（我们会说 3 个月）才会被推送到主服务器。在这 3 个月的时间里，假设我们分支了其他推送给 master 的特性，甚至一些 bug 修复直接给 master。自我们的“新功能 #101”以来，我们现在有一个包含 14 次以上提交的主分支。所以现在说它是 +3 个月和时间来推动“新功能 #101”，将其合并到 master 中的最佳方法是什么？我们是否直接合并到主服务器中，我们是否重新设置“新功能 #101”？正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:04:19.210

先合并，清除所有`master`合并`new feature #101`冲突，然后将它简单地合并回 master（这样也更容易看到差异）。

# javascript - 用 D3.js 制作的树形图在 Chrome 中不起作用

> ID：14510774
> 
> 赞同：1
> 
> 时间：2013-01-24T21:06:57.443
> 
> 标签：javascript, google-chrome, d3.js, treemap

如果这是一个愚蠢的问题，我很抱歉，但我对 js 真的很陌生，而且我有点迷茫（我应该从更容易做的事情开始>_<）。我试图根据这个例子创建一个每年显示政党的树状图：http: [//bl.ocks.org/4063582](http://bl.ocks.org/4063582)

问题是我的树形图在 Chrome 上根本不起作用，尽管它在 Safari 上运行良好。这是我创建的文件（索引 + json）：[https ://www.dropbox.com/sh/z7bre4ffiyc2k8i/e45sJSbK7a](https://www.dropbox.com/sh/z7bre4ffiyc2k8i/e45sJSbK7a)

感谢您为我提供的所有帮助！如果你知道一个好的教程开始，我会很感激=）

# php - 我需要重定向到与 HTACCESS 类型匹配的页面

> ID：14510776
> 
> 赞同：-2
> 
> 时间：2013-01-24T21:07:01.133
> 
> 标签：php, .htaccess, http-referer, http-redirect, redirect

如果您访问我的网站：

[http://thaflynation.tumblr.com/post/41322801418/another-dope-track-by-tnght-ru-ready/](http://thaflynation.tumblr.com/post/41322801418/another-dope-track-by-tnght-r-u-ready/)

它会将您重定向到：

[http://thaflynation.com](http://thaflynation.com)

但是我需要它重定向到：

[http://thaflynation.com/audio/41322801418/another-dope-track-by-tnght-ru-ready/](http://thaflynation.com/audio/41322801418/another-dope-track-by-tnght-r-u-ready/)

所以我需要获得 http 推荐：http: [//thaflynation.tumblr.com/post/POSTID/POST_SLUG](http://thaflynation.tumblr.com/post/POSTID/POST_SLUG) 并将该推荐重定向到：[http ://thaflynation.com/audio/POSTID/POST_SLUG](http://thaflynation.com/audio/POSTID/POST_SLUG)

我怎么能用 HTACCESS 做到这一点？请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:16:21.263

如果要替换`post`为`audio`，则必须在发布后捕获部分并将其附加到音频上

```
RewriteEngine On
RewriteRule ^/?post/(.*) /audio/$1 
```

如果您想进行外部重定向

```
RewriteEngine On
RewriteRule ^/?post/(.*) http://thaflynation.com/audio/$1 [R,L] 
```

# cocoalibspotify-2.0 - 可以在模拟器上使用尝试登录与用户名登录，但不能在 iPhone 上登录

> ID：14510781
> 
> 赞同：0
> 
> 时间：2013-01-24T21:07:14.167
> 
> 标签：cocoalibspotify-2.0

我有一个奇怪的问题。使用标准 SPLoginViewController 登录后，我保存了用户名和凭据。再次启动后，我尝试调用：

> [[SPSession sharedSession] attemptLoginWithUserName：existingCredential：

在 iOS 模拟器 (iOS 6.0) 上，它工作得很好。在我的 iPhone (iOS 6.0.1) 上，它没有。在我调用了尝试登录方法五分钟后，SPSession 正在登录。当我将应用程序置于后台时，SPSession 也在登录。

有谁知道更多关于这个，也许是一个解决方案？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-30T22:22:09.990

libspotify 中似乎存在一个已知错误，其中 sp_session_process_events() 有时会在 next_timeout 中返回过高的值。我已经看到诸如 300100 和 300195 之类的值从例程中出来。

一种解决方法是将您的等待设置为 next_timeout 和 50 的最大值。（或 100 或任何您想要的。）请参阅[https://github.com/spotify/cocoalibspotify/issues/140](https://github.com/spotify/cocoalibspotify/issues/140)

我希望 Spotify 能够为 libspotify 创建一个已知问题列表。我浪费了一天时间试图把这个挖出来。希望这篇文章能拯救其他人同样的命运。

# android - CalendarContract.EventsColumns.CUSTOM_APP_URI 是做什么用的？

> ID：14510788
> 
> 赞同：6
> 
> 时间：2013-01-24T21:07:31.047
> 
> 标签：android, calendar

标题说明了一切：CalendarContract.EventsColumns.CUSTOM_APP_URI 是干什么用的？

我问是因为我正在寻找一个地方，我的应用程序可以将一些特定于应用程序的数据填充到事件表中。也许这是一个徒劳的问题，因为当然，我需要确保其他一些应用程序不会破坏我的数据。

也许一个更好的问题是：如何在日历事件表中存储特定于应用程序的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-28T18:01:20.030

正如 CalendarContract 中提到的：

```
/**
 * Activity Action: Display the event to the user in the custom app as
 * specified in {@link EventsColumns#CUSTOM_APP_PACKAGE}. The custom app
 * will be started via {@link Activity#startActivityForResult(Intent, int)}
 * and it should call {@link Activity#setResult(int)} with
 * {@link Activity#RESULT_OK} or {@link Activity#RESULT_CANCELED} to
 * acknowledge whether the action was handled or not.
 *
 * The custom app should have an intent-filter like the following
 * <pre>
 * {@code
 * <intent-filter>
 *    <action android:name="android.provider.calendar.action.HANDLE_CUSTOM_EVENT" />
 *    <category android:name="android.intent.category.DEFAULT" />
 *    <data android:mimeType="vnd.android.cursor.item/event" />
 * </intent-filter>
 * }
 * </pre>
 * <p>
 * Input: {@link Intent#getData} has the event URI. The extra
 * {@link #EXTRA_EVENT_BEGIN_TIME} has the start time of the instance. The
 * extra {@link #EXTRA_CUSTOM_APP_URI} will have the
 * {@link EventsColumns#CUSTOM_APP_URI}.
 * <p>
 * Output: {@link Activity#RESULT_OK} if this was handled; otherwise
 * {@link Activity#RESULT_CANCELED}
 */ 
```

// @SdkConstant(SdkConstantType.ACTIVITY_INTENT_ACTION) public static final String ACTION_HANDLE_CUSTOM_EVENT = "android.provider.calendar.action.HANDLE_CUSTOM_EVENT";

# android - 在excel上显示csv文件

> ID：14510791
> 
> 赞同：0
> 
> 时间：2013-01-24T21:07:37.623
> 
> 标签：android, excel, csv

以下代码从数据库中获取所有数据并将其以 CSV 格式写入 SDCard。我的问题是当我在 Excel 中打开文件时，它会以这种格式写入数据

**例子**

254868,2356489,4587963,787954,7895487,452369,4546545

但我希望结果是这样的：

```
254868
2356489
4587963
7879544
7895487
4523697
4546545 
```

**这是代码**

```
if (root.canWrite()){  
                        File fileDir = new File(root.getAbsolutePath()+"/fun/");  
                        fileDir.mkdirs();  

                        File file= new File(fileDir, "itisfun.csv");  
                        FileWriter filewriter = new FileWriter(file);  
                        BufferedWriter out = new BufferedWriter(filewriter);  
                        out.write( dbUser.getMeterNUmber2(dd,sp).toString()+"\n" ); 
                        //out.write( "\"" );

                        out.close();  
                    }  
                } catch (IOException e) {  
                    Log.e("ERROR:---", "Could not write file to SDCard" +  e.getMessage());  
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:20:21.660

尝试

```
String[] div = dbUser.getMeterNUmber2(dd,sp).toString().split(',');
for (int i =0; i<div.length;i++)
out.write( div[i] +"\n" ); 
```

我假设

```
dbUser.getMeterNUmber2(dd,sp).toString() 
```

返回

```
254868,2356489,4587963,787954,7895487,452369,4546545 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:20:48.540

检查 getMeterNUMber2 函数是否在每条记录后写入逗号或换行符。如果您使用逗号，那么 excel 将它们全部放在一行中是正确的。如果你使用换行符，那么每一行都应该有你想要的。

# file - 在文件中的 gtk-treeview 单元格中写入更改

> ID：14510792
> 
> 赞同：1
> 
> 时间：2013-01-24T21:07:40.213
> 
> 标签：file, treeview, gtk

我正在 gtk 中编写代码，打开一个文件，将其解析为

```
/*Open and scan the file*/
fd = open (filename, O_RDWR);
scanner = g_scanner_new (NULL);
g_scanner_input_file (scanner, fd);
....
....
g_scanner_destroy (scanner);
gtk_label_set_text(GTK_LABEL(flabel), filename);
close (fd); 
```

并在树视图中查看（在单独的函数中）。树状图如下：

```
store = gtk_list_store_new (NUM_COLS, G_TYPE_STRING, G_TYPE_STRING,
                                                G_TYPE_STRING, 
                                                G_TYPE_STRING, 
                                                G_TYPE_STRING);

  tree = gtk_tree_view_new_with_model (GTK_TREE_MODEL (store));
/* #1: KEY COLUMN */  
  cell = gtk_cell_renderer_text_new ();
  g_object_set (cell,
                "editable", TRUE,
                NULL);
  g_signal_connect (cell, 
      "edited",G_CALLBACK(cell_edited), 
      tree);
  g_object_set_data (G_OBJECT (cell), 
      "column", GINT_TO_POINTER (COL_BIB_KEY));

  GtkTreeViewColumn *col_key,*col_year,*col_type,*col_auth,*col_pub;
  col_key=gtk_tree_view_column_new_with_attributes (
      "Key", cell,
      "text", COL_BIB_KEY,
      NULL);
  gtk_tree_view_column_set_sort_column_id( col_key, ID_KEY);
  gtk_tree_view_append_column (GTK_TREE_VIEW (tree), col_key);
  gtk_tree_view_column_set_max_width  (col_key,100); 
```

其中 cell_edited 是将数据写入树视图本身的函数：

```
void cell_edited(GtkCellRendererText *renderer,
    gchar *path,
    gchar *new_text,
    GtkTreeView *treeview)
{
  guint column;
  GtkTreeIter iter;
  GtkTreeModel *model;
  gpointer columnptr = g_object_get_data(G_OBJECT(renderer), "column");
  column = GPOINTER_TO_UINT(columnptr);

  if (g_ascii_strcasecmp (new_text, "") != 0)
  {
    model = gtk_tree_view_get_model (treeview);
    if (gtk_tree_model_get_iter_from_string (model, &iter, path))
      gtk_list_store_set (GTK_LIST_STORE (model), &iter, column, new_text, -1);
  }
} 
```

问题是我还想更新文件中的数据。我可以就如何做到这一点获得一些帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:47:27.263

您必须以所需的相同格式构建文件的内容，然后将其写出。

一种方法是使用 GString 构建内容，然后使用 g_file_set_contents 将其写出。

```
// Create GString
GString *str = g_string_new ("");

// Iterate over the list store
GtkTreeIter iter;
gboolean valid;

for (valid = gtk_tree_model_get_iter_first (GTK_TREE_MODEL (store), &iter);
     valid;
     valid = gtk_tree_model_iter_next (GTK_TREE_MODEL (store), &iter)) {
    char *string0, *string1, *string2, *string3, *string4;

    gtk_tree_model_get (GTK_TREE_MODEL (store), &iter,
                        0, &string0,
                        1, &string1,
                        2, &string2,
                        3, &string3,
                        4, &string4,
                        -1);

    // I don't know the format of your file, so I'm just going to separate them with a comma
    g_string_append_printf (str, "%s,%s,%s,%s,%s\n", string0, string1, string2, string3, string4);

    // gtk_tree_model_get copies strings, so free them
    g_free (string0);
    g_free (string1);
    g_free (string2);
    g_free (string3);
    g_free (string4);
}

// Set the file contents atomically, add error checking
g_file_set_contents (filename, str->str, -1, NULL);

// Free the GString
g_string_free (str, TRUE); 
```

# java - Netbeans 中 JButton 中的 ImageIcon

> ID：14510799
> 
> 赞同：0
> 
> 时间：2013-01-24T21:08:11.637
> 
> 标签：java, swing, netbeans, jbutton, netbeans-7

我从 Netbeans 中的资源添加图像图标，但在运行时，Netbeans 中的按钮为空-->选择按钮-->属性-->图标-->添加图像-->项目内的图像。我选择包和图像，添加它，然后`JButton`在 Netbeans 中可视化图像，但是当我运行项目时`JButton`是空的。

ide生成的代码：

```
jbtnApriDaFile = new javax.swing.JButton();
jbtnApriDaFile.setIcon(new javax.swing.ImageIcon(getClass().getResource("/resources/html5.png"))); // NOI18N
add(jbtnApriDaFile, new org.netbeans.lib.awtextra.AbsoluteConstraints(500, 10, 30, 30)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:12:33.777

删除`/`路径中的第一个。

另外，在 之后`jbtnApriDaFile.setIcon ()`，尝试调用`jbtnApriDaFile.revalidate ()`。

# jquery - jQuery - 如何在表格的多行中显示和隐藏标签和输入

> ID：14510801
> 
> 赞同：1
> 
> 时间：2013-01-24T21:08:15.350
> 
> 标签：jquery, show-hide

我有一个看起来像这样的表：

```
<table id="tblBranchCoverage" class="hideOnLoad" width="100%">
    <tr class="coverageRow" style="cursor: pointer;">
        <td class="countyCovered" width="115px">
            <label class="branchCountyCovered coverageDisplay">Douglas</label>
            <input type="text" class="edit editBox editCounty" style="display: none; width: 111px;" value="Douglas"><br>
            <input type="submit" class="button edit submitCoverageEdits" style="display: none;" value="Save Changes"><br>
            <input type="submit" class="button edit cancelCoverageEdits" style="display: none;" value="Cancel">
        </td>
        <td class="stateCovered" width="30px">
            <label class="branchStateCovered coverageDisplay">GA</label>
            <input type="text" class="edit editBox editState" style="display: none; width: 22px;" value="GA" max-length="2">
        </td>
        <td class="zipsCovered">
            <label class="branchZipsCovered coverageDisplay">30122, 30133, 30134, 30135, 30154, 30187</label>
            <textarea class="edit editBox editZips" style="display: none;" cols="100">30122, 30133, 30134, 30135, 30154, 30187</textarea>
        </td>
    </tr>
    <tr class="coverageRow">
        <td class="countyCovered" width="115px">
            <label class="branchCountyCovered coverageDisplay">Forsyth</label>
            <input type="text" class="edit editBox editCounty" style="display: none; width: 111px;" value="Forsyth"><br>
            <input type="submit" class="button edit submitCoverageEdits" style="display: none;" value="Save Changes"><br>
            <input type="submit" class="button edit cancelCoverageEdits" style="display: none;" value="Cancel">
        </td>
        <td class="stateCovered" width="30px">
            <label class="branchStateCovered coverageDisplay">GA</label>
            <input type="text" class="edit editBox editState" style="display: none; width: 22px;" value="GA" max-length="2">
        </td>
        <td class="zipsCovered">
            <label class="branchZipsCovered coverageDisplay">30028, 30040, 30041</label>
            <textarea class="edit editBox editZips" style="display: none;" cols="100">30028, 30040, 30041</textarea>
        </td>
    </tr>
</table> 
```

我需要遍历表的行，找到具有“编辑”类元素的行（最多只有一个，但可能所有行都会显示标签并隐藏输入）设置为“显示：无”。找到该行后，我需要隐藏 .edit 元素并显示标签（当时将设置样式“display：none”）。

我在这种情况下这样做：

```
$('#tblBranchCoverage').on('click', 'tr', function() { 
```

因此，基本上，当用户单击一行时，表中的所有其他行都将隐藏 .edit 元素并显示标签，并且在单击的行中编辑元素应该显示并且标签被隐藏。

我最接近它的工作是这样的：

```
 $(this).parent().find('tr td').each(function() {
        $(this).find('.edit').hide();
        $(this).find('.coverageDisplay [style*="display: none"]').show();
    });
    $(this).find('.coverageDisplay').fadeOut(200);
    $(this).find('.edit').delay(200).fadeIn(200);
}); 
```

这根本不是真正的“关闭”，因为单击的行会隐藏其所有元素。

我已经搞砸了两个小时。我真的很想得到一些帮助！

谢谢。

**[编辑]** 根据要求，这是一个[jsFiddle](http://jsfiddle.net/eventide/KZhhH/)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T21:25:08.173

您可以使用 jQuery 的`siblings()`方法来获取其他`<tr>`元素：[http ://api.jquery.com/siblings/](http://api.jquery.com/siblings/)

```
$('#tblBranchCoverage tr').click(function() {
    $(this).find('.edit').fadeIn(200);
    $(this).find('label').fadeOut(200);
    $(this).siblings('tr').find('label').show();
    $(this).siblings('tr').find('.edit').hide();
}); 
```

您可能更喜欢这种方法，以便单击已处于编辑模式的行不会隐藏和重新淡入它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:14:50.893

像[这样](http://jsfiddle.net/Qj89m/)？

```
$('#tblBranchCoverage').on('click', 'tr', function() {

  // hide all other .edit's and show all other labels
  $('#tblBranchCoverage tr').not(this).find('.edit').hide();
  $('#tblBranchCoverage tr').not(this).find('label').show();

  // hide this row's label and show this row's edit div
  $('label', this).hide();
  $('.edit', this).show();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:27:34.330

这是您提到的代码片段。

```
var $tbl = $('#tblBranchCoverage'),
    $lables = $tbl.find('td .coverageDisplay');
    $editables = $tbl.find('td .edit'),
$tbl.on('click', 'tr', function() {
  var $this = $(this);
  $editables.hide();
  $lables.show();
  $this.find('.coverageDisplay').fadeOut(200);
  $this.find('.edit').delay(200).fadeIn(200);
}); 
```

这是 jsFiddle [http://jsfiddle.net/greenrobo/JsGrx/的链接](http://jsfiddle.net/greenrobo/JsGrx/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T22:24:24.193

您还需要禁用当前选定行的 onclick 触发器。这是我的实现：

[http://jsfiddle.net/cH6Ba/15/](http://jsfiddle.net/cH6Ba/15/)

```
editRow() {

    $('#tblBranchCoverage .edit').hide(); // hide all edits. 
    $('#tblBranchCoverage label').show(); // show all labels. 
    $('#tblBranchCoverage tr').on('click', editRow); //rebind all events

    $(this).find('.edit').delay(200).fadeIn(200); // show our inputs
    $(this).find('label').delay(200).fadeOut(200); // hide our labels
    $(this).closest('tr').off('click', editRow); //unbind trigger on current row. 
};

$('#tblBranchCoverage tr').on('click', editRow); 
```

Jeff 的解决方案也非常干净地完成了这一点。

# c - 通过孩子访问父母

> ID：14510804
> 
> 赞同：1
> 
> 时间：2013-01-24T21:08:25.970
> 
> 标签：c, multithreading, fork

基本上，我有这个功能。在 fgets 之后，我希望父母通过将其 play 变量更改为 0 来让孩子停止。我该怎么做？

```
 void readQuestion(char * question) {
      int play = 1;
      char inputline[256];
      int s;
      char * holder;
      int p = fork();
      if (p == 0) {
        while(play) {
          holder = strsep(&question," ");
          if(holder) {
        printf("%s\n",holder);
        sleep(1);
          }
          else{
        play = 0;
          }
        }
      }
      else {
        fgets(inputline,256,stdin);
        printf("%s",inputline);
        kill();
      }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:11:27.350

为此，您需要采用以下两种方法之一...

1.  [使用诸如signal(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)或[socket(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/socket.7.html)之类的消息 API 发送消息
2.  如果你真的想调整孩子的记忆，你不需要[fork(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/fork.2.html)而是[一个线程库。](https://computing.llnl.gov/tutorials/pthreads/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:11:43.643

您可能不想分叉，而是创建一个线程。Fork 正在创建一个新进程，因此您将有两个进程，每个进程都有自己的“play”变量副本

见... [http://www.geekride.com/fork-forking-vs-threading-thread-linux-kernel/](http://www.geekride.com/fork-forking-vs-threading-thread-linux-kernel/)

# grails - Grails 1.3.7 / Java 7 兼容性

> ID：14510805
> 
> 赞同：19
> 
> 时间：2013-01-24T21:08:30.633
> 
> 标签：grails, java

有没有人幸运地使用 Java 7 运行 Grails 1.3.7 应用程序？我创建了一个全新的 Grails 1.3.7 应用程序并尝试在 Java 7 下运行它。我收到以下错误，但应用程序似乎运行正常。我们有一些 1.3.7 应用程序我们不愿意升级到 Grails 2.x，所以任何想法都将不胜感激。

```
Unable to use direct char[] access of java.lang.String
java.lang.NoSuchFieldException: count
    at java.lang.Class.getDeclaredField(Class.java:1899)
    at org.codehaus.groovy.grails.web.util.StringCharArrayAccessor.<clinit>(StringCharArrayAccessor.java:53)
    at org.codehaus.groovy.grails.web.util.StreamCharBuffer.readAsString(StreamCharBuffer.java:531)
    at org.codehaus.groovy.grails.web.util.StreamCharBuffer.toString(StreamCharBuffer.java:552)
    at org.codehaus.groovy.grails.web.pages.FastStringWriter.getValue(FastStringWriter.java:59)
    at org.codehaus.groovy.grails.web.pages.FastStringWriter.toString(FastStringWriter.java:55)
    at org.codehaus.groovy.grails.web.pages.GroovyPageParser.startTag(GroovyPageParser.java:1119)
    at org.codehaus.groovy.grails.web.pages.GroovyPageParser.page(GroovyPageParser.java:801)
    at org.codehaus.groovy.grails.web.pages.GroovyPageParser.generateGsp(GroovyPageParser.java:380)
    at org.codehaus.groovy.grails.web.pages.GroovyPageParser.parse(GroovyPageParser.java:326)
    at org.codehaus.groovy.grails.web.pages.GroovyPagesTemplateEngine.buildPageMetaInfo(GroovyPagesTemplateEngine.java:584)
    at org.codehaus.groovy.grails.web.pages.GroovyPagesTemplateEngine.createTemplate(GroovyPagesTemplateEngine.java:493)
    at org.codehaus.groovy.grails.web.pages.GroovyPagesTemplateEngine.createTemplateWithResource(GroovyPagesTemplateEngine.java:473)
    at org.codehaus.groovy.grails.web.pages.GroovyPagesTemplateEngine.createTemplate(GroovyPagesTemplateEngine.java:246)
    at org.codehaus.groovy.grails.web.pages.GroovyPagesTemplateEngine.createTemplateForUri(GroovyPagesTemplateEngine.java:373)
    at org.codehaus.groovy.grails.web.pages.GroovyPagesTemplateEngine.createTemplateForUri(GroovyPagesTemplateEngine.java:345)
    at org.codehaus.groovy.grails.web.pages.GroovyPagesTemplateEngine.createTemplate(GroovyPagesTemplateEngine.java:262)
    at org.codehaus.groovy.grails.web.servlet.view.GroovyPageView.renderWithTemplateEngine(GroovyPageView.java:146)
    at org.codehaus.groovy.grails.web.servlet.view.GroovyPageView.renderMergedOutputModel(GroovyPageView.java:81)
    at org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:250)
    at org.codehaus.groovy.grails.web.mapping.filter.UrlMappingsFilter.renderViewForUrlMappingInfo(UrlMappingsFilter.java:260)
    at org.codehaus.groovy.grails.web.mapping.filter.UrlMappingsFilter.doFilterInternal(UrlMappingsFilter.java:189)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.codehaus.groovy.grails.web.sitemesh.GrailsPageFilter.obtainContent(GrailsPageFilter.java:245)
    at org.codehaus.groovy.grails.web.sitemesh.GrailsPageFilter.doFilter(GrailsPageFilter.java:134)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.codehaus.groovy.grails.web.servlet.filter.GrailsReloadServletFilter.doFilterInternal(GrailsReloadServletFilter.java:104)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.codehaus.groovy.grails.web.servlet.mvc.GrailsWebRequestFilter.doFilterInternal(GrailsWebRequestFilter.java:69)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.codehaus.groovy.grails.web.filters.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:69)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:88)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)
    at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-01-28T12:53:04.007

设置`JAVA_OPTS`系统属性：
Windows：`SET JAVA_OPTS=-Dstringchararrayaccessor.disabled=true`
Unix：`export JAVA_OPTS=-Dstringchararrayaccessor.disabled=true`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-24T21:12:38.673

这很烦人，但可以安全地忽略，并在 2.1.1 和 2.2 中修复 - 有关详细信息，请参阅[https://github.com/grails/grails-core/issues/2359](https://github.com/grails/grails-core/issues/2359)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-27T03:54:28.867

从我[在源代码中](https://github.com/grails/grails-core/blob/master/grails-web/src/main/groovy/org/codehaus/groovy/grails/web/util/StringCharArrayAccessor.java)看到的内容，您可以将 JVM 属性*stringchararrayaccessor.disabled*设置为*true*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-06T18:09:20.367

修复了启动 Collabnet Subversion Edge Server 4.x 时观察到相同问题的人们。

猜猜添加 JAVA_OPTS=-Dstringchararrayaccessor.disabled=true 的正确位置不是 csvn 启动脚本，而是 tanukisoft wrapper conf。

又名，编辑 $csvn_home/data/conf/csvn-wrapper.conf 并添加，

> wrapper.java.additional.x=-Dstringchararrayaccessor.disabled=true

（其中 x 依次未使用）

# c# - foreach CheckBoxList 始终未选中

> ID：14510806
> 
> 赞同：0
> 
> 时间：2013-01-24T21:08:40.633
> 
> 标签：c#, web-controls, checkboxlist, listitem, asp.net-webcontrol

所以基本上，我的目标是做一个简单的循环，在提交时，在继续之前检查是否已经检查了一堆框。我知道如何在 PHP 或 MVC 中做到这一点，但我的老板强迫我使用 web 控件。

因此，我们到了。

Default.aspx 中的相关代码

```
<div>
    <asp:CheckBoxList id="eligibilityreqs" runat="server">
        <asp:ListItem value="item1" runat="server">I am great</asp:ListItem>
        <asp:ListItem value="item2" runat="server">I am amazing.</asp:ListItem>
        <asp:ListItem value="item3" runat="server">I completed EVERTHING</asp:ListItem>
        <asp:ListItem value="item4" runat="server">Pies are delicious</asp:ListItem>
        <asp:ListItem value="item5" runat="server">Oh man a fifth one</asp:ListItem>
    </asp:CheckBoxList>
</div>
<p>
    <asp:Label Text="" id="finalmessage" runat="server" />
</p>
<div>
    <asp:Button Text="Submit" runat="server" onclick="process" />
</div> 
```

Default.aspx 的代码隐藏

```
using System;
using System.Web;
using System.Web.UI;
using System.Data;
using System.Web.Configuration;
using System.Data.Odbc;
using System.Web.UI.WebControls;

namespace minor
{
    public partial class Default : System.Web.UI.Page
    {
        protected void process (object sender, EventArgs e)
        {
            bool valid = true;
            string debugtext = "";
            foreach (ListItem li in eligibilityreqs.Items) {
                if (!li.Selected) {
                    valid = false;
                    debugtext = debugtext + li.Selected;
                }
            }
            if (!valid) {
                finalmessage.Text = "There has been an error, please check all boxes." + debugtext;
            } else {
                string conString = WebConfigurationManager.ConnectionStrings ["connectionstring"].ConnectionString;
                using (OdbcConnection con = new OdbcConnection(conString)) {
                    string sqlstring = "SELECT yum FROM pie_application LIMIT 1;";
                    using (OdbcCommand com = new OdbcCommand(sqlstring, con)) {
                        con.Open ();
                        string reader = Convert.ToString (com.ExecuteScalar ());
                        finalmessage.Text = reader;
                    }
                }
            }
        }
    }
} 
```

作为参考，调试文本的输出只是假，假，假，假，假。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:20:27.590

我的疯狂猜测是您`CheckBoxList`在回发时对偶数进行了数据绑定。这将取消选择所有选定的项目。

所以检查`IsPostBack`属性。

```
protected void Page_Load(Object sender, EventArgs e)
{
    if(!IsPostBack)
    {
        DataBindCheckBoxList();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:34:57.950

原来这是一个已知的单声道错误。对于那些感兴趣的人，更新单声道或无论如何构建它，假设它可以工作，然后部署。

或者，只需编写更好的代码并完全避免使用 Web 控件……如果您的老板允许您这样做。

# windows-phone-7 - 如何在 wp 的 sqlite 中插入一行并返回自动增量值？

> ID：14510807
> 
> 赞同：0
> 
> 时间：2013-01-24T21:08:54.987
> 
> 标签：windows-phone-7, windows-phone-8

我有一个使用 sqlite 客户端的应用程序。在应用程序中，我将数据插入表中，我需要自动增量的 Id。无论如何要在executenonquery中获取id吗？s.th 像 sqlparameter 或 ...

我正在使用以下方法来获取数据，我认为 rec 变量保存了 id，但它始终是 rec=1，我不知道这有什么用？

```
 int x= (System.Windows.Application.Current as App).db.Insert
<CsWidget>(ObjWidget, @"Insert into Tbl_Widget (Name) values(@Name");

             public int Insert<T>(T obj, string statement) where T : new()
                    {
                            Open();
                            SQLiteCommand cmd = db.CreateCommand(statement);               
                            int rec = cmd.ExecuteNonQuery(obj);
                             return rec;
                     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T16:38:42.690

正如@gleb.kudr 所说，插入后的单独查询是唯一的方法。

```
cmd.ExecuteNonQuery();
cmd.CommandText = "SELECT LAST_INSERT_ROWID()";

object r = cmd.ExecuteScalar();

int id = 0;
int.TryParse( r.ToString(), out id ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:29:14.930

尝试 ExecuteScalar 方法而不是 ExecuteNonQuery。它可以根据您的 SQLite 包装器以这种方式工作。如果不是插入后的单独查询是您唯一的方法。

# bash - Shell 脚本 - 按键从文件中复制行

> ID：14510810
> 
> 赞同：0
> 
> 时间：2013-01-24T21:08:59.017
> 
> 标签：bash, shell, grep

我有两个输入文件，例如：

```
file1
123
456
789

file2
123|foo
456|bar
999|baz 
```

我需要从 file2 中复制其键在 file1 中的行，所以最终结果是：

```
file3
123|foo
456|bar 
```

现在，我正在使用一个 shell 脚本，它遍历它们的密钥文件并为每个文件使用 grep：

```
grep "^${keys[$keyindex]}|" $datafile >&4 
```

但正如您可以想象的那样，这是非常缓慢的。密钥文件 (file1) 有大约 400,000 个密钥，数据文件 (file2) 有大约 750,000 行。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T21:14:31.913

您可以尝试使用[join](http://linux.die.net/man/1/join)：

```
join -t'|' file1.txt file2.txt > file3.txt 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T00:34:40.560

`join`是最好的解决方案，如果排序是好的。一个 awk 解决方案：

```
awk -F \| '
    FILENAME==ARGV[1] {key[$1];next} 
    $1 in key
' file1 file2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:17:17.843

我会使用 Python 之类的东西，如果您使用优化的数据类型（如`set`. 不确定您的确切要求，因此您需要进行相应调整。

```
#!/usr/bin/python

# Create a set to store all of the items in file1
Set1 = set()
for line in open('file1', 'r'):
   Set1.add(line.strip())

# Open a file to write to
file4 = open('file4', 'w')

# Loop over file2, and only write out the items found in Set1
for line in open('file2', 'r'):
   if '|' not in line: 
      continue

   parts = line.strip().split('|', 1)
   if parts[0] in Set1:
       file4.write(parts[1] + "\n") 
```

# ruby-on-rails - first_or_create：确定调用哪个

> ID：14510813
> 
> 赞同：6
> 
> 时间：2013-01-24T21:09:08.277
> 
> 标签：ruby-on-rails

我这样调用 first_or_create ：

```
collection = Collection.first_or_create(:title => title) 
```

有没有办法确定结果是现有条目还是新创建的条目？到目前为止，我想出的最佳解决方案是使用 first_or_initialize：

```
collection = Collection.first_or_initialize(:title => title)
if collection.id.nil?
  <process>
  collection.save
end 
```

但这感觉有点hacky。有没有办法直接从 first_or_create 获取这些信息？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-01-31T23:50:17.603

`first_or_create`接受一个只有在创建新记录时才会执行的块，您可以在该块内设置一些标志以指示它是一个新记录，例如

```
MyObject.where(attr: "value").first_or_create do |obj|
  @my_object_created = true
end 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-01-24T21:31:52.070

据我所知，你不知道。两个选项是检查`created_at`时间（不可靠），或者改为使用`first_or_initialize`, 然后检查是否`new_record?`为真，如果是，则执行其他操作，然后调用`save!`. 无论如何，这对您来说可能是最好的方法，因为您可能不希望在保存其他关系之前完成保存，并且您可能希望在同一个数据库事务中完成所有这些操作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T21:19:52.643

使用`first_or_create`您无法确定它是新创建的对象还是来自数据库的对象。可能的棘手解决方案是将`created_at`值与当前时间进行比较。如果您不经常创建对象，则此方法有效。

顺便说一句，为什么你需要知道它是不是新创建的对象？

# java - 如何在java（android）中以posix格式打印本地时区？

> ID：14510814
> 
> 赞同：8
> 
> 时间：2013-01-24T21:09:08.463
> 
> 标签：java, android, datetime, timezone, posix

我想以某种方式以 EEE 1003.1 (POSIX) 格式打印本地时区。形式：

```
 std offset dst [offset],start[/time],end[/time] 
```

在[http://www.gnu.org/software/libc/manual/html_node/TZ-Variable.html中描述](http://www.gnu.org/software/libc/manual/html_node/TZ-Variable.html)

我已经想出了如何从java 对象中获取`std`和，我什至可以使用反射或解析输出从时区对象中获取 DST的和...我无法弄清楚的是如何获取该字段，即字符串和偏移量指定对应夏令时区的名称和偏移量，与 不同，例如美国东部时区是正确的：`offset``TimeZone``start``end``toString``dst``dst``std offset`

```
EST+5EDT,M4.1.0/2,M10.5.0/2 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-09-01T22:16:32.067

您可以使用 SimpleDateFormat 并使用模板格式化合适的日期`z`。如果我正确阅读[Javadocs](https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)，尤其是示例，那应该会导致 DST 名称的缩写形式

# java - 将通过 php 套接字检索到的字节转换为整数

> ID：14510817
> 
> 赞同：1
> 
> 时间：2013-01-24T21:09:20.860
> 
> 标签：java, php, binary, protocols, text-based

我正在使用 netty API 创建一个 Java 服务器，如果客户端程序向服务器发送任何东西，它就会发送一个像 5 这样的数字。它是一个有 4 个字节的整数。我认为它应该与将整数写入 OutputStream 相同。所以我现在想通过 php 接收整数。但是如果我调用 socket_read 它不会输出任何有用的信息，因为它不会将 4 个字节转换为整数。它只是将其用作文本。

如果我发送一个 char 它可以工作，所以我需要一种在 php 中转换它的方法。

或者最好将所有内容都转换为文本客户端，所以所有内容都是基于文本的。我想也许我必须坚持使用基于文本或二进制输出。

编辑：与此相关的另一个问题是，假设我在 java 中有 4 个字节。我怎样才能建立一个整数？我必须连接4个字节吗？

例子：

字节 1：00000000

字节 2：00010000

字节 3：00000101

字节 4：00000001

结果：00000000 00010000 00000101 00000001

这是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:39:21.507

您可能想使用[解包](http://us1.php.net/manual/en/function.unpack.php)功能。就像是：

```
$data = socket_read($sock,4);
$x = unpack("N",$data); 
```

# yii - 在 Yii 中使用 renderPartial 传递 $model 数据

> ID：14510818
> 
> 赞同：1
> 
> 时间：2013-01-24T21:09:21.777
> 
> 标签：yii

我已经尝试了大约 2 个小时，但没有任何改变。

我有一个模型`Users`，我想把它的`_form.php`观点传递给`views/site/index.php`这样的：

```
<?php echo $this->renderPartial('/users/_form', array('model'=>Users::$model)); ?> 
```

结果：布局消失了，表单没有显示。

有什么帮助吗？并提前感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T21:35:11.240

```
 <?php echo $this->renderPartial('/users/_form', array('model'=>Users::$model)); ?> 
```

应该读

```
 <?php $this->renderPartial('/users/_form', array('model'=>$model)); ?> 
```

假设你已经实例化`$model`了。如果不

```
 <?php $this->renderPartial('/users/_form', array('model'=>new User)); ?> 
```

应该管用。

# php - WHMCS 允许 PHP 脚本访问下载文件

> ID：14510821
> 
> 赞同：2
> 
> 时间：2013-01-24T21:09:26.733
> 
> 标签：php, authentication, login, whmcs

我有一个脚本，我正在尝试创建一个自动更新程序。它使用 file_get_contents() 检索一个 zip 文件，然后将其解压缩。我已经准备好更新程序，但我不希望我的脚本的 zip 文件只是放在我的服务器上供任何人下载。所以我设置了只有购买了这个产品的客户才能下载它。

无论如何我可以创建一个“登录”表单，以便 PHP 更新程序脚本可以有权下载 WHMCS 下载？

我意识到这是应该在 whmcs.com 的论坛上提出的问题，但他们的论坛上很少有积极的支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-14T19:40:03.943

根据管理菜单中“实用程序”下的“集成代码”，您可以使用此登录表单示例：

```
<form method="post" action="https://yoursite.com/clients/dologin.php">
Email Address: <input type="text" name="username" size="50" /><br />
Password: <input type="password" name="password" size="20" /><br />
<input type="submit" value="Login" />
</form> 
```

实际上， curl 也可以：

```
curl -X POST "https://yoursite.com/clients/dologin.php" \
    -d "username=yourusername" \
    -d "password=yourpassword" 
```

请注意，您仍然需要导航到下载以获取它，或者需要知道下载的确切位置才能获取它。此外，要使其正常工作，您需要与服务器保持会话，以便在登录成功后仍然可以访问新请求的下载。

# sql-server - 如何在作业属性上配置通知警报？

> ID：14510822
> 
> 赞同：0
> 
> 时间：2013-01-24T21:09:29.773
> 
> 标签：sql-server, tsql, ssms, seq

我想在作业完成或失败时收到一封电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:23:12.810

在“操作员”下设置操作员。为您正在创建的作业设置“通知”以发送给操作员。确保已设置 DatabaseMail，否则它将无法通过电子邮件发送任何内容。确保“SQL Server 代理”在属性>警报系统下设置了“启用邮件配置文件”（这是一个多次导致事情无法工作的设置）。如果您设置数据库邮件，然后在代理上启用它，则可能必须重置代理，因为有时在代理重置之前不会进行更改。这应该能够在工作中发送电子邮件。

# linux - 使用脚本重新启动 jboss 的最干净方法

> ID：14510826
> 
> 赞同：25
> 
> 时间：2013-01-24T21:09:41.247
> 
> 标签：linux, jboss, jboss7.x, ubuntu-12.04

我正在使用“./standalone.sh -c Standalone-full.xml”来启动 JBOSS。在这种情况下重新启动 jboss 的最干净的方法是什么？有什么可以分享的脚本吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-24T21:23:09.940

您必须使用 CLI 控制台。要重新启动，请键入

```
bin/jboss-cli.sh --connect --command=:reload 
```

要关闭，请键入

```
bin/jboss-cli.sh --connect --command=:shutdown 
```

[资源](https://community.jboss.org/thread/165815?_sscc=t)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-09-24T21:53:25.940

如果您需要关闭服务器，[@Petr Mensik的解决方案效果很好。](https://stackoverflow.com/users/1039952/petr-mensik)但是，如果您需要在单个操作中重新启动它，您可以使用：

```
jboss-cli.sh -c ":shutdown(restart=true)" 
```

感谢这些[出色的 JBoss 笔记](http://javahowto.blogspot.com/2012/08/my-jboss-as7-notes.html)。

# grails - 将数据从过滤器传递到控制器的最佳方式？

> ID：14510834
> 
> 赞同：3
> 
> 时间：2013-01-24T21:10:06.547
> 
> 标签：grails, filter, controller

您好，在我们的应用程序的一部分中，我需要将数据从过滤器传递到控制器。我已经读过这可以通过在控制器上使用请求对象和前拦截器来完成。

一些示例代码：

```
class SomeService {
    def doSomething(request, params) {
        request.foo = "helloworld"
    }
}

class SomeFilter {

    def someService

    def filters = {
        all(controller:'*', action:'*') {
            before = {
                // service does something and places object in request
                // using request.foo = "helloworld"
                someService.doSomething(request, params)
            }
        }
    }
}

class SomeController {

    def foo

    def beforeInterceptor = {
        foo = request.foo
    }

    def index = { 
        println foo
    }
} 
```

这是一种有效的做事方式还是有其他方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:20:27.883

您正在使用的方法（将数据分配给请求属性）是一种高效且广泛使用的方式，可在层之间传递请求特定数据。

grails 所基于的 Spring 框架广泛使用了这一点。你可以在这里看到它使用的一些属性键：http: [//static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/util/WebUtils.html](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/web/util/WebUtils.html)

# php - 使用 Postgresql pgsql 加速复杂的 php 函数

> ID：14510837
> 
> 赞同：2
> 
> 时间：2013-01-24T21:10:17.153
> 
> 标签：php, database, postgresql, optimization

这有点难，因为我对 Postgresql 的 pgsql 或 C 了解不多。

我希望有人可以通过布置基本控制结构或建议替代我在 PHP 中执行此操作的方式来使此操作更快，从而让我开始。

这是基本的破败。代码如下。

我在摄入表中有一行，它可能与我的规范化提供者数据库中的现有提供者匹配，也可能不匹配。我有不同的数据元素，具体取决于行的完整性。

我当前的控制函数如下所示：它的工作是返回现有提供者的 ID，或者创建新的提供者然后返回该 ID。

```
 function find_provider($input){
    if (!$by_i_id = $this->find_provider_with_i_provider_id($input->i_provider_id)){
        //Not By I ID
        if (!$by_medicare_id = $this->find_provider_with_medicare_id($input->national_provider_id)){
            //Not by Medicare ID
            if (!$by_license_number = $this->find_provider_with_license_number($input->license)){
                //Not by License Number
                if (!$by_s_id_map = $this->find_provider_with_s_provider_id($input->source_id, $input->s_client_id, $input->s_provider_id)){
                    //Not By S_id
                    if (!$by_tax_id = $this->find_provider_with_tax_id($input->tax_id, $input->s_entity_type, $input->source_id, $input->last_name, $input->first_name)){
                        //Not by Tax Id
                        if (!$by_name = $this->find_provider_by_name($input->first_name, $input->last_name)){
                            //not by Name.
                            return $this->add_provider($input);
                        }else{
                            //At least 1 Name Match
                            if (count($by_name) == 1){
                                $by_name = $by_name[0]->provider_id;
                                if (!$by_address = $this->confirm_provider_by_address($input->address1, $input->zip, $by_name)){
                                    //Not a Match
                                    return $this->add_provider($input);
                                }else{
                                    return $by_name;
                                }
                            }else{
                                //More than 1 Match
                                $match = array();
                                Foreach ($by_name as $key => $row){
                                    If ($this->confirm_provider_by_address($input->address1, $input->zip, $row->provider_id) != FALSE){
                                        $match[] = $row->provider_id;
                                    }
                                }
                                if (count($match)> 0){
                                    return $match[0];
                                }else{
                                    return $this->add_provider($input);
                                }
                            }
                        }
                    }else{
                        return $by_tax_id;
                    }
                }else{
                    return $by_s_id_map;
                }
            }else{
                return $by_license_number;
            }
        }else{
            return $by_medicare_id;
        }
    }else{
        return $by_i_id;
    }
} 
```

在此，我尝试首先通过内部 ID、Medicare ID、许可证、来源 ID、税号、姓名和地址进行匹配。

这些函数中的每一个看起来像这样：（etype 是一个实体类型，可能存在也可能不存在。而 Not This ID 是因为我第二次运行这些函数，寻找次要匹配，有时他们可以同时来自 2 个不同的提供商）。

```
 function find_provider_with_i_provider_id($provider_id, $etype = null, $notthisid=null){
    //Select from provider where 'id' == $provider_id
    if (is_int($provider_id)==true && $provider_id != 0){
        $this->db->select('id');
        $this->db->from('list_provider');
        $this->db->where('id', $provider_id);
        if (!$etype == null){
            $this->db->where('entity_type_id', $etype);
        }
        if (!$notthisid == null){
            $this->db->where('id !=', $notthisid);
        }
        $result = $this->db->get();

        if ($result->num_rows == 0){
            return false;
        }elseif ($result->num_rows == 1){
            //Call The Result Function to Pull the Data as an Object.
            $out = $result->result();
            return $out[0]->id;
            //return true;
        }else{
            $out = $result->result();
            //$this->log_event('find_provider_with_i_provider_id','error', 'Multiple Results for an Internal Provider ID', $provider_id);
            return $out[0]->id;
        }
    }else{
        return false;
    }
} 
```

如您所见，这是大量的数据库工作，我必须处理很多行（目前在摄入表中为 3500 万行）。所以这是超级慢。

我试图弄清楚如何在 PHP 中更好地构造这个，或者更理想的是，我认为，将整个事情重新写入 pgsql，以便数据库可以预先计划和优化这一切。

我相信该数据库已被适当索引（所有选择和连接元素），但运行这 3500 万行仍然需要大约 2 周的时间。

想法？帮助？

如果您需要更多信息或有任何问题，请告诉我。数据库非常接近规范化，除了我必须为不同的用例复制一两条信息，而这些用例连接不起作用。它基本上是一个雪花图案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:59:12.650

我认为您正在寻找类似的东西，您返回的表是您的过滤器返回的行数，以及“如何[可能]匹配”的所有选项的列。您的 PHP 将负责确定其匹配方式的优先级，但只需要一次查询和数据库往返。

```
CREATE OR REPLACE FUNCTION schema.function(
    IN  filter1                 integer,
    ...
    IN  filterN                 text
)
    RETURNS TABLE (
        id                      integer,
        reason1                     boolean,
        ...
        reasonN                     boolean
    )
    LANGUAGE plpgsql
    AS $body$
        DECLARE
        BEGIN
            RETURN QUERY
                SELECT
                    id,
                    CASE
                        WHEN reason1Criteria THEN true
                        ELSE false
                    END AS reason1,
                    ...
                    CASE
                        WHEN reasonNCriteria THEN true
                        ELSE false
                    END AS reasonN
                FROM tables
                WHERE
                    t.column1 = filter1 AND
                    ...
                    t.columnN = filterN;
        END;
    $body$; 
```

# makefile - 如何从 Make 目标中删除依赖项定义？

> ID：14510843
> 
> 赞同：1
> 
> 时间：2013-01-24T21:10:33.317
> 
> 标签：makefile, dependencies

我正在开发一个使用嵌套 Makefile 构建的大型项目（~3x10^6 行代码）。我有一个文件 ( `subdirs.mk`)，它添加了一些用于操作所有子目录的便利规则（可能是并行的）。它包括以下规则：

```
$(SUBDIRS_INCLUDES):
$(MAKE) -C $(patsubst %-includes,%,$@) includes

SUBDIRS_INCLUDES := $(patsubst %,%-includes,$(SUBDIRS))

includes: $(SUBDIRS_INCLUDES) 
```

它还为`install`, `clean`,`test`等提供了类似的规则。

在我的上层 Makefile 之一中，我有以下代码：

```
SUBDIRS = dir1 dir2 dir3
include $(BUILD_TOOLS)/subdirs.mk

includes: $(BUILD_DIR)/version.h 
```

`includes`在这种情况下，我希望目标*仅*生成 $(BUILD_DIR)/version.h，跳过运行包含在所有子目录中。但是，我还是想使用 subdirs.mk，因为它提供了其他有用的功能（前面提到的`test`和`install`目标）。

**有没有办法清除`includes`目标的依赖关系？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:31:31.733

`includes`对两个目标之一使用不同的名称。Make 没有“减去”或“删除”依赖项的概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T23:06:14.817

Irix 是 Silicon Graphics (SGI) 的 Unix 变体，它通过在您的 subdirs.mk 文件中提供一个变量来解决这个问题，该文件以所有包含的规则为前缀。然后，在包含 subdirs.mk 之前，在所有子 makefile 中设置此前缀。

虽然需要吸收很多内容，但这些文件：[commondefs](http://linuxsociety.org/pub/test/opengl/docs/man/usr/include/make/commondefs)和[commonrules](http://linuxsociety.org/pub/test/opengl/docs/man/usr/include/make/commonrules)提供了您正在寻找的解决方案。

# javascript - Jquery - 是否可以将 css 悬停/焦点行为绑定到 keydown？

> ID：14510846
> 
> 赞同：3
> 
> 时间：2013-01-24T21:10:38.717
> 
> 标签：javascript, jquery

我希望我的问题能简洁明了。

可以说我定义了一些 CSS。

```
.someCSS-name:hover > .list-item,
.someCSS-name:active > .list-item,
.someCSS-name:focus > .list-item { display:block; } 
```

现在，在我的 jquery 代码中，如何使用上面的 css 创建或绑定一个制表符。Sorta 有选项卡按键继承该 css 行为吗？

也许我在这里想多了。

```
<li class="someCSS-name" id="linkoneli">
    <a href="someURL" id="linkonenav">Link One</a>
    <div class="list-item">show this content</div>
</li> 
```

那是一个片段，基本上是该链接上的用户选项卡-我有一个弹出窗口显示..但不是明确地 eventHandling 和弹出它等等。我希望我可以使用我的 CSS 以某种方式绑定到我的选项卡/按键..可能吗？所以标签将与“悬停”等相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:30:39.680

实际上，如果您在锚元素焦点状态上使用 css 选择器，您将实现该效果。这是您可能需要的片段。

```
#linkonenav:focus ~ .list-item {
  display: block;
} 
```

jsFiddle 只是为了尝试[http://jsfiddle.net/greenrobo/eLCmM/](http://jsfiddle.net/greenrobo/eLCmM/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:15:58.817

最简单的方法是在按键上切换 .someCSS 所以

```
$('.myElements').toggleClass('someCSS'); 
```

如果这将打开/关闭悬停的CSS。如果您只想切换悬停打开和关闭的任何样式，只需将这些样式移动到 .active 类并切换该类即可

```
$('.someCSS').toggleClass('.active'); 
```

# bash - tmux 不适用于内部会话的“发送前缀”

> ID：14510851
> 
> 赞同：3
> 
> 时间：2013-01-24T21:11:03.667
> 
> 标签：bash, shell, tmux

我正在使用`tmux`并且正在设置一些设置来处理嵌套会话。我喜欢有一个本地 tmux 会话，以及我通过 SSH 连接到的服务器上的 tmux 会话。

为此，我`bind-key -n C-\ send-prefix`在配置文件中添加了拦截`C-\`以传递到内部会话。

当我点击 C-\ 时，它没有被抓住。但是当我`\`用一个字母替换时，比如`b`, to have `C-b`，它就可以了。

这意味着我正在做的事情是正确的，但它没有识别`\`角色。我需要逃避吗？如果是这样，怎么做？`C-\\`不起作用。

**编辑**

所以显然`C-b`不是因为我的绑定，而是因为那是 tmux 的默认绑定。我忘了获取配置文件。但是当我这样做时，钥匙只会给我一个新的线路。我需要在内部 tmux 会话的配置文件中做些什么吗？

# django - 在 Django 中为请求设置断点的位置（在发送之前）？

> ID：14510853
> 
> 赞同：3
> 
> 时间：2013-01-24T21:11:05.743
> 
> 标签：django, debugging, breakpoints, pdb

在页面请求进入但在 Django 调度程序运行之前在 Django 中设置断点的好地方在哪里？

我假设在`manage.py runserver`等待请求的 Django Web 服务器 () 中有一个循环？或者可能在 Web 服务器之外的某个地方，但在 Django url 调度程序中，它决定从 urls.py 调用哪些代码？（请注意，我不想要特定页面的断点，而是任何给定页面）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T22:28:18.223

在 django/core/handlers/base.py （版本 1.4.2）中，该函数`get_response`完全按照它所说的去做。

第 100/101 行使用您的 url conf 确定使用哪个视图：

```
callback, callback_args, callback_kwargs = resolver.resolve(
    request.path_info) 
```

# java - JQuery TokenInput 不显示搜索结果

> ID：14510855
> 
> 赞同：1
> 
> 时间：2013-01-24T21:11:07.457
> 
> 标签：java, jquery, playframework-2.0, tokenize, jquery-tokeninput

我正在使用 jQuery Tokeninput 来显示用户的电子邮件，实际上我正在尝试邀请用户。当我单击输入文本并输入一些电子邮件时，即使该电子邮件存在，它也总是说没有结果。

我的 JS 是

```
 <script type="text/javascript">
    $(document).ready(function() {
    var url = "http://localhost:9000/api/customers"
       $("#members").tokenInput(url, {
           theme: "facebook"
        });
    });
  </script> 
```

我的控制器动作是

```
 public static Result apiCustomers(){
    List<Customer> customerList = Model.coll(Customer.class).find().toArray();
    List<String> emails = new ArrayList<String>();

    for(Customer c : customerList){
        emails.add(c.email);
    }

    ObjectNode result = Json.newObject();
    result.put("emails", Json.toJson(emails));      
    return ok(result);
  } 
```

当我输入文本输入时，它调用 apiCustomer 操作，响应看起来像一个有效的 json 字符串

```
{"emails":["abc@gmail.com","xyz@gmail.com","asd@gmail.com","bob@gmail.com"]} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T23:04:31.763

我没有使用 Tokeninput 插件，但您似乎没有输出正确的 json。虽然您的操作正在生成有效的 json 字符串，但它不是插件期望的 json 字符串。

有关正确格式，请参阅[Tokeninput 文档](http://loopj.com/jquery-tokeninput/#installation--setup)。

# javascript - 转换下拉框的内容并将它们存储在变量中

> ID：14510856
> 
> 赞同：1
> 
> 时间：2013-01-24T21:11:14.853
> 
> 标签：javascript

这对那里的专家来说似乎很容易，

但是，我该如何转换下拉列表（选择框）的内容并将它们存储到逗号分隔的 var 中？

```
[DROP DOWN]
abdcef1
ghijklm2
nopqrs3
tuvwx4
yz0007 
```

预期结果：

```
var x = abdcef1,ghijklm2,nopqrs3,tuvwx4,yz0007 
```

非常感谢和感谢您的所有帮助和支持。

干杯，

周杰伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:20:10.953

尝试：

```
<script>
function getSelectedValues() {
  var result = "";
  var mysel = document.getElementById("myselect");

  for (var i = 0; i < mysel.options.length ; i++) {
    result = result + mysel.options[i].text + ",";
  }

  result = result.substring(0,result.length-1);

  return result;
}</script> 
```

在哪里

```
<select id="myselect">
  <option value="abdcef1">abdcef1</option>
  <option value="ghijklm2">ghijklm2</option>
  <option value="nopqrs3">nopqrs3</option>
  <option value="tuvwx4">tuvwx4</option>
  <option value="yz0007">yz0007</option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:21:35.340

使用 jQuery：

```
var options = [];
$('select#dropdown option').each(function(){
  options.push($(this).val());
});
options.join(", "); 
```

# javascript - 如何在 close() 和重定向之前延迟？

> ID：14510857
> 
> 赞同：-1
> 
> 时间：2013-01-24T21:11:19.017
> 
> 标签：javascript, fancybox

> **可能重复：**
> [JavaScript 中有睡眠功能吗？](https://stackoverflow.com/questions/1141302/is-there-a-sleep-function-in-javascript)

我该如何添加延迟以使其关闭并在这么多秒后重定向？

```
<script type="text/javascript">
  $(function() { parent.$.fancybox.close(); });
  window.parent.location.href = '/shop/basket';
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:13:54.160

```
window.closeAndRedirect = function() {
    parent.$.fancybox.close();
    window.parent.location.href = '/shop/basket';
}

setTimeout(closeAndRedirect, 5000); // 5 seconds 
```

@jAndy 指出：如果您仍然要重定向，为什么要关闭某些东西？这是一个有效的观点。

也许你的意思是关闭，然后在关闭后 5 秒重定向？如果是这样：

```
parent.$.fancybox.close(function() {
    setTimeout(function() {
       window.parent.location.href = '/shop/basket';
    });
}); 
```

假设 close 有一个回调。如果没有，也许：

```
parent.$.fancybox.close();
setTimeout(function() {
    window.parent.location.href = '/shop/basket';
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:12:55.073

使用[setTimeout](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)并从回调中调用您的函数。

就像是：

```
$(function() { 
    setTimeout(function() {
        parent.$.fancybox.close(); 
        window.parent.location.href = '/shop/basket';
    }, 5000);
}); 
```

等待 5 秒，从 DOM 准备好时开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:56:17.277

实际上，您不需要在打开的（子）页面中执行此操作，而是直接在**父**页面上执行此操作....只需`setTimeout`在自定义 fancybox 脚本中的回调内部使用来编写*关闭*和*重定向*任务，例如：

```
$(".fancybox").fancybox({
    afterLoad: function () {
        setTimeout(function () {
            $.fancybox.close();
            window.location.href = "/shop/basket";
        }, 5000); // 5000 = 5 secs
    }
}); 
```

见**[JSFIDDLE](http://jsfiddle.net/yzr7H/)**

# mysql - 如何连接两个 MySQL 表以确定用户是否订阅了帖子作者？

> ID：14510861
> 
> 赞同：0
> 
> 时间：2013-01-24T21:11:28.927
> 
> 标签：mysql

这可能是一个稍微令人困惑的问题。我有一个用户帖子表，其中有一列权限确定谁可以查看帖子：0 = 公开，1 = 仅限订阅者，2 = 仅限联系人。

我有另一个表“订阅”，其中包含 Subscriber_ID 和 Subscribed_to_ID 列，还有另一个表“联系人”，其中包含 User1_ID 和 User2_ID 列。

我对复杂的 MySQL 查询没有太多经验，我通常只需要基本查询，但这是我想要做的：

我正在寻找一种在这些条件下从帖子表中选择帖子的方法：

1.  如果用户既不是订阅者也不是帖子作者的联系人，则只返回公共帖子（Permission 为 0 的帖子）
2.  如果用户订阅了帖子作者，则返回具有 0 或 1 权限的帖子
3.  如果用户是联系人（自动订阅），则返回具有 0、1 或 2 权限值的帖子。

我知道语法不正确，但这是否是一个很好的方法？另外，我通常一次只处理一张桌子，所以我很困惑，我需要加入这三张桌子吗？

```
SELECT user_id, 
       * 
FROM   posts 
WHERE  privacy < IF (user_id IN(SELECT * 
                                FROM   contacts 
                                WHERE  user1_id = 'TestUser' 
                                        OR user2_id = 'TestUser'), 2, 
                 IF ( 
                                  user_id IN (SELECT subscribed_to_id 
                                              FROM   subscriptions 
                                              WHERE  subscriber_id = 'TestUser') 
                 , 
                 1, 0) 
                        ) 
```

再说一次，我知道我还很遥远，但我想学习一些比我习惯的基本知识更复杂的 MySQL，所以如果有人能给我一些关于如何改进这个查询的建议，我一定会很感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T21:21:13.290

你真的需要加入这些表。而且，在 MySQL 上不使用条件确实更容易，比 PHP 更好。

如果我需要这样做，我会这样做。

您选择帖子，加入规则，加入订阅者，加入用户，然后使用 PHP 显示或不显示消息。

你的查询有点奇怪。

连接表并不复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:22:13.403

如果我正确理解这一点，我相信您的第一个要求可能是这样的：

```
SELECT user_id, *
FROM posts P
LEFT OUTER JOIN subscriptions S
ON P.user_id = S.Subscribed_To_ID
LEFT OUTER JOIN contacts C
ON C.User1_ID = P.user_id
WHERE S.Subscribed_To_ID IS NULL
AND C.User1_ID IS NULL
AND P.Privacy = 0 
```

然后你能再创建两个 SELECT 语句并将它们联合起来吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:24:40.907

你应该只使用一个函数来简化你的生活。无论如何，您都在进行全表查询，因此优化不是问题。

```
SELECT *
FROM   posts 
WHERE  privacy <= TestPrivacy('TestUser')

CREATE FUNCTION TestPrivacy(CurrentUser VARCHAR(MAX))
BEGIN
DECLARE returnValue INT
   IF ((SELECT COUNT(*) 
      FROM   contacts 
      WHERE  user1_id = CurrentUser
      OR user2_id = CurrentUser) > 0)
   BEGIN
      ReturnValue = 2
   END
   ELSE
   BEGIN
      IF ((SELECT COUNT(*) 
          FROM   subscriptions 
          WHERE  subscriber_id = CurrentUser) > 0) THEN
      BEGIN
         returnValue = 1
      END
      ELSE
      BEGIN
         returnValue = 0
      END
   END

   RETURN returnValue
END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T21:43:53.227

尝试这个：

```
select *
  from posts
 where (privacy = 0) /* public */
    or ( /* suscribers */
            (privacy = 1) 
        and (exists (select 1 
                       from subscriptions 
                      where subscriptions.suscriber_id = 'currentuser' 
                        and subscriptions.Subscribed_to_ID = posts.author_id)
            )
       )
    or ( /* contacts: if the user is a contact, doesn't matter the privacy */ 
        exists (select 1
                  from contacts
                 where (contacts.User1_ID = 'currentuser' and contacts.user2_ID = posts.author_id)
                    or (contacts.user2_ID = 'currentuser' and contacts.user1_id = posts.author_id)
        )
       ) 
```

我是根据这些假设做的：

*   您想选择用户可以从所有作者那里看到的所有帖子。
*   您的帖子表有一个名为 author_id 的列，其中包含帖子作者的 user_id。
*   查看者的 user_id 是已知的，并在查询中显示为“currentuser”
*   您的联系人表每个联系人对仅包含一行，因此 where 子句中的双重比较

查询是在浏览器中编写的，您可能会遇到语法错误或其他小问题。查看缩进以检查正确的括号配对。

# java - 如何找到在 Java 应用程序中使用了多少库？

> ID：14510864
> 
> 赞同：1
> 
> 时间：2013-01-24T21:11:43.777
> 
> 标签：java, refactoring

我正在开发一个使用 34 个外部 jar 的现有 Java 应用程序。

我的部分工作是使代码更简洁，不那么臃肿。通过从路径中删除它并测试代码，我可以轻松找到根本没有使用的库。

但是，我怀疑有些库只使用了一小部分（可能是一个或两个函数）。

例如，有一个用于一些 UI 构建的库。但是，我怀疑在应用程序代码中，它仅用于其一/两个日志记录功能。我实际上可以实现我自己的那个函数版本，并完全让应用程序摆脱那个库。

由于我无法手动浏览代码，是否有任何现有工具可用于查看应用程序代码中使用了多少库代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:39:48.523

[JDepend](http://clarkware.com/software/JDepend.html)可以告诉您应用程序类的直接依赖关系，但这并不能真正告诉您可以消除哪些 JAR，原因（至少）有两个：

1.  它只能获取已编译的类引用。如果您使用像 Spring 这样的工具，它允许您在非代码配置文件中指定类，JDepend（或任何其他工具）无法识别它们。如果您使用`Class.forName`.
2.  你的代码可能不直接引用一个类，但你加载的东西可能（Maven 称之为传递依赖）。例如，Hibernate 需要 CGLib 或 Javassist（或者至少以前需要）。如果您依赖 Hibernate，那么您就隐含地依赖这些 JAR 之一。

从 JDepend 开始可能是最简单的，并且只使用它告诉您您需要的 JAR 进行构建。然后，在运行时，您将获得 class-not-found 异常，这些异常会告诉您需要哪些额外的 JAR。

编辑：

> 由于我无法手动浏览代码，是否有任何现有工具可用于查看应用程序代码中使用了多少库代码？

作为重读你的问题，我意识到你要求的东西比简单的依赖分析更有针对性。我认为代码覆盖率工具可能会为您指明正确的方向。一些开源的可能性：

*   [艾玛](http://emma.sourceforge.net/)
*   [科贝图拉](http://cobertura.sourceforge.net/)

您可以检测整个应用程序，然后正常运行它并找出实际调用了哪些类。*但是*，您需要*充分*锻炼它。Java 根据需要加载类，因此您的应用程序可能仅依赖于类的某些特性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:16:28.890

我倾向于使用[proguard](http://proguard.sourceforge.net/)之类的东西来识别旧的未使用代码，尽管它具有大量其他功能，但它们与您的问题无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:14:49.020

您可以搜索 JAR 开头的包的代码和 xml。

我会尝试从构建中删除它并重新构建程序，并在编译时对其进行测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T21:41:01.653

对于快速而肮脏的策略，您可以选择编写一个脚本来递归所有应用程序代码并提取所有导入，按最少到最常用对其进行排序，将基本导入包结构与 jar 匹配，然后检查使用最少导入 jar 的位置.

为了更好地进行长期分析，请先尝试解决这些问题。首先，如果可以，最好使用标准构建工具转换应用程序，例如 maven。接下来让应用程序在标准 IDE 上运行和构建，例如 eclipse。

现在您可以搜索和使用可以让您做您需要做的事情的插件。

例如行家

mvn 依赖：分析

看看可以做同样事情的 eclipse 插件

例如

[http://classpathhelper.sourceforge.net/](http://classpathhelper.sourceforge.net/)

未来有可维护性

这可能是额外的前期工作，但您可以更好地分析代码，您的任务就会更快。如果您想成为大师，您甚至可以编写一个 eclipse 插件并分享它！

# php - $result 变量在 MYSQLi 中无法识别

> ID：14510865
> 
> 赞同：0
> 
> 时间：2013-01-24T21:11:44.730
> 
> 标签：php, mysqli

在我确信还有很多其他问题中，$result 变量没有被识别

得到一个

> 致命错误：在非对象上调用成员函数 fetch_assoc()

我不知道为什么。任何帮助，将不胜感激。这是代码：

```
<html>
    <body>

        <?PHP

$db = new mysqli('localhost', 'root', '', 'edumacation');

if($db->connect_errno > 0){
    die('Unable to connect to database [' . $db->connect_error . ']');
}

$result = <<<SQL
    SELECT *
    FROM `student`
    WHERE `id` = 1
SQL;

while($row = 
        $result->fetch_assoc()){
    echo "<table border='1'><tr><th>Name</th><th>Grade</th><th>Favorite Teacher</th><th>Date Enrolled</th></tr>";
    echo "<tr><td>" . $row['first_name'] . "</td><td>" . $row['grade'] . "</td><td>" . $row['fav_teacher'] . "</td></tr>" . $row['enrolled'] . "<br />";
    echo "</table>";
}

?>
   </body> 
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:15:05.167

好吧，您实际上并没有*执行*查询，只是将字符串设置为您想要的 SQL。这样的事情会更好；

```
$sql = <<<SQL
  SELECT *
  FROM `student`
  WHERE `id` = 1
SQL;

if ($result = $db->query($sql)) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:14:33.640

您实际上并没有使用您设置的连接对您的数据库运行查询。 `$result`在您的示例中，您只是一个 HEREDOC 字符串。

您需要执行以下操作：

```
$result = $db->query("SELECT * FROM `student` WHERE `id` = 1; "); 
```

然后你可以调用`fetch_assoc()`$result 对象的方法。

# objective-c - 如何以编程方式更改 Mac 上的光标大小

> ID：14510870
> 
> 赞同：6
> 
> 时间：2013-01-24T21:12:04.167
> 
> 标签：objective-c, macos, mouse-cursor

我希望能够从我的程序中为 Mac 上的光标大小设置系统偏好设置（如辅助功能偏好设置中所示），然后在程序退出后将其设置回来。

有没有办法从应用程序中设置光标大小（特别是）或系统偏好？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-25T01:35:51.520

首先，如果您只是想在光标指向您的窗口/视图/小部件时获得更大的光标，那么您的说法是错误的。正确阅读[光标管理器简介](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CursorMgmt/CursorMgmt.html)。

其次，即使您认为您确实想在程序运行时设置系统范围的光标，在继续之前请仔细考虑一下。即使您的应用程序在后台或隐藏，光标也会保持较大。如果您完全朝着透明生命周期的想法（用户通常不应该注意到或关心您的应用程序不可见和您的应用程序退出之间的区别）采取任何行动，这将*更加*令人困惑。如果两个应用程序尝试这样做，会发生什么？等等。（不用说，Apple 会拒绝 App Store 中任何这样做的应用程序。）

第三，设置系统首选项实际上并没有做任何事情，直到系统读取该首选项的新时间。并且无法保证何时会发生。因此，除非您的应用程序满足于更改可能直到用户注销并重新登录（然后在您退出后将其更改回来）才会生效的首选项，否则它并不是那么有用。

但如果这真的是你想做的……</p>

* * *

设置系统偏好非常容易。系统偏好设置修改的大部分值都在默认存储中。“辅助功能”窗格中的大多数值都在`com.apple.universalaccess`域中。光标大小的特定键是`mouseDriverCursorSize`。

因此，要将光标从 bash 更改为最大大小：

```
defaults write com.apple.universalaccess mouseDriverCursorSize 4.0 
```

ObjC 有点乏味，但是像这样（未经测试）：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSDictionary *olddict = [defaults persistentDomainForName:@"com.apple.universalaccess"];
NSMutableDictionary *newdict = [olddict mutableCopy];
[newdict setObject:@4.0 forKey:@"mouseDriverCursorSize"];
[defaults setPersistentDomain:newdict forName:@"com.apple.universalaccess"];
[defaults synchronize] 
```

* * *

那么，如果你想设置偏好，然后强制系统注意到变化呢？显然 System Preferences 应用程序正在*做某事*，您可以随时跟踪它，看看它到底做了什么。

通常，它所做的是调用一些未记录或公开的私有函数。并且在不同的操作系统版本之间可能会有所不同。无论如何，它所做的可能不是最好的事情。但通过快速测试：

看起来调用`CGSShowCursor`工作，只要它被隐藏时取消隐藏光标是可以接受的。连续调用`CGSGetGlobalCursorData`两次似乎也有效，尽管我不知道为什么会这样。

当然，这些是没有记录或公开的 CGSPrivate 函数，但至少其他人已经对它们进行了逆向工程，所以你不必这样做。您所要做的就是从一些开源项目中借用代码（[iTerm2](https://github.com/gnachman/iTerm2/tree/master/CGSInternal)具有更完整的标头集之一），并在 Apple 发布每个新的次要 OS 后进行测试，并调试 25 年不起作用的黑魔法% 的用户，即使它适用于其他 75%（无法访问这 25% 正在使用的机器，通常甚至无法从他们那里得到体面的问题或答案）。

如果你想跟踪系统偏好设置，而你没有在 OS X 中跟踪进程的经验，最简单的方法是通过 GUI 工具 Instruments：

*   启动系统偏好设置并导航到辅助功能、显示。
*   启动 Xcode 4.4 或更高版本，进入“Xcode”菜单，选择“Open Developer Tool”，然后选择“Instruments”。
*   在 Instruments 中，选择“Mac OS X | All”部分，然后选择“System Trace”。
*   在“目标”下拉菜单中，附加到“系统偏好设置”进程。
*   单击“记录”按钮，然后等待几秒钟以停止沙滩球。
*   拖动光标大小滑块。
*   单击“停止”按钮，等待更长时间以完成分析。
*   阅读 Instruments 上的扩展文档，了解如何找到你想要的。

但是，请记住，系统偏好设置可能不会调用特殊的系统调用来完成它需要的操作；例如，它可能是向 Window Server 任务发送特定的 mach 消息。幸运的是，你可以从任何看起来可能的事情中倒退。通过这样做，我发现它似乎在调用`UACursorSetScale`UniversalAccessCore，它调用`UAPreferencesSetValue`了`/System/Library/PrivateFrameworks/UniversalAccess.framework/Versions/A/Libraries/libUAPreferences.dylib`一个似乎执行 a`CFPreferencesSetValue`并发送 a的函数`CFNotificationCenterPostNotification`。也许只是那个通知很重要？您可以通过在 Xcode/gdb/lldb 中的相关函数上放置断点并查看参数是什么来测试它。或者您可以弄清楚如何称呼`UAPreferencesSetValue`自己（我的第一个猜测是参数与 相同`CFPreferencesSetValue`）。

作为快速检查：它发送的通知是“UniversalAccessDomainMouseSettingsDidChangeNotification”，带有一个类似于默认分布式通知中心`nil` `object`的`userInfo`字典`@{@"mouseDriverCursorSize": @1.8327533, @"pid": @12345}`，并且在更改首选项后自己做同样的事情`NSUserDefaults`没有效果。此外，`UAPreferencesSetValue`显然需要与 不同的参数`CFPreferencesSetValue`，因为如果您传递明显的值，您会在 内部发生崩溃`CFNotificationCenterPostNotification`，因此您可能需要在 System Preferences 中对调用进行断点以查看它发送的内容。

如果你能从这个开始舒服地前进，那就太好了。如果没有，那么在您考虑尝试使这项工作之前，您需要学习很多东西。

* * *

另一种解决方法是编写脚本。如果您可以使系统偏好设置应用程序执行鼠标所做的相同操作，那么您就设置好了，对吗？

只要启用了 UI 脚本（请参阅您已经在“系统偏好设置”中查看的同一窗格中的“启用辅助设备的访问权限”复选框，或者如果您具有 root 访问权限，请参阅谷歌如何以编程方式打开和关闭它），那就是乏味，但很容易，通过系统事件。

事实上，虽然系统偏好设置没有提供足够的细节来实际更改任何内容，但它*确实提供*了足够的信息让我们导航到右侧窗格，从而节省了大量的 UI 脚本编写步骤。所以，这是 AppleScript 做你想做的事：

```
tell application "System Preferences"
    reveal anchor "Seeing_Display" of pane id "com.apple.preference.universalaccess"
end tell
tell application "System Events"
    set theSlider to slider "Cursor Size:" of group 1 of window 1 of application process "System Preferences"
    set stash to value of theSlider
    set value of theSlider to 4.0
    stash
end tell 
```

从 ObjC 运行它[`NSAppleScript`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSAppleScript_Class/Reference/Reference.html)——或者，如果你愿意，可以将它翻译成`ScriptingBridge`, `Appscript`，或者其他你可以在本地运行的东西——你就完成了。

# python - 在 Python 中的文本中显示大括号

> ID：14510871
> 
> 赞同：1
> 
> 时间：2013-01-24T21:12:05.360
> 
> 标签：python, python-3.x

这是我正在使用的代码的一部分 - 下面详细介绍了问题。我正在 Mint Linux Nadia 上使用 Python 3.2 和 tkinter 创建一个简单的储蓄计算器。欢迎咨询！谢谢汤姆

```
 Button(self,
           text = "Click for savings calculations",
           command = self.show_result
           ).grid(row = 6, column = 0, sticky = W)

    self.result_txt = Text(self, width = 75, height = 10, wrap = WORD)
    self.result_txt.grid(row = 7, column = 0, columnspan = 4)

def show_result(self):

    curacct = int(self.curacct_ent.get())

    isa = int(self.isa_ent.get())

    av = int(self.av_ent.get())
    avu = int(self.avu_ent.get())

    a = int(curacct + isa)
    b = int(av*avu)

    result = "Your savings total is £", (a)
    result += "and the A shares are worth £", (b)
    result += "Your total savings is £", (a+b)

    self.result_txt.delete(0.0, END)
    self.result_txt.insert(0.0, result)

# main
root = Tk()
root.title("Savings Calculator")
app = Application(root)
root.mainloop() 
```

当我运行程序时，文本打印得很好，但是文本周围包含花括号：{您的储蓄总额为 £} 10 {A 股价值 £} 25 {您的总储蓄总额为 £} 35

我不明白为什么会有花括号，但我希望它们消失。有谁知道我该怎么做？顺便说一句，我只是一个学习 python 的爱好者，到目前为止我很喜欢它。我只包含了我认为相关的代码部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:17:51.587

和

```
result = "Your savings total is £", (a) 
```

您正在创建一个 2 元素元组（“您的储蓄总额为 £”，a）。

然后使用 += 运算符向元组添加新元素。

`result_txt.insert`期望一个字符串作为第二个参数，而不是一个元组（[docs](http://effbot.org/tkinterbook/text.htm#Tkinter.Text.insert-method)），所以你想使用字符串格式来代替：

```
result = ("Your savings total is £{} "
          "and the A shares are worth £{} "
          "Your total savings is £{}").format(a, b, a+b) 
```

（参见[Python 文档](http://docs.python.org/3.2/library/functions.html#format)解释`format`）

# c# - 复杂的 XML 到对象

> ID：14510877
> 
> 赞同：2
> 
> 时间：2013-01-24T21:12:13.573
> 
> 标签：c#

我有一个非常大、复杂的 XML 文件，我希望将每个元素值提取到我已经创建的对象中。我已经尝试过 WCF DataContractSerializer 和普通 XmlSerializer ，它们都非常有问题。

除了使用上述方法解析我的 XML 并分配给对象之外，有人可以推荐最简单的方法来实现上述目标吗？

我正在考虑只使用 XDocument。

我的最终目标是从对象中获取值并序列化为新的 XML。

这是我原来的帖子 [XML 反序列化到对象错误](https://stackoverflow.com/questions/14506535/xml-deserialization-to-object-error)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T21:28:14.180

我通常分两步使用Microsoft[的 XML Schema Definition Tool (XSD.EXE) 来生成可以从任意 XML 文档反序列化的类：](http://msdn.microsoft.com/en-us/library/x6c1kb0s.aspx)

第1步：

```
xsd file.xml [/outputdir:directory] 
```

生成与您的 XML 文件对应的 XSD 文件

第2步：

```
xsd file.xsd /classes [/namespace:namespace] [/outputdir:directory] 
```

使用在步骤 1 中创建的模式生成可以反序列化的类。

从那里您可以按原样使用对象，也可以将对象属性映射到类的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:24:34.727

DataContractSerializer 和 XmlSerializer 只能将 XML 水合到您已经拥有的对象中。即，它们仅在您从 X 类型的对象开始，将其序列化，然后将其反序列化回 X 类型时才有效。通常，如果您正在使用发布数据合约的服务，或者您是序列化的人，则可以使用它们自己的数据。请注意，我说它们序列化整个对象。这不仅仅是数据，还包括数据适合的结构和类型。

由于它显然不是一个序列化对象，因此您在构建自己的对象并使用 XDocument 将其分开的过程中处于正确的轨道上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T21:30:11.277

使用`XmlReader` 或`XmlTextReader`

[http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmlreader.aspx)

[http://msdn.microsoft.com/en-us/library/system.xml.xmltextreader.aspx](http://msdn.microsoft.com/en-us/library/system.xml.xmltextreader.aspx)

XmlReader 或 XmlTextReader 不会将整个 XML 加载到内存中，因此解析如此大的 XML 文件会很有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T21:47:36.847

我一直在使用 XmlSerializer 类以及 System.Xml.Serialization 命名空间中的属性和类方面取得了巨大的成功。

当我有复杂的 XML 数据需要反序列化或读入对象时，我总是先走另一条路。也就是说，首先实例化 .NET 对象，然后将其序列化。然后，我将缓慢而渐进地向 .NET 对象添加属性，以控制我希望它如何被序列化。[无论如何， System.Xml.Serialization](http://msdn.microsoft.com/en-us/library/system.xml.serialization.aspx)命名空间中的类将使您完全控制如何序列化对象。您可以将成员变量序列化为属性或元素。您可以序列化对象数组，甚至可以忽略成员变量。您可以将 xml 元素的名称更改为与成员变量名称不同...我的意思是它非常强大。

但无论如何，诀窍是倒退。先制作.NET对象，然后一点一点开始序列化成XML。一旦你得到它你喜欢的方式，它就可以很容易地自动反序列化。

所以自定义类型可以像这样被序列化/反序列化：

```
[Serializable]
    [XmlRoot(Namespace = "www.google.com",
     ElementName = "BuildServicOptions",
     DataType = "string",
     IsNullable = true)]
public class Options {...} 
```

XML 如下所示：

```
<BuildServiceOptions ....>
</BuildServiceOptions> 
```

数组可以这样序列化：

```
[XmlArray("EmailNotifications")]
[XmlArrayItem("email")]
public string[] EmailNotifications; 
```

XML 如下所示：

```
<EmailNotifications>
<email>Peter@foo.com</email>
<email>James@foo.com</email>
<email>John@foo.com</email>
</EmailNotifications> 
```

可以像这样忽略成员变量：

```
[XmlIgnore]
public string ServerProjectDir; 
```

成员变量可以序列化为属性

```
[XmlAttribute("Name")]
public string ProjectName; 
```

如果您有一个作为成员变量的自定义数据类型，那么这很容易：只需将序列化属性添加到该类即可。事实上，任何需要写入 XML 文件的类都应该在类定义中具有属性。

# javascript - 选中输入复选框后发出警报

> ID：14510882
> 
> 赞同：4
> 
> 时间：2013-01-24T21:12:28.143
> 
> 标签：javascript, jquery

我希望在单击`append`类中的链接 html 输入复选框后，在单击输入复选框后获得警报`is checked`。

我尝试了以下代码，但对我不起作用：

**演示：http:** [//jsfiddle.net/HsveE/](http://jsfiddle.net/HsveE/)

# HTML

```
<a href="#" id="ho">Click Me</a>
<div class="hi"></div> 
```

# jQuery

```
$('#ho').on('click', function(e){
    e.preventDefault();
    $('.hi').append('<input type="checkbox" id="isAgeSelected"/>');
})
$(".hi input[type=checkbox]").on('click',function () {
    alert('is checked')
}) 
```

如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:15:10.073

您需要委托，因为您的元素在绑定时不存在 - 或在元素确实存在后绑定

```
$(".hi").on('click',"input[type=checkbox]",function () {
    alert('is checked')
}) 
```

[http://jsfiddle.net/5dYwG/](http://jsfiddle.net/5dYwG/)

这样做会使用 class=hi 将事件处理程序绑定到您的元素/元素 - 因为它在 dom 准备好时存在并且是您将复选框附加到的元素。然后它会在事件从您的复选框中冒出并处理它们时侦听该事件。

另一件事是始终将绑定包装在 document.ready 函数中，以便在尝试绑定事件处理程序之前等待加载您的 dom。

```
$(function(){
   // your binding code here
}) 
```

**编辑**

```
$(".hi").on('click',"input[type=checkbox]",function () {
  if(this.checked){
    alert('is checked')
  }
}) 
```

[小提琴](http://jsfiddle.net/RMwv7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:28:18.253

用这个...

```
$(".hi").on('click',"input[type=checkbox]",function () {
    if($(this).is(':checked')){
        alert('is checked');
    }
}) 
```

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T22:09:43.880

这是解决方案。

```
$('#ho').on('click', function(e){
  e.preventDefault();
  $('.hi').append('<input type="checkbox" id="isAgeSelected"/>');
});
$(".hi").on('click', '#isAgeSelected', function () {
  alert('is checked = ' + this.checked)
}); 
```

如果您想尝试[http://jsfiddle.net/greenrobo/3Rugn/ ，也可以拨弄一下](http://jsfiddle.net/greenrobo/3Rugn/)

# c - 如何在 cmake 中预处理 Pro*C 文件？

> ID：14510884
> 
> 赞同：2
> 
> 时间：2013-01-24T21:12:33.243
> 
> 标签：c, oracle, cmake, proc

> **可能重复：**
> [如何在构建过程后在 cmake 中编译其他源文件](https://stackoverflow.com/questions/14490096/how-to-compile-additional-source-files-in-cmake-after-the-build-process)

我需要预处理一个 proc 文件（Pro*C oracle）以生成一个 C 文件，然后将它与其余的 C 文件一起编译，我试图像这样解决它但没有成功

```
add_custom_command(TARGET my_proj OUTPUT PRE_LINK
    COMMAND ${PCC} iname=${PROJECT_SOURCE_DIR}/${conn}.proc 
        SQLCHECK=SYNTAX MODE=ANSI IRECLEN=255 ORECLEN=255
        ONAME=${PROJECT_SOURCE_DIR}/${conn}.c
    COMMAND "${CMAKE_C_COMPILER}" ${CMAKE_C_FLAGS} ${PROJECT_SOURCE_DIR}/${conn}.c
) 
```

我究竟做错了什么？

# java - Spring MVC 验证使用 encType="multipart/form-data" 编码的表单

> ID：14510885
> 
> 赞同：0
> 
> 时间：2013-01-24T21:12:37.297
> 
> 标签：java, jsp, spring-mvc, multipartform-data, enctype

我有一个使用**encType="multipart/form-data"的****Spring MVC**应用程序。该表单是一个用户注册表单，其中包含图像以及其他字段，例如用户名、名字、姓氏、dob ect。然后将表单提交给控制器，控制器通过**@InitBinder**注释调用验证。

 ****当文件发布到处理验证的类时，所有值都是**NULL**。我读到这会发生，因为标签中的 encType **="multipart/form-data"****`<form>`**。我也在 applicationcontext.xml 中使用这个 bean 定义：

```
<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
    <!-- one of the properties available; the maximum file size in bytes -->
    <property name="maxUploadSize" value="157286400" />
    <property name="maxInMemorySize" value="5242880"/>
    <property name="defaultEncoding" value="utf-8"/>
</bean> 
```

有人可以给我一个例子，说明我如何从这个文件中提取值并验证它们。我不确定如何在验证器类中接收数据并处理其内容。

**验证类**

```
import javax.servlet.http.HttpServletRequest;

import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;
import org.springframework.validation.Errors;
import org.springframework.validation.Validator;

import com.crimetrack.business.Citizens;

@Component
public class CitizenRegistrationValidation implements Validator{

    private final Logger logger = Logger.getLogger(getClass());

    private @Autowired HttpServletRequest request;

    public boolean supports(Class<?> clazz) {

        return Citizens.class.equals(clazz);
    }

    public void validate(Object target, Errors errors) {

            Citizens citizens = (Citizens)target;   

//---------------------------------------------------------------------------------------------

    String user_request =  request.getParameter("user_request");
    String photo = request.getParameter("photo");   

    logger.info("Thee request param for photo is :"+ photo);
    logger.info("About to validate citizen");
    logger.info("The user request was " + user_request);

    if (!user_request.equals("New")){
        if (user_request.equals("Save") || user_request.equals("update")){

                if(citizens.getSocialSecurityNumber() == 0){

                    errors.rejectValue("socialSecurityNumber", "socialSecurityNumber.required");

                }

                if (citizens.getCitizenTypeId() == 1){

                    errors.rejectValue("citizenTypeId", "citizenTypeId.required");
                }

                if(citizens.getfName() == null){

                    errors.rejectValue("fName", "fName.required");
                }

                if (citizens.getlName() == null){

                    errors.rejectValue("lName", "lName.required");
                }

                if (citizens.getDob() == null){

                    errors.rejectValue("dob", "dob.required");
                } 
```****

# jquery - Bootstrap 来自多个来源的预输入自动完成？

> ID：14510891
> 
> 赞同：4
> 
> 时间：2013-01-24T21:13:09.843
> 
> 标签：jquery, typeahead, bootstrap-typeahead

使用 Bootstrap Typeahead 脚本，我想制作一个具有自动完成功能的输入框。输入框为：

```
<input type="text" class="input-medium search-query" id="name" data-provide="typeahead" autocomplete="off"> 
```

我有 JSON 数据，其简单版本如下：

```
var name_list = {
  "first" = ["John", "Jonathan", "Tom"],
  "last" = ["James", "Smith", "Bush"]
} 
```

当在文本框中输入内容时，现在我只显示“第一个”列表。

```
$('#name').typeahead({source: name_list.first); 
```

但我也想显示“last”的名字。例如，如果我输入“j”，我想查看

```
John
Jonathan
(ideally with a divide line from Bootstrap css)
James 
```

在自动完成列表中。我怎样才能做到这一点？有没有办法调用多个 JSON 数据源？

# python - 结合两个字典

> ID：14510894
> 
> 赞同：1
> 
> 时间：2013-01-24T21:13:19.617
> 
> 标签：python, dictionary

所以我有两本词典。

```
Dictionary 1 looks like this: {'aaien': ['01, 02, 12'], 'aan': ['10']}
Dictionary 2 looks like this: {'01:': ['pronoun'], '02': ['I'],'03': ['we']} 
```

现在我想写一个函数或代码结合这两个字典，结果应该是：'aaien':['pronoun, I, effect']

这是我到目前为止所得到的：

```
for word, nums in d1.items():
    print word, "->",
    for num in nums:
        if d2.has_key(num):
            print d2[num],
    print 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:26:00.650

使用`collections.defaultdict()`：

```
In [60]: dic1= {'aaien': ['01, 02, 12'], 'aan': ['10']}

In [61]: dic2={'01': ['pronoun'], '02': ['I'],'03': ['we']}   #  after fixing '01:'

In [62]: dic3=defaultdict(list)

In [63]: for x,y in dic1.items():
    keys=map(str.strip,y[0].split(","))  #split at ",", and then apply str.strip
    for k in keys:                        
        if k in dic2:                    #if key is present in dic2
            dic3[x].extend(dic2[k])
   ....:             

In [64]: dic3
Out[64]: defaultdict(<type 'list'>, {'aaien': ['pronoun', 'I']}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:36:38.393

我建议你先修复你的字典，然后再使用`dict.setdefault`：

```
d1 = {k:map(str.strip,v[0].split(',')) for k,v in d1.iteritems()}
d2 = {k.strip(':'):v for k,v in d2.iteritems()}

result = {}
for k,v in d1.iteritems():
    for i in v:
        if i in d2:
            result.setdefault(k,[]).extend(d2[i])
print result 
```

*输出：*

```
{'aaien': ['pronoun', 'I']} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T22:07:16.713

在您首先“修复”您的听写（正如其他人所建议的那样）之后，我希望它们看起来像这样。

```
d1 = {'aaien': ['01', '02', '12'], 'aan': ['10']}
d2 = {'01': 'pronoun', '02': 'I', '03': 'we'} 
```

然后试试这个：

```
print {k: [d2.get(l) for l in v] for k, v in d1.iteritems()}
{'aaien': ['pronoun', 'I', None], 'aan': [None]} 
```

值已被替换，并且 None 放在没有可用值的地方。

如果您真的想让您的查找 dict(d2) 值成为值列表，我需要更多信息。你想要列表还是扁平化？

IE。查找

```
d2 = {'01': ['pronoun'], '02': ['I', 'spam'], '03': ['we']} 
```

你想要这些中的哪一个

```
{'aaien': ['pronoun', 'I', 'spam', None], 'aan': [None]}
{'aaien': ['pronoun', ['I', 'spam'], None], 'aan': [None]} 
```

# mysql - @GeneratedValue 不起作用。“java.sql.SQLException：字段 'ID' 没有默认值”

> ID：14510895
> 
> 赞同：5
> 
> 时间：2013-01-24T21:13:22.780
> 
> 标签：mysql, jakarta-ee, jpa, javabeans, persistence-unit

上下文：`Jboss5.1`，`MySql 5.0`

我尝试了很多可能性..一个简单的`@GeneratedValue`或其他明确指定序列生成器的解决方案，但也有同样的问题......有堆栈跟踪

```
22:00:53,334 INFO  [STDOUT] Hibernate: insert into Lavoro (nome, userIDrichiedente, sede, stato) values (?, ?, ?, ?)
22:00:53,341 WARN  [JDBCExceptionReporter] SQL Error: 1364, SQLState: HY000
22:00:53,342 ERROR [JDBCExceptionReporter] Field 'ID' doesn't have a default value
22:00:53,372 ERROR [[CreaLavoroServlet]] Servlet.service() for servlet CreaLavoroServlet threw exception
javax.ejb.EJBException: javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: could not insert: [org.swimv2.model.Lavoro]
    at org.jboss.ejb3.tx.Ejb3TxPolicy.handleExceptionInOurTx(Ejb3TxPolicy.java:77)
    at org.jboss.aspects.tx.TxPolicy.invokeInOurTx(TxPolicy.java:83)
    at org.jboss.aspects.tx.TxInterceptor$Required.invoke(TxInterceptor.java:190)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.aspects.tx.TxPropagationInterceptor.invoke(TxPropagationInterceptor.java:76)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.tx.NullInterceptor.invoke(NullInterceptor.java:42)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.security.Ejb3AuthenticationInterceptorv2.invoke(Ejb3AuthenticationInterceptorv2.java:186)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.ENCPropagationInterceptor.invoke(ENCPropagationInterceptor.java:41)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.BlockContainerShutdownInterceptor.invoke(BlockContainerShutdownInterceptor.java:67)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.aspects.currentinvocation.CurrentInvocationInterceptor.invoke(CurrentInvocationInterceptor.java:67)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.stateless.StatelessContainer.dynamicInvoke(StatelessContainer.java:421)
    at org.jboss.ejb3.remoting.IsLocalInterceptor.invokeLocal(IsLocalInterceptor.java:85)
    at org.jboss.ejb3.remoting.IsLocalInterceptor.invoke(IsLocalInterceptor.java:72)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.aspects.remoting.PojiProxy.invoke(PojiProxy.java:62)
    at $Proxy317.invoke(Unknown Source)
    at org.jboss.ejb3.proxy.impl.handler.session.SessionProxyInvocationHandlerBase.invoke(SessionProxyInvocationHandlerBase.java:207)
    at org.jboss.ejb3.proxy.impl.handler.session.SessionProxyInvocationHandlerBase.invoke(SessionProxyInvocationHandlerBase.java:164)
    at $Proxy320.validaLavoro(Unknown Source)
    at org.swimv2.servlet.CreaLavoroServlet.doPost(CreaLavoroServlet.java:100)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
    at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
    at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Unknown Source)
Caused by: javax.persistence.PersistenceException: org.hibernate.exception.GenericJDBCException: could not insert: [org.swimv2.model.Lavoro]
    at org.hibernate.ejb.AbstractEntityManagerImpl.throwPersistenceException(AbstractEntityManagerImpl.java:614)
    at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:226)
    at org.jboss.jpa.tx.TransactionScopedEntityManager.persist(TransactionScopedEntityManager.java:187)
    at org.swimv2.controller.GestioneLavoro.validaLavoro(GestioneLavoro.java:81)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeTarget(MethodInvocation.java:122)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:111)
    at org.jboss.ejb3.EJBContainerInvocationWrapper.invokeNext(EJBContainerInvocationWrapper.java:69)
    at org.jboss.ejb3.interceptors.aop.InterceptorSequencer.invoke(InterceptorSequencer.java:73)
    at org.jboss.ejb3.interceptors.aop.InterceptorSequencer.aroundInvoke(InterceptorSequencer.java:59)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.jboss.aop.advice.PerJoinpointAdvice.invoke(PerJoinpointAdvice.java:174)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.interceptors.aop.InvocationContextInterceptor.fillMethod(InvocationContextInterceptor.java:72)
    at org.jboss.aop.advice.org.jboss.ejb3.interceptors.aop.InvocationContextInterceptor_z_fillMethod_1851190336.invoke(InvocationContextInterceptor_z_fillMethod_1851190336.java)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.interceptors.aop.InvocationContextInterceptor.setup(InvocationContextInterceptor.java:88)
    at org.jboss.aop.advice.org.jboss.ejb3.interceptors.aop.InvocationContextInterceptor_z_setup_1851190336.invoke(InvocationContextInterceptor_z_setup_1851190336.java)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.connectionmanager.CachedConnectionInterceptor.invoke(CachedConnectionInterceptor.java:62)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.entity.TransactionScopedEntityManagerInterceptor.invoke(TransactionScopedEntityManagerInterceptor.java:56)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.AllowedOperationsInterceptor.invoke(AllowedOperationsInterceptor.java:47)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.tx.NullInterceptor.invoke(NullInterceptor.java:42)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.ejb3.stateless.StatelessInstanceInterceptor.invoke(StatelessInstanceInterceptor.java:68)
    at org.jboss.aop.joinpoint.MethodInvocation.invokeNext(MethodInvocation.java:102)
    at org.jboss.aspects.tx.TxPolicy.invokeInOurTx(TxPolicy.java:79)
    ... 46 more
Caused by: org.hibernate.exception.GenericJDBCException: could not insert: [org.swimv2.model.Lavoro]
    at org.hibernate.exception.SQLStateConverter.handledNonSpecificException(SQLStateConverter.java:126)
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:114)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:64)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2186)
    at org.hibernate.persister.entity.AbstractEntityPersister.insert(AbstractEntityPersister.java:2666)
    at org.hibernate.action.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:71)
    at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:279)
    at org.hibernate.event.def.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:321)
    at org.hibernate.event.def.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:204)
    at org.hibernate.event.def.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:130)
    at org.hibernate.ejb.event.EJB3PersistEventListener.saveWithGeneratedId(EJB3PersistEventListener.java:49)
    at org.hibernate.event.def.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:154)
    at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:110)
    at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:61)
    at org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:645)
    at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:619)
    at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:623)
    at org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:220)
    ... 80 more
Caused by: java.sql.SQLException: Field 'ID' doesn't have a default value
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1074)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4096)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4028)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2490)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2651)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2734)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2155)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2458)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2375)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2359)
    at org.jboss.resource.adapter.jdbc.WrappedPreparedStatement.executeUpdate(WrappedPreparedStatement.java:365)
    at org.hibernate.id.IdentityGenerator$GetGeneratedKeysDelegate.executeAndExtract(IdentityGenerator.java:94)
    at org.hibernate.id.insert.AbstractReturningDelegate.performInsert(AbstractReturningDelegate.java:57)
    ... 95 more 
```

有趣部分的实际实体代码：

```
@Entity
public class Lavoro implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private long id;

    private String nome;

    private String sede;

    private String stato; 
```

我遇到错误的代码：

```
Lavoro lavoro = new Lavoro();
        lavoro.setNome(formLavoro.getNome());
        lavoro.setSede(formLavoro.getSede());
        lavoro.setStato("PENDENTE");
        lavoro.setPersona(p);
        lavoro.setAbilitas(listaAbilita);
        lavoro.setRichiestapartecipazionelavoros(new ArrayList<Richiestapartecipazionelavoro>());
        lavoro.setPersonas(new ArrayList<Persona>());
        lavoro.setFeedbacks(new ArrayList<Feedback>());
        System.out.println("Prima del persist");
        manager.persist(lavoro); 
```

注意：manager 是实体经理。

MySQL 的 ID 字段设置为`NOT_NULL`和`AUTO_INCREMENT`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-24T21:26:43.120

你在 MySQL 上使用序列吗？MySQL 支持使用数据库上的 AUTO_INCREMENT 字段生成值。您不需要指定 SequenceGenerator。

像这样：

```
@Id
@GeneratedValue(strategy = GenerationType.AUTO) 
```

MySQL 字段定义：

```
YOUR_FIELD BIGINT(20) NOT NULL AUTO_INCREMENT 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T22:41:47.573

也许你应该检查映射。在其他表中用作外键的 ID 可能存在一些问题？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-12T09:47:32.733

确保您没有使用 setter 作为模型类中的主键。包 com.example.models;

```
@Entity
public class BlogDetails {
@Id
@GeneratedValue
@Column(name="B_Id",nullable=false)
private int b_Id;
@Column(name="EmailId")
private String emailId;
@Column(name="Title")
private String title;
@Column(name="BriefDetail")
private String briefDetail;
@Column(name="Detail")
private String detail;

public BlogDetails() {
}

public BlogDetails(String EmailId, String Title, String BriefDetail, String      

Detail) {
this.emailId=EmailId;
this.title=Title;
this.briefDetail=BriefDetail;
this.detail=Detail;
}

public int getB_Id() {
return b_Id;
}

public String getEmailId() {
return emailId;
}

public void setEmailId(String emailId) {
this.emailId = emailId;
}

public String getTitle() {
return title;
}

public void setTitle(String title) {
this.title = title;
}

public String getBriefDetail() {
return briefDetail;
}

public void setBriefDetail(String briefDetail) {
this.briefDetail = briefDetail;
}

public String getDetail() {
return detail;
}

public void setDetail(String detail) {
this.detail = detail;
}

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-07-22T11:17:31.163

试试这个：

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Long id; 
```

# camera - iPad 的 UITabBar 弹出窗口中的 UIImagePicker 和相机

> ID：14510896
> 
> 赞同：1
> 
> 时间：2013-01-24T21:13:24.727
> 
> 标签：camera, uitabbarcontroller, picker, photolibrary

我不想在我最近的开发中包含一个弹出窗口，它显示一个带有两个选项卡的 UITabBarcontroller，一个用于照片库，第二个用于相机。我不想对相机使用全屏，弹出框将类似于 600x800 像素，相机和库都应该显示在这些范围内。我已经看到一些应用程序，比如 Facebook 正在这样做。怎么可能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T22:48:22.420

编辑：

我已将两个 UIViewControllers 从 UITabBarController 更改为 UIImagePickerController。对于第二个，我在 ViewDidLoad 中添加：

self.sourceType = UIImagePickerControllerSourceTypeCamera;

现在我在第一个标签库中选择了任何照片，第二个标签打开相机，我可以拍照了。

仍有待解决：

第一个控制器的尺寸是我设定的 600x800，但是当更改为第二个（相机）时，它的尺寸会调整到大约 200x400。努力解决。

# c# - 拖放后回发？

> ID：14510897
> 
> 赞同：2
> 
> 时间：2013-01-24T21:13:25.633
> 
> 标签：c#, javascript, asp.net, ajax

我有以下 aspx 页面：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="WebForm2.aspx.cs" Inherits="KezberProjectManager.WebForm2" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
     <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<style>
h1 { padding: .2em; margin: 0; }
#products { float:left; width: 500px; margin-right: 2em; }
#cart { width: 200px; float: left; margin-top: 1em; }
/* style the list to maximize the droppable hitarea */
#cart ol { margin: 0; padding: 1em 0 1em 3em; }
</style>
<script>
    $(function () {
        $("#catalog").accordion();
        $("#catalog li").draggable({
            appendTo: "body",
            helper: "clone"
        });
        $("#cart ol").droppable({
            activeClass: "ui-state-default",
            hoverClass: "ui-state-hover",
            accept: ":not(.ui-sortable-helper)",
            drop: function (event, ui) {
                $(this).find(".placeholder").remove();
                $("<li></li>").text(ui.draggable.text()).appendTo(this);
            }
        }).sortable({
            items: "li:not(.placeholder)",
            sort: function () {
                // gets added unintentionally by droppable interacting with sortable
                // using connectWithSortable fixes this, but doesn't allow you to customize active/hoverClass options
                $(this).removeClass("ui-state-default");
            }
        });
    });
</script>
</head>
<body>
    <form id="form1" runat="server">
        <div>
            <div id="products">
                <h1 class="ui-widget-header">Products</h1>
                <div id="catalog">
                    <h2><a href="#">T-Shirts</a></h2>
                    <div>
                        <ul>
                            <li>Lolcat Shirt</li>
                            <li>Cheezeburger Shirt</li>
                            <li>Buckit Shirt</li>
                        </ul>
                    </div>
                    <h2><a href="#">Bags</a></h2>
                    <div>
                        <ul>
                            <li>Zebra Striped</li>
                            <li>Black Leather</li>
                            <li>Alligator Leather</li>
                        </ul>
                    </div>
                    <h2><a href="#">Gadgets</a></h2>
                    <div>
                        <ul>
                            <li>iPhone</li>
                            <li>iPod</li>
                            <li>iPad</li>
                        </ul>
                    </div>
                </div>
            </div>
            <div id="cart">
                <h1 class="ui-widget-header">Shopping Cart</h1>
                <div class="ui-widget-content">
                    <ol>
                        <li class="placeholder">Add your items here</li>
                    </ol>
                </div>
            </div>

        </div>
    </form>
</body>
</html> 
```

取自[http://jqueryui.com/droppable/#shopping-cart](http://jqueryui.com/droppable/#shopping-cart)

我正在使用 asp .net。我想知道如何修改它，以便每次添加商品时都可以通知服务器，并且能够在将商品放入购物车后运行一些 aspx 代码。

我需要做什么才能拥有类似的东西：

```
public partial class WebForm1 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
    }  

     protected void Item_Dropped(String itemName)
    {
    }  
} 
```

基本上这样我就可以在服务器上做一些事情，比如将此项目添加到数据库中，而无需刷新页面。

有没有关于如何在 asp .net 中做这种事情的例子？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T22:34:28.403

看看[这个问题](https://stackoverflow.com/q/4722500/1888017)——它将帮助您了解在页面上放置文件时如何实现 javascript 事件。

当您有此类事件时，您只需在此事件上绑定 ajax 调用，并且每次触发此事件时向服务器发送 ajax 调用。

它不会是带有所有相关内容（如传输状态、页面重新加载等）的 asp.net 对服务器的请求，只是一个轻量级的异步调用，仅包含您需要的数据。如果你想有标准的回发，调用`__doPostBack()`由 asp.net 生成的 javascript 函数。

# internet-explorer-8 - 在 IE8 中嵌入 FontAwesome 字体时出现 CSS3111 错误

> ID：14510898
> 
> 赞同：5
> 
> 时间：2013-01-24T21:13:31.813
> 
> 标签：internet-explorer-8, font-face, webfonts

我在我的页面上使用 FontAwesome (http://fortawesome.github.com/Font-Awesome/) 作为网页字体：

[http://www.jungledragon.org/apps/jd3/](http://www.jungledragon.org/apps/jd3/)

我的问题是字体无法在 IE8（标准模式）中加载，而是显示方形块。由于这些图标对于设计至关重要，我很想解决这个问题。

我已经研究了很多问题和答案，所以让我告诉你我做了什么来解决这个问题。首先，我使用推荐的格式嵌入此字体：

```
@font-face {
  font-family: 'FontAwesome';
  src: url('../type/fontawesome-webfont.eot');
  src: url('../type/fontawesome-webfont.eot?#iefix') format('embedded-opentype'),
  url('../type/fontawesome-webfont.woff') format('woff'),
  url('../type/fontawesome-webfont.ttf') format('truetype'),
  url('../type/fontawesome-webfont.svg#FontAwesome') format('svg');
  font-weight: normal;
  font-style: normal;
} 
```

这是加载字体 x-browser 的事实上的标准，与 FontSquirrel 等工具生成的输出相同。type 目录是相对于我的 CSS 目录的，这个字体会在除 IE8 之外的所有浏览器中加载。

其次，我启用了跨域起源 (CORS)，所以这绝对不是问题。

有人建议加载 html5 shiv 可能会干扰 IE8 加载字体，但完全删除 shiv 加载仍然没有任何区别。

该站点在 Apache2 上运行，添加 mime 类型似乎对结果没有任何影响。另外，我可以确认我可以使用直接路径从 IE8 下载 eot 文件，因此该文件绝对可以访问。

我不知道我做错了什么，但这一定是我的目的。原因很简单：从 IE8 打开 FontAwesome 官方网站可以正常加载字体。此外，我使用的辅助字体（网站徽标中使用的字体）也可以很好地呈现。第二种字体来自 Google webfonts，而 fontawesome 字体托管在与网站相同的域中。

我对如何解决这个问题没有任何想法，有什么线索吗？

更新：我应该在 IE 开发人员工具栏中添加，这是我得到的错误：

**CSS3111：@font-face 遇到未知错误。fontawesome-webfont.eot**

我发现这篇文章讨论了这个错误：

[http://www.marinbezhanov.com/web-development/16/how-to-embed-webfonts-properly-and-how-to-solve-the-ambiguous-css3111-font-face-encountered-unknown-error/](http://www.marinbezhanov.com/web-development/16/how-to-embed-webfonts-properly-and-how-to-solve-the-ambiguous-css3111-font-face-encountered-unknown-error/)

...但我没有看到对我有帮助的解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T21:52:29.330

最终，这个答案解决了我的问题：

[https://stackoverflow.com/a/12459447/80969](https://stackoverflow.com/a/12459447/80969)

我不得不使用一个不起眼的字体编辑程序来编辑 fontawesome 下载包附带的 ttf 文件。在那里，我将“人类字体名称”重命名为与所有其他“名称”字段相同。接下来，我使用[http://www.font2web.com/](http://www.font2web.com/)生成了一个新的 .eot 文件并将其集成到项目中，其他一切都保持不变。而且，它的工作原理！

看起来我的 font-awesome 版本在下载中内置了问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-06T14:49:15.770

也可能值得检查[http://fontface.codeandmore.com/blog/ie-7-8-error-with-eot-css3111/](http://fontface.codeandmore.com/blog/ie-7-8-error-with-eot-css3111/)。

# html - 页脚后的空白，仅在 Firefox 和 IE 中

> ID：14510899
> 
> 赞同：4
> 
> 时间：2013-01-24T21:13:32.620
> 
> 标签：html, css, internet-explorer, firefox

网站底部的页脚后似乎有随机空白，但它只显示在 IE 和 Firefox 中。该网站在 Safari 和 Chrome 中运行良好。当我尝试使用检查元素时，空白似乎不属于任何标签。它似乎与任何页脚标签无关，因为删除它们并没有改变任何东西。网站链接为： http: [//www.insightdatascience.com](http://www.insightdatascience.com)。

我查看了很多答案，但似乎没有一个专门适用于我的网站。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-13T15:02:53.830

我有类似的问题。对此类问题的更一般修复是添加：

```
body {
    overflow: hidden;
} 
```

到您的 css 文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-25T02:57:54.360

在`stylesheetmain.css`中，您有以下规则：

```
.fellows #insightpictures .buttons {
    margin: 635px auto;
} 
```

更改`margin: 635px auto;`为`margin: 635px auto 0;`以删除下边距。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-13T18:30:51.017

我也有类似的问题，仅在 FireFox 上。

我有一个典型的页面布局，上面有顶部窗格和底部窗格等。我用 Grid 设置了它的布局。通过将底部窗格的背景设置为粉红色，我可以看到它覆盖了在页面底部边缘结束的预期区域。但是出现的垂直滚动条允许我在底部窗格下方滚动，从而显示它下面有空白区域。

我的问题是（由事实引起）在底部窗格中我只有一个未设置样式的 H3。默认情况下，FireFox 为 H3 元素提供了顶部和底部边距，这导致内容流过底部窗格的底部边缘。

当我将 H3 元素的边距设置为 0px 时，问题就消失了。

所以我想一般要意识到的是，即使你的容器元素（比如我的底部窗格）在页面末尾整齐地结束，如果它有太多的内容，它可能会溢出并在它下面创建额外的空间。一个通用的解决方案是在这样的元素上设置溢出：隐藏。内容不会自动停留在其容器的边界内。您必须明确防止溢出，如果有一些并且您不想要它。

为什么我在 FireFox 上看到了这个问题，而在 Chrome 上却没有？原来 H3 的默认样式在 Chrome 上是不同的，它给了它更少的下边距，所以没有足够的它来导致溢出。

# ruby-on-rails-3 - 动作显示中的路由错误，如何解决？

> ID：14510901
> 
> 赞同：1
> 
> 时间：2013-01-24T21:13:35.473
> 
> 标签：ruby-on-rails-3

我正在尝试创建一个感谢页面，我的路线运行良好，因为我测试了它的 url 并且运行良好，但是当我尝试在创建操作中重定向时，我得到：

没有路线匹配 {:action=>"show", :controller=>"schedules", :locale=>:en, :id=>nil}

控制器

```
 def create
    @appointment = Appointment.new(params[:appointment])

      if @appointment.save
        #send email
        AppointmentMailer.appointment_confirmation(@appointment).deliver
        AppointmentMailer.new_appointment(@appointment).deliver
        redirect_to :action => "thank_you"
      else
        render :action => 'new', :alert => @appointment.errors.full_messages.split(', ')
      end
  end

  def new
    @schedule = Schedule.find(params[:id])
    @appointment = @schedule.appointments.new
  end

  def thank_you
      @appointment = Appointment.find(params[:id])
  end 
```

路线

```
 scope ":locale", :locale => /#{I18n.available_locales.join("|")}/ do
    root :to => "Doctors#index"

    resources :specialties
    resources :branches

    resources :doctors do
       get 'new_schedule', :on => :member, :controller => 'schedules', :action => 'new'
    end

    # NIA: Here is the trick: we remove /shedules/new route (with :except => :new)
    # and map /doctors/new_schedule instead to SchedulesController#new action (see above)
    # (the same is done with appointments)
    resources :schedules, :except => :new do
      get 'new_appointment', :on => :member, :controller => 'appointments', :action => 'new'
    end

    resources :appointments do
      member do
        get :thank_you
      end
    end

  end

  match '*path', :to => redirect("/#{I18n.default_locale}/%{path}")
  match '', :to => redirect("/#{I18n.default_locale}") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:33:52.030

你的路线错了。你想要这个（s/member/collection）：

```
resources :appointments do
  collection do
    get :thank_you
  end
end 
```

使用“会员”，您的感谢路线预计会收到您没有通过的 id。因此它失败了。收集不会发生。

在进行此更改之前运行“rake routes”以查看我在说什么……然后再运行它。

# c++ - Mat的单通道作为矩阵Opencv

> ID：14510906
> 
> 赞同：1
> 
> 时间：2013-01-24T21:13:43.127
> 
> 标签：c++, image-processing, opencv, computer-vision

我试图将存储在 Mat 通道中的 RGB 图像的每个通道转换为 3 个 2D 矩阵，每个矩阵用于 R、G 和 B。这个问题可能是初级的，但你能告诉我如何实现这一点吗？我在 Linux 中使用 opencv2.4.3，Cmake 编译器。

我使用了拆分，但它再次将值存储在 Mat 中。我想要一个可以轻松访问的简单二维数组，而不是 Mat。你能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:20:44.313

您可以使用[opencv 文档](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=split#split)`split`中的 , ：

> 函数 split 将多通道数组拆分为单独的单通道数组

# django - 在处理 ImageField 的 inlineformset_factory 中包含附加字段

> ID：14510912
> 
> 赞同：1
> 
> 时间：2013-01-24T21:14:00.950
> 
> 标签：django, inline-formset

使用 Django，我正在创建使用标准 ImageField 上传的图像的缩略图，在通常的图像文件字段旁边的单独字段“缩略图”中添加表的路径。我正在尝试如何访问缩略图路径，在该路径中使用表单集在自定义模板中呈现图像字段对象，以便我可以显示它。

我想我需要在 inlineformset_factory 中添加一个“form=CarImageForm”，然后修改我的 forms.py，但我无法弄清楚如何去做，甚至这种方法是否正确。为了清楚起见，我没有在下面的代码示例中包含我这样做的尝试。

我的最终目标是返回链接到原始图像的缩略图图像 - 已经通过 Imagefile 字段显示。

提前致谢！

模板是：

```
<form method="post" action="" enctype="multipart/form-data">
{% csrf_token %}
{{ formset.management_form }}
{% for form in formset.forms %}
    {% for field in form %}
        {{ field.label }}: {{ field }}<br>
    {% endfor %}
{% endfor %}
<p><input type="submit" value="Enter"/></p> 
```

表格.py：

```
class CarForm(ModelForm):
    class Meta:
        model = Car
        exclude = ['owner', 'uploaded'] 
```

视图.py：

```
# Edit an existing record
@login_required
def edit_existing(request, object_id=False):
    try:
        car = Car.objects.get(pk=object_id)
    except Car.DoesNotExist:    
        raise Http404   
    ImageFormSet = inlineformset_factory(Car, CarImage, extra=1, max_num=1)
    if request.method == 'POST':
        form = forms.CarForm(request.POST, instance=car)
        formset = ImageFormSet(request.POST, request.FILES, instance=car)
        if formset.is_valid() and form.is_valid():
            # Handle form.save() to include user id
            new_car = form.save(commit=False)
            new_car.owner = request.user
            new_car.save()
            # Formset - contains the attached images
            formset.save()  
            return HttpResponseRedirect(new_car.get_absolute_url())
    else:
        form = forms.CarForm(instance=car)
        formset = ImageFormSet(instance=car)
    return render_to_response('edit_existing.html',
        {'form': form, 'formset': formset},
        context_instance=RequestContext(request)) 
```

模型.py：

```
class Car(models.Model):
    make = models.CharField(max_length=64)
    model = models.CharField(max_length=64)
    owner = models.ForeignKey(User,editable=False)
    uploaded = models.DateField(default=datetime.date.today,editable=False)

    def get_absolute_url(self):
        return reverse('vehicle_admin.views.car_detail', args=[str(self.id)])

def orig_car_id_folder(instance, filename):
    return 'uploads/images/orig/{0}/{1}'.format(instance.car_id, filename)

def thumb_car_id_folder(instance, filename):
    return 'uploads/images/thumb/{0}/{1}'.format(instance.car_id, filename)

class CarImage(models.Model):
    car = models.ForeignKey(Car)
    imagefile = models.ImageField(upload_to=orig_car_id_folder)
    thumbnail = models.ImageField(upload_to=thumb_car_id_folder, editable=False)

    # PIL tips from 
    # https://snipt.net/danfreak/generate-thumbnails-in-django-with-pil/
    # http://www.mechanicalgirl.com/post/image-resizing-file-uploads-doing-it-easy-way/
    def save(self):
        import os
        from PIL import Image
        from cStringIO import StringIO
        from django.core.files.uploadedfile import SimpleUploadedFile
        THUMBNAIL_SIZE = (75, 75)
        super(CarImage, self).save() # Use the commit=False param here?
        image = Image.open(self.imagefile.path)
        if image.mode not in ('L', 'RGB'):
            image = image.convert('RGB')
        image.thumbnail(THUMBNAIL_SIZE, Image.ANTIALIAS)
        temp_handle = StringIO()
        image.save(temp_handle, 'png')
        temp_handle.seek(0)
        name_ext = os.path.splitext(os.path.split(self.imagefile.name)[-1])
        suf = SimpleUploadedFile(name_ext[0],
                temp_handle.read(), content_type='image/png')
        self.thumbnail.save(suf.name+'.png', suf, save=False)
        super(CarImage, self).save() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:11:35.433

我认为这是我的一个基本疏忽。

我的问题是在我的 CarImage 模型中为“缩略图”字段设置 editable=False。这对于初始数据提交来说很好，但会导致在编辑条目时出现问题，因为该字段会自动排除在表单中。（有关更多信息，请参阅我上面的代码片段。）

我的下一步是为我的 add_new 视图设置一个自定义表单（我最初没有包含此视图，但它是我用来启用数据初始上传的），如下所示：

```
class InitialCarImageForm(ModelForm):
    class Meta:
        model = CarImage
        exclude = ['thumbnail'] 
```

我想正确的方法是使用 editable=False 但除非我犯了一个严重的错误，否则它可能对我有用。

我是该网站的新手，所以请让我知道以这种方式回答我的问题是否是关闭它的正确方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T00:41:14.517

如果你愿意尝试使用我的[django-extra-views](https://github.com/AndrewIngram/django-extra-views)库，你可以这样做：

```
from django.contrib.auth.decorators import login_required
from django.utils.decorators import method_decorator

from extra_views import UpdateWithInlinesView, InlineFormSet

class CarForm(ModelForm):

    def __init__(self, *args, **kwargs):
        self.user = self.kwargs.pop('user')
        super(CarForm, self).__init__(*args, **kwargs)

    def save(self, commit=True)
        instance = super(CarForm, self).save(commit=False)
        instance.user = self.user

        if commit:
            instance.save()
        return instance

    class Meta:
        model = Car
        exclude = ['owner', 'uploaded']

CarImageInline(InlineFormSet):
    model = CarImage
    extra = 1
    max_num = 1

UpdateCarView(UpdateWithInlinesView):
    pk_url_kwarg = 'object_id'
    inlines = [CarImageInline]
    template_name = 'edit_existing.html'
    form_class = CarForm

    @method_decorator(login_required)
    def dispatch(self, *args, **kwargs):
        return super(UpdateCarView, self).dispatch(*args, **kwargs)

    def get_form_kwargs(self):
        kwargs = super(UpdateCarView, self).get_form_kwargs()
        kwargs['user'] = self.request.user
        return kwargs

    def get_success_url(self):
        return self.object.get_absolute_url() 
```

主要区别：

*   表单负责将用户分配给汽车，表单在实例化时会控制用户（请参阅 get_form_kwargs）。这样做的原因是，对于基于类的视图，覆盖 form_valid（或在本例中为 forms_valid）有点笨拙，所以我更喜欢将东西放入表单中。
*   你得到的不是`formset`你的上下文，`inlines`而是一个表单集列表。这是因为从技术上讲，您可以拥有任意数量的内联表单集，即使在这种情况下您只有一个，它实际上与 Django 管理员的工作方式相同。
*   覆盖`dispatch`应用`login_required`装饰器很笨重，幸运的是，它很容易抽象为 mixin，请参阅[django-braces](https://github.com/brack3t/django-braces)了解一些现成的。

# css - CSS3 过渡不支持 RGBA 背景属性吗？

> ID：14510914
> 
> 赞同：7
> 
> 时间：2013-01-24T21:14:17.390
> 
> 标签：css

我正在尝试以下代码，但没有看到任何类型的转换。

```
#menu .col_1 a{
    -webkit-transition: all .5s ease-out 0.1s;
    -moz-transition: all .5s ease-out 0.1s;
    -o-transition: all .5s ease-out 0.1s;
    transition: all .5s ease-out 0.1s;
}

#menu .col_1 a:hover{
    background-color: rgb(255, 255, 255);
    background-color: rgba(255, 255, 255, 0.5);
    /* For IE 5.5 - 7*/
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);
    /* For IE 8*/
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)";
} 
```

是我搞砸了还是不支持这种类型的转换？悬停工作正常，我只是看不到任何过渡。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-24T21:39:49.620

CSS3 支持 RGBA 背景。您需要为初始状态提供背景属性，以便它在悬停状态下发生变化。

这是您需要的代码：

```
#menu .col_1 a {
-webkit-transition: all .5s ease-out 0.1s;
-moz-transition: all .5s ease-out 0.1s;
-o-transition: all .5s ease-out 0.1s;
transition: all .5s ease-out 0.1s;
background-color: rgba(0,0,0,1);
color: red;
}

#menu .col_1 a:hover {
background-color: rgb(255, 255, 255);
background-color: rgba(255, 255, 255, 0.5);
/* For IE 5.5 - 7*/
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000);
/* For IE 8*/
-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#99000000, endColorstr=#99000000)"; 
```

}

如果您需要它，可以使用它：http: [//jsfiddle.net/TAMA2/](http://jsfiddle.net/TAMA2/)

# width - 全屏网站在 100% 宽度上具有水平溢出滚动

> ID：14510923
> 
> 赞同：1
> 
> 时间：2013-01-24T21:14:45.407
> 
> 标签：width, fullscreen, horizontal-scrolling, css

我的代码有一个问题，我找不到解决方案。我有左侧边栏 w: 300px h:100% ，我希望右侧 div （内容区域）为 w: 100% 和 h:100% 并带有水平滚动条..

但是我的代码有问题，我无法弄清楚，右边的 div 越过了侧栏，如果我放 margin-left:300px，那么它们 300px 会添加到 100px 的权重上。

我希望你能理解我，这是我的代码：

HTML：

```
<div id="wrapper">
   <?php include '../side_bar.php' ?>

    <div id="content">
       <div id="scroll">
        <img src="../images/design1.jpg" width="759" height="565"> 
        <img src="../images/design1.jpg" width="759" height="565"> 
        <img src="../images/design1.jpg" width="759" height="565"> 
       </div>
    </div>
</div> 
```

CSS：

```
body, html {
    margin: 0;
    padding: 0;
    height:100%;
    width:100%;
}

#wrapper {
    width:100%;
    height:100%;
    display:inline-block;
}

#side_bar {
    float:left;
    width:300px;
    height:100%;
    position:fixed;
    border-right:#000 solid 1px;
}

#content {
    float:left;
    height:100%;
    width:100%;
    position:fixed;
}

#scroll {
    height:100%;
    width:100%;
    display:inline-block;
    position:absolute;
    overflow-x:scroll;
    overflow-y:hidden;  
    white-space: nowrap; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:34:42.840

通过以下调整后的 CSS，我能够获得您想要的功能：

```
body, html {
margin: 0;
padding: 0;
height:100%;
width:100%;
}
#wrapper {
width:100%;
height:100%;
display:inline-block;
}

#side_bar {
/*float:left;*/
top:0;
left:0;
width:300px;
height:100%;
position:fixed;
border-right:#000 solid 1px;
background-color:#333;
}

#content {
/*float:left;*/
top:0;
left:0;
height:100%;
width:100%;
position:fixed;
}

#scroll {
height:100%;
/*width:100%;*/
right:0px;
left:301px; /*Because of border */
display:inline-block;
position:absolute;
overflow-x:scroll;
overflow-y:hidden;  
white-space:nowrap;
} 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-10T15:56:15.883

[您可以使用 jQuery 的fullPage.js](http://alvarotrigo.com/fullPage/)插件轻松创建全屏网站：

*   [演示](http://alvarotrigo.com/fullPage/)
*   [Github 账号](https://github.com/alvarotrigo/fullPage.js)

它不仅提供了一种创建垂直部分的方法，还提供了水平部分。

一些优点：

*   Auto scrolling moving the mouse wheel
*   Use of anchors(#) in the URL
*   Compatible with touch devices
*   Compatible with old browsers (> IE7)
*   Provides callbacks and lots of useful functions
*   Strongly tested in different devices

# coffeescript - 如何从闭包内部调用实例方法？

> ID：14510926
> 
> 赞同：4
> 
> 时间：2013-01-24T21:14:55.200
> 
> 标签：coffeescript

我试图在`map`调用中访问实例方法，不幸的是我对实例对象的引用被重新定义为 Window。我不确定如何获取我的实例方法：

```
class Test
  constructor: (@an_array) ->

  f: () ->
    @an_array.map (value) ->
      @a(value)

  a: (value) ->
    alert value

t = new Test [1, 2, 3]
t.f() // TypeError: Object [object Window] has no method 'a' 
```

[这是上述代码的功能链接](http://coffeescript.org/#try%3aclass%20Test%0A%20%20constructor%3a%20%28@an_array%29%20-%3E%0A%0A%20%20f%3a%20%28%29%20-%3E%0A%20%20%20%20@an_array.map%20%28value%29%20-%3E%0A%20%20%20%20%20%20@a%28value%29%0A%20%0A%20%20a%3a%20%28value%29%20-%3E%0A%20%20%20%20alert%20value%0A%0At%20=%20new%20Test%20%5B1,%202,%203%5D%0At.f%28%29)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-25T00:44:04.857

有多种方法可以解决这个问题。

CoffeeScript 中最常见的是使用粗[箭头 ( `=>`)](http://coffeescript.org/#fat_arrow)来生成绑定函数：

```
@an_array.map (value) => @a(value) 
```

演示：http: [//jsfiddle.net/ambiguous/6BW8q/](http://jsfiddle.net/ambiguous/6BW8q/)

标准的 JavaScript 方法也可以工作（有时是必要的或更合适的）：

1.  保存对的引用，`@`这样您就不必关心`this`回调函数内部的内容：

    ```
    _this = @
    @an_array.map (value) -> _this.a(value) 
    ```

    演示：http: [//jsfiddle.net/ambiguous/XhP4z/](http://jsfiddle.net/ambiguous/XhP4z/)

    我倾向于使用`_this`而不是`self`作为这个东西的名称，因为如果你忘记了JavaScript中的存在[`window.self`](https://developer.mozilla.org/en-US/docs/Web/API/Window/self)和*有趣*的错误会导致它的存在。`var`

2.  使用 手动创建绑定函数[`Function.bind`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind)，但这并不是普遍支持的：

    ```
    @an_array.map ((value) -> @a(value)).bind(@) 
    ```

    演示：http: [//jsfiddle.net/ambiguous/n2XnC/](http://jsfiddle.net/ambiguous/n2XnC/)

3.  使用 jQuery's [`$.proxy`](http://api.jquery.com/jQuery.proxy/)、 Underscore's[`_.bind`](http://underscorejs.org/#bind)或其他一些非本地绑定函数实现：

    ```
    @an_array.map _((value) -> @a(value)).bind(@) 
    ```

    演示：http: [//jsfiddle.net/ambiguous/LAy9L/](http://jsfiddle.net/ambiguous/LAy9L/)

您选择哪一种取决于您的环境和特定需求：

1.  如果您尝试绑定来自其他地方的函数，那么您将无法使用`=>`，因此您需要使用上述**(2)**或**(3)**的一些变体（或者可能是[`Function.call`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/call)or [`Function.apply`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/apply)）。
2.  如果您同时需要内部和外部`this`，那么您将使用**(1)**。
3.  如果您需要手动绑定一个函数，但您不确定是否`bind`存在原生函数，那么您可能会以 (3) 结尾，而( **3** **)**的哪个分支可能取决于您已经拥有的库。
***   ...*   利润。**

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:17:35.810

发现我可以通过定义一个变量来保存我的引用来做到这一点`this`：

```
class Test
  constructor: (@an_array) ->

  f: () ->
    self = @
    @an_array.map (value) ->
      self.a(value)

  a: (value) ->
    alert value

t = new Test [1, 2, 3]
t.f()  // raises 3 alerts: 1, 2, 3 
```

[这是一个工作示例](http://coffeescript.org/#try%3aclass%20Test%0A%20%20constructor%3a%20%28@an_array%29%20-%3E%0A%0A%20%20f%3a%20%28%29%20-%3E%0A%20%20%20%20self%20=%20@%0A%20%20%20%20@an_array.map%20%28value%29%20-%3E%0A%20%20%20%20%20%20self.a%28value%29%0A%20%0A%20%20a%3a%20%28value%29%20-%3E%0A%20%20%20%20alert%20value%0A%0At%20=%20new%20Test%20%5B1,%202,%203%5D%0At.f%28%29)。

这感觉有点像 hack，所以我会把 Q&A 留给别人来教我应该如何做。:D**

# wpf - 有没有办法确定 WPF 绑定的声明/创建位置？

> ID：14510931
> 
> 赞同：34
> 
> 时间：2013-01-24T21:15:29.073
> 
> 标签：wpf, data-binding

我有一个项目抛出一些数据绑定错误。一个例子是：

`System.Windows.Data Error: 4 : Cannot find source for binding with reference 'RelativeSource FindAncestor, AncestorType='System.Windows.Controls.ItemsControl', AncestorLevel='1''. BindingExpression:Path=HorizontalContentAlignment; DataItem=null; target element is 'MenuItem' (Name=''); target property is 'HorizontalContentAlignment' (type 'HorizontalAlignment')`

我的问题是是否有办法确定此绑定的实际声明位置（在 XAML 或代码中声明）。

到目前为止我已经尝试过：

*   为 System.Windows.Data 命名空间添加了一个调试跟踪，级别设置为全部；这没有产生任何更有用的信息
*   尝试在项目中对单词**Binding**进行文本搜索，希望找到所有将 Path 设置为的绑定表达式`HorizontalContentAlignment`；我只找到了一个并将其删除，但我仍然收到消息，这似乎表明那不是错误的..

您是否知道任何其他技巧可以使 WPF 吐出一些更有用的信息，说明此绑定的确切声明位置？

*更新*

经过多一点搜索后，我很确定这是由于某种样式应用于`MenuItem`. 但是，我仍然无法确定声明错误绑定的位置。

**更新 2**

我发现了问题。但是问题仍然存在，因为发现问题主要是根据错误消息中的有限信息在黑暗中搜索的问题。

事实证明，绑定是在样式中声明的。而且样式不在我的应用程序中。这可能是`MenuItem`. 所以现在要解决这个问题，我只是手动设置了`HorizontalContentAlignment`on all `MenuItems`。错误的原因在某种程度上与操作顺序有关，因为这`MenuItem`是在代码中生成的。我将单独发布一个新问题。

所以，就目前而言，这个故事的寓意是，我觉得需要一个更好的机制来确定错误绑定的声明位置。我想看到类似绑定堆栈跟踪的东西..

如果有人知道确定在代码或标记中声明绑定的位置的任何其他工具或方法，我将把这个问题保持一段时间。

我发布了另一个[关于应用于`MenuItems`here](https://stackoverflow.com/questions/14526371/menuitem-added-programmatically-causes-binding-error)的样式/绑定的问题。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2013-01-25T14:00:58.080

在调试 WPF 绑定错误时，我发现用分号将错误分解最容易，并从最后开始

1.  `System.Windows.Data Error: 4 :`
2.  `Cannot find source for binding with reference 'RelativeSource FindAncestor, AncestorType='System.Windows.Controls.ItemsControl', AncestorLevel='1''. BindingExpression:Path=HorizontalContentAlignment;`
3.  `DataItem=null;`
4.  `target element is 'MenuItem' (Name='');`
5.  `target property is 'HorizontalContentAlignment' (type 'HorizontalAlignment')`

所以从头开始：

*   #5 告诉您哪个属性包含失败的绑定。在你的情况下，它是`HorizontalContentAlignment`

*   #4 是包含失败属性的元素，它`MenuItem`没有`Name`属性来识别它

    所以在某个地方你有一个`<MenuItem HorizontalContentAlignment="{Binding ...}" />`导致绑定错误的地方。

*   #3 是目标元素后面的`DataItem`, 或, 。`DataContext`它似乎`null`适合您，但这不是问题，因为看起来您的绑定没有引用 DataContext。

    但这确实表明`MenuItem`不是您的常规的一部分`VisualTree`，因为通常`DataContext`是从父对象继承的。

*   #2 包含实际绑定错误和有关绑定的信息。它实际上可以进一步分解为多个部分。

    *   `Cannot find source for binding`

    *   `with reference 'RelativeSource FindAncestor, AncestorType='System.Windows.Controls.ItemsControl', AncestorLevel='1''.`

    *   `BindingExpression:Path=HorizontalContentAlignment;`

    “找不到源”意味着绑定找不到要绑定的源对象，在您的情况下，该源对象应该是`{RelativeSource AncestorType={x:Type ItemsControl}`（`FindAncestor`并且`AncestorLevel=1`是 a 的默认值`RelativeSource`，所以我忽略了那些）

    ＃2的最后一部分显示`Path`您尝试绑定到：`HorizontalContentAlignment`

所以把它们放在一起，在你的代码的某个地方有一个`<MenuItem>`试图将它绑定`HorizontalContentAlignment`到一个`ItemsControl.HorizontalContentAlignment`，但绑定找不到`ItemsControl`.

您正在使用`RelativeSource FindAncestor`绑定来查找`ItemsControl`，它向上搜索可视化树以找到最接近`ItemsControl`的 ，但它没有找到一个，因此在 VisualTree 层次结构中必须没有`ItemsControl`更高的`MenuItem`.

我经常看到这个问题，`ContextMenus`因为它们`VisualTree`与其他 XAML 代码不同。`VisualTree`（要引用a附加到的 main 中的对象`ContextMenu`，您可以使用该`PlacementTarget`属性，例如[此示例](https://stackoverflow.com/a/5236744/302677)。

了解绑定错误后，通常很容易在 XAML 中找到它的来源。

根据我的应用程序大小，我通常会执行以下操作之一：

*   从绑定错误（在您的情况下为 ）中搜索“目标元素”的应用程序`MenuItem`，并查看其中是否有任何`HorizontalContentAlignment`使用绑定设置“目标属性”（ ）

*   从绑定错误 ( ) 中搜索“目标属性”的应用程序`HorizontalContentAlignment`以找到导致此问题的绑定

*   从绑定错误中显示的绑定文本中搜索应用程序以查找相当独特的内容。在您的情况下，您可以尝试搜索`{x:Type ItemsControl}`哪个将成为您的`RelativeSource`绑定的一部分，并且这样的短语不应该有太多的搜索结果。

*   使用[Snoop](http://code-inside.de/blog-in/2013/01/21/snoop-firebug-for-wpf-applications/)或[WPF Inspector](http://wpfinspector.codeplex.com/)等第 3 方工具在运行时跟踪绑定错误。

    我以前只使用过 Snoop，但要使用它，您需要启动您的应用程序并针对它运行 Snoop 以在应用程序运行时检查您的应用程序的 VisualTree。然后，您可以通过在搜索栏中键入“MenuItem”之类的内容来搜索 VisualTree 以过滤所有的 Visual Tree `MenuItems`，然后查看它们的属性以找出哪个有绑定错误（该`HorizontalContentAlignment`属性将以红色突出显示，因为绑定错误）。

    应该注意的是，如果你`MenuItem`在 a 内`ContextMenu`，那么你需要打开它`ContextMenu`才能绘制 MenuItems 并显示在 Snoop 中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-24T23:38:07.607

也许您可以使用这个名为[Snoop](http://code-inside.de/blog-in/2013/01/21/snoop-firebug-for-wpf-applications/)的出色应用程序。[它在CodePlex](http://www.codeplex.com)中是免费的。它帮助我找到了几个绑定问题，以及丢失的数据上下文。它让您探索整个 WPF 可视化树，并为您提供绑定错误。

希望史努比能帮上忙。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-23T07:15:00.060

我是 WPF 的新手，我有完全相同的错误。虽然我现在已经修复了它，但我真的不知道如何......以下是我尝试过的步骤：

首先，我有：

1.  一个`<Menu>`
2.  2`<ContextMenu>`定义在`<ListBox.ItemTemplate>`

我试图：

1.  将一个`<ContextMenu>`移入`<ListBox.ItemContainerStyle>` -> 存在错误
2.  设置和删除样式`HorizontalContentAlignment`和`VerticalContentAlignment`for `<Menu>`, `<ContextMenu>`, `<MenuItem>` ->error 存在
3.  设置in的`Name`属性 ->**没有错误！**`<MenuItem>``<ContextMenu>``<ListBox.ItemTemplate>`
***   删除`Name`属性->**仍然没有错误...***   重新启动VS - >**错误似乎永远消失了......****

 **最终，我有

1.  一个`<Menu>`
2.  一个`<ContextMenu>`定义在`<ListBox.ItemTemplate>`
3.  一个`<ContextMenu>`定义在`<ListBox.ItemContainerStyle>`

并且他们都没有设置样式`HorizontalContentAlignment`和`VerticalContentAlignment`。并且错误消失了...

似乎有一些刷新问题。因此，对于那些有同样问题的人，您可以尝试重新启动 VS 或设置`Name`属性`<MenuItem>`...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-27T19:56:33.157

System.Windows.Data 错误：4 - 这不是您的问题，这是 WPF 已知问题。它是相关的组合框/菜单，其项目是动态更改的。[看到这个](https://social.msdn.microsoft.com/Forums/vstudio/en-US/8028a46b-3080-40ad-aed2-e9417eb25381/binding-to-menuitem-result-in-binding-errors?forum=wpf)。顺便说一句，您可以忽略此错误，通常应用程序可以正常工作。**

# java - 如何以不同方式打印 getString 的值？

> ID：14510936
> 
> 赞同：0
> 
> 时间：2013-01-24T21:15:57.897
> 
> 标签：java, jsp, getstring

```
<%
                        st = con.createStatement();
                        rs = st.executeQuery("select pf_nm from portfolio");

                    while(rs.next())
                        {
                           String arr= rs.getString(1);
                           out.println(arr+"\n\n");
                        }
 %> 
```

如上面的代码所示，我得到多个值作为 getString(1) 的返回值，但我想要所有这些值。如何得到它们？

例如，getString(1) 返回 Google Facebook Apple Adob​​e。我想通过以某种方式存储它们来单独打印它们，以便之后可以访问它们中的每一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:26:22.303

> 返回值类似于 String arr 中的 Google Facebook –</p>

您可以使用`String.split("\\s")`空格作为分隔符来拆分字符串。

```
 String arr= rs.getString(1);
                        String[] strArr = arr.split("\\s");
                        for(String s: strArr){
                            out.println(s);
                        } 
```

# javascript - 解析 html 字符串 Windows 8 javascript 应用程序

> ID：14510939
> 
> 赞同：1
> 
> 时间：2013-01-24T21:16:01.543
> 
> 标签：javascript, windows-8, microsoft-metro

我正在阅读 rss 提要，提要的描述节点包含 html。

```
article.description = items[n].querySelector("description").textContent; 
```

这工作正常。我想做的是从描述中获取第一个图像 src 属性值（如果存在）。

这涉及解析 html 块。我曾尝试在本地添加 jQuery (1.9)，但它不起作用。我尝试创建一个 DOMParser 对象，但似乎无法访问。

任何线索我可以如何去做这件事？我见过其他一些类似的问题，但没有任何真正的解决方案。

摘要：需要在 JavaScript 中为 Windows 8 Metro 应用程序从 html 字符串中解析图像

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:48:09.713

这个怎么样...

```
var html = '<div>Some text<img src="http://slickthought.net"/></div>';

var element = document.createElement('div');
element.innerHTML = html;
var img = element.getElementsByTagName('img')[0]; 
```

# ruby - 乘客安装 Apache 错误

> ID：14510941
> 
> 赞同：3
> 
> 时间：2013-01-24T21:16:06.683
> 
> 标签：ruby, apache, passenger, raspberry-pi

我在 debian wheezy raspberry pi 上运行 ruby​​ 和 ruby​​ gems。当我`passenger-install-apache2-module`在安装 apache2 和乘客 gem 后运行命令时，它会在检查所有组件是否已安装时给出：

```
Apache:
Use of uninitialized value $includedir in concatenation (.) or string at (eval 9) line 1.
Use of uninitialized value $includedir in concatenation (.) or string at (eval 9) line 1. 
```

然后当它开始编译时，它会显示：

```
Compiling and installing Apache 2 module...
cd /usr/lib/ruby/gems/1.9.1/gems/passenger-3.0.19
/usr/bin/ruby1.9.1 /usr/bin/rake apache2:clean apache2 RELEASE=yes
# /usr/bin/ruby1.9.1 /usr/bin/rake apache2:clean apache2 RELEASE=yes
Use of uninitialized value $includedir in concatenation (.) or string at (eval 9) line 1.
Use of uninitialized value $includedir in concatenation (.) or string at (eval 9) line 1.
Use of uninitialized value $includedir in concatenation (.) or string at (eval 9) line 1.
Use of uninitialized value $includedir in concatenation (.) or string at (eval 9) line 1.
rm -rf ext/common/libboost_oxt.a ext/common/libboost_oxt
rm -rf ext/common/libpassenger_common.a ext/common/libpassenger_common
rm -f agents/PassengerWatchdog agents/PassengerLoggingAgent
rm -rf ext/apache2/module_libboost_oxt.a ext/apache2/module_libboost_oxt
rm -rf ext/apache2/module_libpassenger_common.a ext/apache2/module_libpassenger_common
rm -rf ext/apache2/Configuration.o ext/apache2/Bucket.o ext/apache2/Hooks.o ext/apache2/mod_passenger.o ext/apache2/mod_passenger.so agents/PassengerHelperAgent
mkdir -p ext/apache2/module_libpassenger_common
g++ -Iext -Iext/common -Iext/libev -fPIC -fvisibility=hidden -DVISIBILITY_ATTRIBUTE_SUPPORTED -Wno-attributes -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -I/usr/include/apr-1.0 -I/usr/include/apr-1.0 -I/usr/include -D_FORTIFY_SOURCE=2 -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -D_REENTRANT -I/usr/include -I/usr/include/apr-1.0 -I/usr/include/openssl -I/usr/include/xmltok -pthread -I/usr/include/apache2 -D_REENTRANT -I/usr/local/include -DHASH_NAMESPACE="__gnu_cxx" -DHASH_NAMESPACE="__gnu_cxx" -DHASH_FUN_H="<hash_fun.h>" -DBOOST_SP_USE_PTHREADS -DHAS_ALLOCA_H -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-long-long -Wno-missing-field-initializers -g -DPASSENGER_DEBUG -DBOOST_DISABLE_ASSERTS -o ext/apache2/module_libpassenger_common/aggregate.o -c ext/apache2/module_libpassenger_common/aggregate.cpp
rm -rf ext/apache2/module_libpassenger_common.a
ar cru ext/apache2/module_libpassenger_common.a ext/apache2/module_libpassenger_common/aggregate.o
ranlib ext/apache2/module_libpassenger_common.a
mkdir -p ext/apache2/module_libboost_oxt
g++ -Iext -fPIC -fvisibility=hidden -DVISIBILITY_ATTRIBUTE_SUPPORTED -Wno-attributes -D_REENTRANT -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -I/usr/include/apr-1.0 -I/usr/include/apr-1.0 -I/usr/include -D_FORTIFY_SOURCE=2 -D_GNU_SOURCE -D_LARGEFILE64_SOURCE -D_REENTRANT -I/usr/include -I/usr/include/apr-1.0 -I/usr/include/openssl -I/usr/include/xmltok -pthread -I/usr/include/apache2 -D_REENTRANT -I/usr/local/include -DHASH_NAMESPACE="__gnu_cxx" -DHASH_NAMESPACE="__gnu_cxx" -DHASH_FUN_H="<hash_fun.h>" -DBOOST_SP_USE_PTHREADS -DHAS_ALLOCA_H -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wpointer-arith -Wwrite-strings -Wno-long-long -Wno-missing-field-initializers -g -DPASSENGER_DEBUG -DBOOST_DISABLE_ASSERTS -o ext/apache2/module_libboost_oxt/aggregate.o -c ext/apache2/module_libboost_oxt/aggregate.cpp
In file included from ext/boost/src/pthread/thread.cpp:27:0,
                 from ext/apache2/module_libboost_oxt/aggregate.cpp:6:
ext/boost/src/pthread/timeconv.inl: In function âvoid {anonymous}::to_time(int, boost::xtime&)â:
ext/boost/src/pthread/timeconv.inl:22:9: warning: variable âresâ set but not used [-Wunused-but-set-variable]
ext/boost/src/pthread/timeconv.inl: In function âvoid {anonymous}::to_timespec_duration(const boost::xtime&, timespec&)â:
ext/boost/src/pthread/timeconv.inl:59:9: warning: variable âresâ set but not used [-Wunused-but-set-variable]
ext/boost/src/pthread/timeconv.inl: In function âvoid {anonymous}::to_duration(boost::xtime, int&)â:
ext/boost/src/pthread/timeconv.inl:90:9: warning: variable âresâ set but not used [-Wunused-but-set-variable]
ext/boost/src/pthread/timeconv.inl: In function âvoid {anonymous}::to_microduration(boost::xtime, int&)â:
ext/boost/src/pthread/timeconv.inl:112:9: warning: variable âresâ set but not used [-Wunused-but-set-variable] 
```

我已尝试重新安装 apache 和乘客，但错误仍然存​​在。Apache 正常运行，否则。

编辑：未安装 apache 标头时不会出现“未初始化值”警告。一旦我安装它们，就会发生错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T02:17:51.540

我以前遇到过类似的问题，但不是树莓派。有一种解决方法，不是从 gem 安装乘客，而是使用命令“aptitude install libapache2-mod-passenger”。它可以工作，因为 debian 包通常具有经过良好测试的质量，您最好利用它。

# c# - 在c#中选择不同的区域选项会改变数学运算的结果

> ID：14510942
> 
> 赞同：2
> 
> 时间：2013-01-24T21:16:06.880
> 
> 标签：c#, globalization, decimal-point, regional-settings

我使用 Visual Studio 2010。我的代码有一个奇怪的行为

使用此代码，我可以解析 xml 文件。

```
XDocument document = XDocument.Load("http://www.studiovincent.net/list.xml");
XElement resourcesElement = document.Root.Element("resources");
XElement resourceElementVincent = (from resourceElement in resourcesElement.Elements("resource")
                                           where resourceElement.Elements("field").Single(fieldElement => fieldElement.Attribute("name").Value == "name").Value == "Vincent"
                                           select resourceElement).Single();

decimal tasso = Math.Round(decimal.Parse(resourceElementVincent.Elements("field").Single(fieldElement => fieldElement.Attribute("name").Value == "age").Value) / Convert.ToInt64(1.00E+006), 6);

string gigi = Math.Round(41 * tasso, 4).ToString();
Console.WriteLine("{0}", gigi);
Console.ReadLine(); 
```

一切正常，直到我更改区域选项。如果我选择意大利语：

![在此处输入图像描述](../Images/f4b5de1051f748baf2775a39d04bb4d1.png)

这是输出：**0,0013**

![在此处输入图像描述](../Images/abd3e6b231f5f95add1ebbe5c6852d83.png)

如果我在区域选项中选择美国，则为 OUTPUT: **0.0000**

![在此处输入图像描述](../Images/cfc4d05bd656f4e27ced01ae58860027.png)

我不知道如何解决这个问题。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:57:07.960

`decimal.Parse(string)`使用当前系统格式；因此

```
decimal.Parse(resourceElementVincent.Elements("field")
       .Single(fieldElement => fieldElement.Attribute("name").Value == "age")
       .Value) 
```

当 Vincent 的年龄设置为 0.27 并且当前文化是意大利语（其中[NumberDecimalSeparator](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.numberdecimalseparator.aspx)是逗号）时，将返回零。

但是，您可以改用该`decimal.Parse(string, IFormatProvider)`方法，传递`InvariantCulture`（其中 NumberDecimalSeparator 是句点）：

```
decimal.Parse(resourceElementVincent.Elements("field")
       .Single(fieldElement => fieldElement.Attribute("name").Value == "age")
       .Value, CultureInfo.InvariantCulture); 
```

MSDN 文档[在这里](http://msdn.microsoft.com/en-us/library/t7xswkc6.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:42:27.403

我的猜测是 1.00E+006 的解析取决于当前区域。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-24T21:28:13.353

这很正常！欧洲语言使用小数点作为逗号，反之亦然。如果您想始终如一地使用其中一种，您可以结合 String.Format 设置特定的文化，如下所示：

[通过 CultureInfo 格式化字符串](https://stackoverflow.com/questions/1266093/format-string-by-cultureinfo)

# sql-server - 在 Microsoft SQL Server Management Studio 中更改列的名称会反映在存储过程中吗？

> ID：14510944
> 
> 赞同：0
> 
> 时间：2013-01-24T21:16:13.133
> 
> 标签：sql-server, sql-server-2008, tsql, stored-procedures

我的任务是根据命名约定调整数据库中列的名称，以提高清晰度和一致性。

所讨论的数据库有许多对上述表执行操作的存储过程。如果我通过 Microsoft SQL Server Management Studio 2008 中的设计选项更改列名，此更改会自动反映在相关存储过程中，还是需要手动调整所有存储过程中的列名以避免破坏关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:19:17.933

@Christian，我的理解是您必须分别在这两个地方进行更改。因此，更改列名，然后将所有存储过程中引用的列的名称从旧名称更改为新名称。

# javascript - javascript确定是否不相等的正确方法，特别是在typeof的情况下

> ID：14510946
> 
> 赞同：0
> 
> 时间：2013-01-24T21:16:17.230
> 
> 标签：javascript, jquery, operators

> **可能重复：**
> [javascript未定义比较](https://stackoverflow.com/questions/2778901/javascript-undefined-compare)

这总是让我感到困惑，我永远找不到明确的答案，当我尝试一种或另一种时，它似乎也没有最终向我表明一种方法或另一种方法比另一种更有效。

我看到人们这样做：

```
typeof system_obj.alpha !== 'undefined'
!typeof system_obj.alpha == 'undefined'
typeof system_obj.alpha != 'undefined' 
```

但在任何情况下，我总是时不时地以误报告终。所以我的问题是，当我想知道字符串是否不为空或未定义时，或者如果我想检查类型是否不是某事，然后基于此做某事，我总是会得到类似的结果

```
if(typeof system_obj.alpha == 'undefined'){/*ignore*/}else
{
  //code
} 
```

我如何正确地做到这一点，而不必像我最终做的那样使用 if-else 逻辑

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:20:01.533

使用`system_obj.alpha === void 0`它是检查变量是否未定义的最快方法，并且它是可靠的。这是比较。

[http://jsperf.com/typeof-vs-undefined-check/3](http://jsperf.com/typeof-vs-undefined-check/3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T21:41:58.613

只需执行以下操作：

```
if (typeof systemObj !== 'undefined') {
  ... do something
} 
```

要测试对象是否真实（而不是未定义、空、假等），请执行以下操作：

```
if (systemObj) {
    ... do something (will throw error is object does not exist)
} 
```

您的示例显示在上面的方式可以执行以下操作：

```
 if (systemObj.hasOwnProperty('alpha') && systemObj.alpha) {
     ... do something
 } 
```

这将检查以确保 alpha 存在并且不是虚假的。

在问题范围之外，我建议以下内容：

*   **使用骆驼皮套。**

*   **不要那样写你的 if 语句。**

*   查看[http://addyosmani.com/blog/](http://addyosmani.com/blog/)或类似资源，了解如何编写更好的 JavaScript。

# google-drive-api - Google Drive API 随机 401 错误

> ID：14510947
> 
> 赞同：1
> 
> 时间：2013-01-24T21:16:20.420
> 
> 标签：google-drive-api

我有一项集成到 Google Drive API 的服务。在看似随机的基础上，我将从请求中获得 401 响应，并且尝试重复请求将产生相同的响应（最多 5 次，此时我们放弃尝试）。

对同一用户的先前和后续请求，使用相同的授权标头将是成功的。迹象似乎是与 API 本身的行为有些不一致。在这一点上，我不确定处理这些错误的最佳方法是什么，因为重新尝试失败的请求继续失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T22:42:58.940

如果错误是可重复的，我认为它们不是随机的。

请检查令牌是否已被撤销。

# php - 我需要在另一个页面上回显从 mysql 填充的下拉选择

> ID：14510953
> 
> 赞同：1
> 
> 时间：2013-01-24T21:17:00.847
> 
> 标签：php, jquery, mysql, ajax, drop-down-menu

我有一个三个下拉菜单，其中两个是从 Mysql 填充的，所以根据第一个中选择的内容，定义第二个中填充的内容，然后是第三个。然而。我需要选择用户 3 个选项，并将它们带到下一页并回显它们，然后对于第三页也是如此，我需要获取第一页的答案，第二个，并在第三页上回显它们。等等。到目前为止，这是我的代码：

```
<?php
``if (@$_REQUEST['ajax']) {
// connect to local database 'test' on localhost
$link = mysql_connect('localhost', 'user', 'pass');
if ($link == false)
    trigger_error('Connect failed - ' . mysql_error(), E_USER_ERROR);

$connected = mysql_select_db('test', $link);

if ($connected) {
    $results = mysql_query('select * from test.select_chain where category="' . strtolower(mysql_real_escape_string(strip_tags($_REQUEST['category']))) . '"');

    $json = array();

    while (is_resource($results) && $row = mysql_fetch_object($results)) {
        //$json[] = '{"id" : "' . $row->id . '", "label" : "' . $row->label . '"}';
        $json[] = '"' . $row->label . '"';
    }

    echo '[' . implode(',', $json) . ']';
    die(); // filthy exit, but does fine for our example.
} else {
    user_error("Failed to select the database");
    }
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en">
<head>
<meta http-equiv="Content-type" content="text/html; charset=utf-8" />
<title>Select Chain</title>
<style type="text/css" media="screen">
<!--
  BODY { margin: 10px; padding: 0; font: 1em "Trebuchet MS", verdana, arial, sans-serif; }
  BODY { font-size: 100%; }
  H1 { margin-bottom: 2px; font-family: Garamond, "Times New Roman", Times, Serif;}
  DIV.selHolder { float: left; border: 3px solid #ccc; margin: 10px; padding: 5px;}
  TEXTAREA { width: 80%;}
  FIELDSET { border: 1px solid #ccc; padding: 1em; margin: 0; }
  LEGEND { color: #ccc; font-size: 120%; }
  INPUT, TEXTAREA { font-family: Arial, verdana; font-size: 125%; padding: 7px; border: 1px solid #999; }
  LABEL { display: block; margin-top: 10px; } 
  IMG { margin: 5px; }
  SELECT { margin: 10px; width: 200px; }
-->
</style>

<script src="jquery.js" type="text/javascript"></script>
<script src="select-chain.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
<!--
$(function () {
    var cat = $('#categorySelect');
    var el = $('#elementSelect');
    var attr = $('#attributeSelect');

    el.selectChain({
        target: attr,
        url: 'index.php',
        data: { ajax: true, anotherval: "anotherAction" }            
    });        

    // note that we're assigning in reverse order
    // to allow the chaining change trigger to work
    cat.selectChain({
        target: el,
        url: 'index.php',
        data: { ajax: true }
    }).trigger('change');

});
//-->
   </script>
  </head>
    <center><img src="tgd.png" alt="The Global Dollar" href="index.php"></center>
   <body id="page">
    <div id="doc">
    <center><h1>Country</h1></center>
    <div class="selHolder">
        <h2>Continent</h2>
        <select id="categorySelect" name="category" size="5">
          <option>Africa</option>
      <option>America</option>
  <option>Antarctica</option>
  <option>Asia</option>
  <option>Australia</option>
  <option>Europe</option>
        </select>
    </div>
    <div class="selHolder">
        <h2>Country</h2>
        <select id="elementSelect" name="category" size="5">
            <option>[none selected]</option>
        </select>
    </div>
    <div class="selHolder">
        <h2>City</h2>
        <select id="attributeSelect" name="category" size="5">
            <option>[none selected]</option>
        </select>
    </div>
    </div>
   <a href="../secondpage">Next Page </a>
  </body>
</html> 
```

有谁知道我该怎么做？抱歉，如果我不清楚，很难描述。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:33:35.507

您在这里谈论的是动态下拉功能。通过从 MySQL 中获取选项，我为你找到了一个来源。

也许你可以参考这个并整理出来。

[由 MySQL 提供支持的动态下拉菜单](http://css-tricks.com/dynamic-dropdowns/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:02:37.713

以下是 Web 客户端可以将信息传递到加载的下一页的一些方法：

*   将信息放在 URL 的查询字符串中（基本上是通过 GET 提交表单时发生的情况）。下一页可以解析查询字符串。
*   当用户转到下一页时，将信息作为 POST 数据发送到服务器。服务器可以在传递信息时将信息写入下一页。
*   [您可以通过使用PHP 会话](http://php.net/manual/en/intro.session.php)存储信息来构建先前的想法。即使用户离开页面并返回，服务器也会在一段时间内记住用户的选择。
*   您可以将信息存储在 cookie 中。如果您愿意，可以使用 JavaScript 完全设置和读取 Cookie。
*   HTML5 本地存储可能有点矫枉过正，但如果你最终要构建一些复杂的东西......

# c - 如果 T 的第一个字段是 C，是否将 struct T* 转换为 struct C* 未定义的行为？

> ID：14510954
> 
> 赞同：5
> 
> 时间：2013-01-24T21:17:06.910
> 
> 标签：c, undefined-behavior, speex

在尝试调试我使用 Speex 时遇到的问题时，我注意到它（不仅是 Speex，还有一些示例代码）执行以下操作：

*   从初始化函数返回指向 EncState 的指针
*   将该指针转换为 void 指针
*   存储空指针
*   （别处）
*   将 void 指针转换为指向 SpeexMode 的指针
*   取消引用指针

碰巧 的定义以`EncState`type 的字段开头`SpeexMode *`，因此指向第一个字段的指针和指向 struct 的指针的整数值恰好相同。取消引用恰好在运行时起作用。

但是......语言真的允许这样做吗？如果编译它，编译器是否可以自由地做它想做的任何事情？如果 C`，将结构`T*`转换为结构`C*`未定义的行为`T''s first field is a` ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T21:20:06.023

来自 C11 标准：

> （C11 §6.7.2.1.15：“指向结构对象的指针，经过适当转换，指向其初始成员……反之亦然。结构对象内可能有未命名的填充，但不是在其开头。”）

这意味着您看到的行为是允许和保证的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2021-02-20T19:30:58.620

每个版本的标准都将对许多别名结构的支持视为实施质量问题，因为基本上不可能编写支持所有有用结构、不阻止任何有用优化并且可以被所有编译器支持的规则无需大量返工。考虑以下函数：

```
struct foo {int length; int *dat; };

int test1(struct foo *p)
{
  int *ip = &p->length;
  *ip = 2;
  return p->length;      
} 
```

我认为很明显，任何高质量的编译器都应该能够处理类型对象`struct foo`可能受到对`*ip`. 另一方面，考虑函数：

```
void test2(struct foo *p)
{
    int i;
    for (i=0; i < p->length; i++)
        p->dat[i] = 0;
} 
```

是否应该要求编译器考虑到写入`p->dat[i]`可能影响 的值的可能性`p->length`，例如通过`p->length`至少在循环的第一次迭代之后重新加载 的值？

我认为委员会的一些成员可能打算要求编译器做出这样的允许，但我不认为他们都这样做了，而且所写的规则也不需要它，因为它们列出了可能用于的左值类型访问类型的对象`struct foo`，并且`int`不在其中。有些人可能认为遗漏是偶然的，但我认为这是基于编译器将规则解释为要求在某些上下文中作为某种特定类型访问的对象由具有*可见关联的左值访问的期望*在该上下文中具有所列类型之一的对象。什么构成“可见关联”的问题作为 QoI 问题留在了标准的管辖范围之外，但编译器编写者应该在可行时做出合理的努力来识别关联。

在类似的函数`test1`中，类型的左值`p`用于派生`ip`，并且`p`不以任何其他方式用于在`p->length`形成`ip`和最后一次使用之间进行访问。因此，编译器应该可以毫不费力地认识到，即使没有一般规则允许使用类型指针访问不相关结构的成员，`*ip`也无法在以后的 read to 中重新排序存储。但是，在 内部，没有可见的方法可以将 的地址用于计算指针，因此优化旨在用于最常见目的的编译器来提升对 的读取是合理的。`p->length``int*``int``test2``p->length``p->dat``p->length`在循环之前期望它的值不会改变。

clang 和 gcc 并没有做出任何努力来识别派生指针的对象的类型，而是选择表现得好像标准授予了使用其类型指针访问 struct（但不是 union！）成员的一般权限。这是允许的，但不是标准所要求的（符合标准但垃圾质量的实现可以`test1`以任意无意义的方式处理），但是对指针派生的盲目性不必要地限制了程序员可用的构造范围，并且有必要放弃应该有用的东西优化，例如`test2()`.

总的来说，几乎所有与 C 中的别名相关的问题的正确答案都是“这是一个实现质量问题”。观察 clang 和 gcc 的作用可能对需要安抚`-fstrict-aliasing`这些编译器模式的人有用，但与标准的实际内容无关。

# javascript - JavaScript 中的小数到分数

> ID：14510957
> 
> 赞同：4
> 
> 时间：2013-01-24T21:17:20.767
> 
> 标签：javascript

我编写了这个简单的脚本来将小数转换为分数，但它不起作用。什么都没有输出。

```
var decimal = 1.75;
var decimalArray = decimal.split("."); // 1.75
var leftDecimalPart = decimalArray[0]; // 1
var rightDecimalPart = decimalArray[1]; // 75

var numerator = leftDecimalPart + rightDecimalPart; // 175
var denominator = Math.pow(10, rightDecimalPart.length); // 100

document.write(numerator + " / " + denominator); 
```

JS 斌：http: [//jsbin.com/exepir/1/edit](http://jsbin.com/exepir/1/edit)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T21:19:17.680

您不能“拆分”数字。

如果您查看控制台，您会看到

> 未捕获的类型错误：对象 1.75 没有方法“拆分”

您应该使用 JSBin 上的 JavaScript 部分，它会在底部的红色框中显示类似这样的错误。

最简单的修复？通过将其写为字符串文字使其成为字符串：

```
var decimal = '1.75'; 
```

或`.toString()`在拆分前致电：

```
var decimalArray = decimal.toString().split("."); 
```

分子在最上面：

```
document.write(numerator + " / " + denominator); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T21:53:04.293

由于使用字符串不是解决问题的最佳方法，我建议您使用仅适用于数字的快速替代解决方案：

```
var decimal = 1.75,
    numerator = decimal,
    denominator = 1;

while (numerator % 1) numerator *= 10;
denominator = numerator / decimal;

console.log(numerator + " / " + denominator);
// >> "175 / 100" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-04T12:17:44.977

如果你想确保它在一般情况下工作，我会依赖一个经过良好测试的库，比如[Fraction.js](https://github.com/infusion/Fraction.js)。

```
var f = new Fraction(1.75);

console.log(f.toFraction()); // Results "1 3/4"
console.log(f.s * f.n + " / " + f.d); // Results "7 / 4"
console.log(f.toString()); // Results "1.75" 
```

# c# - 哪些 Windows 程序或服务可能会更改文件的 LastAccessed 属性？

> ID：14510963
> 
> 赞同：1
> 
> 时间：2013-01-24T21:17:53.080
> 
> 标签：c#, .net, windows, .net-4.0, file-attributes

我有一个许可证文件，如果我们以外的任何程序读取该文件，我希望使该文件无效。我的想法是使用***File.GetLastAccessedTime(string)***并将此值保存到文件中，以便在我们重新读取文件时进行检查。

但是，我担心除了防病毒（我知道客户必须从扫描中排除我们的许可证文件）之外，可能有 Windows 服务或程序可能会接触文件并导致文件上的 LastAccessed 属性在我们程序的上下文之外更新，但没有恶意。

哪些 Windows 程序或服务可能会在后台访问此文件？这是我需要担心的合法问题吗？如果这是我应该担心的事情，是否有任何通用技术可以可靠地实现我的最终目标？

我正在寻找 .NET 4 世界中的解决方案。提前感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T21:21:06.427

任何桌面搜索应用程序。他们得到的任何病毒。WINdow 在文件应用程序中的查找。所有防病毒和反恶意软件工具。更好的想法是对文件进行加密签名以检测内容的更改，或者不要将您担心的文件留在客户端机器上（下载并仅在 ram 中使用）。

# sql - 将sql数据插入列表框

> ID：14510965
> 
> 赞同：0
> 
> 时间：2013-01-24T21:17:54.857
> 
> 标签：sql, vb.net, winforms, listbox

当我运行此代码时，我`listbox`是空的。从 SQL 中获取数据并进入`listbox`. 提交表单时，我想使用`CustomreID`值数据存储到另一个表中，并认为使用索引是最好的解决方案。

```
sSQL = "SELECT CustomerID, Company from Customers Order by Company ASC"

cmd = New SqlCommand(sSQL, moConn)
rs = cmd.ExecuteReader()

While rs.Read
   lsbDestination.Items.Insert(CInt(rs("CustomerID")), rs("Company"))
End While 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:24:43.180

您可以使用 ListBox 的`DataSource`属性轻松地将数据绑定到 ListBox。尝试这样的事情（未经测试）：

```
Dim adapter As New SqlDataAdapter(cmd)
Dim ds As New DataSet
adapter.Fill(ds)

lsbDestination.DataTextField = "Company"
lsbDestination.DataValueField = "CustomerId"
lsbDestination.DataSource = ds.Tables(0)
lsbDestination.DataBind() 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:15:15.863

如果要添加项目以`ListBox`使用*`While rs.Read`*.

```
Using rsAs SqlDataReader = cmd.ExecuteReader()
    While rs.Read()
        Dim items As Object() = {r("CustomerID"), r("Company").ToString()}
        listBox1.Items.Add(items)
    End While
    listBox1.DisplayMember = "Company"
    listBox1.ValueMember = "CustomerID"
End Using 
```

如果您遇到问题，请告诉我。

# python - SciPy - 计算对称矩阵中特定特征值的特征向量

> ID：14510967
> 
> 赞同：2
> 
> 时间：2013-01-24T21:18:02.127
> 
> 标签：python, numpy, scipy, eigenvector, eigenvalue

我有一个对称矩阵（无向图的邻接矩阵），我有一个特定的特征值（最大特征值），我想要与之关联的特征向量（左或右，任一个，因为我相信左只是转置对称矩阵的权利）。

我正在运行的图可以从数千个到数十万个节点，因此相应的邻接矩阵会很大。然而，密度是稀疏的，因此相应的矩阵也将是稀疏的。

在 SciPy 中有没有一种有效的方法来做到这一点？更好的是，有没有一种方法可以只计算给定对称矩阵的前导特征值和相应的特征向量（这意味着我不必自己显式地计算前导特征值`linalg.eigvals`）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:29:02.597

是的，[`scipy.sparse.linalg.eigsh`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.linalg.eigs.html)，`h`最后代表[Hermitian](http://en.wikipedia.org/wiki/Hermitian_matrix)，还有一个非对称矩阵的版本，[`scipy.sparse.linalg.eigs`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.linalg.eigs.html)。

如果`a`是你的矩阵，稀疏与否，你的电话看起来像：

```
evals, evecs = scipy.sparse.linalg.eigsh(a, k=1) 
```

您的`evals`和`evecs`是特征值和相应特征向量的数组，因为如果设置为 1 以外的值，您可以要求多个`k`。返回哪些特征值和向量由`which`参数控制，默认为`LM`，代表*最大规模*。

# dynamics-ax-2009 - 导入数据时出错

> ID：14510968
> 
> 赞同：1
> 
> 时间：2013-01-24T21:18:03.350
> 
> 标签：dynamics-ax-2009

我想将表数据从一个 AX 迁移到另一个。

**简单的例子**：

我创建了一个表`test`，有两列`id`和`value`. 我还在*Administration* / *Periodic* / *Data import, export* / *Definition 组*中创建了一个定义组，并通过*table-setup*我选择了我的 table `test`。表字段`id`和在*字段设置*`value`中也被选中并设置为活动状态。

 *导出设置为*逗号*，几乎可以按预期工作（导出中的字段多于*字段设置*中选择的字段）。

任何类型的编辑器都可以查看文件，并且数据看起来不错。

但是尝试导入这些数据没有成功。根本没有错误消息，只有一条信息日志告诉我（从德语翻译）：

**最小的 RecId 无效。0 个数据集已导入。**

让这个导入/导出工作正常工作的正确方法是什么？导出为 XLS 的行为相同。导出完成。无法导入...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-22T11:01:49.087

我知道这是一篇旧帖子，但我讨厌与我有完全相同的问题但没有答案的帖子；）

我今天遇到了这个问题，并通过检查“包括系统和共享表”解决了这个问题。这是因为我的表将“SaveDataPerCompany”设置为 NO [![AX 导入选项](../Images/c7407191dd92904624d03d6fd03280f0.png)](https://i.stack.imgur.com/NULLJ.jpg)

如果您打开 .def(inition) 文件（导出始终有一个 .def 和一个 .dat 文件），您会注意到“普通”表（非共享）的定义文件有一个 MIN 和一个 MAX 集：“ RECORDIDMIN",5637145841 "RECORDIDMAX",5637156902

而（或至少对于我的）共享表的定义文件将最小值设置为声明为长整数（long、long long int 或 bigint）的变量的最大值

"RECORDIDMIN",9223372036854775807 "RECORDIDMAX",0

迈克尔·范登杜尔*

# ruby-on-rails - Rails 2 - 参数的预期哈希（得到数组）

> ID：14510971
> 
> 赞同：5
> 
> 时间：2013-01-24T21:18:16.620
> 
> 标签：ruby-on-rails

因此，如果我制作了这样的表单，则在 HTML 中：

```
<form method="post">
<input type="text" name="categories[][name]" />
<input type="text" name="categories[][name]" />
<input type="text" name="categories[][name]" />
<input type="text" name="categories[][name]" />
<input type="submit" value="submit" />
</form> 
```

我希望`params[:categories]`成为

```
[{"name"=>"value"},{"name"=>"value"},{"name"=>"value"},{"name"=>"value"}] 
```

但相反，rails 2 将引发 TypeError: expected Hash (got Array) for param

错误在这里提出：

[http://apidock.com/rails/Rack/Utils/normalize_params](http://apidock.com/rails/Rack/Utils/normalize_params)

为什么这在 Rails 中不允许或不可解析？我错过了什么？

我知道我可以像这样索引输入

```
<input type="text" name="categories[0][name]" />
<input type="text" name="categories[1][name]" />
<input type="text" name="categories[2][name]" />
<input type="text" name="categories[3][name]" /> 
```

并得到一个哈希。但这似乎适得其反。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T21:26:58.063

你必须颠倒下标顺序：

```
<input type="text" name="categories[name][]" /> 
```

# regex - 查找有限自动机接受的语言的正则表达式

> ID：14510974
> 
> 赞同：-5
> 
> 时间：2013-01-24T21:18:27.623
> 
> 标签：regex, finite-automata, computation-theory

查找有限自动机接受的语言的正则表达式

![在此处输入图像描述](../Images/89452644f162048e5e54dbe8bb9d83f8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T21:20:07.383

假设您的开始和结束状态都是`-`，您的有限自动机接受如下字符串：-

```
ab
aab
abb
aabb
aabbaaabbb
abaabbaaabbb
aaaabbbb
bbaaabbbaab
so on.. 
```

请注意，自动机接受的字符串将根据状态`start`而变化`end`。但是你可以自己弄清楚。

基于上述模式，您可能可以生成一个正则表达式。不会那么难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:42:11.377

如果您的 (-) 状态是结束状态，那么：

```
b*(a+b+)* 
```

如果您的 (+) 状态是结束状态：

```
b*(a+b+)*a+ 
```

# c# - c#根据可以为空的布尔值分配字符串值

> ID：14510975
> 
> 赞同：1
> 
> 时间：2013-01-24T21:18:37.703
> 
> 标签：c#

这是我的代码：

```
 stringValue = microData.BoolValue.HasValue ? "True" : "False"; 
```

我想做的是根据布尔值分配一个字符串值。如果 BoolValue 有一个值，我喜欢执行以下操作：

如果 BoolValue 为真，则分配 stringValue = "True"。分配 stringValue = "False" ib BoolValue 为假。

如果 Boolvalue 没有值，则将其分配为 null。

我上面的东西似乎不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T21:20:43.073

```
stringValue = microData.BoolValue.HasValue ?
              microData.BoolValue.ToString() :
              (string)null; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T21:22:00.380

尝试这个：

```
stringValue = BoolValue.HasValue ? BoolValue.Value ? "True" : "False" : null; 
```

# java - Java声音类不循环

> ID：14510981
> 
> 赞同：-1
> 
> 时间：2013-01-24T21:18:49.577
> 
> 标签：java, class, audio, javasound

我正在尝试开发游戏，但我找到了 2 个声音来源。

`looped_forever`我在下面发布了整个课程，即使在或`loop_times`设置为这样做时，它似乎也不会循环：

```
package com.jayitinc.ponygame;

import java.io.*;

import javax.sound.sampled.*;

public class Sound
{
Thread t;
String read;
String name;

AudioInputStream stream = null;
AudioFormat format = null;

// New sound, the String it it's location relative to your project folder.
// I suggest you add a class folder in the project properties to access the
// files from there.
public Sound(String read, String name)
{
    sound = new File("sound/" + read);
    try
    {
        stream = AudioSystem.getAudioInputStream(sound);
    } catch (Exception e)
    {
        e.printStackTrace();
    }
    format = stream.getFormat();
    this.name = name;
}

// New sound with set volume
public Sound(String read, float volume, String name)
{
    this(read, name);
    setVolume(volume);
    try
    {
        stream = AudioSystem.getAudioInputStream(sound);
    } catch (Exception e)
    {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    format = stream.getFormat();
}

public void play()
{
    t = new Thread(play);
    // Write you own file location here and be aware that it need to be an
    // .wav file
    t.start();
}

// ONLY USE IF YOU HAVE STARTED THE THREAD FIRST
public void stop()
{
    // stops the sound thread from playing
    t.stop();
}

// Just in case you would like to change it
public void setVolume(float volume)
{
    this.volume = volume;
}

File sound;
boolean muted = false; // This should explain itself
float volume = 100.0f; // This is the volume that goes from 0 to 100
float pan = 0.0f; // The balance between the speakers 0 is both sides and it
                    // goes from -1 to 1
boolean isPlaying;

double seconds = 0.0d; // The amount of seconds to wait before the sound
                        // starts playing

boolean looped_forever = false; // It will keep looping forever if this is
                                // true

int loop_times = 0; // Set the amount of extra times you want the sound to
                    // loop (you don't need to have looped_forever set to
                    // true)
int loops_done = 0; // When the program is running this is counting the
                    // times the sound has looped so it knows when to stop

// The rest of this is pretty complicated, you don't need to bother with it.

final Runnable play = new Runnable() // This Thread/Runnable is for playing
                                        // the sound
{
    public void run()
    {
        try
        {
            // Check if the audio file is a .wav file
            if (sound.getName().toLowerCase().contains(".wav"))
            {

                if (format.getEncoding() != AudioFormat.Encoding.PCM_SIGNED)
                {
                    format = new AudioFormat(AudioFormat.Encoding.PCM_SIGNED, format.getSampleRate(), format.getSampleSizeInBits() * 2, format.getChannels(), format.getFrameSize() * 2, format.getFrameRate(), true);

                    stream = AudioSystem.getAudioInputStream(format, stream);
                }

                SourceDataLine.Info info = new DataLine.Info(SourceDataLine.class, stream.getFormat(), (int) (stream.getFrameLength() * format.getFrameSize()));

                SourceDataLine line = (SourceDataLine) AudioSystem.getLine(info);
                line.open(stream.getFormat());
                line.start();

                // Set Volume
                FloatControl volume_control = (FloatControl) line.getControl(FloatControl.Type.MASTER_GAIN);
                volume_control.setValue((float) (Math.log(volume / 100.0f) / Math.log(10.0f) * 20.0f));

                // Mute
                BooleanControl mute_control = (BooleanControl) line.getControl(BooleanControl.Type.MUTE);
                mute_control.setValue(muted);

                FloatControl pan_control = (FloatControl) line.getControl(FloatControl.Type.PAN);
                pan_control.setValue(pan);

                int num_read = 0;
                byte[] buf = new byte[line.getBufferSize()];

                while ((num_read = stream.read(buf, 0, buf.length)) >= 0)
                {
                    int offset = 0;

                    while (offset < num_read)
                    {
                        offset += line.write(buf, offset, num_read - offset);
                    }
                }

                line.drain();
                line.stop();

                if (looped_forever)
                {
                    new Thread(play).start();
                } else if (loops_done < loop_times)
                {
                    loops_done++;
                    new Thread(play).start();
                }
            }
        } catch (Exception ex)
        {
            ex.printStackTrace();
        }
    }
};
public int getLength()
{
    long audioFileLength = sound.length();
    int frameSize = format.getFrameSize();
    float frameRate = format.getFrameRate();
    float durationInSeconds = (audioFileLength / (frameSize * frameRate));
    return (int) durationInSeconds;
}

public void setPan(float pan)
{
    this.pan = pan;
}

public float getPan()
{
    return pan;
}

public void setLoop(boolean loop)
{
    looped_forever = loop;
}

public boolean getLoop()
{
    return looped_forever;
}

public String getName()
{
    return name;
}

public void setName(String name)
{
    this.name = name;
}
} 
```

**编辑：**我需要能够控制音量，所以如果你有其他课程，请确保它可以控制音量！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T22:09:03.340

> （重新`Clip`）..你如何控制音量？

试试[Java Sound 标签 Wiki](https://stackoverflow.com/tags/javasound/info)上的代码变体。

```
import java.net.URL;
import javax.sound.sampled.*;
import javax.swing.*;
import javax.swing.event.*;

public class VolumeControl {

    public static void main(String[] args) throws Exception {
        URL url = new URL(
            "http://pscode.org/media/leftright.wav");
        Clip clip = AudioSystem.getClip();
        // getAudioInputStream() also accepts a File or InputStream
        AudioInputStream ais = AudioSystem.
            getAudioInputStream( url );
        clip.open(ais);
        Control[] c = clip.getControls();
        FloatControl temp = null;
        for (Control control : c) {
            System.out.println(control);
            if (control.toString().toLowerCase().contains("master gain")) {
                // we found it!
                temp = (FloatControl)control;
            }
        }
        final FloatControl vol = temp;
        clip.loop(Clip.LOOP_CONTINUOUSLY);
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JComponent c = null;
                if (vol!=null) {
                    final JSlider volControl = new JSlider(
                            (int)(100*vol.getMinimum()),
                            (int)(100*vol.getMaximum()),
                            (int)(100*vol.getValue())
                            );
                    ChangeListener cl = new ChangeListener() {

                        @Override
                        public void stateChanged(ChangeEvent e) {
                            System.out.println( "Vol: " + volControl.getValue()/100f );
                            vol.setValue(volControl.getValue()/100f);
                        }
                    };
                    volControl.addChangeListener(cl);
                    c = volControl;
                } else {
                    c = new JLabel("Close to exit!");
                }
                JOptionPane.showMessageDialog(null, c);
            }
        });
    }
} 
```

# wpf - x 秒后删除图像源

> ID：14510982
> 
> 赞同：3
> 
> 时间：2013-01-24T21:18:52.083
> 
> 标签：wpf, multithreading

我有一个 WPF 应用程序，它会在单击按钮时设置图像源我想在这么多秒后清除图像源，比如 15 秒过去了。我怎样才能做到这一点？我曾尝试使用 Thread.sleep 但它会立即清除源然后将应用程序暂停 15 秒

这就是我所拥有的那种方法

```
 private void btnCapture_Click(object sender, RoutedEventArgs e)
 {  
    imgCapture.Source = //my image source;

    Thread.Sleep(15000);
    imgCapture.Source = null;

 } 
```

我也试过

```
 private void btnCapture_Click(object sender, RoutedEventArgs e)
  {  
    imgCapture.Source = //my image source;

    imgCapture.Source = null;
     Thread thread = new Thread(new ThreadStart(clearSource));
        thread.Start();

  }

    private void clearSource()
    {
        Thread.Sleep(15000);
        imgCapture.Source = null;
    } 
```

但我收到一条错误消息，说调用线程无法访问此对象，因为另一个线程拥有它。
如何在 15 秒后清除该图像源。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T21:29:40.060

使用[DispatcherTimer](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchertimer.aspx)：

```
DispatcherTimer timer = new DispatcherTimer { Interval = TimeSpan.FromSeconds(15) };

    // in constructor
    timer.Tick += OnTimerTick;

private void btnCapture_Click(object sender, RoutedEventArgs e)
{
    imgCapture.Source = //my image source;
    timer.Start();
}

private void OnTimerTick(object sender, EventArgs e)
{
    timer.Stop();
    imgCapture.Source = null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:59:20.050

@Clemens 的回答很好，但为了满足我最近的[RX](http://msdn.microsoft.com/en-us/data/gg577609.aspx)恋物癖：

```
void btnCapture_Click(object sender, RoutedEventArgs e)
{
    imgCapture.Source = //my image source;
    Observable.Interval( TimeSpan.FromSeconds( 15 ) ).TimeInterval().Subscribe( _ => imgCapture.Source = null );
} 
```

# android - ProgressDialog 在异步任务中挂起

> ID：14510990
> 
> 赞同：0
> 
> 时间：2013-01-24T21:19:23.867
> 
> 标签：android, android-asynctask, progressdialog

（我使用的是 2.3.3）下面的代码是一个异步任务，它建立一个进度对话框 (pd)，执行一个`HttpPost`in`doInBackground()`并关闭 in 中的进度对话框`onPostExecute()`。大约 75% 的时间它都能完美运行。但是，25% 的时间 pd 被显示并且永远不会消失（但是帖子完成了）。用户摆脱 pd 的唯一方法是进入设置并终止应用程序（即使“可取消设置为 true”）。

没有发生超时异常。

`onPostExecute()`没有被执行或`pd.dismiss()`不工作。

如果我消除 pd 一切总是 100% 的时间完美。

会发生什么？谢谢。

```
class postStringToURLTask extends AsyncTask<URL, Void, String> {
    String responseString = "";

    @Override
    protected void onPreExecute() {
        String myEmailAddress = getPref("emailaddress");
        pd = ProgressDialog.show(PSActivity.this, 
                                "Emailing Trip to " + myEmailAddress, "", true);
    }

    @Override
    protected String doInBackground(URL... urls) {
        try {
            URL onlyURL = urls[0];  //there is only one url
            HttpResponse response = null;
            HttpParams myParams = new BasicHttpParams();
            HttpConnectionParams.setConnectionTimeout(myParams,4000);
            HttpConnectionParams.setSoTimeout(myParams, 4000);
            HttpClient httpclient = new DefaultHttpClient(myParams);
            HttpPost myPost = new HttpPost(onlyURL.toString());
            StringEntity se = new StringEntity(payloadString);
            myPost.setEntity(se);
            myPost.setHeader("Accept", "application/json");
            myPost.setHeader("Content-type", "text/plain");
            response = httpclient.execute(myPost);
            BufferedReader rd = new BufferedReader(
                          new InputStreamReader(response.getEntity().getContent()));

            String line = "";
            while ((line = rd.readLine()) != null) {
                responseString = line;
            } 
        } catch (Exception e) {
            debugLog("postStringToURLTask got exception" + e.getMessage().toString() , 1); 
            responseString = "error  " + e.getMessage().toString();
        }        

        return responseString;
    }

    @Override
    protected void onPostExecute(String result) {
        pd.dismiss();
        debugLog("just dismissed progress dialog", 1);
        result = result.replace("[","");
        result = result.replace("\"","");
        result = result.replace("]","");

        ////log.w(getClass().getName(), "onPostExecute received: " + result);
        if (result == "") {
            mpGood.start();
        } else {
            sdTripSentProblem(); //bad news dialog
            logToServer(result);
        }  
    }
} 
```

# realbasic - 在 RealBasic 中找不到类 - RealUnzip

> ID：14510993
> 
> 赞同：2
> 
> 时间：2013-01-24T21:19:38.097
> 
> 标签：realbasic

这可能是一个非常简单的修复，但我对 RealBasic 非常陌生，我很难找到帮助。

`dim objUnZipIt as new RealUnzip`

我不断收到的错误是：

没有具有此名称的类：di objUnZipIt as new **RealUnzip**

我正在尝试用我不知道的语言调试某些东西，而原始开发人员早已不复存在。我在哪里可以找到图书馆？或者可能进行一些小改动以使其运行？

非常感谢你。

编辑：好的，在文件夹中挖掘我发现了一个 RealZip.dll 。知道如何导入这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T21:46:31.647

RealZip 插件由第三方开发商提供，其网站已离线数年。您仍然可以从[Internet 档案馆的网站副本中](http://web.archive.org/web/20061210164306/http://www.control-d.co.uk/download.htm)获取该插件。

将 .rbx 文件解压到`plugins`REALstudio 安装目录的子目录中，然后重新启动 IDE。由于不再维护此插件，因此在现代版本的 IDE 中使用它可能会出现问题（但是，包含的演示项目可以工作，只有与插件无关的弃用警告。）

[SourceForge 上](http://sourceforge.net/projects/realbasicgzip/)还有一个可用的 GZip 插件（类似地未维护）和积极维护的商业[MonkeyBread 压缩插件。](http://www.monkeybreadsoftware.net/example-compression-zip.shtml)

# emmet - 如何在 ZenCoding 中进行反向操作

> ID：14510995
> 
> 赞同：2
> 
> 时间：2013-01-24T21:19:56.430
> 
> 标签：emmet

在 Zencoding 中是否有可能以相反的方式进行？

例如，我有 HTML 代码

```
<div id="test"><span></span></div> 
```

=> 我标记了这段代码，按下一些快捷方式，结果是`div#test>span`

在 ZenCoding 中需要相反的方式（用于一些测试和对生成的现有代码的任何调整）

谢谢

（我使用带有 ZenCoding 的 Sublime Text（最新 Emmet 的新功能）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-21T20:46:40.137

它在当前版本中不可用。

有一个关于此功能请求的线程：[https ://github.com/emmetio/emmet/issues/93](https://github.com/emmetio/emmet/issues/93)

随意加入和讨论。

# php - 来自 php 的 jQuery Ajax 响应变量

> ID：14510997
> 
> 赞同：3
> 
> 时间：2013-01-24T21:20:03.063
> 
> 标签：php, javascript, jquery, ajax, variables

我有一个简单的问题，但无法找到我需要的确切解决方案。如何使用 jQuery $.ajax 调用仅回显两个 PHP 变量的 PHP 文件，并将它们保存到响应中的 javascript 变量中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-24T21:24:53.950

你会做这样的事情：

```
$.getJSON('ajax_responder.php', function(data){
        window.var1 = data.var1;
        window.var2 = data.var2;
}); 
```

然后在 ajax_responder.php

```
<?php
    header('Content-type: application/json');

    $var1 = 'foo';
    $var2 = 'bar';
    $data = array(
        'var1' => $var1,
        'var2' => $var2
    );
    echo(json_encode($data));
?> 
```

见[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

# events - Magento 自动订单状态 - 获取 order_status / state 列表

> ID：14510998
> 
> 赞同：1
> 
> 时间：2013-01-24T21:20:02.547
> 
> 标签：events, magento, model, status

我正在尝试构建一个 Magento 模块来观察某些事件并尝试根据付款方式自动进入新的自动状态/状态。
为此，我根据付款方式在后台组织了一些状态。例如：

事件：`sales_order_place_after`
自动状态：`pp_1_pending`-如果付款方式是贝宝，新下订单将自动具有此状态的第一个状态/状态。

事件：`sales_order_payment_pay`
自动状态：`pp_2_payment`- 付款方式为贝宝时支付订单后的第二个状态/状态

事件：`sales_order_invoice_save_after`
自动状态：`pp_3_complete`- 订单开票后的第三个也是最终状态/状态，结束交易。

为此，我需要收集前缀为 pp_ 的所有状态，并在检查订单上设置的状态后，按顺序进入下一个状态。这样，该模块将具有可扩展性。

但是我似乎无法获得状态集合。我在尝试：
`$statuses = Mage::getModel('sales/order_status')
->getCollection()
->addAttributeToSelect('status')
->addAttributeToSelect('label')
->addFieldToFilter('status',array('like','pp_'));`

希望任何人都可以帮助我。谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T07:53:30.547

**addAttributeToSelect()**函数用于基于 EAV 的模型。对于平面模型，使用addFieildToSelect **()**

代码应该是

```
$statuses = Mage::getModel('sales/order_status')
->getCollection()
->addFieldToSelect('status')
->addFieldToSelect('label')
->addFieldToFilter('status',array('like'=>'pp_%')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T21:27:29.553

如果看起来没问题，请查看生成的 SELECT 查询。

```
$collection->getSelect()->__toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T07:38:26.733

您必须在查询中使用通配符 (%)，因为您需要以 pp_**开头的状态：**

```
$statuses = Mage::getModel('sales/order_status')  
        ->getCollection()  
        ->addAttributeToSelect('status')  
        ->addAttributeToSelect('label')  
        ->addFieldToFilter('status',array('like','pp_%')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T23:23:19.710

如果有人想知道，要将状态和状态放在一起，这里有一个功能：
`private function _allStatusStateCollection($filter) {
$collection = Mage::getModel( 'sales/order_status' )
->getCollection()->joinStates();
if ($filter != '') { return $collection->addFieldToFilter('main_table.status',array('like'=>$filter.'%')); }
return $collection;
}`