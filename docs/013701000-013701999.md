# StackOverflow 问答 13701000-13701999

# xml - 提交到购物车后如何获取表单值？

> ID：13701008
> 
> 赞同：0
> 
> 时间：2012-12-04T10:37:42.677
> 
> 标签：xml, e-commerce, magento-1.7, magento

我正在使用magento 1.7。让我一步一步解释：- 1.单击产品列表中的任何产品。app\design\frontend\base\default\template\catalog\product\view.phtml

```
<form action="http://abc.local/prescriptionform" id="requestForm2" method="post">
<input type="hidden" name="id1" id="id1" value="<?php echo $_product->getId() ?>" />
<input type="submit" name="Order" id="order"/>               
</form> 
```

2\. 出现一个弹出窗口，其中包含产品详细信息和一个名为“订购”的提交按钮。单击“订购”按钮后，它重定向到上面的表单操作。在这里我得到产品ID，它显示一个表单和一个提交按钮。

\app\design\frontend\base\default\template\prescriptionform\index.phtml

```
$baseurl = Mage::getBaseUrl();
$product_id = $_REQUEST['id1'];
<form action="<?php echo $baseurl."checkout/cart/add?product=".$product_id; ?>" id="requestForm" method="post">

<h3 class="txt-blue"><?php echo Mage::helper('contacts')->__('Your Prescription ') ?></h3>
<ul class="form-list">
<li>
<label class="required type"><?php echo $this->__('Prescription Type') ?>&nbsp;<font color="red">*</font></label>
<div class="input-box p_form">
<select name="type" id="name-prefix" class="required-entry">
<option value="" selected>Please select...</option>
<option value="single" title="Single Vision">Single Vision</option>
<option value="bifocal" title="Bifocal">Bifocal</option>
<option value="progressive" title="Progressive">Progressive</option>
</select>
</div>
</li>
</ul>
<p><?php echo $this->__("<font color='red'>*</font> Required Fields") ?></p>

<input type="hidden" name="request_flag" id="request_flag" value="1"/>
<input type="hidden" name="productID" value="<?php echo $product_id; ?>"/>

<input type="submit" name="add" id="add"/> 
```

1.  现在使用以下方法在添加到购物车页面中获取这些值：-

app\design\frontend\base\default\template\checkout\cart.phtml

```
 $params = $this->getRequest()->getParams();
    $_REQUEST['request_flag']; 
```

但我无法在添加到购物车页面上获得该表单的价值。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:25:32.453

`checkout/cart/add`在将产品添加到购物车后，您将表单发布到`add()`它会重定向到的方法，`checkout/cart`因此`$this->getRequest()->getParams()`在购物车页面上将不可用。

请提供更多详细信息，以便我们更好地建议您如何完成此操作。

# iphone - 如何在另一个函数中使用 Alertview 的 UITextField 值？

> ID：13701010
> 
> 赞同：0
> 
> 时间：2012-12-04T10:37:47.327
> 
> 标签：iphone, xcode, uitextfield, uialertview

我的警报视图中有一个 UITextField。现在我想在另一个函数中使用这个 UITextfield 值。看看我下面的代码。

我的警报视图代码：

```
 -(void)AlertView 
{
UIAlertView *alert = [[UIAlertView alloc] init];

alert.title = @"Used Defualt Name Or you Can Save Recoring With Your Own Name";
alert.message = @"";
alert.delegate = self;
[alert addButtonWithTitle:@"Cancel"];
[alert addButtonWithTitle:@"OK"];   
myTextField = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 82.0, 260.0, 25.0)];
[myTextField setBackgroundColor:[UIColor whiteColor]];
[alert addSubview:myTextField];
[alert show];
[alert release];

 }
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {

NSLog(@"name:%@   buttonID:%d",myTextField.text,buttonIndex);
if (buttonIndex == 1) {
    btnPlay.enabled=YES;

    mySongname = myTextField.text;
     NSLog(@"song name:%@  ",mySongname);
}
else {
   btnPlay.enabled=YES;
}
} 
```

我将变量 mysongname 声明为我的类的全局变量，因为我在这里使用它，我在下面的函数中有 alertview。

```
-(IBAction)playButton:(id)sender
{ 
 // mySongname=@"my fourite songs";
  NSString *fina = [NSString stringWithFormat:@"%@",mySongname];
} 
```

现在在上面的函数 mysongname 中显示超出范围的值。但是当我删除我在上面的函数中显示的注释时，它可以正常工作。我不知道为什么它不在这里通过 UITextfield。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:31:50.153

尝试设置属性和合成为 mySongname，并使用 self.mySongname = myTextField.text 设置值；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T12:41:45.340

只需声明一个字符串对象并设置其值并将其值用于类中的警报视图

# asp.net - 使用 DataSet 设计器创建的 DataSet 中的 DataSet 数据填充 ASP.Net 下拉列表

> ID：13701013
> 
> 赞同：4
> 
> 时间：2012-12-04T10:38:00.850
> 
> 标签：asp.net, dataset, strongly-typed-dataset, populate, html-select

我们有一个 ASP.Net / VB.Net web 表单，其中包含 aspx 文件标记中的下拉列表。还有一个使用 DataSet 设计器创建的 DataSet。

我们想用 DataSet 中的数据填充下拉列表。

您能否向我展示一些使用 DataSet 数据填充下拉列表所需的示例标记和/或 VB.Net 编码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T11:02:00.580

```
<asp:DropDownList ID="MyDropDownList" runat="server" DataTextField="SomeString" DataValueField="SomeUniqueId" /> 
```

代码隐藏：

```
protected void Page_Load(object sender, EventArgs e)
{
    var myDataSet = new DataSet(); // replace with your dataset
    MyDropDownList.DataSource = myDataSet;
    MyDropDownList.DataBind();
} 
```

VB.Net：

```
Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    Dim aDataSet As DataSet
    MyDropDownList.DataSource = aDataSet
    MyDropDownList.DataBind()
End Sub 
```

您在标记中看到“DataTextField”和“DataValueField”了吗？您可以在其中放置要用作 id（数据值）并在下拉列表中显示（数据文本）的字段名称。

这是一个例子：

## 标记

```
<body>
    <form id="form1" runat="server">
        <div>
            Fruits
            <asp:DropDownList ID="DropDownListWithFruits" runat="server" DataTextField="FruitName" DataValueField="FruitId" />
        </div>
    </form>
</body> 
```

## 背后的代码

```
protected void Page_Load(object sender, EventArgs e)
{
    var myDataSet = new DataSet();
    var table1 = new DataTable();
    table1.Columns.Add("FruitName");
    table1.Columns.Add("FruitId");
    table1.Rows.Add("Apple", 1);
    table1.Rows.Add("Banana", 2);
    table1.Rows.Add("Grapefruit", 3);

    myDataSet.Tables.Add(table1);

    DropDownListWithFruits.DataSource = myDataSet;
    DropDownListWithFruits.DataBind();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T11:05:51.480

ComboboxName.DataSource =YourDataSetName

ComboboxName.DataValueField =要返回其选定值的字段的名称

例如“身份证”

ComboboxName.DataTextField =您要在下拉列表中查看的字段的名称

例如“名称”

组合框名称.DataBind()

# jquery - JQuery Mobile Popup 没有出现

> ID：13701016
> 
> 赞同：0
> 
> 时间：2012-12-04T10:38:10.373
> 
> 标签：jquery, jquery-mobile

我正在使用 JQueryMobile 1.2.0。

我想以编程方式显示弹出窗口，所以我有以下内容：

```
$('#btn').on('click',function(){
    alert('this is ok');
    $('#popupBasic').popup();

}); 
```

在 JQM 页面中：

```
<div data-role="popup" id="popupBasic">
    <p>This is a completely basic popup, no options set.<p>
</div> 
```

但是弹出窗口没有出现。有什么解决办法吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:46:32.157

在 jQueryMobile 中打开一个弹出窗口需要您

1.  调用`open`方法`$('#popupBasic').popup("open");`
2.  只需使用超链接导航到它，例如`<a href="#popupBasic" data-rel="popup" data-transition="slidedown" >Slide down the popup</a>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T13:01:08.797

这是一个工作示例：http: [//jsfiddle.net/Gajotres/YMXgv/](http://jsfiddle.net/Gajotres/YMXgv/)

```
<a href="#" data-transition="none" data-role="button" data-inline="true" data-rel="popup" id="testButton">Popup example</a>  

$('#testButton').bind('click', function(e) {
    $("#popupBasic").popup("open")
}); 
```

# java - PDFbox中的计算字符串宽度似乎只计算字符？

> ID：13701017
> 
> 赞同：11
> 
> 时间：2012-12-04T10:38:26.983
> 
> 标签：java, pdfbox

我有以下问题。我尝试计算 PDFbox 中字符串的宽度以将其置于矩形的中心。现在我的问题是，12 的宽度与 32 的宽度相同，但 1 小于 3，因此我的文本 12 不居中。我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-21T07:55:07.787

从[这个问题](https://stackoverflow.com/questions/10640152/how-can-i-create-fix-width-paragraph-with-pdfbox)：

```
PDFont font = PDType1Font.HELVETICA_BOLD; // Or whatever font you want.
int fontSize = 16; // Or whatever font size you want.
float width = font.getStringWidth(text.substring(start,i)) / 1000 * fontSize; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-06-14T14:08:50.947

在某些字体中，数字确实都具有相同的宽度。例如，在 MSWord 中尝试不同的字体。因此，12 和 32 的宽度相同的事实可能是正确的。

# python - 'CheckboxSelectMultiple' 选项 - 未对齐

> ID：13701018
> 
> 赞同：0
> 
> 时间：2012-12-04T10:38:28.810
> 
> 标签：python, widget, django-forms

我有一个多项选择字段，如下所示：

```
ft = forms.ModelMultipleChoiceField(widget=forms.CheckboxSelectMultiple) 
```

可以有任何没有。的选项。问题是那些没有以对齐的方式显示，而是随机完成并且看起来很笨拙。这弄乱了表格的整体外观。我愿意为此提供一个 django 解决方案，可能是通过覆盖 CheckboxSelectMultiple 小部件，甚至通过在 CSS 中添加一个新类。如其他网站所述，我无法更改 django/contrib/admin 中的 .aligned .. 提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T12:35:17.103

这解决了我的问题..我们可以添加一个 CSS 元素 [class or id] 如下..

```
#field-checks ul
{
width:700px;
}
#field-checks ul li{
display :block;
width:200px;
float:left;
} 
```

现在使用元素

```
"field-checks" 
```

在 html 文件中。

这里主要是

```
dipslay:block 
```

您可以根据需要在一行中设置多少个字段来设置宽度。因为我需要 3 个，所以我使用了 700 和 200，如果你只需要两个，你可以使用（比如说）800 和 400。让我知道这是否适合你，或者你有比这更好的方法 :)

# java - 在 Swing JFrame 上隐藏和显示 JFXPanel

> ID：13701019
> 
> 赞同：-1
> 
> 时间：2012-12-04T10:38:36.153
> 
> 标签：java, swing, webview, javafx-2, javafx

我想在 swing 中的 javaFx 应用程序中隐藏和显示 FXPanel 控件

我想点击一个按钮 FXPanel 控件应该被隐藏，点击其他控件应该再次可见，它被隐藏而不是再次可见。

使用以下代码。

```
public class abc extends JFrame
{
JFXPanel fxpanel;
Container cp;
public abc()
{
cp=this.getContentPane();
cp.setLayout(null);
JButton b1= new JButton("Ok");
JButton b2= new JButton("hide");
cp.add(b1);
cp.add(b2);
b1.setBounds(20,50,50,50);
b2.setBounds(70,50,50,50);
b1.addActionListener(this);
b2.addActionListener(this);
fxpanel= new JFXPanel();
cp.add(fxpanel);
fxpanel.setBounds(600,200,400,500);
}

public void actionPerformed(ActionEvent ae)
{ 
 if(ae.getActionCommand().equals("OK"))
 {
fxpanel.setVisible(true);
 }
   if(ae.getActionCommand().equals("hide"))
 {
 fxpanel.hide();
 }

 Platform.runLater(new Runnable())
{

 public void run()
 {
  init Fx(fxpanel);
  }}
 );
 }
 private static void initFX(final JFXPanel fxpanel) 
{
  Group group = ne Group();
  Scene scene= new Scene(group);
  fxpanel.setScene(scene);
  WebView webview= new WebView();
  group.getChildren().add(webview);
  webview.setMinSize(500,500);
  webview.setMaxSize(500,500);
  eng=webview.getEngine();
  File file= new File("d:/new folder/abc.html");
  try
 {
 eng.load(file.toURI().toURL().toString());
 }
catch(Exception ex)
{
}
}
public static void main(String args[])
{
 abc f1= new abc();
 f1.show();
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:07:27.800

除了一些错别字之外，您的代码还有多个问题：

1）如果您使用 ActionEvent#getActionCommand 来确定单击了哪个按钮，则必须首先在按钮上设置操作命令属性。动作命令与按钮的文本不同。

2）您正在添加具有相同坐标的两个按钮，因此不会显示一个。

3) 不要使用已弃用的 hide()- 方法来隐藏 JFXPanel，使用 setVisisble(false)

此外，一些通用的指针：

4) 不要对普通 UI 使用 null 布局。曾经。

5）阅读java命名约定。这不仅仅是我挑剔，它会帮助你更好地理解其他人的代码并帮助其他人维护你的代码。

6) 通过 调用显示 EDT 中的挥杆组件的代码`SwingUtilities#invokeLater`，就像使用`Platform`类一样。像你一样从主线程调用 swing 在大多数情况下都会起作用，但会导致难以跟踪的偶尔错误。

# java - 我是 JSON 新手，有什么方法可以验证 json-键值对

> ID：13701022
> 
> 赞同：1
> 
> 时间：2012-12-04T10:38:48.520
> 
> 标签：java, json

```
Line_Of_Business = {
        LOB1           : "LOBAppType=sadfsd",  
        LOB2           : "LOBAppType=asdf",
        LOB3           : "LOBAppType=asdf}
        LOB4           : "LOBAppType=sdf",
};

Market = {
        MKTID001       :"MarketName=US||Descr=USA",
        MKTID002       "MarketName=JP||Descr=Japan""
            LOB3           : "LOBAppType=asdf",
        LOB4           : "LOBAppType=sdf", 
```

在这个例子中市场和业务线是两个 json 对象。有什么方法可以验证 json 对象的语法。

在市场 json 对象“ **MKTID002** ”键和业务线“ **LOB3** ”键中，语法错误，市场对象未正确关闭。

有什么方法可以使用java找到错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:50:35.120

验证某些 JSON 的基本语法的明显方法是简单地尝试使用许多 JSON 解析器库之一加载/读取/解析它。（如果解析/读取/加载成功，您可以丢弃生成的数据结构）。 [json.org](http://www.json.org)列出了多种语言的许多 JSON 库……包括 Java。

如果构建和丢弃数据结构是一个问题，那么一些库提供与加载分开的 JSON 验证；例如[http://www.stringtree.org/stringtree-json.html](http://www.stringtree.org/stringtree-json.html)

如果只是想在*特别*的基础上进行此验证（即不作为某些更大应用程序的一部分），请尝试该[`jsonlint.com`](http://www.jsonlint.com/)服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:06:15.230

[使用Gson](https://code.google.com/p/google-gson/)进行示例语法检查（使用[lombok](http://projectlombok.org/)）：

```
package com.stackoverflow.so13701022;

import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.JsonSyntaxException;
import com.google.gson.annotations.SerializedName;

import lombok.Data;

public class CheckJson {
    @Data
    private static class LineOfBusiness {
        @SerializedName("LOB1")
        private String lob1;

        @SerializedName("LOB2")
        private String lob2;

        @SerializedName("LOB3")
        private String lob3;

        @SerializedName("LOB4")
        private String lob4;
    }

    @Data
    private static class Market {
        @SerializedName("MKTID001")
        private String mktid001;

        @SerializedName("MKTID002")
        private String mktid002;

        @SerializedName("LOB3")
        private String lob3;

        @SerializedName("LOB4")
        private String lob4;
    }

    private static final String ONE = "{" + 
    "        LOB1           : \"LOBAppType=sadfsd\"," + 
    "        LOB2           : \"LOBAppType=asdf\"," + 
    "        LOB3           : \"LOBAppType=asdf}" + 
    "        LOB4           : \"LOBAppType=sdf\"," + 
    "}";

    // I corrected this one on purpose
    private static final String TWO = "{" + 
    "        MKTID001       :\"MarketName=US||Descr=USA\"," + 
    "        MKTID002       :\"MarketName=JP||Descr=Japan\"," + 
    "        LOB3           : \"LOBAppType=asdf\"," +
    "        LOB4           : \"LOBAppType=sdf\"" + 
    "}";

    public static void main(String[] args)
    {
        final Gson gson = new GsonBuilder().create();
        System.out.println(tryParse(gson, ONE, LineOfBusiness.class));
        System.out.println(tryParse(gson, TWO, Market.class));
    }

    private static <T> T tryParse(Gson gson, String what, Class<T> clazz)
    {
        try {
            return gson.fromJson(what, clazz);
        } catch (final JsonSyntaxException e) {
            System.err.println(e);
        }
        return null;
    }
} 
```

输出（错误 = 标准错误，输出 = 标准输出）：

```
(Err) com.google.gson.JsonSyntaxException: com.google.gson.stream.MalformedJsonException: Unterminated object at line 1 column 159
(Out) null
(Out) CheckJson.Market(mktid001=MarketName=US||Descr=USA, mktid002=MarketName=JP||Descr=Japan, lob3=LOBAppType=asdf, lob4=LOBAppType=sdf) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:00:26.697

使用任何用于 java 的 JSON 库（org.json.JSONObject），您将获得 API 中内置的解析和验证等所有功能。

这些库将任何字符串作为参数，如果无法将字符串解析为 JSONObject，则抛出异常。

```
 JSONObject jsob = new JSONObject(StringRepresentationOfJson); 
```

# javascript - phonegap：是否可以从 Javascript 中检测到 swipeLeft 和 SwipeRight 触摸？

> ID：13701026
> 
> 赞同：9
> 
> 时间：2012-12-04T10:39:10.213
> 
> 标签：javascript, android, cordova

我问Phonegap 应用程序是否能够识别Javascript 中的swipeLeft 和SwipeRight 相关事件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T23:18:47.550

与普通移动网站相比，Phonegap 不再为您提供触摸事件。即它只是包装一个 UIWebView（在 iOS 上）或其他平台上的任何等价物。

移动浏览器中的触摸事件包括`touchstart`、`touchend`、`touchmove`等。

没有任何花哨的滑动事件、双击事件或类似移动浏览器原生实现的事件。

但是您可以通过将 javascript 与 stock `touchstart`、`touchend`events 等结合使用来模拟那些更复杂的事件。

幸运的是，您不需要自己编写这些事件，因为几乎每个移动框架都为您完成了这些。其他人提到了一些处理触摸事件的库。

我自己，我倾向于使用 jQuery Mobile`swipeleft`和`swiperight`事件，以及其他。

[http://jquerymobile.com/demos/1.2.0/docs/api/events.html](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)

如果您不想，您甚至不必使用完整的 jQuery Mobile 框架。如果需要，您可以只包含他们的触摸事件处理程序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T11:33:43.097

我们使用[quo.js](https://github.com/soyjavi/bower-quojs)。它是处理多点触控事件等的轻量级框架。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-09T07:48:22.743

使用[它](http://labs.rampinteractive.co.uk/touchSwipe/demos/Handlers_and_events.html)在 ios 和 android 中使用 phonegap。

```
 $("#test").swipe( {
    click:function(event, target) {
      log("click from callback");
    },
    swipe:function(event, direction, distance, duration, fingerCount) {
      log("swipe from callback");
    },
    swipeLeft:function(event, distance, duration, fingerCount) {
      log("swipeLeft from callback");
    },
    swipeRight:function(event, distance, duration, fingerCount) {
      log("swipeRight from callback");
    },
    swipeUp:function(event, distance, duration, fingerCount) {
      log("swipeUp from callback");
    },
    swipeDown:function(event, distance, duration, fingerCount) {
      log("swipeDown from callback");
    },
    swipeStatus:function(event, phase, direction, distance, duration, fingers) {
        log("swipeStatus from callback");
    },
    pinchIn:function(event, direction, distance, duration, fingerCount, pinchZoom) {
      log("pinchIn from callback");
    },
    pinchOut:function(event, direction, distance, duration, fingerCount, pinchZoom) {
                    log("pinchOut from callback");
    },
    pinchStatus:function(event, phase, direction, distance , duration , fingerCount, pinchZoom) {
                    log("pinchStatus from callback");
    },
                fingers:$.fn.swipe.fingers.ALL 
  }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T20:46:22.340

Zepto 为 swipeLeft 和 swipeRight 以及许多其他的触摸事件：http: [//zeptojs.com/#Touch%20events](http://zeptojs.com/#Touch%20events)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-08T06:09:11.560

优秀的 jquery 插件[TouchSwipe-Jquery-Plugin](https://github.com/mattbryson/TouchSwipe-Jquery-Plugin)用于滑动功能

# php - PHP 生成文档时在服务器上创建文档副本

> ID：13701029
> 
> 赞同：3
> 
> 时间：2012-12-04T10:39:17.967
> 
> 标签：php, mysql, file, download, copy

在我的应用程序中，用户可以根据租金项目创建收据。

我使用此代码从现有模板中创建一个 Word 文件 (.doc)。

```
 header("Content-type: application/vnd.ms-word");
        header("Content-Disposition: attachment;Filename=Rent_Receipt_". $_SESSION['custid']    .".doc");
        include ("templates/template_receipt.php"); 
```

现在用户将把它存储在他的本地计算机上，但是我怎样才能让服务器将这个相同的文档存储在服务器文件夹中，这样用户就不必手动上传它了？

提前致谢。

**编辑**
include: template_receipt.php 包含要创建的 Word 文档的 HTML 代码：

```
<?php echo "
<html xmlns:v='urn:schemas-microsoft-com:vml'
xmlns:o='urn:schemas-microsoft-com:office:office'
xmlns:w='urn:schemas-microsoft-com:office:word'
xmlns:m='http://schemas.microsoft.com/office/2004/12/omml'
xmlns='http://www.w3.org/TR/REC-html40'>

<head>
<meta http-equiv=Content-Type content='text/html; charset=windows-1252'>
<meta name=ProgId content=Word.Document>
<meta name=Generator content='Microsoft Word 14'>
<meta name=Originator content='Microsoft Word 14'>
<link rel=File-List href='Template%20Verhuurbon_files/filelist.xml'>
<link rel=Edit-Time-Data href='Template%20Verhuurbon_files/editdata.mso'>
<link rel=dataStoreItem href='Template%20Verhuurbon_files/item0001.xml'
target='Template%20Verhuurbon_files/props002.xml'>
<link rel=themeData href='Template%20Verhuurbon_files/themedata.thmx'>
<link rel=colorSchemeMapping
href='Template%20Verhuurbon_files/colorschememapping.xml'> 
```

等等。我马上调查一下`ob*_`。感谢您的快速响应。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:43:07.033

`ob_*`功能会有所帮助。
例如：

```
<?php
    // geting file content
    ob_start();
    include ("templates/template_receipt.php");
    $content = ob_get_contents();
    ob_end_clean();

    //store in local file
    file_put_contents('/file/name.txt',$content);

    // file output:
    header("Content-type: application/vnd.ms-word");
    header("Content-Disposition: attachment;Filename=Rent_Receipt_". $_SESSION['custid']    .".doc");
    echo $content;
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:42:16.163

您没有显示实际将内容发送给用户的代码，但总体思路是您应该[打开输出缓冲](http://php.net/manual/en/function.ob-start.php)并捕获生成的文档，例如：

```
ob_start();
include ("templates/template_receipt.php");
$document = ob_get_clean(); 
```

完成此操作后，您可以使用简单的方式将文档发送给用户，`echo $document`同时使用类似`file_put_contents('local_copy', $document)`.

# c# - 如何根据布尔结果显示消息框？

> ID：13701032
> 
> 赞同：1
> 
> 时间：2012-12-04T10:39:20.977
> 
> 标签：c#, boolean

我目前在我的 Quit 方法中有以下代码：

```
public void QuitApplication(FormClosingEventArgs a, bool b)
{
    bool c = Properties.App.Default.AskToExit, d = Properties.App.Default.AskToSave;
    if (!b)
    {
        if (!c && !d)
        {

        }
        else if (!c)
        {
            if (YesNoMessageBox("Save Before Quit?", "Would you like to save your settings before you Quit?") == DialogResult.Yes)
            {
                _debug("Settings Saved");

                //Properties.App.Default.Save();
                //Properties.Settings.Default.Save();
            }
        }
        else if (!d)
        {
            if (YesNoMessageBox("Really Quit?", "Are you sure you want to quit?") == DialogResult.No)
            {
                a.Cancel = true;
            }
        }
        else
        {
            if (YesNoMessageBox("Really Quit?", "Are you sure you want to quit?") == DialogResult.Yes)
            {
                if (YesNoMessageBox("Save Before Quit?", "Would you like to save your settings before you Quit?") == DialogResult.Yes)
                {
                    _debug("Settings Saved");

                    //Properties.App.Default.Save();
                    //Properties.Settings.Default.Save();
                }
            }
            else
            {
                a.Cancel = true;
            }
        }
    }
} 
```

这用于检查用户是否要退出并在需要时保存。但是，我有两个选项可以设置为在调用此方法时忽略要求保存或要求退出。我想到的比较这些的唯一方法是上面的，我相信你可以做到，所以重复次数要少得多。（保存方法已被注释掉，因为应用程序仍在开发中，设置文件尚未完成）。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:44:34.553

我不知道你的参数是做什么的`b`，请处理你的变量命名。似乎如果这是真的，它应该跳过所有问题并退出。然后就可以命名了`forceQuit`。

这应该这样做：

```
public void QuitApplication(FormClosingEventArgs closeArgs, bool forceQuit)
{
    if (forceQuit)
    {
        return;
    }

    if (Properties.App.Default.AskToExit)
    {
        if (YesNoMessageBox("Really Quit?", "Are you sure you want to quit?") != DialogResult.Yes)
        {
            // Cancel exit
            closeArgs.Cancel = true;
            return;
        }
    }

    if (Properties.App.Default.AskToSave)
    {
        if (YesNoMessageBox("Save Before Quit?", "Would you like to save your settings before you Quit?") == DialogResult.Yes)
        {
            // Save
        }
    }
} 
```

我想说第二个消息框应该是一个`Yes|No|Cancel`，其中 Cancel 取消退出，或者更好的是，根本不使用消息框。

# c# - 如何查看 scrollviewer 子元素是否可见，如果不可见则使其可见？

> ID：13701033
> 
> 赞同：1
> 
> 时间：2012-12-04T10:39:23.153
> 
> 标签：c#, wpf, visibility, scrollviewer, textblock

在滚动查看器中，我有一个包含 1000 个内联的文本块，例如

XAML

```
<Grid>
    <ScrollViewer>
        <TextBlock Name="textBlock1" TextWrapping="Wrap" />
    </ScrollViewer>        
</Grid> 
```

C＃

```
public MainWindow()
    {
        InitializeComponent();

        for (int i = 0; i < 1000; i++)
        {
            textBlock1.Inlines.Add(new Run("Inline number " + i.ToString() + ". "));
        }
    } 
```

如何查看特定的内联元素（例如数字 850）是否可见，如果不可见，如何让滚动查看器滚动以使其可见。

我对 C# 和 wpf 还很陌生。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:20:23.820

由于 Run 对象不是视觉对象，因此您不能像对某些对象那样使用 ScrollIntoView。我能够通过定位所需运行的顶部偏移量并指示滚动查看器滚动到该偏移量来完成它。

```
 <Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"></RowDefinition>
        <RowDefinition Height="*"></RowDefinition>
    </Grid.RowDefinitions>

    <Button Grid.Row="0" x:Name="findButton" Click="findButton_Click_1">Find It</Button>
    <ScrollViewer x:Name="scrollViewer1" Grid.Row="1">
        <TextBlock Name="textBlock1" TextWrapping="Wrap" />
    </ScrollViewer>
</Grid> 
```

这是代码隐藏。很难找到 Run #850...

```
 Run target;

    public MainWindow()
    {
        InitializeComponent();

        for (int i = 0; i < 1000; i++)
        {
            var run = new Run("Inline number " + i.ToString() + ". ");
            if (i==850)
                target = run;
            textBlock1.Inlines.Add(run);
        }
    }

    public void findButton_Click_1(object sender, RoutedEventArgs e)
    {
        var contentStart = target.ContentStart;
        var rect = contentStart.GetCharacterRect(LogicalDirection.Forward);
        scrollViewer1.ScrollToVerticalOffset(rect.Top);
    } 
```

# gwt - 如何检查 GWT RequestFactory 的代理是否被冻结？

> ID：13701034
> 
> 赞同：0
> 
> 时间：2012-12-04T10:39:26.253
> 
> 标签：gwt, requestfactory

这就是我现在这样做的方式：

```
try {
  itemProxy.setQuantity(20);
} catch (IllegalStateException e){
  itemProxy = context.edit(itemProxy);
  table.replaceProxy(index, itemProxy);

  itemProxy.setQuantity(20);
} 
```

除了捕获异常还有其他方法吗？我知道代理具有“冻结”属性，因为我在 Eclipse 调试器中看到它。但是我不能将代理转换为任何类或 AutoBean 接口来读取冻结属性的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:00:41.393

你可以试试：

```
boolean frozen = com.google.web.bindery.autobean.shared.AutoBeanUtils.getAutoBean(itemProxy).isFrozen(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:37:14.030

如果`edit()`它已经被编辑过（同样`RequestContext`的），那么它会返回代理，你为什么不`edit()`无条件地简单地使用它呢？

* * *

作为旁注，我不太明白您如何处于不知道您的代理是否被编辑的情况。这可能是问题的症结所在；异常应该仍然是一个例外情况（这听起来很明显，但在 GWT 和一般的 JS 中尤其如此），并且代码流不应该有“呃，好吧，我不确定我现在是什么状态在，所以让我们试试那个“路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:18:06.047

一旦你在代理上调用编辑，那么只有它是可变的，否则它会被冻结。要知道它是否冻结，您可以使用 FLorent Bayle 给出的答案

```
boolean frozen = com.google.web.bindery.autobean.shared.AutoBeanUtils.getAutoBean(itemProxy).isFrozen(); 
```

# python - 索引上的布尔索引（而不是数据框）

> ID：13701035
> 
> 赞同：1
> 
> 时间：2012-12-04T10:39:28.010
> 
> 标签：python, pandas

当我有一个`pandas.DataFrame` `df`with columns`["A", "B", "C", "D"]`时，我可以使用诸如`df[df["B"] == 2]`.

**`df[df["B"] == 2]`如果`B`是 a 中的级别名称，我该怎么做`MultiIndex`？**（例如，通过`df.groupby(["A", "B"]).mean()`或获得`df.setindex(["A", "B"])`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T00:23:33.690

我会建议：

`df.xs(2, level='B')`

或者

`df[df.index.get_level_values('B') == val]`

我想让后一个操作的语法更好一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:39:28.010

我看到了两种方法，这两种方法看起来都像是绕道而行——这让我觉得一定有更好的方法，但我忽略了。

*   转换`MultiIndex`成列：`df[df.reset_index()["B"] == 2]`
*   将我要使用的名称交换到开头，`MultiIndex`然后使用按索引查找：`df.swaplevel(0, "B").ix[2]`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:44:00.903

我认为您希望按索引级别进行分组（请参阅[GroupBy 和 MultiIndex](http://pandas.pydata.org/pandas-docs/dev/groupby.html#groupby-with-multiindex)）。
这是一个简短但不是很令人兴奋的示例：

```
In [126]: df = DataFrame([[1,2,3,4],[2,2,np.nan,6]],columns=["A", "B", "C", "D"])

In [127]: df1 = df.set_index(['A','B'])

In [128]: df1
Out[128]: 
      C  D
A B       
1 2   3  4
2 2 NaN  6

In [129]: df1.groupby(level='B', axis=0).mean()
Out[129]: 
   C  D
B      
2  3  5 
```

# javascript - 如何将信用卡号添加到另一个列表？

> ID：13701040
> 
> 赞同：0
> 
> 时间：2012-12-04T10:39:32.257
> 
> 标签：javascript, jquery, forms, jquery-mobile, form-submit

我有一个要求提供信用卡信息的可折叠表格。当有人单击提交时，我希望将卡号移动到另一个列表。我如何使用 Javascript 来做到这一点。这是我的html：

```
<div class= "addStuff">
    <div data-role="collapsible" data-inset="true"  >
       <h5> New credit card</h5>         
          <div data-role="fieldcontain">
            <input type="password" name="credit_card_number" id="credit_card_number" value="" placeholder="Credit Card Number">
            <input type="password" name="security_code" id="security_code" value="" placeholder="Security Code">
            <input type="date" name="expiration_date" id="expiration_date" value="" placeholder="Expiration Date">
            <input type="password" name="name" id="name" value="" placeholder="Name On Card">
            <input type="password" name="street_address" id="street_address" value="" placeholder="Street Address">
            <input type="text" name="city" id="city" value="" placeholder="City">
            <input type="number" name="zip_code" id="zip_code" value="" placeholder="Zip Code">
                <form action="accounts.html" method="post">
                <button type="submit" class="submit" name="submit" value="submit" data-theme="">Submit</button>
                </form>
          </div>
    </div>
</div> 
```

这是我要添加到的列表：

```
<div class="accounts">
<h2>Existing Acounts </h2>

<ul data-role="listview" >
        <div id= "Credit Cards">
    <li><a href="AccountDetails.html">BofA Enhcanced Checking 3212</a></li>
    <li><a href="AccountDetails.html">BankAmericard Platinum Plus Visa 4567</a></li>
    <li><a href="AccountDetails.html">CITI Platinum 4331</a></li>
        </div>
</ul>

<ul data-role="listview" >
        <div id= "Accounts">
    <li><a href="AccountDetails.html">Bank of America Checking</a></li>
    <li><a href="AccountDetails.html">Bank of America Savings</a></li>
        </div>
</ul> 
```

这是我的尝试：

```
$('document').ready(function() {
    $('.addStuff .submit').click(function(){
        $('#credit_card_number').addClass('.accounts' )
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:45:19.953

将提交按钮更改为按钮：

```
<button type="button" class="submit" name="submit" value="submit">Submit</button>` 
```

更新的javascript是：

```
$('document').ready(function() {
    $('.submit').click(function(){
        var creditcard = $('#credit_card_number').val();
        $("#CreditCards ul").append('<li><a href="AccountDetails.html">' + 
                creditcard + "</a></li>");

       // refresh view 
       $('#CreditCards ul').listview('refresh');

       // hide form 
       $('#ccdiv').trigger('collapse');
    }); 
 });​ 
```

这是工作示例：http: [//jsfiddle.net/donramos/aA7T8/2/](http://jsfiddle.net/donramos/aA7T8/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:46:24.970

你可以使用这样的东西：

```
$('document').ready(function() {
    $('#oldForm .submit').click(function(){
        var option = $("#oldSelect option:selected");
        $("#newSelect").append('<option value='+option.val()+'>'+option.html()+'</option>');
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:03:09.983

有你的清单，例如：

```
<ul id="creditcards">
</ul> 
```

在按钮单击时通过 jquery 将 credit_card_number 输入的值附加到列表中：

```
$('document').ready(function() {
    $('.submit').click(function(){
        $("#creditcards").append("<li>"+$("#credit_card_number").val()+"</li>");
    });
}); 
```

小提琴：

[http://jsfiddle.net/qC7BE/](http://jsfiddle.net/qC7BE/)

# jsf - 找不到远程 EJB 调用类异常

> ID：13701041
> 
> 赞同：1
> 
> 时间：2012-12-04T10:39:33.833
> 
> 标签：jsf, ejb-3.0

我正在尝试使用 EJB 远程调用，但出现错误。我有一个名为的网络应用程序`CallerApp`，它调用另一个名为`RecieverApp`.

在`CallerApp`我有一个远程界面：

```
@Remote
public interface ControllerRemote {
    public int perform(int i);
} 
```

并且调用是在这个类中执行的：

```
public class Talker {

   @EJB private ControllerRemote remote;

   //constructor and invoke setRemote() method to set remote

   private void setRemote() throws Exception{
        Properties p = new Properties();
        Context jndiContext = new InitialContext(p);
        Object ref = jndiContext.lookup("java:global/RecieverApp/Controller!bean.ControllerRemote");
        remote = (ControllerRemote) PortableRemoteObject.narrow(ref, ControllerRemote.class);
   }

 public void action(){
      remote.perform(5);
 }

} 
```

RecieverApp 部署在同一个 Glassfish 服务器上：

```
@Stateless
public class Controller implements Serializable, ControllerRemote{

   @Override
   public int perform(int i){
      //return something
   }
} 
```

RecieverApp 中的界面与 CallerApp 中的界面完全相同：

```
@Remote
public interface CallerRemote{

   public int perform(int i);

} 
```

我收到以下异常：

```
SEVERE: javax.naming.NamingException: Lookup failed for 'java:global/RecieverApp/Controller!bean.ControllerRemote'
   in SerialContext[myEnv={java.naming.factory.initial=com.sun.enterprise.naming.impl.SerialInitContextFactory,
java.naming.factory.state=com.sun.corba.ee.impl.presentation.rmi.JNDIStateFactoryImpl,
java.naming.factory.url.pkgs=com.sun.enterprise.naming}
[Root exception is javax.naming.NamingException: ejb ref resolution error for remote business interfacebean.ControllerRemote
[Root exception is java.lang.ClassNotFoundException: bean.ControllerRemote]] 
```

我在这里做错了什么？

PS：我使用的是 Glassfish 3.1，两个应用程序都部署在同一台服务器上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T12:47:17.090

有几件事情需要考虑：

*   检查 JNDI 名称*java:global/RecieverApp/Controller!bean.ControllerRemote 是否*存在，Glassfish 2.x 中有不错的 JNDI 浏览器，但他们没有把它放在 GF 3 中（它[应该](http://java.net/jira/browse/GLASSFISH-5842)在 GF 4 中），但你仍然有很好的旧命令行：`asadmin list-jndi-entries`
*   检查您的`CallerRemote`接口是否在两个应用程序中的相同包中
*   不需要同时执行注入（`@EJB`）和 JNDI 查找，如果您的类`Talker`是容器管理的（即 bean、servlet 等），那么`@EJB`注释就足够了，否则只使用查找

# asp.net-mvc - Telerik mvc 网格 Ipad 问题

> ID：13701046
> 
> 赞同：2
> 
> 时间：2012-12-04T10:40:04.240
> 
> 标签：asp.net-mvc, telerik, telerik-grid

我正在使用 MVC 3.0 应用程序。在我的项目中，我使用 Telerk mvc 网格来列出数据。我将网格编辑模式设为“InCell”。在我的网格中，有两列“事实”和“行动”。当我按“事实”列时，它变为带有文本框的编辑模式。同样在 Ipad 中，键盘会自动显示。之后，当我按“操作”列时，它变为编辑模式，但 Ipad 键盘隐藏。如果我再次按相同的“操作”列或任何其他列，则会显示 Ipad 键盘。但在 Telerik mvc 网格批量编辑的在线演示 (http://demos.telerik.com/aspnet-mvc/razor/grid/editingbatch) 中，它似乎有效。我在我的项目中使用 Telerik 版本 2012.2.607。我的网格列表代码看起来像。

```
 @(Html.Telerik().Grid<AnswerQuestionVM>()
    .Name("GridQuestions")
    .DataKeys(keys =>
    {
        keys.Add(p => p.QuestionID);
    })
    .Columns(columns =>
    {

        columns.Bound(p => p.QuestionNumber).Format("{0:0.00}").HtmlAttributes(new { style = "text-align:center;" }).Title("#").Width("5%").ReadOnly();

        columns.Bound(p => p.QuestionName).Title("Question Name").Width("43%").ReadOnly();

        columns.Bound(p => p.Facts).Width("8%");

        columns.Template(@<text></text>).ClientTemplate("<img src='" + @Url.Content("~/images/help.gif") + "' name='help' alt='help' title='<#=FactOptions#>' />");

        columns.Bound(p => p.Actions).Width("8%");

        columns.Template(@<text></text>).Width("2%").ClientTemplate("<img src='" + @Url.Content("~/images/help.gif") + "' name='help' alt='help' title='<#=ActionOptions#>' />");

        columns.Template(@<text></text>).Title("Skip").Width("3%").ClientTemplate(
        "<# if(Skip==false) {#>" +
        "<input type='checkbox' style='cursor:pointer;' class='skipClass' />" +
                 "<#} else{#>" +
        "<input type='checkbox' style='cursor:pointer;' class='skipClass' checked='checked' />" +
        "<# } #>"
        );

        columns.Bound(p => p.Note).Title("Note").Width("26%");

    })
         .Editable(editing => editing.Mode(Telerik.Web.Mvc.UI.GridEditMode.InCell))
         .KeyboardNavigation( navigation => navigation.EditOnTab(true))
         .ClientEvents(e => e.OnSave("OnSave"))
         .DataBinding(dataBinding =>
         {
            dataBinding.Ajax().Select("GetQuestion", "AnswerQuestion", new { Area = "question",  ajax = true }).Enabled(true);
         })
                                                                                              .Scrollable(scrolling => scrolling.Enabled(false))
                                                                                             .Sortable(sorting => sorting.Enabled(true))
                                                                                             .Pageable(paging => paging.Enabled(true))
                                                                                             .Filterable(filtering => filtering.Enabled(true))
                                                                                             .Groupable(grouping => grouping.Enabled(false))
                                                                                             .Footer(true)
                                                                 ) 
```

请告诉我在我的代码中缺少什么。任何帮助将不胜感激。

# jquery - 禁用第一个和最后一个元素的 keyCode

> ID：13701047
> 
> 赞同：8
> 
> 时间：2012-12-04T10:40:04.897
> 
> 标签：jquery, jquery-plugins, jquery-selectors

我制作了一个 onkeydown 函数，它水平运行 li 元素块，它运行完美，但我需要当第一个和最后一个 li 块聚焦时，左右键应该被禁用。

有人可以提出正确的方法吗？提前谢谢！！！

```
$(document).ready(function() {
    var winht = $(window).height();
    var contUl = $('.content ul').children('li').size();
    var widLi = $('.content ul li').width();
    var contUlAndLI = contUl * widLi;
    var leftIndex = $('.content ul').css('left','0');
    $('.content ul').width(contUlAndLI);
    $('#frame').height(winht);

$("body").keydown(function(e) {

  if(e.keyCode == 37) { // left
    $(".content ul").animate({
      left: "-=980"
    });
  }
  else if(e.keyCode == 39) { // right
    $(".content ul").animate({
      left: "+=980"
    });
  }

});

if( leftIndex == 0){

    $("body").keydown(function(e) {

        if(e.keyCode == 39){ // right
            //event.preventDefault();
            return false;
            }

        });
  }

}); 
```

工作参考是[jsfiddle](http://jsfiddle.net/R9cmH/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:46:48.880

我通过使用一个计数器来做到这一点，每次用户按左或右时都会检查其值。计数器只是标签`li`内元素的数量。`ul`

```
var ulCount = $('.content li').length - 1;
var i = 0; 
```

然后只有在我们在计数器的值范围内时才运行动画：

```
if(e.keyCode == 37) { // left
    if (i < ulCount) {
        i++;
        $(".content ul").animate({
          left: "-=980"
        });
    }
}
else if(e.keyCode == 39) { // right
    if (i > 0) {
        i--;
        $(".content ul").animate({
            left: "+=980"
        });
    }
} 
```

我也更新了[jsFiddle](http://jsfiddle.net/R9cmH/4/)。

# c++ - 如何为特定模块指定 gcc 标志（CXXFLAGS）？

> ID：13701053
> 
> 赞同：9
> 
> 时间：2012-12-04T10:40:40.590
> 
> 标签：c++, gcc, c++11, waf

我最近正在构建一个新的 NS3 模块。在我的代码中，我使用了一些新特性`C++11 (c++0x)`，我想`"-std=c++0x"`在`waf`配置系统中添加一个 gcc 标志（CXXFLAGS）。

我试过这个：`CXXFLAGS="-std=c++0x" waf configure`，然后构建它。但是，事实证明某些现有模块（例如 ipv4-address）与`c++11`. 因此，我想特别为我的新模块指定这个标志，这样其他模块就不会在 c++11 上编译。

我试图将它添加到*我的新模块*中的 wscript 中：

```
def configure(conf):
    conf.env.append_value('CXXFLAGS', '-std=c++0x') 
```

它作为第一次试验失败。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-22T20:44:09.187

尽管@drahnr 的回答对于香草 waf 是正确的，但它不适用于 NS-3 的构建系统，这显然是 OP 想要的。要将 CXXFLAGS 添加到 NS-3 程序，您可以将它们添加到构建对象，而不是在配置阶段。

例如：

```
def build(bld):   
    obj = bld.create_ns3_program('my_app', ['core', 'other-dependencies'])
    obj.source = 'MyApplication.cpp'
    obj.cxxflags = ['-std=c++11'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T08:05:23.110

根据[waf book 1.7.8, section 10.1.1 and 10.1.2](https://waf.io/book/#_common_declaration_for_c_c_fortran_and_d_applications)

```
 bld.shlib(source='main.c',
            target='myshlib',
            cflags       = ['-O2', '-Wall'], 
            cxxflags     = ['-O3', '-std=c++0x'],
            use          = 'myobjects')

    bld.objects(source='ip4.c',
            cflags       = ['-O2', '-Wall'], 
            cxxflags     = ['-std=somethingelse'],
            target       = 'myobjects') 
```

注意 #1 - 此代码由 wafbook 中提供的 2 个示例组成，*根本未经*测试。

注意 #2 - 您可能需要让 waf 了解生成的“myobjects”，或者它们可能不会用于构建“myshlib”，因为 waf在构建*之前*会索引所有文件。

# html - 使用jquery在页面之间传递本地存储数据

> ID：13701055
> 
> 赞同：1
> 
> 时间：2012-12-04T10:40:57.600
> 
> 标签：html, jquery-mobile, local-storage

我的 main.js 页面中有数组，我使用

//主页

```
$j.each(response.records, function(i, record) {
            localStorage['sizes']=JSON.stringify(response.totalSize);
             var names=[];
            names[0]=getDate(record.StartDateTime);
            localStorage['names']=JSON.stringify(names);

            window.location = "theme.html";
}); 
```

//下一页

```
 var size = JSON.parse(localStorage['sizes']);
   alert("Size in next page" + size);
   for(var i=0;i<size;i++)
   {
       var storedNames = [];
       storedNames=JSON.parse(localStorage['names']);
       alert("Stored Array value " + storedNames);
   } 
```

记录包含日期、时间、位置等所有数据。我想在下一页发送完整记录，但在该页面中我无法解析该对象。所以我决定只发送日期，但这里的日期计数是 4，但在另一个页面中，我只有最后一个日期存储在数组中。因此，我将响应长度存储在主页中并在下一页中获取大小，并且在该循环运行之后，但我再次得到相同的最后一个值 4 次。

请帮我。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T11:41:11.760

尝试这个：

//主页

```
var names=[];
$.each(response.records, function(i, record) {
    names[i]=getDate(record.StartDateTime);
});
localStorage['names']=JSON.stringify(names);
window.location = "theme.html"; 
```

//下一页

```
var storedNames=JSON.parse(localStorage['names']), allElements = [];
$.each(storedNames, function(i, el) {
    allElements[i] = el;
});
alert("Stored Array value " + allElements); 
```

# iphone - 使用 Targets 创建应用程序的 Lite 版本

> ID：13701056
> 
> 赞同：2
> 
> 时间：2012-12-04T10:41:07.170
> 
> 标签：iphone, objective-c, ios

我想创建一个 Lite 版本的应用程序，但是我不完全确定这样做的过程。我复制了目标。然后呢？例如，我将重复目标的名称从 AppName Copy 更改为 AppName Lite，并且还更改了新生成的 plist 的名称，但是，在产品中，.app 文件的名称仍然不正确，我无法更改它。我可以遵循某种官方程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:49:02.307

您需要从 Build Settings 更改目标的产品名称。关注这个[博客](http://www.codeworth.com/blog/mobile/ios-target-duplication/)

# html - 如何在不移动内容位置的情况下将图标放置在 a 中？

> ID：13701058
> 
> 赞同：0
> 
> 时间：2012-12-04T10:41:15.367
> 
> 标签：html, css

我有一个包含一些表格数据的表格：

![在此处输入图像描述](../Images/b15350147f6ed4a9a264009a92ecd5f0.png)

当我将鼠标悬停在该行上时，它会在名称旁边显示一个放大镜。

![在此处输入图像描述](../Images/527d63dcffe14285b65c3583a47a6c4a.png)

这种方法的问题是内容（安德森）向右移动，因此相邻的 td（名字）也被推到右侧。这很烦人，因为当悬停在行上时，一切都开始向右跳舞，然后向左跳舞。

```
<td><i id="glass" class="icon-search icon-large"></i>Anderson</td>
<td>Michael</td>

.cb_table-hover tbody tr .icon-search{
    display: none;
}    

.cb_table-hover tbody tr:hover .icon-search{
    display: inline-block;
} 
```

我试图将图标放置在左侧，但这无济于事：

```
#glass{
    position:relative;
    left: -10px;
} 
```

我总是可以只引入一个`td`for 图标来确保其在表格中的固定位置，但我想知道是否有更好的方法来做到这一点。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:45:19.387

采用

```
visibility: hidden; 
```

代替

```
display: none; 
```

这将为您的图像元素保留所需的空间并避免其他元素的跳跃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:47:27.640

用这个改变 CSS 属性：

```
.cb_table-hover tbody tr .icon-search{
    visibility: hidden;
}

.cb_table-hover tbody tr:hover .icon-search{
    visibility: visible;
} 
```

Visibility 属性隐藏元素，但不隐藏它所占据的空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:46:29.480

`bg image`在悬停时添加图像

```
td{padding: 4px 18px; border:grey 1px solid}
td:hover{background:url(http://inotesapp.com/images/search_icon.png) left no-repeat; background-size:18px} 
```

**[演示](http://jsfiddle.net/Cj9qX/1/)**

# sql - SQL Server 中的 ISNULL 与 IS NULL

> ID：13701062
> 
> 赞同：3
> 
> 时间：2012-12-04T10:41:31.523
> 
> 标签：sql, sql-server

我有与SQL Server中的`isnull()`函数 vs关键字相关的问题。`is null`

我知道在 SQL 语句的 where 子句中写入以下条件会导致性能不佳

```
isnull(@C_FirstName, '') <> '' 
```

我们可以替换为

```
 (@C_FirstName IS NOT NULL AND @C_FirstName <> '') 
```

在`where`条款中

但是在 if 条件下我会获得任何性能提升吗？

下面是带有两个选项的示例

选项1：

```
If `isnull(@C_FirstName, '') <> ''` 
```

选项#2：

```
If `(@C_FirstName IS NOT NULL AND @C_FirstName <> '')` 
```

从选项 1 和选项 2 中推荐哪个语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-29T23:26:26.683

ISNULL（或 COALESCE）在组合集合时会影响性能，例如使用连接或过滤数据时。因为您正在对要比较的属性进行操作，所以优化器将不依赖索引排序。数据库引擎不会有效地使用现有索引。转述自第 52 页 -**查询 Microsoft SQL Server 2012 - 培训工具包**

在我们的数据库系统中，我们目前正在替换视图中的类似代码，如下所示：

```
SELECT ISNULL(Salesman, '')
FROM Order 
```

对此：

```
SELECT CASE WHEN IS NULL Salesman THEN '' ELSE Salesman END
FROM Order 
```

这可能看起来有点违反直觉，因为您正在增加代码的大小，但是当广泛利用特定视图时，我们已经看到了一些适度的性能提升。

# crystal-reports - Crystal Reports XI 中的正确 ISO 周编号

> ID：13701063
> 
> 赞同：2
> 
> 时间：2012-12-04T10:41:39.910
> 
> 标签：crystal-reports, iso, crystal-reports-xi, week-number

如何在 Crystal Reports XI 中获取给定日期的 ISO-8601 周数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T10:41:39.910

Crystal Reports 支持`DatePart`-function 可以为您提供给定日期的 ISO 周数。

```
NumberVar week := DatePart("ww", date, crMonday, crFirstFourDays); 
```

但是，在 Crystal Reports XI 中，有一个 bug 会在新年期间给出错误的结果。最好的解决方案可能是创建一个自己的函数 getISOWeekNumber：

```
Function (optional DateVar d := CurrentDate)
NumberVar week := DatePart("ww", d, crMonday, crFirstFourDays);

// Correct for that CR doesn't handle the fact that the last days of a year can belong to week 1 of the next year:
if week = 53 and DatePart("ww", cDate(year(d) + 1, 1, 1), crMonday, crFirstFourDays) = 1 then
    week := 1

// A bug in CR makes DatePart return values like 9363 for days in January that belongs to the last week of the previous year.
else if week > 53 then
    week := DatePart("ww", cDate(year(d) - 1, 12, 31), crMonday, crFirstFourDays);

week; 
```

要获取特定日期的“周年”，您可以使用以下函数：

```
// Returns the year to which the ISO week of the specified date belongs.
// E.g. 2012-12-31 will return 2013, as that date belongs to week 1 of 2013.
Function (optional DateVar d := CurrentDate)

NumberVar week := getISOWeekNumber (d);

if week = 1 and month(d) = 12 then
    year(d) + 1
else if week > 10 and month(d) = 1 then
    year(d) - 1
else
    year(d); 
```

# jquery - jQuery获取第n级孩子

> ID：13701066
> 
> 赞同：2
> 
> 时间：2012-12-04T10:41:43.637
> 
> 标签：jquery, html, css, jquery-selectors

我们都知道要获得第一级子选择器，`div#block > div`
我确信没有 css/jquery 选择器来获得第 n 级子选择器。但是，如果有任何解决方法。请帮我。**我没有任何作为 id 或 class 的参考。唯一的参考是使用标签名称。**

```
<div id="block">
   <div>level 1
       <div>level 2</div>
       <div>level 2
           <div>level 3</div>
           <div>level 3</div>
       </div>
       <div>level 2
           <div>level 3
               <div>level 4</div>
           </div>
           <div>level 3</div>
       </div>
   </div>
   <div>level 1
       <div>level 2
           <div>level 3
               <div>level 4</div>
           </div>
           <div>level 3</div>
       </div>
       <div>level 2</div>
   </div>
   <div>level 1
       <div>level 2</div>
       <div>level 2
           <div>level 3</div>
           <div>level 3</div>
       </div>
       <div>level 2
           <div>level 3</div>
           <div>level 3</div>
       </div>
       <div>level 2</div>
   </div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T10:43:13.280

解决方法是不断重复`> div`，直到你得到你想要的任何级别的孩子......

```
$('div#block > div > div') // level 2
$('div#block > div > div > div') // level 3
$('div#block > div > div > div > div') // level 4 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:45:33.127

假设都是 divs ，如果你知道 n 是什么，那应该很容易吧。你可以使用

```
$('div div div').children() 
```

# c# - C# LDAP 查询有时会失败

> ID：13701070
> 
> 赞同：1
> 
> 时间：2012-12-04T10:41:49.117
> 
> 标签：c#, active-directory

我在程序中有这段代码，用于查询 Windows 域用户所属的组。

```
 public void GetGroupNames(string userName, List<string> result)
    {
        using (PrincipalContext pc = new PrincipalContext(ContextType.Domain))
        {
            UserPrincipal uPrincipal = UserPrincipal.FindByIdentity(pc, userName);
            if (uPrincipal != null)
            {
                PrincipalSearchResult<Principal> srcList = uPrincipal.GetGroups();
                foreach (Principal item in srcList)
                {
                    result.Add(item.ToString());
                }
            }
        }
    } 
```

当我刚刚实现它并正在调试它时，

```
UserPrincipal uPrincipal = UserPrincipal.FindByIdentity(pc, userName); 
```

总是为空。然后我不得不关闭视觉工作室来做其他事情。当我回来时，打开了视觉工作室，这段代码就可以工作了。几天前，组织出现网络问题，那段时间我没有关闭我的电脑。网络恢复正常后，我可以正常连接到互联网，我可以远程桌面到服务器等，这证明 Active Directory 身份验证已完成，但上面的代码未能找到给定名称的 UserPrinical，例如我自己的。然后我重新启动PC，代码工作正常。我对这件事感到很困惑。有没有人可以为此提供一个很好的解释？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:50:50.207

UserPrincipal 在跨域场景中存在一些已知错误。当它再次发生时，看看你是否可以从你的机器上解析组。当组成员所在的 SID 无法解析时，我也遇到了问题。

# android - 无法在 Android 4.2 的 appwidget 中将位图写入包裹 blob

> ID：13701074
> 
> 赞同：3
> 
> 时间：2012-12-04T10:42:03.807
> 
> 标签：android, bitmap, android-4.2-jelly-bean

我的应用程序在尝试显示位图时出现以下异常：

```
java.lang.RuntimeException: Could not write bitmap to parcel blob.
    at android.graphics.Bitmap.nativeWriteToParcel(Native Method)
    at android.graphics.Bitmap.writeToParcel(Bitmap.java:1296)
    at android.widget.RemoteViews$BitmapCache.writeBitmapsToParcel(RemoteViews.java:839)
    at android.widget.RemoteViews.writeToParcel(RemoteViews.java:2347)
    at com.android.internal.appwidget.IAppWidgetService$Stub$Proxy.updateAppWidgetIds(IAppWidgetService.java:521)
    at android.appwidget.AppWidgetManager.updateAppWidget(AppWidgetManager.java:364)
    at android.appwidget.AppWidgetManager.updateAppWidget(AppWidgetManager.java:431) 
```

您知道为什么会发生此错误吗？它仅从 4.2 开始存在。我不知道为什么以及何时发生，我只在报告中得到了这些例外。

谢谢， 塔马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T08:34:54.280

我想我已经找到了答案。如果我检查 jni/android/graphics/Bitmap.cpp 那么我可以看到：

size_t 大小 = 位图->getSize();

```
android::Parcel::WritableBlob blob;
android::status_t status = p->writeBlob(size, &blob);
if (status) {
    doThrowRE(env, "Could not write bitmap to parcel blob.");
    return false;
} 
```

似乎问题在于位图大小而不是位图本身。

如果无法分配内存，writeBlob 函数可以返回 NO_MEMORY 状态。

所以我猜如果用户设置了一个太大的位图，那么它可能会以这种方式失败。

# javascript - 在 Rails 应用程序中使用 AJAX 编写 JS 脚本的最佳实践？如何在脚本中包含 URL？

> ID：13701081
> 
> 赞同：0
> 
> 时间：2012-12-04T10:42:24.930
> 
> 标签：javascript, ruby-on-rails, ajax, ruby-on-rails-3

我想在我的 Rails 应用程序中使用一点简单的 AJAX。我遇到的主要问题是在脚本中我需要指定请求的 URL，在大多数情况下，它是某个 Rails 控制器操作的路径。在其他任何地方，我都建议不要手动明确地编写路径（即不要做丑陋的东西，比如`'/my_resources/' + resource_id`），而是使用类似的助手`my_resource_path`。

但是这种方法不适用于 javascript，因为这些帮助器在`assets/javascripts`. 我可以想出一些丑陋的方法来绕过这个问题，目前我已经实现了一个非常丑陋的解决方法，基本上是在我的视图中放置这样的东西：

```
<%= javascript_tag "onSubmitQuotePage('#{j escape_javascript(autocomplete_authors_url(''))}');"%> 
```

但我无法想象 Rails 开发人员没有想到一些更漂亮的解决方案，一些做 AJAX 的正确方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:01:52.080

我不能说我喜欢我这样做的方式，所以很高兴听到更好的方式来做这件事。

但是我要么在相关 DOM 元素的数据属性中包含路径，要么对于某些静态路由，我`<script>`在包含相关路径的布局文件中包含一个块。

```
<script>
(function() {
"use strict";
window.myapp || {};
window.myapp.new_order_path = '<%= new_order_path %>';
window.myapp.orders_path = '<%= orders_path %>';
...
}());
</script> 
```

这绝不是一个很好的解决方案，但是我在我的 JS 中需要一个路由的情况相当罕见，这样我就可以`myapp.new_order_path`在我需要的时候在我的 JS 中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-15T07:14:33.163

只是在这里添加我的两分钱：您可以使用 Rails URI 帮助程序来生成某种 URI 模板。例如，如果您定义了这条路线：

`edit_user GET /users/:id/edit(.:format) users#edit`

而你调用它就好`edit_user_path(':user_id:')`了，它会返回`/users/:user_id:/edit`。通过这种方式，您可以生成 URI 模板以由 javascript 编译。正如@Tigraine 所说，您可以将其包含在某个顶级元素的数据属性中，并从客户端使用它。

它确实出现在您需要为 AJAX 获取的资源生成 URI 的情况下：您只需提供资源 id 并让 javascript 使用简单的`string.replace(':user_id:', user_id)`.

# asp.net-mvc-3 - 尝试检索 MVC3 Internet 应用程序的数据时出现编译器错误 CS1061

> ID：13701094
> 
> 赞同：0
> 
> 时间：2012-12-04T10:43:06.910
> 
> 标签：asp.net-mvc-3, linq, entity-framework-4.1, html.textboxfor

我正在创建一个 MVC3 Internet 应用程序来从数据库中获取数据。

我收到以下错误：

```
Compiler Error Message: CS1061: 'System.Collections.Generic.IEnumerable<Project.Models.MyModel>' does not contain a definition for 'SId' and no extension method 'SId' accepting a first argument of type 'System.Collections.Generic.IEnumerable<Project.Models.MyModel>' could be found (are you missing a using directive or an assembly reference?) 
```

这是我的代码：

控制器：

```
public ActionResult RetrievedData()
        {
            MyModel mymodel=new MyModel();
            IEnumerable<MyModel> res = mymodel.RetrieveData();
            return View();
        } 
```

模型：

```
public class MyModel
    {
        public int SId { get; set; }
        public string StrName { get; set; }
        public DateTime? DateCreated { get; set; }

        Test_2Entities entity = new Test_2Entities();
public IEnumerable<MyModel> RetrieveData()
        {
            var query = (from s in entity.StudentInfo
                         where s.SId == 1
                         select new MyModel()
                         {
                             SId = s.SId,
                             StrName = s.SName,
                             DateCreated = s.DateCreated
                         });

            return query.AsEnumerable();

        } 
```

看法：

```
@model IEnumerable<DateAndTimecontrol.Models.MyModel>
    @Html.BeginForm("GetData", "Home", FormMethod.Get)
            {
            Time Picker:<input type="text" id="timepicker2" />
            @Html.TextBoxFor(m=>m.SId,"",new{id="sname"}) //Error at this line

            <br />
            <br />
            Date Picker:<input type="text" id="datepicker2" /><br />
            <input type="text" id="txtName2" /><br />
            <input type="submit" value="GettingDataFromDB"/>
            } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:45:05.160

您正在获取实体*集合*，但试图将其视为*单个*实体。

如果您只想检索单个值，您应该使用`First`,或类似`FirstOrDefault`的`Single`东西（取决于您的确切需求）。

如果你想真正检索一个集合，你也应该在你的视图中以这种方式处理它。

# haskell - 在 Haskell 中定义对布什数据类型的相等运算

> ID：13701096
> 
> 赞同：3
> 
> 时间：2012-12-04T10:43:15.597
> 
> 标签：haskell, types, nested

我定义了一个嵌套数据类型 Bush：

```
data Bush a = BEmpty | BCons a (Bush(Bush a)) 
```

现在我尝试在 Bushes 上定义一个相等的函数：

```
eqB :: Eq a => Bush a -> Bush a -> Bool
eqB BEmpty BEmpty = True
eqB BEmpty _ = False
eqB _ BEmpty = False
eqB (BCons x bbush1) (BCons y bbush2) = x == y -- && .... 
```

问题是`Bush(Bush)` 我可以定义一个函数 eqB' over的递归调用`Bush(Bush)`，但我必须处理 eq on `Bush(Bush(Bush))`，依此类推。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T12:34:04.810

`Bush`是一种“非常规”或“非统一”数据类型，这意味着在递归情况下，它不使用与给定的类型参数相同的类型参数。这些有时可能很难推理，但在这种情况下，答案比您想象的要简单：

```
data Bush a = BEmpty | BCons a (Bush (Bush a))

instance Eq a => Eq (Bush a) where
    BEmpty == BEmpty = True
    BCons x xs == BCons y ys = x == y && xs == ys
    _ == _ = False 
```

而已！`(==)`可以递归地调用自己，我们就完成了。

但是等等，我们在这里使用了一个肮脏的把戏：我们正在使用`Eq`和类型类机制，它正在为我们做艰苦的工作。

如果我们根本没有类型类，我们会怎么做？好吧，如果我们没有类型类，我们一开始就不能使用`Eq a =>`约束。相反，我们可能会传递一个显式比较函数`:: a -> a -> Bool`。因此，考虑到这一点，我们可以编写非常相似的代码：

```
eqBush :: (a -> a -> Bool) -> Bush a -> Bush a -> Bool
eqBush _ BEmpty BEmpty = True
eqBush eqA (BCons x xs) (BCons y ys) = eqA x y && eqBush (eqBush eqA) xs ys
eqBush _ _ _ = False 
```

在每个递归调用中，我们传递的不是同一个比较函数——我们传递的是一个比较函数来比较`Bush a`s 而不是`a`s！除了更明确之外，这实际上与类型类发生的事情相同。注意我们的递归调用的结构和我们的数据类型定义的结构是一样的——我们有`Bush (Bush a)`，所以我们用`eqBush (eqBush eqA)`.

这种类型的任何其他递归定义都会发生同样的事情。这是一个有用的（这只是`fmap`为了`Bush`，真的）：

```
mapBush :: (a -> b) -> Bush a -> Bush b
mapBush _ BEmpty = BEmpty
mapBush f (BCons x xs) = BCons (f x) (mapBush (mapBush f) xs) 
```

有了这个，编写这样的函数`sumBush`很容易：

```
sumBush :: Bush Int -> Int
sumBush BEmpty = 0
sumBush (BCons x xs) = x + sumBush (mapBush sumBush xs) 
```

这种递归称为[多态递归](https://en.wikipedia.org/wiki/Polymorphic_recursion)，因为多态函数以与调用它的类型不同的类型调用自身。多态递归可能很难弄清楚——事实上，类型推断对于它是不可判定的（通常），所以你必须编写自己的类型签名（通常）——但通过一些练习，它看起来可能很多更自然。试着写一些其他`Bush`的函数来感受一下。

以下是一些其他非常规数据类型，可以尝试为其编写一些代码：

*   `data Tree a = Leaf a | Branch (Tree (a,a))`——完美的二叉树。

*   `data`[`FunList`](http://twanvl.nl/blog/haskell/non-regular1)`a b = Done b | More a (FunList a (a -> b))`-- 一个`a`s 列表以及一个函数，该函数恰好接受那么多`a`s 并返回 a `b`（这与[Traversals](http://hackage.haskell.org/packages/archive/lens/latest/doc/html/Control-Lens-Traversal.html)相关）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:43:56.257

例如 Bush Int 中所有 Int 出现的总和

```
sum:: Bush Int -> Int
sum BEmpty = 0
sum (BCons i BEmpty) = i
sum (BCons i bbush) = i + sum' bbush 
```

我可以编写一个函数 sum' 来处理 bbush：

```
sum':: Bush (Bush Int) -> Int
sum' BEmpty = 0
sum' (BCons bush bbbush) = sum bush -- + sum'' bbbush 
```

没有结局……

# haskell - 模式匹配的名称“xs”从何而来？

> ID：13701099
> 
> 赞同：19
> 
> 时间：2012-12-04T10:43:21.580
> 
> 标签：haskell, functional-programming, pattern-matching

> **可能重复：**
> [变量名 x 和 xs 的历史是什么？](https://stackoverflow.com/questions/6267735/what-is-the-history-of-the-variable-names-x-and-xs)

模式匹配中的规范名称“xs”从何而来？

例如在

```
reverse' []     = []
reverse' [x]    = [x]
reverse' (x:xs) = reverse' xs ++ [x] 
```

它应该是“x”的复数吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-12-04T10:47:13.893

这就是我一直读它的方式，你有单数和复数，所以`x:xs`或`y:ys`等等。

它本身实际上没有任何意义，它只是一个约定。

[IIRC 在Learn You a Haskell](http://learnyouahaskell.com/)中也提到了它。

* * *

**已编辑**

我的错误——它实际上是在关于类型和函数的章节中的[Real World Haskell中。](http://book.realworldhaskell.org/read/types-and-functions.html)

![在此处输入图像描述](../Images/890cb096ee84c6aca20939d4208253d4.png)

# delphi - 在Delphi中将月份名称转换为数字？

> ID：13701100
> 
> 赞同：1
> 
> 时间：2012-12-04T10:43:26.607
> 
> 标签：delphi, date-parsing

是否有一些内置的 Delphi (XE2)/Windows 方法可以将月份名称转换为数字 1-12；而不是循环通过`(TFormatSettings.)LongMonthNames[]`自己？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T11:07:24.947

您可以使用`IndexStr`from ，如果找不到字符串则`StrUtils`返回，例如`-1`

```
Caption := IntToStr(
  IndexStr(FormatSettings.LongMonthNames[7], FormatSettings.LongMonthNames) + 1); 
```

编辑：
为了避免转换和区分大小写的问题，您可以使用`IndexText`如下所示：

```
Function GetMonthNumber(Const Month:String):Integer; overload;
begin
   Result := IndexText(Month,FormatSettings.LongMonthNames)+1
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T10:25:54.530

我找不到方法，但我写了一个。;-)

```
function GetMonthNumberofName(AMonth: String): Integer;
var
  intLoop: Integer;
begin
  Result:= -1;
  if (not AMonth.IsEmpty) then
  begin
    for intLoop := Low(System.SysUtils.FormatSettings.LongMonthNames) to High(System.SysUtils.FormatSettings.LongMonthNames) do
    begin
      //if System.SysUtils.FormatSettings.LongMonthNames[intLoop]=AMonth then  --> see comment about Case insensitive
      if SameText(System.SysUtils.FormatSettings.LongMonthNames[intLoop], AMonth) then
      begin
        Result:= Intloop;
        Exit
      end;
    end;
  end;
end; 
```

好的，我将此功能更改为其他格式设置。

```
function GetMonthNumberofName(AMonth: String): Integer; overload;
function GetMonthNumberofName(AMonth: String; AFormatSettings: TFormatSettings): Integer; overload;

function GetMonthNumberofName(AMonth: String): Integer;
begin
  Result:= GetMonthNumberofName(AMonth, System.SysUtils.FormatSettings);
end;

function GetMonthNumberofName(AMonth: String; AFormatSettings: TFormatSettings): Integer;
var
  intLoop: Integer;
begin
  Result:= -1;
  if (not AMonth.IsEmpty) then
  begin
    for intLoop := Low(AFormatSettings.LongMonthNames) to High(AFormatSettings.LongMonthNames) do
    begin
      if SameText(AFormatSettings.LongMonthNames[intLoop], AMonth) then
      begin
        Result:= Intloop;
        Exit
      end;
    end;
  end;
end; 
```

使用系统格式设置调用函数

```
GetMonthNumberofName('may'); 
```

或使用 FormatSetting

```
procedure TForm1.Button4Click(Sender: TObject);
var
  iMonth: Integer;
  oSettings:TFormatSettings;
begin
  // Ned
  // oSettings:= TFormatSettings.Create(2067);
  // Fr
  // oSettings:= TFormatSettings.Create(1036);
  // Eng
  oSettings:= TFormatSettings.Create(2057);
  iMonth:= GetMonthNumberofName(self.Edit1.Text, oSettings);
  showmessage(IntToStr(iMonth));
end; 
```

# c# - 生成带有随机单词的字符串

> ID：13701102
> 
> 赞同：-2
> 
> 时间：2012-12-04T10:43:27.203
> 
> 标签：c#, random, permutation

我需要编写一个函数来随机化我的字符串中的一些单词。例如：

```
[Hello|Hi] guys. This is my [code|string] 
```

该函数应返回：

`Hello guys. This is my code`

或者

`Hi guys. This is my string`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T10:46:54.767

你可以像这样得到一个随机数生成器：

`var rand = new Random();`

至于解析您的字符串并获取所有选项，我建议您查看`System.Text.RegularExpressions`

到目前为止，其他答案刚刚展示了如果您已经为不同的占位符提供了一个或两个选项，您如何获得一个随机字符串。这些很好，但是写出来很无聊和乏味。最好编写一个解析器，它可以像 OP 给出的那样采用随机字符串“模板”，并使用它来生成随机字符串。

这是我整理的一个快速的：

```
using System;
using System.Text.RegularExpressions;

namespace StackOverLoadTest {
static class Program {
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main() {
        var s = new RandomString("[Hey|Hi] guys. [I|You|We|He|She] should [walk] to the [park|field|farm] sometime [today|tomorrow|next week].");
        for (int i = 0; i < 10; i++)
            Console.WriteLine(s);
    }
}

public class RandomString {
    private Random _rnd = new Random();
    private static Regex _rex = new Regex(@"\[ ( \|?  (?<option>[^]|]+) )+ \]", System.Text.RegularExpressions.RegexOptions.IgnorePatternWhitespace | System.Text.RegularExpressions.RegexOptions.ExplicitCapture);
    string _template;
    public RandomString(string template) {
        _template = template;
    }
    public override string ToString() {
        return _rex.Replace(_template, GetRandomOption);
    }
    public string GetRandomOption(Match m) {
        var options = m.Groups["option"].Captures;
        int choice = _rnd.Next(0, options.Count);
        return options[choice].Value;
    }
}
} 
```

如您所见，您使用模板创建一个新的 RandomString 对象。然后只要你想调用 ToString() 函数的次数，每次你得到一个新的随机排列的选项。

您可以使用任意数量的占位符和任意数量的选项（0 除外）。我在这个例子中使用的字符串模板是：

`"**[Hey|Hi]** guys. **[I|You|We|He|She]** should **[walk]** to the **[park|field|farm]** sometime **[today|tomorrow|next week]**."`

运行上面的代码，我得到了以下结果：

 `**Hey** guys. **I** should **walk** to the **park** sometime **today**.
**Hi** guys. **We** should **walk** to the **farm** sometime **today**.
**Hi** guys. **He** should **walk** to the **field** sometime **next week**.
**Hey** guys. **You** should **walk** to the **park** sometime **next week**.
**Hi** guys. **She** should **walk** to the **farm** sometime **next week**.
**Hey** guys. **We** should **walk** to the **field** sometime **tomorrow**.
**Hi** guys. **I** should **walk** to the **farm** sometime **today**.
**Hey** guys. **He** should **walk** to the **field** sometime **tomorrow**.
**Hi** guys. **You** should **walk** to the **park** sometime **next week**.
**Hi** guys. **I** should **walk** to the **farm** sometime **today**.` 

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:49:06.793

试试这个 ：

```
private string randArr(String[] _arr)
{
    Random _rnd = new Random(DateTime.Now.GetHashCode());
    return _arr[_rnd.Next(_arr.length)];
} 
```

只需调用它为您的数组提供字符串值。像这样 ：

```
String.Format("{0} guys. This is my {1}", randArr(["Hello","Hi"]), randArr(["code","string"])); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:56:13.610

我使用了这种方法：

```
Random rand = new Random();
int val = rand.Next(0, 100);
Console.WriteLine(
    "{0} guys. This is my {1}",

    val >= 50 ? "Hi" : "Hello",
    val < 50 ? "code" : "string"); 
```

我给了 50%-50% 的机会来写什么词，所以这就是`>= 50`&`< 50`你看到的。**你可以改变它。**

如果您想将每个单词随机化为它自己的而不是完整的句子（上面的代码只为您提供 2 个变体），只需弄乱代码或评论我来修改它。

笔记：

实际上不是50%-50%。我不想混淆，但如果你想要这样，第一个条件应该是`>= 49`*

条件 ( `condition ? statement : statement`) 的语法称为*[三元 if 运算符](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.80%29.aspx)*。

# jpa - 字符串 ID 生成器

> ID：13701105
> 
> 赞同：12
> 
> 时间：2012-12-04T10:43:44.133
> 
> 标签：jpa

在 jpa 中实现字符串 id 的最简单方法是什么？到目前为止我所拥有的是

```
@Id
@GeneratedValue
private int id; 
```

我想要的是

```
@Id
@GeneratedValue
private String id; 
```

但如果我像这样使用它，我会得到“这个 id 生成器生成长、整数、短”。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-04T10:47:33.270

您可以像这样从 Java 创建 UUID：

```
UUID.randomUUID().toString(); 
```

或者，如果您的 JPA 支持它，就像 Hibernate 一样，您可以使用：

```
@Id @GeneratedValue(generator="system-uuid")
@GenericGenerator(name="system-uuid", strategy = "uuid")
private String myId; 
```

[查看这篇博文了解详情。](http://blog.xebia.com/2009/06/03/jpa-implementation-patterns-using-uuids-as-primary-keys/)

如果您在谷歌上搜索“JPA UUID”，则有很多选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T15:02:35.690

如果您使用的是 EclipseLink，则可以使用 @UuidGenerator，

[http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_uuidgenerator.htm#CFAFIIFC](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_uuidgenerator.htm#CFAFIIFC)

如果需要，您还应该能够将序列整数转换为字符串。

# xml - Sharepoint - 以 XML 格式获取视图并设置行限制

> ID：13701106
> 
> 赞同：1
> 
> 时间：2012-12-04T10:43:45.993
> 
> 标签：xml, sharepoint, view, get

全部

谁能告诉我如何在以下函数中禁用“行限制”： <>/_vti_bin/owssvr.dll?Cmd=Display&List={GUID}&VIEW={GUID}&XMLDATA=TRUE

目前，每次创建视图时，它的默认行限制设置为 100，因此当我使用此函数时，它只返回前 100 行。

所以我总是要更改视图的设置，并更新默认的行限制。

是否有一个参数我可以但在此视图中禁用此行限制并获取所有行？或者覆盖此 URL 中的行数限制？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:19:20.173

添加参数 '&RowLimit=0' 也可以，将字段限制为默认视图。Query=* 获取架构中的所有行和所有字段。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T21:07:16.190

http://WebApp/[站点]/_vti_bin/owssvr.dll?Cmd=Display&List={ListGuid}&Query=*&XMLDATA=TRUE

# python - Mod_wsgi + Python 2.7.3 分段错误（11）

> ID：13701108
> 
> 赞同：5
> 
> 时间：2012-12-04T10:44:02.913
> 
> 标签：python, apache, mod-wsgi

我在 RHEL5 上编译了 Python 2.7.3 + mod_wsgi 3.4。

运行我的脚本，我发现有时它们可​​以工作，但大多数时候我看到的是空白页。我检查了错误日志，我看到了这个：

```
[Tue Dec 04 11:37:40 2012] [notice] child pid 21822 exit signal Segmentation fault (11) 
```

我在 Apache CoreDump 文件上使用了 gdb 来跟踪错误，我可以看到：

```
Loaded symbols for /usr/local/lib/python2.7/lib-dynload/_ctypes.so
Core was generated by `/usr/sbin/httpd'.
Program terminated with signal 11, Segmentation fault.
#0  0x00002ab6a98b3c32 in CThunkObject_dealloc (_self=<value optimized out>) at /backup/moving/python/Python-2.7.3/Modules/_ctypes/callbacks.c:24
24      Py_XDECREF(self->restype); 
```

我的 mod_wsgi.so 文件链接到这些库：

```
 ldd /usr/lib64/httpd/modules/mod_wsgi.so
    libpython2.7.so.1.0 => /usr/local/lib/libpython2.7.so.1.0 (0x00002b7051fb8000)
    libpthread.so.0 => /lib64/libpthread.so.0 (0x00002b7052385000)
    libdl.so.2 => /lib64/libdl.so.2 (0x00002b70525a0000)
    libutil.so.1 => /lib64/libutil.so.1 (0x00002b70527a5000)
    libm.so.6 => /lib64/libm.so.6 (0x00002b70529a8000)
    libc.so.6 => /lib64/libc.so.6 (0x00002b7052c2b000)
    /lib64/ld-linux-x86-64.so.2 (0x0000003191400000) 
```

此错误不会随时发生，而是随机发生。您对如何修复它有任何线索吗？

# html - CSS：删除较大文本上的行高（前导）

> ID：13701110
> 
> 赞同：8
> 
> 时间：2012-12-04T10:44:10.193
> 
> 标签：html, css

如何从强制跨度中删除前导，以便`<<`上下没有额外的空间。

字段行根据文本大小的默认值占据一定的高度`line-height`，但是由于字体大小较大，必填字段较高。我怎样才能去掉上面和下面的额外空白`<<`？

```
.fieldRow { /* for illustration only */
        border: solid 1px #f00;  
}
.mandatory {
        color: #f00;
	border: solid 1px #f00; /* for illustration only */
	font-size: 24px;
	line-height: 0;
	vertical-align: middle;
}
```

```
<div class="fieldRow">

	<label for="select">Some field</label>

	<select name="select">
		<option>Any</option>
		<option value="1">1</option>
		<option value="2">2</option>
		<option value="3">3</option>
	</select>	

	<span class="mandatory">&laquo;</span>

</div>
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T10:52:34.763

删除后`vertical-align: middle`对我来说看起来不错。

```
.mandatory {
  color: #f00;
  font-size: 24px;
  line-height: 0;
} 
```

[演示](http://codepen.io/joe/pen/IdeAq)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T10:53:36.270

删除垂直对齐

```
.mandatory {
    color: #f00;
    border: solid 1px #f00; /* for illustration only */
    font-size: 24px;
    line-height: 0 !important;
}​ 
```

**[演示](http://jsfiddle.net/Cj9qX/3/)**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-16T00:16:28.333

我知道这很旧，但我遇到了类似的问题并想出了一个不同的解决方案。

这有点hacky，但你可以在文本周围放置一个容器，然后使用溢出隐藏并给它一个高度。较大字体下的多余空间将被包含的 div 截断。你不是摆脱它，而是你隐藏它。这对我有用，但可能不适用于您的情况。

```
.container {
  overflow: hidden;
  height: 30px; /* Or whatever height is necessary to show the text */
}
```

```
<div class="container">
  <span class="mandatory">&laquo;</span>
</div>
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T10:54:53.883

您添加了各种样式，其中添加了空格，即`font-size`强制跨度与其容器不同。

您添加的边框也使事情看起来比实际情况更糟。

看到这个[小提琴](http://jsfiddle.net/6k3tz/)，当你删除上面的时候它看起来好多了。

修改后的 CSS：

```
.fieldRow {
  border: solid 1px #f00;
  font-size: 24px;
}

.mandatory {
  color: #f00;
  border: solid 1px #f00;
  border-top: 0;
  border-bottom: 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-04-13T20:30:18.923

```
line-height: unset; 
```

或行高：未设置！重要；

# javascript - 如何为组合框赋值

> ID：13701111
> 
> 赞同：2
> 
> 时间：2012-12-04T10:44:12.283
> 
> 标签：javascript, jquery, combobox

我会发布一张图片来更好地解释它。

![在此处输入图像描述](../Images/332c40a320db34b08528cefa9682d717.png)

因此，假设我进行了第一次搜索，然后进行了第二次或第三次、第四次搜索，我想回到我的旧搜索。

我已经有一些代码可以保存旧搜索（工作正常）。我唯一的问题是如何将值分配给组合框以使组合框返回到旧状态。

我怎么能开始这样做？

编辑：

```
$('#combos').on('change', '.combo', function() {
        var selectedValue = $(this).val();

        if (selectedValue !== '' && $(this).find('option').size() > 2) {
            var newComboBox = $(this).clone();
            var thisComboBoxIndex = parseInt($(this).attr('data-index'), 10);
            var newComboBoxIndex = thisComboBoxIndex + 1;
            $('.parentCombo' + thisComboBoxIndex).remove();
            newComboBox.attr('data-index', newComboBoxIndex);
            newComboBox.attr('id', 'combo' + newComboBoxIndex);
            newComboBox.addClass('parentCombo' + thisComboBoxIndex);
            newComboBox.find('option[value="' + selectedValue + '"]').remove();
            $('#combos').append(newComboBox);
        }
        });

var check_combo_box_values = $('#combos .combo').map(function () 
                {
                    return $('option:selected', this).map(function() {
                    return parseInt(this.value);
                    }).get();
                }).get(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:00:09.287

我做了一个小提琴如何向组合框添加选项

[http://jsfiddle.net/hRQqp/2/](http://jsfiddle.net/hRQqp/2/)

既然您说保存旧搜索没有问题，您应该能够将这些部分放在一起

```
var dropdown = document.getElementById('dropdown');
var list = [
    "first",
    "second",
    "third"
];

// remove old options
while (dropdown.length> 0) {
    dropdown.remove(0);
} 

// add new ones
for (var i=0;i<list.length; i++) {
    var option = document.createElement("option");
    option.textContent = list[i];
    option.value = i;
    dropdown.appendChild(option);
}​ 
```

# jquery - 星空动画两点间的角度路径

> ID：13701119
> 
> 赞同：2
> 
> 时间：2012-12-04T10:44:40.217
> 
> 标签：jquery, math, animation

这个问题将是我的死亡。我正在尝试使用 jquery 从头开始​​制作星空类型的动画。我的 jfiddle 的链接是[http://jsfiddle.net/wompdesigns/jNBAk/4/](http://jsfiddle.net/wompdesigns/jNBAk/4/)。这给了我 12 个随机放置在屏幕上的小 div 就好了。在代码方面做动画我真的没有问题。我遇到的问题是从中心点 div（绿色）找到放置 div（红色）的目标点。换句话说，我想从放置的 div（红色）以与中心（绿色）相对应的角度到达父 div 的末尾。我希望这个问题是有道理的，并感谢任何试图解决这个问题的人。jquery代码如下：

```
$('.cs').each(function(index) {
    var posx = Math.ceil(Math.random() * (60-40+1)) + 40;
    var posy = Math.ceil(Math.random() * (60-40+1)) + 40;
    $(this).css({left: posx+"%", top: posy+"%", });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:03:48.267

*想到的最快的解决方案（可能没有优化或最好）。*

我会将您的任务分成几个子任务。例如：

```
A. define angle.

B. move from O to O'. 
```

所以要定义角度，使绿色正方形成为坐标（0,0）的开始。

对于每个红点，您应该执行以下操作：

```
1\. Define (x,y).
2\. Get angle between (x,y) and (x,0). This would be the angle you need. 
```

要从 O 移动到 O'，您将需要（嗯，它不是所说的：P）：

```
1\. Define angle tangens.**(one time)**
2\. For given x calculate y by evaluating linear equation **y=kx** . 
```

此外，应该检查红点是否在父 div 的范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:18:02.507

也许您也应该将其发布在数学或几何 stach 交换站点上……无论如何，找到角度应该是简单的数学。我的方法是：

```
for each red dot
  Get the center of the red dot:
  X = $(this).position().left + $(this).width() / 2
  Y = $(this).position().top + $(this).heigh() / 2

Likewise, get the green dot center as well 
  Cx, Cy = something (it is not 0,0)

for each red dot,
  the angle is the arctan((Y-Cy)/(X-Cx))
  to make things simple:
    for every 1 (or -1 if X<Cx) pixel step horizontally
    make (Y-Cy)/(X-Cx) pixel steps vertically 
```

对不起，丑陋的伪代码，你应该能够快速将其转换为 JS。您甚至不需要计算反正切值，只要您在适当的方向上踏入正确的数量即可。

让我知道它是否有效...

结果是这样的：http: [//jsfiddle.net/jNBAk/7/](http://jsfiddle.net/jNBAk/7/)

让它工作起来很有趣！:)

# javascript - Flash Player 在超出视口时停止动画

> ID：13701121
> 
> 赞同：1
> 
> 时间：2012-12-04T10:44:44.973
> 
> 标签：javascript, actionscript-3, flash

我在一个网站上有几部 Flash 电影。它们都循环播放一个持续约 15 秒的动画（但这不是一成不变的）。它们都同时开始播放并且同步。

但是，当我调整浏览器窗口大小或滚动页面时，如果 Flash 播放器实例不在视口中，它将停止播放。当它返回到视口时，它会恢复并随后与其他 Flash 播放器实例不同步。

我的印象是这是一个 Flash 播放器优化。是否有可能通过 JS / AS3 禁用这种行为？它似乎发生在 Windows 上的 Firefox 和 Chrome 中。

**更新**

只是为了澄清。我有使用本地连接和 ExternalInterface 同步广告的方法。我正在寻找的是一种**禁用**FlashPlayer 的“优化”的方法，这会导致帧速率大大降低。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:16:02.370

您不能禁用此功能。当 Flash 应用程序不可见时，它可以降低内存和 CPU 使用率。

不过，您*可以*使用的是称为 Throttle API 的东西。这是一个专用 API，旨在让 Flash 应用程序的创建者能够在他们的应用程序将要减速/节流*时得到准确的通知。*

这是一个例子。

```
addEventListener(ThrottleEvent.THROTTLE, onThrottleEventHandler);

function onThrottleEventHandler(e:ThrottleEvent):void
{
    if(e.state == ThrottleType.THROTTLE)
    {
        /**
         * the player is about to be slowed down to a frame rate
         * set in e.targetFrameRate
         */
    }
    else if(e.state == ThrottleType.PAUSE)
    {
        /**
         * the player is going to be paused completely, AKA 0 fps
         */
    }
    else if(e.state == ThrottleType.RESUME)
    {
        /**
         * the player is now back to normal as it has resumed
         * from the paused or throttled state
         */
    }
} 
```

现在您可以找出最适合您的方法，但我的建议是存储通过以下方式限制或暂停时经过的当前时间：

```
currentTime = getTimer(); 
```

然后使用以下命令计算您的应用程序恢复后经过了多长时间：

```
passedTime = getTimer() - currentTime; 
```

然后用这些信息做你喜欢的事情。

希望这对您有所帮助，既然您熟悉了 Throttle API，应该可以为您提供更大程度的控制。有关它的更多信息，请在此处的文档中查看：[`ThrottleEvent`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/events/ThrottleEvent.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T22:45:02.367

如果每个 SWF 同时进行非常重要，我会通过 JavaScript 控制它。

假设每个 SWF 文件都是一个简单的 MovieClip，我会这样做：

将每个 FLA 文件的 Document Class 设置为：

```
package {
    import flash.display.MovieClip;
    import flash.external.ExternalInterface;

    public class ExternalInterfaceControlledMC extends MovieClip {

        public function ExternalInterfaceControlledMC() {
            this.stop();
            if (ExternalInterface.available) {
                try {
                    ExternalInterface.addCallback("setFrame", jsSetFrame);
                } catch (error:Error) {
                    trace("An Error occurred:", error.message);
                }
            } else {
                trace("ExternalInterface is not available");
            }
        }

        private function jsSetFrame(value:String):void {
            var frameNumber = int(value) % this.totalFrames;
            this.gotoAndStop(frameNumber);
        }
    }
} 
```

在 JavaScript 中，您可以将每个 SWF 实例的引用添加到数组中，然后使用计时器告诉每个 SWF 前进到帧号。

```
var swfElements; //Array
var currFrame = 1;

function onPageLoad() {
    //Init timer
    setInterval("progressFrame", 1000 / 30); //30 fps
}

function progressFrame() {
    for (var i = 0; i < swfElements.length; i++) {
        swfElements[i].setFrame(currFrame);
    }
    currFrame++;
} 
```

请注意，此代码没有经过任何测试，仅用于说明我的思路。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:28:00.690

我相信这种行为是正常的，它是一种从未修复过的闪存错误。

我相信 inha 可能有 ua 解决方案，但不是在 enter_frame 事件中。那简直太残忍了。

我要做的是：

创建一个计时器事件.. 每 X 秒.. 所以它会在我的 checkFunction() 中调用一个 checkFunction。我会检查我的所有电影剪辑是否都已同步。如果我发现 1 不是 .. 我会放一个简单的 gotoAndPlay(xFrame);

```
 var aMovieClips:Array; //get all ur movieclips into this array.

    var timeToCheck = 1000; //time to check for a unsincronized movieclip
    var time:Timer=new Timer(timeToCheck,0);//do inifinite call each 1000 seconds
    time.start();
    time.addEventListener(TimerEvent.TIMER, checkFunction);

    public function checkFunction(e:TimerEvent):void
    {
    var aCurrentFrames:Array;
    for (var n:int = 0;n<aMovieClips.length();n++)
        aCurrentFrames.push(aMovieClips[n].currentFrame);
    //so now u have all current frames of all movie clips.. so u can add a
    //gotoAndPlay(x); to any unsyncronized movieclip  
    } 
```

# jquery - 重复功能

> ID：13701122
> 
> 赞同：0
> 
> 时间：2012-12-04T10:44:46.107
> 
> 标签：jquery

我正在学习 J 查询并构建一个小项目来帮助自学。

即使您一切正常，我的代码似乎也很长，无法完成看似简单的任务。我似乎重复了很多功能，例如：

```
$("#england").click(function () {

    $('#englandTxt').hide();
    $('#northernIrelandTxt').hide();
    $('#walesTxt').hide();
    $('#scotlandTxt').hide();
    $('#irelandTxt').hide();
    $('#onLoad').hide();
    $("#englandTxt").fadeIn("slow");
     }); 
```

[http://jsfiddle.net/fy4NP/](http://jsfiddle.net/fy4NP/)

我将如何有效地整理这个？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T10:50:13.003

您的代码将受益于使用类来识别元素组，而不必单独访问它们。尽管有一些巧妙的解决方法，但我建议使用类在单个操作中针对类似项目。

```
$('.link').click(function(){
    $('.txt').hide();
    $('#' + $(this).attr('id') + 'Txt').fadeIn();
});​ 
```

[演示](http://jsfiddle.net/cTgAy/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T10:47:05.690

为它们添加一个类，例如`country`，这样您就可以将代码更改为：

```
$("#england").click(function () {
    $('.country:not(#englandTxt)').hide();
    $("#englandTxt").fadeIn("slow");
}); 
```

`:not()`使用了选择器，这样如果英格兰被点击两次，它就不会被点击`fadeIn`两次。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T10:46:14.737

使用通用选择器：

```
//hide all divs
$('div').hide(); 
```

最好给他们一个类，如`country`，在这种情况下，您将使用：

```
//hide all divs
$('.country').hide(); 
```

# css - ActionView::Template::Error（变量@fontAwesomeEotPath_iefix 未定义）

> ID：13701132
> 
> 赞同：6
> 
> 时间：2012-12-04T10:45:26.813
> 
> 标签：css, ruby-on-rails, twitter-bootstrap, less, twitter-bootstrap-rails

尝试加载任何页面时出现错误：

```
ActionView::Template::Error (variable @fontAwesomeEotPath_iefix is undefined)
(in /app/assets/stylesheets/bootstrap_and_overrides.css.less)):
    2: <html>
    3: <head>
    4:   <title>Program</title>
    5:   <%= stylesheet_link_tag    "application", :media => "all" %>
    6:   <%= javascript_include_tag "application" %>
    7:   <%= csrf_meta_tags %>
    8: </head>   app/views/layouts/application.html.erb:5:in `_app_views_layouts_application_html_erb__242882506_70513990'   app/controllers/problems_controller.rb:7:in `index' 
```

我之前做了什么？赶紧跑`bundle update`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-04T10:45:26.813

由于引导更新，我需要更新引导的资产：

```
rails g bootstrap:install -f 
```

资产中有一条新线：

```
+@fontAwesomeEotPath_iefix: asset-path("fontawesome-webfont.eot#iefix"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T05:10:09.960

这也发生在我身上。这是因为，当您更新 Bootrap gem 时，您应该更新它的 js 和更少的 css。做

```
rails g bootstrap:install -f 
```

这将在您的 app/assets/css/bootstrap_overrides.css.less 文件中添加一行，例如

```
@fontAwesomeEotPath_iefix: asset-path("fontawesome-webfont.eot#iefix"); 
```

# qt - 为 qt 设计器安装一个 qt 小部件

> ID：13701136
> 
> 赞同：2
> 
> 时间：2012-12-04T10:45:33.160
> 
> 标签：qt, widget, qt-designer

我为我的应用程序下载了一个非常有用的小部件。来自[http://qt-apps.org/content/show.php/QLedIndicator?content=118610的 LED 指示灯](http://qt-apps.org/content/show.php/QLedIndicator?content=118610)

但是没有 README 文件或任何指令文件。

我解压缩并给出`qmake QLedIndicator.pro` ，然后`make`它编译得很好，没有错误。

但是我不知道如何在 Qt Designer 中添加小部件，所以我可以将它拖放到我需要的地方。

我将 qt 4.8.3 与 mingw 一起使用。qt 创作者 2.6.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:53:20.813

在 Linux 下，您只需将文件 libQLedIndicatorPlugin.so 复制到

/usr/lib/qt/plugins/designer/

目录（或发行版上的任何目录）。

在 Windows 下，过程类似，但您需要注意构建过程，如我链接的页面底部所述

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T13:18:50.940

Qt 的插件架构允许您向设计器添加自定义小部件。你可以查看这个官方 qt 的链接来这样做 - [http://doc.qt.digia.com/4.7/designer-customwidgetplugin.html](http://doc.qt.digia.com/4.7/designer-customwidgetplugin.html)

# java - java.io.FileDescriptor#sync() 是否特定于单个 FileDescriptor

> ID：13701137
> 
> 赞同：6
> 
> 时间：2012-12-04T10:45:41.273
> 
> 标签：java, filesystems, vfs

在我的应用程序的某些点写入文件后，我希望强制同步到磁盘。由于它在 Linux 上运行，我可以只运行

```
Runtime.getRuntime().exec("sync"); 
```

但是，我宁愿不介绍 Linux 特定的系统调用，而宁愿使用

```
java.io.FileDescriptor#sync(); 
```

但是，我使用 Apache VFS 在本地文件系统上执行操作，据我所知，它不提供对底层文件描述符的访问。但是我是否需要访问刚刚写入以强制同步的实际文件描述符？例如，我不能只使用任何 FileDescriptor 来调用同步以获得相同的效果吗

```
FileDescriptor.in.sync(); 
```

这会是一种有效的方法吗，结果是否与在 Linux 中调用同步的结果相匹配？

以防万一有人知道是否/如何可以访问 VFS 中的底层 FileDescriptor，了解一下也很有用。

编辑：看来

```
FileDescriptor.in.sync(); 
```

不想在 Linux 上工作（尽管从 Eclipse 运行时它可以在我的 Windows 机器上工作），但是

```
new FileOutputStream(new File("anyfile")).getFD().sync(); 
```

绝对有效，调用它的结果与直接调用 Linux 同步命令的结果相匹配。但是，它涉及打开和关闭冗余文件输出流，因此并不完全理想。任何其他原因这可能是一个坏主意，因为它似乎确实有效？是否有其他方法可以获得可用于同步的 FileDescriptor？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-07T16:37:09.557

我前段时间调查过这样的问题：[Question 1](https://stackoverflow.com/questions/730521/really-force-file-sync-flush-in-java) , [Question 2](https://stackoverflow.com/questions/5650327/are-filechannel-force-and-filedescriptor-sync-both-needed)。

在 Linux 中，[java.io.FileDescriptor#sync](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileDescriptor.html#sync%28%29)调用可确保将与描述符关联的文件的修改数据发送到磁盘。（那个便宜的磁盘往往会跳过写入，只将数据放在不可靠的（也就是没有 NVRAM）写入缓存中是一个不同/额外的问题。）它不能保证其他文件的修改数据也会被写回。这不在同步合同或基础[fsync POSIX 函数](http://pubs.opengroup.org/onlinepubs/009695299/functions/fsync.html)的合同中。

但是，在某些情况下（例如 ext3 在 data=ordered 模式下），[文件上的 fsync 会写备份文件系统的修改数据](https://oss.oracle.com/~mason/blog/)。这真的很有趣，因为这可能会因为其他一些应用程序创建了大量的脏块而产生显着的延迟。

# matlab - 如何在 mupad (MATLAB) 中实现此功能

> ID：13701138
> 
> 赞同：1
> 
> 时间：2012-12-04T10:45:42.820
> 
> 标签：matlab, symbolic-math

我想实现以下功能。但我不知道如何在一组变量上定义一个函数，例如`mu(1)`, `mu(2)`, `mu(3)`,..., `mu(c)`。`c`是一个数字符号（即它是函数的参数，但不是输入值）：

```
f := (mu(i), i=1..c) -> sum(mu(i)^2,i=1..c) 
```

换句话说，我想要 的符号形式`f(MU)=norm(MU)^2`，其中`MU`是`1xc`变量向量。

谢谢

**编辑**：事实上，我想从[使用模糊逻辑建模不确定性中跟踪 mupad 中的以下计算：使用最近的理论和](http://books.google.com/books?id=XNHzqfvMTbwC&pg=PA323&dq=fuzzy+c-means+lagrange&hl=en&sa=X&ei=TL-9UKqFDoui8ATEx4DIBA&ved=0CC8Q6AEwAA#v=onepage&q=fuzzy%20c-means%20lagrange&f=false)...。

我还附上了计算步骤的图片（模糊 c 均值）。

![计算](../Images/e50d3b353c069082ab3e8c552bb86c41.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:24:13.947

```
f := mu -> _plus(mu[i]^2 $ i=1..nops(mu)); 
```

用列表调用：

```
f([1,2,3,4]) 
```

或者，能够调用`f(1,2,3,4)`：

```
f := () -> _plus(args(i)^2 $ i=1..args(0)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:55:30.090

我不确定我是否理解这个问题（如何`c`成为参数，而不是输入值？）

```
>> f = @(mu) sum(mu .^ 2); % applied on all elements
>> g = @(mu, c) sum(mu(1 : c) .^ 2);  % applied on mu(1:c)
>> f(1:3)

ans =

    14

>> g(1:10, 3)

ans =

    14 
```

# sql - 编写一个宏来提取excel中SQL查询中使用的所有表名和列名？

> ID：13701139
> 
> 赞同：1
> 
> 时间：2012-12-04T10:45:43.457
> 
> 标签：sql, oracle, macros

我想在 excel 中编写一个宏来提取 SQL 查询中使用的所有列名和表名。

为此，我想将 SQL 查询放在文本文件或 Excel 文件中，然后我想使用宏提取该 SQL 中使用的所有列和表。我想要 Excel 文件中的最终结果（表和列名）。

我的数据库是甲骨文。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-04T17:35:06.047

根据您的公司政策，如果您能够运行某些程序，您可以使用 sql developer，运行您的查询，并将结果集导出为 XLS 格式。这会给你你的excel文件。

# c# - 用于检查非字母数字字符的 Windows 窗体文本框或 C# 字符串本机方法

> ID：13701143
> 
> 赞同：3
> 
> 时间：2012-12-04T10:45:47.637
> 
> 标签：c#, string, winforms, textbox

是否有一个 Windows 窗体文本框或 C# 字符串本机成员方法来检查其内容是否有任何非字母数字字符？

还是我必须手动完成？

编辑：我使用了@Habib 的答案并添加了这样的空格，以便检查空格，令我惊讶的是，它起作用了！哈哈

```
bool result = strVariable.Any(r=> (!char.IsLetterOrDigit(r) && !char.IsWhiteSpace(r))); 
```

顺便说一句，我从来没有使用过“lambda”表达式，这就是为什么当我在@Habib 的初始答案中添加空格条件时，上面的代码可以正常工作的原因。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T10:47:59.633

您可以使用[char.IsLetterOrDigit](http://msdn.microsoft.com/en-us/library/system.char.isletterordigit%28v=vs.110%29.aspx)

> 指示 Unicode 字符是归类为字母还是十进制数字。

```
bool result = strVariable.Any(r=> !char.IsLetterOrDigit(r)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:48:31.213

您可以创建一个以 TextBox 为基础的控件，但目前没有可以为您执行此操作的属性，您必须在 textBox 的 KeyUp 事件上执行此操作并使用正则表达式或类似的

# c++ - 用于字符串实习的容器

> ID：13701144
> 
> 赞同：1
> 
> 时间：2012-12-04T10:45:47.920
> 
> 标签：c++, hashtable, boost-multi-index, string-interning, intrusive-containers

我的目标是进行字符串实习。为此，我正在寻找一个可以执行以下操作的散列容器类：

*   每个节点只分配一块内存
*   每个节点不同的用户数据大小

值类型如下所示：

```
struct String
{
    size_t refcnt;
    size_t len;
    char data[];
}; 
```

每个 String 对象都有不同的大小。这将通过 operator new + Placement new 来完成。所以基本上我想自己分配Node，稍后再推入容器中。

以下容器不适合：

*   std::unordored_set
*   boost::multi_index::*

    无法分配不同大小的节点

*   boost::intrusive::unordered_set

    一开始似乎有效。但有一些缺点。首先，您必须自己分配存储桶数组并维护负载因子。这只是不必要且容易出错。

    但另一个问题更难解决：您只能搜索具有 String 类型的对象。但是每次查找条目时分配一个字符串效率低下，并且您只有一个 std::string 作为输入。

是否有任何其他散列容器可用于此任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:36:37.253

您的定义`String`不会在 C++ 中编译；显而易见的解决方案是`data`用指针替换字段（在这种情况下，您可以将结构本身放入 中 `std::unordered_set`）。

可以在 C++ 中创建一个开放式结构，如下所示：

```
struct String
{
    int refcnt;
    int len;
    char* data()
    {
        return reinterpret_cast<char*>(this + 1);
    }
}; 
```

但是，如果您这样做，您就是在薄冰上滑冰。对于 以外的类型`char`，存在`this +`无法适当对齐的风险。

如果你这样做，那么你`std::unordered_set`将不得不包含指针，而不是元素，所以我怀疑你会为此付出任何努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:52:01.513

我认为您无法使用任何标准容器来做到这一点。

您可以做的是存储指针`String`并提供自定义哈希和 cmp 函子

```
struct StringHash
{
   size_t operator() (String* str)
  {
    // calc hash
  } 
};

struct StringCmp
{
   bool operator() (String* str1, String* str2)
  {
    // compare
  } 
};

std::unordered_set<String*, StringHash, StringCmp> my_set; 
```

# android - 微调器宽度问题

> ID：13701146
> 
> 赞同：1
> 
> 时间：2012-12-04T10:45:53.303
> 
> 标签：android, spinner

我创建了一个微调器，并在我的布局文件中将其宽度设置为`wrap_content`. 在我的微调器列表中，我的项目短至 1 个字符但长达 15 个字符。但是，即使项目没有那么长，微调器的宽度也始终为 15 个字符。Therefore, when the item with length 1 is selected, the gap between the text and the arrow is pretty huge and looks bad. 我不知道这是否有区别，但我`setDropDownViewResource`的是`simple_spinner_dropdown_item`。我通过以下代码设置适配器：

```
final ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item) {

        public View getView(int position, View convertView, ViewGroup parent) {
            View v = super.getView(position, convertView, parent);

            ((TextView) v).setTextColor(getResources().getColorStateList(
                    R.color.pick_up_button_background));
            return v;

        }
    }; 
```

此外，此问题仅存在于冰淇淋三明治手机中。当我在姜饼上使用该应用程序时，它运行良好，并且微调器被赋予所选项目的宽度。我该如何纠正这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:04:45.287

试试这个代码。希望这可以帮助你

```
ArrayAdapter<String> adpt = new ArrayAdapter<String>this,android.R.layout.simple_spinner_item, spinnerName;         adpt.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

spinnerName.setAdapter(adpt);
spinnerName.setOnItemSelectedListener(new OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> arg0, View arg1,int arg2, long arg3) {
        spnVehicleType.getSelectedItemPosition();
    }

    public void onNothingSelected(AdapterView<?> arg0) {

    }
}); 
```

# c# - 只有第一个 listpicker 打开 windows phone

> ID：13701150
> 
> 赞同：0
> 
> 时间：2012-12-04T10:46:10.383
> 
> 标签：c#, windows-phone-7

我正在使用 Windows Phone Toolkit - Nov 2011 (7.1 SDK)，我想在一个网格中显示多个列表选择器，并在列表框中显示每个网格。问题是，只有第一个列表选择器会弹出，其余的不会。其次，如何自定义列表选择器的完整模式页面以仅以横向显示并将页面的“shell：SystemTray.IsVisible”设置为false。

抱歉，我无法发布屏幕截图。错误“获得超过 10 个声望来发布图像”。

谢谢

```
public MainPage()
    {
        InitializeComponent();
        for (int g = 0; g < 10; g++)
        {
            // Define the margins template dor elements
        Thickness elemThick = new Thickness();

        // Create the Grid that will hold all the elements of a single entry
        Grid entryGrd = new Grid();
        entryGrd.VerticalAlignment = VerticalAlignment.Top;
        entryGrd.HorizontalAlignment = HorizontalAlignment.Left;
        elemThick.Left = 0;
        elemThick.Bottom = 0;
        elemThick.Right = 0;
        elemThick.Top = 0;
        entryGrd.Margin = elemThick;
        entryGrd.Tag = lstbxPH.Items.Count;

        // Setup the backgound value of the letBoder element
        LinearGradientBrush elemLGB = new LinearGradientBrush();
        elemLGB.EndPoint = new Point(0.5, 1);
        elemLGB.StartPoint = new Point(0.5, 0);

        GradientStop AquamarineGS = new GradientStop();
        AquamarineGS.Color = Color.FromArgb(255, 127, 255, 212);
        AquamarineGS.Offset = 0;

        GradientStop greenLikeGS = new GradientStop();
        greenLikeGS.Color = Color.FromArgb(255, 101, 250, 193);
        greenLikeGS.Offset = 0.988;

        elemLGB.GradientStops.Add(AquamarineGS);
        elemLGB.GradientStops.Add(greenLikeGS);

        // Draw the letter 
        for (int x = 0; x < 9; x++)
        {
            Border letBoder = new Border();
            letBoder.Width = 53;
            letBoder.Height = 51;
            letBoder.VerticalAlignment = VerticalAlignment.Top;
            letBoder.HorizontalAlignment = HorizontalAlignment.Left;
            elemThick.Left = x * 60 + 71;
            elemThick.Top = lstbxPH.Items.Count * 1 + 20;
            letBoder.Margin = elemThick;
            letBoder.Background = elemLGB;

            // The Texblock
            TextBlock let = new TextBlock();
            let.VerticalAlignment = VerticalAlignment.Center;
            let.HorizontalAlignment = HorizontalAlignment.Center;
            let.FontSize = 25;
            let.FontWeight = FontWeights.Bold;
            let.Foreground = new SolidColorBrush(Color.FromArgb(200, 255, 255, 255));
            let.Text = x.ToString();
            let.Tag = x;
            letBoder.Child = let;
            entryGrd.Children.Add(letBoder);
        }

        // Draw the List picker element for the draw types
        ListPicker DType = new ListPicker();
        DType.Width = 48;
        DType.VerticalAlignment = VerticalAlignment.Top;
        DType.HorizontalAlignment = HorizontalAlignment.Left;
        DType.Background = new SolidColorBrush(Color.FromArgb(200, 255, 255, 255));
        DType.BorderBrush = new SolidColorBrush(Color.FromArgb(200, 255, 255, 255));
        elemThick.Left = 17;
        elemThick.Top = lstbxPH.Items.Count * 1 + 10;
        DType.Margin = elemThick;
        DType.FontSize = 18;
        ListPickerItem item1 = new ListPickerItem() { Content = "A" };
        ListPickerItem item2 = new ListPickerItem() { Content = "B" };
        ListPickerItem item3 = new ListPickerItem() { Content = "C" };
        DType.Items.Add(item1);
        DType.Items.Add(item2);
        DType.Items.Add(item3);
        entryGrd.Children.Add(DType);

        if (lstbxPH.Items.Count != 0)
        {
            // The delete button and related image
            Button btnDel = new Button();
            btnDel.Height = 65;
            btnDel.Width = 60;
            btnDel.Tag = lstbxPH.Items.Count;
            btnDel.VerticalAlignment = VerticalAlignment.Top;
            btnDel.HorizontalAlignment = HorizontalAlignment.Left;
            btnDel.VerticalContentAlignment = VerticalAlignment.Top;
            btnDel.HorizontalContentAlignment = HorizontalAlignment.Left;
            elemThick.Left = 600;
            elemThick.Top = lstbxPH.Items.Count + 13;
            btnDel.Margin = elemThick;
            elemThick.Left = 0;
            elemThick.Bottom = 0;
            elemThick.Right = 0;
            elemThick.Top = 0;
            btnDel.Name = "btnDel";
            btnDel.Padding = elemThick;
            btnDel.BorderBrush = new SolidColorBrush(Color.FromArgb(0, 0, 0, 0));
            Image imgDel = new Image();
            imgDel.Source = new BitmapImage(new Uri("/appbar.delete.rest.png", UriKind.RelativeOrAbsolute));
            imgDel.VerticalAlignment = VerticalAlignment.Top;
            imgDel.HorizontalAlignment = HorizontalAlignment.Left;
            imgDel.Height = 35;
            imgDel.Width = 30;
            elemThick.Left = 0;
            elemThick.Bottom = 0;
            elemThick.Right = 0;
            elemThick.Top = 0;
            imgDel.Margin = elemThick;
            imgDel.Stretch = Stretch.UniformToFill;
            btnDel.Content = imgDel;

            entryGrd.Children.Add(btnDel);
        }

        // Add the grid with to the list box
        this.lstbxPH.Items.Add(entryGrd);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T19:59:34.733

此问题实际上已由 Windows Phone Toolkit - Nov 2011 (7.1 SDK) 解决。这是我的解决方法。

1.  下载工具包的 11 月版本[http://silverlight.codeplex.com/releases/view/75888](http://silverlight.codeplex.com/releases/view/75888)
2.  如果您安装了以前版本的工具包，请卸载它并在您的项目中取消引用该工具包
3.  安装工具包的 11 月版本
4.  在您的项目中引用工具包，调试和繁荣！它炒锅。

# android - Android 的测试驱动开发

> ID：13701154
> 
> 赞同：6
> 
> 时间：2012-12-04T10:46:19.230
> 
> 标签：android, testing, tdd

我们可以在 Android 中使用 JUnit 进行测试驱动开发吗？如果没有，是否有类似于 JUnit 的替代方法？

我在谷歌上搜索了一下，还阅读了一篇 SO 帖子[Android 测试驱动开发](https://stackoverflow.com/questions/6261504/android-test-driven-development) 看起来 Android 从来没有考虑到 TDD。在开始学习 TDD 并同时进行 Android 开发之前，我想确定一下。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-15T20:12:51.983

我认为您可以完全依靠[Robolectric](http://pivotal.github.io/robolectric/)在 JVM 中运行测试。您可以使用 JUnit4 来测试您的 POJO，而 Robolectric 为您提供测试 Android 组件的支持。

我也是 TDD for Android Development 的初学者。我发现 Robolectric 对测试我的代码非常有用。

[该](http://www.youtube.com/watch?v=T6FWL877txw)视频将告诉您它为您提供的用于对 Android 代码进行单元测试的几乎所有内容。

更新：有了 Android Studio 的支持和新的 Android 生态系统，现在单元测试可以作为一流的实践来完成。有关详细信息，请参阅[http://developer.android.com/training/testing/unit-testing/local-unit-tests.html](http://developer.android.com/training/testing/unit-testing/local-unit-tests.html)。

有几个很好的方法来测试驱动 android 代码。到目前为止我发现最有效的方法是使用 MVVM(model-view-viewmodel) 或 MVP(model-view-presenter) 方法，其中业务逻辑和表示逻辑与视图分离并且可以很容易地成为单元测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T11:03:45.143

是的，我们可以使用 JUnit 进行测试驱动开发。要开始与您可以参考以下链接：[http://developer.android.com/tools/testing/testing_android.html#JUnit](http://developer.android.com/tools/testing/testing_android.html#JUnit) 按照文档，我们可以使用 junit.framework 完成单元测试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-02T13:07:11.090

以下是对问题空间的一些解释：[http ://www.techwell.com/2013/04/applying-test-driven-development-android-development](http://www.techwell.com/2013/04/applying-test-driven-development-android-development)

结论是你应该使用 Robolectric。不幸的是，Robolectric 很慢，如果你甚至在实用的层面上遵循 TDD，你最终会得到数百个测试，这将运行 10 秒。这不是你想用 TDD 做的。TDD 测试包最多应该在几秒钟内运行。

我的建议是：

*   围绕仅调用 Android 类的 Android 类创建包装类。
*   用纯 Java 编写您的应用程序逻辑。
*   使用 Junit（或 TestNG 或任何你喜欢的东西）来测试你的模型/业务逻辑
*   偶尔将 Robolectric 用于包装类（可能您不必使用）
*   （您可以编写使用多个类、Robolectric 等的集成测试，但只能在单独的持续集成服务器上运行，例如每小时一次）

使用这种方法，您的逻辑也将更加便携。

# android - android 4.2 中所有用户通用的存储

> ID：13701159
> 
> 赞同：4
> 
> 时间：2012-12-04T10:46:32.447
> 
> 标签：android, multi-user, android-4.2-jelly-bean

4.2 Jellybean 现在支持多用户。但是，根据[文档](http://developer.android.com/about/versions/android-4.2.html#MultipleUsers)，对所有 API 的所有调用以获取存储位置都会返回当前用户私有的位置（例如：getExternalStorageDirectory()）。

我从服务器缓存大量内容并将其存储到外部存储中，但是在多用户环境中，需要为所有用户复制这些数据。这浪费了很多空间。

有没有办法将文件存储到一个公共区域供所有用户使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:16:19.130

显然不是，根据[发行说明](http://developer.android.com/about/versions/android-4.2.html)：

> 无论您使用这些 API 中的哪一个来保存给定用户的数据，在以不同用户身份运行时都无法访问这些数据。从您的应用程序的角度来看，每个用户都在完全独立的设备上运行。

我希望我错了，因为我和你有同样的问题。

我明白这将是一个潜在的安全漏洞，但如果我将文件保存在返回的文件夹中`getExternalStoragePublicDirectory`，我只能怪我自己。

# c# - 如何按列值过滤我的 DataTable？

> ID：13701160
> 
> 赞同：9
> 
> 时间：2012-12-04T10:46:32.910
> 
> 标签：c#, asp.net, filter, datatable, adapter

我有一个关于`DataTable`. 我`DataTable`从数据库中检索 a，其中一列包含 1 或 0。现在我只想检索该列中 1 值为 1 的行。

列的名称是`ACTIVATE`。

这是我的`DataTable`：

```
DataTable table = new DataTable(TABLE);

//How can I filter here so ACTIVATE == 1?

adapter.Fill(table);

connection.Open();

selectcommand.ExecuteReader();

return table; 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-04T10:50:31.950

通过 SQL（首选）

```
SELECT * FROM dbo.Table WHERE ACTIVATE = 1 
```

通过`Linq-To-Datatable`（在内存中）：

```
DataTable tblFiltered = table.AsEnumerable()
                             .Where(r => r.Field<int>("ACTIVATE") == 1)
                             .CopyToDataTable(); 
```

如果您仍在使用 .NET 2，则可以使用[`DataTable.Select`](http://msdn.microsoft.com/en-us/library/det4aw50.aspx)：

```
DataRow[] filteredRows = table.Select("ACTIVATE = 1"); 
```

除此之外，您不需要`selectcommand.ExecuteReader()`填写表格。

```
DataTable table = new Datatable();
using(var con = new SqlConnection(connectionString))
using(var cmd = new SqlCommand("SELECT * FROM dbo.Table WHERE ACTIVATE = 1", con))
using(var da = new SqlDataAdapter(cmd))
{
    da.Fill( table );
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T10:49:23.443

您只需像这样使用[DataTable.Select](http://msdn.microsoft.com/en-us/library/det4aw50.aspx)：

```
 foundRows = table.Select("ACTIVATE = '1'"); 
```

它返回一个 DataRow 对象数组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T10:50:10.710

```
DataTable results = table.Select("ACTIVATE = 1").CopyToDataTable(); 
```

那应该达到你想要的，基本上你可以像SQL一样查询数据表。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-04T10:52:07.647

```
return table;
DataTable results = table.Select("ACTIVATE = 1").CopyToDataTable(); 
```

# android - 如何在对话框中设置按钮颜色

> ID：13701162
> 
> 赞同：0
> 
> 时间：2012-12-04T10:46:35.193
> 
> 标签：android, android-layout

我创建了一个包含“接受”和“拒绝”按钮的对话框，但按钮的颜色是默认颜色。任何人都可以提供代码以将按钮的颜色设置为绿色和红色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:52:09.753

通过创建自定义可绘制对象.. 例如..

```
button.setBackgroundResource(R.drawable.custom_button); 
```

custom_button.xml

```
<?xml version="1.0" encoding="utf-8"?> 
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" > 
<item> 
  <shape android:shape="rectangle">
    <corners android:radius="8dip" />  
        <stroke android:width="1dp" android:color="your color" /> 
        <solid android:color="@color/ceruleo" /> 
    </shape> 
 </item> 

 <item android:top="1dp" android:bottom="1dp" android:left="1dp" android:right="1dp">  
  <shape android:shape="rectangle"> 
    <corners android:radius="8dip" /> 
        <stroke android:width="1dp" android:color="your color" /> 
        <solid android:color="@color/ceruleo" /> 
    </shape> 
 </item> 

 </layer-list> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:56:23.177

```
Button b = dialog.getButton(DialogInterface.BUTTON_NEGATIVE);
if(b != null)
    b.setBackgroundColor(Color.BLUE); 
```

本准则将为您提供帮助。您可以根据需要将颜色设置为负或正按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:15:16.360

另一种方法是，您可以为自定义对话创建对话活动。只需创建活动并在清单中

android:theme="@android:style/Theme.Dialog

为此创建布局。通过这种方式，您可以创建任何您想要的设计

# android - 日期选择器没有运行？

> ID：13701166
> 
> 赞同：1
> 
> 时间：2012-12-04T10:47:11.977
> 
> 标签：android, date, android-emulator, android-edittext, android-datepicker

如果我运行它，不幸的是该应用程序已关闭。但是我尝试了很多，我无法在文本字段中获取日期。显示对话框中有错误，它返回添加超级警告。 ![布局图像](../Images/b0cb678a2e7c138ee1720abe91b0a43b.png)

```
package com.task.reminder;

import java.util.Calendar;
import android.*;
import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.EditText;

@SuppressWarnings("unused")
public class Add extends Activity 
{

    static final int DATE_ID = 0;
    private  int tMonth;
    private int tYear;
    private int tDay;
    private EditText et2 =(EditText)findViewById(R.id.editText2);
    private Button datebut=(Button)findViewById(R.id.button3);
    /** Called when the activity is first created. */
    @Override

    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_add);

        getdate();
    }

        private void getdate() 
        {
            datebut.setOnClickListener(new View.OnClickListener() {

                @SuppressWarnings("deprecation")
                @Override
                public void onClick(View v) 
                {
                    showDialog(DATE_ID);
                }
            });

            final Calendar c = Calendar.getInstance();
            tYear = c.get(Calendar.YEAR);
            tMonth = c.get(Calendar.MONTH);
            tDay = c.get(Calendar.DAY_OF_MONTH);
            displaydate();

        }   

        protected Dialog onCreateDialog(int id)
        {
                switch(id)
                {
                case DATE_ID:
                        return new DatePickerDialog(this, datePickerListener, 
                                 tYear, tMonth,tDay);
                }
                return null;
        }

        private DatePickerDialog.OnDateSetListener datePickerListener=
                new DatePickerDialog.OnDateSetListener()
        {

                    @Override
                    public void onDateSet(DatePicker view, int year, int monthOfYear,
                            int dayOfMonth) 
                    {
                        tYear=year;
                        tMonth=monthOfYear;
                        tDay=dayOfMonth;
                        displaydate();
                    }
        };

        private void displaydate() 
        {

            et2.setText(new StringBuilder().append(tMonth+1).append("-").append(tDay).append("-").append(tYear).append(" "));

        }    

} 
```

我需要一些帮助，感谢您的贡献。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:57:17.557

试试下面的例子吧

**日历活动.java**

```
public class CalendarActivity extends Activity
{
 private EditText Calctrl;
 static final int DATE_DIALOG_ID = 0;
 final Calendar c = Calendar.getInstance();
 private int mYear, mMonth, mDay;
 private String sdate;
 private String[] arrayMonth = { "Jan", "Feb", "Mar", "Apr", "May", "Jun",
   "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" };

  @Override
  public void onCreate(Bundle savedInstanceState)
  {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);
   Calctrl = (EditText) findViewById(R.id.datepicker);
   mYear = c.get(Calendar.YEAR);
   mMonth = c.get(Calendar.MONTH);
   mDay = c.get(Calendar.DAY_OF_MONTH);
   sdate = currentDate(mYear, mMonth, mDay);
  Calctrl.setText(sdate);  

  Calctrl.setOnTouchListener(new OnTouchListener()
  {
   @Override
   public boolean onTouch(View v, MotionEvent event)
   {
    showDialog(DATE_DIALOG_ID);
    return true;
   }
  });
 }

 @Override
 protected Dialog onCreateDialog(int id)
 {
  switch (id)
  {
  case DATE_DIALOG_ID:
   return new DatePickerDialog(this, mDateSetListener, mYear, mMonth,mDay);
  }
  return null;
 }

 @Override
 protected void onPrepareDialog(int id, Dialog dialog)
 {
  switch (id)
  {
  case DATE_DIALOG_ID:
   ((DatePickerDialog) dialog).updateDate(mYear, mMonth, mDay);
   break;
  }
 } 

 private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener()
 {
  public void onDateSet(DatePicker view, int year, int monthOfYear,int dayOfMonth)
  {
   mYear = year;
   mMonth = monthOfYear;
   mDay = dayOfMonth;
   String sdate = currentDate(mYear, mMonth, mDay);
   Calctrl.setText(sdate);
  }
 };

 private static String LPad(String schar, String spad, int len)
 {
  String sret = schar;
  for (int i = sret.length(); i < len; i++)
  {
   sret = spad + sret;
  }
  return new String(sret);
 }

 private String currentDate(int year, int month, int day)
 {
  String sdate = arrayMonth[month] + " " + LPad(day + "", "0", 2) + ", "+ year;
  return sdate;
 }
} 
```

**主要的.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/app_background"
    android:orientation="vertical" >

    <EditText
        android:id="@+id/datepicker"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:editable="false"
        android:inputType="none" />

</LinearLayout> 
```

来源[在这里](http://www.androidchennai.blogspot.in/2012/05/simple-calendar-control-android.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:54:57.887

下面是我在单击按钮时在 textview 中显示日期的代码。..单击按钮日期选择器将弹出。您只需选择日期，它将将该日期设置为相应的文本视图。希望这会有所帮助..

```
TextView starttext1;
Button startdatecustom;
DateFormat fmtDateAndTime = DateFormat.getDateInstance();

private int year;
private int month;
private int day;
Calendar myCalendar = Calendar.getInstance();
static final int DATE_DIALOG_ID = 999;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);
starttext1 = (TextView) findViewById(R.id.startdateedittext1);

startdatecustom = (Button) findViewById(R.id.btnstdateactcutom);

startdatecustom.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            new DatePickerDialog(MainActivity.this, d, myCalendar
                    .get(Calendar.YEAR), myCalendar.get(Calendar.MONTH),
                    myCalendar.get(Calendar.DAY_OF_MONTH)).show(); 

        }
    });

}

DatePickerDialog.OnDateSetListener d = new DatePickerDialog.OnDateSetListener() {
    public void onDateSet(DatePicker view, int year, int monthOfYear,
            int dayOfMonth) {
        myCalendar.set(Calendar.YEAR, year);
        myCalendar.set(Calendar.MONTH, monthOfYear);
        myCalendar.set(Calendar.DAY_OF_MONTH, dayOfMonth);
        updateLabel();
    }
};

private void updateLabel() {
    starttext1.setText(fmtDateAndTime.format(myCalendar.getTime()));
}

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DATE_DIALOG_ID:
        // set date picker as current date
        return new DatePickerDialog(this, datePickerListener, year, month,
                day);
    }
    return null;
}

private DatePickerDialog.OnDateSetListener datePickerListener = new DatePickerDialog.OnDateSetListener() {

    // when dialog box is closed, below method will be called.
    public void onDateSet(DatePicker view, int selectedYear,
            int selectedMonth, int selectedDay) {
        year = selectedYear;
        month = selectedMonth;
        day = selectedDay;

    }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:53:42.417

您正在尝试在不为 Activity 设置布局的情况下找到 View，因此在Activity 方法`findViewById`之后的所有行都更多。将您的代码更改为：`setContentView(R.layout.activity_add);``onCreate(Bundle savedInstanceState)`

```
public class Add extends Activity 
{

    static final int DATE_ID = 0;
    private  int tMonth;
    private int tYear;
    private int tDay;
    EditText et2 ;
    Button datebut;
    /** Called when the activity is first created. */
    @Override

    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_add);
        et2 =(EditText)findViewById(R.id.editText2);
        datebut=(Button)findViewById(R.id.button3);
          // your code here.... 
```

# java - 如何格式化我的结果以显示小数点后的数字

> ID：13701170
> 
> 赞同：0
> 
> 时间：2012-12-04T10:47:20.820
> 
> 标签：java, number-formatting

当我执行下面的代码时，我需要一行代码来获取小数点后的数字：

```
double results = 1500 / 1000;

        txtview.setText("K " + resultsoldk); 
```

我还需要包含提醒的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:53:30.333

问题是结果

```
 double results = 1500 / 1000; 
```

是`1.0`，不是`1.5`，因为你在做**整数除法**。进行除法时，请确保至少有一个数字是浮点数。例如：

```
// By adding .0 you make it a double literal instead of an int literal
double results = 1500.0 / 1000; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:56:05.463

您可以使用[String.format(...)](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)方法来格式化字符串，如下所示：

```
txtview.setText(String.format("K %f", resultsoldk)); 
```

但是，这不适用于您的情况。当您将两个整数相除时，结果将是一个整数（没有余数）。之后将其转换为双精度（因为您将其分配给双精度），但此时精度已经丢失。*在除法之前*，您必须至少将其中一个整数转换为双精度数：

```
double results = (double)1500 / 1000; 
```

或者，如果您使用常量

```
double results = 1500.0 / 1000; 
```

或者

```
double results = 1500 / 1000.0; 
```

甚至

```
double results = 1500.0 / 1000.0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T10:53:14.243

您可以使用如下所示的 double 进行投射

```
 double results = (double)1500 / 1000; 
```

您也可以使用 DecimalFormat 格式化结果

```
DecimalFormat df = new DecimalFormat("0.00##");
String formattedResult=df.format(results); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T11:01:02.443

```
String strResult = Double.toString(d);
strResult = strResult.replaceAll("\\d?\\.", ""); 
```

不知道我是否明白，但如果你想要的是点后的数字，那么你可以使用这个正则表达式。

# android - 如何在 JUnit 测试用例中使用 Android-Libs？

> ID：13701177
> 
> 赞同：1
> 
> 时间：2012-12-04T10:47:46.533
> 
> 标签：android

我想将 JUNIT 用于我的 Android 项目中的一些网络类。我正在使用 Apache HttpClient，它已经包含在 android 中。但是当我运行我的 junit 测试时，它遇到了一个异常。我在 Junit-Testrunner 中包含了我所有的 lib 文件。但显然这还不够，因为没有找到 HttpClient。有人知道我做错了什么吗？

这是例外

```
java.lang.NoClassDefFoundError: org/apache/http/client/HttpClient
at de.srs.android.pdixuploader.network.test.ClientAppTest.testCheckLogin(ClientAppTest.java:18)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at junit.framework.TestCase.runTest(TestCase.java:168)
at junit.framework.TestCase.runBare(TestCase.java:134)
at junit.framework.TestResult$1.protect(TestResult.java:110)
at junit.framework.TestResult.runProtected(TestResult.java:128)
at junit.framework.TestResult.run(TestResult.java:113)
at junit.framework.TestCase.run(TestCase.java:124)
at junit.framework.TestSuite.runTest(TestSuite.java:243)
at junit.framework.TestSuite.run(TestSuite.java:238)
at org.eclipse.jdt.internal.junit.runner.junit3.JUnit3TestReference.run(JUnit3TestReference.java:130)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

引起：java.lang.ClassNotFoundException：org.apache.http.client.HttpClient at java.net.URLClassLoader$1.run(Unknown Source) at java.net.URLClassLoader$1.run(Unknown Source) at java.security.AccessController .doPrivileged(Native Method) at java.net.URLClassLoader.findClass(Unknown Source) at java.lang.ClassLoader.loadClass(Unknown Source) at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source) at java.lang.ClassLoader .loadClass(Unknown Source) ... 19 更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-24T19:47:04.860

我通过将 JUnit 库添加到我的项目中解决了这个问题：

*   打开项目的属性 > Java 构建路径
*   打开库选项卡
*   单击添加库
*   选择 JUnit
*   点击下一步
*   确保在下拉列表中选择了正确版本的 JUnit
*   点击完成

# sql - GROUP BY 没有区别

> ID：13701182
> 
> 赞同：0
> 
> 时间：2012-12-04T10:48:06.090
> 
> 标签：sql, sql-server, tsql

我似乎无法理解为什么，但我正在尝试这个查询：

```
SELECT called,caller,time,duration
FROM Calls
GROUP BY called,caller,time,duration 
```

但这会返回具有相同`called`值的行，这不是我想要的。

基本上我正在尝试构建一个更大的查询，只是一步一步地进行。`called`我需要一个查询来为每个返回最新条目`caller`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:54:10.133

假设您只需要不同的`called`值，但需要所有列。如果有多个，`called`我只取最后一个（按顺序排列`time`）：

```
WITH CTE AS
(
   SELECT called,caller,time,duration,
      RN = ROW_NUMBER() OVER (PARTITION BY called ORDER BY time DESC)
   FROM Calls
)
SELECT called,caller,time,duration
FROM CTE WHERE RN = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:49:35.100

> 我需要一个查询来为每个呼叫者的每个呼叫返回最新条目

试试这个：

```
;WITH CTE
AS
(
    SELECT
      called,
      caller,
      time,
      duration,
      ROW_NUMBER() OVER(PARTITION BY caller
                        ORDER BY called DESC) rownum
    FROM Calls
)
SELECT
  called,
  caller,
  time,
  duration
FROM CTE 
WHERE rownum = 1; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/3a096/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T10:51:20.003

我认为原因是您不能按多个类别进行分组，请看下面的示例：

```
SELECT column_name, aggregate_function(column_name)
 FROM table_name
 WHERE column_name operator value
 GROUP BY column_name 
```

查看此网站以获取有关此 [网站的更多示例](http://www.w3schools.com/sql/sql_groupby.asp)

# mysql - MYSQL查询连胜包括得分

> ID：13701186
> 
> 赞同：0
> 
> 时间：2012-12-04T10:48:36.693
> 
> 标签：mysql

我有一个查询生成的表格，只要玩家不断获胜，它就会计算连胜。当他们的玩家得分为正时，连胜增加 1，如果他得分为负，则连胜回落至 0。表格如下所示：

```
+--------+------------------+--------+--------+
| player |    timestamp     | points | streak |
+--------+------------------+--------+--------+
| John   | 22/11/2012 23:01 |     -2 |      0 |
| John   | 22/11/2012 23:02 |      3 |      1 |
| John   | 22/11/2012 23:04 |      5 |      2 |
| John   | 22/11/2012 23:05 |     -2 |      0 |
| John   | 22/11/2012 23:18 |     15 |      1 |
| John   | 23/11/2012 23:20 |      5 |      2 |
| Chris  | 27/11/2012 22:12 |     20 |      1 |
| Chris  | 27/11/2012 22:14 |    -12 |      0 |
| Chris  | 27/11/2012 22:17 |      4 |      1 |
| Chris  | 27/11/2012 22:18 |     -4 |      0 |
| Chris  | 27/11/2012 22:20 |     10 |      1 |
| Chris  | 27/11/2012 22:21 |     20 |      2 |
| Chris  | 27/11/2012 22:22 |     90 |      3 |
+--------+------------------+--------+--------+ 
```

我想获得球员的最大连胜纪录，这当然很容易获得，但我也想包括球员在特定连胜纪录中的得分。因此，对于上面的示例，结果必须如下所示：

```
+--------+--------+-----------+
| player | points | maxstreak |
+--------+--------+-----------+
| John   |     20 |         2 |
| Chris  |    120 |         3 |
+--------+--------+-----------+ 
```

关于我如何实现这一目标的任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T18:17:48.347

我还没有机会实际尝试这个，但应该使用 mySQL 变量工作......

一开始，最里面的查询只是从你的分数表中查询，并按照玩家和时间戳的顺序强制数据。从那以后，我必须使用 MySQL 变量按顺序处理。第一件事......在每条正在处理的新记录上，如果我在不同的“播放器”上（实际上应该基于 ID 而不是名称），我正在将连胜、点数、maxStreak、maxStreakPoints 重置为零，然后将最后一个用户设置为即将处理的任何人。

紧接着，我正在检查连胜状态、积分等......

一旦所有都被列表，然后我使用 OUTERMOST 查询来获取每个玩家的最高最大连胜/最大连胜点数。

```
SELECT
      Final.Player,
      MAX( Final.MaxStreak ) MaxStreak,
      MAX( Final.MaxStreakPoints ) MaxStreakPoints 
   FROM 
      ( 
        SELECT 
              PreOrd.Player,
              PreOrd.TimeStamp,
              PreOrd.Points,
              @nStreak       := case when PreOrd.Points < 0 then 0
                                     when PreOrd.Player = @cLastPlayer then @nStreak +1
                                     else 1 end  Streak,                              

              @nStreakPoints := case when @nStreak = 1 then PreOrd.Points
                                     when @nStreak > 1 then @nStreakPoints + PreOrd.Points
                                     else 0 end  StreakPoints,

              @nMaxStreak    := case when PreOrd.Player != @cLastPlayer then @nStreak
                                     when @nStreak > @nMaxStreak then @nStreak
                                     else @nMaxStreak end MaxStreak,

              @nMaxStreakPoints := case when PreOrd.Player != @cLastPlayer then @nStreakPoints
                                        when @nStreak >= @nMaxStreak and @nStreakPoints > @nMaxStreakPoints then @nStreakPoints
                                        else @nMaxStreakPoints end MaxStreakPoints,

              @cLastPlayer := PreOrd.Player PlayerChange
         FROM 
              ( select
                      S.Player,
                      S.TimeStamp,
                      S.Points
                   from 
                      Scores2 S
                   ORDER BY 
                      S.Player,
                      S.TimeStamp,
                      S.`index` ) PreOrd,
              ( select
                      @nStreak := 0,
                      @nStreakPoints := 0,
                      @nMaxStreak := 0,
                      @nMaxStreakPoints := 0,
                      @cLastPlayer := '~' ) SQLVars
      ) as Final
   group by 
      Final.Player 
```

现在，这可能会给出一个错误的最大连续点数，例如，在一个分数上，这个人有 90 分，然后连续 10 分 1 分，10 分 2 分，10 分 3 分，总共 30 分.. 还在想那个尽管... ：）

这是我`index`从提供的数据中添加列 时得到的结果![在此处输入图像描述](../Images/c631799549bddb831e96b84dd76c9531.png)

[SQL Fiddle 显示我的解决方案...](http://sqlfiddle.com/#!2/544a4/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T17:09:26.737

我的建议是在计算条纹时存储其他信息。例如，您可以存储条纹开始时的时间戳。

一个不太严重的建议是切换到另一个支持窗口函数的数据库。这会容易得多。

方法是找出连胜开始的时间，然后总结从那个时间到最大连胜之间的所有内容。为此，我们将使用相关子查询：

```
select t.*,
       (select max(timestamp) from t t2 where t2.timestamp <= t.timestamp and t2.player = t.player and t2.streak = 0
       ) as StreakStartTimeStamp
from t
where t.timeStamp = (select max(streak) from t t2 where t.player = t2.player) 
```

现在，我们将此查询嵌入为子查询，因此我们可以添加适当的时间：

```
select t.player,
       sum(s.points)
from t join
     (select t.*,
             (select max(timestamp) from t t2 where t2.timestamp <= t.timestamp and t2.player = t.player and t2.streak = 0
             ) as StreakStartTimeStamp
      from t
      where t.streak = (select max(streak) from t t2 where t.player = t2.player)
     ) s
     on t.player = s.player
group by t.player 
```

我没有测试过这个查询，所以可能有一些语法错误。但是，该方法应该有效。出于性能原因，您可能希望在表、条纹和时间戳上有索引。

# entity-framework - 实体框架 5 - 具有双列的 TPT 继承（数据库优先）

> ID：13701187
> 
> 赞同：1
> 
> 时间：2012-12-04T10:48:38.643
> 
> 标签：entity-framework, entity-framework-5

我将 EF5/VS2012 用于我的应用程序。我的旧数据库（数据库优先方法）具有用于继承的表，每个表都有一个用户和时间戳列，它们设置有插入和更新。触发器将此信息写入日志表中。

样本：

**BaseTable**
...
用户
时间戳

**SpecializedTable**
...
用户
时间戳

如果我尝试在 EF 设计器中创建此结构（TPT： http: [//msdn.microsoft.com/en-us/data/jj618293](http://msdn.microsoft.com/en-us/data/jj618293)）我有一个错误 19，告诉我我的专业类型不能有字段用户和时间戳，因为它们是在基本类型中声明的。

我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:46:09.117

如果您的所有专用表都有 User 和 Timestamp 列，并且您希望父实体封装这些属性，则您需要使用[TPC 继承](http://blogs.microsoft.co.il/blogs/gilf/archive/2010/01/25/table-per-concrete-type-inheritance-in-entity-framework.aspx)，而不是 TPT。

# c++ - 显式模板参数规范

> ID：13701188
> 
> 赞同：2
> 
> 时间：2012-12-04T10:48:39.733
> 
> 标签：c++, templates

我开始阅读有关模板的内容，但对以下内容感到困惑。

```
template<class T>
T max(T t1, T t2)
{
   if (t1 > t2)
      return t1;
   return t2;
}

int main(){
   std::cout<<max<int>(120,14.55);
   return 0;
} 
```

输出为 120。但是当我编译上面的代码时，我收到了这个警告：

```
warning:passing double for argument 2 to T max(T, T) [with T = int]. 
```

我的问题是为什么会出现这个警告，因为我已经为`T max(int t1,double t2)`.

因为根据我在此处的理解，如果我明确提及仅一种数据类型（此处），编译器`int`将从参数类型（）中扣除其他数据类型。`14.55`这意味着在这种情况下`T max(T t1, T t2)`实例化。`T max(int t1,double t2)`我从 Internet 上的一些模板文档中读到了这个概念。

请清除我的疑虑，否则我无法继续进行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:58:57.810

您的特定模板只有一个模板参数，`T`. 这意味着`max<int>`创建了这个：

```
int max(int t1, int t2) 
```

没有办法`max(int, double)`从这个模板中生成。如果您想要混合类型的参数，则模板必须如下所示：

```
template <typename T1, typename T2>
/*some return type*/ max(T1 t1, T2 t2) 
```

但是，现在要确定返回类型应该是什么并不容易，并且`type_traits`可能需要为这样的函数派生正确的返回类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T10:55:01.500

```
std::cout << max<int>(120,14.55); 
```

此行等同于使用函数 int max(int, int)，因此编译器会给出从 14.55 转换为 14 的警告 - 可能丢失数据。

如果你想比较不同类型的数据，你应该使用

```
template<class T, class T1, class T2>
T max(T1 t1, T2 t2)
{
   if (t1 > t2)
      return T(t1);
   return T(t2);
} 
```

稍后在 main.cpp 中：

```
float a = max<float, int, double>(10, 11.0); 
```

但这不是最好的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:03:03.027

> 为什么会出现这个警告是我的问题，因为我已经为`T max(int t1,double t2)`.

不，你没有。提供`int`作为模板参数通过将所有出现的参数替换为来实例化模板`int`：

```
T max(T t1, T t2)    becomes    int max(int t1, int t2) 
```

> 因为根据我的理解，如果我明确提及仅一种数据类型（此处为 int），则将从参数类型中扣除其他数据类型

不，您的模板只有一个参数，用于两种函数参数类型；因此，如果您指定该参数，则它同时用于两者（以及返回类型）。如果您希望这些单独参数化，那么您需要为每个单独的参数。

```
template <typename T1, typename T2>
???? max(T1 t1, T2 t2) 
```

如何最好地指定返回类型留作练习。

现在，如果你只提供第一个参数，第二个是从第二个函数参数推导出来的：

```
max<int>(120,14.55);  // T1=int given, T2=double deduced -> max(int,double)
max(120,14.55)        // T1=int, T2=double both deduced  -> max(int,double) 
```

# java - 水晶报表SDK JRC传参报错错误代码：-2147217394 错误代码名称：missingParameterValueError

> ID：13701190
> 
> 赞同：0
> 
> 时间：2012-12-04T10:48:47.313
> 
> 标签：java, crystal-reports

当我尝试从水晶报表 SDK 传递参数并将我的报表导出为 PDF 时。它是独立的应用程序，所以我不能使用 crystalreportviewer 选项，但它一直给我错误 com.crystaldecisions.sdk.occa.report.lib.ReportSDKParameterFieldException: InternalFormatterException---- 错误代码：-2147217394 错误代码名称：missingParameterValueError 我代码如下请帮助

```
import com.crystaldecisions.reports.sdk.DatabaseController;
import com.crystaldecisions.reports.sdk.ReportClientDocument;
import com.crystaldecisions.reports.sdk.ParameterFieldController;
import com.crystaldecisions.sdk.occa.report.data.IConnectionInfo;
import com.crystaldecisions.sdk.occa.report.exportoptions.ExportOptions;
import com.crystaldecisions.sdk.occa.report.exportoptions.ReportExportFormat;
import com.crystaldecisions.sdk.occa.report.lib.ReportSDKException;
public class Test {
public static void main(String args[]) throws ReportSDKException, SQLException,      FileNotFoundException, IOException{
try{

ReportClientDocument reportClientDoc = new ReportClientDocument();
reportClientDoc.open("Report.rpt",0);
ParameterFieldController paramController = reportClientDoc.getDataDefController().getParameterFieldController();

paramController.setCurrentValue("","P_DP",new Integer(22));
//Here I was calling switch database code 
 ByteArrayInputStream byteArrayInputStream = (ByteArrayInputStream)reportClientDoc.getReportSource().export(ReportExportFormat.PDF);
 IOUtils.copy(byteArrayInputStream, new FileOutputStream("new.pdf"));

 reportClientDoc.close();

 }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-03-07T11:32:34.403

它只需将设置参数代码移动到上面的行即可开始工作。我们需要在打开报表之前设置参数。

```
 ```
import com.crystaldecisions.reports.sdk.DatabaseController;
import com.crystaldecisions.reports.sdk.ReportClientDocument;
import com.crystaldecisions.reports.sdk.ParameterFieldController;
import com.crystaldecisions.sdk.occa.report.data.IConnectionInfo;
import com.crystaldecisions.sdk.occa.report.exportoptions.ExportOptions;
import com.crystaldecisions.sdk.occa.report.exportoptions.ReportExportFormat;
import com.crystaldecisions.sdk.occa.report.lib.ReportSDKException;
public class Test {
public static void main(String args[]) throws ReportSDKException, SQLException,      FileNotFoundException, IOException{
try{

ReportClientDocument reportClientDoc = new ReportClientDocument();

ParameterFieldController paramController = reportClientDoc.getDataDefController().getParameterFieldController();
paramController.setCurrentValue("","P_DP",new Integer(22));

reportClientDoc.open("Report.rpt",0);

//Here I was calling switch database code 
 ByteArrayInputStream byteArrayInputStream = (ByteArrayInputStream)reportClientDoc.getReportSource().export(ReportExportFormat.PDF);
 IOUtils.copy(byteArrayInputStream, new FileOutputStream("new.pdf"));

 reportClientDoc.close();

 }
} 
``` 
```

# c# - 让我的 XNA 精灵正确跳跃

> ID：13701195
> 
> 赞同：1
> 
> 时间：2012-12-04T10:49:08.937
> 
> 标签：c#, xna, sprite

我一直很难让我的精灵跳跃。到目前为止，我有一段代码，只需点击“W”，就会以恒定的速度向上发送精灵。我需要能够让我的精灵在开始跳跃后的某个时间或高度回到地面。精灵上还有一个恒定的速度 2 拉动，以模拟某种重力。

```
// Walking = true when there is collision detected between the sprite and ground

if (Walking == true)
    if (keystate.IsKeyDown(Keys.W))
        {
            Jumping = true;
        }

if (Jumping == true)
    {
        spritePosition.Y -= 10;
    } 
```

任何想法和帮助将不胜感激，但如果可能的话，我更喜欢发布我的代码的修改版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:03:08.347

你需要对你的精灵施加一个脉冲，而不是像你正在做的那样保持 10 的恒定速度。对于您正在尝试做的事情，[这里](http://flatformer.blogspot.ie/2010/02/making-character-jump-in-xnac-basic.html)有一个很好的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:05:01.543

我会做这样的事情......

```
const float jumpHeight = 60F; //arbitrary jump height, change this as needed
const float jumpHeightChangePerFrame = 10F; //again, change this as desired
const float gravity = 2F;
float jumpCeiling;
bool jumping = false;

if (Walking == true)
{
    if (keystate.IsKeyDown(Keys.W))
    {
        jumping = true;
        jumpCeiling = (spritePosition - jumpHeight);
    }
}

if (jumping == true)
{
    spritePosition -= jumpHeightChangePerFrame;
}

//constant gravity of 2 when in the air
if (Walking == false)
{
    spritePosition += gravity;
}

if (spritePosition < jumpCeiling)
{
    spritePosition = jumpCeiling; //we don't want the jump to go any further than the maximum jump height
    jumping = false; //once they have reached the jump height we want to stop them going up and let gravity take over
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T11:19:18.403

```
 public class Player
    {
      private Vector2 Velocity, Position;
      private bool is_jumping; 
      private const float LandPosition = 500f; 

      public Player(Vector2 Position)
      {
         this.Position = new Vector2(Position.X, LandPosition); 
         Velocity = Vector2.Zero;
         is_jumping = false; 
      }
      public void UpdatePlayer(Gametime gametime, KeyboardState keystate, KeyboardState previousKeyBoardState)
      {
       if (!is_jumping)
         if (keystate.isKeyDown(Keys.Space) && previousKeyBoardState.isKeyUp(Keys.Space))
          do_jump(10f); 
       else
       {
        Velocity.Y++; 
        if (Position.Y >= LandPosition)
           is_jumping = false; 
       } 
       Position += Velocity; 

     }

     private void do_jump(float speed)
     {
            is_jumping = true; 
            Velocity = new Vector2(Velocity.X, -speed); 
     }
   } 
```

伪代码和一些真实代码的有趣小组合，只需在顶部添加我没有包含的变量。

还可以查看 Stack Overflow Physics ;) 祝你游戏好运。

编辑：这应该是完整的，让我知道事情进展如何。

# abstract-syntax-tree - 在 xtext 中查看解析树/节点模型/AST

> ID：13701199
> 
> 赞同：5
> 
> 时间：2012-12-04T10:49:28.587
> 
> 标签：abstract-syntax-tree, xtext

我正在使用 xtext 为特定语言生成编辑器。当为我的新语言使用编辑器时，它具有所有可爱的 xtext 功能，如代码完成和着色等。我想做的是在我的编辑器中可视化文本的结构。

我知道 xtext 有一个内部 AST 和一个解析树（我知道他们称之为“节点模型”） - 有没有办法可视化这棵树？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-31T17:21:16.523

xtend 中的一个简单解决方案（基于 EObject.toString() 默认完成的内省）：

```
def static String dump(EObject mod_, String indent) {
    var res = indent + mod_.toString.replaceFirst ('.*[.]impl[.](.*)Impl[^(]*', '$1 ')

    for (a :mod_.eCrossReferences)
        res += ' ->' + a.toString().replaceFirst ('.*[.]impl[.](.*)Impl[^(]*', '$1 ')
    res += "\n"
    for (f :mod_.eContents) {
        res += f.dump (indent+"    ")
    }
    return res
} 
```

诸如***dump(someEObject, '') 之***类的调用的输出将返回：

```
ExpressionModel 
Variable (name: i)
    Plus 
        IntConst (value: 1)
        Plus 
            IntConst (value: 2)
            Plus 
                IntConst (value: 3)
Variable (name: j)
    Plus 
        VarRef  ->Variable (name: i)
        Plus 
            IntConst (value: 4)
            Plus 
                IntConst (value: 5) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-20T05:08:08.523

这可能会对您有所帮助： [https ://github.com/OLibutzki/xtext.tools](https://github.com/OLibutzki/xtext.tools)

它提供了节点模型和语义模型 (AST) 的大纲。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T16:21:02.437

您应该检查内容大纲。我已经定制了我的，但我认为默认的反映了模型的结构。

# c# - 如何在Splitcontainer panel2 c#中显示级联窗口

> ID：13701204
> 
> 赞同：3
> 
> 时间：2012-12-04T10:49:43.690
> 
> 标签：c#, winforms

在`MdiParent toolstripmenuItem`中，我正在编写代码以显示所有窗口的`cascade or Tile Horizontal`样式。我的代码是：

```
this.LayoutMdi(MdiLayout.Cascade);
this.LayoutMdi(MdiLayout.TileHorizontal); 
```

此代码仅适用于 mdi 父级。但现在我`Split container`在我的父表单中使用 a 。在`Panel1`我有显示表单的按钮。在`Panel2`我的表单中将显示为：

```
 Forms.paymentPaid paidFm = new SalesandPurchases.Forms.paymentPaid();
        paidFm.MdiParent = this;
        paidFm.Left = (this.myPanel.Width - paidFm.Width) / 2;
        paidFm.Top = (this.myPanel.Height - paidFm.Height) / 2;
        myPanel.Controls.Add(paidFm);
        paidFm.Show(); 
```

现在因为我`Split Container my code( this.LayoutMdi(MdiLayout.Cascade))`不能在`Panel2`. 请告诉我任何其他方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:54:38.850

正如您所经历的那样，仅更改控件的容器而不移动 MDI 容器本身是行不通的。我认为您需要做的是将 MDI 容器移动到要在其中显示子窗口的面板（面板 2）。基本上，您现在希望在拆分容器的面板 2 中的表单主窗口中拥有之前拥有的内容。

我希望这有帮助。

# javascript - 为什么 Google Closure 交换参数？

> ID：13701205
> 
> 赞同：8
> 
> 时间：2012-12-04T10:49:49.377
> 
> 标签：javascript, google-closure

我已经看到 Google Closure 编译器在 if 子句中做了很多重写。例如：

```
if (a === 3) {…} 
```

转向

```
if (3 === a) {…} 
```

如果原语是第一个参数，那么 JavaScript 中的比较是否更快，或者这是什么原因？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-04T11:39:13.913

从[ReorderConstantExpression.java](http://code.google.com/p/closure-compiler/source/browse/trunk/src/com/google/javascript/jscomp/ReorderConstantExpression.java)：

```
/**
 * Reorder constant expression hoping for a better compression.
 * ex. x === 0 -> 0 === x
 * After reordering, expressions like 0 === x and 0 === y may have higher
 * compression together than their original counterparts.
 *
 */ 
```

正如[google 闭包编译器贡献者](https://stackoverflow.com/a/9270890/995876)所说，代码注释所指的压缩是指 gzip 压缩，而不是实际的缩小“压缩”。它可以改进 gzip 压缩的原因是，如果你的代码中有`0 === x`并且`x === 0`，闭包编译器会将这两个规范化为`0 === x`，这是重复的文本，因此可以更好地压缩。

然后还有：

```
typeof this.value == "object"

typeof this.key == "object" 
```

唯一的字符串是：`typeof this.`、、`value`和`key``== "object"`

但是，如果您重新排序：

```
"object" == typeof this.value

"object" == typeof this.key 
```

唯一的字符串是`"object" == typeof this.`：`value`和`key`。较少唯一的字符串和相当长的重复字符串。

# c# - 使用 iTextSharp.dll 生成 PDF 时耗尽 PDF 页面

> ID：13701206
> 
> 赞同：0
> 
> 时间：2012-12-04T10:49:56.217
> 
> 标签：c#, .net, pdf, itextsharp

我正在使用 iTextSharp 生成 PDF。我有一个 HTMl 页面，我正在阅读 HTML 页面然后生成 PDF。但问题是页面的一半是 PDF，而页面的另一半正在用完 PDF 页面.我的意思是页面的一半以 PDF 格式显示。而页面的一半以 PDF 格式剪切。

我的代码在加载事件中是这样的..

```
 string fileContents;
    string FilePath = Server.MapPath("print-withoutlogin.html");
    StreamReader mstrFileStreamReader = new StreamReader(FilePath);
    try
    {
        fileContents = mstrFileStreamReader.ReadToEnd();
        byte[] result = createPDF(fileContents.ToString()).GetBuffer();

        Response.Clear();
        Response.AddHeader("Content-Length", result.Length.ToString());
        Response.ContentType = "application/pdf";
        Response.AddHeader("Accept-Ranges", "bytes");
        Response.Buffer = true;
        Response.AddHeader("Expires", "0");
        Response.AddHeader("Cache-Control", "must-revalidate, post-check=0, pre-check=0");
        Response.AddHeader("Pragma", "public");
        Response.AddHeader("content-Transfer-Encoding", "binary");
        Response.AddHeader("Content-Disposition", "attachment; filename=kartik.pdf");
        Response.BinaryWrite(result);
        Response.Flush();
        Response.End();
    }
    catch (Exception ex)
    {
        throw ex;
    }
    finally
    {
        mstrFileStreamReader.Close();
    } 
```

和

```
 private MemoryStream createPDF(string html)
 {
    MemoryStream msOutput = new MemoryStream();
    TextReader reader = new StringReader(html);

    Document document = new Document(PageSize.A4, 0, 0, 50, 50);

    PdfWriter writer = PdfWriter.GetInstance(document, msOutput);
    HTMLWorker worker = new HTMLWorker(document);
    //worker.SetStyleSheet(styles);

    // step 4: we open document and start the worker on the document 
    document.Open();
    worker.StartDocument();
    // step 5: parse the html into the document      
    worker.Parse(reader);
    // step 6: close the document and the worker     
    worker.EndDocument();
    worker.Close();
    document.Close();

    return msOutput;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:01:41.923

您是否考虑过使用 Crystal Reports？我发现它更容易，你可以使用

```
pdfStream = (MemoryStream)report.ExportToStream(CrystalDecisions.Shared.ExportFormatType.PortableDocFormat); 
```

# java - 如何从java中的inputStream中读取每个字符串

> ID：13701207
> 
> 赞同：0
> 
> 时间：2012-12-04T10:49:57.757
> 
> 标签：java, string, inputstream

我正在尝试通过蓝牙将加速器值从 Android 应用程序发送到 PC。我正在开发 BluetoothChat 演示应用程序。在 Android 应用程序中，我有一个名为 onSensorChanged 的​​方法，每次加速度变化时都会调用该方法。该方法如下所示：

```
@Override
public void onSensorChanged(SensorEvent e) {
    // the work done when the accelerometer data changes
    try {
        Thread.sleep(25);
    } catch (InterruptedException e1) {
        e1.printStackTrace();
    }
    sensorX = e.values[0];
    sensorY = e.values[1];

    Toast.makeText(BluetoothChat.this, "x coordinate = " + sensorX + "y coordinate = " + sensorY Toast.LENGTH_SHORT).show();

    BigDecimal sensorXDec = new BigDecimal(e.values[0]).setScale(2,BigDecimal.ROUND_HALF_UP);
    BigDecimal sensorYDec = new BigDecimal(e.values[1]).setScale(2,BigDecimal.ROUND_HALF_UP);

    String vals = String.valueOf(sensorXDec.toPlainString() + "," + sensorYDec.toPlainString()); 

    mChatService.writeFromString(vals);

} 
```

方法 writeFromString

```
 public void writeFromString(String temp){
    // Create temporary object
    ConnectedThread r;
    // Synchronize a copy of the ConnectedThread
    synchronized (this) {
        if (mState != STATE_CONNECTED) return;
        r = mConnectedThread;
    }
    // Perform the write unsynchronized
    r.writeString(temp);
} 
```

writeString 方法如下：

```
 public void writeString(String out) {
        try {
                if(D) Log.d(TAG, "Sending File....AS STRING");
                mmOutStream.write(out.getBytes(), 0, out.getBytes().length);

        } catch (IOException e) {
            Log.e(TAG, "Exception during write", e);
        }
    } 
```

在以下方法中，我在 PC 端处理 inputStream

```
 @Override
public void run() {
    try {
        // prepare to receive data
        InputStream inputStream = mConnection.openInputStream();

        System.out.println("waiting for input");

        while (true) {
            int command = inputStream.read();

            if (command == EXIT_CMD)
            {   
                System.out.println("finish process");
                break;
            }
            processCommand(command);
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

问题又是：如何检索我从 Android 应用程序发送的每组字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:58:57.363

试试这个

字符串味精=空；
BufferedReader br = new BufferedReader( new InputStreamReader(inputStream) );

味精 = br.readLine();

这将解决问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:19:22.467

```
Scanner scanner = new Scanner (inputStream);

while(true){
    if(!scanner.hasNextInt()){
        continue;
    }
    // at this point we've got an int, so get it and use it
    try{
        int commmand = scanner.nextInt();

        if (command == EXIT_CMD){
            System.out.println("finish process");
            break;
        }

        processCommand(command);
    } catch (Exception catchThem){
        // Deal with the caught exceptions
    }
} 
```

我没有测试这个，希望它对你有用。

# android - Android gridview跳过单元格

> ID：13701212
> 
> 赞同：3
> 
> 时间：2012-12-04T10:50:15.163
> 
> 标签：android, gridview, android-ui

如何在网格视图中跳过某些单元格。我的意思是我有下一个来源：

```
public class ImageAdapter extends BaseAdapter {
    private Context mContext;

    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return mThumbIds.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    }

    // references to our images
    private Integer[] mThumbIds = {
            R.drawable.sample_2, R.drawable.sample_3, etc...
} 
```

主要的：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this)); 
```

和 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<GridView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@+id/gridview"
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent"
    android:columnWidth="90dp"
    android:numColumns="auto_fit"
    android:verticalSpacing="10dp"
    android:horizontalSpacing="10dp"
    android:stretchMode="columnWidth"
    android:gravity="center"
/> 
```

现在我有这个：
![在此处输入图像描述](../Images/6a79a8bae675306aa62081fe327cda27.png)

如何在我的网格视图中跳过一些单元格，我想要这样的东西： ![在此处输入图像描述](../Images/ec269cbddffd3a368383893361388a46.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:59:57.770

尝试以下操作：

**编辑**

```
public class ImageAdapter extends BaseAdapter {
    private Context mContext;
    private boolean[] arrGrid;

    public ImageAdapter(Context c) {
        mContext = c;

        arrGrid = new boolean[mThumbIds.length];
        for (int i = 0; i < arrGrid.length; i++) {
            arrGrid[i] = true;
        }

        // set the following positions blank for example
        arrGrid[4] = false; 
        arrGrid[5] = false; 
        arrGrid[8] = false; 
    }

    public int getCount() {
        return mThumbIds.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            if (arrGrid[position]) {
                imageView = new ImageView(mContext);
                imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
                imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
                imageView.setPadding(8, 8, 8, 8);                    
                imageView.setImageResource(mThumbIds[position]);                     
            } 
        } else {
            imageView = (ImageView) convertView;
        }

        return imageView;
    }

    // references to our images
    private Integer[] mThumbIds = {
            R.drawable.sample_2, R.drawable.sample_3, etc...
    }
} 
```

# windows - Windows PATH 到 bash 中的 posix 路径转换

> ID：13701218
> 
> 赞同：53
> 
> 时间：2012-12-04T10:50:44.993
> 
> 标签：windows, string, bash, path, msys

如何通过标准**msys功能将****Windows**目录路径（例如`c:/libs/Qt-static`）转换为正确的**POSIX**目录路径（ ） ？反之亦然？`/c/libs/Qt-static`

 *** * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-04T12:16:44.600

Cygwin、Git Bash 和 MSYS2 有一个现成的实用程序，专门`cygpath.exe`用于执行此操作。

```
输出类型选项：
  -d, --dos 打印名称的 DOS（短）形式 (C:\PROGRA~1\)
  -m, --mixed 与 --windows 类似，但带有常规斜杠 (C:/WINNT)
  -M, --mode 报告文件模式（binmode 或 textmode）
  -u, --unix (默认) 打印 Unix 形式的 NAME (/cygdrive/c/winnt)
  -w, --windows 打印名称的 Windows 形式 (C:\WINNT)
  -t, --type TYPE 打印 TYPE 形式：'dos'、'mixed'、'unix' 或 'windows'

```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-12-04T11:06:44.243

我不知道`msys`，但快速的谷歌搜索显示它包含该`sed`实用程序。因此，假设它`msys`在本机 Linux 上的工作方式相似，这是一种方法：

## 从 Windows 到 POSIX

您必须用斜杠替换所有反斜杠，删除驱动器号后的第一个冒号，并在开头添加一个斜杠：

```
echo "/$pth" | sed 's/\\/\//g' | sed 's/://' 
```

或者，正如 xaizek 所指出的，

```
echo "/$pth" | sed -e 's/\\/\//g' -e 's/://' 
```

## 从 POSIX 到 Windows

您必须添加一个分号，删除第一个斜杠并将所有斜杠替换为反斜杠：

```
echo "$pth" | sed 's/^\///' | sed 's/\//\\/g' | sed 's/^./\0:/' 
```

或更有效地，

```
echo "$pth" | sed -e 's/^\///' -e 's/\//\\/g' -e 's/^./\0:/' 
```

其中`$pth`是分别存储 Windows 或 POSIX 路径的变量。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-09-16T02:18:07.067

只需使用`cygpath`：

```
$ cygpath -w "/c/foo/bar"
 -> C:\foo\bar
$ cygpath -u "C:\foo\bar"
 -> /c/foo/bar 
```

你可能想知道：“我`cygpath`安装了吗？” 好，

1.  如果您使用的是 git-bash shell，那么可以。
2.  如果你在cygwin，那么是的。
3.  如果你在另一个 shell 中，但你之前已经安装了 git-bash，那么`cygpath`可以在`git-bash-install-folder\usr\bin\cygpath.exe`.
4.  否则：也许不是，但我相信您可以找到安装它的方法。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-11-13T09:11:53.200

MSYS 中的“正确”方式是：

```
$ MSYS_NO_PATHCONV=1  taskkill /F /T /IM ssh-agent.exe 
```

这避免了必须手动翻译斜杠。它只是取消激活路径转换。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-07-29T17:13:55.053

这是我的实现（在 git bash 上测试）。

## 从 POSIX 到 Windows

```
sed '
    \,/$, !s,$,/,
    \,^/, s,/,:/,2
    s,^/,,
    s,/,\\,g
    ' <<< "$@" 
```

**效劳于：**

```
/c/git
relative/dir
c:/git
~
.
..
/c
/c/
./relative/dir
/sd0/some/dir/ 
```

*除了*

```
/
<path with space> 
```

**解释：**

`\,^/, s,/,:/,2`(转换`/drive/dir/`为`/drive:/dir/`) 是它的核心，并在nd`:`之前插入。我使用delim 而不是可读性。如果以( ) 开头，则在第nd 次出现时替换为。我不想假设驱动器号长度为 1，所以这适用于.`2``/``,``/``/``\,^/,``/``:/``2``/sd0/some/dir`

`s,^/,,`删除前导`/`并将`s,/,\\,g`所有转换`/`为`\`.

`\,/$, !s,$,/,`是处理极端情况`/c`并确保第二个`/`（`/c/`）以使下一个命令起作用。

笔记：

如果这里的字符串`<<<`在您的外壳中不起作用，那么您可以使用`echo`管道作为

```
echo "$@" | sed ... 
```

**勘误表**

这里[是脚本](https://github.com/rmandvikar/git-setup/blob/next/bin/e)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-01-08T08:43:09.327

仅供参考 - 至少对于我的 git 版本 2.26.2.windows.1 例如，如果我有像 C:\dev\work_setup\msk 这样的路径，我可以直接转到 Git Bash 并输入

```
cd "C:\dev\work_setup\msk" 
```

这将导致当前文件夹更改为 /c/dev/work_setup/msk - 所以这种类型的转换似乎是自动完成的，只要我将 Windows 路径放在双引号内。不幸的是，我没有参考可以支持这一点的原始文档。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-10-19T09:13:59.487

我的解决方案适用于文件夹/文件列表，分两步完成。假设您想替换从***D:\example***到***/example***的路径，以获得重复此 Windows 路径的文件列表。

第一步它将反冲变为斜线

```
grep -lr "D:\\\\example" /parent-folder | xargs -d'\n' sed -i 's+\\+\/+g' 
```

请注意，***父文件夹***可以是根 (/) 或您喜欢的任何内容，如果您的文件名或文件夹名称带有空格，则***-d'\n'参数是必需的。***

第二步，它将 D:/example 替换为 /example：

```
grep -lr "D:/example" /parent-folder | xargs -d'\n' sed -i 's+D:+/example+g' 
```

我想分享这个解决方案，因为我花了一些时间来制作这两条线，但它确实很有帮助（我正在将 Windows 应用程序迁移到内部有大量 Windows 路径的 Linux 服务器）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-07T19:46:58.580

@hello_earth 的答案具有误导性，因为 Windows 路径必须是双反斜杠，如：

```
cd "e:\\dir\\subdir\\path" 
```

否则 shell 会找到转义序列。**

# activiti - 如何获取有关当前部署流程的信息以在 Activiti 中显示自定义流程图

> ID：13701221
> 
> 赞同：3
> 
> 时间：2012-12-04T10:51:08.440
> 
> 标签：activiti, bpmn

我们正在使用 Activiti 在我们的 spring-mvc 环境中对流程进行建模。

我想生成整个流程的自定义概览，包括流程的当前位置。

Activiti 提供了通过使用生成 png 的可能性

```
ProcessDiagramGenerator.generatePngDiagram 
```

请参阅[文档](http://activiti.org/javadocs/org/activiti/engine/impl/bpmn/diagram/ProcessDiagramGenerator.html#generatePngDiagram%28org.activiti.engine.impl.persistence.entity.ProcessDefinitionEntity%29)

但是，我想在 html 页面中创建流程的自定义呈现。为此，我需要有关该过程的信息。

使这变得如此困难的是，我只想显示特定用户的用户任务并为多个进程执行此操作。有些缺少一些步骤。

我知道如何获取当前活动的任务，但我对用户在此过程中可能遇到的所有可能任务更感兴趣。

有谁知道如何为部署到引擎的流程获取特定用户的所有用户任务的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T18:54:35.600

如果您想要用户是候选人的任务列表，您可以使用：

```
List<Task> userCandidateTasks = taskService.createTaskQuery().taskCandidateUser(username).list(); 
```

或分配给该用户的任务：

```
List<Task> userAssignedTasks = taskService.createTaskQuery().taskAssignee(username).list(); 
```

然后如果您希望这些出现在图表上，您可以获得所需任务的 ID（例如，您可以合并用户是候选人和受让人的任务），然后您只需将 ID 列表传递给方法：

```
InputStream imageStream = ProcessDiagramGenerator.generateDiagram(processDefinition, "png", tasksIdList); 
```

# android - 如何在android中加密大视频文件

> ID：13701224
> 
> 赞同：2
> 
> 时间：2012-12-04T10:51:16.507
> 
> 标签：android, encryption

我有一个应用程序，我在其中使用代码来解密已经加密的文件。文件位置是“ ***/mnt/sdcard/myfolder/test.mp4*** ”。***test.mp4***文件的大小约为 20MB。

当我使用以下代码解密小尺寸的加密文件时，文件已成功解密，但当我尝试解密大视频文件时，出现异常`outOfMemoryException`。

这是代码：

```
FileOutputStream fos = new FileOutputStream(outFilePath);
Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
        byte[] keyBytes= new byte[16];
        //byte[] b= key.getBytes(Charset.forName("UTF-8"));
        byte[] b= key.getBytes("UTF-8");
        Log.i("b",""+b);
        int len= b.length;
        Log.i("len",""+len);
        if (len > keyBytes.length) len = keyBytes.length;
        System.arraycopy(b, 0, keyBytes, 0, len);
        SecretKeySpec keySpec = new SecretKeySpec(keyBytes, "AES");
        IvParameterSpec ivSpec = new IvParameterSpec(keyBytes);
        cipher.init(Cipher.DECRYPT_MODE,keySpec,ivSpec);

        byte[] results = new byte[cipher.getOutputSize(abc.length)];

        try
        {
            Log.i("output size:", ""+cipher.getOutputSize(abc.length));
            ***results = cipher.doFinal(abc);***
        }
        catch (Exception e) {
            // TODO: handle exception
            Log.e("EXCEPTION:", e.getMessage());
        }
        fos.write(results); 
```

注意：`byte[] abc = new byte[64];`包含输入字节数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:24:22.090

从您的问题，或者至少从您发布的代码来看，没有什么可以引起的`OutOfMemoryException`，特别是因为数组`abc`只有 64 个字节长。但是您说在处理大文件时会遇到异常。所以我的推断，

在您的代码中的某处（不在发布的部分中），您正在尝试将完整文件读入任何数组，或尝试将其保存在数组中。Android 确实对应用程序施加了内存限制（大多数设备为 16 MB），此限制包括用于 UI 元素的内存。所以那里没有多少内存可供您使用。

现在理想情况下，您应该做的是创建一个与流一起使用的解密块。[CipherInputStream](http://developer.android.com/reference/javax/crypto/CipherInputStream.html)看起来很有希望。如果您正在考虑[使用](https://stackoverflow.com/questions/7024907/android-nullpointerexception-cipherinputstream-to-bitmap)`CipherInputStream`.

# javascript - 根据背景颜色更改文本颜色？

> ID：13701226
> 
> 赞同：0
> 
> 时间：2012-12-04T10:51:22.343
> 
> 标签：javascript, jquery, css

我有一个非常简约的网站，所以我想为它添加一些细节，比如隐藏的主题切换。但是我不想告诉用户主题可以改变，所以我想隐藏文本。

我试过这个：

```
var tausta = $(body).css("background-color");
$('.piiloteksti').css("color",tausta); 
```

但它什么也没做。什么是正确的方法？

[一个小提琴。](http://jsfiddle.net/HbAHS/4/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:53:32.987

你的 if 语句的语法有点不对劲。此外，`body`必须将其设为字符串文字。

```
var tausta = $("body").css("background-color");
$('.piiloteksti').css("color", tausta); 
```

示例：http: [//jsfiddle.net/HbAHS/8/](http://jsfiddle.net/HbAHS/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:55:28.477

`if($('.piiloteksti').css("color",tausta);`是**错误**的说法。那是语法错误！这里应该没有`if`。

要么删除`if`

```
$('.piiloteksti').css("color",tausta); 
```

或完成`if`陈述。

```
if($('.piiloteksti').css("color",tausta)){
 // some other code
} 
```

也`$(body)`没有提到任何东西。使用`$('body')`或`$(document.body)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:00:56.947

我尝试修改 CSS，它可以工作。

// javascript

```
var tausta = $('body').css("background-color");
if($('.piiloteksti').css("color") == tausta) {
   alert(tausta);
} 
```

// css (测试)

```
body{background-color:red;}
.piiloteksti{color:red;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T11:21:43.610

您可以使用 CSS 隐藏元素

`.piiloteksti{display:none;}` [小提琴](http://jsfiddle.net/HbAHS/9/)

或者，如果您认为这会干扰您的布局，

`.piiloteksti{visibility:hidden;}` [小提琴](http://jsfiddle.net/HbAHS/11/)

或者你可以只给你的`piiloteksti`元素透明颜色

`.piiloteksti{color:transparent;}` [小提琴](http://jsfiddle.net/HbAHS/10/)

# php - move_uploaded_file 将文件移动到目的地，但返回 false，为什么？

> ID：13701228
> 
> 赞同：0
> 
> 时间：2012-12-04T10:51:46.630
> 
> 标签：php, file-upload, multipartform-data

我在这里遇到了一个奇怪的情况：我有一个高级的多部分文件上传脚本，例如，它通过扫描目标文件夹来检查重复的文件名，然后用迭代号重命名重复的名称。现在，这里的问题是，由于某种原因，如果没有提交副本，脚本会通过绿灯，但是如果输入了副本，脚本将在 move_upload_file 部分返回 false，但是，仍然设法在目标文件夹中创建正确的副本. 我只是想知道，为什么以及如何 move_upload_file 函数返回 false，但仍然继续移动文件？

这是脚本的简化片段，只是想指出问题所在：

```
<?php
//I'll loop all the files, which are submitted (in array)
foreach($_FILES['myFiles']['tmp_name'] as $key => $tmp_path) {

    //Alot of stuff (most likely unrelated) happens here

    //filepath contains both destination folder and filename
    $filepath = $destination_folder.$filename;

    if (file_exists($filepath)) {
        $duplicate_filename = true;

        //Some more stuff happens here. Then comes the actual moving part. Before this we have found duplicates 
        //for this upload file and counted proper duplicate value. 

        $file_increment = $num_of_filename_duplicates + 1;

        while ($duplicate_filename == true) {
            if(file_exists($filepath)) {
                //Separate filename parts and make new duplicate name with increment value
                $info = pathinfo($filename);
                $basename =  basename($filename,'.'.$info['extension']);
                $newfilename = $basename."(".$file_increment.").".$info['extension'];
                $filepath = $destination_folder.$newfilename;

                //Now, this returns me false, but still creates the file into destination
                if(move_uploaded_file($tmp_path, $filepath)) {
                    $file_success = true;
                    $file_increment++;
                }
                //So thats why this is true and I'll get the file_error
                else {
                    $file_error = "File error: Uploading of the file failed.";
                    break;
                }
            }
            else {
                $duplicate_filename = false;
            }
        }
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:05:19.170

唯一的原因可能是：

> 1) 如果 filename 是一个有效的上传文件，但由于某种原因无法移动，则不会发生任何操作，并且 move_uploaded_file() 将返回 FALSE。此外，还会发出警告。
> 
> 2) 如果 filename 不是有效的上传文件，则不会发生任何操作，并且 move_uploaded_file() 将返回 FALSE。

您的情况似乎是 2。尝试在脚本顶部设置以下内容以查看错误：

```
error_reporting(E_ALL);
ini_set("display_errors", 1); 
```

**不要试图找到一些魔法。只需调试您的代码。**

# http - https 获取请求的格式

> ID：13701231
> 
> 赞同：3
> 
> 时间：2012-12-04T10:51:53.157
> 
> 标签：http, https

https 获取请求的格式

我试图实现一个 HTTPS 获取请求。

这是我的示例 HTTP 获取请求。

```
GET example.com HTTP/1.1
Date: Mon, 22 Feb 1857 12:27:07 GMT
Host: xyz.com:5901
User-Agent:
Content-Length:  0 
```

我已经使用 SSL 库来加密消息，但是无论如何要区分 HTTP 消息和 https 消息与请求吗？现在我已经设置了调用 SSL 库的条件，但是我还没有找到任何 http 请求与 https 请求不同的示例。

任何人都可以在这里指导我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:59:53.620

HTTPS 是[基于 SSL/TLS 的 HTTP](https://www.rfc-editor.org/rfc/rfc2818)。本质上，SSL/TLS 连接是由客户端发起的。一旦建立 SSL/TLS 连接，它就像普通的 HTTP 一样。正如 RFC 所说：

> 从概念上讲，HTTP/TLS 非常简单。只需使用 HTTP over TLS，就像使用 HTTP over TCP 一样。

# javascript - 谷歌地图 api 中的不兼容更改

> ID：13701233
> 
> 赞同：-2
> 
> 时间：2012-12-04T10:52:00.490
> 
> 标签：javascript, google-maps, google-maps-api-3

我创建了一个 javascript 程序，它根据以下代码在谷歌地图中选择一个矩形：

[http://jsfiddle.net/JsAJA/3/](http://jsfiddle.net/JsAJA/3/)

```
function initMap() {
    var latlng = new google.maps.LatLng(43, -89);
    var settings = {
        zoom: 4,
        center: latlng,
        mapTypeControl: true,
        mapTypeControlOptions: {
            style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
        },
        navigationControl: true,
        navigationControlOptions: {
            style: google.maps.NavigationControlStyle.SMALL
        },
        mapTypeId: google.maps.MapTypeId.SATELLITE
    }
    var mapElem = $("#map-canvas");
    map = new google.maps.Map(mapElem[0], settings);
    rect = new google.maps.Rectangle({
                map: map
            });

    google.maps.event.addListener(map, 'mousedown', function(mEvent) {
        map.draggable = false;
        latlng1 = mEvent.latLng;
        dragging = true;
        pos1 = mEvent.pixel;
    });

    google.maps.event.addListener(map, 'mousemove', function(mEvent) {
        latlng2 = mEvent.latLng;
        showRect();
    });
/*
    google.maps.event.addListener(map, 'mouseup', function(mEvent) {
        map.draggable = true;
        dragging = false;
    });
    */
    google.maps.event.addListener(rect, 'mouseup', function(data){
        map.draggable = true;
        dragging = false;

        var lat1 = latlng1.lat();
        var lat2 = latlng2.lat();
        var minLat = lat1<lat2?lat1:lat2;
        var maxLat = lat1<lat2?lat2:lat1;
        var lng1 = latlng1.lng();
        var lng2 = latlng2.lng();
        var minLng = lng1<lng2?lng1:lng2;
        var maxLng = lng1<lng2?lng2:lng1;
        alert('Datbase query for the following bounds:\n\nlat: ' + minLat + ' to ' + maxLat+ '\n\nlng: ' + minLng + ' to ' + maxLng);
    });

}

function showRect() {
    if(dragging){
        if (rect === undefined) {
            rect = new google.maps.Rectangle({
                map: map
            });
        }
        var latLngBounds = new google.maps.LatLngBounds(latlng1, latlng2);
        rect.setBounds(latLngBounds);
    }
} 
```

不幸的是，从今天开始，该代码不再起作用。为什么它不再起作用了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:59:13.917

尝试[API 的“冻结”版本（当前 v=3.9）](https://developers.google.com/maps/documentation/javascript/basics#Versioning)

如果可行，请在引用此问题和您的 jsfiddle 的问题跟踪器中创建[问题](http://code.google.com/p/gmaps-api-issues/)。

# javascript - jQuery 选择器和 jQuery 变量之间缺乏标识？

> ID：13701234
> 
> 赞同：0
> 
> 时间：2012-12-04T10:52:00.047
> 
> 标签：javascript, jquery

我遇到了一个令人抓狂的问题，我将一个变量设置为指向一个 jQuery 选择器，例如：`var foobar=jQuery(this);`然后我将此变量传递给一个要处理的函数。让我们稍微简化一下，说函数看起来像这样：

```
function SetFieldValue (selector) {
  selector.val('test');
  console.log ( selector );
  console.log ( jQuery('#' + selector.attr('id')) );
} 
```

在这种情况下，如果您假设：

*   选择器始终是一个表单元素（因此 val() 是一个有效的操作）
*   选择器确实解析为具有“id”属性的单个 dom 元素

然后，您会期望两个 console.log 语句输出相同的结果，对吗？好吧，我遇到了这种情况仅在大约 90% 的情况下发生的情况。

为了提供更多上下文，我创建了一个简短的截屏视频来演示该问题：

[截图链接](https://vimeo.com/54845255)

出于参考目的，以下是截屏视频中显示的实际 SetFieldValue 代码：

```
function SetFieldValue ( domObject, value ) {
// as a safety function, check if a string representation of the domObject was passed in and convert it to a jQuery object if it was
if ( jQuery.type(domObject) === "string") {
    console.log ("Value passed into SetFieldValue was a string representation so converting to jQuery object");
    domObject = jQuery(domObject);
}

if ( jQuery.inArray (domObject.prop('tagName').toLowerCase(),['input' , 'select' , 'textarea']) >= 0 ) {
    console.log ("setting to value attribute: " + value);
    if ( domObject.hasAttr('id') ) {
        domObject.val(value);
        //jQuery('#' + domObject.attr('id')).val(value);
    } else {
        domObject.attr('value',value);          
    }

    console.log ("Using jQuery ID it is set to: " + jQuery('#' + domObject.attr('id')).val() );
    console.log ("Using jQuery selector variable it is set to: " + domObject.val() );
} else {
    console.log ("setting to html attribute");
    domObject.html( value );
}
return domObject;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T18:54:01.640

让我们稍微检查一下代码。

首先分配回参数不是一个好习惯，在函数开头添加 var 会好很多，因为可能会丢失范围。

```
//Suggestion change parameter to domItem
var domObject 
```

当参数不是字符串时，您缺少错误处理程序。识别类型时使用

```
<VARNAME>.constructor.toString().match(/function (\w*)/)[1] === "<TYPE>" 
```

它更高效并处理自定义类型。

不需要值属性分配的所有逻辑。可以使任何 dom 对象具有 value 属性。也不确定为什么要设置 val 与 value。

```
domObject.attr('value',value); 
```

**正是在这一点上，我可以看到您的代码确实可以使用一些文档来帮助解释目的**

如果您明确地只想在输入字段上设置值并在非输入字段上将值设置为 innerhtml，那么是的，逻辑将是必需的，但可以简化为 ... 因为不需要检测到覆盖该值。

```
if (jQuery.inArray (domObject.prop('tagName').toLowerCase(), ['input' , 'select' , 'textarea']) >= 0) {
    domObject.attr('value',value);
} else {
    domObject.html( value );
} 
```

不知道为什么要返回 domObject 。

因此，无需返回并保留大部分逻辑添加错误处理的快速重写会导致

```
/*jslint sloppy: true*/
/*global jQuery*/
function SetFieldValue(domString, value) {
    // as a safety function, check if a string representation of the domObjects was passed in and convert it to a jQuery object if it was
    var domObjects, index;
    //errorhandling
    if (domString === undefined || domString === null) {
        throw {error : "domString must have a value."};
    }
    if (domString.constructor.toString().match(/function (\w*)/)[1] !== "string") {
        if (domString.constructor.toString().match(/function (\w*)/)[1].match(/HTML[a-zA-Z]*Element/) === null) {
            throw {error : "domString expected to be String or domObjects"};
        }
    } else {
        if (jQuery(domString).length === 0) {
            throw {error : "domString does not resolve to a detectable domObjects."};
        }
    }
    //errorhandling

    //action
    if (domString.constructor.toString().match(/function (\w*)/)[1].match(/HTML[a-zA-Z]*Element/)) {
        //made as an array to normalize as jQuery returns an array allows code to be simplified
        domObjects = [domString];
    } else {
        domObjects = jQuery(domString);
    }

    //given that domObjects are an array need to step through the array
    for (index = domObjects.length - 1; index >= 0; index -= 1) {
        if (
            jQuery.inArray(
                domObjects[index].tagName.toLowerCase(),
                ['input', 'select', 'textarea']
            ) >= 0
        ) {
            if (domObjects[index].hasAttr('id')) {
                domObjects[index].val(value);
            } else {
                domObjects[index].attr('value', value);
            }
        } else {
            domObjects[index].html(value);
        }
    }
} 
```

以上通过 JSLint

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T16:34:42.070

我知道我没有为人们提供足够的背景来真正深入研究这个问题，但我最终解决了它。问题是什么？好吧，是@Kobi 首先询问 DOM 元素的 ID 是否唯一……我很高兴地向其报告。事实上，这就是问题所在。耶稣。总是让你陷入困境的那些显而易见的事情会被你忽略。

无论如何，感谢您的耐心和帮助。

# javascript - 如何在 .js 文件中的列表中创建列表，然后使用 jquery/javascript 选择随机列表项？

> ID：13701239
> 
> 赞同：0
> 
> 时间：2012-12-04T10:52:08.080
> 
> 标签：javascript, jquery, xhtml

（在 .js 文件中编码，而不是在 .html 的正文中）

所以，如果有一个列表：`category = ['a', 'b', 'c'];`

并且每个列表项都有自己不同的选择：

```
category[0] = ['long textstring1', 'longtextstring2', 'longtextstring3'];
category[1] = ['long textstring1', 'longtextstring2', 'longtextstring3'];
category[2] = ['long textstring1', 'longtextstring2', 'longtextstring3']; 
```

第一：如何在我的 .js 文件中的列表中写入列表？（猜测你不能像在一个身体里那样做`<ul>`，`<li>`等等）

第二：我如何随机生成a，b或c，然后在该列表中随机生成一个列表项？

当我有自己的选择时，我非常想在屏幕上打印出来。

/W

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:03:26.430

这可能会帮助您解决问题的第一部分，根据您的输入生成列表：

```
var category = ['a', 'b', 'c'];
category[0] = ['long textstring1', 'longtextstring2', 'longtextstring3'];
category[1] = ['long textstring1', 'longtextstring2', 'longtextstring3'];
category[2] = ['long textstring1', 'longtextstring2', 'longtextstring3'];

var container = document.getElementById("container");
for(var i = 0; i < category.length; i++)
{
    var list = document.createElement("ul");
    for(var j = 0; j < category[i].length; j++)
    {
        var listItem = document.createElement("li");
        var txt = document.createTextNode(category[i][j]);
        listItem.appendChild(txt);
        list.appendChild(listItem);
    }
    container.appendChild(list);
} 
```

[**JSF**](http://jsfiddle.net/T88bg/)中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:58:54.860

您可以像上面那样使用多维数组在列表中创建一个列表。然而，如果你想要一个像 -> [list] 这样的映射，你需要使用一个对象：

```
{"a": ['long textstring1'], "b": ['long textstring1']} 
```

如果您使用数组而不是对象来获取随机属性，实际上会更容易。例如：

```
var category = [['ls1', 'ls2'], ['ls1', 'ls2']]; 
```

然后你可以使用以下方法获得一个随机子列表：

```
var rand = category[Math.floor(Math.random() * (category.length + 1)) + min]; 
```

[关于如何从 JS 对象中获取随机属性有几个答案](https://stackoverflow.com/search?q=javascript%20random%20property)

# java - Line2D 和一个 JComponent 的交点和仿射变换

> ID：13701243
> 
> 赞同：0
> 
> 时间：2012-12-04T10:52:25.243
> 
> 标签：java, swing, computational-geometry, java-2d, line-intersection

好的

我有生产线和组件。组件本身是一个 JPanel。我在里面画形状。并将形状添加到容器中。这个形状可以是任何多边形。并在容器中绘制曲线（可以是 Line2D、CubicCurve2D 或 QuadCurve2D）。

现在我需要在容器上绘制一个箭头形状，以便在移动一条线时该箭头将跨越该形状。

可以有许多曲线线连接到形状的中心，具有不同的控制点。形状可以是任何正多边形。

至少我需要圆角矩形和图像下方曲线的交点。

编辑：我想确定曲线和任意正多边形的交点。给定多边形的宽度、高度、中心点以及线的起点、终点和控制点。

![在此处输入图像描述](../Images/ca921adbd45f075146cb95e7514b7fc0.png)

* * *

***编辑：我不能发布问题，所以我会编辑这个。****如何缩放 JComponents 和 Graphics 对象？如果应该使用 AffineTransform 完成，那么我应该如何转换*JComponents 上的事件点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:11:39.760

您可以使用`BasicStroke`和`getStrokedShape()`。设置厚度=例如 5 并获得 和 的描边`Polygon`形状`Line`。然后创建 2`Area`类基于 stoked 形状并获得 intersection `Shape`。

# node.js - 从 MongoDB+Node.js 获取数据到客户端 JavaScript

> ID：13701246
> 
> 赞同：3
> 
> 时间：2012-12-04T10:52:44.543
> 
> 标签：node.js, mongodb

如何使用 Node.js 连接到 MongoDB？然后将结果传递给客户端 JavaScript 并以 HTML 格式显示。

```
var http = require('http');
var URL = require('url');
var Db = require('mongodb').Db;
var Server = require('mongodb').Server;
var client = new Db('people', new Server("127.0.0.1", 27017, {}), { safe: false });

client.open(function (err, client) {
  client.collection('people', listAllData);
});

var listAllData = function (err, collection) {
  collection.find().toArray(function (err, results) {
    console.log(results);
  });
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:57:40.377

您应该使用 Mongoose - node.js 的优雅 mongodb 对象建模。[http://mongoosejs.com](http://mongoosejs.com)

快速入门指南真的很酷，您应该[阅读它](http://mongoosejs.com/docs/index.html)。

根据文档，这里有一个如何使用 Mongoose 的小例子：

```
var mongoose = require('mongoose');
var db = mongoose.createConnection('localhost', 'test');

var schema = mongoose.Schema({ name: 'string' });
var Cat = db.model('Cat', schema);

var kitty = new Cat({ name: 'Zildjian' });
kitty.save(function (err) {
  if (err) // ...
  console.log('meow');
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-22T11:39:04.010

我更喜欢 MongoJS 而不是 Mongoose，因为它使用 MongoDB 客户端语法 [https://github.com/gett/mongojs使用的相同语法](https://github.com/gett/mongojs)

```
// simple usage for a local db
var db = mongojs('mydb', ['mycollection']);

// the db is on a remote server (the port default to mongo)
var db = mongojs('example.com/mydb', ['mycollection']);

// we can also provide some credentials
var db = mongojs('username:password@example.com/mydb', ['mycollection']);

// connect now, and worry about collections later
var db = mongojs('mydb');
var mycollection = db.collection('mycollection'); 
```

然后就可以使用和 Mongo Client 一样的语法了

```
db.mycollection.find({}, function(err, docs) { ... });

db.mycollection.find({}).limit(2).skip(1, function(err, docs) { ... }); 
```

# flash - 生成大量位图时，位图创建全黑

> ID：13701248
> 
> 赞同：2
> 
> 时间：2012-12-04T10:53:02.717
> 
> 标签：flash, delphi, bitmap, delphi-7

我正在使用 Delphi 7，我必须从嵌入在我的 Delphi 应用程序中的 FlashMovie 生成大量位图。图片的清晰度为1010x720。

当我生成超过 6000 张图片（每次数量都不一样）时，我得到一个 EOutOfResources 异常。我环顾四周，似乎它可能来自缺乏可用的句柄。

这是代码：

```
var
FFlashPlayerControlExport:TFlashPlayerControl;
Bmp:TBitmap;
pPNG:TPNGObject;

begin
Bmp := FFlashPlayerControlExport.CreateFrameBitmap;
Bmp.Width := StrToInt(aArgs[5]);
Bmp.Height := StrToInt(aArgs[6]);

pPNG := TPNGObject.Create;
pPNG.Assign(Bmp);
pPNG.SaveToFile(sFileName);
pPNG.Free;

DeleteObject(Bmp.Handle);
Bmp.Free;
end; 
```

我在 Bmp.Free 之前尝试过 CloseHandle(Bmp.Handle)，但我得到了 EExternalException。

谢谢大家的帮助！

* * *

2012 年 12 月 6 日更新：

感谢 Arioch'The 的回答，我尝试直接设置 FFlashPlayerControlExport 的 Width 和 Height，而不是使用 Bmp.Width 和 Bmp.Height 它有帮助，因为现在我没有得到 EOutOfResources 异常，但是 CreateFrameBitmap 之后保存了一张全黑图片一会儿。

FlashPlayerControl 仍在运行，因为我在屏幕上看到了图片。

代码更新：

```
var
FFlashPlayerControlExport:TFlashPlayerControl;
Bmp:TBitmap;
pPNG:TPNGObject;

begin
FFlashPlayerControlExport.Width := StrToInt(aArgs[5]);
FFlashPlayerControlExport.Height := StrToInt(aArgs[6]);

Bmp := FFlashPlayerControlExport.CreateFrameBitmap;

pPNG := TPNGObject.Create;
pPNG.Assign(Bmp);
pPNG.SaveToFile(sFileName);
pPNG.Free;

Bmp.Free;
end; 
```

* * *

2012 年 12 月 20 日更新：

在联系 FlashPlayerControl 开发团队后，我发现当应用程序达到 10.000 个 GDI 对象时，位图会变黑。他们为我的问题提供了有效的帮助，与他们联系很有效:)

我最终发现 GDI 对象泄漏来自我代码的另一个并行部分。这个主题很接近:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:03:59.393

当错误代码使用由 TBitmap 创建的句柄时，可能无法正确清理句柄。此句柄泄漏累积，并且在几次此类泄漏`GetDC`开始失败后。

`EOutOfResource`异常的另一个原因是位图的尺寸错误。VCL 单元 Graphics 中的`CopyBitmap`函数调用 GDICheck，它总是引发`EOutOfResource`异常，但也调用 GetLastError 以给出更合适的错误消息。

~~根据`TPNGObject.Assign`工作方式，您应该在释放它之前调用`ReleaseHandle`或在位图上。`FreeImage`~~

[http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Graphics.TBitmap.ReleaseHandle](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Graphics.TBitmap.ReleaseHandle)

[http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Graphics.TBitmap.FreeImage](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Graphics.TBitmap.FreeImage)

 ~~**编辑：**

调用`ReleaseHandle`可能会使事情变得更糟，因为当没有人负责位图句柄时，它会导致句柄泄漏。

`FreeImage`通常不需要打电话，但在类似情况下只帮助过我一次。~~

# teamcity - TeamCity：如何在历史记录中显示参数

> ID：13701249
> 
> 赞同：2
> 
> 时间：2012-12-04T10:53:09.273
> 
> 标签：teamcity

我有 3 台用于 PROD 的服务器，具有相同的部署构建配置，我根据构建参数选择要部署的服务器。问题是查看历史记录您无法检查您正在部署哪个环境。

我想知道是否有可能使用以下解决方案之一： - 在构建历史记录中显示参数 - 使用参数自动标记构建

我希望我已经解释得足够好。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T20:07:59.760

您可以通过将相关参数回显到构建日志的命令行构建步骤来完成此操作。对于基于 Windows 的代理，您可以执行以下操作：

*   跑：`Executable with parameters`
*   可执行命令：`echo`
*   命令参数：`Deployed to server %your.server.host%`

这只会在构建日志中添加一行内容，`Deployed to server FOO`

自动标记会很酷，但我不知道如何做到这一点。

# sql-server - 在 SQL Server 表中添加图像

> ID：13701252
> 
> 赞同：0
> 
> 时间：2012-12-04T10:53:14.477
> 
> 标签：sql-server, database

嗨，我必须将图像路径添加到表中的列。我在本地文件夹中有图像文件。如何做到这一点？我不想将图像完全添加为二进制，我只想将图像路径添加到列中。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:54:39.103

只需将其保存为 a`VARCHAR(260)`然后您就可以从您正在使用/编写的任何程序中访问它。[由于marc_s的评论而编辑]

# android - 如何关闭edittext的android键盘弹出窗口，但我需要edittext下方的键盘

> ID：13701254
> 
> 赞同：0
> 
> 时间：2012-12-04T10:53:18.740
> 
> 标签：android, android-widget, keyboard

我需要键盘以`EditText`使其与我的重叠`EditText`，但我需要视图下方的键盘`EditText`。

```
 EDIT:
    finally i got the answer for this. we need to set 
      android:imeOptions="flagNoExtractUi" in `edittext` 
```

它隐藏了弹出窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:01:18.350

您将需要设置`android:windowSoftInputMode`或`android:windowSoftInputMode`为软键盘腾出空间而不隐藏 EditText

```
<activity android:windowSoftInputMode="adjustResize" /> 
```

或者

```
<activity android:windowSoftInputMode="adjustPan" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:59:01.470

`android:windowSoftInputMode="adjustPan"`您只需要在您`AndroidManifest`的`Activity`班级中设置此参数即可。

# drupal - 在两个区域中搜索表单？

> ID：13701261
> 
> 赞同：0
> 
> 时间：2012-12-04T10:53:37.120
> 
> 标签：drupal, drupal-blocks

Drupal 的新手，试图围绕 Blocks 概念进行思考。

我是否可以得出这样的结论：对于一个 ContentType，我不能在右侧（第二个侧边栏）使用 SearchForm，而对于另一个 ContentType，不能在左侧（第一侧边栏）使用 SearchForm？

我说的是标准 7(.17)，没有额外的模块或 PHP “hacks”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:06:34.383

标准 Drupal 只允许您指定块的位置一次。要实现您的目标，您需要考虑使用贡献的模块，如[Context](http://drupal.org/project/context)或[Panels](http://drupal.org/project/panels)。

过去个人使用过很多上下文。它非常强大，但使用起来相对简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:34:45.337

[此模块](http://drupal.org/project/multiblock)允许您创建一个块的多个实例，因此您可以复制一个块并将副本放在其他区域上。

# titanium - 在事件调用另一个具有新窗口的 js 文件

> ID：13701267
> 
> 赞同：0
> 
> 时间：2012-12-04T10:53:52.810
> 
> 标签：titanium

我在 Titanium 中开发示例 android 应用程序。在主窗口（app.js）上它有一些按钮，现在我想要的是点击每个按钮 app.js（主窗口）必须调用另一个 javascript 文件（他们将创建自己的新窗口。

```
but.addEventListener('click', function(e){

    call another .js file which will open new window
}) 
```

将不胜感激一些指导

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T00:51:43.907

这并不难。包括。参数。首先创建您的其他 .js 文件并创建一个函数，如下所示。

**另一个 .js 文件**：

```
exports.createNewWindow(params) {
    var window = Ti.UI.createWindow ({
        // ... Your stuff with your params
    });
    return window;
} 
```

您可以按如下方式调用此函数：

**第一个 .js 文件**

```
var window = require("pathToYouAnotherFile.js").createNewWindow({title:"xyz"});
window.open(); 
```

如果您愿意，可以在“another.js”文件中调用 window.open()。

玩得开心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:34:21.560

你应该学习合金。正如您所要求的，它将帮助您正确构建您的应用程序。

[http://projects.appcelerator.com/alloy/docs/Alloy-bootstrap/index.html](http://projects.appcelerator.com/alloy/docs/Alloy-bootstrap/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T18:24:43.417

我通过将一个事件从一个 JS 文件提升到另一个文件来处理这个问题。看一下 Ti.App.fireEvent('event',data) 来触发事件和 Ti.App.addEventListener 来接收事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-04T09:07:41.607

```
but.addEventListener('click', function(e){

var newwin=Ti.UI.createWindow({url:'another.js'});
 newwin.open();
}); 
```

它是一个简单的事件处理程序，我们在其中创建和打开一个窗口，然后打开。Url 是所需窗口的文件。

简单。干杯！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-10T09:12:52.060

var All = require('ui/common/All');

```
 Tree = require('ui/common/Tree');

    EBOM = require('ui/common/E-BOM');

    MBOM = require('ui/common/M-BOM');

    SBOM = require('ui/common/S-BOM');

//create object instance

var self = Ti.UI.createWindow({

    title:'Products',

    exitOnClose:true,

    navBarHidden:true,

    backgroundColor:'#ffffff',
    /////////////////////////////////////////////////////////////////////////////

    activity: {

        onCreateOptionsMenu: function(e) {

            var menu = e.menu;                        

            var menuItem = menu.add({ title: "C-BOM", icon: 'Arrow-Hover.jpg' });

            //menuItem.setIcon("Arrow-Hover.jpg");

            menuItem.addEventListener("click", function(e) {

                 var all = new All();

                        self.add(all);

            }); 
```

…………………………………………………………………………………………………………………………………………………………………………………… .....................

# objective-c - 为什么我们不能在类别中添加 iVar？

> ID：13701269
> 
> 赞同：1
> 
> 时间：2012-12-04T10:54:02.323
> 
> 标签：objective-c, xcode4.5

我想首先指出，实际上我们“可以”

只需使用关联对象：

```
@implementation UIButton (BGButtonWithImages)

static char UIB_ImageOfButton;

-(void)setImageObject:(Image *)imageObject
{
    objc_setAssociatedObject(self, &UIB_ImageOfButton, imageObject, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

-(Image*)imageObject
{
    return (Image*)objc_getAssociatedObject(self, &UIB_ImageOfButton);
}    
@end 
```

但这会导致另一个问题。为什么用关联对象可以轻松完成的事情却不能定期完成？为什么 Apple 不在这样的类别中实现属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T11:20:16.227

综合属性访问器使用实例变量。您不能通过类别添加实例变量，因为无法保证唯一性 - 相同的实例变量可能会被另一个类别添加。

正如您所注意到的，由[内向外对象模式](https://www.socialtext.net/perl5/inside_out_object)允许您在类别中定义访问器，只要关联对象表的键是唯一的。继续使用它很好。如果您想要第一方编译器支持生成这些访问器，您必须[询问 Apple](http://bugreport.apple.com)。

# asp.net-mvc - 在 Visual Studio 的解决方案中跨项目共享 web.config 中的变量

> ID：13701273
> 
> 赞同：0
> 
> 时间：2012-12-04T10:54:16.457
> 
> 标签：asp.net-mvc, visual-studio-2012

我有一个包含 3 个项目的解决方案：ASP.net MVC 4.0、共享库和 Web 服务项目。我想将 ASP.net mvc 项目中 Web.Config 的 appSettings 中的一些关键值分享给 Web 服务项目。我找到[了这个答案](https://stackoverflow.com/questions/4007572/is-it-possible-to-share-the-web-config-across-multiple-projects-in-a-solutiona)，但它现在对我有用。

谁能给我一些想法。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:13:08.803

您可以将该信息存储到一个 dll 中，以便在您的所有项目中共享：

创建一个新的类库项目：

例如，将您的课程命名为 MyConfiguration.cs

```
namespace CentralizedInformation
{
    public static class MyConfiguration
    {
        public static string Value1 = "Test string value 1";
        public static int Value2 = 2;
    }
} 
```

在您可以在所有项目中添加参考之后（项目 -> 添加参考 -> 浏览 -> 浏览到 CentralizedInformation.dll）

并将它添加到您的项目中（这里是一个 mvc 项目示例）

```
using CentralizedInformation;

//for asp net mvc project 
protected void Application_Start()
{
   string mySharedAccrossAllProjectsString = CentralizedInformation.MyConfiguration.Value1;
   //put it wherever you need it session or anything else
} 
```

Juste 在您的其他项目中引用相同的内容，您就完成了。当您想要更新数据时，还要重建您的项目......

该 dll 可能有一个配置文件，您可以以编程方式公开它的所有数据。

我承认做这么简单的事情是一种非常有趣和复杂的方式。但这是一种方式^^

# java - Vaadin - 适合组件的布局大小

> ID：13701275
> 
> 赞同：0
> 
> 时间：2012-12-04T10:54:22.093
> 
> 标签：java, vaadin

我有以下情况：*VerticalLayout*里面有*标签*。（此布局是弹出窗口的内部）
当我构建应用程序时，我不知道标签的长度 - 标签内容是从数据库中查询的。

有没有办法告诉这个*VerticalLayout*有足够的宽度来适应所有标签而不破坏它们，但不是更大？我不想破坏标签，但我也不想在弹出窗口中有空白。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T11:22:26.667

默认情况下，Vaadin 标签的宽度为 100%。您需要将其更改为“未定义”，对于 VerticalLayout 也是如此：在这两种情况下`setWidth(null)`或`setWidth(-1, UNIT_PIXELS)`

# spring - Spring 安全标签库

> ID：13701276
> 
> 赞同：3
> 
> 时间：2012-12-04T10:54:28.207
> 
> 标签：spring, security, exception, spring-security, taglib

我想在我的jsf项目中使用spring security taglibs，所以我对项目进行了以下更改，但我得到了这个异常：

> 部署期间发生错误：加载应用程序时出现异常：java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: java.lang.RuntimeException: com.sun.faces.config.ConfigurationException: java.lang .ClassNotFoundException：org.springframework.faces.security.FaceletsAuthorizeTagHandler。有关详细信息，请参阅 server.log。

我在这里做错了什么？我用 ：

> netbeans 7.1.2 --spring mvc 3.0.6--spring security 3.1.1--glassfish 3.1.2 和 jsf 2.1

**springsecurity.taglib.xml：**

```
 <!DOCTYPE facelet-taglib PUBLIC
  "-//Sun Microsystems, Inc.//DTD Facelet Taglib 1.0//EN"
  "http://java.sun.com/dtd/facelet-taglib_1_0.dtd">
<facelet-taglib>
    <namespace>http://www.springframework.org/security/tags</namespace>
    <tag>
        <tag-name>authorize</tag-name>
        <handler-class>org.springframework.faces.security.FaceletsAuthorizeTagHandler</handler-class>
    </tag>
    <function>
        <function-name>areAllGranted</function-name>
        <function-class>org.springframework.faces.security.FaceletsAuthorizeTagUtils</function-class>
        <function-signature>boolean areAllGranted(java.lang.String)</function-signature>
    </function>
    <function>
        <function-name>areAnyGranted</function-name>
        <function-class>org.springframework.faces.security.FaceletsAuthorizeTagUtils</function-class>
        <function-signature>boolean areAnyGranted(java.lang.String)</function-signature>
    </function>
    <function>
        <function-name>areNotGranted</function-name>
        <function-class>org.springframework.faces.security.FaceletsAuthorizeTagUtils</function-class>
        <function-signature>boolean areNotGranted(java.lang.String)</function-signature>
    </function>
    <function>
        <function-name>isAllowed</function-name>
        <function-class>org.springframework.faces.security.FaceletsAuthorizeTagUtils</function-class>
        <function-signature>boolean isAllowed(java.lang.String, java.lang.String)</function-signature>
    </function>
</facelet-taglib> 
```

**网页.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

<!--  /========================jsf config=============================/-->

  <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <context-param>
        <param-name>primefaces.THEME</param-name>
        <param-value>#{sessionManager.theme}</param-value>
    </context-param>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
     <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>
    <welcome-file-list>
        <welcome-file>/index.xhtml</welcome-file>
    </welcome-file-list>

  <!--  /========================spring config=============================/-->  

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/applicationContext.xml
            /WEB-INF/spring-security.xml
        </param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.FACELETS_LIBRARIES</param-name>
        <param-value>/WEB-INF/springsecurity.taglib.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
    <listener-class>
      org.springframework.security.web.session.HttpSessionEventPublisher
    </listener-class>
  </listener>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>
            org.springframework.web.filter.DelegatingFilterProxy
        </filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
        <dispatcher>REQUEST</dispatcher>
        <dispatcher>FORWARD</dispatcher>
    </filter-mapping>

</web-app> 
```

**我的页面.xhtml：**

```
xmlns:sec="http://www.springframework.org/security/tags"
.
.
.
<sec:authorize access="ROLE_SUPERADMIN">
      <h:outputText value="test" />                          
</sec:authorize> 
```

**我的库：**

```
 org.springframework.cglib-2.2   3.0.6.RELEASE
    org.springframework.aop 3.0.6.RELEASE
    org.springframework.asm 3.0.6.RELEASE
    org.springframework.aspects 3.0.6.RELEASE
    org.springframework.beans   3.0.6.RELEASE
    org.springframework.context 3.0.6.RELEASE
    org.springframework.context.support 3.0.6.RELEASE
    org.springframework.core    3.0.6.RELEASE
    org.springframework.expression  3.0.6.RELEASE
    org.springframework.instrument 3.0.6.RELEASE
    org.springframework.expression  3.0.6.RELEASE
    org.springframework.jdbc    3.0.6.RELEASE
    org.springframework.jms 3.0.6.RELEASE
    org.springframework.orm 3.0.6.RELEASE
    org.springframework.oxm 3.0.6.RELEASE
    org.springframework.test    3.0.6.RELEASE
    org.springframework.tx  3.0.6.RELEASE
    org.springframework.web 3.0.6.RELEASE
    org.springframework.webmvc-portlet  3.0.6.RELEASE
    org.springframework.webmvc  3.0.6.RELEASE
    org.springframework.struts  3.0.6.RELEASE
    commons-logging-1.1.1
    jsf 2.1-jsf-api
    jsf 2.1 -jsf-impl
    jstl 1.1-standard
    jstl 1.1-jstl
    spring-security-ldap-3.1.1.RELEASE.jar
    spring-security-config-3.1.1.RELEASE.jar
    spring-security-core-3.1.1.RELEASE.jar
    spring-security-taglibs-3.1.1.RELEASE.jar
    spring-security-web-3.1.1.RELEASE.jar 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-04T14:44:12.867

您将需要包含[spring-faces](http://search.maven.org/remotecontent?filepath=org/springframework/webflow/spring-faces/2.3.1.RELEASE/spring-faces-2.3.1.RELEASE.jar)以便将 spring 安全标签与面集成。如果您使用的是 maven，那么建议添加[依赖](http://search.maven.org/#browse%7C1516720195)项，因为这可能会有 jar 依赖项。

# c - Char作为C中的小数分隔符

> ID：13701284
> 
> 赞同：0
> 
> 时间：2012-12-04T10:54:58.580
> 
> 标签：c, decimal, separator

我编写了一个从字符串中提取双精度的函数。就像 asfas123123afaf 到 123123 或 afafas12312.23131asfa 到 12312.23131 一样，使用点作为小数分隔符。

这是代码：

```
double get_double(const char *str, char sep)
{

    char str_dbl[80]; 
    size_t i,j; 
    char minus; 
    double dbl; 

    for (minus = 1, i = j = 0; i < strlen(str); ++i) 
    { 

        if ( 
            (str[i] == '-' && minus) 
            || (str[i] >= '0' && str[i] <= '9') 
            || (str[i] == 'e' || str[i] == 'E') 
            ) 
        { 
            str_dbl[j++] = str[i]; 
            minus = 0; 
        } 
    } 
    str_dbl[j] = '\0';       

    dbl = strtod (str_dbl,NULL); 

    return dbl; 

} 
```

但是现在我想从 ASCII 字符中设置一个用户定义的逗号分隔符 (char sep)（没有 E 或 e，它们是 ^10 的文字）。我怎么能实现它？

让我对此进行说明：我们说分隔符是 ',' 所以字符串是 123123asfsaf,adsd,as.1231 它应该以双精度返回 123123,1231。它识别第一个“，”（从左至右）并忽略所有其他。

我真的很难找到解决这个问题的方法。我曾考虑过 setlocale ，但它似乎不是最好的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:27:40.030

您可以`,`在`.`执行`strtod`.

如果您出于某种原因不想修改源字符串，请先将其复制到新字符串中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T10:59:09.960

好吧，我知道 using`String.Split`会做这种事情，但我认为您应该编写自己的函数，因为它在找到第一个函数时会停止。

这是 msdn 网站以获得更多帮助

[MSDN 拆分](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:05:38.813

您可以简单地扩展您的代码：

```
if ( 
            (str[i] == '-' && minus) 
            || (str[i] >= '0' && str[i] <= '9') 
            || (str[i] == 'e' || str[i] == 'E') 
            ) 
```

至

```
char separator = ','; //or whatever you want
int have_separator = 0;

if ( 
            (str[i] == '-' && minus) 
            || (str[i] >= '0' && str[i] <= '9') 
            || (str[i] == 'e' || str[i] == 'E') 
            || str[i] == separator
            ) 
{ 
  if (str[i] == separator && have_separator == 0)
  {
    have_separator = 1;
    str_dbl[j++] = str[i];
    continue;
  }
... 
```

请注意，这只是一些尝试展示这个想法 - 不是真正的工作代码（但它无论如何都可以工作）。您可以使用类似的概念。

# mysql - Ruby Gem LoadError mysql2/mysql2 required

> ID：13701287
> 
> 赞同：5
> 
> 时间：2012-12-04T10:55:18.243
> 
> 标签：mysql, ruby, gem, rvm

我试图在 OSX 10.8 上设置我的 rails 服务器，但我无法让我的 rails 服务器运行。
- 目前我正在使用带有 mysql 5.1 的 Zend 服务器。
- 我也安装了`brew`和`brew mysql`。
- 我用过：
`gem install mysql2 -- --srcdir=/usr/local/mysql/include --with-opt-include=/usr/local/mysql/include`
**服务器已经工作了，但现在，我总是在下面得到这个 loadError。**

这就是我的 Gemfile 所说的：

```
ralphs-macbook-pro:admin-mockup zero$ bundle install
Using rake (10.0.2) 
Using i18n (0.6.1) 
Using multi_json (1.3.7) 
Using activesupport (3.2.7) 
Using builder (3.0.4) 
Using activemodel (3.2.7) 
Using erubis (2.7.0) 
Using journey (1.0.4) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.2) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.1.3) 
Using actionpack (3.2.7) 
Using mime-types (1.19) 
Using polyglot (0.3.3) 
Using treetop (1.4.12) 
Using mail (2.4.4) 
Using actionmailer (3.2.7) 
Using arel (3.0.2) 
Using tzinfo (0.3.35) 
Using activerecord (3.2.7) 
Using activeresource (3.2.7) 
Using annotate (2.5.0) 
Using coffee-script-source (1.4.0) 
Using execjs (1.4.0) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.2) 
Using json (1.7.5) 
Using rdoc (3.12) 
Using thor (0.16.0) 
Using railties (3.2.7) 
Using coffee-rails (3.2.2) 
Using columnize (0.3.6) 
Using debugger-ruby_core_source (1.1.5) 
Using debugger-linecache (1.1.2) 
Using debugger (1.2.2) 
Using formtastic (2.2.1) 
Using haml (3.1.7) 
Using haml-rails (0.3.5) 
Using hirb (0.7.0) 
Using hpricot (0.8.6) 
Using jquery-rails (2.1.4) 
Using kgio (2.7.4) 
Using mysql2 (0.3.11) 
Using php_serialize (1.2) 
Using polyamorous (0.5.0) 
Using rabl (0.7.8) 
Using railroady (1.1.0) 
Using bundler (1.2.3) 
Using rails (3.2.7) 
Using raindrops (0.10.0) 
Using randumb (0.3.0) 
Using sass (3.2.3) 
Using sass-rails (3.2.5) 
Using squeel (1.0.13) 
Using uglifier (1.3.0) 
Using unicorn (4.4.0) 
Your bundle is complete! Use `bundle show [gemname]` to see where a bundled
gem is installed. 
```

而且开始后`rails s`

```
/Users/zero/.rvm/gems/ruby-1.9.3-p327/gems/mysql2-0.3.11/lib/mysql2.rb:9:in `require': cannot load such file -- mysql2/mysql2 (LoadError)
from /Users/zero/.rvm/gems/ruby-1.9.3-p327/gems/mysql2-0.3.11/lib/mysql2.rb:9:in `<top (required)>'
from /Users/zero/.rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `require'
from /Users/zero/.rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.3/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
from /Users/zero/.rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `each'
from /Users/zero/.rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.3/lib/bundler/runtime.rb:66:in `block in require'
from /Users/zero/.rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `each'
from /Users/zero/.rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.3/lib/bundler/runtime.rb:55:in `require'
from /Users/zero/.rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.3/lib/bundler.rb:128:in `require'
from /Users/zero/GitHub/admin-mockup/config/application.rb:7:in `<top (required)>'
from /Users/zero/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.7/lib/rails/commands.rb:53:in `require'
from /Users/zero/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.7/lib/rails/commands.rb:53:in `block in <top (required)>'
from /Users/zero/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.7/lib/rails/commands.rb:50:in `tap'
from /Users/zero/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.7/lib/rails/commands.rb:50:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:02:38.610

检查此解决方案：

*   [http://railsforum.com/viewtopic.php?id=50501](http://railsforum.com/viewtopic.php?id=50501)
*   [rake db:migrate 给 mysql2 错误](https://stackoverflow.com/questions/6737535/rake-dbmigrate-giving-error-for-mysql2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:26:42.927

之后我改变了我的 database.yml 如下：

```
development:
  adapter: mysql2
  socket: /usr/local/zend/mysql/tmp/mysql.sock
  #host: 127.0.0.1 
```

这样我就使用了本地的zend MySQL套接字。在我的情况下，““无法连接到 '127.0.0.1' (61) (Mysql2::Error) 上的 MySQL 服务器”消失了。

谢谢@dinnouti 上面有用的链接。

# php - PHP – 慢速字符串操作

> ID：13701290
> 
> 赞同：11
> 
> 时间：2012-12-04T10:55:20.907
> 
> 标签：php, string, performance

我有一些非常大的数据文件，出于业务原因，我必须进行大量的字符串操作（替换字符和字符串）。这是不可避免的。替换的数量达到数十万。

它花费的时间比我想要的要长。PHP 通常非常快，但我正在做很多这样的字符串操作，以至于它变慢了，并且脚本执行需要几分钟。这很痛苦，因为脚本经常运行。

我做了一些测试，发现**str_replace**最快，其次是**strstr**，其次是**preg_replace**。我还尝试了单独的 str_replace 语句以及构造模式和替换数组。

我正在玩弄隔离字符串操作操作并用不同的语言编写的想法，但我不想花时间在那个选项上，只是发现改进可以忽略不计。另外，我只知道 Perl、PHP 和 COBOL，所以对于任何其他语言，我都必须先学习它。

我想知道其他人是如何解决类似问题的？

我已经搜索过，我认为这不会重复任何现有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:02:16.803

好吧，考虑到在 PHP 中某些字符串操作比数组操作要快，而且您仍然对它的速度不满意，您可以按照您提到的那样编写外部程序，可能使用一些“低级”语言。我会推荐 C/C++。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:11:27.230

有两种处理方法，IMO：

*   *[简单]*在后台进程中预先计算一些通用替换并将它们存储在数据库/文件中（这个技巧来自一个游戏开发，其中所有的正弦和余弦都预先计算一次，然后存储在 RAM 中）。但是，您很容易在这里遇到维度灾难；
*   *[不太容易]*用 C++ 或其他快速且可编译的编程语言实现替换工具，然后使用它。[Sphinx](http://sphinxsearch.com/)是用 C++ 实现的大型文本数据集的快速操作工具的一个很好的例子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T11:12:04.953

如果您允许在多次执行中处理替换，您可以创建一个处理每个文件的脚本，临时创建具有重复内容的替换文件。这将允许您将数据从一个文件提取到另一个文件，处理副本 - 然后合并更改，或者如果您使用流缓冲区，您可能能够记住每一行，因此可以跳过复制/合并步骤。

但问题可能是您处理文件而不完成它，使其混合。因此临时文件是合适的。

这将允许脚本运行多次，仍然需要进行更改，您所需要的只是一个临时文件，该文件记住已处理的文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T11:19:20.350

限制因素是关于 PHP 重建字符串。考虑：

```
$out=str_replace('bad', 'good', 'this is a bad example'); 
```

在字符串中定位 'bad' 是一种成本相对较低的操作，但为了为替换腾出空间，PHP 必须向上移动每个字符 e、l、p、m、a、x、e、写入新值之前的空格。

为 needle 和 haystack 传递数组将提高性能，但效果不如预期。

AFAIK，PHP 没有低级内存访问功能，因此必须用不同的语言编写最佳解决方案，将数据分成“页面”，可以拉伸以适应变化。您可以尝试使用 chunk_split 将字符串分成更小的单元（因此每次替换需要更少的内存处理）。

另一种方法是将其转储到文件中并使用 sed （这仍然一次操作一个搜索/替换），例如

```
sed -i 's/good/bad/g;s/worse/better/g' file_containing_data 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-06T09:23:45.423

由于您了解 Perl，我建议您使用正则表达式在 perl 中进行字符串操作，并在 PHP 网页中使用最终结果。

这似乎更好，原因如下

1.  你已经知道 Perl
2.  Perl 更好地处理字符串

您可以仅在必要时使用 PHP。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-06T04:20:27.950

我认为问题是你为什么经常运行这个脚本？您是一遍又一遍地对相同的数据执行计算（*字符串替换*），还是每次都对不同的数据执行计算？

如果答案是前者，那么在 PHP 端提高性能就没有什么可做的了。您可以通过其他方式提高性能，例如使用更好的硬件（SSD 用于更快地读取/写入文件）、多核 CPU 以及将数据分解为同时运行多个脚本以同时处理数据的小块，以及更快的 RAM （即*更高的总线速度*）。

如果答案是后者，那么您可能需要考虑使用诸如 memcached 或 reddis（键/值缓存存储）之类的东西来缓存结果，以便您只能执行一次计算，然后它只是从内存中线性读取，这非常便宜且几乎不涉及 CPU 开销（*您也可以在此级别使用 CPU 缓存*）。

PHP 中的字符串操作已经很便宜了，因为 PHP 字符串本质上只是字节数组。在将文件读入内存并将其存储在字符串中时，PHP 几乎没有任何开销。如果您有一些示例代码来演示您在哪里看到性能问题和一些基准数字，我可能会有一些更好的建议，但现在看起来您需要根据您的潜在需求重构您的方法。

例如，当您在不同情况下处理数据时，需要单独考虑 CPU 和 I/O 成本。I/O 涉及阻塞，因为它是一个系统调用。这意味着您的 CPU 必须等待更多数据通过线路（同时您的磁盘将数据传输到内存）才能继续处理或计算该数据。你的 CPU 总是比内存快得多，而内存总是比磁盘快得多。

这是一个简单的基准来向您展示差异：

```
/* First, let's create a simple test file to benchmark */
file_put_contents('in.txt', str_repeat(implode(" ",range('a','z')),10000));

/* Now let's write two different tests that replace all vowels with asterisks */

// The first test reads the entire file into memory and performs the computation all at once

function test1($filename, $newfile) {
    $start = microtime(true);
    $data = file_get_contents($filename);
    $changes = str_replace(array('a','e','i','o','u'),array('*'),$data);
    file_put_contents($newfile,$changes);
    return sprintf("%.6f", microtime(true) - $start);
}

// The second test reads only 8KB chunks at a time and performs the computation on each chunk

function test2($filename, $newfile) {
    $start = microtime(true);
    $fp = fopen($filename,"r");
    $changes = '';
    while(!feof($fp)) {
        $changes .= str_replace(array('a','e','i','o','u'),array('*'),fread($fp, 8192));
    }
    file_put_contents($newfile, $changes);
    return sprintf("%.6f", microtime(true) - $start);
} 
```

上面的两个测试做同样的事情，但是当我使用更少量的数据（*在这个测试中大约 500KB ）时，* **Test2**对我来说明显更快。

 *这是您可以运行的基准测试...

```
// Conduct 100 iterations of each test and average the results
for ($i = 0; $i < 100; $i++) {
    $test1[] = test1('in.txt','out.txt');
    $test2[] = test2('in.txt','out.txt');
}
echo "Test1 average: ", sprintf("%.6f",array_sum($test1) / count($test1)), "\n",
     "Test2 average: ", sprintf("%.6f\n",array_sum($test2) / count($test2)); 
```

对我来说，上面的基准测试给出了`Test1 average: 0.440795`and `Test2 average: 0.052054`，这是一个数量级的差异，这只是对 500KB 的数据进行测试。现在，如果我将此文件的大小增加到大约 50MB，**Test1**实际上证明会更快，因为每次迭代的系统 I/O 调用更少（即*我们只是在 Test1 中线性地从内存中读取*），但更多的 CPU 成本（即*我们每次迭代执行更大的计算*）。事实证明，CPU 一次能够处理比 I/O 设备通过总线发送的数据量大得多的数据。

因此，在大多数情况下，这不是一个万能的解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-06T21:14:16.350

这种操纵必须即时发生吗？如果没有，我可以建议预处理......也许通过cron作业。

定义您将使用的规则。它只是一个 str_replace 还是几个不同的？你必须一次性完成整个文件吗？或者你能把它分成多批吗？（例如一次一半的文件）

一旦定义了规则，就决定何时进行处理。（例如每个人上班前的早上 6 点）

然后你可以设置一个作业队列。我已经使用 apache 的 cron 作业在给定的时间安排上运行我的 php 脚本。

对于我不久前从事的一个项目，我有一个这样的设置：

```
7:00 - pull 10,000 records from mysql and write them to 3 separate files.
7:15 - run a complex regex on file one.
7:20 - run a complex regex on file two.
7:25 - run a complex regex on file three.
7:30 - combine all three files into one.
8:00 - walk into the metting with the formatted file you boss wants. *profit* 
```

希望这可以帮助您思考...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-04T11:12:03.140

如果您只需执行一次此操作并且必须替换为静态内容，您可以使用 Dreamwaver 或其他编辑器，因此您不需要 PHP。它会快得多。

尽管如此，如果您确实需要使用 PHP 动态执行此操作（您需要数据库记录或其他），您可以通过[exec](http://php.net/exec)使用 shell 命令- [google search for search-replace](https://www.google.com/search?q=shell%20command%20for%20string%20replace)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-05T23:02:21.840

有可能你已经用 PHP 碰壁了。PHP 很棒，但在某些领域它失败了，例如处理大量数据。你可以做几件事：

1.  使用多个 php 进程来完成任务（2 个进程可能需要一半的时间）。
2.  安装更快的 CPU。
3.  在多台机器上进行处理。
4.  使用编译语言处理数据（Java、C、C++ 等）*

# c++ - 重载取消引用运算符（运算符*（））

> ID：13701291
> 
> 赞同：2
> 
> 时间：2012-12-04T10:55:22.250
> 
> 标签：c++, overloading, operator-keyword, dereference

这是我班级中的运算符定义：

```
T& operator*(){
        return this->element_; 
} 
```

当我这样使用它时，它被称为：

```
std::cout << n->operator*() << std::endl; 
```

如果我尝试，它不会：

```
std::cout << *n << std::endl; 
```

任何的想法 ？

提前致谢，

热雷米

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T10:57:09.020

看起来`n`本身就是一个指针，所以你需要`**n`

# php - 使用 PHP / jQuery 强制下载

> ID：13701297
> 
> 赞同：0
> 
> 时间：2012-12-04T10:55:37.020
> 
> 标签：php, jquery, ajax, download

我知道已经有很多关于使用 PHP 强制下载的问题，但我找不到我做错了什么以及我应该怎么做。

我有一个包含文件名的列表，我想通过单击按钮下载其中一个。

我的 jQuery：

```
$(".MappeDownload").on("click",function(e){
            e.stopPropagation();
            fileId=$(this).val()
            $.post("ajax/DownloadFile.php",{ id : fileId})
}) 
```

在服务器端，我有一个包含文件名和文件路径的表。

```
$sql = "SELECT vUploadPfad, vUploadOriginname  FROM tabUpload WHERE zUploadId='$_POST[id]'";
$result =  mysql_query($sql) or die("");
$file = mysql_fetch_array($result);
$localfile = $file["vUploadPfad"];
$name=$file["vUploadOriginname"];
$fp = fopen($localfile, 'rb');
        header("Cache-Control: ");   
        header("Pragma: ");         
        header("Content-Type: application/octet-stream");
        header("Content-Length: " . filesize($localfile));
        header("Content-Disposition: attachment; filename='".$name."';");
        header("Content-Transfer-Encoding: binary\n");
        fpassthru($fp);
        exit; 
```

AJAX 请求成功，我得到了正确的标题（文件大小、文件名等），但下载没有开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T10:59:54.090

您不需要ajax，只需重定向到强制下载的地址。该页面不会因此而改变，而不是`$.post("ajax/DownloadFile.php",{ id : fileId})`您应该拥有`location.href = "ajax/DownloadFile.php?id="+fileId`，并且在您的 PHP 文件中，将您的 $_POST 转换为 $_GET

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:00:54.217

对 AJAX 请求的响应永远不会触发下载。AJAX 请求在后台静默处理，它们从不直接触发可见活动。

您需要重定向主页或 iframe 以触发下载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:02:27.657

1.  在ajax中返回文件名
2.  做`window.location.href = 'returned file name'`和下载将开始！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-04T18:22:27.803

有我的解决方案：

```
<script>
//downloading the file

 $(document).on('click', '.download_file', function(){
  var path = $(this).data("name");
  var action = "download_file"

    $.ajax({
        url: "action.php",
        method: "POST",
        data: {path:path, action:action},
        success: function(data)
        {
            window.location.href = path;
        }
      })
})
</script> 
```

和**action.php**

```
<button  type"button" name="download" data-name="'.$name.'" class="download_file btn btn-success btn-xs">Pobierz</button></td>' 
```

# irc - 如何向 IRC 频道中的所有用户发送私信？

> ID：13701298
> 
> 赞同：1
> 
> 时间：2012-12-04T10:55:36.737
> 
> 标签：irc

如何以一种相当自动化的方式向 IRC 频道中房间中的所有用户发送相同的私人消息，即不必为所有用户逐一手动执行，也不必在频道房间中发布消息。明智地使用，当然。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T18:42:19.980

正如您在描述 IRC 协议的[RFC 1459](https://www.rfc-editor.org/rfc/rfc1459#section-4.4.1)中所见，**私人消息在技术上与通道消息没有区别**。两者都是`PRIVMSG` 命令的结果。

该`PRIVMSG`命令允许任何客户端使用以下语法向多个收件人发送消息：

1.  `PRIVMSG foo,bar[,anon] :Hi there`为用户
2.  `PRIVMSG #help,#home[,#irc] :Hi there`对于频道
3.  这也应该混合使用。

所以基本上，单个目标必须是渠道或用户。

据我所知，没有办法做到这一点，因为每个目标都必须在命令的第一个*参数*中定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T17:07:12.750

这取决于您的网络。一些网络支持 wallmsg，它在许多 IRC 客户端上工作，作为给用户的私人消息。这是在 efnet 上实现的，例如通过向@#channel 发送消息，然后将消息分发给所有通道操作。同样使用 + 向所有语音用户发送消息。不幸的是，这不适用于非操作/语音用户。这通过做`PRIVMSG @#channel :Hi!`

为了能够以自动化方式做到这一点，您需要编写一个简单的脚本（无法帮助您，您还没有说明您的客户）循环所有用户，然后向他们发送一个 PRIVMSG一种或在群发消息模式下，您可以用逗号（并且没有空格）分隔用户，例如`PRIVMSG user1,user2,user3 :message`.

您很可能想要后一种选择。不过要小心你的洪水阈值！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-17T16:42:59.120

```
You could add a line to your mirc popups nick list

...message all selected {%i = 0 | %nicks = "" | :nextnick | inc %i | if ($snick(#,%i) == $null) { if ($len(%nicks) > 0) /msg  %nicks $$?="message " | halt } | %nicks = %nicks $snick(#,%i) | if (4 // %i) { /msg  %nicks $$?="message " | %nicks = "" } | goto nextnick | } 
```

我在我的网络上使用它以及 op all 和 deop all 或 kick all

# c++ - 无法访问私有函数

> ID：13701299
> 
> 赞同：0
> 
> 时间：2012-12-04T10:55:39.387
> 
> 标签：c++, private-methods

```
 //**** Build of configuration Debug for project Calculator ****

   **** Internal Builder is used for build               ****
g++ -O0 -g3 -Wall -c -fmessage-length=0 -o src\Calculator.o ..\src\Calculator.cpp
..\src\/Calculator.h: In function 'std::ostream& operator<<(std::ostream&, CComplex)':
   ..\src\/Calculator.h:38:9: error: 'float CComplex::m_imaginary' is private
  ..\src\Calculator.cpp:79:8: error: within this context
     ..\src\/Calculator.h:37:9: error: 'float CComplex::m_real' is private
   ..\src\Calculator.cpp:81:12: error: within this context
       ..\src\/Calculator.h:38:9: error: 'float CComplex::m_imaginary' is private
        ..\src\Calculator.cpp:81:31: error: within this context
     ..\src\/Calculator.h:37:9: error: 'float CComplex::m_real' is private
       ..\src\Calculator.cpp:85:12: error: within this context
         ..\src\/Calculator.h:38:9: error: 'float CComplex::m_imaginary' is private
       ..\src\Calculator.cpp:85:31: error: within this context
Build error occurred, build is stopped
Time consumed: 687  ms. 
```

任何人都可以帮助我 - 我正在尝试访问不接受访问的私人功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T10:59:55.947

好吧，如果不是这样，那么这将是一个很好的问题。

* * *

> 在类成员列表之前，private 关键字指定这些成员只能从类的成员函数和朋友访问。这适用于声明到下一个访问说明符或类末尾的所有成员。

成员函数不可访问，因为您正试图从类外部访问它。如上所述，private 关键字用于防止这种情况发生。

如果您确实需要从类外部访问，那么您需要使用 public 关键字使其成为公共方法。

在此处查看有关 private 关键字的[一些示例和说明。](http://msdn.microsoft.com/en-us/library/zfbte35d%28v=vs.71%29.aspx)

* * *

看着你的错误，我认为问题在于你重载了 operator<< 。运算符只能作为友元函数重载，它本身应该可以解决您的问题。

`friend std::ostream& operator<<(std::ostream&, CComplex);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T13:41:14.897

你可能想成为班上`operator<<`的朋友。`CComplex`像这样的东西：

```
class CComplex {
    ...
    // It doesn't matter whether this declaration is on a private, 
    // public or protected section of the class. The friend function
    // will always have access to the private data of the class.
    friend std::ostream& operator<<(std::ostream&, CComplex);
}; 
```

# java - Maven WebApp META-INF context.xml

> ID：13701300
> 
> 赞同：15
> 
> 时间：2012-12-04T10:55:43.963
> 
> 标签：java, tomcat, maven, web-applications

我正在使用 Maven 3，我正在尝试在 webapp 文件夹下添加 META-INF 文件夹。所以我正在尝试执行以下操作：

```
src
 main
  webapp
   META-INF
    context.xml
   WEB-INF 
```

以下是我的 POM 文件：

```
<?xml version="1.0"?>
<project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd" xmlns="http://maven.apache.org/POM/4.0.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<modelVersion>4.0.0</modelVersion>
<groupId>com.data</groupId>
<artifactId>Java-WebApp</artifactId>
<version>0.0.1-SNAPSHOT</version>
<packaging>war</packaging>

<name>Java-Web Application</name>

<!-- Shared version number properties-->
<properties>
<org.springframework.version>3.0.6.RELEASE</org.springframework.version>
</properties>

<dependencies>
<dependency>
    <groupId>junit</groupId>
    <artifactId>junit</artifactId>
    <version>3.8.1</version>
    <scope>test</scope>
  </dependency>
 </dependencies>
<build>
<finalName>data</finalName>
</build>

<parent>
<groupId>com.data</groupId>
<artifactId>Java-Parent</artifactId>
<version>0.0.1-SNAPSHOT</version>
</parent>
</project> 
```

在 src/main/resources 我添加了一个 META-INF\context.xml。当使用 mvn package 打包 WAR 文件时，结构如下所示：

```
data
 webapp
  META-INF
  WEB-INF
  index.jsp 
```

可以看到WEB-INF下的相关文件。但是，META-INF 文件夹是空白的。我的默认 Maven 将在 WEB-INF/classes 下添加资源。

我想特别想拥有：

```
data
 webapp
  META-INF
   context.xml
  WEB-INF 
```

这怎么可能？我已经尝试过其他的东西，但它仍然不起作用。context.xml 包含以下内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context path="/data1"/> 
```

我尝试从 src\main\resources 中删除 META-INF 文件夹，并直接将其放在 webapp\META-INF 下。context.xml 显示，但是当部署到 Tomcat 中时，我定义的上下文根不起作用。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-04T11:24:48.887

将 META-INF 文件夹放在 src/main/resources 中。

把它放在你的 pom.xml 上……抱歉我之前错过了；

```
<build>
<plugins>
    <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>3.0.0</version>
            <configuration>

                <archive>
                    <manifest>
                        <addClasspath>true</addClasspath>
                        <classpathPrefix>lib/</classpathPrefix>
                    </manifest>
                </archive>

                <webResources>
                    <resource>
                        <!-- this is relative to the pom.xml directory -->
                        <directory>${project.basedir}/src/main/resources
                        </directory>

                    </resource>
                </webResources>

                <warName>mywar</warName>
            </configuration>
        </plugin>
</plugins>
</build> 
```

网络资源标签很重要......希望这会有所帮助

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-08-26T15:06:24.290

请改用标签。上面的答案使用将 src/main/resources 中的所有内容复制到您的 Web 应用程序的根目录，这可能不是您想要做的，也不是您想要遵循的示例。

# c# - WPF 窗口的高度没有改变

> ID：13701303
> 
> 赞同：0
> 
> 时间：2012-12-04T10:55:49.950
> 
> 标签：c#, wpf

我有 wpf 窗口，因为我采用了 rowdefinition 并且它在设计器中的高度为零。现在在那个窗口中有一个按钮，在按钮单击事件中，我动态更改了 rowdefition 的高度，从而改变了窗口的高度。但是在运行应用程序后，如果我拖动该窗口并单击该按钮，则无法动态更改窗口的高度。但是如果我不拖动窗口，那么窗口的高度可以改变，在拖动窗口场景中会出现什么问题？

这些是我为窗口设置的属性。

```
MinWidth="400"  CanDrag="True" ShowStatusBar="False" CanResize="True" 
```

设计器中的行定义：

```
<Grid>
        <Grid.RowDefinitions>
            <RowDefinition x:Name="rowMapping" Height="0"/>
        </Grid.RowDefinitions>
</Grid> 
```

这就是我在后面的代码中更改行定义高度的方式。

```
rowMapping.Height = new GridLength(420); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:46:08.110

尝试设置`SizeToContent="Height"`窗口的属性。我还会尝试将 RowDefinition 的高度设置为 auto，然后为其内容（例如网格）指定高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:11:27.263

即使我遇到了这个问题，我也不知道发生这种情况的确切原因。但是通过设置 Grid.Row/Colomn 定义高度或宽度动态地解决了我的问题。希望这也能解决你的问题。

```
<Grid.RowDefinitions>
            <RowDefinition x:Name="RowDefName" MinHeight="200" />                
</Grid.RowDefinitions> 
```

后面的代码：

```
RowDefName.Height = new GridLength(1.0, GridUnitType.Star);or   
RowDefName.Height = new GridLength(1.0, GridUnitType.Auto);or
RowDefName.Height = new GridLength(300, GridUnitType.Pixel); 
```

并且控件放置在这一行。

# javascript - 动态表单字段随 javascript 变化

> ID：13701304
> 
> 赞同：0
> 
> 时间：2012-12-04T10:55:54.630
> 
> 标签：javascript, html, html-parsing

嗨！我是网络开发的新手，只是停留在一个点上。我有一个表单，其中一个下拉菜单生成 2 个字段。现在的问题是我已经生成了一个字段并试图获得另一个字段但由于缺乏知识我被卡住了。如果有人可以，我只需要一点帮助

```
<form name="myform">
    <select name="optone" size="1" onchange="setOptions(document.myform.optone.options[document.myform.optone.selectedIndex].value);">
        <option value=" " selected="selected"> </option>
        <option value="1">Directory Submission</option>
        <option value="2">Articale Submission</option>
        <option value="3">Social Bookmarking</option>
        <option value="4">Blog Commenting</option>
        <option value="5">Forum Submission</option>
        <option value="6">Link Building</option>
    </select>
    No. Of Submissions: <select name="opttwo" size="1">
        <option value=" " selected="selected">Select any option of the above first</option>
    </select>
    Amount Payable:
</td>
<td>
    <input type="text" name="amount" onchange="document.myform.opttwo.options[document.myform.opttwo.selectedIndex].value;" /> 
```

现在我的javascript是这样的：

```
function setOptions(chosen) {
    var selbox = document.myform.opttwo;
    selbox.options.length = 0;
    if (chosen == " ") {
        selbox.options[selbox.options.length] = new Option('Please select one of the options above first',' ');
    }
    if (chosen == "1") {
        selbox.options[selbox.options.length] = new Option('100 Directory Submission', '$9.99');
        selbox.options[selbox.options.length] = new Option('100 Directory Submission', '$9.99');
        selbox.options[selbox.options.length] = new Option('300 Directory Submission','$29.99');
    }

    // and like this other options will come too.
} 
```

我只想知道应付金额字段如何获得金额。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:32:27.370

你的意思是

[演示](http://jsfiddle.net/mplungjan/7bQee/)

```
function setOptions(chosen) {
    var selbox = document.myform.opttwo;
    selbox.options.length = 1; // no need to delete the first option
    if (chosen == "1") {
        selbox.options[selbox.options.length] = new Option('100 Directory Submission', '$9.99');
        selbox.options[selbox.options.length] = new Option('100 Directory Submission', '$9.99');
        selbox.options[selbox.options.length] = new Option('300 Directory Submission','$29.99');
    }
    document.myform.amount.value="";
    // and like this other options will come too.
}​ 
```

使用此代码

```
 <select name="opttwo" size="1" onchange="this.form.amount.value=this.value;">
        <option value=" " selected="selected">Select any option of the above first</option>
      </select>
      Amount Payable:
   </td>
   <td>
     <input type="text" name="amount" readonly="readonly" /> 
```

# c# - 在 Windows 8 上访问 App.Config 的路径被拒绝。如何更新 App.Config？

> ID：13701306
> 
> 赞同：2
> 
> 时间：2012-12-04T10:56:00.983
> 
> 标签：c#, configuration, windows-8, app-config, permission-denied

以下代码适用于 Windows XP 和 Windows 7：

```
var config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
config.AppSettings.Settings.Remove(key);
config.AppSettings.Settings.Add(key, value);
config.Save(ConfigurationSaveMode.Modified); // fails here 
```

但这会导致 Windows 8 上的 Access to Path denied 错误。我尝试将其更改为`ConfigurationUserLevel`，`PerUserRoamingAndLocal`但它没有做任何事情。

我需要做什么才能更新 App.Config（或者具体来说，Windows 8 中的 [application_name].exe.config？

我应该补充一点，尝试运行该应用程序的用户具有默认的 Windows 8 权限。我不知道那是什么，但它非常低。是否*需要*提升才能使其正常工作？

**编辑：** 记录的错误：

```
<Message>Access to the path 'C:\ProgramData\Path\AppName.exe.config' is denied.</Message>
<StackTrace>   at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath, Boolean checkHost)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share)
   at System.Configuration.Internal.WriteFileContext.ValidateWriteAccess(String filename)
   at System.Configuration.Internal.WriteFileContext.Complete(String filename, Boolean success)
   at System.Configuration.Internal.InternalConfigHost.StaticWriteCompleted(String streamName, Boolean success, Object writeContext, Boolean assertPermissions)
   at System.Configuration.Internal.InternalConfigHost.System.Configuration.Internal.IInternalConfigHost.WriteCompleted(String streamName, Boolean success, Object writeContext, Boolean assertPermissions)
   at System.Configuration.Internal.InternalConfigHost.System.Configuration.Internal.IInternalConfigHost.WriteCompleted(String streamName, Boolean success, Object writeContext)
   at System.Configuration.Internal.DelegatingConfigHost.WriteCompleted(String streamName, Boolean success, Object writeContext)
   at System.Configuration.UpdateConfigHost.WriteCompleted(String streamName, Boolean success, Object writeContext)
   at System.Configuration.MgmtConfigurationRecord.SaveAs(String filename, ConfigurationSaveMode saveMode, Boolean forceUpdateAll)
   at System.Configuration.Configuration.SaveAsImpl(String filename, ConfigurationSaveMode saveMode, Boolean forceSaveAll)
   at System.Configuration.Configuration.Save(ConfigurationSaveMode saveMode)
   at MyNamespace.Infrastructure.ConfigurationManager.WriteToAppSettings(String key, String value) in C:\Path\To\App\AppName\Infrastructure\ConfigurationManager.cs:line 76
</StackTrace> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T11:07:37.207

您可以发布异常消息吗？

我刚刚在 Win 8 Pro、VS 2012 上测试了你的代码，它运行良好。

```
var config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
config.AppSettings.Settings.Remove("my_new_key");
config.AppSettings.Settings.Add("my_new_key", "my new value");
config.Save(ConfigurationSaveMode.Modified); 
```

产生一个配置文件

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <appSettings>
        <add key="my_new_key" value="my new value" />
    </appSettings>
    <startup> 
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5" />
    </startup>
</configuration> 
```

至于需要提升的权限，这取决于应用程序在哪个用户下运行以及为您的配置文件所在的文件/目录设置的权限。

如果您使用默认项目位置 %homepath%\documents\visual studio 2012\projects\，则无需以提升的权限运行应用程序即可编辑 exe.config 文件。

如果您的文件位于其他任何地方，那么您必须查看该文件的权限（右键单击 -> 属性 -> 安全选项卡）.. 并查看运行应用程序的用户（可能是您的帐户）是否已写入特权。

这是对 NTFS 文件权限的一个很好的解释。 [http://www.techrepublic.com/article/windows-101-know-the-basics-about-ntfs-permissions/6084446](http://www.techrepublic.com/article/windows-101-know-the-basics-about-ntfs-permissions/6084446)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:09:26.717

试试这个来删除密钥：

```
Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);

AppSettingsSection appSettings = (AppSettingsSection)config.GetSection("appSettings");
appSettings.Settings.Remove("ConnectionString");
appSettings.Settings.Add("ConnectionString", "");

config.Save(ConfigurationSaveMode.Modified);
ConfigurationManager.RefreshSection(config.AppSettings.SectionInformation.Name); 
```

或更改键值：

```
Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
KeyValueConfigurationCollection settings = config.AppSettings.Settings;

settings["KeyName"].Value = "newkeyvalue";

config.Save(ConfigurationSaveMode.Modified);
ConfigurationManager.RefreshSection(config.AppSettings.SectionInformation.Name); 
```

# scala - 将 Scala 文件转换为 Dll

> ID：13701314
> 
> 赞同：5
> 
> 时间：2012-12-04T10:56:23.247
> 
> 标签：scala, dll, ikvm

我有一些使用 IntelliJ 和 SBT-Plugin 编写的 scala 代码，并希望将代码作为 C++ 的 DLL 提供给我。

我已经尝试过使用“ikvmc”：我通过“包”将所有课程打包在一个 jar 中。之后我手动设置了一个 jar，其中包含我使用的所有依赖项（scala-library、scama、jamtio、jama）。不幸的是，我收到了很多警告：'IKVMC0119'、“Emitted java.lang.VerificationError”和“IKVMC0104”（类似于下面的示例）！

然后我尝试使用上述方法转换一个简单的 scala 类（无依赖项）：使用 sbt 打包，添加 scala-library.jar 并尝试通过 ikvmc -target:library simpleClass.jar 转换它。我收到与您在下面看到的相同的警告/错误... ![在此处输入图像描述](../Images/f2a65d726361a601cf37d0c57bd5a643.png)

如果有人可以逐步解释如何将我的 Scala 代码作为 DLL 提供，我将非常高兴。

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:52:08.287

您使用哪个 IKVM 版本？

如果您已经使用 7.1，那么这听起来像是 IKVM 中的一个错误。联系邮件列表或错误列表并提供样本以进行复制。

如果您使用旧版本，那么您应该更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-06T09:31:38.503

用以前版本的 IKVM（'7.0.4335.0'）转换 hello.jar 后，我可以在 c# 中使用 dll（即使我从 ikvmc 收到警告）。它也适用于我的 Scala 代码：将 sbt 打包的 jar 及其依赖项转换为一个 dll。之后我可以使用 c# 中的类！

# navigation - 是否可以覆盖向后导航？

> ID：13701315
> 
> 赞同：0
> 
> 时间：2012-12-04T10:56:25.513
> 
> 标签：navigation, windows-phone-8

我正在构建的本质上是一个带有文本字段和结果列表的单页搜索应用程序。由于此应用程序仅包含一页，因此点击手机上的硬件后退按钮将杀死我的应用程序并将用户带到开始应用程序。

我认为，如果我能以某种方式覆盖此标准行为，即按返回会将用户带到同一页面上先前成功的搜索结果（如果有的话，则退出应用程序），我认为它将为用户提供更好的体验正常的背部会做）。

问题是是否可以以这种方式覆盖后退导航，如果可以，那么如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:47:47.620

You can catch the hardware back key press by overriding the `OnBackKeyPress` method in your page. You can detect cases where you want to perform an internal action rather than exit a page.

[This is documented on MSDN here.](http://msdn.microsoft.com/en-us/library/windowsphone/develop/microsoft.phone.controls.phoneapplicationpage.onbackkeypress%28v=vs.105%29.aspx)

```
 protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
    {
        if (...)
        {
            // don't want to exit the app in this case
            e.Cancel;
        }

        base.OnBackKeyPress(e);
    } 
```

Be careful to make sure you don't break exiting the application with the back key however, or else your application could fail Marketplace certification.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:11:11.067

```
protected virtual void OnNavigatingFrom(
    NavigatingCancelEventArgs e
) 
```

在您的页面中覆盖 OnNavigatingFrom 并执行 e.Cancel = true

```
protected override void OnNavigatingFrom(NavigatingCancelEventArgs e)
{
e.Cancel = true;
//Other code

} 
```

[http://msdn.microsoft.com/en-us/library/ms607458(vs.95](http://msdn.microsoft.com/en-us/library/ms607458(vs.95) )

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T11:29:27.733

你应该做这个：

```
protected override void OnBackKeyPress(System.ComponentModel.CancelEventArgs e)
{
 e.Cancel = MessageBox.Show("Exit?", "Page", MessageBoxButton.OKCancel) != 
 MessageBoxResult.OK;
 base.OnBackKeyPress(e);
} 
```

# spring - spring security 3 身份验证失败 url 更改

> ID：13701323
> 
> 赞同：4
> 
> 时间：2012-12-04T10:57:01.720
> 
> 标签：spring, spring-security

我正在 Spring 上开发 Web 应用程序，其中使用 Spring Security 3 和 LDAP 进行身份验证。

这是我的代码中的表单登录片段：

```
<security:form-login
    authentication-failure-url="/index.xhtml?error=true"
    default-target-url="/SomeDefaultUrl.xhtml"
    login-page="/index.xhtml" /> 
```

当身份验证失败时，我的应用程序被重定向到“/index.xhtml?error=true”url。问题是我不知道如何捕获“错误”变量并在 index.xhtml 文件中显示一些身份验证失败消息。我没有使用 Spring mvc。

第二个问题是更改 authentication-failure-url 不起作用。

```
<security:form-login
    authentication-failure-url="/error.xhtml"
    default-target-url="/SomeDefaultUrl.xhtml"
    login-page="/index.xhtml" /> 
```

我更改了 authentication-failure-url，但尽管进行了此更改，它仍然重定向到 index.xhtml 文件而没有任何变量。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:56:05.837

如果您`index.xhtml`是 JSP，您可以这样做（直接来自 Spring 3 食谱书）：

```
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<c:if test="${not empty param.error}">
    Login error.
    Reason ${sessionScope["SPRING_SECURITY_LAST_EXCEPTION"].message}
</c:if> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:45:21.077

重要提示：作为参数`/index.xhtml?error=true`发送。`error``GET`

如果您`index.xhtml`是 JSP 文件，则可以使用隐式`request`引用访问该参数：

```
<%= request.getParameter("error") %> 
```

如果`index.xhtml`是您的 Web 控制器方法/servlet 的 URL，您需要从对象中获取`error`参数。`Request`

```
public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException 
{       
    String error = req.getParameter("error");
} 
```

最后，如果你`index.xhtml`是一个普通的 html 文件，你可以使用 Java Script 来获取那个参数： [How to retrieve GET parameters from javascript?](https://stackoverflow.com/questions/5448545/how-to-retrieve-get-parameters-from-javascript)

对于第二个问题：确保正确重建项目。看起来它没有注意到你的变化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T18:22:56.607

```
<security:form-login
    authentication-failure-url="/error.xhtml"
    default-target-url="/SomeDefaultUrl.xhtml"
    login-page="/index.xhtml" /> 
```

“我更改了 authentication-failure-url，但尽管进行了更改，它仍然重定向到 index.xhtml 文件，没有任何变量。”

**答：**`<http auto-config="true" use-expressions="true"></http>`请在您的正文中定义以下拦截网址。

```
<intercept-url pattern="/error.xhtml" access="permitAll"/> 
```

您可能没有定义对*/error.xhtml*的访问权限，这就是为什么*authentication-failure-url*值是不可接受的，并且正在进入下一个定义的逻辑 url，即*/index.html*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-11T20:06:08.820

这里没有一个解决方案对我有用，然后我发现了这个问题，它对我来说有正确的解决方案： [spring security 3.1。带有 url 参数的自定义 authentication-failure-url](https://stackoverflow.com/questions/17199423/spring-security-3-1-custom-authentication-failure-url-with-url-parameters)

# ios6 - 打开 PDF iOS Adob e Reader

> ID：13701326
> 
> 赞同：1
> 
> 时间：2012-12-04T10:57:10.833
> 
> 标签：ios6

我正在尝试为 iPad 设计一个网站。我从 Safari 中“添加到主屏幕”页面，然后在全屏模式下加载，因此在简单元标记的帮助下不会出现工具栏

在全屏模式下，将毫无问题地从链接加载 PDF 文件，但找不到“打开方式”选项但是如果我通过单击 Safari 导航到同一个 PDF，输入页面地址，选项是那里

我的问题，我怎样才能让“打开方式”出现**或者** 有没有办法用“ **com.adobe.Adobe-Reader** ”命令打开文件

问候， 卡勒姆

# android - 在哪里删除本地存储在android中的文件？

> ID：13701328
> 
> 赞同：0
> 
> 时间：2012-12-04T10:57:29.603
> 
> 标签：android, file

在我的应用程序中，我正在解析一个 html 文件并将其存储在应用程序本地文件目录中。我在 onCreate() 中执行此操作。现在它们是一个按钮“打开”，当我单击“打开”按钮时，我通过将路径作为文件目录来显示 android 选择器对话框。

然后在 onDestroy() 中，我删除了存储在 files 目录中的所有文件。这工作到 4.0。

但在 4.1 中，一旦我们打开选择器对话框，它会立即调用 onDestroy()。当另一个应用程序（例如：Html 查看器）尝试打开文件时，文件将不可用。所以它显示文件未找到。那么在哪里删除本地文件？。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:08:37.103

试试这个代码

```
//Deleting the temperary folder and the file created in the sdcard
public static boolean deleteDir(File dir) 
{
    if (dir.isDirectory()) 
    {
        String[] children = dir.list();
        for (int i = 0; i < children.length; i++) 
        {
            boolean success = deleteDir(new File(dir, children[i]));
            if (!success) 
            {
                return false;
            }
        }
    }

    // The directory is now empty so delete it
    return dir.delete();
} 
```

将此代码放入`onDestroy()`

```
File checkFile = new File(Environment.getExternalStorageDirectory(),"/FolderName/");
//getting the control of sdcard files   
deleteDir(checkFile); 
```

# mysql - 如果 mysql 中不存在，则设置另一个值

> ID：13701330
> 
> 赞同：0
> 
> 时间：2012-12-04T10:57:39.923
> 
> 标签：mysql, database

```
SELECT subjects.name as name , grades.grade as grade,  concat(instructors.lastname, ", ", instructors.firstname , " ", left(instructors.middlename, 1),".") as instructor
    FROM subjects
    JOIN grades
    JOIN instructors
    WHERE grades.student_id = 1 AND subjects.id = grades.subject_id AND instructors.subject_id = subjects.id 
```

结果是

```
English    Instructor    Grade
Math       Instructor    Grade 
```

但我想要的是在还没有教师的科目中给出“N/A”。例子

```
English    Instructor    Grade
Math       Instructor    Grade
Science    N/A           Grade
History    N/A           Grade 
```

我将如何在 mySQL 中设置条件，以便结果与上面的示例完全相同？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:08:25.853

`LEFT JOIN`而不是`INNER JOIN`这样：

```
SELECT 
  s.name as name , 
  g.grade as grade,  
  IFNULL(concat(i.lastname, ", ", i.firstname, ...), 'N/A') as instructor
FROM subjects s
LEFT JOIN grades g ON g.subject_id = s.id 
LEFT JOIN instructors i ON g.subject_id = i.subject_id ; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/d9c05/6)

**请注意：**您编写`JOIN`s 的方式不正确。`ON`子句后面没有`JOIN`子句。您必须将连接条件放在`ON`子句之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:02:06.160

试试这个 ：：

使用左连接和`ifnull`

```
SELECT subjects.name as name , grades.grade as grade,  ifnull(concat(instructors.lastname, ", ", instructors.firstname , " ", left(instructors.middlename, 1),"."),'N/A)' as instructor
    FROM subjects
    LEFT JOIN grades on subjects.id = grades.subject_id
    LEFT JOIN instructors on instructors.subject_id = subjects.id
    WHERE grades.student_id = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:02:35.523

您可以`Left join`or`right join`代替`join`or `inner join`。`Left Join`如果没有相关数据，将在左侧显示所有数据，在右侧显示 null。所以您的查询将变为：

```
SELECT subjects.name as name , grades.grade as grade,  
isnull(concat(instructors.lastname, ", ", instructors.firstname , " ",
left(instructors.middlename, 1),"."), 'N/A') as instructor
FROM subjects
LEFT JOIN grades ON subjects.id = grades.subject_id 
LEFT JOIN instructors  ON instructors.subject_id = subjects.id
WHERE grades.student_id = 1 
```

# ruby-on-rails - 遇到空行时停止解析

> ID：13701334
> 
> 赞同：1
> 
> 时间：2012-12-04T10:58:00.910
> 
> 标签：ruby-on-rails, parsing, split, cloudmailin

我有一个 Rails 应用程序使用 Cloud-mailin 插件在 Heroku 上解析传入的电子邮件。该应用程序通过电子邮件接收价格列表并将其插入数据库。

这很好用，但是如果电子邮件包含例如底部的签名，则代码将失败，因为它也在尝试解析该文本。

因此，我想重写下面的解析代码以在它遇到电子邮件中的空行时停止。所有价格数据始终位于电子邮件的顶部。

```
email_text = params[:plain]
email_text_array = []

email_text.split("\n").each do |email_line|
    email_text_array << email_line.split(" ")
end 
```

`email_taxt`当它碰到变量中的空行时，如何更改上述内容以停止？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:08:26.783

您可以添加一个`break`：

```
email_text.split("\n").each do |email_line|
  break if email_line.blank?  # ends loop on first empty line
  email_text_array << email_line.split(" ")
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:03:55.043

这个问题有帮助[吗：Ruby 中有“do ... while”循环吗？](https://stackoverflow.com/questions/136793/is-there-a-do-while-loop-in-ruby)

编辑1：

从上面的文章中，我认为这样的事情会起作用：

```
email_text.split("\n").each do |email_line| 
  break if email_line.length < 1
  email_text_array << email_line.split(" ")     
end 
```

# asp.net - 如何更新另一个更新面板中的控件？

> ID：13701338
> 
> 赞同：3
> 
> 时间：2012-12-04T10:58:11.470
> 
> 标签：asp.net, ajax, asp.net-ajax, updatepanel

我在层次结构中有三个更新面板：

```
UpdatePanel1--Root
  UpdatePanelChild1
  UpdatePanelChild2 
```

我可以根据 updatepanel2 的事件更新 updatePanel1 中的控件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T21:22:45.150

我不是每个更新面板一直更新的忠实粉丝 - 这似乎取消了本地更新面板让您获得的信息。

另一种选择是在代码中专门调用 OTHER 更新面板的 .Update() 方法。例如，假设您在 UppdatePanelChild1 上有一个按钮，该按钮执行一些处理并修改 UpdatePanel2 中的控件：

```
textBoxInsideUpdatePanel2.Text = "Updated!";
UpdatePanel2.Update(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T21:19:49.613

是的，最简单的方法是 have `UpdateMode="Always"`; 然后所有更新面板都会更新，无论哪个触发了回发。

# vba - 什么是与 Access 的应用程序对象等效的 Vision VBA？

> ID：13701341
> 
> 赞同：0
> 
> 时间：2012-12-04T10:58:21.777
> 
> 标签：vba, ms-office, visio

在 Access VBA 中，您可以通过键入单词**Application**来访问正在运行的应用程序的属性/方法，然后是句点，然后是您想要的。

例如，我可以像这样实例化并显示 FileDialog：

```
Dim openFileDialogue As Object
Set openFileDialogue = Application.FileDialog(3)
openFileDialogue.Show 
```

如果我想在 Visio VBA 中执行此操作，我需要在上面的代码中替换**Application吗？**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T01:32:57.770

试试这个链接： http: [//visguy.com/vgforum/index.php ?topic=738.0](http://visguy.com/vgforum/index.php?topic=738.0)

最底部是来自“Nikolay”的代码示例，它显示了获取 Fi 的另一种方法

# php - 为 codeigniter 重写 URL

> ID：13701342
> 
> 赞同：-1
> 
> 时间：2012-12-04T10:58:23.887
> 
> 标签：php

如何使用 .htaccess 或 CI 路由重写网站的特定 url

[http://www.domain.com/user_controller/newfunction/username](http://www.domain.com/user_controller/newfunction/username)

作为

[http://www.domain.com/username](http://www.domain.com/username)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:04:02.293

```
$route['/(:any)'] = "/user_controller/newfunction/$1"; 
```

或尝试 htaccess

```
RewriteEngine On
RewriteRule ^([^/]*)$ /user_controller/newfunction/$1 [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T20:55:01.670

更容易使用位于 application/config/routes.php 的 CI 路由系统

```
$route['(:any)'] = 'user_controller/newfunction/$1'; 
```

不要忘记在 application/config/config.php 中设置你的基本 url

```
$config['base_url'] = 'http://www.domain.com/'; 
```

添加记得删除 url 中的 index.php。在站点根目录编辑 .htaccess 文件

```
RewriteEngine on
RewriteCond $1 !^(index\.php|assets|_searches|robots\.txt|favicon\.ico)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

现在在您的 user_controller 中，函数 newfunction 将如下所示：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class user_controller extends CI_Controller {

    public function __construct() {
        parent::__construct();
        // load things like models, libraries, helpers
    }

    function newFunction($slug)
    {
        echo 'hello my name is'.$slug;
    }
} 
```

当您访问[http://www.domain.com/nash](http://www.domain.com/nash)时，您的代码应该打印出 nash

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:04:47.157

/application/config/routes.php

```
$route['/all/other/routes/must/come/first!'] = "wherever/you/want";
$route['/(:any)'] = "/user_controller/newfunction/$1"; 
```

# libreoffice - 结束边距后面的 libreoffice 选项卡

> ID：13701346
> 
> 赞同：1
> 
> 时间：2012-12-04T10:58:36.420
> 
> 标签：libreoffice

在我阅读的 Libreoffice 3.5 的功能列表中，可以在结束边距后面设置一个制表符（功能列表中的 [1] 文本），因此文本将在此选项卡之后继续，而不是插入换行符。我已经用 Libreoffice 3.5.4 试过这个，但它似乎不起作用。

任何建议，我做错了什么？还是我误解了这个功能？

干杯斯文

[1] 当在结束边距后面设置制表位时，制表符使用此值并且不会转到新行。添加了一个兼容性选项，因此只有新文档才会以这种方式运行。

# r - 强制原点从 0 开始

> ID：13701347
> 
> 赞同：179
> 
> 时间：2012-12-04T10:58:38.163
> 
> 标签：r, plot, ggplot2, axes

如何在ggplot2中设置y轴和x轴的原点/截距？

x 轴的线应该正好在`y=Z`。

具有`Z=0`或其他给定值。

* * *

## 回答 #1

> 赞同：239
> 
> 时间：2012-12-04T11:20:18.537

`xlim``ylim`不要在这里剪。您需要使用`expand_limits`、`scale_x_continuous`和`scale_y_continuous`。尝试：

```
df <- data.frame(x = 1:5, y = 1:5)
p <- ggplot(df, aes(x, y)) + geom_point()
p <- p + expand_limits(x = 0, y = 0)
p # not what you are looking for 
```

![在此处输入图像描述](../Images/bfff7b5bebee348ed420594260d74f5a.png)

```
p + scale_x_continuous(expand = c(0, 0)) + scale_y_continuous(expand = c(0, 0)) 
```

![在此处输入图像描述](../Images/6d2748d1601b664adf55d66c065a62ea.png)

您可能需要稍作调整以确保点不会被截断（例如，请参见 和 处的`x = 5`点`y = 5`。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2020-04-26T08:33:31.130

只需将这些添加到您的 ggplot 中：

```
+ scale_x_continuous(expand = c(0, 0), limits = c(0, NA)) + 
  scale_y_continuous(expand = c(0, 0), limits = c(0, NA)) 
```

### 例子

```
df <- data.frame(x = 1:5, y = 1:5)
p <- ggplot(df, aes(x, y)) + geom_point()
p <- p + expand_limits(x = 0, y = 0)
p # not what you are looking for

p + scale_x_continuous(expand = c(0, 0), limits = c(0,NA)) + 
  scale_y_continuous(expand = c(0, 0), limits = c(0, NA)) 
```

[![在此处输入图像描述](../Images/cbd981ede8a06ca610bbc180b8a28436.png)](https://i.stack.imgur.com/8AUFdl.png)

最后，**请注意不要无意中*将*数据排除在图表之外**。例如，a`position = 'dodge'`可能会导致条形图完全离开图表（例如，如果它的值为零并且您从零开始轴），因此您可能看不到它，甚至可能不知道它在那里。我建议先完整绘制数据，检查，然后使用上面的提示来提高绘图的美感。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-09-02T02:25:37.083

在最新版本的 ggplot2 中，这可能更容易。

```
p <- ggplot(mtcars, aes(wt, mpg))
p + geom_point()
p+ geom_point() + scale_x_continuous(expand = expansion(mult = c(0, 0))) + scale_y_continuous(expand = expansion(mult = c(0, 0))) 
```

[![在此处输入图像描述](../Images/2d8cf8370bf537d0d8cf165aa5d578a3.png)](https://i.stack.imgur.com/Ln3eB.png)

有关`?expansion()`更多详细信息，请参阅。

# mysql - 一旦所有值都可用，在 SQL 中对值求和

> ID：13701348
> 
> 赞同：2
> 
> 时间：2012-12-04T10:58:40.297
> 
> 标签：mysql, sql

我有事件流入 MySQL 数据库，我需要将事件分组和汇总到事务中并存储到另一个表中。数据如下：

```
+----+---------+------+-------+
| id | transid | code | value |
+----+---------+------+-------+
|  1 |       1 | b    |    12 |
|  2 |       1 | i    |    23 |
|  3 |       2 | b    |    34 |
|  4 |       1 | e    |    45 |
|  5 |       3 | b    |    56 |
|  6 |       2 | i    |    67 |
|  7 |       2 | e    |    78 |
|  8 |       3 | i    |    89 |
|  9 |       3 | i    |    90 |
+----+---------+------+-------+ 
```

事件分批到达，我想通过汇总每个 transid 的值来创建事务，例如：

```
select transid, sum(value) from eventtable group by transid; 
```

但只有在那个transid的所有事件都已经到来之后。这是由代码为 e 的事件决定的（b 表示开始，e 表示结束，i 表示不同数量的中间体）。作为 SQL 的新手，如何在求和之前实现结束代码存在的要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:03:14.930

也许与`having`：

```
select transid, sum(value)
from eventtable 
group by transid 
having max(case code when 'e' then 1 end)=1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:02:38.473

```
select transid, sum(value) from eventtable 
group by transid 
HAVING COUNT(*) = 3 
```

您应该计算组中的记录。那么当有（b）开始时，（i）？不知道它是什么，并且 (e)nd 这个组没有被过滤掉。

# regex - 在清漆中提取查询参数的值

> ID：13701352
> 
> 赞同：2
> 
> 时间：2012-12-04T10:58:58.113
> 
> 标签：regex, caching, varnish, query-parameters

我有这个网址：

`http://my.api.com/v1/{api_key}/{user_token}/?someparam=hello&force=true&someotherparam=world`

`api_key`uuid在哪里`user_token`？

如何提取`force`查询参数的值，如果缺少强制参数或将其设置为 false，则从清漆缓存中进行查找。如果它设置为 true，我需要访问我的后端服务器。查询参数可以是任何顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T13:49:47.050

我建议你颠倒逻辑：

```
sub vcl_recv { 
    if (req.url ~ "(?i)force=(true|yes)") {
        return(pass);
    }
    // other values will fall through to the safe default VCL that will do return(lookup).
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-03T14:54:33.227

类似于 Ikarsten 的答案，但不匹配 xxxtoken 参数。

```
sub vcl_recv { 
    if (req.url ~ "(\?|\&)token=") {
        return(pass);
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-05T13:38:36.913

在您的 vcl_recv 中，您可以使用以下内容检查不存在的 force= 或 force=true ：

```
 if(!req.url ~ "&|\?force=" || req.url ~ "&|\?force=true") {
     return(pass);
 } 
```

# android - 一个应用程序有两个独立的活动

> ID：13701353
> 
> 赞同：2
> 
> 时间：2012-12-04T10:58:59.633
> 
> 标签：android, android-intent, android-activity

我正在开发只有两个活动的简单应用程序。

*   Activity C 配置应用程序
*   活动 A 用于在某些事件发生时与用户交互

用户不可能从一个导航到另一个 - 这就是我称它们为独立活动的原因。此外，更多活动 A 仅在表单事件中被调用，用户无法手动执行此操作。

问题。假设应用程序配置正确。系统中发生了一些事件，因此正在向用户显示应用程序 A。用户与之交互，活动进入后台。然后用户决定启动配置活动 C。活动 C 显示给用户。用户使用后退按钮“关闭”活动，但不是 android 启动器或桌面，而是向用户显示活动 A（取自历史记录）。

类似的情况可能会以另一种方式发生。C 被用户使用，然后被带到后台。某些事件显示活动 A，用户使用后退按钮转到 C 而不是关闭活动 A。

我已经解决了这个问题，但解决方案很脏。有没有解决此类问题的**干净**或**标准方法？**

我的部分解决方案包括一个答案中的建议：

来自 AndroidManifest.xml 的片段：

```
<activity
  android:name=".C"
  android:clearTaskOnLaunch="true"
  android:excludeFromRecents="false"
  android:launchMode="singleTask"
  ...
 >
  <intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
  </intent-filter>
</activity>
<activity
  android:exported="false"
  android:name=".A"
  android:excludeFromRecents="true"
  android:noHistory="true"
  android:launchMode="singleInstance"
  android:clearTaskOnLaunch="true"
  ....
>
</activity> 
```

活动 A 的片段：

```
public boolean onKeyUp(final int p_keyCode, final KeyEvent p_event) {
    switch(p_keyCode) {
        case KeyEvent.KEYCODE_ENDCALL:
        case KeyEvent.KEYCODE_HOME:
        case KeyEvent.KEYCODE_BACK:
        case KeyEvent.KEYCODE_MUTE:
        case KeyEvent.KEYCODE_POWER:
            this.finish();
            break;
        ....
    }
    return super.onKeyUp(p_keyCode, p_event);
} 
```

从事件处理程序中截取：

```
public class H extends BroadcastReceiver {
...
  Intent intent = new Intent(p_context, A.class);
  intent.addFlags(Intent.FLAG_FROM_BACKGROUND);
  intent.addFlags(Intent.FLAG_ACTIVITY_NO_USER_ACTION);
  intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
  p_context.startActivity(intent);
...
} 
```

它适用于我的应用程序。但是我希望应用程序（活动 C）出现在*最近的*应用程序中。但是一旦活动 A 被调用，应用程序就会从*Recent*中删除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:02:40.350

我不知道这是否是最干净的方法，但您可以覆盖`void onBackPressed()`活动方法。这样，您可以手动将您的活动移动到后台，就像这样，并防止以前的活动弹出：

```
public void onBackPressed () {
    moveTaskToBack (true);
} 
```

**编辑：**原来有更好的方法来做到这一点：

打开您的`AndroidManifest.xml`, 并在每个声明中放入以下内容：`android:noHistory="true"`。这样做会告诉 Android 您的活动不会留下历史记录，因此，当用户回击时，Android 将退出应用程序，因为没有其他活动可以返回。

# android - 为什么我的 ListView 不接受我的自定义 OnItemSelectedListener？

> ID：13701356
> 
> 赞同：0
> 
> 时间：2012-12-04T10:59:01.653
> 
> 标签：android, listener

我有一个 ListView，我想创建一个 OnItemSelectedListner，我在代码中这样做，我称之为 mylistener。为什么 list.setOnItemSelectedListener 不接受 mylistener？

感谢您的帮助

```
ListView list = (ListView)findViewById(android.R.id.list);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>    (this,android.R.layout.simple_list_item_1,array);
        list.setAdapter(adapter);   
        list.setOnItemSelectedListener(mlistener);
        AdapterView.OnItemSelectedListener mlistener = new     AdapterView.OnItemSelectedListener(){
        @Override
            public void onItemSelected(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                Toast.makeText(getApplicationContext(),"selezionato",     Toast.LENGTH_LONG).show();            
            }
            @Override
            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub
            }

        }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:02:03.620

`mlistener`您应该在使用它之前声明和初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T11:03:52.293

尝试在之前创建监听器`list.setOnItemSelectedListener(mlistener);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:05:27.660

只需重新排序您的代码：

```
ListView list = (ListView)findViewById(android.R.id.list);
ArrayAdapter<String> adapter = new ArrayAdapter<String> this,android.R.layout.simple_list_item_1,array);
AdapterView.OnItemSelectedListener mlistener = new AdapterView.OnItemSelectedListener(){
    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        Toast.makeText(getApplicationContext(),"selezionato", Toast.LENGTH_LONG).show();            
    }
    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub
    }
};

list.setAdapter(adapter);   
list.setOnItemSelectedListener(mlistener); 
```

# mysql - 如何使我本地的 mySQL 数据库可以从不同的机器访问？

> ID：13701363
> 
> 赞同：1
> 
> 时间：2012-12-04T10:59:41.390
> 
> 标签：mysql, windows, mysqlconnection

我在使用 mySQL 查询浏览器连接的 Windows 系统上安装了 mySQL。我正在提供培训，我希望人们能够连接到我的机器 SQL 数据库

我怎么做？目前它不允许连接。

我需要修改哪些设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:02:53.900

**第 1 步：检查 IP 连接**

默认情况下，它只允许来自 127.0.0.1 的连接。你用的是windows还是linux？

打开**my.cnf**并将绑定地址更改为您的网络 IP。

```
[mysqld]
user            = mysql
pid-file        = /var/run/mysqld/mysqld.pid
socket          = /var/run/mysqld/mysqld.sock
port            = 3306
basedir         = /usr
datadir         = /var/lib/mysql
tmpdir          = /tmp
language        = /usr/share/mysql/English
bind-address    = 127.0.0.1 
```

更多信息可以在 google 中轻松找到。检查[这个](http://www.debianhelp.co.uk/remotemysql.htm)。

**第 2 步：检查您的防火墙**

此外，正如**@Leandro**评论的那样，请检查您的 Windows 防火墙设置以允许连接发生。

测试它的一种简单方法是从客户端机器远程登录到您的 MySQL 网络 ip、端口 3306 并查看是否连接或被阻止。

**STEP 3：检查mysql用户权限**

一旦你有 IP 连接，你的校友正在使用的用户应该有任何主机的登录权限。例如，如果他们使用 root 你必须运行这样的查询：

```
update user set host=’%’ where user=’root’ and host=’ubuntuserv’; 
```

[您可以在此处](http://www.howtogeek.com/howto/programming/mysql-give-root-user-logon-permission-from-any-host/)查看更多信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-04T11:04:26.833

要求他们使用 phpMyAdmin 通过您的 IP 地址访问您的数据库。还要让您的 Apache 服务器联机。

# c# - Visual Studio 2012 Modernappstyle 可编辑组合框 c#

> ID：13701370
> 
> 赞同：0
> 
> 时间：2012-12-04T11:00:06.000
> 
> 标签：c#, drop-down-menu, combobox, visual-studio-2012

使用 Visual Studio 2012 C#（模板：Windows 应用商店 -> 空白应用程序 (XAML)）

我想在现代风格的应用程序中创建一个组合框，我也可以在其中使用键盘输入文本（如浏览器/资源管理器中的地址栏）。

当我创建一个组合框并点击/单击它时，我只能选择项目（如果添加了项目），但永远无法显示键盘。创建一个额外的文本框不会解决问题，因为我还想要你在 ComboBox 中键入内容时通常得到的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-31T22:44:41.147

VS 2012 速成版中没有组合框选项。相反，您可以使用 ListBox 或 ListPicker 来达到目的。详情请访问[http://wpftutorial.net/ListBoxItemsArrange.html](http://wpftutorial.net/ListBoxItemsArrange.html)

# asp.net - 根据asp.net中的屏幕分辨率调整模型弹出窗口的大小

> ID：13701372
> 
> 赞同：3
> 
> 时间：2012-12-04T11:00:11.930
> 
> 标签：asp.net, asp.net-ajax

我的应用程序在 asp.net 4.0 中，我在我的应用程序中使用 AJAX 模型弹出扩展器，以便在单击网格视图中的公司名称时显示 xyz 公司的详细信息。因此，当我在大屏幕上查看同一页面时，在模型弹出窗口中显示公司详细信息时，弹出窗口的位置发生了变化。

任何人都可以告诉我如何根据屏幕分辨率设置模型在页面上弹出的位置。

以下是我尝试动态设置宽度和高度但不起作用的代码。

```
<script type="text/javascript">
   function fnCalculate()
   {
     alert(screen.width+'x'+screen.height);
     w = screen.width * 0.8 ;
     h = screen.height * 0.8 ;
     document.getElementById("#content").style.width = w;
     document.getElementById("#content").style.height = h;
     document.getElementById("#content").style.left = w*h;
    }
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:44:38.980

我认为将高度和宽度设置为百分比会更容易。我正在设置`top`和`left`。

无论屏幕尺寸是多少，它都会`pop-up`占据您应用的百分比。

```
#content{ position: absolute;height:50%;width:50%;} 
```

# objective-c - NSUnknownKeyException 与任何 CollectionView 对象

> ID：13701373
> 
> 赞同：0
> 
> 时间：2012-12-04T11:00:14.683
> 
> 标签：objective-c, cocoa-touch, ios6, uicollectionview

*免责声明：我对这门语言很陌生，所以如果我做了不合逻辑的事情或解释不正确，我深表歉意。我也是 StackOverflow 的新手...*

到目前为止，在 Xcode (Objective-C) 中，我已经启动了一个空项目并添加了一个 View Controller 对象，其中包含一个 Collection View 对象，其中包含一个 Collection View Cell。该单元格具有图像视图和标签对象（每个对象之一）。我添加了 Storyboard 和 ViewController.h + ViewController.m 文件对（UIViewController 的子类）。

最初我从一个空的项目模板开始，但遇到问题并删除了项目文件夹并重新开始使用单视图模板。

现在，每当我在任何项目中使用任何 CollectionView 对象时，我都会在运行它时从 Xcode 中得到一个错误。它出现在线程 1 中，即调试导航器的“主要”部分：

```
"Terminating app due to uncaught exception 'NSUnknownKeyException', 
reason: '[<ViewController 0x7419bb0> setValue:forUndefinedKey:]: this
class is not key value coding-compliant for the key breadboxCollectionView.'" 
```

我确实使用“breadboxCollectionView”作为 CollectionView 对象的出口属性名称，绑定到我的 ViewController 标头。不过，我在我之前的一个项目中做到了这一点。

如果我添加第二个 Collection View 对象，并将其绑定到 View Controller 头文件，作为名为“breadboxCollectionView”的属性的出口，则应用程序将启动而不会引发任何异常。它不显示第二个集合视图对象，但此时我将考虑一个完全不同的障碍。我需要对“breadboxCollectionView”的引用消失。

我试图删除第二个 Collection View 对象，但是在之后运行应用程序后：繁荣，出现了同样的错误。

我尝试通过按以下顺序执行以下操作来删除第二个集合视图对象：1）删除出口连接 2）删除视图控制器头文件中的属性条目 3）删除第二个集合视图对象。

我已经删除并重新安装了 Xcode。我已经删除了之前项目的所有痕迹。我已经从头开始了一个新项目......再次。我还使用 Xcode 之外的文本编辑器打开了我的 *.storyboard 文件，并搜索了“breadboxCollectionView”的任何痕迹。

我仍然遇到相同的错误，对“breadboxCollectionView”的引用相同，并且无法找到此变量在我的计算机上列出的位置来修复它。

我在这里尝试过其他问题，关于 NSUnknownKeyException 错误，但似乎每个问题都相当独特。在我看来，Apple Developer 文档对于这种情况也没有多大帮助。

有没有人有什么建议？

**更新 1：**

我只是做了以下，实际上找到了对“breadboxCollectionView”的引用。虽然，它没有帮助：

1.  打开 xcode.app 包内容
2.  finder 搜索面包盒
3.  只出现了一个文件
4.  用xcode打开
5.  xcode中没有变量的迹象
6.  关闭 xcode 并使用 textedit.app 重新打开
7.  cmd+F 搜索“面包箱”
8.  *.storyboard 文件中显示的单个结果；我以为我这样做了，但之前什么也没发现：

    ```
    <class className="ViewController" superclassName="UIViewController">
                <source key="sourceIdentifier" type="project" relativePath="./Classes/ViewController.h"/>
                <relationships>
                    <relationship kind="outlet" name="BreadrackCollectionView" candidateClass="UICollectionView"/>
                    <relationship kind="outlet" name="breadboxCollectionView" candidateClass="UICollectionView"/>
                </relationships>
    </class> 
    ```

9.  删除了条目

10.  用 textedit.app 保存
11.  关闭并使用 xcode 重新打开
12.  跑项目
13.  模拟器仍然抛出相同的错误。

有没有办法完全清除我的计算机 100% 的 Xcode，然后重新开始？我还没有做很多，这是我唯一的项目。我不应该错过任何重要的东西。我应该这样做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T14:33:39.863

所以，我找到了这个问题的答案。虽然它来自非 SO 资源，但说明如下：

> 也许您应该尝试清除 Xcode 以及 iPhone 模拟器的缓存。
> 
> Xcode 缓存： [如何清空缓存并清除所有目标 Xcode 4](https://stackoverflow.com/questions/5714372/how-to-empty-caches-and-clean-all-targets-xcode-4)
> 
> iPhone 模拟器 从菜单中打开模拟器，选择 iOS 模拟器 -> 重置内容和设置

这适用于我的情况，实际上非常好。我现在可以在项目中使用 CollectionView 对象，而无需引用错误的属性插座。

谢谢大家，感谢您的宝贵意见和时间！

# python - 如何避免定义一个变量来保存可能只需要一次的函数结果

> ID：13701374
> 
> 赞同：0
> 
> 时间：2012-12-04T11:00:20.220
> 
> 标签：python, binding, decorator, python-decorators

通常，只有当函数返回的值满足条件时，我才需要使用该值，如以下构造：

```
tmp = my_func(x)
if tmp == some_value:
    # do something with tmp 
```

我想通过避免使用新变量来使这段代码更简洁和可读`tmp`，类似于这种方式：

```
if my_func(x) == some_value:
    # do something with my_func(x) last return 
```

另一个例子可能是：

```
tmp = initialization_value
while tmp != some_value:
    tmp = my_func(x)
    # do something with tmp
    # change value of x 
```

这将更简洁易读

```
while my_func(x) != some_value:
    # do something with my_func(x) last return
    # change value of x 
```

是否有可能获得或实现这种编码风格？

**跟进**

在我看来，获得它的最佳方法是通过装饰器缓存最后返回的值，请参阅下面的答案。

# 终极和确定的解决方案

尽管这个问题没有投票，但似乎我并不是唯一一个要求这种语言特性的人，事实上最后 Python 3.8 引入了[海象运算符](https://realpython.com/python38-new-features/#the-walrus-in-the-room-assignment-expressions)，它正好解决了这个需求。使用 Python 3.8+，上面的代码可以很方便地编写为：

```
if (result := my_func(x)) == some_value:
    # do something with result 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:01:33.523

不，您不能[在 if 语句中赋值](http://docs.python.org/2/faq/design.html#why-can-t-i-use-an-assignment-in-an-expression)。您的初始代码很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:07:42.010

有效的写法：

```
if my_func(x) == some_value:
    # do something 
    return something 
```

但是，如果您想使用语句`my_func(x)`内部的结果，则[必须重新计算它](http://docs.python.org/2/faq/design.html#why-can-t-i-use-an-assignment-in-an-expression)，因此您的做法很好。`if`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-05T04:47:33.457

您的解决方案是：

```
def save_last(f):
    def w(*args, **kwargs): # w is the 'wrapper' function
        w.last=f(*args, **kwargs)
        return w.last
    return w

@save_last
def fync(x): # just an example function
    if 1<x<100: return (x%15 + x//6)*(x%2)
    else: return (x%10)*10 + (x%7)
print 'fync.__dict__ :',fync.__dict__

for i in xrange(1,114):
    if fync(i)%7==3:
        print 'fync(%3d)==%2d   %2d-3==%2d==7*%d' \
              % (i,fync.last,fync.last,
                 fync.last-3,(fync.last-3)//7)
print 'fync.__dict__ :',fync.__dict__ 
```

结果

```
fync.__dict__ : {}
fync(  3)== 3    3-3== 0==7*0
fync(  9)==10   10-3== 7==7*1
fync( 35)==10   10-3== 7==7*1
fync( 41)==17   17-3==14==7*2
fync( 79)==17   17-3==14==7*2
fync( 85)==24   24-3==21==7*3
fync(102)==24   24-3==21==7*3
fync(109)==94   94-3==91==7*13
fync(113)==31   31-3==28==7*4
fync.__dict__ : {'last': 31} 
```

.

我发现装饰器的使用很繁重，但可以这样做：

```
def finc(x):
    if 1<x<100: finc.last = (x%15 + x//6)*(x%2)
    else: finc.last = (x%10)*10 + (x%7)
    return finc.last
print 'finc.__dict__ :',finc.__dict__

for i in xrange(1,114):
    if finc(i)%7==3:
        print 'finc(%3d)==%2d   %2d-3==%2d==7*%d' \
              % (i,finc.last, finc.last,
                 finc.last-3,(finc.last-3)//7) 
print 'finc.__dict__ :',finc.__dict__ 
```

结果是完全一样的。

.

顺便说一句，我想象了以下解决方案：

```
def func(x=None,li=[None]):
    if x is None: return li[0]
    elif x>0:
        if 1<x<100:  li[0] = (x%15 + x//6)*(x%2)
        else: li[0] = (x%10)*10 + (x%7)
        return li[0]

for i in xrange(1,114):
    if func(i)%7==3:
        print 'func(%3d)==%2d   %2d-3==%2d==7*%d' \
              % (i,func(),func(),
                 func()-3,(func()-3)/7) 
```

结果显然是一样的。
但我更喜欢上面的解决方案，在不使用装饰器的情况下使用属性。

.

### 诺塔贝内

所有三种解决方案的原理都是相同的：在返回结果之前将结果存储在函数中，无论是在属性中还是在默认参数列表中。

这就是将名称的创建从函数的外部转移到函数的内部：
无论如何，有必要有一个对象来存储结果，一个属性或一个列表，因此还需要一个专用的名称来保存访问存储对象。
那只是转移问题。

.

### 编辑

顺便说一句，我的最后一个解决方案（带有函数内部的列表）与以下另一个解决方案相距不远：

```
L = []

def fonc(x,li=L):
    if 1<x<100:  li[:] = [(x%15 + x//6)*(x%2)]
    else: li[:] = [(x%10)*10 + (x%7)]
    return li[0]

for i in xrange(1,114):
    if fonc(i)%7==3:
        print 'func(%3d)==%2d   %2d-3==%2d==7*%d' \
              % (i,L[0],L[0],
                 L[0]-3,(L[0]-3)/7) 
```

但是此解决方案几乎等同于您在问题中所写的内容：由于绑定到`tmp`标识符而保留函数的结果或将结果保留为列表的元素并没有太大区别。

所以我仍然是我的第一意见，你的问题是一个错误的问题：

*   要么你需要对函数的结果做一些事情，要么你有义务将它作为一个通过一个名称引用的对象，在函数内部或外部

*   或者您不必对函数的结果做任何事情，然后您可以简单地编写：

.

```
if my_func(x) == some_value:
    # do nothing with my_func(x)
    return some_value 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T11:13:45.307

如果您经常使用此构造，则可以

```
def cmp_iter(a, b):
    if a == b:
        yield a
# general case:
def if_iter(a, b, testfunc):
    if testfunc(a, b):
        yield a 
```

为了做到这一点

```
for tmp in cmp_iter(my_func(x), some_value):
    frobnicate(tmp)
    return tmp 
```

如果条件不满足，则此 for 循环不会运行，如果条件满足，则只运行一次。

然而，这是非常不寻常的，并且可能会使您的代码的潜在读者感到困惑，因此要么避免这样做，要么做好文档。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-06T15:04:56.800

我使用装饰器找到了一个简洁的解决方案（欢迎使用更好的解决方案），该装饰器将装饰函数返回的最后一个值保存在`last`属性中。我的构造变成：

```
if my_func(x) == some_value:
    # do anything with the value returned by my_func, saved in my_func.last
    # such as
    print my_func.last
    return my_func.last 
```

简洁明了。该函数只评估一次，您不需要引入烦人的临时变量。

当然，您必须记住使用（假设装饰器名称为）来装饰您想要“*启用*”属性的功能：`last``save_last`

```
@save_last
def my_func(...):
    # function definition 
```

装饰器定义为：

```
# last value returned by decorated function is accessible as 'last' attribute
def save_last(f):
    def w(*args, **kwargs): # w is the 'wrapper' function
        w.last=f(*args, **kwargs)
        return w.last
    return w 
```

# html - 需要 Html 统一面板 CSS 帮助

> ID：13701375
> 
> 赞同：-1
> 
> 时间：2012-12-04T11:00:22.547
> 
> 标签：html, css

鉴于下面的 html，我正在寻找两件事：

**澄清：**我想保持绿色框居中，因为它们目前与它们的高度无关，但事实并非如此。top:-10px/bottom:-10px 基于绿框高度约为 20px，一旦改变顶部/底部需要重新调整，我想避免！

1.  摆脱绝对`top`/`bottom`值（因为绿色框的高度可能会有所不同），我尝试使用 top/margin-top 周围的一些选项，`-50%`但无济于事。
2.  将我的绿色框居中对齐 - 因为它们是绝对定位的，所以我无法让它工作。

该解决方案必须适用于当前版本的 FF 和 Chrome，我不介意使用`CSS3`& `HTML5`。

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
    <div style="height: 400px; width: 30px; border: 1px solid #ccc; margin: 50px auto auto 50px;">
        <table style="table-layout: fixed; border-collapse: collapse; height: 100%; width: 100%;">
            <tr>
                <td style="height: 50%;">
                    <div style="height: 100%; width: 100%; position: relative;">
                        <div style="top: -10px; border: 1px solid #ccc; background-color: Green; position: absolute; ">A</div>   
                        <div style="bottom: -10px; border: 1px solid #ccc; background-color: Green; position: absolute;">B</div>   
                    </div>
                </td>
            </tr>
            <tr>
                <td style="height: 50%;">
                    <div style="height: 100%; width: 100%; position: relative;">
                        <div style="bottom: -10px; border: 1px solid #ccc; background-color: Green; position: absolute;">C</div>   
                    </div>
                </td>
            </tr>
        </table>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:40:11.717

试试这个代码：

HTML：

```
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="style.css" />
    </head>

    <body>
        <div id="container">
            <div class="product" align="center">A</div>
            <div class="product" align="center">B</div>
            <div class="product" align="center">C</div>
        </div>
    </body>
</html> 
```

CSS：

```
#container{position:relative; width:30px; height:400px; border:1px solid #CCCCCC;   margin: 50px auto auto 50px; }

.product {position:relative; margin-top:20px; margin-left:5px; margin-right:5px; -webkit-border-radius: 1px; -moz-border-radius: 1px; border-radius: 1px; background-color:Green;} 
```

# salesforce - 用于发送电子邮件警报的 Apex 代码

> ID：13701379
> 
> 赞同：2
> 
> 时间：2012-12-04T11:00:28.910
> 
> 标签：salesforce, apex-code

如何编写顶点代码以将记录所有者更改的电子邮件警报发送给带有字段信息的旧记录所有者？请帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T04:07:41.643

请参阅[http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_classes_email_outbound.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_classes_email_outbound.htm)了解有关发送出站电子邮件的更多信息。

这是一个示例代码，当所有者更改时，它会向以前的所有者发送电子邮件：

```
trigger SendEmailOnOwnerChange on Account (after update) {
    if (trigger.old[0].OwnerId != trigger.new[0].OwnerId) {
        Messaging.SingleEmailMessage mail = new Messaging.SingleEmailMessage();

        String emailAddr = [select Email from User where Id = :trigger.old[0].OwnerId].Email;
        String newOwnerName = [select Name from User where Id = :trigger.new[0].OwnerId].Name;

        String[] toAddresses = new String[] {emailAddr};
        mail.setToAddresses(toAddresses);

        mail.setSubject('Owner Changed for Account : ' + trigger.new[0].Name);

        mail.setPlainTextBody('Owner of Account: ' + trigger.new[0].Name + ' Changed to ' + newOwnerName);
        mail.setHtmlBody('Owner of Account: <b>' + trigger.new[0].Name + '</b> Changed to <b>' + newOwnerName  + '</b>');

        Messaging.sendEmail(new Messaging.SingleEmailMessage[] { mail });
    }
} 
```

当然，它目前仅适用于一条记录，需要批量更新以进行批量更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T03:12:10.460

您不能为所有对象设置通用警报。
相反，为您感兴趣的对象编写一个更新后触发器来比较`Trigger.old[n].OwnerId`和`Trigger.new[n].OwnerId`。

我建议将比较代码放在所有触发器调用的类方法中。为此，您可以将[Dynamic Apex](http://www.salesforce.com/us/developer/docs/apexcode/index_Left.htm#CSHID=apex_dynamic.htm%7CStartTopic=Content/apex_dynamic.htm%7CSkinName=webhelp)用于该`sObject`类型。

在新的类方法中，使用[Messaging.SingleEmailMessage](http://www.salesforce.com/us/developer/docs/apexcode/index_Left.htm#CSHID=apex_classes_email_outbound.htm%7CStartTopic=Content/apex_classes_email_outbound.htm%7CSkinName=webhelp)类发送警报。

# c++ - QTreeView 边框/框架颜色

> ID：13701381
> 
> 赞同：1
> 
> 时间：2012-12-04T11:00:31.360
> 
> 标签：c++, qt, qtreeview

我目前正在使用`QTreeView`，我想在控件获得焦点时更改小部件的边框/框架。

我已经尝试了不同的设置，但到目前为止，它们都没有奏效。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:05:09.180

You can set stylesheet for QTreeView to change the border as per requirement. Some examples are given [here](http://doc.qt.digia.com/qt/stylesheet-examples.html). QTreeView has stylesheet properties : **frameShape, frameShadow, border, border-top-color, border-bottom-color**. You can modify these properties to get the desired border style.

# c# - C#/XAML 将图像添加到按钮

> ID：13701386
> 
> 赞同：6
> 
> 时间：2012-12-04T11:00:52.647
> 
> 标签：c#, xaml, windows-phone-8

我开始使用 C#/XAML 在 Windows Phone 8 中编程。目前我正在开发一个测验类型的 WP8 应用程序，它有一个问题（文本块）和 4 个选项（以按钮的形式）。我想做的是，在按钮中显示这些选项的图像。我要怎么做？

请检查我已经开始 **这是我的 DataEntry 类：**

```
 class DataEntry
{
    List<DataModel> dataModelList = new List<DataModel>();
    public List<DataModel> GetData()
    {
        dataModelList.Add(new DataModel { ID = 0, Question = "A major", Answer1 = "chords/g_major.gif", Answer2 = "chords/c_major.gif", Answer3 = "chords/b_major.gif", CorrectAnswer = "chords/a_major.gif" });
        dataModelList.Add(new DataModel { ID = 1, Question = "B major", Answer1 = "chords/g_major.gif", Answer2 = "chords/d_major.gif", Answer3 = "chords/e_major.gif", CorrectAnswer = "chords/b_major.gif" });
    }
} 
```

**还有我的 MainPage 类：**

```
public partial class MainPage : PhoneApplicationPage
{
    List<DataModel> dataModelList = new List<DataModel>();
    List<ScoreModel> scoreModelList = new List<ScoreModel>();
    Random rand = new Random();
    DataEntry dataEntry = new DataEntry();
    int number1, number2, number3, number4, score = 0, scoreToHave = 4;
    string CorrectAnswer;
    int QuestionID = 0;

    public MainPage()
    {
        InitializeComponent();
        dataModelList = dataEntry.GetData();
        Question();
    }

    private void Question()
    {

        foreach (var item in dataModelList)
        {
            if (item.ID == QuestionID)
            {
                TextBlock_Question.Text = item.Question;
                CorrectAnswer = item.CorrectAnswer;
                RandomAnswerPlaces(item.Answer1, item.Answer2, item.Answer3, item.CorrectAnswer);
            }
        }
    }

    public void RandomAnswerPlaces(string Answer1, string Answer2, string Answer3, string Answer4)
    {
        String[] Answers = new string[4];
        noRepeat();
        Answers[number1] = Answer1;
        Answers[number2] = Answer2;
        Answers[number3] = Answer3;
        Answers[number4] = Answer4;
        btnAnswer1.Content = Answers[0];
        btnAnswer2.Content = Answers[1];
        btnAnswer3.Content = Answers[2];
        btnAnswer4.Content = Answers[3];
    }

    private void noRepeat()
    {
        number1 = rand.Next(0, 4);
        number2 = rand.Next(0, 4);
        number3 = rand.Next(0, 4);
        number4 = rand.Next(0, 4);
        if (number1 == number2 ||
            number1 == number3 ||
            number1 == number4 ||
            number2 == number3 ||
            number2 == number4 ||
            number3 == number4)
        {
            noRepeat();
        }
    }

    private void btnStartGame(object sender, RoutedEventArgs e)
    {
        Canvas_StartGame.Visibility = System.Windows.Visibility.Collapsed;
        Canvas_Game.Visibility = System.Windows.Visibility.Visible;
    }

    private void Button_AnswerClick(object sender, RoutedEventArgs e)
    {
        string ClickedAnswer = ((System.Windows.Controls.Button)(sender)).Content.ToString();
        string ClickedButtonName = ((System.Windows.Controls.Button)(sender)).Name.ToString();

        switch (ClickedButtonName)
        {
            case "btnAnswer1":
                btnAnswer1.IsEnabled = false;
                break;
            case "btnAnswer2":
                btnAnswer2.IsEnabled = false;
                break;
            case "btnAnswer3":
                btnAnswer3.IsEnabled = false;
                break;
            case "btnAnswer4":
                btnAnswer4.IsEnabled = false;
                break;
            default:
                break;
        }
        if (CorrectAnswer == ClickedAnswer)
        {
            if (QuestionID < (dataModelList.Count() - 1))
            {
                QuestionID++;
            }
            else
            {
                MessageBox.Show(string.Format("Game Over! your final score : {0}", score));
                SaveHighScore();
            }

            score += scoreToHave;
            scoreToHave = 5;
            Question();
            btnAnswer1.IsEnabled = true;
            btnAnswer2.IsEnabled = true;
            btnAnswer3.IsEnabled = true;
            btnAnswer4.IsEnabled = true;
        }
        else
        {
            scoreToHave -= 2;
        }
        TextBlock_ScoreToHave.Text = string.Format("Score you can get: {0}", scoreToHave.ToString());
        TextBlock_Score.Text = string.Format("Score: {0}", score.ToString());
    }

    private void SaveHighScore()
    {
        if (IsolatedStorageSettings.ApplicationSettings.Contains("scoreList"))
        {
            scoreModelList = IsolatedStorageSettings.ApplicationSettings["scoreList"] as List<ScoreModel>;
            scoreModelList.Add(new ScoreModel { Score = score, DateSaved = DateTime.Now.ToShortDateString() });
            IsolatedStorageSettings.ApplicationSettings.Clear();
            IsolatedStorageSettings.ApplicationSettings.Add("scoreList", scoreModelList);
            IsolatedStorageSettings.ApplicationSettings.Save();
        }
        Canvas_StartGame.Visibility = System.Windows.Visibility.Collapsed;
        Canvas_Game.Visibility = System.Windows.Visibility.Collapsed;
        Canvas_HighScore.Visibility = System.Windows.Visibility.Visible;
        var tempList =
           from item in scoreModelList
           where item.Score > 0
           orderby item.Score descending
           select string.Format("Date: {0} Score: {1}", item.DateSaved, item.Score);
        ListBox_HighScore.ItemsSource = tempList.ToList();
        score = 0;
        scoreToHave = 5;
        QuestionID = 0;
        Canvas_StartGame.Visibility = System.Windows.Visibility.Visible;
        Canvas_Game.Visibility = System.Windows.Visibility.Collapsed;
    }

    private void Button_DoneClick(object sender, RoutedEventArgs e)
    {
        Canvas_StartGame.Visibility = System.Windows.Visibility.Visible;
        Canvas_Game.Visibility = System.Windows.Visibility.Collapsed;
        Canvas_HighScore.Visibility = System.Windows.Visibility.Collapsed;
    }
} 
```

**和我的 xaml 的片段：**

```
<Canvas Name="Canvas_Game" 
            VerticalAlignment="Center"
            HorizontalAlignment="Center" 
            Height="800" Width="480"
            Visibility="Collapsed">
        <!--Visibility="Collapsed">-->
        <Grid  Height="800" Width="480">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center">
                <TextBlock Name="TextBlock_ScoreToHave" Text="Score to have:"/>
                <TextBlock Name="TextBlock_Score" Text="Score:"/>
                <TextBlock Width="480" Text="Question:" FontSize="40"/>
                <TextBlock VerticalAlignment="Top" Name="TextBlock_Question" Text="What is the meaning of life?" FontSize="32" Width="480" TextAlignment="Left" TextWrapping="Wrap" MaxHeight="400"/>
                <Button Name="btnAnswer1"  Content="Answer1" Click="Button_AnswerClick"/>
                <Image Source="/chords/"></Image>
                <Button Name="btnAnswer2"  Content="Answer2" Click="Button_AnswerClick"/>
                <Button Name="btnAnswer3"  Content="Answer3" Click="Button_AnswerClick"/>
                <Button Name="btnAnswer4"  Content="Answer4" Click="Button_AnswerClick"/>

            </StackPanel>
        </Grid>
    </Canvas> 
```

如您所见，到目前为止我所做的是它只是在按钮中显示字符串（答案）。我想知道如何显示我从和弦文件夹中调用的图像。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-04T11:05:08.333

尝试以下操作：

```
<Button Name="btnAnswer4" Click="Button_AnswerClick">
<Image Source="chords/image.png"></Image>
</Button> 
```

我不知道添加是否`Content="Answer4"`会在图像上显示文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-16T21:31:51.733

这是我发现的一种将图像添加到按钮的漂亮方法（[来自此网站](https://blogs.msdn.microsoft.com/devschool/2011/06/27/make-an-image-button-using-xaml-its-easy-and-fun/)）。将您的图像源设置为图像的位置。（这可以在代码隐藏中完成，因为您的具体问题需要。）

```
<Button Height="26" Width="26" Cursor="Hand">
    <Button.Template>
        <ControlTemplate>
            <Image Source="Resources/OpenFolder_64x.png"/>
        </ControlTemplate>
    </Button.Template>
</Button> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:14:34.040

如果你想要一个圆形按钮，我建议使用[http://coding4fun.codeplex.com/](http://coding4fun.codeplex.com/)及其支持设置 ImagePath 的 RoundButton。 [http://coding4fun.codeplex.com/wikipage?title=RoundButton&referringTitle=Documentation](http://coding4fun.codeplex.com/wikipage?title=RoundButton&referringTitle=Documentation)

# c++ - 我需要为初始化的指针分配内存吗？

> ID：13701389
> 
> 赞同：1
> 
> 时间：2012-12-04T11:01:00.393
> 
> 标签：c++, c, pointers, memory-management

```
int a = 10;    
int *p = &a; 

*p = 20;  /* Is this a valid statement? */ 
```

我明白，如果我这样做`int *p;`，然后如果我这样做`*p = 10`，它是无效的，因为我没有分配任何内存`p`。但是，我想知道*初始化指向某个地址的指针是否会为该指针分配内存？*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T11:02:46.097

> 我想知道初始化指向某个地址的指针是否会为其分配内存？

它不分配任何内存。因为`p`a**指向已经分配的内存**

```
int a = 10;    // a is statically allocated and value 10 is assigned.
int *p = &a;  // p is pointed to address of a. 
*p = 20;  // at this point p points to that statically allocated memory 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-04T11:02:17.087

```
int a = 10;    
int *p = &a; 

*p = 20;  /* Is this a valid statement? */ 
```

答案就`YES`在这种特殊情况下。

但是当你这样做时：

```
int *ptr;  //declaration of pointer variable
*ptr = 20;  // It means you are assigning value 20 to the variable where `ptr` points to. 
```

但实际上`ptr`并不是指向任何地方，基本上它意味着它有`indeterminate value`。

这样做`*ptr = 20`会将值 20 放入 . 指向的内存地址`ptr`。所以它被称为`Undefined bahavior`

在您的情况下，它是有效的，因为它`&a`是有效的内存位置，并且`p`在我们这样做时开始指向该变量`p= &a`。

so`*p = 20`意味着实际更改或分配`a`使用指针的值`p`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-04T11:37:54.660

```
int a = 10;    
int *p = &a; 
```

> 我想知道初始化指向某个地址的指针是否会为该指针分配内存？

不。`a`and`p`变量需要在堆栈上分配，或者如果它们在函数之外，它们将作为全局变量分配内存。编译器会自动为您执行此操作，即使您只是...

```
int a;    
int* p; 
```

...没有`= <expression>`指定它们的初始值。基本上发生的情况是，在内存中的某个地址，将保留一些字节（可能是 4 或 8 个）来存储您标识为的值`a`，而在另一个地址，将保留更多的内存（可能是 4 或 8 个字节）存储您调用的值`p`。

`p`with的初始化`&a`只是将 的数字地址复制`a`到内存中`p`...它不会导致任何 [1] 的分配，也不会移动它们的内存。

使用一些虚构的地址可能有助于像这样可视化它......

```
MEMORY-ADDRESS            CONTENTS           NAME
1000                      10                 a
2000                      1000               p 
```

在这里，`p`“指向”是`a`因为`p`' 内存中的内容持有`a`' 的地址。但是 和 的地址`a`是`p`由编译器选择的，与它们的值的任何初始化或其他更改无关。

我认为在这里让您感到困惑的是，我们在使用指针时确实经常分配内存......比如：

```
p = new int; 
```

它的作用是在运行时动态地找到一些内存`int`，将该内存的地址加载到其中，`p`以便我们可以开始引用它`p`并使用它来存储`int`值。当我们完成它时，我们可以`delete p`将内存返回给系统，这样它就可以在另一个`new`完成时被回收和使用。这种类型的分配需要在您的代码中（或在您调用的某些库函数的代码中）显式执行。

[1] - 优化器可能选择不为`a`和/或`p`- 使用 CPU 寄存器分配实际内存，但这不会影响程序的功能行为（它可能会影响性能）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-04T12:06:52.957

A *pointer* is just a *number*. It has a special type to make sure it can represent the right range of numbers, and to aid program understanding, but basically it's just a number.

The *number* represents a *memory address*. You can't just make those up: you need to get a meaningful address from somewhere.

You can:

*   Take the address of an exiting variable: `p = &a`; or
*   Allocate some memory from the "heap": `p = malloc(size)`

That's it, once you have the address of some memory, you're done! You can now *dereference* the pointer using the `*` operator anywhere you like: `*p = somedata`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-04T11:02:39.670

不，它不分配内存。您`p`实际上指向相同的位置，`&a`并且您修改了相同的内存`*p = 20;`。这不会崩溃，因为您引用了分配的内存（对于`a`）。如果它是你真正想要的，只取决于你。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-04T11:10:06.607

> 但是，我想知道初始化指向某个地址的指针是否会为其分配内存？

“为它分配内存”是什么意思？当您创建一个指针时，您正在分配（静态）它的内存，或者换句话说，它需要保持存在的内存。

除此之外，还有指针指向的内存。当你说`int a = 10`你正在创建一个 int 并分配一个足够大的内存空间来容纳它时。
说然后`p = &a`意味着：“我的指针必须指向存储的内存地址`a`”。显然您已经分配了`a`，因此您可以安全地使用`*p`，但通常情况并非如此，您可能有一个未初始化的指针指向某个非法地址。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-04T11:04:12.867

不，不需要。因为您的指针指向`a`变量的地址。因此，当您使用 时`*p = 20`， 的值`a`会发生变化。

所以，你的问题的答案是`YES`。:)

# java - 仅使用运行时异常的 Java 数据对象规范？

> ID：13701391
> 
> 赞同：2
> 
> 时间：2012-12-04T11:01:04.067
> 
> 标签：java, jdo, datanucleus, runtimeexception, jsr

我们正在评估 JDO 在我们的应用程序中用作数据管理层。要求是具有与任何数据存储的零依赖关系的抽象良好的数据管理。

我们发现 JDO 非常有前途，并且正在了解数据核的实现。

我们考虑的一件突出的事情是 JDO 主要遵循运行时异常策略。

见 [http://docs.tpu.ru/docs/oracle/en/fmw/11.1.1.6.0/apirefs.1111/e13946/jdo_overview_arch.html](http://docs.tpu.ru/docs/oracle/en/fmw/11.1.1.6.0/apirefs.1111/e13946/jdo_overview_arch.html)

所有 JDO 异常的父异常是 javax.jdo.JDOException 并且正在扩展运行时异常。

我们知道调用 API 时引发的异常显然是运行时的。但是，如果我们有一个已检查的异常，它是否易于管理？

请对此发表评论。有人可以帮助理解通过 API 使用运行时异常的理念吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:35:47.967

了解使 api 引发 Runtime 异常的使用方法。请点击此链接。很好 [http://onjava.com/onjava/2003/11/19/exceptions.html](http://onjava.com/onjava/2003/11/19/exceptions.html)

上面链接中的一句话说

永远不要让特定于实现的检查异常升级到更高层。例如，不要将 SQLException 从数据访问代码传播到业务对象层。业务对象层不需要知道 SQLException。你有两个选择：

如果期望客户端代码从异常中恢复，则将 SQLException 转换为另一个检查异常。

如果客户端代码对此无能为力，则将 SQLException 转换为未经检查的异常。

大多数时候，客户端代码对 SQLExceptions 无能为力。不要犹豫，将它们转换为未经检查的异常。

我认为这清楚地解释了运行时异常的好处

# c# - 如何在 ASP.NET 应用程序中使用 WCF 客户端？

> ID：13701394
> 
> 赞同：0
> 
> 时间：2012-12-04T11:01:17.320
> 
> 标签：c#, asp.net, wcf, security, wif

我有这些组件：

1.  ASP.NET 应用程序（网站）
2.  WIF 安全
3.  WCF 服务（通过 2 保护）

假设 WCF 服务 (TestService) 具有一种安全方法：

```
 Boolean IsItWorking(); 
```

现在网站中的页面执行以下步骤：

1.  转到受限页面
2.  提供登录凭据
3.  处理 WIF 请求/响应 => 创建的 cookie
4.  页面将 ClientCredentials 提供给单例！WCF 客户端参考
5.  页面调用 TestService.IsItWorking()

它工作得很好，直到我意识到单例客户端实例不起作用。如何向客户提供凭据？在哪里保存凭证？如何正确解决这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T23:43:56.003

可以使用 WCF WSHttpBinding 简单地完成对 WCF 服务的基于用户名/密码的身份验证。有很多关于如何做到这一点的示例代码。

[http://codebetter.com/petervanooijen/2010/03/22/a-simple-wcf-service-with-username-password-authentication-the-things-they-don-t-tell-you/](http://codebetter.com/petervanooijen/2010/03/22/a-simple-wcf-service-with-username-password-authentication-the-things-they-don-t-tell-you/)

不过，有一些警告伴随着这一点。如果您在方案中引入身份提供者（本地联合身份与第 3 方身份提供者），WIF 会为您提供更多选择。然后，当用户登录时，WIF 会为您的 ASP.NET 应用程序提供一个安全令牌以及 ASP.NET cookie。

此安全令牌充当声明的工具，并且您的 ASP.NET 应用程序还可以重用此令牌来向您的 WCF 后端进行身份验证。WIF 可帮助您在 ASP.NET 和 WCF 端进行此配置。查看 WIF 配置中的 SaveBootstrapTokens=true 属性，并查看 ChannelFactory.CreateChannelWithIssuedToken() 以使用令牌与 WCF 服务通信。[WIF SDK](http://www.microsoft.com/en-us/download/details.aspx?id=4451)有一个 WSTrustChannel 示例来演示它的工作原理，还有更多在线示例。

# web-services - 通过本地网络访问 Web 服务

> ID：13701403
> 
> 赞同：1
> 
> 时间：2012-12-04T11:01:57.303
> 
> 标签：web-services, iis, networking

我在使用 IIS 托管 Windows 7 的计算机上有一个 Web 服务，我可以使用链接访问它

```
http://localhost/election_service/service.asmx 
```

我有另一台计算机仅使用交换机与第一台计算机连接，每台计算机都有一个 IP，第一台计算机有 192.168.1.219，第二台计算机有 192.168.1.3

我想访问第二台计算机上的网络服务

当我尝试访问网络服务并将 localhost 替换为 127.0.0.1 或 192.168.1.219 时，在第一台计算机上

```
 http://192.168.1.219/election_service/service.asmx 
```

它失败了，所以我怎样才能使它可访问，以便我可以使用此链接从第二台计算机访问它

# emacs - 如何使第二个窗口中的点跳转到第一个窗口点指定的行号

> ID：13701408
> 
> 赞同：2
> 
> 时间：2012-12-04T11:02:08.820
> 
> 标签：emacs, emacs24

我有两个并排拆分的缓冲区。第一个窗口有一个错误日志，其中包含带有一些错误代码的行号。例如

```
ERROR: CHSDFT: <description> in foo.v, line 200|0 
```

我`foo.v`在第二个窗口中打开了。现在我记得在 emacs 中阅读过一个漂亮的快捷方式，它的工作原理如下。如果我有焦点错误日志缓冲区并且我的点位于值 200 之上，如果我执行击键，则该点将移动到第二个缓冲区中的第 200 行。不幸的是，我忘记了击键，经过多次谷歌搜索，我仍然没有找到它。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T11:08:36.697

知道了。它`C-u M-g M-g` 的描述[在这里](http://www.gnu.org/software/emacs/manual/html_node/emacs/Select-Buffer.html)说：

```
Read a number n and move to line n in the most recently selected buffer other than the current buffer. 
```

# database - cakephp - belongsTo 模型的表格

> ID：13701421
> 
> 赞同：0
> 
> 时间：2012-12-04T11:02:38.173
> 
> 标签：database, forms, cakephp, model

我创建了以下模型来链接 2 个关系表：

```
 class Ficha extends AppModel {

    //public $useTable = 'ficha_seg';

    var $primaryKey = 'id_ficha';

    var $name = 'Ficha';
    var $belongsTo = array(
        'Perigo' => array(
            'className'    => 'Perigo',
            'foreignKey'   => false,
            'conditions' => 'Perigo.id_fichas = Ficha.id_ficha'
        )
    );
} 
```

现在，我有一个需要来自 Ficha 类的数据的表单，然后被重定向到另一个 ctp 页面，我将在其中输入“Perigos”表的数据。但是，由于我仍然是 cakephp 的新手，我很难构建第二种形式来在“Perigos”表中插入数据。这是我目前构建的与第二种形式相关的代码：

FichasController.php（应该将数据保存在“Perigos”表上的方法：

```
public function preencher_ficha(){

if ($this->request->is('ficha')) {
        $this->Ficha->create();

    if ($this->Ficha->Perigo->save($this->request->data)) {
        $last_id=$this->Ficha->getLastInsertID();
        $this->Session->setFlash('Your post has been updated '.$last_id.'.');
        //$this->redirect(array('action' => 'preencher_ficha'));
    } else {
        $this->Session->setFlash('Unable to qualquer coisa your post.');
    }
}   
} 
```

preencher_ficha.ctp 文件格式为：

```
echo $this->Form->create('Ficha->Perigo', array('action' => 'index'));
echo $this->Form->input('class_subst', array('label' => 'Classificação:'));
echo $this->Form->input('simbolos_perigo', array('label' => 'Símbolos:'));
echo $this->Form->input('frases_r', array('label' => 'Frases:'));
echo $this->Form->end('Finalizar Ficha'); 
```

在这里我猜创建部分是错误的，但我认为我在控制器部分也有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:52:20.610

我建议您以其他方式构建您的观点。如果您想将数据保存在`Perigos`表格中，请使用 Perigos 视图中的`save`方法`PerigosController`和使用`save.ctp`文件来显示您要使用的表格。

无论如何，如果您想按照自己的方式进行操作，您的表单应该指向`preencher_ficha`提交数据的函数：

```
echo $this->Form->create('Ficha->Perigo', array('action' => 'preencher_ficha')); 
```

另外，你必须改变这个：

```
if ($this->request->is('ficha')) { 
```

对此

```
if ($this->request->is('post')) { 
```

这只是一种检查数据是来自 POST 方法还是来自 GET 方法的一种方法。

而且，只是一个建议：不要为控制器或模型使用西班牙语名称。如果你使用英文的，那么遵循 CakePHP 的命名约定会更简单，它会更有意义，并且会节省你一些时间。

# eclipse - Windows 7 64 位上 eclipse 4.2 (STS 3.1) 的最佳内存设置？

> ID：13701428
> 
> 赞同：2
> 
> 时间：2012-12-04T11:02:52.953
> 
> 标签：eclipse, performance, spring

如果这个问题确实像 SO 警告我的那样过于主观，我会提前道歉。

我的工作站有 8 GB 的内存并运行 Windows 7 64 位。我使用 Spring 工具套件 (3.1)，但一旦我开始打开和修改 spring 配置 (.xml) 文件，STS 就会变得异常缓慢。

我已经尝试关闭“自动构建”并增加内存设置，但没有运气。

我应该如何更改我的 .ini 文件？这是我现在设置的：

```
-vm
C:/Program Files/Java/jdk1.7.0_07/bin/javaw.exe
-startup
plugins/org.eclipse.equinox.launcher_1.3.0.v20120522-1813.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.200.v20120522-1813
-product
org.springsource.sts.ide
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
4096M
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms512m
-Xmx2048m
-XX:MaxPermSize=512m 
```

我的 collageu 在 IntelliJ 中运行相同的项目，没有问题。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-26T20:32:13.670

```
After doing lot of research , this arguments solves my problem

-nosplash
--launcher.defaultAction
openFile
-vm
C:\Program Files\Java\jdk1.6.0_45\jre\bin\server\jvm.dll
#/Library/Java/JavaVirtualMachines/jdk1.7.0_25.jdk/Contents/Home/bin/java #OS X
-vmargs
-Xincgc
-Xss1m
-Duser.name=FirstName LastName
-Dfile.encoding=UTF-8
-Dosgi.requiredJavaVersion=1.6
-Declipse.p2.unsignedPolicy=allow
-Declipse.p2.MD5Check=false
-Xms128m
-Xmx1024m
-XX:NewSize=16m
-XX:PermSize=128m
-XX:MaxPermSize=400m
-XX:MaxPermHeapExpansion=20m
-XX:+UseConcMarkSweepGC
-XX:CMSInitiatingOccupancyFraction=70
-XX:+UseCMSInitiatingOccupancyOnly
-XX:+UseParNewGC
-XX:+CMSConcurrentMTEnabled
-XX:ConcGCThreads=2
-XX:ParallelGCThreads=2
-XX:+CMSIncrementalPacing
-XX:CMSIncrementalDutyCycleMin=0
-XX:CMSIncrementalDutyCycle=5
-XX:GCTimeRatio=49
-XX:MaxGCPauseMillis=20
-XX:GCPauseIntervalMillis=1000
-XX:+UseCMSCompactAtFullCollection
-XX:+CMSClassUnloadingEnabled
-XX:+DoEscapeAnalysis
-XX:+UseCompressedOops
-XX:+AggressiveOpts #Doesnt work with Android see Google Code Android issue 9883
-XX:+ExplicitGCInvokesConcurrentAndUnloadsClasses
-Xverify:none 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:33:57.863

一个 2gb 的堆对于 eclipse 来说已经足够了，我自己用它。我怀疑罪魁祸首是 Eclipse 4.2 Juno。它有很好的记录[性能问题](https://bugs.eclipse.org/bugs/show_bug.cgi?id=385272)。[eclipse 下载站点](http://download.eclipse.org/eclipse/downloads/eclipse3x.html)上有一个隐藏的 3.8 Juno 版本。它具有与 4.2 Juno 相同的所有功能，但使用了更稳定和高性能的旧 UI 组件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-01T23:25:28.827

[http://www.youtube.com/watch?v=-JC7B1a_7dQ](http://www.youtube.com/watch?v=-JC7B1a_7dQ)这是关于 eclipse 和 android 最佳性能的一个很好的指南

# java - HtmlUnit 显示具有已填写字段的同一页面，但不进入下一页

> ID：13701432
> 
> 赞同：2
> 
> 时间：2012-12-04T11:03:09.030
> 
> 标签：java, forms, submit, htmlunit

我正在尝试使用 HtmlUnit 提交表单，但不幸的是，在尝试了几乎所有内容后，我得到了相同的页面，并填写了字段。我期待另一个页面，其中包含我需要处理的信息。当我使用普通的网络浏览器时，我确实明白这一点。显然有些事情我做的不对。请帮忙！

```
final WebClient webClient = new WebClient(BrowserVersion.CHROME_16, "172.16.33.226", 8080);
webClient.setRefreshHandler(new RefreshHandler() {

            public void handleRefresh(Page page, URL url, int arg) throws IOException {
                System.out.println("handleRefresh");
            }
        });
webClient.getOptions().setRedirectEnabled(true);
webClient.getCookieManager().setCookiesEnabled(true);
webClient.getOptions().setCssEnabled(true);
webClient.setAjaxController(new NicelyResynchronizingAjaxController());
final HtmlPage page = webClient.getPage("http://221.120.224.197/ovportal/jsp/security/obs_login_html.jsp");
System.out.println(page.getTitleText());
final HtmlForm nform = page.getFormByName("nform");
final HtmlForm pwform = page.getFormByName("pwform");

HtmlSubmitInput button;
final HtmlTextInput textField;
final HtmlPasswordInput passField;
final HtmlHiddenInput hidden;
textField = nform.getInputByName("J_USERNAME"); 
```

这不是真正的用户名。

```
textField.setValueAttribute("******");
hidden = pwform.getInputByName("J_USERNAME");
passField = pwform.getInputByName("J_PASSWORD"); 
```

这不是真正的密码。

```
passField.setValueAttribute("******");
button = pwform.getInputByValue("Login");
pwform.getSelectByName("Timezone").setSelectedAttribute("PLT", true);
java.util.List<HtmlOption> list = pwform.getSelectByName("Timezone").getSelectedOptions();
for (HtmlOption option : list){
    System.out.println(option.toString());
}
System.out.println("Before click " + hidden.getValueAttribute() + " " + textField.getValueAttribute() + ": ");

HtmlPage page2 = (HtmlPage) button.click();
System.out.println(page2.getUrl().toString());
System.out.println("After click " + hidden.getValueAttribute() + " " + textField.getValueAttribute() + ": "
                + passField.getValueAttribute() + ": " + page2.getTitleText() + "\n" + page2.asText());
String htmlContent = page2.asXml();
java.io.File htmlFile = new java.io.File("C:/index.html");
java.io.PrintWriter pw = new java.io.PrintWriter(htmlFile);
pw.print(htmlContent);
pw.close();
java.util.List<HtmlAnchor> anchors = page2.getAnchors();
for (HtmlAnchor anch : anchors) {
    System.out.println(anch.getHrefLangAttribute() + "*.*" + anch.getHrefAttribute());
    }

webClient.closeAllWindows(); 
```

# asp.net - 如何通过 url 定位 http 处理程序

> ID：13701436
> 
> 赞同：0
> 
> 时间：2012-12-04T11:03:14.340
> 
> 标签：asp.net, devexpress, httphandler

我正在使用 DevExpress Web 组件和 ASP.NET WebForms。它通过处理程序（例如，/DXR.axd?r=5_0dsD）公开资源（.js 和 .css）

我怎么知道哪个 dll 处理这个 URL 请求以及它的位置？好的，可能它位于 Web 应用程序的 /bin 目录中，但我仍然想知道如何将 Url 映射到物理 dll？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:54:38.183

查看此[文档文章](http://documentation.devexpress.com/#AspNet/CustomDocument7540)以获取有关 ASPxHttpHandlerModule 注册的帮助。请注意，如果您在集成模式下使用 IIS 7+，则还必须在 system.webServer 部分中注册处理程序/模块。确保您引用了在登台环境中安装的相同 DevExpress 组件版本。

# rpm - RPMBUILD：是否可以在安装时对 RPM 配置文件进行移植

> ID：13701437
> 
> 赞同：0
> 
> 时间：2012-12-04T11:03:19.790
> 
> 标签：rpm, rpmbuild, rpm-spec

根据我的要求，所有服务器的 rpm 可能相同，但根据服务器环境（如生产、登台、测试或其他）只有一个配置文件更改。我有所有服务器的配置文件包，但我不想在规范文件中对其进行硬编码，或者无法为所有服务器创建不同的 rpm。可以在客户端上安装 rpm 时指定配置文件的名称边。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:34:23.160

可能会重复[这个](https://stackoverflow.com/questions/12696131/how-to-create-rpm-subpackages-using-the-same-paths-for-different-envs)，所以我会从那里复制我的答案......

* * *

我不认为有本地方式。我会`%post`像你所说的那样做。

但是，我会这样做（类似于我为工作开发的仅限内部包所做的事情）：

1.  三个单独的文件`/etc/name.conf-developer`，`/etc/name.conf-live`等等。
2.  让所有三个包都提供一个虚拟包，例如`name-config`
3.  有主包需要`name-config`
    *   这将使`rpm`,`yum`或任何需要在同一事务中安装至少一个的
4.  让所有三个包相互冲突
5.  将每个配置包的`%post`（和可能的`%verify`）符号链接`/etc/name.conf`到正确的配置
    *   这也有助于向用户展示正在发生的事情

缺点：

1.  这有点骇人听闻
2.  `rpm --whatprovides /etc/name.conf`会说它不属于任何包

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T05:02:52.733

亚伦的回答是一个很好的方法。另一种选择是使用 bash if 语句根据主机名（例如 *prod）在 %post 部分中的配置文件上运行 sed 命令。这将允许您根据环境替换特定变量。显然这是一个高级示例，因为我不知道您的配置设置是什么样的。不幸的是，这是一个坏包的例子，因为其他人很难管理。我建议您将任何配置文件移出 RPM，然后开始使用[Salt](http://docs.saltstack.org/en/latest/topics/index.html)、[Chef](http://www.opscode.com/chef/)或[Puppet](http://docs.puppetlabs.com/)，因为这是它们旨在完成的任务。

# internationalization - 如何在 CQ5 中将 i18n 功能用于页面级别而不是用户级别的不同语言？

> ID：13701442
> 
> 赞同：3
> 
> 时间：2012-12-04T11:03:36.937
> 
> 标签：internationalization, aem

我需要在**页面级别**的组件中使用**i18n ，我通过****为法语**创建 i18n 文件夹来实现它，但我没有得到确切的结果。当我将用户语言更改为法语时，我得到了所需的输出，所以我的问题是 i18n 实现仅适用于**用户语言级别**，或者是否需要进行任何自定义才能在**页面级别**获得所需的输出。

 ******* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T16:48:36.587

如果您使用的是 java `com.day.I18n`API，则需要使用基于页面语言的资源包对其进行初始化：

```
I18n i18n = new I18n(slingRequest.getResourceBundle(currentPage.getLanguage(false))); 
```******

# magento - Magento - 以编程方式将多个产品添加到购物车

> ID：13701446
> 
> 赞同：0
> 
> 时间：2012-12-04T11:03:48.720
> 
> 标签：magento, product, cart

在尝试将多个产品添加到购物车的过程中，实际上我有一个带有表单元素的块，该元素定义了添加到购物车的产品（免费产品，由观察者事件处理）。将产品价格更改为免费的观察者事件运行良好，但是使用以下方法将多个产品添加到购物车被证明很麻烦：

```
public function addFreeItems($observer) {
$cart = Mage::getSingleton('checkout/cart');
$freeItems = $_SESSION['package_free_item'];
$freeItemSplit = explode(",", $freeItems);
try {
    foreach ($freeItemSplit as $product) {
        $product = Mage::getModel('catalog/product')->load($product);
        $cart->addProduct($product, array('qty' => '1'));
        $cart->save();
    }
} catch(Exception $e) {
       Mage::log($e->getMessage());
       echo $e->getMessage();
    }
} 
```

该方法适用于单个项目并且可以很好地添加，但是后续项目（明确定义在位置 [1] 的数组中）不会添加到购物车。

我不知道为什么这在技术上不能正常工作。在添加过程中没有发现异常，并且调试还显示该数组填充了两个项目。

谁能说明为什么这不起作用？

谢谢！

XML 更新：

```
<sales_quote_add_item>
        <observers>
            <priceupdate_observer>
                <type>singleton</type>
                <class>Edge_Package_Model_ObserverPrice</class>
                <method>updatePrice</method>
            </priceupdate_observer>
        </observers>
</sales_quote_add_item> 
```

它有效地更新了包裹的定价，但也从其中调用了添加免费产品。

编辑2：

```
public function addFreeItems($observer) {
$route = Mage::app()->getFrontController()->getRequest()->getRouteName();
if($route == "packages" && $_SESSION['package_free_item'] != null ) {
    $freeItems = $_SESSION['package_free_item'];
    $product_ids = explode(",", $freeItems);
    $cart = Mage::getSingleton('checkout/cart');
        foreach ($product_ids as $product_id) {
        $product = Mage::getModel('catalog/product')->load($product_id);
        $cart->addProduct($product, array('qty' => '1', 'product_id' => $product->getId()));  
        }
    $cart->save();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:41:45.883

```
<checkout_cart_product_add_after>
        <observers>
            <priceupdate_observer>
                <type>singleton</type>
                <class>Edge_Package_Model_ObserverPrice</class>
                <method>updatePrice</method>
            </priceupdate_observer>
        </observers>
</checkout_cart_product_add_after>

public function addFreeItems($observer) {
   $quote = Mage::getSingleton('checkout/session')->getQuote();
   //foreach loop
   $quote->addProduct($product, array('qty' => '1', 'product_id' => $product->getId()));
} 
```

请参阅 /app/code/core/Mage/Checkout/Model/Cart.php 中的方法 addProduct

请参阅[http://magentocommerce.com/boards/viewthread/39334](http://magentocommerce.com/boards/viewthread/39334)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T01:48:45.653

我也遇到过这个，你需要声明

```
$cart = Mage::getModel('checkout/cart'); 
```

在foreach里面。我不确定它为什么有效，但它似乎对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-25T03:51:50.577

可能这个会有所帮助：

[http://deepakbhatta.com/magento-add-multiple-items-to-cart/](http://deepakbhatta.com/magento-add-multiple-items-to-cart/)

```
 $cart = Mage::helper('checkout/cart')->getCart();
        $ms="";
        foreach($validProducts as $sku => $qty) {
            $params = array('qty' => $qty);
            $id = Mage::getModel('catalog/product')->getIdBySku($sku);
            $product = Mage::getModel('catalog/product')->load($id);;
            $cart->addProduct($product, $params);
            $msg .= $product->getName(). " is successfully added into cart<br>";
        }
         $cart->save(); 
```

# android - android中的图像拼贴

> ID：13701455
> 
> 赞同：2
> 
> 时间：2012-12-04T11:04:16.003
> 
> 标签：android, image, android-image

**我想要的是：**

我想创建一个 Android 应用程序来创建图像拼贴。多个图像应该能够在触摸时移动、缩放和旋转。

**我尝试了什么：**

`custom view`在、`surface view`和`matrix manipulation`通过在活动中添加图像视图进行了尝试。（我尝试以多种方式实现这一点，但每次它都卡在一个点上）在互联网上看到了很多方式，但所有这些方式都允许单个图像执行所有这些，我无法用多个来做到这一点图片。

谁能指导我正确的方向来实现这一目标？无论是通过我上面提到的任何方式还是其他方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T06:39:23.143

这是一个使用手势在单个活动中显示多个图像的[应用程序。](https://github.com/wsanville/modified-multitouch-controller)

类中有两个图像数组`PhotoSortrView`。

从第一个图像数组中删除评论并评论第二个。

# django - Django 1.4 prefetch 相关不保留继承模型的结果

> ID：13701462
> 
> 赞同：3
> 
> 时间：2012-12-04T11:04:48.347
> 
> 标签：django, orm

我正在尝试使用与防止 Django 进行过多查询相关的预取，但我无法使其适用于具有继承的模型。

问题是当我用继承遍历模型时，模型实例没有被缓存，并且发出了一个 SQL 查询。

我不确定这是 Django 错误还是我以某种方式滥用它。

这是我的代码：

模型.py：

```
class ParentBase(models.Model): pass

class Parent(models.Model): pass

class ParentWithBase(ParentBase): pass

class Child(models.Model):
    parent = models.ForeignKey('Parent')
    parent_with_base = models.ForeignKey('ParentWithBase') 
```

测试用例：

```
def test_prefetch_error(self):
    Child.objects.create(parent = Parent.objects.create(), parent_with_base = ParentWithBase.objects.create())
    child = Child.objects.prefetch_related('parent','parent_with_base').all()[0]
        with self.assertNumQueries(0):
            child.parent # This works just fine - no queries are emitted
        with self.assertNumQueries(0):
            child.parent_with_base # TEST FAILS HERE - since one query is emitted 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T11:43:06.450

根据[https://code.djangoproject.com/ticket/19420](https://code.djangoproject.com/ticket/19420)，它不缓存此结果的事实已在 Django 1.5 中得到修复。

但在这种情况下，您可以简单地使用`select_related`而不是`prefetch_related`. 如果您只是将其中一个替换为另一个，则您的测试通过。

`select_related`遵循外键关系。`prefetch_related`当您有多对多和多对一关系时更有用，因为它对每个关系进行单独的查找，然后在 Python 中进行“连接”。Using`select_related`只会使用连接进行一次数据库调用，但`prefetch_related`会立即进行多次调用，因为它假定它必须做它的事情。

# bluetooth - Windows Phone 8：监听蓝牙连接

> ID：13701463
> 
> 赞同：1
> 
> 时间：2012-12-04T11:04:47.680
> 
> 标签：bluetooth, windows-phone-8

我正在尝试**收听**从 Android 设备到我的 WindowsPhone8 设备的传入蓝牙连接

有没有办法做到这一点？

（对于 WP8 -> WP8 连接，我可以使用 PeerFinder，但它不适用于 Android / [任何其他设备] -> WP8 连接）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T20:04:18.607

Windows Phone 8 上的 NFC 是 NDEF 兼容的“NFC 数据交换格式”，因此这应该是可能的。我会查看 codeplex 上的 NDEF 库，看看他们是否有“包装”的东西来帮助你。

[http://ndef.codeplex.com/](http://ndef.codeplex.com/)

您还可以使用 Nuget 添加它

[将 NuGet ndef 库添加到 windows phone 8 项目](https://stackoverflow.com/questions/13342630/adding-nuget-ndef-library-to-windows-phone-8-project)

最后，这篇文章讨论了通过 NFC 将 Android 连接到 Windows 8 它应该与 WP8 相同

[http://www.lewisbenge.net/index.php/2012/09/connecting-android-and-windows-8-via-nfc/](http://www.lewisbenge.net/index.php/2012/09/connecting-android-and-windows-8-via-nfc/)

# javascript - 复选框的jquery ui工具提示

> ID：13701468
> 
> 赞同：1
> 
> 时间：2012-12-04T11:05:04.570
> 
> 标签：javascript, jquery-ui, checkbox

我无法让 jquery ui 工具提示显示复选框...我做错了什么还是不可能？

```
<input name="item.AutoOpen" class="check-box" id="item_AutoOpen" type="checkbox" CHECKED="checked" data-val-required="The Auto Open field is required." data-val="true" value="true"/>

 <button class='m-btn blue' title="test" style='width: 200px;margin:4px;'>hello</button>
​
<script type="text/javascript">
    $(function () {
        $("*").tooltip({ content: "Awesome title!" });     
    });
</script> 
```

适用于按钮但不适用于复选框。

[http://jsfiddle.net/XseWc/123/](http://jsfiddle.net/XseWc/123/)

编辑：由于缺少标题而无法工作（我避免添加，因为您无法在 ASP.Net MVC 中使用 EditorFor 轻松添加标题）...

解决方案：

```
 $(':checked').attr('title', 'Auto Load').tooltip(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T11:10:56.510

为复选框添加标题属性

# php - 读取 PDF 表单数据

> ID：13701473
> 
> 赞同：2
> 
> 时间：2012-12-04T11:05:15.740
> 
> 标签：php, parsing, pdf, post, submit

我想创建一个 PDF 表单，通过 POST 将其数据提交到 PHP 页面。我希望 PHP 能够使用`$_POST[]`

这可能吗？

我在 Acrobat Pro 中创建了一个 PDF，并在底部放置了一个按钮。该操作设置为“提交表​​单”，并且我已将导出格式设置为 HTML。

在表单提交到的 PHP 文件中，运行`print_r($_POST);`只是给了我一个空数组。

请问如何发送/访问数据`POST`？

谢谢 ：）

# asp.net - Gridview1 编辑事件到Common Routine() 到Gridview1 onRowEdit

> ID：13701475
> 
> 赞同：-3
> 
> 时间：2012-12-04T11:05:24.373
> 
> 标签：asp.net

在 aspx 网站中，每当在我的项目中引发 Gridview 编辑事件时。它首先调用一个通用例程来验证编辑授权，然后它可能继续它的事件.. ??

喜欢

Gridview1编辑事件->Common Routine()->Gridview1 onRowEdit

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:32:03.157

也许你需要`PreInit`方法。所以你可以像下面这样添加你的代码：

```
protected void Page_Init(object sender, EventArgs e)
{
   //do something...
} 
```

另请查看[http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx处的 ASP.net 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472%28v=vs.100%29.aspx)

## 更新

如果你想`PreInit`在你的所有页面上执行。简单地说，只需创建新的公共类继承自`System.Web.UI.Page`，并且您的所有页面都继承自该公共类。看代码示例：

```
//file name: Common.cs
public class Common : System.Web.UI.Page {

    protected void Page_Init(object sender, EventArgs e)
    {
       //do something...
    }
}

//file name: YourPage.aspx.cs
public class YourPage : Common {

    protected void Page_Load(object sender, EventArgs e)
    {
       //do something...
    }
} 
```

# iphone - 键盘出现时如何使 UITextView 可滚动？

> ID：13701478
> 
> 赞同：0
> 
> 时间：2012-12-04T11:05:36.130
> 
> 标签：iphone, objective-c, keyboard, scroll, uitextview

我想知道如何`UITextView`在编辑时使其可滚动？当用户想要编辑它时，键盘会显示，但随后`UITextView`不再可滚动。所以键盘后面的所有文字都是不可见的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T11:42:48.003

你可以减少 sizeOf 你 textView on keyBoard 出现

```
-(void)textViewDidBeginEditing:(UITextView *)textView
{
    CGRect frame = txtAddNote.frame;
    frame.size.height = 150; //Decrease your textView height at this time
    txtAddNote.frame = frame;
}
-(IBAction)DoneBarBtnPress:(id)sender
{
    CGRect frame = txtAddNote.frame;
    frame.size.height = 212; //Original Size of textView
    txtAddNote.frame = frame;

    //Keyboard dismiss 
    [self.view endEditing:YES];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:08:59.073

像这样开始编辑时只需滚动视图`UITextView`..

```
-(void)textViewDidBeginEditing:(UITextView *)textView
{
    [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.3];
    self.view.frame = CGRectMake(self.view.frame.origin.x, -160, self.view.frame.size.width, self.view.frame.size.height);
    [UIView commitAnimations];

} 
```

并在 endEditing 中设置默认屏幕，如下所示..

```
-(void)textViewDidEndEditing:(UITextView *)textView
{
    [textView resignFirstResponder];
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    self.view.frame = CGRectMake(self.view.frame.origin.x, 0, self.view.frame.size.width, self.view.frame.size.height);
    [UIView commitAnimations];
} 
```

**更新**

在这里，根据您的要求，我们用我们的视图设置框架，请参见下面的代码

```
-(void)textViewDidBeginEditing:(UITextView *)textView
    {
        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:0.3];
         [yourTextView setFrame:CGRectMake(self.view.frame.origin.x,self.view.frame.origin.y,self.view.‌​frame.size.width,self.view.frame.size.height - 160)];
        [UIView commitAnimations];

    }

-(void)textViewDidEndEditing:(UITextView *)textView
    {
        [textView resignFirstResponder];
        [UIView beginAnimations:nil context:NULL];
        [UIView setAnimationDuration:0.3];
        [yourTextView setFrame:self.view];
        [UIView commitAnimations];
    } 
```

# r - R 图表：创建 Tufte 的水平条形线

> ID：13701485
> 
> 赞同：20
> 
> 时间：2012-12-04T11:05:56.630
> 
> 标签：r, graph, ggplot2

我们如何在 R 中复制 Tufte 的隐式水平线？

![簇绒棒](../Images/2f748ee59073fa1930b43070c0e5a7ff.png)

例如，以下是一个很好的起点：

```
library(ggplot2)    
ggplot(msleep, aes(x=order)) + stat_bin() + theme_bw() 
```

删除边界线应该很简单。关键点，用条覆盖水平线，我不清楚。

我在这里想象两种方法：

1.  此特定示例的临时解决方案
2.  建议如何将其合并到主题中

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-04T11:10:22.113

原则上，这很简单——您需要做的就是在新图层中绘制白色水平线。您可以使用它`geom_hline`来执行此操作：

```
library(ggplot2)    
ggplot(msleep, aes(x=order)) + stat_bin() + theme_bw() +
  geom_hline(yintercept=seq(5, 20, 5), col="white") 
```

![在此处输入图像描述](../Images/015d9932d842851518db7359091d56b8.png)

至于你的第二个问题 - 我想这可能很难融入主题，尽管应该可以创建一个自定义几何图形来读取 y 比例中断并相应地绘制线条。

（我很想被证明是错误的。）

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-24T13:17:21.850

对@Andrie 答案的补充不是很大，但您可以利用该软件包`ggthemes`制作带有`ggplot2`. 下面，我正在使用，使用包`theme_tufte`更改字体，并用于微调所有其他视觉功能：`extrafont``opts`

```
library(ggthemes)
library(extrafont)
ggplot(msleep, aes(x=order)) + stat_bin(width=0.6, fill="gray") + 
  theme_tufte(base_family="GillSans", base_size=16, ticks=F) +
  theme(axis.line=element_blank(), axis.text.x=element_blank(),
        axis.title=element_blank()) +
  geom_hline(yintercept=seq(5, 20, 5), col="white", lwd=1.2) 
```

![在此处输入图像描述](../Images/8779df1e4aeb943969eb490dd5023b8e.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-26T18:44:09.440

还有一个非常简单的基本 R 解决方案：

```
tmp <- table(msleep$order)
barplot(tmp, col='black', las=3)
abline(h=seq(5, max(tmp), by=5), col='white', lwd=2) 
```

![在此处输入图像描述](../Images/5353f32b410bf4f3f4d4225cf24dbac3.png)

# c# - Monodevelop中的Android App开发和错误

> ID：13701488
> 
> 赞同：0
> 
> 时间：2012-12-04T11:06:09.560
> 
> 标签：c#, android, xamarin.android, monodevelop

我在 monodevelop（版本 3.05）中编写了一个 hello world 应用程序并尝试在模拟器上运行它。程序编译成功，但是当我尝试运行它时出现以下错误。

```
 Detecting installed packages

   Installing shared runtime

   Deployment failed. Internal error 
```

我已经安装了所有先决条件。

```
 1\. mono for Android
     2\. mono framework
      3\. gtk#
       4\. Android SDK 
```

![我通过 SDK Manager 安装所有软件包](../Images/0c7a780969b77e02131b3d928d24c3f4.png)

以下是代码。

```
 using System;

  using Android.App;
  using Android.Content;
  using Android.Runtime;
  using Android.Views;
  using Android.Widget;
  using Android.OS;

   namespace  myAndroid
    {
[Activity (Label = "myAndroid", MainLauncher = true)]
public class Activity1 : Activity
{
    int count = 1;

    protected override void OnCreate (Bundle bundle)
    {
        base.OnCreate (bundle);

        // Set our view from the "main" layout resource
        SetContentView (Resource.Layout.Main);

        // Get our button from the layout resource,
        // and attach an event to it
        Button button = FindViewById<Button> (Resource.Id.myButton);

        button.Click += delegate {
            button.Text = string.Format ("{0} clicks!", count++);
        };
    }
    }
         } 
```

编辑：.Net 2.0 .Net 4.0 visual studio 2010 express 已经安装在我的电脑上。我在 Windows 7 上以管理员身份运行 Visual Studio 2005，但如果这是与权限相关的问题，monodevelop 不会为我提供以管理员身份运行的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:24:18.460

我在 VS2010 和 VS2012 中也看到了这一点，主要原因是当项目未在解决方案属性中设置为部署时。

![解决方案的属性窗口](../Images/d9179f003029272f11999b9aebad1fe9.png)

如果删除了该部署标志，您将遇到该问题。

# css - 我如何让我的 div 并排放置

> ID：13701496
> 
> 赞同：-1
> 
> 时间：2012-12-04T11:06:43.333
> 
> 标签：css

我似乎无法让我的导航 div（位于左侧）直接坐在我的内容 div（位于右侧）旁边。

他们都坐在包装器div中。我已经在 CSS 的外部样式表上完成了这项工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T11:14:53.587

这是你可以尝试的：

```
<style>
    #div1, #div2 {
        display: inline-block;
    }
</style>

<div id="wrapper">
    <div id="div1"></div>
    <div id="div2"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T11:10:42.697

您可以使用浮点数或将其“显示”属性更改为“内联块”。有时第二个选项更适合你，所以你不会弄乱浮点数（因为看起来你只是从 CSS 开始）。

此外，如果您与我们分享您的代码或网站链接，我们可以更轻松地为您提供帮助。如果你不这样做，我们在这里试图帮助你（包括我）是盲目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T11:08:44.833

使用浮动。看看这里 [http://www.w3schools.com/css/css_float.asp](http://www.w3schools.com/css/css_float.asp)

记住使用

> 清除

当你使用浮动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T11:22:50.973

1.  您可以将它们都浮动，最好按`px`百分比或百分比指定它们的宽度。像这样：

    div1{ 浮动：左；宽度：200px；} div2{ 浮动：左；宽度：600px；}

2.  您可以只浮动一个，并使用`margin`属性正确放置第二个 div。

3.  你也可以申请`display: absolute`两个 div 来得到你想要的。

4.  更好的是，您可以使用诸如[引导程序](http://twitter.github.com/bootstrap/scaffolding.html#gridSystem)之类的东西通过网格布局来帮助您做到这一点。它可以非常方便。不过，我认为了解基本`css`知识是件好事。

* * *

如果您希望布局流畅，请不要使用 3 或 2。

**编辑**：

一点建议：我认为您可以找到一个接近您想要的网页（有很多）并阅读相关的 css 代码，一路查找所有 css 属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T11:33:32.157

您可以为此使用浮点数，请明智地使用浮点数。

代码可以如下所述

```
<div class="wrapper">
<div class="right">Right</div>
<div class="left">left</div>
<div class="clearfloat"></div> <!--To romove floats-->
</div>​

.wrapper{
width:500px;
height:100px;
color:#FFF;
}
.right{
width:30%;
background-color:red;
float:left;
}

.left{
width:70%;
background-color:blue;
float:left;
}

.clearfloat{
clear:both
} 
```

​</p>

[http://jsfiddle.net/PJhst/1/](http://jsfiddle.net/PJhst/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T12:13:55.957

这里的几个例子让我想哭。

对于初学者，不要使用`inline-block`这将导致各种跨浏览器的宽度计算困难。浮动列绝对是最好的方法。

您的标记可以像这样简单地完成。

**HTML**

```
<!-- Container div that will prevent the child divs from breaking the layout 
of the page for content below-->
<div class="container">
    <div class="clmn">
    <!-- First column -->
    </div>
    <div class="clmn">
    <!-- Second column -->
    </div>
</div> 
```

**CSS**

```
/**
 * Columns
 * 1\. The column is floated left which pushes the div as far left as it can 
      possibly go within it's parent container.
 * 2\. The width of the container is set at less than 50% so that you can leave 
      a gap between the columns.
 */

.clmn{
    float:left; /* 1 */
    width:49%; /* 2 */
}

/**
 * 1\. The selector identifies any container with the class `.clmn` which has 
      another column before it. A margin is added to that to create the space. 
      This is calculated at 100% - (2 * 49% )
 */

.clmn + .clmn{
    margin-left:2%; /* 1 */
}

/* Clearfix to contain floats. 
  See http://nicolasgallagher.com/micro-clearfix-hack/ 
 */

/**
 * For modern browsers
 * 1\. The space content is one way to avoid an Opera bug when the
 *    contenteditable attribute is included anywhere else in the document.
 *    Otherwise it causes space to appear at the top and bottom of elements
 *    that are clearfixed.
 * 2\. The use of `table` rather than `block` is only necessary if using
 *    `:before` to contain the top-margins of child elements.
 */
.container:before,
.container:after {
    content: " "; /* 1 */
    display: table; /* 2 */
}

.container:after {
    clear: both;
}

/**
 * For IE 6/7 only
 * Include this rule to trigger hasLayout and contain floats.
 */
.container {
    *zoom: 1;
} 
```

该方法的美妙之处在于您可以对其进行扩展以轻松处理不同宽度的列。我在工作中一直使用更完整的系统，并在网格系统中开源了该方法。[这里](http://jimbobsquarepants.github.com/Flexo/)

# jquery - JQuery mobile，如何在按钮单击时启动会话

> ID：13701498
> 
> 赞同：0
> 
> 时间：2012-12-04T11:06:58.083
> 
> 标签：jquery, session, mobile, button, cookies

这是我的一个页面，要求用户选择他们将使用的个人资料类型

```
<div data-role="page" id="profile" data-content-theme="a">
<div data-role="content">
<center>
<font size="6">
<br>Select Profile<br><br>
</font>
<img src="images/logo.png" width="70%">
</center>
<a href="#main" data-role="button" style="position:absolute; bottom:85px; width:90%;">Guest</a>
<a href="#main" data-role="button" style="position:absolute; bottom:25px; width:90%;">Enthusiast</a>        
</div>   
</div><!-- /page profile select --> 
```

两个按钮都指向同一个页面，但是，根据选择的配置文件，我需要在另一个页面上提供更详细的信息，在网站的更远的地方。我想使用 cookie 来存储有关用户选择的一些信息，然后一旦他们选择访问信息页面，就会检查他们的个人资料并为他们提供适当的信息。我不知道如何开始。虽然我不得不使用一些 php 代码，但我无法让这些按钮做任何事情。我怎样才能让他们存储一些我以后可以在信息页面中检查的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:10:03.367

设置 cookie 是解决此问题的好方法。您可以在 Javascript 中创建和读取 cookie - 阅读此内容以了解如何执行此操作：[http ://www.w3schools.com/js/js_cookies.asp](http://www.w3schools.com/js/js_cookies.asp)

在您的特定情况下，为两个按钮连接“单击”事件处理程序，并具有处理程序：

*   检查现有的 cookie。如果有，写一个对应于被点击按钮的属性

*   如果没有现有的 cookie，则创建一个，*然后*写入属性

然后，当稍后的页面加载时，您可以使用 JavaScript 函数读取 cookie 信息并隐藏或显示额外内容

# javascript - Jquery-UI自动竞争更改`Keydown`事件的文本框值

> ID：13701503
> 
> 赞同：0
> 
> 时间：2012-12-04T11:07:07.740
> 
> 标签：javascript, jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我在我的项目中使用 jquery-UI 自动完成它工作正常，我的代码如下

```
 function split(val) {
        return val.split(/,\s*/);
    }
    function extractLast(term) {
        return split(term).pop();
    }
    $(".tags").autocomplete({

        source: function (request, response) {
            loc_array = request.term.split(',');
            var term = loc_array[loc_array.length - 1];
            $.ajax({
                url: "/Admin/Tag1/LookUpCompany",
                dataType: "json",
                data: "q=" + term,
                success: function (data) {
                    response($.map(data, function (item) {                  
                        return {
                            value: item.Name,
                            Name: item.Name
                        };
                    }));
                }
            });
        },
        select: function (event, ui) {
            event.preventDefault();
            var terms = split( this.value );
            // remove the current input
            terms.pop();
            // add the selected item
            terms.push( ui.item.value );
            // add placeholder to get the comma-and-space at the end
           // terms.push( "" );
            this.value = terms.join( "," );
            return false;
        },
        minLength: 1
    }); 
```

它工作正常但是有一个问题假设当我加载我的页面时我的文本框有价值
`abc,def,ghi,`

现在，如果我输入任何字符，它会以下拉列表的形式给我建议。如果我点击它，它会将点击的值附加到我的当前值，但如果我使用键盘上的向下键向下移动，那么它会用当前选定的值更改整个 textbpx 值。如何解决？

谢谢 ，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:22:14.763

这是我的自动完成代码。输入为我工作。

```
$(".tags").autocomplete({
        source: function(request, response) {
            $.getJSON("/actions.php?action=autocomplete", {
                term: extractLast(request.term)
            }, response);
    },
    search: function() {
            /* custom minLength */
            var term = extractLast(this.value);
            if (term.length < 1) {
                return false;
            }
    },
    focus: function() {
            /*prevent value inserted on focus */
            return false;
        },
        select: function(event, ui) {
            var terms = split( this.value );
            /* remove the current input*/
            terms.pop();
            /* add the selected item*/
            terms.push( ui.item.value );
            /* add placeholder to get the comma-and-space at the end*/
            terms.push("");
            this.value = terms.join(", ");
            return false;
        }
    }); 
```

修改它，使其适合您的网址。我正在使用 jquery ui jQuery UI - v1.8.21

# wordpress - 网络范围内的 WordPress 角色和功能

> ID：13701504
> 
> 赞同：1
> 
> 时间：2012-12-04T11:07:10.533
> 
> 标签：wordpress

我试图了解[角色和能力](http://codex.wordpress.org/Roles_and_Capabilities)如何在[网络范围的](http://codex.wordpress.org/Multisite_Network_Administration)设置中工作。

并且检查 /wp-includes/capabilities.php 显示有一个名为[`current_user_can_for_blog($blog_id, $capability)`](http://core.trac.wordpress.org/browser/tags/3.4.2/wp-includes/capabilities.php#L1214).

因此，我的问题是，在涉及许多博客的网​​络范围设置中，用户 X 可能是博客 #1 和 #2 的管理员，但不是博客 #3、#4 和 #5 的管理员。

如果我简单地使用`current_user_can('manage_options')`，那么对于博客#3、#4 和#5 上的用户 X 会有什么影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:15:58.300

据我了解，如果您在`current_user_can('manage_options')`插件或主题中使用为站点管理员提供一组不同的选项，那么无论您将此功能附加到什么，只有在用户被指定为博客管理员时才会显示#1 和 #2（这可以通过用户角色功能插件进行调整）。

如果他们没有在其他站点（#3、#4 和#5）上被指定为用户（或管理员），他们应该无法访问与此挂钩相关的操作。

尽管如此，超级管理员用户（可以监督整个网络）拥有完全的控制权，并且可以访问这些功能，无论它们是否已添加到单个站点。

# vim - vim：快速列插入

> ID：13701506
> 
> 赞同：9
> 
> 时间：2012-12-04T11:07:29.150
> 
> 标签：vim

我一直在使用 Vim 作为我的文本编辑器来代替 notepad++。我想知道有没有办法在 vim 中执行“快速列插入”。

据我所知，我们可以通过以下步骤在 vim 中执行列插入：

1.  移动到位置
2.  进入列可视模式 `CTRL+v`
3.  选择列 `j`或`k`
4.  进入列插入模式 `shift+i`
5.  插入文本
6.  类型`Esc`

然后执行列插入

有没有办法删除第4步并直接执行列插入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T11:47:53.073

我使用以下映射，这些映射允许添加/附加空格（`[count]`在映射之前也有多个）：

```
:vnoremap <C-Space> I<Space><Esc>gv
:vnoremap <C-S-Space> A<Space><Esc>gv 
```

诸如此类的自定义映射是高效编辑的关键，并且在 Vim 中非常强大。您将在 中找到所有详细信息`:help`。

# linux - 下载适用于 Linux 的 Jpcap

> ID：13701511
> 
> 赞同：3
> 
> 时间：2012-12-04T11:07:44.140
> 
> 标签：linux, networking, capture, packet, jpcap

我将其发布在其他地方，但我认为它已被删除，因此我将其作为新问题发布...这是我的问题；我一直在使用来自[http://netresearch.ics.uci.edu/](http://netresearch.ics.uci.edu/)的 Jpcap 库开发数据包嗅探器。我正在使用 java 库的 windows 版本进行开发，但现在我意识到这是我需要的 linux 版本，但是由于网站无法正常工作，（检查链接，我认为服务器已关闭）我无法下载此版本. 有没有人把这个保存到那里的电脑？我知道该网站将来可能会修复，但我真的不想浪费时间等待。

如果有人能把它寄给我，我将不胜感激，因为我迫切需要它来推进我的项目。

在此先感谢，谢恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:45:16.817

在另一个网站上找到文件和说明对于任何有兴趣的人...... [https://sites.google.com/site/sipinspectorsite/download/jpcap](https://sites.google.com/site/sipinspectorsite/download/jpcap)

# java - 如何以及在哪里存储应用程序初始化数据？

> ID：13701512
> 
> 赞同：0
> 
> 时间：2012-12-04T11:07:43.433
> 
> 标签：java, spring, spring-mvc, initialization

我正在尝试使用 Spring MVC 开发游戏。

例如我有一`Monster`堂课。

在春季初始化和存储怪物数据的最佳方法是什么？

一种选择是在某个 java 文件中创建所有`Monster`实例`Init`并制作静态数组，以便每个类都可以访问它们，但这似乎是一种错误的方式。

怪物的例子：`String name, int hp, int defence, int attack`

另一方面，我应该使用 XML 或属性文件来保存我的所有`Monster`信息`Item`吗？很容易添加新的`Items`或`Monsters`将来也会很好。

春季这种工作的常用技术是什么？

我试图尽可能清楚地解释，询问是否有不清楚的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:26:36.663

JAXB 怎么样？看看编写配置和读回它是多么容易：

```
import java.io.*;
import java.util.*;
import javax.xml.bind.*;
import javax.xml.bind.annotation.*;

class Config {
    @XmlElementWrapper(name="monsters")
    @XmlElement(name="monster")
    public List<Monster> monsters = new ArrayList<Monster>();
}

class Monster {
    public String name = "Test";
}

public class Test1 {

    public static void main(String[] args) throws Exception {
        Config cfg = new Config();
        cfg.monsters.add(new Monster());
        //save 
        OutputStream os = new FileOutputStream("conf.xml");
        JAXB.marshal(cfg, os);
        // read 
        cfg = JAXB.unmarshal(new FileInputStream("conf.xml"), Config.class);
    }
} 
```

配置文件

```
<config>
    <monsters>
        <monster>
            <name>Test</name>
        </monster>
    </monsters>
</config> 
```

# xaml - 为什么 IsHitTestVisible 不适用于 WinRT 中的 Grid 和 StackPanel？

> ID：13701513
> 
> 赞同：2
> 
> 时间：2012-12-04T11:07:44.503
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

当我将 StackPanel 或 Grid 设置为 IsHitTestVisible=false 时，它​​不起作用。它一直对我的鼠标或触摸做出反应。

如何通过影响内部对象的交互来禁用它？

谢谢， 苏丹

# git - GIT - 如何显示 git log 仅在分支提交

> ID：13701515
> 
> 赞同：0
> 
> 时间：2012-12-04T11:07:50.150
> 
> 标签：git

```
A-->B-->C-->D-->E  (master)
    \->X-->Y-/-->Z (debug) 
```

大家好，如果尝试

```
 git log master..debug 
```

然后我只得到 Z，因为 X、Y 被合并到 master 分支。简而言之，***我想在调试分支上获取所有日志/提交***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:15:04.780

使用`..`符号，例如：

```
git log master..feature 
```

这列出了所有可从*feature*访问的提交，并排除了可从*master*访问的提交。换句话说，它列出了“仅”在*feature*上的提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T14:58:38.593

所以要清楚，你想要调试分支上的所有提交，因为它最初与主分支不同？B 是调试分支的父级，所以试试，

`git log B..debug`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:13:41.967

```
git log parent_branch..new_branch 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T11:15:56.927

您可以通过指定范围来做到这一点。

假设 X 的哈希是 abcd123，Y 是 dcba321。

您可以致电：

```
git log abcd..dcba 
```

这将向您显示范围。您可以截断散列，只要它保持唯一（例如使用前几个字符）。

# objective-c - UITableViewCell 中的 MKMapView

> ID：13701516
> 
> 赞同：1
> 
> 时间：2012-12-04T11:07:53.327
> 
> 标签：objective-c, ios, uitableview, mkmapview

我禁用`MKMapView`了`UITableViewCell`用户交互。当我滚动`UITableViewCell`它时，它会刷新所有`MKMapViews`.

我在这里阅读了其他答案，一个说不要使用`dequeueReusableCellWithIdentifier`（我不是），另一个说`dealloc`（`mapView`我正在使用 ARC）。我不想使用图像。

`MKMapView`当我滚动滚动视图时，我应该怎么做才能防止重新加载？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    //UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"ANFeedCell"];
    ANFeedTableViewCell *cell = nil;
    if (cell == nil) {
        // Load the top-level objects from the custom cell XIB.
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"ANFeedTableViewCell" owner:self options:nil];
        // Grab a pointer to the first object (presumably the custom cell, as that's all the XIB should contain).
        cell = [topLevelObjects objectAtIndex:0];

        MKMapView *mapView = (MKMapView*)[cell viewWithTag:2];

        //Takes a center point and a span in miles (converted from meters using above method)        
        CLLocationCoordinate2D startCoord = CLLocationCoordinate2DMake(37.766997, -122.422032);
        MKCoordinateRegion adjustedRegion = [mapView regionThatFits:MKCoordinateRegionMakeWithDistance(startCoord, MilesToMeters(0.5f), MilesToMeters(0.5f))];
        [mapView setRegion:adjustedRegion animated:YES];

    }
return cell;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T13:17:09.990

问题是您正在为每个表格单元格初始化新单元格。所以你的 MapView 每次都会重置。

这也会导致内存问题，因为在表格中上下滚动几下会耗尽手机的内存。

坚持使用可重复使用的单元格，但每次都为单元格配置地图视图区域。

这是一个很好的示例，可以帮助您入门：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CustomCellIdentifier = @"MyCustomTableCell";
    ANFeedTableViewCell *cell = (ANFeedTableViewCell *)[tableView dequeueReusableCellWithIdentifier:CustomCellIdentifier];

    if (cell == nil) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"ANFeedTableViewCell"
                                                     owner:self options:nil];
        for (id oneObject in nib)
            if ([oneObject isKindOfClass:[CustomCell class]])
                cell = (ANFeedTableViewCell *)oneObject;
    }

    MKMapView *mapView = (MKMapView*)[cell viewWithTag:2];

    //Takes a center point and a span in miles (converted from meters using above method)
    CLLocationCoordinate2D startCoord = CLLocationCoordinate2DMake(37.766997, -122.422032);
    MKCoordinateRegion adjustedRegion = [mapView regionThatFits:MKCoordinateRegionMakeWithDistance(startCoord, MilesToMeters(0.5f), MilesToMeters(0.5f))];
    [mapView setRegion:adjustedRegion animated:YES];

    return cell;
} 
```

这段代码的不同之处在于，每次显示单元格时都会配置地图视图，而不仅仅是在初始化时。当然，您应该更改代码以从数据源（即 NSArray）动态接受坐标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T13:00:44.407

只需使用@property 在头文件中创建一个uitableview 单元格全局对象，并将单元格分配给全局对象，如果单元格为nil。

然后每次进入 cellforrowatindexpath 检查对象是否为 nil 。如果不是 nil ，则返回全局对象。

//在类.h

```
@property (nonatomic, retain) UITableViewCell *mapCell; 
```

//在 cellForRowAtIndexPath 中

```
if (mapCell == nil) {
                        allocate the cell
                    }
                    else{
                        return mapCell;
                    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-04T11:27:11.387

试试这个

```
NSArray *views = [cell.contentView subviews];
    for( int i = 0; i < [views count]; i++)
    {
        UIView *tempView = [views objectAtIndex:i];
        [tempView removeFromSuperview];
        tempView = nil;
    }

    views = nil; 
```

# asp.net - tfspreview (visualstudio) 可以发布到私有 IIS Web 应用程序服务器吗？

> ID：13701517
> 
> 赞同：3
> 
> 时间：2012-12-04T11:08:00.470
> 
> 标签：asp.net, iis, tfs, continuous-integration, azure-devops

是否可以使 TFS 服务 (tfs.visualstudio.com)**持续集成构建模板**直接**发布到私有 IIS 服务器**，就像它在 Azure 上发布一样？我应该在构建模板中指定哪些其他设置才能使其正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T22:32:49.640

您的意思是您希望在 tfs.visualstudio.com 上签入的项目被编译并部署到私有（内部）网络服务器？如果您将本地构建代理添加到 tfs.visualstudio.com tfs 服务器，则构建服务器可以访问您的内部网络服务器（否则无法部署到它）。然后是使用正确的模板和设置来部署 Web 应用程序的问题，如[http://vishaljoshi.blogspot.nl/2010/11/team-build-web-deployment-web-deploy-vs.html](http://vishaljoshi.blogspot.nl/2010/11/team-build-web-deployment-web-deploy-vs.html)中所述。

# javascript - 使用 JQuery/JavaScript 更改页面标题？

> ID：13701519
> 
> 赞同：-1
> 
> 时间：2012-12-04T11:08:06.880
> 
> 标签：javascript, jquery, html, css, dom

我可以通过 jQuery/JavaScript 通过页面正文中的任何标签更改页面的标题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:33:23.510

在您加载页面的地方，您可能在某处具有“页面加载成功”功能。

那里只是添加

```
document.title = $('#elementId').text(); 
```

按照建议。

因此，如果您使用的是 JQuery load() 函数：

```
$("#content").load( url,data, successFunction);

function successFunction(someResponseText, someTextStatus, anXMLHttpRequest) {
    document.title = $('#elementId').text();
    ...
} 
```

前提是您加载的子页面`<div id="elementId">My Great Title</div>`中有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:09:24.430

尝试这个，

```
$(document).ready(function() {
    document.title = $('#elementId').text();
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:20:45.153

如果你想用 javascript 来做，这是一种方法。

首先，在你的 html 中，你应该有一个可以调用你的函数的标签，在这个例子中，body 标签有一个 onload 函数

```
<body onload="titleChange()"> 
```

这是javascript；

```
function titleChange(){
    document.title = "Your new title.";
} 
```

# python - CSS 没有在 Django 页面中呈现？

> ID：13701521
> 
> 赞同：3
> 
> 时间：2012-12-04T11:08:16.253
> 
> 标签：python, html, css, django

我设置了一个指向 HTML 表单的 Django view+url。HTML 文件使用@import 链接到两个样式表。当我访问该页面时，终端告诉我 GET 请求已发送到两个 CSS 文件，但该页面呈现为没有任何 CSS 的纯 HTML。

下面是链接到 HTML 文件中样式表的代码：

```
<head>
<title>Register</title>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<style>
    @import url("./css/common.css");
    @import url("./css/desktop.css");
</style>
</head> 
```

以下是视图中的相关代码片段：

```
return render_to_response("signup.html", {'form': form,}, RequestContext(request)) 
```

如果要求，将发布更多代码。这真的让我很烦。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:10:39.450

您可以尝试将整个 css 文件内容放在样式标签之间，看看是否可行。然后你知道它导入css文件有问题并且你的路径错误。只是一个建议

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:11:10.317

您能否定义您导入css的当前文件位置在哪里，因为您尝试这样做

```
<style>
    @import url("./css/common.css");
    @import url("./css/desktop.css");
</style> 
```

在这种情况下，您的 css 是向上的，然后是您的 html 页面 ???? 让我知道 ？？？

# c# - 带有 NServiceBus 3.3 的 ncqrs

> ID：13701524
> 
> 赞同：0
> 
> 时间：2012-12-04T11:08:27.597
> 
> 标签：c#, .net, nservicebus, ncqrs

将 NServiceBus 从 2.6 升级到 3.3 后，CommandService 开始`System.NullReferenceException: Object reference not set to an instance of an object.`运行`IStartableBus.Start()`。小型研究表明，返回的 UnicastBus`Configure.CreateBus()`具有 null 作为 Transport 属性值。

Global.asax.cs 中有 NSB Config：

```
IBus bus = Configure.With()
    .DefineEndpointName(endpointName)
    .UnityBuilder(unityContainer)
    .AddLogger()
    .BinarySerializer()
    .MsmqTransport()
    .PurgeOnStartup(false)
    .IsTransactional(true)
    .IsolationLevel(TransactionIsolationLevel)
    .TransactionTimeout(TimeSpan.FromMinutes(TransactionTimeout))
    .UnicastBus()
    .ImpersonateSender(true)
    .LoadMessageHandlers()
    .MsmqSubscriptionStorage()
    .InstallNcqrs()
    .CreateBus()
    .Start();

public class NcqrsNsbConfigure : NServiceBus.Configure
{
    private NsbCommandService _commandService;
    private InProcessEventBus _inProcessEventBus;

    public static NcqrsNsbConfigure InstallNcqrs(NServiceBus.Configure config)
    {
        var configNcqrs = new NcqrsNsbConfigure();
        configNcqrs.Install(config);
        return configNcqrs;
    }

    public void Install(NServiceBus.Configure config)
    {
        Builder = config.Builder;
        Configurer = config.Configurer;

        NcqrsEnvironment.Configure(new NsbEnvironmentConfiguration(Builder));
        var compositeBus = new CompositeEventBus();
        _inProcessEventBus = new SafeInProcessEventBus();
        compositeBus.AddBus(_inProcessEventBus);
        compositeBus.AddBus(new NsbEventBusWrapper());  
        NcqrsEnvironment.SetDefault<IEventBus>(compositeBus);
        _commandService = new NsbCommandService();
        var safeCommandService = new NSBCommandService(NcqrsEnvironment.Get<IBus>(), _commandService);
        config.Configurer.RegisterSingleton(typeof(Ncqrs.Commanding.ServiceModel.ICommandService), safeCommandService);
    }

    public NcqrsNsbConfigure RegisterExecutor<TCommand>(ICommandExecutor<TCommand> executor) where TCommand : Ncqrs.Commanding.ICommand
    {
        _commandService.RegisterExecutor(executor);
        return this;
    }

    public NcqrsNsbConfigure RegisterInProcessEventHandler<TEvent>(IEventHandler<TEvent> handler) where TEvent : Ncqrs.Eventing.IEvent
    {
        _inProcessEventBus.RegisterHandler(handler);
        return this;
    }

    public NcqrsNsbConfigure RegisterInProcessEventHandler(Type eventType, Action<Ncqrs.Eventing.IEvent> handler)
    {
        _inProcessEventBus.RegisterHandler(eventType, handler);
        return this;
    }

    public NcqrsNsbConfigure RegisterAllInProcessEventHandlers(Assembly asm)
    {
        _inProcessEventBus.RegisterAllHandlersInAssembly(asm);
        return this;
    }
} 
```

有没有人遇到过这个并找到了解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T22:54:45.977

我没有使用过 NCQRS，但我猜你正在泄漏真正的配置对象。

当您调用时`.InstallNcqrs()`（这不应该是一种扩展方法以使流利的配置编译吗？）您没有返回传入的 NServiceBus.Configure 对象，而是返回您自己的 NcqrsNsbConfigure 对象。当然，您提供了 Builder 和 Configurer 以匹配传入的 Configure 对象，但也许您正在泄漏 NServiceBus 管道的其余部分现在期望的其他元素。

我会尝试重新排列您的代码，以便您初始化所需的 NCQRS 内容，然后返回原始的 Configure 对象。您没有使用返回的对象来调用任何其他流畅的方法来配置 NCQRS，所以我认为这应该不是问题。

# android - 获取 RenderScript 进度

> ID：13701525
> 
> 赞同：1
> 
> 时间：2012-12-04T11:08:27.740
> 
> 标签：android, image-processing, renderscript

我正在使用 forEach_root 方法在 Android 上计算图像。

```
RenderScript RS=RenderScript.create(context);

Allocation inPixelsAllocation = Allocation.createFromBitmap(RS, inBitmap,
            Allocation.MipmapControl.MIPMAP_NONE,Allocation.USAGE_SCRIPT); 
Bitmap out=Bitmap.createBitmap(width,height,Bitmap.Config.ARGB_8888);
Allocation outPixelsAllocation = Allocation.createFromBitmap(RS, out,
Allocation.MipmapControl.MIPMAP_NONE,Allocation.USAGE_SCRIPT);

mScript.forEach_root(inPixelsAllocation,outPixelsAllocation);
outPixelsAllocation.copyTo(out);
return out; 
```

这很好用，但是，由于可能存在大量数据（需要处理超过 1800 万像素），因此可能需要一些时间。是否有可能获得 RenderScript forEach-loop 的当前进程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T17:13:31.290

我假设“当前进程”是指状态（以便您可以显示进度条或类似的东西）。没有办法知道已经完成了多少工作，也没有多少开发人员可见的剩余工作。事实上，我认为我们实际上无法真正计算出这一点，因为您可以通过一个简单的 if 语句来查找该像素坐标，从而使内核实例的任何单个单元格花费更长的时间。所以，我有两个潜在的建议给你，这取决于你认为状态信息会给你带来什么：1）如果你想制作一个进度条并想让用户知道你确实是，请使用微调器还在工作; 2）如果你需要这个来同步，你以后对输入/输出分配所做的任何事情都会等到内核完成（即

# javascript - jquery ui自动完成样式问题

> ID：13701526
> 
> 赞同：0
> 
> 时间：2012-12-04T11:08:29.917
> 
> 标签：javascript, jquery, css, jquery-ui, autocomplete

我想自定义我的自动完成输入。至于现在，它工作得很好，但我想改变一些风格：

1.  放置在右侧的助手，我想向右移动更多，因为默认情况下它位于我的输入上。我发现（通过 fie 它有类`ui-helper-hidden-accessible`但对 jquery-ui-1.8.16.custom.css 进行更改没有用。
2.  我想将所有自动完成项放在输入框下，而不是在帮助程序范围下，因此来自自动完成的提示不会关闭我的按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:37:55.720

您可以将自动完成列表放在任何 div、span 等下

```
$( ".selector" ).autocomplete({ appendTo: "#someElem" }); 
```

其中#someElem 是您的助手跨度ID

与其使用 ui-helper-hidden-accessible ，不如尝试更改 .ui-autocomplete css 来移动它，

# java - 使用 Firefox 运行 Selenium WebDriver 测试不再适用于 Ubuntu

> ID：13701527
> 
> 赞同：1
> 
> 时间：2012-12-04T11:08:30.663
> 
> 标签：java, firefox, selenium, webdriver, selenium-firefoxdriver

在我的 Ubuntu 工作站上本地使用 Firefox 运行 Selenium (Webdriver) 测试不再有效。

完全相同的设置以前工作过，但我认为 Firefox 在某个时候升级了（现在是 Ubuntu 软件包中的 16.0.2 `16.0.2+build1-0ubuntu0.11.04.1`），之后它停止工作。在正常使用中，Firefox 工作正常。

使用 Webdriver，当我（通过我的 IDE）运行测试用例时，**会打开一个空的 Firefox 窗口，但测试没有开始**。45 秒后，它会超时并显示以下错误消息：

```
org.openqa.selenium.firefox.NotConnectedException: Unable to connect to host 127.0.0.1 on port 7055 after 45000 ms. Firefox console output:
*** LOG addons.xpi: startup
*** LOG addons.xpi: Ignoring file entry whose name is not a valid add-on ID: /tmp/anonymous5012217980260937474webdriver-profile/extensions/webdriver-staging
*** LOG addons.xpi: checkForChanges
*** LOG addons.xpi-utils: Opening database
*** LOG addons.xpi: Add-on {2204c510-88f3-11db-b606-0800200c9a66} modified in app-profile
*** LOG addons.xpi: Add-on yslow@yahoo-inc.com modified in app-profile
*** LOG addons.xpi: Add-on {02450954-cdd9-410f-b1da-db804e18c671} modified in app-profile
*** LOG addons.xpi: Add-on {c45c406e-ab73-11d8-be73-000a95be3b12} modified in app-profile
*** LOG addons.xpi: Add-on {a6fd85ed-e919-4a43-a5af-8da18bda539f} modified in app-profile
*** LOG addons.xpi: Add-on pythonformatters@seleniumhq.org modified in app-profile
*** LOG addons.xpi: Add-on rubyformatters@seleniumhq.org modified in app-profile
*** LOG addons.xpi: Add-on javaformatters@seleniumhq.org modified in app-profile
*** LOG addons.xpi: Add-on csharpformatters@seleniumhq.org modified in app-profile
*** LOG addons.xpi: Add-on firebug@software.joehewitt.com modified in app-profile
*** LOG addons.xpi: Loading bootstrap scope from /tmp/anonymous5012217980260937474webdriver-profile/extensions/firebug@software.joehewitt.com.xpi
*** LOG addons.xpi: Calling bootstrap method install on firebug@software.joehewitt.com version 1.10.6
*** LOG addons.xpi: New add-on fxdriver@googlecode.com installed in app-profile
*** LOG addons.xpi: Updating database with changes to installed add-ons
*** LOG addons.xpi-utils: Updating add-on states
*** LOG addons.xpi-utils: Writing add-ons list
*** LOG addons.xpi: Calling bootstrap method startup on firebug@software.joehewitt.com version 1.10.6
*** LOG ubufox.urn: Starting
*** LOG addons.xpi: shutdown
*** LOG addons.xpi-utils: shutdown
*** LOG addons.xpi-utils: Database closed
*** LOG addons.xpi: startup
*** LOG addons.xpi: Ignoring file entry whose name is not a valid add-on ID: /tmp/anonymous5012217980260937474webdriver-profile/extensions/webdriver-staging
*** LOG addons.xpi: checkForChanges
*** LOG addons.xpi: No changes found
*** LOG addons.xpi: Loading bootstrap scope from /tmp/anonymous5012217980260937474webdriver-profile/extensions/firebug@software.joehewitt.com.xpi
*** LOG addons.xpi: Calling bootstrap method startup on firebug@software.joehewitt.com version 1.10.6
*** LOG ubufox.urn: Starting

Build info: version: '2.23.1', revision: '17143', time: '2012-06-08 18:59:28'
System info: os.name: 'Linux', os.arch: 'amd64', os.version: '2.6.38-16-generic', java.version: '1.6.0_26'

Driver info: driver.version: FirefoxDriver
at org.openqa.selenium.firefox.internal.NewProfileExtensionConnection.start(NewProfileExtensionConnection.java:113)
at org.openqa.selenium.firefox.FirefoxDriver.startClient(FirefoxDriver.java:216)
at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:93)
at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:156)
at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:151)
at org.openqa.selenium.firefox.FirefoxDriver.<init>(FirefoxDriver.java:93)
at fi.company.product.testing.selenium.AbstractSeleniumTest.getFirefoxDriver(AbstractSeleniumTest.java:99)
at fi.company.product.testing.selenium.AbstractSeleniumTest.setup(AbstractSeleniumTest.java:56)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
at fi.company.product.testing.selenium.ScreenshotTestRule$1.evaluate(ScreenshotTestRule.java:27)
at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.junit.runners.Suite.runChild(Suite.java:128)
at org.junit.runners.Suite.runChild(Suite.java:24)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:71)
at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:199)
at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:62)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

在我们的基础测试类中，`FirefoxDriver`初始化如下：

```
new FirefoxDriver(new FirefoxProfile()) 
```

...尽管我也尝试指向现有的 Firefox 配置文件目录（类似于`/home/jonik/.mozilla/firefox/vds3ono5.default`），但结果相同。

**任何想法如何让测试再次运行？**

*   硒（Webdriver）2.23.1
*   火狐 16.0.2
*   Ubuntu 11.04

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T11:18:42.337

v2.23 不支持 Firefox 16。您必须升级到 v2.26，或降级 Firefox。

# internationalization - wxWidgets 和 wxLocale——gettext 和应用程序中的符号语言？

> ID：13701538
> 
> 赞同：1
> 
> 时间：2012-12-04T11:09:04.123
> 
> 标签：internationalization, wxwidgets

我正在使用 wxWidgets 重写我们的旧应用程序。该应用程序使用旧的、*自制*的语言词典机制，我想使用`gettext`wxWidgets 支持的标准方式来替换它。

问题是应用程序内部不使用用户可读的字符串，而是使用应使用所选语言词典翻译的符号标识符。换句话说，翻译应该总是发生。例如，代码说：

```
wxMenu * mnuParamSelect = new wxMenu();
mnuParamSelect->Append(wxID_mnuiParamSelect,
                       _("mnuiParamSelect"),
                       _("hlpParamSelect")); 
```

这样，它使用必须*始终翻译的**默认符号语言*（例如英语的符号转换为 ，for等）。*`mnuiParamSelect``Select the parametres...``Vyber parametry...``cs_CZ`*

 *考虑到这似乎不是通常的方法`gettext`。我很陌生`gettext`。我应该知道与*符号语言识别*方法相关的任何问题吗？

感谢您的时间和经验，

彼得

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:27:05.617

据我所知，第一个大问题是创建新的翻译会很困难（或者至少很耗时），因为翻译者只会看到符号 id，并且需要在不同的文件中找到相应的英文信息。

第二个问题：如果您使用像“%d 文件”这样的 printf 样式格式，如果符号 id 不包含这些格式说明符，gettext（即 msgfmt）将不会为您进行任何语法检查。因此，例如，如果您的翻译器添加了太多“%d”，则应用程序在与该翻译一起使用时可能会崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-28T23:50:01.650

po 文件可以包含一个`msgctx`（消息上下文）字段，它构成了 id 的一部分。

因此，您可以使用`msgctx`符号名称、`msgid`默认语言环境文本和`msgstr`翻译文本。*

# c - ANSI C 中的 getopt()

> ID：13701539
> 
> 赞同：0
> 
> 时间：2012-12-04T11:09:06.790
> 
> 标签：c, ansi, argument-passing, getopt

我正在`OPNET`为此工作，我需要`getopt()`ANSI C 语言中的 windows 等效函数。

我需要调用`getopt()`类似的：

```
while ((opt = getopt(argc, argv, "hadp:s")) != -1) {
    switch (opt) {
        case 'a':
            break;
        case 'd':
            dummy = 1;
            break;
        case 'p':
            res = atoi(optarg);
            if (1 <= res )
                break;
            else
                usage(argv[0]);
                break;
        case 's':
            use_decimal = 0;
            break;
        case 'h':
        default:
            usage(argv[0]);
    }
} 
```

现在，当我编译时，我收到`getopt()`未定义的错误。我定义了它的头文件，但它不能包含在 OPNET 中。所以，我想问我应该如何克服这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:16:20.857

`getopt()`在 Windows 中不可用。你可以编译它。[从http://svn.savannah.gnu.org/svn/acct/trunk/lib](http://svn.savannah.gnu.org/svn/acct/trunk/lib)下载文件并编译。

[这里](https://stackoverflow.com/a/10404690/376535)有人在*VS2010*中编译过，所以我认为你不会遇到任何问题。

# android - Android - 启动器和回栈行为

> ID：13701542
> 
> 赞同：4
> 
> 时间：2012-12-04T11:09:16.680
> 
> 标签：android, android-activity, back-stack

正如[这里所说](http://developer.android.com/guide/components/tasks-and-back-stack.html)

> 当用户通过按 Home 按钮离开任务时，当前活动停止，其任务进入后台。<...> 如果用户稍后通过选择启动任务的启动器图标来恢复任务，则任务将进入前台并恢复堆栈顶部的活动。

所以我准备了简单的测试

活动 #1 == 设置了 onClick 的文本标记和按钮

```
 public class FirstActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.first_layout);
    }

    public void onClick(View v)
    {
        Intent intent = new Intent(FirstActivity.this, SecondActivity.class);
        startActivity(intent);
    }
} 
```

活动 #2 == 只是文本标记

```
 public class SecondActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second_layout);
    }
} 
```

并体现

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.example"
          android:versionCode="1"
          android:versionName="1.0">
    <uses-sdk android:minSdkVersion="10"/>
    <application android:label="@string/app_name" android:icon="@drawable/ic_launcher">
        <activity android:name="FirstActivity"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>

        <activity android:name="SecondActivity"
                  android:label="@string/app_name">
        </activity>

    </application>
</manifest> 
```

启动器图标不显示我最后一个活动，它总是启动第一个活动并将其放入堆栈。因此，在一项任务中可能有许多第一活动和许多第二活动。最近应用程序列表中的图标启动堆栈中的最后一个活动。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:56:39.433

取决于您启动应用程序的方式，存在一个问题。如果您在尝试此操作时从 IDE 启动应用程序：请从选项 -> 应用程序中停止您的应用程序。然后像普通用户一样从主屏幕启动您的应用程序。我希望在这种情况下，回栈行为是正常的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T23:52:59.230

好的解决方法似乎是将其添加到您的第一个活动 onCreate：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  if ((getIntent().getFlags() & Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT) != 0) {
    // Activity was brought to front and not created,
    // Thus finishing this will get us to the last viewed activity
    finish();
    return;
  }

  // Regular activity creation code...
} 
```

此线程中的更多详细信息：[从 Android 应用程序安装程序和主屏幕启动应用程序时的活动堆栈排序问题](https://stackoverflow.com/questions/6356467/activity-stack-ordering-problem-when-launching-application-from-android-app-inst)

# c# - UITableView 中的交替行颜色

> ID：13701547
> 
> 赞同：2
> 
> 时间：2012-12-04T11:09:24.373
> 
> 标签：c#, uitableview, xamarin.ios

如何使用 monotouch 在 UITableView 中获得交替的行颜色？

我目前正在使用以下方法填充我的 TableView：

```
public partial class myViewController : UITableViewController
    {
        public static UINavigationController navigationController;
        public static IntPtr handle;

        public CompanyViewController (IntPtr handle) : base (handle)
        {
        }

        public override void ViewDidLoad ()
        {
            base.ViewDidLoad ();
            Services service = new Services();

            var myList = service.GetList(param1);

            List<string> list = new List<string>();
            foreach(var c in myList)
            {
                list.Add (c.Name);
            }

            navigationController = NavigationController;
            handle = Handle;
            var source = new CompanyTableSource(list);

            myTableView.Source = source;

        } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T14:30:32.573

添加这个类：

```
public class AlternatingTableViewDelegate : UITableViewDelegate
{
    public override void WillDisplay (UITableView tableView, UITableViewCell cell, NSIndexPath indexPath)
    {
        if (indexPath.Row % 2 == 0) {
            cell.BackgroundColor = UIColor.White;
        } else {
            cell.BackgroundColor = UIColor.LightGray;
        }
    }
} 
```

在您的表格视图中使用它：

```
var tvdelegate = new AlternatingTableViewDelegate()
myTableView .Delegate = tvdelegate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-14T17:44:53.910

有更好的方法来做到这一点。您需要做的就是在 GetCell 方法中设置背景颜色，交替使用线条颜色，如此处所示。它还解决了在tableview中不处理一行触摸的问题。

```
public override UITableViewCell GetCell(UITableView tableView, NSIndexPath indexPath) {
        if (indexPath.Row % 2 == 0) {
                ContentView.BackgroundColor = UIColor.DarkGray;
        } else {
                ContentView.BackgroundColor = UIColor.DarkTextColor;
        }
} 
```

# c++ - QT 错误：找不到库

> ID：13701551
> 
> 赞同：6
> 
> 时间：2012-12-04T11:09:30.037
> 
> 标签：c++, qt

您好尝试设置我的环境以运行针对 GCC 编译器的 QT 4.8.3（因此读取 .a 文件）问题是它现在抛出错误：

```
:-1: error: cannot find -lQtGuid
:-1: error: cannot find -lQtCored
collect2.exe:-1: error: error: ld returned 1 exit status 
```

也许它找不到核心和gui dll？我的环境变量指向4.8.3的bin目录？我错过了什么吗？

![在此处输入图像描述](../Images/e6d3cb3ef29c8adaf552991fb48c1b38.png)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2018-12-20T09:53:17.677

试试这个，

```
sudo apt-get install libglu1-mesa-dev 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-04-03T07:30:04.100

这个对我有用

```
sudo apt-get install libglu1-mesa-dev 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T08:53:30.850

我的项目是用 msvc 编译器设置的，而实际上我已经为 mingw g++ 配置了 Qt，所以我将它切换到 GCC 编译器。

# sql - SQL中的左连接

> ID：13701552
> 
> 赞同：0
> 
> 时间：2012-12-04T11:09:41.097
> 
> 标签：sql, sql-server-2008, left-join

我正在使用左连接来组合两个表。它们是`SOP10100`和`SOP10106`。

合并两张表后，我必须得到两张发票（行）。现在我收到四张发票（行）。

你能看看我的查询并指出我在哪里犯了错误吗？

```
Select
    DISTINCT DETAIL.SOPNUMBE as Invoice,
    DETAIL.DOCDATE as Date,
    DETAIL.CUSTNMBR as 'Customer Id',
    DETAIL.CUSTNAME as Customer_Name,
    DETAIL.SUBTOTAL as Sub_Total,
    DETAIL.FRTAMNT as Freight,
    DETAIL.TAXAMNT as Tax,
    DETAIL.DOCAMNT AS 'Doc_Amount',
    CASE when USRDEF05 <> ' ' THEN USRDEF05 ELSE '0'END as Winsys
FROM SOP10100 DETAIL 
Left JOIN SOP10106 USERDEF
ON USERDEF.soptype = DETAIL.soptype
WHERE BACHNUMB ='WINSYS112012' 
```

![在此处输入图像描述](../Images/4d82d2388ddd10530d07404457f27bfc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:16:43.100

`soptype`在 invoice 表中匹配表中的两条记录`userdef`。您会看到对于每张发票，您有两个不同的`Winsys`. 您想将哪一张与您的发票相关联？该问题的答案必须包含在您的查询逻辑中。

例如，您可能想要`MAX(Winsys)`（在您的情况下，`MAX(CASE ... END) as Winsys`）。只要您没有指定当左连接中的多个记录与您选择的表匹配时如何聚合值，您就会收到所有组合。

当您提出正确的汇总时，您还需要`GROUP BY`从发票表中选择的字段。

有两条记录`SOP10106`相同可能是错误的`soptype`。如果是这种情况，只需更正它，您将不会有重复。

# java - 每次我编辑一点点 Java 文件时，Tomcat 都会自动重新启动。我怎样才能阻止它？

> ID：13701561
> 
> 赞同：0
> 
> 时间：2012-12-04T11:10:08.963
> 
> 标签：java, spring, tomcat, struts

我曾经能够编辑我的 java 文件并查看差异（system.out.print 等...）但是发生了一些事情，现在每次我做出最小的更改时，tomcat 都会重新启动，我必须等待它启动所以我可以看到变化。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:13:19.370

您需要编辑 web.xml，使其具有以下内容：

```
<Context reloadable="true"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T11:55:47.913

```
<Context reloadable="false"> 
```

做这项工作。

感谢abalogh的建议

# asp.net-mvc - 如果字符串！=“”，则 MVC 3 淘汰赛

> ID：13701565
> 
> 赞同：1
> 
> 时间：2012-12-04T11:10:21.863
> 
> 标签：asp.net-mvc, if-statement, knockout.js

```
<!-- ko if: ItemType() > 0 -->
  <div ...   </div>
<!-- /ko -->
<!-- ko else if: OfferId() != "" -->
  <div ...      </div>
<!-- /ko --> 
```

ItemType 和 OfferId 是对象中的属性，由

```
public string OfferId { get; set; }
public int ItemType { get; set; }

p.ItemType = ko.observable(item.ItemType);
p.OfferId = ko.observable(item.OfferId); 
```

第一个 if 语句有效，但 else if 即使 ItemType 为 0 且 OfferId 也有效。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:35:34.187

您没有在冒号前输入 javascript。这是淘汰赛中绑定的名称。淘汰赛没有`else if`约束力。

你需要做：

```
<!-- ko if: ItemType() > 0 -->
    <div ...   </div>
<!-- /ko -->
<!-- ko if: ItemType() <= 0 && OfferId() != "" -->
  <div ...      </div>
<!-- /ko --> 
```

[有关绑定的完整列表，请参阅http://knockoutjs.com](http://knockoutjs.com)的左栏

“控制流”部分具有`if`绑定 - no `else if`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:34:21.723

删除第二个语句中的 else 。据我所知，如果在淘汰赛中绑定没有别的。

```
<!-- ko if: OfferId() != "" && ItemType() == 0 -->
  <div ...      </div>
<!-- /ko --> 
```

# opengl-es - ios6中的MKMapView和OpenGL渲染

> ID：13701567
> 
> 赞同：4
> 
> 时间：2012-12-04T11:10:28.233
> 
> 标签：opengl-es, ios6, maps, mkmapview, layer

有一个应用程序在`MKMapView`. 在 iOS 6 和 Apple Maps 之前，这就像一个魅力......

iOS 6 / Apple Maps 的问题是性能很糟糕，导致在平移/缩放地图时 3d 对象会四处跳动。我猜这个问题是由于`MKMapView`现在使用 OpenGL 来渲染地图，但我不知道如何让它工作......

iOS 5 / Google Maps 版本使用常规`CADisplayLink`进行渲染，但事实证明，Apple Maps 非常滞后。

然后我尝试将渲染移动到 a`MKOverlay`并从那里调用我的“draw frame”，这稍微提高了性能，但与 iOS 5 / Google Maps 版本相比仍然很糟糕。

我最终在地图上添加了一个平移/捏合手势识别器，`MKMapView`并在每次平移/捏合地图时手动调用“画框”。这比覆盖略好一点，但距离 iOS 5 / Google 地图的性能还有很长的路要走。

然而，让应用程序在装有 iOS 5 的 iPhone 4S 上以 45-50 fps 的速度运行，而在装有 iOS 6 的 iPhone 5 上以 15-20 fps 的速度运行相同的应用程序，这是非常令人沮丧的......

我试过在后台线程、高优先级线程、低优先级线程上进行渲染、延迟它、异步调用它，我只是无法接近 iOS 5 的性能:(

任何想法或建议如何愉快地将`MKMapView`iOS 6 中的 OpenGL 渲染与自定义 OpenGL 渲染调用结合起来？

# ios - “在“”字符串中发现无效的转义序列。” 使用 RestKit 从 JSON 调用报告

> ID：13701568
> 
> 赞同：1
> 
> 时间：2012-12-04T11:10:33.923
> 
> 标签：ios, restkit, jsonkit

Web 服务调用失败，并显示消息**“在“字符串中找到无效的转义序列”。**通过`objectLoader:didFailWithError:`方法显示。

从服务器获取的 JSON 包含一些 \ 字符，这似乎是此失败的原因。

如何避免这种情况。快速搜索说`JKSerializeOptionEscapeForwardSlashes`应该在 中指定`JSONKit`，但是如何使用 RestKit 实现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:23:26.247

检查您的网址是否以“http://”开头？

# yii - 如何在 yii 中添加下拉列表以在 jquery 中附加标签

> ID：13701573
> 
> 赞同：-1
> 
> 时间：2012-12-04T11:10:48.853
> 
> 标签：yii

在这里，我无法将`dropdownList`Yii 添加到 jQuery 中的 append 方法。这是我的代码

```
$(document).ready(function(){
    $(".tasks-add").click(function () {
        $('.tasks').append('<li class="elements"><?php echo $form->labelEx($modelAcademics, 'Academic'); ?><?php echo $form->dropDownList($modelAcademics, '[]academics', array('school', 'college'));?></li>');
    });
}); 
```

但我可以添加`textField`而不是`dropdownList`。谁可以帮我这个事 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T19:12:40.790

我建议在页面加载（服务器端）时将带有 php 代码的下拉列表添加到您的 HTML 中，而不是用具有 CSS 属性的类标记它`display: none;`比让 jQuery 在单击时显示它。此外，您的 []academics 的 dropDownlist 名称有点奇怪，这应该只是`academics`。例子：

HTML/CSS/PHP：

```
<style type="text/css">.myDropDown { visibility: hidden; }</style.
<?php 
echo $form->labelEx($modelAcademics, 'academic');
echo $form->dropDownList($modelAcademics, 'academics', array('school', 'college'),array('class' => 'myDropDown')); 
?> 
```

jQuery：

```
$(document).ready(function(){
$(".tasks-add").click(function () {
    $('.myDropDown').show();
});
}); 
```

# xpages - 从 SSJS xPages 调用一个 jar 类

> ID：13701583
> 
> 赞同：2
> 
> 时间：2012-12-04T11:11:32.927
> 
> 标签：xpages, xpages-ssjs

我想问一个关于在 xPages 上的 SSJS（服务器端 JavaScript）中使用 Java 类的问题。我创建了一个简单的 Java 类“HelloWorld”并将其导出到 jar 文件中。然后我尝试在 xPage 上从 SSJS 调用它，但没有成功。这些是我尝试过的一些事情：

1.  将 jar 添加到 .nsf 的构建路径（jar 和 nsf 都是本地的）
2.  将 jar 添加到 nsf 的 WEB_INF/lib 文件夹中。
3.  直接从 SSJS 调用 jar 的类为

    var a = new com.myself.testJava.HelloWorld();

4.  从我在 nsf 中创建的另一个 Java 类调用该类，然后从 SSJS 调用第二个类。

我总是收到错误 500“HTTP Web 服务器：命令未处理异常”

我还尝试在服务器上运行我的 xpage 并将 jar 文件添加到 jvm/lib/ext 文件夹中。在这种情况下，错误是找不到“com”，我理解这意味着找不到该类。

我已经完成在 nsf 中创建一个 java 类，然后从 SSJS 调用，但我希望能够使用 3rd 方类。

您能否提供有关正确步骤的任何信息？

提前非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T14:25:22.493

在 SSJS 的顶部，您需要执行 ImportPackage。

```
importPackage(com.myself.testJava) 
```

请注意，您需要导入包而不是类。现在你的 SSJS 的其余部分应该可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T16:12:54.810

看起来您的课程中有一些错误 - 可能是未解决的编译问题？

请查看服务器上 xpages 日志文件中记录的内容。

您应该能够在 '\Data\domino\workspace\logs' 文件夹中的文件 error-log-0.xml 中找到异常（具有完整堆栈）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:10:27.933

所有这些都应该工作，但可能需要一些微调。

尝试您的**2.**并使用 Domino Designer 将 JAR 放在构建路径中：Java 构建路径 -> 库 -> 添加 JAR。

# unit-testing - Specs2 - Scala 中的平等测试

> ID：13701587
> 
> 赞同：1
> 
> 时间：2012-12-04T11:11:47.243
> 
> 标签：unit-testing, scala, specs2

我已经用 Specs2 测试我的代码有一段时间了，在我的测试中，我想确保某种类型的两个对象正确比较：

```
"compare based on carrier value" in {
  val b0 = new BitField32(343948)
  val b0prim = new BitField32(343948)
  val b1 = new BitField32(112)

  b0prim should be equalTo(b0)
  b1 should not be equalTo(b0)
} 
```

执行此测试时，出现错误

```
[error] x compare based on carrier value
[error]    'core.BitField32@17805bd5' is not equal to 'core.BitField32@6c0d0900' (BitField32Spec.scala:34)
[error] Expected: ...ld32@[6c0d0900]
[error] Actual:   ...ld32@[17805bd5] 
```

这似乎是合理的，因为我的班级没有任何比较方法。所以我尝试了一些想到的事情：实现`Ordered`并提供各种比较方法：

```
/**
 * mutable 32bit Bitfield
 */
class BitField32(var carrier: Int) extends Ordered[BitField32]{

  override def equals(that: Any) = true
  def canEqual(that: Any) = true

  def compare(that: BitField32) = this.carrier - that.carrier
  def ===(that: BitField32) = this.carrier == that.carrier
  def ==(that: BitField32) = this.carrier == that.carrier
  //(...)
} 
```

但我仍然不断收到同样的错误。我试图阅读 specs2 的源代码来了解 equalTo 匹配器是如何工作的，但之后我并没有变得更聪明。

知道如何修改我的类以使（股票）specs2 匹配器获取相等性吗？

BitField32 不是设计的案例类 - 我希望它是可变的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:11:47.243

在添加比较方法后，我实际上误读了错误消息：它说比较对象是相等的，即使它们不应该相等。specs2 使用的比较已经到位，并且始终返回 true -`equals`方法。这是固定代码：

```
class BitField32(var carrier: Int){

  override def equals(that: Any) = that match {
    case bf: BitField32 => this == bf
    case _ => false
  }

  def ==(that: BitField32) = this.carrier == that.carrier
} 
```

# php - CS Cart 在类别列表中显示产品

> ID：13701592
> 
> 赞同：1
> 
> 时间：2012-12-04T11:12:10.277
> 
> 标签：php, smarty, categories, product, cs-cart

我有一个关于 CS Cart / Smarty 的项目，我想在活动类别下的类别列表中生成一个类别的产品列表。

到目前为止，代码`categories_tree.tpl`仅打印类别，如下所示：

```
{* $Id$ *}
{assign var="cc_id" value=$smarty.request.category_id|default:$smarty.session.current_category_id}
{foreach from=$categories item=category key=cat_key name="categories"}
    {if $category.level == "0"}
        {if $ul_subcategories == "started"}
            </ul>
            {assign var="ul_subcategories" value=""}
        {/if}
        <ul class="menu-root-categories tree">
            <li>
                <a href="{"categories.view?category_id=`$category.category_id`"|fn_url}" {if $category.category_id == $cc_id} class="active"{/if}>{$category.category}</a>
            </li>
        </ul>
    {else}
        {if $ul_subcategories != "started"}
            <ul class="menu-subcategories">
                {assign var="ul_subcategories" value="started"}
        {/if}
        <li><a href="{"categories.view?category_id=`$category.category_id`"|fn_url}"{if $category.category_id == $cc_id} class="active"{/if}>{$category.category}</a></li>

        {if $category.category_id == $cc_id}
            <div class = "cat_prod" style = "display: none;">
                testing
            </div>
        {/if}
    {/if}

    {if $smarty.foreach.categories.last && $ul_subcategories == "started"}
        </ul>
    {/if}
{/foreach} 
```

我需要在div中创建一个`<ul>`活动类别的产品。`cat_prod`我如何撰写`foreach`才能获得该类别的产品？

# asp.net - 如何使用 itextsharp 在 mvc3(razor) 中生成视图并将其保存为 pdf

> ID：13701594
> 
> 赞同：1
> 
> 时间：2012-12-04T11:12:27.423
> 
> 标签：asp.net, asp.net-mvc-3-areas

[http://www.codeproject.com/Articles/260470/PDF-reporting-using-ASP-NET-MVC3](http://www.codeproject.com/Articles/260470/PDF-reporting-using-ASP-NET-MVC3)

我已经使用了上面链接中给出的代码，并在保存生成的 pdf 时发现了问题。所以请给我一个保存pdf的想法，这样我就可以通过邮件发送它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T19:13:43.927

好的，阅读完这篇文章后，我*想*您要问的是如何将 PDF 作为电子邮件的附件发送，而不是在浏览器中将其流式传输给用户。

链接中的代码包含此段，我假设您将能够在自己的代码中识别和定位：

```
string htmlText = this.htmlViewRenderer.RenderViewToString(this, viewName, model);

// Let the html be rendered into a PDF document through iTextSharp.
byte[] buffer = standardPdfRenderer.Render(htmlText, pageTitle); 
```

此时，您将拥有一个包含 PDF 文档的字节数组。因此，将其保存到磁盘所需要做的就是：

```
using(FileStream fs = new FileStream("your file name.pdf", FileMode.Create))
{
    fs.Write(buffer, 0, buffer.Length);
} 
```

然后，您可以使用您的文件创建电子邮件附件。

# jquery - 如果不同的类值jquery隐藏div

> ID：13701595
> 
> 赞同：1
> 
> 时间：2012-12-04T11:12:28.997
> 
> 标签：jquery

这是html：

```
 <div class="messages">
  <div class="conflict">
   <div class="alert alert-info">
    Conflict
   </div>
  </div>
  <div class="account">
   <div class="alert alert-info">
    Account
   </div>
  </div>
 </div> 
```

这是CSS：

```
.new_inquiry > form > .messages > .conflict, .account { display: none;} 
```

这是jquery代码：

```
$('#inquiry_theme').change(function(){
    if($('#inquiry_theme').val() == 'Conflict with the buyer/seller...') {
       $('.new_inquiry form .messages .conflict').show();
     }
}); 
```

如果打开了其他 div，则何时触发`$('.new_inquiry form .messages .conflict').show();`，如果类不同，我想隐藏它`.conflict`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:24:12.080

我假设您想显示 .conflict div 并在显示时隐藏其他 div。

为此，您可以使用`.siblings()`jquery 的功能。

这是一个小提琴： http: [//jsfiddle.net/SVQaW/](http://jsfiddle.net/SVQaW/) 虽然它只是一个虚拟场景尝试使用你的方式。

```
$('#inquiry_theme').change(function(){
    if($('#inquiry_theme').val() == 'Conflict with the buyer/seller...') {
       $('.new_inquiry form .messages .conflict').show();
       $('.new_inquiry form .messages .conflict').siblings().hide();
     }
}); 
```

# java - Android布局上的NullPointer？

> ID：13701596
> 
> 赞同：1
> 
> 时间：2012-12-04T11:12:31.787
> 
> 标签：java, android, xml, eclipse, android-layout

我收到此错误：

```
java.lang.NullPointerException
Exception details are logged in Window > Show View > Error Log 
```

尝试在 GUI 中编辑布局时。我不久前停止了这个项目，但我又回来了，但它似乎无法编辑。有小费吗？

错误日志说

```
"eclipse.buildId=M20120914-1800
java.version=1.7.0_06
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Framework arguments:  -product org.eclipse.epp.package.java.product
Command-line arguments:  -os win32 -ws win32 -arch x86 -product org.eclipse.epp.package.java.product

Error
Tue Dec 04 06:08:55 EST 2012
text_frag.xml: java.lang.NullPointerException

java.lang.NullPointerException
    at com.android.layoutlib.bridge.impl.RenderAction.tearDown(RenderAction.java:250)
    at com.android.layoutlib.bridge.impl.RenderAction.release(RenderAction.java:218)
    at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:338)
    at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:486)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1538)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1284)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart$ReloadListener.reloadLayoutSwt(GraphicalEditorPart.java:1768)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart$ReloadListener.access$0(GraphicalEditorPart.java:1706)
    at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart$ReloadListener$1.run(GraphicalEditorPart.java:1700)
    at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
    at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
    at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4144)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3761)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1029)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
" 
```

被投诉的xml：

```
<RelativeLayout xmlns:tools="http://schemas.android.com/tools"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#ffffff" >

    <FrameLayout
        android:id="@+id/container_ide"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true" >
    </FrameLayout>

    <LinearLayout
        android:id="@+id/linerlayout1"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:layout_above="@+id/container_ide"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:background="@drawable/grad" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="true"
            android:onClick="timer"
            android:padding="6dp"
            android:src="@drawable/luck" />

        <TextView
            android:id="@+id/pwd_statuss"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:gravity="center_vertical"
            android:text="0"
            android:textAppearance="?android:attr/textAppearanceLarge" />

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="true"
            android:onClick="attachAlert"
            android:padding="6dp"
            android:src="@drawable/type_icon_image" />
    </LinearLayout>

    <EditText
        android:id="@+id/editText2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/linerlayout1"
        android:layout_alignParentLeft="true"
        android:background="#ffffff"
        android:clickable="true"
        android:cursorVisible="true"
        android:ems="10"
        android:gravity="center_vertical|top"
        android:hint="Your Message (Up to 1500 Chracters)"
        android:inputType="textMultiLine"
        android:padding="5dp"
        android:textColor="#000000"
        android:textColorHint="#585858"
        android:textColorLink="#000000"
        android:textCursorDrawable="@null" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T23:43:18.567

更新 ADT 修复了它！注意自我...不要在不更新 ADT 的情况下更新 SDK 工具。

# c# - 用户控件上的 ASP.NET 调用方法

> ID：13701598
> 
> 赞同：0
> 
> 时间：2012-12-04T11:12:42.517
> 
> 标签：c#, asp.net, web-user-controls

我创建了一个如下的用户控件来上传图像。在它后面的代码中，我有保存图像的方法。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="UCImageUploader.ascx.cs"
    Inherits="WebApplicationFor_ABC.UCImageUploader" %>
<div>
    <asp:FileUpload ID="FileUploadImage" runat="server" />
    <asp:Image ID="ImageThumbnail" runat="server" />
    <asp:Label ID="LblMsg" runat="server" Text=""></asp:Label>
<asp:CheckBox ID="CheckBoxDelete" runat="server" Text="Delete"/>

</div> 
```

后面的代码如下

```
 public partial class UCImageUploader : System.Web.UI.UserControl
    {
        public bool SaveImg()
        {
                        //file field isn't empty
        if (FileUploadImage.PostedFile != null)
        {

            //check file size
            HttpPostedFile img = FileUploadImage.PostedFile;

            if (img.ContentLength == 0) // no file uploaded
            {
                msg = "No file was uploaded";
                LblMsg.Text = msg;
                return false;
            }
            else if (img.ContentLength > fileSizeInKB * 1024) // file size exceeds limit
            {
                msg = "File size exceeds the limit. Max is " + fileSizeInKB + "KB";
                LblMsg.Text = msg;
                return false;
            }
            else // accepted file size
            {
                //check file extension jpg,jpeg,BMP

                string[] fileExtensions = { "jpg", "jpeg", "bmp" };

                if (!fileExtensions.Contains(Path.GetExtension(img.FileName).ToLower()))
                {
                    msg = "File extension must be of jpg,jpeg,bmp";
                    LblMsg.Text = msg;
                    return false;
                }

            }
        }
        msg = "Valid File";
        LblMsg.Text = msg;
        return valid;
    } 
```

在另一个按钮的单击事件中，我想调用此`SaveImg()`方法并保存图像。问题是因为回发图像返回为空。我怎样才能解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:20:30.117

为了访问图像，您不要通过文件上传控件执行此操作，例如

```
FileUploadImage.SaveAs(savePath); 
```

# text - 散列对VB中的变量有什么作用？

> ID：13701599
> 
> 赞同：1
> 
> 时间：2012-12-04T11:12:43.990
> 
> 标签：text, printing, vb6, filestream

我必须将 VB6 程序重构为 C#，并且坚持理解以下几行：

```
Set myFileSystemObject = New FileSystemObject
Set myTextStream = myFileSystemObject.OpenTextFile("myTextFile.txt")
Open sPrinterPort For Output As iFileNumber
Print #iFileNumber, myTextStream.ReadAll
Close #iFileNumber 
```

我确实知道一般会发生什么，但由于我不习惯 VB 语法，我想确切地知道是什么

```
Print #iFileNumber, myTextStream.ReadAll 
```

做。更具体地说，`#`前面的`iFileNumber`作用。为什么会在那里？变量本身不足以在流上打印吗？

这仅仅是为了准确理解代码中发生的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T11:17:13.167

`Print #iFileNumber, myTextStream.ReadAll`将 by 返回的字符串打印`ReadAll`到 number 打开的文件中`iFileNumber`（并且因为语句后面没有分号，所以最后也加上`vbNewLine`了。）

（`#`对于“数字”）自古以来就存在。VB6 只是支持它。它在执行方面没有任何作用。它用于帮助提高可读性并使语言更自然。大声说出来：

```
Open "1.txt" For Input As 1 
```

对比

```
Open "1.txt" For Input As #1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-04T18:31:08.057

```
Print #iFileNumber, myTextStream.ReadAll 
```

在尝试自己理解这一点时，我遇到了这个[网站](http://www.truebasic.com/node/1032)，其中有一个关于打印到打印机的部分。他们说#some_integer 表示频道号：

> 通道号是 0 到 999 之间的任何整数值，前面带有井号 (#)；它指示设备的特定通道。
> 
> 通道是您的程序与输入或输出设备（例如打印机或文件）之间的连接。

# android - 将我的 java /C++ 库 API 公开给 javascript

> ID：13701602
> 
> 赞同：2
> 
> 时间：2012-12-04T11:12:48.867
> 
> 标签：android

我想将我的 Android 库 API 公开给 javascript。有没有办法实现它。

我不想为此使用 webview。

谢谢基肖尔

# python - 如何复制估算器以便在多个数据集上使用它？

> ID：13701603
> 
> 赞同：28
> 
> 时间：2012-12-04T11:12:48.383
> 
> 标签：python, machine-learning, scikit-learn

这是一个创建两个数据集的示例：

```
from sklearn.linear_model import LogisticRegression
from sklearn.datasets import make_classification

# data set 1
X1, y1 = make_classification(n_classes=2, n_features=5, random_state=1)
# data set 2
X2, y2 = make_classification(n_classes=2, n_features=5, random_state=2) 
```

我想使用`LogisticRegression`具有相同参数值的估计器在每个数据集上拟合分类器：

```
lr = LogisticRegression()

clf1 = lr.fit(X1, y1)
clf2 = lr.fit(X2, y2)

print "Classifier for data set 1: "
print "  - intercept: ", clf1.intercept_
print "  - coef_: ", clf1.coef_

print "Classifier for data set 2: "
print "  - intercept: ", clf2.intercept_
print "  - coef_: ", clf2.coef_ 
```

问题是两个分类器是相同的：

```
Classifier for data set 1: 
  - intercept:  [ 0.05191729]
  - coef_:  [[ 0.06704494  0.00137751 -0.12453698 -0.05999127  0.05798146]]
Classifier for data set 2: 
  - intercept:  [ 0.05191729]
  - coef_:  [[ 0.06704494  0.00137751 -0.12453698 -0.05999127  0.05798146]] 
```

对于这个简单的例子，我可以使用类似的东西：

```
lr1 = LogisticRegression()
lr2 = LogisticRegression()

clf1 = lr1.fit(X1, y1)
clf2 = lr2.fit(X2, y2) 
```

以避免问题。但是，问题仍然存在：通常如何复制/复制具有特定参数值的估计器？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-12-04T11:26:37.603

```
from sklearn.base import clone

lr1 = LogisticRegression()
lr2 = clone(lr1) 
```

# scheme - 如何捕获语法异常

> ID：13701605
> 
> 赞同：5
> 
> 时间：2012-12-04T11:12:55.253
> 
> 标签：scheme, r6rs

我想通过一个测试语法异常的宏来扩展 srfi-78。我想要这样的东西：

```
#! /usr/bin/env scheme-script
#!r6rs

(import (rnrs) (srfi :78 lightweight-testing))

; the macros I want to test
(define-syntax some-macros
  (syntax-rules ()
    [(_) 'ok]))

; the extension to srfi-78
(define-syntax check-exception
  (syntax-rules ()
        ; ... some code ...
        ))

; tests

; prints "correct" or someting like that
(check (some-macros) => 'ok)

; should print "correct" (i. e. the test passed)
(check-exception (some-macros 'arg)) 

; should print "error"
; (i. e. the exception was not thrown as expected)
(check-exception (some-macros)) 
```

有可能吗？如果不是，您将如何为宏编写测试？

我`test-read-eval-string`从 srfi-64 得知。它接受一个字符串，将其转换为一个表单并在初始环境中评估该表单。我想要一个在当前环境中评估给定形式并捕获异常的宏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T09:26:54.587

唯一可移植的方法是通过 eval 调用代码，并将其包装在防护中。

例如：

```
(define (safe-eval code env)
  (guard [e [(syntax-violation? e) (display e)]]
    (eval code env))) 
```

用法：

```
> (safe-eval '(let a v) (environment '(rnrs)))
&who: let
&message: "invalid syntax"
&syntax:
  form: (let a v)
  subform: #f 
```

# sql - 返回表中匹配值的行号

> ID：13701608
> 
> 赞同：0
> 
> 时间：2012-12-04T11:13:08.310
> 
> 标签：sql, sql-server, tsql, asp-classic

2我有一个包含两个字段的查询（无论如何，出于本示例的目的）：-

```
RecordID
RecordDate 
```

此表按 RecordDate 排序（升序）。

我想找出 RecordID 中指定值在该查询中的位置。

因此，例如，如果我的表包含以下内容：-

```
10    15/2/1989
11    15/3/1989
12    15/4/1989
13    15/5/1989 
```

我的值是'11'，然后我想返回第 2 行...这是可能的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:17:18.257

```
SELECT 
    ROW_NUMBER() OVER (ORDER BY RecordDate) AS Row,
    RecordID, RecordDate 
from 
    YourTablename 
```

您可以添加条件然后添加`where RecordId='11'`或@input

# data-mining - 快速且可扩展的相似性检测

> ID：13701609
> 
> 赞同：1
> 
> 时间：2012-12-04T11:13:13.770
> 
> 标签：data-mining, inverted-index, minhash

我有大型 postgresql 数据库，包含文档。每个文档都表示为表中的一行。当新文档添加到数据库中时，我需要检查重复项。但我不能只`select`用来找到完全匹配。两个文档可能略有不同，但仍然可以被视为重复，例如，如果一些次要字段不同而所有其他字段都相同。

我研究这个问题并找到解决这个问题的方法。可以`MinHash`为每个文档计算签名并构建倒排索引，从数据库中查询相似的文档。但我不明白如何映射`MinHash`到关系数据库。

据我了解，`MinHash`签名是 N 个哈希的列表，其中 N 是许多属性。相似度计算如下：

```
# Given 2 signatures Sa and Sb containing N hashes.
# Calculate number of equal hashes Neq.
number_of_equal_hashes = 0
for ix in range(0, N):
    if Sa[ix] == Sb[ix]:
        number_of_equal_hashes += 1
similarity = float(number_of_equal_hashes)/N 
```

如果您已经有两个签名，这很简单，问题是在数据库中找到相似度小于或等于某个值的所有文档（具有相应签名）。

例如，我可以创建具有多个列的表，如下所示：

```
| minhash0 | minhash1 | minhash3 | docid | 
```

每`minhashX`列对应于文档属性之一的 minhash，并且`docid`是文档的标识符。我可以这样查询类似的记录：

```
select * from invidx
where ((case when minhash0=minhash2search0 then 1 else 0 end) +
       (case when minhash1=minhash2search1 then 1 else 0 end) +
       (case when minhash2=minhash2search2 then 1 else 0 end))/N > THRESHOLD 
```

其中`minhash2searchX`是新文档的 minhashes，而 THRESHOLD 是最小相似性。但是这种方法需要全扫描。有什么方法可以加速这个算法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T12:43:05.140

要使用倒排索引的优势，我建议您使用全文搜索引擎，例如[Lucene](http://lucene.apache.org/)或[Solr](http://lucene.apache.org/solr/)（基于 Lucene）

您可以构建“文档”（就 Lucene 而言），其中包含与您的文档（数据库记录）的 MinHashes 相关联的字段。请注意，您也可以索引数字字段（您只需要在方案中描述字段类型）。此外，您必须存储每个文档的主键，以便将 Lucene“文档”映射到数据库中的记录上。

索引整个文档集合。

要查找与给定文档相似的文档 - 您必须计算每个字段的 MinHashes，并[查询](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/queryparsersyntax.html)Lucene 以获取[相似](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/search/Similarity.html)文档：

```
field1:MinHash1 OR field2:MinHash2 OR ... 
```

**随着更多字段匹配文档 - 它将具有更高的排名**。所以，你可以拿一些最高级别的文件，然后做出决定——如果它们在你的情况下真的很相似

此外，[提升](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/queryparsersyntax.html#Boosting%20a%20Term)字段可能对您有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-13T02:34:49.333

您的哈希表应包含两列：

```
| minhash | docid | 
```

它应该在 minhash 上建立索引。

当一个新文档到达时，您依次搜索其每个 minhash，查询表以查找共享该 minhash 的先前文档。您建立这些先前文档共享多少 minhashes 的计数，然后丢弃所有那些共享的 minhashes 少于（例如）50% 的那些。这有效地产生了至少（估计）50% 相似的所有文档集。

最后，您为每个新文档的 minhashes 插入新行。

**使用 Lucene 或 Solr 是一个糟糕的解决方案。**它将需要更多的存储空间，实现起来更复杂，*效率也大大降低*。是的，您可以让 Lucene 索引您的 minhashes 并按照 stemm 的建议运行查询。这将返回甚至共享一个 minhash 的每个文档，这可能是数万或数十万，具体取决于您的数据大小。然后，您必须使用“相似性”功能将这些中的每一个与您传入的文档进行单独比较，这将非常慢。

Lucene 确实提供了一个“MoreLikeThis”功能来查找共享某些关键字的文档，但这会丢失许多 minhash 方法可以找到的类似文档。

# c - typedef 如何在内部工作？

> ID：13701610
> 
> 赞同：0
> 
> 时间：2012-12-04T11:13:17.140
> 
> 标签：c

问题是内部如何`typedef`工作？

PS：我确实在各种网站上进行了搜索，包括维基百科和各种。但他们都没有回答这个问题。因此问题。

进一步澄清：我确实了解了它的作用，但它的作用是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:11:16.800

`typedef`没有指定任何编译器如何处理 a ；很可能类型信息被保存为该名称的符号表条目的一部分，并且在源代码中遇到类型名称的任何地方，在翻译过程中都会替换等效的类型信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:18:09.373

`typedef`是关键字 in `C`，它为程序员提供了一个工具来制作自己的别名

`data type`来自其他类型或现有的内置类型。

这就是语言的样子，也是它的实现方式。

`typedef <given_type> <new_type>`

仅供参考：如果你这样做

`int a`它由编译器解析，然后它知道这`a`是一个类型的变量`int`。并相应地分配内存。

同样，每当`typedef`找到关键字时，它就会假定紧随其后的类型是 the `old_type`，而其他新标识符是`new_type`。

编辑 ：

ISO c99：存储类说明符

`The typedef specifier is called a ‘‘storage-class specifier’’ for syntactic convenience only.If, in a parameter declaration, an identifier can be treated either as a typedef name or as a parameter name, it shall be taken as a typedef name.A typedef declaration does not introduce a new type, only a synonym for the type so specified`

# iphone - 从 UIViewController 切换到 UINavigationController 丢失标签栏

> ID：13701614
> 
> 赞同：0
> 
> 时间：2012-12-04T11:13:29.457
> 
> 标签：iphone, objective-c, ios6, xcode4.5

我需要从 UIViewController 导航到 UINavigationController，下面的代码可以做到，但切换后，底部的标签栏消失了，我得到了库存！

```
HomeViewController *homeList = [self.storyboard instantiateViewControllerWithIdentifier:@"homeList"];
UINavigationController *uc = [self.storyboard instantiateViewControllerWithIdentifier:@"homeNav"];
uc = [[UINavigationController alloc] initWithRootViewController:homeList];
[self presentModalViewController:uc animated:YES]; 
```

问题应该在 presentModal 中，但我不知道如何管理。我是 Objective C 和 iOS 开发的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:43:03.323

这是因为您将其呈现为模态控制器，因此不会显示标签栏。设计的模态控制器用于显示中断当前工作流程以呈现一些新信息的屏幕，请参阅此处了解模态控制器的工作原理

[http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerPGforiOSLegacy/ModalViewControllers/ModalViewControllers.html](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerPGforiOSLegacy/ModalViewControllers/ModalViewControllers.html)

如果您需要导航控制器，那么使用导航控制器而不是视图控制器初始化标签控制器肯定会更有意义，然后您可以使用从一个屏幕移动到下一个屏幕

```
[self.navigationController pushViewController:someController animated:YES]; 
```

# java - 在 Linux 上与 DLP-IO20（使用 FTDI 芯片）通信

> ID：13701617
> 
> 赞同：2
> 
> 时间：2012-12-04T11:13:38.187
> 
> 标签：java, ftdi

我正在尝试与 linux (ubuntu) 上的 DLP-IO20 板通信，但每次都会出错。windows下同样的程序运行良好。

为了与板子通信，我首先安装了所有的 FTDI 驱动程序，然后我为 linux libjd2xx.so 生成了一个库

现在，当我尝试运行 JD2XX.java 文件的主程序时，出现以下错误：

> 索引：0，标志：0x0，类型：0x5，id：0x4036001，位置：0x204，序列：12345678，描述：DLP-IO20，句柄：0x0 **线程“main”中的异常 java.io.IOException：无效句柄 (1)**

如您所见，程序会读取电路板信息，但是当它尝试向电路板发送命令时，会引发上述异常。引发异常的行是以下代码中的**最后一行：**

```
 DeviceInfo di = jd.getDeviceInfoDetail(0);
    System.out.println(di.toString());
    jd.open(0);
    String msg = "Hello dude. This is the message.";
    int ret = jd.write(msg.getBytes()); 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-04T19:43:35.260

*以下不是 Java 答案，而是说明如何在不安装任何驱动程序的情况下非常简单直接地与 DLP-IO8 通信，也许这可以帮助您使用 DLP-IO20*

在 linux 上，设备由文件抽象（不像在 Windows 上，您必须调用函数`.dll`来访问设备）。

因此，当我将 DLP-IO8 插入 USB 端口时，`/dev/ttyUSB0`文件就会出现。（它可能会有所不同，因此您可以 `dmesg`在终端中运行，它将显示所有已连接/断开的 USB 设备及其位置的日志，以便您推断 DLP-IO8 的位置）

现在你不需要任何驱动程序或任何东西。`/dev/ttyUSB0`被识别并与您的 DLP-IO20 相对应，因此您可以开始使用，您可以写入/读取以`/dev/ttyUSB0`写入/读取您的 DLP-IO8。

因此，从 DLP 文档中，您必须以 115200 的波特率进行通信。您可以使用以下方式设置此波特值：

```
sudo stty -F /dev/ttyUSB0 115200 
```

仍然来自 DLP 文档，如果要获取通道 1 上的电压值，则必须将 ascii 字符发送`'Z'`到 DLP-IO8。所以打开两个终端，在其中一个运行：

```
sudo cat /dev/ttyUSB0 
```

以查看返回板的内容。使用另一个终端运行：

```
echo -en '\x5A' > /dev/ttyUSB0 
```

为了发送字符`'Z'`（其ascii编号为`5A`十六进制）。现在你应该在第一个终端看到你的电压值。

因此，如果您不知道如何使用纯 Java 进行操作，则始终可以从 Java 中执行那些系统命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:16:18.320

尝试运行 FTDI 驱动程序提供的读取示例程序（如果我记得，在 release/examples/EEPROM/read 下）。看看有没有问题。

如果您很绝望，请查看是否安装了 ftdi_sio 并尝试使用 'rmmod ftdi_sio' 将其删除（这[对我](https://stackoverflow.com/questions/14615308/using-ftdi-d2xx-drivers-with-python-from-raspberry-pi-on-raspbian-soft-float)有用）

# google-maps - 无法获取少数地址的地理坐标值

> ID：13701626
> 
> 赞同：2
> 
> 时间：2012-12-04T11:14:29.983
> 
> 标签：google-maps, google-geocoder

对于以下 2 个地址，我无法生成地理坐标。
我用过 `var geocoder = new google.maps.Geocoder();`
并且`geocode function.`

但对于以下地址以外的其他地址，它会生成正确的 lat long 值。

`37 Rowan Street,ST.JOHN'S,NEWFOUNDLAND`
`350 TORBAY ROAD,ST.JOHN'S,NEWFOUNDLAND`

不知道为什么会这样。

[https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/geocoding-simple)

我还检查了 Google 提供的上述示例中的地址。其状态显示为`ZERO_RESULTS`。
我能知道为什么它没有产生价值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:38:37.530

谷歌地图不一定知道世界上所有的地址，你有时必须修改你的地址才能从地理编码器中得到一些东西。

首先，您应该始终将国家添加到您的地理编码请求中。

在您的特定情况下，当您删除门牌号时，地理编码似乎有效：

```
Rowan Street,ST.JOHN'S,NEWFOUNDLAND 
TORBAY ROAD,ST.JOHN'S,NEWFOUNDLAND 
```

然而，这将是近似的。但我不认为你可以在这里找到更好的位置。

# php - 换行符在 syslog-ng 中被剥离

> ID：13701627
> 
> 赞同：3
> 
> 时间：2012-12-04T11:14:32.067
> 
> 标签：php, logging, syslog, syslog-ng

我们已经在负载平衡的服务器上使用 syslog-ng 实现了集中式日志记录。可以在此处查看该设置的历史：[如何设置 PHP 日志记录以访问远程服务器？](https://stackoverflow.com/questions/13563078/how-do-i-set-up-php-logging-to-go-to-a-remote-server).
它工作正常，但换行符在目的地被剥离。有没有办法保持换行符完好无损？这是我们的配置：

*资源*

```
destination php { tcp("server.com" port(xxxx)); };  
log { source(s_all); filter(f_php); destination(php); };  
filter f_php { facility(user); }; 
```

*目的地*

```
destination d_php { file("$PROGRAM" owner(www-data) group(www-data) perm(0644)); };  
filter f_php { program("^\/var\/log\/"); };  
log { source(s_all); filter(f_php); destination(d_php); flags(final); }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T14:02:36.167

您可以更改目标的 syslog 模板格式并在末尾手动添加换行符。例如，这是我用于自定义 syslog-ng 流之一的模板。我更改了日期格式（更容易被脚本解析）。注意末尾的“\n”。

```
file("$PROGRAM"
        template("$R_ISODATE $HOST_FROM $MSGHDR$MSG\n")
        template_escape(no)
); 
```

有关您可以使用的各种信息，请参阅[syslog-ng 文档。](http://www.balabit.com/sites/default/files/documents/syslog-ng-v3.0-guide-admin-en.html/index.html-single.html)`$VARS`

# asp.net-mvc-3 - Asp.Net MVC 3 Razor 视图的报告工具

> ID：13701630
> 
> 赞同：2
> 
> 时间：2012-12-04T11:14:37.193
> 
> 标签：asp.net-mvc-3, razor, reporting-services, reporting

你能推荐任何好的**报告工具来用****Asp.net MVC 3 razor view**创建报告吗？

 ****它应该提供诸如**

主从报告

表格报告

报表合并

并排报告

枢轴网格

图表和图形

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:00:51.320

PdfReport 能够为 web 和 windows 应用程序生成上述报告：http: [//pdfreport.codeplex.com/](http://pdfreport.codeplex.com/)。在这里您可以找到它的示例： http: [//pdfreport.codeplex.com/SourceControl/BrowseLatest](http://pdfreport.codeplex.com/SourceControl/BrowseLatest)**

# windows-8 - 使用 Windows 8 平板电脑作为从属设备

> ID：13701633
> 
> 赞同：0
> 
> 时间：2012-12-04T11:14:43.153
> 
> 标签：windows-8, active-directory, windows-runtime, master-slave, windows-store

我正在开发 Windows 8 应用程序，该应用程序将用于 Intranet 中的学生进行测验。对于此应用程序，当连接到网络的平板电脑（例如从服务器机器接收到一些命令）时，测验应用程序将同时在所有平板电脑中启动。

在测验期间，我不希望学生访问互联网或桌面资源。他们将无法在测验期间传递到桌面以从文档等中获取提示。

如果可能，它可以是 WinRT 应用程序，也可以是传统的 Windows 应用程序。我怎样才能做到这一点，如果你能指导我，我会很高兴。

主要是，在上课期间，老师将能够从他的笔记本电脑或平板电脑远程控制学生的机器。

# android - Seek Bar 与 android 中的媒体播放器不同步

> ID：13701635
> 
> 赞同：0
> 
> 时间：2012-12-04T11:14:49.930
> 
> 标签：android, seekbar

我正在开发音频流应用程序，其中我们使用搜索栏显示动作，但是当我们强行更改搜索栏的位置时，它无法与媒体播放器上播放的歌曲同步。

**代码：**

```
seekBarObj
                .setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
                    public void onStopTrackingTouch(SeekBar seekBar) {
                        /*
                         * mHandler.removeCallbacks(mUpdateTimeTask); String[]
                         * duration =
                         * lstSongDetails.get(Integer.parseInt(currentPosition
                         * )).getDuration().split(":"); int intDuration =
                         * Integer
                         * .parseInt(duration[0])*60*1000+Integer.parseInt
                         * (duration[1]);
                         * 
                         * int currentPosition =
                         * utils.progressToTimer(seekBar.getProgress(),
                         * mediaPlayerObj.getDuration());
                         * 
                         * // forward or backward to certain seconds
                         * mediaPlayerObj.seekTo(currentPosition);
                         */
                        // update timer progress again
                        // updateProgressBar();
                        // mHandler.removeCallbacks(mUpdateTimeTask);
                        //seekBarObj.setMax(mediaPlayerObj.getDuration());
                        mHandler.removeCallbacks(mUpdateTimeTask);
                        //seekBarObj.setProgress(seekBar.getProgress());

                        long position = (long)mediaPlayerObj.getDuration() * (seekBarObj.getProgress()) / 1000;
                        mediaPlayerObj.seekTo((int)position);
                    }

                    public void onStartTrackingTouch(SeekBar seekBar) {

                        //mHandler.removeCallbacks(mUpdateTimeTask);
                        //mediaPlayerObj.seekTo(seekBar.getProgress());
                        /*long position = (long)mediaPlayerObj.getDuration() * (seekBarObj.getProgress()) / 1000;
                        mediaPlayerObj.seekTo((int)position);*/
                    }

                    public void onProgressChanged(SeekBar seekBar,
                            int progress, boolean fromUser) {
                        /*
                         * mHandler.removeCallbacks(mUpdateTimeTask);
                         * seekBarObj.setProgress(seekBar.getProgress());
                         * mediaPlayerObj.seekTo(seekBar.getProgress());
                         * updateProgressBar();
                         */

                    }
                });

private Runnable mUpdateTimeTask = new Runnable() {
        public void run() {
            long totalDuration = mediaPlayerObj.getDuration();
            currentDuration = mediaPlayerObj.getCurrentPosition();
            tvSongDurationLeft.setText(""
                    + utils.milliSecondsToTimer(currentDuration));
            int progress = (int) (utils.getProgressPercentage(currentDuration,
                    totalDuration));
            seekBarObj.setProgress((int) (long) currentDuration);
            mHandler.postDelayed(this, 100);
        }
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:00:12.110

请参阅此链接[Media Player Example with Seek Bar](http://androidtrainningcenter.blogspot.in/2012/09/media-player-example-in-android-with.html)。它将向您展示计算应如何根据歌曲长度增加 Seek Bar Progress 的公式。

# android - getExtras().getSerializable() 和 getSerializableExtra() 之间的区别

> ID：13701637
> 
> 赞同：4
> 
> 时间：2012-12-04T11:14:57.923
> 
> 标签：android, android-intent

我之间有混淆

```
intent.getSerializableExtra (String name) 
```

和

```
intent.getExtras().getSerializable (String key) 
```

我们可以互换使用它们，还是它们都有自己的特定场景？如果是这样，我们可以使用哪些场景`getSerializableExtra (String name)` 以及何时可以使用`getExtras().getSerializable (String key)`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T11:17:01.547

两者都做同样的事情。`getSerializableExtra`是`Intent`（你必须在实例上调用它`Intent`）`getSerializable`的方法是`Bundle`（你必须在`Bundle`实例上调用它）的方法

# c# - 从工具箱拖放自定义控件时出错

> ID：13701638
> 
> 赞同：1
> 
> 时间：2012-12-04T11:15:01.197
> 
> 标签：c#, visual-studio-2010, sharepoint

我创建了一个服务器控件（自定义控件）。我想在我的 sharepoint 项目中使用它。我刚刚通过右键单击工具箱并添加项目将该自定义控件 dll 添加到工具箱中。现在，我只需拖放到可视 Webpart 表面。编译时出现以下错误。

`The type or namespace name 'SearchCustomControl' does not exist in the namespace 'SearchCustomControl' (are you missing an assembly reference?)'`

web.config 文件或任何地方有什么要改变的吗？

如果我使用像下面这样注册控件

`<%@ Register TagPrefix="ncc" Namespace="SearchCustomControl" Assembly="SearchCustomControl" %>`

没有编译错误。部署到共享点站点后，它给了我错误。 ![在此处输入图像描述](../Images/cc665c041f4d33d68fc5c1f1e17759f1.png)

如何使用我们想在 Visual Studio 2010 的另一个共享点项目中引用的自定义控件 dll？

# css - Safari 中的水平菜单

> ID：13701645
> 
> 赞同：0
> 
> 时间：2012-12-04T11:15:25.803
> 
> 标签：css, wordpress

我有点精神想弄清楚这一点。我有一个水平菜单，可以在除 Safari 之外的所有浏览器中正常工作。在 Safari 中，最后一个菜单项被下推到下一行。这是此页面上的主要导航 [http://www.allsafety.co.uk/](http://www.allsafety.co.uk/)

我尝试了很多不同的东西，现在我只是在正确的泡菜中。任何人都可以帮忙吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:45:09.393

一些浏览器对**CSS** `letter-spacing` / kerning 的处理方式不同。它看起来好像被向下推，因为它比水平条的宽度略大。在这样的时刻，即使字体大小处理方式的轻微渲染差异也会影响结果。

我会尝试弄乱某些字体样式，例如：

```
font-size
letter-spacing
word-spacing 
```

您可以改为从最后一个右侧选项卡中删除填充。

**CSS**：

```
#menu-main-nav > li:last-child > a { padding-right: 0; } 
```

或者，使用**jQuery**：

```
$('#menu-main-nav > li:last-child > a').css( { 'padding-right': 0 }); 
```

希望有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:17:15.357

我只需要解决类似的问题（在我的情况下，问题是导航标签可以更改，这会破坏布局，因为填充是最初设置的，因此所有元素都精确地放在一行中）。

就像我在上面的评论中所说的那样，在这种情况下，JS 可能是最可靠的解决方案，所以这里是代码：

```
(function($){
    $(document).ready(function(){
        _fix_nav_width();
    })

    $(window).load(function(){
        _fix_nav_width();
    })

    function _fix_nav_width() {
        var w = 0,
            max_w = $('.menu-main-nav-container').innerWidth(),
            length = $('#menu-main-nav > li').length,
            diff = 0,
            padd = 0;

        $('#menu-main-nav > li > a').each(function(){
            w += $(this).width(); // Get width without padding
        });
        diff = max_w - w; // Calculate the space that we should padd
        padd = ( diff / length ) / 2; // Calculate the amount of padding we should add on each side of the li's
        $('#menu-main-nav > li > a').css( { 'padding-left': padd, 'padding-right': padd } );
    }
})(jQuery) 
```

我们触发该功能两次 -一次`$(document).ready()`又一次`$(window).load()`- 您可能会看到一秒钟不正确的布局闪烁，但 IMO 这是最好的方法（因为通常元素的字体尚未呈现`$(document).ready()`）。

希望有帮助:)

# asp.net - IE 在 IIS7 中加扰脚本并打开静态压缩

> ID：13701648
> 
> 赞同：6
> 
> 时间：2012-12-04T11:15:31.303
> 
> 标签：asp.net, internet-explorer, iis-7, .net-4.5, http-compression

我在 IIS7 中无法解压缩 javascript 文件并且样式表无法正确加载时遇到问题。

我可以通过关闭 IIS 中的静态压缩来解决此问题，但这不是永久的解决方案。这个问题突然开始发生了。我们没有更改代码。

Web 应用程序是 .net 4 中的 asp.net Web 表单应用程序。在 IIS 中设置了静态和动态压缩。另一个 Web 表单 Web 应用程序在应用程序级别设置静态压缩仍然运行良好。

服务器已更新为 .net 4.5 框架。

一些样式表标签设置为 runat server，因为我附加了一个版本号以在 css 缓存和新版本发布时强制重新加载 css。

此问题仅在 Internet Explorer 中发生。

我真的被这个问题困住了。

**请求**

```
Request GET        /webapp/JavaScript/jQuery/js/jquery-1.3.2.min.js HTTP/1.1
Accept  text/html, application/xhtml+xml, */*
Accept-Language x-en-GB-zscot
User-Agent  Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Win64; x64; Trident/5.0)
UA-CPU  AMD64
Accept-Encoding gzip, deflate
Host    localhost
Connection  Keep-Alive 
```

**响应标头**

```
Key Value
Response    HTTP/1.1 200 OK
Cache-Control   private
Content-Type    application/x-javascript
Content-Encoding    gzip,gzip
Last-Modified   Wed, 10 Oct 2012 15:45:44 GMT
Accept-Ranges   bytes
ETag    "04f24efea6cd1:0"
Vary    Accept-Encoding
Server  Microsoft-IIS/7.5
X-Compressed-By HttpCompress
Date    Tue, 04 Dec 2012 11:07:13 GMT
Content-Length  19788 
```

**响应机构的一部分**

```
‹
@õ¿‹ä½kwÚÈ¶(úýü
¬ÕÛ-…âá¤×&gt;g +ŒtÂÛI~a²®²M7F^€ã¤ýÛï|T•ª„p²ö8çŽ;ÆéÑ1R©Þ5k¾kVéÕÿÈ½Êýñé)šÏµÃ¯áéh>y\æº“›yI_ŠoŠ¯1Ïýrùè—Jü³GñC  RñÃûøñû|rw¿Ì¹#/÷º\þG®ßÏrŸ£Åä3|x 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T06:12:10.730

这是 qZip 解压失败。如果`Content-Length`标题上的不正确，可能会发生。

有时如果页面设置了`Content-Length`header，然后 web 服务器尝试 gZip 页面，但无法更改`Content-Length`- 因为已经准备好发送到浏览器。

可能的解决方案是`Content-Length`从您的代码中删除该组并让 IIS 设置它，看看您是否准备好制作 qZip 这个文件并决定 - 让 iis 为您完成，您自己完成。

类似的问题和答案：
[在负载平衡的服务器上加载时，ASP.NET 站点有时会冻结和/或在页面顶部显示奇怪的文本](https://stackoverflow.com/questions/2582139/asp-net-site-sometimes-freezing-up-and-or-showing-odd-text-at-top-of-the-page-wh/2719080#2719080)

[HTTP 压缩：某些外部脚本/CSS 有时无法正确解压缩](https://stackoverflow.com/questions/3210526/http-compression-some-external-scripts-css-not-decompressing-properly-some-of-t/3210574#3210574)

[压缩 CSS 的 IIS 内容类型错误](https://stackoverflow.com/questions/10134017/iis-content-type-wrong-for-compressed-css/10134909#10134909)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:05:15.833

我已将这个问题缩小到使用 Blowery HttpCompression 的网站。

似乎.net 4.5 Blowery 和 IIS 不再很好地协同工作，静态内容似乎被压缩了两次，一次是 Blowery，一次是 IIS。

以上是一个猜测，但我认为我知道的是，删除 Blowery 后该网站又可以正常工作了。

# java - 如何在struts 2中用户请求新页面之前调用JSP页面的操作

> ID：13701651
> 
> 赞同：0
> 
> 时间：2012-12-04T11:15:37.770
> 
> 标签：java, javascript, struts2, struts

我在 JSP 中有一个菜单栏页面，并且正在加载不同的 JSP 页面。**我的一个 JSP 页面包含在Dojo**中开发的具有拖放功能的 portlet 。当任何用户通过单击菜单栏或关闭应用程序来请求新页面时，我想调用与此 JSP 页面关联的操作类来保存数据库中的 portlet 位置。

我试图实现`window.onunload`事件，但它是为父容器调用的，而不是为其中卸载的页面调用的。

任何人都可以使用我需要使用哪个 javascript 事件或 struts 2 标签来完成此要求吗？

![在此处输入图像描述](../Images/86c9aba9161236790b529b7da273e86d.png)

# c - 用 sscanf 控制整个字符串

> ID：13701657
> 
> 赞同：2
> 
> 时间：2012-12-04T11:15:55.473
> 
> 标签：c, parsing, scanf

我需要使用以下格式“foo=%d”解析 c 中的字符串，我需要检查格式是否正确并读取 int 值。

我的初始代码是：

```
int foo_set = 0;
int foo;
if (sscanf(text, "foo=%d", &foo) == 1)
    foo_set = 1; 
```

但是代码应该拒绝诸如“foo=5$%£”之类的输入。这段代码会起作用吗？

```
int foo_set = 0;
int foo;
char control;
if (sscanf(text, "foo=%d%c", &foo, &control) == 1)
    foo_set = 1; 
```

使用`control`字符代码检查没有额外的输入。有没有更好/更正确的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T11:18:32.613

使用`%n`格式说明符确定处理结束的位置并检查它是否与字符串的长度匹配：

```
const char* text = "foo=4d";
int pos;
int foo;

if (sscanf(text, "foo=%d%n", &foo, &pos) == 1 &&
    pos == strlen(text))
{
    /* Valid as all of text consumed. */
} 
```

`n`C99 标准中的格式说明符说明：

> 不消耗任何输入。**相应的参数应该是一个指向有符号整数的指针，将通过调用 fscanf 函数从输入流中读取的字符数写入该整数**。执行 %n 指令不会增加 fscanf 函数执行完成时返回的赋值计数。没有参数被转换，但有一个被消耗。如果转换规范包括分配抑制字符或字段宽度，则行为未定义。

[请参阅https://ideone.com/d1rhPf](https://ideone.com/d1rhPf)上的演示。

# android - 加载 QVGA 和 HVGA 仿真器时遇到问题

> ID：13701661
> 
> 赞同：1
> 
> 时间：2012-12-04T11:16:19.483
> 
> 标签：android

谁能帮帮我吗？我正在尝试在不同的模拟器（HVGA、QVGA 和 WVGA800）上测试我的 android 应用程序。WVGA800 加载正确，但 HVGA 和 QVGA 加载不正确。每当我尝试打开这些模拟器（HVGA、QVGA）时，屏幕都非常混乱，并且无法正确显示任何应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T10:03:07.207

此问题已通过创建新的 AVD 得到解决。在创建 AVD 时，我手动输入了分辨率，这导致了问题。现在，我通过使用 HVGA 和 QVGA 等内置皮肤分辨率创建了新的 AVD。这两个模拟器现在都可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:42:14.273

如果您在应用程序中使用图像，则使用 9 个补丁图像，它们将根据屏幕尺寸设置您的布局。

您还可以在 res 文件夹下名为 drawable-ldpi、drawable-hdpi 等的文件夹中为各种屏幕尺寸提供不同尺寸的 drawbles。

# xml - XSL，在同一个 html 表中显示 item[1] 和 item[2]

> ID：13701669
> 
> 赞同：0
> 
> 时间：2012-12-04T11:16:46.023
> 
> 标签：xml, xslt, sorting

我想在 HTML 表格中显示 XML 内容。我使用以下（简化的）代码来执行此操作：

```
<xsl:template match="/">
    <xsl:apply-templates select="/products/product">
        <xsl:sort select="populariteit" order="descending" data-type="number"/>
    </xsl:apply-templates>
</xsl:template>

<xsl:template match="product">
    <xsl:if test="position()=1">
        <table>
            <tr>
                <td>
                    <xsl:value-of select="title"/>
                </td>
            </tr>
        </table>
    </xsl:if>
</xsl:template> 
```

使用以下（简化的）XML：

```
<products>
    <product>
        <title>Title One</title>
        <popularity>250</popularity>
    </product>
    <product>
        <title>Title Two</title>
        <popularity>500</popularity>
    </product>
    <product>
        <title>Title Three</title>
        <popularity>400</popularity>
    </product>
</products> 
```

它的作用是按“流行度”对列表进行排序，然后从表中的第一个条目（最受欢迎）中显示标题。

现在，我想要完成的是显示*前两个*热门项目的标题。但无论我尝试什么，XSLT 都会将它们输出到*两个不同的表中，而不是一个*。

我试过这样的事情：

```
<xsl:template match="product">
    <table>
        <tr>
            <td>
                <xsl:if test="position()=1">
                    <xsl:value-of select="title"/>
                </xsl:if>
                <xsl:if test="position()=2">
                    <xsl:value-of select="title"/>
                </xsl:if>
            </td>
        </tr>
    </table>
</xsl:template> 
```

但这会导致两个不同的表；我希望标题在同一张表中彼此相邻显示，*同时仍使用排序列表中的信息*。

我想要的 HTML 输出是：

```
<table>
    <tr>
        <td>
            Title Three Title Two
        </td>
    </tr>
</table> 
```

由于我使用的软件存在某些限制，因此我只使用一个 XSL 来生成此输出，这一点很重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:26:41.270

那么您需要将生成表格的代码放在另一个模板中，例如

```
<xsl:template match="/">
    <table>
      <tr>
    <xsl:apply-templates select="/products/product">
        <xsl:sort select="populariteit" order="descending" data-type="number"/>
    </xsl:apply-templates>
      </tr>
    </table>
</xsl:template>

<xsl:template match="product">
    <xsl:if test="position() &lt; 3">

                <td>
                    <xsl:value-of select="title"/>
                </td>
    </xsl:if>
</xsl:template> 
```

这会将每个标题放在自己的单元格中，如果您希望全部在一个单元格中，则还需要将`td`结果元素向上移动到另一个模板，并且只在模板中输出`product`.

# objective-c - 以编程方式从 ARC 中的导航堆栈中删除 viewController

> ID：13701671
> 
> 赞同：0
> 
> 时间：2012-12-04T11:16:52.630
> 
> 标签：objective-c, ios, cocoa-touch, uinavigationcontroller, automatic-ref-counting

在推送第三个新 ViewController 之前，我想清除具有两个视图控制器的导航堆栈。我正在执行以下操作：

```
NSMutableArray *viewControllerArray=[[NSMutableArray alloc] initWithArray:self.navigationController.viewControllers];

for (int i = 0; i < [viewControllerArray count]; i++) {
      [viewControllerArray removeObjectAtIndex:i]; 
      //here the [viewControllerArray count] is 2,but loop is iterated only once.
}

self.navigationController.viewControllers=viewControllerArray;

NSLog(@"View Controller Array %@",[self.navigationController viewControllers])
//This will print null which I assume is correct. 
```

然后我按如下方式推送新的 ViewController：

```
 DetailViewController *detailView=[[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];

  [self.navigationController pushViewController:detailView animated:YES]; 
```

但是我的新视图没有被推送，而是显示导航堆栈中的最顶层视图。我觉得这很奇怪，因为，我已经删除了 ViewControllers 并在 NSLog 中打印它，它显示为 null。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:16:15.657

```
DetailViewController *detailView = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];    
NSMutableArray *viewControllerArray = [self.navigationController.viewControllers mutableCopy];
[viewControllerArray removeAllObjects];
[viewControllerArray addObject:detailView];
[self.navigationController setViewControllers:viewControllerArray animated:YES]; 
```

试试这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:24:31.880

尝试在推送第三个视图之前删除一个视图控制器，并从第三个视图控制器中删除第二个视图控制器。使用循环删除多个 viewController 有时可能会导致错误。

# java - 打印字符串的转义表示

> ID：13701672
> 
> 赞同：5
> 
> 时间：2012-12-04T11:17:00.493
> 
> 标签：java

如何打印字符串的转义表示，例如，如果我有：

```
s = "String:\tA" 
```

我希望输出：

```
String:\tA 
```

在屏幕上而不是

```
String:    A 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T11:20:51.800

我认为您正在寻找：

```
String xy = org.apache.commons.lang.StringEscapeUtils.escapeJava(yourString);
System.out.println(xy); 
```

来自[Apache Commons Lang v2.6](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringEscapeUtils.html#escapeJava(java.lang.String))

在 Apache Commons Lang v3.5+ 中弃用，使用[Apache Commons Text v1.2](https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringEscapeUtils.html#escapeJava-java.lang.String-)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T11:22:09.567

对于给定的字符串，您必须替换控制字符（如制表符）：

```
System.out.println("String:\tA\n".replace("\t", "\\t").replace("\n","\\n"); 
```

（以及其他人）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T11:24:11.390

严格来说，内部表示是一个无符号的 16 位整数。我认为您的意思是您想转义字符串。

Apache 库中有一个名为[StringEscapeUtils](https://commons.apache.org/proper/commons-lang/javadocs/api-release/org/apache/commons/lang3/StringEscapeUtils.html)的类来帮助解决这个问题。

```
String escaped = StringEscapeUtils.escapeJava("\t");
System.out.println(escaped); // prints \t 
```

# php - 为什么图像不使用 php 显示

> ID：13701679
> 
> 赞同：1
> 
> 时间：2012-12-04T11:17:33.933
> 
> 标签：php, apache2

我做了 php 代码来显示文件夹中可用的图像。当我运行代码时，图像无法显示，而图像保存位置将由浏览器获取。在此我已经提到了我的代码，任何人都可以帮助我犯了什么错误。谢谢。如果可以共享用于显示文件夹中可用图像的 php 代码？

```
 $files = glob("/home/aspire/Downloads/*");
 for ($i=0; $i<count($files); $i++)
 {
     $num = $files[$i];
     echo $num."<br>";
     echo '<img src="'.$num.'" alt="Here should be image" width="256" height="192" >'."                <br>"."<br>";
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:19:45.593

用作`glob`_

```
glob("/home/aspire/Downloads/"."*.jpg"); 
```

或者

```
glob("/home/aspire/Downloads/"."*.*"); 
```

**并确保路径正确**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:19:56.803

这个脚本在哪里？您应该在变量 $num 中`echo '<img src="'.$num.'"`添加图像文件的相对路径。

如果您的 PHP 脚本位于 /home/aspire 中，则显示代码将如下所示： `echo '<img src="Downloads/'.$num.'"`...`

# java - Google 应用引擎 / Restlet 组合中的 Eofexception

> ID：13701680
> 
> 赞同：1
> 
> 时间：2012-12-04T11:17:40.557
> 
> 标签：java, google-app-engine, restlet

我使用 GAE、服务器端持久性的对象化和 restlet 框架的组合创建了一个 RESTful Web 服务。

我设法让一切正常：放置新对象，获取，获取整个列表，......当我使用 GAE 插件在 Eclipse 中本地运行它时，我的应用程序运行良好。

但是，在将我的应用程序部署到 Google App Engine 服务器后，我在获取数据时遇到了 EOFException。这是我拥有的客户端代码：

（为安全起见省略服务器名）

```
ClientResource con = new ClientResource("http://" + servername + "/sidin/event/1003");
con.setRequestEntityBuffering(true); 
eventres = con.wrap(IEventResource.class);
ev = eventres.retrieve();
System.out.println("DONE getting event"); 
```

此代码在本地 GAE 实例上运行良好，但在将其部署到 Google 的服务器后，我收到以下错误：

```
Unable to convert a [application/json,UTF-8] representation into an object of class be.ehb.iwt.sidin.appengine.core.Event

java.io.EOFException: No content to map to Object due to end of input
at org.codehaus.jackson.map.ObjectMapper._initForReading(ObjectMapper.java:2775)
at org.codehaus.jackson.map.ObjectMapper._readMapAndClose(ObjectMapper.java:2718)
at org.codehaus.jackson.map.ObjectMapper.readValue(ObjectMapper.java:1909)
at org.restlet.ext.jackson.JacksonRepresentation.getObject(JacksonRepresentation.java:137)
at org.restlet.ext.jackson.JacksonConverter.toObject(JacksonConverter.java:218)
at org.restlet.service.ConverterService.toObject(ConverterService.java:167)
at org.restlet.resource.Resource.toObject(Resource.java:828)
at org.restlet.engine.resource.ClientInvocationHandler.invoke(ClientInvocationHandler.java:240)
at $Proxy7.retrieve(Unknown Source)
at Main.main(Main.java:59) 
```

任何帮助或想法表示赞赏！

# sockets - 使用 Quickly 在 python 中执行线程（套接字侦听）

> ID：13701683
> 
> 赞同：2
> 
> 时间：2012-12-04T11:17:42.500
> 
> 标签：sockets, python-2.7, python-multithreading, canonical-quickly

我正在制作一个使用 python 监听套接字的应用程序。我已经通过规范使用了 Quickly（它使用 glade 和 gi.repository 来制作 gui）。但是我无论如何都无法创建线程来监听功能。即使使用线程类和 threading.Thread 类，我也尝试了很多方法。我是 Quickly 和线程的新手。我在互联网上尝试了一切:-)但找不到任何解决方案。当我使用 thread.start() 时，它会等到 gui 关闭。当我使用 thread.run() 时，它会退出 gui 并立即运行使 gui 没有响应的函数。下面是我用于线程类的示例代码。如果需要，我可以上传整个文件，因为这是一个开源项目。请帮我。

```
def listen(self):
    print "working"
#listen to any incoming connections
    #self.control_sock_in.listen(1)
    i=0
    while True:
        print "it works"
    #conn,addr = self.control_sock_in.accept()
    #data = conn.recv
    #if there is any incoming connection then check for free slot and reply with that free slot
#if change of status message then update nodelist

def on_btn_create_n_clicked(self, widget):
    self.btn_quit_n.set_sensitive(True)
    self.btn_join_n.set_sensitive(False)
    self.btn_create_n.set_sensitive(False)
    subprocess.check_call(["sudo", "ifconfig", "wlan0", "192.168.0.5", "netmask", "255.255.255.0", "broadcast", "192.168.0.255"])
    self.control_sock_in = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    self.control_sock_in.bind(('192.168.0.5', 6000))
    self.status_lbl.set_text("Created the network successfully with IP of 192.168.0.5!")
    self.nodelist['192.168.0.5'] = ('6000','0')
#start thread on listen()  
    thread.start_new_thread(self.listen,(self,))
    self.btn_camera.set_sensitive(True)
    self.btn_mixer.set_sensitive(True)
    self.btn_display.set_sensitive(True) 
```

顺便说一句，无需为我提供注释项的缺失代码。我可以做到。我坚持的是线程问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:46:28.350

你可以像那样简单地做到这一点

```
from threading import Thread
listener_thread = Thread(target=self.listen)
listener_thread.start() 
```

当您的程序终止并且有一些非守护线程正在运行时，它将等待它们全部完成。

您可以将您的线程标记为[daemon](http://docs.python.org/2/library/threading.html#threading.Thread.daemon)，但您需要小心它们 - 请参阅[本文](http://joeshaw.org/2009/02/24/605/)了解更多详细信息。基本上，由于其他线程中正在发生或已经发生的清理，它们可能仍在运行并使用处于一致状态的数据。

创建守护线程：

```
from threading import Thread
listener_thread = Thread(target=self.listen)
listener_thread.daemon = True 
# or listener_thread.setDaemon(True) for old versions of python
listener_thread.start() 
```

最好的选择是让您的侦听器线程保持非守护程序（默认），并想办法在您的程序即将退出时以某种方式通知侦听器线程。因此，您的侦听器线程可以优雅地完成。

**更新**

不要使用`run`线程对象的方法 - 它只是调用**您在当前调用它的线程中指定的函数。**调用对象的`start`方法`Thread`会在单独的线程中触发您的活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T15:42:18.600

好吧，我在这里找到了解决方案。[来自 askubuntu](https://askubuntu.com/questions/179450/multi-threading-in-application-designed-in-quickly) 的链接 必须在开头添加这两行 `from gi.repository import GObject, Gtk GObject.threads_init()`。

无论如何，非常感谢 Michael Hall 在快速 IRC 频道中指出我的问题。

# delphi - 使用 GDI+ 淡化图像（即仅更改 TGPGraphic 的 Alpha 通道）

> ID：13701685
> 
> 赞同：1
> 
> 时间：2012-12-04T11:17:44.170
> 
> 标签：delphi, gdi+, delphi-xe2, gdi

我需要使用 GDI+ 淡化图像的右侧。我实际上是在尝试模拟您在 Google Chrome 中看到的右侧文本淡入淡出。这就是我想做的。

*   **从TBitmap**创建一个**TGPGraphics**对象。
***   从**TBitmap**的区域创建**TGPBitmap**。***   **将TGPGraphics**对象的背景和文本绘制到**TGPBitmap**。*   **更改TGPBitmap**对象右侧的 Alpha 设置以产生淡入淡出效果。*   **将TGPBitmap**绘制回**TGPGraphics**对象。****

 ***** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T14:18:02.080

如果你真的想为此使用 GDI+

```
unit Unit3;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls, jpeg;

type
  TForm3 = class(TForm)
    PaintBox1: TPaintBox;
    Image1: TImage;
    Shape1: TShape;
    Shape2: TShape;
    Shape3: TShape;
    Timer1: TTimer;
    procedure PaintBox1Paint(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure Timer1Timer(Sender: TObject);
  private
    { Private-Deklarationen }
  public
    { Public-Deklarationen }
  end;

var
  Form3: TForm3;

implementation

uses
  EXGDIPAPI,
  EXGDIPOBJ;

{$R *.dfm}

Procedure GPEasyTextout(Graphics: TGPGraphics; Const TheText: String; Rect: TGPRectF; Color: TGPColor; HAlign, VAlign: TStringAlignment; Size: Integer = 10;
  FontName: String = 'Arial');
var
  StringFormat: TGPStringFormat;
  FontFamily: TGPFontFamily;
  Font: TGPFont;
  Pen: TGPPen;
  Brush: TGPSolidBrush;
begin
  StringFormat := TGPStringFormat.Create;
  FontFamily := TGPFontFamily.Create(FontName);
  Font := TGPFont.Create(FontFamily, Size, FontStyleRegular, UnitPixel);
  Pen := TGPPen.Create(Color);
  Brush := TGPSolidBrush.Create(Color);
  StringFormat.SetAlignment(HAlign);
  StringFormat.SetLineAlignment(VAlign);
  Graphics.DrawString(TheText, -1, Font, Rect, StringFormat, Brush);
  Pen.Free;
  Brush.Free;
  StringFormat.Free;
  FontFamily.Free;
  Font.Free;
end;

Procedure PaintImageTransparent(DC: HDC; AGraphic: TGraphic;AlphaDec:Byte);

var
  Graphics, bmpgraphics: TGPGraphics;
  Width, Height, Row, Column: Integer;
  Color, colorTemp: TGPColor;
  bitmap, BitmapOut: TGPBitmap;
  Stream: TMemoryStream;
  Alpha:Integer;
begin
  Graphics := TGPGraphics.Create(DC);  // destination
  Stream := TMemoryStream.Create;      // Stremm to keep normal TGraphic
  AGraphic.SaveToStream(Stream);
  bitmap := TGPBitmap.Create(TStreamAdapter.Create(Stream));
  bmpgraphics := TGPGraphics.Create(bitmap); // Graphic for Bitmap
  GPEasyTextout(bmpgraphics, 'Some Text to display', MakeRect(10.0, 10, 300, 200), MakeColor(0, 0, 0), StringAlignmentCenter, StringAlignmentCenter, 20);
  bmpgraphics.Free;
  Width := bitmap.GetWidth;
  Height := bitmap.GetHeight;

  BitmapOut := TGPBitmap.Create(Width, Height); // Outputbitmap
  bmpgraphics := TGPGraphics.Create(BitmapOut); // Graphic for Bitmap
  bmpgraphics.DrawImage(bitmap, 0, 0, Width, Height);
  bmpgraphics.Free;

  for Row := 0 to Height - 1 do
  begin
    for Column := 0 to Width - 1 do
    begin
      BitmapOut.GetPixel(Column, Row, Color);
      Alpha := ((255 * (Width - Column)) div Width) + AlphaDec;
      if Alpha>255 then Alpha := 255;

      colorTemp := MakeColor(Alpha, GetRed(Color), GetGreen(Color), GetBlue(Color));
      BitmapOut.SetPixel(Column, Row, colorTemp);
    end;
  end;

  Graphics.DrawImage(BitmapOut, 0, 0, Width, Height);

  BitmapOut.Free;
  bitmap.Free;
  Graphics.Free;
  Stream.Free;
end;

procedure TForm3.FormCreate(Sender: TObject);
begin
   ReportMemoryLeaksOnShutDown := True;
end;

procedure TForm3.PaintBox1Paint(Sender: TObject);
begin
  PaintImageTransparent(TPaintBox(Sender).Canvas.Handle, Image1.picture.Graphic,Timer1.Tag);
end;

procedure TForm3.Timer1Timer(Sender: TObject);
begin
  Timer1.Tag := Timer1.Tag + 10;
  if Timer1.Tag>255 then
    begin
     Timer1.Tag := 255;
     Timer1.Enabled := false;
    end
  else PaintBox1.Invalidate;

end;

end. 
```

完整的源代码在这里[http://www.bummisoft.de/download/transparentverlauf.zip](http://www.bummisoft.de/download/transparentverlauf.zip) ![演示](../Images/a1f1981f27bae0a78363fc0e91157c34.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T15:18:13.417

可以通过这种方式完成另一种没有 GDI+ 的方法。- 创建和准备透明度位图 - 在其上绘制 - 设置透明度渐变 - 绘制它

```
unit Unit3;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls, jpeg;

type
  TForm3 = class(TForm)
    Image1: TImage;
    PaintBox1: TPaintBox;
    Timer1: TTimer;
    procedure PaintBox1Paint(Sender: TObject);
    procedure FormCreate(Sender: TObject);
    procedure Timer1Timer(Sender: TObject);
  private

    { Private-Deklarationen }
  public
    { Public-Deklarationen }
  end;

var
  Form3: TForm3;

implementation

{$R *.dfm}
procedure TForm3.FormCreate(Sender: TObject);
begin
  DoubleBuffered := true;
end;

type
  pRGBQuadArray = ^TRGBQuadArray;
  TRGBQuadArray = ARRAY [0 .. $EFFFFFF] OF TRGBQuad;

Procedure SetAlpha(bmp: TBitMap; Alpha: Byte);
var
  pscanLine32: pRGBQuadArray;
  i, j: Integer;
  lAlpha:Integer;
begin

  for i := 0 to bmp.Height - 1 do
  begin
    pscanLine32 := bmp.Scanline[i];
    for j := 0 to bmp.Width - 1 do
      begin
        lAlpha := Round(255 * (bmp.width- j) / bmp.width )+ Alpha;
        if lAlpha>255 then lAlpha := 255;
        pscanLine32[j].rgbReserved := lAlpha;
        pscanLine32[j].rgbBlue := Round(pscanLine32[j].rgbBlue * lAlpha / 255);
        pscanLine32[j].rgbRed :=  Round(pscanLine32[j].rgbRed * lAlpha / 255);
        pscanLine32[j].rgbGreen :=  Round(pscanLine32[j].rgbGreen * lAlpha / 255);
      end;
  end;

end;

Procedure InitAlpha(bmp: TBitMap);
var
  pscanLine32: pRGBQuadArray;
  i, j: Integer;
  lAlpha:Integer;
begin
 bmp.PixelFormat := pf32Bit;
 bmp.HandleType := bmDIB;
 bmp.ignorepalette := true;
 bmp.alphaformat := afDefined;
  for i := 0 to bmp.Height - 1 do
  begin
    pscanLine32 := bmp.Scanline[i];
    for j := 0 to bmp.Width - 1 do
      begin
        pscanLine32[j].rgbReserved := 255;
        pscanLine32[j].rgbBlue := 0;
        pscanLine32[j].rgbRed := 0;
        pscanLine32[j].rgbGreen := 0;
      end;
  end;

end;

procedure TForm3.PaintBox1Paint(Sender: TObject);
var
 bmp:TBitmap;
begin
    bmp:=TBitmap.Create;
    try

      bmp.Width := Image1.Picture.Graphic.Width;
      bmp.Height := Image1.Picture.Graphic.Height;
      InitAlpha(bmp);
      bmp.Canvas.Draw(0,0,Image1.Picture.Graphic);
      bmp.Canvas.Brush.Style := bsClear;
      bmp.Canvas.Font.Size := 20;
      bmp.Canvas.TextOut(10,10,'Some tex to display');
      SetAlpha(bmp,Timer1.tag);
      TPaintBox(Sender).Canvas.Draw(0,0,bmp);
    finally
      bmp.Free;
    end;
end;

procedure TForm3.Timer1Timer(Sender: TObject);
begin
  Timer1.Tag :=  Timer1.Tag + 10;
  if Timer1.Tag>255 then
    begin
       Timer1.Tag:=255;
       Timer1.Enabled := False;
    end
   else Paintbox1.Invalidate;
end;

end. 
```

![演示](../Images/4bd9b82d94a8f92c59792ae1c118c240.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:09:01.007

您不需要转换这些 - 至少如果您使用 Delphi2010+.... TBitmap（分别为 TGraphic）已经有一种方法可以使用不透明度参数在画布上绘制位图 - 只需查看 Delphi 帮助中的 DrawTransparent 方法.

如果这还不够，请查看 windows gdi api 中的 AlphaBlend 函数。

为了使整个过程顺利进行，我认为您应该：

*   创建带背景的位图
*   使用文本创建位图
*   在计时器过程（可能触发淡入淡出无效）中设置不透明度值并仅为该特定区域触发无效（invalidateRect）
*   在绘画过程中创建第三个位图-> 绘制背景，然后使用 alpha 值在其上设置文本（或任何位图）。
*   在画布上绘制生成的位图。

如果您仍然遇到一些闪烁，那么最终启用双缓冲和/或自己处理 WM_ERASEBKNG 消息。****

# objective-c - 无法重现 App Store 审核期间发生的崩溃 [语言环境问题]

> ID：13701686
> 
> 赞同：0
> 
> 时间：2012-12-04T11:17:50.743
> 
> 标签：objective-c, ios, local

在我的更新被拒绝后，我刚刚收到了来自 Apple 的崩溃日志。

查看崩溃日志后，我发现了与解析日期有关的违规代码。

当我在我的设备上运行此应用程序时，我没有收到此错误。我感觉这是 Apple 正在测试的设备的本地问题。

在我运行期间，`original`下面的字符串解析为`2012-12-04T11:02:29.5600000+0000`. 我只是想知道如果在不同的语言环境中它会出现什么其他方式。

**更重要的是，如何在与 Apple 相同的环境中测试我的应用程序，这样我就不需要等待审核过程来测试**

注意：我继承了此代码，因此非常感谢任何有关改进日期解析功能的建议，谢谢。

崩溃来自`[original substringToIndex:range.location+3]`以下函数中的调用。

```
+(NSString*)convertDate:(NSDate*)date withFormatter:(NSDateFormatter*)dateFormatter{

    NSString *original = [dateFormatter stringFromDate:date];

    NSRange range = [original rangeOfString:@"+"];
    NSString *substring = [original substringToIndex:range.location+3];
    NSString *substring2 = [original substringFromIndex:range.location+3];

    return [NSString stringWithFormat:@"%@%@%@",substring,@":",substring2];
} 
```

在以下上下文中调用此函数

```
NSDate *timestamp = [NSDate date];
NSString *dateString = [DateHelper convertDate:timestamp withFormatter:UTCDateFormatter]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:46:28.830

说 +3 完全有可能导致出现超出范围的异常。您是否测试过使用 [NSDate date] 将在其他时区返回相同的格式？

无论哪种方式，您都应该至少检查两件事 - 然后解析多个日期类型的方法以确认应用程序仍然可以运行：

1.  下一行的范围有一个位置：

    ```
    NSRange range = [original rangeOfString:@"+"];
    if (range.location != NSNotFound)
    {
        //do stuff here
    } 
    ```

2.  您输入的 range.location + 3 不超过总字符串长度

    ```
    NSRange range = [original rangeOfString:@"+"];
    if (range.location != NSNotFound)
    {
       if ((range.location + 3) <= original.length)
       {
           //you should also check that ((range.location + 3) + range.length) <= original.length as well
           //do stuff here
       }
    } 
    ```

虽然上面并没有真正解决可能显示不正确日期/时间戳的问题 - 它应该防止应用程序尝试寻找超出字符串长度范围的范围或索引

希望这可以帮助，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:49:43.390

NSDateFormatter 将使用您的设备日期格式和时区格式化您的日期。

```
// Convert the date to current time zone    
    NSDate* sourceDate = [NSDate date];

    NSTimeZone* sourceTimeZone = [NSTimeZone timeZoneWithAbbreviation:@"GMT"];
    NSTimeZone* destinationTimeZone = [NSTimeZone systemTimeZone];

    NSInteger sourceGMTOffset = [sourceTimeZone secondsFromGMTForDate:sourceDate];
    NSInteger destinationGMTOffset = [destinationTimeZone secondsFromGMTForDate:sourceDate];
    NSTimeInterval interval = sourceGMTOffset - destinationGMTOffset;

    NSDate *destinationDateHere1 = [[NSDate alloc] initWithTimeInterval:interval sinceDate:yourDate]; 
```

# c# - HTML 表格在邮件中不起作用

> ID：13701694
> 
> 赞同：2
> 
> 时间：2012-12-04T11:18:21.480
> 
> 标签：c#, asp.net

我正在创建一个运行时 HTML 表并通过邮件发送。该表被添加到邮件正文中。但是当邮件被触发时，它会显示**System.Web.UI.HtmlControls.HtmlTable**而不是表格的内容。

// .csPage:

```
HtmlTable tbl = new HtmlTable();
        tbl.Border = 1;
        tbl.CellSpacing = 0;
        HtmlTableRow trHeader = new HtmlTableRow();
        HtmlTableCell tcHeader = new HtmlTableCell();
        tcHeader.InnerText = "Mobile Number";
        HtmlTableCell tc1Header = new HtmlTableCell();
        tc1Header.InnerText = "Carrier";
        trHeader.Cells.Add(tcHeader);
        trHeader.Cells.Add(tc1Header);
        tbl.Rows.Add(trHeader);
 for (int i = 0; i < dvNumbers.Rows.Count; i++)
            {
                HtmlTableRow tr = new HtmlTableRow();
                HtmlTableCell tc = new HtmlTableCell();
                tc.InnerText = dvNumbers.Rows[i].Cells[0].Text;
                tr.Cells.Add(tc);
                HtmlTableCell tc1 = new HtmlTableCell();
                tc1.InnerText = dvNumbers.Rows[i].Cells[1].Text;
                tr.Cells.Add(tc1);
                tbl.Rows.Add(tr);

            }

            objMail.MobileDeactivationMail(txtMailTo.Text, txtMailCC.Text, txtMailBCC.Text, tbl); 
```

// 邮件代码：

```
public bool MobileDeactivationMail(string strReceiverMailId, string CC, string BCC, HtmlTable tbl)
    {
        bool blnIsMailSent = false;
        MailMessage objMailMsg;
        try
        {
            objMailMsg = new MailMessage();
            MailAddress FromAdd = new MailAddress("x@x.com");
            objMailMsg.From = FromAdd;
            objMailMsg.To.Add(new MailAddress(strReceiverMailId));
            if (CC != "")
                objMailMsg.CC.Add(new MailAddress(CC));
            if (BCC != "")
                objMailMsg.Bcc.Add(new MailAddress(BCC));
            objMailMsg.Subject = "Deactivation of Mobile Numbers";
            objMailMsg.Priority = MailPriority.High;
            objMailMsg.IsBodyHtml = true;
            objMailMsg.Body = "<table style='font-family:Tahoma; font-size:small';><tr><td> Dear Sir/Mam</td<</tr>," + "<tr><td></td></tr><tr><td></td><td><td><td>         Kindly Deactivate the following mobile numbers.</br></br>" + tbl + " </td></td></td></tr></table><table style='font-family:Tahoma; font-size:small';><tr><td>Regards,</td></tr><tr><td>HR</td></tr></table>";
            SmtpClient SmtpMail = new SmtpClient();
            SmtpMail.Port = 25;
            SmtpMail.Host = "xxxxx";
            System.Net.NetworkCredential SMTPUserInfo = new System.Net.NetworkCredential("xxxxxxx", "xxxxx");
            SmtpMail.UseDefaultCredentials = false;
            SmtpMail.Credentials = SMTPUserInfo;
            SmtpMail.Send(objMailMsg);
            objMailMsg.Dispose();
            blnIsMailSent = true;
        }
        catch (Exception Ex)
        {
            blnIsMailSent = false;
        }

        return blnIsMailSent;
    } 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:35:31.597

您的问题出在这一行：

```
objMailMsg.Body = "<table style='font-family:Tahoma; font-size:small';>
   <tr><td> Dear Sir/Mam</td<</tr>," + "<tr><td></td></tr>
   <tr><td></td><td><td><td>Kindly Deactivate the following mobile numbers.</br></br>" + tbl + " </td></td></td></tr></table>
   <table style='font-family:Tahoma; font-size:small';><tr><td>Regards,</td></tr><tr><td>HR</td>  </tr></table>"; 
```

具体来说：

```
" + tbl + " 
```

当您将对象连接到字符串中时，它将调用`tbl.ToString()`

默认情况下，这将返回类名 - 而不是您想要的表格的 HTML。

解决这个问题的方法，使用 HTML 表格，直接写出 HTML。不幸的是，尽管存在 InnerText 和 InnerHTML，但此控件（[MSDN HTMLTable Properties](http://msdn.microsoft.com/en-us/library/system.web.ui.htmlcontrols.htmltable_properties%28v=vs.100%29.aspx)）不支持，因此您必须使用 RenderControl（[MSDN RenderControl 文档](http://msdn.microsoft.com/en-us/library/htwek607%28v=vs.100%29.aspx)）方法：

```
 StringWriter writer = new StringWriter(); 
        Html32TextWriter htmlWriter = new Html32TextWriter(writer); 
        tbl.RenderControl(htmlWriter); 
        string html = writer.ToString(); 
```

然后，您可以连接此 HTML 字符串而不是`tbl`.

# javascript - 来自输入名称语法错误的变量

> ID：13701695
> 
> 赞同：0
> 
> 时间：2012-12-04T11:18:24.880
> 
> 标签：javascript, jquery

我正在尝试使用以下代码通过输入字段的名称来定位变量并更新链接，如果我使用它`sample_variable = ();`而不是，它会起作用，`b = (value);`所以我认为这是一个非常明显的语法问题。

```
<input id="my_input" type="text" name="sample_variable1">

sample_variable1 = "http://www.stackoverflow.com";
sample_variable2 = "http://www.google.com";
sample_variable3 = "http://www.yahoo.com";

            $('#set3').find('input').focus(function(){
            var a = $(this).attr("id");
            var b = $(this).attr("name");

            $('#'+a).live('change',(function(){
                            var value = $(this).val();
                            b = (value);

                            })
                            );
            }); 
```

我正在尝试将变量的值（html 链接）更新为在文本输入中输入的值，但使用相应的输入名称选择要更新的正确变量。我正在这样做，所以我不必为每个 var 写出相同的代码块。

谢谢，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:30:45.203

如果您尝试`sample_variable`根据您选择的名称字段的值来设置 的值，这并不容易。eval 有一些技巧，但仍然不是一个好主意。使用对象的属性会更好：

```
var properties = {};
....
properties[b] = $(this).val(); 
```

# google-drive-api - PHP脚本未创建新文件或文件夹

> ID：13701697
> 
> 赞同：1
> 
> 时间：2012-12-04T11:18:26.087
> 
> 标签：google-drive-api, google-api-php-client

我正在使用 PHP 测试 Google Drive API，但没有设法通过命令行在我的驱动器上获取我的文档文件。我还尝试使用提供的 PHP 脚本创建一个文件夹。

我的 PHP 脚本运行并请求我从它请求我访问的 url 获得的身份验证代码。在按下回车键时，它看起来像是工作了一段时间，然后它没有错误地终止。当我转到“我的 Google 云端硬盘”时，我看不到任何新文件或文件夹

（使用 OSX MAMP 和 PHP）

谢谢

使用的 PHP 代码

```
<?php
    require_once 'google-api-php-client/src/Google_Client.php';
    require_once 'google-api-php-client/src/contrib/Google_DriveService.php';

    $client = new Google_Client();
    // Get your credentials from the APIs Console
    $client->setClientId('clien_id');
    $client->setClientSecret('Secret');
    $client->setRedirectUri('urn:ietf:wg:oauth:2.0:oob');
    $client->setScopes(array('https://www.googleapis.com/auth/drive'));

    $service = new Google_DriveService($client);

    $authUrl = $client->createAuthUrl();

    //Request authorization
    print "Please visit:\n$authUrl\n\n";
    print "Please enter the auth code:\n";
    $authCode = trim(fgets(STDIN));

    // Exchange authorization code for access token
    $accessToken = $client->authenticate($authCode);
    $client->setAccessToken($accessToken);

    //Insert a file
    $file = new Google_DriveFile();
    $file->setTitle('My document');
    $file->setDescription('A test document');
    $file->setMimeType('text/plain');

    $data = file_get_contents('document.txt');

    $createdFile = $service->files->insert($file, array(
      'data' => $data,
      'mimeType' => 'text/plain',
    ));

    print_r($createdFile);
    ?> 
```

# mysql - 亚马逊托管的项目中的mysql准备语句错误

> ID：13701698
> 
> 赞同：0
> 
> 时间：2012-12-04T11:18:29.200
> 
> 标签：mysql, database-administration

我所有的应用程序`amazon rws`都在抛出下面的错误。

我正在`zend framework`为我的项目使用，并且仅在应用程序使用一段时间后才会出现错误。

我试图刷新存储的缓存，它工作正常。
所以我认为问题出在我需要做的mysql中的一些配置上，所以任何人都可以建议可能是什么确切的问题以及我需要做什么？

错误信息：
`Mysqli statement execute error : Prepared statement needs to be re-prepared Notice: Undefined variable: country_list`

# javascript - jQuery timeago 插件在 Safari 中不起作用

> ID：13701703
> 
> 赞同：2
> 
> 时间：2012-12-04T11:18:40.637
> 
> 标签：javascript, jquery, safari, timeago

我正在使用 jQuery timeago 插件，它可以在 Chrome 和 Firefox 中运行，但不能在 Safari 中运行。正如网站上给出的那样，用法非常简单。

```
 $(document).ready(function() {
      jQuery("abbr.timeago").timeago();
    }); 
```

> `<abbr class="timeago" title="{{ISO8601_TIME timeStamp}}">{{COMMENT_DATE_TIME timeStamp}}</abbr>`

标签中的标题和日期`<abbr>`是 iso 时间戳。它在 Chrome 和 Firefox 中按预期工作，但只是在 Safari 中打印出时间戳（例如 2012-11-28 19:16:49）。

任何人都可以帮我解决问题所在吗？

**在 Chrome 中 **编辑：**![在此处输入图像描述](../Images/e9a17103b54f70ecf9b630d44fdc6fa2.png)**

 **在 Safari 中： ![在此处输入图像描述](../Images/9b8684610d5b4a3513b35f9595d3b830.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T07:46:14.630

for utc string created from: newDate.toUTCString():

in Google Chrome browser, calling jQuery.timeago('Fri, 31 May 2013 10:37:16 GMT') produce output 'NaN years ago'. However, it is working fine in Firefox browse.

The best is to use newDate.toISOString() and it works in both browser.**

# eclipse - Eclipse 中的资源泄漏问题？

> ID：13701704
> 
> 赞同：6
> 
> 时间：2012-12-04T11:18:41.197
> 
> 标签：eclipse, java-7, resource-leak

我做了一些测试（使用 Windows 7、Eclipse Juno 4.2.1 和 Java 7 SE），发现如果方法没有在 catch-block 中显式返回，并且如果在 try/catch 之外声明了对象，则没有“资源泄漏”警告信号。

不产生“资源泄漏”：

```
 public void extISImReturnNoWarning() {
    InputStream is = null;
    try {
        is = new FileInputStream("A");
        is.available();
    } catch (IOException e) {
    }
} 
```

代码中的小改动会产生“资源泄漏”：

```
public void locISImReturnHasWarning() {
    try {
        InputStream is = new FileInputStream("A");
        is.available();
    } catch (IOException e) {
    }
}

public void extISExReturnHasWarning() {
    InputStream is = null;
    try {
        is = new FileInputStream("A");
        is.available();
    } catch (IOException e) {
        return;
    }
} 
```

所有方法在功能上似乎都是相同的——那么解释是什么？如果这是一个错误，这是 Eclipse 还是 Java 问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T20:29:37.563

经过一番研究，我得出结论，这是一个 Eclipse 错误。我已经在 Eclipse 下载站点 (Kepler M3) 上找到的最新版本中对其进行了测试，但问题仍然存在。我还发现了 5-6 个关于过去 30 天在 Eclipse 项目中报告的类似问题的错误报告。在研究过程中，我还发现了另一种奇特的行为：

```
 public void makeConnection() throws SQLException {
    Connection connection = null;
    try {
        connection = DriverManager.getConnection("localhost");
        for (int i = 0; i < 1; i++)
            if (i < 1)
                throw new SQLException("Foo");
        connection.commit();
    } finally {
        close(connection);
    }
}

public void close(Connection c) {
} 
```

此代码将生成资源泄漏警告。但是，通过删除其中之一

*   关闭（连接）的调用
*   for循环

..资源泄漏警告将消失。奇怪的是 - 在普通情况下不会报告资源泄漏，您只需创建一个连接而不关闭它。

总而言之，我认为 Eclipse Juno 中的资源泄漏检测暂时可能有点容易出错。也许现在最好忽略 Eclipse 中的资源泄漏，等待 Kepler。

**2014 年 12 月更新**：当前正在运行 Eclipse Luna，问题仍然存在......

# jquery - 使 $(window).scroll() 上的 animate() 平滑

> ID：13701708
> 
> 赞同：3
> 
> 时间：2012-12-04T11:19:09.137
> 
> 标签：jquery, scroll, jquery-animate

我正在尝试创建一个徽标图像，该图像在窗口滚动时动画为 50% 大小。我的问题是动画在窗口滚动时运行了几次。如何在窗口滚动> 62px 时让它动画一次，如果窗口滚动回 62px 以上再一次？我尝试添加类并删除它们，但没有运气。我搜索了 SO，但找不到重复或类似的问题（如果有的话，我的错！）。

JSFiddle在这里：http: [//jsfiddle.net/jtheman/kEtPd/](http://jsfiddle.net/jtheman/kEtPd/)（在jsfiddle中添加了一些额外的css来模拟我的真实项目）

相关HTML：

```
 <body>
   <header>
      <div id="logo">
           <img src="/img/logo.png">
       </div>
 ... 
```

CSS：

```
header { position:relative;   }
header #logo { position:absolute; top: 62px; left: 0; width: 365px; height: 53px; }
header #logo img { position:absolute; bottom: 0; left: 0; width: 365px; height: 53px; } 
```

还有我的 jQuery：

```
$(window).scroll( function() {
    var scrollpos = $(window).scrollTop();
    if (scrollpos > 62)
    {
        $('#logo img').stop().animate({ 'width': '182px', 'height': '26px'},1000);
    }
    else 
    {
        $('#logo img').stop().animate({ 'width': '365px', 'height': '53px'},200);
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:22:31.363

您应该检查宽度是否仍然是原始大小 ( `365px`)，以便它仅在图像尚未开始调整大小时才动画：

```
if (scrollpos > 62)
{
   if ($('#logo img').width() == 365){
     $('header').css({'position':'fixed','top':'-62px'});
     $('#logo img').stop().animate({ 'width': '182px', 'height': '26px'},1000);
   }
} 
```

[**-- 查看工作演示 --**](http://jsfiddle.net/kEtPd/2/)

# c# - Windows 服务在本地系统下运行时出错，Interop.SHDocVw.dll ieframe.dll 抛出 res://ieframe.dll/dnserror.htm#

> ID：13701709
> 
> 赞同：0
> 
> 时间：2012-12-04T11:19:11.040
> 
> 标签：c#, .net, windows-services

我正在从使用 Microsoft.mshtml 和 Microsoft Internet Controls 的网站上进行一些屏幕报废

在 Windows 窗体应用程序中运行良好，但在 Windows 服务中捆绑我的应用程序后，我收到以下错误 res://ieframe.dll/dnserror.htm#

wb.Navigate(ConfigurationManager.AppSettings.Get("LoginUrl"), ref o, ref o, ref o, ref o);

如果在用户帐户下运行，相同的 Windows 服务运行良好

但是在本地系统帐户下运行时会引发上述错误

# javascript - 是否可以仅使用 javascript 修改文档库中的 .js/.json 文件？

> ID：13701713
> 
> 赞同：0
> 
> 时间：2012-12-04T11:19:21.270
> 
> 标签：javascript, json, sharepoint-2007, sharepointdocumentlibrary

我们在文档库中有一个 html 文件，其中包含一个包含有用信息的大型 html 表。（此文件是从不同的应用程序手动导出的）如果它是 json 格式，信息将更加有用/可访问。（加载速度更快且更易于访问）用例将是：

*   用户将更新的文件 html 文件上传到文档库
*   用户转到共享点站点上的维基页面并单击一个大按钮“更新 JSON”
*   javascript 执行以下操作
    *   读取 html 文件的内容
    *   生成有效的 json
    *   将此 json 保存到文档库中的现有 .json 文件中，覆盖当前内容

有任何想法吗 ？？

谢谢/科尔姆

PS一切都必须是客户端，javascript是唯一的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T10:42:44.780

我遇到了一些类似任务的链接，希望它能在一定程度上帮助你。

[http://dannyjessee.com/blog/index.php/2013/02/using-jsom-to-write-small-files-to-a-sharepoint-2013-document-library/](http://dannyjessee.com/blog/index.php/2013/02/using-jsom-to-write-small-files-to-a-sharepoint-2013-document-library/)

# android - ant 调试问题android app

> ID：13701715
> 
> 赞同：2
> 
> 时间：2012-12-04T11:19:22.720
> 
> 标签：android, eclipse, ant

我是 android 开发的新手，所以我尝试了 android.com 上的第一个教程。我想为我的 HTC 英雄编写的应用程序有 android 2.1 eclair。所以我做了一个新项目：

```
minimum sdk 2.0 eclair (API 5) <br>
target sdk 2.1 eclair  (API 7) <br>
compile sdk 2.1        (API 7) 
```

我使用命令 android 来制作 build.xml：

```
android update project --name MyFirstApp -- target 1 --path workspace\MyFirstApp 
```

然后我转到项目的根文件夹并运行 ant debug。结果：

-构建设置：

```
Project target: Android 1.5                   (que? I clearly configured 2.1, didn't I?) <br>
API level: 3
WARNING: Attribute minSdkVersion in AndroidManifest.xml(5) is higher than the project target API level(3) <br>

This warning would make sense if my target  API was indeed API 3\. This is definitly not the case since I clearly configured API 5 in eclipse. <br>
Ant continues and at the end, these errors kill it:

[aapt] C:\...\workspace\MyFirstApp\bin\AndroidManifest.xml:7: error: No resource found for attribute 'targetSdkVersion' in package 'android' <br>
[aapt] C:\...\workspace\MyFirstApp\bin\AndroidManifest.xml:7: error: No resource found for attribute 'allowBackup' in package 'android'

BUILD FAILED <br>
C:Program Files\eclipse\Android SDK\tools\ant\build.xml:645: The following error occurred while executing this line: <br>
C:Program Files\eclipse\Android SDK\tools\ant\build.xml:683: null returned: 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T16:44:59.137

已解决：我需要更仔细地选择目标。它针对特定安装的 android 版本。键入 android 列表目标以获取更多信息

# wpf - 在 WPF 中使用 FindName() 找不到动态生成的控件

> ID：13701719
> 
> 赞同：2
> 
> 时间：2012-12-04T11:19:28.667
> 
> 标签：wpf, label, dynamically-generated, findname

我需要动态生成尽可能多的标签，并在需要时访问其中的每一个。但是 FindName() 没有工作......

这是我所做的一个简单示例

我有一个自定义编写的类，从`Label`类继承，称为 myLabel。我在我的 WPF 项目上放了一个按钮。通过单击它，将动态创建 myLabel 类的实例并将其添加到网格（myGrid）中，如下所示：

```
myLabel LBL = new myLabel();
LBL.Height = 30;
LBL.Name = "MyLabel1";
LBL.Content = "I am a label.";
myGrid.Children.Add(LBL); 
```

还有一个名为“更改颜色”的按钮，它应该找到之前创建的标签并更改它的前景色。这是该按钮的单击事件中的代码：

```
Label Thelabel = (Label)myGrid.FindName("MyLabel1");
Thelabel.Foreground = Brushes.Azure; 
```

问题是它`FindName()`永远找不到任何东西并且总是 null ！我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:33:09.473

名称范围可能存在导致“FindName”返回 null 的问题。

可以在这篇文章中找到从父/祖先开始查找特定命名元素的不同方法的说明：[如何按名称或类型查找 WPF 控件？](https://stackoverflow.com/questions/636383/wpf-ways-to-find-controls)

试一试，看看它是否适合你。

# cakephp - cakephp2：如何为蛋糕异常设置布局

> ID：13701720
> 
> 赞同：0
> 
> 时间：2012-12-04T11:19:34.513
> 
> 标签：cakephp, layout, plugins

我遇到了一个非常复杂的情况来呈现错误页面 1）蛋糕异常 NotFoundException 是从插件中抛出的；2）我想从应用程序而不是从这个插件呈现布局；

我试图设置 $this->layout='default'; 在插件控制器 beforeFilter 方法中，但仍然呈现插件布局而不是应用程序布局。

我查看了 CakeErrorController 但没有找到布局的设置位置。

知道如何管理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T13:05:55.010

我不确定这是否对你有用，但这就是我所做的。我（在我的 AppController 中）在`__construct()`函数中设置它：

```
 function __construct() {

        parent::__construct();

        if ($this->name == 'CakeError') { 
            $this->layout = 'default';
            $this->constructClasses();

            $this->beforeFilter();

            $this->beforeRender();
        }   
    } 
```

同样，您的方法可能会有所不同，但这是我的实现。

此外，您可以在定义的错误处理程序中使用 AppError.php 文件对其进行设置。请注意，我的方法是针对 Cake 1.3，所以我不确定 Cake2 中的 AppError 文件有多么不同。

```
<?php
class AppError extends ErrorHandler {

function error403($params) {
    extract($params, EXTR_OVERWRITE);

    if (!isset($url)) {
        $url = $this->controller->here;
    }

    $this->controller->helpers = array_merge( $this->controller->helpers, array( 'Asset.Asset', 'Auth' ) );

    $url = Router::normalize($url);

    $this->controller->set(array(
        'code' => '403',
        'name' => __('Permission Denied', true),
        'message' => $message,
        'base' => $this->controller->base
    ));

    $this->_outputMessage('error403');

    }   
} 
```

# c++ - 将 Win 代码移植到 Linux 时出错

> ID：13701723
> 
> 赞同：0
> 
> 时间：2012-12-04T11:19:49.397
> 
> 标签：c++, linux, porting

> **可能重复：**
> [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)
> [声明一个 C++ 集合迭代器](https://stackoverflow.com/questions/11304492/declaring-a-c-set-iterator)

我正在尝试在 Linux 系统中编译 C++ 一些代码，这些代码在 Windows 中运行良好。

我有很多错误，如下所示：

```
code:
..
39          set<Node<T>*>::iterator child;
... 
```

`g++`给我错误：

```
Node.h:39: error: expected ‘;’ before ‘child’ 
```

这只是一个例子。你能给我一些关于如何解决它的提示吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T11:23:36.273

你必须写

```
typename set<Node<T>*>::iterator child; 
```

实际上，编译器不知道这是*模板*类中定义`iterator`的名称。你必须明确地告诉它。`type`*`set`*

 *Visual Studio 允许这是隐式的。`gcc`才不是。*

# scala - Scala：对字段的约束并不总是得到尊重

> ID：13701724
> 
> 赞同：1
> 
> 时间：2012-12-04T11:19:52.003
> 
> 标签：scala, constraints, field

给我一些帮助，我就是无法解决这个问题。如何确保始终遵守对 getter 方法的约束？我的课程有这种形式：

```
abstract class Element {
  var name: String
  var description: String
}

class Component (var name: String, var description: String) extends Element 
```

出于我项目的目的，我需要使用 var。`name`我想对必须始终尊重的领域施加限制。当我创建`Component`如下实例时：

```
val C1 = new Component ("C1 Component", "Description of C1") 
```

当我更改值时：

```
C1.name = "new value" 
```

如果我以这种方式创建类：

```
abstract class Element {
  protected var _name : String
  // Getter
  final def name = _name
  // Setter
  final def name_= (value:String):Unit =
    if (value.size < 5) println ("ERROR: Bad Value")
    else _name = value

  var description: String
}

class Component (protected var _name : String, var description: String) extends Element 
```

在 main 方法中，因为我这里没有控制权：

```
val C1 = new Component ("C1", "Description of C1") 
```

但只有稍后，当我更改值时：

```
C1.name = "comp" 
```

我希望我的吸气剂永远受到尊重。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:33:49.783

```
class Component (_name : String, var description: String) extends Element {
  this.name = _name
} 
```

另外，`var _name`设为私有，因此子类在不使用 setter 的情况下无法设置它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:48:14.660

在 Scala 中，整个类体构成了主要的构造函数。因此，您可以将 setter 称为构造函数的第一部分。然而，在我看来，语法相当混乱。你可以这样做：

```
abstract class Element {
 var name: String
 var description: String
}

class Component (private var _name :String, var description : String) extends Element {
  name = _name
  def name = _name
  def name_=(value: String) = {
    require(value.size > 5, "Bad value")
    _name = value
  }
} 
```

**然而**。`vars`以你使用它们的方式可能是……不明智的。使用不可变类并处理此类的副本要好得多。因此，任何时候您需要修改该名称字段...只需创建一个新的 Component 对象，该对象与旧的相同，但名称不同。有很多方法可以实现这一点（搜索 Lenses），但一种简单的方法是`copy`使用`case classes`. 这是一个例子：

我们将 Component 类更改为 case 类：

```
case class Component (private var _name :String, var description : String) extends Element {
  name = _name
  def name = _name
  def name_=(value: String) = {
    require(value.size > 5, "Bad value")
    _name = value
  }
} 
```

我们的用法是这样的：

```
val C1 = new Component ("Some component name", "Description of C1") 
//Component(Some component name, Description of C1)

val C2 = C1.copy(_name = "Another component name") 
// Component(Another component name ,Description of C1) 
```

# javascript - 如何创建只触发一次的淘汰赛可观察订阅？

> ID：13701728
> 
> 赞同：6
> 
> 时间：2012-12-04T11:20:06.390
> 
> 标签：javascript, knockout.js

在我的模型中，我有一个异步加载的属性。我希望它在加载后生成另一个模型属性。

我正在考虑在第一个属性更改后可能触发的订阅，生成第二个属性然后被处置 - 我不知道如何从内部处置订阅。

有没有办法在可观察的属性更改后触发一次事件？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-10-08T08:43:22.157

要从内部处理订阅，只需创建对它的引用：

```
var subscription = yourObservable.subscribe(function (newValue) {
    ...
    subsription.dispose();
}); 
```

如果您不想每次都编写此代码，可以使用新方法扩展 observable：

```
ko.subscribable.fn.subscribeOnce = function (handler, owner, eventName) {
    var subscription = this.subscribe(function (newValue) {
        subscription.dispose();
        handler(newValue);
    }, owner, eventName);
    return subscription;
};

...

// usage
var subscription = yourObservable.subsribeOnce(yourHandler); 
```

并且不要忘记在组件处置时处置订阅，以防它未被解雇。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:26:37.017

您可以编写一个扩展器来抑制除第一次触发之外的所有内容：

```
ko.extenders.fireOnce= function(target) {
    var fired=false;
    var result = ko.computed({
        read: target,
        write: function(newValue) {
            var current = target();
            if (newValue!== current && !fired) {
                fired=true;
                target(newValue);
            }
        }
    });
    result(target());
    return result;
}; 
```

然后按如下方式使用它：

```
var myObservable = ko.Observable(blah).extend({fireOnce:null}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-20T09:11:04.650

我们最终得到了这样的解决方案......

```
const subscription = observable.subscribe(() => {
  subscription.dispose();
  doStuff(settings);
}); 
```

希望有人可以使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-29T06:09:58.950

详细说明@blazkovicz 的答案，`subscribeOnce`可能会返回一个`Promise`最终解决的新值。接受有关如何公开`subscription`对象的建议；-)

```
ko.subscribable.fn.subscribeOnce = function (handler, owner, eventName) {
    var subscribable = this;
    var subscription;
    return new Promise(function(resolve) {
      subscription = subscribable.subscribe(resolve, owner, eventName);
    }).then(function(newValue) {
      subscription.dispose();
      handler && handler(newValue);
      return newValue;
    });
};

// usage
yourObservable.subscribeOnce().then(function(newValue) {
    ...
}); 
```

# iphone - NSPredicate 检查数组中的所有项目

> ID：13701729
> 
> 赞同：1
> 
> 时间：2012-12-04T11:20:10.867
> 
> 标签：iphone, objective-c, ios, nspredicate

我有一个我的对象的实例数组 - `MyObject`。每个实例都有一个字符串和一个数组属性—— `myArrayProperty`它包含另一个类的实例——`MyOtherObject`我正在使用一个`NSPredicate`基于以下值进行一些过滤`myArrayProperty`：

```
 NSPredicate *myPredicate = [NSPredicate predicateWithFormat:@"myArrayProperty.otherObjectProperty MATCHES %@", mySearchString]; 
```

在这种情况下，otherObject 属性是 MyOtherObject 的字符串属性。我怀疑问题出在这个构造上：`myArrayProperty.otherObjectPropert`

我的问题是，如何指示谓词遍历 myArrayProperty 中的所有项目？我想避免在这里使用 for 循环。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:25:12.410

您可以使用...

```
NSPredicate *myPredicate = [NSPredicate predicateWithFormat:@"ANY myArrayProperty.otherObjectProperty MATCHES %@", mySearchString]; 
```

我相信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:37:46.330

您可以轻松地检查表单 nsobject 或形成一些基类并轻松地完成您的任务，例如：

```
ViewController *cont ;
NSMutableArray *array ;

[array addobject : cont];

nslog (@"%@",array);

for (UIViewController *crt in array ){
nslog (@"%@",crt);

} 
```

明智地代替 UIViewcontroller 使用 NSObject 或其他基类..

# swing - 全局动作监听器

> ID：13701730
> 
> 赞同：0
> 
> 时间：2012-12-04T11:20:14.343
> 
> 标签：swing

以下代码/我的假设有什么问题？

首先我注册 AWT 事件监听器：

```
...
Toolkit.getDefaultToolkit().addAWTEventListener(this,
    AWTEvent.ACTION_EVENT_MASK | AWTEvent.ITEM_EVENT_MASK
    );
... 
```

然后我希望`eventDispatched(AWTEvent)`每次用户从`JComboBox`or中选择项目时都会被调用`JList`。然而，什么也没有发生。为什么？

```
@Override
public void eventDispatched(AWTEvent event) {
    if (event instanceof ItemEvent) {
        System.out.println("ITEM EVENT");   // this is never called
    } else if (event instanceof ActionEvent) {
        System.out.println("ACTION EVENT"); // this is never called
    }
} 
```

我知道我可以添加`ActionListener`到`JComboBox`and `JList`，但我想避免这种解决方案，因为我正在尝试记录用户活动，因此侦听器应该是“全局的”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:30:00.460

我刚刚发现我要求的功能可能不受支持： [http ://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6292132](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6292132)

相关文章： [如何添加全局动作事件监听器？](https://stackoverflow.com/questions/7753709/how-to-add-global-action-event-listener)

# ruby-on-rails - 搜索“/”时思考 Sphinx 错误

> ID：13701736
> 
> 赞同：1
> 
> 时间：2012-12-04T11:21:02.517
> 
> 标签：ruby-on-rails, ruby, sphinx, thinking-sphinx

Thinking Sphinx 在搜索一些特殊字符时出错，例如 `/`等`)`。我认为将它们添加到`charset_table`配置中`sphinx.yml`可以解决问题，但事实并非如此。

我所做的是：

```
charset_table: "0..9, a..z, _, @, A..Z->a..z, /" 
```

我什至尝试添加`U+002F`到 charset 表中，但它也没有用。

那么对此最好的解决方案是什么？

1.  类似上面的东西，虽然它对我不起作用？可能我在某个地方错了吗？
2.  在查询 Sphinx 之前转义“搜索词”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T13:01:33.597

我遇到了同样的问题。尝试转义您要查询的字符串，使用`Riddle.escape`.

所以搜索可能是：

```
Post.search(Riddle.escape("$foo@bar/something") # no idea why you would search for that 
```

# jquery - JQM -navigate.url 不起作用

> ID：13701739
> 
> 赞同：0
> 
> 时间：2012-12-04T11:21:12.173
> 
> 标签：jquery, jquery-mobile

这是我的代码 - [http://jsfiddle.net/aVkgp/203/](http://jsfiddle.net/aVkgp/203/)。

我创建了一个 id 为 " `option2sub7`" 的页面，并尝试通过以下方式导航到该页面

`$.mobile.changePage("url"); [var url =#option2sub7"]`

但是在导航时，页面是未定义的。[从菜单中选择 LeftDropdown 中的 Option2 和 RightDropdown 中的 Sub7]

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:26:06.080

与`$.mobile.changePage("url");`您一起表明您要更改为页面“url”，而不是更改为名称由变量 url 指定的页面。你应该打电话的是`$.mobile.changePage(url);`

# java - 如果在底层操作系统中更新时区，如何更新正在运行的 java webapp 的时区（无需重新启动）？

> ID：13701743
> 
> 赞同：-1
> 
> 时间：2012-12-04T11:21:47.977
> 
> 标签：java, web-applications

我正在尝试在运行的 java webapp 中更新/访问（更新）时区，当底层操作系统的时区（在我的情况下是 linux 发行版）被更新时。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:37:32.943

每次您需要时区时，请尝试从您的网络应用程序调用

```
TimeZone.getDefault(); 
```

[这里的](http://docs.oracle.com/javase/6/docs/api/java/util/TimeZone.html#getDefault%28%29)文档：

# mysql - 如何在 mySQL 中按数据分组并一次计算？

> ID：13701746
> 
> 赞同：1
> 
> 时间：2012-12-04T11:21:54.950
> 
> 标签：mysql, sql, group-by

```
=======================================
| 输入类型 | 应付 | 金额 | 标识符 |
=======================================
| 费用 | 10,000 | 5,000 | 1 |
--------------------------------------
| 费用 | 10,000 | 5,000 | 1 |
--------------------------------------
| 费用 | 10,000 | 5,000 | 2 |
--------------------------------------
| 存款 | 5,000 | 4,000 | 1 |
--------------------------------------
| 存款 | 15,000 | 10,000 | 2 |
--------------------------------------

```

如果我想从上表中查看这样的余额：

```
===============================
| 标识符 | 余额1 | 余额2 |
===============================
| 1 | 24,000 | 15,000 |
------------------------------
| 2 | 20,000 | 20,000 |
------------------------------

```

### pID 1 的计算：

应付（费用）10,000+10,000 + 金额（存款）4,000 = 余额1 24,000

应付（费用）5,000+5,000 + 金额（存款）5,000 = 余额2 15,000

### pID 2 的计算：

应付（费用）10,000 + 金额（存款）10,000 = 余额1 20,000

应付（费用）5,000 + 金额（存款）15,000 = 余额2 20,000

*   **获取数据后如何进行计算？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:43:37.037

如果 InputType 只能有两种不同的状态，我认为您正在寻找这样的东西：

```
select
  pID,
  sum(case when InputType='Expenses' then Payable else Amount end) as Balance1,
  sum(case when InputType='Expenses' then Amount else Payable end) as Balance2
from tbl
group by pID 
```

# java - for 循环时间

> ID：13701748
> 
> 赞同：1
> 
> 时间：2012-12-04T11:22:00.270
> 
> 标签：java, date, datetime, for-loop

我在 Java 中创建这样的函数时遇到问题：

```
for(i=initial Time ; i<some final time ; i imcrement by 15 sec )
{
    System.out.println(i);
} 
```

任何建议都被热诚接受。

* * *

要求是我们生成不同的时间值增加 15 秒，而不是我们需要每 15 秒执行一次

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-04T11:30:50.810

如果您只需要增加 15 秒的不同时间值，那么：

```
long now = System.currentTimeMillis();
long end = now + (60 * 1000);
Calendar c = Calendar.getInstance();

for (long i = now; i < end; i += 15000) {

    c.setTimeInMillis(i);
    System.out.println(c.getTime());
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T11:28:24.490

我建议你在 java 中使用 currentTimeMillis 和 long time 格式

例子：

```
import java.util.Date;

public class TestTime {

    public static void main(String[] args) {
        long initialTime = System.currentTimeMillis();
        long finalTime = initialTime + 30*1000*60;//half an hour later

        for(long i=initialTime ; i<finalTime ; i+=15*1000)
        {
            System.out.println(new Date(i));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-04T11:24:10.693

看起来您需要基于时间的表示。我可能会看看 Joda-Time 的[LocalTime](http://joda-time.sourceforge.net/apidocs/org/joda/time/LocalTime.html)类，尤其是[plusSeconds(](http://joda-time.sourceforge.net/apidocs/org/joda/time/LocalTime.html#plusSeconds%28int%29) ) 方法。出于多种原因（糟糕的 API、可变状态等），我不会使用标准的基于 Java 时间/日期的东西。

如果您想要类似但没有太多类型安全性的东西，只需使用`Thread.currentTimeMillis()`并添加每个循环 15000（15 秒）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T11:26:18.617

我认为您可以`Calander api`在`while`循环中使用-

```
Calendar cal = Calendar.getInstance();
Calendar cal1 = Calendar.getInstance();
cal.setTime(startDate);
cal1.setTime(endDate);
while (!cal.equals(cal1)) {
  cal.add(Calendar.DATE, 1);
  if(cal.get(Calendar.DAY_OF_WEEK)==Calendar.SATURDAY)
     System.out.println(cal.get(Calendar.DAY_OF_WEEK));
  System.out.println(cal.getTime());

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T11:24:37.527

要求改变（要求是我们生成不同的时间值增加 15 秒，它不像我们需要每 15 秒执行一次，）因此这不是正确的答案。

```
int start=0;
int end= 10;
for(int i=start ; i<end ; i++)
{
   System.out,println(i*15);
   try {

       Thread.sleep(15000); // 15000 miliseconds

   } catch (InterruptedException e) {
   e.printStackTrace();     
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T11:40:10.390

你可以这样做：

```
for (long stop=System.currentTimeMillis();stop<System.currentTimeMillis()+60;stop=stop+15) 
{
//code to execute
} 
```

因此这个循环将执行 4 次。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-12-04T12:03:51.197

“要求是我们生成不同的时间值增加 15 秒，它不像我们需要每 15 秒执行一次”......所以这里是......

```
 long start = System.currentTimeMillis();       // now
    long stop = start + 60000;                     // 60 seconds later
    long interval = 15000;                         // 15 second interval
    for (long i = start; i < stop; i+=interval) {
            System.out.println(new Date(i));
    } 
```

# java - 从 Java 程序调用 BPEL

> ID：13701751
> 
> 赞同：7
> 
> 时间：2012-12-04T11:22:06.830
> 
> 标签：java, request, endpoint, bpel, open-esb

我创建了一个将三个整数变量作为输入的 BPEL 流程。我需要使用从 Java 程序传递的不同参数对其进行测试。我正在使用 openESB 来完成这一切。

我的问题是如何从 java 代码中调用 BPEL 以及如何传递参数并从 BPEL 流程中取回结果？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-04T11:33:37.400

BPEL 流程通常部署为定义了端点的 Web 服务（通常是 SOAP）。您知道可以访问它的端点吗？

一旦你有了这个端点，你就可以在 java 中调用它作为一个普通的 web 服务。（我建议从[soapUI](http://www.soapui.org/ "肥皂界面")调用它开始，如果你只想测试BPEL流程会更容易）

至于openESB相关的具体情况，我不知道。您应该查看文档以了解部署细节。

回答后编辑。

因此，您有一个带有 wsdl 的端点。

首先，测试过程本身：

1.  安装[soapUI](http://www.soapui.org/ "肥皂界面")
2.  看看它的[文档](http://www.soapui.org/Getting-Started/your-first-soapui-project.html)
3.  你基本上必须创建一个新项目，它会要求一个wsdl，
4.  给你它会创建一个示例请求，用数据填充它并
5.  执行。在它返回一些数据之前，您遇到了问题。尝试玩或再问一些问题

现在，如果您需要构建一个 java 客户端。

1.  谷歌了一下“SOAP web 服务客户端”
2.  周围有一些图书馆：axis2，Apache CXF ...
3.  例如，使用 CXF，请看这里： [http](http://cxf.apache.org/docs/how-do-i-develop-a-client.html) ://cxf.apache.org/docs/how-do-i-develop-a-client.html它基本上包括使用一些工具根据您的 wsdl 生成一些 java 代码和然后编写更多代码以使用您想要的数据实际调用服务

由于您能够编写 bpel 进程，因此您应该能够处理它。再次：谷歌或提问:)

再次，我希望这会有所帮助。

# delphi - 通过电子邮件将 StringList 作为附件发送 - Indy

> ID：13701752
> 
> 赞同：5
> 
> 时间：2012-12-04T11:22:08.227
> 
> 标签：delphi, delphi-xe2, indy10

如何通过电子邮件通过附件发送整个 StringList 而不保存到硬盘？我知道附件限制..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T12:28:20.107

您可以使用 TIdAttachmentMemory 代替 TIdAttachmentFile ：

```
StringList := TStringList.Create;
StringList.Append('foo');
StringList.Append('bar');

MemoryStream := TMemoryStream.Create;
StringList.SaveToStream(MemoryStream);
MemoryStream.Position := 0;

IdMessage := TIdMessage.Create(nil);
IdAttachmentMemory := TIdAttachmentMemory.Create(IdMessage.MessageParts,MemoryStream); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:05:00.260

您可以使用**StringList.Text**属性。此属性可用于读取和写入，从而将字符串列表的内容作为字符串参数传递（而不是尝试传递对象）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:24:25.040

为什么不将其保存到文件并将文件作为附件发送？

# android-layout - 设置openGL动画的背景drawable

> ID：13701759
> 
> 赞同：0
> 
> 时间：2012-12-04T11:22:30.507
> 
> 标签：android-layout, opengl-es

我希望从我的可绘制资源文件夹中设置一个静态图像作为我的 OpenGL 动画的背景。由于动画位于 a`GLSurfaceView`我尝试将`GLSurfaceView`' 背景设置为可绘制资源，但这不起作用。

```
<android.opengl.GLSurfaceView
                android:id="@+id/graphics_glsurfaceview1"
                android:layout_width="fill_parent"
                android:layout_height="500dp"
                android:background="@drawable/background" /> 
```

任何想法我将如何为我的 OpenGL 动画设置背景图像。我的班级有`onSurfaceCreated`, `onDrawFrame`,`onSurfaceChanged`方法，`GLSurfaceView`所以也许在那里的某个地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:57:14.367

这行不通。你需要这样做：

1.  在下方放置另一个具有所需背景的视图`GLSurfaceView`
2.  在渲染中使用透明清晰的颜色。

这样你就会看到你的背景。

你可以在 Android API Demos 中看到这个例子，看看`TranslucentGLSurfaceViewActivity`. 要查看它，请启动 API Demos 应用程序并选择*Graphics->OpenGL ES->Translucent GLSurfaceView*。

但是，我强烈建议不要以这种方式绘制背景，而是使用 OpenGL 手段 - 加载纹理并绘制它。

# jquery - jQuery DataTable - 可见列

> ID：13701763
> 
> 赞同：2
> 
> 时间：2012-12-04T11:22:36.727
> 
> 标签：jquery, datatable

我有代码：

```
$('#table').dataTable({
      "aoColumnDefs": [
                { "bVisible": true, "aTargets":[0], "mDataProp":"name" },
                { "bVisible": true, "aTargets":[1], "mDataProp":"surname" },
                { "bVisible": true, "aTargets":[2], "mDataProp":"number" }
      ]
    }); 
```

`Search`当我有变量设置**true**时显示此代码，但是当我`Search`设置**false**我只想显示 surname 和 number 列时，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:57:30.713

尝试

```
var Search = false;

$('#table').dataTable({
      "aoColumnDefs": [
                { "bVisible": function() { return Search; }, "aTargets":[0], "mDataProp":"name" },
                { "bVisible": true, "aTargets":[1], "mDataProp":"surname" },
                { "bVisible": true, "aTargets":[2], "mDataProp":"number" }
      ]
    }); 
```

# grails - 如何使用 Grails-cxf 插件向 Web 服务提供动态凭据（用户名和密码）

> ID：13701764
> 
> 赞同：5
> 
> 时间：2012-12-04T11:22:36.527
> 
> 标签：grails, groovy, cxf, credentials, wss4j

我正在使用这个很棒的插件[http://grails.org/plugin/cxf-client](http://grails.org/plugin/cxf-client)来使用具有安全性的合约优先 Web 服务。

所以我的配置中已经有这样的东西：

```
 cxf {
   client {
    cybersourceClient {           
        clientInterface = com.webhost.soapProcessor
        serviceEndpointAddress = "https://webhost/soapProcessor"
        wsdl = "https://webhost/consumeMe.wsdl"
        secured = true
        username = "myUname"
        password = "myPwd"
    }   
} 
```

这非常有效，但我现在想做的是让我的用户能够输入用户名和密码，以便他们可以输入用户名和密码来使用服务。有谁知道如何做到这一点？

我怀疑它在演示项目中使用了自定义拦截器：

```
package com.cxf.demo.security

import com.grails.cxf.client.CxfClientInterceptor

import org.apache.cxf.ws.security.wss4j.WSS4JOutInterceptor
import org.apache.ws.security.WSPasswordCallback
import org.apache.ws.security.handler.WSHandlerConstants

import javax.security.auth.callback.Callback
import javax.security.auth.callback.CallbackHandler
import javax.security.auth.callback.UnsupportedCallbackException

class CustomSecurityInterceptor implements CxfClientInterceptor {

String pass
String user

   WSS4JOutInterceptor create() {
    Map<String, Object> outProps = [:]
    outProps.put(WSHandlerConstants.ACTION, org.apache.ws.security.handler.WSHandlerConstants.USERNAME_TOKEN)
    outProps.put(WSHandlerConstants.USER, user)
    outProps.put(WSHandlerConstants.PASSWORD_TYPE, org.apache.ws.security.WSConstants.PW_TEXT)
    outProps.put(WSHandlerConstants.PW_CALLBACK_REF, new CallbackHandler() {

        void handle(Callback[] callbacks) throws IOException, UnsupportedCallbackException {
            WSPasswordCallback pc = (WSPasswordCallback) callbacks[0]
            pc.password = pass
            pc.identifier = user
        }
    })

    new WSS4JOutInterceptor(outProps)
}
} 
```

但由于我没有实例化这个拦截器，或者不了解它是如何实例化的，我不知道如何获取拦截器中使用的用户凭据。

有谁知道如何做到这一点/有任何示例代码？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:27:47.810

假设您使用的是 Spring Security 插件，并且您想要使用的 WS 凭据是您的`User`域对象的属性，那么这样的东西应该可以工作（未经测试）：

**src/groovy/com/cxf/demo/security/CustomSecurityInterceptor.groovy**

```
package com.cxf.demo.security

import com.grails.cxf.client.CxfClientInterceptor

import org.apache.cxf.ws.security.wss4j.WSS4JOutInterceptor
import org.apache.ws.security.WSPasswordCallback
import org.apache.ws.security.handler.WSHandlerConstants

import javax.security.auth.callback.Callback
import javax.security.auth.callback.CallbackHandler
import javax.security.auth.callback.UnsupportedCallbackException

class CustomSecurityInterceptor implements CxfClientInterceptor {

   def springSecurityService
   def grailsApplication

   WSS4JOutInterceptor create() {
    Map<String, Object> outProps = [:]
    outProps.put(WSHandlerConstants.ACTION, org.apache.ws.security.handler.WSHandlerConstants.USERNAME_TOKEN)
    // take default username from config
    outProps.put(WSHandlerConstants.USER, grailsApplication.config.cxf.client.cybersourceClient.username)
    outProps.put(WSHandlerConstants.PASSWORD_TYPE, org.apache.ws.security.WSConstants.PW_TEXT)
    outProps.put(WSHandlerConstants.PW_CALLBACK_REF, new CallbackHandler() {

        void handle(Callback[] callbacks) throws IOException, UnsupportedCallbackException {
            WSPasswordCallback pc = (WSPasswordCallback) callbacks[0]
            // take password from current user, fall back to config if no
            // user currently logged in/not in a request thread, etc.
            pc.password = (springSecurityService.currentUser?.wsPassword
               ?: grailsApplication.config.cxf.client.cybersourceClient.password)
        }
    })

    new CustomWSS4JOutInterceptor(springSecurityService, outProps)
  }
}

class CustomWSS4JOutInterceptor extends WSS4JOutInterceptor {
  def springSecurityService

  CustomWSS4JOutInterceptor(springSecurityService, outProps) {
    super(outProps)
    this.springSecurityService = springSecurityService
  }

  // overridden to fetch username dynamically from logged in user
  // but fall back on config if no user/not on a request hander thread
  public Object getOption(String key) {
    if(key == WSHandlerConstants.USER && springSecurityService.currentUser?.wsUser) {
      return springSecurityService.currentUser?.wsUser
    } else return super.getOption(key)
  }
} 
```

**grails-app/conf/spring/resources.groovy**

```
import com.cxf.demo.security.CustomSecurityInterceptor
beans = {
  customSecurityInterceptor(CustomSecurityInterceptor) {
    springSecurityService = ref('springSecurityService')
    grailsApplication = ref('grailsApplication')
  }
} 
```

并在配置中，替换`secured = true`为`securityInterceptor = 'customSecurityInterceptor'`

如果您不使用 Spring Security，则相同的模式将起作用。关键位是回调处理程序

```
 pc.password = (springSecurityService.currentUser?.wsPassword
               ?: grailsApplication.config.cxf.client.cybersourceClient.password) 
```

和用户名逻辑`getOption`

```
 if(key == WSHandlerConstants.USER && springSecurityService.currentUser?.wsUser) {
      return springSecurityService.currentUser?.wsUser 
```

例如，如果用户名和密码存储在 HTTP 会话中，那么`springSecurityService`您可以使用 Spring [RequestContextHolder](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/context/request/RequestContextHolder.html)代替，它的静态`getRequestAttributes()`方法返回当前线程正在处理的 GrailsWebRequest，如果当前线程未处理请求，则返回 null (例如，如果它是后台工作）。

```
RequestContextHolder.requestAttributes?.session?.wsUser 
```

或者，如果它们是请求属性（即您`request.wsUser = 'realUsername'`在控制器中说过），您可以使用`RequestContextHolder.requestAttributes?.currentRequest?.wsUser`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:03:55.070

这是其他任何人的通用答案：

**1\. 配置.groovy**

```
cxf {
    client {

        nameOfClient {
            clientInterface = com.webhost.soapProcessor
            serviceEndpointAddress = "https://webhost/soapProcessor"
            wsdl = "https://webhost/soapProcessorconsumeMe.wsdl"
            secured = true
            securityInterceptor = "nameOfSecurityInterceptorBean"
        }
    }
} 
```

**2\. 资源.groovy**

```
import com.company.package.MySecurityInterceptor

beans = {

nameOfSecurityInterceptorBean(MySecurityInterceptor) {
}

} 
```

**3.在com.company.package下创建一个MySecurityInterceptor**

```
package com.company.package;

import com.grails.cxf.client.CxfClientInterceptor

import org.apache.cxf.ws.security.wss4j.WSS4JOutInterceptor
import org.apache.ws.security.WSPasswordCallback
import org.apache.ws.security.handler.WSHandlerConstants

import javax.security.auth.callback.Callback
import javax.security.auth.callback.CallbackHandler
import javax.security.auth.callback.UnsupportedCallbackException

import org.springframework.web.context.request.RequestContextHolder

class MySecurityInterceptor implements CxfClientInterceptor {

WSS4JOutInterceptor create() {
    Map<String, Object> outProps = [:]
    outProps.put(WSHandlerConstants.ACTION, org.apache.ws.security.handler.WSHandlerConstants.USERNAME_TOKEN)
    outProps.put(WSHandlerConstants.USER, user)
    outProps.put(WSHandlerConstants.PASSWORD_TYPE, org.apache.ws.security.WSConstants.PW_TEXT)
    outProps.put(WSHandlerConstants.PW_CALLBACK_REF, new CallbackHandler() {

                void handle(Callback[] callbacks) throws IOException, UnsupportedCallbackException {
                    WSPasswordCallback pc = (WSPasswordCallback) callbacks[0]
                    def requestObj = RequestContextHolder.requestAttributes?.currentRequest
                    pc.password = requestObj.soapPassword
                    pc.identifier = requestObj.soapIdentifier
                }
            })

    new WSS4JOutInterceptor(outProps)
}
} 
```

**4\. 现在我们需要将用户名和密码放入请求中（线程安全）以被拦截器拉出：**

```
 import com.company.package.MySecurityInterceptor
    class MySoapSendingController {

    SoapProcessor nameOfClient

    def index() {

    request['soapIdentifier'] = "usernameToUse"
    request['soapPassword'] = "passwordToUse"

                 ...

        ReplyMessage replyMsg = nameOfClient.makeSOAPRequest(request)
       }
    } 
```

# c# - 如何删除已使用 C# 插入书签的当前列？

> ID：13701769
> 
> 赞同：0
> 
> 时间：2012-12-04T11:23:04.267
> 
> 标签：c#, ms-word

我有一个表，我选择了两列并将选择标记为书签？现在如何使用 C# 删除它？

我的代码是这样的：

```
/// <summary>
/// Delete all columns of specific bookmark
/// </summary>
/// <param name="bookmark"></param>
public void DeleteTableColumns(string bookmark)
{
   object oBookmark = bookmark;
   if (doc.Bookmarks.Exists(bookmark)) {
      Range range = doc.Bookmarks.get_Item(ref oBookmark).Range;
      //TODO:to be finished
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:37:03.220

我知道如何解决这个问题，代码如下：

```
/// <summary>
    /// Delete all columns of specific bookmark
    /// </summary>
    /// <param name="bookmark"></param>
    public void DeleteTableColumns(string bookmark)
    {
        object oBookmark = bookmark;
        if (doc.Bookmarks.Exists(bookmark)) {
            object oCount = WdDeleteCells.wdDeleteCellsEntireColumn;
            doc.Bookmarks.get_Item(ref oBookmark).Select();
            app.Selection.Cells.Delete(ref oCount);
        }
    } 
```

# asp.net - 导航菜单中的垂直线

> ID：13701771
> 
> 赞同：0
> 
> 时间：2012-12-04T11:23:14.023
> 
> 标签：asp.net, syncfusion

我试图在菜单项（导航菜单）中的项目之间设置一条垂直线（分隔符）。我使用了一个 Div-Tag，但出现了一个错误：在 Syncfusion.Web.UI.WebControls.Tools.MenuControl.Panel 中是不允许的。你能告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T12:28:54.463

应自定义“.DefRoot_ItemCSS”类的边框样式以获取菜单项之间的分隔符。对此类的更改将反映在所有菜单项中。如果您只想将此应用于特定项目，则可以通过使用该元素的 id 来设置，例如 #MainContent_Menu1_I2{border-right: 1px solid;}。

谢谢，

瓦拉拉克什米

# c - 将波形发生器初始化到某个频率

> ID：13701772
> 
> 赞同：-1
> 
> 时间：2012-12-04T11:23:14.793
> 
> 标签：c, avr

我最初用 125 kHz 生成正弦波有一个小问题。这看起来很简单，但我花了很多时间，但我无法弄清楚问题出在哪里。我正在使用 CodeVisionAVR 编译器。

我正在使用 ATmega32-A 微控制器，AD9833 可编程波形发生器来生成正弦波。我已经编写了闲置代码。

```
#include <MEGA32.h>
#include <main.h>
#include <interface.h>
#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#include <delay.h>
#include <sleep.h>

 // GLOBAL VARIABLES
 unsigned int i;

 //Status
 unsigned char state = 0;
 unsigned char debug = 0;
 unsigned int status = 0x0010;

 //External variables
 unsigned char Command;
 unsigned int  Param;
 extern unsigned char rx_counter0; 

 //Initialize registers
 void init(void){

    #asm("cli");        //Disable global interrupt

    // Input/Output Ports initialization
    // Port B initialization 
    PORTB=0x00;
    DDRB=0xBF;

    // Port C initialization
    PORTC=0x00;
    DDRC=0xC3;

    // Port D initialization
    PORTD=0x00;
    DDRD=0xFC;

    // USART initialization
    // Communication Parameters: 8 Data, 1 Stop, No Parity
    // USART Receiver: On
    // USART Transmitter: On
    // USART0 Mode: Asynchronous
    // USART Baud Rate: 9600
    UCSRC=0x86;
    UBRRH=0x00;
    UBRRL=0x67;
    UCSRA=0x00;
    UCSRB=0xD8;
   //UCSRC=0x86;

   // SPI initialisation
   // SPI clock rate fck/16
   // SPI master
   // SPI MSB first
   // SPI CPOL = 1, CPHA = 1
   SPCR=0x5D;
   //PORTB.1 = 1;    //Flash CS high
   PORTB.3 = 1;    //ADC CS high

  //Global enable interrupts
  #asm("sei")
 }

 void runCom(void){

         switch(Command){

                        case(NO_COM):
                            Command = 0;
                            break;

                        case(FREQ):
                            if(Param < 500)
                                SetWGFreq(Param);   
                                Command = 0;
                            break; 

                        case(PHASE):
                            if(Param < 4095)
                                SetWGPhase(Param);
                            Command = 0;
                            break;          
                        default:
                            Command = 0;
                            break;   
                    }
             }

  void main(void){
        status = 0x0010;
        init();                                     //Initialize controller

        SetWGFreq(125);     //Initialize waveformgenerator 125 kH     

        debug = 0;              //Controls output during motor running      
   while (1){

         if(rx_counter0) getCom();                     
         if(Command)     runCom();

          }
       }
   }
   #asm("WDR");        //Reset WD timer 
 }  // EOF "while(1)"
} // EOF "main(void)"

unsigned char spi(unsigned char data) 
{ 
//Start transmision 
SPDR = data; 
//Wait for transmision complete 
while (!(SPSR & 0x80)); 
return SPDR; 
}        

//Sets the waveform generator output to given kHz
void SetWGFreq(unsigned int freq)
{
unsigned long freg;
char fByte0;
char fByte1;
char fByte2;
char fByte3;

freg = (unsigned long)freq*33554.432;   //Number based on a MCLK of 8 MHz
fByte0 = (char)freg;
fByte1 = (char)(freg>>8);
fByte1 = (fByte1 & 0x3F) | 0x40;        //clears bits 15 and 14, then sets for FREQ0
fByte2 = (char)(freg>>14);              //byte1 only has 6 bits, so move over by 8+6
fByte3 = (char)(freg>>22);              //byte1 only has 6 bits, so move over by 8+8+6
fByte3 = (fByte3 & 0x3F) | 0x40;        //clears bits 15 and 14, then sets for FREQ0

SPCR = 0x5A;        //Set SPI to mode 2 and Fosc/64
WG_CS = 0;
while(WG_CS_PIN);   //Wait for chip select pin to go low
spi(0x20);          //Load control register with B28 high
spi(0x00);
spi(fByte1);
spi(fByte0);
spi(fByte3);
spi(fByte2);
WG_CS = 1;
} 
```

我在 ATmega32-A 和 AD9833 之间使用 SPI 通信。我已经编写了一个用于设置信号频率的函数和一个用于更改信号相位的函数。

当我输入“FREQ”和频率值时，我已经在开关盒中编写了命令，它以您输入的任何频率生成信号，与“PHASE”相同，我能够改变信号的相位。所以我能够使用命令成功设置信号的频率和相位。

现在我的问题是，

我想在运行代码时初始化 125 kHz 的波形发生器。即使关闭/打开电源也应该是 125KHz。如果用户想将频率从 125 更改为任何其他频率，他必须使用“FREQ”功能。
为此，我在进入 while 循环之前在主程序中调用了“SetWGFreq”函数。

> SetWGFreq(125); //初始化波形发生器 125 kH

我不知道为什么它不起作用。

但是当将此函数放在 while 循环中时，它正在工作（最初以 125KHz 生成信号）但“FREQ”不起作用。这意味着在那之后，如果我想使用“FREQ”功能改变信号的频率，它就不起作用了。

请帮帮我，我不知道我在做什么错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T10:56:15.427

看着这个，我怀疑问题不在于对 SetWGFreq() 的调用不起作用；问题是**第**一次不起作用。

函数调用将 CS 引脚驱动为低电平，然后在命令结束时恢复为高电平 WG_CS = 0；... WG_CS = 1；

但第一次通过时，WG_CS 可能已经为 0。第一次调用只是为了清除预先存在的不完整 SPI 状态。

您可以通过简单地添加第二次调用 SetWGFreq() 来快速测试。如果解决了，那么您就知道解决方案了。

通常，您会在初始化期间需要一些东西来清除任何加电垃圾。至少一个 CS 周期应清除任何 SPI 状态。最好发送状态命令，或重置以建立已知状态

你现在可能已经解决了这个问题，有什么问题？

# backbone.js - Backbone - 我是否正确访问了这个模型？

> ID：13701775
> 
> 赞同：1
> 
> 时间：2012-12-04T11:23:28.837
> 
> 标签：backbone.js

在我看来，我有这个功能：

```
saveData: function(){
    this.collection.setSelected(this.collection.where({name : this.$('#projects').val()}));
} 
```

以及我收藏中的相应功能：

```
setSelected: function(project){
    this.each(function(model){
        model.set({selected: false});
    });
    project[0].set({selected: true});
} 
```

所以，我的问题是为什么我需要访问 Project 数组的第一个元素才能访问实际的模型？难道我做错了什么？

此外，似乎有点 OTT 将集合中的所有模型循环设置为 false，然后将一个设置为 true，这是正确的做事方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:36:54.390

让我直截了当，这就是您要实现的目标：

```
USER SELECTS VIEW ELEMENT
GET NAME FROM ELEMENT
VIEW SETS ALL MODELS SELECTED = FALSE
VIEW SETS MODEL MATCHING NAME SELECTED = TRUE 
```

首先我想说你不需要循环所有模型，因为看起来只有一个模型带有`selected=true`. 如果是这种情况，您可以简单地使用其他一些可用的[下划线集合方法](http://underscorejs.org/#collections)，我也只会将名称值传递`setSelected`给以在视图中保持简单：

```
saveData: function(){
    this.collection.setSelected(this.$('#projects').val());
}

setSelected: function(name) {
    this.findfindfunction(model) {
        return model.get('selected');
    }).set('selected', false);

    this.find(function(model) {
        return model.get('name') == name;
    }).set('selected', true);
} 
```

显然，使用该`find`方法仍然需要在引擎盖下进行一些循环来找到与条件匹配的模型，但它只搜索第一个通过条件的模型，因此`where`无论如何它都比执行 which loops ever 模型要好。

显然，如果可以选择多个模型，这一切都会崩溃：D

**更新**

在考虑您的问题多一点后，我认为使用不同的视图架构可能会更好地为您服务。在您描述的情况下，我个人通常使用微视图。即每个模型的小视图。视图标记可能只包含一个复选框，仅此而已。

这意味着在您的主视图中，您可以循环您的集合，并为每个模型创建一个视图，将模型传递给视图，渲染它，并将标记附加到主视图。

通过这种方式，您可以更好地控制与特定模型相关的事件，并且可以轻松地将模型特定值呈现到您的视图中。下面这个简单的视图是一个微视图的简单示例，其中模板仅包含一个复选框和一个标签，或者类似的东西。

```
var CheckboxView = Backbone.View.extend({
    events: {
        'input[type=checkbox]': 'select'
    },
    render: function () {
        var html = _.template($('#myTemplate'), this.model.toJSON());
        this.$el.html(html);

        return this;
    },
    select: function () {
        this.model.set('selected', true);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:11:22.563

**为什么我需要访问 Project 数组的第一个元素才能访问实际的模型？**

答案是，根据[文档](http://backbonejs.org/#Collection-where)，`where`返回匹配模型的数组。因此，您需要使用索引来访问它。

只要只返回一个模型，我认为您用来设置的方法没有任何问题`selected`。`true``where`

**第二个疑问**

为什么不使用`selected`as创建所有模型`false`（我假设它会很好）并保持`setSelected`这样的方法：

```
setSelected = function(project, value) {

  project[0].set({selected: value});

  // well a better approach would be to define a method in the model saying,
  // select() which sets the attribute, and call it from here with
  // project[0].select(params), but its up to you how you do it.
} 
```

`true`您可以使用or `false`to`select`或`deselect`任何模型调用相同的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T21:05:04.733

> 为什么我需要访问 Project 数组的第一个元素才能访问实际的模型

因为您正在使用[`where`](http://underscorejs.org/#where)，它返回一个数组。您可以[`find`](http://underscorejs.org/#find)在这种情况下使用，它返回第一个匹配对象。

```
this.collection.find(function(x) { return x.get("name") == this.$('#projects').val() }); 
```

> 围绕集合中的所有模型循环似乎有点 OTT

如果您只想一次选择一个模型，那么最好找到选定的模型并取消选择它。就像是：

```
this.collection.setSelected(this.$('#projects').val()); 
```

和：

```
setSelected: function(name){
    var selected = this.find( function(x) { return this.get("selected") === true } );
    if (typeof selected != "undefined") selected.set("selected", false);

    var newSelected = this.find( function(x) { return this.get("name") === name });
    if (typeof newSelected != "undefined") newSelected.set("selected", true);
} 
```

# loops - PLSQL 和循环

> ID：13701781
> 
> 赞同：1
> 
> 时间：2012-12-04T11:23:43.057
> 
> 标签：loops, plsql, nested

我有一个表，有时会更新缺少“0”或多个连续零的记录。记录长度应为小数点后 8 位（共 10 个字符）。

例如 - 最初看起来像 1.12345600 的记录最终会像 1.123456

我制作了一个脚本来检查所有记录的长度，并在每条短于 10 个字符的记录中添加一个“0”。

问题是它只添加了一次“0”。上面的例子看起来像 1.1234560 而不是我想要的 1.12345600。这是脚本：

```
DECLARE

       CURSOR dif IS
            SELECT CUST_CODE, CUST_ID, CONTRACT_NUM, MSISDN 
            FROM project1;

BEGIN

        FOR a in dif LOOP

            IF LENGTH (a.CUST_CODE)<10
            THEN
            UPDATE project1
            SET CUST_CODE=a.CUST_CODE||'0'      
            WHERE CUST_CODE=a.CUST_CODE;
            END IF;
        END LOOP;
        commit;

END; 
```

完成运行后，会添加一个“0”。如果我再次运行该脚本，它将在任何仍短于 10 个字符的记录中添加另一个“0”。包含 7 个字符的记录需要第三次运行。

我猜应该在某个地方有另一个循环来继续检查记录，直到它都达到所需的长度。任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:01:16.140

如果我是你，我会用一个声明来做。

```
UPDATE project1 SET CUST_CODE=rpad(CUST_CODE, 10, '0'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T12:23:12.757

您可以使用 rpad 功能：[http](http://www.techonthenet.com/oracle/functions/rpad.php) ://www.techonthenet.com/oracle/functions/rpad.php （链接中的第三个示例是您想要的）。

```
 SET CUST_CODE=rpad(a.CUST_CODE, 10, '0') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-23T17:21:04.880

您可以使用 rpad 来解决您的问题！下面遵循参考文档。 [http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions140.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions140.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-26T10:05:34.290

如果你想用上面给出的 SQL 来实现它是最好的方法，但是你想通过 PLSQL 来实现它，你需要更正你的逻辑。您正在为游标中的记录数运行循环，然后在每个记录后面附加一个单零，即“0”，这正是您在代码中编写的内容。

如果您希望它长度为 10，则按如下方式实现它。

```
 IF LENGTH (a.CUST_CODE)<10
        THEN
        v_len = 10-length (a.cust_code-- declare a variable
        for 
        i in 1..v_len
        loop
        v_pad=v_pad||'0';
        end loop;
        UPDATE project1
        SET CUST_CODE=a.CUST_CODE|| v_pad      
        WHERE CUST_CODE=a.CUST_CODE;
        END IF; 
```

希望这将帮助您在 PLSQL 中实现

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-19T14:00:20.677

```
DECLARE

       CURSOR dif IS
            SELECT CUST_CODE, CUST_ID, CONTRACT_NUM, MSISDN 
            FROM project1;
v_temp number;

BEGIN

        FOR a in dif LOOP
v_temp := 10-LENGTH (a.CUST_CODE)
            IF LENGTH (a.CUST_CODE)<10
            THEN
            UPDATE project1
            SET CUST_CODE=RPAD(a.CUST_CODE,v_temp,'0') ;
            WHERE CUST_CODE=a.CUST_CODE;
            END IF;
        END LOOP;
        commit;

END; 
```

您可以使用上面的查询

# ruby-on-rails - 如何优化我的代码

> ID：13701785
> 
> 赞同：0
> 
> 时间：2012-12-04T11:23:51.997
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想优化我的代码我该怎么做？

如果我添加了新角色，那么还会添加一个条件，但我不想要。我要任何不。角色，但我只需要一个条件可能吗？

```
after_save :announcement_send

def announcement_send
  if self.send_now == true && self.group_id.to_s == "Artists"
    User.having_role("artist").each do |user|
      ArtistMailer.announcement_user(self, user).deliver
    end
  elsif self.send_now == true && self.group_id.to_s == "Fans"
    User.having_role("fan").each do |user|
      ArtistMailer.announcement_user(self, user).deliver
    end
  elsif self.send_now == true && self.group_id.to_s == "Both"
     User.not_having_role("admin").each do |user|
       ArtistMailer.announcement_user(self, user).deliver
     end
  end        
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:30:12.897

没有真正测试过，但我会这样分解：

```
def role(s)                                                                                                                                                                               
  if s == "Both"                                                                                                                                                                          
    User.not_having_role("admin")                                                                                                                                                         
  else                                                                                                                                                                                    
    User.having_role(s.singularize.downcase)                                                                                                                                              
  end                                                                                                                                                                                     
end         

if self.send_now                                                                                                                                                                          
  role(self.group_id.to_s).each do |user|                                                                                                                                                 
    ArtistMailer.announcement_user(self, user).deliver                                                                                                                                    
  end                                                                                                                                                                                     
end 
```

此代码假定 group_id 始终以用户所在角色的复数形式出现。因此 Artists 表示“艺术家”角色。

当然，这假设所有角色都是有效的 group_id。如果不是这种情况，您可以根据内部可能值的白名单检查 group_id `def role`：

```
white_list = ['artist', 'fan']
role = s.singularize.downcase
if white_list.include? role
  User.having_role(role)
else
  # possibly throw an exception
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T11:33:25.633

好的代码应该会讲故事。

```
WHITELIST = %w(artist fan)

def announcement_send
  return unless send_now
  users_list_for_announcement.each { |user| notify(user) }
end

def users_list_for_announcement
  in_whitelist? = ->(group) { WHITELIST.include?(group) }
  case formatted_group_name
  when "both"        then User.not_having_role("admin")
  when in_whitelist? then User.having_role(formatted_group_name)
  else []
  end
end

def formatted_group_name
  group_id.to_s.singularize.downcase
end

def notify(user)
  ArtistMailer.announcement_user(self, user).deliver
end 
```

实际上，我什至会在用户处理逻辑中创建一个专用范围，以根据组获取适当的用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:37:19.463

我认为以下是您需要的答案：

```
if self.send_now
if self.group_id.to_s == "Both" 
    User.not_having_role("admin").each do |user|
        ArtistMailer.announcement_user(self, user).deliver
    end
elsif self.group_id.to_s
    User.having_role(self.group_id.to_s.singularize.downcase).each do |user|
        ArtistMailer.announcement_user(self, user).deliver
    end     
end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T11:41:34.117

将角色作为参数传递

```
def announcement_send(role)
  if self.send_now == true 
    User.having_role(role).each do |user|
      ArtistMailer.announcement_user(self, user).deliver
    end  
end

def after_save(role)
   announcement_send(role)
end 
```

这将在前两个条件下工作

最后，我猜测用户同时具有“粉丝”和“艺术家”的角色。然后通过 user.role.first

# architecture - Presentation、Service 和 DAO 层关系

> ID：13701786
> 
> 赞同：0
> 
> 时间：2012-12-04T11:23:58.067
> 
> 标签：architecture, data-access-layer, relationship, business-logic-layer, presentation-layer

我对这个问题想了很多，但找不到明确的答案：

正如我上次理解的那样，业务层应该只适用于模型对象。它不应该知道我们如何以及从我们获取这些数据的任何信息。它让我们可以独立于 DAO 使用业务层 API。

那么，在 Service 层中使用 DAO 方法调用是否正常，或者我们应该尝试减少它们之间的依赖关系。因此，我看到了层之间关系的两种变体：

1.  **控制器 -> 服务 -> 道**
2.  **1步：modelObject = Controller –> Dao
    2步：Controller –> Service (modelObject)**

那么，哪种变体是正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:47:14.357

在旧架构中，有两层客户端和服务器。服务器保存所有数据库信息和逻辑。但是，三层架构带来了清晰的封装和层之间的清晰抽象。在两层架构中，没有很好的封装和抽象，并且可维护性，扩展能力是一个问题，因为层之间没有清晰的封装和抽象。客户端层不直接调用服务。而是使用代理来调用服务。对于客户端，它充当本地计算机程序来调用服务。因此，客户端通过中间层的服务器中的代理调用服务。在中间层中，您可以假设可以有控制器、服务、serviceImpl、模型，而没有任何与数据库相关的东西。中间可以有什么硬性规定层。只是一点是它不应该弄乱数据库的东西。在第三层有数据库。假设 dao 作为返回 db 相关结果的容器。客户端应该通过服务传递调用，dao 应该通过服务将结果传递给客户端。

# winforms - 禁用元素的 NumericUpDown 背景颜色更改

> ID：13701789
> 
> 赞同：3
> 
> 时间：2012-12-04T11:24:06.403
> 
> 标签：winforms, c#-4.0, numericupdown

在我的 winform 应用程序中，我正在尝试对必填字段进行颜色编码。在用户编辑时，当填写必填项时，背景变为浅绿色，如果必填字段为空，则其背景为红色。根据其他字段中的输入启用和禁用某些字段，因此有时我需要禁用的字段，并且应该完全禁用（禁用颜色背景）。这就是我所拥有的背景变化：

```
public static void UpdateBackgroundColor(this NumericUpDown control)
{
    if (!control.Enabled)
    {
        control.BackColor = SystemColors.InactiveBorder;
        return;
    }

    var inputValue = control.Value;

    if (inputValue == 0)
    {
        control.BackColor = Color.Red;
        return;
    }
    control.BackColor = Color.LightGreen;
} 
```

类似的功能适用于 TextBox 并且工作正常，没有故障。但是 NumericUpDown 行为不端。这是我在该字段为必填且为空时看到的内容：

![在此处输入图像描述](../Images/d56d2273d1249d63fbe4f906e559516c.png)

但是当这个字段被禁用时，它会在它周围保留一个红色边框：

![在此处输入图像描述](../Images/050cc8ddbfd9ba40c90d1d8e83b7a5ac.png)

当背景为绿色并被禁用时，也会发生同样的情况。

那么为什么会发生这种情况以及如何解决呢？

**UPD：**根据韩的回答，我很快更新了我的代码，但这仍然不起作用。

```
 private static void SetBackgroundColor(this Control control, Color color)
    {
        control.BackColor = color;
        foreach (Control childControl in control.Controls)
        {
            SetBackgroundColor(childControl, color);
        }
    } 
```

我大致是这样使用它的：

```
numericUpDown1.Enabled = true;
numericUpDown1.SetBackgroundColor(Color.Red);
numericUpDown1.Enabled = false;
numericUpDown1.SetBackgroundColor(SystemColors.InactiveBorder); 
```

尽管我浏览了 NUD 的所有子控件并在那里更改了背景颜色，但仍然可以在文本框周围找到该框架。还有其他想法吗？

干杯！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T13:43:25.497

NumericUpdown 是多个控件的组合。文本框位于 NUD 内部，并且有一个像素的偏移量。因此，您看到文本框的 BackColor 设置与外部 NUD 控件不同。您的代码段中看不到问题的真正原因，但此行为的重现是：

```
 numericUpDown1.BackColor = Color.Red;
        numericUpDown1.Enabled = false;
        numericUpDown1.Controls[1].BackColor = SystemColors.InactiveBorder; 
```

您需要修复设置嵌套控件的 BackColor 的代码，无论它看起来如何。可能是 Controls 集合上的一个 foreach。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-15T13:12:21.463

很抱歉碰到一个将近 5 年的问题。恕我直言，这是 NUD 控件中的错误。我目前正在将较旧的 Windows CE 应用程序移植到 Windows 10。我们对 CE 中的 NUD 控件没有任何问题，但现在它们都表现出与 trailmax 完全相同的问题。

我可以补充一点观察。当控件被禁用时，子控件的框架不会被刷新。背景颜色没有影响。之前在屏幕上显示的任何内容都会显示在 NUD 控件的内框上。在我们的应用程序中，我们使用了几个 TabPages。根据之前显示的屏幕，我们会出现损坏的帧，有时还会出现彩色帧。

我现在唯一的解决方法是在控件显示在屏幕上后启用和禁用它。正如我所说，我们的控件在 TabPages 上，所以我使用的是 tab selected 事件。由于我们有许多选项卡和许多 NUD 控件，从 5 到 20，我循环遍历所有 NUD 控件并执行以下两行：

```
 nudControl.enabled =  !nudControl.enabled
   nudControl.enabled =  !nudControl.enabled 
```

我不需要检查控件是否启用，我只需将其切换到相反的值，然后将其切换回来。在我们的应用程序中，它执行得非常快，我在屏幕上看不到任何视觉闪烁。同样，我们在任何给定的 TabPage 上都只有不到 20 个 NUD。

PS 我使用 StackOverflow 帖子中的代码获取所有子 NUD 控件： [如何获取特定类型（按钮/文本框）的 Windows 窗体窗体的所有子控件？](https://stackoverflow.com/questions/3419159/how-to-get-all-child-controls-of-a-windows-forms-form-of-a-specific-type-button)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-08T11:40:01.573

我遇到了同样的问题，结果证明这只是一个刷新/重绘问题。Label 设置为无效，但不是整个控件，所以强制刷新后，边框消失了。

或者只是隐藏并再次显示:-)

请参阅[NumericUpDown 背景颜色未按预期工作](https://stackoverflow.com/questions/10631788/numericupdown-backcolor-not-working-as-expected/)

哦，我只看过经典主题（不是我尝试了所有可能的主题，但肯定与 GUI 主题有关）。

# regex - 用于从日志文件中提取数据的 Shell 程序

> ID：13701793
> 
> 赞同：2
> 
> 时间：2012-12-04T11:24:12.543
> 
> 标签：regex, shell

我将编写一个 shell 脚本来检查我的应用程序生成的日志文件，我只需要从生成的日志中分离出函数名称和有关调用的最少信息。

日志文件格式为 - `0.0003 636488 +440 -> include_once(/var/www/public/const.php) /var/www/public/ajax_shop.php:2`

现在，我想从这一行中提取 - 在文件“ajax_shop.php”中的“2”行调用了“include_once”

在这种情况下，我应该如何在 shell 脚本中使用正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:34:10.237

使用 sed 的一种方法：

```
sed 's/.*-> \([^(]*\).*:\(.*\)/\1 was called at line \2/' logfile
include_once was called at line 2. 
```

\([^(]*\) => 这匹配直到遇到右括号。 [^(]* => 表示一系列字符，而不是'('。

使用 awk：

```
$ awk -F"[>(:]" '{print $2 " was called at line " $NF}' logfile
 include_once was called at line 2. 
```

awk 使用多个分隔符 >,( 和 :。使用它，只需打印第二个字段和最后一个字段就变得简单了。

# python - pexpect 和 shell 元字符（>、| 或 *）

> ID：13701797
> 
> 赞同：2
> 
> 时间：2012-12-04T11:24:24.540
> 
> 标签：python, ssh, pexpect, metacharacters

我现在很困惑。

**pexpect** [文档](http://pexpect.sourceforge.net/pexpect.html)说明如下：

```
Remember that Pexpect does NOT interpret shell meta characters such as
redirect, pipe, or wild cards (>, |, or *). This is a common mistake.
If you want to run a command and pipe it through another command then
you must also start a shell. For example::

child = pexpect.spawn('/bin/bash -c "ls -l | grep LOG > log_list.txt"')
child.expect(pexpect.EOF) 
```

但是，我正在查看一些使用`|`和`*`in 的旧代码`pexpect.sendline(some command | grep 'something')`。所以我开始测试这些命令，它们似乎都可以工作。还值得一提的是，我没有使用修改过的 pexpect 模块，它是 python 的普通旧 pexpect。

怎么来的？为什么**pexpect**提到**元字符不起作用**，而它显然这样做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:56:18.297

`pexpect.spawn`不解释 shell 元字符，但在 pexpect （可能是 shell）中运行的任何东西都清楚地做了：

```
child = pexpect.spawn('/bin/bash')
child.sendline('echo hello | cat') 
```

pexpect 只是将字符串传递给子进程；它不是在解释它。

# c - 使用 SQLITE_OPEN_CREATE 打开数据库时设置组可写

> ID：13701803
> 
> 赞同：1
> 
> 时间：2012-12-04T11:24:45.797
> 
> 标签：c, permissions, sqlite

当我用 . 创建一个新数据库时`sqlite3_open_v2(path, db3, SQLITE_OPEN_READWRITE | SQLITE_OPEN_CREATE, NULL)`，`-rw-r--r--`即使父文件夹有`drwxrwsr-x`.

有什么方法可以在没有`chmod`数据库文件的情况下为组创建可读的数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:25:43.450

SQLite 默认创建具有`0644`权限的数据库文件。这可以通过`SQLITE_DEFAULT_FILE_PERMISSIONS`在编译期间重新定义来改变。

您也可以在调用之前创建一个空文件`sqlite3_open*`。

# android - Android Touch 事件处理（框架）

> ID：13701805
> 
> 赞同：3
> 
> 时间：2012-12-04T11:24:49.040
> 
> 标签：android

我想了解如何在 Android 框架代码中处理触摸事件 - 从内核层到应用程序层的代码流。

`[kernel -> InputReader -> ... -> onTouchEvent(MotionEvent event)]`

还想知道在不同应用中有助于控制“滚动速度”的参数是什么？是触摸时的“压力”量，还是中获得的滚动偏移值`ACTION_SCROLL`？

# python - python中的服务器端如何处理流水线请求？

> ID：13701814
> 
> 赞同：0
> 
> 时间：2012-12-04T11:25:25.013
> 
> 标签：python, rest, httpwebrequest, pipeline

有人可以解释一下如何在 python（或任何其他脚本语言）的服务器上处理流水线请求吗？

假设我有由 iOS 客户端调用的 Python 中的 Web 服务。客户端将请求流水线化并将它们发送到服务器。如何在服务器上接收和处理这些请求并发送适当的响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:46:12.133

## HTTP 流水线

[Wikipedia](http://en.wikipedia.org/wiki/Http_pipelining)和[Mozilla](http://www-archive.mozilla.org/projects/netlib/http/pipelining-faq.html)有很好的流水线解释。下图基本上说明了一切。

![](../Images/98595505d413b8998abc32fdc5bcd92b.png)

通常（没有流水线），客户端向服务器发送请求并等待响应，然后再发送另一个请求。然而，使用流水线，客户端发送多个请求而不等待服务器的响应。

## 那么，我的服务器必须做些什么来实现流水线？

其实，不多。为了支持流水线，服务器所要做的就是确保“在请求之间不会丢弃网络缓冲区”（维基百科）。所有 HTTP/1.1 服务器都支持流水线。

[客户端负责](http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html#sec8.1.2.2)大部分错误处理（重新发送数据包等）以及实现流水线带来的其他麻烦。

# jquery - 如何向上显示jquery自动完成列表

> ID：13701816
> 
> 赞同：2
> 
> 时间：2012-12-04T11:25:31.413
> 
> 标签：jquery, jquery-ui, jquery-autocomplete

当 jquery 自动完成列表出现在单元格内的文本输入的任何网格的最底部行时，如何向上显示 jquery 自动完成列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:33:40.257

您可以指定[位置](http://api.jqueryui.com/autocomplete/#option-position)选项：

```
$("#yourInput").autocomplete({
    position: {
        my: "left bottom",
        at: "left top"
    }
}); 
```

# java - java中int为什么会自动变成Integer？

> ID：13701818
> 
> 赞同：1
> 
> 时间：2012-12-04T11:25:36.923
> 
> 标签：java, wrapper

java - 当我将原始类型 int 放入 java 中的 ArrayList 时，为什么原始类型 int 会自动更改为对象 Integer？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T11:26:56.033

`Autoboxing`自动将`primitive`类型转换为相应的`wrapper`对象。其背后的原因是您不能将原语放入集合中。在**Java 5**出现之前，您必须自己执行此操作，但现在它会自动为您处理。

有关更多详细信息，请参见此处的链接：http: [//docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T11:27:50.847

它`auto-boxing`在java中被调用。

> 正如任何 Java 程序员都知道的那样，您不能将 int（或其他原始值）放入集合中。集合只能保存对象引用，因此您必须将原始值装入适当的包装类（在 int 的情况下为 Integer）。当你从集合中取出对象时，你会得到你放入的 Integer；如果需要 int，则必须使用 intValue 方法对 Integer 进行拆箱。所有这些装箱和拆箱都是一种痛苦，并且会使您的代码混乱。自动装箱和拆箱功能使过程自动化，消除了痛苦和混乱。

[关联](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T11:28:04.993

ArrayList 只能存储对象。int 是一种原始数据类型，因此它被“自动装箱”为等效的对象。这只发生在 Java 5 之前，在此之前您必须自己装箱 Integer。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T11:28:23.763

自动装箱是因为集合只能容纳对象而不是基元。如果您需要一个 int 原语，则必须在读出时使用 intValue() 方法将其拆箱。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T11:35:25.703

请阅读有关引用类型和值类型的更多信息以更好地理解这一点。

ArrayList 仅保存对对象的引用。它本身不保存值。

由于 int 是一种值类型，因此它没有引用。当您将 int 转换为 Integer 时，您会在内存中为 Integer 创建一些空间，该 Integer 包含一个 int 值，以及对您创建的该 Integer 对象的引用。

现在，您的 ArrayList 只需保存您拥有的 Integer 对象的地址，而不是保留整数本身。

可以这样想：ArrayList 中的一个元素占用内存块：200。您的 Integer 对象位于内存块：400。在内存块 200 中，您保留的不是整数的值，而是 400 的内存地址。

原因，我不知道。我猜他们只是决定这样做是为了保持简单。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-04T11:32:17.430

这是 java 1.5 中引入的一个 java 语言特性。它被称为*自动装箱*。

粗略地说，它在 java 原始类型与其对应的包装类类型之间进行转换。编译器检测何时需要（并且可能）收件箱（原始到包装器）或出箱（包装器到原始件），并将表达式扩展为正确的字节码。

因此，在幕后，`Integer`当您添加`int`.

# javascript - 无法在折线图中动态显示数据

> ID：13701819
> 
> 赞同：0
> 
> 时间：2012-12-04T11:25:40.323
> 
> 标签：javascript, jquery

我正在将 google-api 用于折线图。在 jsp 页面中，我以这种方式实现：但无法获取值，我的查询运行良好但无法动态运行，实际上请点击此链接：[输入链接描述在这里](https://google-developers.appspot.com/chart/interactive/docs/gallery/linechart)

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
<% 
Connection con = null;
Statement stmt = null;

con = LoginDB.createConnection();
stmt = con.createStatement();
String sql="select Day(date) as regDate,count(name) as NoOfReg from info where DATE(date) > DATE_SUB(curdate(),interval 365 day)group by regDate order by date asc;";
ResultSet rs = stmt.executeQuery(sql);  
%>

<% while(rs.next()){ %>
<script type="text/javascript">
google.load("visualization", "1", {packages:["corechart"]});
google.setOnLoadCallback(drawChart);
function drawChart() {
  var data = google.visualization.arrayToDataTable([
    ['regDate', 'Registration'],
    ['<%= rs.getString(1)%>',  <%= rs.getString(2)%>]
  ]);

  var options = {
    title: 'No of Registration per Day'
  };

  var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
  chart.draw(data, options);
}
</script> 
```

任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:40:36.300

**Try this**

```
 <script type="text/javascript">
            var data = "";
            <% while(rs.next()){ %>
                  data += ""+['<%= rs.getString(1)%>',  <%= rs.getString(2)%>]+","
            <% } %>
    </script>

    <script type="text/javascript">
            google.load("visualization", "1", {packages:["corechart"]});
            google.setOnLoadCallback(drawChart);
            function drawChart() {
                    var data = google.visualization.arrayToDataTable([
                                      ['regDate', 'Registration'],
                                      data
                               ]);

                    var options = {
                            title: 'No of Registration per Day'
                            };

                    var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
                    chart.draw(data, options);
            }
    </script> 
```

# javascript - 带有警报的 onchange 在 ie 中不起作用

> ID：13701820
> 
> 赞同：3
> 
> 时间：2012-12-04T11:25:42.543
> 
> 标签：javascript, file, internet-explorer, tags, onchange

已创建基于 javascript 的标记 ( `type ='file'`)

并在该标签中添加一个属性

该属性名称`onchange`，我将分配警报

**但是在 Internet Explorer 中选择新文件时不会出现警报。**

```
choicefile.setAttribute("onChange", "alert('test')"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:33:01.843

你可以做两种方式，

1..使用HTML，`onchange`内联添加事件

```
<input type="file" id="file_select" name="file_select" value="" onchange="alert('File selected')" /> 
```

演示：http: [//jsfiddle.net/CS3xJ/1/](http://jsfiddle.net/CS3xJ/1/)

2..使用JS，

```
 choicefile.onchange = function(){
     alert('File selected')
  } 
```

演示：http: [//jsfiddle.net/CS3xJ/2/](http://jsfiddle.net/CS3xJ/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:27:41.973

试试这个：

```
choicefile.onchange = function() {alert("test");}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:31:12.377

您的代码似乎正确。IE 的特殊之处在于，如果您设置更高的安全级别，则在加载网站时需要**允许脚本和 activeX内容。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T11:32:48.273

和之间其实是有区别`setAttribute`的`attachEvent`。这是一个使用`attachEvent`(for IE) 和`addEventListener`(standards) 添加事件的示例。

此外，事件处理程序并不是一个函数，而是一个字符串：

```
var eventHandler = function () {
    alert("Test");
}

if (choicefile.addEventListener) {
  choicefile.addEventListener('change', eventHandler , false);
} else if (choicefile.attachEvent)  {
  choicefile.attachEvent('onchange', eventHandler );
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-04T21:53:37.013

试试 onclick="javascript:alert('test');" 而不是onchange。旧的ie 版本和兼容模式对onchange 的支持不是很好。

# android - 在 removeProximityAlert 后 GPS 图标仍显示在 Android 中

> ID：13701822
> 
> 赞同：0
> 
> 时间：2012-12-04T11:25:48.137
> 
> 标签：android, gps

为什么当我已经删除接近警报时 GPS 图标仍然显示在通知栏中

> 删除ProximityAlert

我给了与 AddProximityAlert 相同的 PendingIntent，Proximity Alert 不再起作用，但 GPS 图标没有消失。

这是否意味着设备仍会尝试获取我的位置并耗尽电池电量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:52:52.337

试试这个来关闭你的图标

```
 locationManagerGPS.removeUpdates(GPSLocationListener); 
```

然后再次检查

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T04:05:29.763

解决方案是将 PendingIntent 的标志更改为 FLAG_UPDATE_CURRENT

# c# - 将两个表中的数据插入一个c#

> ID：13701823
> 
> 赞同：0
> 
> 时间：2012-12-04T11:26:07.773
> 
> 标签：c#, asp.net, sql-server, insert

我有 3 张桌子。我同时创建一个任务并上传一个资源。数据保存在两张表中——一张用于任务信息，一张用于资源。

我正在尝试将两个表的主键插入到第三个表中。第一个表被调用`Task`并`task_id`作为主键，`task_name`并且`task_description`. 第二个是 -`Resource`和`resource_id`作为主键和`resource_name`. 两个 id 都有自动增量选项，所以当我在表中输入数据时，我不填写 id。

我想插入`task_id`并`resource_id`进入第三个名为`Task_resource`. 它有一个主键`task_resource_id`（同样带有自动增量选项）。

问题是怎么做，因为我不知道身份证？

这样做的原因是一个任务可以有很多资源，在第三个表中我可以组合它们，因此搜索它们（例如类似的东西`SELECT data from the other 2 tables WHERE task_id=1`）。

我有一个 asp.net Web 应用程序和一个 mssql 数据库。我用c#。

我知道一个可能的解决方案可能是将一个名为的列插入`task_id`到`Resource`引用`task_id`in的表中`Task`。

但是话又说回来，如何插入该ID，因为我不知道？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:34:53.110

在第一个表上执行插入，然后从查询中返回 scope_identity()。那么当你插入第二个表时你有ID吗？或者，如果您使用的是 LINQ

```
//create the object
Task task = new Task{

task_name = src.taskName,
task_description = src.taskDescription

}

context.Tasks.InsertOnSubmit(task);
context.SubmitChanges();

//do second insert
Int32 taskIDFromLastInsert = task.task_id;

Resource res = new Resource{

resource_name = scr.ResourceName,
task_id = taskIDFromLastInsert // optional if you want to change your structure

} 
```

context.Resources.InsertOnSubmit(res); context.SubmitChanges();

Int32 resourceIDFromLastInsert = resource_id;

如果您真的想插入第三张表，您现在拥有两个 ID

这是一种引用数据的干净方式

插入后对数据运行查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:30:19.133

你应该使用

[SET IDENTITY_INSERT](http://sqlserverplanet.com/dba/using-identity_insert)

# android - 如何在 ListView 上捕获 onClick（我不想要 onItemClickListener）

> ID：13701827
> 
> 赞同：0
> 
> 时间：2012-12-04T11:26:18.980
> 
> 标签：android, listview, adapter, onclicklistener

如何`onClick`赶上`ListView`？

即使列表中没有项目，我也需要捕获点击事件。我试图将 onClickListener 放在 ListView 的父视图上，但 ListView 吸收了该事件并且不让我知道。

我怎样才能捕捉到并处理这个事件？

请帮我，

谢谢，丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:36:10.083

如果您不想要 onitemclick，一种简单而愚蠢的方法

```
<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

<ListView 
    android:layout_width="match_parent"
    android:layout_height="match_parent">
</ListView>

<ImageView
    android:layout_width="match_parent"
    android:layout_height="match_parent">
</ImageView>

</RelativeLayout> 
```

.

```
 then put onClickListener to ImageView 
```

:P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:29:21.997

尝试创建扩展 ListView 的自定义组件并覆盖 onclick 方法。

# rest - 用于变异实体的 RESTful URL

> ID：13701828
> 
> 赞同：3
> 
> 时间：2012-12-04T11:26:26.613
> 
> 标签：rest, hateoas

前段时间我开发了一个网络应用程序来许可我们的软件。这有客户、帐户、用户和许可证。许可证分配给用户并使用序列号激活。许可证是作为处理采购订单的输出而创建的，即没有任何直接发布新许可证的方法。

我目前正在阅读“RESTful Web Services”并考虑如何使其成为 RESTful（HATEOAS 也是）。

大多数 URL 我都清楚，但是许可证需要一些有趣的操作。许可证的基本 URL 将是`/licence/{licenceID}`.

*   为用户分配可用许可证（由支持人员完成）
*   释放用户的许可证（将其放回可用许可证池中）
*   使用序列号激活许可证，并生成密钥作为回报
*   重新激活许可证
*   将许可证续订到新的到期日期
*   禁用许可证：仅单向，不可撤销。许可证仍然存在

现在，在 REST 中，我只能使用标准方法，并且不能在 URL 中嵌入“分配”操作。我在想的是挑选出我想要影响的许可证部分。这给出了： -

*   列表：`GET /licences/`
*   得到：`GET /licences/{licenceID}`
*   分配：`POST /licences/{licenceID}/assignee/{userID}`
*   发布：`DELETE /licences/{licenceID}/assignee`
*   启用：`POST /licences/{licenceID}/serialNumber/{serialNumber}`
*   停用：`DELETE /licences/{licenceID}/serialNumber`
*   更新：`POST /licences/{licenceID}/expires`
*   禁用：`DELETE /licences/{licenceID}/enabled`

我的问题是： -

*   这个 URL 方案是“正确”或明智的做法吗？
    *   或者我应该有一个“许可证分配”和“许可证激活”的集合（例如`/assignments/{licenceId}/{userId}`：）
*   我是否遗漏了一些基本的东西（当我读完这本书时可能会清楚）
*   参数（userId 和 serialNumber）应该作为路径参数还是查询参数？
    *   {userId} 指代系统上的用户，因此可以是路径参数
    *   {serialNumber} 是在客户端（Java Swing）上根据自己的信息生成的（没有序列号的中央数据库）。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T14:40:26.973

*   列表：`GET /licences/`

很好，虽然我会用`GET /licences`自己:)

*   得到：`GET /licences/{licenceID}`

看起来不错

*   分配：`POST /licences/{licenceID}/assignee/{userID}`

我建议这会适得其反，除非许可证可以分配给多个被许可人。相反，我建议

```
PATCH /licences/{licenceID}
{ assignee={userID} } 
```

或者

```
PUT /licences/{licenceID}/assignee
{userID} 
```

选择哪一个应该取决于许可证的受让人多久更改一次。如果经常使用，则使用后者，如果不经常使用，请使用前者。

*   发布：`DELETE /licences/{licenceID}/assignee`

好的。如果你使用它，那么你应该使用前面给出的两个存储选项中的第二个。如果您选择第一个，则类似于：

```
PATCH /licences/{licenceID}
{ assignee=NULL } 
```

*   启用：`POST /licences/{licenceID}/serialNumber/{serialNumber}`
*   停用：`DELETE /licences/{licenceID}/serialNumber`
*   更新：`POST /licences/{licenceID}/expires`

您可以将这三个视为您决定受让人的方式，以使您的客户更轻松。

*   禁用：`DELETE /licences/{licenceID}/enabled`

我建议：

```
> DELETE /licences/{licenceID}
< 201 Created
< Location: /disabled-licenses/{licenseID} 
```

然后，URI 命名空间 /licenses 将映射到您的域模型`licenses WHERE valid==true`，而 /disabled-licenses 将映射到`licenses WHERE valid==false`. 这没什么不好。然后可以在 HTTP 级别（即通过 URI 路径）而不是在应用程序级别（通过检查数据库中的字段值）限制对无效许可证的访问。

我的问题是： -

*   这个 URL 方案是“正确”或明智的做法吗？
    *   或者我应该有一个“许可证分配”和“许可证激活”的集合（例如`/assignments/{licenceId}/{userId}`：）

你建议的方案大多是好的，有一些改动。

*   我是否遗漏了一些基本的东西（当我读完这本书时可能会清楚）

不，不是。

*   参数（userId 和 serialNumber）应该作为路径参数还是查询参数？
    *   {userId} 指代系统上的用户，因此可以是路径参数
    *   {serialNumber} 是在客户端（Java Swing）上根据自己的信息生成的（没有序列号的中央数据库）。

同样，如果许可证只有一个用户 ID 和一个序列号，那么它们的值就是资源属性和/或子资源。如果建模为子资源，它们属于 URI，如果是属性，则属于主体。

# git - 从 Git 中删除文件

> ID：13701830
> 
> 赞同：1
> 
> 时间：2012-12-04T11:26:32.277
> 
> 标签：git

> **可能重复：**
> [git - 从存储库中删除文件](https://stackoverflow.com/questions/2730411/git-remove-file-from-the-repository)

我错误地将一个大文件（900MB）推送到 git repo 中。现在我想从那个特定的提交中删除那个文件。否则拉动会花费太多时间。请帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:47:32.750

There is a very good blog which explains how to identify very large files checked into the git repository and rewrite the history to delete them.

[http://naleid.com/blog/2012/01/17/finding-and-purging-big-files-from-git-history/](http://naleid.com/blog/2012/01/17/finding-and-purging-big-files-from-git-history/)

its worked!

# yii - Yiiii - 索引文件

> ID：13701835
> 
> 赞同：0
> 
> 时间：2012-12-04T11:26:40.973
> 
> 标签：yii

我想分析 Yii 框架的代码...但是我找不到索引文件 :E 它在哪里，如果 .htaccess 不包含任何特定规则，服务器如何知道要搜索什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T14:03:52.260

Yii 是一个框架，而不是网站。要查看基本的 webapp，请创建它（观看来自 @eskimo 的[链接）](http://www.yiiframework.com/doc/guide/1.1/en/quickstart.first-app)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T12:06:10.593

您首先必须设置框架（在命令提示符中）。 [这是完成此操作的相当直接的指南](http://yiitutorials.net/easy/step-by-step-guide-setup-the-yii-framework)，[这里是来自 Yii 网站的指南](http://www.yiiframework.com/doc/guide/1.1/en/quickstart.first-app)。

设置框架后，您将拥有一个 index.php 文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T06:07:25.467

`enter code here`在 linux 终端类型中

> $ sudo /path/to/yii/framework/yiic webapp /var/www/installationfolder

或者干脆阅读自述文件

在已安装的文件夹中，您会找到 index.php

无论如何，这是代码

```
<?php   

// change the following paths if necessary

 $yii=dirname(__FILE__).'/../yii/framework/yii.php';
$config=dirname(__FILE__).'/protected/config/main.php';

// remove the following lines when in production model

 defined('YII_DEBUG') or define('YII_DEBUG',true);

// specify how many levels of call stack should be shown in each log message

 defined('YII_TRACE_LEVEL') or define('YII_TRACE_LEVEL',3);

require_once($yii);
Yii::createWebApplication($config)->run();

?> 
```

# jquery - jQuery + jQuery Mobile = 调用处理程序两次？

> ID：13701836
> 
> 赞同：0
> 
> 时间：2012-12-04T11:26:46.203
> 
> 标签：jquery

我在我的 Web 应用程序中插入了 jQuery (1.8.2) 和 jQuery mobile (1.1.1)。现在，如果我创建这个简单的处理程序：

```
$('.pulsante-menu').click(function () {
    console.log("ooo");
}); 
```

然后单击链接，我看到该控制台消息两次！我该如何解决？

[这](http://jsfiddle.net/fBjgu/9/)是我的代码！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T14:00:26.837

将脚本移动到`<head>`元素中或单独的 JavaScript 文件中。或尝试使用[pageinit](http://jquerymobile.com/demos/1.0/docs/api/events.html)。[jQuery.com 上的这篇文章](http://forum.jquery.com/topic/jquery-jquerymobile-document-ready-called-twice)解释了这样做的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:35:43.850

您在小提琴中定义了两次处理程序，一次在 JS 部分中，一次在 HTML 部分的脚本标记中。删除其中一个，它应该可以工作。

检查我更新的[小提琴](http://jsfiddle.net/TVUNZ/)。

HTML：

```
<head>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js"></script>
  <script src="http://jquerymobile.com/demos/1.1.1/js/jquery.mobile-1.1.1.js" type="text/javascript"></script>
</head>
<body>
  <a href="#" class="prova">Link</a>
</body> 
```

JavaScript：

```
$('.prova').click(function () {
    console.log("ooo");
    return false; // stopPropagation and preventDefault
}); 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:39:51.993

你可以试试这样的。

```
$('.pulsante-menu').click(function (e) {
    e.stopPropagation();
    console.log("ooo");
}); 
```

# jquery - 当我使用 PIE.htc 时，在 IE 中采用背景默认值

> ID：13701837
> 
> 赞同：0
> 
> 时间：2012-12-04T11:26:50.980
> 
> 标签：jquery, css, css3pie

我在我的项目中使用 PIE.htc 文件来支持 IE 中的边框半径和框阴影等 css3 属性。

但我的问题是，当我添加 PIE.htc 文件时，IE8 会自动采用背景颜色：#686C5A。我使用这种颜色作为框阴影颜色。但它占用 div#main 的整个区域。而不是框阴影。

```
#main{
    width: 1005px;
    margin-top:10px;
    margin-bottom:10px;
    margin-left:auto;
    margin-right:auto;
    border: 1px solid;
    border-radius: 20px;
    box-shadow:0 0 5px 0 #686C5A;
    behavior: url('PIE.htc');
} 
```

这种颜色扩散到 div#main。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T04:46:23.710

这是一个已知的错误，请参阅：[https ://github.com/lojjic/PIE/issues/12](https://github.com/lojjic/PIE/issues/12)

你必须要么给你的元素一个不透明的背景，要么在 IE 中不使用 box-shadow。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:22:19.630

尝试为主 div 添加背景颜色...。您没有提到主 DIV 的背景颜色...因为 IE 框阴影的行为是这样的...希望这对您有用..

# php - 使用 php 获取 traceroute 跃点列表

> ID：13701842
> 
> 赞同：0
> 
> 时间：2012-12-04T11:27:18.243
> 
> 标签：php, traceroute

`shell_exec("traceroute IPaddress)`返回`traceroute to IPaddress (IPaddress), 30 hops max, 40 byte packets`

如何检索实际的跃点列表，以便知道问题发生在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T12:07:22.560

这些消息应该被写入`stderr`而不是常规的`stdout`，所以我不太确定为什么你会看到它们出现在输出中。

而不是`shell_exec()`我建议使用`exec()`，因为它同时捕获了输出和进程的返回码：

```
exec('traceroute example.com 2>&1', $out, $code);
if ($code) {
    die("An error occurred while trying to traceroute: " . join("\n", $out);
}
print_r($out); 
```

为了稍微加快命令速度，您可以`-n`在运行时使用该选项，`traceroute`以避免必须对中间跃点进行 DNS 查找。

请注意，运行`traceroute`可能需要一段时间；如果您在命令行上运行它，您有时会看到其中包含`* * *`的行，这可能需要很长时间！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:34:23.590

使用 exec 并查看它的第二个参数：

```
string exec ( string $command [, array &$output [, int &$return_var ]] ) 
```

例子 ：

```
<?php

exec('traceroute test.com -m 2', $output);
var_dump($output); 
```

# awt - 调用 repaint(x,y,width,height) 后 JPanel 变得清晰

> ID：13701850
> 
> 赞同：2
> 
> 时间：2012-12-04T11:27:50.380
> 
> 标签：awt

这是我的代码的一部分：

```
public final class ImagePanel extends JPanel implements SwingConstants, Printable ,MouseListener {

private static final long serialVersionUID = 1L;
private static final int IMAGE_LEFT_INDENT = 30;
private Image image;
private int verticalAlignment = CENTER;
private int horizontalAlignment = CENTER;
private int image_dy;
private Color color;
private int vectorImageIndex = 0;
public int tempIndex;
   @Override
   public Dimension getPreferredSize() {
    if (image == null) {
        return super.getPreferredSize();
    } else {
        return new Dimension(image.getWidth(this) + 100, image.getHeight(this) + 100);
    }
}

   @Override
   public void update(Graphics g)
  {

  }

  @Override
  protected void paintComponent(Graphics g) {
     super.paintComponent(g);

    if (image == null) {
        return;
    }

    Insets insets = getInsets();
    int x = insets.left;
    int y = insets.top;

    int w = getWidth() - insets.left - insets.right;
    int h = getHeight() - insets.top - insets.bottom;

    int src_w = image.getWidth(null);
    int src_h = image.getHeight(null);

    double scale_x = ((double) w) / src_w;
    double scale_y = ((double) h) / src_h;

    double scale = Math.min(scale_x, scale_y);

    int dst_w = (int) (scale * src_w);
    int dst_h = (int) (scale * src_h);

    int dx = x + (w - dst_w) / 2;
    if (horizontalAlignment == LEFT) {
        dx = x;
    } else if (horizontalAlignment == RIGHT) {
        dx = x + w - dst_w;
    }

    int dy = y + (h - dst_h) / 2;
    if (verticalAlignment == TOP) {
        dy = y;
    } else if (verticalAlignment == BOTTOM) {
        dy = y + h - dst_h;
    }

    image_dy = dy;       

    if (previousRect != null) {
         g.setColor(color);
        g.drawRect((previousRect.x + getInsets().left), dy, previousRect.width, previousRect.height);
    } else {
        g.drawImage(image, dx, dy, src_w, src_h, null);
        g.setColor(Color.YELLOW);
        for (Rectangle rect : FontExtractor.vectorRectangle) {
            g.drawRect((rect.x + getInsets().left), dy, rect.width, rect.height);
        }
    }
}
  public void mouseClicked(MouseEvent e) {
    if (SwingUtilities.isLeftMouseButton(e)) {
        int click_x = e.getX();
        int click_y = e.getY();
        for (Rectangle rect : FontExtractor.vectorRectangle) {
            if (((rect.x + getInsets().left) <= click_x && (rect.x + getInsets().left + rect.width) >= click_x) && (image_dy <= click_y && (image_dy + rect.height) >= click_y)) {
                if (previousRect != null) {
                    color = Color.YELLOW;
                    System.out.println("repaint 1");
                    repaint((previousRect.x + getInsets().left), image_dy, previousRect.width + 1, previousRect.height + 1);
                }
                previousRect = rect;
                color = Color.RED;
                System.out.println("repaint 2");
                repaint((rect.x + getInsets().left), image_dy, rect.width + 1, rect.height + 1);
                hasBreakCommandExecuted = true;
                break;
            }
        }
        if ((!hasBreakCommandExecuted) && (previousRect != null)) {
            color = Color.YELLOW;
            System.out.println("repaint 3");
            repaint((previousRect.x + getInsets().left), image_dy, previousRect.width + 1, previousRect.height + 1);
            previousRect = null;
        } else {
            hasBreakCommandExecuted = false;
        }
    }
} 
```

}

我在这里做错了吗，每次当我调用 repaint(Dimension) 时，它调用 PaintComponent(Graphics g) 并首先清除 jpanel 背景。请指出问题出在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T20:41:03.393

这就是 AWT/Swing 的工作原理。每次调用重绘时，AWT/Swing 都会清除该区域并开始从底部组件一直到顶部绘制该区域。现在，如果您的机器速度较慢，您实际上可以看到这种情况发生，这称为闪烁。为了避免在 Swing 中闪烁，请尝试 JPanel.setDoubleBuffered(true)。

# git - 如何查看一个分支的提交和提交时间

> ID：13701851
> 
> 赞同：0
> 
> 时间：2012-12-04T11:27:49.820
> 
> 标签：git

我有很多分支，我不确定哪一个包含我需要的功能。我需要的是一种查看特定分支提交的方法，例如，我想查看 master 上的所有提交和提交时间，或者在暂存时查看所有提交，但只针对一个分支。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:43:29.533

我相信您可以使用 git-log 以及所需的分支来做到这一点，如下所示：

```
git log BRANCH 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:00:37.603

1.  如果你有太多的分支，你应该做点什么。丢弃那些你不知道它们已经是什么的东西，将它们与已完成的功能合并，计划完成未完成的功能，重命名它们以便你知道什么是什么等等。
2.  `git log`仅显示可从参数访问的提交，因此如果您说`git log master`，您只会看到属于`master`. 同样`git log`，只会向您显示可从当前签出的分支访问的提交。
3.  Git 提交不在分支上。它们只是形成一棵树，分支指向该树中的一些提交。如果提交是分支指向的提交或其祖先，则可以从分支访问提交。但我怀疑这就是你真正想要的。

# cookies - abcpdf HttpAdditionalHeaders cookie

> ID：13701855
> 
> 赞同：2
> 
> 时间：2012-12-04T11:28:08.773
> 
> 标签：cookies, http-headers, abcpdf

嗨，我正在尝试在使用 abcpdf 生成 pdf 文件时将 cookie 添加到 http 标头。到目前为止我所做的是基于文档：

[http://www.websupergoo.com/helppdf9net/default.htm?page=source%2F5-abcpdf%2Fxhtmloptions%2F2-properties%2Fhttpadditionalheaders.htm](http://www.websupergoo.com/helppdf9net/default.htm?page=source%2F5-abcpdf%2Fxhtmloptions%2F2-properties%2Fhttpadditionalheaders.htm)

从我的浏览器请求将页面转换为 PDF 时，标题为：

```
Connection: keep-alive
Accept: text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01
Accept-Encoding: gzip, deflate
Accept-Language: en-ie
Cookie: __utma=111872281.2030591713.1334325919.1348754241.1349943306.47; __utmz=111872281.1334325919.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); CurrentClient=AMF; UserHasMultipleClients=False; favFunds=%5B%7B%22id%22%3A57%2C%22alias_id%22%3A1690%7D%2C%7B%22id%22%3A794%2C%22alias_id%22%3Anull%7D%2C%7B%22id%22%3A818%2C%22alias_id%22%3Anull%7D%2C%7B%22id%22%3A21%2C%22alias_id%22%3Anull%7D%5D; favComparisons=%5B%7B%22selectedFunds%22%3A%5B%7B%22id%22%3A%22794%22%2C%22alias%22%3A%22null%22%7D%2C%7B%22id%22%3A%2217%22%2C%22alias%22%3A%22null%22%7D%2C%7B%22id%22%3A%22593%22%2C%22alias%22%3A%22old%22%7D%2C%7B%22id%22%3A%22593%22%2C%22alias%22%3A%221606%22%7D%5D%2C%22selectedIndexes%22%3A%5B%7B%22id%22%3A%2224002259%22%2C%22alias%22%3A%22null%22%7D%5D%2C%22timePeriosSelection%22%3A%7B%22dateOne%22%3A%2223-11-2011%22%2C%22dateTwo%22%3A%2223-11-2012%22%7D%2C%22defaultTimePeriodSelection%22%3A%7B%22OneYear%22%3Atrue%2C%22ThreeYears%22%3Afalse%2C%22FiveYears%22%3Afalse%7D%7D%2C%7B%22selectedFunds%22%3A%5B%7B%22id%22%3A%22774%22%2C%22alias%22%3A%22null%22%7D%2C%7B%22id%22%3A%22215%22%2C%22alias%22%3A%22null%22%7D%5D%2C%22selectedIndexes%22%3A%5B%7B%22id%22%3A%2224002259%22%2C%22alias%22%3A%22null%22%7D%5D%2C%22timePeriosSelection%22%3A%7B%22dateOne%22%3A%2223-11-2011%22%2C%22dateTwo%22%3A%2223-11-2012%22%7D%2C%22defaultTimePeriodSelection%22%3A%7B%22OneYear%22%3Atrue%2C%22ThreeYears%22%3Afalse%2C%22FiveYears%22%3Afalse%7D%7D%2C%7B%22selectedFunds%22%3A%5B%7B%22id%22%3A%22215%22%2C%22alias%22%3A%22null%22%7D%5D%2C%22selectedIndexes%22%3A%5B%7B%22id%22%3A%2224002259%22%2C%22alias%22%3A%22null%22%7D%5D%2C%22timePeriosSelection%22%3A%7B%22dateOne%22%3A%2223-11-2011%22%2C%22dateTwo%22%3A%2223-11-2012%22%7D%2C%22defaultTimePeriodSelection%22%3A%7B%22OneYear%22%3Atrue%2C%22ThreeYears%22%3Afalse%2C%22FiveYears%22%3Afalse%7D%7D%5D
Host: localhost:63706
Referer: http://localhost:63706/
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:15.0) Gecko/20100101 Firefox/15.0.1
X-Requested-With: XMLHttpRequest 
```

当请求来自 abcpdf 时，标头为：

```
Connection: keep-alive
Keep-Alive: 115
Accept: text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01
Accept-Charset: ISO-8859-1, utf-8; q=0.7, *; q=0.7
Accept-Encoding: gzip, deflate
Accept-Language: en-us, en; q=0.5
Host: localhost:63706
Referer: http://localhost:63706/
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:2.0.1) Gecko/ /2.0.1
X-Requested-With: XMLHttpRequest 
```

如您所见，它缺少 cookie。所以我手动将以下内容添加到标题中（abcpdf 发送请求之前的 theDoc.HtmlOptions.HttpAdditionalHeaders 值）

```
Cookie: __utma=111872281.2030591713.1334325919.1348754241.1349943306.47; __utmz=111872281.1334325919.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); CurrentClient=AMF; UserHasMultipleClients=False; favFunds=%5B%7B%22id%22%3A57%2C%22alias_id%22%3A1690%7D%2C%7B%22id%22%3A794%2C%22alias_id%22%3Anull%7D%2C%7B%22id%22%3A818%2C%22alias_id%22%3Anull%7D%2C%7B%22id%22%3A21%2C%22alias_id%22%3Anull%7D%5D; favComparisons=%5B%7B%22selectedFunds%22%3A%5B%7B%22id%22%3A%22794%22%2C%22alias%22%3A%22null%22%7D%2C%7B%22id%22%3A%2217%22%2C%22alias%22%3A%22null%22%7D%2C%7B%22id%22%3A%22593%22%2C%22alias%22%3A%22old%22%7D%2C%7B%22id%22%3A%22593%22%2C%22alias%22%3A%221606%22%7D%5D%2C%22selectedIndexes%22%3A%5B%7B%22id%22%3A%2224002259%22%2C%22alias%22%3A%22null%22%7D%5D%2C%22timePeriosSelection%22%3A%7B%22dateOne%22%3A%2223-11-2011%22%2C%22dateTwo%22%3A%2223-11-2012%22%7D%2C%22defaultTimePeriodSelection%22%3A%7B%22OneYear%22%3Atrue%2C%22ThreeYears%22%3Afalse%2C%22FiveYears%22%3Afalse%7D%7D%2C%7B%22selectedFunds%22%3A%5B%7B%22id%22%3A%22774%22%2C%22alias%22%3A%22null%22%7D%2C%7B%22id%22%3A%22215%22%2C%22alias%22%3A%22null%22%7D%5D%2C%22selectedIndexes%22%3A%5B%7B%22id%22%3A%2224002259%22%2C%22alias%22%3A%22null%22%7D%5D%2C%22timePeriosSelection%22%3A%7B%22dateOne%22%3A%2223-11-2011%22%2C%22dateTwo%22%3A%2223-11-2012%22%7D%2C%22defaultTimePeriodSelection%22%3A%7B%22OneYear%22%3Atrue%2C%22ThreeYears%22%3Afalse%2C%22FiveYears%22%3Afalse%7D%7D%2C%7B%22selectedFunds%22%3A%5B%7B%22id%22%3A%22215%22%2C%22alias%22%3A%22null%22%7D%5D%2C%22selectedIndexes%22%3A%5B%7B%22id%22%3A%2224002259%22%2C%22alias%22%3A%22null%22%7D%5D%2C%22timePeriosSelection%22%3A%7B%22dateOne%22%3A%2223-11-2011%22%2C%22dateTwo%22%3A%2223-11-2012%22%7D%2C%22defaultTimePeriodSelection%22%3A%7B%22OneYear%22%3Atrue%2C%22ThreeYears%22%3Afalse%2C%22FiveYears%22%3Afalse%7D%7D%5D 
```

这是完整的代码：

```
public MemoryStream HtmlToPdf(Uri pdfUrl, HttpCookieCollection cookies, bool landscape)
{
    var pdfStream = new MemoryStream();
    var theDoc = new Doc();
    if (landscape)
    {
        // apply a rotation transform
        double w = theDoc.MediaBox.Width;
        double h = theDoc.MediaBox.Height;
        double l = theDoc.MediaBox.Left;
        double b = theDoc.MediaBox.Bottom;
        theDoc.Transform.Rotate(90, l, b);
        theDoc.Transform.Translate(w, 0);
        // rotate our rectangle
        theDoc.Rect.Width = h;
        theDoc.Rect.Height = w;
    }

    theDoc.HtmlOptions.Engine = EngineType.Gecko;
    theDoc.HtmlOptions.Timeout = 60000;
    theDoc.HtmlOptions.UseScript = true;
    theDoc.HtmlOptions.OnLoadScript = "(function(){window.ABCpdf_go = false; setTimeout(function(){window.ABCpdf_go = true;}, 1000);})();";
    var url = Uri.UnescapeDataString(pdfUrl.ToString());

    if (cookies.Count > 0)
    {
        //send copy of cookies from original request
        var additionalHeadersString = "Cookie: ";
        foreach (var key in cookies.AllKeys)
        {
            if (!cookies.AllKeys[0].Equals(key)) //is NOT first element in cookie collection
            {
                additionalHeadersString += "; ";
            }
            additionalHeadersString += key + "=" + cookies[key].Value;
        }
        additionalHeadersString += "\r\n";
        theDoc.HtmlOptions.HttpAdditionalHeaders = additionalHeadersString;
        theDoc.HtmlOptions.NoCookie = true;
        theDoc.HtmlOptions.HostWebBrowser = false;
    }

    //send request
    var pageRef = theDoc.AddImageUrl(url, true, 1200, false);
    while (theDoc.Chainable(pageRef))
    {
        theDoc.Page = theDoc.AddPage();
        pageRef = theDoc.AddImageToChain(pageRef);
    }
    for (var i = 1; i <= theDoc.PageCount; i++)
    {
        theDoc.PageNumber = i;
        theDoc.Flatten();
    }

    theDoc.Save(pdfStream);
    theDoc.Clear();
    var byteInfo = pdfStream.ToArray();
    pdfStream.Write(byteInfo, 0, byteInfo.Length);
    pdfStream.Position = 0;
    return pdfStream;
} 
```

问题是使用 HttpAdditionalHeaders 属性后，标头中仍然缺少 cookie，您知道我缺少什么吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T12:00:03.327

这是解决方案以及为什么它不起作用：

**为什么它不起作用？**

`theDoc.HtmlOptions.HttpAdditionalHeaders`使用 Gecko 作为渲染引擎时，AbcPdf 不支持。

**工作区**

给定 URL 将生成 PDF 的操作：

```
public class PdfController : Controller
{
    private readonly IPdfGenerator _pdfGenerator;

    public PdfController(IPdfGenerator pdfGenerator)
    {
        if (pdfGenerator == null)
            throw new ArgumentNullException();
        this._pdfGenerator = pdfGenerator;
    }

    public FileStreamResult Index(string url)
    {
        Response.AppendHeader("Content-Disposition", "attachment;filename=Download.Pdf");
        this._pdfGenerator.SetCookies(Request.Cookies);
        return new FileStreamResult(_pdfGenerator.HtmlToPdf(url.Uri, false, 1200), "application/pdf");
    }
} 
```

PDF生成类：

```
 public class AbcPdfGenerator : IPdfGenerator
    {
        private static HttpCookieCollection _cookies = new HttpCookieCollection();

        public void SetCookies(HttpCookieCollection cookies)
        {
            lock (_cookies)
            {
                _cookies = cookies;
                System.Threading.Thread.MemoryBarrier();
            }
        }

        public HttpCookieCollection GetCookies()
        {
            return _cookies;
        }

        public MemoryStream HtmlToPdf(Uri pdfUrl, bool landscape, int screenResolutionWidth, bool enableCache)
        {
            var pdfStream = new MemoryStream();
            var theDoc = new Doc();
            if (landscape)
            {
                // apply a rotation transform
                double w = theDoc.MediaBox.Width;
                double h = theDoc.MediaBox.Height;
                double l = theDoc.MediaBox.Left;
                double b = theDoc.MediaBox.Bottom;
                theDoc.Transform.Rotate(90, l, b);
                theDoc.Transform.Translate(w, 0);
                // rotate our rectangle
                theDoc.Rect.Width = h;
                theDoc.Rect.Height = w;
            }
            theDoc.HtmlOptions.Engine = EngineType.Gecko;
            theDoc.HtmlOptions.Timeout = 60000;
            theDoc.HtmlOptions.UseScript = true;
            theDoc.HtmlOptions.OnLoadScript = "(function(){window.ABCpdf_go = false; setTimeout(function(){window.ABCpdf_go = true;}, 3000);})();";
            var url = Uri.UnescapeDataString(pdfUrl.ToString());

            var pageRef = theDoc.AddImageUrl(url, true, screenResolutionWidth, enableCache);
            while (theDoc.Chainable(pageRef))
            {
                theDoc.Page = theDoc.AddPage();
                pageRef = theDoc.AddImageToChain(pageRef);
            }
            for (var i = 1; i <= theDoc.PageCount; i++)
            {
                theDoc.PageNumber = i;
                theDoc.Flatten();
            }

            theDoc.Save(pdfStream);
            theDoc.Clear();
            var byteInfo = pdfStream.ToArray();
            pdfStream.Write(byteInfo, 0, byteInfo.Length);
            pdfStream.Position = 0;
            return pdfStream;
        }

        /// <summary>
        /// Will install the pdf software license on the server, this should be called on a Application_Start()
        /// </summary>
        public void InitializeService()
        {
            XSettings.InstallLicense(System.Configuration.ConfigurationManager.AppSettings["PdfGeneratorLicenseKey"]);
            //XSettings.InstallTrialLicense(System.Configuration.ConfigurationManager.AppSettings["PdfGeneratorLicenseKey"]);
        }
    } 
```

返回要转换为 PDF 的 HTML 的操作：

```
[RequireCookiesForPdf]
public ActionResult Index(string layout)
{
    return View();
} 
```

之前使用的动作过滤器：

```
public class RequireCookiesForPdf : ActionFilterAttribute
{
    private readonly IPdfGenerator _pdfGenerator;

    public RequireCookiesForPdf()
    {
        //"Bastard injection" :( as action filters don't allow constructor injection
        this._pdfGenerator = DependencyResolver.Current.GetService<IPdfGenerator>();
    }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        var cookies = this._pdfGenerator.GetCookies();
        if (cookies != null)
        {
            foreach (var key in cookies.AllKeys)
            {
                var httpCookie = cookies[key];
                if (httpCookie != null) filterContext.HttpContext.Response.Cookies.Set(new HttpCookie(key, httpCookie.Value));
            }
            this._pdfGenerator.SetCookies(new HttpCookieCollection());
        }
        base.OnActionExecuting(filterContext);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-04T18:20:54.223

> **`theDoc.HtmlOptions.HttpAdditionalHeaders`使用**Gecko**作为渲染引擎时， **AbcPdf**不支持....**

 **在 Gecko 下，仅当您使用 Screen Media 或使用 POST 时才会发送这些标头`RequestMethod`。例如：

```
theDoc.HtmlOptions.Media = MediaType.Screen; 
```

问候！**

# c# - 如何在 Sitecore 中配置 Lucene 以仅索引主数据库上项目的最新版本？

> ID：13701856
> 
> 赞同：6
> 
> 时间：2012-12-04T11:28:08.127
> 
> 标签：c#, search, lucene, indexing, sitecore

我认识到这是网络数据库上的一个有争议的问题，所以这个问题适用于主数据库......

我在 Sitecore 6.4.1 中设置了一个自定义索引，如下所示：

```
<index id="search_content_US" type="Sitecore.Search.Index, Sitecore.Kernel">
    <param desc="name">$(id)</param>
    <param desc="folder">_search_content_US</param>
    <Analyzer ref="search/analyzer" />
    <locations hint="list:AddCrawler">
        <search_content_home type="Sitecore.Search.Crawlers.DatabaseCrawler, Sitecore.Kernel">
            <Database>master</Database>
            <Root>/sitecore/content/usa home</Root>
            <Tags>home content</Tags>
        </search_content_home>
    </locations>
</index> 
```

我像这样查询索引（我正在使用`SortableIndexSearchContext`来自此答案的 techphoria414：[如何使用新的 Sitecore.Search API 进行排序/过滤](https://stackoverflow.com/questions/7314195/how-to-sort-filter-using-the-new-sitecore-search-api)）：

```
private SearchHits GetSearchResults(SortableIndexSearchContext searchContext, string searchTerm)
    {
        CombinedQuery query = new CombinedQuery();
        query.Add(new FullTextQuery(searchTerm), QueryOccurance.Must);
        return searchContext.Search(query, Sort.RELEVANCE);
    }

...

SearchHits hits = GetSearchResults(searchContext, searchTerm); 
```

`hits`是我的索引中的搜索命中集合。当我遍历时，`hits`我可以看到 Sitecore 中有许多相同项目的重复项，每个版本的项目 1 个。

然后我执行以下操作以获得`SearchResultCollection`：

```
SearchResultCollection results = hits.FetchResults(0, hits.Length); 
```

这会将所有重复项组合成一个`SearchResult`对象。此对象表示特定项目的 1 个版本，并有一个名为的属性，它是代表所有其他项目版本`SubResults`的 s 的集合。`SearchResult`

这是我的问题：

所代表的项目版本`SearchResult`不是该**项目**的当前发布版本！它似乎是一个随机选择的版本（无论哪种搜索方法在索引中首先出现）。但是，最新版本**包含**在`SubResults`集合中。

例如：

```
SearchResult
 |
 |- Version 8 // main result
 ...
 |- SubResults
      |
      |- Version 9 // latest version
      |- Version 3
      |- Version 5
      ... // all versions in random order 
```

**如何防止这种情况在主数据库上发生？通过阻止 Lucene 索引项目的旧版本，或者通过对结果集进行一些操作以从`SubResults`?**

顺便说一句，为什么 Lucene 还要费心索引旧版本的项目呢？当然这对于在您的网站上搜索内容毫无意义，因为旧版本不可见？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T17:11:54.917

您可以实现覆盖以下内容的自定义爬虫：

```
public class IndexCrawler : DatabaseCrawler
{
    protected override void IndexVersion(Item item, Item latestVersion, Sitecore.Search.IndexUpdateContext context)
    {
        if (item.Versions.Count > 0 && item.Version.Number != latestVersion.Version.Number)
            return;

        base.IndexVersion(item, latestVersion, context);
    }
} 
```

这确保只有最新版本的项目进入您的索引，因此将是唯一从所述索引中拉出的项目

您当然需要更新配置文件以设置正确的索引类型

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-08-19T13:06:35.870

在**Sitecore 7**中，索引中添加了一个字段**_latestversion**，其中包含最新版本的“1”（其他版本为空值）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-04T11:51:07.793

如果您让 Lucene 在您的 Web 数据库中搜索而不是在 Master 中搜索，它应该只索引最后发布的版本。

```
<Database>web</Database> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-04T07:46:55.067

虽然yetiman 提供的解决方案通过使用调整后的排序机制是一种有趣的方法，但当两个版本的Lucene 结果分数趋于不同时，它并不能提供完美的解决方案。例如，在分数为 0.7 的 v1 和分数为 0.5 的 v2 中，他的解决方案仍将返回项目的第一个版本。（至少在我的测试中。）

经过更多挖掘，最明显的解决方案显然在于实现您自己的`Sitecore.Pipelines.Search.SearchSystemIndex`并使用该解决方案而不是默认解决方案。如果您使用 ILSpy 或类似工具反编译该代码，您会在方法底部注意到以下内容`Process`：

```
foreach (SearchResult current in searchHits.FetchResults(0, searchHits.Length)){
  // ...
} 
```

每个这样`SearchResult`的实际上都是分组的，其中从 Lucene 返回的第一个结果（因此得分最高的结果）是主要结果。`Subresults`通过每个实例的属性可以访问同一项目的其他版本（以及其他语言）的命中；或者`null`没有的时候。

根据您的要求，您可以调整课程的这一部分以满足您的需要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-05T15:03:18.297

虽然我还没有想出确切的答案（停止 Lucene 在**主数据库**上索引旧版本），但我想出了一个可以接受的解决方法......

当 Lucene 从索引返回它的结果时，每个`hit`都有一个名为的字段`"_id"`，其格式如下（同一项目的 3 个版本，其中最后一个数字是版本）：

```
"CCB75380-4E9A-4921-99EC-65E532E330FF%en%1"
"CCB75380-4E9A-4921-99EC-65E532E330FF%en%2"
"CCB75380-4E9A-4921-99EC-65E532E330FF%en%3"
... 
```

我目前正在按`Sort.RELEVANCE`默认排序。如果我们在索引中只有一个项目的版本，这很好，但有几个几乎相同的版本，它们都具有相同的相关性分数，而 Lucene 只是以任何顺序将它们搅出。Sitecore 然后获取项目版本的第一个实例（即使它是旧的）。

解决方案是指定辅助排序字段。在该`searchContext.Search()`方法中，您可以传递一个自定义`Sort`对象。

```
searchContext.Search(query, new Sort(...)); 
```

通过首先按 Lucene 的内置排序`Sort.RELEVANCE`，**然后**按`id`索引中的字段（降序）排序，我可以确保`hit`Sitecore 看到的第一个将是最新版本，而不仅仅是随机版本：

```
searchContext.Search(query, new Sort
                            (
                                new SortField[2] 
                                {
                                    SortField.FIELD_SCORE, // equivalent to Sort.RELEVANCE
                                    new SortField("_id",SortField.STRING, true) // sort by _id, descending
                                }
                            )
); 
```

`SortField`参数如下：

```
SortField(string fieldName, int type, bool reverse) 
```

**这种方法解决了我的问题，但如果有人真的能找到如何只索引最新版本，请回答！**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-08-23T18:58:27.333

我最终从上述答案中找到了一个替代解决方案，

从架构上讲，我认为这个问题的理想解决方案是使用更高级别的自定义代码过滤掉旧版本的结果，而不是完全从主数据库索引中删除它们。您不想管理 sitecore 旨在解决手头问题的方式。

使用以下谓词过滤掉旧版本并仅检索最新版本

```
predicate.And(item=>item[Sitecore.ContentSearch.BuiltinFields.LatestVersion].Equals("1")); 
```

希望这可以帮助某人！

# javascript - jQuery - 加载事件 - 前进/后退

> ID：13701860
> 
> 赞同：0
> 
> 时间：2012-12-04T11:28:24.100
> 
> 标签：javascript, jquery, browser, event-handling, turbolinks

在 css 完全加载后，我必须加载某些功能（自定义字体），以便它们正常工作。

其中之一是在框中垂直居中文本。

```
 $(y).css({
            'padding-top' : padding_top + 'px',
            'visibility' : 'visible'
        }); 
```

我正在使用 turbolinks.js 来加快页面之间的加载速度并让功能正常工作我添加了这个

```
$(window).bind('page:change', do_on_load);
function do_on_load(){
    functions...
} 
```

在页面之间单击时，我得到了我想要的结果，但是当向后/向前移动时，这个事件运行到“快速”，而我在计算元素高度等时收到的只是 0。

是否有解决方案，例如我可以绑定的事件？

# c++ - 如何比较内联函数和普通函数的内存使用情况？

> ID：13701861
> 
> 赞同：0
> 
> 时间：2012-12-04T11:28:32.990
> 
> 标签：c++, qt, visual-c++

我想知道如何找到函数在用作内联函数和普通函数时使用的内存量，以提高函数的使用效率。

我想计算这两种情况下的确切内存使用情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:43:00.563

您需要澄清您是否关心程序大小或运行时内存使用（堆栈与寄存器）。

此外，对于本质上需要为每个调用站点执行大量工作的任何函数，内联在程序大小方面的好处微乎其微。对于本质上需要使用大量内存的任何函数——对于一个大概的感觉数字来说超过一百个字节——内联与否都不会产生任何影响。但是“固有地”编码了每个调用站点可能具有不同的实际需求的事实，因此如果编译时确定特定调用站点的需求允许重要的优化机会（例如 - 死代码消除），则内联可能会有所帮助。

内联函数在调用它们的每个点都被有效地替换，然后进行优化——优化可能会改变它们使用的寄存器和内存——无论您是指用于机器代码指令（即程序）的内存，还是用于堆栈与寄存器的内存。诸如死代码消除之类的优化 - 以及该代码隐含的内存使用 - 可能对一个调用者但不是另一个调用者可能，但如果在调用外联函数时未执行该代码分支，则不太可能有很多无论如何，内存使用量的差异。解决这个问题，取决于函数的大小，内联后通常可以进行多少优化，有多少调用站点，以及在调用外联时需要多少代码来准备和传递参数，任何一种方法都可能产生或多或少的整体代码膨胀。使用 inling 存在更多代码过度膨胀的风险，但是当超过合理的阈值时，编译器通常会选择不遵守“内联”关键字提示。

与大多数优化选项一样，如果您关心您应该使用实际的数据/事件负载来测量您的特定应用程序。

# php - 视图标题控制器中的文件循环和逻辑？

> ID：13701863
> 
> 赞同：0
> 
> 时间：2012-12-04T11:28:49.327
> 
> 标签：php, oop, model-view-controller, autoload

我在我的所有视图中包含的 header.php 文件中有以下内容：

```
$dh = opendir(Vs.get_class($this).'/js') ;
while($script = readdir($dh)) {
    if(!is_dir($script))
    {
        echo '<script type="text/javascript" src="js/'.$script.'"></script>' ;
    }
}

$dh = opendir(Vs.get_class($this).'/css') ;
while($css = readdir($dh)) {
    if(!is_dir($css))
    {
        echo '<link type="text/css" href="css/'.$css.'" rel="stylesheet"/>' ;
    }
} 
```

它的目的是自动加载特定视图的所有 css 和 JS 文件（与控制器同名，因此`get_class`）。

所有这些都应该是关联控制器的一部分，还是我做得很好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:40:31.350

Dude just use Glob php function . And then include those.. it will work perfectly fine. Also you will need to pass the absolute path

```
foreach (glob("*.css") as $filename) 
{ 
   echo '<link type="text/css" href="css/'.$filename.'" rel="stylesheet"/>' ; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:41:21.327

Scripts and stuff which are only and exclusively used in *the View* belong in *the View*. The controller has nothing to do with it.

Views don't need to be dumb. In fact, they *shouldn't* be. They need to care about everything that has to do with preparing and returning a response. That even includes setting HTTP headers and possible caching logic. Including necessary CSS and JS scripts is also part of its job.

# html - Tumblr 主题中的图像不会在 Firefox 中显示

> ID：13701864
> 
> 赞同：1
> 
> 时间：2012-12-04T11:28:54.940
> 
> 标签：html, css, tumblr

我的朋友让我在他的 Tumblr 博客[http://proudlockstyle.com](http://proudlockstyle.com)中添加标题图片广告。（我没有做主题）

我进入主题编辑器并在主容器中添加了必要的 html：

```
<div style="text-align:center;">
    <a href="http://www.reiss.com/">
        <img src="http://static.tumblr.com/1gdukju/Qrtmei9p1/all_banners_mens1_468x60.jpg" />
    </a>    
</div> 
```

这在 Chrome、Safari 甚至 IE 中运行良好！但是在 Firefox 中查看该站点时，该图像不会显示。当我在 Firebug 中检查它时，`<img>`标签是灰色的。

谁能确定为什么图像没有显示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T12:52:44.233

你在你的 Firefox 中运行 adblock 对吗？更改名称删除横幅位。除非我禁用广告拦截，否则它也不会显示在我的 Chrome 中

# java - 使用 JNDI 从 LDAP 未返回任何结果

> ID：13701867
> 
> 赞同：0
> 
> 时间：2012-12-04T11:29:09.807
> 
> 标签：java, ldap, jndi, spring-ldap

我正在使用 spring-ldap 并通过此搜索过滤器

```
(&(&(cn=*)(objectClass=group))(member=cn=MDMAdmin\, Test,ou=Externe Accounts,ou=Users,ou=Foo-Deutschland,dc=foocompany,dc=int)) 
```

方法

```
org.springframework.ldap.core.LdapTemplate.search(String, String, SearchControls, NameClassPairCallbackHandler) 
```

不幸的是，我没有得到任何结果。相同的过滤器在[LDAP Admin](http://www.ldapadmin.org/ "LDAP 管理员")中起作用。

以下过滤器适用于两者：

```
(&(&(cn=*)(objectClass=group))(member=*)) 
```

我需要对 spring-ldap 进行不同的转义吗？搜索基础和范围设置正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T09:47:03.893

使用过滤器：

```
(&(&(cn=*)(objectClass=group))(member=cn=MDMAdmin%2c Test,ou=Externe Accounts,ou=Users,ou=Foo-Deutschland,dc=foocompany,dc=int)) 
```

**如果专有名称在其名称中包含逗号字符**。如果以下字符构成可分辨名称的一部分，则必须对其进行转义：''、'"'、'#'、'+'、','、';'、'<'、'='、'>'、或 ''。另见[RFC4514](https://www.rfc-editor.org/rfc/rfc4514)。

# java - 使用 Jaxb 和绑定更改 XSD 中引用元素的生成变量的名称

> ID：13701869
> 
> 赞同：4
> 
> 时间：2012-12-04T11:29:12.600
> 
> 标签：java, reference, xsd, jaxb, xjb

今天我有一个我无法解决的令人难以置信的问题。我将从解释和示例开始。

我有 2 个 XSD 文件。一个 XSD 文件引用另一个元素之一。

**第一个 XSD- ReportInfo.xsd**：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<xs:schema id="ReportInfoWrapper" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
  <xs:element name="ReportInfoWrapper" >
    <xs:complexType>
      <xs:sequence>
          ...
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

**第二个 XSD- ReportInfoRecordSet.xsd**：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<xs:schema id="ReportInfoRecordSetWrapper" xmlns="" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">
  <xs:include schemaLocation="./ReportInfo.xsd" />
  <xs:element name="ReportInfoRecordSetWrapper">
    <xs:complexType>
      <xs:sequence>
        <xs:element ref="ReportInfoWrapper" maxOccurs="unbounded"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

ReportInfoRecordSet 引用 ReportInfoWrapper（ReportInfo 的根元素）。我需要知道我将在 JAXB 绑定文件中定义什么来更改 ReportInfoRecordSet 中此引用元素的生成名称。这是它当前生成的：

```
public class ReportInfoRecordSetWrapper {

@XmlElement(name = "ReportInfoWrapper", required = true)
protected List<ReportInfoWrapper> reportInfoWrappers; //I need to change the name here in the bindings file. 
```

**问题** 任何帮助或建议将不胜感激。请注意，我不能将 ReportInfo 的 Root 元素设为复杂类型，因为它会破坏 ReportInfo 的当前绑定文件。有没有办法用以下符号定义变量的名称？请注意，下面的这个例子由于某种原因不起作用（我相信它的节点定位问题”：

```
 <jaxb:bindings node=".//xsd:element[@name='ReportInfoRecordSetWrapper']/xsd:complexType/xsd:sequence/xsd:node[@ref=ReportInfoWrapper"]">
         <jaxb:property name="records" />
      </jaxb:bindings> 
```

**笔记**

一种查看我在这里尝试的简单方法，我可以用正常的开发术语来解释。

ReportInfo 是“类”

ReportInfoRecordSet 是一个 ReportInfo 类的数组。

**编辑**

```
<jaxb:bindings
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
    xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
    xmlns:inheritance="http://jaxb2-commons.dev.java.net/basic/inheritance"
    xmlns:annox="http://annox.dev.java.net"
    jaxb:extensionBindingPrefixes="xjc inheritance annox"
    version="2.1">
    <jaxb:globalBindings localScoping="toplevel">
        <xjc:simple />
        <xjc:javaType adapter="aem.adservices.google.dfa.utils.DateAdapter" name="java.util.Calendar" xmlType="xs:dateTime" />
    </jaxb:globalBindings>
    <jaxb:bindings schemaLocation="../xsd/ReportInfoRecordSet.xsd" >
      <jaxb:bindings node=".//xsd:element[@name='ReportInfoRecordSetWrapper']/xsd:complexType">
         <annox:annotate>
           <annox:annotate annox:class="aem.utilities.boomi.BoomiObject" label="ReportInfoRecordSet" description="ReportInfoRecordSet" OperationTypes="UPSERT"  />
         </annox:annotate>
      </jaxb:bindings>
       <jaxb:bindings node="//*/xs:element[@ref='ReportInfoWrapper']">
           <jaxb:property name="records"/>
       </jaxb:bindings>
    </jaxb:bindings>
</jaxb:bindings> 
```

错误在第 19 行抛出，说 XPATH 错误：null。第 19 - 21 行是添加到我的代码中的新行。

**编辑 2**

记住孩子们，使用 XJC 需要您仔细检查您提供给 XPATH 处理器的名称空间。我发现错误`node="//*/xs:element[@ref='ReportInfoWrapper']"`应该在 哪里`node="//*/xsd:element[@ref='ReportInfoWrapper']"`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T11:55:05.407

此绑定必须有效（在本地检查）：

```
 <jxb:bindings version="1.0" 
  xmlns:jxb="http://java.sun.com/xml/ns/jaxb" 
  xmlns:xs="http://www.w3.org/2001/XMLSchema" 
  xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc" 
  jxb:extensionBindingPrefixes="xjc">
    <jxb:bindings schemaLocation="ReportInfoRecordSet.xsd" node="/xs:schema">
       <jxb:bindings node="//*/xs:element[@ref='ReportInfoWrapper']">
            <jxb:property name="records"/>
        </jxb:bindings>
    </jxb:bindings>
</jxb:bindings> 
```

# java - 调用数组中的数字

> ID：13701870
> 
> 赞同：-6
> 
> 时间：2012-12-04T11:29:16.087
> 
> 标签：java, android, arrays, phone-call

我想制作一个 android 应用程序，它调用数组中的第一个数字，并在通话结束后继续下一个数字。一旦列表用完，它就会停止。我正在使用 Eclipse 和索尼爱立信 Xperia X10。我已经设置了在清单中调用的权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:54:05.780

您需要编写服务来检查当前通话是否结束。断开一个呼叫后，您可以在**BroadcastReceiver的****onRecieve**方法中从数组中拨打下一个号码。

 **检查呼叫是否断开的代码。

```
 switch(state) {
        case TelephonyManager.CALL_STATE_IDLE:
                Log.d("Call","Outgoing Call finished");
        break;
        case TelephonyManager.CALL_STATE_OFFHOOK:
                Log.d("Call","Outgoing Call Starting");
        break;
    } 
```**

# android - 在哪里将数据写入 SharedPreferences？

> ID：13701873
> 
> 赞同：0
> 
> 时间：2012-12-04T11:29:23.373
> 
> 标签：android, sharedpreferences, startup

我已经了解如何使用 SharedPreferences。但我不明白的是在哪里编写将数据插入共享首选项的代码。在第一次启动应用程序期间，此代码只需执行一次。

进一步在第一个活动上可以检查此 SharedPreferences 数据以了解应用程序是否已首次启动。

我希望您理解我想第一次也是唯一一次将数据写入 SharedPreferences。我应该在哪里这样做？如果在任何活动中编写此代码，将在下一次活动启动时再次执行。

是否有一个内置变量来确定应用程序是否首次启动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:36:35.990

如果我理解正确，您想要做的事情非常简单。在主要活动的 onCreate 中放置一个布尔变量。只需将其设置为 false（初始值为 true），以便您知道它是否是您的应用程序第一次运行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:33:42.827

如果应用程序之前运行过，您可以做一个 sharedPrefs 布尔值。将其设置为 false，如果为 false，则执行您的预期代码。然后当应用程序最终运行并完成代码时，将布尔值设置为 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:42:51.387

您可以创建自己的[Application](http://developer.android.com/intl/ru/reference/android/app/Application.html)类并在 onCreate 方法中编写 SharedPreferences。

```
 public class MyApplication extends Application {    
        @Override
        public void onCreate() {
        SharedPreferences settings = getSharedPreferences("MyPrefs", MODE_PRIVATE);
        Boolean firstRun = settings.getBoolean("firstRun",true);
         if(firstRun){
            //insert your data into the shared preferences here
            SharedPreferences.Editor editor = settings.edit();
            editor.putBoolean("firstRun", false);
            editor.commit();
        }

        }
} 
```

AnroidManifest.xml

```
 <application android:icon="@drawable/ic_launcher"
                     android:label="@string/app_name"                     
                     android:name=".MyApplication">
...
</application> 
```

# jdbc - 无法加载 mysql.jdbc.Driver，同时将 Solr 配置为从 mysql 数据库导入数据

> ID：13701874
> 
> 赞同：0
> 
> 时间：2012-12-04T11:29:26.657
> 
> 标签：jdbc, solr, jetty, classpath, dataimporthandler

我已将“ ”添加到存在其他*码头*.jar 文件的`mysql-connector-java-5.1.22-bin.jar`solr/lib 中。但是当在 solr/admin 我检查 java.classpath 我没有找到这个.. 所以最后在做一个完整的导入时我得到了错误*`mysql.connector jar`*

 *" `java.lang.RuntimeException: org.apache.solr.handler.dataimport.DataImportHandlerException: Could not load driver: com.mysql.jdbc.Driver Processing Document # 1`"

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-05T06:24:54.570

Solr 根据您的配置选择罐子：-

*   solrconfig.xml - 配置文件中指定的[lib](http://wiki.apache.org/solr/SolrConfigXml#lib)指令是 Solr 查找 jar 的 lib 位置。因此，您需要确保 jar 存在于 lib 目录之一中。

*   [solr.xml](http://wiki.apache.org/solr/CoreAdmin#solr) - 在多核设置的情况下，您可以为所有集合创建一个 sharedLib。您可以将 jdbc 驱动程序添加到 sharedLib 文件夹中。

[Oracle_Example](http://wiki.apache.org/solr/DataImportHandler#Oracle_Example)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-03T22:24:44.560

对于 Solr 4.5.1，将 mysql 连接器添加到 lib 文件夹。将 lib 文件夹路径添加到 solrconfig.xml

```
<lib dir="../../lib" />
<lib dir="../../../contrib/extraction/lib" regex=".*\.jar" />
<lib dir="../../../dist/" regex="solr-cell-\d.*\.jar" />

<lib dir="../../../contrib/clustering/lib/" regex=".*\.jar" />
<lib dir="../../../dist/" regex="solr-clustering-\d.*\.jar" />

<lib dir="../../../contrib/langid/lib/" regex=".*\.jar" />
<lib dir="../../../dist/" regex="solr-langid-\d.*\.jar" />

<lib dir="../../../contrib/velocity/lib" regex=".*\.jar" />
<lib dir="../../../dist/" regex="solr-velocity-\d.*\.jar" />

<lib dir="../../../contrib/dataimporthandler/lib" regex=".*\.jar" />
<lib dir="../../../dist/" regex="solr-dataimporthandler-.*\.jar" /> 
```

这对我有用。*

# javascript - 从另一个函数停止一个函数 - jQuery

> ID：13701877
> 
> 赞同：1
> 
> 时间：2012-12-04T11:29:38.410
> 
> 标签：javascript, jquery, function

我有一个由下拉更改调用的函数。该功能可能正在运行并且用户更改了下拉菜单。

如果发生这种情况，我希望正在运行的功能停止。

前任。

```
$('.txtCategory').change(function(){
    ajaxPost('para', 'meters').stop(); //doesn't work
    $('#Submit').attr('data-check', 'on');
    $('#Submit').val('Stop Checking');
}); 
```

这可能吗？

提前致谢！

问候，圭多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:30:50.007

这是不可能的，原因很简单：您的脚本执行只发生在一个线程上，一次只能运行一个函数。

在当前函数完成执行之前，不会调用任何响应本地事件或查询的回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:33:59.580

@Guido

我认为您想要其他一些东西..请更好地解释您的问题...我认为这不是您真正想要实现的目标..

你也可以使用这些

```
Create a setTimeOut function call and run it every 1000ms so whenever you want to
stop that setTimeOut function you can simple use clearTimeOut to stop it.
it will help you out. if you have still any issues let me know :) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T11:40:59.967

正如其他人提到的那样，由于它们都是同步过程，因此无法停止/中止另一个功能。另一方面，如果您想停止/中止 AJAX（第一个 A 代表*Asynchronous*）请求，您可以借助 jQuery 的 AJAX 返回对象来实现。为此，您可以按照以下步骤操作；

首先创建一个全局变量来处理AJAX对象；

```
var xhr = null; 
```

当您通过 AJAX 请求时，将返回对象分配给此变量；

```
xhr = $.ajax(
    url: "http://someurl.org",
    success: function() { ... }
    ); 
```

现在，当您需要中止请求时，只需`xhr.abort()`调用即可。

```
if (xhr != null)
    xhr.abort(); 
```

希望有帮助；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T11:45:12.557

正如其他人所说，不可能从 JavaScript 中的另一个函数中停止一个函数。

但是，您可以使用标志来检查 Ajax 请求是否正在运行。为此目的，jQuery 具有未记录的`$.active`属性。您可以按如下方式使用它：

```
$(".txtCategory").change(function() {
    if ($.active > 0)    // if there are more than 0 Ajax requests running
        return false;    // at a time we stop executing the current callback

    ajaxPost("para", "meters");
    $("#Submit").data("check", "on").val("Stop Checking");
}); 
```

# linkedin - 无法发布网络更新

> ID：13701878
> 
> 赞同：0
> 
> 时间：2012-12-04T11:29:40.017
> 
> 标签：linkedin, linkedin-j

我正在使用linkedin-j 来验证java 中的管理linkedin API。我在获取用户信息、电子邮件地址等方面没有问题。即使我发布共享也没有问题：

```
final LinkedInApiClientFactory factory = LinkedInApiClientFactory.newInstance(consumerKeyValue, consumerSecretValue);
final LinkedInApiClient client = factory.createLinkedInApiClient(token, secret);
client.postShare(title, text, title, title, VisibilityType.ANYONE); 
```

我立即在我的linkedin时间线中看到它，但是当我尝试发布网络更新时，我没有收到任何错误，但更新没有显示在时间线中

```
final LinkedInApiClientFactory factory = LinkedInApiClientFactory.newInstance(consumerKeyValue, consumerSecretValue);
final LinkedInApiClient client = factory.createLinkedInApiClient(token, secret);
client.postNetworkUpdate(update); 
```

有人有同样的问题吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:07:59.303

我找到的这个答案是正确的：“postNetworkStatus() 已被列入开发中的应用程序的白名单（请参阅 LinkedIn？开发人员文档）。您需要将所有测试帐户添加为应用程序的开发人员。否则此方法会静默失败”

但我认为我花了一些时间让开发者帐户工作。现在它完美地工作了。

# android - 无法在 Eclipse for android 中找到已安装的模拟器

> ID：13701879
> 
> 赞同：2
> 
> 时间：2012-12-04T11:29:41.390
> 
> 标签：android, eclipse, android-emulator, avd

`android-sdk-macos\add-ons`我已经下载了索尼 Xperia、摩托罗拉 XOOM、Galaxy Tab、Kindle Fire 等的插件，我可以在文件夹中看到所有这些插件。但是，当我尝试为 Sony Xperia、Galaxy Tab 等创建 AVD/模拟器时，我在列表中找不到这些项目。

这是文件夹中附加文件`android-sdk-macosx`夹 的屏幕截图![在此处输入图像描述](../Images/d8fd25774a2c924ba4907b00d64ea2c9.png)

这是 Eclipse 的 AVD 管理器的屏幕截图

![在此处输入图像描述](../Images/2259f2b3daba6c46b5426df46cb48672.png)

在上面的列表中，我看不到索尼 Xperia Tablet、摩托罗拉 XOOM 三星 Galaxy Tab 等，你能告诉我为什么吗？

我正在为平板电脑创建一个应用程序。我想让我的应用程序在所有平板电脑上运行。我没有所有的设备。如何为不同类型的设备创建不同的模拟器。请不要将此问题重复。我在 中看到了很多问题`stackoverflow`。我力求找到任何解决方案。

我希望我的应用程序可以在 `Acer Iconia Tab A701`, `ASUS Transformer Pad Infinity 700`, `Sony Xperia Tablet S`, `Samsung Galaxy Tab 2 10 inches`,上运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T05:58:16.647

如果您安装了正确的 API 版本，这些附加组件将在创建新 AVD 时出现在目标列表中。但是，您将只能使用他们的软件配置，并且不会自动应用图形皮肤。

设备定义是 ADT 版本 21 中的一项新功能，这些附加组件都不够新，无法添加自己的设备定义。您可以进行自己的定义以匹配附加设备的硬件配置，但不幸的是，您将无法像在以前版本的ADT。

因此，在创建新的 AVD 时，Device 列表用于设备定义，Target 列表用于附加组件或软件配置。您需要两者来制作新的 AVD。

[![](../Images/917ac90611db03f152e301c69870b9d6.png)](https://i.stack.imgur.com/BEEoC.png)

这一切都是基于我的个人经验，因为当我上次检查时，文档还没有针对这个新版本进行更新，所以如果这不正确，我深表歉意。

# tomcat - Tomcat监控MBean注册

> ID：13701887
> 
> 赞同：2
> 
> 时间：2012-12-04T11:30:19.450
> 
> 标签：tomcat, java, jmx, mbeans

我正在尝试为 Tomcat 服务器监控注册 Mbean。我正在使用 jdk 1.5。

对于`HeapMemoryUsage.used`参数，我收到以下错误：

```
"The observed attribute must be accessible in the observed object." 
 jmx.monitor.error.attribute. 
```

如果我在 jdk 1.6 版本上运行 tomcat 服务器，它工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-02T09:31:20.227

Java 1.6 中引入了对复杂元素内部的简单元素的监控。请参阅[http://www.oracle.com/technetwork/java/javase/adoptionguide-137484.html](http://www.oracle.com/technetwork/java/javase/adoptionguide-137484.html)。根据评论，这里有更多细节。JMX 是 Java 监控框架，其中 MBean 是为应用程序编写的，并且可以在 JDK5 中引入的 JConsole 中读取。系统本身有罐装 MBean，提供诸如使用的内存之类的东西。在 JDK5 中，MBean 只能返回原语，例如数字或字符串。在 JDK6 中，它们可以是嵌入到类中的元素。用户试图在一个类中获取一个值：HeapMemoryUsage.used

# c# - ZeroMQ C# 客户端未接收 c++ 服务器发布/订阅版本 3.2

> ID：13701889
> 
> 赞同：5
> 
> 时间：2012-12-04T11:30:27.303
> 
> 标签：c#, c++, zeromq

我在让 ac# zeromq 客户端使用订阅发布模式从 c++ 服务器接收消息时遇到问题。

服务器设置是一个传输层，具有两种类型的传输策略（PublishSubsribe 和 RequestReply）。这些是用 c++ 编码的，并使用 3.2.0 libzmq。

```
class PublishSubsribe : public ITransportStrategy
{
private:
     zmq::context_t _context;
     zmq::socket_t _socket;

public:

    PublishSubsribe(std::string url)
        :
    _context(1),
    _socket(_context, ZMQ_PUB)
    {
        std::cout << "Binding  " << url << std::endl;
        _socket.bind(url.c_str());
    }

    virtual void Wait()
    {
        boost::this_thread::sleep(boost::posix_time::milliseconds(100));
    }

    virtual void Send(zmq::message_t& message) 
    {
        _socket.send(outMessage) ;
    }
    ..
};  
class RequestReply : public ITransportStrategy
{
private:
     zmq::context_t _context;
     zmq::socket_t _socket;

public:

    RequestReply(std::string url)
        :
    _context(1),
    _socket(_context, ZMQ_REP)
    {
        _socket.bind(url.c_str());
    }

    virtual void Send(zmq::message_t& message) 
    {
        _socket.send(message);
    }

    virtual void Wait()
    {
        zmq_msg_t request;
        zmq_msg_init (&request);
        zmq_msg_recv (&request, _socket, 0);
        zmq_msg_close (&request);
    }
    ..
}; 
```

当客户端是 c#/c++ 时，请求/回复模式有效。让我认为没有编码问题......虽然可能是错误的。此外，我在 C++ 中有一个客户端订阅者，它确实接收来自发布者的消息。

简而言之，我在 PubSub 中的 c# 客户端

```
//Bundled libzmq version: **3.2.2-rc2**  

        using (ZmqContext context = ZmqContext.Create())
        using (ZmqSocket client = context.CreateSocket(SocketType.SUB))
        {
            client.Connect("tcp://192.168.2.12:5555");

            client.SubscribeAll();
            while (true)
            {
                var msg = client.Receive(Encoding.UTF8);
                Console.WriteLine("Received Pub/Sub: yes");

            }
        } 
```

没有收到任何消息，并且我尝试了所有编码，尽管 UTF8 适用于 ReqRep。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T22:37:22.307

您提到您在 C# 和 C++ 项目中使用的 libzmq 版本不同，这可能是问题所在吗？我在无意中使用 libzmq 2.x 和 3.x 时遇到了同样的问题

还有任何同步代码可以确保您在订阅者连接后发布消息（请参阅 ZMQ 指南中的“慢加入者综合症”）？

# debugging - 在 firefox 中调试扩展代码（javascript debugger/venkman）

> ID：13701890
> 
> 赞同：6
> 
> 时间：2012-12-04T11:30:34.963
> 
> 标签：debugging, firefox

我目前正在为 Firefox 开发一个简单的扩展。现在我希望能够在扩展上下文中的控制台中发出一些命令。

我已经安装了 Javascript Debugger 插件（venkman），但按照说明进行操作：

*   取消选中“排除应用程序文件”
*   选择文件并右键单击“设置为评估对象”

从不设置上下文，我总是最终（或者更确切地说停留）在 venkman.xul 上下文中。

我会切换到另一个调试器，但到目前为止，chromebug 也没有运气：

*   安装了 chromebug 1.08a2 和匹配的 firebug
*   使用 -chromebug -P dev 启动 firefox（作为单独的“firefox”用于开发）

然后它自己的窗口上的 chromebug 不允许我选择上下文，实际上它甚至不显示任何上下文，所有面板都被停用。

我真的不知道再去哪里看，很想有一个解决方案。现在我什至不需要像设置断点这样的“花哨”调试器，只需要在 chrome 级别发出命令。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-06-20T14:01:10.730

Firefox 现在有一个内置调试器，可以轻松与竞争对手竞争，并且可能超过了 firebug、chromebug 或 venkman。

[您需要启用（或创建）2 个特定选项才能使](https://developer.mozilla.org/en/docs/Debugging_JavaScript#JavaScript_Debugger_.28Venkman.29)扩展`about:config`调试工作：

```
devtools.chrome.enabled: true
devtools.debugger.remote-enabled: true 
```

然后单击 Web Developer 菜单中新的“Browser Debugger”条目。“浏览器控制台”也非常有用。

[官方文档](https://developer.mozilla.org/en/docs/Debugging_JavaScript#JavaScript_Debugger_.28Venkman.29)提到这将适用于 Firefox 19，但实际上它只适用[于 Firefox 23 及以后的所有扩展代码](https://forums.mozilla.org/addons/viewtopic.php?p=28311&sid=918643229cb8ab39e244441a17493534)。（如果您在 Firefox 22 发布之前尝试此操作，只需安装[最新的 nightly build](http://nightly.mozilla.org/)即可。）

另请注意，如果您[直接编辑扩展代码](https://developer.mozilla.org/en-US/docs/Setting_up_extension_development_environment#Firefox_extension_proxy_file)，则需要让 Firefox 刷新，例如，在调试器列出更新的代码之前，使用[此答案中提到的提示](https://stackoverflow.com/a/1079453/125150)使用 reload all chrome 扩展。

**更新： Firefox** **[v32](https://developer.mozilla.org/en-US/Add-ons/Bootstrapped_extensions)及更高版本具有对无需重启和[基于 SDK 的](https://developer.mozilla.org/en-US/Add-ons/SDK)附加组件**的内置调试支持。如[Mozilla 的文档](https://developer.mozilla.org/en-US/Add-ons/Add-on_Debugger)中所述，上面提到的“远程调试”现在在 Web Developer 窗格的设置中有一个复选框：

![在此处输入图像描述](../Images/029b6772fc6a9f4c34bf1a538caf9438.png)

然后，您可以转到附加组件 -> 扩展选项卡，然后单击扩展名称旁边的“调试”。

# html - 包含图像的块锚点从容器 div 溢出

> ID：13701891
> 
> 赞同：0
> 
> 时间：2012-12-04T11:30:41.190
> 
> 标签：html, css, layout, styles

我有以下元素标记：

```
<div class="container">
    <a href="#">
        <img src="http://placehold.it/250x500" alt="img" />
    </a>
</div>​ 
```

使用这个 CSS：

```
.container { max-width: 150px; max-height: 150px; }
.container a { display: block; width: 100%; height: 100%; max-width: 100%; max-height: 100%; } 
```

​看[这个小提琴](http://jsfiddle.net/RedKnight91/E6aqZ/1/)（我在那里添加了颜色和不透明度以更好地显示我的问题）

问题是虽然锚适合他父母的宽度（最大宽度：100％;）它不适合他父母的身高，但它适合他的孩子img的高度，我真的不知道为什么，因为我设置最大高度：100%。如果我将容器的**max-height**更改为**height**它可以工作，但我需要它是**max-height**。

**PS：**我不想隐藏容器的溢出（overflow: hidden），我希望anchor是容器的高度！

**PPS：**问题不在于锚点，我作为 img 的父项放入容器中的每个项目都会适合 img 的高度，除非我给容器或 img 的父亲（在我的情况下是锚点）提供**固定的高度**，但我不想那样做，因为我需要它是流动的。

**PPPS：**我部分回答了这个问题：我可以将锚的最大高度设置为继承，就像在[这个例子](http://jsfiddle.net/RedKnight91/E6aqZ/3/)中一样，但这不适用于容器的最大高度百分比，不幸的是，这是我需要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:38:05.487

在您的锚点中，您同时指定了 max-height 和 height 属性。只需要其中一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T12:25:53.180

我认为您正试图在容器内隐藏额外的可见图像......所以，

尝试溢出：隐藏在容器 div 中。

[http://jsfiddle.net/E6aqZ/2/](http://jsfiddle.net/E6aqZ/2/)

```
.container { max-width: 150px; max-height: 150px; background: red; overflow: hidden } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T14:19:46.847

好的，这就是答案（我的一位同事帮我解决了这个问题）：

**.container**应该有一个固定的宽度，或者如果它是一个 % 高度，它应该在一个具有固定高度的超级容器内，并且可以**成功**地将**anchor的高度设置为 100%。**

就是这样！感谢所有做出贡献的人。[这是结果的 jsFiddle](http://jsfiddle.net/RedKnight91/E6aqZ/4/)。

这是HTML：

```
<div class="superContainer">
    <div class="container">
        <a href="#">
            <img src="http://placehold.it/250x500" alt="img" />
        </a>
    </div>
</div> 
```

​</p>

这是CSS：

```
.superContainer { height: 200px; }
.container { width: 30%; height: 50%; background: red; font-size: 0; }
.container a { display: block; width: 100%; height: 100%; background: orange; opacity: 0.7; }
.container a img { opacity: 0.7; }​ 
```

抱歉，如果答案不符合您的需求，但我需要一个非常具体的案例。我最终将使用这种方法上传我的 jQuery 插件！

# cmake - 找不到提升

> ID：13701897
> 
> 赞同：2
> 
> 时间：2012-12-04T11:31:01.017
> 
> 标签：cmake

我正在尝试使用使用 g++ 的示例库 Mocapy++。

通过调用安装时`cmake .`出现此错误：

```
-- Boost version: 1.52.0
-- Boost version: 1.52.0
-- Found the following Boost libraries:
--   serialization
--   program_options
--   thread
running /usr/bin/cmake -E create_symlink "/home/vishalnus/Downloads/Mocapy++-1.07 /examples/data" "/home/vishalnus/Downloads/Mocapy++-1.07/examples/data"  2>&1
-- Could NOT find Boost
-- Could NOT find Boost
-- Could NOT find Boost
-- Could NOT find Boost
-- Boost version: 1.52.0
-- Found the following Boost libraries:
--   serialization
-- Could NOT find Boost
-- Boost version: 1.52.0
-- Found the following Boost libraries:
--   serialization
-- Could NOT find Boost
-- Configuring done
-- Generating done
-- Build files have been written to: <home>/Downloads/Mocapy++-1.07 
```

现在，如果我尝试调用`make`我会得到错误：

```
[  1%] Building CXX object src/CMakeFiles/Mocapy.dir/discrete/discretedensities.cpp.o
In file included from /home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/../framework/../discrete/../framework/../utils/utils.h:47:0,
from /home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/../framework/../discrete/../framework/essbase.h:29,
from /home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/../framework/../discrete/discreteess.h:24,
from /home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/../framework/../discrete/discretepriors.h:31,
from /home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/../framework/densitiesbase.h:30,
from /home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/discretedensities.h:29,
from /home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/discretedensities.cpp:22:
/home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/../framework/../discrete/../framework/../utils/mdarray.h: In instantiation of ‘void mocapy::MDArray<T>::clip(double, double) [with T = double]’:
/home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/discretedensities.cpp:61:32:   required from here
/home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/../framework/../discrete/../framework/../utils/mdarray.h:1252:4: error: ‘max’ was not declared in this scope, andno declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]
  In file included from /usr/include/c++/4.7/bits/char_traits.h:41:0,
             from /usr/include/c++/4.7/ios:41,
             from /usr/include/c++/4.7/ostream:40,
             from /usr/local/include/boost/archive/text_oarchive.hpp:19,
             from /home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/discretedensities.h:25,
             from /home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/discretedensities.cpp:22:
 /usr/include/c++/4.7/bits/stl_algobase.h:254:5: note: ‘template<class _Tp, class _Compare> const _Tp& std::max(const _Tp&, const _Tp&, _Compare)’ declared here, later in the translation unit
 In file included from /home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/../framework/../discrete/../framework/../utils/utils.h:47:0,
 from /home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/../framework/../discrete/../framework/essbase.h:29,
 from /home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/../framework/../discrete/discreteess.h:24,
 from /home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/../framework/../discrete/discretepriors.h:31,
 from /home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/../framework/densitiesbase.h:30,
 from /home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/discretedensities.h:29,
 from /home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/discretedensities.cpp:22:
 /home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/../framework/../discrete/../framework/../utils/mdarray.h:1253:4: error: ‘min’ was not declared in this scope, and no declarations were found by argument-dependent lookup at the point of instantiation [-fpermissive]
   In file included from /usr/include/c++/4.7/bits/char_traits.h:41:0,
             from /usr/include/c++/4.7/ios:41,
             from /usr/include/c++/4.7/ostream:40,
             from /usr/local/include/boost/archive/text_oarchive.hpp:19,
             from /home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/discretedensities.h:25,
             from /home/vishalnus/Downloads/Mocapy++-1.07/src/discrete/discretedensities.cpp:22:
  /usr/include/c++/4.7/bits/stl_algobase.h:233:5: note: ‘template<class _Tp, class _Compare> const _Tp& std::min(const _Tp&, const _Tp&, _Compare)’ declared here, later in the translation unit
  make[2]: *** [src/CMakeFiles/Mocapy.dir/discrete/discretedensities.cpp.o] Error 1
  make[1]: *** [src/CMakeFiles/Mocapy.dir/all] Error 2
  make: *** [all] Error 2 
```

请让我知道该怎么做。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-13T10:03:41.483

CMake 过程中没有错误（似乎您可以忽略有关找不到 Boost 的多条消息）。

***但是***Mocapy++ 代码中有一个错误，它试图使用 min/max 而不是 std::min/std::max，这就是编译失败的原因（并且在最新版本中仍然失败）。

如果你想修复它，编辑`src/utils/mdarray.h`，找到`MDArray<T>::clip`函数并替换这两行：

```
values[i] = max(minimum, values[i]);
values[i] = min(maximum, values[i]); 
```

和：

```
values[i] = std::max(minimum, values[i]);
values[i] = std::min(maximum, values[i]); 
```

输入“make”，等待并享受 :)

# ios - 在模拟器中使用 UIDocumentInteractionController

> ID：13701900
> 
> 赞同：0
> 
> 时间：2012-12-04T11:31:14.280
> 
> 标签：ios, ios-simulator, share

我很绝望`UIDocumentInteractionController`。我唯一想做的就是将我的应用程序中的 pdf 文件与所有其他注册 PDF 的应用程序共享。

这是我的代码：

```
NSString * filePath = [[NSBundle mainBundle] pathForResource:@"Sample" ofType:@"pdf"];
self.docController = [UIDocumentInteractionController interactionControllerWithURL:[NSURL fileURLWithPath:filePath]];
self.docController.delegate = self;

NSURL *url = [NSURL fileURLWithPath:filePath];
BOOL isValid = [[UIApplication sharedApplication] canOpenURL:url];
NSLog(@"uti: %@", [self.docController UTI]);

//[self.docController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES];
[self.docController presentOpenInMenuFromBarButtonItem:self.backBut animated:YES]; 
```

`isValid`变量始终为 TRUE，UTI 记录为 com.adobe.pdf（这似乎是正确的），但调用`presentOpenFrom...`两个调用（一个已注释）始终返回 NO。

我正在用模拟器测试，是这个问题吗？是否有人看到代码有问题或知道要检查什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-11T12:20:10.353

如果您正在处理 PDF 文件，那么您应该有任何能够在您的设备（模拟器）上打开 PDF 文件的应用程序。您可能想要安装[PDF File Viewer](https://github.com/vfr/Viewer)，因为它是开源的。通过从 Xcode 运行安装应用程序后，您`UIDocumentInteractionController`将正确显示。

这是一个示例代码，用于从 Web 下载任何文档`UIDocumentInteractionController`并将其传递给另一个应用程序。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *cachePath = [paths objectAtIndex:0];
BOOL isDir = NO;
NSError *error;
if (! [[NSFileManager defaultManager] fileExistsAtPath:cachePath isDirectory:&isDir] && isDir   == NO)
{
    [[NSFileManager defaultManager] createDirectoryAtPath:cachePath withIntermediateDirectories:NO attributes:nil error:&error];
}
NSString *filePath = [cachePath stringByAppendingPathComponent:url.lastPathComponent];
NSData *fileData = [NSData dataWithContentsOfURL:url];
[fileData writeToFile:filePath atomically:YES];
NSURL *filePathURL = [NSURL fileURLWithPath:filePath];
self.documentInteractionController = [UIDocumentInteractionController interactionControllerWithURL:filePathURL];
[self.documentInteractionController presentOpenInMenuFromRect:CGRectZero inView:self.view animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T19:58:08.800

如果此实施所需的只是 PDF 的预览，Kenney 的解决方案仍然适用。但是，它并没有解决presentOpenInMenuFromRect或presentOpenInMenuFromBarButtonItem的原始问题。这只会在预览中显示 pdf，而不是实际的“打开方式...”对话框。除了使用设备来启动 Open In 控制器之外，没有已知的解决方案。

presentOpenInMenu... 方法检查系统是否下载了任何已注册的 PDF 阅读器。由于iOS模拟器没有提供，也没有办法添加，所以这个功能只能在设备上测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T13:17:02.827

尝试这个：

```
NSString* path = [[NSBundle mainBundle] pathForResource:@"sample" ofType:@"pdf"];
if (path) {
    NSURL* url = [NSURL fileURLWithPath:path];
    UIDocumentInteractionController* docController = [UIDocumentInteractionController interactionControllerWithURL:url];
    docController.delegate = self;
    [docController presentPreviewAnimated:YES];
} 
```

# android - 将 Django 应用程序与 android 集成

> ID：13701902
> 
> 赞同：1
> 
> 时间：2012-12-04T11:31:21.870
> 
> 标签：android, integrate

我必须将基于 python（基于服务器）的 HR 系统与 android 应用程序集成。请提供一些有关如何操作的建议。我必须允许员工从应用程序中标记出勤率。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T12:15:45.663

我认为最好的方法是公开一个rest api并与android进行交互。

对于服务器端，您可以检查[django 活塞](https://bitbucket.org/jespern/django-piston/wiki/Home)，而对于客户端，我推荐[robospice 库](https://github.com/octo-online/robospice)

# android - 两个单选按钮不正确

> ID：13701909
> 
> 赞同：0
> 
> 时间：2012-12-04T11:31:33.060
> 
> 标签：android, radio-button

我的 android 应用程序有问题我有两个按钮，如果我点击第一个它的工作正常，但如果我点击第二个它做他的工作和第一个工作，这是代码：

对于身份证

```
rbYes = (RadioButton) findViewById(R.id.rbYes);
    rbNo = (RadioButton) findViewById(R.id.rbNo); 
```

对于方法

```
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
    // TODO Auto-generated method stub
    switch(buttonView.getId()){
    case R.id.rbYes:
        flag=true;
        etLastHourse.setEnabled(flag);
        etLastHourse.setBackgroundColor(Color.WHITE);
        etLastGPA.setEnabled(flag);
        etLastGPA.setBackgroundColor(Color.WHITE);
        Toast.makeText(getApplicationContext(), "OK1", Toast.LENGTH_LONG).show();

    break;
    case R.id.rbNo:
        Toast.makeText(getApplicationContext(), "OK", Toast.LENGTH_LONG).show();
        flag=false;
        etLastHourse.setEnabled(flag);
        etLastHourse.setEnabled(flag);
        etLastHourse.setBackgroundColor(Color.GRAY);
        etLastGPA.setEnabled(flag);
        etLastGPA.setBackgroundColor(Color.GRAY);

    break;

    }
} 
```

对于 xml

```
 <RadioButton
            android:id="@+id/rbNo"
            style="@style/RadioButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#FFFFFF"
            android:text="no"
             />

        <RadioButton
            android:id="@+id/rbYes"
            style="@style/RadioButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#FFFFFF"
            android:text="yes" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:36:19.133

当您第一次按下一个按钮时，您只会切换该按钮

当您按下另一个按钮时，您会切换两个按钮。因此，您`onCheckedChanged`第一次按下其中一个单选按钮时会检查一次，下次按下两次。

取自[http://developer.android.com/guide/topics/ui/controls/radiobutton.html](http://developer.android.com/guide/topics/ui/controls/radiobutton.html)

```
public void onRadioButtonClicked(View view) {
   // Is the button now checked?
   boolean checked = ((RadioButton) view).isChecked();

   // Check which radio button was clicked
   switch(view.getId()) {
      case R.id.radio_pirates:
         if (checked)
            // Do all things here for this button
         break;
      case R.id.radio_ninjas:
         if (checked)
            // Do all things here for this button
         break;
} 
```

如果选中按钮，只需执行您想做的事情。

# monitoring - 骆驼路由监控的RHQ/JON代理配置

> ID：13701910
> 
> 赞同：1
> 
> 时间：2012-12-04T11:31:35.620
> 
> 标签：monitoring, apache-camel, custom-routes, rhq

我已经编写了用于监控 Jboss Operational Network (JON) 上的骆驼路线的自定义插件。但在 RHQ 服务器/JON 中，没有添加任何指标进行监控。

在 RHQ-agent 日志文件中，我可以看到以下内容。

```
2012-12-04 13:47:13,515 DEBUG [InventoryManager.discovery-1] (rhq.core.pc.inventory.InventoryManager)- Executing discovery for [Srikanth Custom Service] Resources...
2012-12-04 13:47:13,515 DEBUG [ResourceDiscoveryComponent.invoker.daemon-1] (org.rhq.plugins.jmx.MBeanResourceDiscoveryComponent)- Discovering MBean resources with object name query template: org.apache.camel:type=routes,*
2012-12-04 13:47:13,531 DEBUG [ResourceDiscoveryComponent.invoker.daemon-1] (org.rhq.plugins.jmx.MBeanResourceDiscoveryComponent)- Found [1] mbeans for query [org.apache.camel:type=routes,*].
2012-12-04 13:47:13,531 DEBUG [ResourceDiscoveryComponent.invoker.daemon-1] (org.rhq.plugins.jmx.MBeanResourceDiscoveryComponent)- **[0] services have been added**
2012-12-04 13:47:13,531 DEBUG [InventoryManager.discovery-1] (rhq.core.pc.inventory.InventoryManager)- Discovery for [Srikanth Custom Service] resources completed in [16] ms 
```

在这里，我发送了部署在 JON 上的插件代码。

**RHQ-Plugin.xml**

```
<?xml version="1.0" encoding="UTF-8" ?>
<!-- Writing custom plugin for RHQ/JON -->
<plugin name="SampleRHQPlugin"
        displayName="Sample RHQ JMX Plugin"
        version="1.0"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="urn:xmlns:rhq-plugin"
        xmlns:c="urn:xmlns:rhq-configuration">
    <!-- Writing custom plugin for RHQ/JON -->
   <depends plugin="JMX" useClasses="true"/>
<!-- Custom service metrics-->
    <service name="Srikanth Custom Service"
            description="Our Srikanth MBean custom service that has a code associated with it."
            discovery="org.rhq.plugins.jmx.MBeanResourceDiscoveryComponent"
            class="org.rhq.plugins.jmx.MBeanResourceComponent">
<!-- Custom run Inside-->
      <runs-inside>
         <parent-resource-type name="JMX Server" plugin="JMX"/>
         <parent-resource-type name="JBossAS Server" plugin="JBossAS"/>
      </runs-inside>

<!-- plugin configuration metrics-->
      <plugin-configuration>
      <c:simple-property name="objectName" readOnly="true" default="org.apache.camel:type=routes,*" /> 
        <c:simple-property name="connectorAddress" default="service:jmx:rmi://localhost:44444/jndi/rmi://localhost:1099/karaf-root" required="false" type="string" description="The connection url in the form of a JMXServiceURL - this should only be set if the JVM has JMX Remoting enabled" /> 
        <c:simple-property name="installURI" required="false" type="string" description="The installation path for the selected server type which will be used to find client libraries (if appropriate)" /> 
        <c:simple-property name="principal" required="false" default="smx" description="The login principal/username" /> 
        <c:simple-property name="credentials" required="false" type="password" default="smx" description="The login credentials/password" /> 
      </plugin-configuration>
<!-- Custom metrics-->
      <metric property="ExchangesCompleted"
              displayName="ExchangesCompleted"
              defaultOn="true"
              displayType="summary"
              defaultInterval="30000"
              description="Number of completed exchanges"/>
    <!-- END of Custom metrics -->
   </service>   
   <!-- END of service -->
</plugin>
<!-- END of plugin--> 
```

如何将此 ExchangesCompleted 指标添加到 JON 服务器进行监控？

请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T18:21:36.020

只是为了确定一下，您是否知道 JON 为 Red Hat 提供的 Fuse 产品提供了一个插件？

我意识到在撰写您的消息时，它尚未作为 JBoss 品牌的 Fuse 产品得到支持和提供，尚未发布。

希望，但现在，您已经使用了这些插件，而不必重新发明轮子。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-22T09:33:13.807

虽然我对 Fuse 产品几乎一无所知，但我怀疑您根本没有在

```
<metric property="ExchangesCompleted" 
```

特别是当您在这里使用对象名称模式时：

```
 <c:simple-property name="objectName" readOnly="true" default="org.apache.camel:type=routes,*" /> 
```

确保对于真正存在的`org.apache.camel:type=routes,*`对象`ExchangesCompleted`。

也许从不使用对象名称模式，而是使用一个具体的对象名称来缩小范围。

# sql - 需要查询资料

> ID：13701911
> 
> 赞同：1
> 
> 时间：2012-12-04T11:31:40.777
> 
> 标签：sql

我有几张桌子

表事件

```
 incident_id | Customer_name
 01          | AAA
 02          | BBB
 03          | CCC
 04          | DDD 
```

表客户

```
 Customer_name | Area_Name | Segment_Name 
 AAA           | JAKARTA   | PETROLEUM
 BBB           | MEDAN     | TRADITIONAL
 CCC           | JAKARTA   | TRADITIONAL
 DDD           | MEDAN     | AIRPORT 
```

表区

```
 Area_Name | Phone
 JAKARTA   | 021
 MEDAN     | 022 
```

预期的结果：

```
 Area    | Segment     | Number (count from Incident tabel)
 JAKARTA | PETROLEUM   | 1
 MEDAN   | TRADITIONAL | 1
 JAKARTA | TRADITIONAL | 1
 MEDAN   | PETROLEUM   | 0 
```

任何帮助都会有所帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:36:34.670

看来您总是想要该区域和细分市场对吗？

```
SELECT  c.new_name, d.new_SegmentName, ISNULL(COUNT(a.CustomerId),0) as jumlah
    FROM filterednew_area c  LEFT JOIN filteredaccount b ON b.new_AreaId = c.new_areaId
    LEFT JOIN filterednew_partnersegment d ON b.new_PartnerSegmentId = d.new_partnersegmentId
    LEFT JOIN filteredIncident a ON a.CustomerId = b.AccountId
    WHERE   MONTH(a.new_trxdate) = '10' AND YEAR(a.new_trxdate) = '2012'
    AND c.new_areaid IN ('3C26906E-5C13-E211-8D39-005056850007','4E26906E-5C13-E211-8D39-005056850007')
    GROUP BY    c.new_name, d.new_SegmentName 
```

如果你总是想要这个区域，你应该从它开始加入。
试试这个查询。

编辑：编辑后的表格解决方案

```
select C.Area_Name, C.Segment_Name, ISNULL(count(I.incident_id), 0)
from customer C left outer join incident I
on C.Customer_name = I.Customer_Name
group by C.Area_Name, C.Segment_Name 
```

**编辑2：**笛卡尔积的解决方案

为此，我想有一个带有可能段的表*段*（我认为这种表存在于第一个查询中）

```
SELECT A.Area_Name, A.Segment_name, Count(Incident.Incident_Id) AS TOT
FROM
(
(SELECT Distinct Customer.Area_Name, Segment.Segment_name
FROM Segment, Customer 
) AS A
LEFT OUTER JOIN Customer AS C
 ON (C.Area_Name = A.Area_Name) AND (C.Segment_name = A.Segment_name)
)
LEFT OUTER JOIN Incident ON C.Customer_Name = Incident.Customer_name
GROUP BY A.Area_Name, A.Segment_name; 
```

查询的结果是

```
Area_Name  |    Segment_name |  TOT  

JAKARTA    |    AIRPORT     |  0  
JAKARTA    |    PETROLEUM   |   1  
JAKARTA    |    TRADITIONAL |   1  
MEDAN       |    AIRPORT     |  1  
MEDAN       |    PETROLEUM   |  0  
MEDAN       |    TRADITIONAL |  1 
```

# c# - `SoundEffectInstance.Stop()` 时 Windows Phone 噼啪声

> ID：13701913
> 
> 赞同：0
> 
> 时间：2012-12-04T11:31:47.143
> 
> 标签：c#, .net, windows-phone-7, audio, xna

我有几个`SoundEffectInstance`。停止时会发出咔哒声（我需要尽快完成）。我在某处读到它的“声音效果”是由声波切割引起的。我试着写一些类似的东西

```
ThreadPool.QueueUserWorkItem(delegate        {
        for (float i = 1f; i > 0.01; i /= 2f)
        {
            foreach (var sound in Sounds.Values)
            {
                if (sound != null && !sound.IsDisposed)
                {
                    sound.Volume = i;
                }
            }
            Thread.SpinWait(500); //Tried different dellays here
        }
    });
    Sounds.Clear(); 
```

但这并没有真正帮助。我能做些什么来避免快速停音时发出咔嚓声？

# php - 完成ajax，然后重新开始

> ID：13701915
> 
> 赞同：0
> 
> 时间：2012-12-04T11:31:50.690
> 
> 标签：php, ajax, chat, call, abort

我正在处理 php-ajax 聊天，我使用两种主要方法：“更新”和“发送”

更新函数（ajax）：

```
$.ajax({
    type: 'POST',
    timeout: 9999999999999999,
    url: 'process.php',
    success: ...
}); 
```

进程.php：

```
function update(){
   if(new messages){
   echo new messages...
   }else{
   sleep(5);update(); again...
   }
} 
```

发送函数（ajax）：

```
$.ajax({
type: "POST",
url: "send.php",
success: function(){
update();}
}) 
```

我想在发送新消息时停止运行“更新”请求并立即重新启动它，这样发件人就会立即看到他的消息。我试过 ajax.abort() 但它仍然可以继续在服务器端执行调用。

如何完成 ajax 调用并返回成功，而不是中止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:37:47.890

在您的 PHP 代码中，您可以检查连接中止 [http://php.net/manual/en/function.connection-aborted.php](http://php.net/manual/en/function.connection-aborted.php)

但是，如果您真的想返回“成功”，我会在 send.php 中的会话中添加一些内容，例如

```
$_SESSION['SENDNOW']=true; 
```

然后在 Process.php 我会检查

```
if(new messages || $_SESSION['SENDNOW']==true){
   $_SESSION['SENDNOW']=false;
} 
```

也许您应该将超时设置为 1 秒以获得更快的响应时间。或者，如果你做得很好，你可以快速检查（如每 500 毫秒） $_SESSION['SENDNOW']==true 并且每 5 秒检查一次新消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:50:51.873

请试试这个：

第一个 document.ready() 函数将 Ajax 调用声明为如下变量：

```
var ajaxCall = null; 
```

将此代码放在顶部的 AJAX 函数中：

```
//AJAX request aborted
if ( typeof ajaxCall != 'undefined' ) {
     return false;
} 
```

像这样调用 AJAX：

```
ajaxCall = $.ajax({
    type: 'POST',
    timeout: 9999999999999999,
    url: 'process.php',
    success: ...
}); 
```

所以每次都不要调用服务器。

# jquery - 在 jQuery 滑块小部件中使用非数值

> ID：13701916
> 
> 赞同：1
> 
> 时间：2012-12-04T11:31:56.883
> 
> 标签：jquery, select, slider

嗨，我正在使用 jQuery 滑块在问卷中听取人们的意见。该人可以在滑块上选择 1 到 10 的值，或者如果他们不知道，则选择“不知道”。我遇到的问题是我似乎无法让滑块计算出数字应该为 1-10，然后如果没有选择任何内容，则不知道是第一个值。如果我使用滑块下方的代码，则根本不会移动。它也绑定到一个选择框并控制它。

```
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.9.2/jquery-ui.js"></script>
<script>
$(function() {
    var select = $( "#enjoyusingdevice" );
    var slider = $( "<div id='slider'></div>" ).insertAfter( select ).slider({
        min: dontknow,
        max: 10,
        range: "min",
        value: select[ 0 ].selectedIndex + 1,
        slide: function( event, ui ) {
            select[ 0 ].selectedIndex = ui.value - 1;
        }
    });
    $( "#enjoyusingdevice" ).change(function() {
        slider.slider( "value", this.selectedIndex + 1 );
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:34:34.090

值必须是数字。此外，您`dontknow`没有用引号括起来，所以它实际上是在寻找一个名为 的变量`dontknow`，我猜它不存在，所以`min`实际上被设置为`undefined`.

作为一种解决方法，您可以让滑块从值 1-10 开始，并带有一个单独的“我不知道”复选框。当用户勾选此复选框时，滑块将被禁用。

# android - Android phonegap 代码获取目录路径？

> ID：13701919
> 
> 赞同：1
> 
> 时间：2012-12-04T11:32:06.107
> 
> 标签：android, cordova

```
function onDeviceReady(){
getFileSystem();} 

function getFileSystem(){
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0,
    function(fileSystem){ 
        root = fileSystem.root;
        listDir(root);
}, function(evt){ 
        console.log("File System Error: "+evt.target.error.code);
    }
);
} 
```

上面的代码给出了根目录，即 sdcard。我的要求是我需要使用 android phonegap 代码获取 sdcard 中名为“mydata”的文件夹的路径。或者请帮助我获取 sdcard 中默认文件夹（如 DCIM、图片等）的路径。

我尝试了很多，但没有得到我需要的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T15:53:31.177

根据Phonegap给出的[文件：](http://docs.phonegap.com/en/2.2.0/cordova_file_file.md.html#GetDirectory)

**获取目录**

创建或查找现有目录。尝试以下操作是错误的：

*   创建一个其直接父级尚不存在的目录。

**参数：**

**path** - 要查找或创建的目录的路径。此 DirectoryEntry 的绝对路径或相对路径。(DOMString)
**options** - 用于指定目录不存在时是否创建的选项。（标志）
**successCallback** - 使用 DirectoryEntry 对象调用的回调。（函数）
**errorCallback** - 创建或查找目录时发生错误时调用的回调。使用 FileError 对象调用。（功能）

**快速示例**

```
function success(parent) {
    console.log("Parent Name: " + parent.name);
}

function fail(error) {
    alert("Unable to create new directory: " + error.code);
}

// Retrieve an existing directory, or create it if it does not already exist
entry.getDirectory("existingDirectoryPath", {create: true, exclusive: false}, success, fail); 
```

# mysql - 为什么 Django 在更改列表视图页面中进行不必要的 SQL 查询？

> ID：13701920
> 
> 赞同：3
> 
> 时间：2012-12-04T11:32:13.493
> 
> 标签：mysql, django, python-2.7, django-admin

我有一个 Django 模型说，

```
class Student(models.Model):
    prefix           = models.CharField(max_length = 10, blank = True, null = True,)
    suffix           = models.CharField(max_length = 10, blank = True, null = True,)
    fullname         = models.CharField(max_length = 100, null = False,)
    fname            = models.CharField(max_length = 100, verbose_name = u'First Name', blank = True, null = True,)
    midname          = models.CharField(max_length = 100, verbose_name = u'Middle Name', blank = True, null = True,)
    lname            = models.CharField(max_length = 50, verbose_name = u'Last Name', default = ' ')
    department       = models.ForeignKey('Department') 
```

在列表显示 (admin.py)

```
 list_display = ('fname', 'midname', 'lname', 'prefix', 'suffix',) 
```

为此，包含上述字段的简单选择查询就足够了，但是当存在 FK 时，Django 使用内连接以复杂的方式进行 SQL 查询。例如，

通常django必须实现

```
 SELECT 'fname', 'midname', 'lname', 'prefix', 'suffix' FROM student LIMIT 0,100; 
```

但是 Django 对所有可能的字段进行 SELECT 查询。

```
SELECT student.prefix.student.suffix .... deparment.id ,depatment.name ..... 
INNER JOIN department ON deparment.id = student.id ........ LIMIT 100 
```

有人可以就为什么需要不必要的查询给出合理的解释吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T04:54:05.183

Django 不会预见开发人员将选择哪些字段。因此，它将所有字段提供给管理模板，包括所有相关表中的字段。如果需要，开发人员可以覆盖管理模板。queryset() 将提供发送自定义 sql 语句的能力。

希望问题得到解答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T06:06:41.460

我的坏！我正在使用 list_filter = ['department__name']

所以它是 INNER JOIN WITH 部门。我现在删除了它，它向我展示了优化的查询

DJANGO 摇滚

# wpf - 不同级别的 WPF 绑定

> ID：13701922
> 
> 赞同：1
> 
> 时间：2012-12-04T11:32:19.313
> 
> 标签：wpf, data-binding, binding, user-controls, wpf-controls

希望这对于有经验的 WPF 用户来说是显而易见的。绑定时，我是否必须考虑要绑定的目标的（嵌入式）级别？

在下面的 XAML 中，我有 MyTextBox，它可以接受我自己的附加验证规则列表，FileNameValidationRule 有一个 PathStr 类型的 ValidPathStr，它有一个 InputPathStr 字符串依赖项属性。

为了测试我的理论，我尝试将 MyTextBox 的 Text 绑定设置为与 MyTextBox 的 InputPathStr 相同的绑定。Text 的绑定似乎有效（虽然不正确，但它仍然尝试解决绑定），但与 InputPathStr 的绑定给出了“未找到框架导师”错误。下面的跟踪显示了输出，第一个块是 Text 绑定，第二个块是失败的 InputPathStr 绑定。

我希望绑定要么都工作要么都失败，我应该如何更改 InputPathStr 的绑定以使其像 Text 一样工作？

谢谢。

```
 <my2:MyTextBox x:Name="m_renameTextBox" 
                            Text="{Binding Path=SourceBrowseDir.ItemFullPath, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}" >
        <my2:MyTextBox.AdditionalValidationRules>
            <src:FileNameValidationRule>
                <src:FileNameValidationRule.ValidPathStr>
                    <src:PathStr InputPathStr="{Binding Path=SourceBrowseDir.ItemFullPath, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"/>
                </src:FileNameValidationRule.ValidPathStr>
            </src:FileNameValidationRule>
        </my2:MyTextBox.AdditionalValidationRules>
    </my2:MyTextBox > 
```

输出是：

```
> Created BindingExpression (hash=3780752) for Binding (hash=63892678)
  Path: 'SourceBrowseDir.ItemFullPath'
BindingExpression (hash=3780752): Attach to ScreenControls.HelperUserControls.MyTextBox.Text (hash=20793123)
BindingExpression (hash=3780752): Resolving source 
BindingExpression (hash=3780752): Found data context element: MyTextBox (hash=20793123) (OK)
BindingExpression (hash=3780752): Activate with root item PresetsNavigatorViewModel (hash=34365244)
BindingExpression (hash=3780752):   At level 0 using cached accessor for PresetsNavigatorViewModel.SourceBrowseDir: RuntimePropertyInfo(SourceBrowseDir)
BindingExpression (hash=3780752): Replace item at level 0 with PresetsNavigatorViewModel (hash=34365244), using accessor RuntimePropertyInfo(SourceBrowseDir)
BindingExpression (hash=3780752): GetValue at level 0 from PresetsNavigatorViewModel (hash=34365244) using RuntimePropertyInfo(SourceBrowseDir): <null>
BindingExpression (hash=3780752):   Item at level 1 is null - no accessor
BindingExpression (hash=3780752): TransferValue - got raw value {DependencyProperty.UnsetValue}
BindingExpression (hash=3780752): TransferValue - using fallback/default value ''
BindingExpression (hash=3780752): TransferValue - using final value ''
> 
> Created BindingExpression (hash=56631954) for Binding (hash=47211710)
  Path: 'SourceBrowseDir.ItemFullPath'
BindingExpression (hash=56631954): Attach to ScreenControls.Helper.PathStr.InputPathStr (hash=40208759)
BindingExpression (hash=56631954): Use Framework mentor <null>
BindingExpression (hash=56631954): Resolving source 
BindingExpression (hash=56631954): Framework mentor not found
BindingExpression (hash=56631954): Resolve source deferred 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T16:22:06.530

[在这里](http://www.thomaslevesque.com/2011/03/21/wpf-how-to-bind-to-data-when-the-datacontext-is-not-inherited/)找到了解决方案。显然，这是由于`DataContext`没有被继承。

# html - 禁用编辑文本输入的默认值

> ID：13701923
> 
> 赞同：36
> 
> 时间：2012-12-04T11:32:22.213
> 
> 标签：html

我有一个搜索表格

```
<input id="price_from" value="price from ">
<input id="price_to" value="price to ">
<button>search</button> 
```

如何禁用默认文本的编辑？当用户开始输入价格金额时，无法编辑“price from”和“price to”，但它们会留在输入字段中。我已经为 jquery 尝试了不同的掩码插件，但是直到您专注于字段并且不提供自定义文本选项时它们才显示默认文本。只有占位符一个字符。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-12-04T11:39:04.177

You can either use the `readonly` or the `disabled` attribute. Note that when disabled, the input's value will not be submitted when submitting the form.

```
<input id="price_to" value="price to" readonly="readonly">
<input id="price_to" value="price to" disabled="disabled"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-04T11:41:39.617

I'm not sure I understand the question correctly, but if you want to prevent people from writing in the input field you can use the `disabled` attribute.

```
<input disabled="disabled" id="price_from" value="price from "> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-01-30T19:23:20.860

我不认为所有其他回答者都正确理解了这个问题。该问题需要禁用编辑**部分文本**。我能想到的一种解决方案是模拟具有**固定**前缀的文本框，该前缀不是文本区域或输入的一部分。

这种方法的一个例子是：

```
<div style="border:1px solid gray; color:#999999; font-family:arial; font-size:10pt; width:200px; white-space:nowrap;">Default Notes<br/>
<textarea style="border:0px solid black;" cols="39" rows="5"></textarea></div> 
```

我最终使用的另一种方法是使用 JS 和 JQuery 来模拟“禁用”功能。伪代码示例（不能是法律问题的具体原因）：

```
 // disable existing notes by preventing keystroke
  document.getElementById("txtNotes").addEventListener('keydown', function (e) {
    if (cursorLocation < defaultNoteLength ) {
            e.preventDefault();
  });

    // disable existing notes by preventing right click
    document.addEventListener('contextmenu', function (e) {
        if (cursorLocation < defaultNoteLength )
            e.preventDefault();
    }); 
```

感谢 Carsten 提到这个问题很老，但我发现该解决方案可能会在未来帮助其他人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-04T13:37:27.150

可能是因为我不能很好地解释你并不真正理解我的问题。一般来说，我找到了[解决方案](https://stackoverflow.com/a/2913366/1540196)。

对不起我的英语不好

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T11:42:09.297

怎么样`disabled=disabled`：

```
<input id="price_from" value="price from " disabled="disabled">​​​​​​​​​​​​ 
```

问题是如果您不希望用户编辑它们，为什么要在输入中显示它们？即使您想提交表单，也可以隐藏它们。而要显示信息，只需使用其他标签即可。

# sql - 实时表的历史视图的数据库触发器？

> ID：13701924
> 
> 赞同：0
> 
> 时间：2012-12-04T11:32:22.953
> 
> 标签：sql, sql-server-2005, database-trigger

我正在开发一个数据库来跟踪整个制造过程中物体的移动。目前我有一个“实时”表，其中包含目前正在处理的内容，包括它的当前位置（tLiveTable）

tLiveTable：

```
PieceID   TimeStamp            LocationRef
------------------------------------------
30        03/12/2012 09:16:26       8 
```

当 PieceID 移动到新位置时，我们执行更新，将 LocationRef 更新到新位置，并使用 GetDate() 更新时间戳。

但是，对于过去 PieceID 所在位置的历史视图，我还创建了一个跟踪表 (tPieceTracking)

tPieceTracking：

```
PieceID   TimeStamp            LocationRef      InOut
-----------------------------------------------------
30        03/12/2012 09:11:34       1             1
30        03/12/2012 09:12:13       1             0
30        03/12/2012 09:14:27       2             1
30        03/12/2012 09:15:01       2             0
30        03/12/2012 09:16:26       8             1 
```

InOut 含义：1 = 进入该位置，0 = 离开该位置

我最初的计划是每次 PieceID 移动时手动向 tPieceTracking 插入一条新记录。

我的问题是，我是否可以在 SQL 2005 SP3 中使用数据库触发器或其他类型的脚本，以便数据库可以自动执行此跟踪（这样我的应用程序不负责执行此操作）？

我研究了数据库触发器，但我遇到的第一个绊脚石是 MSSQL 显然不支持 BEFORE UPDATE，我认为这是我需要触发的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:43:10.910

```
CREATE TRIGGER trig ON tLiveTable AFTER UPDATE
AS
     INSERT INTO tPieceTracking select t.PieceID, getdate(), PrevLocation, 0
     FROM UPDATED t
     INNER JOIN
    (
        SELECT MAX(LocationRef) as PrevLocation, PieceID
        FROM tPieceTracking
        GROUP BY PieceID
    ) p on p.PieceID = t.PieceID

     INSERT INTO tPieceTracking select t.PieceID, getdate(), LocationRef, 1
     FROM UPDATED t 
```

类似的东西？我认为在 SQL Server 中，您实际上必须使用 INSERTED 和 DELETED 来计算已更新的内容（而不是“UPDATED”）

# c++ - 获取 boost 的类型值：任何进行强制转换的对象

> ID：13701925
> 
> 赞同：0
> 
> 时间：2012-12-04T11:32:24.243
> 
> 标签：c++, boost, boost-python

有什么方法可以获取我的 boost::any 对象的类型值以将其用于 any_cast？

```
 POSITION dictPos = CurrentSubMap->GetStartPosition();
    while(dictPos)
    {

        boost::any a = CurrentSubMap->GetValueAt(dictPos);
        if(a.type() == typeid(long))
            dictToAppend[CurrentSubMap->GetNextKey(dictPos)] = boost::any_cast<long>(a); 
        else
            dictToAppend[CurrentSubMap->GetNextKey(dictPos)] = boost::any_cast<CAtlString>(a);

    } 
```

它有效，但我需要一个动态解决方案，例如：

```
dictToAppend[CurrentSubMap->GetNextKey(dictPos)] = boost::any_cast<HERE_THE_TYPE_OF_a>(a); 
```

我用“a.type()”试过了，但它不起作用。

> “'ValueType' 的模板参数无效，预期类型”

# sql - Yii 查询生成器

> ID：13701928
> 
> 赞同：1
> 
> 时间：2012-12-04T11:32:40.207
> 
> 标签：sql, yii

如何使用 YIi 查询生成器构建此查询

```
SELECT First_Name,User_ID,
FROM `Users`
WHERE First_name LIKE $_GET['name'] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T13:39:22.447

正如 Örs 所说，一切都在[Yii 指南](http://www.yiiframework.com/doc/guide/1.1/en/database.query-builder)中！

```
$user = Yii::app()->db->createCommand()
    ->select('First_Name, User_ID')
    ->from('Users')
    ->where('First_name like :name', array(':name'=>$_GET['name']))
    ->queryRow(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-09T10:52:36.980

```
$cr = new CDbCriteria();
$cr->condition = "First_name LIKE '%:name%'";
$cr->params = array(':name'=>$_GET['name']);

$users = Users::model()->findAll($cr); 
```

其他方式

# wcf - 避免为 WCF 中的每个请求添加自定义标头？

> ID：13701930
> 
> 赞同：0
> 
> 时间：2012-12-04T11:32:45.573
> 
> 标签：wcf

我有一个 wcf 服务，由我们的一个团队提供，每次都需要从 SoapHeader 进行身份验证

```
scope = new OperationContextScope(objVendorServiceClient.InnerChannel);
header= MessageHeader.CreateHeader("Token", "NameSpace", Session["Token"]);
OperationContext.Current.OutgoingMessageHeaders.Add(header); 
```

AFAIK，因为 HTTP 是无状态协议，我需要每次为每个请求添加这些行。但根据要求，我不应该在我的代码中为每个请求显式调用这些（在函数中或直接）。所以我打算做的是，通过添加 HTTPHANDLER，在发送请求之前，我们可以通过 HTTP 将这些自定义标头添加到实际请求中吗？如果是的话，有人可以给我一个建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T08:48:04.290

最后在Leo Tang的帮助下，我做到了。他建议我使用作为冠军的 Message Inspectors。请找到链接以供进一步参考

[http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/4da32c89-b839-49af-805a-69e85bffecd8](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/4da32c89-b839-49af-805a-69e85bffecd8)

# c# - P/Invoke - 结构参数的简单添加

> ID：13701932
> 
> 赞同：1
> 
> 时间：2012-12-04T11:32:47.087
> 
> 标签：c#, .net, c, visual-c++, pinvoke

我有这个 C 代码：

```
real_T addition(const struct_T parameters)
{
    return parameters.a + parameters.b;
}

typedef struct
{
    real_T a;
    real_T b;
} struct_T;

typedef double real_T; 
```

我像这样从 C# 调用它：

```
using System.Runtime.InteropServices;

    namespace AdditionConsoleApplication
    {
        class Program
        {
            [DllImport(@"X:\Bla\Addition.dll", CallingConvention = CallingConvention.Cdecl)]
            public static extern double addition(struct_T parameters);

            static void Main(string[] args)
            {
                struct_T parameters = new struct_T();
                parameters.a = 1;
                parameters.b = 3;

                Console.WriteLine(addition(parameters));
            }
        }
    } 
```

这里struct_T：

```
[StructLayout(LayoutKind.Sequential)]
class struct_T
{
    public double a;
    public double b;
} 
```

不幸的是，数学不正确：

2.72645911468311E-284

有人能看出什么不对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T15:57:47.780

您对结构有以下定义：

```
[StructLayout(LayoutKind.Sequential)]
class struct_T
{
    public double a;
    public double b;
} 
```

*p/invoke marshaller 将通过引用*来编组类。换句话说，指向对象的指针被传递给本机代码。这种不匹配解释了程序失败的原因。

解决方案是确保接口的两侧匹配。一种方法是通过双方*的价值传递。*实现此目的的一种简单方法是将结构声明为 C# 中的值类型。通过使其成为结构来做到这一点：

```
[StructLayout(LayoutKind.Sequential)]
struct struct_T
{
    public double a;
    public double b;
} 
```

另一种方法是在双方通过引用传递。您可以通过`class`在 C# 端使用并更改 C 代码来实现。

```
real_T addition(const struct_T* parameters)
{
    return parameters->a + parameters->b;
} 
```

# css - Internet Explorer 无法识别 css

> ID：13701934
> 
> 赞同：1
> 
> 时间：2012-12-04T11:32:52.407
> 
> 标签：css, internet-explorer

我使用 Chrome 制作了我的网页，却忘了查看我的网页在 IE 中的加载方式。当我在 IE 中打开它时，看起来浏览器甚至没有使用 css。下面是我放在`<head>`html 文件中的代码：

```
<!DOCKTYPE HTML>

 <html>

 <head>

 <title></title>

 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <link rel=StyleSheet href="largecw.css" TYPE="text/css" media=screen/>
 <script src="largecw.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T12:09:05.887

Issues **1**

```
<!DOCKTYPE HTML> 
```

it should be DOCTYPE

Issue **2**

```
 <link rel=StyleSheet href="largecw.css" TYPE="text/css" media=screen/> 
```

in this line **media=screen** is connected with **/** (**media=screen/**) and so it is not able to recognize media so better put it under quotes

```
 <link rel=StyleSheet href="largecw.css" TYPE="text/css" media="screen"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T12:20:26.057

在您`<link>`使用未引用的属性并结合关闭`/>`属性值`media`设置为`screen/`. 这是一个无效的媒体查询，因此未加载 CSS 文件。始终引用属性可以防止此类错误，另请参阅[https://stackoverflow.com/a/6495345/723769](https://stackoverflow.com/a/6495345/723769)

要解决此问题，请引用您的所有属性或在之前添加一个额外的空格`/>`（或完全省略，`/`因为它在 HTML5 中不是必需的）。

此外，您有一个错误的文档类型，这会导致在 IE 中呈现 Quirksmode。应该是`<!doctype html>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T12:11:54.653

试试这个代码：

```
<!DOCTYPE HTML>

 <html>

 <head>

 <title></title>

 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
 <link rel="stylesheet" href="./largecw.css" type="text/css" media="screen" />
 <script src="./largecw.js" type="text/javascript"></script> 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-04T11:38:25.067

你需要用 " " 包裹你的 rel="StyleSheet" 和 media="screen"

Chrome在加载头方面没有IE那么严格

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T11:56:26.783

检查指定的css文件的路径，有可能在指定的路径找不到资源。（如果你有一些单独的文件夹来保存css文件，请尝试添加其父目录）

```
e.g. 
  <link rel="stylesheet" href="css/largecw.css" type="text/css" media="screen"/> 
```

再次检查路径。

# sql - 加快选择不同的 PostGreSQL 查询

> ID：13701939
> 
> 赞同：1
> 
> 时间：2012-12-04T11:33:10.393
> 
> 标签：sql, postgresql, distinct

我有一个网络日志列表。每行都有一个时间戳，我需要提取不同的时间戳，以便我可以将它们用于以后的查询。目前我正在使用以下查询：

```
select distinct time from metastatus 
```

现在我首先要确认`select distinct`查询返回排序值？

其次，我已经创建了数据库用于上述查询的时间索引。

最后，我确实考虑过检索所有时间，然后通过我的代码找到唯一值，但是对于我来说，检索所有时间（160,000,000）的值太多了。

谢谢，詹姆斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:48:11.857

获取`DISTINCT`PostgreSQL 使用的值的常用方法是对行进行排序，然后选择每组中的第一个。这就是为什么你通常会得到一个排序的结果，但 Postgres 对顺序没有任何断言。只需添加一个`ORDER BY`同意该`DISTINCT`条款的内容。无论如何，从文档的角度来看它会更好。通常不会花费任何额外费用。检查`EXPLAIN ANALYZE`以确认。

在 Postgres 之外检索所有行并进行排序的想法是无稽之谈。这甚至不可能接近针对此类任务进行了优化的 RBDMS 的性能。您还会通过电线传输相当多的噪音。考虑这个[相关问题](https://stackoverflow.com/q/7510092/939860)下的答案。

# javascript - 表单提交绕过 javascript 验证

> ID：13701954
> 
> 赞同：0
> 
> 时间：2012-12-04T11:34:02.887
> 
> 标签：javascript, html

下面的提交绕过了 javascript 验证。是因为 onclick 还是我错过了什么？

谢谢

**形式**

```
<form name="myprofile" action="do_update" method="post" onsubmit="return validate_submission(this.name)">
   <input type="text" id="text_fullname" name="text_fullname" value="" maxlength="100" />
   <div id="submit_button" onclick="document.myprofile.submit()">SUBMIT</div>
</form> 
```

**JS**

```
function validate_submission(formname)
{
    alert(formname); return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:44:18.863

您正在使用`onclick`的不是您正在使用`form_ref.submit()`的提交表单而不触发`submit`事件的方法。

您的选择：

*   使用真正的提交按钮（不要`submit()`用 JS 调用）。这是最好的选择。它将以屏幕阅读器表单模式显示。它可以被标签到。如果 JS 没有打开，它将工作。
*   调用验证函数并在调用之前检查结果`submit()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:49:37.670

添加一个额外的提交脚本，并从 div 调用它...

```
<script>
    function validate_submission(formname)
    {
        var is_valid = false;

        if (formname == 'myprofile')
        {
            is_valid = true;
        }

        perform_submit(formname, is_valid);
    }

    function perform_submit(formname, is_valid)
    {
        if (is_valid === true)
        {
            document.myprofile.submit()
        }
        else
        {
            alert('Invalid');
        }
    }
</script>
<form name="myprofile" action="do_update" method="post" onsubmit="return validate_submission(this.name)">
   <input type="text" id="text_fullname" name="text_fullname" value="" maxlength="100" />
   <div id="submit_button" onclick="validate_submission('myprofile')">SUBMIT</div>
</form>
</body> 
```

# java - hql 中的右外连接为和条件提供了意外的标记

> ID：13701961
> 
> 赞同：0
> 
> 时间：2012-12-04T11:34:25.727
> 
> 标签：java, hibernate, hql, outer-join

我正在使用休眠 3.0。我正在应用正确的外部联接。我的查询是

```
List<Integer> phaseCount1 = getHibernateTemplate().find("select count(phasesPlan.phaseid.id) as Phase from PhasePlan phasesPlan RIGHT JOIN " +
            "phasesPlan.phaseid as phasedetails and phasesPlan.teamid.teamid=? group by phasedetails.id",team_id); 
```

在这种情况下，and 条件 ( `phasesPlan.phaseid as phasedetails **and** phasesPlan.teamid.teamid=?`) 给出了意外的令牌异常。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:49:23.417

您需要将“and”替换为“where”：-

```
find("select count(phasesPlan.phaseid.id) as Phase 
from PhasePlan phasesPlan RIGHT JOIN " +
    "phasesPlan.phaseid as phasedetails **where** phasesPlan.teamid.teamid=? 
group by phasedetails.id",team_id) 
```

# asp.net - 布尔属性上的过滤集合不起作用

> ID：13701964
> 
> 赞同：0
> 
> 时间：2012-12-04T11:34:41.733
> 
> 标签：asp.net, linq, ado.net

我想在其中一个类属性上过滤我的列表`isactive`。但它没有正确过滤它显示所有项目。下面是代码。

```
Roaster_Driver[] drivers = null;
drivers = client.GetDriverDetail();
List<Roaster_Driver> drvrs = drivers.Where(x => x.isactive = true).ToList(); 
```

它显示了所有的项目，`drvrs`即使有一些不活动的项目`drivers`。`drivers`当我调试程序并应用第三个 LINQ 语句时， get中的所有布尔状态都由`True`. 我也尝试了以下替代方法，但对我不起作用。

```
 var drvrs = (from driver in drivers
                     where driver.isactive = true
                     select driver); 
```

我的代码中缺少什么或需要任何更改，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T11:35:31.373

您必须使用`==`而不是`=`进行比较

```
List<Roaster_Driver> drvrs = drivers.Where(x => x.isactive == true).ToList(); 
```

或者

```
List<Roaster_Driver> drvrs = drivers.Where(x => x.isactive).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:35:39.770

C# 中的比较是通过`==`运算符完成的，而不是单一`=`的（即赋值）。

```
List<Roaster_Driver> drvrs = drivers.Where(x => x.isactive == true).ToList(); 
```

此外，您不需要将布尔值与`true`或`false`- 直接使用值进行比较：

```
List<Roaster_Driver> drvrs = drivers.Where(x => x.isactive).ToList(); 
```

查询语法：

```
var drvrs = from driver in drivers
            where driver.isactive
            select driver; 
```

# c# - 针对 WPF 中的项目集合的可见性

> ID：13701965
> 
> 赞同：0
> 
> 时间：2012-12-04T11:34:45.027
> 
> 标签：c#, wpf, grid, imultivalueconverter

我有下拉菜单和网格。在网格列中有超链接。如果下拉集合包含 1 个项目，那么下拉列表应该是不可见的。我的意思是需要一个逻辑来将可见性与项目集合绑定。

这是 GRid 中一个超链接的 XAML。

```
 <!--Associate-->
                    <TextBlock Margin="10, 0, 0, 0">                                    
                        <TextBlock.Visibility>                                           
                                 <MultiBinding Converter="{StaticResource courseListVisibilityConverter}"
                                                     ConverterParameter="Associate">
                                          <Binding Path="IsCourseAssocited"
                                                   RelativeSource="{RelativeSource Mode=FindAncestor,AncestorType={x:Type DPA2:TakenCoursesNotApplied}}" />
                                            <Binding Path="DataContext"
                                                     RelativeSource="{RelativeSource Self}" />
                                       </MultiBinding>
                            </TextBlock.Visibility>

                        <Hyperlink DataContext="{Binding}"
                                   Name="Associate"
                                    IsEnabled="{Binding RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type TextBlock}}, Path=IsVisible}"
                                    Click="Associate_Click">
                            <TextBlock TextWrapping="Wrap"
                                        Text="Associate" />
                        </Hyperlink>
                    </TextBlock>

 public class CourseListVisibilityConverter : IMultiValueConverter
{
    public object Convert(object[] value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value == null || value[0] == null || value[1] == null) return Visibility.Collapsed;
        bool IsEditMode = value[0] == DependencyProperty.UnsetValue ? false : (bool)value[0];

        if (value[1].GetType() == typeof(Course))
        {
            Course course = value[1] as Course;
            if (course == null) return string.Empty;

            //Visibility retVal = Visibility.Visible;
            switch (parameter.ToString())
            {
                case "CodeLink":
                    if (!IsEditMode) return Visibility.Collapsed;
                    if (course.HideOptions) return Visibility.Collapsed;
                    if (course.IsInElectivePool &&
                        course.IsManualAdd) return Visibility.Visible;
                    if (!course.IsInElectivePool &&
                            !course.IsWaived) return Visibility.Visible;

                    if (course.IsInElectivePool &&
                        course.FulFillmentId != 0 &&
                        course.FulFillmentId != -1 &&
                        !course.IsWaived) return Visibility.Visible;

                    return Visibility.Collapsed;

                case "CodeNoLink":
                    if (!IsEditMode) return Visibility.Visible;
                    if (course.HideOptions) return Visibility.Visible;

                    if (course.IsInElectivePool &&
                        course.IsManualAdd) return Visibility.Collapsed;
                    if (!course.IsInElectivePool &&
                          !course.IsWaived) return Visibility.Collapsed;

                    if (course.IsInElectivePool &&
                        course.FulFillmentId != 0 &&
                        course.FulFillmentId != -1 &&
                        !course.IsWaived) return Visibility.Collapsed;

                    return Visibility.Visible;

                case "Waive":
                    if (course.HideOptions) return Visibility.Collapsed;
                    if (IsEditMode &&
                        !course.IsWaived &&
                         !(course.RetakenFlag == RetakeFlagType.RetakeOfCourse) &&
                        !course.IsInElectivePool) return Visibility.Visible;
                    return Visibility.Collapsed;

                case "UndoWaive":
                    if (course.HideOptions) return Visibility.Collapsed;
                    if (IsEditMode && course.IsWaived &&
                          !(course.RetakenFlag == RetakeFlagType.RetakeOfCourse) &&
                        !course.IsInElectivePool) return Visibility.Visible;
                    return Visibility.Collapsed;

                case "UndoAdd":
                    if (course.HideOptions) return Visibility.Collapsed;
                    if (IsEditMode && course.IsManualAdd &&
                        (!(course.RetakenFlag == RetakeFlagType.RetakeOfCourse) &&
                         !course.IsInElectivePool)) return Visibility.Visible;
                    return Visibility.Collapsed;
                case "Associate":
                    if (course.HideOptions) return Visibility.Collapsed;
                    if (IsEditMode && course.IsCourseAssocited)
                        return Visibility.Collapsed;
                    else if (IsEditMode &&
                        ((course.Status.ToUpper() == "COMPLETE" || course.Status.ToUpper() == "DROPPED")))
                    {
                        return Visibility.Visible;
                    }
                    else
                    {
                        return Visibility.Collapsed;
                    }
                //case "UnAssociate":
                //    if (course.HideOptions) return Visibility.Collapsed;
                //    if (IsEditMode && (course.IsCourseAssocited))

                //    {
                //        return Visibility.Visible;
                //    }
                //    else
                //    {
                //        return Visibility.Collapsed;
                //    }
                case "FullFillRequirement":
                    if (course.HideOptions) return Visibility.Collapsed;
                    if (IsEditMode &&
                        ((course.Status.ToUpper() == "FUTURE")))
                    {
                        return Visibility.Visible;
                    }
                    else
                    {
                        return Visibility.Collapsed;
                    }
                default:
                    return Visibility.Collapsed;
            }
        }
        else if (value[1].GetType() == typeof(ElectivePool))
        {
            ElectivePool electivePool = value[1] as ElectivePool;
            if (electivePool == null) return string.Empty;

            switch (parameter.ToString())
            {
                case "Waive":

                    if (IsEditMode &&
                        !electivePool.IsWaived) return Visibility.Visible;
                    return Visibility.Collapsed;

                case "UndoWaive":
                    if (IsEditMode &&
                        electivePool.IsWaived) return Visibility.Visible;
                    return Visibility.Collapsed;
            }
        }
        return Visibility.Visible;
    }

    public object[] ConvertBack(object value, Type[] targetType, object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T12:02:17.777

您可以将可见性绑定到 HasItems 属性并使用[BooleanToVisibilityConverter](http://msdn.microsoft.com/en-us/library/system.windows.controls.booleantovisibilityconverter.aspx)

```
Visibility="{Binding HasItems,ElementName=ELementName,Converter={StaticResource BooleanToVisibilityConverter}" 
```

[或做这样或这样](https://stackoverflow.com/questions/7905881/wpf-treeviewitem-toggle-button-visibility)的[事情](https://stackoverflow.com/questions/1384451/xamly-determine-if-a-listbox-items-count-0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T11:57:29.413

1.  IsVisible 不是 TextBlock 的属性，需要使用[Visibility](http://msdn.microsoft.com/en-us/library/system.windows.uielement.visibility.aspx)属性；
2.  `RelativeSource="{RelativeSource Mode=FindAncestor,AncestorType={x:Type DPA2:TakenCoursesNotApplied}}"`- 除非您的类型是 TextBlock 上方可视树中的控件，否则您不能使用`FindAncestor`语句。`DPA2:TakenCoursesNotApplied`

也许您需要一些值转换器来接受集合中元素的计数并`Visibility.Collapsed`在 count == 1 时返回。

# android - 为什么 android:background 对我不起作用？

> ID：13701966
> 
> 赞同：0
> 
> 时间：2012-12-04T11:34:45.290
> 
> 标签：android, android-layout, background

我的布局文件如下

```
<?xml version="1.0" encoding="UTF-8" ?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".LimeText" >

    <TextView
        android:id="@+id/file_title"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        ***android:background="@color/red"***
        android:text="@string/untitled" />

    <ScrollView  
       xmlns:android="http://schemas.android.com/apk/res/android"
       android:id="@+id/scroll"
       android:orientation="vertical"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:fadingEdge="none">

            <EditText
           xmlns:android="http://schemas.android.com/apk/res/android"
           android:id="@+id/file_content"
            ***android:background="@android:color/white"***
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:padding="5dip"
                android:fadingEdge="none"
                android:scrollbars="vertical|horizontal"
                android:gravity="top"
                android:autoText="false"
                android:capitalize="none" />

    </ScrollView>
</LinearLayout> 
```

但无论我如何更改背景，`EditText`的背景总是保持黑色，而 '`TextView`的背景总是灰色。灰色`TextView`是之前设置的，#CCCCCC，但现在我想将其更改为另一个`color`，它不能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T13:01:30.677

您的颜色代码文件必须在此路径上。

```
res/values/colors.xml 
```

有以下内容

```
<?xml version="1.0" encoding="utf-8"?>
    <resources>
        <color name="edittext_color">#000000</color>
        <color name="text_color">#00FFFF</color>
    </resources> 
```

现在以这种方式使用它。

```
<EditText
    android:id="@+id/my_edit"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:maxLength="5"
    android:background="@color/edittext_color" /> 
```

希望这可以帮助。

谢谢。

# web-services - JPA 中未处理的异常

> ID：13701970
> 
> 赞同：0
> 
> 时间：2012-12-04T11:34:56.120
> 
> 标签：web-services, jpa, transactions

我们开发了无状态 Web 服务实现。我们使用 JPA 作为 ORM 层来执行数据库操作。在服务方法中，我们使用实体管理器来持久化实体。在将相同的记录保留到表中时，我们无法处理服务方法中的那些异常“由：java.sql.SQLIntegrityConstraintViolationException：ORA-00001：违反唯一约束 (TIGOSUSCRIPTIONES.SYS_C0020549)”异常引起。它直接在客户端结果中抛出以下异常。

```
 Exception in thread "main" javax.xml.ws.soap.SOAPFaultException: Transaction rolled back
        at com.sun.xml.internal.ws.fault.SOAP11Fault.getProtocolException(SOAP11Fault.java:178)
        at com.sun.xml.internal.ws.fault.SOAPFaultBuilder.createException(SOAPFaultBuilder.java:111)
        at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:108)
        at com.sun.xml.internal.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:78)
        at com.sun.xml.internal.ws.client.sei.SEIStub.invoke(SEIStub.java:107)
        at $Proxy30.registerSaleOutcome(Unknown Source)

      How can I handle this exception? Following is the code we used in service method business logic.

@TransactionAttribute(TransactionAttributeType.REQUIRED)
public void recycleOperation(Recycle recycle) throws RecycleFault_Exception{
  try {
    em.persist(recycle);
  } catch(Exception e){
    // not coming to this block
    log.error("Exception in Data Insertion:"+e.getMessage());
    RecycleFault fault = new RecycleFault();
    fault.setErrorCode("101");
    fault.setMessage("Record is already Existed");
    RecycleFault_Exception faultExp = 
        new RecycleFault_Exception("RecycleFault Exception", fault);
    throw faultExp;
  }
} 
```

你能帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T14:58:51.723

```
@TransactionAttribute(TransactionAttributeType.REQUIRED) 
```

这导致该方法被包装在一个 JTA 事务中，当事务失败时，将向调用者抛出异常。您将需要在调用者中处理此问题，或通过异常处理程序，或切换方法以使用 bean 托管事务。

您还可以在 JPA 中调用 flush()，这将触发约束异常，并允许您处理它。但是 JTA 事务仍然会失败。

# perl - Perl - 计算文件每一行中的变量

> ID：13701980
> 
> 赞同：0
> 
> 时间：2012-12-04T11:35:32.910
> 
> 标签：perl, variables, hash, count

我有两个文件：allinfo.txt 和 chr1.txt。

allinfo.txt 看起来像

```
rs4477212    1   82154       A   A
rs3094315    1   752566      G   A 
rs3131972    1   752721      A   G 
rs12124819   1   776546      A   G 
```

而 chr1.txt 看起来像

```
rs4477212    1   82154       A  A
rs3094315    1   752566      A  G
rs3131972    1   752721      A  G
rs12124819   1   776546      A  A 
```

尽管这两个文件看起来很相似，但它们所携带的信息实际上却大不相同。但是，基本上，我想要做的是：对于 allinfo 中的每一行，我想获取第四列中的字母并在 chr1 中的相应行中搜索该字母并计算它出现的次数。如果它出现两次，我想将 1 0 0（三列）附加到该行的 allinfo。如果它只出现一次，我想将 0 1 0（同样是三列）附加到 allinfo 的那一行。如果它没有出现，我想将 0 0 1 附加到 allinfo 的那一行。如果我真的能做到这一点，我应该得到以下信息：

```
rs4477212    1   82154       A   A  1 0 0
rs3094315    1   752566      G   A  0 1 0
rs3131972    1   752721      A   G  0 1 0
rs12124819   1   776546      A   G  1 0 0 
```

首先请注意，前五列正是 allinfo.txt 文件中已有的内容。由于 chr1 在第一行有两个 A，所以我必须将 1 0 0 附加到第一行。看第二行，由于 chr1 在第二行只有一个 G，那么我必须在第二行附加 0 1 0 。其余类似。

到目前为止我的代码：

```
#!/usr/bin/perl

use strict;
use warnings;

use File::Slurp;

use Data::Dumper;

open(FILE, '<', 'test_chr1_allinfo.txt');

my @array = read_file('test_chr1.txt');

my %hash;
while (<FILE>)
{
    (my $rs, my $chr, my $bp, my $a0, my $a1) = split(" ");
    my $line = $.;
    my $allele = $a0;
    $hash{$line} = $allele;
}   

foreach my $item (keys %hash)
{
...
} 
```

如您所知，我不确定我将如何进行 foreach 循环。我通过将键作为该行中第一个等位基因的行号并将其分配给该行中列出的第一个等位基因来构建我的哈希。然后，我将遍历我的哈希，对于每个项目，查看 chr1 中的特定行并计算等位基因出现的次数。根据这个数字，我可以找出在我需要的三列中放置 1 的位置。但是，我不知道如何编写代码，因为我刚开始为这个项目学习 Perl。有人有想法么？

我遇到的另一个问题是：当我打印我的哈希以便查看其中的内容时，为什么它会乱七八糟？根据我的构建方式，我希望它看起来像

```
1 => A
2 => G
3 => A
4 => A 
```

但是，我得到类似的东西

```
4 => A
2 => G
3 => A
1 => A 
```

为什么会这样？

提前感谢您的任何建议/建议/帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T11:58:00.007

此代码符合您的要求。请注意，仅使用最后一列，因为其余列对于任务并不重要。如果您实际上有更多的 chr* 文件要处理，那么使用 allinfo.txt 是有意义的。在这种情况下，您不必打印输出，而是必须记住数组中的三个数字并在 ifs/elses 中适当地加 1（例如 as `@counts[$.][0]++`）。

```
#!/usr/bin/perl
use warnings;
use strict;

open my $ALL, '<', 'allinfo.txt' or die $!;
open my $CHR, '<', 'chr1.txt'    or die $!;

while (<$ALL>) {
    chomp;
    my @alleles_all = (split)[-2, -1];
    chomp(my $chr = <$CHR>); # Reads both files line by simultaneously.
    my @alleles_chr = (split ' ', $chr)[-2, -1];
    if ($alleles_chr[0] eq $alleles_chr[1]) {
        if ($alleles_chr[0] eq $alleles_all[0]) {
            print "$_\t1\t0\t0\n";
        } else {
            print "$_\t0\t0\t1\n";
        }
    } else {
        print "$_\t0\t1\t0\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T13:00:20.917

这会成功的

```
use strict;
use warnings;

open my $all, '<', 'allinfo.txt' or die $!;
open my $chr1, '<', 'chr1.txt' or die $!;

while (my $line = <$all>) {

  chomp $line;
  my $f4 = (split ' ', $line)[3];

  my $line2 = <$chr1>;
  my $n = grep $_ eq $f4, (split ' ', $line2)[3, 4];

  my @newline = ($line, 0, 0, 0);
  $newline[-($n+1)] = 1;
  print "@newline\n";
} 
```

**输出**

```
rs4477212    1   82154       A   A  1 0 0
rs3094315    1   752566      G   A  0 1 0
rs3131972    1   752721      A   G  0 1 0
rs12124819   1   776546      A   G  1 0 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T17:29:18.013

这是另一种选择：

```
use Modern::Perl;
use File::Slurp qw/read_file/;

my %patterns = ( 0 => "0\t0\t1", 1 => "0\t1\t0", 2 => "1\t0\t0" );

chomp( my @allinfo = read_file 'allinfo.txt' );
my @chr1 = read_file 'chr1.txt';

for my $i ( 0 .. $#allinfo ) {
    my $allinfoCol3 = ( split ' ', $allinfo[$i] )[3];
    my ($chr1Cols) = $chr1[$i] =~ /(\S+\s+\S+)$/;
    my $count = () = $chr1Cols =~ /$allinfoCol3/g;
    say "$allinfo[$i]\t$patterns{$count}";
} 
```

输出：

```
rs4477212    1   82154       A   A  1   0   0
rs3094315    1   752566      G   A  0   1   0
rs3131972    1   752721      A   G  0   1   0
rs12124819   1   776546      A   G  1   0   0 
```

# iphone - setBackgroundImage:forToolbarPosition:barMetrics: 不是从 AppDelegate 调用

> ID：13701986
> 
> 赞同：2
> 
> 时间：2012-12-04T11:36:02.247
> 
> 标签：iphone, image, background, toolbar

我有奇怪的错误（？）

如果我从 UIApplicationDelegate application:didFinishLaunchingWithOptions: 调用 setBackgroundImage:forToolbarPosition:barMetrics: ，它工作正常并且工具栏背景更改为我的图像。

如果我尝试将此调用设置到另一个地方，例如 viewDidLoad，它就不起作用。

代码很简单，这段代码有效：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [[UIToolbar appearance] setBackgroundImage:[UIImage imageNamed:@"bg"] forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault];
    return YES;
} 
```

这不会：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [[UIToolbar appearance] setBackgroundImage:[UIImage imageNamed:@"bg"] forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T09:33:05.490

您必须在项目实例化之前设置外观代理值。如果您的工具栏已经从 XIB 实例化，则 viewDidLoad 可能为时已晚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T12:11:04.697

调用该方法后，系统会为应用程序中的所有 UIToolBars 采用新外观代理，但您需要调用 [navitagtionController.view setNeedsDisplay]; 所以控制器的层是绘制的，特别是如果你在导航控制器的根控制器的 viewDidLoad 中调用它。

请记住，iOS 原生控制器在图层绘制方面非常高效，因此它只会在绘制控制器视图时更新根视图控制器的框架（或实际需要更新的最低限度）；如果我没有弄错，即使设置导航控制器的标题也会成功（但按下按钮或更改它们不会产生任何影响，原因与仅更新按钮层相同）。

在这种情况下，在创建代理后调用 [myToolbarInstance setNeedDisplay]。通过这种方式，您可以随时更改任何控制器的外观，甚至可以利用它节省一些重绘调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T14:05:59.200

你确定 viewDidLoad 被调用了吗？（例如，它不在 UIView 而不是 UIViewController 中）

# objective-c - 加载通知时如何加载其他视图？

> ID：13701988
> 
> 赞同：2
> 
> 时间：2012-12-04T11:36:02.567
> 
> 标签：objective-c, apple-push-notifications

我正在使用 Xcode 4.5.1

我需要 anwser 如何加载其他视图？加载通知时..

我使用本地通知编写程序。

该程序可以在应用程序处于后台时发出警报。

我能怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:51:29.480

根据触发通知时应用程序的状态，您将在两个地方收到有关 UILocalNotification 的通知。

在 application:didFinishLaunchingWithOptions: 方法中，如果应用程序既没有运行也没有在后台运行。

*   (BOOL)应用程序:(UIApplication *)应用程序 didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

    UILocalNotification *localNotif = [launchOptions objectForKey:UIApplicationLaunchOptionsLocalNotificationKey];
    if (localNotif) {
    // 在此处打开您的自定义视图 } ... }

# android - 如何从日期选择器对话框中获取日期并在显示前添加天数

> ID：13701991
> 
> 赞同：1
> 
> 时间：2012-12-04T11:36:08.883
> 
> 标签：android, datepicker

我无法从 datepicker 获取日期并添加修复天数并显示在文本字段中。

我有一个两个文本框和一个按钮。我在按钮上实现 datepicker 对话框并在一个文本框中显示该日期，但我想在 datepicker 日期中添加 270 天并在 textbox2 上显示新日期。我想在 datepicker_date 中添加 270 天并在 newdate 文本字段中显示。

这是我的程序

```
public void setCurrentDateOnView() {

    datepicker_date = (TextView) findViewById(R.id.datepicker);
            newdate = (TextView) findViewById(R.id.datepicker1);

    //dpResult = (DatePicker) findViewById(R.id.dpResult);

    final Calendar c = Calendar.getInstance();
    year = c.get(Calendar.YEAR);
    month = c.get(Calendar.MONTH);
    day = c.get(Calendar.DAY_OF_MONTH);

    // set current date into textview
    datepicker_date.setText(new StringBuilder()
            // Month is 0 based, just add 1
            .append(month + 1).append("-").append(day).append("-")
            .append(year).append(" "));
    // set current date into datepicker
}

public void addListenerOnButton() {

    date = (Button) findViewById(R.id.date);

    date.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

            showDialog(DATE_DIALOG_ID);

        }
    });
}

@Override
protected Dialog onCreateDialog(int id) {
    switch (id) {
    case DATE_DIALOG_ID:
        // set date picker as current date
        return new DatePickerDialog(this, datePickerListener, year, month,
                day);

    }
    return null;
}

private DatePickerDialog.OnDateSetListener datePickerListener = new DatePickerDialog.OnDateSetListener() {

    // when dialog box is closed, below method will be called.

    public void onDateSet(DatePicker view, int selectedYear,
            int selectedMonth, int selectedDay) {
        year = selectedYear;
        month = selectedMonth;
        day = selectedDay;

        // set selected date into textview
        datepicker_date.setText(new StringBuilder().append(month + 1)
                .append("-").append(day).append("-").append(year)
                .append(" "));

        // set selected date into datepicker also
        //dpResult.init(year, month, day, null);

    }
};

 public void setCurrentDate1OnView() {

        newdate = (TextView) findViewById(R.id.datepicker1);
        //dpResult = (DatePicker) findViewById(R.id.dpResult);

        final Calendar c = Calendar.getInstance();
        year1 = c.get(Calendar.YEAR);
        month1 = c.get(Calendar.MONTH);
        day1 = c.get(Calendar.DAY_OF_MONTH);

        // set current date into textview

        newdate.setText(new StringBuilder()
        // Month is 0 based, just add 1
        .append(month1 + 1).append("-").append(day1).append("-")
        .append(year1).append(" "));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T11:38:34.867

为您的目的使用[joda-time](http://joda-time.sourceforge.net/quickstart.html)包。

```
import org.joda.time.LocalDateTime;
....

Calendar cal = Calendar.getInstance();
long timeInMillA = cal.getTimeInMillis();
LocalDateTime startA = new LocalDateTime(timeInMillA);

//add 270 days:
startA.plusDays(270);
.... 

Period p = new Period(startA);
  p.getMonths();
  p.getYears();
  p.getWeeks();
  p.getHours();
  p.getMinutes();
  .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T11:49:38.703

您可以通过这种方式将 270 天添加到所选日期：

```
public void onDateSet(DatePicker view, int selectedYear,
                      int selectedMonth, int selectedDay) {
    Calendar c = Calendar.getInstance();
    c.set(selectedYear, selectedMonth, selectedDay);
    c.add(Calendar.DAY_OF_MONTH, 270);
} 
```

此外，您可以以更简单的方式格式化显示日期，而不是通过连接字符串来搞乱：

```
import java.text.DateFormat;

textView.setText(DateFormat.getDateInstance().format(calendar.getTime())); 
```

如果您希望使用特定格式，则：

```
SimpleDateFormat sdf = new SimpleDateFormat("MM-dd-yyyy", Locale.US);
textView.setText(sdf.format(calendar.getTime())); 
```

# c# - 处理 ASCII 文件中的 Unicode 字符？

> ID：13701992
> 
> 赞同：0
> 
> 时间：2012-12-04T11:36:11.670
> 
> 标签：c#, unicode

我有一个 XML 文件，我在 C# 中使用 XmlSerializer 将其保存为 ASCII/UTF-8。一个字段包含文件夹路径位置。我最近发现，在非英语语言的 Windows 系统上，路径字段中可以有特殊字符。我可以将整个文件保存为 Unicode/UTF-16，但为了几个字符，文件大小会增加一倍。

有没有办法将非 ASCII 字符插入到其他 ASCII 字符串中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T11:40:25.157

没有 ASCII/UTF-8 这样的东西。这是两种不同的编码，实际上编码不同的字符集。我怀疑您目前实际上正在使用 ASCII，或者可能是 Windows ANSI。

UTF-8 是 Unicode 的完整编码。如果文件仅包含 ASCII 字符，则 UTF-8 编码与 ASCII 编码相同。如果您的文件主要是英文，那么 UTF-8 是产生最小文件的 Unicode 编码。

结论：使用 UTF-8。

# ruby-on-rails-3 - 在 fields_for 中计数

> ID：13701996
> 
> 赞同：2
> 
> 时间：2012-12-04T11:36:21.863
> 
> 标签：ruby-on-rails-3, fields-for

我有一个旅行中的旅行地点列表，我想编辑。旅行地点与我的旅行（旅行中的很多地点）相关联。在我的编辑表单中，我想将每个位置从 1 编号到 * 以供用户查看。我知道有一个名为 each_with_index 的选项。但这不适用于我，因为我需要使用 fields_for。

我在 SO (http://stackoverflow.com/questions/4853373/rails-fields-for-with-index) 上看到了一个解决方案，但是如果我在@trip 上使用 each_with_index，我只会算到 1（只有 1显然我的旅行编辑中的旅行）。如果我在其中使用 @trip.triplocations 和其中的 fields_for，我会得到 3 倍相同的输出（存在 3 个位置），这也不是我想要的。

我真正想要的是：

1 标题：DB 值 描述：DB 值

2 标题：DB 值 描述：DB 值

该表单就像使用 fields_for 一样具有魅力。但我只是错过了每种形式的计数。有人可以帮我吗？

这是我的旅行编辑表格：

```
<%= form_for(@trip) do |f| %>
    <br> <br>
    <%= f.label :title %><br />
    <%= f.text_field :title %>
    <br> <br>
    <%= f.label :description %><br />
    <%= f.text_area :description %>
    <br> <br>
    <%= f.fields_for :triplocations do |a| %>
        <p class="locations">
            <%= a.label :title, 'Titel:' %>
            <%= a.text_field :title, :id => 'titleField' %>

            <%= a.label :description, 'Omschrijving:' %>
            <%= a.text_field :description , :id => 'descriptionField'%>

            <%= a.hidden_field  :latlng, :id => 'latlngField' %>
        </p> 
        <div id="inputFields"></div>
    <% end %>
    <%= f.submit :value => "Route opslaan" %>
<% end %> 
```

编辑：我现在通过基本的 i = 1 并在 fields_for 循环 i = i+1 的末尾修复它。但我相信其他人可以想出更好的方法，对吧？