# StackOverflow 问答 14607000-14607999

# c - 为什么 __last__ 元素需要 c struct padding

> ID：14607006
> 
> 赞同：3
> 
> 时间：2013-01-30T15:01:26.317
> 
> 标签：c, struct, alignment, padding

我知道填充，它的规则，它为什么需要等等。

我的问题是结构，

```
struct my_struct {
   int a;
   char c;
}; 
```

在这种情况下， c 的起始地址是字对齐的，但编译器仍然添加了 3 个字节（假设 4 作为字长）填充。c 之后没有元素，为什么我们需要这 3 个字节？我检查了以下，

```
int g_int1;
struct my_struct st;
int g_int2; 
```

以上我的意思是我的其余变量声明不依赖于先前变量大小的字对齐。编译器总是尝试对齐下一个变量，而不管它的全局或本地自动变量。

我看不出任何字节序的原因，因为这是 char 并且对于一个字节来说并不重要。我认为是什么原因而不是检查最后一个元素条件编译器*总是*在需要时添加填充。

有什么正当理由？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-30T15:04:17.063

因为如果`sizeof(my_struct)`是 5 而不是 8，那么如果你这样做：

```
my_struct array[2]; 
```

then`array[0]`将是字对齐的，但`array[1]`不会。（回想一下，数组查找是通过将 的倍数添加`sizeof(array[0])`到第一个元素的地址来完成的。）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T15:03:17.643

想象一下，你有一个数组`struct my_struct`。如果每个元素的大小都不是单词的倍数，它的元素将如何进行单词对齐？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T15:05:30.883

它是使对象大小也对齐。想象一下有一个 my_structs 数组。在这种情况下，您需要对齐每个元素的起始地址。因此 sizeof(struct my_struct) 必须“对齐”。否则，您无法确定需要分配多少内存。

# android - 我如何为 ImageView 部分着色

> ID：14607008
> 
> 赞同：0
> 
> 时间：2013-01-30T15:01:31.023
> 
> 标签：android, colors, android-imageview, android-calendar

我正在开发一个日历。我有一个多列列表视图，列表视图的每个单元格都由一个图像视图组成。我的问题是....要创建一个开始时间为例如 13.20 到 13.45 的事件，我如何才能仅在这段时间为 imageview 着色？

谁能给我一个例子？我放了一张图片，这是我假装的一个例子。

![在此处输入图像描述](../Images/af7b4e66046ad456f2d64799e035a20c.png)

感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:04:42.693

不要浪费你的时间，`ImageView`因为他们不会那样做。开始编写自己的`View`子类，以后会节省时间。只需重写该`onDraw`方法并使用该`Canvas`对象在正确的位置绘制矩形。

为了制作您需要的视图，我将有一个网格视图，在每一行中保存一个自定义组件，负责呈现对应于日期（列）和时间范围（行）的相应议程槽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:13:13.627

就像另一种选择一样（我同意 MarvinLabs 的方法，但想把它扔掉）。

您可以拥有一个主 ViewController，它为每个条目添加一个 UIView 作为子视图。有了它，您可以更简单地设置每个条目的背景颜色和边框。您将不得不实现您的放置算法。

我相信 MarvinLabs 的方法会导致占用空间更小（内存方面），但是我不知道有多少。至少这是另一种选择。

此外，作为对您可能不想使用 imageView 的解释是，imageView 固有地带有许多您不需要的代码，例如图像解码器、图像显示代码等……因为您不是实际使用图像，您不需要将此代码（默认情况下，如果您使用 imageView 对象）合并到您的二进制文件中。

# php - 如何使用 PHP 从 MongoDB 中选择一个数组？

> ID：14607009
> 
> 赞同：-1
> 
> 时间：2013-01-30T15:01:33.003
> 
> 标签：php, mongodb

如何使用 PHP 从 MongoDB 中选择一个数组？

例如，我有如下数据：

```
db.articles.insert({name: "topic1", images: ["img1", "img2", "img3"]}) 
```

那么，我如何选择和打印它只是图像的名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:07:18.070

我们对你想要什么知之甚少。您甚至没有使用有效的 PHP 语法。

这个问题很模糊，没有多大意义。

但是，这应该会有所帮助：

```
// Make our doc
$doc = array('name' => "topic1", 'images' => array("img1", "img2", "img3"));

// insert our doc
$db->collection->insert($doc);

// Find out inserted doc
$doc = $db->collection->findOne(array('name' => 'topic1'));

// echo out a comma deliminated list of images.
echo implode(',', $doc['images']); 
```

# java - 如何查看网站并可以在 android 中使用 WebView 登录？

> ID：14607014
> 
> 赞同：0
> 
> 时间：2013-01-30T15:01:38.733
> 
> 标签：java, android, eclipse, webview

我将此代码放在我的程序中，用于我在 android 中的应用程序。

```
public class StudentModule extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_student_module);

    WebView ourBrow = (WebView) findViewById(R.id.wvStudent);
    ourBrow.loadUrl("http://sample.com/"); 
```

问题是......我什至无法登录该网站，`password`而且`username`是正确的...... :(请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T01:46:54.460

我认为该网站使用 JavaScript，请在​​加载 url 之前尝试启用它：ourBrow.getSettings().setJavaScriptEnabled(true);

# jquery - Jquery在ie9中不工作的容器中找到检查的输入元素

> ID：14607016
> 
> 赞同：4
> 
> 时间：2013-01-30T15:01:56.470
> 
> 标签：jquery

我创建了一个自定义复选框。它基本上是一组 2 个复选框。当 dom 准备好时，两个复选框都被选中。用户只能取消选中一项。

* * *

这就是我实施它的方式。

我有一个像这样的容器

```
<div class="container">
     <input name="my_checkbox_1" type="checkbox" checked="checked">
     <label for="my_checkbox_1" class="on">Hello</label>
     <input name="my_checkbox_2" type="checkbox" checked="checked">
     <label for="my_checkbox_2" class="on">World</label>
</div> 
```

现在当用户点击标签时，我会找到最近的容器

```
parent = $(this).closest(".container"); 
```

一旦我有了父母，我就会找到像这样检查的复选框的数量

```
len = $(parent).find("input:checkbox:checked").length; 
```

如果 len 为 0，我会尝试以适当的错误提醒用户。这适用于所有其他浏览器，但即（我可以说没有惊喜吗？）。但我在这里做错了什么？

请记住，我有许多这样的容器，其中的复选框具有唯一的名称。

我用 [http://jsfiddle.net/kiranruth/UeEyB/1/的代码创建了一个小提琴](http://jsfiddle.net/kiranruth/UeEyB/1/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T16:46:01.007

您需要将 parent 声明为局部变量或重命名它，因为您正在覆盖[窗口的 parent 属性](https://developer.mozilla.org/en-US/docs/DOM/window.parent)

我只想在你的变量前面添加 var

```
var parent = $(this).closest(".container");
var len = $(parent).find("input:checkbox:checked").length; 
```

# jquery - 使用 Jquery 为按钮背景设置动画

> ID：14607017
> 
> 赞同：0
> 
> 时间：2013-01-30T15:01:59.683
> 
> 标签：jquery, jquery-animate, fade

我正在尝试在按钮上淡入背景图像`mouseover`（并在 上淡出`mouseout`），而实际按钮文本不会淡出。

```
$('btn').hover(function () {
    $('btn', this).stop().animate({
        "opacity": 1
    });
}, function () {
    $('btn', this).stop().animate({
        "opacity": 0
    });
}); 
```

示例：http: [//jsfiddle.net/craigzilla/fFq2A](http://jsfiddle.net/craigzilla/fFq2A)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:17:34.947

您已将 div 指定为按钮和背景。因此，如果您尝试淡入/淡出背景，它将淡入淡出按钮和背景....

**[小提琴演示](http://jsfiddle.net/fFq2A/4/)**

这是代码：

```
$('.btn').hover(function () {
    $(this).stop().animate({"opacity": 0});
}, function () {
    $(this).stop().animate({"opacity": 1});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:06:26.377

```
$('.btn').hover(function () {
    $(this).animate({
        "opacity": 0
    });
}, function () {
    $(this).stop().animate({
        "opacity": 1
    });
}); 
```

您的选择器错误`'btn'`应该是`'.btn'`并且`$('btn', this)`应该是`$(this)`。

演示：[小提琴](http://jsfiddle.net/arunpjohny/fFq2A/3/)。

# hadoop - 如何刷新 Hadoop 分布式缓存？

> ID：14607018
> 
> 赞同：2
> 
> 时间：2013-01-30T15:02:05.207
> 
> 标签：hadoop, mapreduce, hdfs

我使用 DistributedCache.addFileToClassPath(Path file, Configuration conf) 方法向分布式缓存添加了一组 jar，以使依赖项可用于整个集群的 map reduce 作业。现在我想从缓存中删除所有这些 jar 以开始清理，并确保我在那里有正确的 jar 版本。我注释掉了将文件添加到缓存中的代码，并将它们从我在 hdfs 中复制它们的位置删除。问题是 jar 似乎仍然在类路径中，因为 map reduce 作业没有抛出 ClassNotFound 异常。有没有办法在不重新启动任何服务的情况下刷新此缓存？

编辑：随后我刷新了以下文件夹： /var/lib/hadoop-hdfs/cache/mapred/mapred/local/taskTracker/distcache/ 。那并没有解决它。作业仍会找到参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:44:33.313

我现在明白我的问题是什么了。我之前已将 jar 复制到 /usr/lib/hadoop/lib/ 文件夹中。这使它们永久可用于 map reduce 工作。从那里删除它们后，作业抛出了预期的 ClassNotFoundException。另外，我注意到，如果我不使用 addFileToClassPath 添加 jar，它们将无法用于作业。因此，无需刷新分布式缓存或删除您使用 addFileToClassPath 添加的内容，因为您放在那里的内容仅对指定的作业实例可见。

# arrays - 在分配的向量 fortran 中插入值改变形状

> ID：14607020
> 
> 赞同：1
> 
> 时间：2013-01-30T15:02:14.223
> 
> 标签：arrays, performance, memory-management, fortran

我想问你一个我在使用 Fortran 管理 CSR/CSC* 矩阵时经常遇到的问题。假设我们有一个具有 N 个实数值的向量 V。该向量之前已经分配了一定的大小。现在我们必须在它中间的索引 P 处添加一个值。蛮力代码将是：

```
allocate(tempV(N))
tempV=V
deallocate(V)
allocate(V(N+1))
V=(/tempV(1:P-1), newValue, tempV(P:N)/)
deallocate(tempV) 
```

显然，如果做一次没问题，但重复上千次就不会那么有效了。每个我想插入的值，内存都会填满和清空 4 次。

我想知道解决这个问题的更好程序。您可以提出普通的 Fortran（首选），也可以通过 MKL/Lapack/Blas 等库提出一些解决方案。

**附录**：我可以用 RESHAPE 来做吗？通过[这个定义](http://www.nsc.liu.se/~boein/f77to90/a5.html#section17)（与我的 Fortran 书籍定义相同），我可以做类似的事情

```
REAL, DIMENSION(1:1) :: newPad = (/ newValue /)
V=RESHAPE(V, (/ N+1 /), PAD=newPad) 
```

现在值已添加到 V 的末尾，所以我用

V=(/V(1:P-1), V(N+1:N+1), V(P:N) /)

这样，可以避免显式创建临时向量并丢失分配。

由于 RESHAPE 可以在库中进行并行化，它是否高效且可扩展？

* * *

* **PS**：为了清楚起见，CSR = 压缩稀疏行格式，CSC = 压缩稀疏列格式，更多信息在这里：

*MKL 定义： http:* [//software.intel.com/sites/products/documentation/hpc/mkl/mklman/GUID-9FCEB1C4-670D-4738-81D2-F378013412B0.htm](http://software.intel.com/sites/products/documentation/hpc/mkl/mklman/GUID-9FCEB1C4-670D-4738-81D2-F378013412B0.htm)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:45:44.953

`move_alloc`为此目的引入了Fortran 2003 子例程。它将分配状态、数组边界、动态类型、类型参数和值从源移动到目标，而不实际复制数据。源变量被释放。

用一个简短的例子修改你的代码`move_alloc`只需要一个复制操作：

```
allocate(tempV(N+1)) 
tempV(:P-1) = V(:P-1)
tempV(P)    = newValue
tempV(P+1:) = V(P:) 
call move_alloc(tempV, V) 
```

当然，一次为多个项目执行此操作会减少分配开销，但这对您来说可能是不可能的。

**编辑**
至于指针的建议，如果您不能使用任何 F2003 功能，您可能可以使用有点像这样的子例程：

```
pure subroutine insert(arr, val, pos)
  real, pointer, intent(inout) :: arr(:)
  real, intent(in)             :: val
  integer, intent(in)          :: pos

  real, pointer :: temp(:)

  if(associated(arr)) then
    allocate(temp(lbound(arr,1):ubound(arr,1) + 1))
    ! ...or perhaps check/do something if pos is not within these bounds

    temp(:pos-1) = arr(:pos-1)
    temp(pos)    = val 
    temp(pos+1:) = arr(pos:)

    deallocate(arr)
    arr => temp
  endif
end subroutine insert 
```

当然，您可以轻松地将其调整为适合您的目的或使其更通用。您可以将其与分配的指针变量一起使用：

```
real, pointer :: V(:)
! :
allocate(V(10))
V = 1.
! :
call insert(V, 3.141592, 5) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:38:43.893

问题是，您是否需要在插入后立即使用 CSR 格式，或者您可以先以更易于插入的格式进行更多插入，然后再转换为 CSR。

你可以看看[sparskit](http://www-users.cs.umn.edu/~saad/software/SPARSKIT/)和它的链表存储格式，或者你可以为新元素创建一些链表，一旦你完成插入，你可以建立一个新的 CSR 格式的矩阵，节省大量的数据重组.

# objective-c - Objective-C 在将对象分配给新指针时保留计数

> ID：14607024
> 
> 赞同：0
> 
> 时间：2013-01-30T15:02:19.793
> 
> 标签：objective-c, pointers, memory-leaks, retaincount

*免责声明：我对 Objective-C 很陌生*

我在一个命令行项目中 ARC 未启用

我有一个名为 MyClass 的课程

```
@interface MyClass : NSObject
@end

@implementation MyClass
@end 
```

我的主要看起来像

```
int main(int argc, char *argv[])
{
    MyClass *first = [MyClass new];
    MyClass *second = first;
    return 0;
} 
```

问题：

1.  我知道***first**的保留计数为 1。但我不明白为什么***second**也保留计数 = 1？我没有对该对象执行新建、保留、分配或复制操作。

2.  由于***first**的保留计数为 1，我是否必须为此调用 release？正如您在代码中看到的，我必须释放对象，但性能分析器显示没有内存泄漏。为什么？

3.  我注意到***first**和***second**都具有相同的内存地址值。然后我认为***first**保留计数应该在分配时增加到 2。但它没有，为什么？

4.  我注意到，当我保留***first**并将其分配给***second** 时，它们的保留计数均为 2（见下文）

    ```
    int main(int argc, char *argv[])
    {
        MyClass *first = [MyClass new];
        [first retain];
        MyClass *second = first;
        return 0;
    } 
    ```

    所以基本上***second**成为***first**的副本，在这种情况下它什么时候发布？

5.  如果我将代码更改为，两个指针的保留计数会发生什么情况

    ```
    int main(int argc, char *argv[])
    {
        MyClass *first = [MyClass new];
        MyClass *second = first;
        [first retain];
        return 0;
    } 
    ```

    我的意思是***second**保留计数也会增加吗？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:15:17.523

1.  通过调用`new`或`alloc`创建保留计数为 1 的对象是正确的。

2.  分配`second`给`first`不会修改保留计数。Second 只是**指向**与 first 相同的对象的指针。保留计数是对象上的一个变量，因此所有指向同一对象的指针将始终显示相同的保留计数。

3.  您必须使用类分配`@property`或手动调用`-retain`以增加保留计数。您现在所做的称为弱指针。second 到 first 的分配不会修改原始对象的保留计数。

4.  是的，两个指针再次指向同一个对象。对对象的修改将反映在两个指针中。

5.  两个指针都指向同一个对象，因此通过调用 [first retain] 将修改单个对象，并且指向它的所有指针都将显示保留计数的增加。

您需要将`first`and`second`视为指针，而不是单个对象。该程序中只有一个对象，即创建于 的对象`-new`。通过在第一个或第二个指针上调用 release 或 retain ，您只是对两者指向的单个对象进行更改。

# ruby - Ruby on Rails 路由错误未初始化常量

> ID：14607026
> 
> 赞同：0
> 
> 时间：2013-01-30T15:02:20.797
> 
> 标签：ruby, exception

我是新的 whit ruby​​，有这个异常 Routing Error uninitialized constant 我做了这个论坛上所说的一切，但是没有用

这是我的数据库

```
class CreateCredits < ActiveRecord::Migration

  def change

create_table :credits do |t|

  t.string :type

  t.float :amaunt

  t.date :creditdate

  t.date :expiredate

  t.decimal :rake

  t.string :waranty

  t.timestamps
end   end end 
```

这个 mi 控制器类是这样定义的：

```
class CreditsController < ApplicationController

  # GET /credits

 # GET /credits.json

def index
@credits = Credit.all

  respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @credits }
   end
end

 # GET /credits/1
 # GET /credits/1.json
 def show
   @credit = Credit.find(params[:id])

    respond_to do |format|
    format.html # show.html.erb
      format.json { render json: @credit }
   end
end

  # GET /credits/new
 # GET /credits/new.json
 def new
   @credit = Credit.new

   respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @credit }
 end
end

# GET /credits/1/edit
def edit
  @credit = Credit.find(params[:id])
end

# POST /credits
 # POST /credits.json
 def create
  @credit = Credit.new(params[:credit])

respond_to do |format|
  if @credit.save
    format.html { redirect_to @credit, notice: 'Credit was successfully created.' }
    format.json { render json: @credit, status: :created, location: @credit }
  else
    format.html { render action: "new" }
    format.json { render json: @credit.errors, status: :unprocessable_entity }
     end
   end
 end

  # PUT /credits/1
  # PUT /credits/1.json
 def update
@credit = Credit.find(params[:id])

respond_to do |format|
  if @credit.update_attributes(params[:credit])
    format.html { redirect_to @credit, notice: 'Credit was successfully updated.' }
    format.json { head :no_content }
  else
    format.html { render action: "edit" }
    format.json { render json: @credit.errors, status: :unprocessable_entity }
      end
    end
   end

    # DELETE /credits/1
  # DELETE /credits/1.json
  def destroy
@credit = Credit.find(params[:id])
@credit.destroy

 respond_to do |format|
  format.html { redirect_to credits_url }
  format.json { head :no_content }
  end
  end
end 
```

这是我的路线将这条路线定义为范围而不是命名空间，也没有奏效。

```
 Insolvencia::Application.routes.draw do

  resources :Credit
  get "credit" => "credit#index"
  root :to => 'credit#index'
   match "credit", :to => "credit#index"
 end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:18:40.687

它应该`resources :credits`代替`resources :Credit`

# ios - 仅限在线的 iCloud 密钥存储

> ID：14607027
> 
> 赞同：0
> 
> 时间：2013-01-30T15:02:22.883
> 
> 标签：ios, objective-c, icloud

我正在开发的应用程序具有可用于解锁内容的消耗性应用内购买货币。

我目前正在通过 iCloud KVC 跟踪/备份“信用”级别。但是，如果用户要在另一台离线设备上解锁项目，则积分不会在在线设备上更新，反之亦然（如 Apple 在其 iCloud 设计指南中所述）。这对于高分之类的问题是可以解决的，但对于可购买的货币，我认为在线验证方法会起作用。

有没有办法强制检查 iCloud 以获取最新的键值对？即，如果设备离线，它只会返回一个错误，如果它在线，它会相应地更新总数。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:06:08.147

`NSUbiquitousKeyValueStore`如果您在有机会与云同步之前要求任何对象，我认为应该返回 nil。您可以建立一种机制来处理这种情况或以其他方式使用您拥有的数据（如果它是在线成功获得的）。

# android - Blob 中的 java.lang.NullPointerException

> ID：14607032
> 
> 赞同：0
> 
> 时间：2013-01-30T15:02:41.993
> 
> 标签：android, mysql, blob

我`java.sql.Blob`在 MySql 数据库中使用图像类型。当我尝试在数据库中插入对象时，出现异常“Java.lang.NullPointerException”

```
@Override
protected Object doInBackground(Object...arg0) {

    try {
        Bitmap photo = BitmapFactory.decodeResource(getResources(), R.drawable.icon);
        Users user = new Users();
        user.setName("haris");

        try {
            Blob blo = null;
            blo.setBytes(1, getBytes(photo));

        } catch (Exception e) {
            System.out.println("Error:" + e.toString());
        }

        if (UserService.register(user)) {
            System.out.println("Successful registrationl");
        } else {
            System.out.println("API call wasn't successful");
        }

    } catch (Exception e) {
        System.out.println("Error:" + e.toString());
    }

    return null;
}

 public static byte[] getBytes(Bitmap bitmap) {
     ByteArrayOutputStream stream = new ByteArrayOutputStream();
     bitmap.compress(CompressFormat.PNG, 0, stream);
     return stream.toByteArray();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:33:21.577

我正在使用这段代码将位图存储在 blob 中（从 drawable 转换而来）：

```
db = this.getWDB();
    ContentValues values = new ContentValues();

         Drawable d = model.getAppIcon();
    BitmapDrawable bitDw = ((BitmapDrawable) d);
    Bitmap bitmap = bitDw.getBitmap();
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    bitmap.compress(Bitmap.CompressFormat.PNG, 100, stream);
    byte[] imageInByte = stream.toByteArray();

    values.put(COLUMN_ICON_BLOB, imageInByte); 

    db.insert(TABLE_APPS, null, values);
    db.close(); 
```

并使用此方法从数据库中检索它

```
 public static Drawable convertByteArrayToDrawable( byte[] byteArrayToBeCOnvertedIntoBitMap) {

    Bitmap bitMapImage = BitmapFactory.decodeByteArray(
            byteArrayToBeCOnvertedIntoBitMap, 0,
            byteArrayToBeCOnvertedIntoBitMap.length);

    return new  BitmapDrawable(bitMapImage);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:39:15.540

您有例外，因为 Blob 是一个接口，而 setBytes 是一个抽象方法。检查此链接[如何在 Sqlite 中将图像存储为 blob 以及如何检索它？](https://stackoverflow.com/questions/7331310/how-to-store-image-as-blob-in-sqlite-how-to-retrieve-it)

# java - 更新lucene索引——最流行的方式

> ID：14607033
> 
> 赞同：0
> 
> 时间：2013-01-30T15:02:43.313
> 
> 标签：java, lucene, indexing

我每天更新一个 lucene 索引。我的总体策略是：

1.  查找数据库中自上次索引生成以来修改的所有对象。
2.  为这些对象创建新的 tmp-index。（旧索引仍然可用）
3.  使用 IndexWriter.deleteDocuments(Term) 从旧索引中删除所有新的索引文档（它们在 tmp-index 中）
4.  使用 IndexWriter.addIndexes(...) 合并旧索引和 tmp-index

我在 lucene wiki 中发现：[Lucene 中没有直接更新过程...](http://wiki.apache.org/lucene-java/LuceneFAQ#How_do_I_update_a_document_or_a_set_of_documents_that_are_already_indexed.3F) 我还发现在 lucene 4.1.0 文档中：[可以使用 updateDocument 更新文档...](http://lucene.apache.org/core/4_1_0/core/index.html)

我已经尝试过 IndexWriter.updateDocument(Term, Document) 但随后使用过滤器执行搜索我从我的一种方法中获得了 NPE，当我按照 1-4 中的描述更新索引时不会发生这种情况。有没有人遇到过类似的问题？你如何更新你的索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:17:40.657

我所做的基本上是这样的：

我保留了一个持久的 IndexReader/Readers，这将保持它自创建以来的状态。

我再次开始删除并创建所有文档。我想我只是做了一个 deleteAll() 然后重新创建它们 (addDocument())。

我承诺，这将激活所有这些更改。

我删除了我拥有的所有 IndexReader，因此下次系统请求 Reader 时，它将创建它并将其存储以供后续请求使用。

updateDocument 基本上是一个删除/创建，afaik。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T08:05:37.983

在使用 IndexWriter 更新索引时，您可能希望使用 a`SearcherManager`来获取新的 IndexSearchers。我认为不需要使用临时索引？

# asp.net - ASP.NET 页面缓存和会话变量

> ID：14607034
> 
> 赞同：1
> 
> 时间：2013-01-30T15:02:43.573
> 
> 标签：asp.net, session, caching, session-variables

我有一个 asp.net 网页，根据会话变量“IsLogged”显示链接登录或注销。我想在该页面中实现缓存。但是在应用缓存之后，登录/注销变得与会话变量不一致。解决此问题的最佳方法是什么，以便我也可以在该页面中应用缓存？

谢谢， 帕莎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:07:59.727

我不确定您是如何专门缓存的，但您可以将页面分成两个用户控件（ascx）。

您的 aspx 页面可能包含显示登录信息的用户控件（确保当您使用动态 url 加载用户控件时，缓存会忽略它，因为地址每次都不同，例如：

`yourSessionInfo.ascx?stopcache=32487239875`（该数字可能只是当前时间，单位为刻度）

您只需要在您的 url 中更改一些内容，以便页面“看起来”不同并重新加载。

然后将页面的其余部分放在另一个具有静态 url 的用户控件中：

`yourRestOfPage.asx`

请注意 url 中没有任何变化，因此可以缓存页面。

不确定这是否会解决您的确切问题，但它至少应该让您走上正确的道路。

# android - Android Pull To Refresh Demo On Fragment

> ID：14607035
> 
> 赞同：0
> 
> 时间：2013-01-30T15:02:43.507
> 
> 标签：android, android-fragments, pull-to-refresh

[我已经使用来自https://github.com/chrisbanes/Android-PullToRefresh](https://github.com/chrisbanes/Android-PullToRefresh)的库实现了拉取刷新，但是当我从片段中调用我的列表视图对象上的演示函数（mylistview.demo（））时，该函数没有执行。

当我从 onclicklistener 调用演示函数时，它可以工作，所以我认为问题与加载片段之前正在执行的函数有关。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:41:42.197

如果您在 OnCreate() 中进行调用，那可能为时过早。尝试在 OnStart() 中调用它。

我只能假设你在哪里调用它，因为你没有指定它。

# android - Android 4.1 虚拟键盘冻结

> ID：14607036
> 
> 赞同：1
> 
> 时间：2013-01-30T15:02:44.613
> 
> 标签：android, android-ndk, java-native-interface

我有以下仅在 Android 4.1 上出现的奇怪问题：当打开虚拟键盘并且用户按下 BACK 按钮时，我的应用程序只是冻结并且不再反应。过了一会儿会弹出一个系统对话框，通知我该应用程序已死并且将被关闭。我很难想象这是 Android 中的一个错误，因为通过按 BACK 按钮隐藏键盘是应该正常工作的基本功能。不过，我的代码太小了，几乎可以完全排除代码中的错误。

这是我的代码供您查看：

```
static int quit = 0;

static void engine_handle_cmd(struct android_app *app, int32_t cmd)
{       
        switch(cmd) {
        case APP_CMD_TERM_WINDOW:
                quit = 1;
                break;
        }
}

static int32_t engine_handle_input(struct android_app *app, AInputEvent *event)
{       
        switch(AInputEvent_getType(event)) {
        case AINPUT_EVENT_TYPE_MOTION: {
                int action = AMotionEvent_getAction(event);
                if((action & AMOTION_EVENT_ACTION_MASK) == AMOTION_EVENT_ACTION_DOWN) showkeyboard(app);                
                break;
                }                               
        }

        return 0;
}

void android_main(struct android_app* state)
{       
        int events, fd;
        struct android_poll_source *source;

        app_dummy();

        state->onAppCmd = engine_handle_cmd;
        state->onInputEvent = engine_handle_input;

        while(!quit) {
                if(ALooper_pollOnce(-1, &fd, &events, (void **) &source) >= 0) {
                        if(source) source->process(state, source);                                      
                }
        }       

        exit(0);
} 
```

showkeyboard() 函数在 JNI 中实现如下：

```
static void showkeyboard(struct android_app* state)
{
        // Attaches the current thread to the JVM.
        jint lResult;
        jint lFlags = 0;
        JavaVM *lJavaVM = state->activity->vm;
        JNIEnv *lJNIEnv = state->activity->env;
        JavaVMAttachArgs lJavaVMAttachArgs;
        jobject lNativeActivity, INPUT_METHOD_SERVICE;
        jclass ClassNativeActivity, ClassContext;
        jfieldID FieldINPUT_METHOD_SERVICE;
        JNIEnv *env;
        int attached = 0;

        // must check if we're already attached!
        switch((*lJavaVM)->GetEnv(lJavaVM, (void**) &env, JNI_VERSION_1_6)) {
        case JNI_OK:
                break;
        case JNI_EDETACHED:
                lJavaVMAttachArgs.version = JNI_VERSION_1_6;
                lJavaVMAttachArgs.name = "NativeThread";
                lJavaVMAttachArgs.group = NULL;

                lResult = (*lJavaVM)->AttachCurrentThread(lJavaVM, &lJNIEnv, &lJavaVMAttachArgs);
                if(lResult == JNI_ERR) return;          

                attached = 1;
                break;

        case JNI_EVERSION:
                return;  // Invalid Java version
        }

        // Retrieves NativeActivity.
        lNativeActivity = state->activity->clazz;
        ClassNativeActivity = (*lJNIEnv)->GetObjectClass(lJNIEnv, lNativeActivity);

        // Retrieves Context.INPUT_METHOD_SERVICE.
        ClassContext = (*lJNIEnv)->FindClass(lJNIEnv, "android/content/Context");

        FieldINPUT_METHOD_SERVICE = (*lJNIEnv)->GetStaticFieldID(lJNIEnv, ClassContext, "INPUT_METHOD_SERVICE", "Ljava/lang/String;");
        INPUT_METHOD_SERVICE = (*lJNIEnv)->GetStaticObjectField(lJNIEnv, ClassContext, FieldINPUT_METHOD_SERVICE);
{
        // Runs getSystemService(Context.INPUT_METHOD_SERVICE).
        jclass ClassInputMethodManager = (*lJNIEnv)->FindClass(lJNIEnv, "android/view/inputmethod/InputMethodManager");
        jmethodID MethodGetSystemService = (*lJNIEnv)->GetMethodID(lJNIEnv, ClassNativeActivity, "getSystemService", "(Ljava/lang/String;)Ljava/lang/Object;");
        jobject lInputMethodManager = (*lJNIEnv)->CallObjectMethod(lJNIEnv, lNativeActivity, MethodGetSystemService, INPUT_METHOD_SERVICE);

        // Runs getWindow().getDecorView().
        jmethodID MethodGetWindow = (*lJNIEnv)->GetMethodID(lJNIEnv, ClassNativeActivity, "getWindow", "()Landroid/view/Window;");
        jobject lWindow = (*lJNIEnv)->CallObjectMethod(lJNIEnv, lNativeActivity, MethodGetWindow);
        jclass ClassWindow = (*lJNIEnv)->FindClass(lJNIEnv, "android/view/Window");
        jmethodID MethodGetDecorView = (*lJNIEnv)->GetMethodID(lJNIEnv, ClassWindow, "getDecorView", "()Landroid/view/View;");
        jobject lDecorView = (*lJNIEnv)->CallObjectMethod(lJNIEnv, lWindow, MethodGetDecorView);

        // Runs lInputMethodManager.showSoftInput(...).
        jmethodID MethodShowSoftInput = (*lJNIEnv)->GetMethodID(lJNIEnv, ClassInputMethodManager, "showSoftInput", "(Landroid/view/View;I)Z");
        (*lJNIEnv)->CallBooleanMethod(lJNIEnv, lInputMethodManager, MethodShowSoftInput, lDecorView, lFlags);

        if(attached) {
                // Finished with the JVM.
                (*lJavaVM)->DetachCurrentThread(lJavaVM);
        }
}
} 
```

要重现，您只需编译应用程序，将其放到带有 Android 4.1 映像的模拟器上，然后单击某个位置，就会显示虚拟键盘。现在尝试使用 BACK 按钮关闭键盘。该应用程序现在将冻结。

请注意，此错误仅在 Android 4.1 上发生。它在 2.3、3.0 和 4.0 上运行良好。这可能是Android本身的一个主要错误吗？我真的没有其他解释，因为我的代码实际上只是一个根本不做任何事情的原始主循环。但是，尝试关闭虚拟键盘仍会使应用程序崩溃。

非常感谢您在这个问题上的帮助！我已经为此苦苦挣扎了好几个小时了:(

**更新 1：** 该问题也出现在 Android 4.2 上。已在 Android 问题网站上打开了一张票。遇到相同问题的每个人都应该在工单上发表评论，以便 Android 开发人员意识到这一点。这是链接： [http ://code.google.com/p/android/issues/detail?id=43817&thanks=43817&ts=1359632204](http://code.google.com/p/android/issues/detail?id=43817&thanks=43817&ts=1359632204)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T06:34:07.527

谢谢你问这个，它帮助了我。

我也看到了冻结。它似乎来自 android_native_app_glue.c 中 process_input 中的 AInputQueue_preDispatchEvent。为了解决这个问题，我改变了：

```
LOGI("New input event: type=%d\n", AInputEvent_getType(event));
if (AInputQueue_preDispathEvent(app->inputQueue, event)) {
    return;
}
int32_t handled = 0; 
```

至：

```
int32_t type = AInputEvent_getType(event);
LOGI("New input event: type=%d\n", type);
if (!g_iShowingSoftKeyboard || (type != AINPUT_EVENT_TYPE_KEY)
    || (AKeyEvent_getKeyCode(event) != AKEYCODE_BACK))
{
    if (AInputQueue_preDispathEvent(app->inputQueue, event)) {
        return;
    }
}
int32_t handled = 0; 
```

当然 g_iShowingSoftKeyboard 是我正在使用的全局，如果软键盘正在显示，这是真的。

编辑：然后我关闭了在输入处理程序中处理后按的软键盘。

# sql - SQL 返回匹配和不匹配

> ID：14607038
> 
> 赞同：0
> 
> 时间：2013-01-30T15:02:46.020
> 
> 标签：sql, sql-server-2005, join

如何返回两个表中的所有行，包括匹配项？例如，如果我有一个共同的帐户 ID 字段的帐户表和订单表，我想从两个表中返回匹配项以及不匹配项。

我正在使用 SQL Server 2005

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:04:23.347

我认为你需要`FULL OUTER JOIN`：

```
SELECT *
FROM Table1 T1
  FULL OUTER JOIN Table2 T2 ON T1.AccountId = T2.AccountId 
```

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:34:08.247

如果`MATCHED and UNMATCHED`要从两个表中获取两条记录，请使用`FULL JOIN`（或*FULL OUTER JOIN*）。您还可以使用`CASE`如下所示找到匹配或不匹配的记录。[Sql-Fiddle 演示](http://sqlfiddle.com/#!3/faa69/8)

```
select isnull(a.accountId,o.accountId) accId, AccName,ProName,
       case when AccName+ProName is null then 'No'
            else 'Yes' end as IsMatched
from Accs a FULL JOIN Orders o on a.accountId = o.accountId
order by IsMatched 

--Example results
AccId   AccName ProName IsMatched
1       X       (null)  No
10      (null)  Apple   No
2       Y       Orange  Yes
3       Z       Mango   Yes 
```

# r - 为什么当我们使用 rev 来反转图例的颜色时，我们会得到不同的东西？

> ID：14607041
> 
> 赞同：1
> 
> 时间：2013-01-30T15:02:54.833
> 
> 标签：r, plot, raster

我正在尝试绘制此光栅文件的图像。图例的颜色是这样的：低值用红色，高值用绿色。

但通常红色与高值相关联。这就是为什么我用来`rev`反转图例的颜色。但是我得到了一些不同的东西。是否有另一个功能可以反转图例的颜色并保持颜色不变。

```
require(raster)
require(fields)
r = raster(y)
extent(r) = extent(c(xmn=-180,xmx=180,ymn=-90,ymx=90))
plot(r, col = rainbow(20, s = 1, v = 1, start = 0, 
     end = 1),lab.breaks=seq(0,0.6,0.05),
     breaks=seq(0,0.6,0.05), zlim=c(0.0,0.6),horizontal = TRUE, 
     xlab="Longitude", ylab="Latitude",legend.shrink = 0.9,
     legend.width = 1.2) 
```

然后我用这个给了我：

```
plot(r, col = rev(rainbow(20, s = 1, v = 1, start = 0, end = 1)),
     lab.breaks=seq(0,0.6,0.05),breaks=seq(0,0.6,0.05),
     zlim=c(0.0,0.6),horizontal = TRUE, xlab="Longitude", 
     ylab="Latitude",legend.shrink = 0.9,legend.width = 1.2) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T15:14:56.387

显然你没有检查颜色。

```
> length(rainbow(20, s = 1, v = 1, start = 0, end = 1))
[1] 20 
```

但并非全部使用了 20 个，您只使用了其中的 12 个，所以：

```
plot(r, col = rev(rainbow(20, s = 1, v = 1, start = 0, end = 1)[1:12]),
     lab.breaks=seq(0,0.6,0.05),breaks=seq(0,0.6,0.05),
     zlim=c(0.0,0.6),horizontal = TRUE, xlab="Longitude", 
     ylab="Latitude",legend.shrink = 0.9,legend.width = 1.2) 
```

应该给你你想要的情节。毕竟，你有 13 个中断值，所以只有 12 个类别。这意味着您可以这样做：

```
plot(r, col = rev(rainbow(12, s = 1, v = 1, start = 0, end = 1)),
     lab.breaks=seq(0,0.6,0.05),breaks=seq(0,0.6,0.05),
     zlim=c(0.0,0.6),horizontal = TRUE, xlab="Longitude", 
     ylab="Latitude",legend.shrink = 0.9,legend.width = 1.2) 
```

# java - 签署一个 Jar 文件

> ID：14607042
> 
> 赞同：0
> 
> 时间：2013-01-30T15:02:55.897
> 
> 标签：java, jarsigner, jar-signing

我在 jar 中手动添加了一些类文件。并在服务器中替换。但是服务器没有拿出这个新的jar说：java.lang.SecurityException：类“test.TestProcess2”的签名者信息与同一包中其他类的签名者信息不匹配。

我是否需要在更新后对 jar 进行签名以及如何做。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:17:38.360

> 更新后我需要在 jar 上签名吗？

当然，签名 jar 的重点是内容不会被除您之外的其他人修改。如果您手动修改它，那么您必须辞职。

在我的例子中，我使用 Eclipse 和 Ant 来构建项目。所以每次我重建项目时，jar 都会被辞职。

```
<signjar jar="myapplet.jar" keystore="myKeyStore" alias="me" storepass="pass"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:19:23.697

问题是您的 JAR 中的其他类与您添加的类的签名不同。添加新类后，要么不签署整个 JAR，要么退出 JAR。[您可以在此处](http://docs.oracle.com/javase/7/docs/technotes/tools/solaris/jarsigner.html)找到有关 jarsigner 工具的信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T15:40:33.507

是的。

您还可以为命令行手动签名 jar。例如，在 Windows 中，它看起来更不像这样：

`"{YOUR_JDK_INSTALL_PATH}\bin\jarsigner.exe" -verbose -keystore {YOUR_KEYSTORE_PATH} -storepass {YOUR_STORE_PASS} -keypass {YOUR_KEY_PASS} {JAR_FILE}`

# android - 在安卓上推送通知

> ID：14607043
> 
> 赞同：1
> 
> 时间：2013-01-30T15:02:57.030
> 
> 标签：android, push-notification

我已经为 android 实现了一个推送通知系统。我的系统工作如下：从我的服务器，我通过 Http 协议与谷歌服务器进行通信。然后谷歌服务器将通知发送到手机。所以，我想知道是否有任何替代方法来实现此功能。但是，我想要一些可靠的东西。

PS我想听听人们的意见，他们实现了类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:27:21.693

I was working with some Chinese tablets that could not receive android push notifs (very annoying). I had to implement a Comet like system on android.

Basically, on the android device, I created a service which essentially polled a URL. But since polling is very battery intensive, I used a [push technique called long-polling](http://en.wikipedia.org/wiki/Push_technology#Long_polling). I had the Android http client set a very long timeout. I then on the server side had the server hold the connection open also for a very long time. What would end up happening is that as soon as a message had to be passed, the connection would finish, and the android device would get the message immediately. This is just an additional method of "push" technology.

The only other option not discussed here is a persistant [TCP/IP connection](http://tokudu.com/2010/how-to-implement-push-notifications-for-android/). This can be very dicey because Android could kill the service at will, and it can be somewhat battery intensive as well.

From my experience, [GCM is the best method out there](http://developer.android.com/google/gcm/index.html), and I wish there was something as good as it available for iOS Devices!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:19:00.253

不知道你为什么要寻找其他东西，如果你已经让它通过谷歌服务器工作，但一个很好的系统可以轻松发送推送通知是[Urban Airship。](http://www.urbanairship.com)

# android - 为残疾儿童禁用 android 导航按钮

> ID：14607047
> 
> 赞同：4
> 
> 时间：2013-01-30T15:03:02.183
> 
> 标签：android, navigation, accessibility

我们正在将一些用于教有学习障碍的幼儿的交互式 iOS 应用程序移植到 Android。我们遇到了一个主要的可用性问题，因为我们无法弄清楚如何禁用物理或屏幕导航按钮（主页和最近的应用程序）。

在任何人说“你不想那样做”之前，我们完全理解为什么你总是希望为健全的成年人启用这些按钮，但这些孩子会带来一系列独特的可访问性问题。具体来说：

1.  他们的精细运动控制可能很差——他们可能会无意中触摸屏幕上与他们想要的区域不同的区域，或者一次不小心使用了多个手指。
2.  他们可能肌肉张力较弱且体力较差——例如，他们的手掌底部可能会在尝试仅使用手指时掉落并触摸屏幕。
3.  他们努力实现目标，如果失败，很容易变得沮丧或破坏性。

例如，一个典型的患有唐氏综合症的 5 岁儿童会由于无意中触摸 Home 按钮而意外退出他们正在使用的应用程序：当这种情况反复发生时，成人教师或家长必须重新进入应用程序对于他们反复来说，孩子会失去兴趣和注意力。另一个典型的场景是一个患有自闭症的小孩，如果在使用他们最喜欢的应用程序时发生这种情况，他们可能会完全惊慌失措并需要身体约束。此外，许多残疾儿童会尝试戳他们能找到的任何其他按钮，以寻求回应。在任何这些情况下，可能必须完全放弃可能有价值的教育课程。

我们知道 SYSTEM_UI_FLAG_HIDE_NAVIGATION 和 SYSTEM_UI_FLAG_LOW_PROFILE，但这些只会降低屏幕按钮的可见性，直到孩子触摸屏幕的其他部分，然后它们以一种比全部可见时更分散注意力的方式重新出现时间。

在 iOS 上，有一个“引导访问”功能可以轻松解决这个问题。我们可以在 Android 上模拟类似的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:22:46.570

> 在 iOS 上，有一个“引导访问”功能可以轻松解决这个问题。

引导访问似乎是一种设备设置，而不是开发人员自己单方面启用的东西，谢天谢地。

> 我们可以在 Android 上模拟类似的东西吗？

库存 Android 中没有类似的设备设置。

您可以下载 Android 源代码，根据需要对其进行修改，将结果构建到 ROM 模块中，然后在您认为合适的设备上安装该 ROM 模块。

或者，您也许可以与设备制造商合作，开发针对儿童的平板电脑，看看他们是否已经将这种功能添加到他们的设备中，或者是否愿意与您合作，在他们的设备的未来迭代中添加这种功能。

# android - 粗体样式不适用于 textview android

> ID：14607048
> 
> 赞同：0
> 
> 时间：2013-01-30T15:03:03.740
> 
> 标签：android, textview, android-actionbar, text-styling

我正在使用带有自定义视图的操作栏来添加标题和副标题

我需要将标题样式设置为粗体，当我在 XML 布局中制作它时它工作正常，但我需要使用代码从代码中设置它

textView.setTypeface(null, Typeface.BOLD);

但它不起作用，任何人都可以帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T15:21:41.727

理想情况下它应该工作。这可能听起来很普通，但是您可以在第一次在 Java 文件中将其设置为粗体后检查它是否在某处被重置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:11:58.247

您可以使用此代码在 textviews 中显示 HTML 代码

```
textView.setText(Html.fromHtml("<b>BOLD WORDS HERE</b>")); 
```

# c++ - 无法按预期从命令行提取数据

> ID：14607052
> 
> 赞同：0
> 
> 时间：2013-01-30T15:03:22.307
> 
> 标签：c++, ifstream, istream

我有一个 course0.dat 文件，第 1 行有一个 4，我想用我的 ifstream 程序提取它：

```
void processEnrollments (std::istream& courseFile);

int main (int argc, char** argv)
{

// Take input and output file names from the command line
ifstream coursesIn (argv[1]);

return 0;
}

void processEnrollments (istream& courseFile)
{
int numCourses;
courseFile >> numCourses;

cout << numCourses;

// Create the arrays we need
//!! Insert your code here
} 
```

当我跑步时

```
program courses0.dat 
```

我的测试是计算 32767 而不是 4。我的 .dat 文件与我的可执行文件位于同一目录中。

关于发生了什么的任何线索？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:16:02.077

检查错误！当您将其作为参数传递时，请尝试使用文件的完整路径。

我的猜测是`courseFile >> numCourses;`失败，因为`ifstream coursesIn (argv[1])`找不到或无法访问该文件。

试试这个

```
if( courseFile >> numCourses )
    cout << numCourses; 
```

那么它会输出任何东西吗？

# android - 在后台android更新数据到服务器

> ID：14607053
> 
> 赞同：0
> 
> 时间：2013-01-30T15:03:22.720
> 
> 标签：android, background, webserver, updating

如何将数据更新到服务器？我已经使用了下面的代码，但它在 10 分钟后没有执行。

```
ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();
        executor.scheduleWithFixedDelay(new Runnable(){

            public void run() {

//update data to server

            }

    }, 0, 600, TimeUnit.SECONDS); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:37:57.553

您必须使用自己的线程。这是使用 AsyncTask 的解决方案....

所有代码都放在您的 Activity 类中。

```
public void toCallAsynchronous() {
                    final Handler handler = new Handler();
                    Timer timer = new Timer();
                    TimerTask doAsynchronousTask = new TimerTask() {
                        @Override
                        public void run() {
                            handler.post(new Runnable() {
                                public void run() {
                                    try {

        MyAsyncTask task = new MyAsyncTask();
        task.execute(txtSearchField.getText().toString());

                                }
                            });
                        }
                    };
    timer.schedule(doAsynchronousTask, 0, 2000); // execute in every 2 second

} 
```

// 异步任务类

```
private class MyAsyncTask extends AsyncTask<String, Object, List<ModelObject>> {

               @Override
               protected List< ModelObject > doInBackground(String... params) {

               // Call web service
               return null;

                }

                @Override
                protected void onPostExecute(List< ModelObject > result) {
                        super.onPostExecute(rezultat);
                        // Update UI
                }            
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:09:48.020

试试这个

```
 private static final ScheduledExecutorService worker = Executors
       .newSingleThreadScheduledExecutor();
 worker.schedule(new Runnable(){
        public void run() {
 //update data to server
        }, 600, TimeUnit.SECONDS); 
```

# css - 改变背景颜色

> ID：14607055
> 
> 赞同：-1
> 
> 时间：2013-01-30T15:03:27.760
> 
> 标签：css, colors, background

我的背景颜色有问题。在某些页面上，我使用 TinySlider，它将背景颜色设置为灰色。当我尝试将其更改为例如 Orange 时，它​​只会在那些不使用 Tiny Slider 的页面上更改。有没有办法解决这个问题？

我已将文件上传到谷歌驱动器。[所有文件的链接](https://docs.google.com/folder/d/0BxsqMLXovlRHVTdfWkNSRUZCUzA/edit)

style.css 用于 TinySlider，而 stilark.css 用于所有页面。index.html 使用 TinySlider，而 skolen.html 没有。

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:09:37.250

尝试更改

```
body {font:12px Verdana,Arial; color:#555; background:#ddd} 
```

将“style.css”改成

```
body {font:12px Verdana,Arial; color:#555; background-color:#FEAD41} 
```

# android - 将 XML 字符串编码为 EXI 并通过 websocket 发送

> ID：14607062
> 
> 赞同：1
> 
> 时间：2013-01-30T15:03:33.427
> 
> 标签：android, xml, node.js, websocket, exi

首先，我使用的是客户端-服务器架构，客户端使用 android，服务器使用 node.js，它们通过 Socket.io 库连接，因此，它们使用的是 websockets。

我的疑问是我正在使用 Java 的 XMLSerializer 生成 XML 字符串，我想将其编码为 EXI 并将其发送到服务器，因此，是否可以在不使用文件的情况下进行编码 XML-EXI？直接从字符串到字符串？因为我看到的所有示例都假设我的 XML 位于一个文件中，并且我希望输出到另一个文件中。另一个疑问是，我可以将 EXI 作为字符串发送吗？因为我已经建立了客户端和服务器之间的通信，但是它们只是发送字符串，如果我可以发送整个文件，我不会发送，在这种情况下，发送的数据量会有所不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:25:40.053

最后我解决了，对于有同样问题的人，解决方法是：

```
String input = methodGivingXMLString();
byte inputBytes[] = input.getBytes();
ByteArrayInputStream in = new ByteArrayInputStream(inputBytes);
transmogrifier.encode(new InputSource(in)); 
```

对于输入和输出：

```
 ByteArrayOutputStream result = new ByteArrayOutputStream();
 transmogrifier.setOutputStream(result); 
```

注 1：我正在使用 OpenExi 库

注 2：必须在调用 encode() 方法之前设置输出流。

# javascript - 使 div 始终位于始终写入内容的画布之上

> ID：14607063
> 
> 赞同：1
> 
> 时间：2013-01-30T15:03:34.960
> 
> 标签：javascript, html, html5-canvas, kineticjs

我不断在我的画布中绘制一些线条，`kinetic.js`并且我希望一个 div 文本出现在这个画布的顶部。使用`relative`和`absolute`技巧我可以在画布中间放置一个 div，但问题是当我不断画线时，这些线被绘制在我不想发生的 div 文本之上！

基本模板：

```
 <div id="div-text" style="background-color:#00baba; position: absolute; margin-top: 50%; margin-left: 50%;">
        greatTexts
   </div>

   <div id="container" style="position: relative; width: 100%; height: 100%;">
   <canvas></canvas> 
   </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:14:35.447

我相信你也可以同时设置和的`z-index`值。像这样：`#container``#div-text`

```
<div id="div-text" style="background-color:#00baba; position: absolute; margin-top: 50%; margin-left: 50%;z-index:999;">
        greatTexts
   </div>

  <div id="container" style="position: relative; width: 100%; height: 100%;z-index:990;">
     <canvas id="myCanvas" height="500" width="500"></canvas> 
   </div> 
```

[这](http://jsbin.com/uxijin/1/edit)显示了一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:09:40.267

默认情况下为空的画布，这意味着您可以看到其背后的元素。

由于您`<div>` **在**`<canvas>`代码中放置了，`<div>`因此**在**`<canvas>`.

解决方案？稍微切换一下div：

```
<div>
    <canvas style="position:absolute; width:100%; height:100%; background:red"></canvas> 
    <div id="div-text" style="background-color:#00baba; position:absolute; margin-top:50%; margin-left:50%;">
        greatTexts
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T04:15:17.897

只需像这样将带有文本的 div 放在容器 div 之后

```
 <div id="container" style="position: relative; width: 100%; height: 100%;">

   <div id="div-text" style="background-color:#00baba; position: absolute; margin-top: 50%; margin-left: 50%;">
        greatTexts
   </div> 
```

无需创建画布元素，因为正如您所提到的，KineticJS 会自动为您创建这些元素。

# ios - 拖动单元格时如何在 UITableViewCell 中隐藏阴影

> ID：14607068
> 
> 赞同：6
> 
> 时间：2013-01-30T15:03:58.450
> 
> 标签：ios, xcode, uitableview

我有带有隐藏分隔线的 UITableView，当我拖动单元格时，阴影会出现某种形式，因为边框会上下出现。如何隐藏这个？请看例子： ![模拟器截图](../Images/b88fcff4137e99a9a2165b6a151e5d4b.png)

十分感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T18:45:34.540

所以，我有答案，只是 UITableView 的子类和方法：

```
- (void) didAddSubview:(UIView *)subview
{
    [super didAddSubview:subview];

    if([subview.class.description isEqualToString:@"UIShadowView"]) {
        subview.hidden = YES;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-11T08:53:30.510

NoShadowTableView.m

```
#import "NoShadowTableView.h"

@interface NoShadowTableView ()
{
    //  iOS7
    __weak UIView* wrapperView;
}

@end

@implementation NoShadowTableView

- (void) didAddSubview:(UIView *)subview
{
    [super didAddSubview:subview];

    //  iOS7
    if(wrapperView == nil && [[[subview class] description] isEqualToString:@"UITableViewWrapperView"])
        wrapperView = subview;

    //  iOS6
    if([[[subview class] description] isEqualToString:@"UIShadowView"])
        [subview setHidden:YES];
}

- (void) layoutSubviews
{
    [super layoutSubviews];

    //  iOS7
    for(UIView* subview in wrapperView.subviews)
    {
        if([[[subview class] description] isEqualToString:@"UIShadowView"])
            [subview setHidden:YES];
    }
}

@end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-03-12T11:35:52.903

快速破解是子类化 UITableViewCell 并添加方法：

```
 override func layoutSubviews() {
        super.layoutSubviews()

        superview?.subviews.filter({ "\(type(of: $0))" == "UIShadowView" }).forEach { (sv: UIView) in
            sv.removeFromSuperview()
        }
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-22T02:26:21.607

这段代码对我有用！

```
import UIKit

class NoShadowTableView: UITableView {

    override func didAddSubview(_ subview: UIView) {
        super.didAddSubview(subview)
        if "\(type(of: subview))" == "UIShadowView" {
            subview.removeFromSuperview()
        }
    }

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T15:46:10.837

通过使用默认的 UITableView 重新排序控件，我遇到了类似的问题。所以我使用了这个外部第三方库来解决我的问题。

[https://github.com/shusta/ReorderingTableViewController](https://github.com/shusta/ReorderingTableViewController)

希望这可以帮助

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-03T16:08:44.763

Swift 3 实现（移除 iOS6 支持）

```
import UIKit

class NoShadowTableView: UITableView {

    weak var wrapperView: UIView?

    override func didAddSubview(_ subview: UIView) {
        super.didAddSubview(subview)

        if wrapperView == nil && "\(type(of: subview))" == "UITableViewWrapperView" {
            wrapperView = subview
        }
    }

    override func layoutSubviews() {
        super.layoutSubviews()

        wrapperView?.subviews.forEach({ view in
            if "\(type(of: view))" == "UIShadowView" {
                view.isHidden = true
            }
        })
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-07-25T13:35:26.313

对我来说，使用 UIShadowView 的黑客没有奏效。**我在 iOS 10 上检查了解决方案。但是单元**类中的一行已经成功了：

```
override func layoutSubviews() {
    super.layoutSubviews()
    self.subviews.filter{ $0 is UIImageView }.forEach { $0.isHidden = true }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-09T10:22:37.490

Swift 4 解决方案；使用扩展的 uitableviewcontroller 因为现在阴影在表格中并且仅在移动单元格时添加。

```
class UITableViewControllerEx: UITableViewController {

    override func viewWillLayoutSubviews() {
        super.viewWillLayoutSubviews()
        view.subviews.filter({ String(describing: type(of: $0)) == "UIShadowView" }).forEach { (sv: UIView) in
            sv.isHidden = true
        }
    }

} 
```

# c# - 当一切都公开时，可访问性不一致

> ID：14607070
> 
> 赞同：1
> 
> 时间：2013-01-30T15:04:09.217
> 
> 标签：c#, json

我正在尝试反序列化来自 Google Maps Geocode 的 JSON 响应。

这些是我根据响应编码的类。

```
public class GoogleGeoCodeResponse
    {
        public string status { get; set; }
        public results[] results { get; set; }
    }

public class results
    {
        public address_component[] address_components { get; set; }
        public String formatted_address { get; set; }
        public Geometry geometry { get; set; }
        public Boolean partial_match { get; set; }
        public string[] types { get; set; }
    }

public class address_component
    {
        public String long_name { get; set; }
        public String short_name { get; set; }
        public String[] types { get; set; }
    }

public class Geometry
    {
        public bounds_viewport bounds { get; set; }
        public LatLong location { get; set; }
        public String location_type { get; set; }
    }

public class bounds_viewport
    {
        public LatLong northeast { get; set; }
        public LatLong southwest { get; set; }
    }

public class LatLong
    {
        public double lon { get; set; }
        public double lat { get; set; }
    } 
```

在我的表单按钮上单击我使用此代码。

```
var json = new WebClient().DownloadString("url");
GoogleGeoCodeResponse test = JsonConvert.DeserializeObject<GoogleGeoCodeResponse>(json);

MessageBox.Show(test.results[0].geometry.location.lat + " / " + test.results[0].geometry.location.lon); 
```

然后我想看看我是否得到了正确的信息，但我得到了：

“错误 1 ​​可访问性不一致：属性类型 'WindowsFormsApplication1.results[]' 的可访问性低于属性 'WindowsFormsApplication1.GoogleGeoCodeResponse.results'”

我看过一堆有同样问题的帖子，但他们总是有一些私人或内部的东西会导致这个错误。如您所见，我声明的所有内容都是公开的。

我不明白为什么类中的公共内容比类本身更容易访问。

我对 C# 和 JSON 相当陌生，所以这可能非常简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:40:12.263

好的，所以我参加了我所有的课程并将代码从我的表单课程中取出，并且它起作用了。我把它放回课堂上，它仍然有效我不知道我改变了什么，也许它只是被窃听了或者无论如何谢谢你的帮助！

# c++ - 从 engOpen(..) 启动 matlab，收到引擎关闭的通知

> ID：14607082
> 
> 赞同：0
> 
> 时间：2013-01-30T15:04:55.193
> 
> 标签：c++, c, matlab

如果我使用 api 函数 engOpen 启动 matlab 引擎，然后将引擎的可见性设置为 TRUE，如果用户关闭引擎（他们可以这样做），我是否有任何方式得到通知？

更一般地说，在打开一个实例并使其可见后，我是否有办法知道我持有的引擎指针是否仍然有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:40:10.487

只是一个想法，为什么你可以使用[`engGetVariable`](http://www.mathworks.com/help/matlab/apiref/enggetvariable.html)which 返回指向新分配的 mxArray 结构的指针，如果尝试失败，则返回 NULL 。因此，在启动引擎时，还要启动一个虚拟变量，然后如果`engGetVariable`失败，则意味着命名的虚拟变量不存在，这应该意味着引擎已关闭...当然，您也想防止用户删除该变量...

# php - 如何通过php preg_replace删除文本中所有括号之间的空格

> ID：14607084
> 
> 赞同：0
> 
> 时间：2013-01-30T15:05:04.180
> 
> 标签：php, regex

我有类似的文字：

> “吃 [12] 我的 [15] 短裤 [20]”

我想从字符串中的所有括号中删除空格。

我试过类似的东西：

```
$str = 'Eat [ 12 ] my [ 15]  shorts [ 20 ]';
$str = preg_replace_callback("~\([^\)]*)\)~", function($s) {
    return str_replace(" ", "", "($s[1])");
}, $str);
echo $str; 
```

但仍然没有成功。

有人可以告诉我，如何以正确的方式做到这一点？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:08:28.147

试试这个：

```
$str = 'Eat [ 12 ] my [ 15]  shorts [ 20 ]';
$str = preg_replace('#\[\s+#', '[', $str);
$str = preg_replace('#\s+\]#', ']', $str); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:13:23.113

如果您知道只有**一个**空格，您可以使用简单的 str_replace。这将比 preg_replace 快得多：

```
$str = str_replace( array( '[ ', ' ]' ), array( '[', ']' ), $str ); 
```

# regex - sed 或 awk - 如果找不到表达式，则从文件中删除行

> ID：14607088
> 
> 赞同：0
> 
> 时间：2013-01-30T15:05:26.737
> 
> 标签：regex, perl, sed, awk

我有一个包含多个条目的文件。条目由 - 如果在其中找不到某个短语，我想删除此模式之间的所有行。例子：

```
--
Company
Street 
Zip Code
Country
-- 
```

如果 Country 在 -- 和 -- 之间找不到，则删除整个块

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T05:44:25.843

也许以下内容会有所帮助：

```
use strict;
use warnings;

local $/ = '--';
print $/;

while (<>) {
    print if /\bCountry\b/;
} 
```

用法：`perl script.pl dataFile [>outputFile]`

数据：

```
--
Company
Street 
Zip Code
Elephant
--
Company
Street 
Zip Code
Country
--
Company
Street 
Zip Code
Goat
--
Company
Street 
Zip Code
Country
-- 
```

输出：

```
--
Company
Street 
Zip Code
Country
--
Company
Street 
Zip Code
Country
-- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:13:36.170

你可以这样做：

```
awk '!/Country/' RS='--\n' ORS='--\n' 
```

# c++ - 堆损坏以及如何在 char* foobar [50] 中交换 2 个值

> ID：14607091
> 
> 赞同：-4
> 
> 时间：2013-01-30T15:05:28.877
> 
> 标签：c++, pointers, debugging, memory, heap-memory

这是我的代码，我不明白为什么会出现运行时检查失败 #2 - 变量“tempSign”周围的堆栈已损坏。我相信错误是由于尝试在 char* tempSign [MAX] 中交换 2 个值而引起的。有人可以解释为什么我会收到此错误并帮助我解决此问题，谢谢。

```
void constructSet(ZodiacSign *& z,int size)
{

    /*ZodiacSign is a char *
     This is how z was created from the previous function and 
     passed by reference

     ZodiacSign * z;
     z=new char* [num];

    for (int i=0;i<num;i++)
    {
        z[i]=new char [MAXSTR]; 
    } */

    ZodiacSign tempSign [MAX]={"aquarius","pisces","aries","taurus","gemini","cancer","leo",
                               "vergo","libra","scorpio","sagittarius","capricorn"};

    for (int i=0; i<size;i++)
    {
        int x=12;
        int num=(rand()%x);

        char * ptr=tempSign[num];
        strcpy(z[i],ptr);
        swap(num,x,tempSign);

        x--;
    }
}

void swap(int num,int x,ZodiacSign tempSign [MAX])
{
    ZodiacSign temp;

    temp=tempSign[num];

    tempSign[num]=tempSign[x-1];

    tempSign[x]=temp;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T15:13:56.417

循环的第一次迭代`constructSet`设置`x`为 12\. `swap`然后将尝试写入`tempSign[12]`. C 数组是从零开始的，因此有效索引为`tempSign`[0..11]。写入元素 12 是未定义的行为，但很可能会在刚刚超出为`tempSign`.

您可以通过更改以下行来解决此问题`swap`

```
tempSign[x-1]=temp;
//        ^^ 
```

# java - 调用 jar.exe，错误 C:\Program Files\Java\jdk1.7.0_10\bin\jar.exe 不是有效的 Win32 应用程序

> ID：14607093
> 
> 赞同：0
> 
> 时间：2013-01-30T15:05:30.897
> 
> 标签：java, jar

我想将一些类打包到一个文件中。所以我尝试运行命令：

```
C:\Program Files\Java\jdk1.7.0_10\bin\jar.exe 
```

但是错误很奇怪。`C:\Program Files\Java\jdk1.7.0_10\bin\jar.exe is not a valid Win32 application.`

我现在该怎么办？我需要安装任何其他工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T00:23:46.583

我重新安装了64位版本的jdk，它可以工作

# html - 将鼠标悬停在错误符号上时显示错误消息

> ID：14607098
> 
> 赞同：1
> 
> 时间：2013-01-30T15:05:52.907
> 
> 标签：html, css, razor

我需要以下字段验证效果，但我很难想出 CSS。

基本上，如果需要，我可以在字段末尾显示一个红色信息标志（这发生在表单提交发生之后）：

![在此处输入图像描述](../Images/450dd78234ebdf8098ab720f0558fd60.png)

我喜欢这样，但我也希望在您将鼠标悬停在红色感叹号上时显示一条详细消息 - 最好是在输入框下方的中央，如下所示：

![在此处输入图像描述](../Images/e5ed32173dc895418f8e501c63e1f640.png)

我该怎么做？我已经开始了一些 CSS，但需要帮助才能完成 - 请参阅下面的链接。

[http://cdpn.io/rKLhl](http://cdpn.io/rKLhl)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:29:11.573

您在一个问题中提出了很多不同的问题……以下是要点：

**演示**：http: [//jsfiddle.net/LNr6f/1/](http://jsfiddle.net/LNr6f/1/)

**1）**您必须创建一个**隐藏** `div`的，并在需要触发错误消息时显示它（我已将`hover`事件用作触发器，只需根据您的需要进行调整即可）；

**2)**您可以使用;创建**圆角边框**`CSS border-radius`

**3)**你可以用 CSS 创建**渐变背景**，你很幸运，因为有一个[**CSS Gradient Generator**](http://www.colorzilla.com/gradient-editor/)可以为你提供一个不错的编辑器和跨浏览器代码（我在示例中使用了简单的红色背景） ;

**4）**您必须保持与文本框相关的工具提示的**位置**；使用`relative`和`absolute`定位如示例。

**5）**你需要**一个箭头**，它可以是一个图像，但也可以用纯CSS创建，如示例中，使用`CSS pseudo-class` `:before`（或`:after`），具有三个透明边框和一个彩色，相互折叠并创建三角形效果. 然后，您需要借助绝对定位将其移出 div 并将其置于 x 轴的中心。

你可以从这里开始，祝你好运。

示例 HTML

```
<div id="container">
    <input type="text" class="trigger" />
    <div class="tooltip">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. 
        Nunc gravida commodo mauris non sodales. Nunc consectetur 
        mattis arcu eu pharetra. Curabitur metus felis, tempus eu 
        mattis ut, auctor euismod lacus. Praesent ultrices convallis 
        odio, at vestibulum nulla faucibus nec. Nam euismod suscipit 
        massa, non euismod dui gravida ut. 
    </div>
</div> 
```

示例 CSS

```
#container {
    position: relative;
    border: 1px dashed silver;
    width: 100%;
    height: 300px;    
}

#container > .trigger{
    width: 300px;    
}

#container > .tooltip{
    position: absolute;
    display: none;
    background-color: red;     
    width: 200px;    
    left: 50px;
    top: 40px; 
    border-radius: 10px;
    padding: 10px;
    color: white;
}

#container > .tooltip:before {
    position: absolute;
    content: '';
    border-width: 10px;
    border-style: solid;
    border-color: rgba(255,255,255,0) rgba(255,255,255,0) red rgba(255,255,255,0);
    top: -20px; 
    left: 90px;    
}

#container > .trigger:hover + .tooltip {
    display: block;
} 
```

# c# - 带有自定义序列化程序的 JSON.NET 到自定义对象

> ID：14607099
> 
> 赞同：3
> 
> 时间：2013-01-30T15:05:52.860
> 
> 标签：c#, .net, json, .net-4.0, json.net

因此，我试图将我的复杂对象 .NET 转换为 JSON 中完全不同的对象。基本上，我有一个对象数组，可以是从我的基类派生的任何类型，我想将该对象数组转换为我自己的 JSON 对象。我认为我不能只做一个简单的 JsonConvert.Serialize() 方法调用，因为我的 JSON 对象的结构会有所不同。

所以这是我的 .NET 类的模型：

```
public abstract class A
{
   public string Id { get; set; }
   public string Title { get; set; }
   public bool Enabled { get; set; }
   public List<X> MyCollection { get; set; }
}

public class B : A
{
   public string Foo { get; set; }
}

public class C : A
{
   public int Bar { get; set; }
}

public abstract class X
{
   public string Id { get; set; }
   public string Title { get; set; }
   public bool Enabled { get; set; }
}

public class Y : X
{
   public string Hello { get; set; }
}

public class Z : X
{
   public string World { get; set; }
} 
```

显然，这是我真实班级结构的一个简单视图，但希望有关如何转换它的一些指导将使我能够转换我的真实班级。基本上，我的类（A、B、C）将包含一个类列表（X、Y、C）。

所以假设我有一个上面列出的这些对象的数组/集合：

```
List<A> myObjects = new List<A>();
A myVar = new B();
myVar.Title = "Number 1";
myVar.MyCollection.Add(new Y());
myVar.MyCollection.Add(new Y());
myVar.MyCollection.Add(new Z());
myObjects.Add(myVar);

myVar = new B();
myVar.Title = "Number 2";
myVar.MyCollection.Add(new Z());
myObjects.Add(myVar);

myVar = new C();
myVar.Title = "Number 3";
myVar.MyCollection.Add(new Y());
myVar.MyCollection.Add(new Y());
myObjects.Add(myVar); 
```

我想将我的对象“myObjects”序列化为这样的 JSON 结构：

```
[
   {
      name: "Number 1", //This is the value of A.Title
      type: "B", //This is a NEW property I want to add to the JSON
      enabled: true, //This is the value of A.Enabled
      foo: "SomeValue", //This is the value of B.Foo
      myCollection: [
         { name: "Y1", type: "Y", enabled: true, hello: "SomeValue" }
         { name: "Y2", type: "Y", enabled: true, hello: "SomeOtherValue" }
         { name: "Z1", type: "Z", enabled: true, world: "SomeValue" }
      ]
   },
   {
      name: "Number 2",
      type: "B",
      enabled: true,
      foo: "SomeValue",
      myCollection: [
         { name: "Z2", type: "Z", enabled: true, world: "SomeValue" }
      ]
   },
   {
      name: "Number 3",
      type: "C",
      enabled: true,
      bar: "SomeValue",
      myCollection: [
         { name: "Y3", type: "Y", enabled: true, hello: "SomeValue" }
         { name: "Y4", type: "Y", enabled: true, hello: "SomeOtherValue" }
      ]
   }
] 
```

基本上，我想添加我自己的属性并在 JSON 中构造它与我的 .NET 对象所反映的略有不同。还有一些其他属性我也想添加到我的对象中，但它们没有在这里列出（可能这个帖子会更大）。我基本上只需要一种方法来获取我的对象并以我自己的自定义方式序列化它们。我需要确保我序列化派生类型，以便我可以携带其中一些属性。任何人都可以帮助指导我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:58:56.850

您可以使用 Json.Linq 类通过在反序列化主类后读取类型来动态反序列化它们。

```
var objects = JArray.Parse(jsonString)
List<A> objectList = new List<A>();
foreach (var obj in objects) {
    A newObj = null;
    switch ((string)obj["type"]) {
        case "B":
            newObj = obj.ToObject<B>();
            break;
        case "C":
            newObj = obj.ToObject<C>();
            break;
    }
    newObj.MyCollection.Clear();
    foreach (var x in obj["myCollection"]) {
        var newX = null;
        switch ((string)x["type"]) {
            case "Y":
                newX = x.ToObject<Y>();
                break;
            case "Z":
                newX = x.ToObject<Z>();
                break;
        }
        newObj.MyCollection.Add(newX);
    }
    objectList.Add(newObj);
} 
```

据我所知，这将处理您发布的 Json，如果有任何错误，对不起，我完全是在平板电脑上凭记忆做到这一点的：P

# highcharts - HighCharts：如何绘制在每个轴上显示不同比例标签的雷达图？

> ID：14607100
> 
> 赞同：2
> 
> 时间：2013-01-30T15:05:55.367
> 
> 标签：highcharts, radar-chart

我需要使用 HighCharts 绘制雷达图；特别是，所有系列都有不同的规模。我能够使用多个比例尺（每个 y 轴一个）正确绘制雷达图，但我在主 y 轴上看到多个重叠标签，这显然是错误的。现在，我想在相应的 y 轴上绘制与每个 y 轴相关的标签。我怎样才能做到这一点 ？

这是一个可以粘贴到 jsFiddle 中的片段，以验证标签是否确实重叠。

```
$(function () {
window.chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        polar: true,
        type: 'line',
        zoomType: 'xy'
    },
    title: {
        text: 'Indicators Radar Chart',
        x: -80
    },
    pane: {
        size: '90%'
    },
    xAxis: {
        categories: ['A', 'B', 'C', 'D'],
        tickmarkPlacement: 'on',
        lineWidth: 0,
        min: 0
    },
    yAxis: [{
        gridLineInterpolation: 'polygon',
        lineWidth: 0,
        min: 0,
        labels: {
            enabled: true
        }
    }, {
        gridLineInterpolation: 'polygon',
        lineWidth: 0,
        min: 0,
        labels: {
            enabled: true
        }
    }, {
        gridLineInterpolation: 'polygon',
        lineWidth: 0,
        min: 0,
        labels: {
            enabled: true
        }
    }],
    tooltip: {
        shared: true,
        valuePrefix: ''
    },
    legend: {
        align: 'right',
        verticalAlign: 'top',
        y: 100,
        layout: 'vertical'
    },
    series: [{
        name: 'Austria',
        yAxis: 0,
        data: [0.130435, 35.043480, 29288.695312, 236960.296875],
        pointPlacement: 'on'
    }, {
        name: 'Germany',
        yAxis: 1,
        data: [0.000000, 42.217392, 149103.906250, 589782.500000],
        pointPlacement: 'on'
    }, {
        name: 'Italy',
        yAxis: 2,
        data: [2.304348, 44.826088, 132805.218750, 878785.937500],
        pointPlacement: 'on'
    }]
}); 
```

});

我试图获得的输出是，对于这个特定的图表，与不同比例相关的标签出现在每个轴上：从中心点到 A，从中心点到 B，从中心点到 C 和从中心点到 D。问题是现在所有标签都出现在同一轴上，从中心点到 A。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:03:17.283

演示：[http ://www.highcharts.com/jsbin/eyugex/edit](http://www.highcharts.com/jsbin/eyugex/edit)

您似乎假设每个轴都从中心延伸到不同的方向，但事实并非如此。所有 Y 轴都从中心延伸。X 轴从图表的顶部开始，顺时针绕着周边沿着周边，并在顶部结束。Y 轴标签绘制在 X 轴开始的位置，即向上。

在这样的图表中，添加多个 Y 轴是没有意义的，因为它们都绘制在彼此之上，您无法从视觉上区分它们。

# css - 我怎样才能把这张图片分成几块，这样当我写一个长文本时，它就不会超出 div 的范围？

> ID：14607105
> 
> 赞同：0
> 
> 时间：2013-01-30T15:06:05.990
> 
> 标签：css

这就是我正在谈论的图像。

[http://i.imgur.com/KkH8ryV.jpg](http://i.imgur.com/KkH8ryV.jpg)

现在它作为我的新闻内容的背景。棕色区域是标题，黄色区域是内容。

当我在内容区域写入长文本时，由于图片不够大，文本会超出 div。

我想将图像分成 3 块。

1.  标题
2.  中间
3.  页脚

页眉和页脚将始终应用一次。中间必须根据文本的长度重复。

如何在 CSS 中实现这一点？

PS：您可以将分割图像称为“header.png，middle.png。和footer.png”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:11:39.573

**HTML**

```
<div id="parentDiv">
   <div id="header">
   </div>
   <div id="middle">
   </div>
   <div id="footer">
   </div>
</div> 
```

假设图像的宽度为 300 像素。

**CSS**

```
#header
{
     width:300px;
     height:100px;
     background-image: url("header.png");
     background-repeat: no-repeat;
}
#middle
{    width:300px;
     height:400px;
     background-image: url("middle.png");
     background-repeat: repeat-y;
     /*If the width will be bigger than the actual
       width of the image, then add:
       background-repeat: repeat-x;
     */
}
#footer
{
    width:300px;
    height:100px;
    background-image: url("footer.png");
    background-repeat: no-repeat;
} 
```

更多关于[背景重复](http://www.w3schools.com/cssref/pr_background-repeat.asp)。

注意图像会重复，看起来不太好，我建议给中间一个固定的高度，并使用，`overflow:auto;`当内容超过大小时会创建一个滚动条。

# c++ - Matlab/C++：使用 C++ Mex 持久对象进行并行计算时出现分段错误（无法转换句柄）

> ID：14607109
> 
> 赞同：5
> 
> 时间：2013-01-30T15:06:20.460
> 
> 标签：c++, matlab, parallel-processing, mex, parfor

这篇文章的参考资料：

*   [1] [http://www.mathworks.com/matlabcentral/newsreader/view_thread/278243](http://www.mathworks.com/matlabcentral/newsreader/view_thread/278243) “使 C++ 对象在 mex 调用之间持久化，并且健壮。”

*   [2] [MATLAB parfor 和 C++ 类 mex 包装器（需要复制构造函数？）](https://stackoverflow.com/questions/13842893/matlab-parfor-and-c-class-mex-wrappers-copy-constructor-required.) “MATLAB parfor 和 C++ 类 mex 包装器（需要复制构造函数？）”

我成功地实现了一个 Matlab/C++ 接口，基于 [1] 中提出的方法。无论如何，我在尝试将系统与 Matlab 并行计算一起使用时遇到了麻烦。

在 MEX 接口中尝试在 matlab 句柄和 C++ 指针之间进行转换时，发生在我身上的是分段错误。

为了更清楚，我将回顾 [1] 中提出的结构。系统中有三个文件，采用这种通信方案：

*[myInterface.m] <--> [myMexInterface.cpp] <--> [myClass.cpp]*

在哪里

*   myInterface.m 是一个 matlab 类
*   myMexInterface.cpp 是一个 C++ (mex) 函数
*   myClass.cpp 是一个 C++ (mex) 类

该系统的使用分为两个阶段：

*   构造：创建一个matlab对象myInterface。这会导致调用 myMexInterface.mexa64，从而调用 C++ myClass 对象的创建。myClass 的 C++ 指针通过 myMexInterface.mexa64 发送回 myInterface，存储它以供进一步使用。特别是，myMexInterface.mexa64 将myClass 的 C++ 指针*转换*为 matlab 句柄。
*   使用 matlab 中的 C++ 类：myInterface 向客户端提供方法，这些方法通过 myMexInterface.mexa64 传递，调用对象 myClass 上的函数。在此阶段，myMexInterface.mexa64 需要在构造阶段从 myInterface 存储的句柄才能调用正确 C++ 对象上的函数。当然，在这个阶段 myMexInterface.mexa64 会进行反向*转换*，从 Matlab 句柄到 C++ 指针。

在我的实现中，它在单线程中工作，在从句柄到指针的转换过程中会出现分段错误错误。特别是，我想关注 myMexInterface.cpp。要执行的命令通过字符串作为第一个参数传递，而可能（对于第二阶段操作）第二个参数是相对于与该接口关联的 C++ 对象的 matlab 句柄。

```
#include "mex.h"
#include "class_handle.hpp"

    CLASS void myMexInterface(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])
{
  if (!strcmp("new", cmd)) {
    // ...
    plhs[0] = convertPtr2Mat<myClass>(new myClass());
  }
  if (!strcmp("delete", cmd)) {
    // ...
    destroyObject<myClass>(prhs[1]);   
  }
  // Get the class instance pointer from the second input
  cout << " trying to convert handle..."; 
  myClass *myClass_instanceAddress = convertMat2Ptr<myClass>(prhs[1]); // SEGMENTATION FAULT ON MULTI CORE!!!
  cout << "   success in handle conversion. \n"; 
  if (!strcmp("aFunction", cmd)) {
    myClass_instanceAddress->aFunction();
  }
  // .. other functions
} 
```

生成段错误的函数 convertMat2Pt 来自包含 class_handle.hpp，这是 [1] 中提出的解决方案的一部分。特别是那个class_handle.hpp中的函数，其中段错误是convertMat2HandlePtr：

```
template<class base> class class_handle

// ...

template<class base> inline class_handle<base> *convertMat2HandlePtr(const mxArray *in)
{
  if (mxGetNumberOfElements(in) != 1 || mxGetClassID(in) != mxUINT64_CLASS || mxIsComplex(in))
      mexErrMsgTxt("Input must be a real uint64 scalar.");

  std::cout << "class_handle: trying to cast \n";
  class_handle<base> *ptr = reinterpret_cast<class_handle<base> *>(*((uint64_t *)mxGetData(in))); // SEGMENTATION FAULT ON MULTI CORE!!!
  if (!ptr->isValid())
    mexErrMsgTxt("Handle not valid.");
  return ptr;
}

template<class base> inline base *convertMat2Ptr(const mxArray *in)
{
  return convertMat2HandlePtr<base>(in)->ptr();
}

// ... 
```

实际上我不清楚那个演员阵容中到底发生了什么，所以我无法进行更深入的分析。我可以想象的是，由于某种原因，Matlab 并行计算与之前创建的 C++ 对象产生了不一致。

生成段错误的matlab客户端函数如下：

```
myInterface = myMexInterface();
matlabpool open local 1   
out = myModelInterf.aFunction()
disp('                               Now starting parfor ***');
parfor i = 1:1
  out = myModelInterf.aFunction()
end 
```

注意，为了简化情况，我在matlabpool中只打开了一个worker，parfor只执行了一个循环：反正我还是有错误。当然，如果没有 parfor 块，即使多次调用 aFunction()，也不会出错。

我在命令窗口中获得的是：

```
Create interface with CPP handle: 139698584223104
Starting matlabpool using the 'local' profile ... connected to 1 workers.
    trying to convert handle...class_handle: trying to cast 
success in handle conversion. 

out =

    3

                  Now starting parfor ***
Save interface with CPP handle: 139698584223104
Save interface with CPP handle: 139698584223104
Create interface with CPP handle: 0
Load interface with CPP handle: 139698584223104
    trying to convert handle...class_handle: trying to cast 

------------------------------------------------------------------------
      Segmentation violation detected at Wed Jan 30 15:00:47 2013
------------------------------------------------------------------------

Configuration:
  Crash Decoding  : Disabled
  Current Visual  : None
  Default Encoding: UTF-8
  GNU C Library   : 2.15 stable
  MATLAB Root     : /usr/local/MATLAB/R2012b
  MATLAB Version  : 8.0.0.783 (R2012b)
  Operating System: Linux 3.2.0-31-generic #50-Ubuntu SMP Fri Sep 7 16:16:45 UTC 2012 x86_64
  Processor ID    : x86 Family 6 Model 42 Stepping 7, GenuineIntel
  Virtual Machine : Java 1.6.0_17-b04 with Sun Microsystems Inc. Java HotSpot(TM) 64-Bit Server VM mixed mode
  Window System   : No active display

Fault Count: 1

Abnormal termination:
Segmentation violation

Register State (from fault):
  RAX = 00007fedbcba74a0  RBX = 00007fee2afa0fe0
  RCX = 0000000000000006  RDX = 0000000000000060
  RSP = 00007fee2afa0520  RBP = 00007fee2afa09f0
  RSI = 0000000000000000  RDI = 00007fee2b817a50

  R8 = 00007fee2afa09af   R9 = 00007fedbcdb9208
  R10 = 00007fee2afa0200  R11 = 00007fee3d57ba00
  R12 = 0000000000000002  R13 = 00007f0e1c7cfd80
  R14 = 00007fee2afa0dd0  R15 = 00007fee2afa0f20

  RIP = 00007fedfc00a8e4  EFL = 0000000000010206

  CS = 0033   FS = 0000   GS = 0000

Stack Trace (from fault):
[  0] 0x00007fee3f5e31de    /usr/local/MATLAB/R2012b/bin/glnxa64/libmwfl.so+00516574 _ZN2fl4diag15stacktrace_base7captureERKNS0_14thread_contextEm+000158
[  1] 0x00007fee3f5e44b2    /usr/local/MATLAB/R2012b/bin/glnxa64/libmwfl.so+00521394
[  2] 0x00007fee3f5e5ffe    /usr/local/MATLAB/R2012b/bin/glnxa64/libmwfl.so+00528382 _ZN2fl4diag13terminate_logEPKcRKNS0_14thread_contextE+000174
[  3] 0x00007fee3e8d2093   /usr/local/MATLAB/R2012b/bin/glnxa64/libmwmcr.so+00557203 _ZN2fl4diag13terminate_logEPKcPK8ucontext+000067
[  4] 0x00007fee3e8ceb9d   /usr/local/MATLAB/R2012b/bin/glnxa64/libmwmcr.so+00543645
[  5] 0x00007fee3e8d0835   /usr/local/MATLAB/R2012b/bin/glnxa64/libmwmcr.so+00550965
[  6] 0x00007fee3e8d0a55   /usr/local/MATLAB/R2012b/bin/glnxa64/libmwmcr.so+00551509
[  7] 0x00007fee3e8d10fe   /usr/local/MATLAB/R2012b/bin/glnxa64/libmwmcr.so+00553214
[  8] 0x00007fee3e8d1295   /usr/local/MATLAB/R2012b/bin/glnxa64/libmwmcr.so+00553621
[  9] 0x00007fee3cdc8cb0              /lib/x86_64-linux-gnu/libpthread.so.0+00064688
[ 10] 0x00007fedfc00a8e4 /home/gwala/Documents/mexInitConfig/mex_torque_profile.mexa64+00010468 mexFunction+002116
[ 11] 0x00007fee355b269a     /usr/local/MATLAB/R2012b/bin/glnxa64/libmex.so+00112282 mexRunMexFile+000090
[ 12] 0x00007fee355ae4e9     /usr/local/MATLAB/R2012b/bin/glnxa64/libmex.so+00095465
[ 13] 0x00007fee355af33c     /usr/local/MATLAB/R2012b/bin/glnxa64/libmex.so+00099132
[ 14] 0x00007fee3e620a4b /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_dispatcher.so+00596555 _ZN8Mfh_file11dispatch_fhEiPP11mxArray_tagiS2_+000539
[ 15] 0x00007fee3deb4e56 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+02264662
[ 16] 0x00007fee3de651c6 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01937862
[ 17] 0x00007fee3de69ab4 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01956532
[ 18] 0x00007fee3de660d3 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01941715
[ 19] 0x00007fee3de66ed7 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01945303
[ 20] 0x00007fee3ded2760 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+02385760
[ 21] 0x00007fee3e620a4b /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_dispatcher.so+00596555 _ZN8Mfh_file11dispatch_fhEiPP11mxArray_tagiS2_+000539
[ 22] 0x00007fee35b73538  /usr/local/MATLAB/R2012b/bin/glnxa64/libmwmcos.so+01574200
[ 23] 0x00007fee35b15232  /usr/local/MATLAB/R2012b/bin/glnxa64/libmwmcos.so+01188402
[ 24] 0x00007fee35b154ce  /usr/local/MATLAB/R2012b/bin/glnxa64/libmwmcos.so+01189070
[ 25] 0x00007fee35b1723c  /usr/local/MATLAB/R2012b/bin/glnxa64/libmwmcos.so+01196604
[ 26] 0x00007fee35bfc9c7  /usr/local/MATLAB/R2012b/bin/glnxa64/libmwmcos.so+02136519
[ 27] 0x00007fee3e5d6431 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_dispatcher.so+00291889 _ZN13Mfh_MATLAB_fn11dispatch_fhEiPP11mxArray_tagiS2_+000529
[ 28] 0x00007fee3deb4933 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+02263347
[ 29] 0x00007fee3dec40d8 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+02326744
[ 30] 0x00007fee3dec7038 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+02338872
[ 31] 0x00007fee3de6ab18 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01960728
[ 32] 0x00007fee3de660d3 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01941715
[ 33] 0x00007fee3de66ed7 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01945303
[ 34] 0x00007fee3ded2760 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+02385760
[ 35] 0x00007fee3e62053b /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_dispatcher.so+00595259 _ZN8Mfh_file11dispatch_fhEP20_mdUnknown_workspaceiPP11mxArray_tagiS4_+000555
[ 36] 0x00007fee3e5e3057 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_dispatcher.so+00344151 _Z30callViamdMxarrayFunctionHandlePviPP11mxArray_tagiS2_+000039
[ 37] 0x00007fee3de3e143 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01777987
[ 38] 0x00007fee3de3f07d /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01781885
[ 39] 0x00007fee3de3f78b /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01783691
[ 40] 0x00007fee3de42759 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01795929
[ 41] 0x00007fee3de6922b /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01954347
[ 42] 0x00007fee3de660d3 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01941715
[ 43] 0x00007fee3de66ed7 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01945303
[ 44] 0x00007fee3ded2760 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+02385760
[ 45] 0x00007fee3e62053b /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_dispatcher.so+00595259 _ZN8Mfh_file11dispatch_fhEP20_mdUnknown_workspaceiPP11mxArray_tagiS4_+000555
[ 46] 0x00007fee3e5e3057 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_dispatcher.so+00344151 _Z30callViamdMxarrayFunctionHandlePviPP11mxArray_tagiS2_+000039
[ 47] 0x00007fee3ddf38b5 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01472693 inFullFevalFcn+001045
[ 48] 0x00007fee3e5e66ba /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_dispatcher.so+00358074 _ZN11Mfh_builtin11dispatch_mfEiPP11mxArray_tagiS2_+000074
[ 49] 0x00007fee3e5d6431 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_dispatcher.so+00291889 _ZN13Mfh_MATLAB_fn11dispatch_fhEiPP11mxArray_tagiS2_+000529
[ 50] 0x00007fee3e0a1140 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+04280640
[ 51] 0x00007fee3e0a197a /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+04282746
[ 52] 0x00007fee3e0a24ea /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+04285674
[ 53] 0x00007fee3df054cd /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+02593997
[ 54] 0x00007fee3df30d22 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+02772258
[ 55] 0x00007fee3df30e4f /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+02772559
[ 56] 0x00007fee3e04db30 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+03939120
[ 57] 0x00007fee3de69fec /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01957868
[ 58] 0x00007fee3de660d3 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01941715
[ 59] 0x00007fee3de66ed7 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01945303
[ 60] 0x00007fee3ded2760 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+02385760
[ 61] 0x00007fee3e620a4b /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_dispatcher.so+00596555 _ZN8Mfh_file11dispatch_fhEiPP11mxArray_tagiS2_+000539
[ 62] 0x00007fee3de9388f /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+02128015
[ 63] 0x00007fee3de92c69 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+02124905
[ 64] 0x00007fee3ddf129c /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01462940 inCallFcnWithTrap+000092
[ 65] 0x00007fee3de57bfb /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01883131
[ 66] 0x00007fee3ddf0168 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwm_interpreter.so+01458536 _Z28inCallFcnWithTrapInDesiredWSiPP11mxArray_tagiS1_PKcbP15inWorkSpace_tag+000104
[ 67] 0x00007fee36365b09   /usr/local/MATLAB/R2012b/bin/glnxa64/libmwiqm.so+02878217 _ZN3iqm15BaseFEvalPlugin7executeEP15inWorkSpace_tagRN5boost10shared_ptrIN14cmddistributor17IIPCompletedEventEEE+000457
[ 68] 0x00007fedff8a992d /usr/local/MATLAB/R2012b/bin/glnxa64/libnativejmi.so+00674093 _ZN9nativejmi14JmiFEvalPlugin7executeEP15inWorkSpace_tagRN5boost10shared_ptrIN14cmddistributor17IIPCompletedEventEEE+000173
[ 69] 0x00007fedff8d6c45 /usr/local/MATLAB/R2012b/bin/glnxa64/libnativejmi.so+00859205 _ZN3mcr3mvm27McrSwappingIqmPluginAdapterIN9nativejmi14JmiFEvalPluginEE7executeEP15inWorkSpace_tagRN5boost10shared_ptrIN14cmddistributor17IIPCompletedEventEEE+000629
[ 70] 0x00007fee3633bbfa   /usr/local/MATLAB/R2012b/bin/glnxa64/libmwiqm.so+02706426
[ 71] 0x00007fee3632d594   /usr/local/MATLAB/R2012b/bin/glnxa64/libmwiqm.so+02647444
[ 72] 0x00007fee357d7ccd /usr/local/MATLAB/R2012b/bin/glnxa64/libmwbridge.so+00122061 _Z10ioReadLinebP8_IO_FILERKN5boost8optionalIKP15inWorkSpace_tagEEb+000429
[ 73] 0x00007fee357d8354 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwbridge.so+00123732
[ 74] 0x00007fee357dd71d /usr/local/MATLAB/R2012b/bin/glnxa64/libmwbridge.so+00145181
[ 75] 0x00007fee357dd81e /usr/local/MATLAB/R2012b/bin/glnxa64/libmwbridge.so+00145438
[ 76] 0x00007fee357ddf07 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwbridge.so+00147207 _Z8mnParserv+000631
[ 77] 0x00007fee3e8b7472   /usr/local/MATLAB/R2012b/bin/glnxa64/libmwmcr.so+00447602 _ZN11mcrInstance30mnParser_on_interpreter_threadEv+000034
[ 78] 0x00007fee3e895b69   /usr/local/MATLAB/R2012b/bin/glnxa64/libmwmcr.so+00310121
[ 79] 0x00007fee3e895d48   /usr/local/MATLAB/R2012b/bin/glnxa64/libmwmcr.so+00310600
[ 80] 0x00007fee3eeabf73 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwservices.so+00999283 _ZN10eventqueue18UserEventQueueImpl5flushEv+000371
[ 81] 0x00007fee3eeac695 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwservices.so+01001109 _ZN10eventqueue8ReadPipeEib+000053
[ 82] 0x00007fee3eeab321 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwservices.so+00996129 _ZN10eventqueue18UserEventQueueImpl9selectFcnEb+000353
[ 83] 0x00007fee3284fa65   /usr/local/MATLAB/R2012b/bin/glnxa64/libmwuix.so+00518757
[ 84] 0x00007fee3ef45a11 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwservices.so+01628689 _ZSt8for_eachIN9__gnu_cxx17__normal_iteratorIPN5boost8weak_ptrIN4sysq10ws_ppeHookEEESt6vectorIS6_SaIS6_EEEENS4_8during_FIS6_NS2_10shared_ptrIS5_EEEEET0_T_SH_SG_+000081
[ 85] 0x00007fee3ef46aeb /usr/local/MATLAB/R2012b/bin/glnxa64/libmwservices.so+01633003 _ZN4sysq12ppe_for_eachINS_8during_FIN5boost8weak_ptrINS_10ws_ppeHookEEENS2_10shared_ptrIS4_EEEEEET_RKS9_+000251
[ 86] 0x00007fee3ef445a2 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwservices.so+01623458 _ZN4sysq19ppePollingDuringFcnEb+000114
[ 87] 0x00007fee3ef44969 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwservices.so+01624425 _ZN4sysq11ppeMainLoopEiib+000121
[ 88] 0x00007fee3ef44b08 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwservices.so+01624840 _ZN4sysq11ppeLoopIfOKEiib+000152
[ 89] 0x00007fee3ef44c63 /usr/local/MATLAB/R2012b/bin/glnxa64/libmwservices.so+01625187 _ZN4sysq20processPendingEventsEiib+000147
[ 90] 0x00007fee3e896664   /usr/local/MATLAB/R2012b/bin/glnxa64/libmwmcr.so+00312932
[ 91] 0x00007fee3e896b3c   /usr/local/MATLAB/R2012b/bin/glnxa64/libmwmcr.so+00314172
[ 92] 0x00007fee3e890592   /usr/local/MATLAB/R2012b/bin/glnxa64/libmwmcr.so+00288146
[ 93] 0x00007fee3cdc0e9a              /lib/x86_64-linux-gnu/libpthread.so.0+00032410
[ 94] 0x00007fee3caedcbd                    /lib/x86_64-linux-gnu/libc.so.6+00998589 clone+000109

This error was detected while a MEX-file was running. If the MEX-file
is not an official MathWorks function, please examine its source code
for errors. Please consult the External Interfaces Guide for information
on debugging MEX-files.

If this problem is reproducible, please submit a Service Request via:
    http://www.mathworks.com/support/contact_us/

A technical support engineer might contact you with further information.

Thank you for your help.** This crash report has been saved to disk as /home/gwala/matlab_crash_dump.11705-1 **

class_handle: trying to cast 
Destroy object 0x7f0e1e45f090
class_handle: trying to cast 
Deleted myclass with handle: 139698584223104
Error using parallel_function (line 589)
The session that parfor is using has shut down. 
```

可以看出，接口是正确创建的，然后 aFunction 正确返回值 3 为 'out' （这甚至适用于多次调用）。然后 parfor 循环开始，众所周知 matlab 对象已保存（实际上我不清楚为什么它会保存两次，但即使在命令行窗口中，当我保存 myInterface 对象时也会发生这种情况）。最后创建一个新的 myInterface，句柄为 0，句柄恢复为正确的先前值。Altought，对 aFunctions 的调用失败。

我最后报告了 myInterface matlab 类：

```
classdef myInterface < handle
    properties (SetAccess = private, Transient=true)
    objectHandle; % Handle to the underlying C++ class instance
    end

    methods(Static=true)
    function obj = loadobj(this)     
        obj = myInterface();
        obj.objectHandle = this.objectHandle;
        disp(['Load interface with CPP handle: ' num2str(this.objectHandle)]);
    end
    end

    methods

    function obj = saveobj(this)
        obj.objectHandle = this.objectHandle;
        disp(['Save interface with CPP handle: ' num2str(this.objectHandle)]);
    end     

    %% Constructor - Create a new C++ class instance 
    function this = myInterface(varargin)
        if (size(varargin) == 0) % constructor with no arguments. Used in load/save operations
        this.objectHandle = 0;
        else % constructor with normal arguments
        this.objectHandle = myMexInterface('new', varargin{:});
        end
        disp(['Create interface with CPP handle: ' num2str(this.objectHandle)]);
    end

    %% Destructor - Destroy the C++ class instance
    function delete(this)
        myMexInterface('delete', this.objectHandle);
        disp(['Deleted myclass with handle: ' num2str(this.objectHandle)]);
    end

      %% aFunction
    function varargout = aFunction(this, varargin)
        [varargout{1:nargout}] =  myMexInterface('aFunction', this.objectHandle,varargin{:});
    end
    end
end 
```

请注意，正如 [2] 中所建议的，我包含了 loadobj、saveobj 函数，并且该类具有“Transient”属性以实现加载/保存操作。

希望在某人的帮助下，我希望这篇文章可以帮助某人。

问候， 加布里埃尔·瓜兰迪

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-31T07:32:30.813

并行计算工具箱工作者是独立的 MATLAB 进程——它们甚至可能在不同的机器上运行，因此它们具有独立的地址空间。如果我理解正确，您将指向在您的 MATLAB 客户端上有效的对象的指针传递给工作人员，并尝试在那里取消引用该指针。

如果您明确使用共享内存区域在客户端和工作人员之间进行通信，这可能会起作用。例如，请参阅此文件交换贡献： http: [//www.mathworks.co.uk/matlabcentral/fileexchange/28572-sharedmatrix](http://www.mathworks.co.uk/matlabcentral/fileexchange/28572-sharedmatrix)。

正如我在上面提到的一个问题的解决方案中提出的那样，替代方案是支持更充分地保存到磁盘 - 在这种情况下，这可能意味着将内容从 C++ 对象中拉出到 MATLAB 结构中，并支持重新创建来自该 MATLAB 结构的 C++ 对象。

# ruby - 在 ubuntu 中安装 ruby -bundler 和更新标头的困难

> ID：14607115
> 
> 赞同：1
> 
> 时间：2013-01-30T15:06:31.037
> 
> 标签：ruby, shell, ubuntu, installation, terminal

我正在学习 ruby​​ on rails，因此需要为 app 安装一些 gem。我正在尝试安装 ruby​​-bundler 但出现错误。需要一些帮助..我将在终端中粘贴我尝试过的命令。提前致谢。

```
hp@ubuntu:~$ bundle install --without production
The program 'bundle' is currently not installed.  You can install it by typing:
sudo apt-get install ruby-bundler

hp@ubuntu:~$ sudo apt-get install ruby-bundler
[sudo] password for hp: 
Reading package lists... Done
Building dependency tree       
Reading state information... Done
The following extra packages will be installed:
  ruby ruby1.8
Suggested packages:
ri ruby-dev ruby1.8-examples ri1.8
The following NEW packages will be installed:
  ruby ruby-bundler ruby1.8
0 upgraded, 3 newly installed, 0 to remove and 64 not upgraded.
Need to get 143 kB of archives.
After this operation, 1,139 kB of additional disk space will be used.  
Do you want to continue [Y/n]? y
Err http://ubuntuarchive.hnsdc.com/ubuntu/ oneiric/main ruby all 4.8
Unable to connect to ubuntuarchive.hnsdc.com:http:
Err http://ubuntuarchive.hnsdc.com/ubuntu/ oneiric/universe ruby-bundler all 1.0.15-     0ubuntu2
Unable to connect to ubuntuarchive.hnsdc.com:http:
Err http://ubuntuarchive.hnsdc.com/ubuntu/ oneiric-security/main ruby1.8 i386 1.8.7.352- 2ubuntu0.1
Unable to connect to ubuntuarchive.hnsdc.com:http:
Failed to fetch             http://ubuntuarchive.hnsdc.com/ubuntu/pool/main/r/ruby1.8/ruby1.8_1.8.7.352-2ubuntu0.1_i386.deb  Unable to connect to ubuntuarchive.hnsdc.com:http:
Failed to fetch http://ubuntuarchive.hnsdc.com/ubuntu/pool/main/r/ruby-     defaults/ruby_4.8_all.deb  Unable to connect to ubuntuarchive.hnsdc.com:http:
Failed to fetch http://ubuntuarchive.hnsdc.com/ubuntu/pool/universe/r/ruby-bundler/ruby-bundler_1.0.15-0ubuntu2_all.deb  Unable to connect to ubuntuarchive.hnsdc.com:http:
E: Unable to fetch some archives, maybe run apt-get update or try with --fix-missing?
hp@ubuntu:~$ sudo apt-get update
Ign http://archive.canonical.com oneiric InRelease                             
Hit http://archive.canonical.com oneiric Release.gpg                           
Hit http://archive.canonical.com oneiric Release                               
Hit http://archive.canonical.com oneiric/partner i386 Packages                  
Ign http://archive.canonical.com oneiric/partner TranslationIndex              
Err http://ubuntuarchive.hnsdc.com oneiric InRelease                                                           

Err http://ubuntuarchive.hnsdc.com oneiric-updates InRelease                   

Err http://ubuntuarchive.hnsdc.com oneiric-security InRelease

Err http://ubuntuarchive.hnsdc.com oneiric Release.gpg
Unable to connect to ubuntuarchive.hnsdc.com:http:
Err http://ubuntuarchive.hnsdc.com oneiric-updates Release.gpg
Unable to connect to ubuntuarchive.hnsdc.com:http:
Err http://ubuntuarchive.hnsdc.com oneiric-security Release.gpg
Unable to connect to ubuntuarchive.hnsdc.com:http:
Ign http://archive.canonical.com oneiric/partner Translation-en_US
Ign http://archive.canonical.com oneiric/partner Translation-en
Reading package lists... Done
W: Failed to fetch http://ubuntuarchive.hnsdc.com/ubuntu/dists/oneiric/InRelease  

W: Failed to fetch http://ubuntuarchive.hnsdc.com/ubuntu/dists/oneiric-updates/InRelease  

W: Failed to fetch http://ubuntuarchive.hnsdc.com/ubuntu/dists/oneiric-security/InRelease  

W: Failed to fetch http://ubuntuarchive.hnsdc.com/ubuntu/dists/oneiric/Release.gpg      Unable to connect to ubuntuarchive.hnsdc.com:http:

W: Failed to fetch http://ubuntuarchive.hnsdc.com/ubuntu/dists/oneiric-updates/Release.gpg  Unable to connect to ubuntuarchive.hnsdc.com:http:

W: Failed to fetch http://ubuntuarchive.hnsdc.com/ubuntu/dists/oneiric-security/Release.gpg  Unable to connect to ubuntuarchive.hnsdc.com:http:

W: Some index files failed to download. They have been ignored, or old ones used instead. 
```

可能是什么原因？它与ubuntu存档镜像有关吗？由于软件包损坏，我什至无法升级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:51:48.880

您没有包含太多关于正确安装 Ruby 所做的工作，所以我会参考这篇关于[在 Ubuntu 上安装 Ruby 的博客文章](http://ascarter.net/2011/01/02/rails-development-on-ubuntu-10.10.html)

使用 Ubuntu 作为开发平台时需要注意的一点是，安装本博客文章中介绍的一些开发工具和库是明智之举。

2013 年 1 月 31 日 - 如果您有未满足的包依赖项，并且您从 3rd 方源安装并收到包依赖项错误。进入您的软件源并确保未选中 Restricted 和 Universe。

未满足依赖关系的一个可能原因可能是包数据库损坏，和/或某些包没有正确安装。

要尝试解决此问题，请打开终端并运行以下命令

```
xyz@ubuntuhost$ sudo apt-get clean 
```

apt-get clean 清除所有文件/包的本地存储库，只留下锁定文件。

如果不能解决您的问题，请按以下顺序尝试这三个命令。

```
xyz@ubuntuhost$ sudo apt-get -f install

xyz@ubuntuhost$ sudo dpkg --configure -a

xyz@ubuntuhost$ sudo apt-get -f install 
```

发布最后一个命令的输出。如果它找到并修复了某些东西，它将报告类似

```
1 upgraded, 0 newly installed, 0 to remove and 0 not upgraded. 
```

或者

```
0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded 
```

-f 代表“修复损坏”。Apt 将尝试纠正损坏的依赖关系。如果您手动安装了具有未满足依赖项的软件包，apt-get 将尽可能安装这些依赖项，否则它可能会简单地删除您安装的软件包以解决问题。

试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:38:53.387

好像你的网络有问题

# iphone - 不要调用连接：（NSURLConnection *）连接didReceiveData：（NSData *）数据

> ID：14607116
> 
> 赞同：1
> 
> 时间：2013-01-30T15:06:37.977
> 
> 标签：iphone, ios, objective-c, nsurlconnection

我想从某个服务器下载一些文件。下载文件在 Thread 中运行的功能。所以，你可以在这里看到：

```
 NSURL *url = [NSURL URLWithString:fileDataBaseURL];
NSURLRequest *theRequest=[NSURLRequest requestWithURL:url
                                          cachePolicy:NSURLRequestUseProtocolCachePolicy
                                      timeoutInterval:60.0];

NSURLConnection *theConnection = [NSURLConnection connectionWithRequest:theRequest delegate:self];
if (theConnection) {
    [[NSFileManager defaultManager] createFileAtPath:fileDataBaseEnc contents:nil attributes:nil];
    self._handleDataBaseEnc = [NSFileHandle fileHandleForUpdatingAtPath:fileDataBaseEnc];
} else {
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];

} 
```

我也有功能：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [_handleDataBaseEnc seekToEndOfFile];

    NSMutableData *receivedData = [NSMutableData data];
    [receivedData setLength:0];
    [receivedData appendData:data];

    [_handleDataBaseEnc writeData:receivedData];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [_handleDataBaseEnc closeFile];
    [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
}

 - (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
 {
     [_handleDataBaseEnc closeFile];
     [[UIApplication sharedApplication] setNetworkActivityIndicatorVisible:NO];
 } 
```

**问题**

**为什么这三个功能不起作用？它不打电话，从来没有。**

**我该如何解决？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:16:11.647

从这里的**Art**的答案：[NSURLConnection 委托方法不被调用](https://stackoverflow.com/questions/5787170/nsurlconnection-delegate-methods-are-not-called/5787223#5787223)

*尝试在主线程上运行操作：*

```
NSURLConnection * connection = [[NSURLConnection alloc] 
                                initWithRequest:request
                                       delegate:self startImmediately:NO];

[connection scheduleInRunLoop:[NSRunLoop mainRunLoop] 
                      forMode:NSDefaultRunLoopMode];
[connection start]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:31:02.290

发布的代码中没有任何内容可以说明为什么不调用委托方法。我注意到他们的一件事是他们没有做任何特别的事情。如何在一行中运行连接：

```
+ (void)sendAsynchronousRequest:(NSURLRequest *)request queue:(NSOperationQueue *)queue completionHandler:(void (^)(NSURLResponse*, NSData*, NSError*))handler 
```

在实例化连接之后立即调用它。

# orchardcms - Orchard CMS 内容选择器字段放置

> ID：14607118
> 
> 赞同：0
> 
> 时间：2013-01-30T15:06:40.770
> 
> 标签：orchardcms

我想找到 Content Picker Placement.Info 文件，但在果园源中的任何地方都找不到它。果园 1.5

我正在尝试放置类似的东西

```
<place Fields_Content_Picker="Content:5" /> 
```

但是这个dosent工作，任何人都知道如何引用内容选择器字段，或编辑来自placement.info的字段？

# assembly - 不编译汇编指令

> ID：14607120
> 
> 赞同：-1
> 
> 时间：2013-01-30T15:06:47.600
> 
> 标签：assembly, x86, fasm

我正在使用平面汇编程序，当我想运行某些东西时，它会在汇编程序指令的每一行中写入：“非法指令”。例如在下面的代码中，它会写出`.MODEL SMALL`不合法的内容，如果 id 删除这一行，它会写出`.STACK 200H`不合法的内容，依此类推。

```
.MODEL SMALL
.STACK 200H
.DATA

.CODE
start:
    mov ax, @DATA
    mov ds, ax

    mov ax, 4c00h
    int 21h

END start 
```

对于此代码，它可以工作：

```
start:
    mov ds, ax

    mov ax, 4c00h
    int 21h 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T23:12:01.667

关于不同汇编器的指令没有一个单一的标准。其中有很多。

FlatAssembler (FASM) 的指令在[FASM 程序员手册](http://flatassembler.net/docs.php?article=manual)中有详细描述，该手册位于公共和可访问的网页上。

此外，本手册应以 PDF 或 TXT 文件格式在下载的包中提供给您，具体取决于包的目标操作系统。

它涵盖了所有汇编器指令和支持的指令。还有很多例子，如果还有不清楚的地方，你可以在[FlatAssembler 留言板上](http://board.flatassembler.net)提问。

对于有问题的代码，FASM 代码将如下所示：

```
format MZ
entry _CODE:start
stack 200H

segment _DATA

segment _CODE

start:
    mov ax, _DATA
    mov ds, ax

    mov ax, 4c00h
    int 21h 
```

但是，考虑到这个程序太简单，无法编译成 MZ 可执行文件（适用于代码+数据大于 64Kbyte 的应用程序），我建议使用更简单的 COM 文件格式：

```
 org 100h

    mov ax, 4c00h
    int 21h 
```

# ruby-on-rails - 将 text_field 存储为日期时间？？（日期选择器）

> ID：14607125
> 
> 赞同：0
> 
> 时间：2013-01-30T15:06:53.417
> 
> 标签：ruby-on-rails, ruby-on-rails-3, datetime, ruby-on-rails-3.2, datetimepicker

我的“事件”表有 2 个日期时间值来存储开始和结束日期。

他们曾经是这样的

```
.field
    = f.label t :event_start_date
    %br
    = f.datetime_select :start_date
  .field
    = f.label t :event_finish_date
    %br
    = f.datetime_select :finish_date 
```

我使用了日期时间选择器插件，它在视觉上工作得很好。但是，由于字段从 datetime_select 更改为 text_field，因此在创建新事件时不会存储这些值。

这是它现在的样子：

```
.field
    = f.label t :event_start_date
    %br
    = f.text_field :start_date, :class=>"datetime_box", :size=>"17"
  .field
    = f.label t :event_finish_date
    %br
    = f.text_field :finish_date, :class=>"datetime_box", :size=>"17" 
```

这是 js 以防万一有人需要它：

```
$(function() {
    $('.datetime_box').datetimepicker({
            minDate: new Date(),
            showOn: "button",
            buttonImage: "../images/pais_vasco_conciertos_teatro_musica_grupos.png",
            buttonImageOnly: true
    });
}); 
```

知道如何克服这个问题并存储这些值吗？

事件控制器

```
def create

    categories = params[:category_ids] or []
    @event = Event.new(params[:event].merge(:user_id => current_user.id, :category_ids => categories))

    respond_to do |format|
      if @event.save

        #Mailer to seek appoval
        format.html { redirect_to @event, notice: 'Event was successfully created.' }
        format.json { render json: @event, status: :created, location: @event }
      else
        format.html { render action: "new" }
        format.json { render json: @event.errors, status: :unprocessable_entity }
      end
    end
  end 
```

该网站支持 4 种语言。此错误仅显示在英语下。所以，我想这与格式有关..

格式示例：西班牙语和法语（作品）

```
"start_date"=>"30/01/2013 16:39",
 "finish_date"=>"31/01/2013 16:39", 
```

巴斯克语（作品）

```
"start_date"=>"2013/01/30 16:38",
 "finish_date"=>"2013/01/31 16:38", 
```

英语（不工作）

我怎样才能使 MM/DD/YY 工作？再次感谢

```
"start_date"=>"01/30/2013 16:40",
 "finish_date"=>"01/31/2013 16:40", 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:35:04.127

您需要确保作为字符串传递给控制器​​的日期可以由 ruby​​ 解析。一种方法是将日期和时间格式传递给 datetimepicker。试验什么格式适合你的需要，什么可以被 ruby​​ 解析。

尝试添加这些选项，看看是否能解决您的问题

```
$(elem).datetimepicker({
  dateFormat: 'M d, yy',
  timeFormat: 'hh:mm tt'
}); 
```

# iphone - 无法从 json url+iphone sdk 获得响应

> ID：14607126
> 
> 赞同：0
> 
> 时间：2013-01-30T15:06:54.473
> 
> 标签：iphone, ios

我正在请求其中包含大量数据的响应。但一次又一次我的连接丢失。我的互联网工作正常。但连接仍然丢失错误：-Error Domain = NSURLErrorDomain Code = -1001“请求超时。”

```
 NSURLRequest *request = [NSURLRequest requestWithURL:url];
   NSURLConnection *theConnection=[[NSURLConnection alloc] initWithRequest:request delegate:self];    
        if (theConnection) {
        receivedData = [[NSMutableData data] retain];
        } else {
        NSLog(@"Connection Failed!");
        appDel.Internet_connected=FALSE;
        [MainHandler performSelector:self.targetSelector_loseconenction];
        } 

(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    [receivedData setLength:0];
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [receivedData appendData:data];
}

-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    //[connection release];
    NSLog(@"Connection Failed!");
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection {
    appDel.Internet_connected=TRUE;
    NSString *responseString = [[NSString alloc] initWithData:receivedData encoding:NSUTF8StringEncoding];
    NSString *valueToSave = responseString; 
    [[NSUserDefaults standardUserDefaults]
     setObject:valueToSave forKey:@"responce"];
     NSString *savedValue = [[NSUserDefaults standardUserDefaults]
                            stringForKey:@"responce"]; 
     NSDictionary *result = [savedValue JSONValue];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:51:03.880

对于具有网络功能的更好的控制器，请使用此类：

[https://github.com/AFNetworking/AFNetworking](https://github.com/AFNetworking/AFNetworking)。

如果您的连接不好，您将需要使用 @try @catch @finally 处理此连接失败

# java - 如果在 Java 中短时间内创建多个对象怎么办？

> ID：14607127
> 
> 赞同：0
> 
> 时间：2013-01-30T15:06:57.987
> 
> 标签：java

我知道最好的做法是避免创建对象。不过还得过一段时间。

这些新实例只是充当临时对象。创建后不会引用它们。java GC 对此有何反应。

会导致OOM吗？如果我可以立即收集它们。如何从内存中删除它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:10:48.500

在现代 JVM 中，您会发现创建大量非常短暂的对象是很便宜的。“短命”是这里的关键，因为对于能够在[伊甸园空间](https://stackoverflow.com/questions/1262328/how-is-the-java-memory-pool-divided)中升职的对象来说，事情确实变得更加昂贵。

实际上，我建议使用一个好的分析器来检查应用程序的实际性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:15:43.047

如果您非常担心内存管理，您也可以考虑使用 C++，以便完全控制您的操作。关于[垃圾收集器的行为](http://www.ibm.com/developerworks/java/library/j-jtp01274/index.html)。

# python - 如何正确地将一个元素的列表转换为一个元素的元组

> ID：14607128
> 
> 赞同：4
> 
> 时间：2013-01-30T15:07:00.893
> 
> 标签：python, python-2.6

```
>>> list=['Hello']
>>> tuple(list)
('Hello',) 
```

为什么是上述语句的结果`('Hello',)`而不是`('Hello')`？。我原以为会是后者。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-30T15:08:18.190

你做对了。如果你这样做，在 python 中：

```
a = ("hello") 
```

`a`将是一个字符串，因为此上下文中的括号用于将事物组合在一起。实际上是逗号构成了一个元组，而不是括号（括号只是为了避免在某些情况下（如函数调用）产生歧义）......

```
a = "Hello","goodbye"  #Look Ma!  No Parenthesis!
print (type(a)) #<type 'tuple'>
a = ("Hello")
print (type(a)) #<type 'str'>
a = ("Hello",)
print (type(a)) #<type 'tuple'>
a = "Hello",
print (type(a)) #<type 'tuple'> 
```

最后（也是最直接的问题）：

```
>>> a = ['Hello']
>>> b = tuple(a)
>>> print (type(b))  #<type 'tuple'> -- It thinks it is a tuple
>>> print (b[0])  #'Hello' -- It acts like a tuple too -- Must be :) 
```

# java - 尝试每 x 次执行一次 TimerTask

> ID：14607133
> 
> 赞同：0
> 
> 时间：2013-01-30T15:07:18.503
> 
> 标签：java, android

我正在尝试每隔 x 次执行一个 TimerTask ，并且与任务时间执行无关。我尝试了很多东西，我停在这里：

```
new Timer().schedule(new Send(),new Date();
...
Class Send extends TimerTask
{
    boolean shouldRun = true;
    public void run()
    {
            long start = System.currentTimeMillis();
            while(shouldRun)
            {
                    if(condition)
                            //send to db
                    long next = start + 300000;
                    try{
                        Thread.sleep(next - System.currentTimeMillis());
                        start = next;
                        }catch(InterruptedException e){
                            System.out.println(e);
                        }
            }
    }
} 
```

正如你所看到的，在我发送到 db 之前我有一个条件，所以有时我不会做任何事情，所以我的记录时间应该是 5 分钟的跳跃。

这是输出： 15:08 15:22 15:40 前2次是假的，为什么？

我标记android的原因是因为我是在android系统上做的，也许它有一些效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:13:20.460

您应该使用 scheduleAtFixedRate，而不是像这样在 run 方法中睡觉。这将确保您的任务以固定的时间间隔（大约每 30 秒）运行，而不管任务执行需要多长时间。

```
new Timer().scheduleAtFixedRate(new Send(),new Date(),30000);
...
Class Send extends TimerTask
{
    boolean shouldRun = true;
    public void run()
    {
            long start = System.currentTimeMillis();
            while(shouldRun)
            {
                    if(condition)
                            //send to db                        
            }
    }
} 
```

# android - Android RotateAnimation 指南针旋转

> ID：14607135
> 
> 赞同：1
> 
> 时间：2013-01-30T15:07:24.483
> 
> 标签：android

我有一个定制的指南针，用作我编写的导航应用程序的一部分。我还编写了一种算法，可以平滑罗盘（一种低通滤波器）。一切都很好，指南针很流畅。我将当前度数和先前度数参数传递给 RotateAnimation。问题是，当您使用指南针快速旋转时，在某个点之后，当前度数和先前度数之间的差距太大，以至于旋转将方向切换到距离最短的路径。它与低通滤波器发生的那种滞后有关——它必须赶上实时方向。我想知道是否有人处理过这个问题（我在商店里看到了一些处理这个问题的指南针应用程序）或者有某种算法/解决方案来保持旋转的方向。

```
RotateAnimation rotate = new RotateAnimation(startingPointer, pointerDeg, Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
    rotate.setInterpolator(new LinearInterpolator());
    rotate.setDuration(ROTATION_INTERVAL);
    rotate.setFillAfter(true);
    pointer.setAnimation(rotate);
    startingPointer = pointerDeg; 
```

# java - 休眠 - 枚举与整数

> ID：14607138
> 
> 赞同：0
> 
> 时间：2013-01-30T15:07:28.447
> 
> 标签：java, oracle, hibernate

关于性能的问题最终将导致我如何设置我的表结构。

我有表 A、B、C 和 D。

表 B、C 和 D 映射到枚举，我所做的只是将序数值映射到枚举值。

```
Table B:
ID: 1  String: ENUM_STR_VALUE
ID: 2  String: ENUM_STR_VALUE 
```

表 A 具有以下架构

```
Name           Null       Type
------------------------------
ID         Not Null   Number(32)
Timestamp  Not Null   Date
Item_Type  Not Null   Number (32)
Item2_Type Not Null   Number (32)
Item3_Type Not Null   Number (32) 
```

在表 A...Item_Type 中，Item2_Type 和 Item3_Type 分别是表 B、C 和 D 的序数值。

我的问题归结为如何向用户显示内容。

在我的 A.java 中，我有以下代码：

```
@Entity
@Table(name = "a")
public classs A{
  private int item_type;
  private int item2_type;
  private int item3_type;

  @Column(name="Item_type")
  public nit getItem_type(){
      return item_type; 
  } 
```

我是否应该放弃这种规范化并制作 item_types varchars 并利用 Hibernate 的 @Enumerated 属性？或者有没有一种方法可以映射回并向用户显示值。原因是我想最终查询这些项目类型，并且通过 int 搜索应该比 varchar 更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:12:03.133

使用`@Enumerated(EnumType.ORDINAL)`，您将在实体中拥有枚举，映射为数据库表中的序数 int 值。这是枚举的默认映射，如果我没记错的话，你甚至可以删除`@Enumerated`注释，Hibernate 会自动将枚举作为 int 持久化。

PS：您还应该尊重 Java 命名约定：`item_type`应该是`itemType`，`getItem_type()`应该是`getItemType()`。

# c# - 如何仅使用修改的属性值转换对象，其余值应为空？

> ID：14607139
> 
> 赞同：0
> 
> 时间：2013-01-30T15:07:29.740
> 
> 标签：c#, entity-framework-5, azure-worker-roles

使用反射我得到了对象的修改列的集合。

```
IEnumerable<string> modified = GetModifiedColumns(); 
```

我想像下面这样修改对象

```
 EmployeeModel model = new EmployeeModel
        {
            Id = 1000, //This one must 
            FirstName = modfiedValue,
            Email = null, 
            LastName = null,
            Phone = null
        }; 
```

我将把这个模型发送给工作角色，并只用修改后的值更新实体。这样我想减少电线上的流量。

我可以像下面这样使用，它的工作原理。但这不是一种有效的方法

```
var empModel = GetOnlyUpdatedColumns(modified , model);     

private EmployeeModel GetOnlyUpdatedColumns(IEnumerable<string> modified , EmployeeModel emp)
    {
EmployeeModel model = new EmployeeModel
        {
            Id = emp.Id, //This one must 
            FirstName =  (modified.Contains("FirstName"))? emp.FirstName:null,
            Email = (modified.Contains("FirstName"))? emp.FirstName:null,
            LastName = (modified.Contains("LastName"))? emp.LastName:null,
            Phone = (modified.Contains("Phone"))? emp.Phone:null,
        };
} 
```

提前致谢。

# spring - Spring IDREF 使用

> ID：14607142
> 
> 赞同：15
> 
> 时间：2013-01-30T15:07:34.530
> 
> 标签：spring

我有一个 spring.xml 定义如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN" "http://www.springframework.org/dtd/spring-beans-2.0.dtd">
<beans>
<bean id="triangle" class="org.tutorial.spring.Triangle">
    <property name="pointA">
        <idref bean="pointA"/>
    </property>
    <property name="pointB" ref="pointB"/>
    <property name="pointC" ref="pointC"/>
</bean>
<bean id="pointA" class="org.tutorial.spring.Point">
    <property name="x" value="0"/>
    <property name="y" value="0"/>
</bean>
<bean id="pointB" class="org.tutorial.spring.Point">
    <property name="x" value="100"/>
    <property name="y" value="200"/>
</bean>
<bean id="pointC" class="org.tutorial.spring.Point">
    <property name="x" value="-100"/>
    <property name="y" value="-200"/>
</bean>
</beans> 
```

该类`Point`基本上是一个具有 2 个私有 int 成员的类。我的问题是我在 IDREF 上收到错误，如下所示：

```
Caused by: org.springframework.beans.ConversionNotSupportedException: Failed to convert property value of type 'java.lang.String' to required type 'org.tutorial.spring.Point' for property 'pointA'; 
nested exception is java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [org.tutorial.spring.Point] for property 'pointA': no matching editors or conversion strategy found 
```

据我了解，`PointA`bean 三角形存在的IDREF（在上述情况下）的目的（错误检查）。所以我确实`PointA`在 IDREF 元素中提供了 bean 的名称（字符串）。为什么我会收到上述错误？当我认为它只是通过提供其名称来

检查 bean ( ) 的存在时，为什么它试图将字符串转换为 Point ？`PointA`

我真的很困惑。请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T16:18:25.280

`idref`用于传递一个bean（即一个String）的*名称（标识符）。*

`<idref bean="pointA">`与字符串 value 完全相同，只是`pointA`如果没有定义这样的 bean，Spring 会报错。

有关详细信息，请参阅[Spring 文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-idref-element)。

要传递实际的 bean，只需使用`ref`，就像您为`pointB`and所做的那样`pointC`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-08-30T18:17:28.710

idref 元素只是将容器中另一个 bean 的 id（字符串值 - 不是引用）传递给 or 元素的一种防错方法。

简单来说，idref 元素用于传递字符串值，并且使用 idref 标记允许容器在部署时验证所引用的命名 bean 是否实际存在。

考虑下面的例子

![类 FirstBean](../Images/37bbdb671366554c6b21851fe932aaa1.png)

![类 SecondBean](../Images/b968248db4f743c3bf73ea7d06282357.png)

![应用程序上下文中的 Bean 定义](../Images/bc9945ac1cf4d387592e54b5834f7f4c.png)

![实例化 bean 的调用代码](../Images/e54fff7f7c00077482473f362ab2650f.png)

![在控制台输出](../Images/90f2f988e8a1d133c1d86bc0ef479665.png)

请注意当我们调用 secondBean.getSecondMessage() 时控制台中的输出，该值是使用 idref 属性设置的 firstBean。

注意：元素带来价值的常见地方是在 ProxyFactoryBean bean 定义中的 AOP 拦截器配置中。在指定拦截器名称时使用元素可防止您拼错拦截器 ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-21T11:42:10.903

通过使用 'idref' 标记，您可以在部署时验证所引用的命名 bean 是否实际存在。

例如，

```
<bean id="paulo" class="com.sample.pojo.Author">
    <property name="firstName" value="Paulo" />
    <property name="lastName" value="Coelho" />
    <property name="dateOfBirth" value="24 August 1947" />
    <property name="country" value="India" />
</bean> 
```

如果您像下面这样定义验证器 bean，Spring 会在部署时验证 id 为 osho 和 Paulo 的 bean。如果在配置文件中没有找到任何 bean，那么 spring 会抛出 BeanDefinitionStoreException。

```
<bean id="validatorBean" class="com.sample.test.BeansValidator">
    <property name="author1">
        <idref bean="osho" />
    </property>

    <property name="author2">
        <idref bean="paulo" />
    </property>
</bean> 
```

以下是完整的工作应用程序。

```
package com.sample.pojo;

public class Author {
    private String firstName;
    private String lastName;
    private String dateOfBirth;
    private String country;

    public String getFirstName() {
        return firstName;
    }

    public void setFirstName(String firstName) {
        this.firstName = firstName;
    }

    public String getLastName() {
        return lastName;
    }

    public void setLastName(String lastName) {
        this.lastName = lastName;
    }

    public String getDateOfBirth() {
        return dateOfBirth;
    }

    public void setDateOfBirth(String dateOfBirth) {
        this.dateOfBirth = dateOfBirth;
    }

    public String getCountry() {
        return country;
    }

    public void setCountry(String country) {
        this.country = country;
    }

    @Override
    public String toString() {
        StringBuilder builder = new StringBuilder();
        builder.append("Author [firstName=").append(firstName).append(", lastName=").append(lastName)
                .append(", dateOfBirth=").append(dateOfBirth).append(", country=").append(country).append("]");
        return builder.toString();
    }

} 
```

BeansValidator.java

```
package com.sample.test;

    public class BeansValidator {
        private String author1;
        private String author2;

        public String getAuthor1() {
            return author1;
        }

        public void setAuthor1(String author1) {
            this.author1 = author1;
        }

        public String getAuthor2() {
            return author2;
        }

        public void setAuthor2(String author2) {
            this.author2 = author2;
        }

    } 
```

**我的配置.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="osho" class="com.sample.pojo.Author">
        <property name="firstName" value="Osho" />
        <property name="lastName" value="Jain" />
        <property name="dateOfBirth" value="11 December 1931" />
        <property name="country" value="India" />
    </bean>

    <bean id="paulo" class="com.sample.pojo.Author">
        <property name="firstName" value="Paulo" />
        <property name="lastName" value="Coelho" />
        <property name="dateOfBirth" value="24 August 1947" />
        <property name="country" value="India" />
    </bean>

    <bean id="validatorBean" class="com.sample.test.BeansValidator">
        <property name="author1">
            <idref bean="osho" />
        </property>

        <property name="author2">
            <idref bean="paulo" />
        </property>
    </bean>

</beans> 
```

运行 HelloWorld.java，你不会得到任何异常。

```
package com.sample.test;

    import org.springframework.context.ApplicationContext;
    import org.springframework.context.support.ClassPathXmlApplicationContext;

    public class HelloWorld {
        public static void main(String args[]) {
            ApplicationContext context = new ClassPathXmlApplicationContext(new String[] { "myConfiguration.xml" });

            ((ClassPathXmlApplicationContext) context).close();
        }
    } 
```

现在更新 myConfiguration.xml，如下所示。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="osho" class="com.sample.pojo.Author">
        <property name="firstName" value="Osho" />
        <property name="lastName" value="Jain" />
        <property name="dateOfBirth" value="11 December 1931" />
        <property name="country" value="India" />
    </bean>

    <bean id="paulo" class="com.sample.pojo.Author">
        <property name="firstName" value="Paulo" />
        <property name="lastName" value="Coelho" />
        <property name="dateOfBirth" value="24 August 1947" />
        <property name="country" value="India" />
    </bean>

    <bean id="validatorBean" class="com.sample.test.BeansValidator">
        <property name="author1">
            <idref bean="Krishna" />
        </property>

        <property name="author2">
            <idref bean="paulo" />
        </property>
    </bean>

</beans> 
```

当您看到配置文件时，validatorBean 检查 id 为“Krishna”的 bean。

```
<bean id="validatorBean" class="com.sample.test.BeansValidator">
        <property name="author1">
            <idref bean="Krishna" />
        </property>

        <property name="author2">
            <idref bean="paulo" />
        </property>
    </bean> 
```

由于 id 为“Krishna”的 bean 不存在，您最终会出现以下错误。

```
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'validatorBean' defined in class path resource [myConfiguration.xml]: Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Invalid bean name 'Krishna' in bean reference for bean property 'author1'
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:553)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:482)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:306)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:230)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:302)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:751)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:861)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:541)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:93)
    at com.sample.test.HelloWorld.main(HelloWorld.java:8) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-02T13:43:48.837

我必须说我有点困惑。在您提供 praveen 的示例中，它将起作用，因为您的类中的属性是 String 类型，但在 yapkm01 的示例中，属性是 Point 类型，您将得到提到的异常。为了能够使用 idref，他似乎必须引入另一个 String 类型的属性，这里是“message”，然后代码看起来像这样：

```
<property name="message">
    <idref bean="zeroPoint" />
</property>

<property name="pointA" ref="zeroPoint"/> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-05-04T08:45:24.857

你没有做错任何事。您应该`<ref>`在代码中使用而不是`<idref>`. 该`<idref>`标记用于创建一个字符串类型的值，该值等于所引用 bean 的 ID，并且用于验证目的。

# vaadin - vaadin 错误指示器和消息

> ID：14607143
> 
> 赞同：1
> 
> 时间：2013-01-30T15:07:36.823
> 
> 标签：vaadin

我想使用 Vaadin 在错误指示器中制作自定义消息，如下所示：http: [//vaadin.com/download/book-of-vaadin/vaadin-7/html/img/application/errorindicator-example2.png](http://vaadin.com/download/book-of-vaadin/vaadin-7/html/img/application/errorindicator-example2.png)

我的应用程序是多语言的，我希望根据选择的语言为相同的错误提供不同的消息。一个错误指示器是否可以有不同的错误消息？如果有可能怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:49:17.573

使用`java.util.ResourceBundle`将帮助您解决 i18n 问题。每次`Locale`更改时，您也需要更新您的捆绑包。例如;

```
bundle = ResourceBundle.getBundle("messages", locale); 
```

为了从包中检索错误表示，您可以使用`bundle.getString("error.message")`

通过这样做，您无需在每次更改语言环境时都更新代码。仅切换表示字符串的资源位置。如需更多信息，请[访问 http://docs.oracle.com/javase/tutorial/i18n/resbundle/prepare.html](http://docs.oracle.com/javase/tutorial/i18n/resbundle/prepare.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-18T16:15:46.237

请记住将此代码添加到您的组件中：

```
myComponent.setConversionError("{1}"); 
```

这行代码将您的自定义消息设置为错误指示器。否则，您将收到此消息：

> 无法转换为 {0}

其中 {0} 是转换器的 PRESENTATION 类的名称。

事实上，这是`AbstractField.setConversionError(java.lang.String valueConversionError)`API 方法的 javadoc：

> 设置字段值无法转换为数据源类型时显示的错误。如果消息中存在 {0}，它将被数据源类型的简单名称替换。如果消息中存在 {1}，它将被 ConversionException 消息替换。

# jenkins-plugins - 詹金斯图表显示历史工作运行

> ID：14607148
> 
> 赞同：3
> 
> 时间：2013-01-30T15:07:48.410
> 
> 标签：jenkins-plugins

是否有 Jenkins 时间表/插件显示所有 Jenkins 作业何时开始和结束以进行历史作业运行

它会显示 Jenkins 作业何时并行运行

即类似于甘特图但用于历史工作运行的东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:23:06.870

在 jenkins 起始页（例如`http://<jenkins-host>/view/All/builds`）的侧栏中有构建历史记录，它显示构建、运行时间、构建完成的状态以及到控制台的链接。它还带有一个允许浏览时间的图表。

# java - 索尔。如何连接两个单独的查询

> ID：14607151
> 
> 赞同：1
> 
> 时间：2013-01-30T15:08:05.803
> 
> 标签：java, solr

我想加入两个单独的查询。并显示来自他们的信息。第一个查询是来自*Canada*的公司，第二个查询是名称为*Incremento*的公司。所以我需要运行单独的查询并加入结果信息。

我的架构是：

```
<entity name="firm" dataSource="jdbc" pk="id"
  query="select * from firm"
  deltaImportQuery="select * from firm where id='${dih.delta.id}'"
      deltaQuery="select id from firm where upd_date &gt; '${dih.last_index_time}'">
    <field column="id" name="id"/>
    <field column="ADDRESS" name="address"/>
    <field column="EMPLOYEE" name="employee"/>
    <field column="NAME" name="name"/>
    <field column="VILLAGE" name="village"/>
    <field column="ZIPCODE" name="zipcode"/>
    <field column="PLACE" name="place"/>
    <entity name="country" pk="id"
    query="select country from country where id='${firm.country}'"
    deltaQuery="select id from country where upd_date > '${dih.last_index_time}'"
    parentDeltaQuery="select id from firm where country=${country.id}">
      <field column="country" name="countryName"/>
    </entity>
  </entity> 
```

怎么做 ？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:50:04.103

**搜索**：-

你可以使用例如

`q=name:incremento&fq=location:Canada`- 仅在位于加拿大的公司中搜索名称为 Incremento 的公司

`fq=location:Canada&fq=name:Incremento`- 过滤具有位置 CANADA 和名称 Incremento 的公司

**索引**：-
您可以在 SQL 查询中使用 OR 来处理来自加拿大的公司和名称为 Incremento 的公司。
例如`SELECT * FROM FIRMS WHERE COUNTRY='CANADA' OR NAME='INCREMENTO'`

OR DIH 只允许标签。您可能有多个根标签。例如

```
<dataSource driver="..." url="..." user=".." />
    <document name="companies">
        <entity name="firm_canada" dataSource="jdbc" pk="id"
          query="select * from firm"
          deltaImportQuery="select * from firm where id='${dih.delta.id}'"
              deltaQuery="select id from firm where upd_date &gt; '${dih.last_index_time}'">
            <field column="id" name="id"/>
            ....
        </entity>
        <entity name="firm_incremento" dataSource="jdbc" pk="id"
          query="select * from firm where ..."
          deltaImportQuery="select * from firm where id='${dih.delta.id}'"
              deltaQuery="select id from firm where upd_date &gt; '${dih.last_index_time}'">
            <field column="id" name="id"/>
            ....
        </entity>       
    </document>
</dataSource> 
```

# cakephp - 如何正确退出自定义黑洞处理程序？

> ID：14607154
> 
> 赞同：0
> 
> 时间：2013-01-30T15:08:13.133
> 
> 标签：cakephp, cakephp-2.0

我的问题是相当基本的：每当 CakePHP 中的某个操作被黑洞时，我想显示一个自定义错误页面；Cake 显示“找不到文件”消息的默认行为使用户（更不用说开发人员）感到困惑。所以我想出了这个，通过搜索文档和 StackOverflow：

```
class TestsController extends AppController
{
  public $components = array ('Security');

  public function beforeFilter ()
  {
    parent::beforeFilter ();
    $this->Security->blackHoleCallback = 'blackhole';
    $this->Security->csrfExpires = '+5 seconds'; // for testing
  }

  public function index ()
  {

  }

  public function doit ()
  {
    $this->log ('Performing request; entry = ' . $this->data['foo'], 'tests');
    $this->set ('foo', $this->data['foo']);
  }

  public function blackhole ($type)
  {
    $this->log ('Request has been blackholed: ' . $type, 'tests');
    $this->render ('/Errors/blackhole');
    $this->response->send ();
    exit ();
  }
} 
```

在 index.ctp 中有一个带有单个文本框的简单表单，用于提交`doit`（为简洁起见不包括在内）。这可行，**但**我有一个主要问题：`exit()`在 blackhole() 函数中。问题是，如果我不退出这里`doit()`仍然会被调用，即使请求被黑洞，如日志所示：

```
2013-01-30 15:37:21 Tests: Request has been blackholed: csrf
2013-01-30 15:37:21 Tests: Performing request; entry = kfkfkfkf 
```

这显然不是你所期望的。Cake 文档提示使用（自定义）异常来停止 blackhole() 中的处理，但是：

*   完全超越了使用自定义处理程序的目的；
*   *给本来应该*很简单的事情又增加了一层复杂性。

我的问题是：是否有适当的方法从 blackhole() 中“退出”，以便 Cake 完成所有渲染/清理/等。它通常会这样做；我已经不得不添加`$this->response->send()`强制输出到浏览器。或者，另一种方法是告诉 Cake 在 blackhole() 之后跳过调用 doit()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:25:09.957

我的建议是在你的黑洞中重定向。这是在食谱[http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html#usage中完成的](http://book.cakephp.org/2.0/en/core-libraries/components/security-component.html#usage)

```
$this->redirect(array('controller' => 'test', 'action' => 'index')); 
```

重定向将发出退出（[http://book.cakephp.org/2.0/en/controllers.html#flow-control](http://book.cakephp.org/2.0/en/controllers.html#flow-control)）。如果需要，您还可以在重定向之前向用户发送一些好消息：

```
$this->Session->setFlash('What are you doing!?'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:09:27.387

在你的黑洞回调中，你可以只抛出一个带有所需消息的异常。这将呈现正确的错误页面并被记录（假设您已打开 core.php 中的错误记录）。

# wpf - WPF 将 SelectedItem 从 ContextMenu 绑定到 Button.Content

> ID：14607157
> 
> 赞同：1
> 
> 时间：2013-01-30T15:08:20.343
> 
> 标签：wpf, xaml, button, binding, contextmenu

我在 XAML 中的按钮上有一个 ContextMenu。ContextMenu 项由 ItemsSource 属性加载。现在我想用 ContextMenu 的 SelectedItem.Text 设置按钮的文本。有什么解决方案可以做到这一点吗？

这是我的 XAML 代码片段：

```
<Button Grid.Column="4" Grid.Row="1" Width="100" Height="24" BorderThickness="0" Command="{Binding SwitchFieldClickCommand}" Content="{}">
        <Button.ContextMenu>
            <ContextMenu Name="CM_SwitchField">
                <ItemsControl ItemsSource="{Binding Benutzer.SwitchFieldList}" />                
            </ContextMenu>
        </Button.ContextMenu>
</Button> 
```

# iphone - 检查位置警报是否已关闭

> ID：14607160
> 
> 赞同：0
> 
> 时间：2013-01-30T15:08:23.883
> 
> 标签：iphone, ios

如何检查用户是否已响应位置警报

“App 想使用您当前的位置”或“App 想向您发送推送通知”</p>

我不在乎用户选择哪个选项我只需要知道警报是否被解除，，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:31:26.007

当用户关闭此警报时，您不会直接收到消息，但您可以实现 CLLocationDelegate 的`- (void)locationManager:(CLLocationManager *)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status`方法。在此和检查 CLLocationManager 的静态`authorizationStatus`属性之间，您通常可以确定用户是否在您的应用中允许定位服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:56:15.333

苹果禁止它，所以你不能这样做！

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-30T15:13:37.887

编辑：啊哈我现在注意到你错误地用`uialertview`.

对于位置警报，您可以执行以下操作：

```
- (void)locationManager:(CLLocationManager *)manager
   didFailWithError:(NSError *)error {

    if (error.code ==  kCLErrorDenied) {
        NSLog(@"Location manager denied access - kCLErrorDenied");

        UIAlertView *alert = 
              [[UIAlertView alloc] initWithTitle:@"Location issue" 
                                         message:@"Your location cannot be determined." 
                                        delegate:self 
                               cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
    } 
} 
```

对于推送通知，您可以执行以下操作（尽管用户可能已响应或未响应）：

```
UIRemoteNotificationType status = [[UIApplication sharedApplication] enabledRemoteNotificationTypes];
if (status == UIRemoteNotificationTypeNone) {

     NSLog(@"User is not subscribed to receive push notifications");
} 
```

# android - 为什么某些 Android API 没有显示在 AVD Manager 目标选项卡中？

> ID：14607164
> 
> 赞同：3
> 
> 时间：2013-01-30T15:08:36.910
> 
> 标签：android, eclipse, sdk, adt, avd

由于安全原因，我必须在没有互联网连接的环境中工作。我已经下载了最新的 API，并按照以下答案中的步骤，将它们放在我的

```
..\adt-bundle-windows-x86\adt-bundle-windows-x86\sdk\platforms 
```

[在没有 Internet 连接的情况下更新 Android SDK 管理器，但提前下载另一个 SDK](https://stackoverflow.com/a/9147942/867591)

尽管如此，我可以在 SDK 管理器中看到已安装的 API，当我转到 AVD 管理器时，它们不会出现在目标中。

只显示了 Android 4.2 API（预装了 ADT/Eclipse 包（Android 开发者工具）。但我注意到的一件事是，在 SDK 管理器中，它有两个文件（SDK 平台和 ARM EABI v7a 系统映像），而其他人只有 SDK 平台文件。

请指教。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T15:32:36.380

下载 API 后是否重新启动了 Eclipse？:)

# c# - 如何以编程方式更改 C# 中的高级 excel 选项

> ID：14607165
> 
> 赞同：-2
> 
> 时间：2013-01-30T15:08:38.097
> 
> 标签：c#, excel-2007

我想使用 C# for Excel 2007 (12) 以编程方式更改“忽略使用 DDE 的其他应用程序”有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:15:40.940

我从来没有做过，但这篇文章似乎很有希望：

[http://blogs.vmware.com/thinapp/2008/10/excel-dde-worka.html](http://blogs.vmware.com/thinapp/2008/10/excel-dde-worka.html)

我基本上是通过注册表搜索更改设置。您可以通过 C# 执行注册表编辑，这样也许可以做到。

我承认我不是 100% 这是你正在寻找的，但它似乎是相同的设置。

站点被删除后的更新，来自 WayBACK 机器的内容发布在下面：

> 对于那些需要解决有关 Excel 的 DDE 文件类型问题的人，请下载下面的 .reg 文件并按照这些说明进行操作。请记住，如果您希望在第一次启动时运行它，您可以随时将其编写到您的 .exe 中。请务必使用 ExecuteExternalProcess 函数将其应用于您的本地系统。

> 像往常一样使用 ThinReg 注册文件类型（或 MSI 安装程序） 下载链接的 ExcelDDEOpen.reg 文件，使用记事本打开 .reg 文件 将路径更改为“Microsoft Office Excel 2007.exe”，记住使用“\”而不是“ " 分隔目录 保存 ExcelDDEOpen.reg 通过双击修改后的 ExcelDDEOpen.reg 文件将条目添加到注册表 ExcelDDEOpen.reg 文件的附加代码设置为使用每个用户的注册表条目。如果您想要每台机器的注册表项，请将所有出现的 HKEY_CURRENT_USER 更改为 HKEY_LOCAL_MACHINE

> 请创建一个名为 ExcelDDEOpen.reg 的文件并将此信息粘贴到其中。

> ———复制如下———-

```
Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\SOFTWARE\Classes\xls.ThinReg\shell\Open]

@="&Open"

[HKEY_CURRENT_USER\SOFTWARE\Classes\xls.ThinReg\shell\Open\command]

@="\"C:\\Path\\to\\virtual\\package\\Microsoft Office Excel 2007.EXE\" /e"

[HKEY_CURRENT_USER\SOFTWARE\Classes\xls.ThinReg\shell\Open\ddeexec]

@="[open(\"%1\")]"

[HKEY_CURRENT_USER\SOFTWARE\Classes\xls.ThinReg\shell\Open\ddeexec\application]

@="Excel"

[HKEY_CURRENT_USER\SOFTWARE\Classes\xls.ThinReg\shell\Open\ddeexec\topic]

@="system"

[HKEY_CURRENT_USER\SOFTWARE\Classes\xlsx.ThinReg\shell\Open]

@="&Open"

[HKEY_CURRENT_USER\SOFTWARE\Classes\xlsx.ThinReg\shell\Open\command]

@="\"C:\\Path\\to\\virtual\\package\\Microsoft Office Excel 2007.EXE\" /e"

[HKEY_CURRENT_USER\SOFTWARE\Classes\xlsx.ThinReg\shell\Open\ddeexec]

@="[open(\"%1\")]"

[HKEY_CURRENT_USER\SOFTWARE\Classes\xlsx.ThinReg\shell\Open\ddeexec\application]

@="Excel"

[HKEY_CURRENT_USER\SOFTWARE\Classes\xlsx.ThinReg\shell\Open\ddeexec\topic]

@="system" 
```

# php - 如何更新与另一行具有相同值的特定行？

> ID：14607169
> 
> 赞同：1
> 
> 时间：2013-01-30T15:08:58.167
> 
> 标签：php, mysql, sql

我很难弄清楚这一点。我有这个数据库迟早会变大，它看起来像这样。

```
est_id |mat_id | est_qty | qty_rec
   2   |  29   |    50   |    0
   3   |  29   |    70   |    0
   8   |  29   |   100   |    0 
```

现在，我想要完成的是更新一行，直到 est_qty 和 qty_rec 相等，然后再移动到另一行。我开始了一个代码，但它不工作。

```
 foreach($mat_id as $mat_id_key => $mat){
    while($rec_qty > 0){
        $remBal = $est_qty[$mat_id_key] - $qty_rec[$mat_id_key];
        if(($remBal - $rec_qty) >= 0){
            mysql_query('UPDATE `estimates` SET `qty_rec` = `qty_rec` + '.$rec_qty.' WHERE `proj_id` = "'.$proj_id.'" AND `mat_id` = "'.$mat[$mat_id_key].'"');
        }
    }
} 
```

在此代码中，每一行都将进入循环，直到它满足 est_qty 和`$rec_qty`a 之间的差值大于或等于零的条件，它将更新该行。

例如，用户输入 30 作为`$rec_qty`，数据库现在看起来像：

```
est_id |mat_id | est_qty | qty_rec
   2   |  29   |    50   |   30
   3   |  29   |    70   |    0
   8   |  29   |   100   |    0 
```

当用户第二次输入时，例如 40 as `$rec_qty`，数据库现在看起来像：

```
est_id |mat_id | est_qty | qty_rec
   2   |  29   |    50   |   50
   3   |  29   |    70   |   20
   8   |  29   |   100   |    0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:31:47.847

这是一个基于集合的单个查询来执行此操作，尽管它使用[triangular-join](http://www.sqlservercentral.com/articles/T-SQL/61539/)：

```
update est as e
    join (
        select *
            , case when needed - room_below > room then room else needed - room_below end as to_add
        from (
            select *
                , est_qty - qty_rec as room
                , (select coalesce(sum(est_qty - qty_rec), 0) from est where mat_id = a.mat_id and est_id < a.est_id) as room_below
                , 30 as needed -- Variable?
            from est as a
        ) as b
    ) as c on e.est_id = c.est_id
set e.qty_rec = e.qty_rec + c.to_add    
where e.mat_id = 29 -- Variable?
    and c.to_add > 0; 
```

应该注意的是，这没有处理溢出条件的逻辑，在这种情况下，您尝试插入比现有记录更大的数字（您可能必须插入新记录来保存剩余记录） .

[这里](http://www.sqlfiddle.com/#!2/c4ff9/2)有一个 SqlFiddle 演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:28:39.623

因为您的表没有唯一的 id，所以您的 UPDATE 将更新与 proj_id 和 mat_id 匹配的*所有行。*因此，如果您从以下内容开始：

```
mat_id | est_qty | qty_rec
  29   |    50   |   30
  29   |    70   |    0
  29   |   100   |    0 
```

再加上 40，你会得到：

```
mat_id | est_qty | qty_rec
  29   |    50   |   70
  29   |    70   |   70
  29   |   100   |   70 
```

甚至：

```
mat_id | est_qty | qty_rec
  29   |    50   |   40
  29   |    70   |   40
  29   |   100   |   40 
```

...取决于首先找到哪一行。

向表中添加主键，然后根据此 ID 更新记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:07:13.860

你不需要循环。这两个查询应该足够了：

```
mysql_query("set @remain := $rec_qty");
mysql_query(
  "update estimates
     set qty_rec = @remain,
         qty_rec = qty_rec - (@remain := if( qty_rec > est_qty, qty_rec - est_qty, 0)
     where mat_id = $matId
   order by est_id"
); 
```

$matId 是您要更新的 mat_id。

# timeout - 如何从独立应用程序中获取到 EJB 的超时连接

> ID：14607171
> 
> 赞同：0
> 
> 时间：2013-01-30T15:09:05.153
> 
> 标签：timeout, client, ejb

我想知道是否有可能在我可以设置的时间段内对 EJB 的远程调用没有应答时知道并捕捉到。我习惯将 EJB 称为独立的客户端应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:56:46.173

你的问题不是很清楚。看看这个网址。这可能会有所帮助

[http://www.javacoffeebreak.com/articles/network_timeouts/](http://www.javacoffeebreak.com/articles/network_timeouts/)

# java - 尝试在 Spring 项目中使用 maven 和 junit 删除测试数据

> ID：14607175
> 
> 赞同：0
> 
> 时间：2013-01-30T15:09:16.280
> 
> 标签：java, spring, hibernate, spring-mvc, junit

我正在做一个春季项目，我正在编写我的 junit 测试用例以删除我的一些测试数据，但我收到以下错误..

```
org.springframework.beans.factory.NoSuchBeanDefinitionException: No bean named 'transactionManager' is defined 
```

我的 junit 测试如下所示：

```
public class TestRemoveTestData implements BeanFactoryAware {

    static boolean functionReturn;

    String user = "xxxx@aol.com.dev";

    private BeanFactory beanFactory;

    public void setBeanFactory(BeanFactory beanFactory) throws BeansException {
        this.beanFactory = beanFactory;

    }

    @Autowired
    private SessionFactory sessionFactory;

    @Test
    @Transactional(readOnly = true, propagation = Propagation.REQUIRED)
    public void RemoveEnrollmentRecord()
    {
        Session mySession = sessionFactory.getCurrentSession();
        //
        // Get profile record based on email address
        //
        Profile myProfile = (Profile) mySession.createCriteria(Profile.class)
                .add(Restrictions.like("email", user)).uniqueResult();
        //
        // Start to create a new Enrollment Record with a status of "U"
        //
        Enrollment newEnrollment = new Enrollment();
        newEnrollment.setProfile_id(myProfile.getProfile_id());
        newEnrollment.setContact_id(myProfile.getContact_id());
        mySession.delete(newEnrollment);
        mySession.flush();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:55:29.367

您需要加载配置文件。例如，在我的带有 JPA 和 spring security 的 spring 项目中，我的配置文件是 applicationContext.xml、applicationContext-security.xml、applicationContext-jpa.xml。您可以按如下方式加载它们：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"classpath:/META-INF/spring/applicationContext*.xml"})
public class TestRemoveTestData implements BeanFactoryAware {
 ...

} 
```

注意：我使用通配符“*”来加载我的所有配置文件。但是您可以将它们列在位置={"file1","file2",...}

# php - Cakephp - saveAll 和 beforeSave

> ID：14607176
> 
> 赞同：2
> 
> 时间：2013-01-30T15:09:31.510
> 
> 标签：php, cakephp, cakephp-2.3

由于 CakePHP 更新到 2.3.5，我无法保存数据。我不想保存不包含价格的数据。

我的模型中的 beforeSave 方法如下所示：

```
public function beforeSave($options = array()){
    if(empty($this->data['MyModel']['price'])){
        unset($this->data['MyModel']);
    } 
    return true;
} 
```

自从我更新以来，我在 /lib/Model/Model.php (l. 1751) 中找到了这个

```
if ($success && $count === 0) {
    $success = false;
} 
```

如果我评论这 3 行，我的问题就解决了。您知道我的 beforeSave 中不阻止我保存的方法吗？

如果我使用数据验证，我的所有数据都不会用我的 saveAll 保存。

示例模型“选项”验证器：

```
public $validate = array(
    'prix' => array(
        'rule'       => 'notEmpty'
    )
); 
```

要保存的示例数据：

```
array(
'Commande' => array(
    'nature_commande' => '0',
    'base_id' => '1',
    'nom' => 'Test',
    'chef_id' => '531',
),
'Option' => array(
    (int) 0 => array(
        'prix' => '5456'
    ),
    (int) 1 => array(
        'prix' => '45645'
    ),
    (int) 3 => array(
        'prix' => ''
    )
) 
```

saveAll 在我的控制器“Commande”中（返回 false）：

```
debug($this->Commande->saveAll($this->request->data, array('validate' => 'first'))); 
```

我希望将我的数据保存在模型“选项”=> 3 的最后一行中。我可以在控制器中使用 foreach 删除空白行，但我可以做得更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:38:32.480

您是否考虑过使用[CakePHP 的内置数据验证功能](http://book.cakephp.org/2.0/en/models/data-validation.html)？这将允许您指定您不想保存，除非“价格”是某个金额，大于零，介于一个范围......等等等等。

基本上，你为你的字段设置规则，每当你尝试保存一行时，它确保每个字段都通过你设置的任何验证。

它有大量的验证类型，包括有效的电子邮件、号码范围、电话号码、正则表达式等等。

# javascript - Django：在 JavaScript 中反向参数化 url

> ID：14607181
> 
> 赞同：2
> 
> 时间：2013-01-30T15:09:45.633
> 
> 标签：javascript, django

假设我的一个 urlpatterns 看起来像这样。

`url('^objects/update/(?P<pk>\d+)$', views.UpdateView.as_view(), name = 'update-object'),`

我需要根据所选对象将用户重定向到更新页面（对象列表使用 Ajax 填充）。所以我想将该命名的 url**模式**传递给 JavaScript，以便在客户端构建实际的 url。

我想要实现的示例：

1.  将名称传递`'update-objects'`给函数
2.  获取实际的 url 模式，替换`(?P<pk>..)`为`{pk}`
3.  将结果传递给 javascript，结果是：`objects/update/{pk}`

有小费吗？谢谢

* * *

更清楚地说：在渲染的那一刻，我不能做 url reverse 因为 PK 还不知道。我需要制作一种 javascript-urlpattern 稍后将转换为真正的 url（即我的 JS 代码将用实际的 pk 值替换 {pk} 部分）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T15:27:32.400

实际的 URL 反转必须发生在服务器端。有几种方法可以做到这一点，其中最优雅的可能取决于您的脚本和标记是如何设置的。我最近做的一件事是使用 HTML5 数据属性将 URL 附加到逻辑元素，这些属性很容易使用 jQuery 检索。如果您不使用 jQuery，我将由您自己翻译成纯 JS。你没有为你的客户端提供任何代码或细节，所以我在这里有点摸不着头脑，但也许这会给你一个想法：

*Django HTML 模板：*

```
<ul class="object-list">
 {% for object in objectList %}
  <li data-update-url="{% url update-objects object.pk %}">object.name</li>
 {% endfor %}
</ul> 
```

*JS：*

```
$('.object-list').on('click', 'li' function () {
  var updateUrl = $(this).data('update-url')
  ...
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T18:26:43.283

听起来您需要在实际选择对象后进行额外的 ajax 调用。不要试图通过尝试在客户端计算出 url 来猜测你的 url.conf - 你以后只会给自己找麻烦。等到你能得到一个 pk，然后使用 django 的 reverse 函数给你你的 url（做任何其他事情都违反[DRY](https://docs.djangoproject.com/en/1.4/misc/design-philosophies/#don-t-repeat-yourself-dry)）。

如何创建一个返回 url 的简单视图 -

```
from django.core.urlresolvers import reverse
from django.http import HttpResponse, HttpResponseBadRequest

def get_url(request):
    if request.is_ajax() and request.method == 'POST':
        obj_id = request.POST['obj_id']
        url = reverse('object-update', kwargs{'pk': obj_id})
        return HttpResponse(obj_id)
    return HttpResponseBadRequest() 
```

然后编写一个 javascript 函数，该函数使用对新视图的 ajax 调用获取 url，然后重定向。选择对象后，您将立即调用此函数。我建议使用 JQuery 来执行此操作，纯 javascript 将需要您编写更多代码，并且可能编写浏览器特定代码（取决于您的目标）。它还支持处理[django 的 csrf 保护](https://docs.djangoproject.com/en/1.4/ref/contrib/csrf/#ajax)（如果还没有的话，你需要为 ajax 调用实现这个）。

```
var redirect = function(obj) {
    $.ajax({
        url: '/your-get-url-view/',
        method: 'post',
        data: {'obj_id': obj},
        success: function(url){
            window.location = url;
        }
    });
} 
```

恐怕我不知道你是如何从选定的对象到 pk 的（为简单起见，我假设它对`redirect`函数可用）——你可能需要在视图中进行一些处理才能到达那里。

我没有测试过上面的代码，但它应该让你对我的建议有所了解。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T17:54:18.563

试试这个：

生成 Django url 的反向方法
[https://github.com/mlouro/django-js-utils](https://github.com/mlouro/django-js-utils)

还有一个
[https://github.com/Dimitri-Gnidash/django-js-utils](https://github.com/Dimitri-Gnidash/django-js-utils)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-04T06:43:38.417

如果您的 URL 中只有一个 PK 字段，您可以使用任意数字（例如`0`）对其进行解析，然后根据需要替换该数字。

在我的场景中，我的 URL 有`pk`一个`upload_id`，所以我必须在最右边的 0 实例上替换为`<upload_id>`，JS 将根据需要替换此字符串出现：

```
detele_url_upload_id_0 = reverse(f'{APP_NAME}:api_upload_delete', args=[pk, 0])
prefix, suffix = detele_url_upload_id_0.rsplit('0', 1)
context['generic_delete_url'] = prefix + '<upload_id>' + suffix 
```

然后在JS中：

```
const deleteUrl = genericDeleteUrl.replace('<upload_id>', uploadId) 
```

# javascript - 关注元素，然后引发 keydown 或 keyup 空间事件

> ID：14607191
> 
> 赞同：1
> 
> 时间：2013-01-30T15:10:13.340
> 
> 标签：javascript, html

我目前正在使用 Chrome 最新版本。我有以下简单的html代码：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
<html>
<input id="inputfield" type = "textfield">
</html>
</body>
</html> 
```

然后使用javascript我首先尝试设置该字段的文本，然后将其聚焦，然后按下空格键。

```
textbox = document.getElementById("inputfield")
textbox.value = "word";

  var evt = document.createEvent("KeyboardEvent");
evt.initKeyboardEvent(
                   "keyup",
                    true, 
                    true, 
                    window, 
                    false, 
                    false, 
                    false, 
                    false,
                    32, 
                    0 
);

textbox.focus();
textbox.dispatchEvent(evt); 
```

但是没有焦点发生，最后一行只是返回true；我正在通过 chrome 的控制台执行代码，我不知道这是否会有所作为。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:34:47.387

您只需触发一个事件。但它不会改变一个值，“word”不会变成“word”。不知道为什么它不能从控制台工作，但可能是你在那里遗漏了一些重要的东西。可能是因为 var （我已经注意到这个问题几次）。尝试更改 `var evt = document.createEvent("KeyboardEvent");`为简单`evt = document.createEvent("KeyboardEvent");`。

> 我在 firefox 12.0 上收到“TypeError：evt.initKeyboardEvent 不是函数”

那是因为在 Firefox 中该函数称为 initKeyEvent。这是一个支持 firefox 和 google chrome 的代码：

```
textbox = document.getElementById("inputfield")
textbox.value = "word";

  var evt = document.createEvent("KeyboardEvent");

  var keyEventFunction = (evt.initKeyboardEvent ? "initKeyboardEvent" : "initKeyEvent");

evt[keyEventFunction](
                   "keyup",
                    true, 
                    true, 
                    window, 
                    false, 
                    false, 
                    false, 
                    false,
                    32, 
                    0 
);

textbox.focus();
textbox.dispatchEvent(evt); 
```

和演示：http: [//jsfiddle.net/Y674s/2/](http://jsfiddle.net/Y674s/2/)

**升级版：**

当您在控制台中运行代码时，焦点设置在您的字段上，但您可以看到。要看到这一点，请修改您的输入 HTML，如下所示：

```
<input id="inputfield" type = "textfield" onblur="alert('focus was in textfield')"> 
```

onblur 事件仅在某些领域被聚焦但后来焦点被移动到其他地方的情况下才会发生。现在，在控制台中运行您的代码，然后单击页面正文中的某个位置。您将看到该警报出现。如果您只是打开页面而不运行该代码 - 将不会出现警报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:23:40.683

您的标记不正确，`html`标签未出现在正文中。

应该是这样的：

```
<!DOCTYPE html>
<html>
    <head>
    </head>
    <body>
        <input id="inputfield" type = "textfield">
    </body>
</html> 
```

然后正如@FAngel 所说，您不能以这种方式更改输入字段的值，您必须将其文本设置为您想要的任何值。

# ruby - 如果由于权限错误而失败，如何安装 gem 或更新 RubyGems

> ID：14607193
> 
> 赞同：606
> 
> 时间：2013-01-30T15:10:14.503
> 
> 标签：ruby, macos, rubygems

我正在尝试使用 安装 gem`gem install mygem`或使用 更新 RubyGems `gem update --system`，但失败并出现以下错误：

```
ERROR:  While executing gem ... (Gem::FilePermissionError)
You don't have write permissions for the /Library/Ruby/Gems/2.0.0 directory. 
```

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：479
> 
> 时间：2016-07-08T04:55:46.047

尝试添加`--user-install`而不是使用`sudo`：

```
gem install mygem --user-install 
```

* * *

## 回答 #2

> 赞同：331
> 
> 时间：2013-01-30T15:36:52.900

> 您没有对 /Library/Ruby/Gems/1.8 目录的写入权限。

就是这个意思，你没有权限在那里写。

那是Apple安装的Ruby版本，供他们自己使用。*如果您知道自己在做什么*，可以对其进行细微修改，因为您不确定权限问题，但我想说继续沿着这条轨道前进并不是一个好主意。

相反，我强烈建议您考虑使用[rbenv](https://github.com/sstephenson/rbenv/)或[RVM](https://rvm.io/rvm/install/)来管理单独的 Ruby，安装在您的主目录中的沙箱中，您可以修改/折叠/主轴/更改，而不必担心会弄乱系统 Ruby。

在这两者之间，我使用 rbenv，尽管我过去经常使用 RVM。rbenv 采用更“不干涉”的方法来管理您的 Ruby 安装。RVM 有很多功能并且非常强大，但是因此更具侵入性。无论哪种情况，在开始安装您选择的任何一种之前，请*阅读*它们的安装文档几次。

* * *

## 回答 #3

> 赞同：96
> 
> 时间：2013-09-01T02:40:51.723

你真的应该使用 Ruby 版本管理器。

正确使用一个可以防止并在执行`gem update`命令时解决您的权限问题。

我推荐*rbenv*。

但是，即使您使用 Ruby 版本管理器，您仍然可能会收到相同的错误消息。

如果你这样做了，并且你正在使用 rbenv，只需验证该`~/.rbenv/shims`目录是否位于系统 Ruby 的路径之前。

`$ echo $PATH` 将向您显示加载路径的顺序。

如果您发现您的 shims 目录位于系统 Ruby bin 目录之后，请编辑您的`~/.bashrc`文件并将其作为最后一个导出 PATH 命令： `export PATH=$HOME/.rbenv/shims:$PATH`

`$ ruby -v` 向您展示您正在使用的 Ruby 版本

这说明我目前使用的是系统版的Ruby（一般都不好）

```
$ ruby -v
ruby 1.8.7 (2012-02-08 patchlevel 358) [universal-darwin12.0] 
```

`$ rbenv global 1.9.3-p448` 将我切换到更新的预安装版本（请参阅下面的参考资料）。

这表明我使用的是较新版本的 Ruby（这可能不会导致 Gem::FilePermissionError）

```
$ ruby -v
ruby 1.9.3p448 (2013-06-27 revision 41675) [x86_64-darwin12.4.0] 
```

您通常不需要在 gem 命令前加上 sudo。如果您觉得有必要这样做，则可能是配置错误。

有关 rbenv 的详细信息，请参阅以下内容：

*   [https://github.com/sstephenson/rbenv](https://github.com/sstephenson/rbenv)
*   [http://robots.thoughtbot.com/post/47273164981/using-rbenv-to-manage-rubies-and-gems](http://robots.thoughtbot.com/post/47273164981/using-rbenv-to-manage-rubies-and-gems)

* * *

## 回答 #4

> 赞同：73
> 
> 时间：2013-06-21T09:30:42.467

你为什么不这样做：

```
sudo gem update --system 
```

* * *

## 回答 #5

> 赞同：65
> 
> 时间：2019-01-04T07:49:02.103

这将以干净的方式解决 MacOS Mojave 和 Catalina 上的问题：

```
brew install ruby 
```

然后设置`GEM_HOME`到您的用户目录。在终端上：

*   `Bash`：

    ```
    echo '# Install Ruby Gems to ~/gems' >> ~/.bashrc
    echo 'export GEM_HOME=$HOME/gems' >> ~/.bashrc
    echo 'export PATH=$HOME/gems/bin:$PATH' >> ~/.bashrc
    source ~/.bashrc 
    ```

*   或者如果在`Zsh`：

    ```
    echo '# Install Ruby Gems to ~/gems' >> ~/.zshrc
    echo 'export GEM_HOME=$HOME/gems' >> ~/.zshrc
    echo 'export PATH=$HOME/gems/bin:$PATH' >> ~/.zshrc
    source ~/.zshrc 
    ```

* * *

## 回答 #6

> 赞同：35
> 
> 时间：2013-10-21T22:34:44.400

对我来说，问题是由于使用`rbenv`并忘记在全局范围内设置正确的版本。

所以我不得不设置它`rbenv global xxx`

就我而言，我安装了`2.0.0-p247`，所以我不得不发出命令：

```
rbenv global 2.0.0-p247
rbenv rehash 
```

然后一切正常。

* * *

## 回答 #7

> 赞同：25
> 
> 时间：2014-10-29T21:38:40.647

你需要更正你的路径。

要确定此修复程序是否有效，请运行以下命令：

```
which gem 
```

这应该输出一个您无权访问的目录：

```
/usr/bin/gem 
```

要解决此问题，请执行以下步骤：

1.  确定您需要复制到您的个人资料的路径：

    ```
    rbenv init - 
    ```

    输出的第一行是您需要复制到您的配置文件的行：

    ```
    export PATH="/Users/justin/.rbenv/shims:${PATH}" #path that needs to be copied
    source "/usr/local/Cellar/rbenv/0.4.0/libexec/../completions/rbenv.zsh"
    rbenv rehash 2>/dev/null
    rbenv() {
        typeset command
        command="$1"
        if [ "$#" -gt 0 ]; then
            shift
        fi

        case "$command" in
            rehash|shell)
                eval `rbenv "sh-$command" "$@"`;;
            *)
                command rbenv "$command" "$@";;
        esac
    } 
    ```

2.  将路径复制到您的个人资料并保存。

3.  重新加载您的个人资料（`source ~/.zshenv`对我而言）。

4.  运行`rbenv rehash`。

现在，当您运行时，`which gem`您应该获得一个您有权访问的本地路径：

```
/Users/justin/.rbenv/shims/gem 
```

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2016-09-30T20:15:59.067

这对我有用。另外，如果您之前以 root 身份安装了 gems，它会通过将所有权更改回您来解决该问题（更好的安全性）。

```
sudo chown -R `whoami` /Library/Ruby/Gems 
```

* * *

## 回答 #9

> 赞同：16
> 
> 时间：2013-08-05T13:58:06.193

```
sudo gem update --system
sudo gem install (gemfile) 
```

* * *

## 回答 #10

> 赞同：15
> 
> 时间：2014-08-03T23:23:48.450

有两种途径：使用 rbenv 或 RVM。下面有两种食谱。在此之前，您可能希望关闭 gems 的本地文档安装。

```
echo "gem: --no-ri --no-rdoc" >> ~/.gemrc 
```

然后：

[`install rbenv`](https://github.com/sstephenson/rbenv#readme)

[`install ruby-build`](https://github.com/sstephenson/ruby-build#readme)

跑：

```
rbenv install 2.1.2 (or whatever version you prefer)
rbenv global 2.1.2
gem update --system 
```

这会在您的本地目录中安装最新版本的 gem 系统。这意味着您不会干扰系统配置。如果你问这个问题，你不应该搞乱系统安全，你会花更长的时间来了解你可能会遇到什么问题，而不仅仅是有一个简单的方法来避免你开始遇到的问题。当您对操作系统和编程有了更多了解后，再学习 InfoSec。

替代使用“RVM”：[安装 rvm](https://rvm.io/rvm/install)运行：

```
rvm install 2.1.2
rvm use 2.1.2
gem update --system 
```

这具有相同的结果，您最终会得到一个不会干扰系统版本的本地 Ruby 和 Gem 系统。不需要 Homebrew，也不需要覆盖系统库等。

* * *

## 回答 #11

> 赞同：15
> 
> 时间：2015-08-15T17:07:01.073

在使用下面的原始答案之前，请尝试[nathanwhy 的答案](https://stackoverflow.com/a/38259128/241211)。他的建议`--user-install`应该达到同样的目的，而不必与你的`.bash_profile`或确定你的 ruby​​ 版本。

* * *

如果您不关心特定的 ruby​​ 版本，您可以跳过[繁重的 ruby​​ 环境管理器选项](https://stackoverflow.com/a/14607772/241211)，只需将这些行添加到`~/.bash_profile`：

```
export GEM_HOME="$HOME/.gem/ruby/2.0.0"
export GEM_PATH="$HOME/.gem/ruby/2.0.0" 
```

路径是从原始输出中窃取的`gem env`：

```
RubyGems Environment:
  - RUBYGEMS VERSION: 2.0.14
  - RUBY VERSION: 2.0.0
  - INSTALLATION DIRECTORY: /Library/Ruby/Gems/2.0.0
  - RUBY EXECUTABLE: /System/Library/.../2.0/usr/bin/ruby
  - EXECUTABLE DIRECTORY: /usr/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - universal-darwin-14
  - GEM PATHS:
     - /Library/Ruby/Gems/2.0.0
     - /Users/mylogin/.gem/ruby/2.0.0 # <-- This guy, right here.
     - /System/Library/.../usr/lib/ruby/gems/2.0.0
  ... 
```

不需要`sudo`ing，您可以使用 Apple 提供的已安装的 ruby​​。

* * *

## 回答 #12

> 赞同：13
> 
> 时间：2014-10-14T21:41:01.697

我找到[了这个`sudo`减少宝石](https://coderwall.com/p/6bqzvq)的方法：

1.  `brew install rbenv ruby-build`
2.  `sudo gem update --system`
3.  将导出添加到`.bashrc`：

    ```
    export RBENV_ROOT="$(brew --prefix rbenv)"
    export GEM_HOME="$(brew --prefix)/opt/gems"
    export GEM_PATH="$(brew --prefix)/opt/gems" 
    ```

4.  最后将其添加到您的`~/.gemrc`：

    ```
    gem: -n/usr/local/bin 
    ```

5.  `gem update --system`

* * *

## 回答 #13

> 赞同：12
> 
> 时间：2013-11-10T18:10:12.590

我需要这样做`rbenv rehash`，它会指向我当地的 Gem 图书馆。

看起来您的 gem 管理器指向系统库，因此，与其弄乱权限，不如为您的管理器执行相当于“rehash”的操作以使事物指向本地。

* * *

## 回答 #14

> 赞同：12
> 
> 时间：2013-12-24T20:56:29.753

更老更聪明

不要照我说的做，只要知道在使用时要小心`sudo`。你可能想使用类似的东西`rbenv`来隔离你正在做的任何工作。

* * *

## 离开

[学习关于`chown`](http://www.cyberciti.biz/faq/how-to-use-chmod-and-chown-command/)

我不知道您是否喜欢命令行，但这将使使用任何将软件包安装到系统的工具在任何项目上工作变得轻而易举。

`chown`据我所知，代表变更所有权。

我来寻找这个答案的原因是因为`gem install`今天向我抛出了这个错误：

```
ERROR:  While executing gem ... (Gem::FilePermissionError)
    You don't have write permissions into the /var/lib/gems/1.9.1 directory. 
```

这是一个绝佳的使用机会`chown`。您会看到 Ruby 为我们提供了它需要访问的目录，而且它似乎是一个它会经常使用的目录。

在这种情况下，解决问题只需要知道三件事，但`chown`比我现在要演示的要强大得多，并且给你更多的灵活性。请参阅底部的来源以获取更多信息。

## 两件事

1.  用户名
2.  目录

如果您在 shell 中查找用户名很容易。只看提示。我的看起来像：

```
breadly@breadly-desktop:~\Desktop 
```

当前用户只是`@`. 我们从错误消息中知道目录，但您有两个选择。您可以使用 将您的权限限制为当前版本，也可以使用`../gems/1.9.1`授予自己对所有版本的 gems 的写入权限`../gems`。

实际更改所有权的命令如下所示。

```
chown -R $(whoami) /absolute/path/to/directory 
```

被`-R`称为标志，`-R`标志通常告诉命令以递归方式执行某些操作，或者换句话说，对目录中包含的所有内容以及目录中包含的所有内容执行命令，依此类推，直到没有别的了。

* * *

## 回答 #15

> 赞同：12
> 
> 时间：2017-03-03T23:31:03.400

我已经格式化了我的 Mac，许多建议的解决方案对我不起作用。对我有用的是这些命令按正确的顺序：

1.  安装自制软件：

    ```
    /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)" 
    ```

2.  安装红宝石：

    ```
    brew install ruby 
    ```

3.  安装指南针：

    ```
    sudo gem install compass 
    ```

* * *

## 回答 #16

> 赞同：12
> 
> 时间：2019-04-18T11:01:26.557

`sudo chown -R $USER /Library/Ruby/Gems/`

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2015-06-12T10:06:17.563

为我工作：

```
sudo gem uninstall cocoapods

sudo gem install cocoapods 
```

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2018-07-17T04:31:57.960

安装 rbenv `brew install rbenv`;

然后放在`eval "$(rbenv init -)"`~/.bash_profile（或MacOS的~/.zshrc）的末尾；

打开一个新的终端并运行`gem install ***`就可以了！

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2015-01-26T07:25:40.317

检查您的 Ruby 版本是否正确。如果没有，请更改它。

这对我有用：

```
$ rbenv global 1.9.3-p547
$ gem update --system 
```

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2016-04-27T23:08:14.133

正如 bobbdelsol 所指出的，rehash 对我有用：

```
==> which ruby
/usr/bin/ruby

==> rbenv install 1.9.3-p551
Downloading ruby-1.9.3-p551.tar.bz2...
-> https://cache.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p551.tar.bz2
Installing ruby-1.9.3-p551...
Installed ruby-1.9.3-p551 to /Users/username/.rbenv/versions/1.9.3-p551

==> which ruby
/Users/username/.rbenv/shims/ruby

==> which gem
/Users/username/.rbenv/shims/gem

==> gem install compass
ERROR:  While executing gem ... (Gem::FilePermissionError)
    You don't have write permissions for the /Library/Ruby/Gems/2.0.0 directory.

==> ruby -v
ruby 2.0.0p648 (2015-12-16 revision 53162) [universal.x86_64-darwin15]

==> rbenv global 1.9.3-p551

==> ruby -v
ruby 2.0.0p648 (2015-12-16 revision 53162) [universal.x86_64-darwin15]

==> rbenv global 1.9.3-p551

==> rbenv rehash

==> ruby -v
ruby 1.9.3p551 (2014-11-13 revision 48407) [x86_64-darwin15.4.0]

==> gem install compass
Fetching: sass-3.4.22.gem (100%)
Fetching: multi_json-1.11.3.gem (100%)
Fetching: compass-core-1.0.3.gem (100%)
Fetching: compass-import-once-1.0.5.gem (100%)
Fetching: chunky_png-1.3.5.gem (100%)
Fetching: rb-fsevent-0.9.7.gem (100%)
Fetching: ffi-1.9.10.gem (100%)
Building native extensions.  This could take a while...
Fetching: rb-inotify-0.9.7.gem (100%)
Fetching: compass-1.0.3.gem (100%)
    Compass is charityware. If you love it, please donate on our behalf at http://umdf.org/compass Thanks!
Successfully installed sass-3.4.22
Successfully installed multi_json-1.11.3
Successfully installed compass-core-1.0.3
Successfully installed compass-import-once-1.0.5
Successfully installed chunky_png-1.3.5
Successfully installed rb-fsevent-0.9.7
Successfully installed ffi-1.9.10
Successfully installed rb-inotify-0.9.7
Successfully installed compass-1.0.3
9 gems installed
Installing ri documentation for sass-3.4.22...
Installing ri documentation for multi_json-1.11.3...
Installing ri documentation for compass-core-1.0.3...
Installing ri documentation for compass-import-once-1.0.5...
Installing ri documentation for chunky_png-1.3.5...
Installing ri documentation for rb-fsevent-0.9.7...
Installing ri documentation for ffi-1.9.10...
Installing ri documentation for rb-inotify-0.9.7...
Installing ri documentation for compass-1.0.3...
Installing RDoc documentation for sass-3.4.22...
Installing RDoc documentation for multi_json-1.11.3...
Installing RDoc documentation for compass-core-1.0.3...
Installing RDoc documentation for compass-import-once-1.0.5...
Installing RDoc documentation for chunky_png-1.3.5...
Installing RDoc documentation for rb-fsevent-0.9.7...
Installing RDoc documentation for ffi-1.9.10...
Installing RDoc documentation for rb-inotify-0.9.7...
Installing RDoc documentation for compass-1.0.3... 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2021-10-22T08:37:53.647

2021 年解决方案（使用 rvm）：

如果你输入`which ruby`终端，它显示`/usr/bin/ruby`，你可以试试这个解决方案。

1.  安装 rvm

    ```
    curl -L https://get.rvm.io | bash -s stable 
    ```

2.  使用 rvm 安装 ruby

    ```
    rvm install "ruby-3.0.0" 
    ```

3.  使用您安装的 ruby​​ 版本

    ```
    rvm use ruby-3.0.0 
    ```

4.  再次输入`which ruby`，将显示`/Users/mac_user_name/.rvm/rubies/ruby-3.0.0/bin/ruby`.

    这是使用 ruby​​ 的新途径。

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2019-04-04T18:06:45.390

在 MacOS Mojave 上测试成功：

1.  卸载所有旧的 ruby​​ 版本（假设你有 2.00 和 2.3.0）：

    `$ rvm uninstall 2.0.0`

    `$ rvm uninstall 2.3.0`

2.  安装全新的 ruby​​ 版本：

    `$ brew install ruby`

3.  为您的版本设置默认别名：

    `$ rvm alias create default ruby`

4.  重新启动您的系统，因为这是您的计算机加载最近安装的新 ruby​​ 版本的最安全方式。

完成上述过程后，您可以成功运行任何`gem`命令。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-09-30T07:15:50.633

你可以改变`GEM_HOME`。您的主目录下还有一个 gem 文件夹来检查它的使用

```
$ gem env 
```

结果如下。不相关的部分省略。

```
...
  - GEM PATHS:
     - /Users/xxx/.gem/ruby/2.6.0
     - /Library/Ruby/Gems/2.6.0
     - /System/Library/Frameworks/Ruby.framework/Versions/2.6/usr/lib/ruby/gems/2.6.0
... 
```

您可以使用您的`/Users/xxx/.gem/ruby/2.6.0`文件夹。

```
vim ~/.bash_profile 
```

添加以下行

```
export GEM_HOME=~/.gem/ruby/2.6.0/ 
```

之后你可以使用

```
source ~/.bash_profile 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2022-01-26T17:13:19.313

我的问题是我之前从 zshell 切换到 bash 并且没有登录：

```
/bin/bash --login 
```

虽然我安装了 rvm，但它无法切换到我新安装的 rvm ruby​​ 版本，并且仍在尝试使用 Mac 安装的默认 ruby​​ 二进制文件。因此我的困惑（用户错误！！！）和持续的权限问题......

* * *

## 回答 #25

> 赞同：-3
> 
> 时间：2014-10-13T00:08:20.497

cd /图书馆/Ruby/Gems/2.0.0

打开 。

右键获取信息

单击锁定

放置密码

让一切都可以读写。

* * *

## 回答 #26

> 赞同：-4
> 
> 时间：2015-11-18T06:50:39.347

**安装 gem 或更新 RubyGems 失败并出现权限错误然后键入此命令**

```
sudo gem install cocoapods 
```

* * *

## 回答 #27

> 赞同：-4
> 
> 时间：2018-05-21T07:40:09.130

您可以使用： gem install cocoapods --pre --user

* * *

## 回答 #28

> 赞同：-5
> 
> 时间：2019-02-12T07:39:20.293

让用户 $whoami 在这些文件夹中创建一些东西

```
sudo chown -R user /Library/Ruby/Gems/2.0.0 
```

* * *

## 回答 #29

> 赞同：-6
> 
> 时间：2014-08-27T00:55:08.953

我用过这个并且工作过。

`$ sudo chown myuser /var/lib/gems`

* * *

## 回答 #30

> 赞同：-20
> 
> 时间：2013-05-10T05:52:35.533

错误的原因是您没有在终端上以 root 用户身份登录。

如果您已经在终端类型的 Mac 上启用了 root 使用权限

```
$ su 
```

如果您没有 root 用户，则需要使用以下步骤启用它

1.  从 Apple 菜单中选择系统偏好设置...。
2.  从视图菜单中选择用户和组。
3.  单击锁并以管理员帐户身份验证。
4.  单击登录选项...。
5.  单击右下角的“编辑...”或“加入...”按钮。
6.  单击“打开目录实用程序...”按钮。
7.  单击“目录实用程序”窗口中的锁。
8.  输入管理员帐户名和密码，然后单击确定。
9.  从编辑菜单中选择启用根用户。
10.  在密码和验证字段中输入您希望使用的根密码，然后单击确定。

更多内容请访问[http://support.apple.com/kb/ht1528](http://support.apple.com/kb/ht1528)

至少在卡住几个小时后它对我有用。

# ibm-mq - 将请求消息关联到 Java 客户端中的响应消息以访问 MQ 系列中的问题

> ID：14607195
> 
> 赞同：1
> 
> 时间：2013-01-30T15:10:32.550
> 
> 标签：ibm-mq

我使用 wmqjava 示例程序连接到 MQ 管理器并将消息放入 REQUEST 队列并从 RESPONSE 队列中获取响应。

我可以发送和接收消息。当有多个消息到达响应队列时，我无法获得正确的消息。

请告知是否有一种方法可以在这种方法中关联请求和响应。

还请告知是否推荐这种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:09:56.777

Correlation id 是关联请求和响应消息的最佳方式。您将需要执行以下操作：

在请求者端：
1) 请求消息发送后缓存请求消息的消息id。
2) 获取消息时，在 MQGetMessageOptions.matchOptions 字段中指定 MQMO_MATCH_CORREL_ID，并将上述消息 id 指定为匹配值。

在响应端：
1) 从请求消息中检索消息 id。
2）在发送响应消息时，设置响应消息的Correlation Id与请求消息的消息ID。

这就是您可以关联请求和响应消息的方式。请求者的小片段。

```
 // Send request message
        MQMessage requestMessage = new MQMessage();
        requestMessage.writeUTF("Request Message");
        reqQueue.put(requestMessage);

        // Receive response
        MQMessage responseMessage = new MQMessage();
        responseMessage.correlationId = requestMessage.messageId;
        MQGetMessageOptions gmo = new MQGetMessageOptions();
        gmo.matchOptions = CMQC.MQMO_MATCH_CORREL_ID;

        respQueue.get(responseMessage,gmo); 
```

# java - java- 数组引用赋值

> ID：14607196
> 
> 赞同：1
> 
> 时间：2013-01-30T15:10:37.310
> 
> 标签：java, arrays

我只是拿起Java。我尝试了一些东西，但它不会编译：

```
int[] arr = methodThatReturnsIntArray(); 
```

但这一个有效：

```
int[] arr = null;
arr = methodThatReturnsIntArray(); 
```

为什么会这样？数组变量不只是引用（或指针）吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:16:27.707

它们都是正确的，如果`methodThatReturnsIntArray()`返回有效的整数数组，则不应给出编译错误

例如：

```
int[] methodThatReturnsIntArray(){
    return new int[2];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:20:05.893

两者都是正确的，请查看下面的示例。

```
public class testItClass {

public int[] methodThatReturnsIntArray(){
    int a[]=new int[10];
    return a;

}
public static void main(String args[]){
    int[] arr = new testItClass().methodThatReturnsIntArray();
}
} 
```

希望这会有所帮助:)

# php - 如何找到数组中最独特的字符串？

> ID：14607200
> 
> 赞同：1
> 
> 时间：2013-01-30T15:10:51.367
> 
> 标签：php, arrays, performance, comparison

我在数组中有很多字符串 - 千。我需要将该数组中的所有字符串相互比较，并从中找到最独特的字符串。

您可以查看并测试我的代码，但正如您所见 - 仅比较 100 个项目需要花费大量时间（本地主机上大约 160 秒 = Intel Core i7），而且我需要比较数千个项目......任何想法如何优化这段代码？

我不需要优化代码的第一部分（生成数据），因为我正在从其他地方提取数据。我只需要优化代码的第二部分（比较）。正如有人注意到的那样，可以通过不进行重复比较（a -> b，b -> a）来优化脚本 - 我知道这一点，但我仍然试图节省比一半多得多的时间。也许有比类似文本更好的比较字符串的功能，但我没有其他经验，这就是我在这里问的原因......

代码：

```
 <?php

    //set how many strings generate for test
    $number_of_test_strings = 100;

    $strings = array();
    $chars = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    $size_chars_array = strlen( $chars );

    /*
     * Creating some random strings - data for test
     */

    //just for testing performance
    $creating_test_data_time_start =  microtime();

    //create some random strings in to array
    for ( $i = 1; $i < $number_of_test_strings; $i++ ) {

        //set random string to empty string
        $random_string = '';

        //choose by random from characters array - also the length of random string will be random - between 1800 and 2500chars
        for( $j = 0; $j < rand ( 1800, 2500); $j++ ) {
                $random_string .= $chars[ rand( 0, $size_chars_array - 1 ) ];
        }

        //insert random string in to strings array
        $strings[] = $random_string;

    }

    //just for testing performance
    $creating_test_data_time_end =  microtime();

    /*
     * Comparison itself
     */

    //just for testing performance
    $uniqueness_time_start =  microtime();

    //foreach for all strings in array
    foreach ($strings as $key_first_element => $first_element) {

        //reset of matched value
        $matched = 0;

        //foreach with each first element
        foreach ($strings as $key_second_element => $second_element) {

            // dont compare the same string
            if ($key_first_element != $key_second_element) {

                //compare those two strings
                similar_text($first_element, $second_element, $match);

                //add match value to matched
                $matched = ($matched + $match);

            }

        }

        // create average uniqueness for that string
        $uniqueness = ($matched / (count($strings) - 1));

        //store it in array
        $uniqueness_array[$key_first_element] = $uniqueness;

    }

    //sort the array by uniqueness (less match the better)- the best on the beginning
    asort($uniqueness_array);

    //just for testing performance
    $uniqueness_time_end =  microtime();

    //just output performance info
    echo 'Creating of test data: '. (array_sum( explode( ' ' , $creating_test_data_time_end ) ) - array_sum( explode( ' ' , $creating_test_data_time_start ) )) .' s, comparing strings: '. (array_sum( explode( ' ' , $uniqueness_time_end ) ) - array_sum( explode( ' ' , $uniqueness_time_start ) )) .' s<br />';

    $i = 0;
    foreach ($uniqueness_array as $key_string => $uniquness_of_string)
    {

        // output just 10 best results
        if ($i < 10) {
            echo 'Uniqueness of a string with key '.$key_string.' is '.$uniquness_of_string.'<br />';    
            $i++;
        }
        else break;

    }

    ?> 
```

预期输入和输出：

```
 //Expected input array
    $input = array(
        'Today is a great day for skiing and I dont have enough time',
        'Wednesday is a very good day for skiing and snowboarding and I dont have enough time',
        'Today is a superior day for skiing and I dont have enough time',
        'Completly different string about nothing'
    );

    //Expected output array - the order is important - the most different strings at the beginning of the array
    $output = array(
        'Completly different string about nothing',
        'Wednesday is a very good day for skiing and snowboarding and I dont have enough time',
        'Today is a superior day for skiing and I dont have enough time',
        'Today is a great day for skiing and I dont have enough time'
    ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:22:40.477

我真的认为这`similar_text`还不够......你可以将它与它结合起来`levenshtein`以获得你想要的结果。

```
$words = array(
    'Today is a great day for skiing and I dont have enough time',
    'Wednesday is a very good day for skiing and snowboarding and I dont have enough time',
    'Today is a superior day for skiing and I dont have enough time',
    'Completly different string about nothing'
);

$unique = array_map(function ($v) use($words) {
    return new Word($words, $v);
}, $words); 
```

**使用相似文本**

```
echo "Uniqness By similar_text\n\n";
usort($unique, function ($a, $b) {
    $a = $a->getSimilar();
    $b = $b->getSimilar();
    return ($a == $b) ? 0 : (($a < $b) ? - 1 : 1);
});

foreach ( $unique as $var ) {
    printf("%s (%s) \n",$var->getWord(),$var->getSimilar());
} 
```

**相似文本输出**

```
Uniqness By similar_text

Completly different string about nothing (36.363636363636) 
Wednesday is a very good day for skiing and snowboarding and I dont have enough time (75.342465753425) 
Today is a great day for skiing and I dont have enough time (90.909090909091) 
Today is a superior day for skiing and I dont have enough time (90.909090909091) 
```

如您所见`Today is a great`，并且`Today is a superior`位置不正确

**使用 levenshtein**

```
echo "\n\nUniqness By levenshtein\n\n";
usort($unique, function ($a, $b) {
    $a = $a->getLev();
    $b = $b->getLev();
    return ($a == $b) ? 0 : (($a < $b) ? 1 : - 1);
});

foreach ( $unique as $var ) {
    printf("%s (%s) \n", $var->getWord(), $var->getLev());
} 
```

**编辑输出**

```
Uniqness By levenshtein

Completly different string about nothing (63) 
Wednesday is a very good day for skiing and snowboarding and I dont have enough time (63) 
Today is a superior day for skiing and I dont have enough time (45) 
Today is a great day for skiing and I dont have enough time (43) 
```

如您所见`Today is a superior`，`Today is a great`两者的距离非常近`levenshtein`..如果它们最终相同，则结果可能不是最新的

**结合两者以获得简单索引**

```
echo "\n\nUniqness By Simple Index \n\n";
usort($unique, function ($a, $b) {
    $a = $a->getIndex();
    $b = $b->getIndex();
    return ($a == $b) ? 0 : (($a < $b) ? - 1 : 1);
});

foreach ( $unique as $var ) {
    printf("%s (%s) \n", $var->getWord(), $var->getIndex());
} 
```

**简单索引输出**

```
Uniqness By Simple Index 

Completly different string about nothing (0.57720057720058) 
Wednesday is a very good day for skiing and snowboarding and I dont have enough time (1.1959121548163) 
Today is a superior day for skiing and I dont have enough time (2.020202020202) 
Today is a great day for skiing and I dont have enough time (2.1141649048626) 
```

将两者结合起来可以更好地解决可能的冲突

**使用的类**

```
class Word {
    private $lev = 0;
    private $similar = 0;
    private $index = 0;
    private $word;

    function __construct($words, $word) {
        $this->word = $word;
        foreach ( $words as $selected ) {

            if ($selected == $word)
                continue;

            $lev = levenshtein($word, $selected);
            if ($lev > $this->lev)
                $this->lev = $lev;
            similar_text($word, $selected, $match);

            if ($match > $this->similar)
                $this->similar = $match;
        }

        $this->index = $this->similar / $this->lev;
    }

    function getLev() {
        return $this->lev;
    }

    function getSimilar() {
        return $this->similar;
    }

    function getIndex() {
        return $this->index;
    }

    function getWord() {
        return $this->word;
    }
} 
```

[观看现场演示](http://eval.in/7971)

# java - 使用 .txt 作为资源导出 .jar 将不起作用

> ID：14607204
> 
> 赞同：0
> 
> 时间：2013-01-30T15:11:05.067
> 
> 标签：java, eclipse

我有一个关于 .jar 导出的问题。我必须在我的 jar 中包含一个 .txt 文件，从那里我将单词读入列表。我用它来实现（在eclipse运行+调试模式下效果很好）：

```
File file = new File(Worte.class.getClassLoader().getResource("resource/wortliste.txt").getFile()); 
```

现在，如果我将它导出到 JAR 文件中，JAR 文件应该是可执行的，并且它在资源中包含 list.txt 和 .java 文件（因为它应该是家庭作业；-)），但程序的行为就像没有文件。当我使用 getResourceAsStream() 时，我遇到了同样的问题。有谁知道为什么这不起作用？我不明白，因为我两周前用另一个代码做了这个，它工作了o_O。

我试过的：

1.  删除项目并导入新项目
2.  像 1，但进入一个新的工作区

我的系统是 Windows 7 x64 PC、Eclipse Juno 和 JRE7。

我用于导出的选项：

```
[] Export generated class files and resources 
[x] export all output folders... 
[x] export java source files... 
[] export refactorings

[x] compress the contents... 
[x] add directory entries 
[x] overwrite existing files without warning

jar tvf ...
    39 Wed Jan 30 16:19:14 CET 2013 META-INF/MANIFEST.MF
     0 Wed Jan 30 00:34:16 CET 2013 resource/
100250 Wed Jan 30 00:37:24 CET 2013 resource/wortliste.txt
     0 Wed Jan 30 00:34:16 CET 2013 wortspiel/
  1291 Wed Jan 30 01:19:14 CET 2013 wortspiel/BuchstabenKollektion.java
  2251 Sun Jan 27 16:24:42 CET 2013 wortspiel/TestBuchstabenKollektion.java
   506 Sun Jan 27 17:38:48 CET 2013 wortspiel/UI.java
  1187 Sun Jan 27 16:24:42 CET 2013 wortspiel/TestWorte.java
  2932 Wed Jan 30 01:25:00 CET 2013 wortspiel/WortspielGUI.java
  4384 Wed Jan 30 01:50:40 CET 2013 wortspiel/Worte.java
   310 Sun Jan 27 16:25:08 CET 2013 .classpath
   383 Sun Jan 27 16:22:32 CET 2013 .project
  1992 Wed Jan 30 16:02:12 CET 2013 wortspiel/BuchstabenKollektion.class
  2075 Wed Jan 30 16:02:12 CET 2013 wortspiel/TestBuchstabenKollektion.class
  1104 Wed Jan 30 16:02:12 CET 2013 wortspiel/TestWorte.class
   942 Wed Jan 30 16:02:12 CET 2013 wortspiel/UI.class
  4701 Wed Jan 30 16:02:12 CET 2013 wortspiel/Worte.class
   688 Wed Jan 30 16:02:12 CET 2013 wortspiel/WortspielGUI$1.class
   688 Wed Jan 30 16:02:12 CET 2013 wortspiel/WortspielGUI$2.class
  3475 Wed Jan 30 16:02:12 CET 2013 wortspiel/WortspielGUI.class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:21:23.487

试试这个：

URL url = Thread.currentThread().getContextClassLoader().getResource("resource/list.txt");

文件文件=新文件（url.getFile（））；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:18:18.317

您不能用于`java.io.File`获取 jar 内文件的内容。尝试运行以下代码段，

```
public class TestGetResource
{
    public static void main(String[] args) throws Exception
    {
        URL url = TestGetResource.class.getResource("/resource/wortliste.txt");
        System.out.println("URL: " + url);
        File f = new File(url.getFile());
        System.out.println("File: " + f);
        System.out.println("File exists: " + f.exists());

        try {
            FileReader reader = new FileReader(f);        
            reader.read();
        } catch (FileNotFoundException notFoundEx) {
            System.out.println("Caught FileNotFoundException: " + notFoundEx.getMessage());
        }
    }

} 
```

你应该看到类似的东西，

> 网址：jar:file:/C:/some/path/my.jar!/resource/wortliste.txt
> 
> 文件：file:\C:\some\path\my.jar!\resource\wortliste.txt
> 
> 文件存在：假
> 
> Caught FileNotFoundException: file:\C:\some\path\my.jar!\resource\wortliste.txt（文件名、目录名或卷标语法不正确）

相反，用于`Class.getClassLoader().getResourceAsStream(String)`获取`InputStream`用于读取文件的内容。如果您仍需要以 . 格式读取内容`File`，则可以将内容流式传输到临时文件。

# ubuntu - 我应该将 Ubuntu 安装到硬盘中以安装 Java 还是 Hadoop

> ID：14607205
> 
> 赞同：-1
> 
> 时间：2013-01-30T15:11:07.423
> 
> 标签：ubuntu, ubuntu-12.10

我是 Ubuntu 的初学者。我想安装 Hadoop 和 Sun Java。下载后，我已将 Ubuntu 12.10 写入 DVD。我也可以从 CD 启动。我目前能够从 Ubuntu DVD 启动，但我不想将 Ubuntu 安装到硬盘中以节省空间。我想知道是否需要在我的硬盘中安装 Ubuntu 操作系统才能在 Ubuntu 上安装 Java 6 或 hadoop。？

我有一台 64 位笔记本电脑，目前在 Windows 7 家庭版上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:47:42.113

如果你只是想看看 Ubuntu / Hadoop，那么只要它启动并运行它就可以工作。如果您想保留从 DVD / ISO 启动而不安装的能力，那么您可以创建一个专用驱动器，一旦启动安装了 Hadoop，您就可以将其安装在 Ubuntu 中，然后您将保留 Hadoop 安装以及您拥有的任何其他内容在那座山上。

Ubuntu 将提供 OpenJDK 6 或至少某种程度的 Java 支持，具体取决于 Ubuntu 版本。

您也可以使用 VirtualBox，但这需要磁盘空间

最后，您可以尝试使用[Pendrive](http://www.pendrivelinux.com/)，它可以让您运行 USB 驱动器。

# doctrine-orm - Doctrine2 应用函数查询参数

> ID：14607211
> 
> 赞同：0
> 
> 时间：2013-01-30T15:11:23.550
> 
> 标签：doctrine-orm

我使用学说查询生成器来构建我的查询。

```
$qb = $this->getEntityManager()->createQueryBuilder();
$qb->select(array('u'))->from('Account', 'a');

-- problem here
$qb->where('lower_unaccent(u.email) LIKE :search');
$qb->setParameter('search', $search['search'] . '%'); 
```

这很好用，但我也想将 lower_unaccent 函数应用于搜索参数。

有没有办法用查询生成器做到这一点？因为当我这样做时，`LOWER_UNACCENT(u.email) LIKE LOWER_UNACCENT(:search)`我收到以下错误：

```
Error: Expected Doctrine\ORM\Query\Lexer::T_STRING, got 'LOWER_UNACCENT' 
```

即使我将 LOWER_UNACCENT 更改为 LOWER，我也会收到相同的错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-07T22:00:36.710

您必须使用`$qb->expr()->lower('u.email')`和`$qb->expr()->lower(':search')`。要创建“LIKE”，请将这些作为参数传递给`$qb->expr()->like()`.

虽然似乎没有不重音的方法，但也许有一种方法可以自定义它。让我知道进展如何。

编辑：

查看 lower() 的代码，您似乎可以使用任何您想要的函数，如下所示：

```
new Expr\Func('LOWER', array($x)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T15:21:44.983

默认情况下，我很确定你不能这样做。
lower_unaccent 不是标准 SQL，据我所知，Doctrine 不支持。

您可以做的是使用用户定义的函数扩展 DQL，这将做任何您想做的事情。实施起来并不难。这是一些文档：

[http://docs.doctrine-project.org/en/2.0.x/cookbook/dql-user-defined-functions.html](http://docs.doctrine-project.org/en/2.0.x/cookbook/dql-user-defined-functions.html)

[http://docs.doctrine-project.org/en/2.0.x/reference/dql-doctrine-query-language.html#adding-your-own-functions-to-the-dql-language](http://docs.doctrine-project.org/en/2.0.x/reference/dql-doctrine-query-language.html#adding-your-own-functions-to-the-dql-language)

# python - IDA pro 进口

> ID：14607212
> 
> 赞同：1
> 
> 时间：2013-01-30T15:11:27.730
> 
> 标签：python, ida

在过去的几周里，我一直在研究 ida Pro 以获得一些背景知识。

不过，困扰我很长时间的事情是似乎缺乏对提取导入函数的支持。

我想要的只是一个可以复制整个导入窗口并粘贴到文本文件中的脚本，但是我在 API 中找到任何可以帮助我做到这一点的东西时遇到了严重的麻烦。这应该很简单，但我觉得不可能。我设法找到了从这个窗口中拉出图书馆的东西，但没有什么可以拉出所有东西。

任何帮助或方向将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:14:25.120

我同意您应该使用`Ctrl`+`Ins`或的断言`dumpbin`。

但是，IDAPython 项目已经解决了你的问题，我建议你去看看他们的例子（[这里](http://code.google.com/p/idapython/wiki/ExampleScripts)和[这里](http://code.google.com/p/idapython/source/browse/trunk/Scripts/)），尤其是[这个](http://code.google.com/p/idapython/source/browse/trunk/Scripts/ImportExportViewer.py)。

相关`idaapi`功能是：

*   `idaapi.get_import_module_qty`
*   `idaapi.enum_import_names`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:49:27.140

**图形界面解决方案：**

您可以通过将焦点放在该窗口上并点击来复制导入窗口的全部内容`Ctrl+Ins`。

**IDAPython 解决方案：**

这可能需要根据您的喜好进行调整，但这应该可以帮助您入门：

```
text = ""
seg = SegByName(".idata")
for i in xrange(seg, SegEnd(seg), 4):
    text += "%08x %s\r\n" % (i, Name(i))
open(r"c:\imports.txt", "wb").write(text) 
```

# http - 如何在 HTTP 协议中发送密码？

> ID：14607213
> 
> 赞同：0
> 
> 时间：2013-01-30T15:11:28.683
> 
> 标签：http, tornado, packet-sniffers

很抱歉这个愚蠢的问题，但我使用[RawCap](http://www.netresec.com/?page=RawCap)来检测发送和接收的数据包以了解在 HTTP 中发送的内容，并且该页面是使用 Tornado 和 MongoDB 制作的简单应用程序，当我捕获数据包时，我在任何地方都找不到密码数据包发送。

为什么？我不使用像 HTTPS 这样的加密协议，它是一个简单的 HTTP，看不到密码。

这是文件： [结果](https://docs.google.com/file/d/0B-Iu7VFIRkh4Wk1aZzROMXdvQ0E/edit)

如您所见，Mongodb 回答了数据库的值，并在保存时带来了密码（PBKDF2），但看不到第一次发送的密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:13:41.660

很可能，您看不到密码，因为该页面使用[HTTP 基本身份验证，该身份验证使用](http://en.wikipedia.org/wiki/Basic_access_authentication)[base64](http://en.wikipedia.org/wiki/Base64)对用户名和密码进行编码。寻找如下字符串：

> 授权：SomeRealmName QWxhZGRpbjpvcGVuIHNlc2FtZQ==

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:14:03.687

如果您使用的是基本身份验证，则密码为 base 64 编码。*ENCODED*未加密。在你的数据包中寻找类似的东西：`Authorization: Basic dXNlcm5hbWU6cGFzc3dvcmQ=`

# struts-1 - Struts 1 动作从 struts-config 向前调用到另一个 struts-config 文件中的另一个动作

> ID：14607214
> 
> 赞同：3
> 
> 时间：2013-01-30T15:11:34.490
> 
> 标签：struts-1, forward, struts-config, struts-action

我正在尝试从 struts-config 调用使用 struts 1 中的操作转发属性，并且我想调用另一个操作，它位于另一个 struts.config 文件中。显然它不起作用！

我的代码是：

```
In "struts-misExpedientes.xml" 
<action path="/s99bIrInicio" forward="$$$WEBROOT_ENVIRONMENT$$$/comunJSP/s99binicio.do">

the other xml file is "struts-comun.xml"
<action path="/s99binicio" forward="/s99bIrWelcomeMensajeDia.do" /> 
```

注意： `"WEBROOT_ENVIRONMENT"`是我在属性文件中声明的变量，其值为 [http://localhost:8100/s99bEnvironmentWar]

我感谢您提供的任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:38:01.207

如果您的意思是要从一个 webapp 转发到另一个 webapp，那么这是不可能的。每个 webapp 都与其他 webapp 隔离。每个都有自己的 awn 类、库和会话，与另一个不同。因此，将 HttpRequest 对象从一个传递到另一个是没有意义的。

您可能应该*重定向*到另一个 web 应用程序。顺便说一句，Struts 不鼓励动作链接，即使在可能的情况下，在单个 wepapp 中也是如此。

编辑：看来您正在使用模块。所以[按照文档](http://struts.apache.org/1.x/userGuide/configuration.html#module_config-switching)所说的去做：

> 从一个模块切换到另一个模块有三种方法。
> 
> *   您可以使用 Extras JAR 中的 org.apache.struts.actions.SwitchAction，
> *   您可以使用`<forward>`（全局或本地）并将 contextRelative 属性指定为 true，
> *   或者您可以将“模块”参数指定为任何 Struts JSP 超链接标记（包括、Img、链接、重写或转发）的一部分。

# ajax - 如何使 XMLHttpRequest 在谷歌浏览器上通过 HTTPS 工作？

> ID：14607218
> 
> 赞同：0
> 
> 时间：2013-01-30T15:11:53.347
> 
> 标签：ajax, https

我对此进行了很多研究，但找不到魔法。其实我想填充城市密码的列表。使用 JQuery 自动完成 UI。这是一个https页面。它适用于 Firefox，但不适用于 Google Chrome。谁能帮我解决这个问题。提前致谢。

以下是我的代码：

```
function zipAutoCompletet(prefix) {
    jQuery("#" + prefix + "_zip").autocomplete({
        source: function(request, response) {
            jQuery.ajax({
                url: "http://ws.geonames.org/postalCodeSearchJSON",
                dataType: "jsonp",
                data: {
                    style: "full",
                    maxRows: 12,
                    postalcode_startsWith: request.term
                },
                success: function(data) {
                    response(
                        jQuery.map(data.postalCodes, function(item) {
                            return {
                                label:
                                    item.placeName +
                                    (item.adminCode1
                                        ? ", " + item.adminCode1
                                        : "") +
                                    ", " +
                                    item.postalCode +
                                    ", " +
                                    item.countryCode,
                                value: item.postalCode
                            };
                        })
                    );
                    jQuery(".ui-autocomplete").css("width", "188px");
                }
            });
        },
        minLength: 2,
        select: function(event, ui) {
            var myString = new String(ui.item.label);
            var address = myString.split(",");

            jQuery("#" + prefix + "_city").val(address[0]);
            jQuery("#" + prefix + "_city").addClass("activated");
            jQuery("#" + prefix + "_city").trigger("change");
            jQuery("#" + prefix + "_city")
                .parents(".row")
                .removeClass("error-row");
            jQuery("#" + prefix + "_city")
                .parents(".row")
                .addClass("ok-row");

            var countryCode = address[3] ? address[3] : address[2];
            countryCode = jQuery.trim(countryCode);
            var countryName = jQuery(
                "#" +
                    prefix +
                    '_country option[value="' +
                    jQuery.trim(countryCode) +
                    '"]'
            ).text();
            jQuery("#countryContainer .jqTransformSelectWrapper span").html(
                countryName
            );
            jQuery("#countryContainer .jqTransformSelectWrapper").addClass(
                "selected-jqtranform"
            );
            jQuery("#" + prefix + "_country")
                .parents(".row")
                .addClass("ok-row");
            jQuery("#" + prefix + "_country")
                .parents(".row")
                .removeClass("error-row");
            jQuery("#" + prefix + "_country").val(jQuery.trim(countryCode));

            var stateCode = address[2] ? address[1] : "";
            stateCode = jQuery.trim(stateCode);

            if (countryCode == "US") {
                var base = base_url;
                base = base.replace("https", "http");

                jQuery.ajax({
                    url: base + "/getStateName",
                    dataType: "jsonp",
                    data: { stateCode: stateCode },
                    success: function(data) {
                        stateName = data;

                        jQuery("#jc_state").val(stateName);
                        jQuery("#jc_state").addClass("activated");
                        jQuery("#jc_state")
                            .parents(".row")
                            .removeClass("error-row");
                        jQuery("#jc_state")
                            .parents(".row")
                            .addClass("ok-row");
                        jQuery("#jc_state").trigger("change");
                        formValidate();
                    }
                });
            } else {
                stateName = stateCode;

                jQuery("#jc_state").val(stateName);
                jQuery("#jc_state").addClass("activated");
                jQuery("#jc_state")
                    .parents(".row")
                    .removeClass("error-row");
                jQuery("#jc_state")
                    .parents(".row")
                    .addClass("ok-row");
                jQuery("#jc_state").trigger("change");
                formValidate();
            }

            jQuery("#" + prefix + "_zip")
                .parents(".row")
                .addClass("ok-row");
            jQuery("#" + prefix + "_zip")
                .parents(".row")
                .removeClass("error-row");
        },
        open: function() {
            jQuery(this)
                .removeClass("ui-corner-all")
                .addClass("ui-corner-top");
        },
        close: function() {
            jQuery(this)
                .removeClass("ui-corner-top")
                .addClass("ui-corner-all");
        },
        change: function(event, ui) {
            if (ui.item === null) {
                jQuery("#" + prefix + "_zip")
                    .parents(".row")
                    .removeClass("ok-row");
                jQuery("#" + prefix + "_zip")
                    .parents(".row")
                    .addClass("error-row");
                $("#" + prefix + "_zip").val("");
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:44:21.270

如果您在 https 页面上，浏览器将阻止对非安全资源 (http) 的请求。您应该经常看到一些关于此的通知。看起来其他浏览器默认不会阻止安全页面上的非安全 AJAX 请求，但 google chrome 会。

在您的代码中，您有硬编码的 URL：

```
url: "http://ws.geonames.org/postalCodeSearchJSON", 
```

如果那是跨域请求并且它支持 HTTPS，你可以这样改变它：

```
url: "//ws.geonames.org/postalCodeSearchJSON", 
```

如您所见，此处未指定协议。浏览器将采用页面默认协议（http 或 https）并使用它来请求数据。

# c++ - C++ 嵌套类 - 内部/外部关系

> ID：14607226
> 
> 赞同：8
> 
> 时间：2013-01-30T15:12:14.487
> 
> 标签：c++

我在社区内外阅读了一些关于**嵌套类**的帖子，我很困惑。

据我了解，在**C++ 中，嵌套类**与单独/独立的类没有任何不同。

当我试图更好地理解 conecpt 时，我编写了一个简单的代码，我发现内部类可以访问外部类而无需与外部类建立友谊。

***例如：***

```
class Outer {
private : // default access modifier
    int x;
    static int sx;
public:
    class Inner {
    public:
        void changeOuterDataMemberValues(int value) {
            sx = value; // changes the private static data member of Outer.

            Outer out;
            out.x = value; // changes the private data member via object (not via class!)
        }
        void printMyOuterDataMember()  {
            cout << sx; // prints the private data member of Outer.
        }
    };
};

class Lonesome {
    void tryingToChangeDataMemberValue(int value) {
        Outer::sx = value; // cannot change the private static data member of Outer.
    }
};

int Outer::sx; 
```

您可以看到嵌套在 Outer 类中的 Inner 类可以访问其（Outer 类）数据成员，而 Lonesome 作为独立类无法访问 Outer 类数据成员。

如果这是一个重复或愚蠢的问题，我深表歉意，但我只想与你们确认**嵌套类**和独立类（两个没有内部/外部关系的不同类）之间存在差异。

谢谢大家，辛迪加=]

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-30T15:20:34.507

在这方面，C++03 和 C++11 是有区别的。因此，答案取决于您使用的编译器。

如果您使用的是符合 C++03 的编译器，则：

***嵌套类不能访问封闭类的所有成员。***

如果您使用的是符合 C++11 的编译器，则：

***嵌套类可以访问封闭类的所有成员。嵌套类被视为该类的另一个成员。***

**C++03 标准 11.8 嵌套类：**
§1

> 嵌套类的成员对封闭类的成员没有特殊的访问权限，也没有对已授予封闭类友谊的类或函数的特殊访问权限；应遵守通常的访问规则。

**C++11 标准 11.7 嵌套类：**

> 嵌套类是成员，因此具有与任何其他成员相同的访问权限。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T15:17:02.507

从标准的第 11.7 节：

> 1 - 嵌套类是成员，因此具有与任何其他成员相同的访问权限。封闭类的成员对嵌套类的成员没有特殊的访问权限 [...]

所以嵌套（“内部”）类实际上是封闭类的朋友。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T15:29:32.687

你自己回答了你的问题：

> 您可以看到嵌套在 Outer 类中的 Inner 类可以访问其（Outer 类）数据成员，而 Lonesome 作为独立类无法访问 Outer 类数据成员。

注意与 C++ 中的 Java 相反，您不能访问`Outer`类的非静态成员。

`Outer`对班级进行引用是一种常见的做法`Inner`。

```
class Outer {
    private : // default access modifier
    int x;
    static int sx;
public:
    class Inner {
    public:
        Inner( Outer & o ) : m_outer( o ) {}
        void changeOuterDataMemberValues(int value) {
            sx = value; // changes the private static data member of Outer.

            //Outer out;
            //out.x = value; // changes the private data member via object (not via class!)
            m_outer.x = value; // <---------
        }
        void printMyOuterDataMember()  {
            cout << sx; // prints the private data member of Outer.
            cout << m_outer.x;
        }
    private:
        Outer & m_outer;
    };
}; 
```

# session - 如何确定单个 IP 进行的并发会话数

> ID：14607227
> 
> 赞同：0
> 
> 时间：2013-01-30T15:12:14.963
> 
> 标签：session, networking, proxy, firewall, packet

我正在研究分析器脚本。这是一个简单的 bash 脚本，它在 tcpdump 嗅探捕获上应用了一些逻辑。

我的任务是找出单个 IP 进行的并发会话数。我应用的逻辑是我计算了每个 ip 对相同目标 IP 和端口（即 3128）的不同源端口请求，因为它是代理服务器。

例如，考虑我的 dest ip 是 172.31.1.1 并且 dest 端口是 3128

现在，我只嗅探到此 dest 端口和 dest ip 的流量。

然后我为每个数据包过滤掉了源 ip 和源端口对。

然后我计算了每个源 IP 的不同源端口的数量，我认为这将等于每个单独的 IP 与该代理服务器进行的并发会话数。

现在通过查看正在运行的代理服务器上 10,000 个数据包样本的输出，每个 IP 的会话数大约为 300,250,200，甚至更少。对于 10 万，它也像 3000,2500。

我对会话的解释是否有问题，因为防火墙允许的并发会话数是每个 IP 100。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:48:41.223

正如我在评论中提到的，如果您想知道*在任何给定时间*来自单一源 IP 的 TCP 连接数，您需要弄清楚连接的建立（TCP[三向握手](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#Connection_establishment)）和终止（[四向拆除](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#Connection_termination)和重置） ) 点。否则，您将在整个捕获期间计算从给定 IP 建立和尝试的所有 TCP 连接（但由于在捕获期间可以回收临时客户端端口，即使此计数可能不准确）。

我应该提到在 a 上增加连接的运行计数并在 a 上减少`SYN`它是不够的，因为 TCP 倾向于重新传输数据包。您需要跟踪 TCP 状态，因此可能需要熟悉 TCP 状态图：`FIN``RST`

![TCP 状态转换图](../Images/4274d70817c95e089e4508a16ec69daa.png)

（来自（[http://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Tcp_state_diagram_fixed.svg/250px-Tcp_state_diagram_fixed.svg.png](http://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Tcp_state_diagram_fixed.svg/250px-Tcp_state_diagram_fixed.svg.png)）。

# spring - Rabbit Admin 的意外行为

> ID：14607236
> 
> 赞同：1
> 
> 时间：2013-01-30T15:12:59.100
> 
> 标签：spring, spring-rabbit

我的印象是 RabbitAdmin

“默认情况下会自动查找 Queue、Exchange 和 Binding 类型的 bean，并代表用户向代理声明它们”

在我看来，如果我已经在代理上声明了多个队列，如果我添加了一个未声明的新队列，管理员将在声明它时遇到问题，抛出：-

```
Code:
Caused by: com.rabbitmq.client.ShutdownSignalException: channel error; reason: {#method<channel.close>(reply-code=404, reply-text=NOT_FOUND - no queue 'TranslationQueue.local' in vhost '/', class-id=50, method-id=10), null, ""} 
```

RabbitMQ xml 配置：

代码：

```
<bean id="rcf" class="com.rabbitmq.client.ConnectionFactory">
        <property name="host" value="${rabbitmq.host:localhost}"/>
        <property name="requestedHeartbeat" value="10" />
</bean>

<rabbit:connection-factory id="connectionFactory" host="${rabbitmq.host:localhost}" port="${rabbitmq.port:5672}"
        username="guest" password="guest" connection-factory="rcf" />

<rabbit:admin connection-factory="connectionFactory" />

<rabbit:queue name="TranslationQueue.${server.name:unknown}" >
        <rabbit:queue-arguments value-type="java.lang.Long">
                <entry key="x-message-ttl" value="2400000" />
        </rabbit:queue-arguments>
</rabbit:queue> 
```

这是一个已知问题还是某种配置错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:34:54.783

在线程中解决

[http://forum.springsource.org/showthread.php?134488-Unexpected-behaviour-with-Rabbit-Admin](http://forum.springsource.org/showthread.php?134488-Unexpected-behaviour-with-Rabbit-Admin)

事实证明，该区域的日志记录非常薄弱，需要调试级别才能找到错误。

问题是代理上的 ttl 与另一个队列的配置不匹配。

# wcf - 如何在 Windows 服务中托管的 WCF 服务中释放非托管资源？

> ID：14607237
> 
> 赞同：2
> 
> 时间：2013-01-30T15:13:07.197
> 
> 标签：wcf, c#-4.0, windows-services, udpclient

我有一个托管在 Windows 服务中的 WCF 服务。WCF 服务有一个与外部系统建立 UdpClient 连接的线程。我发现当 Windows 服务停止时，线程并不总是正常关闭并调用 UdpClient.Close() 方法，该方法使该连接保持打开状态（或我认为的套接字）。然后，当我再次运行它时，它会阻塞并且 UdpClient 永远不会接收到广播数据包。我在想我的问题是当 Windows 服务停止时我没有调用 UdpClient.Close 。所以我的问题是如何正确释放这些资源？这是我的 Windows 服务的代码。

```
public class MyWindowsService : ServiceBase
{
    public ServiceHost serviceHost = null;

    public MyWindowsService()
    {
        ServiceName = "MyWindowsService";
    }

    public static void Main()
    {
        ServiceBase.Run(new MyWindowsService());
    }

    protected override void OnStart(string[] args)
    {
        if(serviceHost != null)
        {serviceHost.Close();}

        serviceHost = new ServiceHost(typeof(MyWCFService));
        serviceHost.Open();
    }

    protected override void OnStop()
    {
        if(serviceHost != null)
        {
            //Need to release unmanaged resources in the
            //WCF service here. How would I reference my
            //WCF service and send it a message to stop the threads?

            serviceHost.Close();
            serviceHost = null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:39:14.033

在你的 IDisposable 中实现`MyWCFService`，在 dispose 清理所有使用的资源。[http://msdn.microsoft.com/en-us/library/system.idisposable.aspx](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)指出：

> 该接口的主要用途是释放非托管资源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T20:35:37.157

在您的 WCF 服务类中实现，并在方法`IDisposable`中清理资源。`Dispose`

当服务的生命周期结束时（即调用结束或会话结束，根据实例化模式），WCF 将对服务的每个实例调用 Dispose。或者，如果您使用的是单例实例，您可以控制生命周期，因此您可以在适当的时间调用 Dispose

# javascript - IE7 上的 Javascript/CSS 慢动作菜单

> ID：14607238
> 
> 赞同：0
> 
> 时间：2013-01-30T15:13:09.133
> 
> 标签：javascript, html, css

我正在处理的项目中有一种菜单，仅在 IE7 浏览器中使用。HTML：

```
<table class="tabellaquad" cellspacing="20">
    <tr>
        <td>
        <a class="item" href="index.jsp?quad=1">
        <div align="center" class="tabquad">
            ONE
        </div>
        </a>
        </td>
        <td>
        <a class="item" href="index.jsp?quad=7">
        <div align="center" class="tabquad">
            1
        </div>
        </a>
        </td>
        <td>
        <a class="item" href="index.jsp?quad=4">
        <div align="center" class="tabquad">
            RED
        </div>
        </a>
        </td>
    </tr>
    <tr>
        <td>
        <a class="item" href="index.jsp?quad=2">
        <div align="center" class="tabquad">
            TWO
        </div>
        </a>
        </td>
        <td>
        <a class="item" href="index.jsp?quad=8">
        <div align="center" class="tabquad">
            2
        </div>
        </a>
        </td>
        <td>
        <a class="item" href="index.jsp?quad=5">
        <div align="center" class="tabquad">
            BLUE
        </div>
        </a>
        </td>
    </tr>
    <tr>
        <td>
        <a class="item" href="index.jsp?quad=3">
        <div align="center" class="tabquad">
            THREE
        </div>
        </a>
        </td>
        <td>
        <a class="item" href="index.jsp?quad=9">
        <div align="center" class="tabquad">
            3
        </div>
        </a>
        </td>
        <td>
        <a class="item" href="index.jsp?quad=6">
        <div align="center" class="tabquad">
            YELLOW
        </div>
        </a>
        </td>
    </tr>
    <tr>
        <td>
        </td>
        <td>
       <a class="item" href="index.jsp?quad=10">
        <div align="center" class="tabquad">
            4
        </div>
        </a>
        </td>
        <td>
        </td>
    </tr>
    <tr>
        <td>
        </td>
        <td>
        <a class="item" href="index.jsp?quad=11">
        <div align="center" class="tabquad">
            5
        </div>
        </a>
        </td>
        <td>
        </td>
    </tr>
</table> 
```

CSS：

```
.tabellaquad{
margin:auto;
position:relative;
width:40%;
text-align:center;
}

.tabquad{
color:white;
margin:auto;
position:relative;
border:2px solid #000;
border-color:rgb(82,115,154);
width:200px;
height:30px;
text-align:center;
padding-top:10px;
top:25px;
background-color:rgb(0,56,130);
}
.tabquad:hover{
background-color:rgb(49,87,132);
cursor: hand;
} 
```

我想做的是`<div>`每列有3个“父亲”按钮（a）。当我单击其中一个时，按钮必须在其下方缓慢出现（取决于列）。

我可以使用任何 CSS/JS 脚本来执行此操作吗？我的主要问题是我必须使用 IE7，我搜索了一些东西，但没有找到任何有用的东西。

在这里您可以找到一些[jsfiddle](http://jsfiddle.net/bKG8w/)示例。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T15:16:08.003

如果您还没有，请查看 JqueryUI。我发现它很容易上手，它为你处理了 CSS 和动画的几乎所有底层细节。

[http://jqueryui.com/](http://jqueryui.com/) [http://api.jqueryui.com/](http://api.jqueryui.com/)

它还可以解决您可能遇到的几乎所有多浏览器问题。

# mysql - 查询以获取依赖于另一列的数据，但仅当它出现一次时

> ID：14607240
> 
> 赞同：-1
> 
> 时间：2013-01-30T15:13:18.867
> 
> 标签：mysql, select

我有一个如下的 MySQL 表：

```
+--------------------------------------------+
|  ID  |  State   |  Name   |     City       |
+--------------------------------------------+
|  PA1 |  PA      |  Foo    |    Philly      |
|  VA1 |  PA      |  Foo    |    Philly      |
|  DC1 |  VA      |  Foobar |  Washington    |
|  ME2 |  ME      |  Barfoo |   Portland     |
+--------------------------------------------+ 
```

现在，我想做一个 SELECT 语句，我只选择那些行 where `State = SUBSTR(ID, 1, 2)`，*除非*`Name`只有一次出现在表中。换句话说，我想最终得到下表：

```
+--------------------------------------------+
|  ID  |  State   |  Name   |     City       |
+--------------------------------------------+
|  PA1 |  PA      |  Foo    |    Philly      |
|  DC1 |  VA      |  Foobar |  Washington    |
|  ME2 |  ME      |  Barfoo |   Portland     |
+--------------------------------------------+ 
```

在第二行中，State 不等于 ID 的子字符串，并且“Name”（在本例中为“Foo”）多次出现在表中，因此我们没有得到该行。但是，我也想要第三行，即使 State 再次不等于 ID 的子字符串，因为“名称”在原始表中只出现一次。

关于我可以使用什么查询来实现这一点的任何想法？我已经玩了很长时间没有成功。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:22:44.997

`EXISTS`您可以在`WHERE`子句中使用以下内容：

```
select *
from yourtable t1
where state = SUBSTR(ID, 1, 2)
  or exists (select count(Name) CountName, Name
              from yourtable t2
              where t1.name = t2.name
              group by Name
              having count(name) = 1) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/8c238/14)

返回结果：

```
|  ID | STATE |   NAME |       CITY |
-------------------------------------
| PA1 |    PA |    Foo |     Philly |
| DC1 |    VA | Foobar | Washington |
| ME2 |    ME | Barfoo |   Portland | 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T15:18:10.277

```
select *
from   myTable
where  State = SUBSTR(ID, 1, 2) or
       Name in (select Name from myTable group by Name having count(*)=1) 
```

# .net - 使用 FileStream、Stream、ByteArray 发送文件

> ID：14607244
> 
> 赞同：1
> 
> 时间：2013-01-30T15:13:24.170
> 
> 标签：.net, vb.net, web-services, stream

我正在编写一个可以在网站和网络服务中使用的文件上传功能。

该函数`ByteArray`使用`FileStream`.

> ```
>  Public Shared Function FileUpload(ByRef content As Byte(), ByVal fullPath As String) As Boolean
>         Dim fileStream As FileStream = Nothing
>         Try
> 
>             fileStream = New FileStream(fullPath, FileMode.Create, FileAccess.Write)
>             fileStream.Write(content, 0, content.Length)
> 
>             Return True
>         Catch ex As Exception
>             Return False
>         Finally
>             If Not fileStream Is Nothing Then
>                 fileStream.Dispose()
>             End If
>         End Try
>     End Function 
> ```

在网站中，我使用了 FileUpload.PostedFile.InputStream 并将其读入 byteArray（内容）。

我在 FTP 服务器上运行另一个应用程序，将本地文件发送到同一个 Web 服务器。因此它将文件读取到 FileStream 并转换为 byteArray 并`FileUpload`通过 Web 服务调用该函数。

这种情况有更好的解决方案吗？我可以发送 Stream (MemoryStream) 或 FileStream 而不是 ByteArray。哪个更有效率？

# powershell - 如何编写包装 sed/perl/etc 命令的 powershell 函数

> ID：14607249
> 
> 赞同：1
> 
> 时间：2013-01-30T15:13:32.997
> 
> 标签：powershell

我有许多我经常使用的 sed/perl/etc “单行”命令：

*   `head -1`（打印文件的第一行）
*   `sed $d`（删除文件的最后一行）
*   `perl -pe '$_ = qq($. $_)'`（文件中的数字行）

你明白了。

所有这些命令都有相同的行为——它们可以从标准输入中获取输入，或者处理一系列名称作为参数传递的文件。我想将这些常用脚本包装为 Powershell 函数，这样我就不必记住要使用的确切语法。但是，别名不是那样工作的，如果我用函数做“明显”的方法：

```
function numlines {
    perl -pe '$_ = qq($. $_)' $args
} 
```

它适用于作为参数的文件 ( `numlines my_file.pl`)，但不适用于来自管道 ( `cat my_file.pl | numlines`) 的输入。

有没有办法编写函数以使其双向工作？

澄清一下 - 我可以使用 bat 文件来做到这一点。例如， numlines.bat 包含

```
@perl -pe "$_ = qq($. $_)" %* 
```

但是必须调用 cmd.exe 和 bat 文件的一般丑陋（即“终止批处理作业（Y/N）？”当您按下 CTRL-C :-() 时的提示让我希望在 Powershell 中有一个类似简单的解决方案。 .

* * *

根据下面理查德的建议，我尝试了：

```
function test {
  [CmdletBinding()]

  param(
    [Parameter(mandatory=$true, ValueFromPipeline=$true)]
    $data
  )

  process {
    perl -pe '$_ = qq($. $_)'
  }
} 
```

如果我然后这样做（`test file.txt`我希望以`perl -pe '$_ = qq($. $_)' file.txt`与 `file.txt`当我尝试时也会发生同样的事情`cat file.txt | test`——我希望它的行为与`cat file.txt | perl -pe '$_ = qq($. $_)'`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T15:38:30.143

### 基础知识：高级功能可以做的比标准功能更多

> 有没有办法编写函数以使其双向工作？

是的，使用[高级功能](http://technet.microsoft.com/en-us/library/hh847806.aspx)，将为每个输入对象调用流程块。

*   您需要在块[`[CmdletBinding]`](http://technet.microsoft.com/en-us/library/hh847872.aspx)之前的开始处指定。`param`
*   您需要一个接受管道输入的参数，这是通过[`Parameter`](http://technet.microsoft.com/en-us/library/hh847743.aspx)该参数的属性完成的。

像这样：

```
function ReadInput {
  [CmdletBinding]
  param(
    [Parameter(mandatory=$true, ValueFromPipeline=$true)]
    $data
  )

  process {
    "Input was: $data";
  }
} 
```

* * *

### 更好地在本地做事

> head -1（打印文件的第一行）

查看 : 的参数`First`只会传递第一个对象。`Select-Object``... | Select -f 1 | ....`

> sed $d（删除文件的最后一行）

这个更难......本质上是一个跟踪是否有另一行的函数。

> perl -pe '$_ = qq($. $_)' （文件中的行数）

您需要`Measure-Object`，如果没有其他参数，它将计算它在管道上接收到的对象数。

* * *

### 为什么它不起作用

（基于扩展问题）

这有两个部分：

首先：您需要将绑定到管道的参数的值传递给您的操作。所以：

> ```
> process {
>   perl -pe '$_ = qq($. $_)'
> } 
> ```

应该

```
process {
  $data | perl -pe '$_ = qq($. $_)'
} 
```

第二：这可能不适用于您的许多实用程序，因为每次`process`执行块时都会执行管道的一个新实例，包括`sed`对管道上每个对象的（等）新调用，因此会丢失您通常期望它从一行到下一行保持的任何状态。

这周围有两条路线。首先，您可以使用*steppable pipelines*，这是一个高级主题（唯一体面的介绍是在 Bruce Payette 的*Windows PowerShell in Action*第二版一书中（他完成了大部分 PSH 语言的设计和实现））。

第二：做事原生。例如。文件中的行数（不使用`Measure-Object`）：

```
function Get-ObjectCount {
  [CmdletBinding]
  param(
    [Parameter(mandatory=$true, ValueFromPipeline=$true)]
    [object[]]$data   # Accept an array...
  )

  begin {
    $count = 0  # Not strictly needed: PSH will default this.
  }

  process {
    $count += $data.length
  }

  end {
    $count
  }
} 
```

这也会快得多（无需创建另一个进程。

只要您专注于将 PSH 作为包装器，您就会发现您正在两全其美：失去 *ix 类型工具的灵活性（PSH 的执行模型不同：在一个进程中协作工具）*并*失去PSH 的灵活性（PSH 适用于*类型化对象*而不是字符串）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:44:37.670

看来解决方案的关键是在函数中同时使用 $args（用于命令行参数）和 $input（用于管道输入），如下所示：

```
function wrapper {
    $input | WRAPPED_COMMAND_HERE $args
} 
```

因此，例如，perl 命令对行数的情况如下所示

```
PS> function nl {
>>    $input | perl -pe '$_ = qq($. $_)' $args
>>  }
>>
PS> nl test.txt
1 This is some
2 test data
PS> type test.txt | nl
1 This is some
2 test data 
```

# php - 未触发 Jquery Onchange 事件

> ID：14607254
> 
> 赞同：1
> 
> 时间：2013-01-30T15:13:44.653
> 
> 标签：php, jquery, onchange

我有一个 onChange 事件，但在更改时它不会被触发。我已经验证我正确地调用了这些字段。

```
 $("#SRIEquipmentDDL").change(function() {
    if ($(this).val() == "3") {
        $("#SRILift").show();
    } else {
        $("#SRILift").hide();
    }
});

<div id="SRIEquipment">
            <div class="TextField">Equipment:</div>
            <div class="InputField">
                <select name="SRIEquipmentDDL" id="SRIEquipmentDDL" class="DropDownField">
                    <option value="0" <?php if ($_POST['SRIEquipmentDDL'] == "0") {echo "selected='selected'";} ?> >Select Chair Type</option>
                    <option value="1" <?php if ($_POST['SRIEquipmentDDL'] == "1") {echo "selected='selected'";} ?> >Manual Wheelchair</option>
                    <option value="2" <?php if ($_POST['SRIEquipmentDDL'] == "2") {echo "selected='selected'";} ?>>Power Wheelchair</option>
                    <option value="3" <?php if ($_POST['SRIEquipmentDDL'] == "3") {echo "selected='selected'";} ?>>Lift Chair</option>
                    <option value="4" <?php if ($_POST['SRIEquipmentDDL'] == "4") {echo "selected='selected'";} ?>>Scooter</option>
                    <option value="5" <?php if ($_POST['SRIEquipmentDDL'] == "5") {echo "selected='selected'";} ?>>Lifts</option>
                    <option value="6" <?php if ($_POST['SRIEquipmentDDL'] == "6") {echo "selected='selected'";} ?>>CPM</option>
                    <option value="8" <?php if ($_POST['SRIEquipmentDDL'] == "7") {echo "selected='selected'";} ?>>Walker</option>                          
                    <option value="9" <?php if ($_POST['SRIEquipmentDDL'] == "8") {echo "selected='selected'";} ?>>Other</option>
                </select>
            </div>
        </div>
        <div id="SRILift">
            <div class="TextField">Lift Type:</div>
            <div class="InputField">
                <select name="SRILiftTypeDDL" id="SRILiftTypeDDL" class="DropDownField">
                    <option value="0" <?php if ($_POST['SRILiftTypeDDL'] == "0") {echo "selected='selected'";} ?> >Select Lift Type</option>
                    <option value="1" <?php if ($_POST['SRILiftTypeDDL'] == "1") {echo "selected='selected'";} ?> >Stair Lift</option>
                    <option value="2" <?php if ($_POST['SRILiftTypeDDL'] == "2") {echo "selected='selected'";} ?>>Porch Lift</option>
                    <option value="3" <?php if ($_POST['SRILiftTypeDDL'] == "3") {echo "selected='selected'";} ?>>Outside Vehicle Lift</option>
                    <option value="4" <?php if ($_POST['SRILiftTypeDDL'] == "4") {echo "selected='selected'";} ?>>Inside Vehicle Lift</option>
                    <option value="5" <?php if ($_POST['SRILiftTypeDDL'] == "5") {echo "selected='selected'";} ?>>Ceiling Lift</option>                     
                    <option value="6" <?php if ($_POST['SRILiftTypeDDL'] == "6") {echo "selected='selected'";} ?>>Other</option>
                </select>
            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:49:00.320

您面临的问题是，通常选择框不会触发更改事件，而它们是`focused`.

由于您使用的是 JQuery，因此解决方案是`.click()`结合使用`.blur()`以触发`onchange`事件。

我找到了这个小提琴，它展示了你想要做什么：

[http://jsfiddle.net/acrashik/wLWMc/](http://jsfiddle.net/acrashik/wLWMc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:17:43.417

尝试这样的事情：

```
 $('#yourSelectId').change(function() {
    var selectedVal = $('#yourSelectId option:selected').attr('value');
}); 
```

确保您的代码在准备好的函数内 - [http://api.jquery.com/ready/](http://api.jquery.com/ready/) 或者它在创建选择的 HTML 之后

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T15:29:58.780

你可以试试jquery bind() 方法吗？如果它不起作用，请尝试检查您的选择中的值...可能有 INTEGERS 尝试然后将您的条件更改为：

if ($(this).val() == 3) {

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-30T15:55:55.863

尝试在您的代码中使用 live

```
 $("#SRIEquipmentDDL").on('change',function() {
            if ($(this).val() == "3") {
                $("#SRILift").show();
            } else {
                $("#SRILift").hide();
            }
        }); 
```

# python - 如何将 Json 对象输出到记事本中

> ID：14607256
> 
> 赞同：0
> 
> 时间：2013-01-30T15:13:52.160
> 
> 标签：python, json, python-3.x, python-2.7, jsonp

我有运行和获取数据作为 JSON 对象的 api。如何将这些对象直接存储到数据库中？我们现在使用的数据库是 SQL Server 2008？我可以将这些数据直接存储到数据库中。

下一个问题是……我正在使用 Python。如何将输出（JSON 对象）导出到记事本中？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:19:43.360

要将 JSON 对象写入文件：

```
with open("myfile.txt", "w") as output:
    json.dump(myJSONobject, output) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:16:27.720

请详细说明有关存储在数据库中的信息。

通过记事本，我假设您的意思是将数据放入文本文件中。

```
my_string_to_write = json.dumps(your_raw_json_here) 
```

会给你一个可以直接写入文件的字符串。

# ios - 在 CGContext 上翻转旋转的文本

> ID：14607259
> 
> 赞同：3
> 
> 时间：2013-01-30T15:14:03.700
> 
> 标签：ios, objective-c, xcode, cgcontext

图片：http: [//i.stack.imgur.com/pbzar.png](http://i.stack.imgur.com/pbzar.png)

我想获得 90-270 度的文本（文本“Aroma 7”到“Aroma 17”），旋转 180 度。

我的代码：

```
 for (int i=0; i<24; i++) {
    CGContextSaveGState(context);
    CGContextRef context = UIGraphicsGetCurrentContext();
    NSString *str = [NSString stringWithFormat:@"Aroma %d", i];

    CGContextTranslateCTM(context, radius, radius);
    CGContextRotateCTM(context, i * 15 * M_PI/180.0);
    [[UIColor whiteColor] set];

    CGContextTranslateCTM(context, - (radius), -(radius));

    CGSize size = [str sizeWithFont:[UIFont fontWithName:@"Helvetica" size:12.0]
                     constrainedToSize:rect.size
                         lineBreakMode:(NSLineBreakByWordWrapping)];

    [str drawAtPoint:CGPointMake(((radius * 2) - 10) - size.width, radius) withFont:[UIFont fontWithName:@"Helvetica" size:12.0]];

    CGContextRestoreGState(context);
} 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T18:56:37.853

这应该产生想要的输出：

```
for (int i=0; i<24; i++) {
    CGContextSaveGState(context);
    CGContextRef context = UIGraphicsGetCurrentContext();
    NSString *str = [NSString stringWithFormat:@"Aroma %d", i];

    CGContextTranslateCTM(context, radius, radius);
    CGContextRotateCTM(context, i * 15 * M_PI/180.0);
    [[UIColor whiteColor] set];
    CGSize size = [str sizeWithFont:[UIFont fontWithName:@"Helvetica" size:12.0]
                  constrainedToSize:rect.size
                      lineBreakMode:(NSLineBreakByWordWrapping)];

    CGContextTranslateCTM(context, radius-10-size.width/2, size.height/2); // (1)
    if (i >= 7 && i <= 17)
        CGContextRotateCTM(context, M_PI); // (2)
    [str drawAtPoint:CGPointMake(-size.width/2, -size.height/2) withFont:[UIFont fontWithName:@"Helvetica" size:12.0]];

    CGContextRestoreGState(context);
} 
```

这个想法是将坐标系的原点移动到要绘制文本的矩形的中心（请参阅 参考资料`(1)`）。然后您可以简单地将文本旋转 180 度（请参阅 参考资料`(2)`）。

这是我的测试程序的输出：

![在此处输入图像描述](../Images/3bcd955976e514c1c07b3fe3dcb62bbc.png)

# ios - 如何在 NSUserDefaults\Core Data 中保存 FBProfilePictureView？

> ID：14607265
> 
> 赞同：1
> 
> 时间：2013-01-30T15:14:16.650
> 
> 标签：ios, objective-c, facebook, facebook-graph-api

我正在使用 Facebook 图表将用户的图像加载到 iOS 应用程序。然后将图像放置在 UIView 中以显示它。

如果互联网连接不可用，并且如果互联网可以从 Facebook 获取图像，我想展示相同的图片。

如何保存图像：

*   到 NSUserDefaults？
*   核心数据？
*   到 App 文件夹？

我以后如何检索它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:28:48.057

您正在谈论图像缓存 - 请记住，您不能在下载图像时无限存储图像（您的应用程序最终可能会占用太多磁盘空间）。您需要为清除所有这些数据定义一些标准——无论是未使用的数据还是可能过时的数据——这取决于您。有很多方法可以解决缓存问题，只要谷歌一下，我相信你会找到一些有用的东西。

至于存储图像 - 你想要做的是获取 UIImage 的数据（通过使用类似`UIImageJpegRepresentation`or的函数`UIImagePNGRepresentation`）。这些函数将返回一个 NSData 实例，该实例可以存储在 NSUserDefaults 中（不是图像缓存的地方），也可以存储在您的 Cache 目录中的文件中（更好，并且不会让 Apple 有充分的理由拒绝您的应用程序的不良存储做法）。

此外，不要意外地尝试在 FBProfilePictureView 实例上调用这些函数 - 这只是 Facebook 创建的用于显示个人资料图片的类（它实际上是一个 UIView，它具有个人资料图像的 UIImageView 子视图。在这个 UIImageView 中，您可以获得UIImage 本身）。[如何将 FBProfilePictureView 转换为 UIImage？](https://stackoverflow.com/questions/11889725/how-can-i-convert-fbprofilepictureview-to-an-uiimage)

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:40:13.560

这是使用 NSUserDefaults 缓存的示例

//节省

```
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:myImage];
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:data forKey:@"yourKeyImage"];
[defaults synchronize]; 
```

//得到

```
NSData *data = [[NSUserDefaults standardUserDefaults] objectForKey:@"yourKeyImage"];
NSData *received = [NSKeyedUnarchiver unarchiveObjectWithData:data];
UIImage *image = [UIImage imageWithData:received]; 
```

# ios - 您是否使用 UIActivityIndi cator 进行灰色半透明指令？

> ID：14607272
> 
> 赞同：0
> 
> 时间：2013-01-30T15:14:42.233
> 
> 标签：ios, objective-c

很明显，我是 iOS 新手。我正在寻找一个教程或类似的东西，它向我展示了如何创建一个灰色覆盖层，告诉用户如何使用该应用程序。它主要是由触摸驱动的，所以我想告诉用户在他们第一次使用应用程序做特定事情时应该触摸哪里。谢谢您的帮助！

另外，对于这样的一般问题，我是否在stackoverflow的正确部分发布？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:23:58.837

看看我的同一个问题 -[创建点击覆盖指令视图](https://stackoverflow.com/questions/12289756/create-click-through-overlay-instruction-view)

不过，您的问题与 无关`UIActivityIndicator`。

在您的`AppDelegate`中，您可以声明它是否应该仅在用户第一次打开应用程序时显示。它可以是你喜欢的任何东西。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:24:15.490

只需创建一个`UIView`窗口大小且`alpha`值 < 1（使用界面生成器）

然后添加`UILabels`或任何其他带有帮助信息的组件作为覆盖帮助的子视图。

当你想显示它时，只需将它的`hidden`属性更改为`NO`，当你想隐藏它时，将其更改`hidden`为`YES`

# css - 特定的 CSS 行（不是文件）取决于网页访问者的浏览器

> ID：14607274
> 
> 赞同：-2
> 
> 时间：2013-01-30T15:14:49.913
> 
> 标签：css, firefox, browser, compatibility

我有一个由**CSS**文件样式化的**HTML 。**问题是我有几个浏览器兼容性问题。为了解决我的所有问题，我需要添加新的**CSS**规则（边距或高度）来解决我的问题。我将需要更改 5-6 个 div，具体取决于网页访问者的浏览器。例如，让我们以一个特定的名字命名： ****`<div>``#main_menu`****

 ****```
#main_menu{
widht: 800px;
height: 35px;
line-height: 35px;
} 
```

现在，我需要根据 Web 浏览器添加新的 CSS 特定规则：

*   对于**Mozilla Firefox**，我需要设置：`height: 34;`而不是`height: 35;`
*   对于**Opera**，我需要设置：`top-margin: -3px;`
*   对于**Internet Explorer**，我需要设置：`top-margin: -2px;`

我试图做这样的事情，但不幸的是我不知道它是如何工作的：

```
#main_menu{
widht: 800px;
height: 35px;
line-height: 35px;

-moz-height: 34; /* for Firefox */
-o-top-margin: -3px; /* for Opera */
-ms-top-margin: -2px; /* for IE */
} 
```

PS：**CSS**代码在 Chrome 和 Safari 中运行良好。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:29:21.187

**你所问的不能用 CSS 来完成。**

CSS 规范提供的粒度级别是可选地包含特定文件（您已经知道）。结合某种程度的浏览器检测，您可以提供覆盖“基本”样式中存在的样式。

为此目的使用 Internet Explorer 的条件注释是很常见的：

```
<link rel="stylesheet" type="text/css" href="base.css" />
<!--[if IE]>
<link rel="stylesheet" type="text/css" href="all-ie-only.css" />
<![endif]--> 
```

供应商特定的前缀（-ms、-moz、-webkit 等）不适用于针对特定浏览器。它们是供应商提供的专有样式，用于提供一些正式的 CSS 规范中不存在的功能。通常，它们将是基于开发中的 CSS 规范的“实验性”属性，旨在随着规范的正式化而被弃用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:34:04.237

仅通过 CSS 来定位特定浏览器没有最佳实践方法。如评论中所述，供应商前缀（例如 ）`-moz`用于实验性或开发中的规范，并且在删除或“发布”该功能时从每个浏览器中删除。

如果您绝对必须进行浏览器定位，请尝试使用 JavaScript 来检测浏览器，并在 body 标签中添加一个标识类。然后，您可以编写如下规则：

```
body.firefox #main-menu { height: 34; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-15T20:37:30.113

简单的解决方案，只需使用这个 JS 库，您就可以轻松地为每个浏览器/操作系统组合应用样式：

[浏览器类.js](http://browserclass.org/)

这样，您将在 body 标记上获得一个类名，其中包含当前名称和浏览器版本以及使用的操作系统。

**在你的情况下：**

包含文件后：

```
<script src="js/browserclass.js"></script> 
```

全站设置，您的原始设置：

```
#main_menu{
  widht: 800px;
  height: 35px;
  line-height: 35px;
} 
```

Firefox 特定设置：

```
body.ff #main_menu{
    height: 34px
} 
```

Opera 特定设置：

```
body.opera #main_menu{
    top-margin: -3px;
} 
```

IE浏览器：

```
body.ie #main_menu{
    top-margin: -2px;
} 
```

注意：我建议按版本检查 IE，以确保您获得相同的最终结果 [如果 IE] statmenets 自 IE10 以来已被弃用，因此这是解决方案

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-31T09:06:15.760

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<style type="text/css">
#selector{ /* Chrome or Safari */
    background: green;
}

#selector{ /* Internet Explorer 8 or bigger vers. */
    background: pink\9;
}

@-moz-document url-prefix(){ /* Firefox */
#selector{
background: lime;
}
}

doesnotexist:-o-prefocus, #selector{ /* Opera */
  background: red;
}
</style>
</head>

<body>
<div id="selector" style="padding:100px;">ss</div>
</body>
</html> 
```****

# qt - 在paintEvent中绘制Qt控件并尊重样式表属性

> ID：14607276
> 
> 赞同：4
> 
> 时间：2013-01-30T15:14:51.427
> 
> 标签：qt, class, colors, qtstylesheets

Qt 中是否有一个类或方法来获取“border-color”、“border-style”等属性？

这对于基于当前选择的样式表创建和绘制自己的（派生的）控件可能很有用。

**示例**：

```
QPushButton {
    border: 3px solid red;
    background: blue;
    margin: 5px;
    padding: 10px;
} 
```

编码：

```
class QPushButtonCircle : public QPushButton {
}; 
```

QPushButtonCircle 将是一个圆形按钮。连边框都是圆形的。边框应为 3 像素宽，纯色和红色。背景应该是蓝色的。

我找不到任何方法期望在paintEvent中完全绘制并忽略任何样式表。但必须有更好的方法。

最好的应该是：

```
QCssStyle cssStyle = widget->...->getCssStyle();

QPen border = cssStyle->border(QCssStyle::Top);
QBrush background = cssStyle->background();
QMargins margins = cssStyle->margins();
QMargins padding = cssStyle->padding();
... 
```

这将允许我们绘制自己的控件，例如：

```
QStylePainter p(this);

QRect r = rect();
r.adjust(cssStyle->margins().left(), ...);

p.setPen(cssStyle->border());
p.setBrush(cssStyle->brush());
p.drawEllipse(r);

r.adjust(cssStyle->padding().left(), ...);
p.drawText(r, ...); 
```

一个更好的解决方案是使用`QStyle::drawControl`, `QStyle::drawPrimitive`... 来绘制类似的东西，但尊重 QPainterPath （或更简单的原语）而不是假设矩形控件。

在 Qt 中使用来自样式表的派生颜色创建所有者绘制控件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:53:55.203

> 我找不到任何方法期望在paintEvent中完全绘制并忽略任何样式表。但必须有更好的方法。

Qt 中的小部件是矩形，不能有任何其他形状。看看[盒子模型](http://doc.qt.digia.com/qt/stylesheet-customizing.html)。因此，任何其他方式都将与您尝试使用的方式一样棘手。

[有一个](http://qt-project.org/forums/viewthread/1623)使用[QGraphicView](http://doc.qt.digia.com/qt/qgraphicsview.html)的建议。

编辑：

我自己从未尝试过，但您可以尝试使用 a或 a[在按钮顶部设置所需形状的遮罩](http://qt-project.org/doc/qt-4.8/qwidget.html#setMask)。其他元素（颜色等）可以通过更新样式表来设置。*如果您可以使其工作，那么您知道什么*解决方案就不会那么痛苦，因为您不需要处理自定义绘制事件。`QBitmap``QRegion``css`

# c# - 同一个类中的多个方法中的 Assembly.Load() 来加载同一个程序集 - 最佳与否？

> ID：14607278
> 
> 赞同：-1
> 
> 时间：2013-01-30T15:14:59.957
> 
> 标签：c#, .net, reflection, assembly.load

我有一个包含多个方法（例如 Method1、Method2、Method3）的类，并且在每个方法中我加载一个程序集（每个方法中相同的一个）并调用某个方法（反射），如下所示：

```
void Method1() // error handling etc. omitted
{
    Assembly asm = Assembly.LoadFrom(path);

    Type type = asm.GetType(classname);
    MethodInfo methodInfo = type.GetMethod("MethodName", ...);
    var o = Activator.CreateInstance(type); 
    var result = methodInfo.Invoke(o, parameters);
} 
```

如果所有这些方法都加载相同的程序集，那么以这种方式进行反射在性能方面是否可行？然后代码如下所示：

```
obj.Method1(); // calls Assembly.Load()
obj.Method2(); // calls Assembly.Load()
obj.Method3(); // calls Assembly.Load() 
```

或者最好在单独的方法中仅加载一次程序集（可能还有 GetType），存储对类程序集属性的引用，并且内部方法（方法 1、方法 2、方法 3 ..）使用此引用而不是始终调用程序集。加载（）？这样，代码将类似于：

```
obj.LoadMyAssembly(); // calls Assembly.Load() and uses obj.MyAssembly property to store the reference
obj.Method1() // doesn't call Assembly.Load(), uses obj.MyAssembly instead
obj.Method2() // doesn't call Assembly.Load(), uses obj.MyAssembly instead
obj.Method3() // doesn't call Assembly.Load(), uses obj.MyAssembly instead 
```

它有什么不同吗？域等在代码中永远不会改变（甚至使用）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:48:52.213

据我所知，多次加载同一个程序集不会导致性能问题。但是，看看你的方法，有

```
var o = Activator.CreateInstance(type); 
```

您正在调用一个成员方法，绝对是该类型对象的一个​​新实例。

虽然它可能不会引起问题，但只是一种多余的行为，不是吗？我认为这只是浪费，并增加垃圾收集在你的堆上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:19:14.663

没有大的区别，因为程序集将在相同的上下文中加载。然后，如果程序集已经加载，即使你调用它也不会重新加载它`Assembly.LoadFrom(path);`

但是，如果您已经知道所有方法都在同一个程序集中，那么最好`Assembly.LoadFrom`只调用一次。

# scala - Scala DSL - 嵌套块引用父

> ID：14607279
> 
> 赞同：4
> 
> 时间：2013-01-30T15:15:01.707
> 
> 标签：scala, dsl

在 Scala 中使用 DSL，所以可以说我有这样的东西：

```
house {
  floor {
    bedroom("kids)
    bedroom("master")
  }
  floor {
    kitchen()
  }
} 
```

现在我想要的是在每个嵌套块上都有一个引用或引用封闭块上的函数。例如，效果是将地板添加到房屋，将卧室添加到地板等。

目前，我以一种可怕的方式执行此操作，即在每个嵌套级别更新一个全局堆栈以跟踪当前的“上下文”。此外，我当前的版本不是类型安全的，因为我可以在房子里添加一间卧室。

之前的另一个修订是

```
house {
  floor {
    bedroom("kids) +
      bedroom("master")
  } +
    floor {
      kitchen()
    }
} 
```

每个块返回一个小部件列表（+ 使用隐式将通用“事物”转换为“事物列表”，以便可以添加下一个“事物”）。一旦块返回，则添加返回的小部件列表。但我不喜欢强制使用 + ，因为它在许多页面上变得丑陋。

无论如何要融合两者？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:15:10.443

此方法使用可变字段在创建相关对象后设置子父关系：

```
/* Data classes */

class House(val floors: Seq[Floor])
class Floor(val name: String, val bedrooms: Seq[Bedroom]) { var house: House = _}
class Bedroom(val name: String) { var floor: Floor = _ }

/* Factory methods */

def house(floors: Floor*) = {
  val house = new House(floors)
  floors foreach (_.house = house)
  house
}

def floor(name: String)(bedrooms: Bedroom*) = {
  val floor = new Floor(name, bedrooms)
  bedrooms foreach (_.floor = floor)
  floor
}

def bedroom(name: String) = new Bedroom(name) 
```

这允许您以简洁和类型安全的方式创建房屋结构，如下所示：

```
val myHouse = 
  house(
    floor("first")(
      bedroom("joe")
    ),
    floor("second")(
      bedroom("anna"),
      bedroom("clara")
    )
  )

assert(myHouse.floors(0).house == myHouse)
assert(myHouse.floors(1).house == myHouse)
assert(myHouse.floors(0).bedrooms(0).floor == myHouse.floors(0))
assert(myHouse.floors(1).bedrooms(1).floor == myHouse.floors(1)) 
```

将常见行为分解为一​​些基本特征或方法应该相当容易，例如，迭代子组件以修复关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:48:57.780

你真的需要每个块都有对封闭块的引用吗？还是只是为了将嵌套块添加到父块？在这种情况下，您可以简单地将嵌套块传递给封闭块，可以这么说：

```
house (
  floor (
    bedroom("kids"),
    bedroom("master")
  ),
  floor (
    kitchen
  )
) 
```

使用以下定义：

```
trait HouseElement
case class house( elements: HouseElement* )
trait FloorElement
case class floor( elements: FloorElement * ) extends HouseElement
case class bedroom( name: String ) extends FloorElement
case object kitchen extends FloorElement 
```

否则，另一种解决方案是严重依赖匿名类（不幸的是，这需要在`new`任何地方使用关键字）：

```
new house {
  new floor {
    new bedroom("kids")
    new bedroom("master")
  }
  new floor {
    new kitchen()
  }
} 
```

使用以下定义：

```
import collection.mutable.Buffer
class house {
  val elements = Buffer[Element]()
  trait Element {
    elements += this 
  }        
  class floor extends Element { 
    val elements = Buffer[Element]()
    trait Element {
      elements += this 
    }        
    class bedroom(name: String) extends Element 
    class kitchen extends Element
  }
} 
```

# c# - 自定义 CommonFileDialog 到文件夹和文件选择器

> ID：14607281
> 
> 赞同：1
> 
> 时间：2013-01-30T15:15:07.147
> 
> 标签：c#, windows-api-code-pack

我正在尝试在 C# 中创建一个文件和文件夹对话框。（只是一个警告：我会否决所有`FolderBrowserDialog`建议。那个对话是对大自然的憎恶）

目前我正在使用`CommonOpenFileDialog`在 WindowsApiCodePack 中找到的，它具有属性`IsFolderPicker`，使对话框仅成为文件夹选择器。但是我的用户需要能够选择文件或文件夹。

所以我正在寻找一个对话框，它可以让我选择文件和文件夹。手段无所谓。C#、WPF、WindowsApiCodePack、Ookii 对话框、C++、P/Invoke、Com+、Win32、VB 等...

我只需要一个控件，让我可以选择一个文件或文件夹，我可以从 C# 调用它，并且具有默认的 Windows OpenFileDialog 外观。这可能吗，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:37:18.233

`FolderBrowser`几年前我定制了对话框。我让它显示输入字段，用户可以在其中指定路径而无需浏览它。我*认为*可以自定义显示文件和文件夹。

这就是我进行自定义的方式：

我使用 .NET Reflector 来反汇编 .NET 的代码`FolderBrowserDialog`。我将反汇编代码保存为`MyFolderBrowserDialog`.

在反映的代码中，我发现调用了接受结构作为参数`FolderBrowserDialog`的非托管 windows 函数。该结构的成员是一个标志值，可以位掩码以包含您要使用的功能。[`SHBrowseForFolder`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762115%28v=vs.85%29.aspx)[`BROWSEINFO`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773205%28v=vs.85%29.aspx)`BROWSEINFO``ulFlags`

在位`MyFolderBrowserDialog`掩码`BIF_EDITBOX (0x00000010)`中`ulFlags`获取输入字段。

根据文档，如果您对其进行位掩码`BIF_BROWSEINCLUDEFILES (0x00004000)`，`ulFlags`则应该包括文件和文件夹，从而解决您的问题。

我实际上并没有尝试让它显示文件，但我认为它可能值得一试。

希望这可以帮助！

# php - JQuery 中的 PHP 和 JSON

> ID：14607282
> 
> 赞同：0
> 
> 时间：2013-01-30T15:15:13.043
> 
> 标签：php, jquery, json

我正在用 php 生成一个 json 文件并将其存储在我的服务器上。这是导出json的代码

```
/**
 * FUNCTIONS TO EXPORT AS JSON
 */
public function expose() {
    return array(
             'guid' => $this->guid,
               'title' => $this->title,
               'folder' => $this->folder,
               'owner' => $this->owner,
                 #'pictures' => json_encode(array_values($this->pictures), JSON_FORCE_OBJECT),
                 'excude' => $this->excude,
                 'added' => $this->added,
                 'lastViewed' => $this->lastViewed,
        );
    #return get_object_vars($this);
}

public function toJSON(){
    return json_encode($this->expose(), JSON_FORCE_OBJECT);
} 
```

该文件的内容是这样的：

> {"guid":"","title":"Sample Gallery","folder":"sampleGallery","owner":"","excude":true," added":"","lastViewed":" "}

然后在我的 html 文件中，我尝试使用 jquery 加载它，但我无法将对象获取到控制台

```
$.getJSON('/files/galleries/index/sampleGallery.gallery', function(data) {
    console.log(data); // works!
var jsonObj = jQuery.parseJSON(data); 
for (key in jsonObj) {
    console.log(key+':'+JSON.stringify(jsonObj[key]));
}
}); 
```

请注意，json 的加载工作正常！

有人可以告诉我我做错了什么吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:18:12.130

您不需要调用 parseJSON()，因为数据已经是一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:17:02.393

我认为您的数据已经被解析，因为您调用了 getJSON，您应该直接访问该`data`对象并避免`jQuery.parseJSON(data);`调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T15:17:05.730

你不必这样做`var jsonObj = jQuery.parseJSON(data);`。[jQuery.getJson](http://api.jquery.com/jQuery.getJSON/)在调用成功回调之前将返回的值解析为 json 对象。

你的代码应该是

```
$.getJSON('/files/galleries/index/sampleGallery.gallery', function(data) {
    console.log(data); // works!
    for (key in data) {
        console.log(key+':'+JSON.stringify(data[key]));
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T15:17:41.483

如果您将数据作为 JSON 返回，则无需再次解析。JQuery 已经为您做到了。

```
$.getJSON('/files/galleries/index/sampleGallery.gallery', function(data) {
    console.log(data); // works!
    for (key in data) {
        console.log(key+':'+JSON.stringify(data[key]));
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T15:18:43.027

大概`data`包含解析的 JSON（即一个 JavaScript 对象）。

试图解析一个 JavaScript 对象，就好像它是一个包含 JSON 的字符串一样是行不通的。

摆脱`var jsonObj = jQuery.parseJSON(data);`然后`for (var key in data) {`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T15:19:45.563

data 已经是一个对象，不需要解析它。

只需阅读手册：[http ://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-30T15:19:51.150

您无需再做`jQuery.parseJSON(data)`任何事情，因为您正在使用`getJSON`.

在此处查看文档：http: [//api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

我认为你的代码应该是：

```
$.getJSON('/files/galleries/index/sampleGallery.gallery', function(data) {
    console.log(data); // works!
// jsonObj removed, just use data since data is in JSON already
for (key in data) {
    console.log(key+':'+JSON.stringify(jsonObj[key]));
}
}); 
```

# mysql - mysql函数中的ibatis和分隔符

> ID：14607288
> 
> 赞同：3
> 
> 时间：2013-01-30T15:15:32.563
> 
> 标签：mysql, ibatis, mybatis, delimiter

我尝试在 ibatis 迁移脚本中使用[Big DBA Head的以下示例。](http://www.bigdbahead.com/?p=185)

```
delimiter //
drop function if exists true_function //
create function true_function(p_param int) returns int
  deterministic
  sql security invoker
  return true
//

drop function if exists get_next_value//
create function get_next_value(p_name varchar(30)) returns int
  deterministic
  sql security invoker
begin  
  declare current_val integer;

  update mysql.sequences 
    set value = value + 1
    where name = p_name 
      and true_function((@current_val := mysql.sequences.value) is not null);

  return @current_val;
end//
delimiter ; 
```

但是ibatis会抛出这个错误：

> ...执行错误：分隔符 // 如果存在则删除函数 get_next_value_test // 创建函数 get_next_value_test(p_name varchar(30)) 返回 int 确定性 sql 安全调用程序开始
> 声明 current_val 整数。原因：com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'delimiter //... 附近使用的正确语法

我已经尝试设置 allowMultiQueries 和 send_full_script 但没有成功。你有什么想法让这个脚本执行吗？

谢谢，T。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-03-28T03:04:55.533

我遇到了同样的问题...

以下网站似乎提供了这个问题的答案。

[https://github.com/mybatis/migrations/issues/49](https://github.com/mybatis/migrations/issues/49)

诚然，它使用的是 MyBatis 而不是 iBatis，但考虑到 iBatis 已经“退休”，这可能是一个不错的举措。

更换的基本答案

```
delimiter // 
```

和

```
-- @DELIMITER // 
```

然后替换

```
delimiter ; 
```

和

```
-- @DELIMITER ; 
```

# javascript - 带有变量的 ResolveUrl 获得“字符文字中的字符过多”错误

> ID：14607292
> 
> 赞同：0
> 
> 时间：2013-01-30T15:15:42.453
> 
> 标签：javascript

我见过的所有使用 ResolveUrl 的示例都有一个文字路径，如下所示：

```
window.location='<%= ResolveUrl("~/Account/Login.aspx") %>' 
```

但是，我已经从 Infragistics WebDataMenu 的菜单上下文中解析了我希望重定向到的 URL，并且我正在尝试将该变量传递到 ResolveUrl。我正在使用的功能在这里：

```
 function menuMain_ItemSelected(sender, e) {
        var menuContext = e._context.adr;
        var intPartOfMenuContext = parseInt(menuContext);
        if (menuContext !== intPartOfMenuContext.toString()) {
            var selectedURL = e._props[2]._element.childNodes[0].href;
            window.location = '<%= ResolveUrl(' + selectedURL + ') %>';
        } 
    } 
```

问题是我在 ResolveUrl 行上收到“字符文字中的字符太多”错误。

selectedURL 的示例如下：

```
"http://localhost:52168/ITRequest/Person.aspx?MenuTitle=Users" 
```

仅供参考：最终，我要做的是使 WebDataMenu 工作，以便用户单击它以打开菜单，然后再次单击以选择并重定向到所选页面。但是，显然，如果 ActivateOnHover="False" （我需要），则该控件仅响应向下箭头并在打开菜单后按 Enter 键。所以，如果我遗漏了一些更明显的东西，我会全神贯注。

谢谢，丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T21:09:16.940

我知道这是旧的，但为了更好的参考，这里是你如何正确地完成你想要做的事情：

```
function menuMain_ItemSelected(sender, e){
    var selectedURL = /*Your code goes here*/;
    window.location.href = ResolveUrl(selectedURL);
}

function ResolveUrl(url) {
    var baseUrl = '<%= ResolveUrl("~/") %>';
    if (url.indexOf("~/") == 0) {
        url = baseUrl + url.substring(2);
    }
    return url;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T16:00:36.687

显然，这是一个走得太远的例子。我找到的解决方案是完全从该行中删除 ResolveUrl ，留下下面的行，这对我有用。

```
window.location = selectedURL; 
```

# windows - windows命令行获取最近x分钟修改的文件

> ID：14607294
> 
> 赞同：1
> 
> 时间：2013-01-30T15:15:50.260
> 
> 标签：windows, command-line

我想从 Windows 文件夹中获取文件，然后根据上次修改的日期和时间将它们复制到另一个文件夹中。

有没有办法比较批处理文件中的日期时间？

我的意思是获取上次文件修改的分钟小时日月年并将其与当前系统分钟小时日月年进行比较？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:49:11.713

首先我正在做

```
@Echo Off

For /f "tokens=1,2,3 delims=-" %%a in ('date /t') do (set mydateDD=%%a&& set mydateMM=%%b&& set mydateYY=%%c)
For /f "tokens=1,2 delims=:" %%a in ('time /t') do (set mytimeHH=%%a&& set mytimeMM=%%b)
echo _%mydateDD%_
echo _%mydateMM%_
echo _%mydateYY%_
echo _%mytimeHH%_
echo _%mytimeMM%_
echo %date%=date
echo %time%=time 
```

结果非常接近，但在年份部分我得到了一个不酷的空间：

*30* _01_ _2013 _ *21* _47_ 30-01-2013=日期 21:47:35,93=时间

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-31T06:43:41.477

好吧，为什么不使用 xcopy... 哎呀

```
xcopy c:\test_CMD\COLLECT c:\test_CMD\EXTRACT /D:%mm%-%dd%-%yyyy% /M

Syntax
      XCOPY source [destination] [options]

Key
   source      : Pathname for the file(s) to be copied.

   destination : Pathname for the new file(s).

   [options] can be any combination of the following:

Source Options

   /A           Copy files with the archive attribute set (default=Y)

   /M           Copy files with the archive attribute set and
                turn off the archive attribute, use this option
                when making regular Backups (default=Y)

   /H           Copy hidden and system files and folders (default=N)

   /D:mm-dd-yyyy
                Copy files changed on or after the specified date.
                If no date is given, copy only files whose
                source date/time is newer than the destination time.

   /U           Copy only files that already exist in destination.

   /S           Copy folders and subfolders

   /E           Copy folders and subfolders, including Empty folders.
                   May be used to modify /T.

   /EXCLUDE:file1[+file2][+file3]...

               The files can each contain one or more full or partial
               pathnames to be excluded.
               When any of these match any part of the absolute path of
               a SOURCE file, then that file will be excluded.
               For example, specifying a string like \obj\ or .obj will exclude
               all files underneath the directory obj or all files with the
               .obj extension respectively.

Copy Options

   /W           Prompt you to press a key before starting to copy.
   /P           Prompt before creating each file.

   /Y           Suppress prompt to confirm overwriting a file.
                may be preset in the COPYCMD env variable.
   /-Y          Prompt to confirm overwriting a file.

   /V           Verify that the new files were written correctly.
   /C           Continue copying even if an error occurs.

   /I           If in doubt always assume the destination is a folder
                e.g. when the destination does not exist.

   /Z           Copy files in restartable mode. If the copy is interrupted part
                way through, it will restart if possible. (use on slow networks)

   /Q           Do not display file names while copying.
   /F           Display full source and destination file names while copying.
   /L           List only - Display files that would be copied.

Destination Options

   /R           Overwrite read-only files.

   /T           Create folder structure, but do not copy files. Do not
                include empty folders or subfolders. 
                /T /E will include empty folders and subfolders.

   /K           Copy attributes. XCOPY will otherwise reset read-only attributes.

   /N           If at all possible, use only a short filename (8.3) when creating
                a destination file. This may be necessary when copying between disks
                that are formatted differently e.g NTFS and VFAT, or when archiving 
                data to an ISO9660 CDROM.

   /O           Copy file Ownership and ACL information.

   /X           Copy file audit settings (implies /O).
XCOPY will accept UNC pathnames 
```

> 永远不要重新发明轮子：p

# sql - 拆分列中的数据（如果 of 不是 null 数据为 null）

> ID：14607295
> 
> 赞同：-6
> 
> 时间：2013-01-30T15:15:51.437
> 
> 标签：sql

```
list    dept_no 
-----   -------
kamam       200
salam       300
galam       400 
```

必需的表是：

```
id        dept_no
-----     -------
kamam      null
null       200 
salam      null
null       300
galam      null
null 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:36:51.007

使用 a`UNION ALL`似乎正在工作：

```
select list, dept_no
from
(
  select id, list, null as dept_no
  from emp
  union all
  select id, null , dept_no
  from dept
) 
order by id, list 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/db3b9/9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:11:11.610

如果您希望得到以下格式的结果：

```
t dept_no
1 null
null 200
2 null
null 300
3 null
null 400 
```

然后使用以下查询：

```
select t, NULL as dept_no
from table
union all
select NULL as t, dept_no
from table 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T15:44:24.550

你只是想要这个联盟吗？

```
select id, NULL as dept_no
from t
union all
select NULL as id, dept_no
from t 
```

# javascript - 当我使用 jquery 在可编辑的 div 中编写时，实时样式

> ID：14607298
> 
> 赞同：1
> 
> 时间：2013-01-30T15:15:58.727
> 
> 标签：javascript, jquery, css, html, styles

我有**[这个小提琴](http://jsfiddle.net/gamito/KWmrf/4/)**显示我想要做什么。基本上，我想在输入某些单词时为我的文本设置样式。这种样式将通知用户他们用于构建查询的语法是正确的。

```
$(function () {
$('.textarea').focus();
$('.textarea').keyup(function () {
    var a = $(this).text().split(" ").join("</span> <span>");
    a = "<span>" + a + "</span>";
    $('.result').html(a);

    $('.result').find(":contains('where')").addClass('where marker').next().addClass('where value');
    $('.result').find(":contains('since')").addClass('since marker').next().addClass('since value');
});
});

// try writing 'hero where London since 2008' in textarea 
```

它在另一个 div （结果）中工作，但我真正想要的是样式输出与我编写的 div 相同（textarea），

任何人都可以看看它并提供帮助吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:52:49.813

看着你的小提琴，我将它设置为使用 jQuery 1.9 并放入你的代码和一些 HTML/CSS，它似乎正在做你想做的事。

HTML：

```
<div class="textarea" contenteditable></div>
<div class="result"></div> 
```

CSS：

```
.textarea {
    min-height: 20px;
    background-color: black;
    color: white;
}
.marker {
    color: red;
}

.value {
    color: blue;
} 
```

JS：

```
$('.textarea').keyup(function () {
    var a = $(this).text().split(" ").join("</span> <span>");
    a = "<span>" + a + "</span>";
    $('.result').html(a);

    $('.result').find(":contains('where')").addClass('where marker').next().addClass('where value');
    $('.result').find(":contains('since')").addClass('since marker').next().addClass('since value');
}); 
```

结果： ![小提琴结果](../Images/4b75c2bd7592b874f344ee3bf736f1de.png)

这是您想要发生的事情，还是应该有所不同？

# html - CSS - 将块与视口边缘右对齐，但有限制

> ID：14607299
> 
> 赞同：0
> 
> 时间：2013-01-30T15:16:00.360
> 
> 标签：html, css

我有一个带有彩色背景的标题栏，里面有一些右对齐的菜单项。标题栏应拉伸视口的整个宽度，并具有最小宽度以避免缩小到站点主体的（固定）宽度以下。即使标题栏扩展得更宽，内部的菜单项也应与网站的主体保持右对齐。到目前为止很容易：http: [//jsfiddle.net/symposion/fgrGD/](http://jsfiddle.net/symposion/fgrGD/)

```
<div class="headerBar">
  <div class="headerMenu">
    Some item
  </div>
</div>
<div class="mainContent">
</div>

.headerBar {
  margin-top:30px;
  background-color:black;
  color:white;
  min-width:400px;
  padding-top:10px;
  padding-bottom:10px;
}

.headerMenu {
  text-align:right;
  max-width:400px;
  margin-left:auto;
  margin-right:auto;
}

.mainContent {
  width:400px;
  margin-left:auto;
  margin-right:auto;
  background-color:blue;
  height:100px;
} 
```

变得复杂的地方是，当浏览器的大小调整为小于主站点的最小宽度时，我*还*希望菜单向左移动（同时仍保持与屏幕边缘对齐），以充分利用剩余空间。这样做的天真方法是从标题栏中删除最小宽度，但这显然意味着当您向右滚动时会出现令人讨厌的空白间隙。

约束：

*   我无法将标题设置为固定高度，它需要根据其内容进行扩展和收缩
*   没有JS
*   理想情况下，我想避免标题中出现大量冗余标记；如果这是唯一的方法，我可以忍受一点。
*   需要在 IE8+、Firefox、Chrome、Safari、iOS 上工作

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:24:36.613

您需要使用称为媒体查询的东西。

> 媒体查询是一个真或假的逻辑表达式。如果媒体查询的媒体类型与正在运行用户代理的设备的媒体类型匹配（如“适用于”行中定义的那样），则媒体查询为真，并且媒体查询中的所有表达式都为真。

例子：

```
@media screen and (max-width: 765px) {
    ...styles...
} 
```

jsFiddle：http: [//jsfiddle.net/uRaMS/](http://jsfiddle.net/uRaMS/)

来源：[http ://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

# javascript - 如果我使用@Styles.Render()，是否有必要向@Html.Requires() 注册脚本？

> ID：14607301
> 
> 赞同：1
> 
> 时间：2013-01-30T15:16:02.637
> 
> 标签：javascript, asp.net, asp.net-mvc-3, asp.net-mvc-4

我是一个 asp net mvc 4 应用程序，我正在其中集成一个 asp net mvc 3 应用程序。我已经导入了所有 js 和 css 脚本并使用捆绑包引用它。

问题是这个 asp net mvc 3 应用程序有几个 @Html.Requires() （每个 js 和 css 文件一个。）。

由于我从未使用过 asp net mvc 3 进行开发，因此我不确定那些 @Html.Requires() 是否必要。我在 microsoft msdn 中找到的文档也没有多大帮助。

# c++ - 在 OpenGL 和 FreeType 库中应用字体样式

> ID：14607306
> 
> 赞同：0
> 
> 时间：2013-01-30T15:16:13.510
> 
> 标签：c++, opengl

我需要使用 openGL 和 freetype 库在我的应用程序 (c++) 中显示文本。从现在开始，我可以绘制此文本，但不能指定字体样式。有没有人知道这个问题的根源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:20:26.667

FreeType 不提供从字体名称到实际文件名的“映射表”。一种字体包含一个字符集合，每个字符都具有一种样式。因此，如果您有，例如“arial.ttf”文件并且它不是斜体，那么您必须找到包含斜体版本的“arial_italic.ttf”文件。不要理解我的错误：添加“_italic”后缀不会给你正确的文件名:)

这里有一个讨论[http://lists.gnu.org/archive/html/freetype/2009-04/msg00020.html](http://lists.gnu.org/archive/html/freetype/2009-04/msg00020.html)

编辑（删除线和下划线）：

这两种效果都是简单的水平线。您所要做的就是指定线条的粗细和垂直位置。一些 FreeType 的加载器包含加载 StrikeoutSize/StrikeoutPosition 和 UnderlineThickness/UnderlinePosition 的代码。我自己没有这样做，所以只需使用“删除”搜索词查看来源。

# c# - 接口中的类型约束适用于基类

> ID：14607310
> 
> 赞同：6
> 
> 时间：2013-01-30T15:16:28.793
> 
> 标签：c#, generics, type-constraints

我有一个基类，它定义了一个像这样的泛型方法：

```
public class BaseClass
{
    public T DoSomething<T> ()
    { ... }
} 
```

由于这个类是由第三方提供的并且没有接口，我正在定义一个接口，该接口定义了该类中实际需要的方法。这样我就得到了松耦合，实际上可以用其他东西交换那个第三方类。对于此示例，请考虑以下接口：

```
public interface ISomething
{
    T DoSomething<T> ()
        where T : Foo;
} 
```

如您所见，它定义了相同的方法，但也对类型参数应用了类型约束，这来自与此无关的一些其他要求。

接下来，我定义了一个子类型，`BaseClass`它也实现了`ISomething`. 此类将用作接口背后的常用实现——而接口将是应用程序的其余部分将访问的内容。

```
public class Something : BaseClass, ISomething
{
    // ...
} 
```

由于`DoSomething`in`BaseClass`已经支持任何类型参数`T`，它应该特别支持类型参数，它是 的子类型`Foo`。所以人们会期望一个子类型`BaseClass`已经实现了接口。但是我收到以下错误：

> 方法“BaseClass.DoSomething()”的类型参数“T”的约束必须匹配接口方法“ISomething.DoSomething()”的类型参数“T”的约束。考虑改用显式接口实现。

现在，我有两种可能；第一个是做错误提示的事情并明确地实现接口。第二个是使用隐藏基本实现`new`：

```
// Explicit implementation
T ISomething.DoSomething<T> ()
{
    return base.DoSomething<T>();
}

// Method hiding
public new T DoSomething<T>()
    where T : Foo
{
    return base.DoSomething<T>();
} 
```

两者都有效，尽管我可能更喜欢第二种解决方案来保持该方法可以从类本身访问。但是它仍然留下以下问题：

当基类型已经使用不太严格（读取：无）类型约束实现它时，为什么我必须重新实现该方法？为什么该方法需要完全按原样执行？

**编辑：**为了赋予该方法更多意义，我将返回类型从 更改`void`为`T`。在我的实际应用程序中，我有通用参数和返回值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:29:03.220

尝试使用组合而不是继承来实现`Something`：

```
public class Something : ISomething
{
    private readonly BaseClass inner = ...;

    void DoSomething<T>() where T : Foo
    {
        inner.DoSomething<T>();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:41:55.760

当然，给定的代码可以安全地编译和运行：

当一个`Something`实例被键入为`Something`或`BaseClass`编译器将允许任何类型时`T`，而当相同的实例被键入时，`ISomething`它只允许类型继承`Foo`。在这两种情况下，您都可以像往常一样获得静态检查和运行时安全性。

**事实上，上述场景*正是*你`ISomething`显式实现时发生的情况。**因此，让我们看看我们可以提出哪些论据来支持和反对当前的事态。

为了：

*   提议的解决方案并非适用于所有情况；它取决于确切的方法签名（类型参数是协变的吗？逆变的？不变的？）
*   它不需要用说明如何处理此类情况的新文本来修改规范
*   它使代码自我记录——你不必学习所说的文本；当前关于显式接口实现的规则就足够了
*   它不会增加 C# 编译器团队的开发成本（文档、功能实现、测试等）

反对：

*   你需要输入更多

考虑到上述情况以及这不是日常情况的事实，恕我直言，要得出的结论很明确：这*可能*很好，但它当然不保证您会不遗余力地实施它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T15:43:35.457

你可以用下面的代码得到你想要的。通过在接口定义中包含类型参数，您可以使其看起来满足编译器的协变。该类`Base`保持不变，您可以隐藏`Base`实现并使用单个方法实现接口。

```
class Program
{
    static void Main()
    {
        var something = new Something<Foo>();
        var baseClass = (BaseClass)something;
        var isomething = (ISomething<Foo>)something;

        var baseResult = baseClass.DoSomething<Bar>();
        var interfaceResult = isomething.DoSomething<Bar>();
        var result = something.DoSomething<Bar>();
    }
}

class Foo 
{
}

class Bar : Foo
{
}

class BaseClass
{
    public T DoSomething<T>()
    {
        return default(T);
    }
}

interface ISomething<out T> where T : Foo
{
    T DoSomething<T>();
}

class Something<T> : BaseClass, ISomething<T> where T : Foo
{
    public new T DoSomething<T>()
    {
        return default(T);
    }
} 
```

* * *

或者如果你真的不想`Foo`在实例化中指定

```
class Program
{
    static void Main()
    {
        var something = new Something();
        var baseClass = (BaseClass)something;
        var isomething = (ISomething)something;

        var baseResult = baseClass.DoSomething<Bar>();
        var interfaceResult = isomething.DoSomething<Bar>();
        var result = something.DoSomething<Bar>();
    }
}

class Foo 
{
}

class Bar : Foo
{
}

class BaseClass
{
    public T DoSomething<T>()
    {
        return default(T);
    }
}

interface ISomething
{
    T DoSomething<T>;
}

interface ISomething<S> : ISomething where S : Foo
{
    new R DoSomething<R>() where R : Foo;
}

class Something : BaseClass, ISomething
{
    public new T DoSomething<T>()
    {
        return default(T);
    }
} 
```

# json - 在 Sencha Touch 2 中通过代理将数据加载到存储时的自定义字段解析

> ID：14607314
> 
> 赞同：0
> 
> 时间：2013-01-30T15:16:41.917
> 
> 标签：json, proxy, sencha-touch-2, store, data-mapping

我试图找出解析由 ST2 商店上的 REST 代理检索的数据的最佳方式/位置。我希望能够深入控制字段的映射。数据包含不映射到模型中任何字段的字段，我无法控制响应中接收到的数据。我想有选择地映射我想要的字段，同时忽略其他字段。

使用自定义代理是最好的方法吗？如果是这样，我会覆盖什么方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:28:53.437

您可以在模型的字段上使用[映射](http://docs.sencha.com/touch/2-1/#!/api/Ext.data.Field-cfg-mapping)和[转换的组合。](http://docs.sencha.com/touch/2-1/#!/api/Ext.data.Field-cfg-convert)

```
Ext.define('Dude', {
    extend: 'Ext.data.Model',
    fields: [
        {
            name: 'name',
            mapping: 'dude.name',
            convert: function(value, record) {
                return value.replace('>', '');
            }
        }
    ]
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T19:31:50.527

我可以通过为模型类中的每个字段设置映射属性来解决这个问题。如果您使用的是 JSON 代理，这就像指定包含该值的对象的 JSON 路径一样简单。

```
Ext.define('MyApp.model.Category', {
    extend: 'Ext.data.Model',

    config: {
        idProperty: 'id',
        fields: [
            { name: 'id', type: 'int' },
            { name: 'category_title', type: 'string' },
            { name: 'category_description', type: 'string' },
            { name: 'category_parent', type: 'int', mapping: 'category_parent.id' }
        ]

}); 
```

# javascript - 初始页面加载后 AJAX 未触发

> ID：14607315
> 
> 赞同：-1
> 
> 时间：2013-01-30T15:16:42.853
> 
> 标签：javascript, jquery, ajax

嗨，我有一个按钮组，当所选按钮更改时，应该触发 ajax 调用。

```
 <div class="btn-group" id="graphSelection">
            <button type="button" class="btn disabled btn-info" id="post" onclick="graphSelection(this.id)">Posts</button>
            <button type="button" class="btn" id="comment" onclick="graphSelection(this.id)">Comments</button>
            <button type="button" class="btn" id="interaction" onclick="graphSelection(this.id)">All Interaction</button>
        </div> 
```

然后是 javascript/jquery 和 ajax

```
var postData;
var commentData;
var interactionData;

function graphSelection(clickedID) {
if(!$('#' + clickedID).hasClass('disabled')) {
    $('#graphSelection').find('button.disabled').removeClass('disabled btn-info');
    $('#' + clickedID).addClass('disabled btn-info');

    loadGraphs(clickedID);
}
} 
```

这第一个 javascript 只是更改各个按钮的 css，然后在包含 ajax 的下一个 javascript 函数上调用加载图。

```
function loadGraphs(type) {
if ((type == "post" && !postData) || (type == "comment" && !commentData) || (type == "interaction" && !interactionData)) {
    $.ajax({
        url : 'parts/' + type + '_graph.php',
        cache: false,
        type : 'POST',
        data : data,
        dataType : 'json',
        beforeSend: function() {
            $("#report-loading").fadeIn(500);
        },
        success : function (jsonData) {
                    alert(type);
            if (type == "post")
                postData = jsonData;
            else if (type == "comment")
                commentData = jsonData;
            else if (type == "interaction")
                interactionData = jsonData;

            drawChart(jsonData);
            $("#report-loading").fadeOut(500);
        },
        error : function () {
            $("#report-loading").fadeOut(500);
            alert("error");
        }
    })
}
else if (type == "post") {
    drawChart(postData);
}
else if (type == "comment") {
    drawChart(commentData);
}
else if (type == "interaction") {
    drawChart(interactionData);
}
} 
```

在这一个中，我检查了我想加载的图表的类型，然后检查我之前是否加载过数据。如果没有，则触发 ajax 并检索所需的数据。当页面完成加载后，ajax 会自动调用一次并使用一种帖子，但是如果我使用按钮组中的按钮，它会进入 loadGraphs 函数，但 ajax 似乎被“跳过”

任何帮助将不胜感激。

**更新 1** var postData; var 评论数据；var 交互数据；

在与其他 javascript 函数相同的脚本标记内定义在顶部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:29:43.783

这是因为使用的变量。将数据变量`post`,`comment`和分别更改`interation`为`postData`,`commentData`和`interactionData`。

然后将`if`条件更改为

```
if ((type == "post" && !postData) || (type == "comment" && !commentData) || (type == "interaction" && !interactionData)) { 
```

并更改 ajax 回调。

变量`post`是指`button id="post"`元素，其他变量也一样，我认为是因为`id`元素是全局暴露的，但不知道为什么。

您还需要将全局变量定义为

```
<script type="text/javascript">
    var postData, commentData, interactionData;
</script> 
```

问题演示：[小提琴](http://jsfiddle.net/arunpjohny/pFB9p/) 解决方案演示：[小提琴](http://jsfiddle.net/arunpjohny/pFB9p/6/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T15:34:31.443

这不是问题的答案，并且在评论中发布的代码太多。为什么要使用内联处理程序？使用 jQuery 的强大功能。

```
function graphSelection () { 
    var clickedID = this.id;
    $(this)
        .addClass("disabled btn-info")
        .siblings()
            .removeClass("disabled btn-info");
    loadGraphs(clickedID);
}

$("#graphSelection").on("click", "button", graphSelection); 
```

您的问题是基于浏览器将变量`post`,设置为指向 html 节点的事实`comment`，`interaction`因为看起来您从未定义过它们。

我期待看到

```
var post, comment, interaction; 
```

或者

```
var post = false, 
    comment = false, 
    interaction = false; 
```

在你的代码中。

也在哪里`data`定义？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T15:26:43.367

可能是您的`type`参数没有被填充。

使用 jquery 的一种更简洁的方法是将事件侦听器添加到您的按钮中，这将根据您的需要调用带有 ID 的函数。

```
$(':button.btn').click(function(){
if(!$(this).hasClass('disabled')) {
    $('#graphSelection').find('button.disabled').removeClass('disabled btn-info');
    $(this).addClass('disabled btn-info');

    loadGraphs(this.id);
}
}); 
```

# python - 线程化 python 和 C 绑定同步

> ID：14607316
> 
> 赞同：1
> 
> 时间：2013-01-30T15:16:43.137
> 
> 标签：python, cpython, python-bindings

我正在为我的一个实时 C 库实现 Python 绑定。我读过 Python 中的线程不是真正的线程，它们并没有真正并行运行（因为全局解释器锁）。不过，我将不得不考虑以下情况。

想象一下下面的 C 函数：

```
int stoppable_lock(mutex *m, bool *stop)
{
    while (!stop || !*stop)
        if (timed_lock(m, SOME_TIME) == SUCCESS)
            return SUCCESS;
    return DIDNT_LOCK;
} 
```

此函数等待互斥体，但通过使用`stop`, 可以取消。在最简单的情况下，能够优雅地停止使用它的线程，无论互斥锁的其他用户发生什么（例如，如果他们在持有锁时死亡）。

我的问题是弄清楚如何为这个函数编写一个 Python 包装器。通过解析参数（带`PyArg_ParseTuple`）我可以检索互斥锁，没问题。但是，可以发送给函数的东西的类型[似乎是](http://docs.python.org/2/c-api/arg.html)字符串、数字和对象。前两个显然不能代替 a `bool *`，我怀疑为它编写一个包装器`bool *`是个好主意。

我的问题是，我怎样才能获得一个参数，它是对变量的引用（与其他 python 线程共享），而不仅仅是它的副本？

这是我缺少的部分的功能（用于类似的用法`mutex.stoppable_lock(stop)`）：

```
static PyObject *_stoppable_lock(_mutex *obj, PyObject *args)
{
    int ret;
    BOOL_STAR stop;
    if (!PyArg_ParseTuple(args, "?", &stop))
    {
        PyErr_SetString(PyExc_ValueError, "Usage: mutex.stoppable_lock(BOOL_STAR)");
        return NULL;
    }
    ret = stoppable_lock(obj->orig, stop);
    if (_set_exception(ret))
        return NULL;
    Py_RETURN_NONE;
} 
```

我不知道什么`BOOL_STAR`和`"?"`应该是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:21:53.523

您需要为`bool`嵌入的值创建一个包装器类型，并使用 Python mutator 函数。如果您想避免创建自己的类型，并且如果您相信 C _Bool 与 C++ bool 相同，那么您可以使用[ctypes.c_bool](http://docs.python.org/2/library/ctypes.html#ctypes.c_bool)。然后 Python 脚本可以执行

```
 stop = ctypes.c_bool(False)
   stoppable_lock(mutex, ctypes.addressof(stop)) 
```

然后另一个线程可以做`stop.value = True`。扩展模块会期望一个 long，然后将其转换为指针。如果您希望这种类型更安全，则需要为 bool 创建自己的包装器类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-15T16:00:45.313

Python 线程是真正的线程（至少在 CPython 中对于大多数线程实现后端而言）。但是你是对的，因为 GIL，Python 代码本身永远不会并行运行，尽管许多函数（尤其是 IO）都可以。

关于您的主要问题：如果您想直接遵循 C 实现逻辑（对 bool 有一个引用），NPE 已经说过：您可以将它包装在一个可变对象中，例如：

```
class MutableBool:
    value = False 
```

否则，整个代码`stoppable_lock`也可以很容易地在 Python 中重新实现，然后它可能会变得更加直接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:39:04.610

> 我的问题是，我怎样才能获得一个参数，它是对变量的引用（与其他 python 线程共享），而不仅仅是它的副本？

您可以包装`stop`一个可变对象，并传递对该对象的引用。

# python - 在 Python 中，如何识别重叠圆圈的簇？

> ID：14607317
> 
> 赞同：2
> 
> 时间：2013-01-30T15:16:49.130
> 
> 标签：python, graphics, 2d, cluster-analysis

通过集群，我的意思是链接重叠圆圈的组。这张图片可能让我更好地了解我要查找的内容：

![在此处输入图像描述](../Images/255422e962b58db48bd60845327e9067.png)

在我的数据中，圆由它们的中心点坐标表示。我已经完成了碰撞检测以生成代表重叠的成对中心点列表：

```
pts = [(-2,2), (-2,2), (0,0), (2,1), (6,2), (7,1)]

overlaps = [
    (pts[0], pts[1]),
    (pts[0], pts[2]),
    (pts[1], pts[2]),
    (pts[2], pts[3]),
    (pts[4], pts[5]),
] 
```

这是预期的结果：

```
expected_clusters = [
    ((-2,2), (-2,2), (0,0), (2,1)),
    ((6,2), (7,1))
] 
```

在实践中，我将使用的数据集大约是这个大小，所以我可能永远不需要扩大它。但这并不是说我不赞成更优化的解决方案。

我想出了自己的幼稚解决方案，我将把它作为答案发布。但我有兴趣看到其他解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T15:45:24.203

您正在做的不是真正的聚类分析，而是[连接组件](http://en.wikipedia.org/wiki/Connected_component_%28graph_theory%29)分析。聚类分析将获取一大堆单独的点并试图发现这些圆圈。但您可能感兴趣的是，将点分配到初始邻域和通过重叠邻域进行基于聚类的可达性的组合是[DBSCAN](http://en.wikipedia.org/wiki/DBSCAN)思想及其[基于密度的聚类](http://en.wikipedia.org/wiki/Cluster_analysis#Density-based_clustering)变体的核心。

无论如何，由于您是从圆圈开始，一旦您完成了碰撞检测，您所称的重叠列表就是邻接列表，而您所称的集群是连接的组件。该算法相当简单：

1.  创建`L`所有节点的列表。
2.  创建一个连接组件的空列表`Cs`
3.  虽然`L`不为空：
    1.  选择任意节点`N`
    2.  创建一个连接组件列表`C`，初始化为`N`
    3.  使用邻接列表进行广度优先或深度优先遍历，将遇到的每个节点添加到`C`
    4.  附加`C`到`Cs`
    5.  `C`删除所有节点`L`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:18:17.503

编辑原始响应以支持[acjohnson55 的算法](https://stackoverflow.com/a/14607978/1093087)：

```
center_pts = [(-2,2), (-2,2), (0,0), (2,1), (6,2), (7,1)]

overlapping_circle_pts = [
    (center_pts[0], center_pts[1]),
    (center_pts[0], center_pts[2]),
    (center_pts[1], center_pts[2]),
    (center_pts[2], center_pts[3]),
    (center_pts[4], center_pts[5]),
]

expected_solution = [
    [(-2,2), (-2,2), (0,0), (2,1)],
    [(6,2), (7,1)]
]

def cluster_overlaps(nodes, adjacency_list):
    clusters = []
    nodes = list(nodes)  # make sure we're mutating a copy

    while len(nodes):
        node = nodes[0]
        path = dfs(node, adjacency_list, nodes)

        # append path to connected_nodes
        clusters.append(path)

        # remove all nodes from
        for pt in path:
            nodes.remove(pt)

    return clusters

def dfs(start, adjacency_list, nodes):
    """ref: http://code.activestate.com/recipes/576723/"""
    path = []
    q = [start]

    while q:
        node = q.pop(0)

        # cycle detection
        if path.count(node) >= nodes.count(node):
            continue

        path = path + [node]

        # get next nodes
        next_nodes = [p2 for p1,p2 in adjacency_list if p1 == node]
        q = next_nodes + q

    return path

print cluster_overlaps(center_pts, overlapping_circle_pts) 
```

# sql-server - HOWTO：解释 MSSQL CDC“__$update_mask”字段

> ID：14607325
> 
> 赞同：2
> 
> 时间：2013-01-30T15:17:11.673
> 
> 标签：sql-server, cdc

由于我在如何使用“$update_mask”字段时遇到了很大的困难（出于性能原因，我不想调用 fn_cdc_is_bit_set），这里是 C# 代码：

*   **updateMask**是 CDC“fn_cdc_get_all_changes_[table]”查询中的“__$update_mask”字段的内容
*   **colOrdinal**是要从中获取更改标志的列的序号（使用“n_cdc_get_column_ordinal”检索此值）

结果是“ **hasChanged** ”标志。如果字段已在更新中更改，则设置为 true。

请注意，这适用于 SQL Server 2008 和 2012，但可能不适用于未来的版本。

```
byte[] updateMask = this.UpdateMask;
        unchecked
        {
            byte relevantByte = updateMask[(updateMask.Length - 1) - ((colOrdinal - 1) / 8)];
            int bitMask = 1 << ((colOrdinal - 1) % 8);
            var hasChanged = (relevantByte & bitMask) != 0;

            return hasChanged;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T16:48:07.607

只需使用[BitArray](http://msdn.microsoft.com/en-us/library/system.collections.bitarray%28v=vs.110%29.aspx)来获取更改的列的序号索引。反转掩码并将其添加到[BitArray](http://msdn.microsoft.com/en-us/library/system.collections.bitarray%28v=vs.110%29.aspx)，所有数组值设置为`true`相应索引处的更改列。

```
byte[] updateMask = this.UpdateMask;  
Array.Reverse(updateMask);
BitArray columnBits = new BitArray(bitmask);

// To match your code sample, you can just check if the column bit is set at the ordinal.
bool hasChanged = columnBits[colOrdinal];

// You could loop and get the column indexes like this as well.
for (int i = 0; i < columnBits.Length; i++)
{
  // If the bit is set to true then the column at the same index was modified.
  if (columnBits[i])
  {
    // Do something with modified column at index 'i'.
  }      
} 
```

我试图使代码示例尽可能简单易读。请记住首先检查数组索引是否存在等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:36:07.247

我对此不是 100% 确定的，但最有可能的值`$update_mask`是在`COLUMNS_UPDATED()`触发器内返回的值。您可以在此处获取有关如何解释该值的详细信息：http: [//msdn.microsoft.com/en-us/library/ms186329.aspx](http://msdn.microsoft.com/en-us/library/ms186329.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-04T08:21:11.770

我有同样的问题。我有多次调用函数 sys.fn_cdc_is_bit_set 的过程，甚至编译该过程也需要几分钟，而且执行速度也非常慢。当我用手动掩码解析替换函数 sys.fn_cdc_is_bit_set 时，它的工作速度要快得多。当 substring([ **$update_mask],len([** $update_mask]) - (([ColumnOrder]-1)/8),1) & power(2,([ColumnOrder]-1)%8) > 0 然后 1 的情况否则 0 结束

# python - 在文件中搜索字符串并复制后面的所有行，直到 string2

> ID：14607328
> 
> 赞同：1
> 
> 时间：2013-01-30T15:17:24.447
> 
> 标签：python, python-3.x

我正在用 python3 编写脚本，但无法解决以下问题。

我有一个具有这种模式的名称列表：

```
ZINC123456
ZINC234567
ZINC345678
ZINC456789
... 
```

我有一个像这样的大文件：

```
ZINC123456
xxx
xxx
xxx
ZINC987654
xxy
xxy
xxy
xxy
ZINC654987
... 
```

我想要做的是：遍历第一个列表中的每个项目并在第二个文件中搜索它。当找到这个项目时，复制这一行和以下所有内容，直到到达下一个 ZINCxxxxxx 模式到一个新文件中。

我怎样才能做到这一点？非常感谢您的帮助！

编辑：感谢 Sudipta Chatterjee，我找到了以下解决方案：

```
import sys
finZ=open(sys.argv[1],'r')
finX=open('zinc.sdf','r')
fout=open(sys.argv[1][:7]+'.sdf','w')

list=[]
thislinehaszinc = False
zincmatching    = False

for zline in finZ:
if zline[0:4] == "ZINC":
    name = zline[:-1] #line[4:-1]
    if name not in list:
        list.append(name)

for xline in finX:
if xline[0:4] == "ZINC":
    thislinehaszinc = True
    zincmatching    = False
    for line in list:
        if line == xline[:-1]:
            zincmatching    = True
            fout.write(xline)
            print('Found: '+xline)
            pass
        else:
            pass
else:
    thislinehaszinc = False

if thislinehaszinc == False and zincmatching == True:
    fout.write(xline) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-30T15:54:23.637

```
# Clarified from comments - the program is to act as a filter so that any lines
# which have a pattern 'ZINC' in the second file but do not belong in the first
# should stop the dump until the next matching zinc is found

fileZ = open ('file_with_zinc_only.txt', 'r').readlines()
fileX = open ('file_with_x_info.txt', 'r').readlines()
fileOutput = open ('file_for_output.txt', 'w')

thisLineHasZinc = False
zincMatching = False

for xline in fileX:
    #print "Dealing with", xline
    if len(xline.split('ZINC')) != 1:
        thisLineHasZinc = True
        zincMatching = False
        for zline in fileZ:
            #print "Trying to match",zline
            if zline == xline:
                #print "************MATCH***************"
                zincMatching = True
                fileOutput.write (zline)
                #print "**",xline
                break
    else:    
        thisLineHasZinc = False

    # If we are currently under a block where we've found a ZINC previously
    # but not yet reached another ZINC line, write to file
    #print 'thisLineHasZinc',thisLineHasZinc,'zincMatching',zincMatching
    if thisLineHasZinc == False and zincMatching == True:
        fileOutput.write (xline)
        #print "**** "+ xline

fileOutput.close() 
```

# django - 带有 CheckboxSelectMultiple 小部件的 Django 表单选择 groupby

> ID：14607331
> 
> 赞同：1
> 
> 时间：2013-01-30T15:17:33.400
> 
> 标签：django, forms, django-forms

**更新：**看起来我将不得不创建自定义小部件（[在 Django 中分组 CheckboxSelectMultiple 选项](https://stackoverflow.com/questions/5200911/grouping-checkboxselectmultiple-options-in-django)）。完成后将包含最终代码。

我已经以类似于另一个[SO question](https://stackoverflow.com/questions/5080828/how-to-group-the-choices-in-a-django-select-widget)的 django 形式设置了一个选择字段。

但是，我想让它成为一个`CheckboxSelectMultiple`小部件，但是在 Meta 类中这样做会为整个组创建一个复选框。这是我需要在 中做的事情`__init__`，如果是的话怎么办？

```
class FooIterator(models.ModelChoiceIterator):
    def __init__(self, *args, **kwargs):
        super(models.ModelChoiceIterator, self).__init__(*args, **kwargs)
    def __iter__(self):
        for thing in MyModel.objects.all():
            yield (thing.name, [(x.id, x.name) for x in MyModel2.objects.filter(name=thing.name)])

class MyForm(ModelForm):
    def __init__(self, *args, **kwargs):
        super(MyForm, self).__init__(*args, **kwargs)
        self.fields['myField'].choices = FooIterator()
        for x in self.fields:
            self.fields[x].widget.attrs['class'] = 'input-block-level' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:40:05.397

我假设您正在使用 modelForm。

您可以修改**init中的字段**

方法如下：

```
class SomethingForm(forms.modelForm):
    def __init__(self, *args, **kwargs):
        super(SomethingForm, self).__init__(*args, **kwargs)
        self.field['myfieldname'] = forms.CharField(
                                    widget=forms.HiddenInput) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:49:03.687

看起来创建自定义小部件是要走的路 - 根据[Django 中的 Grouping CheckboxSelectMultiple Options](https://stackoverflow.com/questions/5200911/grouping-checkboxselectmultiple-options-in-django)

注意：我按照[如何对 Django Select 小部件中的选择进行分组删除了迭代器？](https://stackoverflow.com/questions/5080828/how-to-group-the-choices-in-a-django-select-widget)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T18:08:53.787

```
class MyForm(ModelForm):
    field_name = forms.MultipleChoiceField(required=False,
        widget=CheckboxSelectMultiple)

    def __init__(self, *args, **kwargs):
        super(MyForm, self).__init__(*args, **kwargs)
        self.fields['field_name'].widget.attrs['class'] = 'input-block-level'
        self.fields['field_name'].choices = self._get_choices()

    def _get_choices(self):
        return [(val.data1, val.data2) for val in Model.objects.filter()] 
```

# java - 休眠插入顺序

> ID：14607335
> 
> 赞同：0
> 
> 时间：2013-01-30T15:17:38.683
> 
> 标签：java, database, hibernate, insert

我有 4 个简单的结构表：

```
Table a - columns: id(generated), x

Table b - columns: id(generated), a_id(fk to a), y

Table c - columns: id(generated), a_id(fk to a), z

Table d - columns: id(generated), b_id(fk to b), c_id(fk to c), w 
```

关系如下：

```
a->b one-to-many unidirectional;

a->c one-to-many unidirectional;

b->d one-to-many unidirectional;

c->d one-to-many unidirectional; 
```

hibernate 在持久化 a 时执行不正确的插入顺序：

应该是 a,b,c,d

执行：a、b、d 并在没有生成 c_id 的情况下失败

我怎样才能执行正确的命令？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:44:36.363

您可以在 c 之后强制执行刷新语句以让休眠将其发送到数据库。也就是说，创建并填充 a、b、c，然后刷新。然后创建 d。

# php - PHP RecursiveIteratorIterator 图片库

> ID：14607341
> 
> 赞同：1
> 
> 时间：2013-01-30T15:17:47.703
> 
> 标签：php

使用 SO 上其他地方的答案，我正在开发一个基本的 PHP 迭代器来显示嵌套 DIR 中的图像。

我的目标是让 PHP 通过 DIR 运行并添加一个 IMG 标记，其中 SRC 指向它迭代的文件。

我大部分时间都在那里，但是出现了一些额外的字符，这些字符会阻止图像显示。

**代码**（h2和h3是为了调试时的可读性，无论它们是否存在都存在问题）：

```
// Create recursive dir iterator which skips dot folders
$dir = new RecursiveDirectoryIterator('./images/families/',
    FilesystemIterator::SKIP_DOTS);

// Flatten the recursive iterator, folders come before their files
$it  = new RecursiveIteratorIterator($dir,
    RecursiveIteratorIterator::CHILD_FIRST);

// Maximum depth is 1 level deeper than the base folder
$it->setMaxDepth(5);

// Basic loop displaying different messages based on file or folder
foreach ($it as $fileinfo) {
    if ($fileinfo->isDir()) {
        printf("<h2>Folder - %s\n</h2>", $fileinfo->getFilename());
    } elseif ($fileinfo->isFile()) {
        printf("<h3><img src=\"images/families/%s/%s></h3>", $it->getSubPath(), $fileinfo->getFilename());
    }
} 
```

* * *

**结果**通过浏览器中的查看源：

```
Folder - smith/40th
<img src="images/families/smith/40th/40th_1.jpg>
<img src="images/families/smith/40th/40th_11.jpg> 
```

..ETC

* * *

**浏览器窗口中的结果**（选择“在新窗口中打开图像”）：

```
"The requested URL /images/families/smith/40th/40th_1.jpg><img src= was not found on this server.""

This is the URL in the address bar:
/images/families/smith/40th/40th_1.jpg%3E%3Cimg%20src= 
```

* * *

所以我创建 img 的代码是添加额外的字符/创建浏览器无法正确读取的字符。

这是编码问题吗？谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:21:04.127

您忘记关闭图像标签：

```
printf("<h2>Folder - %s\n</h2>", $fileinfo->getFilename());
} elseif ($fileinfo->isFile()) {
    printf("<h3><img src=\"images/families/%s/%s\"></h3>", $it->getSubPath(), $fileinfo->getFilename());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:20:16.917

您只是错过了`src`属性中的结束引号，这导致它运行到后续标记上。

```
printf("<h3><img src=\"images/families/%s/%s\"></h3>", $it->getSubPath(), $fileinfo->getFilename());
//-----------------------------------------^^^^^ 
```

# c# - 通过 C# 打开 IE -> mailto 失败

> ID：14607344
> 
> 赞同：5
> 
> 时间：2013-01-30T15:17:59.123
> 
> 标签：c#, internet-explorer, outlook, mailto, process.start

我在 (.Net Framework) 开始的 ie 中发现了一些奇怪的行为。`Process.Start()`要重现它，只需按照以下步骤操作。

**必需的：**

*   C# IDE+编译器
*   outlook（在我的情况下：outlook 2010 - 其他版本应该是同样的问题，但未经测试）
*   ie9（ie8 或 10 也应该是“好”）
*   即必须是默认浏览器（你可以稍后切换回来;-)）
*   Outlook 必须与 mailto 相关：链接

**步骤（成功）：**

*   关闭所有 IE 和 Outlook 实例
*   打开 IE（32 位）
*   打开网址：`mailto:foo@example.com`

***结果：*** Outlook 启动

**步骤（失败）**

*   关闭所有 IE 和 Outlook 实例
*   编译这个代码片段 `System.Diagnostics.Process.Start("http://www.example.org");`
*   执行代码（IE应该开始显示示例页面）
*   现在输入或复制`mailto:foo@example.com`到您的网址栏

***结果：***无法启动 Microsoft Outlook（或类似的东西） - WTF？

**我已经检查过的内容：**

IE 以相同开头

*   范围
*   工作目录
*   用户
*   架构（32 位）

我究竟做错了什么？如果有更多我可以检查、测试、寻找的想法，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T22:24:58.320

我可以重现这种行为。就我而言，我有一个导致问题的 Outlook 插件。

```
---------------------------
MS Outlook Extension
---------------------------
The <Outlook Addin Name> MS Outlook Extension can't be loaded because Outlook is currently in use by another application. Please try again later.
---------------------------
OK   
--------------------------- 
```

一旦我删除了这个插件，它现在就可以工作了。

也可能有帮助的是： http: [//www.codeproject.com/Articles/4051/Windows-Impersonation-using-C](http://www.codeproject.com/Articles/4051/Windows-Impersonation-using-C)

如果您的问题不是像我这样的插件，那么冒充另一个用户可能会有所帮助。

# jquery - 仅当将鼠标悬停在其容器上时，才使用 jquery 悬停在元素上

> ID：14607347
> 
> 赞同：0
> 
> 时间：2013-01-30T15:18:04.450
> 
> 标签：jquery

我有这个 html

```
<ul class="accordion" id="accordion">

                <li class="bg4">
                    <div class="heading">fdgfdg</div>
                    <div class="bgDescription"></div>
                    <div class="description">
                        <h2>fdgdf</h2>
                        <p>dfgdfg</p>
                        <a href="#">fdgdfg&rarr;</a>
                    </div>
                </li>
                <li class="bg5 bleft">
                    <div class="heading">מגדל מטלון</div>
                    <div class="bgDescription"></div>
                    <div class="description">
                        <h2>ffg</h2>
                        <p></p>
                        <a href="#">more &rarr;</a>
                    </div>
                </li>
            </ul> 
```

我有这个代码

```
 $(function () {
                $('#accordion > li').hover(

                    function () {
                        var $this = $(this);
                        $this.stop().animate({ 'width': '480px' }, 500);
                        $('.heading', $this).stop(true, true).fadeOut();
                        $('.bgDescription', $this).stop(true, true).slideDown(500);
                        $('.description', $this).stop(true, true).fadeIn();
                    },
                    function () {

                            var $this = $(this);
                            $this.stop().animate({ 'width': '122px' }, 500);
                            $('.heading', $this).stop(true, true).fadeIn();
                            $('.description', $this).stop(true, true).fadeOut(500);
                            $('.bgDescription', $this).stop(true, true).slideUp(700);

                    }
                );
                    }); 
```

现在，当悬停在其中一个上时，`<li>`宽度正在增长（并且在悬停时缩小）

有没有一种方法可以使`<li>`取消悬停代码仅在我将鼠标悬停在其他位置时才会执行，`li`并且当容器（该`<ul>`）松开焦点时，它会保持相同的大小而不执行取消悬停代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:26:25.350

按照这个：

1）您可以做的是，您可以检查该元素的鼠标输入宽度。

2）然后你需要得到所有`$('#accordion > li')`并将它们的宽度设置为 122pixels

3）并将当前悬停（使用`$(this)`）的宽度增加到480像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:05:57.963

我假设您只想在满足其他外部条件时折叠项目，所以我使用了一个按钮。

假设您一次只想要一个打开，我同意 Milind Ansatwar 的观点，即您需要观看 li 的鼠标输入事件。

您仅更改不是此项目的项目：

```
 $('#accordion > li').mouseenter(function(){
        var $this = $(this);
        var $others = $('#accordion > li').not($this);

        $this.stop().animate({
            'width': '480px'
        }, 500);
        $('.heading', $this).stop(true, true).fadeOut();
        $('.bgDescription', $this).stop(true, true).slideDown(500);
        $('.description', $this).stop(true, true).fadeIn();

        $others.stop().animate({
            'width': '122px'
        }, 500);
        $('.heading', $others).stop(true, true).fadeIn();
        $('.description', $others).stop(true, true).fadeOut(500);
        $('.bgDescription', $others).stop(true, true).slideUp(700);
    }); 
```

现在，当您在项目上移动时，您永远不会触发鼠标移出或“取消悬停”，因此它们一直保持打开状态，直到您输入另一个 li。

我添加了一个按钮来折叠项目，以防不希望它们一直打开。

[这是一个工作演示。](http://jsfiddle.net/3yVLU/6/)

[好吧，第 15 次是魅力：](http://jsfiddle.net/3yVLU/15/)

我修改了代码，以便不使用占位符，而是更改标题的定位方式。这有效地消除了舞蹈：

```
 $('#accordion > li').mouseenter(function(){
        var $this = $(this);
        var $others = $('#accordion > li').not($this);

        $this.stop().animate({
            'width': '480px'
        }, 500);
        $('.heading', $this).stop(true, true).css('position','absolute').fadeOut('500');
        $('.description', $this).stop(true, true).fadeIn();

        $others.stop().animate({
            'width': '122px'
        }, 500);
        $('.description', $others).stop(true, true).fadeOut(500,function(){
            $('.heading', $others).stop(true, true).fadeIn();
            $('.heading', $others).css('position','static');
        });              
    }); 
```

它还消除了一些行的跳跃，但不是全部。我的意思是毕竟你正在折叠该行，所以它会从鼠标下方跳出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T15:25:16.330

将“取消悬停”功能移动为一个使用功能，并在每次悬停时调用它。也只在ul“dehover”上调用它。

# mysql - 如何使用 Rails 中的 SQL 代码对此进行编码？

> ID：14607353
> 
> 赞同：0
> 
> 时间：2013-01-30T15:18:14.637
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3

我有三个模型，例如`Community`,`Tagging`和`Tag`

*   社区`belongs_to :tag`

*   标记`has_one :community`<= taggable_id 将是社区的 id

*   标记`belongs_to :tag`

*   Tag `has_many :taggings`# Tag 有 'name' 属性

在这种情况下，如果我有 params[:tag]，我如何编写 SQL 代码来获取所有带有 params[:tag] 标记的社区？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:48:49.097

您应该能够在尝试时看到生成的确切 sql

```
 Community.find_tagged_with(params[:tag]) 
```

但是您也应该能够使用以下内容自己创建查询

```
 # Rails 3
 Community.joins(taggings: :tag).where(tags: { name: params[:tag] })

 # Rails 2
 Community.all(joins: { taggings: :tag }, conditions: { tags: { name: params[:tag] } }) 
```

# java - 在 jboss-portal-2.7.2 的部署阶段出现错误“java.net.SocketException: Too many open files”

> ID：14607356
> 
> 赞同：6
> 
> 时间：2013-01-30T15:18:23.353
> 
> 标签：java, file-io, jboss, socketexception, jboss-portal

在日志消息中的某个位置启动 jboss-portal-2.7.2 时：

```
2013-01-30 20:32:02,541 ERROR [org.apache.tomcat.util.net.JIoEndpoint] Socket accept failed
java.net.SocketException: Too many open files
        at java.net.PlainSocketImpl.socketAccept(Native Method)
        at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:408)
        at java.net.ServerSocket.implAccept(ServerSocket.java:462)
        at java.net.ServerSocket.accept(ServerSocket.java:430)
        at org.apache.tomcat.util.net.DefaultServerSocketFactory.acceptSocket(DefaultServerSocketFactory.java:61)
        at org.apache.tomcat.util.net.JIoEndpoint$Acceptor.run(JIoEndpoint.java:309)
        at java.lang.Thread.run(Thread.java:662) 
```

在 deploy 文件夹中一共有 20 个。war 模块。有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-26T02:12:30.990

为运行 tomcat 的用户增加服务器上的 ulimit。

检查 ulimit：

```
ulimit -n 
```

为当前会话增加：

```
ulimit -n 102400 
```

您可以通过编辑进行永久更改`/etc/security/limits.conf`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T16:27:08.370

此消息基本上意味着您已达到操作系统设置的可以打开的最大文件数限制。

解决这个问题的正确方法是诊断输出`lsof -p <jboss_java_pid>` 并找出导致这些文件打开的原因。然后进行相应的解决方案。

快速修复解决方案可能是增加操作系统的全局最大文件限制或增加用户的文件限制或两者兼而有之。例如，在 Fedora 中，这可以在`/proc/sys/file-max`文件中设置为全局文件最大限制和`/etc/security/limits.conf`用户限制。

# java - 公历的java中的错误

> ID：14607358
> 
> 赞同：0
> 
> 时间：2013-01-30T15:18:33.537
> 
> 标签：java

我正在尝试将 89 天添加到`CurrentDate`2015`GregorianCalendar`年 4 月 31 日。下面是代码片段。

```
Calendar now = Calendar.getInstance(); 
String dt="31012013";  
now.set(Integer.parseInt(dt.substring(4)),Integer.parseInt(dt.substring(2,4)),Integer.parseInt(dt.substring(0,2))); 
now.add(Calendar.DATE, 89); 
String matdate=Integer.toString(now.get(Calendar.DATE))+ "/"+ (now.get(Calendar.MONTH) ) +"/" + now.get(Calendar.YEAR); 
```

执行此代码后，`matdate`值为**31/04/2013**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T15:22:05.657

这是因为`java.util.Calendar`月份从**0 而不是 1**开始，即 4 是五月。除了格式化日期的最佳方式是`java.text.SimpleDateFormat`

```
 String matdate = new SimpleDateFormat("dd/MM/yyyy").format(now.getTime())); 
```

或者更好地将[Joda-Time](http://joda-time.sourceforge.net/)库用于日历和时间相关代码。

# c# - 服务器不会从列表中删除客户端

> ID：14607359
> 
> 赞同：0
> 
> 时间：2013-01-30T15:18:35.807
> 
> 标签：c#, sockets, client-server, listener

我有一个客户端-服务器应用程序。
服务器可以处理多个客户端连接。

当我单击`Close`客户端中的按钮时，我希望它会断开连接，并从服务器表单中的客户端列表中删除。

但是，它进入了一个无限循环，导致客户端从表单中删除`ListView`，然后再次添加到表单中`ListView`。

这是我的代码：

**RemoteBatcherClientForm**：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.Net.Sockets;

namespace RemoteBatcherClient
{
    public partial class RemoteBatcherClientForm : Form
    {
        Socket clientSock;

        public RemoteBatcherClientForm()
        {
            InitializeComponent();
            clientSock = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        }

        private void connectBtn_Click(object sender, EventArgs e)
        {
            clientSock.Connect("127.0.0.1", 8);
            MessageBox.Show("Connected");
        }

        private void sendBtn_Click(object sender, EventArgs e)
        {
            if (clientSock.Send(Encoding.Default.GetBytes(txtMsg.Text)) > 0)
            {
                MessageBox.Show("Data Sent");
            }
        }

        private void closeBtn_Click(object sender, EventArgs e)
        {
            clientSock.Close();
            clientSock.Dispose();
            Close();
        }
    }
} 
```

**远程批处理服务器**：

客户端.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;

namespace RemoteBatcherServer
{
    class Client
    {
        public string ID
        {
            get;
            private set;
        }

        public IPEndPoint EndPoint
        {
            get;
            private set;
        }

        Socket serverSock;

        public Client(Socket accepted)
        {
            serverSock = accepted;

            ID = Guid.NewGuid().ToString();
            EndPoint = (IPEndPoint)serverSock.RemoteEndPoint;
            serverSock.BeginReceive(new byte[] { 0 }, 0, 0, 0, callback, null);
        }

        void callback(IAsyncResult ar)
        {
            try
            {
                serverSock.EndReceive(ar);

                byte[] receiveBuffer = new byte[8192];

                int rec = serverSock.Receive(receiveBuffer, receiveBuffer.Length, 0);

                if (rec < receiveBuffer.Length)
                {
                    Array.Resize<byte>(ref receiveBuffer, rec);
                }

                 if (Receieved != null)
                {
                    Receieved(this, receiveBuffer);
                }

                serverSock.BeginReceive(new byte [] {0}, 0, 0, 0, callback, null);
            }
            catch (System.Exception ex)
            {
                Console.WriteLine(ex.Message);
                Close();

                if (Disconnected != null)
                {
                    Disconnected(this);
                }
            }
        }

        public void Close()
        {
            serverSock.Close();
            serverSock.Dispose();
        }

        public delegate void ClientReceievedHandler(Client sender, byte[] data);
        public delegate void ClientDisconnectedHandler(Client sender);

        public event ClientReceievedHandler Receieved;
        public event ClientDisconnectedHandler Disconnected;
    }
} 
```

监听器.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Net;
using System.Net.Sockets;

namespace RemoteBatcherServer
{
    class Listener
    {
        Socket sck;

        public bool Listening
        {
            get;
            private set;
        }

        public int Port
        {
            get;
            private set;
        }

        public Listener(int port)
        {
            Port = port;
            sck = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        }

        public void Start()
        {
            if (Listening)
                return;

            sck.Bind(new IPEndPoint(0, Port));
            sck.Listen(0);

            sck.BeginAccept(callback, null);

            Listening = true;
        }

        public void Stop()
        {
            if (!Listening)
                return;

            sck.Close();
            sck.Dispose();
            sck = new Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp);
        }

        void callback(IAsyncResult ar)
        {
            try
            {
                Socket acceptSocket = sck.EndAccept(ar);

                if (SockeetAccepted != null)
                {
                    SockeetAccepted(acceptSocket);
                }

                sck.BeginAccept(callback, null);
            }
            catch (System.Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
        }

        public delegate void SocketAcceptHandler(Socket acceptSocket);
        public event SocketAcceptHandler SockeetAccepted;
    }
} 
```

RemoteBatcherServerForm.cs：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.Net.Sockets;

namespace RemoteBatcherServer
{
    public partial class RemoteBatcherServerForm : Form
    {
        Listener listener;

        public RemoteBatcherServerForm()
        {
            InitializeComponent();
            listener = new Listener(8);
            listener.SockeetAccepted += new Listener.SocketAcceptHandler(listenerSocketAccepted);

            Load += new EventHandler(MainLoad);
        }

        void MainLoad(object sender, EventArgs e)
        {
            listener.Start();
        }

        void listenerSocketAccepted(Socket socket)
        {
            Client client = new Client(socket);
            client.Receieved += new Client.ClientReceievedHandler(clientReceived);
            client.Disconnected += new Client.ClientDisconnectedHandler(clientDisconnected);

            Invoke((MethodInvoker)delegate
            {
                ListViewItem item = new ListViewItem();
                item.Text = client.EndPoint.ToString();
                item.SubItems.Add(client.ID);
                item.SubItems.Add("XX");
                item.SubItems.Add("XX");
                item.Tag = client;
                lstClients.Items.Add(item);
            });
        }

        void clientReceived(Client sender, byte[] data)
        {
            Invoke((MethodInvoker)delegate
            {
                for (int i = 0; i < lstClients.Items.Count; i++)
                {
                    Client client = lstClients.Items[i].Tag as Client;

                    if (client.ID == sender.ID)
                    {
                        lstClients.Items[i].SubItems[2].Text = Encoding.Default.GetString(data);
                        lstClients.Items[i].SubItems[3].Text = DateTime.Now.ToString();
                        break;
                    }
                }
            });
        }

        void clientDisconnected(Client sender)
        {
            Invoke((MethodInvoker)delegate
            {
                for (int i = 0; i < lstClients.Items.Count; i++)
                {
                    Client client = lstClients.Items[i].Tag as Client;

                    if (client.ID == sender.ID)
                    {
                        lstClients.Items.RemoveAt(i);
                        break;
                    }
                }
            });
        }       
    }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:50:39.103

除非我误解了您的代码，否则您似乎正在混合同步和异步调用。我认为您正在无限期地阻止您的 serverSock.Receive 呼叫。请参阅：http: [//msdn.microsoft.com/en-us/library/8s4y8aff.aspx](http://msdn.microsoft.com/en-us/library/8s4y8aff.aspx) - *“如果没有数据可供读取，则接收方法将阻塞直到数据可用，除非超时值由使用 Socket.ReceiveTimeout"*

```
serverSock.EndReceive(ar);
byte[] receiveBuffer = new byte[8192];
int rec = serverSock.Receive(receiveBuffer, receiveBuffer.Length, 0); 
```

尝试检查您是否收到 0 个字节。您可能还想将接收呼叫换成 BeginReceive。这可能看起来有点令人困惑，因为您实际上希望继续重新调用 BeginReceive 直到收到 0 个字节，这表明对方已关闭连接：

```
int i = serverSock.EndReceive(ar);
if (i > 0)
    {
        serverSock.BeginReceive(receiveBuffer, 0, receiveBuffer.Length, 0, 
                                 new AsyncCallback(callback), null);
    }
else
    {
        serverSock.Close();
    } 
```

请注意，您可以将 null 参数交换为您传递的状态对象。您可以在 Client 构造函数中的初始 BeginReceive 调用中执行此操作 - 这可能是传递缓冲区的更好方法，用某种 State 类包装它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:52:18.690

这是一个快速的答案：修改`Client.cs`'`void callback(IAsyncResult ar)`方法以检查[Socket.Available 属性](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.available.aspx)是否返回 0（当客户端关闭时会发生这种情况）：

```
void callback(IAsyncResult ar)
{
    try
    {
        //add these lines
        if (serverSock.Available == 0)
        {
            Disconnected(this);
            return;
        }

        serverSock.EndReceive(ar);

        byte[] receiveBuffer = new byte[8192];

        int rec = serverSock.Receive(receiveBuffer, receiveBuffer.Length, 0);

        if (rec < receiveBuffer.Length)
        {
            Array.Resize<byte>(ref receiveBuffer, rec);
        }

        if (Receieved != null)
        {
            Receieved(this, receiveBuffer);
        }

        serverSock.BeginReceive(new byte[] { 0 }, 0, 0, 0, callback, null);
    }
    catch (System.Exception ex)
    {
        Console.WriteLine(ex.Message);
        Close();

        if (Disconnected != null)
        {
            Disconnected(this);
        }
    }
} 
```

# python - Python 和 AJAX - HTTP 响应

> ID：14607371
> 
> 赞同：4
> 
> 时间：2013-01-30T15:18:57.437
> 
> 标签：python, ajax, http, response

我正在尝试使用 python 脚本回答 ajax 请求。ajax 请求发送一个 json 对象，如下所示：

```
$.ajax({
     url : "cgi-bin/mycgi.py",
     type : "POST",
     data : JSON.stringify(MyJSONObject),
     success : function() {...do something},
     error : function(xhr,errmsg,err) {
           alert(xhr.status);
     }
} 
```

我的 Python 脚本 mycgi.py 有以下几行：

```
import sys
import simplejson as json

...

myjson = json.loads(sys.stdin.read())

#do something with the object

mystatus = "200 OK"

sys.stdout.write("Status: %s\n" % mystatus)
sys.stdout.write("Content-Type: application/json")
sys.stdout.write("\n\n")
sys.stdout.write(json.dumps(myjson)) 
```

基本上一切正常。我的浏览器收到响应，识别 - 如果状态设置为“200 OK” - 请求成功并使用返回的对象运行成功部分中的命令。

但我有两个问题：

1.  如何让我的脚本返回带有错误消息的错误？我可以返回“404”而不是“202 OK”，并且我的浏览器意识到存在错误。但我不知道如何返回错误消息。我是否必须将此消息放在回复的标题中？
2.  我想知道，我的客户端和服务器之间的通信方式是否“太简单”并且可能太冒险了。当我在这里阅读其他类似问题的问题时，我看到人们使用诸如“请求”之类的 python 模块或从 BaseHTTPRequestHandler 派生一个类。我想让我的 python 脚本尽可能简单。出于某种原因，是否有必要另辟蹊径？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:44:41.963

对于你的第一个问题：

与将状态代码设置为 200 的响应类似，您可以在返回其他状态代码时向响应中添加内容。根据状态代码，您应该向内容添加细节和/或添加额外的标题，以防您想遵循标准[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)。

在 JavaScript 中，您可以为从 ajax 调用获得的响应设置特定状态代码的处理程序，或者为您执行此操作时出现的所有错误设置处理程序。有关详细信息，请参阅[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)。在这些处理程序中，您可以访问响应内容并显示消息：

```
$.ajax({
   url : "cgi-bin/mycgi.py",
   type : "POST",
   data : JSON.stringify(MyJSONObject),
   success : function() {...do something},
   error : function(xhr,errmsg,err) {
       // show status code and response content
       alert(xhr.status + ": " + xhr.responseText);
   }
} 
```

如果您想返回 HTML 并显示它，只需将响应转换为 jQuery 对象。

```
var response = $(xhr.responseText); 
```

对于你的第二个问题：

我个人更喜欢使用现有的工具，而不是自己做应用程序的低级部分。我认为使用隐藏不必要的复杂性和样板的库时有很多好处。只是一个非常简短的清单，上面列出了我的想法：

1.  我不想重新发明轮子
2.  使用成千上万其他开发人员使用的库时的错误更少
3.  使用高级抽象时，我自己的代码得到了改进
4.  使用知名图书馆时互联网上的好例子
5.  未来的需求通常已经涵盖

所以在你的情况下，我什至会走得更远，看看一个苗条的 Python Web 应用程序框架。但这当然很大程度上取决于您的应用程序。

# c - 64 位辅助函数 Handle64toHandle()

> ID：14607375
> 
> 赞同：1
> 
> 时间：2013-01-30T15:19:20.467
> 
> 标签：c, 64-bit, 32bit-64bit

我正在尝试使用 MSVC 64 位编译器解决以下代码的逻辑错误。

这段代码之前在 32 台机器上运行良好。

```
return ((ULONG) DupThreadHandle); 
```

在 64 位世界中，我了解到任何线程句柄都是 64 位（实际上是 6 字节），所以这段代码显然是错误的，因为目标类型是 32 位的 ULONG。

但是 msdn 建议使用我在标题中提到的帮助函数，通过包含 basetsd.h 对 C 代码进行 64 位移植

但我的问题是，这些辅助函数如何在概念上将 6 字节地址更改为 4 字节地址？因为已经将线程放置在某个 6 字节地址。这个 4 字节地址有多大意义？我不想更改目的地类型。因为问题将是递归警告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:06:13.967

根据微软[在这里](http://msdn.microsoft.com/en-us/library/ms810720)，...

> 为了便于移植，已决定这些系统句柄应保留为 32b 值，在 64b 平台上符号扩展为 64b。也就是说，各个句柄类型仍然基于映射到 void * 的 HANDLE 类型，因此句柄的大小就是指针的大小，即 32b 上为 4 个字节，64b 上为 8 个字节。但是，64b 平台上句柄的实际值（即有意义的位）适合低 32b，而高位仅带有符号。

另请参阅，[这](http://www.viva64.com/en/d/0157/).

Handle64toHandle() 函数的效果可以通过简单地在 64 位和 32 位类型之间进行转换来复制自己，但是……这是 BIG BUT……你必须使用`signed`类型进行转换。`unsigned`如上所述，您使用类型的强制转换会阻碍 Microsoft 将地址视为有符号数量的处理方式。更改您的投射以使用`signed`类型，您应该没问题。但是您需要确保将任何此类地址存储在`signed`32 位类型，以便稍后将它们正确转换回正确的 64 位类型，而不会丢失最高位的全为状态。如果您由于遗留原因不能这样做（即将它们存储在一个 32 位无符号整数中，这是您无法更改的遗留代码的一部分），那么请确保在进行转换时将这些无符号值转换回有符号值回到 64 位。

# java - 如何访问 JFileChooser 中的文本

> ID：14607377
> 
> 赞同：0
> 
> 时间：2013-01-30T15:19:31.683
> 
> 标签：java, swing, jfilechooser

我如何获得由“ ***”标记的区域的文本写入（对于JFileChooser）文件名：[*** ]文件类型[]即我要求一些内置的“get”功能，如果有的话，如果没有请告知任何其他可行的访问方式；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:27:38.063

```
/*
*Desktop class only can get when you use JDK 6
*/
import java.awt.Desktop;

import javax.swing.JFileChooser;

import java.io.File;

public class OpenFileUsingJFileChooser
{
public static void main(String[]args)
{

 JFileChooser fileChooser=new JFileChooser();

 int a=fileChooser.showOpenDialog(null);

 if(a==JFileChooser.APPROVE_OPTION)
 {
  File fileToOpen=fileChooser.getSelectedFile();

  try
  {
   Desktop.getDesktop().open(fileToOpen);
  }
  catch(Exception exception)
  {
   System.out.println("Problem occour when to open the file");
  }
 }
}
} 
```

font:[http://java2everyone.blogspot.com.br/2009/02/open-file-using-jfilechooser.html](http://java2everyone.blogspot.com.br/2009/02/open-file-using-jfilechooser.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:40:50.430

“另存为”文件实际上是`File`从`getSelectedFile`. `File`返回基于对话框中的文本：

```
JFileChooser chooser = new JFileChooser();
if (chooser.showOpenDialog(null) == JFileChooser.APPROVE_OPTION) {
   File saveAsFile = chooser.getSelectedFile();
   System.out.println(saveAsFile);
} 
```

# python - 从 cmd 调用脚本和从计划任务调用脚本的区别

> ID：14607378
> 
> 赞同：1
> 
> 时间：2013-01-30T15:19:32.400
> 
> 标签：python, windows, scheduled-tasks

我目前正在尝试在计算机启动时执行我用 Python 编写的脚本（然后编译成 exe）。该脚本只是下载一个文件并将其复制到我计算机中的指定位置。这是我正在使用的代码的一部分：

```
def DownCopy(url,dst):
    import shutil

    """ Download and copy file """
    fn = os.path.basename(urllib.url2pathname(url))
    filename, unused = urllib.urlretrieve(url,fn)

    #if remote file change set exec permission
    if filename != url and not url.startswith('file:///'):
        os.chmod(filename, stat.S_IRUSR | stat.S_IWUSR | stat.S_IXUSR)

    #check if target directory exist, if not create it
    dstDir = os.path.dirname(dst)
    if not os.path.exists(dstDir):
        os.mkdir(dstDir)

    #copy
    shutil.copy(filename, dst) 
```

当我使用 shell 执行这个脚本时`cmd`，它确实有效：我的文件被下载，文件夹被创建，我的文件被复制到其中。但是，如果我从计划任务（权限：系统）调用此脚本，则不会发生任何事情，并且该`Last Result`字段设置为`0xfffff`.

所以基本上，从 cmd shell 和从计划任务调用这个脚本有什么区别？我在这里能注意到的唯一区别是启动脚本的用户。使用 cmd shell，脚本正在由当前用户执行，而当被计划任务调用时，它正在由系统执行。但是我看不出我的脚本在被系统调用时无法工作的任何原因......

我听从了 Caspar 的建议，得到了以下结果：

*   输出计划任务的结果给我一个`[Errno 13] : Acces Denied`错误。我检查了要将文件复制到的文件夹的权限，并且 SYSTEM 设置为“所有权限”。这是我的踪迹：

    ```
    Traceback (most recent call last):
      File "<string>", line 58, in <module>
      File "<string>", line 51, in Main
      File "<string>", line 30, in DownCopy
      File "Z:\home\user\workspace\repo_config_os\temp-DwIWiG\build\pyi.win32\pyinstaller_build_all\out08-PYZ.pyz\urllib", line 93, in urlretrieve
      File "Z:\home\user\workspace\repo_config_os\temp-DwIWiG\build\pyi.win32\pyinstaller_build_all\out08-PYZ.pyz\urllib", line 243, in retrieve
    IOError: [Errno 13] Permission denied: u'IzznoLo.exe' 
    ```

所以问题似乎是下载部分。SYSTEM 的网络类型是否受到限制？有没有办法允许“他”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:22:43.727

我认为主要有两种方法。更具建设性的方法是确保您捕获错误消息，因此首先您需要将所有输出重定向到文件。

您可以尝试解决问题的方法是更改​​目标文件夹的权限/所有权并将其放宽。你想走哪条路？

看起来很明显，程序“IzNoLo.exe”没有设置全局执行权限。老实说，我不知道那个程序是做什么的，但也许你知道，它是你提供的吗？

要设置这些[权限]，您将浏览属性面板，特别是安全面板，并确保为所有用户设置了所有权限。

# php - PHP 联系表单未发送且未收到解析错误

> ID：14607381
> 
> 赞同：-1
> 
> 时间：2013-01-30T15:19:42.163
> 
> 标签：php

我已经为一个站点建立了一个 PHP 联系表。服务器启用了邮件程序，代码将不会执行。我没有收到任何解析错误。关于调试的任何建议或问题是什么？

```
//Check the form submission
if (isset($POST['submitted'])){
//validate the form
if(!empty($_POST['name']) &&
!empty($_POST['email']) && 
!empty($_POST['comments']) ){

//Create the body
$body = "Name:
{$_POST['name']}\n\nComments:
{$_POST['comments']}";

//Make the Name no longer than 70 Characters
$body = wordwrap($body, 70);

//Send the email
mail('xxx@xxxx.com',
'Contact Form Submission',$body,
"From: {$_POST['email']}");

//Print the Thank You message
echo'<p>Thank you for contacting us we appreciate your interest</p>';

//Clear $_POST so that its not a sticky form
$_POST = array();
} else {
echo'<p>Please fill out the form completely.</p>';
}
}// End of main isset ()IF 
```

表格代码是

```
<div id="wrapper">
<p>Please fill out this form to contact us.</p>
<form action="contact.php"method="post">
<p>Name: <input type="text" name="name"size="30"maxlength="60"value="<?php if(isset($_POST['name']))echo $_POST['name']; ?>" /></p>

<p>Email Address: <input type="text" name="email"size="30"maxlength="80"value="<?php if(isset($_POST['email']))echo $_POST['email']; ?>" /></p>

<p>Comments: <textarea name="comments"rows="5"cols="30"><?php if(isset($_POST['comments']))echo $_POST['comments']; ?></textarea></p>

<p><input type="submit" name="submit" value="Send" /> </p>

<input type="hidden" name="submitted" value="TRUE"/>

</form>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:37:26.947

我首先从额外的标题中删除花括号并添加`\r\n`如下：

```
if(mail('keith@kamtechnologyconsulting.com',
        'Contact Form Submission',$body,
        "From: ".$_POST['email']."\r\n")) {
    echo "Thank you message";
} else {
    //Maybe some appropriate logging and an errormessage here.
} 
```

您当然可以使用更高级的东西，并改用[PHPMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/)之类的东西。

# ios - NSURLConnection 委托创建

> ID：14607383
> 
> 赞同：-1
> 
> 时间：2013-01-30T15:19:43.357
> 
> 标签：ios, xcode, delegates

是否有自动方法在 Xcode 4.5.2 for iOS 中创建 NSURLConnection 委托？我的意思是我添加了一个新的类，并在 Xcode 中将它的类指示为 NSURLConnection。但是没有创建具有相应委托方法的委托文件。我应该手动执行此操作，还是什么？如果是这样，我是否只需将委托方法添加到为我创建的文件（BSUrl.h/.m）中？

我认为我不需要 UIWebView，因为我不想查看我请求的页面，而只想解析它（我希望使用 NSRegularExpressionSearch 和 NSTextCheckingResult）。但如果缺少 UIWebView 是问题，请告知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:26:21.247

您需要手动添加。您可以创建自定义 NSURLConnection 并创建自定义委托、要实现的协议或您想要的任何东西。您也可以创建一个 NSURLConnection 类别。如果您感兴趣，请在此处阅读更多内容：http: [//developer.apple.com/documentation/General/Conceptual/DevPedia-CocoaCore/Category.html](http://developer.apple.com/documentation/General/Conceptual/DevPedia-CocoaCore/Category.html)

# deployment - 运行 puppet apply 时，Puppet 不启动服务（清漆）

> ID：14607385
> 
> 赞同：5
> 
> 时间：2013-01-30T15:19:45.393
> 
> 标签：deployment, automation, puppet

我有一个木偶清单，它指出服务“清漆”应该正在运行，但事实并非如此。

我定义了另一个服务 apache2，它运行良好，并且在我运行 puppet apply 时就开始使用。

```
vagrant@lucid32:~$ sudo netstat -tunelp
Active Internet connections (only servers)
Proto Recv-Q Send-Q Local Address           Foreign Address         State       User       Inode       PID/Program name
tcp        0      0 0.0.0.0:22              0.0.0.0:*               LISTEN      0          3749        605/sshd        
tcp        0      0 127.0.0.1:6010          0.0.0.0:*               LISTEN      1000       5169        1110/0          
tcp        0      0 0.0.0.0:48828           0.0.0.0:*               LISTEN      0          3445        552/rpc.statd   
tcp        0      0 0.0.0.0:111             0.0.0.0:*               LISTEN      0          3228        484/portmap     
tcp6       0      0 :::22                   :::*                    LISTEN      0          3751        605/sshd        
tcp6       0      0 ::1:6010                :::*                    LISTEN      1000       5168        1110/0          
udp        0      0 0.0.0.0:68              0.0.0.0:*                           0          4179        917/dhclient    
udp        0      0 0.0.0.0:68              0.0.0.0:*                           0          3277        558/dhclient3   
udp        0      0 0.0.0.0:728             0.0.0.0:*                           0          3430        552/rpc.statd   
udp        0      0 0.0.0.0:111             0.0.0.0:*                           0          3227        484/portmap     
udp        0      0 0.0.0.0:54265           0.0.0.0:*                           0          3442        552/rpc.statd   
udp        0      0 10.0.2.15:123           0.0.0.0:*                           102        4259        904/ntpd        
udp        0      0 127.0.0.1:123           0.0.0.0:*                           0          4208        904/ntpd        
udp        0      0 0.0.0.0:123             0.0.0.0:*                           0          4203        904/ntpd        
udp6       0      0 fe80::a00:27ff:feb5:123 :::*                                0          4210        904/ntpd        
udp6       0      0 ::1:123                 :::*                                0          4209        904/ntpd        
udp6       0      0 :::123                  :::*                                0          4204        904/ntpd        
vagrant@lucid32:~$ 
```

应用木偶：

```
vagrant@lucid32:~$ sudo puppet apply --verbose /vagrant/manifests/default.pp 
info: Applying configuration version '1359558916'
notice: /Stage[main]/Apachevarnish/Service[apache2]/ensure: ensure changed 'stopped' to 'running'
notice: Finished catalog run in 0.15 seconds 
```

但是清漆没有启动。

这是清单文件：

```
 class apachevarnish {

  Package { ensure => "installed" }

  package { "apache2": }
  package { "varnish": }

  file { '/etc/hosts':
    ensure => link,
    target => "/vagrant/hosts",
    force  => true
  }

  file { '/var/www':
    ensure => link,
    target => "/vagrant",
    notify => Service['apache2'],
    force  => true
  }

  file { '/etc/varnish':
    ensure => link,
    target => "/vagrant/etc/varnish",
    # notify => Service['varnish'],
    force  => true
  }

  service { "varnish":
    ensure => running,
    require => Package["varnish"],
  }

  service { "apache2":
    ensure => running,
    require => Package["apache2"],
  }

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-30T18:23:06.617

回答我自己的问题：

据此：[https](https://projects.puppetlabs.com/issues/12773) ://projects.puppetlabs.com/issues/12773问题在于 Ubuntu 初始化脚本，或者“服务”命令没有返回正确的退出代码。

解决方案是使用 grep 和服务设置自定义状态检查。

```
 service { "varnish":
    ensure => running,
    enable  => true,
    hasrestart => true,
    hasstatus => true,
    status => '/usr/sbin/service  varnish status | grep "is running"',
    require => Package["varnish"],
  } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-19T02:47:20.167

文档说 puppet 期望服务的 initscript 有一个“状态”命令，如果服务正在运行，则返回 0，否则返回非零值。这是 puppet 的默认行为。尝试做一个

```
$> sudo service <service_name> status
$> echo $? //Make sure you are getting the correct return values that puppet expects. 
```

如果您的 initscript 没有在服务指令块中为您提供所需的返回类型集“ ***hasstatus => false” ，请尝试一下。***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-28T13:14:24.120

这工作正常：

```
 service { $service:
    ensure     => running,
    enable     => true,
    status     => "/usr/sbin/service  ${service} status",
    require    => Package["$service"],
  } 
```

# r - 使用 if 函数更改矩阵中的值

> ID：14607389
> 
> 赞同：1
> 
> 时间：2013-01-30T15:19:52.443
> 
> 标签：r

我有一个由元素及其评级组成的矩阵，例如

```
matrix(data=c("A","B","C",NA,0.7,0.5,0,NA,"D","E","F","G",0.9,0.4,0.2,0.005),nrow=4,byrow=FALSE)

    [,1] [,2]  [,3] [,4]   
[1,] "A"  "0.7" "D"  "0.9"  
[2,] "B"  "0.5" "E"  "0.4"  
[3,] "C"  "0"   "F"  "0.2"  
[4,] NA   NA    "G"  "0.005" 
```

我想用 NA 替换所有小于 0.1 的评级（以及它们旁边的元素）。

例如

```
matrix(data=c("A","B",NA,NA,0.7,0.5,NA,NA,"D","E","F",NA,0.9,0.4,0.2,NA),nrow=4, byrow=FALSE)

    [,1] [,2]  [,3] [,4]  
[1,] "A"  "0.7" "D"  "0.9"  
[2,] "B"  "0.5" "E"  "0.4"  
[3,] NA   NA    "F"  "0.2"  
[4,] NA   NA    NA   NA 
```

当我认为必须有更好的方法时，我正要在一个大的 for 循环中执行此操作。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:28:51.890

在您的示例中，“C”转到 NA。我认为这是一个错误，所以我没有复制它。

```
mat <- matrix(data=c("A","B","C",NA,0.7,0.5,0,NA,"D","E","F","G",0.9,0.4,0.2,0.005),nrow=4,byrow=FALSE)
mat[mat < 0.1] <- NA 
```

此外，如果您真正存储元素及其评级，也许 data.frame 会是更好的选择：

```
> data.frame(element=toupper(letters[1:7]), rating=c(0.7,0.5,0,0.9,0.4,0.2,0.005))
   element  rating
1        A   0.700
2        B   0.500
3        C   0.000
4        D   0.900
5        E   0.400
6        F   0.200
7        G   0.005 
```

然后，您可以使用以下命令创建这些值及其整行 NA：

```
> df[df[,"rating"] < 0.1,] <- NA
> df
  element rating
1       A    0.7
2       B    0.5
3    <NA>     NA
4       D    0.9
5       E    0.4
6       F    0.2
7    <NA>     NA 
```

最后，这是将矩阵转换为 data.frame 的方法

```
elements <- as.vector(mat[,seq(from=1, to=ncol(mat),by=2)])
ratings <- as.vector(mat[,seq(from=2, to=ncol(mat),by=2)])
df <- data.frame(element=elements,rating=ratings) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:13:08.840

我同意其他人。最好将矩阵用于数字，将 data.frame 用于不同的 tpes 列。

您并不清楚元素 < 0.1 旁边的元素是什么意思，但可以从相邻（左）的评论字符中理解。

这是我的解决方案。我将您的矩阵转换为向量以进行简单索引，然后将其再次转换为矩阵。

```
mat <- matrix(data=c("A","B","C", NA,
                     0.7,0.5,0,NA,
                     "D","E","F","G",
                     0.9,0.4,0.2,0.005),
                     nrow=4,byrow=FALSE)
dim(mat) <- NULL
mat[c(which(mat<0.1)-4,which(mat<0.1))] <- NA
matrix(mat,nrow=4,byrow=F)

   [,1] [,2]  [,3] [,4] 
[1,] "A"  "0.7" "D"  "0.9"
[2,] "B"  "0.5" "E"  "0.4"
[3,] NA   NA    "F"  "0.2"
[4,] NA   NA    NA   NA 
```

# url-rewriting - IIS UrlRewrite 不适用于 IIS 8

> ID：14607390
> 
> 赞同：27
> 
> 时间：2013-01-30T15:19:54.033
> 
> 标签：url-rewriting, web-config, iis-8

我刚刚将我的网站从一台具有 IIS 7.5 的使用 IIS 8 的新计算机移至。除了 URL 重写之外，所有的都运行良好。没有比`"HTTP Error 404.0 - Not Found"`我得到的错误消息。我只认识到，`RewriteModule (%SystemRoot%\system32\inetsrv\rewrite.dll)`在网站>模块设置页面中有一个条目，但是 IIS 8 没有相同的模块。即使我在 IIS 8 中添加了相同的模块，它也没有用。如果我能对如何解决问题提出一些建议，我会很高兴。可根据要求提供更多信息..

希望我能正确表达我的意思。！

提前致谢，

阿尔珀

ps：网址规则运行良好..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-20T09:27:12.150

首先，您必须检查 rewrite url 是否正常工作，请按照以下示例教程进行操作：

[http://www.iis.net/learn/extensions/url-rewrite-module/using-failed-request-tracing-to-trace-rewrite-rules](http://www.iis.net/learn/extensions/url-rewrite-module/using-failed-request-tracing-to-trace-rewrite-rules)

如果没有，请打开 IIS8 并检查是否显示 URL 重写图标。如果没有从这里下载 msi：

[http://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

并重新安装模块。现在，您可以在根节点（服务器节点）以及网站和 Web 应用程序节点上的 IIS 管理器中看到 URL 重写模块。

希望能帮助到你！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-06-23T08:36:16.410

转到IIS管理器->服务器节点->应用程序请求路由缓存->服务器代理设置->选中启用代理复选框。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-05-08T10:22:12.343

我忘记为要重定向的域添加绑定。例如重定向到[https://www.example.com](https://www.example.com)通常需要以下绑定：

*   [https://www.example.com](https://www.example.com)
*   [https://example.com](https://example.com)
*   [http://www.example.com](http://www.example.com)
*   [http://example.com](http://example.com)

这些重定向规则（[来自 SO](https://stackoverflow.com/questions/33882350/iis-8-redirect-url-from-http-to-https)）然后对我有用：

```
<rule name="Redirect from non www" stopProcessing="true">
    <match url=".*" />
    <conditions>
      <add input="{HTTP_HOST}" pattern="^example.com$" />
    </conditions>
    <action type="Redirect" url="https://www.example.com/{R:0}" redirectType="Permanent" />
  </rule>
  <rule name="Redirect from non https" stopProcessing="true">
    <match url=".*" />
    <conditions>
      <add input="{HTTPS}" pattern="^OFF$" />
      <add input="{HTTP_HOST}" pattern="^www.example.com$" />
    </conditions>
    <action type="Redirect" url="https://www.example.com/{R:0}" redirectType="Permanent" />
  </rule> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-12-27T07:26:16.977

我花了几个小时解决这个问题。我经历了一些步骤并让重写模块正常工作。

1.  重新安装重写模块。如果您在 IIS 和已安装的应用程序列表中没有看到此模块，但 rewrite 安装程序说 thar 已安装，请转到注册表 ( `HKLM/SOFTWARE/MICROSOFT/WINDOWS/CURRENTVERSION/Uninstall`) 并 serach 'rewrite'。找到卸载字符串并运行它。它将删除重写模块，您可以从头开始安装。
2.  为 IIS 安装应用程序请求路由模块。
3.  重要的！如果您已经拥有带有规则的 web.config，请将其删除。通过 IIS 菜单创建/添加规则。这样 IIS 将激活重要的 ARP 模块。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-22T08:44:51.833

在 Windows Service 2008 到 Windows Service 2012 更新之后，我遇到了类似的问题，虽然我还没有完全测试过，但我所做的只是专门卸载/重新安装重写模块。

希望这可以帮助任何有同样问题的人。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-08-06T20:53:47.883

我也有这个问题。正如 OP 所注意到的，.dll 没有注册。安装程序说一切都很好，重写图标在 IIS 管理器中，但它不起作用。检查 .dll 是否存在（参见下面的路径）。使用微软记事本，真的，我不是在开玩笑，它必须是微软记事本，甚至Visual Studio都无法使用。以管理员身份启动记事本并打开 C:\Windows\System32\inetsrv\Config\applicationHost.config

将以下行添加到`<globalModules>`节点。

```
<add name="RewriteModule" image="%SystemRoot%\system32\inetsrv\rewrite.dll" /> 
```

保存并立即尝试您的规则。

确实它必须是记事本，如果您尝试在 64 位系统上使用其他任何东西编辑 applicationHost.config，您将花费数小时的时间。我见过的最奇怪的窗户异常之一。 [http://weblog.west-wind.com/posts/2008/Aug/09/Editing-Applicationhostconfig-on-64-bit-Win2008](http://weblog.west-wind.com/posts/2008/Aug/09/Editing-Applicationhostconfig-on-64-bit-Win2008) [http://dpotter.net/technical/2009/11/editing-applicationhostconfig-on -64 位窗口/](http://dpotter.net/technical/2009/11/editing-applicationhostconfig-on-64-bit-windows/)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-08-14T06:22:46.660

打开 IIS Manager > Server > Modules > Configure Native Modules 在列表中，选择 RewriteModule 并单击 OK

[IIS 配置](http://i.stack.imgur.com/jqJvs.png)

这对我有用。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-05-01T10:11:59.543

对我来说，我的 URL 重写在 IIS7.5 中有效，但在 IIS8 中无效

问题是模式

在 IIS7.5 中，我将模式写为`off`

在 IIS8 中，我必须将其更新为`^OFF$`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-30T17:43:44.027

你可以试试这个方法。经过一点谷歌搜索，你不是唯一一个有这个问题的人 --> [http://forums.iis.net/t/1173537.aspx/1](http://forums.iis.net/t/1173537.aspx/1)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-01-31T21:28:37.767

我找不到导致问题的原因，但我今天刚刚通过重新安装 Windows 服务器和 IIS 8 解决了这个问题。

感谢您的关注和宝贵的时间，

阿尔珀

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-10-21T00:36:38.970

还要检查：确保此设置是`false`因为否则在 URL 重写重写 URL 之后，.NET 应用程序可能会将其重新路由回去。

```
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-09-01T20:02:28.843

它有助于检查和修复重写规则。我知道它更早起作用，但我不知道要更改它。

# t4 - 控制 T4 模板生成的文件名？

> ID：14607395
> 
> 赞同：12
> 
> 时间：2013-01-30T15:20:10.507
> 
> 标签：t4

如何指示 T4 模板生成具有给定文件名的结果文件？

我会尽量说得更清楚。假设我有一个名为 Insert.tt 的模板，它生成将记录插入表的代码。它的输出扩展名为“sql”，因此它创建了一个名为：

插入.sql

没关系，但我希望文件名能够反映我正在尝试做的任何事情。假设我正在为其生成插入的表的名称存储在 <#= TableName #> 中。我想将它传递给模板生成器并让它使用它来保存结果文件。

即 <# SaveTemplateAs("Insert" + TableName); #>

因此，假设我为表用户、地址和电话生成插入语句。

我希望将生成的文件命名为 InsertUser.sql、InsertAddress.sql 和 InsertPhone.sql。

我很确定这可以完成，因为我已经看到了一些自定义扩展来从单个模板生成多个文件，但我不理解实现这一点的简单（不是矫枉过正）的方法。

谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-09-03T14:27:51.660

`.tt`不幸的是，文件本身似乎不可能。`.csproj`但是您可以在文本模板所在的项目文件中控制输出文件名。从 Visual Studio 解决方案中卸载项目并`.csproj`直接在文本编辑器中打开项目文件。

在那里您可以找到模板文件的参考。

该节点`<LastGenOutput>`控制输出文件名。您可以在此处选择所需的文件名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T07:57:51.217

据我所知，T4 中没有生成多个输出文件的内置功能。但你是对的，那里有很多样本可以告诉你如何处理多个输出文件。

也许这篇博文可以帮助您解决问题：

[http://t4-editor.tangible-engineering.com/blog/how-to-generate-multiple-output-files-from-a-single-t4-template.html](http://t4-editor.tangible-engineering.com/blog/how-to-generate-multiple-output-files-from-a-single-t4-template.html)

该编辑器是免费的，并附带免费示例——其中包括将 T4 输出拆分为具有不同名称和/或扩展名的不同文件的代码。

# json - Jackson mixin 注释以包含某些属性并排除其他所有内容

> ID：14607397
> 
> 赞同：13
> 
> 时间：2013-01-30T15:20:14.903
> 
> 标签：json, cxf, jackson

我有一个第三方域对象，我希望使用 Jackson 将其序列化为 JSON。有很多可以通过公共 getter 访问的属性，但我只对其中的一小部分感兴趣。由于这是第三方对象，我选择了 mixin 路线。但是，除了在 mixin 接口上定义的内容之外，我找不到从原始类中排除所有内容的好方法。我试图在 mixin 类上指定 @JsonIgnoreProperties，但它很快就会因为要忽略的大量属性而失控。任何解决方法？

提前致谢！

编辑：添加一些代码

```
public class SpecialObject {
private String name;
private Integer id;
public String getName() {
    return name;
}
public Integer getId() {
    return id;
}
public String getFoo() {
    return "foo";
}
}

public interface SpecialObjectMixin {
    @JsonProperty
    String getName();
} 
```

我希望我只会在序列化的 JSON 中获得名称。顺便说一句，我通过 cxf-jaxrs 使用它来进行宁静的呼叫，杰克逊作为提供者。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-30T16:03:50.217

想出了一个办法

```
@JsonAutoDetect(getterVisibility = Visibility.NONE, isGetterVisibility = Visibility.NONE)
public interface SpecialObjectMixin {

    @JsonProperty
    String getName();
} 
```

# java - Java 持久键值存储

> ID：14607400
> 
> 赞同：4
> 
> 时间：2013-01-30T15:20:31.380
> 
> 标签：java, cassandra, hbase, key-value-store

我知道这可能已经被问过无数次了，但我似乎无法为我的确切用例找到黄金解决方案。

我只有一个数据结构，一个键是字符串的映射。地图的对象是地图本身，但这次的值是简单的对象/原语，例如字符串、整数、双精度等。所以地图的地图。最内层映射的键是恒定的，即除了创建时，不会从最内层映射添加/删除任何条目。所以它有点像传统的表格，尽管每一行可能有任意列。

我需要这个数据结构是持久的和复制的。

以下是我的要求：

1.  纯Java解决方案
2.  磁盘映射仅在重新启动时使用。因此永远不会从磁盘读取任何内容，并且所有写入仅由一个应用程序完成）
3.  嵌入式。
4.  表现。重要的是现有记录的 UPDATE 性能。更新可能每秒发生 100k 次（但更可能是每秒 20-50k）。至于插入/删除，它们当然会发生，但每天可能只有几次。因此，我不太担心 INSERT/DELETE 性能。
5.  复制。为了恢复弹性，我需要复制地图的磁盘副本。从 master 到 slave 的复制不需要是原始事务的一部分，即我可以牺牲一些 ACIDness 来换取性能。
6.  记录数预计为 100k-200k，但不会高很多。每条记录的大小可能是 100-200 KB，所以总共没有那么多数据。我猜数据文件的总大小将低于 100 MB，这可能是偏高的估计。
7.  数据总量不超过它始终可以容纳在内存中。（这就是为什么我可以保证不会有磁盘读取，除了在启动期间）
8.  我的应用程序没有分发。在任何给定时间点，只有一个活动进程写入磁盘。
9.  自由开源许可证。（Apache、BSD、LGPL，应该没问题）

所讨论的应用程序不需要存储上述数据结构之外的任何内容，即它不会有未来对其他持久性数据结构的未发现需求。因此，基于这种特定的数据结构进行优化听起来很公平。

我看过 Berkeley DB Java 版，但它在要求 #6 上失败了。我已经查看了 TokyoCabinet/KoyotoCabinet，但它在要求 #1 上失败了。

那么你会推荐什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:37:15.990

有几种选择，但[neo4j](http://www.neo4j.org/learn/neo4j)似乎符合您的要求。 [HBase](http://hbase.apache.org/)和[Cassandra](http://cassandra.apache.org/)也是选项，但可能超出您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T16:06:39.503

看看`HazelCast`。它满足您的大部分要求，除了它是分布式的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T23:30:32.250

你看过[Redis](http://redis.io/)吗？恕我直言，它是一个内存中的“数据库”（键值存储），可以满足您的所有需求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-08T17:30:57.387

我认为[Chronicle Map](https://github.com/OpenHFT/Chronicle-Map)非常适合您的情况

*   纯 Java，可嵌入的键值存储
*   内存中，可选择持久化到磁盘
*   [支持单线程每秒 1M 写入](http://vanillajava.blogspot.com/2014/10/chronicle-map-and-yahoo-cloud-service.html)
*   具有非阻塞、最终一致的复制，针对高更新率进行了优化
*   LPGLv3 许可证

# java - 如何将日历事件写入谷歌网络日历？

> ID：14607403
> 
> 赞同：0
> 
> 时间：2013-01-30T15:20:38.200
> 
> 标签：java, android, web, calendar

我尝试将事件写入网络中的谷歌日历，但此代码仅将我的事件写入语言环境 android 日历。我需要将事件写入两个日历。请帮忙。

```
public void writeCalendar() {
        ContentValues event = new ContentValues();
        event.put("calendar_id", mCalendarId);    
        event.put("title", "Beaty and fun");
        event.put("description", "This is a simple test for calendar api");
        event.put("dtstart", System.currentTimeMillis());
        event.put("dtend", System.currentTimeMillis() + 1800*1000);
        event.put("allDay", 0);
        event.put("eventStatus", 0);
        event.put("visibility", 0);
        event.put("transparency", 0);
        event.put("hasAlarm", 0);
        Uri l_eventUri;
        if (Build.VERSION.SDK_INT >= 8 ) {
            l_eventUri = Uri.parse("content://com.android.calendar/events");
        } else {
            l_eventUri = Uri.parse("content://calendar/events");
        }
        Uri eventUri =    Resources.instance().getActivity()
                 .getContentResolver().insert(l_eventUri, event);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:08:54.347

您需要使用[Google Calendar Api](https://developers.google.com/google-apps/calendar/)对用户进行身份验证并与 Google 通信。

要添加到两者，您必须为每个日历（本机和 Google）设置 2 个单独的操作，**或者**如果用户在其设备上下载了 Google 日历，则添加到 Google 日历将与他们设备上的 Google 日历应用程序同步，因此满足你的两个条件。

# javascript - 这两种 JavaScript 样式有什么区别？

> ID：14607404
> 
> 赞同：2
> 
> 时间：2013-01-30T15:20:38.727
> 
> 标签：javascript, coding-style

我已经在 J​​avaScript 中看到了几种样式。好奇它们在可读性、优化和变量范围方面的区别。优点和缺点将不胜感激。

方法一：

```
function MyObj(options) {
  this.options = options;
}
MyObj.prototype.getOptions = function() {
  return this.options;
}; 
```

方法B：

```
var MyObj = (function() {
  function MyObj(options) {
    this.options = options;
  }
  MyObj.prototype.getOptions = function() {
    return this.options;
  };
  return MyObj;
})(); 
```

有人曾经说过包装器是用于处理 IE 中的命名函数。我注意到，通过放置一个包装器，可以划分对对象来说是*静态的变量和函数。*

然而，我也有很多人抱怨包装效率低下或奇怪。CoffeeScript 也可以编译成方法 B。那么，当手工编写 JS 时，最佳实践是什么？什么时候应该使用一种方法而不是另一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:23:37.913

第二个是使用模块模式。在这个简化的示例中，没有真正的区别，但是对于变量封装，通常应该首选第二个，另外它可以避免不必要地污染全局命名空间。

# sql - 将一个表的每一列与另一个表的每一列进行比较

> ID：14607405
> 
> 赞同：0
> 
> 时间：2013-01-30T15:20:49.430
> 
> 标签：sql, oracle, oracle10g

我在两个数据库中有两个表，其中一个是从另一个表中复制的（通过 informatica 映射，我不能通过简单的插入替换它），所以我需要查看每一列是否具有与原始表相同的数据。如果我想测试一列，我会：

```
Select column1
from 
table1
minus
Select column1
from 
table2@dblink 
```

如果我对具有 100 列的表的每一列都执行此操作，那将是浪费时间。我试过这个来比较：

```
Select column1,column2,.....column N
from 
table1
minus
Select column1,column2,.....column N
from 
table2@dblink 
```

但是，即使一列不匹配，它也会返回所有值。所以我想知道最好的方法是什么，以便我的脚本比较两个表并返回不具有相同值的列。

我想到的另一个标准是：

```
select 
(case when T.column1 <> P.column1 then T.id else null),
...
...
...
from
table1 T,
schema.table1@dblink P
where
T.id=P.id
and T.date>='01-DEC-2012'
and T.date<='10-DEC-2012'
and P.date>='01-DEC-2012'
and P.date<='10-DEC-2012'; 
```

我曾经使用 date 功能来提高性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:41:30.840

使用 oracle [except 关键字](http://download.oracle.com/otndocs/products/rdb/pdf/tech_archive/except_intersect_minus_ops.pdf)

```
Select * from tableA
except 
Select * from tableb 
```

这将为您提供 a 而不是 b 中存在的所有行

```
select * from tableb
except 
select * from tablea 
```

这将为您提供 b 而不是 a 中存在的所有行

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-30T19:10:35.367

甚至不打扰做测试。截断 Table_B 并从 Table_A 插入到 Table_B。如果您不希望 Table_B 更改，请将其设为只读。

# android - Android手机GPS不应该更准确吗

> ID：14607408
> 
> 赞同：0
> 
> 时间：2013-01-30T15:20:58.557
> 
> 标签：android, gps

我正在制作一个应用程序来监控我的 GPS，然后进行一些计算，发现从度到米的转换为 1deg = 111325m。在我的手机上获取 GPS 坐标时，它位于小数点后 8 位。所以 .00000001 *111325 = .001m ，所以我的手机 GPS 在技术上不应该至少能精确到几分之一米吗？任何人都知道我的想法哪里出了问题或我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:33:02.903

> 所以我的手机 GPS 在技术上不应该至少能精确到几分之一米吗？

不。

> 任何人都知道我的想法哪里出了问题或我错过了什么？

除法之类的数学运算可以引入许多小数位，这些小数位超出了基础科学所支持的范围。例如，pi 的值有无限位小数；这并不意味着您可以无限准确地知道橙子的周长。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T22:25:13.253

你混淆了两件事：

1）API中纬度、经度坐标表示变量的传递分辨率：可以是double或float。2) GPS 位置的物理精度，相对于真实位置。

（还有第三件事：GPS 接收器内部的坐标分辨率，过去是 4 字节整数，可能是 3 厘米，现在使用 8 字节长。）

今天的 GPS 接收器通常具有 3 - 6m 的精度。

关于您的小数点后 8 位：纬度/经度小数点后的 7 位可以转换为 4 字节整数，从而提供 3cm 分辨率。所以很有可能，一些内部 API 或 GPS CHIP 使用 4 字节 int 来表示坐标。

然而，通过一些技巧，你可以达到你想要的几分之一米。这可以通过在手机不动时对多个位置进行平均来实现。

在 iphone 上这不起作用，因为 API 被禁止在静止不动时传递位置，但也许这适用于某些 android 手机。

# android - 控制android片段创建顺序

> ID：14607411
> 
> 赞同：2
> 
> 时间：2013-01-30T15:21:13.233
> 
> 标签：android, android-fragments, android-activity, fragmentpageradapter

所以，我在 FragmentActivity 中有 3 个片段。我有一个带有一些容器等的 xml 布局文件，所以我`setContentView(R.layout.my_activity)`然后以编程方式添加 3 个片段。其中 2 个片段与 FragmentPagerAdapter 一起使用，以便我可以在它们之间滑动。

现在，我需要在另一个片段之前**创建**2 个可滑动片段（例如，片段 1 和 2 的 onCreateView 方法应该在片段 3 的 onCreateView 方法之前*调用**）*。但是，始终首先创建片段 3。编码：

```
public class MyActivity extends FragmentActivity {

private ViewPager viewPager;
private MyPagerAdapter pagerAdapter;
private Fragment1 fragment1;
private Fragment2 fragment2;
private Fragment3 fragment3;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.my_activity);
    initViewPager();
    initFragment3();
}

private void initViewPager() {
    List<Fragment> pagerFragments = new LinkedList<Fragment>();
    fragment1 = (Fragment1) Fragment.instantiate(this, Fragment1.class.getName());
    fragment2 = (Fragment2) Fragment.instantiate(this, Fragment2.class.getName());
    pagerFragments.add(fragment1);
    pagerFragments.add(fragment2);
    pagerAdapter = new MyPagerAdapter(getSupportFragmentManager(), pagerFragments);
    viewPager = (ViewPager) findViewById(R.id.fragment_pager);
    viewPager.setAdapter(pagerAdapter);
}

private void initStatsFragment() {
    fragment3 = new Fragment3();
    FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
    transaction.add(R.id.fragment3_container, fragment3);
    transaction.commit();
}
    ... 
```

我还尝试使用上面的代码替换*initViewPager*方法：

```
...
...
private void initViewPager() {
    List<Fragment> pagerFragments = new LinkedList<Fragment>();
    fragment1 = new Fragment1();
    fragment2 = new Fragment2();
    FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
    transaction.add(R.id.swipe_fragment_container, fragment1);
    transaction.add(R.id.swipe_fragment_container, fragment2);
    transaction.commit();
    pagerFragments.add(fragment1);
    pagerFragments.add(fragment2);
    pagerAdapter = new MyPagerAdapter(getSupportFragmentManager(), pagerFragments);
    viewPager = (ViewPager) findViewById(R.id.fragment_pager);
    viewPager.setAdapter(pagerAdapter);
}
    ...
    ... 
```

但这会*在启动*时产生错误并崩溃，类似于以下内容：

```
01-30 15:05:06.250: E/AndroidRuntime(2772): java.lang.IllegalStateException: Can't change container ID of fragment Fragment1{416461c8 #1 id=0x7f0b0003 android:switcher:2131427332:0}: was 2131427331 now 2131427332 
```

谁能告诉我如何完成我正在尝试做的事情，或者建议我可以尝试的事情？我还应该提到，重构使得片段依赖动作从它们的构造函数中执行不是一种选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:26:19.630

正如我的问题下面的评论中所指出的，我决定重构我的代码以删除片段之间的依赖关系是最好的方法。我不能/不应该依赖引擎盖下发生的事情（即 Android 片段实例化/创建顺序）让我的代码也按我的预期运行。

# ruby-on-rails - crontab 错误中的 Rails 任务

> ID：14607412
> 
> 赞同：0
> 
> 时间：2013-01-30T15:21:23.610
> 
> 标签：ruby-on-rails, cron, whenever

使用 lubuntu 12.10、ruby 1.9.3p374（不是 RVM）、Gem 1.8.23 和 Rails 3.2.11

我最近刚刚安装了Whenever gem 来创建将定期运行的任务。我创建了每 1 分钟运行一次的任务，并将其设置为使用：

```
whenever --update-crontab myproject --set environment=development 
```

此命令将以下条目放入我的 crontab 中：

```
* * * * * /bin/bash -l -c 'cd /home/myuser/projects/myproject && script/rails runner -e development '\''FileImporter.execute'\'' >> /home/myuser/projects/myproject/log/cron_log.log 2>&1' 
```

等待一段时间后，我看到在我的 cron_log.log 文件中出现了同样的异常：

```
/usr/lib/ruby/1.9.1/rubygems/custom_require.rb:36:in 'require: cannot load such file -- bundler/script (LoadError) 
```

但是，当我在终端中手动运行以下命令时，一切正常：

```
/bin/bash -l -c 'cd /home/myuser/projects/myproject && script/rails runner -e development '\''FileImporter.execute'\'' >> /home/myuser/projects/myproject/log/cron_log.log 2>&1' 
```

如果需要更多信息，请告诉我，我对 rails/linux 世界很陌生，所以我可能遗漏了一些重要的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:49:53.003

在这里找到了类似问题的答案：[为什么 #!/usr/bin/env ruby​​ 在 crontab 中不起作用？](https://stackoverflow.com/questions/5241572/why-usr-bin-env-ruby-doesnt-work-in-crontab)

显然 PATH 在 cron 作业执行时没有设置，所以你必须在 crontab 中设置它。

运行 echo $PATH 以查看设置的 PATH 并将 PATH=/my/path/values 放在 crontab 文件的开头可以解决问题。

# c# - ASP.NET 图像预加载

> ID：14607416
> 
> 赞同：0
> 
> 时间：2013-01-30T15:21:31.450
> 
> 标签：c#, asp.net, image

我想预加载图像以防止屏幕闪烁... URL 每一秒都不同。我已经尝试过了，但在我的 ASP:Image 控件中看不到任何内容...

```
public void loadImage(string url)
{
    pictureBox3.ImageUrl = url;
    Thread.Sleep(200);
    pictureBox2 = pictureBox3.;
} 
```

有谁知道如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:26:13.043

当你使用时`Thread.Sleep`，你正在停止*服务器上*正在发生的事情；这会对客户端产生影响，但只会延迟更多，*然后*仍然会在用户在场的情况下产生图像下载成本（尽管它可能并不总是很明显）。

为此，请考虑使用一些[客户端脚本](http://api.jquery.com/jQuery.ajax/)在必要时发出[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)请求，这些调用可以在用户查看网页时在后台异步进行，并且只要请求始终领先于更改（您应该这样做，通过仅在图像请求完成时进行更改），您可以通过替换来更新图像（通过更新客户端标记，`src`图像的，而不是服务器端的更改） .

# php - 搜索更多列

> ID：14607417
> 
> 赞同：0
> 
> 时间：2013-01-30T15:21:33.203
> 
> 标签：php, sql, search

这是一个可以在数据库中搜索的程序。但我想搜索 Postcode 和 Huisnummer 列。但我尝试的一切都不起作用。任何人的想法

```
<!DOCTYPE html>
<html lang="nl">
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="index1.css" />
        <title>Inboedelwaarde op adres</title>
    </head>
    <body>
    <p>
        <form action="zoekadres.php" method="post"> 
        Postcode: <input type="text" name="term" /><br />       
        <input type="submit" name="submit" value="Zoek" />   
        </form>
    </p>
    </body>
</html>

<html lang="nl">
    <head>
        <meta charset="utf-8">
        <title>Inboedelwaarde</title>
    </head>
    <body>  
        <?php      
        mysql_connect ("localhost", "root","")  or die (mysql_error());
        mysql_select_db ("inboedelmeter");
        $term = $_POST['term'];
        $sql = mysql_query("SELECT Postcode, Huisnummer, Toevoeging, Inboedelwaarde 
                            FROM puntentotaal 
                            WHERE Postcode like '%$term%'");
            while ($row = mysql_fetch_array($sql)){  
            echo 'Postcode: '.$row['Postcode'];    
            echo '<br/> Huisnummer: '.$row['Huisnummer'];    
            echo '<br/> Toevoeging: '.$row['Toevoeging'];    
            echo '<br/> Uw inboedelwaarde is EURO € '.$row['Inboedelwaarde'];
            echo '<br/><br/>';
            }
                echo "<p><form action='adresbekijken.php' method='post'>
                        <input type='submit' name='submit' value='Opnieuw zoeken'>"
        ?>
    </body>
</html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:28:23.333

尝试这个`WHERE Postcode like '%' . $term . '%'");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:36:34.313

在代码上

```
$sql = mysql_query("SELECT Postcode, Huisnummer, Toevoeging, Inboedelwaarde FROM puntentotaal WHERE Postcode like '%$term%'"); 
```

您正在搜索所有字段。尝试将其更改为“SELECT Postcode, Huisnummer WHERE Postcode like '%$term%'”;”。

因此，您将只搜索该列。

# sql - SQL 中 3 个不同表的列总和

> ID：14607422
> 
> 赞同：0
> 
> 时间：2013-01-30T15:21:47.133
> 
> 标签：sql

我在 SQL Server 2005 中有 Rep_table、Selling、Upgrade 和 Delivery 等表。

我正在尝试获取销售、升级和交付中的列总和。Rep_Table 具有列 Rep_TableID、CommID 和 MerchantID。销售有 SellingID、Rep_TableID、AmountSold、S_AmountCollected，升级有列 UpgradingID、Rep_TableID、AmountUpgraded、U_AmountCollected 交付有列 DeliveryID、Rep_TableID、D_AmountCollected

Rep_Table 将有 3 条记录，每条记录用于销售、升级和交付。我的目标是获得已售出和升级的总和，从 3 张桌子和余额中收集的所有总和。

当我尝试以下查询时，我看不到连接运行良好。此查询为我提供了 1 行中的销售、1 行中的升级信息和每个商家的另一行中的交付。我正在寻找的是所有计算都应该完成并且每个商家都在 1 行中。我希望我清楚我在问什么。提前谢谢大家！

```
Select *, isnull(cast(S.AmountSold as numeric(10,2)), 0) + isnull(cast(U.AmountUpgraded as numeric(10,2)), 0) as AmountSold,
isnull(cast(S.S_AmountCollected as numeric(10,2)), 0) + isnull(cast(U.U_AmountCollected as numeric(10,2)), 0) + isnull(cast(D.D_AmountCollected as numeric(10,2)), 0) as AmountCollected,
(isnull(cast(S.AmountSold as numeric(10,2)), 0) + isnull(cast(U.AmountUpgraded as numeric(10,2)), 0)) - 
(isnull(cast(S.S_AmountCollected as numeric(10,2)), 0) + isnull(cast(U.U_AmountCollected as numeric(10,2)), 0) + + isnull(cast(D.D_AmountCollected as numeric(10,2)), 0) ) as Balance

 from Rep_Table RD
inner join Merchant M on M.MerchantID = RD.MerchantID --for MerchantInfo
left outer join SellingInfo S on S.RepInfoID = RD.RepInfoID
left outer join UpgradingInfo U on U.RepInfoID = RD.RepInfoID
left outer join DeliveryInfo D on D.RepInfoID = RD.RepInfoID
where RD.CommuniTeeID = @CommuniTeeID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:46:43.437

好的，给下面一个镜头：

```
Select sum(isnull(cast(S.AmountSold as numeric(10,2)), 0) + isnull(cast(U.AmountUpgraded as numeric(10,2)), 0)) as AmountSold
    , sum(isnull(cast(S.S_AmountCollected as numeric(10,2)), 0) + isnull(cast(U.U_AmountCollected as numeric(10,2)), 0) + isnull(cast(D.D_AmountCollected as numeric(10,2)), 0)) as AmountCollected
    , sum((isnull(cast(S.AmountSold as numeric(10,2)), 0) + isnull(cast(U.AmountUpgraded as numeric(10,2)), 0)) - (isnull(cast(S.S_AmountCollected as numeric(10,2)), 0) + isnull(cast(U.U_AmountCollected as numeric(10,2)), 0) + + isnull(cast(D.D_AmountCollected as numeric(10,2)), 0) )) as Balance
from Rep_Table RD
inner join Merchant M on M.MerchantID = RD.MerchantID --for MerchantInfo
left outer join SellingInfo S on S.RepInfoID = RD.RepInfoID
left outer join UpgradingInfo U on U.RepInfoID = RD.RepInfoID
left outer join DeliveryInfo D on D.RepInfoID = RD.RepInfoID
where RD.CommuniTeeID = @CommuniTeeID
group by m.MerchantID 
```

我在`SUM`你的每一列中都添加了一个（我删除了它，`*`因为它会使事情复杂化）并且我添加了一个`GROUP BY`on `m.MerchantID`。

# android - 从 NFC 标签读取数据

> ID：14607425
> 
> 赞同：4
> 
> 时间：2013-01-30T15:21:58.697
> 
> 标签：android, nfc

> **可能重复：**
> [Android NDEF 记录负载上的奇怪字符](https://stackoverflow.com/questions/7917567/strange-character-on-android-ndef-record-payload)

我正在尝试从 NFC 标签中读取一些纯文本。我的代码如下；

```
public void processReadIntent(Intent intent){

    Parcelable[] rawMsgs = intent.getParcelableArrayExtra(
            NfcAdapter.EXTRA_NDEF_MESSAGES);

    NdefMessage msg = (NdefMessage) rawMsgs[0];
    // record 0 contains the MIME type, record 1 is the AAR, if present
    Log.d("msg", msg.getRecords()[0].getPayload().toString());

    String PatientId=new String(msg.getRecords()[0].getPayload());     
    String UserName="nurse";
    String Password="nurse";

   Toast.makeText(getApplicationContext(), PatientId, Toast.LENGTH_LONG).show();

    //tv.setText(new String(msg.getRecords()[0].getPayload()));
} 
```

但是，这里的问题是当我读取数据时，我可以看到我想要的数据在开始时有一个“en”。 **例如：如果我在“john”中的实际数据，当我阅读时，我可以将其视为“enjohn”。** 我知道'en'是语言标题。但是如何删除它？

我尝试过使用子字符串，但在那之后甚至不工作......

关于如何删除此语言标头的任何想法？？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T15:40:54.133

可能，您在这里遇到同样的问题[以及](https://stackoverflow.com/questions/7917567/strange-character-on-android-ndef-record-payload)如何在[此处正确读取 NFC 标签](http://code.google.com/p/openmobster/wiki/NFC)

摘自第二个链接的片段。

```
 try
{
        byte[] payload = record.getPayload();

        /*
     * payload[0] contains the "Status Byte Encodings" field, per the
     * NFC Forum "Text Record Type Definition" section 3.2.1.
     *
     * bit7 is the Text Encoding Field.
     *
     * if (Bit_7 == 0): The text is encoded in UTF-8 if (Bit_7 == 1):
     * The text is encoded in UTF16
     *
     * Bit_6 is reserved for future use and must be set to zero.
     *
     * Bits 5 to 0 are the length of the IANA language code.
     */

         //Get the Text Encoding
        String textEncoding = ((payload[0] & 0200) == 0) ? "UTF-8" : "UTF-16";

        //Get the Language Code
        int languageCodeLength = payload[0] & 0077;
        String languageCode = new String(payload, 1, languageCodeLength, "US-ASCII");

        //Get the Text
        String text = new String(payload, languageCodeLength + 1, payload.length - languageCodeLength - 1, textEncoding);

    return new TextRecord(text, languageCode);
}
catch(Exception e)
{
        throw new RuntimeException("Record Parsing Failure!!");
} 
```

# css - 带CSS的圆形导航动画？

> ID：14607426
> 
> 赞同：0
> 
> 时间：2013-01-30T15:21:59.223
> 
> 标签：css, menu, html-lists

我正在尝试使用 CSS 制作圆形导航动画，但问题是当鼠标悬停在其中一个菜单链接上时，所有菜单都使用我只想在所选链接上出现的效果。有没有办法做到这一点？

这是我的结果的链接：http: [//jsfiddle.net/amromar/Fgnmw/](http://jsfiddle.net/amromar/Fgnmw/)

CSS：

```
#nav li {
list-style:none;
list-style-type:none;
display:table-cell;
ul.box li {  
    display: block;
    width:100px;height:100px;border-radius:1000px;font-size:20px;color:#fff;line-height:100px;text-align:center;background:#000; 

}
ul.box li{ -webkit-transition: width 0.2s ease, height 0.2s ease;  
    -moz-transition: width 0.2s ease, height 0.2s ease;  
    -o-transition: width 0.2s ease, height 0.2s ease;  
    -ms-transition: width 0.2s ease, height 0.2s ease;  
    transition: width 0.2s ease, height 0.2s ease; 
    overflow: hidden; }  

ul.box:hover li{  
display: block;
      width:200px;height:200px;border-radius:1000px;font-size:30px;color:#fff;line-height:100px;text-align:center;background:#333;
      overflow: hidden;  
} 
```

HTML：

```
<ul class="box" id="nav" >
<li >home</li>
<li><a href="#">about</a></li>
<li>our tour</li>
<li>contact</li>
<li>hellow</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:42:23.693

我最初认为（并已发布然后删除）您只需将 更改`:hover`为`li`元素，因此将此选择器`ul.box:hover li`更改为 this `ul.box li:hover`。但这只是解决方案的一部分，因为尺寸问题是你`display: table-cell`在`li`元素上的，这迫使它们扩展到包装器的高度。我相信我已经提出了一个可接受的解决方案来获得您似乎想要实现的目标（具有与`display: table-cell`唯一没有高度问题的类似的效果）。

## [这是小提琴。](http://jsfiddle.net/Fgnmw/19/)

**CSS**

```
#nav { 
   max-width: 500px; /* this keeps your five circles no more than 100px wide */
   margin: 20px auto; /* only needed if you are centering the nav */
   /* optional; you may want to clear the floats or give the nav a "float" to wrap
      the nav around the floated children inside. Whether you need to do this or 
      not depends on your application*/
}

#nav li {
   list-style:none;
   list-style-type:none;
   display:block;
   float: left;
}

ul.box li{  
    width:20%; /* Using the wrapper to set the width, 100px will be max without animation */
    height:100px; /* Keep the height fixed, even if narrow width "squeezes" the circle */
    border-radius:50px; /* half the max-width is all you need */
    font-size:20px;
    color:#fff;
    line-height:100px;
    text-align:center;
    background:#000;     
}

ul.box li { /* no changes here */
    -webkit-transition: width 0.2s ease, height 0.2s ease;  
    -moz-transition: width 0.2s ease, height 0.2s ease;  
    -o-transition: width 0.2s ease, height 0.2s ease;  
    -ms-transition: width 0.2s ease, height 0.2s ease;  
    transition: width 0.2s ease, height 0.2s ease; 
    overflow: hidden; 
}  

ul.box:hover li {
    /* cause the other li's to "shrink" to 
       accomodate the larger size of the one being hovered */
    width: 15%; 
}

ul.box li:hover {  
      width:40%; /* animate to twice the size for the one being hovered */
      height: 200px; /* make twice the fixed height */
      border-radius:100px;
      font-size:30px;
      color:#fff;
      line-height: 200px;
      text-align:center;
      background:#333;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:36:44.617

它们都显示了使用此选择器将效果应用于所有项目的效果：`ul.box:hover li`

相反，我给每个项目一个类，并将选择器设置为`.item:hover`

HTML：

```
<ul class="box boxr" id="nav" >
<li class="item">home</li>
<li class="item"><a href="#">about</a></li>
<li class="item">our tour</li>
<li class="item">contact</li>
<li class="item">hellow</li>
</ul> 
```

CSS：

```
#nav li{list-style:none;
list-style-type:none;
display:table-cell;

}
.nav ul{margin:20px;}

ul.box li{  
display: block;
    width:100px;height:100px;border-radius:1000px;font-size:20px;color:#fff;line-height:100px;text-align:center;background:#000; 

}
ul.box li{ -webkit-transition: width 0.2s ease, height 0.2s ease;  
    -moz-transition: width 0.2s ease, height 0.2s ease;  
    -o-transition: width 0.2s ease, height 0.2s ease;  
    -ms-transition: width 0.2s ease, height 0.2s ease;  
    transition: width 0.2s ease, height 0.2s ease; 
    overflow: hidden; }  

.item:hover
{  
display: block;
      width:200px;height:200px;border-radius:1000px;font-size:30px;color:#fff;line-height:100px;text-align:center;background:#333;
      overflow: hidden;  
} 
```

[http://jsfiddle.net/Fgnmw/7/](http://jsfiddle.net/Fgnmw/7/)

# sql - 返回两个完整月前的第一个月

> ID：14607427
> 
> 赞同：0
> 
> 时间：2013-01-30T15:21:59.987
> 
> 标签：sql, sql-server-2008

（轻微邀请发表意见）

这是返回两个完整月前的第一个月的最有效/可接受的方式：

```
SELECT DATEADD(mm,-2,GETDATE() - DAY(GETDATE())) + 1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:27:45.413

不确定这是否更快，但是...

```
SELECT DATEADD(m, DATEDIFF(m, 0, GETDATE()) -2, 0) 
```

[**SQL小提琴**](http://sqlfiddle.com/#!3/d41d8/8255/0)

计算与 '1900-01-01' 的月份差：

```
DATEDIFF(m, 0, GETDATE())  -- 1356 
```

将差额添加到“1900-01-01”减去两个月

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:41:43.883

只有两个操作：

```
SELECT DATEADD(month,DATEDIFF(month,'20010301',GETDATE()),'20010101') 
```

它利用两个固定日期之间的关系包括删除两个月，同时“规范化”日期以删除日期和时间信息。

* * *

这很好的地方在于，您可以使用它来实现其他难以正确完成的技巧，而无需跳过更多的障碍。比如两个月前一个月的*最后一天：*

```
SELECT DATEADD(month,DATEDIFF(month,'20010301',GETDATE()),'20010131') 
```

即使那个月的天数少于 31 天，它也能把事情做好

# wpf - MenuItem 启用样式在上下文菜单中不起作用

> ID：14607430
> 
> 赞同：2
> 
> 时间：2013-01-30T15:22:07.893
> 
> 标签：wpf, xaml, menu, styles, contextmenu

我正在`ExpressionDark`为我的 WPF 应用程序使用主题，它有一个自定义样式用于`MenuItems`. 当 a`MenuItem`被禁用时，它应该使用灰色样式来反映这一点，并且它适用于控件`MenuItems`内部`Menu`：

![工作菜单状态](../Images/acee620b7e5773b9124439a61acc46e2.png)

但是，它不适用于`MenuItems`（`ContextMenu`禁用复制）

![复制应该看起来像禁用](../Images/28824cf66379de1fe2b96f9b2af52a13.png)

我已将问题追查到 TextBlock 样式，如果我删除此样式，它适用于 ContextMenu，但其他样式会随着它的删除而中断

```
<Style TargetType="{x:Type TextBlock}">
    <Setter Property="Foreground" Value="{DynamicResource TextBrush}" />
</Style> 
```

**编辑：**无论我使用 a`MenuItem`还是我的 custom都没有关系`GestureMenuItem`，但重要的是我是否使用 _ char（对于快捷键）如果我删除 _ 那么该样式也不会起作用`MainMenu`。

的相关样式`MenuItem`：

```
<Trigger Property="IsEnabled" Value="false">
    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />
</Trigger> 
```

源代码在[这里](https://github.com/AndersMalmgren/FreePIE/blob/AvalonDock/FreePIE.GUI/Themes/ExpressionDark.xaml#L1932)找到。相关的`ContextMenu`XAML：

```
<TextBox x:Name="Text"
    Height="Auto"
    TextWrapping="Wrap"
    VerticalScrollBarVisibility="Visible"
    AcceptsReturn="True"
    IsReadOnly="true">
    <TextBox.ContextMenu>
        <ContextMenu>
            <MenuItem Header="Copy" Command="Copy">
                <MenuItem.Icon>
                    <Image Source="{StaticResource IconCopy}"/>
                </MenuItem.Icon>
            </MenuItem>
            <Separator></Separator>
            <MenuItem cal:Message.Attach="Clear()" Header="Clear All">
                <MenuItem.Icon>
                    <Image Source="{StaticResource IconDelete}"/>
                </MenuItem.Icon>
            </MenuItem>
        </ContextMenu>
    </TextBox.ContextMenu>
</TextBox> 
```

`MenuItems`在工作主菜单中（`GestureMenuItem`继承`MenuItem`并使用相同的样式）：

```
<Menu IsMainMenu="True">
    <Menu.Resources>
        <Image x:Key="ViewIcon" x:Shared="false"
            Source="{Binding Path=Icon}" />
    </Menu.Resources>
    <!-- Items here removed to shorten XAML -->
    <MenuItem Header="_Script">
        <common:GestureMenuItem x:Name="RunScript" Header="_Run script" Key="F5">
            <MenuItem.Icon>
                <Image Source="{StaticResource IconPlay}"/>
            </MenuItem.Icon>
        </common:GestureMenuItem>
      <common:GestureMenuItem x:Name="StopScript" Header="_Stop script" Key="F5" Modifiers="Shift">
            <MenuItem.Icon>
                <Image Source="{StaticResource IconStop}"/>
            </MenuItem.Icon>
        </common:GestureMenuItem>
    </MenuItem>
    <!-- Items here removed to shorten XAML -->
</Menu> 
```

手势项目样式：

```
<Style TargetType="{x:Type Caliburn:GestureMenuItem}" BasedOn="{StaticResource {x:Type MenuItem}}">
</Style> 
```

**我想出了一个解决方法，它不会给出完全相同的风格，但它有效，我应该去吗？**

```
<Trigger Property="IsEnabled" Value="False">
    <Setter Property="Opacity" Value="0.5"/>
</Trigger> 
```

使用此解决方案，手势文本和图标都是灰色的，因此它实际上可能是比仅将 Forecolor 设置为灰色更好的解决方案：

![不透明解决方案](../Images/14aa88d004f9fa6232a2d99464af8cb9.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T17:44:18.617

我通过用 Opacity 属性设置器替换 Forecolor 属性设置器来解决它，这也会影响手势文本和图标，这也是默认样式的执行方式

![不透明解决方案](../Images/14aa88d004f9fa6232a2d99464af8cb9.png)

```
<Trigger Property="IsEnabled" Value="False">
    <Setter Property="Opacity" Value="0.3"/>
</Trigger> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-08T20:14:24.467

我发现分别针对 InputGestureText 和 Header 的 ContentPresenters 更有效。在我的案例中，针对整个 MenuItem 导致了透明的 MenuItem。我已经展示了如何解决以下问题：

```
<Trigger Property="IsEnabled" Value="False">
    <Setter TargetName="HeaderHost" Property="Opacity" Value="0.3"/>
    <Setter TargetName="IGTHost" Property="Opacity" Value="0.3"/>
</Trigger> 
```

# javascript - 跨域时如何获取parent.document.referrer？

> ID：14607433
> 
> 赞同：0
> 
> 时间：2013-01-30T15:22:14.553
> 
> 标签：javascript, cross-domain

这是我的问题：

1.  域 X 中的页面 A
2.  域 Y 中的页面 B
3.  A 有一个 iframe，并链接到 B

现在我可以通过document.referrer得到A在B中的位置，但是我的老板给了我一个新任务：

> 获取 A 的推荐人

首先我尝试：parent.document.referrer，正如预期的那样，我遇到了这个错误：“不安全......在跨域中”。

所以，伙计们，有可能获得A'referer吗？我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:24:25.713

这是不可能的。您只能访问`REFERER`到达您的页面。您可以[在此处](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)阅读更多相关信息。

您可以通过查询字符串变量提供引用者来绕过它。

例如

```
<iframe src="http://www.domainy.com?ref=Myreferer"></iframe> 
```

请注意，a`REFERER`并不总是设置。通常（但在不同的浏览器中有所不同）它是在通过单击链接到达页面时设置的，但是当用户直接导航到您的网页（在地址栏中输入 URL）或通过选择他的收藏夹之一时不会设置.

# angularjs - 如何使用Angular JS以随机方式从数组中删除值？

> ID：14607436
> 
> 赞同：0
> 
> 时间：2013-01-30T15:22:19.643
> 
> 标签：angularjs

```
var displayyears = [];
$scope.Joinyear=function(display){
    $scope.yeardisplay=display; 
    if (displayyears.indexOf(display) == -1) {
        $scope.selected_class[display] = "selected";
        displayyears.push($scope.yeardisplay);
    }
    else{
        $scope.selected_class[display] = "";
        displayyears.splice($scope.displayyears.indexOf(display),1);
    } 
```

它工作但不正确。假设如果我有这样的数组 [2008,2009,2010,2011]。现在我以随机方式从数组中删除值（在 2009 年之间）意味着它只删除 2008 年的值...如何使用 Angular JS 以随机方式从数组中删除值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:49:16.337

`$scope`我相信你在这一行打错了：

```
displayyears.splice($scope.displayyears.indexOf(display),1); 
```

应该：

```
displayyears.splice(displayyears.indexOf(display),1); 
```

# android - 第一次单击在 MenuItem 中不起作用 - Android - ActionBarSherlock

> ID：14607437
> 
> 赞同：1
> 
> 时间：2013-01-30T15:22:29.917
> 
> 标签：android, actionbarsherlock

我有这个活动

```
import android.os.Bundle;
import android.util.Log;

import com.actionbarsherlock.app.SherlockActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuInflater;

public class AboutActivity extends SherlockActivity {
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.about);

        getSupportActionBar().setIcon(R.drawable.logo);
        getSupportActionBar().setDisplayOptions(0, getSupportActionBar().DISPLAY_SHOW_TITLE);
    }

    @Override
    public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.layout.menu_back, menu);
        return super.onCreateOptionsMenu(menu);
    }
    @Override
    public boolean onOptionsItemSelected(
            com.actionbarsherlock.view.MenuItem item) {
        switch (item.getItemId()) {
        case R.id.back:
            AboutActivity.this.finish();
            return true;
        default:
            return false;
        }
    }
} 
```

这是我的 R.layout.menu_back

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+id/back"
        android:icon="@drawable/arrow"
        android:showAsAction="ifRoom|withText"
    />
</menu> 
```

我的问题是，当我第一次单击菜单中的后退按钮时，它什么也没做，当我第二次单击它时它工作正常。有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:12:04.777

你的代码对我有用。但是您应该将菜单 xmls 保存在菜单文件夹而不是布局文件夹中。你可以尝试 return super.onOptionsItemSelected(item); 在你的 switch 指令的默认部分。

# ruby-on-rails - 如何计算属于选定父母列表的孩子的数量？

> ID：14607438
> 
> 赞同：1
> 
> 时间：2013-01-30T15:22:30.357
> 
> 标签：ruby-on-rails

我有一个列表-grandparent.parents.where(:alive => true)，我需要计算属于这些父母的孩子（他们属于这个特定的祖父母）。

最终，我希望将活着的父母人数和他们孩子的人数相加——但希望我应该会没事的，一旦我掌握了第一手……

显然 grandparent.parents.where(:alive => true).children.count 不起作用，但希望你能得到我的目标......

在此先感谢您的帮助，非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:19:15.893

我假设父母和孩子之间的关系很简单`has_one`，`belongs_to`因此假设您具有模型的`parent_id`属性`Children`。我还假设`Parents`每个孩子的模型中只列出了一个父母……很多假设，所以让我们知道你的模型结构。

如果上述假设成立，请尝试对所有这些父母的孩子总数进行以下操作：

```
array = []
grandparent.parents.where(:alive => true).each do |parent|
     c = Children.find_all_by_parent_id(parent.id).count
     array << c
end

array.sum 
```

或者这是每个父母的孩子数量：

```
 grandparent.parents.where(:alive => true).each do |parent|
        Children.find_all_by_parent_id(parent.id).count
    end 
```

# jsf - PrimeFaces 扩展 - 空值属性

> ID：14607439
> 
> 赞同：4
> 
> 时间：2013-01-30T15:22:30.923
> 
> 标签：jsf, primefaces, primefaces-extensions

在我的页面上，我有`<pe:inputNumber>`一个非必填字段。如果我将其留空，即使我设置了`emptyValue = ""`. 如果此组件无法为我提供该功能，我应该做什么或应该使用什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T17:02:32.120

您可能需要专门指示 JSF 将空输入字段解释为 null，而不是使用 context-param 将其强制为“0”

```
<context-param>
    <param-name>javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</param-name>
    <param-value>true</param-value>
</context-param> 
```

此外，对于基于 tomcat（JBoss、WSphere 等）构建的容器，您应该设置以下 JVM 配置属性（在 IDE 中很容易做到）

```
-Dorg.apache.el.parser.COERCE_TO_ZERO=false 
```

# mongodb - mongodb - 一个集合中的许多文档与多个集合

> ID：14607443
> 
> 赞同：8
> 
> 时间：2013-01-30T15:22:42.390
> 
> 标签：mongodb

我正在使用 mongodb 作为数据库存储。

我的网络应用程序必须收集用户响应。

用户响应是 mongodb 中的文档（或 sql 中的一行）。文档的长度约为 10~200。

用户响应被分类（仅属于一个类别）。对于每个类别，用户响应的数量在 100~5000 之间。如果两个文档属于同一类别，则具有相同的长度。（或者它们在 sql 中有相同的列）

可以根据管理员的请求动态创建/删除类别。

目前，我的数据结构是

```
category collection
{_id, 'name' : 'c1', 'somevalue' : '123'}
{_id, 'name' : 'c2', 'somevalue' : '23'}
{_id, 'name' : 'c3', 'somevalue' : '143'}
{_id, 'name' : 'c4', 'somevalue' : '153'}
...

'c1' collection
{ userresponse1 }
{ userresponse2 }
{ userresponse3 }
...

'c2' collection
{ userresponse1 }
{ userresponse2 }
{ userresponse3 }
...

'c3' collection
{ userresponse1 }
{ userresponse2 }
{ userresponse3 }
...

'cN' collection
{ userresponse1 }
{ userresponse2 }
{ userresponse3 }
.. 
```

这是一个明智的决定吗？我担心通过为每个类别分配一个集合而出现问题的可能性。如果我有很多集合，会有一些性能问题吗？我应该合并我的收藏并给用户响应一些标识符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:48:27.067

当然，答案取决于您的查询模式以及您正在查看的集合数量。在不了解更多信息的情况下，我怀疑您需要进行跨越许多响应集合的查询。

例如，如果每个`userresponse`人都有一个`userId`字段，并且假设您想要获取特定用户的所有响应的日期排序列表。您需要遍历所有集合，查询每个集合，并将结果组合到客户端代码中。`UserResponse`显然，与索引集合中的单个简单查询/排序相比，这将是非常低效的。

# entity-framework - 在类库中注册容器（IoC）？

> ID：14607446
> 
> 赞同：3
> 
> 时间：2013-01-30T15:22:49.613
> 
> 标签：entity-framework, dependency-injection, repository-pattern, ioc-container, simple-injector

我正在使用以下部分创建一个 n 层应用程序。

*   MyApp.DAL - 数据访问层（EF 5，SQL 后端）
*   MyApp.BLL - 业务层
*   MyApp.WcfService - 服务层
*   MyApp.WpfClient - 前端
*   MyApp.Models 是一个包含所有 POCO 的共享项目。

我将通过每一层给出一个“国家”实体的例子。首先是模型。请注意，StatefulObject 将帮助我跟踪来自断开连接的客户端的实体状态（根据 Julia Lerner 的编程 EF 第 2 版第 18 章）。

```
public class Country : StatefulObject
{
    [Key]
    [StringLength(2)]
    public string Code { get; set; }
    [Required]
    [StringLength(50)]
    public string Name { get; set; }
} 
```

在 DAL 中，我有一个 ICountryRepository（基本 CRUD）和一个 CountryRepository。这是构造函数。

```
public class CountryRepository : ICountryRepository, IDisposable
{
    MyDbContext _db;

    public CountryRepository()
    {
        _db = new MyDbContext();
    }

    //Implement ICountryRepository (basically CRUD), etc...
} 
```

我的 BLL 有一个 ICountryLogic、CountryLogic、IBusinessLayer 和 BusinessLayer，如下所示：

```
public class CountryLogic : ICountryLogic
{
    ICountryRepository _countryRepository;

    public CountryLogic(ICountryRepository countryRepository)
    {
        _countryRepository = countryRepository;
    }

    //implement ICountryLogic members, etc...
}

public class BusinessLayer : IBusinessLayer
{
    public ICountryLogic CountryLogic { get; set; }

    public BusinessLayer()
    {
        CountryLogic = new CountryLogic(new CountryRepository());
    }
} 
```

然后是一个示例服务方法，它实例化一个新的业务层并执行一些操作，如下所示：

```
public class CountryService : ICountryService
{
    public IEnumerable<Country> GetAll()
    {
        IBusinessLayer bl = new BusinessLayer();
        return bl.CountryLogic.GetAll();
    }

    //implement other service operations
} 
```

然后 WPF 客户端可以像这样使用该服务：

```
CountryServiceClient countryService = new CountryServiceClient();

var countries = countryService.GetAll(); 
```

现在，在将 WCF 服务放在 BLL 和 WPF 前端之间之前，我的 WPF 前端可以只使用依赖注入，我不会有这样的丑陋：

```
public class BusinessLayer : IBusinessLayer
{
    public ICountryLogic CountryLogic { get; set; }

    public BusinessLayer()
    {
        CountryLogic = new CountryLogic(new CountryRepository());  // <<<< UGLY HERE
    }
} 
```

相反，我会像这样使用 DI 和构造函数注入：

```
public class BusinessLayer : IBusinessLayer
{
    public ICountryLogic CountryLogic { get; set; }

    public BusinessLayer(ICountryLogic countryLogic)
    {
        CountryLogic = countryLogic;
    }
} 
```

然后只需在 WPF 中的容器中注册接口和实现即可。我的问题是如何在类库中注册它们（在 BLL 中）？由于类库中没有组合根或入口点，我不知道该怎么做。我正在使用 SimpleInjector。

或者，我可以在 Wcf 服务中使用 DI，但这需要服务具有对 DAL 的引用，以便它可以将 ICountryRepository 注册到 CountryRepository。这似乎不对。服务层应该只引用 BLL，这就是我希望在 BLL 中设置 DI 的原因。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T16:26:15.020

如我所见，您在这里缺少一些抽象。WPF 客户端不应该关心您在两者之间放置 WCF 服务的事实。例如，不要使用相当丑陋的`XXXService`类（例如`CountryService`），而是考虑通过网络发送命令和查询消息。通过这种方式，您可以定义WPF 客户端可以依赖的简单接口`ICommandHandler<TCommand>`。`IQueryHandler<TQuery, TResult>`在这种情况下，它不必知道它是否通过网络进行通信。这些抽象还提供了添加横切关注点（作为装饰器）的可能性，例如[断路器设计模式](https://en.wikipedia.org/wiki/Circuit_breaker_design_pattern)，这在与连接不可靠的客户端一起工作时非常有用（对查询特别有用）。对于发送命令，使用队列可能会更好，但这也可以作为`ICommandHandler<TCommand>`接口上的装饰器来实现。

以下是一些描述这些概念的文章：

*   [同时......在我的架构的指挥方面](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)
*   [同时......在我的架构的查询方面](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)
*   [编写高度可维护的 WCF 服务](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=95)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T18:10:28.183

也许您可以尝试`static BootStrap`在每一层中实现一个方法并链接注册调用（通过每个方法传递容器实例。

`Wpf.Client`调用`Wpf.Service.Bootstrap(container)`哪个调用`WPF.Bll.Bootstrap(container)`...？

这应该会让你继续前进，但我衷心建议你阅读 Stevens 的文章，它们很有意义，并且一旦实现，它们就提供了一个非常灵活的架构。

# database - 视频/DVD租赁系统的数据库设计，无法决定做什么，有什么建议或替代方案吗？

> ID：14607448
> 
> 赞同：0
> 
> 时间：2013-01-30T15:22:54.430
> 
> 标签：database, database-design

此处的表格允许我租用一个视频，但我希望能够为一个租借 ID 或一个租借记录租用多个视频。

视频（videoID、videoName、ageClassification、流派）

租金（RentalID、videoID、customerID、dateHired、dateDueBack、价格、逾期（Y/N））

我是否对包含视频 ID 的视频 ID 使用逗号分隔值。

或者可能有一个名为rented_videos 的单独表链接到租借表，因此每次租借可以租用1 个或多个视频。

甚至是替代解决方案。

请原谅我的关系模式，我不是数据库专家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:25:52.023

您绝对不应该使用 csv 列表，如果您想查找特定视频的所有租借内容，这会使索引变得丑陋。

处理此问题的最常见和最简洁的方法是创建一个中间表，其中包含指向 videoID 和 RentalID 的外键。这应该是适合你的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:39:22.137

像往常一样，没有一个正确的答案 - 但在错误的答案中，CSV 列表在列表中非常高！

首先，企业是否将“租借”视为自己的事情，还是每个视频租借都是一个单独的事件？我对业务的了解不够多，无法发表意见 - 但我想业务域有一个“租借”，意思是租用一个标题，有价格和归还日期（不同的视频似乎有不同的租借周期 - 新版本 2 天，旧电影一周；也许某处有一个“租赁类型”表）。单次交易——即我去音像店——将包括一个或多个租赁，每个租赁都有其成本和到期日；我似乎还记得如果您采用某种租金组合，可能会获得折扣。

所有这些都表明：

```
Video
-------
Video_ID
Rental_scheme_ID
Name
...

Rental_scheme
--------
Rental_scheme_id
Length_in_days
Cost

Rental
------
Video_id
transaction_id

Transaction
----------
Customer_id
Date
Undiscounted_price
Discount
NetPrice
... 
```

如果这是过度设计，并且业务说“不，我们只是想跟踪谁借了什么”，请使用您现有的模式并为您租用的每部电影插入一个新行。

# sharepoint - SBS 2008R2 的 Sharepoint 开发环境

> ID：14607450
> 
> 赞同：0
> 
> 时间：2013-01-30T15:23:00.347
> 
> 标签：sharepoint, wss-3.0

我想自定义 sharePoint 网络应用程序以适应公司的要求。目标是在创建文件夹时在文件夹中创建几个按填充的任务项。文件夹和任务项都是同一列表中的自定义内容类型。因此 SharePoint Designer 不允许创建这样的工作流。由于这个限制，我必须深入研究 Visual Studio/C# 解决方案。

我做了一些研究以使用 Windows Server 为此构建开发环境（虚拟机）`2008R2 + MOSS 2007 + SQL Server 2008.`但是没有解决方案可以使用 SBS 2008R2 做到这一点。我有以下问题。

1.  我们的生产服务器是`SBS2008R2 SP2 + WSS 3.0 + SQL 2005 + Exchange 2007` 所以我需要在开发机器上设置完全相同的环境吗？

2.  如果一切都在测试环境中运行，我如何将更改部署到我的生产服务器。

3.  WSS3.0 和 SharePoint Foundation 是一样的吗？我知道 MOSS 是 WSS 的扩展。

我有 VB.net 和 Java 的开发经验，所以实际编码不是问题，但我是 sharePoint 及其术语的新手。所以如果我听起来很傻，请原谅我。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:24:38.563

按照提问的顺序。

1.  最推荐的 SharePoint 开发方式是拥有与生产相同的测试/开发场。但是对于您的特定情况（环境和任务），您的开发环境似乎就足够了。
2.  当您在 Visual Studio 中为 SharePoint 开发解决方案时，您可以直接创建 WSP 以进行部署。您没有指定 VS 版本，但例如 VS2010 有一个用于 SharePoint 2007/2010 的 OOTB 项目模板，VS2012 也有（但我不确定 SP2007），对于 VS2005 和 VS2008 有一些扩展/插件。wsp 应该包含所有自定义，因此您可以轻松执行部署、更新等。
3.  在 2007 年有两个版本的 SharePoint - 轻 WSS3.0 和重 MOSS，在 2010 年它变成了 SharePoint Foundation 和 SharePoint Server。所以 SP Foundation 2010 就像是 WSS3.0 的下一个版本

至于您的任务（文件夹的自动任务），最佳做法是为文件夹项目创建事件创建自定义事件接收器。

# intersection - 使用最小二乘法的 3D 矢量交集

> ID：14607457
> 
> 赞同：1
> 
> 时间：2013-01-30T15:23:35.913
> 
> 标签：intersection, least-squares

我一直在尝试获取一些 3D 线的交点。线条以表格形式表示

线：s + t*r。这些线并没有真正相交，所以我想在 3D 中得到从该点到所有线的距离最小的点

我找到了找到两条线之间交点的解决方案，但就我而言，它是一组线，比如 5 条或更多。

我找到了一个解决方案，表示点 a 到线 l 之间的距离：p+t*r（p 是起点，r 是方向向量，t 是标量值）为

d(a,l) = (|| rx (pa) ||)/|| r || =

|| ([r]x/||r||)a - ([r]x/||r||) p ||

该解决方案表示第二个方程是形式的最小二乘最小化问题

|| 斧头||

解决方案是 x = (At A)^-1 * At*b ， At 是 A 转置，但我不能在这里格式化。

如果我有几行，我该如何写矩阵 A 和向量 b？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T13:48:12.180

我在这里将 MATLAB 函数用于最小二乘 n 线交点，并用 C++ 对其进行编码以供我使用： http: [//www.mathworks.com/matlabcentral/fileexchange/37192-intersection-point-of-lines-in-3d -space/content/lineIntersect3D.m](http://www.mathworks.com/matlabcentral/fileexchange/37192-intersection-point-of-lines-in-3d-space/content/lineIntersect3D.m)

我在这里遵循了 n 线交点的理论： [http ://en.wikipedia.org/wiki/Line-line_intersection](http://en.wikipedia.org/wiki/Line-line_intersection)

效果很好！

# python - Sublime text 正在不断删除文档上的表格

> ID：14607461
> 
> 赞同：2
> 
> 时间：2013-01-30T15:23:48.910
> 
> 标签：python, sublimetext

我无法使用 python 正常工作，因为 Sublime text 2 正在删除缩进。如果我添加和编辑文档的另一部分，ST 将再次删除所有表格。显然 python 抛出错误：*IndentationError: unexpected indent*。

我该如何调整这个？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T17:09:12.437

`trim_automatic_white_space`如果启用该设置（默认），SublimeText 会自动清除自动缩进空格。这只*影响*空行。

Python 不*关心*空行上的空格；空行不需要匹配其余代码的缩进。但是，如果将行复制到 python 解释器，空行表示块的结束，然后编译该块；这与直接运行保存的文件*不同*。

如果您在运行 python 文件时看到缩进错误，则说明您在代码的*其他地方混合了制表符和空格。*运行您的代码以`python -tt modulename.py`进行测试。对于 python 代码，您真的只想使用空格*（*将制表符转换为空格，设置 sublime 以使用空格进行缩进）。

# fullcalendar - Fullcalendar 事件放置和布局

> ID：14607470
> 
> 赞同：0
> 
> 时间：2013-01-30T15:24:24.207
> 
> 标签：fullcalendar

我正在尝试实现一个设计，其中每个完整日历事件都由图钉图像表示。我希望能够将多个事件添加到任何日期（在月视图中），以便图钉水平排列。默认情况下，每个事件似乎都在一个 div 中，并且无法指定浮动“左”。我认为有必要修改 javascript，但我想知道是否有其他人已经解决了这个问题。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T00:34:21.180

也许我不理解这个问题，但听起来你需要做的就是在 eventRender 的元素上使用 .append()。

例子：

```
eventRender: function( event, element, view ){
  element.append('<div style="float:left;">/*push pin image*/</div>');
} 
```

根据文档， element 是为事件新创建的 div 让我知道这是否是您所说的，如果没有澄清，我会尽力为您提供进一步帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T23:35:35.690

这只是解决您问题的提示。您需要更改以下功能以更新事件元素的左侧和宽度。

```
 function daySegHTML // this function create your event element with div
  function colContentLeft //  function calculate left position of event element
  function daySegSetWidths // function set width for you event element. you can restrict width for element 

  e.g. Math.max(0, seg.outerWidth - seg.hsides) / ( how many event you want to place in one row ) 
```

# php - 使用连接语句设置 SQL 查询以从字符串的一部分中获取 ID

> ID：14607474
> 
> 赞同：0
> 
> 时间：2013-01-30T15:24:29.453
> 
> 标签：php, mysql, sql, join

我有 3 个表，我正在尝试对它们执行连接语句。

```
SELECT node.title, field_data_body.body_summary, 
  url_alias.alias 
FROM node, field_data_body, url_alias 
WHERE node.nid = field_data_body.entity_id 
 AND node.nid = ".node/".url_alias.source 
 AND field_data_body.bundle='article' 
```

由于“node.nid =”.node/“.url_alias.source”，上面的行不起作用 - 这不是正确的调用方式。

我正在尝试将节点表中的 nid 列与 url_alias 表中的源列进行比较。源列的数据显示为“node/21”<- 那么当“node/”字符串挡道时我该怎么办呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:28:01.413

You can use REPLACE or LIKE or REGEX:

This uses REPLACE:

```
SELECT node.title, field_data_body.body_summary, url_alias.alias 
FROM node, field_data_body, url_alias 
WHERE node.nid = field_data_body.entity_id 
   AND node.nid = REPLACE(url_alias.source, '.node/', '')
   AND field_data_body.bundle='article' 
```

--EDIT

Or as @datasage correctly points out, CONCAT would work too, but I think you need to use single quotes.

Good luck.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:28:05.203

Seems like you want to use the [`CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat) function:

```
SELECT node.title, field_data_body.body_summary, 
  url_alias.alias 
FROM node, field_data_body, url_alias 
WHERE node.nid = field_data_body.entity_id 
 AND node.nid = Concat('.node/.', url_alias.source)
 AND field_data_body.bundle='article' 
```

I would also join changing your query to use `JOIN` syntax:

```
SELECT node.title, field_data_body.body_summary, 
  url_alias.alias 
FROM node
INNER JOIN field_data_body
    on node.nid = field_data_body.entity_id 
INNER JOIN url_alias 
    ON node.nid = Concat('.node/.', url_alias.source)
WHERE field_data_body.bundle='article' 
```

# plugins - TYPO3：自动缓存扩展中的新条目

> ID：14607478
> 
> 赞同：0
> 
> 时间：2013-01-30T15:24:51.547
> 
> 标签：plugins, full-text-search, typo3

我使用 kickstarter 创建了一个新扩展，一切都按预期工作，但是这个扩展需要具备的核心要求之一是每个条目（单个视图）都可以使用索引搜索进行搜索。数据存储在 sys 文件夹中，并通过 CSV 直接导入数据库，这导致这些新页面都无法搜索，因为它们没有被缓存。

有没有办法自动缓存每个视图以便搜索？我尝试使用爬虫扩展，但无法理解如何正确设置它，这超出了我对 TYPO3 的理解。它作为 USER 对象加载并开启缓存。

```
t3lib_extMgm::addPItoST43($_EXTKEY, 'pi1/class.tx_zebsem_pi1.php', '_pi1', 'list_type', 1); 
```

如果我创建一个新条目并仅访问此条目以便将其缓存，然后它是可搜索的，这一切都很好，但每次导入新的 CSV 时我根本无法通过 500 个或更多条目。cHash 也设置正确。我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T07:40:14.367

如果您知道 Frontend-URL，您可以使用 PHP (file_get_contents ..) 调用 SingleView。您将遇到 PHP-Script-Runtime-Timeout 的问题。但这可能仅适用于导入脚本（文件夹）的 .htaccess。

# facebook - 分享文章时未使用 Facebook Open Graph 标签

> ID：14607479
> 
> 赞同：1
> 
> 时间：2013-01-30T15:24:54.380
> 
> 标签：facebook, facebook-opengraph

我在我的网站上添加了一个 Facebook 的“分享”按钮，但是当窗口打开时，绝对没有关于正在分享的页面的详细信息。

我在标题中包含了几个元标记，并将 XML 解析器添加到`<HTML>`标记中 -

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#" xmlns:fb="http://www.facebook.com/2008/fbml" xml:lang="en-GB" dir="ltr">
<head>

    <meta property='og:image' content="http://test.dynedrewett.com/wp-content/uploads/2009/09/dyne-drewett-logo.gif"/>
    <meta property='og:locale' content='en_UK'/>
    <meta property='og:title' content='Consumer protection law - Dyne Drewett'/>
    <meta property='og:description' content='The OFT conducted a review of 156 retailer websites, and found that many of them may not be complying fully with the Consumer Protection Regulations.'/>
    <meta property='og:url' content='http://test.dynedrewett.com/consumer-protection-law-and-the-internet/'/>
    <meta property='og:site_name' content='Dyne Drewett'/>
    <meta property='og:type' content='article'/> 
```

有谁知道为什么这不起作用？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:38:54.870

元标记适用于整个网站，但对于在特定网站中共享单个页面/项目，我建议使用[提要对话框](https://developers.facebook.com/docs/reference/dialogs/feed/)。根据您共享的任何内容自定义参数。这需要一个基本的 FB 应用程序和 javascript SDK，但绝对是要走的路。

从理论上讲，您所做的应该可以工作，但我注意到 facebook 会在域或子域级别缓存这些元数据。为此，您还可以在[此处查看 url 调试器](https://developers.facebook.com/tools/debug/og/object?q=http%3A%2F%2Ftest.dynedrewett.com%2Fconsumer-protection-law-and-the-internet%2F)

# jquery - Jquery将活动类添加到主菜单

> ID：14607480
> 
> 赞同：5
> 
> 时间：2013-01-30T15:24:56.223
> 
> 标签：jquery, hyperlink, menu

我正在尝试将动态活动类添加到我的主菜单中，但我无法实现这一点，

我的jQuery是，

```
<script type="text/javascript">
$(document).ready(function() {
  $('#navi a[href^="/' + location.pathname.split("/")[1] + '"]').addClass('active');
});
</script> 
```

我的主菜单是，

```
<ul id="navi">
  <li><a href="#">About MHG</a></li>
  <li><a href="#">Workout Programs</a></li>
  <li><a href="#">Fitness Tips</a></li>
  <li><a href="#">Contact Us</a></li>          
  <li><a href="#">Read Our Blog</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-30T16:05:38.797

**试试这个**

```
<ul id="navi">
    <li><a class="menu" href="#">About MHG</a></li>
    <li><a class="menu" href="#">Workout Programs</a></li>
    <li><a class="menu" href="#">Fitness Tips</a></li>
    <li><a class="menu" href="#">Contact Us</a></li>          
    <li><a class="menu" href="#">Read Our Blog</a></li>
  </ul> 
```

**jQuery**

```
$('a.menu').click(function(){
    $('a.menu').removeClass("active");
    $(this).addClass("active");
}); 
```

检查这个小提琴[http://jsfiddle.net/9nd4j/1/](http://jsfiddle.net/9nd4j/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:31:46.397

^^ 与上述罗里的评论相同！！

, 如果你还需要你可以做

```
$("#navi a").live("click", function(){
  $("#navi a").removeClass("active");
  $(this).addClass("active")
}); 
```

如果您的所有链接都指向上述解决方案的同一页面，那么我看到您要从一个页面遍历到另一个页面，这将无法正常工作。

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-18T12:52:17.580

此方法将检查用户正在访问的页面 URL，然后在`<li>`标签中添加活动类。

**HTML**

```
<div id="nav">
    <ul>
        <li><a href="index.php">Home</a></li>
        <li><a href="about.php">About</a></li>
        <li><a href="member.php">Member</a></li>
        <li><a href="project.php">Project</a></li>
        <li><a href="activity.php">Activity</a></li>
    </ul>
</div> 
```

**JS**

```
var setActive = function () {

    // Get the last item in the path (e.g. index.php)
    let url = window.location.pathname.split('/').pop();

    // Add active nav class based on url
    $("#nav ul li a").each(function () {
        if ($(this).attr("href") == url || $(this).attr("href") == '') {
            $(this).closest('li').addClass("active");
        }
    })

    // Add the active class into Home if user omit index.php from url
    if (url == '') {
        $("#nav ul li").eq(0).addClass("active");
    }
};

$(function () {
    setActive();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T16:32:56.457

你的描述不是很清楚。如果你的意思是你悬停的列表项，那么它应该是这样的：

```
$('a.menu').hover(

function () {
    $(this).addClass("active");
},

function () {
    $('a.menu').removeClass("active");
}); 
```

# jsf-2 - 地址栏不会使用 p:commandButton 进行导航更新

> ID：14607487
> 
> 赞同：0
> 
> 时间：2013-01-30T15:25:09.670
> 
> 标签：jsf-2, primefaces, navigation

我正在使用`<p:commandButton>`导航和设置`ajax="false"`，但是地址栏不会更新以匹配`action`-attribute 中定义的目标页面。它仍然显示带有`<p:commandButton>`.
我可以发誓它并不总是这样。这种行为正常吗？
我该如何解决这个仍然`<p:commandButton>`用于导航的问题？

我的代码：

```
<p:commandButton value="speichern" action="secondPage" ajax="false"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:33:14.693

是的，如果您触发 POST 请求，这是正常行为。`<form action>`默认情况下生成的为`<h:form>`当前 URL（右键单击，在浏览器中*查看源代码*以自己查看）。正是这个 URL 反映在浏览器地址栏中。如果要在 POST 之后更改它，则需要在之后发送重定向。重定向基本上指示客户端在给定的 URL 上发送新的 GET 请求。这将反映在浏览器地址栏中。这可以通过将`faces-redirect=true`查询字符串参数添加到结果值来完成。

```
<p:commandButton value="speichern" action="secondPage?faces-redirect=true" ajax="false"/> 
```

但是，使用 POST 进行导航对[UX](http://en.wikipedia.org/wiki/User_experience)和[SEO](http://en.wikipedia.org/wiki/Search_engine_optimization)不利。只需首先使用 GET 即可。

```
<p:button value="speichern" outcome="secondPage"/> 
```

### 也可以看看：

*   [什么时候应该使用 h:outputLink 而不是 h:commandLink？](https://stackoverflow.com/questions/4317684/when-should-i-use-houtputlink-instead-of-hcommandlink/4317723#4317723)
*   [h:button 和 h:commandButton 之间的区别](https://stackoverflow.com/questions/13070537/difference-between-hbutton-and-hcommandbutton/13072025#13072025)

# magento - 在不覆盖的情况下向 OPC 添加步骤

> ID：14607492
> 
> 赞同：2
> 
> 时间：2013-01-30T15:25:20.883
> 
> 标签：magento, checkout, extend

在阅读了[Ivan Chepurnyi的这条](https://stackoverflow.com/users/465971/ivan-chepurnyi)[推文](https://twitter.com/IvanChepurnyi/status/296576390499803136)并不得不为客户网站的 OnePage Checkout（又名 OPC）添加一个步骤后，我认为这是学习新东西的绝佳机会。 我是事件/观察者的忠实粉丝，并尝试尽可能多地使用它们，但到目前为止，正是对于 OPC，我发现使用它们并不是很优雅。我的意思是，没有可以使用的有用事件（据我所知）。

例如，在我的脑海中，我想到了两件事我必须改变并且重写非常容易，而事件/观察者会过于复杂：

1.  **步骤**：`Mage_Checkout_Block_Onepage::getSteps()`定义组成 OPC 的不同步骤。我真的看不出有什么事件可以让我改变它
2.  **goto**：当一个步骤完成时，相应的操作将返回 html以及数据`Mage_Checkout_OnepageController`以供下一步使用。同样，我没有看到任何有趣的事件`goto_section``update_section`

这只是没有真正研究我必须实现的每一个细节，我想还有更多的陷阱。
javascript 部分也是如此：我习惯于扩展结帐 js 类：

```
var MyModule = Class.create(Checkout, {
    //write some code here
}); 
```

但我想知道是否有更好的方法。

我意识到 Ivan 的推文是为 PSP 开发人员准备的，而且我正在为最终客户工作，但我想学习一些新东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T21:01:32.833

这条推文的主要思想是关于大多数开发自定义支付方式的开发人员并不关心与您在网站上的其他模块或自定义项的冲突。

# 单页结帐步骤

至于您的第一步，这是 Magento 核心的问题，它在`_getSteps()`方法中的所有结帐步骤都是硬编码的，如果不覆盖就无法更改它。

# 控制器覆盖

第二个很容易实现，即使只使用了`controller_action_predispatch`和`controller_action_postdispatch`操作。

在`preDispatch`Magento 上，您可以通过使用 和 等控制器标志来自由控制控制器动作的`FLAG_NO_DISPATCH`流程。`FLAG_NO_PRE_DISPATCH``FLAG_NO_POST_DISPATCH`

您可以通过`postDispatch`修改响应对象的主体来修改现有结果。在返回 JSON 的情况下，您可以轻松地将此数据转换回数组，对其进行修改并设置回 JSON。

是的，这个解决方案实施起来可能更复杂，但它大大增加了您的模块与其他模块的兼容性，因为您可以安全地使用其他模块可能覆盖同一控制器。

# JavaScript 自定义

至于 JavaScript，您应该始终认为它是动态语言，并且在语言级别本身没有类，一切都是对象，您始终可以通过使用变量赋值将现有对象原型替换为自己的实现来扩展现有功能：

```
window.Checkout = Class.create(Checkout, {
      someMethod: ($super, param1, param2) {
          // Do you custom staff before
          $super(param1, param2);
          // Do you custom staff after
      }
}); 
```

在以下示例中，Checkout“类”的原型被您的实例替换，该实例自定义了其`someMethod`功能。`$super`变量包含`Function`父“方法”的对象，该对象被覆盖，它将与另一个方法（甚至同一个）的同一类的相同类型的自定义一起使用，因为它只修改包含该方法定义的属性。

如果您想了解更多关于这个 JS 语言功能的信息，请参考这个网站：[http ://www.crockford.com/javascript/javascript.html](http://www.crockford.com/javascript/javascript.html)

# c++ - 类设计：如何返回 shared_ptr：引用或复制

> ID：14607494
> 
> 赞同：1
> 
> 时间：2013-01-30T15:25:23.443
> 
> 标签：c++, memory-management, shared-ptr, opengl-2.0

这是场景：我有一个名为 Program 的类，它包含三个 shared_ptr：到顶点、几何和片段着色器。当 Shader 对象被构造时，它会使用 glCreateShader 创建着色器，并且还会编译它。

Shader denstructor 会自动调用 glDeleteShader。所以问题是，如果我执行以下操作：

1.  创建着色器对象；
2.  复制它；
3.  销毁副本。

原始副本也会失效，因为当副本被销毁时，它会调用 glDeleteShader。我相信这是一个设计问题。

所以我只使用指针就避免了这个问题。现在 Program 类拥有着色器。我创建了一个将 shared_ptr 返回给顶点、几何和片段着色器对象的方法。我的疑问是：我应该像这样返回 shared_ptr 吗：

```
const shared_ptr<Shader>& getVertex_shader_ptr() const
{
    return vertex_shader_ptr;
} 
```

或者像这样：

```
shared_ptr<Shader> getVertex_shader_ptr() const
{
    return vertex_shader_ptr;
} 
```

我担心我上面描述的问题会再次发生：shared_ptr 被释放并且它使 OpenGL 着色器无效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T15:42:20.417

除非您的着色器为 NULL 有效，否则您应该只返回对它的引用：

```
const Shader& getVertex_shader() const
{
    return vertex_shader;
} 
```

如果您的着色器为 NULL 是有效的，但只有您的程序负责删除它，则只需返回一个指针：

```
const Shader* getVertex_shader_ptr() const ... 
```

共享指针的语义适用于着色器没有明确所有权的情况。如果是这种情况，则按值返回。语义是程序的两个部分对未清理的对象感兴趣，并且它们都需要一种方法来保持它的活力。

```
shared_ptr<Shader> getVertex_shader_ptr() const ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T15:33:03.200

无论哪种方式都很好。

它是一个成员，因此返回对它的引用是安全的，只要调用者不通过引用保存它，然后销毁`Program`.

如果您通过非常量引用返回，则调用者可以调用`reset`您的指针，`glDeleteShader`如果不存在指针的其他副本，该指针将调用。尽管如此，它会按照你的意愿行事——`Shader`只有在不再存在对它的引用时才会被销毁。

我个人会`shared_ptr`按价值返回，但这只是个人喜好。

编辑：假设您的意思是您在复制 a `Program`（而不是 a `Shader`）时担心正确性，也不要担心；这两个`Program`s 将具有相同的 shared_ptrs ，直到两个s 都`Shader`不会被销毁。`Program`这可能是也可能不是您想要的（您可能想要分配一个完全独立`Shader`的副本），但它是安全的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T15:38:09.530

我宁愿按价值返回。如果您通过引用返回，您可能会遇到对 shared_ptr 的悬空引用，如果在某个时候实例被销毁并且某些变量仍然持有对 shared_ptr 的引用。

这种情况正是智能指针应该避免的，但它们的引用计数只有在你避免通过复制返回它们时才能安全地工作。这将使在此处使用 shared_ptr 的全部意义无效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T15:59:20.680

在不太了解底层共享指针问题的情况下，我发现 Thiago Macieira（可能是 Qt/Trolltech 员工）的这篇文章对于更好地了解是返回值还是返回 a 很有帮助：http `const&`: [//lists.trolltech.com /qt-interest/2007-11/thread00209-0.html](http://lists.trolltech.com/qt-interest/2007-11/thread00209-0.html)

引用那篇文章，这是从`const`函数返回值的核心参数：

> 它的原因是：
> 
> ```
> T at(const Key& k) const; 
> ```
> 
> 代替：
> 
> ```
> const T &at(const Key &k) const; 
> ```
> 
> 是因为在 Qt 中到处都是这样。我们不会在任何地方返回 refs-to-const。为了返回一个 ref-to-const，我们需要一个变量存在于某处，这要求类的内部结构。通过返回一个值，我们可以在内部做任何我们想做的事情。

不过，我不确定，如果这适用于您的问题...（仍在学习自己；））

# google-apps-script - 你可以换行到下一个单元格吗？

> ID：14607497
> 
> 赞同：0
> 
> 时间：2013-01-30T15:25:35.847
> 
> 标签：google-apps-script, google-sheets

我一直在修改一个让 Facebook 喜欢的脚本来获取 Facebook 见解。此脚本按城市获取用户的独特页面印象，并将它们全部显示在一个单元格中。

**问题：** 有什么方法可以将其分解为多个单元格？我尝试在工作表上附加一行，但它告诉我我没有权限

**代码：**

```
////
// Facebook Fans Counter
// Made by Martin Hassman, http://twitter.com/hassmanm
// Released as Public Domain
// Look at http://labs.met.cz/ for other tools
// Edit by Jared Beach
//

function FacebookListOf(aPageId,aToken,aParameter)
{
  if (aPageId === undefined || aPageId === null)
  {
    throw "No parameter specified. Write Facebook PageID as parameter."
  }
  if (aToken === undefined || aToken === null)
  {
    throw "No parameter specified. Write Facebook Access Token as parameter."
  }
  if (aParameter === undefined || aParameter === null)
  {
    throw "No parameter specified. Write Facebook Access Token as parameter."
  }

  var today = new Date();
  today.setDate(today.getDate()-6);
  var dd = today.getDate();
  var mm = today.getMonth()+1; //January is 0!

  var yyyy = today.getFullYear();
  if(dd<10){dd='0'+dd} if(mm<10){mm='0'+mm} today = yyyy+'-'+mm+'-'+dd;

  if (typeof aPageId != "number")
    throw "Parameter must be number.";

  // See http://developers.facebook.com/docs/reference/fql/page/ for API documentation
  var url = "https://api.facebook.com/method/fql.query?query=SELECT%20metric,%20value%20FROM%20insights%20WHERE%20object_id=%22"+ encodeURIComponent(aPageId) + "%22%20AND%20metric=%27"+ encodeURIComponent(aParameter) + "%27%20AND%20end_time=end_time_date%28%27"+ encodeURIComponent(today) +"%27%29%20AND%20period=period%28%27day%27%29%20&%20access_token=" + encodeURIComponent(aToken);
  var response = UrlFetchApp.fetch(url);

  if (response.getResponseCode() != 200)
    throw "Unexpected response code from Facebook.";

  var responseText = response.getContentText();

  if (responseText == null || responseText == "")
    throw "Empty response from Facebook.";

  var value;

  try
  {
    var xml = Xml.parse(responseText, false);
    var page = xml.getElement().getElement();

    if (page == null)
      throw "Wrong PageID.";
    value = page.getElement("value").getElements("insMap");
    /*
    var format2 = value.toXmlString();
    return format2;
    */
    if (!value || value.length ==0) {
      throw "no match found";
    }
  }
  catch (e)
  {
    throw "Problem with response from Facebook: " + e;
  }

  var r ="";
  var listLength = value.length;

  for (var i = 0; i < listLength; i ++){
    r = r + value[i].getAttribute("key").getValue() +  " : " + value[i].getText() + "\n";
  }
  return r;

} 
```

**结果截图：** ![电流输出](../Images/5a016ccfddd283da256585dce860f276.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T17:43:20.250

要在电子表格中写入一列，您需要一个像这样的二维数组，`[[],[],[],[],[]]` 因此您可以像这样修改脚本中的循环：

```
 ...
  var r =[];
  var listLength = value.length;

  for (var i = 0; i < listLength; i ++){
    r.push([value[i].getAttribute("key").getValue() +  " : " + value[i].getText()]);
  }
  return r; 
```

然后在你的 SS 中“打印”它，`setValues()`像这样使用（在第 2 行，第 6 列中，如屏幕截图中所示）

```
var sh = SpreadsheetApp.getActiveSheet();
sh.getRange(2,6,r.length,1).setValues(r); 
```

编辑：*我没有注意到你在哪里使用它作为自定义函数......所以忘记这个答案的最后一部分。也就是说，它会对您如何使用该函数产生一些副作用，因为每个函数调用将占用多行（取决于您在结果中获得的项目数）。
如果您在连续行上使用它，数据将重叠......，只需在您的工作表设计中考虑到这一点。*

我用这个样本测试了你的功能：

```
function testMultiRow() {
  var r =new Array()
  var value=['row1','row2','row3','row4','row5','row6']
  var listLength = value.length;
  for (var i = 0; i < listLength; i ++){
    r.push([value[i]]);
  }
return r
} 
```

![在此处输入图像描述](../Images/1270197e0d925c631f7c369dd7cb8bd1.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:18:22.967

您可以使用标准电子表格函数来控制您的脚本自定义函数，例如：

=TRANSPOSE(SPLIT (YOUR_CUSTOM_FUNCTION) , CHAR(10) & CHAR(13) ) )

# c# - 在 WPF 中将 ObservableCollection 绑定到 DataGrid 不起作用

> ID：14607501
> 
> 赞同：3
> 
> 时间：2013-01-30T15:25:53.803
> 
> 标签：c#, wpf, binding, datagrid, two-way-binding

我的应用程序中有这个简单的 DataGrid。在源代码的某个地方，我将`ItemsSource`它的属性绑定到一个`ObservableCollection<System.Windows.Points>`. 所以点显示在`DataGrid`. 但是问题是我已经设置了`TwoWay`绑定，但是当更改 中的点坐标值时`DataGrid`，实际点值 int`ObservableCollection`没有改变！

出了什么问题？

```
<DataGrid Name="pointList" AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTemplateColumn Header="X" Width="200">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBox Text="{Binding Path=X, Mode=TwoWay}"></TextBox>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
        <DataGridTemplateColumn Header="Y" Width="200">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <TextBox Text="{Binding Path=Y, Mode=TwoWay}"></TextBox>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

**注意**我已经看到[了，](https://stackoverflow.com/questions/7847810/twoway-binding-on-a-datagrid-in-wpf)但我的问题是不同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:27:51.853

`System.Windows.Points` is a **struct**. You can't bind its properties correctly.

Why? Because when you do `Text="{Binding X, Mode=TwoWay}"` it will bind the `Text` property of the `TextBox` to the `X` property of the current `DataContext`.

`DataContext` which is... a **struct** `System.Windows.Points` then the `Point` the databinding will modify is not the one you have assigned to `DataContext`.

To solve your problem. Create your own `Point` type using a **class**:

```
public class Point : INotifyPropertyChanged
{
    private double x;
    public double X
    {
        get { return x; }
        set
        {
            if (x != value)
            {
                x = value;
                OnPropertyChanged("X");
            }
        }
    }
    private double y;
    public double Y
    {
        get { return y; }
        set
        {
            if (y != value)
            {
                y = value;
                OnPropertyChanged("Y");
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
            handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

and use `UpdateSourceTrigger=LostFocus` for your binding:

```
<TextBox Text="{Binding Path=Y, Mode=TwoWay, UpdateSourceTrigger=LostFocus}"></TextBox> 
```

# email - mailx更改发件人姓名

> ID：14607503
> 
> 赞同：6
> 
> 时间：2013-01-30T15:25:59.137
> 
> 标签：email, sendmail, mailx

我知道要更改发件人的姓名，`mailx`我应该执行以下操作：

```
mailx -r newmail@mail.com -s "some subject" my@email.com 
```

但是当我这样做时，我得到：

```
mailx: invalid option -- r
Usage: mail [-iInv] [-s subject] [-c cc-addr] [-b bcc-addr] to-addr ...
            [-- sendmail-options ...]
       mail [-iInNv] -f [name]
       mail [-iInNv] [-u user 
```

有谁知道发生了什么？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-14T15:00:43.733

```
mailx -a 'From:name@your-domain.com' -s "Subject" my-best-friend@other-domain.com < text.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-28T07:50:11.397

正确的语法是：

```
mailx -s "some subject" my@email.com -- -r newmail@mail.com 
```

使用信息显示“[-- sendmail-options ...]”，由于“-r”是一个发送邮件选项，您需要先使用双破折号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-03T23:18:25.757

对此进行了测试，发现可以正常工作：

回声测试 | mailx -s "邮件测试" user@recipentdomain.com -- -f user@senderdomain.com

“-f”之前的双破折号使mailx 不解析-f，而仅将其传递给sendmail/postfix，然后将使用提到的“发件人”地址发送。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-22T08:58:11.663

您可以尝试使用`-a`在标头中添加发件人姓名：

```
mailx -a "From:Sender Name <newmail@mail.com>" -s "some subject" my@email.com 
```

# jsf-2 - CDI Bean 的线程安全

> ID：14607505
> 
> 赞同：1
> 
> 时间：2013-01-30T15:25:59.623
> 
> 标签：jsf-2, scope, thread-safety, cdi

我有一个关于在 CDI 管理的 JSF bean (RequestScoped) 中注入类的问题，以及这些注入的类在 RequestScope 期间是否是线程安全的。

也许最好先显示示例代码：

----------------- JSF Bean，使用 CDI ------------------

```
import javax.enterprise.context.RequestScoped;
...

@Named
@RequestScoped
public class DemoBean {

    @Inject
    LocalService localService;

    @PostConstruct
    public void init() {
        localService.reloadCache();
    }

    public String getName() {
        return localService.getName();
    }

    public String getAge() {
        return localService.getAge();
    }

} 
```

----------------- 服务，使用 CDI ------------------

```
@Named
public class LocalService {

    private String name;
    private String age;

    public void reloadCache() {
        name = null;
        age = null;
        name = // slow SQL on remote Service, that needs to be cached
        age = // slow SQL on remote Service, that needs to be cached
    }

    public String getName() {
        // do some work, e.g. logging
        return name;
    }

    public String getAge() {
        // do some work, e.g. logging
        return age;
    }
} 
```

JSF Bean“DemoBean”使用“LocalService”类从 DB 中获取数据（通过远程 EJB，但这在这里无关紧要）。在“LocalService”类中，我想在请求期间缓存 SQL 结果有两个原因：

*   SQL 查询的性能很差（很多连接，很多数据，...）
*   JSF 生命周期：我不想在 6 个 JSF 生命周期中的每一个上执行 SQL 查询

如果许多 JSF Bean（对 JSF 页面的许多并发调用）同时使用注入的“LocalService”类，它的行为如何？注入的“LocalService”实例是否由其他线程共享，因此不是线程安全的？

如果是这种情况，我怎样才能使服务线程安全？

例如（在 LocalService 中）

```
Thread1: call reloadCache()
Thread1: call getName()

Thread1 is interrupted in the middle of getName() by Thread2

Thread2: call reloadCache()

Thread2 is interrupted in the middle of reloadCache() -> name is null

Thread1: continue execution of getName() and return name -> which is null at this moment -> very bad 
```

这个例子是我的代码的一个非常简化的版本，但我希望它能让我的问题可以理解

谢谢，克里斯蒂安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:55:26.263

未显式声明范围的 CDI bean 的默认范围是`@Dependent`. 浏览这个注解[的 javadoc](http://docs.jboss.org/cdi/api/1.0/javax/enterprise/context/Dependent.html)会告诉你，在你的特定情况下，每个实例`DemoBean`都保证有它自己的`LocalService`.

> 注入到由容器创建的对象中的任何 bean 实例都绑定到新创建对象的生命周期。

我将其读为为每个新创建的实例创建`DemoBean`并同时销毁（从长远来看，这对您来说可能很昂贵）

与您的问题无关：**Denormalize**。如果您发现自己进行了太多的跃点来获取数据，那么这是对过度连接问题和相关性能成本问题的简单直接的答案。但您可能已经知道这一点。

# c++ - 访问共享库中定义的单例

> ID：14607506
> 
> 赞同：5
> 
> 时间：2013-01-30T15:26:01.323
> 
> 标签：c++, singleton, shared-libraries

假设我有以下架构：

*   `Dodo`单例类`libdodo`
*   主程序已链接`libdodo`和`libponny`；主程序调用`Dodo::instance()`
*   `Ponny`从`libponny`创建类。它有`Dodo`单例的标题

主窗口.cpp

```
 #include "shared/dodo/dodo.h"
    // ...
    Dodo::instance()->setNumber(91); 
```

然后，在这个调用之后，`Ponny`类（ponny.cpp）被创建

**ponny.cpp**

```
 #include "shared/dodo/dodo.h"
    // ...
    bool is = (Dodo::instance()->number() == 91);
    // Will `is` be true? 
```

那么，我可以这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:35:35.847

由于单例的行为定义位于其库中，这意味着单例实例将是唯一的，并且将存在于创建它的编译单元中。

假设在`libdodo`there is `Dodo.cpp`，你有：

```
static Dodo& Dodo::instance()
{
    static Dodo dodo;
    return dodo;
} 
```

请注意，**局部**静态变量在第一次执行到达它们的声明时被初始化，所以在这种情况下`Dodo::instance`是第一次调用时，所以你很可能不会遇到像这样的单例延迟初始化的任何问题。

这里唯一起作用的是线程安全，因为当更多线程`Dodo::instance()`第一次调用时可能会出现竞争条件。有关更多信息，我建议您阅读：
这个问题：[单例和多线程](https://stackoverflow.com/questions/3069255/singleton-multi-threading)
这篇文章：[C++ 范围内的静态初始化不是线程安全的，这是故意的！](http://blogs.msdn.com/b/oldnewthing/archive/2004/03/08/85901.aspx)
这个问题也可以帮助你： [Thread safe lazy construction of a singleton in C++](https://stackoverflow.com/questions/6915/thread-safe-lazy-construction-of-a-singleton-in-c)

* * *

另请注意，在 C++11（第 6.7.4 节）中，静态变量的初始化保证是线程安全的：

> 如果在变量初始化时控制同时进入声明，则并发执行将等待初始化完成。

这意味着像这样的惰性初始化变得有点防弹;）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T16:11:43.053

单例实例是全局的。全局变量可以跨 DLL/共享对象边界共享，如果这确实是您所要求的。

您还需要了解[一个定义规则](http://en.wikipedia.org/wiki/One_Definition_Rule)，它保证了这个类确实只有一个定义，因此类中的任何静态成员都只有一个实例。

# hadoop - 从本地存储文件导入数据后，HIVE 查询返回空值

> ID：14607507
> 
> 赞同：0
> 
> 时间：2013-01-30T15:26:02.653
> 
> 标签：hadoop, import, hive

我是 Hive 的新手，所以如果我的问题是新手，请保持温和 :-)

我使用以下 hive 语句来创建数据并将其加载到表中。

```
CREATE TABLE entities_extract (doc_id STRING, name STRING, type STRING, len STRING, offset    STRING)
ROW FORMAT DELIMITED FIELDS TERMINATED BY '\t'
LINES TERMINATED BY '\n'
STORED AS TEXTFILE
LOCATION '/research/45924/hive/entities_extract';

LOAD DATA LOCAL INPATH '/home/researcher/hadoop-runnables/files/entitie_extract_by_doc.txt' OVERWRITE INTO TABLE entities_extract; 
```

到目前为止一切顺利，执行此脚本时没有错误。奇怪的是，当我在表上执行 select * from 时，我的结果显示了 4 个额外的空值列

输入的数据如下所示：

```
USER.A-GovDocs-f83c6ca3-9585-4c66-b9b0-f4c3bd57ccf4   Chanko   PERSON   6   41086 
```

从选择返回的数据如下所示：

```
USER.A-GovDocs-f83c6ca3-9585-4c66-b9b0-f4c3bd57ccf4   Chanko   PERSON   6   41086   NULL    NULL    NULL    NULL 
```

编辑：在“entitie_extract_by_doc.txt”的一小部分下面

```
USER.A-GovDocs-f83c6ca3-9585-4c66-b9b0-f4c3bd57ccf4   Berkowitz   PERSON   9   385
USER.A-GovDocs-f83c6ca3-9585-4c66-b9b0-f4c3bd57ccf4   Marotolli   PERSON   939420
USER.A-GovDocs-f83c6ca3-9585-4c66-b9b0-f4c3bd57ccf4   Corzatt   PERSON   7   39772
USER.A-GovDocs-f83c6ca3-9585-4c66-b9b0-f4c3bd57ccf4   Berkowitz   PERSON   9  40314
USER.A-GovDocs-f83c6ca3-9585-4c66-b9b0-f4c3bd57ccf4   Corzatt   PERSON   7   40584
USER.A-GovDocs-f83c6ca3-9585-4c66-b9b0-f4c3bd57ccf4   Berkowitz   PERSON   9  40840
USER.A-GovDocs-f83c6ca3-9585-4c66-b9b0-f4c3bd57ccf4   Rich   PERSON   4   41038
USER.A-GovDocs-f83c6ca3-9585-4c66-b9b0-f4c3bd57ccf4   Lea   PERSON   3   41044
USER.A-GovDocs-f83c6ca3-9585-4c66-b9b0-f4c3bd57ccf4   Anthony   PERSON   7   41049
USER.A-GovDocs-f83c6ca3-9585-4c66-b9b0-f4c3bd57ccf4   Bill   PERSON   4   41062
USER.A-GovDocs-f83c6ca3-9585-4c66-b9b0-f4c3bd57ccf4   Nelson   PERSON   6   41067
USER.A-GovDocs-f83c6ca3-9585-4c66-b9b0-f4c3bd57ccf4   Barbara   PERSON   7   41078
USER.A-GovDocs-f83c6ca3-9585-4c66-b9b0-f4c3bd57ccf4   Chanko   PERSON   6   41086 
```

我已经查看了我的源数据，看看是否有 4 个额外的选项卡，但事实并非如此。

这里的任何人都知道这 4 个额外的列来自哪里？

亲切的问候，

马汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T08:33:04.413

您应该替换任何`\n`可能位于同一列中的字符串数据中的任何内容。那些额外的`\n`可能会创建额外的列。

```
select regexp_replace(mensaje,"\n"," ") from partido where id = "1e2af"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-22T12:35:10.023

这里你没有创建外部表，所以不需要提及位置。从查询中删除位置，然后您将获得正确的值。

# drupal - Drupal 首页上的 Meta Head 标题

> ID：14607511
> 
> 赞同：0
> 
> 时间：2013-01-30T15:26:10.917
> 
> 标签：drupal, drupal-7, drupal-theming

出于某种原因，我没有更改我的一个 drupal 站点主页上的首页 URL，现在更改它有点晚了（主要是时间）。

有谁知道如何在 Drupal 7 的首页更改头部元标题？当我大部分时间都在 Drupal 工作时，这让我发疯。一定很简单，我完全想念它！

通常这将是页面标题 | 如果我可以编辑页面但不更改配置设置中的默认首页 url，则站点名称意味着它不能通过单击编辑按钮直接编辑。目前它显示欢迎使用 SiteName。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:44:10.650

抓住这个[页面标题](http://drupal.org/project/page_title)，应该可以解决你所有的问题，因为它将“内容标题”与“元页面标题”分开

# configuration - 使用 rsyslog 将 msg 属性更改为新值

> ID：14607521
> 
> 赞同：3
> 
> 时间：2013-01-30T15:26:42.373
> 
> 标签：configuration, replace, rsyslog, msg

我有这个 rsyslog 配置：

```
 $template f_x,"/path/%programname%.%$YEAR%%$MONTH%%$DAY%%$HOUR%.log"

    if $programname == 'xyz' and $msg contains 'Hello World' or $msg contains 'FATAL'         
    then $msg = 'Starting xyz' ?f_x
    & ~ 
```

如何在此配置中将我的接收 $msg 属性从 'Hello World' 更改为 $msg = 'BlaBlaBla' 并写入文件 (%programname%.%$YEAR%%$MONTH%%$DAY%%$HOUR%. log) 最后的 $msg 值

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-15T20:09:08.070

您不能覆盖该`msg`属性。

从 rsyslog 7 开始，您可以通过使用 CEE/lumberjack 属性和自定义模板来实现这一目的。这是一个例子：

```
# Notice the use of $!msg in template string
template(name="logline" type="string"
         string="%TIMESTAMP:::date-rfc3339% %HOSTNAME% %syslogtag%%$!msg:::sp-if-no-1st-sp%%msg:::drop-last-lf%\n")

# If the message matches your conditions, set $!msg to your custom string
if ($programname == 'xyz' and $msg contains 'Hello World' or $msg contains 'FATAL') then set $!msg = "Starting xyz";
# Otherwise, use the msg property value
else set $!msg = $msg;

# Finally, use the custom template
action(type="omfile" file="/tmp/logfile" template="logline") 
```

有关 rsyslog 中 CEE/lumberjack 属性的更多信息，请参阅[http://www.rsyslog.com/how-to-set-variables-in-rsyslog-v7/](http://www.rsyslog.com/how-to-set-variables-in-rsyslog-v7/)。

# javascript - 渲染后如何向组件添加插件？

> ID：14607528
> 
> 赞同：2
> 
> 时间：2013-01-30T15:27:01.040
> 
> 标签：javascript, extjs, javascript-framework

我有一个自定义插件，在某些事件触发后要添加到组件中。该事件在组件被渲染到页面后触发（虽然它不是 afterrender 事件，它是一个 keyup 事件）。所以这个插件也是在渲染之后添加的。看来我需要以某种方式刷新组件的配置才能使插件生效。或者可能有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T01:14:34.523

可以这样做，但插件的 api 不支持。在我们的代码库中，我们有一个执行此逻辑的实用程序方法。在定义类时首选插件添加器功能，`Ext.apply(this, {plugins: ...})`因为允许扩展和实例化类通过配置动态添加插件。

这是它与覆盖一起使用：

```
Ext.override(Ext.Component, {
    addPlugin: function(p) {
        //constructPlugin is private.
        //it handles the various types of acceptable forms for
        //a plugin
        var plugin = this.constructPlugin(p);
        this.plugins = Ext.Array.from(this.plugins);

        this.plugins.push(plugin);

        //pluginInit could get called here but
        //the less use of private methods the better
        plugin.init(this);

        return plugin;
    }
});
//EXAMPLE
Ext.define('PluginLogger', {
    extend: 'Ext.AbstractPlugin',
    alias: 'plugin.logger',
    init: function(c) {
        console.log(c.plugins);
    }
});

var comp = new Ext.Component({
    plugins: 'logger'
});
//logs [plugin]

comp.addPlugin({
    ptype: 'logger'
});
// logs [plugin, plugin] 
```

# node.js - Jade and Express - Block in Block

> ID：14607529
> 
> 赞同：1
> 
> 时间：2013-01-30T15:27:03.300
> 
> 标签：node.js, express, block, pug

Little Question to Jade and Express here. For me it is not possible to use Blocks in Blocks ...

So let's assume my layout.jade looks like this:

```
!!!
html
  head
    scripts meta tags and other stuff here...
  body
    block content 
```

And a page for example home.jade looks like this:

```
extends layout

block content
  html stuff here
  block table 
```

And table.jade looks like this:

```
extends home

block table
  html table here 
```

Is this even possible ? I mean, I want to achieve that only the table is rendered in a response, like

```
res.render('table', data); 
```

and the view only updates the Table.

Any suggestions ? Thanks ..

# perl - How do I use Perl to create multiple movie files out of a single movie file?

> ID：14607530
> 
> 赞同：1
> 
> 时间：2013-01-30T15:27:05.690
> 
> 标签：perl, video

Is there a way to use perl to create seven 1-minute long movies out of a 7-minute long quicktime movie (encoding H.264)? The movie would include video and sound as well.

**EDIT**: Based on DVK's comment, it seems that ffmpeg does this easily. There is a great wiki on how to install ffmpeg on your system: [http://ffmpeg.org/trac/ffmpeg/wiki/MacOSXCompilationGuide](http://ffmpeg.org/trac/ffmpeg/wiki/MacOSXCompilationGuide)

and then one can use the following command to divide let's say a 3-minute video into three one-minute sequence:

```
ffmpeg -i skinner.mov -ss 00:00:00 -t 00:01:00 -c copy smallfile1.mov -ss 00:01:00 -t 00:01:00 -c copy smallfile2.mov -ss 00:02:00 -t 00:01:00 -c copy smallfile3.mov 
```

Any way of doing this with perl on a server?

# java - 通过从 android 应用程序到 servlet 的 GET 方法接收到多个空参数

> ID：14607535
> 
> 赞同：0
> 
> 时间：2013-01-30T15:27:21.667
> 
> 标签：java, android, servlets, parameters, null

我试图通过获取请求使用 AsyncTask<> 从一个简单的 android 应用程序发送一些参数，但是当我在 servlet 上获取参数时，这些参数为空！而且我不明白为什么......，logcat没有显示任何错误，所以我找不到原因......这是我的主要活动：

```
package com.theopentutorials.android;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLConnection;
import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

//the main activity
public class HttpGetServletActivity extends Activity implements OnClickListener {
Button button; // gui part
TextView outputText;
EditText titulli;
EditText ingredientet;
EditText receta;

public static String getTitulliS() {
    return titulliS;
}

// setters and getters of the url parameters
public static void setTitulliS(String titulliS) {
    HttpGetServletActivity.titulliS = titulliS;
}

public static String getIngredientetS() {
    return ingredientetS;
}

public static void setIngredientetS(String ingredientetS) {
    HttpGetServletActivity.ingredientetS = ingredientetS;
}

public static String getRecetaS() {
    return recetaS;
}

public static void setRecetaS(String recetaS) {
    HttpGetServletActivity.recetaS = recetaS;
}

public static String getURL() {
    return URL;
}

public static void setURL(String uRL) {
    URL = uRL;
}

// the parameters i would like to send
static String titulliS;
static String ingredientetS;
static String recetaS;
static String URL = "http://10.0.2.2:8080/HttpGetServlet/HelloWorldServlet?"
        + getTitulliS() + getIngredientetS() + getRecetaS();

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    findViewsById();

    button.setOnClickListener(this);
}

private void findViewsById() {
    button = (Button) findViewById(R.id.button);
    outputText = (TextView) findViewById(R.id.outputTxt);
    titulli = (EditText) findViewById(R.id.editText1);
    ingredientet = (EditText) findViewById(R.id.editText2);
    receta = (EditText) findViewById(R.id.editText2);
    setTitulliS("titulli=" + titulli.getText().toString() + "&");
    setIngredientetS("ingredientet=" + ingredientet.getText().toString()
            + "&");
    setRecetaS("receta=" + receta.getText().toString());

}

public void onClick(View view) {

    GetXMLTask task = new GetXMLTask();
    task.execute(new String[] { URL });
}

private class GetXMLTask extends AsyncTask<String, Void, String> {
    @Override
    protected String doInBackground(String... urls) {
        String output = null;
        for (String url : urls) {
            output = getOutputFromUrl(url);
        }
        return output;
    }

    private String getOutputFromUrl(String url) {
        StringBuffer output = new StringBuffer("");
        try {
            InputStream stream = getHttpConnection(url);
            BufferedReader buffer = new BufferedReader(
                    new InputStreamReader(stream));
            String s = "";
            while ((s = buffer.readLine()) != null)
                output.append(s);
        } catch (IOException e1) {
            e1.printStackTrace();
        }
        return output.toString();
    }

    // Makes HttpURLConnection and returns InputStream
    private InputStream getHttpConnection(String urlString)
            throws IOException {
        InputStream stream = null;
        URL url = new URL(urlString);
        URLConnection connection = url.openConnection();

        try {
            HttpURLConnection httpConnection = (HttpURLConnection) connection;
            httpConnection.setRequestMethod("GET");
            httpConnection.connect();

            if (httpConnection.getResponseCode() == HttpURLConnection.HTTP_OK) {
                stream = httpConnection.getInputStream();
            }
        } catch (Exception ex) {
            ex.printStackTrace();
        }
        return stream;
    }

    @Override
    protected void onPostExecute(String output) {
        outputText.setText(output);
    }
}
} 
```

这是我的简单 servlet：

```
import java.io.IOException;
import java.io.PrintWriter;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
@WebServlet("/HelloWorldServlet")
public class HelloWorldServlet extends HttpServlet {
private static final long serialVersionUID = 1L;

public HelloWorldServlet() {
    super();
}

protected void doGet(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {
       String titulli =  request.getParameter("titulli");
      String ingredientet =  request.getParameter("ingredientet");
       String receta =  request.getParameter("receta");
        PrintWriter out = response.getWriter();
        out.println(titulli+ingredientet+receta);
        System.out.println(titulli+ingredientet+receta);
}
} 
```

有人知道吗？提前谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:44:50.950

对我来说，看起来好像您只在 中为输入字段设置参数扩展名，例如`onCreate()`，当您真的必须这样做时`onClick()`。

我还有一些关于“为什么是静态的？”的评论。等等，但你没有要求。;)

# java - 使用 DriverManager - Java 连接到外部 mysql 数据库

> ID：14607536
> 
> 赞同：1
> 
> 时间：2013-01-30T15:27:22.740
> 
> 标签：java, mysql, database-connection

我想这对我来说是一个简单的语法错误。不久前我购买了一个网络托管计划，并有一些空的 MySQL 数据库，我只是想练习连接和传递一些数据。

我发现了很多关于如何做到这一点的帖子，但都涉及“localhost”作为 IP。我从其他帖子中收集了这个语法，但仍然收到错误消息

```
Unable to connect to database error: java.sql.SQLException: No suitable driver found for jdbc:mysql://ipAddress:port/dbName 
```

我看过的所有地方都表明这是一个 URL 问题，或者驱动程序没有加载。我已下载 .jar 并将其放置在 IntelliJ 中的 Classpath 中，但找不到有关加载驱动程序文件的任何其他内容。这是我的代码，IP 地址是我网站的 IP。

```
Connection connection = null;

        try{
            Class.forName("com.mysql.jdbc.Driver").newInstance();

        } catch (Exception err){
            System.out.println(err.getMessage());
        }

        //Establish connection using DriverManager
        try {
            String host = "jdbc:mysql://ipAddress:3306/dbName";
            String uName = "userName";
            String uPass= "userPass";
            connection = DriverManager.getConnection(host, uName, uPass);
        } catch (SQLException err) {
            System.out.println("Unable to connect to database error: "+err);
        } 
```

我尝试将“主机”更改为我在网上看到的一些不同的东西：

```
jdbc:mysql:ipAddress:3306/dbName
jdbc:mysql://ipAddress/dbName 
```

我也遵循了这一点，但我的问题主要在于我认为的 URL。 [http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Frzaha%2Fdb2drivr.htm](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Frzaha%2Fdb2drivr.htm)

任何援助将不胜感激！

编辑：我下载了那个.jar，但不知道把它放在哪里，所以我把它放在这个目录中，然后我把这个目录链接为一个类路径。 `//Library/Java/JavaVirtualMachines/jdk1.7.0_12.jdk/Contents/MacOS/mysql-connector-java-5.1.22-bin.jar!/` 从这个链接：[JConnector](http://dev.mysql.com/downloads/connector/j/)

我从我的机器上运行它，并希望它连接到我的网络托管提供商数据库。该程序是一个简单的 Java 应用程序，它从 JFrame 中的文本框获取输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:05:42.680

您的具体错误信息：

```
Unable to connect to database error: java.sql.SQLException: 
No suitable driver found for jdbc:mysql://ipAddress:port/dbName 
```

当执行的 JVM 无法找到您的应用程序无法`MySQL Connector/J`在其类路径中找到 JAR 时会发生。

在 IntelliJ 中，您可以转到`File->Project Structure->Modules`. 对于您当前的模块，单击`Dependencies`选项卡。单击图标添加 JAR 或库，找到该`MySQL Connector/J`JAR。

现在，如果您通过 IntelliJ 运行它，您正在执行的 JVM 应该会找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:44:42.547

我建议更换

```
 try {
     Class.forName("com.mysql.jdbc.Driver").newInstance();
 } catch (Exception err){
     System.out.println(err.getMessage());
 } 
```

和

```
Class.forName("com.mysql.jdbc.Driver") 
```

1) newInstance() 无关紧要

2）如果没有这样的驱动程序让它抛出异常

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T15:45:20.287

“找不到合适的驱动程序”表示 JVM 找不到您的 mysql 连接器 jar 文件。您使用的是哪个版本的 mysql java 连接器？如果将它放在 IntelliJ 类路径中不起作用，请尝试使其成为您项目的依赖项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T16:33:36.877

您的代码似乎工作正常，问题一定出在连接器上。您目前使用的是哪种连接器？您可以使用 J 连接器并将 jar 文件添加到构建路径。

# alignment - Why don't the elements align properly horizontally?

> ID：14607537
> 
> 赞同：0
> 
> 时间：2013-01-30T15:27:25.287
> 
> 标签：alignment, html-lists

I made a navigation menu with an unordered list, it contains tags inside them span and one more span inside the first - with display: block. For some reason the list items don't align horizontally. Here is the code to see what I mean:

```
<!DOCTYPE html>

<html>
<head>
<meta charset="utf-8" />
<title>Shoshin and Sumikiri's Website</title>
<style>
*{margin:0;
 padding:0;
 border: 0;
 }
body{
 margin: 0;
 padding: 0;
 background-color: #30b4bc;
 background-image: url('Green-pattern-cat.png');
 }
.wrapper{
 width: 900px;
 margin: 30px auto;
 }
img{
 display: block;
 margin: 0 auto;
 }
ul{
 text-align: center;
 margin: 50px 0;
 }
li{
 background: url('Patch-menu.png') no-repeat;
 list-style-type: none;
 display: inline-block;
 margin-right: 40px;
 }
li:last-child{
 margin-right:0;
 }
a{
 display:inline-block;
 text-decoration:none;
 width: 134px;
 height: 134px;
 }
a>span{
 font: italic bold 24px/35px Segoe UI, sans-serif;
 color:black;
 display: block;
 width: 108px;
 height: 106px;
 margin-top: 10px;
 margin-left: 7px;
 }
span span{
 font: 14px/14px Corbel, sans-serif;
 color: #7a3225;
 display: block;
 }
</style>
</head>
<body>
<div class="wrapper">
    <nav>
        <img src="Main-image.png" alt="Шоши и Суми"/>
        <ul>
            <li>
                <a href="#"><span>Шоши<span>Или какви ги свърши Шошката досега</span></span></a>
            </li>
            <li>
                <a href="#"><span>Суми<span>Или какви ги свърши Суми досега</span></span></a>
            </li>
            <li>
                <a href="#"><span>Новини<span>Последни постижения и приключения</span></span></a>
            </li>
            <li>
                <a href="#"><span>Още<span>Какво още пропуснахте от светските новости</span></span></a>
            </li>
        </ul>
    </nav>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:30:04.053

你没有告诉我们他们目前是如何*对齐*的。如果它们的高度不同并且没有从顶部对齐，您可能会成功添加（尽管 CSS 精英可能会因此而讨厌我们俩）`vertical-align:top;`。

# oracle - Oracle package debug doesn't stop on breakpoint

> ID：14607538
> 
> 赞同：4
> 
> 时间：2013-01-30T15:27:28.807
> 
> 标签：oracle, debugging, oracle-sqldeveloper, plsqldeveloper

I have the following structure:

A package PCK_LANCAMENTOSERVICO within a procedure called P_Integra.

This procedure calls another procedure in another package PCK_LANCAMENTO called P_BeforeLancamento

The procedure P_BeforeLancamento calls another procedure called P_ProximoLanc in PCK_UTIL

I'm debugging the P_Integra(PCK_LANCAMENTOSERVICO) procedure. If a put a breakpoint in P_Integra procedure, this works ok. If a put a breakpoint in P_ProximoLanc procedure, this works fine. But if a put a brekpoint in P_BeforeLancamento, the debugger doesn't stop on breakpoint.

I added debug information in all packages. The package PCK_LANCAMENTOSERVICO has 500 lines. The package PCK_LANCAMENTO has 4000 lines and the package PCK_UTIL has 300 lines.

The debugger doesn't work in SQL Developer neither in PL/SQL Developer.

Is there a know issue about this? Size of package? Or another thing?

Thanks a lot

André

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T05:01:23.020

您可能有权执行该过程，但不能对其进行调试。查看此查询的结果：

```
select *
from all_tab_privs
where privilege in ('EXECUTE', 'DEBUG')
    and table_name in ('PCK_LANCAMENTOSERVICO', 'PCK_LANCAMENTO', 'PCK_UTIL'); 
```

如果`DEBUG`缺失，执行`grant debug on PCK_LANCAMENTO to <your_user>;`

# php - Slow query and returning times before current time

> ID：14607541
> 
> 赞同：1
> 
> 时间：2013-01-30T15:27:34.650
> 
> 标签：php, mysql

My site is loading very slowly, it's only a single page that is loading slow, and I suspect it is because of a MySQL query being sent to the database. How can I speed it up?

```
$depquery = "SELECT * FROM phpvms_schedules 
WHERE code = 'FE'
AND locate(dayofweek(convert_tz(now(),'+1:00','+0:00'))-1,".TABLE_PREFIX."schedules.daysofweek)>0
AND phpvms_schedules.enabled = '1'
ORDER BY deptime ASC"; 
```

The query is basically working to extract information into a 'Departure Board' table. The table is sorted by `deptime`, and it displays results from current time onwards. However, I also want it to go back at least 4 records, to 4 flights before current time.

To clarify, let me give you an example:

It's now 15:25\. Because of `if(($flight->deptime) >= $time)` and `if($count < 15)` and inside a `foreach` it will display 15 records on and after that time. However, I want to also travel back 4 records, so it finds last 4 records before 15:25\. Is this possible?

Basically, I want to search up and down around the current time.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:38:55.667

你想要一个 UNION，比如：

```
SELECT * phpvms_schedules 
WHERE code = 'FE' 
AND locate(dayofweek(convert_tz(now(),'+1:00','+0:00'))-1,
     ".TABLE_PREFIX."schedules.daysofweek)>0
AND phpvms_schedules.enabled = '1'
ORDER BY deptime ASC
LIMIT 15
UNION ALL
SELECT * phpvms_schedules 
WHERE code = 'FE' 
AND locate(dayofweek(convert_tz(now(),'+1:00','+0:00'))-1,
     ".TABLE_PREFIX."schedules.daysofweek)<0
AND phpvms_schedules.enabled = '1'
ORDER BY deptime DESC
LIMIT 4 
```

注意我没有猜到你的日期函数，因为我不知道它在做什么。我只是将 > 更改为 < 并将 deptime 上的排序更改为 DESC。（其中一个 < > 可能还需要有一个 = 才不会错过现在的出发时间？）

使用 LIMIT 将在数据库中进行过滤，而不是在听起来像您正在做的代码中进行过滤。这将减少在代码中处理这些信息的开销，并且应该更快。我还将在数据库中对这些结果的 UNION 进行排序，并避免在代码中进行。

**编辑**

为了完全清楚，这应该处理数据库中的排序：

```
SELECT tbl* FROM (
SELECT * phpvms_schedules 
WHERE code = 'FE' 
AND locate(dayofweek(convert_tz(now(),'+1:00','+0:00'))-1,
     ".TABLE_PREFIX."schedules.daysofweek)>0
AND phpvms_schedules.enabled = '1'
ORDER BY deptime ASC
LIMIT 15
UNION ALL
SELECT * phpvms_schedules 
WHERE code = 'FE' 
AND locate(dayofweek(convert_tz(now(),'+1:00','+0:00'))-1,
     ".TABLE_PREFIX."schedules.daysofweek)<0
AND phpvms_schedules.enabled = '1'
ORDER BY deptime DESC
LIMIT 4
) as tbl ORDER BY tbl.deptime ASC 
```

# visual-studio-2010 - Deleting devexpress bar on designer

> ID：14607550
> 
> 赞同：0
> 
> 时间：2013-01-30T15:27:55.103
> 
> 标签：visual-studio-2010, devexpress

This has to be an easy one. I've got a form and I can't see one of the Dev Express bars on the designer surface. How do I find it and remove it without manually going in and delete the designer code.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:27:47.043

查看菜单 -> 属性窗口，您应该在属性窗口的顶部看到一个元素的下拉列表。在列表中选择它，然后在主窗口中选择设计器选项卡以将焦点移回那里，然后按 Delete 键。

# macos - Draw a border around a part of NSAttributedString

> ID：14607551
> 
> 赞同：1
> 
> 时间：2013-01-30T15:27:55.130
> 
> 标签：macos, cocoa, draw, core-text, nsattributedstring

I'm developing a MacOs application and have to implement my own search functional due to custom interface.

So the question is - how can a draw a border around a part of NSAttributedString in NSTextView to display search result (just how it's done in TextEdit app). Please check the desired look on the attached image:

[http://d.pr/i/w8wP](http://d.pr/i/w8wP)

**[UPDATE]**

Due to custom interface requirements I can't use NSTextViews's `setUsesFindBar:` and `setUsesFindPanel:`. The interface has a custom NSSearchField, which should perform search in a textView.

I've got familiar with `performTextFinderAction:`, but how do I trigger it on a textView with the NSSearchField value?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:20:31.333

对于您想要做的事情，您不需要使用 IB 或任何 find 操作，因为一个`NSTextView`对象（假设它的名称是`myTextView`）可以完成所有工作。您必须首先创建一系列要突出显示的字符，然后告诉`myTextView`这样做：

```
NSRange charRange = NSMakeRange( location length );   // whatever you want
[myTextView showFindIndicatorForRange:charRange]; 
```

如果选择在 a 内，`NSScrollView`则应使该选择可见。在致电之前执行此操作`-showFindIndicatorForRange`（请参阅下面的文档`NSTextView`）：

```
NSLayoutManager *layout = [myTextView layoutManager];
NSRect rect = [layout boundingRectForGlyphRange:charRange
                                inTextContainer:[myTextView textContainer] ];
[myTextView scrollRectToVisible:rect]; 
```

现在是一个扩展，可以根据需要显示尽可能多的突出显示的字符串。假设我们要在素数位置标记所有字符。（我不知道这有什么好处，但为什么不呢？）。我们创建一个具有相应范围的 NSArray：（**伪代码**！，范围必须是 NSValues！）

```
allRanges = { (1,1) (2,1) (3,1) (5,1) (7,1) etc.} 
```

现在可以一起选择所有内容：

```
[myTextView setSelectedRanges:allRanges];
// select the 3th (zero based) entry
[showFindIndicatorForRange:[allRanges objectAtIndex:3]; 
```

这在查找机制中使用，但它也可以在不使用任何查找过程的情况下工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:08:54.360

在界面生成器中，您可以设置“查找”属性来控制内置查找/替换栏的显示位置。要在代码中执行查找操作，请`performFindPanelAction:`在 NSTextView 上调用。

# macos - 我的applescript由于某种原因无法关闭？

> ID：14607552
> 
> 赞同：2
> 
> 时间：2013-01-30T15:27:55.080
> 
> 标签：macos, applescript

这是我拥有的applescript，它用于打开Minecraft 和自动登录。当它没有捆绑在应用程序中时它可以正常工作。然而，每当我捆绑它时，它最后都会保持打开状态，然后给我错误“[脚本]的结尾不理解脚本的结尾”。我究竟做错了什么？

```
if application "Minecraft" is running then
    beep 1
    display dialog "Error: Minecraft cannot be launched as it is already running." buttons {"Cancel"} default button 1
end if
tell application "Minecraft"
    launch
    activate
end tell
set timeoutSeconds to 1
set uiScript to "click Ul Element \"Login\" of window \"Minecraft Launcher\" of application process \"Minecraft\""
my doWithnmeout(uiScript, tlmeoutSeconds)
end run
on doWithnmeout(uiScript, tlmeoutSeconds)
    set endDate to (current date) + timeoutSeconds
    repeat
        try
            run script " tell application \"System Events\"
" & uiScript & "
end tell"
            exit repeat
        end try
    end repeat
end doWithnmeout
end run
tell application "Minecraft"
    activate
end tell
end run 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:34:04.973

删除包含“结束运行”的行。通常，当您运行一个applescript时，它会执行像这样组成的“on run”处理程序中的代码......

```
on run
   -- your code goes here
end run

-- any handlers go here like your doWithTimeout() handler 
```

但是，如果您省略 on run 处理程序，applescript 会假定所有内容都在 on run 处理程序中。因此，除非您想使用其他特定的 applescript 处理程序，例如“退出时”，否则您实际上并不需要它。

你永远不会在没有“on run”语句的情况下使用“end run”，也永远不会多次使用“end run”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-20T16:59:51.113

试试这个：

```
if application "Minecraft" is running then
    beep 1
    display dialog "Error: Minecraft cannot be launched as it is already running." buttons {"Cancel"} default button 1
end if
tell application "Minecraft"
    launch
    activate
end tell
set timeoutSeconds to 1
set uiScript to "click Ul Element \"Login\" of window \"Minecraft Launcher\" of application process \"Minecraft\""
my doWithnmeout(uiScript, tlmeoutSeconds)
end run
on doWithnmeout(uiScript, tlmeoutSeconds)
    set endDate to (current date) + timeoutSeconds
    repeat
        try
            run script " tell application \"System Events\"
" & uiScript & "
end tell"
            exit repeat
        end try
    end repeat
end doWithnmeout
end run
tell application "Minecraft"
    activate
end tell
end run
end 
```

# api - Is there a way to use nexmo with a test api key?

> ID：14607556
> 
> 赞同：6
> 
> 时间：2013-01-30T15:28:01.547
> 
> 标签：api, api-key, nexmo

I wonder how we're suppose to integrate and unittest nexmo. They don't have any test api key such as stripe, etc. They also charge you regardless of whether sms is sent or not

They don't publish numbers where you can send a messae and not get charged for. So, how do people test a nexmo integration without spending real money?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-16T18:20:29.713

要开始使用 Nexmo，请先在[https://dashboard.nexmo.com/sign-up注册](https://dashboard.nexmo.com/sign-up)

您从帐户中的信用开始，您可以使用它来测试 API。在您开始演示时，您会获得一个**api_key**、**api_secret**和一个分配给您帐户的**号码。**

您可以在“to”字段中使用 10 个列入白名单的号码（取决于您使用的 api）。

从这里开始，您只需进行 HTTP 调用即可开始发送您的第一条文本。您可以通过在您的应用程序中进行调用或使用以下站点来测试 API：[https](https://www.hurl.it/) ://www.hurl.it/并输入基本 URL ( [https://rest.nexmo.com/sms/json](https://rest.nexmo.com/sms/json) ?)并输入所需参数的名称和值。

*全面披露，我在 Nexmo 工作*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:54:41.303

当您注册一个帐户时，他们会免费为您提供一些信用。这应该足以让您测试、让您的应用程序正常工作并意识到您是否想长期使用他们的 SMS 网关。

你最好联系他们。他们在回复时往往非常快速和乐于助人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-28T08:45:40.937

有一个沙盒 api，您可以获取测试 api 密钥。

[https://labs.nexmo.com/](https://labs.nexmo.com/)

这对于熟悉 api 和模拟现实世界中不会发生的情况非常有用。

但是，能够像您描述的那样使用实际的 api 会很棒。

# visual-studio-2010 - Repeated pop-up from "Interactive Services Detection" after installing Visual Studio 2010 SP1

> ID：14607558
> 
> 赞同：2
> 
> 时间：2013-01-30T15:28:09.163
> 
> 标签：visual-studio-2010, windows-7, installation

I've installed Visual Studio 2010 with Service Pack 1 on Windows 7\. I am logged on as an administrator and running the application using the "Run as administrator" option in the shortcut to `devenv.exe`.

Now I get a message periodically, even when the application does not seem to be running (i.e., can't find any evidence of it running even as a service or in the process list in Task Manager).

It starts with a pop-up titled "Interactive Services Detection" with the message:

> A programming running on this computer is trying to display a message.

When I click "View the message" I see the following:

> A device or program has requested attention. Device or application: c:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\devenv.exe. Message title: Microsoft Visual Studio.

I also see this message:

> The Application Data folder for Visual Studio could not be created.

A similar installation on another similarly configured computer does not have this problem.

Are there any additional steps which need to be taken to get Visual Studio 2010 SP1 to work correctly on Windows 7?

# actionscript-3 - PDF Parser Library for Actionscript3/Adobe AIR

> ID：14607562
> 
> 赞同：3
> 
> 时间：2013-01-30T15:28:21.707
> 
> 标签：actionscript-3, flash, apache-flex, actionscript, air

I’m working on AIR application,

my problem is I have to extract text, images or any other objects from the PDF file and convert in to text or image controls respectively in my application, and

then I have to add the controls to a container at the same positions (same x, y, width, height) like in PDF file.

Also I have to display the PDF page thumbnail images on a list.

Is there any better option for parsing PDF files and generating thumbnail from PDF pages without using any server side scripting?

Is there any opensource lib available other than `Alive PDF`?. In Alive PDF hard to parse my requirement.

your bit help also welcome.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:15:16.373

您应该尝试 PurePdf：[http ://code.google.com/p/purepdf/](http://code.google.com/p/purepdf/)

您还可以使用外部应用程序并通过 Air NativeProcess 类启动它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:05:08.643

[http://avinashkaza.com/blog/?p=1](http://avinashkaza.com/blog/?p=1)

应用程序类 SamplePDFLoader.mxml 调用 IFrame 组件并在创建完成时加载 PDF 文件。当用户单击按钮时，该类还通过外部接口类调用 JavaScript 函数来打印 PDF。IFrame.mxml 组件，该组件调用包装器 html 的 javascript 函数以将 PDF 加载到 div 标签中，使用 IFrame 组件容器移动 PDF 等。

[http://www.devaldi.com/?p=212](http://www.devaldi.com/?p=212)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T07:33:35.087

如果您有一些预算，我可以强烈推荐[http://bfo.com](http://bfo.com)的 Java PDF 库。 我们在一个大型项目中使用它，结果非常好。

# c++ - 从 Windows 服务检测 SD 卡插入？

> ID：14607564
> 
> 赞同：2
> 
> 时间：2013-01-30T15:28:22.897
> 
> 标签：c++, windows, service, sd-card

我需要检测来自 Windows 服务的可移动媒体插入。使用不可见的窗口，我可以成功检测带有 的 USB 拇指驱动器`RegisterDeviceNotification`，但事实证明 SD 卡更加困难。我找到了使用 的代码`SHChangeNotifyRegister`，但经过进一步调查，我只能从窗口应用程序中让它工作。

（从 codeproject 找到的代码：http: [//www.codeproject.com/Articles/3946/Trapping-windows-messages?](http://www.codeproject.com/Articles/3946/Trapping-windows-messages?msg=2897423#xx2897423xx) msg=2897423#xx2897423xx ）

```
namespace globals{
    SHChangeNotifyEntry shcne[1];
}
...

globals::shcne[0].pidl = NULL;
globals::shcne[0].fRecursive = TRUE;

globals::hNotify = SHChangeNotifyRegister(globals::hwnd, SHCNE_DISKEVENTS, 
                                          SHCNE_MEDIAINSERTED | SHCNE_MEDIAREMOVED,      
                                          WM_MEDIA_CHANGE, 1, globals::shcne); 
```

我收到的错误是

> 122 (ERROR_INSUFFICIENT_BUFFER - “传递给系统调用的数据区域太小。”)

尽管调用相同，但在我的 Win32 窗口应用程序测试程序中不会出现此错误。

编辑：我已经通过使用标志注册服务解决了错误消息（有点）`SERVICE_INTERACTIVE_PROCESS`，但我仍然没有在我的 WndProc 中收到消息。

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-11T14:16:28.763

即使我在这里复活旧线程：

只需使用`RegisterDeviceNotification`with `DEVICE_NOTIFY_SERVICE_HANDLE`，您（当然）必须通过[RegisterServiceCtrlHandlerEx 注册您的](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685058(v=vs.85).aspx)[ControlHandler](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683241(v=vs.85).aspx)，其中您需要您的 serviceName -并且不要忘记在启动服务之前需要注册此句柄（也提到@MSDN）。您可以安全地将函数指针转换为 ，只要您的函数签名与 MSDN 示例匹配，这些转换通常是安全的。`LPHANDLER_FUNCTION_EX`

最后，您现在可以`GUID_DEVINTERFACE_SMARTCARD_READER`用作参数`RegisterDeviceNotification`

您的回调必须具有此签名： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms683241 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683241(v=vs.85).aspx)

# mysql - 搜索文本，返回多个单词匹配

> ID：14607565
> 
> 赞同：0
> 
> 时间：2013-01-30T15:28:28.020
> 
> 标签：mysql, sql

我正在搜索包含列 ID、消息的消息表中的特定单词

我目前正在使用表格的案例

```
select message_table.id, 
    case 
    when message_table.message like "%word1%" then 'word1'
    when message_table.message like "%word2%" then 'word2'
    when message_table.message like "%word3%" then 'word3'
    end as Filter
from message_table where Filter is not null 
```

如果 Message 列中的一行具有值 ;word1,word2,word3; 目前只返回一个。

我想拥有它们。认为 concat/group concat 可能会有所帮助，但不太确定如何为找到的每个单词生成一行。

将不胜感激任何建议！

编辑：提供的所有解决方案看起来都不错，必须全部尝试，看看哪个具有最佳性能。我当前的查询已经比我想要的要长，稍后会返回结果

Edit2：明智的获胜者速度是（甚至比我上面的情况还要快）。

```
select id, group_concat(word)
from
   (
   select id, 'word1' as Word from message_table where message like "%word1%" union
   select id, 'word2' from message_table where message like "%word2%" union
   select id, 'word3' from message_table where message like "%word3%" 
   ) alias
   group by 1 
```

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:39:05.083

如果要为每个单词返回单独的行，最简单的方法是本质上进行三个查询并将它们与 UNION 放在一起：

```
SELECT id, 'word1' FROM message_table WHERE Filter IS NOT NULL AND message like '%word1%'
  UNION
SELECT id, 'word2' FROM message_table WHERE Filter IS NOT NULL AND message like '%word2%'
  UNION
SELECT id, 'word3' FROM message_table WHERE Filter IS NOT NULL AND message like '%word3%'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:39:21.780

根据您的输出需求，这样的事情应该使用`CONCAT`：

```
select message_table.id,
    concat(
       case 
          when message_table.message like "%word1%" then 'word1'
          else ''
       end,
       case
          when message_table.message like "%word2%" then 'word2'
          else ''
       end,
       case
          when message_table.message like "%word3%" then 'word3'
          else ''
       end)
    as Filter
from message_table 
```

这是[小提琴](http://sqlfiddle.com/#!8/40e0f/4)。

祝你好运。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T15:40:57.783

您可以通过加入来做到这一点：

```
select mt.message_table_id, words.word as filter
from message_table mt join
     (select 'word1' as word union all select 'word2' union all select' word3'
     ) words
     on mt.message like concat('%', words.word, '%') 
```

# c# - 将 WinForms 控件绑定到 ObjectA.ObjectB.Property

> ID：14607572
> 
> 赞同：5
> 
> 时间：2013-01-30T15:28:48.150
> 
> 标签：c#, winforms, data-binding

我有一个代表这样的汽车的类：

```
public class Car
{
    public event PropertyChangedEventHandler PropertyChanged;

    private void RaisePropertyChanged([CallerMemberName] string caller = "")
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(caller));
        }
    }

    public enum Colors
    {
        LaserRed,
        GenuineGraniteMica,
        BluePearl,
        SandMicaMetallic,
        NightArmorMetallic
    }

    private string _make;
    public string Make
    {
        get { return _make; }
        set {
                _make = value;
                RaisePropertyChanged();
            }
    }

    private string _model;
    public string Model
    {
        get { return _model; }
        set {
                _model = value;
                RaisePropertyChanged();
            }
    }

    private Colors _color;
    public Colors Color
    {
        get { return _color; }
        set {
                _color = value;
                RaisePropertyChanged();
            }
    }

    public Tire FrontLeftTire = new Tire();
    public Tire FrontRightTire = new Tire();
    public Tire RearLeftTire = new Tire();
    public Tire RearRightTire = new Tire();

    public Car()
    {
        // initialization code
    } 
```

如您所见，我的 Car 类有四个轮胎，Tire 类如下所示：

```
public class Tire : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private void RaisePropertyChanged([CallerMemberName] string caller = "")
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(caller));
        }
    }

    public enum SizeValues
    {
        [Description("17 inches")]
        SeventeenInches,
        [Description("18 inches")]
        EighteenInches,
        [Description("19 inches")]
        NineteenInches,
        [Description("20 inches")]
        TwentyInches,
    }

    private string _brand;
    public string Brand
    {
        get { return _brand; }
        set
        {
            _brand = value;
            RaisePropertyChanged();
        }
    }

    private SizeValues _size;
    public SizeValues Size
    {
        get { return _size; }
        set
        {
            _size = value;
            RaisePropertyChanged();
        }
    }

    public Tire()
    {
        // initialization code
    } 
```

在我的 WinForms UI 中，我有一个对应于每个轮胎的 Size 属性的组合框（下拉列表）。我正在尝试将每个组合框绑定到相应轮胎的 Size 属性，但我一直用来绑定到汽车对象本身属性的代码不起作用。这是我用来将组合框绑定到汽车的 Color 属性的代码：

```
comboBoxCarColor.DataBindings.Add(new Binding("SelectedValue", bindingSourceForCars, "Color", true, DataSourceUpdateMode.OnPropertyChanged));
comboBoxCarColor.DataSource = new BindingSource(Utility.ConvertEnumToListOfKeyValuePairs(typeof(Car.Color)), null);
comboBoxCarColor.DisplayMember = "Value";
comboBoxCarColor.ValueMember = "Key"; 
```

这工作正常。但我认为我现在遇到的问题是我试图绑定到一个属性，该属性不是汽车的直接子属性，而是汽车轮胎之一的属性。所以，这样的事情是行不通的：

```
comboBoxFrontLeftTimeSize.DataBindings.Add(new Binding("SelectedValue", bindingSourceForCars, "FrontLeftTire.Size", true, DataSourceUpdateMode.OnPropertyChanged)); 
```

我认为问题出在数据成员（“FrontLeftTire.Size”）上，但我不确定。我只是以错误的方式引用它，还是我在这里的方法完全错误？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T16:12:33.677

我认为有两个问题：

1）我认为您需要将轮胎对象声明为属性，而不是字段：

而不是这个：

```
public Tire FrontLeftTire = new Tire() 
```

尝试将其更改为：

```
private Tire frontLeftTire = new Tire()

public Tire FrontLeftTire {
  get { return frontLeftTire; }
} 
```

2) 我认为您可能遇到了 Microsoft 在 4.0 中对需要使用 BindingSource 的数据成员所做的重大更改。

而不是这个：

```
comboBoxFrontLeftTimeSize.DataBindings.Add(
                            new Binding("SelectedValue",
                                        bindingSourceForCars,
                                        "FrontLeftTire.Size",
                                        true,
                                        DataSourceUpdateMode.OnPropertyChanged)); 
```

尝试将其更改为：

```
BindingSource bs = new BindingSource(bindingSourceForCars, null);
comboBoxFrontLeftTimeSize.DataBindings.Add(
                                       "SelectedValue",
                                       bs,
                                       "FrontLeftTire.Size",
                                       true,
                                       DataSourceUpdateMode.OnPropertyChanged)); 
```

# crash - 关闭后 PB 12 IDE（和应用程序）崩溃

> ID：14607580
> 
> 赞同：0
> 
> 时间：2013-01-30T15:29:09.567
> 
> 标签：crash, powerbuilder

早上好，

我的 PowerBuilder 12.1 Classic (Build 6639) 和生成的 PowerBuilder 应用程序似乎都遇到了问题。我们目前遇到的问题是应用程序（或者，如果我们通过代码运行，IDE）在关闭主 MDI 后崩溃。不幸的是，崩溃没有一致的模式。我可以在 MDI 打开时立即关闭它，有时它会崩溃，有时它会正确关闭。

最初，我认为 Application 对象的关闭事件有问题，或者在引发 systemerror 事件的地方发生了一些事情。我通过关闭事件进行了调试，每一行都成功执行，但应用程序仍然崩溃。

我想我会尝试在应用程序上使用 /PBDEBUG 标志，并尝试获取成功关闭和不成功关闭的调试信息。我设法做到了，并且该文件包含完全相同的信息。它们都以以下信息结束：

```
 Executing object function +DESTROY for class TRANSACTION, lib entry _TYPEDEF
      Executing instruction at line 2325
      Executing object function DESTROYTRANSACTION for class TRANSACTION, lib entry _TYPEDEF
          Executing system dll function
      End class function DESTROYTRANSACTION for class TRANSACTION, lib entry _TYPEDEF
      Executing instruction at line 2326
  End class function +DESTROY for class TRANSACTION, lib entry _TYPEDEF 
```

我检查了 Windows 应用程序事件查看器，这是显示的内容：

```
Fault bucket , type 0
Event Name: CLR20r3
Response: Not available
Cab Id: 0

Problem signature:
P1: txintf.exe
P2: 11.1.18.1
P3: 4cec7a53
P4: System
P5: 2.0.0.0
P6: 506c18e6
P7: 2d4a
P8: 36
P9: System.ObjectDisposedException
P10: 
```

有人告诉我，当我们将 PB11 项目迁移到 PB12 Classic 时，这些问题开始出现。不知道这是否与它有关，但我想我会把它扔在那里。

有没有人遇到过类似的问题，或者有任何其他提示可以用来尝试诊断此问题？

谢谢你。

编辑：我注意到有时错误会显示在 Windows 事件日志中，以下是一些信息：

```
Faulting application name: txintf.exe, version: 13.0.2.3, time stamp: 0x4cec7a53
Faulting module name: KERNELBASE.dll, version: 6.1.7601.18015, time stamp: 0x50b83c8a
Exception code: 0xe0434f4d
Fault offset: 0x0000c41f
Faulting process id: 0x2120
Faulting application start time: 0x01ce0099b3021b60
Faulting application path: MyApplicationPath\txintf.exe
Faulting module path: C:\Windows\syswow64\KERNELBASE.dll 
```

Just-In-Time Debugger 也有一些罕见的时候会弹出，说明 System.ObjectDisposedException 的异常已经被捕获。从该信息来看，似乎有一个已被破坏的对象正在被某物访问。

我通过调试器检查了调用堆栈，在 Application.Close() 事件之后它似乎没有任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T23:39:05.070

对象破坏让我回到了我的理论，并让我想起了我曾经发现的另一个案例。它是一个非自动实例化的 NVO，以一个自动实例化的 NVO 作为实例变量。是的，这听起来像是在打死马，但这是我听说过的唯一案例。一个调试想法是在所有对象的 Destructor 事件中放置一行脚本（它们都是继承的，对吗？），在那里放置一个断点，并尝试缩小哪些对象是或不是问题的一部分。

# ios - iOS Segue - viewControllers 何时实例化

> ID：14607581
> 
> 赞同：4
> 
> 时间：2013-01-30T15:29:15.353
> 
> 标签：ios, uiviewcontroller, segue

我有一个简单的故事板，其中包含一个主视图控制器和两个详细视图控制器，如图所示。

**问题 #1** - SequeA 将呈现 DetailA 的代码位于何处

**问题 #2** - 在我的 AppDelegate 代码中，我需要创建应用程序中所有 ViewControllers 的数组 - 我怎样才能获得该数组？- 它在故事板中，但我如何以编程方式访问它。

我可以通过执行以下操作来获取 MainViewController - myViewControllerMain = (ViewControllerMain*) self.window.rootViewController;

但我不知道如何访问详细视图控制器（a & b）

**问题 #3** - DetailA 是在 MainViewController 被实例化时被实例化，还是在 Seque 被“触发”时被实例化（这里的正确词是什么 - 被调用？）

![带有 MainViewController 和两个详细视图的 StoryBoard](../Images/b02fef956afda4a47a9faa85721f7c8f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:53:54.670

1) 如果你在 IB 中连接它，则没有代码（除了描述情节提要的 XML 文件）。

2）在实例化它们之前，您无法访问其他控制器。

3) 它在执行 segue 时被实例化。

为什么认为您需要在应用程序委托中创建所有控制器的数组？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:01:30.550

如果您阅读链接，您将了解没有代码可以按照您的要求执行 segue。. . XCode / Interface Builder）不是代码生成器，如果您使用其他语言的界面构建器，您可能会理解它，它不是为您编写代码，因此找不到。话虽如此，您可以以编程方式调用 segue。

至于列出 ViewControllers，我不相信有办法以您希望的方式做到这一点。ViewController 只是特定类型的类。您唯一能做的就是获取所有已加载类的列表并通过检查它们是否是视图控制器进行迭代，但这会很慢，我不确定您为什么要这样做，毕竟这是唯一的方法将执行的代码将包含在您的项目中，并且您肯定知道您的项目中有哪些代码？

执行 segue 时会实例化视图控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:15:22.613

您询问：

> **问题 #1** - SegueA 将呈现 DetailA 的代码在哪里？

如果您以编程方式调用 segue A（例如调用`performSegueWithIdentifier`），则该代码位于主视图控制器中。但是，通常，您根本不需要以编程方式调用它，因为当您在 Interface Builder 中创建 segue 时，您通常会从某个控件（例如主视图中的按钮）链接它，因此您不需要必须以编程方式执行任何操作来启动 segue。但是，当您调用 segue A 时，可选关联`shouldPerformSegueWithIdentifier`（对于 iOS 6 及更高版本）并`prepareForSegue`在主视图控制器中调用。

> **问题 #2** - 在我的 AppDelegate 代码中，我需要创建应用程序中所有 ViewControllers 的数组 - 我怎样才能获得该数组？- 它在故事板中，但我如何以编程方式访问它。
> 
> 我可以通过执行以下操作来获取 MainViewController -
> 
> ```
> myViewControllerMain = (ViewControllerMain*) self.window.rootViewController; 
> ```
> 
> 但我不知道如何访问详细视图控制器（a & b）

通常，您不需要维护视图控制器数组（自定义容器视图控制器可能例外，即使那样，有时您也不必自己做）。但是，如果您需要访问应用程序委托的某些属性，您可以执行以下操作：

```
YourAppDelegate *appDelegate = (YourAppDelegate *)[UIApplication sharedApplication].delegate;
// you can now access properties of the `appDelegate` 
```

话虽如此，我很难想到细节控制器 A 或细节控制器 B 建议从主控制器检索视图控制器列表的情况。您确实应该解释您要解决的业务问题。通常你会做一些委托协议或使用一些通知过程。它根据您要解决的问题而有所不同。但是，如果 A 或 B 需要从 master 获取视图控制器列表，您应该仔细检查您的设计。

> **问题 #3** - DetailA 是在 MainViewController 被实例化时被实例化，还是在 Seque 被“触发”时被实例化（这里的正确词是什么 - 被调用？）

除了自定义容器和/或嵌入 segue，基本过程是：

*   segue被触发；
*   `shouldPerformSegueWithIdentifier`在 iOS 6 中可以选择调用，如果`NO`我们在此停止；
*   目标控制器被实例化；
*   `prepareForSegue`被调用，允许您将信息从源控制器传递到目标控制器；
*   然后创建与目标视图控制器关联的视图；
*   `viewDidLoad`在目的地被调用（带回家的消息是，在此之前不要尝试操作此目的地视图中的视图/控件，例如源中的`prepareForSegue`）；
*   只有这样，目标视图才能完成其布局、外观调用等。

* * *

### 参考：

*   [视图控制器编程指南](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007457)是故事板、视图控制器等的一个很好的概述。

# javascript - 如何防止 javascript 重定向退出全屏模式？

> ID：14607582
> 
> 赞同：4
> 
> 时间：2013-01-30T15:29:15.097
> 
> 标签：javascript

我正在尝试在已经全屏模式下使用 javascript 重定向到新的 url，但重定向 currenlt 退出了我不想要的全屏模式。我使用了错误的 JS 代码吗？

```
 window.location.href = demo_url; 
```

或者

```
 window.location = demo_url; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:33:53.193

如果更改文档地址，浏览器将始终退出全屏模式。

要获得相同的视觉效果，您唯一能做的就是在具有 100% 高度和宽度的 iframe 中显示“新”页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T15:06:49.723

事实上，我的做法是错误的 - 如果您使用 Chrome 扩展程序并像我一样想要全屏模式，那么您可以使用以下内容：

```
 chrome.windows.getCurrent(null, function(window) {
    chrome.windows.update(window.id, {state: "fullscreen"});
  }) 
```

# macos - 更新 janus 后使用 vim 处理 git commit 消息中断

> ID：14607584
> 
> 赞同：51
> 
> 时间：2013-01-30T15:29:19.877
> 
> 标签：macos, git, vim

更新 janus vim 发行版后，使用 vim 提交消息似乎存在问题。最好的例子是在执行 a`git pull`以获取其他人的更改时。显示 vim 编辑器，我输入我的提交消息，我输入，`:``w``q`但我收到以下错误消息，而不是提交工作：

```
error: There was a problem with the editor 'vi'.
Not committing merge; use 'git commit' to complete the merge. 
```

然后我必须手动提交:(

如何让 git 与 vim 很好地配合使用？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-01-30T15:29:19.877

经过一番谷歌搜索，事实证明答案是运行以​​下命令：

```
git config --global core.editor $(which vim) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-10-10T20:34:30.360

Nat Ritmeyer 给出了[正确的解决方案](https://stackoverflow.com/a/14607585/117471)。我会给你原因。

正如[史蒂夫图克解释](http://tooky.co.uk/there-was-a-problem-with-the-editor-vi-git-on-mac-os-x/)的那样，隐藏您`~/.vimrc`或明确告诉`git`使用完整路径来`vim`解决问题。然而，他以*“我仍然想找到问题的根源”作为*结尾。

试试这个：

1.  开始`git commit`让自己成为一名`vim`编辑。
2.  点击`<CTRL> + Z`停止进程并返回 TTY
3.  `ps`为您的 TTY（您通过命令获得的号码）做一个通知，`tty`有类似...

    ```
    $ tty
    /dev/ttys005

    $ ps
      PID TTY           TIME CMD
    17547 ttys005    0:00.15 -bash
    65126 ttys005    0:00.02 git commit
    65127 ttys005    0:00.10 vi .git/COMMIT_EDITMSG

    $ which vi
    /usr/bin/vi

    $ ll /usr/bin/vi
    lrwxr-xr-x  1 root  wheel  3 Oct  3 17:40 /usr/bin/vi -> vim

    $ jobs
    [1]+  Stopped                 git commit 
    ```

4.  回到您的 vim 进程`fg %1`（或您`git commit`列出的曾经停止的作业编号）。

shell 输出告诉我们的是……

1.  我正在使用 ttys005
2.  在 TTY上`bash`被叫又叫`git``git``vi`
3.  的完整路径`vi`是`/usr/bin/vi`
4.  该`vi`命令是一个符号链接`vim`
5.  调用`<CTRL> + Z`停止了`git commit`命令，它在作业堆栈中是#1。

所以，**vi 和 vim 是同一个命令？！？！**是的，但`vim`注意到它`argv[0]`曾经`vi`并以[兼容模式](http://vimdoc.sourceforge.net/htmldoc/starting.html#compatible-default)运行。这可能会导致问题，具体取决于您的`.vimrc`.

**最好**的解决方案是告诉 git 使用 vim，但我建议你**不要假设**你的 vim 路径和其他人一样（也许你是通过 安装的`brew install vim`）

```
git config --global core.editor $(which vim) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-03T22:33:59.123

这可能是您的 .vimrc 文件中的插件或其他内容。以安全模式加载 vim 以编辑提交消息的最佳方法是使用：

```
git config --global core.editor '/usr/bin/vim -f -u NONE' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-07-07T05:53:12.743

每次从远程仓库获取并将其与另一个分支合并时，我都会遇到同样的问题。

在终端中输入它为我修复了它

`git config --global core.editor $(which vim)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-22T09:07:42.683

如果由于某种原因`git config --global core.editor /usr/bin/vim`不起作用，请尝试不使用`--global`标志。`--global`我只能在没有标志的情况下让它工作。

# c# - 尝试在长时间运行的操作期间在 WPF 中显示“请稍候”消息

> ID：14607586
> 
> 赞同：4
> 
> 时间：2013-01-30T15:29:21.877
> 
> 标签：c#, wpf, visibility, inotifypropertychanged, textblock

我的XAML 中有一个其属性绑定到我的 ViewModel 上的一个属性（它实现了）。一个单独的按钮会启动一个长时间运行（2-3 秒）的进程，如下所示：*`please wait`* `TextBlock``Visibility``IsBusy``INotifyPropertyChanged`

```
IsBusy = true;

try
{
    // Do some long-running process
}

finally
{
    IsBusy = false;
} 
```

但该*`please wait`*消息从未出现。我假设操作在 UI 线程上运行，因此没有机会刷新？如果我在单独的线程上运行上述代码，它*确实*有效，但我不希望用户在操作运行时做任何事情 - 我很高兴 UI 能够`freeze`.

如何显示*`please wait`* 消息？或者我会更好地在后台线程上运行它并（以某种方式）在持续时间内锁定 UI？我正在使用 .Net 4 顺便说一句。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T16:35:06.097

你是对的，它没有更新，因为你在同一个线程上运行代码，所以在你的进程完成之前渲染不会继续。

您说您没有使用后台线程，因为您不希望用户在操作运行时做任何事情，但是像这样完全锁定您的应用程序绝不是一个好主意。

更好的解决方案是将`IsEnabled`您的 Form/Window/UserControl/etc 绑定到该`IsBusy`属性。然后当它变得忙碌时，整个表单被禁用以防止用户修改它，同时不会锁定您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:37:31.043

首先`Visibility`属性不是`bool`，所以如果你想将`bool`变量绑定到它，你需要使用`IValueConverter`，其次，是的，你是对的，当 UI 线程忙于你的长时间运行的操作时，它不会执行任何其他操作，包括可见性更改。

我建议使用`WPF Toolkit` `BusyIndicator`期望放置自己的面板，它具有`IsBusy bool`属性。

冻结的 UI 也不是用户友好的，通常我使用这个片段

```
IsBusy = true;
Task.Factory.StartNew(() => 
{ 
  // Do work. 
})
.ContinueWith(t=>IsBusy=false, 
                        TaskScheduler.FromCurrentSynchronizationContext()); 
```

另请注意检查方法中的错误，否则您将在处置`ContinueWith`时遇到异常`Task`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T15:40:27.040

如果您在单独的线程上运行代码，您仍然可以通过[**Dispatcher.BeginInvoke 方法**](http://msdn.microsoft.com/en-us/library/ms591206.aspx)访问 UI 。

```
if (!YOURCONTROL.Dispatcher.CheckAccess())
{
    YOURCONTROL.Dispatcher.Invoke(System.Windows.Threading.DispatcherPriority.Normal,
        new Action(delegate()
        {
            //do something with the control/form/...
        }));
}
else
{
    //update your control
} 
```

# silverlight - 签名的 XAP 仍显示为发布者未经验证

> ID：14607589
> 
> 赞同：0
> 
> 时间：2013-01-30T15:29:26.843
> 
> 标签：silverlight, visual-studio-lightswitch

我正在尝试使用我自己创建的证书发布一个签名的 Lightswitch 应用程序供**内部**使用。安装应用程序时，我不断收到发布者未经验证的提示。除此之外，当我尝试更新应用程序时，它告诉我我的证书状态有问题并且不会更新。以下是我遵循的步骤：

*   我以管理员身份打开了 Visual Studio 2010 命令提示符
*   使用 makecert 工具，我使用以下命令行创建了一个“根”证书：

> **makecert -n "CN=My Awesome Certificate Authority" -cy authority -a sha1 -sv "My Awesome Certificate Authority Private Key.pvk" -r "My Awesome Certificate Authority.cer"**

*   我为此证书指定了密码
*   我已将此证书导入计算机 A 的*本地计算机*受信任的根证书颁发机构存储中。
*   使用 makecert 工具，我使用以下命令行创建了代码签名证书：

> **makecert -n "CN=SomeNameHere" -ic "My Awesome Certificate Authority.cer" -iv "My Awesome Certificate Authority Private Key.pvk" -a sha1 -sky exchange -pe -sv "SomeNameHere Private Key.pvk" "SomeNameHere. cer"**

*   我没有为代码签名证书指定密码
*   使用 pvk2pfx 工具，我执行以下命令行：

> **pvk2pfx -pvk "SomeNameHere Private Key.pvk" -spc "SomeNameHere.cer" -pfx "SomeNameHere.pfx"**

*   我将 pfx 文件复制到开发机器，并在 Lightswitch 发布向导中指定它应该使用此代码签名证书来签署 silverlight 客户端。
*   我将该应用程序发布为 3 层桌面应用程序。
*   我打开 internet explorer 9 并导航到 lightswitch 应用程序 url，然后单击 Install AppName。

我收到以下提示：

> ![在此处输入图像描述](../Images/218fafa5887adfdfd4f6e44e6b516913.png)

尝试更新时出现以下错误

> ![在此处输入图像描述](../Images/e5d33326d893dd34c023875abcaaf240.png)

就 CN 而言，对代码签名证书有什么要求吗？我在这里想念什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T04:58:59.220

显然这是 HTML Client Preview 2 中的一个错误。它发生是因为签署了错误的 xap 文件。由于某种原因，服务器上现在存在两个 xap 文件，一个在 Web\app.xap 中，一个在 Client\web\app.xap 中，前者已签名，后者未签名。由于您已升级到 HTML Client Preview 2，因此现在正在使用后一个文件，因为您必须导航到 [http://webhost/webapp/Client/] 目录才能安装您的应用程序。下面的修复确保签署了正确的 xap 文件。我认为这个错误可能会在 Lightswitch HTML 客户端的最终版本发布后以类似的方式解决。

您可以通过执行以下操作来解决它

打开以下文件：

> C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\LightSwitch\v3.0\Publish\v1.7\ Microsoft.LightSwitch.Publish.targets

搜索以下字符串“XapSignTask”，并在第二次出现时找到如下行：

XapFileName="$(_ApplicationDir)\Web\%(_ClientXap.FileName)%(_ClientXap.Extension)"

将其更改为：

XapFileName="$(_ApplicationDir)Client\Web\%(_ClientXap.FileName)%(_ClientXap.Extension)"

# jquery - fadeTo() 动画效果后的代码不起作用

> ID：14607590
> 
> 赞同：0
> 
> 时间：2013-01-30T15:29:30.143
> 
> 标签：jquery, hover, jquery-animate, fadeto

我创建了一个菜单[jsfiddle 链接](http://jsfiddle.net/seaamx/KMwqm/) 我正在尝试应用 fadeTo() 您在下面看到的代码，但第 4 行不再起作用。如何在不影响悬停元素的情况下应用 fadeTo ，就像我提供的链接中一样？提前致谢。

```
$(document).ready(function(){
      $("a").hover(function(){
      $("#menubar a").fadeTo(1000, .7);
      $(this).css("color", "#ffffff");    /* doesn't work with fadeTo*/
      }, function(){
        $("#menubar a").fadeTo(1000, 1);
        }); 
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:39:02.873

您可以使用[not()](http://api.jquery.com/not/)排除当前对象

**[现场演示](http://jsfiddle.net/rajaadil/KMwqm/1/)**

```
$(document).ready(function () {
    $("a").hover(function () {
        $("#menubar a").not(this).fadeTo(1000, .1);
    }, function () {
        $("#menubar a").not(this).fadeTo(1000, .7);
    });
}); 
```

# tridion - 从 Tridion 多媒体组件中的 XML 文件中读取 UTF-8 内容 - 模板化 C#

> ID：14607591
> 
> 赞同：1
> 
> 时间：2013-01-30T15:29:31.733
> 
> 标签：tridion, tridion-2011

我正在尝试通过模板（C#）读取嵌入在多媒体组件中的 XML 文件内容。XML 文件包含少量 UTF-8 字符。当我读取 xml 内容时，输出将 UTF-8 字符转换为一些垃圾字符（？符号或矩形框）。下面是我在 C# 模板中使用的代码片段。

代码 1：

```
Component xmlMultimediaComponent = (Component)XMLMMSRepositoryObject;
// read xml in multimedia component into a string
UTF8Encoding encoding = new UTF8Encoding();
byte[] binary = xmlMultimediaComponent.BinaryContent.GetByteArray();
string navXmlContent = (binary != null) 
               ? UTF8Encoding.UTF8.GetString(binary, 0, binary.Length) 
                       : string.Empty; 
```

代码 2：

```
using (MemoryStream ms = new MemoryStream())
{
  xmlMultimediaComponent.BinaryContent.WriteToStream(ms);
  ms.Seek(0, SeekOrigin.Begin);

  using (var streamReader = new StreamReader(ms, Encoding.UTF8))
  {                      
    string output = streamReader.ReadToEnd();
      ....
  }
} 
```

在上述两种情况下，输出都包含垃圾字符（用于 UTF-8 编码）。

知道如何将相同的 UTF-8 内容获取到 Tridion 多媒体组件中 XML 文件的字符串输出中。

注意：多媒体组件中的 XML 文件以 UTF-8 编码保存。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:53:00.410

请问您为什么要尝试将 Xml 文档加载到字符串中？

尝试将您的 XML 文档加载到可以理解 XML 文档的对象中（例如`XDocument`或`XmlDocument`），因为它们会知道如何处理字节顺序标记。

类似于`XDocument.Load(stream)`（.NET 4）的东西。

然后，如果您*确实*需要该文档的文本，则可以使用该对象的“OuterXml”字符串属性。

**编辑**

通读您的代码，看起来您基本上是在尝试输出存储为二进制文件（或不符合 Tridion 模式的 xml）的 XML，这不是我所说的最佳实践。无论如何，您可以将模板的输出设置为 XmlDocument，不必是字符串。查看 package.CreateItem 变体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T18:43:23.767

在进一步调查中，我们注意到多媒体组件中关联的文件是 ASCII 编码的。因此，在读取其内容时不能显式转换为 UTF-8，并且应该使用默认编码（即上述情况下的 ASCII）。

```
 Component xmlMultimediaComponent = XMLMMSRepositoryObject as Component;               
       byte[] binary = xmlMultimediaComponent.BinaryContent.GetByteArray();
       string navContent = (binary != null) ? Encoding.GetEncoding("ASCII") : string.Empty; 
```

# php - 将 ASP.net 联系表单更改为 PHP

> ID：14607594
> 
> 赞同：-1
> 
> 时间：2013-01-30T15:29:42.280
> 
> 标签：php, asp.net, html, wordpress, contact-form

我最近重做了我公司的网站，旧网站是一个 ASP.net 网站，我用 PHP（使用 wordpress）重建了网站旧网站上的联系表格将字段提交到数据库，我用 wordpress 后端重建了一个联系表格. 问题是联系表单没有将字段提交到与网站不同的服务器上的数据库。我怎样才能最好地将这个功能带入 PHP/Wordpress 框架？

我现在正在使用联系表格 7，联系表格 7 到数据库插件。

如果需要，我可以发布我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:34:31.247

因此，与其使用 wordpress 联系表单插件或内置于 wordpress 中的插件，如果您打算让它直接进入与以前相同的数据库，则需要构建自己的。

按照[本网站](http://brian.dobberteen.com/code/using-php-and-mysql-to-create-a-simple-contact-form-and-results-browser/)上的指南创建一个将插入数据库的联系表单，显然为您要填写的数据库重命名查询中的字段。

如果您想将来自 Wordpress 插件（例如 Contact 7）的数据存储到数据库中，那么我建议您[使用此插件](http://wordpress.org/extend/plugins/contact-form-7-to-database-extension/)

# css - 你可以让网页从左到右而不是从上到下滚动吗？

> ID：14607596
> 
> 赞同：0
> 
> 时间：2013-01-30T15:29:44.947
> 
> 标签：css, scroll, multiple-columns

有没有一种方法可以让网页分为从左到右而不是从上到下滚动的列？所以你得到了

```
x x x x x
x ... ..x ... ... ... ...
x ... ..x ... ... ... ...
x ... ..x ... ... ... ...
x ... ..x ... ... ... ...
x x x x x 
```

代替

```
x x x x x
x ... ..x
x ... ..x
x ... ..x
x ... ..x
x x x x x
  ... ...
  ... ...
  ... ...
  ... ...
  ... ...
  ... ... 
```

如果这有意义......换句话说，我希望文本停止在浏览器窗口的底部，然后在新列中继续，并让这种情况“无限”发生，直到没有更多内容为止。

**在下面添加**了一个屏幕截图以更好地解释。您会在底部的屏幕下方看到文本。我希望屏幕下方的内容出现在顶部，紧挨着第一节经文。我想要做的是让一首歌曲适合一个屏幕（他们通常会这样做，尤其是在宽屏显示器上），而不必做很多脆弱的数学和计算或更改标记。它目前都在一个`pre`标签中，但我想只要和弦可以与它们所在的单词匹配（所以等宽字体等），就可以切换它。我基本上在寻找一些神奇的 CSS，如果它甚至存在的话:)

![截屏](../Images/a743688a23958778f2da58246d886992.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T20:26:20.683

这听起来像是 CSS Columns 的工作：

[http://jsfiddle.net/Lkzqt/](http://jsfiddle.net/Lkzqt/)

```
html, body, .container {
    height: 100%;
}

.container {
    columns: 10em; /* desired width of your column */
}

<div class="container">
    <p>...</p>
    <p>...</p>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:38:28.800

是的，只要让 div 并排排列，页面底部就会出现一个水平滚动条。

HTML：

```
<div id="wrapper">
    <div>Col 1</div>
    <div>Col 2</div>
    <div>Col 3</div>
</div> 
```

CSS：

```
#wrapper{
    overflow-x:scroll;
}
#wrapper div {
    display:table-cell;
    border:1px solid #000;
    min-width:400px;
} 
```

[工作示例](http://jsfiddle.net/4k4PQ/)

# sql-server - 检查存储过程，是否有效

> ID：14607599
> 
> 赞同：-1
> 
> 时间：2013-01-30T15:29:49.220
> 
> 标签：sql-server, stored-procedures

我的程序有问题，我的代码中没有发现错误。我认为这是因为 StopProc。任何人都可以检查我的存储过程以查看它是否有效？

```
ALTER PROCEDURE dbo.Update_FeatureUsers 
    (
        @FeatureID int,
        @UserID nvarchar (MAX),
        @CreatedUserID int
    )

AS
    SET NOCOUNT ON

    Declare @ParmDefinition nvarchar (400)
    Declare @Query nvarchar(MAX)

    SET @Query = N''
    SET @Query = @Query + N'DELETE FeatureUsers '
    SET @Query = @Query + N'FROM FeatureUsers '
    SET @Query = @Query + N'WHERE FeatureUsers.FeatureID = @FeatureID '
    SET @Query = @Query + N'    AND FeatureUsers.UserID NOT IN ('+ @UserID +')'

    EXECUTE sp_executesql @Query

    SET @Query = N''
    SET @Query = @Query + N'INSERT INTO FeatureUsers (FeatureID, UserID, CreatedUserID) '
    SET @Query = @Query + N'SELECT @FeatureID, Usager.UserID, @CreatedUserID '
    SET @Query = @Query + N'FROM Usager WITH (NOLOCK) '
    SET @Query = @Query + N'WHERE Usager.UserID IN ('+ @UserID +') '
    SET @Query = @Query + N'    AND Usager.UserID NOT IN '
    SET @Query = @Query + N'    ( '
    SET @Query = @Query + N'        SELECT FeatureUsers.UserID '
    SET @Query = @Query + N'        FROM FeatureUsers WITH (NOLOCK) '
    SET @Query = @Query + N'        WHERE FeatureUsers.UserID IN ('+ @UserID +') '
    SET @Query = @Query + N'            AND FeatureUsers.FeatureID = @FeatureID '
    SET @Query = @Query + N'    ) '

    SET @ParmDefinition = N'@FeatureID int '
    EXECUTE sp_executesql @Query, @ParmDefinition, @FeatureID = @FeatureID

    SET NOCOUNT OFF

    RETURN 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:32:24.603

您的第一个动态 SQL 查询也想访问`@FeatureID`，但您没有通过它。

所以移动：

```
SET @ParmDefinition = N'@FeatureID int ' 
```

直到proc的顶部，然后调用

```
EXECUTE sp_executesql @Query,@ParmDefinition,@FeatureID = @FeatureID 
```

对于**两条**动态 SQL。

* * *

`@Users`对于一般策略 - 如果您让存储过程接受表值参数，那么您根本不需要使用动态 SQL 会好得多。

* * *

实际上，在第二次阅读时，您的第二个查询也引用`@CreatedUserID`了 ，因此您需要将其作为参数传递给第二个查询。因此，您需要更改两者之间的参数定义，或者只是将其添加到参数中并将其（毫无意义地）传递给第一个查询。

# java - 如何在类构造函数中将数组定义为参数？

> ID：14607600
> 
> 赞同：0
> 
> 时间：2013-01-30T15:29:49.320
> 
> 标签：java, arrays, arguments

我想问在类构造函数中将数组定义为参数的正确方法是什么？

例如

```
public class example {
    int x;
    int y;
    String [] x = new Array [5];

    public example(int x, int y, String [] x){
    etc etc etc. 
```

是`String [] x`不是写对了？因为netbeans给出了一个错误但是我改变了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:31:41.080

这是正确的方法，但是您重复了`x`变量名。将第二个更改`x`为`z`例如。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:33:42.793

您可以这样定义数组：

```
 String[] x = new String[5]; 
```

编辑：并确保您不重复变量名称，因此将 x 更改为其他内容，因为您已经将 x 定义为 int 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T15:34:20.697

```
String [] x = new Array [5]; 
```

应该

```
String [] x = new String[5]; 
```

你的变量`x`是重复的。你应该改变它。

此外，按照惯例，类名以大写字母开头。

您还应该处理格式/缩进以获得更易于阅读的代码。

# datetime - 在 while select 语句中仅使用 CreatedDateTime 字段的日期部分

> ID：14607601
> 
> 赞同：0
> 
> 时间：2013-01-30T15:29:57.587
> 
> 标签：datetime, while-loop, axapta, x++, ax

如何仅根据 Dynamics AX 中 X++ 中 CreatedDateTime 字段的日期部分按表分组？我可以在 sql server 中使用以下语句并得到我想要的，但我不知道在 X++ 中做同样的方法。

```
select  COUNT(RECID) from WMSORDERTRANS
GROUP BY CAST( FLOOR( CAST( CREATEDDATETIME AS FLOAT ) ) AS DATETIME ) 
```

在我尝试过的 X++ 中， DateTimeUtil::date(wmsOrderTrans.CreatedDateTime) 但我不能在 while select 语句中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:39:21.727

不能对 AX 中的计算字段进行分组。

您可以创建一个视图然后创建一个计算域，请参阅[此答案](https://stackoverflow.com/a/13304175/4509)。

顺便说一句，这是转换为本地日期[的正确方法。](https://stackoverflow.com/a/3052621/4509)

# video - 如何使用 jplayer 播放 .flv 视频格式

> ID：14607608
> 
> 赞同：0
> 
> 时间：2013-01-30T15:30:05.913
> 
> 标签：video, format, flv, jplayer

我目前正在尝试授予用户使用 jplayer 播放视频的权限。它支持这些格式：- webmv、ogv、m4v。但它不支持.flv

我真的很想使用 jplayer 获得一些帮助。但是，如果有人知道任何支持所有或大多数视频格式（包括 .flv）的媒体播放器插件，我会很高兴知道在哪里以及如何获得它。

这是代码：

```
<script type="text/javascript">
//<![CDATA[
$(document).ready(function(){

    $("#jquery_jplayer_1").jPlayer({
        ready: function () {
            $(this).jPlayer("setMedia", {
   ogv: "video/<?php echo $get_vid; ?>",
   flv: "video/<?php echo $get_vid; ?>"
});
        },
        swfPath: "js",
        supplied: "webmv, ogv, flv",
        size: {
            width: "640px",
            height: "360px",
            cssClass: "jp-video-360p"
        }
    });

});
//]]>
</script> 
```

只是关于它的一点细节，视频是从数据库中动态获取的，其中很多是 .flv

很高兴得到这方面的帮助......谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-15T21:53:57.223

更改您提供的值

```
 supplied: "flv", 
```

# zend-framework - Zend_Form_Element_File::getValues() 重命名上传的文件

> ID：14607609
> 
> 赞同：1
> 
> 时间：2013-01-30T15:30:08.437
> 
> 标签：zend-framework, zend-form-element

我对 Zend Framework 还很陌生，遇到了一些奇怪的事情，我希望有人能够解释。考虑以下代码：

```
<? class Form extends Zend_Form
{
    public function init()
    {
    $upload = new Zend_Form_Element_File('upload');
    $this->addElement($upload);
    }    
}

if ($_POST)
{
    $form = new Form();
    var_dump($form->isValid($_POST));
    $values = $form->getValues();

    var_dump($_FILES, file_exists($_FILES['upload']['tmp_name']));
    exit;
}
?>
<form method="post" enctype="multipart/form-data">
    <input type="file" name="upload"/>
    <input type="submit" name="submit"/>
</form> 
```

如果上传任何文件，$_FILES 的 var_dump 将输出上传的文件不存在。注释 $form->getValues() 行，它就在那里。调查问题后 - getValues 将实际文件（即 /tmp/php/phpBUI9M3）重命名为上传文件的名称，并将其保存在同一文件夹中（即 /tmp/php/test.png）。为什么？我的印象是 getValues 不应该改变任何数据。

PHP：5.2.17，Zend：1.10.4

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:58:23.007

从手册：

> 默认情况下，当您在表单上调用 getValues() 时，将自动接收该文件。这种行为背后的原因是，文件本身就是文件元素的值。

[http://framework.zend.com/manual/1.12/en/zend.form.standardElements.html#zend.form.standardElements.file](http://framework.zend.com/manual/1.12/en/zend.form.standardElements.html#zend.form.standardElements.file)

如果这不是您想要发生的情况，有一些示例说明如何更改此行为，但这对我来说似乎是合乎逻辑的。

# python - Python中的模型布尔变量

> ID：14607611
> 
> 赞同：2
> 
> 时间：2013-01-30T15:30:28.013
> 
> 标签：python

所需的行为是这样的：

```
In [653]: choice = 'A'

In [654]: not(choice)
Out[654]: 'B' 
```

有没有一种稳健的方法可以做到这一点？目前我正在使用这些简单的技巧。

```
def other(choice):
    if choice == 'A':
        return 'B'
    else:
        return 'A'

In [635]: other('B')
Out[635]: 'A'

d = dict()
d['A'] = 'B'
d['B'] = 'A'

In [652]: d['A']
Out[652]: 'B' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T15:45:43.703

看看[特殊的方法名称](http://docs.python.org/2/reference/datamodel.html#special-method-names)。您可能需要实施更多。

```
class myBool():
    def __init__(self, val):
        self.value = val

    def __repr__(self):
        return self.value

    def __invert__(self):
        if self.value == 'A':
            return 'B'
        else:
            return 'A'

def main():
    a = myBool('A')
    print(a)
    print(~a)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:36:04.077

Python 中没有变量。只有名称，名称可以绑定到任何类型的任何对象。

请注意，这在 Python 中完全有效：

```
a = 'hello'
a = 1
a = True
a = 2.2 
```

这并不意味着 引用的对象`a`没有类型，它们有，但名称本身没有。

也就是说，您可以编写一个实现`__setattr__`成员并将某些成员名称限制为特定集合的类，但我认为这不值得。

当然它不是pythonic。如果您对此感到不舒服，那么您应该切换到更强的类型语言。

# sql-server - 如何通过复合键检索多个实体？

> ID：14607616
> 
> 赞同：4
> 
> 时间：2013-01-30T15:30:43.740
> 
> 标签：sql-server, entity-framework, entity-framework-4, composite-key

我正在使用实体框架（如果重要，则为 4.2），并且我有一个具有复合主键（两个 int 列）的模型。我有一个整数对列表，它们代表我想从数据库中提取的对象列表。有没有一种简单的方法可以使用单个查询来提取所有这些对象？

我试过用我的列表加入查询，如下所示：

```
List<Tuple<int, int>> ids = GetIds();

var data =
    from e in ctx.CompositeEntities
    join i in ids on new {e.KeyA, e.KeyB} equals new {KeyA = i.Item1, KeyB = i.Item2}
    select e; 
```

但是，这总是会导致异常“无法创建类型为 'System.Tuple`2' 的常量值。在此上下文中仅支持原始类型（'例如 Int32、String 和 Guid'）。”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T16:03:26.597

我希望看到一种更清洁的方法来做到这一点，但是......至少它应该可以工作。

**解决方案1**

您需要什么：连接您的元组列表，然后使用[SqlFunctions.StringConvert](http://msdn.microsoft.com/en-us/library/dd466166.aspx)从您的实体连接“int 键” 。因为它只需要 double 或 decimal 作为参数，所以你必须先将你的 int 转换为 double 。

```
List<Tuple<int, int>> ids = GetIds();

var concatenatedIds = ids.Select(m => m.Item1 + "," + m.Item2).ToList();

var result = ctx.CompositeEntities
                .Where(conatenatedIds.Contains(
                       SqlFunctions.StringConvert((double)m.KeyA) + 
                       "," + 
                       SqlFunctions.StringConvert((double)m.KeyB))); 
```

**解决方案2**

使用[PredicateBuilder](http://www.albahari.com/nutshell/predicatebuilder.aspx)

```
List<Tuple<int, int>> ids = GetIds();

var predicate = Predicate.False<CompositeEntity>();
foreach (var tuple in ids) 
   predicate = predicate.Or(m => m.KeyA == tuple.Item1 && m.KeyB == tuple.Item2);

var result = ctx.CompositeEntities.Where(predicate); 
```

**解决方案3**

先枚举，再比较。当然，这将从数据库中获取所有 CompositeEntities。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:42:46.720

我无法尝试这个，但尝试使用类似 where 子句的东西。

```
from e in ctx.CompositeEntities
where ids.Where(i => e.KeyA == i.Item1  && e.KeyB == i.Item2).Count() > 0
select e; 
```

===== 编辑 =====

好吧，它失败了，但同样的例外，谢谢你的鼓励。

假设您的键是 int 而不是 bigint，那么以下内容呢

```
public class e1 {
    public int KeyA { get; set; }
    public int KeyB { get; set; }
}

public class e1Configuration : EntityTypeConfiguration<e1> {
    public e1Configuration()
        : base() {
            HasKey(x => new { x.KeyA, x.KeyB });
    }
}

public class TestEFContext : DbContext {
    public IDbSet<e1> es { get; set; }

    public TestEFContext(String cs)
        : base(cs) {
        Database.SetInitializer<TestEFContext>(new DropCreateDatabaseAlways<TestEFContext>());
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        base.OnModelCreating(modelBuilder);

        modelBuilder.Configurations.Add(new e1Configuration());            
    }
}

class Program {
    static void Main(String[] args) {

        using (TestEFContext c = new TestEFContext(@"Data Source=ALIASTVALK;Initial Catalog=TestEF;Integrated Security=True; MultipleActiveResultSets=True")) {
            c.es.Add(new e1 { KeyA = 1, KeyB = 1 });
            c.es.Add(new e1 { KeyA = 1, KeyB = 2 });
            c.es.Add(new e1 { KeyA = Int32.MaxValue, KeyB = 2 });
            c.SaveChanges();
        }

        List<Tuple<int, int>> ids = new List<Tuple<int, int>> { 
            new Tuple<int, int>(1, 1), 
            new Tuple<int, int>(Int32.MaxValue, 2),};

        List<Int64> lis = (from t in ids select (Int64)t.Item1 * 2^ 32 + t.Item2).ToList();

        using (TestEFContext c0 = new TestEFContext(@"Data Source=ALIASTVALK;Initial Catalog=TestEF;Integrated Security=True; MultipleActiveResultSets=True")) {
            var v = from e in c0.es
                    where lis.Contains((Int64)e.KeyA * 2 ^ 32 + e.KeyB)
            select e;

            Console.WriteLine(v.Count());
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-15T15:14:19.923

我正在处理一个几乎相同的场景，但我会尝试将它映射到上面的场景 - 如果它不能编译，请告诉我。

这与 Raphaël 的示例 2 的基本思想相同，但我无法让它运行。我将 Predicate 构建为单个实体的查询联合，每个元组一个。

```
 List<Tuple<int, int>> ids = GetIds();

  ids.Aggregate<Tuple<int,int>,IQueryable<CompositeEntity>>(
      null,
      (current, id) => 
        current == null ? SingleCompositeEntity(ctx.CompositeEntities, id)
        : current.Union(SingleCompositeEntity(ctx.CompositeEntities, id)));
}

private static IQueryable<CompositeEntity> 
        SingleCompositeEntity(IQueryable source, Tuple<int,int> tuple)
{
   return source.Where(m => m.KeyA == tuple.Item1 && m.KeyB == tuple.Item2)

} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-30T16:14:27.843

未经测试，但我认为会工作。

向您的实体对象添加一个属性以将键公开为元组。

```
public Tuple<int, int> TupleKey
{
    get { return new Tuple<int, int>(_keyA, _keyB);}
} 
```

然后更改您的查询以使用此新属性。

```
List<Tuple<int, int>> ids = GetIds();

var data = from e in ctx.CompositeEntities
            where ids.Contains(e.TupleKey)
            select e; 
```

# macos - 如何在 .bashrc 文件中永久更改 osx 上的提示？

> ID：14607617
> 
> 赞同：2
> 
> 时间：2013-01-30T15:30:48.707
> 
> 标签：macos, bash, terminal, prompt

我是一个 n00b，试图永久更改我的终端提示。

我使用了以下教程/线程：

[http://www.cyberciti.biz/tips/howto-linux-unix-bash-shell-setup-prompt.html](http://www.cyberciti.biz/tips/howto-linux-unix-bash-shell-setup-prompt.html)

[http://www.linuxquestions.org/questions/programming-9/how-to-edit-bash_profile-and-bashrc-files-678445/](http://www.linuxquestions.org/questions/programming-9/how-to-edit-bash_profile-and-bashrc-files-678445/)

我设法更改了 .bashrc 文件：

```
$ cat .bashrc
export PS1="\w $" 
```

但提示仍然没有按照我想要的方式出现。

临时开展以下工作：

```
$ PS1="\w $"
~ $ 
```

我在编辑错误的文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-30T11:04:26.410

*我只是在这里回答这个问题，因为我今天刚刚搜索了这个问题的解决方案，并且这个线程在顶部附近弹出。我想我会为“如何”在 Mac 上完成这项工作提供终极菜鸟指南，因为我喜欢写得很详细的东西 =P*

* * *

您需要添加`.bash_profile`一个隐藏文件。更改此文件的原因是因为这是每次启动 bash shell 时加载的文件。但在执行此操作之前，请确保您已告诉 bash 您希望显示隐藏文件（*您如何在之后隐藏它们*）：

**复制/粘贴到终端：**

```
defaults write com.apple.finder AppleShowAllFiles TRUE 
```

**紧随其后的是：**

```
killall Finder 
```

使所有文件可见后，您必须导航到位于 的主用户目录`HD > Users > YourUserName`。进入内部后，查找`.bash_profile`文件应该相对容易。将 bash 文件拖到您喜欢的文本编辑器中。 **您将在此处添加命令（*或您自己的自定义变体*）：**

```
export PS1="\w $" 
```

一旦您对更改感到满意，您需要保存并重新启动 bash 以使它们生效。**为了隐藏之前可见的文件，随后将以下两行复制/粘贴到您的终端中：**

```
defaults write com.apple.finder AppleShowAllFiles FALSE

killall Finder 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:33:58.280

两个建议：

*   更改`.bashrc`文件后，取消登录并再次登录以查看它是否有效。
*   把它也放在 中`.profile`，因为`.bashrc`只有当你有`/bin/bash`你的默认 shell 时才会使用它。

# javascript - 在 JavaScript 中替换之后

> ID：14607620
> 
> 赞同：1
> 
> 时间：2013-01-30T15:30:56.363
> 
> 标签：javascript, string, replace

我有一个这样的字符串

```
"test, test2, test2, test4" 
```

我想在每个字符之后替换 `','`一些其他字符，我的结果必须像这样显示

“XXXtest，XXXtest2，XXXtest2，XXXtest4”

我可以使用哪个 javascript 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:34:24.427

函数替换会这样做

```
var s = "test, test2, test2, test4";
var r = 'XXX'+s.replace(/,\s/g, ', XXX'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:37:45.233

基本的正则表达式替换应该可以工作：

```
string.replace(/, /g, ', XXX'); 
```

我们正在搜索所有 ( `g`flag) 逗号后跟空格 ( `,`) 并将它们替换为逗号，后跟空格，然后是您想要的 ( `, XXX`)。

这不会替换第一次出现的`test`（因为字符串不以逗号开头），因此您必须将替换字符串添加到结果的开头。

```
'XXX' + string.replace(/, /g, ', XXX'); 
```

看到这个小提琴[http://jsfiddle.net/QGURA/1/](http://jsfiddle.net/QGURA/1/)

# jquery - jQuery使动态创建的单选按钮组互斥

> ID：14607621
> 
> 赞同：0
> 
> 时间：2013-01-30T15:30:58.347
> 
> 标签：jquery, asp.net-mvc-3

我有一些 C# (asp.net mvc 3) 代码在页面上生成单选按钮并将它们动态分配给组。我有一些 jQuery 可以使页面上的“所有”单选按钮相互排斥，但这并不完全符合要求。

每个组都需要互斥，我现在使用的代码使每个单选按钮成为互斥的页面，这将不起作用。

如何使每个组互斥？这必须是动态的，因为组名是在运行时动态生成的。

呈现的 HTML：

```
<!DOCTYPE html>

<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!-->
    <html class="no-js" lang="en">
<!--<![endif]-->
<meta charset="utf-8" />
<!-- Set the viewport width to device width for mobile -->
<meta name="viewport" content = "initial-scale=1,user-scalable=no,maximum-scale=1">

<head>
    <title>Approvals Edit</title>

        <link href="/camms/Content/themes/camms/jquery-ui-1.8.13.custom.css?build=1.0.4778.19080" rel="stylesheet" type="text/css" />

        <link href="/camms/Content/themes/camms/tinyeditor.css?build=1.0.4778.19080" rel="stylesheet" type="text/css" />

    <link href="/camms/Content/themes/zurb/globals.css" rel="stylesheet" type="text/css" />
    <link href="/camms/Content/themes/zurb/forms.css" rel="stylesheet" type="text/css" />
    <link href="/camms/Content/themes/zurb/grid.css" rel="stylesheet" type="text/css" />
    <link href="/camms/Content/themes/zurb/mobile.css" rel="stylesheet" type="text/css" />
    <link href="/camms/Content/themes/zurb/typography.css" rel="stylesheet" type="text/css" />
    <link href="/camms/Content/themes/zurb/app.css" rel="stylesheet" type="text/css" />

        <script src="/camms/Scripts/jquery-1.6.2.min.js?build=1.0.4778.19080" type="text/javascript"></script>

        <script src="/camms/Scripts/jquery-ui-1.8.16.min.js?build=1.0.4778.19080" type="text/javascript"></script>

        <script src="/camms/Scripts/jquery.unobtrusive-ajax.min.js?build=1.0.4778.19080" type="text/javascript"></script>

        <script src="/camms/Scripts/jquery.blockUI.js?build=1.0.4778.19080" type="text/javascript"></script>

        <script src="/camms/Scripts/jquery.scrollTo-1.4.2-min.js?build=1.0.4778.19080" type="text/javascript"></script>

        <script src="/camms/Scripts/jquery.maskedinput-1.3.js?build=1.0.4778.19080" type="text/javascript"></script>

        <script src="/camms/Scripts/tinyeditor_packed.js?build=1.0.4778.19080" type="text/javascript"></script>

        <script src="/camms/Scripts/PrintArea.js?build=1.0.4778.19080" type="text/javascript"></script>

        <script src="/camms/Scripts/jquery.base64.min.js?build=1.0.4778.19080" type="text/javascript"></script>

        <script src="/camms/Scripts/jquery.pagination.js?build=1.0.4778.19080" type="text/javascript"></script>

        <script src="/camms/Scripts/jquery.sorting.js?build=1.0.4778.19080" type="text/javascript"></script>

        <script src="/camms/Scripts/jquery.filtering.js?build=1.0.4778.19080" type="text/javascript"></script>

        <script src="/camms/Scripts/jquery.validate.js?build=1.0.4778.19080" type="text/javascript"></script>

        <script src="/camms/Scripts/CammsTemplate.js?build=1.0.4778.19080" type="text/javascript"></script>

        <script src="/camms/Scripts/jquery.stretcher.js?build=1.0.4778.19080" type="text/javascript"></script>

        <script src="/camms/Scripts/jquery.mobile-menu.js?build=1.0.4778.19080" type="text/javascript"></script>

    <link href="/camms/Content/themes/zurb/ui.css" rel="stylesheet" type="text/css" />
</head>
<body>

    <div style="position:absolute; botton:0; left:0; background-color:black; color:white">
        Development
    </div>   

        <script type="text/javascript">
        $(function () {
            $(':input:enabled:visible:first').focus();
        });

        //rootPath is used to construct URLs in attached javascript files
        rootPath = "/camms/";
    </script>

    <script src="/camms/Scripts/SessionMonitor.js?build=1.0.4778.19080" type="text/javascript"></script>

<script type="text/javascript">
    $(function() {
        var rootPath = '/camms/';
        var sessionMonitor = new SessionMonitor({
            extendSessionButton:    $('#keepWorkingBtn'),
            extendSessionUrl:       rootPath + "JSON/KeepSessionAlive",
            extendSessionMessage:   $('#extendSession'),
            sessionExpiredOkButton: $('#sessionExpiredBtn'),
            expiredSessionMessage:  $('#sessionTimedOut'),
            expiredSessionUrl:      rootPath,
            sessionTimeout :        1800
        });
    });
</script>

<div id="sessionTimedOut" style="display: none; padding:10px;">
    <p>Your session has expired</p>
    <input type="button" id="sessionExpiredBtn" class="small blue radius button" value="Ok"/>
</div>

<div id="extendSession" style="display: none; padding:10px;">
    <p>Your session will expire in <span id="sessionTimeRemaining"></span> seconds</p>
    <input type="button" id="keepWorkingBtn" class="small blue radius button" value="Keep Working"/>
</div>    

    <div class="container">
        <div id="header" class="row">
            <div id="mobile-logo" class="show-on-phones clearfix" >
                <h2>
                    <a href="/camms/">CAMMS</a>
                </h2>
            </div>

            <a href="/camms/" class="hide-on-phones">    <img src="/camms/Content/themes/camms/Images/logo.png" class="logo" alt="" />
</a>
            <div id="user-info-panel">

                <span class="hide-on-phones">
                    Wednesday, January 30, 2013<br />
                </span>

                Baker, Nathan |

                <!-- Show the current office -->
Computer Services,  Central<br />

                <!-- show the change office link -->
            </div>
        </div>

        <label id="mobile-category-name" class="show-on-phones">
            Category: Certifications
        </label>
        <div id="menuBar" class="row">
            <div id="breadcrumb" class="hide-on-phones">
                Category: Certifications
            </div>

<ul class="hide-on-phones">
        <li class='item  '>
                     <span class="disabled">Enrollment</span>

        </li>
        <li class='item selected radius '>
                     <span class="disabled">Approvals</span>

        </li>
        <li class='item  '>
                     <span class="disabled">Maintenance</span>

        </li>
        <li class='item  '>
                     <span class="disabled">Scheduling</span>

        </li>
</ul>

<label class="mobile-nav-level1 show-on-phones">
    Process:  &nbsp;
</label>
<select class="show-on-phones mobile-nav" style="margin-top:8px;">
            <option  value="/camms/Certifications/Scheduling" >
                Scheduling
            </option>
            <option  value="/camms/Certifications/Maintenance" >
                Maintenance
            </option>
            <option selected value="/camms/Certifications/Approvals" >
                Approvals
            </option>
            <option  value="/camms/Certifications/Enrollment" >
                Enrollment
            </option>
</select>

           </div>
        <div id="moreMenu">

<div class="moreMenuContainer radius" >
    <ul>
    </ul>
</div>
<span style="clear:right"></span>        </div>

        <div id="page-content" class="row radius-bottom">
            <div id="leftColumn" class="five columns">

<div style="overflow:hidden" class="hide-on-phones">
    <ul>
    </ul>
</div> 

<label class="mobile-nav-level2 show-on-phones">
    Sub-Process:  &nbsp;
</label>

<select class="show-on-phones mobile-nav " >
</select>
               </div>

            <div id="rightColumn" class="fifteen columns">
                <div id="title-bar" class="row">
                    <div id="titleBarOptions"></div>
                    <h2>Approvals Edit</h2>

                    <hr/>
                </div>

                <div id="scrollable-area" >

<form action="/camms/CertificationApproval/Edit/Certifications/Approvals/10556" method="post">    <span>

        <div class="row line editcolumn">
                <div class="three columns ">

                        <label for="PersonName" class="hide-on-phones" style="white-space: nowrap">Attendee</label>
                        <span class="clearfix hide-on-phones"></span>
                        <label for="PersonName" class="show-on-phones">Attendee &nbsp; </label>
                        <span class="clearfix show-on-phones"></span>                        

<input disabled="disabled" id="PersonName" name="PersonName" type="text" value="Brandhuber, Scott J." />
<input id="PersonName" name="PersonName" type="hidden" value="Brandhuber, Scott J." />

                </div>
                <div class="four columns ">

                        <label for="Certification" class="hide-on-phones" style="white-space: nowrap">Certification</label>
                        <span class="clearfix hide-on-phones"></span>
                        <label for="Certification" class="show-on-phones">Certification &nbsp; </label>
                        <span class="clearfix show-on-phones"></span>                        

<input disabled="disabled" id="Certification" name="Certification" type="text" value="ALDOT Concrete Technician" />
<input id="Certification" name="Certification" type="hidden" value="ALDOT Concrete Technician" />

                </div>
                <div class="one columns ">

                        <label for="Score" class="hide-on-phones" style="white-space: nowrap">Score</label>
                        <span class="clearfix hide-on-phones"></span>
                        <label for="Score" class="show-on-phones">Score &nbsp; </label>
                        <span class="clearfix show-on-phones"></span>                        

<input data-val="true" data-val-number="The field Score must be a number." data-val-required="The Score field is required." disabled="disabled" id="Score" name="Score" type="text" value="85" />
<input id="Score" name="Score" type="hidden" value="85" />

                </div>
                <div class="two columns ">

                        <label for="ExamProficiency" class="hide-on-phones" style="white-space: nowrap">Proficiency</label>
                        <span class="clearfix hide-on-phones"></span>
                        <label for="ExamProficiency" class="show-on-phones">Proficiency &nbsp; </label>
                        <span class="clearfix show-on-phones"></span>                        

<input disabled="disabled" id="ExamProficiency" name="ExamProficiency" type="text" value="" />
<input id="ExamProficiency" name="ExamProficiency" type="hidden" value="" />

                </div>
                <div class="one columns ">

                        <label for="Approve" class="hide-on-phones" style="white-space: nowrap">Approve</label>
                        <span class="clearfix hide-on-phones"></span>
                        <label for="Approve" class="show-on-phones">Approve &nbsp; </label>
                        <span class="clearfix show-on-phones"></span>                        

                    <input GroupName="group_64" falsevalue="N" id="Approve" name="Approve" truevalue="Y" type="radio" value="False" />
                </div>
                <div class="one columns ">

                        <label for="Reject" class="hide-on-phones" style="white-space: nowrap">Reject</label>
                        <span class="clearfix hide-on-phones"></span>
                        <label for="Reject" class="show-on-phones">Reject &nbsp; </label>
                        <span class="clearfix show-on-phones"></span>                        

                    <input GroupName="group_64" falsevalue="Y" id="Reject" name="Reject" truevalue="N" type="radio" value="False" />
                </div>
       </div>
<input data-val="true" data-val-number="The field Person Certification Id must be a number." data-val-required="The Person Certification Id field is required." id="PersonCertificationId" name="PersonCertificationId" type="hidden" value="1478" /><input data-val="true" data-val-number="The field Ref Wtf Members Id must be a number." data-val-required="The Ref Wtf Members Id field is required." id="RefWtfMembersId" name="RefWtfMembersId" type="hidden" value="10006" /><input data-val="true" data-val-number="The field Worker Id must be a number." data-val-required="The Worker Id field is required." id="WorkerId" name="WorkerId" type="hidden" value="10556" /><input data-val="true" data-val-number="The field Wtf Approval Id must be a number." data-val-required="The Wtf Approval Id field is required." id="WtfApprovalId" name="WtfApprovalId" type="hidden" value="0" /><input id="MembersId" name="MembersId" type="hidden" value="10011" /><input id="PreviousUrl" name="PreviousUrl" type="hidden" value="" /><input data-val="true" data-val-number="The field Last Modified By Id must be a number." id="LastModifiedById" name="LastModifiedById" type="hidden" value="" />           
        <div class="row line editcolumn">
                <div class="three columns ">

                        <label for="PersonName" class="hide-on-phones" style="white-space: nowrap">Attendee</label>
                        <span class="clearfix hide-on-phones"></span>
                        <label for="PersonName" class="show-on-phones">Attendee &nbsp; </label>
                        <span class="clearfix show-on-phones"></span>                        

<input disabled="disabled" id="PersonName" name="PersonName" type="text" value="Duck, Daffy " />
<input id="PersonName" name="PersonName" type="hidden" value="Duck, Daffy " />

                </div>
                <div class="four columns ">

                        <label for="Certification" class="hide-on-phones" style="white-space: nowrap">Certification</label>
                        <span class="clearfix hide-on-phones"></span>
                        <label for="Certification" class="show-on-phones">Certification &nbsp; </label>
                        <span class="clearfix show-on-phones"></span>                        

<input disabled="disabled" id="Certification" name="Certification" type="text" value="ALDOT Concrete Technician" />
<input id="Certification" name="Certification" type="hidden" value="ALDOT Concrete Technician" />

                </div>
                <div class="one columns ">

                        <label for="Score" class="hide-on-phones" style="white-space: nowrap">Score</label>
                        <span class="clearfix hide-on-phones"></span>
                        <label for="Score" class="show-on-phones">Score &nbsp; </label>
                        <span class="clearfix show-on-phones"></span>                        

<input disabled="disabled" id="Score" name="Score" type="text" value="70" />
<input id="Score" name="Score" type="hidden" value="70" />

                </div>
                <div class="two columns ">

                        <label for="ExamProficiency" class="hide-on-phones" style="white-space: nowrap">Proficiency</label>
                        <span class="clearfix hide-on-phones"></span>
                        <label for="ExamProficiency" class="show-on-phones">Proficiency &nbsp; </label>
                        <span class="clearfix show-on-phones"></span>                        

<input disabled="disabled" id="ExamProficiency" name="ExamProficiency" type="text" value="PASS" />
<input id="ExamProficiency" name="ExamProficiency" type="hidden" value="PASS" />

                </div>
                <div class="one columns ">

                        <label for="Approve" class="hide-on-phones" style="white-space: nowrap">Approve</label>
                        <span class="clearfix hide-on-phones"></span>
                        <label for="Approve" class="show-on-phones">Approve &nbsp; </label>
                        <span class="clearfix show-on-phones"></span>                        

                    <input GroupName="group_67" falsevalue="N" id="Approve" name="Approve" truevalue="Y" type="radio" value="False" />
                </div>
                <div class="one columns ">

                        <label for="Reject" class="hide-on-phones" style="white-space: nowrap">Reject</label>
                        <span class="clearfix hide-on-phones"></span>
                        <label for="Reject" class="show-on-phones">Reject &nbsp; </label>
                        <span class="clearfix show-on-phones"></span>                        

                    <input GroupName="group_67" falsevalue="Y" id="Reject" name="Reject" truevalue="N" type="radio" value="False" />
                </div>
       </div>
<input id="PersonCertificationId" name="PersonCertificationId" type="hidden" value="10089" /><input id="RefWtfMembersId" name="RefWtfMembersId" type="hidden" value="10006" /><input id="WorkerId" name="WorkerId" type="hidden" value="10556" /><input id="WtfApprovalId" name="WtfApprovalId" type="hidden" value="0" /><input id="MembersId" name="MembersId" type="hidden" value="10011" /><input id="PreviousUrl" name="PreviousUrl" type="hidden" value="" /><input id="LastModifiedById" name="LastModifiedById" type="hidden" value="" />
    </span>
    <div class="DetailLine NewRow Required" id="RequiredFieldLegend">
        *Indicates a required field
    </div>
    <div class="row">
        <div class="sixteen columns">
                <input name="command" type="submit" value="Save" class="small nice blue radius button"  />
                <input name="command" type="submit" value="Cancel" class="small nice white radius button"  />
        </div>
    </div>
</form>

<script type="text/javascript">
    if ($('.required').not('#RequiredFieldLegend').length == 0) {
        $('#RequiredFieldLegend').hide();
    }
</script>

                </div>
            </div>
        </div>
        <div id="footerContainer" class="row">
            <div >
                <div id="footerLinksContainer" class="radius-top">
                    <ul>
                        <li>
                                <img src="/camms/Content/themes/camms/Images/icons/ico_book.png" alt="" class="icon" />

                                    <span class="disabled">Construction Manual</span>

                        </li>
                        <li>
                                <img src="/camms/Content/themes/camms/Images/icons/ico_manual.png" alt="icon" class="icon" />

                                    <span class="disabled">Spec Book</span>

                        </li>
                        <li>
                                <img src="/camms/Content/themes/camms/Images/icons/ico_test.png" alt="icon" class="icon" />

                                    <span class="disabled">Testing Manual</span>

                        </li>
                        <li>
                                <img src="/camms/Content/themes/camms/Images/icons/ico_search.png" alt="icon" class="icon" />

                            <a href="/camms/CertificationApproval/Search/Certifications/Approvals/">Search</a>

                        </li>
                        <li>
                                <img src="/camms/Content/themes/camms/Images/icons/ico_helpBook.png" alt="icon" class="icon" />

                                    <span class="disabled">Help</span>

                        </li>
                        <li>
                                <img src="/camms/Content/themes/camms/Images/icons/ico_help.png" alt="icon" class="icon" />

                                    <span class="disabled">Help Desk</span>

                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

</body>

</html> 
```

这是编辑视图模型：

```
 using System.Collections.Generic;
using System.ComponentModel;
using System.ComponentModel.DataAnnotations;
using System.Web.UI.WebControls;
using Camms.ValueObjects;
using CammsWeb.Code;
using CammsWeb.Code.Attributes;
using CammsWeb.Attributes;
using CammsWeb.Code.TemplateElements;

namespace CammsWeb.Models.Categories.Certifications.Approvals
{
    public class ApprovalEditViewModel : ViewModelBase
    {
        public long PersonCertificationId { get; set; }

        public long RefWtfMembersId { get; set; }

        public long WorkerId { get; set; }

        public long WtfApprovalId { get; set; }

        public string MembersId { get; set; }

        // this will be Y or N for approve/reject
        public string Vote { get; set; }

        [Layout(3), DisplayName("Attendee"), Disable()]
        public string PersonName { get; set; }

        [Layout(4), DisplayName("Certification"), Disable()]
        public string Certification { get; set; }

        [Layout(1), DisplayName("Score"), Disable()]
        public double Score { get; set; }

        [Layout(2), DisplayName("Proficiency"), Disable()]
        public string ExamProficiency { get; set; }

        [Layout(1), DisplayName("Approve"), RadioButton(FalseValue = "N", TrueValue = "Y")]
        public string Approve { get; set; }

        [Layout(1), DisplayName("Reject"), RadioButton(FalseValue = "Y", TrueValue = "N")]
        public string Reject { get; set; }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:59:27.093

给定`groupname`属性，您可以这样做：

```
$(':radio[groupname]').change(function()
{
  var groupname = $(this).attr('groupname');
  var filter = ':radio[groupname="' + groupname + '"]';

  $(filter).attr('checked', false); // find all elements with the same groupname, uncheck them

  $(this).attr('checked', true); // reset to checked since we probably just unchecked it with the line above!
}); 
```

[http://jsfiddle.net/7nAsJ/](http://jsfiddle.net/7nAsJ/)

现在，为了使它起作用，名称必须是唯一的。在上面的 JSFiddle 中，您会看到我在示例 HTML 代码中重命名了`Approve`和`Reject`to 。因此，如果您有两个带有名称的单选按钮，那么它们会按 HTML DOM 标准自动分组，并且它们将自动互斥。如果你不能拥有它，那么还有另外两个选择：`Approve2``Reject2``Approve`

1.  加载时，更改名称和 ID 以附加组名称。然后使用上面的JS。但是，如果您仍然要更改名称，那么我建议选项＃2 ...
2.  把名字改成组名，这样就不用JS了！它是自动的。

为了演示，这里是修复名称的代码：http: [//jsfiddle.net/7nAsJ/1/](http://jsfiddle.net/7nAsJ/1/)

```
$(':radio[groupname]').each(function()
{
  var groupname = $(this).attr('groupname');
  $(this).attr('name', groupname);
  $(this).attr('id', $(this).attr('id') + '_' + groupname); // set new ID to old ID_groupname for uniqueness
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:39:44.717

> 该框架的工作方式是从元数据中读取以生成 html。标记看起来像这样`<input type="radio" name="Approve" id="Approve" groupname="group_1" /> <input type="radio" name="Reject" id="Reject" groupname="group_1" />`

看到您有一个名为 的属性`groupname`，根据您的评论，您应该能够执行类似的操作：

```
$("input:radio").on("click", function(){
    var $currentInput = $(this);
    var groupName = $currentInput.attr("groupname");

    $("[groupname='" + groupName + "']").not($currentInput).prop("checked", false);
}) 
```

* * *

[**演示**](http://jsfiddle.net/2PSEF/)- 手动清除同一组中的单选按钮

* * *

假设所有输入都有一个 groupname 属性，类似于：

```
<span>Group 1</span>
<input type="radio" groupname="group1"/>
<input type="radio" groupname="group1"/>
<input type="radio" groupname="group1"/>
<input type="radio" groupname="group1"/>
<br />
<span>Group 2</span>
<input type="radio" groupname="group2"/>
<input type="radio" groupname="group2"/>
<input type="radio" groupname="group2"/>
<input type="radio" groupname="group2"/> 
```

# zend-framework2 - ZF2 表单标签未翻译

> ID：14607626
> 
> 赞同：0
> 
> 时间：2013-01-30T15:31:17.253
> 
> 标签：zend-framework2, multilingual, zend-form2

我正在开发 ZF2 骨架应用程序并添加了“专辑”模块。我的表单标签未翻译。需要做什么才能使表单标签成为多语言？

我的代码`form/AlbumForm.php`：

```
class AlbumForm extends Form
{
    public function __construct($name = null)
    {
        parent::__construct('album');
        $this->setAttribute('method', 'post');
        $this->add(array(
            'name' => 'id',
            'attributes' => array(
                'type'  => 'hidden',
            ),
        ));
        $this->add(array(
            'name' => 'artist',
            'attributes' => array(
                'type'  => 'text',
            ),
            'options' => array(
                'label' => 'Artist',
            ),
        ));
        $this->add(array(
            'name' => 'title',
            'attributes' => array(
                'type'  => 'text',
            ),
            'options' => array(
                'label' => 'Title',
            ),
        ));
        $this->add(array(
            'name' => 'submit',
            'attributes' => array(
                'type'  => 'submit',
                'value' => 'Go',
                'id' => 'submitbutton',
            ),
        ));
    }
} 
```

我的代码`view/edit.phtml`：

```
$form = $this->form;
$form->setAttribute( 'action', $this->url( 'album', array(
    'action' => 'edit',
    'id' => $this->id 
) ) ); 
$form->prepare();

echo $this->form()->openTag( $form );
echo $this->formHidden( $form->get( 'id' ) );
echo $this->formRow( $form->get( 'title' ) );
echo $this->formRow( $form->get( 'artist' ) );
echo $this->formSubmit( $form->get( 'submit' ) );
echo $this->form()->closeTag(); 
```

* * *

已编辑

* * *

`var_dump()`$translator( )的`$translator = $this->formLabel()->getTranslator();`输出如下：

* * *

```
object(Zend\I18n\Translator\Translator)#159 (8) {
  ["messages":protected]=>
  array(0) {
  }
  ["files":protected]=>
  array(0) {
  }
  ["patterns":protected]=>
  array(1) {
    ["default"]=>
    array(1) {
      [0]=>
      array(3) {
        ["type"]=>
        string(7) "gettext"
        ["baseDir"]=>
        string(83) "C:\Users\something\Projects\ZF2\code_new\module\Application\config/../language"
        ["pattern"]=>
        string(5) "%s.mo"
      }
    }
  }
  ["remote":protected]=>
  array(0) {
  }
  ["locale":protected]=>
  string(5) "es_ES"
  ["fallbackLocale":protected]=>
  NULL
  ["cache":protected]=>
  NULL
  ["pluginManager":protected]=>
  NULL
} 
```

* * *

如您所见，语言环境是“es_ES”。我的`es_ES.po`包含标签（艺术家和标题）的翻译，并在列表页面标题中正确显示它们。

提前感谢您的帮助。

# cucumber - 如何从下拉菜单中选择一个不可见的元素

> ID：14607627
> 
> 赞同：0
> 
> 时间：2013-01-30T15:31:22.373
> 
> 标签：cucumber, watir, watir-webdriver

我写了测试任务并且有一个错误

```
Scenario: Set "Whiskey" value from dropdown menu                                           # features\task2.feature:10
    Given I am on the page with "ComboBox" example                                           # features/step_definitions/task2.rb:13
    When I choose "Whiskey" from drop down menu                                              # features/step_definitions/task2.rb:16
      Cannot click on element (Selenium::WebDriver::Error::ElementNotVisibleError)
      ./features/step_definitions/task2.rb:19:in `/^I choose "(.*?)" from drop down menu$/'
      features\task2.feature:12:in `When I choose "Whiskey" from drop down menu'
    And I click "Submit" button                                                              # features/step_definitions/task2.rb:22
    Then I should see "You changed your selection to: 'Whiskey' " text displeyed on the page # features/step_definitions/task2.rb:26 
```

这是黄瓜的代码

```
When /^I choose "(.*?)" from drop down menu$/ do |drop_down_text|  
  @browser.button(id: "ctl00_SampleContent_ComboBox1_ComboBox1_Button").click  
  @browser.ul(id: "ctl00_SampleContent_ComboBox1_ComboBox1_OptionList").li(text: drop_down_text).click
end 
```

步骤之前

```
@browser.goto http://www.asp.net/ajax/ajaxcontroltoolkit/Samples/Default.aspx"
@browser.link(:text, ComboBox).click
@browser.button(id: "ctl00_SampleContent_ComboBox1_ComboBox1_Button").click 
```

浏览器 IE9。使用 FF 就可以了。如果我选择可见元素（例如 Alfa），它会起作用。这真的很奇怪。是否需要向下滚动才能获取我的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:53:02.783

您可以增加下拉菜单的高度，这应该允许 IE 访问最初被隐藏的选项。例如：

```
b.button(id: "ctl00_SampleContent_ComboBox1_ComboBox1_Button").click
b.execute_script("document.getElementById('ctl00_SampleContent_ComboBox1_ComboBox1_OptionList').style.height='1000px';") 
```

# c - 函数返回指向本地静态/全局变量的指针作为 C 中的左值

> ID：14607630
> 
> 赞同：-1
> 
> 时间：2013-01-30T15:31:27.257
> 
> 标签：c, lvalue

我想知道返回指向本地静态/全局变量的指针的函数是否可以像 C++ 一样在 C 中用作左值，所以我尝试了一下，似乎这是可能的。以下面的简单函数为例，

```
 int* d(int a){
    static int* array = NULL;
    static int size = 0;
    if(a+1 > size){
        size = 2*(a+1);
        array = realloc(array, size * sizeof(int));
    }
    if(a == -1){
        free(array);
        return NULL;
    }
    return array + a;
} 
```

这是一个简单的动态数组，例如，您可以这样做`*d(30) = 2`，但由于每个编译单元只能有一个函数实例，我觉得这不是很有用。

因此，我想问一下，这个概念在 C 中是否有任何有趣的用途。任何真正的应用程序也会很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T15:34:57.903

> 我想知道函数是否可以像在 C++ 中一样在 C 中用作左值，所以我尝试了一下，似乎这是可能的。

不，你错了。在这里，您没有将函数用作左值。您正在使用**函数返回的指针所指向的整数**作为左值。如果您将该函数用作左值，那看起来像

```
malloc = some_other_function; 
```

但在 C 中，这是不可能的（你会得到一个编译器错误）。但是，您可以创建可以分配给的函数指针：

```
void *(*malloc_wrapper)(size_t);

malloc_wrapper = malloc;

int *arr = malloc_wrapper(10 * sizeof(*arr)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T21:24:19.233

由于 realloc，这个例子很危险。您无法控制调用者对指针的操作。考虑：

```
 *d(0)=0;
   int* insertPoint = d(1); //save for later
   *d(2)=2;  //forces realloc.
   *insertPoint = 1; //CRASH, points to freed memory. 
```

我不认为动态数组是这种技术的一个很好的用例。

- 编辑 -

> 我想知道返回指向本地静态/全局变量的指针的函数是否可以用作左值...

他们可以，但正如您所指出的，每个编译单元只能有一个。所以它真的变成了一个全局变量的包装器。或者一种使局部静态像全局一样的方法。因此，大多数用例只涉及使用非标准语法来执行标准操作。

我从未见过使用这种技术。我能想到的唯一可能的用途是提供某种单例构造。

# python - 在脚本中使用 \o 命令

> ID：14607633
> 
> 赞同：1
> 
> 时间：2013-01-30T15:31:34.567
> 
> 标签：python, postgresql, psycopg2

有没有办法可以使用 psycopg2 中的 \o 命令。如果没有，有什么办法可以自动化这个命令。我正在尝试将此命令包含在脚本中，但不知道该怎么做。我需要文件与 \o 命令的输出格式相同，所以我不能使用 \copy 命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:05:15.733

我刚刚发现了一种将 '\o' 命令放入脚本中的方法，如 postgres [docs](http://www.postgresql.org/docs/8.4/static/app-psql.html)中所述。您需要做的就是将这些“元命令”通过管道传输到 psql。这是如何做到的：

```
echo "\o test.out \\ select * from test;" | psql -wU user db_name 
```

# java - 使用 VisualVM 分析 Eclipse RCP

> ID：14607634
> 
> 赞同：6
> 
> 时间：2013-01-30T15:31:35.803
> 
> 标签：java, profiling, eclipse-rcp, visualvm

我正在开发一个基于 Eclipse RCP 的应用程序。我想在我的应用程序中分析特定方法：删除元素并刷新部分。

我成功地将 VisualVM 启动插件连接到 Eclipse。在我的应用程序运行后，我从 VisualVM 执行 Profiler 并拖动/刷新了正在分析的应用程序中的一些内容。最后在调用栈中没有看到对应的方法。我找不到任何对我的东西负责的方法，我无能为力。

为什么会这样？如果我在整个应用程序启动之前运行 VisualVM - 一切似乎都很好。每个方法在调用堆栈中都有正确的位置。我很好奇 VisualVM 的限制。

# ios - 在 iOS 中仅使用模数和指数使用 RSA 加密字符串

> ID：14607635
> 
> 赞同：0
> 
> 时间：2013-01-30T15:31:37.630
> 
> 标签：ios, rsa, xcode4.5

我知道这里有很多类似的问题和答案，但我已经搜索并找不到适合我的问题。

我有一个我想在 IOS (6) 中使用的服务，由我无法控制的第三方提供。

为了通过服务进行身份验证，我需要将我的用户凭据作为 RSA 加密字符串发送，并使用他们的 RSA 公钥加密。

他们为我提供了以下格式的 XML 文件

```
<BitStrength>1024</BitStrength>
<RSAKeyValue>
<Modulus>xxxxxxxxxxxxxxxxxxxxx</Modulus>
<Exponent>xxxx</Exponent>
</RSAKeyValue> 
```

为了加密字符串，我需要做什么？我来自 DOTNET 背景，所以到目前为止，大部分复杂性对我来说都是模糊的。

我试过这样的例子： [RSA implementations in Objective C](https://stackoverflow.com/questions/10222524/rsa-implementations-in-objective-c) but there is no way to build objects from what I have, they're seem to need a cert

我曾尝试使用此工具将其转换为 PEM 文件，但代码不会再次构建 cert 对象。 [https://superdry.apphb.com/tools/online-rsa-key-converter](https://superdry.apphb.com/tools/online-rsa-key-converter)

提前感谢您的帮助。

**** 编辑 **** 这是我使用提供的示例创建的方法的一部分，它运行没有错误，但我无法解码输出：

```
 SStatus status = noErr;

size_t cipherBufferSize;
uint8_t *cipherBuffer;

// [cipherBufferSize]
size_t dataSize = [plainTextString lengthOfBytesUsingEncoding:NSUTF8StringEncoding];
const uint8_t* textData = [[plainTextString dataUsingEncoding:NSUTF8StringEncoding] bytes];

NSAssert(publicKey, @"The public key being referenced by tag must have been stored in the keychain before attempting to encrypt data using it!");

//  Allocate a buffer

cipherBufferSize = SecKeyGetBlockSize(publicKey);
// plain text block size must be 11 less than cipher buffer size because of
// the PKSC1 padding used:
const size_t blockSizeMinusPadding = cipherBufferSize - 11;
cipherBuffer = malloc(cipherBufferSize);

NSMutableData* accumulatedEncryptedData = [NSMutableData dataWithCapacity:0];

for (int ii = 0; ii*blockSizeMinusPadding < dataSize; ii++) {
    const uint8_t* dataToEncrypt = (textData+(ii*blockSizeMinusPadding));
    const size_t subsize = (((ii+1)*blockSizeMinusPadding) > dataSize) ? blockSizeMinusPadding-(((ii+1)*blockSizeMinusPadding) - dataSize) : blockSizeMinusPadding;

    // Encrypt using the public key.
    status = SecKeyEncrypt(publicKey,
                           kSecPaddingOAEP,
                           dataToEncrypt,
                           subsize,
                           cipherBuffer,
                           &cipherBufferSize
                           );

    [accumulatedEncryptedData appendBytes:cipherBuffer length:cipherBufferSize];
}

if (publicKey) CFRelease(publicKey);

free(cipherBuffer); 
```

// 返回累积加密数据；返回 [accumulatedEncryptedData base64EncodedString];

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T23:34:41.833

使用您提到的转换器获取公钥的 PEM 字符串，或编写一些代码自己进行转换。

**编辑：**对不起，我粘贴了错误的链接。现在更改它：然后，获取在[此处](http://blog.flirble.org/2011/01/05/rsa-public-key-openssl-ios/)找到的代码并使用它将公钥添加到 iOS 钥匙串。

您可以使用以下代码从钥匙串中获取公钥引用：

```
+ (SecKeyRef)copyPublicKeyForTag:(NSString*)tag
{
    SecKeyRef publicKey = NULL;

    NSData * publicTag = [NSData dataWithBytes:[tag cStringUsingEncoding:NSUTF8StringEncoding]
                                        length:[tag length]];

    NSMutableDictionary *queryPublicKey =
    [[NSMutableDictionary alloc] init];

    [queryPublicKey setObject:(id)kSecClassKey forKey:(id)kSecClass];
    [queryPublicKey setObject:publicTag forKey:(id)kSecAttrApplicationTag];
    [queryPublicKey setObject:(id)kSecAttrKeyTypeRSA forKey:(id)kSecAttrKeyType];
    [queryPublicKey setObject:[NSNumber numberWithBool:YES] forKey:(id)kSecReturnRef];

    OSStatus status = SecItemCopyMatching
    ((CFDictionaryRef)queryPublicKey, (CFTypeRef *)&publicKey);

    if (status != noErr) {
        return nil;
    }

    return publicKey;
} 
```

现在您可以使用我编写的代码使用公钥加密数据，在[此处](http://mattpolzin.com/charblog/?p=120)找到。请注意，我正在使用`PKCS1`填充，而您可能不会。如果您是，那么取决于您是否希望您的代码适用于 iOS 5 或仅适用于 iOS 6，我刚刚链接到的博客文章中的其余信息将是相关的或不相关的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:49:57.007

最后，我们选择了[http://chilkatsoft.com/rsa-objc.asp](http://chilkatsoft.com/rsa-objc.asp)，因为它是完全无缝的，而且对于价格，我花了更多的钱试图让 iOS 原生地做到这一点。

它将采用模数和指数部分和/或证书。当我在 IOS 上加密但从未成功在服务上解密时，Mathews 代码似乎确实有效。

# ruby - 是否建议在 Rails 3.2 应用程序中包含 Git 中供应商/缓存的内容？

> ID：14607636
> 
> 赞同：35
> 
> 时间：2013-01-30T15:31:39.307
> 
> 标签：ruby, ruby-on-rails-3, git, rubygems, ruby-on-rails-3.2

我经常需要在我的应用程序中创建分支以进行新的开发。这通常意味着我在我的分支中对我的 Gemfile 进行了 Master 中不存在的更改，因此我最终会在供应商/缓存中缓存的 gem 中出现差异。

我发现提交缓存的 gem 让我很困扰，但我不知道这是否确实是错误的。我应该 .gitignore-ing 这些吗？如果是这样，我应该`git rm`缓存的gem文件吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-13T20:34:52.163

TL;DR：这取决于你，但我建议将它们保存在 git 中。

这样做`vendor/cache`是允许捆绑，尤其是部署捆绑，以跳过从 ruby​​gems 下载 gem。这显着减少了对红宝石的依赖。

在部署中，您可以指定`--local`捆绑程序以完全删除对 ruby​​gems.org 的所有依赖，但前提是这些文件已签入 git。

这很有价值，因为虽然 ruby​​gems.org 是一项出色的服务，但它也不能免受中断的影响。如果没有这些缓存的 gem，rubygems.org 上的中断*可能*意味着您将无法部署新版本、重新部署或扩展到新机器，直到 ruby​​gems 备份。

还有一个论点是供应商/缓存可以用作 Gemfile.lock 的扩展，将部署 gem 锁定为与开发中使用的相同的二进制文件，而不仅仅是版本相同。

因此，出于实际原因，保持您作为独立于 ruby​​gems.org 的实用、工作应用程序的能力：将它们保存在您的 git 存储库中。

# c# - 程序集中的“System.Web.UI.WebControls.ListItem”未标记为可序列化

> ID：14607639
> 
> 赞同：0
> 
> 时间：2013-01-30T15:31:41.283
> 
> 标签：c#, asp.net

我做了一个属性，如下所示。

```
public ListItem[] DropDownListItems
        {
            get { return (ListItem[])ViewState["DropDownListItems"]; }
            set { ViewState["DropDownListItems"] = value; }
        } 
```

这就是我分配值的方式

```
ListItem[] litem = new ListItem[7];
litem[0] = new ListItem("View", "RowView");
litem[1] = new ListItem("ReadView", "RowReadView");
litem[2] = new ListItem("WriteView", "RowWriteView");
litem[3] = new ListItem("DeleteView", "RowDeleteView");
this.DropDownListItems=litem; 
```

但我收到以下错误

**Assembly 中的“System.Web.UI.WebControls.ListItem”未标记为可序列化。**

如何解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:37:33.090

我相信这是因为您试图将 ListItem 的集合放入 ViewState 中，并且 ViewState 在页面上被序列化为文本，它表示 Class ListItem 不可序列化，因为它们不是，您可能必须使用其他东西并执行例如，一些使用 Dictionary(Of String,string) 的后处理逻辑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:38:27.763

为了在 ViewState 中存储事物，它必须但*必须*是可序列化的。显然，根据给出的错误消息，您尝试推入的类型实际上不是可序列化的。

要解决此问题，您可以创建一个包装器，如果您愿意，它封装项目的数据，然后可以将其转换为 UI 控件。这样，您也只将所需的数据存储在（已经有问题的）ViewState 中。

# math - 在 3D 空间中旋转矢量

> ID：14607640
> 
> 赞同：69
> 
> 时间：2013-01-30T15:31:42.387
> 
> 标签：math, vector, 3d, rotation, linear-algebra

我正在opengl es中制作一个android项目，它使用加速度计来计算特定轴的变化，我的目标是旋转我的航天器状物体的运动矢量。问题是我无法理解旋转矩阵背后的数学。默认移动向量是 0,1,0 ，表示 +y，所以对象一开始向上看。我正在尝试旋转它的运动矢量，这样我就可以移动它指向的对象。我可以收集手机中的旋转变化。x轴：旋转[0]，y轴：旋转[1]，z轴：旋转[2]。如何使用旋转矩阵旋转我的运动矢量？

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2013-01-30T17:02:19.227

如果要旋转矢量，则应构造所谓的[旋转矩阵](http://en.wikipedia.org/wiki/Rotation_matrix)。

# 二维旋转

假设你想将一个向量或一个点旋转 θ，然后[三角函数](http://en.wikipedia.org/wiki/Polar_coordinates)表明新坐标是

```
 x' = x cos θ − y sin θ
    y' = x sin θ + y cos θ 
```

为了演示这一点，让我们以基本轴 X 和 Y 为例；当我们将 X 轴逆时针旋转 90° 时，我们应该最终将 X 轴转换为 Y 轴。考虑

```
 Unit vector along X axis = <1, 0>
    x' = 1 cos 90 − 0 sin 90 = 0
    y' = 1 sin 90 + 0 cos 90 = 1
    New coordinates of the vector, <x', y'> = <0, 1>  ⟹  Y-axis 
```

当您了解这一点时，创建一个矩阵来执行此操作就变得简单了。矩阵只是一种数学工具，可以以一种舒适、通用的方式执行此操作，因此可以使用一种常用方法在一个步骤中组合和执行各种变换，如旋转、缩放和平移（移动）。从线性代数，旋转二维点或向量，要建立的矩阵是

```
 |cos θ   −sin θ| |x| = |x cos θ − y sin θ| = |x'|
    |sin θ    cos θ| |y|   |x sin θ + y cos θ|   |y'| 
```

# 3D 旋转

这在 2D 中有效，而在 3D 中我们需要考虑第三轴。在 2D 中围绕原点（一个点）旋转矢量仅意味着在 3D 中围绕 Z 轴（一条线）旋转它；因为我们围绕 Z 轴旋转，所以它的坐标应该保持不变，即 0°（旋转发生在 3D 中的 XY 平面上）。在 3D 中围绕 Z 轴旋转将是

```
 |cos θ   −sin θ   0| |x|   |x cos θ − y sin θ|   |x'|
    |sin θ    cos θ   0| |y| = |x sin θ + y cos θ| = |y'|
    |  0       0      1| |z|   |        z        |   |z'| 
```

围绕 Y 轴将是

```
 | cos θ    0   sin θ| |x|   | x cos θ + z sin θ|   |x'|
    |   0      1       0| |y| = |         y        | = |y'|
    |−sin θ    0   cos θ| |z|   |−x sin θ + z cos θ|   |z'| 
```

围绕 X 轴将是

```
 |1     0           0| |x|   |        x        |   |x'|
    |0   cos θ    −sin θ| |y| = |y cos θ − z sin θ| = |y'|
    |0   sin θ     cos θ| |z|   |y sin θ + z cos θ|   |z'| 
```

**注 1**：旋转所围绕的轴在矩阵中没有正弦或余弦元素。

**注2：**这种旋转方式遵循[欧拉角](http://en.wikipedia.org/wiki/Euler_angles)旋转系统，教简单易掌握。这对于 2D 和简单的 3D 案例非常有效；[但是当需要同时围绕所有三个轴进行旋转时，由于该系统的固有缺陷（表现为万向节锁定](http://en.wikipedia.org/wiki/Gimbal_lock)），欧拉角可能不够。人们在这种情况下使用[Quaternion](http://en.wikipedia.org/wiki/Quaternion) s，它比这更先进，但在正确使用时不会受到 Gimbal 锁的影响。

我希望这能澄清基本的轮换。

# 自转不是公转

上述矩阵在距离原点 r = √(x² + y²) 处沿半径为 r 的圆旋转物体；查找[极坐标](http://en.wikipedia.org/wiki/Polar_coordinate_system)以了解原因。这种旋转将相对于世界空间原点又名*革命*。通常我们需要围绕它自己的框架/枢轴旋转一个对象，而不是围绕世界，即本地原点。这也可以看作是 r = 0 的特殊情况。由于并非所有对象都位于世界原点，因此仅使用这些矩阵进行旋转不会产生围绕对象自身框架旋转的预期结果。你先[翻译](https://en.wikipedia.org/wiki/Translation_(geometry))（移动）对象到世界原点（以便对象的原点与世界的原点对齐，从而使 r = 0），使用这些矩阵中的一个（或多个）执行旋转，然后将其再次转换回其先前的位置。应用变换的顺序很[重要](http://www.glprogramming.com/red/chapter03.html#name2)。将多个变换组合在一起称为*串联*或*组合*。

# 作品

我敦促您阅读有关线性和仿射变换及其组合的信息，以便一次性执行多个变换，然后再在代码中进行变换。如果不了解其背后的基本数学原理，调试转换将是一场噩梦。我发现[这个讲座视频](http://www.youtube.com/watch?v=heVndBwDffI)是一个非常好的资源。另一个资源是[这个关于转换的教程](http://github.com/legends2k/2d-transforms-101/#2d-transforms-101)，旨在直观并用动画说明想法（警告：由我创作！）。

# 围绕任意向量旋转

如果您只需要像发布的问题中那样围绕基本轴（X、Y 或 Z）旋转，上述矩阵的乘积就足够了。但是，在许多情况下，您可能希望围绕任意轴/矢量旋转。[罗德里格斯公式](https://en.wikipedia.org/wiki/Rodrigues%27_rotation_formula)（又名轴角公式）是该问题的常用解决方案。但是，仅当您只使用向量和矩阵时才使用它。如果您使用的是[四元数](http://en.wikipedia.org/wiki/Quaternion)，只需构建一个具有所需矢量和角度的四元数。四元数是存储和操作 3D 旋转的绝佳选择；*它很*紧凑*快速，例如在轴角表示中连接两个旋转相当昂贵，矩阵适中但四元数便宜。通常所有的旋转操作都是使用四元数完成的，并且在上传到渲染管道时作为最后一步转换为矩阵。请参阅[了解四元数](https://www.3dgep.com/understanding-quaternions/)以获得有关四元数的良好入门。*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-16T13:09:22.673

我推断你的向量的 X 分量应该是 M*cos(o) *cos(t)+x，Y 分量应该是 M* cos(t) *sin(o)+y，z 分量应该是 M* cos(o )*sin(t)+z 其中 M 是向量的大小，o 是在垂直平面中的旋转角度，t 是在水平平面中的旋转角度，x 是旋转中心的 x 值，y 是旋转中心的 y 值，z 是旋转中心的 z 值。请告诉我这是否适合您。*

# java - java中参数传递的泛型变量个数

> ID：14607642
> 
> 赞同：2
> 
> 时间：2013-01-30T15:31:46.863
> 
> 标签：java, generics

我有一个方法 findByProperties(Parameter... p); 所以它可以接受任意数量的参数。但是我很困惑的是，如果我必须调用这个方法并且我不知道参数的数量我该怎么做

假设我有一个带参数的列表，并且每次调用该方法时列表的大小都会发生变化，那么如何将列表中的参数添加到方法调用中？

```
for(ArrayList<Parameter> p : list){
   findByProperties(p);  //not sure what to do here
 } 
```

编辑：

这是解决方案：

```
Parameter[] paramArray = new ArrayList<Parameter>().toArray(new Parameter[]{});
findByProperties(paramArray); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T15:46:32.847

你可以这样做：

```
Parameter[] paramArray = new ArrayList<Parameter>().toArray(new Parameter[]{});
findByProperties(paramArray); 
```

这与以下内容相同：

```
findProperties(param1, param2); 
```

因为 Java 在内部将 varargs-list 转换为数组，所以您也可以传递数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T15:39:07.790

您可以覆盖`findByProperties`以采用可变参数或`List<Parameter>`. 然后一个可以中继给另一个：

```
void findByProperties(Parameter... p) {
    findByProperties(Arrays.asList(p));
}

void findByProperties(List<Parameter> p) {
    . . .
} 
```

然后，您可以`findByProperties`使用对象的可变参数列表`Parameter`或`List<Parameter>`参数进行调用。using`Arrays.asList`不会创建新数组；它只是将现有数组包装在一个`List`实现中；因此，这比`Parameter[]`从列表中创建一个新数组要少。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T15:37:36.433

方法可以声明一个接受零到多个参数的参数，即所谓的 var-arg 方法。

var-arg 参数使用 sintax 类型... 例如：

doSomething(int... x){}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-30T15:51:33.863

findByProperties(参数... p);

你可以调用方法 findByProperties(); (或) findByProperties(p)；

但不是 findByProperties(p,p,p);

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-30T15:39:02.573

在 Java 中，您还可以为具有可变参数的方法传入一个数组。所以可以使用`toArray`参数列表的方法将 转换`List<Parameter>`为 a `Parameter[]`，可以直接传给`findByProperties`：

```
for (ArrayList<Parameter> p : list){
    Parameter[] param = p.toArray(new Parameter[p.size()])
    findByProperties(param);
} 
```

如果你也需要在其他地方这样做，你也可以做一个方便的方法：

```
public ... findByProperties(List<Parameter> p) {
    return findByProperties(p.toArray(new Parameter[p.size()]));
} 
```

# c# - WebService 发送请求

> ID：14607652
> 
> 赞同：0
> 
> 时间：2013-01-30T15:32:07.487
> 
> 标签：c#, asp.net, web-services

我想问您是否可以使用网络服务向程序（Windows 窗体）发送请求？

我已经使用过网络服务，但只是将请求发送到服务器并得到答案，但现在我需要使用 asp.net 创建一个网站，我将在其中显示有关客户端计算机的一些信息，但他将能够像网站中的“刷新”按钮一样按下，然后网站（网络服务）将向客户端发送请求到已安装的程序（Windows 窗体应用程序），并将数据发送回服务器。

我希望上面的例子能很好地帮助你理解我需要什么。

谢谢你。

# ruby-on-rails - Rails 3.2.11 中带有模型子目录的单表继承

> ID：14607653
> 
> 赞同：4
> 
> 时间：2013-01-30T15:32:07.883
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2, single-table-inheritance, rails-models

我有一个模型`Sport`。使用单表继承我有 2 个其他模型`Cricket`，`Football`所以

```
class Cricket < Sport and class Football < Sport 
```

我将这两个模型放在名为 sports 的模型目录中的子文件夹中。我将类型列添加到`Sport`并将值设置为`Cricket`or `Football`，无论是什么合适的。此外，我能够使用`Cricket.new`or创建对象`Football.new`。

这种结构在 Rails 3.2.6 之前都可以正常工作。

但是现在使用 Rails 3.2.11，子文件夹中的任何模型文件都必须模块化。所以，它现在看起来像这样：

```
module Sports
  class Cricket < Sport 
```

现在，rails 无法加载类`Cricket`或`Football`单独加载。所以，`Cricket.new`还是`Football.new`不行。如果我这样做`Sports::Cricket.new`，那么这对我来说是个问题，因为类型列必须是类名，即`Sports::Cricket`。

我应该在 Rails 3.2.11 中做什么才能使单表继承起作用？我不想将值`Sports::Cricket`放在我的类型列中。另外，我不想删除子目录结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T16:12:06.510

我自己也处理过类似的问题。请参阅[How to reload files in app/models/subdirectory in dev environment for STI](https://stackoverflow.com/questions/14711505/how-to-reload-files-in-app-models-subdirectory-in-dev-environment-for-sti/14711506#14711506)。基本上，您需要`require_dependency`在父类或配置文件中的某个地方初始化和重新加载子类。这是一个 Rails 延迟加载的事情，[他们似乎不想改变它](https://github.com/rails/rails/issues/8699)。我发现[Alex Reisner 的帖子](http://www.alexreisner.com/code/single-table-inheritance-in-rails)也非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:45:21.250

你试过用这个吗？

```
config.autoload_paths += Dir[Rails.root.join('app', 'models', '{**}')] 
```

# javascript - 如何使用 Angular.js 在另一个 ng-repeat 中为 ng-repeat 设置过滤器

> ID：14607661
> 
> 赞同：0
> 
> 时间：2013-01-30T15:32:24.943
> 
> 标签：javascript, angularjs

我想通过仅显示当月的结果来设置第二个 ng-repeat 的过滤器来处理第一个。`bookings`并且 `booking.monthDate`类似于`month`

感谢您帮助在这里使用 Angular.js 获得最佳实践

```
 .dataContainer{"ng-repeat"=>"month in months"}
          %h2
            %span.monthResa {{month}}

          .monthDetailContainer
            .fiche-inner{"ng-repeat"=>"booking in bookings | filter: ??? "} 
```

*注意：这段摘录在 HAML 中，但没关系，因为我使用预编译器来获取 .html*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T11:23:58.333

Angular 非常聪明:)

```
booking in bookings | filter: month 
```

# java - 我可以使用 HSQLDB 进行 junit 测试克隆 mySQL 数据库吗

> ID：14607665
> 
> 赞同：3
> 
> 时间：2013-01-30T15:32:36.660
> 
> 标签：java, mysql, hsqldb

我正在开发一个spring webflow项目，我在想我可以使用HSQLDB而不是我的mysql来进行junit测试吗？

如何将我的 mysql 数据库克隆到 HSQLDB

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T16:03:55.300

如果您使用的是 spring 3.1 或更高版本，则可以使用 spring 配置文件来实现这一点。未设置活动配置文件时会加载默认配置文件。

```
<beans profile="dev">
    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
    destroy-method="close"> 
        <property name="driverClass" value="org.hsqldb.jdbcDriver" />
        ...other datasource properties also create or drop db
    </bean>
</beans>
<beans profile="default">
    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"
    destroy-method="close"> 
        <property name="driverClass" value="com.mysql.jdbc.Driver" />
        ...other datasource properties
    </bean>
</beans> 
```

在您的单元测试中，通过添加注释来设置活动配置文件。

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration("classpath:app-config.xml")
@ActiveProfiles("dev")
public class TransferServiceTest { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T23:56:05.833

除了建议之外，请考虑根据您的需要，HSQL 和 MySQL 没有相同的功能，如合并连接和其他 SQL 非标准功能。因此（在我们的例子中），我们总是在嵌入式 Mysql 上运行我们的测试。

嵌入式 MySQL 随 mysql-connector-mxj 一起提供。如果你使用 Maven，你可以像这样得到它：

```
<dependency>
   <groupId>mysql</groupId>
       <artifactId>mysql-connector-mxj</artifactId>
       <version>5.0.12</version>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-mxj-db-files</artifactId>
        <version>5.0.12</version>
</dependency> 
```

一旦驱动程序在您的项目路径上，您就可以从 Java 启动数据库。在我们的例子中，我们有这个启动数据库的实用程序类：

```
import java.io.File;
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

import org.apache.commons.io.FileUtils;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.mysql.management.MysqldResource;
import com.mysql.management.MysqldResourceI;

public class EmbeddedMySQLDb {
    protected Logger logger = LoggerFactory.getLogger(this.getClass());

    private MysqldResource mysqldResource;
    private String baseDatabaseDir = System.getProperty("java.io.tmpdir");
    private String databaseName = "test_db_" + System.nanoTime();
    private int port = 13306;
    private String username = "root";
    private String password = "password";

    /**
     * Starts the mysql database
     * @return
     */
    public void startDatabase() {
        if (logger.isDebugEnabled()) {
            logger.debug("=============== Starting Embedded MySQL using these parameters ===============");
            logger.debug("baseDatabaseDir : " + baseDatabaseDir);
            logger.debug("databaseName : " + databaseName);
            logger.debug("host : localhost (hardcoded)");
            logger.debug("port : " + port);
            logger.debug("username : " + username);
            logger.debug("password : " + password);
            logger.debug("=============================================================================");
        }

        File databaseDir = new File(new File(baseDatabaseDir), databaseName);

        mysqldResource = new MysqldResource(databaseDir);

        Map<String, String> database_options = new HashMap<String, String>();
        database_options.put(MysqldResourceI.PORT, Integer.toString(port));
        database_options.put(MysqldResourceI.INITIALIZE_USER, "true");
        database_options.put(MysqldResourceI.INITIALIZE_USER_NAME, username);
        database_options.put(MysqldResourceI.INITIALIZE_PASSWORD, password);

        mysqldResource.start("embedded-mysqld-thread-" + System.currentTimeMillis(), 
                             database_options);

        if (!mysqldResource.isRunning()) {
            throw new RuntimeException("MySQL did not start.");
        }

        logger.info("MySQL started successfully @ " + System.currentTimeMillis());

    }

    /**
     * Shutdowns the mysql database
     * @return
     */
    public void shutdownDatabase() {
        mysqldResource.shutdown();
        if (mysqldResource.isRunning() == false) {
            logger.info(">>>>>>>>>> DELETING MYSQL BASE DIR [" + mysqldResource.getBaseDir() + "] <<<<<<<<<<");
            try {
                FileUtils.forceDelete(mysqldResource.getBaseDir());
            } catch (IOException e) {
                logger.error(e.getMessage(), e);
            }
        }
    }

    //-------------------------------------------------------------------------
    /**
     * @return the baseDatabaseDir
     */
    public final String getBaseDatabaseDir() {
        return baseDatabaseDir;
    }

    /**
     * @param baseDatabaseDir the baseDatabaseDir to set
     */
    public final void setBaseDatabaseDir(String baseDatabaseDir) {
        this.baseDatabaseDir = baseDatabaseDir;
    }

    /**
     * @return the databaseName
     */
    public final String getDatabaseName() {
        return databaseName;
    }

    /**
     * @param databaseName the databaseName to set
     */
    public final void setDatabaseName(String databaseName) {
        this.databaseName = databaseName;
    }

    /**
     * @return the port
     */
    public final int getPort() {
        return port;
    }

    /**
     * @param port the port to set
     */
    public final void setPort(int port) {
        this.port = port;
    }

    /**
     * @return the username
     */
    public final String getUsername() {
        return username;
    }

    /**
     * @param username the username to set
     */
    public final void setUsername(String username) {
        this.username = username;
    }

    /**
     * @return the password
     */
    public final String getPassword() {
        return password;
    }

    /**
     * @param password the password to set
     */
    public final void setPassword(String password) {
        this.password = password;
    }   
} 
```

要在创建后连接到数据库，您只需使用如下所示的数据库 url：

`String url = "jdbc:mysql:mxj://localhost:" + port + "/" + dbName;`

问候，

# ios4 - UIMenuController didDismiss 方法？

> ID：14607671
> 
> 赞同：1
> 
> 时间：2013-01-30T15:32:54.923
> 
> 标签：ios4, uitableview, ios5, uimenucontroller

我有一个`UITableView`具有 didSelectRow 方法的...它创建`UIMenuController`并显示它。

目前，它可以正常工作，但是当 UIMenuController 关闭时，我想调用 `[tableView1 deselectRowAtIndexPath:path1 animated:YES];`

```
NSIndexPath *path1;
UITableView *table1;
#pragma maek - Table View
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    path1 = indexPath;

    tablview1 = tableview;

        CGRect location = [tableView rectForRowAtIndexPath:indexPath];

    location.origin.y = location.origin.y+30;

    [self becomeFirstResponder];

    UIMenuItem *menuItem = [[UIMenuItem alloc] initWithTitle:@"View Item" action:@selector(viewItem:)];
    UIMenuItem *menuItem1 = [[UIMenuItem alloc] initWithTitle:@"Edit Item" action:@selector(editItem:)];
    UIMenuItem *menuItem3 = [[UIMenuItem alloc] initWithTitle:@"Cancel" action:@selector(cancelSubMenu:)];

    UIMenuController *menuController = [UIMenuController sharedMenuController];
    [menuController setTargetRect:location inView:self.view];
    menuController.menuItems = [NSArray arrayWithObjects:menuItem, menuItem1,menuItem3, nil];

    menuController.arrowDirection = UIMenuControllerArrowUp;

    [menuController setMenuVisible:YES animated:YES];
}

-(IBAction)cancelSubMenu:(id)sender 
{
    [tableView1 deselectRowAtIndexPath:path1 animated:YES]; 
}

-(BOOL)canBecomeFirstResponder 
{
    return YES; 
}

-(BOOL)canPerformAction:(SEL)action withSender:(id)sender 
{
    if(action == @selector(viewItem:)){return YES;}
    if(action == @selector(editItem:)){return YES;}
    if(action == @selector(cancelSubMenu:)){return YES;}

    return NO; 
} 
```

当用户点击该行上的取消按钮时，`UIMenuController`该行被正确取消选择。但是，当用户点击屏幕上的其他任何位置时，会`UIMenuControlller`关闭但仍选择该行。

是否有某种 didDismiss`UIMenuController`方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T23:18:18.227

将`UIMenuController`在它隐藏之后发布一个通知 called `UIMenuControllerDidHideMenuNotification`，您可以订阅此通知以调用一个方法，该方法反过来调用`deselectRowAtIndexPath`您的表格视图。例如：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(yourMethodHere) name:UIMenuControllerDidHideMenuNotification object:nil]; 
```

在 Swift 5 中：

```
NotificationCenter.default.addObserver(self,
                                       selector: #selector(self.receiveNotification(_:)),
                                       name: UIMenuController.didShowMenuNotification,
                                       object: nil) 
```

并处理通知：

```
@objc func receiveNotification(_ notification: Notification) {
    // do something here
} 
```

# javascript - 用于解析搜索参数的 Javascript RegEx

> ID：14607673
> 
> 赞同：3
> 
> 时间：2013-01-30T15:32:59.670
> 
> 标签：javascript, regex

这是我对堆栈提出的第一个问题，因为，好吧，我真的无法将我的大脑包裹在正则表达式上。我正在尝试操纵大学图书馆的高级目录搜索，以便在顾客搜索几种不同类别的材料类型中的“足球”之后，点击“修改您的搜索”按钮将它们返回到具有所有先前搜索参数的表单记得。这是一个古老的专有系统，因此默认情况下它会将顾客返回到搜索表单，但强制他们从头开始。

但是，位置字符串仍然具有所有参数，所以我想要做的是正则表达式并用 JS 填充表单。这是字符串的样子：

`/search~S13/X?NOSRCH=(football)&m=i&m=g&m=r&m=r&m=1&m=5&m=g&m=o&m=7&m=j&m=i&m=2&m=3&m=q&m=m&SORT=D&SUBKEY=(football)`

我想获取 m 的值，它的出现次数可能比上面的例子多很多。到目前为止，我正在这样做：

```
var str = location.search.match(/m.*?&/g); 
```

返回

```
"m=i&", "m=g&", "m=r&", "m=r&", "m=1&", "m=5&", "m=g&", "m=o&", "m=7&", "m=j&", "m=i&", "m=2&", "m=3&", "m=q&", "m=m&" 
```

您将如何仅获取`i`in的值`m=i&`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:40:53.723

我可以向您展示如何迭代字符串；你可能比我更了解 JavaScript，所以你知道如何从这些结果中创建一个数组：

```
var myregexp = /\bm=([^&]*)/g;
var match = myregexp.exec(subject);
while (match != null) {
    // matched text: match[1], add that to your result array
    }
    match = myregexp.exec(subject);
} 
```

**正则表达式的解释**：

```
\b      # Start at the beginning of an alphanumeric "word"
m=      # (in this case, it's just one letter) "m", followed by "="
(       # Match and capture in group number 1:
 [^&]*  #  any number of characters except ampersands
)       # End of capturing group. 
```

据我所知，没有直接的方法来填充仅包含来自捕获组的匹配项的数组，而不是整个正则表达式的匹配项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:33:21.350

由于这是来自`location.search`您可以这样做：

```
location.search.substring(1).split('&').filter(function (e) {
    return /^m=/.test(e);
}).map(function (e) {
    return e.substring(2); 
}); 
```

第一种是从查询字符串中`substring`删除.`?``location.search`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T17:38:46.233

我可能误解了您的问题，但如果您使用的是 JavaScript，我认为 RegEx 是不必要的。

在任何情况下，首先，获取字符串的搜索部分并将问号从开头切掉，例如，

```
var str = window.location.search.slice(1); 
```

然后，您可以使用 RegEx 路由或简单的 JavaScript 路由。

**正则表达式：**

使用非捕获和捕获组（在括号中）创建您的模式：

```
var regexPttrn = /(?:m\=)([^&=]+)/ig; 
```

第一组用于`?:`查找字符`m=`。一旦找到它们，它就会捕获任何不是和号或等号的连续字符组。

不幸的是，您必须使用该`exec`方法来执行此操作，并且也在循环中，因为`exec`一次只匹配一个并且您需要在使用它之前检查返回的数组是否具有您需要的属性等。

**JAVASCRIPT：**

更好的是，不是使用 RegEx，而是`str`使用 & 符号作为分隔符，按照上面的定义将其拆分为不同属性的数组：

```
var arr = str.split('&'); 
```

所以这将创建一个字符串数组，例如`"m=i"`,`"m=g"`等。

`arr`然后通过运行一个循环并拆分使用等号作为分隔符的每个元素，将其中的每一个拆分为键值对：

```
var pairs = [];
for (var i = 0; i < arr.length; i += 1) {
    pairs[i] = arr[i].split("=");
} 
```

这样，您将获得一个包含几个小数组的数组，其结构如下所示：

```
[
    [ "NOSRCH", "FOOTBALL" ],
    [ "m", "i" ],
    [ "m", "g" ],
    /* and so on, until... */
    [ "EY", "(football)" ]
] 
```

要获取您的值，`m`您可以修改上面的循环以创建一个仅包含这些值的数组，如下所示：

```
var pairs = [],
    m_results = [];
for (var i = 0; i < arr.length; i += 1) {
    pairs.push(arr[i].split("="));
    if (pairs[i][0] === "m") {
        m_results.push(pairs[i][1]);
    }
} 
```

然后该数组`m_results`将包含与`m`您的搜索字符串相关联的所有值。

总共只有 10 行代码，而且我认为比尝试一些受折磨的 RegEx 模式更容易评论、调试和重用，尽管我可以看到 RegEx 会更简洁，如果你能有效地捕获它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T18:07:50.637

```
var s = '/search~S13/X?NOSRCH=(football)&m=i&m=g&m=r&m=r&m=1&m=5&m=g&m=o&m=7&m=j&m=i&m=2&m=3&m=q&m=m&SORT=D&SUBKEY=(football)';
s.split(/&/).map(function(x) {
  return x.split(/=/);
}).filter(function(x) {
  return x[1] == 'i';
}); // => [['m', 'i'], ['m', 'i']] 
```

# c++ - 从视频中提取背景场景

> ID：14607674
> 
> 赞同：0
> 
> 时间：2013-01-30T15:33:01.763
> 
> 标签：c++, opencv, qt-creator

我正在使用 Qt 和 opencv 进行视频处理项目。作为处理步骤，我需要从人类经过的视频（实时流）中提取背景。我需要知道 Opencv 是否具有从视频中提取静态对象的内置函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T20:02:54.187

看看[这个 OpenCV 类](http://docs.opencv.org/modules/video/doc/motion_analysis_and_object_tracking.html#backgroundsubtractormog2)。

```
cv::Mat original;     // your frame
cv::Mat foreground;   // your foreground
cv::Mat background;   // your background

cv::BackgroundSubtractorMOG2 mog;

mog.history = 150;            // How many frames should be used for calculation
mog.nShadowDetection = false; // There are a lot of parameters to adjust

mog(original,foreground,0.01);  // Binary foreground saved in "foreground"

mog.getBackgroundImage(background); // Output the current background of the model 
```

该类实现了高斯混合模型背景减法，如下所述：

Z.Zivkovic，改进的背景减除自适应高斯混合模型，国际会议模式识别，英国，2004 年 8 月， [http:](http://www.zoranz.net/Publications/zivkovic2004ICPR.pdf) //www.zoranz.net/Publications/zivkovic2004ICPR.pdf 。该代码非常快并且还执行阴影检测。每个像素调整高斯分量的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-03T19:09:23.190

最快最简单的方法是使用前几帧的中值

您可以使用第一个背景图像的更新过程来考虑新的静态对象更复杂的方法，例如针式分量分析-高斯混合-自组织背景减法和 CNN 可以解决您的问题，但不适合流式传输，除非您正在使用特殊的硬件 FPGA 或 GPU

# mysql - 在 Godaddy 中使用带有页面的 Amazon RDS DB

> ID：14607675
> 
> 赞同：0
> 
> 时间：2013-01-30T15:33:01.617
> 
> 标签：mysql

目前我的应用程序在 go daddy 上运行，但我想将我的数据库更改为 AMAZON RDS，我只是想知道这是否可能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:36:09.140

是的，但你不应该。GoDaddy 和 Amazon 之间的延迟可能足以严重影响您网站的性能。

如果你打算使用 RDS，你应该在 EC2 中托管。

# python - Pygame - 除非在整个跳跃过程中按住跳跃按钮，否则玩家不会跳跃

> ID：14607682
> 
> 赞同：1
> 
> 时间：2013-01-30T15:33:28.487
> 
> 标签：python, input, pygame

我的播放器设置为在按下空格键时跳跃，
并在释放空格键时将 Y 速度 (yVel) 设置为 0。

这应该会导致我正在寻找的平稳跳跃和跌落，
但是如果我没有在整个跳跃过程中按住空格键（即当他在 yPos = 469 处撞击地面时），出于某种奇怪的原因，
我必须按两次空格键才能让他再次跳跃。
有人可以向我解释为什么会这样吗？

我的代码：

```
class Player:
    def __init__(self,screen,image,xPos,yPos,xVel,yVel):
        self.xPos = xPos
        self.yPos = yPos
        self.xVel = xVel
        self.yVel = yVel
        self.image = image
        self.screen = screen

    def draw(self):
        screen.blit(self.image,(self.xPos,self.yPos))

    def update(self):   

        self.xPos += self.xVel
        self.yPos += self.yVel

        for event in pygame.event.get():
                if event.type == QUIT:
                        pygame.quit()
                        sys.exit()
                if event.type == KEYDOWN:
                        if event.key == K_LEFT:
                            self.xVel = -2
                        elif event.key == K_RIGHT:
                            self.xVel = 2
                        elif event.key == K_SPACE:
                            if self.yPos == 469:
                                self.Jump()         
                        elif event.key == K_DOWN:
                             pass

                if event.type == KEYUP:
                        if event.key == K_LEFT:
                            self.xVel = 0
                        elif event.key == K_RIGHT:
                            self.xVel = 0
                        elif event.key == K_SPACE:
                            self.yVel = 0
                        elif event.key == K_DOWN:  
                            pass

                self.playerGravity()

    def playerGravity(self):
        if self.xPos > 469:
                    self.xPos = 469
                if self.xPos < 0:
                    self.xPos = 0
                if self.yPos > 469:
                    self.yPos = 469
                if self.yPos < 0:
                    self.yPos = 0
                if self.yPos < 469:
                    self.yVel += 1

                print(self.xPos)
                print(self.yPos)

    def Jump(self):
                ##for i in range(10):
                    self.yVel = -20
                    ##break 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:29:05.690

我想这是你的 playerGravity 功能。您需要考虑它在做什么，特别是：

*   这个神奇的数字 469 是什么？为什么将它与 xPos 和 yPos 进行比较？
*   这应该达到什么目的？`self.yPos < 469: self.yVel += 1`

一般来说，您应该编写有意义的函数名和变量名。这意味着用描述其用途的函数来包装所有这些赋值调用。我知道是什么`xPos += 1` *，*但我不知道意图 - 它很容易是一个错字。正确的函数名称 ( `MoveRight(amount)`) 可以避免这种情况。

您还需要学习查明您的代码在哪里“出错” - 您是否检查了`self.yPos`行下的值`elif event.key == K_SPACE:`？调试是每个程序员都必须学习的技能。

这可能不是您问题的直接答案，但我更喜欢教一个人钓鱼而不是给他一条鱼......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T17:05:15.270

我检查了球是否在地板上：

```
if self.yPos > 469:
    self.yPos = 469 
```

我应该说

```
if self.yPos > 469:
    self.**yVel** = 0 
```

因为后一个脚本没有将球的位置保持在 469，而是简单地说没有速度，换句话说，没有移动，但球仍然是自由的。哇，那是一个doozie <_>

# php - 使用 date 和 mktime() 生成日期列表时缺少一个月

> ID：14607685
> 
> 赞同：1
> 
> 时间：2013-01-30T15:33:37.657
> 
> 标签：php, date, datetime

我试图生成月份列表以及月份的年份和第一个日期。

我使用下面的代码，但奇怪的是，二月不见了，三月被重复了 2 次

代码

```
 for ($i = 1; $i <= 12; $i++):

        $year='2013';

        $month_numb = date($year.'-m-01', mktime(0,0,0,$i));

        echo $month_numb.'<br>';

        endfor; 
```

输出

```
2013-01-01
2013-03-01
2013-03-01
2013-04-01
2013-05-01
2013-06-01
2013-07-01
2013-08-01
2013-09-01
2013-10-01
2013-11-01
2013-12-01 
```

有人可以告诉我为什么会这样，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:38:54.383

今天是 1 月 30 日。今年 2 月的日期上升到只有 28 日。 `mktime()`对于未提供的值，使用今天的日期。由于 2 月 30 日无效，`mktime()`转入下一个有效日期 - `01 March 2013`。

更改您的代码

```
for ($i = 1; $i <= 12; $i++):
    $month_numb = date('Y-m-01', mktime(0,0,0,$i, 1, 2013));
    echo $month_numb.'<br>';
endfor; 
```

上面将日期/年份分配给代码，然后对其进行翻译，而不是采用今天的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T15:41:39.473

调用 mktime() 时，月份的默认日期是当月的当前日期（在今天的情况下，它是 30。）因为 2 月 30 日实际上是 3 月 2 日（大部分时间），这就是 mktime(0,0, 0,2) 将返回三月份。

将月份中的某天指定给 mktime，mktime(0,0,0,$i,1)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T15:37:10.617

没有`date`and不是更好`mktime`吗？

```
$year = 2013;
for ( $i = 1; $i <= 12; $i++ ) {
  $month_numb = $year . '-' . $i . '-01';
  echo $month_numb . '<br/>';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T15:36:44.263

使用[日期时间](http://www.php.net/manual/en/book.datetime.php)。它更简单：

```
$datetime = new DateTime('2013-01-01');
for ($i = 1; $i <= 11; $i++)
{
    echo $datetime->format('Y-m-d') . "<br>\n";
    $datetime->modify('+1 month');
} 
```

[看到它在行动](http://codepad.viper-7.com/t0erHI)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-30T15:38:29.300

这是因为今天是 30 号。而且没有 2 月 30 日。明天你会遇到同样的问题，所有月份只有 30 天。2 月 1 日，您的问题将再次消失。

修复，添加第 5 个参数，不要让日期默认为今天的日期：

```
$month_numb = date($year.'-m-01', mktime(0,0,0,$i, 1)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T15:41:37.133

的第五个参数`mktime`将设置为**今天**：（来自[docs](http://php.net/manual/en/function.mktime.php) : `... int $day = date("j") ...`），即 30（一月）。2 月 30 日不存在，所以它去了 3 月。

你会看到它会在 2 月 1 日正常工作。

# java - 如何判断线程是否完成？

> ID：14607687
> 
> 赞同：1
> 
> 时间：2013-01-30T15:33:41.240
> 
> 标签：java, multithreading

> **可能重复：**
> [如何知道其他线程是否已完成？](https://stackoverflow.com/questions/702415/how-to-know-if-other-threads-have-finished)

我有一个为我执行线程的线程池，我如何知道我通过它的所有线程何时完成？

例如：

main.java

```
for (int i = 0; i < objectArray.length; i++) {
        threadPool.submit(new ThreadHandler(objectArray[i], i));
        Thread.sleep(500);
    } 
```

线程处理程序.java

```
public class ThreadHandler implements Runnable {

protected SuperHandler HandlerSH;
protected int threadNum;

public ThreadHandler(SuperHandler superH, int threadNum) {
    this.threadNum = threadNum;
    this.HandlerSH = superH;
}

public void run() {

    //do all methods here

} 
```

我可以在 run() 部分中放入一些东西来设置布尔值吗？我会做一个布尔数组来检查它们什么时候完成吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:34:40.230

当您将作业提交到线程池时，它会返回一个[`Future`实例](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Future.html)。你可以打电话`Future.get()`来看看工作是否已经完成。这实际上类似于在线程池中运行的任务的连接。

`threadPool.awaitTermination(...)`如果线程池已关闭并且您想等待*所有*任务完成，您也可以调用。

通常，当我将一些作业提交到线程池中时，我会将它们的未来记录在一个列表中：

```
List<Future<?>> futures = new ArrayList<Future<?>>();
for (int i = 0; i < objectArray.length; i++) {
    futures.add(threadPool.submit(new ThreadHandler(objectArray[i], i)));
}
// if we are done submitting, we shutdown
threadPool.shutdown();

// now we can get from the future list or awaitTermination
for (Future<?> future : futures) {
    // this throws an exception if your job threw an exception
    future.get();
} 
```

# javascript - JS if (a == b || a == c) 的缩写

> ID：14607688
> 
> 赞同：3
> 
> 时间：2013-01-30T15:33:42.820
> 
> 标签：javascript, if-statement

我正在寻找一种简短的方法来写这个：

```
 if ( variable == 1 || variable == 2 || variable == 6) 
```

我试过了

```
 if (variable == 1 || 2 || 6) 
```

但它似乎不起作用。是否有捷径可寻？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T15:36:09.763

您可以通过将可能的值放入数组并使用来做到这一点[**`Array.indexOf`**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)：

```
if ([1,2,6].indexOf(variable) != -1) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T15:36:42.303

```
if (variable in { 1: 1, 2: 2, 6: 6 }) {
   // ...
} 
```

或者（更安全的方式）：

```
if (({ 1: 1, 2: 2, 6: 6 }).hasOwnProperty(variable)) {
   // ...
} 
```

或者（不是那么短，但也有效）：

```
switch (variable) {
    case 1:
    case 2:
    case 6:
        // ...
        break;
    default:
        // else
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T15:39:11.300

怎么样

```
[1,2,6].indexOf(variable) >= 0 
```

这在 IE<9 中不起作用，但您可以使用 polyfill。
SugarJS[为 indexOf](http://sugarjs.com/api/Array/indexOf)提供了一个 polyfill ，是一个很棒的库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-13T14:40:53.277

`[1,2,6].includes( variable )`

[浏览器支持](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes#browser_compatibility)

# unit-testing - Jenkins 无法成功完成单元测试

> ID：14607690
> 
> 赞同：1
> 
> 时间：2013-01-30T15:33:43.427
> 
> 标签：unit-testing, maven, jenkins

我正在设置我的第一台 Jenkins 服务器来构建和测试现有的 maven 项目，而 jenkins 无法完成单元测试。

当我从命令行运行“mvn clean install”时，所有模块都会构建并通过它们的单元测试。但是，Jenkins 只能运行第一组单元测试（通过），然后以某种方式出错。

我正在使用詹金斯 1.499。

以下是来自顶级 pom 报告插件的一些相关信息：

```
 <plugin>
    <artifactId>maven-surefire-report-plugin</artifactId>
    <version>${maven.surefire.version}</version>
    <configuration>
      <outputDirectory>${basedir}/target/surefire-reports</outputDirectory>
    </configuration>
  </plugin>

Tests run: 61, Failures: 0, Errors: 0, Skipped: 0

mojoSucceeded org.apache.maven.plugins:maven-surefire-plugin:2.13(default-test)
[JENKINS] Recording test results

java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchStandard(Launcher.java:329)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:239)
    at org.jvnet.hudson.maven3.agent.Maven3Main.launch(Maven3Main.java:158)
    at hudson.maven.Maven3Builder.call(Maven3Builder.java:100)
    at hudson.maven.Maven3Builder.call(Maven3Builder.java:66)
    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:326)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.NoSuchMethodError: hudson.tasks.junit.TestResult.parse(JLjava/lang/Iterable;)V
    at hudson.maven.reporters.SurefireArchiver.postExecute(SurefireArchiver.java:148)
    at hudson.maven.Maven3Builder$MavenExecutionListener.recordMojoEnded(Maven3Builder.java:443)
    at hudson.maven.Maven3Builder$MavenExecutionListener.mojoSucceeded(Maven3Builder.java:425)
    at org.apache.maven.lifecycle.internal.DefaultExecutionEventCatapult.fire(DefaultExecutionEventCatapult.java:87)
    at org.apache.maven.lifecycle.internal.DefaultExecutionEventCatapult.fire(DefaultExecutionEventCatapult.java:42)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:228)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.jvnet.hudson.maven3.launcher.Maven3Launcher.main(Maven3Launcher.java:79)
    ... 18 more
channel stopped
ERROR: Failed to parse POMs
hudson.util.IOException2: java.lang.reflect.InvocationTargetException
    at hudson.maven.Maven3Builder.call(Maven3Builder.java:162)
    at hudson.maven.Maven3Builder.call(Maven3Builder.java:66)
    at hudson.remoting.UserRequest.perform(UserRequest.java:118)
    at hudson.remoting.UserRequest.perform(UserRequest.java:48)
    at hudson.remoting.Request$2.run(Request.java:326)
    at hudson.remoting.InterceptingExecutorService$1.call(InterceptingExecutorService.java:72)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: java.lang.Exception: java.lang.reflect.InvocationTargetException
    at org.jvnet.hudson.maven3.agent.Maven3Main.launch(Maven3Main.java:161)
    at hudson.maven.Maven3Builder.call(Maven3Builder.java:100)
    ... 10 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchStandard(Launcher.java:329)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:239)
    at org.jvnet.hudson.maven3.agent.Maven3Main.launch(Maven3Main.java:158)
    ... 11 more
Caused by: java.lang.NoSuchMethodError: hudson.tasks.junit.TestResult.parse(JLjava/lang/Iterable;)V
    at hudson.maven.reporters.SurefireArchiver.postExecute(SurefireArchiver.java:148)
    at hudson.maven.Maven3Builder$MavenExecutionListener.recordMojoEnded(Maven3Builder.java:443)
    at hudson.maven.Maven3Builder$MavenExecutionListener.mojoSucceeded(Maven3Builder.java:425)
    at org.apache.maven.lifecycle.internal.DefaultExecutionEventCatapult.fire(DefaultExecutionEventCatapult.java:87)
    at org.apache.maven.lifecycle.internal.DefaultExecutionEventCatapult.fire(DefaultExecutionEventCatapult.java:42)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:228)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.jvnet.hudson.maven3.launcher.Maven3Launcher.main(Maven3Launcher.java:79)
    ... 18 more
Finished: FAILURE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T10:25:06.097

我遇到了同样的问题：突然 Jenkins 无法记录抛出**NoSuchMethodException**的测试结果。我将它从**1.493**更新到**1.501**（还将*jenkins maven 插件*更新到最新版本），一切正常。

# git - 以交互方式从 bash 脚本执行 git 命令

> ID：14607691
> 
> 赞同：0
> 
> 时间：2013-01-30T15:33:45.550
> 
> 标签：git, bash, shell, cygwin

我有一个从 cygwin 终端执行的 bash 脚本。

部分脚本在文件中列出的每个存储库上执行 git clone：

```
git clone ssh://me@example.net:29418/$1 
```

有时 git 命令会停止并要求用户输入，例如再试一次（y/n）？（因为它不能重命名 HEAD.lock）但是从 shell 脚本执行它只是忽略 git 命令并继续。

如何让 shell 脚本等待并将输入从 shell 传递回 git 命令？

还是有另一种方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:57:55.343

这听起来很像[Git rebase got 'unlink of file failed' 错误](https://stackoverflow.com/questions/3698369/git-rebase-got-unlink-of-file-failed-error)。

GIT_ASK_YESNO 是否在 shell 脚本中未设置或不正确？听起来您希望该 env 变量存在（看起来它的值并不重要，所以 GIT_ASK_YESNO=1 应该就足够了）

# javascript - 闪烁的表格行

> ID：14607695
> 
> 赞同：6
> 
> 时间：2013-01-30T15:34:03.863
> 
> 标签：javascript

我有一个动态表格，并设置条件使表格行背景颜色根据时间比较发生变化。我想添加第二个逻辑，如果单元格不匹配，它将使表格行每 2 秒闪烁/闪烁一次。我知道我需要创建“Flash/Blink”功能，但如何将该功能集成到下面的逻辑中？

```
for (i = 0; i < rows.length; i++) {
    cells = rows[i].getElementsByTagName('td');
    if (cells[10].innerText != cells[11].innterText) {
        rows[i].className = "blink/Flash";
    }
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-30T16:07:06.267

看，没有 JavaScript！

## HTML

```
<table>
    <tr>
        <td>true</td>
        <td class="invalid">false</td>
        <td>true</td>
        <td>true</td>
    </tr>
</table> 
```

## CSS

```
@-webkit-keyframes invalid {
  from { background-color: red; }
  to { background-color: inherit; }
}
@-moz-keyframes invalid {
  from { background-color: red; }
  to { background-color: inherit; }
}
@-o-keyframes invalid {
  from { background-color: red; }
  to { background-color: inherit; }
}
@keyframes invalid {
  from { background-color: red; }
  to { background-color: inherit; }
}
.invalid {
  -webkit-animation: invalid 1s infinite; /* Safari 4+ */
  -moz-animation:    invalid 1s infinite; /* Fx 5+ */
  -o-animation:      invalid 1s infinite; /* Opera 12+ */
  animation:         invalid 1s infinite; /* IE 10+ */
} 
```

## 现场演示

[http://jsfiddle.net/bikeshedder/essxz/](http://jsfiddle.net/bikeshedder/essxz/)

* * *

# 对于那些被迫使用过时浏览器的可怜人

## CSS

```
.invalid-blink {
    background-color: red;
} 
```

## JavaScript

```
$(function() {
    var on = false;
    window.setInterval(function() {
        on = !on;
        if (on) {
            $('.invalid').addClass('invalid-blink')
        } else {
            $('.invalid-blink').removeClass('invalid-blink')
        }
    }, 2000);
}); 
```

## 现场演示

[http://jsfiddle.net/bikeshedder/SMwAn/](http://jsfiddle.net/bikeshedder/SMwAn/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T15:57:13.517

试试这个：

```
<style type="text/css">
   /* styles to make cells red when under row with class "blink" */
   tr.blink td {background-color:#ff0000;}
</style>

var blinking_rows = []; //array to store rows that must blink

if (cells[10].innerText != cells[11].innterText) 
{
   rows[i].className = "blink"; //this makes cells background color red
   blinking_rows[blinking_rows.length] = rows[i]; //saving row DOM object into array
}

//Running a timer that makes the row blinks every 2 seconds by changing their class
window.setInterval(function() 
{
   for(var i = 0, len = blinking_rows.length; i < len; ++i)
      if(blinking_rows[i].className === "blink") //I'm supposing you do not add other classes
         blinking_rows[i].className = ""; //removing class, this makes the row not red anymore
      else
         blinking_rows[i].className = "blink"; //this makes the row red again
}, 2000); 
```

# mysql - 使用 SELECT 查询在 MySQL 中进行计算？

> ID：14607702
> 
> 赞同：1
> 
> 时间：2013-01-30T15:34:16.390
> 
> 标签：mysql, select

您在下面看到的是我为我的软件制作的库存表。我需要用它做很多计算。例如，我需要 pidstk P000007（数量）的总和，其中类型为 3,1 和类型 2,4，然后我想要（类型 3+1）-（类型 2+4）的答案。我怎样才能做到这一点？对不起我的英语。不太擅长。

```
+--------+------------+-----+------+-----------------+
| pidstk | dateup     | qty | type | refno           |
+--------+------------+-----+------+-----------------+
| P00007 | 2013-01-31 |  50 |    4 | 000000000000004 |
| P00007 | 2013-01-03 |  24 |    4 | 000000000000005 |
| P00007 | 2013-01-22 |  40 |    4 | 000000000000006 |
| P00007 | 2013-01-22 |  40 |    4 | 000000000000007 |
| P00007 | 2013-01-22 |  14 |    4 | ref             |
| P00007 | 2013-01-22 |   8 |    1 | ref             |
| P00007 | 2013-01-22 |   3 |    2 | ref             |
| P00007 | 2013-01-22 |   2 |    3 | ref             |
| P00007 | 2013-01-22 |   1 |    3 | ref             |
| P00007 | 2013-01-23 |  10 |    4 | 000000000000008 |
| P00007 | 2013-01-23 |   2 |    4 | 000000000000008 |
| P00007 | 2013-01-23 |  40 |    4 | 000000000000008 |
| P00007 | 2013-01-23 |  40 |    4 | 000000000000008 |
| P00007 | 2013-01-24 |   1 |    4 | 000000000000009 |
| P00007 | 2013-01-31 |  40 |    4 | 000000000000010 |
+--------+------------+-----+------+-----------------+
15 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:37:06.590

你可以使用这样的东西：

```
SELECT
  pidstk,
  sum(case when type in (1,4) then qty else 0 end)-
  sum(case when type in (2,3) then qty else 0 end)
FROM
  yourtable
GROUP BY
  pidstk 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:01:53.630

尝试这个

```
 SELECT
   pidstk,
  sum(case when type in (1,4) then qty else 0 end) as total_1_4 ,
  sum(case when type in (2,3) then qty else 0 end) as total_2_3,
  sum(case when type in (1,4) then qty else 0 end)- sum(case when type in (2,3) then qty else 0 end) as the_difference
  FROM stock
  GROUP BY pidstk 
```

[**演示 SQLFIDDLE**](http://sqlfiddle.com/#!2/f3d1f/4)

# javascript - 在两种颜色范围内为饼图使用渐变颜色

> ID：14607708
> 
> 赞同：4
> 
> 时间：2013-01-30T15:34:27.063
> 
> 标签：javascript, charts, google-visualization

我想指定两种颜色，然后生成这样的饼图：

![饼形图](../Images/746c7ff9d1396989370e2113ab0f4c4f.png)

为了创建示例，我使用了[图表向导](https://developers.google.com/chart/image/docs/chart_wizard)，但它似乎已被弃用，在我们创建的应用程序中，我们使用[饼图](https://google-developers.appspot.com/chart/interactive/docs/gallery/piechart)。有没有办法在饼图中获得这种效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T02:41:42.903

通过新 SVG 饼图的标准配置选项是不可能的。

但是，如果您喜欢这种事情，可以使用 CSS 为饼图的元素着色。CSS 可以根据浏览器等以各种方式创建渐变。有关详细信息，请参阅[此站点](http://css-tricks.com/examples/CSS3Gradient/)。

如果您想为饼图的特定元素着色，您可以使用 Google Chrome 中的开发者工具等工具来帮助追踪特定元素，并使用上述 CSS 重新着色该元素。

这在 IE 中可能无法正常工作（几乎没有）。

然而，总的来说，渐变的使用往往只是吸引眼球，实际上使图表更难阅读（饼图并不重要，饼图[通常不是图表的最佳选择](http://peltiertech.com/WordPress/peltier-loves-pie/)）。

# r - 如何获得 N 值以及皮尔逊相关性？

> ID：14607711
> 
> 赞同：0
> 
> 时间：2013-01-30T15:34:31.460
> 
> 标签：r, correlation

我正在使用下面的代码来计算两个数据集之间的相关图。这段代码运行良好，我得到的结果如下所示：！[在此处输入图像描述]！[在此处输入图像描述][1]。

我还想获得另一张地图，显示在计算每个像素时使用了多少对，所以我得到 N 的长图和相关图。根据 Paul Hiemstra，这个函数给出了 cor 和 N：

```
 cor_withN = function(...) {
      cor_obj = cor.test(...)
       print(sprintf("N = %s", cor_obj$parameter + 2))
       return(data.frame(cor = cor_obj$estimate, N = cor_obj$parameter + 2))
                          }
          cor_withN(runif(100), runif(100))
             [1] "N = 100"
                   cor   N
            cor 0.1718225 100 
```

当我简单地将 cor 替换为 cor_withN 时，出现此错误：

```
 Error in cor.test.default(...) : not enough finite observations 
```

如何在我的代码中暗示这个函数来获得两个相关图和 N 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:32:00.390

**1.错误**

```
Error in cor.test.default(...) : not enough finite observations 
```

根据`corr.test`来源（[http://svn.r-project.org/R/trunk/src/library/stats/R/cor.test.R](http://svn.r-project.org/R/trunk/src/library/stats/R/cor.test.R)），此错误可能出现在两种情况下：

1.  您正在使用 Pearson 相关性并且有少于 3 对有限的观察值。
2.  您正在使用 Kendall 或 Spearman 的相关性并且少于 2 对。

确实，`cor.test(c(1,2), c(2,3))`导致完全相同的错误，同时`cor(c(1,2), c(2,3))`给出了答案。

请注意，`cor.test`用于`complete.cases(x,y)`计算。因此，请查看您的数据 - 某处可能没有足够的配对。

**2.功能**

`cor`返回`numeric`值，您的函数`corr_withN`返回`data.frame`. 所以，看起来你不能简单地一个一个地*替换*。

据我了解，您只需要一个大小矩阵，`1440x720`它将绘制在地图上。在这种情况下，您可以只使用`cor`第一个绘图，并返回用于计算第二个相关性的对数的简单函数。函数本身可以很简单：

```
cor_withN <- function(...) {
  cor.test(...)$parameter+2
} 
```

**更新：评论后**

如果在少于 3 对时`cor_withN`必须返回，则应修改：`NA`

```
cor_withN <- function(...) {
  res <- try(cor.test(...)$parameter+2, silent=TRUE)
  ifelse(class(res)=="try-error", NA, res)
} 
```

此函数尝试计算相关性，如果失败，则返回`NA`或返回对数。

# security - 安全环境中的 CF 和 PDF

> ID：14607713
> 
> 赞同：3
> 
> 时间：2013-01-30T15:34:32.913
> 
> 标签：security, pdf, coldfusion

我用的是CF9。我的问题与在登录时设置会话变量以识别用户和用户权限的管理应用程序有关。根据用户级别，允许查看某些页面而不允许查看其他页面。（我将其称为我的“安全框架”。它包含在根目录中的所有内容中。）

该安全框架由`cfif`CFM 页面顶部的声明和页面底部的结束语句`cfelse`组成`(</)cfif`。如果用户具有该级别权限 - 标准内容，则显示此打开`cfif`和关闭之间的所有内容。`cfif`

某些用户可以上传 PDF 文件，这里没问题。PDF 文件上传到根目录外的文件夹，然后移动并重命名为根目录内的文件夹。

上传时，用户选择类别和子类别等，这些变量在上传过程中插入到SQL数据库中。因此，我有 filePaths 和 fileNames 等在页面上设置动态链接，供用户单击并在浏览器中加载 PDF（受密码保护）。

我有指向`ShowThisPDF.cfm?`带有 URL 变量的动态链接`filePath= #filePath# & fileName = #fileName#`。我已经在页面顶部和底部设置了`ShowThisPDF.cfm`安全框架，并尝试将上传的 PDF 复制到此页面，以便 PDF 显示在浏览器中。

我已经尝试了很多方法来执行此操作`cfdocument`and`cfpdf`和`cfcontent`等。当我读到这是抛出的错误时，它看起来确实到达了上传的文件，但由于安全性，我每次都收到“访问被拒绝”我想的框架。

附带说明一下，在此应用程序的其他地方，我可以从我的 cf 页面创建一个 PDF，`cfdocument`并在页面周围使用安全框架，这非常有效 - 在浏览器中显示 PDF。我的问题是将现有 PDF 加载到具有安全框架的 CFM 页面中 - 这应该允许加载 PDF。

任何人都知道我如何完成上述任务？我讨厌尝试绕过我的安全性，将上传的 PDF“复制”到 CFM 页面中似乎合乎逻辑，该页面将 PDF 包装在安全框架中，然后在浏览器中显示 PDF。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T17:31:49.580

Agree with Dan - I had similar issue. So I ended up doing https: with a windows login and also a ColdFusion Login to Web Application. At end of day - they need 2 logins to get into the system - then they can see the pdf files etc or what they need.

# php - 多个 NuSOAP 客户端导致“未定义索引：_transient”错误

> ID：14607718
> 
> 赞同：2
> 
> 时间：2013-01-30T15:34:50.937
> 
> 标签：php, soap, phpunit, nusoap

我正在使用 0.9.5 并且正在做一些 phpunit 测试。

当我执行第二个测试时，它再次调用 web 服务，我收到了这个错误：

```
Undefined index: _transient

/var/www/dev_folder/nusoap/nusoap.php:227
/var/www/dev_folder/nusoap/nusoap.php:7293 
```

什么时候

```
$client = new nusoap_client($this->_config->URL_Path . $webserviceWSDL, true); 
```

被第二次执行。

我检查了 nusoap.php 并且似乎与全局或静态或单例相关的东西......但我不知道我能做些什么来解决这个问题......

```
$GLOBALS['_transient']['static']['nusoap_base']['globalDebugLevel'] = 9; 
```

需要卸载 nusoap 客户端或类似的东西吗？为什么这个全局变量失败了？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T07:45:39.800

我有同样的问题。评论似乎表明全局变量是试图模拟静态类变量，所以我只是更新了代码以在类中实际使用静态类变量`nusoap_base`。这似乎奏效了。

您可以在[此处查看](https://github.com/developagility/NuSOAP/commit/c51bdd96b993b5a6103428db69b26b25abb4337b)代码。

# android - Android/Adobe air - 是否可以将空气活动嵌入到 android 应用程序中？

> ID：14607721
> 
> 赞同：0
> 
> 时间：2013-01-30T15:34:54.457
> 
> 标签：android, android-activity, air, adobe

我正在开发一个直播 (HLS) 视频播放器，但是内置的 android 视频视图对 JellyBean 4.1/4.2 以下的直播视频没有很好的支持，所以我正在研究使用 adobe air 来处理流视频，但是我还没有找到在我的 Android 应用程序中嵌入 Adob​​e Air 活动的方法 - 我只能创建一个从我的原始应用程序启动的单独的 Air Mobile 应用程序！这不是很理想，所以我想知道是否有一种方法可以将它们都放入一个应用程序中？

顺便说一句，有没有办法将数据从意图传递到 adobe air？我见过的传递 Intent 数据的唯一解决方法是创建一个 url 方案意图过滤器并在 url 参数中传递额外数据，如此处所述[（](http://www.riaspace.com/2011/08/defining-custom-url-schemes-for-your-air-mobile-applications/)同样不理想）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:01:33.543

这是不可能的，因为 Adob​​e Air 不是一项活动。Adobe Air 创建应用程序。

# bash - xargs 和 grep 的内存问题以及文件中的模式

> ID：14607726
> 
> 赞同：0
> 
> 时间：2013-01-30T15:35:00.667
> 
> 标签：bash, memory, grep, find, xargs

在生成文件中，我运行以下命令

```
find SOURCE_DIR -name '*.gz' | xargs -P4 -L1 bash -c 'zcat $$1 | grep -F -f <(zcat patternfile.csv.gz) | gzip > TARGET_DIR/$${1##*/}' - 
```

`patternfile.csv.gz`包含 2M 个条目，解压缩文件大小为 100MB，每个文件`SOURCE_DIR`的压缩文件大小约为 20MB。

但是，每个`xargs`进程消耗超过 6GB 的 RAM。这有意义还是我在这里错过了什么？

谢谢你的帮助。

# ruby-on-rails - 非常简单的 Rspec rails 测试没有通过，它应该在哪里通过

> ID：14607729
> 
> 赞同：0
> 
> 时间：2013-01-30T15:35:19.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, factory-bot, rspec-rails

我在为我的 rails 应用程序创建 rspec 测试时遇到了一些问题。

假设我有一个名为 MyModel 的模型，它具有以下函数，它获取所有具有空文本的 MyModel 的实例

```
self.searchEmtpy:
  self.where(:text => nil)
end 
```

我已经定义了以下测试，它检查具有空文本的新 MyModels 是否应该由前一个函数返回。我使用 FactoryGirl 进行模型创建。

```
describe "get empty models" do
  before do
    @previousModels=MyModel.searchEmtpy
    @newModel=Factory(:myModel, :text => nil)
  end
  it "new empty models should appear" do
    currentModels=MyModel.searchEmtpy
    (previousModels << @newModel).should eq(currentModels)
  end
end 
```

测试很简单，但它不起作用。我不知道为什么，但是，根据我从输出中了解到的情况，在“应该”行上，previousModels 已经包含 newModel，因此测试失败（它包含 @newModel 2 次。我我遗漏了一些明显的东西？“它”里面的指令不是按顺序调用的吗？

为了澄清，以下测试不会失败，它应该：

```
describe "get empty models" do
  before do
    @previousModels=MyModel.searchEmtpy
    @newModel=Factory(:myModel, :text => nil)
  end
  it "new empty models should appear" do
    currentModels=MyModel.searchEmtpy
    (previousModels).should eq(currentModels)
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:41:07.773

```
 self.where(:text => nil) 
```

是`ActiveRecord::Relation`- 查询实际上不会触发，直到您尝试对其执行某些操作（例如迭代它、附加到它等）

在这种情况下，这与您对 的调用发生在同一行`should`，即在工厂创建实例之后。

解决此问题的一种方法是强制评估`before`块中的关系，例如调用`.all`它。

# android - 警报管理器条目

> ID：14607732
> 
> 赞同：1
> 
> 时间：2013-01-30T15:35:25.147
> 
> 标签：android, alarmmanager

我为我的 PendingIntent 设置了警报。现在我想在我的活动中显示这个警报是否设置。

```
Intent service = new Intent(context, MyService.class);
PendingIntent pendingIntent = PendingIntent.getService(context, 0, service, 0);
AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, firstStart, interval, pendingIntent); 
```

有什么方法可以检查是否设置了此警报？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:43:11.137

您无法查询`AlarmManager`以了解是否设置了闹钟。你几乎需要记住自己。您可以将某些内容存储在共享首选项中，以表明您设置了闹钟。但是，一旦手机重新启动，您的闹钟就会消失，因此您还需要在重新启动时重新安排闹钟或清除您的偏好以指示不再设置闹钟。

不幸的是，这是 Android 真正缺乏的东西之一（一种查询`alarmManager`.

# jquery-ui - 为什么 jquery 自动完成在 https（安全页面）上不起作用？

> ID：14607734
> 
> 赞同：2
> 
> 时间：2013-01-30T15:35:31.770
> 
> 标签：jquery-ui, ssl, autocomplete, https

我正在尝试使 jquery 自动完成功能在 https（安全页面）页面上工作，但它没有显示任何下拉列表。我搜索了这个问题，发现它的安全问题。

谁能告诉我如何在 https 页面上打开此自动完成下拉菜单。

这是我的 jquery 自动完成代码：

```
function zipAutoCompletet(prefix) {
  jQuery("#" + prefix + "_zip").autocomplete({
    source: function (request, response) {
      jQuery.ajax({
        url: "http://ws.geonames.org/postalCodeSearchJSON",
        dataType: "jsonp",
        data: {
          style: "full",
          maxRows: 12,
          postalcode_startsWith: request.term
        },
        success: function (data) {
          response(jQuery.map(data.postalCodes, function (item) {
            return {
              label: item.placeName + (item.adminCode1 ? ", " + item.adminCode1 : "") + ", " + item.postalCode + ", " + item.countryCode,
              value: item.postalCode
            }
          }));
          jQuery('.ui-autocomplete').css('width', '188px');
        }
      });
    },
    minLength: 2,
    select: function (event, ui) {
      var myString = new String(ui.item.label);
      var address = myString.split(',')
          jQuery('#' + prefix + '_city').val(address[0]);
      jQuery('#' + prefix + '_city').addClass('activated');
      jQuery('#' + prefix + '_city').trigger('change');
      jQuery('#' + prefix + '_city').parents('.row').removeClass('error-row')
        jQuery('#' + prefix + '_city').parents('.row').addClass('ok-row')
          var countryCode = address[3] ? address[3] : address[2]
              countryCode = jQuery.trim(countryCode);
      var countryName = jQuery('#' + prefix + '_country option[value="' + jQuery.trim(countryCode) + '"]').text()
          jQuery('#countryContainer .jqTransformSelectWrapper span').html(countryName)
            jQuery('#countryContainer .jqTransformSelectWrapper').addClass('selected-jqtranform');
      jQuery('#' + prefix + '_country').parents('.row').addClass('ok-row')
        jQuery('#' + prefix + '_country').parents('.row').removeClass('error-row')
          jQuery('#' + prefix + '_country').val(jQuery.trim(countryCode))
            var stateCode = address[2] ? address[1] : '';
      stateCode = jQuery.trim(stateCode)
        if (countryCode == 'US') {
          var base = base_url;
          base = base.replace("https", "http");
          jQuery.ajax({
            url: base + "/getStateName",
            dataType: "jsonp",
            data: {
              stateCode: stateCode
            },
            success: function (data) {
              stateName = data
                jQuery('#jc_state').val(stateName);
              jQuery('#jc_state').addClass('activated');
              jQuery('#jc_state').parents('.row').removeClass('error-row')
                jQuery('#jc_state').parents('.row').addClass('ok-row')
                  jQuery('#jc_state').trigger('change');
              formValidate();
            }
          });
        } else {
          stateName = stateCode
            jQuery('#jc_state').val(stateName);
          jQuery('#jc_state').addClass('activated');
          jQuery('#jc_state').parents('.row').removeClass('error-row')
            jQuery('#jc_state').parents('.row').addClass('ok-row')
              jQuery('#jc_state').trigger('change');
          formValidate();
        }
      jQuery('#' + prefix + '_zip').parents('.row').addClass('ok-row')
        jQuery('#' + prefix + '_zip').parents('.row').removeClass('error-row');
    },
    open: function () {
      jQuery(this).removeClass("ui-corner-all").addClass("ui-corner-top");
    },
    close: function () {
      jQuery(this).removeClass("ui-corner-top").addClass("ui-corner-all");
    },
    change: function (event, ui) {
      if (ui.item === null) {
        jQuery("#" + prefix + "_zip").parents('.row').removeClass('ok-row');
        jQuery("#" + prefix + "_zip").parents('.row').addClass('error-row');
        $("#" + prefix + "_zip").val('');
      }
    }
  });
} 
```

我将上面的代码用于邮政编码字段。此代码在非 https 页面上运行良好，但当我在 https 页面上尝试时它不显示。

欢迎任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:36:56.127

当我查看他们支持的服务提供商时`jsonp`，以下示例有效

```
$("input").autocomplete({
    source: function (request, response) {
        $.getJSON("http://ws.geonames.org/postalCodeSearchJSON?callback=?", 
          { 'postalcode_startsWith': request.term, maxRows: 12, style: "full" }, 
          function(data) {
              if(data.postalCodes){
                  var x = $.map(data.postalCodes, function(v, i){
                      console.log(v)
                      return {
                          label: v.placeName + ' - ' + v.postalCode, 
                          v: v.postalCode
                      }
                  });
                  response(x);
              }
          }
        );        
    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/k58U5/1/)

# java - 对父类中定义的@RequestMapping 使用多个子控制器

> ID：14607742
> 
> 赞同：1
> 
> 时间：2013-01-30T15:35:52.820
> 
> 标签：java, spring, spring-mvc, controller, abstract

我有一个父类 P ，它定义了一个请求映射，如下所示：

```
public abstract class P {
 @RequestMapping(value = "/a/b/c", method = RequestMethod.POST)
    public String productLink(@RequestParam("abc") String json) throws Exception {
        return getProductLinks(json);
    }
} 
```

我有几个儿童`Controller`班，`ClassImpl`是其中之一：

```
@Controller
public class ClassImpl extends P {
@RequestMapping(value = "/start", method = RequestMethod.GET)
    public String start(@RequestParam(value = "keyword", required = true) String keyword,
            @RequestParam(value = "keywordId", required = true) long keywordId) throws Exception {
     //Something
    }
} 
```

如果我只使用一个子类运行此应用程序，它可以正常工作，但会导致多个子控制器出现问题。

当我运行我的应用程序时，我收到一条错误消息`"Cannot map handler ClassImpl to URL path [/a/b/c]: There is already handler [a.b.c.d.ClassImpl@a92aaa] mapped"`

```
It seems that because of multiple child classes, it is unable to find the controller for this mapping which is understood. 
```

在每个类（或一个单独的类）中定义`@RequestMapping`是唯一的方法吗？我不想在所有地方都放类似的代码。是否有任何解决方法可以将其保留在父类中并继续使用它？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T18:33:38.123

> 在每个类（或一个单独的类）中定义 @RequestMapping 是唯一的方法吗？

简短的回答是肯定的。我个人认为它属于一个单独的类。

无论如何，您为什么要放入`productLink()`父类？它不是一个抽象方法，你也没有覆盖它，所以对我来说它没有多大意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:56:39.327

您不应该在抽象类中使用 @RequestMapping。这个注释是针对真实控制器的，所以是具体的类。

使用抽象类，因为它们打算使用，即分解代码，而不是做工作。

在这里您可以执行以下操作：

```
public abstract class P {

    public String productLink(String json) throws Exception {
       return getProductLinks(json);
    }
} 
```

接着

```
@Controller
public class ClassImpl extends P {

    @RequestMapping(value = "/start", method = RequestMethod.GET)
    public String start(@RequestParam(value = "keyword", required = true) String keyword,
        @RequestParam(value = "keywordId", required = true) long keywordId) throws     Exception {
         //Something
    }

    //here reusing the code from superclass
    @RequestMapping(value = "/a/b/c", method = RequestMethod.POST)
    public String productLink(@RequestParam("abc") String json) throws Exception {
        return super.getProductLinks(json);
    }
} 
```

这添加了一些样板代码，但这是恕我直言的方法。

# php - 更新数量框产品列表 magento

> ID：14607746
> 
> 赞同：1
> 
> 时间：2013-01-30T15:35:57.793
> 
> 标签：php, jquery, ajax, magento

我如何让它工作，所以它与 AJAX 的更新，它在 view.phtml 上做？它现在重新加载整个页面。

我在我的产品列表中添加了一个数量框。这是我在 list.phtml 上添加的内容：

```
<form action="<?php echo $this->getAddToCartUrl($_product) ?>” method="post" id="product_addtocart_form_<?php echo $_product->getId()?>"<?php if($_product->getOptions()): ?> enctype="multipart/form-data"<?php endif; ?>> 
    <?php if(!$_product->isGrouped()): ?> 
        <label for="qty"><?php echo $this->__('Qty') ?>:</label> 
        <input type="text" name="qty" id="qty" maxlength="12" value="<?php echo ($this->getMinimalQty($_product)?$this->getMinimalQty($_product):1) ?>” /> 
    <?php endif; ?> 

    <button type="button" class="button btn-cart” onclick="this.form.submit()">
        <span>    
            <span><?php echo $this->__('Add to Cart') ?></span>
        </span>
    </button> 
</form> 
```

这是我的文件：

list.phtml -> [http://pastebin.com/UJ0YvUq9](http://pastebin.com/UJ0YvUq9) view.phtml -> [http://pastebin.com/7pQtYvfe](http://pastebin.com/7pQtYvfe)

希望社区可以帮助我！

你将成为天才。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:42:47.767

最好的方法是使用 jQuery ajax。当然，自从提交表单以来，您的代码正在重新加载页面，这就是您正在编程的内容：)

由于 view.phtml 有一个完整的其他结构和绑定来更新购物车和更新数量的操作，我们必须在列表模板中添加一些东西并编写一些 jQuery。

将 jQuery ajax（发布！这很重要）调用添加到购物车 url 并附加当前产品数据，最好这样`$('button').click()`做并`event.preventDefault()`防止页面重新加载。检索错误或成功通知并在产品上显示更新的数量，还请注意在您网站的标题或其他位置更新迷你购物车（如果显示）。

在使用数量和其他必需的产品选项发布后，该产品将被添加到购物车中。

# c# - 单声道自动加载或自动命名空间/类引用

> ID：14607747
> 
> 赞同：0
> 
> 时间：2013-01-30T15:35:59.873
> 
> 标签：c#, compilation, mono

我是 Mono 的新手，刚刚安装并正在尝试进行基本设置。

**你好.cs：**

```
using System;
using Customz;

public class Hello
{
    public static int Main(string[] args)
    {
        Console.WriteLine( "Hello world! Customz.Beko.Wally = " + Beko.Wally() );
        Console.ReadKey();

        return 0;
    }
} 
```

**Customz/Beko.cs：**

```
namespace Customz
{
    public class Beko
    {
        public static int Wally()
        {
             return 15;
        }
    }
} 
```

基本上，我之前在 Unity3D 对 MonoDevelop 和 Visual Studio 的改编中一直在使用 C#。

我记得，在编译时，所有类/命名空间在被请求时都会被自动引用。另外，无论它们在项目目录/子目录中的位置有多深，都会被查找。

编译这个：

```
mcs "C:\Users\psycketom\Desktop\Mono-C#\test\Hello.cs" 
```

结果是：

> C:\Users\psyketom\Desktop\Mono-C#\test\Hello.cs(2,7)：错误 CS0246：找不到类型或命名空间名称“Customz”。您是否缺少 using 指令或程序集引用？
> 编译失败：1 个错误，0 个警告

好吧，我知道我没有遗漏`using`指令，但我感觉我遗漏了程序集引用。

如何解决此问题并实现类似 Visual Studio 的行为？

### 更新：

我设法通过发出以下命令来编译目录中的所有内容：

```
mcs -out:app.exe "C:\Users\psycketom\Desktop\Mono-C#\test\*.cs" 
```

虽然它有效，但它只包含文件夹中的文件，而不考虑文件夹中的任何子文件夹。

如何使它选择所有文件，包括位于子文件夹中的文件？（我开始认为我可能需要一个 bash 脚本或其他东西）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:28:54.313

您可能希望使用 make、NAnt 或其他构建系统，而不是原始命令行。问题是这样的：

您的项目文件夹有几个文件和几个文件夹。所以你有了

*   Foo.cs
*   酒吧.cs
*   商务/Test.cs
*   商务/Foobar,cs

当您使用`mcs -out:app.exe "C:\Users\psycketom\Desktop\Mono-C#\test\*.cs"`命令行 shell（不是编译器）时，将为`*`您扩展通配符。所以，它扩展为

*   Foo.cs
*   酒吧.cs

大多数 shell 不会递归（可能没有特殊指令？），因为它的成本要高得多，而且通常是出乎意料的行为。

如果您真的决定使用命令行，则必须执行以下操作：

mcs -out:app.exe "C:\Users\psycketom\Desktop\Mono-C#\test*.cs" "C:\Users\psycketom\Desktop\Mono-C#\test\Biz*.cs"

此外，如果您决心使用命令行，您可能想尝试一下 Cygwin 之类的东西。它比使用起来容易一百万倍`cmd.exe`（而且它似乎与 Mono 配合得很好）

我过去使用的另一个想法：您还可以使用 MonoDevelop 之类的东西来管理解决方案和项目文件，这基本上会将您程序中的所有内容链接起来并告诉编译器需要包含哪些内容。`xbuild`除此之外，您可以使用MonoDevelop 制作的工具和解决方案文件轻松地从命令行构建

# c# - C# ReportViewer 2010 - 系列颜色与图例颜色不同

> ID：14607748
> 
> 赞同：0
> 
> 时间：2013-01-30T15:36:02.363
> 
> 标签：c#, winforms, report-viewer2010

我有一个带有柱形图的报告，在上面我做了一个简单的“Iif”，以确保颜色根据分组属性始终保持不变，

系列颜色显示刚刚好，但图例颜色只选择第一项，其余为黑色。 ![样本](../Images/e35ab2887ad39d4b9309a173a21b4e17.png)

我真的不知道发生了什么，有人知道我能做什么吗？

啊，如果我将颜色设置为自动，则图例可以正常工作..不知道为什么它不尊重自定义值，谢谢！

# api - 如何通过 API 检索 Salesforce 页面布局字段属性？

> ID：14607749
> 
> 赞同：1
> 
> 时间：2013-01-30T15:36:03.273
> 
> 标签：api, salesforce, page-layout

**语境：**

*   用 .NET 编码的 Web 界面（非营利组织申请拨款的受让人门户）正在从 Salesforce 页面布局中提取信息。
*   我们用于通过 API 将 Web 界面与 Salesforce 连接的 Salesforce 用户具有“查看全部和编辑全部”权限

**问题：**

就像现在一样，如果在 Salesforce 的页面布局上将字段定义为只读，它仍然可以在网页上进行编辑（我们使用的 Salesforce 用户必须具有“查看全部和编辑所有”权限）

**我们正在努力实现的目标：**

*   如果字段在 Salesforce 页面布局上定义为只读
*   那么 Web 界面页面上的相同字段应该是只读的

**问题：**

为了实现上述目的，我想我需要通过 API 获取页面布局的字段属性。关于如何做到这一点的任何想法？

谢谢！泉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T20:49:38.500

您将需要元数据 API（允许您添加新对象、字段、选项列表值甚至创建类和运行单元测试的 Web 服务集）。

这是 API 指南： http: [//www.salesforce.com/us/developer/docs/api_meta/index.htm](http://www.salesforce.com/us/developer/docs/api_meta/index.htm)

根据您修改布局的频率，您可能会决定“搞砸，我将只使用 Eclipse IDE”。在这种情况下，您将下载所有页面布局（它们是 XML 文件），将您的 C# 应用程序指向它们并让魔法发生。

更高级的是使用迁移工具（基于 Ant / Java 的应用程序，可以编写脚本以定期下载相同的东西）。

超级高级是使用这个 API 指南用 C# 编写它。这不是火箭科学（这里是[页面布局对象的规范，](http://www.salesforce.com/us/developer/docs/api_meta/Content/meta_layouts.htm)这里[是检索元数据的操作的 Java 示例代码](http://www.salesforce.com/us/developer/docs/api_meta/Content/meta_retrieve.htm)......抱歉，不是 C#）。实际上你可能最好看看这个例子：http: [//www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_describelayout.htm](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_describelayout.htm)

看到您可能无论如何都想在某处缓存此信息（我无法想象您的用户来到您的页面，不得不等待 web 服务调用完成，然后呈现他的 UI） - 选择您的毒药。

或在团队中共享工作（1 人开始使用 Eclipse 下载文件，其他人尝试找出 C# 代码以按需检索它们）。

# css - 全尺寸背景图像跨浏览器 CSS

> ID：14607755
> 
> 赞同：0
> 
> 时间：2013-01-30T15:36:10.210
> 
> 标签：css, background, background-image

我一直在尝试使用完整的图像作为背景，我已经使用了所有这些方法：

[http://css-tricks.com/perfect-full-page-background-image/](http://css-tricks.com/perfect-full-page-background-image/)

...并且它们确实可以工作，但是在某些分辨率下，图像会被剪切。是否有人为不使用 Jquery 的完整背景图像提供了一个干净的跨浏览器解决方案？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T15:38:52.190

**[现场演示](http://jsfiddle.net/g4v4hgxp/)**

```
body{
  background: url(bg.jpg) fixed 50% / cover;
} 
```

[需要时记得设置`html, body{ height:100%; }`；对于非`body`元素，您可以删除`fixed`.]

# oracle11g - 将 csv 文件加载到多个 Oracle 表中

> ID：14607756
> 
> 赞同：0
> 
> 时间：2013-01-30T15:36:17.343
> 
> 标签：oracle11g, sql-loader, controlfile

我已经使用`TOADs SQL* Loader Wizard`. 我已经使用指定的以下两个表来加载数据，但是运行后数据只加载到一个表中并生成了一个 dsc 文件。下面是我正在使用的控制文件：

```
LOAD DATA
INFILE '\\ANKH\Logs\production export 2012-12-06\BS7666CSV_001.csv' 
BADFILE '\\ANKH\Logs\production export 2012-12-06\BS7666CSV_001.bad'
DISCARDFILE '\\ANKH\Logs\production export 2012-12-06\BS7666CSV_001.dsc'

INTO TABLE "STREET"
TRUNCATE
WHEN (record_id = '11')
FIELDS TERMINATED BY ','
OPTIONALLY ENCLOSED BY '"' AND '"'
(RECORD_ID,
CHANGE_TYPE,
PRO_ORDER,
USRN,
TYPE,
AUTH_CODE,
STATE,
STATE_DATE,
SURFACE,
CLASS,
VERSION,
START_DATE,
END_DATE,
LAST_UPDATE_DATE,
ENTRY_DATE,
START_X_COORD,
START_Y_COORD,
END_X_COORD,
END_Y_COORD,
TOLERANCE)

INTO TABLE "STREET_DESCRIPTOR"
TRUNCATE
WHEN (record_id = '15')
FIELDS TERMINATED BY ','
OPTIONALLY ENCLOSED BY '"' AND '"'
(RECORD_ID,
CHANGE_TYPE,
PRO_ORDER,
USRN,
DESCRIPTOR,
LOCALITY,
TOWN,
ADMIN_AREA,
LANGUAGE) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T15:49:11.070

我发现我`POSITION(1)`在第二`INTO TABLE`条语句中缺少关键字来将指针重置为记录的开头。

# android - 保存和共享图像 Universal-image-loader

> ID：14607763
> 
> 赞同：1
> 
> 时间：2013-01-30T15:36:27.007
> 
> 标签：android

我正在使用通用图像加载器来显示来自 url 的多个图像，在 ImagePager Activity 中我想添加保存和共享按钮，但是我在哪里尝试编写他们的代码我得到了多个错误？谁能知道我可以在哪里使用这些功能以及它们的最佳代码是什么？

***ImagePagerActivity.java***

```
package com.nostra13.example.universalimageloader;
import static com.nostra13.example.universalimageloader.Constants.IMAGES;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.drawable.BitmapDrawable;
import android.net.Uri;
import android.os.Bundle;
import android.os.Parcelable;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.ProgressBar;
import android.widget.Toast;

public class ImagePagerActivity extends BaseActivity {

DisplayImageOptions options;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.ac_image_pager);

    Bundle bundle = getIntent().getExtras();
    String[] imageUrls = bundle.getStringArray(Extra.IMAGES);
    int pagerPosition = bundle.getInt(Extra.IMAGE_POSITION, 0);

    options = new DisplayImageOptions.Builder()
        .showImageForEmptyUri(R.drawable.ic_empty)
        .resetViewBeforeLoading()
        .cacheOnDisc()
        .imageScaleType(ImageScaleType.IN_SAMPLE_INT)
        .bitmapConfig(Bitmap.Config.RGB_565)
        .displayer(new FadeInBitmapDisplayer(300))
        .build();

    ViewPager pager = (ViewPager) findViewById(R.id.pager);
    pager.setAdapter(new ImagePagerAdapter(imageUrls));
    pager.setCurrentItem(pagerPosition);

}

private class ImagePagerAdapter extends PagerAdapter {

    private String[] images;
    private LayoutInflater inflater;

    ImagePagerAdapter(String[] images) {
        this.images = images;
        inflater = getLayoutInflater();
    }

    @Override
    public void destroyItem(View container, int position, Object object) {
        View rootView = (View) object;
        ImageView imageView = (ImageView) rootView.findViewById(R.id.image);
        BitmapDrawable drawable = (BitmapDrawable) imageView.getDrawable();

        if (drawable != null) {
            Bitmap bitmap = drawable.getBitmap();
            if (bitmap != null) {
                bitmap.recycle();
            }

        }

        ((ViewPager) container).removeView(rootView);
    }

    @Override
    public void finishUpdate(View container) {
    }

    @Override
    public int getCount() {
        return images.length;
    }

    @Override
    public Object instantiateItem(View view, int position) {
        final View imageLayout = inflater.inflate(R.layout.item_pager_image, null);
        final ImageView imageView = (ImageView) imageLayout.findViewById(R.id.image);
        final ProgressBar spinner = (ProgressBar) imageLayout.findViewById(R.id.loading);

        imageLoader.displayImage(images[position], imageView, options, new SimpleImageLoadingListener() {
            @Override
            public void onLoadingStarted() {
                spinner.setVisibility(View.VISIBLE);

            }

            @Override
            public void onLoadingFailed(FailReason failReason) {
                String message = null;
                switch (failReason) {
                    case IO_ERROR:
                        message = "Input/Output error";
                        break;
                    case OUT_OF_MEMORY:
                        message = "Out Of Memory error";
                        break;
                    case UNKNOWN:
                        message = "Unknown error";
                        break;
                }
                Toast.makeText(ImagePagerActivity.this, message, Toast.LENGTH_SHORT).show();

                spinner.setVisibility(View.GONE);
                imageView.setImageResource(R.drawable.ic_error);
            }

            @Override
            public void onLoadingComplete(Bitmap loadedImage) {
                spinner.setVisibility(View.GONE);
            }
        });

        ((ViewPager) view).addView(imageLayout, 0);
        return imageLayout;
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view.equals(object);
    }

    @Override
    public void restoreState(Parcelable state, ClassLoader loader) {
    }

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void startUpdate(View container) {
    }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T01:22:28.633

```
Bitmap mSaveBit = imageLoader.getMemoryCache().get(Constants.IMAGESURLS[pager.getCurrentItem()]);
                    File imageFile = null;
                    if(null==mSaveBit){
                        imageFile =  imageLoader.getDiscCache().get(Constants.IMAGESURLS[pager.getCurrentItem()]);
                     } 
```

你可以试试这个。我成功获得。

# c# - WPF - 在文本框旁边动态添加按钮

> ID：14607765
> 
> 赞同：1
> 
> 时间：2013-01-30T15:36:30.900
> 
> 标签：c#, wpf

我正在动态创建标签、文本框和按钮。我需要 Button 与其右侧的文本框出现在同一行中。

这是我正在使用的代码：

```
 Label lbl = new Label()
    {
        Content = "Some Label",
        HorizontalAlignment = HorizontalAlignment.Left,
        VerticalAlignment = VerticalAlignment.Top,
        HorizontalContentAlignment = HorizontalAlignment.Center,
        VerticalContentAlignment = VerticalAlignment.Center,
        Height = 28,
    };

    TextBox tb = new TextBox()
    {
        Text = "Some Text",
        IsReadOnly = true,
    };

    Button btn = new Button()
    {
        Content = "Click Me",
        HorizontalAlignment = HorizontalAlignment.Left
        Margin = new Thickness(tb.ActualWidth),
    }; 
```

我将按钮边距分配给 TextBox 的右侧，但它仍然出现在文本框下的下一行中。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T15:42:40.370

您可以使用`StackPanel`来解决您的问题：

```
StackPanel spMain = new StackPanel() { Orientation = Orientation.Vertical };

Label lbl = new Label()
  {
      Content = "Some Label",
      HorizontalAlignment = HorizontalAlignment.Left,
      VerticalAlignment = VerticalAlignment.Top,
      HorizontalContentAlignment = HorizontalAlignment.Center,
      VerticalContentAlignment = VerticalAlignment.Center,
      Height = 28,
  };

StackPanel spInner = new StackPanel() { Orientation = Orientation.Horizontal };

TextBox tb = new TextBox()
{
    Text = "Some Text",
    IsReadOnly = true,
};

Button btn = new Button()
{
    Content = "Click Me",
    HorizontalAlignment = HorizontalAlignment.Left,
    Margin = new Thickness(tb.ActualWidth),
};

spInner.Children.Add(tb);
spInner.Children.Add(btn);

spMain.Children.Add(lbl);
spMain.Children.Add(spInner); 
```

您可以查看以下链接以获取更多信息：

[http://msdn.microsoft.com/en-us/library/system.windows.controls.stackpanel.orientation.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.stackpanel.orientation.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:41:51.727

这取决于您放置控件的页面内容是什么，是网格还是其他？

为什么不创建一个堆栈面板，它会根据需要以时尚的方式正确包含您的项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T15:45:18.540

为什么不将所有创建的控件放在 StackPanel 中，并将其方向设置为水平。这样，它们将始终彼此相邻放置。

```
var stPanel = new StackPanel { Orientation = Orientation.Horizontal };
var button = new Button() { ... }
stPanel.Children.Add(button);
//And so on 
```

**编辑：** kmatyaszek 在我前面... :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-24T21:50:12.500

我认为如果您使用 Button 实例中的 Content 方法会更好

```
 private byte _count;
    internal void FillbtnSubCat(Grid grid)
    {
        var myDefinition = new ColumnDefinition();
        var myButton = new Button();
        var myBlock = new TextBlock()
        {
            TextAlignment = TextAlignment.Center,
            TextWrapping = TextWrapping.Wrap,
            Text = "Some Text",
            Margin = new Thickness(5, 10, 5, 10)
        };

        Grid.SetColumn(myButton, _count);
        myButton.Margin = new Thickness(5, 10, 5, 25);
        myButton.MinWidth = 30;

        myButton.Content = myBlock;

        myDefinition.Width = new GridLength(68);
        grid.ColumnDefinitions.Add(myDefinition);
        grid.Children.Add(myButton);
        _count++;
    } 
```

XAML

```
 <Grid Name="Grid1" Height="100" Width="auto">

            </Grid> 
```

# java - Understanding "new" keyword in java

> ID：14607770
> 
> 赞同：2
> 
> 时间：2013-01-30T15:36:44.593
> 
> 标签：java, keyword

I would like to know if somebody knows exactly what happens when the line of code comes to play:

```
class Class{}

class Math extends Class{}

class UseClasses{
public static void main (String[]args)

{

   new Math();  //Line 8
   (Class)new Math();//     Line 9

} 
```

I thoroughly understand that the "new keyword" serves as object instance creator in the heap memory. However in the preceding bit of code you can see that line 9 makes an unusual use of this keyword (new). Line 8 it's ok and compiles fine. but line 9 requires to assign the content to some other references. Thus this implies that each time the cast operand is present, in this case (Class)new Math, a new reference(underscoring reference and not object) is going to be instantiated.

Does it work in this way? If not, could you explain to me why it compiles fine in line #8 and it gives an error in line #9? (obviously due to the casting function not to be put there but why not?)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T15:40:51.790

Since you don't have referencing variable on line 9 compiler doesn't consider this statement to be valid.

Cast is required when you have a referencing variable of a 'more specific' type that the object itself. For example, when you're performing an upcast you don't need it:

```
Class obj = new Math(); 
```

And you need an explicit cast when you're performing downcast:

```
Class obj = new Math();
Math math = (Math) obj; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T15:41:28.110

`(Class)new Math()` does two things:

1.  create a new instance of Math
2.  cast the created Math instance to Class.

Since Math extends Class, every Math instance is a Class instance, and you don't need any cast to assign a Math instance to a variable of type Class. The cast is thus completely useless. And since you don't assign the created Math instance to any variable, the cast is even more useless.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T15:44:25.013

Both lines build a `Math` instance. Since in this case, `Math` is a subclass of `Class` (which is kinda unusual, but okay, I'm playing along).

So line 9, `(Class)new Math();` tells the JVM to forget about the fact it's a specialized instance of `Class` and just treat it like a generic `Class` object. That basically means that if you did:

`Class c = (Class)new Math();` and `Math` had methods not inherited from `Class`, you wouldn't be able to call them on object `c`.

Note however that `c` is still actually an instance of `Math`.

I'm not sure really what the point is in this example, but typically you do this if you want your code work off of the generic definition of an object and not worry about specific implementations. I don't know, the whole example seems goofy to me.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T15:55:36.260

In this particular case it's simply because no assignment is made to a variable on line 9.

# php - 获取 Facebook 空间名称 PHP

> ID：14607775
> 
> 赞同：0
> 
> 时间：2013-01-30T15:37:08.037
> 
> 标签：php, facebook, codeigniter, facebook-graph-api, sdk

有没有办法从 appid 和密钥开始获取 facebook 命名空间？

因为这个，我需要这些信息：

```
$request = $this->CI->facebook->api('/me/APP_NAMESPACE:ACTION,'POST',array(
    $object_type => $url
)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:57:44.863

如果您以应用程序所有者身份登录，大多数应用程序设置都可以通过获取/发布应用程序 ID 来读取和写入：

```
$request = $this->CI->facebook->api('/APP_ID/?fields=namespace');
$namespace = $request['namespace']; 
```

其中一些字段（如命名空间）也是公共的，甚至不需要访问令牌即可查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:54:31.753

是的，您可以通过在应用程序中查询字段来获取命名空间`namespace`，应用程序命名空间似乎是公共的，因此您只需要应用程序 id 即可获取它。

[https://developers.facebook.com/tools/explorer/?method=GET&path=117782344904363%3Ffields%3Dnamespace](https://developers.facebook.com/tools/explorer/?method=GET&path=117782344904363%3Ffields%3Dnamespace)

# php - PHP 很难理解这个函数

> ID：14607784
> 
> 赞同：0
> 
> 时间：2013-01-30T15:37:33.187
> 
> 标签：php, function, user-defined-functions

我有另一个程序员写的这个函数，但他很久以前就退出了。

我试图理解他写的这个函数，但我并不完全理解它。

它从**csv 文件**中获取一个**令牌**，数量应该取决于我选择的数量。但是**force_plaform**变量的作用是什么？还有**$_GET** x 参数和**$_COOKIE** x 参数有什么作用？

 ******```
// Get a purchaselink from a given token (if one exists) and a given csv
function getPurchaseLink($token, $csvfile, $force_platform = "", $quantity = 1)
{
$fp = fopen($csvfile, 'r', true);
$columns = fgetcsv($fp, 1024, ',');

while (($row = fgetcsv($fp, 1024, ","))) {
    $row = array_combine($columns, $row);
    if ($row['purchaseToken'] == $token) {
        $purchaseLink = $row;
        break;
    }
}

// Default to pucharse link
$url = http://www.purchase.com//?p1=zzM5X9k4dF%2BDzrTnixoaKw3Fg7wZ8h5pkjp%2BLEidTXBg40xOjcFj5PtPlQniMskLm0W3ti65mE2KafUifZe9dZAcE&ref=purchase.com&style=146&ga=UA-2689090-1&C1=C01507;1;0&C2=C0508;0;0;
if ($url) {     
  // Convert GET x-parameters to cmp, mkey1 and mkey2 if they are present
  $append = "";
  if((isset($_GET["x-source"])) && ($_GET["x-source"] != "")) {
    $append = "&cmp=source_" . $_GET["x-source"];
    $nextParameter = "x-" . $_GET["x-source"];
    $counter = 1;
    $searching = TRUE;
    while(($searching) && ($counter <= 2)) {
      if((!isset($_GET[$nextParameter])) || ($_GET[$nextParameter] == "")) {
        $searching = FALSE;
      }
      else {
        $append .= "&mkey" . $counter . "=" . str_replace("x-", "", $nextParameter) . "_" . $_GET[$nextParameter];
        $nextParameter = "x-" . $_GET[$nextParameter];
    $counter += 1;
      }
    }
  }
  // Convert COOKIE x-parameters to cmp, mkey1 and mkey2 if they are present and there are no GET x-parameters
  if(($append == "") && (isset($_COOKIE["x-source"])) && ($_COOKIE["x-source"] != "")) {
    $append = "&cmp=source_" . $_COOKIE["x-source"];
    $nextParameter = "x-" . $_COOKIE["x-source"];
    $counter = 1;
    $searching = TRUE;
    while(($searching) && ($counter <= 2)) {
      if((!isset($_COOKIE[$nextParameter])) || ($_COOKIE[$nextParameter] == "")) {
        $searching = FALSE;
      }
      else {
        $append .= "&mkey" . $counter . "=" . str_replace("x-", "", $nextParameter) . "_" . $_COOKIE[$nextParameter];
        $nextParameter = "x-" . $_COOKIE[$nextParameter];
    $counter += 1;
      }
    }
  }
  // Return upclick purchase link   
  return $url . $append;
}

if ($quantity != 1) {
    $url .= "&quantity=" . $quantity;
}

// Pass on tracking parameters from URI query and cookies
$append = "";
foreach($_GET as $parameter => $value) {
    if(strpos($parameter, "x-") === 0 || $parameter == "tracking" || $parameter == "serial" || $parameter == "affiliate") {
        $append .= "&" . $parameter . "=" . $value;
    }
}
if (empty($append)) {
    foreach($_COOKIE as $parameter => $value) {
        if(strpos($parameter, "x-") === 0) {
            $append .= "&" . $parameter . "=" . $value;
        }
    }
}

$append = str_replace("x-tracking", "tracking", $append);
$append = str_replace("x-affiliate", "affiliate", $append);
$append = str_replace("&serial=", "&x-serial=", $append);

return $url . $append;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:45:36.987

该函数正在构建一个查询字符串 (URL) 并返回它。程序调用该 URL 后所做的事情不取决于此代码，而是取决于被调用页面上的代码。此代码仅生成一个 URL。至于`force_plaform`，它似乎根本没有在函数中使用（只是在函数头中）。它是一个未使用的变量。至于`$_GET`and`$_COOKIE`变量，代码只是检查它们是否存在，如果存在则将它们附加到查询字符串中。******

# php - Javascript：如何使用服务器上的 html 文件而不是 URL 来 window.open？

> ID：14607800
> 
> 赞同：2
> 
> 时间：2013-01-30T15:38:26.757
> 
> 标签：php, javascript, forms, popup

是否可以使用服务器上的 html 文件打开一个新窗口？但是无法在浏览器 url 上访问“myfile.html”？

```
<FORM>
<INPUT type="button" value="New Window!" 
onClick="window.open('./publico/myfile.html','mywindow')">
</FORM> 
```

我将 PHP 与 ff 工作区一起使用：C:\workspace\myproject\publico\index.html

或者你有什么建议吗？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T15:41:35.613

不，不像你的例子。`window.open`是 JavaScript 代码，它告诉用户的 Web 浏览器打开一个窗口。用户的 Web 浏览器无法访问您服务器上的文件，除非这些文件可通过 Web 获得，即在 URL 上。

您可以使用 PHP 将文档的内容写入 JavaScript 字符串，然后使用 JavaScript 将该内容添加到新打开的窗口中。

这是一个非常糟糕的 JavaScript 示例，它似乎在 Chrome 中几乎可以工作，但我确信代码可以改进，它可能不是可靠的跨浏览器，而且我不知道足够的 PHP 来编写那个：

```
<script>
var newWindowContent = '<?php echo WHATEVER_PHP_CODE_WILL_WRITE_OUT_THE_HTML_PROPERLY_ESCAPED ?>';
</script>
<FORM>
<INPUT type="button" value="New Window!" 
onClick="var mywindow = window.open(); mywindow.document.getElementsByTagName('html')[0].innerHTML = newWindowContent;">
</FORM> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:45:13.903

不。

网络服务器不知道浏览器是否想在特定窗口中显示文件。这意味着它无法根据此处理权限。

当您希望用户在不满足特定条件的情况下无法访问特定文件时，可以将该文件设为 php 文件，在请求之前设置 cookie，并在该 cookie 时使 php 文件返回 403 禁止错误代码未设置和设置时的内容（请记住，用户可以伪造 cookie）。

# sql - 使用批量插入导入 csv 文件而不指定列名？

> ID：14607807
> 
> 赞同：2
> 
> 时间：2013-01-30T15:38:34.747
> 
> 标签：sql, sql-server-2008-r2

在批量插入之前创建表时，有没有办法不指定列名并使用 csv 文件上的任何列名？我的 csv 文件中有一些列是季度，例如 2012Q2、2012Q3 等。将来，这些列会根据时间而变化，这就是我不想指定列名的原因。如果这是可能的，任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-04-20T10:33:29.383

一种方法是：

1.  在 BigQuery 上删除表
2.  从 CSV 获取列名
3.  使用 CSV 中的列名创建表。PHP示例可以在这里找到：[https](https://github.com/GoogleCloudPlatform/php-docs-samples/blob/master/bigquery/api/src/functions/create_table.php) ://github.com/GoogleCloudPlatform/php-docs-samples/blob/master/bigquery/api/src/functions/create_table.php （字段=您的列名）
4.  导入 CSV

完毕！

# php - 如何在 REST 中使用 PUT 功能

> ID：14607808
> 
> 赞同：0
> 
> 时间：2013-01-30T15:38:35.680
> 
> 标签：php, codeigniter

使用这个 git-hub 库： http: [//github.com/philsturgeon/codeigniter-restserver](http://github.com/philsturgeon/codeigniter-restserver) 如何使用 PUT 功能保存其数据？

```
example: example.com/put/some-data/some-data/... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:54:33.947

您可以使用 ajax 请求来完成，例如

（假设使用 jQuery）

```
$.ajax({
    url: '/index.php/my_controller/somedata',
    type: 'PUT',
    success: function(result) {
        console.log(result);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:47:38.007

您可以像这样使用它：**但要考虑`PUT`不太常用且大多数浏览器不支持的计数**

```
function somename_put() 
        {  
            $data = array('somedata: '. $this->put('some-data'));  
            $this->response($data);  
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:22:04.937

根据这个（链接：[https](https://github.com/philsturgeon/codeigniter-restserver/blob/master/application/libraries/REST_Controller.php#L915) ://github.com/philsturgeon/codeigniter-restserver/blob/master/application/libraries/REST_Controller.php#L915 ），`$this->put`只有在将参数传递给它时才返回（这样才有效：）`$username = $this->put('username')`。但是在`REST_Controller`,`$this->_put_args`中是受保护的，所以你将扩展这个类并可以像这样访问它`$params = $this->_put_args`：

简而言之（这只是一个示例，您可以根据需要对其进行改进）；

```
<?php
// route: /api/users/123
class Users extends REST_Controller
{
    ...

    // update a user's data
    public function user_put() {
        $params = $this->_put_args;

        // you need sanitize input here, "db" is a pseudo
        $username = $db->escape($params['username']);
        $userpass = $db->escape($params['userpass']);

        $db->update(array(
            'username' => $username,
            'userpass' => $userpass
        ), (int) $params['id']);

        if (!$db->error) {
            // suppose right code should be 201 for PUT
            $this->response('Created', 201);
        } else {
            $this->response('Internal Server Error', 500);
        }
    }
}
?>

<script>
// Some ajax library
Ajax("/api/users/123", {
    method: "PUT",
    data: {username:"John", userpass:"new pass"},
    onSuccess: function(){ console.log("Success!"); }
    ...
});
</script> 
```

# node.js - 连接 Node.js 和 openFrameworks

> ID：14607809
> 
> 赞同：1
> 
> 时间：2013-01-30T15:38:38.240
> 
> 标签：node.js, zeromq, openframeworks

连接 Node.js 代码和 openFrameworks(oF) 代码的最佳方式是什么？我认为 zmq 会很好，因为它看起来很容易使用（有很多包装器），而且轻巧快速。然而，openFrameworks 的 zmq 插件 ofxZmq 并不能很好地工作。接收消息时崩溃。

我想要一些尽可能容易使用的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-21T13:19:46.783

我通过 OSC 协议完成了从开放框架客户端到 node.js 服务器的简单通信。它在OF世界非常流行，可以被一堆类似的软件和框架（processing.org、PureData、VVVV、Max/MSP等）读取

在这里，您可以通过 UDP 实现 OSC 的一些不同选择：

[https://nodejsmodules.org/tags/osc](https://nodejsmodules.org/tags/osc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T00:51:28.647

查看[xNodejs](https://github.com/satoruhiga/ofxNodejs)，它附带了几个示例来帮助您入门。

一般来说，大多数“将 X 连接到 openFrameworks”的问题都可以通过查看[ofxAddons.com](http://ofxaddons.com/)来回答，该网站保留了 github 可访问的 openFrameworks 插件列表（每天更新）。

# mysql - 触发器的副本不起作用

> ID：14607815
> 
> 赞同：0
> 
> 时间：2013-01-30T15:38:54.560
> 
> 标签：mysql

我通过生产并在其上使用 mysqldump 创建了一个单独的测试数据库。当我通过复制和粘贴代码重新创建触发器时，它们无法在测试数据库上工作。TOAD 抛出“CREATED_DATE 没有默认值”错误。所以我回到生产环境并测试了触发器，它按预期工作。触发器的目标是设置日期字段的默认值，总共有 2 个，它是您所看到的变体。

从生产

```
 CREATE DEFINER=`root`@`%` TRIGGER `iwebprod`.`CREATED_DATE` BEFORE INSERT ON iwebprod.library_record FOR EACH ROW
    SET NEW.CREATED_DATE = IFNULL(NEW.CREATED_DATE, NOW()); 
```

从测试

```
 CREATE DEFINER=`root`@`%` TRIGGER `iwebprod`.`CREATED_DATE` BEFORE INSERT ON iwebprod.library_record FOR EACH ROW
    SET NEW.CREATED_DATE = IFNULL(NEW.CREATED_DATE, NOW()); 
```

有问题的 DML

```
INSERT INTO LIBRARY_RECORD(LIBRARY_RECORD_ID, NAME, DESCRIPTION, SOURCE, ATTACHMENT_ONLY, CONTENT_TYPE_ID, INTRANET_DISPLAY,
              INTERNET_DISPLAY, ACTIVE_DATE, ARCHIVE_DATE)
VALUES ('5895', 'moowcow', 'rbgsb', 'library/oracle2mysql.exe', '0', '23', '1', '0', '30-Jan-2013', '31-Jan-2013') 
```

我将 TOAD 用于 MySQL，如果有人能解释为什么会发生这种情况或以某种方式注意到代码的不同之处，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:00:35.840

那可能是因为你**没有**在表中设置`NULL = YES`（ `CREATED_DATE`声明`CREATED_DATE`可能是`null`）`LIBRARY_RECORD`

但是当你**插入** `LIBRARY_RECORD`时，你没有插入`CREATED_DATE`

您应该**插入** `CREATED_DATE` 或允许`CREATED_DATE`具有`NULL`价值。

# python - 在树中的每条路径上递归

> ID：14607818
> 
> 赞同：3
> 
> 时间：2013-01-30T15:38:57.213
> 
> 标签：python, recursion, path, tree

我被困在一个涉及项目树的编程问题上。问题本身只是更大问题的子问题（但我不会在这里发布它，因为它并不真正相关）。任何人的问题是：

我正在尝试遍历树中的每条路径并计算相关值。

情况例如在这棵树中：

```
 a
  b     b 
```

现在我应该得到的结果是乘法如下：

离开1 = a * b

离开2 = a * (1-b)

离开3 = (1-a) * b

离开4 = (1-a) * (1-b)

因此，树中较低一级的叶子基本上就是结果（请注意，它们在现实中并不存在，只是概念性的）。

现在，我想递归地执行此操作，但存在一些问题： a 和 b 的值是在遍历期间生成的，但例如 b 的值应该只生成 1 次。所有值都是 0 或 1。如果取节点 A 的左子节点，则在乘法中使用值 A。您使用值 1-A 的正确路径。

此外，树总是完美的，即完整且平衡。

现在我有什么（我用python编程，但它更多的是我对这个问题感兴趣的一般算法）：

```
def f(n):
  if n == 1:
     return [1]
  generate value #(a, b or whatever one it is)
  g = f(n/2)
  h = scalarmultiply(value,g)
  return h.append(g - h) 
```

请注意，g 和 h 是列表。我的一位教授提供了这段代码作为可能的帮助，但我不认为这能达到我想要的效果。至少，它不会给我一个列表 h ，其中包含每个路径的结果。特别是，我不认为它区分`b`和`1-b`。我看错了吗，我应该怎么做？

我在编程方面不是很有经验，所以如果可以的话，试着简单地解释一下:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:20:33.600

尝试这样的事情：

```
def f(element_count):
    if element_count == 1:  #<-------------------------------A
        return [1,] #at the root node - it has to be 1 otherwise this is pointless
    current_value = get_the_value_however_you_need_to()#<----B
    result_so_far = f(element_count/2)  #<-------------------C
    result = []
    for i in result_so_far:#<--------------------------------D
        result.append(i*current_value)
        result.append(i*(1-current_value))
        result.append((1-i)*current_value)
        result.append((1-i)*(1-current_value))
    return result 
```

以下是它的工作原理：

假设您想使用三层金字塔。然后 element_count 将是第三层上的元素数，因此您可以调用`f(4)`. A 处的条件失败，因此我们继续到 B 处生成下一个值。现在在 C 我们调用`f(2)`.

中的过程`f(2)`类似，`f(2)`调用`f(1)`并`f(1)`返回`[1,]`. `f(2)`现在我们开始回到树的最宽处......

我不确定你的讲师在功能结束时得到了什么。for 循环执行您解释的乘法并建立一个列表，然后返回

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:01:33.937

如果我理解正确，你想建立一个像这样的二叉树：

```
 A
     / \
    /   \
   /     \
  B       C
 / \     / \
D   E   F   G 
```

其中，较低级别节点的布尔值（`1`、`0`或它们的 Python 等效项`True`和`False`）是使用以下规则从其父节点和祖父节点的值计算的：

```
D = A and B
E = A and not B
F = not A and C
G = not A and not C 
```

也就是说，每个节点的右后代根据它的逆计算它们的值。您进一步指出，树由一个根值 ( `a`) 和另一个用于根的两个子项 ( `b`) 的值定义。

这是一个函数，它将计算这种树的任何节点的值。树的位置由整数索引定义，就像二叉堆通常一样，节点的父节点`N`是`N//2`，它的子节点是`2*N`and `2*N+1`（根节点是`1`）。它使用记忆字典来避免重复重新计算相同的值。

```
def tree_value(n, a, b, memo=None):
    if memo is None:
        memo = {1:a, 2:b, 3:b} # this initialization covers our base cases

    if n not in memo: # if our value is unknown, compute it
        parent, parent_dir = divmod(n, 2)
        parent_val = tree_value(parent, a, b, memo) # recurse

        grandparent, grandparent_dir = divmod(parent, 2)
        grandparent_val = tree_value(grandparent, a, b, memo) # recurse again

        if parent_dir: # we're a right child, so invert our parent's value
            parent_val = not parent_val

        if grandparent_dir: # our parent is grandparent's right child, so invert
            grandparent_val = not grandparent_val

        memo[n] = parent_val and grandparent_val

    return memo[n] 
```

您可能会注意到，在计算出父级的值之后，祖父级的值将始终存在于 memo 字典中，您可能会稍微提高性能，但我已将其省略，因此代码更清晰。

如果您需要有效地计算同一棵树中的许多值（而不仅仅是一个），您可能希望在某处保留一个永久的备忘录字典，可能作为全局字典中的一个值，由一个`(a, b)`元组键控。

# javascript - 使用 setTimeout() 更改文本

> ID：14607823
> 
> 赞同：0
> 
> 时间：2013-01-30T15:39:08.580
> 
> 标签：javascript, settimeout, innerhtml

基本上我想做的是点击一个链接，让它改变，然后自己改变回来。下面是我正在使用的当前代码。可以在此处找到此代码，但我不知道如何将 setTimeout() 添加到函数中。

```
function changeText(idElement) {
var element = document.getElementById('element' + idElement);
if (idElement === 1) {
    if (element.innerHTML === 'Request') element.innerHTML = 'Request Submitted!';
    else {
        element.innerHTML = 'Request';
    }
  }
} 
```

现在，这允许他们单击该链接，将其更改为“请求提交！” 然后再次单击它以将其更改回“请求”。我怎么能在它上面放一个计时器让它自动切换回“请求”？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:49:22.013

```
function changeText (idElement, reset) {
    var element = document.getElementById('element' + idElement);
    if (idElement === 1) {            
        var newText = (element.innerHTML === 'Request' && !reset) ? 'Request Submitted!' : "Request";
        element.innerHTML = newText; 
        if (element.timer) {
            window.clearTimeout(element.timer);
        }
        if (newText !== 'Request') {
            element.timer = window.setTimeout( function(){ changeText(idElement, true); }, 1000); };   
        }
    }
} 
```

# maven - 将 Apache ServiceMix 4 应用程序部署到 JBoss Application Server 7

> ID：14607827
> 
> 赞同：0
> 
> 时间：2013-01-30T15:39:16.723
> 
> 标签：maven, jboss, cxf, apache-servicemix, dosgi

我有一个独立的[Apache ServiceMix](http://servicemix.apache.org/) 4.4 应用程序，它运行良好。现在，我想在[JBoss Application Server 7](http://www.jboss.org/as7)中部署这个应用程序。我使用[Maven](http://maven.apache.org/)作为项目和依赖管理工具。

我的目标是部署应用程序而不涉及任何代码行，只涉及[maven POM 文件](http://maven.apache.org/pom.html)。我可以添加新的依赖项，更改一些版本（次要）并使用不同的工具。作为第二个目标，我希望将所有[Apache CXF DOSGi](http://cxf.apache.org/distributed-osgi.html)容器功能无缝集成到 JBoss AS 中。

[我认为这是可能的，但我找到了 JBoss 和 ServiceMix 旧版本的信息或类似的](https://community.jboss.org/thread/174136)不完整指南。

有人可以提供更多信息吗？

**编辑**

我在 JBoss 问题跟踪器中发现了一些问题： [Initial runtime support for Karaf based products](https://issues.jboss.org/browse/AS7-5544)

以及一些 JBoss 论坛主题： [Migrating osgi bundles running in Karaf to JBoss 7 as OSGI container](https://community.jboss.org/thread/213147)

我忘了提到我的应用程序正在使用[Apache Karaf](http://karaf.apache.org/) OSGi 运行时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T08:23:17.983

好吧，Servicemix 是容器（Apache Karaf）和许多其他 Apache 项目（如 ActiveMq 和 Camel）以及一些 ServiceMix 专业的“预”设置。那么为什么要在另一个容器中部署这个设置呢？如果您想做这样的事情，请尝试部署 std. JBoss 中的 Apache Camel、ActiveMQ 和 CXF 以及您自己的应用程序。

# android - 捕获触摸事件而不消耗它们

> ID：14607828
> 
> 赞同：2
> 
> 时间：2013-01-30T15:39:20.780
> 
> 标签：android, listview, custom-adapter, touch-event

我很头疼，花了几个小时来解决我的问题，但没有任何合理的结果。

我使用自定义适配器（扩展`ArrayAdapter`）来显示列表视图项。此适配器实现`OnTouchListener`. 还有一个背景选择器，当一个项目被触摸时，它的颜色会发生`OnItemClickListener`变化`ListViewActivity`。

`ACTION_DOWN`我需要的是在适配器中捕获触摸事件（所有这些，不仅仅是）。当返回 false 时，不会捕获`onTouch`连续事件（`ACTION_CANCEL`等）。`ACTION_UP`另一方面，返回 true 会停止调度所有其他事件（例如单击），以便`onItemClick`永远不会触发 ListViewActivity。

我努力在 SO 和其他资源中找到任何可行的解决方案，但没有成功。

一个想法是不担心点击事件和背景。`onTouch`我可以以编程方式设置背景并在操作为时以相同的方式触发点击事件`ACTION_UP`，但`view.performClick()`什么也不做（视图是`onTouch`方法的第一个参数）。

**[编辑]**

为了清楚起见，我想在适配器中处理触摸事件，因为我需要项目中的文本视图在用户触摸它时进行选取。因此，在 中`onTouch`，当动作等于 时`ACTION_DOWN`，我分配`true`给 textview 的 setSelected 属性，因此分配给`false`when`ACTION_CANCEL`或`ACTION_UP`。

有什么建议么？

提前致谢。

# c#-4.0 - 因为我可以导出 GridControl2 GridControl1 和团结？

> ID：14607836
> 
> 赞同：0
> 
> 时间：2013-01-30T15:39:49.377
> 
> 标签：c#-4.0, gridview, grid, devexpress

我有`GridControl1`and `GridControl2`，我可以将每个 Grid 导出到。XLS (Excel) 分开。我可以出口`GridControl2` `GridControl1`美联航吗？？

这是我到目前为止所做的，但除非我单独执行，否则我无法导出它们：

```
grid1.ExportToXls (argumentss);
grid2.ExportToXls (argumentss); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T09:58:26.120

有一种东西叫`CompositeLink`。

看看这篇 Devex 文章。它有一个例子。

[http://www.devexpress.com/Support/Center/KB/p/A2730.aspx](http://www.devexpress.com/Support/Center/KB/p/A2730.aspx)

# visual-studio-2010 - .NET4.0 VS2010 中的Oracle.DataAccess 2.112.1.0 参考问题

> ID：14607838
> 
> 赞同：1
> 
> 时间：2013-01-30T15:40:00.670
> 
> 标签：visual-studio-2010, oracle, .net-4.0, odp.net, data-access

我的项目中引用了 Oracle.DataAccess 2.112.1.0 版本。每当我运行项目时，我都会收到错误无法加载程序集。我检查了 .csproj 文件中为引用的 dll 创建的条目，发现引用的 dll 是 Oracle.DataAccess 2.111.7.0。我很确定引用的 dll 是 Oracle.DataAccess2.112.1.0 但不确定为什么项目文件中的条目不同。对此的任何指示都会有所帮助，因为这个问题已经困扰了我很长时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T17:25:01.643

当客户端在其引用中使用 2.112.1.0 时，我发现了同样的问题，但它一直引用机器本地 2.112.3.0。

原因是当安装在 GAC 中时，它会插入一个策略文件 - GAC 级别的配置条目，以将您的 DLL 重定向到其较新版本。即使您将文件放在同一个目录中，.NET 2+ 也会在允许您的应用程序自行解析程序集之前检查 GAC 的任何策略。

我尝试的是在您的 App/Web.config 文件中手动重定向，但我发现这对我不起作用，这在[Redirecting Assembly Versions](http://msdn.microsoft.com/en-gb/library/7wd6ex19.aspx)中有详细说明。

完成此操作后，您可能会遇到此问题：

*   `BadImageFormatException - Image is not of correct format`（或类似的东西）

和/或

*   `Version mismatch - The major/minor version does not match`（或类似的东西）

这些错误表明虽然您的旧程序集现在正在使用中，但它引用的*COM*程序集不是预期的。我的调查发现 Oracle ODP.NET 程序集存储了硬编码的 COM DLL 版本。

对我来说唯一的解决方案是

1.  Un-GAC 应用程序自动引用的 2.112.X.0。
2.  将特定于版本的 COM DLL 复制到不同的目录（如 \LIB）
3.  在构建时将它们复制到构建中

如果这一切都失败了，我建议完全卸载 Oracle ODP.NET，手动删除 Oracle 目录，然后在重新启动后，直接从 MSI 安装旧的 DLL。甲骨文似乎已经在[甲骨文的网站上](http://www.oracle.com/technetwork/developer-tools/visual-studio/downloads/index.html)在线存储了驱动程序的全部历史。

祝你好运！

# php - 更新时 pq_query 错误

> ID：14607839
> 
> 赞同：-1
> 
> 时间：2013-01-30T15:40:01.113
> 
> 标签：php, postgresql, sql-update, updates, case-when

我是 postresql 的新手，我很惭愧地认识到我不确定如何正确执行更新。

每次我尝试 pg_query($update); 它给了我这个：查询失败：错误：无法在只读事务中执行更新。

在此更新之前，我执行了一个选择查询。

select 语句从数据库中检索 50000 行。更具体地说，我正在尝试对 1000 行执行 when /case 更新。查询格式正确，我已经对其进行了测试。

```
$sqlstr = "update abcd set country = CASE" ;
$temp = "";
while($myrow = pg_fetch_assoc($result)) {
    if ($cnt < 1000) {
        $country = exec('geoiplookup '.$myrow['ip']);
        $temp .= " WHEN id = ".$myrow['id']." then '".$country."'";
        $cnt++;
    }
    else {
        $sqlstr = $sqlstr.$temp." END ; ";
        pg_query($sqlstr);
        $temp = "";
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:52:31.763

```
$sqlstr = "update abcd set country = CASE" ;
$temp = "";
while($myrow = pg_fetch_assoc($result)) 
{

    if ($cnt < 1000)
    {
        $country = exec('geoiplookup '.$myrow['ip']);
        $temp .= " WHEN id = ".$myrow['id']." then  '".$country."'"; 
        $cnt++;
    }
    else
    {
        $sqlstr =  $sqlstr.$temp." END ; ";
        pg_query($sqlstr);

        $temp = "";

    }
} 
```

# c# - 如何在 Web API 中抛出异常？

> ID：14607844
> 
> 赞同：42
> 
> 时间：2013-01-30T15:40:13.603
> 
> 标签：c#, .net, exception, asp.net-web-api

如何在 ASP.net Web Api 中引发异常？

下面是我的代码：

```
public Test GetTestId(string id)
{
    Test test = _test.GetTest(id);

    if (test == null)
    {
        throw new HttpResponseException(HttpStatusCode.NotFound);
    }

    return test;
} 
```

我认为我做的不对，我的客户怎么知道这是一个`HTTP 404`错误？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-01-30T15:52:56.047

绝对没问题。

或者，如果您希望提供更多信息（如您所说，允许客户端与常规 404 区分开来）：

```
 if (test == null)
    {
         throw new HttpResponseException(Request.CreateErrorResponse(HttpStatusCode.NotFound, 
"this item does not exist"));
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T15:51:37.463

[这篇](https://docs.microsoft.com/en-us/archive/blogs/youssefm/error-handling-in-asp-net-webapi)博文应该可以帮助您更好地理解 WebAPI 错误处理。

您的代码片段中的内容应该可以工作。如果测试为空且没有响应正文，服务器将向客户端发送 404 Not Found。如果您想要一个响应正文，您应该`using Request.CreateErrorResponse`按照上面博客文章中的说明进行考虑，并将该响应传递给`HttpResponseException`.

# javascript - JavaScript 中的跳转动画

> ID：14607847
> 
> 赞同：1
> 
> 时间：2013-01-30T15:40:15.363
> 
> 标签：javascript, animation, canvas, game-physics

我最新的爱好项目是一个使用 JavaScript 的非常简单的 Jump'n'Run 游戏。我已经编写了一些代码（借助 lostdecadegames 的教程）并阅读了有关 GameLoop 的所有内容。

```
var start = true;

// Create the canvas
var canvas = document.createElement("canvas");
var ctx = canvas.getContext("2d");
canvas.width = 1200;
canvas.height = 480;
document.body.appendChild(canvas);

var jumping = false;
var gravity = 1.5;
var pressed = true;

// Background image
var bgReady = false;
var bgImage = new Image();
bgImage.onload = function () {
    bgReady = true;
};
bgImage.src = "background.png";

// Hero image
var heroReady = false;
var heroImage = new Image();
heroImage.onload = function () {
    heroReady = true;
};
heroImage.src = "hero.png";

// Monster image
var monsterReady = false;
var monsterImage = new Image();
monsterImage.onload = function () {
    monsterReady = true;
};
monsterImage.src = "monster.png";

// Game objects
var hero = {
    speed_x: 50,
    speed_y_up: 50,
    speed_y_down: 50, // movement in pixels per second
    velocity_x: 50,
    velocity_y: 50
};

// Handle keyboard controls
var keysDown = {};

addEventListener("keydown", function (e) {
    keysDown[e.keyCode] = true;
}, false);

addEventListener("keyup", function (e) {
    delete keysDown[e.keyCode];
}, false);

// Update game objects
var update = function (modifier) {
    if(38 in keysDown) { // Player holding up
        jumping = true;
        //hero.y -= hero.speed_y_up * modifier;
    }   
    if (40 in keysDown) { // Player holding down
        hero.y += hero.speed_y_down * modifier;
    }
    if (37 in keysDown) { // Player holding left
        hero.x -= hero.speed_x * modifier;
    }
    if (39 in keysDown) { // Player holding right
        hero.x += hero.speed_x * modifier;
    }

};

// Draw everything
var render = function () {
    if (bgReady) {
        ctx.drawImage(bgImage, 0, 0);
    }

    if (heroReady) {
        if(hero.y > 0 && hero.y < 480 && hero.x <= -32)
            {
            hero.x = hero.x + 1232;
            ctx.drawImage(heroImage, hero.x, hero.y);
            }
        else if(hero.y > 0 && hero.y < 480 && hero.x >= 1200)
            {
            hero.x = hero.x - 1232;
            ctx.drawImage(heroImage, hero.x, hero.y);
            }
        else if(jumping)
            {
            ctx.drawImage(heroImage, hero.x, hero.y-100);
            jumping = false;
            }
        else ctx.drawImage(heroImage, hero.x, hero.y);
    }

    if (monsterReady) {
        ctx.drawImage(monsterImage, monster.x, monster.y);
    }

};

// The main game loop
var main = function () {
    var now = Date.now();
    var delta = now - then;

    update(delta / 500);
    render();

    then = now;
};

// Starting the game!
reset();
var then = Date.now();
setInterval(main, 1); // Execute as fast as possible 
```

如您所见，我已经添加了一个固定重力变量和一些速度变量。英雄的动作非常流畅，所以这没问题。跳跃动画有两个问题：

1.  当继续按下向上键时，英雄会停留在空中。我试图用一些布尔变量来解决这个问题，但我不知道如何让英雄再次崩溃。
2.  现在，我实现了一个“肮脏的技巧”，它使英雄被重新绘制高 50px，但我想要一个平滑的跳跃，这样英雄在上升时会变慢，而在下降时会加速。我查找了很多教程和示例代码，但我太愚蠢了，无法弄清楚如何获得所需的动画。

希望你们能给我一些建议（我不是要最终代码，我只需要一些提示）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:04:07.980

很难准确理解内部的 if 语句在`if (heroReady)`做什么，因为这些数字对我来说没有任何意义，但在我看来，你的问题就在那里。

首先，在我看来，`jumping`应该检查第一个条件。如果第一个条件之一为真，那么他是否在跳跃都无关紧要。不过，我无法轻易判断每个条件何时为真，所以我将假设当玩家举起时，

```
else if(jumping)
{
    ctx.drawImage(heroImage, hero.x, hero.y-100);
    jumping = false;
} 
```

像往常一样被执行。

现在，假设，我认为你的问题`jumping`完全取决于玩家是否坚持，因为一旦`jumping`是真的，它就会变成假的。这是不正确的。

当玩家按下向上键时，跳跃应该设置为真，但当他们移除它时应该设置为假。动画落地时应设置为 false。

你遇到的另一个问题是你实际上并没有使用英雄的属性来渲染它的跳跃位置，你只是在抵消它。也许这只是您在问题解决之前的解决方法，但是很难判断角色何时落地，因为您无法在角色跳跃后开始降低角色（增加 y 值），因为您从未抬起它们通过减小 y 值。

那么我们如何解决这个问题呢？

这是我的建议。由于重构，您可能会在完成时找到更优雅的方法来完成它，但是您现在设置它的方式我认为它会正常工作：

*   当他们按下时立即设置`jumping`，就像你正在做的那样，但前提是`jumping == false`，因为大概你的英雄不能做空中跳跃。
*   在你设置之后`jumping`（并且在同一个 if 语句中），立即更新它们的速度。
*   在你的更新部分，添加另一个 if 来判断玩家是否在跳跃，*无论他们是否按下任何键*。如果是，请根据重力降低它们的动量。然后，检查他们的动量是否*与他们开始跳跃时增加的动量相反*。换句话说，检查他们向下移动的速度是否与开始跳跃时向上移动的速度完全相同。这恰好发生在他们开始跳跃的 y 坐标上。（这比只检查他们的位置更可靠，因为它可以在多个 y 位置工作。）另一种方法是存储一个变量，其中包含他们跳跃时所在的 y 坐标。无论哪种方式，如果他们的跳跃已经结束，请将 jumping 设置为 false。
*   由于您是根据跳跃更新它们的坐标，因此在您的渲染函数中，您可以消除任何跳跃逻辑并仅根据坐标绘制图像。

这些帮助有用？

# java - 如何在 html:form 操作中仅重新加载 div 内容？Struts 1.3

> ID：14607852
> 
> 赞同：0
> 
> 时间：2013-01-30T15:40:37.017
> 
> 标签：java, struts, reload, tiles

我正在使用 Struts 1.3.10、Tiles 和 Hibernate 开发一个 Web 应用程序。

登录表单在正文磁贴内，提交登录按钮时我只需要重新加载正文内容。这是表格：

```
login.jsp 
<div class="login">
    <h2>Login</h2>
    <html:form action="/loginAction" >
        <div><p>User</p> <html:text property="userName" /></div>
        <div><p>Password</p> <html:password property="password" /></div>
        <div><html:submit value="Login"/></div>
    </html:form>
</div> 
```

这是 loginAction：

```
loginAction.java
 @Override
    public ActionForward execute(ActionMapping mapping, ActionForm form,
            HttpServletRequest request, HttpServletResponse response)
            throws Exception {

        loginForm lForm = (loginForm) form;
        String userName = lForm.getUserName();
        String password = lForm.getPassword();

        Boolean ack = Login.checkCredentials(userName, password);
        if(ack){
            HttpSession session = request.getSession();
            session.setAttribute("SessionLogin", "true");
        }else{ 
        }
        return null;
    } 
```

我试图返回 null 因为我不需要转发到另一个页面，我只想重新加载 div 内容（通过 javascript）。但是这个动作的结果是白页。

你知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:55:03.760

使用下面的代码调用将提交 ajax 请求的 javascript 方法。

```
<html:button onclick="javascript:callMyMethodToSubmitAjax()" value="Submit"/> 
```

javascript 看起来像下面的内容

```
<script type="text/javascript">
function callMyMethodToSubmitAjax() {

    var $form = $('#strutsFormHtmlId'); // set your form ID

    $.ajax({
        type: 'POST',
        url: $form.attr('action'),
        data: $form.serialize(), 
        success: function (msg) { 
            alert("success");
        },
        error: function (msg) {
           alert("error");
        }
    });
} 
```

# java - 在服务器端设置 Java Web 服务超时

> ID：14607854
> 
> 赞同：0
> 
> 时间：2013-01-30T15:40:37.347
> 
> 标签：java, web-services, jax-ws

我是 Java Web 服务的新手，在使用 Web 服务配置我的 Java 服务器端应用程序时遇到了一些问题。我将尝试详细解释：

1.  我在 NetBeans 中开发了一个 java web 服务，它接收一个参数作为输入并输出另一个参数。
2.  我的一种 Web 方法应该执行一个耗时且耗费资源的操作，该操作涉及大型 SQL 查询和 CSV 文件生成。
3.  据我测试过此操作，它很容易运行 30 秒到 5 分钟。
4.  问题是这里的一切似乎都有一个中断整个过程的超时：客户端 Web 服务请求、Web 浏览器、tomcat 服务器和服务器 java Web 服务。

我有两个问题：当我说所有这些部分都有一个应该检查和配置的超时时，我说得对吗？如果是肯定的，我想知道在哪里可以修改我的 Web 服务实现中的超时值（我查看了 web.xml 和 sun-jaxws.xml 文件，但不知道要触摸什么以及在哪里触摸。 ..)。

非常感谢你 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:09:34.737

在 Tomcat 的 server.xml 中，您可以在“Connector”元素中找到“connectionTimeout”属性，该属性以毫秒为单位定义了 Tomcat 的超时范围。

但是有比仅仅增加超时更简洁的方法来处理 Web 服务的资源消耗任务。考虑在一个单独的线程中做你令人筋疲力尽的事情，并为你的客户提供检查线程是否完成的可能性。

# jquery - jQuery在页面顶部的某个点隐藏元素而不是浏览器？

> ID：14607855
> 
> 赞同：0
> 
> 时间：2013-01-30T15:40:38.150
> 
> 标签：jquery, scroll, scrollto

我需要从页面顶部的设定点控制一个元素，直到另一个设定点。但仅限于页面内，而不是我目前拥有的浏览器窗口..

```
$(window).scroll(function(){
      if($(this).scrollTop() > 600) $('#plane').fadeOut('slow');
      if($(this).scrollTop() < 600) $('#plane').fadeIn('slow');
    }); 
```

如果页面加载在顶部，这非常有效，但有时页面可能会链接到另一个点，上面的脚本认为它是浏览器的顶部，因此在不应该的时候显示#plane。

所以理想情况下是网站的顶部，而不是浏览器窗口的顶部......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:44:52.830

您还需要检查`scrollTop`页面加载时的值。尝试这个：

```
function checkScrollPosition() {
    $(window).scrollTop() > 600 ? $('#plane').fadeOut('slow') : $('#plane').fadeIn('slow');
});

$(window).scroll(checkScrollPosition); // check on scroll
checkScrollPosition(); // check on load 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:45:01.163

```
 $(window).scroll(checkscroll);  

      function checkscroll(){
          var top = $(window).scrollTop();
          if(top > 600){
            $('#plane').fadeOut('slow');
          }else{
            $('#plane').fadeIn('slow');
          }
      }

   checkscroll(); 
```

# c# - 操作员 '？？' 不能应用于“string”和“int”类型的操作数

> ID：14607857
> 
> 赞同：2
> 
> 时间：2013-01-30T15:40:41.660
> 
> 标签：c#

如果没有值，我无法将“年份”设为当前年份的默认值。

```
var now = DateTime.Now;
Year = int.Parse(bindingContext.ValueProvider.GetValue("Year").AttemptedValue ?? now.Year); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T15:43:59.170

您必须对两个相似的类型应用合并运算符。String 和 int 是不一样的。试试这个：

```
var year = 0;
if(!int.TryParse(bindingContext.ValueProvider.GetValue("Year").AttemptedValue, out year))
    year = DateTime.Now.Year; 
```

在示例中，仅当 AttemptedValue 可解析为整数时才会替换年份，否则将是当前年份。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T15:43:25.253

看起来

```
bindingContext.ValueProvider.GetValue("Year").AttemptedValue 
```

是`string`类型的，`??`运算符期望左/右值都属于同一类型。

作为一个案例，你可以做*now.Year.ToString()*：

```
var now = DateTime.Now;
Year = int.Parse(
             bindingContext.ValueProvider.GetValue("Year").AttemptedValue 
             ?? now.Year.ToString()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T15:43:41.230

使用`.ToString()`：

```
Year = int.Parse(bindingContext.ValueProvider.GetValue("Year").AttemptedValue ?? now.Year.ToString()); 
```

两个变量必须是同一类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T15:46:19.620

问题是您的一个值是一个字符串，一个是一个 int，因此它也无法决定要转换什么

您需要确保类型匹配并且这个问题应该消失。

我会使用 .ToString() 以便它们都是字符串。

# ffmpeg - GStreamer 与 MPEG-TS Video4Linux ATSC/DVB 录制

> ID：14607860
> 
> 赞同：0
> 
> 时间：2013-01-30T15:40:45.363
> 
> 标签：ffmpeg, gstreamer, dvb

我有一个不可能的时间来设置一个过滤图来读取我从我的 DVB video4linux 设备制作的录音。任何帮助将不胜感激。

我是如何录制的：

调谐频道：

```
azap -c ~/channels.conf "Florida" 
```

录制频道：

```
cat /dev/dvb/adapter0/dvr0 > /tmp/test 
```

这是必须进行录制的方式（我不能使用任何 GST DVB 插件来为我做到这一点）。

我使用 tstools 来识别录制的是 TS 流：

```
tstools/bin$ ./stream_type ~/recordings/20130129-202049
Reading from /home/dustin/recordings/20130129-202049
It appears to be Transport Stream 
```

...但是没有 PAT/PMT 帧：

```
tstools/bin$ ./tsinfo ~/recordings/20130129-202049
Reading from /home/dustin/recordings/20130129-202049
Scanning 10000 TS packets

Found 0 PAT packets and 0 PMT packets in 10000 TS packets 
```

通过运行 ts2es，我能够生成单个 ES（基本流）流：

```
tstools/bin$ ./ts2es -pid 97 ~/recordings/20130129-202049 ~/recordings/20130129-202049.es
Reading from /home/dustin/recordings/20130129-202049
Writing to   /home/dustin/recordings/20130129-202049.es
Extracting packets for PID 0061 (97)
!!! 4 bytes ignored at end of file - not enough to make a TS packet
Extracted 219258 of 248113 TS packets 
```

我能够播放 ES 流（即使视频在第一帧被冻结）：

```
gst-launch-0.10 filesrc location=~/recordings/20130129-202049.es ! decodebin2 ! autovideosink
gst-launch-0.10 filesrc location=~/recordings/20130129-202049.es ! decodebin2 ! xvimagesink
gst-launch-0.10 playbin2 uri=file:///home/dustin/recordings/20130129-202049.es 
```

但是，无论我做什么，我都无法打开原始 TS 文件。但是，它完美地在 Mplayer/FFMPEG 中打开（但不是 VLC）。这是 FFMPEG 的输出：

```
ffmpeg -i 20130129-202049

ffmpeg version 0.8.5-4:0.8.5-0ubuntu0.12.04.1, Copyright (c) 2000-2012 the Libav developers
  built on Jan 24 2013 18:03:14 with gcc 4.6.3
*** THIS PROGRAM IS DEPRECATED ***
This program is only provided for compatibility and will be removed in a future release. Please use avconv instead.
[mpeg2video @ 0x9be7be0] mpeg_decode_postinit() failure
    Last message repeated 4 times
[mpegts @ 0x9be3aa0] max_analyze_duration reached
[mpegts @ 0x9be3aa0] PES packet size mismatch
Input #0, mpegts, from '20130129-202049':
  Duration: 00:03:39.99, start: 9204.168844, bitrate: 1696 kb/s
    Stream #0.0[0x61]: Video: mpeg2video (Main), yuv420p, 528x480 [PAR 40:33 DAR 4:3], 15000 kb/s, 30.57 fps, 29.97 tbr, 90k tbn, 59.94 tbc
    Stream #0.1[0x64]: Audio: ac3, 48000 Hz, stereo, s16, 192 kb/s
At least one output file must be specified 
```

这告诉我们视频流的 PID 为 0x61 (97)。

我已经尝试了几天，所以以下只是一些尝试的示例。我将首先提供 playbin2 示例，因为我知道成千上万的人会做出回应，坚持我只是使用它。它不起作用。

```
gst-launch-0.10 playbin2 uri=file:///home/dustin/recordings/20130129-202049

Setting pipeline to PAUSED ...
Pipeline is PREROLLING ...
ERROR: from element /GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstMpegTSDemux:mpegtsdemux0: Could not determine type of stream.
Additional debug info:
gstmpegtsdemux.c(2931): gst_mpegts_demux_sink_event (): /GstPlayBin2:playbin20/GstURIDecodeBin:uridecodebin0/GstDecodeBin2:decodebin20/GstMpegTSDemux:mpegtsdemux0:
No valid streams found at EOS
ERROR: pipeline doesn't want to preroll.
Setting pipeline to NULL ...
Freeing pipeline ... 
```

它[可能]失败了，因为没有指定用于查找视频的 PID（我认为是“EOS”错误）。

自然地，我尝试了以下从解复用 TS 格式开始。我相信这是在没有 PMT 信息的情况下接收 PID 的“es-pids”属性（上面 tstools 说没有），但我也尝试了“程序编号”，以防万一。gst-inspect 表示一个是十六进制，另一个是十进制：

```
gst-launch-0.10 -v filesrc location=20130129-202049 ! mpegtsdemux es-pids=0x61 ! fakesink
gst-launch-0.10 -v filesrc location=20130129-202049 ! mpegtsdemux program-number=97 ! fakesink 
```

输出：

```
gst-launch-0.10 filesrc location=20130129-202049 ! mpegtsdemux es-pids=0x61 ! fakesink
Setting pipeline to PAUSED ...
Pipeline is PREROLLING ...
ERROR: from element /GstPipeline:pipeline0/GstMpegTSDemux:mpegtsdemux0: Could not determine type of stream.
Additional debug info:
gstmpegtsdemux.c(2931): gst_mpegts_demux_sink_event (): /GstPipeline:pipeline0/GstMpegTSDemux:mpegtsdemux0:
No valid streams found at EOS
ERROR: pipeline doesn't want to preroll.
Setting pipeline to NULL ...
Freeing pipeline ...
dustin@dustinmicro:~/recordings$ gst-launch-0.10 -v filesrc location=20130129-202049 ! mpegtsdemux es-pids=0x61 ! fakesink
Setting pipeline to PAUSED ...
Pipeline is PREROLLING ...
ERROR: from element /GstPipeline:pipeline0/GstMpegTSDemux:mpegtsdemux0: Could not determine type of stream.
Additional debug info:
gstmpegtsdemux.c(2931): gst_mpegts_demux_sink_event (): /GstPipeline:pipeline0/GstMpegTSDemux:mpegtsdemux0:
No valid streams found at EOS
ERROR: pipeline doesn't want to preroll.
Setting pipeline to NULL ...
Freeing pipeline ...
dustin@dustinmicro:~/recordings$ gst-launch-0.10 -v filesrc location=20130129-202049 ! mpegtsdemux es-pids=0x61 ! fakesink
Setting pipeline to PAUSED ...
Pipeline is PREROLLING ...
ERROR: from element /GstPipeline:pipeline0/GstMpegTSDemux:mpegtsdemux0: Could not determine type of stream.
Additional debug info:
gstmpegtsdemux.c(2931): gst_mpegts_demux_sink_event (): /GstPipeline:pipeline0/GstMpegTSDemux:mpegtsdemux0:
No valid streams found at EOS
ERROR: pipeline doesn't want to preroll.
Setting pipeline to NULL ...
Freeing pipeline ... 
```

但是，当我尝试 mpegpsdemux（用于程序流 (PS)，而不是传输流 (TS)）时，我会走得更远：

```
gst-launch-0.10 filesrc location=20130129-202049 ! mpegpsdemux ! fakesink

Setting pipeline to PAUSED ...
Pipeline is PREROLLING ...

(gst-launch-0.10:14805): GStreamer-CRITICAL **: gst_event_new_new_segment_full: assertion `position != -1' failed

(gst-launch-0.10:14805): GStreamer-CRITICAL **: gst_mini_object_ref: assertion `mini_object != NULL' failed

(gst-launch-0.10:14805): GStreamer-CRITICAL **: gst_pad_push_event: assertion `event != NULL' failed
Pipeline is PREROLLED ...
Setting pipeline to PLAYING ...
New clock: GstSystemClock

(gst-launch-0.10:14805): GStreamer-CRITICAL **: gst_event_new_new_segment_full: assertion `position != -1' failed

(gst-launch-0.10:14805): GStreamer-CRITICAL **: gst_mini_object_ref: assertion `mini_object != NULL' failed

(gst-launch-0.10:14805): GStreamer-CRITICAL **: gst_pad_push_event: assertion `event != NULL' failed

(gst-launch-0.10:14805): GStreamer-CRITICAL **: gst_event_new_new_segment_full: assertion `position != -1' failed

(gst-launch-0.10:14805): GStreamer-CRITICAL **: gst_mini_object_ref: assertion `mini_object != NULL' failed

(gst-launch-0.10:14805): GStreamer-CRITICAL **: gst_pad_push_event: assertion `event != NULL' failed

(gst-launch-0.10:14805): GStreamer-CRITICAL **: gst_event_new_new_segment_full: assertion `position != -1' failed

(gst-launch-0.10:14805): GStreamer-CRITICAL **: gst_mini_object_ref: assertion `mini_object != NULL' failed

(gst-launch-0.10:14805): GStreamer-CRITICAL **: gst_pad_push_event: assertion `event != NULL' failed

...

Got EOS from element "pipeline0".
Execution ended after 1654760008 ns.
Setting pipeline to PAUSED ...
Setting pipeline to READY ...
Setting pipeline to NULL ...
Freeing pipeline ... 
```

每当我使用 mpegtsdemux 时，我仍然会遇到同样的问题，即使它遵循上面的 mpegpsdemux。

我不明白这一点，因为我什至还没有选择 PID。

我究竟做错了什么？

达斯汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T07:34:51.523

答对了。

事实证明，这个问题主要是由 MPEG-TS 广播流的典型无效帧引起的。通过首先通过 mencoder 运行 TS 文件来重建它（没有重新编码），playbin2 突然工作了：

```
mencoder 20130129-202049 -oac copy -ovc copy -o 20130129-202049.copy 
```

正如 mpegtsdemux 的作者告诉我的，flutsdemux 是较新的，应该比旧的 mpegtsdemux 更受欢迎。flutsdemux 也可以更好地处理这些格式错误的帧。

编辑

不幸的是，这是不正确的。mencoder 虽然被指示复制流，但将其重新打包为 AVI，而不是将其保留为 MPEGTS：

```
$ gst-discoverer-1.0 ~/capture_0051_WXEL.dvb.distill
Analyzing file:///home/dustin/capture_0051_WXEL.dvb.distill
Done discovering file:///home/dustin/capture_0051_WXEL.dvb.distill

Topology:
  container: Audio Video Interleave (AVI)
    audio: AC-3 (ATSC A/52)
    video: MPEG-2 Video

Properties:
  Duration: 0:00:12.696016666
  Seekable: yes
  Tags: 
      encoder: MEncoder svn r34540 (Ubuntu), built with gcc-4.7
      container format: AVI
      audio codec: AC-3 audio
      bitrate: 384000
      video codec: MPEG 2 Video 
```

话虽如此，当我从空中录制时，看起来 PMT 数据包不存在。mplayer/mencoder 似乎可以解决这个问题，而 GStreamer 和 VLC 却在数据上窒息。当我使用同一设备记录 ATSC/NTSC 电缆馈送时，PMT 数据包如预期的那样存在。您可以使用“tstools”包中的“tsreport”确定某些数据包类型的存在：

OTA 提要：

```
$ tsreport -v capture_20130621-0402.trunc | grep PMT
!!! 60 bytes ignored at end of file - not enough to make a TS packet 
```

电缆馈电：

```
$ tsreport -v capture_20130621-1118.ntsc.qam256.Florida.dvb | grep PMT
   31960: TS Packet 171 PID 0230 [pusi] PMT
   73508: TS Packet 392 PID 0230 [pusi] PMT
  101520: TS Packet 541 PID 0230 [pusi] PMT
  164688: TS Packet 877 PID 0230 [pusi] PMT 
```

希望这可以节省一些时间。我受够了。

# c# - WPF 淡入/淡出只运行一次

> ID：14607868
> 
> 赞同：4
> 
> 时间：2013-01-30T15:40:56.707
> 
> 标签：c#, wpf, xaml

我有一个带有故事板和触发器的样式。动画效果很好，但只有一次。

我有 2 个故事板 FadeIn 和 FadeOut。在 EnterActions 中我启动 FadeIn 动画，在 ExitActions 中启动 FadeOut 动画。我用代码开始整个动画

```
TextBlock.StartFade = true; 
```

当我调试上面的代码时，每次点击 StartFade 都是 False（这是正确的）。

那么我做错了什么？

这是 XAML 中的样式。FadingTextBlock 只是一个具有 StartFade 依赖属性的自定义 TextBlock。

```
<Style TargetType="{x:Type Controls:FadingTextBlock}">
    <Setter Property="Visibility" Value="Collapsed" />
    <Setter Property="StartFade" Value="False" />
    <Setter Property="Opacity" Value="1.0" />

    <Style.Resources>
        <Storyboard x:Key="FadeIn">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(Controls:FadingTextBlock.Opacity)" Storyboard.TargetName="{x:Null}">
                <EasingDoubleKeyFrame KeyTime="0:0:0.0" Value="0.0" />
                <EasingDoubleKeyFrame KeyTime="0:0:1.5" Value="1.0" />
            </DoubleAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Controls:FadingTextBlock.Visibility)" Storyboard.TargetName="{x:Null}">
                <DiscreteObjectKeyFrame KeyTime="0:0:0.0" Value="{x:Static Visibility.Visible}"/>
            </ObjectAnimationUsingKeyFrames>
            <BooleanAnimationUsingKeyFrames Storyboard.TargetProperty="(Controls:FadingTextBlock.StartFade)" Storyboard.TargetName="{x:Null}">
                <DiscreteBooleanKeyFrame KeyTime="0:0:1.5" Value="False" />
            </BooleanAnimationUsingKeyFrames>
        </Storyboard>
        <Storyboard x:Key="FadeOut">
            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(Controls:FadingTextBlock.Opacity)" Storyboard.TargetName="{x:Null}">
                <EasingDoubleKeyFrame KeyTime="0:0:0.0" Value="1.0" />
                <EasingDoubleKeyFrame KeyTime="0:0:1.5" Value="0.0" />
            </DoubleAnimationUsingKeyFrames>
            <ObjectAnimationUsingKeyFrames Storyboard.TargetProperty="(Controls:FadingTextBlock.Visibility)" Storyboard.TargetName="{x:Null}">
                <DiscreteObjectKeyFrame KeyTime="0:0:1.5" Value="{x:Static Visibility.Collapsed}" />
            </ObjectAnimationUsingKeyFrames>
        </Storyboard>
    </Style.Resources>
    <Style.Triggers>
        <Trigger Property="StartFade" Value="True">
            <Trigger.EnterActions>
                <BeginStoryboard x:Name="In" Storyboard="{StaticResource FadeIn}" />                    
            </Trigger.EnterActions>
            <Trigger.ExitActions>
                <BeginStoryboard x:Name="Out" Storyboard="{StaticResource FadeOut}" />                    
            </Trigger.ExitActions>
        </Trigger>
    </Style.Triggers>
</Style> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T15:59:11.103

您应该停止使用该`<StopStoryboard>`动作在退出动作中播放已启动的故事板。

```
 <Trigger Property="StartFade" Value="True">
        <Trigger.EnterActions>
            <StopStoryBoard BeginStoryboardName="Out"/>
            <BeginStoryboard x:Name="In" Storyboard="{StaticResource FadeIn}" />                    
        </Trigger.EnterActions>
        <Trigger.ExitActions>
            <StopStoryBoard BeginStoryboardName="In"/>
            <BeginStoryboard x:Name="Out" Storyboard="{StaticResource FadeOut}" />                    
        </Trigger.ExitActions>
    </Trigger> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T11:51:53.963

我最终在代码中使用了本地动画。

在 Xaml 中将 TextBlock 不透明度设置为 0。

```
// Fading animation for the textblock to show that the settings are updated.
DoubleAnimation fadingAnimation = new DoubleAnimation();
fadingAnimation.From = 0;
fadingAnimation.To = 1;
fadingAnimation.Duration = new Duration(TimeSpan.FromSeconds(1.5));
fadingAnimation.AutoReverse = true;

UpdateMessage.BeginAnimation(TextBlock.OpacityProperty, fadingAnimation); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-30T07:01:53.067

我为此实现了我自己的 C# 解决方案，基于@MystyxMac 将其提取为混合行为，这暴露了一个挑战..

尝试连续两次显示相同的通知将不起作用，因为不会调用依赖属性更改的回调。

我通过获取绑定、清除它并再次设置它来克服这个问题。

```
public class ShowFadingTextBehavior : System.Windows.Interactivity.Behavior<TextBlock>
{

    public static readonly DependencyProperty DurationProperty = DependencyProperty.Register(
      "Duration", typeof(TimeSpan), typeof(ShowFadingTextBehavior), new PropertyMetadata(TimeSpan.FromSeconds(5)));

    public TimeSpan Duration
    {
        get { return (TimeSpan)GetValue(DurationProperty); }
        set { SetValue(DurationProperty, value); }
    }

    public static readonly DependencyProperty TextProperty = DependencyProperty.Register(
        "Text", typeof (string), typeof (ShowFadingTextBehavior), new PropertyMetadata("",OnTextChanged));

    private static void OnTextChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {

        var b = (ShowFadingTextBehavior) d;
        var text = (string) e.NewValue;

        if(string.IsNullOrEmpty(text))
            return;

        b.Show(text);
    }

    private void Show(string text)
    {
        var textBlock = AssociatedObject;

        if(textBlock==null)
            return;

        textBlock.Text = text;

        if(textBlock.Visibility==Visibility.Visible)
            return;

        textBlock.Visibility = Visibility.Visible;

        var a = new DoubleAnimation
        {
            From = 1.0,
            To = 0.0,
            FillBehavior = FillBehavior.Stop,
            BeginTime = TimeSpan.FromSeconds(1),
            Duration = new Duration(Duration)
        };

        var storyboard = new Storyboard();

        storyboard.Children.Add(a);
        Storyboard.SetTarget(a, textBlock);
        Storyboard.SetTargetProperty(a, new PropertyPath(UIElement.OpacityProperty));

        storyboard.Completed += delegate
        {
            textBlock.Visibility = Visibility.Collapsed;
            textBlock.Opacity = 1.0;

            var binding = BindingOperations.GetBinding(this, TextProperty);
            if(binding==null)
                return;

            ClearValue(TextProperty);
            BindingOperations.SetBinding(this, TextProperty, binding);
        };

        storyboard.Begin();

    }

    public string Text
    {
        get { return (string) GetValue(TextProperty); }
        set { SetValue(TextProperty, value); }
    }
} 
```

# asp.net - ASP.NET 移动视图是否仅适用于 ASP.NET MVC？或者它们也可以在普通的 ASP.NET 中使用？

> ID：14607870
> 
> 赞同：2
> 
> 时间：2013-01-30T15:40:59.427
> 
> 标签：asp.net, asp.net-mvc

我知道在 ASP.NET MVC 中，您可以拥有移动视图并执行诸如`Index.mobile.cshtml`and`_Layout.mobile.cshtml`之类的操作，并且服务器知道将这些视图/页面提供给移动设备而不是`Index.cshtml`and `_Layout.cshtml`，但这也可以在普通的 ASP.NET 网站中完成（不使用 MVC )?

注意：我在普通的 ASP.NET 网站中使用剃刀语法。

提前致谢。

——李

**更新 ：**

为了澄清，我知道各种浏览器检测方法。我的问题是*关于*表单中的移动视图是否`Index.mobile.cshtml`在普通的 ASP.NET 中可用。

**更新（功能现在包含在 2013 年 2 月 18 日宣布的 ASP.NET 最新版本中）：**

说鬼话.. 这在最近的版本中是可能的.. 向下滚动页面到标题“ASP.NET Web 窗体增强”

[http://weblogs.asp.net/scottgu/archive/2013/02/18/announcing-release-of-asp-net-and-web-tools-2012-2-update.aspx](http://weblogs.asp.net/scottgu/archive/2013/02/18/announcing-release-of-asp-net-and-web-tools-2012-2-update.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:43:25.487

看一下对 ASP.NET Web 窗体的移动支持的简要说明：

[如何：将移动页面添加到您的 ASP.NET Web 窗体/MVC 应用程序](http://www.asp.net/whitepapers/add-mobile-pages-to-your-aspnet-web-forms-mvc-application)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:28:17.253

我的理解是，MVC4 原生支持的备用视图模式是 MVC 使用的 WebPages2 的结果，目前仅在 MVC 中用于通过视图引擎解决定位视图（`VirtualPathProvider`和的组合`DisplayModeProvider`）。这是因为通过 MVC 提供的视图和通过 URI 提供的请求不会映射到服务器上的物理位置以提供文件。另一方面，ASP.NET 直接基于 URI 提供文件，并且不像 MVC 那样依赖于虚拟路径提供程序。

我的猜测是 ASP.NET 不支持基于 MVC 使用的相同框架自动提供备用文件。话虽如此，我确信有可能根据 ASP.NET 的逻辑派生一个实现，该`VirtualPathProviderViewEngine`实现可以实现与 ASP.NET 类似的结果，但是我知道目前没有实现这一点。最好的建议是看看你是否可以找到[的用法，`DisplayModeProvider`](https://github.com/search?q=DisplayModeProvider&ref=simplesearch&type=Code)看看是否有任何弹出。

我不是专家，所以请随意继续寻找，但我想我会提供我能提供的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T08:39:43.330

所以我得出的结论是，这不是普通 ASP.NET 中的内置功能。虽然有（IMO 不太优雅）替代方案。

ASP.NET 移动视图是否**仅**适用于 ASP.NET MVC？是的。

**更新：这可能在最新版本中是可能的**

[http://weblogs.asp.net/scottgu/archive/2013/02/18/announcing-release-of-asp-net-and-web-tools-2012-2-update.aspx](http://weblogs.asp.net/scottgu/archive/2013/02/18/announcing-release-of-asp-net-and-web-tools-2012-2-update.aspx)

——李

# python - 如何调试永不停止运行的代码？

> ID：14607876
> 
> 赞同：3
> 
> 时间：2013-01-30T15:41:29.060
> 
> 标签：python, python-2.7

我有一个庞大的代码库，现在执行的时间太长了。我不知道是什么。

代码从不引发异常，它只是似乎继续处理某些事情。

我想做的是在一些函数周围放置计时器来测试哪个是罪魁祸首。但我不确定这是否是正确的方法，或者如何去做。

我不能轻易地在代码周围的地方引发异常，因为有各种循环调用相同的函数，有时可能只需要太长时间。

什么是最好的策略？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T15:48:56.583

一种解决方案是使用`cProfile`Python 内置的 . 来判断您的代码在哪些功能上花费的时间最多。至关重要的是，*即使您使用* `KeyboardInterrupt`. 因此，您可以启动代码运行和分析，在一两分钟后停止它，然后查看它在哪里花费时间。

`-m`使用这些额外和`-o`参数运行您的代码：

```
python -m cProfile -o profile.txt myscript.py 
```

然后在程序完成运行后，运行以下代码（例如，从另一个脚本）：

```
import pstats
p = pstats.Stats('profile.txt')
p.strip_dirs().sort_stats("time").print_stats() 
```

这将打印按您在其中花费的总时间排序的功能列表。

这是使用分析来调试无限循环的演示。假设`myscript.py`有以下代码。

```
def f():
    while True:
        g(100000)

def g(n):
    x = []
    for i in range(n):
        x.append(n)

f() 
```

当然，这会导致无限循环 - g 将运行很多次。所以我运行上面的分析命令，但在大约 30-40 秒后我停止它（甚至可能更短）。然后其配置文件将打印为：

```
Wed Jan 30 10:58:50 2013    profile.txt

         115414854 function calls in 37.705 seconds

   Ordered by: internal time

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
     1155   25.787    0.022   37.020    0.032 test3.py:5(g)
115412541   10.060    0.000   10.060    0.000 {method 'append' of 'list' objects}
     1155    1.173    0.001    1.173    0.001 {range}
        1    0.685    0.685   37.705   37.705 test3.py:1(f)
        1    0.000    0.000   37.705   37.705 test3.py:1(<module>)
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects} 
```

请注意，就函数花费的时间而言，我们的无限循环函数`g`位于列表的顶部。

*注意*：仅仅因为代码将所有时间都花在一个函数中并不意味着循环直接围绕该函数 - 它可以由一个函数调用，该函数由无限循环中的函数（等）调用（请注意，`append`它位于列表顶部附近，因为它被称为 inside `g`)。另一种技巧是根据在每个函数中花费的累积时间对它们进行排序，使用`.sort_stats("cum")`. 这两种方法的结合，再加上一点侦探工作（查看代码和添加调试消息），应该能够识别出罪魁祸首。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:00:37.113

我建议使用[日志记录模块](http://docs.python.org/2/library/logging.html)将调试语句添加到代码中的各个点。使用日志记录模块可以让您轻松打开和关闭调试语句以及控制显示的信息。

另一种选择是使用 IDE，您可以在其中轻松添加断点，从而确定代码进入长循环的位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T16:06:28.873

[编辑：我看到你添加了`python-2.7`标签，所以这对你没有帮助，但它可能对其他人有用或有趣。]

在 Python 3 中，您可以通过键入`Control-C`. 然后从调试器中，您可以检查堆栈以查看程序在哪里花费时间。

```
Python 3.3.0 (default, Nov 23 2012, 10:26:01) 
>>> import time, pdb
>>> def foo(): time.sleep(1); foo()
... 
>>> pdb.run('foo()')
> <string>(1)<module>()
(Pdb) c
^C
Program interrupted. (Use 'cont' to resume).
--Call--
> <stdin>(1)foo()
(Pdb) w
  <stdin>(1)<module>()
  /.../pdb.py(1556)run()
-> Pdb().run(statement, globals, locals)
  /.../bdb.py(405)run()
-> exec(cmd, globals, locals)
  <string>(1)<module>()
  <stdin>(1)foo()
  <stdin>(1)foo()
  <stdin>(1)foo()
  <stdin>(1)foo()
  <stdin>(1)foo()
> <stdin>(1)foo() 
```

您可以将此技术视为一种基于单个样本的基于样本的分析！对于许多问题，您只需要一个样本即可。

# angularjs - AngularJS - 在指令中加载动态模板 HTML

> ID：14607879
> 
> 赞同：7
> 
> 时间：2013-01-30T15:41:30.897
> 
> 标签：angularjs

我有一个从外部 HTML 文件加载内容的指令。传递到该指令的是一些范围数据，用于呈现该 HTML 片段。例如

`<div class="{{cls}}" data-obj="{{obj}}" data-id="{{id}}">`

`<!-- remainder of content here -->`

`</div>`

我想在这个指令中做的是根据传递给指令的原始范围数据在其中加载另一个 HTML 部分。我似乎无法让它发挥作用，但它应该类似于以下内容：

`<div class="{{cls}}" data-obj="{{obj}}" data-id="{{id}}">`

`<!-- remainder of content here -->`

`<div ng-include="partials/{{obj}}.html></div>`

`</div>`

使用它，该文件不会被包含在内，但我也没有收到任何错误。有人可以在这里帮助我吗？

**注意**：我读过[这个](https://stackoverflow.com/questions/13422966/how-to-specify-model-to-a-nginclude-directive-in-angularjs)，这是一个类似的问题，但对我没有帮助。

**更新**- 我在 Chrome 开发工具中注意到 URL 正在按预期解析，但文件内容未包含在内。我从`ng-include`加载和编译请求的片段的文档中想到，所以我期待它能够工作。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-31T09:03:56.073

Found a solution in the end, by declaring the following in the directive:

```
<div ng-include src="view.getView()"></div> 
```

and the following in the directive controller:

```
$scope.view = {
    getView: function() {
        return "partials/" + $scope.obj + ".html";
    }
}; 
```

Works perfectly now!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-29T17:29:24.947

在评论Shane Gadsby的评论时：不是`<div ng-include src="'partials/'+{{obj}}+'.html'"></div>`但是`<div ng-include src="'partials/'+obj+'.html'"></div>`。您的评论解释了为什么*'这是您需要将其从对象文字强制转换为字符串'*，因此编译器将所有不在单引号中的内容作为范围对象处理。

# javascript - 字符串文字的JavaScript正则表达式？

> ID：14607884
> 
> 赞同：0
> 
> 时间：2013-01-30T15:41:37.367
> 
> 标签：javascript, regex, literals

> **可能重复：**
> [Javascript 中是否有 RegExp.escape 函数？](https://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript)

我目前正在使用：`var keywords = new RegExp(req.params.keywords, 'i');`

关键是，如果`req.params.keywords == '.*'`，这将匹配任何东西，我想要的是它在`.*`字面上匹配，如`\.\*\`

有没有比用 a 转义每个传递的单个字符更优雅的解决方案`\`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:50:57.060

如果要按字面意思进行匹配，请不要使用字符串中包含的正则表达式，而不要使用正则表达式。使用字符串`indexOf()`函数查看一个字符串是否包含在另一个字符串中。

对于不区分大小写的匹配，您在匹配之前将每个字符串转换为小写。

```
var searchForString = req.params.keywords.toLowerCase();
var searchInString = xxx.toLowerCase();
if (searchInString.indexOf(searchForString) >= 0) {
    ... then it matches ...
} 
```

# ios - 如何在 UIViewController 中添加自定义子视图的多个实例

> ID：14607889
> 
> 赞同：0
> 
> 时间：2013-01-30T15:41:46.113
> 
> 标签：ios, objective-c, uiviewcontroller

通常，当我制作我的应用程序时，我处于这种情况：我有一个 UINavigationController，处理视图堆栈，一些 UIViewControllers，控制它们各自的视图......

但是当我想在我的 mainView 中添加几个自定义 UIView 时，我不知道如何管理我的代码。

每个 UIViewController 需要处理一个且只有一个视图（通常占据所有屏幕大小），并且视图不应控制其内容（将其更新为极限）。你不能这样做：

```
[myViewController1.view addSubview:childViewController.view]; 
```

所以如果我想实现这样的目标，我该怎么办？ ![我的样机](../Images/e711c5c561290fca9ae6eb6a39bfcf3e.png)

橙色部分必须是相同 UIView（控制器？）的 3 个实例，但其内容取决于 NSObject（显然是用户）。

我认为这对您的内容进行细分非常重要，这应该是一个简单的问题，但是我发现了很多相互矛盾的答案，那么处理这个常见问题的最佳做法是什么？这些橙色视图应该是 UIViewControllers 的实例，以便它处理它们的 UITableViewDatasource？addChildViewController 在这种情况下是否相关？

我已经找到了很多有用的东西，但我不知道该怎么办......另外，我正在使用 xibs。

如果您能帮助我（以及我认为的其他人），请提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:44:03.273

您可以通过任何一种方式（视图或视图控制器）执行此操作，具体取决于您要如何处理事情。当然，您可以将一个对象作为多个表的数据源，因此在这种情况下，您只需添加多个视图。然而，如果你想让你的代码更加分隔，那么添加视图控制器，并让每个控制器都有自己的视图——为此，你需要使用 addChildViewController，并使用 Apple 描述的用于创建自定义容器控制器的方法. 或者，您可以在故事板中使用容器视图，这使得创建自定义容器控制器的过程更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:47:22.733

您走在正确的道路上...创建子视图的单独实例，并将它们添加到您的视图中。如果你有超过 3 个（例如，想象一下你的音乐的封面视图，你可以无限左右滚动），我会看看 UICollectionViewController ...这将有助于管理单元格的重用。

但是，如果它只有 3 个，只需创建三个具有不同框架的实例并将它们添加到您的视图中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T16:55:26.390

这是我的做法：

每个橙色框都是一个自定义视图（继承自 UIView）

该视图将具有标签、图像和表格视图。

由于您不确定要使用的这些视图的实例数量，因此最好使用某种标记，这样您就可以在这些橙色视图中为数据源和表的委托方法提供一个位置。

在数据源和委托方法中，您可以使用 tableView.tag（与 orangeView.tag 属性相同）。

我个人不喜欢在一个视图中有多个 viewController（splitVC 除外），可能是因为我没有这样的要求。

我看不出橙色框的 uiviewcontroller 对 uiview 有何帮助。

正如@James Boutcher 在他的回答中提到的那样， UICollectionViews 将进一步简化这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T16:56:51.820

为什么不创建一个 UIView 类并覆盖 drawRect 方法，然后在你的 myViewController1.view 中为这个类添加 subView

# python - 三角形的面积 - python 27

> ID：14607890
> 
> 赞同：0
> 
> 时间：2013-01-30T15:41:51.087
> 
> 标签：python, python-2.7, sqrt

该程序设置为计算三角形的面积。三角形边 (a,b,c) 是输入。该代码仅适用于某些数字而不适用于其他数字。例如

当 a、b 和 c 分别为：2、3、4 时，代码正常。2,3,5 输出 0.00 这是错误的。2,3,6 程序打印出数学域错误

```
def main():
    print "Program calculates the area of a triangle."
    print
    a, b, c = input("Enter triangle's sides length: ")
    s = (a+b+c) / 2.0
    area = sqrt(s*(s-a)*(s-b)*(s-c))
    print "The area is %.2f" % area

main() 
```

你能看出有什么问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T15:54:44.503

该公式有效；这是你的期望有点偏离。

> 2,3,5 输出 0.00 这是错误的。

真的吗？那么，你能画出一个边长分别为 2、3 和 5 的三角形吗？:^) 唯一的可能性是退化的三角形——一条线（一条 2 英寸的线段连接到一条 3 英寸的线段），显然它的面积为零。

并非三个数字的每个组合都可以作为三角形。你需要有`a+b>c`,`b+c>a`和`c+a>b`. 对于 (2,3,6)，您有

`3+6 > 2`和`6+2 > 3`, 但是`2+3 < 6`, 所以不存在这样的三角形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T16:26:50.717

您的代码似乎合法，让我们看看您的数学测试用例：

**情况1：**

```
a=2; b=3; c=5;

s=(2+3+5)/2.0
 = 5.00 
```

你有 area = sqrt(s*(sa) *(sb)* (sc))

看到公式中有 (sc)，结果是 (5.00 - 5) = 0 在这种情况下，面积 = 0.00，这是正确的。

**案例二：**

```
a=2; b=3; c=6;

s=(2+3+6)/2.0
 = 5.50 
```

就 (sc) 而言，您有 (5.50 - 6) = -0.5

负数的 sqrt 给你“数学域错误”

上述结果意味着这些数字不能形成合法三角形。您的代码或公式没有任何问题。但是，在下次测试代码之前，请确保您的测试用例是合法的。

我希望它有帮助=]

# javascript - 如何调试 jquery 插件冲突

> ID：14607895
> 
> 赞同：0
> 
> 时间：2013-01-30T15:41:55.907
> 
> 标签：javascript, jquery, jquery-ui, yii

我有 2 个 jquery 脚本：“Yii-EchMultiselect”和“datePicker”。

当我在同一页面上使用两个插件时，日期选择器不起作用。我怎样才能找到原因？我知道这两个插件都使用 jquery_min.js 但我猜其他共享资源存在冲突。谢谢，丹尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T21:16:37.620

我已经在同一个视图中成功使用了这两个小部件。

确保每个小部件在 htmlOptions 中设置了不同的 DOM id。我以前遇到过这个问题。另请发布您的代码。

# ssl-certificate - JMeter 和可选的 SSL 客户端证书

> ID：14607897
> 
> 赞同：9
> 
> 时间：2013-01-30T15:42:01.663
> 
> 标签：ssl-certificate, jmeter

我正在使用涉及 SSL 客户端证书的 JMeter 2.8 设置测试计划。测试计划大致包括对 server1 和 server2 的两个 https 调用。

棘手的部分是对 server1 的调用不应使用 SSL 客户端身份验证（尽管服务器正在请求），而对 server2 的调用必须使用 SSL 客户端身份验证。

目前，只要我向 JMeter 提供密钥库，所有 https 调用都会发送 SSL 证书，这会导致对 server1 的调用失败。

我目前尝试了两种方法：

1.  我`-Djava.net.ssl.keyStore=xxx`从 JMeter 命令行中删除了它，并使用 BeanShell 或 BSH 预处理器在调用 server2 之前对其进行设置，但它不起作用，并且对服务器 2 的调用失败，就好像没有指定密钥库一样。
2.  在调用 server1 之前，我尝试使用 Keystore 管理配置器指定一个不存在的密钥，但是当我将开始和结束索引放在存储中的最后一个证书之后时，JMeter 仍然发送存储中的第一个证书。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T19:04:14.950

您可以执行以下操作：

*   将以下 JVM 属性添加到 jmeter：

    ```
    -Djavax.net.ssl.keyStore=<path to folder containing keystore>/keystore.jks       

    -Djavax.net.ssl.keyStorePassword=password if any 
    ```

*   使用[密钥库配置](http://jmeter.apache.org/usermanual/component_reference.html#Keystore_Configuration)

*   在 user.properties 中设置：

    ```
    https.use.cached.ssl.context=false 
    ```

*   对必须发送客户端证书的采样器使用 HC4Impl

*   对不能发送的使用JavaImpl（这是一种技巧，我必须说我不明白为什么如果服务器请求它就不能发送客户端证书）

# ruby-on-rails-3 - with_options 在 RoR3 模型中不起作用

> ID：14607898
> 
> 赞同：1
> 
> 时间：2013-01-30T15:42:01.887
> 
> 标签：ruby-on-rails-3, model

有人可以向我解释为什么它似乎忽略了此代码中的 with_options 块吗？

```
class User < ActiveRecord::Base
  attr_accessible :name,:user_type,:policy_num,:address,:city,:state,:zip,:phone,:fax,:email,
                :password, :password_confirmation
has_secure_password
has_many :policies
has_many :dealer_forms

before_save {|user| user.email = email.downcase}
before_save :create_remember_token

ZIP_REGEX = /^\d{5}(-\d{4})?$/
EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
COMPLEX_PHONE_REGEX = /^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/

validates :name, presence: true, length:{in:4..50}
validates :email, presence: true, uniqueness: {case_sensitive: false},format:{with:EMAIL_REGEX}
validates :password, length:{in:6..20}, if: :password
validates :password_confirmation, presence:true, if: :password
validates :user_type, presence: true, inclusion: {in: %w(Dealer Producer System)}

# Validate True User items skip admin users #
with_options :unless => :is_system_user? do |u|
  u.validates :policy_num, presence: true
  u.validates :address, presence: true
  u.validates :city, presence: true
  u.validates :state, presence: true, length:{is: 2} 
  u.validates :zip, presence: true, format:{with:ZIP_REGEX,message: "Not a valid Zip Code"}
  u.validates :phone, allow_blank: true, format:{with:COMPLEX_PHONE_REGEX}
  u.validates :fax, allow_blank: true, format:{with:COMPLEX_PHONE_REGEX}
end

private
  def create_remember_token
    self.remember_token = SecureRandom.urlsafe_base64
  end
  def is_system_user?
    user_type == "System" ? true : false
  end
end 
```

我尝试了以下方法：

```
with_options unless: :is_system_user?
with_options unless: Proc.new{|user| user.user_type == "System"}
with_options unless:"user_type = 'System'"
with_options if: "user_type != 'System'" 
```

但由于某种原因，当我尝试在控制台中创建用户时，它仍然在块内运行验证。

任何帮助将不胜感激。谢谢

# android - 未获取 ListView 的 OnItemClick 事件

> ID：14607906
> 
> 赞同：0
> 
> 时间：2013-01-30T15:42:23.117
> 
> 标签：android, android-event

正如标题中所说，我没有得到 ListView 的 OnItemClick 事件

我的代码：

```
ListView listView1 = (ListView) findViewById(R.id.listView1);

listView1.setOnItemClickListener(new AdapterView.OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            Toast.makeText(SelectQuizActivity.this, "OnItemClick", Toast.LENGTH_LONG).show();
        }
    });
    SimpleAdapter adapter = new SimpleAdapter(this, listView, R.layout.list_layout, new String[]{"topic","by","score"}, new int[]{R.id.textViewTopic,R.id.textViewTopicCreator,R.id.textViewScore});
    listView1.setAdapter(adapter); 
```

**布局 XML：**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="wrap_content"
tools:context=".SelectQuizActivity" >
<TextView
    android:id="@+id/textView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:background="@drawable/bg_dark_gradient_rev"
    android:gravity="center_horizontal"
    android:padding="20dp"
    android:text="@string/app_name"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textColor="@color/white"
    android:textStyle="bold"
    android:typeface="sans" />
<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/textView1"
    android:choiceMode="singleChoice"
    android:clickable="true"
    android:divider="@drawable/bg_light_gradient"
    android:dividerHeight="1dp"
    android:focusable="true"
    android:focusableInTouchMode="true"
    android:listSelector="@drawable/list" >
</ListView>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:40:18.303

尝试添加`focusable="false"`单行布局文件的每个子项。它对我有用.. :)

更新：将[android:descendantFocusability](http://developer.android.com/reference/android/view/ViewGroup.html#attr_android%3adescendantFocusability)添加到父视图也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:32:29.943

试试这个：

```
listView1.setOnItemClickListener(new android.widget.AdapterView.OnItemClickListener() 
{
    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3)
    {
        Log.i("CLICK", "CLICK CLICK");
    }
}); 
```

# haskell - 为 Trie 实现可折叠

> ID：14607908
> 
> 赞同：1
> 
> 时间：2013-01-30T15:42:29.587
> 
> 标签：haskell, trie

我想让我的 Trie 数据结构可折叠。基本数据结构如下所示：

```
data Trie a = Trie {
    value :: Maybe a,
    children :: [(Char, Trie a)]
} deriving (Show) 
```

我试图通过定义 foldr 来实现 Foldable 类：

```
instance F.Foldable Trie where
    foldr f z (Trie (Just v) children) =
        F.foldr (\a b -> F.foldr f b a) (f v z) children

    foldr f z (Trie Nothing children) =
        F.foldr (\a b -> F.foldr f b a) z children 
```

这不会与此错误一起编译：

```
Couldn't match type `a' with `Trie a'
  `a' is a rigid type variable bound by
      the type signature for foldr :: (a -> b -> b) -> b -> Trie a -> b
      at Trie.hs:17:5
Expected type: [(Char, a)]
  Actual type: [(Char, Trie a)]
In the third argument of `F.foldr', namely `children'
In the expression:
  F.foldr (\ a b -> F.foldr f b a) (f v z) children 
```

但是，如果我将子项的类型更改为`Map Char (Trie a)`，则 Foldable 实现无需更改即可工作。为了简单起见，我现在想保留关联列表。你能解释一下为什么 foldr 在地图和关联列表上的行为不同吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:48:27.360

该错误是因为您试图折叠键值对列表，而不是`Trie`s 列表。您想要做的是忽略`Char` 键并像这样折叠到每个子节点中

```
foldr f z (Trie (Just v) children) =
    F.foldr (\(_, a) b -> F.foldr f b a) (f v z) children

foldr f z (Trie Nothing children) =
    F.foldr (\(_, a) b -> F.foldr f b a) z children 
```

# jquery-ui - 使用 AngularJS 和表单验证禁用 jQuery 按钮

> ID：14607912
> 
> 赞同：4
> 
> 时间：2013-01-30T15:42:40.013
> 
> 标签：jquery-ui, angularjs, angularjs-directive

我想根据表单验证禁用我的 jQuery 按钮。根据文档，使用以下语法的常规按钮相当容易：

```
 <button ng-click="save(user)" ng-disabled="form.$invalid">Save</button> 
```

但是，当更改为 jQuery UI 按钮时，它不再起作用。我假设 Angular 在 jQuery UI 和 AngularJS 之间没有真正的绑定，因此需要一个指令来执行以下操作：

```
$("button" ).button( "option", "disabled" ); 
```

是这种情况还是有其他选择？我正在尝试做的一个 jsFiddle 在这里：http: [//jsfiddle.net/blakewell/vbMnN/](http://jsfiddle.net/blakewell/vbMnN/)。

我的代码如下所示：

**看法**

```
<div ng-app ng-controller="MyCtrl">
    <form name="form" novalidate class="my-form">
        Name: <input type="text" ng-model="user.name" required /><br/>
        Email: <input type="text" ng-model="user.email" required/><br/>
        <button ng-click="save(user)" ng-disabled="form.$invalid">Save</button>
    </form>
</div> 
```

**控制器**

```
function MyCtrl($scope) {
    $scope.save = function (user) {
        console.log(user.name);
    };

    $scope.user = {};

};

$(function () {
    $("button").button();
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T16:02:15.187

好吧，问题在于角度，您应该制定指令来应用您的 JQuery 插件。

所以在这里你可以这样做：

```
//NOTE: directives default to be attribute based.

app.directive('jqButton', {
   link: function(scope, elem, attr) {
      //set up your button.
      elem.button();

      //watch whatever is passed into the jq-button-disabled attribute
      // and use that value to toggle the disabled status.
      scope.$watch(attr.jqButtonDisabled, function(value) {
         $("button" ).button( "option", "disabled", value );
      });
   }
}); 
```

然后在标记中

```
<button jq-button jq-button-disabled="myForm.$invalid" ng-click="doWhatever()">My Button</button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:18:28.260

这对我有用：

```
app.directive('jqButton', function() {
      return function(scope, element, attrs) {
          element.button();

          scope.$watch(attrs.jqButtonDisabled, function(value) {
              element.button("option", "disabled", value);
          });
      };
}); 
```

使用此标记：

```
<input type="button" value="Button" jq-button jq-button-disabled="myForm.$invalid" /> 
```

# java - 下拉命令菜单选项

> ID：14607914
> 
> 赞同：0
> 
> 时间：2013-01-30T15:42:45.073
> 
> 标签：java

我在工具栏中添加了一个下拉命令

```
<command
    commandId="my.uri.Options"
    label="%Options.label"
    icon="icons/properties.png"
    style="pulldown">
</command> 
```

在下拉菜单下有一些切换选项。我也想通过按下按钮来获得这些选项，而不仅仅是菜单三角形。那可能吗？还是我的方法全错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T19:21:07.843

也许您可以使用`onclick`事件处理程序，或者您可以探索`addEventListener()`更改单击菜单时的操作。

# python - Python 套接字客户端请求回显

> ID：14607917
> 
> 赞同：0
> 
> 时间：2013-01-30T15:42:49.963
> 
> 标签：python

我正在使用使用 Python 的 select 模块构建的简单脚本测试与套接字服务器的通信。它工作正常 - 我从服务器获得响应 - 除了*我发送的任何请求似乎都在响应的第一行中回显*（请参见下面的命令行示例）。服务器提供商说这不是他回应请求 - 发送请求时我没有做什么？（在某处冲洗一些缓冲区？）

* * *

选择客户端.py

```
Prompt=">>>"

def loop(chan, bufsize):
    while True:
        r, w, e = select.select([chan, sys.stdin], [], [])
        if chan in r:
            data=chan.recv(bufsize)
            if len(data)==0:
                continue
            sys.stdout.write(data)
            sys.stdout.write("%s " % Prompt)
            sys.stdout.flush()
        if sys.stdin in r:
            data=sys.stdin.readline()
            if data=="\n":
                break
            chan.send(data) 
```

* * *

样品使用

```
>>> hello
hello <--------- ECHO!
error:no_version_specified
>>> login:1
login:1 <---------- ...!
error:usage:login:1:username?:passwd?
>>> login:1:foo:bar
login:1:foo:bar
>>> error:incorrect_username_or_password
>>> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:35:04.947

这似乎完全正常。这是对您发送的字符串正常的一种确认（即使您被告知没有回声）。在您的情况下，我只是建议您删除`data`变量的第一行。

# backbone.js - Backbone.js 保存错误

> ID：14607919
> 
> 赞同：1
> 
> 时间：2013-01-30T15:43:05.207
> 
> 标签：backbone.js, backbone-views, backbone-events

我正在为骨干的问题挠头……

我有一个主干视图，其中一个事件调用了一个保存当前模型的函数。

它是一个简单的表单，在视图中我在同步模型之前做了一些验证。

```
this.model.save({
    completed : completed,
    company : company,
    revenue : revenue,
    term : term,
    comments : comments,
    probability : probability
  },
  {
    success: function (model, response) {
    console.log('success', model, response);
    Evision.trackRouter.navigate("tracker/", {trigger: true});
    },
    error: function (model, response) {
      console.log('error', model, response);
    }
  } 
; 
```

成功触发后，它会将我返回到我的模型集合，我可以在其中选择另一个模型进行编辑，此时当我尝试保存我在控制台中收到的并且 Chrome 崩溃时。

如果我扩展此错误，则表明运行上述功能的功能存在问题，并且我的模型已在控制台中注销，但是当我尝试将其扩展为空时？

值得一提的是，在第二轮比赛中，成功或错误都不会被解雇。

谢谢

**编辑#1**

这是我在崩溃前收到的错误

```
 <error>
    w.extend
    w.clone
    e.extend.toJSON
    _.extend.save
    _.extend.update
    LocalStorage.sync
    Backbone.sync
    e.extend.sync
    e.extend.save
    Evision.Views.TrackerDetail.Backbone.View.extend.saveTracker
    (anonymous function)
    j 
```

**编辑#2**这是我的模型

```
Evision.Models.Track = Backbone.Model.extend({

  defaults: function() {
    return {
      id : Evision.trackerList.nextOrder(),
      completed : false,
      created : Utils.datestamp(),
      company : "",
      revenue : "",
      term : "",
      comments : "",
      probability : "",
      success : null
    }
  }

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T01:29:13.530

我确切地知道问题所在。我不久前就遇到了这个问题。我看到的第一件事是堆栈跟踪，就像在上面的评论中一样，我遇到了下划线的扩展问题。您需要做的是将backbone.js、underscore.js 和backbone-localstorage.js（如果有的话）更新到最新版本。问题在于版本控制！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:27:01.093

事实证明，这个问题与 Jerome 的 Backbone.localStorage 的修改版本有关，该版本将允许在应用程序中进行远程和本地存储。我更换了最新的 localStorage 适配器，一切正常。不幸的是，我找不到要通知的原始来源。

# c# - “&”字符会破坏存储在 web.config 中的密码

> ID：14607920
> 
> 赞同：81
> 
> 时间：2013-01-30T15:43:06.143
> 
> 标签：c#, asp.net, .net, asp.net-mvc, configuration

我有一个在 IIS 7.5 上运行的 ASP.NET MVC3 C# .NET 应用程序。

我们在代码中模拟了一个 Windows NT 服务帐户，以便将文档读/写到文件共享中。用户 id 编译在代码中，服务帐户密码存储在 web.config 文件中。

密码包含一个 & 字符（即：）`p&ssword`。

这打破了网站。访问该站点时，我们收到此错误：“抱歉，处理您的请求时发生错误”。

这是使用密码的代码：

```
 var password = ConfigurationManager.AppSettings.Get(Common.SVC_PWD);

    bool isSuccess = LogonUser(
        @"my_svc_acct",
        "my.domain.net",
        password,
        LOGON32_LOGON_NEW_CREDENTIALS,
        LOGON32_PROVIDER_DEFAULT, ref token
    ); 
```

为什么这会导致网站崩溃？

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2013-01-30T15:45:51.817

我怀疑您没有在`web.config`文件中正确编码密码。请记住，这`web.config`是一个 XML 文件，因此必须对实体进行编码。

代替

```
my&password 
```

尝试

```
my&amp;password 
```

您可以使用[FreeFormatter.com](http://www.freeformatter.com/xml-escape.html)等网站来转义/取消转义 XML 字符串。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2013-01-30T15:47:03.380

您需要将编码值放入 web.config。一旦你拉它，它就会正确地读出它，但是在配置文件本身中它需要被编码。

例如：

密码：（`your&password` 你所期望的）

编码版本：（`your&amp;password` 应该存储在您的 web.config 中）

读取值的包装器方法应自动将其取消编码为`your&password`.

您需要对所有“特殊”字符执行此操作：

```
< = &lt;
> = &gt;
" = &quot;
' = &apos;
& = &amp; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-30T15:49:30.420

使用 CDATA 将密码存储在 web.config 中

用这个替换密码

```
<![CDATA[MyPassw&rd]]> 
```

# google-closure-compiler - 如何使用closure_builder.py在模块中编译Google Closure代码？

> ID：14607921
> 
> 赞同：1
> 
> 时间：2013-01-30T15:43:09.083
> 
> 标签：google-closure-compiler

如何使用[Closure_builder.py](https://developers.google.com/closure/library/docs/closurebuilder)在多个模块中编译 Google Closure 代码？

我试过这个命令：

```
python closurebuilder.py 
--root closure/closure-library 
--root closure/client 
--namespace="client.start" 
--output_mode=compiled 
--compiler_jar=compiler.jar 
--output_file closure/compiled.js 
--compiler_flags=--compilation_level=ADVANCED_OPTIMIZATIONS 
--compiler_flags=--module base:1  
--compiler_flags=--js=closure/modules/base.js  
--compiler_flags=--module editor:1  
--compiler_flags=--js=closure/modules/editor.js  
--compiler_flags=--module maps:1  
--compiler_flags=--js=closure/modules/maps.js  
--compiler_flags=--module uploader:1  
--compiler_flags=--js=closure/modules/uploader.js  
--compiler_flags=--module visualization:1  
--compiler_flags=--js=closure/modules/visualization.js 
--compiler_flags=--output_wrapper="(function() {%output%})();" 
```

但是会抛出以下错误：

```
closurebuilder.py: Scanning paths...
Traceback (most recent call last):
  File "closurebuilder.py", line 256, in <module>
    main()
  File "closurebuilder.py", line 196, in main
    sources.add(_PathSource(js_path))
  File "closurebuilder.py", line 167, in __init__
    super(_PathSource, self).__init__(source.GetFileContents(path))
  File "source.py", line 110, in GetFileContents
    fileobj = open(path)
IOError: [Errno 2] No such file or directory: 'base:1' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T02:24:24.153

我实际上只是遇到了一个类似的问题，除了它不是'base：1'而是'Files'。原来，我是从 C:\Program Files (x86)... 执行脚本，而那些多余的空格会弄乱 Closure 脚本以及它如何解析 JS 文件。从没有空格的路径执行它解决了它，希望你也能修复它，也许尝试在参数上添加引号

法比安

# ios - iOS 程序化分组表为空

> ID：14607926
> 
> 赞同：1
> 
> 时间：2013-01-30T15:43:21.307
> 
> 标签：ios, tableview, uitableview, loadview

我有一个以编程方式实现的 tableView，采用分组样式。

我得到的只是应该填充的灰色细条纹。所以它正在加载，但不是......什么......

还需要什么？如果没有，那我还应该去哪里看？

另外，如何使表格的背景颜色与单元格的白色相同？

```
- (void)loadView {

    [super loadView];

    UITableView *view = [[UITableView alloc] initWithFrame:[UIScreen mainScreen].applicationFrame style:UITableViewStyleGrouped];

    [view setAutoresizingMask:UIViewAutoresizingFlexibleHeight|UIViewAutoresizingFlexibleWidth];

    self.view = view;

    [view reloadData];

} 
```

viewDidLoad 是必要的吗？

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
} 
```

谢谢，

*   莫克罗姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:47:51.953

您必须为您的 tableView 提供数据。

对于声明者，您需要定义一个`dataSource`. 通常只使用您的 viewController 作为数据源。

```
// in the .h find something similar and add <UITableViewDataSource>
@interface ViewController : UIViewController <UITableViewDataSource> 
```

然后当你制作 tableView 时。

```
view.datasource = self; 
```

然后，您需要提供数据本身。实现这些方法：

```
#pragma mark - UITableView Datasource

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 3;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 3;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }

    [cell.textLabel setText:@"A Cell"];

    return cell;
} 
```

这些方法将创建 3 个部分，每个部分有 3 行。所有的细胞都会说一个细胞。这是所有 tableViews 的基础。只需自定义数据:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:45:41.723

您需要为表视图设置 dataSource 和委托属性，以便能够从中提取数据：

```
UITableView *view = ...
view.dataSource = self;
view.delegate = self; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T06:40:18.490

在 .h 文件中有协议，并将委托和源附加到文件所有者

# php - CodeIgniter Restserver 不适用于特定的 URL

> ID：14607932
> 
> 赞同：1
> 
> 时间：2013-01-30T15:43:31.727
> 
> 标签：php, codeigniter, rest

我将此[Restserver](https://github.com/philsturgeon/codeigniter-restserver)与 CodeIgniter 结合使用。

它似乎工作得很好，除非我使用这样的 URL；mydomain.com/api/example/1234/

其中 1234 是我请求的 ID。

像这样的代码似乎不起作用：

```
class Example extends REST_Controller {
    public function index_get() {
        print($this->get("example"));
    }
} 
```

它是 GET 还是 POST 请求似乎并不重要。一定有一种方法可以让我从 URL 中检索 ID ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:46:11.167

URL 的段应该等于这些：

```
api = Controller
example = Resource 
```

参数必须在键值对中：

```
id = Key
1234 = Value 
```

似乎您的 1234 被当作钥匙，但没有任何价值。尝试将您的 URL 更改为以下内容：`mydomain.com/api/example/id/1234/`，这将转换为：`mydomain.com/controller/resource/key/value/`

这里还有一个非常详细的教程：http: [//net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/](http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/)

**编辑：** 由于您的控制器位于子文件夹中，因此您的 URL 段应按如下方式构造：

```
api/example = Controller
user = Resource // basically the method name + the http method e.g. user_get(), or user_post(). I just made 'user' up, for your app can be whatever it is that people will access via your api 
```

参数必须作为键值对提供：

```
id = Key
1234 = Value 
```

那么您的 URL 将如下所示：`mydomain.com/api/example/user/id/1234/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-06T13:15:36.607

在 GET REQUEST 的情况下，您只需在函数的标头中定义参数，如下所示：

```
public function index_get($param) {
    print($param);
} 
```

如果你想让它成为可选的，那么：

```
public function index_get($param="") {
    if ($param=="") {
       print("No Parameters!");
    } else {
       print($param);
    }
} 
```

如果我想发送“POST”参数，我只需创建一个 POST METHOD 并接收它们......

```
public function index_post() {
$params = $this->post();
if (isset($param['id'])) {
   print($param['id']);
} else {
   print("No Parameters!");
} 
```

}

# mysql - 检查特定列中的相应数据，如果未检测到，则插入。否则更新

> ID：14607935
> 
> 赞同：0
> 
> 时间：2013-01-30T15:43:41.673
> 
> 标签：mysql

我需要在表 foo 中插入新行。但在插入这些数据之前，我需要检查是否已经为相应的用户名插入了一行。如果已经插入，那么我需要用新数据更新当前数据。

我知道使用 PHP if 条件来做到这一点。但我喜欢只用一行来使用 MySQL 函数/语句来做到这一点。请问有人可以帮我吗？

例如，请使用以下语句。它应该被更新。

```
$in = "insert into foo(username, text) values('user-x', 'user-x-text')";
Mysql_query($in); 
```

在搜索类似问题时，我得到了这篇文章：[带有答案的类似问题。](https://stackoverflow.com/questions/7873373/how-to-apply-update-if-an-item-exists-and-insert-otherwise)但是我很难使用该解决方案，因为我不知道，该代码片段发生的过程会降低服务器资源，例如速度等。因为这个脚本每个用户将运行大约 20 次。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:23:24.707

我认为`INSERT ... ON DUPLICATE KEY UPDATE`应该可以工作

[使用户名成为`UNIQUE`索引，它不必是主键](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

如果我没记错的话，只有当您提供的任何列（主键或唯一索引）发生冲突时，DUPLICATE KEY 才会运行。在您的情况下，文本列两者都不是，因此它会因冲突而被忽略。

`INSERT... ON DUPLICATE KEY UPDATE`[对MySql 文档](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)确认的唯一索引起作用

# jquery - 如何在每个 Royal Slider 开关上使用数组更改 CSS

> ID：14607940
> 
> 赞同：0
> 
> 时间：2013-01-30T15:44:02.763
> 
> 标签：jquery, arrays, slider

每次幻灯片切换时，我都在努力改变 HTML 块的颜色。我正在使用[RoyalSlider](http://dimsemenov.com/plugins/royal-slider/documentation/)，并且我有 5 种颜色要按顺序循环显示。

我目前的努力是这样的：

```
 // initialize slider
    var sliderInstance = $('#new-royalslider-1').data('royalSlider');

    // bind the rsBeforeAnimStart event
    sliderInstance.ev.on('rsBeforeAnimStart', function() {

        var colors = ["#000000","#464646","#999999"];

        for(var i=0; i<colors.length; i++) {
          $(".color-block").css('background', colors[i]);
        }

    }); 
```

使用此设置，我只得到 #999999 值，而不是在每次幻灯片更改时循环遍历数组。[这](http://c41media.com.previewdns.com/projects/)是我正在工作的网站，仅供参考。

知道我在这里做错了什么吗？提前感谢您的帮助！对此，我真的非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:51:11.257

使用当前幻灯片的索引，我们可以在动画更改时循环显示颜色。

```
// initialize slider and define colours
var sliderInstance = $('#new-royalslider-1').data('royalSlider'),
    colors = ["#000000","#464646","#999999"];

// bind the rsBeforeAnimStart event
sliderInstance.ev.on('rsBeforeAnimStart', function() {
    $(".color-block").css('background', colors[sliderInstance.currSlideId % colors.length]);
}); 
```

# html - 保存struts select元素的所有选项

> ID：14607944
> 
> 赞同：0
> 
> 时间：2013-01-30T15:44:13.343
> 
> 标签：html, struts, html-select

我想使用 struts 实现一个动态选择元素。我需要允许用户将选项元素添加到页面上的选择元素，然后在提交表单时保存所有选项，而不仅仅是选定的选项。事实上，一旦提交，我什至不在乎选择的选项。

例如，当用户进入页面时，选择元素由表单 bean 中的集合填充。然后，用户可以在显示的选择元素中添加、编辑或删除选项（通过 jQuery、javascript）。然后，当用户提交表单时，更新的选项集被发送到服务器。

这是我开始的地方：

```
<html:select property="myList">
  <html:options property="myList"/>
</html:select> 
```

有没有一种简洁的方式来使用 struts 标签来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:55:01.907

struts 标签与问题没有任何关系。它所能做的就是生成一个选择框，其中包含从表单 bean 中检索到的选项。问题是 HTML 选择框仅提交其选定的选项。这就是它的用途。

如果要提交所有选项，请让您的选择框多选，并确保在提交表单之前选择所有选项（使用 JavaScript，在表单提交事件处理程序中）。

或者，如果您想保持选择框不变，请在提交表单之前为选择框的每个选项创建一个隐藏字段（仍然使用 JavaScript，在表单提交事件处理程序中）。

# ios - 当用户只有互联网时，让我的 iOS 应用程序正常工作的最佳方法是什么

> ID：14607951
> 
> 赞同：0
> 
> 时间：2013-01-30T15:44:30.393
> 
> 标签：ios, xcode, uialertview, reachability, appdelegate

我正在开发一个 iOS/iphone 应用程序，我希望用户能够真正拥有互联网以使该应用程序正常工作。

我从互联网上获取了一些数据，因此如果用户未连接，该应用程序将无法按预期工作。

我有很多观点，我想为此集成一个解决方案。

我想了很多方法来解决这个问题，但我不确定是否有更好的 1。

1.  在应用程序委托中添加对互联网的检查，didfinihlanchingwithoptions。问题 -> 仅当用户第一次打开应用程序时才会发生检查，而不是在他在调用后返回时发生，并且只会在 rootviewcontroller 上发生。

2.  添加签入视图将出现在每个视图中。这行得通，并且我以一种在尝试连接期间视图不会阻塞的方式进行检查。但是，如果视图被加载，然后用户断开连接怎么办。

我应该实现一个不断检查互联网的 NSTimer 吗？如果是，这对应用程序来说不会太重吗？如果否，我该怎么办？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:47:42.827

以下链接解释了检查互联网可用性所需了解的所有内容，Apple 提供了可访问性以及示例代码，您基本上不必为检查互联网可用性做太多事情，只需查看苹果提供的示例代码和你会得到你正在寻找的东西。这是链接[http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

# iphone - 为什么定义的 1600px 大整页图像（标题）在 iphone 上缩放

> ID：14607952
> 
> 赞同：0
> 
> 时间：2013-01-30T15:44:32.233
> 
> 标签：iphone, html, css

除了我的 iPhone4s safari 浏览器外，这个开发中的网站在许多不同的浏览器中看起来都很好。由于我不知道的原因，顶部的全宽图像是“比例”

有问题的网站： http: [//studioteknik.ca/stada/](http://studioteknik.ca/stada/)

问题是，为什么要附加缩放比例，以及如何使它像在桌面浏览器中一样完美。

其他子问题：您是否知道一个可以帮助使移动设备和桌面设备看起来相同的库，我的意思是图像而不是文本大小。

这个问题不是本地化的或精确的，它是跨浏览器兼容性的开发问题。提前致谢。

顺便说一句，我在 iPhone 模拟器在线测试它，女巫他们都非常糟糕，并没有真正展示现实，但他们正确地展示了所有网站！所以我对其他任何事情都更加神秘（而不是帮助）

为了证明我的观点，这里是我的 iphone 渲染的屏幕截图：http: [//studioteknik.ca/stackoverflow_question/stada.jpg](http://studioteknik.ca/stackoverflow_question/stada.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:48:27.713

寻找正确的东西（在 safari iphone 上调整大小的精灵）引导我找到正确的答案。这是解决方案和我发现的其他一些有趣且有用的信息。

来自：[http ://www.teknocat.org/blog/web-development/show/6/mobile-safari-background-image-scaling-quirk](http://www.teknocat.org/blog/web-development/show/6/mobile-safari-background-image-scaling-quirk)

```
It turns out the reason for this is a resource limit on the iPhone - the amount of memory an image can use once downloaded and opened. This same limit applies to mobile Safari on the iPod and iPad. Note that this limit is nothing to do with the file size. The maximum limit for images is 1024x1024x3 (3,145,728). If the width and height dimensions of your image multiplied together exceed this value, the image will be down sized. The result can vary depending on the viewport size (whether you're on an iPhone or an iPad). 
```

和更多资源： [http ://www.thecssninja.com/css/high-res-sprites](http://www.thecssninja.com/css/high-res-sprites)

[http://coding.smashingmagazine.com/2012/08/13/coding-qa-with-chris-coyier-responsive-sprites-responsive-font-sizing-media-query-efficiency-more/](http://coding.smashingmagazine.com/2012/08/13/coding-qa-with-chris-coyier-responsive-sprites-responsive-font-sizing-media-query-efficiency-more/)

[http://www.studiopress.com/design/css-background-size-graphics.htm](http://www.studiopress.com/design/css-background-size-graphics.htm)

[http://perishablepress.com/target-iphone-and-ipad-with-css3-media-queries/](http://perishablepress.com/target-iphone-and-ipad-with-css3-media-queries/)

[http://css-tricks.com/snippets/css/media-queries-for-standard-devices/](http://css-tricks.com/snippets/css/media-queries-for-standard-devices/)

# facebook - Monodroid .jar 绑定问题

> ID：14607965
> 
> 赞同：2
> 
> 时间：2013-01-30T15:44:52.690
> 
> 标签：facebook, binding, xamarin.android, xamarin

我正在尝试使用 Facebook SDK 修复一些绑定错误。我在同一个类中有两个具有相同名称“setPermissions”的函数。绑定生成器生成`IntPtr`的`Monodroid`为每个`id_setPermissions_Ljava_util_List_`. 我需要通过将其中一个函数更改为不同的名称来解决此问题，以便绑定生成器不会创建相同的变量名称。

在弄清楚我需要在`Metadata.xml`文件中设置什么时，我陷入了困境。到目前为止我有这个：

```
<attr path="/api/package[@name='com.facebook']/class[@name='Session.OpenRequest']/method[@name='setPermissions']" name="managedName">OpenRequestSetPermission</attr> 
```

上述行的问题会将两个函数更改为相同的名称，而不是解决我在生成时遇到的问题`static IntPtr id_setPermissions_Ljava_util_List_;`

它们有不同的返回类型，但我不知道这是否有助于确定`Metadata.xml`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T09:46:16.383

有一些方法可以通过名称和签名来确定函数。例如，如果您有功能

```
int remove(int a);
int remove(int a, object b);
int remove(float a, object b); 
```

你可以找到第二个

```
<attr path="/api/package[@name='org.mapsforge.android.maps.overlay']/class[@name='OverlayList']/method[@name='remove' and count(parameter)=2 and parameter[1][@type='int']]" name="managedReturn">Java.Lang.Object</attr> 
```

也许有办法通过返回类型过滤函数，遗憾的是我不知道。

# android - 键盘没有出现，并且在弹出窗口出现后父视图上的按钮是可点击的

> ID：14607970
> 
> 赞同：1
> 
> 时间：2013-01-30T15:45:12.330
> 
> 标签：android

单击特定按钮后，屏幕上会出现一个弹出窗口。弹出窗口中有一个 edittext 对象，但我不能写它，因为键盘没有出现。其次，弹出窗口的父视图上的其他按钮仍然是可点击的。我该如何解决这些问题？我的代码：

edit_text_popup.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:padding="10dip"
    android:background="@color/conn_text" >

    <EditText
        android:id="@+id/editTextInPopup"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:hint="@string/hello_world"
        android:padding="5dip"
        android:background="@color/blue3">
    </EditText>
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:padding="10dip">
        <Button
            android:id="@+id/popupcommitbutton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/ok"/>

        <Button
            android:id="@+id/popupcancelbutton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/cancel"
            android:layout_alignParentRight="true" />
    </RelativeLayout>

</LinearLayout> 
```

弹出窗口被称为：

```
public class GroupConnections extends Activity implements OnClickListener {
    Category thiscat;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);     
        setContentView(R.layout.activity_group_connections);        
        View addMoreConnButton =findViewById(R.id.attachMorePeopleButton);
        View editPropButton = findViewById(R.id.editCategoryPropertiesButton);
        addMoreConnButton.setOnClickListener(this);
        editPropButton.setOnClickListener(this);

        //get selected category
        int catId = getIntent().getExtras().getInt("categoryid");
        thiscat = (Category)SocialRssModel.Instance().holders.get(catId);

        //set text views        
        TableRow tabler = (TableRow)findViewById(R.id.tableRow1);
        TextView cateNameTextView = (TextView)tabler.findViewById(R.id.numOfContentsTextView2);
        cateNameTextView.setText(thiscat.getName());

        tabler = (TableRow)findViewById(R.id.tableRow2);
        CheckBox enable = (CheckBox)tabler.findViewById(R.id.notificationCheckBox);
        enable.setChecked(thiscat.isSelected());
    }
    /**
     * Button listeners are specified
     */
    public void onClick(View v) {
        switch (v.getId()) {
            case R.id.attachMorePeopleButton:
                Intent i = new Intent(this, AddMoreConnections.class);
                startActivity(i);
                break;
            case R.id.editCategoryPropertiesButton:
                LayoutInflater layoutInflater = (LayoutInflater)getBaseContext().getSystemService(LAYOUT_INFLATER_SERVICE);
                View popupView = layoutInflater.inflate(R.layout.edit_text_popup, null);
                final PopupWindow editpopup = new PopupWindow(popupView,LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
                //specify cancel button
                View cancelbutton = popupView.findViewById(R.id.popupcancelbutton);
                cancelbutton.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View arg0) {
                        editpopup.dismiss();
                    }
                });
                //specify edittext
                editpopup.setSoftInputMode(LayoutParams.SOFT_INPUT_STATE_VISIBLE);
                editpopup.showAsDropDown(findViewById(R.id.editCategoryPropertiesButton), 0, -30);
                break;

            // More buttons go here (if any) ...
        }
    }
} 
```

AndroidManifest 中显示 softInputMode 的 Activity 标记未隐藏：

```
<activity
    android:name=".GroupConnections"
    android:label="@string/app_name" >
</activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:54:51.177

我有类似的问题。尝试在 manifest.xml 的活动标签中添加这一行：

```
android:windowSoftInputMode="stateVisible" 
```

将您的弹出对话框更改为活动，在您的 manifest.xml 中使用此代码，它将您的活动显示为对话框，您可以将其作为普通活动启动，但它显示这样一个对话框，这将更容易显示自定义对话框：

```
<activity
            android:name=".view.MyDialog"
            android:screenOrientation="portrait"
            android:windowSoftInputMode="stateVisible"
            android:theme="@android:style/Theme.Dialog" >
        </activity> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:07:16.653

我在以下链接上找到了解决方案：[EditText On A Popup Window](https://stackoverflow.com/questions/4134117/edittext-on-a-popup-window)

添加以下命令`editpopup.setFocusable(true);`可以解决这两个问题。

# javascript - 如何使用 jQuery getJSON() 访问从外部源接收的 JSON 元素？

> ID：14607973
> 
> 赞同：0
> 
> 时间：2013-01-30T15:45:14.760
> 
> 标签：javascript, jquery, json, parsing

我正在尝试使用以下方法从 JavaScript读取 JSON 信息（ [https://maps.googleapis.com/maps/api/geocode/json?address=Mountain+View+Amphitheatre+Parkway&sensor=false ）：](https://maps.googleapis.com/maps/api/geocode/json?address=Mountain+View+Amphitheatre+Parkway&sensor=false)

```
$.getJSON("https://maps.googleapis.com/maps/api/geocode/json?address="+city+"+"+steet+"&sensor=false", function(json) {
if (json.status == 'ZERO_RESULTS'){
    alert('Wrong input');
}
else{
// Here I would like to read json.results.geometry.location.lat 
}

}); 
```

但它不起作用。如果我尝试阅读 json.results，我会得到 [object Object]。因为打印 json 给了我同样的结果，我认为我可以继续使用句号，但它不起作用。

之后，我尝试遍历 json.results 并在将对象解析为数组之后，但一切都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:49:46.430

结果是一个对象数组。所以你应该尝试：

```
json.results[0].geometry.location.lat 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:51:54.087

`json.results`是一个数组，您必须访问其中的元素。

您拥有的代码正试图访问`location`object的属性`geometry`。

但是因为`json.results`是一个数组，所以`json.results.geometry`是`undefined`并且因此不能有一个属性。

如果您要检查控制台中的错误，您应该得到类似

`Uncaught TypeError: Cannot read property 'location' of undefined`

你想要的是访问`results`数组的元素，因为其中的每个元素都代表一个 gMaps 的搜索结果，然后它会保存你想要访问的信息。

例如`json.results[0]`会给你代表第一个搜索结果的对象， `json.results[1]`会给你第二个，依此类推。

所以如果你把它改成

```
$.getJSON("https://maps.googleapis.com/maps/api/geocode/json?address=Berlin+Alexanderplatz&sensor=false", function(json) {
if (json.status == 'ZERO_RESULTS'){
    alert('Wrong input');
}
else{
  console.log(json.results[0].geometry.location.lat) // 52.5218316
}

}); 
```

正如您所期望的那样，您将获得第一个结果的纬度。

这是一个[JSBin](http://jsbin.com/axesit/1/edit)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T15:51:37.083

results 是一个数组，您应该在其中循环：

```
for (var i = 0; i < json.results.length; i++) {
     console.log(json.results[i].geometry.location.lat);
} 
```

# css - 内容移出容器的菜单具有垂直背景

> ID：14607975
> 
> 赞同：3
> 
> 时间：2013-01-30T15:45:19.917
> 
> 标签：css, css-float

我想知道在 CSS+HTML 中实现下图的最佳方法。

我很难用语言解释我想要什么，所以我想一张图片会更清楚：

![在此处输入图像描述](../Images/5651a9de6b4a7f3fff770104b99b3098.png)

虽然第二和第三部分是可行的。我很想知道实现第一个（蓝色菜单）的最佳方法。如果我将页面分成三部分（基于菜单），在蓝色的情况下，我的 div 项必须浮动在菜单的水平宽度之外，但在垂直宽度内。

有智慧的人吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T15:59:11.727

[工作小提琴](http://jsfiddle.net/TpdqA/1/show/)

你可以看到我`position:relative`在父母和孩子身上使用过，让它从那个元素中`position:absolute`流出。`li`

```
ul {
    list-style:none;
    width:906px;
    height:600px;
}
li {
    float:left;
    display:inline-block;
    border:1px solid #ccc;
    width:300px;
    height:600px;
    text-align:center;
    position:relative;
}
.selected {
    background:yellow;
}
.div {
    position:absolute;
    left:-150px;
    width:600px;
    height:80px;
    border:1px solid #000;
    background:#fff;
    z-index:2;
}
#div-1 {
    top:30px;
}
#div-2 {
    top:140px;
}
#div-3 {
    top:250px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T15:58:20.587

你可以通过位置来做到这一点：绝对。

```
.blueDiv{
    position:relative; 
}
.innerDiv{
    position:absolute; 
    top: (your choice);
    left: 50%;
    margin-left: -(innerDivSize / 2);
} 
```

如果您没有内部元素的宽度......您可以尝试通过以下方式将它们向左和向右推：

```
.innerDiv{
    position:absolute; 
    top: (your choice);
    left: 0;
    right: 0;
} 
```

但这只有在父元素不在页面的最左边或最右边时才有效。

# c# - 如果我无权访问源代码，如何为 EXE 编写 GUI 包装器？

> ID：14607980
> 
> 赞同：1
> 
> 时间：2013-01-30T15:45:40.027
> 
> 标签：c#, batch-file, wrapper, exe

我正在考虑编写一个 GUI，它将充当测试套件的包装器，该套件目前是 .bat 和 .exe 的选择

我将如何实现这样的包装器？我已经使用 ProcessStartInfo 从 c# 中查看（并使用）运行 .bat 和 .exe（请参阅[C# ProcessStartInfo 读取 Output "live" (Concurrent)](https://stackoverflow.com/questions/14582794/c-sharp-processstartinfo-read-output-live-concurrent)）。

我将如何实施呢？一些 .exe 需要设置环境变量，是否可以在 C# 应用程序中为它启动的任何 .exe 设置这些变量？

是否可以用来自 C# 的实际调用替换 .bat 来运行每个命令？

以前有没有人写过类似的包装器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:07:50.603

如果您可以从命令行触发所需的 .exe 和 .bat 文件，那么您可以使用

```
System.Diagnostics.Process.Start("myProg.exe", "cmdParam"); 
```

使用参数 cmdParam 启动 myProg.exe。从那里我只需为您要运行的每个程序（或一组程序）打开一个带有按钮的 WinForms 应用程序，然后在单击处理程序代码中启动它们。当然，您需要知道文件的路径，但您总是可以在尝试使用它们之前添加一些逻辑来检查它们是否存在。

如果你想变得聪明，那么你可以挂钩标准文件打开对话框来定位它们，然后添加一个文本框来输入该命令行参数字符串，这样你就可以拥有：

```
public class MyBatchFile
{
    public string Name { get; set; }
    public string FilePath { get; protected set; }
    public string DefaultParams { get; protected set; }

    public MyBatchFile(string filePath, string defaultParams)
    {
        FilePath = filePath;
        DefaultParams = defaultParams;
    }

    public string Run(string params = null)
    {
        System.Diagnostics.Process.Start(FilePath, (params ?? DefaultParams));
    }
} 
```

你可以让你的程序保留一个内部`List<Program>`来存储这些。如果你想变得*非常*聪明，那么你可以添加一个方法来将该列表序列化到一个文件中，然后添加一些代码来读回该文件并验证它描述的文件是否仍然存在，现在你有一个整洁的小程序启动 GUI，可以记住您的批处理文件和命令行工具的位置，并提供一个很好的简单界面来启动它们。您甚至可以添加一种将它们分组的方法，这样您就可以一键运行多个操作。

如果不出意外，这个答案已经解释了为什么我总是有一个编程项目在进行中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T17:57:18.120

> 一些 .exe 需要设置环境变量，是否可以在 C# 应用程序中为它启动的任何 .exe 设置这些变量？

使用[`ProcessStartInfo.EnvironmentVariables`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.environmentvariables.aspx)属性

> 是否可以用来自 C# 的实际调用替换 .bat 来运行每个命令？

对于任意批处理文件编号。这是因为批处理文件可以具有控制流语句（`loops`和`if`）。当然，对于给定的批处理文件，您可以手动转换它。

# asp.net - ASP.NET MVC 4 应用程序无法在 .NET 3.5 上运行

> ID：14607987
> 
> 赞同：1
> 
> 时间：2013-01-30T15:45:58.880
> 
> 标签：asp.net, iis, asp.net-mvc-4, .net-3.5, .net-4.5

我们有 1 台产品和 1 台开发服务器，均运行 .NET 3.5。我正在尝试构建一个 ASP.NET MVC 4 应用程序，但它至少需要 .NET 4.0。

我不能只购买另一台 IIS 服务器，也不能升级现有的服务器，因为还有其他更大的应用程序在 .NET 3.5 上运行。

我有哪些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T15:52:22.817

如果您无法升级到 .NET Framework 4.0 并且绑定到 .NET Framework 3.5，那么您将不得不将您的应用程序降级到 MVC 2.0。这应该不难，除非您使用大量仅在 MVC 4.0 中而不在 MVC 2.0 中的新功能。话虽如此，您甚至可以为其中一些（如果不是全部）创建变通方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T05:42:53.413

您可以并排运行 Asp.Net 2.0 和 Asp.Net 4.0。在此处查找更多信息

[http://msdn.microsoft.com/en-us/library/a99txfy5(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/a99txfy5(v=vs.100).aspx)

# asp.net - ReportViewer 提交后重置参数

> ID：14607989
> 
> 赞同：1
> 
> 时间：2013-01-30T15:46:03.953
> 
> 标签：asp.net, reportviewer, reportviewer2008

我正在`ReportViewer`控件中显示远程报告。报告加载了一些默认参数。到目前为止一切正常。

但是当我更改一些输入值并点击时`View Report`，报告只会显示具有默认值的数据。我在输入字段中更改的参数也被重置。

我拥有的所有代码都是这样的：

# apsx

```
<rsweb:ReportViewer ID="ReportViewer1" runat="server" Font-Names="Verdana"
    Font-Size="8pt" Height="642px" ProcessingMode="Remote" Width="100%">
    <ServerReport ReportPath="http://server.com/Product/Dashboards/test.rdl" 
        ReportServerUrl="http://server.com/ReportServer" />
</rsweb:ReportViewer> 
```

**CodeBehind**基本上是空的。它现在只有一个空的`Page_Load`.

这就是我的全部代码。

但这感觉像是一个 ViewState 问题？但我不知道在哪里看。

任何人都知道为什么当我按下`View Report`按钮时参数会重新设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T10:32:34.960

我通过在后面的代码中自己设置参数解决了这个问题。因此，当提交报告时，我会获取所有输入的数据，并将其放入`ReportParameters`集合中。

但不幸的是，这并不像人们想象的那么容易和直接。起初你可能会认为这是存储在：`YourReport.ServerReport.GetParameters()`. 但事实**并非**如此！

要从您的报告中获取提交的值，您可以使用以下代码：

# 获取报告提交参数

```
public ReportParameter[] GetCurrentParameters(Microsoft.Reporting.WebForms.ReportViewer viewer)
{
    Control params1Area = FindParametersArea(viewer);
    List<ReportParameter> params1 = new List<ReportParameter>();
    FindParameters(params1Area, params1);
    return params1.ToArray();
}

private Control FindParametersArea(Microsoft.Reporting.WebForms.ReportViewer viewer)
{
    foreach (Control child in viewer.Controls)
    {
        if (child.GetType().Name == "ParametersArea")
            return child;
    }

    return null;
}

private void FindParameters(Control parent, List<ReportParameter> params1)
{
    Type _ParameterControlType = System.Reflection.Assembly.GetAssembly(typeof(Microsoft.Reporting.WebForms.ReportViewer)).GetType("Microsoft.Reporting.WebForms.BaseParameterInputControl");

    ReportParameter param;
    Microsoft.Reporting.WebForms.ReportParameterInfo paramInfo;
    String[] paramValues;
    foreach (Control child in parent.Controls)
    {
        if (_ParameterControlType.IsAssignableFrom(child.GetType()))
        {
            paramInfo = (Microsoft.Reporting.WebForms.ReportParameterInfo)GetPropertyValue(child, "ReportParameter");
            if (paramInfo == null)
                continue;

            paramValues = (string[])GetPropertyValue(child, "CurrentValue");
            if (paramValues != null && paramValues.Length > 0)
            {
                param = new ReportParameter();
                param.Name = paramInfo.Name;
                param.Values.AddRange(paramValues);
                params1.Add(param);
            }
        }
        FindParameters(child, params1);
    }
}

public object GetPropertyValue(object target, string propertyName)
{
    return target.GetType().GetProperty(propertyName, System.Reflection.BindingFlags.IgnoreCase | System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic | System.Reflection.BindingFlags.Public).GetValue(target, null);
} 
```

来源：[http](http://forums.asp.net/t/1057747.aspx/1) ://forums.asp.net/t/1057747.aspx/1 （也是 Visual Basic 示例）

您只需使用以下代码行即可调用这些方法。最好在`if(IsPostBack)`您的范围内`Page_Load`。

```
ReportParameter[] reportParameters = GetCurrentParameters(ReportViewer1); 
```

如果您还有自定义文本字段，则可以覆盖提交的值。您可以像这样轻松地做到这一点：

```
reportParameters[4] = new ReportParameter("year", "2013", true); 
```

您显然必须知道什么参数存储在 index `4`。但是您也可以创建一个简单的查找函数来搜索`reportParameter`具有特定名称的 。所以在我的情况下`year`。

# 简单的参数查找

```
protected void ChangeParameterValue(String name, String newValue, ref ReportParameter[] parameters)
{
    foreach (ReportParameter param in parameters)
    {
        if (String.Equals(param.Name, name))
        {
            param.Values[0] = newValue;
            break;
        }
    }
} 
```

你像这样使用它：

```
ChangeParameterValue("year", "2013", ref reportParameters); 
```

这样您就不必担心`index`放置某个参数的位置。

# git - Gerrit 和 Gitblit 裸仓库设置

> ID：14607990
> 
> 赞同：0
> 
> 时间：2013-01-30T15:46:03.907
> 
> 标签：git, gerrit, gitblit

我正处于设置 Gerrit 的早期阶段，并意识到我需要一份由 gitblit 托管的“裸仓库”副本。如果我理解文档 Gerrit 也需要有一个裸仓库。

我想知道将 Gerrit 指向与我的 Gitblit 相同的存储库（在安装 gerrit 要求本地存储库）是否是一个好主意，它们都在不同端口的同一服务器上运行。或者我应该将它们分开并有两个裸回购。一个用于 gitblit，一个用于 gerrit。

您的设置如何？你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T20:30:56.330

Gerrit 支持其他工具对其背后的存储库进行更改，因此除非 Gitblit 进行任何缓存并且可能会被 Gerrit 所做的更改弄糊涂，否则这应该可以正常运行。我会说试一试 - 拥有一个存储库而不是必须保持同步的 2 个存储库要好得多。

# jasper-reports - Jasper 报告栏布局

> ID：14607993
> 
> 赞同：6
> 
> 时间：2013-01-30T15:46:13.197
> 
> 标签：jasper-reports, ireport

我有一个 Jasper 报告，它有一个详细信息部分，在详细信息部分内部是一个来自数据库的单个字段，该字段被打印出来。因此，如果我的查询返回 100 行，我会得到 100 行，这会生成一个大约 10 页长的报告，因为 10 条记录适合一页。

有没有办法可以在列中打印该字段，以便我可以在页面上放置 40 条记录，而不是 10 条？（通过有 4 列，每列 10 列）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T15:58:06.457

您可以配置多列报告。如果您使用的是 iReport，请在*Report Inspector*中右键单击报告名称并选择*Page Format*。在*Columns*部分中，将 Columns 从`1`增加到`4`，如果需要，可以配置*Space*以定义列之间的距离。如果单击报告，您还可以在“*属性*”面板中选择“*打印顺序”。*

 *在报表设计器中，您将字段拖到详细信息带的第一列中。

JRXML 中添加的属性位于`<jasperreports ...`标记中：

*   `columnCount="4"`: 4 列
*   `printOrder="Horizontal"`: 成交单是水平的。

附上 JRXML 以供进一步参考：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report8" language="groovy" columnCount="4" printOrder="Horizontal" pageWidth="595" pageHeight="842" columnWidth="138" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="5e2835cc-bc36-4f77-8631-08a8deaa28d7">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <queryString>
        <![CDATA[select 'A' as field]]>
    </queryString>
    <field name="field" class="java.lang.String"/>
    <detail>
        <band height="20" splitType="Stretch">
            <textField>
                <reportElement uuid="76707cdd-7dbe-477e-b3a4-38f9ba3bd003" x="0" y="0" width="136" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{field}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```*

# perl - 如何在 OSX 上通过 XAMPP 运行 Selenium Perl 脚本

> ID：14607998
> 
> 赞同：0
> 
> 时间：2013-01-30T15:46:23.907
> 
> 标签：perl, browser, selenium, xampp

目前正在使用在 OSX 上运行的 XAMPP 服务器。目前还使用与 selenium 一起工作的 perl 脚本。是否可以通过 xampp cgi-bin 运行 perl 脚本并启动 selenium 测试？我可以接受纯文本的输出（我可以稍后修复）

这个想法是从浏览器启动 selenium 测试脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:15:57.247

所以我们最终通过 Atlassian Bamboo 使用 ANT 脚本来完成这项工作。无论如何，我们正在部署 Bamboo 进行其他维护和构建问题。

然而，从我所做的研究来看，Jenkins-CI（以前的 Hudson-CI）似乎是一个免费的选项，可以做同样的事情，或者非常相似。