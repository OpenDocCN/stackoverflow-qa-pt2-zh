# StackOverflow 问答 13628000-13628999

# android - Android将数据返回到以前的活动

> ID：13628003
> 
> 赞同：10
> 
> 时间：2012-11-29T14:32:33.067
> 
> 标签：android, android-intent, android-activity

我需要你的帮助：我想在完成当前活动之前将额外数据放入上一个活动。

例如：活动 A 开始活动 B 当我完成活动 BI 时想要活动 A 中的新数据。

我怎么能这样做？非常感谢之前

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T14:35:21.243

Android SDK解释[在这里](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)，更好的SO问题答案+示例[在这里](https://stackoverflow.com/questions/10407159/android-how-to-manage-start-activity-for-result)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-29T14:34:49.240

用于`startActivityforResult`打开活动 B..然后覆盖`onActivityResult(int, int, Intent)`您的活动 A..

例子：

```
public class MyActivity extends Activity {
 ...

 static final int PICK_CONTACT_REQUEST = 0;

 protected boolean onKeyDown(int keyCode, KeyEvent event) {
     if (keyCode == KeyEvent.KEYCODE_DPAD_CENTER) {
         // When the user center presses, let them pick a contact.
         startActivityForResult(
             new Intent(Intent.ACTION_PICK,
             new Uri("content://contacts")),
             PICK_CONTACT_REQUEST);
        return true;
     }
     return false;
 }

 protected void onActivityResult(int requestCode, int resultCode,
         Intent data) {
     if (requestCode == PICK_CONTACT_REQUEST) {
         if (resultCode == RESULT_OK) {
             // A contact was picked.  Here we will just display it
             // to the user.
             startActivity(new Intent(Intent.ACTION_VIEW, data));
         }
     }
 }
} 
```

检查[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-30T07:50:00.183

使用 startActivityforResult 启动 Activity B。在 Activity A 中实现 override onActivityResult(int, int, Intent) 方法，在 ActivityB 中实现 setResult。

例子：

```
public class ActivityA extends Activity {

static final int REQUEST_CODE = 0;

 @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.xyz);

        DateBtn.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
                    startActivityForResult(new Intent(ActivityA.this,ActivityB.class), REQUEST_CODE);
                }
            });
    }

 protected void onActivityResult(int requestCode, int resultCode,
         Intent data) {
     if (requestCode == REQUEST_CODE) {
         if (resultCode == RESULT_OK) {
             // A contact was picked.  Here we will just display it
             // to the user.
             startActivity(new Intent(Intent.ACTION_VIEW, data));
         }
     }
 }
}

public class ActivityB extends Activity {

 @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.xyz);

        BackBtn.setOnClickListener(new OnClickListener() {
                public void onClick(View v) {
            Intent intent = new Intent();
            intent.putExtra("DATA", "your string");
            setResult(RESULT_OK, intent);
            finish();
                }
            });
    }

} 
```

# php - 两次单击以填充表单

> ID：13628007
> 
> 赞同：2
> 
> 时间：2012-11-29T14:32:44.253
> 
> 标签：php, javascript, ajax, forms

我知道以前有人问过这个问题，但我不是编码员（试图学习），所以我无法通过以前的问题找到任何看起来像我的网站编码的示例或答案。

问题：我的表单应该填充汽车品牌，然后它会自动填充模型。（填充品牌后，模型工作正常）。

但是我必须在表单的初始部分上单击两次才能填充数据。

我的表单代码的顶部：

```
 <td><b>Make:</b><br /> <span id="makesList"><select onclick="getMakes(<?php echo SITETYPE2 ?>)" onchange="getModels(this.value, <?php echo SITETYPE2 ?>)" class="required" id="makeid" name="makeid" >

Javascript/Ajax function

function getMakes(str)
{
  xmlHttp=GetXmlHttpObject();
  if (xmlHttp==null)
  {
    alert ("Your browser does not support AJAX!");
    return;
  }
  var url="/getmakes.php";
  url=url+"?typeid="+str;
  url=url+"&sid="+Math.random();
  xmlHttp.onreadystatechange=stateChangedMakes;
  xmlHttp.open("GET",url,true);
  xmlHttp.send(null);
} 
```

你能帮助我吗？请记住，我不是编码员，只是想了解其他人编码的内容。

谢谢马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:26:37.487

使用下拉菜单（选择）的最佳方法是使用 onchange。由于您已经触发了 onchange 事件，因此我将使用 mouseup ，因为它发生在单击事件之前。此外，客户端和您的 Web 服务器之间也可能存在延迟。尝试首先单击，然后单击屏幕以查看是否出现下一批结果。

此外，您的 php echo 语句末尾没有分号。这应该给出一个错误

# matlab - 索引必须出现在索引表达式的最后

> ID：13628015
> 
> 赞同：6
> 
> 时间：2012-11-29T14:33:04.533
> 
> 标签：matlab, loops, for-loop, indexing

我有一个向量`CD1`（120×1），我`CD1`分成 6 个部分。例如，第一部分从 CD1 中的第 1 行到第 20 行中提取，第二部分从 CD1 中的第 21 行到第 40 行中提取，依此类推。对于每个部分，我需要计算的[二阶差的](https://stackoverflow.com/questions/13022814/finding-means-of-the-absolute-values-of-second-differences-between-elements)`CD1`绝对值的平均值[数据](https://stackoverflow.com/questions/13022814/finding-means-of-the-absolute-values-of-second-differences-between-elements)。

```
for PartNo = 1:6   

    % extract data                
    Y(PartNo) = CD1(1 + 20*(PartNo-1):20*(PartNo),:); 

    % find the second difference  
    Z(PartNo) = Y(PartNo)(3:end) - Y(PartNo)(1:end-2);  

    % mean of absolute value
    MEAN_ABS_2ND_DIFF_RESULT(PartNo) = mean(abs(Z));    

end 
```

但是，上面的命令会产生错误：

```
()-indexing must appear last in an index expression for Line:2 
```

有什么想法可以更改代码以使其执行我想要的操作吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T14:57:39.327

`Y`当是元胞数组时经常会遇到此错误。对于元胞数组，

```
Y{1}(1:3) 
```

是合法的。花括号 ( `{}`) 表示*数据提取*，因此这意味着您要*提取*存储在元胞数组中位置 1 的数组，然后引用该数组的元素 1 到 3。

符号

```
Y(1)(1:3) 
```

不同之处在于它不提取数据，但它*引用*单元格的位置 1。这意味着第一部分 ( `Y(1)`) 返回一个*cell* -array，在您的情况下，它包含一个数组。因此，您将无法像以前那样直接访问常规数组。

Matlab 中一个臭名昭著的限制是您不能进行间接或双重引用，这实际上就是您在这里所做的。

因此错误。

现在，要解决：我怀疑用花括号替换一些普通的大括号可以解决问题：

```
Y{PartNo} = CD1(1+20*(PartNo-1):20*PartNo,:);   % extract data
Z{PartNo} = Y{PartNo}(3:end)-Y{PartNo}(1:end-2);  % find the second difference
MEAN_ABS_2ND_DIFF_RESULT{PartNo} = mean(abs(Z{PartNo}));  % mean of absolute value 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T15:04:30.517

我可能会建议一种不同的方法

```
Y = reshape(CD1, 20, 6);
Z = diff(y(1:2:end,:));
MEAN_ABS_2ND_DIFF_RESULT = mean(abs(Z)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T15:35:48.877

这不是 matlab 中的有效语句：

```
Y(PartNo)(3:end) 
```

您应该制作`Y`二维并使用此索引

```
Y(PartNo, 3:end) 
```

或提取矢量部分并直接使用它们，如果您使用所示的循环

```
for PartNo = 1:6   

    % extract data                
    Y = CD1(1 + 20*(PartNo-1):20*(PartNo),:); 

    % find the second difference  
    Z = Y(3:end) - Y(1:end-2);  

    % mean of absolute value
    MEAN_ABS_2ND_DIFF_RESULT(PartNo) = mean(abs(Z));    
end 
```

此外，由于`CD1`是一个向量，因此您不需要索引第二个维度。放下`:`

```
Y = CD1(1 + 20*(PartNo-1):20*(PartNo)); 
```

最后，您不需要循环。您可以`reshape`将向量转换为 size`CD1`的二维数组，其中的列是您的部分，并直接在结果矩阵上工作：`Y``20x6`

```
Y = reshape(CD1, 20, 6);
Z = Y(3:end,:)-Y(1:end-1,:);
MEAN_ABS_2ND_DIFF_RESULT = mean(abs(Z)); 
```

# matrix - squiz matrix 显示用户输入的搜索词

> ID：13628021
> 
> 赞同：0
> 
> 时间：2012-11-29T14:33:21.880
> 
> 标签：matrix, content-management-system

我的目标是在 squiz 矩阵中做一个搜索功能，我想做的是使用这个将用户搜索词放在结果页面上：

请注意，是在搜索中创建时输入的字段名称

%_query_terms%

这将显示用户在搜索字段中输入的术语。

我的关键字是：

```
%queries_search_query_query_terms% 
```

谁能帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T19:16:25.363

右键单击您的搜索资产并转到搜索字段屏幕。记下您的搜索字段的名称。可以说是`xyz`。您的关键字将是`%xyz_query_terms%`

或者

你可以这样做 - `%globals_get_queries_search_query%`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:09:49.807

@Anton Palitsyn 的回答是正确的。从 Squiz Matrix 手册中它说

> %_query_terms%：在“搜索字段”屏幕上创建时输入的字段名称在哪里。例如，如果您输入了名称 Keyword，这将是 %keyword_query_terms%。这将显示用户在搜索字段中输入的术语。

搜索页面关键字替换可以在[http://manuals.matrix.squizsuite.net/search/appendices/keyword-replacements找到](http://manuals.matrix.squizsuite.net/search/appendices/keyword-replacements)

您应该查看[http://manuals.matrix.squizsuite.net/search/chapters/search-page](http://manuals.matrix.squizsuite.net/search/chapters/search-page)，因为它包含您需要的所有信息。

# css - 如何使用图层定位图形按钮

> ID：13628026
> 
> 赞同：0
> 
> 时间：2012-11-29T14:33:36.720
> 
> 标签：css

我有这个页面（下），我想在屏幕截图的右下角（价格右侧）放置一个图形按钮

如何用几行代码做到这一点？

截屏：

![在此处输入图像描述](../Images/903634f11d8e15d6d5bbcd80fff31e0e.png)

代码：

```
<div class="content-1g">
    <div class="content-1-1g">
        </div>
    <div class="content-1-2g"><p class="none"><%# Eval("TName")%></p>
            <div class="content-1-3g"><p><%# Eval("TDetails")%></p></div>
            <div class="content-1-3g">Adult: £<%# Eval("TPriceadult")%> </div>
            <div class="content-1-3g">Senior/Student: £<%# Eval("TPricesenior")%> </div>
            <div class="content-1-3g">Child: £<%# Eval("TPricechild")%> </div>
    </div>
</div> 
```

CSS：

```
.content-1g {
    float: left;
    width: 836px;
    padding: 0px 32px 0px 32px;
/*  background-color: White;
    border: 1px solid orange; */
}

.content-1-1g 
{
    float: left;
    width: 269px;
    height: 202px;
    margin:0px 20px 0px 0px;
    padding: 0px;
    background: url('../images/Chinatown-experience-logo.png') no-repeat left top;
}

.content-1-2g {
    float: right;
    /*width: 591px; */
    width: 547px;
    padding: 0px 00px 0px 0px;
    font: 100% "Trebuchet MS", "Lucida Sans Unicode", "Lucida Grande", "Lucida Sans", Arial, sans-serif;
    color: #FFFF00;
    text-align: justify;
    vertical-align: top;
}

.content-1-3g {
    float: right;
    /*width: 591px; */
    width: 547px;
    padding: 0px 00px 0px 0px;
    font: 100% "Trebuchet MS", "Lucida Sans Unicode", "Lucida Grande", "Lucida Sans", Arial, sans-serif;
    color: #FFFFFF;
    text-align: justify;
    vertical-align: top;
} 
```

谢谢茶

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:36:55.317

带有“唐人街”标题的是按钮？

您可以将其绝对定位，并为其设置右值和下值：

```
position: absolute;
right: 10px;
bottom: 10px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:39:16.660

我认为您需要将产品规格拆分为两个 div 并将它们左右浮动。像这样的东西：

```
<div class="content-1g">
<div class="content-1-1g">

</div>
<div class="content-1-2g">
    <p class="none"><%# Eval("TName")%></p>
    <div class="content-1-3g"><p><%# Eval("TDetails")%></p></div>
    <div class="content-left">
            <div class="content-1-3g">Adult: £<%# Eval("TPriceadult")%> </div>
            <div class="content-1-3g">Senior/Student: £<%# Eval("TPricesenior")%> </div>
            <div class="content-1-3g">Child: £<%# Eval("TPricechild")%> </div>
    </div>
    <div class="content-right">
        <!-- Your button -->
    </div>
</div> 
```

对于 CSS：

```
.content-left {
    float: left;
    width: 273px;
}

.content-right {
    float: left;
    width: 273px;
} 
```

在按钮宽度处调整右侧 div 的大小。希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T14:43:17.663

将此按钮放在文本的末尾，然后：

```
.your_button {
    float: right;
    display: block;
    clear: both;
} 
```

# neo4j - neo4j 自动索引项损坏或孤立

> ID：13628033
> 
> 赞同：2
> 
> 时间：2012-11-29T14:33:47.360
> 
> 标签：neo4j

我以某种方式删除了一个没有自动索引条目更新的节点。现在，当我使用自动索引查询丢失的节点时

```
node:index:node_auto_index:uname:test 
```

我收到以下错误：

```
Node[19220] not found. This can be because someone else deleted this entity while we were trying to read properties from it, or because of concurrent modification of other properties on this entity. The problem should be temporary. 
```

如何清理索引以刷新孤立索引条目并防止在生产数据库中发生这种情况

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:35:03.677

FWIW 此问题已得到修复，因此实体在删除时将自动从自动索引中删除。1.9 将包含此修复程序。

# c++ - 如何在 Linux 上使用 gcc 编译 intel rand_sse？

> ID：13628034
> 
> 赞同：3
> 
> 时间：2012-11-29T14:33:46.780
> 
> 标签：c++, gcc, random, sse

我尝试编译使用 SSE2 的英特尔提供的随机数生成器函数。如果我尝试编译以下代码：

```
/////////////////////////////////////////////////////////////////////////////
// The Software is provided "AS IS" and possibly with faults. 
// Intel disclaims any and all warranties and guarantees, express, implied or
// otherwise, arising, with respect to the software delivered hereunder,
// including but not limited to the warranty of merchantability, the warranty
// of fitness for a particular purpose, and any warranty of non-infringement
// of the intellectual property rights of any third party.
// Intel neither assumes nor authorizes any person to assume for it any other
// liability. Customer will use the software at its own risk. Intel will not
// be liable to customer for any direct or indirect damages incurred in using
// the software. In no event will Intel be liable for loss of profits, loss of
// use, loss of data, business interruption, nor for punitive, incidental,
// consequential, or special damages of any kind, even if advised of
// the possibility of such damages.
//
// Copyright (c) 2003 Intel Corporation
//
// Third-party brands and names are the property of their respective owners
//
///////////////////////////////////////////////////////////////////////////
// Random Number Generation for SSE / SSE2
// Source File
// Version 0.1
// Author Kipp Owens, Rajiv Parikh
////////////////////////////////////////////////////////////////////////

#ifndef RAND_SSE_H
#define RAND_SSE_H
#include "emmintrin.h"
#include <time.h>

//#define COMPATABILITY
//define this if you wish to return values similar to the standard rand();

void srand_sse( unsigned int seed );
void rand_sse( unsigned int* );

__declspec( align(16) ) static __m128i cur_seed;

void srand_sse( unsigned int seed ) {
    cur_seed = _mm_set_epi32( seed, seed+1, seed, seed+1 );
}

inline void rand_sse( unsigned int* result ) {
    __declspec( align(16) ) __m128i cur_seed_split;
    __declspec( align(16) ) __m128i multiplier;
    __declspec( align(16) ) __m128i adder;
    __declspec( align(16) ) __m128i mod_mask;
    __declspec( align(16) ) __m128i sra_mask;
    __declspec( align(16) ) __m128i sseresult;
    __declspec( align(16) ) static const unsigned int mult[4] = { 214013, 17405, 214013, 69069 };
    __declspec( align(16) ) static const unsigned int gadd[4] = { 2531011, 10395331, 13737667, 1 };
    __declspec( align(16) ) static const unsigned int mask[4] = { 0xFFFFFFFF, 0, 0xFFFFFFFF, 0 };
    __declspec( align(16) ) static const unsigned int masklo[4] = { 0x00007FFF, 0x00007FFF, 0x00007FFF, 0x00007FFF };

    adder = _mm_load_si128( (__m128i*) gadd);
    multiplier = _mm_load_si128( (__m128i*) mult);
    mod_mask = _mm_load_si128( (__m128i*) mask);
    sra_mask = _mm_load_si128( (__m128i*) masklo);
    cur_seed_split = _mm_shuffle_epi32( cur_seed, _MM_SHUFFLE( 2, 3, 0, 1 ) );

    cur_seed = _mm_mul_epu32( cur_seed, multiplier );
    multiplier = _mm_shuffle_epi32( multiplier, _MM_SHUFFLE( 2, 3, 0, 1 ) );
    cur_seed_split = _mm_mul_epu32( cur_seed_split, multiplier );

    cur_seed = _mm_and_si128( cur_seed, mod_mask);
    cur_seed_split = _mm_and_si128( cur_seed_split, mod_mask );
    cur_seed_split = _mm_shuffle_epi32( cur_seed_split, _MM_SHUFFLE( 2, 3, 0, 1 ) );
    cur_seed = _mm_or_si128( cur_seed, cur_seed_split );
    cur_seed = _mm_add_epi32( cur_seed, adder);

    #ifdef COMPATABILITY

    // Add the lines below if you wish to reduce your results to 16-bit vals...
    sseresult = _mm_srai_epi32( cur_seed, 16);
    sseresult = _mm_and_si128( sseresult, sra_mask );
    _mm_storeu_si128( (__m128i*) result, sseresult );
    return;

    #endif

    _mm_storeu_si128( (__m128i*) result, cur_seed);
    return;
}

#endif

int main() {
    srand_see(time(0));

    return 0;
} 
```

我得到错误：

```
rand_sse.cpp:40:11: error: expected constructor, destructor, or type conversion before ‘(’ token
rand_sse.cpp: In function ‘void srand_sse(unsigned int)’:
rand_sse.cpp:43:5: error: ‘cur_seed’ was not declared in this scope
rand_sse.cpp: In function ‘void rand_sse(unsigned int*)’:
rand_sse.cpp:47:25: error: ‘align’ was not declared in this scope
rand_sse.cpp:47:27: error: ‘__declspec’ was not declared in this scope
rand_sse.cpp:47:29: error: expected ‘;’ before ‘__m128i’
rand_sse.cpp:48:29: error: expected ‘;’ before ‘__m128i’
rand_sse.cpp:49:29: error: expected ‘;’ before ‘__m128i’
rand_sse.cpp:50:29: error: expected ‘;’ before ‘__m128i’
rand_sse.cpp:51:29: error: expected ‘;’ before ‘__m128i’
rand_sse.cpp:52:29: error: expected ‘;’ before ‘__m128i’
rand_sse.cpp:53:29: error: expected ‘;’ before ‘static’
rand_sse.cpp:54:29: error: expected ‘;’ before ‘static’
rand_sse.cpp:55:29: error: expected ‘;’ before ‘static’
rand_sse.cpp:56:29: error: expected ‘;’ before ‘static’
rand_sse.cpp:58:5: error: ‘adder’ was not declared in this scope
rand_sse.cpp:58:40: error: ‘gadd’ was not declared in this scope
rand_sse.cpp:59:5: error: ‘multiplier’ was not declared in this scope
rand_sse.cpp:59:45: error: ‘mult’ was not declared in this scope
rand_sse.cpp:60:5: error: ‘mod_mask’ was not declared in this scope
rand_sse.cpp:60:43: error: ‘mask’ was not declared in this scope
rand_sse.cpp:61:5: error: ‘sra_mask’ was not declared in this scope
rand_sse.cpp:61:43: error: ‘masklo’ was not declared in this scope
rand_sse.cpp:62:5: error: ‘cur_seed_split’ was not declared in this scope
rand_sse.cpp:62:41: error: ‘cur_seed’ was not declared in this scope 
```

代码取自：[Intel](http://software.intel.com/en-us/articles/fast-random-number-generator-on-the-intel-pentiumr-4-processor/) 它是在 Ubuntu 64bit 和 GCC 4.6.3 上编译的，使用以下命令：

```
g++ rand_sse.cpp -O2 -march=core2 -msse2 -o rand_sse 
```

我错过了什么？关于我做错了什么的任何建议都会非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T14:47:14.363

只需卸下`__declspec (align(16))`零件。类型`__m128`等已经以正确的对齐方式声明。

PS。好的，还有一些数组，GCC 的方法是`__attribute__ ((aligned(16)))`.

如果没有该对齐属性，它会正常工作，但效率会降低。

# c++ - 为什么下面定义了一个强制转换运算符？

> ID：13628036
> 
> 赞同：0
> 
> 时间：2012-11-29T14:33:52.787
> 
> 标签：c++

从库中看到标题定义

```
operator const wchar_t*() const 
```

任何人都可以向我解释为什么上面定义了一个强制转换运算符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:39:41.783

例如，您想将一个对象转换为`wchar_t *`，将提供此运算符。

例如

```
MyString a("hello"); // is a string hold ansi strings. but you want change into wide chars.
wchar* w = (wchar_t*)a; // will invoke the operator~ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T14:51:21.957

它是语言的语法。C++ 允许您创建自己的`Operators`

例如：

```
struct A {
    bool operator==(const int i);
    bool operator==(const char c);
    bool operator==(const FOO& f);
} 
```

这允许使用方便地比较我们的类型，哪个语法看起来更好。`A a; if(a == 5) {}`另一种方法是实现一个`equals(int value)`看起来像`A a; if(a.equals(5)) {}`.

铸造也是如此。

```
struct Angle {
    float angle;
    operator const float() const {return angle;}
}

Angle theta;
float radius = 1.0f;
float x = radius*cos(theta);
float y = radius*sin(theta); 
```

总之，它只是语言的一个很好的特性，它使我们的代码看起来更漂亮、更易读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T15:00:21.610

表单的任何成员函数`operator typename()`都是转换函数。

`const wchar_t*`是一个类型名称，因此`operator const wchar_t*()`是一个转换函数。

# ios - UIPopoverController 中奇怪的 UITableViewCell 行为

> ID：13628040
> 
> 赞同：0
> 
> 时间：2012-11-29T14:34:15.533
> 
> 标签：ios, uitableview, uipopovercontroller

我有一个以编程方式创建的 UIPopoverController，它会弹出来自 .xib 的 UIViewController 的内容。UIViewController 包含一个（分组的） UITableView 和一个 UITableViewCell “原型”。当弹出框弹出时，将为所有需要的单元格复制单元格原型。单元格的数量超过了弹出框的大小，所以我可以滚动浏览所有单元格。

当弹出框弹出时，一切看起来都不错，单元格标签都左对齐。当我触摸 tableview 滚动时，所有单元格标签突然对齐到中心。当我将单元格向外滚动并向后滚动时，它们再次左对齐。在我将所有单元格向外滚动一次后，它们在余生中保持左对齐。我不知道是什么原因造成的……我的代码中没有任何内容可以改变单元格的对齐方式。这是一些代码：

```
UIViewController *editPopoverView = [[[ComponentViewEmptyEditPopover alloc] initWithNibName:@"ComponentViewEmptyEditPopover" bundle:nil] autorelease];
UIPopoverController* aPopover = [[UIPopoverController alloc] initWithContentViewController:editPopoverView];
aPopover.delegate = self;
[aPopover presentPopoverFromRect:sender.frame inView:self permittedArrowDirections:UIPopoverArrowDirectionLeft animated:YES]; 
```

从弹出视图控制器

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *theCell = nil;
    switch (indexPath.section)
    {
        case 0:
            theCell = [tableView dequeueReusableCellWithIdentifier:@"typeCell"];
            if (theCell == nil)
            {
                NSData *archivedData = [NSKeyedArchiver archivedDataWithRootObject:self.typeCell];
                theCell = [NSKeyedUnarchiver unarchiveObjectWithData:archivedData];
            }

            switch (indexPath.row)
            {
                case 0:
                    [theCell.textLabel setText:@"Empty"];
                    break;
                //
            }
            break;
    }
    return theCell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.section == 1)
        return 420;
    return 44;
} 
```

任何想法为什么会发生这种情况？我想这在某种程度上与细胞重用有关。

更新：就像我已经猜到的那样，它必须与重用有关。当我做

```
theCell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:@"theCell"]; 
```

一切正常。但是，我希望能够通过界面生成器更改单元格的设计......

更新 2：如果我注释掉 dequeueReusableCellWithIdentifier 行，所有单元格在滚动后都会回到中心对齐。

# jquery - 为什么我的正则表达式不起作用？

> ID：13628041
> 
> 赞同：1
> 
> 时间：2012-11-29T14:34:15.943
> 
> 标签：jquery, regex, url, segment

我需要匹配`/page/`URL 中后面的任何数字。

示例网址：

```
http://example.com/something/page/2/ 
```

我想从中得到什么：

```
2 
```

我写了这个，但由于某种原因，我得到了 NULL。

```
/page/(\d) 
```

我错过了什么吗？我写的正则表达式在[这个站点](http://gskinner.com/RegExr/)上测试它时工作，但我不能让它在 js 中工作。

当我运行这个：

```
console.log(url);
var mr =  url.match('/page/(\d)');
console.log(mr); 
```

我得到：

```
http://example.com/something/page/2/ theme.js:32
null 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T14:41:31.210

应该

```
/\/page\/(\d+)/ 
```

匹配大于 9 的页面

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T14:36:08.427

您可以使用

```
var nb = url.match(/\/page\/(\d)/)[1]; 
```

当你有一个`/`正则表达式时，它需要被转义。

请注意，我更喜欢使用该`/someregexp/`表示法，因为不需要在每次使用时都计算文字正则表达式。

# java - 输入/输出流 Java Servlet

> ID：13628045
> 
> 赞同：1
> 
> 时间：2012-11-29T14:34:29.480
> 
> 标签：java, google-app-engine, servlets, inputstream

我有一个关于在 Java Servlet 中使用`ServletInputStream`和可用的问题。`ServletOutputStream`首先，我将提供一些非常需要的上下文：

我正在处理的任务是在谷歌应用引擎中实现任务队列。我已经能够将任务添加到应用程序引擎并调用适当的工作人员。但是，我正在努力弄清楚如何将一个`ArrayList<>`可序列化的对象传递给工人的`doPost()`方法。普遍的方法显然是分别使用 HTTP 请求和响应对象的输入和输出流来处理 servlet 之间的这种通信。我已经广泛搜索，但无法找到一个明确的示例，说明如何准备这样一个数组列表以作为输出流传输，将其添加到第一个 servlet 的响应中，然后从第二个 servlet 的请求中检索它和最后将其转换回数组列表以用于`doPost()`方法。所以这基本上是我的问题。由于我对 Java 缺乏经验，我很难自己弄清楚这一切，而且我大部分时间都在努力解决它。

为了澄清一点，我将发布有`doPost()`问题的工人的方法：

```
protected void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException
{
    try
    {
        ArrayList<Quote> qs = /*Here the list needs to be read in.*/ null;

        EntityManager manager = EMF.get().createEntityManager();
        CarRentalModel.get().confirmQuotes(qs, manager);
    }
    catch (ReservationException e)
    {
    }       
} 
```

任何帮助将不胜感激。

先感谢您，

凯文

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:01:46.570

值得遵循 BalusC 的建议。如果您正在寻找一个简单快捷的解决方案，您可以使用 Java 的序列化来完成：

在您的 doPost() 方法中，您可以创建一个 ObjectInputStream，它从底层 servlet 输入流中读取数据并对数据进行反序列化（生成对象）。

```
ServletInputStream sis = req.getInputStream();
ObjectInputStream ois = new ObjectInputStream(sis);

ArrayList<Quote> qs = (ArrayList<Quote>) ois.readObject(); 
```

您可以使用 ObjectOutputStream 及其 writeObject() 方法在另一侧写入对象。如果这在现场不起作用，请在完成写入操作后尝试 .flush() 或 .close() 输出流以触发发送任何剩余的缓冲数据。

# android - 无法创建 Android AVD

> ID：13628048
> 
> 赞同：0
> 
> 时间：2012-11-29T14:34:35.580
> 
> 标签：android, emulation, android-sdcard, avd

我无法创建 android avd。每当我尝试通过 Eclipse 创建一个时，都会出现以下错误。我尝试了一切，但徒劳无功。我附上一张快照，请看一下。

![错误日志](../Images/c9ae03b80806cdc896128dce18b93f4c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:22:06.310

我认为工具目录中的 mksdcard 已损坏。因此，我从以下站点下载了另一个 mksdcard 文件：

[http://www.wuala.com/cerealkiller37/HTC/Sdk%20Android/android/tools/mksdcard.exe/](http://www.wuala.com/cerealkiller37/HTC/Sdk%20Android/android/tools/mksdcard.exe/)

有效！！！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:59:18.127

首先在命令行中尝试如下：“android create avd-nc 64M-myAvd tx”（x 为目标，您可以使用“android list targets”获取目标列表）。如果问题仍然存在，请确保您有写权限在目标目录中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T14:37:58.080

尝试将sdCard大小设置为64M

# asp.net-mvc-3 - 如何授权下载链接？

> ID：13628051
> 
> 赞同：1
> 
> 时间：2012-11-29T14:34:43.080
> 
> 标签：asp.net-mvc-3

我开发了一个软件并将其上传到我的网站（我的网站在.net 4 和 mvc3 上），当用户在我的网站上注册时可以看到下载链接并下载我的应用程序。

现在的问题是，当在我的主机中找到下载位置时，我如何在不注册的情况下私​​有化该用户可以下载我的应用程序。

他们可以通过在浏览器 URL 中输入下载地址来下载应用程序。我想知道文件共享服务器是如何工作的，例如你不能在浏览器中输入文件地址和下载文件。

这种情况有哪些途径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T14:42:13.833

您应该允许用户通过控制器操作下载文件，并且您应该禁止通过 IIS 中的浏览器直接访问文件夹（下载文件所在的位置）。

这篇博[文](http://prideparrot.com/blog/archive/2012/6/authorizing_folders_using_routeexistingfiles)将对您有所帮助。

# bash - Bash 启动和停止脚本

> ID：13628053
> 
> 赞同：1
> 
> 时间：2012-11-29T14:34:49.730
> 
> 标签：bash

我编写了一个 bash 脚本，它启动了许多不同的小部件（各种 Rails 应用程序）并在后台运行它们。我现在正在尝试编写一个恭维停止脚本来杀死由该启动脚本启动的每个进程，但我不确定处理它的最佳方法。

以下是我的启动脚本：

```
#!/bin/bash

widgets=( widget1 widget2 widget3 ) # Specifies, in order, which widgets to load
port=3000
basePath=$("pwd")

for dir in "${widgets[@]}"
do
  cd ${basePath}/widgets/$dir
  echo "Starting ${dir} widget."
  rails s -p$port &
  port=$((port+1))
done 
```

如果可能的话，我试图避免将 PID 保存到 .pid 文件中，因为它们非常不可靠。有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:19:57.587

一种可能性是使用手册页中描述`pkill`的开关：`-f`

```
-f     The pattern is normally only matched against the process name.  When -f is set, the full command line is used. 
```

因此，如果你想杀死`rails s -p3002`，你可以按照以下方式进行：

```
pkill -f 'rails s -p3002' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:39:55.693

为了将额外的依赖项保持在最低限度并确保我没有关闭不属于我的 rails 实例，我最终采用了以下方法：

**启动脚本**

```
#!/bin/bash

widgets=( widget1 widget2 widget3 ) # Specifies, in order, which widgets to load
port=3000
basePath=$("pwd")
pidFile="${basePath}/pids.pid"

if [ -f $pidFile ];
then
  echo "$pidFile already exists. Stop the process before attempting to start."
else
  echo -n "" > $pidFile

  for dir in "${widgets[@]}"
  do
    cd ${basePath}/widgets/$dir
    echo "Starting ${dir} widget."
    rails s -p$port &
    echo -n "$! " >> $pidFile
    port=$((port+1))
  done
fi 
```

**停止脚本**

```
#!/bin/bash

pidFile='pids.pid'

if [ -f $pidFile ];
then
  pids=`cat ${pidFile}`

  for pid in "${pids[@]}"
  do
    kill $pid
  done

  rm $pidFile
else
  echo "Process file wasn't found. Aborting..."
fi 
```

# jquery-ui - jQueryUI 手风琴和 Knockoutjs 遇到问题

> ID：13628054
> 
> 赞同：0
> 
> 时间：2012-11-29T14:34:51.073
> 
> 标签：jquery-ui, knockout.js, accordion

我已经能够在这里复制问题：http: [//jsfiddle.net/NE6dm/](http://jsfiddle.net/NE6dm/)

我在应用程序中使用了以下 HTML：

```
<div data-bind="foreach: items, jqAccordion: { active: false, collapsible: true }">
        <h3>
            <a href="#" data-bind="text: title"></a>
        </h3>
        <div>    
            hello
        </div> 
</div>
<button title="Click to return to the complaints list." data-bind="click: addItem">Add Item</button> 
```

这个想法是为一堆项目显示一个手风琴，这些项目将通过 Knockout 可观察数组动态添加/删除。

这是我使用的一些 JavaScript 代码：

```
// Tab.
var tab = function (questionSet) {
    this.id = questionSet.code;
    this.title = questionSet.description;
    this.questionSet = questionSet;
}; 
```

自定义淘汰赛绑定处理程序：

```
ko.bindingHandlers.jqAccordion = {
        init: function (element, valueAccessor) {
            var options = valueAccessor();
            $(element).accordion(options);
            $(element).bind("valueChanged", function () {
                ko.bindingHandlers.jqAccordion.update(element, valueAccessor);
            });
        },
        update: function (element, valueAccessor) {
            var options = valueAccessor();
            $(element).accordion('destroy').accordion(options);
        }
    };

var NonSequentialViewModel = function () {
    var items = ko.observableArray();

    items.push(new tab({ id: 23, description : 'Added Inline' }));

    var addItem = function() {
        items.push(new tab({ id: 5, description: 'Added by a click' }));
    };

    return {
        addItem: addItem,
        items: items
    }
}

var nonsequentialViewModel = new NonSequentialViewModel();    

ko.applyBindings(nonsequentialViewModel); 
```

现在的问题是——当我查看 HTML 页面时，“Added Inline”项看起来很好，因为我可以折叠和展开它。但是，当我单击“添加项目”按钮时，手风琴中添加了一个新项目，但它根本没有样式。例如：

![在此处输入图像描述](../Images/de17f7fab91373052c067eeafd4a31dc.png)

在上图中，第一个项目的样式正确，但是其余项目没有应用任何 jQuery UI 样式。基本上，任何动态添加的项目都没有应用任何手风琴样式。

我看过这个问题

[knockout.js 和 jQueryUI 创建手风琴菜单](https://stackoverflow.com/questions/9036343/knockout-js-and-jqueryui-to-create-an-accordion-menu)

我已经尝试使用问题中包含的 jsFiddle，但我不明白为什么我的代码没有相同的结果。

我希望其他人以前经历过这种情况并可以提供帮助。

编辑：

我进一步研究了这个问题，发现问题是这样的——当我向 oservable 数组添加一个新项目时，自定义处理程序的`update`方法没有执行。因此，手风琴的重绘永远不会发生。

我不明白为什么`update`不应该调用。这真是让我头疼！:)

编辑：我已经能够在这里复制问题：http: [//jsfiddle.net/NE6dm/](http://jsfiddle.net/NE6dm/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:46:55.930

您的`NonSequentialViewModel`构造函数不返回`items`数组。对此更新`return`声明：

```
return {
    items: items,
    addItem: addItem
} 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/MfegM/323/](http://jsfiddle.net/vyshniakov/MfegM/323/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T15:43:28.690

老问题，但我相信我遇到了同样的问题。我可能需要向 knockout.js 提交一个错误。我只是花了几个小时试图找出类似的问题。

简而言之...如果我加载您的 jsfiddle 并将淘汰赛的版本更改为 2.1.0，它似乎工作正常。这个：

```
<script type="text/javascript" src="http://cloud.github.com/downloads/SteveSanderson/knockout/knockout-2.2.0.debug.js"></script> 
```

对此：

```
<script type="text/javascript" src="http://cloud.github.com/downloads/SteveSanderson/knockout/knockout-2.1.0.debug.js"></script> 
```

（唯一的区别是版本 2.2.0 --> 2.1.0）

此外...我最终确定了几个版本：jquery：1.9.1 jquery-ui（组合）：1.9.2 knockoutjs：2.1.0

# javascript - 从 Flash AS2 调用 js 方法时遇到问题

> ID：13628055
> 
> 赞同：0
> 
> 时间：2012-11-29T14:35:00.097
> 
> 标签：javascript, flash, actionscript-2

首先，我是 Flash 中的一个完整的菜鸟，我真的不知道我在做什么：/（这是对朋友的帮助）

所以我看到很多人建议使用

```
getURL("javascript:myFunction();"); 
```

用于调用我在我的 html 文件（在头部）中拥有的方法 myFunction。但是，由于某种原因，该方法没有被调用。我在框架中尝试调用该方法的代码是

```
getURL("javascript:myFunction();");
stop(); 
```

它只是停止了结束的闪光电影。我的 html 下也有：

```
<param name="allowScriptAccess" value="always" /> 
```

并再次嵌套在`<!--[if !IE]>-->`.

（如果需要，我也可以添加 html 文件。）谁能解释我做错了什么？删除 stop(); 似乎也没有改变任何东西（除了正在重播的电影。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:40:17.930

你应该试试这个，使用 ExternalInterface 调用 js 函数。

```
import flash.external.ExternalInterface;

ExternalInterface.call("myFunction()"); 
```

正如我所检查的那样`getURL("javascript:myFunction();");`也应该工作。

# lucene - 使用通配符搜索 Content Manager 时出错

> ID：13628058
> 
> 赞同：7
> 
> 时间：2012-11-29T14:35:14.323
> 
> 标签：lucene, tridion, tridion-2011

我注意到，如果我搜索某些短语 Tridion Content Manager 会给我以下错误

```
Unable to get the list of search results.
Unable to process the Search Request. Invalid search query: (*out*) AND RepositoryId:tcm\:0\-4\-1 AND OrganizationalItemAncestorIds:tcm\:*\-135625\-2\. maxClauseCount is set to 10240
org.apache.lucene.search.BooleanQuery$TooManyClauses: maxClauseCount is set to 10240
at org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java:136)
at org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java:127)
at org.apache.lucene.search.ScoringRewrite$1.addClause
[...and so on] 
```

在上面的示例中，我正在搜索短语`*out*`。当我搜索短语`*a*`和其他各种较小的通配符查询时，它也会失败。如果我将搜索限制为仅项目标题，则`out*`工作正常并且工作正常。`*out*`无论我搜索“所有出版物”还是特定文件夹都没有关系。我是否将搜索结果限制在最小值 (50) 甚至都没有关系。

也许这与返回的结果数量有关？

完全相同的搜索在 Tridion 5.3 上运行良好，我认为它没有使用 lucene？

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T16:59:00.850

Lucene 不允许使用前导通配符（Tridion 的 R5.3 版本使用了允许它们的 Verity 实现），因为它被索引和搜索的方式。前导通配符有效地导致索引扫描每个术语以查找匹配项，而不是使用更典型和高性能的方法使用索引来查找匹配项（请参阅[Lucene 常见问题解答](http://wiki.apache.org/lucene-java/LuceneFAQ#What_wildcard_search_support_is_available_from_Lucene.3F)）

您可以通过调用启用此功能`QueryParser.setAllowLeadingWildcard(true)`，但在大多数情况下我强烈建议您不要这样做。

更好的方法可能是过滤需要前导通配符的术语，而不是将它们传递到查询中（如果前导通配符术语是唯一要搜索的术语，则实际上不可行）

此外，Lucene 提供了[ReverseStringFilter](http://lucene.apache.org/core/3_6_1/api/all/org/apache/lucene/analysis/reverse/ReverseStringFilter.html)，这是一个过滤器，它也反向索引所有术语。这可能是创建索引以启用前导通配符搜索的最佳方式。

马上，我认为这些都不能真正处理这样的查询`*out*`。将您的数据表示为 N-Grams 可能是一种选择（请参阅[NGramTokenizer](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/analysis/ngram/NGramTokenizer.html)）。

# ruby-on-rails - 当我将我的应用程序推送到 Heroku 时，如何自动化 resque 工作人员来更新他们的代码？

> ID：13628060
> 
> 赞同：1
> 
> 时间：2012-11-29T14:35:17.943
> 
> 标签：ruby-on-rails, heroku, resque

**问题是：**

当我对工作人员执行的代码进行更改时，在我推送新代码后，heroku 上正在运行的工作人员仍然与以前的工作人员一起执行。

然后我必须手动停止并重新开始resque。但我猜这是错误的，因为工人可能正在执行某些工作，并且必须等到完成才能取消注册。

这是我的**resque.rake**

```
require 'resque'
require "resque/tasks"

task "resque:setup" => :environment do
  ENV['QUEUE'] = '*' if ENV['QUEUE'].blank?

  Resque::Worker.all.each {|w| w.unregister_worker}
  Resque.after_fork do |job| 
    ActiveRecord::Base.establish_connection
  end
end

task "resque:clean_workers" => :environment do
  Resque::Worker.all.each {|w| w.unregister_worker}
end

desc "Alias for resque:work (To run workers on Heroku)"
task "jobs:work" => "resque:work"

Dir["#{Rails.root}/app/jobs/*.rb"].each { |file| require file } 
```

我想知道当我将我的应用程序推送到 heroku 时，是否可以使用新代码更新工作人员。怎么可能做到？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:24:52.693

Heroku 会在部署时重新启动所有进程作为平台功能——除了通过`heroku run`.

将工作进程类型添加到您的[Procfile](https://devcenter.heroku.com/articles/procfile)：

```
worker: bundle exec rake resque:work QUEUE=* 
```

Push，然后告诉 Heroku 运行你的 worker：

```
$ heroku ps:scale worker=1 
```

Heroku 现在将确保您`worker`始终运行一个测功机。当您的应用程序重新启动时（例如，在 push、a `heroku restart`、[rollback](https://devcenter.heroku.com/articles/releases#rollback)之后），或者您的工作人员以某种方式死亡，或者它所在的主机出现故障时，它会自动重新启动它。Heroku 甚至每天都会在新主机上优雅地关闭并重新启动您的工作进程，以清除临时文件，限制任何内存泄漏，并重新平衡测功网格周围的负载。

如果您在生产中 24x7 运行后台作业，这就是您想要的行为。

# maven - 使用 Eclipse 插件在项目上执行“mvn clean install”而不生成目标目录

> ID：13628061
> 
> 赞同：0
> 
> 时间：2012-11-29T14:35:20.170
> 
> 标签：maven, maven-2, eclipse-plugin, jenkins, sonarqube

我有一个具有 Eclipse 插件的项目。我已将所有源文件放在“ **src** ”目录下。当我在这个项目上执行**mvn clean install**时，它会在存储库中安装工件，但不会创建包含已编译 .class 文件的目标文件夹。

我需要编译的类，因为我想通过 Jenkins 将声纳与这个项目集成。

一旦我在 Eclipse 中导入这个项目，它就会创建一个包含所有已编译类文件的 bin 目录。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:41:00.820

在项目的主干位置从命令提示符尝试。在这里分享你的 pom.xml。您提供的信息含糊不清。

# jquery - 在 div 上使用 jquery scrolldown 时如何向下滚动整个页面

> ID：13628065
> 
> 赞同：1
> 
> 时间：2012-11-29T14:35:27.553
> 
> 标签：jquery

我是 jquery 的新手，所以请多多包涵！

当您单击其上方的图像时，我正在使用下面的代码滚动打开包含文本的 div。除了图像靠近屏幕底部时，这工作正常。然后包含文本的 div 打开，但它在折叠下方打开 - 即您必须向下滚动屏幕才能看到它。

是否有一种简单的方法可以添加到下面的代码中，当 div 向下滚动时将页面向上移动？这样用户就不必向下滚动页面来查看文本？

谢谢

```
$(document).ready(function() {
    //Set default open/close settings
$('.acc_container').hide(); //Hide/close all containers
$('.acc_trigger:first').next().hide(); //Add "active" class to first trigger, then show/open the immediate next container

//On Click
$('.acc_trigger').click(function(){
    if( $(this).next().is(':hidden') ) { //If immediate next container is closed...
        $('.acc_trigger').next().slideUp(); //Remove all "active" state and slide up the immediate next container
        $(this).toggleClass('active').next().slideDown(); //Add "active" state to clicked trigger and slide down the immediate next container

}
    return false; //Prevent the browser jump to the link anchor

});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:37:31.807

你可以使用这个：

演示：http: [//jsfiddle.net/SO_AMK/uecpG/](http://jsfiddle.net/SO_AMK/uecpG/)

jQuery：

```
$(document).ready(function() {
    $('.acc_container').hide();
    $('.acc_trigger:first').next().hide();
    $('.acc_trigger').click(function() {
        if ($(this).next().is(':hidden')) {
            $('.acc_trigger').next().slideUp();
            $(this).toggleClass('active').next().slideDown(400, function() {
                $(document).scrollTop($(this).prev().position().top);
            });
        }
        return false;
    });
});​ 
```

请注意，没有动画，实现一个将需要更多的代码，因为元素的高度不断变化，如果你有一个预先确定的高度，那么数学就很简单。

# c++ - 关闭时避免 wxFrame 销毁

> ID：13628067
> 
> 赞同：0
> 
> 时间：2012-11-29T14:35:35.727
> 
> 标签：c++, wxwidgets

我想创建在关闭时不会被销毁的 wxFrame，所以我可以稍后将它们显示回来，并且即使它们被隐藏也可以继续更新它们。

我尝试使用`SetExtraStyle(wxWS_EX_BLOCK_EVENTS)`跳跃，它不会将 wxCloseEvent 传播给曾经破坏它的人，但它没有帮助。

我找到了以下解决方案。我必须创建一个处理程序来处理关闭事件并隐藏框架。在这种情况下，事件不会被进一步传播。但这有点重，因为我需要跟踪处理程序并自己删除它。

有人有更聪明的解决方案吗？

```
 class FrameCloseHider
        : public wxEvtHandler
      {
      public:
        explicit FrameCloseHider(wxTopLevelWindow*);
        void internalOnQuit(wxCloseEvent&);
        wxTopLevelWindow* getFrame();
      private:
        wxTopLevelWindow*   frame_;
      };

     wxTopLevelWindow* FrameCloseHider::getFrame()
      {
        return this->frame_;
      }

      void FrameCloseHider::internalOnQuit(wxCloseEvent& obj)
      {
         this->frame_->Hide();
       }  

      FrameCloseHider::FrameCloseHider(wxTopLevelWindow* frame)
        :frame_(frame)
      {
        this->frame_->Connect(
          frame_->GetId(),
          wxEVT_CLOSE_WINDOW,
          wxCloseEventHandler(FrameCloseHider::internalOnQuit),
          NULL,
          this);
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:31:46.793

如果你看一下 wxEvtHandler 源代码，你会看到如果你提供用户数据来连接，那么它会在连接被破坏时被删除。

因此，在您的示例中，由于 wxEvtHandler 继承自 wxObject，您应该可以这样做：

```
this->frame_->Connect(
  frame_->GetId(),
  wxEVT_CLOSE_WINDOW,
  wxCloseEventHandler(FrameCloseHider::internalOnQuit),
  this, // ** Use the event handler as the user data.
  this); 
```

现在，由于您要确保仅在堆上创建它，请将 FrameCloseHider 的构造函数设为私有并添加一个静态函数来建立连接：

```
public:
    static void ConnectTo(wxTopLevelWindow* frame) {
        FrameCloseHider* obj = new FrameCloseHider(frame);
        frame->Connect(
          frame->GetId(),
          wxEVT_CLOSE_WINDOW,
          wxCloseEventHandler(FrameCloseHider::internalOnQuit),
          obj,
          obj);
    }
private:
      FrameCloseHider::FrameCloseHider(wxTopLevelWindow* frame)
        :frame_(frame)
      {
      } 
```

[注意：您可能应该通过使用 auto_ptr 并在连接调用后释放它来确保此异常安全] 您需要进行测试以确保对连接中的用户数据使用事件处理程序不会使其崩溃。从 wx 代码看起来应该没问题，但它是 wx 更复杂的方面之一，如果不花更多时间，我更难确定，而我并没有。

您可以使用一些模板等使其更通用。我已经做到了这一点，但使用了一个稍微不同的模式和一个不作为用户数据传递但有一个单独的对象来处理事件的单例事件处理程序。

# javascript - 如何使用 Javascript HTML5 裁剪自定义形状

> ID：13628069
> 
> 赞同：4
> 
> 时间：2012-11-29T14:35:39.903
> 
> 标签：javascript

我们如何使用 javascript 从图像中裁剪自定义形状？

本质上，我希望用户能够从照片中裁剪出一张脸。

像[www.jibjab.com](http://jibjab.com)这样的东西，他们用 Flash 来做，我们需要在 HTML5 画布上用 JS 来做。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:40:29.540

## 尝试这样的事情：

```
<!doctype html>
 <html>
  <head>
<style>
  body {
    margin: 0px;
    padding: 0px;
  }
  #myCanvas {
    border: 1px solid #9C9898;
  }
</style>
</head>
 <body>
<canvas id="myCanvas" width="578" height="200"></canvas>
<script>
  var canvas = document.getElementById('myCanvas');
  var context = canvas.getContext('2d');

  // begin custom shape
  context.beginPath();
  context.moveTo(170, 80);
  context.bezierCurveTo(130, 100, 130, 150, 230, 150);
  context.bezierCurveTo(250, 180, 320, 180, 340, 150);
  context.bezierCurveTo(420, 150, 420, 120, 390, 100);
  context.bezierCurveTo(430, 40, 370, 30, 340, 50);
  context.bezierCurveTo(320, 5, 250, 20, 250, 50);
  context.bezierCurveTo(200, 5, 150, 20, 170, 80);

  // complete custom shape
  context.closePath();
  context.lineWidth = 5;
  context.strokeStyle = 'blue';
  context.stroke();
</script>
 </body>
</html> 
```

# javascript - 即使选中了所有单选按钮，javascript验证也会发出警报

> ID：13628077
> 
> 赞同：0
> 
> 时间：2012-11-29T14:36:19.047
> 
> 标签：javascript

我已经尝试使用此代码在具有 3 个单选按钮输入的表单上设置验证，以便在未检查所有按钮时向用户发出警报！..但是当我尝试它时，即使检查了所有按钮，它也会给我错误警报..知道为什么吗？

这是我的表格

```
 <form name="form1" action="mark.php" onsubmit="return validateForm()" method="post"> 

     <tr>
        <th> Your attendance<font size="4" > </font></th>
        <td>  <input type="radio" name ="v1" value = "4"    onclick="updateTotal();"/></td>
        <td>  <input type="radio" name ="v1" value = "3"    onclick="updateTotal();" /></td>
        <td>  <input type="radio" name ="v1" value = "2"    onclick="updateTotal();" /></td>
        <td>  <input type="radio" name ="v1" value = "1"    onclick="updateTotal();" /></td>    
        </tr>

        <tr>
        <th > Your grades  <font size="4" > </font></th>
        <td>  <input type="radio" name ="v2" value = "4"    onclick="updateTotal();" /></td>
        <td>  <input type="radio" name ="v2" value = "3"    onclick="updateTotal();" /></td>
        <td>  <input type="radio" name ="v2" value = "2"    onclick="updateTotal();" /></td>
        <td>  <input type="radio" name ="v2" value = "1"    onclick="updateTotal();" /></td>    
        </tr>

        <tr>
        <th >Your self-control <font size="4" > </font></th>
        <td>  <input type="radio" name ="v3" value = "4"    onclick="updateTotal();" /></td>
        <td>  <input type="radio" name ="v3" value = "3"    onclick="updateTotal();" /></td>
        <td>  <input type="radio" name ="v3" value = "2"    onclick="updateTotal();" /></td>
        <td>  <input type="radio" name ="v3" value = "1"    onclick="updateTotal();" /></td>    
        </tr> 
```

我试过这个javascript代码

```
<script type="text/javascript">
function validateForm(formData){
    if(!this.v1.checked && !this.v2.checked && !this.v3.checked){
        alert('answer all questions please');
        return false;
    }
       return true;
    }
    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:54:06.327

第一个问题是您需要在 validateForm() 中传递表单：

```
<form name="form1" action="mark.php" onsubmit="return validateForm(this)" method="post"> 
                                                                   ^ pass this 
```

下一个问题是你正在检查`this.v1`什么时候`this`不存在，它应该是`formData.v1`.

最后一个问题是你不能检查一个单选按钮组是否被这样检查，`formData.v1`所以`nodeList`你需要循环它。请参阅下面使用辅助函数的示例`groupChecked()`。

```
 function groupChecked(group)
    {
        for(var i=0; i<group.length; i++)
        {
            if(group[i].checked)
            {
                return true;
            }
        }
        return false;
    }

function validateForm(formData){
    if(!(groupChecked(formData.v1) && groupChecked(formData.v2) && groupChecked(formData.v3))){
        alert('answer all questions please');
        return false;
    }
   return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:41:40.057

~~分别给定 A、B 和 C 单选按钮，除了选中所有按钮的情况**之外，您需要所有情况。**（其中一个按钮未选中）~~

 ~~```
!(A && B && C) 
```~~ 

或者换句话说：

```
!A || !B || !C 
```

翻译成代码是这样的：

```
if (!(this.v1.checked && this.v2.checked && this.v3.checked)) { 
```

 ~~经过一番挖掘，您不能只检查一组收音机中的一个是否像那样检查。您需要单独循环节点（this.v1[i].checked）并检查它们。如果你使用像 jQuery 这样的框架，那就更容易了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T14:56:09.053

如果您使用 jquery 会更容易，所以添加该行

```
<head>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
</head> 
```

并添加功能：

```
function validate(){
    $("input[name=v1]").each(function(){ 
       if($(this).is(":checked")){
           return false;
        } 
    });

    $("input[name=v2]").each(function(){ 
       if($(this).is(":checked")){
           return false;
        } 
    });

    $("input[name=v3]").each(function(){ 
       if($(this).is(":checked")){
           return false;
        } 
    });

    return true;
} 
```

所以......你可以重构这段代码。~~

# asp.net - 为 GridView 动态添加 ItemTemplate

> ID：13628078
> 
> 赞同：1
> 
> 时间：2012-11-29T14:36:23.397
> 
> 标签：asp.net, gridview

我正在将模板文件动态添加到动态添加的 gridview 控件中。

我添加这样提交的模板：

```
 TemplateField TmpCol = new TemplateField();
                        TmpCol.HeaderText = "";
                        TmpCol.ShowHeader = false;
                        rpt.Columns.Add(TmpCol);
                        TmpCol.ItemTemplate = new TemplateHandler(); 
```

班级：

```
public class TemplateHandler : ITemplate
{
    void ITemplate.InstantiateIn(Control container)
    {
        CheckBox cmd = new CheckBox();
        cmd.ID = "ckSkill";
        cmd.Text = --  want to give data text filed here or pass a custom  text

        container.Controls.Add(cmd);
    }

} 
```

**所以模板字段中的复选框我想给容器值。**

就像我们在 aspx 页面中所做的一样

```
 <%# Eval("demo") %> 
```

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:57:39.927

我需要像这样修改处理程序以使其工作

```
 public class TemplateHandler : ITemplate
{
    void ITemplate.InstantiateIn(Control container)
    {
        CheckBox cmd = new CheckBox();
        cmd.ID = "ckSkill";
        // cmd.Text = "tets";

        cmd.DataBinding += new EventHandler(this.BindData);

        //cmd.Click += new EventHandler(Dynamic_Method);
        container.Controls.Add(cmd);
    }

    public void BindData(object sender, EventArgs e)
    {
        CheckBox l = (CheckBox)sender;
        GridViewRow container = (GridViewRow)l.NamingContainer;

        l.Text = ((TableNameClass)container.DataItem).SkillText; // ((DataRowView)container.DataItem)["SkillText"].ToString();

    }

    protected void Dynamic_Method(object sender, EventArgs e)
    {
        ((CheckBox)sender).Text = "Hellooooo";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:51:33.207

在动态创建模板化字段时，您需要设置一些可用于确定列名的属性（例如 header tex）。完成后，您可以使用以下代码设置数据。

```
数据行视图驱动；
drv = ((DataRowView) container.DataItem);
cmd.Text = drv["姓氏"].ToString();

```

如需更详细的说明，请[使用这篇文章](http://msdn.microsoft.com/en-us/magazine/cc301573.aspx) 让我知道您是否需要更多帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-21T10:42:24.843

You can give container value by the handling row data bound event of gridview. Like.

```
protected void grdData_RowDataBound(object sender, C1GridViewRowEventArgs e)
 {
    string sText = Convert.ToString(((System.Data.DataRowView)             (e.Row.DataItem)).Row.ItemArray[0]); 

    CheckBox chkText = (CheckBox)e.Row.FindControl("ckSkill");
    chkText.Text = sText.ToString();
 } 
```

# python - 调用递归函数时出现 WMI 意外 COM 错误 -2147352567

> ID：13628083
> 
> 赞同：2
> 
> 时间：2012-11-29T14:36:41.527
> 
> 标签：python, wmi, scheduler

我对python相当陌生，作为我正在创建的程序的一部分，我正在尝试使用WMI来获取所有正在运行的进程及其当前处理器利用率的列表。我还使用线程事件调度程序每 30 秒调用一次。

```
import wmi
from threading import Timer
import time

c = wmi.WMI()
time_to_sleep  = 30

def get_process_info():
    process_info = {}    
    try:
        for process in c.Win32_Process ():
                id = process.ProcessID
                for p in c.Win32_PerfRawData_PerfProc_Process (IDProcess=id):
                    n1, d1 = long (p.PercentProcessorTime), long (p.Timestamp_Sys100NS)
                    n0, d0 = process_info.get (id, (0, 0))
                    try:
                        percent_processor_time = (float (n1 - n0) / float (d1 - d0)) *100.0
                    except ZeroDivisionError:
                        percent_processor_time = 0.0
                    process_info[id] = (n1, d1)
                    print id, process.Caption, str(percent_processor_time)
    finally: 
        Timer(time_to_sleep, get_process_info, ()).start()
        time.sleep(time_to_sleep) #Sleep while it loops

get_process_info() 
```

第一次运行时运行良好，但第二次运行时抛出错误：

```
Exception in thread Thread-1:
Traceback (most recent call last):
  File "C:\Python27\lib\threading.py", line 551, in __bootstrap_inner
    self.run()
  File "C:\Python27\lib\threading.py", line 755, in run
    self.function(*self.args, **self.kwargs)
  File "C:\Users\Administrator\workspace\WorkflowTesting\Workflow\Workflow.py", line 32, in get_process_info
    for process in c.Win32_Process ():
  File "C:\Python27\lib\site-packages\wmi.py", line 817, in query
    return self._namespace.query (wql, self, fields)
  File "C:\Python27\lib\site-packages\wmi.py", line 1009, in query
    return [ _wmi_object (obj, instance_of, fields) for obj in self._raw_query(wql) ]
  File "C:\Python27\lib\site-packages\wmi.py", line 1003, in _raw_query
    handle_com_error ()
  File "C:\Python27\lib\site-packages\wmi.py", line 241, in handle_com_error
    raise klass (com_error=err)
x_wmi: <x_wmi: Unexpected COM Error (-2147352567, 'Exception occurred.', (0, u'SWbemServicesEx', None, None, 0, -2147221008), None)> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:01:37.807

最好使用以下方法而不使用线程：

```
import wmi
import time

time_to_sleep  = 30

c = wmi.WMI()
process_info = {}    

while True:
    for process in c.Win32_Process ():
            id = process.ProcessID
            for p in c.Win32_PerfRawData_PerfProc_Process (IDProcess=id):
                n1, d1 = long (p.PercentProcessorTime), long (p.Timestamp_Sys100NS)
                n0, d0 = process_info.get (id, (0, 0))
                try:
                    percent_processor_time = (float (n1 - n0) / float (d1 - d0)) *100.0
                except ZeroDivisionError:
                    percent_processor_time = 0.0
                process_info[id] = (n1, d1)
                print id, process.Caption, str(percent_processor_time)
    time.sleep(time_to_sleep) 
```

我不确定睡眠时间是否有其他影响，但现在它似乎运作良好。我会怀疑如果我需要完成其他操作，可能会在一个单独的线程上执行这个？

# c# - 以编程方式取消选择 DataGrid 中的一行

> ID：13628085
> 
> 赞同：2
> 
> 时间：2012-11-29T14:36:49.063
> 
> 标签：c#, wpf, datagrid, selection, wpfdatagrid

我正在努力寻找解决方案。

我想要做的是只在 DataGrid 中选择某些行。SelectionMode 是 FullRow。一个例子是，如果用户试图拖动选择几行，而我不想选择其中的一行。在这种情况下，我希望仍然选择有效行，而不是无效行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:47:17.430

[这家伙想用 ListBox 做类似的事情](https://stackoverflow.com/questions/13567794/how-to-disallow-the-selection-of-an-interactive-listbox-item/13588128#13588128)。我相信该解决方案也可以适用于 DataGrid。

**编辑**

```
public static class DataGridRowEx
{
    public static bool GetCanSelect(DependencyObject obj)
    {
        return (bool)obj.GetValue(CanSelectProperty);
    }
    public static void SetCanSelect(DependencyObject obj, bool value)
    {
        obj.SetValue(CanSelectProperty, value);
    }
    public static readonly DependencyProperty CanSelectProperty =
        DependencyProperty.RegisterAttached("CanSelect", typeof(bool), typeof(DataGridRowEx), new UIPropertyMetadata(true, OnCanSelectChanged));

    private static void OnCanSelectChanged(DependencyObject sender, DependencyPropertyChangedEventArgs args)
    {
        var item = sender as DataGridRow;
        if (item == null)
            return;

        if ((bool)args.NewValue)
        {
            item.Selected -= RowSelected;
        }
        else
        {
            item.Selected += RowSelected;
            item.IsSelected = false;
        }
    }

    private static void RowSelected(object sender, RoutedEventArgs e)
    {
        var item = sender as DataGridRow;
        if (item == null)
            return;

        item.Dispatcher.BeginInvoke((Action)(()=>
        item.IsSelected = false));
    }
} 
```

要测试它：

```
public class ViewModel : INotifyPropertyChanged
{
    #region INotifyPropertyChanged values

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }
    #endregion

    public List<Dummy> Elements { get; set; }

    public ViewModel()
    {
        this.Elements = new List<Dummy>(){
            new Dummy() { CanSelect =true, MyProperty = "Element1"},
            new Dummy() { CanSelect =false, MyProperty = "Element2"},
            new Dummy() { CanSelect =true, MyProperty = "Element3"},
            new Dummy() { CanSelect =false, MyProperty = "Element4"},
            new Dummy() { CanSelect =true, MyProperty = "Element5"},
            new Dummy() { CanSelect =true, MyProperty = "Element6"},
            new Dummy() { CanSelect =true, MyProperty = "Element7"},
            new Dummy() { CanSelect =true, MyProperty = "Element8"},
            new Dummy() { CanSelect =false, MyProperty = "Element9"},
        };
    }
}

public class Dummy
{
    public bool CanSelect { get; set; }

    public string MyProperty { get; set; }

    public override string ToString()
    {
        return this.MyProperty;
    }
}

<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:local="clr-namespace:WpfApplication1"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="MainWindow"
    Width="525"
    Height="350"
    mc:Ignorable="d">
<Window.Resources>
    <Style x:Key="DataGridRowStyle" TargetType="{x:Type DataGridRow}">
        <Setter Property="local:DataGridRowEx.CanSelect" Value="{Binding CanSelect}" />
    </Style>
</Window.Resources>
<Window.DataContext>
    <local:ViewModel />
</Window.DataContext>
<Grid x:Name="LayoutRoot">
    <DataGrid ItemsSource="{Binding Elements}"
              RowStyle="{DynamicResource DataGridRowStyle}"
              SelectionUnit="FullRow" />
</Grid>
</Window> 
```

它适用于多选，即使在按下 shift 时也是如此。与 ListBoxItem 解决方案的唯一显着区别是取消选择必须使用 Dispatcher.BeginInvoke 进行排队，不知道为什么。这种方法的唯一警告是，如果 DataGrid 具有单个选择，则尝试选择不可选择的项目会取消选择当前选定的项目，或者如果 DataGrid 具有扩展选择，则取消选择所有项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T14:45:59.673

不是最好的方法，但您可以创建一个包含所选网格索引的继承类，然后如果选择了无效行，您只需将所选索引更改为最后一个有效索引

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T14:53:58.830

不是一个很好的解决方案，但您可以在 Mouse_Up 事件中取消选择行，所以让用户选择全部然后以编程方式取消选择，我没有测试过这个

```
private void dgvReport_MouseUp(object sender, MouseEventArgs e)
        {

            foreach (DataGridViewRow row in this.dgvReport.SelectedRows) {

                if (row.Cells[1].Value == "Invalid"){

                    this.dgvReport.Rows[row.Index].Selected = false;

                }

            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T12:08:58.847

这将起作用，

```
 int row = grdexam.SelectedIndex;
        DataGridRow rv =(DataGridRow)this.grdexam.ItemContainerGenerator.ContainerFromIndex(row);
        DataRowView rvv =(DataRowView)rv.Item;
        MessageBox.Show(rvv.Row[1].ToString()); 
```

# google-drive-api - changes.list 的错误行为：maxresults 参数

> ID：13628097
> 
> 赞同：1
> 
> 时间：2012-11-29T14:37:25.210
> 
> 标签：google-drive-api

当我`maxResults`在 change.list 请求中指定参数时，`maxResults`如果我的 Drive 包含超过`maxResults`. 但是，有时我得到的比这要少，如果我要求 637 更改，我会得到 635。

这是你们注意到的行为吗？

# wpf - 如何正确地将样式应用于 Content Presenter

> ID：13628101
> 
> 赞同：7
> 
> 时间：2012-11-29T14:37:30.947
> 
> 标签：wpf, styles

我正在处理这个关于链接按钮的问题的答案：

[https://stackoverflow.com/a/3564706/945](https://stackoverflow.com/a/3564706/945)

问题是 TextDecoration Underline 样式仅适用于自动生成的 TextBlocks。

```
<Button Style="{StaticResource LinkButton}">Text</Button> 
```

“文本”带有下划线

```
<Button Style="{StaticResource LinkButton}"><TextBlock Text='Text' /></Button> 
```

“文本”没有下划线

为什么它不适用于内容中的任何 TextBlock？

这是样式的相关部分：

```
<Style x:Key="LinkButton" 
       TargetType="Button"
       BasedOn="{StaticResource ResourceKey={x:Type Button}}"
       >

    <Setter Property="Width" Value="Auto"/>

    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Button">
                <ContentPresenter Content="{TemplateBinding Content}" 
                                  ContentTemplate="{TemplateBinding  ContentTemplate}"
                                  VerticalAlignment="Center"
                                  >
                    <ContentPresenter.Resources>
                        <Style TargetType="{x:Type TextBlock}">
                            <Setter Property="TextDecorations" Value="Underline" />
                        </Style>
                    </ContentPresenter.Resources>
                </ContentPresenter>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:36:41.810

我相信当您将框架元素放入 ContentControl 时，不会应用模板。如果您还将您的 TextBlock 样式声明为 Button 的资源，则它适用于这两种情况。

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:local="clr-namespace:WpfApplication1"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="MainWindow"
    Width="525"
    Height="350"
    mc:Ignorable="d">
<Window.Resources>
    <Style x:Key="LinkButton"
           BasedOn="{StaticResource ResourceKey={x:Type Button}}"
           TargetType="Button">

        <Setter Property="Width" Value="Auto" />

        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <ContentPresenter VerticalAlignment="Center"
                                      Content="{TemplateBinding Content}"
                                      ContentTemplate="{TemplateBinding ContentTemplate}" >
                        <ContentPresenter.Resources>
                            <Style TargetType="{x:Type TextBlock}">
                                <Setter Property="TextDecorations" Value="Underline" />
                            </Style>
                        </ContentPresenter.Resources>
                    </ContentPresenter>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>
<Window.DataContext>
    <local:ViewModel />
</Window.DataContext>
<Grid x:Name="LayoutRoot">
    <StackPanel>
        <Button Style="{StaticResource LinkButton}">Text</Button>
        <Button Style="{StaticResource LinkButton}">
            <Button.Resources>
                <Style TargetType="{x:Type TextBlock}">
                    <Setter Property="TextDecorations" Value="Underline" />
                </Style>
            </Button.Resources>
            <TextBlock Text="Text" />
        </Button>
    </StackPanel>
</Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-15T10:08:53.237

我昨天遇到了类似的麻烦。您可以将文本块的样式设置器向上移出模板节点，这样您的样式就不会在您更改控件内容后被删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-22T12:24:32.943

问题是你设置了`x:Key="LinkButton"`. 如果您设置密钥，则隐式样式将不起作用。删除密钥，它将应用于所有按钮

# iphone - 使用目标c将文件从应用程序上传到服务器

> ID：13628103
> 
> 赞同：1
> 
> 时间：2012-11-29T14:37:34.013
> 
> 标签：iphone, objective-c, ios, xcode, file

我正在使用此代码将音频文件从 iphone 应用程序上传到服务器。

```
 NSFileManager *fileManager = [[NSFileManager alloc] init];
    NSDictionary *fileAttributes = [fileManager attributesOfItemAtPath:mediaPath error: NULL];

    NSLog(@"%@",fileAttributes);
    if (fileAttributes != nil) {

        NSNumber *fileSize;
        fileSize = [fileAttributes objectForKey:NSFileSize];
        NSLog(@"%@",fileSize);

       // NSData *audioData = [NSData dataWithContentsOfFile:[[NSBundle mainBundle] pathForResource:audioData ofType:@""]];

        NSString *urlString = [NSString stringWithFormat:@"%@audioupload.php",mydomainurl];

        NSLog(@"%@",audioData);
        NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
        [request setURL:[NSURL URLWithString:urlString]];
        [request setHTTPMethod:@"POST"];

        NSString *boundary = @"---------------------------14737809831466499882746641449";
        NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
        [request addValue:contentType forHTTPHeaderField:@"Content-Type"];

        NSMutableData *body = [NSMutableData data];
        [body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[@"Content-Disposition: form-data; name=\"userfile\"; filename=\".caf\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[@"Content-Type: application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
        [body appendData:[NSData dataWithData:audioData]];
        [body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
        [request setHTTPBody:body];

        NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];
        returnString = [[NSString alloc] initWithData:returnData encoding:NSUTF8StringEncoding];

        NSLog(@"%@",returnString); 
```

这样做会将 .caf 文件转换为二进制文件，并且在服务器中上传音频需要花费太多（1-2 分钟）时间。不仅如此，服务器中的文件大小越来越大。我已经包括

```
ASIFormDataRequest 
```

但不知道如何在我的代码中使用它。谁能建议我如何减少上传时间。

但

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:06:38.247

我有一个应用程序可以非常快速地执行此操作，并且我的代码与您的非常相似。

唯一的区别是在线：

```
 [body appendData:[@"Content-Disposition: form-data; name=\"userfile\"; filename=\".caf\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]]; 
```

我有一个文件名，而不仅仅是 .caf 扩展名：

```
[body appendData:[@"Content-Disposition: attachment; name=\"file2\"; filename=\"test.caf\"\r\n" dataUsingEncoding:NSUTF8StringEncoding]]; 
```

此外，在使用此行将音频数据附加到正文后：

```
[body appendData:[NSData dataWithData:audioData]]; 
```

在你用这一行关闭表单之前：

```
[body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]]; 
```

我有这条线：

```
[body appendData:[@"\r\n" dataUsingEncoding:NSUTF8StringEncoding]]; 
```

我希望这对你有用。如果没有，您应该检查您的服务器端代码，因为您和我的代码几乎相同，而且我的代码上传速度非常快。

# google-app-engine - 对 BigQuery 查询的错误响应：kind:discovery#restDescription 而不是 bigquery#queryResults

> ID：13628104
> 
> 赞同：0
> 
> 时间：2012-11-29T14:37:43.213
> 
> 标签：google-app-engine, google-bigquery

我收到了我完全没想到会从 appengine 进行查询的回复。

我得到的不是根据 BigQuery 文档预期的那种“bigquery#queryResults”的响应

```
u'basePath': u'/bigquery/v2/', u'kind': u'discovery#restDescription',.... 
```

它似乎只发生在需要 10-15 秒及以上的查询中，我怀疑这是与 Appengine 动态 60 秒超时的一些奇怪的交互。

我在 python27 上运行，并使用 google-api-python-client 请求。

## 更新

尝试了其他一些场景：

*   在后端运行它 - 没有应用程序引擎请求超时 - 同样的事情：约 9.8 秒的请求返回发现 json

*   再次在开发（本地主机）中运行它，以确保：一切都很好

*   **最有趣**的是，以更短**的 4 秒超时**运行它（而不是之前的 35 秒）会在**相同的 9.8 秒**间隔后产生相同的发现回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T20:58:24.853

这是底层 httplib2 库中的一个已知且已修复的错误。

确保您使用的是 0.8 或更高版本：

检查[httplib2/__init__.py](http://code.google.com/p/httplib2/source/browse/python2/httplib2/__init__.py)：

```
__version__ = "0.8" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:27:08.100

来自 App Engine[配额文档](https://developers.google.com/appengine/docs/quotas)：

```
Each incoming HTTP request can be no larger than 32MB. 
```

您的查询返回的数据可能超过 32 MB，这会导致 HTTP 500 错误，从而导致 API 提供您在上面看到的输出（即 BigQuery API Discovery 文档信息 - 此响应可能与Python 客户端库如何处理 App Engine 上的错误响应的单独问题）。

建议的解决方法：如果您的查询响应返回大量数据，您可以使用[maxResults](https://developers.google.com/bigquery/docs/reference/v2/jobs/query)参数将响应页面中返回的行数限制为较小的数量。然后，您可以对 API 进行连续调用以检索后续数据页。

# c# - 如何在此 SelectSingleNode 语句中使用变量

> ID：13628106
> 
> 赞同：-2
> 
> 时间：2012-11-29T14:37:50.840
> 
> 标签：c#, xml, selectsinglenode

如何在此 SelectSingleNode 语句中使用变量

```
 oldCd = root.SelectSingleNode("/students/student[id={0}]",id); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T14:42:35.813

if`id`是`student`元素的属性

```
root.SelectSingleNode(String.Format("//students/student[@id='{0}']",id)) 
```

如果是子元素

```
root.SelectSingleNode(String.Format("//students/student[id[text()='{0}']]",id)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T14:40:34.750

好吧，您*可以*使用它`string.Format`来创建 XPath 表达式，如 LB 的回答所示。

我个人不会——我会使用 LINQ to XML，它不像使用 XPath 那样混合代码和数据。它带有与 SQL 注入攻击的正常来源相同的问题。

LINQ to XML 查询将如下所示：

```
var node = doc.Root.Elements("Students")
                   .Elements("Student")
                   .Where(x => (string) x.Element("id") == id)
                   .SingleOrDefault(); 
```

（如果`id`是`int`，您可以将`XElement`to 转换`int`为`string`。）

我通常更喜欢使用 LINQ to XML 进行查询，而不是使用 XPath；当然，其他人有不同的偏好。

# json - 使用 Sencha Touch 2 访问和查看嵌套 JSON (Tumblr API)

> ID：13628107
> 
> 赞同：1
> 
> 时间：2012-11-29T14:37:54.057
> 
> 标签：json, extjs, nested, sencha-touch-2, tumblr

我目前正在使用 Sencha Touch 2 和 Tumblr API 创建一个图片库，以从我的 Tumblr 网站获取图片。**我在访问最里面的嵌套文件夹中的 JSON 时遇到了很多困难——这就是我显示图像 URL 所需要的。**我查看了无数其他教程和类似的 StackOverflow 问题，但到目前为止似乎没有任何解决方案有效。我想知道人们是否可以看看我的代码。

所以**JSON**文件的结构是这样的：

```
 {
    "meta": {
        "status": 200,
        "msg": "OK"
    },
   "response": {
        "blog": { ... },
        "posts": [
         {
             "blog_name": "derekg",
             "id": 7431599279,
             "post_url": "http:\/\/derekg.org\/post\/7431599279",
             "type": "photo",
             "date": "2011-07-09 22:09:47 GMT",
             "timestamp": 1310249387,
             "format": "html",
             "reblog_key": "749amggU",
             "tags": [],
             "note_count": 18,
             "caption": "<p>my arm is getting tired.<\/p>",
             "photos": [
             {
                   "caption": "",
                   "alt_sizes": [
                    {
                        "width": 1280,
                        "height": 722,
                        "url": "http:\/\/derekg.org\/photo\/1280\/7431599279\/1\/
                       tumblr_lo36wbWqqq1qanqww"
                    },
                    {
                       "width": 500,
                        "height": 282,
                       "url": "http:\/\/30.media.tumblr.com\/
                       tumblr_lo36wbWqqq1qanqwwo1_500.jpg"
                    }, 
```

所以我本质上是在尝试访问`response`> `posts`> `photos`> `alt_sizes`> `url`。是的，非常嵌套。通过我一直在做的事情，我已经能够下到`alt_sizes`巢穴，但我需要能够再下一层才能得到它，`url`以便我可以将它放在标签`<img src="{url}"/>`中以显示图像Sencha Touch 2 窗口...

*我将包含我的商店、模型和视图的代码。*

### 这是商店（PhotoStore.js）：

```
 Ext.define("tumblrPhotos.store.PhotoStore", {
extend: 'Ext.data.Store',
requires: [
        'Ext.data.proxy.JsonP',
        'tumblrPhotos.model.PostsModel',
    ],
config: {
    model: 'tumblrPhotos.model.PostsModel',
    autoLoad: true,
    proxy: {
        type: 'jsonp',
        url: 'http://api.tumblr.com/v2/blog/lisacanblog.tumblr.com/posts/photo?api_key=HssV7DgyS8RtT0uYE5qpSQJwSxs6nIWpx06mMt8kNprCGQqIo8&callback=Ext.util.JSONP.callback',
        reader: {
            callbackKey: 'callback',
            type: 'json',
            rootProperty: 'response.posts'
        }
    }
}
}); 
```

### 这是模型（PostsModel.js）：

```
 Ext.define("tumblrPhotos.model.PostsModel", {
extend: 'Ext.data.Model',
config: {
    fields:[ //all the fields of posts BESIDES hasMany (photos)
        {name:'blog_name'},
        {name:'id'},
        {name:'post_url'},
        {name:'type'},
        {name:'date'},
        {name:'timestamp'},
        {name:'caption'}
    ],

    hasMany: {
        model: 'PhotoModel',
        name: 'photos',
        associationKey: 'photos'
    }

}
});

Ext.define("PhotoModel", {
extend: 'Ext.data.Model',
config: { 

    fields:[ //all the fields of photos BESIDES hasMany(alt_sizes)
        {name:'caption'},
        {name:'alt_sizes'}
    ],

    hasMany: { 
        model: 'AltSizesModel',
        name: 'alt_sizes',
        associationKey: 'alt_sizes'
    },

    belongsTo: [{
        model:'tumblrPhotos.model.PostsModel',
        name: 'photos'
    }]

}
});

Ext.define("AltSizesModel", {
extend: 'Ext.data.Model',
config: {
    fields:[
        {name:'width'},
        {name:'height'},
        {name:'url'}
    ],
    belongsTo: [{
        model: 'PhotoModel',
        name: 'alt_sizes'
    }]
}
}); 
```

### 最后，这里是视图（GalleryView.js）：

```
 Ext.define("tumblrPhotos.view.GalleryView", {
extend: 'Ext.dataview.DataView',
xtype:'galleryview',
requires: [
        'tumblrPhotos.store.PhotoStore',
    ],
config: {
    title: 'Gallery',
    id: 'gallerypanel',
    iconCls: 'star',
    iconMask: true,
    store: 'PhotoStore',
    styleHTMLContent: true,
    scrollable: 'vertical',
    itemTpl: new Ext.XTemplate (
        '<div>',
        '{blog_name}',
        '{photos}',
        '<tpl for="photos">',
        '{alt_sizes.url}',
        '<p>hi</p>',
        '</tpl>',
        '<hr>',
        '</div>'
    )
}
}); 
```

在我的**视图**文件中，这不起作用：

```
 '<tpl for="photos">',
          '{alt_sizes.url}',
          '<p>hi</p>',
        '</tpl>', 
```

...但是确实：

```
 '<tpl for="photos">',
          '{alt_sizes}',
          '<p>hi</p>',
        '</tpl>', 
```

后一个选项为 输出 [object OBJECT] `alt_sizes`，所以我知道它正在通过。有人可以帮助我，以便我可以在 alt_sizes 嵌套下输出 url 吗？非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:50:21.787

那是因为 alt_sizes 是一个数组而不是一个对象，所以你实际上不能这样做

```
alt_sizes.url 
```

但你应该这样做

`alt_sizes[0].url`

或`alt_sizes[1].url`其他尺寸。

**更新**

如果您只需要获取图片的 URL，那么您只需要执行以下操作`Ext.data.JSONP.request`：

[我从您的案例中创建了一个示例](http://www.senchafiddle.com/#xWzXR)

希望这有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T16:31:17.910

这也是一个正确的方法：

```
 '<tpl for="photos[0].alt_sizes[0]">',
            '<img src="{url}" />',
        '</tpl>', 
```

# asp.net - 从查询结果中获取第一行。

> ID：13628108
> 
> 赞同：0
> 
> 时间：2012-11-29T14:37:54.137
> 
> 标签：asp.net, vb.net

我正在尝试从查询结果的第一行获取数据。

这是我当前的代码（用户名 = 列名）：

```
userName.InnerHtml = DBresult.DataSet.Tables(0).Rows(0)("USERNAME").ToString() 
```

这是我得到的错误：

```
System.NullReferenceException: Object reference not set to an instance of an object. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:23:26.317

像这样的东西应该工作。即使 Cstr 是旧方法。

```
Dim i as Integer
For i = 0 To DBresult.DataSet.Tables(0).Rows.Count - 1 
  If IsDBNull(DBresult.DataSet.Tables(0).Rows(i)("USERNAME")) = True Then
'Do something
Else
  userName.InnerHtml = Cstr(DBresult.DataSet.Tables(0).Rows(i)("USERNAME")) 
```

# c# - 提取字符串的正则表达式 - (Employee ID XXXXXXXXXXX)

> ID：13628112
> 
> 赞同：0
> 
> 时间：2012-11-29T14:38:02.917
> 
> 标签：c#, regex

我需要使用正则表达式从文本文件中提取以下字符串。

```
(EMPLOYEE ID 45678912345) 
```

格式始终`(EMPLOYEE ID XXXXXXXXXXX)` 是 X 表示数字的地方。Employee ID 后面应该正好有 11 个数字。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T14:40:08.663

以下将捕获您指定的格式：

```
(\(EMPLOYEE ID [0-9]{11}\)) 
```

我将把这种模式的用法以及如何提取捕获组作为练习留给读者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T15:01:51.467

这将捕获所有匹配正则表达式忽略大小写的实例

```
foreach (Match match in Regex.Matches(text, @"(\(EMPLOYEE ID [0-9]{11}\))", RegexOptions.IgnoreCase))
                {
                    //capture employeeID
                      var employeeID = match.Value;
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T14:46:25.883

我不确定 C# 中是否支持前瞻和后视，但要获得该数字（通过支持这些的 Rgex），我将使用类似`(?<=\(EMPLOYEE ID )\d{11}(?=\))` **获取数字**的模式。

# javascript - Javascript用新行替换空格

> ID：13628117
> 
> 赞同：-4
> 
> 时间：2012-11-29T14:38:17.597
> 
> 标签：javascript, replace

是否可以在javascript中替换所有空格

`<input name="product_description[2][name]>"`

并将它们变成换行符并显示在

`<textarea name="product_description[2][meta_keyword]">`

我正在尝试这个

```
function getElements()
{
var text = document.getElementsByName('product_description[2][name]').value;
var out = document.getElementsByName('product_description[2][meta_keyword]').value;}
function makelinebreaks(){
text = text.split(" ").join("\n")
out = text;} 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-29T14:40:27.247

我不太了解您的 HTML 片段，但要对 JavaScript 字符串执行该操作`text`，一种方法是。

```
text.split(" ").join("\n") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T14:44:39.653

使用 jQuery：

```
$("#textarea").val($("#input").val().replace(/ /g, "\r\n")); 
```

# ruby-on-rails - Nginx 不会为 www.mydomain.com 提供资产，而是为 mydomain.com 提供服务

> ID：13628122
> 
> 赞同：2
> 
> 时间：2012-11-29T14:38:31.793
> 
> 标签：ruby-on-rails, nginx, unicorn

www.* 资产的访问/错误日志中没有任何内容。

```
upstream unicorn {
        server 127.0.0.1:5000;
}

server {
        listen 80;
        server_name mydomain.com www.mydomain.com xn--n3h.net;

        location / {
                proxy_set_header X-Real-IP $remote_addr;
                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
                proxy_set_header Host $http_host;
                proxy_redirect off;
                proxy_max_temp_file_size 0;

                # If you don't find the filename in the static files
                # Then request it from the unicorn server
                if (!-f $request_filename) {
                        proxy_pass http://unicorn;
                        break;
                }
        }
} 
```

因此，如果我访问[http://mydomain.com](http://mydomain.com)一切正常，但如果我访问 www.domain.com 浏览器只会加载 html 页面并且不会加载任何资产（css、js 等）。怎么回事？我错过了什么吗？HTML 中资产的路径是绝对的，没有任何域（例如“/assets/style.css”）。

```
# Disable Rails's static asset server (Apache or nginx will already do this)
config.serve_static_assets = true

# Compress JavaScripts and CSS
config.assets.compress = true

# Don't fallback to assets pipeline if a precompiled asset is missed
config.assets.compile = true

# Generate digests for assets URLs
config.assets.digest = true 
```

使用独角兽。

# c# - 分隔数字范围，如果按顺序，则使用连字符，如果出现顺序中断，则使用逗号字符

> ID：13628124
> 
> 赞同：12
> 
> 时间：2012-11-29T14:38:41.143
> 
> 标签：c#, algorithm

我有一个字符串表示页面 nos like `1,2,3,4,8,9,10,15`。

我希望将其显示为，`1-4,8-10,15` 即序列中的数字由连字符分隔，连字符由最小和最大的数字包围。

如果按顺序打断，范围用逗号分隔。

```
string pageNos = "5,6,7,9,10,11,12,15,16";
string result=string.Empty;
string[] arr1 = pageNos.Split(',');
int[] arr = new int[arr1.Length];

for (int x = 0; x < arr1.Length; x++) // Convert string array to integer array
{
    arr[x] = Convert.ToInt32(arr1[x].ToString());
}

for (int i = 0; i < arr.Length;i++)
{
    for (int j = i + 1; ; j++)
        if (arr[i] == (arr[j] - 1))
            result += arr[i].ToString() + "-" + arr[j].ToString();
        else
            result += arr[i].ToString() + ",";
}

Console.WriteLine(result); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T14:46:05.393

我认为循环中的循环让事情变得更加混乱。尝试只使用一个循环，因为您只需要遍历整个列表一次。

```
int start,end;  // track start and end
end = start = arr[0];
for (int i = 1; i < arr.Length; i++)
{
    // as long as entries are consecutive, move end forward
    if (arr[i] == (arr[i - 1] + 1))
    {
        end = arr[i];
    }
    else
    {
        // when no longer consecutive, add group to result
        // depending on whether start=end (single item) or not
        if (start == end)
            result += start + ",";
        else if (end == (start + 1))
            result += start + "," + end + ",";
        else
            result += start + "-" + end + ",";

        start = end = arr[i];
    }
}

// handle the final group
if (start == end)
    result += start;
else
    result += start + "-" + end; 
```

演示：http: [//ideone.com/7HdpS7](http://ideone.com/7HdpS7)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-29T14:53:33.233

一点点 LINQ 就可以解决这个问题：

```
static IEnumerable<Tuple<int, int>> GetRanges(IEnumerable<int> source)
{
   bool started = false;
   int rangeStart = 0, lastItem = 0;

   foreach (int item in source)
   {
      if (!started)
      {
         rangeStart = lastItem = item;
         started = true;
      }
      else if (item == lastItem + 1)
      {
         lastItem = item;
      }
      else
      {
         yield return new Tuple<int, int>(rangeStart, lastItem);
         rangeStart = lastItem = item;
      }
   }

   if (started)
   {
      yield return new Tuple<int, int>(rangeStart, lastItem);
   }
}

static string FormatRange(Tuple<int, int> range)
{
   string format = (range.Item1 == range.Item2) ? "{0:D}" : "{0:D}-{1:D}";
   return string.Format(format, range.Item1, range.Item2);
}

string pageNos = "5,6,7,9,10,11,12,15,16";
int[] pageNumbers = Array.ConvertAll(pageNos.Split(','), Convert.ToInt32);
string result = string.Join(",", GetRanges(pageNumbers).Select(FormatRange)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-29T14:45:53.473

```
string pageNos = "5,6,7,9,10,11,12,15,16";
string[] arr1 = pageNos.Split(',');
int[] arr = new int[arr1.Length];

for (int x = 0; x < arr1.Length; x++) // Convert string array to integer array
{
    arr[x] = Convert.ToInt32(arr1[x]);
}

StringBuilder sb = new StringBuilder();
bool hyphenOpen = false;
for (int i = 0; i < arr.Length - 1; i++)
{
    if (arr[i] + 1 == arr[i+1])
    {
        if (!hyphenOpen)
        {
            hyphenOpen = true;
            sb.Append(arr[i] + "-");
        }
    }
    else
    {
        hyphenOpen = false;
        sb.Append(arr[i] + ",");
    }
}
sb.Append(arr[arr.Length-1]);
Console.WriteLine(sb.ToString()); 
```

这既长又笨重，但它确实有效。

PS - 我保留了 OP 的原始 string->int 原样，请参阅 JonB 关于问题的评论以获得更清洁的方法。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-29T15:51:58.350

您可以使用此方法获取相邻的数字组，其中每个组由自定义`Range`-class 表示：

```
class Range
{
    public int? Start { get; set; }
    public int? End { get; set; }
}

private static IEnumerable<Range> getAdjacentRanges(IEnumerable<int> nums)
{
    var ranges = new List<Range>();
    if (!nums.Any())
        return ranges;

    var ordered = nums.OrderBy(i => i);
    int lowest = ordered.First();
    int last = lowest;
    ranges.Add(new Range { Start = lowest });

    foreach (int current in ordered)
    {
        lastRange = ranges[ranges.Count - 1];
        if (current > last + 1)
        {
            lastRange.End = last;
            ranges.Add(new Range { Start = current });
        }
        last = current;
    }

    return ranges;
} 
```

剩下的很简单：

```
var arr = new[] { 1, 2, 3, 4, 8, 9, 10, 15 };
var ranges = getAdjacentRanges(arr)
    .Select(r => r.End.HasValue ? string.Format("{0}-{1}", r.Start, r.End) : r.Start.ToString());
Console.Write(string.Join(",", ranges)); 
```

输出：`1-4,8-10,15`

[**演示**](http://ideone.com/9ckGD0)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-07-02T04:03:22.110

下面的 JS 代码也会有所帮助

1.  删除重复项
2.  对数组进行排序
3.  使用 2 个指针
4.  从同一个地方开始
5.  推进第二个指针，直到它的下一个元素是后继元素
6.  用空格和逗号打印 i 和 j 处的元素
7.  如果索引相同，则不要在 j 处打印元素
8.  删除尾随逗号

```
const givenArray = [1, 6, 6, 8, 44, 45, 47, 55, 9, 11, 12, 1, 6, 88, 13, 14, 2, 3, 5, 22, 33, 57, 88];

const input = [...new Set(givenArray)].sort((a, b) => a - b);
let i = 0;
let j = 0;
let output = '';

while (i < input.length) {
  while (j < input.length && (input[j] + 1) === input[j + 1]) {
    j++;
  }
  output += `${input[i]}`;
  if (i !== j) {
    output += ` - ${input[j]}, `;
  } else {
    output += ', ';
  }
  i = j + 1;
  j = i;
}
console.log(output.substring(0, output.lastIndexOf(",")));
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-03-08T01:43:49.260

使用此帮助程序类在数字列表和范围字符串之间来回转换。

这复制了`ConvertRangeStringToNumberList()`从[这里](https://forums.asp.net/t/1496239.aspx?+comma+and+dash+delimited+string)和`ConvertNumberListToRangeString()`从[这里](https://codereview.stackexchange.com/a/90074/81511)的实现，并略有改进。

```
using System;
using System.Collections.Generic;
using System.Linq;

public static class NumberRangeHelper
{
    /// <summary>
    /// Converts a string of comma separated list of numbers and ranges to the list of individual numbers it represents.
    /// </summary>
    /// <param name="numbers">Range in form of <c>"2,4-8,11,15-22,39"</c></param>
    /// <returns>A list of numbers</returns>
    public static List<int> ConvertRangeStringToNumberList(string numbers)
    {
        var numbersSplit = numbers.Split(',');
        var convertedNumbers = new SortedSet<int>();
        foreach (var strNumber in numbersSplit)
        {
            int number;
            if (int.TryParse(strNumber, out number))
            {
                convertedNumbers.Add(number);
            }
            else
            {
                // try and delimited by range
                if (strNumber.Contains('-'))
                {
                    var splitRange = strNumber.Split('-');
                    if (splitRange.Length == 2)
                    {
                        int firstNumber;
                        int secondNumber;

                        if (Int32.TryParse(splitRange[0], out firstNumber) &&
                            Int32.TryParse(splitRange[1], out secondNumber))
                        {
                            for (var i = firstNumber; i <= secondNumber; ++i)
                            {
                                convertedNumbers.Add(i);
                            }
                        }
                    }
                }
            }
        }
        return convertedNumbers.ToList();
    }

    /// <summary>
    /// Converts a list of numbers to their concise range representation.
    /// </summary>
    /// <param name="numbers">A list of numbers such as <c>new[] { 1, 2, 3, 4, 5, 12, 13, 14, 19 }</c></param>
    /// <returns>A string like <c>"1-5, 12-14, 19"</c></returns>
    public static string ConvertNumberListToRangeString(IEnumerable<int> numbers)
    {
        var items = new SortedSet<int>(numbers)
            .Select((n, i) => new { number = n, group = n - i })
            .GroupBy(n => n.group)
            .Select(g => (g.Count() >= 3)
                    ? g.First().number + "-" + g.Last().number
                    : String.Join(", ", g.Select(x => x.number))
            )
            .ToList();

        return String.Join(", ", items);
    }

} 
```

### 测试：

```
Action<IEnumerable<int>> DumpList = l => Console.WriteLine("\t[{0}]", String.Join(", ", l));
Action<string> DumpRange = s => Console.WriteLine("\t\"{0}\"", s);

var numbers = new[] { 1, 1, 2, 3, 4, 5, 12, 13, 19, 19, 6, 7 };
DumpList(numbers);
var str = ConvertNumberListToRangeString(numbers);
DumpRange(str);
var list = ConvertRangeStringToNumberList(str);
DumpList(list);

Console.WriteLine();    

str = "1-5, 12, 13, 19, 20, 21, 2-7";
DumpRange(str);
list = ConvertRangeStringToNumberList(str);
DumpList(list);
str = ConvertNumberListToRangeString(list);
DumpRange(str); 
```

### 输出：

```
[1, 1, 2, 3, 4, 5, 12, 13, 19, 19, 6, 7]
"1-7, 12, 13, 19"
[1, 2, 3, 4, 5, 6, 7, 12, 13, 19]

"1-5, 12, 13, 19, 20, 21, 2-7"
[1, 2, 3, 4, 5, 6, 7, 12, 13, 19, 20, 21]
"1-7, 12, 13, 19-21" 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-29T14:50:12.113

我不是 C# 人，但我想你有问题：

```
 if (arr[i] == (arr[j] - 1))
            result += arr[i].ToString() + "-" + arr[j].ToString(); 
```

你不应该在你的结果中添加它。但设置一个标志（可能是布尔值），以表明现在我开始计数。

如果 flag==ture 并且数字不再连续，那就是添加结果的时间，当然是“-”。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-11-29T15:15:30.670

`List<Tuple<int, int>>`这是一个不同的解决方案，它使用每个非序列值和跟随它的序列值的数量创建一个。然后使用 . 将其转换为字符串`string.Join`。

```
string pageNos = "1,2,3,4,8,9,10,15";

// Get list of numbers as ints
var list = pageNos.Split(',').Select(i => Convert.ToInt32(i)).ToList();

// Get a list of numbers and ranges of consecutive numbers
var ranges = new List<Tuple<int, int>>();
int start = 0;

for (int i = 0; i < list.Count; i++)
{
    // First item always starts a new range
    if (i == 0)
    {
        start = list[i];
    }

    // Last item always ends the current range
    if (i == list.Count - 1)
    {
        if (list[i] == list[i - 1] + 1)
        {
            ranges.Add(new Tuple<int, int>(start, list[i] - start));
        }
        else
        {
            ranges.Add(new Tuple<int, int>(start, list[i - 1] - start));
            ranges.Add(new Tuple<int, int>(list[i], 0));
        }
    }

    // End the current range if nonsequential
    if (i > 0 && i < list.Count - 1 && list[i] != list[i - 1] + 1)
    {
        ranges.Add(new Tuple<int, int>(start, list[i - 1] - start));
        start = list[i];
    }
}

// Craete the result string
var result = string.Join(", ", ranges.Select(r => r.Item2 == 0 ? r.Item1.ToString() : string.Format("{0}-{1}", r.Item1, r.Item1 + r.Item2))); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-11-29T20:11:09.913

```
public static string HyphenateRanges(this string input)
{
    if (string.IsNullOrEmpty(input))
    {
        return "";
    }

    var orderedDistinct = input.Split(',')
                                .Select(Int32.Parse)
                                .Distinct()
                                .OrderBy(x => x)
                                .ToArray();

    Func<int, int, string> replaceRangeValuesWithDash =
        (x, i) =>
        i == 0 || // first
        i == orderedDistinct.Length - 1 || // last
        orderedDistinct[i + 1] - orderedDistinct[i - 1] != 2 // not in a range
            ? x.ToString()
            : "-";

    var rangeValuesDashed = orderedDistinct
        .Select(replaceRangeValuesWithDash)
        .ToList();

    var extraDashesRemoved = rangeValuesDashed
        .Where((x, i) => i == 0 || rangeValuesDashed[i - 1] != x)
        .ToArray();

    var formattedString = String.Join(",", extraDashesRemoved)
                                .Replace(",-,", "-");

    return formattedString;
} 
```

# queue - 直径中的 FIFO / 队列的符号？

> ID：13628126
> 
> 赞同：2
> 
> 时间：2012-11-29T14:38:58.800
> 
> 标签：queue, diagram, fifo, dia

我正在研究一些架构图 - 我需要包括我们的排队框架。

我正在使用直径 - 但是我找不到任何可能适合的符号 - 我认为它错过了在“形状”内搜索的选项。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T14:56:47.100

Dia 的 Sybase 表有一个“稳定存储设备”，它是一个“队列”——但可能不是您要查找的符号。

[http://diashapes.appspot.com/](http://diashapes.appspot.com/)允许您搜索形状 - 如果您收到奇怪的错误消息，则该应用程序可能超出了 Google App Engine 配额，您可以稍后再试。

如果这两个选项不是您想要的 - 您能描述想要的符号吗？

# c# - 每天在 Application_Start 上打开或创建一个文本文件并附加请求的网页，然后在 Application_End 上关闭

> ID：13628135
> 
> 赞同：0
> 
> 时间：2012-11-29T14:39:34.760
> 
> 标签：c#, asp.net, application-start, application-end

我的任务是运行一个简单的审核，该审核将记录任何用户请求的每个页面并存储页面的数据以及是否根据现有的安全调整授予或拒绝访问。

我正在考虑在 Application_Start 上打开一个文本文件，而不是每个活动会话都试图写入一个任何人都可能在任何给定点打开的文件。是的，我知道这个问题。理想情况下，我需要一个好的方法或一些帮助来解决我的解决方案。

我们有一个自定义类来检查当前上下文是否可以从他们的会话中访问页面。我想利用该类来传递请求的页面详细信息和成功/拒绝请求的结果。问题是我不是很熟练，我还有很多东西要学。

我正在考虑类似的东西；

```
 if (File.Exists(@"\\MyServer\ICT\EFOSMS_AUDIT\" + DateTime.Today + ".txt"))
    {
        StreamReader read = new StreamReader(@"\\MyServer\ICT\EFOSMS_AUDIT\" + DateTime.Today);
    }
    else
    {
        File.OpenWrite(@"\\MyServer\ICT\EFOSMS_AUDIT\" + DateTime.Today);
    } 
```

只需打开文件并在应用程序运行期间保持打开状态。

然后在该类中，一些现有代码检查 AD 组；

```
 CustomPrincipal principal = HttpContext.Current.User as CustomPrincipal;

                if (!principal.IsInAnyRoles(roles))
                {
                    Page.Response.Redirect("~/fos/AccessDenied.aspx");
//Write to file that is open at application level here??
                    return;
                } 
```

我在脑海中知道我想要实现的目标是什么，但不完全理解这是否是最好的方法。我不确定是否有任何现有的类可以使这更容易。我正在使用 StreamReader、StreamWriter、File.Exists、File.Open。

有人可以朝正确的方向轻推。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T14:48:57.433

您要实现的目标与日志记录非常相似。有几个库可以让您写入文本文件，Log4Net、Nlog 等。

如果您不想使用这些工具中的任何一个，那么也许您应该考虑将日志记录功能和对打开文件的引用设为静态。这样，他们将在页面调用之间共享信息。

# perl - perl：如何使用 select AND fork 处理多个套接字？

> ID：13628136
> 
> 赞同：2
> 
> 时间：2012-11-29T14:39:39.000
> 
> 标签：perl, nonblocking

我在一个小项目中工作，我需要从一个源（文件、套接字等）读取一些东西，在许多客户端中处理和写入（每个新客户端都不同）。

我正在使用 select 来多路复用 I/O。

如果我可以读取源，我将存储在内部缓冲区中，处理并写入许多输出缓冲区（每个客户端一个）。如果我可以写，我只写缓冲区。听起来不错。

但是我如何才能为大量用户扩展它呢？我正在考虑使用 fork 并设置每个进程的 x 连接。我真的不知道这是一个好方法还是更好的预分叉或使用不同的端口并使用一些负载平衡但是现在我不清楚我该如何处理 fork + select

例如，如果我在每个进程中使用 100 个客户端，则在第 101 个客户端中，我将分叉，但内存中仍然有旧的 select 和 100 个套接字客户端。我可以清理“旧”选择并开始一个新选择，但这很奇怪。我不知道我的策略是否足够好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:55:36.107

通常这是用“prefork”技术制作的。这是这样工作的：

1) 创建监听套接字

2）`fork()`让N个工人

3）每个工人开始`accept()`客户（大多数免费工人将接受这份工作）；同时“父”进程变为“经理”和`waitpid()`他的子进程，如果“工人”的数量 < N 则分叉

但是这样你就不能在“工人”之间发送数据（就像你最初在其他进程中使用第 101 个客户端的情况一样），所以这个设计可能不适合你的需求。在这种情况下，我更喜欢使用[AnyEvent](http://search.cpan.org/~mlehmann/AnyEvent-7.04/lib/AnyEvent.pm) CPAN 模块。这使您可以一次异步处理更多的客户端，因为它使用 epoll/kqueue 进行多路复用，并且可以在一个信号进程上扩展到数千个连接（如果您的脚本不是 CPU 密集型的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:21:18.043

如果您不反对围绕框架编写应用程序，我可以建议在 CPAN 上使用相当古老且屡获殊荣的*多任务/网络*框架[POE](http://poe.perl.org/)。

它基本上提供了一个内核和事件循环`select`（这过于简单化了）。你写回调。`x`事件发生时做`e`之类的事情。它非常适合同时读取/写入多个源，无论它们是套接字、文件还是终端。这需要一些时间来适应，但它非常有用。有很多[很好的例子](http://poe.perl.org/?POE_Cookbook)。

例如，如果您想通过预先分叉一个进程池来扩展，POE 提供了一些可以轻松管理的东西：[http://metacpan.org/pod/POE ::Wheel::Run](http://metacpan.org/pod/POE%3a%3aWheel%3a%3aRun)

如果你需要一个处理并发客户端的 TCP 服务器，这里是：[http ://metacpan.org/pod/POE::Component::Server::TCP](http://metacpan.org/pod/POE%3a%3aComponent%3a%3aServer%3a%3aTCP)

请注意，它*不*使用线程；它是一种使用事件循环和回调的协作多任务处理形式。如果您需要为每个请求执行的处理只需要微不足道的时间，那么这就是您所需要的，但是如果您想将一些可能阻塞的工作委托给预分叉进程池，那么这也很容易，使用`POE::Wheel::Run`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T14:55:24.393

通常的方法是预先分叉一些工作进程，然后将新接受的客户端套接字的[文件描述符传递](http://infohost.nmt.edu/~eweiss/222_book/222_book/0201433079/ch17lev1sec4.html)给它们，比如以某种循环方式，以便在 UNIX 域套接字上进行进一步处理。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T15:18:59.537

我不太确定我是否正确理解了您的要求，但如果您从一个来源获取输入并将输出复制到多个来源，您可能需要查看诸如 ZeroMQ 之类的 PubSub 系统。请参阅[http://zeromq.org/](http://zeromq.org/)和[https://metacpan.org/module/ZMQ](https://metacpan.org/module/ZMQ)

这假定您不受客户端和服务器之间的特定协议的约束。

# ios - RestKit：使用没有 id 的嵌套对象进行映射（重复）

> ID：13628140
> 
> 赞同：2
> 
> 时间：2012-11-29T14:39:52.860
> 
> 标签：ios, core-data, mapping, nested, restkit

[我很难映射一个特殊情况这与这里](https://github.com/RestKit/RestKit/issues/95 "here")的问题完全相同

```
product:{
     "id": 123,
     "name": "Produce RestKit Sample Code",
     "description": "We need more sample code!",
     "tasks": [
         {"name": "Identify samples to write", "assigned_user_id":1},
         {"name": "Write the code", "assigned_user_id": 1},
         {"name": "Push to Github", "assigned_user_id": 1},
         {"name": "Update the mailing list", "assigned_user_id": 1}]
} 
```

所以我为一个任务对象创建了映射。我为与任务 NSSET 相关的产品对象创建了映射。

但是现在每次解析新数据时，都会在核心数据中重复任务。（正常原因没有ID）

两种解决方案：

1.  如果发现新任务，我可以删除当前产品的任务。
2.  我可以使用产品 ID 创建任务 ID

我不知道如何实施这些解决方案。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:51:11.847

我不太确定您如何映射此任务对象，但我`NSData`通过以下方式使用 JSON 字符串解析：

```
NSDictionary *dictionary = [NSJSONSerialization JSONObjectWithData:data
                                                           options:0
                                                             error:&error]; 
```

在这种情况下，我得到一个`NSDictionary`带有一个键的“产品”，而该键的对象是另一个字典。`NSDictionary`具有“任务”键的对象是四个`NSArray`对象`NSDictionary`中的一个。

现在，该 JSON 摘录不是有效的 JSON，但我认为它只是更广泛的 JSON 文件的一部分。但出于测试目的，我们假设 JSON 文件如下：

```
{
    "product" : {
        "id": 123,
        "name": "Produce RestKit Sample Code",
        "description": "We need more sample code!",
        "tasks": [
                  {"name": "Identify samples to write", "assigned_user_id": 1},
                  {"name": "Write the code", "assigned_user_id": 1},
                  {"name": "Push to Github", "assigned_user_id": 1},
                  {"name": "Update the mailing list", "assigned_user_id": 1}]
    }
} 
```

然后我可以像这样解析那个 JSON：

```
NSString *filename = [[NSBundle mainBundle] pathForResource:@"13628140" ofType:@"json"];
NSData *data = [NSData dataWithContentsOfFile:filename];
NSError *error;
NSDictionary *dictionary = [NSJSONSerialization JSONObjectWithData:data
                                                           options:0
                                                             error:&error];

NSDictionary *product = dictionary[@"product"];
NSArray *tasks = product[@"tasks"];
NSDictionary *firstTask = tasks[0];
NSString *firstName = firstTask[@"name"];
NSString *firstAssignedUserId = firstTask[@"assigned_user_id"]; 
```

或者，如果您想枚举任务：

```
NSDictionary *product = dictionary[@"product"];
NSArray *tasks = product[@"tasks"];

[tasks enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    NSDictionary *task = obj;
    NSLog(@"Task \"%@\" is assigned to %@", task[@"name"], task[@"assigned_user_id"]);
}]; 
```

您只是在问如何将其存储`NSArray`在`tasks`Core Data 中吗？

# jquery-ui - 在 ems 中指定 jQuery 对话框大小？

> ID：13628141
> 
> 赞同：0
> 
> 时间：2012-11-29T14:39:55.800
> 
> 标签：jquery-ui, dialog

有没有办法在 ems 中指定 jQuery 对话框的大小？我将显示的对话框将是模态的，并且不可调整大小，因此调整大小不是问题。它应该坚持我最初指定的大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:52:31.783

与其直接在对话框调用中指定宽度，我认为让 jQuery 对话框在 ems 中达到一定高度和宽度的最佳方法是实际指定内容的大小，然后使用`'auto'`使对话框大小本身适应内容. 这是一个使用 60em 和 30em 作为最大宽度和高度的示例：

```
<span id="copyrightLink" style="cursor:pointer;">Copyright dialog popup</span>

<div id="copyrightDialog" title="Copyright information" style="display:none;">
    <div style="max-width:60em; max-height:30em;">
        <p>Copyright information</p>
        <p>Goes here</p>
    </div>
</div>

<script type="text/javascript">
    $(function(){
        $('#copyrightLink').click(function(){
            $('#copyrightDialog').dialog({
                modal: true,
                buttons: {
                    OK: function(){
                        $(this).dialog('close');
                    }
                },
                width: 'auto',
                height: 'auto',
                resizable: false,
                draggable: false
            });
        });
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:41:22.817

只是不要通过`dialog(...)`通过 css 设置对话框大小来设置开始大小，这将是开始的方式。

看到这个演示：http: [//jsfiddle.net/maniator/cQBTb/](http://jsfiddle.net/maniator/cQBTb/)

Javascript：

```
$('selector').dialog({
    width: '17em',
    resizable: false,
    modal: true
});​ 
```

CSS：

```
selector {
    height: 15em !important;
}​ 
```

# python - 芹菜任务和xmpp

> ID：13628143
> 
> 赞同：1
> 
> 时间：2012-11-29T14:39:58.427
> 
> 标签：python, celery

我有 celery 任务，需要在工人启动时启动一个 xmpp，但它并没有真正起作用

```
from celery import Celery
from MyXmpp import MyXmpp

celery = Celery('myxmpp')
celery.config_from_object('celeryconfig')

myjabber = MyXmpp()

@celery.task 
def worker_send_jabber(message):
   myjabber.send_admin_xmpp(message) 
```

如果我这样做，它只会启动 xmpp，但不会启动工作程序/任务。我怎样才能让 celery 初始化我的 xmpp，然后通过它发送消息。我不希望它一直连接和断开连接。只要工作人员正在运行，xmpp 客户端就应该在线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T11:44:15.787

有几种方法可以做到这一点，一种常见的方法是：

```
_client = None

def get_client():
    global _client
    if _client is None:
        _client = MyXmpp()
    return _client

@celery.task
def send_jabber(message):
    get_client().send_admin_xmpp(message) 
```

但有些人可能更喜欢这个版本：

```
from celery import Celery, Task
from celery.utils import cached_property

class XmppTask(Task):
    Client = MyXmpp
    abstract = True

    def __call__(self, *args, **kwargs):
        # passes self argument to the task body
        return super(XmppTask, self).__call__(self, *args, **kwargs)

    @cached_property
    def client(self):
        return self.Client()

celery = Celery()
@celery.task(base=XmppTask):
def send_jabber(self, message):
    return self.client.send_admin_xmpp(message) 
```

# css - 在每个浏览器的屏幕上居中 div

> ID：13628144
> 
> 赞同：2
> 
> 时间：2012-11-29T14:40:02.597
> 
> 标签：css, html, margin, center

我有一个包含我的表单的 div（作为一个蓝色框）。我需要在每个浏览器的屏幕上居中该 div。我对此进行了搜索，人们说如果我设置保证金，`auto`它应该可以工作。

但是不，这将我的框（div）放在每个浏览器的左侧。

```
<HTML>
..
...
<body>

<div id="questionare">

<form .....
....
....
</form>
         </div>

</body>

...
....

</HTML> 
```

**在我的 CSS 上，我尝试了以下操作：**

```
#questionare{

 margin: 0 auto ;
 position:relative;
 width: 300px; 
 text-align: left;
 background:rgb(127, 177, 198);
 padding: 88px 79px 29px; 
 border-radius: 10px;
 box-shadow: 0px 5px 12px rgba(0,0,0,0.4); 
-webkit-border-radius: 10px; 
-moz-border-radius: 10px; -khtml-border-radius: 10px; 
-webkit-box-shadow: 0 5px 12px rgba(0, 0, 0, .4); 
-moz-box-shadow: 0 5px 12px rgba(0, 0, 0, .4); 
-khtml-box-shadow: 0 5px 12px rgba(0, 0, 0, .4);
 behavior: url(/PIE.htc);
} 
```

**-或者-**

```
#questionare{
 margin-left: auto ;
 margin-right: auto ;
 position:relative;
width: 300px;

text-align: left;
background:rgb(127, 177, 198);
padding: 88px 79px 29px; 
border-radius: 10px;
box-shadow: 0px 5px 12px rgba(0,0,0,0.4); 
-webkit-border-radius: 10px; 
-moz-border-radius: 10px; -khtml-border-radius: 10px; 
-webkit-box-shadow: 0 5px 12px rgba(0, 0, 0, .4); 
-moz-box-shadow: 0 5px 12px rgba(0, 0, 0, .4); 
-khtml-box-shadow: 0 5px 12px rgba(0, 0, 0, .4);

behavior: url(/PIE.htc);

} 
```

**表单样式为空**

```
form{

} 
```

解决办法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:45:49.400

它实际上对我有用，请参阅[jsFiddle](http://jsfiddle.net/L7gt2/)。

我没有更改您的任何代码。

您的问题可能是您缺少`doctype`，迫使浏览器以怪癖模式呈现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T14:42:34.287

尝试使用类似的 DTD

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T14:50:09.087

除了在其他答案中使用 Doctype 之外，您还需要具有以下 css 规则：

```
body{text-align: center;}
.wrapper{
text-align: left;
margin: 0 auto;
width: 100px; /* or your desired size, or no size if you want the div to be 100% */
height: 100px; /* or your desired size, or no size if you want the div to be 100% */
} 
```

将正文文本对齐设置为中心很重要，这样它就可以在所有浏览器中使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T14:51:11.333

在大多数情况下，最好不要使用集中式 div 来设置其内容的样式，而是这样做。

```
#questionaire{
position:realative;
margin:auto;
width:300px;
}
#questionaire_innner_div{
position:relative;
float:left;
padding: 88px 79px 29px; 
width:242px;
} 
```

然后你的 html 应该看起来像这样。

```
<div id="questionaire">
<div id="questionaire_innner_div">

<form>
...
...
...
</form>

</div>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T14:51:15.780

修复标签的布局，布局将正常工作。所以`</div>`而不是`< /div>`例如。

看到它在这里工作：http: [//jsfiddle.net/XscZK/](http://jsfiddle.net/XscZK/)

# c# - AcmNotPossible 调用 acmStreamOpen, naudio

> ID：13628145
> 
> 赞同：4
> 
> 时间：2012-11-29T14:40:04.217
> 
> 标签：c#, wav, naudio

我正在尝试转换

```
PCM S16 LE (araw)
Mono, Sample rate 22050, Bit pr. sample 16 
```

到

```
PCM mulaw (PCM MU-LAW)
Mono, Sample rate 8000hz, Bit pr. sample is 8\. 
```

`WaveFormat.CreateMuLawFormat(8000,1)`甚至更通用的`WaveFormat.CreateCustomFormat`地方，我已经指定了与`WaveFormatEncoding`源流相同的内容，它抛出了相同的异常。

```
AcmNotPossible calling acmStreamOpen 
```

我在这里错过了什么吗？

任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T08:13:38.753

ACM mu-law 编码器期望其输入为 16 位。如果您使用 mu 或 a-law，则采样率也可能很低。以下两行代码将创建一个 PCM 16 位的零长度流，并将其传递给 WaveFormatConversionStream 以将其转换为 a-law。除非由于某种原因您的机器上没有安装 G.711 编码器，否则它不应抛出“无法转换”错误。

```
var s = new RawSourceWaveStream(new MemoryStream(), new WaveFormat(8000,16,1));
var c = new WaveFormatConversionStream(WaveFormat.CreateALawFormat(8000,1), s); 
```

# php - preg_replace 总是提供与 $1 相同页面的链接

> ID：13628147
> 
> 赞同：0
> 
> 时间：2012-11-29T14:40:08.367
> 
> 标签：php, regex, preg-replace

我在 PHP 中使用 preg_replace。当我使用此代码行时：

```
echo nl2br(preg_replace("(http://.+) ", "<a href='$1'>[link]</a>", $row['description'])); 
```

它呼应`"<a href=''>[link]</a>".` 了这里的“描述”：[http](http://www.youtube.com/watch?v=JDrnz8ZZtUE)
://www.youtube.com/watch?v=JDrnz8ZZtUE 这有什么问题？（我还在描述中包含了空格）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T14:44:47.200

那是因为您没有指定分隔符。PHP 将假定`()`是分隔符，从而消除您的捕获组。

```
"~(http://.+)~" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:44:37.043

你没有任何分隔符。这是语法：

```
$pattern = '/(\w+) (\d+), (\d+)/i'; 
```

尝试这样做：

```
echo nl2br(preg_replace("/(http://.+)/", "<a href='$1'>[link]</a>", $row['description'])); 
```

# xcode - git remote over ftp：“无法打开 refs ...”

> ID：13628148
> 
> 赞同：0
> 
> 时间：2012-11-29T14:40:10.817
> 
> 标签：xcode, git, ftp

我的 NAS 上有一个克隆的存储库。所有的文件都在里面。
现在我想将此存储库作为远程添加到我的 Xcode 项目（我从中克隆）。
我尝试使用 Xcode 的 UI 和终端，都失败了，所以我追踪了 Wireshark 的问题，它显示找不到“refs”：

![在此处输入图像描述](../Images/2ddc0877d35ef5db2e5639685a4e1f45.png)

我可以通过浏览器和 finder 使用 ftp 访问 refs 文件，它肯定存在并且包含所有子文件夹。给定路径以 /.git 结尾，自动访问 /info。

如果我尝试将给定的路径设置为 ../.git/refs，它也可以输入路径，但无法打开 /info，这是可以的，因为 /info 不在 /refs 中。

我无法找出问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:13:40.663

这听起来像您没有`git update-server-info`在该存储库上运行。该命令必须在对存储库进行任何更新后运行，以便该更新可通过任何转储协议使用，其中 git 不涉及获取的服务器端。该命令将创建或更新`info/refs`文件。

您说您可以`refs`手动访问，但这听起来像是您正在查看`refs`存储库顶部的目录，因为您声明您看到了子文件夹。wireshark 的输出显示它无法打开`info/refs`，因为第 4 行显示它已成功更改为`info`目录。里面`refs`应该有一个纯文本文件。

由于您声明存储库位于 NAS 上，因此如果可能的话，我建议将其安装为远程文件系统，并从中克隆而不是使用 FTP。使用 FTP，您需要记住在每次更新存储库后运行该命令。如果您让 git 直接访问文件，那将没有必要。

# ruby - 解释 ruby 中具有相同名称和其他属性的方法和变量的行为

> ID：13628152
> 
> 赞同：3
> 
> 时间：2012-11-29T14:40:24.373
> 
> 标签：ruby, variables, hash, methods, scalar

我只是想*了解*`destroy`以下代码中方法的行为：

更新：请注意，我的目的是了解行为，而不是将 nil 分配给变量的直接解决方案。

```
 def conf
      @conf ||= { 'foo' => { 'bar' => 'baz' } }
    end

    def destroy
      conf = nil
    end

    def change
      conf['foo']['bar'] = 'meh'
    end

    def add
      conf['foo']['abc'] = 'moo'
    end 
```

这是调用该`add`方法的输出：

```
 add
    pp conf
    # {"foo"=>{"bar"=>"baz", "abc"=>"moo"}} 
```

`change`方法

```
 change
   pp conf
   # {"foo"=>{"bar"=>"meh"}} 
```

`destroy`方法

```
 destroy
   pp conf
   # {"foo"=>{"bar"=>"baz"}} 
```

那么，为什么不`destroy`导致`conf`拥有`nil`？

另一个相关的片段，这次是标量而不是哈希：

```
 def foo
      @foo ||= "bar"
    end

    def destroyfoo
      foo = nil
    end

    def changefoo
      foo = "baz"
    end 
```

调用时的结果`changefoo`和`destroyfoo`两者：

```
 destroyfoo
    puts foo
    # "bar" 
```

...

```
 changefoo
    puts foo
    # "bar" 
```

在这两种情况下，任何关于可能发生的事情的指示都会很有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:02:34.433

您的`destroy`,`destroyfoo`和`changefoo`方法都只是分配给局部变量，不会导致调用访问器方法。

该`change`方法有效的原因`conf['foo']['bar'] = 'meh'`是调用`conf`get 方法`@conf`，然后调用`[]`返回对象上的方法，然后调用`[]=`第一级哈希上的方法。同样对于`add`.

这与直接分配不同，例如`conf =`

另外，为了完整起见，请注意，即使您为`@conf`（使用`attr_writer`或通过自己编写`conf=`方法）创建了一个 attr 编写器，那么类似的行`conf = nil`仍然会引用局部变量并且不会调用您的方法。您需要使用`self.conf=`才能消除歧义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T14:59:48.613

这是因为您的`destroy`方法正在创建一个名为`conf`. Ruby 能够根据你如何调用它来判断什么是方法，什么是变量。

```
irb> puts "Lincoln"
Lincoln
irb> puts = "Washington"
irb> puts "Polk"
Polk
irb> puts puts 
Washington 
```

这里发生的事情是有一个方法被调用`puts`，并且有一个变量被调用`puts`。Ruby 根据您调用它的方式确定您尝试使用哪个。在最后一个例子中，左边`puts`是方法调用，右边`puts`是变量。

请注意，`destroy`一旦方法块执行完毕，变量创建将退出范围。因此，在您的情况下，尝试在`conf`方法之外的任何时间（在主范围内）调用将是对该方法的调用。

# html - 如何解决有关 SSRS HTML 导出的表格重叠问题？

> ID：13628156
> 
> 赞同：0
> 
> 时间：2012-11-29T14:40:31.567
> 
> 标签：html, firefox, google-chrome, reporting-services

我整天都在做这件事，我只是不知道该怎么做。情况是这样的：

我正在使用带有 SQL Server Reporting Services 的 SQL Server 2012 来提供来自基于 ASP.NET MVC 4 的应用程序 (C#) 的报告。我可以导出为任何所需的格式，HTML 5 除外，但我可以导出为 HTML 4.0。这就是问题通过门闯入的地方。HTML 4 中的 SSRS 报告的呈现并不完美，它在 Opera 和 Internet Explorer 中运行良好，但在 Firefox 和 Chrome 中却是一场噩梦。问题是，一旦您向下滚动到第 2 页的开始位置，HTML 表格就会重叠。从那时起直到报告结束，重叠问题只是呈指数级增长。

我已经考虑了许多可能的解决方案，例如处理 CSS 或 HTML，这要归功于 Microsoft 的创造力，这几乎是不可能的。

有没有人有解决这个问题的经验？我在这里完全不知所措。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-07-29T16:46:14.057

我今天遇到了这个问题，并通过在 tablix 属性中设置 KeepTogether=True 来解决它：

[![Tablix 属性](../Images/3738f853e666766fedadf4796f867545.png)](https://i.stack.imgur.com/W59kR.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T10:18:36.483

我决定加入 MVC/WebForms 附属关系，因为 Microsoft 已宣布他们不支持 Internet Explorer 以外的任何东西中的 SSRS 报告。我的解决方案是在 WebForms 中使用 ReportViewer 控件。

# c# - Backgroundworker 调用 DLL 发送停止事件

> ID：13628157
> 
> 赞同：0
> 
> 时间：2012-11-29T14:40:32.867
> 
> 标签：c#, asynchronous, backgroundworker

我有一个将 GUI 与工作引擎分开的工具。它们是不同的项目。也许我想稍后将它用于控制台应用程序。我在 BackgroundWorker 中从 GUI 调用引擎（它是一个 dll）：

```
 _worker = new BackgroundWorker();
    _worker.WorkerSupportsCancellation = true;
    _worker.DoWork += DoWork;
    _worker.RunWorkerAsync();
    ...

    private void DoWork(object sender, DoWorkEventArgs e)
    {
        Engine.Engine engine = new Engine.Engine(someParams);
        engine.Log += OnLog; //Here I receive Logging to display in GUI
        engine.Start(); //Runs the logic
    } 
```

我现在想要的是，实现一个停止按钮。引擎可能会运行很多并在数据库中进行事务（如果单击停止，我想回滚）。

我可以通过将 backgroundworker 传递给我的 dll 然后检查 CancellationPending 来做到这一点。有没有不同的方法可以做到这一点？我想将代码重用于其他项目，因此我不想通过 Backgroundworker ...

什么会很好：

引擎有一个停止事件，它将全局标志设置为“取消”，我可以在代码中定期检查。我想从 GUI 触发此事件。

我希望你能明白我的意思:-)

在此先感谢您的帮助！

# javascript - 将字符串拆分为两个文本框

> ID：13628159
> 
> 赞同：-2
> 
> 时间：2012-11-29T14:40:41.260
> 
> 标签：javascript, string, asp-classic

我如何将始终以两个字母开头的生成数字，然后是一系列数字（例如 ab123456）分成两个字符串，然后将它们放入两个文本框中？

该数字是使用 JavaScript 方法生成的。

in number 存储在`<div>`这样的位置：

```
<div id="usernumber" class="usera"></div> 
```

它需要写入两个文本框中，如下所示：

```
Response.Write("<td width=\"50%\"><input type=\"text\" id = \"userdepartment\"  name=\"department\" size=\"3\" maxlength=\"2\"> <input type=\"text\" id = \"usernumber\" name=\"number\" size=\"10\" disp=\"Department Number\" maxlength=\"6\">\n"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:51:34.250

*   用于`.slice()`获取前两个字符，然后是字符。

*   用来`document.getElementById()`取你的箱子。*（确保他们有身份证）*

*   将字符串分配给`.value`框的属性。

* * *

```
document.getElementById("box1").value = mystring.slice(0,2);
document.getElementById("box2").value = mystring.slice(2); 
```

* * *

对于您更新的问题，如果数字是 的文本内容`<div>`，请执行以下操作：

```
window.onload = function() {
    var text = ('textContent' in document) ? 'textContent' : 'innerText';

    var number = document.getElementById("usernumber")[text];

    document.getElementById("userdepartment").value = number.slice(0,2);
    document.getElementById("usernumber").value = number.slice(2);
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T14:51:09.743

您没有提供太多信息，因此这可能只会回答您问题的一部分。将您的字符串分成两部分并放入两个不同的文本框中。

还有其他解决方案可以根据您的要求拆分复合字符串。这个使用**正则表达式**，但您可以使用`slice`或`substr`也可以：

```
var s = "ab123456";
var rx = /([a-z]{2})(\d+)/i;

if (rx.test(s))
{
    var split = rx.exec(s);
    var letters = split[1];
    var number = split[2];

    document.getElementById("box1").value = letters;
    document.getElementById("box2").value = number;
} 
```

# c# - MVC 中的动态表单数据

> ID：13628161
> 
> 赞同：2
> 
> 时间：2012-11-29T14:40:43.507
> 
> 标签：c#, asp.net-mvc, jquery

我正在创建一个简单的调查系统，目前正在生成这样的 HTML。如果解决方案需要，这当然可以更改。

```
<form id="surveyForm"> 
  <input type="hidden" value="1" name="surveyId" />
  <div class="questionContainer">
    <h4>What is 2 + 2?</h4>
      <div class="optionsContainer">
        <div class="optionContainer">
          <input id="option_1" value="1" type="radio" name="question_1" />
          <label for="option_1">3</label>
        </div>
        <div class="optionContainer">
          <input id="option_2" value="2" type="radio" name="question_1" />
          <label for="option_2">4</label>
        </div>
      <div class="optionContainer">
        <input id="option_3" value="3" type="radio" name="question_1" />
        <label for="option_3">5</label>
      </div>
    </div>
    <div class="freeTextContainer">
      <h4>Comments:</h4>
      <textarea id="freetext_1" name="freetext_1"></textarea>
    </div>
  </div>
  <!-- Multiple questionContainer may follow -->
</form> 
```

如您所见，我最终得到了一些 POST 变量，即`question_1`,`question_2`等等`freetext_1`，`freetext_2`and 等等。单选按钮的值对应于后端数据库中的选项 ID。

现在我想使用 jQuery 或类似的方法将使用 Ajax 的响应发布到 MVC API 控制器。

所以问题1；如何使用 jQuery 将这些值序列化为可以解码服务器端的 JSON 字符串，以及如何指定接受此 json 字符串的 MVC 方法服务器端？

问题2：上面建议的解决方案不是很优雅，我想将其序列化为可以转换为可用作MVC API方法中的输入参数的POCO对象结构，例如：

```
public class SurveyAnswer
{
    public int SurveyId { get; set; } // From a hidden field
    public List<QuestionAnswer> Answers{ get; set; }        
}

public class QuestionAnswer
{
    public int QuestionId { get; set;}
    public int OptionSelecion { get; set; }
    public string FreeText { get; set; }
} 
```

然后是这样的 MVC 方法：

```
[HttpPost]
public ActionResult PostAnswer(SurveyAnswer answer)
{
    ...
} 
```

我将如何序列化表单以实现上述目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:04:52.443

您可以使用以下代码序列化表单。

```
var formData = $("#surveyForm").serialize(); 
```

你可以用这样的 jQuery 帖子发送它

```
$.post('@Url.Action("Save", "ApiController")', $(this).serialize(), function(json) {
        // handle response
    }, "json"); 
```

然后，如果您要使用此模型：

```
public class SurveyAnswer
{
    public int SurveyId { get; set; }
    public int question_1 { get; set; }        
} 
```

您可以将其发送到这样的 MVC 操作

```
[HttpPost]
public JsonResult Save(SurveyAnswer Survey)
{
    // do work
    return new JsonResult { Data = new { Success = true } };
} 
```

这不能回答你的第二个问题，但我希望它仍然可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:09:11.247

不确定这是否是您想要的，但您可以使用 jQuery 进行 AJAXify：

```
$(function() {
    $('#surveyForm').submit(function() {
        $.ajax({
            url: '/controller/PostAnswer
            data: $('#surveyForm').serializeArray(),
            type:'POST',
        });
        return false;
    });
}); 
```

在服务器端：

```
[HttpPost]
public ActionResult PostAnswer(SurveyAnswer answer)
{
    return Json(new { success = true });
} 
```

[在这里](https://stackoverflow.com/questions/1184624/convert-form-data-to-js-object-with-jquery/1186309#1186309)查看深入的答案。

# c# - 简单的构造函数问题

> ID：13628168
> 
> 赞同：2
> 
> 时间：2012-11-29T14:41:10.640
> 
> 标签：c#

假设我有一个名为 class1 的类，class1 包含一个默认构造函数和一个带有一个参数（例如字符串）的构造函数。在该构造函数中，我设置了一个变量，我们称之为“string var”。我希望 var 从创建该对象时传递给构造函数的字符串中获取值，但我希望能够在构造函数范围之外使用 var，这可能吗？因为构造函数不返回值等等。

为了澄清这里是我想要做的代码示例：

```
class class1
{
    public class1(string songPath)
    {
        System.Media.SoundPlayer songPlayer = new System.Media.SoundPlayer(songPath);
    }
//here I want to use my songPlayer I created with the passed string as songPath
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T14:43:00.370

您需要创建`songPlayer`一个字段 - 它是一个局部变量，仅对当前声明它的构造函数可见。

```
private System.Media.SoundPlayer songPlayer;

public class1(string songPath)
{
    songPlayer = new System.Media.SoundPlayer(songPath);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T14:44:47.093

像这样创建属性

```
//System.Media.SoundPlayer _songPlayer ;
public System.Media.SoundPlayer songPlayer 
{
  //if you have nay logic to handle ull 
 //get{ if(_songPlayer != null)  return _songPlayer; else null; } or just 
   get;
}

public class1(string songPath)
{
     SongPlayer  = new System.Media.SoundPlayer(songPath);
    //_songPlayer  = new System.Media.SoundPlayer(songPath);
} 
```

注意：如果您想在课堂外使用此成员很有帮助，否则最好使用@Oded 解决方案..

如果要处理 null 情况，请使用私有变量作为属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T14:46:10.430

您的另一个选择可能是静态类和方法

```
public static class1(string songPath)
{
    public static System.Media.SoundPlayer play(string songPath)
    {
        System.Media.SoundPlayer songPlayer = new System.Media.SoundPlayer(songPath);
        // play here ?
        // or return to play
        return songPLayer;
    }
} 
```

# c# - FtpWebRequest getDateTimestamp 和 DateTime 的问题

> ID：13628169
> 
> 赞同：1
> 
> 时间：2012-11-29T14:41:21.083
> 
> 标签：c#, datetime, ftpwebrequest

我正在编写的程序有点麻烦。该程序检查远程 ftp 站点上文件的创建日期，然后如果它与今天的日期匹配，它将下载文件并将其上传到另一个 ftp 站点。运行程序时出现以下错误：

未处理的异常 system.formatexception 字符串未被识别为有效的日期时间

这是我用来将 ftp 文件创建日期转换为日期时间的代码

```
/* Get the Date/Time a File was Created */
string fileDateTime = DownloadftpClient.getFileCreatedDateTime("test.txt");
Console.WriteLine(fileDateTime);
DateTime dateFromString = DateTime.Parse(fileDateTime, System.Globalization.CultureInfo.InvariantCulture.DateTimeFormat);
Console.WriteLine(dateFromString); 
```

关于我在这里做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:44:04.397

如果从服务器返回的字符串是`20121128194042`，那么您的代码需要是：

```
DateTime dateFromString = DateTime.ParseExact(fileDateTime, 
   "yyyyMMddHHmmss", // Specify the exact date/time format received
   System.Globalization.CultureInfo.InvariantCulture.DateTimeFormat); 
```

**编辑**

该`getFileCreatedDateTime`方法的正确代码应该是：

```
public DateTime getFileCreatedDateTime(string fileName)
{
    try
    {
        ftpRequest = (FtpWebRequest)FtpWebRequest.Create(host + "/" + fileName);
        ftpRequest.Credentials = new NetworkCredential(user, pass);

        ftpRequest.UseBinary = true;
        ftpRequest.UsePassive = true;
        ftpRequest.KeepAlive = true;

        ftpRequest.Method = WebRequestMethods.Ftp.GetDateTimestamp;
        ftpResponse = (FtpWebResponse)ftpRequest.GetResponse();

        return ftpResponse.LastModified;
    }
    catch (Exception ex) 
    {
        // Don't like doing this, but I'll leave it here
        // to maintain compatability with the existing code:
        Console.WriteLine(ex.ToString());
    }

    return DateTime.MinValue;
} 
```

（在[这个答案](https://stackoverflow.com/a/1048083/124386)的帮助下。）

然后调用代码变为：

```
DateTime lastModified = DownloadftpClient.getFileCreatedDateTime("test.txt"); 
```

# c# - WPF 绑定 Telerik Chartview

> ID：13628172
> 
> 赞同：1
> 
> 时间：2012-11-29T14:41:31.423
> 
> 标签：c#, sql-server, wpf, telerik

我有一些来自存储过程的数据，我已经能够在非 Telerik DataGrid 中显示这些数据。使用以下代码。

```
CBFdataDataContext conn = new CBFdataDataContext();
List<spTotalRevByZipResult> sptotalrevbyzipresult = (from s in conn.spTotalRevByZip() select s).ToList();

ZipGrid.ItemsSource = sptotalrevbyzipresult; 
```

但是使用 radCartesianChart，它说没有 ItemSource。

```
<telerik:RadCartesianChart HorizontalAlignment="Left" Margin="10,104,0,0" Grid.Row="1" VerticalAlignment="Top" Width="723" Height="218" Name="ZipGrid">
           <telerik:RadCartesianChart.VerticalAxis>
               <telerik:LinearAxis/>
           </telerik:RadCartesianChart.VerticalAxis>
           <telerik:RadCartesianChart.HorizontalAxis>
               <telerik:CategoricalAxis/>
           </telerik:RadCartesianChart.HorizontalAxis>
           <telerik:RadCartesianChart.Series>
               <telerik:BarSeries CategoryBinding="subTotal"
                                  ValueBinding="custzip"
                                  ItemsSource="{Binding}"/>
           </telerik:RadCartesianChart.Series>
       </telerik:RadCartesianChart> 
```

那么如何使用数据加载图表？

```
CBFsqldataDataContext conn = new  CBFsqldataDataContext();

            List<spTotalRevByZipResult> sptotalrevbyzipresult = (from s in conn.spTotalRevByZip()

                                                                 select s).ToList();

            ZipGrid????????? = sptotalrevbyzipresult; 
```

样本数据

```
custzip subTotal
NULL    18229530.07
123 0.00
674 0.00
1532    0.00
1701    0.00
1821    10860.08
1923    0.00
2134    0.00
2194    0.00
2715    2779.80
2876    72.00
3051    109.63
3060    186.00 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:16:09.590

我建议你去阅读一些文档。

[这是使用 BarSeries 的 Telerik 的 RadCartesianChart](http://www.telerik.com/help/wpf/radchartview-series-barseries.html)的一个很好的链接。

> 您可以使用以下定义来显示一个简单的 BarSeries
> 
> **XAML**
> 
> ```
> <telerik:RadCartesianChart Palette="Windows8">
> <telerik:RadCartesianChart.HorizontalAxis>
>     <telerik:CategoricalAxis/>
> </telerik:RadCartesianChart.HorizontalAxis>
> <telerik:RadCartesianChart.VerticalAxis>
>     <telerik:LinearAxis />
> </telerik:RadCartesianChart.VerticalAxis>
> <telerik:RadCartesianChart.Series>
>     <telerik:BarSeries>
>         <telerik:BarSeries.DataPoints>
>             <telerik:CategoricalDataPoint Category="January" Value="2" />
>             <telerik:CategoricalDataPoint Category="February" Value="5" />
>             <telerik:CategoricalDataPoint Category="March" Value="3" />
>             <telerik:CategoricalDataPoint Category="April" Value="10" />
>             <telerik:CategoricalDataPoint Category="May" Value="9" />
>             <telerik:CategoricalDataPoint Category="June" Value="7" />
>             <telerik:CategoricalDataPoint Category="July" Value="1" />
>         </telerik:BarSeries.DataPoints>
>     </telerik:BarSeries>
> </telerik:RadCartesianChart.Series>
> </telerik:RadCartesianChart> 
> ```

# tornado - tornado-sockjs，如何从客户端设置会话 ID？

> ID：13628173
> 
> 赞同：0
> 
> 时间：2012-11-29T14:41:30.947
> 
> 标签：tornado, sockjs

我想创建实时应用程序，并且只想为特定用户（例如我的朋友）发送实时更新。

我在客户端有朋友 ID 列表和我自己的 ID。据我了解，我需要在连接时使用我自己的 id 设置 sockjs 会话，以便我的朋友以后能够在他们发送事件时找到我。

我找不到可以在哪里设置会话 ID 的问题？sockjs-client 不允许在连接时使用 url 发送参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:07:29.510

通常的方法是特别对待通过 sockjs 发送的第一条消息。如果您将您的授权/用户名/cookie/任何内容作为来自 sockjs-client 的第一条消息发送，您可以在 sockjs 服务器中接收该消息并将此连接标记为适合。

# c++ - 从 fstream 输入整数到二维向量<向量 > C++

> ID：13628176
> 
> 赞同：1
> 
> 时间：2012-11-29T14:41:36.733
> 
> 标签：c++, vector, ifstream

我正在尝试使用 push_back 将整数从 ifstream 动态添加到 2d 向量。基本上输入将类似于：

```
3
20 3
30 4
40 5 
3
50 6
60 7
70 8 
```

我想自己读取int（3,3 ..etc），然后创建数字对的二维向量（int本身描述了有多少对）。现在我正在使用 getline() 并将数字存储在 char 中，然后再次将它们转换为 int，但我觉得这可能并不理想。如果有人有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:49:16.170

类似（未经测试）：

```
std::istream_iterator<int> eos;
std::vector<std::vector<int>> matrix;
while(std::getline(str, line))
{
  std::istringstream istr(line);
  std::istream_iterator<int> iin(istr);
  std::vector<int> columns;
  std::back_insert_iterator<vector<int>> back_it(columns);
  std::copy(iin, eos, back_it);
  matrix.push_back(columns);
} 
```

# angularjs - 你可以在 angularjs 中嵌套 ngView 吗？

> ID：13628178
> 
> 赞同：3
> 
> 时间：2012-11-29T14:41:39.730
> 
> 标签：angularjs

我有一个单页网络应用程序，其模板/网页如下所示：

[模板左 | 模板右]

我想设置路由，以便当某些用户未登录时，他们会转到不同的页面（登录页面），而当他们登录时，路由只会影响 templateRight（这样不会重新加载 templateLeft）。

似乎最好的方法是使用路由和 ng-view，但由于一个路由影响整个页面，一个路由只影响 templateRight，我不确定如何正确创建控制器/路由，因为它似乎就像您不能嵌套 ng-view 一样。

我错了吗？实现这一目标的好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T10:23:14.480

实际上，这里正在进行 Alpha 开发：[https ://github.com/angular-ui/ui-router](https://github.com/angular-ui/ui-router)

> **主要目标** 将 Angular“路由”的概念演变为更通用的“状态”概念，用于管理粗略的应用程序 UI 状态。
> 
> **主要特点**： 状态管理器 $stateProvider 和 $state，将状态逻辑与路由逻辑分开。嵌套状态（父/子关系）。可以通过命名视图设置多个视图。ui-view 指令。URL 路由向后兼容 Angular v1 路由器 其他各种优点

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T15:14:52.097

**当前版本的 AngularJS 没有嵌套 ngView 的标准方法**。这是很常见的请求，为此打开了一些拉取请求，但没有签入。

在邮件列表和 SO 上都对此主题进行了多次讨论，人们试图采用不同的策略，但再一次 - 没有干净/推荐的嵌套 ngView 方式。

最近 AngularJS 团队认识到有多个路由器的空间，并将核心中的路由服务（和`ngView`指令）重构为一个单独的模块。取代“官方”路由器的最有希望的、社区驱动的努力似乎是 angular-ui 路由器：[https ://github.com/angular-ui/router](https://github.com/angular-ui/router)

# php - 在两个查询中拆分一个 WordPress posttype 存档页面

> ID：13628184
> 
> 赞同：2
> 
> 时间：2012-11-29T14:41:50.773
> 
> 标签：php, wordpress, archive, custom-post-type

我需要一点帮助来订购我的存档页面。我为我的内容类型“activiten”制作了一个自定义 WordPress 存档页面，并将其命名为：archive-activiten.php。并使用“pre_get_posts”操作进行查询。

我的存档模板中有两个查询：

1.  第一个显示未来事件
2.  第二个显示过去的事件

我想更改第一个查询的顺序。这样它就会在顶部显示第一个即将发生的事件。

archive-activiten.php 代码：

```
 <?php
/**
 * The template for displaying Archive pages.
 *
 * Learn more: http://codex.wordpress.org/Template_Hierarchy
 *
 * @package Simon van der Aa
 * @since Simon van der Aa 1.0
 */

get_header(); ?>

<div class="container main">
        <div class="row">
            <div class="span8">
                <section class="komende-activiteiten">
                    <h1 class="page-title">Activiteiten</h1>
                    <?php 
                    while ( have_posts() ) : the_post(); $eventdate = DateTime::createFromFormat('Ymd', get_field('activiteit_datum')); if($eventdate->format('Ymd') >= date('Ymd')) : ?>
                    <article class="agenda-item">
                        <h2><a href="<?php echo get_permalink() ?>" title="<?php echo get_the_title() ?>"><?php echo get_the_title() ?></a></h2>
                        <?php if ( has_post_thumbnail() ) :?>
                            <a href="<?php echo get_permalink(); ?>" title="<?php echo get_the_title(); ?>">
                            <figure class="article-image">
                            <?php the_post_thumbnail('besturen-thumb', array('class' => 'img-rounded')); ?>
                            <?php the_post_thumbnail_caption(); ?>
                            </figure>
                            </a>
                        <?php endif; if ( get_field('activiteit_datum', '') ) : $date = DateTime::createFromFormat('Ymd', get_field('activiteit_datum')); ?>
                            <div class="activiteit-datum">
                                <span class="dag"><?php echo $date->format('d');?></span>
                                <span class="maand"><?php echo $date->format('F');?></span>
                            </div>
                        <?php endif; echo the_excerpt(); if ( get_field('activiteit_inschrijfformulier', '') ) :?><a href="<?php echo get_permalink(); ?>#inschrijven" class="btn">Inschrijven voor de activiteit</a><?php endif; ?>
                    </article>
                    <?php endif; endwhile; ?>
                </section><!-- komende-activiteiten -->
                <section class="geweest-activiteiten">
                    <h2>Geweest</h2>
                    <table class="table table-striped agenda-archief">
                        <thead>
                            <tr>
                                <th>Datum</th>
                                <th>Activiteit</th>
                             </tr>
                        </thead>
                        <tbody>           
                    <?php while ( have_posts() ) : the_post(); $eventdate = DateTime::createFromFormat('Ymd', get_field('activiteit_datum')); if($eventdate->format('Ymd') < date('Ymd')) : ?>
                        <tr>
                          <td><?php echo $eventdate->format('d-m-Y') ?></td>
                          <td><a href="<?php echo get_permalink(); ?>" title="<?php echo get_the_title(); ?>"><?php echo get_the_title(); ?></a></td>
                        </tr>
                        <?php endif; endwhile;?>
                        </tbody>
                    </table>
                </section><!-- geweest-activiteiten -->
                <?php simonvanderaa_content_nav( 'nav-below' ); ?>
            </div><!--/ span8 -->
            <div class="span4">
                <?php get_sidebar(); ?>
            </div><!--/ span4 -->
        </div><!--/ row -->
    </div><!--/ container -->

<?php get_sidebar(); ?>
<?php get_footer(); ?> 
```

在我的 functions.php 中，我使用以下 pre_get_posts 操作

```
function my_post_queries( $query ) {
  // do not alter the query on wp-admin pages and only alter it if it's the main query
  if (!is_admin() && $query->is_main_query()){

    // alter the query for the home and category pages 

    if(is_home()){
      $query->set('posts_per_page', 3);
    }

   if ( is_post_type_archive('commissie') ){
           $query->query_vars['posts_per_page'] = 5;
           $query->query_vars['order'] = 'desc';
           return;
       }
   if ( is_post_type_archive('nieuws') ){
           $query->query_vars['posts_per_page'] = 10;
           $query->query_vars['order'] = 'desc';
           return;
       }
   if ( is_post_type_archive('besturen') ){
           $query->query_vars['posts_per_page'] = 1;
           $query->query_vars['order'] = 'desc';
           return;
       }
   if ( is_post_type_archive('faqs') ){
           $query->query_vars['posts_per_page'] = 99;
           $query->query_vars['order'] = 'asc';
           return;
       }

   if ( is_post_type_archive('activiteiten') ){
           $query->query_vars['posts_per_page'] = 10;
           $query->query_vars['orderby'] = 'meta_value';
           $query->query_vars['meta_key'] = 'activiteit_datum';
           return;
       }
  }
}
add_action( 'pre_get_posts', 'my_post_queries' ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-14T11:18:49.167

您需要为您的帖子类型做的第一件事是向参数添加元查询。我不确定您的日期是如何存储的，但我假设它是自 Epoch ('U') 以来的秒数。

```
$meta_query = array(
                 array(
                    'key'=> 'activiteit_datum',
                    'value'=> date('U'),
                    'compare'=> '>',
                 ),
);
$query->set('meta_query',$meta_query); 
```

以上仅显示未来的帖子，显然您可以使用相反的方式显示过去的事件。

因此，为了将其保留为一个查询，您现在需要一些东西来表明您是否想要未来或过去的事件。在 URL 中使用类似查询参数的东西可能是最好的方法：

```
if ('true' == $_GET['past']) {
    $compare = '<';
} else {
    $compare = '>';
}

$meta_query = array(
                 array(
                    'key'=>'activiteit_datum',
                    'value'=> date('U'),
                    'compare'=> $compare,
                 ),
);
$query->set('meta_query',$meta_query); 
```

因此，现在[http://www.yoursite.co.uk/activiten](http://www.yoursite.co.uk/activiteiten)会显示未来的帖子，而[http://www.yoursite.co.uk/activiten/?past=true](http://www.yoursite.co.uk/activiteiten/?past=true)会显示过去的帖子。

希望对您的解决方案有所帮助。

# c++ - 使用接口或函数对象进行回调？

> ID：13628187
> 
> 赞同：9
> 
> 时间：2012-11-29T14:42:03.567
> 
> 标签：c++, design-patterns, interface, c++11

在 OO 中，通常使用接口实现回调：（粗略示例）

```
class Message {}

class IMsgProcessor {
public:
     virtual void handle_msg(const Message& msg) = 0;
}

class RequestMsgProcessor : public IMsgProcessor {
     virtual void handle_msg(const Message& msg)  {
     // process request message
    }
}

class CustomSocket {
public:
   Socket(IMsgProcessor* p) : processor_(p) {}

   void receive_message_from_network(const Message& msg) {
       // processor_ does implement handle_msg. Otherwise a compile time error. 
       // So we've got a safe design.
       processor_->handle_msg(msg);
   }
private:
   IMsgProcessor* processor_;
} 
```

到现在为止还挺好。使用 C++11，另一种方法是让 CustomSocket 只接收 std::function 对象的实例。它不关心它是在哪里实现的，也不关心对象是否为非空值：

```
class CustomSocket {
public:
   Socket(std::function<void(const Message&)>&& f) : func_(std:forward(f)) {}

   void receive_message_from_network(const Message& msg) {
       // unfortunately we have to do this check for every msg.
       // or maybe not ...
       if(func_)
            func_(msg);
   }
private:
   std::function<void(const Message&)> func_;
} 
```

现在有以下问题：
1\. 性能影响如何？我猜虚拟函数调用比调用函数对象要快，但要快多少？我正在实现一个快速的消息传递系统，我宁愿避免任何不必要的性能损失。
2\. 在软件工程实践方面，我不得不说我更喜欢第二种方法。更少的代码，更少的文件，更少的混乱：没有接口类。更大的灵活性：您只能通过设置一些函数对象而将其他函数对象保留为空来实现接口的子集。或者，您可以在单独的类中或通过自由函数或两者的组合（而不是在单个子类中）实现接口的不同部分。此外，任何类都可以使用 CustomSocket，而不仅仅是 IMsgProcessor 的子类。这是一个**很大的优势**，在我看来。
你说什么？你认为这些论点有什么根本缺陷吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:06:18.677

你可以两全其美

```
template<class F>
class MsgProcessorT:public IMsgProcessor{
  F f_;
  public:
  MsgProcessorT(F f):f_(f){}
  virtual void handle_msg(const Message& msg)  {
      f_(msg);
 }

};
template<class F>
IMsgProcessor* CreateMessageProcessor(F f){
    return new MsgProcessor<T>(f);

}; 
```

然后你可以像这样使用

```
Socket s(CreateMessageProcessor([](const Message& msg){...})); 
```

或者为了更容易将另一个构造函数添加到 Socket

```
class Socket{
...
template<class F>
Socket(F f):processor_(CreateMessageProcessor(f){}

}; 
```

然后你可以做

```
Socket s([](const Message& msg){...}); 
```

并且仍然具有与虚函数调用相同的效率

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T14:56:14.733

接口方法更传统但也更冗长：很清楚 a做了什么`MessageProcessor`，您不必检查它。此外，您可以通过多个 Socket 重复使用同一个对象。

该方法更通用：可以使用`std::function`任何接受的东西。`operator()(Message const&)`然而，缺乏冗长有降低代码可读性的危险。

我不知道性能损失，但如果存在显着差异，我会感到惊讶。

如果这是您的代码的重要部分（看起来是这样），我会坚持使用接口方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T14:57:27.127

在您的两个示例中，您实际上都在使用接口。不同的是你定义它们的方式。在第一种情况下，接口是具有纯虚函数的传统类，而在第二种情况下，接口是函数引用 - 从设计角度来看，它与 C 函数指针有很大不同。在我看来，您可以根据具体要求混合两种变体，并考虑每个新案例的利弊（就像您所说的那样）。关于性能影响，我认为最好的答案是执行测试、比较结果并匹配您的性能要求。

# javascript - 如何添加类（'溢出'）；

> ID：13628189
> 
> 赞同：0
> 
> 时间：2012-11-29T14:42:04.423
> 
> 标签：javascript, jquery, html, css

我想点击一个按钮然后它添加类

```
.overflow{overflow-y:scroll}; 
```

我用过`addClass('overflow'}`，但点击后会重新加载整个页面。

一个动作后`removeClass('overflow')` 我不会选择使用`.css('overflow','hidden')`，因为`'auto','scroll','hidden'`不适合我，我希望它在使用后完全删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:43:42.133

为了防止页面被重新加载：

```
$("#yourbuttonid").click(function(e){
   e.preventDefault();  // this will prevent the link to be followed
   //the rest of your code
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T15:10:41.260

你为什么不只使用`<a>`with `href="#"`？

那不会重新加载页面并仍然触发您的脚本。

在您发布的代码中，您有一个小错字：您以`addClass()`...结尾，`}`这将是正确的代码：

`$("#targetElement").addClass('overflow');`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T14:43:48.713

为了防止页面重新加载，您应该[防止默认](http://api.jquery.com/event.preventDefault/)锚`click`事件：

```
$("a.button").on("click", function(e) {
    // ... addClass("overflow");

    e.preventDefault();  // or instead you may use
                         // return false;
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T15:02:45.223

```
$("#yourbuttonid").click(function(e){

    //your code

    e.preventDefault();  // this will prevent the link's default action
                         // make sure it comes last in your code,
                         // if not it will cancel your code from executing.

}); 
```

# java - 如何以编程方式使用浏览器 cookie

> ID：13628190
> 
> 赞同：0
> 
> 时间：2012-11-29T14:42:08.573
> 
> 标签：java, python, cookies, http-headers, httpwebrequest

我有一个自动登录和爬取网站的爬虫，但由于登录已更改，它不再工作。

我想知道，我可以将浏览器 cookie（也就是我手动登录）提供给我的 HTTP 请求吗？原则上是否有什么特别错误的东西不能使它起作用？如何找到与网站相关的浏览器 cookie？

如果可行，我如何获得可以粘贴到 HTTP 请求中的“原始”cookie 字符串？

我对这个领域很陌生，所以请原谅我无知的问题。我可以使用 Python 或 Java

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:47:27.483

当您发送登录信息（通常是为了响应许多其他请求）时，服务器会为客户端设置一些 cookie，您必须跟踪它们并将它们发送回服务器以处理每个后续请求。

完整的实现还将跟踪它们应该存储的时间。

# c# - 位运算练习

> ID：13628191
> 
> 赞同：10
> 
> 时间：2012-11-29T14:42:09.557
> 
> 标签：c#, bit-manipulation, bitwise-or

我有以下练习：数字 n0 到 n7 是以二进制表示的字节。任务是每一位都下降到底部，或者如果它遇到另一个位，它就会停留在它上面。这是一个视觉示例：

![在此处输入图像描述](../Images/b2d5a8f70b7ce0d8e3b8656fe4e1c57e.png)

我意识到，如果我对从 n0 到 n7 的所有数字应用按位或，它始终是 n7 的正确结果：

```
n7 = n0 | n1 | n2 | n3 | n4 | n5 | n6 | n7;
Console.WriteLine(n7); // n7 = 236 
```

不幸的是，对于其余的字节 n6、n5、n4、n3、n2、n1、n0，我想不出正确的方法。你有什么想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-05T18:23:33.487

我想提出一个不会遍历集合 N 次的解决方案，并且我相信我找到了一种新颖的分而治之的方法：

```
int n0_, n1_, n2_, n3_, n4_, n5_, n6_, n7_;

// Input data
int n0 = 0;
int n1 = 64;
int n2 = 8;
int n3 = 8;
int n4 = 0;
int n5 = 12;
int n6 = 224;
int n7 = 0;

//Subdivide into four groups of 2 (trivial to solve each pair)
n0_ = n0 & n1;
n1_ = n0 | n1;

n2_ = n2 & n3;
n3_ = n2 | n3;

n4_ = n4 & n5;
n5_ = n4 | n5;

n6_ = n6 & n7;
n7_ = n6 | n7;

//Merge into two groups of 4
n0 = (n0_ & n2_);
n1 = (n0_ & n3_) | (n1_ & n2_);
n2 = (n0_ | n2_) | (n1_ & n3_);
n3 = (n1_ | n3_);

n4 = (n4_ & n6_);
n5 = (n4_ & n7_) | (n5_ & n6_);
n6 = (n4_ | n6_) | (n5_ & n7_);
n7 = (n5_ | n7_);

//Merge into final answer
n0_ = (n0 & n4);
n1_ = (n0 & n5) | (n1 & n4); 
n2_ = (n0 & n6) | (n1 & n5) | (n2 & n4);
n3_ = (n0 & n7) | (n1 & n6) | (n2 & n5) | (n3 & n4);
n4_ = (n0) | (n1 & n7) | (n2 & n6) | (n3 & n5) | (n4);
n5_ = (n1) | (n2 & n7) | (n3 & n6) | (n5);
n6_ = (n2) | (n3 & n7) | (n6);
n7_ = (n3 | n7); 
```

这种方法只需要 56 次按位运算，这比提供的其他解决方案要少得多。

了解在最终答案中设置位的情况很重要。例如，如果 n5 中的一列设置了三个*或更多*位，则该列为 1。这些位可以按任何顺序排列，这使得有效地计算它们变得相当困难。

这个想法是将问题分解为子问题，解决子问题，然后将解决方案合并在一起。每次我们合并两个块时，我们都知道这些位将被正确地“丢弃”在每个块中。这意味着*我们不必*在每个阶段检查所有可能的位排列。

虽然直到现在我才意识到，这与 Merge Sort 非常相似，它在合并时利用已排序的子数组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T17:30:31.890

此解决方案仅使用按位运算符：

```
class Program
{
    static void Main(string[] args)
    {
        int n0, n1, n2, n3, n4, n5, n6, n7;
        int n0_, n1_, n2_, n3_, n4_, n5_, n6_, n7_;

        // Input data
        n0 = 0;
        n1 = 64;
        n2 = 8;
        n3 = 8;
        n4 = 0;
        n5 = 12;
        n6 = 224;
        n7 = 0;

        for (int i = 0; i < 7; i++)
        {
            n0_ = n0 & n1 & n2 & n3 & n4 & n5 & n6 & n7;
            n1_ = (n1 & n2 & n3 & n4 & n5 & n6 & n7) | n0;
            n2_ = (n2 & n3 & n4 & n5 & n6 & n7) | n1;
            n3_ = (n3 & n4 & n5 & n6 & n7) | n2;
            n4_ = (n4 & n5 & n6 & n7) | n3;
            n5_ = (n5 & n6 & n7) | n4;
            n6_ = (n6 & n7) | n5;
            n7_ = n7 | n6;

            n0 = n0_;
            n1 = n1_;
            n2 = n2_;
            n3 = n3_;
            n4 = n4_;
            n5 = n5_;
            n6 = n6_;
            n7 = n7_;
        }

        Console.WriteLine("n0: {0}", n0);
        Console.WriteLine("n1: {0}", n1);
        Console.WriteLine("n2: {0}", n2);
        Console.WriteLine("n3: {0}", n3);
        Console.WriteLine("n4: {0}", n4);
        Console.WriteLine("n5: {0}", n5);
        Console.WriteLine("n6: {0}", n6);
        Console.WriteLine("n7: {0}", n7);
    }
} 
```

不过它可以简化，因为我们真的不需要重新计算所有数字：在每次迭代中，第一行肯定是好的。

我的意思是：

```
class Program
{

    static void Main(string[] args)
    {
        int n0, n1, n2, n3, n4, n5, n6, n7;
        int n0_, n1_, n2_, n3_, n4_, n5_, n6_, n7_;

        n0 = 0;
        n1 = 64;
        n2 = 8;
        n3 = 8;
        n4 = 0;
        n5 = 12;
        n6 = 224;
        n7 = 0;

        n0_ = n0 & n1 & n2 & n3 & n4 & n5 & n6 & n7;
        n1_ = (n1 & n2 & n3 & n4 & n5 & n6 & n7) | n0;
        n2_ = (n2 & n3 & n4 & n5 & n6 & n7) | n1;
        n3_ = (n3 & n4 & n5 & n6 & n7) | n2;
        n4_ = (n4 & n5 & n6 & n7) | n3;
        n5_ = (n5 & n6 & n7) | n4;
        n6_ = (n6 & n7) | n5;
        n7_ = n7 | n6;
        n0 = n0_;
        n1 = n1_;
        n2 = n2_;
        n3 = n3_;
        n4 = n4_;
        n5 = n5_;
        n6 = n6_;
        n7 = n7_;
        Console.WriteLine("n0: {0}", n0);
        n1_ = (n1 & n2 & n3 & n4 & n5 & n6 & n7) | n0;
        n2_ = (n2 & n3 & n4 & n5 & n6 & n7) | n1;
        n3_ = (n3 & n4 & n5 & n6 & n7) | n2;
        n4_ = (n4 & n5 & n6 & n7) | n3;
        n5_ = (n5 & n6 & n7) | n4;
        n6_ = (n6 & n7) | n5;
        n7_ = n7 | n6;
        n1 = n1_;
        n2 = n2_;
        n3 = n3_;
        n4 = n4_;
        n5 = n5_;
        n6 = n6_;
        n7 = n7_;
        Console.WriteLine("n1: {0}", n1);
        n2_ = (n2 & n3 & n4 & n5 & n6 & n7) | n1;
        n3_ = (n3 & n4 & n5 & n6 & n7) | n2;
        n4_ = (n4 & n5 & n6 & n7) | n3;
        n5_ = (n5 & n6 & n7) | n4;
        n6_ = (n6 & n7) | n5;
        n7_ = n7 | n6;
        n2 = n2_;
        n3 = n3_;
        n4 = n4_;
        n5 = n5_;
        n6 = n6_;
        n7 = n7_;
        Console.WriteLine("n2: {0}", n2);
        n3_ = (n3 & n4 & n5 & n6 & n7) | n2;
        n4_ = (n4 & n5 & n6 & n7) | n3;
        n5_ = (n5 & n6 & n7) | n4;
        n6_ = (n6 & n7) | n5;
        n7_ = n7 | n6;
        n3 = n3_;
        n4 = n4_;
        n5 = n5_;
        n6 = n6_;
        n7 = n7_;
        Console.WriteLine("n3: {0}", n3);
        n4_ = (n4 & n5 & n6 & n7) | n3;
        n5_ = (n5 & n6 & n7) | n4;
        n6_ = (n6 & n7) | n5;
        n7_ = n7 | n6;
        n4 = n4_;
        n5 = n5_;
        n6 = n6_;
        n7 = n7_;
        Console.WriteLine("n4: {0}", n4);
        n5_ = (n5 & n6 & n7) | n4;
        n6_ = (n6 & n7) | n5;
        n7_ = n7 | n6;
        n5 = n5_;
        n6 = n6_;
        n7 = n7_;
        Console.WriteLine("n5: {0}", n5);
        n6_ = (n6 & n7) | n5;
        n7_ = n7 | n6;
        n6 = n6_;
        n7 = n7_;
        Console.WriteLine("n6: {0}", n6);
        n7_ = n7 | n6;
        n7 = n7_;
        Console.WriteLine("n7: {0}", n7);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T15:05:41.150

计算每列中 1 位的数量。接下来，清除该列并从底部添加正确数量的“令牌”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T15:35:51.627

根据 CodesInChaos 的建议：

```
static class ExtensionMethods {
    public static string AsBits(this int b) {
        return Convert.ToString(b, 2).PadLeft(8, '0');
    }
}

class Program {
    static void Main() {
        var intArray = new[] {0, 64, 8, 8, 0, 12, 224, 0 };
        var intArray2 = (int[])intArray.Clone();
        DropDownBits(intArray2);

        for (var i = 0; i < intArray.Length; i++)
            Console.WriteLine("{0} => {1}", intArray[i].AsBits(),
                intArray2[i].AsBits());
    }

    static void DropDownBits(int[] intArray) {
        var changed = true;

        while (changed) {
            changed = false;
            for (var i = intArray.Length - 1; i > 0; i--) {
                var orgValue = intArray[i];
                intArray[i] = (intArray[i] | intArray[i - 1]);
                intArray[i - 1] = (orgValue & intArray[i - 1]);
                if (intArray[i] != orgValue) changed = true;
            }
        }
    }
} 
```

**这个怎么运作**

让我们保持简单，从这 3 个半字节开始：

```
0) 1010
1) 0101
2) 0110 
```

我们从底行开始（i = 2）。通过按位或与上面的行 (i-1) 一起应用，我们确保第 2 行中的所有位为 0，如果第 1 行中为 1，则将变为 1。所以我们让第 1 行中的 1 位下降到第 2 行。

```
1) 0101
2) 0110 
```

第 1 行的右侧可能会掉下来，因为第 2 行有“空间”(a `0`)。所以第 2 行变成第 2 行或第 1 行：`0110 | 0101`即`0111`。

现在我们必须删除从第 1 行下降的位。因此，我们对第 2 行和第 1 行的原始值执行按位和。所以`0110 & 0101`变成`0100`。因为第 2 行的值发生了变化，`changed`变为`true`。到目前为止的结果如下。

```
1) 0100
2) 0111 
```

这结束了 for `i`= 2 的内部循环。然后`i`变为 1。现在我们让第 0 行的位下降到第 1 行。

```
0) 1010
1) 0100 
```

第 1 行成为第 1 行或第 0 行的结果：`0100 | 1010`即`1110`. 第 0 行成为按位和这两个值的结果：`0100 & 1010`is `0000`。同样，当前行已更改。

```
0) 0000
1) 1110
2) 0111 
```

如您所见，我们还没有完成。这就是`while (changed)`循环的用途。我们从第 2 行重新开始。

第 2 行 = `0111 | 1110 = 1111`，第 1 行 = `0111 & 1110 = 0110`。行已更改，`changed`也是`true`。

```
0) 0000
1) 0110
2) 1111 
```

然后`i`变为 1。第 1 行 = `0110 | 0000 = 0110`，第 0 行 = `0110 & 0000 = 0000`。第 1 行没有改变，但`changed`已经是`true`并且保持不变。

这一轮`while (changed)`循环，又发生了一些变化，所以我们将再次执行内部循环。

这一次，没有任何行会改变，从而导致`changed`剩余`false`，进而结束`while (changed)`循环。

# jquery-ui - 使用 Mapping 和 Sortable 插件淘汰

> ID：13628194
> 
> 赞同：0
> 
> 时间：2012-11-29T14:42:22.023
> 
> 标签：jquery-ui, knockout.js, mapping, jquery-ui-sortable

我正在尝试让剔除映射插件与 Ryan Niemeyer 的可排序插件一起使用，但没有成功。在我的示例中，如果您尝试将项目排序到列表的中间，那么它总是将其放在底部。排序到列表顶部有效，但是如果您尝试将项目排序到顶部以外的任何其他位置，它将自动转到列表底部。

示例：http: [//jsfiddle.net/thebassix/cKX53/1/](http://jsfiddle.net/thebassix/cKX53/1/)

这是我的html：

```
<div id="results">
            <h3>Tasks</h3>
            <ul data-bind="sortable: series">
                <li data-bind="text: Name"></li>
            </ul>
        </div>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:18:47.147

该问题看起来与将您的`_destroy`属性转换为可观察的映射插件有关。Knockout 核心和处理的可排序插件中的功能`_destroy`期望它是一个普通属性。

映射插件确实有一个`copy`选项，您可以使用它来简单地复制属性而不是创建可观察对象。但是，这似乎只适用于顶级属性，所以如果您直接传入一个数组，那么您可能需要设置映射选项，例如：

```
var mappingOptions = {
    create: function(options) {
        return ko.mapping.fromJS(options.data, { copy: '_destroy' });
    }            
}; 
```

示例：http: [//jsfiddle.net/rniemeyer/9UGKQ/](http://jsfiddle.net/rniemeyer/9UGKQ/)

# java - 如何为有根的 Android 编译纯本机可执行文件

> ID：13628197
> 
> 赞同：0
> 
> 时间：2012-11-29T14:42:33.253
> 
> 标签：java, android, c++, java-native-interface

我正在开发一个有根的 Android 2.3。在我的应用程序中，使用 jni 机制，我调用了需要 root 权限才能运行的本机 (c/c++) 函数，这就是它总是失败的原因（即使我的手机已 root - 因为特定的进程/应用程序需要授予 root 权限） .

我想将该函数移动到一个外部可执行文件，该可执行文件将通过我将从 java ( `Runtime.getRuntime().exec("sudo ...")`;)运行的命令“sudo exec_name”在 linux 上运行

所以

1）如何编译本机可执行文件？（不是像往常一样的库 [.so]）

2) 在我有一个独立的可执行文件后，我必须把它放在系统的什么地方，并拥有什么权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:51:07.787

要编译本机可执行文件，请使用`include $(BUILD_EXECUTABLE)`而不是`include $(BUILD_SHARED_LIBRARY)`. `NDK`调用中有一个示例，`test-libstdc++`它显示了如何构建最简单的本机可执行文件。

然后你需要把它放在可执行位置，比如`/data/local`并调用`chmod 777`以使其可执行。之后，您可以通过 shell 运行它。

> > 我想将该函数移动到一个外部可执行文件，该可执行文件将通过我将从 java (Runtime.getRuntime().exec("sudo ...");) 运行的命令“sudo exec_name”在 linux 上运行

在这种情况下，您的工作流程将如下所示：

*   您将代码编译为本机可执行文件并将其放入应用程序资产中
*   在开始时，您需要将 yoru 可执行文件从资产复制到`/system/bin`
*   允许使用`chmod 777`
*   实际运行您的可执行文件

前三点应该只做一次。

# java - Eclipse IDE 中的 Mule 项目

> ID：13628201
> 
> 赞同：1
> 
> 时间：2012-11-29T14:42:47.920
> 
> 标签：java, eclipse, spring, mule

我正在开发一个骡子应用程序。该应用程序已成功打包并安装在 mule 独立服务器上。

尝试在 Eclipse IDE 上运行相同的项目时出现错误。与此错误作斗争。

我使用 Maven 作为构建器。

请帮忙。下面给出的是错误。

```
 INFO: Refreshing org.mule.config.spring.MuleApplicationContext@148238f4: startup date [Thu Nov 29 09:36:07 EST 2012]; root of context hierarchy
    Nov 29, 2012 9:36:07 AM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
    INFO: Loading XML bean definitions from URL [jar:file:/C:/Users/.m2/repository/org/mule/modules/mule-module-spring-config/3.3.0/mule-module-spring-config-3.3.0.jar!/mule-spring-config.xml]
    Nov 29, 2012 9:36:07 AM org.springframework.util.xml.SimpleSaxErrorHandler warning
    WARNING: Ignored XML validation warning
    org.xml.sax.SAXParseException: schema_reference.4: Failed to read schema document 'http://www.springframework.org/schema/beans/spring-beans-current.xsd', because 1) could not find the document; 2) the document could not be read; 3) the root element of the document is not <xsd:schema>.
        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
        at ........

    Nov 29, 2012 9:36:07 AM org.mule.MuleServer shutdown
    SEVERE: 
    ********************************************************************************
    Message               : Line 6 in XML document from URL [jar:file:/C:/Users/.m2/repository/org/mule/modules/mule-module-spring-config/3.3.0/mule-module-spring-config-3.3.0.jar!/mule-spring-config.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'beans'.
    Code                  : MULE_ERROR-71999
    --------------------------------------------------------------------------------
    Exception stack is:
    1\. cvc-elt.1: Cannot find the declaration of element 'beans'. (org.xml.sax.SAXParseException)
      com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper:195 (null)
    2\. Line 6 in XML document from URL [jar:file:/C:/Users/.m2/repository/org/mule/modules/mule-module-spring-config/3.3.0/mule-module-spring-config-3.3.0.jar!/mule-spring-config.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'beans'. (org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException)
      org.springframework.beans.factory.xml.XmlBeanDefinitionReader:396 (null)
    3\. Line 6 in XML document from URL [jar:file:/C:/Users/.m2/repository/org/mule/modules/mule-module-spring-config/3.3.0/mule-module-spring-config-3.3.0.jar!/mule-spring-config.xml] is invalid; nested exception is org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'beans'. (org.mule.api.lifecycle.InitialisationException)
      org.mule.registry.AbstractRegistry:117 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/api/lifecycle/InitialisationException.html)
    --------------------------------------------------------------------------------
    Root Exception stack trace:
    org.xml.sax.SAXParseException: cvc-elt.1: Cannot find the declaration of element 'beans'.
        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:195)
        at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:131)
        at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:384)
        + 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything)
    ********************************************************************************

    Nov 29, 2012 9:36:07 AM org.mule.MuleServer shutdown
    SEVERE: 
    ********************************************************************************
    * A Fatal error has occurred while the server was running:                     *
    * cvc-elt.1: Cannot find the declaration of element 'beans'.                   *
    * (org.xml.sax.SAXParseException)                                              *
    *                                                                              *
    * The error is fatal, the system will shutdown                                 *
    ******************************************************************************** 
```

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:29:34.997

尝试将 Mule 配置中的 Spring 模式位置从 [http://www.springframework.org/schema/beans/spring-beans-current.xsd](http://www.springframework.org/schema/beans/spring-beans-current.xsd)替换 为 [http://www.springframework.org/schema/beans/spring-beans -3.1.xsd](http://www.springframework.org/schema/beans/spring-beans-3.1.xsd)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-10T20:06:29.463

我已经为我的问题找到了解决方案。原因是 spring bean 在 mule-config 之外的 applicationContext.xml 文件中声明，然后导入。这导致了这个问题。当所有 spring bean 在 mule-config 中声明时，它现在可以正常工作了。

谢谢大家的帮助。

# excel - Zip 批处理命令和 Excel

> ID：13628203
> 
> 赞同：3
> 
> 时间：2012-11-29T14:42:59.060
> 
> 标签：excel, batch-file, cmd, office-2007, 7zip

我有许多 excel 文件，我需要将它们压缩到他们自己的每个 zip 文件夹中。我以为我已经解决了这个问题，但我有同事回过头来告诉我他们无法打开 Excel 文件，因为它已损坏。我回去检查了原始文件，它打开得很好。但是当我打开相同版本的压缩文件时，我也得到了损坏的错误。我在使用Office 2010，可以修复它，但是我的同事都是Office 2007，似乎无法修复该文件。我的批处理代码如下：

```
for /r %%X in (*.xlsm) do "C:\Program Files\7-Zip\7z.exe" a -tzip "%%~nX" "%%X" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:43:48.937

```
@Echo OFF
PUSHD "C:\Program Files\7-Zip" && (
    FOR /R "%CD%" %%# in (*.xlms) DO (7z a -tzip "%%~n#.zip" "%%#")
    POPD
)
REM Don't worry about the PUSHD command, the %CD% variable isn't expanded, that's the trick.
Pause&Exit 
```

如果您希望将所有内容放在一个文件中，则可以使用动态运算符 *（星号）和 7zip -recursive 参数：

```
7z a -r -tzip "ALL.zip" "*.xlsm" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:04:56.610

我认为您可能使用了错误的值作为 7zip 可执行文件的第一个参数。根据以下文档`FOR`：

> %~nI - 仅将 %I 扩展为文件名

并根据 7zip 文档：

> 您可以使用带有单个字母 a 的“a”命令。此命令代表“归档”或“添加”。使用它将文件放入存档中。**您必须指定目标存档和源文件（按该顺序）。**

因此，将您的脚本与示例文件一起使用，在我看来，您的命令行变为：

```
"C:\Program Files\7-Zip\7z.exe" a -tzip "somefile.xlsm" "C:\path\to\somefile.xlsm" 
```

第一个参数最后不应该有`.zip`文件扩展名吗？所以该行被修改为如下所示：

```
for /r %%X in (*.xlsm) do "C:\Program Files\7-Zip\7z.exe" a -tzip "%%~nX.zip" "%%X" 
```

尽管很烦人，但文件扩展名实际上在 Windows 中意味着什么。您的上一行是创建一个带有`.xlsm`扩展名的 zip 文件。当人们尝试打开这些文件时，Excel 会抱怨（因为它是 zip 文件；不是 .xlsm）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T14:21:26.647

对不起大家。

这是一场虚惊。原来它不是所有的文件，但只有少数几个。这些文件按区域划分，唯一损坏的是第一个区域。为什么？我只能假设它们被我最初制作批处理文件的尝试破坏了，因为所有其他文件都与完成的批处理一起压缩，因此没有错误。所以我的剧本没有错。不过感谢您的帮助。

# jquery - jquery mobile 分配 var onclick

> ID：13628207
> 
> 赞同：2
> 
> 时间：2012-11-29T14:43:05.697
> 
> 标签：jquery, jquery-mobile, onclick

我有一个列表，我想在单击该列表中的项目时设置一个变量。

```
<li><a href="#secondpage" onclick=""><img src="images\HF1.jpg" class="ui-li-thumb">text</a></li> 
```

我想使用 onclick 将变量 X 设置为某个值。例如 onclick X 将设置为紫色。有谁知道我该怎么做？

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:48:10.273

你可以尝试做这样的事情：

```
<script>
$(function(){
  var z;
  $(".x-var-setter").click(function(e){
    z = $(this).attr("data-color");
  });
});
</script>

<ul>
  <li><a data-color="purple" href="#secondpage" class="x-var-setter" onclick=""><img src="images\HF1.jpg" class="ui-li-thumb">text</a></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:06:02.890

这是一个适合您的工作示例：http: [//jsfiddle.net/Gajotres/A8bPy/](http://jsfiddle.net/Gajotres/A8bPy/)

HTML：

```
<ul data-role="listview" data-theme="a">
    <li id="purple"><a href="#">item 1</a></li>
    <li id="red"><a href="#">item 2</a></li>
    <li id="orange"><a href="#">item 3</a></li>
</ul> 
```

Javascript：

```
$('ul[data-role="listview"] li').bind('click',function(event, ui){
    colors.activeColor  =  $(this).attr('id');
});

var colors = {
    activeColor : 'none'
} 
```

我在对象中使用了一个变量，它是您请求的一个变体。看看我的例子，看看它是如何工作的。Listview 可以有尽可能多的元素，此事件将适用于每个人+它将返回 li 唯一值。

# python - Windows 上的 SASL-GSSAPI 在绑定期间失败

> ID：13628211
> 
> 赞同：1
> 
> 时间：2012-11-29T14:43:18.293
> 
> 标签：python, ldap, sasl, gssapi

我在 RHEL 上尝试了下面的代码行，效果非常好。在 Linux 上，我只需要获得 Kerberos 票。

```
mport ldap
import ldap.sasl

conn=ldap.initialize('ldap://auto.test-auto.com',trace_level=2)

conn.set_option(ldap.OPT_PROTOCOL_VERSION, ldap.VERSION3)
conn.set_option(ldap.OPT_REFERRALS,0)
sasl = ldap.sasl.gssapi()
conn.sasl_interactive_bind_s('', sasl) 
```

然后我将同样的东西复制到安装了 ActivePython-2.7","python-ldap-2.4.10","openssl-0.9.8o","setup-sasl-1.5.27" 的 Windows 2k3 服务器中。

```
Traceback (most recent call last):
  File "C:\susanta\test-sasl.py", line 10, in <module>
    conn.sasl_interactive_bind_s('', sasl)
  File "C:\Python27\lib\site-packages\ldap\ldapobject.py", line 229, in sasl_interactive_bind_s
    return self._ldap_call(self._l.sasl_interactive_bind_s,who,auth,RequestControlTuples(serverctrls),RequestControlTuples(clientctrls),sasl_flags)
  File "C:\Python27\lib\site-packages\ldap\ldapobject.py", line 99, in _ldap_call
    result = func(*args,**kwargs)
LOCAL_ERROR: {'desc': 'Local error'} 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:57:53.627

您是否使用 Cyrus SASL 作为后端？如果是这样，它会针对 MIT 或 Heimdal 进行编译。您无权访问 TGT。搜索注册表项：会话密钥 tgt。但是如果您使用 GSS-API，Cyrus SASL 在 Windows 上并不能真正使用，除非您尝试使用 Kerberos for Windows。

# c# - 将 XAML 加载到帧中时出错

> ID：13628212
> 
> 赞同：0
> 
> 时间：2012-11-29T14:43:18.617
> 
> 标签：c#, silverlight

我的应用程序中有一个 XAML 文件，我正在尝试通过框架控件将其他 XAML 文件加载到其中，但是它不起作用。我收到一个错误`Content for the URI is invalid`。当我运行应用程序时，该错误只是作为对话框错误弹出，因此没有可用的堆栈跟踪。

以下是我的“母版页”的代码：

```
<navigation:Page x:Class="SilverAIM.BusinessCenter.BusinessCenterMaster" 
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation" 
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
           xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
           xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
           mc:Ignorable="d"
           xmlns:navigation="clr-namespace:System.Windows.Controls;assembly=System.Windows.Controls.Navigation"
           d:DesignWidth="758" d:DesignHeight="480"
           Title="BusinessCenterMaster Page">
    <Grid x:Name="LayoutRoot">
        <navigation:Frame Height="100" HorizontalAlignment="Left"  Margin="0,248,0,0" Source="Test.xaml" Name="testFrame" VerticalAlignment="Top" Width="758" />
    </Grid>
</navigation:Page> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:17:18.533

使用 ContentControl 而不是 Frame 让它工作。

# twig - 测试循环当前值

> ID：13628222
> 
> 赞同：1
> 
> 时间：2012-11-29T14:43:51.330
> 
> 标签：twig

我想以其他方向呈现 HTML 块。这是获取当前循环值的正确语法吗？

```
{% if ( {{ cycle(['odd', 'even']) }} == 'odd' ) %}
foo
{% elseif %}
bar
{% endif %} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:54:06.633

1.  `cycle(['odd', 'even'])`不应该`{{ }}`在`if` 语句里面
2.  `cycle()`应该有第二个参数来计算循环的数量
3.  `{% elseif %}`应该有条件或更改为`{% else %}`

这是你应该做的让代码按照你的意愿工作（循环 10 次）：

```
{% for i in 0..9 %}
    {% if cycle(['odd', 'even'], i) == 'odd' %}
        foo
    {% else %}
        bar
    {% endif %}
{% endfor %} 
```

如果您希望 for 循环对象，您可以使用`loop.index`（从 1 开始）而不是`i`：

```
{% for object in objects %}
    {% if cycle(['even', 'odd'], loop.index) == 'odd' %}
        foo
    {% else %}
        bar
    {% endif %}
{% endfor %} 
```

或`loop.index0`（从 0 开始）：

```
{% for object in objects %}
    {% if cycle(['odd', 'even'], loop.index0) == 'odd' %}
        foo
    {% else %}
        bar
    {% endif %}
{% endfor %} 
```

# gwt - GWTP：在注销时清除演示者

> ID：13628223
> 
> 赞同：1
> 
> 时间：2012-11-29T14:43:56.510
> 
> 标签：gwt, gwtp

我在我的 GWT 应用程序中使用 GWTP 并具有以下架构：

```
LoginPresenter (Presenter)
    DashboardPresenter (TabContainerPresenter)
        TabbedPresenter1 (Presenter)
        TabbedPresenter2 (Presenter)
        TabbedPresenter3 (Presenter) 
```

第一次启动我的应用程序时，在 DashboardPresenter 中调用 onBind 和 addTab 方法，当我导航到选项卡时，在该演示者上调用 onbind 方法。

如果我创建一个 PlaceRequest 并通过我的 PlaceManager 导航回 LoginPresenter（通过按注销按钮），我将返回到登录演示者。

问题是，如果我再次登录，则不会调用所有 onBind 方法，因为它们仍在内存中。onReset 和 onReveal 被正确调用，但我非常希望每个 Presenter 都被重置，并且每次登录时都会调用 onBind。

如果用户没有足够的权限查看这些选项卡，我决定登录事件哪些选项卡应该对用户可见，并在 DashboardPresenter 的 addTab 方法中限制选项卡。但截至目前，这些选项卡是在用户第一次登录时设置的，但不会在下次登录时设置。这意味着如果具有较少权限的用户在管理员用户之后登录，他可以看到与管理员相同的选项卡。不好！

我应该如何处理？我非常想在用户注销（导航到登录页面）时“重置”所有演示者或会话。是否需要“重置” Ginjector，使其不会返回与以前相同的绑定对象？

澄清一下：我们确实有服务器端安全性，它禁止无权访问敏感数据的用户。但是当用户登录时，gwt 应用程序会收到用户可以访问的功能列表。这用于自定义 UI 以适应用户的权限。（例如，根据用户权限自定义可见选项卡）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T10:52:57.683

我不确定这是否有效：

但是您可以尝试`LogoutEvent`在 global 上触发 a `EventBus`，在所有`Presenters`需要“卸载”（`TabbedPresenter1`等）的地方处理它并调用`onUnbind()`它们。然后导航回`LoginPresenter`

或者，您可以让我们自定义`TabData`（子类`TabDataBasic`并添加标志`hasAccess`）。再次触发 a `LogoutEvent`，当您处理它时，您可以执行以下操作：

```
TabDataDynamic tabData = (TabDataDynamic)getProxy().getTabData();
tabData.setHasAccess(false);
getProxy().changeTab(tabData); 
```

在`TabPanel`你的实现中，当标志设置为 false 时，你必须确保选项卡是隐藏的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-07T21:59:38.333

我认为您应该看看 GateKeeper，它可以很容易地与演示者一起使用，例如：

```
@ProxyCodeSplit
@NameToken(NameTokens....)
@UseGatekeeper( Your1GateKeeper.class)
public interface MyProxy extends TabContentProxyPlace<YourPresenter> {
} 
```

您可以向 GateKeeper 注入 Dashboard Presenter 以检查此选项卡是否可用：

```
@Singleton
public class Your1GateKeeper implements Gatekeeper{

 private DashboardPresenter presenter;

 @Inject
 public ReadOnlyGateKeeper(DashboardPresenter presenter) {
    this.presenter = presenter;
 }

 @Override
 public boolean canReveal() {
    return presenter.isAvailable();
 }

} 
```

因此，使用适当的 GateKeeper 将使您达到所需的安全性。

# java - if else 语句，等于或小于值

> ID：13628227
> 
> 赞同：0
> 
> 时间：2012-11-29T14:44:10.730
> 
> 标签：java, swing

我有以下代码用于获取我的组的按钮：

```
char group = 0;

if (Integer.parseInt(lblTbt.getText()) <= 30) {
    group = 'A';
} else if (Integer.parseInt(lblTbt.getText()) <=60) {
    group = 'B';

lblGroup.setText(String.valueOf(group)); 
```

但在另一个按钮中，我想获得一个十进制值。

我尝试使用相同的代码，但出现错误。

```
double rf = 0;

if (Integer.parseInt(lblSurface.getText()) <= 29) {
   rf = '1.1';
} else if (Integer.parseInt(lblSurface.getText()) <=59) {
    rf = '1.3';

lblRF.setText(String.valueOf(RF)); 
```

我想将 rf（十进制值）和 setText 放入标签中。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:46:05.683

您需要将：更改`rf = '1.1';`为：`rf = 1.1;`

此外，您可能需要：`lblRF.setText(String.valueOf(rf));`而不是使用`RF`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:46:16.393

我的天啊。好的，首先，您已将 rf 声明为双精度，但您为其分配了 '1.1'。尝试使 rf 成为一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T14:47:14.820

在您的代码中，您声明了一个 double 变量并为其分配了一个字符。这就是问题所在。删除这些引号并解决问题。另外，更改`String.valueOf(RF)`为`String.valueOf(rf)`

```
double rf = 0;

if (Integer.parseInt(lblSurface.getText()) <= 29) {
   rf = 1.1;
} else if (Integer.parseInt(lblSurface.getText()) <=59) {
    rf = 1.3;

 lblRF.setText(String.valueOf(rf)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-30T12:17:35.000

对不起，我刚刚意识到我在错误的按钮上使用了代码。

代码现在工作正常。：

```
 double rf = 0;

    if (Integer.parseInt(lblSurface.getText()) <= 29) {
       rf = 1.4;
    } else if (Integer.parseInt(lblSurface.getText()) <=59) {
        rf = 1.2;

}
    lblRF.setText(String.valueOf(rf)); 
```

# qt - 如何在paintEvent之外获取QPainter的字体度量？

> ID：13628229
> 
> 赞同：2
> 
> 时间：2012-11-29T14:44:12.400
> 
> 标签：qt, fontmetrics, qt5

如何在paintEvent绘图方法之外获取QPainter的字体度量？在屏幕上绘画之前我需要这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:10:04.467

如果您需要在绘制事件之外进行文本布局，只需从您将使用的字体创建一个 QFontMetrics。

# objective-c - 尝试创建 UIColor 时发送到类的无法识别的选择器

> ID：13628230
> 
> 赞同：2
> 
> 时间：2012-11-29T14:44:18.663
> 
> 标签：objective-c, ipad, colors, uicolor

我正在尝试使用十六进制颜色代码创建自定义颜色。我有一个名为 UIColor+Hex 的单独类，它接受一个十六进制字符串并将其转换为颜色代码并返回 UIColor。

UIColor+Hex.h

```
#import <UIKit/UIKit.h>

@interface UIColor (Hex)

+ (UIColor *)colorWithHexString:(NSString *)hex;

@end 
```

UIColor+Hex.m

```
#import "UIColor+Hex.h"

@implementation UIColor (Hex)
+ (UIColor *)colorWithHexString:(NSString *)hex
{
    if ([hex length]!=6 && [hex length]!=3)
    {
        return nil;
    }

    NSUInteger digits = [hex length]/3;
    CGFloat maxValue = (digits==1)?15.0:255.0;

    NSUInteger redHex = 0;
    NSUInteger greenHex = 0;
    NSUInteger blueHex = 0;

    sscanf([[hex substringWithRange:NSMakeRange(0, digits)] UTF8String], "%x", &redHex);
    sscanf([[hex substringWithRange:NSMakeRange(digits, digits)] UTF8String], "%x", &greenHex);
    sscanf([[hex substringWithRange:NSMakeRange(2*digits, digits)] UTF8String], "%x", &blueHex);

    CGFloat red = redHex/maxValue;
    CGFloat green = greenHex/maxValue;
    CGFloat blue = blueHex/maxValue;

    return [UIColor colorWithRed:red green:green blue:blue alpha:1.0];
}

@end 
```

然后我将 UIColor+Hex.h 导入我的其他类之一，并通过以下方式调用它：

```
[self setSelectedfillColor:[UIColor colorWithHexString:@"FF0000"].CGColor]; 
```

每当我点击此代码时，我都会收到此错误...

> 'NSInvalidArgumentException'，原因：'+[UIColor colorWithHexString:]：无法识别的选择器发送到类 0x873d60'

我已经尝试了我能想到的一切，但我仍然不断收到这个错误。任何人都知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T14:49:04.337

在 Build Settings 下的项目中添加`-ObjC -all_load`到您的 Other Linker Flags。

-ObjC 允许静态库使用 Objective-C 特定的东西，如 kvc 或**categories**。

-all_load 解决 gcc/llvm 中的错误，其中 -ObjC 未正确使用。

[https://developer.apple.com/library/mac/#qa/qa2006/qa1490.html](https://developer.apple.com/library/mac/#qa/qa2006/qa1490.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-04T20:03:28.803

确保添加`UIColor+Hex.m`到 Build Phases 选项卡中的 Compile Sources 列表。

编译器在构建期间不会抱怨，但会在运行时在选择器上死掉。

很多时候，它是 XCode 中“编译源”中缺少的类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T15:58:46.427

在您发布时测试了您的类别，即使使用 cgcolor 属性方法也可以正常工作。将这两行分开并确保问题不在于 setSelectedFillColor。有时调试错误可能会产生误导。

# c# - 如何在 SelectElement.SelectByValue() 之后不等待页面加载

> ID：13628232
> 
> 赞同：0
> 
> 时间：2012-11-29T14:44:29.010
> 
> 标签：c#, webdriver, selenium-webdriver

给定一个包含一个`<select>`元素和一些`<option>`s 的页面，单击该页面会导致浏览器打开一个新 URL，例如（省略 JavaScript 代码）：

```
<select>
  <option value="here">go here</option>
  <option value="there">go there</option>
</select> 
```

当我使用**WebDriver**自动执行此行为时，我调用

```
hereOrThereSelectElement.SelectByValue("here"); 
```

然后它等到新页面加载完毕。

就我而言，新位置的页面加载需要 60 多秒（故意），因此我不得不增加 WebDriver 实例的**命令超时**。不幸的是，此超时将影响使用相同 WebDriver 实例创建的所有其他测试。

此外，我想执行显式等待新页面加载（以将其标记为在测试场景中长时间运行），但在这种情况下，将在`SelectByValue`命令成功后调用下一个命令 - 因此不再需要等待。

我查看了源代码并意识到该`SelectByValue`命令使用了在`Click`需要时等待页面加载的逻辑。

所以我的问题是：*如何在不等待新页面加载的情况下显式执行`SelectByValue`(or )？`Click`*

**更新：** 我的代码中真正想要的是：

```
// the following command should not wait for the new page to load
hereOrThereSelectElement.SelectByValueButDoNotWait("here");
webDriverWait.Until(/* some "page has loaded" check */) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T13:56:55.143

最后，我找到了解决方案。

同时，问题稍微转移到了`Click()`对超时的 WebElement 方法的调用。尽管如此，以下解决方案也适用于调用的原始问题`SelectByValue()`。

因此，可以使用 Selenium 的`Actions`低级交互构建器来执行对元素的单击。

```
var actions = new Actions(webDriver);
actions
  .MoveToElement(aClickableWebElement);
  .Click();
  .Build()
  .Perform(); 
```

也许这会帮助任何有类似问题的人。

# javascript - ExtJS 4在预填充字段时跳过事件

> ID：13628238
> 
> 赞同：0
> 
> 时间：2012-11-29T14:44:46.077
> 
> 标签：javascript, extjs4

我在 ExtJS 4 中有一个组合框，它分配了两个侦听器。一个是在afterrender上，选择一个默认值。（组合框列出月份，默认网格有当月的数据，我希望组合框显示本月。）另一个是选择，它会根据所选月份获取报告。由于报告已预加载，我不希望它在组合框的预填充时激活，仅在组合框的后续使用（即人机交互）时激活。

这就是我设置监听器的方式：

```
init: function init() {
    this.control({
        '[xtype=monthcombo]': {
            afterrender: this.onMonthComboAfterRenderDo,
            select: this.onMonthComboSelectDo
        }
    })
} 
```

这是 prepop afterrender 函数：

```
onMonthComboAfterRenderDo: function(monthcombobox) {
    monthcombobox.suspendEvents(false); // Don't fire the select event
    var date = new Date(),
        thisMonth = Ext.Date.add(date, Ext.Date.MONTH,0);
    thisMonth = Ext.Date.format(thisMonth,'Ym');
    monthcombobox.calculateMonths(23,0);
    monthcombobox.setValue(thisMonth);
    monthcombobox.resumeEvents();
} 
```

哦，如您所见，我确实尝试过抑制事件的触发，但这些调用似乎并没有真正做任何事情。最后，这是选择项目时调用的函数。

```
onMonthComboSelectDo: function(monthcombobox) {
    console.debug('Month selected');
    var monthcode = monthcombobox.getValue();
    var grid = Ext.ComponentQuery.query('shipmentsvsgrid')[0];
    grid.store.getProxy().setExtraParam('monthID', monthcode);
    grid.store.load();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:44:12.067

```
onMonthComboAfterRenderDo: function(monthcombobox) {
    monthcombobox.initialSet = true;
    var date = new Date(),
        thisMonth = Ext.Date.add(date, Ext.Date.MONTH,0);
    thisMonth = Ext.Date.format(thisMonth,'Ym');
    monthcombobox.calculateMonths(23,0);
    monthcombobox.setValue(thisMonth);
}

onMonthComboSelectDo: function(monthcombobox) {
    if(monthcombobox.initialSet) {
        monthcombobox.initialSet = false;
        return false;
    }
    var monthcode = monthcombobox.getValue();
    var grid = Ext.ComponentQuery.query('shipmentsvsgrid')[0];
    grid.store.getProxy().setExtraParam('monthID', monthcode);
    grid.store.load();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:58:45.320

一个干净的替代方案也是在报告预加载完成时设置值。在控件初始化时，您可以将 设置为`emptyText`您想要的值，并且不会触发任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T14:51:01.863

您是否尝试过使用该`setRawValue`方法？

# javascript - 使用 Ajax 修改 XML？

> ID：13628244
> 
> 赞同：1
> 
> 时间：2012-11-29T14:45:08.393
> 
> 标签：javascript, xml, ajax

如何使用 JavaScript/Ajax 修改 XML 文件中的值？

我可以使用 Ajax 打开 XML 文件，并在我的脚本中使用它的值，但现在我想使用 Ajax 将我的脚本所做的更改发送回服务器上的 XML 文件。

我认为这应该是可能的，但我找不到可以学习的例子。我遵循了很多教程（也来自[http://lynda.com](http://lynda.com)），但通常他们使用来自 XML 的数据并且他们不会更改它。

我不喜欢使用其他语言，因为它是一个非常简单的脚本和 XML 文件，只包含 4 个字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:52:07.157

以下是使用 javascript 将 xml 发送回服务器端的方法：

```
jQuery.post( 
    url, 
    xml_as_string, 
    success( data, textStatus, jqXHR){

    }, 
    "xml"
); 
```

您可以使用 DOMParser 在 javascript 中访问 XML

[http://www.erichynds.com/jquery/working-with-xml-jquery-and-javascript/](http://www.erichynds.com/jquery/working-with-xml-jquery-and-javascript/)

```
// the correct way to use jQuery w/ XML
// also see http://gist.github.com/553364 for a normalized DOMParser

var 
   // XML string
   xmlString = '<wu_tang><member name="Method Man" /></wu_tang>',

   // DOM parsing object
   parser = new DOMParser(),

   // XML DOM object
   xmlObject = parser.parseFromString(xmlString , "text/xml");

// this is WRONG.  It works, but you're not on an XML DOM
$( xmlString ).find("member").attr("name"); // -> Method Man

// the correct way
$( xmlObject ).find("member").attr("name"); // -> Method Man

// in XHR requests the parsing is automatically done for you by
// the browser.  jQuery passes it into the success callback
$.ajax({
   dataType: 'xml',
   url: 'wutang.xml',
   success: function( XMLObject ){

      // OMG
      $( xmlObject ).find("member").attr("name"); // -> Method Man
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:44:54.003

使用 javascript，您可以更改所需节点的 xml 值及其属性。

首先，您需要通过 getElementbyname 或使用 javascript xquery 从 xml 中获取所需的节点。

例如从链接[http://www.w3schools.com/xml/default.asp检查 xml](http://www.w3schools.com/xml/default.asp)

假设我有价值 xml_item = 有那个 xml。

就像我想更改标签的值一样。然后我这样做是为了改变价值。var element_to = xml.getElementsByName('To')[0]; //要改变它的值，首先检测borwser是否是IE然后使用element_to.text =“你的新值” //如果不是ie然后使用。element.to.textContent = "你的新值";

//如果你想改变元素的属性值，你需要这样做。element_to.setAttribute("attibute_name","new_value");

我希望你能明白这一点。

# c# - 将 EF 实体映射到 BL 对象

> ID：13628245
> 
> 赞同：1
> 
> 时间：2012-11-29T14:45:11.783
> 
> 标签：c#, .net, entity-framework-4

我首先在我的解决方案中使用 EF DB。

我有`BL`，`DAL`和`Common`图层。

`BL`包含操纵业务模型的经理

`Dal`进行 CRUD 操作

后者保留所有其他层使用的所有 DTO 和接口。

每个项目都引用该`Common`项目。

现在我想创建`IDal`一个接口，它返回我的`Business model`对象​​列表（EF 类型）

问题是 EF 类型是在 Dal 项目中定义的，并且这个参考 Common\IDal

因此 IDal 由于循环引用而不能引用 Dal。

我想将 EF 对象映射到 BL 对象，但是我怎样才能使它高效呢？

我有很多组合的`Business model`对象。我不想复制它们。

正确的？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-29T14:52:09.963

我认为 IDAL 应该是 Common 或 DAL 本身。

每当您想引用一个项目时，都无需创建许多项目。

如果需要，您可以更改存储库的可见性，`internal`以便其他项目能够仅使用`public`接口。

对于更多替代和不同的实现，我认为[NSK Starter Kit](http://nsk.codeplex.com)将是一个很好的参考。

**更新1：**

结构应如下所示：

*   项目的核心部分几乎包含了你所有的纯业务`Domain`。
*   下面有一个`Data Access`参考`Domain`
*   会有一个`Data Access Common`包含`Data Access Interfaces`
*   有一个`Service`项目可能包含更复杂的操作，这些操作涉及多个聚合对象，它引用`Domain`和`Data Access Interface`
*   有一个`Service Interface`包含`Service Interface and DTO`s
*   并且有一个`UI`引用`Service Interface`和可能`Domain`。

甚至你也可以看看我自己在[Cedar制作的结构](https://github.com/jzinedine/Cedar)

# javascript - 解析 JSON 响应会引发错误

> ID：13628246
> 
> 赞同：0
> 
> 时间：2012-11-29T14:45:13.000
> 
> 标签：javascript, json

```
Parse error on line 4:
.../2012",    "Data": "JVBERi0xLjMNCg0KMjA
----------------------^
Expecting 'STRING', 'NUMBER', 'NULL', 'TRUE', 'FALSE', '{', '[' 
```

我得到了一个非常大的响应，我无法从我的服务中粘贴到这里，我在**jsonlinit**中收到了这个错误。如何在 javascript 绕过中处理此类响应。

**添加了示例响应**

```
{
    "CreateByFullName": "asas",
    "CreateDateTime": "11\/05\/2012",
    "Data": "JVBERi0xLjMNCg0KMjAxIDAgb2JqDQo8PA0KL0UgMzQ1MDQNCi9IIFsg==",
     "DocumentId":1540,"DocumentIdSpecified":false,"DocumentTypeName":"big sq bmp","FileType":"PDF","LastModifiedDateTime":"07\/14\/2004","LastModifiedFullName":""} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:19:32.190

如前所述，您的完整示例是有效的 JSON。

`Data`我可以通过在字符串中插入换行符来引发您看到的错误。它似乎是 base-64 数据，您确定没有嵌入换行符吗？

# r - 删除 ar 表中少于 3 个观察值的行

> ID：13628247
> 
> 赞同：0
> 
> 时间：2012-11-29T14:45:14.987
> 
> 标签：r

我正在寻找一种方法来删除数据框中少于 3 个观察值的行。让我以更好的方式解释这个问题。我有一个包含 6 个独立变量和 1 个依赖变量的数据框。当我在`ggplot2`使用分面时绘制密度图时，没有绘制少于 3 个观察值的变量（显然）。我正在寻找一种方法来删除这些观察不到 3 个的行。这是数据的一个例子：

```
'data.frame':   432 obs. of  6 variables:
$ ID        : Factor w/ 439 levels "1","2","3","4",..: 1 2 3 4 5 6 7 8 9 10 ...
$ Forno     : Factor w/ 8 levels "Micro","Macro",..: 1 1 1 6 6 6 4 4 4 5 ...
$ Varieta: Factor w/ 11 levels "cc","dd",..: 11 11 11 6 6 6 1 1 1 6 ...
$ Impiego: Factor w/ 5 levels "aperto","chiuso",..: 2 2 2 3 3 3 2 2 2 5 ...
$ MediaL    : num  60.7 58.9 60.5 55.9 56.1 ...
$ MediaL.sd : num  4.81 4.79 4.84 5.27 5.64 ... 
```

ggplot代码：

```
ggplot(d1,aes(MediaL))+geom_density(aes(fill=Varieta),colour=NA,alpha=0.5)+
    scale_fill_brewer(palette="Set1")+facet_grid(Forno~Impiego)+
    theme(axis.text.x=element_text(angle=90,hjust=1))+theme_mio +xlim(45,65)+
    stat_bin(geom="text",aes(y=0,label=..count..),size=2,binwidth=2) 
```

我想删除少于 3 个观察值的所有交互。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:00:26.347

提供样本数据的实际输出会很有用。您可以通过`dput(yourObject)`代替您提供的文本表示来提供此信息。但是，似乎下面的基本方法同样适用于`matrix`、`data.frame`和`table`数据结构。

```
#Matrix
x <- matrix(c(5,4,4,3,1,5,1,8,2), ncol = 3, byrow = TRUE)
x[x < 3] <- NA
#----
     [,1] [,2] [,3]
[1,]    5    4    4
[2,]    3   NA    5
[3,]   NA    8   NA

#data.frame
xd <- as.data.frame(matrix(c(5,4,4,3,1,5,1,8,2), ncol = 3, byrow = TRUE))
xd[xd < 3] <- NA
#----
  V1 V2 V3
1  5  4  4
2  3 NA  5
3 NA  8 NA

#Table. Simulate some data first
set.seed(1)
samp <- data.frame(x1 = sample(c("acqua", "fango", "neve"), 20, TRUE),
                   x2 = sample(c("pippo", "pluto", "paperino"), 20, TRUE))
x2 <-table(samp)
x2[x2 < 3] <- NA
#----
       x2
x1      paperino pippo pluto
  acqua                    3
  fango        3            
  neve               3     3 
```

`melt()`ggplot通常喜欢长格式的数据，通常通过`reshape2`. 如果您提供绘图代码，这可能说明了删除您不想绘制的数据的更好方法。

# ruby-on-rails-3 - Ruby on Rails - 结合复选框和高级搜索的多按钮

> ID：13628248
> 
> 赞同：0
> 
> 时间：2012-11-29T14:45:16.363
> 
> 标签：ruby-on-rails-3, button

目前我有一个按钮被添加到索引表单的情况。这与搜索和复选框等其他功能完美结合，这些功能也是索引表单的一部分。

的代码`index.html.erb`：

```
<%= form_tag order_path, :method => 'get' do %>    
    <p>
      <%= submit_tag "Historical Search", :account_short => nil %>
       <%= text_field_tag :search, params[:search] %>
    </p> 
<% end %>

<%= form_tag sendnext_order_path, :method => :put do %>
    <%= submit_tag "Send to Desk" %><br/>
    -- other code from index-form
<% end %> 
```

结合`controller`：

```
def sendnext
    Order.update_all(["status_id = ? ", "2"], :id => params[:order_ids])
    redirect_to order_path, notice: 'Order succesfully send to desk.'
 end 
```

现在我想在按钮旁边添加第二个按钮，该`Send to Desk`按钮具有与现有工作按钮不同的另一个操作。直到现在我还没有能力意识到这一点。

请指教。欢迎任何反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:42:46.640

使用[button_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to)

```
<%= button_to('Send to Desk', 'sendnext', :method => "put") %>
<%= button_to('Cancel Order', 'cancelorder ', :method => "put") %> 
```

将为您处理表格。 `submit_tag`正在提交我相信的第一个表格。

例如

```
<%= button_to "New", :action => "new" %> 
```

会产生

```
# => "<form method="post" action="/controller/new" class="button_to">
#      <div><input value="New" type="submit" /></div>
#    </form>" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T09:51:09.320

谢谢你的帮助。我找到了一个可行的解决方案，可以实现我当前的要求：

The `index.html.erb` looks like the following:

```
<%= form_tag updateorder_order_path, :method => :put do %> 
   <%= submit_tag "To Desk" %><br/> 
   <%= submit_tag "Cancel Order" %> 

   -- other code like data fields

 <%end %> 
```

The `controller.rb` looks like the following:

```
 def updateorder   
    if params[:commit] == "To Desk"
       Order.update_all(["status_id = ? ", "2"], :id => params[:order_ids])
       redirect_to order_path, notice: 'Order(s) successfully send to desk.'
    elsif params[:commit] == "Cancel Order"
       Order.update_all(["status_id = ? ", "3"], :id => params[:order_ids])
       redirect_to order_path, notice: 'Order(s) successfully cancelled.'
    else
       Order.update_all(["status_id = ? ", "5"], :id => params[:order_ids])
       redirect_to order_path, notice: 'Order(s) successfully updated.'
    end
  end 
```

The `routes.rb` contains the next code:

```
 resources :orders do
        put 'updateorder', :on => :collection
     end 
```

# eclipse - AVDM 未在 Eclipse 中打开

> ID：13628249
> 
> 赞同：1
> 
> 时间：2012-11-29T14:45:18.417
> 
> 标签：eclipse

我已经安装了 Eclipse 并尝试设置 Android 虚拟设备。但是当我单击“Android 虚拟设备管理器”选项时，什么也没有发生。它没有打开。我尝试再次安装插件，但它说插件已经安装。我应该怎么办？

# c# - 单击按钮后如何在标签中显示文本

> ID：13628250
> 
> 赞同：2
> 
> 时间：2012-11-29T14:45:30.413
> 
> 标签：c#, streamreader

单击按钮后如何在标签上显示。

例如，（我为我的 3 个文本框键入了 ABC，我的 .txt 文件会将 ABC 保存在其中，一旦我单击读取按钮，我的 3 个标签将在每个标签中单独显示 ABC。之后，我为我的 3 个文本框键入了 DEF ，.txt 文件将有 ABCDE F。在我点击我的阅读按钮后，我希望 3 个标签反映 DEF，然后是 ABC，然后我再次点击后，它将显示 DEF，反之亦然。）

这是我的程序：

```
private void readButton_Click(object sender, EventArgs e)
{
    reader = new StreamReader("zzz.txt",true);
    while (reader.Peek() != -1)
    {
        label1.Text = reader.ReadLine();
        label2.Text = reader.ReadLine();
        label3.Text = reader.ReadLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:54:10.757

根据您的评论，您似乎想要这个

```
label1.Text = label1.Text + reader.ReadLine();
label2.Text = label2.Text + reader.ReadLine();
label3.Text = label3.Text + reader.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:55:35.590

由于这个问题现在已经改变了好几次，我不确定你到底在找什么。但是，如果我了解您要做什么，我建议将这些值保存在内存中，并在关闭应用程序时将它们写入文件。

（或者查看 FileStream，或者类似的搜索功能。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T14:58:11.393

我认为。订购问题。

如果您使用格式化文件可能会更好，例如带有名为“CreationDate”的附加列的[cvs](http://en.wikipedia.org/wiki/Comma-separated_values)，因此您可以按日期对数据进行排序并在标签中以适当的顺序显示它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T14:49:19.553

对于 Windows 表单，使用`.Text`标签上的属性（即使您正在使用）：-

```
 private void btnEnter_Click(object sender, EventArgs e)
{
    int a = 420 / 10;
    lblResult.Text = a.ToString();
} 
```

# c# - C# 等效于 C++ ostream::tellp 用于磁盘上的大小限制

> ID：13628255
> 
> 赞同：1
> 
> 时间：2012-11-29T14:45:53.390
> 
> 标签：c#, c++, streamwriter, ostream

C++ ostream::tellp 的 StreamWriter 是否有 C# 等价物？我正在将一些旧的 C++ 代码移植到 C#，但客户端仍然想继续使用软盘（阅读：旧设备），所以我需要找到一种方法来找到文件指针位置或找到我写了多少磁盘已经。

以下是我到目前为止创建的方法：

```
 private bool isDisketteBoundary(ref StreamWriter swOutput, int nCurrentDisketteNo) {
      // Get current file pointer position
      // long filePosition = nOStream.tellp(); <-- C++ code
      long filePosition = 0; // <-- needs to change to find file pointer position

      // Valid?
      if(filePosition != -1) {
           // Is the new size over a boundary?
           float numDiskettes = (float)((float)filePosition / (float)Constants.DisketteSize);
           int disketteCount = Convert.ToInt32(Math.Ceiling(numDiskettes));

           // Is the diskette count larger than the current index?
           return (nCurrentDisketteNo < disketteCount) ? true : false;
      }
      else {
           throw new Exception("Unable to get file pointer from StreamWriter");
      }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:53:42.963

我想你正在寻找

```
swOutput.BaseStream.Position 
```

请参阅 MSDN：http: [//msdn.microsoft.com/en-us/library/system.io.stream.position.aspx](http://msdn.microsoft.com/en-us/library/system.io.stream.position.aspx)。

# linux - 查找修改后的文件并将它们回显到服务器根目录上的 txt 文件中

> ID：13628264
> 
> 赞同：1
> 
> 时间：2012-11-29T14:46:29.157
> 
> 标签：linux, file, shell, echo

我需要一个 shell 命令来显示整个服务器（递归）上最后修改的文件和新文件，并将它们回显到根目录中的 txt 文件中。

有人有这样的吗？

我试过了

`find / - mmtime 30 -printf "%AD %Ar - %p\n" 2> /dev/null | sort -r > /lastmodified.txt`

将过去 30 天内所有修改文件的所有名称发布到根目录下的 txt 文件中，但它只显示服务器本身的文件，而不显示我的网站上传到的目录。

提前谢谢你 - 我不是专家，这是我迄今为止发现的。这是相对紧急的，因为我需要这个来修复上周发生的被黑文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T21:12:45.673

inotify-tools 怎么样

[https://github.com/rvoicilas/inotify-tools/wiki#wiki-getting](https://github.com/rvoicilas/inotify-tools/wiki#wiki-getting)

[http://linux.die.net/man/1/inotifywait](http://linux.die.net/man/1/inotifywait)

* * *

inotifywait 示例 2

#!/bin/sh

EVENT=$(inotifywait --format '%e' ~/file1)

[ 美元？!= 0 ] && 退出

[ "$EVENT" = "MODIFY" ] && echo '文件已修改！'

[ "$EVENT" = "DELETE_SELF" ] && echo '文件已删除！'

＃ ETC...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:10:00.677

来自[http://content.hccfl.edu/polllock/Unix/FindCmd.htm](http://content.hccfl.edu/pollock/Unix/FindCmd.htm)：

```
find . -mtime 0   # find files modified within the past 24 hours
find . -mtime -1  # find files modified within the past 24 hours
find . -mtime 1   # find files modified between 24 and 48 hours ago
find . -mtime +1  # find files modified more than 48 hours ago 
```

确保您只有一个“m”和一个减号`-mtime -30`，如 chorobas 评论中所建议的那样，才能获得最后 30 天。`-mtime 30`只会给出 30 天前的文件。

您可能希望使用选项`-daystart`来获取从午夜开始的最近 30 天的文件，而不是仅在 30*24 小时前。使用`%TD`and`%Tr`而不是`%AD`and`%Ar`来获取修改时间（而不是访问时间）。

最终的命令将是：

```
find / -daystart -mtime -30 -printf "%TD %Tr - %p\n" 2> /dev/null | sort -r > /lastmodified.txt 
```

请注意，排序将在 1 月中断，因为 12 排在 01 之前。如果要确保日期始终按顺序排列，请使用例如时间定义`%T+`(2012-11-29+21:07:41.0000000000) 或`%Tu/%Tm/%Td %TH:%TM`(12/ 11/29 21:07)

# objective-c - 基本的 iOS 问题

> ID：13628267
> 
> 赞同：0
> 
> 时间：2012-11-29T14:46:43.860
> 
> 标签：objective-c, ios, xcode, tableview

我正在尝试从苹果开发者计划中完成“你的第二个 iOS 应用程序”教程。它是一个基本的 tableView 应用程序。我的问题是应用程序正在成功构建并且没有警告，但是我无法从主视图中获取详细视图。我已经复制并粘贴了 segue 标识符和苹果提供的代码。segue 正在使用 push，我已将其删除并重试了几次。我正在模拟器中测试应用程序。

1.  如何判断 segue 是否有效？

2.  每次我将代码从 Xcode 复制/粘贴到堆栈溢出问题文本区域时，我都会在底部收到警告说代码必须缩进 4 个空格？？？这是否意味着我必须逐行缩进代码？我做了 control + k 并粘贴在突出显示的区域，但是我仍然收到警告？？

3.  运行模拟器并查看它时，我试图通过单击它来使用披露指示器，我是否必须推动一些特殊的东西，例如 control = click 或 command = click 等？

这是 BirdsMasterViewController.m 文件的代码：

```
 //
            //  BirdsMasterViewController.m
            //  BirdWatching
            //
            //  Created by David Hall on 11/13/12.
            //  Copyright (c) 2012 David Hall. All rights reserved.
            //

            #import "BirdsMasterViewController.h"

            #import "BirdsDetailViewController.h"

            #import "BirdSightingDataController.h"

            #import "BirdSighting.h"

            /*
            @interface BirdsMasterViewController () {
                NSMutableArray *_objects;
            }
            @end
            */
            @implementation BirdsMasterViewController

            - (void)awakeFromNib
            {
                [super awakeFromNib];

                self.dataController = [[BirdSightingDataController alloc] init];
            }

            - (void)viewDidLoad
            {
                [super viewDidLoad];
                // Do any additional setup after loading the view, typically from a nib.
            /*
                self.navigationItem.leftBarButtonItem = self.editButtonItem;

                UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)];
                self.navigationItem.rightBarButtonItem = addButton;
            */
             }

            - (void)viewDidUnload
            {
                [super viewDidUnload];
                // Release any retained subviews of the main view.
            }

            - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
            {
                return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
            }

            /*- (void)insertNewObject:(id)sender
            {
                if (!_objects) {
                    _objects = [[NSMutableArray alloc] init];
                }
                [_objects insertObject:[NSDate date] atIndex:0];
                NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
                [self.tableView insertRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
            }
            */
            #pragma mark - Table View

            - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
            {
                return 1;
            }

            - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
            {
                return [self.dataController countOfList];
            }

            - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
            {
                static NSString *CellIdentifier = @"BirdSightingCell";

                static NSDateFormatter *formatter = nil;
                if (formatter == nil)
                {
                    formatter = [[NSDateFormatter alloc] init];
                    [formatter setDateStyle:NSDateFormatterMediumStyle];
                }

                UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
                BirdSighting *sightingAtIndex = [self.dataController objectInListAtIndex:indexPath.row];
                [[cell textLabel] setText:sightingAtIndex.name];
                [[cell detailTextLabel] setText:[formatter stringFromDate:(NSDate *)sightingAtIndex.date]];

                return cell;
            }

            - (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
            {
                // Return NO if you do not want the specified item to be editable.
                return NO;
            }

            /*- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
            {
                if (editingStyle == UITableViewCellEditingStyleDelete) {
                    [_objects removeObjectAtIndex:indexPath.row];
                    [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
                } else if (editingStyle == UITableViewCellEditingStyleInsert) {
                    // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view.
                }
            }
            */
            /*
            // Override to support rearranging the table view.
            - (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
            {
            }
            */

            /*
            // Override to support conditional rearranging of the table view.
            - (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
            {
                // Return NO if you do not want the item to be re-orderable.
                return YES;
            }
            */

            - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
            {
                if ([[segue identifier] isEqualToString:@"ShowSightingDetails"]) {
                    BirdsDetailViewController *detailViewController = [segue destinationViewController];
                    detailViewController.sighting = [self.dataController objectInListAtIndex:[self.tableView indexPathForSelectedRow].row];

                }
            }

            @end 
```

这是 BirdsDetailViewController.m 的代码

```
 //
        //  BirdSightingDataController.m
        //  BirdWatching
        //
        //  Created by David Hall on 11/25/12.
        //  Copyright (c) 2012 David Hall. All rights reserved.
        //

        #import "BirdSightingDataController.h"
        #import "BirdSighting.h"

        @interface BirdSightingDataController ()

        - (void)initializeDefaultDataList;

        @end

        @implementation BirdSightingDataController

        - (void)initializeDefaultDataList
        {
            NSMutableArray *sightingList = [[NSMutableArray alloc] init];

            self.masterBirdSightingList = sightingList;

            BirdSighting *sighting;

            NSDate *today = [NSDate date];

            sighting = [[BirdSighting alloc] initWithName:@"Pigeon" location:@"Everywhere" date:today];

            [self addBirdSightingWithSighting:sighting];

        }

        - (void)setMasterBirdSightingList:(NSMutableArray *)newList
        {
            if (_masterBirdSightingList != newList)
            {
                _masterBirdSightingList = [newList mutableCopy];
            }

        }

        - (id)init
        {
            if (self = [super init])
            {
                [self initializeDefaultDataList];

                return self;
            }

            return nil;
        }

        - (NSUInteger)countOfList
        {
            return [self.masterBirdSightingList count];
        }

        - (BirdSighting *)objectInListAtIndex:(NSUInteger)theIndex
        {
            return [self.masterBirdSightingList objectAtIndex:theIndex];
        }

        - (void)addBirdSightingWithSighting:(BirdSighting *)sighting
        {
            [self.masterBirdSightingList addObject:sighting];
        }

        @end 
```

大卫霍尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:55:15.267

1.  它在工作时工作。但是如果不知道更多关于你在做什么，很难给你一个答案。

2.  突出显示文本框中的代码，然后单击此按钮。

    ![在此处输入图像描述](../Images/d6601f34df70e7620cf16bba8f05495c.png)

    它会为您正确缩进代码。

3.  我无法理解这个问题。

**编辑添加**

（在看到 OP 邮寄给我的项目副本后）

你的segue没有正确连接。

segue 应该从单元格转到下一个视图控制器，因为关键是在单元格单击时进行转换。您的 segue 从控制器连接到详细视图控制器。在您的项目中 - 右键单击​​您的视图控制器，您将看到 segue 已手动连接。但是右键单击单元格不会显示 segue 连接。

删除当前的 segue 并重新创建它，这次是通过从单元格控制拖动到下一个视图控制器。然后，您可以通过右键单击单元格并确保连接已连接来仔细检查连接。

它应该看起来像：

![在此处输入图像描述](../Images/ee2c7d96e74b9ff9034c5c9a64bbb83e.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:10:44.057

1.  如果 segue 应该从您的 table 转换到 detail view，并且如果您无法从 table 到达 detail view，那么您的 segue 不起作用。

2.  您可以使用 SO 编辑器顶部的代码示例按钮，也可以在文本编辑器中选择代码并在复制之前将其缩进。例如，在 Xcode 中很容易选择代码，点击 Command-]，然后复制。然后粘贴到 SO 编辑器中。

3.  请编辑您的问题，使其有意义。但是，我认为您可能会问一些关于如何从您的表中推送视图控制器的问题。如果您使用的是转场，并且您已经在情节提要中创建了转场并且它连接到源视图控制器和目标视图控制器，那么您可以发送`-performSegueWithIdentifier:sender:`到表的视图控制器。也就是说，您的表视图控制器的`-tableView:didSelectRowAtIndexPath:`方法应该调用`-performSegueWithIdentifier:sender:`并指定从表视图控制器到详细视图控制器的 segue 的标识符。无论您是使用模拟器还是在真实设备上运行您的应用程序都没有关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:27:01.810

请参阅 Caleb 和 Abizem 关于 1\. 和 2 的其他答案。如果我正确理解了您的问题 3，那么答案是否定的。当您想要选择表格行或详细信息披露指示器时，您不必在模拟器中特别按下某些东西。只需单击您也将在设备上点击的那些项目。如果它没有继续，那么很可能不是模拟器导致了问题:)

# c# - 如何使用 LINQ 避免冗余列表

> ID：13628269
> 
> 赞同：5
> 
> 时间：2012-11-29T14:46:45.383
> 
> 标签：c#, linq

我有一个具有 Recipients 属性（字符串数据类型）的 Report 对象。Recipients 属性将保存所有收件人的电子邮件地址`comma separated string`。我需要从逗号分隔的字符串中创建一个电子邮件对象的“<strong>Collection”。我有以下代码使用**字符串列表** 首先获取电子邮件地址。然后我创建了一个电子邮件对象的集合。

有没有更好的方法来避免使用多余的 List 和 Collection `LINQ`？

```
 Report report = new Report();
  report.Recipients   = "test@test.com, demo@demo.com";

  List<string> emailAddressList = new List<string>( report.Recipients.Split(',') );
  Collection<Email> emailObjectCollection = new Collection<Email>();

  foreach (string emailAddress in emailAddressList)
  {
           Email email = new Email();
           email.EmailAddress = emailAddress;
           emailObjectCollection.Add(email);
  } 
```

**参考资料**：

1.  [避免使用一本字典的更好代码 - 区分大小写问题](https://stackoverflow.com/questions/13247001/better-code-for-avoiding-one-dictionary-case-sensitivity-issue)
2.  [使用 linq 删除列表中的重复项](https://stackoverflow.com/questions/1606679/remove-duplicates-in-the-list-using-linq)
3.  [使用 LINQ 跨多个属性查找重复项](https://stackoverflow.com/questions/5596604/using-linq-to-find-duplicates-across-multiple-properties)
4.  [C#：List<T> 和 Collection<T> 之间的区别（CA1002，不要公开通用列表）](https://stackoverflow.com/questions/1232108/c-difference-between-listt-and-collectiont-ca1002-do-not-expose-generic)

> **CA1002**：不要公开通用列表。System.Collections.Generic.List 是为性能而非继承而设计的通用集合，因此不包含任何虚拟成员。[http://msdn.microsoft.com/en-us/library/ms182142(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms182142(v=vs.80).aspx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T14:49:32.590

你可以只使用一个`HashSet`.

```
var emailObjectCollection = new HashSet<Email>(
     report.Recipients.Split(',').Select(e => new Email() { EmailAddress = e })); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T14:50:14.820

```
var  emailObjectCollection =   report.Recipients.Split(',')
                                    .Select(m=>new Email(){EmailAddress = m})
                                    .ToList() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T15:17:23.333

就在我的脑海中：

```
var emailObjectCollection = new Collection<Email>(
    new List<string>(report.Recipients.Split(',')).Distinct()
        .Select<string, Email>(e => 
        {
            var email = new Email();
            email.EmailAddress = e;
        }).ToList()); 
```

那应该是`Collection<T>`用唯一值填充 a 的 LINQ-y 方式。只是好奇，为什么要使用 a `Collection`？如果您需要传递这个可枚举，使用它不是更有意义`IEnumerable`吗？

另外，您*可以*使用抑制属性抑制`CA1002`消息 - 不时有规则的有效例外（恕我直言）。

# java - Java 字符串数组

> ID：13628272
> 
> 赞同：2
> 
> 时间：2012-11-29T14:46:59.503
> 
> 标签：java, android, sorting

我有两个数组

```
String a[]={"11","02","43","24","05","86","37","28","29","10"};
String b[]={"a","c","f","q","w","x","z","x","s","r"}; 
```

我想按升序对数组 a[] 进行排序

结果可能会喜欢

```
String a[]={"02","05","10","11","24","28","29","37","43","86"};
String b[]={"c","w","r","a","q","x","s","z","f","x"}; 
```

我如何使用**java**获得上述结果？java中的任何排序方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T15:39:55.323

最简单的方法是以某种方式将 2 条数据链接在一起，而不是将它们放在单独的数组中。许多人建议了一个很好用的地图。根据您要执行的操作，我还将考虑一个具有 2 个实现 Comparable 的变量的新类。如果没有为 Collections.sort 提供不同的 Comparator 以供使用，则 Comparable 定义类在 Collection（在本例中为数组）中时的自然顺序。它看起来像这样：

```
 public class Data implements Comparable{ 
    private String stringOne;
    private String stringTwo;

    @Override
    public int compareTo(Object obj) {
        stringOne.compareTo((String)obj);
    } 
```

别的地方叫：

```
 Collections.sort(locationOfDataCollection); 
```

然后，您可以创建一个数据集合并使用 getter 方法访问另一个字符串。如果在某些情况下需要用新的比较器覆盖自然顺序（例如，按 stringTwo 排序），此实现还将使其在未来变得简单（请参阅策略设计）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T14:50:34.890

由于您有 2组*相关*的数据，我要么通过`Pair<String,String>`类型对象将它们链接到 a`List<Pair>`中，要么将它们放入 a`Map<String,String>`中。

也许第一个解决方案更直观，例如

```
public class Pair implements Comparable<Pair> {
   public String first;
   public String second;

   // equals/hashcode etc.
} 
```

一旦它们位于标准 Java 集合中，就有许多解决方案可用于对它们进行排序。例如，在上面`Pair`我已经实现了[集合排序机制](http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html)将使用的[`Comparable<T>`](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T14:50:19.977

在 Java 中没有直接执行此操作的方法。你有两个选择。

1）定义 a `Map<String, String>`，将所有对放入其中（如（“11”，“a”））。对第一个数组（或地图的键）进行排序并按该顺序检索地图的元素。

2）创建一个包含每个 par 的对象，`List`用它创建 a ，并仅按数字进行比较（实现`Comparable`或创建 a `Comparator`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T15:16:19.320

您需要注意的一个问题是字符串不会按照与整数相同的规则进行排序。如果您将排序的数组保留为字符串，您可能会对所得到的结果感到惊讶。

# html - HTML缓存清单下载所有文件

> ID：13628273
> 
> 赞同：1
> 
> 时间：2012-11-29T14:47:02.060
> 
> 标签：html, cache-manifest

似乎如果服务器上的缓存清单发生更改，它将重新下载文件中的所有内容？有没有办法让它重新下载一些文件？如果我只对脚本进行代码修复，然后更新清单（比如只是在其中添加时间戳注释）以强制本地副本看到已进行更改，我可能不希望重新下载尚未更改的图像但仍然需要在清单中。有没有办法在这个问题上获得更高的精度，或者它是全有还是全无？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T02:28:12.667

根据我的经验，更新缓存清单不会再次明确下载所有内容，而是检查它们是否已被修改。因此，如果您的缓存清单中有 10 个项目，并且您要更新单个文件（以及清单文件），那么将检查每个文件是否有修改，并且取决于它们的服务方式（CDN？）它们应该是返回 304 Not Modified，因此不会再次下载。

# php - PHP在另一个包含文件中使用包含文件中的对象

> ID：13628280
> 
> 赞同：1
> 
> 时间：2012-11-29T14:47:14.370
> 
> 标签：php, class, object, include

我将直截了当。似乎无法在互联网上的任何地方找到它。也许这甚至不可能，我不知道。我真的很喜欢使用“分而治之”的方法，我自己创建的。尽可能多地拆分文件以便于管理（小文件等）。

但这是我的问题：

我有 5 个文件：

```
index.php
inc/config.php
inc/Database.class.php
inc/sidebar.php
inc/forms.php 
```

好的，我所做的是：

在我的 config.php 文件中，我包含了 Database.class.php 文件并创建了一个对象。

```
include 'Database.class.php';

$user = "root";
$pass = "";
$host = "localhost";
$database = "blah blah";

$db = new Database($user, $pass, $host, $database);
$db->connect(); 
```

所以我在我的 index.php 文件中包含了这个 config.php 和 sidebar.php。

（缩短了代码，但功能相同）

```
include 'inc/config.php';
include 'inc/sidebar.php'; 
```

在我的侧边栏中，我有一个表单，供用户登录。

在sidebar.php中我只包含forms.php，这是forms.php：（我使用print_r调试我的文件，看看是否有任何返回，我省略了方法loginFormShow，因为它很长而且不相关）

```
function loginFormProcess($user, $pass)
{
    $db->select(blah blah some variables);
    $res = $db->getResult();
    print_r($res); 
}

if (!isset($_POST['submit'])) {
    loginFormShow();
} else {

    if ($_POST['user'] == "") 
    {
        loginFormShow(1);
    } 
    else if ($_POST['pass'] == "") 
    {
        loginFormShow(2);
    } 
    else 
    {
        $user = $_POST['user'];
        $pass = $_POST['pass'];
        loginFormProcess($user, $pass);
    }
} 
```

因此，问题是什么。当我尝试调用函数 loginFormProcess 时，它不能使用对象 $db。

我可以为此使用 1 个对象吗？因为在索引页面上，我将需要数据库中的一些其他数据。我是否需要为索引页面创建一个对象并为登录表单创建一个对象？

还有其他解决方案吗？如果我不清楚，我很乐意提供更多解释。

干杯，

克莱门茨

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T14:51:30.713

最好的解决方案是将数据库对象传递给函数的参数，如下所示：

```
function loginFormProcess($user, $pass, Database $db) { 
```

并使用适当的数据库对象调用它。这就是所谓的**[依赖注入](/questions/tagged/dependency-injection "显示标记为“依赖注入”的问题")**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:52:43.050

尝试这个：

```
function loginFormProcess($user, $pass)
{
    global $db;
    $db->select(blah blah some variables);
    $res = $db->getResult();
    print_r($res); 
} 
```

供参考： http: [//php.net/manual/en/language.variables.scope.php](http://php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T14:53:20.400

您需要声明`$db`为**global**。

尝试这个：

```
function loginFormProcess($user, $pass)
{
    global $db;
    $db->select(blah blah some variables);
    $res = $db->getResult();
    print_r($res); 
} 
```

见：[http ://www.php.net/manual/en/language.variables.scope.php](http://www.php.net/manual/en/language.variables.scope.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T14:54:42.283

变量 $db 在您的 config.php 文件中创建为全局变量。这在 loginFormProcess 函数内部是不可见的。您可以使用的一个快照解决方案是通过添加语句 global $db; 来声明您使用全局变量的意图。作为函数中的第一条语句

# java - Java登录/注册系统

> ID：13628283
> 
> 赞同：0
> 
> 时间：2012-11-29T14:47:17.783
> 
> 标签：java

我想开发一个简单的登录和注册系统。系统需要能够注册用户并允许他们登录。不仅如此，我还需要能够识别当前登录的用户是谁。

用户类

```
import java.io.Serializable;

public class AuctionHouseUsers implements Serializable {

    String userName;
    String password;

    public AuctionHouseUsers(String aUserName, String aPassword)
    {
        this.userName = aUserName;
        this.password = aPassword;
    }
    public String getUserName()
    {
        return userName;
    }
    public void setUserName(String aUserName)
    {
        this.userName = aUserName;
    }
    public String getPassword()
    {
        return password;
    }
    public void setPassword(String aPassword)
    {
        this.password = aPassword;
    }
} 
```

拍卖行类

```
 public class AuctionHouseManager

ArrayList<AuctionHouseUsers> registeredUsers;
ArrayList<AuctionHouseUsers> logedInUsers;

public AuctionHouseManager()

    logedInUsers = new ArrayList<AuctionHouseUsers>();
    registeredUsers = new ArrayList<AuctionHouseUsers>();
}
    public void registerUser(String username, string password)
    {
        AuctionHouseUsers registeredUser = new AuctionHouseUser(username,password);
        registeredUsers.add(tempUser);
    }
    public void logIn(String username, string password)
    {
      AuctionHouseUsers logedInUser = new AuctionHouseUser(username,password);
      logedInUsers.add(logedInUser);
    } 
```

我如何跟踪谁（通过那里的用户名）目前在这个时间登录，因为我将设计一个 gui。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:19:43.160

如果这不是家庭作业而是实际开发项目，我建议您使用[Apache Shiro](http://shiro.apache.org/)或[Spring Security](http://www.springsource.org/spring-security)。两者都提供对身份验证和访问控制（以及更多）的支持。

希望这可以帮助。

# android - 得到 NullPointerEx。当我再次使用相同的附加功能开始活动时

> ID：13628285
> 
> 赞同：0
> 
> 时间：2012-11-29T14:47:23.567
> 
> 标签：android, android-intent, nullpointerexception

我有一个小问题。我正在开发一个小井字游戏。

我有一个开始屏幕，您可以在其中输入玩家名称，并通过 putExtra 将该字符串提供给游戏活动。到目前为止，它的工作原理是，玩家名称显示在游戏活动中。

我现在的问题是：如果一个玩家赢得游戏，“NewGame”按钮就会变得可见。单击时，它应该使用 StartScreen 中给出的相同名称重新启动 Game-Activity。

这是它崩溃的地方。

这是我的代码和logcat：

开始屏幕：

```
package de.android.pali;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.EditText;
import android.widget.ImageButton;

public class TicTacToeMenu extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tic_tac_toe_menu);

    final ImageButton createGame = (ImageButton)findViewById(R.id.newGameButton);
    final EditText spieler1 = (EditText)findViewById(R.id.addsp1);
    final EditText spieler2 = (EditText)findViewById(R.id.addsp2);
    final Intent newGame = new Intent(TicTacToeMenu.this, NewGame.class);

    createGame.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            newGame.putExtra("Name1", spieler1.getText().toString());
            newGame.putExtra("Name2", spieler2.getText().toString());

            startActivity(newGame);

        }
    });

}

} 
```

游戏活动：

```
package de.android.pali;

import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;

public class NewGame extends TicTacToeMenu{

int turn = 1;
int[] felder = new int[9];

boolean gotWinner = false;

ImageButton feld1;
ImageButton feld2;
ImageButton feld3;
ImageButton feld4;
ImageButton feld5;
ImageButton feld6;
ImageButton feld7;
ImageButton feld8;
ImageButton feld9;
Button anotherGame;
TextView spieler1;
TextView spieler2;
TextView ergebnis;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.game);

    setupUI();

    setOnClickListeners(feld1, feld2, feld3, feld4, feld5, feld6, feld7,
            feld8, feld9);

}

public void setupUI() {

    feld1 = (ImageButton)findViewById(R.id.feld1);
    feld2 = (ImageButton)findViewById(R.id.feld2);
    feld3 = (ImageButton)findViewById(R.id.feld3);
    feld4 = (ImageButton)findViewById(R.id.feld4);
    feld5 = (ImageButton)findViewById(R.id.feld5);
    feld6 = (ImageButton)findViewById(R.id.feld6);
    feld7 = (ImageButton)findViewById(R.id.feld7);
    feld8 = (ImageButton)findViewById(R.id.feld8);
    feld9 = (ImageButton)findViewById(R.id.feld9);

    final TextView spieler1 = (TextView)findViewById(R.id.sp1name);
    final TextView spieler2 = (TextView)findViewById(R.id.sp2name);

    spieler1.setText(getIntent().getStringExtra("Name1").toString());
    spieler2.setText(getIntent().getStringExtra("Name2").toString());

    for(int x=0; x<9; x++){felder[x]=2;};
}

public void setOnClickListeners(final ImageButton feld1,
        final ImageButton feld2, final ImageButton feld3,
        final ImageButton feld4, final ImageButton feld5,
        final ImageButton feld6, final ImageButton feld7,
        final ImageButton feld8, final ImageButton feld9) {
    feld1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            feld1.setEnabled(false);
            feld1.setAlpha(1);
            if(turn==1){
            feld1.setBackgroundResource(R.drawable.o);
            turn = 0;
            felder[0] = 1;
            checkWinner();
            }
            else{
                feld1.setBackgroundResource(R.drawable.x);
                turn = 1;
                felder[0] = 0;
                checkWinner();
            }
        }

    });

    feld2.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            feld2.setEnabled(false);
            if(turn==1){
                feld2.setBackgroundResource(R.drawable.o);
                turn = 0;
                felder[1] = 1;
                checkWinner();
                }
                else{
                    feld2.setBackgroundResource(R.drawable.x);
                    felder[1] = 0;
                    turn = 1;
                    checkWinner();

                }
        }
    });

    feld3.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            feld3.setEnabled(false);
            if(turn==1){
                feld3.setBackgroundResource(R.drawable.o);
                turn = 0;
                felder[2] = 1;
                checkWinner();
                }
                else{
                    feld3.setBackgroundResource(R.drawable.x);
                    turn = 1;
                    felder[2] = 0;
                    checkWinner();
                };

        }
    });

    feld4.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            feld4.setEnabled(false);
            if(turn==1){
                feld4.setBackgroundResource(R.drawable.o);
                turn = 0;
                felder[3] = 1;
                checkWinner();
                }
                else{
                    feld4.setBackgroundResource(R.drawable.x);
                    felder[3] = 0;
                    turn = 1;
                    checkWinner();
                }

        }
    });

    feld5.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            feld5.setEnabled(false);

            if(turn==1){
                feld5.setBackgroundResource(R.drawable.o);
                turn = 0;
                felder[4] = 1;
                checkWinner();

                }
                else{
                    feld5.setBackgroundResource(R.drawable.x);
                    turn = 1;
                    felder[4] = 0;
                    checkWinner();
                }

        }
    });

    feld6.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            feld6.setEnabled(false);
            if(turn==1){
                feld6.setBackgroundResource(R.drawable.o);
                turn = 0;
                felder[5] = 1;
                checkWinner();
                }
                else{
                    feld6.setBackgroundResource(R.drawable.x);
                    turn = 1;
                    felder[5] = 0;
                    checkWinner();
                }

        }
    });

    feld7.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            feld7.setEnabled(false);
            if(turn==1){
                feld7.setBackgroundResource(R.drawable.o);
                turn = 0;
                felder[6] = 1;
                checkWinner();
                }
                else{
                    feld7.setBackgroundResource(R.drawable.x);
                    turn = 1;
                    felder[6] = 0;
                    checkWinner();
                }

        }
    });

    feld8.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            feld8.setEnabled(false);
            if(turn==1){
                feld8.setBackgroundResource(R.drawable.o);
                turn = 0;
                felder[7] = 1;
                checkWinner();
                }
                else{
                    feld8.setBackgroundResource(R.drawable.x);
                    turn = 1;
                    felder[7] = 0;
                    checkWinner();
                }

        }
    });

    feld9.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            feld9.setEnabled(false);
            if(turn==1){
                feld9.setBackgroundResource(R.drawable.o);
                turn = 0;
                felder[8] = 1;
                checkWinner();
                }
                else{
                    feld9.setBackgroundResource(R.drawable.x);
                    turn = 1;
                    felder[8] = 0;
                    checkWinner();
                }

        }
    });
}

public int getTurn() {
    int whois = turn;
    return whois;
}

public void checkWinner(){

    ergebnis = (TextView)findViewById(R.id.winners);

    if( (felder[0]==1 & felder[1]==1 & felder[2]==1) || 
        (felder[3]==1 & felder[4]==1 & felder[5]==1) || 
        (felder[6]==1 & felder[7]==1 & felder[8]==1) || 
        (felder[0]==1 & felder[4]==1 & felder[8]==1) || 
        (felder[6]==1 & felder[4]==1 & felder[2]==1) || 
        (felder[0]==1 & felder[3]==1 & felder[6]==1) || 
        (felder[1]==1 & felder[4]==1 & felder[7]==1) || 
        (felder[2]==1 & felder[5]==1 & felder[8]==1)    ){

        ergebnis.setText((getIntent().getStringExtra("Name1").toString()) + " " + getString((R.string.gewinnt)));
        gotWinner = true;

        }else
            { }
    if( (felder[0]==1 & felder[1]==1 & felder[2]==1) || 
            (felder[3]==0 & felder[4]==0 & felder[5]==0) || 
            (felder[6]==0 & felder[7]==0 & felder[8]==0) || 
            (felder[0]==0 & felder[4]==0 & felder[8]==0) || 
            (felder[6]==0 & felder[4]==0 & felder[2]==0) || 
            (felder[0]==0 & felder[3]==0 & felder[6]==0) || 
            (felder[1]==0 & felder[4]==0 & felder[7]==0) || 
            (felder[2]==0 & felder[5]==0 & felder[8]==0)    ){

            ergebnis.setText((getIntent().getStringExtra("Name2").toString()) + " " + (getString(R.string.gewinnt)));
            gotWinner = true;

            }else
                { }

    checkIfGotWinner();

}

public void checkIfGotWinner() {

    anotherGame = (Button)findViewById(R.id.anotherGame);

    if(gotWinner == true){

        anotherGame.setVisibility(1);

        final Intent anotGame = new Intent(NewGame.this,NewGame.class);

            anotGame.putExtra("Name1", spieler1.getText().toString());
        anotGame.putExtra("Name2", spieler2.getText().toString());

        feld1.setEnabled(false);
        feld2.setEnabled(false);
        feld3.setEnabled(false);
        feld4.setEnabled(false);
        feld5.setEnabled(false);
        feld6.setEnabled(false);
        feld7.setEnabled(false);
        feld8.setEnabled(false);
        feld9.setEnabled(false);

        final TextView spieler1 = (TextView)findViewById(R.id.sp1name);
        final TextView spieler2 = (TextView)findViewById(R.id.sp2name);
        final ImageView sp1Icon = (ImageView)findViewById(R.id.sp1icon);
        final ImageView sp2Icon = (ImageView)findViewById(R.id.sp2icon);
        final View trenn = (View)findViewById(R.id.trennlinie);
        ergebnis = (TextView)findViewById(R.id.winners);

        spieler1.setAlpha(0);
        spieler2.setAlpha(0);
        sp1Icon.setAlpha(0);
        sp2Icon.setAlpha(0);
        trenn.setAlpha(0);
        ergebnis.setVisibility(1);

        anotherGame.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                startActivity(anotGame);

            }
        });

    };

    if(feld1.isEnabled()==false & feld2.isEnabled()==false & feld3.isEnabled()==false & feld4.isEnabled()==false & feld5.isEnabled()==false & feld6.isEnabled()==false &
            feld7.isEnabled()==false & feld8.isEnabled()==false & feld9.isEnabled()==false & gotWinner == false){ergebnis.setText(R.string.draw);

            anotherGame.setVisibility(1);

            final Intent anotGame = new Intent(NewGame.this,NewGame.class);

            anotherGame.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    startActivity(anotGame);

                }
            });
    }

    else{}
}
} 
```

日志猫：

```
11-29 15:59:30.681: E/AndroidRuntime(2683): FATAL EXCEPTION: main
11-29 15:59:30.681: E/AndroidRuntime(2683): java.lang.RuntimeException: Unable to start activity ComponentInfo{de.android.pali/de.android.pali.NewGame}: java.lang.NullPointerException
11-29 15:59:30.681: E/AndroidRuntime(2683):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
11-29 15:59:30.681: E/AndroidRuntime(2683):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
11-29 15:59:30.681: E/AndroidRuntime(2683):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
11-29 15:59:30.681: E/AndroidRuntime(2683):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
11-29 15:59:30.681: E/AndroidRuntime(2683):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-29 15:59:30.681: E/AndroidRuntime(2683):     at android.os.Looper.loop(Looper.java:137)
11-29 15:59:30.681: E/AndroidRuntime(2683):     at android.app.ActivityThread.main(ActivityThread.java:4424)
11-29 15:59:30.681: E/AndroidRuntime(2683):     at java.lang.reflect.Method.invokeNative(Native Method)
11-29 15:59:30.681: E/AndroidRuntime(2683):     at java.lang.reflect.Method.invoke(Method.java:511)
11-29 15:59:30.681: E/AndroidRuntime(2683):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
11-29 15:59:30.681: E/AndroidRuntime(2683):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
11-29 15:59:30.681: E/AndroidRuntime(2683):     at dalvik.system.NativeStart.main(Native Method)
11-29 15:59:30.681: E/AndroidRuntime(2683): Caused by: java.lang.NullPointerException
11-29 15:59:30.681: E/AndroidRuntime(2683):     at de.android.pali.NewGame.setupUI(NewGame.java:65)
11-29 15:59:30.681: E/AndroidRuntime(2683):     at de.android.pali.NewGame.onCreate(NewGame.java:40)
11-29 15:59:30.681: E/AndroidRuntime(2683):     at android.app.Activity.performCreate(Activity.java:4465)
11-29 15:59:30.681: E/AndroidRuntime(2683):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
11-29 15:59:30.681: E/AndroidRuntime(2683):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
11-29 15:59:30.681: E/AndroidRuntime(2683):     ... 11 more 
```

希望任何人都可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:54:30.097

首先，在它自己的内部开始相同的活动不是好的做法。就像蛇吞下自己的尾巴一样。所以你需要编写一些可以直接重置游戏的逻辑。看起来用户第一次开始

提示：通过将其设置为空来删除所有变量的值，仅保留用户名（制作一个将为您执行此操作的函数）

# jquery - 有效但垃圾邮件数据插入到 mySQL

> ID：13628287
> 
> 赞同：1
> 
> 时间：2012-11-29T14:47:25.167
> 
> 标签：jquery, mysql, sql, ajax, cordova

背景：我正在使用 PhoneGap 和 Jquery Mobile 创建一个 ios+android 应用程序。我的目标是让用户喜欢某些功能。我想限制每个应用程序持有者的每个功能。目前，我正在通过为每个应用程序（安装时）创建一个内部唯一 ID 来做到这一点。然后通过 AJAX/JSON 将这个唯一 ID 发送到 REST API 并插入到外部服务器上的 mySQL 数据库中。然后每个 id 允许我跟踪每个应用程序的喜欢并聚合功能的喜欢。

问题：是什么阻止了某人下载我的应用程序、阅读源代码 javascript/html、编辑源代码以创建新的唯一 ID 并通过插入有效但垃圾记录来淹没我的数据库？即这种攻击将使用有效的 INSERT 语句，因此安全措施，如数据库内的存储过程请求、哈希和盐保护密码、HTTPS/SSL 连接、阻止 SQL 注入不会阻止它......

我是 Web 应用程序编程的新手，所以我可能错过了一些基本的东西，但我希望你能帮助我理解

# jpa - JPQL 和 EclipseLink 连接

> ID：13628288
> 
> 赞同：4
> 
> 时间：2012-11-29T14:47:25.553
> 
> 标签：jpa, null, eclipselink, jpql, concat

当我在`em.CreateQuery concat`返回 NULL 中连接字段时，导致我的字段之一可以有 NULL。我想在 Native MSSQL ISNULL(field,'somthing') 函数中检查 NULL。

MyQuery 是。

```
entManager.createQuery("SELECT NEW " + ThumbNail.class.getName() + "(p.id,p.thumbnail,p.thumbNailModifiedDate, CONCAT(p.firstName,' ',p.lastName,' ',p.middleName)) FROM Person p").setHint("eclipselink.refresh", "true").getResultList(); 
```

这个也试过

```
entManager.createQuery("SELECT NEW " + ThumbNail.class.getName() + "(p.id,p.thumbnail,p.thumbNailModifiedDate, CONCAT(FUNC('ISNULL',p.firstName,''),' ',FUNC('ISNULL',p.lastName,''),' ',FUNC('ISNULL',p.middleName,'')) FROM Person p").setHint("eclipselink.refresh", "true").getResultList(); 
```

它没有用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:45:04.977

JPQL 支持 coalesce 函数，该函数返回其第一个非空参数。所以你可以使用

```
CONCAT(coalesce(p.firstName, ''), 
       ' ', 
       coalesce(p.lastName, ''),
       ' ',
       coalesce(p.middleName, '')) 
```

不过，我会把中间名放在中间，而不是放在最后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:25:03.690

**解决了！** 但不适用于 JPQL 函数。

我刚刚向我的 pojo 对象添加了新的构造函数，并用 JPQL 填充它，然后用 checkig 连接到那里。谢谢大家的回答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-30T10:21:09.350

修改jpa查询是一团糟......

只需添加一个 notNull 方法：

```
private String notNull(String input){ if (input != null) { return input.trim(); } return ""; } 
```

并将其放在您的实体类上的每个（字符串）设置器上

```
setFirstName(String name) { this.name = notNull(name) } 
```

所以你所有的“空值”都得到“”并且jpa工作

**但是：那么对于 db-nulls 你会得到 String=""，所以要注意..**

# jquery - How to reference element in jQuery

> ID：13628295
> 
> 赞同：2
> 
> 时间：2012-11-29T14:47:38.510
> 
> 标签：jquery, if-statement, this

I am currently teaching myself jQuery (started yesterday) and I'm stuck already.. I have this to create small dropdowns that will work relative to each other.

```
$(document).ready(function(){
  var selTxt = 0;
  $(".button").click(function(){
        alert($(this).prev(".button").attr("id"));
        $(".text").slideUp(150);
        $(this).next(".text").slideToggle(150,function(){
            selTxt = $(this).prev(".button").attr("id");
        });

  });
}); 
```

Those of you that know jQuery will realise it simply expands a textbox when clicking a button and hides all others that are expanded.

**Question:**

Take a look and see where the `alert()` function is called. On that line I wish to run an if statement.. Something like this:

```
$(".button").click(function(){
    if($(this).attr("id") == selTxt){
        $(".text").slideUp(150);
        $(this).next(".text").slideToggle(150,function(){
            selTxt = $(this).prev(".button").attr("id");
        });
    }
}); 
```

Hence I only want it to run if `selTxt` doesn't equal the `id` of the element that has been clicked. So the $(this) in the if statement (I HOPED) would refer to the `.button` being clicked, but guess what: it doesn't! Could anybody inform me why not? I thought because I referenced the `.button` with $(this) lower down that I would be able to use it there as well but evidently not.

Good old JSFiddle [here](http://jsfiddle.net/A4eHC/).

Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:53:46.713

It does work, in your JSfiddle you've only added an ID to the first DIV element and not to all the others, therefor a UNDIFINED will show up if you try to get the ID attr from the element, so add the ids and you'll be fine.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:00:49.843

As @Hawiak pointed, the problem is that your're testing `.attr("id")` of all `div.button` but your HTML has an `id` attribute assigned only for the first `div`. But at all, I don't believe checking by the `id` is the best way to do it. Here's my suggestion:

```
$(function() {
  $(".button").click(function() {
      var text = $(this).next(".text");

      if (!text.hasClass("open")) {
        $(".text").slideUp(150).removeClass("open");
        text.stop(true, true).slideToggle(150).addClass("open");
      }
  });

  $(".hideAll").click(function() {
    $(".text").slideUp(150).removeClass("open");
  });
});​ 
```

And the updated Fiddle [here](http://jsfiddle.net/A4eHC/4/).

# java - PreparedStatement 的 setXXX 方法不起作用

> ID：13628297
> 
> 赞同：0
> 
> 时间：2012-11-29T14:47:48.990
> 
> 标签：java, debugging, jdbc

我得到了这样的东西。

```
PreparedStatement statement = manager.getConnection().prepareStatement("delete from student_marks where reg_number = ? and semester = ?");      
statement.setInt(1,1);
statement.setString(2,"S1");    
System.out.println(statement.executeUpdate()); 
```

但是当我这样做时，executeUpdate 返回 0。如果我直接替换'？使用这些值，则 executeUpdate 工作正常。就我而言，它返回 4 表示删除了 4 行。我无法理解问题出在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:47:21.230

这取决于您的列类型...如果 reg_number 的列类型是数字（任何数字数据类型），那么只有您必须将其设置为整数，否则您必须使用字符串进行设置。

```
PreparedStatement statement = manager.getConnection().prepareStatement("delete from student_marks where reg_number = ? and semester = ?");      
statement.setString(1,"1");
statement.setString(2,"S1");    
System.out.println(statement.executeUpdate()); 
```

正如jlordo指出的那样，您是否在下次删除之前重新插入记录？

# c++ - 为什么ELF中有其他共享库的函数长度信息？

> ID：13628298
> 
> 赞同：18
> 
> 时间：2012-11-29T14:47:50.500
> 
> 标签：c++, linux, elf, powerpc

我们的项目（C++、Linux、gcc、PowerPC）由几个共享库组成。在发布新版本的软件包时，只有那些库应该更改其源代码实际受到影响的库。“更改”是指*绝对二进制身份*（比较文件的校验和。不同的校验和 - > 根据策略的不同版本）。（我应该提一下，整个项目总是同时构建的，无论每个库是否更改了任何代码）。

通常这可以通过隐藏包含的头文件的私有部分而不更改公共部分来实现。

但是，有一种情况是`delete`，库 libTableManager.so 的类 TableManager（在 TableManager.cpp 文件中！）的析构函数中添加了一个，而库 libB.so（使用类 TableManager）的二进制/校验和*变*了。

表管理器.h：

```
class TableManager 
{
public:
    TableManager();
    ~TableManager();
private:
    int* myPtr;
} 
```

表管理器.cpp：

```
TableManager::~TableManager()
{
    doSomeCleanup();
    delete myPtr;     // this delete has been added
} 
```

通过检查 libB.so 并`readelf --all libB.so`查看 .dynsym 部分，结果发现所有函数的*长度*，甚至是来自其他库的动态使用的函数，都存储在 libB 中！它看起来像这样（长度是第 3 列中的 668）：

`527: 00000000 668 FUNC GLOBAL DEFAULT UND _ZN12TableManagerD1Ev`

所以我的问题是：

1.  为什么函数的*长度*实际上存储在客户端库中？起始地址还不够吗？
2.  在编译/链接 libB.so （某种“剥离”）时可以以某种方式抑制这种情况吗？我们真的很想减少这种依赖程度......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-30T14:27:47.370

答对了。这实际上是他们在 2008 年发现并修复的 binutils 中的一种“错误”。*大小信息实际上没有用*！

Simon Baldwin在 binutils 邮件列表中[所写](http://sourceware.org/ml/binutils/2008-07/msg00187.html)的内容准确地描述了这个问题（我强调）：

> 目前，未定义的 ELF 符号的大小在链接时从提供符号的目标文件或 DSO 中复制出来。 **这个大小是不可靠**的，例如在两个 DSO 的情况下，一个链接到另一个。较低级别的 DSO 可以进行更改符号大小的 ABI 保留更改，而无需重新构建较高级别的 DSO。如果重新构建更高级别的 DSO，监控文件校验和的工具将记录由于未定义符号的大小更改而发生的更改，即使有关更高级别 DSO 的其他任何内容都没有更改。这可能导致 **基于校验和的系统中不必要的和不受欢迎的重建和更改级联。**

我们遇到了旧系统（binutils 2.16）的问题。我将它与桌面系统上的 2.20 版本进行了比较，然后 - 瞧 - 共享全局符号的长度为 0：

```
157: 00000000     0 FUNC    GLOBAL DEFAULT  UND _ZN12TableManagerD1Ev
158: 00000000     0 FUNC    GLOBAL DEFAULT  UND _ZNSs6assignERKSs@GLIBCXX_3.4 (2)
159: 00000000     0 FUNC    GLOBAL DEFAULT  UND sleep@GLIBC_2.0 (6)
160: 00000000     0 FUNC    GLOBAL DEFAULT  UND _ZN4Gpio11setErrorLEDENS_ 
```

所以我比较了两个 binutils 源代码，并且 - 再次瞧瞧 - 有 Alan 在邮件列表中建议的修复：

![在此处输入图像描述](../Images/ca45a7f579a7fb938c8095716403e789.png)

也许我们只是应用补丁并重新编译 binutils，因为我们需要使用较旧的平台。谢谢你的耐心。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-29T15:03:45.637

您需要通读加载程序的代码才能确定，但​​我认为在这种情况下，我们可以对长度字段的目的做出相当合理的猜测。

加载器需要获取所有将要放入进程的函数，并将它们映射到内存地址。所以，它给了第一个函数一个地址。然后，第二个出现在第一个结束之后——但要知道“第一个结束”，它需要知道第一个函数有多长。

我可以看到两种方法来获取该长度：它可以将其编码在文件中（正如您在 ELF 中看到的那样），或者它可以打开包含该函数的文件，并从那里。

后者似乎（在我看来）有两个相当明显的缺点。首先是速度——打开所有这些额外的文件，解析它们的头文件等，只是为了获取函数的长度几乎肯定比从当前文件中为每个函数读取额外的四个字节要慢。第二个是方便：只要您不调用文件中的任何函数，您根本不需要该文件存在。如果您直接从文件中读取长度（例如，像 Windows 通常对 DLL 所做的那样），您需要该文件存在于目标系统上，即使它从未实际使用过。

编辑：由于有些人显然错过了（显然也是）“打算完成”的微妙含义，让我完全清楚：我有理由确定这个字段没有（也从未被）实际使用过。

然而，任何认为这个答案是错误的人都需要回到编程 101 并了解接口和实现之间的区别。

在这种情况下，文件格式定义了一个接口——加载程序可以使用的一组功能。在 Linux 的特定情况下，似乎从未使用过此字段。

然而，这并没有改变该领域仍然存在的事实，也没有改变 OP 询问它为什么存在的事实。简单地说“它没有被使用”，虽然它本身是正确的，但会/不会回答他提出的问题。

# java - 获取web目录下的文件

> ID：13628301
> 
> 赞同：0
> 
> 时间：2012-11-29T14:48:07.527
> 
> 标签：java, url, directory

我有一个主页，其中有一个下载目录。我想从它的目录中自动读取这个主页的所有文件。

例如，我有主页：以及包含我要显示的下载文件`www.homepage.org`的子目录。`resources/downloads`

我有一个运行 Spring 和 JSP 的 Java 服务器，并尝试了以下方法，但根本不起作用：

```
 String path = request.getContextPath();
    path += DOWNLOADS;
    URL url = null;
    String server = request.getServerName();
    try {
        url = new URL("https", server, request.getLocalPort(), path);
    } catch (MalformedURLException e) {
        e.printStackTrace();
    }
    if (url != null) {
        String externalForm = url.toExternalForm();
        File directory = new File(externalForm);
        String[] files = directory.list();
        for (String file : files) {
            ;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:38:48.827

您可以使用 Servlet。如果您的资源目录位于 Web 应用程序的根目录中，则使用

```
PrintWriter writer = response.getWriter();
String path = getServletContext().getRealPath("/resources/downloads");
File directory = new File(path);
if(directory.isDirectory()){
   String[] files = directory.list();
   for (String file : files) {
        writer.write(file + "<br/>");
   }
} else writer.write(directory.getAbsolutePath() + "could not be found"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:10:38.697

HTTP 协议不提供在“目录”中列出“文件”的方法。实际上，从协议规范的角度来看，没有目录这样的东西。

*   如果您尝试访问的网络服务器支持[WebDAV](http://en.wikipedia.org/wiki/WebDAV)，您可以使用 PROPFIND 找出集合（即目录）的结构。

*   或者，如果网络服务器启用了目录列表（并且没有`index.html`或其他），那么您可以屏幕抓取列表 HTML。

*   否则，没有真正的解决方案……使用 HTTP / HTTPS。

* * *

在重新阅读问题和答案时，我发现尝试检索目录列表的 servlet 和托管目录的 servlet*实际上可能在同一台机器上运行*。在这种情况下，您可以选择通过文件系统访问信息。但这需要“客户端”servlet 知道“服务器”servlet 如何表示事物。URL 不会（也不能）为您提供该信息。

rickz 提供的答案是一种可能的方法，尽管它仅在客户端和服务器 servlet 实际上是同一个 servlet 时才有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:14:01.567

您需要使用目录的路径而不是 url 列出目录。检索文件后，您必须创建自己的 html 以将其放入您的网络（如果这是您想要的）。

[这里](http://www.abeautifulsite.net/blog/2008/03/jquery-file-tree)有一个很好的例子来创建一个目录列表和使用 JQuery 浏览

下载部分的包中包含一个 JSP 连接器，如果您不想使用 JQuery 树，可能需要稍微调整一下。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T14:58:52.053

我找到了使用 FTP 管理器的解决方案...您可以在[此处查看代码](http://www.roseindia.net/answers/viewqa/Java-Beginners/25538-JAVA-Code-for-Getting-List-of-Directories-and-its-SubDirectories-from-FTP-server.html)

我希望它能帮助您解决问题。

# javascript - jQuery Autocomplete 不能只替换输入值的一部分

> ID：13628304
> 
> 赞同：3
> 
> 时间：2012-11-29T14:48:20.127
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-autocomplete

我正在尝试像在 Github 上一样进行自动完成。我们有一个文本区域，我们在其中写入一些文本。我们还输入 -> '@' 并尝试自动完成用户名。

当我们运行自动完成脚本时，它会删除所有文本。

我的脚本：

```
function getSign(text){
  var indexOfAt = text.lastIndexOf('@');
  return indexOfAt;
};

function changeText(event, ui) {
      var selectedElement = event.target.innerText;
      var text = $(this).val();
      text.replace(/@$/ , selectedElement);
      $(this).val(text);
}

$(document).ready(function() {

  $("textarea#autocomplite").autocomplete({
    source: function(request, response) {
      $.ajax({
        url: "/feeds/autocomplite_search",
        data: { 
          term: request.term.substr(getSign(request.term)+1,request.term.length-getSign(request.term)).trim() 
        },
        success: function(data){
          for(i=0; i<data.length; i++){
            data[i] = '@'+data[i];
          }
          return response(data);
        }
      });
    },
    minLength: 2,
    delay: 400,
    disabled: true,
    search: function() {
      if ( /\s$/.test($(this).val()) ) {
        $(this).autocomplete('disable');
      };
    },
    select: changeText
  });

  $("textarea#autocomplite").keyup(function() {
    if ( /@$/.test($(this).val()) ) {
      $(this).autocomplete('enable');
    };
  });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:04:28.840

`replace`不修改原文。重新分配：

```
text = text.replace(/@$/ , selectedElement); 
```

# mysql - 将 CSS 颜色值存储在 DB 中

> ID：13628306
> 
> 赞同：13
> 
> 时间：2012-11-29T14:48:32.963
> 
> 标签：mysql, types, sqldatatypes

我需要将**CSS HEX**颜色值（`#FFFFFF`例如）存储到 mysql 数据库中。

我将使用哪种类型的数据，为什么它比使用另一种更好？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-29T14:51:19.023

如果列不为空，则使用 a 保存颜色...如果该列可以为空，则使用 varchar(6) 来`char(6)`节省大小`#`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2020-04-02T11:05:44.467

*如果你关心磁盘空间，你应该使用`BINARY(3)`*

此答案用于高级用途，与大多数开发人员无关（接受的答案很好）。我在这里发帖是因为这是 Google 上的第一个结果。

可维护性和磁盘空间之间存在权衡。css hex ie 表示的颜色`#f8f8f8`也可以表示为`BINARY(3)`

困难`BINARY(3)`在于您必须将十六进制字符串来回转换为二进制。您可以使用 HEX() 和 UNHEX() 来做到这一点，但任何维护您的数据库的人都需要了解二进制类型，如果他们想进行更改。很容易低估这会给未来的开发者带来的问题。

但是，使用`BINARY(3)`. 保存到磁盘的数据，`#f8f8f8`如果按原样保存，则按`CHAR(6)`原样`101010101011100011010001110101001001111111110`保存`BINARY(3)``111110001111100011111000`

# javascript - jQuery text() 函数不是跨浏览器吗？

> ID：13628309
> 
> 赞同：0
> 
> 时间：2012-11-29T14:48:37.633
> 
> 标签：javascript, jquery

我想获取包含 td 内元素的文本。即使不知道使用 jQuery 的 td 里面有什么，也会`mytd.text()`在 IE8 中成功返回文本。

但是我注意到这个函数`text()` **可能不是跨浏览器**，因为它在 Chrome 和 FF 中返回的值与在 IE8 中不同。在 Chrome 和 FF 中，字符串结果都比在 IE8 中长得多。它前面并附加了空值`" "`

从我有一个`mytd`具有 td 对象的变量开始，我怎么能以跨浏览器的方式检索包含的文本？

```
 // Does not work
   var text = mytd.text() 
```

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T14:53:33.890

您可以使用[jQuery.trim(str)](https://api.jquery.com/jquery.trim/)从字符串的开头/结尾删除空格。

最终，您甚至不需要 jQuery 来修剪字符串，因为所有字符串`trim`在`String.prototype`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T14:56:08.757

它**是**跨浏览器的，但不同的浏览器处理文本节点中的空白的方式不同，而 jQuery 并没有对其进行抽象。

它确实提供了`$.trim`帮助您的方法。

要在检索文本时去除空白，只需执行以下操作：

```
var text = mytd.text().trim(); 
```

...这假设`mytd`当然是指现有的 jQuery 变量。你可以这样做：

```
var text = $('.mytd').text().trim(); 
```

编辑：

抱歉，我在实现本机 String.trim() 方法的 Safari 中进行了测试；要让它在所有浏览器中工作，你应该这样做：

```
var text = $.trim( mytd.text() ); 
```

# java - java中从对象到字符的转换

> ID：13628312
> 
> 赞同：-2
> 
> 时间：2012-11-29T14:48:42.863
> 
> 标签：java, stack

在我的一个问题中，我得到了 RuntimeException，因为有必要将对象转换为 char。我尝试使用 charValueOf() 方法来获取对象的原始值，但无法做到。这是我的代码......

```
while ((stack.size() > 0) && (stack.peek() != '('))
{
    if (ComparePrecedence(stack.peek(), infix[i]))
    {
    }
}
boolean ComparePrecedence(char top, char p_2)
{
} 
```

我该如何解决这个问题？谢谢..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T14:53:53.877

尝试将通用对象转换为字符通常不是一个好主意，因为它没有任何意义。如果对象是 Character，您可以使用以下内容。

```
char ch = o.toString().charAt(0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:57:07.233

我认为你有一个例外，因为你没有使用字符包装类的实例。如果您使用`an instance of the character wrapper class`，那么您可以调用/使用 charValue 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-01T21:02:45.497

您遇到的问题是由您使用的堆栈引起的。堆栈是基于对象的，因此它允许您推送字符类型，但是当您弹出或查看它们时，它们将作为对象类型出现。如果您总是要推送 char 类型值，您可以更改堆栈代码以接受通用类型，例如`<Character>`.

另一种选择是通过执行以下操作将对象投射回`(Character)`当您窥视或弹出时：

```
while ((stack.size() > 0) && ((Character) stack.peek() != '('))
{
    if (ComparePrecedence((Character) stack.peek(), infix[i]))
    {
    }
} 
```

# c# - 无法使用 MSBUILD 构建我们的解决方案，它找不到我们的 .targets 文件

> ID：13628319
> 
> 赞同：3
> 
> 时间：2012-11-29T14:49:08.440
> 
> 标签：c#, visual-studio-2008, msbuild

我已经编写了一些 Windows 批处理文件来调用我们产品所包含的所有 VS 解决方案的 msbuild。

除了一个 SLN 之外，它们都可以工作，其中 CSPROJ 文件会导致问题。

这些项目都建立在VS2008中。

**项目文件夹布局**

```
\RootFolder
   \LinqToXsd
     -LinqToXsd.targets
     -Xml.Schema.Linq.dll
   \BL
     -BL.csproj
   \Config
     -Config.csproj 
```

我们已经定制了 CSPROJ 文件以引入 LinqToXsd：

将此行添加到第一行`PropertyGroup`：

```
<LinqToXsdBinDir Condition="'$(LinqToXsdBinDir)' == ''">$(SolutionDir)\..\LinqToXsd</LinqToXsdBinDir> 
```

而在`Import`for之后的这条线`Microsoft.CSharp.targets`

```
<Import Project="$(LinqToXsdBinDir)\LinqToXsd.targets" /> 
```

命令行：

```
C:\Windows\Microsoft.NET\Framework64\v3.5\msbuild.exe /m /target:Build /nologo /property:BuildInParallel=true;OutDir=E:\Projects\BuildMaster\trunk\built\ConfigTool\;Configuration=Release /verbosity:minimal "*snip*\ConfigTool\ConfigTool.sln" 
```

问题是，我们在输出中得到了这个：

```
*snip*\ConfigTool\ConfigTool.csproj(131,11): error MSB4019: The imported project "E:\LinqToXsd\LinqToXsd.targets" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.
ConfigTool.csproj : Solution file warning MSB4122: Scanning project dependencies for project "ConfigTool.csproj" failed. The imported project "E:\LinqToXsd\LinqToXsd.targets" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.  *snip*\ConfigTool\ConfigTool.csproj
*snip*\BL\BL.csproj(352,11): error MSB4019: The imported project "E:\LinqToXsd\LinqToXsd.targets" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.
..\BL\BL.csproj : Solution file warning MSB4122: Scanning project dependencies for project "..\BL\BL.csproj" failed. The imported project "E:\LinqToXsd\LinqToXsd.targets" was not found. Confirm that the path in the <Import> declaration is correct, and that the file exists on disk.  *snip*\BL\BL.csproj
C:\Windows\Microsoft.NET\Framework64\v3.5\Microsoft.Common.targets : warning MSB3245: Could not resolve this reference. Could not locate the assembly "Microsoft.Xml.Schema.Linq". Check to make sure the assembly exists on disk. If this reference is required by your code, you may get compilation errors. 
```

然而，我还有其他项目使用这些线路并完美运行。包括引用相同 CSPROJ 文件的文件（共享 BL）。

我已经尝试删除所有 bin、obj、缓存、suo 和用户文件/文件夹，没有区别。

任何可以提供帮助的 msbuild 专家吗？

谢谢，

J1M。

**更新1**

如果我替换这一行：

```
<LinqToXsdBinDir Condition="'$(LinqToXsdBinDir)' == ''">$(SolutionDir)..\LinqToXsd</LinqToXsdBinDir> 
```

有了这条线：

```
<LinqToXsdBinDir>$(MSBuildProjectDirectory)\..\LinqToXsd</LinqToXsdBinDir> 
```

在 ConfigTool 和 BL 项目文件中，我不再收到关于 LinqToXsd 在编译 BL 时找不到的错误，尽管它找不到已编译的 BL dll。

**解决方案**

首先，SolutionDir 仅由 VS2008 定义，而不是 MSBUILD 似乎。您可以在命令行上传递它，但我选择执行以下操作：

```
<LinqToXsdBinDir>$(MSBuildProjectDirectory)\..\LinqToXsd</LinqToXsdBinDir> 
```

`MSBuildProjectDirectory`在 VS 和 MSBUILD 中都定义了。

二、不同的问题导致相同的症状（不知道为什么）

其中一个项目 (BL) 引用了下属 (SL) 并且 SL 的 GUID 已更改。这在 VS 中并不重要，但 MSBUILD*真的*不喜欢它。

删除和重新创建 refs 修复了第二个解决方案。

我只是在随机的 csproj 黑客攻击中才发现它，当时 MSBUILD 突然开始报告关于`project {guid} referencing project {guid} which is not available in the SLN file`

谢谢，

`J1M`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T14:59:13.453

MSBuild 没有定义该`SolutionDir`属性，因此您需要手动指定它：

```
msbuild.exe /p:SolutionDir=... other options 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T15:22:08.433

Nuget 以类似的方式工作。它将其目标放在解决方案根目录之外的子文件夹中。对于使用 nuget 的每个项目，它都会编辑 .*proj 文件并添加以下`SolutionDir`属性。如果`SolutionDir`以这种方式提供默认值，则在调用 msbuild 时不必将其作为命令行参数传递：

```
 <PropertyGroup>
    <!-- ... other properties -->
    <SolutionDir Condition="$(SolutionDir) == '' Or $(SolutionDir) == '*Undefined*'">..\</SolutionDir>
  </PropertyGroup> 
```

然后像这样更新你的目标：

```
 <Import Project="$(SolutionDir)\LinqToXsd\LinqToXsd.targets" /> 
```

# javascript - 对具有多个条目的对象数组进行排序

> ID：13628320
> 
> 赞同：0
> 
> 时间：2012-11-29T14:49:12.957
> 
> 标签：javascript

我想在 javascript 中重新排列一组对象，如下所示：

```
[{ year: "1950-12-20", product: ["product 1", "product 2, "product 3"] }, { year: "1951-12-20", product: ["product 3", "product 2"] }, { year: "1952-12-20", product: ["product 3", "product 4"] }] 
```

这样我就得到了两个数组，一个是产品，一个是它们出现的年份。

```
a = ["product 1", "product 2", "product 3", "product 4"]
b = ["1950-12-20", [ "1950-12-20, "1951-12-20"],["1950-12-20", "1951-12-20", "1952-12-20"],"1952-12-20"] 
```

我试图通过嵌套的 for 循环遍历每个对象，但是如何以一种好的方式处理对象数组中的字符串数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:10:55.027

我不知道你测试了什么样的循环，但是这种类型的代码对于必须做的事情来说并不长：

```
var data = [{ year: "1950-12-20", product: ["product 1", "product 2", "product 3"] }, { year: "1951-12-20", product: ["product 3", "product 2"] }, { year: "1952-12-20", product: ["product 3", "product 4"] }];

var nbData = data.length, iData;
var years = [], products = [], dictProductsYear = {};
var nbProducts, iProduct, p;

// Loop through years
for(iData = 0; iData < nbData; iData ++) {
    products = data[iData].product;
    nbProducts = products.length;

    // Add the current year to the concerned products
    for(iProduct = 0; iProduct < nbProducts; iProduct ++) {
        p = products[iProduct];

        // Registered product
        if(dictProductsYear[p]) dictProductsYear[p].push(data[iData].year);
        // Unregistered one
        else dictProductsYear[p] = [ data[iData].year ];
    }
}

var yearList = [], productList = [];

// Flatten the dictionary in 2 lists
for(p in dictProductsYear) {
    productList.push(p);
    yearList.push(dictProductsYear[p]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:24:05.797

这看起来有点像@Samuel Caillerie 的代码，但更简洁：

```
var data = [{ year: "1950-12-20", product: ["product 1", "product 2", "product 3"] }, { year: "1951-12-20", product: ["product 3", "product 2"] }, { year: "1952-12-20", product: ["product 3", "product 4"] }];

var yearsByProd = {};
for (var i=0; i<data.length; i++) {
    var prod = data[i].product;
    for (var j=0; j<prod.length; j++) {
         if (prod[j] in yearsByProd)
             yearsByProd[prod[j]].push(data[i].year);
         else
             yearsByProd[prod[j]] = [data[i].year];
    }
}
var a, b;
b = (a = Object.keys(yearsByProd).sort()).map(function(prod) {
    // add an if-else-statement here if you want to extract single years from their array
    return yearsByProd[prod];
}); 
```

# jquery - 使用 jQuery 提交 Rails 表单

> ID：13628325
> 
> 赞同：3
> 
> 时间：2012-11-29T14:49:28.150
> 
> 标签：jquery, ruby-on-rails, ajax

我正在尝试使用 jQuery 和 Ajax 提交 Rails 表单，但是它不起作用，我不知道为什么。我意识到`remote: true`使用 AJAX 可以做一些事情，但在我的情况下这还不够，因为我想在单击提交按钮时执行其他 jQuery 操作并就操作的状态（即成功和失败）提供良好的反馈。这是我目前具有以下形式的代码：

```
<%= form_for @mail, id: "mail-form", url: subscription_mail_create_recipients_path(@mail) do |f| %>

    <strong>Choose the users you want to target..</strong><br/>

    <%= f.check_box :target_users %> Users                          

    <div class="actions">
    <a id="save-config" class="btn btn-primary purple-button">Save configuration</a>
    </div>
<% end %> 
```

jQuery：

```
 $('#save-config').click(function(){
        $('#mail-form').submit(function() {
            var valuesToSubmit = $(this).serialize();
            console.log(valueToSubmit);
                            $.ajax({
                                url: $(this).attr('action'), //sumbits it to the given url of the form
                                data: valuesToSubmit,
                                dataType: "JSON" // you want a difference between normal and ajax-calls, and json is standard
                            }).success(function(json){
                                //act on result.
                            });
            alert("method failed");
                            return false; // prevents normal behaviour
        });
    }); 
```

我正在尝试在此处[以 ajax 方式在 rails 3 中提交表单（使用 jQuery）处理示例](https://stackoverflow.com/questions/6723334/submit-form-in-rails-3-in-a-ajax-way-with-jquery)

我没有提交按钮，这是它不起作用的原因吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:46:39.500

您的代码确实定义了提交表单时要执行的函数。每次单击按钮都会执行此操作。但是您想要的是为每次点击提交表单的内容。所以尝试以下方法：

```
$('#save-config').click(function(){
  var valuesToSubmit = $('#mail-form').serialize();
  console.log(valueToSubmit);
  $.ajax({
    url: $('#mail-form').attr('action'), //sumbits it to the given url of the form
    data: valuesToSubmit,
    dataType: "JSON" // you want a difference between normal and ajax-calls, and json is standard
  }).success(function(json){
    //act on result.
  });
  return false; // prevents normal behaviour
}); 
```

# javascript - 有什么方法可以在移动 chrome 上创建 devtools 面板

> ID：13628326
> 
> 赞同：1
> 
> 时间：2012-11-29T14:49:30.333
> 
> 标签：javascript, google-chrome, mobile, google-chrome-extension, pagespeed

我想写一个可以在移动 chrome 上使用的扩展，但谷歌似乎没有提供这样做的方法。所以我正在考虑使用 api chrome.devtools.panels.create 将我的扩展添加到开发人员工具面板。对于网页，我的新面板可以显示在开发工具面板栏上，但对于使用 adb 进行远程调试的移动 chrome，我的新面板不会出现在开发工具面板上。一开始以为是死路一条，后来发现用adb远程调试时可以看到扩展名“page speed”。我复制 manifest.json 内容，并用我自己的内容替换它，但它仍然无法工作。有谁知道如何编写扩展/开发工具面板来调试 chorme 移动设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T19:46:53.177

这并不能直接回答您的问题，但如果您最终正在寻找一种在移动设备上获取 devtools 的方法，那么现在可以在最新的 Chrome 稳定（和更新）频道上进行。

[http://www.html5rocks.com/en/tutorials/developertools/mobile/](http://www.html5rocks.com/en/tutorials/developertools/mobile/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-30T23:07:44.033

不，您目前无法为移动 chrome 构建扩展。请参阅[常见问题解答](https://developers.google.com/chrome/mobile/docs/faq)。

# yql - YQL 两个请求分页/限制

> ID：13628327
> 
> 赞同：0
> 
> 时间：2012-11-29T14:49:31.427
> 
> 标签：yql

我正在使用搜索不支持分页/限制的 XML API。推荐的方法是只请求所有 ID，然后在第二个请求中获取数据并自行处理分页。

第一个请求：

```
http://example.com?search=foobar&columns=ID

<results>
  <item><id>1</id></item>
  <item><id>2</id></item>
  <item><id>3</id></item>
  <item><id>4</id></item>
  <item><id>5</id></item>
  <item><id>6</id></item>
  <item><id>7</id></item>
  <item><id>8</id></item>
  <item><id>9</id></item>
  <item><id>10</id></item>
</results> 
```

第二个请求：

```
http://example.com?search=1,2,3,4,5&columns=ID,title,description

<results>
  <item><id>1</id><title>foobar</title><description /></item>
  <item><id>2</id><title>foobar</title><description /></item>
  <item><id>3</id><title>foobar</title><description /></item>
  <item><id>4</id><title>foobar</title><description /></item>
  <item><id>5</id><title>foobar</title><description /></item>
</results> 
```

YQL 是否可以将其组合成一个带有搜索结果计数和分页支持的请求？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:27:33.997

从文档中我没有直接的方法，但你可以这样做：

1) 创建查询 http://example.com?search=foobar&columns=ID 的 YQL 表 A 2) 创建查询[http://example.com?search=1,2,3,4,5&columns](http://example.com?search=1,2,3,4,5&columns=ID,title,description) 的 YQL 表[B](http://example.com?search=foobar&columns=ID) [=ID,title,description](http://example.com?search=1,2,3,4,5&columns=ID,title,description) 3) 现在，创建一个 YQL 表 C，它对 A 和 B 的连接执行 y.query，如下所示：

> select * from B where search in (select ids from A where search="foobar")

当然，查询语法会根据表名和其中定义的键而改变。有关 YQL 连接的更多信息，请参阅[此处](http://developer.yahoo.com/yql/guide/joins.html)

希望这很清楚，如果您在这种情况下找到更好的东西，请告诉我:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:53:41.820

创建一个带有分页的 YQL 表：

```
<paging model="offset" matrix="true">  
    <start id="internalIndex" default="0" />  
    <pagesize id="internalPerPage" max="250" />
</paging> 
```

使用 Javascript 来处理两个提取和分页：

```
var internalIndex = parseInt( request.matrixParams['internalIndex'] );
var internalPerPage = parseInt( request.matrixParams['internalPerPage'] );

var interimURL = 'http://example.com?columns=ID';
interimURL += '&search=' + request.queryParams['search'];
var interimQueryParameter = {url:interimURL};
var interimQuery = y.query("SELECT * FROM xml WHERE url=@url", interimQueryParameter);

var rows = interimQuery.results.*;

// get subset
var xml    = rows;//this.copy(); // clone XML
var from = internalIndex;
var to = ((from + internalPerPage) < xml.length()) ? (from + internalPerPage) : xml.length();
var sliced = [];
for (; from < to; from++) {
    sliced.push(xml[from].@["ID"]);
}

var finalURL = 'http://example.com?';
finalURL += '&search=' + sliced.join(",");
finalURL += "&columns=ID,title,description"
var finalQueryParameter = {url:finalURL};
var finalQuery = y.query("SELECT * FROM xml WHERE url=@url", finalQueryParameter);

var finalResults = finalQuery.results.response;
finalResults.node += <internalCurserPositon>{internalIndex}</internalCurserPositon>
finalResults.node += <internalCount>{rows.length()}</internalCount>

response.object = finalResults; 
```

# c++ - 使用opencv从图像中检测三角形和矩形

> ID：13628329
> 
> 赞同：2
> 
> 时间：2012-11-29T14:49:37.043
> 
> 标签：c++, opencv, geometry

我有这张[图片](http://i.stack.imgur.com/rAIoK.jpg)：

我想从图像中取出三角形和矩形。在下面的代码中，我有 2 种算法，一种用于三角形，另一种用于矩形。但它们非常相似。但是这样我只能取出更亮的三角形。谁能帮助我。

```
IplImage* DetectAndDrawTriang(IplImage* img){
    CvSeq* contours;
    CvSeq* result;
    CvMemStorage *storage = cvCreateMemStorage(0);
    int d=30;

    IplImage* ret = cvCreateImage(cvGetSize(img), 8, 3);
    IplImage* temp = cvCreateImage(cvGetSize(img), IPL_DEPTH_8U, 1);
    cvSet(ret,cvScalar(0,0,0));
    cvCvtColor(img, temp, CV_BGR2GRAY);
    cvThreshold( temp, temp, 180, 255, CV_THRESH_BINARY );
    //cvSmooth(temp, temp, CV_GAUSSIAN, 9, 9, 0,0);
    cvNamedWindow("thre");
    cvShowImage("thre", temp);

    cvFindContours(temp, storage, &contours, sizeof(CvContour), CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE, cvPoint(0,0));

    while(contours)
    {
        result = cvApproxPoly(contours, sizeof(CvContour), storage, CV_POLY_APPROX_DP, cvContourPerimeter(contours)*0.1, 0);
        if(result->total==3)
        {
            CvPoint *pt[3];
            for(int i=0;i<3;i++)
                pt[i] = (CvPoint*)cvGetSeqElem(result, i);

            if((int)sqrt((pt[0]->x-pt[2]->x)*(pt[0]->x-pt[2]->x)+(pt[0]->y-pt[2]->y)*(pt[0]->y-pt[2]->y))>=d && (int)sqrt((pt[0]->x-pt[1]->x)*(pt[0]->x-pt[1]->x)+(pt[0]->y-pt[1]->y)*(pt[0]->y-pt[1]->y))>=d && (int)sqrt((pt[1]->x-pt[2]->x)*(pt[1]->x-pt[2]->x)+(pt[1]->y-pt[2]->y)*(pt[1]->y-pt[2]->y))>=d)
            {
                cvLine(ret, *pt[0], *pt[1], cvScalar(255,255,255));

                cvLine(ret, *pt[1], *pt[2], cvScalar(255,255,255));

                cvLine(ret, *pt[2], *pt[0], cvScalar(255,255,255));
            }
        }
        contours = contours->h_next;
    }

    cvReleaseImage(&temp);
    cvReleaseMemStorage(&storage);

    return ret;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T17:47:00.737

我能想到的一个想法是使用 cv::matchShapes 函数（我建议使用 cv2 库和 Mat 而不是 Ipl 图像）。matchShapes 获取要检测的对象的 Mat 和要与之比较的对象的 Mat。因此，在您的情况下，您可以制作一个三角形和正方形轮廓的垫子，并将这些图像与您正在搜索的图像中的每个轮廓进行比较。

您也可以考虑简单地进行模板匹配，因为您的对象是静态的。查看 cv::matchTemplate 及其与上一段几乎相同的想法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T20:16:08.750

**如果**您可以确定您的轮廓是完整的，ApproxPoly 是一个很好的解决方案。如果轮廓是正方形但不闭合，则在近似后它将是一条具有四段和 3 个角的线。

另一种解决方案是在轮廓点周围放置一个框（有一个功能可以做到这一点）并检查宽度/高度比。然后，您可以测试轮廓列表中的各个线段，以查看它们是否与框边匹配。

# mysql - 数据库规范化设计问题：2 个表共享几乎相同的信息

> ID：13628330
> 
> 赞同：1
> 
> 时间：2012-11-29T14:49:41.560
> 
> 标签：mysql, database, oracle, database-design, relational-database

**示例场景：**假设我的产品公司只有两种类型的买家。

买家1：个人买家

买家2：公司买家

**买方 1**属性不同：FName、LName、Bdate 和 Age

**买方 2**属性不同：Company_Name、Nature_Of_Business 和 Type_Of_Business

**2 个买家的共同点**是：地址、电子邮件、电话号码、国家

```
 Db Table Name: Buyer
 Attributes: BuyerID, BuyerType **FName,LName,Bdate,Age**,Company_Name, Nature_Of_Business and Type_Of_Business 
```

**我的解释：**如果您尝试查看表买家，个人和公司买家的属性都被合并，因为他们都是买家，他们只是根据买家类型（个人或公司）分类

**问题：**如果买家类型是公司，那么我的个人属性（即 FName、LName 等）将被记录为空，反之亦然。我的想法阻止我将它们分开，因为我不想为每个表创建买方 ID。无论是个人还是公司，它们都应该只有 1 个买方 ID。

**问题：**如何构建数据库表来解决这个查询：

我想要显示所有买家信息且没有空记录的报告。

听起来很疯狂，但是当可能生成报告时，如果买家是公司类型，详细信息可能会给出个人买家字段的空记录

*注意：*如果我将过滤特定的买家类型，这可以轻松完成，但事实并非如此。我都想要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:04:26.930

您可以根据出生日期计算年龄，因此无需存储年龄。

您有一个买家表和单独的个人买家和公司买家表。

```
Buyer
------
Buyer ID
Buyer Type
Buyer Type ID
Address
Country
Email
Telephone Number

Individual Buyer
----------------
Individual Buyer ID
Last Name
First Name
Birth Date

Company Buyer
-------------
Company Buyer ID
Company Name
Type of Business
Nature of Business 
```

买方类型是指向该买方的特定子表的指标。'I' 代表个人，'C' 代表公司将是定义指标的一种方式。

买家类型 ID 是个人买家 ID 或公司买家 ID 的外键。

获取所有买家信息的 SQL 将是

```
SELECT *
FROM Buyer, "Individual Buyer", "Company Buyer"
WHERE "Buyer ID" = 12345
  AND (("Buyer Type ID" = "Individual Buyer ID") AND ("Buyer Type" = 'I'))
   OR (("Buyer Type ID" = "Company Buyer ID") AND ("Buyer Type" = 'C')) 
```

如果您想要多个买方行，请调整 WHERE 子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:33:38.283

您的*逻辑*架构可能具有三个不同的实体：一个包含所有公共字段的抽象采购商，以及两个从其继承的子实体：个人采购商和公司采购商。

如何在物理上实现该架构取决于您。通常，共享相同主键（此处`buyerID`为 ）的所有逻辑实体将合并到同一个物理表中。

有一个表是有意义的：

*   从**性能**的角度来看：过滤比*一般*加入占用更少的资源。使用单个表的 DML 也会快得多。

*   从**完整性**的角度来看：当您有多个表时，很容易插入无效数据。例如，如果您有三个表，则很难保证一个buyerID在子实体*中至少有*一行且*最多*一行。

我会选择一个有约束的物理表：

```
CREATE TABLE buyer (BuyerID primary key, BuyerType, 
                    FName,LName,Bdate,
                    Company_Name, Nature_Of_Business, Type_Of_Business,
                    CONSTRAINT individual_chk 
                       CHECK (BuyerType = 2 OR (Company_name IS NULL AND
                                                Nature_Of_Business IS NULL AND
                                                Type_Of_Business IS NULL)
                              ),
                    CONSTRAINT company_chk
                       CHECK (BuyerType = 1 OR (...))
                   ) 
```

检查约束还将验证每种类型的必填字段是否不为空。

如果您需要分别访问个人和企业，则可以创建视图：

```
CREATE VIEW individual_buyer IS 
   SELECT BuyerID, 
          FName,LName,Bdate
     FROM buyer 
    WHERE buyerType = 1

CREATE VIEW company_buyer IS 
   SELECT BuyerID, 
          Company_Name, Nature_Of_Business, Type_Of_Business
     FROM buyer 
    WHERE buyerType = 2 
```

# c# - ASP.Net Web 应用程序中的随机高 JIT 时间

> ID：13628332
> 
> 赞同：2
> 
> 时间：2012-11-29T14:49:49.227
> 
> 标签：c#, asp.net, .net, iis, jit

我们的 asp.net 应用程序目前遇到大量有关性能的问题。一直在进行各种调查，目前唯一突出的是工作进程的“% time in JIT”性能计数器。

在一个站点上，这往往会持续飙升至 90-95%，但很难确定这是否具有任何真正的意义，或者仅仅是一个转移注意力的问题。该站点以发布模式发布，编译调试标志设置为 false，按预期在初始加载时发生完全 JIT，但是，当在站点周围导航时，我们仍然会在 JIT 时间计数器中​​看到这些持续的峰值。有没有人能够帮助了解这个时间是如何计算的，以及它是否是一个可靠的性能指标？

更奇怪的是，在本地 IIS 安装上测试 Web 应用程序，我再次注意到，初始 JIT 按预期发生，但“% time in JIT”计数器的峰值仅发生在每个人的初始负载上页面 - 如果我立即刷新该页面，则计数器保持为 0。如果我等待几分钟然后再次刷新该页面，则计数器会出现峰值。这应该发生有什么原因吗？几乎就像页面是 JIT 编译然后缓存了几分钟。

到目前为止，我一直在研究与此计数器相关的要点是 LINQ 查询、正则表达式和通过反射进行的调用，但运气不佳。

非常感谢任何建议/帮助，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:44:16.963

您是否确认已在 web.config 文件中关闭调试？

```
<compilation debug="false"/> 
```

您也可以省略 debug 属性，因为默认值为`false`，但出于故障排除的目的，我会明确设置它。

# javascript - 是否可以检测文本何时换行？

> ID：13628337
> 
> 赞同：12
> 
> 时间：2012-11-29T14:50:09.133
> 
> 标签：javascript, jquery, css, word-wrap, programmable-completion

是否可以检测到文本换行的位置？

> Lorem ipsum dolor sit amet

可以说上面的文字在“dolor”字之后换行。如何检测到它并在那里插入一些标记，`Lorem ipsum dolor<div class='wrap-mark'/> sit amet`例如？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-05T19:49:06.537

我已经看到这个问题以几种不同的方式解决了。我的最爱之一是创建一个 div，该 div 反映了包含文本的容器的宽度。然后，您将内容中的单词一个接一个地打印到人造容器中，并沿途测量容器的高度。当容器的高度发生变化时，你知道你有一个换行/换行。

Facebook 和其他一些 CMS 使用这样的方法来扩展他们的文本区域以适应用户输入的内容。我相信您也可以通过研究这些技术来收集更多创造性的方法来衡量您的文本。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-04T01:41:16.883

使用软连字符实体来标记换行位置，加上不间断空格实体来分隔没有空格的单词。对于 IE10，不间断空格需要位于软连字符之前。这是一个例子：

这是一个跨浏览器的解决方案：

```
<!doctype html>
<html>
<head>
  <title>Soft Hyphen Text Wrapping</title>
  <style>
  /* Generate space after each soft hyphen */
  .fake-space:after { content: "\00a0"; }
  @media all and (-ms-high-contrast: none) {
  /* Generate space before each soft hyphen for IE10 */
  .fake-space:before { content: "\00a0"; }
  .fake-space:after { content: ""; }
  }
  </style>
</head>
<body>
<!--Paragraph with words separated by soft hypen entity wrapped in a span-->
<p>Lorem<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet<span class="fake-space">&shy;</span>ipsum<span class="fake-space">&shy;</span>dolor<span class="fake-space">&shy;</span>sit<span class="fake-space">&shy;</span>amet</p>
</body>
</html> 
```

**参考**

*   [是的，软连字符是一个难题](http://www.unicode.org/L2/L2002/02279-muller.htm)
*   [Unicode 换行算法](http://www.unicode.org/reports/tr14/)
*   [WBR 标签](http://www.quirksmode.org/oddsandends/wbr.html)
*   [软连字符 - 一个难题？](http://www.cs.tut.fi/~jkorpela/shy.html)
*   [无包装和软包装：使用 NOBR、WBR 和 ­](http://www.sam-i-am.com/work/sandbox/html/wbr.html)
*   [nobr 和 wbr](http://www.cs.tut.fi/~jkorpela/html/nobr.html#wbr)
*   [建议的分词](http://reference.sitepoint.com/html/wbr)
*   [WBR 元素](http://www.whatwg.org/specs/web-apps/current-work/multipage/text-level-semantics.html#the-wbr-element)

# pdf - 使用 CoreGraphics 修改 pdf 元数据颜色空间

> ID：13628349
> 
> 赞同：0
> 
> 时间：2012-11-29T14:50:45.360
> 
> 标签：pdf, core-graphics, quartz-graphics, color-space

我正在尝试更改 pdf 文件的图像对象的颜色空间，但第一个问题是我无法在 pdf 元数据中找到 ICC 颜色配置文件。

我在元数据中拥有的只是一个包含 2 个组件的数组：

```
ColorSpace :
    Name value: ICCBased
    Stream value (null) 
```

当我将 Stream 解析为字典时：

```
Color Space Name ICCBased
  Filter :
    Name value: FlateDecode
  Length :
   integer value: 389757 
  N :
   integer value: 4 
  Range :
   ARRAY with value:
    integer value: 0 
    integer value: 1 
    integer value: 0 
    integer value: 1 
    integer value: 0 
    integer value: 1 
    integer value: 0 
    integer value: 1 
```

但我无法在元数据中找到用于图像色彩空间的 ICC 配置文件数据，您可以使用 acrobat 看到：

![在此处输入图像描述](../Images/cc0ab34b2aba852223291dbb07f3d7b0.png)

顺便说一句，如果您对如何使用 coreGraphics 获取元数据形式的 pdf 文件感兴趣，我在这里放了一些代码：

> ...
> 
> CGPDFDocumentRef pdfDocument = CGPDFDocumentCreateWithURL(pdfURL);
> 
> CGPDFPageRef page = CGPDFDocumentGetPage(pdfDocument, pageNumber);
> 
> CGPDFContentStreamRef contentStream =
> 
> CGPDFContentStreamCreateWithPage(page); CGPDFOperatorTableRef
> 
> operatorTable = CGPDFOperatorTableCreate();
> 
> CGPDFOperatorTableSetCallback(operatorTable, "Do", &op_Do);
> 
> CGPDFScannerRef contentStreamScanner =
> 
> CGPDFScannerCreate(contentStream, operatorTable, NULL);
> 
> CGPDFScannerScan(contentStreamScanner);
> 
> ……

然后在回调上：

> 静态无效op_Do（CGPDFScannerRef s，无效*信息）{
> 
> CGPDFObjectRef imageObject = CGPDFContentStreamGetResource(cs, "XObject", imageLabel);
> 
> CGPDFStreamRef xObjectStream;
> 
> ```
> if (CGPDFObjectGetValue(imageObject, kCGPDFObjectTypeStream, &xObjectStream)) {
> 
>     CGPDFDictionaryRef xObjectDictionary = CGPDFStreamGetDictionary(xObjectStream);
> 
>     const char *subtype;
> 
>     CGPDFDictionaryGetName(xObjectDictionary, "Subtype", &subtype);
> 
>     if (strcmp(subtype, "Image") == 0) {
> 
>         NSString *imageID = [NSString stringWithCString: imageLabel encoding: NSASCIIStringEncoding];
> 
>         CGPDFDictionaryApplyFunction(xObjectDictionary, ListDictionaryObjects, NULL); 
> ```
> 
> if (CGPDFDictionaryGetName(xObjectDictionary, "ColorSpace", &colorSpaceName)){
> 
> ```
>  fprintf(stdout,"Color Space Name %s\n", colorSpaceName); 
> ```
> 
> }别的{
> 
> ```
>  //Getting Color space array
>             CGPDFArrayRef objectArray;
> 
>             CGPDFDictionaryGetArray(xObjectDictionary, "ColorSpace", &objectArray);
>             //getting each array position             
>             CGPDFStreamRef colorsSpaceStream;
> 
>             CGPDFArrayGetName(objectArray, 0, &colorSpaceName);
> 
>             fprintf(stdout,"Color Space Name %s\n", colorSpaceName);
> 
>             CGPDFArrayGetStream(objectArray, 1, &colorsSpaceStream);
> 
>             CGPDFDictionaryRef dictionary = CGPDFStreamGetDictionary(colorsSpaceStream);
> 
>             CGPDFDictionaryApplyFunction(dictionary, ListDictionaryObjectsLow, NULL); 
> ```
> 
> }
> 
> ...

最后在 ListDictionaryObjects 函数中，我遍历字典对象：

> void ListDictionaryObjects (const char *key, CGPDFObjectRef object, void *info) { fprintf(stdout, "%s :\n", key);
> 
> ```
> CGPDFObjectType type = CGPDFObjectGetType(object);
> switch (type) {
>     case kCGPDFObjectTypeDictionary: {
>         CGPDFDictionaryRef objectDictionary;
>         if (CGPDFObjectGetValue(object, kCGPDFObjectTypeDictionary, &objectDictionary)) {
>             fprintf(stdout," Dictionary value with: %zd elements\n", CGPDFDictionaryGetCount(objectDictionary));
>             CGPDFDictionaryApplyFunction(objectDictionary, ListDictionaryObjectsLow, NULL);
>         }
>     }
>         break;
>     case kCGPDFObjectTypeInteger: {
>         CGPDFInteger objectInteger;
>         if (CGPDFObjectGetValue(object, kCGPDFObjectTypeInteger, &objectInteger)) {
>            fprintf(stdout," integer value: %ld \n", (long int)objectInteger);
>         }
> 
>     }
>     break;
>     case kCGPDFObjectTypeReal:{
>         CGPDFReal objectReal;
>         if (CGPDFObjectGetValue(object, kCGPDFObjectTypeReal, &objectReal)){
>             fprintf(stdout," real value: %5.2f\n", objectReal);
>         }
>     } ... 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T23:13:37.130

PDF 规范中描述了您所看到的内容：http: [//www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)

查找定义基于 ICC 的颜色空间的第 8.6.5.5 节 - 您正在查找的数据包含在您粘贴在消息顶部的流中。它不容易辨认，因为它已经过 Flate 编码（ZIP 编码）。

问题是你到底想完成什么？如果你只是想丢弃这个基于ICC的色彩空间并创建一个新的，你不需要找到这个数据，只需创建一个新的色彩空间对象并让图像引用你的新对象。

要更改现有的 ICC 配置文件（这通常是个*坏主意*），您必须解压缩流数据，调整要调整的内容并再次重新压缩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T10:38:01.727

可以通过使用 ColorSync Utility 创建 Quartz Filter 来为特定颜色空间的所有对象分配新的颜色配置文件（即不改变对象中的值）。

2005 年 Mac 开发人员库中关于“ [Mac OS X 上的 ColorSync](https://developer.apple.com/library/mac/technotes/tn2035/_index.html#//apple_ref/doc/uid/DTS10003071-CH1-SECTION45 "技术说明 TN2035：Mac OS X 上的 ColorSync") ”的技术说明指出：

> Quartz 过滤器目前只能通过各种 Mac OS X 系统构建的实用程序和应用程序使用。然而，一组新的 API 即将推出。

但我在 Apple 的开发人员文档中找不到任何其他提及 Quartz Filters 的内容。

我知道这不是很有帮助，但也许它会给你一个提示。

编辑：请参阅[“在 Mac OS X 10.6.3 下保存 PDF 时应用 Quartz 过滤器”的答案](https://stackoverflow.com/a/2740283/569019)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T08:00:22.297

这些是遵循的步骤：

1- 使用 ColorSync 实用程序创建您的 Quartz 过滤器并将其保存为 .qfilter 文件

2-使用此代码将此过滤器应用于您的pdf文件：

```
PDFDocument *pdf = [[PDFDocument alloc]initWithURL:[NSURL fileURLWithPath:@"_pdfURL_"]];

NSDictionary *dict = [[NSDictionary alloc]initWithObjectsAndKeys:[QuartzFilter quartzFilterWithURL:[NSURL fileURLWithPath:@"_myFilter.qfilter_"]], @"QuartzFilter", nil]; 

[pdf writeToFile:@"_pdfFilePath_" withOptions:dict]; 
```

# c - C - 逻辑复合运算符

> ID：13628350
> 
> 赞同：0
> 
> 时间：2012-11-29T14:50:46.670
> 
> 标签：c, bit-manipulation, compound-operator

复合运算符 '&=' 是逻辑 AND 还是按位 AND ？

换句话说，`a &= b`等同于：

*   `a = a & b`
*   `a = a && b`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:52:24.283

这是按位与，而不是逻辑。（必须添加一些字符）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T14:52:29.367

`a &= b`正在使用按位 AND 运算符。想想`+=`操作：

```
a += 5; 
```

是相同的：

```
a = a + 5; 
```

它只是两个操作的组合：`&`和`=`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T14:54:08.580

在 C 中，`a &= b`是`a = a & b`，即按位。在有专用`bool`类型的 C++ 中，`&=`on booleans 也是布尔型，简单`&`的 on也是如此`bool`。但是，这些都没有表现出 的短路行为`&&`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-29T14:55:39.900

很`bitwise AND`简单

当你这样做的`a&=b`时候`a=a&b`

记住`a`并且`b`应该`integral type`或提升为整数类型

虽然`&&`是`logical AND`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-29T15:01:20.507

这是可以通过实验而不是询问来解决的问题之一：

```
#include <stdio.h>
#include <inttypes.h>

int main(int argc, char *argv[]) {
    uint8_t a = 0xFF;
    uint8_t b = 0x0F;

    a &= b;
    printf("a &= b : %02X\n",a);

    a = 0xFF;
    printf("a & b : %02X\n", a & b);
    printf("a && b: %02X\n", a && b);
} 
```

印刷：

```
a &= b : 0F
a & b : 0F
a && b: 01 
```

到控制台。

# sql - CTE 递归到表 A 中的根，并在每次迭代时连接表 B 中的结果

> ID：13628352
> 
> 赞同：0
> 
> 时间：2012-11-29T14:50:50.467
> 
> 标签：sql, tsql, common-table-expression

我是 T-SQL 中 CTE 的新手，但我很喜欢它们。但是，我无法为我正在编写的这个特定存储过程获得正确的逻辑。

`Table A`与列一起给出：

```
Id Name Inherits ... 
```

列 Inherits 存储一个 int，它是同一个表中另一行的 id。

并`Table B`与列：

```
Id Name AId ... 
```

其中 AId 是表 A 中一行的外键。

如何使用 CTE 从 in 中的任意行 ( `x`) 开始，收集where 中`A`的所有行，然后通过将 x 设置为指向的行在 A 中向上递归。这应该一直持续到.`B``AId = x.Id``x.Inherits``x.Inherits IS NULL`

所以总体效果是我想返回起始 A Id 的相关 B 行，然后是我们通过递归检查 A 的 Inherits 列发现的所有继承的 B 行。

我的想法是设置 CTE 以从任意行递归到 A 的“根”，并且在每个递归调用内部都有一个到 B 的 JOIN。据我所知：

```
WITH c 
AS
(

    SELECT A.Inherits,A.Id, B.Name, 1 AS Depth
    FROM tbl_A A
    INNER JOIN tbl_B B ON B.AId = A.Id
    WHERE A.Id = @ArbitraryStartingAId

    UNION ALL

    SELECT T.Inherits,T.Id, c.Name, c.Depth + 1 AS 'Level'
    FROM tbl_A T        
    INNER JOIN c ON T.Id = c.Inherits

)
SELECT *
FROM c 
```

产生：

```
1        4  b_val   1
11       1  b_val   2
NULL    11  b_val   3 
```

Where`b_val`取自`Table B row (y)`where `@ArbitraryStartingAId = y.AId`。A 上的递归正在工作，但在每次迭代时都没有提取正确的相应 B 数据。

如果有人可以帮助重写它以产生我需要的结果，那就太好了。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T15:29:07.283

假设我们有

```
CREATE TABLE A ( Id int, Name nvarchar(10), Inherits int );
CREATE TABLE B ( Id int, Name nvarchar(10), AId int ); 
```

还有一些数据：

```
INSERT A VALUES ( 1, 'one', 2 );
INSERT A VALUES ( 2, 'two', 3 );
INSERT A VALUES ( 3, 'three', null );
INSERT A VALUES ( 4, 'four', 3 );

INSERT B VALUES ( 1, 'B one', 1 );
INSERT B VALUES ( 2, 'B two', 2 );
INSERT B VALUES ( 3, 'B three', 3 );
INSERT B VALUES ( 4, 'B four', 4 ); 
```

我们可以在 上构建 CTE `A`，*然后*加入`B`：

```
WITH cteA AS 
(
    -- Anchor
    SELECT Id, Name, Inherits FROM A
    WHERE Id = 1
    UNION 
    -- Recursive
    SELECT A.Id, A.Name, A.Inherits FROM A
    INNER JOIN cteA ON A.Id = cteA.Inherits
)
SELECT * FROM cteA INNER JOIN B ON cteA.Id = B.AId; 
```

获得（锚点位于`1`）：

```
Id          Name       Inherits    Id          Name       AId
----------- ---------- ----------- ----------- ---------- -----------
1           one        2           1           B one      1
2           two        3           2           B two      2
3           three      NULL        3           B three    3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:52:42.453

这是我现在所处的位置，这是一个可能的答案，因为返回了正确的数据：

```
WITH c 
AS
(
    SELECT A.Inherits,A.Id, B.Name, 1 AS Depth
    FROM tbl_A A
    INNER JOIN tbl_B B ON B.AId = A.Id
    WHERE A.Id =@ArbitraryStartingAId

    UNION ALL

    SELECT T.Inherits,T.Id, T.Name, B.Name, c.Depth + 1 AS 'Level'
    FROM tbl_A T
    INNER JOIN tbl_B B ON B.AId = T.Id      
    INNER JOIN c ON T.Id = c.Inherits
)
SELECT DISTINCT *
FROM c ORDER BY Depth ASC 
```

虽然感觉有点脏，因为它两次返回根级别 B 行，因此 DISTINCT 运算符将它们过滤掉......？？

# c++ - C ++：定义类函数的.cpp文件中实例本身的表示关键字

> ID：13628356
> 
> 赞同：0
> 
> 时间：2012-11-29T14:51:00.400
> 
> 标签：c++, class, instance, keyword

例如，我创建了一个名为的类并将`Circle`其定义在`Circle.h`.

```
class Circle {
    public:
        Circle *parent;

        Circle();
}; 
```

`Circle.cpp`在与 相同目录下的一个单独文件中`Circle.h`，我定义了构造函数。

```
Circle::Circle() {
    // creates a root circle, parent is set to itself
    *parent = ????
} 
```

我应该填写什么`????`？`this`在 AS3 中，我知道在定义类的函数时可以使用关键字来表示实例本身。你在 C++ 中使用什么？

**编辑 2012/11/29 23:56**

还有另一个构造函数：

```
Circle(Circle*);

Circle::Circle(Circle *cParent) {
    *parent = *cParent;
} 
```

一个函数在被调用时会创建一个新`Circle`实例并将新实例设置`*parent`为调用者。

```
void addChild();

void Circle::addChild() {
    Circle child(????);
} 
```

`????`仍然是那个神秘的部分。根据我读过的资源，`this`似乎已被弃用或已成为其他含义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T14:55:56.593

您要查找的关键字是`this`; 它是一个指向调用函数的实例的指针。在您的示例中，您将像这样使用它：

```
Circle::Circle()
{
  parent = this;
} 
```

请注意，它必须是`parent = this;`，**不是** `*parent = this;`。后者将分配给`parent`指向的对象，这是无效的（`parent`具有不确定的值）。幸运的是，它不会编译，因为您将指针分配给对象。

对于这种情况（在构造函数中初始化数据成员），C++ 具有初始化语法，这通常优于在构造函数主体中分配成员。代码将如下所示：

```
Circle::Circle()
  : parent(this)
{} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T14:55:29.010

同样，在 C++ 中，`this`关键字是指向当前对象的指针。由于它是一个指针，因此您应该直接分配给`parent`指针而不是取消引用它。

```
parent = this; 
```

但是，您确定要自己圈子的父级吗？通常，层次结构中最顶层的对象有一个空父指针：

```
parent = nullptr; 
```

或者在不支持的编译器中`nullptr`，使用`NULL`或`0`。

由于您没有将`parent`指针初始化为指向任何有效`Circle`对象，因此当您取消引用它时，您的代码会调用未定义的行为。然后，您尝试将 type 的对象分配给 type`Circle*`的对象`Circle`，您的编译器会抱怨。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:06:17.920

> 根据我读过的资源，这似乎已被弃用或已成为其他含义？

您要么阅读不良资源，要么误读它们。指针在 C++(03|11)中`this`仍然有效。

向后移动，您的神秘解决方案是使用`this`：

```
void Circle::addChild() {
    Circle child(this);
} 
```

这段代码几乎是正确的：

```
Circle::Circle(Circle *cParent) {
    *parent = *cParent;
} 
```

但不完全正确，因为`*parent`dereferences `parent`，这不是你想要做的。您要做的是分配`parent`指针，而不是更改`parent`指向的内容：

```
Circle::Circle(Circle *cParent) {
    parent = cParent;
} 
```

与ctor类似：

```
Circle::Circle() {
    // creates a root circle, parent is set to itself
    parent = ????
} 
```

但是在这种情况下，由于根节点在概念上没有父节点，因此`parent`该节点的成员不应指向自身，而应不指向任何内容：

```
Circle::Circle() {
    // creates a root circle, parent is set to itself
    parent = NULL; // or '0' or 'nullptr' with C++11
} 
```

# sql-server - 无法使用我的 sa 凭据访问 SQL Server

> ID：13628358
> 
> 赞同：0
> 
> 时间：2012-11-29T14:51:03.893
> 
> 标签：sql-server, sql-server-2008-r2, sa

我重置了我的 SQL Server 2008 R2`sa`密码：

```
sp_password @new = 'joomlacmssenha', @loginame = 'sa' 
```

但是，当我尝试使用带有这些凭据的 SQL Server 身份验证进行访问时，出现以下错误：

> 与服务器成功建立连接，但在登录过程中出现错误。（提供者：共享内存提供者，错误：0 - 管道的另一端没有进程。）（Microsoft SQL Server，错误：233）

该错误的解释是：

> SQL Server 客户端无法连接到服务器。由于服务器未配置为接受远程连接，可能会发生此错误。

但它是本地数据库，而不是远程数据库。那么为什么会发生这个错误呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:02:48.343

我找到了解决方案。

[https://serverfault.com/questions/35505/cant-connect-to-sql-server-using-sa-account-what-im-missing](https://serverfault.com/questions/35505/cant-connect-to-sql-server-using-sa-account-what-im-missing)

我仍然不明白为什么微软说这是一个远程连接问题。

# javascript - 如何在使用 SOAP 的 javascript AJAX 中使用一个代理，与 WCF 测试客户端使用相同

> ID：13628365
> 
> 赞同：21
> 
> 时间：2012-11-29T14:51:14.407
> 
> 标签：javascript, ajax, wcf, soap, proxy

我有 WCF web 服务和 javascript 客户端，它们使用 SOAP 1.2 通过 AJAX 连接到该服务。我想做的是通过取消选中“启动新代理”来传递一些参数来告诉 AJAX SOAP 调用**只使用一个代理**，就像我在 WCF 测试客户端中所做的一样。 ![图片](../Images/c4e065c51c6ca76ee6c063755824e288.png)

这是我的 SOAP AJAX 调用：

```
DoSoapAjax: function (soapMethodName, data, successHandler, errorHandler, isAsync, currentInstance) {
    var service = this;
    var soapResult    = soapMethodName + "Result";
    var soap12WithWsHttpBindRequest ='<s:Envelope xmlns:a="http://www.w3.org/2005/08/addressing" xmlns:s="http://www.w3.org/2003/05/soap-envelope">' +
                      '<s:Header>' +
                      '<a:Action s:mustUnderstand="1">' + this.serviceContractNamespace + '/' + this.interfaceName + '/' + soapMethodName + '</a:Action>' +
                      '<a:MessageID>urn:uuid:605ea0c6-d09b-46bf-b61d-e61b377a135b</a:MessageID>' +
                      '<a:ReplyTo>' +
                      '<a:Address>http://www.w3.org/2005/08/addressing/anonymous</a:Address>' +
                      '</a:ReplyTo>' +
                      '<a:To s:mustUnderstand="1">' + this.tenantAdminService + '</a:To>' +
                      '</s:Header>' +
                      '<s:Body>';
                      if (data == emptyString)
                      {
                        soap12WithWsHttpBindRequest +=
                      '<' + soapMethodName + ' xmlns="' + this.serviceContractNamespace + '" />';
                      }
                      else
                      {
                        soap12WithWsHttpBindRequest +=
                      '<' + soapMethodName + ' xmlns="' + this.serviceContractNamespace + '">' +
                      data +
                      '</' + soapMethodName + '>';
                      }
                       soap12WithWsHttpBindRequest +=
                      '</s:Body>' +
                      '</s:Envelope>';
    // in order for ajax to work on jQuery 1.8.2 we need to enable the following.
    // found this answer on the link : http://stackoverflow.com/questions/9160123/no-transport-error-w-jquery-ajax-call-in-ie
    $.support.cors = true;
    // variable to save successData
    var responseData = null;
    // SOAP 1.2 query
    var response = $.ajax({
              type: "POST",
              url: this.tenantAdminService,
              data: soap12WithWsHttpBindRequest,
              contentType: "application/soap+xml",
              dataType: "xml",
              processData: false,
              async: isAsync,
              success: function (data, status, xmlHttpRequest) {
                responseData = data;
                // inserting all data results into dictionary
                var responseResults = {};
                // delegating success function
                if (successHandler != null)
                {
                    responseResults = service.ParseResponse(soapMethodName, data);
                    successHandler(responseResults, currentInstance);
                }                
              },
              error: function (xmlHttpRequest, textStatus, errorThrown) {
                  if (errorHandler != null)
                  {
                    errorHandler(xmlHttpRequest, textStatus, errorThrown, currentInstance);
                  }
                  else if (!isAsync)
                  {
                    alert("Error : " + errorThrown);
                    alert("Error Description : " + xmlHttpRequest.responseText);
                  }

                  return;
              }
          });

        if (!isAsync)
        {   
            return service.ParseResponse(soapMethodName, response.responseXML);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-03T16:32:10.137

我首先会说我不知道​​具体的答案，但我的方法是嗅探来自 WFC 测试客户端的流量，看看它是否正在向调用中添加任何参数，您可以将这些参数添加到请求标头中在您的 AJAX 调用上。

**Fiddler**可能会完成这项工作，但我不确定它是否会捕获所有 http 流量 - 主要是针对浏览器的。还有其他一些功能或多或少且易于使用的工具，如**wire shark**、**ether**等。

我猜想从测试客户端传输的 SOAP 信封主体之外还有其他一些请求参数，您应该能够看到。这是我能想象的测试客户端能够在不修改您的 SOAP 消息的情况下进行通信的唯一方法。

如果您可以找到名称和值，则可以将其添加到您的 data: 参数中作为另一个名称-值 JSON 实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T13:54:35.487

你可以把你的soap请求放在Fiddler中然后执行你会得到响应。对于该响应类型。当您获得响应时，以您想要的模式查看它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-21T21:26:47.773

liorafar：我假设您正在从浏览器运行 Javascript，因为它是托管的。如果是这样，除非您允许 javascript 更改您的主机的某些行为，否则这是不可能的，这需要客户端批准浏览器识别为安全风险的每次执行。考虑一下：1）Javascript不控制连接配置，它只使用运行它的主机提供的环境，在这种情况下是浏览器，但也可以在服务器端。2）如果您说“好的，让我们强制执行此操作”，我想到的唯一方法是创建您的主机或客户端主机的任何对象的实例并强制更改连接......到那时浏览器会将您的 javascript 检测为安全风险，因此您应该为市场上的每个浏览器创建一个脚本，

为了解决这个问题，我将要求 IT 人员为浏览器配置一些例外规则，而不是浏览器中的代理（如果您进入公司）。

我希望这可以在某种程度上有所帮助！

加布里埃尔

# solaris - Solaris：无法在 VCS 中检查状态

> ID：13628367
> 
> 赞同：0
> 
> 时间：2012-11-29T14:51:20.590
> 
> 标签：solaris

我在 oracle 虚拟机上的 solaris OS 上的 node1 和 node2 上运行 VCS。我在两个节点上都运行了以下命令：

```
bash-3.00# lltconfig
LLT is running

bash-3.00# lltstat -nvv|head
LLT node information:
    Node                 State    Link  Status  Address
   * 0 node1             OPEN
                                  e1000g1   UP      08:00:27:A8:58:92
                                  e1000g2   UP      08:00:27:12:F2:FC
     1 node2             CONNWAIT
                                  e1000g1   DOWN
                                  e1000g2   DOWN 
```

但是当我在下面运行时，我发现错误：

```
bash-3.00# hastatus -sum
VCS ERROR V-16-1-10600 Cannot connect to VCS engine
VCS WARNING V-16-1-11046 Local system not available 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T17:20:56.083

Veritas Clustering 中有多个组件。LLT 是“低级传输”工具，是引导过程中启动的第一层之一。“had”守护进程和其他更高级别的组件由不同的引导脚本启动。无论出于何种原因，您的服务器上似乎都没有运行“hastart”，或者“hastart”失败了。

赛门铁克提供比大多数供应商更好的支持，并且有很好的在线文档。对您的错误代码进行网络搜索。检查您的 VCS 日志（可能是 /var/VRTSvcs/log/engine_A.log）和系统日志（可能是 /var/adm/messages）。

# iphone - ASIHTTPRequest 方法 AFNetworking 的替代方法

> ID：13628369
> 
> 赞同：0
> 
> 时间：2012-11-29T14:51:21.727
> 
> 标签：iphone, ios, asihttprequest, afnetworking

我在 ASIHTTPRequest 中这样做：

```
[request addFile:@"/Users/Salman/Downloads/asd1.jpg" forKey:@"user_image"]; 
```

它在 AFNetworking 中的替代品是什么：

我正在这样做，但它不起作用。

```
[formData appendPartWithFileData:imageData1 name:@"user_image" fileName:@"image3.png" mimeType:@"image/jpeg"]; 
```

应该怎么做才能解决这个问题？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T10:20:21.387

我将 mimeType 从 @"image/jpeg" 更改为 @"image/png" 并且它可以工作。谢谢@张

# objective-c - 指针在 FSEventStream 回调中丢失（ObjC 和 ARC）

> ID：13628370
> 
> 赞同：4
> 
> 时间：2012-11-29T14:51:24.283
> 
> 标签：objective-c, callback, automatic-ref-counting, nsmutabledictionary

我已经成功地掌握了 FSEventStream 的基础知识，让我可以查看文件夹中的新文件事件。不幸的是，我传递给 FSEventStreamCreate() 的回调引用正在丢失/损坏/未保留，因此我也无法访问我需要的数据对象。以下是关键代码块：

**FileWatcher.m：（设置 FSEvent 流）**

```
FSEventStreamContext context;
//context.info = (__bridge_retained void *)(uploadQueue);  // this didn't help
context.info = CFBridgingRetain(uploadQueue);
context.version = 0;
context.retain = NULL;
context.release = NULL;
context.copyDescription = NULL;

/* Create the stream, passing in a callback */
stream = FSEventStreamCreate(NULL,
                             &FileWatcherCallback,
                             &context,
                             pathsToWatch,
                             kFSEventStreamEventIdSinceNow, /* Or a previous event ID */
                             latency,
                             kFSEventStreamCreateFlagFileEvents /* Also add kFSEventStreamCreateFlagIgnoreSelf if lots of recursive callbacks */
                             ); 
```

**Filewatcher.m：FileWatcherCallback**

```
void FileWatcherCallback(
                     ConstFSEventStreamRef streamRef,
                     FSEventStreamContext *clientCallBackInfo,
                     size_t numEvents,
                     void *eventPaths,
                     const FSEventStreamEventFlags eventFlags[],
                     const FSEventStreamEventId eventIds[])
{
    int i;
    char **paths = eventPaths;

    // Retrieve pointer to the download Queue!
    NSMutableDictionary *queue = (NSMutableDictionary *)CFBridgingRelease(clientCallBackInfo->info);
    // Try adding to the queue
    [queue setValue:@"ToDownload" forKey:@"donkeytest" ];
    ...
} 
```

当这个回调函数被触发时，我可以很好地获取文件路径，但是指向 NSMutableDictionary 的 clientCallBackInfo->info 指针现在指向的内存地址与我设置流时不同。然后当我尝试添加到字典时，我得到一个抛出异常（setValue 行）。

我是否需要以某种方式以不同的方式处理指针？任何帮助将非常感激。（我在 Xcode 4.5.1 上使用默认构建设置，包括 ARC。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:59:22.570

回调函数的第二个参数是一个`void *info`（即`context.info`）而不是指向`FSEventStreamContext context`结构的指针。

所以这段代码应该可以得到正确的指针：

```
void FileWatcherCallback(
                         ConstFSEventStreamRef streamRef,
                         void *info, // <-- this is context.info
                         size_t numEvents,
                         void *eventPaths,
                         const FSEventStreamEventFlags eventFlags[],
                         const FSEventStreamEventId eventIds[])
{
    // ...
    // Retrieve pointer to the download queue:
    NSMutableDictionary *queue = CFBridgingRelease(info);
    // ...
} 
```

* * *

**备注：**在我看来，您对`CFBridgingRetain()`/的使用还有另一个问题`CFBridgingRelease()`。*每次*调用回调函数时，对象的保留计数`uploadQueue`将递减。这会很快导致崩溃。

 *使用起来可能更好

```
context.info = (__bridge void *)(uploadQueue); 
```

用于创建事件流，以及

```
NSMutableDictionary *queue = (__bridge NSMutableDictionary *)info; 
```

在回调函数中。`uploadQueue`只要使用事件流，您只需确保保持强引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:05:56.810

我从来没有使用过这个API，但是看网上的例子，传递`self`这个指针似乎很正常。然后 if`uploadQueue`是一个实例变量，您可以通过属性使其可访问（并具有访问类实例中所有内容的额外优势）。*

# ruby-on-rails - 比较 ruby on rails 中的两个日期

> ID：13628371
> 
> 赞同：0
> 
> 时间：2012-11-29T14:51:24.893
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, utc

我有一个来自美国格式 (MM-DD-YYYY) 表格的日期，现在我想将它与 UTC 格式的数据库中的日期进行比较。
因此我必须将该日期转换为UTC，我正在这样做但它不起作用：

```
from_date = Date.strptime(params[:from_date], '%m-%d-%Y').utc 
```

它给了我错误

```
undefined method `utc' for Sat, 15 Dec 2012:Date 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T14:55:18.587

该`#utc`方法只为 Time 对象定义。如果时区对您尝试做的事情很重要，请尝试

```
from_date = Date.strptime(params[:from_date], '%m-%d-%Y').to_time.utc 
```

另请查看文档：[http ://www.ruby-doc.org/core-1.9.3/Time.html#method-i-utc](http://www.ruby-doc.org/core-1.9.3/Time.html#method-i-utc)

# jquery - Jquery 在页面加载/调整大小时调整 div 的大小

> ID：13628373
> 
> 赞同：1
> 
> 时间：2012-11-29T14:51:28.000
> 
> 标签：jquery, css, html

每当调整窗口大小或首次加载时，我都会调用以下 JQuery。我有一些问题，它在第一次加载时似乎没有按预期工作。有人可以告诉我什么是故障吗？

# jQuery (1.8.3)

```
function setContentHeight() {
    var height = $(document).height();
    $('#content, #content > div:first-child').height(height - 242);
    $('#content-text-description').height(height - 280);
}

$(window).resize(function(e) {
    setContentHeight();
});

$(document).ready(function(e) {
    setContentHeight();
}); 
```

# HTML

```
<body>
    <div id="container">
        <div id="banner"></div> <!-- Header -->
        <div id="navi"></div> <!-- Navigation Pane -->
        <div id="content"> <!-- Content loaded with include -->
            <div id="home"> <!-- Start of content -->
                <div id="content-text-description"></div> <!-- container for custom scroller -->
            </div>
        <div id="footer"></div> <!-- Footer -->
    </div>
</body> 
```

# CSS

```
body {
   margin:0;
   font-family:"Century Gothic";
   line-height:30px;
}

#container {
    width:1024px;
    margin: 0 auto;
}

#banner {
    width:1024px;
}

#content {
    width:1024px;           
    height:470px;
    z-index:98;
    float:left; 
    top:-7px;   
    overflow:hidden;
}

#footer {
    text-align:center;
    background:#59585D;
    position:absolute;
    bottom:0px;
    width:1024px;
    height:30px;
    font-size:12px;
    color:#ffffff;
}

#content-text-description {
    padding-top:20px;
    display:block;
    width:800px;
    z-index:3;
    overflow:auto;
} 
```

据我所知，当加载文档或调整窗口大小时，JQuery 位应该通过调整请求的 div 的大小来按预期工作，但事实并非如此。

是我做错了什么还是我试图实现的目标是不可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:55:13.827

Cdocument.ready 事件检查高度太早，请改用 document.load 事件

$(window).resize(function(e) { setContentHeight() ; });

$(document).load(function(e) { setContentHeight() ; });

原因是 document.load 事件在整个 dom 被下载后不久被触发。但是在那个时间渲染还没有发生，可能没有应用css，没有加载图像等。因此高度将不正确。

但是在下载所有内容并应用样式后会触发 load 事件，因此您应该获得正确的高度。

无论如何，这不是你应该用脚本做的事情，而是用样式来做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:55:35.013

我通过更多地使用代码来修复它......

真的很简单。

```
var height = $(document).height(); 
```

应改为：

```
var height = $(window).height(); 
```

# mysql - 我可以做些什么来优化这个 SQL 查询

> ID：13628378
> 
> 赞同：0
> 
> 时间：2012-11-29T14:51:53.630
> 
> 标签：mysql

我有一个在网站上运行的这样的查询：

```
SELECT *
FROM `orders`
WHERE
    `co_id`='12660' &&
    ((`from_region`=6 && `to_region`=60) || `id` IN('539110')) &&
    (
        `p_name` LIKE '%search%' ||
        `p_street_address` LIKE '%search%' ||
        `p_city` LIKE '%search%' ||
        `p_state` LIKE '%search%' ||
        `p_zip` LIKE '%search%' ||
        `p_non_us_address` LIKE '%search%' ||
        `p_contact` LIKE '%search%'
    ) &&
    (
        (`when_deleted` >= 1349222400 && `when_deleted` <= 1378511999) ||
        (`assigned_to_date` >= 1349222400 && `assigned_to_date` <= 1378511999) ||
        (`deleted` = "0" && `assigned_to` = "")
    )
ORDER BY p_state,p_city,p_zip,date_time DESC LIMIT 20,20; 
```

这是一个搜索查询，可以在很多列中搜索文本。该表包含订单，查询仅检查特定地区的订单以及是否在特定日期之间（在此期间被删除或分配，或者仍然未完成）以及搜索文本。

表本身如下所示：

```
CREATE TABLE IF NOT EXISTS `orders` (
  `co_id` smallint(5) unsigned NOT NULL DEFAULT '0',
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `from_region` smallint(5) unsigned NOT NULL DEFAULT '0',
  `to_region` smallint(5) unsigned NOT NULL DEFAULT '0',
  `deleted` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `when_deleted` int(10) unsigned NOT NULL DEFAULT '0',
  `important` smallint(1) unsigned NOT NULL DEFAULT '0',
  `p_name` varchar(50) NOT NULL DEFAULT '',
  `p_street_address` varchar(80) NOT NULL DEFAULT '',
  `p_city` varchar(50) NOT NULL DEFAULT '',
  `p_state` char(2) NOT NULL DEFAULT '',
  `p_zip` varchar(10) NOT NULL DEFAULT '',
  `p_non_us_address` varchar(255) NOT NULL,
  `p_country` varchar(15) NOT NULL,
  `p_residence` tinyint(1) NOT NULL DEFAULT '0',
  `p_contact` varchar(50) NOT NULL DEFAULT '',
  `p_phone` varchar(25) NOT NULL,
  `p_cell` varchar(25) NOT NULL,
  `p_altphone` varchar(25) NOT NULL,
  `p_fax` varchar(80) NOT NULL DEFAULT '',
  `p_email` varchar(80) NOT NULL DEFAULT '',
  `p_addl_info_1` varchar(255) NOT NULL,
  `p_addl_info_2` varchar(255) NOT NULL,
  `vehs_avail` int(10) unsigned NOT NULL DEFAULT '0',
  `d_name` varchar(50) NOT NULL DEFAULT '',
  `d_street_address` varchar(80) NOT NULL DEFAULT '',
  `d_city` varchar(50) NOT NULL DEFAULT '',
  `d_state` char(2) NOT NULL DEFAULT '',
  `d_zip` varchar(10) NOT NULL DEFAULT '',
  `d_non_us_address` varchar(255) NOT NULL,
  `d_country` varchar(15) NOT NULL,
  `d_residence` tinyint(1) NOT NULL DEFAULT '0',
  `d_contact` varchar(50) NOT NULL DEFAULT '',
  `d_phone` varchar(25) NOT NULL,
  `d_cell` varchar(25) NOT NULL,
  `d_altphone` varchar(25) NOT NULL,
  `d_fax` varchar(80) NOT NULL DEFAULT '',
  `d_email` varchar(80) NOT NULL DEFAULT '',
  `d_addl_info_1` varchar(255) NOT NULL,
  `d_addl_info_2` varchar(255) NOT NULL,
  `deliver_by` int(10) unsigned NOT NULL DEFAULT '0',
  `b_CustomerId` int(10) unsigned NOT NULL,
  `b_name` varchar(50) NOT NULL DEFAULT '',
  `b_street_address` varchar(80) NOT NULL DEFAULT '',
  `b_city` varchar(50) NOT NULL DEFAULT '',
  `b_state` char(2) NOT NULL DEFAULT '',
  `b_zip` varchar(10) NOT NULL DEFAULT '',
  `b_non_us_address` varchar(255) NOT NULL,
  `b_country` varchar(15) NOT NULL,
  `b_contact` varchar(50) NOT NULL DEFAULT '',
  `b_phone` varchar(25) NOT NULL,
  `b_cell` varchar(25) NOT NULL,
  `b_altphone` varchar(25) NOT NULL,
  `b_fax` varchar(80) NOT NULL DEFAULT '',
  `b_email` varchar(80) NOT NULL DEFAULT '',
  `b_addl_info_1` varchar(255) NOT NULL,
  `b_addl_info_2` varchar(255) NOT NULL,
  `num_units` decimal(5,2) unsigned NOT NULL DEFAULT '0.00',
  `price_per_unit` decimal(9,2) unsigned NOT NULL DEFAULT '0.00',
  `price_per_load` decimal(9,2) unsigned NOT NULL DEFAULT '0.00',
  `additional_charge` decimal(9,2) NOT NULL DEFAULT '0.00',
  `additional_charge_desc` text NOT NULL,
  `fuelSurchargePercent` float(5,2) NOT NULL,
  `fuelSurchargeAmt` decimal(9,2) unsigned NOT NULL,
  `poNumber` varchar(50) NOT NULL,
  `cod` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `run_drive` tinyint(1) NOT NULL DEFAULT '0',
  `desc_vehs` text NOT NULL,
  `other_notes` text NOT NULL,
  `assigned_to` varchar(255) NOT NULL DEFAULT '',
  `assigned_to_date` int(10) unsigned NOT NULL DEFAULT '0',
  `assignedOn` datetime NOT NULL,
  `loaded` int(10) unsigned NOT NULL DEFAULT '0',
  `delivered` int(10) unsigned NOT NULL DEFAULT '0',
  `notifications_entered` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `notifications_assigned` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `notifications_loaded` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `notifications_delivered` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `notifications_email` varchar(100) NOT NULL,
  `owner` smallint(5) unsigned NOT NULL,
  `date_time` int(10) unsigned NOT NULL DEFAULT '0',
  `changed` tinyint(1) NOT NULL DEFAULT '0',
  `synced` tinyint(1) NOT NULL DEFAULT '0',
  PRIMARY KEY (`co_id`,`id`),
  KEY `from_region` (`from_region`),
  KEY `to_region` (`to_region`),
  KEY `deleted` (`deleted`),
  KEY `Delivered` (`delivered`),
  KEY `owner` (`owner`),
  KEY `b_CustomerId` (`b_CustomerId`),
  KEY `co_id` (`co_id`),
  KEY `co_id-p_name` (`co_id`,`p_name`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

我知道我可以在 p_name、p_street_address、p_city、p_state、p_zip、p_non_us_address 和 p_contact 上创建一些额外的索引，但这只是搜索上车地点。还有一个可以搜索的交付和计费位置。到我为所有这些插入添加索引时，速度会大大降低。是否有更好的方法可以构建此查询以提高其效率？分开查询？子查询？也许甚至有一种方法可以创建一个仅用于搜索的单独表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T16:46:45.333

我最终添加了这些索引：

```
ALTER TABLE `orders` ADD FULLTEXT p_fulltext_idx (`p_name`,`p_street_address`,`p_city`,`p_state`,`p_zip`,`p_non_us_address`,`p_contact`);
ALTER TABLE `orders` ADD FULLTEXT d_fulltext_idx (`d_name`,`d_street_address`,`d_city`,`d_state`,`d_zip`,`d_non_us_address`,`d_contact`);
ALTER TABLE `orders` ADD FULLTEXT b_fulltext_idx (`b_name`,`b_street_address`,`b_city`,`b_state`,`b_zip`,`b_non_us_address`,`b_contact`); 
```

我还更改了查询以使用：

```
MATCH(`p_name`, `p_street_address`, `p_city`, `p_state`, `p_zip`, `p_non_us_address`, `p_contact`) AGAINST('search') 
```

我正在等待在它上线之前看看这会如何影响写入，但搜索速度要快得多。一旦全部推出，我会尽量记住在这里发帖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:36:22.177

通常看到诸如`%search%`意味着*无法*优化查询之类的东西。MySQL 的内置索引功能非常适用于`search%`它可以快速查找的地方。前面有通配符的任何东西都意味着它必须单独测试每条记录，这可能非常慢。

如果要进行全文搜索，您可能应该使用`FULLTEXT`索引类型。多年来，这一直适用于危险的易碎 MyISAM 表类型，但 MySQL 5.6 在 InnoDB 上包含对此的支持。

这些列上的全文索引将有很大帮助，但您需要使用全文搜索`MATCH`命令而不是`LIKE`.

# robocopy - Robocopy % 登录目标文件夹路径

> ID：13628379
> 
> 赞同：1
> 
> 时间：2012-11-29T14:51:57.903
> 
> 标签：robocopy

我的目标文件夹路径中有 \E%3A\，我想在其中复制文件，但是在运行此文件时，文件被复制到新文件夹 \EA\ - 所以位置不正确。有什么解决办法吗？我正在不同的服务器上制作副本。

提前致谢

先生

# android - 带有 BETWEEN 的 Sql 语句 - 它有什么问题？

> ID：13628382
> 
> 赞同：0
> 
> 时间：2012-11-29T14:52:16.173
> 
> 标签：android, sqlite

空（不为空！）我想这样创建 sql 语句：

```
SELECT * FROM table WHERE date BETWEEN ? AND ? ORDER BY date ASC LIMIT 1 
```

我在数据库中有一个 sql ^

```
 Cursor cursor = context.getContentResolver().query(
                    URI, 
                    new String[] { col_id, col_2,DATE }, 
                    DATE + " BETWEEN ? AND ?" , 
                    new String[] {dateAsString, stopDate)} ,
                    DATE + " ASC LIMIT 1");

        cursor = database.query(
                table, projection, 
                selection, selectionArgs, 
                null, null, sortOrder); 
```

Sql 是通过 cursor 传递的，是 null。我将数据库复制到 sd 卡并通过`SQLiteManager`插件查看它到 FF -0 所有数据都存在并且上面的语句在控制台中工作，所以我的 sql 语句出现了一些问题。

你能告诉我这是错的吗？

**更新**扩展问题

我存储了一些数据，其中的日期列保存为：

1.  2012-11-30 09:12:29.392 哪个模式 yyyy-MM-dd HH:mm:sS
2.  将其转换为 long 并将其保存为我表中的 TEXT 类型的列
3.  所以我得到了类似的东西 1354197364633

我想在两个值之间获取数据库中哪个日期的行：

```
database.rawQuery("SELECT * FROM Track WHERE Date BETWEEN ? AND ?", selectionArgs); 
```

但我没有成功。现在我知道这不适用于任何数据库，但没有解决方案。你能建议我如何解决我的问题吗？

我尝试使用下面的解决方案。所以在光标中我得到这个查询：

```
SQLiteQuery: SELECT * FROM Track WHERE Date BETWEEN CAST(? AS INT) AND CAST(? AS INT) 
```

在 mBindArgs 中使用此参数：

```
{1=1354248261841, 2=1354262663195} 
```

我检查轨道中的日期值，它位于它们之间，但光标仍然返回空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T09:35:31.210

Android`rawQuery`获取`String`参数数组，并将它们作为字符串传递给数据库，因此您的`Date`列中的值将与两个字符串进行比较。

如果您`yyyy-mm-dd...`在数据库中使用了字符串，它就会起作用。

您可以使用如下查询将参数强制回整数：

```
SELECT * FROM Track WHERE Date BETWEEN CAST(? AS INT) AND CAST(? AS INT) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T06:27:24.550

原因是我的应用程序的逻辑问题：在对数据库的请求之间的某个帧中，这些行已经更新，所以我没有得到我的日期。

# ios - Storyboard 无法实例化名为 UIStoryboardUnwindSegueTemplate 的类崩溃

> ID：13628383
> 
> 赞同：4
> 
> 时间：2012-11-29T14:52:20.180
> 
> 标签：ios, ios5, uistoryboard, uistoryboardsegue

我刚刚完成了 Storyboard 上的 Apple 教程，并在运行 iOS 5.1.1 的 iPhone 4 上运行了该应用程序。

在模拟器上，当我按下添加按钮时，我得到从底部向上滑动的模态视图，没有崩溃。我可以输入数据，点击完成按钮并显示我的新条目。

在我的 iPhone 4 上执行相同的操作时，点击添加按钮会导致应用程序崩溃，说：

> ***由于未捕获的异常“NSInvalidUnarchiveOperationException”而终止应用程序，原因：“无法实例化名为 UIStoryboardUnwindSegueTemplate 的类”

这感觉像是一个常见问题，但没有谷歌结果与我得到的错误相匹配。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T15:47:54.600

在您的设备上，您说您正在运行 ios 5.1.1。unwind segue 是 ios 6 的一部分，不适用于 ios 5。

要让 ios 5 关闭模态视图控制器，您需要使用以下方法：

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

您应该将此添加到教程中关闭视图的方法中。如果您有一个按钮设置来执行退出 segue，则通过在界面生成器中删除它来删除 segue 行。

调用上述解除命令的最常见方法是从 IBAction。所以要添加它，只需将一个 UIButton 添加到您的故事板并在其上放置一个名为“dismiss”的标签。如果您知道如何将按钮连接到 IBAction，请执行此操作。如果没有，您可以右键单击该按钮并将连接线拖到您的 .m 文件中。它将提示您输入方法名称。称它为 dismsisView。它将创建方法模板。在模板中，只需添加上面的行。

完全希望你能遵循这一点，这是有道理的。

当然，让它工作的另一种方法是更新你的手机，但我认为你需要一些有关 ios5 的帮助。

祝你好运。

# apache-camel - ServiceMix 上的 HTTP POST/GET

> ID：13628388
> 
> 赞同：0
> 
> 时间：2012-11-29T14:52:24.890
> 
> 标签：apache-camel, httprequest, esb, apache-servicemix

从最广泛的意义上说，我有许多 Web 服务，用户将 HTTP Post 命令发送到这些 Web 服务，并返回 XML 结果。问题是它们都位于不同的 Tomcat 服务器上，使得 URL 完全不同且难以跟踪；并且每个服务的XML结果是不同的格式，需要不同的解析方法。我想利用 ServiceMix 的 NMR 和 Camel 的路由机制将所有这些 HTTP 请求发送到一个源，并让它在发送回之前解析结果。我有骆驼路由机制工作，但现在它是另一个 WAR 文件，它位于另一个 Tomcat 服务器上。我将如何将其迁移到 ServiceMix？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:05:08.463

Apache ServiceMix 可以部署 WAR 应用程序，因此您只需将 .war 文件复制到部署目录即可尝试。

# android - Android：如何获取设备的真实屏幕尺寸？

> ID：13628389
> 
> 赞同：13
> 
> 时间：2012-11-29T14:52:25.953
> 
> 标签：android, resolution

我尝试了不同的方法来获取设备的屏幕尺寸，但它总是返回错误的尺寸（`791x480`而不是`854x480`）。可能是导航栏的原因。我的设备目前正在运行 JellyBean 4.1.1。

我试过了：

```
Display display = getWindowManager().getDefaultDisplay();  
Point size = new Point();
display.getSize(size);
OpenGLRenderer.widthScreen = size.x;
OpenGLRenderer.heightScreen = size.y; 
```

和：

```
DisplayMetrics dm = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(dm);
String resolution = dm.widthPixels + "x" + dm.heightPixels; 
```

我正在使用以下代码使应用程序全屏显示：

```
setContentView(mGLSurfaceView);
mGLSurfaceView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_HIDE_NAVIGATION); 
```

我注意到在 logcat 中，返回了正确的大小：

```
01-01 03:05:06.967: I/InputReader(1961): 
    Device reconfigured: id=8, name='cyttsp-spi', 
    surface size is now 480x854, mode is 1 
```

在我的`AndroidManifest`：

```
uses-sdk android:minSdkVersion="8" android:targetSdkVersion="16" 
```

我用了：

*   [获得冰淇淋三明治的真实屏幕分辨率](https://stackoverflow.com/questions/8566322/get-the-real-screen-resolution-on-ice-cream-sandwich)
*   [HTC Sensation 真实分辨率](https://stackoverflow.com/questions/11824193/htc-sensation-real-resolution)
*   [以像素为单位获取屏幕尺寸](https://stackoverflow.com/questions/1016896/android-how-to-get-screen-dimensions)

为什么我无法获得实际尺寸 ( `480x854`)？或者如何使用“设备重新配置”返回的表面？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-29T16:00:43.137

试着打电话

```
 display.getRealSize(); 
```

**免责声明：** 我没有意识到这一点，但这仅适用于 API 17（Android 4.2/JellyBean）及更高版本。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-29T10:58:42.450

尝试这个

```
 final DisplayMetrics metrics = new DisplayMetrics(); 
    Display display = getWindowManager().getDefaultDisplay();     
    Method mGetRawH = null,mGetRawW = null;

try {

    // For JellyBeans and onward
    if(android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.JELLY_BEAN){

        display.getRealMetrics(metrics);
        realWidth = metrics.widthPixels;
        realHeight = metrics.heightPixels;
    }
    else{
    // Below Jellybeans you can use reflection method 

        mGetRawH = Display.class.getMethod("getRawHeight");
        mGetRawW = Display.class.getMethod("getRawWidth");

        try {
            realWidth = (Integer) mGetRawW.invoke(display);
            realHeight = (Integer) mGetRawH.invoke(display);
        } catch (IllegalArgumentException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (InvocationTargetException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T19:57:18.430

我在 Android 3.2 平板电脑上遇到了同样的问题。我测试了 getRealSize 和 getDisplayMetrics。预计它们会崩溃，因为它们应该在 API 17 上可用。但奇怪的是 getDisplayMetrics 不会在我的 3.2 上崩溃并返回正确的尺寸。getRealSize 崩溃。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-22T08:27:31.797

如果您想在活动中获取大小，可以通过以下代码进行。

```
findViewById(android.R.id.content).getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            View view =  findViewById(android.R.id.content);
            Log.e("test", "root view height is " + view.getHeight());

        }
    }); 
```

# javascript - 如何从该字符串中提取 ID？

> ID：13628392
> 
> 赞同：1
> 
> 时间：2012-11-29T14:52:39.193
> 
> 标签：javascript, javascript-events

我正在使用 TableDnD jquery 插件使表格行可排序（http://www.isocra.com/2008/02/table-drag-and-drop-jquery-plugin/）。使用 FireFox，我使用了 console.log(row) 来查看 row 的值是 onDrop。在这样做的过程中，FF 吐出了这个：

```
<tr id="row_2" class="" valign="top" style="cursor: move;"> 
```

如何从该字符串中提取 id，或者更重要的是，当删除行时，我真的只需要数字（本例中为 2）。最终目标是，我可以向用户显示排序已更新的消息，并且我宁愿不使用警报框，因为这样用户必须为每个丢弃的项目关闭它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:07:41.623

考虑使用`data-`-prefixed [HTML5 属性](http://www.w3.org/TR/html5/global-attributes.html#embedding-custom-non-visible-data-with-the-data-%2a-attributes)：

```
<tr data-id="2"></tr> 
```

然后通过以下方式访问它`getAttribute()`：

```
var id = tr.getAttribute('data-id'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:57:27.367

应该能够执行以下操作：

```
row.id.match(/\d+$/)[0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T14:57:34.920

假设您在名为 tr 的变量中拥有该行的 html（或实际的 DOM 行对象）：

```
var id = $(tr).attr("id") 
```

另请访问以下 jsFiddle：http: [//jsfiddle.net/JspRR/1/](http://jsfiddle.net/JspRR/1/)

# c# - 如何使用 Twilio 客户端功能令牌将参数传递给 Twilio？

> ID：13628394
> 
> 赞同：0
> 
> 时间：2012-11-29T14:52:40.520
> 
> 标签：c#, javascript, asp.net, twilio

如何将参数传递给由我的页面（即 /twilio/instruction.aspx）生成的 TwiML 代码？我在 /twilio/call.aspx 页面上使用 Twilio Javascript 库并使用以下代码，我能够在说明页面上正确获取第一个参数，但其余两个不可用。

```
function call() {
            // get the phone number to connect the call to                
            params = { "PhoneNumber": $("#number").val(), "clientName": $("clientName").val(), "Address": $("address").val() };
            Twilio.Device.connect(params);
        } 
```

请注意，`Twilio.Device.connect(params);`在 call.aspx 页面上执行指令页面时，Twilio 会自动执行该指令页面。

问候，

塔希尔·艾哈迈德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T17:16:05.720

我有类似的问题。我通过手动对数据进行urlencoding并添加到url来修复它。

如果您有很多参数要传递，而且 call.apx 和 instruction.aspx 在同一台服务器上，我建议您有一个字典并在参数上单独传递密钥，您可以在获取数据时检索数据指令中的键返回.aspx

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-04T23:05:11.633

Twilio 布道者在这里。

你所拥有的对我来说看起来很正确。在您设置为 TwiML 应用程序语音 URL 的 URL 中，您只需检索这些值作为表单参数：

```
request.Form["PhoneNumber"] 
```

希望有帮助。

# mysql - 根据另一个更改mysql中的一个字段

> ID：13628404
> 
> 赞同：0
> 
> 时间：2012-11-29T14:53:09.380
> 
> 标签：mysql, automation

我怎样才能把宏/脚本/自动的东西放在一起，让我可以对我的数据库进行以下更改：

如果第 1 列中的任何单元格是 X，则将第 2 列（在同一行中）的内容更改为 0。如果第 1 列中的单元格不是 X，则保留第 2 列的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T14:54:51.177

这只是一个`UPDATE`带有`WHERE`子句的简单语句。运行一次以更新表中的所有行。

```
UPDATE yourtable SET column2 = 0 WHERE column1 = 'X' 
```

如果您需要在更改为`column2`时自动更新为 0 ，请创建触发器。`column1``X``BEFORE UPDATE`

```
/* DELIMITER has been set to $$ in your client */
CREATE TRIGGER column1_is_X BEFORE UPDATE ON yourtable
FOR EACH ROW
BEGIN
  IF NEW.column1 = 'X' THEN
    SET NEW.column2 = 0;
  END IF;
END$$
/* Then you should set the DELIMITER back to ; */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T14:57:46.610

您可以执行以下操作：

```
UPDATE table SET column2 = IF (column1 = 'X', 0, column2) 
```

# javascript - 通过innerhtml分配ID时，jquery ui对话框不会打开

> ID：13628407
> 
> 赞同：3
> 
> 时间：2012-11-29T14:53:19.960
> 
> 标签：javascript, html, jquery-ui-dialog, innerhtml

我遇到了一个小问题。这是我在做什么的示例。

```
 htmlValue += '<a href="#" id="shareOpen" style="margin: 0 2px 0 2px; float: left;" 
title="Share File" class="version ui-icon ui-icon-heart"></a>';
 $(modalDivObj).html(htmlValue); 
```

我正在将其写在具有许多其他功能的页面上的循环中。一切都写得很好并且出现了。但是，当我单击`#shareOpen`对话框时不会打开。我尝试对相同的 html 进行硬编码，并且效果很好。问题是当我通过`.html()`它时不会写ID？我不知道。

这是页面上的一些 html 和 jquery。

```
$("#shareFile").dialog({
        autoOpen: false,
        modal: "true",
        show: "blind",
        hide: "explode",
        buttons: {
            "Done": function () {
                $(this).dialog("close");
            }
        }
    });
    $("#shareOpen").click(function () {
        $("#shareFile").dialog("open");
        return false;
    });
 <div id="shareFile"  runat ="server">

 </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T17:47:22.177

从你所说的我认为最有可能的问题是点击事件没有被正确绑定。

尝试使用以下内容而不是您当前的点击来电：

```
$("#files-icons").on("click", "#shareOpen", function () {
    $("#shareFile").dialog("open");
    return false;
}); 
```

这会将事件处理程序绑定到 ID 为“shareOpen”且是#files-icons 子级的任何元素，无论它们何时添加到页面。

我认为问题在于您在页面中尚不存在的元素上绑定了单击处理程序。

# c# - 创建域用户并添加到本地组失败

> ID：13628409
> 
> 赞同：0
> 
> 时间：2012-11-29T14:53:26.987
> 
> 标签：c#, active-directory

我正在尝试创建一个域用户，然后将它们添加到当前机器上的本地组中。每次我在域上调用 add 时都会这样做，我会得到这个`{"A member could not be added to or removed from the local group because the member does not exist.\r\n"}`。但是，我知道用户存在，因为我的测试人员正在查看目录，并且一旦我的创建代码运行，用户就出现了。

我会说，当我将 SID 转换为 NTUser 帐户时，我注意到我最终以 domain\$DDDDD-FAF234AFS 作为名称而不是 domain\test.user。为什么会这样，这可能是我的问题吗？

这是我创建用户的代码：

```
private UserPrincipal CreateNewUser(Section.User.User user, PrincipalContext principal)
    {
        _logger.Debug("User did not exist creating now.");
        UserPrincipal newUser = new UserPrincipal(principal)
            {
                Name = user.UserName.Contains('\\') ? user.UserName.Split('\\')[1] : user.UserName,
                Description = string.IsNullOrEmpty(user.UserDescription) ? "IIS {0} user.".FormatWith(user.UserType) : user.UserDescription,
                UserCannotChangePassword = false,
                PasswordNeverExpires = true,
                PasswordNotRequired = false,
                Enabled = true
            };
        _logger.Debug("User created.");

        _logger.Debug("Setting user password and applying to the system.");
        newUser.SetPassword(user.UserPassword);
        newUser.Save();

        return newUser;
    } 
```

用户只是一个具有用户名、密码和描述的自定义类。principalcontext 是域的有效上下文。

这是我用来将用户添加到本地域的代码：

```
private void AddDomainUserToGroup(Principal groupPrincipal, Principal user, string group)
    {
        using (DirectoryEntry groupEntry = groupPrincipal.GetUnderlyingObject() as DirectoryEntry)
        using (DirectoryEntry userEntry = user.GetUnderlyingObject() as DirectoryEntry)
        {
            NTAccount ntUser = user.Sid.Translate(typeof (NTAccount)) as NTAccount;
            string domain = ntUser.ToString().Split('\\')[0];
            string userPath = string.Format("WinNT://{0}/{1},user", domain, user);

            groupEntry.Invoke("Add", new object[] {userPath});
        }
    } 
```

此外，我从未将用户添加到本地计算机，我只是将它们添加到域中。这可能是我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T14:34:44.533

我想通了，如果其他人有类似的问题，这是我的解决方案。基本上它失败了，因为一旦我将 samAccountname 设置为我的用户名，我就从未设置过它，一切都很完美。

# javascript - 将模型的属性传递给 collectionOptions

> ID：13628410
> 
> 赞同：0
> 
> 时间：2012-11-29T14:53:30.023
> 
> 标签：javascript, backbone.js, backbone-relational

如何将模型的属性传递给 collectionOptions？当我尝试像那样传递 param0 时，然后`this`被引用`window`到`MyModel`实例：

```
var MyModel = Backbone.RelationalModel.extend({
    defaults: {
        param0: null,
    },
    relations: [
        {
            type: Backbone.HasMany,
            key: 'others',
            relatedModel: 'OtherModel',
            collectionType: 'OtherModelCollection',
            collectionOptions: {param0: this.get('param0')}
        }
    ]
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:31:45.203

来自[精美手册](https://github.com/PaulUithol/Backbone-relational#collectionoptions)：

> **集合选项**
> 
> 值：一个选项散列或一个接受`Backbone.Relational`模型实例并返回选项散列的函数。

所以只需使用函数而不是对象文字：

```
collectionOptions: function(m) {
    return {
        param0: m.get('param0')
    };
} 
```

例如，这种“对象或函数”模式在 Backbone 世界中相当普遍，[`Model#defaults`](http://backbonejs.org/#Model-defaults)其行为方式相同。

# python - 在 CGI python 表单中引入工具提示

> ID：13628411
> 
> 赞同：0
> 
> 时间：2012-11-29T14:53:32.677
> 
> 标签：python, cgi

我在 python 中有一个 CGI 表单，我想在这个表单中引入一个工具提示，其中包含当该字段聚焦时必须写入该字段的值的指示。

我的表格如下：

```
print '<form name="input" action="operation.py" method="get">'
print '<input type="submit" value="Submit">'
print '<table>'
print '<tr><td>%s</td><td><input type="text" name=%s size="100" value=%s></td></tr>' %('test','test', 'test')
print '<tr><td>&nbsp</td><td></td></tr>'
print '</table>'

print '<input type="submit" value="Submit"></form>'
print '</body></html>' 
```

那么如何为现场测试引入工具提示？

谢谢伊斯梅尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:03:11.640

[使用这里](http://www.w3schools.com/tags/att_global_title.asp)解释的 title 属性。

```
<td title="Use this for something"> 
```

# java - 字符串比较 w/if 语句

> ID：13628414
> 
> 赞同：0
> 
> 时间：2012-11-29T14:53:38.167
> 
> 标签：java, android, authentication, login, base64

我正在尝试将 EditText 字段中的字符串与共享首选项中的字符串进行比较。如果字符串匹配一个新的活动开始。Sharedpreferenced 中的字符串使用 Base64 编码。我试图在解码后将编辑文本字符串与 sharedpreferences 字符串进行比较，但无法正确编码。我怎样才能正确编码。例子表示赞赏。我的比较器在第 77 和 78 行

```
 44\. public void onClick(View arg0) {
 45\.    
 46\.   sp=this.getSharedPreferences("AccessApp", MODE_WORLD_READABLE);
 47\.  
 48\.   
 49\.   
 50\.   
 51\.   byte[] key = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 0, 1, 2, 3, 4, 5 };
 52\.   
 53\.   
 54\.   try {
 55\.    user = sp.getString("USERNAME_KEY", null);
 56\.        String decryptedUser = decrypt(user, key);  
 57\.        
 58\.         
 59\.   }
 60\.  catch (Exception e) {
 61\.   // TODO Auto-generated catch block
 62\.   e.printStackTrace();
 63\.  }   
 64\.  try {
 65\.       pass = sp.getString("PASSWORD_KEY", null);
 66\.       String decryptedPass = decrypt(pass, key);  
 67\.       
 68\.        
 69.
 70\. } catch (Exception e) {
 71\.   // TODO Auto-generated catch block
 72\.   e.printStackTrace();
 73\. }
 74\.  
 75\.  if(lBttn.equals(arg0)){
 76\.    
 77\.     if((uname.getText().toString().equals(decryptedUser))  && 
 78\.       (pword.getText().toString().equals(decryptedPass)))
 79\.      
 80\.           {
 81\.         Toast.makeText(this, "You are Logged In", 20000).show();
 82\.                
 83\.              Intent intent;
 84\.               intent=new Intent(this,details.class);
 85\.               startActivity(intent);
 86\.             flag=1;
 87\.           } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T13:20:16.097

`decryptedUser` 和各有2 份`decryptedPass`。一对在 try 块内，另一对作为成员。它们在第 77 行始终为空，因为您将解密后的值分配给您从未使用过的不同变量（第 56 和 66 行）。将整个代码移动到单个 try 块中。

```
public void onClick(View arg0) {
    ...
    ...
    String decryptedUser;
    String decryptedPass;
    try {
        user = sp.getString("USERNAME_KEY", null);
        decryptedUser = decrypt(user, key);  
        pass = sp.getString("PASSWORD_KEY", null);
        decryptedPass = decrypt(pass, key);
        /* Your if statements follow from here */
        ...
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }   

} 
```

# qt - QSelectionModel 索引如何工作？

> ID：13628415
> 
> 赞同：2
> 
> 时间：2012-11-29T14:53:38.833
> 
> 标签：qt, pyqt, pyqt4

我有一个使用代理模型的列表视图和以下代码：

```
lastCurrRow = self.listView.selectionModel().currentIndex().row() #last row currently selected
last = self.proxyModel.rowCount() - 1                             #last row in view
print("lastCurrRow = %d\nlast = %d" %(lastCurrRow, last)) 
```

当列表视图中的最后一项被选中时，我得到如下输出

```
lastCurrRow = 100
last = 100 
```

但是如果我选择任何其他行，比如倒数第二行，我会得到类似的输出

```
lastCurrRow = 96
last = 100 
```

我应该在某处寻找我的代码中的错误还是这正常？QSelectionModel 中的 QModelIndexes 是否与代理模型中的 QModelIndexes 本质上不同？我已经成功地使用了这些代码行而没有实际检查它们返回的内容，但是现在我尝试做一些稍微不同的事情并发现了这种奇怪之处。

注意：我不是在寻求代码方面的帮助，我只是想更好地了解 QSelectionModel 的工作原理。

更新：原来我实际上并不需要这些行来做我想做的事情。我仍然想知道我得到的输出背后的原因。

# javascript - AS3 Flash - 通过 ExternalInterface 渲染 html

> ID：13628420
> 
> 赞同：9
> 
> 时间：2012-11-29T14:53:56.340
> 
> 标签：javascript, actionscript-3, encoding, cjk, externalinterface

这是我关于 Stack Overflow 的第一个问题。这不是我第一次想写一个，但通常我会使用搜索栏找到解决方案，这次我没有。我要解决的问题有点复杂，所以我会尽量做到彻底。

基本上，我们正在将中国支付添加到现有的 Flash 电子商务中。整个网站在 AS3 中，使用 SWFObject 嵌入，已经使用 ExternalInterface 来处理其他事情。

这种新的中国支付方式有点过时，所以他们处理支付的方式很奇怪。一旦我们向他们的服务器发送了包含所有订单详细信息的 POST，他们就会以 HTML 页面进行响应。我的问题是渲染这个页面，考虑到我在 Flash 中收到它。

我目前正在尝试的解决方案部分有效，这意味着我可以看到页面，但是应该在页面中的汉字渲染得很糟糕。我看到的不是中文字符，而是奇怪的字符，所以我猜测当我将 HTML 从 Flash 传递到 Javascript 时一定存在编码问题。这就是我的做法：

AS3：

```
//extract html page from response
var newHTML:String = e.currentTarget.data;
//trim whitespace to avoid javascript error
newHTML = newHTML.replace(/\n/g, '');
newHTML = newHTML.split("\r").join("");

if(ExternalInterface.available)
  ExternalInterface.call("chinesePayment('"+newHTML+"')");
else
  trace("External interface error"); 
```

Javascript：

```
function chinesePayment(param) {
  var newWindow = window.open();
  //var unescaped = unescape(param);
  newWindow.document.write(param);
} 
```

我试过搞乱 unescape、escape、URIencoding 但没有任何成功，所以我真的希望你能在这里帮助我！

谢谢，多梅尼科

编辑：

我只想提一下，我从他们的服务器收到了正确的 HTML 页面。我尝试在本地保存页面，直接从服务器响应中复制 HTML 代码，并且页面视图正确。这意味着在将页面从 AS3 传递到 Javascript 的过程中肯定有问题。

**EDIT2！重要：**

我已经意识到问题在于弹出编码。当我从弹出窗口复制 HTML 时，将其粘贴到编辑器中并保存，我可以正确查看 HTML。似乎弹出窗口不考虑 gbk 编码。我现在正在寻找解决这个问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:42:34.253

我终于找到了解决办法！！！！

基本上我必须在 Flash 中渲染汉字，这样当我将它们传递给 javascript 时，它们就已经被编码了。所以首先我必须将 URLLoaderDataFormat 的类型更改为 BINARY，以便我收到一个 byteArray：

```
my_loader.dataFormat = URLLoaderDataFormat.BINARY; 
```

收到回复后，我以这种方式修改了代码：

```
 var bytes:ByteArray = e.currentTarget.data;
        var newHTML:String = bytes.readMultiByte(bytes.length,"gb2312");
        //trim whitespace to avoid javascript error
        newHTML = newHTML.replace(/\n/g, '');
        newHTML = newHTML.split("\r").join("");

        if(ExternalInterface.available)
            ExternalInterface.call("chinesePayment('"+newHTML+"')");
        else
            trace("External interface error"); 
```

如您所见，多亏了一个特定的 byteArray 函数，我可以使用首选字符集读取响应，现在它可以工作了！

javascript 保持不变，没有 unescape 或类似的东西。通过这种方式，javascript 函数接收到一个包含中文字符的字符串，而不是等效的 utf 字符。

感谢大家，您帮助我找到了解决方案！

# r - 当前最好的基于 R 的大数据设置是什么？

> ID：13628422
> 
> 赞同：0
> 
> 时间：2012-11-29T14:54:00.147
> 
> 标签：r, amazon-web-services

我处于“中等”和“大”数据之间的那个空间。我有 # 个挑战：

*   从服务器到本地机器的高效下载/ IO。

我的数据存储在亚马逊网络服务器上，目前我每天都下载整个数据集（变化代表 <5%）。

*   在单台计算机上处​​理大型数据集，这样内存就不是问题了。

我想在我的笔记本电脑和台式电脑上拥有相同的开发体验。我在 AWS 上使用过 RStudio 的服务器应用程序，但应用程序本身有点慢，我更喜欢在本地使用 RStudio。

在这一点上，我并没有受到 CPU 能力的严重限制，主要是下载/IO 和内存。我应该学习什么来使这个过程更有效率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:38:48.950

您没有提及您的实际计算是什么，因此很难提供好的建议，但对于内存不足的解决方案，请考虑：

1.  将问题明确拆分为更小的问题（为每个“块”创建文件）
2.  流式解决方案——一次可以处理几行数据
3.  对于 R 中真正的内存不足工作，ff 和 BigMemory 包。
4.  并行包等并行计算解决方案（不直接解决内存问题）

请记住，与内存解决方案相比，内存不足的解决方案可能会慢很多，并且需要更多的专业工作，因此第一步是尽可能购买更多的 RAM，特别是因为您是从小型机器开始的。如今，拥有> 256G RAM 的机器并不难买到。

对于数据传输，一定要尽可能使用增量解决方案，例如 rsync 并且在有意义的情况下（对数据集进行小的更改）——听起来这与您的用例相匹配。

# vb.net - 当 COM 属性不正确/丢失时，编译器不会出错？

> ID：13628427
> 
> 赞同：4
> 
> 时间：2012-11-29T14:54:08.743
> 
> 标签：vb.net, compiler-errors, vb6, com-interop

我有一个当前正在编译的 VB6 项目，即使我正在访问一个不存在的属性。

代码看起来有点像这样：

```
Public vizSvrEmp As VizualServer.Employees
Set vizSvrEmp = New VizualServer.Employees

Fn = FreeFile
Open vizInfo.Root & "FILE.DAT" For Random As #Fn Len = RecLen
Do While Not EOF(Fn)
    Get #Fn, , ClkRecord
    With vizSvrEmp
        Index = .Add(ClkRecord.No)
        .NotAvailable(Index) = ClkRecord.NotAvailable
        .Bananas(Index) = ClkRecord.Start
        'Plus lots more properties
    End With
Loop 
```

该`Bananas`属性在对象中不存在，但仍可编译。我的`vizSvrEmp`对象是一个 .NET COM 互操作 DLL 并且是早期绑定的，如果我在其中键入点，我会正确获得 Intellisense（它不*显示*Bananas）

我尝试删除`With`但行为相同

我如何确保编译器能够识别这些错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T14:43:21.073

我知道你已经在 Hans 的帮助下解决了这个问题，但为了完整起见，使用的替代方法`ClassInterface(ClassInterfaceType.AutoDual)`是使用`ClassInterface(ClassInterfaceType.None)`然后实现一个用`InterfaceType(ComInterfaceType.InterfaceIsDual)>`.

它需要更多的工作，但可以让您完全控制界面 GUID。AutoDual 将在您编译时自动为接口生成唯一的 GUID，这样可以节省时间，但您无法控制它们。

在使用中，这看起来像这样：

```
<ComVisible(True), _
Guid(Guids.IEmployeeGuid), _
InterfaceType(ComInterfaceType.InterfaceIsDual)> _
Public Interface IEmployee 

   <DispIdAttribute(1)> _
   ReadOnly Property FirstName() As String

   <DispIdAttribute(2)> _
   ReadOnly Property LastName() As String

   <DispIdAttribute(3)> _
   Function EtcEtc(ByVal arg As String) As Boolean

End Interface

<ComVisible(True), _
Guid(Guids.EmployeeGuid), _
ClassInterface(ClassInterfaceType.None)> _
Public NotInheritable Class Employee
   Implements IEmployee 

   Public ReadOnly Property FirstName() As String Implements IEmployee.FirstName
      Get
         Return "Santa"
      End Get
   End Function

   'etc, etc

End Class 
```

请注意 GUID 是如何声明的。我发现创建一个帮助类来整合 GUID 并提供 Intellisense 效果很好：

```
Friend Class Guids
   Public Const AssemblyGuid As String = "BEFFC920-75D2-4e59-BE49-531EEAE35534"   
   Public Const IEmployeeGuid As String = "EF0FF26B-29EB-4d0a-A7E1-687370C58F3C"
   Public Const EmployeeGuid As String = "DE01FFF0-F9CB-42a9-8EC3-4967B451DE40"
End Class 
```

最后，我在装配级别使用这些：

```
'The following GUID is for the ID of the typelib if this project is exposed to COM
<Assembly: Guid(Guids.AssemblyGuid)> 

'NOTE:  The following attribute explicitly hides the classes, methods, etc in 
'        this assembly from being exported to a TypeLib.  We can then explicitly 
'        expose just the ones we need to on a case-by-case basis.
<Assembly: ComVisible(False)> 
<Assembly: ClassInterface(ClassInterfaceType.None)> 
```

# android - 带有复选框和按钮的Listview在android中使用数组适配器

> ID：13628431
> 
> 赞同：1
> 
> 时间：2012-11-29T14:54:18.583
> 
> 标签：android

我正在使用自定义列表视图来显示来自 sqlite 数据库的数据。我的列表项有文本视图、按钮、复选框。请向我推荐将执行以下任务的适配器，

1.  所有字符串值都在 equalesnt 文本视图中更新
2.  根据布尔值，复选框应选中/取消选中。
3.  当我单击按钮时，它会将我带到新屏幕并传递按钮的 ID。

    请建议我现在该怎么做。也欢迎新的想法。

    按照我的代码。

    ```
     public class GuestListAdapter extends BaseAdapter implements OnClickListener{
            Context context;
            ArrayList<String> arrayListFirstName;
            ArrayList<String> arrayListLastName;
            ArrayList<String> arrayListGuests;
            ArrayList<String> arrayCustomOne;
            ArrayList<String> arrTicketId;
            private ArrayList<Boolean> checks=new ArrayList<Boolean>();
            public GuestListAdapter(Context mcontext, ArrayList<String> arrListFN,
                    ArrayList<String> arrListLN, ArrayList<String> arrListGuest,
                    ArrayList<String> arrTicketID,ArrayList<String> arrCustOne) {
                arrayListFirstName = arrListFN;
                arrayListLastName = arrListLN;
                arrayListGuests = arrListGuest;
                arrayCustomOne = arrCustOne;
                context = mcontext;

                for (int i = 0; i < arrayListFirstName.size(); i++) {
                    checks.add(i, false);
                }
            }

            @Override
            public int getCount() {
                // TODO Auto-generated method stub
                return arrayListFirstName.size();
            }

            @Override
            public Object getItem(int position) {
                // TODO Auto-generated method stub
                return arrayListFirstName.get(position);
            }

            @Override
            public long getItemId(int position) {
                // TODO Auto-generated method stub
                return position;
            }

            @Override
            public View getView(int position, View view, ViewGroup parent) {
                // TODO Auto-generated method stub
                if (view == null) {
                    LayoutInflater inflater = LayoutInflater.from(parent.getContext());
                    view = inflater.inflate(R.layout.guest_list_item, parent, false);
                }

                final String dataModel = (String) arrayListFirstName.get(position);

                TextView txtFirstName = (TextView) view
                        .findViewById(R.id.txt_firstname);
                txtFirstName.setText(arrayListFirstName.get(position));
                TextView txtLastName = (TextView) view.findViewById(R.id.txt_lastname);
                txtLastName.setText(arrayListLastName.get(position));
                TextView txtGuestCount = (TextView) view
                        .findViewById(R.id.txt_guest_count);
                txtGuestCount.setText(arrayListGuests.get(position));
                Button btnInfo = (Button) view.findViewById(R.id.btn_info);
                // btnInfo.setId(position);
                CheckBox checkBoxCheckins = (CheckBox) view
                        .findViewById(R.id.checkBoxIsCheckedIn);
                checkBoxCheckins.setTag(Integer.valueOf(position));

                btnInfo.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        // int id = Integer.parseInt(v.getTag().toString());

                        // Log.d("", "Clicked ID "+id);
                        Intent intent = new Intent(context, InfoScreen.class);
                        context.startActivity(intent);
                        System.out.println("Adap button **********");

                    }
                });
                checkBoxCheckins
                        .setOnCheckedChangeListener(new OnCheckedChangeListener() {

                            @Override
                            public void onCheckedChanged(CompoundButton buttonView,
                                    boolean isChecked) {
                                System.out.println("Adap checked **********");
                                Integer integ = (Integer)buttonView.getTag();

                                   checks.set(integ.intValue(), false);
                            }
                        });
                if (checks.get(position)) {
                    checkBoxCheckins.setChecked(checks.get(position));
                      // do some stuff if wanted..
                    } else {
                        checkBoxCheckins.setChecked(checks.get(position));
                      // do some stuff if wanted..
                    }
                return view;
            }

            @Override
            public void onClick(View view) {
                // TODO Auto-generated method stub
                 Integer index = (Integer)view.getTag();
                 boolean state = checks.get(index.intValue());

                 checks.set(index.intValue(), !state);
            }

        }

    this is my setter class

    public class GuestList {

        String mFirstName;
        String mLastName;
        String mTicketI;
        String mGuestCount;

        public String getmFirstName() {
            return mFirstName;
        }

        public void setmFirstName(String mFirstName) {
            this.mFirstName = mFirstName;
        }

        public String getmLastName() {
            return mLastName;
        }

        public void setmLastName(String mLastName) {
            this.mLastName = mLastName;
        }

        public String getmTicketI() {
            return mTicketI;
        }

        public void setmTicketI(String mTicketI) {
            this.mTicketI = mTicketI;
        }

        public String getmGuestCount() {
            return mGuestCount;
        }

        public void setmGuestCount(String mGuestCount) {
            this.mGuestCount = mGuestCount;
        }

    } 
    ```

    在像这样发送arraylist的listview类中，

    ```
    cursorAdapter = new GuestListAdapter(GuestListScreen.this,
                arrFirstName, arrLastName, arrGuests, arrTicketId, arrCustomOne);
        listViewGuests.setAdapter(cursorAdapter); 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:57:24.500

您应该为此使用 BaseAdapter。创建一个名为 MyAdapter 的类并扩展 BaseAdater。在该类中覆盖所需的方法。并在 Class 的 getView 方法中膨胀您的 xml 文件并根据位置放置数据。

如果值来自数据库，则获取 Cursor 并对其进行迭代并获得所需的值。

希望这可以帮助

# android - android记录器启动无效状态4

> ID：13628432
> 
> 赞同：1
> 
> 时间：2012-11-29T14:54:19.087
> 
> 标签：android, audio, recorder

我不知道为什么，但是 start() 方法会引发错误并使应用程序崩溃：

```
public class Noise extends Activity{
@Override
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.noise);
    MediaRecorder recorder=new MediaRecorder();
    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
    try{
        recorder.prepare();
    }catch(IllegalStateException e){
        Log.d("Error",e.toString());
        e.printStackTrace();
    }catch(IOException e){
        Log.d("Error",e.toString());
        e.printStackTrace();
    }
    recorder.start();
    Timer timer=new Timer();
    timer.scheduleAtFixedRate(new RecorderTask(recorder), 0, 500);
}
private class RecorderTask extends TimerTask{
    TextView risultato=(TextView) findViewById(R.id.risultato_recorder);
    private MediaRecorder recorder;
    public RecorderTask(MediaRecorder recorder){
        this.recorder = recorder;
    }
    public void run(){
        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                risultato.setText("" + recorder.getMaxAmplitude());
            }
        });
    }
}
} 
```

如果我删除准备和开始，它可以工作，但在文本视图中总是返回 0。任何人都可以帮助我吗？这件事让我发疯

这是日志猫：[https ://dl.dropbox.com/u/16047047/log.txt](https://dl.dropbox.com/u/16047047/log.txt)

在电话中，它崩溃了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:10:19.217

看来你错过了`recorder.setOutputFile(PATH_NAME);`查看文档[`MediaRecorder`](http://developer.android.com/reference/android/media/MediaRecorder.html)

至少，这是堆栈跟踪告诉我们的：

```
11-29 16:04:08.933: W/System.err(9323): java.io.IOException: No valid output file 
```

这是相关的源代码`MediaRecorder.prepare()`：

```
public void prepare() throws IllegalStateException, IOException
{
    if (mPath != null) {
        FileOutputStream fos = new FileOutputStream(mPath);
        try {
            _setOutputFile(fos.getFD(), 0, 0);
        } finally {
            fos.close();
        }
    } else if (mFd != null) {
        _setOutputFile(mFd, 0, 0);
    } else {
        throw new IOException("No valid output file");
    }
    _prepare();
} 
```

（您可以在 grepcode 上[阅读](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/media/MediaRecorder.java#453)`File`）如果object 和`FileDescriptor`are都将引发异常`null`。所以我认为你不能`MediaRecorder`在不提供文件的情况下使用。您可以尝试棘手的`/dev/null`但我不知道它是否有效，并且现在无法测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T14:59:52.363

看起来您调用`start()`了两次，一次在 Activity`onCreate()`中，一次在 RecorderTask 构造函数中。你应该只需要一个。如果不知道它是*如何*崩溃的——就像堆栈跟踪一样——很难知道更多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-14T23:30:11.333

`mediaRecoder.setOutputFormat(value)`检查此帖子[https://stackoverflow.com/a/372​​32920/3533092](https://stackoverflow.com/a/37232920/3533092)可能会发生类似问题

# php - PHP、__get() 方法和数组参数

> ID：13628435
> 
> 赞同：2
> 
> 时间：2012-11-29T14:54:33.220
> 
> 标签：php

我想达到这个效果：

```
class Foo {
   public $bar; // array('aaa' => array('bbb' => 'ccc'))
   public function __get($value)
   {
      return $this->bar[...][key($value)]; // don't know what to implement here
   }
}

$obj = new Foo();
$obj->aaa['bbb']; // should return 'ccc' 
```

这可能吗？我怎样才能做到这一点？

如果我想以这种方式调用它，如何从 __get() 方法内部的 Foo::$bar 数组中获取 'ccc' 值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T15:03:19.007

尝试这个：

```
<?php
class Foo {
    public $bar = array('aaa' => array('bbb' => 'ccc'));
    public function __get($value) {
        return $this->bar[$value];
    }
}

$obj = new Foo();
echo $obj->aaa['bbb']; 
```

将返回：

```
ccc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:03:54.337

```
<?php

class Foo 
{
    // note you had: array('aaa' => array('bbb', 'ccc'));
    // so `bbb` and `ccc` were values, not keys.
    public $bar = array('aaa' => array('bbb' => 'ccc'));

    public function __get($name)
    {
        return $this->bar[$name];
    }
}

$obj = new Foo();
echo $obj->aaa['bbb']; // should return 'ccc'

// output: ccc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T14:58:39.213

```
class Foo {
   public $bar = array('aaa' => array('bbb' => 'ccc'));
   public function __get($value)
   {
      return $this->bar[$value];
   }
}

$obj = new Foo();
var_dump($obj->aaa['bbb']); 
```

编辑后得到你想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T15:05:51.920

不确定你是如何表达这个问题的，但我认为这可能是你要找的？

```
<? 
class Foo {
    function __construct(){
        $bar = array(
            'aaa' => array('bbb' => 'ccc'),
            'zzz' => array('yyy' => 'xxx'),
        );
        foreach($bar as $key => $value){
            $this->{$key} = $value;
        }
    }
    public function __get($value){
        // return $this->bar[...][key($value)]; // don't know what to implement here
    }
}

$obj = new Foo();
echo $obj->aaa['bbb']; // ccc
echo $obj->zzz['yyy']; // xxx 
```

# asp.net - asp.net 中的 Web 服务和应用程序池回收

> ID：13628443
> 
> 赞同：0
> 
> 时间：2012-11-29T14:54:52.460
> 
> 标签：asp.net, web-services, iis, application-pool

我很难在搜索中表达这个问题以获得相关答案，所以我在这里尝试。我有一个很长的任务，两个应用程序之间的数据同步，其中一个是 asp.net 网站。我想要一个单独的应用程序，它可以批量处理大约 1000 条记录的数据并访问 asp.net 站点的 Web 服务。我只是想知道当我点击这个网络服务并停止我的进程时，应用程序池会回收吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:51:25.980

如果您配置 IIS 以使应用程序池大量回收，则有可能在请求期间进行。IIS 将在回收之前完成请求。如果您不想回收应用程序池，则应更改该设置。如果请求需要很长时间，您将获得超时，但您可以更改这些超时设置（具体取决于您使用的是 WCF 还是 ASMX Web 服务）。

# django - Django Haystack：只更新一个字段

> ID：13628450
> 
> 赞同：0
> 
> 时间：2012-11-29T14:55:14.123
> 
> 标签：django, list, dictionary, django-haystack

Django Haystack 需要执行

> 更新索引

用新数据更新 solr 索引，所以我一直想知道是否有办法只更新/更改一个字段。

这个字段必须有最新的数据 - 因为它有很多喜欢。有没有办法使用从数据库中检索到的最新值来更新 sqs 字典中喜欢的值。我现在已经制作了一个脚本，但是执行时间太长了：

```
sqs = SearchQuerySet().all()
d = Data.objects.all()

l = []

for i in d:
    l.append((i.id, i.like))

for i in sqs:
    for j,k in d:
        if i.id == j:
           i.like = k 
```

也许有办法加快速度？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:38:58.690

这是使用字典（查找复杂性`O(1)`而不是`O(n)`数组的查找复杂性）`.only`和`.filter`方法的简单优化：

```
d = Data.objects.all().only( "id", "like" )
d = dict( ( o.id, o.like ) for o in d )

sqs = SearchQuerySet().filter( id__in = d.keys( ) ).only( "id", "like" )

for i in sqs:
    i.like = d[ i.id ] 
```

请注意，它会消耗更多内存，因此请确保查询不要太大（如有必要，将此作业拆分为多个作业）。

为了获得更大的性能，您应该直接编写 SQL 脚本并在数据库上运行它。

# php - PHP Regex 获取 url 段

> ID：13628452
> 
> 赞同：3
> 
> 时间：2012-11-29T14:55:16.807
> 
> 标签：php, regex

有人可以帮忙吗？

我想获取 url 的前两个部分，例如 url 看起来像这样

```
/catalog/category-1 
```

或者

```
/catalog/category-1/filter/value 
```

我目前的正则表达式看起来像这样......

```
/(\/catalog\/.*?)\// 
```

这适用于长网址，但不适用于第一个示例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T14:59:37.143

尝试

```
$url = explode('/', trim($url, '/'));
$first_segment = $url[0];
$second_segment = $url[1]; 
```

编辑：正如@Crisp 在评论中指出的那样，为了防止空的first_segment，`trim`你的字符串在你之前`explode`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-29T14:56:31.283

不要使用正则表达式来解析您的 URL。使用内置[`parse_url()`](http://php.net/manual/en/function.parse-url.php)函数。

从该函数获取路径组件后，您可以使用该[`explode()`](http://us3.php.net/manual/en/function.explode.php)函数根据斜杠拆分 URL 的各个部分。

```
<?php

$url = "http://example.com/this/that/other?page=1";

$parts = parse_url($url);

print 'Parts = ';
print_r($parts);

print 'Path = ' . $parts['path'] . "\n";

$path_components = explode( '/', $parts['path'] );
print "Path components = ";
print_r( $path_components );

?> 
```

这给了你这个：

```
Parts = Array
(
    [scheme] => http
    [host] => example.com
    [path] => /this/that/other
    [query] => page=1
)
Path = /this/that/other
Path components = Array
(
    [0] => 
    [1] => this
    [2] => that
    [3] => other
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T15:01:07.830

`Regex`正如其他人所指出的那样，在这种情况下并不是最好的工具，但在这里它正在使用`regex`.

您的问题`regex`是您正在尝试匹配三个`/`，请改用否定：

```
$str1='/catalog/category-1';
$str2='/catalog/category-1/filter/value';

preg_match('#/[^/]*/[^/]*#',$str1,$match);
echo $match[0].;

preg_match('#/[^/]*/[^/]*#',$str2,$match);
echo $match[0]; 
```

输出：

```
/catalog/category-1
/catalog/category-1 
```

解释：

```
/      # Match first /
[^/]*  # Match anything not a /
/      # Match second /
[^/]*  # Match anything not a / 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T14:59:51.040

首先，使用 parse_url 将 url 拆分为主机、端口、路径和查询字符串。

然后，在路径上使用这个正则表达式：

```
<?php
preg_match('#^/([^/]+)/([^/]+)#i', $path, $matches);
?> 
```

# android - 您正在安装包含未签名内容的软件 安装 ADT 插件时

> ID：13628454
> 
> 赞同：0
> 
> 时间：2012-11-29T14:55:18.290
> 
> 标签：android, eclipse

安装 ADT 插件时出现此错误。

![在此处输入图像描述](../Images/a93d69e8a350630c6eb90e6482e8f1bd.png)

我该如何解决这个问题？如果我单击 ok 按钮插件正在安装但是当我创建新的 Eclipse 项目它创建带有空白文件夹的项目时，它也不会创建像 androidManifest.xml 这样的文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:17:46.697

当您在 Eclipse 上安装插件或执行更新时会发生这种情况？安装了什么版本的sdk和eclipse？

# ajax - 在使用 Capybara 完成 AJAX 请求之前测试加载消息内容

> ID：13628456
> 
> 赞同：5
> 
> 时间：2012-11-29T14:55:19.543
> 
> 标签：ajax, jquery, rspec, capybara, capybara-webkit

我看到很多关于 Capybara 在测试内容之前不等待 AJAX 请求完成的问题和答案，但我需要做相反的事情：我想在 AJAX 请求完成之前测试是否存在加载消息。

在 RSpec 中使用 Capybara 完成 AJAX 请求之前，我将如何检查显示的内容？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T02:08:55.570

我想到了...

如果您想在不等待 AJAX 完成的情况下立即检查某些内容，只需检查包含以下内容的文本：

page.find('#id').text.should include('loading...')

如果您确实想等待 AJAX 返回，请使用 have_content：

page.find('#id').should have_content('loaded')

# sql - Hive 元数据在 Squirrel SQL 中不可见

> ID：13628471
> 
> 赞同：1
> 
> 时间：2012-11-29T14:56:15.777
> 
> 标签：sql, hive, squirrel-sql

我们已经安装了 Squirrel SQL 并且能够连接到 hive db，但是我们无法查看任何表并且无法执行任何查询。怎么了？

# c# - 在属性访问器中调用 Awaitable 方法 [Windows 应用商店应用程序/Metro 应用程序]

> ID：13628481
> 
> 赞同：5
> 
> 时间：2012-11-29T14:56:37.750
> 
> 标签：c#, xaml, microsoft-metro, winrt-xaml, windows-store-apps

我有一个自定义类（为了简化内容，我已经剥离了代码）：

```
public class AlbumItem
{
   public StorageFile AlbumThumbnail { get; set;}
} 
```

当我将它绑定到 ListView 时：

```
<ListView.ItemTemplate>
            <DataTemplate>
                <Grid Height="100" Background="#FFabe372">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="80" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Image Source="{Binding AlbumSource}" Margin="10" Stretch="Uniform"></Image>
                    <TextBlock Margin="20 5" Grid.Column="1" Style="{StaticResource  AlbumListViewItemStyle}" Text="{Binding AlbumDisplayText}"></TextBlock>
                </Grid>

            </DataTemplate>
</ListView.ItemTemplate> 
```

的`Image`源设置为`AlbumSource`，因为我认为实现`AlbumSource`为`Get`-only 属性：

```
public class AlbumItem
{
   public StorageFile AlbumThumbnail { get; set;}

   public BitmapImage AlbumSource
   {
       get
       {
          BitmapImage bmp = new BitmapImage();
          bmp.SetSource(await AlbumThumbnail.OpenReadAsync());
          return bmp;
       }
   }
} 
```

正如预期的那样，我不能`await`在访问器方法中使用关键字，同时我不能将属性存根声明为`async`方法。

有人可以指出我正确的方向吗？我可能`Converter`稍后再试。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T15:05:15.717

恕我直言，属性访问器应该总是几乎立即返回。长时间运行的操作不应在属性访问器内部执行，因为这可能会对性能产生重大影响，因为广泛认为访问器基本上是变量读取操作（即属性可以在循环中被大量访问，而不是为后续访问缓存等） ）。

我会做这样的事情：

```
private async Task SetAlbumSourceAsync()
{
    bmp = new BitmapImage();
    var source = await AlbumThumbnail.OpenReadAsync();
    bmp.SetSource(source);
    RaisePropertyChanged("AlbumSource");
}

BitmapImage bmp;
public BitmapImage AlbumSource
{
    get
    {
        if (bmp == null) // might need a better sync mechanism to prevent reentrancy but you get the idea
            SetAlbumSourceAsync();

        return bmp;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T15:03:11.903

如果使用`await`，则返回类型必须是`Task<BitmapImage>`. 如果您希望能够绑定到您的 XAML，则需要 return `BitmapImage`，因此不能使用`await`. 改用 Task.Result ：

```
public BitmapImage AlbumSource
{
    get
    {
       BitmapImage bmp = new BitmapImage();
       bmp.SetSource(AlbumThumbnail.OpenReadAsync().GetResults());
       return bmp;
    }
} 
```

# jquery - 使用 Jquery 提交表单提交 Get 而不是 Post

> ID：13628482
> 
> 赞同：3
> 
> 时间：2012-11-29T14:56:42.143
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, webgrid

我在我的 MVC 应用程序中使用 WebGrid，对于分页我正在使用此代码

```
 var links = $('a[href*=page], a[href*=sort]');
        form = $('form')[0];
        links.click(function () {
            debugger;
            form.attr("action", this.href);
            $(this).attr("href", "javascript:");
            form.submit();
        });

@using (Html.BeginForm(Model.PostToAction, "Leads", FormMethod.Post)) 
```

当 form.submit() 被执行时，它被执行为 GET 而不是 POST ，

我究竟做错了什么 ？

更新：

我的表格是：

```
<form action="/Leads/DetailsLeads" method="post"> 
```

控制器是：

```
 [HttpPost]
        public ActionResult DetailsLeads(LeadDetailsViewModel model) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T15:31:59.240

尝试`e.preventDefault()`在你的`links.click(function(){}`块内添加。没有这个，浏览器仍然会尝试执行您指示它执行的操作（单击链接上的 GET 请求）。

```
var links = $('a[href*=page], a[href*=sort]');
        form = $('form')[0];
        links.click(function (e) {
            e.preventDefault();
            debugger;
            form.attr("action", this.href);
            $(this).attr("href", "javascript:");
            form.submit();
        }); 
```

# jquery - 将画布放在可拖动的div中时无法获取画布的确切坐标

> ID：13628483
> 
> 赞同：1
> 
> 时间：2012-11-29T14:56:44.440
> 
> 标签：jquery, canvas, coordinates

请检查小提琴。我通过答案得到了这个插件。当画布的位置固定时，它可以正常工作。但是当我将画布包含在可拖动的 div 中并移动 div 时，坐标会发生变化，因此我无法绘制任何东西。我希望触控笔捕捉画布 div 的坐标而不是页面。

**JS 小提琴**：http: [//jsfiddle.net/sVsZL/1/](http://jsfiddle.net/sVsZL/1/)

功能不工作：

```
function ev_canvas(ev) {
if (false) {
    ev._x = ev.touches[0].clientX;
    ev._y = ev.touches[0].clientY; // CH: Is there a better way to do this?
}
else if (ev.layerX || ev.layerX == 0) { // Firefox
    ev._x = ev.layerX;
    ev._y = ev.layerY;
}
else if (ev.offsetX || ev.offsetX == 0) { // Opera
    ev._x = ev.offsetX;
    ev._y = ev.offsetY;
}

ev._x = ev._x + 0.5;
//ev._y = ev._y + 0.5;
// Call appropriate event handler
var func = PEN[ev.type];
if (func) {
    func(ev);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-28T17:06:46.657

我知道这是一篇旧帖子，但我一直在寻找类似的鼠标定位解决方案，但我找到了。我的画布位于左侧并有边框。当我尝试相同的代码时，它也不起作用，所以我不得不修改它。我不知道它是否可以用于其他目的，例如拖动，但也许可以。

代替：

```
 function ev_canvas(ev) {
if (false) {
    ev._x = ev.touches[0].clientX;
    ev._y = ev.touches[0].clientY; // CH: Is there a better way to do this?
}
else if (ev.layerX || ev.layerX == 0) { // Firefox
    ev._x = ev.layerX;
    ev._y = ev.layerY;
}
else if (ev.offsetX || ev.offsetX == 0) { // Opera
    ev._x = ev.offsetX;
    ev._y = ev.offsetY;
} 
```

和：

```
function ev_canvas(ev) { 

     //Firefox
    if (ev.layerX || ev.layerX == 0) {
        ev._x = ev.layerX;
        ev._y = ev.layerY;
    // Any other browsers that may not use the above code
    } else if (ev.offsetX || ev.offsetX == 0) {
        ev._x = ev.offsetX;
        ev._y = ev.offsetY;
    } 
```

然后像这样在in **html**`<div>`周围放置一个：`<canvas>`

 **```
<div id="container">
<canvas id='canvas' width='1050' height='700'></canvas>
</div> 
```

然后在**css**中这样做：

```
#container { position: relative; } 
```**

# java - 如何诊断无休止的 JVM GC 运行？

> ID：13628484
> 
> 赞同：4
> 
> 时间：2012-11-29T14:56:51.613
> 
> 标签：java, garbage-collection, jvm, jvm-hotspot

我们的生产服务器上有一个堆大小为几 GB 的 Java EE 应用程序。每隔一段时间，我们的任何一个服务器都不再对任何请求做出反应。

*   当问题发生时，GC 日志表明服务器花费大量/大部分时间运行 GC，这需要 8 到 10 秒（通常它们需要不到 1 秒）。
*   我们永远不会得到任何 OutOfMemoryErrors。
*   当堆达到某个堆大小时，问题不会特别发生 - 事实上，它发生在不同的堆大小时，它们都没有接近配置的最大值。
*   该问题不会在某个时间间隔、某个时间、用户负载或特定服务器节点上发生。它似乎完全随机。
*   堆转储，即使是在显示问题时从服务器获取的转储，也没有显示任何明显错误的内容。
*   每天重新启动生产服务器似乎可以降低问题发生的可能性，但并不能解决问题。
*   如果我们不每天重新启动服务器，那么问题很可能会在一到三天内出现在我们的 8 台生产服务器中的一台上。

您将如何开始诊断？

## 配置

我们的 JAVA_OPTS 如下： `-Xms8096m -Xmx8096m -XX:MaxPermSize=512M -Dsun.rmi.dgc.client.gcInterval=1800000 -Dsun.rmi.dgc.server.gcInterval=1800000 -XX:NewSize=150M -XX:+UseParNewGC -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xloggc:/path/to/gc.log`

```
$ java -version
java version "1.6.0_12"
Java(TM) SE Runtime Environment (build 1.6.0_12-b04)
Java HotSpot(TM) 64-Bit Server VM (build 11.2-b01, mixed mode)

$ uname -a
Linux myhostname 2.6.18-274.3.1.el5 #1 SMP Tue Sep 6 20:13:52 EDT 2011 x86_64 x86_64 x86_64 GNU/Linux

$ cat /proc/version
Linux version 2.6.18-274.3.1.el5 (mockbuild@builder10.centos.org) (gcc version 4.1.2 20080704 (Red Hat 4.1.2-51)) #1 SMP Tue Sep 6 20:13:52 EDT 2011

$ cat /etc/issue
CentOS release 5.7 (Final)
Kernel \r on an \m

$ cat /proc/meminfo|grep "MemTotal"
MemTotal:     16279356 kB 
```

## 垃圾回收日志

这是问题发生时的示例 GC 日志片段：

```
111036.554: [GC 111036.555: [ParNew: 2210816K->2210816K(2487104K), 0.0000090 secs]111036.555: [Tenured: 3629252K->3647971K(5526912K), 8.7565190 secs] 5840068K->3647971K(8014016K), 8.7567840 secs]
111055.691: [GC 111055.691: [ParNew: 2210816K->2210816K(2487104K), 0.0000090 secs]111055.691: [Tenured: 3647971K->3667529K(5526912K), 8.7876340 secs] 5858787K->3667529K(8014016K), 8.7878690 secs]
111071.037: [GC 111071.037: [ParNew: 2210816K->2210816K(2487104K), 0.0000090 secs]111071.037: [Tenured: 3667529K->3692057K(5526912K), 8.7581830 secs] 5878345K->3692057K(8014016K), 8.7584210 secs]
111088.407: [GC 111088.407: [ParNew: 2210816K->2210816K(2487104K), 0.0000090 secs]111088.407: [Tenured: 3692057K->3638194K(5526912K), 10.7072790 secs] 5902873K->3638194K(8014016K), 10.7074960 secs]
111110.238: [GC 111110.238: [ParNew: 2210816K->2210816K(2487104K), 0.0000090 secs]111110.238: [Tenured: 3638194K->3654614K(5526912K), 8.8021440 secs] 5849010K->3654614K(8014016K), 8.8023860 secs]
111128.115: [GC 111128.115: [ParNew: 2210816K->2210816K(2487104K), 0.0000090 secs]111128.115: [Tenured: 3654614K->3668670K(5526912K), 8.8451510 secs] 5865430K->3668670K(8014016K), 8.8453600 secs]
111161.684: [GC 111161.684: [ParNew: 2210816K->2210816K(2487104K), 0.0000090 secs]111161.684: [Tenured: 3668670K->3684080K(5526912K), 8.8156740 secs] 5879486K->3684080K(8014016K), 8.8159260 secs]
111186.669: [GC 111186.669: [ParNew: 2210816K->2210816K(2487104K), 0.0000090 secs]111186.669: [Tenured: 3684080K->3639333K(5526912K), 10.6025350 secs] 5894896K->3639333K(8014016K), 10.6030040 secs]
111208.692: [GC 111208.692: [ParNew: 2210816K->2210816K(2487104K), 0.0000090 secs]111208.692: [Tenured: 3639333K->3657993K(5526912K), 8.7967920 secs] 5850149K->3657993K(8014016K), 8.7970090 secs]
111235.486: [GC 111235.487: [ParNew: 2210816K->2210816K(2487104K), 0.0000090 secs]111235.487: [Tenured: 3657993K->3676521K(5526912K), 8.8212340 secs] 5868809K->3676521K(8014016K), 8.8214930 secs] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:10:01.600

由于您有一个非常旧的 Java 版本（大约四年前）并且您似乎正在进入错误状态，所以首先要尝试的是更新版本，例如 Java 6 update 35。我怀疑 update 12 没有默认情况下启用 Compressed Oops，这是一个可以节省一些内存的选项（从而节省开销）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:02:08.900

首先：一个线程转储！杀死 -3 进程并检查日志输出。

您可以通过查看正在运行的 GC 线程来确认 GC。

您将 8Go 用于 JVM。RAM 有多少演出？（我希望至少有 12 个）。

线程转储将向您显示 Eden、From、To、Permgen 大小。这可能有助于找出存在问题的内存空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T20:16:19.627

这通常需要一些实验，但我猜你每 30 分钟就会看到一次这个问题，对吧？当你有一个完整的 GC 时，就像你对那些似乎不是由完整堆引起的永久行一样，它们很可能是由 System.gc() 引起的。通常在日志中它会被打印为（系统），但因为你的虚拟机很旧，我不确定。GC 日志信息每次发布都会更改。因此，为了消除这种情况，我强烈建议使用“-XX:+DisableExplicitGC”。它也忽略了 DGC 所做的调用。

这里的第二个选项可能是您在转储中没有看到内存泄漏/问题。这些行说你总是有新的2210816K，而旧的最后仍然是3676521K。如果所有 2210816K 都还活着（看起来像什么），那么就不可能将它们移动到 Tenured，因为它不适合 (5887337K)，所以如果它不停止这样做，您可能会收到 GC Overhead exceeded 消息。但在这种情况下，当你进行转储时，你必须将那些 6G 活动对象放在堆中

# javascript - 如何使用与浏览器时区不同的时区？

> ID：13628485
> 
> 赞同：0
> 
> 时间：2012-11-29T14:56:54.823
> 
> 标签：javascript

我们正在开发需要在自定义时区中显示所有日期的应用程序。我使用使用 javascript Date 的外部库（GWT ...）。我无法覆盖 GWT 代码。此外，javascript Date 似乎是设置自定义时区的更好地方。我们首先尝试使用原型机制覆盖“访问器”：

```
var original_getUTCHours = Date.prototype.getUTCHours;
Date.prototype.getUTCHours = function(){
    // -4 for the time zone offset
    return original_getUTCHours.call(this)-4;
}
var myDate = new Date();
alert(myDate.getUTCHours()); 
```

但是这种机制似乎实现起来很长，因为有很多“访问器”需要覆盖。每个访问器都需要特定的算法来处理偏移量。

所以我们尝试使用原型机制来覆盖 Date 构造函数。

```
var original_date_constructor = Date.prototype.constructor;

function Date(){
    var now = original_date_constructor;
    original_date_constructor(now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate(),now.getUTCHours()-4,now.getUTCMinutes(),now.getUTCSeconds(),now.getUTCMilliseconds())
} 
```

但是我们在 Chrome 调试器中得到了这个错误：

```
Uncaught TypeError: Object function Date(){

var now = original_date_constructor;
original_date_constructor(now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate(),now.getUTCHours()-4,now.getUTCMinutes(),now.getUTCSeconds(),now.getUTCMilliseconds());
} has no method 'getUTCFullYear' 
```

是否可以覆盖 Date 构造函数，正确的方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T14:58:50.193

您需要重新应用`Date`原型：

```
Date.prototype = original_date_constructor.prototype; 
```

# drupal - Drupal 现场直播 - 运行速度极慢

> ID：13628490
> 
> 赞同：0
> 
> 时间：2012-11-29T14:57:17.867
> 
> 标签：drupal, drupal-7, drupal-modules

我有一个在线的 drupal 站点（可能很长一段时间都不会使用），它在 90% 的时间里运行速度非常慢。

网站响应时间如此缓慢的原因可能是什么？

我需要更改任何措施/设置以使其运行更快/正常吗？

请让我知道您的想法，并随时询问有关配置的更多问题，以便我深入了解。谢谢。

网站：[http ://hoosierdigs.com](http://hoosierdigs.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:32:45.663

从您网站极差的性能来看，我不得不说您的主机可能是这里的主要问题。

看起来您可能正在使用 iPage 来托管您的网站，并且众所周知，他们是一个缓慢的网络主机，特别是如果您使用的是他们超级便宜的 2 美元/月计划。如果您需要便宜的虚拟主机，我发现 GoDaddy 的价格要好一些，大约 4 美元/月……否则，如果您可以花在虚拟主机上的一般金额，我可以推荐一些您价格范围内的虚拟主机.

除此之外，Drupal 性能的主要技巧是“缓存”，就像 tulvit 说的那样，检查以确保你有页面缓存，打开聚合也有帮助......这里：http: [//yourdomain.com/admin /配置/开发/性能](http://yourdomain.com/admin/config/development/performance)

如果你想要一个快速的 Drupal 网站，一定要选择一个能够提供 APC、Memcached、Varnish 等技术的虚拟主机。

我想说你可以在 Drupal 之外做的最重要的事情之一就是获得 APC。 [http://us1.php.net/manual/en/book.apc.php](http://us1.php.net/manual/en/book.apc.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T18:44:15.403

使用[BOOST](http://drupal.org/project/boost)模块会大大提高性能

干杯！！！

# image-processing - 如何使用 opencv 2.4 python 2.7 和 numpy 将图像从 BGR 转换为 LAB

> ID：13628491
> 
> 赞同：1
> 
> 时间：2012-11-29T14:57:18.570
> 
> 标签：image-processing, opencv, numpy, python-2.7

我正在使用 opencv 2.4 和 numpy。我想打开一个图像并获取有关它的所有信息（8 位 - 如果它的 RGB-BGR 等），并尝试更改色彩空间。我有这个代码：

```
if __name__ == '__main__':
    img =  cv2.imread('imL.png') 
    conv= cv2.cvtColor(img, cv2.COLOR_BGR2LAB)
        cv2.imwrite('lab.png', conv ) 
```

当我打开文件时，`lab.png`我得到不同颜色的图像！我在以下位置检查 BGR 对 LAB 的值：[http ://www.brucelindbloom.com/](http://www.brucelindbloom.com/)

为此，我想知道有关一张图像的所有信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T13:18:46.280

这样您将获得不同的图像颜色，因为 imwrite() 以指定的格式（PNG、JPEG 2000 和 TIFF）单通道或 3 通道（使用“BGR”通道顺序）保存文件。可以使用此功能保存图像。imwrite() 不知道 LAB 保存图像的格式，因为它总是期望 BGR 中的图像。如果格式、深度或通道顺序不同，请在保存前使用 Mat::convertTo() 和 cvtColor() 进行转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T15:19:02.803

Lab 是另一个颜色空间，就像从 cv2.imread() 获得的 BGR 颜色空间。就像您将温度从华氏温度转换为摄氏温度一样。32华氏度和0摄氏度是相同的温度，但单位不同。

cv2.imwrite() 不知道这些值是否在 BGR 颜色空间中。当它获得一个 3 维数组时，它假定它是一个 BGR 颜色空间，而您的 conv 变量包含 Lab 颜色空间。这就是为什么您的图像颜色会发生变化。

供您参考，BGR 颜色空间的每一层都包含蓝色、绿色和红色，而 Lab 层分别包含亮度 (0-100)、a* 和 b*。有关详细信息，请参阅 Wikipedia 中的“实验室色彩空间”。

# sed - 如何让 sed 模式“智能”

> ID：13628498
> 
> 赞同：0
> 
> 时间：2012-11-29T14:57:35.633
> 
> 标签：sed

我有一个像这样的文件：

```
None44  DET20_22526;size=4; DET20_39906;size=2; DEX29.h_40767;size=4;    DEX27.h_779;size=6757; 
```

目标：

```
None44  DET20_22526 DET20_39906 DEX29.h_40767    DEX27.h_779 
```

只需删除 ";size= *** *;

size= 之后的数字范围为 1-6757（最多）。

我已经试了：

```
sed 's/;size=*;//g' 
```

我对 sed 和 regX 的了解有限。

有人可以指出如何删除 ; 之间的所有内容，包括 ; 的

或者

如何让我的 sed 意识到我可以用英语说什么......但还不能编码:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:04:23.713

你可以试试：

```
sed 's/;size=[0-9]*;//g' 
```

这个正则表达式是什么意思？

*   s/ `...`// `...`/g 代表：用第二个表达式替换第一个表达式的每个匹配项
*   在我们的例子中，第一个表达式`;size=[0-9]*;`应该被分解为：
    *   确切的字符串`;size=`，后跟
    *   范围内的任何数字出现零次或多次`0-9`，后跟
    *   `;`
*   第二个表达式为空，因此匹配的部分被抑制
*   final`g`是一个选项，告诉`sed`匹配所有匹配的部分，而不是停在第一个

# objective-c - UIImagePickerController 电影存储在临时目录中

> ID：13628502
> 
> 赞同：5
> 
> 时间：2012-11-29T14:57:42.327
> 
> 标签：objective-c, ios, uiimagepickercontroller

在调用委托之前，`UIImagePickerController`将电影（如果您录制了电影）存储在磁盘上的临时目录中。`imagePickerController: didFinishPickingMediaWithInfo:`但是这些存储的电影何时从 temp 中删除？我必须手动删除它们还是以某种方式自动删除它们。

我问是因为我有一个视图，用户可以在其中选择录制电影，然后可以在`MPMoviePlayerView`. 如果他不喜欢当前的电影，他可以重新录制电影。我必须删除这些我不使用的电影吗？

用户选择的电影的最佳实践是什么。这部电影将被上传到服务器。上传完成后，我是否应该将其复制/剪切到另一个目录（例如文档）并删除它？

对大型电影的测试表明，我的应用程序文件夹增长到无法接受的大小。

提前致谢。

# javascript - 用jQuery克隆表单几个问题

> ID：13628508
> 
> 赞同：1
> 
> 时间：2012-11-29T14:57:50.983
> 
> 标签：javascript, jquery, forms, jquery-ui, clone

大约一年前，我创建了一个使用克隆复制表单的脚本（在 StackOverflow 的帮助下）。该脚本完成了它需要做的事情，但是在使用了一段时间后，我发现了一些应该有所不同的东西。问题是，由于我对 javascript 和 jQuery 的了解非常有限，这似乎太难了。

**剧本：**

```
<script type='text/javascript'>//<![CDATA[ 
$(window).load(function(){
$('.startdatum').removeClass('hasDatepicker').datepicker({
    dateFormat: 'dd-mm-yy',
    constrainInput: false
});

$("input[type='button'].AddRow").live('click',
function() {
    var index = $(this).closest('div').index();
    if (index > 0) {
        $(this).closest('div').remove();
    } else {

        var $tr = $(this).closest('div').clone(true);
        $tr.find('input.AddRow').val("Delete");
        var $input = $tr.find('input.startdatum');
        var index = $('input#counter').val();
        var id = 'datepicker' + index;
        index++;
        $('input#counter').val(index);
        $input.attr('id', id).data('index', index);
        //console.log(index);
        $(this).closest('span').append($tr);
        $('.startdatum').each(function() {
            $(this).datepicker('destroy');
            $(this).datepicker({
                dateFormat: 'dd-mm-yy',
                constrainInput: false
            });
        });

    }

});
});//]]>  

</script> 
```

**问题**

1.  该脚本现在克隆表单，包括所有填写的字段。我读了[http://api.jquery.com/clone/](http://api.jquery.com/clone/)但我不知道如何复制空字段。

2.  初始表单有一个表单按钮来添加另一个表单。每个克隆的表单都有一个用于删除特定表单的按钮。我想在每一种形式中都有（除了初始形式中的删除，应该保持原样）。

3.  最重要的是，我正在使用脚本来检查所有字段是否均已填写且有效。在填写所有字段之前，不应出现克隆按钮。

    $(文档).ready(函数() {

    ```
    // Wanneer het formulier verstuurd wordt
    $("#theform").submit(function(){    
    isValid = true;

    // Valideer Aanhef
    var aanhef = $('input[name=aanhef]:checked').val();
    if(aanhef != 'v' && aanhef != 'm')
    {
        isValid = false;
        $('#msg_aanhef').html('Vul uw aanhef in.').show();
        $('#aanhef').addClass("fout");
    }
    else
    {
        $('#msg_aanhef').html('').hide();
    } 
    ```

    // ETC。

# performance - 是否有可能知道一个整个站点需要多长时间才能达到 250、500 或 750kbps 或 1、2 或 4MB？

> ID：13628511
> 
> 赞同：0
> 
> 时间：2012-11-29T14:58:00.023
> 
> 标签：performance, bandwidth

我是一名网页设计师，将制作一个文档来培训我的网站客户如何知道他们网站的每个访问者的互联网带宽速度是慢还是快，具体取决于图像或网站重量（以字节或兆字节为单位）和在他们的互联网速度（以千比特或兆比特为单位）上，以 250、500 或 750kb 和 1、2、4 或 10MB 为单位花费多长时间的秒数或时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-30T19:23:53.997

我想有几种不同的方式来看待这个问题。如果您只是想计算在完美世界中下载数据的速度，Jim 的回答解释了如何进行该计算。但简单地下载文件只是网站整体性能的一小部分。有一些工具可以帮助您了解网站在不同连接速度下的性能。

其中一种工具是 Webpagetest.org。输入您的 URL，选择位置和浏览器，然后展开“高级设置”部分。选择连接类型并输入运行测试的次数。它应该大于 1，但您通过此 UI 仅限于 10。转到视频选项卡并选择捕获视频可能是一个好主意，这样您就可以在每个尺寸的管道上展示它的样子。然后对您要测试的每种连接类型重复此操作。这将使您很好地了解在不同连接类型下查看该站点需要多长时间。

这里的缺点是创建一堆测试然后整理这些信息需要做一些工作。[对此的替代方法是http://yottaa.com](http://yottaa.com)上的站点监视器功能。您可以设置一个测试，从不同位置、不同浏览器或不同连接类型查看站点，然后让您轻松绘制结果。要获得访问权限，您必须注册一个免费帐户。另一种方法是在[http://websitetest.com](http://websitetest.com)上，它不需要注册，但您无法管理测试结果。

Webpagetest.org 由 Google 与许多其他合作伙伴合作运营。

全面披露：我是 Yottaa 的技术布道者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T21:02:31.743

如果您要问在 10 兆位（或其他）连接上下载 54 兆字节需要多长时间，简单的解决方案非常简单。

为了简单起见，并考虑到 TCP 通信所涉及的开销，我们通常说每秒 10 兆比特与每秒 1 兆字节相同（也就是说，我们假设一个字节是 10 比特而不是 8 比特） .

因此，如果您想知道在 10 兆位（每秒 1 兆字节）的连接上下载 54 兆字节需要多长时间，答案是 54/1，即 54 秒。如果您有 250 Kb 的连接，则为每秒 25 KB，或每秒 0.025 兆字节。54/0.025 = 2,160 秒，或 36 分钟。

一般来说，这是*最好的情况*估计。它假设客户端和服务器之间的连接可以支持持续的最大速率。这些数字没有考虑服务器可能正在做的其他事情，这些事情会减少它可以专用于特定连接的带宽，也没有包括客户端和服务器之间的许多跃点中可能发生的停顿。

在实践中，这个数字很可能会更大。也就是说，如果上面的计算表明可以在 27 秒内下载整个站点，则很容易需要两倍的时间。仅基于客户端的带宽无法可靠地预测。

如果客户端的“10 兆位”是平均值，并且可以使用更高带宽的突发，它也可能需要更少的时间。尤其是在整体网络使用率较低的时候。

# c++ - C/C++ 中最有效的方法来修剪额外的空白，除了非常大的数据集的 1 个空白

> ID：13628514
> 
> 赞同：2
> 
> 时间：2012-11-29T14:58:11.007
> 
> 标签：c++, c, algorithm

我正在开发一个 C/C++ 函数来修剪额外的空白，除了非常大的数据集的 1 个空白。这是我的功能：

```
 void  iterative_trim_whitespace(const char* src, char* target){

             bool hitspace(*src = ' ');
             while (*src != '\x0'){
                if (!hitspace){
                    *target++ = *src++;
                } 
                else{
                    src++;
                }
                if (isspace(*src)){
                    hitspace = true;
                }  
                else{

                    hitspace = false;
                }
             }

         } 
```

我写了一个递归函数来做同样的事情。如果你愿意，我可以提供。但是，对于具有大字符串的非常大的数据，递归函数调用堆栈开销可能会令人望而却步。有谁知道在 C/C++ 中最快的方法？我熟悉标准模板库和 Boost 模板库。但是我认为本机 C/C++ 会比 C++ 模板更快。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T15:17:05.877

我将假设您的意图与“修剪”通常暗示的有点不同。“修剪”通常用于表示从字符串的开头和/或结尾删除额外的空格，但您似乎意味着输入中每个地方都有一系列空格，您希望输出中有一个空格。

我还假设您设置在处理 C 样式字符串的类 C 实现上。如果这不是给定的，那么仅使用迭代器和标准算法将变得更加简单和清晰。

假设是这种情况，我想我会做更多这样的事情：

```
bool copy_word(char *&dest, char const *&src) { 
    while (isspace(*(unsigned char *)src))
        ++src;

    while (*src && *src != ' ') {
        *dest = *src;
        ++dest;
        ++src;
    }
    return *src != '\0';
}

void trim_whitespace(char *dest, char const *src) { 
    while (copy_word(dest, src))
        *dest++ = ' ';
    *dest = '\0';
} 
```

这里有两点需要牢记：首先，当您要执行一系列操作时（例如，跳过空白，然后复制非空白），将其编码为序列可能更简洁，而不是编码为通过单个循环的不同路线。其次，当您使用 时`isspace`，您*必须*¹将操作数强制转换为某种无符号类型以避免 UB。

编辑：为了它的价值，我整理了一个小测试/基准程序，以查看我的代码与 OP 答案中的代码相比如何。

```
#include <ctype.h>
#include <time.h>
#include <vector>
#include <set>
#include <deque>
#include <iostream>
#include <string>
#include <algorithm>

void  iterative_trim_whitespace(const char* src, char* target){
    bool firstspace(true);
    while (*src != '\x0'){
        if (firstspace){
            *target++ = *src++;
        } 
        else{
            src++;
        }
        if (firstspace && isspace(*(src - 1))){
            firstspace    = false;
        }  
        else{
            firstspace = true;
        }
    }
    *target = '\x0';
}

struct my_isspace {
    bool operator()(char ch) {
        return ch == ' ' || ch == '\t' || ch == '\n' || ch == '\r' || ch == '\v';
    }
};

bool copy_word(char *&dest, char const *&src) { 
    my_isspace check;
    while (check((*src)))
        ++src;

    while (*src && !check(*src))
        *dest++ = *src++;   
    return *src != '\0';
}

void trim_whitespace(char *dest, char const *src) { 
    while (copy_word(dest, src))
        *dest++ = ' ';
    *dest = '\0';
}

void show(std::string const &label, double t) { 
    std::cout << "Time for " << label << " " << t << " seconds\n";
}

template <class test, class T>
double timer(test t, T a, T b) {
    clock_t start = clock();
    t(a, b);
    clock_t stop = clock();
    return double(stop-start)/CLOCKS_PER_SEC;
}

void generate_string(std::vector<char> &dest, size_t size) { 
    for (int i=0; i<size; i++) {
        if (rand() % 5 == 0)
            dest.push_back(' ');
        else
            dest.push_back(rand() % 26 + 'A');
    }
    dest.push_back('\0');
}

int main() {
    static const int size = 1024 * 1024 * 100;

    std::vector<char> src, dest;

    generate_string(src, size-2);

    dest.resize(size);

    show("Original", timer(iterative_trim_whitespace, &src[0], &dest[0]));    
    show("Jerry's", timer(trim_whitespace, &dest[0], &src[0]));

    return 0;
} 
```

至少当我运行它时，我得到：

```
Time for Original 0.749 seconds
Time for Jerry's 0.468 seconds 
```

我可能应该补充一下：正如我在评论中提到的那样，`isspace`我使用的编译器的实现相当慢，至少与我在这里抛出的简单编译器相比。然而，公平地说，如果这样做的部分好处只是被简单地实现为函数对象，我不会感到惊讶（无论如何），这通常使编译器更容易为其生成内联代码。

对于它的价值，还有两点：

1.  微软的链接时代码生成大大*减慢*了这两者
2.  无论哪种方式，修剪都比最初生成输入要快得多

* * *

¹嗯，从技术上讲，它*可能*是`char`一个无符号类型开始 - 但它是不寻常的，你不应该指望它。您的所有输入也可能属于您`char`可能持有的 ASCII 字符子集，在这种情况下，它似乎工作得很好——但这就是有害的：您可以测试它（尽可能多）但是，除非您使用包含编码为负数的字符的文本执行此操作`char`，否则它看起来很好。然后，当您的法语/西班牙语/挪威语/等等，客户对其进行测试时，它会掉下来。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T15:12:11.597

如果您需要真正快速的解决方案，请不要这样做。而是在输入字符串上有一个迭代器，它会跳过空格。任何需要操作“修剪”字符串的地方都可以通过这个迭代器。

这可能会也可能不会，这取决于目前的发展程度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T15:07:13.123

这当然看起来很合理，递归版本会很糟糕。如果这些是大字符串，我会考虑修改它们而不是复制它们，但这是一个更高级别的设计决策。它不影响速度，但可以减少内存消耗。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T22:29:58.343

Jerry Coffin，我刚从列克星敦约会回来。此版本已经过测试。我为我匆忙写的第一个版本道歉，因为我急于去看我在列克星敦的牙医。

```
void  iterative_trim_whitespace(const char* src, char* target){

         bool firstspace(true);
         while (*src != '\x0'){
            if (firstspace){
                *target++ = *src++;
            } 
            else{
                src++;
            }
            if (firstspace && isspace(*(src - 1))){
      firstspace    = false;
            }  
            else{
      firstspace = true;
            }
         }
    *target = '\x0';
} 
```

* * *

```
void iterative_trim_whitespace_revised(const char* src, char* target){
    bool firstspace(true);
    int ct(0);
    while (*src != '\x0'){
        if (firstspace){
            *target++ = *src++;
        } 
        else{
            src += ct - 2; 
        }
        if (firstspace){ 
            char *x = (char *)src - 1;
            ct = 1;
            bool sentinel(false);
            while(isspace(*(x + (ct - 1)))){
                ct += 1;
                sentinel = true;

            }
            if (sentinel){
                firstspace = false;
            }
        }
        else{
            ct = 1;
            firstspace = true;
        }
    }
    *target = '\x0';
} 
```

* * *

void iterative_trim_whitespace_friday_5Timesfaster(const char* src, char* target){ bool firstspace(true); 整数 ct(0); while (*src != '\x0'){ if (firstspace){ *target++ = *src++; } 其他{ src += ct - 2; }

```
 if (firstspace){ 
     char *x = (char *)src - 1;
     ct = 1;
     bool sentinel(false);
     while(*(x + (ct - 1)) == ' '){ 
         ct += 1;
         sentinel = true;

     }
     if (sentinel){
         firstspace    = false;
     }
            }
            else{
     ct = 1;
     firstspace = true;
            }
         }
    *target = '\x0'; 
```

}

// 这是我们今天早上的 ProjectDirector 版本 // TrimLeading() 和 TrimTrailing 是附加的内联函数

void iterative_trim_whitespace_ProjectDirector(const char* src, char* target){

```
int out=0;

for (int i=0;src[i]!= '\x0';i++) {

    if (src[i] != ' ' || src[i+1] != ' '){

        target[out++]=src[i];
    }

}

target[out]= '\x0'; 
```

}

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-29T15:12:21.570

你的代码不会像写的那样工作。如果第一个字符是空格，则不会复制空格，也不会复制空格之后的字符。这样的事情更合理：

```
bool hitSpace = false;
while (*src != '\x0')
{
    if (isspace(*src))
    {
        if (hitSpace)
        {
            src++;
        }
        else
        {
            *target++ = *src++;
            hitSpace = true;
        }
    }
    else
    {
        *target++ = *src++;
        hitSpace = false;
    }
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-29T15:14:12.630

首先，我会选择迭代（在 C 或 C++ 中）而不是递归。无论如何，编译器可能会将递归算法转换为循环，但如果它没有（或者您在调试模式下构建），那么您肯定会溢出堆栈。此外，调用函数是有代价的，你想避免这种情况。

您的基本算法看起来不错（一旦吉姆发现的错误被修复）。我会检查`isspace`是否被内联。如果不是，则将其替换为`*str == ' '`.

涉及模板的解决方案肯定只是将一个简单的问题复杂化而没有任何优势。

# timeout - 是否可以编写脚本来避免 VPN 超时

> ID：13628517
> 
> 赞同：9
> 
> 时间：2012-11-29T14:58:16.163
> 
> 标签：timeout, vpn, session-timeout

我最近使用北电客户端连接到 VPN。

我面临的问题是，我从连接到 VPN 的人那里借用了 RSA，不得不让电脑闲置 30 分钟左右，并且 VPN 超时。所以我不得不叫醒人们并要求钥匙连接。

所以我想知道是否可以编写一个不会让连接超时的脚本（我熟悉 Batch 和 javaScript ）？我能想到的：一段时间后继续发送输入，不要让它变得足够空闲以避免超时。这是一种可行的方法吗？如果没有更好的？

我还没有尝试过任何东西，除了谷歌搜索，也没有太多积极的结果。我不知道从哪里开始。

我不是在要求一个成熟的解决方案（尽管如果有人有它会很棒，哈哈），只是很少的指导，正确的方向？或对某些资源的引用？

我真的很感激一些指导，而不是投反对票。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T15:51:12.857

好吧，如果是因为空闲待机而导致超时的问题，解决方案相当简单。下面的伪代码可以通过多种方式实现

```
repeat:
   ping once gateway_ip  
   wait n seconds 
```

您可以将其作为 bash 或批处理脚本来执行。这是 bash 中的一个示例：

```
while true
do
   ping -c 1 gateway_ip
   sleep 3
done 
```

或作为批处理脚本：

```
:loop
ping -n 1 gateway_ip
ping -n 3 127.0.0.1 
goto loop 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-05T13:31:01.447

```
$ ping -i 30 127.0.0.1 
```

`ping`提供间隔选项，因此您甚至不需要使用脚本来创建 VPN 保持活动状态。

```
$ man ping   
...   
OPTIONS  
...  
    -i interval
        Wait interval seconds between sending each packet.  The default is to wait
        for one second between each packet normally, or not to wait in flood mode. 
        Only super-user may set interval to values less 0.2 seconds. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T15:37:37.657

许多 VPN 客户端确实具有保持活动设置，您可以在您的终端人为地生成流量以达到类似的效果，但很多时候，超时不受您的控制，因为它们是由暂时导致的“外面”的东西引起的丢包或其他形式的广泛延迟。

更好的答案可能是“不要借用别人的密钥/密码 - 获取自己的，以便您可以随时重新连接”。

# ruby - 为什么从管道中读取 16kb + 1 个字节会挂起？

> ID：13628525
> 
> 赞同：1
> 
> 时间：2012-11-29T14:58:45.360
> 
> 标签：ruby, unix, jruby, pipe

我有一个简单的测试用例，用于从通过 MRI 并在 JRuby 1.7+ 中失败的管道读取。它被报告为[JRUBY-6986](http://jira.codehaus.org/browse/JRUBY-6986)中的一个严重错误。

**tl; dr**为什么从管道中完美读取 16kb（16384 字节）文件而 16kb + 1 字节文件失败？在另一个系统上，发现阈值为 72kb（73728 字节）。

```
$ ruby​​ testpipe.rb 16384
开始……没挂！
$红宝石testpipe.rb 16385
开始...^C

```

在那里，脚本以 16kb + 1 字节的大小挂起。

```
require 'open3'
path = "test.txt"
File.open(path, 'w') { |f| f.write('Z' * ARGV[0].to_i) }
STDOUT.write "Starting..."
Open3.popen3('cat', path) do |stdin, stdout, stderr|
  stdin.close
  readers = [stdout, stderr]
  while readers.any?
    ready = IO.select(readers, [], readers)
    # no writers
    # ready[1].each { ... }
    ready[0].each do |fd|
      if fd.eof?
        fd.close
        readers.delete fd
      else
        # read from pipe one byte at a time
        fd.readpartial 1
      end
    end
  end
end
puts "didn't hang!" 
```

某些操作系统或 JVM 缓冲区大小是否会导致发送不同的信号`IO.select`或其他什么？

*PS。我与[Working With UNIX processes](http://workingwithunixprocesses.com/)的作者[Jesse Storimer](https://github.com/jstorimer)进行了仔细检查，他认为我对等的使用是正确的。`IO.select`*

# ruby-on-rails - 茧宝石错误：未定义的方法`new_record？对于零：NilClass

> ID：13628528
> 
> 赞同：0
> 
> 时间：2012-11-29T14:58:52.043
> 
> 标签：ruby-on-rails, nested-attributes, cocoon-gem

我正在建立一个关系公司：has_many 注释。

我希望能够在 Comany#show 资源中为刚创建的公司添加一些新注释。所以在公司脚手架的show.html.erb

我已经一步一步地遵循了茧演示应用程序和 github mardown，但示例仅显示了将嵌套属性添加到 _form.html.erb 部分的方法。我不知道是否有一些特殊的事情要做不同的事情，但是当我尝试运行 Company#show 操作时，它会检索到这个错误：

**未定义的方法`new_record？对于零：NilClass**

这是我的代码：

显示.html.erb：

```
...
  <%= simple_form_for :notes, :html => { :class => 'form-horizontal' } do |note| %>
    <%= render 'note_fields', :f => note %>
  <% end %>
  <%= link_to_add_association 'Aggiungi Nota', f, :notes, :render_options => {:wrapper => 'inline' } %>
... 
```

_note_fields.html.erb：

```
...
<div class="nested-fields">
<%= f.input :body %>
<%= link_to_remove_association "Elimina Nota", f %>
</div>
... 
```

公司.rb:

```
 ...
    has_many :notes
    accepts_nested_attributes_for :notes, :reject_if => :all_blank, :allow_destroy => true
  ... 
```

笔记.rb

```
class Note < ActiveRecord::Base
     attr_accessible :body, :company_id
     belongs_to :company
end 
```

company_controller.rb

```
 def show
    @company = Company.includes(:category, :clients, :notes).find(params[:id])

    @mapCompany = Company.find(params[:id]).to_gmaps4rails

    respond_to do |format|
     format.html # show.html.erb
     format.json { render json: @company }
    end
  end 
```

谢谢！戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T17:35:48.407

在下面的代码中，`f`从未定义过变量。

```
<%= link_to_add_association 'Aggiungi Nota', f, :notes, :render_options => {:wrapper => 'inline' } %> 
```

尝试使用`company`而不是`f`.

# java - 没有找到启动器活动！但我已经指定了一个

> ID：13628530
> 
> 赞同：0
> 
> 时间：2012-11-29T14:59:01.087
> 
> 标签：java, android

当我将 .main 类指定为启动器时，它会在启动时崩溃。因此，我创建了一个名为 launch 的新活动，用于打开 .main 类。当我将 .launch 指定为 LAUNCHER 时，控制台告诉我没有找到启动器活动。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.my.homework"
    android:versionCode="1"
    android:versionName="1.0">

    <uses-sdk android:minSdkVersion="8" android:targetSdkVersion="15" />

    <application android:label="@string/app_name"
        android:theme="@style/AppTheme"
        android:allowBackup="true">

    <activity android:name=".launch"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.LAUNCH" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    <activity android:name=".menu"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

     <activity android:name=".list"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.LIST" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>

    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:03:11.767

改变

```
 <intent-filter>
            <action android:name="android.intent.action.LAUNCH" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

到

```
 <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:01:07.730

那么，这个`com.my.homework.launch`类存在吗？它是子类`Activity`吗？此外，动作应该仍然是`<action android:name="android.intent.action.MAIN" />`。

# android - Eclipse Git 错误：计算差异时发生错误

> ID：13628531
> 
> 赞同：3
> 
> 时间：2012-11-29T14:59:07.267
> 
> 标签：android, eclipse, git

尝试在 Eclipse Indigo 中提交对我的`Android`项目的更改时`git`，出现以下错误：

> “计算差异时发生错误。缺少树”+十六进制数。

我在 Google 上搜索了解决方案，但没有找到。

*   这个错误是什么意思？
*   我该如何解决？

我是`git`Eclipse 的初级和中级。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-30T00:58:51.140

回答我自己的问题。也许这会对某人有所帮助，因为我在网上没有找到关于此错误的任何其他答案。

当我的笔记本电脑硬盘几乎已满时发生错误，大约。95%。当我重新启动笔记本电脑时，Windows 开始修复注册表并将一组丢失的文件移回正确的目录。我把笔记本电脑的硬盘清空到 70%。在此之后，我可以按预期运行提交。

我不知道是硬盘驱动器空间不足还是注册表错误导致了这个问题，但它恰逢其时。因此，作为建议，如果您收到此错误，请确保：

*   硬盘驱动器上有足够的空间进行写入。
*   检查是否需要运行注册表修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-15T13:56:04.183

我今天遇到了这个错误，在阅读了上面的答案后，我意识到我得到它是因为 Windows 更新。Windows 安装了一些更新，但我等待重新启动。重新启动我的计算机后，它又可以正常工作了。

结论：它很可能与注册表有关。

# javascript - jQuery 事件 mousedown 总是返回 root

> ID：13628536
> 
> 赞同：1
> 
> 时间：2012-11-29T14:59:33.900
> 
> 标签：javascript, jquery

当我像这样绑定事件时：

```
Selector.prototype.setupEventHandlers = function() {
    var cssSelector = '*:not(.' + this.ignoreClass + ')';
    jQuery(cssSelector).bind("mousedown", { 'self': this }, this.onSelectorMousedown);
}; 
```

并使 EventHandler 像这样：

```
 Selector.prototype.onSelectorMousedown = function(e) {
     self = this;
     ...
 } 
```

我总是有 self = HTMLParagraphElement 而不是真正被点击的元素。

# rendering - DirectX10 中的多通道前向渲染器

> ID：13628538
> 
> 赞同：0
> 
> 时间：2012-11-29T14:59:39.597
> 
> 标签：rendering, lighting, directx-10

我正在使用 DirectX 10 实现正向渲染器。我希望它能够处理无限量的灯光，以便稍后将其性能与延迟渲染器进行比较。所以基本上我使用的算法是：对于每个对象，对于每个灯光 -> 设置灯光，绘制对象。使用加法混合，我为每个灯光渲染对象，并将每个灯光对它的贡献相加。一切都使用加法混合和禁用深度写入。我遇到的问题是，使用这种简单的方法，不同的对象被混合在一起（因为深度写入被禁用），而我只想要一个对象与它上面的不同光贡献混合，但仍然掩盖它后面的其他对象. 我怎样才能做到这一点？Z pre-pass 是解决方案吗？任何建议将不胜感激。谢谢。

这是我在 HLSL 着色器中使用的混合和深度/模板状态：

```
DepthStencilState NoDepthWritesDSS
{
    DepthEnable = true;
    DepthWriteMask = Zero;
    StencilEnable = true;
    StencilReadMask = 0xff;
    StencilWriteMask = 0xff;
    FrontFaceStencilFunc = Always;
    FrontFaceStencilPass = Incr;
    FrontFaceStencilFail = Keep;
    BackFaceStencilFunc = Always;
    BackFaceStencilPass = Incr;
    BackFaceStencilFail = Keep;
};

BlendState BlendingAddBS
{
    AlphaToCoverageEnable = false;
    BlendEnable[0] = true;
    SrcBlend = ONE;
    DestBlend = ONE;
    BlendOp = ADD;
    SrcBlendAlpha = ZERO;
    DestBlendAlpha = ZERO;
    BlendOpAlpha = ADD;
    RenderTargetWriteMask[0] = 0x0F;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T21:41:05.533

有几个选项可以处理多个灯光，如果您想使用多通道实现它，深度预通道是您的最佳选择（然后您使用 LESS_EQUAL 比较您的深度状态再次绘制）。

这种方法很可能在大量灯光/物体上效率很低。

我推荐[这篇](http://software.intel.com/en-us/articles/deferred-rendering-for-current-and-future-rendering-pipelines)解释如何渲染几个灯光的文章，它有不同的有趣实现。计算图块在 directx10 中不起作用，但可以轻松移植几何精灵版本（我有它的 dx9 版本）

如果您仍然想要前向渲染，还有光索引技术，实现示例[here](http://mynameismjp.wordpress.com/2012/03/31/light-indexed-deferred-rendering/)

# android - URLConnection 中的引用者不起作用

> ID：13628539
> 
> 赞同：0
> 
> 时间：2012-11-29T14:59:46.933
> 
> 标签：android, http, httpclient, httpurlconnection

我想用 post 方法获取一个 html 页面。首先我使用 HttpClient，它没有给出正确的响应，然后我添加`Header`了一个`Referer`，它运行良好但太慢了。所以我打算使用 URLConnection，我也添加`Referer`到了`Header`，这次它没有返回我想要的。

客户端：

```
httpclient = new DefaultHttpClient();  
            HttpPost httppost = new HttpPost(WhutGlobal.URL_HEADER_STR + "xscj_gc.aspx?xh=" + WhutGlobal.USER_ID + "&xm=" + WhutGlobal.USER_NAME + "&gnmkdm=N121605");
            try {
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                httppost.setHeader("Referer", WhutGlobal.URL_HEADER_STR + "xscj_gc.aspx?xh=" + WhutGlobal.USER_ID + "&xm=" + WhutGlobal.USER_NAME + "&gnmkdm=N121605");
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                InputStream is = entity.getContent();
                BufferedInputStream bis = new BufferedInputStream(is);
                byte  bytearray[] = new  byte[800000];
                 int current= -1;
                 int i=0;  
                 while((current=bis.read())!=-1) {
                     bytearray[i] =(byte) current;
                      i++;
               }
              html = new String (bytearray,"GB2312");
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
            } catch (IOException e) {
                // TODO Auto-generated catch block
            } 
```

网址连接：

```
 URL url = new URL(WhutGlobal.URL_HEADER_STR + "xscj_gc.aspx?xh=" + WhutGlobal.USER_ID + "&xm=" + WhutGlobal.USER_NAME + "&gnmkdm=N121605");
         HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();
         urlConnection.setDoOutput(true);
         urlConnection.setDoInput(true);
         urlConnection.setRequestMethod("POST");
         urlConnection.setRequestProperty("Connection", "Keep-Alive");
         urlConnection.setRequestProperty("Accept-Encoding", "gzip");
         urlConnection.setRequestProperty("Referer", WhutGlobal.URL_HEADER_STR + "xscj_gc.aspx?xh=" + WhutGlobal.USER_ID + "&xm=" + WhutGlobal.USER_NAME + "&gnmkdm=N121605");
         DataOutputStream wr = new DataOutputStream (
                   urlConnection.getOutputStream ());
         wr.writeBytes (urlParameters);
         wr.flush ();
         wr.close (); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:09:28.853

`HttpClient`获取html的速度和获取方法之间应该没有显着差异`URLConnection`......它可能取决于连接速度（3G / Wifi）但是

HttpPost 解决方案可能运行缓慢，因为您正在使用：

`while((current=bis.read())!=-1) ...`

相反，这个**STUPID 片段**（在这种情况下逐字节读取实际上效率不高）使用：

`html = EntityUtils.toString(entity, "GB2312")`

关于 HttpURLConnection ...这实际上取决于您在 urlParameters 中发送的内容...`DataOutputStream`在这种情况下您不应该使用

# jquery - disabled="disabled" 的跨浏览器隐藏

> ID：13628540
> 
> 赞同：0
> 
> 时间：2012-11-29T14:59:48.030
> 
> 标签：jquery, html, css, internet-explorer

是否有可靠的方法（CSS、JQuery 等） `<option disabled="disabled">`在所有主要浏览器上完全隐藏禁用？

我需要将它完全隐藏而不是只显示为灰色（如在 IE 中）。

**更新**：没有隐藏禁用选项的跨浏览器方式。如果您需要删除一个选项，请使用 Kevin B 在下面指出的 Jquery 的[detach()](http://api.jquery.com/detach/)。禁用选项不是一件好事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:16:36.523

是的，从选择中删除它，直到你想显示它。

```
var options = $("#myselect option");

// to disable the option at index 3

options.eq(3).detach();

// to enable the option at index 3

options.eq(3).insertAfter(options.eq(2)); // assuming option at index 2 is still attached to the DOM 
```

[**演示**](http://jsfiddle.net/BdK4G/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:04:45.070

或者也许这个

```
$('option[disabled="disabled"]').remove()​ 
```

# javascript - 如何找到最长的公共子数组

> ID：13628541
> 
> 赞同：2
> 
> 时间：2012-11-29T14:59:47.390
> 
> 标签：javascript, arrays

这是我的问题：我在javascript中有5个这样的整数数组：

```
array1 = [0, 1, 2, 3, 4];
array2 = [9, 1, 2, 3, 4];
array3 = [10, 1, 2, 11, 4];
array4 = [12, 1, 2, 13, 4];
array5 = [14, 1, 2, 15, 4]; 
```

我必须找到最长的公共子数组。在这种情况下，我必须检索以下子数组：`[1, 2, 4]`.

对于记录，我不会在数组中找到重复，我的主要目标不是执行速度。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-06-20T14:17:28.850

这是在 Javascript 中使用 Set 的解决方案

```
var myArray = [array1 , array2 ,array3 , array4 ,array5];
let keys = new Set();
myArray.forEach(arr => arr.forEach(el => keys.add(el) ))
var common = [...keys].filter(key => myArray.every(arr => arr.includes(key)))
console.log(common); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-02T09:32:37.910

```
#define MAX(a,b) a>b?a:b

int main(int argc, char* argv[])
{
        if(argc < 2)
                return -1;

        int x = strlen(argv[1])+1;
        int y = strlen(argv[2])+1;

        int i,j,k,l;

        int longest =0;
        char* LCS = (char*)malloc(sizeof(char)*MAX(x,y));

        int** arr  = (int**)malloc(sizeof(int*)*x);

        for(i=0;i<=y;i++)
        arr[i] =(int*) malloc(sizeof(int)*y);

        for(i=0;i<=x;i++)
            for(j=0;j<=y;j++)
            {
                arr[i][j] = 0;
            }

        for(i=0;i<x;i++)
                for(j=0;j<y;j++)
                {
                        if(argv[1][i] == argv[2][j])
                                arr[i+1][j+1] = arr[i][j]+1;
                        if(arr[i+1][j+1] > longest)
                        {
                                longest =arr[i+1][j+1];
                                memset(LCS,0,MAX(x,y));
                                for( k=0,l=i;k<=longest;k++,l--)
                                        LCS[k] = argv[1][l];

                        }
                }

        printf(" %s",argv[2]);
        for(i=0;i<x;i++)
        {
              printf("\n%c",argv[1][i]);              
              for(j=0;j<y;j++)
              {
                printf("%d",arr[i][j]);                                                                                   
              }
        }

        printf("\nLongest Common Subarray : %s\n",LCS);
        return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:10:49.857

尝试这个：

```
var array1 = [0, 1, 2, 3, 4];
var array2 = [9, 1, 2, 3, 4];
var array3 = [10, 1, 2, 11, 4];
var array4 = [12, 1, 2, 13, 4];
var array5 = [14, 1, 2, 15, 4];

// join everything into one array
var all = array1.join(',')+','+array2.join(',')+','+array3.join(',')+','+array4.join(',')+','+array5.join(',');
all = all.split(',');

// get an object with all unique numbers as keys
var keys = {};
for(var i=0; i<all.length; i++) keys[all[i]] = 1;
console.log(keys);

// generate an array with values present in all arrays
var common = [];
for(var x in keys) {
  if(array1.indexOf(parseInt(x)) != -1 && array2.indexOf(parseInt(x)) != -1 && array3.indexOf(parseInt(x)) != -1 && array4.indexOf(parseInt(x)) != -1 && array5.indexOf(parseInt(x)) != -1) {
    common.push(x);
  }
}
console.log(common); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T15:34:18.937

我想这可以给你一个好的开始：我的脚本会返回一个包含每个元素计数的对象。但是现在，它以第一个数组为基础。

```
var array1 = [0, 1, 2, 3, 4];
var array2 = [9, 1, 2, 3, 4];
var array3 = [10, 1, 2, 11, 4];
var array4 = [12, 1, 2, 13, 4];
var array5 = [14, 1, 2, 15, 4];
var array6 = [13, 1, 2, 18, 4];

var mainArr = [array1, array2, array3, array4, array5, array6]

function getCommonElement(arr){
    var subLength = arr[0].length;
    var resultArr = new Array();
    var ret = new Object();
    for(var k=0;k<subLength;k++){
        var temp = new Array();
        for(var i=0;i<arr.length;i++){
            temp.push(arr[i][k]);
        }
        resultArr.push(temp);
    }
    for(var i=0;i<arr[0].length;i++){
        ret[arr[0][i]+''] =   resultArr[i].join('').split(arr[0][i]+'').length - 1;
    }
    return ret;
} 
```

干杯。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-09T06:22:32.183

/** 最长公共子数组 b/w 2 个数组

a = [2,3,4,5,6,7,8]，b = [6,7,8,4,5,2,3]

答案 = 6,7,8

基本上创建一个 2d arr 并且如果元素匹配 dp[i][j] = 1 + dp[i-1][j-1];

如果 dp[i][j] > maxLen，更新 maxLen 并存储索引现在我们有了 maxLen，子数组将从 (index - maxLen) 到索引。

*/

```
int[] finMaxCommon(int[] a, int[] b){

    int m = a.length, n = b.length, maxLen = 0;
    int[][] dp = new int[m+1][n+1];

    // i want a 0th row why? m->out of bounds; comparing i-1; i->1 then i-1 will be 0 

    for (int i = 1; i<=m; i++){
        for(int j = 1; j<=n; j++){
            if(a[i-1] == b[j-1]) {
                dp[i][j] = 1 + dp[i-1][j-1];
                maxLen = Math.max(maxLen, dp[i][j]);
            }
        }
    }
    // endIndex = 6, 3, a[6-3+1], a[6]
    return new int[]{a[endIndex-maxLen+1], [endIndex]}; 

}

dry run
  0,6,7,8,4,5,2,3
0,          0     //
2,            1   // (2,2) i = 1, j = 6 1 + dp[0][5]
3,              2 // (3,3) i = 2, j = 7 1 + dp[1][6]
4,
5,
6,  1
7,    2
8,      3 
```

# php - elgg in out plugins 的动作怎么做

> ID：13628545
> 
> 赞同：0
> 
> 时间：2012-11-29T14:59:52.173
> 
> 标签：php, plugins, action, elgg

我是 elgg 的新手，我想从插件中创建一个提交操作，当前页面是

在代码中

```
 <input type="submit" name="submit" action="<?php echo  site_url ?>/action/datacheck" /> 
```

输出如下

```
 http://localhost/sample.com/testplugins/action/datacheck.php 
```

我需要对插件采取行动，比如

```
 http://localhost/sample.com/action/datacheck.php 
```

我也直接给网址

但不工作，我怎样才能提供网址

请帮助我，并提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T07:42:46.583

我有点困惑。您的意思是要问如何正确构建 Elgg 表单或特殊用例，其中需要以这种方式创建动作链接？

如果您想在首选地址处创建操作，请尝试为`'action'`标识符创建页面处理程序并为`'datacheck'`段添加案例。

# javascript - 试图重写 playAudio 但不起作用

> ID：13628546
> 
> 赞同：5
> 
> 时间：2012-11-29T14:59:55.297
> 
> 标签：javascript, html, onclick

我发现这段代码可以在点击时播放音频文件，但它只允许播放一个音频文件。现在，我正在尝试重写代码，但它不起作用，我找不到问题。我是 JavaScript 新手，所以如果您有更好的解决方案，请告诉我。

为了理解我想要实现的目标，这是我的概念：我正在尝试为移动设备（iOS 和 Android）制作一个基于 Web 的应用程序，孩子们可以在其中混合声音来制作自己的歌曲。他们可以将声音拖放到将播放所有声音的时间线中。但在他们拖动它们之前，他们也可以播放它们（这样他们就可以在将它们拖入时间线之前听到声音，方法是单击包含图像的按钮）。

这是原始的 HTML：

```
 <input id="audiofile" type="text" value="" style="display: none;"/>
    <button id="myElement" class="dndplay" onClick="playAudio();" draggable="true"></button>
    <button id="myElement" class="dndplay" onClick="playAudio();" draggable="true"></button>   

    <audio id="myaudio"></audio> 
```

这是原始的 JavaScript：

```
 var currentFile = "";

    function playAudio() {
        var oAudio = document.getElementById('myaudio');

       // See if we already loaded this audio file.
      if ($("#audiofile").val() !== currentFile) {
          oAudio.src = $("#audiofile").val();
          currentFile = $("#audiofile").val();
      }

      var test = $("#myaudio");
      test.src = $("#audiofile").val();
      oAudio.play();   
  }

  $(function() {
      if (Modernizr.audio) {
      if (Modernizr.audio.ogg) {
          $("#audiofile").val("sounds/Stoomloco_Lunetten.ogg"); 
      }
      if (Modernizr.audio.mp3) {
          $("#audiofile").val("sounds/Stoomloco_Lunetten.mp3");
      }
  }
}); 
```

这是我写的代码，但不起作用：

### HTML：

```
 <input id="audioOne" type="text" value="" style="display: none;"/>
    <button id="framentOne" class="dndplay" onClick="playAudio1" draggable="true"></button>

    <input id="audioTwo" type="text" value="" style="display: none;"/>
    <button id="fragementTwo" class="dndplay" onClick="playAudio2" draggable="true"></button>   

    <audio id="myaudio1"></audio>
    <audio id="myaudio2"></audio> 
```

### JavaScript：

```
 var currentFile = "";

 var playAudio1 = {

   playAudioOne: function() {
      var fragmentOne = document.getElementById('myaudio1');

      // See if we already loaded this audio file.
      if ((modernizr1, "#audioOne").val() !== currentFile) {
        fragmentOne.src = (modernizr1, "#audioOne").val();
        currentFile = (modernizr1, "#audioOne").val();
    }

    var test = (modernizr1, "#myaudio1");
    test.src = (modernizr1, "#audioOne").val();
    fragmentOne.play();   
},

modernizr1: function() {
    if (Modernizr.audio) {
        if (Modernizr.audio.ogg) {
            ("#audioOne").val("sounds/Stoomloco_Lunetten.ogg"); 
        }
        if (Modernizr.audio.mp3) {
            ("#audioOne").val("sounds/Stoomloco_Lunetten.mp3");
        }
    }
   }
  };

var playAudio2 = {
playAudioTwo: function() {
    var fragmentTwo = document.getElementById('myaudio2');

    // See if we already loaded this audio file.
    if ((modernizr2, "#audioTwo").val() !== currentFile) {
        fragmentTwo.src = (modernizr2, "#audioTwo").val();
        currentFile = (mdernizr2, "#audioTwo").val();
    }

    var test = (modernizr2, "#myaudio2");
    test.src = (modernizr2, "#audioTwo").val();
    fragmentTwo.play();   
},

modernizr2: function() {
    if (Modernizr.audio) {
        if (Modernizr.audio.ogg) {
            ("#audioTwo").val("sounds/Marsmanplein_Ventilator.ogg"); 
        }
        if (Modernizr.audio.mp3) {
            ("#audioTwo").val("sounds/Marsmanplein_Ventilator.mp3");
        }
    }
   }
 }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T18:43:15.830

我知道如果您是 JavaScript 新手，这可能有点过分，但我绝对建议您查看 Web Audio API： [http ://chromium.googlecode.com/svn/trunk/samples/音频/index.html](http://chromium.googlecode.com/svn/trunk/samples/audio/index.html)

我已经开始尝试使用 HTML 中的音频，发现`<audio>`如果您需要更多内容，那么本机非常缓慢且笨拙，而不是在浏览器中播放单个歌曲文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:03:29.537

您正在使用来自[http://www.misfitgeek.com/play-sound-in-html5-and-cross-browser-support-with-backward-compatability/的代码](http://www.misfitgeek.com/play-sound-in-html5-and-cross-browser-support-with-backward-compatability/)

基本上它被设置为播放一种声音。关键线是：

```
oAudio.src = $("#audiofile").val(); 
```

这意味着带有 id 音频文件的输入部分的值将是播放的文件。您将不得不重写代码并使其动态化。如果你想为 android 等写东西，你不需要很多额外的东西，比如现代化工具。

也许从[http://css-tricks.com/examples/SoundOnHover/重新开始](http://css-tricks.com/examples/SoundOnHover/)

# uiwebview - 完全防止 Titanium webview 滚动？

> ID：13628548
> 
> 赞同：0
> 
> 时间：2012-11-29T15:00:11.797
> 
> 标签：uiwebview, titanium

我的 Titanium/iOS 应用程序中有一个带有 HTML 选择元素的小型 webview。当用户做出选择时，webview 会滚动。如何防止 webview 滚动？

```
var html = '<html>';
html += '<head>';
html += '<link rel="stylesheet" href="css/jquery.mobile-1.2.0.min.css"/>';
html += '<script src="lib/attributeForm.js"></script>';
html += '<script src="jq/jquery.min.js"></script>';
html += '<script src="jq/jquery.mobile-1.2.0.min.js"></script>';
html += '</head>';
html += '<body style="overflow: hidden">';
html += '<form style="margin:10px; min-height:500px;" id="attributeForm">'+win.attributeForm+'<br><br><br><br></form>';
html += '</body>';
html += '</html>';

var webview = createWebView({
    top: y,
    height: 250,
    html: html,
    disableBounce: true,
}); 
```

这是attributeForm.js：

```
function getAttributes() {
    return $('#attributeForm').serialize();
}

document.body.addEventListener('touchmove', function(e) {
    // This prevents native scrolling from happening.
    e.preventDefault();
}, false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:44:38.560

我能够通过 Web 视图中的 JavaScript 阻止 touchmove 事件来实现这一点：

```
document.body.addEventListener('touchmove', function(e) {
    // This prevents native scrolling from happening.
    e.preventDefault();
}, false); 
```

您可以在此处查看完整示例：[https ://gist.github.com/819929](https://gist.github.com/819929)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-16T06:07:49.213

虽然晚了一点，但应该是有效的，谁会面临同样的问题。尝试.. `disableBounce : true`在您的**webview**属性中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:36:10.717

解决方案可能在您的 HTML 中，而不是在应用程序代码中……没有看到任何很难说的代码，但您可以尝试`overflow: hidden`在`<body>`webview HTML 上进行设置。

# iphone - 如何绘制与此徽章完全一样的视图？

> ID：13628549
> 
> 赞同：0
> 
> 时间：2012-11-29T15:00:12.790
> 
> 标签：iphone, ios, xcode, cocoa-touch, core-graphics

这里是：

![在此处输入图像描述](../Images/2e8fa457cf1a2ace451ec96e203a8109.png)

我想模仿光泽渐变、边框和颜色。Core Graphics 是如何做到的？这是我的控件现在的样子：

![在此处输入图像描述](../Images/7445ef7b265926df3a2636df755eff78.png)

我只需要添加这个很酷的边框！

谢谢！

# jquery - jquery 检查文本区域中的长字符串

> ID：13628551
> 
> 赞同：0
> 
> 时间：2012-11-29T15:00:19.687
> 
> 标签：jquery

我让用户输入了令人难以置信的长字符串，如下所示，jquery 中有没有办法检测到字符串变得太长，以便我可以警告用户？

```
<textarea>xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</textarea> 
```

我正在考虑一个 keyup 来检查自最后一个空格以来的长度（或者如果没有空格，则从一开始）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:20:52.847

尝试这个：

它检查自最后一个空格以来单词的字符串长度。

```
$('#test').keyup(function() {
    var string = $(this).val();
    var n = $(this).val().lastIndexOf(" ");

    var lastword= string.substring(n+1, string.length);

    if(lastword.length > 10) {
      alert('Too long');        
    }     
});​ 
```

[演示](http://jsfiddle.net/A4V8k/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:11:27.140

你可以这样做：

```
<textarea id="myTA" maxlength="1000"></textarea> 
```

然后使用 jQuery ：

```
function(){
    $("myTA").change(function(_itm){
        if(_itm.length >= 1000)
            alert("Too long");
        });
}(); 
```

你应该得到一些东西，试试看...

# excel - 返回唯一值并避免遍历未过滤的范围

> ID：13628553
> 
> 赞同：2
> 
> 时间：2012-11-29T15:00:23.337
> 
> 标签：excel, vba, filtering

第一次在这里发帖，所以我希望我足够清楚。

我正在使用的工作表上有一张表格。我已将 listObject 传递给一个类，该类可以从中返回各种数据。我想通过过滤指定的列标题来检索唯一列表。

我的问题是这样的：

我可以在过滤后返回包含所有行的范围，而无需手动遍历整个未过滤的范围吗？

我当前的代码循环遍历（未过滤的）范围，寻找如下的唯一条目。在我的测试工作表上花费了大量的时间，所以不要认为它对于操作示例是可行的。

```
Public Function returnUniqueList(col As String) As Collection
' get unqiue lists from the table.  Useful for things like LCPs or ballast types
' returns as list of strings

Dim i As Integer
Dim r As Excel.Range
Dim reqCol As Integer
Dim tempString As String
' collection of strings with the unique values
Dim retString As New Collection

reqCol = returnColId(col)

On Error GoTo errorCatch

' collect the unique values
For Each r In pLO.Range.rows

    If Not InCollection(retString, r.Cells(1, reqCol)) Then
        ' add to the collection, including the key
        If r.Cells(1, reqCol) <> "" Then
           retString.Add r.Cells(1, reqCol), r.Cells(1, reqCol)
        End If
    End If
Next r

Set returnUniqueList = retString
Exit Function
errorCatch:
  MsgBox "Error returning unique list: " + Err.Description

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:33:48.813

因此，在使用了各种内置的 excel/VBA 功能之后，我选择了高级过滤器。我遇到的一个问题是，当我过滤一列时，我想将过滤后的表返回给调用代码。上面的函数现在看起来像这样：

```
Public Function returnUniqueList(col As String, searchTerm As String) As Excel.range
' get unique lists from the table.  Useful for things like LCPs or ballast types
' returns as excel.range

Dim reqCol As Integer

On Error GoTo errorCatch

reqCol = returnColId(col)
Dim critRange As String
Dim cr As Excel.range

critRange = "=""=" + searchTerm + "*"""

pWkSht.Cells(1, 1000) = col
pWkSht.Cells(2, 1000) = critRange

Set cr = pWkSht.range(pWkSht.Cells(1, 1000), pWkSht.Cells(2, 1000))
' filter for unique entries on this column
pLO.range.Columns(reqCol).Select
pLO.range.Columns(reqCol).AdvancedFilter Action:=xlFilterInPlace, Unique:=True, CriteriaRange:=cr

Set returnUniqueList = pLO.range.SpecialCells(xlCellTypeVisible).EntireRow
pWkSht.Cells(1, 1000) = Empty
pWkSht.Cells(2, 1000) = Empty
Exit Function

errorCatch:
MsgBox "Error returning unique list: " + Err.Description

End Function 
```

我发现棘手的事情是在调用函数的范围上工作。我发现excel范围可以包含“区域”。这是由于 excel 处理连续数据的方式。所以在调用函数中，我必须遍历返回范围内的区域。这确实为我希望避免的原始调用函数增加了一定程度的开销（我想返回一个范围，一个可以轻松迭代的区域）。

我发现遍历从上面返回的范围/区域的最可靠方法是基于这个片段，我以一种或另一种方式在大量地方使用它（从表中拉出不同的列等：

```
Set devices = edh.returnUniqueList("DaliCct", lcp)
' filter by the requested LCP

'clear down the dali ccts box
daliCctsListBox.Clear

' cycle through the returned areas, retrieving the relvant info
For i = 1 To devices.Areas.Count
    For rowInd = 1 To devices.Areas(i).rows.Count
        Dim r As Excel.range
        For Each r In devices.Areas(i).rows(rowInd)

         If (r.Cells(daliCctColId) <> "") And (r.Cells(daliCctColId) <> "DaliCct") Then
             daliCctsListBox.AddItem r.Cells(daliCctColId)
             bAdded = True
         End If
        Next r
    Next rowInd
Next i 
```

# ruby-on-rails - simple_form 未检测到嵌套属性的触发验证

> ID：13628557
> 
> 赞同：3
> 
> 时间：2012-11-29T15:00:34.460
> 
> 标签：ruby-on-rails, forms, validation, nested-attributes

我有一个模型叫做“治疗”。它本质上是与请求者和被请求者的会议提案，但也是 (1) :intro (2) :proposed_venue (3) :proposed_date (4) :proposed_time。

这四个属性（其中三个是嵌套属性）在表单上显示为字段。所有属性都有 validates_presence_of 验证，但只有 :intro 字段由我安装的 simple_form gem 验证（[https://github.com/plataformatec/simple_form](https://github.com/plataformatec/simple_form)）。这一定是因为只有 :intro 属性（以上四个属性）是 Treating 模型的属性。A Treating 通过 Venue 模型有许多提议的地点，并且通过 TDateTime 模型有许多提议的日期和提议的时间。

奇怪的是，如果所有四个属性都是空白的，我可以看到 Active Record 正在为所有四个属性触发验证。只是 simple_form 没有用“不能为空白”的通知突出显示他们的空白字段。

为了验证这一点，我在我的表单中添加了一个“@treating.errors.full_messages ...”行，如果有四个空白字段（底部的屏幕截图），它将适当地返回四个错误：

```
<% if @treating.errors.any? %>

<ul>
  <% @treating.errors.full_messages.each do |msg| %>
  <li><%= msg %></li>
  <% end %>
</ul>

  <div class="modal-header">
    <h3><%= @user.first_name + " " + @user.last_name[0] + "." %></h3>
    <p>
      <% if @user.picture_url %>
        <%= image_tag(@user.picture_url, :size => "30x30") %>
      <% else %>
        <%= image_tag('smiley_small.png', :size => "30x30") %>
      <% end %> 
      <%= @user.headline %>
    </p>
  </div>

    <div class="modal-body">
      <div class="row-fluid">
        <form action="#" class="span12">
          <label for="treating-message"><h5>Introduce yourself to <%= @user.first_name %> (sample introductions):</h5></label>

          <%= f.hidden_field :requestee_id %>

          <%= f.label :intro, "Introduce yourself to " + @user.first_name + ":" %>
          <%= f.input :intro %>

          <%= f.simple_fields_for :t_date_times_attributes, :validate => { :presence => true } do |t_date_time| %>
            <%= t_date_time.simple_fields_for :"0" do |zero| %>  
              <%= zero.input :date, :input_html => { :value => params[:treating][:t_date_times_attributes][:'0'][:date] } %>
              <%= zero.input :time, :input_html => { :value => params[:treating][:t_date_times_attributes][:'0'][:time] } %>
            <% end %>
          <% end %>
        </div>

        <input class="bigdrop" id="e7" placeholder="Pick a venue with foursquare..." name="proposed_venue[foursquare_id]" />

        </form>
      </div>
    </div>

    <div class="modal-footer">
        <div class="field">
        <a href="#" class="btn btn-link" data-dismiss="modal">Close</a>
        <%= f.submit "Send", id: "send-button" %>
        </div>
    </div>

<% else %>

<ul>
<% @treating.errors.full_messages.each do |msg| %>
<li>* <%= msg %></li>
<% end %>
</ul>

  <div id="modal-treating" class="modal hide fade">
  <div class="modal-header">
    <h3><%= @user.first_name + " " + @user.last_name[0] + "." %></h3>
    <p>
      <% if @user.picture_url %>
        <%= image_tag(@user.picture_url, :size => "30x30") %>
      <% else %>
        <%= image_tag('smiley_small.png', :size => "30x30") %>
      <% end %> 
      <%= @user.headline %>
    </p>
  </div>

  <div class="modal-body">
    <div class="row-fluid">
      <form action="#" class="span12">
        <label for="treating-message"><h5>Introduce yourself to <%= @user.first_name %> (sample introductions):</h5></label>

        <%= f.hidden_field :requestee_id %>

          <%= f.label :intro, "Introduce yourself to " + @user.first_name + ":" %>
          <%= f.input :intro %>

          <div class="control-group">
            <%= f.simple_fields_for :t_date_times_attributes, :validate => { :presence => true } do |t_date_time| %>
              <%= t_date_time.simple_fields_for :"0", :validate => { :presence => true } do |zero| %>
                <%= zero.input :date, :validate => { :presence => true } %>
                <%= zero.input :time, :validate => { :presence => true } %>
              <% end %>
            <% end %>
          </div>            

      <input class="bigdrop" id="e7" placeholder="Pick a venue with foursquare..." name="proposed_venue[foursquare_id]" />

      </form>
    </div>
  </div>

  <div class="modal-footer">
      <div class="field">
      <a href="#" class="btn btn-link" data-dismiss="modal">Close</a>
      <%= f.submit "Send", id: "send-button" %>
      </div>
  </div>

</div>

<% end %> 
```

![在此处输入图像描述](../Images/44140f62859d4adad12be252626cf3a7.png) ![在此处输入图像描述](../Images/10bd75902c98bf1b0be933cc0f96f0b5.png)

（根据页面顶部的错误消息，所有字段都应以红色突出显示，但只有 intro 字段是[可能是因为它是唯一的非嵌套属性]）。

尽管我认为这整个问题可能是 Ajax 的问题（请注意表单顶部的 remote true），但事实并非如此。重新加载新页面/提交空白字段时，我得到了相同的结果。

作为旁注，您还可以在图片中看到我的底部字段，建议场所，在 Ajax 重新加载时失去了样式（整个表单实际上失去了所有样式）。这可能完全是另一个问题，但是如果有人对为什么 css/js 会在 ajax 模态表单重新加载时被丢弃有任何想法，我很乐意知道。

我一直在反对这个问题太久了，我想我会向 SO 寻求帮助！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T13:58:15.707

如果你把这一切都做成一个表格，这会容易得多：

```
<%= simple_form_for @treating do %>
  <%= fields_for :t_date_times do %>
    <% # etc... %> 
```

每当您编写自己的表单标签时……您都会过得很糟糕。这样，SimpleForm 可以计算出它应该从哪些对象中提取错误。否则就真的没有办法知道了。

[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)是典型的好例子——它与 SimpleForm 的工作原理相同。

# c++ - UML 图和 C++ 设计模式

> ID：13628558
> 
> 赞同：0
> 
> 时间：2012-11-29T15:00:43.993
> 
> 标签：c++, design-patterns, uml

我刚从初学者开始学习更多关于 C++ 设计模式的知识。我终于开始阅读[http://sourcemaking.com/design_patterns](http://sourcemaking.com/design_patterns)网站。但是在遇到[http://sourcemaking.com/files/sm/images/patterns/Abstract_Factory.gif](http://sourcemaking.com/files/sm/images/patterns/Abstract_Factory.gif)图像后，我无法将图像映射到现实中的实际类（及其接口）构造。

矩形、箭头、虚线是什么以及我们如何将其转换为实际的代码实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:04:17.380

这些图是用 UML[统一建模语言](http://en.wikipedia.org/wiki/Unified_Modeling_Language)绘制的。您应该真正熟悉它们，因为为了研究设计模式，您并不需要实际的代码。是的，好吧，最终你必须用你想要的语言来实现设计模式，但是对模式的理解必须比代码更高。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:03:54.070

这是 UML [http://en.wikipedia.org/wiki/Unified_Modeling_Language](http://en.wikipedia.org/wiki/Unified_Modeling_Language)描述软件设计的一种语言。这种和设计模式独立于任何编程语言

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:25:41.480

回答：“我们如何将其转换为实际的代码实现？”

这个带有注释和 CamelCase 的 UML 看起来像 Java，
但下面是图中的一些 C++ 模式：

*   **箭头**通常表示指针或 shared_ptr-s，
*   **白头箭头**表示公共继承，
*   **`<<interface>>`**在 C++ 中表示抽象类，在 Java 中表示接口，
*   **带有虚线箭头的白色东西**是笔记。在这种情况下，它们会为您提供实现细节，您也可以按字面输入它们。

在查看代码之前，让我说我讨厌驼峰式大小写，我宁愿鼓励你做 underscore_notation，因为像 STL 和 Boost 这样的 C++ 库就是这样做的。因此**，我将每个班级都更改为下划线符号。** 因此，部分实现*可能*如下所示：

```
class Abstract_platform {
public:
  virtual ~Abstract_platform()=0; // this UML does not specify any functions but we make this class abstract.
};
class Platform_one : public Abstract_platform {

};
class Platform_two : public Abstract_platform {
public:
  /// you should implement this make function with shared_ptr, OR NO POINTERS AT ALL but I go according to the notes
  Product_one_platform_two*  make_product_one();
  Product_two_platform_two*  make_product_two();
  // I provide you with a better_make. It is better than the former make functions
  // due to RVO (Return value optimization see wikipedia)
  // so this is again a hint that this UML was originally for Java.
  Product_one_platform_two better_make_product_one();
};

class Class1 {
private:
  Abstract_platform* platform; // OR shared_ptr<Abstract_platform>, OR Abstract_platform&
  Abstract_product_two* product_two;
};

/// **Implementation file**
Product_one_platform_two*  Platform_two::make_product_one() 
{
  return new Product_one_platform_two(); 
}
Product_two_platform_two*  Platform_two::make_product_two() 
{
  return new Product_two_platform_two(); 
}     
Product_one_platform_two Platform_two::better_make_product_one() 
{
  return Product_one_platform_two(); 
} 
```

另请注意，`Abstract_platform`人们更喜欢`IPlatform`匈牙利符号，其中“I”代表“接口”。

# tsql - T-SQL:exec() & sp_executedsql 不能使用插入和删除作为输入参数

> ID：13628559
> 
> 赞同：0
> 
> 时间：2012-11-29T15:00:46.757
> 
> 标签：tsql, execute, sp-executesql

在我的表中有三列或更多列存储图像文件路径，所以当数据要删除时，我需要将图像文件路径存储到指定表'OnDeleteFile'，然后程序在任务方法中删除Web服务器中的文件从这个指定的表中，但是有很多像这样的表，我不想在每个触发器中每次都写，以将每一列插入到表 OnDeleteFile 中，如下所示：

```
insert into OnDeleteFile(filePath) select column1 from deleted,
insert into OnDeleteFile(filePath) select column2 from deleted,
insert into OnDeleteFile(filePath) select column3 from deleted 
```

有这么多的表和这么多的列，所以我希望我可以循环执行此操作

像这样的tsql：

```
declare mycursor cursor fast_forward
for select columnName from #temptable where isContent=0 
open mycursor
fetch next from mycursor into @column 
while @@fetch_status = 0
begin
    select @sqlstr='insert into OnDeleteFile(fileType,filePath) select fileType=''image'',@columnName from deleted where @columnName is not null and @columnName <> '''' '
    exec sp_executesql
    @stat=@sqlstr,
    @params=N'@columnName as varchar(255)',
    @columnName=@column
    fetch next from mycurosr into @column 
end 
```

它运行错误：对象名称“已删除”无效

我尝试这种方式：

```
declare mycursor cursor fast_forward
for select columnName from #temptable where isContent=0 
open mycursor
fetch next from mycursor into @column 
while @@fetch_status = 0
begin
    exec('insert into OnDeleteFile(fileType,filePath) select fileType=''image'','+ @column +' from deleted where '+ @column + ' is not null and '+ @column + ' <> '''' ')
end 
```

再次失败

我认为问题是可以使用已删除表的范围，已删除表无法在proc sp_executesql中访问

所以我唯一能做的就是创建一个临时表来解决这个问题，但如果是这样，为了这个简单的目标，我使用了触发器、游标、临时表和子过程调用，我真的很关心计算成本

如果有人有更好的解决方案？

PS：我很抱歉我的台球英语和我的台球问题

PPS：我知道需要做这个复杂的事情有问题，如果我们团队的程序员愿意在删除数据的同时删除文件，我不需要这样做，但他们不会，所以我只是尝试我的规模

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:37:10.463

不，不要那样做，按照你不想做的方式去做。

```
insert into OnDeleteFile(filePath) select column1 from deleted,
insert into OnDeleteFile(filePath) select column2 from deleted,
insert into OnDeleteFile(filePath) select column3 from deleted 
```

这是一个更好的主意。

# google-app-engine - 如何根据多个属性在 Datastore 中创建密钥

> ID：13628561
> 
> 赞同：0
> 
> 时间：2012-11-29T15:00:51.967
> 
> 标签：google-app-engine, google-cloud-datastore, gqlquery

如何根据数据存储中模型（种类）的多个人员（字段）制作自己的唯一密钥。

这是一种情况，我有 4 个字段名称、设备、ID、数据。现在我想根据我的 3 个字段（即名称、设备、ID）创建一个密钥，以便每当数据到来并且如果密钥已经针对该数据存在，那么它将被替换为该密钥，否则插入带有新密钥的新数据数据.以这种方式，我可以保存一个数据库命中（即，我不需要检查模型中某个键的数据是否存在所需的那个命中，如果已经存在，它只会替换数据本身，否则插入一条新记录）
那么我怎样才能使用我的 3 个字段来制作这个密钥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T01:17:19.900

冒着说明显而易见的风险，最简单的答案就是制作一个连接三个字段的单个键，并带有一些不能出现在其中任何一个字段中的分隔符。例如，在 Java 中，类似以下内容：

```
String delimiter = ":";
String key = name + delimiter + device + delimiter + id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:19:40.857

它现在正在工作我已经制作了一个唯一键，现在我将此唯一键传递给 key_name，它是 Datastore 中的唯一（默认）字段。

```
key_name_ = game_code+game_version+device_type+device_id

EventLogModel( **key_name** = key_name_, game_code = game_code, game_version = game_version, device_type = device_type , device_id = device_id , events=events ).put() 
```

* * *

# javascript - 如何在 Safari 中以编程方式隐藏打开选择框中的选项？

> ID：13628563
> 
> 赞同：2
> 
> 时间：2012-11-29T15:01:00.093
> 
> 标签：javascript, jquery, html, select, cross-browser

这是一个 jsfiddle：http: [//jsfiddle.net/JQnUs/4/](http://jsfiddle.net/JQnUs/4/)

HTML：

```
<div class="problem-select">
    <select>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
    </select>
    <input type="hidden" value="1" />    
</div>

<div class="overlapping-div">

</div>

<div class="hover-here">Hover here</div>

<input class="other-input" type="text" /> 
```

CSS：

```
.problem-select {
    position: absolute;
    top: 0px;
    left: 0px;
    z-index: 0;
}

.overlapping-div {
    position: absolute;
    top: 0px;
    left: 0px;
    width: 100px;
    height: 100px;
    background-color: red;
    z-index: 100;
    display: none;
}

.hover-here {
    position: absolute;
    right: 70px;
    top: 0px;
    border: 1px solid black;
    height: 100px;
    width: 100px;
}

.other-input {
    position: absolute;
    top: 200px;
    left: 0px;
} 
```

jQuery（使用 1.8.2）：

```
jQuery(document).ready(function() {
    jQuery(".hover-here").hover(function(){ showDiv(); }, function(){ hideDiv(); });
    //Used in potential solution 7...
    //jQuery("select").change(function(){ jQuery(this).siblings('input').val(jQuery(this).val()); });
});

function showDiv() {
    //Potential solution number 1... (does't work in chrome or safari)
    //jQuery('select').blur();

    //Potential solution number 2... (leaves lines on top of the red div)
    //jQuery('option').hide();

    //Potential solution number 3... (doesn't work in safari and still has the issue of working out which selects to hide)
    //jQuery('select').hide();

    //Potential solution number 4... (doesn't hide drop down options at all and would also need to know which selects to disable)
    //jQuery('select').attr('disabled','disabled');

    //Potential solution number 5... (doesn't work at all)
    //jQuery(".hover-here").click();

    //Potential solution number 6... (doesn't work in safari or chrome)
    //jQuery('.other-input').focus();

    //Potential solution number 7... (doesn't work in safari)
    //innerHtml = jQuery('.problem-select').html();
    //value = jQuery('.problem-select').children("input").val();
    //jQuery('.problem-select').html(innerHtml);
    //jQuery('.problem-select').children("select").val(value);

    jQuery('.overlapping-div').show();
}

function hideDiv() {
    //Potential solution number 2 cont...
    //jQuery('option').show();

    //Potential solution number 3 cont...
    //jQuery('select').show();

    //Potential solution number 4 cont...
    //jQuery('select').attr('disabled',null);

    jQuery('.overlapping-div').hide();
} 
```

如果单击选择框将其打开，然后将鼠标悬停在右侧的 div 上而不从选择框中选择选项或先单击页面上的其他位置，则选择选项仍显示在出现的红色 div 顶部.

我尝试过的一些事情在小提琴中，相关部分只需要取消注释即可查看它们会发生什么。他们中的大多数人在 Firefox 中工作，没有人在 safari 中工作。

我在实际应用程序中面临的另一个问题是选择框可能位于或可能不在红色 div 下方，因此解决方案需要能够确定选择框选项是否会遮挡红色 div 或继续允许正常使用（选择选项）。（在应用程序中，可以在页面上执行其他操作时保持红色 div 可见）。

**如何停止选项列表显示在 chrome、safari、ie7-9 和 firefox 中的红色 div 上，同时不影响选择框的功能（如果红色 div 没有覆盖它）？**

我试图避免使用使用其他 html 元素重新创建选择框的插件来执行此操作，因为根据我的经验，它们不适用于更改定期在各种事件上触发的功能的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-26T12:27:45.650

我在 Mobile Safari 中测试应用程序时遇到了完全相同的问题。显然 .hide() 不起作用，因为 Mobile Safari 将下拉选择更改为“弹出”选择。作为妥协，我选择简单地禁用不需要的选项：

```
 $(document).ready(function(){
        $("#yourSelectDiv").change(function(){
        //target an attribute from your first drop down)
        if ( $(“#yourSelectID option:selected”).attr(“data-custom”) == ’yourCustomAttribute’){
        //reset the second drop down to default position
        $(“#yourOtherSelectID”).get(0);
        //set disabled to true or false on the second drop down 
        $("#yourOtherSelectID option[value='yourSelectValue']").attr('disabled',false);
        $("#yourOtherSelectID option[value='yourSelectValue']").attr('disabled’,true);
    });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:14:10.950

我找到了一个可能的解决方案：

在 .hover-here div 悬停时，我将一个类添加到添加以下规则的选择中：

```
.hide-select {
    position: absolute;
    overflow: hidden;
    clip: rect(0 0 0 0);
    height: 1px;
    width: 1px;
    margin: -1px;
    padding: 0;
    border: 0;
} 
```

（取自[本页](http://css-tricks.com/places-its-tempting-to-use-display-none-but-dont/)）

尚未在所有浏览器中对其进行测试，但在 Chrome 和 IE9 中似乎可以正常工作:)

自己测试：http: [//jsfiddle.net/JQnUs/6/](http://jsfiddle.net/JQnUs/6/)

**编辑** 毕竟在 IE9 中似乎做得不太好，它仍然可以运行，但下拉列表之后变得混乱.. 寻找修复。

# objective-c - 无法在第二个线程上调用类方法 - IOS

> ID：13628569
> 
> 赞同：0
> 
> 时间：2012-11-29T15:01:17.160
> 
> 标签：objective-c, ios, multithreading, web-services, concurrency

好的，先谢谢你了。

我正在使用 Web 服务（可能使用 xml <-- Irrelevant），并且我可以从我的代码中正确调用任何函数来收集结果，或将参数推送到 WS。

```
service = [HiphopHipHopGameService service];
    [service GetPlayerImage:self action:@selector(GetPlayerImageHandler:) PlayerID: @"player id"]; 
```

但是，为了提高效率，我试图在并发的第二个线程上调用这些相同的“类方法”。我正在正确实现线程使用，因为我将 NSLogs 放置在新线程中，并且它们正在正确执行。但是，如果我将 WS 方法放在新线程中，它们将被忽略。

我尝试了以下两种方法。两者都可以正常使用其中的 NSlog，但没有进行 WS 调用。

```
[self performSelectorInBackground:@selector(getopps) withObject:service];

[NSThread detachNewThreadSelector:@selector(getopps) toTarget:self withObject:nil]; 
```

你有什么主意吗？

# joomla2.5 - jomsocial force状态刷新

> ID：13628572
> 
> 赞同：0
> 
> 时间：2012-11-29T15:01:24.883
> 
> 标签：joomla2.5, jomsocial

我越来越疯狂地使用 joomla 2.5.7 来制作 jomsocial 2.6.2。

问题是当用户更改状态时，消息不会反映在墙上。

仅当您刷新页面或将视图全部切换到我和朋友视图时。

控制台中没有 js 错误，我得到：

```
Jax.submitTask ajax_1.3.js:1
Jax.call ajax_1.3.js:1
joms.extend.activities.getLatestContent script-1.2.js:226
reloadActivities myaccount:1129
(anonymous function) 
```

但是没有人知道如何强制墙，所以我可以在之后添加一行：

```
Status.submit 
```

在

```
status.form.php 
```

任何提示欢迎 2 天已经尝试...

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:26:41.847

我可以相信它正在工作

我在 status.forum.php 中添加了这一行，强制加载所有状态

第 255 行

```
complete: function()
{
  CreatorLoadingIndicator.hide();
  joms.ajax.call('frontpage,ajaxGetActivities', [ 'all' ])
  Status.reset();
  Status.submitting = false;
} 
```

# spring - Struts2 和 Spring 集成线程安全

> ID：13628573
> 
> 赞同：2
> 
> 时间：2012-11-29T15:01:25.727
> 
> 标签：spring, struts2

我们正在使用 Struts2-Spring 集成，我所有的动作类都实现了 SessionAware，动作类的示例代码及其弹簧定义如下所示，

```
public class IRXxxxAction extends ActionSupport implements SessionAware {
  private Map session;

  public String execute()
  {//}

  public void setSession(Map<String, Object> session)
  {
    this.session = session;
  }
} 
```

**弹簧配置**

```
<bean name="userAction" class="com.IRXxxxAction" >
    <property name="adminDAO" ref="adminDAO" />
</bean> 
```

如果我理解正确，每个自动连接的属性都将是一个单例，所以如果上述情况属实，那么会话映射是否会在两个同时请求之间共享？

问候，

阿尤什

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T16:01:18.947

您在用户邮件列表中提出了相同的问题，并且如您所说，如果您使用 Struts2-Spring 插件，请确保将 bean 范围设置为`prototype`.

Struts2 在每个请求上创建新的动作实例，因为动作也作为模型工作，并且为了使其线程安全，在每个请求上创建一个新对象并将其放置在值堆栈上。

不证明范围将被 Spring 视为`singleton`并且永远请求相同的操作实例将被返回，这可能导致从数据损坏到奇怪行为的许多问题。

# excel-formula - 具有命名范围的 Excel 公式

> ID：13628575
> 
> 赞同：0
> 
> 时间：2012-11-29T15:01:31.280
> 
> 标签：excel-formula, named-ranges

我有一个关于公式的问题，这不是一个简单的问题，我希望有人能解决它。

表看起来像这样

```
Idx Val Rslt
1   1   3
1   2   3
1   3   3
2   11  13
2   12  13
2   13  13 
```

命名范围 NR 封装列 Idx 和 Val（没有标题）。

我想要一个 Rslt 列单元格的公式：

a) 识别具有相同 Idx 值的行

b) 从那组行返回 max Val

我希望我很清楚，如果不是 - 请随时提问。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T20:12:33.597

`=MAX(IF($A$2:$A$7=A2,$B$2:$B$7))`

将此输入到 C2 中，然后按**ctrl+shift+enter**，然后它将向下填充公式。

# mysql - 使用链接指标设计会员数据库

> ID：13628576
> 
> 赞同：0
> 
> 时间：2012-11-29T15:01:44.447
> 
> 标签：mysql, database, database-design

总结一下这个会员资格是什么：

它的用户将使用工具查找网页 URL，系统将在其上运行指标（Google Pagerank、SEOMoz PA 和 DA、Alexa 排名等）。用户将能够保存这些网页及其指标并将其导出。

假设我有这些 MySQL 表：

```
Users_table
----------
user_id PK
login_name
other_user_stuff...

Users_Links_table
----------------
user_id FK
link_id FK

Links_table
-----------
link_id PK
page_url 
```

顺便说一句，如果您认为这种设计不好，请告诉我。

所以我的问题是，我应该如何存储链接的指标？我应该扩展 Links_table 吗？方法 A。

```
Links_table
-----------
link_id PK
page_url
metric1
metric2
more metrics down the road ... 
```

还是应该将指标放在单独的表格中？方法 B。

```
Link_Metrics_table
------------------
metric_id PK
link_id FK
metric_type (string)
metric_value (string) 
```

还是应该这样？方法 C。

```
Link_Metrics_table
------------------
metric_id PK
metric_type_id FK
link_id FK
metric_value

Link_Metrics_Types_table
------------------------
metric_type_id PK
metric_type_name 
```

还是方法D？

```
Link_Metrics_table
------------------
metric_id PK
link_id FK
metric1
metric2
metric3
metric (n+1) 
```

如果有人能阐明如何设计这将不胜感激，特别是考虑到可能会进一步添加的指标类型。谢谢。

**编辑：**

现在我已经解决了这个问题，我遇到了一个不知道如何执行特定查询的问题。

给定我选择的数据库结构（方法 C），我如何编写查询以获得这样的结果集：

```
link_id     link_url     metric_1       metric_2       metric_3       metric_n+1
------------------------------------------------------------------------------------
1           google.com   metric_1_val   metric_2_val   metric_3_val   metric_n+1_val 
```

任何给定的指标可能存在也可能不存在。

谢谢。

**编辑：**

看起来我想通了，我用这个：

```
SELECT 
  l.link_id, 
  l.page_url,
  IF(t.metric_type_id=1, m.metric_value, 'N/A') AS metric_1, 
  IF(t.metric_type_id=4, m.metric_value, 'N/A') AS metric_2 
FROM 
  Links_table l,
  Link_Metrics_table m, 
  Link_Metrics_Types_table t 
WHERE
  l.link_id=m.link_id AND 
  m.metric_type_id=t.metric_type_id 
```

如果这是错误的方法，请告诉我。

# java - 为什么 javax.xml.stream.XMLEventReader.next() 在编译期间不能转换为 XMLEvent？

> ID：13628578
> 
> 赞同：0
> 
> 时间：2012-11-29T15:01:46.263
> 
> 标签：java, xml-parsing

谁能解释一下为什么这段代码不能编译：

```
import java.io.FileInputStream;
import javax.xml.stream.XMLEventReader;
import javax.xml.stream.XMLInputFactory;
import javax.xml.stream.events.XMLEvent;

public class Test {

    public static void main(String[] args) throws Exception {
        XMLEventReader xr = XMLInputFactory.newInstance().createXMLEventReader(new FileInputStream("test.xml"));
        XMLEvent e = xr.next();
    }
} 
```

输出

```
Test.java:10: error: incompatible types
        XMLEvent e = xr.next();
                            ^
  required: XMLEvent
  found:    Object
1 error 
```

根据 API XMLEventReader.next() 返回 XMLEvent。

注意：我使用 javac 1.7.0_03

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:12:35.917

该接口`XMLEventReader`扩展了原始类型`Iterator`，而不是参数化类型`Iterator<XMLEvent>`，因此`next()`将返回`Object`。您应该改用`nextEvent()`它，它确实 return `XMLEvent`。

# html - Windows 手机模拟器不加载图像

> ID：13628583
> 
> 赞同：3
> 
> 时间：2012-11-29T15:01:55.237
> 
> 标签：html, windows-phone-7, cordova, image

嗯，使用 PhoneGap 开发跨平台移动应用程序，在这里我正在尝试在 Windows Phone 模拟器上测试我的应用程序（嗯，新开发的 Win.phone）

我写了一个普通的 HTML 页面有一个元素标签 img

```
<img id="PlateImage" width="200px" height="100px"  src="Images\Plates\plate_blue.png"/> 
```

我也尝试改变路径风格

```
<img id="PlateImage" width="200px" height="100px"  src="/Images/Plates/plate_blue.png"/> 
```

但是没有用我的模拟器显示*alt*属性而不是 img 本身。

有什么建议么 ？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T17:12:58.440

**要修复此错误，请按照以下步骤操作**

1.  在 Soulion Explorer 中，右键单击图像并单击属性
2.  选择“**构建操作**”，然后选择“**内容**”
3.  保存并运行

# objective-c - UIView 总是顶部子视图

> ID：13628586
> 
> 赞同：3
> 
> 时间：2012-11-29T15:02:05.007
> 
> 标签：objective-c, ios, uiview

嗨，我有一个游戏，我在其中创建了一个处理触摸事件的子视图。但是当我稍后在代码中添加其他对象时，它们会出现在该视图的前面。因此，如果用户在这些对象之一上点击屏幕，则不会注册触摸。那么有没有办法让 UIView 总是出现在顶部？我已经尝试过了，但它不起作用： `view.layer.zPosition = MAXFLOAT;`

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-29T15:05:19.760

试试看`bringSubviewToFront:`，对我有用：

```
[[self view] bringSubviewToFront:yourView]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T15:06:16.927

```
[[self view] bringSubviewToFront:yourView]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-29T15:19:40.540

如果由于某种原因您不想像其他人建议的那样保留指向子视图的指针，则可以使用此方法添加子视图：

```
- (void)insertSubview:(UIView *)view atIndex:(NSInteger)index 
```

index = 0。这将在前一个子视图下插入每个新子视图。我个人可能仍然会做@Alexander 在他的回答/评论中所做的事情。

# asp.net - 多个 IP 地址查找

> ID：13628588
> 
> 赞同：1
> 
> 时间：2012-11-29T15:02:14.170
> 
> 标签：asp.net, vb.net, ip, ip-geolocation

我想知道是否有一个 API 可以让我插入 100 个或更多 IP 地址，并用新行分隔，只需按一下按钮即可跟踪它们检索他们的信息？目前我正在使用免费的 API，但我无法确定它是否可以跟踪多个 IP 地址，如果可以，如何？

这是 API 网址：[http ://www.ipaddressapi.com/](http://www.ipaddressapi.com/)

这是我在其末尾输入 IP 地址的 url：

[http://www.ipaddressapi.com/l/55ffa3e1bb4f123a2e0e21bf30a6731fec615a69b682?h=45.0.0.0](http://www.ipaddressapi.com/l/55ffa3e1bb4f123a2e0e21bf30a6731fec615a69b682?h=45.0.0.0)

我试着这样做

[http://www.ipaddressapi.com/l/55ffa3e1bb4f123a2e0e21bf30a6731fec615a69b682?h=45.0.0.0&47.0.0.0](http://www.ipaddressapi.com/l/55ffa3e1bb4f123a2e0e21bf30a6731fec615a69b682?h=45.0.0.0&47.0.0.0)（然后添加第二个IP地址），但这也不起作用。有什么建议或想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:07:36.423

只需执行以下操作：

循环访问您的 IP 地址：

```
For Each s as String in MyAddresses
    'Add the ip address on the end of the url you wish to get the data for:
    Dim result as string = GetWebPageAsString(New Uri("http://someaddress.com?" + s))
    'parse result however you need to here
Next 
```

将网页作为字符串获取的函数

```
Public Shared Function GetWebPageString(ByVal address As Uri) As String
    Try
        Using client As New Net.WebClient()
            Return client.DownloadString(address)
        End Using
    Catch ex As System.Exception
        Return ""
    End Try
End Function 
```

# facebook - facebook 广告统计连接

> ID：13628589
> 
> 赞同：1
> 
> 时间：2012-11-29T15:02:15.673
> 
> 标签：facebook, ads

下面是我收到的关于广告组统计信息的示例响应。

“连接”返回 12 和“操作”：null 我如何才能断开连接？（类似页面/应用安装/事件响应）

谢谢！

```
{
  "id": "XXXXX",
  “印象”：“789862”，
  “点击”：“292”，
  “花费”：“3019”，
  "social_impressions": "109327",
  "social_clicks": "26",
  “social_spent”：“235”，
  “独特的印象”：295055，
  “social_unique_impressions”：18819，
  “独特的点击次数”：287，
  “social_unique_clicks”：25，
  “行动”：空，
  “连接”：12，
  “adgroup_id”：XXX，
  “campaign_id”：XXX，
  "start_time": "2011-08-21T00:00:00+0000",
  "end_time": "2011-08-22T00:00:00+0000",
  “新闻提要位置”：空
}

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T15:53:20.543

根据我的经验，如果您不指定 start_time，您将获得统计查询的操作字段的非空结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T16:55:08.260

查看[广告统计](https://developers.facebook.com/docs/reference/ads-api/adstatistics/)和[转化统计](https://developers.facebook.com/docs/reference/ads-api/conversionstatistics/)文档 - 您可能正在寻找`/conversions`而不是`/stats`

示例查询：`/<CAMPAIGN ID>/conversions/0/1354207892` 示例响应为：

```
{
  "campaign_id": <CAMPAIGN ID>, 
  "values": [
    {
      "start_time": 0, 
      "end_time": 1354233600, 
      "conversions": [
        {
          "action_type": "like", 
          "object_id": <PAGE ID>, 
          "post_click_1d": 345, 
          "post_click_7d": 349, 
          "post_click_28d": 351, 
          "post_imp_1d": 53, 
          "post_imp_7d": 89, 
          "post_imp_28d": 104
        }, 
        {
          "action_type": "link_click", 
          "object_id": <PAGE ID>, 
          "post_click_1d": 893, 
          "post_click_7d": 904, 
          "post_click_28d": 938, 
          "post_imp_1d": 120, 
          "post_imp_7d": 185, 
          "post_imp_28d": 235
        }, 

      ]
    }
  ] 
```

# java - 写入后的空白文件？

> ID：13628596
> 
> 赞同：7
> 
> 时间：2012-11-29T15:02:41.140
> 
> 标签：java, printwriter, bukkit

所以我一直在尝试为我的一个朋友编写一个 Bukkit 插件，但由于某种原因，配置生成不起作用。有问题的代码在下面，我很乐意添加人们需要帮助我解决这个问题的任何代码。当我运行程序时，创建的配置文件最终是空白的。测试文件很好（我通过简单地注释掉删除文件的行来测试它）但是一旦我尝试获取多行它就会失败。任何人都可以帮忙吗？

```
PrintWriter out = new PrintWriter(new FileWriter(config));
out.println("########################################");
out.println("#  hPlugin is written by newbiedoodle  #");
out.println("########################################");
out.println("#   -----  Plugin config file  -----   #");
out.println("########################################");
out.println("NOTE: Do not edit the config file besides changing the values - it may result in errors.");
out.println("--------------");
out.println("Strikes before being banned?");
out.println("3");
out.println("Godmode?");
out.println("true");
out.println("First time running the plugin?");
out.println("true");
out.println("Curse protection?");
out.println("true");
out.println("Emergency shelter?");
out.println("true");
out.println("Path building?");
out.println("true");
out.println("Blocked words/phrases (Separate with comma)");
out.println("[censored]");
out.close();
System.out.println("Successfully wrote defaults to config"); 
```

整个事情都包含在一个 try/catch 循环中，只是为了捕获可能弹出的任何错误。我有一种感觉，我错过了一些非常明显的东西，但我找不到它是什么。

*   `config`是一个`File`具有它需要的路径的对象，所以我不认为是这样

*   我让程序单独执行几乎所有操作，以便我可以准确地告诉用户错误发生的位置，因此该文件是在`try`/之外创建的`catch`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T15:13:42.427

你需要打电话...

```
out.flush(); 
```

...就在您打电话之前...

```
out.close(); 
```

PrintWriter 使用内存中的缓冲区来更有效地使用磁盘。您需要调用 flush() 来告诉 PrintWriter 写入您的数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T15:07:18.180

很可能您已经运行了不止一次，并且正在写入一个文件并检查另一个文件。我怀疑文件名是相同的，但目录（可能基于工作目录）不是您认为的那样。

在这种情况下关闭调用会刷新，因为 PrintWriter 使用[BufferedWriter](http://www.docjar.com/html/api/java/io/BufferedWriter.java.html)并且其他 Writer 类没有缓冲。

```
 251       public void flush() throws IOException {
  252           synchronized (lock) {
  253               flushBuffer();
  254               out.flush();
  255           }
  256       }
  257   
  258       public void close() throws IOException {
  259           synchronized (lock) {
  260               if (out == null) {
  261                   return;
  262               }
  263               try {
  264                   flushBuffer();
  265               } finally {
  266                   out.close();
  267                   out = null;
  268                   cb = null;
  269               }
  270           }
  271       } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:06:29.797

完成后，您需要刷新或关闭流。退出前两者都非常重要。关闭会自动调用flush()。

# android - HTC android.credentials.INSTALL

> ID：13628600
> 
> 赞同：1
> 
> 时间：2012-11-29T15:02:52.500
> 
> 标签：android, certificate, htc-android

我正在尝试以编程方式在 HTC Desire S 设备 Android 版本 2.3.5 和 HTC Sense 版本 3.0 中添加 CA 证书。

我正在使用以下代码：

```
Intent intent = new Intent("android.credentials.INSTALL");
    intent.putExtra("name","testCA");
    intent.putExtra("CERT", bytes);
    startActivityForResult(intent, CA_CERT_ADDED); 
```

我正在使用证书字节正确填充变量“字节”。当我运行代码时，会出现对话框，说明我正在安装 CA 证书，但是我传入的证书名称并未填充该对话框。

在其他类型的设备（非 htc）上我没有这个问题。它只是 HTC 设备。

以前有没有其他人遇到过这种情况，是否有解决方案。

先感谢您

# lucene - 如何使用 Lucene 4.0 空间 API？

> ID：13628602
> 
> 赞同：3
> 
> 时间：2012-11-29T15:03:07.290
> 
> 标签：lucene, spatial

我找不到任何有关如何使用此 API 的完整示例。下面的代码没有给出任何结果。知道为什么吗？

```
static String spatialPrefix = "_point";
static String latField = spatialPrefix + "lat";
static String lngField = spatialPrefix + "lon";

public static void main(String[] args) throws IOException {
    SpatialLuceneExample spatial = new SpatialLuceneExample();
    spatial.addData();
    IndexReader reader = DirectoryReader.open(modules.getDirectory());
    IndexSearcher searcher = new IndexSearcher(reader);
    searchAndUpdateDocument(38.9510000, -77.4107000, 100.0, searcher,
            modules);
}

private void addLocation(IndexWriter writer, String name, double lat,
        double lng) throws IOException {

    Document doc = new Document();

    doc.add(new org.apache.lucene.document.TextField("name", name,
            Field.Store.YES));
    doc.add(new org.apache.lucene.document.DoubleField(latField, lat,
            Field.Store.YES));
    doc.add(new org.apache.lucene.document.DoubleField(lngField, lng,
            Field.Store.YES));
    doc.add(new org.apache.lucene.document.TextField("metafile", "doc",
            Field.Store.YES));
    writer.addDocument(doc);
    System.out.println("===== Added Doc to index ====");
}

private void addData() throws IOException {
    IndexWriter writer = modules.getWriter();
    addLocation(writer, "McCormick & Schmick's Seafood Restaurant",
            38.9579000, -77.3572000);
    addLocation(writer, "Jimmy's Old Town Tavern", 38.9690000, -77.3862000);
    addLocation(writer, "Ned Devine's", 38.9510000, -77.4107000);
    addLocation(writer, "Old Brogue Irish Pub", 38.9955000, -77.2884000);
    //...
    writer.close();
}

private final static Logger logger = LogManager
        .getLogger(SpatialTools.class);

public static void searchAndUpdateDocument(double lo, double la,
        double dist, IndexSearcher searcher, LuceneModules modules) {
    SpatialContext ctx = SpatialContext.GEO;
    SpatialArgs args = new SpatialArgs(SpatialOperation.IsWithin,
            ctx.makeCircle(lo, la, DistanceUtils.dist2Degrees(dist,
                    DistanceUtils.EARTH_MEAN_RADIUS_KM)));

    PointVectorStrategy strategy = new PointVectorStrategy(ctx, "_point");
    // RecursivePrefixTreeStrategy recursivePrefixTreeStrategy = new
    // RecursivePrefixTreeStrategy(grid, fieldName);
            // How to use it?

            Query makeQueryDistanceScore = strategy.makeQueryDistanceScore(args);

    LuceneSearcher instance = LuceneSearcher.getInstance(modules);
    instance.getTopResults(makeQueryDistanceScore);
            //no results

    Filter geoFilter = strategy.makeFilter(args);

    try {
        Sort chainedSort = new Sort().rewrite(searcher);
        TopDocs docs = searcher.search(new MatchAllDocsQuery(), geoFilter,
                10000, chainedSort);
        logger.debug("search finished, num: " + docs.totalHits);
                    //no results
        for (ScoreDoc scoreDoc : docs.scoreDocs) {
            Document doc = searcher.doc(scoreDoc.doc);
            double la1 = Double.parseDouble(doc.get(latField));
            double lo1 = Double.parseDouble(doc.get(latField));
            double distDEG = ctx.getDistCalc().distance(
                    args.getShape().getCenter(), lo1, la1);

            logger.debug("dist deg: : " + distDEG);
            double distKM = DistanceUtils.degrees2Dist(distDEG,
                    DistanceUtils.EARTH_MEAN_RADIUS_KM);
            logger.debug("dist km: : " + distKM);
        }
    } catch (IOException e) {
        logger.error("fail to get the search result!", e);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-29T17:24:11.313

你看到[javadocs](http://lucene.apache.org/core/4_0_0/spatial/index.html)了吗？这些文档又指向您正在寻找的[SpatialExample.java 。](https://github.com/apache/lucene-solr/blob/branch_4x/lucene/spatial/src/test/org/apache/lucene/spatial/SpatialExample.java)我能做些什么让它们更明显？

如果您一心想要使用一对双打作为内部索引方法，那么请使用 PointVectorStrategy。但是，如果您改为使用 RecursivePrefixTreeStrategy，您将获得出色的过滤器性能。目前，PVS 在可扩展性方面做得更好。您可以将两者用于各自的好处。

只是快速查看您的示例，我发现您没有使用 SpatialStrategy.createIndexableFields()。目的是您使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T05:25:27.330

See the following link for example : [http://mad4search.blogspot.in/2013/06/implementing-geospatial-search-using.html](http://mad4search.blogspot.in/2013/06/implementing-geospatial-search-using.html)

# javascript - 从集合中移除模型会移除视图的引用

> ID：13628609
> 
> 赞同：2
> 
> 时间：2012-11-29T15:03:19.000
> 
> 标签：javascript, backbone.js

在我的应用程序中，我有两个视图共享相同模型的情况。

当我通过模型访问集合并从集合中删除模型时遇到问题。问题是调用后`this.model.collection.remove(this.model)`视图的引用`this.model`是未定义的。

我没有在移除之前解除绑定事件的原因是，我需要`mySecondView`能够了解移除事件，以便从 DOM 中移除它的自身。

```
MyView = Backbone.View.extend({

    events : {
        'click .delete' : deleteModel
    }

    initialize : function() {

        this.model.on('remove', this.dispose, this)
    },

    deleteModel : function() {

        if( this.model.isNew() )
        {

            this.model.collection.remove( this.model );

            //remove all the events bound to the model
            this.model.unbind(); //this.model is undefined

            this.dispose();
        }

    }
});

MySecondView = Backbone.View.extend({

    initialize : function() {

        //call the custom dispose method to remove the view
        this.model.on('remove', this.dispose, this );
    }

});

myModel      = new Backbone.Model();    
myCollection = new Backbone.Collection( myModel );

myView       = new MyView({ model : myModel });
mySecondView = new MySecondView({ model : myModel }); 
```

唯一可行的方法是创建一个对模型的局部变量引用`deleteModel`

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:47:42.290

问题是编程错误。

在调用模型时调用了`this.model.collection.remove( this.model );`一个删除事件，该模型绑定到`dispose`删除对模型的任何本地引用的方法。因此，对模型的引用丢失了。

# javascript - javascript - 一键三功能

> ID：13628611
> 
> 赞同：3
> 
> 时间：2012-11-29T15:03:26.800
> 
> 标签：javascript

首先我想说我是javascript世界的新手。

我想为按钮编写一个函数：

```
when button is pushed -> x=0 ; post(x); display x;
when button is released -> x=1; post(x); display x;
when button is hold down -> while hold: 
            if(x=0){post(x); display x; x++}          
            if(x=1){post(x); display x; x--} 
```

到目前为止，这是我想出的：

[http://pastebin.com/1myT891h](http://pastebin.com/1myT891h)

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:42:52.160

试试这个[小提琴](http://jsfiddle.net/s24kd/4/)：

html:

```
<button id="button">Click here</button><br/>
Status: <span id="status"></span> 
```

Javascript：

```
observeTriState("#button", function(state) {
    var states = { '0':'Push', '1':'Release', '2':'Hold Down' };

    $("#status").text(states[state]);
}, 500);

function observeTriState(selector, callback, holdDelay) {
    var mouseDown = false;
    var mouseIn = false;
    var interval;

    function checkStatus() {
        if (mouseDown && mouseIn) {
            callback(2)
        }
    }

    $(selector).mousedown(function() {
        callback(0);
        mouseDown = true; 
        interval = setInterval(checkStatus, holdDelay); 
    }).mouseup(function() {
        mouseDown = false;
        callback(1);
        clearInterval(interval);
    }).mouseenter(function() {
        mouseIn = true;
    }).mouseleave(function() {
        mouseIn = false;
        mouseDown = false;
        clearInterval(interval);
        callback(1);
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:29:17.917

检查以下 jsFiddle。它可以满足您的需求（至少，我希望它可以）。如果不清楚，请告诉我，我会看看我是否可以澄清一下。

[http://jsfiddle.net/s9nUr/](http://jsfiddle.net/s9nUr/)

这是小提琴中的代码，如果您对实际操作不感兴趣。请注意 jQuery 的使用。

```
var x= 0;
var interval;

var push = function(val) {

}

var hold = function() {
    if ( x === 0 ) {
        console.log('x is 0');    
    }
    if ( x === 1 ) {
        console.log('x is 1');        
    }
}

$('#myButton').on('mousedown', function() {
    x= 0;
    push(x); 

    interval = setInterval(hold, 500);
});

$('#myButton').on('mouseup', function() {
    x = 1;        
    push(x); 

    clearInterval(interval);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:12:45.613

可能会创建一个带有 2 个参数的函数：值和操作。如此等等`when button is pushed -> myfunction(x,"pushed") ...`。

# c# - IDictionary 重复合并 - 添加或更新到现有对象

> ID：13628612
> 
> 赞同：1
> 
> 时间：2012-11-29T15:03:29.630
> 
> 标签：c#, .net, dictionary, hashcode

我会尽我所能解释我在这里做什么——我已经使用过这种方法几次，但从来没有感觉那么好。我相信一定有更好的方法，请赐教。

```
class MyObject
{
    public int Id { get; set; }
    public string Name { get; set; }

    public override bool Equals(object obj)
    {
        if (ReferenceEquals(null, obj))
        {
            return false;
        }
        if (ReferenceEquals(this, obj))
        {
            return true;
        }
        if (obj.GetType() != typeof(MyObject))
        {
            return false;
        }
        return ((MyObject)obj).Id == Id;
    }

    public override int GetHashCode()
    {
        return Id;
    }
}

[Test]
public void Blah()
{
    IDictionary<object, MyObject> duplicateMergerDict = new Dictionary<object, MyObject>();

    MyObject dup1 = new MyObject { Id = 0, Name = "Smith" };
    MyObject dup2 = new MyObject { Id = 0, Name = "Collins" };
    MyObject nonDup = new MyObject { Id = 1, Name = "Smith" };

    IEnumerable<MyObject> test =
        new[] { dup1, dup2, nonDup };

    foreach (var myObject in test)
    {
        MyObject existing;
        if (duplicateMergerDict.TryGetValue(myObject, out existing))
        {
            existing.Name = string.Format("{0} {1}", existing.Name, myObject.Name);
        }
        else
        {
            duplicateMergerDict.Add(myObject, myObject);
        }
    }

    Assert.That(duplicateMergerDict.Count, Is.EqualTo(2));

    Assert.That(duplicateMergerDict[dup1], Is.SameAs(dup1));
    Assert.That(duplicateMergerDict[dup2], Is.SameAs(dup1));

    Assert.That(dup1.Name, Is.EqualTo("Smith Collins"));

    Assert.That(duplicateMergerDict[nonDup], Is.SameAs(nonDup));
} 
```

基本上我想使用 GetHashCode 和 Equals 覆盖来累积重复条目。（或者我应该使用复合键对象 - 即使是比这更复杂的情况？）。上面的方法看起来很乱，但也许这是最好的方法？

比我更聪明的人可以告诉我在哪里可以改进吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:05:05.727

> 基本上我想使用 GetHashCode 和 Equals 覆盖来累积重复条目。

你不能。这不是他们的目的。他们*只是*为了找到一把钥匙，测试它是否相等。你当然不应该在那里改变任何东西。

您使用的方法`TryGetValue`有效，但它要求您的值是可变的，这在 IMO 中并不令人愉快。你可能想看看`ConcurrentDictionary<,>`，它有一个方便的[`AddOrUpdate`](http://msdn.microsoft.com/en-us/library/ee378675.aspx)方法，听起来就像你想要的那样。

# cxf - CXF wsdl2java：验证生成的存根中的 XML 限制

> ID：13628616
> 
> 赞同：1
> 
> 时间：2012-11-29T15:03:45.690
> 
> 标签：cxf, jaxb2, wsdl2java

**问题**：使用 CXFs wsdl2java，是否可以在生成的 Java 存根中包含模式元素和类型的限制？

**用例：** 如果我的 WSDL 包含以下类型：

```
 <xs:complexType name="TestResponse">
  <xs:sequence>
    <xs:element name="code">
      <xs:simpleType>
        <xs:restriction base="xs:int">
          <xs:maxInclusive value="5"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
    <xs:element name="text">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:maxLength value="5"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:element>
   </xs:sequence>
 </xs:complexType> 
```

wsdljava 默认生成带有 setter 的存根，例如：

```
public void setCode(Integer value) {
    this.code = value;
}

public void setText(String value) {
    this.text = value;
} 
```

如果有类似的东西会很棒：

```
public void setCode(Integer value) {
    if (value > 5) throw new ValidationException();
    this.code = value;
}

public void setText(String value) {
    if (value.length() > 5) throw new ValidationException();
    this.text = value;
} 
```

XJC 和 CXFs wsdljava 目前不存在这样的工具/JAXB 插件是否正确？

**到目前为止我发现了什么：**

至少在 2010 年，根据 Oracle Java 编程论坛上的这篇[文章](https://forums.oracle.com/forums/thread.jspa?threadID=2044811)，似乎不支持开箱即用或任何可用的插件。

我知道以下可能的**替代方法**（但尚未完全测试它们）：

*   使用[krasa-jaxb-tools JAXB 插件在存根上生成 JSR-303 注释，正如](http://code.google.com/p/krasa-jaxb-tools)[这里](https://stackoverflow.com/questions/12249366/is-there-a-way-to-add-jsr303-annotations-to-cxf-generated-classes)和[这里](https://stackoverflow.com/questions/13396482/including-xsrestrictions-as-annotations-in-moxy-generated-java-classes)的 stackoverflow 上已经讨论的那样
*   转储 XJC 和 CXFs wsdl2java 并使用[XmlBeans](http://xmlbeans.apache.org/docs/2.0.0/guide/conJavaTypesGeneratedFromUserDerived.html)生成存根（这对我来说不是一个选项，因为我们的项目严重依赖 CXF）
*   等待 CXF 在它们被序列化后验证存根，如此处所讨论[的](https://stackoverflow.com/questions/4609004/jaxb-schema-validation-not-occurring-in-outbound-message-with-cxf-2-3-1)（然而，这意味着在调用设置器时松开验证）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T18:50:16.773

我还没有看到可以做到这一点的 XJC 插件。如果您想为一些基本的验证步骤编写一个，我们当然会感谢您的贡献。

如果您想转而使用 XMLBeans 作为数据模型，CXF 的 wsdl2java 确实支持 XMLBeans。将“-db xmlbeans”标志添加到命令行，它应该生成 XMLBeans 内容而不是 JAXB。

# ms-word - 如何设置Word文档的文件名而不保存它从c#和自动化II

> ID：13628622
> 
> 赞同：7
> 
> 时间：2012-11-29T15:04:01.463
> 
> 标签：ms-word, office-interop

我在[这里](https://stackoverflow.com/questions/13532057/how-to-set-the-file-name-of-a-word-document-without-saving-it-from-c-sharp-and-a)问了一个关于如何通过自动化设置 Word 文档的文件名而不保存它的问题。感谢 Remou，我通过调用 FileSummaryInfo-Dialog 并设置 Title-property 获得了一个很好的方法。

但是现在我遇到的问题是客户希望在（点和下划线）中包含带有特殊字符的文档名称，并且它似乎是单词的一个错误（或一个功能），它削减了标题并且只在用于构建文件名的第一个特殊字符！我已经用谷歌搜索了很多，但是无法找到解决此问题的方法。[此处](http://www.word.mvps.org/FAQs/MacrosVBA/SetDefFilename.htm)也注意到了该问题（请参阅问题下方），但没有解决方案。

有没有人在不保存的情况下设置文件名的另一种解决方案，或者提到的奇怪行为的解决方法/错误修复？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T15:52:56.953

试试[easyhook吧](http://code.google.com/p/easyhook-continuing-detours/wiki/Introduction)，因为这几天除了我手边没有Windows机器。以下只是调用流程（就像我几年前所做的那样，通过[Detours](http://research.microsoft.com/en-us/projects/detours/)将软件的套接字绑定端口更改为不同的端口）

**关于 Hook CreateFileW：**

[easyhook 的 wiki](http://code.google.com/p/easyhook-continuing-detours/wiki/Introduction)中的示例正是我们想要的。

```
CreateFileHook = LocalHook.Create(
                    LocalHook.GetProcAddress("kernel32.dll", "CreateFileW"),
                    new DCreateFile(CreateFile_Hooked),
                    this); 
```

在`CreateFile_Hooked`你可以改变参数`InFileName`，然后调用真正的CreateFileW

```
static IntPtr CreateFile_Hooked(
    String InFileName,
    UInt32 InDesiredAccess,
    UInt32 InShareMode,
    IntPtr InSecurityAttributes,
    UInt32 InCreationDisposition,
    UInt32 InFlagsAndAttributes,
    IntPtr InTemplateFile)
{
    // FIGURE OUT THE FILE NAME THAT YOU WANT HERE
    // IF the InFileName is not your Document name "My.doc", then call orignal CreateFile
    // with all the parameter unchanged.

    // call original API...
    return CreateFile(
        YOUR_CHANGED_FILE_NAME_HERE,
        InDesiredAccess,
        InShareMode,
        InSecurityAttributes,
        InCreationDisposition,
        InFlagsAndAttributes,
        InTemplateFile);
} 
```

**通话流程：**

将标题更改为“My_Document_2012_11_29”后，然后挂钩 Word 进程的 CreateFileW。例如，当 InFileName 为“My.doc”时，您应将其更改为“My_Document_2012_11_29”。

因为这是在 Word 过程中完成的，所以 Detoured 函数不知道“My.doc”是否映射到“My_Document_2012_11_29”。获取此映射信息的方法有很多，一种是将此映射信息保存到应用程序中的已知文件中，然后在 Detoured 函数中读取该文件。

# php - 如何在不破坏 MySQL 数据库的情况下跟踪页面浏览量

> ID：13628627
> 
> 赞同：9
> 
> 时间：2012-11-29T15:04:18.063
> 
> 标签：php, mysql

我正在尝试使用以下查询跟踪 MySQL DB 中的综合浏览量：

`"UPDATE $table SET pageviews = pageviews + 1 WHERE page_id = 1"`

这适用于中低流量。但是，在高流量下，对 DB 的持续写入会导致高读/写争用并最终导致 DB 崩溃。

我已经阅读了 Stackoverflow 和其他地方的几个 QA，其中建议使用 MongoDB 作为替代方案。但是，该选择不可用，我必须坚持使用 MySQL。此外，我无法控制引擎——MyISAM 或 InnoDB（由于基于行的锁定而不是表，InnoDB 性能更好，就像 MyISAM 的情况一样）。

考虑到上述情况，在不破坏数据库（在数据库或其他东西中）的情况下，跟踪网页浏览量的最佳方法是什么？我真的很感激提供代码片段作为起点的答案（如果可能的话）。

顺便说一句，我正在使用 PHP。

更新：@fire 在这里有一个很好的解决方案。但是，它需要使用 memcache。我正在寻找无需特定基础设施即可轻松实现的东西。这是针对可以在不同托管环境中虚拟使用的模块。转念一想，我想到的是某种基于 cookie 或文件日志的实现。我不确定这种实施在实践中如何运作。任何进一步的投入都非常受欢迎。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-29T15:16:54.010

我会使用 memcached 来存储计数，然后将其与 cron 上的数据库同步...

```
// Increment
$page_id = 1;
$memcache = new Memcache();
$memcache->connect('localhost', 11211);

if (!$memcache->get('page_' . $page_id)) {
    $memcache->set('page_' . $page_id, 1);
}
else {
    $memcache->increment('page_' . $page_id, 1);
}

// Cron
if ($pageviews = $memcache->get('page_' . $page_id)) {
    $sql = "UPDATE pages SET pageviews = pageviews + " . $pageviews . " WHERE page_id = " . $page_id;
    mysql_query($sql);
    $memcache->delete('page_' . $page_id);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:26:02.207

我会考虑使用您可用的最快的写作引擎收集原始点击：

```
INSERT INTO hits (page_id, hit_date) VALUES (:page_id, CURRENT_TIMESTAMP) 
```

...然后运行一个定期进程，可能是一个 cron 命令行脚本，它将每小时或每天计算并存储您需要的页数摘要：

```
INSERT INTO daily_stats (page_id, num_hits, day)
SELECT page_id, SUM(hit_id)
FROM hits
WHERE hit_date='2012-11-29'
GROUP BY page_id 
```

（查询只是示例，请根据您的需要进行调整）

另一个典型的解决方案是很好的旧日志解析，用你的 web 服务器的日志提供一个像 AWStats 这样的脚本。

**澄清：我的第一个建议与**[@fire 的](https://stackoverflow.com/a/13628885/13508)建议非常相似，但我没有涉及存储细节。关键是要以最快的方式延迟繁重的处理和最少量的原始信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:51:55.607

您尚未指定此表的读取或写入速率。如果您将索引保持在绝对最小值并且行大小很小，MySQL 通常可以保持良好状态。带有页 ID 和计数器列的表在大多数情况下应该非常快。

InnoDB 也应该没问题。如果系统在繁重的写入活动期间崩溃或断电，MyISAM 可能会以最坏的方式爆炸，它不会被记录在日志中并且不能总是被恢复。InnoDB 更加健壮。

为了从 InnoDB 获得最大性能，您需要根据[标准指南](http://dev.mysql.com/doc/refman/5.5/en/optimizing-innodb.html)调整您的服务器并积极地对其进行基准测试以确保您做对了。每个操作系统都有其怪癖。有时，由于设置不正确，您可能会错过两倍的性能提升。

如果您的跟踪数据库很小，您可能希望创建一个由 RAM 磁盘支持的实例并将其复制到另一个具有常规 HD 的服务器。由于您期望非常高的写入活动，如果您可以在系统崩溃等最坏的情况下承受少量数据丢失，您可以简单地`mysqldump`定期对该数据库进行快照。转储内存支持的数据库甚至有一百万行应该只需要一分钟，并且不会由于 MVCC 而中断写入。

# c# - 如何在 C# 中创建类型化的 IEnumerable？

> ID：13628629
> 
> 赞同：4
> 
> 时间：2012-11-29T15:04:23.427
> 
> 标签：c#, .net, interface, iterator, ienumerable

我可以做这个：

```
public class EnumerableTest : System.Collections.IEnumerable
{
    System.Collections.IEnumerable data;

    public EnumerableTest(System.Collections.IEnumerable d)
    {
        data = d;
    }

    public System.Collections.IEnumerator GetEnumerator()
    {
        foreach (object s in data)
        {
            yield return s;
        }
    }
} 
```

但我不能这样做吗？：

```
public class EnumerableTestString : System.Collections.Generic.IEnumerable<string>
{
    System.Collections.Generic.IEnumerable<string> data;

    public EnumerableTestString(System.Collections.Generic.IEnumerable<string> d)
    {
        data = d;
    }

    public System.Collections.Generic.IEnumerator<string> GetEnumerator()
    {
        foreach (string s in data)
        {
            yield return s;
        }
    }
} 
```

我得到的错误基本上说我错过了方法

```
 public System.Collections.IEnumerator GetEnumerator(); 
```

当我将返回类型更改`GetEnumerator()`为那个时，它告诉我我失踪了

```
 public System.Collections.Generic.IEnumerator<string> GetEnumerator(); 
```

如果我尝试同时包含两者，它会告诉我我有一个重复的方法名称。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T15:08:24.137

> 我该如何解决这个问题？

您需要使用[*显式接口实现*](http://msdn.microsoft.com/en-us/library/vstudio/ms173157.aspx)来实现至少一种`GetEnumerator`方法，通常是非泛型方法。

代码只是带有`using`指令:)

```
using System.Collections;
using System.Collections.Generic;

public class EnumerableTestString : IEnumerable<string>
{
    private IEnumerable<string> data;

    public EnumerableTestString(IEnumerable<string> d)
    {
        data = d;
    }

    public IEnumerator<string> GetEnumerator()
    {
        foreach (string s in data)
        {
            yield return s;
        }
    }

    // Explicit interface implementation for non-generic IEnumerable
    public IEnumerator IEnumerable.GetEnumerator()
    {
        // Delegate to the generic version
        return GetEnumerator();
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-29T15:07:53.937

创建*两者*- 例如`Explicit`将调用实现的`Implicit`实现。

**例子：**

```
public class EnumerableTestString : System.Collections.Generic.IEnumerable<string>
{
    System.Collections.Generic.IEnumerable<string> data;

    public EnumerableTestString(System.Collections.Generic.IEnumerable<string> d)
    {
        data = d;
    }

    public System.Collections.Generic.IEnumerator<string> GetEnumerator()
    {
        foreach (string s in data)
        {
            yield return s;
        }
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator()
    {
        return GetEnumerator();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T15:07:53.330

`System.Collections.Generic.IEnumerable<T>`改为实施。

当你使用 VS 的智能标签这样做时，VS 会自动创建两个方法。一种用于通用实现，另一种用于非通用实现（您已经拥有的），因为也`IEnumerable<T>`需要您实现`IEnumerable`。

```
public class StringData : IEnumerable<string>
{
    ...

    #region IEnumerable<string> Members

    public IEnumerator<string> GetEnumerator()
    {
        foreach (string s in data) {
            yield return s;
        }
    }

    #endregion

    #region IEnumerable Members

    IEnumerator IEnumerable.GetEnumerator()
    {
        return this.GetEnumerator();  // Calls generic GetEnumerator
    }

    #endregion
} 
```

请注意，非泛型方法是显式实现的，因此只能通过接口 ( `IEnumerable x = ...; x.GetEnumerator()`) 访问。它的目的是增加兼容性，并且是前通用 c# 版本（1.0、1.1）的残余。

# jquery - Ajax-Call 失败时停止执行 Linkbutton

> ID：13628634
> 
> 赞同：0
> 
> 时间：2012-11-29T15:04:35.977
> 
> 标签：jquery, asp.net, html, ajax, postback

我有一个 LinkBut​​ton，它只需要在删除函数中的 Ajax-Call 失败时回发。ajax 调用调用一个 Web 方法，如果由于某种原因删除行失败，该方法将引发异常。当我抛出异常时，ajax 调用到达“错误”分支（如预期的那样）。但是当“deleteSelectedRows”函数返回 false 时，回发并未停止。我怎样才能归档这个？

```
<asp:LinkButton ID="Delete" ClientIDMode="Static" runat="server" Text="Delete" OnClientClick="return deleteSelectedRows()" ></asp:LinkButton>

//the jquery code
function deleteSelectedRows() {
        //get selected rows
        var selectedRows = ... getting ids ...

        var postData = "{ 'IDs':'" + selectedRows + "'}";
        var url = "WebMethods.aspx/DeleteRows";
        var status= jQuery.ajax({
            url: url,
            dataType: "html",
            async: false,
            type: "POST",
            data: postData,
            contentType: "application/json; charset=utf-8",
            success: function (msg) {
                return true;//continue postback
            },
            error: function (err) {
                jQuery.jGrowl('Fehler: Auftragspositionen konnten nicht gelöscht werden! Möglicherweise existieren bereits Transaktionen zu dieser Auftragsposition.');
                //e.preventDefault();
                return false;//stop postback
            }
        });
        return status.status == 200;//true when delete worked, false otherwise
    } 
```

编辑：这在我使用 asp:Button 而不是 asp:Linkbutton 时有效……但我不知道为什么？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T07:27:19.247

好的，我解决了：问题是由于下面的代码，如果链接被禁用，我会停止执行（也许这对其他人也有用，所以我在这里发布）：

```
jQuery('.btn[onclick]').each(function () {
    //override onclick so i can check if the link is disabled before execution
    jQuery(this).data('onclick', this.onclick);

    this.onclick = function (event) {
        if (jQuery(this).hasClass('aspNetDisabled')) { //disabled link
            return false;//prevent execution
        };

        //execute link
        jQuery(this).data('onclick').call(this, event || window.event);
    };
}); 
```

我将其更改为，现在它的工作：

```
jQuery('.btn[onclick]').each(function () {
    //override onclick so i can check if the link is disabled before execution
    jQuery(this).data('onclick', this.onclick);

    this.onclick = function (event) {
        if (jQuery(this).hasClass('aspNetDisabled')) { //disabled link
            return false;//prevent execution
        };

        //execute link
        var boolVal = jQuery(this).data('onclick').call(this, event || window.event);
        return boolVal;
    };
}); 
```

我不得不承认，我提供的信息无法解决这个问题！

# internet-explorer - 如何从 IE 7 或 IE 8 中的浏览器 dom 获取（Gauge）google 可视化 api 的 svg 代码？

> ID：13628636
> 
> 赞同：0
> 
> 时间：2012-11-29T15:04:50.387
> 
> 标签：internet-explorer, internet-explorer-7, pdf-generation, google-visualization

我正在使用谷歌可视化 api 来动态生成图表（[仪表](https://developers.google.com/chart/interactive/docs/gallery/gauge)）。我需要从浏览器的 dom 收集生成的 svg 并将其发送到服务器以从中生成 png 图像（使用[apache batik](http://xmlgraphics.apache.org/batik/)）。我可以使用 javascript 的“innerHTML”从 Firefox、chrome、safari 和 IE 9 中的浏览器 dom 中获取 SVG 代码。但是当我在 IE 7 和 IE 8 中尝试相同的操作时，我在 innerHTML 文本中得到了空的 iframe。这是javascript代码，我用来从html获取svg部分。

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">
//Load the Visualization API and the piechart package.
google.load('visualization', '1.0', {'packages':['gauge']});

// Set a callback to run when the Google Visualization API is loaded.
google.setOnLoadCallback(drawVisualization);
function drawVisualization() 
{
      var data = google.visualization.arrayToDataTable([
        ['Label', 'Value'],
        ['Memory', 80],
        ['CPU', 55],
        ['Network', 68]
      ]);

      // Create and draw the visualization.
      new google.visualization.Gauge(document.getElementById('visualization')).
          draw(data);
      alert(document.getElementById('visualization').innerHTML);
}
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:26:02.047

如果问题是关于将 svg 转换为在客户端呈现的 png。那么这可以使用 jsdom 在服务器端实现，而 node.js.JSDOM 是服务器上浏览器的 DOM 实现，以便您可以执行客户端 javascript在服务器本身。

这是如何使用 jsdom、node.js 和 imagemagick 将 svg 转换为 png 的示例

[点击这里](http://eng.wealthfront.com/2011/12/converting-dynamic-svg-to-png-with.html)

希望它能解决你的问题！

# javascript - jQuery jPlayer 错误

> ID：13628641
> 
> 赞同：4
> 
> 时间：2012-11-29T15:04:58.363
> 
> 标签：javascript, jquery, html

我收到以下错误。我正在使用 HTML5。我正在尝试添加音频文件。错误是：

无法获取属性“jPlayer”的值：对象为空或未定义

它在

这是我的脚本：

```
 $(document).ready(function () {
            $("#jpId").jPlayer({
                ready: function () {
                    this.element.jPlayer("setFile", "../179_short_all-the-family-together_0033.mp3"); // Defines the counterpart mp3 and ogg files
                },
                oggSupport: true,

            });
        }); 
```

我的 HTML5 div：

```
<div id="jpId">
</div> 
```

我试过使用标签，但我需要音乐在 IE8、IE9、Firefox、Chrome 中工作。我知道我需要添加 .ogg 文件，但希望在添加其他文件类型之前让它工作。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:53:55.657

我认为您应该先检查 jPlayer Demo 代码和文档。(http://www.jplayer.org)

而且我认为您必须像这样更改您的js：

```
$('#jpId').jPlayer({
    ready: function () {
        $(this).jPlayer("setMedia", { //use "setMedia". "setFile" doesn't in DevGuide
            mp3: "class.mp3", //set mp3 media path, also can use url
            oga: "pop.ogg" // set ogg media path, pay attention to use "oga" not "ogg"
        });
    },
    preload: "none",
    supplied: "oga, mp3", //test set the order of media you want to use
    cssSelectorAncestor: "#jpContainer" // in order to add the controller
}); 
```

html代码建议：

```
<div id="jpId"></div>
<div id="jpContainer">
    <a href="javascript:;" class="jp-play" tabindex="1">play</a>
    <a href="javascript:;" class="jp-pause" tabindex="1">pause</a>
 </div> 
```

你可以查看我写的DEMO页面：http:
[//ohcool.org/sof/13628641.html](http://ohcool.org/sof/13628641.html)

如果您想了解更多关于浏览器音乐文件类型支持的信息，请查看：
[http ://html5doctor.com/native-audio-in-the-browser/](http://html5doctor.com/native-audio-in-the-browser/)

祝你好运！

# eclipse - 编写 Eclipse 设置脚本

> ID：13628642
> 
> 赞同：1
> 
> 时间：2012-11-29T15:04:59.447
> 
> 标签：eclipse, ant

我目前正在使用 ant 编写 Eclipse 设置脚本。我们的想法是创建我们的开发环境的一键设置，替换现有的描述如何手动设置的 Word 文档。

设置涉及解压缩 Tomcat 服务器、解压缩原始 Eclipse 实例、在 Eclipse 之上安装插件等。所有这些现在都运行顺利。

设置的另一部分涉及在 Eclipse 中进行配置——您通常会使用 Eclipse UI 进行的操作。这包括选择特定的 JRE、在 Eclipse 中创建服务器、创建工作区、将一些项目导入工作区。

通过简单地将文件写入 Eclipse 的首选项文件夹，我在初始化 Eclipse 首选项方面取得了一些适度的成功。但这基于逆向工程，感觉像是一种脆弱的方法。此外，我还没有弄清楚如何导入现有项目。

我是否忽略了实现这一目标的简单而强大的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:29:53.130

我之前做过类似的事情，我发现逆向工程方法可以很好地满足偏好。

我发现导入现有项目的唯一方法是编写一个使用`IWorkspace, IProjectDescription and IProject`. 检查[Eclipse 社区论坛上的这个线程以](http://www.eclipse.org/forums/index.php/m/325185/)获取一些指示。[您还可以在Eclipse 帮助](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/core/resources/IWorkspace.html)中找到有关它的更多信息。

然后，只需使用一些参数从您的脚本执行 Eclipse，例如

```
-nosplash -application [your plugin] -data [workspace folder] 
```

# python - 在python中检测文件是否在网络驱动器上

> ID：13628645
> 
> 赞同：5
> 
> 时间：2012-11-29T15:05:04.907
> 
> 标签：python, linux, getdrivetype

如何确定文件是否在网络驱动器上？我想包括路径看起来像在本地磁盘上的情况，但路径中的一个目录实际上是指向网络驱动器的符号链接。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-30T16:58:29.533

我将假设您可以获得网络文件系统及其基本安装点的列表，您可以通过解析 mount 或 df 获得。[如果是这种情况，您应该能够使用os.path](http://docs.python.org/2/library/os.path.html)中的一些不同功能完成您想做的所有事情

这将采用一个文件名和一个网络文件系统的路径。path.realpath 会将符号链接转换为它们链接到的文件的绝对路径。

```
def is_netfile(fname, netfs):
    fname = path.realpath(fname)
    netfs = path.realpath(netfs)
    if path.commonprefix([ netfs, fname ]) == netfs:
        return True
    else:
        return False 
```

您可以将他与[os.walk](http://docs.python.org/2/library/os.html#os.walk)一起使用以浏览目录结构并捕获所有文件或链接到特定网络文件共享上的文件

```
start_dir = '/some/starting/dir'
net1 = '/some/network/filesystem'
remote_files = []

for root, dirs, files in os.walk(start_dir):
    for f in files:
        if is_netfile( path.join(root,f), net1):
            remote_files.append( path.join(root,f))

print remote_files 
```

# ruby-on-rails - 在同一模型中的其他方法中重用同一对象

> ID：13628647
> 
> 赞同：1
> 
> 时间：2012-11-29T15:05:14.167
> 
> 标签：ruby-on-rails

使用 Rails 3.2。我有以下代码：

```
# photo.rb
class Photo < ActiveRecord::Base
  before_create :associate_current_user
  after_save :increase_user_photos_count
  after_destroy :decrease_user_photos_count

  private

  def associate_current_user
    current_user = UserSession.find.user
    self.user_id = current_user.id
  end

  def increase_user_photos_count
    current_user = UserSession.find.user
    User.increment_counter(:photos_count, current_user.id)
  end

  def decrease_user_photos_count
    current_user = UserSession.find.user
    User.decrement_counter(:photos_count, current_user.id)
  end
end 
```

在创建新记录之前，它会搜索`current_user`. 如果一次只有 1 条新记录，这没关系。但是如果要创建 100 条记录，它会搜索相同的`current_user`100 次。肯定有性能问题。

1.  我不希望它在每次创建记录/更新照片计数等时一直查找当前用户。
2.  重构后，这是否会影响其他也在使用他们的帐户上传照片的用户？

**注意：**由于某些原因，我不能使用`counter_cache`and`photos_controller.rb`因为我遵循这个例子：[http ://www.tkalin.com/blog_posts/multiple-file-upload-with-rails-3-2-paperclip-html5-和-没有-javascript](http://www.tkalin.com/blog_posts/multiple-file-upload-with-rails-3-2-paperclip-html5-and-no-javascript)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:09:06.623

用这个

```
def current_user
  @current_user ||= UserSession.find.user
end 
```

这将缓存实例变量中的值，`@current_user`除非它是 nil （第一次在请求中），在这种情况下它将设置它。

# umbraco - umbraco 4.7.1.1 无法在插入图像对话框中上传新图像

> ID：13628649
> 
> 赞同：0
> 
> 时间：2012-11-29T15:05:18.473
> 
> 标签：umbraco

我最近从 umbraco 4.0.4.2 迁移到 4.7.1.1

在旧的 umbraco 中，插入图像对话框包括媒体树和创建新选项卡 ![在 umbraco 4.0.4.2](../Images/5e073de49415db4faee436aad4f491e4.png)

而新的没有.. ![在 umbraco 4.7.1.1](../Images/8e159bd3d869b3d54c4043ca8d78428c.png)

我们需要能够直接从编辑器上传图片。我该怎么做呢？

谢谢！伊格尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T16:01:25.173

Umbraco v4.7 insert image does work as you have previously experienced for a clean install. However for some reason this does occur when upgrading from older umbraco versions.

I would suggest updating Tiny MCE: [http://our.umbraco.org/forum/ourumb-dev-forum/bugs/24523-Why-not-update-jquery-and-tinymce-to-latest-version](http://our.umbraco.org/forum/ourumb-dev-forum/bugs/24523-Why-not-update-jquery-and-tinymce-to-latest-version)

# django - 如何将 url 作为包含的参数传递

> ID：13628657
> 
> 赞同：11
> 
> 时间：2012-11-29T15:05:57.160
> 
> 标签：django, django-templates

我想知道如何将 url 作为包含在 django 模板中的参数传递。

我的代码中有一个用于创建按钮的 HTML 文件。因此，当要添加此按钮时，我只需将其包含在内。问题是其中1个参数是URL，目前我还没有找到除了放置文本url之外的其他解决方案。

所以我有这个：

```
{% include "button.html" with title="title" link="/new-event/" %} 
```

我必须有类似的东西：

```
{% include "button.html" with title="title" link={% url myview.view%} %} 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-01-31T09:43:07.533

您是否尝试过这种语法：

```
{% url 'some-url-name' arg arg2 as the_url %}
{% include "button.html" with title="title" link=the_url %} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-29T15:11:27.320

我相信您必须将 url 分配给添加到上下文中的变量，以便在包含标记中使用它。

例子：

**看法：**

```
from django.core.urlresolvers import reverse

def your_view(request):
    url = reverse('the_url_name_to_reverse', args=[], kwargs={})
    return render(request, 'the-template.html', {'url': url}) 
```

**模板：**

```
{% include "button.html" with title="title" link=url %} 
```

如果它是您在每个模板中都需要的值，您可以考虑添加上下文处理器以将反向 url 值添加到上下文中

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-01T18:27:25.043

有些人可能会发现此解决方案更合适：

首先创建一个过滤器

```
from django.core.urlresolvers import reverse
@register.filter()
def rev(value):
    return reverse(value) 
```

然后像这样在模板中使用它

```
{% include "button.html" with title="title" link="myview.view"|rev %} 
```

# hadoop - Hive 在带引号的字段中使用逗号加载 CSV

> ID：13628658
> 
> 赞同：50
> 
> 时间：2012-11-29T15:05:57.810
> 
> 标签：hadoop, hbase, hive, hdfs, delimiter

我正在尝试将 CSV 文件加载到 Hive 表中，如下所示：

```
CREATE TABLE mytable
(
num1 INT,
text1 STRING,
num2 INT,
text2 STRING
)
ROW FORMAT DELIMITED FIELDS TERMINATED BY ",";

LOAD DATA LOCAL INPATH '/data.csv'
OVERWRITE INTO TABLE mytable; 
```

csv 由逗号 (,) 分隔，如下所示：

```
1, "some text, with comma in it", 123, "more text" 
```

这将返回损坏的数据，因为第一个字符串中有一个“，”。
有没有办法设置文本分隔符或让 Hive 忽略字符串中的“，”？

我无法更改 csv 的分隔符，因为它是从外部源中提取的。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-11-30T13:59:11.067

如果您可以重新创建或解析您的输入数据，您可以为 CREATE TABLE 指定一个转义字符：

```
ROW FORMAT DELIMITED FIELDS TERMINATED BY "," ESCAPED BY '\\'; 
```

将接受此行作为 4 个字段

```
1,some text\, with comma in it,123,more text 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-11-29T16:52:44.313

问题是它`Hive`不处理引用的文本。您需要通过更改字段之间的分隔符来预处理数据（例如：使用 Hadoop 流作业），或者您也可以尝试使用自定义[CSV SerDe](https://github.com/ogrodnek/csv-serde)，它使用 OpenCSV 来解析文件。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2016-02-11T03:16:21.763

从 Hive 0.14 开始，CSV SerDe 是 Hive 安装的标准部分

`ROW FORMAT SERDE 'org.apache.hadoop.hive.serde2.OpenCSVSerde'`

（参见：[https](https://cwiki.apache.org/confluence/display/Hive/CSV+Serde) ://cwiki.apache.org/confluence/display/Hive/CSV+Serde ）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-09T19:23:11.117

将分隔符放在单引号中，它将起作用。

```
ROW FORMAT DELIMITED 
FIELDS TERMINATED BY ','
LINES TERMINATED BY '\n'; 
```

这将起作用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-09T13:54:38.497

ORG.APACHE.HADOOP.HIVE.SERDE2.OPENCSVSERDE Serde 为我工作。我的分隔符是“|” 并且其中一列用双引号括起来。

询问：

```
CREATE EXTERNAL TABLE EMAIL(MESSAGE_ID STRING, TEXT STRING, TO_ADDRS STRING, FROM_ADDRS STRING, SUBJECT STRING, DATE STRING)
ROW FORMAT SERDE 'ORG.APACHE.HADOOP.HIVE.SERDE2.OPENCSVSERDE'
WITH SERDEPROPERTIES (
     "SEPARATORCHAR" = "|",
     "QUOTECHAR"     = "\"",
     "ESCAPECHAR"    = "\""
)    
STORED AS TEXTFILE location '/user/abc/csv_folder'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-14T14:54:07.490

在 FIELDS TERMINATED BY '\;' 中添加反斜杠

例如：

```
CREATE  TABLE demo_table_1_csv
COMMENT 'my_csv_table 1'
ROW FORMAT DELIMITED
FIELDS TERMINATED BY '\;'
LINES TERMINATED BY '\n'
STORED AS TEXTFILE
LOCATION 'your_hdfs_path'
AS 
select a.tran_uuid,a.cust_id,a.risk_flag,a.lookback_start_date,a.lookback_end_date,b.scn_name,b.alerted_risk_category,
CASE WHEN (b.activity_id is not null ) THEN 1 ELSE 0 END as Alert_Flag 
FROM scn1_rcc1_agg as a LEFT OUTER JOIN scenario_activity_alert as b ON a.tran_uuid = b.activity_id; 
```

我已经测试过了，它确实有效。

# objective-c - 按下了哪个按钮

> ID：13628659
> 
> 赞同：-3
> 
> 时间：2012-11-29T15:06:01.450
> 
> 标签：objective-c, ios

我正在制作一个带有 4 个 UIImageView 和 4 个 UIButtons 的应用程序。每个按钮都连接到一个 UIAlerView，它有一个打开照片库的选项，因此可以更改 UIImageView。我的问题是我不知道如何告诉 UIAlertView 按下了哪个 UIButton。

我怎样才能写出哪个按钮被按下了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:20:06.960

1.  如果您正在使用界面构建器或将它们添加不同的目标，则可以将所有按钮连接到另一种方法。它会更容易但不是非常可扩展，或者它不会与动态数量的按钮兼容。

2.  使用以下方法将相同的目标和选择器添加到所有按钮：

    ```
    [_yourButton1 addTarget:self
               action:@selector(aButtonTapped:)
     forControlEvents:UIControlEventTouchDown]; 
    ```

    并在 aButton tapped 方法中检查哪个按钮被点击并采取相应措施：

    ```
    - (void) aButtonTapped:(id) sender{

         if ( sender == _yourButton2) //Do sth
    } 
    ```

在这两种情况下，使用界面生成器都会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:09:31.010

有很多方法可以做。

如果您记录发件人，则在该操作中，它将显示按下了哪个按钮。

```
-(IBAction) myFirstButton: (id) sender {
  NSLog(@"User clicked %@", sender);
  // Do something here with the variable 'sender'
  /*if ( [[sender title] isEqualToString:@"Button 1"] ) { 
        //do whatever you want
  */
} 
```

第二种方式是通过发布和观察通知。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T15:09:42.623

您可以为按钮添加标签。

# python - 这个 Python 表达式有意义吗？

> ID：13628661
> 
> 赞同：5
> 
> 时间：2012-11-29T15:06:05.547
> 
> 标签：python, logic, expression

我在一个python程序中多次发现这种表达式：

```
if variable is not None:
    dothings(variable) 
```

这对我来说似乎很奇怪，我认为它没有比：

```
if variable:
    dothings(variable) 
```

可能我对Python不够了解，表达式在某处有解释？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-29T15:07:43.707

`variable`可以是`0`, 或`False`, 或`[]`, 或`()`; 换句话说，是“虚假的”，然后该`if`语句将被跳过。

有关在布尔上下文中被认为是错误的更多详细信息，请参阅[真值测试。](http://docs.python.org/2/library/stdtypes.html#truth-value-testing)

简而言之，测试 if`variable is not None`允许`variable`是*其他任何东西*，包括在布尔上下文中否则会被视为 False 的值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-29T15:07:36.537

有些值是*虚假*的，但不是`None`。您可能仍然想要`dothings()`这些值。

[以下是 Python 2 中错误的内容*。*（](http://docs.python.org/2/library/stdtypes.html#truth-value-testing)您可能希望将 URL 中的“2”更改为“3”以获取 Python 3 的值，但变化不大。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T15:08:35.407

例如

```
i = 0

if i is not None:
    print i    # prints i

if i:
    print i    # prints nothing 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T15:12:50.790

在谷歌语音 python 实现中，我也遇到了这个问题，它们的使用是在函数调用期间。参数默认为“无”，然后在调用函数时，他们可以检查值是否已更改或默认值。IE

```
def login (user=None, password=None)
  if user is None:
     user = input('Please enter your username');
  ...
  return <something>; 
```

由

```
login() 
```

或者

```
login(user='cool_dude') 
```

或者

您希望的任何用户/密码组合。

此外，您对逻辑的“更新”意味着变量 == true 或 false。这并不适用于所有情况（它可能在某些情况下有效，但我将它们扔掉，因为它不是一般情况）。您使用“NONE”逻辑测试的是变量是否包含除 NONE 之外的任何内容。与我上面所说的类似，所有“登录功能”所做的是确定用户是否传递了任何东西，而不是该值是否有效、真实等。

# image - 如何在 scikit-learn（用于计算机视觉）中使用我自己的数据集？

> ID：13628670
> 
> 赞同：9
> 
> 时间：2012-11-29T15:06:41.703
> 
> 标签：image, dataset, machine-learning, scikit-learn, feature-extraction

如何在 scikit-learn 中使用我自己的数据集？Scikit Tutorial总是以加载他的数据集（数字数据集，花卉数据集......）为例

[http://scikit-learn.org/stable/datasets/index.html](http://scikit-learn.org/stable/datasets/index.html) 即：从 sklearn.datasets 导入 load_iris

我有我的图像，但我不知道如何创建新图像。

特别是，对于开始，我使用我找到的这个例子（我使用库 opencv）：

```
img =cv2.imread('telamone.jpg')

# Convert them to grayscale
imgg =cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)

# SURF extraction
surf = cv2.SURF()
kp, descritors = surf.detect(imgg,None,useProvidedKeypoints = False)

# Setting up samples and responses for kNN
samples = np.array(descritors)
responses = np.arange(len(kp),dtype = np.float32) 
```

我想提取一组图像的特征，以一种对实现机器学习算法有用的方式！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T15:49:38.060

您首先需要明确定义您要实现的目标：“将特征提取到一组图像中，以一种对实现机器学习算法有用的方式！” 太模糊了，无法给你任何指导。

您是否尝试这样做：

*   图片整体的图像分类（例如室内场景与室外场景）？

*   在一组图片的子部分内进行对象识别（例如识别不同图片中同一对象的多个实例），可能使用具有各种大小窗口的扫描程序？

*   对象检测和基于类的分类（例如，查找图片中所有出现的汽车或行人，以及这些类实例的每个出现的边界框）？

*   全图语义解析，也就是像素的分割+每个段的类分类（建筑、道路、人、树）......

这些任务中的每一个都需要不同的管道（特征提取+机器学习模型组合）。

您可能应该从阅读有关该主题的书开始，例如：[http ://szeliski.org/Book/](http://szeliski.org/Book/)

另外作为旁注，stackoverflow 可能不是提出此类开放式问题的最佳场所。

# eclipse - eclipse插件在包资源管理器中突出显示类名

> ID：13628671
> 
> 赞同：1
> 
> 时间：2012-11-29T15:06:44.450
> 
> 标签：eclipse, eclipse-plugin

在开发 Eclipse 插件时，有没有办法修改包资源管理器。假设我想突出显示/着色少于 200 行代码的类名或在该文件旁边添加文本。有可能发展吗？或者更好的是有一个现有的 eclipse 插件可以做到这一点。有谁知道帮助我的教程或链接。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:13:24.567

我会考虑为导航视图（导航器、Java 资源管理器、包资源管理器等）中的项目编写上下文菜单操作，以验证所选项目（或它们包含的项目，例如，如果您选择了一个包） ）。您可以使用标记来指示哪些文件（以及这些文件中的行）有您发现的问题。

有关如何对这些 API 进行编码的示例，请使用 New Eclipse PLugin 向导中的模板。有一个用于弹出菜单操作的模板和一个用于构建器的模板。构建器示例展示了如何验证多个文件和管理标记。

# java - NXT 和安卓智能手机之间的蓝牙

> ID：13628677
> 
> 赞同：1
> 
> 时间：2012-11-29T15:06:55.200
> 
> 标签：java, android, bluetooth, nxt

我希望我的 Android 智能手机接收来自 Lego Mindstorms NXT 单元的消息。发送消息后，电话将拨打列表中的第一个号码，如果收到“忙信号”或四个信号均无应答，则拨打列表中的下一个号码，如果没有人则显示“警报失败”答案。那么，如何对手机进行编程以在收到消息后激活拨号器？我可以做列表和其他事情，但是一旦通过蓝牙收到消息，我在激活拨号器时大多遇到问题。

我正在将 Eclipse 用于 android 应用程序，我发现很难使用 lejos（我还没有真正找到任何方法来了解它，我只是不断遇到问题）所以我正在 NXT 中对 NXT 单元进行编程- G。

# c# - 在 Excel 加载项中优化数据库调用

> ID：13628678
> 
> 赞同：0
> 
> 时间：2012-11-29T15:06:57.460
> 
> 标签：c#, dll, excel, formula, vba

我正在用 .NET (C#) 编写一个 DLL，它可以作为插件加载到 Excel 中。DLL 将提供许多可用作 Excel 中的公式的函数，以从外部应用程序的数据库中查找某些值。

对于这些公式函数中的每一个，DLL 都需要访问数据库，因此会有太多的数据库调用。例如，如果在 10 个单元格中使用公式 1，在 20 个单元格中使用公式 2，则将调用 30 次数据库

有没有办法可以对数据库的每个公式进行一次调用？有什么实现思路吗？

谢谢。

编辑：

基本上，我正在尝试编写一个通用 DLL（Excel 插件），任何使用 Excel 和特定 3rd 方会计软件的用户都可以使用它。用户插入 Excel 的每个公式，将根据传递的参数查询第 3 方应用程序数据库并返回特定值。

例如，用户可以使用公式查询特定分类帐的分类帐余额，或使用另一个公式查询 SKU 的库存余额等。我将有不同类别的公式，例如基于分类帐的公式，基于 SKU 的公式，等。用户可以设计并排比较报告，在单独的列中显示第一季度和第二季度的分类账余额等。

该插件旨在充当报表设计器（没有任何向导，仅基于公式），用户可以在其中设计自己的 Excel 报表，按照他们想要的方式对其进行格式化，并将会计软件中的值提取到他们想要的任何单元格中。

但是，我不是每次都从数据库中读取来评估每个公式，而是首先设计一个“公式执行计划”，这样我就可以将对数据库的多次调用合并为对单个公式的一次调用，在那里我可以传递所有用户在 Excel 工作表中该公式的所有实例中指定的参数。

否则，Excel 工作表将花费很长时间来评估公式，使其不切实际。我预计一份报告中平均有大约 100 个公式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:21:41.757

在不知道您尝试接收什么数据的情况下，您可以在代码中返回数据集并将数据集映射到公式，而不是每次都运行回数据库。因此，如果您说获取股票报价或其他内容，则可以在查询数据库时获取所有“WHERE”项目并将它们放入 IN 子句中。拥有相关更新的数据集后，您可以从数据集而不是数据库发送。Recalcs 将通过一次调用再次抓取运行到数据库。

您可以扩展单元格以获取更新标志，并且仅从这些标志中刷新。

暂停对公式的计算，仅在必要时刷新。

只是大声思考......或任何打字等价物。

编辑：我在我的大脑中深入了解它的机制，我意识到我已经脱离了我的元素。对不起。我从来没有用 VS 创建过 .DLL 或插件，所以这之后的一切都是纯粹的猜测和猜测，可能会也可能不会造成弊大于利。

我认为 UDF 的执行需要重新路由，直到执行计划被执行。

您将需要一些对象。

1.  ExecutionPlan - 此对象将管理您的查询列表。批量交易或单笔交易。您需要一种将请求转换为 sql 的方法。然后一次调用将 sql 传递给数据库。
2.  DataCache - 这将是所有返回数据的记录集。如果它被提取了，我会用一个标志或其他东西来封装它。

该公式将类似于（伪代码）

```
 if(dataCache.executed)
      formula.returnValue = dataCache.value(valueYouWantToReturn)
 else
      executePlan.add(valueYouWantToGet);
      formula.returnValue = "queued"; 
```

然后，您需要强制重新计算（这将导致所有 100 个公式在 dataCache 进入数据库一次后进入数据存储区 (dataCache) 以获取其值。

您的 sql 转换器将基本上构建巨大`IN`的子句或一堆`OR`通过字符串构建的 chaned。因此，您有一个 Ledger 值的子句，当调用 ExecutionPlan.Add 方法时，它会将您要检索的值添加到 Ledger 的 select 语句中。

然后当 ExecutionPlan.Execute 被调用时。它将执行 sql 语句，将其放入记录集中供您在调用 dataCache.getValue(value) 时进行索引。您将搜索“值”并将其发送回函数。

我正在解释它，但我认为它会起作用吗？我认为...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T19:48:45.347

您可能需要考虑在 Excel 中使用 CUBEVALUE 和其他 CUBE 函数。CUBEVALUE 函数已经完成了您的 DLL 打算做的事情——每个函数从外部数据库中提取一个值。问题是源数据需要采用 OLAP 格式并响应 MDX 而不是 SQL。

然而，这并不难设置，尽管它超出了本回复的范围。幸运的是，会计倾向于巧妙地融入 OLAP 多维数据集——您可以为日期、部门、帐户等设置维度。或者对于库存，您可以在项目、位置、状态（订单、发货、库存）上设置维度等等

至少值得研究一下。

# jquery-ui - 带有位置选项的jquery ui对话框定位

> ID：13628680
> 
> 赞同：1
> 
> 时间：2012-11-29T15:07:12.610
> 
> 标签：jquery-ui, position, jquery-ui-dialog

这是html：

```
<div id="dlgAddStrategy" title="sss">
       ...
    </div> 
```

和js：

```
$("#dlgAddStrategy").dialog(
    {
        autoOpen: false,
        width: 350,
        modal: true,
        position: { my: "top center", at: "top", of: window },
        buttons:
        {
           ..
        }
     } 
```

它不会重新定位。它总是在整个窗口的中心，而不是它的中心顶部。

我也试过：

```
position: { my: "top center", at: "top", of: button} 
```

和

```
position: { my: "center center", at: "top", of: window } 
```

# jquery - jQuery 对象没有方法和这个

> ID：13628683
> 
> 赞同：0
> 
> 时间：2012-11-29T15:07:14.677
> 
> 标签：jquery, object, methods, this

我在没有得到答案的情况下对前 12 个左右的问题进行了排序，所以这是我的特定状态：

```
function someFunction( elem ){
    var someVar = elem.siblings(':input[type=radio]').attr('name');
    console.log( group );
}

$('my-element').on('click', $(this), someFunction ); 
```

这给了我一个“对象没有方法兄弟”错误。最初我在 .on 事件处理程序中将 somefunction 的内容作为一个函数，并且一切正常。我知道我缺少关于 jQuery 如何投射 $(this) 的内容，但我不确定它可能是什么。我可以从 someFunction 中转储 elem 并查看我所追求的元素，但我无法操纵它。

任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:09:51.937

```
function someFunction(){
    var someVar = $(this).siblings(':input[type=radio]').attr('name');
    console.log( group ); // <-- whats group??
}

$('my-element').on('click', someFunction); 
```

**注意：**我的方法将在每个“我的元素”上附加一个事件处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:14:11.790

你应该`bind`改用。

```
function someFunction(){
    var someVar = $(this).siblings(':input[type=radio]').attr('name');

}

$('my-element').bind('click', someFunction); 
```

# c++ - Boost 1.49.0 编译问题

> ID：13628685
> 
> 赞同：6
> 
> 时间：2012-11-29T15:07:18.687
> 
> 标签：c++, boost, message-queue

我试图用 VS2008 编译这个 boost 依赖类（错误行是 /**/）：

```
#include <boost/interprocess/ipc/message_queue.hpp>
#include <boost/interprocess/sync/scoped_lock.hpp>
#include <boost/interprocess/sync/named_mutex.hpp> 
#include <boost/interprocess/sync/named_condition.hpp>

struct SafeShardQueue
{
    typedef boost::interprocess::scoped_lock<boost::interprocess::named_mutex> scoped_mutex;

    SafeShardQueue()//:
    {
    }

    ~SafeShardQueue()
    {
        remove();
    }

    void wait_msg()
    {
        scoped_mutex locker(*mu);
        data_avail_condition->wait(locker);
    }

    void wait_space()
    {
        scoped_mutex locker(*mu);
        queue_empty_condition->wait(locker);
    }

    boost::shared_ptr<boost::interprocess::message_queue> msgs;
    boost::shared_ptr<boost::interprocess::named_condition> data_avail_condition;
    boost::shared_ptr<boost::interprocess::named_mutex> mu;
    boost::shared_ptr<boost::interprocess::named_condition> queue_empty_condition;

    static SafeShardQueue* open()
    {
        SafeShardQueue* tmp = new SafeShardQueue();
        boost::interprocess::open_only_t open_create_type;
        /***/tmp->msgs.reset(new boost::interprocess::message_queue  (open_create_type, "message_queue"));**
        tmp->mu.reset(new boost::interprocess::named_mutex(open_create_type, "shared_queue_mutex"));
        tmp->data_avail_condition .reset(new boost::interprocess::named_condition(open_create_type, "data_avail_condition"));
        tmp->queue_empty_condition .reset(new boost::interprocess::named_condition(open_create_type, "queue_empty_condition"));
        return tmp;
    }

    static SafeShardQueue* create()
    {
        remove();
        SafeShardQueue* tmp = new SafeShardQueue();
        boost::interprocess::create_only_t open_create_type;

        std::stringstream ss;
        try
        {
             /***/tmp->msgs.reset(new boost::interprocess::message_queue(open_create_type, "message_queue", 256, 1024));**
            tmp->mu.reset(new boost::interprocess::named_mutex(open_create_type, "shared_queue_mutex"));
            tmp->data_avail_condition .reset(new boost::interprocess::named_condition(open_create_type, "data_avail_condition"));
            tmp->queue_empty_condition .reset(new boost::interprocess::named_condition(open_create_type, "queue_empty_condition"));
        }
        catch (const boost::interprocess::interprocess_exception& e)
        {
            ss << e.what();
        }
        return tmp;
    }

    static void remove()
    {
        boost::interprocess::message_queue::remove("message_queue");
        boost::interprocess::named_mutex::remove("shared_queue_mutex");
        boost::interprocess::named_condition::remove("data_avail_condition");
        boost::interprocess::named_condition::remove("queue_empty_condition");
    }
}; 
```

我收到以下错误消息：

```
1>\boost\boost\interprocess\ipc\message_queue.hpp(254) : error C2039: 'priority_functor' : is not a member of 'boost::interprocess::ipcdetail::ipcdetail'
1>\boost\boost\interprocess\ipc\message_queue.hpp(425) : see reference to class template instantiation 'boost::interprocess::ipcdetail::mq_hdr_t<VoidPointer>' being compiled
1>        with
1>        [
1>            VoidPointer=boost::interprocess::offset_ptr<void>
1>        ]
1>\boost\boost\interprocess\ipc\message_queue.hpp(425) : while compiling class template member function 'unsigned int boost::interprocess::message_queue_t<VoidPointer>::get_mem_size(unsigned int,unsigned int)'
1>        with
1>        [
1>            VoidPointer=boost::interprocess::offset_ptr<void>
1>        ]
1>\boost\boost\interprocess\ipc\message_queue.hpp(465) : while compiling class template member function 'boost::interprocess::message_queue_t<VoidPointer>::message_queue_t(boost::interprocess::open_only_t,const char *)'
1>        with
1>        [
1>            VoidPointer=boost::interprocess::offset_ptr<void>
1>        ]
1>\**sharedqueue.h(42)** : see reference to class template instantiation 'boost::interprocess::message_queue_t<VoidPointer>' being compiled
1>        with
1>        [
1>            VoidPointer=boost::interprocess::offset_ptr<void>
1>        ]
1>\boost\boost\interprocess\ipc\message_queue.hpp(254) : error C2955: 'boost::interprocess::ipcdetail::priority_functor' : use of class template requires template argument list
1>\boost\boost\interprocess\ipc\message_queue.hpp(209) : see declaration of 'boost::interprocess::ipcdetail::priority_functor'
1>\boost\boost\interprocess\ipc\message_queue.hpp(254) : error C2143: syntax error : missing ',' before '<' 
```

似乎您不能在同一个类中同时使用 interprocess::message_queue 和 interprocess:named_condition 。

有任何想法吗？非常感谢您在这个问题上的帮助。

# facebook - iframe 上的 HTML5 全屏 API ？（Facebook）

> ID：13628687
> 
> 赞同：1
> 
> 时间：2012-11-29T15:07:26.417
> 
> 标签：facebook, html, fullscreen

我正在尝试使用 HTML5 全屏 API 做一些事情，但它似乎在 iframe 的元素中不起作用（我试图在 facebook 上使用它，最终得出了这个结论）。

有谁知道即使在 iframe 上也可以让它工作的方法？这本质上是因为我想在 facebook 应用程序中使用全屏，所以我可以有一个真正的全屏，而不必使用 flash..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:19:35.870

如果我理解您的要求，那么不：Facebook.com 不能显示在 iframe 中。

如果您在浏览器中查看您的 Javascript 控制台，尝试使用 iframe 将 www.facebook.com 带入页面会出现错误`Refused to display document because display forbidden by X-Frame-Options.`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T17:05:51.383

好的，答案很简单：

webkitallowfullscreen 根据浏览器等变化。

但 ：

*   Facebook 还不支持它。
*   他们正在考虑
*   看到这个：[https ://developers.facebook.com/bugs/436162913102704?browse=search_5046c9a1032a58d19137888](https://developers.facebook.com/bugs/436162913102704?browse=search_5046c9a1032a58d19137888)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-08T08:29:43.623

Facebook 现在完美支持 HTML5 Fullscreen API

# ruby-on-rails - 创建只有特定用户才能看到的表单。

> ID：13628690
> 
> 赞同：1
> 
> 时间：2012-11-29T15:07:38.457
> 
> 标签：ruby-on-rails, ruby, forms, private

我对 ruby​​ on rails 比较陌生，但这不是我的第一个项目。我正在尝试创建一个活动管理网站，组织者可以在其中登录并使用用户信息和电子邮件地址填充表单。然后，用户会收到一封电子邮件，允许他们支付最后到期的任何费用。我正在使用 devise cancan 和 rolify 并设置了 3 个角色。

基本上我不确定如何将表格设为私有，因此只有聚会中的成员才能看到表格并支付金额。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:17:36.907

你可以这样做：

```
class PartyController < ApplicationController
  def view_payment_form
    unless current_user.has_role?(:member, Party.find(params[:id])) 
      flash[:error] = "You are not a member"
      redirect :back
    else
      # do what ever is needed to display form
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:14:08.017

CanCan 的作者 Ryan Bates 有[几个优秀的 RailsCasts 授权](http://railscasts.com/?tag_id=26)——如果你对 Rails 比较陌生，这是你花的最好的 9 美元 :-) 我很确定如果没有 Railscasts，Rails 将不再存在 :-)

也许还可以看到我在下面添加的评论中的链接。

更新：删除了使用 CanCan 的建议，因为我错过了 OP 已经在使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T19:20:46.877

CanCan 的主要特点是可以将所有授权码隐藏在单个类中，其中包括 `CanCan::Ability`类。在最简单的情况下，您只需调用该类`Ability`。

如果您已经使用 CanCan，您就会知道在该类中定义了`initialize`方法。在您的情况下，它可能看起来像这样：

```
class Ability

  include CanCan::Ability

  def initialize(user)
    user ||= User.new # guest user (not logged in)

    can :manage, :party do |party|
      party.members.include? user
    end
    can :read, :all
  end
end 
```

这段代码已经确保只有一个成员可以管理 (:update, :create, :destroy) 一个派对。因此，即使页面上的表单对所有人可见，如果非成员提交，控制器也会返回错误。

但是，当然，您想要比这更好，因此在特定视图中您可以添加检查：

```
<% if can? :manage, @party %>
  <%= form_for @party do |f| %>
    <!-- your form here -->
  <% end %>
<% end %> 
```

`@party`您要编辑的特定实例在哪里。

# drupal - 如何排除与包含视图的页面具有相同分类术语的内容？

> ID：13628692
> 
> 赞同：0
> 
> 时间：2012-11-29T15:07:40.793
> 
> 标签：drupal, drupal-views, drupal-taxonomy

这里有点奇怪，但我必须创建一个存档页面，但要确保我不显示“实时”问题的内容。

所以，我有一个问题编号的分类 - 网站中的每个页面都必须有这个，以确保它们将来显示在正确的存档中，但在存档页面上我只想显示以前问题的内容，所以想排除任何与用户正在查看的存档页面具有相同问题编号的内容。

我知道如何从视图中排除当前页面（即：为相关文章创建视图时），并且我已经能够排除某些其他分类术语，但如何排除当前页面？

谢谢

炖

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:01:52.200

我已经想好该怎么做了！所以以防万一你有同样的问题：

使用寻呼机 | 显示所有项目 | 偏移量 1

然后不会显示最近的项目。

完美的

# sql - 子查询返回超过 1 个值。

> ID：13628693
> 
> 赞同：1
> 
> 时间：2012-11-29T15:07:41.747
> 
> 标签：sql, sql-server

运行此查询后，我会收到以下错误

```
UPDATE stockloan_feed 
SET CUSIP =( 
      SELECT CUSIP FROM stockloan_feed_cusip_matching 
      WHERE stockloan_feed_cusip_matching.SEDOL = stockloan_feed.SEDOL OR       
      stockloan_feed_cusip_matching.ISIN = stockloan_feed.ISIN) 
WHERE CUSIP IS NULL and date = DATEDIFF(d, 0, GETDATE()-1) 
```

子查询返回超过 1 个值。当子查询跟随 =、!=、<、<=、>、>= 或子查询用作表达式时，这是不允许的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:10:15.563

```
UPDATE t1
SET t1.CUSIP = t2.CUSIP
FROM  stockloan_feed t1
INNER JOIN stockloan_feed_cusip_matching t2 
        ON t2.SEDOL = t1.SEDOL 
        OR t2.ISIN  = t1.ISIN
WHERE t1.CUSIP IS NULL
  AND t1.date = DATEDIFF(d, 0, GETDATE()-1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:10:32.407

这很简单，您尝试将列值分配给子查询的结果，但子查询返回多个值。

您可以尝试指定您只想要子查询的第一个结果：

```
UPDATE stockloan_feed
SET    CUSIP = (SELECT TOP 1 CUSIP
                FROM   stockloan_feed_cusip_matching
                WHERE  stockloan_feed_cusip_matching.SEDOL = stockloan_feed.SEDOL
                        OR stockloan_feed_cusip_matching.ISIN = stockloan_feed.ISIN)
WHERE  CUSIP IS NULL
       AND date = Datediff(d, 0, Getdate() - 1) 
```

这当然假设您的子查询返回的所有可能值都是相同的，或者您只是不介意将哪一个匹配结果分配给您的`stockloan_feed.CUSIP`列。

# windows-installer - 如何为两个应用程序（exe 和 msi）制作单个安装程序？

> ID：13628696
> 
> 赞同：0
> 
> 时间：2012-11-29T15:07:42.870
> 
> 标签：windows-installer

我看到了许多将独立运行安装程序的示例...但是在我的安装程序中，它将允许运行第一个 exe，如果发生任何错误，它必须回滚..如果成功，它必须安装第二个 msi 应用程序。

我试过用wix，但感觉很难......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T12:27:13.157

我有两个想法。即使我在考虑他们，我也在想“必须有更好的方法”，但也许他们会为你播下一些种子，这样你就可以弄清楚如何正确地做到这一点。

思路一，你能检查一下你想安装的两个第三方应用程序是否可以作为合并模块使用吗？如果是这样，那么您可以将它们合并到您自己的安装程序中吗？

想法二，假设生活不是那么简单，在您自己的安装程序中，您可以创建一个自定义操作 dll。在那个 dll 中，您可以编写启动第三方应用程序设置过程的代码吗？我确信您可以构建您的自定义操作，以便您可以生成一个进程，等待它完成并询问其退出代码。所以在这方面你可以知道成功/失败并相应地提交/回滚。但我什至不确定这种方法是否可行（同时运行的两个安装程序听起来可能有问题）。

物有所值...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T12:39:52.807

如果您熟悉 Windows Installer 技术，我建议您创建自己的安装程序并将这些 3rd 方应用程序作为先决条件。创建允许您控制安装过程的自定义操作。此外，您不能从另一个安装一个 MSI（排除是链式 MSI，但对于此任务来说更复杂）。
此外，如果不需要 WiX，可以尝试在 AdvancedInstaller 的帮助下进行，创建安装程序比 WiX 更容易，并且它们也有免费版本。

# windows-8 - 在云中验证 ASHWID (HardwareToken) 的问题

> ID：13628697
> 
> 赞同：0
> 
> 时间：2012-11-29T15:07:48.037
> 
> 标签：windows-8, windows-runtime, cryptoapi, rsacryptoserviceprovider

我正在尝试使用 azure (.net 4.5) 服务验证 HardwareIdentification.GetPackageSpecificToken 颁发的 HardwareToken。我遵循了官方的[指导](http://msdn.microsoft.com/en-us/library/windows/apps/jj553431.aspx)。但我被困在最后一次检查中。我不明白为什么签名检查总是失败（所有其他检查，如检查证书链、加权硬件令牌比较或根证书公钥匹配都工作正常）。

这是我用来执行签名验证的代码： var publicKeyProvider = leaf.PublicKey.Key as System.Security.Cryptography.RSACryptoServiceProvider;

```
var signedData = nonce.Concat(token).ToArray();
SHA1Managed hash = new SHA1Managed();
byte[] hashedData;
hashedData = hash.ComputeHash(signedData);

if (!publicKeyProvider.VerifyHash(hashedData, CryptoConfig.MapNameToOID("SHA1"), signature))
   throw new Exception("Invalid or Corrupted HardwareToken"); 
```

我还尝试使用具有相同结果的 VerifyData，它总是返回 False（无论我是否使用随机数）。

我在这里上传了一个非常基本的示例项目：[https ://github.com/sandorfr/sandor/tree/master/W8/HardwareTokenSample](https://github.com/sandorfr/sandor/tree/master/W8/HardwareTokenSample)

有人遇到/解决了这个问题吗？

最好的祝福，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T13:08:14.643

.net 不支持 ASHWID 使用的签名类型，因为它使用 PSS，所以我必须对 NCryptVerifySignature 进行本机调用。

# jquery - 字符串文字没有被匹配的引号正确关闭

> ID：13628698
> 
> 赞同：0
> 
> 时间：2012-11-29T15:07:51.523
> 
> 标签：jquery

我正在努力摆脱第 2 行的错误。

![在此处输入图像描述](../Images/6029ef60959b78d0b8137ee7b49961e6.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T15:10:31.210

您需要转义第一个换行符（在打开的双引号之后）：

```
$("#insert-rated-category"+voteit).html(" \
    <select id='' name=''> \
        <option value=''></option> \
    </select> \
"); 
```

**编辑**

您也必须在空行中转义换行符。谢谢@cHao。

# javascript - javascript嵌套循环变量范围问题

> ID：13628702
> 
> 赞同：0
> 
> 时间：2012-11-29T15:08:03.290
> 
> 标签：javascript, jquery, breadcrumbs

我正在写一个受[https://stackoverflow.com/a/3834694/721084](https://stackoverflow.com/a/3834694/721084)启发的简单面包屑。我试图实现这一点的方法是按每个项目所在的页面对其进行分类。下面的代码就是为了做到这一点，但它总是以无限循环结束。我究竟做错了什么？

**编辑**：Pastebin 链接到整个 JS 代码[http://pastebin.com/nxUhQmqF](http://pastebin.com/nxUhQmqF)

示例 DOM：

```
<ul id="progress_bar" class="nostyle clearfix">
    <li class="first"><a href="">Blah</a></li>
    <li class=""><a href="">Blah</a></li>
    <li class="selected"><a href="">Blah</a></li>
    <li class="last"><a href="">Blah</a></li>
</ul> 
```

JS代码：

```
 function classifyPages(bcParent, totalItems) {
    var pages       = 1,
        wd          = 0,
        parentWd    = findWidthOfParent(bcParent),
        crumbs      = bcParent.find('li'),
        i           = 0;

    for( i = 0; i < totalItems; i++) {
        wd = 0;
        while(wd < parentWd) {
            crumb = crumbs.eq(i);
            wd += crumb.outerWidth();
            if( wd < parentWd) {
                i += 1;
                crumb.addClass( 'bcPage-' + pages);
            }
        }

        pages += 1;
    }

    return pages;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:14:58.373

我怀疑这个`while`循环——这样的结构经常碰巧是无限循环的来源：

```
 while(wd < parentWd) {
            crumb = crumbs.eq(i);
            wd += crumb.outerWidth();
            // snip 
```

如果`crumb.outerWidth()`始终返回 0，它将永远不会结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:38:56.803

你的`i`，在内部循环中也会增加，`totalItems`有时会在上面运行。不存在的`crumb`则总是有一个`outerWidth`，`0`你被抓住了（正如@Oleg V. Volkov 所描述的那样）。

这应该有效：

```
function classifyPages(bcParent, totalItems) {
    var pages       = 1,
        parentWd    = findWidthOfParent(bcParent),
        crumbs      = bcParent.find('li');

    for (var i = 0; i < totalItems; i++) {
        for (var wd = 0; wd < parentWd && i < totalItems; ) {
//                                     ^^^^^^^^^^^^^^^^^
            var crumb = crumbs.eq(i);
            wd += crumb.outerWidth();
            if( wd < parentWd) {
                i += 1;
                crumb.addClass( 'bcPage-' + pages);
            }
        }
        pages += 1;
    }
    return pages;
} 
```

更好的：

```
function classifyPages(bcParent, totalItems) {
    var pages       = 1,
        parentWd    = findWidthOfParent(bcParent),
        crumbs      = bcParent.find('li'),
        wd          = 0;

    for (var i = 0; i < totalItems; i++) {
        var crumb = crumbs.eq(i);
        wd += crumb.outerWidth();
        if( wd >= parentWd) {
            pages += 1;
            wd = 0; // reset
        }
        crumb.addClass( 'bcPage-' + pages);
    }
    return pages;
} 
```

# python - “类型对象不可订阅”错误，但仅在脚本中

> ID：13628703
> 
> 赞同：0
> 
> 时间：2012-11-29T15:08:10.533
> 
> 标签：python, split

对于句子理解的实验，我准备了一组文件，每个文件都包含一个列表行，如下所示：

1 14 2“实验句”

“1 14 2”是参考编号。出于实验的目的，我必须随机化每个文件中的句子，约束条件是没有两个相邻的句子可以有相同的第三个数字。那是

1 14 2

1 14 3

是一个可接受的序列，但是

1 14 2

1 13 2

不是。

我编写了一个函数`line_randomizer(filename)`，将所有行随机化`filename`并放入`buffer = []`，并定义了一个`limit`变量，其中包含行数`buffer`。然后，我编写了以下函数：

```
def checker():
    counter = 0
    while counter < limit:
       next = counter + 1
       val1 = buffer[counter].split(" ")[2]
       val2 = buffer[next].split(" ")[2]
       if int(val1) == int(val2):
          print("bad sequence; starting new randomization")
          line_randomizer(filename)
       else:
          print("continue checking")
       counter = counter + 1 
```

当我在 python 解释器（从 shell 调用）上运行它时，一切正常，但是当我在 .py 脚本上编写完全相同的代码时，我得到了这个错误。

```
val1 = buffer[counter].split(" ")[2]
TypeError: 'type' object is unsubscriptable 
```

为什么这只发生在脚本上？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:22:37.003

在命令行会话中，您必须`buffer`设置一些东西。

但是，在您的脚本中，没有人设置`buffer`，因此它使用作为类型对象的内置名称，与大多数类型一样，它是不可订阅的。

# dynamics-crm-2011 - 自定义功能区按钮 SelectionCount 规则并不总是有效

> ID：13628705
> 
> 赞同：1
> 
> 时间：2012-11-29T15:08:15.943
> 
> 标签：dynamics-crm-2011

我在我的 CRM 实体上创建了一组使用启用规则的功能区按钮，以便它们仅在选择视图中的单个记录时才可用，或多或少并且按钮不应再启用。

这确实有效，但在某些情况下它不会达到预期目的。有时我单击视图并选择一个字段，但按钮仍处于禁用状态，或者我单击多个按钮仍处于启用状态。

这只是它们工作方式的一个缺陷，还是我需要添加一些额外的东西来确保它们每次都能正常工作？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:33:29.303

特定功能区按钮的启用规则应如下所示：

```
<EnableRules>
            <EnableRule Id="crm.Form.contact.MainTab.Collaborate.SendNotif.Command.EnableRule.OrRule">
              <OrRule>
                <Or>
                  <FormStateRule State="ReadOnly" />
                </Or>
                <Or>
                  <FormStateRule State="Existing" />
                </Or>
              </OrRule>
            </EnableRule>
            <EnableRule Id="crm.Form.contact.MainTab.Collaborate.SendNotif.Command.EnableRule.RecordPrivilegeRule">
              <RecordPrivilegeRule AppliesTo="PrimaryEntity" PrivilegeType="AppendTo" />
            </EnableRule>
            <EnableRule Id="crm.HomepageGrid.contact.MainTab.Collaborate.SendNotif.Command.EnableRule.SelectionCountRule">
              <SelectionCountRule AppliesTo="SelectedEntity" Maximum="1" Minimum="1" />
            </EnableRule>
          </EnableRules> 
```

在上面的示例中，主要部分是：

```
<EnableRule Id="crm.HomepageGrid.contact.MainTab.Collaborate.SendNotif.Command.EnableRule.SelectionCountRule">
      <SelectionCountRule AppliesTo="SelectedEntity" Maximum="1" Minimum="1" />
</EnableRule> 
```

如果您使用[适用于 crm 2011 的 Visual Ribbon Editor](http://crmvisualribbonedit.codeplex.com/)（我推荐）启用规则选项卡应如下所示：

![在此处输入图像描述](../Images/dcefa21e7ff4e1f78d2c1d42d80a6d2f.png)

将您的设置与此示例进行比较。这有效，已验证:)

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-06T15:36:44.670

我已经 8 年了，但有人会发现这很有用:)

尝试添加`distinct="true"`到您的视图 fetchxml

```
<fetchxml>
   <fetch version="1.0" output-format="xml-platform" mapping="logical" distinct="true">
      <entity name="entity">
         <attribute name="attribute" />
      </entity>
   </fetch>
</fetchxml> 
```

如果您在 SelectionCountRule 中使用 minimum=1 和 maximum=1，那么当记录溢出到另一个页面时，即使您选择了某些记录，您也可能会遇到一些 SelectionCountRule 错误的问题。

# shell - Shell Hungman 没有在 ubuntu 上运行

> ID：13628708
> 
> 赞同：2
> 
> 时间：2012-11-29T15:08:21.853
> 
> 标签：shell, ubuntu

我有 shell 脚本，但是当我在 Ubuntu 上运行它时，出现错误：

```
arithmetic expression expecting primary. 
```

问题出在主程序中，尤其是`nbLigne`.

这是代码：

```
#!/bin/sh

MotAuHasard() 
{
    nbr=$(($RANDOM*$RANDOM%$nbLigne))               #définit la position du mot dans listemot.txt
    Mot=$(head -$nbr $FichierMot | tail -n 1)       #mot trouvé dans monFichier 

    #la fonction suivante vérifie si le mot est supérieur à 6 caractères, 
    #dans le cas contraire, on ré-initialise la fonction

    nbcarac1=${#Mot} 
    if [ $nbcarac1 -lt 6 ]
        then
        MotAuHasard
    fi
}

Affiche()
{
    MotJeu=$Mot
    nbcarac2=${#cache}
    for i in `seq 0 $nbcarac2`;
    do MotJeu=${MotJeu//${cache:i:1}/-} 
    done
}

Decouvre()
{
    cache=${cache//$caractere/"_"}
}

testPresence()
{
    testPresence=1
    for i in `seq 0 $nbcarac1`;
    do  
    if  [ "${Mot:i:1}" = "$caractere" ]
        then
        testPresence=0
    fi
    done
}

testGagne()
{
    testGagne=0
    for i in `seq 0 $nbcarac1`;
    do
        if  [ "${MotJeu:i:1}" = "-" ]
            then
            testGagne=1
        fi
    done
}

#affichage du pendu selon le nombre de vies restantes

vie_pendu()
{ 
    case $vie in

    "0") 
    echo  "_______________"
    echo  "   |      |  "
    echo  "   |      O  "
    echo  "   |     /|\ "
    echo  "   |      |  "
    echo  "   |     / \ "
    echo  "   |         "
    echo  "   |         "
    echo  "   |         "
    echo  " |---|";;

    "1") 
    echo  "_______________"
    echo  "   |      |  "
    echo  "   |      O  "
    echo  "   |     /|\ "
    echo  "   |      |  "
    echo  "   |     /   "
    echo  "   |         "
    echo  "   |         "
    echo  "   |         "
    echo  " |---|";;

    "2") 
    echo  "_______________"
    echo  "   |      |  "
    echo  "   |      O  "
    echo  "   |     /|\ "
    echo  "   |      |  "
    echo  "   |         "
    echo  "   |         "
    echo  "   |         "
    echo  "   |         "
    echo  " |---|";;

    "3") 
    echo  "_______________"
    echo  "   |      |  "
    echo  "   |      O  "
    echo  "   |     /|\ "
    echo  "   |         "
    echo  "   |         "
    echo  "   |         "
    echo  "   |         "
    echo  "   |         "
    echo  " |---|";;

    "4") 
    echo  "_______________"
    echo  "   |      |  "
    echo  "   |      O  "
    echo  "   |     /   "
    echo  "   |         "
    echo  "   |         "
    echo  "   |         "
    echo  "   |         "
    echo  "   |         "
    echo  " |---|";;

    "5") 
    echo  "_______________"
    echo  "   |      |  "
    echo  "   |      O  "
    echo  "   |         "
    echo  "   |         "
    echo  "   |         "
    echo  "   |         "
    echo  "   |         "
    echo  "   |         "
    echo  " |---|";;

    "6") 
    echo  "_______________"
    echo  "   |        "
    echo  "   |        "
    echo  "   |        "
    echo  "   |        "
    echo  "   |        "
    echo  "   |        "
    echo  "   |        "
    echo  "   |        "
    echo  " |---|";;

    esac
}

#main

FichierMot='listemot.txt'
nbLigne=$(wc -l < $FichierMot)          #On récupère le nombre de lignes     dans FichierMot 
cache="abcdefghijklmnopqrstuvwxyz"      #On affiche toutes les lettres disponibles
MotAuHasard                             #Lancement du jeu

vie=7                                               #initialisation du nombre de vies
Affiche
while [ $vie -gt 0 ]
do
echo $MotJeu
echo "  "
echo "Possibiite de lettres restantes : $cache"
echo "  "
echo "Veuillez entrer une lettre: "
echo "  "
read caractere
while [ ${#caractere} -gt 1 ]
do
    echo "Plus d'une lettre saisie !!"
    read caractere
done
Decouvre
testPresence
Affiche
if [ $testPresence -eq 0 ]
then    
    testGagne
    if [ $testGagne -eq 0 ]
    then
        echo "Felicitation, vous avez gagne !!"
        exit
    fi
else
    vie=$(($vie - 1))
    vie_pendu
fi
done

echo "Pas de chance, le mot était : $Mot" 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:28:28.060

未在 Ubuntu atm 上测试，但换行

```
nbr=$(($RANDOM*$RANDOM%$nbLigne)) 
```

至

```
nbr=$(echo "$RANDOM*$RANDOM%$nbLigne" | bc) 
```

应该管用。

# python - 如何在 Python 中实现循环缓冲区？

> ID：13628710
> 
> 赞同：3
> 
> 时间：2012-11-29T15:08:27.830
> 
> 标签：python, arrays, matrix, circular-buffer

例如，我有一个矩阵

```
a=[12,2,4,67,8,9,23] 
```

我想要一个代码，它附加一个值 45 并删除第一个值 '12' 所以本质上我想做

```
a = [2,4,67,8,9,23,45] 
```

我想使用常规矩阵而不是 numpy 矩阵，所以我不能使用 hstack 或 vstack 如何在 python 中执行此操作？任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T15:11:41.103

使用双端队列。

[http://docs.python.org/2/library/collections.html#collections.deque](http://docs.python.org/2/library/collections.html#collections.deque)

```
>>> import collections
>>> d = collections.deque(maxlen=7)
>>> d.extend([12,2,4,67,8,9,23])
>>> d.append(45)
>>> print d
deque([2, 4, 67, 8, 9, 23, 45], maxlen=7) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T15:12:32.333

最简单的方法：

```
a = a[1:] + [45] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T15:18:41.677

你可以这样做：

```
a=[12,2,4,67,8,9,23]
a.append(45)
a.pop(0) 
```

# jquery - 使用 jQuery 更改标签上的 CSS 背景

> ID：13628711
> 
> 赞同：0
> 
> 时间：2012-11-29T15:08:31.043
> 
> 标签：jquery, css

使用 jQuery，我怎样才能改变这个 CSS？

```
html {
    background: yellow;
} 
```

这不起作用：

```
$('html').css('background','red'); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-29T15:11:10.777

利用

```
$(document.body).css('background-color','red');​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T15:13:53.247

试试这个代码： [DEMO](http://jsfiddle.net/d5VjH/2/)

```
$('body').css('background-color','red');​​​​​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T15:09:49.467

```
$('html').css('background-color','red');​​​​​​​​​​​​​​​​​​​​​ 
```

[http://jsfiddle.net/9C5tC/](http://jsfiddle.net/9C5tC/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T15:11:55.730

$('body').css({ 'background-color': 'red' });

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T15:13:08.500

您的代码应更改如下。

```
$(document.body).css('background','red');​​​​​​​​​​​​​​​ 
```

你的风格将适用于身体元素。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-29T16:05:37.607

另一种方法是这样的：

`<head>`您可以在元素中定义这样的样式类

并将其命名为例如 « redback » ：

```
<style type="text/css">  
.redback 
{
background:red; 
}
</style> 
```

然后你可以`<body>`像这样在元素中添加这个脚本

```
<script language="javascript" type="text/javascript">
    $(document).ready(function () {
        $('html').addClass("redback");
      });

</script> 
```

# websocket - 如何通过 WebSockets 从/向 Canvas 发送/接收原始二进制图像数据

> ID：13628716
> 
> 赞同：1
> 
> 时间：2012-11-29T15:08:45.240
> 
> 标签：websocket, html5-canvas, webgl

我喜欢从图像中获取二进制数据。因此我需要将它放在画布上并使用 getImageDate 方法检索它。但是，当我将源 PNG 图像的大小与提取的画布图像的大小进行比较时，它们是不同的。

```
var img = new Image();

img.onload = function() {
    var canvas = document.getElementById("c");
    canvas.width = this.width;
    canvas.height = this.height;
    var ctx = canvas.getContext("2d");
    ctx.drawImage(img, 0, 0);

    //get image
    var canvasimg = ctx.getImageData(0, 0, this.width, this.height);
    alert("binlength: " + canvasimg.data.length);
};

img.src = "images/example.PNG"; 
```

我在这里上传了一个例子：http: [//jsfiddle.net/wLb3q/4/](http://jsfiddle.net/wLb3q/4/)

这种行为不仅适用于 JavaScript，而且当我通过 Firefox 中的 Contextmenu 执行此操作时（右键单击画布/将图像另存为）。检索到的图像比原始图像小得多。

提前非常感谢！

# c# - C# 运算符？：如何简化一个表达式中的基本 if 语句

> ID：13628718
> 
> 赞同：-8
> 
> 时间：2012-11-29T15:08:56.187
> 
> 标签：c#, expression, operator-keyword

有什么办法可以简化这个表达式：

我想做这个：

```
d = ( a == "x" ? b : a ) 
```

我可以使用三行代码：

```
d = a;
if(a == "x")
   d = b 
```

我可以在一行代码/一个表达式中做到这一点，而不使用**两次**吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T15:12:39.053

> 我可以在一行代码/一个表达式中做到这一点，而不使用两次吗？

是的，但你真的不应该：

```
d = new[] { a }.Except("x").DefaultIfEmpty(b); 
```

我*真的*不是认真地建议这一点 - 只是指出您的标准并不是“可读”的一个很好的指标。

如果你发现你经常这样做，你可以写一个扩展方法，例如

```
public static string OrDefaultFor(this string input,
                                  string invalidInput,
                                  string replacement)
{
    return input == invalidInput ? replacement : input;
} 
```

然后：

```
d = a.OrDefaultFor("x", b); 
```

如果可以的话，选择一个更好的名字:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:24:49.150

我假设`a`会导致某种副作用，因此不能使用两次。（可能是函数，或者属性等）

您对第二个代码段很接近，但您想使用：

```
d = a;
if(d == "x")
   d = b 
```

关键点在使用`d`中`if`，而不是`a`再次使用。

如果你真的想减少代码行数，你可以改用这个：

```
d = a;
if(d == "x") d = b 
```

恭喜，您现在只需两行代码。除此之外，您为“简化”代码所做的任何事情都可能在某种程度上弊大于利。因为它是代码的意图很清楚；制作结果的本地副本`a`，然后确定是使用`a`还是`b`通过`if`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:28:41.793

```
d = (d = a) == "x" ? b : d; 
```

如前所述，问题是错误的，答案更糟。

# objective-c - 在 iOS 应用程序中放弃网络请求

> ID：13628719
> 
> 赞同：2
> 
> 时间：2012-11-29T15:08:58.377
> 
> 标签：objective-c, ios, network-programming

将 myViewController 推送到导航堆栈后，我对填充 myViewController 上的一些字段的一些数据进行了简单的网络请求。我不希望这个请求阻塞主线程，所以我使用`performSelectorInBackground`. 当请求返回时，我使用`performSelectorOnMainThread`更新 UI。

除了放弃请求外，这种方法效果很好。假设用户推送视图控制器，网络请求开始，然后用户立即弹出视图控制器并在应用程序中执行其他操作。在这种情况下，网络请求返回到一个不存在的对象。**我该如何处理这种情况？**

我考虑了一个更健壮的网络层，其中每个请求都有一个代表来处理响应。使用这种架构，我可以在弹出视图控制器时取消委托，从而避免请求返回无的问题。我不确定这是否是最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:16:34.613

> 我不希望这个请求阻塞主线程，所以我使用 performSelectorInBackground 来实现它。

所以你正在发出一个同步请求——一个会阻塞它正在运行的线程的请求。与其这样做，不如使用例如`+[NSURLConnection sendAsynchronousRequest:queue:completionHandler:]`. 然后你可以从你喜欢的任何线程发出请求，包括主线程——不需要`-performSelectorInBackground:`. 当连接改变状态时，您的委托将使用 NSURLConnectionDelegate 协议得到通知。这样，您可以向`-cancel`连接发送消息以停止它。

# javascript - 两列不同的项目数相同的总高度

> ID：13628721
> 
> 赞同：1
> 
> 时间：2012-11-29T15:09:00.297
> 
> 标签：javascript, html, css, html-lists

我正在寻找某种方法来在 html 和 css 中显示这种类型的网格。

![在此处输入图像描述](../Images/db109fe559262affdeb5681091931696.png)

我想拉伸较小的柱子以匹配较高的柱子。这可能吗？我尝试了一些 javascript 的解决方案，但对解决方案并不满意。有一些复杂性在于行数最多的列可能不是最高的。此外，如果盒子有不同的内容量，它们的高度也可能不同。

我对这里使用的标记持开放态度，目前我正在并排使用两个列表，但一个表格或其他任何东西都可以。但是，仅使用 rowspan 似乎不会起作用，因为这只会给出一个比其他框大得多的框。这似乎是一个常见问题，那里有一个好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:24:46.620

这是一个 jQuery 解决方案：http: [//jsfiddle.net/hunter/sG39d/](http://jsfiddle.net/hunter/sG39d/)

当您添加顶部/底部边距和填充时，事情会变得有点棘手`li`

```
$(function() {
    var $tallest = null;
    var $ul = $("ul");

    $("ul").each(function() {
        if ($tallest == null || $(this).height() > $tallest.height()) {
            $tallest = $(this);
        }
    });
    var height = $tallest.height();
    $ul.not($tallest).each(function() {
        var update = height / $(this).find("li").length;
        $(this).find("li").css("height", update);
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:21:08.360

花了我一段时间，但这里是小提琴和 JS 代码：

我的解决方案将考虑元素的关系大小并按比例拉伸它们。例如：一个占据了 50% 空间的 div 在拉伸 ul 后仍然会占据 50%。

（但是在添加填充和边框时会出现问题。如果有解决方案，我也会感兴趣！）

JS：

```
$(function() {
    var $allUl = $('ul');
    setNewPercentages($allUl);

    function getTallestUl($uls) {
        var max = 0;
        var $ulTallest;

        $uls.each(function(i,e) {
            console.log( $(this).height() > max);
            if( $(this).height() > max) {
                $ulTallest = $(this);
                max = $(this).height();
            }
        });

        return $ulTallest;
    };

    function adjustPercentages($ul) {
        $ul.find('li').each( function(i,e) {
            var $this = $(this)
            ,   ulHeight = $ul.height()
            ,   liHeight = $this.height()
            ,   percentage = (liHeight / ulHeight * 100);

            $this.css('height', percentage + '%');
        });
    };

    function setNewPercentages($uls) {
        var $tallest = getTallestUl($allUl).addClass('tallest');
        var heightTallest = $tallest.height();

        $uls.not('.tallest').each(function(i,e) {
            adjustPercentages($(this));
            $(this).css('height', heightTallest);
        });
    };
});​ 
```

[小提琴](http://jsfiddle.net/GgEUV/6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T15:18:30.097

我认为你在这里被 JS 困住了。我的方法是在列表中的元素上使用百分比高度。

*   确定每个列表中的元素数。
*   将 100 除以该值（好吧，如果是 3、6 ... 等，则很棘手）
*   以 % 为每个元素指定其高度
*   不要忘记在父元素上设置高度，否则 % 将不起作用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T15:34:27.073

根据您的小提琴：

```
var heights=[], cnt=0, cols=[];

$('ul').each(function () {
    cols.push(this);
    var h = 0;
    $(this).find('li').each(function() {
        h += $(this).innerHeight();
    });
    heights.push(h);
    cnt++;
});

var max = Math.max.apply(null, heights);

for(var i=0; i<cols.length; i++) {
    var delta = Math.floor((max - heights[i]) / $(cols[i]).find('li').length);
    $(cols[i]).find('li').each(function() {
        $(this).css('height', $(this).innerHeight() + delta);
    });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T15:12:34.177

不幸的是，归档并不容易......试试这个： [人造列](http://www.vanseodesign.com/css/equal-height-columns/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-09T18:23:45.917

可能这行得通

```
<table border="1" >
<tr>
<td>
<table border="0">
<tr><td>data</td></tr>
<tr><td>data</td></tr>
<tr><td>data</td></tr>
<tr><td>data</td></tr>
<tr><td>data</td></tr>
</table>
</td>
<td>
<table border="0" cellpadding="5">
<tr><td>data</td></tr>
<tr><td>data</td></tr>
<tr><td>data</td></tr>
<tr><td>data</td></tr>
</table>
</td>
</tr>
</table> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-29T15:20:34.790

这个怎么样：

```
<table>
  <tr>
    <td>
      <div>Item1</div>
      <div>Item2</div>
      <div>Item3</div>
    </td>
    <td>
      <div>Item1</div>
      <div>Item2</div>
      <div>Item3</div>
      <div>Item4</div>
      <div>Item5</div>
    </td>
  </tr>
</table> 
```

这样，两列将具有相同的高度。但是，较短列中的项目不会拉伸以填补空白。我认为你必须自己用Javascript来做。

# python - 如何生成不同的随机数？

> ID：13628725
> 
> 赞同：15
> 
> 时间：2012-11-29T15:09:17.067
> 
> 标签：python, random, numbers

> **可能重复：**
> [随机选择 N 个项目](https://stackoverflow.com/questions/9690009/pick-n-items-at-random)

我需要生成 1 到 49 之间的 6 个随机数，但它们不能相同。我知道如何使它们随机化，我只是不确定如何确保它们不同。

工作表建议显示每个数字并将其设置为零，但我看不出这有什么帮助。

任何意见是极大的赞赏。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-29T15:12:40.090

您可以使用[`random.sample`](http://docs.python.org/2/library/random.html#random.sample)：

```
>>> random.sample(xrange(1,50), 6)
[26, 39, 36, 46, 37, 1] 
```

* * *

> *“工作表建议显示每个数字并将其设置为零，但我看不出这有什么帮助。”*

假设这是一项任务，并且您需要自己实现采样，您可以[看看是如何`random.sample`实现的](http://hg.python.org/cpython/file/efedd0f62a7e/Lib/random.py#l268)。它确实提供了丰富的信息，但对于您的需求可能过于复杂，因为代码还确保所有子切片也是有效的随机样本。为了提高效率，它还根据人口规模使用不同的方法。

至于工作表，我相信它假设您从 1 到 49 的数字列表开始，并建议您将选择的数字替换为 0，以便在重新选择时可以跳过。这里有一些伪代码可以帮助您入门：

```
population = range(1, 50) # 从 1 到 49 的数字列表
样品 = []
直到我们得到 6 个样本：
  index = 0 到 48 之间的随机数 # 查找 random.randint()
  if population[index] is not 0: # 如果我们找到一个未标记的值
    将人口[索引]附加到样本
    set population[index] = 0 # 标记选中

```

如果您想尝试不同的方法，还有许多其他方法可以考虑，例如随机化列表然后截断，或某种形式的[水库采样](http://en.wikipedia.org/wiki/Reservoir_sampling)。

祝你的任务好运。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-29T15:12:07.760

A`set`不会保留任何重复项：

```
s = set()
while len(s) < 6:
    s.add(get_my_new_random_number()) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-29T15:27:26.963

这是一个非常常见和愚蠢的面试问题，这是它的解决方案/算法：

```
import random
a = range(1,50)
for i in xrange(6):
    b = a[random.randint(0,len(a)-i)]
    a.remove(b)
    print b 
```

对于关心效率的人来说，这里是我的解决方案和 Chin 的测试台：

```
>>> random.sample(xrange(1,50), 6)
[26, 39, 36, 46, 37, 1] 
```

结果：

```
>python -mtimeit -s'import try2'
[38, 7, 31, 24, 30, 32]
100000000 loops, best of 3: 0.0144 usec per loop
>python -mtimeit -s'import try1'
36
26
41
31
37
14
100000000 loops, best of 3: 0.0144 usec per loop 
```

决心要同时！

# android - Android：带有HttpGet请求的IOException

> ID：13628727
> 
> 赞同：0
> 
> 时间：2012-11-29T15:09:17.667
> 
> 标签：android, http, ioexception, unknown-host

我试图连接到服务器，然后以 Json 格式接收一些数据。这是我的java代码：

```
HttpClient client = new DefaultHttpClient();
HttpGet request = new HttpGet("https://my.server.com/validate/" + data);
request.setHeader("Accept", "application/json");
request.setHeader("X-AuthToken","my authorisation code");
HttpResponse response = client.execute(request); 
```

我也有

```
<permission android:name="android.permission.INTERNET"></permission> 
```

作为 manifest.xml 中清单（不是应用程序）的子项

当我尝试在浏览器中打开 url 时，我得到了正确的页面，但我没有得到任何数据，因为它错过了身份验证。我也有很好的联系。

我已经尝试解决这个问题几个小时了，但我仍然在 client.execute(request) 行得到 IOException

```
java.net.UnknownHostException: my.server.com 
```

有任何想法吗？：） 谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T15:24:00.037

好像你不见了`uses-`？

`<uses-permission android:name="android.permission.INTERNET" />`?

`<permission>`用于声明一个新的权限。[文档](http://developer.android.com/guide/topics/manifest/manifest-intro.html#perms)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:12:52.103

抱歉，如果我遗漏了什么，但它`my.server.com`真的是一个有效的主机吗？您是否忘记插入实际主机？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:29:20.647

除了这里的答案，这里还有一些额外的建议

1.  尝试在浏览器中访问 URL
2.  使用浏览器检查以确保您的设备上有互联网连接
3.  尝试清理项目并重试（这对我来说已经成功了好几次）（项目->清理）

# iphone - 从 iPhone 向 BLE 设备发送数据？

> ID：13628729
> 
> 赞同：1
> 
> 时间：2012-11-29T15:09:27.777
> 
> 标签：iphone, objective-c, xcode, core-bluetooth

我正在开发一个 iPhone 应用程序，该应用程序旨在通过 iPhone 控制汽车的某些功能。功能包括锁定和解锁车门、打开后备箱以及发出警报声。我正在使用核心蓝牙框架，因此我可以将手机连接到 BLE 设备。

实际现象是发送 2 个不同的电压电平：0 和 1。所以门在 1 时打开，在 0 时关闭。我该如何通过代码来做到这一点，或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:23:46.197

`writeValue:forCharacteristic:type`在 CoreBluetooth.framework 中查找。

# vb.net - 数据访问包装器

> ID：13628731
> 
> 赞同：0
> 
> 时间：2012-11-29T15:09:28.220
> 
> 标签：vb.net

我正在查看 SQLHelper 类：[https](https://appsimplicity.googlecode.com/svn-history/r217/MetaDataExtractor/SchemaDiscovery/AppSimplicity.SchemaDiscovery.Providers/SQLServer/DataAccess/SQLHelper.vb) ://appsimplicity.googlecode.com/svn-history/r217/MetaDataExtractor/SchemaDiscovery/AppSimplicity.SchemaDiscovery.Providers/SQLServer/DataAccess/SQLHelper.vb 。

我想使用 SQLHelper 连接到 Oracle 数据库和 SQL Server 数据库（在运行时做出选择）。

我相信我有两个选择：

1.  修改代码以使用接口而不是类，例如 dbCommand 而不是 SQLCommand
2.  重载某些函数，例如 executeReader 以接受 Oracle 连接对象

我不想重新发明轮子，所以如果还有其他选择，我就在徘徊。有没有其他选择？如果没有其他选择，那么哪个选项最好？

我阅读了这篇文章，其中讨论了其他可用的数据访问解决方案：[Microsoft Application Blocks for .NET 中的“SQL Helper Class”是否出色？](https://stackoverflow.com/questions/2122448/is-sql-helper-class-in-microsoft-application-blocks-for-net-is-excellent)

我正在处理的项目使用 ADO.NET，这是我想要使用的 API。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:13:39.867

这是我使用的两个类，它们在 EntLib5 中模仿该模式，而无需使用整个 entlib5 数据库及其依赖项。两个示例调用使用非查询，但有用于标量和数据集的 db 方法。你也可以很容易地为 datareader 添加一个。

**使用事务调用类的示例**

```
 Private Sub SubmitEntity(ByVal entity As Entity)

        Dim db As Database = DatabaseFactory.CreateDatabase()

        db.ConnectionString = Me.ConnectionString

        Dim transaction As SqlTransaction = Nothing

        Dim cmd As DbCommand = db.GetStoredProcCommand("dbo.MystoredProc")

        db.AddInParameter(cmd, "entityData", SqlDbType.VarChar, entity.Data)
        db.AddInParameter(cmd, "enitityId", SqlDbType.Int, DBNull.Value, ParameterDirection.Output)

        Try

            transaction = db.Transaction

            db.ExecuteNonQuery(cmd, db.Transaction)

            transaction.Commit()

            db.Dispose()

        Catch ex As Exception

            If transaction IsNot Nothing Then
                transaction.Rollback()
            End If

            If db IsNot Nothing AndAlso db.Connection IsNot Nothing Then
                db.Dispose()
            End If

        End Try

    End Sub 
```

**无事务调用示例**

```
 Private Sub SubmitEntity(ByVal entity As Entity)

    Dim db As Database = DatabaseFactory.CreateDatabase("the connection string")

    Dim cmd As DbCommand = db.GetStoredProcCommand("dbo.MystoredProc")

    db.AddInParameter(cmd, "entityData", SqlDbType.VarChar, entity.Data)
    db.AddInParameter(cmd, "enitityId", SqlDbType.Int, DBNull.Value, ParameterDirection.Output)

    db.ExecuteNonQuery(cmd, db.Transaction)

End Sub 
```

**数据库工厂类**

```
Imports System.Data.SqlClient

Friend Class DatabaseFactory

    Private Shared Property Connection As SqlConnection

    Friend Shared Function CreateDatabase(ByVal connectionString As String) As Database

        If Connection Is Nothing OrElse Connection.State <> ConnectionState.Open OrElse Connection.ConnectionString <> connectionString Then

            'create a new SqlConnection, and assign the connection string property
            Connection = New SqlConnection With
                {
                    .ConnectionString = connectionString
                }

            'connect to the Sql database
            Connection.Open()

        End If

        'return the database with an open connection
        Return New Database With {.Connection = Connection, .ConnectionString = connectionString}

    End Function

    Friend Shared Function CreateDatabase() As Database

        Return New Database

    End Function

End Class 
```

**数据库类**

```
Imports System.Data.SqlClient

Friend Class Database

    Friend Property ConnectionString As String

    Private ConnectionValue As SqlConnection
    Friend Property Connection As SqlConnection
        Get
            If Me.ConnectionValue Is Nothing OrElse Me.ConnectionValue.State <> ConnectionState.Open Then
                If Not String.IsNullOrWhiteSpace(Me.ConnectionString) Then
                    'create a new SqlConnection, and assign the connection string property
                    Me.ConnectionValue = New SqlConnection With
                        {
                            .ConnectionString = ConnectionString
                        }

                    'connect to the Sql database
                    Me.ConnectionValue.Open()
                Else
                    Throw New Exception("A connection string must be provided.")
                End If
            End If
            Return Me.ConnectionValue
        End Get
        Set(ByVal value As SqlConnection)
            Me.ConnectionValue = value
        End Set
    End Property

    Private TransactionValue As SqlTransaction
    Friend Property Transaction As SqlTransaction
        Get
            If TransactionValue Is Nothing Then
                If Me.Connection IsNot Nothing Then
                    Me.TransactionValue = Me.Connection.BeginTransaction
                Else
                    Throw New Exception("No open connection exists.")
                End If
            End If
            Return Me.TransactionValue
        End Get
        Set(ByVal value As SqlTransaction)
            Me.TransactionValue = value
        End Set
    End Property

    Friend Function GetStoredProcCommand(ByVal storedProcName As String) As SqlCommand

        Dim cmd As New SqlCommand() With
            {
                .CommandText = storedProcName,
                .CommandType = CommandType.StoredProcedure,
                .Connection = Me.Connection
            }

        Return cmd

    End Function

    Friend Function GetSqlStringCommand(ByVal query As String) As SqlCommand

        Dim cmd As New SqlCommand() With
            {
                .CommandText = query,
                .CommandType = CommandType.Text,
                .Connection = Me.Connection
            }

        Return cmd

    End Function

    Friend Sub AddInParameter(ByRef cmd As SqlCommand, ByVal paramterName As String, ByVal sqlDbType As SqlDbType, ByVal value As Object, Optional ByVal direction As ParameterDirection = ParameterDirection.Input)

        Dim para As New SqlParameter With
            {
                .Value = value,
                .ParameterName = If(Not paramterName.StartsWith("@"), String.Format("@{0}", paramterName), paramterName),
                .SqlDbType = sqlDbType,
                .Direction = direction
            }

        cmd.Parameters.Add(para)

    End Sub

    Friend Sub ExecuteNonQuery(ByVal cmd As SqlCommand, ByVal transaction As SqlTransaction)

        cmd.Transaction = transaction

        cmd.ExecuteNonQuery()

    End Sub

    Friend Sub ExecuteNonQuery(ByVal cmd As SqlCommand)

        cmd.ExecuteNonQuery()

    End Sub

    Friend Function ExecuteScalar(ByVal cmd As SqlCommand, ByVal transaction As SqlTransaction) As Object

        cmd.Transaction = transaction

        Return cmd.ExecuteScalar()

    End Function

    Friend Function ExecuteScalar(ByVal cmd As SqlCommand) As Object

        Return cmd.ExecuteScalar()

    End Function

    Friend Function ExecuteDataSet(ByVal cmd As SqlCommand, ByVal transaction As SqlTransaction) As DataSet

        cmd.Transaction = transaction

        Dim adapter As New SqlDataAdapter
        adapter.SelectCommand = cmd

        Dim dSet As New DataSet

        adapter.Fill(dSet)

        adapter.Dispose()

        Return dSet

    End Function

    Friend Function ExecuteDataSet(ByVal cmd As SqlCommand) As DataSet

        Dim adapter As New SqlDataAdapter
        adapter.SelectCommand = cmd

        Dim dSet As New DataSet

        adapter.Fill(dSet)

        adapter.Dispose()

        Return dSet

    End Function

    Friend Sub Dispose()
        Me.Connection.Close()
        Me.Connection.Dispose()
    End Sub

End Class 
```

# mysql - MySql 数据库 - 优化专用服务器的 my.cnf 文件

> ID：13628741
> 
> 赞同：-2
> 
> 时间：2012-11-29T15:10:00.797
> 
> 标签：mysql, database, configuration, my.cnf, dedicated

我有以下专用服务器配置。

```
2 x Hexa-Core Xeon E5645 2.4GHz w/H (24 CPUs)
16 GB RAM
128 GB SSD
CentOS-6.3 (x86_64 Latest version)
Linux Kernel Version 3.6.8
Apache Server 2.4.3
PHP 5.4.9
MySQL 5.5.28
WHM/cPanel version: 11.34.0 (build 9)
PHP Extension: Mysqli
Apache Module: mod_deflate
InnoDB Tables, Stored Procedures, INNER JOINS are used. 
```

目前，我的网站流量约为 1500 多名在线用户。未来将有3000+用户上线。

总查询执行：SELECT 90%，INSERT 8%，UPDATE 2%。

帮我根据用户流量和硬件配置优化my.cnf文件。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:44:10.387

没有“必需的 my.cnf 文件配置”。您必须设置合理的默认值并以此为基准。您提供的所有信息完全没有用，因为不清楚硬件的性能如何。

我也不知道为什么你会有一个带有 1TB 硬盘的十二核系统。对于数据库服务器，您可以从具有 10K RPM 驱动器的小型 RAID-10 阵列或企业 SSD 的 4 核系统获得更好的性能。

如果您想要性能，您还应该使用 MySQL 5.5 或更高版本。它比 MySQL 5.1 快得多。您还需要调查[Percona](http://www.percona.com/) MySQL 分支，看看是否有帮助。

# visual-studio - 具有不同输出文件的项目

> ID：13628746
> 
> 赞同：0
> 
> 时间：2012-11-29T15:10:15.967
> 
> 标签：visual-studio, msbuild, visual-studio-2012

我创建了一个项目，其中包含两个文件夹。“src”文件夹包含核心元素，“plugin”文件夹包含不同的插件（每个插件=一个文件）。

这里有一个例子：

```
MyProject
|_src
    |_attributeclass.cs
    |_basepluginparent.cs
    |_otherneededclass.cs
|_plugins
    |_plugin1extendsfrombaseclass.cs
    |_plugin2extendsfrombaseclass.cs
    |_plugin3extendsfrombaseclass.cs
    |_plugin4extendsfrombaseclass.cs 
```

现在我想开始构建，它为我创建了 5 个文件： 1 个 baseplugin.dll（包含所有 3 个核心类） 4 个名为 plugin1.dll ... plugin4.dll 的文件

所以所有插件都引用基类，但我也需要基类作为自己的库

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T08:08:31.397

如果你不想使用 MSBuild 来处理它，你不能这样做：

```
<Csc Sources="_src\*.cs" 
     TargetType="library"
     OutputAssembly="Out\Base.dll" /> 
```

编译base.dll，然后创建插件的itemgroup并批量构建它们：

```
<ItemGroup>
  <Plugin Include="_plugins\*.cs" />
</ItemGroup>

<Message Text="%(Plugin.Identity) => %(Plugin.Filename).dll" />

<Csc Sources="%(Plugin.Identity)"
     References="Out\Base.dll"
     TargetType="library"
     OutputAssembly="Out\%(Plugin.Filename).dll" /> 
```

这将为每个源文件提供一个插件 dll - 每个都链接到 base.dll。

**编辑：** 要使其成为项目构建的一部分，请将上述所有内容包装在一个目标中，例如：

```
<Target Name="BeforeBuild">

</Target> 
```

并将其放在项目文件的末尾（卸载项目并编辑项目文件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T20:45:37.687

创建五个项目：一个构建 coreclasses.dll，另一个构建每个插件。

# c# - 如何创建具有不同名称的多个 XML 文件？

> ID：13628747
> 
> 赞同：1
> 
> 时间：2012-11-29T15:10:16.673
> 
> 标签：c#, wpf, xml, xml-serialization, propertygrid

我的表单中有两个 WPF PropertyGrid，需要为每个 PropertyGrid 创建两个具有不同名称的 xml 文件。我在互联网上寻找，但一无所获。是否可以创建两个xml文件？

我的第一个 PropertyGrid 课程：

```
public class Tube {}
public class OvalTube : Tube {}
public class Dome : Tube {} 
```

对于第二个 PropertyGrid：

```
public class Intersection {}
public class TubeIntersection : Intersection {}
public class Macro : Intersection {} 
```

并且对于每个 PropertyGrid 一个 xml 文件。

保存xml的代码：

```
private Type tube = typeof(Tube);
private Type[] intersection = { typeof(Intersection)};

public bool SaveXml(Tube m_tube, Intersection m_intersecion, string m_fileName)
    {
        FileStream fs = new FileStream(m_fileName, FileMode.Create);

        XmlSerializer serializer = new XmlSerializer(this.tube, this.intersection);

        serializer.Serialize(fs, m_tube);
        fs.Close();

        return true;
    } 
```

但我无法创建两个 xml 文件。

当我这样做时：

```
public bool SaveXml(Tube m_tube, Intersection m_intersection, string m_fileName)
    {

        using (StreamWriter writer = new StreamWriter(m_fileName))
        {
            try
            {
                XmlSerializer serializer = new XmlSerializer(typeof(Tube));
                serializer.Serialize(writer, m_tube);
                serializer.Serialize(writer, m_intersection);
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }
            finally
            {
                writer.Flush();
                writer.Close();
            }
        }
        return true;
    } 
```

我有错误代码。

为 Tube 初始化 PropertyGrid

```
namespace Prototyp1_1.GUI.ViewModel
{
public class PartViewModel : ViewModelBase
{
    private Tube m_tube;
    private TubeType m_tubeType;

    public PartViewModel()
    {
        m_tubeType = TubeType.Not_Specified;
        SetTubeTypes();
    }
    public TubeType _TubeType
    {
        get { return m_tubeType; }
        set
        {
            if (value == m_tubeType)
                return;
            m_tubeType = value;                
            OnTubeTypeChanged();
            base.OnPropertyChanged("_TubeType");
        }
    }
    public List<TubeType> TubeTypes { get; set; }

    public Tube _Tube
    {
        get { return m_tube; }
        set
        {
            m_tube = value;
            base.OnPropertyChanged("_Tube");
        }
    }

    public void OnTubeTypeChanged()
    {
        switch (m_tubeType)
        {
            case TubeType.BentTube:
                _Tube = new BentTube();
                break;
            case TubeType.Dome:
                _Tube = new Dome();
                break;
            case TubeType.OvalTube:
                _Tube = new OvalTube();
                break;
            case TubeType.RectangularTube:
                _Tube = new RectangularTube();
                break;
            case TubeType.RoundTube:
                _Tube = new RoundTube();
                break;
        }
        MainViewModel.GetInstance().IntersectionToolbar._TubeType = m_tubeType;
    }
    private void SetTubeTypes()
    {
        Array values = Enum.GetValues((typeof(TubeType)));
        TubeTypes = new List<TubeType>();
        foreach (TubeType value in values)
        {
            TubeTypes.Add(value);
        }
        TubeTypes.Remove(TubeType.Not_Specified);
    }
} 
```

}

交叉点的 PropertyGrid：

```
namespace Prototyp1_1.GUI.ViewModel
{
public class IntersectionViewModel : ViewModelBase
{
    Intersection _intersection;
    IntersectionRepository _intersectionRepository;
    ObservableCollection<CommandViewModel> _intersections;

    ICollectionView _intersectionView;
    bool _isSelected;

    public IntersectionViewModel()
    {
        _intersectionRepository = new IntersectionRepository();
        _intersectionView = CollectionViewSource.GetDefaultView(_intersectionRepository._Intersections);
        _IntersectionView.CurrentChanged += IntersectionSelectionChanged;
    }

    public IntersectionViewModel(Intersection intersection, IntersectionRepository intersectionRepository)
    {
        if (intersection == null)
            throw new ArgumentNullException("intersection");
        if (intersectionRepository == null)
            throw new ArgumentNullException("intersectionRepository");
        _intersection = intersection;
        _intersectionRepository = intersectionRepository;
    }
    public bool IsSelected
    {
        get { return _isSelected; }
        set
        {
            if (value == _isSelected)
                return;
            _isSelected = value;
            base.OnPropertyChanged("IsSelected");
        }
    }

    public Intersection _Intersection
    {
        get { return _intersection; }
        set
        {
            if (value == null)
                return;
            _intersection = value;
            OnPropertyChanged("_Intersection");
        }
    }

    public IntersectionType _IntersectionType
    {
        get { return _intersection._IntersectionType; }
        set
        {
            if (value == _intersection._IntersectionType)
                return;
            _intersection._IntersectionType = value;
            base.OnPropertyChanged("Intersection");
        }
    }

    public IntersectionRepository _IntersectionRepository
    {
        get { return _intersectionRepository; }
    }

    public ICollectionView _IntersectionView
    {
        get { return _intersectionView; }
    }
    public ObservableCollection<CommandViewModel> _Intersections
    {
        set
        {
            _intersections = value;
            base.OnPropertyChanged("Commands");
        }
        get
        {
            if (_intersections == null)
            {
                _intersections = new ObservableCollection<CommandViewModel>();
            }
            return _intersections;
        }
    }
    public void addIntersectionListItem(IntersectionListItem intersection)
    {
        _Intersection = intersection._Intersection;
        _IntersectionRepository.AddIntersection(intersection);
        _IntersectionView.Refresh(); // update the view
    }

    public void onIntersectionClicked()
    {
        object o = _IntersectionView.CurrentItem;
    }
    void IntersectionSelectionChanged(object sender, EventArgs e)
    {
        IntersectionListItem i = (IntersectionListItem)_IntersectionView.CurrentItem;

        if(i != null)
            _Intersection = i._Intersection;
    }
} 
```

}

初始化 PartViewModell 和 IntersectionModellView 类及调用方法：

```
public class MainViewModel : ViewModelBase
{
    IntersectionToolbarViewModel m_intersectionToolbar;
    PartViewModel m_partView;
    string _projectFolder;
    private static MainViewModel instance = null;

    public MainViewModel()
    {
        base.DisplayName = Strings.MainViewModel_DisplayName;
        _projectFolder = "";
    }

    public static MainViewModel GetInstance()
    {
        if (instance == null)
        {
            instance = new MainViewModel();
        }
        return instance;
    }

    List<CommandViewModel> CreateCommands()
    {
        return new List<CommandViewModel>
        {                
            new CommandViewModel(
                LocalizedStrings.Instance.getLocalizedCommands("MainViewModel_Command_Save"),
                new ActionCommand(param => this.Save())),
        };
    }
    public PartViewModel PartView
    {
        get
        {
            if (m_partView == null)
            {
                m_partView = new PartViewModel();
            }
            return m_partView;
        }
    }
    public IntersectionViewModel IntersectionView
    {
        get
        {
            if (m_intersectionView == null)
            {
                m_intersectionView = new IntersectionViewModel();
            }
            return m_intersectionView;
        }
    }

    void Save()
    {
        PartSerializer part = new PartSerializer();
        Microsoft.Win32.SaveFileDialog saveDialog = new Microsoft.Win32.SaveFileDialog();
        saveDialog.InitialDirectory = @"C:\";
        saveDialog.Filter = "Text documents (.xml)|*.xml";
        if (saveDialog.ShowDialog() == true)
        {
            _projectFolder = saveDialog.FileName;
            part.SaveXml(PartView._Tube, IntersectionView._Intersection, saveDialog.FileName);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:26:17.877

一个`XmlSerializer`for`Tube`不能序列化类型的属性`Intersection`，试试：

```
using (StreamWriter writer = new StreamWriter(m_fileName))
{       
    XmlSerializer serializer = new XmlSerializer(typeof(Tube));
    serializer.Serialize(writer, m_tube);
    // Exception handling omitted for brevity
}

using (StreamWriter writer = new StreamWriter(m_fileName2))
{
    XmlSerializer serializer2 = new XmlSerializer(typeof(Intersection ));
    serializer2.Serialize(writer, m_intersection);
    // Exception handling omitted for brevity
} 
```

请注意，我们引入了第二个文件名 var `m_fileName2`，但您当然可以随意处理。

* * *

为了使其更通用，也许对两者都使用一个简单的函数：

```
function ToXmlFile(object o, string filename)
{
    using (StreamWriter writer = new StreamWriter(filename))
    {
        var serializer = new Xml.Serialization.XmlSerializer(o.GetType();
        serializer.Serialize(writer, o);
        // Exception handling omitted for brevity
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:35:25.540

您是否尝试过指定 XML 元素的类型？

```
[XmlElement("Intersection", Type=typeof(Intersection))]
[XmlElement("TubeIntersection", Type = typeof(TubeIntersection))] 
public Intersection TubeOrNoTubeIntersection { get; set; } 
```

--

如果您发布您尝试序列化的结构和您遇到的错误，您会得到更好的答案

# linq - 实体框架的 LINQ 动态查询

> ID：13628748
> 
> 赞同：1
> 
> 时间：2012-11-29T15:10:18.400
> 
> 标签：linq, entity-framework

我有两个 Guid 集合：

```
List<Guid> statuses;
List<Guid> priorities; 
```

如何进行以下查询：

```
var result = context.Activity.Where(a => 
    (a.StatusID == statuses[0] || a.StatusID == statuses[1] || ... || a.StatusID == statuses[n]) &&
    (a.PriorityID == priorities[0] || a.PriorityID == priorities[1] || ... || a.PriorityID  == priorities[m])) 
```

集合可能是空的，在这种情况下，我们不应该添加适当的“与”条件。如何做这样的动态查询？

**更新**

嗯，想象一下我需要这样的东西：

```
List<Func<Activity, bool>> conds = new List<Func<Activity, bool>>();

var result = context.Activity.Where(conds[0] || (conds[1] && conds[2])) 
```

怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T15:13:17.370

**基于问题的第一个答案**
仅选择那些位于和 位于的`Activity`对象。显然，如果集合为空，则没有任何对象符合条件。`StatusID``statusses``PriorityID``priorities``Activity`

```
var result = context.Activity.Where(a => 
    statuses.Contains(a.StatusID) && priorities.Contains(a.PriorityID)); 
```

**基于@Don Tomato 的评论的替代答案基于**
您提出问题的方式，一定存在误解。但是，我认为您想要的是`IQueryable`根据需要向 a 添加条件。

```
List<Func<Activity, bool>> conditions = new List<Func<Activity, bool>>();
// add conditions to the list
// for eaxmple:
// conditions.add(a => statuses.Contains(a.StatusID));
// or 
// conditions.add(a => a.Name == "Don Tomato");

IQueryable query = context.Activity.AsQueryable();
foreach (Func<Activity, bool> condition in conditions)
   query = query.Where(condition);

List<Activity> result = query.ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:14:35.933

您可以像这样将 where 子句链接在一起，最终结果是它们将被连接在一起：

```
var query = context.Activity.Where(o => <condition1>);

if (2ndconditionrequired)
{
    query = query.where(o => <condition2>);
}

query.ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:15:09.933

你也可以这样做：

```
var result = context.Activity;

if (statuses != null && statuses.Count > 0)
{
    result = results.Where(a => 
        a.StatusID == statuses[0] || a.StatusID == statuses[1] || ... || a.StatusID == statuses[n];
}

if (priorities != null && priorities.Count > 0)
{
    result = results.Where(a => 
        a.PriorityID == priorities[0] || a.PriorityID == priorities[1] || ... || a.PriorityID  == priorities[m]);
}

result.ToList(); // The query won't be executed until here. 
```

但我想你真正想做的是@Bazzz 回答。

# php - 致命错误：在非对象上调用成员函数 count()

> ID：13628751
> 
> 赞同：3
> 
> 时间：2012-11-29T15:10:25.567
> 
> 标签：php, xml, magento

我想就我的查询寻求一些帮助。

我创建了一个 CMS 页面，并希望在列表中显示特定类别的产品。因此，我创建了一个模块并粘贴了 catalog/product/list.phtml 中的完整代码，以查看它是否可行...

不幸的是，我收到了这个错误：`Fatal error: Call to a member function count() on a non-object in /Applications/MAMP/htdocs/mysite/app/design/frontend/bootstrapped/default/template/cmsproducts/index.phtml on line 23`

这是来自 list.phtml 的代码

```
<?php echo get_class($this);
/**
 * Magento responsive theme
 *
 * @category    design
 * @package     bootstrapped_default
 * @copyright   Copyright (c) 2012 Magenthon (http://magenthon.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 * @author      Vedran Subotic <vedran@magenthon.com>
 */
?>
<?php
/**
 * Product list template
 *
 * @see Mage_Catalog_Block_Product_List
 */
?>
<?php
    $_productCollection=$this->getLoadedProductCollection();
    $_helper = $this->helper('catalog/output');
?>
<?php if(!$_productCollection->count()): ?>
<div class="alert fade in">
  <a class="close" data-dismiss="alert">×</a>
  <?php echo $this->__('There are no products matching the selection.') ?>
</div>
<?php else: ?>
<div class="category-products">
    <?php echo $this->getToolbarHtml() ?>
    <?php // List mode ?>
    <?php if($this->getMode()!='grid'): ?>
    <?php $_iterator = 0; ?>
    <ol class="products-list unstyled row-fluid" id="products-list">
        <?php foreach ($_productCollection as $_product): ?>
        <li class="item<?php if( ++$_iterator == sizeof($_productCollection) ): ?> last<?php endif; ?> row-fluid">
            <?php // Product Image ?>
            <div class="span4"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image thumbnail"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(225); ?>" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></a></div>
            <?php // Product description ?>
            <div class="span8">
                <div class="thumbnail data">
                    <div class="caption">
                    <?php $_productNameStripped = $this->stripTags($_product->getName(), null, true); ?>
                    <h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $_productNameStripped; ?>"><?php echo $_helper->productAttribute($_product, $_product->getName() , 'name'); ?></a></h2>
                    <?php if($_product->getRatingSummary()): ?>
                        <?php echo $this->getReviewsSummaryHtml($_product) ?>
                    <?php endif; ?>
                    <div class="row-fluid">
                        <span class="pull-right">
                            <?php if($_product->isSaleable()): ?>
                                <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="btn btn-danger" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                            <?php else: ?>
                                <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                            <?php endif; ?>
                        </span>
                        <?php echo $this->getPriceHtml($_product, true) ?>
                    </div>
                    <div class="desc std">
                        <?php echo $_helper->productAttribute($_product, $_product->getShortDescription(), 'short_description') ?>
                        <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $_productNameStripped ?>" class="link-learn"><?php echo $this->__('Learn More') ?></a>
                    </div>
                    <p class="add-to-links unstyled">
                        <?php if ($this->helper('wishlist')->isAllow()) : ?>
                        <a href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" class="link-wishlist label label-info"><?php echo $this->__('Add to Wishlist') ?></a>
                        <?php endif; ?>
                        <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                        <span class="separator">|</span> <a href="<?php echo $_compareUrl ?>" class="link-compare label label-info"><?php echo $this->__('Add to Compare') ?></a>
                        <?php endif; ?>
                    </p>
                    </div>
                </div>
            </div>
        </li><hr>
        <?php endforeach; ?>
    </ol>
    <script type="text/javascript">decorateList('products-list', 'none-recursive')</script>

    <?php else: ?>

    <?php // Grid Mode ?>

    <?php $_collectionSize = $_productCollection->count() ?>
    <?php $_columnCount = $this->getColumnCount(); ?>
    <?php $i=0; foreach ($_productCollection as $_product): ?>
        <?php if ($i++%$_columnCount==0): ?>
            <ul class="products-grid unstyled thumbnails row-fluid">
            <?php endif ?>
            <li class="item<?php if(($i-1)%$_columnCount==0): ?> first<?php elseif($i%$_columnCount==0): ?> last<?php endif; ?> span4">
                <div class="thumbnail">
                <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" class="product-image thumbnail"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(225); ?>" alt="<?php echo $this->stripTags($this->getImageLabel($_product, 'small_image'), null, true) ?>" /></a>

                <div class="caption">
                    <h2 class="product-name"><a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->stripTags($_product->getName(), null, true) ?>"><?php echo $_helper->productAttribute($_product, $_product->getName(), 'name') ?></a></h2>
                    <?php if($_product->getRatingSummary()): ?>
                    <?php echo $this->getReviewsSummaryHtml($_product, 'short') ?>
                    <?php endif; ?>
                    <?php echo $this->getPriceHtml($_product, true) ?>
                    <?php if($_product->isSaleable()): ?>
                        <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="btn btn-danger btn-mini" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                    <?php else: ?>
                        <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
                    <?php endif; ?>
                    <p class="add-to-links unstyled">
                        <?php if($_compareUrl=$this->getAddToCompareUrl($_product)): ?>
                        <a href="<?php echo $_compareUrl ?>" class="link-compare label label-info pull-right"><?php echo $this->__('Add to Compare') ?></a>
                        <?php endif; ?>
                        <?php if ($this->helper('wishlist')->isAllow()) : ?>
                            <a href="<?php echo $this->helper('wishlist')->getAddUrl($_product) ?>" class="link-wishlist label label-info"><?php echo $this->__('Add to Wishlist') ?></a>
                        <?php endif; ?>

                    </p>
                </div>
                </div>
            </li>
            <?php if ($i%$_columnCount==0 || $i==$_collectionSize): ?>
            </ul>
        <?php endif ?>
        <?php endforeach ?>
    <script type="text/javascript">decorateGeneric($$('ul.products-grid'), ['odd','even','first','last'])</script>
    <?php endif; ?>

    <div class="toolbar-bottom">
        <?php
        /* @var $toolbar Mage_Catalog_Block_Product_List_Toolbar */
        // get toolbars limits - overrides default pager limit
        $toolbar = Mage::getBlockSingleton('catalog/product_list_toolbar')->getAvailableLimit();

        /* @var $pager Mage_Page_Block_Html_Pager */
        $pager = $this->getLayout()->createBlock('page/html_pager', 'bootstrapped.standalone.pager');

        // set limit - uses category's instead of default pager's (10-20-50)
        $pager->setAvailableLimit($toolbar);
        // need to set collection
        $pager->setCollection($_productCollection);
        //set custom template
        $pager->setTemplate('catalog/product/list/pager.phtml');
        echo $pager->toHtml();
        ?>
    </div>
</div>
<?php endif; ?> 
```

对于我的 CMS 块：

```
{{block type="core/template" category_id="41" template="cmsproducts/index.phtml"}} 
```

indexController.php 用于我的自定义模块：

```
<?php
class Thaneuk_Cmsproducts_IndexController extends Mage_Core_Controller_Front_Action{
    public function IndexAction() {  
    }
} 
```

我一直在寻找将产品从类别添加到 CMS 页面的方法，但每种方法都会导致错误或产品未显示。

任何人都可以帮助或向我推荐一个可行的分步指南吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T16:51:47.123

使其不引发错误的简单修复将是

```
<?php if(is_object($_productCollection) && !$_productCollection->count()): ?> 
```

但是您仍然需要找出代码中的缺陷，即为什么`$_productCollection`没有加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T21:35:06.000

解决了！！

```
<?php 
$category_id = "43"; // category_id for "Featured Products"
$_productCollection = Mage::getResourceModel('catalog/product_collection')
->addAttributeToSelect(array('name', 'price', 'small_image', 'short_description'), 'inner')
->addCategoryFilter(Mage::getModel('catalog/category')->load($category_id));
?>
<?php if($_productCollection->count()): ?>
      <div class="featured">
      <br />
      <ul id="featured-product-list">
        <div class="block-title">
      <h3><span><?php echo $this->__('FEATURED PRODUCT'); ?></span></h3>
    </div>
       <?php 
       $products = array();
       foreach ($_productCollection as $_product) { 
        ?>
        <li class="featured-product">
          <!--<h6>Price <?php echo Mage::helper('core')->currency($_product->getPrice());; ?></h6>-->
          <a href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>">
            <img class="product-image" src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(225, 200); ?>" alt="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" title="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" />
          </a>
        </li>
       <strong><a class="view-item-button" href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->htmlEscape($_product->getName()) ?>"><?php echo $this->__('Order'); ?> <?php echo $this->htmlEscape($_product->getName())?><?php echo $this->__('&#8482;'); ?></a></strong>
        <div class="clearfix"></div>
        <p>
            <?php echo $_product->_data['short_description']; ?>
        </p>
        <div class="clearfix"></div>  
        <?php } ?>
      </ul>
</div>  
<?php endif; ?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-11-24T15:36:12.473

我也发生了同样的错误。我在 XAMPP 服务器上使用 magento 1.9.1。我只刷新了所有 magento 索引并且一切正常。

转到系统/索引管理选择所有选项并执行“重新索引数据”操作

# asp.net - facebook 如何识别在 oAuth 流程中发出请求的用户

> ID：13628753
> 
> 赞同：1
> 
> 时间：2012-11-29T15:10:30.700
> 
> 标签：asp.net, facebook, facebook-graph-api

关于 facebook 中的 oAuth 流程，我有一些我想了解的内容。

我有一个 Facebook 应用程序。

当我直接访问我的应用程序站点（**而不是通过 facebook**），即在地址栏中输入我的应用程序站点 URL 时，我到达了我的应用程序。假设：[https ://myApp.com/fbApp](https://myApp.com/fbApp)

在服务器端有 oAuth 流程（发送对“code”参数的请求，然后使用“code”参数发送对“用户访问令牌”的另一个请求）。

我想知道 Facebook 如何知道谁是请求“代码”参数的用户。我注意到，当我登录 facebook 并直接访问我的网站（如上所述）时，我得到了“用户访问令牌”。

当第一次向 facebook 请求“code”参数时，他们的其他东西是否在幕后转移？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:43:55.530

是的，当向 Facebook 发出第一个重定向请求以获取 code 参数时，用于将您转发到 Facebook 的 URI 包含一个客户端 ID（请参阅[https://github.com/jcleblanc/oauth/blob/ master/oauth2-php-facebook/index.php](https://github.com/jcleblanc/oauth/blob/master/oauth2-php-facebook/index.php)第 7 行）。此客户端 ID 指的是站点开发人员在[https://developers.facebook.com/apps](https://developers.facebook.com/apps)为其站点创建的应用程序。

获取到 code 参数后，站点向 Facebook 发出 HTTP POST 请求，以将 code 交换为访问令牌。在此请求中，客户端 ID 和客户端密码都被传输（参见[https://github.com/jcleblanc/oauth/blob/master/oauth2-php-facebook/complete.php](https://github.com/jcleblanc/oauth/blob/master/oauth2-php-facebook/complete.php)第 10 行）。这两个密钥，客户端 ID 和客户端密钥，是直接引用创建的应用程序的密钥。

我希望这会有所帮助，乔恩

# ios - 将 CLRegion 转换为 MKMapRect 或类似的

> ID：13628755
> 
> 赞同：2
> 
> 时间：2012-11-29T15:10:35.913
> 
> 标签：ios, coordinate-transformation

我想将 CLRegion（中心和半径）转换为两点（左上角、右下角）坐标集。

我看过这个答案，但它不合适： [Convert MKCoordinateRegion to MKMapRect](https://stackoverflow.com/questions/9270268/convert-mkcoordinateregion-to-mkmaprect)

我有 CLRegion 的原因是因为它是 Forward Geolocation 的输出。

我需要两个纬度/经度点来查询数据库（因此不能使用 CLRegion containsCoordinate）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-09-23T07:47:29.050

斯威夫特 3 示例

```
let searchRequest = MKLocalSearchRequest(completion: searchCompleter.results[indexPath.row])
let search = MKLocalSearch(request: searchRequest)
search.start { [weak self] response, error in
    guard let region = response?.mapItems.first?.placemark.region as? CLCircularRegion else {
        return
    }
    let mkregion = MKCoordinateRegionMakeWithDistance(region.center, region.radius*2, region.radius*2)
    self?.mapView.setRegion(mkregion, animated: true)
    self?.searchController.isActive = false
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-04T01:40:29.843

这是一种在 CLCircularRegion（类似于 CLRegion）到 MKMapRect 之间进行转换的方法。

请记住，该方法返回的区域是一个适合 CLCircularRegion 的正方形，它是一个圆形。

```
- (MKMapRect) rectForCLRegion:(CLCircularRegion *) cicularRegion {
    MKCoordinateRegion region =  MKCoordinateRegionMakeWithDistance(cicularRegion.center, cicularRegion.radius*2, cicularRegion.radius*2);

    MKMapPoint a = MKMapPointForCoordinate(CLLocationCoordinate2DMake(
                                                                  region.center.latitude + region.span.latitudeDelta / 2,
                                                                  region.center.longitude - region.span.longitudeDelta / 2));
    MKMapPoint b = MKMapPointForCoordinate(CLLocationCoordinate2DMake(
                                                                  region.center.latitude - region.span.latitudeDelta / 2,
                                                                  region.center.longitude + region.span.longitudeDelta / 2));
    return MKMapRectMake(MIN(a.x,b.x), MIN(a.y,b.y), ABS(a.x-b.x), ABS(a.y-b.y));
} 
```

# java - 为什么来自 Servlet 的 Adob e CQ 5.5 Remote JMX 会失败？

> ID：13628759
> 
> 赞同：4
> 
> 时间：2012-11-29T15:10:44.830
> 
> 标签：java, adobe, osgi, jmx, aem

我正在尝试`HeapMemoryUsage`从作者实例中获取发布服务器的。我附上了下面调用的 servlet 的代码。

在异常中，您可以看到我们`NullPointerException`在第 88 行得到一个`JMXConnectorFactory.connect(serviceUrl)`.

从 Jconsole 或通过从测试类（使用 main 方法的本地）运行它，它可以正常运行。

例外：

```
29.11.2012 15:01:17.407 *ERROR* [127.0.0.1 [1354197677403] GET /bin/cqdashboard HTTP/1.1]      org.apache.sling.engine.impl.SlingRequestProcessorImpl service: Uncaught Throwable  java.lang.NullPointerException
at javax.management.remote.rmi.RMIConnector.getConnection(RMIConnector.java:2327)
at javax.management.remote.rmi.RMIConnector.connect(RMIConnector.java:277)
at javax.management.remote.JMXConnectorFactory.connect(JMXConnectorFactory.java:248)
at com.test.cq.dashboard.servlet.DashboardTestServlet.doGet(DashboardTestServlet.java:88)
..... 
```

编码：

```
String jmxUrl = "service:jmx:rmi:///jndi/rmi://127.0.0.1:43004/jmxrmi";
JMXServiceURL serviceUrl = new JMXServiceURL(jmxUrl);
JMXConnector jmxConnector = JMXConnectorFactory.connect(serviceUrl);
MBeanServerConnection mbeanConn = jmxConnector.getMBeanServerConnection();
ObjectName on = new ObjectName("java.lang:type=Memory");
CompositeData cd = (CompositeData) mbeanConn.getAttribute(on, "HeapMemoryUsage");
response.getWriter().write(cd.get("used"));
// System.out.println(cd.get("used")); 
```

*   我必须在 OSGi 包中导入一些包吗？
*   我需要使用adobe提供的其他类吗？
*   不可能做这样的事情吗？

首先十分感谢

# opengl - 如何使用opengl转换反馈，我总是在缓冲区中得到0

> ID：13628763
> 
> 赞同：7
> 
> 时间：2012-11-29T15:10:58.140
> 
> 标签：opengl

我试图使用变换反馈从顶点着色器中检索数据以进行调试，因为我的透视矩阵似乎计算错误。我在变换反馈缓冲区中什么也没有。谁能帮我弄清楚我做错了哪一步？

以下是我设置转换反馈的代码片段：

```
//vertex to be passed into shader
const float vertexPos[] =
{
     0.75f, 0.75f, 0.0f, 1.0f,
     0.75f, -0.75f, 0.0f, 1.0f,
     -0.75f, -0.75f, 0.0f, 1.0f
};

//set up transform feedback
const char *variableName = "retrieve";//the variable to be retreived in shader
float dateFromShader[16];//receive the data from shader
GLuint tf_bo;//transform feedback buffer id

glTransformFeedbackVaryings(shaderProgram, 1, &variableName, GL_INTERLEAVED_ATTRIBS);
glLinkProgram(shaderProgram);

glGenBuffers(1, &tf_bo);
glBindBuffer(GL_TRANSFORM_FEEDBACK_BUFFER, tf_bo);// Is this necessary to call glBindBuffer before glBindBufferBase?
     glBindBufferBase(GL_TRANSFORM_FEEDBACK_BUFFER, 0, tf_bo);
     glBufferDate(GL_TRANSFORM_FEEDBACK_BUFFER, sizeof(float) * 16, NULL, GL_DYNAMIC_COPY);
glBindBuffer(GL_TRANSFORM_FEEDBACK_BUFFER, 0);

//retrieve data from vertex shader
glEnable(GL_RASTERIZER_DICARD);
glBindBuffer(GL_TRANSFORM_FEEDBACK_BUFFER, tf_bo);
glBeginTransformFeedback(GL_TRIANGLES);
     glDrawArrays(GL_TRIANGLES, 0, 3);//
glEndTransformFeedback();

glBindBuffer(GL_ARRAY_BUFFER, tf_bo);
glGetBufferSubData(GL_ARRAY_BUFFER, 0, sizeof(float) * 16, dataFromShader);
glBindBuffer(GL_ARRAY_BUFFER, 0);
glDisable(GL_RASTERIZER_DISCARD); 
```

我的顶点着色器是这样的：

```
#version 420

layout(location = 0) in vec4 position;

uniform mat4 perspectiveMatrix;
out mat4 retrieve;

void main()
{
gl_Position = perspectiveMatrix * position;

retrieve = perspectiveMatrix;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T16:13:45.457

```
glBindBufferBase(GL_TRANSFORM_FEEDBACK_BUFFER, 0, tf_bo); 
```

如[文档中所述，`glBindBufferBase`](http://www.opengl.org/wiki/GLAPI/glBindBufferBase#Errors)要求缓冲区对象具有数据存储（即：您已调用`glBufferData`它）。*不能替代*; `glBindBufferBase`_ _ 是一种具有不同用途的不同功能。*`glBindBuffer`*

 *接下来，您将捕获一个矩阵。问题是您正在绘制*三个顶点*，这意味着您将捕获三个顶点。您只为一个分配了足够的空间。这将导致未定义的行为。

最重要的是……您认为这将完成什么？您正在捕获*直接上传*的统一值。除非您认为 glUniformMatrix 的实现版本在某种程度上被破坏了，否则这对调试任何东西都没有多大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-03T12:27:47.883

```
 glBufferDate(GL_TRANSFORM_FEEDBACK_BUFFER, sizeof(float) * 16, NULL, GL_DYNAMIC_COPY); 
```

Is this line not supposed to be:

```
 glBufferData(GL_TRANSFORM_FEEDBACK_BUFFER, sizeof(float) * 16, NULL, GL_DYNAMIC_COPY); 
```

Note the "glBufferData" not "glBufferDate". This will also support the fact that you are not getting any data in the buffer / 0 is being returned....*

# ios - iOS：更新子文件夹中的文件夹结构

> ID：13628767
> 
> 赞同：0
> 
> 时间：2012-11-29T15:11:07.403
> 
> 标签：ios, refresh, directory, subdirectory

在我的通用 iOS 应用程序中，我创建了一个保存在 plist 文件中的文件夹结构。它是这样构建的：

*   [数组] 根
    *   [字典] 项目 0
        *   [字符串] 标题
        *   [数组] 孩子
            *   [字典] 项目 0
            *   [字典] 第 1 项
    *   [字典] 第 1 项
        *   [字符串] 标题
        *   [数组] 孩子
            *   [字典] 项目 0
            *   [字典] 第 1 项
            *   [字典] 第 2 项
            *   [字典] 第 3 项
    *   [字典] 第 2 项
        *   [字符串] 标题
        *   [数组] 孩子

使用这种结构，我浏览文件夹。当前数据源（总是一个数组）的内容显示在表格视图中。现在可能是某些数据发生了变化。因此，我想刷新我的表结构和要填充的数据。如果在根文件夹中完成，则没有问题，但如果我在任何子文件夹中尝试，我只能刷新当前数组。因此，如果我导航回结构的上层，仍然使用旧数据。

什么是更新我的所有数据的好习惯，但仍保留在当前选定的文件夹中（仅当它仍然存在时）？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:17:26.197

你是如何导航到子文件夹的？如果你使用 UINavigationController，你应该在用户导航回来时重新加载你的 tableview。例如，您可以在 viewWillAppear 中执行此操作

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    // Reload data in table view
    [self.tableView reloadData];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:46:52.320

您可以使用通知，因此每个视图控制器都会监听更新通知，并在您的数据更改时发布通知。

您可以简单地在每个视图控制器的`viewWillAppear:`方法中重新加载表数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T15:58:40.113

1，您有一个用于更新 plist 的类方法，如下所示：[MyMethod updatePlist];

2，您有一个具有 viewWillAppear 或 viewDidAppear 方法的父视图控制器。在那里，您调用 [MyMethod updatePlist]。

3、你所有的viewController都继承父视图控制器。

所以每次加载新的视图控制器视图时，它总是更新 plist。如有必要，您可以添加处理内容以显示加载。

这有帮助吗？

# c# - ASP.net 所有行可编辑 GridView 与列表 作为数据源

> ID：13628769
> 
> 赞同：0
> 
> 时间：2012-11-29T15:11:09.067
> 
> 标签：c#, asp.net, list, gridview

有人可以发布一个所有行都可编辑（就像它是一个excel）并`list<type>`作为数据源的gridview的工作示例吗？

我们希望在回发之间保留用户在网格中输入的数据（可能由任何控件生成，而不仅仅是提交一个），然后从列表或网格视图中获取数据，以便我们使用它来插入或更新不同的表（这不是 1:1 关系 / grid:sqltable 的典型案例）

此外，我们还有一个下拉列表（带有自动回发），数字 1 到 9 控制在 gridview 中使用多少行，所以如果用户从 1 行更改为 5 行，则将向 gridview 添加 4 个新行，如果他从 8 更改到 5 行最后 3 行将被删除...（管理用户当前输入的数据）

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T08:45:24.417

像这样解决它：ASPX：

```
 <asp:DropDownList ID="ddlNItems" runat="server" AutoPostBack="True" OnSelectedIndexChanged="ddlNItems_SelectedIndexChanged">
     <asp:ListItem Selected="True">1</asp:ListItem>
     <asp:ListItem>2</asp:ListItem>
     <asp:ListItem>3</asp:ListItem>
     <asp:ListItem>4</asp:ListItem>
     <asp:ListItem>5</asp:ListItem>
     <asp:ListItem>6</asp:ListItem>
     <asp:ListItem>7</asp:ListItem>
     <asp:ListItem>8</asp:ListItem>
     <asp:ListItem>9</asp:ListItem>
 </asp:DropDownList>

 <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" ShowHeaderWhenEmpty="True">
     <Columns>
         <asp:TemplateField HeaderText="Código">
             <ItemTemplate>
                 <asp:TextBox ID="txtCodMuestra" runat="server" Text='<%# Eval("cod") %>' /></ItemTemplate>
             </asp:TemplateField>
          <asp:TemplateField HeaderText="Tipo">
              <ItemTemplate>
                  <asp:DropDownList runat="server" ID="ddlTipo" SelectedValue='<%# Eval("Tipo") %>'>
                      <asp:ListItem Value="a">A</asp:ListItem>
                      <asp:ListItem Value="b">B</asp:ListItem>
                      <asp:ListItem Value="c">C</asp:ListItem>
                  </asp:DropDownList>
              </ItemTemplate>
          </asp:TemplateField>
      </Columns>
  </asp:GridView> 
```

CS：

```
public class Itemx
{
    public string cod { get; set; }
    public string Tipo { get; set; }
}
public static List<Itemx> LItems
{
    get
    {
        return (List<Itemx>)Session["LItems"];
    }
    set
    {
        Session["LItems"]= value;
    }
}
void InitializeItems()
{
    LItems = new List<Itemx>();
    ConfigItems();
}
void ConfigItems()
{
    int numitems = Convert.ToInt32(ddlNItems.SelectedValue);

    if (LItems.Count > numitems )
    {
        for (int i = GridView1.Rows.Count; i > numitems; i--)
        {
            LItems.RemoveAt(i - 1);
        }
    }
    else if (LItems.Count < numitems )
    {
        for (int i = GridView1.Rows.Count; i < numitems; i++)
        {
            LItems.Add(new Itemx { Tipo = "a" });
        }
    }
    transferGridtoList();

    GridView1.DataSource = LItems;
    GridView1.DataBind();

    GridView1.HeaderRow.TableSection = TableRowSection.TableHeader;
}
private void transferGridtoList()
{
    for (int i = 0; i < LItems.Count && i < GridView1.Rows.Count; i++)
    {
        LItems[i].cod = ((TextBox)GridView1.Rows[i].Cells[0].Controls[1]).Text;
        LItems[i].Tipo = ((DropDownList)GridView1.Rows[i].Cells[1].Controls[1]).SelectedValue;
    }
}

protected void ddlNItems_SelectedIndexChanged(object sender, EventArgs e)
{
    ConfigItems();
} 
```

# sql-server - SQL 批量数据插入或更新

> ID：13628770
> 
> 赞同：0
> 
> 时间：2012-11-29T15:11:09.307
> 
> 标签：sql-server, c#-4.0

好的，就这样吧。我面临的要求是我在数据库中有一个表说“MyDbTable”，其中有很多数据。

可以说它具有三列，例如：

ColA ColB ColC

1 a ab
2 b bc
3 c cd

ColA 是身份

现在我调用一个 web 服务，预期结果包含大约 1500 行。

模式与返回的结果相同说：

ColA ColB ColC

1 a xy
3 c yz
4 c yz

现在我真正想做的是检查我在服务结果中的现有记录并在 MyDbTable 中更新它们，在这种情况下，它将是 ColA 中具有 1 和 3 的记录。我将不得不更新它们。对于 web 服务结果中 ColA 值为 4 的记录是新的，所以我必须插入它。

现在的问题是 MyDbTable 有数千行，并且服务也返回了许多行。

我知道最简单的方法是暴力破解，我们通过应用程序或存储过程遍历每条记录，检查它然后处理它。

我真正想知道的是如何以最优化的方式做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T06:05:36.713

这是我*认为*是最有效的方法（虽然还没有测量过）：

1.  使用批量复制操作（例如[`SqlBulkCopy Class`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx).

2.  使用单个 SQL Server[`MERGE`语句](http://technet.microsoft.com/en-us/library/bb510625.aspx)从临时表到实际表中进行“更新或插入”操作。

如果您使用的是早于 2008 年的 SQL Server 版本，则可以使用[带有 OUTPUT 子句的 UPDATE 语句](https://stackoverflow.com/q/2092510/87698)而不是`MERGE`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:18:59.910

好吧，你可以做一件事......

从 Web 服务获取第一行并获取它的 ID 说“1”并将其传递给 GetRecordFromDB 方法...

现在，如果该方法返回某个对象，则将其值设置为您从 Webservice 中找到的那些值。然后调用一个方法来更新数据库中的记录。

所以代码逻辑是

```
object updateorinsert = library.getobjectbyid(IDFROMFirstRecordOfWebservice)
if (updateorinsert  != null)
   {
           updateorinsert.ColAValue = WebserviceData.ColAValue
   }

  updateorinsert.ColBValue = WebserviceData.ColBValue
  updateorinsert.ColCValue = WebserviceData.ColCValue

library.UpdateRecordOrInsertInDB(updateorinsert); 
```

您也可以使用 SqlBulkCopy 并使用临时表执行适合您所有需要的插入/更新。

您可以在 BulkInsert 之后删除暂存表和实际表中的所有 ID，然后将所有记录从暂存表复制到实际表中。

[使用 SQLBulkCopy 插入/更新数据库](https://stackoverflow.com/questions/1700487/using-sqlbulkcopy-to-insert-update-database)

我希望上面的链接有帮助。

# jquery - 使用 jQuery 和任何滑块显示当前幻灯片的 id

> ID：13628774
> 
> 赞同：0
> 
> 时间：2012-11-29T15:11:16.567
> 
> 标签：jquery, anythingslider

我试图在幻灯片更改时将当前幻灯片的 ID 写入另一个 div。这可能会让您了解我想要实现的目标：

```
$(function(){
 $('#slider').anythingSlider({
    onSlideInit: function(e,slider){
        var currentID = $(this).attr('id');
        $('#slide-change').html(currentID);
    }
 });
}); 
```

和 HTML：

```
 <div id="slider-wrapper">
                <div id="slider">
                    <div id="1"><img src="images/slider/slide1.jpg" /></div>
                    <div id="2"><img src="images/slider/slide2.jpg" /></div>
                    <div id="3"><img src="images/slider/slide3.jpg" /></div>
                    <div id="4"><img src="images/slider/slide4.jpg" /></div>
                </div>
            </div> 
```

它有点工作 - 当幻灯片发生变化时，它会显示“滑块”这个词。这可能是一个非常基本的问题，抱歉，但我如何让它显示当前幻灯片的 id，而不是容器？我确定这只是使用正确选择器的情况，但我无法弄清楚。任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:41:01.920

我注意到滑块`activePage`向活动滑块附加了一个类。使用它，您可以访问当前幻灯片。

**编辑：**每莫蒂的评论。

```
var holder = $('#slide-change'); //'cache' the object
var mySlider = $('#slider').anythingSlider({
    onSlideComplete: function(slider){
        console.log(slider); //here you can investigate the slider object in your browser's console
        holder.html(slider.$currentPage.attr('id'));
    }
}); 
```

# silverlight - XAML：StackPanel 中两行之间的恶意间隙

> ID：13628775
> 
> 赞同：1
> 
> 时间：2012-11-29T15:11:16.637
> 
> 标签：silverlight, xaml, windows-phone, windows-phone-8

Windows 电话 8，XAML。我有两个彼此相邻`Line`的水平拉伸对象。`StackPanel`其中任何一个都没有左边距或右边距。然而，它们之间存在明显的差距。XAML 去：

```
<StackPanel x:Name="Root" Orientation="Horizontal">

    <Line
        x:Name="LHLine11"
        Margin="0,50,0,0"
        Stretch="Fill"
        Width="10"
        X1="0" X2="1" Y1="0" Y2="0"
        StrokeThickness="1"
        VerticalAlignment="Top"
        Stroke="{StaticResource PhoneButtonBasePressedForegroundBrush}"
        />

    <Line
        x:Name="LHLine1"
        Margin="0,50,0,0"
        Stretch="Fill"
        Width="10"
        X1="0" X2="1" Y1="0" Y2="0"
        StrokeThickness="1"
        VerticalAlignment="Top"
        Stroke="{StaticResource PhoneButtonBasePressedForegroundBrush}"
        />
   </StackPanel> 
```

怎么会？

如果您想知道为什么我不制作一条更长的单行：这是一个演示该行为的最小示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T16:27:01.360

我无法解释为什么当您使用 Line 元素时显然有 1 个像素的间隙，这似乎是不同的，也许是测量方法中的一个愚蠢的错误？几个快速的小解决方法是在其中一条线的连接侧添加 -1 边距。或者你可以用 Rectangles 代替它们，并在没有 1 个像素间隙的情况下完成同样的事情。

```
<StackPanel Orientation="Horizontal">
    <Rectangle Height="1" Fill="Blue" Width="50"/>
    <Rectangle Height="1" Fill="Red" Width="50"/>
</StackPanel> 
```

Hopefully this is at least somewhat helpful. Cheers

# android - SQLite Android 项目和 Android 库

> ID：13628776
> 
> 赞同：0
> 
> 时间：2012-11-29T15:11:18.133
> 
> 标签：android

我有以下几个：

*   一个主要的 Android 应用程序。
*   一个 Android 库项目。

主项目添加库项目。问题是，我需要两个应用程序使用相同的数据库和相同的数据模型。我需要访问数据库的相同表，并且我还需要相同的数据模型，因为我需要在彼此之间共享数据。

谁能解释我该怎么做？

非常感谢！！

# c# - DataGridView 单元格验证在行之间需要两个

> ID：13628779
> 
> 赞同：1
> 
> 时间：2012-11-29T15:11:24.670
> 
> 标签：c#, datagridview

尝试对一行中的某些单元格求和时遇到问题。输入值后单击单独的行需要很长时间。当我单击同一行中的另一个单元格时，不会发生这种情况。

这是我在`CellValidated`活动中的代码。

```
if (!_comparare)
{
    if (dataGridView1.Columns[e.ColumnIndex].HeaderText.Contains("COM"))
    {
        int total = 0;
        foreach (Gestiune gest in _selectedGestiuni)
        {
            int n = 0;
            total += Convert.ToInt32(int.TryParse(dataGridView1["COM_" + gest.Den_Gest, e.RowIndex].Value.ToString(), out n) ? dataGridView1["COM_" + gest.Den_Gest, e.RowIndex].Value : 0);
        }
        dataGridView1["Total", e.RowIndex].Value = total;
    }
} 
```

请帮我。我不明白为什么它不像通过同一行的单元格时那样快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:54:03.667

尝试更改您的代码

```
dataGridView1["COM_" + gest.Den_Gest, e.RowIndex].Value.ToString() 
```

至

```
dataGridView1["COM_" + gest.Den_Gest, e.RowIndex].EditedValue.ToString() 
```

# php - 在 Yii 中验证 SQL Server 的日期

> ID：13628787
> 
> 赞同：0
> 
> 时间：2012-11-29T15:11:49.137
> 
> 标签：php, sql-server, datetime, yii

我有一个带有 creation_date 字段的模型，该字段在为空时被分配当前日期，之后不会被修改。我还想验证日期以防止不正确的查询，因此这里是该字段的规则：

```
<?php
        array('creation_date', 'default', 'value' => date('Y-m-d\TH:i:s')),
        array('[...bunch of fields...], creation_date', 'required'),
        array('creation_date', 'date', 'format' => 'yyyy-MM-ddThh:mm:ss'),
?> 
```

如果我插入一条新记录，一切都很好，但是如果我更新一行（不修改creation_date），我会收到一个验证错误，因为从SQL Server 获取的日期将包括毫秒（例如`2012-11-29 11:24:26.000`）。我会将毫秒添加到验证格式中，但这是不可能的[1]。

有没有办法在没有黑客的情况下解决这个问题？还是我应该放弃格式验证？

[1] [http://www.yiiframework.com/doc/api/1.1/CDateTimeParser](http://www.yiiframework.com/doc/api/1.1/CDateTimeParser)

# ajax - Thymeleaf Spring weblow ajax

> ID：13628788
> 
> 赞同：1
> 
> 时间：2012-11-29T15:11:52.003
> 
> 标签：ajax, spring-webflow-2, thymeleaf

我正在尝试使用 Spring webflow 进行我的第一个 ajax 调用/响应，并使用 thymeleaf 呈现响应。我使用了他们 pdf Thymeleaf + Spring 3 中的百里香示例。

流配置：

```
<view-state id="detail" view="bookingDetail"> 
<transitionon="updateData">
<render fragments="hoteldata"/>
</transition>
</view-state> 
```

我的html：

```
<div id="data" th:fragment="hoteldata">
This is a content to be changed
</div> 
```

和

```
<script type="text/javascript" th:src="@{/resources/dojo/dojo.js}"></script>
<script type="text/javascript" th:src="@{/resources/spring/Spring.js}"></script>
<script type="text/javascript" th:src="@{/resources/spring/Spring-Dojo.js}"></script>
...
<form id="triggerform" method="post" action="">
<input type="submit" id="doUpdate" name="_eventId_updateData" value="Update now!" />
</form>
<script type="text/javascript">
Spring.addDecoration(
new Spring.AjaxEventDecoration({formId:'triggerform',elementId:'doUpdate',event:'onclick'}));
</script> 
```

首先我禁用提交：

```
 <input type="submit" id="doUpdate" name="_eventId_activeOrders" value="Update now!" onclick="return false;"/> 
```

以防止整个页面重新加载。

在日志中，我看到该操作由 SpringWebflow 执行，然后我看到：

Chrome Js 控制台：

```
Uncaught TypeError: Cannot read property 'method' of null Spring-Dojo.js:16
dojo.declare.submitForm Spring-Dojo.js:16
dojo.declare.submit Spring-Dojo.js:16
dojo.hitch 
```

或 Firefox 控制台：

```
TypeError: _1a is null
http://localhost:9092/resources/spring/Spring-Dojo.js
Line 16 
```

我不确定如何继续或从哪里开始搜索问题。有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:05:11.243

它确实看起来像一个javascript问题，好像DOJO没有找到您的`triggerform`表单标签（它正在寻找它的`method`属性但说表单对象为空）......

Could it be that your `activeOrders` transition is actually modifying that form and removing it, or maybe outputting different HTML for it than the one you show here? I'd suggest trying without the "activeOrders" event part.

And btw, you have a misspelled `transitionon` attribute in your SWF configuration (should be `transition on`)

# python - 确定整数是否在其他两个整数之间？

> ID：13628791
> 
> 赞同：539
> 
> 时间：2012-11-29T15:11:59.557
> 
> 标签：python

如何确定给定整数是否介于其他两个整数之间（例如大于/等于`10000`和小于/等于`30000`）？

我正在使用 2.3 IDLE，到目前为止我尝试的方法不起作用：

```
if number >= 10000 and number >= 30000:
    print ("you have to pay 5% taxes") 
```

* * *

## 回答 #1

> 赞同：1359
> 
> 时间：2012-11-29T15:13:36.087

```
if 10000 <= number <= 30000:
    pass 
```

有关详细信息，请参阅[文档](https://docs.python.org/3/reference/expressions.html#comparisons)。

* * *

## 回答 #2

> 赞同：109
> 
> 时间：2013-12-17T00:59:25.260

```
>>> r = range(1, 4)
>>> 1 in r
True
>>> 2 in r
True
>>> 3 in r
True
>>> 4 in r
False
>>> 5 in r
False
>>> 0 in r
False 
```

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2012-11-29T15:13:34.733

您的运营商不正确。应该是`if number >= 10000 and number <= 30000:`。此外，Python 有这种事情的简写，`if 10000 <= number <= 30000:`.

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2012-11-29T15:13:43.100

你的代码片段，

```
if number >= 10000 and number >= 30000:
    print ("you have to pay 5% taxes") 
```

实际检查 number 是否大于 10000 和 30000。

假设您要检查数字是否在 10000 - 30000 范围内，您可以使用 Python 区间比较：

```
if 10000 <= number <= 30000:
    print ("you have to pay 5% taxes") 
```

[Python 文档](http://docs.python.org/2/reference/expressions.html#not-in)中进一步描述了此 Python 功能。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2019-05-01T22:15:52.920

有**两种方法**可以比较三个整数并检查**b**是否在**a**和**c**之间：

```
if a < b < c:
    pass 
```

和

```
if a < b and b < c:
    pass 
```

第一个看起来更具可读性，但**第二个运行得更快**。

让我们使用**dis.dis**进行比较：

```
>>> dis.dis('a < b and b < c')
  1           0 LOAD_NAME                0 (a)
              2 LOAD_NAME                1 (b)
              4 COMPARE_OP               0 (<)
              6 JUMP_IF_FALSE_OR_POP    14
              8 LOAD_NAME                1 (b)
             10 LOAD_NAME                2 (c)
             12 COMPARE_OP               0 (<)
        >>   14 RETURN_VALUE
>>> dis.dis('a < b < c')
  1           0 LOAD_NAME                0 (a)
              2 LOAD_NAME                1 (b)
              4 DUP_TOP
              6 ROT_THREE
              8 COMPARE_OP               0 (<)
             10 JUMP_IF_FALSE_OR_POP    18
             12 LOAD_NAME                2 (c)
             14 COMPARE_OP               0 (<)
             16 RETURN_VALUE
        >>   18 ROT_TWO
             20 POP_TOP
             22 RETURN_VALUE
>>> 
```

并使用**timeit**：

```
~$ python3 -m timeit "1 < 2 and 2 < 3"
10000000 loops, best of 3: 0.0366 usec per loop

~$ python3 -m timeit "1 < 2 < 3"
10000000 loops, best of 3: 0.0396 usec per loop 
```

此外，您可以使用**range**，如前所述，但它要慢得多。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-11-29T15:13:04.877

```
if number >= 10000 and number <= 30000:
    print ("you have to pay 5% taxes") 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2018-12-13T01:26:46.910

定义数字之间的范围：

```
r = range(1,10) 
```

然后使用它：

```
if num in r:
    print("All right!") 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2015-11-16T22:52:36.470

`>=`比较的问题在于，当您将 a放在应该有 a 的位置时，它们可能难以调试`<=`

```
#                             v---------- should be <
if number >= 10000 and number >= 30000:
    print ("you have to pay 5% taxes") 
```

Python 让你只需用文字*写下*你的意思

```
if number in xrange(10000, 30001): # ok you have to remember 30000 + 1 here :) 
```

在 Python3 中，您需要使用`range`而不是`xrange`.

编辑：人们似乎更关心微基准测试以及链接操作有多酷。我的回答是关于防御性（错误的攻击面更少）编程。

由于评论中的声明，我在此处为 Python3.5.2 添加了微基准测试

```
$ python3.5 -m timeit "5 in range(10000, 30000)"
1000000 loops, best of 3: 0.266 usec per loop
$ python3.5 -m timeit "10000 <= 5 < 30000"
10000000 loops, best of 3: 0.0327 usec per loop 
```

如果您担心性能，您可以计算一次范围

```
$ python3.5 -m timeit -s "R=range(10000, 30000)" "5 in R"
10000000 loops, best of 3: 0.0551 usec per loop 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-01-07T07:36:07.823

假设有 3 个非负整数：`a`、`b`和`c`。从数学上讲，如果我们想确定是否`c`介于`a`和之间`b`，可以使用以下公式：

> (c - a) * (b - c) >= 0

或在 Python 中：

```
> print((c - a) * (b - c) >= 0)
True 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2022-01-13T09:00:23.590

以下是几种可能的方法，按性能从好到坏排序（即第一个性能最好）

```
 if 10000 <= b and b <=30000:
    print ("you have to pay 5% taxes")

 if 10000 <= number <= 30000:
    print ("you have to pay 5% taxes")

 if number in range(10000,30001):
    print ("you have to pay 5% taxes") 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-01-11T11:34:02.353

当且仅当数字介于 10,000 和 30,000 之间时，您希望输出打印给定的语句。

代码应该是；

```
if number >= 10000 and number <= 30000:
    print("you have to pay 5% taxes") 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-10-27T09:35:42.227

虽然`10 <= number <= 20`在 Python 中工作，但我发现这种表示法`range()`更易读：

```
if number in range(10, 21):
    print("number is between 10 (inclusive) and 21 (exclusive)")
else:
    print("outside of range!") 
```

请记住，第二个上限参数不包含在范围集中，可以通过以下方式进行验证：

```
>>> list(range(10, 21))
[10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20] 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-10-03T13:03:35.360

您使用 >=30000，所以如果数字是 45000，它将进入循环，但我们需要它大于 10000 但小于 30000。将其更改为 <=30000 即可！

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2021-08-22T00:27:13.870

试试这个简单的功能；它检查是否`A`在`B`和之间`C`（`B`并且`C`可能不是正确的顺序）：

```
def isBetween(A, B, C):
    Mi = min(B, C)
    Ma = max(B, C)
    return Mi <= A <= Ma 
```

所以`isBetween(2, 10, -1)`是一样的`isBetween(2, -1, 10)`。

* * *

## 回答 #15

> 赞同：-5
> 
> 时间：2020-04-13T11:15:52.747

条件应该是，

```
if number == 10000 and number <= 30000:
     print("5% tax payable") 
```

使用的原因`number == 10000`是如果 number 的值为 50000 并且如果我们使用`number >= 10000`条件将通过，这不是您想要的。

# android - Android软键盘动态改变输入布局

> ID：13628794
> 
> 赞同：1
> 
> 时间：2012-11-29T15:12:13.593
> 
> 标签：android, layout, input, keyboard

在我的应用程序中，用户可以通过 AutoCompleteTextView 在我的大学校园的建筑物中搜索房间。

95% 的房间都有“数字”，如“007”（仅限数字），但也有一些房间有“数字”，如“007a”。所以用户必须有机会输入**Strings**，而不仅仅是数字。

我想要的是：用户单击 AutoCompleteTextView 并且初始键盘应显示**数字**键盘，但可以选择切换到输入字母的布局。

我怎么能做到这一点？（到目前为止没有发现任何有用的东西......）在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T12:23:21.050

我有一个类似的问题。我还没有完全解决它，但你可能会从[我的问题](https://stackoverflow.com/questions/16542983/how-to-know-if-the-keyboard-layout-changes-between-numbers-and-letters)中得到一些想法。我在 EditText 旁边放置了一个按钮，用于在 InputType.TYPE_CLASS_NUMBER 和 InputType.TYPE_CLASS_TEXT 之间切换 EditText 的 InputType。

# jakarta-ee - 我可以把我的罐子放在哪里？耳朵与 Jboss 5.1

> ID：13628796
> 
> 赞同：3
> 
> 时间：2012-11-29T15:12:19.957
> 
> 标签：jakarta-ee, jboss, jboss5.x, ear

我不知道如何在我的上下文中构建我的耳朵文件。

这是我的实际结构：

```
ear
--lib
--war1
--war2
--warA
--warB 
```

在 ear/lib 中，我在战争之间有所有常见的罐子。一切正常，但我的耳朵很重。

事实上，war1 和 war2 共享一些 jar。WarA 和 WarB 也是。

我没有将这些罐子放在 ear/lib 中，因为 warA/B 不使用所有东西，war1/2 也一样。

今天，war1/2 随每个罐子一起提供，所以有些罐子是双份的。

我想要这样的东西：

```
ear
--lib (common jars)
--war1
--war2
--something who comes with common jars for war1/2
--warA
--warB
--something who comes with common jars for warA/B 
```

像这样，war1 和 war2 会更轻。战争A和战争B也是一​​样。

你知道我能不能做到这一点，我可以用什么样的档案来做到这一点？罐子，战争，sar？我在 Jboss 5.1

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:31:03.220

所以问题是：你有两套战争的耳朵：每一套使用同一个库的不同版本（所以第一套使用的版本必须与第二套隔离，反之亦然），而你没有不想在耳朵的不同位置多次放置同一个库。这些库的一部分，您可能拥有所有模块共享的其他库。

可能的解决方案：您可以为每个集合添加一个新的战争，这些将只包含同一集合中其余战争共享的库。然后，为了让它在没有类加载问题的情况下工作，你应该通过在每个 wars WEB-INF 目录和耳朵的 META-INF/jboss-classloading.xml 中方便地配置一个 jboss-classloading.xml 来隔离每组保持战争。

所以结构会是这样的：

```
yourapp.ear
    |
    |--lib
    |    |- place here the libraries shared by all the wars in the ear
    |
    |--META-INF
    |     |
    |     |-jboss-classloading.xml
    |
    |--war1SetA.war
    |     |
    |     |-WEB-INF
    |           |- jboss-classloading.xml    
    |           |
    |           |- classes
    |      
    |     
    |--war2SetA.war
    |     |
    |     |-WEB-INF
    |           |- jboss-classloading.xml    
    |           |
    |           |- classes
    |      
    |      
    |--libsSetA.war
    |     |
    |     |-WEB-INF
    |           |- jboss-classloading.xml    
    |           |
    |           |- lib
    |                |-Place here the libraries used by wars of setA
    |       
    |--war1SetB.war
    |     |
    |     |-WEB-INF
    |           |- jboss-classloading.xml    
    |           |
    |           |- classes
    |     
    |--war2SetB.war
    |     |
    |     |-WEB-INF
    |           |- jboss-classloading.xml    
    |           |
    |           |- classes
    |     
    |--libsSetB.war
          |
          |-WEB-INF
                |- jboss-classloading.xml    
                |
                |- lib
                     |-Place here the libraries used by wars of setB 
```

名为 libsSet* 的战争仅用于保留同一集合的战争使用的库。

集合 A 中的战争的 jboss-classloading.xml 应该类似于：

```
<classloading xmlns="urn:jboss:classloading:1.0"
    domain="SetA"
    export-all="NON_EMPTY"
    import-all="true"
    parent-domain="yourapp.ear"
    parent-first="false">
</classloading> 
```

对于 B 组中的战争，它应该是：

```
<classloading xmlns="urn:jboss:classloading:1.0"
    domain="SetB"
    export-all="NON_EMPTY"
    import-all="true"
    parent-domain="yourapp.ear"
    parent-first="false">
</classloading> 
```

重要提示：同一集中的所有战争的域属性必须相同。

最后，ear 文件中的 META-INF/jboss-classloading.xml 应该是：

```
<classloading xmlns="urn:jboss:classloading:1.0"
   domain="yourapp.ear"
   export-all="NON_EMPTY"
   import-all="true"
   parent-first="false">
</classloading> 
```

与此类似的另一种可能的解决方案是将每个集合的共享库置于该集合的战争之一中，这样您就不需要仅仅为库而战。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T23:29:00.990

如果我理解正确，您没有任何库版本和隔离问题，因此无论是否所有战争档案都使用库，您都可以将它们全部放在耳朵的 lib 目录中（您甚至可以考虑将库放在 jboss 实例 lib 目录中，并将它们从 ear/wars 中删除！）。这样，ear 文件将具有尽可能小的尺寸。

不用担心使用的内存，JBoss 类加载器只会加载一次库，因此它们将被所有需要它们的战争共享（另一种情况是，如果您需要为每个战争使用同一个库的不同版本） .

另一方面，如果任何一个库只被一个war文件使用，那么将库放在这个war的lib目录中也是最佳选择。

所以你的第一种方法是正确的，我认为你不需要改变它。

# xaml - 如何为字符串的长度设置 StringFormat

> ID：13628797
> 
> 赞同：0
> 
> 时间：2012-11-29T15:12:19.817
> 
> 标签：xaml, string-formatting

所以我知道可以在 Binding 中为日期和数值设置 StringFormat，但我想要实现的是 StringFormat，其中包含以下字符串：

“这是一个长文本的正文，在数据库中定义为 varchar(max)。这意味着字符串很长。”

至

“这是一个长 tex 的正文......”（最大长度为 25 个字符）

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:20:57.150

使用值转换器：

```
 public class LongtoShortenedStringValueConverter : IValueConverter
{
    private const int MaxLength= 0D;

    /// <summary>
    /// Modifies the source data before passing it to the target for display
    /// in the UI.
    /// </summary>
    /// <returns>
    /// The value to be passed to the target dependency property.
    /// </returns>
    /// <param name="value">
    /// The source data being passed to the target.
    /// </param>
    /// <param name="targetType">
    /// The <see cref="T:System.Type"/> of data expected by the target
    /// dependency property.
    /// </param>
    /// <param name="parameter">
    /// An optional parameter to be used in the converter logic.
    /// </param>
    /// <param name="culture">The culture of the conversion.</param>
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value == null)
        {
            return string.Empty;
        }

         return string.Concat(longString.Substring(0, MaxLength), "...");
    }

    /// <summary>
    /// Modifies the target data before passing it to the source object. This
    /// method is called only in <see cref="F:System.Windows.Data.BindingMode.TwoWay"/>
    /// bindings.
    /// </summary>
    /// <returns>
    /// The value to be passed to the source object.
    /// </returns>
    /// <param name="value">The target data being passed to the source.</param>
    /// <param name="targetType">
    /// The <see cref="T:System.Type"/> of data expected by the source object.
    /// </param>
    /// <param name="parameter">
    /// An optional parameter to be used in the converter logic.
    /// </param>
    /// <param name="culture">The culture of the conversion.</param>
    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotSupportedException();
    }
} 
```

}

所以上面会根据常量值将 oit 修剪为 80 个字符。然后在您的 xaml 中绑定到该字段

```
Text="{Binding YourLongString, Converter={StaticResource LongToShortStringValueConverter}}" 
```

# ant - 如何在不更改 ant 脚本的情况下从 javac 请求调试构建？

> ID：13628799
> 
> 赞同：1
> 
> 时间：2012-11-29T15:12:21.047
> 
> 标签：ant, javac

我有一个复杂的构建系统，涉及许多 ant 脚本，其中一些目标调用 javac 任务。

这些 ant 脚本不提供从 javac 请求调试构建的方法，即既未指定 javac 任务的 debug 参数也未指定 debuglevel 参数。

是否仍然可以指示 javac 在不更改构建脚本本身的情况下使用调试支持进行构建？

这些脚本是从控制台调用的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:45:27.750

不幸的是，简短的回答是否定的:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:02:17.917

Ant 脚本是否`javac`通过调用外部可执行文件来调用，即是[`fork=true`](http://ant.apache.org/manual/Tasks/javac.html)？如果是这样，您可以尝试`javac`在`$PATH`. 像这样的工具[`strace`](http://en.wikipedia.org/wiki/Strace)可以准确地告诉你是如何`javac`被调用的。

在 Unix 上，它可能看起来像这样：

```
echo '#!/bin/bash
exec /usr/bin/javac -g "${@}"' > ./javac
chmod +x javac
PATH=".:${PATH}" ant build 
```

* * *

如果 Ant 正在进程内调用 Java 编译器，您可以制作一个`javac`默认打开调试的 Ant 任务类的编辑版本，并在调用 Ant 时将其放在类路径中的官方 Ant jar 之前。

# command-line - DOMPDF 没有输出

> ID：13628815
> 
> 赞同：0
> 
> 时间：2012-11-29T15:13:03.893
> 
> 标签：command-line, dompdf

我正在尝试从 Windows 命令行运行 DOMPDF。我使用 domPDF 网站上的文档作为参考。 [DOMPDF 用法](http://code.google.com/p/dompdf/wiki/Usage)

```
C:\>php -f C:\dompdf\dompdf.php -- C:\example.html 
```

当我运行这个命令时，我什么也得不到。没有pdf，没有错误，注意。我尝试使用 -v 和 -d 标志来提高详细程度。我仍然没有输出，无论是屏幕还是命令行。

当我跑步时，

```
C:\>php -f C:\dompdf\dompdf.php -- -l 
```

我实际上得到了纸张大小的列表，因此安装了 PHP，并且我正确地调用了 dompdf php 文件。

有没有人知道为什么这实际上不会产生输出？

html 文件位于 C: 上，其中包含信息。

有没有人有任何从命令行运行 DOMPDF 的例子，或者看看我做错了什么？

谢谢您的帮助。

# matlab - 拉普拉斯滤波器公式

> ID：13628820
> 
> 赞同：-1
> 
> 时间：2012-11-29T15:13:24.050
> 
> 标签：matlab, image-processing, octave

我尝试了拉普拉斯滤波器方法，但我认为我的公式有问题。

我的原始矩阵（f）

```
 a b
a 1 2
b 3 4 
```

新矩阵 (g) 通过填充旧矩阵并复制原始矩阵以使用 3x3 过滤器掩码

```
 a b c d e f
a 1 2 1 2 1 2
b 3 4 3 4 3 4
c 1 2 1 2 1 2
d 3 4 3 4 3 4
e 1 2 1 2 1 2
f 3 4 3 4 3 4 
```

过滤器（米）

```
 a  b  c
a 0  1  0
b 1 -4  1
c 0  1  0 
```

然后我从新矩阵中的 [c,c] 开始。我在计算中所做的是
g(c,c) = g (c,c) + -1* (m(a,a)*g(b,b) + m(a,b)*g(b, c) + m(a,c)*g(b,d) + m(b,a)*g(c,b) + m(b,b)*g(c,c) + m(b,c )*g(c,d) + m(c,a)*g(d,b) + m(c,b)*g(d,c) + m(c,c)*g(d,d) );

在对 g(c,c) 、 g(c,d) 、 g(d,c) 、 g (d,d) 执行过滤器后，我将矩阵裁剪为过滤后的这些过滤器指向新矩阵，但结果看起来真的很奇怪。（不像书中那样）。我尝试自己在matlab中做。

有一天可以帮我解决这个问题吗？非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T17:05:16.410

要获得与使用 conv2 和 filter2 的 Nasser 方法相同的结果（它们只是相同，因为您的过滤器具有对称行），首先您不能就地执行此操作。以前过滤的条目会弄乱后续的计算。其次，我不确定它的`g(c,c) + -1*`来源。 g(c,c) 的正常过滤器计算将是：

```
r(c,c) = m(a,a)*g(b,b) + m(a,b)*g(b,c) + m(a,c)*g(b,d) +...
         m(b,a)*g(c,b) + m(b,b)*g(c,c) + m(b,c)*g(c,d) +...
         m(c,a)*g(d,b) + m(c,b)*g(d,c) + m(c,c)*g(d,d); 
```

其中 r 是结果矩阵。此方法（对原始矩阵中的其他 3 个值重复）给出：

```
r =
   c  d
c  6  2
d -2 -6 
```

**更新**

使用：

```
A =
    1     2     1     2     1     2
    3     4     3     4     3     4
    1     2     1     2     1     2
    3     4     3     4     3     4
    1     2     1     2     1     2
    3     4     3     4     3     4

mask =
    0     1     0
    1    -4     1
    0     1     0 
```

imfilter 给出：

```
imfilter(A,mask)
ans =
    1    -2     3    -2     3    -3
   -6    -6    -2    -6    -2    -9
    4     2     6     2     6     1
   -6    -6    -2    -6    -2    -9
    4     2     6     2     6     1
   -7    -8    -3    -8    -3   -11 
```

上面建议的功能，

```
for i=1:2
    for j=1:2
        r(i,j) = m(1,1)*g(i+1,j+1) + m(1,2)*g(i+1,j+2) + m(1,3)*g(i+1,j+3) +...
                 m(2,1)*g(i+2,j+1) + m(2,2)*g(i+2,j+2) + m(2,3)*g(i+2,j+3) +...
                 m(3,1)*g(i+3,j+1) + m(3,2)*g(i+3,j+2) + m(3,3)*g(i+3,j+3);
    end
end 
```

给出：

```
ans =
     6     2
    -2    -6 
```

这是否符合您的预期？

注意：上面的函数不是我将如何实现它，但它遵循您为清楚起见提供的示例。

# io - AppleScript - 在脚本编译后读取已修改的文件

> ID：13628827
> 
> 赞同：1
> 
> 时间：2012-11-29T15:13:36.737
> 
> 标签：io, applescript

我有一个`iCal (Calendar)`设置为每天响起的闹钟。它解析`csv`包含电子邮件和日期的 a，然后在适当的日期发送电子邮件。是静态编码的`csv`，因为我希望它在后台运行。

下面是读取文件的代码：

```
set theLines to paragraphs of (read (open for access file "csv path")) 
```

我遇到的问题是，如果我修改`csv`文件（添加或删除行），它似乎读取不正确。据我所知，在修改它之前，它工作正常。
在我修改它（我必须定期进行）之后，它不能正确读取它，因为它是基于缓存版本或其他东西。我唯一的想法是我错误地读取了文件。有没有更合适的方式来读取文件？我是 AppleScript 新手，但不是编程新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:19:13.187

您不需要“开放访问”。试试这个：

```
set theLines to paragraphs of (read "/Users/Grant/path/to/your/file.txt") 
```

或者

```
set theLines to paragraphs of (do shell script "cat '/Users/Grant/path/to/your/file.txt'") 
```

# apache - Apache 301 重定向和保留帖子数据

> ID：13628831
> 
> 赞同：36
> 
> 时间：2012-11-29T15:13:42.893
> 
> 标签：apache, rewrite, http-post, http-status-code-301

我已经使用 Apache 301 重定向到网站根目录中的“redirect.cfm”实现了 SEO URL，该网站处理所有 URL 构建和内容交付。

Post 数据在 301 重定向期间丢失。

到目前为止无法找到解决方案，已尝试从重写中排除 post 方法 - 最坏的情况是我们可以将旧类型的 URL 用于 post 方法。

有什么可以做的吗？

谢谢

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2014-02-17T05:10:54.653

使用 a`307`应该[正是你想要的](https://softwareengineering.stackexchange.com/questions/99894/why-doesnt-http-have-post-redirect#99966)

```
307 Temporary Redirect (since HTTP/1.1)
In this case, the request should be repeated with another URI; however, future requests
should still use the original URI.[2] In contrast to how 302 was historically implemented,
the request method is not allowed to be changed when reissuing the original request. For
instance, a POST request should be repeated using another POST request 
```

-[维基百科](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#3xx_Redirection)

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-11-29T15:18:27.007

**大约 2021 年更新** 这里的原始答案是在`307`状态代码重定向在浏览器中一致工作之前编写的。根据下面 Hashbrown 的回答，`307`应该使用状态码。

**旧答案** POST 数据在重定向时被丢弃，因为客户端将对 301\. 期间指定的 URL 执行 GET 请求。

唯一的选择是将 POST 参数转换为 GET 参数并将它们附加到您要重定向到的 URL 的末尾。这不能在 .htaccess 文件重写中完成。

一种选择是捕获对要重定向的 url 的 POST 请求，并将其传递给页面以处理重定向。您需要在代码中对参数进行转置，然后以这种方式发出带有参数附加新 url 的重定向标头。

更新：正如此答案的评论中所指出的，如果您确实重定向到另一个指定 POST 参数的 URL，并且该 URL 也可以在没有参数的情况下访问（或者参数是可变的），您应该指定一个指向该页面的规范 URL 的链接.

假设 POST 表单重定向到以下 GET 资源：

```
 http://www.example.com/finalpage.php?form_data_1=123&form_data_2=666 
```

您可以将此链接记录添加到页面的 head 部分：

```
 <link rel="canonical" href="http://www.example.com/finalpage.php" /> 
```

这将确保将所有 SEO 值赋予[http://www.example.com/finalpage.php](http://www.example.com/finalpage.php)并避免重复内容可能出现的问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-19T12:19:43.417

使用 301 重定向进行一般 URL 重写不是可行的方法。这是一个性能问题（尤其是对于移动设备，但通常也是如此），因为它会使您页面的请求数量增加一倍。

考虑使用像 Tuckey's`URLrewriteFilter`或 apache这样的 URL 重写工具`mod_rewrite`。

雷所说的都是真的，这只是对您的一般方法的补充评论。

# html - Chrome 渲染错误

> ID：13628832
> 
> 赞同：0
> 
> 时间：2012-11-29T15:13:44.060
> 
> 标签：html, css, google-chrome

我在 Chrome 中渲染时遇到了一种奇怪的不一致。

可以使用以下代码复制该问题的简化示例：

```
<html>
<head>
<style>
    input, span {
        border: 1px solid #CCC;
        padding: 3px 4px;
        height: 23px;
        width: 120px;
        display: block;
        font-size: 13px;
    }  
    </style>
</head>
<body>
    <div><span>123</span></div>
    <div><input type='text'/></div>
</body>
</html>​ 
```

因此，简而言之，`span`and`input`应该具有相同的大小，但事实证明，Chrome 以不同的方式呈现元素：

*   跨度被渲染所以它的实际大小是`31px`
*   输入被渲染，所以它的实际大小是`23px`

经过调查，它看起来像 Chrome 渲染`span`所以它的“内部”（没有边框和填充）大小是 20 像素，而`input`渲染所以它的“外部”大小是 20 像素。

在实际应用程序中，控件用于“就地编辑”场景，因此当用户单击跨度时，跨度变为隐藏并且输入显示在其位置上。如您所见，在大小如此不同的情况下，过渡并不顺利。Wjat 的价值在于控件被放置在一个表格单元格中，因此宽度和高度的差异会导致整个表格稍微改变布局。

我正在开发一个跨平台的应用程序，所以它也应该在 IE9 中工作。问题是 IE 呈现`input`的`span`大小相同，因此页面在 IE 和 Chrome 中看起来完全不同。为了让我的生活更艰难，这些控件由 ASP.NET 服务器控件呈现，并且我只能更改 css。

我在 Win7x64 上使用 Chrome 23.0.1271.91（发布时最新）。

所以，其实有两个问题：

1.  我该如何解决？
2.  为什么会这样？我错过了一些明显的东西吗？这是预期的行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:23:55.847

由于 Chrome 支持 box-sizing，请尝试：

```
<html>
<head>
<style>
    input, span {
        border: 1px solid #CCC;
        padding: 3px 4px;
        height: 23px;
        width: 120px;
        display: block;
        box-sizing:border-box;

    }  
    </style>    
</head>
<body>
    <div><span>123</span></div>
    <div><input type='text'/></div>
</body>
</html>​ 
```

[http://jsfiddle.net/9esTQ/](http://jsfiddle.net/9esTQ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:27:07.293

Chrome`box-sizing: border-box;`默认设置在输入元素和文本区域上。

设置`box-sizing: content-box`为使它们都表现得像跨度或两者都设置为边界框以使它们表现得像输入。

关于 box-sizing 方法的一个很好的解释可以在这里找到：[http ://www.quirksmode.org/css/box.html](http://www.quirksmode.org/css/box.html)

# html - IE 8 中的第 n 个子选择器（伪类）

> ID：13628834
> 
> 赞同：0
> 
> 时间：2012-11-29T15:13:50.543
> 
> 标签：html, internet-explorer, css

我需要表达

```
`tr:nth-child(2n){background-color: #ddd;}` 
```

为我动态创建的表的第二行着色。但是这个表达式只适用于 IE9。那么是否也可以为 IE8 启用这些 CSS3 伪类呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:17:51.110

据我所知，对于 IE8 而言。但是，有一个使用 jQuery 的解决方案，`.filter(":even").` [请参阅有关它的文档](http://api.jquery.com/even-selector/)。它适用于 IE7 或更高版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:23:10.490

您可以在 IE 中使用诸如[selectivizr](http://selectivizr.com/)之类的 JavaScript 填充程序获取第 n 个子选择器。这篇文章对于伪造功能[http://abouthalf.com/2011/07/06/poor-mans-nth-child-selector-for-ie-7-and-8/](http://abouthalf.com/2011/07/06/poor-mans-nth-child-selector-for-ie-7-and-8/)也很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-17T14:55:16.450

我是通过 Prototype JS 完成的。也适用于 IE8。

```
var rowCounter = 0;
$$('tr').each(function (row) { /*$$('tr') == array of tr tags*/
    if (rowCounter % 2 === 0) { /*modulo dividing find even element*/
        row.addClassName('even');
    }
    rowCounter += 1;
}); 
```

访问：http: [//jsfiddle.net/P9SHy/3/](http://jsfiddle.net/P9SHy/3/)

# database - 使用可以更改的数据集进行分页？

> ID：13628838
> 
> 赞同：0
> 
> 时间：2012-11-29T15:14:05.920
> 
> 标签：database, gwt, client, paging

我确信关于这个主题有一些东西，但我就是不知道如何用词来搜索它。

我有一个记录表，它被加载到 UI 中的分页网格中。用户具有更新/修改这些记录的能力。多个用户也可以同时使用系统，所有用户都访问相同的数据。我在分页网格上有一个过滤器，允许用户只看到 X 类型的记录。

当用户第一次进入并选择过滤器 X 时，他们会在第 1 页（共 2 页）上看到项目 1-25。他们分页到第二页，其中项目应该是 26-50 ..但在他们分页之前，让我们说第一页上有 25 条记录他们的类型被另一个用户改变了，现在他们在选择那个过滤器时不会出现。所以现在我们要翻页的项目减少了 25 个，这意味着之前 26-50 个的项目现在是第 1-25 个项目，而第 2 页现在是第 1 页，并且没有第 2 页...

您可能会看到我遇到的问题，我将偏移量传递给查询以获取下一页结果..但是现在偏移量如此之高，它返回的记录空白页使用户和我们的记录感到困惑加工。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T18:14:28.277

这个问题真的没有一个简单的解决方案。甚至 GMail/Google 也不会显示搜索时找到的消息/页面的确切数量。

您可以做的第一件事（如果您使用`DataGrid`/ `CellTable`）将布尔值设置`exact`为`false`当您调用 时`updateRowCount`，并给它您当前的记录数而不是您的总记录数。这将使寻呼机显示“1 - 25 of over 25”而不是“1 - 25 of 50”。

下一个可能性是定期更新行数（使用 RPC 轮询来检查新的/删除的记录 - 或使用服务器推送技术，请参阅[GWTEventService](http://code.google.com/p/gwteventservice/)和[ServerPushFAQ](http://code.google.com/p/google-web-toolkit-incubator/wiki/ServerPushFAQ)）。

您还可以检查您的请求是否返回项目，如果没有则取消调用/更新行数。

# android - 将列表投射到对象

> ID：13628844
> 
> 赞同：0
> 
> 时间：2012-11-29T15:14:12.023
> 
> 标签：android

我正在尝试将适配器添加到我的活动中，以便显示动物列表。

我收到此错误：

> ```
> 11-24 12:08:20.918: E/AndroidRuntime(6394): java.lang.ClassCastException: com.myapp.animals.Animal cannot be cast to java.util.Map 
> ```

```
 package com.myapp.animals;

    import java.util.List;

    import android.app.Activity;
    import android.os.Bundle;
    import android.view.Menu;
    import android.widget.ListView;
    import android.widget.SimpleAdapter;

public class SlachtList extends Activity {
    static final String[] FROM = {AnimalData.C_BATCHNR, AnimalData.C_VOLGNUMMER};
    static final int[] TO = {android.R.id.text1,android.R.id.text2 };

    ListView list;
    List animals;
    SimpleAdapter adapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_slacht_list);

        list = (ListView) findViewById(R.id.list);
        animals = ((AnimalApp) getApplication()).animalData.getAnimals();

        adapter = new SimpleAdapter(this, animals, android.R.layout.two_line_list_item, FROM, TO);
        list.setAdapter(adapter);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_slacht_list, menu);
        return true;
    }

} 
```

动物是动物对象的列表。显然适配器想要不同类型的对象。我认为这就是问题所在。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:23:47.310

SimpleAdapter 的构造函数声明为

`public SimpleAdapter (Context context, List<? extends Map<String, ?>> data, int resource, String[] from, int[] to)`

并且您正在向其中传递一个简单的列表。

你的清单必须是这样的

`List<HashMap<String, String>> animals;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:39:24.240

你真的应该使用自定义适配器而不是 SimpleAdapter，它真的不足以处理对象，你可以用 SimpleAdapter 做的是（假设你想按动物的名字列出动物）：

```
 SimpleAdapter adapter = new SimpleAdapter(this, GetSampleData(), android.R.layout.two_line_list_item, FROM, TO); 
```

使用此方法：

```
List<Map> GetSampleData()
{
 List<Map> list = new ArrayList<Map>();
 for(int i=0;i<animals.size();i++){
    Map map = new HashMap();
    map.put("animalName", animals.get(i).getName());     
    list.add(map);
  }
 return list;
} 
```

# mysql - 选择最后 x 行

> ID：13628845
> 
> 赞同：1
> 
> 时间：2012-11-29T15:14:17.547
> 
> 标签：mysql, sql

我想显示按添加日期升序排列的表格的最后 10 行。

我知道我可以`select count(*) as total from tableName`然后`$offset = 10 - total``select * from tableName order by dateadded asc limit 10 offset $offset`

**注意：**我需要反向显示结果，最旧的在顶部，最新的在底部，因此简单地按 desc 排序不会产生我需要的结果

这可以在一个查询中完成吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-29T15:16:44.453

只需订购 DESC...

```
SELECT *
FROM tableName
order by dateadded DESC
Limit 10 
```

交换结果的顺序

```
SELECT *
FROM (
    SELECT *
    FROM tableName
    order by dateadded DESC
    Limit 10
    ) r
ORDER BY dateadded 
```

# android-sqlite - 为什么我不能在Android上使用SQLiteDatabase的delete功能

> ID：13628846
> 
> 赞同：-2
> 
> 时间：2012-11-29T15:14:24.723
> 
> 标签：android-sqlite

我正在尝试使用删除我的数据的`delete`功能，但它总是显示我很**遗憾**。`SQLiteDataBase`

 **这是我的方法：

```
private void del(){

        String id = editId.getText().toString();

        SQLiteDatabase db = dbhelper.getWritableDatabase();
        db.delete(TABLE_NAME, _ID + "=" + id, null);

        cleanEditText();
    } 
```

但是，如果我使用`db.execSQL("DELETE from friends");`而不是`delete`函数，它会起作用，并删除所有数据。

如何使该`delete`功能正常工作？

```
The LogCat say the following:
11-29 23:55:02.597: E/AndroidRuntime(29207): FATAL EXCEPTION: main
11-29 23:55:02.597: E/AndroidRuntime(29207): android.database.sqlite.SQLiteException: no such column: Adam: , while compiling: DELETE FROM friends WHERE _id=Adam
11-29 23:55:02.597: E/AndroidRuntime(29207):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
11-29 23:55:02.597: E/AndroidRuntime(29207):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:68)
11-29 23:55:02.597: E/AndroidRuntime(29207):    at android.database.sqlite.SQLiteProgram.compileSql(SQLiteProgram.java:143)
11-29 23:55:02.597: E/AndroidRuntime(29207):    at android.database.sqlite.SQLiteProgram.compileAndbindAllArgs(SQLiteProgram.java:361)
11-29 23:55:02.597: E/AndroidRuntime(29207):    at android.database.sqlite.SQLiteStatement.acquireAndLock(SQLiteStatement.java:266)
11-29 23:55:02.597: E/AndroidRuntime(29207):    at android.database.sqlite.SQLiteStatement.executeUpdateDelete(SQLiteStatement.java:88)
11-29 23:55:02.597: E/AndroidRuntime(29207):    at android.database.sqlite.SQLiteDatabase.delete(SQLiteDatabase.java:1747)
11-29 23:55:02.597: E/AndroidRuntime(29207):    at com.tonycube.demo.SQLiteDemoActivity.del(SQLiteDemoActivity.java:163)
11-29 23:55:02.597: E/AndroidRuntime(29207):    at com.tonycube.demo.SQLiteDemoActivity.onClick(SQLiteDemoActivity.java:86)
11-29 23:55:02.597: E/AndroidRuntime(29207):    at android.view.View.performClick(View.java:3574)
11-29 23:55:02.597: E/AndroidRuntime(29207):    at android.view.View$PerformClick.run(View.java:14293)
11-29 23:55:02.597: E/AndroidRuntime(29207):    at android.os.Handler.handleCallback(Handler.java:605)
11-29 23:55:02.597: E/AndroidRuntime(29207):    at android.os.Handler.dispatchMessage(Handler.java:92)
11-29 23:55:02.597: E/AndroidRuntime(29207):    at android.os.Looper.loop(Looper.java:210)
11-29 23:55:02.597: E/AndroidRuntime(29207):    at android.app.ActivityThread.main(ActivityThread.java:4441)
11-29 23:55:02.597: E/AndroidRuntime(29207):    at java.lang.reflect.Method.invokeNative(Native Method)
11-29 23:55:02.597: E/AndroidRuntime(29207):    at java.lang.reflect.Method.invoke(Method.java:511)
11-29 23:55:02.597: E/AndroidRuntime(29207):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:823)
11-29 23:55:02.597: E/AndroidRuntime(29207):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:590)
11-29 23:55:02.597: E/AndroidRuntime(29207):    at dalvik.system.NativeStart.main(Native Method) 
```

这是助手：

```
public class DBHelper extends SQLiteOpenHelper {

    private final static String DATABASE_NAME = "demo.db";
    private final static int DATABASE_VERSION = 1;

    public DBHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        final String INIT_TABLE = "CREATE TABLE " + TABLE_NAME + " (" +
                                  _ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
                                  NAME + " CHAR, " +
                                  TEL + " CHAR, " +
                                  EMAIL + " CHAR);"; 
        db.execSQL(INIT_TABLE);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        final String DROP_TABLE = "DROP TABLE IF EXISTS " + TABLE_NAME;
        db.execSQL(DROP_TABLE);
        onCreate(db);
    }

} 
```

然后，这是我的点击功能：

```
@Override
    public void onClick(View v) {
        switch (v.getId()) {
        case R.id.btnAdd:
            add();
            break;

        case R.id.btnDel:
            del();
            break;

        case R.id.btnUpdate:
            update();
            break;

        default:
            break;
        }

        show();
        showInList();
    } 
```

结果会是这样。 [http://i.imgur.com/Y2TEf.png](http://i.imgur.com/Y2TEf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:36:03.033

“我正在尝试使用 SQLiteDataBase 的删除功能来删除我的数据，但它总是告诉我”——总是告诉你什么？运行代码时遇到什么错误（如果有）？

下面是一个使用删除的例子：

```
db.delete(TABLE_NAME, _ID + " = ?", new String[] { Integer.toString(id) }); 
```

您应该始终使用参数化查询来帮助缓解 SQL 注入攻击。

您说`db.execSQL("DELETE from friends");`有效，但这是一个完全不同的查询，并且不按 ID 选择——也许您的`_ID`常数是错误的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:27:29.907

代替

```
db.delete(TABLE_NAME, _ID + "=" + id, null); 
```

使用以下行

```
db.delete(TABLE_NAME, _ID + "=" + "'"+id+"'", null); 
```

让我知道结果**

# php - IIS - 运行 Codeigniter 不会执行 PHP 脚本

> ID：13628848
> 
> 赞同：1
> 
> 时间：2012-11-29T15:14:41.947
> 
> 标签：php, codeigniter, localhost

我刚刚在本地计算机的 Windows 7 IIS 上安装了 Codeigniter 应用程序。

路由没问题，控制器似乎正在加载视图，但它们上的 PHP 脚本不显示传递的变量并被解释为 HTML。

PHP 脚本在没有 Codeigniter 的情况下运行正常。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:13:22.533

ISS自带的PHP版本需要声明PHP语句。

```
<?php 
```

新的开口本身是行不通的。

```
<? 
```

# jquery - 检索到所有 div 元素后，Jquery 显示预加载器

> ID：13628855
> 
> 赞同：1
> 
> 时间：2012-11-29T15:15:03.117
> 
> 标签：jquery

我想在一个 div 中显示一个预加载器，一旦另一个 div 检索到它的所有内容，我希望预加载器消失。

例如：

```
<div id="container">
   <div id="preloader">
     loading....
   </div>
   <div id="containeritems">
   image 
```

应该首先显示容器，然后显示预加载器，一旦加载了所有元素，我希望预加载器 div 消失。

我已经尝试过加载和显示和隐藏，显示和隐藏工作但不支持 div.load 功能我想我`divs`还能如何收听 containeritems div 以便我可以知道元素已加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:33:51.487

当我从服务器检索数据或保存时，我使用

```
Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(PageLoaded);

function PageLoaded(sender, args) {
  $('#elem').hide();

} 
```

# python - 将 numpy.logical_and 与 Pandas Series 对象一起使用时出现 AttributeError

> ID：13628860
> 
> 赞同：0
> 
> 时间：2012-11-29T15:15:15.940
> 
> 标签：python, numpy, pandas

我对 Pandas Series 对象在使用`reindex_like`和相关功能时的区别感到困惑。例如，考虑以下 Series 对象：

```
>>> import numpy
>>> import pandas
>>> series = pandas.Series([1, 2, 3])
>>> x = pandas.Series([True]).reindex_like(series).fillna(True)
>>> y = pandas.Series(True, index=series.index)
>>> x
0    True
1    True
2    True
>>> y
0    True
1    True
2    True 
```

从表面上看，它们的内容`x`和`y`索引似乎相同。但是，它们必须在某些方面有所不同，因为其中一个在使用时会导致错误，`numpy.logical_and()`而另一个不会。

```
>>> numpy.logical_and(series, y)
0    True
1    True
2    True
>>> numpy.logical_and(series, x)
Traceback (most recent call last):
  File "<ipython-input-10-e2050a2015bf>", line 1, in <module>
    numpy.logical_and(series, x)
AttributeError: logical_and 
```

`numpy.logical()`在这里抱怨什么？我看不出这两个系列之间的区别，`x`并且`y`. 但是，必须有一些细微的差别。

Pandas 文档说 Series 对象是“大多数 NumPy 函数”的有效参数。显然，在这种情况下，这在某种程度上是正确的。显然，创建机制使`x`这个特定的 numpy 函数无法使用。

作为旁注，这两种创建机制中的哪一种`reindex_like()`以及该`index`论点对于这种情况更有效和惯用？也许还有另一种/更好的方法我也没有考虑过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T21:29:18.850

看起来这不是一个错误，细微的差别是由于`reindex_like()`方法的使用造成的。调用`reindex_like()`将一些 NaN 数据插入到系列中，因此该`dtype`系列的 更改`bool`为`object`。

```
>>> series = pandas.Series([1, 2, 3])
>>> x = pandas.Series([True])
>>> x.dtype
dtype('bool')
>>> x = pandas.Series([True]).reindex_like(series)
>>> x.dtype
dtype('object') 
```

我在 Pandas github 页面上发布了关于此异常的[问题。](https://github.com/pydata/pandas/issues/2388)

完整的解释/讨论在[这里](https://github.com/pydata/pandas/issues/2388#issuecomment-10858926)。看起来这种行为可能会在未来发生变化，因此请关注该[问题](https://github.com/pydata/pandas/issues/2388)以了解更多正在进行的细节。

# sql - MERGE 似乎在匹配的行上返回约束冲突而不是忽略

> ID：13628862
> 
> 赞同：0
> 
> 时间：2012-11-29T15:15:20.293
> 
> 标签：sql, oracle11g

**已解决：USING 中的 SELECT 确实生成了重复的 s_main_obj_id。我认为它们必须是独一无二的（uuid，但是通过愚蠢的调整生成），但是当你消除了不可能的...... ;-)**

使用 Oracle 11g（不是 R2），我想将源表 s 中的一些值合并到目标表 t 中。s 和 t 的 PK 都是字段 obj_id。

我用：

```
MERGE 
    INTO target_table t
    USING (SELECT  ... AS s_main_obj_id, ... AS s_p1, 
           ... AS s_p2, ... AS s_typ FROM source_table) s 

ON (t.p1 = s.s_p1 
    AND t.p2 = s.s_p2 
    AND t.typ = s.s_typ)

WHEN NOT MATCHED 
THEN 
   INSERT (obj_id, 
           p1, 
           p2, 
           typ) 
   VALUES (s_main_obj_id, 
           s_p1, 
           s_p2, 
           s_typ) 
```

我得到：

> 1.  00000 - “违反了唯一约束 (%s.%s)”
> 
> *原因：UPDATE 或 INSERT 语句试图插入重复键。

约束的 ID 指向目标表的 obj_id。

USING中SELECT中生成的**s_main_obj_id**绝对是唯一的；我尝试使用 SELECT 并将结果与​​ PK obj_id 上的目标表连接：

```
SELECT * FROM (
    SELECT  ... AS s_main_obj_id, ... AS s_p1, 
            ... AS s_p2, ... AS s_typ FROM source_table) s
JOIN target_table t 
ON (t.obj_id = s.s_main_obj_id) 
```

这给了我 0 个结果。

如果没有结果，MERGE 如何尝试插入重复键？

编辑：在目标表上，我有以下约束： ![在此处输入图像描述](../Images/687616bcc0af61d04cf31159e5ef4287.png)

（错误提到了 SYS_C00138978 约束）

以及以下索引：

![在此处输入图像描述](../Images/df08d48f531f5b4439f913bfb5f54807.png)

这是创建表语句：

```
CREATE TABLE TARGET_TABLE_NAME
(
  OBJ_ID VARCHAR2(40 CHAR) NOT NULL 
, TYP VARCHAR2(1 CHAR) 
, P1 VARCHAR2(40 CHAR) 
, P2 VARCHAR2(40 CHAR) 
, CONSTRAINT SYS_C00138978 PRIMARY KEY 
  (
    OBJ_ID 
  )
  ENABLE 
) 
LOGGING 
TABLESPACE "USERS" 
PCTFREE 10 
INITRANS 1 
STORAGE 
( 
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1 
  MAXEXTENTS 2147483645 
  BUFFER_POOL DEFAULT 
);

CREATE UNIQUE INDEX TARGET_TABLE_NAME_OBJ_ID ON TARGET_TABLE_NAME (OBJ_ID ASC) 
LOGGING 
TABLESPACE "USERS" 
PCTFREE 10 
INITRANS 2 
STORAGE 
( 
  INITIAL 65536 
  NEXT 1048576 
  MINEXTENTS 1 
  MAXEXTENTS 2147483645 
  BUFFER_POOL DEFAULT 
); 
```

# javascript - Javascript替换，带逗号的字符串

> ID：13628863
> 
> 赞同：1
> 
> 时间：2012-11-29T15:15:20.187
> 
> 标签：javascript, replace

我有一个字符串，其中包含`],[`要替换的多次出现的字符串`]@[`

无论我尝试什么，我都无法做到正确。

```
 var find = '],[';
    var regex = new RegExp(find, "g");
    mytext.replace(regex, ']@[') 
```

不工作

```
 mytext = mytext.replace(/],[/g,']@['); 
```

不工作

知道我哪里出错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:19:50.317

答案是 [ 和 ] 是正则表达式上下文中的特殊字符，因此需要通过 \ 即匹配 ] 进行转义，当您使用方便的 Javascript 简写正则表达式时，您可以在其中找到下面的代码：

```
var regex= /\],\[/g
var result = mytext.replace(regex, ']@[') 
```

请查看以下 jsFiddle：http: [//jsfiddle.net/JspRR/4/](http://jsfiddle.net/JspRR/4/)

如您所见，重要的一点是在构造正则表达式时转义 ] 和 [。

现在，如果您不想使用 Javascript 正则表达式速记，您仍然需要进行相同的转义。但是，在这种情况下， \ 字符将需要自行转义（ ... 自行转义！）

```
var regex = new RegExp("\\],\\[", "g");
var result = mytext.replace(regex, ']@[') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:16:59.870

你的例子不起作用的原因是因为方括号通常代表一个字符类，因此你需要像这样转义它们

```
var find = '\\],\\[';
var regex = new RegExp(find, "g");
mytext.replace(regex, ']@[') 
```

您还可以使用正则表达式文字

```
mytext.replace(/\],\[/g, "]@["); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T15:17:00.557

方括号是正则表达式中的特殊字符：它们用于定义字符集。

如果要匹配正则表达式中的方括号，则必须使用反斜杠对其进行转义。

```
"[1],[2],[3]".replace(/\],\[/g, "]@["); 
```

或者，如果您使用内置构造函数：

```
"[1],[2],[3]".replace(new RegExp("\\],\\[", "g"), "]@["); 
```

在这两种情况下，我们都必须使用该`g`标志，以便正则表达式可以匹配所有出现的搜索字符串。

```
var str = "[1],[2],[3]";

console.log(str.replace(/\],\[/g, "]@["));
console.log(str.replace(new RegExp("\\],\\[", "g"), "]@["));
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T15:20:07.213

试试这个：-

```
 mytext.replace(/\],\[/g, ']@[') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T15:16:53.567

```
var str = "[1],[2],[3]";

var replaced = str.replace('],[', ']@['); 
```

# php - PHP解析YAML，存入DB方便修改值，之后返回原结构

> ID：13628864
> 
> 赞同：2
> 
> 时间：2012-11-29T15:15:22.303
> 
> 标签：php, mysql, parsing, multidimensional-array, yaml

我需要能够在 MySQL 数据库中存储、修改和检索 YAML 数据*内容。*

**我的项目（和问题）旨在：**

*   将 .yml 文件解析为 PHP 多维数组
*   将这些存储到 MySQL 数据库中
*   允许修改数据库*主要目标中的单个值*
*   从数据库中检索值，解析并放回 .yml 文件

**第 1 步 - 示例 YAML 文件**

```
string 'name:
  singular: null
  plural: null
fields:
  price:
    label: Preis
  company_id:
     label: null
     placeholder: null' 
```

这里要注意的重要事项是*嵌套键的数量可能不限*，*键和值也可能具有相同的名称/数据*。

**第 2 步 - 将其放入 PHP 数组**

我正在使用[一个名为 Spyc 的库](http://code.google.com/p/spyc/)来解析 YAML。这很好用！它给了我以下信息：

```
array
  'name' => 
    array
      'singular' => null
      'plural' => null
  'fields' => 
    array
      'price' => 
        array
          'label' => string 'Preis' (length=5)
      'company_id' => 
        array
          'label' => null
          'placeholder' => null 
```

我接下来的目标是将这些中的每一个存储在 MySQL 数据库中。所以...

**第 3 步 - 将它们保存为 CSV**

这里我写了自己的函数，基本上就是一个长长的`foreach()`s列表，把这些细节分隔成下面的数组：

```
array
   0 => string 'name||singular||' (length=16)
   1 => string 'name||plural||' (length=14)
   2 => string 'fields||price||label||Preis' (length=27)
   3 => string 'fields||company_id||label||' (length=27)
   4 => string 'fields||company_id||placeholder||' (length=33) 
```

**第 4 步 - MySQL 数据库**

从逻辑上讲，我试图将这些字符串存储在数据库中。我不确定架构。我猜 value 将`end($array[$key]`在**value**列中，而**key**列将包含数组中的其余元素。

这将有效地允许我在将它们拉出、解析并返回到 .yml 文件之前更改数据库中的值。

**第 5 步 - 我迷路了！**

所以我不确定现在该怎么做。目前我正在尝试使用以下逻辑解析这些字符串：

*   最后一个值`end($array[$key]`是值，数组中所有前面的元素都是父键
*   一旦我让该代码工作，有效地将这些字符串转换回数组将是下一个优先事项

必须有更好的方法来做到这一点。我的主要目标是能够更新数据库中的各个值。我的主要问题是数组维度计数不是恒定的。

**如何帮助我**

请给我：

*   实现我的项目目标的更合适的方法（见顶部）如果有的话
*   将此数据存储在数据库中的最佳方法是允许轻松修改值（例如`null`您在步骤 1 中看到的 s）
*   从数据库返回这些数据后，一个 PHP 函数将这些键和值返回到原始数组**的确切结构**（步骤 2），以便我可以使用 Spyc 将其转换回 YAML 并输出到 .yml 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:27:43.920

如果你想创建一个可以序列化为 YAML 的键值存储，你应该只创建它：

```
CREATE TABLE key_values(
  id INT PRIMARY KEY AUTO_INCREMENT,
  parent_id INT,
  type VARCHAR(255),
  key VARCHAR(255),
  value VARCHAR(255)
) 
```

在这种情况下，`id`是指如何引用根记录，`parent_id`是一种用于链接子记录的机制，`type`用于区分数组映射和索引数组。`key`并`value`用于存储各自的值。

有了这个，您应该能够创建适当的记录。

您的数据中的一个示例可能是创建根节点：

```
INSERT INTO key_values VALUES (parent_id, type, key, value)
  VALUES (NULL, 'map', NULL NULL) 
```

然后添加键的值，`name`假设`id`前一个为 1 `INSERT`：

```
INSERT INTO key_values VALUES (parent_id, type, key, value)
  VALUES (1, 'map', 'name' NULL) 
```

该过程对每个值递归地重复：

```
INSERT INTO key_values VALUES (parent_id, type, key, value)
  VALUES (2, 'string', 'singular' NULL),
         (2, 'string', 'plural' NULL) 
```

在任何情况下，您都需要为所有这些编写一个包装类，否则使用起来会太复杂。

在实践中，我不确定经历所有这些麻烦是否会比简单地将 YAML 按原样存储在一个`LONGTEXT`字段中并称之为一天要容易得多。操纵和重新储蓄通常不会那么昂贵。迭代多层树结构是。

`revision`但是，对于纯 YAML 方法，您必须小心避免在竞争条件下踩踏写入，但这并不是使用跟踪您保存的版本的列无法解决的问题。构造你的`UPDATE`，使其不匹配：

```
UPDATE yamls SET value='...', revision=93 WHERE id=20 AND revision=92 
```

如果其他进程已经对其进行了更新，您将看到查询无法运行并且可以相应地处理它。

# php - jigoshop 店铺每页商品数量

> ID：13628865
> 
> 赞同：0
> 
> 时间：2012-11-29T15:15:22.883
> 
> 标签：php, wordpress, e-commerce, jigoshop

我正在使用[jigoshop 进行 wordpress 电子商务](http://jigoshop.com/)。我遇到了一个问题，我的[商店页面每页](http://www.1kviews.com/shop/)只能看到 5 个产品。我不知道出了什么问题。这是我的商店页面的屏幕截图：

![www.1kviews.com 店铺](../Images/5fb511221acd56207eaf984af049a0bd.png)

在这里，您可以`Next`在 5 个产品之后看到页面底部的分页内容。其中，我在以下配置中有此配置`jigoshop admin`：

![www.1kviews.com 管理员](../Images/1789c539a5fc77806c6070cd89c5c6a4.png)

这里它说每列 5 页（有效），但是每页 30 个产品，这是无效的。这个问题有什么解决办法吗？我需要为此编辑任何代码页吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:43:29.297

我自己解决了这个问题。

```
<?php
global $columns, $per_page;

do_action('jigoshop_before_shop_loop');

$loop = 0;

if (!isset($columns) || !$columns) $columns = apply_filters('loop_shop_columns', 4);
//if (!isset($per_page) || !$per_page) $per_page = apply_filters('loop_shop_per_page', get_option('posts_per_page'));
//if ($per_page > get_option('posts_per_page')) query_posts( array_merge( $wp_query->query, array( 'posts_per_page' => $per_page ) ) ); 
```

这是我之前在`templates/loop-shop.php`. 我删除了两个内联注释`//`并使其工作。代码的最终外观：

```
<?php
global $columns, $per_page;

do_action('jigoshop_before_shop_loop');

$loop = 0;

if (!isset($columns) || !$columns) $columns = apply_filters('loop_shop_columns', 4);
if (!isset($per_page) || !$per_page) $per_page = apply_filters('loop_shop_per_page', get_option('posts_per_page'));
if ($per_page > get_option('posts_per_page')) query_posts( array_merge( $wp_query->query, array( 'posts_per_page' => $per_page ) ) ); 
```

干杯!

# android - 如何在屏幕底部粘贴视图以使上述部分可移动？

> ID：13628866
> 
> 赞同：2
> 
> 时间：2012-11-29T15:15:25.870
> 
> 标签：android, android-layout

My`layout`由一个`ScrollView`包含所有内容的 a 组成。在某些时候，我需要在**ScrollView 顶部（上方）**`View`的屏幕底部显示 a （所以在 ScrollView的后面），这样我就可以上下滚动屏幕，同时它仍然会粘在设备的屏幕底部。请教大家如何做这样的. 谢谢你。**`ScrollView``View``View``layout`**

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T15:24:06.603

如果您希望滚动视图位于视图后面，可以这样做：

（[此](https://stackoverflow.com/questions/7442911/relativelayout-issue-image-overlaps-scrollview)问题的部分代码副本）

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:id="@+id/RelativeLayout1">

        <ScrollView android:id="@+id/scrollView"  
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">
        </ScrollView>

        <View android:id="@+id/bottomView" 
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" 
            android:layout_alignParentBottom="true"
            android:visibility="gone">>
        </View>
</RelativeLayout> 
```

滚动视图现在将扩展到 View 元素之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:23:58.587

您可以创建两个片段并使用权重属性来分配空间。顶部的片段将承载您的根滚动视图，底部的片段将具有视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:43:39.447

好的两个选项，第一个：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<View
    android:id="@+id/myView"
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:layout_alignParentBottom="true" />

<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/myView" />

</RelativeLayout> 
```

这样，您`ScrollView`将永远高于您的`View`. 但似乎您希望 ScrollView 填满整个屏幕，而 View “隐藏” `SV`. 所以检查这段代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

 <ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>

 <View
    android:id="@+id/myView"
    android:layout_width="fill_parent"
    android:layout_height="1dp"
    android:layout_alignParentBottom="true" />

</RelativeLayout> 
```**

# java - String.getBytes("UTF-32") 在 JVM 和 Dalvik VM 上返回不同的结果

> ID：13628868
> 
> 赞同：2
> 
> 时间：2012-11-29T15:15:32.807
> 
> 标签：java, android, string, jvm, dalvik

我有一个 48 个字符的`AES-192`加密密钥，我用它来解密一个加密的数据库。

但是，它告诉我密钥长度无效，所以我记录了 getBytes() 的结果。

当我执行时：

```
final String string = "346a23652a46392b4d73257c67317e352e3372482177652c";
final byte[] utf32Bytes = string.getBytes("UTF-32");
System.out.println(utf32Bytes.length); 
```

在我的 mac（Java 虚拟机）上使用 BlueJ，我得到`192`了输出。

但是，当我使用：

```
Log.d(C.TAG, "Key Length: " + String.valueOf("346a23652a46392b4d73257c67317e352e3372482177652c".getBytes("UTF-32").length)); 
```

我得到`196`作为输出。

有谁知道为什么会发生这种情况，以及 Dalvik 从哪里获得额外的 4 个字节？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-29T15:19:02.050

您应该在两台机器上指定字节顺序

```
final byte[] utf32Bytes = string.getBytes("UTF-32BE"); 
```

注意`"UTF-32BE"`是不同的编码，不是特殊`.getBytes`参数。它具有固定的字节顺序，不需要 BOM。更多信息：[http ://www.unicode.org/faq/utf_bom.html#gen6](http://www.unicode.org/faq/utf_bom.html#gen6)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T15:24:14.343

你为什么要 UTF-32 编码一个十六进制数字。这比它需要的大 8 倍。:P

```
String s = "346a23652a46392b4d73257c67317e352e3372482177652c";
byte[] bytes = new BigInteger(s, 16).toByteArray();
String s2 = new BigInteger(1, bytes).toString(16);
System.out.println("Strings match is "+s.equals(s2)+" length "+bytes.length); 
```

印刷

```
Strings match is true length 24 
```

# web-services - ServiceMix 4 与外部 WebService 通信

> ID：13628869
> 
> 赞同：1
> 
> 时间：2012-11-29T15:15:48.203
> 
> 标签：web-services, esb, apache-servicemix

目前，我有一个接受 HTTP Post 请求的 WebService，其中包含 WAV 文件的字节数组。这完全正常。然后它返回 WAV 文件元数据的 XML 结果。我通过发送 curl 命令并查看返回的输出来测试这一点。在我看来，我的问题是一个非常基本的 ServiceMix 问题。这只是我坚持的一部分。我如何将此 curl 命令发送到 ServiceMix，并将其转发到外部 WebService？将来，我将拥有大量的 WebService，它们以不同的 XML 格式提供有关 WAV 文件的不同类型的数据，并且我希望 ServiceMix 能够相应地处理路由和解析结果。在开始之前，我需要弄清楚到底是如何通过 ServiceMix 发送单个请求并发送到 WebService。它是位于 ServiceMix 部署中的 WAR 文件吗？一个 OSGi 包？blueprint.xml 文件？我真的不知道，所以任何能引导我朝着正确方向前进的帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-14T23:29:59.797

看看骆驼文档[如何使用骆驼作为客户端和服务器之间的 http 代理](http://camel.apache.org/how-to-use-camel-as-a-http-proxy-between-a-client-and-server.html)。您可以构建骆驼路线并在 servicemix 中部署捆绑包以代理您的网络服务

# jquery - 手动单击选择框时，Jquery 不会在 chrome 中触发 on("keydown")

> ID：13628873
> 
> 赞同：2
> 
> 时间：2012-11-29T15:16:08.143
> 
> 标签：jquery, google-chrome

我正在使用`on("keydown"`选择框来触发最终很长的选择框的搜索字段。

**jsbin 说明：** 请*单击*选择框，然后按一个键 - chrome 23.0.1271.64 m 的控制台中没有显示消息

但它会在 Firefox 等中触发

它在 chrome 中也能正常工作，但仅在使用选项卡聚焦选择时

在[这个 jsbin中亲自查看](http://jsbin.com/idatoc/2/edit)

代码是这样的：

```
 <body>

  <select>
    <option name="aaaa">xaxaxa</option>
    <option name="22">222xaxaxa</option>
    <option name="333">33xaxaxa</option>
  </select>

  <script>

    $("select").on("keydown", function(){
      console.error("keydoooooown");
    });
  </script>
</body> 
```

如何在不更改 html 标记的情况下在 chrome 中获得相同的行为？例如，仅通过更改 javascript 部分。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-29T15:26:43.563

如果我看到您的 html，您可能想将其用作动作控制器，您可以或使用该`.bind`函数将事件附加到 dom 或 jquery 只需使用`.keyup`

所以执行一个动作看起来像这样：

```
$(document).keyup(function(e) 
{
        // ESC
        if (e.keyCode == 27)
        {
            $('#closeInteriorDetails').click();
        }

        // Right arrow
        if(e.keyCode == 39)
        {
            $('#nextSlide').click();
        }

        // Left arrow
        if(e.keyCode == 37)
        {
            $('#prevSlide').click();
        }
} 
```

# c++ - 单身替代品

> ID：13628889
> 
> 赞同：5
> 
> 时间：2012-11-29T15:17:12.417
> 
> 标签：c++, oop, design-patterns

我有一个非常简单的游戏引擎。它使用了几个单例（我将列举其中的一些）。

```
Resource Manager
Render Engine
Events Manager
Factory
etc 
```

这些单例有很多从一个到另一个的调用。我将采用事件管理器示例用法：

1.  任何从 Listener 派生的对象都可以像这样添加 itsel 作为某些事件的侦听器`EventsManager->RegisterListener(this, &SomeClass::SomeMethod);`（事件类型由 SomeMethod 参数推断）
2.  任何其他对象都可以触发这样的事件`EventsManager->PushEvent(SomeEvent);`

经过一些同步后，事件到达所有侦听器。这是单例时 EventsManager 的一个非常简单的用法。

其他单身人士也有类似的行为。我想删除单例，但我的主要问题是我想从“用户的角度”保持代码简单易用，就像现在一样。我阅读了一些这样做的技术，但大多数使类的初始化/使用更加复杂。我知道这个话题在 SO 上被讨论过很多次，但没有一个答案适合我的编程理念——让一切尽可能简单。

我不想为我的类进行复杂的定义/初始化，例如：

```
SomeClass<EventManager, RenderEngine,...> 
```

或者

```
SomeClass::SomeClass(EventsManager, RenderEngine...) 
```

你能给我一些关于这个话题的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:37:21.977

您可以拥有一个全局“游戏”对象，该对象创建当前为单例的每个类的实例

对于您的 EventManager 的具体示例；您的 Listener 基类可以提供派生类可以调用的注册方法和推送方法的实现。

骨架定义：

```
class Listener
{
public:
    virtual void ReceiveMessage( ... ) = 0;

protected:
    void Register()
    {
        GetEventManagerSomehow()->RegisterListener( this, etc );
    }

    void PushEvent( etc )
    {
        GetEventManagerSomehow()->PushEvent( etc );
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:42:49.113

要解决在单例中检测资源泄漏的具体问题，请为每个单例类提供一个销毁实例的关闭方法。

```
class Singleton
{
    // ...
    static Singleton * GetInstance()
    {
        if (instance == NULL)
            instance = new Singleton;
        return instance;
    }
    static void Shutdown()
    {
        delete instance;
        instance = NULL;
    }
    static Singleton * instance;
};

Singleton * Singleton::instance = NULL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:53:51.590

不是真正的答案，但评论可能太长了。

[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)是单例的一个很好的替代方案：您在程序的主函数中创建实例并将它们传递给“模块”（它们是主类），因此它们可以在本地使用它们。这意味着对于这些类，您将拥有您不想要的“复杂”构造函数。
但是，复杂性应该仅限于某些类，并且在我看来，传递一些依赖的“模块”并不那么复杂。作为奖励，您可以通过查看构造函数或主函数来找出模块之间的依赖关系。

依赖注入被大量使用，因为它确实解决了您所看到的问题（以及更多，如单元测试），而增加的复杂性非常有限。

# php - 在php中检查密码字符长度

> ID：13628890
> 
> 赞同：-5
> 
> 时间：2012-11-29T15:17:14.560
> 
> 标签：php

我正在尝试检查用户在注册表单中输入的密码长度。但我得到了一个意外的输出。这是我的脚本。

```
 <?php
 if($_SERVER['REQUEST_METHOD'] == 'POST') 
  {

  if(strlen(trim($password)) > 8)
   {
   echo"Password must be 8characters";
   }
   }
 ?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-29T15:19:44.913

您的代码失败，因为该变量`$password`从未被分配任何值。然后，您将检查密码是否**超过**8 个字符——您使用的是大于号而不是小于号。由于变量`$password`为空，因此长度大于 8 的检查始终为假。

尝试这个：

```
if(!array_key_exists('password', $_POST))
    die('no password specified');

$password = trim($_POST['password']); // <--- this is not a good idea!
if(strlen($password) < 8)
    die('Password must be at least 8 characters'); 
```

回顾一下，意外的输出是由两个因素造成的：

*   错误的比较运算符
*   空变量

`die`您当然应该在生产代码中做一些比 , 更用户友好的事情。

**文档**

*   `$_POST`- [http://php.net/manual/en/reserved.variables.post.php](http://php.net/manual/en/reserved.variables.post.php)
*   `strlen`- [http://php.net/manual/en/function.strlen.php](http://php.net/manual/en/function.strlen.php)
*   `array_key_exists`- [http://php.net/manual/en/function.array-key-exists.php](http://php.net/manual/en/function.array-key-exists.php)
*   比较运算符 - [http://php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)
*   变量 - [http://www.php.net/manual/en/language.variables.basics.php](http://www.php.net/manual/en/language.variables.basics.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T15:19:59.907

也许您应该使用`$_POST['password']`，使用自动全局变量是错误的（希望在许多主机上禁用）。

同样将密码限制为 8 个字符似乎是个坏主意，无论如何您都应该对其进行散列，然后长度无关紧要。

# c++ - 隐式转换运算符

> ID：13628893
> 
> 赞同：1
> 
> 时间：2012-11-29T15:17:25.807
> 
> 标签：c++, gcc, c++11, variadic-templates, explicit-conversion

我想使用C++11 的**可变参数模板功能打印函数的所有参数。**我做了以下事情：

```
struct concatenate
{

    template< typename ...ARGS >
    explicit
    concatenate(ARGS const & ...args)
    {
        cat(args...);
    }

    /*explicit*/
    operator std::string const () const
    {
        return oss.str();
    }

private :

    std::ostringstream oss;

    void cat() const
    { ; }

    template< typename T, typename ...ARGS >
    void cat(T const & head, ARGS const & ...tail)
    {
        if (oss.tellp() > 0) {
            oss << ' ';
        }
        oss << head;
        cat(tail...);
    }

}; 
```

然后我尝试测试它：

`std::cout << '\'' << concatenate(1, 2, 3, 4, std::string("ololo"), "alala", 'o', 1.2, 1.2L, 1.2f) << '\'' << std::endl;`

但随后给出的代码没有编译错误：

`error: cannot bind 'std::basic_ostream<char>' lvalue to 'std::basic_ostream<char>&&' c:\mingw\lib\gcc\mingw32\4.7.0\include\c++\ostream:600: error: initializing argument 1 of 'std::basic_ostream<_CharT, _Traits>& std::operator<<(std::basic_ostream<_CharT, _Traits>&&, const _Tp&) [with _CharT = char; _Traits = std::char_traits<char>; _Tp = concatenate]'`

错误的性质是什么？毕竟，编译器别无选择，只能使用转换运算符。不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T16:06:38.683

类**模板**std::basic_string 的运算符 << 被定义为（免费）函数**模板**。与非模板函数相比，模板参数推导不涉及可能的参数转换。basic_string 的模板化运算符 << 需要一个字符串，因为它是正确的参数，并且隐式转换（从连接到字符串）不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:53:28.860

因为您没有使用显式转换运算符，并且您没有`operator<<`为您的类重载它尝试调用：

```
template <class charT, class traits, class T>
basic_ostream<charT, traits>&
operator<<(basic_ostream<charT, traits>&& os, const T& x); 
```

使用显式转换

```
std::string(concatenate(1, 2, 3, 4, std::string("ololo"), "alala", 'o', 1.2, 1.2L, 1.2f)) 
```

做正确的事。

# http - HTTP：哪个更好：大超时或多次重试？

> ID：13628895
> 
> 赞同：4
> 
> 时间：2012-11-29T15:17:28.580
> 
> 标签：http, timeout

我正在从移动设备执行 HTTP GET 请求（因此网络连接通常不可靠）并且想知道什么是更好的方法：

*   尝试 1 个请求，超时 60 秒或
*   尝试 3 个请求，每个请求超时 20 秒

或任何其他重试/超时组合。我不知道 HTTP/TCP 连接是否真的可以停止，所以重试会是一件好事。我不会传输大量数据 (< 1 kB)，并且想知道通常哪种方法可以加快响应时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:31:44.610

只要是幂等操作，理论上多重试应该没问题。（老实说，GET 根本不应该有任何副作用。）它可能仍然会给服务器带来不必要的负载，并且对请求的多次重传的延迟响应可能会使下行链路饱和并使情况变得更糟。

在交互式应用程序中，我发现一个诚实的“它花费比正常时间更长”的通知，最好是用户可触发的“重试”：用户可以选择在退出导致网络短路的隧道或建筑物后按下“重试”按钮停电。

相反，在吞吐量持续较低的树林中，他们将学会忽略通知并耐心等待。

# delphi - Delphi TBitBtn 白层

> ID：13628897
> 
> 赞同：1
> 
> 时间：2012-11-29T15:17:33.387
> 
> 标签：delphi

当使用 TBitBtn 的 Glyph 属性时，如何摆脱 Delphi/Windows 在位图图像下绘制的白色图层。我只想绘制图像，它下面没有阴影，没有其他自动出现的图层。我正在插入圆形 24 位图图像。

![http://www.flickr.com/photos/90617947@N04/8230222478/in/photostream](../Images/24cde7ef368993e96953f8f15cb65011.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-29T16:25:59.453

由于你有一个 24 位的位图，没有 alpha 透明度，所以 Delphi 使用图像的左下角像素来确定透明颜色。具有该颜色的所有像素都被视为透明。带有阴影效果的图像部分与指定的透明颜色不完全匹配，因此这些像素被正常绘制，就像图像的其余部分一样。

阴影显示为白色，因为当您的设计师应用阴影效果时图形程序中有白色背景。

编辑图像以移除阴影，或使用具有 Alpha 透明度的 32 位图像。事后您将很难应用 Alpha 透明度。修复源图像。

# php - 如何将html表单数据存储在cookie中，以便在提交表单后它仍然存在

> ID：13628901
> 
> 赞同：2
> 
> 时间：2012-11-29T15:17:38.383
> 
> 标签：php, html, session-cookies

我制作了这个 html 表单，它将所有信息提交到 MySQL 数据库。很简单的东西。

如何将用户名存储在 cookie 中，以便一旦输入？我想确保一旦用户输入他们的用户名一次，它就会在将来预先填充用户名字段。

```
<!-- Message board submissionform -->

<form id="frmMB" name="frmMB" action="insert.php" method="post" enctype="multipart/form-data">

<label class="name"><input name="name" placeholder="Enter your name" type="text" id="name" onFocus="if(this.value=='Enter your name'){this.value=''};" onBlur="if   (this.value==''){this.value='Enter your name'};" value="Enter your name" size="80" maxlength="10" ></label>
<br />
<label class="message">
  <input name="post" placeholder="Enter a message" type="text" id="post" onFocus="if(this.value==this.defaultValue)this.value='';" onBlur="if(this.value=='')this.value=this.defaultValue;" value="Enter a message" size="80" maxlength="140" data-maxsize="3">
</label>
<br />
<label>
<input name="Submit" class="large button" type="submit" value="submit">
</label> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:21:44.653

我认为这样的事情就可以做到这一点。

```
setcookie($_POST['name'], $value, time()+3600);

if(isset($_COOKIE['name']) && !empty($_COOKIE['name']))
{
    // do some stuff here because the name is set in the cookie.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:23:19.410

首先你需要开始一个会话-> [session_start()](http://php.net/manual/en/function.session-start.php)

完成此操作后，您就创建了一个公共`$_SESSION`数组并可以向其中添加元素。最简单的方法是：

```
<?php

if(isset($_POST['username'])){
    sesion_start();

    $_SESSION['username'] = $_POST['username'];

}
... 
```

干杯!

# asp.net - 如何在 Asp.Net 中使用 Google Drive SDK 检索文档

> ID：13628906
> 
> 赞同：1
> 
> 时间：2012-11-29T15:18:02.490
> 
> 标签：asp.net, google-drive-api

我正在开发一个使用 ASP.NET 检索 Google Drive 文档列表的项目，但出现错误：

> 发生错误：已超出 Google.Apis.Requests.RequestError 未经身份验证使用的每日限制。继续使用需要注册。[403]

这是我的网站（在此链接上出现错误）： http: [//www.netdesklive.com/](http://www.netdesklive.com/)

我正在为此尝试 DrEdit 代码，但无法正常工作。

我根据[https://developers.google.com/drive/examples/dotnet](https://developers.google.com/drive/examples/dotnet)设置了所有凭据，但仍然出现错误

所以请给我建议

代码 ：

-> 我在状态和代码中得到空值

```
public ActionResult Index(string state, string code)
{
    try
    {
        IAuthenticator authenticator = Utils.GetCredentials(code, state);
        // Store the authenticator and the authorized service in session
        Session["authenticator"] = authenticator;
        Session["service"] = Utils.BuildService(authenticator);
    }
    catch (CodeExchangeException)
    {
        if (Session["service"] == null || Session["authenticator"] == null)
        {
            Response.Redirect(Utils.GetAuthorizationUrl("", state));
        }
    }
    catch (NoRefreshTokenException e)
    {
        Response.Redirect(e.AuthorizationUrl);
    }

    DriveState driveState = new DriveState();

    if (!string.IsNullOrEmpty(state))
    {
        JavaScriptSerializer jsonSerializer = new JavaScriptSerializer();
        driveState = jsonSerializer.Deserialize<DriveState>(state);
    }

    if (driveState.action == "open")
    {
        return OpenWith(driveState);
    }
    else
    {
        return CreateNew(driveState);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T09:21:23.197

您的错误消息表明您的请求未经授权。您应该使用 Oauth2 授权他们：

*   [授权云端硬盘请求](https://developers.google.com/drive/credentials)
*   [谷歌 Oauth2 文档](https://developers.google.com/accounts/docs/OAuth2)

# javascript - 如何使用 jQuery 系统地更改 Twitter.com 上所有头像图像的 src 属性？

> ID：13628907
> 
> 赞同：1
> 
> 时间：2012-11-29T15:18:20.147
> 
> 标签：javascript, jquery, html, image

**TL;DR：**对于 Twitter.com 上的所有“img.avatar”，我想在 src 属性中将“_normal.png”替换为“.png”。请参阅下面的代码和错误。

**背景：**我正在学习 JavaScript 和 jQuery。所以，我喜欢编写小脚本来将事情自动化作为练习。

**问题：**所以，我有一台 Retina MacBook Pro，而 twitter.com 上的 48px 头像看起来很糟糕（我知道，#firstworldproblem，但请耐心等待）。我注意到小48px头像和大头像的区别在于前者以“_normal.png”结尾，而后者只是以“.png”结尾。例子：

```
48px thumbnail: 
https://blablabla.com/7f11851408ac5220e361a22f1583e0db_normal.png 

Large version: 
https://blablabla.com/7f11851408ac5220e361a22f1583e0db.png 
```

话虽如此，我想应用我的jQuery知识，系统地删除每个头像图像的src属性末尾的“_normal”，可以用“头像”类来识别。重点是什么？只是这样它就可以了这是我尝试过的：

```
jQuery("img.avatar").each( function(){
    $(this).attr("src", $(this).attr("src").replace("_normal.png", ".png"))
}); 
```

这是我在控制台中遇到的错误：

```
TypeError: Cannot call method 'replace' of undefined 
```

我究竟做错了什么？`$(this).attr("src")`根据我对错误的理解，为什么未定义？

PS 我对 Stack Exchange 比较陌生，所以如果我违反任何约定，请提醒我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:45:18.727

存在一些`img`没有`src`属性的元素。这将是导致问题的原因。尝试在更改属性之前添加条件，如下所示：

```
jQuery("img.avatar").each( function(){
    if($(this).attr('src'))
        $(this).attr("src", $(this).attr("src").replace("_normal.png", ".png"))
}); 
```

# php - 使用 Javascript 访问 JSON 对象

> ID：13628911
> 
> 赞同：0
> 
> 时间：2012-11-29T15:18:35.557
> 
> 标签：php, javascript, json

我有以下 JSON 对象

```
({
    "codes": [ {
            "code": {
                "redeemed": "true", "retailer": "R1", "code": "ab11845b55b3ef1c3f137a35dbdfb270"
            }
        }, {
            "code": {
                "redeemed": "false", "code": "48c02f7bd35271de0aa215209b0a390f", "message": "code already used"
            }
        } ]
});

for (var code in data.codes) {
    console.log(code) // prints 0
    console.log(code[0].id) // prints 0
} 
```

如何分别访问内部对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:26:11.043

要输出每个单独的`"code"`对象：

```
// First, assign your data to a variable:
var data = ({
    "codes": [ {
        "code": {
            "redeemed": "true", "retailer": "R1", "code": "ab11845b55b3ef1c3f137a35dbdfb270"
        }
    }, {
        "code": {
            "redeemed": "false", "code": "48c02f7bd35271de0aa215209b0a390f", "message": "code already used"
        }
    } ]
});

// (I use the "c" temprary variable here because it's shorter)
var c = data.codes;
// Loop through all the codes.
for (var i = 0; i < c.length; i++) {
    // Log the specific code at [i].
    console.log(c[i].code);  // Output a "code" object.
} 
```

然后你可以使用：

```
c[i].code.redeemed;
c[i].code.retailer;
c[i].code.code;
c[i].code.message; 
```

`undefined`但是，当它们未设置为特定`"code"`对象的属性时，它们将返回。

**[工作示例](http://fiddle.jshell.net/DFkJr/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:26:27.977

假设您添加了什么：

```
window.json_obj = ({"codes":[{"code":{"redeemed":"true","retailer":"R1","code":"ab11845b55b3ef1c3f137a35dbdfb270"}},{"code":{"redeemed":"false","code":"48c02f7bd35271de0aa215209b0a390f","message":"code already used"}}]});

console.log(json_obj.codes[0]['code']['code']);

// or
// console.log(json_obj.codes[0].code.code); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:26:35.930

**[jsFiddle 演示](http://jsfiddle.net/ywaFz/)**

```
console.log( obj.codes[0].code.retailer );
console.log( obj.codes[1].code.message ); 
```

输出

> R1
> 代码已使用

所有对象都没有`id`属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T15:34:06.690

第一的：

如果您没有理由这样做，您的 JSON 不应该在括号中：

```
(<JSON>); 
```

如果这就是你所做的一切，它不会让你访问它。
您需要将其分配给变量...

```
var data = { codes : [ { code : "...", ...}, ... ] }; 
```

一旦你这样做，你就可以访问：

```
data.codes[i].code.code;
data.codes[i].code.redeemed; 
```

PS：如果它不是一个完整的字符串

```
'{ "codes":[{"code":"...",...},...]}' 
```

那么它不是 JSON 对象，而是 JavaScript 对象。
是的，这听起来很挑剔。
但这一切都取决于您是否需要解析它以及如何解析它，然后才能正确使用它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-29T15:24:19.333

for (var stuff in whatever) 返回对象的索引。所以基本上，要访问你的对象，你必须做

```
console.log(data.codes[code]);
console.log(data.codes[code].id); 
```

并且请下次以可读的方式格式化您的 json，这里很难阅读 :)

# php - 为什么我的正则表达式不匹配？

> ID：13628912
> 
> 赞同：1
> 
> 时间：2012-11-29T15:18:36.387
> 
> 标签：php, regex, html-parsing

我有一个这样的字符串：

```
<li class="level0 nav-2 last level-top parent">
   <a href="#" class="level-top"><span>XYZ</span></a>
   <ul class="level0">
      <li class="level1 nav-2-1 first"><a href="#"><span>Farben</span></a></li>
      <li class="level1 nav-2-2 last"><a href="#"><span>Muster</span></a></li>
   </ul>
</li> 
```

现在我想匹配最后一个 li，但前提是它在字符串中的某个位置显示 XYZ。我试过了

```
/<li class="level1 nav-(\d+)-(\d+) last">.+(<\/li>)/ 
```

哪个找到最后一个 li，但我不知道如何添加只有在它后面跟着 XYZ 的情况下。我试过了

```
/.*XYZ.*<li class="level1 nav-(\d+)-(\d+) last">.+(<\/li>)/ 
```

但这没有用。

想法？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:51:12.550

如果你想使用 REGEX ：

```
XYZ(.*\n( |\t)*.*)*<li class="level1 nav-(\d+)-(\d+) last">.+(<\/li>) 
```

你需要精确的 "level1 nav-(\d+)-(\d+)" 吗？

你以后需要用什么？

也许你可以抓住需要的部分：

```
XYZ(.*\n( |\t)*.*)*<li class=".*last">(.+)<\/li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:40:25.647

尝试使用正则表达式：

```
/XYZ(?s:.*)<li class="level1 nav-(\d+)-(\d+) last">.+(<\/li>)/ 
```

子模式中的`s`修饰符允许`.`匹配换行符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T16:30:54.317

这就是你的做法。

我想像我一直对标记解析所做的那样指出，DOM 导航工具最适合格式良好的标记。您可以使用 HTML 解析器将其转换为 XML 文档并使用 XPath 或许多其他选项。有时这对于非格式良好的 HTML 或其他文档类型来说是多余的，甚至是不可能的。话虽如此，您的要求（在我看来）转化为：

匹配未跟随另一个 ListItem 的 ListItem HTML 对象 <li...</li 因此，最后一个，但要求它前面有字符串“xyz”

```
(?is)(?<=xyz.*?)<li\s(?!.*?<li).*?</li> 
```

此 Regex 使用不区分大小写和 SingleLine 选项，要求匹配之前存在“xyz”和其他任何内容，找到一个 ListItem 后面没有另一个 ListItem，并获取整个 ListItem。不需要 CaptureGroup，因为 Lookahead 和 Lookbehind 是零宽度断言并且不捕获。所以这是整个比赛的捕获组 0。

Mario Suggested Greediness，这对于小块来说很好，但对于大型文档，它需要大量的回溯。

```
(?is)xyz.*(<li.*?</li>) 
```

但是，此正则表达式要求您使用捕获组，因为匹配是贪婪的。并不是说捕获组不好，只是更多的代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T15:41:26.007

您可以使用[phpQuery](http://code.google.com/p/phpquery/)轻松完成此操作，它是 jQuery 的 php 端口

然后使用例如

```
$liElm = pq("ul li:last:contains('xyz')"); 
```

请注意，phpQuery 不如正则表达式快，但更容易处理和更舒适。

# asp.net - ASP.NET SelectedValue 无效，因为它不存在于项目列表中。参数名称：值

> ID：13628914
> 
> 赞同：1
> 
> 时间：2012-11-29T15:18:41.657
> 
> 标签：asp.net

我收到 DropDownList11 的错误，说“'DropDownList11' 有一个无效的 SelectedValue，因为它不存在于项目列表中。参数名称：值”。SQLDatasource 的其他下拉列表工作正常。我在编辑 DetailsView 中手动创建此下拉列表。一旦选择并单击更新，它将发送到 SQL Server。请帮忙！这里有一个代码，

```
<EditItemTemplate>
                    <asp:DropDownList ID="DropDownList11" runat="server" SelectedValue='<%# Bind("Version") %>'>
                        <asp:ListItem Selected="True"></asp:ListItem>
                        <asp:ListItem>Oracle 11g</asp:ListItem>
                        <asp:ListItem>Oracle 11g R2</asp:ListItem>
                        <asp:ListItem>Server 2008</asp:ListItem>
                        <asp:ListItem>Server 2008 R2</asp:ListItem>
                        <asp:ListItem>Server 2012</asp:ListItem>
                        <asp:ListItem>SQL Svr 2008 R2 SS%S</asp:ListItem>
                        <asp:ListItem>SQL Svr 2012 SS%S</asp:ListItem>
                    </asp:DropDownList>
                </EditItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:25:45.507

我猜你是有约束力的：

```
<%# Bind("Version") %> 
```

并且 Version 的值不在您创建的列表中。我建议将其从您的代码中取出并查看它是否有效。如果是，那么您知道您需要检查该值并确保它在列表中，然后再尝试选择它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:28:43.027

下拉列表中的任何值（Oracle 11g、Oracle 11g R2、...）都不能与您正在绑定的值匹配（SelectedValue='<%# Bind("Version") %>'）。

从下拉列表中删除绑定并添加 asp 标签。将值绑定到它，您将看到您尝试绑定的值。这是标签的示例代码：

```
<asp:Label ID="Label1" runat="server" Text="<%# Eval("Version").ToString() %>"></asp:Label> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:29:50.003

就像错误所说的那样，数据库中的“版本”值可能不在您指定的预定义值列表中。尝试暂时删除下拉列表，然后执行以下操作：

```
<asp:TemplateField>
   <ItemTemplate><%#Eval("Version")%></ItemTemplate> 
</asp:TemplateField> 
```

这样您就可以看到 Version 的值是什么，以确保您在下拉列表中拥有它。

# .net - mscorlib 替换和本机代码生成

> ID：13628915
> 
> 赞同：2
> 
> 时间：2012-11-29T15:18:48.300
> 
> 标签：.net, dll, cil, .net-framework-version, mscorlib

我的问题是，我主要创建终端应用程序（控制台应用程序）并将它们发送给其他人，在服务器、备份存储等上运行它们。当我在 Visual Studio 中创建一个新的控制台应用程序时，它会将它引用到标准中的 mscorlib。

我的问题是：

*   如果我使用 Red Gates Reflector 并反编译 mscorlib.dll，删除一些东西（比如网络、密码学、证书、远程处理）并只留下所需的我的我（我只使用这个，文件 IO、集合、XML），然后编译mscorlib.dll 再次，**我可以将新的/现有的项目链接到新的 mscorlib.dll**吗？

*   当我创建一个应用程序然后发布它时，该应用程序需要 .Net Framework。我听说过 NGEN 实用程序。但是 NGEN 需要 CIL 代码才能为平台做好准备。是否有工具可以从 CIL 应用程序在我的机器上生成本机代码？

我知道本机应用程序的运行速度会比 NGENed 应用程序慢，甚至可能比 CIL 应用程序慢。但我真的需要这种解决方案。

我（主要）使用我的课程来创建非常先进的算法。我唯一需要的是输入（控制台读取，文件读取）和输出（控制台写入，文件写入）。我可以自己实现的集合类。

我的场景是：写一个应用程序。我将它发送给使用 Windows PC（Windows Server 2008 和更新版本）的人。该人无需安装 .Net Framework 即可运行我的应用程序。

# django - Django - 无需离开页面即可登录 SocialAuth

> ID：13628916
> 
> 赞同：2
> 
> 时间：2012-11-29T15:18:48.260
> 
> 标签：django, authentication, oauth, openid, django-socialauth

我在我的[`django-social-auth`](https://github.com/omab/django-social-auth)一个项目中使用了 nice 。

基本上我希望能够在不离开当前页面的情况下登录（甚至不刷新它）。

我想过简单地`target="_blank"`在我的提供者链接中使用

```
<a href="{% url socialauth_begin service %}"
  rel="nofollow" target="_blank">{{ service|title }}</a> 
```

但当然它是在成功登录后重定向到默认位置。
有没有办法在成功时自动关闭这个新窗口，以便用户获得上一页？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:46:51.010

一些服务支持基于 javascript 的登录，这可能是您正在寻找的，但这取决于您要使用哪些服务以及它们是否支持。例如[，Facebook 上有客户端 JavaScript SDK](https://developers.facebook.com/docs/concepts/login/login-architecture/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-30T14:59:36.543

使用一些 JS 和一些后端参数，您可以打开一个弹出窗口，用户可以在其中进行身份验证（一些后端接受生成不同身份验证对话框布局的参数）。在该弹出窗口中，用户将继续进行身份验证过程，并且当用户被重定向回最终 URL 时，也可以使用一些 JS 关闭弹出窗口。

# c - C++ 编译器文件夹 LIB 和 INCLUDE 位于哪里？

> ID：13628917
> 
> 赞同：1
> 
> 时间：2012-11-29T15:18:56.530
> 
> 标签：c, windows, windows-server-2008-r2, datastage

我正在尝试为 IBM DataStage ETL 工具设置 C++ 编译器。我为我的 Windows Server 2008 R2 安装了 Microsoft Visual C++ 2008 Redistributable (x64)。DataStage 指南说

> Visual Studio .NET 2008 速成版 C++：
> 
> 将 LIB 环境变量设置为 SDK 库目录的位置。例如，对于 Microsoft Visual Studio .NET 2008 Express Edition C++，典型位置是 C:\Program Files\Microsoft SDKs\Windows\v6.0A\Lib。
> 
> 将 INCLUDE 环境变量设置为 SDK 的包含目录的位置。例如，对于 Microsoft Visual Studio .NET 2008 Express Edition C++，典型位置是 C:\Program Files\Microsoft SDKs\Windows\v6.0A\Include。

我可以从中找到 Lib 文件夹

> C:\Program Files (x86)\Microsoft SDKs\Windows\v6.0A\

但不是包含文件夹。它位于哪里？下也有这类文件夹

> C:\Program 文件 (x86)\Microsoft Visual Studio 9.0

LIB 和 INCLUDE 环境变量的正确文件夹是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:07:49.467

您的开始菜单上应该安装了一个链接来运行 Visual Studio 命令提示符（可能在菜单中的 Visual Studio Express 文件夹下）。如果你运行它，它应该设置一个命令提示符窗口，其中已经正确设置。

所以你可以使用它，或者至少看看它们应该设置什么。

# c - 有人能解释一下这个 C 输出吗？

> ID：13628923
> 
> 赞同：2
> 
> 时间：2012-11-29T15:19:04.577
> 
> 标签：c

> **可能重复：**
> [谁能解释这些未定义的行为（i = i++ + ++i，i = i++ 等……）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)

```
#include<stdio.h>
void call(int,int,int);

int main(){

int a=10;
call(a,a++,++a);
return 0;   
}

void call(int x,int y,int z){
printf("x=%d y=%d z=%d\n",x,y,z);
} 
```

这段代码在运行时给了我 12 11 12 的输出。有人可以准确解释这是怎么发生的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:20:15.247

您的代码行为[未定义](http://en.wikipedia.org/wiki/Undefined_behavior)，因为您在[序列点](http://en.wikipedia.org/wiki/Sequence_point)`a`之间更改了两次：

```
call(a,a++,++a); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-29T15:22:51.830

因为`behaviour is undefined`在两个序列点之间两次更改变量。

```
c99 standard : 5.1.2.3 Program execution 
```

2

```
"Accessing a volatile object, modifying an object, modifying a file, or calling a function
that does any of those operations are all `side effects` which are changes in the state of
the `execution environment`. Evaluation of an expression may produce side effects. At
certain specified points in the execution sequence called `sequence points`, all side effects
of previous evaluations shall be complete and no side effects of subsequent evaluations
shall have taken place." 
```

在这里，您`a`在两个序列点之间修改了两次变量。

扩展编辑：如果您已经知道这些概念并且考虑到`,`逗号运算符是一个序列点，所以它应该作为一个程序工作。那么您在函数调用中的使用`well defined`是错误的`,``comma separator``comma operator`

# python - 在 Scapy Python 中读取 .enc 或其他捕获文件格式

> ID：13628924
> 
> 赞同：0
> 
> 时间：2012-11-29T15:19:09.267
> 
> 标签：python, pcap, scapy

我目前正在使用 Scapy 并遇到错误：

```
NameError: global name 'Scapy_Exception' is not defined 
```

我有 2 个选项：捕获错误并将捕获文件即时转换为 pcap，使用：

```
tshark -F libpcap -w <outfile> -r <infile> 
```

或以其他格式读取捕获文件。我可以知道吗：

1.  我如何捕捉 Scapy_Exception？

2.  如何读取 .pcap 格式以外的 scapy 捕获文件？

3.  以上哪个选项会更好？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T18:56:12.867

好的，玩了一会儿之后，我添加了行

`from scapy.error import Scapy_Exception` 在文件 utils.py 中运行我的程序。

如果我这样做，它现在会捕获错误：

```
try:
   ...:     pkts = rdpcap('./ms_dns.enc')
   ...: except Scapy_Exception as msg:
   ...:     print msg, "Hi there!!"
   ...: 
         Not a pcap capture file (bad magic) Hi there!! 
```

所以现在我可以捕获错误并即时转换文件并使用它。

谢谢！

# sql - SQL Server - 加快大表的计数

> ID：13628928
> 
> 赞同：7
> 
> 时间：2012-11-29T15:19:36.117
> 
> 标签：sql, sql-server, performance

我有一张包含近**3000 万**条记录的表。只有几列。其中一列的不同值`'Born'`不超过**30 个**，并且在其上定义了一个索引。我需要能够过滤该列并有效地翻阅结果。

现在我有（例如，如果我正在搜索的年份是“1970” - 它是我的存储过程中的一个参数）：

```
WITH PersonSubset as
(
    SELECT *, ROW_NUMBER() OVER (ORDER BY Born asc) AS Row
    FROM Person WITH (INDEX(IX_Person_Born)) 
    WHERE Born = '1970'
)
SELECT *, (SELECT count(*) FROM PersonSubset) AS TotalPeople
FROM PersonSubset
WHERE Row BETWEEN 0 AND 30 
```

这种类型的每个查询（仅`Born`使用参数）都会返回超过 100 万个结果。我注意到最大的开销是用于返回总结果的计数。如果我`(SELECT count(*) FROM PersonSubset) AS TotalPeople`从 select 子句中删除，整个事情会加快很多。

有没有办法加快该查询中的计数。我关心的是返回分页结果和总数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-29T15:42:28.227

*更新以下评论中的讨论*

这里问题的原因是索引的基数[非常低。](http://en.wikipedia.org/wiki/Cardinality_%28SQL_statements%29)`IX_Person_Born`

SQL 索引非常擅长快速缩小值，但是当您有大量具有相同值的记录时，它们就会出现问题。

你可以把它想象成电话簿的索引——如果你想找到“Smith, John”，你首先会发现有很多以 S 开头的名字，然后是一页又一页叫 Smith 的人，然后很多约翰。你最终扫描了这本书。

这很复杂，因为电话簿中的索引是聚集的——记录是按姓氏排序的。相反，如果您想找到每个名为“John”的人，您将需要进行大量查找。

这里有 3000 万条记录，但只有 30 个不同的值，这意味着最好的索引仍然返回大约 100 万条记录——在这种规模下，它也可能是表扫描。这 100 万个结果中的每一个都不是实际记录——它是从索引到表的查找（电话簿类比中的页码），这使得它变得更慢。

高基数指数（比如完整的出生日期）而不是年份会快得多。

这是所有 OLTP 关系数据库的普遍问题：`low cardinality + huge datasets = slow queries`因为索引树没有多大帮助。

简而言之：使用 T-SQL 和索引来获取计数没有明显更快的方法。

你有几个选择：

## 1\. 数据聚合

OLAP/Cube 汇总或自己做：

```
select Born, count(*) 
from Person 
group by Born 
```

优点是多维数据集查找或检查缓存非常快。问题是数据会过时，您需要一些方法来解决这个问题。

## 2.并行查询

拆分为两个查询：

```
SELECT count(*) 
FROM Person 
WHERE Born = '1970'

SELECT TOP 30 *
FROM Person 
WHERE Born = '1970' 
```

然后在并行服务器端运行这些，或将其添加到用户界面。

## 3.无SQL

这个问题是 no-SQL 解决方案相对于传统关系数据库的一大优势。在无 SQL 系统中，`Person`表是跨大量廉价服务器联合（或分片）的。当用户搜索每个服务器时，同时检查。

在这一点上，技术变革可能已经结束，但可能值得研究，所以我已经将其包括在内。

过去我在使用这种大小的数据库时遇到过类似的问题，并且（取决于上下文）我同时使用了选项 1 和 2。如果这里的总数用于分页，那么我可能会选择选项 2 和 AJAX打电话来数数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T15:40:37.660

```
DECLARE @TotalPeople int
  --does this query run fast enough?  If not, there is no hope for a combo query.
SET @TotalPeople = (SELECT count(*) FROM Person WHERE Born = '1970')

WITH PersonSubset as
(
    SELECT *, ROW_NUMBER() OVER (ORDER BY Born asc) AS Row
    FROM Person WITH (INDEX(IX_Person_Born)) 
    WHERE Born = '1970'
)
SELECT *, @TotalPeople as TotalPeople
FROM PersonSubset
WHERE Row BETWEEN 0 AND 30 
```

您通常不能采用慢速查询，将其与快速查询结合使用，然后以快速查询结束。

* * *

> 'Born' 列之一的不同值不超过 30 个，并且上面定义了一个索引。

SQL Server 没有使用索引或统计信息，或者索引和统计信息不够有用。

这是一个***绝望的措施***，它将迫使 Sql 的手（以使写入非常昂贵的潜在成本 - 衡量这一点，并在视图存在时阻止对 Person 表的架构更改）。

```
CREATE VIEW dbo.BornCounts WITH SCHEMABINDING
AS
SELECT Born, COUNT_BIG(*) as NumRows
FROM dbo.Person
GROUP BY Born

GO 

CREATE UNIQUE CLUSTERED INDEX BornCountsIndex ON BornCounts(Born) 
```

通过在视图上放置聚集索引，您可以使其成为系统维护的副本。此副本的大小远小于 3000 万行，并且包含您要查找的确切信息。我不必更改查询以使其使用视图，但如果您愿意，您可以在查询中自由使用视图的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T16:05:43.783

```
WITH PersonSubset as
(
    SELECT *, ROW_NUMBER() OVER (ORDER BY Born asc) AS Row
    FROM Person WITH (INDEX(IX_Person_Born)) 
    WHERE Born = '1970'
)
SELECT *, **max(Row) AS TotalPeople**
FROM PersonSubset
WHERE Row BETWEEN 0 AND 30 
```

为什么不这样？

编辑，不知道为什么粗体不起作用：<

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-07T04:23:08.707

这是一种使用系统 dmv 的新颖方法，如果您可以通过“足够好”的计数，您不介意为 [Born] 的每个不同值创建一个索引，并且您不介意内部感觉有点脏.

为每年创建一个过滤索引：

```
--pick a column to index, it doesn't matter which.    
CREATE INDEX IX_Person_filt_1970 on Person ( id )  WHERE Born = '1970'
CREATE INDEX IX_Person_filt_1971 on Person ( id )  WHERE Born = '1971'
CREATE INDEX IX_Person_filt_1972 on Person ( id )  WHERE Born = '1972' 
```

然后使用 sys.partitions 中的 [rows] 列来获取行数。

```
WITH PersonSubset as
(
    SELECT *, ROW_NUMBER() OVER (ORDER BY Born asc) AS Row
    FROM Person WITH (INDEX(IX_Person_Born)) 
    WHERE Born = '1970'
)
SELECT *, 
    (
    SELECT sum(rows) 
    FROM sys.partitions p 
        inner join sys.indexes i on p.object_id = i.object_id and p.index_id =i.index_id 
        inner join sys.tables t on t.object_id = i.object_id 
    WHERE t.name ='Person' 
        and i.name = 'IX_Person_filt_' + '1970' --or at @p1 
    )  AS TotalPeople
FROM PersonSubset
WHERE Row BETWEEN 0 AND 30 
```

Sys.partitions 不能保证在 100% 的情况下是准确的（通常是准确的或非常接近的）如果您需要过滤除 [Born] 之外的任何内容，此方法将不起作用

# sql-server - 如何强制 sql server 忽略计算列上的插入而不是抛出错误？

> ID：13628933
> 
> 赞同：1
> 
> 时间：2012-11-29T15:19:45.757
> 
> 标签：sql-server, calculated-columns, navision, dynamics-nav

我有一个表，我想向其中添加计算列（每个用户的值不同 - 需要权限）。
问题是该表是 Microsoft Dynamics NAV 的一部分，它对计算列一无所知。
我已经设法欺骗 NAV 以便在 NAV 创建它之后更改列类型并且我可以读取数据。

现在我被插入物困住了。
NAV 不使用可为空的列，因此它总是尝试插入默认值，并且 SQL Server 失败并在计算列上出现错误。
我尝试编写 INSTEAD OF INSERT 触发器，但似乎 SQL Server 在运行触发器之前正在执行检查，但仍然失败并出现错误。

有什么方法可以强制 SQL Server 忽略计算列上的插入值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T16:11:31.353

就我个人而言，我不会更改第三方应用程序的架构，尤其是金融系统。您可以创建视图而不是更改表 - 如果需要，您甚至可以在另一个数据库中创建它们 - 包括您的计算列定义，然后将`INSTEAD OF`触发器放在视图上并`INSERT`通过视图执行操作。

# python - itertools.islice 实现——有效地对列表进行切片

> ID：13628934
> 
> 赞同：12
> 
> 时间：2012-11-29T15:19:48.003
> 
> 标签：python, slice, itertools

早些时候，我试图回答一个问题，我想尽可能高效地迭代列表切片。

```
for x in lst[idx1:]: 
```

不理想，因为它创建了一个副本（通常，这是`O(n)`）。我的下一个想法是使用[`itertools.islice`](http://docs.python.org/2/library/itertools.html#itertools.islice). 但是，如果您查看文档，它似乎`islice`会调用`next`，直到找到它正在寻找的索引，此时它将开始产生值。这也是`O(n)`。`islice`如果传递给的对象是 a`list`或 a ，这里似乎有一个可用的优化`tuple`- 似乎您可以直接（在 C 中）迭代“切片”而无需实际制作副本。我很好奇这个优化是否在[源代码](http://hg.python.org/cpython/file/efedd0f62a7e/Modules/itertoolsmodule.c#l1370)中，但我没有找到任何东西。我对 C 和 python 源代码树不是很熟悉，所以我完全有可能错过了它。

我的问题是这样的：

> 有没有一种方法可以迭代列表“切片”而不复制列表切片并且不会烧毁一堆不需要的元素（在优化的 C 实现中）？

我很清楚我可以为此编写自己的生成器（非常天真，没有考虑到许多参数应该是可选的，等等）：

```
def myslice(obj,start,stop,stride):
    for i in xrange(start,stop,stride):
        yield obj[i] 
```

但这绝对不会打败优化的 C 实现。

* * *

如果您想知道为什么我需要它而不是直接循环切片，请考虑以下之间的区别：

```
takewhile(lambda x: x == 5, lst[idx:])  #copy's the tail of the list unnecessarily 
```

和

```
takewhile(lambda x: x == 5, islice(lst,idx,None)) #inspects the head of the list unnecessarily 
```

最后：

```
takewhile(lambda x: x == 5, magic_slice(lst,idx,None)) #How to create magic_slice??? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T15:24:27.447

我认为值得一提的是 NumPy 切片是非复制的（它们在底层数组上创建一个视图）。因此，如果您可以将 NumPy 数组用于您的数据，那将解决问题。最重要的是，您可以通过矢量化获得额外的性能改进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T16:01:37.520

> 有没有一种方法可以迭代列表“切片”而不复制列表切片并且不会烧毁一堆不需要的元素（在优化的 C 实现中）？

是的，如果你编写那个 C 实现的话。[Cython](http://cython.org/)使这变得特别容易。

```
cdef class ListSlice(object):
    cdef object seq
    cdef Py_ssize_t start, end

    def __init__(self, seq, Py_ssize_t start, Py_ssize_t end):
        self.seq = seq
        self.start = start
        self.end = end

    def __iter__(self):
        return self

    def __next__(self):
        if self.start == self.end:
            raise StopIteration()
        r = self.seq[self.start]
        self.start += 1
        return r 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T16:06:33.053

如果您使用 PyPy（您可能会使用 PyPy，因为您关心性能），它们会将字符串切片优化为非复制：[http ://doc.pypy.org/en/latest/interpreter-optimizations.html](http://doc.pypy.org/en/latest/interpreter-optimizations.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T15:55:12.797

`islice`是`itertools`模块中的一个函数，因此它`iterator`通常与 s 一起工作（并且绝对应该工作），而不仅仅是`list`s。因此，您无法在`itertools`源代码中找到您的优化，因为它应该适用于任何给定的迭代器。

在您的情况下，正确的方法是：

```
def magic_slice(lst, start, end=None):
    for pos in xrange(start, (end or len(lst))):
        yield lst[pos] 
```

`takewhile`将调用您的生成器“一个接一个”，它将新值 - 与通用列表遍历 +迭代`yield`相同的“速度” 。`xrange`所以这种实现的开销是最小的。如果您需要更多 - 您可以在 C 级别重写此类函数，但我认为这样做没有很多优势。

# microsoft-test-manager - 有什么方法可以清除 Microsoft 测试管理器（或 TFS）中的“测试人员”字段

> ID：13628937
> 
> 赞同：1
> 
> 时间：2012-11-29T15:19:58.163
> 
> 标签：microsoft-test-manager

似乎一旦您在 MTM 中的测试用例上设置了 Testers 字段，它就不允许您清除它。您只能将其更改为不同的值。有没有人找到清除此字段的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-20T20:54:46.150

不要将“已分配”测试人员字段与“分配给”字段混淆，这一点很重要。它们是测试用例工作项上的不同字段。有人可能希望 Tester 字段为空白的一个原因是，如果一个团队在迭代期间全心全意地帮助测试，并且将分配的测试人员留为空白，则可以让团队知道没有人“选择”这个测试来执行。然后团队成员可以将测试分配给他或她自己并执行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-16T20:04:08.227

该模板使用“AllowedValues”标签从列表中提取分配的测试人员值。相反，只需将其更改为“SuggestedValues”。这将允许空值 - 就这么简单。

如果您不想让自由进入，您还可以添加一个默认值，例如“无”并使用它而不是空白。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T21:02:10.360

Unless you've customized your work item type, this field should never be blank after being saved. It defaults to the person who created the bug in all Microsoft supported process templates, and a value is required by default.

That being said, why would you want to change it to blank?

If you really, really want to be able to blank it out (which I don't think is a good idea at all), you'll need to customize your template. See the below guidance:

[http://msdn.microsoft.com/en-us/library/ms243849(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/ms243849(v=vs.110).aspx)

# android - Eclipse（Juno）中的 AVD 不会运行

> ID：13628939
> 
> 赞同：3
> 
> 时间：2012-11-29T15:20:03.307
> 
> 标签：android, eclipse, avd

我已经安装了 Eclipse，然后是 android-sdk-windows v21（位于 中`C:\eclipse\android-sdk-windows`）。SDK 管理器和 AVD 管理器两个图标出现在菜单栏上。

现在，当我单击 AVD 图标时，我得到一个简短的 cmd 闪现，然后什么也没有。再次尝试并收到此消息

```
[2012-11-29 15:55:26 - SDK Manager] 
    Error parsing C:\Users\adam\.android\devices.xml, backing up to 
        C:\Users\adam\.android\devices.xml.old 
```

我也尝试过直接从 android 文件夹运行它，结果相同。我已经删除了所有 eclipse、android 等，并重新安装）。我在网上看过，但我没有遇到过这个问题。任何见解都将受到欢迎。我正在运行win7，Eclipse-Juno。文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T12:04:01.687

可能您已经更改了 devices.xml 文件的内容。我的解决方案是从原始 SDK 文件中替换文件 devices.xml 。

# build - 重启Tomcat后Jenkins Build失败

> ID：13628945
> 
> 赞同：0
> 
> 时间：2012-11-29T15:20:25.720
> 
> 标签：build, jenkins, hudson, integration, continuous

我搭建了一个ant项目，成功搭建了一个项目。

```
Started by user anonymous
Building in workspace /home/myusername/jenkins/workspace/ctascweb
[ctascweb] $ cvs -q -z3 update -PdC -r ctascweb-development-3_3_8 -D "Wednesday, November 28, 2012 10:20:13 PM UTC"
? ROOT.war
? build
U src/stdy/analyze/LoadSubjects.java
$ computing changelog
[ctascweb] $ ant -file build_hudson.xml
Buildfile: build_hudson.xml

init:
     [echo] Base Directory : /home/myusername/jenkins/workspace/ctascweb 

gen-footer:

compile-ctpm:
     [echo] Compiling ctpm files
    [javac] Compiling 1 source file to /home/myusername/jenkins/workspace/ctpm/bin

generate-ctpm-jar:
     [echo] Building CTPM jar file
      [jar] Building jar: /home/myusername/jenkins/workspace/ctpm/build/ctpm.jar

compile-ctascweb:
     [echo] Compiling ctascweb files
    [javac] Compiling 1 source file to /home/myusername/jenkins/workspace/ctascweb/build/classes
    [mkdir] Created dir: /home/myusername/jenkins/workspace/ctascweb/build/classes/resource

build-ctascweb-war:
     [echo] Building WAR file for ctascweb
      [war] Building war: /home/myusername/jenkins/workspace/ctascweb/ROOT.war
     [echo] Nov-28-2012 05:20:48

BUILD SUCCESSFUL
Total time: 7 seconds
Archiving artifacts
Finished: SUCCESS 
```

我关闭了我的 Tomcat 并返回下一项工作。我没有对我的配置进行任何更改并再次开始构建，但构建失败了。

```
Started by user anonymous
Building in workspace /home/myusername/jenkins/jobs/ctascweb/workspace
[ctascweb] $ cvs -Q -z3 -d :pserver:myusername:pwd@5.0.0.146:/CVS_RESP01 co -P -r ctascweb-development-3_3_8 -d workspace -D "Thursday, November 29, 2012 2:41:16 PM UTC" ctascweb
$ computing changelog
[workspace] $ ant -file build_hudson.xml
Buildfile: build_hudson.xml

init:
    [mkdir] Created dir: /home/myusername/jenkins/jobs/ctascweb/workspace/build/classes
     [echo] Base Directory : /home/myusername/jenkins/jobs/ctascweb/workspace 

gen-footer:

BUILD FAILED
java.io.FileNotFoundException: /home/myusername/jenkins/jobs/ctascweb/ctpm/src/com/ctasc/ctpm/layout/StdyFooter.java (No such file or directory)
    at java.io.FileOutputStream.open(Native Method)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:194)
    at java.io.FileOutputStream.<init>(FileOutputStream.java:116)
    at java.io.FileWriter.<init>(FileWriter.java:61)
    at org.apache.tools.ant.taskdefs.Echo.execute(Echo.java:67)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:288)
    at sun.reflect.GeneratedMethodAccessor1.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:357)
    at org.apache.tools.ant.Target.performTasks(Target.java:385)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1337)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1306)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1189)
    at org.apache.tools.ant.Main.runBuild(Main.java:758)
    at org.apache.tools.ant.Main.startAnt(Main.java:217)
    at org.apache.tools.ant.launch.Launcher.run(Launcher.java:257)
    at org.apache.tools.ant.launch.Launcher.main(Launcher.java:104)

Total time: 0 seconds
Build step 'Invoke Ant' marked build as failure
Archiving artifacts
Finished: FAILURE 
```

出于某种原因，工作空间从 /home/myusername/jenkins/workspace/ctascweb 更改为 /home/myusername/jenkins/jobs/ctascweb/workspace。为什么会这样？我唯一做的就是停止并重新启动 Tomcat 服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T07:00:22.517

是的，Jenkins 工作区文件夹正在根据我们运行它的方式而改变。我在我的机器上的 Windows XP 中看到了这一点。

当我使用运行 JAR 文件时 `java -jar jenkins.war`

这是`.jenkins/workspace/<job_name>`

当我将它安装为 Windows 服务时，工作区文件夹更改为`.jenkins/<job_name>/workspace`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T10:11:19.487

从 UI 中查找作业配置的任何更改。转到高级选项，看看是否有人取消了您的自定义工作区，似乎是这种情况。我也可以看看你的 build_hudson.xml。您在构建文件中使用路径的方式可能存在一些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:36:10.530

您是 Hudson/Jenkins 服务器的管理员吗？

如果最近更新了版本（特别是从 Hudson 到 Jenkins），则用于项目工作区的路径会有所不同（可以在配置中更改）。您应该始终使用`${WORKSPACE}`变量而不是直接引用任何路径

此外，这些行看起来不同，所以不仅仅是 Tomcat 重启
`[ctascweb] $ cvs -q -z3 update -PdC -r ctascweb-development-3_3_8 -D "Wednesday, November 28, 2012 10:20:13 PM UTC"`

`[ctascweb] $ cvs -Q -z3 -d :pserver:myusername:pwd@5.0.0.146:/CVS_RESP01 co -P -r ctascweb-development-3_3_8 -d workspace -D "Thursday, November 29, 2012 2:41:16 PM UTC" ctascweb`

# azure - Azure 虚拟机 VMRole SLA

> ID：13628947
> 
> 赞同：1
> 
> 时间：2012-11-29T15:20:32.970
> 
> 标签：azure, azure-vm-role

我知道 Azure 中的虚拟机仍处于早期预览阶段，但我是否认为一旦脱离早期预览版，SLA 将与 Web 和 Worker 角色相同？

还有谁知道早期预览什么时候结束？

谢谢安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:53:21.003

当 GA（通用可用性，或“非预览版”）时，虚拟机的 SLA 预计与云服务（Web/工作者角色）的 SLA 非常相似。意味着单实例没有 SLA，但 2 实例设置为 99.95%。没有人知道预览版何时结束，GA 何时到来。

# javascript - Javascript 属性镜像到另一个实例

> ID：13628951
> 
> 赞同：1
> 
> 时间：2012-11-29T15:20:45.860
> 
> 标签：javascript, properties, overriding

假设我们在 Javascript 中有类似的东西：

```
obj1.prop1.prop1_1.prop1_1_1 = 3; 
```

调用它时，我希望在同一树位置设置值 3，但在 obj2 中，就像我调用了：

```
obj2.prop1.prop1_1.prop1_1_1 = 3; 
```

所有这一切都受到 obj2 最初没有填充 prop1.prop1_1.prop1_1_1 的约束。

我想第一步是覆盖 obj1.prop1，使其返回 obj2.prop1。但是 obj2.prop1 需要分配给与 obj1.prop1 相同类型的实例。我们怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:25:28.383

如果我对您的理解正确，`obj1.prop1.prop1_1`并且`obj2.prop1.prop1_1`不是同一个对象，并且您希望`prop1_1_1`在前者上设置属性以在后者上设置相同的属性*。*

从 ES5 开始，[属性 getter 和/或 setter](http://www.ecma-international.org/ecma-262/5.1/#sec-15.2.3.6)*可以做到*这一点，但我不认为我会推荐它。:-)

这是一个 getter on从's`obj2.prop1.prop1_1.prop1_1_1`获取值的示例：`obj1`

```
var obj1 = {
    prop1: {
        prop1_1: {
            prop1_1_1: 42
        }
    }
};
var obj2 = {
    prop1: {
        prop1_1: {
        }
    }
};
Object.defineProperty(obj2.prop1.prop1_1, "prop1_1_1", {
    get: function() {
        return obj1.prop1.prop1_1.prop1_1_1;
    }
});
console.log("obj1.prop1.prop1_1.prop1_1_1 = " + obj1.prop1.prop1_1.prop1_1_1); // 42
console.log("obj2.prop1.prop1_1.prop1_1_1 = " + obj2.prop1.prop1_1.prop1_1_1); // 42
obj1.prop1.prop1_1.prop1_1_1 = 3;
console.log("obj1.prop1.prop1_1.prop1_1_1 = " + obj1.prop1.prop1_1.prop1_1_1); // 3
console.log("obj2.prop1.prop1_1.prop1_1_1 = " + obj2.prop1.prop1_1.prop1_1_1); // 3 
```

[Live Copy](http://jsbin.com/imajef/1)（查看控制台）| [资源](http://jsbin.com/imajef/1/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:29:26.733

如果 TJ Crowder 的假设是正确的，您可以执行以下操作：

```
obj1.prop1.prop1_1.prop1_1_1= [3]

obj2.prop1.prop1_1.prop1_1_1= obj1.prop1.prop1_1.prop1_1_1 
```

现在如果你改变 obj2.prop1.prop1_1.prop1_1_1[0]，obj1.prop1.prop1_1.prop1_1_1[0] 也会被改变。

这是因为当您将其定义为 [3] 时，它实际上创建了一个 Array 对象并将其引用（也称为指针）存储在 obj1.prop1.prop1_1.prop1_1_1 中，因此 obj1.prop1.prop1_1.prop1_1_1 和 obj2.prop1.prop1_1 都存在。 prop1_1_1 将对同一数组具有相同的引用。内存中只有一个数组，但是对它的两个引用，改变一个也会改变另一个。

如果您使用 obj1.prop1.prop1_1.prop1_1_1= 3，则在这种情况下，prop1_1_1 是一个原语，而不是对对象的引用。所以如果你说

```
obj1.prop1.prop1_1.prop1_1_1= obj2.prop1.prop1_1.prop1_1_1 
```

它实际上会将值 3 复制到另一个变量，使其在内存中的两个不同位置保存值 3，并且更改一个不会更改另一个

# c# - 基于呼叫位置的类型推断

> ID：13628956
> 
> 赞同：3
> 
> 时间：2012-11-29T15:21:05.250
> 
> 标签：c#, generics, type-inference

我想为通用类创建一个包装函数，如下所示：

```
public class ColumnData
{
    public static ColumnData<T> Create<T>(string name, int width, ColumnType type,
                                          Func<T, string> dataFormater)
    {
        return new ColumnData<T>(name, width, type, dataFormater);
    }
} 
```

该`Create`方法将作为具有签名的另一个函数的参数调用：

```
public void populateFromData<TDATA>(IEnumerable<TDATA> data, 
                                    params ColumnData<TDATA>[] columns)   
{
   ...
} 
```

这里的目的是能够做到：

```
var myData = new List<MyDataType>();
dataListView.populateFromData(
    myData,
    ColumnData.Create("ID", 40, ColumnType.Numeric, x => x.ID.ToString()); 
```

但是，`Create`无法根据预期的签名为其自身推断出正确的类型，因此 lambda 也不知道自己。

这是类型推断的限制，还是有办法使这个设置工作？

*注意：如有必要，我愿意在此函数调用中的某处指定实际数据类型，但我**不想**为每个`.Create()`.*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:30:21.007

有时，当 c# 无法推断它的实际类型时，您只需要显式指定泛型类型参数。

```
dataListView.populateFromData(
    myData,
    ColumnData.Create<MyDataType>("ID", 40, ColumnType.Numeric, x => x.ID.ToString()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:45:26.733

正如其他人所解释的那样，使用您想要的确切语法是不可能的。作为一种解决方法，您可以将打字移至单独的建筑类：

```
 public class ColumnDataBuilder
    {
        public static ColumnDataBuilder<T> ColumnsFor<T>(IEnumerable<T> data)
        {
            return new ColumnDataBuilder<T>(data);
        }
    }

    public class ColumnDataBuilder<T> : ColumnDataBuilder
    {
        public IEnumerable<T> Data { get; private set; }

        public ColumnDataBuilder(IEnumerable<T> data)
        {
            this.Data = data;
        }
        public ColumnData<T> Create(string name, int width, ColumnType type, Func<T, string> dataFormater)
        {
            return new ColumnData<T>(name, width, type, dataFormater);
        }

        public void populateFromData(params ColumnData<T>[] columns)
        {
            ///...
        }
    }

    public class ColumnData<T>
    {
        public ColumnData(string name, int width, ColumnType type, Func<T, string> dataFormatter)
        {

        }
    } 
```

然后用法可能如下所示：

```
 var builder = ColumnDataBuilder.ColumnsFor(new List<MyDataType>());
        builder.populateFromData(builder.Create("ID", 40, ColumnType.Numeric, x => x.ID.ToString()));
        IEnumerable<MyDataType> data = builder.Data; 
```

或者更接近您的示例用法（如果您想继续`populateFromData`使用`dataListView`），在这种情况下您可以放弃该`ColumnDataBuilder<T>.populateFromData`方法（因为从您的评论看来，不可能保留在那里）：

```
 var myData = new List<MyDataType>();
        var builder = ColumnDataBuilder.ColumnsFor(myData);
        dataListView.populateFromData(myData, builder.Create("ID", 40, ColumnType.Numeric, x => x.ID.ToString())); 
```

或者两全其美：

```
 var builder = ColumnDataBuilder.ColumnsFor(new List<MyDataType>());
        dataListView.populateFromData(builder.Data, builder.Create("ID", 40, ColumnType.Numeric, x => x.ID.ToString())); 
```

编辑：考虑到您的评论，您可能不希望`populateFromData`甚至可能不希望`IEnumerable<T> Data`存储在 上`ColumnDataBuilder`，因此您可以简化为：

```
 public class ColumnDataBuilder<T> : ColumnDataBuilder
    {
        public ColumnData<T> Create(string name, int width, ColumnType type, Func<T, string> dataFormater)
        {
            return new ColumnData<T>(name, width, type, dataFormater);
        }
    }

    public class ColumnDataBuilder
    {
        public static ColumnDataBuilder<T> ColumnsFor<T>(IEnumerable<T> data)
        {
            return new ColumnDataBuilder<T>();
        }
    } 
```

从上面的用法：

```
 var myData = new List<MyDataType>();
        var builder = ColumnDataBuilder.ColumnsFor(myData);
        dataListView.populateFromData(myData, builder.Create("ID", 40, ColumnType.Numeric, x => x.ID.ToString())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:54:15.297

我刚刚想出的一个答案涉及一个别名。我去掉了包装类，直接把`Create`方法移到`ColumnData<T>`类中，然后添加：

```
using ColumnData = ColumnData<MyDataType>; 
```

这使我可以`ColumnData.Create()`使用类型提示访问编译器，而无需在每一行上指定它。我需要在要使用它的每个文件中创建别名，但这是一个可行的解决方案。

# php - 有没有办法在 PHP 中获取用户声明的变量？

> ID：13628958
> 
> 赞同：13
> 
> 时间：2012-11-29T15:21:07.290
> 
> 标签：php

**get_defined_vars**即将（引文）：

> 返回一个多维数组，其中包含所有已定义变量的列表，可以是环境变量、服务器变量或用户定义变量

好吧，对于我的调试任务，我只需要那些用户定义的。是否有php内置或补充功能？

编辑：好的，我没有说清楚我到底在追求什么，这是一个小例子：

```
<?php
/*
this script is included, and I don't have info
about how many scripts are 'above' and 'bellow' this*/

//I'm at line 133
$user_defined_vars = get_user_defined_vars();
//$user_defined_vars should now be array of names of user-defined variables
//what is the definition of get_user_defined_vars()?

?> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-29T15:24:57.330

是的你可以：

```
<?php
// Start
$a = count(get_defined_vars());

/* Your script goes here */
$b = 1;

// End
$c = get_defined_vars();
var_dump(array_slice($c, $a + 1)); 
```

将返回：

```
array(1) {
  ["b"]=>
  int(1)
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-29T16:10:44.540

对数组进行一点操作怎么样？

```
$testVar = 'foo';
// list of keys to ignore (including the name of this variable)
$ignore = array('GLOBALS', '_FILES', '_COOKIE', '_POST', '_GET', '_SERVER', '_ENV', 'ignore');
// diff the ignore list as keys after merging any missing ones with the defined list
$vars = array_diff_key(get_defined_vars() + array_flip($ignore), array_flip($ignore));
// should be left with the user defined var(s) (in this case $testVar)
var_dump($vars);

// Result: 
array(1) {
    ["testVar"]=>string(3) "foo"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:26:31.607

[这](http://online-source.net/2011/08/12/get-user-defined-variables/)似乎是您问题的一个很酷的解决方案：

```
<?php
// Var: String
$var_string = 'A string';

// Var: Integer
$var_int = 55;

// Var: Boolean
$var_boolean = (int)false;

/**
 * GetUserDefinedVariables()
 * Return all the user defined variables
 * @param array $variables (Defined variables)
 * @return array $user_variables
 */
function GetUserDefinedVariables($variables){;
    if (!is_array($variables))
        return false;

    $user_variables = array();

    foreach ($variables as $key => $value)
        if (!@preg_match('@(^_|^GLOBALS)@', $key))
            $user_variables[$key] = $value;

        return $user_variables;
}

echo '<pre>'.print_r(
                        GetUserDefinedVariables(
                                        get_defined_vars()
                                                ), true).'</pre>';
?> 
```

# actionscript-3 - AS3：int 用于预期布尔值的地方

> ID：13628959
> 
> 赞同：0
> 
> 时间：2012-11-29T15:21:11.973
> 
> 标签：actionscript-3, events, parameters, addeventlistener

我有三个不同的按钮。当您单击其中一个按钮时，它应该激活 stageSelect 功能，然后应该输出按钮的编号。

但是当我这样做时，我得到了标题中的错误。我在这里做错了什么？

```
package {
    import flash.display.MovieClip;
    import flash.display.SimpleButton;
    import flash.events.MouseEvent;
    import flash.ui.Mouse;

    public class MenuScreen extends MovieClip {
        public function MenuScreen() {
            Mouse.show();
            selectGrass.addEventListener(MouseEvent.CLICK, stageSelect, 1);
            selectDirt.addEventListener(MouseEvent.CLICK, stageSelect, 2);
            selectGravel.addEventListener(MouseEvent.CLICK, stageSelect, 3);
        }

        public function stageSelect(stageID:Number) {
            trace(stageID);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:32:09.020

这是因为 addEventListener 方法的第三个参数是 useCapture ，它需要一个布尔值，表示您希望在冒泡之前的捕获阶段抓取事件。你在打电话

```
selectGrass.addEventListener( MouseEvent.CLICK, StageSelect, 1); 
```

你需要做的是

```
selectGrass.addEventListener( MouseEvent.CLICK, grassSelected);
selectDirt.addEventListener( MouseEvent.CLICK, dirtSelected);

private function grassSelected(event:MouseEvent):void{
    // do grass stuff
}

private function dirtSelected(event:MouseEvent):void{
    // do dirt stuff
} 
```

# shell - 使用循环连接参数以在 shell 脚本中形成命令

> ID：13628961
> 
> 赞同：1
> 
> 时间：2012-11-29T15:21:18.100
> 
> 标签：shell, loops, arguments, concatenation

我在这个网站和其他地方尝试了不同的建议，但没有任何效果。我需要将一些参数传递给 shell 脚本，然后将它们连接到一个字符串上，然后将其作为命令启动。所以我这样做

```
command="perl perl_script.pl"

for arg
do

command+="$arg "

done

eval $command 
```

但我得到这个错误

```
bowtie_script_simple.sh: 43: bowtie_script_simple.sh: comando+=-n : not found
bowtie_script_simple.sh: 43: bowtie_script_simple.sh: comando+=3 : not found 
```

根据我看到的其他线程应该可以工作。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T15:24:50.613

```
command="$command $arg" 
```

您的 args 有（或可能有）空格吗？为了安全起见，您可能应该进一步引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-29T16:12:24.823

在处理带空格的 args 时，作为字符串连接会带来困难。使用 bash/zsh/ksh，使用数组效果更好：

```
command=(perl perl_script.pl)
for arg; do
    command+=("$arg")
done

# or more simply
# command=(perl perl_script.pl "$@")

# now, execute the command with each arg properly quoted. 
"${command[@]}" 
```

从您的错误消息来看，您似乎正在使用 /bin/sh ——该外壳没有`var+=string`构造——必须使用具有更多功能的外壳。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T15:35:30.090

我认为这应该有效：

```
command="perl perl_script.pl"

for arg in $@
do
  command="$command $arg"
done

$command 
```

# javascript - CSS3 和间隔中的定时转换作为工具提示

> ID：13628964
> 
> 赞同：0
> 
> 时间：2012-11-29T15:21:25.600
> 
> 标签：javascript, jquery, html, css, timing

我在 div 中设置了工具提示，需要使用 CSS 来让它们在点击时进入和离开焦点，就像教程一样。有人知道怎么做吗？

克里斯

# magento - 自定义 Magento 管理员配置密码加密

> ID：13628966
> 
> 赞同：6
> 
> 时间：2012-11-29T15:21:36.233
> 
> 标签：magento, password-encryption

我需要 sftp 服务器的密码作为我正在处理的 Magento 模块的配置字段。添加字段很简单，但 Magento 实际上并没有加密该值，因为它有一个`frontend_type`of `password`。

```
<sftp_password translate="label">
    <label>SFTP Password</label>
    <frontend_type>password</frontend_type>
    <sort_order>170</sort_order>
    <show_in_default>1</show_in_default>
    <show_in_website>1</show_in_website>
    <show_in_store>1</show_in_store>
</sftp_password> 
```

我无法找到有关如何正确加密此值的文档。如何确保密码存储在数据库中时得到加密？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-29T15:24:42.113

```
<sftp_password translate="label">
      <label>SFTP Password</label>
       <frontend_type>obscure</frontend_type>
      <backend_model>adminhtml/system_config_backend_encrypted</backend_model>
      <sort_order>10</sort_order>
      <show_in_default>1</show_in_default>
      <show_in_website>1</show_in_website>
      <show_in_store>0</show_in_store>
</sftp_password>

// assuming that getConfigData return Mage::getStoreConfig($path, $storeId);
$this->getConfigData('sftp_password'); 
```

**frontend_type ：密码与晦涩难懂**

模糊扩展密码，但出于安全原因，它将实际密码数字的长度替换为`'*'s`6 `'*'s`，因此您无法分辨密码的长度

请参见 /lib/Varien/Data/Form/Element/

阅读更多 @ [XML 用于管理员配置](http://www.magentocommerce.com/wiki/5_-_modules_and_development/admin/xml_structure_for_admin_configurations#frontend_type_types)

# linux - 停止 Linux 时钟以调试特定时间的程序？

> ID：13628973
> 
> 赞同：0
> 
> 时间：2012-11-29T15:22:12.893
> 
> 标签：linux, debugging, gdb, analysis, clock

首先，让我先声明这是基于家庭作业。作为作业的一部分，我正在尝试检查/调试程序以确定它的作用。我发现程序的一部分只在整点后的 42 分钟做出反应。我想用 gdb 逐步完成它，以观察汇编指令并在它执行时注册。问题是我只有一分钟的时间来完成这项工作。

有没有办法“停止”时钟或欺骗程序认为它总是 x:42:00？

谢谢你。

杰森

# google-chrome - Chrome 边框半径和不透明度存在错误？

> ID：13628974
> 
> 赞同：0
> 
> 时间：2012-11-29T15:22:17.343
> 
> 标签：google-chrome, opacity, css

任何人都可以帮我解决这个问题，我制作了一个[jsfiddle](http://jsfiddle.net/tRzc6/8/)来说明我的问题......

当我尝试添加

```
opacity: 0.6; 
```

到班级

```
.menuitem {} 
```

边界半径不再适用......使用jsfiddle，尝试删除不透明度并重新运行它，你会明白我的意思。这是一个错误还是我错过了什么？问题似乎只在 Chrome 中，但也可能在 Safari 中。

提前致谢

编辑：将边框半径应用于 .mask 元素的原因是子 div .menuitem 是 jQuery 中的 marginTop 动画以在鼠标悬停时向下滑动。这意味着在这些项目上具有圆角，它需要通过圆形掩码下方。

希望这是有道理的..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:24:15.997

使用 rgba 设置背景不透明度：

`background-color: rgba(0, 0, 0, 0.6);`

[http://jsfiddle.net/tRzc6/9/](http://jsfiddle.net/tRzc6/9/)

# java - 为什么 javax.xml.stream.XMLEventReader 扩展原始迭代器而不是迭代器 ?

> ID：13628978
> 
> 赞同：3
> 
> 时间：2012-11-29T15:22:45.857
> 
> 标签：java, stax

为什么 XMLEventReader 扩展原始迭代器？由于 XMLEventReader.next() 返回 Object，我们必须使用显式强制转换。不应该是这样吗：

```
public interface XMLEventReader extends Iterator<XmlEvent> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-29T15:58:25.153

Stax api 是在[jsr 173](http://www.jcp.org/en/jsr/detail?id=173)中定义的，该规范在 2004 年 3 月达到最终发布状态。引入泛型的 JDK 5 仅在 2004 年 9 月发布。jsr 173 的开发开始得更早，因此它针对的是更早的 java版本。

应该可以在 api 的进一步版本中引入泛型，但我猜专家组中没有人加紧这项任务。

请注意，`XMLEventReader`还有一个`nextEvent`不需要强制转换的方法。

# python - 设置工具。如何使包包含额外的数据文件夹和里面的所有文件夹

> ID：13628979
> 
> 赞同：6
> 
> 时间：2012-11-29T15:22:46.330
> 
> 标签：python, filenames, setuptools

所以我正在制作 setuptool 包。

要在包中包含额外的数据文件，我需要在`data_file`里面指定参数`setup()`。

**代码示例：**

```
datadir = os.path.join('share','data')
datafiles = [(datadir, [f for f in glob.glob(os.path.join(datadir, '*'))])]
import metainfo # a file with relevant information
setup(
    name             = 'yourpackage',
    version          = metainfo.version,
    maintainer       = metainfo.maintainer,
    maintainer_email = metainfo.maintainer_email,
    author           = metainfo.authors,
    author_email     = metainfo.authors,
    description      = metainfo.description,
    keywords         = metainfo.keywords,
    long_description = metainfo.long_description,

    # package installation
    packages = find_packages('src'),
    package_dir  = package_dir,

    data_files = datafiles,
} 
```

`datafile`本例中的变量将包含这样的数据

```
[('share/data', ['share/data/addon.xml.tmplt', 'share/data/default.py.tmplt'])] 
```

但是，我的示例不会递归地列出文件夹和包含文件。

我需要作为参数 folder_path 并返回元组列表的函数：

```
[
    ('share/data', ['share/data/addon.xml.tmplt', 'share/data/default.py.tmplt']),
    ('share/data/inside', ['share/data/inside/file.iside', 'share/data/inside/file2.inside']),
    .........

] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-29T15:26:49.740

用于[`os.walk()`](http://docs.python.org/2/library/os.html#os.walk)生成该信息：

```
datafiles = [(root, [os.path.join(root, f) for f in files])
    for root, dirs, files in os.walk(datadir)] 
```

这将产生绝对路径；如果需要，您可以`root`多处理变量以使它们相对于`setup.py`目录。

# google-maps - 在 Google 地图上设置 KML 多边形叠加样式？

> ID：13628980
> 
> 赞同：1
> 
> 时间：2012-11-29T15:22:50.643
> 
> 标签：google-maps, google-maps-api-3, kml, google-maps-styled

我正在向 Google 地图添加 KML 多边形叠加层：

```
var ctaLayer = new google.maps.KmlLayer('http://global.mapit.mysociety.org/area/14020.kml');
ctaLayer.setMap(plainmap); 
```

这给了我一个带有深蓝色路径轮廓的亮蓝色多边形。我该如何设计它？

文档似乎建议可以使用 CSS 样式，但是我在 DOM 中找不到 KML 多边形，所以我不确定使用什么样式规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:56:41.763

[KML](http://code.google.com/apis/kml/documentation/kmlreference.html)包括设置多边形样式的功能。如果您想动态设置样式（不在 KML 中），您需要使用第三方解析器，如 geoxml3 或 FusionTableLayers（将导入 KML）。

# variables - 如何在 VB.NET 中定义全局变量？

> ID：13628982
> 
> 赞同：0
> 
> 时间：2012-11-29T15:22:54.010
> 
> 标签：variables, initialization, global, declare

如何在 VB.NET（Web 窗体“ASPX”）中声明全局变量并在所有页面中使用此变量？Method Initialize 和 Cancel 是如何在网页中初始化的？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T19:51:50.680

您必须声明静态变量，...您可以在下面的链接中逐步找到答案：

[全局变量-aspnet](http://www.dotnetperls.com/global-variables-aspnet)

# android - 为什么我不能在表格布局中混合文本行和图像行？

> ID：13628985
> 
> 赞同：0
> 
> 时间：2012-11-29T15:23:08.030
> 
> 标签：android, textview, row, tablelayout

我的主要活动 Android .xml 表格布局是一个简单的图像表格，3 列 x 4 行。一切都设置为 match_parent 宽度、高度和重量 1，这在 GUI 编辑器中呈现略微错误，但在我的手机上还可以。

如果我然后在 .xml 中在底行之前添加一行以添加文本标签，它要么根本不渲染该行，要么在稍微戳一下之后，渲染文本但用最后一行切断底部。

以下是.xml，冗长但非常简单和重复。

```
<TableLayout
    android:layout_gravity="bottom"
    android:layout_weight="1"
    android:stretchColumns="*"       
    android1:layout_width="match_parent"
    android1:layout_height="match_parent"
    android1:layout_alignParentBottom="true"
    android1:layout_alignParentLeft="true"
    android1:layout_alignParentRight="true"
    android1:layout_alignParentTop="true" >

    <TableRow
        android1:id="@+id/tableRow1"
        android1:layout_width="match_parent"
        android1:layout_height="match_parent"
        android1:layout_weight="1" >

        <ImageView
            android1:id="@+id/x2"
            android1:layout_width="match_parent"
            android1:layout_height="match_parent"
            android1:layout_weight="1"
            android1:clickable="true"
            android1:onClick="SetTable"
            android1:padding="5dp"
            android1:scaleType="fitCenter"
            android1:src="@drawable/menu_2x"
            android1:tag="2" />

        <ImageView
            android1:id="@+id/x3"
            android1:layout_width="match_parent"
            android1:layout_height="match_parent"
            android1:layout_weight="1"
            android1:onClick="SetTable"
            android1:padding="5dp"
            android1:scaleType="fitCenter"
            android1:src="@drawable/menu_3x"
            android1:tag="3" />

        <ImageView
            android1:id="@+id/x4"
            android1:layout_width="match_parent"
            android1:layout_height="match_parent"
            android1:layout_weight="1"
            android1:onClick="SetTable"
            android1:padding="5dp"
            android1:scaleType="fitCenter"
            android1:src="@drawable/menu_4x"
            android1:tag="4" />

    </TableRow>

    <TableRow
        android1:id="@+id/tableRow3"
        android1:layout_width="match_parent"
        android1:layout_height="match_parent"
        android1:layout_weight="1" >

        <ImageView
            android1:id="@+id/x5"
            android1:layout_width="match_parent"
            android1:layout_height="match_parent"
            android1:layout_weight="1"
            android1:onClick="SetTable"
            android1:padding="5dp"
            android1:scaleType="fitCenter"
            android1:src="@drawable/menu_5x"
            android1:tag="5" />

        <ImageView
            android1:id="@+id/x6"
            android1:layout_width="match_parent"
            android1:layout_height="match_parent"
            android1:layout_weight="1"
            android1:onClick="SetTable"
            android1:padding="5dp"
            android1:scaleType="fitCenter"
            android1:src="@drawable/menu_6x"
            android1:tag="6" />

        <ImageView
            android1:id="@+id/x7"
            android1:layout_width="match_parent"
            android1:layout_height="match_parent"
            android1:layout_weight="1"
            android1:onClick="SetTable"
            android1:padding="5dp"
            android1:scaleType="fitCenter"
            android1:src="@drawable/menu_7x"
            android1:tag="7" />

    </TableRow>

    <TableRow
        android1:id="@+id/tableRow4"
        android1:layout_width="match_parent"
        android1:layout_height="match_parent"
        android1:layout_weight="1" >

        <ImageView
            android1:id="@+id/x8"
            android1:layout_width="match_parent"
            android1:layout_height="match_parent"
            android1:layout_weight="1"
            android1:onClick="SetTable"
            android1:padding="5dp"
            android1:scaleType="fitCenter"
            android1:src="@drawable/menu_8x"
            android1:tag="8" />

        <ImageView
            android1:id="@+id/x9"
            android1:layout_width="match_parent"
            android1:layout_height="match_parent"
            android1:layout_weight="1"
            android1:onClick="SetTable"
            android1:padding="5dp"
            android1:scaleType="fitCenter"
            android1:src="@drawable/menu_9x"
            android1:tag="9" />

        <ImageView
            android1:id="@+id/x10"
            android1:layout_width="match_parent"
            android1:layout_height="match_parent"
            android1:layout_weight="1"
            android1:onClick="SetTable"
            android1:padding="5dp"
            android1:scaleType="fitCenter"
            android1:src="@drawable/menu_10x"
            android1:tag="10" />

    </TableRow>

    <TableRow
        android1:id="@+id/TableRow01"
        android1:layout_width="match_parent"
        android1:layout_height="match_parent"
        android1:layout_weight="1" >

        <TextView
            android1:id="@+id/TextView02"
            android1:layout_width="match_parent"
            android1:layout_height="match_parent"
            android1:layout_span="2"
            android1:layout_weight="1"
            android1:text="Left two buttons"
            android1:textColor="#000000"
            android1:textSize="16dp"
            android1:textStyle="normal" />

        <TextView
            android1:id="@+id/textView1"
            android1:layout_width="match_parent"
            android1:layout_height="match_parent"
            android1:layout_weight="1"
            android1:text="Right button"
            android1:textColor="#000000"
            android1:textSize="16dp"
            android1:textStyle="normal" />

    </TableRow>

    <TableRow
        android1:id="@+id/TableRow5"
        android1:layout_width="match_parent"
        android1:layout_height="match_parent"
        android1:layout_weight="1" >

        <ImageView
            android1:id="@+id/ImageView07"
            android1:layout_width="match_parent"
            android1:layout_height="match_parent"
            android1:layout_weight="1"
            android1:onClick="LaunchPR"
            android1:scaleType="fitCenter"
            android1:src="@drawable/pushbutton_1"
            android1:tag="1" />

        <ImageView
            android1:id="@+id/ImageView08"
            android1:layout_width="match_parent"
            android1:layout_height="match_parent"
            android1:layout_weight="1"
            android1:onClick="LaunchPR"
            android1:scaleType="fitCenter"
            android1:src="@drawable/pushbutton_1"
            android1:tag="2" />

        <ImageView
            android1:id="@+id/ImageView09"
            android1:layout_width="match_parent"
            android1:layout_height="match_parent"
            android1:layout_weight="1"
            android1:onClick="LaunchPR"
            android1:scaleType="fitCenter"
            android1:src="@drawable/pushbutton_2"
            android1:tag="3" />

    </TableRow>

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T11:56:27.683

如果将 设置`TableLayout`为填充 parent( `match_parent`)，则不需要该`layout_weight`属性。如果您打算使垂直占据相等的空间`layout_weight`（例如，如果您有 4 行，那么您将需要在和上设置以使四个大小相等的垂直行（填满屏幕））。`TableRows``TableRows``android:weightSum="4"``TableLayout``android:layout_weight="1"``TableRows`

此外，该`android:stretchColumns="*"`属性将拉伸所有表格的列，因此您不需要`TableRow`.

# android - 如何访问下载的内部文件图标并用作可绘制对象，例如在 setIcon(drawable) 中

> ID：13628987
> 
> 赞同：1
> 
> 时间：2012-11-29T15:23:10.207
> 
> 标签：android

我下载了一个 png 图标并将其存储在内部文件系统中。如何以与 res/drawable 中的 drawable 类似的方式使用此图标。我可以阅读它并拉动它的耳朵，但是如何在 setIcon() 方法中使用它？内部文件是否有资源 ID？（妄想）。

我注意到有人建议保存到 res/raw，但无论如何您都不能写入应用程序文件夹。

我一直在使用： *openFileOutput(filename, Context.MODE_PRIVATE);* 但也许我需要创建一个 File 对象并执行通常的 Java 操作。即便如此，如何在我的代码中将其作为可绘制对象获取？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T15:35:32.260

在您的情况下使用[BitmapDrawable](http://developer.android.com/reference/android/graphics/drawable/BitmapDrawable.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T15:54:53.923

尝试这个：

```
Drawable drw = Drawable.createFromStream(openFileInput(filename, Context.MODE_PRIVATE)); 
```

然后，您可以在 ImageView 中使用该可绘制对象及其 setImageDrawable(drw); 方法

希望有帮助

# android - 在动画视图时使用硬件层

> ID：13628991
> 
> 赞同：1
> 
> 时间：2012-11-29T15:23:14.537
> 
> 标签：android, android-animation

在过去的几个小时里，我一直在尝试修复动画中的几个丢帧。第一次运行动画时，我丢了大约 5 帧（同一视图上的后续动画非常流畅）。我以为我会在制作动画时尝试使用硬件层，但它不起作用（动画没有区别），使用软件层确实解决了丢帧的问题。

但是，当使用软件层时，我感觉（没有科学测试，可能只是在我的脑海中）动画不如使用硬件层/不使用层（在第一个滞后之后的动画上）那么流畅当然）。

所以我想知道如何解决这个问题/我做错了什么。我可以第一次使用软件层渲染动画并在后续动画中禁用层，但这似乎是一个不好的解决方法。

这是我使用的代码：

```
 final View v = .....;

    v.setLayerType(View.LAYER_TYPE_HARDWARE, null);
    v.buildLayer();

    ValueAnimator anim = ValueAnimator.ofFloat(0, 180);
    anim.setInterpolator(new AccelerateDecelerateInterpolator());
    anim.setDuration(250);
    anim.addUpdateListener(new AnimatorUpdateListener() {

        @Override
        public void onAnimationUpdate(ValueAnimator animation) {
            Float animatedValue = (Float) animation.getAnimatedValue();
            v.setRotation(animatedValue);
        }
    });
    anim.addListener(new AnimatorListenerAdapter() {

        @Override
        public void onAnimationEnd(Animator animation) {
            v.setLayerType(View.LAYER_TYPE_NONE, null);
        }
    });
    anim.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T13:21:53.277

将图层设置为`HARDWARE`实际上应该会大大提高动画的平滑度。如果您在模拟器中测试您的应用程序，请选中虚拟设备设置中的“使用主机 GPU”以从硬件加速中受益。

# c# - 绑定到 DataTemplate 中的 ToString() 方法

> ID：13628994
> 
> 赞同：29
> 
> 时间：2012-11-29T15:23:28.417
> 
> 标签：c#, wpf, xaml, datatemplate

是否有任何简单的方法可以绑定到 DataTemplate 中的 ToString() 方法？我希望 TextBlock 的 Text 属性默认使用 ToString() 作为其 Text 属性，但这不会发生。所以任何简单的方法来做到这一点：

```
<DataTemplate x:Key="myTemplate">
    <TextBlock Text="{Binding ToString()}"/>
<DataTemplate> 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-11-29T16:23:57.037

您可以使用`Text="{Binding}"`. 该`ToString()`方法被隐式调用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-29T15:27:45.227

您可以使用转换器。像这样：

```
public class PropertyValueStringConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        return value.ToString();
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-29T16:42:42.617

不幸的是，您不能将控件绑定到方法，但您可以绕过这样做：

```
public string GetText()
{
    return "I am happy";
}

public string MyText
{
    get { return GetText(); }
} 
```

现在在 XAML 中：

```
<DataTemplate x:Key="myTemplate">
    <TextBlock Text="{Binding MyText}"/>
<DataTemplate> 
```

注意 MyText 属性必须在窗口的上下文中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T16:12:54.960

将特定 ToString() 方法的字符串属性添加到要绑定的对象会更有意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T15:26:07.340

WPF 不支持直接绑定到方法，但您可以使用自定义 IValueConverter、ObjectDataProvider 或[此处](https://stackoverflow.com/questions/502250/bind-to-a-method-in-wpf)描述的任何其他方法。

# javascript - 表单验证 - 电子邮件/电话号码

> ID：13628995
> 
> 赞同：1
> 
> 时间：2012-11-29T15:23:31.223
> 
> 标签：javascript, html, validation

我的验证函数有问题，我只在一个函数中完成了它，我想添加电子邮件验证，例如@和数字 1-9。我该如何添加它？

html:

```
<form onsubmit="return validate();" name="formValidation">
    <label>First Name:</label>
    <input type="text" name="firstName" /><br /><br />
    <label>Last Name:</label>
    <input type="text" name="lastName" /><br /><br />
    <label>E_mail:</label>
    <input type="text" name="Email" /><br /><br />
    <label>Confirm E_mail:</label>
    <input type="text" name="confirmEmail" /><br /><br />
    <label>Address:</label>
    <input type="text" name="Address" /><br /><br />
    <label>Telephone nr:</label>
    <input type="text" name="telephoneNr" /><br /><br />
    <br />
    <p>submit your form: </p><input type="submit" value="Submit" />
</form> 
```

js：

```
function validate(){
    if(document.formValidation.firstName.value == "" ||
    document.formValidation.lastName.value == "" ||
    document.formValidation.Email.value == "" ||
    document.formValidation.confirmEmail.value == "" ||
    document.formValidation.Address.value == "" ||
    document.formValidation.telephoneNr.value == "")
    {
        alert("Please fill all the boxes before submitting!");
        return false;
    } else {
        alert('Your form has been submitted!');
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-29T15:32:04.553

来自[http://www.w3resource.com/javascript/form/email-validation.php](http://www.w3resource.com/javascript/form/email-validation.php)：

此函数将使用 javascript 验证电子邮件：

```
function ValidateEmail(mail)   
{  
 if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(mail))  
  {  
    return (true)  
  }  
    alert("You have entered an invalid email address!")  
    return (false)  
} 
```

要验证电话号码：

```
function validatePhone(phone) {
    var error = "";
    var stripped = phone.replace(/[\(\)\.\-\ ]/g, '');

   if (stripped == "") {
        error = "You didn't enter a phone number.";
    } else if (isNaN(parseInt(stripped))) {
        phone = "";
        error = "The phone number contains illegal characters.";

    } else if (!(stripped.length == 10)) {
        phone = "";
        error = "The phone number is the wrong length. Make sure you included an area code.\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-29T15:28:02.780

您想使用正则表达式。已经有很多问题描述了如何做到这一点：

[https://stackoverflow.com/search?q=javascript+regex+phone+number+e​​mail](https://stackoverflow.com/search?q=javascript+regex+phone+number+email)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T15:35:11.997

我可以给你一个我用过的示例函数。它并不完美，但只需极少的编辑即可在您的环境中快速轻松地设置：

```
function mail_check(){
var email   = document.getElementById(\'email\').value;
var email_check = email.split("@");
if (email_check[1]){var email_check2 = email_check[1].split(".");}
if (!email_check[1] || !email_check2[0] || !email_check2[1]) {
document.getElementById(\'mail_status\').innerHTML = "<font color=red>Invalid Email address!</font>";
return false;}
else if (email_check[1] && email_check2[0] && email_check2[1]) {
document.getElementById(\'mail_status\').innerHTML = "<font color=green>Valid Email address!</font>";
return true;}
} 
```

我想很明显我有一个空的 span 元素，它会通过 OnKeyUp js 事件实时更改（基本上 onkeyup 调用该函数，这会产生系统实时检查的错觉......虽然它确实如此，所以我想这不是错觉之后所有 - 哈！）

希望有帮助。如果您需要进一步的帮助，请告诉我！

干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-29T15:35:22.333

这是一个很常见的任务，你尝试解决它的方式就像 2008 年一样，嘿，快到 2013 年了）

第一次尝试查找[regExp](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)以这种方式解决它。

但是，是的，为什么不使用 HTML5[表单验证](http://caniuse.com/form-validation)和[Modernizir](https://github.com/Modernizr/Modernizr/blob/master/feature-detects/forms-validation.js)来回退旧的/不受支持的浏览器。

您将获得对所有现代浏览器的本机支持，它比 JS 更快，加上编写良好的 js，它将以适当的方式关心它，因为某些原因不支持`form validations`.