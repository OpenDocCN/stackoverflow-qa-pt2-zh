# StackOverflow 问答 13682000-13682999

# postgresql - 将“WITH 查询”的结果放入 PostgreSql 中的新表中

> ID：13682000
> 
> 赞同：3
> 
> 时间：2012-12-03T11:08:39.683
> 
> 标签：postgresql

如何将**（WITH Queries）**的结果放入新表中。

相关代码为：

```
WITH A as (
SELECT ambtemp,dt,
       date_trunc('hour', dt)+
       CASE WHEN date_part('minute', dt) >= 30
            THEN interval '30 minutes'
            ELSE interval '0 minutes'
       END as t
FROM temm),

B as(
SELECT ambtemp,dt,

       max(ambtemp::float(23)) OVER (PARTITION BY t) as max_temp,
       min(ambtemp::float(23)) OVER (PARTITION BY t) as min_temp
FROM A)

SELECT ambtemp,dt     
FROM B
WHERE (max_temp - min_temp) <= 0.2 
```

我需要将结果放入一个新表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T11:16:13.860

只需在 create table 语句中像任何其他选择一样使用它：

```
create table foo 
as
with a as (
  ...
), b as ( 
  ...
)
select ambtemp,dt     
from B
where (max_temp - min_temp) <= 0.2 
```

或者，如果您已经拥有该表，请将其用作插入语句的源：

```
insert into foo (col1, col2)
with a as (
  ...
), b as ( 
  ...
)
select ambtemp,dt     
from B
where (max_temp - min_temp) <= 0.2 
```

# jquery-ui - jquery 1.9.2 对话框自动调整大小

> ID：13682003
> 
> 赞同：1
> 
> 时间：2012-12-03T11:08:49.963
> 
> 标签：jquery-ui, jquery-ui-dialog

我在使我的 jquery 对话框自动调整为内容时遇到问题，我使用的是 jquery ui 1.9.2，并且我正在使用以下设置：

```
{
autoResize: true
close: function (e, ui){
height: "auto"
maxHeight: 600
maxWidth: 800
minHeight: 300
minWidth: 400
modal: true
width: "auto"
} 
```

并且产生的行为是：[http](http://screencast.com/t/1OwLgVHDH) ://screencast.com/t/1OwLgVHDH 所以它只有在我手动拖动调整大小处理程序后才能正确调整大小，

我是否需要手动触发调整大小（我试过这个但我不知道怎么做，我试过 .trigger('resize') 我试过 trigger('resizeStart') 没用）？

并且我尝试使用在传递给对话框函数的对象上看到的自动宽度，但也没有用。

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T14:46:36.103

似乎指定大小选项的顺序显着改变了行为。

例如，我想对两种不同的输入样式使用同一个对话框，一个用于文本输入，一个用于图像输入，一个用于图像输入，但我只能让它像这样正常工作：

```
 "autoResize": true,
            "autoOpen":false,
            "modal":true,
            "width": "auto",
            "height": "auto",
             -->"resizable":false 
```

而这出现了意想不到的问题：

```
 "autoResize": true,
            "autoOpen":false,
            "modal":true,
             -->"resizable":false,
            "width": "auto",
            "height": "auto" 
```

我会尝试使用您的“宽度”设置将您的“高度”：“自动”移动到最后一行。

# gcc - Arduino-usbserial make 失败，错误 1

> ID：13682004
> 
> 赞同：0
> 
> 时间：2012-12-03T11:09:11.623
> 
> 标签：gcc, makefile, arduino

[http://flipmu.com/work/arduinome/instructions/uno-atmega-8u2-serial-number/](http://flipmu.com/work/arduinome/instructions/uno-atmega-8u2-serial-number/)

尝试使用 Windows 完成此操作，我的意图是从我的 Arduino Uno 中的 atmega 8u2 中刷新序列号。我在 Windows 上使用 Atmel Studio 6。

我已根据需要下载了 LUFA 库，按照信函中的步骤进行操作，并从命令行收到此响应：

```
e:\Downloads\LUFA-100807\Projects\arduino-usbserial>make build
The system cannot find the path specified.
The system cannot find the path specified.
ECHO is off.
Compiling C: Arduino-usbserial.c
avr-gcc -c -mmcu=atmega8u2 -I. -gdwarf-2 -DF_CPU=16000000UL  -DF_CLOCK=16000000U
L  -DARDUINO_MODEL_PID=0x0001 -DBOARD=BOARD_USER  -D USB_DEVICE_ONLY -D FIXED_CO
NTROL_ENDPOINT_SIZE=8 -D FIXED_NUM_CONFIGURATIONS=1 -D USE_FLASH_DESCRIPTORS -D
INTERRUPT_CONTROL_ENDPOINT -D DEVICE_STATE_AS_GPIOR=0 -D USE_STATIC_OPTIONS="(US
B_DEVICE_OPT_FULLSPEED | USB_OPT_REG_ENABLED | USB_OPT_AUTO_PLL)" -DAVR_RESET_LI
NE_PORT="PORTD" -DAVR_RESET_LINE_DDR="DDRD" -DAVR_RESET_LINE_MASK="(1 << 7)" -DT
X_RX_LED_PULSE_MS=3 -DPING_PONG_LED_PULSE_MS=100 -Os -funsigned-char -funsigned-
bitfields -ffunction-sections -fno-inline-small-functions -fpack-struct -fshort-
enums -fno-strict-aliasing -Wall -Wstrict-prototypes -Wa,-adhlns=./Arduino-usbse
rial.lst -I../../ -std=gnu99 -Wundef -MMD -MP -MF .dep/Arduino-usbserial.o.d Ard
uino-usbserial.c -o Arduino-usbserial.o
In file included from ../../LUFA/Drivers/USB/HighLevel/../LowLevel/Device.h:60:0
,
                 from ../../LUFA/Drivers/USB/HighLevel/../LowLevel/USBController
.h:73,
                 from ../../LUFA/Drivers/USB/HighLevel/USBTask.h:49,
                 from ../../LUFA/Drivers/USB/USB.h:370,
                 from Descriptors.h:42,
                 from Arduino-usbserial.h:45,
                 from Arduino-usbserial.c:37:
../../LUFA/Drivers/USB/HighLevel/../LowLevel/Endpoint.h: In function 'Endpoint_D
iscard_Byte':
../../LUFA/Drivers/USB/HighLevel/../LowLevel/Endpoint.h:572:13: warning: variabl
e 'Dummy' set but not used [-Wunused-but-set-variable]
../../LUFA/Drivers/USB/HighLevel/../LowLevel/Endpoint.h: In function 'Endpoint_D
iscard_Word':
../../LUFA/Drivers/USB/HighLevel/../LowLevel/Endpoint.h:656:13: warning: variabl
e 'Dummy' set but not used [-Wunused-but-set-variable]
../../LUFA/Drivers/USB/HighLevel/../LowLevel/Endpoint.h: In function 'Endpoint_D
iscard_DWord':
../../LUFA/Drivers/USB/HighLevel/../LowLevel/Endpoint.h:749:13: warning: variabl
e 'Dummy' set but not used [-Wunused-but-set-variable]
Arduino-usbserial.c: At top level:
Arduino-usbserial.c:242:1: fatal error: opening dependency file .dep/Arduino-usb
serial.o.d: No such file or directory
compilation terminated.
make: *** [Arduino-usbserial.o] Error 1 
```

我已经通过谷歌搜索了这个问题的解决方案，但我没有找到任何东西 - 我发现了类似的“错误 1”案例，但通过恢复到我正在使用的 LUFA 版本来修复它们。所以我一点头绪都没有。

非常感谢任何帮助。

更新：

以这种方式得到以下响应：

[http://autosysprogs.blogspot.com.au/2011/05/arduino-uno-upload-new-firmware-to.html](http://autosysprogs.blogspot.com.au/2011/05/arduino-uno-upload-new-firmware-to.html)

```
e:\uno\arduino-usbserial>make all
The system cannot find the path specified.
The system cannot find the path specified.
ECHO is off.
-------- begin --------
avr-gcc (AVR_8_bit_GNU_Toolchain_3.4.0_663) 4.6.2
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

The system cannot find the path specified.
The system cannot find the path specified.
-f was unexpected at this time.
make: *** [sizebefore] Error 255 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:03:04.273

看起来您没有设置适当的 LUFA 构建环境 - 具体来说，您缺少 LUFA 需要的 Bash shell“sh.exe”的 Windows 端口，
[请参阅此](http://fourwalledcubicle.com/files/LUFA/Doc/120730/html/_page__compiling_apps.html#SSec_PreqWindows)

# python - 我的 Dijkstra 算法有什么问题

> ID：13682006
> 
> 赞同：1
> 
> 时间：2012-12-03T11:09:13.573
> 
> 标签：python, implementation, path-finding, dijkstra

它返回值（21、2、0、-1、-1 等），而实际上它应该只返回原点和目标，因为两者之间有一条清晰的路径。我无法理解我做错了什么。注意：代码似乎只是返回最接近原点（寻路对象）的节点，然后是目标 (0)，而不管原点的位置。更新：新代码（现在显示在下面代替其他代码）只是将目标节点作为序列中的下一个返回，而不管该特定路径是否被阻塞。

```
def Dijkstra(NodeDistanceApart, Target):
    #finds the shortest path according to node distances

    #0 - Initializes values for pathfinding
    NodeDistanceFromOrigin = [10000.0] * NUMBEROFNODES
    NodeSolved = [False] * NUMBEROFNODES
    NodeArcSet = [[-1] * NUMBEROFNODES for x in range(NUMBEROFNODES)]
    ClosestNode = 0
    PreviousNode = 0

    #1 - Sets the origin node (the NPC node) and the target node (the player node) values
    NodeSolved[NUMBEROFNODES2] = True
    NodeDistanceFromOrigin[NUMBEROFNODES2] = 0
    NodeArcSet[NUMBEROFNODES2][0] = NUMBEROFNODES2

    #2 - finds the shortest path
    while NodeSolved[0] == False:
        ClosestNode = 0
        for n in range(NUMBEROFNODES):
            if NodeSolved[n] == True:#loops through nodes, if a node is solved, find connected nodes
                for i in range(NUMBEROFNODES):
                    if NodeSolved[i] == False and NodeDistanceApart[n][i] < 10000:#loops through nodes, if a node is solved or unconnected, then ignore it
                        if (NodeDistanceFromOrigin[n] + NodeDistanceApart[n][i]) < NodeDistanceFromOrigin[i]:
                            NodeDistanceFromOrigin[i] = NodeDistanceFromOrigin[n] + NodeDistanceApart[n][i]
                        if NodeDistanceFromOrigin[i] < NodeDistanceFromOrigin[ClosestNode]:
                            ClosestNode = i
                            PreviousNode = n
        NextInArray = -1
        n = 0
        while NextInArray == -1:#finds the next unused index in the array for a nodes arc set
            if NodeArcSet[ClosestNode][n] == -1:
                NextInArray = n
            n = n + 1
        NodeSolved[ClosestNode] = True
        NodeArcSet[ClosestNode] = NodeArcSet[PreviousNode]
        NodeArcSet[ClosestNode][NextInArray] = ClosestNode
    print(NodeArcSet[0])
    return NodeArcSet 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:50:29.997

我没有阅读整个算法，因为实现存在严重错误。

问题是这条线

```
NodeArcSet = [[-1] * NUMBEROFNODES] * NUMBEROFNODES 
```

这将创建指向同一数组 [[-1]*NUMBEROFNODES] 的 NUMBEROFNODES 指针。

```
>>> a=[[0]*2]*2
>>> a
[[0, 0], [0, 0]]
>>> a[0][0]=1
>>> a
[[1, 0], [1, 0]] 
```

我为解决此问题所做的事情类似于

```
NodeArcSet = [[-1] * NUMBEROFNODES for x in xrange(NUMBEROFNODES)] 
                     # In python 3 you should use range instead of xrange. 
```

# windows - Azure Web 平台安装程序 cmdline 无法下载预定义的源

> ID：13682007
> 
> 赞同：0
> 
> 时间：2012-12-03T11:09:15.257
> 
> 标签：windows, powershell, azure, web-platform-installer

[使用今天（2012-12-03）从本页](http://msdn.microsoft.com/en-us/library/windowsazure/gg433092.aspx)链接下载的 WebPICmd ，每当我尝试安装任何软件包时都会收到一些错误消息。

显然它无法下载预定义的 Microsoft 提要（我没有通过 cmdline args 提供任何自定义提要）。谷歌搜索这些消息给我零结果。

这是输出：

```
PS E:\approot\bin\webpicmdline> .\WebpiCmdLine.exe /Products:whatever

The software that you obtain using the Web Platform Installer Command Line Tool is licensed to you by its owner.  Micros
oft grants you no rights for third party software.

Successfully loaded metadata from feed https://www.microsoft.com/web/webpi/3.0/webproductlist.xml
Failed to Load feed: https://www.microsoft.com/web/webpi/3.0/webapplicationlist.xml
More than one product with productId 'DotNetNukePro'
Failed to Load feed: https://www.microsoft.com/web/webpi/3.0/mediaproductlist.xml
An item with the same key has already been added.
Failed to Load feed: https://www.microsoft.com/web/webpi/3.0/toolsproductlist.xml
Failed to resolve OS List with id: 'OSList_VS2010_Shell'
Failed to Load feed: https://www.microsoft.com/web/webpi/3.0/enterpriseproductlist.xml
An item with the same key has already been added. 
```

通过 GUI PI 安装可以正常工作。

我尝试删除所有临时提要 XML 文件，通过 GUI PI 中的按钮删除缓存，似乎没有任何解决问题的方法。

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:46:06.803

GUI 可以工作，因为您可能正在使用 Web Platform Installer 4.0。你下载的命令行工具还是老的3.0版本。

只需使用 4.0 命令行工具，一切都会正常工作。您可以在 Web Platform Installer 安装目录中找到它（它与 GUI 应用程序一起提供）：**C:\Program Files\Microsoft\Web Platform Installer\WebpiCmd.exe**

# ruby - 在嵌套之外向 Nokogiri XML Builder 添加元素

> ID：13682009
> 
> 赞同：3
> 
> 时间：2012-12-03T11:09:19.423
> 
> 标签：ruby, xml, nokogiri

所以我正在尝试构建一个 XML 文件，它必须如何构建的性质意味着我必须在自然嵌套结构之外添加元素。例如：

```
builder = Nokogiri::XML::Builder.new(:encoding => 'UTF-8') do |xml|
  xml.Data {
    xml.Groups do |inner|
      inner.send(:"GroupType", "test")
    end
    # Insert child element into Groups element.
  }
end 
```

我希望 XML 看起来像：

```
<Data>
  <Groups>
    <GroupType>test</GroupType>
    <AnotherNode>13</AnotherNode>
  </Groups>
</Data> 
```

在**第一个代码示例中**`<AnotherNode>`添加我的注释的位置。

 **应该相对简单，但我一生都无法弄清楚。大概我需要能够搜索该块，或者在我形成它然后使用它时引用它？

顺便说一句，我已经接管了一个项目，里面已经有一堆 Nokogiri 的东西，它有如下选择器：

```
xml_file = Nokogiri::XML(xml)

(xml_file/:RootNode).each do |root|
  (root/:SomeItem).each do |si|
    ...
  end
end 
```

..但我在文档中找不到类似的东西？这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T11:50:55.050

仅使用 Nokogiri::XML::Builder，您需要这样做：

```
require 'nokogiri'

builder = Nokogiri::XML::Builder.new(:encoding => 'UTF-8') do |xml|
  xml.Data {
    xml.Groups {
      xml.GroupType "test"
      xml.AnotherNode "13"
    }
  }
end

puts builder.to_xml
Which outputs:

=> <?xml version="1.0" encoding="UTF-8"?>
   <Data>
     <Groups>
       <GroupType>test</GroupType>
       <AnotherNode>13</AnotherNode>
     </Groups>
   </Data> 
```

Builder 是一种 DSL，其设计目的是为了方便，具有有限的功能集。如果您不想以“Builder-way”的方式进行操作，您可以使用“old-school”并采用现有的 XML 节点，并在其基础上进行构建：

```
require 'nokogiri'

builder = Nokogiri::XML::Builder.new(:encoding => 'UTF-8') do |xml|
  xml.Data {
    xml.Groups {
      xml.GroupType "test"
    }
  }
end 
```

这在 Builder 对象中创建了所需的基本 XML。将其渲染为 XML 并将其重新解析为 Nokogiri::XML::Document，然后对其进行处理：

```
doc = Nokogiri::XML(builder.to_xml)
doc.at('GroupType').add_next_sibling("<AnotherNode>13</AnotherNode>")
puts doc.to_xml

=> <?xml version="1.0" encoding="UTF-8"?>
   <Data>
     <Groups>
       <GroupType>test</GroupType><AnotherNode>13</AnotherNode>
     </Groups>
   </Data>

doc = Nokogiri::XML(builder.to_xml)
doc.at('Groups').add_child("<AnotherNode>13</AnotherNode>")
puts doc.to_xml

=> <?xml version="1.0" encoding="UTF-8"?>
   <Data>
     <Groups>
       <GroupType>test</GroupType>
     <AnotherNode>13</AnotherNode></Groups>
   </Data> 
```

上述两种方式中的任何一种都在语法上呈现相同的事物，它们只是在外观上有所不同。

您甚至可以通过以下方式变得复杂和时髦：

```
builder = Nokogiri::XML::Builder.with(
  Nokogiri::XML(
    builder.to_xml
  ).at('Groups') << "<AnotherNode>13</AnotherNode>"
)
puts builder.to_xml

=> <?xml version="1.0" encoding="UTF-8"?>
   <Data>
     <Groups>
       <GroupType>test</GroupType>
     <AnotherNode>13</AnotherNode></Groups>
   </Data> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-03-23T19:59:49.870

在事实发生两年后遇到了这个问题，并认为接受的答案比它需要的要复杂得多。

问题是，您在这里构建一个 XML 片段，而默认情况下 Nokogiri 的构建器假定您正在构建一个完整的文档。XML 文档只有一个根节点。

一种选择是按如下方式构建完整的文档，然后获取根的孩子：

```
<DISPOSABLE_OUTER_NODE>
  <Data>
    <Groups>
      <GroupType>test</GroupType>
     </Groups>
  </Data>
  <AnotherNode>13</AnotherNode>
</DISPOSABLE_OUTER_NODE> 
```

但是有一种更好的“碎片化”方式。您构建一个空片段，然后让构建器处理它而不是一个新文档：

```
frag = Nokogiri::XML::DocumentFragment.parse("")

Nokogiri::XML::Builder.with( frag ){ |b|
  b.Data do
    b.Groups do
      b.GroupType "test"
    end
  end

  b.AnotherNode "13"
}

puts frag.to_xml 
```

然后将其粘贴到您正在修改的任何文档中。

也许`with`是 Nokogiri 的后来者。但这是解决我遇到的问题的优雅方法，所以我认为它属于这里。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T15:56:00.933

我有同样的问题。

我猜以下代码可以满足您的需求（或多或少）。

```
builder = Nokogiri::XML::Builder.new(:encoding => 'UTF-8') do |xml|
  xml.Data {
    p = nil
    xml.Groups do |inner|
      inner.send(:"GroupType", "test") do |n|
        p = n.parent
      end
    end
    # Insert child element into Groups element.
    xb = Nokogiri::XML::Builder.new({}, p)
    xb.someOtherChild
  }
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-06T00:10:05.060

我想做类似的事情，但在我的情况下，在创建初始“构建器”对象之后添加了额外的 XML 节点。基于“碎片化”答案，我发现 Builder 对象有一个 doc 属性，允许通过 Builder.with() 直接访问 XML 中的任何节点。下面的解决方案将允许传递“构建器”对象，以便函数/对象根据需要添加 XML 数据。

```
builder = Nokogiri::XML::Builder.new(:encoding => 'UTF-8') do |xml|
  xml.Data {
    xml.Groups do |inner|
      inner.send(:"GroupType", "test")
    end  
  }
end
Nokogiri::XML::Builder.with(builder.doc.at('Data/Groups')) do |xml|
  xml.AnotherNode_ 13
end 
```**

# ruby-on-rails - 从 VB.NET Web 应用程序到 ROR 网站的 SSO

> ID：13682011
> 
> 赞同：1
> 
> 时间：2012-12-03T11:09:32.713
> 
> 标签：ruby-on-rails, vb.net, single-sign-on

我支持一个基于 ruby​​ on rails 的网站。现在在 VB.NET 上还有另一个 Web 应用程序，其中将提供一个链接，将登录到 VB.NET Web 应用程序的 ROR 网站的经过身份验证的用户无缝引导到 ROR 网站的主页。

```
That is,I need to implement SSO between VB.NET and ROR. USER'S EMAIL ID  to be used as the authentication parameter in this. 
```

我只知道有关 VB.NET 和 ROR 的基础知识，所以我对此一无所知。ROR 网站使用 mysql 数据库和 mongrel 服务器。

我在 Google 上搜索并找到了一些关于 OAuth、OpenID 和 RubyCAS 的主题，但无法理解如何实现它们以满足我的需求（如果有的话）。

任何帮助将不胜感激。

# c# - 列表中数值对象的条件求和

> ID：13682014
> 
> 赞同：-1
> 
> 时间：2012-12-03T11:09:43.283
> 
> 标签：c#, list, subtotal

我有一个数据集，我通过以下方式输出到列表中：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Text;
using System.Text.RegularExpressions;
using System.Linq;

using System;
using System.Collections.Generic;
using System.IO;
using System.Text;
using System.Text.RegularExpressions;

class Program
{
    static void Main(string[] args)
    {
        List<object> myList = new List<object>();

    int i = 1;
    using (StreamReader reader = new StreamReader("file.dat"))
    {
        string line;
        var locations = new Dictionary<string, int[]>() {
            {"210", new [] {405, 4, 128, 12, 141, 12, 247, 15, 121, 3}}, 
            {"310", new [] {321, 4, 112, 12, 125, 12, 230, 15, 105, 3}}, 
            {"410", new [] {477, 4, 112, 12, 125, 12, 360, 15, 105, 3}} 
        };

        while ((line = reader.ReadLine()) != null)
        {

            var lineStart = line.Substring(0, 3);

            if (lineStart == "210" || lineStart == "310" || lineStart == "410")
            {
                var currentLocations = locations[lineStart];
                var letters = line.Substring(currentLocations[0], currentLocations[1]);

                var tvolume =
                    int.Parse(line.Substring(currentLocations[2], currentLocations[3])) +
                    int.Parse(line.Substring(currentLocations[4], currentLocations[5]));

                var tprice = long.Parse(line.Substring(currentLocations[6], currentLocations[7]));
                var mvolume = tprice * tvolume * 0.01 * 0.0000001;
                var currency = line.Substring(currentLocations[8], currentLocations[9]);

                myList.Add(i);
                myList.Add(lineStart);
                myList.Add(letters);
                myList.Add(tvolume);
                myList.Add(tprice);
                myList.Add(mvolume);
                myList.Add(currency);

                // double total = myList.

                Console.WriteLine(i);
                Console.WriteLine(lineStart);
                Console.WriteLine(letters);
                Console.WriteLine(tvolume * 0.01);
                Console.WriteLine(tprice * 0.0000001);
                Console.WriteLine("{0:N}", mvolume);
                Console.WriteLine(currency + "\n");
                i = i + 1;
            }

        }
        int index = 0;
        Dictionary<string, int> tvolumeDictionary = new Dictionary<string, int>();
        Dictionary<string, long> mvolumeDictionary = new Dictionary<string, long>();
        string listLetters;

        foreach (object item in myList)
        {
            switch (index % 7)
            {
                case 2:
                    listLetters = item.ToString();
                    if (!tvolumeDictionary.Keys.Contains(listLetters))
                    {
                        tvolumeDictionary.Add(listLetters, 0);
                        mvolumeDictionary.Add(listLetters, 0);
                    }
                    break;
                case 3:
                    listLetters = myList[index - 1].ToString();
                    tvolumeDictionary[listLetters] = tvolumeDictionary[listLetters] + (int)item;
                    break;
                case 5:
                    listLetters = myList[index - 3].ToString();
                    mvolumeDictionary[listLetters] = mvolumeDictionary[listLetters] + long.Parse(item.ToString());
                    break;
            }
            index++;
        }

                //   Console.WriteLine(myList.Count);

        foreach (KeyValuePair<string, int> entry in tvolumeDictionary)
        {
            Console.WriteLine("{0} tvolume: {1} mVolume: {2}", entry.Key, entry.Value, mvolumeDictionary[entry.Key]);
        }

    }
} 
```

}

File.dat 有数千行，其中将返回数百行。我希望为每个“字母”提供数字总数的细分（字母中只有大约 4 个类别）。AAAA、BBBB、CCCC 和 DDDD。如果这是 excel，我希望它对字母列中的每个更改执行小计功能，但这里的问题是它们不按顺序排列。

所需的输出是

```
 AAAA: TOTAL TVOLUME: TOTAL MVOLUME 
 BBBB: TOTAL TVOLUME: TOTAL MVOLUME
 CCCC: TOTAL TVOLUME: TOTAL MVOLUME
 DDDD: TOTAL TVOLUME: TOTAL MVOLUME 
```

（*上述格式不是必需的*）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:02:08.920

[编辑] 上一个答案已被版主删除，我无法取消删除，所以我在另一个答案下发布。在处理提取的数据时，您似乎希望拥有更大的灵活性，我强烈建议您使用自定义类和 Linq，而不是包含自定义类对象的列表：

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Text;
using System.Text.RegularExpressions;
using System.Linq;

class Program
{
    public class EntryLine
    {
        public int I { get; set; }
        public string LineStart { get; set; }
        public string Letters { get; set; }
        public int TVolume { get; set; }
        public long TPrice { get; set; }
        public double MVolume { get; set; }
        public string Currency { get; set; }

    }

    static void Main(string[] args)
    {
        List<EntryLine> myList = new List<EntryLine>();
        int i = 1;
        using (StreamReader reader = new StreamReader("file.dat"))
        {
            string line;
            var locations = new Dictionary<string, int[]>() {
            {"210", new [] {405, 4, 128, 12, 141, 12, 247, 15, 121, 3}}, 
            {"310", new [] {321, 4, 112, 12, 125, 12, 230, 15, 105, 3}}, 
            {"410", new [] {477, 4, 112, 12, 125, 12, 360, 15, 105, 3}} 
        };

            while ((line = reader.ReadLine()) != null)
            {
                var lineStart = line.Substring(0, 3);

                if (lineStart == "210" || lineStart == "310" || lineStart == "410")
                {
                    var currentLocations = locations[lineStart];
                    var letters = line.Substring(currentLocations[0], currentLocations[1]);

                    var tvolume =
                        int.Parse(line.Substring(currentLocations[2], currentLocations[3])) +
                        int.Parse(line.Substring(currentLocations[4], currentLocations[5]));

                    var tprice = long.Parse(line.Substring(currentLocations[6], currentLocations[7]));
                    var mvolume = tprice * tvolume * 0.01 * 0.0000001;
                    var currency = line.Substring(currentLocations[8], currentLocations[9]);

                    myList.Add(new EntryLine()
                    {
                        I = i,
                        LineStart = lineStart,
                        Letters = letters,
                        TVolume = tvolume,
                        TPrice = tprice,
                        MVolume = mvolume,
                        Currency = currency
                    });
                    i = i + 1;
                }
            }

            var x = myList.GroupBy(g => new { g.Letters, g.Currency })
                .Select(a => new { a.Key.Letters, a.Key.Currency, TSum = a.Sum(s => s.TVolume), MSum = a.Sum(s => s.MVolume) });

            foreach (var item in x)
            {
                Console.WriteLine("{0} currency: {1} tvolume: {2} mVolume: {3}", item.Letters, item.Currency, item.TSum, item.MSum);
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:23:59.540

你需要打破你的显示循环。

尝试添加

```
If (i > 3) break; // Exit while loop 
```

到`i`计数器递增后的行（`i= i+1;`行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:34:10.340

您可以使用 a`Dictionary<string, long>`来跟踪总数。您可以添加值为 0 的所有已知键，也可以在添加值之前检查字典是否包含值。像这样的东西：

```
Dictionary<string, long> values;
long value = code to get the value;
string key = code to get the key;
if(values.ContainsKey(key))
    values[key] += value;
else
    values[key] = value; 
```

# node.js - Node.js Mongoose 更新嵌入式文档，拉取不持久

> ID：13682017
> 
> 赞同：2
> 
> 时间：2012-12-03T11:10:04.990
> 
> 标签：node.js, mongodb, mongoose

我正在使用猫鼬 3.4.0 和 MongoDB 2.0.6。

我有以下架构：

var Database = module.exports = function Database(){};

```
Database.prototype = {

  _model : {},
  _schema: {
     Comment : new Schema ({
  _id : ObjectId,
  comment : { type : String },
  date : { type : Date, default : Date.now },
  userId : { type : Schema.ObjectId, ref : 'User' },
  nickname : { type : String },
  profileLinkAn : { type : String },
  profileLinkIos : { type : String }
}),

Game : new Schema ({
  roomName : { type : String },
  openTime : { type : Date },
  closeTime : { type : Date, index : true },
  minPlayers : { type : Number },
  maxPlayers : { type : Number},
  numberOfPlayers : { type : Number, default : 0 },
  winner : { userId : { type : Schema.ObjectId, ref : 'User'} },
  runrUp : { userId : { type : Schema.ObjectId, ref : 'User' } },
  semiFn : [ { type : Schema.ObjectId, ref : 'User'} ],
  qtrFn : [ { type : Schema.ObjectId, ref : 'User' } ],
  rnd16 : [ { type : Schema.ObjectId, ref : 'User' } ],
  rnd32 : [ { type : Schema.ObjectId, ref : 'User' } ],
  prize : [ this.Prize ],
  tag : [ { type : String, index : true } ],
  status : { type : Number, index : true },
  businessType : { type : Number },
  mallId : { type : Schema.ObjectId, ref : 'Mall', index : true },
  registeredPlayers : [ { type : ObjectId, ref : 'User' } ],
  thumbnailImage : [ this.PrizeDetailImage ],
  gamePrice : { type : Number },
  slotPrice : { type : Number },
  comment : [ this.Comment ],
  commentCnt : { type : Number, default : 0 },
  wantUid : [ { type : Schema.ObjectId, ref : 'User' } ],
  wantCnt : { type : Number, default : 0 }
    })
 },

 connect : function(url) {

    mongoose.connect(url);
    this._model.Comment = mongoose.model('Comment',this._schema.Comment);

    this._model.Game = mongoose.model('Game', this._schema.Game);
},

model : function(model) {
    switch (model) {
        case 'Comment':
            return this._model.Comment;
        case 'Game':
            return this._model.Game;
    }
}

} 
```

以上来自 Database.js。下面是我的快递应用程序的代码。为简洁起见，我省略了一些代码。我遇到的问题似乎与查询有关。

```
var Game = this.db.model('Game');
Game.update({ _id : req.body._id }, { $pull : { comment : { _id : req.body.commentId } }               }, function (err,numAffected,raw) {
if(err)
{
      res.json({ data : { success : false } });
}
else
{
    console.log(raw);
    res.json({ data : { success : true } });
}
}); 
```

我没有收到错误消息，Mongo 的原始输出是：

```
{ updatedExisting: true,
  n: 1,
  connectionId: 78912,
  err: null,
  ok: 1 } 
```

但是当我查看我收藏的内容时，子文档仍然存在。我曾尝试使用本机驱动程序，但没有运气。我在架构中做错了吗？提前感谢您花时间查看此内容。

/肯利

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T05:37:34.800

好的，维克多在猫鼬谷歌小组中向我指出了这一点，所以对他表示敬意。事实证明，猫鼬没有自动将 ObjectId 转换为 ObjectId。这是查询现在的样子：

```
Game.update({ _id : req.body._id }, { $pull : { comment :  { _id : this.db.objectId(req.body.commentId) } } }, function (err,numAffected,raw) {
                if(err)
                {
                    console.log(err);
                    res.json({ data : { success : false } });
                }
                else
                {
                    console.log(raw);
                    res.json({ data : { success : true } });
                }
            }); 
```

如果有人想知道我将此添加到我的数据库原型中，以便我可以在任何地方访问 ObjectId 类型。

```
Database.prototype = {

objectId : mongoose.Types.ObjectId,
} 
```

希望这可以帮助遇到类似问题的其他人。

# php - jquery中的php

> ID：13682019
> 
> 赞同：-4
> 
> 时间：2012-12-03T11:10:07.287
> 
> 标签：php, jquery

我在 jQuery 中建立了一个倒计时，所以倒计时将从 5 减到 0，当它达到 0 时会显示警报。现在我想显示一个动态图像而不是那个警报。

所以这是我的计时器/jQuery代码

```
<script>
window.onload = function(){
    (function(){
            var counter = 5;    
            setInterval(function() {
                counter--;
                if (counter >= 0) {
                    span = document.getElementById("count");
                    span.innerHTML = counter;
                }
                // Display 'counter' wherever you want to display it.
                if (counter === 0) {
                    alert('this is where it happens');
                    clearInterval(counter);
                }
            }, 1000);
        })();
}
</script> 
```

所以现在我需要它显示的不是警报：

```
<div style="float: right; display: inline-block; margin: 6px;">
    <div class="skip_btn">
        <a href="<?php echo $long_url2 ;?> ">SKIP AD &gt;&gt;</a>
    </div>
</div>
<div style="clear:both;"></div> 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:17:52.383

像这样的工作吗？

```
<script>
window.onload = function(){

(function(){
  var counter = 5;

  setInterval(function() {
    counter--;
    if (counter >= 0) {
      span = document.getElementById("count");
      span.innerHTML = counter;
    }
    // Display 'counter' wherever you want to display it.
    if (counter === 0) {

        alert('this is where it happens');
        document.getElementById( "response" ).innerHTML = "<div style=\"float: right; display: inline-block; margin: 6px;\"><div class=\"skip_btn\"><a href=\"PHP?\">SKIP AD &gt;&gt;</a></div></div><div style=\"clear:both;\"></div>";
        clearInterval(counter);
    }

  }, 1000);

})();

}
</script>
<div id="count"></div>
<div id="response"></div> 
```

它显示在响应元素中。我从链接中删除了你的 php 代码，因为我不知道它来自哪里，但你仍然可以像这样使用它

```
document.getElementById( "response" ).innerHTML = "<div style=\"float: right; display: inline-block; margin: 6px;\"><div class=\"skip_btn\"><a href=\"<?php echo $url;?>\">SKIP AD &gt;&gt;</a></div></div><div style=\"clear:both;\"></div>"; 
```

# java - netbeans web 服务宁静的 uri

> ID：13682020
> 
> 赞同：0
> 
> 时间：2012-12-03T11:10:14.493
> 
> 标签：java, web-services, rest, netbeans, entities

我有一个小而简单的数据库，我想创建一些 Web 服务来理解 netbeans 向导。

我有一个三表：

*   **地区**(1:n)**省**(1:n)**公社**

当我得到

```
http://myhost/webservices/regione 
```

我有这样的回应：

```
<?xml version="1.0" encoding="UTF-8"?> 
   <regiones> 
       <regione> 
           <id>1</id> 
           <nome>Piemonte</nome> 
           <ripartizioneGeografica>NORD OCCIDENTALE</ripartizioneGeografica> 
       </regione> 
       <regione> 
           <id>2</id> 
           <nome>Valle d'Aosta</nome> 
           <ripartizioneGeografica>NORD OCCIDENTALE</ripartizioneGeografica> 
       </regione> 
       ........
   </regiones> 
```

但是我在 Regione 中没有看到任何与“provincia”实体相关的条目。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:58:28.213

```
http://myhost/webservices/regione 
```

索要所有地区的清单。provincias 是一个地区的更详细信息，将被要求

```
http://myhost/webservices/regione/1

<?xml version="1.0" encoding="UTF-8"?> 
  <regione> 
    <id>1</id> 
    <nome>Piemonte</nome> 
    <ripartizioneGeografica>NORD OCCIDENTALE</ripartizioneGeografica>
    <provincias>
      <provincia>
         ...
      </provincia>
        ...
    </provincias>
  </regione> 
```

测试项目生成的xml

```
<regionss uri="http://localhost:8080/WebApplication2/resources/regionss">
  <regions uri="http://localhost:8080/WebApplication2/resources/regionss/1/">
     <id>1</id>
     <name>Region 1</name>
     <provincesCollection  uri="http://localhost:8080/WebApplication2/resources/regionss/1/provincesCollection/">
         <provinces uri="http://localhost:8080/WebApplication2/resources/regionss/1/provincesCollection/1/"/>
         <provinces uri="http://localhost:8080/WebApplication2/resources/regionss/1/provincesCollection/2/"/>
     </provincesCollection>
   </regions>
   <regions uri="http://localhost:8080/WebApplication2/resources/regionss/2/">
       <id>2</id>
       <name>Region 2</name>
       <provincesCollection uri="http://localhost:8080/WebApplication2/resources/regionss/2/provincesCollection/">
            <provinces uri="http://localhost:8080/WebApplication2/resources/regionss/2/provincesCollection/3/"/>
       </provincesCollection>
    </regions>
    <regions uri="http://localhost:8080/WebApplication2/resources/regionss/3/">
         <id>3</id>
         <name>Region 3</name>
         <provincesCollection uri="http://localhost:8080/WebApplication2/resources/regionss/3/provincesCollection/">
              <provinces uri="http://localhost:8080/WebApplication2/resources/regionss/3/provincesCollection/4/"/>
              <provinces uri="http://localhost:8080/WebApplication2/resources/regionss/3/provincesCollection/5/"/>
              <provinces uri="http://localhost:8080/WebApplication2/resources/regionss/3/provincesCollection/6/"/>
          </provincesCollection>
     </regions>
</regionss> 
```

# python - Django 多对多查询关系实体

> ID：13682021
> 
> 赞同：2
> 
> 时间：2012-12-03T11:10:15.547
> 
> 标签：python, django, many-to-many, querying

我有以下实体：

1.  视频
2.  标签
3.  关系实体 - VideoTags

这是架构：

```
class Tag(models.Model):
    id = models.AutoField(primary_key=True)
    name = models.CharField(max_length=100, unique=True)
    class Meta:
        db_table = u'tags'

class Video(models.Model):
    guid = models.CharField(max_length=36, primary_key=True)
    title = models.CharField(max_length=600)
    tags = models.ManyToManyField(Tag, through='VideoTag')
    class Meta:
        db_table = u'videos'

class VideoTag(models.Model):
    guid = models.CharField(max_length=36, primary_key=True)
    tag = models.ForeignKey(Tag)
    video = models.ForeignKey(Video)
    weight = models.FloatField()
    class Meta:
        db_table = u'video_tags' 
```

现在，这一切在创建实体时运行良好。现在说我想按其 ID 提取视频并遍历其标签。

当我做：

```
video = Video.objects.get(pk=1)
tags = video.tags.all() 
```

事实上，我得到了一个标签实体列表，因为它们与视频相关，而不是关系实体 VideoTag。我想访问视频的标签，更重要的是关系表上的额外字段之一 - 权重。我不能这样做，因为视频上的标签属性是标签类型。

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:52:21.553

在[Django 文档](https://docs.djangoproject.com/en/1.4/topics/db/models/#many-to-many-relationships)中说

> 如果您需要访问会员信息，您可以通过直接查询 Membership 模型来实现：

它还说

> 访问相同信息的另一种方法是从 Person 对象查询多对多反向关系：

所以你必须选择，比如：

```
VideoTag.objects.filter(video=video).order_by('weight') 
```

或者可能

```
Tag.videotag_set.all().order_by('weight') 
```

# c++ - 继承和映射c ++

> ID：13682026
> 
> 赞同：-1
> 
> 时间：2012-12-03T11:10:51.073
> 
> 标签：c++, multiple-inheritance

我正在尝试在 C++ 中进行多重继承：

```
class Element{
public:
    Element(): common_variable(0) {}
    int common_variable;
};

class Number:public Element, public Setupable{
public:
Number() {}
    vector<Digit> digit_vector;
};
class MultiLed:public Element, public Setupable{
public:
MultiLed() {}
    vector<Led> led_vector;
}; 
```

对象 Element 从未实例化，但我使用它来避免 Multiled 和 Number 中的代码重复。

有一个包含 Number : 的地图，`map<string,Number> mNumbers`我希望在第一次使用时创建它：

```
mNumbers["blabla"].digit_vector.push_back(digit); 
```

但这不起作用。对 Element、Setupable 和 Number 的构造函数的调用已正确完成。但是程序在“push_back”调用时停止，说：

```
undefined symbol: _ZN14AcElementD2Ev 
```

有人可以帮我弄这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:33:40.607

你这里有两个问题

1.  访问限制：`class`默认情况下所有成员都是私有的
2.  您的构造函数未定义，仅声明

补丁代码：

```
class Element{
public:
    Element(){
        common_variable = 0;
    }
    int common_variable;
};

class Number:public Element, public Setupable{
public:
Number() {}
    vector<Digit> digit_vector;
};
class MultiLed:public Element, public Setupable{
public:
MultiLed() {}
    vector<Led> led_vector;
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:25:54.240

digit_vector 是私有的，您正试图在其类之外访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:36:33.260

只是你忘记设置公共方法和变量

```
class Number:public Element, public Setupable 
{
 public:
    Number(): Element(), Setupable() {}
    vector<Digit> digit_vector;
}; 
```

顺便说一句，拥有一个成员变量 public 并不总是好主意，您应该提供一个返回 digit_vector 的方法

```
//the method is provided in 2 soups, and there are reson for that
//even if you can omitt the "const" version, is better you keep both
const vector<Digit> & getDigits() const { return digit_vector; }
vector<Digit> & getDigits() { return digit_vector; } 
```

或者如果你的类必须只是一个“数据容器”，让它成为一个结构

```
struct Number:public Element, public Setupable 
{
    //default construsctors of Element and Setupable are still called!
    //if not providing a default constructor, the compiler will create one
    //automatically calling all default constructor (including the vector's
    //one. Also digit_vector is constructed.

    vector<Digit> digit_vector;
}; 
```

struct 与 class 相同，唯一的区别是默认情况下成员都是公共的，因此您不必指定“public:”。一个好的风格是只使用类（你必须记住必须是公共的还是私有的），并且只使用结构，你有一个几乎没有行为/逻辑的数据容器。

所以写：

```
class Number:public Element, public Setupable 
{
    //default construsctors of Element and Setupable are still called!
    //if not providing a default constructor, the compiler will create one
    //automatically calling all default constructor (including the vector's
    //one. Also digit_vector is constructed.

 public:
    vector<Digit> digit_vector;
}; 
```

也是有效的。但通常你不希望隐式调用构造函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T12:02:54.590

由于您没有发布所有代码，我不得不猜测您的代码中的情况。当您更新问题时，我会更新我的答案。很可能，您在 Element 中声明了一个静态成员，名称可能是`D2Ev`，但您忘记为其提供定义。

定义基类时，别忘了声明虚拟析构函数。

```
class Element{
public:
    Element():common_variable(0) {
    }
    virtual ~Element(){
    }
    int common_variable;
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T10:06:11.823

我忘了实现析构函数 ~Element(){} 现在它可以工作了......

对不起大家这个愚蠢的错误。

无论如何谢谢！

# android - Robotium - 检测从屏幕上绘制的物体

> ID：13682032
> 
> 赞同：1
> 
> 时间：2012-12-03T11:10:58.580
> 
> 标签：android, robotium

因此，我上周对我的 Android 应用程序进行了更改，无意中将一些按钮绘制到了屏幕外。

我可以在 Eclipse 中看到屏幕外的对象，并且没有引发任何错误，但是当应用程序运行时，按钮不可见（屏幕外）。

只是想知道 Robotium 会抓住这个还是按钮仍然是“可按下的”。

我的问题是，鉴于上述情况，我运行 Robotium 测试以选择一个不再在屏幕内绘制/可见的按钮。Robotium 是否仍然能够选择按钮并通过测试，还是会因为按钮不再出现在屏幕上而失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:38:41.783

**能见度**

可见性选项通过如下所示的代码段进行断言。请注意，getVisibility 将返回一个从 0=VISIBLE 到 8=GONE 的整数，其中 4=INVISIBLE。更多信息请参阅[Android API Javadoc for View](http://developer.android.com/reference/android/view/View.html#getVisibility%28%29)。

```
int expectedValue = 0; // 0=VISIBLE, 4=INVISIBLE, 8=GONE
assertEquals("Message when assert failed", expectedValue, 
    solo.getView(your.project.package.R.id.someViewId).getVisibility()); 
```

**屏幕位置**

可见性并不总是足以检查屏幕上是否可见某些内容。在从屏幕上绘制或具有负宽度时可以看到某些东西。要验证您是否可以使用[getLocationOnScreen() 方法](http://developer.android.com/reference/android/view/View.html#getLocationOnScreen%28int%5B%5D%29)。它将返回屏幕上视图的 x 和 y 坐标（按此顺序）。一个例子：

```
int] location = new int[2]; // this will hold the x and y position
// retrieve coordinates
solo.getView(your.project.package.R.id.someViewId).getLocationOnScreen(location);
// and check if possitive or whatever fits your needs
assertTrue("Message when assert failed", location[0] >= 0 && location[1] >= 0); 
```

这应该可以正确检测到您的屏幕外按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:44:08.760

如果您尝试单击屏幕上未绘制/不可见的按钮，Robotium 将使测试用例失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T13:17:21.640

据我所知，如果按钮被绘制，即使它们不可见，您也可以按下它们。例如，您可以在只有某些部分可见的可滚动视图中按下按钮。对于robotium，重要的是可以在当前活动的视图中找到您想要单击的按钮（它以某种方式在内部遍历视图并在其所有子小部件中搜索小部件）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T15:31:37.477

Robotium 可以按下屏幕上的按钮，但取决于您搜索按钮的方式，它可能会或可能不会找到它。令人困惑对吗？

Robotium 内部有时会在返回视图之前检查它们的可见性，例如当您要求所有按钮时，但如果您使用不同的技术或 findById() 那么它实际上不会执行相同的检查。但是，您可以只使用 robotsium 内部的可见性检查来验证它是否可见！

# mobile - 如果从移动站点访问，则通知下载本机应用程序

> ID：13682033
> 
> 赞同：1
> 
> 时间：2012-12-03T11:10:58.597
> 
> 标签：mobile, twitter, download, notifications, native

我现在正在为黑莓、Android 和 iOS 创建本机应用程序。我也有一个共享相同功能的移动网站。

现在我希望每次用户使用特定设备（如 android 或 blackberry）访问移动网站时，它都会通知下载应用程序（重定向到 bb app world 或 google play store）。我在这里的参考就像 twitter 移动网站，当您从黑莓访问它时，它会向您显示通知（带有下载链接和“x”按钮，如下图所示）。现在我正在考虑使用 javascript 检测，可以吗？

谢谢。

![黑莓的示例通知](../Images/189a9187900293d0df43c94387a41311.png)

*我的意思是那个小块“新！下载推特......”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T14:23:28.550

从另一个帖子：

```

      if( /Android|iPhone|BlackBerry/i.test(navigator.userAgent) ) {
      var url=confirm("您要下载我们的移动应用吗？");
        如果（网址==真）
      {
        var url = window.location.href = 'http://www.google.com';
        url.show();
      }
        别的
      {

      }
      }

```

# javascript - DateTime 格式 正则表达式 YYYY/MM/DD hh:mm:ss

> ID：13682041
> 
> 赞同：0
> 
> 时间：2012-12-03T11:11:40.020
> 
> 标签：javascript, regex, datetime

有人可以写一个正则表达式来测试这种日期格式`2012/11/14 14:28:12`吗？

我已经有了日期部分的正则表达式：

```
/^\d{4}\/\d{2}\/\d{2}$/ 
```

我怎样才能添加到这个来测试时间的存在？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T11:21:41.383

我会改用`Date`构造函数来测试该格式的日期：

```
var isValid = !!new Date('2012/11/14 14:28:12').getTime(); 
```

演示：http: [//jsfiddle.net/rwCeA/](http://jsfiddle.net/rwCeA/)

适用于我所有的测试浏览器（safari/chrome/firefox/ie7+）。Date 构造函数采用许多日期变体，但您可以将其与正则表达式组合以强制使用某种格式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-03T11:18:11.307

我最近写的这个小提琴[http://jsfiddle.net/jstoolsmith/Db3JM/](http://jsfiddle.net/jstoolsmith/Db3JM/)是一段比较复杂的代码，相关的正则表达式是：

```
/(?:(\d{4})([\-\/.])([0-3]?\d)\2([0-3]?\d)|([0-3]?\d)([\-\/.])([0-3]?\d)\6(\d{4}))(?:\s+([012]?\d)([:hap])([0-5]\d))?/i 
```

# python - 从列中的字符串中删除不需要的部分

> ID：13682044
> 
> 赞同：191
> 
> 时间：2012-12-03T11:11:56.090
> 
> 标签：python, string, pandas, dataframe

我正在寻找一种有效的方法来从 DataFrame 列中的字符串中删除不需要的部分。

数据如下：

```
 time    result
1    09:00   +52A
2    10:00   +62B
3    11:00   +44a
4    12:00   +30b
5    13:00   -110a 
```

我需要将这些数据修剪为：

```
 time    result
1    09:00   52
2    10:00   62
3    11:00   44
4    12:00   30
5    13:00   110 
```

我试过了`.str.lstrip('+-')`。`str.rstrip('aAbBcC')`，但出现错误：

```
TypeError: wrapper() takes exactly 1 argument (2 given) 
```

任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：237
> 
> 时间：2012-12-03T11:33:51.673

```
data['result'] = data['result'].map(lambda x: x.lstrip('+-').rstrip('aAbBcC')) 
```

* * *

## 回答 #2

> 赞同：190
> 
> 时间：2019-01-22T06:34:54.297

> ## 如何从列中的字符串中删除不需要的部分？

在最初的问题发布 6 年后，pandas 现在拥有大量“矢量化”字符串函数，可以简洁地执行这些字符串操作操作。

这个答案将探索其中一些字符串函数，提出更快的替代方案，并在最后进行时间比较。

* * *

### **[`.str.replace`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.replace.html)**

指定要匹配的子字符串/模式，以及要替换它的子字符串。

```
pd.__version__
# '0.24.1'

df    
    time result
1  09:00   +52A
2  10:00   +62B
3  11:00   +44a
4  12:00   +30b
5  13:00  -110a 
```

```
df['result'] = df['result'].str.replace(r'\D', '')
df

    time result
1  09:00     52
2  10:00     62
3  11:00     44
4  12:00     30
5  13:00    110 
```

如果需要将结果转换为整数，可以使用[`Series.astype`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.astype.html),

```
df['result'] = df['result'].str.replace(r'\D', '').astype(int)

df.dtypes
time      object
result     int64
dtype: object 
```

如果您不想`df`就地修改，请使用[`DataFrame.assign`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.assign.html)：

```
df2 = df.assign(result=df['result'].str.replace(r'\D', ''))
df
# Unchanged 
```

* * *

### **[`.str.extract`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.extract.html)**

用于提取要保留的子字符串。

```
df['result'] = df['result'].str.extract(r'(\d+)', expand=False)
df

    time result
1  09:00     52
2  10:00     62
3  11:00     44
4  12:00     30
5  13:00    110 
```

使用`extract`，必须指定至少一个捕获组。`expand=False`将返回一个系列，其中包含第一个捕获组中捕获的项目。

* * *

### **[`.str.split`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.split.html)**和**[`.str.get`](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.get.html)**

假设您的所有字符串都遵循这种一致的结构，则拆分工作。

```
# df['result'] = df['result'].str.split(r'\D').str[1]
df['result'] = df['result'].str.split(r'\D').str.get(1)
df

    time result
1  09:00     52
2  10:00     62
3  11:00     44
4  12:00     30
5  13:00    110 
```

如果您正在寻找通用解决方案，不建议这样做。

* * *

> 如果您对上面简洁易读的基于访问器的解决方案感到满意`str` ，您可以到此为止。但是，如果您对更快、性能更高的替代方案感兴趣，请继续阅读。

* * *

## **优化：列表理解**

在某些情况下，列表推导应该优于 pandas 字符串函数。原因是因为字符串函数本质上很难向量化（真正意义上的），所以大多数字符串和正则表达式函数只是循环的包装器，开销更大。

我的文章， [Pandas 中的 for 循环真的很糟糕吗？我什么时候应该关心？](https://stackoverflow.com/questions/54028199/for-loops-with-pandas-when-should-i-care), 更详细。

该`str.replace`选项可以使用重写`re.sub`

```
import re

# Pre-compile your regex pattern for more performance.
p = re.compile(r'\D')
df['result'] = [p.sub('', x) for x in df['result']]
df

    time result
1  09:00     52
2  10:00     62
3  11:00     44
4  12:00     30
5  13:00    110 
```

该`str.extract`示例可以使用列表推导式重写`re.search`，

```
p = re.compile(r'\d+')
df['result'] = [p.search(x)[0] for x in df['result']]
df

    time result
1  09:00     52
2  10:00     62
3  11:00     44
4  12:00     30
5  13:00    110 
```

如果有可能出现 NaN 或不匹配，您将需要重写上面的内容以包含一些错误检查。我使用一个函数来做到这一点。

```
def try_extract(pattern, string):
    try:
        m = pattern.search(string)
        return m.group(0)
    except (TypeError, ValueError, AttributeError):
        return np.nan

p = re.compile(r'\d+')
df['result'] = [try_extract(p, x) for x in df['result']]
df

    time result
1  09:00     52
2  10:00     62
3  11:00     44
4  12:00     30
5  13:00    110 
```

我们还可以使用列表推导重写 @eumiro 和 @MonkeyButter 的答案：

```
df['result'] = [x.lstrip('+-').rstrip('aAbBcC') for x in df['result']] 
```

和，

```
df['result'] = [x[1:-1] for x in df['result']] 
```

适用于处理 NaN 等的相同规则。

* * *

## 性能比较

[![在此处输入图像描述](../Images/c67695e445e2ab8c83ceb6d23b426d94.png)](https://i.stack.imgur.com/fjl53.png)

使用[perfplot](https://github.com/nschloe/perfplot)生成的图表。[完整的代码清单，供您参考。](https://gist.github.com/Coldsp33d/c4a329fd00604e47d513b32e8a25f298)下面列出了相关的功能。

其中一些比较是不公平的，因为它们利用了 OP 数据的结构，但您可以从中获取。需要注意的一点是，每个列表理解函数都比其等效的 pandas 变体更快或可比。

**职能**

> ```
> def eumiro(df):
>     return df.assign(
>         result=df['result'].map(lambda x: x.lstrip('+-').rstrip('aAbBcC')))
> 
> def coder375(df):
>     return df.assign(
>         result=df['result'].replace(r'\D', r'', regex=True))
> 
> def monkeybutter(df):
>     return df.assign(result=df['result'].map(lambda x: x[1:-1]))
> 
> def wes(df):
>     return df.assign(result=df['result'].str.lstrip('+-').str.rstrip('aAbBcC'))
> 
> def cs1(df):
>     return df.assign(result=df['result'].str.replace(r'\D', ''))
> 
> def cs2_ted(df):
>     # `str.extract` based solution, similar to @Ted Petrou's. so timing together.
>     return df.assign(result=df['result'].str.extract(r'(\d+)', expand=False))
> 
> def cs1_listcomp(df):
>     return df.assign(result=[p1.sub('', x) for x in df['result']])
> 
> def cs2_listcomp(df):
>     return df.assign(result=[p2.search(x)[0] for x in df['result']])
> 
> def cs_eumiro_listcomp(df):
>     return df.assign(
>         result=[x.lstrip('+-').rstrip('aAbBcC') for x in df['result']])
> 
> def cs_mb_listcomp(df):
>     return df.assign(result=[x[1:-1] for x in df['result']]) 
> ```

* * *

## 回答 #3

> 赞同：58
> 
> 时间：2015-01-31T14:57:04.193

我会使用 pandas 替换功能，非常简单且功能强大，因为您可以使用正则表达式。下面我使用正则表达式 \D 删除任何非数字字符，但显然你可以使用正则表达式获得相当的创意。

```
data['result'].replace(regex=True,inplace=True,to_replace=r'\D',value=r'') 
```

* * *

## 回答 #4

> 赞同：37
> 
> 时间：2014-03-06T23:27:54.170

在您知道要从数据框列中删除的位置数的特定情况下，您可以在 lambda 函数中使用字符串索引来删除这些部分：

最后一个字符：

```
data['result'] = data['result'].map(lambda x: str(x)[:-1]) 
```

前两个字符：

```
data['result'] = data['result'].map(lambda x: str(x)[2:]) 
```

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2012-12-03T17:00:37.013

这里有一个错误：目前无法将参数传递给`str.lstrip`and `str.rstrip`：

[http://github.com/pydata/pandas/issues/2411](http://github.com/pydata/pandas/issues/2411)

编辑：2012-12-07 现在可以在 dev 分支上使用：

```
In [8]: df['result'].str.lstrip('+-').str.rstrip('aAbBcC')
Out[8]: 
1     52
2     62
3     44
4     30
5    110
Name: result 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2017-11-04T04:00:33.733

一个非常简单的方法是使用该`extract`方法选择所有数字。`'\d+'`只需为其提供提取任意数量数字的正则表达式。

```
df['result'] = df.result.str.extract(r'(\d+)', expand=True).astype(int)
df

    time  result
1  09:00      52
2  10:00      62
3  11:00      44
4  12:00      30
5  13:00     110 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-11-15T04:24:22.977

假设您的 DF 在数字之间也有那些额外的字符。最后一个条目。

```
 result   time
0   +52A  09:00
1   +62B  10:00
2   +44a  11:00
3   +30b  12:00
4  -110a  13:00
5   3+b0  14:00 
```

您可以尝试 str.replace 不仅从开头和结尾删除字符，还可以从中间删除字符。

```
DF['result'] = DF['result'].str.replace('\+|a|b|\-|A|B', '') 
```

输出：

```
 result   time
0     52  09:00
1     62  10:00
2     44  11:00
3     30  12:00
4    110  13:00
5     30  14:00 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2015-04-24T09:34:21.640

我经常对这些类型的任务使用列表推导，因为它们通常更快。

执行此类操作的各种方法之间的性能可能存在很大差异（即修改 DataFrame 中系列的每个元素）。列表理解通常是最快的 - 请参阅下面的代码竞赛以了解此任务：

```
import pandas as pd
#Map
data = pd.DataFrame({'time':['09:00','10:00','11:00','12:00','13:00'], 'result':['+52A','+62B','+44a','+30b','-110a']})
%timeit data['result'] = data['result'].map(lambda x: x.lstrip('+-').rstrip('aAbBcC'))
10000 loops, best of 3: 187 µs per loop
#List comprehension
data = pd.DataFrame({'time':['09:00','10:00','11:00','12:00','13:00'], 'result':['+52A','+62B','+44a','+30b','-110a']})
%timeit data['result'] = [x.lstrip('+-').rstrip('aAbBcC') for x in data['result']]
10000 loops, best of 3: 117 µs per loop
#.str
data = pd.DataFrame({'time':['09:00','10:00','11:00','12:00','13:00'], 'result':['+52A','+62B','+44a','+30b','-110a']})
%timeit data['result'] = data['result'].str.lstrip('+-').str.rstrip('aAbBcC')
1000 loops, best of 3: 336 µs per loop 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-11T07:08:13.447

尝试使用正则表达式：

```
import re
data['result'] = data['result'].map(lambda x: re.sub('[-+A-Za-z]',x) 
```

# objective-c - 带有标签的UILabel，无法设置文本

> ID：13682046
> 
> 赞同：2
> 
> 时间：2012-12-03T11:12:04.117
> 
> 标签：objective-c, uiview, uilabel

我遇到了标签问题。我有几个标签需要借助标签进行更改。我在我的代码中这样做，但它给出了一个异常 `-[UIView setText:]: unrecognized selector sent to instance` 这是我的代码：

```
UILabel *label = (UILabel *)[self.view viewWithTag:0];

label.text = @"empty"; 
```

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:21:54.813

每个视图的标签默认为 0。

> 标签
> 
> 一个整数，可用于标识应用程序中的视图对象。
> 
> @property(nonatomic) NSInteger 标签
> 
> 讨论
> 
> 默认值为 0。您可以设置此标记的值，并在以后使用该值来标识视图。

您`viewWithTag`将归还您的`self.view`. 所以你会得到 a`UIView`而不是 a`UILabel`并且你的应用程序会崩溃。见`viewWithTag`的定义：

> viewWithTag:
> 
> 返回其标签与指定值匹配的视图。
> 
> `- (UIView *)viewWithTag:(NSInteger)tag` 参数
> 
> *标签*
> 
> 要搜索的标记值。返回值 接收者层次结构中的视图，其标签属性与标签参数中的值匹配。
> 
> 讨论
> 
> 此方法**在当前视图**及其所有子视图中搜索指定视图。

因此，您的解决方案是您需要`tag`为每个标签指定唯一的。然后使用`viewWithTag:`并给出您指定的标签。

# javascript - 无法停止隐藏 DIV 中的 YouTube 视频在后台播放

> ID：13682049
> 
> 赞同：2
> 
> 时间：2012-12-03T11:12:19.940
> 
> 标签：javascript, jquery, youtube

我已经尝试了各种方法，但无法在隐藏的 DIV 中获取 YouTube 视频以在甚至单击 DIV 切换之前停止在后台播放。可见性：隐藏似乎没有解决问题。这是我正在使用的代码。希望有人能帮忙！我可以关闭自动播放来解决它，但这意味着用户必须单击一个不理想的额外按钮（YouTube“播放”按钮）。

** 在网页中：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js" type="text/javascript"></script>
<script type="text/javascript">

$(document).ready(function(){

        $(".productDescription").hide();
        $(".show_hide").show();

    $('.show_hide').click(function(){
    $(".productDescription").slideToggle();
    return false;
    });

});

</script> 
```

** 在身体里：

```
<div class="productDescription">

<iframe width="715" height="440" src="http://www.youtube.com/embed/BLbTegvRg0U?&amp;wmode=transparent&amp;autoplay=0" frameborder="0" allowfullscreen></iframe> 
<div class="closebutton"><a href="index.php" onClick="javascript:location.replace(this.href);" class="show_hide">Close Video</a>
</div>
</div> 
```

** 在样式表中：

```
.productDescription {
display: block;
position:absolute;
left:0px;
top:-2px;
z-index:5;
background-color: #000;
margin: 0px;
float: left;
padding: 0px;
width: 715px;
min-height: 600px;
height: 600px;
}

.show_hide {
display:none;
}

.closebutton {
display: block;
width:120px;
height: 22px;
position:absolute;
left:20px;
top:50px;
background-color: #000;
padding-top: 3px;
float: left;
z-index: 9999;
} 
```

首先十分感谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T11:28:36.407

加载后，自动播放功能将开始播放视频，无论 div 是可见的还是隐藏的。

但是，如果您删除自动播放设置，则可以使用 YouTube API 来控制视频，以便在有人单击以显示 div 时开始播放视频。一个选项是[iframe API](https://developers.google.com/youtube/iframe_api_reference)（我会推荐它，因为您已经在使用 iframe 嵌入视频，如果观看者在移动设备上，这允许 YouTube 提供 HTML5 视频而不是 Flash 视频），另一个选项是[JavaScript](https://developers.google.com/youtube/js_api_reference) API 。

由于您询问了更多详细信息，因此这里简要说明了如何使用 YouTube iFrame API 来满足您的需求。我建议阅读文档，以便您了解正在发生的事情并根据需要进行调整。

首先，在您的 HTML 中以与上面相同的方式创建您的 iframe 视频，但添加两件事：iframe 的 ID 和 iframe src 中的 origin 参数。（origin 参数有助于保护 YouTube 播放器免受 javascript 黑客攻击。）所以它看起来像这样：

```
<iframe id="player" width="715" height="440" src="http://www.youtube.com/embed/BLbTegvRg0U?&amp;wmode=transparent&amp;autoplay=0&origin=http://example.com/" frameborder="0" allowfullscreen></iframe> 
```

将 example.com 网址替换为该页面所在的网站。

在 iframe 之后，但在`</body>`标记之前，添加以下代码以加载 api 并初始化播放器：

```
 <script>
  var tag = document.createElement('script');
  tag.src = "//www.youtube.com/iframe_api";
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  var player;
  function onYouTubeIframeAPIReady() {
    player = new YT.Player('player');
  }
</script> 
```

然后，在您的 javascript 中，就在 $('.productDescription').slideToggle() 行之前，添加以下代码：

```
 if ($('.productDescription').is(':visible')) {
       player.pauseVideo();
      }
  else {
       player.playVideo();
      } 
```

此代码将测试`.productDescription`div 是否可见。如果它被隐藏，它将启动视频并显示 div。如果它不可见，它将暂停视频并隐藏 div。

那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T04:42:05.893

我有同样的问题，但我可以用这个来解决。参考[YouTubeAPI](https://developers.google.com/youtube/iframe_api_reference#Getting_Started)，我们不能直接实现。所以我这样编辑。

Step1：创建**loadYTScript()**函数并放入 youtubeAPI 代码，

Step2：是调用函数 onYouTubeIframeAPIReady() 然后在 onclick 调用加载函数。这是你的js代码：

```
function loadYTScript(){
                    var tag = document.createElement('script');
                    tag.src = "https://www.youtube.com/iframe_api";
                    var firstScriptTag = document.getElementsByTagName('script')[0];

                    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);    
                }
        function onYouTubeIframeAPIReady() {
                    player = new YT.Player('player', {                                         
            height: '390',
            width: '640',
            videoId: 'M7lc1UVf-VE',
                        events: {
                            'onReady': onPlayerReady,
                          }
                    });
                }
                function onPlayerReady(event) {
                    event.target.playVideo();
                }
                jQuery(document).ready(function()    {
                $('.show_hide').click(function(){
    $(".productDescription").slideToggle();
    loadYTScript();
    });
    }); 
```

在 html 不要忘记添加

```
<div class="productDescription">        
            <div id="player"></div>
        </div> 
```

希望它运作良好。

# c# - OData WebAPI 查询子级和范围

> ID：13682050
> 
> 赞同：1
> 
> 时间：2012-12-03T11:12:24.183
> 
> 标签：c#, asp.net-web-api, odata

我有一个非常简单的 Web API 项目的以下输出，我想过滤掉所有没有将 Children-property 设置为 null 的“实体”.. 有没有办法做到这一点？.. OData-查询是？

下一个问题是.. 是否可以创建一个查询来返回所有“父母”以及一个名字以 Emma 开头的孩子？

最后一个问题..是否可以将范围缩小到“父母”中的属性..例如，我可能想根据“父母”的年龄创建一个查询，但我只想看到孩子那位父母..在“范围”缩小的地方，因此输出只显示孩子们将是一个非常简洁的功能..

这是我的网址：{mydomain}/api/persons/Children$filters=Children

这是我的 XML：

```
<ArrayOfPerson xmlns:i="http://www.w3.org/2001/XMLSchema-instance" 
xmlns="http://schemas.datacontract.org/2004/07/MvcApplication5.Models">
<Person>
<Age>12</Age>
<Children i:nil="true"/>
<Name>Ada Svensson</Name>
</Person>
<Person>
<Age>19</Age>
<Children i:nil="true"/>
<Name>Emma Svensson</Name>
</Person>
<Person>
<Age>43</Age>
<Children>
<Person>
<Age>12</Age>
<Children i:nil="true"/>
<Name>Ada Svensson</Name>
</Person>
<Person>
<Age>19</Age>
<Children i:nil="true"/>
<Name>Emma Svensson</Name>
</Person>
</Children>
<Name>Bertil Svensson</Name>
</Person>
<Person>
<Age>34</Age>
<Children i:nil="true"/>
<Name>Kalle Persson</Name>
</Person>
</ArrayOfPerson> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:13:15.740

If your service supports OData V3 then you can do

```
/persons?$filter=Children/any() 
```

(Note that if Children is a collection then it can never be null, it can only be empty - as per OData rules).

Currently it's not possible to filter on parent and then only request children using plain OData. You can filter on parent and then get both parent and children for it:

```
/persons?$filter=<my parent condition>&$expand=Children. 
```

# c# - 如何在网络中使用 interop.word 包抑制修复警告对话框和打开 word 文档？

> ID：13682052
> 
> 赞同：6
> 
> 时间：2012-12-03T11:12:23.747
> 
> 标签：c#, asp.net, c#-4.0, interop, ms-word

在我的 ASP.NET Windows 应用程序中，我必须操作 Word 2007 文档。所以，我正在使用 Microsoft.Interop.Word 包来完成这项工作。对于普通文档，它可以正常工作......

同时我还必须打开某种类型的损坏文件。例如，页眉/页脚丢失，对齐丢失......

所以，我打开了像下面这样的文件......

```
wordDocument = wordApplication.Documents.Open(ref paramSourceDocPath, OpenAndRepair:true); 
```

所以，现在除了页眉/页脚丢失情况外，它在上述情况下工作正常。

当我打开文档时，它会显示下面提到的对话框以进行确认。因此，我必须通过此对话框而不显示以供用户确认...

![在此处输入图像描述](../Images/ef1ad4eaf637a334b894e618cdb5a56b.png)

单击对话框中的关闭按钮后，文档正确打开...

所以，请指导我摆脱这个问题......

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-14T21:47:46.550

如果你想禁止显示修复对话框，你可以使用 Documents.OpenNoRepairDialog 方法来打开你的 word 文档。

# javascript - 如何将所有资源（css、js、图像）嵌入到一个 html 文件中？

> ID：13682055
> 
> 赞同：4
> 
> 时间：2012-12-03T11:12:28.973
> 
> 标签：javascript, html, css, mhtml

所以我的问题有点像这个问题的克隆，[除了](https://stackoverflow.com/questions/10384494/how-to-include-all-resources-into-one-html-file)建议使用.net技术的答案，我正在研究linux。

这是一个摘要：

我正在使用基于 html5 的幻灯片进行演示。这些幻灯片像每个网站一样创建，其中包含包含资源的子文件夹。我正在寻找一种将这些幻灯片转换为独立文件的方法，以便能够轻松共享它们。

这只是意味着用 base64 图像替换所有图像，用内联纯文本替换 js/css 导入。我也在使用 require.js，所以替换 javascript 导入可能会有点棘手，但这将是第二次出现问题。

我没有使用 MHTML，因为浏览器并不真正支持它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-22T02:38:06.463

尝试使用 Gulp.js 或 Grunt.js，它们对文件进行操作并且每个都有很多插件。我个人更喜欢使用 Gulp，因为它基于流的模型——它既快速又灵活，但你可能会发现 Grunt 更简单，或者（很可能）更快地找到合适的插件。它们都是接受用 JavaScript 编写的配置文件的 Node.js 实用程序，因此您不必使用 Java 或任何非常规技术来完成此任务。

您可以先阅读[一篇关于 Gulp 的介绍性文章](http://www.sitepoint.com/introduction-gulp-js/)，然后通过以下关键字之一搜索[可用的 gulp 插件](http://gulpjs.com/plugins)：inline、asset、minify 等。

祝工作流程优化好运！

# javascript - 将 Javascript 数组值传递给 ruby 数组值

> ID：13682056
> 
> 赞同：-1
> 
> 时间：2012-12-03T11:12:50.050
> 
> 标签：javascript, ruby-on-rails, ruby

谁能告诉我将 javascript 数组值设置为 ruby​​ 数组变量的最佳方法

当我得到 java 脚本数组值时

```
$("input[name='entry_ids[]']:Checked").each(function() {
            selectedGroups.push($(this).val());
           }); 
```

如何设置红宝石变量？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:21:16.593

您不能从 JS 设置 ruby​​ 变量，JS 是一种客户端编程语言，因此需要以某种方式将数据发送到您的 ROR 应用程序。如果您按正常方式提交表单，您将在`params[:entry_ids]`. 否则，您可以使用 JS 将 AJAX 消息发布到您的 rails 操作。

不过，看起来您并没有做任何特别的事情，因此我建议您查看 rails forms。如果需要异步，`remote: true`请在表单助手中使用。

# mysql - MySQL inet_aton() 偶尔返回 null

> ID：13682058
> 
> 赞同：1
> 
> 时间：2012-12-03T11:13:05.603
> 
> 标签：mysql, ip-address, percona

我将数据插入到日志表中，包括 IP 地址。出于某种原因，IP 列有时是 NULL'ed。在大多数情况下（占所有记录的 99.9%），IP 被正确记录。

IP 使用 inet_aton() 函数存储在无符号 INT 列中。这会将 IP 地址从它的书面点分隔形式 (zzz.xxx.yyy.www) 转换为其数字形式。

MySQL 文档说明了有关 INET_ATON() 和 NULL 的以下内容：

> 如果 INET_ATON() 不理解其参数，则返回 NULL。
> 
> INET_ATON() 可能会或可能不会返回短格式 IP 地址的非 NULL 结果（例如 '127.1' 作为 '127.0.0.1' 的表示）。

我一直在记录流入查询的数据，并验证了被绑定的参数确实包含 IP 地址而不是空值。他们的 IP 地址看起来不错，如果我手动运行

> 选择 INET_ATON('zzz.yyy.xxx.www');

结果是一个数字表示，正如预期的那样。

为了完整起见，代码（注意：删除了看似不相关的列）：

```
/* @var $conn PDO */
$stmt = $conn->prepare(
'INSERT INTO subscription_log(
    email, groupid, subscribe_ip
) VALUES (
    :email,
    :groupid,
    inet_aton(:label_subscribe_ip),
)');
$result = $stmt->execute($params);

// With the following input for $params (print_r):
Array
(
    [email] => user@domain.com
    [groupid] => 51299
    [label_subscribe_ip] =>  145.222.138.151
) 
```

最后，虽然我怀疑它是否相关，但 MySQL 版本信息：

```
version = 5.5.27-28.1
version_comment = Percona Server (GPL), Release 28.1
version_compile_machine = x86_64
version_compile_os = Linux 
```

对我来说，这很神秘。关于如何进行进一步调试的任何建议，有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:19:30.493

您可能在输入中添加了空格（或不可打印字符）。

假设您在此处发布了文字输出：

```
Array
(
    [email] => user@domain.com
    [groupid] => 51299
    [label_subscribe_ip] =>  145.222.138.151
) 
```

`145.`在表示真正的输入是`_145.222.138.151`（开头有一个空格）之前有两个空格。

[`trim()`](http://php.net/manual/en/function.trim.php)在将 ip 添加到参数列表之前尝试使用。

# java - Spring 与 JMS glassfish MQ 的集成

> ID：13682059
> 
> 赞同：1
> 
> 时间：2012-12-03T11:13:08.007
> 
> 标签：java, spring, glassfish, jms

所以我在从 Spring 项目设置到 JMS 的连接时遇到了这个问题。问题在于我的客户端实现，如下所示：

```
public class EndpointHelper implements Runnable{

    @Inject
    public InputDatabaseService inputProxy;

    private Person mickey = new Person("Mickey", "Mouse"); 

    public void run() {

        inputProxy.input(mickey);

    }

} 
```

其中 InputDataService 是方法 input(Person) 的接口，输入方法将人员添加到数据库。我有例外：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'endpointHelper': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: public pl.cos.test.camel.service.InputDatabaseService pl.cos.test.ws.endpoint.EndpointHelper.inputProxy; nested exception is org.springframework.jms.MessageFormatException: [C4014]: Serialize message failed. - cause: java.io.NotSerializableException: org.springframework.web.context.support.XmlWebApplicationContext; nested exception is com.sun.messaging.jms.MessageFormatException: [C4014]: Serialize message failed. - cause: java.io.NotSerializableException: org.springframework.web.context.support.XmlWebApplicationContext
    org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessPropertyValues(AutowiredAnnotationBeanPostProcessor.java:287)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1106)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:609)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:925)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:472)
    org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:631)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:588)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:645)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:508)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:449)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:133)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722) 
```

Person.java 类：

包pl.famoc.test.camel.service；导入 java.io.Serializable；

```
public class Person implements Serializable {

    private static final long serialVersionUID = 1L;

    private String firstName;
    private String lastName;

    public Person(String firstName, String lastName) {
        this.firstName = firstName;
        this.lastName = lastName;
    }

    public void setFirst(String first){
        this.firstName = first;
    }
    public void setLast(String last){
        this.lastName = last;
    }
    public String getFirst(){
        return firstName;
    }
    public String getLast(){
        return lastName;
    }
} 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:23:51.213

好的，我已经想通了。问题不在于序列化，而是`Context`将处理该方法的变量的类型，我错误地`EndpointHelper`在作为我的 Spring 上下文的基本组件的包中创建了类：`<context:component-scan base-package="pl.cos.test.ws.endpoint" />`是什么导致 EndpointHelper`XmlWebApplicationContext`在我想要的时候被处理`ApplicationContext`。
只需放入`EndpointHelper`另一个包裹即可解决问题。

# titanium - Titanium 移动版中的 Javascript 样式表

> ID：13682068
> 
> 赞同：0
> 
> 时间：2012-12-03T11:13:28.567
> 
> 标签：titanium, appcelerator, titanium-mobile, appcelerator-mobile

我是一名使用 Titanium Mobile 框架学习移动开发的人。

我面临一个与应用 javascript 样式表相关的问题。当我将我的 jss 文件命名为与要应用该样式的 js 文件相同时，它工作正常。但是，如果我将其命名为其他名称，则它不起作用。谁能告诉我一个解决方案。以下是我的代码示例。

```
// app.js
var win = Titanium.UI.createWindow({ backgroundColor : '#fff' });

win.add( Ti.UI.createButton({ title : 'Button A' }) );

win.open();

// app.jss, works fine
button { backgroundImage: 'grdadient_img.png'; }

// button_style.jss, don't work
button { backgroundImage: 'grdadient_img.png'; } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-07T12:23:58.287

我从来没有使用多个 JSS 文件取得过很大的成功。如果您关注 Nandu 的链接，您会发现它并没有很好地记录在案，可能会在某个时候从 Titanium 中删除。我预计钛合金也会杀死 JSS。

如果您还不想使用 JSS（或 Alloy），有一种巧妙的方法可以使用 commonJS 模块和可选的 underscore.js 来集中您的样式，例如

**主题.js**

```
var theme = {
    tableLabel : {
        color : '#3285C7',
        backgroundColor : 'transparent',
        inactiveColor : '#AAAAAA'
    }
}
module.exports = theme; 
```

使用

```
 var theme = require('ui/common/Theme');
...
    var myLabel = Ti.UI.createLabel(_.extend({}, theme.tableLabel, {
        top : 5,
        height : Ti.UI.SIZE,
        width : Ti.UI.FILL,
        text : "Hello world",
    })); 
```

我使用`_extend`从主题中获取设置并添加实例特定设置，如大小、位置等。不要忘记调用 `_.extend() 中的第一个空对象文字

见[http://underscorejs.org/#extend](http://underscorejs.org/#extend)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:55:13.997

Ammar，请参考以下链接。希望对你有帮助

一[、如何正确使用jss](http://developer.appcelerator.com/question/144010/how-to-use-jss-correctly)

2\. [.jss 功能如何在 Titanium 移动 SDK 中真正发挥作用](http://developer.appcelerator.com/question/137015/how-does-jss-feature-really-works-in-titanium-mobile-sdk)

# ios - 当应用程序处于横向模式时拍摄屏幕截图

> ID：13682070
> 
> 赞同：1
> 
> 时间：2012-12-03T11:13:55.723
> 
> 标签：ios, ipad, uiinterfaceorientation

我正在开发一个只会在横向的应用程序。在那个应用程序中，我有一个功能是截取该特定屏幕的屏幕截图。我已经实现了这段代码

```
UIGraphicsBeginImageContext(self.view.window.bounds.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];

UIImageView *imageView = [[UIImageView alloc] init];
imageView.image = UIGraphicsGetImageFromCurrentImageContext();;
imageView.transform = CGAffineTransformMakeRotation(3.0 * M_PI / 2.0);
UIGraphicsEndImageContext();
UIImageWriteToSavedPhotosAlbum(imageView.image, nil, nil, nil); 
```

使用此代码，我可以在纵向模式下获得我的应用程序的屏幕截图。我想要横向模式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T11:46:31.240

不要添加那个`window`。如果你添加它，你的上下文大小是错误的。

```
// Just use self.view.bounds.size is OK
UIGraphicsBeginImageContext(self.view.bounds.size); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T15:04:42.880

也许晚了，但将它包装在 UIImageView 中实际上并没有旋转图像本身。这是我编写的一些代码，可以从应用程序的整个窗口创建旋转图像。

```
UIWindow *keyWindow = [[UIApplication sharedApplication] keyWindow];

CGRect rect = [keyWindow bounds];
UIGraphicsBeginImageContext(rect.size);

CGContextRef context = UIGraphicsGetCurrentContext();
[keyWindow.layer renderInContext:context];

UIImage * image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

return [[UIImage alloc] initWithCGImage:[image CGImage] scale:1 orientation:UIImageOrientationLeft]; 
```

如果您希望它向右旋转，只需将 UIImageOrientationLeft 替换为 UIImageOrientationRight

# javascript - 等待页面被填满

> ID：13682071
> 
> 赞同：0
> 
> 时间：2012-12-03T11:13:58.923
> 
> 标签：javascript, html, jquery-mobile

我的页面包含是动态的，如果包含的页面完整，那么如何显示页面，如果没有，我等待消息出现。

我用jquery mobile。

```
 $("#A1").live('pageshow', function()
        {
// code for fill the page
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:17:49.153

你可以处理这个[`pagebeforeshow`事件](http://jquerymobile.com/test/docs/api/events.html)。您的代码将在页面显示之前执行：

```
$(document).on('pagebeforeshow', '#A1', function(ev){
    // your code
}); 
```

# 3d - 从 3D 点获取 2D 屏幕点

> ID：13682074
> 
> 赞同：2
> 
> 时间：2012-12-03T11:14:10.653
> 
> 标签：3d, 2d, coordinates, point, ogre

我想用 OGRE 获得 3D 坐标点的 2D 屏幕坐标。有没有简单的食人魔功能来做到这一点？

非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T11:45:33.010

我认为没有 OGRE 函数可以直接执行此操作，但您可以轻松获得相同的结果。

您在世界空间中有一个 3D 点，并且您想将您的点投影到屏幕空间中。因此，您需要将投影矩阵和视图矩阵的点相乘，然后需要将结果点从坐标空间 [-1 1] 映射到 [0 1]。

例如：

```
Vector2 GetScreenspaceCoords(const Vector3& iPoint, const Camera& iCamera)
{
    Vector3 point = iCamera.getProjectionMatrix() * (iCamera.getViewMatrix() * iPoint);

    Vector2 screenSpacePoint = Vector2::ZERO;
    screenSpacePoint.x = (point.x / 2.f) + 0.5f;
    screenSpacePoint.y = (point.y / 2.f) + 0.5f;

    return screenSpacePoint;
} 
```

当然，如果你想要相对于屏幕尺寸的坐标，你必须乘以视口的宽度和高度的点。

# iphone - 计算器应用程序未正确运行

> ID：13682075
> 
> 赞同：-2
> 
> 时间：2012-12-03T11:14:22.243
> 
> 标签：iphone, objective-c

我是编程 iphone 应用程序的美妙世界的新手，我正在关注斯坦福大学在 iTunes U 上发布的系列文章，他们让你构建的第一个应用程序是计算器。现在，当我去运行计算器时，调试屏幕在这一行中断了 `@property (nonatomic) BOOL userIsInTheMiddleOfEnteringANumber;`我已经按照教程到了 T，所以我不明白为什么我遇到问题而讲师没有。

```
//
//  CalculatorViewController.m
//  Calculator
//
//  Created by Jweezy on 3/12/12.
//  Copyright (c) 2012 Jweezy. All rights reserved.
//

#import "CalculatorViewController.h"
#import "CalculatorBrain.h"

@interface CalculatorViewController()
@property (nonatomic) BOOL userIsInTheMiddleOfEnteringANumber;
@property(nonatomic, strong) CalculatorBrain *brain;
@end

@implementation CalculatorViewController

@synthesize display = _display;
@synthesize userIsInTheMiddleOfEnteringANumber = _userIsInTheMiddleOfEnteringANumber;
@synthesize brain = _brain;

- (CalculatorBrain *)brain
{
    if(!_brain) _brain= [[CalculatorBrain alloc] init];
    return _brain;
}

- (IBAction)digitPressed:(UIButton *)sender {

    NSString *digit = sender.currentTitle;
    if(self.userIsInTheMiddleOfEnteringANumber){
    self.display.text = [self.display.text stringByAppendingString:digit];
    } 
    else {
        self.display.text = digit;
        self.userIsInTheMiddleOfEnteringANumber= YES;
    }

}
- (IBAction)operationPressed:(UIButton *)sender {

    if(self.userIsInTheMiddleOfEnteringANumber)[self enterPressed];
    double result = [self.brain performOperation:sender.currentTitle];
    NSString *resultString = [NSString stringWithFormat:@"%g", result];
    self.display.text = resultString;

}
- (IBAction)enterPressed {
    [self.brain  pushOperand:[self.display.text doubleValue]];
    self.userIsInTheMiddleOfEnteringANumber = NO;
}

@end 
```

每当单击数字时应用程序崩溃并显示以下内容

```
Thread 1: breakpoint1.1 at the line @property (nonatomic) BOOL userIsInTheMiddleOfEnteringANumber; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:30:49.443

它看起来像这样吗？

![显示断点的图像](../Images/5e07617d2b4321ba8d15a722be69e7f3.png)

那是一个断点。该消息是您收到的消息。通过单击蓝色箭头的位置，它们很容易在不注意的情况下创建。单击它并禁用断点，或右键单击它并删除断点。

# android - Viewpager 和容器宽度

> ID：13682078
> 
> 赞同：1
> 
> 时间：2012-12-03T11:14:28.363
> 
> 标签：android, android-layout, android-viewpager

在一个片段中，我有一个 ViewPager 实例化视图（viewpager 是左上角的白色框，视图是内部带有“AAAAA”的蓝色框，由 20dp 填充）：

![在此处输入图像描述](../Images/205df1090a8990e60cf00c70fc5afb9e.png)

viewpager 在他的片段中是“match_parent”。如何“缩短”viewpager 容器的宽度以实现这样的布局？

![在此处输入图像描述](../Images/ff558ebfaa8ff001d8fa3d49fbcd868d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:14:35.050

完毕！setPageMargin 具有负值并在视图内填充！:)

# android - android在x分钟后连接wifi并在x分钟后断开连接。现在再次重复

> ID：13682084
> 
> 赞同：0
> 
> 时间：2012-12-03T11:14:39.283
> 
> 标签：android

在`Service`我想`BroadcastReceiver`注册`android.net.wifi.WIFI_STATE_CHANGED`

```
public void onCreate() {
        super.onCreate();

        final IntentFilter filter = new IntentFilter("android.net.wifi.WIFI_STATE_CHANGED");      

        MyReceiver myreceiver = new MyReceiver();

        // Register the receiver so that your service will listen for broadcast
        registerReceiver(myreceiver , filter); 
```

一切都很好并且可以正常工作，但是在 wifi 状态发生变化（例如断开连接）后，我希望它在 5 分钟内再次激活 1 分钟，然后再次断开连接。5分钟后再次激活1分钟。一般 5 分钟后连接只需 1 分钟，然后再次断开连接...

我尝试了这个，`AlarmManager`但我遇到了如何在 5 分钟后连接 1 分钟然后断开连接的问题。

我的代码不是我尝试做的。它未连接，然后断开连接：

```
AlarmManager alarmMgr = (AlarmManager)getSystemService(Context.ALARM_SERVICE);
            Intent alarmIntent = new Intent(this, WifiReceiver.class);
            PendingIntent pendingAlarmIntent = PendingIntent.getBroadcast(getApplicationContext(), 0, alarmIntent, 0);

            // start in 5 minutes and rest in 1 minutes interval
            alarmMgr.setRepeating(AlarmManager.ELAPSED_REALTIME_WAKEUP, 5*60*1000, 1*60*1000,  pendingAlarmIntent); 
```

我怎样才能做到这一点？我AlarmManager的正确方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:21:31.787

在您的服务中使用一些计时器来完成...

```
boolean delayedAgain = false;
long newDelayedTimeFromNow;
private Handler mHandlerTime = new Handler();
////////////////////// 
Runnable  mUpdateTimeTask = new Runnable() {             
    public void run() {
        if(delayedAgain)
        {

        }
        else
        {

    }
}; 
///to start timer 
      mHandlerTime.removeCallbacks(mUpdateTimeTask);
      mHandlerTime.postDelayed(mUpdateTimeTask, gps_interval); 
```

因此，您可以确定一个计时器 5 分钟以打开 WIFI，另一个计时器 6 分钟以关闭...再次使用**boolean dealyed**来实现... fe 当第一个关闭 5 分钟时将 bool 更改为 true，第二个将运行时去 ti **if(..== true)**

# java - 在指定目录创建文件

> ID：13682086
> 
> 赞同：3
> 
> 时间：2012-12-03T11:14:48.457
> 
> 标签：java, android, eclipse, outputstream, fileoutputstream

尝试在特定目录中创建文件，但它显示错误 FileNotFound。为什么？我在使用不可能的路径吗？我真的不知道，但似乎代码应该可以工作。

```
 String day=/1;
String zn="/zn";
    File_name=zn
String root= Environment.getExternalStorageDirectory().toString();            
    File_path=root+day;

        File file1 = new File(File_path,File_name);
        file1.mkdirs();
        if(!file1.exists()) {
            try {
                file1.createNewFile();
            } catch (IOException e) {
                e.printStackTrace();
            }
        } 

        try {
            OutputStream fos= new FileOutputStream(file1);
            String l,d,p;
            l = lessnum.getText().toString();
            d = desc.getText().toString();
            p = place.getText().toString();

            fos.write(l.getBytes());
            fos.write(d.getBytes());
            fos.write(p.getBytes());

            fos.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:25:43.930

更改代码以在 sdcard 上创建文件

```
String root= Environment.getExternalStorageDirectory().getAbsolutePath();
String File_name = "File_name.Any_file_Extension(like txt,png etc)";

File file1 = new File(root+ File.separator + File_name);
if(!file1.exists()) {
    try {
         file1.createNewFile();
       } catch (IOException e) {
          e.printStackTrace();
      }
} 
```

在当前您还缺少带有文件名的文件扩展名，因此将字符串更改`zn`为`zn="/zn.txt";`

并确保您已在以下位置添加了 SD 卡权限`AndroidManifest.xml`：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T03:42:57.923

首先你创建一个目录

```
String root= Environment.getExternalStorageDirectory().toString();      
 String dirName =
     root+ "abc/123/xy"; 
     File newFile =  new File(dirName);
     newFile.mkdirs(); 
```

然后在该目录中创建一个文件

`String testFile = "test.txt"; File file1 = new File(dirName,testFile); if(!file1.exists()){ try { file1.createNewFile(); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } }`

然后做你的文件写入操作

```
try { OutputStream fos= new FileOutputStream(file1); 
```

字符串 l,d,p; l = lessnum.getText().toString(); d = desc.getText().toString(); p = place.getText().toString(); os.write(l.getBytes()); fos.write(d.getBytes()); fos.write(p.getBytes()); fos.close(); } catch (Exception e) { // TODO 自动生成的 catch 块 e.printStackTrace(); }

我想这会帮助你...

谢谢...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:16:16.053

您需要通过将以下行添加到您的清单中，为您的应用程序提供写入 SD 卡的正确权限：

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

并检查[http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T13:10:16.773

这是您的最新尝试：

```
File_path = root + File.separator + day; 
File f_dir = new File(File_path); 
f_dir.mkdirs(); 
File file1 = new File(f_dir, File_name); 
if (!file1.exists()) { 
    try { 
        file1.createNewFile(); 
    } catch (IOException e) {
        e.printStackTrace(); 
    } 
}
try { 
    OutputStream fos= new FileOutputStream(file1); 
```

如果您向我们展示了*完整*的堆栈跟踪和错误消息，则更容易找出问题所在，但我可以想到几种可能性：

1.  您没有检查由返回的值`f_dir.mkdirs()`，它很可能会返回`false`以指示未创建目录路径。这可能意味着：
    *   该目录已经存在。
    *   有些东西存在，但不是目录。
    *   由于多种可能的原因之一，无法创建目录路径的某些部分。
2.  如果对象给出的路径名存在任何*内容*`file1.exists()`，则调用将返回。某些东西存在的事实并不一定意味着您可以打开它进行写作： `true` **   它可能是一个目录。
    *   它可能是应用程序没有写入权限的文件。
    *   它可以是只读文件系统上的文件。
    *   还有其他一些事情。* 

 ** * *

如果我写这个，我会写成这样：

```
File dir = new File(new File(root), day);
if (!dir.exists()) {
    if (!dir.mkdirs()) {
        System.err.println("Cannot create directories");
        return;
    }
}
File file1 = new File(dir, fileName);
try (OutputStream fos= new FileOutputStream(file1)) {
    ...
} catch (FileNotFoundException ex) {
   System.err.println("Cannot open file: " + ex.getMessage());
} 
```

我只在需要时尝试创建目录......并检查创建是否成功。然后我只是尝试打开文件来写入它。如果文件不存在，它将被创建。如果无法创建，则 FileNotFoundException 消息应说明原因。

请注意，我还更正了您在选择变量名时所犯的样式错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T11:31:42.230

```
String root= Environment.getExternalStorageDirectory().toString();      
     String dirName =
         root+ "abc/123/xy"; 
         File newFile =  new File(dirName);
         newFile.mkdirs();

         String testFile = "test.txt";
         File file1 = new File(dirName,testFile);
        if(!file1.exists()){
             try {
                file1.createNewFile();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        } 
```

并且`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>` 在清单文件中...

谢谢...*

# wcf - WCF 双工方案 - 通知服务器客户端错误

> ID：13682087
> 
> 赞同：0
> 
> 时间：2012-12-03T11:14:52.317
> 
> 标签：wcf, asynchronous, duplex

在客户端服务器 WCF 双工方案中，让服务器知道客户端发生错误的推荐方法是什么？假设服务器通知其中一个客户端它需要执行某个操作并且在客户端抛出异常。

在回调接口上，我有这样的东西

```
[OperationContract(IsOneWay = true)]
void Work(...); 
```

什么是最好的方法：

1.  实现`NotifyServer(int clientId, string message)`客户端可以调用的消息，让用户知道请求的操作失败，
2.  如果我设置`IsOneWay = false`操作合同，我是否必须调用`BackgroundWorker`线程上的每个客户端以保持 UI 响应？
3.  在服务器上实现异步操作？这将如何运作？我可以在客户端上生成异步操作，我是否必须对客户端回调方法使用相同的模式（ `BeginWork`, ）？`EndWork`

想不到别的了，因为`FaultException`在客户端抛出一个什么时候是`IsOneWay = true`行不通的。

有什么建议吗？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:34:56.737

广告 1\. 这是一种方法......如果 Work() 可能需要不可预测的时间并且您不希望您的服务器线程在该调用上挂起，则建议这样做。

广告 2\. 您应该始终在后台工作人员中执行 WCF 操作，而不是在 UI 线程中。如果您设置 IsOneWay=False，那么显然 Work() 方法将在服务器上阻塞，直到它在远程客户端上完成执行并返回结果. 但是，即使您设置 isOneWay=true 该方法仍然会阻塞低级 WCF 通信。如果 WCF 连接断开，则可能需要很长时间才能收到通知。

广告 3\. 模式由您决定。示例：[MSDN：OperationContractAttribute.AsyncPattern 属性](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontractattribute.asyncpattern.aspx)

不存在最佳解决方案。这完全取决于您的设置（类、线程等）。您编写的 WCF 层应该易于使用 - 这是主要指导方针。

# xml - 编写 XSLT 模板

> ID：13682096
> 
> 赞同：2
> 
> 时间：2012-12-03T11:15:34.383
> 
> 标签：xml, templates, xslt

我已经开始使用 XSLT，并且遇到了一些问题。我已经设法使用一系列 value-of select 指令输出我的 XML 文档，但是在我自己编写我的 XSLT 模板时我真的很挣扎。

这是我的 XML：

```
<?xml version="1.0" ?>
<?xml-stylesheet type="text/xsl" href="lecturers.xsl"?>
<lecturers>
<lecturer>
        <name> 
             <title>Professor</title> 
        <first>Peter </first> <last>Quirk</last>
        </name>
        <teaching>
        <course code="CO3070">XML and the Web</course>
        <course code="CO3300"> Web Server Architectures</course>
    </teaching>
    <research>
        The application of Web protocols to Biology
    </research>
</lecturer>

<lecturer>
    <name> 
    <title>Doctor</title> 
    <first>Brian </first> <last>Johnson</last>
    </name>
    <teaching>
        <course code="CO9999">Computer Hacking</course>
        <course code="CO3300"> Web Server Architectures</course>
    </teaching>
    <research>
        Investigating the various complexities of Computer Hacking
    </research>
</lecturer> 
```

然后，这是我目前的 XSL：

```
 <?xml version="1.0"?>
 <xsl:stylesheet version='1.0' xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="html" version="4.0" />

 <xsl:template match="/">
 <html>
 <head>
 <title>XML Week 7</title>
 </head>

  <body>
  <h1>Week 7: Lecturers file turned to XSL:Template</h1>

 <table border="1">
<tr>
    <th><b>Title</b></th>
    <th><b>Name</b></th>
    <th><b>Teaching</b></th>
    <th><b>Research</b></th>
</tr>

<tr>

    <td><xsl:value-of select="lecturers/lecturer/name/title" /></td>
    <td><xsl:value-of select="lecturers/lecturer/name/first" /><xsl:text>&#x20;</xsl:text><xsl:value-of select="lecturers/lecturer/name/last" /></td>
    <td><xsl:value-of select="lecturers/lecturer/teaching/course" /> and <xsl:value-of select="(lecturers/lecturer/teaching/course)[2]" /></td>
    <td><xsl:value-of select="lecturers/lecturer/research" /></td>

</tr>
 </table>

</body>

</html>
 </xsl:template>
 </xsl:stylesheet> 
```

这确实将我需要的信息输出到表格中，但我被指示创建新模板来保存讲师元素，然后是该元素的课程子元素。我可能只是在脑海中把事情复杂化了，但我就是无法让它工作，每当我尝试将模板应用于其中一个 td 时，我只会在浏览器中得到一个解析错误。那么，有人对我有什么建议吗？将不胜感激，即使是一些基本的例子来解释如何在我的例子中工作也会很棒。干杯，伙计们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:21:28.287

使用一个模板来创建结果文档结构，例如

```
 <xsl:template match="/">
 <html>
 <head>
 <title>XML Week 7</title>
 </head>

  <body>
    <xsl:apply-templates/>

</body>

</html>
 </xsl:template> 
```

然后编写更多模板来创建内容，例如

```
<xsl:template match="lecturers">
  <h1>Week 7: Lecturers file turned to XSL:Template</h1>

 <table border="1">
<tr>
    <th><b>Title</b></th>
    <th><b>Name</b></th>
    <th><b>Teaching</b></th>
    <th><b>Research</b></th>
</tr>
  <xsl:apply-templates/>
</table>
</xsl:template>

<xsl:template match="lecturer">
<tr>

    <td><xsl:value-of select="name/title" /></td>
    <td><xsl:value-of select="name/first" /><xsl:text>&#x20;</xsl:text><xsl:value-of select="name/last" /></td>
    <td><xsl:value-of select="teaching/course" /> and <xsl:value-of select="(teaching/course)[2]" /></td>
    <td><xsl:value-of select="lecturers/lecturer/research" /></td>

</tr>
</xsl:template> 
```

如您所见，模板执行`apply-templates`以跟上处理。

[编辑]响应您的评论，如果您想为元素的不同子元素或后代元素使用更多模板，`lecturer`您可以使用

```
<xsl:template match="lecturer">
   <tr>
     <xsl:apply-templates/>
   </tr>
</xsl:template> 
```

然后为元素编写模板，例如

```
<xsl:template match="name/title | research">
  <td>
    <xsl:value-of select="."/>
  </td>
</xsl:template>

<xsl:template match="name/first">
  <td>
    <xsl:value-of select="concat(., ' ', ../last)"/>
  </td>
</xsl:template>

<!-- don't output name/last as the name/first template already does -->
<xsl:template match="name/last"/>

<xsl:template match="teaching">
  <xsl:apply-templates select="course"/>
</xsl:template>

<xsl:template match="course">
  <xsl:if test="position() > 1"><xsl:text> and </xsl:text></xsl:if>
  <xsl:value-of select="."/>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:19:38.487

您当前拥有的位置：

```
<tr>
    <td><xsl:value-of select="lecturers/lecturer/name/title" /></td>
    <td><xsl:value-of select="lecturers/lecturer/name/first" /><xsl:text>&#x20;</xsl:text><xsl:value-of select="lecturers/lecturer/name/last" /></td>
    <td><xsl:value-of select="lecturers/lecturer/teaching/course" /> and <xsl:value-of select="(lecturers/lecturer/teaching/course)[2]" /></td>
    <td><xsl:value-of select="lecturers/lecturer/research" /></td>
</tr> 
```

您可能想要调用`apply-templates`并拥有一个`lecturer`模板。

```
<xsl:template match="lecturer">
    <tr>

        <td><xsl:value-of select="name/title" /></td>
        <td><xsl:value-of select="name/first" /><xsl:text>&#x20;</xsl:text><xsl:value-of select="name/last" /></td>
        <td><xsl:value-of select="teaching/course" /> and <xsl:value-of select="(teaching/course)[2]" /></td>
        <td><xsl:value-of select="research" /></td>

    </tr>
</xsl:template> 
```

# java - 在 Eclipse (Kubuntu) 中安装 Akka for Java

> ID：13682099
> 
> 赞同：0
> 
> 时间：2012-12-03T11:15:39.497
> 
> 标签：java, eclipse, akka

我希望使用 Akka 演员模块。我在 Kubuntu 中使用 Eclipse。我从 akka 网站下载了 .zip 存档，转到：

```
Project->Properties->Java Build Path->Libraries->Add External Jar 
```

并添加了拉链随附的所有罐子。

在我的代码中，我这样做：

```
import akka.actor.Actor;
import akka.event.EventHandler;

class MyActor extends Actor{

} 
```

我得到一个直接的错误：

```
class myActor extends Actor{ 
```

错误是：

```
The type Actor cannot be the superclass of MyActor; a superclass must be a class 
```

但是 Actor 不应该是一个类吗？至少所有教程都是这么说的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:27:24.147

尝试使用`akka.actor.UntypedActor`. 从[参考文档](http://doc.akka.io/docs/akka/snapshot/java/untyped-actors.html)：

> Java 中的 Actor 是通过扩展 UntypedActor 类并实现 onReceive 方法来实现的。此方法将消息作为参数。

这是一个例子：[https ://github.com/alexaverbuch/akka_chat_java/blob/master/src/main/java/chat/actors/Session.java](https://github.com/alexaverbuch/akka_chat_java/blob/master/src/main/java/chat/actors/Session.java)

# python - Virtualenv 返回“没有这样的文件或目录”

> ID：13682102
> 
> 赞同：3
> 
> 时间：2012-12-03T11:16:04.490
> 
> 标签：python, virtualenv, pip, ubuntu-12.04

我有许多正常工作的 virtualenvs，但从今天开始，它们给了我一个错误。我尝试使用 easy_install -U 重新安装 pip 和 virtualenvwrapper，但错误仍然存​​在。有任何想法吗？

```
$ mkvirtualenv django
sh: 0: getcwd() failed: No such file or directory
New python executable in django/bin/python
Installing setuptools.............done.
Installing pip...............done.
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/virtualenvwrapper/hook_loader.py", line 16, in <module>
    from stevedore import ExtensionManager
  File "/usr/local/lib/python2.7/dist-packages/stevedore/__init__.py", line 1, in <module>
    from .extension import ExtensionManager
  File "/usr/local/lib/python2.7/dist-packages/stevedore/extension.py", line 4, in <module>
    import pkg_resources
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 2697, in <module>
    _declare_state('object', working_set = WorkingSet())
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 435, in __init__
    self.add_entry(entry)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 450, in add_entry
    for dist in find_distributions(entry, True):
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1723, in find_on_path
    path_item = _normalize_cached(path_item)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1872, in _normalize_cached
    _cache[filename] = result = normalize_path(filename)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1866, in normalize_path
    return os.path.normcase(os.path.realpath(filename))
  File "/usr/lib/python2.7/posixpath.py", line 375, in realpath
    return abspath(filename)
  File "/usr/lib/python2.7/posixpath.py", line 347, in abspath
    cwd = os.getcwd()
OSError: [Errno 2] No such file or directory
Error in sys.excepthook:
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/apport_python_hook.py", line 70, in apport_excepthook
    binary = os.path.realpath(os.path.join(os.getcwdu(), sys.argv[0]))
OSError: [Errno 2] No such file or directory

Original exception was:
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/virtualenvwrapper/hook_loader.py", line 16, in <module>
    from stevedore import ExtensionManager
  File "/usr/local/lib/python2.7/dist-packages/stevedore/__init__.py", line 1, in <module>
    from .extension import ExtensionManager
  File "/usr/local/lib/python2.7/dist-packages/stevedore/extension.py", line 4, in <module>
    import pkg_resources
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 2697, in <module>
    _declare_state('object', working_set = WorkingSet())
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 435, in __init__
    self.add_entry(entry)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 450, in add_entry
    for dist in find_distributions(entry, True):
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1723, in find_on_path
    path_item = _normalize_cached(path_item)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1872, in _normalize_cached
    _cache[filename] = result = normalize_path(filename)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1866, in normalize_path
    return os.path.normcase(os.path.realpath(filename))
  File "/usr/lib/python2.7/posixpath.py", line 375, in realpath
    return abspath(filename)
  File "/usr/lib/python2.7/posixpath.py", line 347, in abspath
    cwd = os.getcwd()
OSError: [Errno 2] No such file or directory
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/virtualenvwrapper/hook_loader.py", line 16, in <module>
    from stevedore import ExtensionManager
  File "/usr/local/lib/python2.7/dist-packages/stevedore/__init__.py", line 1, in <module>
    from .extension import ExtensionManager
  File "/usr/local/lib/python2.7/dist-packages/stevedore/extension.py", line 4, in <module>
    import pkg_resources
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 2697, in <module>
    _declare_state('object', working_set = WorkingSet())
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 435, in __init__
    self.add_entry(entry)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 450, in add_entry
    for dist in find_distributions(entry, True):
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1723, in find_on_path
    path_item = _normalize_cached(path_item)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1872, in _normalize_cached
    _cache[filename] = result = normalize_path(filename)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1866, in normalize_path
    return os.path.normcase(os.path.realpath(filename))
  File "/usr/lib/python2.7/posixpath.py", line 375, in realpath
    return abspath(filename)
  File "/usr/lib/python2.7/posixpath.py", line 347, in abspath
    cwd = os.getcwd()
OSError: [Errno 2] No such file or directory
Error in sys.excepthook:
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/apport_python_hook.py", line 70, in apport_excepthook
    binary = os.path.realpath(os.path.join(os.getcwdu(), sys.argv[0]))
OSError: [Errno 2] No such file or directory

Original exception was:
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/virtualenvwrapper/hook_loader.py", line 16, in <module>
    from stevedore import ExtensionManager
  File "/usr/local/lib/python2.7/dist-packages/stevedore/__init__.py", line 1, in <module>
    from .extension import ExtensionManager
  File "/usr/local/lib/python2.7/dist-packages/stevedore/extension.py", line 4, in <module>
    import pkg_resources
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 2697, in <module>
    _declare_state('object', working_set = WorkingSet())
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 435, in __init__
    self.add_entry(entry)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 450, in add_entry
    for dist in find_distributions(entry, True):
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1723, in find_on_path
    path_item = _normalize_cached(path_item)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1872, in _normalize_cached
    _cache[filename] = result = normalize_path(filename)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1866, in normalize_path
    return os.path.normcase(os.path.realpath(filename))
  File "/usr/lib/python2.7/posixpath.py", line 375, in realpath
    return abspath(filename)
  File "/usr/lib/python2.7/posixpath.py", line 347, in abspath
    cwd = os.getcwd()
OSError: [Errno 2] No such file or directory
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/virtualenvwrapper/hook_loader.py", line 16, in <module>
    from stevedore import ExtensionManager
  File "/usr/local/lib/python2.7/dist-packages/stevedore/__init__.py", line 1, in <module>
    from .extension import ExtensionManager
  File "/usr/local/lib/python2.7/dist-packages/stevedore/extension.py", line 4, in <module>
    import pkg_resources
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 2697, in <module>
    _declare_state('object', working_set = WorkingSet())
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 435, in __init__
    self.add_entry(entry)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 450, in add_entry
    for dist in find_distributions(entry, True):
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1723, in find_on_path
    path_item = _normalize_cached(path_item)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1872, in _normalize_cached
    _cache[filename] = result = normalize_path(filename)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1866, in normalize_path
    return os.path.normcase(os.path.realpath(filename))
  File "/usr/lib/python2.7/posixpath.py", line 375, in realpath
    return abspath(filename)
  File "/usr/lib/python2.7/posixpath.py", line 347, in abspath
    cwd = os.getcwd()
OSError: [Errno 2] No such file or directory
Error in sys.excepthook:
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/apport_python_hook.py", line 70, in apport_excepthook
    binary = os.path.realpath(os.path.join(os.getcwdu(), sys.argv[0]))
OSError: [Errno 2] No such file or directory

Original exception was:
Traceback (most recent call last):
  File "<string>", line 1, in <module>
  File "/usr/local/lib/python2.7/dist-packages/virtualenvwrapper/hook_loader.py", line 16, in <module>
    from stevedore import ExtensionManager
  File "/usr/local/lib/python2.7/dist-packages/stevedore/__init__.py", line 1, in <module>
    from .extension import ExtensionManager
  File "/usr/local/lib/python2.7/dist-packages/stevedore/extension.py", line 4, in <module>
    import pkg_resources
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 2697, in <module>
    _declare_state('object', working_set = WorkingSet())
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 435, in __init__
    self.add_entry(entry)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 450, in add_entry
    for dist in find_distributions(entry, True):
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1723, in find_on_path
    path_item = _normalize_cached(path_item)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1872, in _normalize_cached
    _cache[filename] = result = normalize_path(filename)
  File "/usr/lib/python2.7/dist-packages/pkg_resources.py", line 1866, in normalize_path
    return os.path.normcase(os.path.realpath(filename))
  File "/usr/lib/python2.7/posixpath.py", line 375, in realpath
    return abspath(filename)
  File "/usr/lib/python2.7/posixpath.py", line 347, in abspath
    cwd = os.getcwd()
OSError: [Errno 2] No such file or directory 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T12:06:57.857

您正在尝试`virtualenv`在已删除的目录中运行。重新创建目录，或使用`cd`转至现有目录。

# asp.net - 如何在 LinkBut ton 点击 事件上获取回发数据？

> ID：13682103
> 
> 赞同：0
> 
> 时间：2012-12-03T11:16:04.350
> 
> 标签：asp.net, .net

我在 aspx 页面中有一个 LinkBut​​ton。

```
<asp:TextBox ID="textBoxNote" runat="server" />
    <asp:LinkButton ID="linkButtonUpdateNote" Text="Update" OnClick="ButtonUpdateNoteClicked" runat="server" /> 
```

点击事件处理程序具有以下代码

```
 protected void ButtonUpdateNoteClicked(object sender, EventArgs e)
        {
            var note = textBoxNote.Text;
        } 
```

在回发时 textBoxNote.Text 为空。我没有得到发布的价值。如何获得价值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T11:18:22.320

看来您可能正在重置`Page_Load`.

检查您是否正在使用`IsPostback`检查`Page_Load`功能。见 - [http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx)

```
private void Page_Load()
{
    if (!IsPostBack)
    {
        DoThisOnce();
    }

    DoThisOnEachPostback();
} 
```

# android - 用于 Android 清单版本控制的 Ant 构建文件

> ID：13682107
> 
> 赞同：1
> 
> 时间：2012-12-03T11:16:14.180
> 
> 标签：android, eclipse, ant

我正在尝试使用 Ant 构建文件自动更新 Android Manifest。代码本身似乎可以工作（手动运行时），但从 Eclipse 运行项目时，我似乎无法让它完全工作。预构建部分有效，问题是清理（构建后）。我正在尝试在构建之后撤消所有内容，以便在 repo 中没有任何更改的文件：

```
<project name="manifest-versioning" default="pre-build" >

<target name="pre-build" depends="get-repository-info,add-manifest-version">

    <echo>Android Manifest was updated</echo>

</target>

<target name="get-repository-info">

    <echo>Get the total number of git commits</echo>
    <exec executable="sh" outputproperty="git.commits">
        <arg value="-c" />
        <arg value="git log --pretty=format:&apos;&apos; | wc -l" />
    </exec>
    <echo>git.commits: ${git.commits}</echo>

    <echo>Get the version from the git release branch</echo>
    <exec executable="sh" outputproperty="git.branchversion">
        <arg value="-c" />
        <arg value="git rev-parse --abbrev-ref HEAD  | cut -d &apos;-&apos; -f2" />
    </exec>
    <echo>git.branchversion: ${git.branchversion}</echo>

    <echo>Get the number of git release branch commits</echo>
    <exec executable="sh" outputproperty="git.branchcommits">
        <arg value="-c" />
        <arg value="git log master..release-${git.branchversion} --oneline | wc -l" />
    </exec>
    <echo>git.branchcommits: ${git.branchcommits}</echo>

    <echo>Get the last known subversion revision number from git svn</echo>
    <exec executable="sh" outputproperty="git.svnrevision">
        <arg value="-c" />
        <arg value="git svn log --oneline -1 | cut -d &apos; &apos; -f1 | cut -d &apos;r&apos; -f2" />
    </exec>
    <echo>git.svn.revision: ${git.svnrevision}</echo>

    <!-- create a temporary property file for later use -->
    <propertyfile file="git.properties" comment="Git properties">
        <entry key="commits" type="int" value="${git.commits}" />
        <entry key="branchversion" value="${git.branchversion}" />
        <entry key="branchcommits" type="int" value="${git.branchcommits}" />
        <entry key="svnrevision" type="int" value="${git.svnrevision}" />
    </propertyfile>

</target>

<target name="add-manifest-version" depends="get-repository-info">

    <echo>Creating backup of AndroidManifest.xml</echo>
    <copy file="AndroidManifest.xml"
        tofile="AndroidManifest.xml.antbak"
        preservelastmodified="false" /> <!-- true copies postcopy changes as well -->

    <echo>Adding version numbers to AndroidManifest.xml</echo>
    <replaceregexp
        file="AndroidManifest.xml"
        match="android:versionCode=&quot;(\d+)&quot;"
        replace="android:versionCode=&quot;${git.svnrevision}&quot;" />
    <replaceregexp
        file="AndroidManifest.xml"
        match="android:versionName=&quot;(\d+\.\d+)\.\d+&quot;"
        replace="android:versionName=&quot;${git.branchversion}.${git.branchcommits}&quot;" />

</target>

<target name="post-build" depends="restore-manifest,create-versioned-apk">

    <echo>Android Manifest was restored</echo>

</target>

<target name="restore-manifest">

    <echo>Restoring backup of AndroidManifest.xml</echo>
    <move file="AndroidManifest.xml.antbak"
      tofile="AndroidManifest.xml"
      preservelastmodified="false"
      overwrite="true" />

</target>

<target name="create-versioned-apk" depends="restore-manifest">

    <property name="out.final.file" value="bin/Zorgdashboard.apk" />
    <property prefix="git" file="git.properties"/>
    <property name="suffix" value="${git.branchversion}.${git.branchcommits}.apk" />

    <exec executable="sed" inputstring="${out.final.file}" outputproperty="out.final.renamedfile">
        <arg value="s/\.apk/-${suffix}/" />
    </exec>

    <copy file="${out.final.file}" tofile="${out.final.renamedfile}" />
    <echo>Final file copied to: ${out.final.renamedfile}</echo>

    <delete file="git.properties" />

</target>

</project> 
```

我猜我在设定目标时做错了什么。我还尝试将恢复部分放在单独的文件中，但无济于事。这甚至可能吗？

# jakarta-ee - org.springframework.beans.factory.NoSuchBeanDefinitionException：没有定义名为“transactionManager”的bean

> ID：13682111
> 
> 赞同：1
> 
> 时间：2012-12-03T11:16:44.287
> 
> 标签：jakarta-ee, junit

当我尝试在 junit 测试类中加载我的配置文件时，我在注入数据源时遇到以下错误：

org.springframework.beans.factory.NoSuchBeanDefinitionException：在 org.springframework.beans.factory.support 的 org.springframework.beans.factory.support.DefaultListableBeanFactory.getBeanDefinition(DefaultListableBeanFactory.java:529) 中没有定义名为“transactionManager”的 bean。 AbstractBeanFactory.getMergedLocalBeanDefinition(AbstractBeanFactory.java:1094) at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:276) at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java: 196) 在 org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1079) 在 org.springframework.test.context.transaction.TransactionalTestExecutionListener.getTransactionManager(TransactionalTestExecutionListener.java:308) 在 org.springframework.test.context.TestContextManager.beforeTestMethod(TestContextManager.java:358) 在 org.springframework.test.context 的 org.springframework.test.context.transaction.TransactionalTestExecutionListener.beforeTestMethod(TransactionalTestExecutionListener.java:158) .junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:73) at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:82) at org.springframework.test.context.junit4.statements .SpringRepeat.evaluate(SpringRepeat.java:72) 在 org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240) 在 org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50) 在org.junit.runners。ParentRunner$3.run(ParentRunner.java:193) at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52) at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191) at org.junit .runners.ParentRunner.access$000(ParentRunner.java:42) at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184) at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks .java:61) 在 org.springframework 的 org.junit.runners.ParentRunner.run(ParentRunner.java:236) 的 org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)。 test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180) 在 org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49) 在 org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467) 在 org .eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) 在 org.eclipse.jdt .internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)390）在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main（RemoteTestRunner.java:197）390）在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main（RemoteTestRunner.java:197）

请任何人都可以帮助我解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:29:43.503

看来您无法访问“transactionManager”。如我所见，您进行了单元测试，然后我想您不访问 ApplicationContext.xml 文件（或声明您的 bean 的任何位置）。

对于单元测试，您应该通过注释显式地给出 bean 文件。

这些注释对我有用：

```
@TransactionConfiguration(transactionManager="transactionManager", defaultRollback=true)
@Transactional
@ContextConfiguration(locations={"classpath:applicationContext.xml",
    "classpath:applicationContext-dao.xml",
    "classpath:applicationContext-services.xml",
    "classpath:/com/xxx/zzz/test/CompanyServiceTest-context.xml"})
public class CompanyServiceTest extends AbstractTransactionalJUnit4SpringContextTests {
private static Log LOG = LogFactory.getLog(CompanyServiceTest.class);

@Autowired
public CompanyService companyService;

@Before
public void setUp() {
    System.err.println("Clear the mailboxes...");
    Mailbox.clearAll();
}

    @Test
    public void testCreateCompany() throws IOException, BusinessException, MessagingException {
        LOG.info("Creating the company DEMO...");
    } 
```

}

# google-chrome - 如何获取 chrome 的字母数字扩展 ID

> ID：13682113
> 
> 赞同：0
> 
> 时间：2012-12-03T11:17:18.713
> 
> 标签：google-chrome, google-chrome-extension

> **可能重复：**
> [Google Chrome - 用于识别扩展的字母数字哈希](https://stackoverflow.com/questions/1882981/google-chrome-alphanumeric-hashes-to-identify-extensions)

我已经编写了一个 chrome 扩展，我正在使用 --pack-extension switch 打包它，它给了我一个 .crx 文件和一个 .pem 文件。现在我想使用 Windows 注册表在我的部署机器上安装这个扩展，因为我想知道如何获取扩展 id（如果将 .crx 文件拖放到 chrome://extensions 选项卡，我们会得到）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:25:14.920

[chrome.management API()](https://developer.chrome.com/extensions/management.html)的**[扩展信息](https://developer.chrome.com/extensions/management.html#type-ExtensionInfo)**获取扩展 ID。但是[onInstalled()](https://developer.chrome.com/extensions/management.html#event-onInstalled)事件返回已安装扩展的所有[扩展信息](https://developer.chrome.com/extensions/management.html#type-ExtensionInfo)。

**前任：**

如果打包后的扩展 id 是**`kpddfdhkifopcepoldlgidejfnbhdbdn`**，那么它在任何托管的地方都是一样的。

如果您需要更多信息，请与我们联系。

# jstl - JSTL 和 scriptlet 代码

> ID：13682118
> 
> 赞同：2
> 
> 时间：2012-12-03T11:17:25.863
> 
> 标签：jstl, javabeans, scriptlet

所以在我的 JSP 页面中，我使用 javabean 从 MySQL 获取一些数据。

```
<%= myObj.getContent() %> 
```

假设返回的数据为以下形式：

```
<!-- Content Begin -->
I am trying to use JSTL from within a database field. 
<br />
<taglib:someTag id="${id}"></taglib:someTag>
<!-- Content End --> 
```

但标签不会评估，而是按原样出现在 HTML 源代码中。

我究竟做错了什么？有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:44:41.823

JSP 表达式(<%= %>) 用于将执行脚本表达式的结果添加到响应中。你可以让你的javabean写入一个文件。一旦你有了一个文件，你就可以使用一个包含来执行它，然后添加到响应中。
如果您不想创建文件，那么您可以创建一个可以调用您的 javabean 的 Servlet。您的 JSP 可以包含来自 Servlet 的响应。

# php - 通过 PHP 设置 cookie 并使用 JavaScript 读取

> ID：13682124
> 
> 赞同：-1
> 
> 时间：2012-12-03T11:17:52.667
> 
> 标签：php, javascript, jquery, cookies, laravel

我使用 Laravel PHP 框架并使用 Cookie::put(..) 设置 cookie，

使用 Laravel PHP 设置 cookie 的代码，

```
Cookie::put('id', $id , 0, '/'); 
```

当我查看它时，我发现 cookie 被设置为对我有好处的根路径。

现在在 JS 中，我使用一个 jQuery 插件来读取 cookie，但它在读取 PHP 设置的 cookie 时返回 null。

访问cookie的JS代码，

```
function getCookie(c_name)
{
   var i,x,y,ARRcookies=document.cookie.split(";");
   for (i=0;i<ARRcookies.length;i++)
   {
     x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
     y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
     x=x.replace(/^\s+|\s+$/g,"");
     if (x==c_name){
         return unescape(y);
     }
    }
 } 
```

print_r($_COOKIE)

```
 Array ( [id] => 653a8dbd0903d2eacfdfe87bce29640d136a4380+1 [session_payload] => 2c3e260bb766ea1519dcbc3d13025d3ede6e2e63+mSfAHUAPvmFefQbIArozzbQfY0IzZpAeTarpQsHHOseN+SD3xmmUWfUduVYWf7qVu1Rwo2XYIBSBTUt+J1DhbE9sN2yEelpjsHzU0CVw3F1aPpcPh6oSTzIfskr2hHuWIGi5sf1lvD7qRHtcjPOBD700vnQSy2+DIMTNT4eMS7pz85zi9TMpgLQfWbtUUtNQk1SRHwncwgQyp1xhgPqp4d6eLjaZQ2hXBtOgYbC2Ty5xS4e76WCW+dumNMj3hkSfMoDssKnmRTzV7jYUT6a+oH26tZkKOR8EMMh04xHMWlt73aFsL9EZrIXZFKHkOXqU883qThWot//emOpakBKWyA== [laravel_session] => 2729bdfca6fe6e6f3c98d03c11a65915649af09b+ML1G6xZ5YkImViUxm9gOaTo5AT8jyBfqagdoeyAs ) 1 
```

更新：

我真的不知道为什么这被否决但在这里，

我想使用之前使用 PHP 添加的 JS 访问 cookie。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:32:32.627

如果 COOKIE 过期设置为 0，则 cookie 将在会话结束时（浏览器关闭时）过期。所以，JS不会读取过期的COOKIE

尝试将 COOKIE 过期时间设置更长，

```
Cookie::put('id', $id , time()+3600, '/'); //set the cookie alive for 1 hour 
```

# file - 执行复制命令时如何将日期和时间放在文件名中？

> ID：13682129
> 
> 赞同：0
> 
> 时间：2012-12-03T11:18:45.517
> 
> 标签：file, datetime, vim, command-line, save

我想使用 copy 命令备份 menu.vim：

```
exe '!cp "c:\Program Files\Vim\vim73\menu.vim" d:\bkp_menu-vim_DATE_TIME.txt' 
```

我想将 DATE 和 TIME 添加到备份文件的名称中。

我找到了这个命令：`<C-R>=strftime("%Y-%m-%d_%H-%M")`
但不知道如何将它插入到复制命令中。谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:51:16.713

当您到达零件时，只需将其作为命令行的`_DATE`一部分输入即可；`<C-R>`表示`Ctrl`+ `R`。当您输入 时`=`，Vim 将清除命令行并让您输入表达式，当您按`<CR>`( `Enter`) 时将插入其结果。详情请参阅`:help c_CTRL-R`。

对于这种简单的备份方式，您可能会发现我的[writebackup 插件](http://www.vim.org/scripts/script.php?script_id=1828)很有用；它将它缩短为仅`:W`（当您打开 menu.vim 时）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:01:29.350

这是做你想做的吗？

```
:exe '!cp  c:\Program Files\Vim\vim73\menu.vim d:\bkp_menu-vim_'.strftime("%Y-%m-%d_%H-%M").'.txt' 
```

# c++ - 检查 struct 的成员是否仅按字母顺序排列

> ID：13682130
> 
> 赞同：0
> 
> 时间：2012-12-03T11:18:51.073
> 
> 标签：c++

我尝试使用，

```
if(isalpha(card[i].name))
... 
```

但它说我不能将它与 char 类型一起使用这是我的代码： 这是结构：

```
struct firm {
unsigned egn;
char name[80];
char lastname[80];
char department[80];
unsigned salary;
}card[100]; 
```

这是我要检查是否只有字母然后继续的功能：

```
void enter()
{
int i, n;
char temp[80];
do{
    cout<<"Enter how many workers you want to add: ";cin>>n;
}while(!(n>0 && n<101));
for(i=top;i<n;i++)
{/*ЕГН + проверка*/
    cout<<"Enter EGN: ";do{
    cin>>temp;
if((strlen(temp)!=10))
    cout<<"Enter EGN: ";
}while(strlen(temp)!=10);
card[i].egn = (unsigned) atoi (temp);
/*Име Фамилия*/
cout<<"Enter name(only letters): ";cin>>card[i].name;
cout<<"Enter lastname(only letters): ";cin>>card[i].lastname;
cout<<"Enter department: ";cin>>card[i].department;
cout<<"Enter salary: ";cin>>temp;
card[i].salary = (unsigned) atoi (temp);
}
} 
```

当我尝试使用这种代码时：

```
cout<<"Enter name(only letters): ";do{
cin>>card[i].name;
if(isalpha(card[i].name))
.....; 
```

它说我不能在 int 中使用 char （isalpha 使用 int？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:20:43.743

您需要*遍历*字符串的每个字符，`isalpha()`只测试一个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:34:17.133

您不能`isalpha`在整个`char`数组上使用，只能在单个字符上使用。要检查`char`数组中的每个字符是否按字母顺序排列，您可以使用以下`std::all_of`算法：

```
auto name_begin = std::begin(card[i].name);
auto name_end = std::end(card[i].name);
bool name_alpha = std::all_of(name_begin, std::find(name_begin, name_end, '\0'), std::isalpha);
if (name_alpha) {
  std::cout << "It's alphabetical!" << std::endl;
} 
```

如果您使用的编译器没有必要的 C++11 支持，您可以执行以下操作：

```
char* name_begin = card[i].name;
bool name_alpha = std::all_of(name_begin, name_begin+std::strlen(name_begin), std::isalpha);
if (name_alpha) {
  std::cout << "It's alphabetical!" << std::endl;
} 
```

然后是不使用标准库算法的无聊方式：

```
bool name_alpha = true;
for (char* character = card[i].name; *character != '\0'; character++) {
  if (!std::isalpha(*character)) {
    name_alpha = false;
    break;
  }
}
if (name_alpha) {
  std::cout << "It's alphabetical!" << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:29:17.797

问题是 name 本身就是一个字符数组，所以你需要像这样测试每个元素：

```
.....
cout<<"Enter name(only letters): ";do{
cin>>card[i].name;
bool bIsAlpha = true;
for (int j = 0; j < strlen(card[i].name); ++j)
{
  if(!isalpha(card[i].name[j]))
  {
    bIsAlpha = false;
    break;
  }
}
if (bIsAlpha)
{
  .....;
} 
```

# android - 如何设置日间模式和夜间模式

> ID：13682134
> 
> 赞同：3
> 
> 时间：2012-12-03T11:19:12.977
> 
> 标签：android

主题类

主要的.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:padding="@dimen/padding_medium"
            tools:context=".MainActivity" />
    <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignRight="@+id/textView1"
            android:layout_below="@+id/textView1"
            android:layout_marginRight="59dp"
            android:layout_marginTop="41dp"
            android:text="Button" />
</RelativeLayout> 
```

我想在 android 中的 Button click 上设置日夜主题。请告诉我如何做到这一点。如何创造风格和所有。我是安卓新手。我试了很多都做不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-15T12:43:16.517

添加到您`res` `values-night`并定义`colors.xml`. 在定义官方文档中`Application`或`Activity`之后- [UiModeManager](http://developer.android.com/intl/ru/reference/android/app/UiModeManager.html) 此代码在 API 23 中工作，在 19 中可能没有`super.onCreate()`
`UiModeManager umm = (UiModeManager){#context}.getSystemService(Context.UI_MODE_SERVICE); umm.setNightMode(UiModeManager.MODE_NIGHT_YES); //MODE_NIGHT_YES|MODE_NIGHT_NO|MODE_NIGHT_AUTO`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:31:37.837

检查此答案中的解决方案：[how to set day and night theme in android application](https://stackoverflow.com/q/13561786/1869865)

我相信 SDK 的示例中有一个完整的功能示例，从 API 11 到 API 16（我还没有下载 API 17）。

我已经使用了链接答案中提供的解决方案并且它有效。

希望这对你也有帮助。

# php - Google maps api：在服务器端获取折线的长度

> ID：13682136
> 
> 赞同：3
> 
> 时间：2012-12-03T11:19:14.923
> 
> 标签：php, google-maps, google-maps-api-3

我在mysql中有折线数据。我想在 php 中测量它的长度。我看过[距离矩阵 api](https://developers.google.com/maps/documentation/distancematrix/)。但它要求 origin_addresses 和 destination_addresses ，我没有这些值。

我找到[了 decodePolylineToArray](https://github.com/modolabs/Harvard-Mobile-Web/blob/master/mobi-lib/decodePolylineToArray.php)要点，但是当我解码我的折线时，有很多值。如何测量折线的长度？我正在使用 php，但如果您有另一种语言的方法，我可以将其移植到 php。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:01:07.690

您需要对折线中的每个路径使用 Haversine 公式： [http ://en.wikipedia.org/wiki/Haversine_formula](http://en.wikipedia.org/wiki/Haversine_formula)

对于不同的编程语言搜索： [https ://www.google.ch/search?q=php+haversine+formula&aq=0&oq=php+Haversine&aqs=chrome.1.57j0l3j62l2.8586&sourceid=chrome&ie=UTF-8](https://www.google.ch/search?q=php+haversine+formula&aq=0&oq=php+Haversine&aqs=chrome.1.57j0l3j62l2.8586&sourceid=chrome&ie=UTF-8)

这是 JS 中手动计算的一个很好的示例[Calculate distance between two points between google maps V3](https://stackoverflow.com/questions/1502590/calculate-distance-between-two-points-in-google-maps-v3)，但有一个更简单的方法：

```
google.maps.geometry.spherical.computeDistanceBetween(path.getAt(i), path.getAt(i+1)); 
```

查看此示例： 使用它的[http://www-users.mat.umk.pl/~kaskader/polyline_simple.html 。](http://www-users.mat.umk.pl/~kaskader/polyline_simple.html)

高温高压

# shell - 外壳脚本 (awk)

> ID：13682141
> 
> 赞同：0
> 
> 时间：2012-12-03T11:19:36.240
> 
> 标签：shell, unix, awk

如何使用 unix shell 脚本 awk 从文本文件中提取一些行。

例如 1) 输入：file_name_test.txt

```
**<header> asdfdsafdsf**  
11 asd sad
12 sadf asdf
13 asdfsa asdf
14 asd sdaf
**15 asd asdfsdf
16 sadfsadfsaf sdfsdf
17 asdf sdaf
18 asfd saf
19 sadf asdf
10 asf asf** 
```

2）预期输出：

```
**<header> asdfdsafdsf
15 asd asdfsdf
16 sadfsadfsaf sdfsdf
17 asdf sdaf
18 asfd saf
19 sadf asdf
10 asf asf** 
```

3) test.sh 的代码：

```
FILENAME=$1
threshold=$2
awk '{line_count++;
if (line_count==1 || (line_count>$threshold))
print $0;
}' $FILENAME > overflow_new2 
```

4)

```
sh test.sh file_name_test.txt 5 
```

5）它只打印第一行：

```
<header> asdfdsafdsf 
```

在输出文件overflow_new2 中。并在腻子中返回这些行：

```
awk: Field $() is not correct.
The input line number is 2\. The file is file_name_test.txt
The source line number is 2. 
```

任何的想法？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:29:23.620

让我先修复你的脚本：

```
#!/bin/bash
FILENAME=$1
THRESHOLD=$2

awk -v t=$THRESHOLD '{
        lc++;
        if (lc == 1 || lc > t) {
                print $0;
        }
}' $FILENAME 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:30:19.170

您需要将 shell 变量传递给`awk`using`-v`标志：

```
filename=$1
threshold=$2

awk -v thres="$threshold" '
    { line_count++ }
    line_count==1 || line_count > thres { print }
' $filename > overflow_new2 
```

当运行时：

```
./script.sh file_name_test.txt 5 
```

结果/内容`overflow_new2`：

```
**<header> asdfdsafdsf**  
**15 asd asdfsdf
16 sadfsadfsaf sdfsdf
17 asdf sdaf
18 asfd saf
19 sadf asdf
10 asf asf** 
```

此外，要准确再现所需的结果，我会这样做：

```
filename=$1
threshold=$2

awk -v thres="$threshold" '
    FNR == 1 {
        sub(/**\s*$/,"")
        print
    }
    FNR > thres {
        sub(/^**/,"")
        print
    }
' $filename > overflow_new2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-14T22:46:33.010

这是类似于 glenn jackman 的解决方案的 Perl 代码：

```
perl -slne 'print if $. == 1 or $. >= $n' -- -n=15 
```

`$.`是行号

# git - Git远程仓库中的项目文件在哪里？

> ID：13682144
> 
> 赞同：1
> 
> 时间：2012-12-03T11:19:46.827
> 
> 标签：git, git-remote, git-bare

我开始使用 Git 和我的项目 VCS。我创建了一个远程仓库使用

```
git init --bare 
```

在 /codes-repo 并将更改从本地 repo 推送到那里。然后我想将项目文件从那里移动到 /var/www/project 以供 http://.... 访问。但我在 /codes-repo 没有看到任何项目文件（index.php、css/、....）来复制它们，那里只有 git 文件和文件夹。他们在哪里？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T11:22:53.157

裸存储库没有签出。也就是说，裸存储库仅保存提交信息 - 它不会在存储库文件夹中保留磁盘上实际文件的副本。

裸仓库只能被推入或拉出。要获取文件，最好的办法可能是克隆裸存储库（作为非裸克隆），并在克隆处运行结帐。

另一种选择，如果你觉得勇敢的话，是将裸存储库转换为非裸存储库（[如何将裸 git 存储库转换为普通存储库（就地）？](https://stackoverflow.com/questions/10637378/how-do-i-convert-a-bare-git-repository-into-a-normal-one-in-place)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T11:28:32.277

要从裸存储库复制文件，您可以使用 git archive

```
GIT_DIR=~/BARE_REPO git archive --format tar master | tar xvf - 
```

git archive 命令会将目标提交（例如 marter）转换为 tar 格式，并发送到标准输出。您可以将其通过管道传输到 tar 命令以立即提取。

另一种方法是检查存储库。

```
git checkout ~/BARE_REPO myproject 
```

但是，将整个目录放入您的 Web 服务器是不合适的。否则，您的整个 .git 目录将可以访问。任何人都可以获得您的源代码和完整的提交历史记录（当然，您可以通过 .htaccess 或 nginx 设置阻止这些访问）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T11:26:26.440

裸存储库没有所谓的*工作目录*，因此不会有任何文件系统对象。

Git 仍然跟踪内容、提交、标签等，但将它们打包存储在某个地方。当您在非裸存储库中执行*git checkout*时，git 会更新索引（存储库中的文件）以反映作为参数给出的树状对象。

# windows-phone-7 - 在不使用 MVVM 的情况下专注于登录页面

> ID：13682147
> 
> 赞同：0
> 
> 时间：2012-12-03T11:20:09.450
> 
> 标签：windows-phone-7, mvvm

我有基于 MVVM 的登录页面，我尝试在正确登录之前调用 this.focus，但问题是我必须单击两次。第一个只是隐藏键盘并给我有关丢失用户名/密码的信息。

因此，问题可能与 mvvm 事物有关，因为当用户首先单击应用程序栏按钮时，字段未更新。

我是 MVVM 的新手，所以我怎样才能专注于使用它的页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:27:01.713

最后，我在没有 MVVM 的情况下做到了。下面是我的应用程序栏按钮处理程序。

```
void Set_Details_MenuItem_Click(object sender, EventArgs e)
        {   
            object focusObj = FocusManager.GetFocusedElement();
            if (focusObj != null && (focusObj is PasswordBox || focusObj is TextBox))
            {
                if (focusObj is PasswordBox)
                {
                    var binding = (focusObj as PasswordBox).GetBindingExpression(PasswordBox.PasswordProperty);
                    binding.UpdateSource();
                    viewModel.Login();
                }
                else if (focusObj is TextBox)
                {
                    var binding2 = (focusObj as TextBox).GetBindingExpression(TextBox.TextProperty);
                    binding2.UpdateSource();
                    viewModel.Login();
                }   
            }
            else
            {
                viewModel.Login();
            }
        } 
```

# tsql - 计算时间间隔的总秒数

> ID：13682151
> 
> 赞同：1
> 
> 时间：2012-12-03T11:20:38.900
> 
> 标签：tsql

考虑一个包含时间间隔信息的表，如下所示：

```
ID  StartTime             EndTime
==================================================
1   2012-11-22 06:14:10   2012-11-22 06:18:00
2   2012-11-22 06:16:10   2012-11-22 06:19:40
3   2012-11-22 06:20:50   2012-11-22 06:21:20
4   2012-11-22 06:22:30   2012-11-22 06:23:00
5   2012-11-22 06:22:10   2012-11-22 06:24:40
..................................................
.................................................. 
```

问题是找到更好的 t-sql 方法来计算这些间隔的总秒数，只考虑一次交叉路口时间。

例如，前三个记录的总秒数为 360。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:22:33.040

这是一个示例，脚本正在查找任何行中不包含秒数的间隔，并将其从第一个“开始”和最后一个“结束”之间的秒数之和中减去。该脚本假设开始时间总是小于或等于结束时间

```
select max(totalsec) - coalesce(sum(datediff(second, t.endtime, a.starttime)),0) from <table> t
cross apply
(select min(starttime) starttime from <table> where t.endtime < starttime) a
cross apply(select datediff(second, min(starttime), max(endtime)) totalsec from <table>) b
where 
not exists (select 1 from <table> where id <> t.id and t.endtime >= starttime and t.endtime < endtime) 
```

# jquery - 使用 jQuery 选项卡到 MVC4 控制器的字符串参数

> ID：13682154
> 
> 赞同：1
> 
> 时间：2012-12-03T11:20:49.140
> 
> 标签：jquery, c#-4.0, razor, asp.net-mvc-4

我有一个 MVC4 剃须刀视图（index.cshtml），其中包含以下 jQuery 生成的选项卡链接：

```
<div id="tabs">
<ul>
    @foreach (var item in Model)
    {
       <li><a href="/MetaData/Edit?Name=@item.Name">@item.DisplayName</a></li>
    }
</ul>
<div id="tabs-1">

</div>
</div> 
```

通过以下控制器方法生成：

```
 public ActionResult Index()
    {
        return PartialView("Index", db.MetaDatas.ToList());
    } 
```

其次，各个tab链接的相关控制器方法如下：

```
 [HttpGet]
    public ActionResult Edit(string Name = "")
    {
        MetaData item = db.MetaDatas.Where(md => md.Name.Equals(Name)).Single();

        if (item == null)
        {
            return PartialView(null);
        }
        return PartialView(item);
    } 
```

它通过 ajax 将 edit.cshtml 加载到选项卡 div 中，如下所示：

```
@model Data.MetaData
<div id="_metadata_content">

    <div class="message-success">@ViewBag.SuccessMessage</div>
    <div class="message-error">@ViewBag.ErrorMessage</div>

    @using (Ajax.BeginForm("Edit", "MetaData", new AjaxOptions { UpdateTargetId = "_metadata_content", HttpMethod = "POST" }
    ))
    {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>MetaData</legend>

        <h2>@Model.DisplayName</h2>

        @Html.HiddenFor(model => model.Name)
        @Html.HiddenFor(model => model.DisplayName)
        @Html.HiddenFor(model => model.AllowEdit)

        <div class="editor-field">
        @Html.TextAreaFor(model => model.Val, new { @cols = 80, @rows = 10 })
        @Html.ValidationMessageFor(model => model.Val)
        </div>
        <p>
        @if(Model.AllowEdit)
        {
            <input type="submit" value="Save"/>
        }
        </p>
    </fieldset>

    }
</div> 
```

表单保存按钮链接到以下控制器方法：

```
[HttpPost]
public ActionResult Edit(MetaData metaData)
{
    ViewBag.ErrorMessage = "Error updating value";
    ViewBag.SuccessMessage = "";
    if (ModelState.IsValid)
    {
    db.Entry(metaData).State = EntityState.Modified;
    db.SaveChanges();
    ViewBag.SuccessMessage = "Value updated successfully";
    ViewBag.ErrorMessage = "";
    }

    return PartialView("Edit", metaData);
} 
```

保存工作正常并成功调用控制器的 Edit 方法。返回时 SuccessMessage 和 ErrorMessage 值会正确更新。

但是，如果选择了另一个选项卡，则 @ViewBag.SuccessMessage 和 @ViewBag.ErrorMessage 值不会传播到 edit.cshtml。尽管这些值已正确保存到数据库中。

我感觉这与 jQuery 选项卡链接 /MetaData/Edit?Name=@item.Name 的构造有关。原因是我在系统的另一部分有一个相同结构的页面，但是我使用 /Controller/Action/@Model.Value 构建链接。出于某种原因，我无法使用字符串参数构造这样的链接，它只是作为 null 出现，因此我使用了？Name=@item.Name。

有没有人有任何想法或经历过类似的问题？

# sql-server-2008 - where子句中的sql server空值

> ID：13682157
> 
> 赞同：1
> 
> 时间：2012-12-03T11:20:56.827
> 
> 标签：sql-server-2008, null, isnull

有一张表只有一行有 4 个日期列，最初所有日期值都是空的，所以

```
if Exists(select 1 from rep_master where pacdt_1=null OR
pacdt_2=null OR
pacdt_3=null OR
pacdt_4=null)
select 0
else
select 1 
```

这个要回来了**`1`**

```
if Exists(select 1 from rep_master where ISNULL(pacdt_1,0)=0 or
ISNULL(pacdt_2,0)=0  or
ISNULL(pacdt_3,0)=0 or
ISNULL(pacdt_4,0)=0 )
select 0
else
select 1 
```

这个正在返回**`0`**，这是正确的结果
我无法弄清楚第一个查询有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T11:22:12.307

使用`IS NULL`而不是`= NULL`

所以：

```
if Exists(select 1 from rep_master 
          where pacdt_1 is null OR pacdt_2 is null OR
                pacdt_3 is null OR pacdt_4 is null)
   select 0
else
   select 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:24:18.900

你不能等于null，你必须使用`IS`

```
if Exists(select 1 from rep_master where pacdt_1 IS null OR
pacdt_2 IS NULL OR
pacdt_3 IS NULL OR
pacdt_4 IS NULL)
select 0
else
select 1 
```

获取您使用的值不为 null 的位置`IS NOT`

```
if Exists(select 1 from rep_master where pacdt_1 IS NOT null OR
pacdt_2 IS NOT NULL OR
pacdt_3 IS NOT NULL OR
pacdt_4 IS NOT NULL)
select 0
else
select 1 
```

# actionscript-3 - Actionscript 3 我需要有人来帮助我进行碰撞检测（hiTestObject）

> ID：13682160
> 
> 赞同：0
> 
> 时间：2012-12-03T11:21:05.830
> 
> 标签：actionscript-3, flash, collision-detection

我会尽量解释这个问题。我想要做的是检查对象之间的碰撞。还有子弹和敌人，如果它是子弹的 1 和敌人的 1，那没问题，但是在谷歌上一天之后，尝试了所有解决方案，我无法让它工作，或者我找到了解决方案这绝对是可怕的解释。我要让它变得更容易。我有 MainClass.as 那个文档类。这是敌人的一类，子弹的一类。我希望每个人都明白，我不想检查子弹击中是否是敌人。或者其他方式。例如，由于项目符号是在单击时制作的，因此无法直接引用项目符号。我尝试过的是使用精灵容器，如果我将子弹放在敌人身上只是为了检查，它确实有效，但是如果我把一个放在下面和上面，那并没有击中敌人，它仍然说敌人被击中了。请注意，敌人被拖到舞台上，因为我将拥有多个。我也可以用代码添加它们。我尝试使用 Array 在所有敌人之间洗牌，但我无法让它工作。

我知道这是很多文字。希望有人愿意帮助我，这太令人沮丧了......

最好的问候 HFherasen！:):)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:29:00.967

好吧，如果您不使用 Box2DFlash 之类的物理引擎，那可能会令人沮丧。

首先，你必须知道子弹的速度/帧数，因为如果它在一帧内超出目标，简单的检测将不起作用。比，你应该有子弹的速度和方向。为简单起见，让我们使用它的一个点。（子弹头，或中间）子弹通常比目标移动得快很多，所以你可以假设目标是固定的。目标是一个矩形，或可能旋转的多边形。

现在你有了一个目标和一条子弹线（从点和方向）。 [http://keith-hair.net/blog/2008/08/04/find-intersection-point-of-two-lines-in-as3/](http://keith-hair.net/blog/2008/08/04/find-intersection-point-of-two-lines-in-as3/) 你可以使用这个（转换为as3），与目标的所有方面（或仅面向子弹的那些），如果匹配，则射击将击中目标。如果您的子弹速度较慢，您可以将帧的位置更改作为您的第一行。当它击中目标时，你会知道。这非常快，而且效果很好。希望它有所帮助。

# java - 如何使用 PIN 码自动配对蓝牙设备

> ID：13682161
> 
> 赞同：0
> 
> 时间：2012-12-03T11:21:12.530
> 
> 标签：java, android, bluetooth

我正在尝试将蓝牙设备与 Android 手机配对，但未向用户询问 PIN 码。

我的想法是从网络服务中获取所需的 PIN，因为我想要配对的蓝牙设备需要在不知道并输入 PIN 的情况下被更多人（以及更多安卓手机）使用。

你有什么想法吗？我试图查看蓝牙类，但在设备连接期间，我总是需要输入 PIN。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T10:59:01.320

您可以使用蓝牙配对的“正常工作”功能。这仅适用于从蓝牙 2.1 开始的 SSP（安全简单配对）。您必须设置设备的 IO 功能才能使其正常工作。

# java - ConcurrentModificationException Netbeans Gui

> ID：13682169
> 
> 赞同：1
> 
> 时间：2012-12-03T11:21:38.310
> 
> 标签：java, swing, user-interface, jtable

我在 Netbeans 上制作了一个小型 UI，并在单独的类中实现了代码（动作侦听器等）。我正在尝试使用存储在 MySql 数据库中的数据刷新 JTable，但是在运行时出现此错误主类，问题不在于 JDBC 连接，它工作正常，但它没有将数据打印到 JTable。

```
Exception in thread "main" java.util.ConcurrentModificationException
at java.util.Hashtable$Enumerator.next(Hashtable.java:1031)
at com.sun.java.swing.plaf.nimbus.NimbusStyle.compileDefaults(NimbusStyle.java:378)
at com.sun.java.swing.plaf.nimbus.NimbusStyle.validate(NimbusStyle.java:297)
at com.sun.java.swing.plaf.nimbus.NimbusStyle.getValues(NimbusStyle.java:927)
at com.sun.java.swing.plaf.nimbus.NimbusStyle.getInsets(NimbusStyle.java:605)
at javax.swing.plaf.synth.SynthStyle.installDefaults(SynthStyle.java:896)
at javax.swing.plaf.synth.SynthLookAndFeel.updateStyle(SynthLookAndFeel.java:275)
at javax.swing.plaf.synth.SynthLabelUI.updateStyle(SynthLabelUI.java:53)
at javax.swing.plaf.synth.SynthLabelUI.installDefaults(SynthLabelUI.java:48)
at javax.swing.plaf.basic.BasicLabelUI.installUI(BasicLabelUI.java:307)
at javax.swing.JComponent.setUI(JComponent.java:662)
at javax.swing.JLabel.setUI(JLabel.java:242)
at javax.swing.JLabel.updateUI(JLabel.java:256)
at javax.swing.table.DefaultTableCellRenderer.updateUI(DefaultTableCellRenderer.java:144)
at javax.swing.JLabel.<init>(JLabel.java:145)
at javax.swing.JLabel.<init>(JLabel.java:216)
at javax.swing.table.DefaultTableCellRenderer.<init>(DefaultTableCellRenderer.java:94)
at sun.swing.table.DefaultTableCellHeaderRenderer.<init>(DefaultTableCellHeaderRenderer.java:32)
at javax.swing.table.JTableHeader.createDefaultRenderer(JTableHeader.java:610)
at javax.swing.table.JTableHeader.initializeLocalVars(JTableHeader.java:632)
at javax.swing.table.JTableHeader.<init>(JTableHeader.java:138)
at javax.swing.JTable.createDefaultTableHeader(JTable.java:5586)
at javax.swing.JTable.initializeLocalVars(JTable.java:5520)
at javax.swing.JTable.<init>(JTable.java:614)
at javax.swing.JTable.<init>(JTable.java:540)
at AddressBookGui.initComponents(AddressBookGui.java:29)
at AddressBookGui.<init>(AddressBookGui.java:16)
at AddressBookImpl.refreshTable(AddressBookImpl.java:33)
at AddressBookImpl.startGUI(AddressBookImpl.java:26)
at AddressBookImpl.main(AddressBookImpl.java:16) 
```

**编辑：**是的，对不起，这里是调用它的代码，实际的 GUI 类是从 Netbeans 生成的，我没有触及它，所以除非真的有必要，否则我不会发布那个怪物。

```
public class AddressBookImpl extends AddressBookGui implements ActionListener {

public static void main(String[] args) {
    AddressBookImpl impl = new AddressBookImpl();
    impl.startGUI();
    impl.listeners();
}

public void startGUI(){
    AddressBookGui gui = new AddressBookGui();
    gui.main(null);
    setDefaultCloseOperation(DISPOSE_ON_CLOSE);
    this.setResizable(true);
    this.setTitle("Address Book");
    refreshTable();

}

@SuppressWarnings({ "rawtypes", "unchecked" })

public DefaultTableModel refreshTable() {
    AddressBookGui gui = new AddressBookGui();
    try{

    DatabaseImpl dbi = new DatabaseImpl();
    dbi.refreshDatabase();
    DefaultTableModel defaultTableModel = new DefaultTableModel();
    ResultSetMetaData md = dbi.refreshResult.getMetaData();

    int columnCount = md.getColumnCount();

    while(dbi.refreshResult.next())
    {
        Object [] rowData = new Object [columnCount];
        for (int i = 0; i < columnCount; i++)
        {
            rowData[i] = dbi.refreshResult.getObject(i+1);
        }
        ((DefaultTableModel) gui.mainTable.getModel()).insertRow(dbi.refreshResult.getRow() -1, rowData);
    }

    defaultTableModel.fireTableDataChanged();

    return defaultTableModel;

    } catch (SQLException e) {
        e.printStackTrace();
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:04:39.677

1.  访问`MetaData`返回信息`Database scheme`，而不是行中的值

2.  `MetaData`返回`ColumnNames`_`JTable`

3.  为什么`((DefaultTableModel) gui.mainTable.getModel()).insertRow(dbi.refreshResult.getRow() -1, rowData);`,`XxxTableModel`已经创建了，之前的六行代码

4.  永远不要使用`defaultTableModel.fireTableDataChanged();`for `DefaultTableModel`，这个通知是正确实现的`DefaultTableModel`

5.  `myModel()).insertRow (only, everything more is useless)`应该被包裹成`invokeLater()`for`JDBC Resultset`

6.  无法从此处发布的代码中识别其余问题（`JTable`从加载数据的真正问题）`Database`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:46:36.023

在 AddressBookImpl.main(AddressBookImpl.java:16) 将当前代码替换为

```
SwingUtilities.invokeLater( new Runnable(){
   @Override public void run(){ startGUI(); }}); 
```

# java - 哪种解决方案是正确的？

> ID：13682174
> 
> 赞同：-2
> 
> 时间：2012-12-03T11:22:01.447
> 
> 标签：java, swing

我开始用 Java 解决一个问题，但我为此做了两个解决方案。你能帮我找到正确的解决方案吗？

问题：

> 开发一个 `GuestInterface`包含方法的接口`public boolean equals(Guest g)`。实现此方法时，它会比较该类型的两个对象的内容`Guest`（参见下面的 (b)）。如果两个对象的状态相同，则该`equals`方法返回 true，否则返回 false。

第一个解决方案是：

```
Public interface GuestInterface
{

    public boolean equals(Guest g)
    {
    if((this.g == b)
    {
    return true;
    }
    else
    return false;
    {
{ 
```

另一个是：

```
public interface GuestInterface {  
    public boolean equals (Guest g);
} 
```

其中哪一个是正确答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:37:30.470

避免使用对象接口的方法。我建议使用不同的名称，例如

```
public interface GuestInterface {  
    public boolean isSameGuest(Guest g);
} 
```

现在您需要在任何类上实现它。就像我创建一个 Person 类实现了接口一样。

```
public class Person implements GuestInterface{
    @Override
    public boolean isSameGuest(Guest g){
        //... your code goes here...
    }
} 
```

# java - 使用字符串将对象添加到列表

> ID：13682177
> 
> 赞同：0
> 
> 时间：2012-12-03T11:22:13.680
> 
> 标签：java

我有以下定义很好

```
private List<Map<String, String>> list = new ArrayList<Map<String, String>>(); 
```

但现在我需要扩展它，第一个字符串也应该是类型列表。我尝试使用以下代码，添加新列表并更改第一个字符串以保存 listPrents，但出现了一些错误。

```
private Map<String, String> listParents = new HashMap<String, String>();
private List<Map<listParents, String>> list = new ArrayList<Map<String, String>>(); 
```

我怎么能做这样的事情，列表类型可以改变。

谢谢，费多尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:25:50.313

`List<Map<List<String>, String>> list = new ArrayList<Map<List<String>, String>>();`

但通常我不鼓励使用列表作为哈希图中的键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:31:12.610

您尝试做的事情在 Java 中是不可能的，甚至是不明智的，因为泛型实际上只是语法糖。在编译时不会对这些集合进行类型检查。泛型只是强制您只使用与泛型中给定类型相对应的类。您可以执行以下任一操作：

```
private List<Map<List<?>, String>> list = new ArrayList<Map<String, String>>(); 
```

你可以指定？进一步通过使用 extends 和 super 关键字，定义一个适合结构的类。

或者更简单的解决方案：

```
private List<Map<List<Object>, String>> list = new ArrayList<Map<String, String>>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T11:27:40.543

您不能将对象用作类类型（您尝试使用`listParents`实例在映射中定义字符串到字符串的映射。我想您来自`c`可以构建结构的世界，`typedef`但在这种情况下，您应该遵循其中一个答案发布了正确的定义，因为`Java`不支持 typedef

# javascript - 在 IE 中将文本旋转 330 度

> ID：13682178
> 
> 赞同：1
> 
> 时间：2012-12-03T11:22:15.240
> 
> 标签：javascript, jquery, html, css

是否可以在 IE 中旋转文本

```
-moz-transform: rotate(330deg);  /* FF3.5+ */
    -o-transform: rotate(330deg);  /* Opera 10.5 */
    -webkit-transform: rotate(330deg);  /* Saf3.1+, Chrome */
    filter:  progid:DXImageTransform.Microsoft.BasicImage(rotation=330deg);  /* IE6,IE7 */
    -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=330deg)"; /* IE8 */ 
```

为 IE 编写的行不起作用。

任何人都可以帮助。

**编辑。我想旋转交叉的文本**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:30:26.027

据我所知，IE 中的旋转只能以 90 度间隔进行。

在此处查看文档：http: [//msdn.microsoft.com/en-us/library/ms532918%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms532918%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:51:36.563

正如已经指出的那样，您想要的解决方案取决于目标 ie 版本。

您应该使用具有不同供应商前缀的所有转换

```
-vendor-transform : rotate(330deg); 
```

而对于不支持css旋转的ie版本，可以将旋转转换为a `filter matrix`，并应用到元素上。
[这是一个](http://www.useragentman.com/IETransformsTranslator/)自动将 css3 转换为过滤矩阵的站点：

```
 /* IE8+ - must be on one line, unfortunately */ 
 -ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=0.8660254037844387, M12=0.49999999999999994, M21=-0.49999999999999994, M22=0.8660254037844387, SizingMethod='auto expand')";

/* IE6 and 7 */ 
filter: progid:DXImageTransform.Microsoft.Matrix(
        M11=0.8660254037844387,
        M12=0.49999999999999994,
        M21=-0.49999999999999994,
        M22=0.8660254037844387,
        SizingMethod='auto expand'); 
```

唯一的缺点是为了使变换原点成为元素的中心，oyu 必须提供该元素的宽度和高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:27:12.820

您是否已经尝试过这种方式：

```
<div id="rotation">Try this rotation</div>​

#rotation
{
  filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=..);
  -webkit-transform: rotate(330deg); 
  -moz-transform: rotate(330deg);    
  width:100px;
}​ 
```

就像在这个[小提琴中](http://jsfiddle.net/velthune/MAN4g/184/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T11:31:47.667

试试这个新例子..

```
-ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=0.8660253882408142, M12=0.5, M21=-0.5, M22=0.8660253882408142,sizingMethod='auto expand')"; /* IE6-8 */ 
```

这有工作

如果您想要更多的旋转角度，请访问[http://samples.msdn.microsoft.com/workshop/samples/author/dhtml/filters/matrix.htm](http://samples.msdn.microsoft.com/workshop/samples/author/dhtml/filters/matrix.htm)

# iphone - 从我的应用程序锁定 iphone 主屏幕

> ID：13682179
> 
> 赞同：-1
> 
> 时间：2012-12-03T11:22:21.637
> 
> 标签：iphone, ios

我想从我的应用程序以编程方式锁定设备主屏幕。IOS可以吗？

在我的应用程序中，如果用户空闲 1 分钟，我想锁定设备。这就是场景。

谢谢吉腾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:27:00.030

您可以使用以下代码锁定手机

```
[UIApplication sharedApplication].idleTimerDisabled = YES; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:21:38.407

您可以通过在 Appdelegate 的窗口上添加块视图来锁定您自己的应用程序。但是锁定您的设备是操作系统的责任。我认为如果你以某种方式实现这一点，那么仍然 aplle 可能会拒绝你的应用程序。![在此处输入图像描述](../Images/c5eac801033705631fb22903bb032289.png)

# android - getParent().setProgressBarIndeterminateVisibility 错误

> ID：13682181
> 
> 赞同：0
> 
> 时间：2012-12-03T11:22:37.260
> 
> 标签：android, actionbarsherlock, fragment, android-progressbar

我在使用 ActionBarSherlock、fragment 和 indeterminateprogressBar 时遇到问题。我的 fragmentpageradapter 和 pagertabstrip 有一个 sherlockFragmentActivity。

我想在片段中按下按钮时显示不确定的进度条。我宣布

```
 requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS); 
```

在 SherlockFragment Activity 中，但是当在片段中调用

```
 getSherlockActivity.getParent().setProgressBarIndeterminateVisibility(true) 
```

我得到一个错误。如果在sherlockFragmentActivity中调用，吧，工作。

对不起，我的英语不好。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T19:52:11.503

I solved the issue, I create method in FragmentActivity

```
public void progressOn() {
    setSupportProgressBarIndeterminateVisibility(true);
}
public void progressOff() {
setSupportProgressBarIndeterminateVisibility(false);
} 
```

and and I have called them in the fragment with

```
((MainActivity) getSherlockActivity()).progressOn(); 
```

and

```
((MainActivity) getSherlockActivity()).progressOff(); 
```

thanks anyway

# jquery - 如何使用变量作为名称来销毁 CKEditor 实例

> ID：13682184
> 
> 赞同：1
> 
> 时间：2012-12-03T11:22:42.963
> 
> 标签：jquery, ckeditor

这就是我销毁 CKEditor 实例的方式：

```
CKEDITOR.instances.Divname.destroy(); 
```

divname 是 div 的 id。

但是，如果我使用这样的变量，如何销毁实例：

```
var x = "Divname";
CKEDITOR.instances.x.destroy(); 
```

它会给我 x 是未定义的错误。

运行示例： http: [//jsfiddle.net/DBbYm/1/](http://jsfiddle.net/DBbYm/1/) 请启用实例（附加编辑器），然后禁用实例（销毁），你会得到错误。

有什么建议可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T11:25:44.187

在 JS 中你可以像这样调用成员

```
var x = "Divname";
CKEDITOR.instances[x].destroy(); 
```

# sql - SQL Server 2008 拆分、排序和合并值

> ID：13682188
> 
> 赞同：0
> 
> 时间：2012-12-03T11:22:57.117
> 
> 标签：sql, sql-server, sql-server-2008, triggers

我有一个格式如下的表（我使用的是 MS SQL Server 2008）：

```
car_id | trace
1        1300275738;57.72588;11.84981;0.00026388888888888886;1300275793;57.72596;11.8529;0.001055... 
```

跟踪值是一个以分号作为分隔符的 csv 字符串。跟踪字符串中的值分为四组和四组，如下所示（没有换行符除外）：

```
1300275738;57.72588;11.84981;0.00026388888888888886;
1300275793;57.72596;11.8529;0.0010555555555555555;
1300275785;57.72645;11.85242;0.007416666666666665;
1300275780;57.72645;11.85242;0.0010138888888888888; 
```

我想要做的是在插入时创建一个触发器，该触发器根据四个组中的第一个值对跟踪字符串进行排序。所以上面的结果会变成

```
1300275738;57.72588;11.84981;0.00026388888888888886;1300275780;57.72645;11.85242;0.0010138888888888888;1300275785;57.72645;11.85242;0.007416666666666665;1300275793;57.72596;11.8529;0.0010555555555555555; 
```

我试图做的是将值拆分为临时表中的单独行，如下所示：

```
USE tempdb
GO

checkpoint
dbcc dropcleanbuffers
dbcc freeproccache
GO

--declare a variable and populate it with a comma separated string
DECLARE @SQLString VARCHAR(MAX)
SET @SQLString = (SELECT trace FROM mypev_trips.dbo.trips)

--append a comma to the string to get correct results with empty strings or strings with a single value (no commas)
SET @SQLString = @SQLString + ';';

DECLARE @X XML
SET @X = CAST('<A>' + REPLACE(@SQLString, ';', '</A><A>') + '</A>' AS XML)

SELECT t.value('.', 'nvarchar(20)')
FROM @x.nodes('/A') as x(t) 
```

这给出了以下结果：

```
(No column name)
1300275738
57.72588
11.84981
0.000263888888888888
1300275780
57.72645
11.85242
0.001013888888888888
.
. 
```

有谁知道如何将我的临时表转换回按每组四个中的第一个值排序的逗号分隔字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T23:45:06.320

```
;WITH cte(car_Id, traceXML) AS
 (
  SELECT car_Id, CAST('<A>' + REPLACE(trace, ';', '</A><A>') + '</A>' AS XML)
  FROM dbo.cars
  ), cte2 AS
 (
  SELECT car_Id, trace, NTILE(4) OVER(ORDER BY (SELECT 1)) AS grId  
  FROM cte
  CROSS APPLY (SELECT Tbl.Col.value('.', 'nvarchar(250)') AS trace 
               FROM traceXML.nodes('/A') Tbl(Col)) AS List
  ), cte3 AS
 (
  SELECT DISTINCT a.car_Id,(
  SELECT ISNULL(b.trace, '') + ';' 
  FROM cte2 b 
  WHERE b.grId = a.grId
  FOR XML PATH('')) AS trace
  FROM cte2 a
  )
  SELECT DISTINCT a.car_Id,(
  SELECT ISNULL(b.trace, '')
  FROM cte3 b
  WHERE b.car_Id = a.car_Id
  FOR XML PATH('')) AS trace
  FROM cte3 a 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/ceb5b/2/0)上的演示[](http://sqlfiddle.com/#!3/ceb5b/2/0)

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T07:18:14.950

我最终使用了两个函数和一个触发器。

首先是一个将跟踪字符串拆分为行的函数

```
CREATE FUNCTION dbo.Split(@String varchar(MAX))       
returns @temptable TABLE (items varchar(MAX)) 
as       
begin       
    declare @idx int       
    declare @idx2 int
    declare @idx3 int
    declare @idx4 int
    declare @slice varchar(8000)

    select @idx = 1       
        if len(@String)<1 or @String is null  return       

    while @idx != 0       
    begin       
        set @idx = charindex(';',@String)       
        if @idx!=0       
            set @slice = left(@String,@idx)       
        else       
            set @slice = @String       

        set @String = right(@String,len(@String) - @idx)
        set @idx2 = charindex(';',@String);

        if @idx2!=0       
            set @slice = @slice + left(@String,@idx2)

        set @String = right(@String,len(@String) - @idx2)
        set @idx3 = charindex(';',@String);

        if @idx3!=0       
            set @slice = @slice + left(@String,@idx3)

        set @String = right(@String,len(@String) - @idx3)
        set @idx4 = charindex(';',@String);

        if @idx4 !=0       
            set @slice = @slice + left(@String,@idx4)
        else
            set @slice = @slice + @String

        if(len(@slice)>0)
            insert into @temptable(Items) values(@slice)       

        set @String = right(@String,len(@String) - @idx4) 
        if len(@String) = 0 break
        if @idx4 = 0 break   
    end
return      
end 
```

然后是一个对临时表中的行进行排序和合并的函数

```
CREATE FUNCTION dbo.SortCSV(@String varchar(MAX))       
returns varchar(MAX)
as
begin
    declare @csv varchar(MAX)
    select @csv = coalesce(@csv,'') + items
    from dbo.Split(@String)
    order by items asc
return @csv
end 
```

最后我创建了一个这样的触发器

```
CREATE TRIGGER dbo.SortTrace 
   ON  dbo.trips 
   INSTEAD OF INSERT
AS 
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    DECLARE @trace varchar(MAX);
    DECLARE @sorted_trace varchar(MAX);

    SELECT @trace = trace FROM inserted;
    SELECT @sorted_trace = dbo.SortCSV(@trace);

    insert into dbo.trips (
        car_id, start, stop, distance, created_at, updated_at, trace, energy, delta_soc, private_trip, journal_comment
    ) select
        car_id, start, stop, distance, created_at, updated_at, @sorted_trace, energy, delta_soc, private_trip, journal_comment
    from
        inserted
END
GO 
```**

# sql - 自加入的替代方案

> ID：13682195
> 
> 赞同：0
> 
> 时间：2012-12-03T11:23:27.580
> 
> 标签：sql, tsql, optimization, relational-database

我有一个像这样引用自身的表：

```
Id   Total   Prev   Session
1  | 10    | NULL | 1
2  | 15    | 1    | 1
3  | 11    | NULL | 2
4  | 29    | 2    | 1
5  | 19    | 3    | 2
6  | 47    | 4    | 1 
```

我需要了解特定会话的差异。
像这样的会话1：

```
1\. 10 -- None to 10
2\. 5  -- 10 to 15
3\. 14 -- 15 to 29
4\. 18 -- 29 to 47 
```

为此，我使用：

```
SELECT  F.Total - P.Total AS Difference
FROM    Foo F LEFT OUTER JOIN
        Foo P ON F.Prev = P.Id
WHERE   Session = @Session 
```

这是非常缓慢的。
如何在不更改表的情况下更快地检索这些差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:25:52.810

你不能。这是可能的最快查询，但如果您在和上添加索引`Session`，它可能会变得更快。`Prev``Id`

# android - Android：比他的真实尺寸更小的图像

> ID：13682196
> 
> 赞同：1
> 
> 时间：2012-12-03T11:23:30.673
> 
> 标签：android, image, scale

我有这个代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:gravity="top"
android:background="@drawable/db_bg_color">
<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:adjustViewBounds="true"
    android:id="@+id/noise_bar_red"
    android:src="@drawable/noise_bar_red"
    android:contentDescription="@string/app_name"
    android:layout_centerHorizontal="true" />
<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:adjustViewBounds="true"
    android:id="@+id/noise_bar"
    android:src="@drawable/noise_bar"
    android:contentDescription="@string/app_name"
    android:layout_centerHorizontal="true" />
</RelativeLayout> 
```

问题是最后一个图像，像 db_bg_color 和屏幕一样大，有点像缩放，我不知道……但它没有填满屏幕……也没有 fill_parent。看到这个：http: [//img835.imageshack.us/img835/7121/schermata20121203alle12.png](http://img835.imageshack.us/img835/7121/schermata20121203alle12.png) 为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:29:35.667

我想你可以使用：

```
android:scaleType="fitXY" 
```

# c# - 如何在c#.net中获取朋友的朋友列表

> ID：13682197
> 
> 赞同：0
> 
> 时间：2012-12-03T11:23:34.150
> 
> 标签：c#, asp.net, facebook-javascript-sdk

> **可能重复：**
> [Graph API - 获取我朋友的朋友](https://stackoverflow.com/questions/3423671/graph-api-get-the-friends-of-my-friend)

如何在 c# .net 或 java 脚本中从 Facebook 获取朋友的朋友列表。我可以使用这种方法获取好友列表：--

```
string data = FaceBookConnect.Fetch(code, "me/friends"); 
```

但我不知道如何获取朋友的朋友。我也得到了我朋友的 Facebook *id 。有没有办法用他的 Facebook* *id*来获取我朋友的朋友？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:25:41.307

```
string myAccessToken = "something";         
FacebookClient client = new FacebookClient(myAccessToken);         

var friendListData = client.Get("/me/friends");
JObject friendListJson = JObject.Parse(friendListData); 

ArrayList<FbUser> fbUsers = New ArrayList<FbUser>();
foreach (var friend in friendListJson["data"].Children())             
{   
    FbUser fbUser = new FbUser();
    fbUser.Id = friend["id"].ToString().Replace("\"", "");                 
    fbUser.Name = friend["name"].ToString().Replace("\"", "");                 
    fbUsers.add(fbUser);
} 
```

facebook用户类

```
Class FbUser {
    String Id { set; get; }
    String Name { set; get; }
} 
```

[Facebook SDK C# - 获取好友列表](https://stackoverflow.com/questions/8584105/facebook-sdk-c-sharp-get-friends-list)

**编辑：**你不能得到朋友的朋友：

[使用 Graph API 获取我朋友的朋友](https://stackoverflow.com/questions/3423671/graph-api-get-the-friends-of-my-friend)

```
{
   "error": {
      "type": "Exception",
      "message": "(#604) Can't lookup all friends of <UID>. Can only lookup for the logged in user (<MY_UID>), or friends of the logged in user with the appropriate permission"
   }
} 
```

# java - JodaTime，实例化一个类

> ID：13682198
> 
> 赞同：0
> 
> 时间：2012-12-03T11:23:37.397
> 
> 标签：java, jodatime

我有一个让我非常困惑的问题。首先，我将告诉我关于从特定类实例化对象的知识..

1.  我们创建一个类的实例（或对象），通过声明一个类型（也可能是一个接口类型），一个引用名称（变量），在相等运算符的另一端，我们使用关键字**new**为特定类型保留内存的对象。我们用构造函数调用完成一个语句（不能是接口，因为接口不能被实例化）

2.  有些类有构造函数，声明为**private**。这意味着我们不能使用构造函数调用来创建新对象。

3.  作为替代，某些类“允许”通过公共或静态方法实例化对象，例如 Calendar 类。我们得到这个类的一个实例，如下所示：

*日历变量RepresentingAnInstanceOrObject = Calendar.getInstance();*

（以上如有错误，可以指正）

好的，现在我有一个问题，因为我是 Java 初学者，所以我对 JodaTime 库中的一些类有点困惑。有一些类称为[Minutes](http://joda-time.sourceforge.net/api-release/index.html)或[Hours](http://joda-time.sourceforge.net/apidocs/org/joda/time/Hours.html)等。我已经阅读了这些类的文档，但我不明白如何实例化它们。我不能使用关键字**new**因为构造函数是私有的（日食告诉我构造函数不可见）。在声明分钟（但不是小时）中，说：*分钟数在构造函数中设置，并且可以使用 getMinutes() 查询*。据我所知，它们既没有公共或静态方法可供使用（如日历类）。

哪个构造函数？怎么称呼它？

我是在文档中遗漏了什么，还是在学习 Java 时遗漏了什么？有人可以向我解释一下吗。我真的很感激。提前感谢=）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:27:18.820

该类提供了一些工厂方法，例如：

```
Minutes m = Minutes.minutes(5); // a period of 5 minutes
Minutes m = Minutes.minutesBetween(date1, date2); 
```

查看`static`javadoc中返回`Minutes`对象的方法，大部分是工厂方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:26:36.857

`Minutes`有一个静态工厂方法[`minutes(int minutes)`](http://joda-time.sourceforge.net/apidocs/org/joda/time/Minutes.html#minutes%28int%29)，并且`Hours`有[`Hours.hours(int hours)`](http://joda-time.sourceforge.net/apidocs/org/joda/time/Hours.html#hours%28int%29).

# backbone.js - BackboneJS 从模型数组中删除项目

> ID：13682199
> 
> 赞同：2
> 
> 时间：2012-12-03T11:23:37.377
> 
> 标签：backbone.js

我有这个收藏：

```
var items = new bb.Collections.QuotesCollection([
    {id: 1, name: "item 1", units: []},
    {id: 2, name: "item 2", units: []},
    {id: 3, name: "item 3", units: []}
]); 
```

然后我像这样输出数组“单位”：

```
if(this.model.get('units').length){
        $(this.el).append('<strong>Units</strong>');
        $(this.el).append('<ul>');
        for(x in this.model.get('units')){
            $(this.el).append('<li class="unit">' + this.model.get('units')[x] + '</li>');
        }
        $(this.el).append('</ul>');
    } 
```

上面的代码只是 POC 的东西，所以还没有正式的模板。

```
events: {
    "keypress #addUnit" : "addUnit",
    "dblclick .unit" : "deleteUnit"
},

deleteUnit: function(){
    this.render(); // what do I put here!?
} 
```

我应该采取什么方法从“单位”数组中删除一个项目（单击的项目）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:09:19.657

这是快速而肮脏的方法：

假设数组的顺序没有通过任何其他媒介改变，你可以这样做

```
deleteUnit: function() {
  // get the index of the li you are clicking
  var index = $('.unit').index(this);
  this.model.get('units').splice(index, 1);
  this.render();
} 
```

这样你必须记住在每次渲染之前清空你的视图元素

```
render: function() {
  this.$el.empty();
  ...
  // business as usual
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:00:08.860

首先，您可能希望每个模型都有一个视图对象，因此您将拥有一个集合视图，它拥有`<ul>`并且看起来像这样：

```
var ParentView = Backbone.View.extend({
  render: function() {
    var html = '<ul></ul>'; // make your html here (usually with templates)
    this.$el.append(html);        
    this.collection.each(_.bind(this.initChild, this));
    return this; // so we can chain calls if we want to.
  }
  initChild: function(model) {
    var child = new ChildView({ model: model });
    // this.$() is scoped to the view's el property
    this.$('ul').append(child.render().el);
  }
}); 
```

然后，您将设置子视图，如下所示：

```
var ChildView = Backbone.View.extend({
  events: { 'click .delete', 'deleteModel' },
  render: function() {
    var html = '';// make your html here (usually with templates)
    this.$el.append(html);
    return this;
  },
  deleteModel: function(ev){
    ev.preventDefault();
    // Removes form the collection and sends an xhr DELETE
    this.model.destroy(); 
    this.$el.remove();
  }
}); 
```

对 Model#destroy 的调用将负责将其从集合中删除并将 DELETE 发送到服务器（假设您在集合/模型中设置了 URL）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T05:03:42.680

据我了解，您需要从模型中删除项目

`Person = Backbone.Model.extend({ initialize: function() { alert("Welcome to this world"); } }); var person = new Person({ name: "Thomas", age: 67}); delete person.name`

# google-apps-script - 错误：“一天内调用的服务次数过多：scriptdb 大小。”

> ID：13682206
> 
> 赞同：1
> 
> 时间：2012-12-03T11:24:11.663
> 
> 标签：google-apps-script

尝试将对象添加到 ScriptDb 存储时，收到以下错误消息：

> 一天服务调用次数过多：scriptdb 大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:24:11.663

您已达到 ScriptDb 总大小的配额。限制是针对每个用户的，因此触发此错误的 ScriptDb 实例可能很小甚至为空。

[Google Apps 脚本脚本数据库配额](https://developers.google.com/apps-script/scriptdb#frequently_asked_questions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T11:43:25.170

它与总 scriptdb 大小或调用次数无关。

当项目大小大于 4 KB 时会发生错误。

# android - 如何在 Android 中更改 AutoCompleteTextView 的外观

> ID：13682207
> 
> 赞同：0
> 
> 时间：2012-12-03T11:24:10.330
> 
> 标签：android, customization, autocompletetextview

我想改变 AutoCompleteTextView 的外观。我的意思是，想用我的想法定制它只是 TextView 的一部分。我该怎么做。我是否想从基类 View 创建一个完整的新类，或者我可以扩展 AutoCompleteText 的功能。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:41:51.740

有两种方法可以做到这一点

*   扩展`AutoComplete`类
*   使用`EditText`类实现自定义`AutoComplete`TextView

[你可以在这里](https://stackoverflow.com/questions/7316214/customize-android-edittext)找到更多答案

**更新**

您可以使用`OnDraw()`方法来执行自定义图纸[示例](http://marakana.com/s/post/1036/android_2d_graphics_example)

# javascript - 如何禁用 JqueryUI Accordian 部分

> ID：13682212
> 
> 赞同：2
> 
> 时间：2012-12-03T11:24:32.863
> 
> 标签：javascript, jquery, html, jquery-ui

大家好，我正在尝试禁用 queryUI 部分，我只有两个部分，到目前为止，我已经尝试了一些技巧，但似乎没有一个有效，

这是我到目前为止所尝试的，

```
 //Enable section1 by remove attributes
        $('#subfacEdit').removeAttr("disabled");//div
        $('#subfacEdit').removeAttr("display");//div
        $('#HeadersubfacEdit').removeAttr("disabled");//H3
        $('#HeadersubfacEdit').removeAttr("display");//H3

        //Disable section2
        $('#facEdit').attr("disabled", "disabled");//div
        $('#facEdit').attr("display", "none");//div
        $('#HeaderfacEdit').attr("disabled", "disabled");//H3
        $('#HeaderfacEdit').attr("display", "none");//H3

        $('#editAccdordian').accordion("activate", 1);//activate section2 
```

**分析：** div 确实被禁用了，但我猜*显示属性没有应用*，我只想通过任何方式使部分不可点击。

**我尝试了 MasterMinds 解决方案，几乎没有什么变化？**
[http://jsfiddle.net/X8MFf/15/](http://jsfiddle.net/X8MFf/15/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:31:30.887

`data-`您可以为要禁用的属性添加特殊属性，例如`data-enabled="false"`. 然后，使用`beforeActivate`事件，防止切换。类似的东西

```
$( "#EditAccdordian" ).on( "accordionbeforeactivate", function( event, ui ) {
  if( ui.newHeader && ui.newHeader.attr('data-enabled') == 'false') {
    event.preventDefault();
  }
} ); 
```

您还可以在手风琴创建中绑定事件。

```
$( "#EditAccdordian" ).accordion({
  beforeActivate: function( event, ui ) {
    if( ui.newHeader && ui.newHeader.attr('data-enabled') == 'false') {
      event.preventDefault();
    }
  }
}); 
```

您的禁用标头现在应如下所示：

```
<h3 id="HeaderfacEdit" data-enabled="false">Header content</h3> 
```

**编辑：** 我删除了 ui.newHeader 的 jquery 选择，因为它是一个 jquery 对象。对象的验证应该在折叠时进行，因为它是空的（参见[文档](http://api.jqueryui.com/accordion/#event-beforeActivate)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T06:34:00.743

试试这个对你有用...

```
$(".DISABLE").click(function(){
      $(this).next().hide();
      $("#accordion").accordion({active:current});
  }); 
```

> [完整示例](http://jsfiddle.net/master_smind/X8MFf/10/)

```
...
//JAVASCRIPT
$(document).ready(function() {
  var $accordion = $("#accordion").accordion({ collapsible: true });
  $( "#accordion" ).accordion( "option", "clearStyle", true );

  var current=null;

  $("#accordion h3:not(.DISABLE)").click(function(){
    current = $accordion.accordion("option","active");       
  });

  $(".DISABLE").click(function(){
      $(this).next().hide();
      $("#accordion").accordion({active:current});
  });
});
...  
  //HTML
  <div id="accordion">
    <h3><a href="#">Section 1</a></h3>
    <div>
        MUK - 1
    </div>
    <h3 **class="DISABLE"**><a href="#">Section 2 (Disabled)</a></h3>
    <div>
        MUK - 2
    </div>
    <h3><a href="#">Section 3</a></h3>
    <div>
        MUK - 3
    </div>
    <h3><a href="#">Section 4</a></h3>
    <div>
        MUK - 4
    </div>
</div> 
```

# c++ - 所有段中所有最大值和最小值的总和

> ID：13682213
> 
> 赞同：0
> 
> 时间：2012-12-03T11:24:41.333
> 
> 标签：c++, algorithm, optimization, segments

我正在做一个问题，其中需要找到段中最大元素的总和 - 段中最小元素的总和。我尝试使用稀疏表，但时间限制慢了两个。所以我做了类似的事情这个：

如果`n=4`段是`[1,2],[1,3],[1,4],[2,3],[2,4],[3,4]`. 该问题类似于 RMQ 问题，但我必须对所有段进行此操作并找到

`sum=max(a[1],a[2])+ max(a[1],a[2],a[3])+max(a[1],a[2],a[3],a[4])+max(a[2],a[3])+m‌​ax(a[2],a[3],a[4])+max(a[3],a[4])-min(a[1],a[2])+min(a[1],a[2],a[3])+min(a[1],a[2‌​],a[3],a[4])+min(a[2],a[3])+min(a[2],a[3],a[4])+min(a[3],a[4])`

```
for(i=1;i<n;i++)
{
    maxtilli[i-1]=INT_MIN;
    mintilli[i-1]=INT_MAX;
    for(k=1,j=i;j<=n;k++,j++)
    {
        if(a[j]>maxtilli[k-1])
        {
            maxtilli[k]=a[j];
        }
        else
        {
             maxtilli[k]=maxtilli[k-1];
        }

        if(a[j]<mintilli[k-1])
        {
            mintilli[k]=a[j];
        }
        else
        {   
            mintilli[k]=mintilli[k-1];
        }
        if(i!=j)
        { 
            ans+=(maxtilli[k]-mintilli[k]);
        }
    }
} 
```

这里`n`是 100,000 的数量级。那么有没有办法优化呢。

假设`n=4`段是`[1,2],[1,3],[1,4],[2,3],[2,4],[3,4]`。

需要的东西是 `sum=max(a[1],a[2])+max(a[1],a[2],a[3])+max(a[1],a[2],a[3],a[4])+max(a[2],a[3])+m‌​ax(a[2],a[3],a[4])+max(a[3],a[4])-min(a[1],a[2])+min(a[1],a[2],a[3])+min(a[1],a[2‌​],a[3],a[4])+min(a[2],a[3])+min(a[2],a[3],a[4])+min(a[3],a[4])`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:54:57.187

我们可以尝试完成第一个问题，即所有段的最大值之和。

## 算法

首先，您可以在整个序列中找到最大值 a[i]。将考虑包含 a[i] 的所有段。答案加上 A[i] * (i * (n - i))。并且问题被拆分成两个小序列[1, i - 1] 和[i + 1, n]，你可以用同样的方法来做。

## 代码

```
void cal(int L, int R){
    max_index = find_max(L, R); // O(logN), using Sparse Table or Segment Tree
    int all_segments = (max_index - L + 1) * (R - max_index)
    ans += a[max_index] * all_segments;
    cal(L, max_index - 1);
    cal(max_index + 1, R);
}
// call max_index N times, so the total complexity is O(N * logN) 
```

# c# - C# 搜索字符串中出现的单词

> ID：13682214
> 
> 赞同：2
> 
> 时间：2012-12-03T11:24:45.937
> 
> 标签：c#

如何在字符串中搜索单词？我有一个文本框，用户在其中插入一个字符串，另一个在文本框上插入一些随机文本。`regex`除了使用and之外，还有其他替代方法`IndexOf`吗？就像使用 a`for loop`并检查单词中的长度和字符一样。

这是我到目前为止尝试过的

```
 int i = 0; 
        int count = 0;

        input2.Trim(); 

        while ((i = input2.IndexOf(input1, i)) != -1) 
        {
            i = i + input1.Length;
            count++; 
        }

        MessageBox.Show(count.ToString() + " Matches Found"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T11:33:18.600

看起来您想获取文本中的搜索字符串计数。您可以尝试以下方法。

```
string searchString = "TEST";
string completeText = "Some sentence TEST with other words incluing TEST";
int count = completeText.Split(new string[]{"TEST"},StringSplitOptions.None)
                        .Count() - 1;
MessageBox.Show(count.ToString() + " Matches Found"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:28:18.643

使用正则表达式匹配出现次数，

```
string test = "THE DOG WENT TO TOWN DOG";
int j = Regex.Matches(test, "DOG").Cast<Match>().Count(); 
```

# matlab - datetick 影响图形尺寸

> ID：13682216
> 
> 赞同：1
> 
> 时间：2012-12-03T11:24:50.563
> 
> 标签：matlab, plot

我有几个要分析的时间序列，并且我将所有序列绘制在不同的子图和散点图中。我拥有的日期向量是朱利安日期，在不影响图形质量的情况下可视化日期时遇到了一些问题。考虑以下：

```
dat = 1-(20-1).*rand(365,8);
dat2 = 1-(20-1).*rand(365,8);
time = datenum('2009-01-01'):datenum('2009-12-31');

dtt = {'keepticks'};

for i = 1:8;
    for ii = 1:2;
        figure(ii);
        ax = subplot(4,2,i);
        plot(time,dat(:,i),'k');
        hold on;
        plot(time,dat2(:,i),'r');
        if ii == 1;
            datetick('x','mmm','keepticks');
        else
            datetick('x','mmm');
        end
        AX = get(ax,'position');
        AX(3) = AX(3)./2;
        set(ax,'position',AX);

        axes('position',[AX(1)+AX(3) AX(2) AX(3) AX(4)]);
        scatter(dat(:,i),dat2(:,i));
    end
end 
```

如您所见，图 1 和图 2 之间的区别在于，在其中一个我指定为“keepticks”（这是我想做的），但最终的两个绘图尺寸不同，绘图的格式应该像图 2\. 为什么会这样？我怎么能使用记号，但也有子图来保持它们的尺寸？

# c - 如何在播放器上播放 MPEG-DASH 的 mpd 中给出的 .m4s 文件？

> ID：13682218
> 
> 赞同：13
> 
> 时间：2012-12-03T11:24:59.740
> 
> 标签：c, linux, video-streaming, file-format, mpeg-4

我已经下载了 MPD“ [http://dash.edgesuite.net/adobe/hdworld_dash/HDWorld.mpd](http://dash.edgesuite.net/adobe/hdworld_dash/HDWorld.mpd) ”和所有相关的 .m4s 文件。我尝试在 VLC 播放器上运行它。但 VLC 播放器无法识别该格式。

我已经使用`wget`（1 到 14 个片段可用） [http://dash.edgesuite.net/adobe/hdworld_dash/hdworld_seg_hdworld_0696kbps_ffmpeg.mp4.video_temp2](http://dash.edgesuite.net/adobe/hdworld_dash/hdworld_seg_hdworld_0696kbps_ffmpeg.mp4.video_temp2.m4s) .​​m4s 下载了这个媒体片段。

谁能告诉我如何在播放器上运行 .m4s 格式文件的解决方案？

系统：Ubuntu 11.10

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2015-03-20T20:45:36.517

您需要初始化段。它通常被命名为“00”或“init”，或者没有像其他文件那样的序列号，并且通常以“.mp4”而不是“.m4s”结尾。然后，您只需将文件连接在一起。只要从初始化段开始，您就可以从序列中的任何位置开始。

例如

```
cat init.mp4 *.m4s > output.mp4 
```

然后，假设没有应用加密 (DRM)，您就有了一个包含内容的可播放 mp4 文件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T06:00:23.467

.m4s 文件格式是 ISO 基础媒体文件。即 MPEG-4 第 14 部分。阅读规格以获取更多信息，您可能会获得适用于 windows 的 m4s 播放器。据我所知，在 Linux 平台上 GPAC 会有所帮助。您可以使用 MP4Box 一个 GPAC 工具从任何媒体源创建自己的 MPD。

您可以使用 MP4Client 从 MPD 播放 DASHed 媒体。实际上 .m4s 的单独段不能由它自己的 bcoz 播放器播放应该知道 Codec 和 mime 类型来播放任何媒体，并且 m4s 不被任何播放器支持，即它有自己的标题和数据（moof 和 mdat）。

用于播放包含许多 m4s 片段的 MPD（您可以制作自己的 MPD 或从任何 MPD 单独下载每个音频和视频片段并将其放入同一文件夹）：

1.  安装 GPAC。
2.  `$MP4Client MYWorld.mpd`将打开 Osmo4 播放器，您可以看到您的视频正在播放。享受..

仅供参考，本地流媒体服务器也可以播放此视频：

```
$MP4Client http://localhost/MYWorld.mpd 
```

如果不工作更改段对齐标志，即`<AdaptationSet segmentAlignment="true" subsegmentAlignment="true">`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T11:50:33.647

您可以使用 GPAC 播放器播放它，也可以使用所有第三方编解码器安装它 - [http://gpac.wp.mines-telecom.fr/player/](http://gpac.wp.mines-telecom.fr/player/)

一些人声称他们能够使用 vlc，我还没有测试过。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-08-12T07:04:29.897

在 OSX 终端试试这个：

```
open -a Osmo4 example.mpd 
```

这个对我有用。

# symfony - 当我在 Symfony2 上使用同一用户登录时断开用户连接

> ID：13682221
> 
> 赞同：1
> 
> 时间：2012-12-03T11:25:11.967
> 
> 标签：symfony

我用一个用户登录，然后如果我在另一个浏览器/设备上用同一个用户登录，我想断开第一个用户并允许访问这个新用户。

如何得到这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T13:06:24.947

我解决了一半。

我在此链接之后创建了此功能：

[https://groups.google.com/d/msg/symfony2/pvBSmKl0g7I/yxYfgxH4IvwJ](https://groups.google.com/d/msg/symfony2/pvBSmKl0g7I/yxYfgxH4IvwJ)

它可以工作，但是当 security.yml 中的选项 remember_me 并访问检查此选项时不起作用。

```
//security.yml

remember_me:
    key:      "%secret%"
    lifetime: 3600
    path:     ^/
    domain:   ~ 
```

用户仍处于登录状态。有什么问题？饼干？

# android - 如何从 ContentProvider 获取特定行？

> ID：13682224
> 
> 赞同：1
> 
> 时间：2012-12-03T11:25:22.583
> 
> 标签：android

我对使用内容提供商有点陌生。我想知道如何从内容提供者那里获得特定的行？

例如，我将如何获得我的提供者的第一行？

这是我尝试过的，但它不起作用：

```
final Cursor cursorConversations = getActivity().getContentResolver()
                .query(CONTENT_URI, null, null, null, null);

Toast.makeText(
        getActivity(),
        cursorConversations.getString(cursorConversations
        .getColumnIndex(Columns.TITLE)),
        Toast.LENGTH_LONG).show(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:34:40.433

您只需使用光标移动方法，例如：

```
 cursorConversations.moveToFirst();
    cursorConversations.moveToPosition(0);
    cursorConversations.moveToNext(); // <-- if at beginning position 
```

只是为了让这个答案更丰富一点，一种流行的技术用于从头开始逐个循环遍历光标的行：

```
 while (cursorConversations.moveToNext()) {
        // do something
    } 
```

因为该`moveToNext()`方法（以及其他`move`方法）返回一个布尔值，所以当到达最后一行时循环将退出并且不能再移动到下一行。对眼睛也有效且容易。还有一个提示：游标从 -1 索引处开始，在从零开始的查询索引结果的第一个位置之前。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T11:41:53.157

使用这样的东西：---

```
if(cursorConversations.moveToFirst()){
 int size=cursorConversations.getCount();
 for(int i=0;i<size;i++){
 cursorConversations.getString(cursorConversations
    .getColumnIndex(Columns.TITLE));
 cursorConversations.moveToNext();
}
}
cursorConversations.close(); 
```

或者

```
 while(cursorConversations.moveTonext())
      {
          cursorConversations.getString(cursorConversations
    .getColumnIndex(Columns.TITLE));
       } 
```

# c# - C# - 如何将 IntPtr 缓冲区数据保存到文件（最快的方法）？

> ID：13682226
> 
> 赞同：11
> 
> 时间：2012-12-03T11:25:29.533
> 
> 标签：c#, winapi

我正在使用此代码将非托管代码中的 IntPtr 缓冲区中的字节保存到文件中。这是一个简单的回调函数：

```
private void callback(IntPtr buffer, int length)
{
    byte[] bytes = new byte[length];
    Marshal.Copy(buffer, bytes, 0, length);
    FileStream file = new FileStream(filename, FileMode.Create, FileAccess.Write);
    file.Write(bytes, 0, length);
    file.Close();
} 
```

我想要的是将此数据存储到文件中并将其丢弃。据我了解，非托管代码中有一个缓冲区，而我的代码中有第二个缓冲区。我不想直接复制我想要的数据：

```
// bad:     (unmanaged) buffer -> (managed) bytes -> file
// awesome: (unmanaged) buffer ->                    file 
```

对于我的任务，我需要最快的方式将数据存储到文件中。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-05-08T05:38:00.103

留在 .NET 框架内可能比使用对内核 dll 的调用更好。

我会使用：

```
private void callback(IntPtr buffer, int length, String filename)
{
    try
    {
        FileStream file = new FileStream(filename, FileMode.Create, FileAccess.Write);
        UnmanagedMemoryStream ustream = new UnmanagedMemoryStream((byte*)buffer, length);
        ustream.CopyTo(file);
        ustream.Close();
        file.Close();
    }
    catch{/** To do: catch code **/}
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T11:40:38.277

好吧，出于某种原因，它被称为“托管” :-) 您可以做的是使用[P/Invoke声明](http://en.wikipedia.org/wiki/Platform_Invocation_Services)[WriteFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365747%28v=vs.85%29.aspx)，如下所示：

```
private void callback(IntPtr buffer, int length)
{
    FileStream file = new FileStream(filename, FileMode.Create, FileAccess.Write);
    int written;
    WriteFile(file.Handle, buffer, length, out written, IntPtr.Zero);
    file.Close();
}

 [DllImport("kernel32.dll")]
 private static extern bool WriteFile(IntPtr hFile, IntPtr lpBuffer, int NumberOfBytesToWrite, out int lpNumberOfBytesWritten, IntPtr lpOverlapped); 
```

# json - phonegap 应用错误白名单拒绝：url='http://xyz.com'

> ID：13682228
> 
> 赞同：6
> 
> 时间：2012-12-03T11:25:36.367
> 
> 标签：json, jquery, cordova, jquery-mobile, jsonp

下面是我的 JSON 代码

```
$.getJSON("http://xyz.com",function(result){
    alert(result);
]}); 
```

我收到此错误白名单拒绝： url='http://xyz.com' ON IPHONE

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-03T11:54:03.603

在 cordova/phonegap 中，默认情况下所有外部 URL 都被阻止。要更改这一点，您必须将有问题的 url 添加到`Cordova.plist`(XCode) 中的白名单异常中。

![一个 URL 的白名单例外](../Images/98119ce694a0b8adfa30d2d781b4d734.png)

或者，您可以添加`*`通配符以允许所有域，如下所示。

![所有外部网址的白名单例外](../Images/e1301887fdff234361d33f3be168ae93.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-27T09:24:23.710

默认情况下，接受所有外部 URL 后的 cordova.2.9/phonegap。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T01:52:08.863

对于 phonegap 2+ 以上，外部主机添加到 config.xml 文件中：或将 * 替换为 google.com 之类的 url，请参阅此处的第二种解决方案：[错误：Phonegap 中的白名单拒绝](https://stackoverflow.com/questions/10795628/error-whitelist-rejection-in-phonegap?rq=1)

# jquery - 找到图片TAG，将来源替换为域名

> ID：13682232
> 
> 赞同：0
> 
> 时间：2012-12-03T11:25:44.767
> 
> 标签：jquery

我正在尝试处理一个 Jquery 代码，该代码可以找到页面`src`中的所有标签，并用[https://s3.amazonaws.com/abc](https://s3.amazonaws.com/abc)`<img>`替换和附加它，例如

```
<img src="/v/abx/templates/210/images/clear1x1.gif" width="5" height="5" alt="" /> 
```

应该替换为

```
<img src="https://s3.amazonaws.com/abc/v/abx/templates/210/images/clear1x1.gif" width="5" height="5" alt="" /> 
```

主要问题是它应该发生在页面加载

我有以下 Javascript 代码，但它不起作用

```
<!-- START: javascript to manipulate product photo URLs -->
<script type="text/javascript">
if(location.href.indexOf(‘/product_p/’) != -1) {
var ThisPhoto=document.getElementById('product_photo').src;
var ImgServer='https://s3.amazonaws.com/abc';
var ThisDomain=document.domain;
var NewImgSrc = ThisPhoto.replace(ThisDomain,ImgServer);
document.getElementById('product_photo').src=NewImgSrc;
}
</script>
<!-- END: javascript to manipulate product photo URLs --> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T11:28:39.590

```
$('img').each(function(){
    $(this).attr('src','https://s3.amazonaws.com/abc/'+$(this).attr('src'));
}); 
```

把它放在一个`$(document).ready`处理程序中。

# c++ - 如何将有关最顶层调用/上下文的信息添加到异常

> ID：13682235
> 
> 赞同：2
> 
> 时间：2012-12-03T11:25:49.247
> 
> 标签：c++, exception, error-handling

我想在我的异常处理中添加有关程序将要做什么的信息。旧代码对`try`所有内容都有一个大块：

```
try {
  read_cfg();  // a sub call might throw runtime_error
  operation1();
  operation2();
}
catch (std::exception& e) {
  std::cerr
    << "Error: " << e.what() << ", "
    // FIXME: also show what we were trying to do
    // FIXME: and what a user could try
    << "\n";
} 
```

错误信息示例：

```
Error: file "foo.cfg" not found, while reading configuration.
Please make sure the file exists. 
```

我将`try`-block 转换为三个块，但这感觉很奇怪：

```
try {
  read_cfg();  // a sub call might throw runtime_error
}
catch (std::exception& e) {
  std::cerr
    << "Error: " << e.what() << ", "
    << "while reading configuration."
    << "\n";
}
try {
  operation1();
}
catch (std::exception& e) {
  std::cerr
    << "Error: " << e.what() << ", "
    << "while performing operation 1."
    << "\n";
}
try {
  operation2();
}
catch (std::exception& e) {
  std::cerr
    << "Error: " << e.what() << ", "
    << "while performing operation 2."
    << "\n";
} 
```

我还尝试为每个调用引入一个异常类（`read_cfg_exception`, `operation1_exception`, `operation2_exception`）。由于在 read_cfg() 调用 `open`可能会抛出，我捕获它的异常并将其转换为 a `read_cfg_exception`，从而保存附加信息，即“在读取配置时”出现错误。然而，这也感觉不对：

```
class read_cfg_exception;
void open(std::string name); // might throw std::runtime_error

void read_cfg()
{
  try {
    open("foo.cfg");
  }
  catch (std::runtime_error& e) {
    throw read_cfg_exception(e.what() + "while reading configuration");
  }
} 
```

因此我有一个问题：什么是一个好的模式来显示错误发生时程序正在做什么的附加信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:44:33.960

take a look at POCO (c++ library) throwing system, that should answer all your questions, you'll learn a lot from that and many good style rules too. The answare to your question will be really long unfortunately (at least I don't know how to make it short).

Anyway don't implement something that makes your code not readable, in your example code is not readable and then not maintainable wich is not wanted.

# asp.net - 错误 System.DirectoryServices.DirectoryServicesCOMException (0x8007203B)：发生本地错误

> ID：13682237
> 
> 赞同：1
> 
> 时间：2012-12-03T11:25:52.200
> 
> 标签：asp.net, iis-7

我使用下面的代码来验证 LDAP 中的用户和密码：

```
 bool authentic = false;

        string ip_server = "10.53.41.21";
        string userName = "CN=test,N=Users,DC=user,DC=domain,DC=COM";
        string password = "something";
        try
        {
            DirectoryEntry entry = new DirectoryEntry("LDAP://" + ip_server, userName, password);
            //   entry.
            object nativeObject = entry.NativeObject;
            authentic = true;
        }
        catch (DirectoryServicesCOMException) { }
        return authentic; 
```

它在本地和 IIS 6.0 上运行良好。但是在 IIS 7.0 上运行时会出错：

```
System.DirectoryServices.DirectoryServicesCOMException (0x8007203B): A local error has occurred.

   at System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail)
   at System.DirectoryServices.DirectoryEntry.Bind()
   at System.DirectoryServices.DirectoryEntry.get_NativeObject() 
```

如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T16:08:59.280

您正在传递`distinguishedName`用户名的属性，它应该采用以下格式：`domain\username`

# php - cakephp中的Flash错误

> ID：13682243
> 
> 赞同：1
> 
> 时间：2012-12-03T11:26:07.393
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-2.1

我正在创建一个已经完成的简单网站。我已经在我的 localServer (localhost) 上进行了测试，它工作正常，没有任何错误。但是当我上传到我的服务时它会抛出一个错误

```
Warning (512): Method sessionHelper::flash does not exist [CORE/Cake/View/Helper.php, line 179] 
```

请你帮助我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:33:03.853

在本地，您使用的是不区分大小写的 Windows。托管应用程序的服务器可能区分大小写。

它可能正在寻找`sessionHelper.php`不存在的（实际名称是 SessionHelper.php）。您应该查看您的代码，我认为您正在尝试使用`$this->session->flash()`而不是设置 Flash 消息`$this->Session->flash()`

# asp.net-mvc - mvc3部分视图ajax发布将部分视图作为页面返回

> ID：13682247
> 
> 赞同：2
> 
> 时间：2012-12-03T11:26:30.287
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我在 ASP.NET MVC3 和使用 ajax.BeginForm 时编写了一个选项卡式页面网络系统。部分视图不用于更新 div，而是显示为页面。

代码有什么问题？为什么它不起作用？谢谢您的帮助！

我想弄清楚但无法理解它。这是我的代码：

控制器：

```
public ActionResult Index(int id)
    {
        var shareholder = db.shareholder.Include("company").Include("groups");
        return PartialView("Index", shareholder.ToList());
    }

    //
    // GET: /Shareholder/Create

    public PartialViewResult Create()
    {
        ViewBag.company_id = new SelectList(db.company, "id", "name");
        ViewBag.groups_id = new SelectList(db.groups, "id", "name");
        return PartialView("Create");
    }

    //
    // POST: /Shareholder/Create

    [HttpPost]
    public ActionResult Create(shareholder shareholder)
    {
        if (ModelState.IsValid)
        {
            db.shareholder.AddObject(shareholder);
            db.SaveChanges();
            return RedirectToAction("Index", new { id = shareholder.company_id });
        }

        ViewBag.company_id = new SelectList(db.company, "id", "name", shareholder.company_id);
        ViewBag.groups_id = new SelectList(db.groups, "id", "name", shareholder.groups_id);
        return PartialView("Create", shareholder);
    } 
```

部分视图：

```
 <script src="<%: Url.Content("~/Scripts/jquery.validate.min.js") %>" type="text/javascript"></script>
<script src="<%: Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js") %>"
    type="text/javascript"></script>
<script src="<%: Url.Content("~/Scripts/MicrosoftAjax.js") %>" type="text/javascript"></script>
<script src="<%: Url.Content("~/Scripts/MicrosoftMvcValidation.js") %>" type="text/javascript"></script>
<% using (Ajax.BeginForm("Create", "Shareholder", new AjaxOptions { HttpMethod = "POST", UpdateTargetId = "tabs-2", InsertionMode = InsertionMode.Replace }))
   { %>
<%: Html.ValidationSummary(true) %>
<fieldset>
    <legend>shareholder</legend>
    <div class="editor-label">
        <%: Html.LabelFor(model => model.company_id, "company") %>
    </div>
    <div class="editor-field">
        <%: Html.DropDownList("company_id", String.Empty) %>
        <%: Html.ValidationMessageFor(model => model.company_id) %>
    </div>
    <div class="editor-label">
        <%: Html.LabelFor(model => model.name) %>
    </div>
    <div class="editor-field">
        <%: Html.EditorFor(model => model.name) %>
        <%: Html.ValidationMessageFor(model => model.name) %>
    </div>
    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset>
<% } %>
<div>
    <%: Html.ActionLink("Back to List", "Index") %>
</div> 
```

调用局部视图的视图：

```
<script src="<%: Url.Content("~/Scripts/jquery.validate.min.js") %>" type="text/javascript"></script>
<script src="<%: Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js") %>"
    type="text/javascript"></script>
<script src="<%: Url.Content("~/Scripts/MicrosoftAjax.js") %>" type="text/javascript"></script>
<script src="<%: Url.Content("~/Scripts/MicrosoftMvcValidation.js") %>" type="text/javascript"></script>
<script type="text/javascript">
    var count = 2;
    $(document).ready(function() {
        $("#tabs").tabs();
        getContentTab (1, "/Company/Details/<%=Model.id %>");
    });

    function getContentTab(index, url) {
        $.ajax({
            url: url,
            success: function(result) {  
                for (var i = 0; i <= count; i++) {
                    document.getElementById("tabs-" + index).style.display = 'none';                     
                }
                $("#tabs-" + index).html(result);
                document.getElementById("tabs-" + index).style.display = 'block';
                $.validator.unobtrusive.parse("form"); 
            },
            error: function (xhr, status, error) {
                alert(error);
            },
        });
    }
</script>
<h2>
    <%=Model.name %></h2>
<div id="tabs">
    <ul>
        <li><a href="#tabs-1" onclick="getContentTab(1, '/Company/Details/<%=Model.id %>');">
            <%= VOWWebsite.Resource.Details%></a></li>
        <li><a href="#tabs-2" onclick="getContentTab(2, '/Shareholder/Index/<%=Model.id %>');">
            <%= VOWWebsite.Resource.Shareholders%></a></li>
    </ul>
    <div id="tabs-1">
    </div>
    <div id="tabs-2">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:31:56.723

您必须`jquery.unobtrusive-ajax.min.js`在页面中包含：

```
<script src="<%: Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js") %>"
type="text/javascript"></script> 
```

# python - 如何在运行方法中没有循环的情况下终止 Python 中的线程？

> ID：13682249
> 
> 赞同：2
> 
> 时间：2012-12-03T11:26:31.073
> 
> 标签：python, multithreading, kill

有一个有很长方法的类。
为该方法创建一个线程。
我怎样才能杀死\终止这个线程？
主要问题是我无法在线程**run()方法中检查****threading.Event** ，因为它不包含循环。 与此处类似的代码：

 **```
import time
import threading

class LongAction:
    def time_consuming_action(self):
        tmax = 600
        for i in range(tmax):
            print i
            time.sleep(1)
        time.sleep(tmax)
        self.tmax = tmax
        return "Slept well"

class LongActionThread(threading.Thread):
    def __init__(self, la_object):
        self.la = la_object
        threading.Thread.__init__(self)

    def run(self):
        self.la.time_consuming_action()

la = LongAction()
la_thread = LongActionThread(la)
la_thread.start()

# After 5 sec i've changed my mind and trying to kill LongActionThread
time.sleep(5)
print "Trying to kill LongActionThread"
la_thread.kill() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T11:34:44.677

此代码工作正常，但需要从标准输出中显式刷新数据。
还没有找到一种无需冲洗即可打印的方法。

```
import time
from multiprocessing.process import Process
import sys

class LongAction:
    def time_consuming_action(self):
        tmax = 600
        for i in range(tmax):
            print i
            time.sleep(1)
            sys.stdout.flush()
        time.sleep(tmax)
        self.tmax = tmax
        return "Slept well"
        sys.stdout.flush()

class LongActionThread(Process):
    def __init__(self, la_object):
        self.la = la_object
        Process.__init__(self)

    def run(self):
        self.la.time_consuming_action()

if __name__ == "__main__":
    la = LongAction()
    la_thread = LongActionThread(la)
    la_thread.start()

    # After 5 sec i've changed my mind and trying to kill LongActionThread
    time.sleep(5)
    print "Trying to kill LongActionThread"
    la_thread.terminate() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:59:25.947

虽然杀死线程不是一个好主意，但如果你真的必须这样做，最简单的解决方案是实现一个正在运行的信号量，将你的耗时方法分成 sub_methods 并检查子方法之间的线程状态。

部分复制[自此 SO 问题](https://stackoverflow.com/questions/323972/is-there-any-way-to-kill-a-thread-in-python)的代码：

```
class StoppableThread(threading.Thread):
    """Thread class with a stop() method. The thread itself has to check
    regularly for the stopped() condition."""

    def __init__(self,la_object):
        super(StoppableThread, self).__init__()
        self.la = la_object
        self._stop = threading.Event()

    def stop(self):
        self._stop.set()

    def stopped(self):
        return self._stop.isSet()

    def run(self):
       self.la.time_consuming_action( self.stopped )

    class La :

      def __init__(self):
      #init here

      def time_consuming_action(self, thread_stop_callback ):

          sub_work1()

          if thread_stop_callback():
             raise 'Thread Killed ! '

          sub_work2()

          if thread_stop_callback():
             raise 'Thread Killed ! '

          sub_work3()

          #etc... 
```**

# c# - RTSP 重定向到另一个客户端（RFC 相关）

> ID：13682251
> 
> 赞同：1
> 
> 时间：2012-12-03T11:26:34.553
> 
> 标签：c#, media, rtsp, rfc

我目前正在用 C#（服务器/客户端）实现 RTSP 标准，但是在重新阅读 RFC 2326 一千次之后，我仍然不清楚一件事。

看起来 RTSP 只是一个 [C<->S] 控制协议。但是，如果我试图为网络中的多个客户端/服务器设备建立管理呢？例子：

我有一个管理应用程序，它是一个 RTSP 客户端。我想告诉另一个客户他应该连接到不同的服务器。就像是：

```
SETUP rtsp://192.168.1.12 RTSP/1.0
      CSeq: 302
      Transport: RTP/AVP;rtsp-redirect:192.168.1.155 
```

RFC 对传输属性非常严格。我也考虑过“重定向”，但这只是 S->C 用于负载平衡用途。有没有办法实现客户端<->客户端通信以进行重定向（例如，告诉客户端他必须在另一台服务器上删除命令？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T04:02:32.100

无论如何，您要做的是聚合...您不想将公众重定向到公司防火墙后面的摄像头...您需要首先在媒体服务器上设置摄像头，然后允许通过媒体服务器通过密码保护媒体服务器上的流。

查看我在 c# 中的实现，它与 VLC @ [https://net7mma.codeplex.com/](https://net7mma.codeplex.com/)兼容，并支持我上面提到的所有内容！

这里有一篇 CodeProject 文章 -> [http://www.codeproject.com/Articles/507218/Managed-Media-Aggregation-using-Rtsp-and-Rtp](http://www.codeproject.com/Articles/507218/Managed-Media-Aggregation-using-Rtsp-and-Rtp)

实际上有..

@http [://www.ietf.org/rfc/rfc2326.txt](http://www.ietf.org/rfc/rfc2326.txt)

10.10 重定向

重定向请求通知客户端它必须连接到另一个服务器位置。它包含强制标头 Location，它指示客户端应该发出对该 URL 的请求。它可能包含参数Range，表示重定向何时生效。如果客户端想要继续发送或接收此 URI 的媒体，客户端必须为当前会话发出 TEARDOWN 请求，并在指定主机上为新会话发出 SETUP。

此示例请求在给定播放时间将此 URI 的流量重定向到新服务器：

```
 S->C: REDIRECT rtsp://example.com/fizzle/foo RTSP/1.0
       CSeq: 732
       Location: rtsp://bigserver.com:8001
       Range: clock=19960213T143205Z- 
```

如果您还需要什么，请告诉我！

# java - 大数的数学结果为 0

> ID：13682254
> 
> 赞同：0
> 
> 时间：2012-12-03T11:26:37.080
> 
> 标签：java, precision

我正在尝试解决 BigDecimal 的问题。我的代码：

```
BigDecimal tweetcount = new BigDecimal(3344048);
BigDecimal emotionCountBig = new BigDecimal(855937);
BigDecimal emotionCountSentenceBig = new BigDecimal(84988); 

MathContext mc = new MathContext(64);
PMI[cnt] = (emotionCountSentenceBig.divide((tweetcount.multiply(emotionCountBig,mc)),RoundingMode.HALF_UP)); 
```

我想做的是：`emotionCountSentenceBig/(emotionCountBig*tweetcount)`

（值可以更大）

如果我尝试这个，我会得到一个零，这是不可能的。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T11:30:22.690

您还需要为除法指定 MathContext：

```
emotionCountSentenceBig.divide(tweetcount.multiply(emotionCountBig, mc), mc); 
```

这给出了预期的结果：

> 2.969226352632111794036880818610913852084810652372969382467557947E-8

现在正如@PeterLawrey 正确评论的那样，您可以使用双打代替：

```
public static void main(String[] args) throws Exception {
    double tweetcount = 3344048;
    double emotionCount = 855937;
    double emotionCountSentence = 84988;

    double result = emotionCountSentence / (tweetcount * emotionCount);

    System.out.println("result = " + result);
} 
```

打印：

> 结果 = 2.9692263526321117E-8

请注意，如果您使用：

```
double result = 84988 / (3344048 * 855937); 
```

您实际上是在对整数进行操作（* 和 /），它将返回 0。您可以通过显式使用双精度来防止它，例如（注意`d`）：

```
double result = 84988d / (3344048d * 855937); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T11:48:15.087

我会用`double`

```
int tweetcount = 3344048;
int emotionCountBig = 855937;
int emotionCountSentenceBig = 84988;

double pmi = emotionCountSentenceBig/((double) tweetcount * emotionCountBig);
System.out.println(pmi); 
```

印刷

```
2.9692263526321117E-8 
```

这与使用 BigDecimal 的答案很接近

```
2.969226352632111794036880818610913852084810652372969382467557947E-8 
```

# android - Android模拟器无法上网

> ID：13682257
> 
> 赞同：1
> 
> 时间：2012-12-03T11:26:53.457
> 
> 标签：android, android-emulator, internet-connection

我无法在我的模拟器中访问互联网。它甚至没有连接到模拟器浏览器上的谷歌。我已经检查了设置。数据启用复选框被选中。

在发布问题之前，我提到了一些 SO 问题。

正如[这个答案](https://stackoverflow.com/a/2702663/1777090)所暗示的，我没有启用wifi。所以这似乎不是问题。正如同一个问题中的[另一个答案](https://stackoverflow.com/a/3998795/1777090)所暗示的那样，我尝试在运行配置中给出它，但仍然没有任何改变。

如果有人可以提供任何想法，那将对我有很大帮助。

注意：在我的模拟器的主屏幕上，3G 出现了，但它带有灰线。我认为那些线应该是白色的。在这点上我可能是错的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:20:47.073

将 GSM 调制解调器支持添加到您的模拟器。

打开 AVD manager -> your emulator -> Edit.-> Hardware->New->GSM Modem Support。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:38:29.107

您应该在 Eclipse 的 android sdk 管理器的工具中检查 http 代理设置。

# matplotlib - 使用 scatter 使用 -inf 设置点的颜色

> ID：13682265
> 
> 赞同：0
> 
> 时间：2012-12-03T11:27:26.263
> 
> 标签：matplotlib

我正在绘制一个散点图，在其中我指定每个点的颜色：

```
ax.scatter(x, y, c=z) 
```

问题是`z`are的某些值`-inf`，而这些点根本没有绘制出来。我想将它们设置为某种颜色。我试过这个：

```
cm = mpl.cm.get_cmap()
cm.set_under('k',1.0)
cm.set_bad('purple',1.0)
ax.scatter(x, y, c=z, cmap=cm) 
```

但仍然没有显示`-inf`值的点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:24:27.697

我认为最容易在无穷远处过度绘制点：

```
cm = mpl.cm.get_cmap()
cm.set_under('k',1.0)
cm.set_bad('purple',1.0)
ax.scatter(x, y, c=z)
ax.scatter(x[numpy.isinf(z)], y[numpy.isinf(z)], c='b') 
```

如果您想排除正无穷大，这似乎可行：

```
cm = mpl.cm.get_cmap()
cm.set_under('k',1.0)
cm.set_bad('purple',1.0)
ax.scatter(x, y, c=z)
indices = numpy.isinf(z) & (z < 0)
ax.scatter(x[indices], y[indices], c='b') 
```

所有代码都未经测试。

# iphone - 如何用 nsstring 变量替换 %@？苹果手机

> ID：13682266
> 
> 赞同：-1
> 
> 时间：2012-12-03T11:27:26.950
> 
> 标签：iphone, replace, nsstring

如何正确替换以下内容？

```
NSString *stringURL = [NSString stringWithFormat:@"http://192.168.1.183:8001/GetDocument.aspx?id=%@ &  user=admin_document",self.index];
NSURL *targetURL = [NSURL URLWithString:stringURL]; 
```

我想用 self.index 替换 %@。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:37:20.907

您的问题更有可能是空格。尝试删除它：

```
NSString *stringURL = [NSString stringWithFormat:@"http://192.168.1.183:8001/GetDocument.aspx?id=%@&user=admin_document", self.index];
NSLog(@"URL:%@", stringURL); //You can print out to check
NSURL *targetURL = [NSURL URLWithString:stringURL]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:37:39.237

删除链接中的空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:32:14.703

如果`self.index`不是`NSString`对象，则`%@`格式说明符将不起作用。我怀疑`index`它可能是一个`NSInteger`或类似的名称，在这种情况下你想使用它`%d`。

查看[此 Apple 文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)以了解所有可能的格式说明符及其对应的类型。不过，编译器应该会帮助您并建议正确的说明符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T11:34:57.953

只需解析并使用它，如果它是整数然后你像这样使用

```
int a=10;
NSString *stringURL = [NSString stringWithFormat:@"this is my number %d",a]; 
```

如果你想使用字符串，那么你确实喜欢这样

```
 NSString stringName=@"john";
NSString *stringURL = [NSString stringWithFormat:@"this is my name %@",stringName]; 
```

# x++ - 具有运行代码但不向（或验证）表提交数据的按钮

> ID：13682273
> 
> 赞同：3
> 
> 时间：2012-12-03T11:27:40.357
> 
> 标签：x++, axapta, dynamics-ax-2012

我正在尝试向现有表单（**BankAccountTable**）添加一个按钮。我想添加一个按钮来运行外部进程，其中一个表单字段的值作为参数。

正在使用以下代码读取该值：

`str value = element.design().controlName("FieldName").valueStr();`

但是，当我单击按钮时，Dynamics 会显示必须填写哪些字段。如果单击方法未引用表单字段（即`info("click");`），则不会发生这种情况。

我怎样才能：

*   在不触发表单验证的情况下读取字段的值？

和/或

*   有一个不会触发表单验证的按钮（或命令按钮）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:43:04.317

第二个问题，如何避免验证，很简单：将按钮属性设置`SaveRecord`为`No`.

您应该很少需要直接访问控制值。更好的选择通常是直接访问绑定字段： `table.FieldName`.

如果控件未绑定到字段，则将`AutoDeclation`属性更改为`Yes`并直接访问控件：`fieldName.text()`. 方法`text`，`realValue`还是`selection`比较好的选择`valueStr`。

# android - EditText 上的旋转，除了使用 RotationAnimation

> ID：13682274
> 
> 赞同：0
> 
> 时间：2012-12-03T11:27:48.330
> 
> 标签：android, rotation, android-edittext

除了使用 RotateAnimation 类之外，还有另一种旋转 EditText 的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:54:11.597

是的。您必须自己编写`EditText`并覆盖`onDraw`：

```
@Override
protected void onDraw(Canvas canvas) {
   canvas.save();
   canvas.rotate();
   canvas.restore();
} 
```

当然[TextPaint](http://developer.android.com/reference/android/text/TextPaint.html)它也是你自己的。

# jquery - ajax加载后如何获取页面高度？

> ID：13682275
> 
> 赞同：0
> 
> 时间：2012-12-03T11:27:52.813
> 
> 标签：jquery, ajax

我将两个元素之一设置为最大高度。我正在检查窗口、侧边栏和#primary 容器的高度，并确保最大的那个是我设置的所有元素的高度。但是，在此页面上，与选择按钮交互时，会加载 ajax。然后我的页面高度增加。我希望我的函数能够获取新的高度，但它仍然返回旧的高度 pre-ajax 负载。

我的代码如下：

```
//on change of the select button load ajax content, then run changeSidebarHeight()
$('#choose-pathway').change(function() {
        var url=$(this).val();
        $('#ajax-pathway-container').load(url + ' #pathway',changeSidebarHeight);
});

function changeSidebarHeight(){
        var primaryHeight=$('#primary').height();
        var sidebarHeight=$('#sidebar').height();
        var windowHeight=$(window).height();    
            //this always returns the same value, before the ajax load and after, despite the page being about 600 pixels taller
            console.log($('html').height());        
        if(primaryHeight > sidebarHeight){
             $('#sidebar').height(primaryHeight );

        }else{
              $('#sidebar').height(windowHeight );
              $('#primary').height(windowHeight);
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:32:43.113

请尝试 `$(document).height();`获取窗口高度的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:31:04.127

我认为您应该使用 $(window) 或 $(document) 而不是 $(html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:36:59.580

You can use $(document).height(); but keep in mind that with no doctype tag to your page chome reports the same value for both calls ($(window) and $(document)). Adding a strict doctype causes the values to work as advertised. But you can also use $(body).height();

# c# - 将对象从一个列表添加到另一个

> ID：13682276
> 
> 赞同：1
> 
> 时间：2012-12-03T11:27:53.723
> 
> 标签：c#, list

我有两个列表，其中一个列表`InboxTemp`自动填充所有存在的对象。另一个列表`NewMessages`是随机（10-60 秒）接收新对象。我遇到的问题是我想`allList`在`newList`没有任何重复的情况下添加对象。

```
public List<object> GetNewMessages()
{
    if (NewMessages.Count > 0 && InboxTemp.Count > 0)
    {
        for (int j = 0; j < NewMessages.Count; j++)
        {
            for (int i = 0; i < InboxTemp.Count; i++)
            {
                if (InboxTemp[i].ID != NewMessages[j].ID)
                {
                    InboxTemp.Add(NewMessages[j]);
                }
            }
        }
    }
    NewMessages.Clear();
    return InboxTemp;
} 
```

这里的问题是我们得到了重复，我只希望新对象与`InboxTemp`-list 相加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:47:06.707

使用除了：

```
InboxTemp = InboxTemp.Except(NewMessages); 
```

来自 MSDN：

> 通过使用默认相等比较器比较值来产生两个序列的集合差......
> 
> ...默认相等比较器 Default 用于比较实现 IEqualityComparer(Of T) 泛型接口的类型的值。要比较自定义数据类型，**您需要实现此接口并为该类型提供您自己的 GetHashCode 和 Equals 方法。**

来源：[MSDN 除了](http://msdn.microsoft.com/en-us/library/bb300779.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:51:05.893

您可以使用它`Enumerable.Except`来查找所有新消息。

```
public List<Msg> GetNewMessages()
{
    var newMsg = NewMessages.Except(InboxTemp, new MsgComparer()).ToList();
    foreach(var msg in newMsg)
        InboxTemp.Add(msg);
    return newMsg;
} 
```

但是您需要`IEqualityComparer<T>`为您的对象创建一个自定义（我称之为`Msg`）：

```
public class MsgComparer: IEqualityComparer<Msg>
{
    public bool Equals(Msg x1, Msg x2)
    {
        if (object.ReferenceEquals(x1, x2))
            return true;
        if (x1 == null || x2 == null)
            return false;
        return x1.ID.Equals(x2.ID);
    }

    public int GetHashCode(Msg obj)
    {
        return obj.ID.GetHashCode();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:53:24.937

您可以根据您发布的内容使用修改后的代码：

```
public List<object> GetNewMessages()
        {
            if (NewMessages.Count > 0 && InboxTemp.Count > 0)
            {
                for (int j = 0; j < NewMessages.Count; j++)
                {
                    bool found = false;
                    int i = 0;
                    while(!found && i<InboxTemp.Count)
                    {
                        if (InboxTemp[i].ID == NewMessages[j].ID)
                        {
                            found = true;
                        }
                        j++;
                    }
                    if(!found)
                        InboxTemp.Add(NewMessages[j]);
                }
            }
            NewMessages.Clear();
            return InboxTemp;
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T11:41:59.570

```
var newItems = NewMessages.Where(x => !InboxTemp.Any(z => z.ID == x.ID));
InboxTemp.AddRange(newItems); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T11:43:45.457

如果可能，请创建实现 IEqualityComparer 的类来比较对象 ID。

```
class MyEqualityComparerer : IEqualityComparer<MyMessage>
    {
        public bool Equals(MyMessage x, MyMessage y)
        {
            if (x == null && y == null)
            {
                return true;
            }

            if (x == null)
            {
                return false;
            }

            if (y == null)
            {
                return false;
            }

            return x.Id == y.Id;
        }

        public int GetHashCode(MyMessage obj)
        {
            if(obj == null)
            {
                return 0;
            }

            return obj.Id.GetHashCode();
        }
    } 
```

然后写 get Distinct values from messages 并将旧列表中不存在的所有内容添加到其中

```
var newItems = newList.Distinct(new MyEqualityComparerer()).Except(oldList, new MyEqualityComparerer()).ToList();
        oldList.AddRange(newItems); 
```

# javascript - javascript 函数在 chrome 中工作但在 IE8 中不工作

> ID：13682280
> 
> 赞同：1
> 
> 时间：2012-12-03T11:28:03.350
> 
> 标签：javascript, ie8-compatibility-mode

我的页面网址是

[http://somain.com/test.php?id=1&mview=5](http://somain.com/test.php?id=1&mview=5)

登录后，上面的 url 显示选项名称和图像。我们必须单击添加新条目按钮来添加选择图像，而要删除，我们必须单击删除按钮。但是删除按钮和文件上传部分在 chrome 中工作正常，在 IE 8 中不工作。

我使用了一个 javascript 函数来添加图像以供选择。但是所有 js 函数在 chrome 中都可以正常工作，但在 IE 8 中无法正常工作。这是删除文件上传部分的简单编码

```
function addnewchoice(val)
{
var remove = document.createElement("input");
remove.setAttribute("type", "button");
remove.setAttribute("value", "Remove");
remove.setAttribute("onclick", "Remover("+ val +")");
remove.setAttribute("class", "removechoice");
remove.setAttribute("name", removename);
}

function Remover(idval)
{
document.forms['choiceadd']['imageshow'+idval].style.display="none";
document.forms['choiceadd']['choicefile'+idval].style.display="none";
document.getElementById('fileuploadover'+idval).style.display="none";
document.forms['choiceadd']['choicename'+idval].style.display="none";
document.forms['choiceadd']['choicename'+idval].value="";
document.forms['choiceadd']['remove'+idval].style.display="none";
document.getElementById('br'+idval).style.display="none";
} 
```

任何人都请帮我解决这个问题。非常感谢您阅读并帮助我解决此问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T11:39:05.737

根据这里的第一个答案[——IE 不允许动态创建的 DOM 'a' 元素上的 onClick 事件](https://stackoverflow.com/questions/771721)——当元素的 onclick 属性动态更改时，IE8 不会自动绑定点击事件处理程序。也就是说，您在 HTML 中设置标签的 onclick 属性，但浏览器并未将该属性转换为实际的事件处理程序。

尝试更换

```
remove.setAttribute("onclick", "Remover("+ val +")"); 
```

和

```
var removeFunc = function() { Remover(val) };
if (!remove.addEventListener) //Old IE
  remove.attachEvent("onclick", removeFunc);
else //Other browsers
  remove.addEventListener("click", removeFunc ); 
```

这实际上直接绑定了 click 事件处理程序，而不是设置属性以期望浏览器会通过绑定来做出反应。

# c# - 来自 UriSource 的 BitmapImage PixelWidth 和 PixelHeight 属性

> ID：13682281
> 
> 赞同：1
> 
> 时间：2012-12-03T11:28:04.643
> 
> 标签：c#, windows-phone-7

我有这个：

```
BitmapImage bi = new BitmapImage();

bi.CreateOptions = BitmapCreateOptions.None;
bi.UriSource = new Uri(url, UriKind.RelativeOrAbsolute); 
```

，其中 url =www.xyz.com/abc.jpg

我的问题是“如何获得 bi.PixelWidth 和 bi.PixelHeight？” 因为两者都归零。我想将大图像调整为缩略图。

我试过[这个](http://www.wintellect.com/CS/blogs/jprosise/archive/2009/12/17/silverlight-s-big-image-problem-and-what-you-can-do-about-it.aspx)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T06:43:12.313

我对 WP7 开发相当陌生。我遇到了这个问题，实际上仍在试图弄清楚如何做到这一点。

但我可以让它`WritableBitmap`像这样工作：

```
Uri uri = new Uri("/image.jpg", UriKind.Relative);
BitmapImage bitmapImage = new BitmapImage();
bitmapImage.CreateOptions = BitmapCreateOptions.None;
bitmapImage.UriSource = uri;
WriteableBitmap img = new WriteableBitmap(bitmapImage);

using (MemoryStream ms = new MemoryStream())
{
    // write an image into the stream
    Extensions.SaveJpeg(img, ms, img.PixelWidth, img.PixelHeight, 0, 100);
    byte[] byteArray = ms.ToArray();
} 

```

# google-app-engine - wxPython：从 Google 电子表格和用户获取变量中的数据，处理所有变量，将结果返回给用户

> ID：13682283
> 
> 赞同：1
> 
> 时间：2012-12-03T11:28:05.023
> 
> 标签：google-app-engine, python-2.7, wxpython, google-sheets

我希望我没有错过任何可以回答我问题的话题。我现在在这里，因为我对以下任务感到非常沮丧和厌倦： - 我有一个带有 Drive.Google 的电子表格，里面有很多数据 - 我想用 wxPython 创建一个应用程序，从这个电子表格中提取数据（以最简单的方式） - 还想从将通过一个漂亮的界面（面板又名窗口）访问此应用程序的用户那里获取多个数据 - 用户引入的多个数据应该能够与提取的数据一起使用从电子表格中出来。例如查看用户引入的数据是否在电子表格中，以及对用户引入的下一个数据进行一些其他操作。

我希望我能够清楚地表达我想做的事情。现在我是 Google API、Python 和 wxPython 的新手，但我有使用 C++、php、html 的经验。我已经花了 2 周时间发现 Drive.Google 并学习 Python 和 wxPython。我确实遵循了所有这些教程，做了笔记，阅读了stackoverflow问题答案，wiki.wxpython.org等的语气。我每天都在学习，现在我可以单独做很多事情，但是要拥有我上面描述的所有功能只是不知道该怎么做。至少请指引我的方向。很多时候我花几个小时做例子却一无所获。我有 Python、wxPython 扩展、GoogleAppEngine Launcher 甚至 pyCharm 演示。请善待。这是我有史以来的第一个问题。

这是我到目前为止结合相关示例所做的混乱：

```
import wx
import gdata.docs
import gdata.docs.service
import gdata.spreadsheet.service
import re, os

class Form(wx.Panel):

    def __init__(self, *args, **kwargs):
        super(Form, self).__init__(*args, **kwargs)
        self.createControls()
        self.bindEvents()
        self.doLayout()
        self.spreasht()

    def createControls(self):
        self.logger = wx.TextCtrl(self, style=wx.TE_MULTILINE|wx.TE_READONLY)
        self.saveButton = wx.Button(self, label="Elvegzes")
        self.nameLabel = wx.StaticText(self, label="type Name1:")
        self.nameTextCtrl = wx.TextCtrl(self, value="type here")
        self.name2Label = wx.StaticText(self, label="type Name2:")
        self.name2TextCtrl = wx.TextCtrl(self, value="type here") 

    def bindEvents(self):
        for control, event, handler in \
            [(self.saveButton, wx.EVT_BUTTON, self.onSave),
             (self.nameTextCtrl, wx.EVT_TEXT, self.onNameEntered),
             (self.nameTextCtrl, wx.EVT_CHAR, self.onNameChanged)]:
            control.Bind(event, handler)

    def doLayout(self):
             raise NotImplementedError

    def spreadsht(self):
        gd_client = gdata.spreadsheet.service.SpreadsheetsService()
        gd_client.email = 'my email address'
        gd_client.password = 'my password to it'
        gd_client.source = 'payne.org-example-1'
        gd_client.ProgrammaticLogin()
        q = gdata.spreadsheet.service.DocumentQuery()
        q['title'] = 'stationcenter'
        q['title-exact'] = 'true'
        feed = gd_client.GetSpreadsheetsFeed(query=q)
        spreadsheet_id = feed.entry[0].id.text.rsplit('/',1)[1]
        feed = gd_client.GetWorksheetsFeed(spreadsheet_id)
        worksheet_id = feed.entry[0].id.text.rsplit('/',1)[1]

        al1 = raw_input('Name1: ')
        print al1
        al2 = raw_input('Name2: ')
        print al2

        rows = gd_client.GetListFeed(spreadsheet_id, worksheet_id).entry
        for row in rows:
            for key in row.custom:
                if al1 == row.custom[key].text:
                    print '  %s: %s' % (key, row.custom[key].text)

    def onColorchanged(self, event):
        self.__log('User wants color: %s'%self.colors[event.GetInt()])

    def onReferrerEntered(self, event):
        self.__log('User entered referrer: %s'%event.GetString())

    def onSave(self,event):
        self.__log('User clicked on button with id %d'%event.GetId())

    def onNameEntered(self, event):
        self.__log('User entered name: %s'%event.GetString())

    def onNameChanged(self, event):
        self.__log('User typed character: %d'%event.GetKeyCode())
        event.Skip()

    def onInsuranceChanged(self, event):
        self.__log('User wants insurance: %s'%bool(event.Checked()))

    # Helper method(s):

    def __log(self, message):
        ''' Private method to append a string to the logger text
            control. '''
        self.logger.AppendText('%s\n'%message)

class FormWithSizer(Form):
    def doLayout(self):
        ''' Layout the controls by means of sizers. '''
        boxSizer = wx.BoxSizer(orient=wx.HORIZONTAL)
        gridSizer = wx.FlexGridSizer(rows=5, cols=2, vgap=10, hgap=10)

        # Prepare some reusable arguments for calling sizer.Add():
        expandOption = dict(flag=wx.EXPAND)
        noOptions = dict()
        emptySpace = ((0, 0), noOptions)

        # Add the controls to the sizers:
        for control, options in \
                [(self.nameLabel, noOptions),
                 (self.nameTextCtrl, expandOption),
                 (self.allomas2Label, noOptions),
                 (self.allomas2TextCtrl, expandOption),
                  emptySpace,
                 (self.saveButton, dict(flag=wx.ALIGN_CENTER))]:
            gridSizer.Add(control, **options)

        for control, options in \
                [(gridSizer, dict(border=5, flag=wx.ALL)),
                 (self.logger, dict(border=5, flag=wx.ALL|wx.EXPAND,
                    proportion=1))]:
            boxSizer.Add(control, **options)

        self.SetSizerAndFit(boxSizer)

class FrameWithForms(wx.Frame):
    def __init__(self, *args, **kwargs):
        super(FrameWithForms, self).__init__(*args, **kwargs)
        notebook = wx.Notebook(self)
        form2 = FormWithSizer(notebook)
        notebook.AddPage(form2, 'CALTH')
        self.SetClientSize(notebook.GetBestSize())

if __name__ == '__main__':
    app = wx.App(0)
    frame = FrameWithForms(None, title='Relevant title˝')
    frame.Show()
    app.MainLoop() 
```

再次感谢你！！！！！！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:34:21.693

首先，确保您可以仅使用 Python 下载所需的数据。然后用一个按钮创建一个 wxPython GUI。在该按钮的处理程序中，让它调用可以下载所需数据的脚本。

如果这导致您的 GUI 变得无响应，那么您将需要使用线程来进行下载。如果是这种情况，我推荐以下文章：

*   [http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)
*   [http://wiki.wxpython.org/LongRunningTasks](http://wiki.wxpython.org/LongRunningTasks)

好的，现在您可以正确下载数据了。现在您添加一个网格小部件或一个 listctrl / 对象列表视图小部件。选择其中之一。我更喜欢对象列表视图，您可以在[此处](http://www.blog.pythonlibrary.org/2009/12/23/wxpython-using-objectlistview-instead-of-a-listctrl/)阅读。然后在您的按钮处理程序中，您可以调用下载器脚本或线程，完成后，您可以使用该数据加载小部件。如果您使用的是线程，那么该线程将不得不调用下一步（即小部件加载位）。

现在您应该显示您的数据。剩下的就是让它看起来很漂亮，也许把下载部分放到一个菜单项中。

# java - 面试作业：Java ArrayList 创建哪个更好

> ID：13682288
> 
> 赞同：-3
> 
> 时间：2012-12-03T11:28:27.053
> 
> 标签：java, list, arraylist

> **可能重复：**
> [Java 中的类型 List 与类型 ArrayList](https://stackoverflow.com/questions/2279030/type-list-vs-type-arraylist-in-java)

您好，我在一次采访中被问到以下问题：

您会在何时何地选择以下哪一项？

```
ArrayList<SomeType> a = new ArrayList<SomeType>(); or
List<SomeType> a = new ArrayList<SomeType>(); 
```

如果有人知道请帮忙，我不知道有多大区别。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T11:31:12.790

第二个更好，因为您可以通过一行代码更改简单地将底层实现从`ArrayList`到（或任何适当的实现）更改。`LinkedList`

# ios - 更新应用程序后，应用程序在 sqlite 上崩溃

> ID：13682297
> 
> 赞同：0
> 
> 时间：2012-12-03T11:28:41.907
> 
> 标签：ios, database, sqlite, crash

更新应用后，sqlite 数据库出现问题。应用程序崩溃。这是我的日志，但我不确定有什么问题：

```
Stack: (
"0   MyApp                       0x00085bdb MyApp + 543707",
"1   MyApp                       0x0008633d MyApp + 545597",
"2   libsystem_c.dylib                   0x3af73e8b _sigtramp + 34",
"3   libsqlite3.dylib                    0x3792c447 sqlite3_log + 4986",
"4   libsqlite3.dylib                    0x3792c447 sqlite3_log + 4986",
"5   libsqlite3.dylib                    0x3791d1cb sqlite3_exec + 11954",
"6   libsqlite3.dylib                    0x3791b989 sqlite3_exec + 5744",
"7   libsqlite3.dylib                    0x3791b119 sqlite3_exec + 3584",
"8   libsqlite3.dylib                    0x3791ac17 sqlite3_exec + 2302",
"9   libsqlite3.dylib                    0x3791a977 sqlite3_exec + 1630",
"10  libsqlite3.dylib                    0x3795195f sqlite3_prepare_v2 + 30",
"11  MyApp                       0x00091ca7 MyApp + 593063",
"12  MyApp                       0x00094211 MyApp + 602641",
"13  MyApp                       0x000c09d9 MyApp + 784857",
"14  UIKit                               0x3a044545 <redacted> + 412",
"15  UIKit                               0x3a02930b <redacted> + 1310",
"16  UIKit                               0x3a0407c7 <redacted> + 206",
"17  UIKit                               0x39ffc803 <redacted> + 258",
"18  QuartzCore                          0x3bcd0d63 <redacted> + 214",
"19  QuartzCore                          0x3bcd0901 <redacted> + 460",
"20  QuartzCore                          0x3bcd1835 <redacted> + 16",
"21  QuartzCore                          0x3bcd121b <redacted> + 238",
"22  QuartzCore                          0x3bcd1029 <redacted> + 316",
"23  UIKit                               0x3a1cc1e1 <redacted> + 112",
"24  UIKit                               0x3a07c627 <redacted> + 34",
"25  CoreFoundation                      0x342be6cd <redacted> + 20",
"26  CoreFoundation                      0x342bc9c1 <redacted> + 276",
"27  CoreFoundation                      0x342bcc91 <redacted> + 608",
"28  CoreFoundation                      0x3422febd CFRunLoopRunSpecific + 356",
"29  CoreFoundation                      0x3422fd49 CFRunLoopRunInMode + 104",
"30  GraphicsServices                    0x377742eb GSEventRunModal + 74",
"31  UIKit                               0x3a04d2f9 UIApplicationMain + 1120",
"32  MyApp                       0x000036e3 MyApp + 9955",
"33  MyApp                       0x0000369c MyApp + 9884"
) 
```

第 11 行显示我的函数中的函数 sqlite3_prepare_v2 存在问题：

```
- (BOOL) checkIfTableExist:(NSString *) tableName
{
BOOL exist = NO;
sqlite3_stmt *stmt;

NSString *sql = [[NSString alloc] initWithFormat:@"SELECT name FROM sqlite_master WHERE type = 'table' AND name = '%@'", tableName];

if (sqlite3_prepare_v2(database, [sql UTF8String], -1, &stmt, NULL) == SQLITE_OK) { 
    if (sqlite3_step(stmt) == SQLITE_ROW)
        exist = YES;

    sqlite3_finalize(stmt);
}

[sql release];

return exist;
} 
```

可能是更新应用程序后数据库文件损坏了还是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:50:38.560

问题是您没有打开数据库。您的代码中没有`sqlite3_open`调用。

所以数据库变量将包含一个垃圾值。这就是它崩溃的原因。

```
- (BOOL) checkIfTableExist:(NSString *) tableName
{
  BOOL exist = NO;
  if (sqlite3_open([yourDatabasePath UTF8String], &dataBase) == SQLITE_OK)
  {
    NSString *sql = [NSString stringWithFormat:@"SELECT name FROM sqlite_master WHERE type = 'table' AND name = '%@'", tableName];
    const char *query = [sql UTF8String];
    sqlite3_stmt *stmt;
    if (sqlite3_prepare_v2(database, query, -1, &stmt, NULL) == SQLITE_OK)
    { 
       if (sqlite3_step(stmt) == SQLITE_ROW)
           exist = YES;

       sqlite3_finalize(stmt);
    }
  }
 return exist;
} 
```

# centos - CentOS 6.2 无法上网？

> ID：13682298
> 
> 赞同：1
> 
> 时间：2012-12-03T11:28:53.213
> 
> 标签：centos

我已经安装了 VMware Player 以在我的具有 Windows XP 操作系统的机器上使用 CentOS 6.2。当我使用 CentOS 时，我无法访问互联网。但是我们组织的 Intranet 托管的站点是可以访问的。

另外，我在 XP 环境中访问时可以访问 Internet 和 Intranet。

我没有为 CentOS 创建任何用户，当我通过 VMware Player 选择 CentOS 的任何实例时，它对我可用。

寻求帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-21T13:54:12.760

我也有这个问题，看来解决方法是修改

```
/etc/sysconfig/network-scripts/ifcfg-eth0 
```

以便该行读取 `ONBOOT=yes`而不是默认值 `ONBOOT=no`

然后重新启动您的计算机，或运行`ifup eth0`，您应该可以上网。由于默认设置是没有网络，因此如果您没有另一台计算机来查找解决方案，可能会很棘手！

# iphone - dispatch_async 块没有被调用

> ID：13682299
> 
> 赞同：3
> 
> 时间：2012-12-03T11:28:59.337
> 
> 标签：iphone, block, dispatch-async

**`MySynchManager`**类有一个共享实例。

类中的功能之一`MySynchManager`是

```
- (void)uploadSession:(NSString *)sessionId {
    // run the upload process on a separate thread to not to block the main thread for user interaction
    // process upload data in serial Queue
    NSLog(@"Inside uploadSession");
    if (!_serialQueue) {
        NSLog(@"uploadSession, _serialQueue is NOT ACTIVE");

        [self setRunLoopStarted:FALSE];
        _serialQueue = dispatch_queue_create("sessionUploadQueue", NULL);

        dispatch_async(_serialQueue, ^{
            [[MySyncManager sharedInstance] dispatchSession:sessionId];
        });
    }
    else {
        //[self setRunLoopStarted:FALSE];
        dispatch_async(_serialQueue, ^{
            [self dispatchSession:sessionId];
        });
        NSLog(@"Adding block to the dispatch queue is complete");
    }
} 
```

`uploadSession:@"session"`正在从视图控制器调用。

我面临的问题是有时会`dispatchSession`调用存在的代码，但有时不会调用块。我只在打印块后观察日志打印语句。

你们中的任何人都可以解释这背后的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T17:20:08.750

这是奇怪的代码。试试这个

```
-(void)uploadSession:(NSString *)sessionId
 {
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
       _serialQueue = dispatch_queue_create("sessionUploadQueue", NULL);
    });

    dispatch_async(_serialQueue, ^{
      [self dispatchSession:sessionId];
    });

 } 
```

# mono - 非托管堆栈溢出：IP：0x26eb76，故障地址：0xbf808ffc

> ID：13682308
> 
> 赞同：9
> 
> 时间：2012-12-03T11:29:24.517
> 
> 标签：mono, monodevelop, stack-overflow, unmanaged, monomac

[我的 Mono 应用](https://github.com/nicolas-raoul/CmisSync/tree/master/SparkleShare/Mac)程序在 Mac 上崩溃并显示此消息（[完整日志](https://github.com/nicolas-raoul/CmisSync/issues/74)）：

```
$ mono --debug bin/Debug/SparkleShare.app/Contents/MonoBundle/SparkleShare.exe
[...]
Stack overflow in unmanaged: IP: 0x26eb76, fault addr: 0xbf808ffc
[...] 
```

“非托管”意味着堆栈溢出不在我的代码中（我只有托管代码），而是在我嵌入的库（[SQLite、DotCmis、NewtonSoft.Json](https://github.com/nicolas-raoul/CmisSync/tree/master/SparkleLib/Cmis/lib)）或 Mono 的代码中。

即使我在调试模式下编译和运行，我得到的只是这两个十六进制。

**问题：**如何调查此堆栈溢出？有什么诀窍吗？

*注意：相同的库（具有几乎相同的代码）在 Linux 和 Windows 上运行良好。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T13:09:05.480

处理堆栈溢出非常棘手（对于单声道），因此很可能堆栈溢出实际上是你的。问题在于找出堆栈跟踪。

我通常使用 gdb 运行：

```
gdb --args mono --debug bin/Debug/SparkleShare.app/Contents/MonoBundle/SparkleShare.exe 
```

然后在堆栈开始增长之后尝试按 Ctrl+C，但在它实际溢出之前（gdb 与堆栈溢出严重混淆，发生这种情况时通常必须退出 gdb，这就是为什么你会需要在行动中捕捉溢出）。

按下 Ctrl+C 后，执行 a `thread apply all backtrace`，您将知道是否即将发生堆栈溢出（一个线程将有数千帧）。

一旦你在 gdb 中有一个巨大的堆栈跟踪，你需要确定循环。只需查看堆栈跟踪的地址，这通常很容易。获得此数据后，您可以像这样获得托管框架：

```
(gdb) p mono_pmip (0xdeaddead)
$1 = 0x0000dead  "Managed frame information shows up here" 
```

然后对您找到的循环中的所有帧执行相同的操作。

[这里](http://www.mono-project.com/Debugging#Debugging_with_GDB)有更多使用 gdb 调试单声道的技巧。

# jquery - mouseleave all like wrapAll

> ID：13682309
> 
> 赞同：0
> 
> 时间：2012-12-03T11:29:27.353
> 
> 标签：jquery, mouseleave

可以不为每个元素创建一个 mouseleave 函数，而是为所有没有像[wrapAll](http://api.jquery.com/wrapAll/)这样的 wrap 元素可以做的事情，比如 mouseleaveAll ？

```
 $('.map').on({
 mouseenter: function(){
// stuff
},
mouseleaveAll: function(){ // don't try this at home ! 
//stuff
} 
```

# ruby-on-rails - 如何在 Rails 中使用两个控制器和一个模型

> ID：13682312
> 
> 赞同：5
> 
> 时间：2012-12-03T11:29:40.777
> 
> 标签：ruby-on-rails

我有一个订单模型。客户通过 Orders 控制器与 Order 模型进行交互。管理员通过 Purchases 控制器与 Order 模型交互。

大多数情况下它都在工作，除了发生这种情况：

1.  管理员用户转到 new_purchase_path
2.  该应用程序使用购买控制器中的“创建”操作，正如预期的那样
3.  然后应用程序在订单控制器（而不是购买控制器）中使用“新”操作
4.  应用程序然后呈现“app/purchases/new”视图（不是“app/orders/new”视图），尽管它已切换到使用订单控制器
5.  管理员创建订单后，应用程序使用订单控制器呈现“app/orders/show”视图

我真正需要发生的是：

1.  管理员用户转到 new_purchase_path
2.  然后应用程序使用购买控制器中的“创建”操作
3.  然后应用程序使用购买控制器中的“新”操作
4.  然后应用程序呈现“应用程序/购买/新”视图
5.  管理员创建订单后，应用程序使用购买控制器呈现“app/purchases/show”视图

在 app/controllers/purchases_controller.rb 我有这个：

```
 def new
    @purchase = Order.new
    respond_with @purchase
  end 
```

如果尝试过类似的变化...

```
 def new
    @purchase = Order.new
    respond_with @purchase, :controller => :purchases
  end 
```

...但是对于respond_with，没有任何类似的记录，自然它不起作用。我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:04:27.023

几点观察：

1.  您不应在新操作中使用 *respond_with*，因为它对 HTML 以外的任何内容都没有意义。
2.  如果您只想为管理员制作一些控制器，则应该使用命名空间。请参阅[http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)。这样您也不需要更改名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T12:50:02.960

这个问题的答案与你[上一个问题有关](https://stackoverflow.com/questions/13676834/two-controllers-one-model-why-is-my-app-looking-for-a-second-model/13676976)。我已经在[那里更新了我的答案](https://stackoverflow.com/questions/13676834/two-controllers-one-model-why-is-my-app-looking-for-a-second-model/13676976#13676976)，但简而言之，问题不在于`respond_with`（正如@jiri-pospisil 指出你并不真正需要），而是你的表单由`simple_form_for`. 该表单中的操作 url 默认为`/orders`因为`@purchase`是 class 的一个实例`Order`。

要解决该问题，请在表单中指定 url：

```
= simple_form_for @purchase, :as => :purchase, :url => purchases_path(@purchase) do |f|
  = f.error_notification
  = f.input :name
  = f.button :submit 
```

然后你会发现你还有一个问题：新订单（购买）创建后，`respond_with`会重定向`show`到`OrdersController`. 要解决此问题，您可以使用以下`location`选项：

```
def create
  @purchase = Order.new(params[:purchase])
  if @purchase.save
    respond_with(@purchase, :location => purchases_path(@purchase))
    ... 
```

正如您现在可能知道的那样，以这种方式为单个模型使用两个控制器变得有些复杂，因此您可能需要考虑[命名空间](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)。

# xcode - 构建框架作为构建阶段 xcode

> ID：13682318
> 
> 赞同：3
> 
> 时间：2012-12-03T11:30:00.980
> 
> 标签：xcode, facebook-ios-sdk

我正在尝试构建 facebook-ios-sdk 作为我的项目构建阶段的一部分。简而言之，脚本会检查构建文件夹，如果不存在则运行 scripts/build_framework.sh

执行构建阶段脚本时，出现以下错误：

> 检查依赖项 [BEROR]CodeSign 错误：SDK“模拟器 - iOS 6.0”中的产品类型“静态库”需要代码签名

**从终端运行时，构建按预期工作。**

我看到的最接近的 SO 答案是[this](http://facebook.stackoverflow.com/questions/9493640/facebook-ios-sdk-how-to-build-static-library-for-xcode-4-3)，但它似乎适用于旧版本，并且提供的教程链接不再有效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T22:36:09.160

XCode 设置了很多环境变量，这些肯定会干扰脚本。如果您知道哪些环境变量是罪魁祸首，您可以在运行脚本之前清除它们，但是有几十个，我不想花时间弄清楚。

相反，我决定在没有 XCODE 环境变量的情况下运行脚本。如果以这种方式运行脚本，则只会在新 shell 中获得 PATH 环境变量。这似乎为我解决了问题：

```
env -i PATH=$PATH ./Submodules/facebook-ios-sdk/scripts/build_framework.sh 
```

# linq - 结果为分隔字符串的 LINQ 匿名对象（LINQ to Entities 无法识别方法 'System.String ToString()' 方法）

> ID：13682322
> 
> 赞同：0
> 
> 时间：2012-12-03T11:30:21.300
> 
> 标签：linq, entity-framework, linq-to-entities

我想得到一个；一个人拥有的所有亲属的分隔字符串。涉及四个表：

USERTAB PERSON PERSON_RELATION RELATION_TAB

询问

```
from u in USERTAB
select new
{
    Person = from p in PERSON where p.USERID == u.USERID
       select new
        {
          PNo = p.NO,
          Name = p.NAME
          Relatives = (from r in PERSON_RELATION where r.PSEQ == p.PSEQ select new
          {
            Description = (from rel in RELATION_TYPE where rel.TYPE_SEQ == r.TYPE_SEQ select rel.DESCRIPTION).ToArray() //(or also tried .ToString())
          })                                     
        }
} 
```

我希望描述字段是“;” 用户（人）拥有的所有亲属的分隔列表。

在我的 Relatives 对象上使用 ToString 它只会在运行时失败。LINQ to Entities 无法识别方法“System.String ToString()”方法

示例：描述 =“父亲、兄弟、表弟”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:46:47.347

您需要清楚查询的哪些部分被转换为 SQL 以在服务器上运行，以及哪些部分在本地应用程序中运行。关键是构建一个简单的查询来检索所有数据，然后使用`.AsEnumerable()`以确保剩余的转换不会被转换为 SQL，最后将数据转换为对您有用的形式。就像是

```
var query =
    from u in USERTAB
    select new
    {
        Person =
            from p in PERSON
            where p.USERID == u.USERID
            select new
            {
                PNo = p.NO,
                Name = p.NAME
                Relatives =
                    from r in PERSON_RELATION
                    where r.PSEQ == p.PSEQ
                    select new
                    {
                        Description =
                            from rel in RELATION_TYPE
                            where rel.TYPE_SEQ == r.TYPE_SEQ
                            select pos.DESCRIPTION
                    }
            }
        }
    };

var enumerable =
    from u in query.AsEnumerable()
    select new
    {
        Person =
            from p in u.Person
            select new
            {
                PNo = p.PNo,
                Name = p.Name
                Relatives =
                    string.Join(", ",
                        from r in p.Relatives
                        from d in r.Description
                        select d.Description)
            }
        }
    }; 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:36:25.803

这应该有效：为数组字符串编写扩展方法，如下所示：

```
public static ToCsv(this string[] strings)
{
    return String.Join("," strings);
} 
```

然后在上面`.ToCsv()`的通话结束时添加`.ToArray()`，它应该可以解决问题！

# asp.net - 如何配置导出到 Excel 的 DCOM 配置？

> ID：13682325
> 
> 赞同：0
> 
> 时间：2012-12-03T11:30:26.260
> 
> 标签：asp.net, export-to-excel, dcom

我正在我的一个 asp.net 应用程序中实现导出到 Excel 功能。我有两台服务器（QA 和 Development）。在开发服务器中它工作正常，但在 QA 服务器中我得到以下错误。

```
 An exception of type System.Runtime.InteropServices.COMException occurred and was 
caught. Source:mscorlib;Message:Retrieving the COM class factory for component with CLSID 
{00024500-0000-0000-C000-000000000046} failed due to the following error: 8000401a The 
server process could not be started because the configured identity is incorrect.  Check the username and password. (Exception from HRESULT: 
0x8000401A).;Target:System.MarshalByRefObject AllocateUninitializedObject(System.RuntimeType);StackTrace:   at 
System.Runtime.Remoting.RemotingServices.AllocateUninitializedObject(RuntimeType objectType)     at 
System.Runtime.Remoting.Activation.ActivationServices.CreateInstance(RuntimeType serverType)     at 
System.Runtime.Remoting.Activation.ActivationServices.IsCurrentContextOK(RuntimeType serverType, Object[] props, Boolean bNewObj)     at 
System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& 
bNeedSecurityCheck)     at System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache)     at 
System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache)     at 
System.Activator.CreateInstance(Type type, Boolean nonPublic)     at System.Activator.CreateInstance(Type type)     at XXXXXXXXXXXXX  Method - XXXXXXXXXXXXX 
```

我在两台服务器上都配置了相同的东西，但 QA 服务器仍然无法正常工作。接下来我该怎么办？任何想法...？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:45:55.880

Is Excel 2000 installed on your QA server ? At least it wasn't able to startup the automation...

Source: [http://support.microsoft.com/kb/292491/en-us](http://support.microsoft.com/kb/292491/en-us)

> Excel.Application version-independent PROGID and the {00024500-0000-0000-C000-000000000046} CLSID. COM related registry entries for Excel 2000 include the following: HKEY_CLASSES_ROOT\Excel.Application\CLSID Default Value: {00024500-0000-0000-C000-000000000046} HKEY_CLASSES_ROOT\CLSID{00024500-0000-0000-C000-000000000046}\LocalServer32
> 
> Default Value: C:\PROGRA~1\MICROS~1\Office\EXCEL.EXE /automation By following the registry keys from the PROGID to the CLSID, COM can learn where the Excel executable file is installed and start it for Automation.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-29T12:15:21.050

我遇到了一个类似的问题，即在会话之间丢失了身份，我不得不再次提供凭据以暂时修复它。在调查它时，我遇到了一篇文章，该文章建议授予用作具有“作为批处理作业登录”权限的身份的域帐户，因为如果未授予该权限，则当 AD 执行更新时该身份将丢失。

[https://support.microsoft.com/en-za/help/312497/prb-com-application-under-domain-account-fails-intermittently](https://support.microsoft.com/en-za/help/312497/prb-com-application-under-domain-account-fails-intermittently)

[https://www.brooksnet.com/faq/granting-logon-as-batch-privilege](https://www.brooksnet.com/faq/granting-logon-as-batch-privilege)

# xml - 在 xslt 中进行 if else 条件匹配

> ID：13682326
> 
> 赞同：1
> 
> 时间：2012-12-03T11:30:32.813
> 
> 标签：xml, xslt

谁能建议我如何使用 xslt 实现以下目标？

这是xml输入：

```
<output>
    <header>
       <someId>ABC123</someId>
 </header>
 <results>
  <product id="A">
   <externalId>XYZ666</externalId>
   <title>some title a</title>
  </product>
  <product id="B">
   <externalId>ABC123</externalId>
   <title>some title b</title>
  </product>
  <product id="C">
   <externalId>666777</externalId>
   <title>some title c</title>
  </product>
 </results>
</output> 
```

我需要的是一个 xslt，它将仅返回具有 \product\externalId 的“产品”，该 \product\externalId 与 \header\someId 匹配，否则它匹配所有 \product 元素。

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:56:41.610

你应该使用`<xsl:when test="condition">`..

对于您的 XML，我提供了示例 XSLT 代码来有条件地选择节点..

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="results/product">
    <xsl:choose>
      <xsl:when test="externalId = /output/header/someId">
        <!--Here goes the code-->
        <something></something>
      </xsl:when>
      <xsl:otherwise>
        <!--Other code -->
        <somethingelse></somethingelse>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

上面的代码表现得像..

```
if ("externalId = /output/header/someId") then
        <!--Here goes the code-->
        <something></something>
else
        <!--Other code -->
        <somethingelse></somethingelse> 
```

使用 Indentity 模板覆盖！

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>
  <xsl:template match="results/product[externalId = /output/header/someId]">
    <!--Here goes the code-->
    <something></something>
  </xsl:template>
  <xsl:template match="results/product[externalId != /output/header/someId]">
    <!--Here goes the code-->
    <somethingelse></somethingelse>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:58:49.003

**就这么简单——没有变量，没有`xsl:chose`，没有`xsl:when`，没有`xsl:otherwise`**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "/*[header/someId]/results/product[externalId=/*/header/someId]
     |
      /*[not(header/someId)]/results/product
     "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<output>
    <header>
       <someId>ABC123</someId>
 </header>
 <results>
  <product id="A">
   <externalId>XYZ666</externalId>
   <title>some title a</title>
  </product>
  <product id="B">
   <externalId>ABC123</externalId>
   <title>some title b</title>
  </product>
  <product id="C">
   <externalId>666777</externalId>
   <title>some title c</title>
  </product>
 </results>
</output> 
```

**产生了想要的正确结果**：

```
<product id="B">
   <externalId>ABC123</externalId>
   <title>some title b</title>
</product> 
```

**当对这个 XML 文档应用相同的转换时：**

```
<output>
 <results>
  <product id="A">
   <externalId>XYZ666</externalId>
   <title>some title a</title>
  </product>
  <product id="B">
   <externalId>ABC123</externalId>
   <title>some title b</title>
  </product>
  <product id="C">
   <externalId>666777</externalId>
   <title>some title c</title>
  </product>
 </results>
</output> 
```

**再次产生所需的正确结果：**

```
<product id="A">
   <externalId>XYZ666</externalId>
   <title>some title a</title>
</product>
<product id="B">
   <externalId>ABC123</externalId>
   <title>some title b</title>
</product>
<product id="C">
   <externalId>666777</externalId>
   <title>some title c</title>
</product> 
```

**说明**：

`Exp1`当给定条件`someCondition`为时，我们使用一种通用方法（通过表达式）选择一个节点集，并在相同条件为 时`true()`选择另一个节点集（通过表达式） 。`Exp2``false()`

被联合的两个表达式每个都可以在两个互斥条件下选择一个节点，因此，根据它们的条件值，只有一个表达式可以选择一个节点。

```
 Exp1[someCondition] |  Exp2[not(someCondition)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:35:01.417

w3schools 教程是一个很好的起点！

试着看看[这个](http://www.w3schools.com/xsl/xsl_if.asp)页面！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T11:36:10.513

```
<xsl:key name="by-id" match="product" use="externalId"/>

<xsl:template match="/">
  <xsl:variable name="ref" select="key('by-id', //header/someId)"/>
  <xsl:choose>
    <xsl:when test="$ref">
      <xsl:copy-of select="$ref"/>
    </xsl:when>
    <xsl:otherwise>
      <xsl:copy-of select="//product"/>
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

显示如何使用键来交叉引用节点。

# linq - 如何动态地将属性添加到 LINQ GroupBy 子句

> ID：13682332
> 
> 赞同：0
> 
> 时间：2012-12-03T11:30:58.913
> 
> 标签：linq, dynamic, group-by

我有一堂课`Product`：

```
class Product
{ 
   int Id { get; set; }
   string Name { get; set; }
   int CategoryId { get; set; }
   int PlantId { get; set; }
   DateTime ProductionDate { get; set; }
} 
```

我想`LINQ GroupBy`在多个属性上使用，但我事先不知道有多少以及哪些属性。例如，我可能想按 just `CategoryId`、 just`PlantId`或 both 分组。我在网上找到了一篇文章，描述了如何动态地[使用 LINQ GrouBy](http://blogs.msdn.com/b/mitsu/archive/2008/02/07/linq-groupbymany-dynamically.aspx)。

这可能确实有效，但如果我想在不知道粒度的情况下`ProductionDate.Year`执行Group By？`ProductionDate.Month`作为粒度，我的意思是我是想对`Products`特定年份的所有产品进行分组，还是将组缩小到月份。

我找到的唯一合乎逻辑的解决方案是：

```
public ProductInfo GetGroupedProducts(int? year, int? month, int? selectedCategoryId, int? selectedPlantId)
{
List<Product> products = GetProducts();

var groupedProducts = products.GroupBy(p => new { (year == null ? p.ProductionDate.Year : string.Empty),
                                                  (month == null ? p.ProductionDate.Month : string.Empty),
                                                  (selectedCategoryId == null ? p.CategoryId : string.Empty),
                                                  (selectedPlantId == null ? p.PlantId : string.Empty)
});

//perform some additional filtering and assignments 

} 
```

但我想可能会有一个更清洁、更合适的解决方案。使用基于字符串的旧式查询构建方式，这项任务更容易完成。如果没有其他办法，我真的认为这是`LINQ`需要改进的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:30:21.597

如果我明白你在问什么，我有一个类似的问题[Reversing typeof to use Linq Field<T>](https://stackoverflow.com/questions/13550353/reversing-typeof-to-use-linq-fieldt)

我会做类似的事情

```
public static IEnumerable<IGrouping<string, TElement>> GroupMany<TElement>(
    this IEnumerable<TElement> elements, 
    params Func<TElement, object>[] groupSelectors)
    {
        return elements.GroupBy(e => string.Join(":", groupSelectors.Select(s => s(e))));
    } 
```

然后你可以调用你的函数

```
var groupedProducts = products.GroupMany(p => p.CategoryId , p => p.ProductionDate.Month); 
```

函数通过用冒号分隔的属性字符串进行分组。我这样做的原因是因为字符串的哈希码保证与类相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:57:07.747

更清洁的解决方案是使用这种扩展方法：

```
public static TResult With<TInput, TResult>(this TInput? o, Func<TInput, TResult>
    selector, TResult defaultResult = default(TResult)) where TInput : struct
{
    return o.HasValue ? selector(o.Value) : defaultResult;
} 
```

像这样：

```
string result = year.With(T => p.ProductionDate.Year, string.Empty); 
```

其中，如果空值没问题：

```
string result = year.With(T => p.ProductionDate.Year); 
```

或具有`T`价值`int`的东西`int?`。

* * *

但是，您知道，更好的解决方案已经[存在](https://www.google.ru/search?q=the+truth+is+out+there&hl=en&newwindow=1&safe=off&tbo=u&tbm=isch&source=univ&sa=X&ei=_JS8UKKrKsSK4gSn04CwCA&sqi=2&ved=0CE0QsAQ&biw=1920&bih=979)，所以请随意扩展您的代码，以便我对其进行分析。

# c# - 使用 SimpleInjector 的同一组单例进行多个 RegisterAll 注册

> ID：13682333
> 
> 赞同：2
> 
> 时间：2012-12-03T11:31:01.987
> 
> 标签：c#, .net, dependency-injection, ioc-container, simple-injector

我正在使用 Simple Injector 为电子商务项目构建一个插件系统。我用来注册 a和 a 的`RegisterAll`所有实现（以及更多）。`IPaymentProvider``IResourceRegistrar`

但这每次都会创建一个新实例。[建议](http://simpleinjector.codeplex.com/discussions/360001)`RegisterSingle`在每种类型上使用。但是在这种情况下如何实现呢？

```
private static void RegisterMultipleUnderOneInterface(
    Container container, string name)
{
    IEnumerable<Type> pluginRegistrations =
        from dll in finder.Assemblies
        from type in dll.GetExportedTypes()
        where type.GetInterfaces().Any(i => i.Name == name)
        where !type.IsAbstract
        where !type.IsGenericTypeDefinition
        select type;

    if (pluginRegistrations.Any())
    {
        var @interface =
            pluginRegistrations.ElementAt(0).GetInterfaces()
            .First(i => i.Name == name);

        foreach (Type type in pluginRegistrations)
        {
            // HERE: register the type single somehow. 
        }

        container.RegisterAll(@interface, pluginRegistrations);
    }
} 
```

`container.RegisterSingle(type)`不起作用，因为同一接口（`IPaymentProvider`或`IResourceRegistrar`）固有的类型。`IPaymentProvider`实现类具有不带参数的构造函数，即带`IResourceRegistrar`参数的构造函数。

我不想做这样的事情，它违背了 IoC 容器的目的

```
var constructor = type.GetConstructors()[0];

switch (name)
{
    case "IResourceRegistrar":
        container.RegisterSingle(type, () =>
        {
            return constructor.Invoke(new object[
            {
                container.GetInstance<ILanguageService>()});
            });
        break;
    case "IPaymentProvider":
    default:
        container.RegisterSingle(type, () =>
        {
            return constructor.Invoke(new object[] { });
        });
        break;
} 
```

如何在没有丑陋开关的情况下将这些注册为单例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T19:14:01.893

也许我误解了，但是 RegisterSingle 应该可以工作。你应该能够做到这一点：

```
var types = ...

container.RegisterAll<IInterface>(types);

foreach (var type in types)
{
    container.RegisterSingle(type, type);
} 
```

更新：

因此，您要做的是自动化以下配置：

```
// A, B, C and D implement both I1 and I2.
container.RegisterSingle<A>();
container.RegisterSingle<B>();
container.RegisterSingle<C>();
container.RegisterSingle<D>();

container.RegisterAll<I1>(typeof(A), typeof(B), typeof(C), typeof(D));
container.RegisterAll<I2>(typeof(A), typeof(B), typeof(C), typeof(D)); 
```

这通常是自动化的方法。所以做四个步骤：

1.  查找要注册的所有类型。
2.  将找到的类型注册为单例。
3.  将类型列表注册为`I1`.
4.  将类型列表注册为`I2`.

这看起来像这样：

```
// using SimpleInjector.Extensions;

Type[] singletons = FindAllTypesToRegister();

foreach (Type type in singletons)
{
    container.RegisterSingle(type, type);
}

container.RegisterAll(typeof(I1), singletons);
container.RegisterAll(typeof(I2), singletons); 
```

但是，由于您尝试将其拆分为两个步骤并创建一个可以处理每个步骤的通用方法，因此您必须忽略已注册具体单例类型的情况。您可以通过以下方式执行此操作：

*   通过捕获从`RegisterSingle`.
*   `container.Options.AllowOverridingRegistrations = true`在调用之前通过设置覆盖现有注册`RegisterSingle`（之后禁用它是最安全的）。

# winforms - 支持 Winforms 中 SQL Server 2008 R2 和 2012 的 SQL Server 管理对象

> ID：13682335
> 
> 赞同：2
> 
> 时间：2012-12-03T11:31:05.497
> 
> 标签：winforms, visual-studio-2012, assemblies, .net-4.5, smo

我有一个面向 .NET 4.5 的 Windows 窗体应用程序。该应用程序提供了使用 SQL Server 管理对象 (SMO) 进行程序化数据库备份和还原的功能。

该应用程序应支持 SQL Server 2008 R2 和 SQL Server 2012 的 Express 版本，因为它仅使用两个版本都支持的功能。

现在，项目中要引用的 SMO 程序集（`Microsoft.SqlServer.ConnectionInfo, Microsoft.SqlServer.Smo, Microsoft.SqlServer.SmoExtended`等）将位于不同的文件夹中，具体取决于客户端安装的 SQL Server 版本

```
SQL Server Express 2008 R2: C:\Program Files\Microsoft SQL Server\100\SDK\Assemblies

SQL Server Express 2012: C:\Program Files\Microsoft SQL Server\110\SDK\Assemblies 
```

如您所见，当客户端运行 2008 R2 时，程序集将位于该`100\SDK`文件夹中，而对于那些想要运行 SQL Server 2012 的程序集，它们将位于该`110\SDK`文件夹中。

因此，如果我引用该`100\SDK`文件夹，则应用程序将对运行 SQL Server 2012 的客户端中断，因为它们只有该`110\SDK`文件夹。

那么这种情况一般是如何处理的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T11:25:05.470

如果要开发使用 SQL Server 管理对象 (SMO) 的应用程序，则应在安装 SQL Server 时选择客户端工具 SDK。

***要在不安装 SQL Server 的情况下安装 Client Tooks SDK，请安装 SQL Server 功能包中的共享管理对象。***

如果要确保 SQL Server 管理对象安装在将运行应用程序的计算机上，可以使用 SQL Server 功能包中的共享管理对象 .msi。

来源：[安装 SMO - SQL Server 2012](http://msdn.microsoft.com/en-us/library/ms162189.aspx)

按照带下划线的段落，我想我总是可以在客户端机器上安装一个通用的共享管理对象 msi，而不管正在运行的 sql server 版本如何。

# c++ - 尽管使用不存在的成员进行程序编译

> ID：13682342
> 
> 赞同：2
> 
> 时间：2012-12-03T11:31:37.527
> 
> 标签：c++, templates, compiler-errors, template-function

```
template <typename T>
void list<T>::copyAll(const list &l)
{
    if(l.isEmpty()) //if the list-to-copy is empty, we're done
    {
        first = last = NULL;
    }
    else
    {
        node *toFollow = l->yhjfrtydfg;
        node *whatever = l.asfqwejfq3fqh23f8hq23r1h23017823r087q1hef;

        while(toFollow != NULL)
        {
            T *newO = new T(*(toFollow->o));
            T here = *newO;
            insertBack(&here);
            toFollow = toFollow->next;
        }
    }
} 
```

这个程序编译（与程序的其余部分），即使这两行`node *toFollow = l->yhjfrtydfg;`显然`node *whatever = l.asfqwejfq3fqh23f8hq23r1h23017823r087q1hef;`是疯狂的输入。这很奇怪，因为任何其他错误都被捕获。有什么帮助吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T11:38:00.283

“从属名称”（在模板中使用的名称，其含义取决于模板参数）仅在模板实例化时解析，而不是在定义时解析。如果你不实例化模板，那么它可以包含你喜欢的任何疯狂的名字，只要它在语法上是正确的。

如果实例化您的程序将无法编译：

```
list<int> l;
l.copyAll(l); // ERROR 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-03T11:40:52.610

依赖于模板参数的名称仅在模板实例化后才会解析。在任何情况下都只解析非依赖名称。

C++ 创造了这种“两阶段查找”，其中阶段 1 是第一次解析的时间，阶段 2 是实例化时间。

例如：

```
template <typename T>
void frob() {
    foo = 5; // non-dependent, name must exist at this point
    T bar;
    bar.frobnicate = 7; // dependent, name is looked up upon instantiation

    bar->is->a.funny(T::hing); // dependent, likewise looked up later
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T11:41:41.787

不存在的成员是您最不担心的 - 编译器不会抱怨，因为某些 T 可能确实有这些成员。您感到困惑的根本原因是编译器只会像其他任何标识符一样看到一个标识符-只是您认为没有人会使用它，而且显然没有类型 T 拥有它们，这会使输入“疯狂”。这一点也不疯狂。它只是一个标识符。

```
 T newO = new T(*(toFollow->o));
        insertBack(&newO);
        toFollow = toFollow->next; 
```

完全彻底地破碎了。首先，您动态分配一个 T，然后*尝试从中构造一个堆栈分配的 T*？没有 T 有这种行为。然后你保留一个指向堆栈分配对象的指针。

# eclipse - 如何为 maven/eclipse/scala 使用一个 scala 库

> ID：13682349
> 
> 赞同：12
> 
> 时间：2012-12-03T11:31:52.080
> 
> 标签：eclipse, scala, maven, eclipse-indigo, scalatest

我已经将一个项目配置为使用 scala/maven/Eclipse。因为我在构建路径上需要一个 scala 库，并且 scalatest 也使用它自己的 scala 库，所以我收到了这个警告：

> 在构建路径中找到多个 scala 库，所有版本都兼容。这不是最佳配置，请尝试在构建路径中限制为一个 scala 库。

我认为我不能删除这个警告，因为我需要两个库——一个用于 Maven，另一个用于 Eclipse。这似乎没有造成任何问题，所以我只需要接受它吗？是否有另一种配置只使用一个用于 Maven 和 Eclipse 的 scala 库？

如果我从项目中删除 scala 库，我会收到错误消息：

> 在类路径中找不到 Scala 库。验证您的构建路径！

出于某种原因，Eclipse 要求 scala 库位于构建路径上，即使它已经作为 Maven 依赖项可用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-03T16:20:05.353

没有什么可担心的。Eclipse 会警告您，您`scala-library.jar`的类路径中有多个 s，但只要它们是相同的版本，就没有关系。

如果其中一个发生分歧（例如，通过在文件中增加 Scala 版本号`pom`），您将遇到麻烦：根据类路径顺序，IDE 将从一个或另一个中选择类，您可能会得到不同在命令行上构建时的结果。

回到你的设置，你可以

*   从 Eclipse 项目中删除`Scala Library`类路径容器，只留下 maven 添加的 jar。
*   忽略警告

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T15:28:44.320

在这里大胆猜测一下，您使用的是预装了 Scala 2.9 和相应 Scala 插件的 Eclipse Indigo 吗？如果这就是您需要使用该库的原因，或许可以考虑使用 Eclipse Juno？这就是我使用的，它适用于里程碑和夜间构建

# android - 使用本机录音机问题录制的音频

> ID：13682350
> 
> 赞同：1
> 
> 时间：2012-12-03T11:31:53.733
> 
> 标签：android, android-audiorecord

我正在使用android的录音机（本机应用程序）录制音频。使用以下代码：

```
final Intent audioIntent = new Intent(MediaStore.Audio.Media.RECORD_SOUND_ACTION);
            String path = Environment.getExternalStorageDirectory()
                    .toString();
            File AudioFolder = new File(path + "/MyFolder/",
                    "RecordedAudio");
            File audioFile = new File(AudioFolder, "myaudio.mp4");
            Uri audioFileUri = Uri.fromFile(audioFile);
            audioIntent.putExtra(MediaStore.EXTRA_OUTPUT, audioFileUri);
            startActivityForResult(audioIntent, 0); 
```

录音对我来说很好。录制成功后默认保存在sdcard中。我无法将它与位于 sdcard 中的特定文件夹“MyFolder”一起存储，因此它可能存储在 /sdcard/Myfolder/RecordedAudio/myaudio.mp4 中。

我上面的代码出了什么问题。？

请帮我提出您的建议。

谢谢

# vb.net - Datagridview 绑定到对象 - 使新行显示为空白

> ID：13682352
> 
> 赞同：0
> 
> 时间：2012-12-03T11:31:59.687
> 
> 标签：vb.net, datagridview, datagridviewcombobox

我有一个 Datagridview，它根据用户在列表框中所做的选择来更改其内容。DGV 由 2 个组合框（国家、产品）和 1 个文本框（数量）组成。

我创建了一个由 3 个整数组合而成的类。此类用作列表类型，它是 DGV 的数据源。还有另一个包含先前列表的列表，所以我有一个数据源列表。

DGV 的数据源是一个 BindingSource，只要触发 listBox 的 SelectedIndex，它就会发生变化。

每当将新行添加到 DGV 时，就会出现我的问题：我使用调用类的构造函数的 BindingSource.AddNew，但**它必须为类中的每个项目分配值**。这样，每当我单击 DGV 中的任何单元格时，我都不会得到空白行。而且，当BS改变然后返回时，又增加了一行。

我想要的是一个空白行 - 空的组合框和文本框。

谢谢你的帮助！

班上：

```
 Public Class PoList
    Private _CountryID As Integer
    Private _ProductID As Integer
    Private _Quantity As Integer

    Public Sub New(ByVal CountryID As Integer, ByVal ProductID As Integer, ByVal Quantity As Integer)
        _CountryID = CountryID
        _ProductID = ProductID
        _Quantity = Quantity
    End Sub

    Private Sub New()
        _CountryID = 1
        _ProductID = 2
        _Quantity = Nothing
    End Sub

    Public Property CountryID() As Integer
        Get
            Return _CountryID
        End Get
        Set(ByVal value As Integer)
            _CountryID = value
        End Set
    End Property

    Public Property ProductID() As Integer
        Get
            Return _ProductID
        End Get
        Set(ByVal value As Integer)
            _ProductID = value
        End Set
    End Property

    Public Property Quantity() As Integer
        Get
            Return _Quantity
        End Get
        Set(ByVal value As Integer)
            _Quantity = value
        End Set
    End Property

    Public Shared Function CreateNewPoList() As PoList
        Return New PoList
    End Function
End Class

Private Sub List_AddRow(ByVal sender As Object, ByVal e As AddingNewEventArgs) Handles AllListBindingSource.AddingNew
    e.NewObject = PoList.CreateNewPoList
End Sub 
```

创建一个新的内部列表：

```
AllList.Add(New List(Of PoList))
AllListBindingSource.AddNew()
AllListBindingSource.DataSource = AllList(TableCounter)
AddPoDetails.DataSource = AllListBindingSource 
```

SelectedIndexChanged 事件：

```
AllListBindingSource.DataSource = AllList(AddPoList.SelectedIndex)
AddPoDetails.DataSource = Nothing
AddPoDetails.DataSource = AllListBindingSource 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:13:52.287

对了，看看能不能帮到你。正如我所解释的那样，您有一个充满列表的列表。这些列表不知道自己的身份，并且基于列表中的当前索引。

首先，我不会使用 Bindingsource.AddNew，而是将新对象直接添加到列表中。

```
AllList(TableCounter).Add(New Polist()) 
```

通过这种方式，您可以通过使用您不太确定的事件来确切地知道创建了多少对象。要刷新列表，请执行以下操作：

```
AllListBindingSource.ResetBindings(true) 
```

这将使用新线路更新您的 DGV。

现在你需要重组你的类，因为当你创建一个新的 Polist 时，你将一个值设置为空。这会让你的桌子崩溃。你需要做的是：

```
Private _Quantity As String

Public Property Quantity() As String
        Get
           Return _Quantity
        End Get
        Set(ByVal value As String)
           _Quantity = value
        End Set
End Property 
```

使用字符串是获得空白文本框的唯一方法，如果您使用 Quantity 作为整数（您应该这样做），我建议您将 0 作为默认值。您的构造函数需要更改为：

```
Private Sub New()
  _CountryID = 0            
  _ProductID = 0            
  _Quantity = ""
End Sub 
```

在您的组合框列中，您必须在顶部添加一个空白项目（我猜您手动添加它们），应该可以通过在项目顶部有一个空白行来实现。

# php - PDO 和 MySQL 全文搜索

> ID：13682355
> 
> 赞同：9
> 
> 时间：2012-12-03T11:32:15.033
> 
> 标签：php, mysql, pdo, full-text-search

我正在将我所有的网站代码从使用 mysql_* 函数转换为 PDO。PDO 上的 PHP 文档并不清楚我的需要。它为您提供了要使用的功能，但没有详细解释它们在不同的场景中。

基本上，我有一个 mysql 全文搜索：

```
$sql = "SELECT ... FROM search_table WHERE MATCH(some_field) AGAINST ('{$searchFor}*' IN BOOLEAN MODE)"; 
```

实际语句要长得多，但这就是它的基本功能。

我的问题是，我如何将其纳入 PDO？

我知道您不打算在位置标记周围使用引号，所以您是否将它们留在 AGAINST() 函数中？我包括他们吗？如果我把它们排除在外，通配符等会发生什么？

```
$sql = $this->db->prepare("SELECT ... FROM search_table WHERE MATCH(some_field) AGAINST(:searchText IN BOOLEAN MODE");
$sql->bindValue(':searchText', $searchFor . '*'); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-03T11:42:10.303

不幸的是，这是使用查询参数的一个奇怪的例外（**编辑：**但显然不是在每个 MySQL 分支的最新版本中，见下文）。

输入的模式`AGAINST()` *必须*是常量字符串，而不是查询参数。与 SQL 查询中的其他常量字符串不同，您不能在此处使用查询参数，这仅仅是因为 MySQL 的限制。

要安全地将搜索模式插入到查询中，请使用[PDO::quote()](http://php.net/manual/en/pdo.quote.php)函数。请注意，PDO 的 quote() 函数已经添加了引号分隔符（与 mysql_real_escape_string() 不同）。

```
$quoted_search_text = $this->db->quote('+word +word');

$sql = $this->db->prepare("SELECT ... FROM search_table 
    WHERE MATCH(some_field) AGAINST($quoted_search_text IN BOOLEAN MODE"); 
```

* * *

来自@YourCommonSense 的重新评论：

你说得对，我刚刚在 MySQL 5.5.31、5.1.68 和 5.0.96 上测试过这个（MySQL Sandbox 是一个很棒的工具），看起来这些版本确实接受 a 的 AGAINST() 子句中的查询参数动态 SQL 查询。

我仍然记得过去存在的冲突。也许它已在每个分支的最新版本中得到纠正。例如，我发现这些相关的错误：

*   在 AGAINST() 子句中使用存储过程参数总是返回相同的结果： [http ://bugs.mysql.com/bug.php?id=3734](http://bugs.mysql.com/bug.php?id=3734)
*   使用准备好的语句、MATCH 和 FULLTEXT 导致崩溃或奇怪的结果：[http ://bugs.mysql.com/bug.php?id=14496](http://bugs.mysql.com/bug.php?id=14496)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T12:44:27.187

```
$sql = "SELECT * FROM tablename WHERE MATCH (fieldname) AGAINST (:searchstr IN BOOLEAN MODE) LIMIT {$per_page} OFFSET {$pg_offset}";

try {
    $database->prepare($sql);
    $database->bindParam(':searchstr', $search);
    $database->execute();
    $result_array = $database->fetch_array($sql);
} catch (Exception $e) {
    echo $e->getMessage();
} 
```

# .net - 如何使用 .Net 的 POS 查找安装在网络中的 POS 打印机

> ID：13682356
> 
> 赞同：1
> 
> 时间：2012-12-03T11:32:16.403
> 
> 标签：.net

我正在使用一个 POS 系统并卡在一个地方。我遇到的问题是网络中的 POS 打印机。让我详细描述一下我的问题。

我有一台 POS 打印机连接到我的网络。打印机有直接的 LAN 电缆连接。它没有安装在任何计算机上。我已通过 Windows 7 操作系统成功连接了该打印机。

现在我的问题是如何使用 Microsoft POS sdk 访问该网络打印机。我已经尝试过 POS 库的 GetDevices 方法。它返回我为空。

有没有人有同样的经验。

提前致谢。

# libcurl - libCurl：一种方法中的 curl_easy_setopt 和另一种方法中的 curl_easy_perform 不起作用

> ID：13682360
> 
> 赞同：2
> 
> 时间：2012-12-03T11:32:27.167
> 
> 标签：libcurl

我有一个代码，在我`curl_easy_setopt`用来设置代理 URL 的一个本地函数中。在另一个本地函数中，我调用了`curl_easy_perform`. 但是当控件从一个函数转移到另一个函数时，使用局部变量设置的代理 url 包含垃圾字符，并且 DNS 查询返回错误。libcurl 帮助页面说，当我们执行 setopt 时，curl 库会复制字符串值。但我觉得图书馆只是在需要时引用该值。它不会复制字符串。因此，如果使用局部变量设置代理 url，它会在我调用时包含垃圾`curl_easy_perform`。

以下是示例代码片段。

```
void funcSetOpt
{
    char ProxyUrl[] = "someproxy";
    curl_easy_setopt(curlHandle, CURLOPT_PROXY, ProxyUrl);
}

void funcPerform
{
    curl_easy_perform(curlHandle);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:58:55.607

这意味着您使用的是相当旧的 libcurl 版本，并且[curl_easy_setopt](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html)手册页中的以下部分可能会影响您：

> 在 7.17.0 版本之前，不复制字符串。相反，用户被迫保持它们可用，直到 libcurl 不再需要它们。

# android - 获取所有已安装的应用程序以及设置、消息、相机/仅在应用程序菜单中可见的那些应用程序

> ID：13682365
> 
> 赞同：1
> 
> 时间：2012-12-03T11:32:52.393
> 
> 标签：android

我正在尝试获取所有应用程序的列表，其中包括所有已安装的应用程序和一些系统应用程序，如相机、设置、消息。我通过使用安装了所有用户

`ApplicationInfo.FLAG_SYSTEM == 0`

和所有系统应用程序 `ApplicationInfo.FLAG_SYSTEM == 1` ，也有一些系统应用程序来自 `ApplictionInfo.FLAG_UPDATED_SYSTEM_APP` 但不是全部

但是我想获取我在手机的应用程序部分看到的所有应用程序，所以任何人都可以帮助我如何过滤掉系统应用程序以仅获取相机、设置、消息等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T11:39:38.710

使用此代码，

```
 PackageManager pm = this.getPackageManager();
    Intent intent = new Intent(Intent.ACTION_MAIN, null);
    intent.addCategory(Intent.CATEGORY_LAUNCHER);
    list = pm.queryIntentActivities(intent, PackageManager.PERMISSION_GRANTED);
    for (ResolveInfo rInfo : list)
    {
       String str = rInfo.activityInfo.applicationInfo.loadLabel(pm).toString() + "\n";
       ArrayList results = new ArrayList();
       results.add(rInfo.activityInfo.applicationInfo.loadLabel(pm).toString());
       Log.w("Installed Applications", rInfo.activityInfo.applicationInfo.loadLabel(pm).toString());
       icon =  rInfo.activityInfo.applicationInfo.loadIcon(pm);
    } 
```

# php - 如何从外部网站获取 .jpg 图像并将其存储（与 CURL 分开存储）

> ID：13682366
> 
> 赞同：0
> 
> 时间：2012-12-03T11:32:57.650
> 
> 标签：php, curl

我目前正在尝试在我的班级中创建一个从外部服务器获取数据的函数。我可以使用 CURL 获取数据，但我不想使用 CURL 直接将其存储在文件中。这很难解释，所以我会告诉你。

这是我获取图像的功能：

```
function getCharacterPortrait($CharID, $size){

    $url = "http://image.eveonline.com/character/{$CharID}_{$size}.jpg";
    $ch = curl_init($url);
    curl_setopt_array($ch, array(
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_HEADER         => false,
        CURLOPT_FOLLOWLOCATION => true,
        CURLOPT_ENCODING       => "",
        CURLOPT_AUTOREFERER    => true,
    ));
    $data = curl_exec($ch);
    curl_close($ch);

    return $data;

} 
```

所以，我想从这里做的是获取`$data`我假设的原始图像，并将其存储在`.jpg`指定文件中。我使用 CURL 找到了类似的解释，但 CURL 用于直接存储它。我想要调用函数以获取图像以存储文件的脚本。

对不起，如果我有点混乱，但我认为你明白我所说的前提。如果需要更多解释，请这样说。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:39:45.013

这个怎么样？

```
$a = implode('',@file('http://url/file.jpg'));
$h = fopen('/path/to/disk/file.jpg','wb');
fwrite($h,$a);
fclose($h); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T18:34:08.823

用它

```
$url = "http://image.eveonline.com/character/{$CharID}_{$size}.jpg";
$local_path = "myfolder/{$CharID}_{$size}.jpg";
$file = file_get_contents($url);
file_put_contents($file, $local_path); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:44:39.920

Just write all the data cURL gave you to a file with [`file_put_contents()`](http://php.net/file_put_contents) for example?

```
[your curl code...]
file_put_contents('localcopy.jpg', $data); 
```

* * *

**Edit:**

Apparently there is also a cURL option to download to a file like:

```
$fp = fopen($path, 'w');
curl_setopt($ch, CURLOPT_FILE, $fp); 
```

*Found at [http://www.phpriot.com/articles/download-with-curl-and-php](http://www.phpriot.com/articles/download-with-curl-and-php)*

# kendo-ui - 如何将新的 kendo 数据源绑定到现有的 kendo-web-UI 列表视图？

> ID：13682372
> 
> 赞同：-1
> 
> 时间：2012-12-03T11:33:27.633
> 
> 标签：kendo-ui

我创建了一个剑道数据源并将其分配给剑道列表视图。它的工作正常。但我为列表视图添加了搜索功能。问题是搜索后数据源已更新，但我的列表视图未反映更改。请帮助我这里是下面的代码。谢谢

```
<script type="text/javascript">
var shareDataSource; var title = $('#blogTitle').val() || "";
shareDataSource = new kendo.data.DataSource({
    transport: {
        read: {
            url: "api/BlogPosts/?title=" + title  
        }
    },
    pageSize: 15
});

 $("#listView").kendoListView({
        dataSource: shareDataSource,
        template: kendo.template($("#template").html()),
        autoBind: true
    });

 function searchByTitle() {
    var title = $('#blogTitle').val();
    shareDataSource = new kendo.data.DataSource({
        transport: {
            read: {
                url: "api/BlogPosts/?title=" + title  

            }
        },
        pageSize: 15
    });
    shareDataSource.read();

}</script>     
<div>

      <input type="text" id="blogTitle" size="5" />
      <input type="button" value="Search" onclick="searchByTitle();" />

</div>  <div id="listView"></div> 

 <script type="text/x-kendo-tmpl" id="template">
        <div class="post">
            <div class="post-meta">
                <h2 class="post-title"> <a title="" rel="bookmark" href="">${Title}</a></h2>
                <hr/>
                <p class="post-metadata">November 29, 2012 in <a rel="category tag" title="View all posts in .net" href="">.net</a>,
                <a rel="category tag" title="View all posts in SQL Server R2" href="">SQL Server R2</a> | Tags: <a rel="tag" href="">software</a>,
                <a rel="tag" href="">technology</a> | <a title="" href="">Leave a comment</a></p>
            </div>      <div class="post-content"> ${Content}
        </div>
      </div>

    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:47:15.387

Hasib，你已经在顶部定义了剑道数据源，尽量不要在你的搜索方法中重新创建它。理论上，要更新您的 ListView，您需要在数据源上调用 read ：

```
function searchByTitle() {
    shareDataSource.read();

} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T18:42:58.937

更新数据源 [读取]。但应该使用[parametrMap](http://docs.kendoui.com/api/framework/datasource#transportparametermap-function)。Bobby_D 上面提到过。

```
//---------------------------------------------------------------------------
     var shareDataSource; 
        shareDataSource = new kendo.data.DataSource({
            transport: {
                read: {
                    url: function(){ var title = $('#blogTitle').val() || "";
                        return "api/BlogPosts/?title=" + title;} 
                }
            },
            pageSize: 15
        });

//-----------------  better -----------------------------
      var shareDataSource; 
    shareDataSource = new kendo.data.DataSource({
        transport: {
            read: {
                url:"api/BlogPosts/",// "api/Blogposts/",//

                data: {

                    title: function () { return ($('#blogTitle').val() || ""); } // sends the value of the input as the title id
                }

    }
    },
    pageSize: 15
    }); 
```

# testing - 设置硒测试的系统日期

> ID：13682373
> 
> 赞同：1
> 
> 时间：2012-12-03T11:33:34.903
> 
> 标签：testing, selenium, functional-testing

我有一个应该在周末和晚上工作的 Javascript 脚本，我想用 Selenium 测试它（是的，我知道 Jasmine，在这个项目中使用 Selenium 更容易）。

是否可以以某种方式更改系统（浏览器）日期以测试脚本，而无需在脚本中编写设置器进行测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T06:16:56.060

有一种方法可以做到这一点 Selenium 方式....您可以同步和异步方式调用/执行 Javascript 函数....

```
IWebDriver driver = new InternetExplorerDriver();
driver.Navigate().GoToUrl("http://www.google.com");
IJavaScriptExecutor js = (IJavaScriptExecutor)driver; 
```

***同步方式***

```
js.ExecuteAsyncScript("Javascript_Function(Date_x,Time_Y)"); 
```

***异步方式***

```
js.ExecuteScript("Javascript_Function(Date_x,Time_Y)"); 
```

我希望这会有所帮助......一切顺利:)

# jquery - 在 ASP NET MVC 应用程序中使用 jquery 的字段的动态掩码规则

> ID：13682374
> 
> 赞同：1
> 
> 时间：2012-12-03T11:33:35.120
> 
> 标签：jquery, asp.net, asp.net-mvc, asp.net-mvc-4, mask

我只是想要第二个意见

我有一个表单可以让用户创建一些索引。我需要添加一个掩码功能。用户将能够根据规则创建自己的字段掩码。我正在考虑将掩码存储在这样的数据库表中：

```
id -> index id
idName -> as for example: phoneNumber
mask -> (999) - 9999-9999 
```

第二步是检索掩码并使用 javascript 将其与索引字段相关联

```
$('#idName').mask(mask); 
```

这会是一个好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:18:05.560

我发现动态配置字段掩码的解决方案是从输入字段中获取掩码，并在掩码函数中使用它

```
mask = $('#mask').val();
$('#idName').mask(mask); 
```

为我工作。Tks

# .htaccess - .htaccess 重定向部分 url ?tmpl=component

> ID：13682375
> 
> 赞同：1
> 
> 时间：2012-12-03T11:33:36.080
> 
> 标签：.htaccess, url, url-rewriting

我有这样的网址

```
/projects/5-cockroft-renovation-after/detail/151-waterproofing-alberton.html**?tmpl=component** 
```

如果我可以重定向到

```
/projects/5-cockroft-renovation-after/detail/151-waterproofing-alberton.html 
```

基本上希望删除到目前为止`?tmpl=component`输入的 URL，`.htaccess`我发现我对这个主题的了解有点有限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:01:30.570

基本上，您将基于正则表达式的规则添加到您的 .htaccess 中，如下所示：

```
RewriteRule   ^(some regexp pattern)(another regexp pattern)$    /something/$1/$2  [R] 
```

括号中匹配的值将替换为 $1、$2、$3 等。

我想这应该对你有用：

```
RewriteRule ^(.+\.html).*$ $1 [R] 
```

它应该将文本从开头带到 .html 并忽略它后面的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:48:12.330

将这些规则添加到 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} tmpl=component
RewriteRule ^ %{REQUEST_URI}? [L,R] 
```

# .net - MAF AddInController 的 AppDomain 属性为 null

> ID：13682376
> 
> 赞同：1
> 
> 时间：2012-12-03T11:33:39.693
> 
> 标签：.net, maf

我是 MAF 的新手，所以我的问题可能很愚蠢，但阅读一些关于激活插件的文档并不能澄清问题。

我有以下代码：

```
var process = new AddInProcess();
process.Start();

var addinView = tokenAddIn.Activate<HostViewSyncManagerBase>(process, AddInSecurityLevel.FullTrust);
var controller = AddInController.GetAddInController(addinView);
controller.AppDomain.UnhandledException += (sender, e) => Log.Error(e.ExceptionObject);
context.DoSomeWork(); 
```

但是`controller.AppDomain.UnhandledException`抛出`NullReferenceException`，因为`AppDomain`属性是`null`. 这是预期的行为吗？如果是，如何在插件中管理异常或者我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-08T16:45:10.477

仅当您在进程中激活 AddIn 时才会设置 AppDomain。查看[参考源](http://referencesource.microsoft.com/#System.AddIn/System/Addin/Hosting/AddInController.cs#70)，有一条评论指出 AppDomain 对于 OOP（进程外）场景无效。

如果您考虑一下，这是有道理的，因为它是另一个进程中的 AppDomain。如果要在该过程中附加到未处理的异常，则必须将代码放在`AddInAdapter`or`AddInView`中。

# iphone - 如何将元素添加到由“for”循环创建的数组中？

> ID：13682378
> 
> 赞同：-1
> 
> 时间：2012-12-03T11:33:40.233
> 
> 标签：iphone

我正在使用 for 循环获取从当前位置到目标位置的距离。我想要一个包含从当前位置到目标位置的所有距离的数组。

```
for (i = 0; i < [Arr_Lat count]; i++)  
{
    NSString *latst1 = [[NSString alloc]initWithFormat:[Arr_Lat objectAtIndex:i]];
    NSString *longst1 = [[NSString alloc]initWithFormat:[Arr_Long objectAtIndex:i]];

    NSLog(@"First lat : %@",latst1);
    NSLog(@"First  ong : %@",longst1);

    double Doblat1 = [latst1 doubleValue];
    double Doblong1 = [longst1 doubleValue];

    CLLocationCoordinate2D coord1 = CLLocationCoordinate2DMake(coord1.latitude = Doblat1, coord1.longitude = Doblat1);

    NSLog(@" Coordinat ==== : %f -- %f",coord1.latitude,coord1.longitude) ;

    CLLocation *currLoc = [[CLLocation alloc] initWithLatitude:appDel.curr_lat longitude:appDel.curr_long];

    CLLocation *destLoc1 = [[CLLocation alloc] initWithLatitude:Doblat1 longitude:Doblong1];

    NSLog(@" Currennt Location : %@", currLoc);
    NSLog(@" Destination Location : %@" , destLoc1);

    distance = [destLoc1  distanceFromLocation:currLoc];

    NSLog(@" Distance  :   ------- %0.3f", distance);

    DistStr = [[NSString alloc]initWithFormat:@" %f",distance];

    [currLoc release];

    [destLoc1 release];
    [Arr_title retain];

    [tbl_nearplace reloadData];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:39:21.253

如果你想存储距离，你需要一个 NSMutableArray。

1.  声明一个`NSMutableArray *distanceArray;`类范围。
2.  初始化它： distanceArray = [[NSMutableArray alloc] init];
3.  在for循环之后`DistStr =[[NSString alloc]initWithFormat:@" %f",distance];` 编写如下代码：

    ```
    [distanceArray addObject:DistStr]; 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T23:10:18.767

假设我们有这个数组，里面有我们想要迭代的东西并将这些元素添加到另一个数组中

```
NSArray *someArrayWithStuff = @[@"Hello",
                                @"Its",
                                @"Very",
                                @"Cold",
                                @"Outside",
                                @"Today"]; 
```

假设我们希望将 someArrayWithStuff 的内容添加到另一个数组中，因此我们创建一个 NSMutableArray

```
NSMutableArray *theNewArrayWithOurStuff = [NSMutableArray array]; 
```

我们遍历 someArrayWithStuff

```
for (int i = 0; i < someArrayWithStuff.count; i++) {
    // Add object to the new array
    [theNewArrayWithOurStuff addObject:[someArrayWithStuff objectAtIndex:i]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:49:01.260

```
NSMutableArray *Distance=[[NSMutableArray alloc]Init];

for (i = 0; i < [Arr_Lat count]; i++)  
{
    NSString *latst1 = [[NSString alloc]initWithFormat:[Arr_Lat objectAtIndex:i]];
    NSString *longst1 = [[NSString alloc]initWithFormat:[Arr_Long objectAtIndex:i]];

    NSLog(@"First lat : %@",latst1);
    NSLog(@"First  ong : %@",longst1);

    double Doblat1 = [latst1 doubleValue];
    double Doblong1 = [longst1 doubleValue];

    CLLocationCoordinate2D coord1 = CLLocationCoordinate2DMake(coord1.latitude = Doblat1, coord1.longitude = Doblat1);

    NSLog(@" Coordinat ==== : %f -- %f",coord1.latitude,coord1.longitude) ;

    CLLocation *currLoc = [[CLLocation alloc] initWithLatitude:appDel.curr_lat longitude:appDel.curr_long];

    CLLocation *destLoc1 = [[CLLocation alloc] initWithLatitude:Doblat1 longitude:Doblong1];

    NSLog(@" Currennt Location : %@", currLoc);
    NSLog(@" Destination Location : %@" , destLoc1);

    distance = [destLoc1  distanceFromLocation:currLoc];

    NSLog(@" Distance  :   ------- %0.3f", distance);

    NSString *DistStr = [[NSString alloc]initWithFormat:@" %f",distance];

    [Distance addObject:DistStr];

    [DistStr release];
    [currLoc release];

    [destLoc1 release];
    [Arr_title retain];

    [tbl_nearplace reloadData];
} 
```

# java - Android动画图片变化

> ID：13682380
> 
> 赞同：1
> 
> 时间：2012-12-03T11:33:46.407
> 
> 标签：java, android, animation

我希望我的程序执行以下操作：

在框架中有一个按钮和一些图像。单击按钮时，我希望此图像向左移动，直到它在框架上不可见（在框架之外），同时下一个图像应该从框架外部到它的中心并停在那里直到再次单击按钮。

每次单击按钮时我是否应该膨胀一些 ImageView 并更改它们的 x 坐标。虽然属性动画？或者我可以在框架上制作两个 ImageView，其中一个是透明的，而另一个是可见的？然后在单击按钮时更改它们的位置和透明度级别（“alpha”）？

哪种方法是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:54:51.740

A[`ViewFlipper`](http://developer.android.com/reference/android/widget/ViewFlipper.html)可能会做你想做的事。从javadoc：

```
Simple ViewAnimator that will animate between two or more views that have been 
added to it. Only one child is shown at a time. If requested, can automatically
flip between each child at a regular interval. 
```

据推测，您可以添加两个`ImageView`实例作为 的子级`ViewFlipper`，然后使用幻灯片动画在它们之间设置动画。SO上有一些详细说明这一点的答案。尝试搜索`ViewFlipper`.

# c# - 使用 OpenRemoteBaseKey 需要什么权限？

> ID：13682382
> 
> 赞同：1
> 
> 时间：2012-12-03T11:33:52.490
> 
> 标签：c#, .net, registry

我曾在其他一些线程中询问过这个问题，并获得了访问远程注册表的链接。但我现在面临的问题是我无法在注册表中添加任何值。我试图通过使用以下代码向注册表中的现有条目添加一些值，但未在远程注册表中执行任何操作：

```
RegistryKey rk;
rk = RegistryKey.OpenRemoteBaseKey(
RegistryHive.CurrentUser, ReadServerName());
regkey = rk.OpenSubKey(LeafRegistry.LeafRoot + "\\sim\\NewView\\");
regkey.SetValue("runsystem", SIMserver); 
```

**更新**

RegistryHive.LocalMachine 将在这里工作，我可以打开并进行所有操作，但是为什么 RegistryHive.CurrentUser 呢？我要说的是在上面的代码中，我将获得 'rk' 的值，但我无法获得 regkey 的值，它将变为 null，我认为 CurrentUser OpenSubKey 不起作用。

**更新**

当我深入分析时，我发现除了这个特定的键之外，所有其他键都可以访问。我想知道这个特定键发生了什么，我在右键单击后也检查了权限，但看不到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:14:46.933

在大多数情况下，当您尝试通过网络更改远程计算机上的注册表值时，您几乎可以肯定需要权限。此外，在很多情况下，即使您可以修改注册表值，它们也可以通过组策略刷新并恢复。

可能是注册表的某些部分被限制编辑，

如果您没有管理员特权，那么我认为您会陷入困境。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:18:17.533

这是行不通的。假设您的程序正在访问远程计算机的用户帐户未在远程计算机上登录。Windows应该怎么做？实际上，内部调用的文档[`RegConnectRegistry`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724840.aspx)甚至`OpenRemoteBaseKey`没有`HKEY_CURRENT_USER`列为允许的参数。

# ios - 防止 UICellView 自动调整它的高度

> ID：13682383
> 
> 赞同：0
> 
> 时间：2012-12-03T11:33:53.380
> 
> 标签：ios, interface-builder

这很奇怪。先看看我的IB项目：

![IB项目](../Images/796480a6543d8a2bb932153a95b30cd3.png)

现在它在模拟器上的样子：

![滚动前的模拟器屏幕截图](../Images/83e23f04ea6af5576dee75a90361a961.png)

这里有两件事：

1.  为什么单元格比我在 IB 上设置的高？我发誓没有代码弄乱它的框架。我正在使用自动布局。
2.  当我用文本填充绿色标签的框架时，我正在改变它。实际上在 GGTP 之后还有另一行，......但它仅在我向下滚动列表后才会出现，因此这些元素消失然后向后滚动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:38:17.677

我猜你正在使用自动布局。在新版本的 xcode 中，自动布局是默认的。您可以在视图的文件检查器选项卡中取消选中“使用自动布局”。

然后，您可以通过在表格视图控制器中覆盖此方法来指定单元格的高度。

```
- (CGFloat) tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 70.0; // specify table cell's height
} 
```

# php - 在mysql中查找最低日期（自定义）

> ID：13682384
> 
> 赞同：11
> 
> 时间：2012-12-03T11:33:55.783
> 
> 标签：php, mysql, sql

我不知道如何找到日期类型中的最低字符串

我只会找到最低的月份（在表格中按年份）

表名

```
Id  | M  | D  |   Y   |
=======================
1  | 01  | 22  | 2012 |
2  | 11  | 29  | 2012 |
3  | 12  | 30  | 2013 |
4  | 01  | 30  | 2011 | <--- this !
5  | 12  | 14  | 2012 | 
```

**PHP：**

```
$sql = "SELECT * FROM TableName WHERE M=?? AND Y=??";
$selected = mysql_query($sql); 
```

所以`$selected`应该给我一个类似“4/01/30/2011”的结果（Id，M，D，Y）

任何？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-03T11:37:50.500

```
SELECT min(concat(Y,M,D)) FROM TableName 
```

**编辑**：这看起来很干净，但这是一个非常糟糕的答案，所以请使用这个[答案](https://stackoverflow.com/a/36282075/1533609)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-03T11:38:46.243

只需使用`ORDER BY`子句：

```
SELECT * FROM TableName
ORDER BY Y ASC, M ASC, D ASC 
```

更多信息在这里：[http ://www.tizag.com/mysqlTutorial/mysqlorderby.php](http://www.tizag.com/mysqlTutorial/mysqlorderby.php)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-03-29T10:44:43.593

bugwheels94 的回答会给你正确的结果：

```
SELECT min(concat(Y,M,D)) 
  FROM `TableName` 
```

但这将无法使用您在日期的任何组成字段上拥有的任何索引，因此必须访问表中的每一行以确定最小值。

结合 m4t1t0 和 koopajah 的答案给你：

```
 SELECT * 
    FROM `TableName`
ORDER BY Y, M, D 
   LIMIT 1 
```

这将能够使用 Y 上的可用索引，甚至可能使用 (Y,M,D) 上的组合索引，这可以在更大的表上执行得更快。

说了这么多；回答这个不建议使用日期字段而不是三列设置的问题几乎是犯罪。我能想到分离日期列的唯一原因是为了在需要在日或月单独索引的利基查询上提高性能，但接受的答案的选择向我表明事实并非如此。

正如 Lucius 所指出的 .. 如果是日期，请将其存储为日期并运行：

```
SELECT MIN(`DateColumnName`) FROM `TableName` 
```

作为奖励，这将使您可以访问列上的所有 MySQL 临时函数，包括提取日期和月份、按您喜欢的方式格式化以及索引和排序的单个字段的能力。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-12-03T12:15:06.340

请帮自己一个忙，改用一个`date`字段..你会为自己省去很多麻烦。

```
ALTER TABLE `TableName` ADD `date` DATE NOT NULL;
UPDATE `TableName` SET `date` = CONCAT( `Y` , '-', `M` , '-', `D` ); 
```

那么你就可以做到：

```
SELECT MIN(`date`) FROM `TableName` 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-12-03T11:39:21.640

只需按年、月和日执行查询排序，并将结果限制在第一行。

```
SELECT * FROM TableName ORDER BY Y, M, D ASC limit 1; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-12-03T11:37:41.857

尝试这个：

```
SELECT MIN(ColumnName) FROM TableName; 
```

在你的情况下，那将是：

```
SELECT MIN(Y) FROM TableName; 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-03-28T10:57:09.237

我正在为您的查询提供一些想法。请遵循：

```
$sql="SELECT * FROM tbl_name ORDER BY Y, M, D ASC limit 1;
$res=mysql_query($sql);
$row=mysql_fetch_array($res);

$date=$row["id"]."/".$row["M"]."/".$row["D"]."/".$row["Y"];
echo $date; 
```

我希望它会帮助你

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-04-03T17:21:40.100

```
SELECT concat(Y,M,D) FROM TableName
ORDER BY Y ASC, M ASC, D ASC
Limit 1 
```

这样，您可以通过将“concat(Y,M,D)”替换为 * 来返回整行，并轻松适应不同的用例。例如，您可以通过以下方式返回第一年内的最后一个日期行：

```
SELECT * FROM TableName
ORDER BY Y ASC, M DESC, D DESC
Limit 1 
```

存储为 DATETIME 并使用本机 MySQL 排序会大大加快速度。如果您需要保留单独的值（无论出于何种原因，例如导入/导出其他系统超出您的范围），也许您可​​以向表中添加另一个值并同步这些值？

# php - 不从自定义数据库类返回 PDO 对象

> ID：13682385
> 
> 赞同：-1
> 
> 时间：2012-12-03T11:34:00.640
> 
> 标签：php, database, oop, model, pdo

我正在尝试创建一个数据库连接类，我的所有模型都将从中扩展。

问题是，即使我告诉它返回 PDO 连接对象，它也没有返回数据库对象：

`class Database {`

 ````
protected $conn ;
public $user ;
public $pass ;
public $database ;
public $encoding ;

function __construct($user = 'user', $pass = 'pass', $database = 'view4', $host = 'localhost', $encoding = 'UTF8')
{
    try {
        $this->user = $user ;
        $this->pass = $pass ;
        $this->database = $database ;
        $this->encoding = $encoding ;

        $options = array(
                   'PDO::ATTR_ERRMODE' => 'PDO::ERRMODE_WARNING',
                   'PDO::ATTR_PERSISTENT' => TRUE,
                   'PDO::ATTR_DEFAULT_FETCH_MODE' => 'PDO::FETCH_ASSOC',
                   'PDO::ATTR_EMULATE_PREPARES' => FALSE,
                    ) ;

        $this->conn = new PDO('mysql:host='.$host.';dbname='.$this->database,
                              $this->user,
                              $this->pass,
                              $options
                             ) ;
        $this->conn->exec('SET NAMES '.$this->encoding) ;
        return $this->conn ;
    } catch(PDOException $e) {
        $this->handleError($e) ;
    }
}

protected function handleError($e)
{
    if(strstr($e->getMessage(), 'SQLSTATE[')) { 
        preg_match('/SQLSTATE\[(\w+)\] \[(\w+)\] (.*)/', $e->getMessage(), $matches); 
        $code = ($matches[1] == 'HT000' ? $matches[2] : $matches[1]).': ';
        echo $message = $code.$matches[3] ;
        return false ;
    } 
} 
```` 

`}`

它给了我错误：

```
Fatal error: Call to undefined method Database::query() in C:\xampp\htdocs\IMS4\libs\Database.php on line 52 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:38:28.780

你不能`return`从构造函数中得到任何东西。编写时，无论从构造函数返回什么，都会`new Database`得到一个对象。`Database`

# xml - Xquery 不适用于命名空间

> ID：13682386
> 
> 赞同：1
> 
> 时间：2012-12-03T11:34:02.163
> 
> 标签：xml, namespaces, xquery

我是 xQuery 的初学者，我正在尝试在 XML 文件中列出根节点的所有子类。但是，XML 文档中的根节点在其中定义了命名空间，这意味着我的 xQuery 在引用时不起作用。

for $x in doc("/db/books.xml")/bookstore/book return $x 不返回任何带有在 bookstore 标签中定义的命名空间的东西

当我从标签中删除命名空间时，查询完美运行。

有什么办法可以在不删除 XML 文件中的命名空间的情况下解决这个问题？

编辑：我最终将对数百个名称空间差异很大的 XML 文件执行这些查询

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:39:14.637

您是否在查询中声明了您的命名空间？喜欢 ：

```
declare namespace ns = "http://example.org"; 
```

然后在查询中使用它：

```
for $x in doc("/db/books.xml")/ns:bookstore/ns:book return $x 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T16:16:25.140

如果您更懒惰（并且可以确保避免像`<a:foo />`vs之类的名称冲突`<b:foo />`），您甚至可能想要使用：

`for $x in doc("/db/books.xml")/*:bookstore/*:book return $x` 将`*` 匹配任何给定的命名空间（甚至是“无命名空间”）

# installation - 通过 IExpress 创建 .exe 包以进行静默安装

> ID：13682393
> 
> 赞同：1
> 
> 时间：2012-12-03T11:34:41.920
> 
> 标签：installation, exe, silent, iexpress

我有一个 .exe 文件，我基本上想在没有任何弹出窗口的情况下静默运行它。我的问题是如何通过 Iexpress 做到这一点？我可以在 Iexpress 中添加我的 .exe 文件，但是我应该在命令行字段中使用什么命令来让我的最终 .exe 静默运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T23:49:14.470

在 IExpress 向导期间，有一个标题为*Show window*的屏幕。如果您选择*Hidden*，那么您的可执行文件将完全静默运行。这对应`ShowInstallProgramWindow`于 SED 文件中的选项，其中：

```
0 = Default
1 = Hidden
2 = Minimized
3 = Maximized 
```

根据您的可执行文件的功能，您可能需要向它传递其他选项以使其以*非交互*方式运行（例如`/verysilent`），但这取决于它是什么类型的可执行文件。

# java - 使用Java从png读取xmp中的关键字

> ID：13682401
> 
> 赞同：0
> 
> 时间：2012-12-03T11:35:07.127
> 
> 标签：java, png, metadata, javax.imageio

我正在尝试使用 Java 在 Photoshop 中将关键字添加到 PNG 图像文件中。

我使用 Java 中的 imageio 尝试了这种方法：

[http://johnbokma.com/java/obtaining-image-metadata.html](http://johnbokma.com/java/obtaining-image-metadata.html)

但是，我得到的只是以下内容：

```
Format name: javax_imageio_png_1.0
<javax_imageio_png_1.0>
    <IHDR width="128" height="128" bitDepth="8" colorType="RGBAlpha" compressionMethod="deflate" filterMethod="adaptive" interlaceMethod="none"/>
    <cHRM whitePointX="31269" whitePointY="32899" redX="63999" redY="33001" greenX="30000" greenY="60000" blueX="15000" blueY="5999"/>
    <iCCP profileName="Photoshop ICC profile" compressionMethod="deflate"/>
    <pHYs pixelsPerUnitXAxis="2835" pixelsPerUnitYAxis="2835" unitSpecifier="meter"/>
</javax_imageio_png_1.0>
Format name: javax_imageio_1.0
<javax_imageio_1.0>
    <Chroma>
        <ColorSpaceType name="RGB"/>
        <NumChannels value="4"/>
        <BlackIsZero value="TRUE"/>
    </Chroma>
    <Compression>
        <CompressionTypeName value="deflate"/>
        <Lossless value="TRUE"/>
        <NumProgressiveScans value="1"/>
    </Compression>
    <Data>
        <PlanarConfiguration value="PixelInterleaved"/>
        <SampleFormat value="UnsignedIntegral"/>
        <BitsPerSample value="8 8 8 8"/>
    </Data>
    <Dimension>
        <PixelAspectRatio value="1.0"/>
        <ImageOrientation value="Normal"/>
        <HorizontalPixelSize value="0.35273367"/>
        <VerticalPixelSize value="0.35273367"/>
    </Dimension>
    <Transparency>
        <Alpha value="nonpremultipled"/>
    </Transparency>
</javax_imageio_1.0> 
```

没有关于添加的关键字...

我做的不对吗？这个库没有获取 XMP 元数据吗？

编辑：

虽然我更想知道标准库是否可以读取元数据，但我还是尝试了 pngj 库。但这给了我以下错误：

```
Exception in thread "main" ar.com.hjg.pngj.PngjExceptionInternal: this should not happen
    at ar.com.hjg.pngj.PngIDatChunkInputStream.read(PngIDatChunkInputStream.java:117)
    at ar.com.hjg.pngj.PngReader.readSkippingAllRows(PngReader.java:777)
    at se.expertinfo.ditaplugin.ImageMetadata.showChunks(ImageMetadata.java:105)
    at se.expertinfo.ditaplugin.DitaPlugin.printImageMetadata(DitaPlugin.java:33)
    at se.expertinfo.ditaplugin.DitaPlugin.main(DitaPlugin.java:24)
Java Result: 1 
```

如果我注释掉 pngr.readSkippingAllRows(); （据我所知，这可能会使该方法无用？）我得到以下结果：

```
filename=architecture3.png ImageInfo [cols=128, rows=128, bitDepth=8, channels=4, bitspPixel=32, bytesPixel=4, bytesPerRow=512, samplesPerRow=512, samplesPerRowP=512, alpha=true, greyscale=false, indexed=false, packed=false]
ChunkList: read: 5
 Read:
chunk id= IHDR (len=13 offset=8) c=PngChunkIHDR G=0
chunk id= pHYs (len=9 offset=33) c=PngChunkPHYS G=1
chunk id= iCCP (len=2639 offset=54) c=PngChunkICCP G=1
chunk id= cHRM (len=32 offset=2705) c=PngChunkCHRM G=1
chunk id= IDAT (len=25329 offset=2749) c=PngChunkIDAT G=4

BUILD SUCCESSFUL (total time: 0 seconds) 
```

即没有关于那里的关键字......

顺便说一句：这是 Photoshop 中设置的元数据。相同的元数据出现在 IPTC 选项卡下...

![Photoshop 中的元数据](../Images/e4ba53abdf2dbdeb065840808fdb83fb.png)

编辑 2：响应 leonbloy：

添加了标题和作者，但仍然没有输出（虽然获取 IEND）：

文件名=architecture3.png ImageInfo [cols=128, rows=128, bitDepth=8, channels=4, bitspPixel=32, bytesPixel=4, bytesPerRow=512, samplesPerRow=512, samplesPerRowP=512, alpha=true, grayscale=false , indexed=false, packed=false] ChunkList: read: 6 Read: chunk id= IHDR (len=13 offset=8) c=PngChunkIHDR G=0 chunk id= pHYs (len=9 offset=33) c=PngChunkPHYS G =1 块 id= iCCP (len=2639 偏移量=54) c=PngChunkICCP G=1 块 id= cHRM (len=32 偏移量=2705) c=PngChunkCHRM G=1 块 id= IDAT (len=25329 偏移量=2749) c=PngChunkIDAT G=4 块 id= IEND (len=0 offset=28090) c=PngChunkIEND G=6

我可以在 Adob​​e Bridge 中看到添加的元数据...

编辑 3：

好吧，我对此没有任何解释，但突然之间 javax.imageio 库工作正常！我按预期获得了所有元数据，我什至不知道对其进行任何更改。

我只是缺少一件事——我希望能够以键/值对的形式获取元数据，比如 Product=Apple，但我似乎找不到任何这样的添加元数据的方式。这是否以某种方式可用，我将如何获得它？

# linux - 一行中的数组中的 Bash-sum 值

> ID：13682408
> 
> 赞同：1
> 
> 时间：2012-12-03T11:35:40.330
> 
> 标签：linux, bash, sum

我有这个数组：

```
array=(1 2 3 4 4 3 4 3) 
```

我可以通过以下方式获得最大的数字：

```
echo "num: $(printf "%d\n" ${array[@]} | sort -nr | head -n 1)"
#outputs 4 
```

但我想把所有 4 的加起来，这意味着我希望它输出 12（有 3 次出现 4）。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T11:59:18.660

```
dc <<<"$(printf '%d\n' "${array[@]}" | sort -n | uniq -c  | tail -n 1) * p" 
```

1.  `sort`最后获得最大值
2.  `uniq -c`仅获取唯一值，并计算它们出现的次数
3.  `tail`仅获取最后一行（具有最大值及其计数）
4.  `dc`将值乘以计数

我选择`dc`乘法步骤是因为它是 RPN，因此您不必拆分`uniq -c`输出并在其中插入任何内容 - 只需将内容添加到末尾即可。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T12:00:07.517

使用 awk：

```
$ printf "%d\n" "${array[@]}" | sort -nr | awk 'NR>1 && p!=$0{print x;exit;}{x+=$0;p=$0;}'
12 
```

使用 sort，数字以反向（-r）顺序排序（-n），并且 awk 不断对数字求和，直到找到一个与前一个不同的数字。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T11:55:55.763

你可以这样做`awk`：

```
awk -v RS=" " '{sum[$0]+=$0; if($0>max) max=$0} END{print sum[max]}' <<<"${array[@]}" 
```

将`RS`（记录分隔符）设置为空格允许您将数组条目作为单独的记录读取。

`sum[$0]+=$0;`均值`sum`是每个输入值的累积和的映射；`if($0>max) max=$0`计算到目前为止看到的最大数量；`END{print sum[max]}`打印最后看到的大数的总和。

`<<<"${array[@]}"`是一个 here-document，允许您将字符串（在本例中为数组的所有元素）作为标准输入提供给`awk`.

这种方式不涉及管道或循环 - 一个命令完成所有工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-11-26T08:46:01.847

仅使用 bash：

```
echo $((${array// /+})) 
```

[用加号替换](http://www.tldp.org/LDP/abs/html/parameter-substitution.html#PSGLOB "全局替换")所有空格，并使用[双括号](http://tldp.org/LDP/abs/html/dblparens.html "双括号")表达式进行评估。

# windows-phone-7 - 混淆 Windows Phone 8 dll

> ID：13682410
> 
> 赞同：2
> 
> 时间：2012-12-03T11:35:49.503
> 
> 标签：windows-phone-7

我需要混淆 Windows Phone 8 dll。

我尝试了 Visual Studio 2012 中可用的“PreEmptive Dotfuscator”。我添加了 .dll 但它失败了。

有没有其他免费的混淆工具？

谢谢 SRS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T05:41:15.713

你可以试试 DeepSea Obfuscator（4.3 以上的版本），它对我来说很好用。访问[http://www.deepseaobfuscator.com/home.aspx](http://www.deepseaobfuscator.com/home.aspx)

# audio - AAC ADTS 原始数据奇怪的标头

> ID：13682412
> 
> 赞同：8
> 
> 时间：2012-12-03T11:36:04.540
> 
> 标签：audio, codec, multimedia, aac

我从某个地方获得了一些 ADTS AAC 原始数据（实际上它是从解复用文件中提取的），理论上应该对其进行更正编码。它看起来像这样：

框架1：

**21 19** 94 ED A1 09 45 58 09 40 02 CA AA 85 D4 E5 C5 58 A9 73 00 0C 75 1C 5D A7 4E 52 40 90 38 71 9C 65 D5 C4 22 0B 28 7D EF F8 426 33 15 03 B1 74 B4 A1 4E 0A 21 05 15 34 6B FD D9 E7 8F BF FF 79 5C D3 7D 90 79 F6 65 57 08 3A F7 C5 14 85 5E D7 C3 7D 2A 85 E1 7A 86 BA 3A AC 13 0D AE D1 1B6 B6 71 92 E5 8A BC CB 5C 7A 6F D7 F2 2B 38 C9 0E 2A 40 2F 8E 90 9B 1F A2 3A 9C 39 A8 35 CE 69 14 CD 64 54 70 00 50 07 CE 37 83 6E F0 49 B2 01 18 AA A8 8B 8F A1 37 17 1C 06 00 00 00 06 00 72

框架2：

**21 19** 95 14 C2 0A A9 61 19 8B CB 9B 56 AE A7 0A A0 34 DA EA D9 34 28 0C F8 DC 0C 30 97 12 A7 DD 3F F5 FE 7B 65 52 61 6D 7F DA BE D3 EB 30 CA A6 94 5 8E D4 0A 32 E1 EA FD AD 02 82 B5 1E 40 4C 04 3A BE 56 21 5D 7D 5D B3 31 2A 5D AF 4E FF A6 48 B9 42 E3 87 DE 5C 59 4B B9 BB C3 2C AD 50 6B 35 C8 24 6 06 82 86 B2 26 17 E2 C6 DD 9A 43 53 91 D3 68 8D 67 8E 7D 0A 28 EB 7D F1 BB FC 56 5E 13 25 F9 77 E6 27 BF DA 4E 09 38 86 20 0A 00 F9 C6 F0 1D DE 05 4F 28 C0 A0 5F 0E 18 00 03 00 0E

......

对于随后的每一帧，都有一个非常奇怪的类似标题：

21 19 XX

举些例子：

21 19 94 E1 ..

21 19 95 03 ..

……

那么你知道这个标题是什么意思吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-04T09:39:28.253

这是 ADTS AAC 的样子，例如立体声：

`adts_header()`
`channel_pair_element()`
`adts_header()`
`channel_pair_element()`
`adts_header()`
`channel_pair_element()`
`adts_header()`
`channel_pair_element()`
ETC...

这似乎根本不是 ADTS 标头。ADTS 标头通常不在某些其他容器中使用，例如 mp4，但仅用于独立 AAC 文件。ADTS 标头以 12 位同步字开头`1111 1111 1111`。所以所有的，在你的例子中不是这样。

如果 muxer 去掉了任何头文件，你可能有**原始的 AAC**，它应该从`single_channel_element()`单声道或`channel_pair_element()`立体声的情况开始。

`single_channel_element()`以 3 位开头`000`

`cannel_pair_element()`以 3 位开头`001`

您的示例以 开头，`0010 0001 0001 1001`因此可能是`channel_pair_element()`.

您可能有立体声但没有任何标题，如下所示：

`channel_pair_element()`
`channel_pair_element()`
`channel_pair_element()`
`channel_pair_element()`
等等

您应该让复用器告诉您通道数、采样率等，然后您就可以继续解码了。Muxer 应该从 mp4 或您的 AAC 最初所在的任何容器中获取此信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-21T16:47:02.627

它很可能是 mpeg4 latm 格式。如果您运行 mediainfo 工具检查，它将输出如下：

```
$mediainfo a.aac 
General
Complete name                            : a.aac
Format                                   : LATM
File size                                : 821 KiB
Overall bit rate mode                    : Variable

Audio
Format                                   : AAC
Format/Info                              : Advanced Audio Codec
Format profile                           : HE-AACv2 / HE-AAC / LC
Bit rate mode                            : Variable
Channel(s)                               : 2 channels / 1 channel / 1 channel
Channel positions                        : Front: L R / Front: C / Front: C
Sampling rate                            : 48.0 KHz / 48.0 KHz / 24.0 KHz
Compression mode                         : Lossy 
```

这种格式通常在 ADTS 标头删除后或从 DTV 频道中生成。DTV 数据传输使用 LATM 格式以节省带宽，因此那里没有 ADTS 标头，但使用一些编解码器配置缓冲区来初始化解码器。

# jquery - jQuery Masonry 使用“加载更多”ajax 调用附加项目

> ID：13682419
> 
> 赞同：1
> 
> 时间：2012-12-03T11:36:30.123
> 
> 标签：jquery, ajax, xml-parsing, jquery-masonry

我的目标=通过ajax检索项目列表，在页面加载时显示n张幻灯片，然后在每次单击“加载项目”时附加n个项目，直到显示所有项目，此时显示“不再剩下”等内容。

我有 ajax 调用和附加项目独立工作，但需要帮助才能使它们一起工作。

这是我的 ajax 调用，我将它放在一个名为 populateBlocks 的函数中：

```
function populateBlocks(position,page_size) {

$.ajax({
    type: "GET",
    url: "/portfolio.xml",
    dataType: "xml",
    success: function(xml) {
      var title, url, block_count;
      block_count = $(xml).find('block').length;
      $(xml).find('block').slice(position,position+page_size).each(function(){
         title = $(this).find('title').text();
         url = $(this).find('url').text();
         $('div.section').append('<div class="item"><a href="' + url + '"><img src="' + url + '" alt="" /><span class="title"><span class="text">' + title + '</span></span></a></div>');
      });
      $('.section').masonry('reload');
    }
    });      
} 
```

以下是文档就绪时加载的内容，包括“加载项目”单击的处理程序：

```
$(document).ready(function() {

var position;
var page_size;

populateBlocks(0,9);

  $('#append2').click(function(position){
    $boxes = populateBlocks(9,9);
    $('#container').append( $boxes ).masonry( 'appended', $boxes );
  });
}); 
```

我知道代码可能有各种各样的错误。我正在尝试使用函数参数，并在单击后增加 position 和 page_size 变量，但没有任何乐趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:42:51.723

尝试替换这一行：

```
$('#container').append( $boxes ).masonry( 'appended', $boxes ); 
```

有了这个：

```
jQuery("#content").append($boxes).masonry( 'reload' ); 
```

# mysql - 获取查询时差

> ID：13682422
> 
> 赞同：2
> 
> 时间：2012-12-03T11:36:41.140
> 
> 标签：mysql

我有这个查询，我需要找出两种时间格式之间的区别。所以我需要添加一个子句，即：

```
WHERE end-date - start-date should be between 01:00:00 and 05:00:00 
```

你能帮我把它变成一个mysql语句吗？谢谢

```
 $data = mysql_query( "select r.`time`, r.`epos_id`,r.`basket_value`, r.`date`,re.`location`,i.`user_id`,i.`mobile_number`,
       i.`time`, i.`rbpos_id`, i.`date`
from retailer r
join rbpos_epos re on r.epos_id = re.epos_id
join imovo i on i.rbpos_id = re.rbpos_id
             WHERE  TIMEDIFF(i.`time`, r.`time`)<'01:05:00'
             and r.`time` < i.`time`
             and r.`date` = i.`date`;
") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:38:59.630

您可以使用[TIMEDIFF](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_timediff) mysql 功能

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T11:40:03.710

试试这个

```
SELECT TIME_TO_SEC(TIMEDIFF('05:00:00', '01:00:00')) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:40:19.863

试试这个

```
 SELECT end-date , start-date FROM `table` 
    where
  end-date - start-date between '01:00:00' and '05:00:00' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T11:41:11.190

`TIMEDIFF()`回报`expr1 – expr2`以时间值表示。expr1 和 expr2 是时间或日期和时间表达式，但两者必须属于同一类型。

返回的结果`TIMEDIFF()`被限制在 TIME 值允许的范围内。或者，您可以使用任何一个函数`TIMESTAMPDIFF()`和`UNIX_TIMESTAMP()`，它们都返回整数。

# java - Hibernate flush_before_completion 像 post flush 还是 pre flush 一样工作？

> ID：13682426
> 
> 赞同：2
> 
> 时间：2012-12-03T11:37:00.110
> 
> 标签：java, hibernate

我有一个实现`postFlush()`. 据我了解，后刷新是数据已保存到数据库中，但在调用提交之前会回滚。如果我有一个看起来像这样的休眠配置：

`<property name="hibernate.transaction.flush_before_completion">true</property>`

这是否意味着在提交之前将数据保存到数据库中？哪个与冲洗后相同？`postFlush()`这会在预刷新阶段导致休眠拦截器调用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T16:46:32.287

属性 hibernate.transaction.flush_before_completion 用于“容器管理事务 (CMT)”或 JTA，如果您使用的是 JDBC 事务，则它不相关。

如果设置为 true，将在事务完成之前的阶段执行刷新，将所有数据发送到数据库（仍然可以回滚）。此刷新不由休眠会话管理。

如果设置为 false，则在提交之前执行自动会话管理的休眠刷新，因此将调用 postFlush。

Hibernate Interceptor的`postFlush()`方法只会在 hibernate 托管的 Flush 执行之后，事务提交之前被调用。

# primefaces - javax.faces.FacesException： 包含未知 id - 无法在组件的上下文中找到它

> ID：13682428
> 
> 赞同：0
> 
> 时间：2012-12-03T11:37:08.440
> 
> 标签：primefaces, liferay-6

我正在liferay 中开发primefaces portlet。我收到以下错误：

```
<f:ajax> contains an unknown id 'firstNameField' - cannot locate it in the context of the component firstName 
```

代码片段是：

```
 <aui:field id="firstNameField" label="#{i18n['first-name']}">
    <p:inputText id="firstName" label="#{i18n['first-name']}" required="true"
    value="#{applicantModelBean.firstName}">
    <f:ajax render="firstNameField"/>

    <p:message id="firstNameMessage" for="firstName"/>
    </p:inputText>
    </aui:field>

**Stack trace is**

javax.faces.FacesException: <f:ajax> contains an unknown id 'firstNameField' - cannot locate it in the context of the component firstName
at com.sun.faces.renderkit.html_basic.AjaxBehaviorRenderer.getResolvedId(AjaxBehaviorRenderer.java:285)
at com.sun.faces.renderkit.html_basic.AjaxBehaviorRenderer.appendIds(AjaxBehaviorRenderer.java:272)
at com.sun.faces.renderkit.html_basic.AjaxBehaviorRenderer.buildAjaxCommand(AjaxBehaviorRenderer.java:214)
at com.sun.faces.renderkit.html_basic.AjaxBehaviorRenderer.getScript(AjaxBehaviorRenderer.java:86)
at javax.faces.component.behavior.ClientBehaviorBase.getScript(ClientBehaviorBase.java:103)
at com.sun.faces.renderkit.RenderKitUtils.getSingleBehaviorHandler(RenderKitUtils.java:1607)
at com.sun.faces.renderkit.RenderKitUtils.renderHandler(RenderKitUtils.java:1700)
at com.sun.faces.renderkit.RenderKitUtils.renderOnchange(RenderKitUtils.java:388)
at com.sun.faces.renderkit.html_basic.TextRenderer.getEndTextToRender(TextRenderer.java:134)
at com.sun.faces.renderkit.html_basic.HtmlBasicRenderer.encodeEnd(HtmlBasicRenderer.java:170)
at javax.faces.component.UIComponentBase.encodeEnd(UIComponentBase.java:875)
at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1763)
at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:43:10.383

不知道是什么`<aui:field`图书馆

但是，似乎该组件没有将其传递`id`给生成的*HTML*，或者它可能会添加一些前缀......

做：查看您生成的 HTML 的源代码... 的 id 是`<aui:field`什么？尝试在你的`f:ajax`

# javascript - Nicemenu（Drupal）中二级ul的可变宽度

> ID：13682429
> 
> 赞同：0
> 
> 时间：2012-12-03T11:37:09.330
> 
> 标签：javascript, jquery, drupal

我在 Drupal 7 中有一个如下所示的菜单结构。这是 Drupal 中 Nicemenu 模块的一部分。我将宽度应用于第二级 ul - 子菜单 ul，这将应用于所有第二级 ul。我需要的是二级ul的可变宽度。所有这些由 Drupal 动态生成的 HTML sre，我可能无法将任何类或 ID 硬编码到这些二级 uls。我使用伪类来定位这些，但没有达到我想要的。

这是HTML

```
<ul class="menu">
    <li class="first leaf"><a class="active" href="">Menu 1</a></li>
    <li class="expanded"><a title="" href="">Menu 2</a>
        <ul class="menu"> <!--This should have width of 200px-->
        <li class="first leaf"><a href="">Menu 2a</a></li>
        <li class="last leaf"><a href="">Menu 2b</a></li>
        </ul>
    </li>
    <li class="expanded"><a title="" href="">Menu 3</a>
<ul class="menu"><!-- Width should be 350px-->
            <li class="first leaf"><a href="">Menu 3a</a></li>
            <li class="leaf"><a href="">Menu 3b</a></li>
            <li class="leaf"><a href="">Menu 3c</a></li>
            <li class="leaf"><a href="">Menu 3d</a></li>
            <li class="leaf"><a href="">Menu 3e</a></li>
            <li class="leaf"><a href="">Menu 3f</a></li>
            <li class="leaf"><a href="">Menu 3g</a></li>
            <li class="last leaf"><a href="">Menu 3h</a></li>
    </ul>
    </li>
    <li class="expanded"><a title="" href="">Menu 4</a>
            <ul class="menu"><!-- Width should be 200px-->
            <li class="first expanded"><a title="" href="">Menu 4a</a><ul class="menu">
            <li class="first last leaf"><a href="">Menu 4a-1</a></li>
            </ul>
    </li>
    <li class="last leaf"><a href="">Menu 4b</a></li>
    </ul>
    </li>
    <li class="leaf"><a href="">Menu 5</a></li>
    <li class="expanded"><a title="" href="">Menu 5a</a>
    <ul class="menu"><!-- Width should be 150px-->
<li class="first last leaf"><a href="">Menu 5b</a>
    </li>
    </ul>
    </li>
    <li class="leaf"><a href="">Menu 6</a></li>
    <li class="leaf"><a href="">Menu 7</a></li>
    <li class="expanded"><a title="" href="">Menu 8</a>
            <ul class="menu"><!-- Width should be 200px-->
            <li class="first leaf"><a href="">Menu 8</a></li>
            <li class="last leaf"><a href="">Menu 9</a></li>
            </ul></li>
    <li class="last leaf"><a href="">Contact Us</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:48:18.083

您确实需要元素`id`中的属性`<ul>`，因此您可以使用 CSS 设置每个`id`. 这是对单独的 HTML 元素进行样式设置的最方便、最可靠的方法。

[将 html ID 添加到内容字段](https://drupal.stackexchange.com/questions/16879/add-html-id-to-content-field)显示了如何添加这些`id`属性的解决方案。

# c# - 如何使 ScrollViewer 内的 WPF TextBox 边框不消失

> ID：13682431
> 
> 赞同：0
> 
> 时间：2012-12-03T11:37:18.410
> 
> 标签：c#, .net, wpf, textbox, scrollviewer

在 WPF 窗口中，我在 ScrollViewer 中有一个 TextBox：

```
<ScrollViewer ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto" ScrollViewer.CanContentScroll="True" MaxHeight="160" Grid.Column="1" Grid.Row="0">
    <TextBox MinHeight="80" Name="generalLog"/>
</ScrollViewer> 
```

使用空文本，它看起来像[这样](http://i.imgur.com/Kf5NM.png)。

当文本变长或包含太多行时，滚动条就会出现，它们应该如此。但是由于 TextBox 被包裹在 ScrollViewer 中，因此 TextBox 变得更大，并且它的边框（默认样式）隐藏在两侧：

[链接到屏幕截图，因为我无法嵌入图片](http://i.imgur.com/wgpi4.png)

如您所见，边框在左侧不可见。有什么方法可以让 ScrollViewer 出现在 TextBox 中？或者让 ScrollViewer 有一个类似于 TextBox 的边框并隐藏 TextBox 一个，这可能看起来像我想要的那样。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:50:53.567

用边框包裹 Scrollviewer 并设置 Textbox borderbrush="transparent" ？

```
<Border>
  <ScrollViewer ScrollViewer.HorizontalScrollBarVisibility="Auto" ScrollViewer.VerticalScrollBarVisibility="Auto" ScrollViewer.CanContentScroll="True" MaxHeight="160" Grid.Column="1" Grid.Row="0">
   <TextBox BorderBrush="transparent" MinHeight="80" Name="generalLog"/>
  </ScrollViewer>
</Border>
```

# apache-flex - 从子 mxml 访问 TabNavigator :-Adobe AIR

> ID：13682433
> 
> 赞同：0
> 
> 时间：2012-12-03T11:37:20.517
> 
> 标签：apache-flex, actionscript, air

这是我的 AIR 应用程序的 UI 结构：

**选项卡导航器（主 UI）**

**-->child1.mxml** （切换按钮栏）

```
 |--element1.mxml
  |--element2.mxml
  |--element3.mxml 
```

**-->child2.mxml** （切换按钮栏）

```
 |--element1.mxml
  |--element2.mxml
  |--element3.mxml 
```

**-->child3.mxml** （切换按钮栏）

```
 |--element1.mxml
  |--element2.mxml
  |--element3.mxml 
```

我想访问父元素并从子元素和子元素的子元素更改该索引..你能帮帮我吗？或建议我。 **示例：** 我想从 child3.mxml 中的 elemet2.mxml 更改选项卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T15:24:28.870

出于封装目的，您永远不应访问父级。正确的方法是从孩子分派一个事件并在父母那里收听。在您的事件侦听器方法中，您可以执行所需的父功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T14:13:21.390

你不能直接访问。你可以通过一些框架或事件监听器访问。

# javascript - 防止孩子触发父母的点击事件

> ID：13682435
> 
> 赞同：33
> 
> 时间：2012-12-03T11:37:22.357
> 
> 标签：javascript, jquery, css

考虑以下代码段：

```
<div class="div-outer">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit.
    <div class="div-inner" style="background:red">
        Curabitur hendrerit vehicula erat, ut gravida orci luctus vitae.
    </div>
</div> 
```

现在假设外部 div 有一个`click`与之关联的 live。当我在内部的任何地方时，如何确保`click`不会触发直播？`click``div`

编辑：

这是所要求的JS

```
$(".div-outer").live("click",function(){alert("hi")}); 
```

单击“.inner-div”时不应触发此操作

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-03T11:40:37.040

您必须向内部子级添加事件侦听器并取消事件的传播。

在普通的 JS 中类似于

```
document.getElementById('inner').addEventListener('click',function (event){
   event.stopPropagation();
}); 
```

足够了。请注意，[jQuery 提供了相同的功能](http://api.jquery.com/event.stopPropagation/)：

```
$(".inner-div").click(function(event){
    event.stopPropagation();
}); 
```

或者

```
$(".inner-inner").on('click',function(event){
    event.stopPropagation();
}); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-11-04T23:05:09.123

另一种解决方案是向子元素添加**[CSS 指针事件规则：](https://developer.mozilla.org/en-US/docs/Web/CSS/pointer-events)**

**CSS：**

```
#childElement {
    pointer-events: none;
} 
```

**JavaScript：**

`document.getElementById("childElement").style.pointerEvents = "none";`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T11:41:14.500

您可以通过在内部 div 上添加点击事件并使用`return false;`或`event.stopPropagation();`

```
$(".div-inner").click(function(){

  return false;
}) 
```

或者

```
$(".div-inner").click(function(event){

  event.stopPropagation();
}) 
```

[[[[![jsFiddle](../Images/827f57786617d886d70c0bce0ccca6b6.png)](http://jsfiddle.net/Fz9Za/)]]]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T11:42:04.890

`click`为内部 div创建新的侦听器并`event.stopPropagation()`在该新事件中调用。

像

```
$('div-outer').on('click','div-inner',function(e){
    e.stopPropagation();
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-21T11:29:45.193

在你的 js 文件中使用 stopPropagation

```
 $(".eventclick").click(function(e) {
    e.stopPropagation();
}); 
```

# python - python相当于perl按哈希值排序

> ID：13682436
> 
> 赞同：1
> 
> 时间：2012-12-03T11:37:23.013
> 
> 标签：python, sorting

我希望在 python 中复制以下 perl 代码。目标是获取一个由多个哈希/字典值排序的哈希/字典键数组。示例 perl 代码：

```
my $hash = {
 'item1'=> {'id'=>'a', 'pos'=>6},
 'item2'=> {'id'=>'a', 'pos'=>7},
 'item3'=> {'id'=>'b', 'pos'=>4},
 'item4'=> {'id'=>'a', 'pos'=>5},
 'item5'=> {'id'=>'b', 'pos'=>2},
};

my @keys = sort {
  $hash->{$a}->{id} cmp $hash->{$b}->{id} ||
  $hash->{$a}->{pos} <=> $hash->{$b}->{pos}
} keys %$hash;

print "@keys\n"; 
```

这按`id`词汇排序，然后按`pos`数字排序，所以预期的结果是：

```
item4 item1 item2 item5 item3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:45:49.190

Using `sorted`:

```
[k for k, v in sorted(hash.items(), key=lambda item: (item[1].id, item[1].pos))] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:11:17.990

```
from operator import attrgetter
sorted(hash, key=lambda k:attrgetter('id', 'pos')(hash[k])) 
```

# client-server - 读写客户端服务器编程出错

> ID：13682442
> 
> 赞同：0
> 
> 时间：2012-12-03T11:37:35.380
> 
> 标签：client-server

我正在linux中开发ac程序。我需要使用客户端服务器编程。我使用了读写，它工作得很好。但是在服务器和客户端都使用了20多次读写之后，它就停止了工作。那就是我没有收到任何输出。线。我不明白问题出在哪里，因为我使用的是相同的行。

```
bzero(&hl,200);
read(a,hl,50*sizeof(char));
printf("%s",hl); 
```

在客户端，

```
bzero(&hl,200);
strcpy(hl,"hello");
write(a,hl,50*sizeof(char));
printf("%s",hl); 
```

此外，我无法获取返回值并打印它。当我在 debian 中使用它时，我得到了返回值并能够打印。现在，我在 Ubuntu（在家）。它现在不打印返回值。也没有错误！跟操作系统有关系吗？

请帮我找出问题所在。

更新：

在服务器中，

int c: s=read(a,&c,sizeof(int)); printf("选择：%d",c);

在客户端，

scanf("%d",&ch); s=write(sd,&ch,sizeof(int));

两者的大小都是 4。但是，在客户端中，我在打印选择时得到了垃圾值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:43:46.050

你扔掉 的返回值`read`，所以你不知道你读了多少字节。如果低于 50 怎么办？

改变：

```
read(a,hl,50*sizeof(char)); 
```

到：

```
int readBytes = 0;
do
{
    int r = read(a, hl + readBytes, 50 - readBytes);
    if (r <= 0)
        return; // or however you want to handle an error
    readBytes += r;
} while (readBytes < 50); 
```

这将确保您实际读取 50 个字节。

您正在想象 TCP 以某种方式将这 50 个字节“粘合”在一起。但是系统不知道这 50 个字节是一条消息——只有你的代码知道。因此，将它们重新粘合在一起是您的代码的工作。TCP 不保留应用程序消息边界——这是应用程序的工作。

# android - Google Play 上是否有特定设备的“包含”列表？

> ID：13682447
> 
> 赞同：1
> 
> 时间：2012-12-03T11:37:41.780
> 
> 标签：android, google-play

我们即将在 Google Play 上发布应用程序。根据我们第一次的合同义务，我们只能将其出售给基于特定处理器的新设备。因此，我们需要排除除几个设备之外的所有设备。

当然，我们在应用程序中检查了芯片，但它相当大（大约 200 MB），所以用户不会因为知道他们不能玩而高兴地下载它。

那么，在下载之前进行检查的最佳方法是什么？Google Play 上是否有任何类型的“包含”列表？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:46:48.333

您可以在开发人员仪表板中指定设备。上传应用程序后，google play 将根据您的应用程序清单过滤设备。您还可以从支持的设备列表中排除设备。检查屏幕截图。单击`Show devices`将带您进入设备可用性屏幕。

* * *

![在此处输入图像描述](../Images/44d7cce7efd67aee26511708bccff1f9.png)

![在此处输入图像描述](../Images/c752608559a2d832563f82eaa2b5be23.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:45:47.247

Your app can define required features with the

```
<uses-feature android:name="..." android:required="true" /> 
```

But this is not possible for cpu. You have the possibility to exclude certain devices in the app store, I think this is your best shot, even though I guess this means you will have to exclude most devices.

# e-commerce - 如何在“添加到购物车”页面之前添加自定义表单

> ID：13682448
> 
> 赞同：0
> 
> 时间：2012-12-03T11:37:47.613
> 
> 标签：e-commerce, magento-1.7, magento

我正在使用 magento 1.7 。我需要从用户那里获取输入，因此如何添加自定义表单以获取用户的输入。让我解释一下：-单击任何产品时，它会显示产品信息。现在应该有一个按钮。单击该按钮时，它应该显示自定义表单。提交该表单后，它应该重定向到包含所有详细信息的“添加到购物车”页面该产品和用户填写的自定义表单字段的值。

是否有任何扩展或任何其他方式来做到这一点？如果你想要任何进一步的解释，请在这里评论。请尽快帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:09:17.110

在 zennioptical.com 上，“订购”按钮位于产品列表模板上

> magento 模板：/app/design/frontend/base/default/template/catalog/product/list.phtml

处方表实际上显示在产品详细信息页面上

> magento 模板：/app/design/frontend/base/default/template/catalog/product/view.phtml

要在 magento 中完成此操作，请为（'Prescription Type' 等）添加自定义选项，然后您需要做一些自定义 css 和 javascript 来完成该布局

# sql - 来自多个表的 SQL IN 查询

> ID：13682450
> 
> 赞同：0
> 
> 时间：2012-12-03T11:37:53.933
> 
> 标签：sql

```
SELECT DISTINCT addresses.email FROM addresses 
WHERE addresses.user_id IN (SELECT  user_group.id_user_groups FROM user_group
WHERE id_group_groups IN (SELECT news_group.groupid_newsg FROM news_group 
WHERE newsid_news_good=1)) 
```

上面提到的 SQL 查询没有执行！它被挂起，直到我停止查询。我在第一个 SELECT 语句之后尝试了 SQL 运算符“UNION”，但它显示了所有不属于某个组的电子邮件地址。我只想选择属于“id_group_groups =5”（请参阅​​下面的查询）并订阅“newsid_news_good=1”的用户的电子邮件地址。

以下查询运行良好：

```
SELECT DISTINCT addresses.email FROM addresses 
WHERE addresses.user_id IN (SELECT user_group.id_user_groups FROM user_group 
WHERE id_group_groups =5 ) 
```

有人知道第一个查询有什么问题吗？帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:44:06.740

我认为子选择使您的问题复杂化。如果我理解正确，使用联接而不是子选择来解决您的问题会更容易。

尝试这样的事情：

```
SELECT DISTINCT addresses.email
FROM addresses
JOIN user_group
    ON user_group.id_user_groups = adresses.USER_ID
JOIN news_group
    ON news_group.groupid_newsg = user_group.id_group_groups
WHERE newsid_news_good = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:48:44.730

您想使用联接。您使用的子查询很可能是导致性能问题的原因。

```
SELECT DISTINCT a.email 
FROM addresses a
INNER JOIN user_group u ON u.id_user_groups AND u.id_group_groups = 5
INNER JOIN news_group n ON n.groupid_newsg = u.id_group_groups AND n.newsid_news_good = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T14:22:25.727

我猜你正在使用 MySQL，因为它在联合中执行子查询的工作非常糟糕。解决此问题的规范方法是将它们更改为`exists`具有相关子查询：

```
SELECT DISTINCT a.email
FROM addresses a
where exists (select 1
              from user_group ug 
              where ug.id_user_groups = a.user_id and
                    exists (select 1
                            from news_group ng
                            where ng.newsid_news_good = 1 and
                                  ng.groupid_news = ug.id_group_groups
                           )
             ) 
```

当然，该解决方案适用于所有数据库；它在 MySQL 中效率更高。假设电子邮件在地址表中没有重复，那么您可以删除外部不同的。

的替代方案`join`也是可行的。但是，它们需要不同的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T11:43:54.023

```
SELECT DISTINCT addresses.email FROM addresses 
INNER JOIN (
    SELECT  user_group.id_user_groups FROM user_group
    INNER JOIN news_group
    ON news_group.groupid_newsg = id_group_groups
    WHERE newsid_news_good=1
)
ON user_group.id_user_groups = addresses.user_id 
```

# javascript - 无法关闭 html5 应用程序（包装在 Phonegap 上）

> ID：13682454
> 
> 赞同：2
> 
> 时间：2012-12-03T11:38:03.123
> 
> 标签：javascript, android, html, cordova, jquery-mobile

我有一个在 html5 中构建并包装在 phoneGap 中的应用程序，通过按下退出按钮会发生以下功能：

```
function close_window() {
    if (confirm("Exit?")) {
        navigator.app.exitApp();
    }
} 
```

这没用..

单击按钮时，会出现函数 close_window()，“但 navigator.app.exitApp();” 线不起作用。

我认为这是因为导航器没有名为应用程序的子项..（我在控制台中对其进行了测试）

还有其他方法可以关闭应用程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T23:29:18.630

请注意，exitApp 功能仅适用于安卓设备。你用的是哪个版本的phonegap？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-01T22:24:09.197

你可以使用 BackButton.exitApp();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T12:59:26.027

终于问题解决了。。

退出应用程序由功能编写问题工作。

我不知道我改变了什么使它有效，**但它有效！**

谢谢您的帮助 ..

:]

# c - 在 shell 上处理键盘输入

> ID：13682457
> 
> 赞同：0
> 
> 时间：2012-12-03T11:38:24.603
> 
> 标签：c, shell, input

我正在开发一个自定义 shell，如 bash（在 C 中）。我现在正在处理由箭头和 tab 键触发的事件。但是，应该正确处理这些特殊键。

我想要的是捕获这些键，而不是让 CLI 在屏幕上绘制它们。例如，当按下向上箭头时，它会绘制以下符号：'^[[A'

我怎样才能阻止它发生？读取和映射这些键的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:19:31.790

它有点旧，但是一些 shell 使用终端功能（termcaps）来阻止输出和移动光标。

您还可以使用 lib ncurses，它是一个很酷的 termcaps 包装器。

# php - PHP 会话（登录页面和用户页面）

> ID：13682459
> 
> 赞同：0
> 
> 时间：2012-12-03T11:38:28.927
> 
> 标签：php

如果用户已经登录，我需要在索引页面上创建一个会话，它将标题到成员页面。如果用户销毁会话，它将停留在索引（登录页面）

我所做的是

```
if(session_start){
    header("location:member.php") or die();
}

if(isset($_POST['email']) && isset($_POST['password'])){

$email=strtolower($_POST['email']);
    $password=md5($_POST['password']);

if($email && $password){
        $connect=mysql_connect("localhost", "root", "");
        $database=mysql_select_db("phplogin", $connect);

$SQL=mysql_query("SELECT * FROM users WHERE email='$email'");
        $numrows=mysql_num_rows($SQL);

if($numrows!=0){
            while($result=mysql_fetch_assoc($SQL)){
                $db_email=$result['email'];
                $db_password=$result['password'];
                $db_firstname=$result['firstname'];
                $db_lastname=$result['lastname'];
                }
            }
        else{
            die("Can't find the user");
            }

if($email==$db_email && $password==$db_password){
            session_start();
            $_SESSION['firstname']=$db_firstname;
            $_SESSION['lastname']=$db_lastname;
            header("location:member.php");
            }   
        else{   
            die("wrong username or password");
            }
        }
    else{die("Please enter email or password");}
    } 
```

这在用户没有销毁会话时有效，但是当用户销毁会话时它没有停留在索引页面

我需要像 facebook 这样的东西，但我不知道 facebook 如何在登录页面和用户页面上共享相同的域名。

所以每次我输入 facebook.com 我都会去我的用户页面，如果我注销，它将成为登录页面

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:58:00.773

你用过`if(session_start)`。`session_start()`是一个函数。它用于每一页。所以它每次都会重定向你。

另一件事，您需要`session_start()`在存储会话的页面和获取会话值的页面上。

代替：

```
if(session_start){
    header("location:member.php") or die();
} 
```

利用：

```
session_start();
if(isset($_SESSION['firstname']) && isset($_SESSION['lastname'])){
    header('location:member.php');
}
//and REMOVE session_start(); from where you have written. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:56:37.150

首先; 如果要检查用户是否已登录，仅检查会话是否存在是不够的（即使用户未登录，会话也可能存在）。所以你应该首先编写一个`is_logged_in()`函数（或类似的东西）来正确检查登录状态。

您的用户总是被重定向的原因是如果会话成功启动，该函数会`session_start()`返回；`true`如果会话被破坏，它只是开始一个新的。所以基本上它`true`几乎总是会返回，如果一切正常（比如用户没有关闭 cookie 等）。

如果您编写了该函数，它实际上非常简单。假设您有两个文件：`home.php`和`member.php`. 第一个是您的主页（带有“Hello visitor！”消息和登录表单），第二个是会员页面。如果这两个文件都是“独立”脚本，您确实可以将用户标头到特定页面（`header('Location: home.php');`如果用户应该先登录，`header('Location: member.php');`如果用户已经登录）。

但！如果你想“隐藏”页面（很像 facebook 所做的），你可以在你的 index.php 中包含这些文件。做这样的事情：

```
if(is_logged_in()) {
    require_once('member.php'); // present member profile page
} else {
    require_once('home.php'); // present login page
} 
```

在您的 index.php 中，您可以设置一个常量（另请参阅[关于常量的 php 手册](http://nl1.php.net/constants)）以确保文件只能包含在 index.php 中：

--- 索引.php：

```
define('VALID_INCLUDE', true);
// the rest of your code 
```

--- home.php & member.php:

```
if(!defined('VALID_INCLUDE')) die('You should not request this page directly'); 
```

但请注意，如果您想编写这样的应用程序，框架可以帮助您很多；如果出现此类问题，它会涵盖很多内容并使编码速度更快（大多数框架都带有某种身份验证模块，并允许您使用“视图”向用户展示正确的页面，就像我在上面所做的那样解决`require_once`方案）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:46:25.770

在您的页面顶部怎么样

```
if(!isset($_SESSION['firstname']) || !isset($_SESSION['lastname'])){
    header("location:index.php") or die();
} 
```

# jquery - jQuery 多个复选框过滤器组

> ID：13682461
> 
> 赞同：6
> 
> 时间：2012-12-03T11:38:46.087
> 
> 标签：jquery, html, css

我正在尝试使用复选框和 jQuery 制作可过滤的产品列表。我有一些代码工作（感谢我在这里找到的以前的答案）。

我想使用 CSS 类来显示或隐藏项目。

我正在尝试按颜色、表面处理和价格过滤项目，问题是我的代码当前正在使用不同过滤器组之间的 OR 来选择项目。

我需要能够在每个组（例如颜色）中使用 OR 进行过滤，但是当复选框位于不同的组中时使用 AND。我想这样做的方法是添加一个'。在类名之间，因此只有当颜色、完成和价格 css 类匹配时，该项目才会匹配过滤器。

例如#div.dark.smooth.b

我已经在 Firebug 控制台中尝试过，我可以通过这种方式过滤我需要的项目，但不幸的是我不知道如何在 jQuery 中实现这一点。我的代码如下...

```
<!DOCTYPE html>
<html>
<head>
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>

<ul id="colour">
<li><input type="checkbox" name="colour" value="dark"> Dark</li>
<li><input type="checkbox" name="colour" value="medium"> Medium</li>
<li><input type="checkbox" name="colour" value="light"> Light</li>
</ul>

<ul id="finish">
<li><input type="checkbox" name="finish" value="smooth"> Smooth</li>
<li><input type="checkbox" name="finish" value="riven"> Riven</li>
<li><input type="checkbox" name="finish" value="honed"> Honed</li>
</ul>

<ul id="price">
<li><input type="checkbox" name="price" value="a"> Up to £25</li>
<li><input type="checkbox" name="price" value="b"> £25 to £45</li>
<li><input type="checkbox" name="price" value="c"> £45 to £65</li>
<li><input type="checkbox" name="price" value="d"> £65 to £85</li>
<li><input type="checkbox" name="price" value="e"> over £85</li>
</ul>

<div class="dark smooth b">dark smooth b</div>
<div class="medium honed d">medium honed d</div>
<div class="dark smooth d">dark smooth d</div>
<div class="light smooth b">light smooth b</div>
<div class="light riven b">light riven b</div>
<div class="dark riven c">dark riven c</div>
<div class="medium riven a">medium riven a</div>

<script>

$("#colour :checkbox,#finish :checkbox,#price :checkbox").click(function() {

       $("div").hide();

       $("#colour :checkbox:checked").each(function() {
           $("." + $(this).val()).slideDown('slow');
       });
       $("#finish :checkbox:checked").each(function() {
           $("." + $(this).val()).slideDown('slow');
       });
       $("#price :checkbox:checked").each(function() {
           $("." + $(this).val()).slideDown('slow');
       });

    });

</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:55:54.017

用嵌套循环替换单个循环。

编辑：您还必须检查每个条件：

```
 var fc=false;
   var ff=false;
   var fp=false;
   $("#colour :checkbox:checked").each(function() {
        fc=true;
        var color = $(this).val();
        $("#finish :checkbox:checked").each(function() {
            ff=true;
            var finish = $(this).val();
            $("#price :checkbox:checked").each(function() {
                 fp=true;
                 $("." + color + "." + finish + "." + $(this).val()).slideDown('slow');
            });
            if(!fp) {
                 $("." + color + "." + finish).slideDown('slow');
            }
        });
        if(!ff) {
            $("#price :checkbox:checked").each(function() {
                 fp=true;
                 $("." + color + "." + $(this).val()).slideDown('slow');
            });
            if(!fp) {
                 $("." + color).slideDown('slow');
            }
        }
   });
   if(!fc) {
       $("#finish :checkbox:checked").each(function() {
           ff = true;
           var finish = $(this).val();
           $("#price :checkbox:checked").each(function() {
               fp=true;
               $("." + finish + "." + $(this).val()).slideDown('slow');
           });
           if(!fp) {
                 $("." + finish).slideDown('slow');
           }
       });
       if(!ff) {
           $("#price :checkbox:checked").each(function() {
                $("." + $(this).val()).slideDown('slow');
           });
       }
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:31:28.550

好的 - 我误解了 CSS 类，尝试将其粘贴到您的复选框单击功能下方，它会为您提供有关如何执行此操作的指示。

```
 var ColorArray = [];
        var FinishArray = [];
        var PriceArray = [];

        ColorArray[0] = "Dark";
        ColorArray[1] = "Medium";

        FinishArray[0] = "Smooth";
        FinishArray[1] = "Riven";

        PriceArray[0] = "a";
        PriceArray[1] = "b";
        PriceArray[2] = "c";

        for (c = 0; c < ColorArray.length ; c++) {
            for (f = 0; f < FinishArray.length ; f++) {
                for (p = 0; p < PriceArray.length ; p++) {
                                alert(ColorArray[c] +"."+ FinishArray[f] + "."+PriceArray[p]);
                }
            }
        }

        })

EDIT - the full working solution based on the above method [with 4 select options now] is pasted below.

    <!DOCTYPE html>
<html>
<head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
</head>
<body>

    <ul id="filter1">
        <li>
            <input type="checkbox" name="filter1" value="dark">
            Dark</li>
        <li>
            <input type="checkbox" name="filter1" value="medium">
            Medium</li>
        <li>
            <input type="checkbox" name="filter1" value="light">
            Light</li>
    </ul>

    <ul id="filter2">
        <li>
            <input type="checkbox" name="filter2" value="sm">
            Small</li>
        <li>
            <input type="checkbox" name="filter2" value="med">
            Medium</li>
        <li>
            <input type="checkbox" name="filter2" value="lge">
            Large</li>
    </ul>

    <ul id="filter3">
        <li>
            <input type="checkbox" name="filter3" value="smooth">
            Smooth</li>
        <li>
            <input type="checkbox" name="filter3" value="riven">
            Riven</li>
        <li>
            <input type="checkbox" name="filter3" value="honed">
            Honed</li>
    </ul>

    <ul id="filter4">
        <li>
            <input type="checkbox" name="filter4" value="a">
            Up to £25</li>
        <li>
            <input type="checkbox" name="filter4" value="b">
            £25 to £45</li>
        <li>
            <input type="checkbox" name="filter4" value="c">
            £45 to £65</li>
        <li>
            <input type="checkbox" name="filter4" value="d">
            £65 to £85</li>
        <li>
            <input type="checkbox" name="filter4" value="e">
            over £85</li>
    </ul>

    <p><a class="showall" href="#" />Clear Filters</a></p>

    <div class="list dark sm smooth b">dark small smooth b</div>
    <div class="list medium lge honed d">medium large honed d</div>
    <div class="list dark med smooth d">dark medium smooth d</div>
    <div class="list light sm smooth b">light small smooth b</div>
    <div class="list light lge riven b">light large riven b</div>
    <div class="list dark sm riven c">dark small riven c</div>
    <div class="list medium med riven a">medium medium riven a</div>
    <div class="list medium lge honed e">medium large honed e</div>

    <div class="NoResults"></div>

    <script>

        $("#filter1 :checkbox,#filter2 :checkbox,#filter3 :checkbox,#filter4 :checkbox").click(function () {

            $("div.list").hide();

            var Filter1Array = [];
            var Filter2Array = [];
            var Filter3Array = [];
            var Filter4Array = [];
            var filter1_Count = 0, filter2_Count = 0, filter3_Count = 0, filter4_Count = 0;

            $("#filter1 :checkbox:checked").each(function () {
                Filter1Array[filter1_Count] = $(this).val();
                filter1_Count++
            });

            $("#filter2 :checkbox:checked").each(function () {
                Filter2Array[filter2_Count] = $(this).val();
                filter2_Count++
            });

            $("#filter3 :checkbox:checked").each(function () {
                Filter3Array[filter3_Count] = $(this).val();
                filter3_Count++
            });

            $("#filter4 :checkbox:checked").each(function () {
                Filter4Array[filter4_Count] = $(this).val();
                filter4_Count++
            });

            var filter1string
            var filter2string
            var filter3string
            var filter4string

            var filter1checked = false
            var filter2checked = false
            var filter3checked = false
            var filter4checked = false

            if (filter1_Count == 0) { filter1_Count = 1; } else { filter1checked = true; }
            if (filter2_Count == 0) { filter2_Count = 1; } else { filter2checked = true; }
            if (filter3_Count == 0) { filter3_Count = 1; } else { filter3checked = true; }
            if (filter4_Count == 0) { filter4_Count = 1; } else { filter4checked = true; }

            for (f1 = 0; f1 < filter1_Count; f1++) {

                if (Filter1Array[f1] != null) { filter1string = '.' + Filter1Array[f1] } else { filter1string = '' }

                for (f2 = 0; f2 < filter2_Count; f2++) {

                    if (Filter2Array[f2] != null) { filter2string = '.' + Filter2Array[f2] } else { filter2string = '' }

                    for (f3 = 0; f3 < filter3_Count; f3++) {

                        if (Filter3Array[f3] != null) { filter3string = '.' + Filter3Array[f3] } else { filter3string = '' }

                        for (f4 = 0; f4 < filter4_Count; f4++) {

                            if (Filter4Array[f4] != null) { filter4string = '.' + Filter4Array[f4] } else { filter4string = '' }

                            var QueryString = filter1string + filter2string + filter3string + filter4string
                            $(QueryString).fadeIn('fast');
                        }
                    }
                }
            }

            if (!filter1checked && !filter2checked && !filter3checked && !filter4checked) {
                $("div.list").fadeIn('fast');
            };

            if ($('div.list:visible').length === 0) {
                $(".NoResults").html("<p class='error'>No products match your filter selections. Please try a different combination.</p>");
            }
            else { $(".NoResults").html(""); }

        });

        $('a.showall').click(function () {
            $("div.list").fadeIn('fast');
            $("#filter1 :checkbox").removeAttr('checked');
            $("#filter2 :checkbox").removeAttr('checked');
            $("#filter3 :checkbox").removeAttr('checked');
            $("#filter4 :checkbox").removeAttr('checked');
            $(".NoResults").html("");
            return false;
        });

    </script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T23:46:48.153

由于仅选择/将选择组中的单个项目，因此单选按钮似乎很合适，因此诀窍就是在打开并单击它时将其关闭。

我稍微更改了您的标记并添加了代码以反映“取消选中”单选按钮的能力。工作示例小提琴：http: [//jsfiddle.net/MarkSchultheiss/mBAaW/](http://jsfiddle.net/MarkSchultheiss/mBAaW/)

无线电多选

```
<div id="myRadios">
<ul id="colour">
    <li><label><input type="radio" name="colour" value="dark" >Dark</label></li>
    <li><label><input type="radio" name="colour" value="medium">Medium</label></li>
    <li><label><input type="radio" name="colour" value="light">Light</label></li>
</ul>

<ul id="finish">
<li><input type="radio" name="finish" value="smooth">Smooth</li>
<li><input type="radio" name="finish" value="riven">Riven</li>
<li><input type="radio" name="finish" value="honed">Honed</li>
</ul>

<ul id="price">
<li><input type="radio" name="price" value="a">Up to £25</li>
<li><input type="radio" name="price" value="b">£25 to £45</li>
<li><input type="radio" name="price" value="c">£45 to £65</li>
<li><input type="radio" name="price" value="d">£65 to £85</li>
<li><input type="radio" name="price" value="e">over £85</li>
</ul></div>
<div id="founditems">
<div class="dark smooth b">dark smooth b</div>
<div class="medium honed d">medium honed d</div>
<div class="dark smooth d">dark smooth d</div>
<div class="light smooth b">light smooth b</div>
<div class="light riven b">light riven b</div>
<div class="dark riven c">dark riven c</div>
<div class="medium riven a">medium riven a</div>
</div>
<div id="shower">empty</div> 
```

示例代码：

```
// radio multi-select
var mycolors = [];
var myfinish = [];
var myprice = [];

function checkit(myarray, myclass) {
    var indisun = $.inArray(myclass, myarray);
    return indisun;
}
$("#colour,#finish,#price").on("click", ":radio", function(event) {

    $("#founditems div").hide();
    var mytarget = event.target;
    $("#shower").text("");
    if ($(mytarget).hasClass("iam")) {
        $(mytarget).parents("ul").find("input:radio").removeClass("iam");
        mytarget.checked = false;
    } else {
        $(mytarget).parents("ul").find("input:radio").removeClass("iam");
        $(mytarget).addClass("iam");
    };
    var mycurrent = [];
    var hasColor = $("#colour :radio:checked");
    var hasFinish = $("#finish :radio:checked");
    var hasPrice = $("#price :radio:checked");

    var radios = $("#colour :radio,#finish :radio,#price :radio");
    radios.filter(":checked").each(function() {
        var disun = $(this).val();
        mycurrent.push(disun);
    });
    $("#founditems div").removeClass("iam");

    $('#founditems div').each(function() {
        var adiv = $(this);
        $.each(mycurrent, function() {
            if (adiv.hasClass(this)) {
                adiv.addClass("iam");
            };
        });
    });
    //just to show current selection(s)
    $.each(mycurrent, function() {
        $("#shower").text($("#shower").text() + this);
    });
    var currCol = hasColor.length ? hasColor.val() : false;
    var currFin = hasFinish.length ? hasFinish.val() : false;
    var currPri = hasPrice.length ? hasPrice.val() : false;
    $.each(mycurrent, function() {
        var currVal = this;
        var itsaColor = checkit(mycolors, this);
        var itsaFinish = checkit(myfinish, this);
        var itsaPrice = checkit(myprice, this);
        $('#founditems div').each(function() {
            var adiv = $(this);
            if (adiv.hasClass(currVal)) {
                if (currCol && !adiv.hasClass(currCol) && itsaColor) {
                    adiv.removeClass("iam");
                }
                if (currFin && !adiv.hasClass(currFin) && itsaFinish) {
                    adiv.removeClass("iam");
                };
                if (currPri && !adiv.hasClass(currPri) && itsaPrice) {
                    adiv.removeClass("iam");
                };
            }
        });
    });

    $('#founditems div.iam').slideDown("slow");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T12:20:53.567

如何使用复选框的 .click 函数来获取页面上所有选中复选框的关联值并从该值构建您的类字符串，即 dark.riven.b.light.a - 这行得通吗？

# matlab - 发布 .fig 文件而不让它们出现在屏幕上

> ID：13682471
> 
> 赞同：7
> 
> 时间：2012-12-03T11:39:25.837
> 
> 标签：matlab, publish

我有一些代码可以生成许多 MATLAB 图形。在我的程序结束时，我想在报告中发布这些数据。我有一个脚本，它被传递给 publish()，它使用 openfig() 将数字包含在文档中。

这会导致这些数字在屏幕上闪烁。当我使用 close 和 snapnow 的组合打开循环内的图形时，这尤其令人讨厌。我尝试使用使这些数字不可见

```
openfig(PathToFigure, 'new', 'invisible') 
```

这会停止图像出现在屏幕上，但也会停止它出现在报告中。

有没有办法在报告中包含 .fig 文件而不让它们出现在屏幕上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:57:16.097

用 来打开图`f=openfig(PathToFigure, 'new', 'invisible')`。`Position`然后通过设置其属性（可能是左侧和底部像素为负值）将图形移出屏幕，将其属性设置`Visible`为`on`，调用`snapnow`. 删除图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:49:02.317

我实际上建议您在创建这些数字时将其可见性设置为“关闭”
`f = figure('Visible','off');`

# javascript - 使用 Javascript 动态编辑下拉列表 - 不工作

> ID：13682473
> 
> 赞同：0
> 
> 时间：2012-12-03T11:39:35.823
> 
> 标签：javascript, html

好的，我知道该怎么做——理论上。我在网页中有一个下拉列表，我想用 javascript 动态编辑它。我的下拉列表已创建，为空，带有以下 HTML：

```
<select id="my_dropdown">
</select> 
```

然后这个javascript代码（在head部分运行）应该用一个选项填充它：

```
my_drop = document.getElementById("my_dropdown");
my_drop.options[0] = new Option("Name", "value"); 
```

我想我是按照书本做的，但是，即使在这一点上剥离到骨头，这段代码仍然无法工作，无论是在 Chromium 还是 Firefox 上。我不知道接下来要尝试什么。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:41:00.697

如果你在头脑中做这件事，在任何`onload`处理程序之外，那么 DOM 还没有准备好。

要么将你的 javascript 移动到 HTML 中的元素之后，要么将它包含在一个`onload`函数中。

例如/

```
<body onload="doMyStuff()"> 
```

并在头部

```
function doMyStuff(){
    // code here to add item to dropdown
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:45:08.860

nothing is wrong with your code... i think your DOM isn't ready so try this...

on your HTML tag

```
<body onload="myFunction()"> 
```

and add this to your script

```
function myFunction(){
   my_drop = document.getElementById("my_dropdown");
   my_drop.options[0] = new Option("Name", "value");
} 
```

# delphi - ClientDataSet 的带有 dfxml 参数的 Savetostream 引发访问冲突

> ID：13682481
> 
> 赞同：0
> 
> 时间：2012-12-03T11:39:51.280
> 
> 标签：delphi, delphi-7

打开 clientDataSet 并获得：

```
cds.XMLData 
```

或者

```
st_pom := TMemoryStream.Create;
cds.SaveToStream(st_pom, dfXML ); 
```

结果是 AV。有没有人遇到过这样的行为？

我可以添加 cds 有两个字段：数字和 NVarchar(max) .. 似乎第二个字段是问题...

这是发生 AV 的最后痕迹

```
'{ Original Exception - Access violation at address 4DB10D54\. Write of address 05017000 }'
(0002FD54) [4DB10D54]'#$D#$A'(000B2CB3) [004B3CB3] DBClient.TCustomClientDataSet.SaveDataPacket (Line 1500, "DBClient.pas" + 5) + $15'
(000B4385) [004B5385] DBClient.TCustomClientDataSet.WriteDataPacket (Line 2119, "DBClient.pas" + 5) + $6'
(000B457B) [004B557B] DBClient.TCustomClientDataSet.SaveToStream (Line 2186, "DBClient.pas" + 1) + $C' 
```

# ios - 免费的应用内购买产品（仅用于在 Apple 托管某些内容）？

> ID：13682488
> 
> 赞同：0
> 
> 时间：2012-12-03T11:40:29.350
> 
> 标签：ios, download, in-app-purchase

背后的目的是保持初始应用程序包的大小较小，但提供一些以后可以免费下载的文档。

有没有办法使用 Apple 托管的内容功能来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:02:02.027

我同意这将是一个很好的使用场景，但目前还不可能。您必须自己托管内容。Amazon S3 为这种场景提供了一个非常稳定且廉价的解决方案，维护成本低至零。

# c# - 如何使用 Mono.Cecil 保存更改的程序集？

> ID：13682491
> 
> 赞同：5
> 
> 时间：2012-12-03T11:40:38.570
> 
> 标签：c#, .net, mono.cecil

我有一个没有类的[Mono.Cecil](http://www.mono-project.com/Cecil)`AssemblyFactory`版本。可能是 Cecil 类的 0.9 版本。有出路吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-03T11:45:22.560

只需使用`AssemblyDefinition.Write(fileName)`

# javascript - 使用 knockout.js 构建手风琴

> ID：13682492
> 
> 赞同：4
> 
> 时间：2012-12-03T11:40:44.557
> 
> 标签：javascript, model-view-controller, view, knockout.js

对某些人来说可能是一个微不足道的问题。我的对象有一个看起来像这样的视图模型：

```
this.Activities = ko.observableArray([
{ "date": "28/11/2012 00:00:00",
  "activities": [
     { "company": "BOW",
       "description": "Backup Checks",
       "length": "60"
     },
     { "company": "AMS",
       "description": "Data Request",
       "length": "135"
     },
  ]},
{ "date": "30/11/2012 00:00:00",
  "activities": [
     { "company": "BOW",
       "description": "Backup Checks",
       "length": "60"
     },
     { "company": "SLGT",
       "description": "Software Development",
       "length": "240"
     },
     { "company": "BOW",
       "description": "Data Request",
       "length": "30"
     },
  ]},
]); 
```

我想构建一个手风琴，它将隐藏活动数组并显示日期。每当单击日期时，将通过展开下面的相应面板来显示与该日期匹配的活动列表。现在，在我不使用 Knockout.js 的项目中，我只是使用通用 Activity 对象的 Id 将手风琴标题的 ID 属性与手风琴正文元素中的 name 属性链接起来。我在强类型视图中使用模型属性来实现这一点。由于在 Knockout.js 中，我为视图模型提供了活动的详细信息，因此我对数据绑定时创建的 Html 结构的控制有限。那么如何将手风琴标题与匹配的正文元素链接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T04:40:42.703

这假设您使用的是 bootstrap 手风琴，但应该让您很好地了解如何使用任何手风琴系统。

[http://jsfiddle.net/billpull/f8Cbb/1/show/](http://jsfiddle.net/billpull/f8Cbb/1/show/)

**HTML**

```
<div class="accordion" id="accordion2" data-bind="foreach: {data: Activities, as: 'activity'}">
    <!-- ko template: 'accordionTmpl' --><!-- /ko -->
</div>

<script type="text/html" id="accordionTmpl">
<div class="accordion-group">
    <div class="accordion-heading">
        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2"  data-bind="text: activity.date, attr: { href: '#' + activity.order}"></a>
      </a>
    </div>
    <div class="accordion-body collapse" data-bind="attr: { id: activity.order}">
      <div class="accordion-inner">
        <ul data-bind="foreach: {data: activity.activities, as: 'subActivity'}">
            <li>
                <span data-bind="text: subActivity.company"></span><br>
                <span data-bind="text: subActivity.description"></span><br>
                <span data-bind="text: subActivity.length"></span>
            </li>
        </ul>
      </div>
    </div>
</div>
</script> 
```

**Javascript**

```
 var ViewModel = function () {
   this.Activities = ko.observableArray([
        { "date": "28/11/2012 00:00:00",
         "order" : 1,
          "activities": [
             { "company": "BOW",
               "description": "Backup Checks",
               "length": "60"
             },
             { "company": "AMS",
               "description": "Data Request",
               "length": "135"
             },
          ]},
        { "date": "30/11/2012 00:00:00",
       "order" : 2,
          "activities": [
             { "company": "BOW",
               "description": "Backup Checks",
               "length": "60"
             },
             { "company": "SLGT",
               "description": "Software Development",
               "length": "240"
             },
             { "company": "BOW",
               "description": "Data Request",
               "length": "30"
             },
          ]},
        ]); 
};

$(function () {
  ko.applyBindings(new ViewModel());
}); 
```

# sql-server - SQL server ROWVERSION 定义不准确？

> ID：13682498
> 
> 赞同：2
> 
> 时间：2012-12-03T11:41:00.187
> 
> 标签：sql-server, sql-server-2008, rowversion

来自[msdn](http://msdn.microsoft.com/en-us/library/ms182776.aspx)

> 每个数据库都有一个计数器，对于**在数据库中包含 rowversion 列**的表执行的每个插入或更新操作，该计数器都会递增。

还

> 要返回数据库的当前 rowversion 值，请使用 @@DBTS。

我有一个数据库（相信我它只有一个表，没有时间戳/行版本字段）

![在此处输入图像描述](../Images/02181ba29f46b837db11ebf6a9874fbe.png)

但是当我运行 select @@DBTS 时，我得到的结果*好像我有*一个 rowversion 列：

![在此处输入图像描述](../Images/f0c0ffd7be92b3104ae9e639a288ae05.png)

（ps - 插入/更新 - 不更新此值）。

*   这个值是多少？

*   为什么我没有 rowversion 列？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T13:06:07.240

> 这个值是多少？

它是数据库中用于实现`rowversion`列的计数器的值。

> 为什么我没有 rowversion 列？

您引用的文档说每个数据库都有这样的计数器。*然后*它声明它将通过对包含`rowversion`列的表的操作来增加。

它并不是说这个计数器的*存在**取决于*您的数据库中是否存在任何此类表。

* * *

将其解析为：

> A) 每个数据库都有一个计数器
> 
> B) 递增
> 
> C) 对于执行的每个插入或更新操作
> 
> D) 在桌子上
> 
> E) 包含 rowversion 列
> 
> F) 数据库内。

(E) 和 (F) 是适用于 (D) 的条件。(C) 表示 (D) 上的哪些操作导致 (B) 发生。(BF) 中的任何一个都不会影响 (A) 的真实性或其他方面。

* * *

也没有文档（我可以找到）表明它应该从 0x0000000000000000 或任何其他值开始。鉴于此列的唯一目的是允许确定排序（X 发生在 Y 之后或 Y 之前），返回的实际值是什么并不重要。

# android - 通过偏移量 android 发送音频文件的参考

> ID：13682502
> 
> 赞同：1
> 
> 时间：2012-12-03T11:41:15.640
> 
> 标签：android, offset

我正在制作音频直播应用程序。我之前在做什么，我重新编码了一段时间的语音/音频，我会按下停止按钮来停止录音。

然后我在单击停止按钮后通过互联网将视频发送到服务器。在这里我使用套接字编程。它工作得很好，但是我不是实时流媒体应用程序。

我听说要进行代码偏移以发送音频文件以使其生效。它将逐字节发送音频到服务器。但是，到目前为止，我找不到任何可靠的教程/简单的源代码来说明我想怎么做。有谁知道我可以在哪里对这种方法进行任何参考？

# c# - 访问文本框列表

> ID：13682503
> 
> 赞同：12
> 
> 时间：2012-12-03T11:41:17.540
> 
> 标签：c#, winforms

我的 PDF 中有三个签名字段。为此，我正在从`ComboBox`我的 Windows 窗体应用程序中获取值。

有`ComboBox`：

```
 Signature 1
  Signature 2
  Signature 3 
```

对于签名字段，我有一个属性：

```
 field.fullname;
 field.baseobject; 
```

这给了我该领域的全名，例如

```
 Signature 1
 ... 
```

我想在单击保存按钮时比较这两者；也就是说，如果选择签名字段1，则数据应仅添加到签名字段1，依此类推。

我该怎么做呢？

我尝试使用`field.BasedataObject`，发现以下内容

```
<24 0 R> - 1st field
<26 0 R> - 2nd field
<1010 0 R> - 3rd field 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T00:55:46.460

看起来一个简单的解决方案是为 Signature 创建一个类（使用您必要的属性），然后创建一个签名数组。首先使用该签名数组填充您的组合框（保持系统的完整性），然后使用组合框的选定值中的 id 与数组索引进行比较。像这样的东西：

```
public class Signature{
    string property1;
    string property2;

    public Signature(string propertyVal1, string propertyVal2)
    {
        property1 = propertyVal1;
        property2 = propertyVal2;
    }

}

    Signature[] mySignatures = new Signature[3];

    public Form1()
    {
        InitializeComponent();
        mySignatures[0] = new Signature("hello", "world");
        mySignatures[1] = new Signature("hello", "world");
        mySignatures[2] = new Signature("hello", "world");
        for (int i = 0; i < mySignatures.Length; i++)
        {
            comboBox1.Items.Add(mySignatures[i]);
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-17T16:05:12.487

很难理解你做了什么以及你想做什么，但看起来你只需要使用组合框的 SelectedValue 并比较/获取具有该“id”的正确对象。

在您的示例中，它看起来像 24、26 和 1010。您得到的输出可能是 Object.ToString()。

不要忘记组合具有选定的值（您应该存储密钥）和选定的文本。忘记文本并使用 field.BasedataObject.Key 获取密钥

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T07:44:30.087

您可以创建一个具有 3 个属性的类，如下所示 class Signature { string Signature1, string fullname, object baseobject } 也可能有 get 和 set

这将帮助您结合所有价值，并且也可以在此类中使用帮助方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-15T11:19:19.463

你是怎么指pdf的？它保存在您的数据库中吗？还是您在外部引用它？

如果它保存在您的数据库中，您可以使用二进制序列化访问它。如果在外部，Adobe pro 有一个链接按钮，可以使用 URL 将 pdf 文件连接到您的网络服务（您需要在 pdf 上进行 jscript pdf 编码）

您可能还想查看以简单方式访问 pdf 字段的 PDFOne 应用程序。

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T11:50:44.047

为什么没有签名结构？

```
struct Signature
{
Signature1,
Field1,
Field2
}; 
```

然后您可以比较这些结构变量。

# ios - 在不使用内置容器的情况下实现视图控制器容器？

> ID：13682504
> 
> 赞同：1
> 
> 时间：2012-12-03T11:41:19.750
> 
> 标签：ios, ios5, uiviewcontroller, uinavigationcontroller, uitableview

我是*iOS*编程新手，所以我想深入了解 View Controller Container 的概念。我正在通过*“猴子看猴子做”*来学习：D，我想制作一个滑出式导航（如 Facebook/Gmail/Path），没有任何原创性。

我找到了不同的实现，但是这个[由](https://github.com/beat843796/CHSlideController)Clemens [Hammerl](https://github.com/beat843796)制作的，似乎非常简单，所以我开始弄乱它，看看发生了什么。他使用 UINavigationViewController 和 UITableViewController 作为他的容器 (CHSlideController) 的 ViewController。

从我目前所阅读的内容来看，这 2 个 ViewController 本身就是 Container，对此感到有些奇怪，所以我想将普通的 ViewController 发送到我的 Container 中，但我看不到这些 ViewController 的视图。

我要问你的是，**如何在不使用其他内置容器（如 UINavigationViewController / ~~UITableViewController~~ / UITabViewController / ...）的情况下实现视图控制器容器？**

我是否需要覆盖某些方法或搁置某些协议？

谢谢。

我只对 iOS SDK 5.0+ 感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T19:47:23.460

坦率地说，我不明白这个问题的目的，但无论如何！:-)

如果您提到的只是出于学习目的，请查看[这个](http://www.hollance.com/2011/11/mhtabbarcontroller-a-custom-tab-bar-for-ios-5-using-the-new-container-apis/)相当简单的示例，以了解 iOS5+ 下的视图控制器包含。

如果你想知道为什么在 iOS5 之前视图控制器包含是一个 PITA，请查看[这篇](http://subjective-objective-c.blogspot.co.at/2011/08/writing-high-quality-view-controller.html)优秀的文章。

作为旁注， UITableViewController 不是视图控制器容器！例如，UITabBarController、UINavigationController 或 UISplitViewController 都是容器！

# sql - 用斜杠连接数字 SQL

> ID：13682507
> 
> 赞同：1
> 
> 时间：2012-12-03T11:41:29.320
> 
> 标签：sql, sql-server-2008, tsql

得到一个查询，当我尝试运行它时，它在将 nvarchar 值“0003/”转换为数据类型 int 时返回转换失败。

查询是

```
SELECT

name,
date,
CAST(('0' + Location + '/' + ID) AS nvarchar(50)) AS [UniqNumber]

FROM
Table 
```

在此情况下，将 nvarchar 值“0003/”转换为数据类型 int 时返回转换失败。位置和 ID 都是整数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:47:15.207

您需要转换输入。

```
'0' + CAST(Location AS VARCHAR(20)) + '/' + CAST(ID AS VARCHAR(20)) 
```

`int`具有比字符串数据类型更高的数据类型优先级。如果您这样做`string + int`，它将尝试将字符串转换为整数并添加它，而不是将整数转换为字符串并将其连接起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:56:35.220

试试这个，因为你想转换`nvarchar`成`int`

```
CAST(REPLACE(Location,'/',0) AS nvarchar(50)) + CAST(ID as nvarchar(50)) AS [UniqNumber] 
```

输出：

```
0030 
```

# node.js - 在 node.js 中分离游戏服务器和 Web 服务器

> ID：13682508
> 
> 赞同：2
> 
> 时间：2012-12-03T11:41:35.373
> 
> 标签：node.js, express, socket.io

我几乎用 node.js 和 socket.io 完成了一个回合制多人游戏。

我有 express.js 作为 web 服务器和另一个类作为游戏服务器，使用 socket.io。

我的问题是这两个在同一个应用程序中运行。我有一个网页登录页面，用户可以在其中登录并查看他们的玩家详细信息并在大厅中聊天。现在直到这里没有任何与游戏逻辑相关的东西。所以我问自己为什么这个游戏服务器与网络服务器在同一个应用程序中运行。另请注意，将来可能会有不同的服务器，例如（欧洲服务器、美洲服务器、亚洲服务器等），但相同的登录页面和登录机制仍然存在。

那么实现这一目标的完美方法是什么？

我应该制作两个单独的 node.js 应用程序，一个网络服务器和一个游戏服务器。但是在这种情况下，我可以在套接字和请求之间共享会话数据吗？

另一个缺点是在浏览网站时，任何意外行为都可能导致网络服务器抛出异常并关闭应用程序，从而也关闭游戏服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:03:16.290

您可能拥有完全独立的 node.js 应用程序和一个公共会话存储（例如 Redis），以在允许访问游戏服务器之前检查用户是否通过网络服务器进行了身份验证。公共会话存储还有助于同时使用游戏服务器，而不仅仅是一台 Web + 一台游戏服务器。

您也可以通过捕获所有错误来阻止关闭应用程序，但通常不建议这样做。

稍后编辑：这是有关会话存储的优点和缺点的一小部分列表。它不适用于 node.js，但适用于此处： [http ://techwhizbang.com/2009/12/memcache-session-store/](http://techwhizbang.com/2009/12/memcache-session-store/)

# javascript - 谷歌地图没有完全呈现在 div 中？

> ID：13682514
> 
> 赞同：1
> 
> 时间：2012-12-03T11:41:59.487
> 
> 标签：javascript, html, google-maps

这里我有`map_canvas`一个`div`叫做`map`. 问题是当我增加 的`width`时`map`，一侧的谷歌地图没有完全呈现。

请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T13:37:50.087

> 地图区域的宽度正在增加，但地图右侧未完全渲染。

当你改变 div 的大小时，触发地图上的 resize 事件：

[从文档](https://developers.google.com/maps/documentation/javascript/reference#Map)：

**活动**

resize - 当 div 更改大小时，开发人员应在地图上触发此事件： google.maps.event.trigger(map, 'resize') 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:46:12.263

你检查过div容器的宽度已经设置了吗？另外，地图的宽度是否已在 mapOptions 对象中设置？

如果您提供更多代码示例，将更容易提供帮助。

# c# - 32位控制台应用程序无法在用c#编写的64位进程中启动

> ID：13682517
> 
> 赞同：1
> 
> 时间：2012-12-03T11:42:13.050
> 
> 标签：c#, .net, com, com-interop

我看到这里已经讨论了非常相似的主题，但到目前为止有人已经解决了我的问题。

我有这个任务：

1.  我有 .exe（32 位）实用程序可以使用命令运行
2.  此实用程序将在 64 位平台上使用 windows 服务启动

我知道这不可能在 64 位进程上运行 32 位应用程序。否则，我通过 COM IPC 通信找到了解决方法。

所以有我的解决方案：

COM库的接口声明：

```
namespace Win32ConsoleAppWrapper
{
  [GuidAttribute("5a6ab402-aa68-4d58-875c-fe26dea9c1cd"), ComVisible(true),
  InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]
  interface IKDUCompessor
  {
    event ProcessStarted processStarted;
    void RunKDUCompress(string comm);
  }
} 
```

实现接口的类：

```
namespace Win32ConsoleAppWrapper
{

  [GuidAttribute("a1f4eb1a-b276-4272-90e0-0eb26e4273e0"), ComVisible(true),
  ClassInterface(ClassInterfaceType.None)]
  public class KDUCompessor : IKDUCompessor
  {
    public static readonly string KDU_COMPRESS_LIBRARY_NAME = "kdu_compress.exe";

    public event ProcessStarted processStarted;

    public KDUCompessor() { }

    public void RunKDUCompress(string comm)
    {
      if(!File.Exists(KDU_COMPRESS_LIBRARY_NAME))
      {
        throw new FileNotFoundException(String.Format("File {0} could not be found. Please check the bin directory.", KDU_COMPRESS_LIBRARY_NAME));
      }

      ProcessStartInfo info = new ProcessStartInfo();
      info.CreateNoWindow = false;
      info.UseShellExecute = true;
      info.FileName = String.Concat(KDU_COMPRESS_LIBRARY_NAME);
      info.WindowStyle = ProcessWindowStyle.Hidden;
      info.Arguments = comm;

      // Start the process with the info we specified.
      // Call WaitForExit and then the using statement will close.
      using(Process exeProcess = Process.Start(info))
      {
        exeProcess.WaitForExit();
      }      
    }
  }
} 
```

代码构建没有错误，也没有警告。然后通过regAsm.exe注册为COM。

现在我正在尝试访问 COM 并调用该方法：

```
public class MyClass
{

#region COM Interface and class declaration

[
  ComImport(),
  Guid("5a6ab402-aa68-4d58-875c-fe26dea9c1cd"),
  InterfaceType(ComInterfaceType.InterfaceIsIUnknown)
]
public interface IKDUCompessor
{
  [PreserveSig]
  void RunKDUCompress(string comm);   

}

[
  ComImport,
  Guid("a1f4eb1a-b276-4272-90e0-0eb26e4273e0")
]
public class KDUCompessor { }

#endregion

protected void CallCOM(_command)
{
  if (IsCommandValid(_command))
  {
    // instance
    Type type = Type.GetTypeFromCLSID(new Guid("a1f4eb1a-b276-4272-90e0-0eb26e4273e0"));
    object o = Activator.CreateInstance(type);
    IKDUCompessor t = (IKDUCompessor)o;
    t.RunKDUCompress(_command);

  }
} 
```

我遇到了一个问题：

1.  执行以异常结束：未处理 System.Runtime.InteropServices.COMException，未注册类 HRESULT：0x80040154 (REGDB_E_CLASSNOTREG))，当 regasm.exe 注册程序集时没有错误
2.  我无法通过添加引用向导将 COM 引用添加到 VS 中的项目，它以错误对话框窗口结束：“无法添加对‘assemblyName’的引用。ActiveX 类型库‘libary path’是从 .net 程序集中导出的，不能被添加为引用。改为添加对 .net 程序集的引用。”

我尝试了很多解决方案，但没有成功……感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:23:12.940

不能从 64 位进程*运行32 位是不正确的。*您不能在 64 位进程中*使用*`Process.Start`32 位 DLL 或 COM-Control，但您可以使用它来启动您想要的任何进程。

在您的情况下，听起来您甚至不必使用您描述的 COM 控件（这甚至会导致更多问题）。只需在您的服务中执行以下操作（无论是 32 位还是 64 位），就可以了：

```
if(!File.Exists(KDU_COMPRESS_LIBRARY_NAME))
{
    throw new FileNotFoundException(String.Format("File {0} could not be found. Please check the bin directory.", KDU_COMPRESS_LIBRARY_NAME));
}

ProcessStartInfo info = new ProcessStartInfo();
info.CreateNoWindow = false;
info.UseShellExecute = true;
info.FileName = String.Concat(KDU_COMPRESS_LIBRARY_NAME);
info.WindowStyle = ProcessWindowStyle.Hidden;
info.Arguments = comm;

// Start the process with the info we specified.
// Call WaitForExit and then the using statement will close.
using(Process exeProcess = Process.Start(info))
{
    exeProcess.WaitForExit();
} 
```

# c - C - printf 错误

> ID：13682518
> 
> 赞同：0
> 
> 时间：2012-12-03T11:42:25.440
> 
> 标签：c, function, main

我正在尝试在 24 小时内从 Sam's Learn C 编译一个示例。

当我尝试编译以下代码时出现错误：

```
/* 03L02.c: Calculate an addition and print out the result */
#include <stdio.h>
/* This function adds two integers and returns the result */
int integer_add( int x, int y )
{
    int result;
    result = x + y;
    return result;
}
int main()
{
    int sum;
    sum = integer_add(5, 12);
    printf(“The addition of 5 and 12 is %d.\n”, sum);
    return 0;
} 
```

这是我的编译器给出的错误：

```
In function main
stray "\147\' in program
The undeclared identifier is declared only once
for each function it appears in
syntax error before addition
stray "\' in program
stray "\148' in program 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T11:44:12.073

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:46:51.200

您只是弄错了引号字符，将其更改为：

```
printf("The addition of 5 and 12 is %d.\n", sum); 
```

我不知道您使用的是什么键盘，但通常 " 字符位于 '2' 字符上方（我使用的是意大利键盘，所以您所在国家/地区的键盘可能有所不同）。
您肯定会在某个地方找到该字符。
如果我m 没记错它在 ASCII 表中是 34，所以在 windows 上你可以通过按 alt+34 来获取它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:45:06.457

because of wrong double qoute

```
printf(“The addition of 5 and 12 is %d.\n”, sum); 
```

to

```
printf("The addition of 5 and 12 is %d.\n”, sum); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T11:45:50.173

Don't use "smart quotes" in code!!!!! For string delimiters use plain old quotes. Here ("""""""""""""") are a few (here single quotes: '''''''''''''') you can probably copy/paste :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-21T13:54:04.340

我看到你的错误**是因为相同的字符**。查看您的代码

```
printf(“The addition of 5 and 12 is %d.\n”, sum); 
```

**尝试更改为：**

```
printf("The addition of 5 and 12 is %d.\n", sum); 
```

你能看出区别吗？**Qoute“它必须是”**

# jqgrid - 使用一行“saveRow”方法调用将 jqGrid Row 保存到服务器端集合？

> ID：13682520
> 
> 赞同：1
> 
> 时间：2012-12-03T11:42:37.233
> 
> 标签：jqgrid

问题：我可以通过一行“saveRow”方法调用将 jqGrid 客户端上使用“addRowData”成功添加的新 jqGrid 行保存到服务器端集合吗？

这是类似线程的不同版本： [How to perform action in jqGrid after add new row](https://stackoverflow.com/questions/8339463/how-to-perform-action-in-jqgrid-after-adding-new-row)

尽管就我而言，这似乎没什么不同：

现有：我有一个与 .ashx 处理程序对话的网格，用于插入更新删除和读取。（这适用于内联编辑等）

新功能：我刚刚添加了粘贴按钮，用于粘贴文本数组并将其转换为行：长话短说最后两行代码最终将我的拆分数据逐行添加到我的 jqGrid：

```
var gridRow = { Id: rowId, Surname: rowSurname,  DateOfBirth: rowDateOfBirth, Salary: rowSalary, Postcode: rowPostcode };
            jQuery("#list").addRowData(rowId, gridRow);  //(**) 
```

（如您所见，我知道我的 rowId，我通过现有数据计算搜索）

问题：上面的代码仅在 UI 上添加了新行，我希望它也可以添加到服务器集合中。

FAULTY：在 (**) 行之后，我想将它添加到服务器集合中 - 只需使用带有 saveRow 传递 URL 的全新调用。然而什么也没发生

这是我已经尝试过的一种变体：

```
                                $("#list").jqGrid('saveRow', rowId, { //上面 'addRowData' 方法中使用的相同 rowId 值
                                    succesfunc：函数（响应）{
                                        返回真；
                                    },
                                    网址：“jqHandler.ashx”，
                                    mtype：“发布”，
                                    extraparam: gridRow // 上面'addRowData'方法中使用的gridRow
                                });

```

底线：我可以通过一行“saveRow”方法调用将 jqGrid 客户端上使用“addRowData”成功添加的新 jqGrid 行保存到服务器端集合吗？

我真的很感激一些指导。最好的问候，克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T10:42:49.667

整理出来，可能对某人有所帮助，因为它很简单：

您只需要“编辑行”，因此我们只需要以最简单的方式添加一个编辑函数调用。

所以整个事情看起来像这样：

```
var gridRow = { Id: rowId, Surname: rowSurname,  DateOfBirth: rowDateOfBirth, Salary: rowSalary, Postcode: rowPostcode };
jQuery("#list").addRowData(rowId, gridRow);  

jQuery("#list").addRowData(rowId, gridRow);
jQuery("#list").jqGrid('editRow', rowId, { keys: true });

$("#list").jqGrid('saveRow', rowId, { //same rowId value used in 'addRowData' method above
                                    succesfunc: function (response) {
                                        return true;
                                    },
                                    url: "jqHandler.ashx",
                                    mtype: "POST",
                                    extraparam: gridRow // gridRow used in 'addRowData' method above
                                }); 
```

您可以进行调整，使其使用调用 jQuery 或 jqGrid API 的相同方式。但它有效......

干杯

# jquery - 尝试使用 jQuery、克隆和乘法函数

> ID：13682523
> 
> 赞同：0
> 
> 时间：2012-12-03T11:42:47.370
> 
> 标签：jquery, autocomplete, clone

我在启用 jQuery AutoComplete 和 Clone 功能时遇到问题，希望有人能帮助我。抱歉，如果这有点过于详细！

我有一张表，里面有标题、描述、数量、价格和总计。用户可以在产品字段上使用自动完成功能来获取标题的描述和价格。同时，我有一个使用克隆的“添加行”函数，如果其中一个发生更改，我正在尝试使用另一个函数来乘以数量和价格。到目前为止，我有以下内容：

向表中添加新行的代码：

```
var $table;
$(function() {
     $table=$('#invoiceitems'); 
     var $existRow=$table.find('tr').eq(1);
      bindAutoComplete($existRow);
});

function addRow(){
    var $row=$table.find('tr:last').clone();
    var $input=$row.find('input:first');
    $row.find('input').val("");
    $row.find('#product_description').val("");
    $table.append($row);
    bindAutoComplete($row);
    $input.focus();
} 
```

自动完成代码：

```
function bindAutoComplete($row){
    $row.find(".product_title").autocomplete(products, {
        width: 380,
        matchContains: "word",
        formatItem: function(row) {
            return row.title;
        }
    });
    $row.find('.product_title').result(function(event, data) {
        $row.closest('.product_description').val(data.description);
        $row.find('.product_price').val(data.price);
        $row.find('.qty').val("1");
    });
} 
```

价格和数量相乘的代码：

```
$(document).ready(function() {    
$(".qty, .product_price").keyup(function() {
   var $row = $(this).closest("tr"),
       price = $row.find(".product_price").val();
           qty = $row.find(".qty").val();
    $row.find(".line_total").text(qty * price);
}); 
```

目前，自动完成和克隆工作正常，但是数量和价格的乘法仅适用于第一行，现在适用于添加的任何新行。如果我替换 clone(); 与克隆（真）；然后乘法起作用，但是 AutoComplete 无法正常工作，因为它会在您使用它时更新所有先前行的价格。

我对 JS 和 jQuery 不是很好，所以我希望这是一个简单的错误来纠正？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:51:36.173

问题是这`clone(true)`意味着数据和事件也将被克隆。

我建议使用`clone()`方法并使事件像这样

对于 jQuery 1.7 及更高版本。

```
$(document).ready(function() {    
   $('table#invoiceitems').on('keyup', ".qty, .product_price", function() {
       var $row = $(this).closest("tr"),
       price = $row.find(".product_price").val();
       qty = $row.find(".qty").val();
       $row.find(".line_total").text(qty * price);
   }
}); 
```

对于旧版本，您可以使用`live()`.

将为稍后将添加到表中的每个新行调用此方法。

# c# - 我如何总是得到 COMException 而不是 OutOfMemoryException？

> ID：13682531
> 
> 赞同：0
> 
> 时间：2012-12-03T11:43:22.320
> 
> 标签：c#, .net, com, exception-handling, com-interop

我的 C# 代码使用一个 COM 对象。有时 COM 对象方法会返回`E_OUTOFMEMORY`，但它会被翻译成`System.OutOfMemoryException`而不是`System.Runtime.InteropServices.COMException`适当的`ErrorCode`. 这对我来说是个问题，因为它使我的错误处理变得复杂——我希望所有由 COM 对象方法引起的错误指示都被抛出`System.Runtime.InteropServices.COMException`。

当 COM 对象方法返回时，是否可以始终拥有`System.Runtime.InteropServices.COMException`而不是？`System.OutOfMemoryException``E_OUTOFMEMORY`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:44:37.537

这可能有点逃避，但为什么不包装任何代码`System.OutOfMemoryException`在 Try/catch 中抛出并重新抛出 a `System.Runtime.InteropServices.COMException`？

类似于以下内容：

```
 try
        {
            // COM Code here
        }
        catch (System.OutOfMemoryException ex)
        {
            throw new System.Runtime.InteropServices.COMException("E_OUTOFMEMORY", ex);
        } 
```

# php - php：如何检查数组是否为空

> ID：13682532
> 
> 赞同：1
> 
> 时间：2012-12-03T11:43:25.857
> 
> 标签：php

如何判断一个php数组是否为空？我尝试了不同的方法，但它永远不会`echo "no content";`

```
while($row = mysql_fetch_array($result))
  {
        if(count($row['link']))
        {
                echo '<a id="link_' . $row['Id'] . '" href="' . $row['link'] . '" data="/short_info.php?id=' . $row['Id'] . '/">' . $row['title'] . '</a><div class="in...
        }
        else
        {
                echo "no content";
        }
  } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T11:45:04.450

It is never empty. But when data is exhausted, `mysql_fetch_array` returns `false` and your loop ends, so you're not going to see it in the loop, anyway.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T11:45:01.797

$row is an array. $row['link'] is just a string. So you could you use:

```
if (strlen($row['link'])==0) {
  //do something
} 
```

But if you want to check for no result (no data rows from mysql) then you could use:

```
if (mysql_num_rows($result)==0)
  echo "no content"
else {
  //your while loop
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T11:47:23.380

更新您的代码，如：

```
$num=mysql_num_rows($result);
    if ($num>0) {
        echo '$var is either 0, empty, or not set at all';
    }
    else{
        echo "no content";
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T11:48:49.920

如果查询没有返回任何行，则此代码将永远不会进入 while 块，因为条件为 false .... 您可以编写：

```
$num=mysql_num_rows($result); 
```

这将返回行数然后你写：

```
if($num==0) {echo "no content";}
else
{
while(
.........
} 
```

# windows-8 - Windows 8 Mobiles 应用程序和 Windows 8 Metro 风格应用程序有什么区别

> ID：13682533
> 
> 赞同：0
> 
> 时间：2012-12-03T11:43:43.973
> 
> 标签：windows-8, windows-mobile, windows-phone, windows-phone-8

我是 Windows 平台的新手。我有几个问题在下面提到。

1.  Windows 8 Metro 风格应用程序和 Windows 8 移动应用程序之间有什么区别？
2.  我可以使用哪些差异语言来开发 Windows 移动应用程序？

以上问题的答案将快速启动我的windows mobile开发。

等待您的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:02:20.853

1.  除了一些仅适用于手机的 API 之外，它们基本相同 Windows Phone 8 现在与 Windows 8 共享一个共同的核心。这意味着您可以期望为其中一个编写应用程序并轻松将其移植到另一个，当然还有 UI 重组. 面向两者的开发人员应该使用 C#/VB + XAML 和 JS 开发应用程序，使用 C++/D3D 开发游戏。

2.  VB/C# + XAML，C++ + DirectX（用于复杂图形），JS 可用于 Windows 8 表面，但不能用于手机（从 jump start 到 windows 8 得到这个）

# internationalization - 如何以最简单的方式使用 Dojo i18n

> ID：13682539
> 
> 赞同：3
> 
> 时间：2012-12-03T11:44:01.080
> 
> 标签：internationalization, dojo

我是 Dojo 和 i18n 的新手。我希望在我的应用程序中将一些作品转换为不同的语言。我已经阅读了几篇文章，老实说，我觉得有很多信息需要我消化，而我正在努力解决它。有人可以为我提供最简单的方法吗？假设我想更改“你好”这个词。在我的脑海中，它会是这样的：

*   准备使用的 Dojo 库
*   我在我的 javascript 文件中定义了 String 'hello'。它有“你好”的占位符文本
*   我在我的 HTML 中指定我希望我的页面是

    “此处指定的字符串以不同的语言显示你好”

所以这就是我可以从我有限的知识中吸收的尽可能多的东西。我如何才能让这种设置正常工作？我假设我需要在我的页面上要求 i18n，但我如何执行此操作仍有待确定。

任何帮助都会很棒。请记住，如果可能的话，我对您的回答了解有限，谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T12:05:26.800

nls 文件夹通常用于存储您的翻译字符串，并且通常是使用它的小部件旁边的子目录。

IE。如果您的小部件存储在名为*app*的文件夹中的*myWidget.js中，则**myWidget.js*的翻译字符串将存储在目录*app/nls*中的同名文件 ( *myWidget.js* ) 中。

 ***这只是约定，但可能值得遵循，因为它使您的目录结构合乎逻辑。

这是*myWidget.js*小部件的示例：

```
define([
    "dojo/_base/declare",
    "dijit/_WidgetBase",
    "dijit/_TemplatedMixin",
    "dojo/i18n!./nls/myWidget"
], function(
    declare,  _widget, _templated,  strings, domAttr
){
    "use strict";

    var construct = declare([_widget,  _templated], {
        "i18n": strings,
        "templateString": "<div>${i18n.hello}</div>"
    });

    return construct;
}); 
```

这是一个非常简单的小部件，它在屏幕上创建一个**<div>**（参见*templateString属性）。***<div>**应该包含从翻译文件加载并分配给*hello*属性的文本。

小部件将需要在与*myWidget.js*相同的目录中创建*nls*目录。在*nls*目录中，您创建另一个名为*myWidget.js*的 javascript 文件（即与父级相同的名称）。该文件是您的根翻译文件，如下所示：

 ***```
define({
    root: ({
        "hello": "Hello"
    })
}); 
```

在这里，您已将字符串“Hello”分配给属性*hello*。这不是很有用，因为没有提供翻译。如果你想要一个挪威语翻译，那么你可以像这样修改它：

```
define({
    root: ({
        "hello": "Hello"
    }) ,
    "no": true
}); 
```

在这里，您是说除了根翻译字符串之外，您还有挪威语翻译。然后，您需要创建您的挪威语翻译文件并将其放在*nls*的名为*no*的子目录中。因此，您创建另一个名为*myWidget.js*的文件并将其放在 nls/no 中：

```
define({
    "hello": "Hei"
}); 
```

翻译文件的格式与根文件略有不同。使用默认字符串，除非当前浏览器语言中给定字符串的翻译可用（即，您不需要翻译每个字符串，只需翻译您想要翻译的字符串）。

*   有关此主题的更多帮助，请参阅[Dojo 国际化教程。](http://dojotoolkit.org/documentation/tutorials/1.8/i18n/)
*   请参阅Bitbucket 上的上述代码[示例项目](https://bitbucket.org/ssimpo/stackoverflow-13702818/src)

**在小部件之外加载翻译字符串：**

上面的示例显示了如何按照常规约定为小部件加载翻译文本。您可以在任何小部件或任何 require 语句中加载所需的任何字符串集。dojo/i18n 类能够加载您指定的任何字符串集。

```
eg:

require([
    "dojo/i18n!<PATH TO TRANSLATION ROOT FILE YOU WANT TO LOAD>"
], function(string) {
    // translation-string are stored in the 'strings' variable for the
    //    current browser language
}); 
```******

# mysql - SQL 日期时间格式差异

> ID：13682541
> 
> 赞同：0
> 
> 时间：2012-12-03T11:44:02.627
> 
> 标签：mysql, sql, datetime

我有一点问题。我正在尝试将 SQL 文件导入 SOLR，但 SOLR 需要以下格式的日期时间：

```
1995-12-31T23:59:59Z 
```

但是在 SQL 中使用 datetime 我只能采用这种格式：

```
1995-12-31 23:59:59 
```

如果我将日期放在 varchar 字段中，那么我将无法在 SQL 文件上进行基于日期的计算。所以，我的问题是，我能否以某种方式让 SQL 接受 solr（第一）格式的日期时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:57:22.410

如果您为您的字段使用标准 DateTime 类型，SOLR 将自动完成此转换，如下所示：

```
<field name="from_date" type="datetime" indexed="true" stored="true" /> 
```

如果它仍然不起作用，请使用以下方法转换您的日期：

```
DateTimeFieldSerializer date = new DateTimeFieldSerializer();
string fromDate = date.SerializeDate(myDate); 
```

# php - 将 DomDocument 与 SilverStripe 一起使用

> ID：13682542
> 
> 赞同：0
> 
> 时间：2012-12-03T11:44:04.023
> 
> 标签：php, domdocument, silverstripe

我正在使用 SilverStripe 2.4.7 和 DomDocument。我将以下代码放在一起，在独立 PHP 文件中使用时可以按预期工作。 **请注意，该 URL 不是我调用的实际 URL，但我无法公开发布**

```
$url = "http://www.somesite.com/";

  $dom = new DOMDocument(); 
  $dom->validate(); **I took this line out to fix the first error** 
  $dom->loadHTMLFile($url);

  foreach ($dom->getElementsByTagName('img') as $item) { 
     $value = $item->getAttribute('src'); 
   $item->setAttribute('src', 'http://www.somesite.com/' . $value); 
  }

  foreach ($dom->getElementsByTagName('script') as $item) { 
     $value2 = $item->getAttribute('src'); 
   $item->setAttribute('src', 'http://www.somesite.com/' . $value2); 
  }

  foreach ($dom->getElementsByTagName('a') as $item) { 
     $value4 = $item->getAttribute('href'); 
   $item->setAttribute('href', 'http://www.somesite.com/' . $value4); 
  } 

  $s = $dom->getElementById('searchbox_button'); 
  $value5 = $s->getAttribute('src'); 
$s->setAttribute('src', 'http://www.somesite.com/' . $value5);

$cr = $dom->getElementById('content_right'); 
$cl = $dom->getElementById('content_left'); 
  $fb = $dom->getElementById('siteclock'); 
  $fb->parentNode->removeChild($fb);

  $content = $dom->getElementById('content'); 
  $dom->appendChild($content); 
  $content->removeChild($cr); 
  $content->removeChild($cl);

  foreach ($dom->getElementsByTagName('link') as $item) { 
     $value3 = $item->getAttribute('href'); 
   $item->setAttribute('href', 'http://www.somesite.com/' . $value3); 
  }

  $offers = DataObject::get('AdminOffer');

  $div = $dom->createElement('div'); 
  $div->setAttribute("class", "offerBox"); 
  $div->setAttribute("style", "width: 33.33333%; overflow: hidden; border: 2px solid #80bd01");

  $content->appendChild($div);

  $img = $dom->createElement('img'); 
  $img->setAttribute("src", "http://www.somesite.com/$offers->Photo"); 
  $img->setAttribute("alt", "$offers->Title"); 
  $img->setAttribute("width", "120px"); 
  $img->setAttribute("style", "float: left; margin: 5px;");

  $div->appendChild($img);

  $p = $dom->createElement('p'); 
  $p->setAttribute("style", "float: left; word-wrap:normal; width: auto"); 
  $div->appendChild($p);

  $bTitle = $dom->createElement('b', "Offers->Title");

  $p->appendChild($bTitle);

  $break1 = $dom->createElement('br/'); 
  $p->appendChild($break1);

  $bPrice = $dom->createElement('b', "Offers->Price");

  $p->appendChild($bPrice); 
  $break2 = $dom->createElement('br/'); 
  $p->appendChild($break2);

  $bExpires = $dom->createElement('b', "Offers->Expires");

  $p->appendChild($bExpires);

  $dom->formatOutput = true;

  return $dom->saveHTML(); 
```

但是，当我将它添加到我的页面控制器时，它会告诉我`No DTD given in XML-Document`.

我尝试通过以下方式添加 DTD，但这样做时出现服务器错误。

```
 $dom = DOMImplementation::createDocumentType('html',
             '-//W3C//DTD XHTML 1.1//EN',
             'http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd'); 
```

我猜 SilverStripe 指定了一个 XML DTD，当我调用 validate 方法时，这会导致接收到的 HTML 出错。但是，当我注释掉验证调用时，我收到一个错误，即在收到的 HTML 中未定义命名空间。我发现一篇较早的帖子指定 SilverStripe 模板使用 XML DTD，所以我想知道如何覆盖它？

我会很感激任何建议，如果我不清楚某些事情，请告诉我，我会编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T09:58:31.467

事实证明，问题出在 SilverStripe 的错误报告上。因为我在开发模式下使用它，所以它抛出了实际上并不重要的错误。由于我暂时需要继续在开发模式下工作，因此我必须包含`@`以抑制导致问题的线路上的错误。

**例子**

```
@$dom->loadHTMLFile($url); 
```

我还必须删除我从那以后了解到的验证行无论如何都在完全错误的地方。

我希望这可以帮助别人。

# jquery - jqGrid 对数据类型为 json 的 SelectRow 不起作用

> ID：13682544
> 
> 赞同：2
> 
> 时间：2012-12-03T11:44:07.667
> 
> 标签：jquery, jqgrid, free-jqgrid

数据类型：'json' => loadComplete 事件好！

但是 onSelectRow 事件不行！

数据类型：'local' => loadComplete 事件好！

和 onSelectRow 事件确定！

为什么！？

`jquery-ui-1.9.0.custom.min.css, ui.jqgrid.css, jquery-1.8.2.js, jquery-ui-1.9.0.custom.min.js, jquery.jqGrid-4.4.1/js/jquery.jqGrid.min.js`

……

=================================================

```
jQuery("#list4").jqGrid({
      caption:"Group List",             
      url: "master/grouping/grouplist.jspx",            
      mtype: 'post',
//    datatype: "json",
      datatype: "local",
      colNames:['NUM', 'GROUP ID', 'GROUP NAME', 'DESCRIPTION'], 
      colModel:[                                
         {name:'idx',     index:'idx'},                         
         {name:'groupId', index:'groupId'},
         {name:'groupName', index:'groupName'},             
        ,{name:'groupDesc', index:'groupDesc'}                          
      ]                             
    rowNum:10,                          
    rowList:[10,20,30],
    sortname:'idx',                             
    sortorder: "ASC",                   
    onSelectRow: function(rowid, status, e) {
               alert("please do work... !!! " + rowid + "/" + status);
               // datatype is local => work~!
               // datatype is json => dose not work !@@
    }

});
    var mydata = [
        {idx:"1",groupId:"2007-10-01",groupName:"test",groupDesc:"note"},
        {idx:"2",groupId:"2007-10-01",groupName:"test",groupDesc:"note"},
        {idx:"3",groupId:"2007-10-01",groupName:"test",groupDesc:"note"},
        {idx:"4",groupId:"2007-10-01",groupName:"test",groupDesc:"note"},
        {idx:"5",groupId:"2007-10-01",groupName:"test",groupDesc:"note"},
        {idx:"6",groupId:"2007-10-01",groupName:"test",groupDesc:"note"},
                    ];
for(var i=0;i<=mydata.length;i++){
       // jQuery("#list4").jqGrid('addRowData',i+1,mydata[i]);     // do work.  just datatype:local 
    } 
```

# javascript - javascript - counting chracters from textarea doesnt work

> ID：13682548
> 
> 赞同：0
> 
> 时间：2012-12-03T11:44:25.137
> 
> 标签：javascript

So i have this page: [http://www.prxa.info/index.php?module=articles&view=Submit](http://www.prxa.info/index.php?module=articles&view=Submit)

Using jquery and code i am trying found here: [https://stackoverflow.com/a/13516186/1741251](https://stackoverflow.com/a/13516186/1741251)

I am trying to do a twitter like character count for the first textarea counting down from 255 but it doesn't seem to work for me?

I have basically no experience with javascript :(

This is the code I am using to count it:

```
<script type="text/javascript">
$(document).ready(function () {
    $('#tagline').keypress(function (event) {
        var max = 255;
        var len = $(this).val().length;
        if (event.which < 0x20) {
            // e.which < 0x20, then it's not a printable character
            // e.which === 0 - Not a character
            return;     // Do nothing
        }
        if (len >= max) {
            event.preventDefault();           
        }            

    });
    $('#tagline').keyup(function (event) {
        var max = 250;
        var len = $(this).val().length;       
        var char = max - len;
        $('#textleft').text(char + ' characters left');

     }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:48:07.840

像这样的东西

```
$('#inputBox').keyup(function (event) {
    var len = $(this).val().length;
    $('#holder').text(len );
}); 
```

# sql - SSIS - 除了脚本任务之外的任何其他解决方案

> ID：13682553
> 
> 赞同：4
> 
> 时间：2012-12-03T11:44:34.590
> 
> 标签：sql, sql-server, ssis

团队，

我的目标是使用 SSIS 将数据从 Excel 加载到 Sql 表。然而，excel 是非常动态的，即它们的列数可能会发生变化，或者现有列的顺序可能会发生变化。但目标表将是相同的......

所以我正在考虑几个选项，例如：
1）在“Excel源”中使用SQL命令-但不幸的是我必须将“第一行作为标题”设置为false（为了解决Excel Connection Mngr将数据类型感知为基于数字的问题在最初的几条记录中）。所以基于标题的查询在这里不起作用。

2）我脑海中的另一个选项是脚本任务，并根据我知道的列编写 C# 代码来读取 excel。所以在这种情况下，新列的顺序和插入/删除无关紧要。

建议我脚本任务是否是我唯一可用的选项？在SSIS中实现同样的任何其他简单方法？另外，如果可能的话，建议我提供相同的参考。

谢谢，贾斯汀塞缪尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:35:12.503

如果您需要自动化该过程，那么我肯定会使用脚本组件/OleDbDataAdapter 组合（您不能使用流式阅读器，因为 Excel 是专有格式）。如果没有，请使用导入向导。

如果您尝试使用基于连接管理器的解决方案，则当文件布局更改时它将失败。使用脚本组件/OleDbDataAdapter 组合，您可以添加逻辑来解释字段并在加载前标准化记录布局。您还可以创建一个错误缓冲区并使用 Try / Catch 优雅地将错误值推送到它。

下面是一些关于如何在数据流任务中使用脚本组件作为源的链接：

[http://microsoft-ssis.blogspot.com/2011/02/script-component-as-source-2.html](http://microsoft-ssis.blogspot.com/2011/02/script-component-as-source-2.html) [http://beyondrelational.com/modules/2/blogs/106/posts/11126/ssis-script -component-split-single-row-to-multiple-rows.aspx](http://beyondrelational.com/modules/2/blogs/106/posts/11126/ssis-script-component-split-single-row-to-multiple-rows.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:37:01.717

这可以使用 SQL Server 提供的“导入和导出数据”工具轻松完成。

**第 1 步：**将 Excel 指定为源，将 SQL Server DB 指定为目标。

**第 2 步：**提供必要的映射。

**步骤： 3**在最后一个屏幕中，您可以指定“另存为 SSIS 包”和文件系统。将为您创建一个相关的 dtsx SSIS 包。

在 SQL Server 导入和导出向导创建包并复制数据后，您可以使用 SSIS 设计器通过添加任务、转换和事件驱动逻辑来打开和更改保存的包。

（因为它基于 Header 工作，所以顺序应该无关紧要。如果缺少特定列，它应该自动取 NULL）

参考：http: [//msdn.microsoft.com/en-us/library/ms140052.aspx](http://msdn.microsoft.com/en-us/library/ms140052.aspx)

# php - PHP Query 在数据库中有不同的结果

> ID：13682554
> 
> 赞同：0
> 
> 时间：2012-12-03T11:44:39.093
> 
> 标签：php, mysql

当我尝试使用 PHP 向我的数据库插入数据时，回显查询，它回显可以插入的查询（我直接使用 PHPMyadmin 插入数据没有问题）。但它仍然给我一些使用 php 的错误，所以我删除了数据库上的关系并再次尝试，然后我看到了问题所在，但我不明白是什么原因造成的。

**问题**

我的代码：

```
echo "<b>mysql_query(\"INSERT INTO EncomendaCab(utilizador_id,data_encomenda,data_vencimento, envio_id, pagamento_id, total,obs) VALUES('$cliente_id','$data_e','$data_v', '$envio_id', '$pagamento_id','$total','$obs')\");</b>";

    mysql_query("INSERT INTO EncomendaCab(utilizador_id,data_encomenda,data_vencimento, envio_id, pagamento_id, total,obs) VALUES('$cliente_id','$data_e','$data_v', '$envio_id', 'pagamento_id','$total','$obs')") or die(mysql_error()); 
```

我的回声：

"mysql_query("INSERT INTO EncomendaCab(utilizador_id,data_encomenda,data_vencimento, envio_id, pagamento_id, total,obs) VALUES('1','2012-12-03 11:13:08','2013-01-03 11:13 :08', '1', '1','2400','Observações')");"

我插入的内容：

```
+++++++++++++++
+EncomendaCab +
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
|utilizador_id |   data_encomenda  |  data_vencimento  | envio_id | pagamento_id | total | obs |
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
|      1       |2012-12-03 11:13:08|2013-01-03 11:13:08|    1     |       1      |  2400 |Observações|
++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ 
```

所以这是一个电子商务网站，它将接收订单并获得付款或通过贝宝，或邮政服务或直接在实体店，你是葡萄牙语的字段，所以我在下面翻译和解释它们（有些可能是直截了当的，有些可能不是那么容易）：

utilizador_id:( **int** )这是用户ID，它是用户表的键。

data_encomenda (order_date)( **datetime** )：这是客户（用户）提交确认订单的表单时的日期时间。

data_vencimento( **datetime** )：这相当于到期日期，它是来自“我的客户”的请求

envio_id( **int** )：这是店家客户可以选择的发货方式（可以要求寄到自己家，也可以到实体店取货）；

pagamento_id( **int** )：这是存储客户可以选择的付款之王（paypal、支票、邮政服务等）的表，也是问题所在，在回显查询中，它回显了 1 或其他数字选择表单中的元素（女巫正在从数据库中获取值），但是当提交到数据库时它被替换为 0，并导致“外键约束失败”错误。我不明白为什么...

total(float)：这存储要在后端显示的订单总数，

obs( **varchar(500)** )：这是人们可以要求的观察字段（例如：“在盒子上画一只独角兽”）。

感谢您的时间...

编辑：

我忘记了数据类型，但已经添加了它们......

错误消息是外键约束失败，但我删除了表 pagamento 上的关系，现在它插入一个零，这意味着（AFAIK）插入的数据无效，但如果它正在回显一个整数，为什么它不接受它，执行 mysql_query() 时的某个地方，该变量被“损坏”，我不明白在哪里或为什么......

它由可能很重要的表单中的 $_POST 给出...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:01:13.123

```
mysql_query("INSERT INTO EncomendaCab(utilizador_id,data_encomenda,data_vencimento, envio_id, pagamento_id, total,obs) VALUES('$cliente_id','$data_e','$data_v', '$envio_id', 'pagamento_id','$total','$obs')") or die(mysql_error()); 
```

pagamento_id 是问题，因为它不是 php 变量。

```
mysql_query("INSERT INTO EncomendaCab(utilizador_id,data_encomenda,data_vencimento, envio_id, pagamento_id, total,obs) VALUES('$cliente_id','$data_e','$data_v', '$envio_id', '$pagamento_id','$total','$obs')") or die(mysql_error()); 
```

# css - How to use custom widgets in wordpress

> ID：13682556
> 
> 赞同：0
> 
> 时间：2012-12-03T11:44:48.173
> 
> 标签：css, wordpress, wordpress-theming

I am just newbie to the wordpress. Now I am doing developing a theme as a child theme of twentyeleven. Now when I am doing customization to my widgets style as per my required style. But in my reference style I can see there are different styles widgets. Its easy to to one single type widget in a sidebar and using the css. Now I have three different types of widget style. Here with I am attaching the images of the widgets. So can someone tell me how to use different types of widget in a single page? Any help and suggestion will be highly appreciable.

![enter image description here](../Images/9a39af491d260407a784f8251100426a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:19:41.640

我建议您必须注册才能创建新的三个不同的侧边栏。因为 WordPress 没有在一个侧边栏中提供多个 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T11:56:52.003

```
put in child theme function file 
    "<?php

add_action( 'widgets_init', 'my_register_sidebars' );

function my_register_sidebars() {

    register_sidebar(
        array(
            'id' => 'primary',
            'name' => __( 'Primary' ),
            'description' => __( 'A short description of the sidebar.' ),
            'before_widget' => '<div id="%1$s" class="widget %2$s">',
            'after_widget' => '</div>',
            'before_title' => '<h3 class="widget-title">',
            'after_title' => '</h3>'
        )
    );

}

?>"

put in sidebar.php 
<?php dynamic_sidebar( 'primary' ); ?> 
```

# html - 行高 img alt 标签

> ID：13682566
> 
> 赞同：-1
> 
> 时间：2012-12-03T11:45:08.267
> 
> 标签：html, css

我正在尝试设置图像 src-attribute 的 line-height 样式，但失败了。似乎无法用css控制行高？

```
img {
    font-size: 10px;
    color: red;
    line-height:10px;
} 
```

请在 jsfiddle 上查看此示例：http: [//jsfiddle.net/nerdess/qvLw2/2/](http://jsfiddle.net/nerdess/qvLw2/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:51:46.767

line-height 不会影响图像您可以寻找不同的解决方法阅读此： [http](http://api.jquery.com/error/) ://api.jquery.com/error/ - 使用 jquery

# facebook - Publishing on my Facebook fan page

> ID：13682568
> 
> 赞同：0
> 
> 时间：2012-12-03T11:45:09.797
> 
> 标签：facebook, feed, publish, facebook-page

I'm developing an ios(6) app that publish on Facebook. I can publish on my wall, but I cannot publish on my fan page. Seems that the problem is on the authorization that my facebook app should have on my fan page, but I don't understand where give this authorization!

I've changed the parameter of destination of feed from "me/feed" to `/<PAGE_ID>/feed` but without results.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:01:11.747

您必须获得`manage_pages`用户的许可。获得许可后，您可以使用`/<PAGE_ID>/feed`端点将提要发布到用户管理的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-10T06:54:25.340

确认您已在“extended_permissions”部分检查了“publish_stream”和“manage pages”权限。

使用[facebook graph api explorer](https://developers.facebook.com/tools/explorer/)检查你的代码

# edi - 重复片段的顺序

> ID：13682570
> 
> 赞同：0
> 
> 时间：2012-12-03T11:45:15.870
> 
> 标签：edi, x12

重复片段的顺序`EDI`很重要。例如，如果实施指南建议`DTP`带有 Date/Time Qualifier`401`的段后面跟着`DTP`带有 Qualifier的段`404`，那么这些段是否必须按该顺序排列？或者以相反的顺序排列它们是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:25:07.670

DTP 段可以按任何顺序排列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T21:03:42.970

订单应该无关紧要，除非贸易伙伴期待某个订单（他们不应该，但我已经看到贸易伙伴将在哪里寻找第一段而不是寻找限定符。）

# javascript - grunt.js (a node.js build tool) is not creating directories or files. is it permission related?

> ID：13682571
> 
> 赞同：1
> 
> 时间：2012-12-03T11:45:20.237
> 
> 标签：javascript, macos, node.js, permissions, gruntjs

We are using grunt.js as a build tool.

On one of our development machines (MacOS Mountain Lion), grunt is running but does not seem to create any files and directories.

Another thing which was different on that specific machine is that when we used the NPM to install some plugins for grunt we had to use `sudo npm`, otherwise we had permission errors.

We've checked the permissions on the parent directory and tried different things - nothing seemed to work. NodeJs still does not create any files or directories.

Any ideas?

UPDATE:

Apparently the html-compressor grunt plugin requires grunt 1.4 as a dependency.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:18:55.637

听起来很像权限问题。导航到有问题的目录，然后 `ls -l`在终端中尝试。应该看起来像这样：

![权限示例](../Images/639a6d2743c6a727a23ec8377edd7a1d.png)

如果您的目录没有类似的权限，请将其更改为，例如`chmod 775 mydir`. `sudo`需要时使用。

# dhtmlx - 当表格转换为 DhtmlxGrid 时，冻结 dhtmlxgrid 中的列不起作用

> ID：13682573
> 
> 赞同：0
> 
> 时间：2012-12-03T11:45:22.387
> 
> 标签：dhtmlx

我将表格转换为 DhtmlxGrid 但在应用冻结时对我不起作用。请就此提出建议

```
 <table imgpath="../codebase/imgs/" style="width:400px" id="gridTable" name="gridTable" onbeforeinit="initGrid()">
    ...
    </table>

    <script>

    table = new dhtmlXGridFromTable("gridTable");

    function initGrid(){

    gridTable.splitAt(10);

    }

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T23:57:33.577

问题是 grid.splitAt() 需要在网格初始化后调用。

# asp.net - How to freeze a radio button list at selected radio button in asp.net?

> ID：13682576
> 
> 赞同：0
> 
> 时间：2012-12-03T11:45:36.007
> 
> 标签：asp.net, radio-button, freeze

How to freeze a radio button list at selected radio button in ASP.net? My code has a radio button list like:

*   MyPlayer
*   MyABC
*   MyNum
*   MyD
*   MyK
*   MyM
*   MyC
*   MyU
*   MyY
*   MyPop
*   MyCost
*   MyLast
*   MyCo
*   MyName
*   MyID
*   MyCust
*   MyStudent
*   MyOffice
*   MyVehicle
*   MyVoucher

These are all in a scrollbar Radio Button List which is fixed upto some height that only top few is visible after page load or refresh. I want to freeze it wherever the selected radio button is, so that user don't have to scroll down to see what he has selected in case he selects the last options of the list.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:24:01.710

尝试这个 ：

```
ListItem selectedItem = radioButtonList.SelectedItem;
selectedItem.Attributes.Add("onload", "this.focus();"); 
```

# javascript - 试图添加一个多源视频播放器而不是一个视频？

> ID：13682586
> 
> 赞同：0
> 
> 时间：2012-12-03T11:46:12.920
> 
> 标签：javascript, html, video, html5-video

> 我试图让视频播放器在所有浏览器中工作。有不止一个视频，每次您单击演示卷轴时，它都会播放视频，如果您单击视频 1，则会播放另一个视频。我怎样才能让它们都在所有浏览器中工作？这是我的 html 和 javascript
> 
> html

```
<video id="myVideo" controls autoplay></video>
    <div>
        <a href="#" onClick="changeVid1();">Demo Reel</a></div>
    <a href="#" onClick="changeVid2();">video 1</a></div>

    </div> 
```

> javascript

```
function changeVid1() {
    var changeStuff = document.getElementById("myVideo");
     changeStuff.src = "video/demoreel.mp4"

}

function changeVid2() {
    var changeStuff = document.getElementById("myVideo");
     changeStuff.src = "video/video1.mp4";

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T20:42:36.360

切换视频源后，您需要对其运行`.load()`以强制其加载新文件。此外，您需要提供多种格式，因为没有所有浏览器都支持的视频编解码器。

首先，像这样设置您的来源：

```
var sources = [
    {
        'mp4': 'http://video-js.zencoder.com/oceans-clip.mp4',
        'webm':'http://video-js.zencoder.com/oceans-clip.webm',
        'ogg':'http://video-js.zencoder.com/oceans-clip.ogv'
    }
    // as many as you need...
]; 
```

然后，您的 switch 函数应如下所示：

```
function switchVideo(index) {
    var s = sources[index], source, i;
    video.innerHTML = '';
    for (i in s) {
        source = document.createElement('source');
        source.src = s[i];
        source.setAttribute('type', 'video/' + i);
        video.appendChild(source);
    }
    video.load();
    video.play(); //optional
} 
```

[在此处查看工作演示。](http://jsfiddle.net/aa8yF/1/)

这为浏览器提供了可供尝试的不同格式的列表。它将遍历每个 URL，直到找到它喜欢的一个。在每个源元素上设置“类型”属性会提前告诉浏览器它是什么类型的视频，这样它就可以跳过它不支持的视频。否则，它必须访问服务器以检索标头并确定它是什么类型的文件。

只要您提供 ogg/theora 文件，这应该可以在 Firefox 回到 3.5 中工作。它可以在 iPad 上运行，因为页面上一次只有一个视频元素。但是，只有在用户至少手动单击一次播放后，自动播放才会起作用。

对于不支持 html5 视频的旧版浏览器，您可以在源标记之后为视频元素附加 Flash 后备，以获得额外的功劳。（即，IE < 9 - 尽管您需要使用 jQuery 或其他 shim 来替换`addEventListener`.）

# java - 用于交互式绘图的 GWTCanvas 或 gwt-graphics？

> ID：13682597
> 
> 赞同：0
> 
> 时间：2012-12-03T11:46:50.823
> 
> 标签：java, gwt, java-canvas

我想开发一个应用程序，用户应该能够绘制对象（圆圈/椭圆），通过线/箭头连接它们并拖放它们，向它们添加文本等。当然我还必须编写 eventHandling。

什么最适合它？您更愿意选择 gwt-graphics 还是 GWTCanvas？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:40:23.047

我个人会选择 gwt-graphics。这是我更了解的一种，它可以根据我的需要（我认为你也是）对图形进行尽可能多的控制，并且大多数事件已经实现，所以你需要编写的逻辑将是最小的。

另一方面，IExplorer 不能很好地支持 SVG，如果向量变得很多，您将遇到兼容性问题。

如果是 HTML 5，Canvas 将为您提供像素级控制 - 我认为您的项目中并非如此 - 但也会导致 - 没有解决方法 - 这是一种专业的方法。

总之，我认为这取决于您希望用户在使用画布时拥有的控制级别以及您希望自己完成的工作级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:29:25.213

基于我所知道的，GWT-Graphics 是基于 SVG 的。而 GWTCanvas（实际上是 GWT 主线的一部分）基于 canvas 元素。

现在，快速比较。对于所有拖放操作，SVG 更容易和更快（当 o 在我有大量元素时测试拖放时，我基于画布的程序比基于 SVG 的类似程序慢得多

基于 SVG 的库的其他优点是所有浏览器都不支持画布（实际上旧版本的 ie 可能有一些问题）

另一方面，当您需要绘制大量对象时，画布要快得多，画布绝对是您的选择。

# ruby-on-rails - 如何测试我的管理控制器登录页面

> ID：13682599
> 
> 赞同：0
> 
> 时间：2012-12-03T11:46:50.283
> 
> 标签：ruby-on-rails, rspec-rails

我有控制器：

```
def login
  if admin_logged_in?
    flash[:notice]="You are already logged in"
    redirect_to( "/admin/")
  else
    render(:layout => "admin")
  end
end 
```

我的 RSpec 测试用例

```
require 'spec_helper'

describe "AdminController" do
before (:each) do
    @admin = FactoryGirl.create(:admin)
end

describe "GET 'login'" do
    it "should be successful" do
      get 'login'
      response.should be_success
    end
end
end 
```

当我要执行我的测试用例时出现错误：

```
 1) AdminController GET 'login' should be successful
     Failure/Error: get 'login'
     RuntimeError:
       @controller is nil: make sure you set it in your test's setup method.
     # ./spec/controllers/admin_controller_spec.rb:10:in `block (3 levels) in <top (required)>'

Finished in 0.18799 seconds
1 example, 1 failure

Failed examples:

rspec ./spec/controllers/admin_controller_spec.rb:9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T23:05:16.893

`"AdminController"`在您的测试中，我将替换to的 describe 块`AdminController`。您的测试现在应该如下所示...

```
require 'spec_helper'

describe AdminController do
before (:each) do
  @admin = FactoryGirl.create(:admin)
end

describe "GET 'login'" do
  it "should be successful" do
    get 'login'
    response.should be_success
  end
end
end 
```

说明：因为您在括号中写了 AdminController，所以 rspec 无法判断您正在测试哪个控制器。

# python - 将 numpy 图像数组切片成块

> ID：13682604
> 
> 赞同：4
> 
> 时间：2012-12-03T11:46:58.363
> 
> 标签：python, image-processing, numpy, computer-vision

我正在使用 python 进行对象检测的图像处理。我需要将我的图像分成所有可能的块。例如给定这个玩具图像：

```
x = np.arange(25)
x = x.reshape((5, 5))

[[ 0  1  2  3  4]
 [ 5  6  7  8  9]
 [10 11 12 13 14]
 [15 16 17 18 19]
 [20 21 22 23 24]] 
```

我想检索给定大小的所有可能块，例如 2x2 块是：

```
[[0 1]
 [5 6]]
[[1 2]
 [6 7]] 
```

.. 等等。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-03T15:54:19.470

scikit 图像[extract_patches_2d](http://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.image.extract_patches_2d.html)做到了

```
>>> from sklearn.feature_extraction import image
>>> one_image = np.arange(16).reshape((4, 4))
>>> one_image
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [12, 13, 14, 15]])
>>> patches = image.extract_patches_2d(one_image, (2, 2))
>>> print(patches.shape)
(9, 2, 2)
>>> patches[0]
array([[0, 1],
       [4, 5]])
>>> patches[1]
array([[1, 2],
       [5, 6]])
>>> patches[8]
array([[10, 11],
       [14, 15]]) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T12:08:15.063

你可以使用这样的东西：

```
def rolling_window(arr, window):
    """Very basic multi dimensional rolling window. window should be the shape of
    of the desired subarrays. Window is either a scalar or a tuple of same size
    as `arr.shape`.
    """
    shape = np.array(arr.shape*2)
    strides = np.array(arr.strides*2)
    window = np.asarray(window)
    shape[arr.ndim:] = window # new dimensions size
    shape[:arr.ndim] -= window - 1
    if np.any(shape < 1):
        raise ValueError('window size is too large')
    return np.lib.stride_tricks.as_strided(arr, shape=shape, strides=strides)

# Now:
slices = rolling_window(arr, 2)
# Slices will be 4-d not 3-d as you wanted. You can reshape
# but it may need to copy (not if you have done no slicing, etc. with the array):
slices = slices.reshape(-1,slices.shape[2:]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:12:40.907

带有双循环和切片的简单代码：

```
>>> a = np.arange(12).reshape(3,4)
>>> print(a)
[[ 0  1  2  3]
 [ 4  5  6  7]
 [ 8  9 10 11]]
>>> r = 2
>>> n_rows, n_cols = a.shape
>>> for row in range(n_rows - r + 1):
...     for col in range(n_cols - r + 1):
...         print(a[row:row + r, col:col + r])
...
[[0 1]
 [4 5]]
[[1 2]
 [5 6]]
[[2 3]
 [6 7]]
[[4 5]
 [8 9]]
[[ 5  6]
 [ 9 10]]
[[ 6  7]
 [10 11]] 
```

# java - 包含不在 .dex 文件中的 Java 库

> ID：13682607
> 
> 赞同：3
> 
> 时间：2012-12-03T11:47:12.623
> 
> 标签：java, android, apk, dex

我对在我的 android 应用程序中使用 lgpl 库有一些疑问：

1.  是否可以在我的 apk 中的其他任何地方拥有该库 - 而不是在 .dex 文件中？
2.  如果我在同一个项目中创建服务，该服务是否在 .dex 文件中？
3.  android 应用程序可以在 apk 中包含多个 .dex 文件吗？
4.  有没有办法在安装过程中自动安装另一个 apk（无需询问用户/无需先搜索）？

谢谢，弗洛里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-15T13:56:39.257

如果您不使用 Proguard 隐藏 LGPL 库，最终用户可以将您的 apk 转换为 jar，提取 jar，替换 LGPL 库类，重新打包 jar，使用用户生成的密钥对其进行签名，将 jar 转换为 apk，然后安装新的apk 到 Android 设备。 ~~[droidtext 项目有这个过程的解释页面。](http://code.google.com/p/droidtext/wiki/LGPLCompliance "来自 droidtext 的 LGPLCompliance wiki 页面")~~这样做很令人困惑，所以 Quinn Bailey 的回答仍然更好。

**编辑：**我引用的 wiki 页面已失效，因为 droidtext 项目[因许可问题而关闭。](https://stackoverflow.com/questions/20603137/what-happened-to-droidtext "DroidText 发生了什么？")如果您有 wiki 页面的本地副本，我将不胜感激。以下是我能记住的重要步骤列表：

1.  开发人员应该编辑他们的 Proguard 配置文件，以防止整个 LGPL 库包被遮挡。（[如何阻止 proguard 混淆整个包？](https://stackoverflow.com/questions/7593397/how-to-stop-proguard-from-obfuscating-entire-package "如何阻止proguard混淆整个包？")）

2.  [用户可以使用apktool](http://code.google.com/p/android-apktool/ "安卓apktool")和[dex2jar](http://code.google.com/p/dex2jar/ "dex2jar")等工具对 apk 及其内容进行解包、修改和重新打包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T01:26:23.193

无论法律地位如何（IANAL），我都看不到您可以在技术上实现这一目标的场景。

据我了解，android 应用程序中使用的 Java 库必须同时提供给 dx 编译器*和*apkbuilder，以便消除 #1。dx 的输入还包括您编译的aidl 源代码，因此在#2 上是“是”。接下来，我相信在一个 android 应用程序中只能有一个 classes.dex 文件，所以#3 出来了。不确定#4（根据 Matt Wolfe 的评论，这也是否定的）。希望这有助于澄清事情，祝你好运......

参考： [http ://www.alittlemadness.com/2010/06/07/understanding-the-android-build-process/](http://www.alittlemadness.com/2010/06/07/understanding-the-android-build-process/)

# php - 数据库表更新不起作用？

> ID：13682609
> 
> 赞同：1
> 
> 时间：2012-12-03T11:47:16.383
> 
> 标签：php, mysql, sql

我正在尝试更新表格（账单），字段（选中），如果用户选中复选框，则字段（选中）将为**1**

**第1页：detail.php**

```
while($row = mysql_fetch_array($results))
{
   $ch=$row['checked'] ;
   $idw=$row['key'];
} 
```

然后我检查用户之前是否检查过这一行，如果没有，我发送 key&checked 以执行检查过程：

```
if ($ch==1)
{
   echo "this record has been checked";
}
else 
{
   echo "<form action=\"checked.php\" method=\"GET\"  enctype=\"multipart/form-data\"     >";
   echo "<input type=\"hidden\" name=\"ids\" value=\"$idw\" ><br>";
   echo "<input type=\"checkbox\" name=\"check\" value=\"checked\" ><br>";
   echo "<p><input name=\"submit\" type=\"submit\" value=\"submit\"  /></p>";
   echo "</form>";
} 
```

**page2：checked.php**

```
$idw=$_GET['ids'];
$check=$_GET['check'];
$sql="UPDATE bill SET checked=1 where key=$idw";
$results=mysql_query($sql);
if ($results)
{
     echo "the record has been updated successfully";
} 
```

更新失效了，求大神帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:11:16.487

如果它为你工作，试试这个

```
 WHERE key='".$idw."' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:39:02.683

您在此查询的 SQL 语句中缺少分号：

```
$sql="UPDATE bill SET checked=1 where key=$idw;";
               // Notice this semicolon here -^ 
```

此外，如果`key`是非数字列，则需要在 周围加上引号`$idw`：

```
$sql="UPDATE bill SET checked=1 where key='$idw';"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:49:29.450

您的查询尝试中有错误，请更改此：

```
$sql="UPDATE bill SET checked=1 key=$idw"; 
```

有了这个：

```
$sql="UPDATE bill SET checked=1 WHERE key=$idw"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T11:49:36.253

您的更新声明应为：

```
$sql="UPDATE bill SET checked=1 where key=$idw"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T05:38:39.770

我放了一个字段（num）而不是（键“PK”），然后更新完成。但我现在仍然不明白为什么更新没有发生取决于 PK

谢谢你们。

# mysql - MySql如何防止重复进入数据库

> ID：13682612
> 
> 赞同：1
> 
> 时间：2012-12-03T11:47:20.687
> 
> 标签：mysql

> **可能重复：**
> [避免重复进入 mysql 数据库的最佳方法](https://stackoverflow.com/questions/2219786/best-way-to-avoid-duplicate-entry-into-mysql-database)

如果用户表中已经存在同名用户，这是我添加用户并拒绝他们的查询：

```
insert into  user values(?, ?, ?, ? ) select * from user 
where NOT EXISTS(select * from user where user.username = ?); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:02:57.717

我猜您的意思是相同的用户名，因为名称可以相同。

所以试试用这个看看

```
 INSERT INTO  user (column1, column2, column3,...)
     VALUES  (value1, value2, value3,...)
     WHERE NOT EXISTS(
     SELECT username FROM user) 
```

如果您的意思是名称，只需将名称替换为用户名

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:48:53.140

只需使用`INSERT IGNORE`. 如果唯一列中有重复项，则不会发生任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:48:53.770

如果它应该是唯一的，为什么不将用户名定义为主键？

# cakephp - Cakephp html 带有图像+文本的链接，不使用 css

> ID：13682616
> 
> 赞同：0
> 
> 时间：2012-12-03T11:47:57.257
> 
> 标签：cakephp

如何使用 cakephp Html 助手创建包含文本和图像的 html 链接，如下所示

```
<a href="#">
    <img src="images/icons/web-app/48/add-user.png" width="48" height="48"> Add User
</a> 
```

我希望最终结果为

![在此处输入图像描述](../Images/f1bd951a768204cfdfebc1cbe7bdb27a.png)

我知道我可以用 css 做到这一点，但我只想知道如何使用 cakephp

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T13:20:12.797

```
echo $this->Html->link($this->Html->image('design/unige_logo.png', array('width' => '48', 'height' => '48')) . ' ' . __('Add user'),
                       '#',
                       array('escape' => false)); 
```

# jaxb - wsgen 无法忽略 JAXB 注释

> ID：13682619
> 
> 赞同：1
> 
> 时间：2012-12-03T11:48:09.447
> 
> 标签：jaxb, annotations, wsdl, wsgen

我一直在使用 Metro 并遇到了一个问题，即 wsgen 似乎忽略了我在 Web 方法响应类上放置的任何 JAXB 注释。

我正在尝试返回一组我想通过 Web 服务向外部客户端公开的实体类，但是我只想使某些类属性和方法对外部客户端可见，因此已将类访问类型设置为 PROPERTY ，并用@XmlElement 注释了我想成为该类的XML 版本的一部分的所有属性。

我可以使用 schemagen ant 任务为实体类创建 XML 模式，该任务正确地忽略了我没有使用 @XmlElement 注释的任何属性或方法，但是当我运行 wsgen 为具有方法的 Web 服务创建 wsdl 时返回一组实体类，然后我得到一个 java.lang.NoClassDefFoundError。这似乎是因为 wsgen 没有忽略它应该执行的实体类上的公共方法，异常引用的类是该方法的参数。

我尝试使用 @XmlTransient 注释该方法，以便 wsgen 忽略它，但无济于事。如果有人能建议我应该做些什么来让 wsgen 关注我的注释，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:55:23.043

无论访问器类型如何，都将始终处理带注释的字段/属性。您需要指定`@XmlAccessorType(XmlAccessType.NONE)`是否只希望将带注释的字段/属性视为映射。

**了解更多信息**

*   [http://blog.bdoughan.com/2012/04/jaxb-and-unmapped-properties.html](http://blog.bdoughan.com/2012/04/jaxb-and-unmapped-properties.html)

# android - 如何根据 Android 中的实际屏幕尺寸在视图中放置对象？

> ID：13682620
> 
> 赞同：2
> 
> 时间：2012-12-03T11:48:08.467
> 
> 标签：android, android-layout, screen-size

假设我`Activity`的根布局中有背景。我希望在屏幕上放置一些按钮，这些按钮始终相对于屏幕位于同一位置。我怎样才能做到这一点？

我尝试使用`dp`，`sp`但如果我在另一个屏幕上测试布局，一切都会崩溃。（所以，如果它在**WVGA中没问题，它在****QVGA**中不起作用。我做错了什么吗？

这是我的布局 xml：

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="@drawable/menu_activity_bg" >
        <Button
            android:id="@+id/continueButton"
            android:layout_width="110sp"
            android:layout_height="30sp"
            android:layout_marginLeft="100sp"
            android:layout_marginTop="180sp"
            android:background="@drawable/menu_activity_continue" />
        <Button
            android:id="@+id/newGameButton"
            android:layout_width="130sp"
            android:layout_height="35dp"
            android:layout_marginLeft="90sp"
            android:layout_marginTop="220sp"
            android:background="@drawable/menu_activity_new_game" />
            <!-- ... -->
    </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T11:54:55.870

我对此的解决方案是拥有多种样式类型，我将它们放在 values-large、values-small、values-normal 和 values-xlarge 文件夹中。一个典型的条目将如下所示：

```
<resources>
<style name="bigText">
    <item name="android:textSize">60dp</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_width">wrap_content</item>
    <item name="android:layout_marginTop">5dp</item>
    <item name="android:layout_marginBottom">5dp</item>
    <item name="android:textColor">#000000</item>
</style>
</resources> 
```

然后我的布局 XML 看起来像：

```
<TextView
    android:id="@+id/somTextValue"
    style="@style/bigText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/someText" /> 
```

Having a number of these styles, I apply them to my objects that need to scale. Trial and error will allow me to find something that works well for all screen sizes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:07:30.463

I have one another 2 approaches:

1.  Use layout weight to your view so that it will take space accordingly

2.  Use of `DisplayMetrics metrics = new DisplayMetrics(); getWindowManager().getDefaultDisplay().getMetrics(metrics); int height = metrics.heightPixels; int wwidth = metrics.widthPixels;` This will give you width & height of screen then while creating give measurement in percentage e.g. 20% of width. It is helpful when you are dynamically creating UI.

# backbone.js - Backbone.js 集合初始化查询

> ID：13682624
> 
> 赞同：0
> 
> 时间：2012-12-03T11:48:16.287
> 
> 标签：backbone.js

我正在学习backbone.js，遇到了有趣的场景。

```
var EmployeeList = Backbone.Collection.extend({
  url: 'http://localhost:80/employee/employee/employeelist'
});

alert('Collection created');

var employeeList = new EmployeeList();
employeeList.on("reset", function(){
  alert(employeeList.length + " item(s) found");
});
employeeList.fetch();

alert(employeeList.length); 
```

我无法理解为什么第二个警报没有正确显示长度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:53:59.990

警报`alert(employeeList.length + " item(s) found")`应该显示正确的长度，因为它是在`reset`填充集合后触发 - 事件之后运行的。

`alert(employeeList.length);`紧随其后的警报`fetch`不应始终为您提供正确的结果，因为`asynchronously`默认情况下会获取集合，因此在触发的 AJAX 调用之后立即处理警报`fetch`并且可能尚未返回。

时间线是这样的

1.  Fetch 触发 ajax 调用`'http://localhost:80/employee/employee/employeelist'`
2.  `alert(employeeList.length);`被调用，但集合为空
3.  Fetch 返回最终触发一个`reset`
4.  `alert(employeeList.length + " item(s) found");`叫做

# python - 在名称中使用字符串和迭代索引的 Python 中的 savefig

> ID：13682628
> 
> 赞同：8
> 
> 时间：2012-12-03T11:48:22.747
> 
> 标签：python, image, indexing, save, figure

我需要使用 Python 中的“savefig”来保存 while 循环的每次迭代的图，并且我希望我给该图的名称包含文字部分和数字部分。这个来自数组或者是与迭代索引相关的数字。我举一个简单的例子：

```
# index.py

from numpy import *
from pylab import *
from matplotlib import *
from matplotlib.pyplot import *
import os

x=arange(0.12,60,0.12).reshape(100,5)
y=sin(x)

i=0

while i<99
  figure()
  a=x[:,i]
  b=y[:,i]
  c=a[0]
  plot(x,y,label='%s%d'%('x=',c))

  savefig(#???#)      #I want the name is: x='a[0]'.png
                      #where 'a[0]' is the value of a[0] 
```

多谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T12:11:23.367

嗯，应该是这样的：

```
savefig(str(a[0])) 
```

这是一个玩具示例。为我工作。

```
import pylab as pl
import numpy as np

# some data
x = np.arange(10)

pl.figure()
pl.plot(x)
pl.savefig('x=' + str(10) + '.png') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-02-18T02:34:50.193

我最近有同样的需求并想出了解决方案。我修改了给定的代码并更正了几个显式错误。

```
from pylab import *
import matplotlib.pyplot as plt

x = arange(0.12, 60, 0.12).reshape(100, 5)
y = sin(x)
i = 0

while i < 99:
    figure()
    a = x[i, :]                   # change each row instead of column
    b = y[i, :]                   

    i += 1                        # make sure to exit the while loop

    flag = 'x=%s' % str(a[0])     # use the first element of list a as the name
    plot(a, b, label=flag)
    plt.savefig("%s.png" % flag) 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-11T22:57:59.493

由于`python 3.6`您可以使用[`f-strings`](https://docs.python.org/3/reference/lexical_analysis.html#formatted-string-literals)动态格式化字符串：

```
import matplotlib.pyplot as plt

for i in range(99):
    plt.figure()
    a = x[:, i]
    b = y[:, i]
    c = a[0]
    plt.plot(a, b, label=f'x={c}')

    plt.savefig(f'x={c}.png') 
```

# visual-c++ - CMake不断崩溃

> ID：13682629
> 
> 赞同：0
> 
> 时间：2012-12-03T11:48:25.037
> 
> 标签：visual-c++, windows-7, cmake

我正在尝试在 Window 7 32 位操作系统上安装 cmake。当我尝试跑步时，它一直在崩溃。安装工作正常。我最初在 Windows XP 上安装并使用它，它运行良好。所以它只会在 Windows 7 上给“我”的问题。很可能，外面的人会有一个想法。谢谢...见下图...

![Cmake粉碎样本](../Images/3a8fec226011491c6c96ac4b063164f4.png)

# c# - 在服务器上存储图片并在数据库中链接它们

> ID：13682630
> 
> 赞同：0
> 
> 时间：2012-12-03T11:48:25.327
> 
> 标签：c#, asp.net, sql-server

有人可以解释一下如何将图像存储在服务器上，然后将 url 插入数据库中。

我在互联网上找到的所有内容都是关于哪个更好的讨论 - 将 url 或图像本身存储为 BLOB。我已经将它们存储为 BLOB，但我认为这不是一个好主意，我想将它们存储在服务器上并将它们链接到数据库中。

我正在使用 asp.net Web 应用程序并拥有一个 mssql 数据库。语言是c#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:02:32.580

您的服务器上必须有目录，例如：

```
~/Uploads/Photos/ 
```

在数据库中你可以有表：

```
Images { ImageId, PathOriginal, PathMediumSize, Thumb } 
```

数据如下：

```
/Uploads/Photos/myImageNameOriginal.png 
```

当您不想显示它时，从数据库中获取它的名称并从 Uploads 目录加载到页面上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:57:27.137

您可以查看这篇文章，解释[使用 ASP.NET 2.0 在数据库或文件系统中存储上传的文件](http://imar.spaanjaars.com/414/storing-uploaded-files-in-a-database-or-in-the-file-system-with-aspnet-20)以及*每种*技术的*优缺点*。

 *还找到了一个有用的链接，在这方面可能对您有所帮助：[Storing Images in DB - Yes or Nay?](https://stackoverflow.com/questions/3748/storing-images-in-db-yea-or-nay)*

# php - 使用 php 的 preg_split 通过分号分解字符串

> ID：13682634
> 
> 赞同：0
> 
> 时间：2012-12-03T11:48:50.277
> 
> 标签：php, regex, string, split, preg-split

我有这个字符串（它是一个苹果 .strings 文件）：

```
/* this is a comment line; it may contain semicolons */
"you have here some text; also may contain semicolons" = "some other text;";

/* this is a comment line; it may contain semicolons */
"you have here some text; also may contain semicolons" = "some other text;"; 
```

等等。

我需要在每个非注释行末尾的分号之后拆分此字符串。

如果我使用`explode(";\n", $string);`可能不准确，因为该行可能以 ;(whitespace)(new line) 结尾

更新：输出应该是一个数组。每个元素都应包含注释行（如果存在）和引用的字符串行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:21:54.237

如果您只关心可选的空格，您可能会相处融洽

```
$array = preg_split("/;\s*\n/", $string); 
```

`preg_split`采用正则表达式，而`explode`采用字符串作为分隔符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:51:46.393

您可能最好简单地逐行读取文件，使用[strpos()](http://php.net/manual/en/function.strpos.php)测试注释字符，并使用[str_getcsv()](http://php.net/manual/en/function.str-getcsv.php)来解析文件行而不是正则表达式

# excel - excel宏搜索网站并提取结果

> ID：13682639
> 
> 赞同：-1
> 
> 时间：2012-12-03T11:49:02.670
> 
> 标签：excel, extract, webpage, vba

我在工作表 1，A1 中有一个值。它可以是企业名称，也可以是与其关联的企业编号（当网站按编号或名称搜索时）。输入需要详细信息的企业名称（或编号）后，我希望能够单击“搜索”按钮并将搜索结果显示在具有 2 列的表格中（例如表 1 , A5:B9)，标签在表的左列，结果在右列。我需要搜索的网站是[http://www.abr.business.gov.au/](http://www.abr.business.gov.au/) 例如。如果我搜索商业编号 31701562618，这些是我得到的结果（以及我需要如何在 excel 中显示：

```
 Column A                       Column B
5   Entity name:                  AMBROSE, BENJAMIN STEPHEN
6   ABN status:                   Active from 05 Apr 2000
7   Entity type:                  Individual/Sole Trader
8   Goods & Services Tax (GST):   Registered from 01 Jul 2000
9   Main business location:       QLD 4310 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-05T20:03:12.807

经过更多的修补，我设法让它工作。这只是在站点中搜索 A1 中的值，获取结果数据并将其放入从 A5 开始的单元格中。没有格式但是很容易在“结束于”位之后包含。

```
Sub URL_Get_ABN_Query()
strSearch = Range("a1")
With ActiveSheet.QueryTables.Add(Connection:="URL;http://www.abr.business.gov.au/SearchByABN.aspx?SearchText=" & strSearch & "&safe=active", _
Destination:=Range("a5"))

.BackgroundQuery = True
.TablesOnlyFromHTML = True
.Refresh BackgroundQuery:=False
.SaveData = True
End With
End Sub 
```

# c# - Azure 上的 Hadoop 示例导致一个空白文件

> ID：13682642
> 
> 赞同：1
> 
> 时间：2012-12-03T11:49:16.517
> 
> 标签：c#, azure, hadoop, hadoop-streaming

Azure C# Streaming Sample Tutorial 上的 Hadoop 我正在尝试这个。我在我的帐户上安装了示例代码，然后当我尝试在我得到的输出之后执行作业时，一天结束时会生成一个空白文件..有时甚至不会生成。以下是我在屏幕上看到的内容： ![第一个屏幕](../Images/823af6d0427eb832b90014298d44beba.png)

有人遇到过这类问题吗？

![第二张图片](../Images/08858a17eb1a2226ced647240a20d6db.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T06:59:45.900

我的集群是在 11 月 29 日创建的。[微软在这个链接](http://social.msdn.microsoft.com/Forums/en-US/hdinsight/thread/28a57efb-082b-424b-8d9e-731b1fe135de)上发布了与 hadoop 相关的 BUG所以我确实重新创建了我的集群，然后我的问题得到了解决。即使是 SAMPLES 中给出的基本示例，那天也不起作用。所以现在一切都很好..非常感谢。

# android - 在android中相机拍摄的imageview照片中显示图片

> ID：13682644
> 
> 赞同：1
> 
> 时间：2012-12-03T11:49:22.587
> 
> 标签：android, android-4.2-jelly-bean

我在使用相机进行 Android 开发时遇到问题。我尝试拍照并将其显示到 imageview 但结果未显示但它适用于 Galaxy Note 但我不适用于 Galaxy S3

我的代码如下

相机活动

```
package com.nfs;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.ImageView;

public class Camera extends Activity {
    private static final int CAMERA_REQUEST = 500;
    private ImageView imageView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_camera);

    this.imageView = (ImageView) findViewById(R.id.imgLoad);
    Button bt = (Button) findViewById(R.id.btCam);

    bt.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
                    Intent intent = new Intent("android.media.action.IMAGE_CAPTURE");
                    startActivityForResult(intent, CAMERA_REQUEST);                         

        }
    });
}

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {
        Bitmap photo = (Bitmap) data.getExtras().get("data");
        imageView.setImageBitmap(photo);
    }
} 
```

}

布局

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/btCam"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Click Here" />

    <ImageView
        android:id="@+id/imgLoad"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.70"
        android:src="@drawable/icon" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:39:48.210

尝试这个：

```
@Override
protected void onActivityResult(int requestCode, int resultCode,
        final Intent imageReturnedIntent) {
    super.onActivityResult(requestCode, resultCode, imageReturnedIntent);

    switch (requestCode) {
    case 1:
        if (resultCode == RESULT_OK) {
            try {
                try {
                    Uri selectedImage = imageReturnedIntent.getData();
                    bmpSelectedImage = getThumbnail(selectedImage);

                    set_img_camera.setImageBitmap(bmpSelectedImage);

                } catch (IOException e) {
                    e.printStackTrace();
                }

            } catch (Exception e) {
                Log.d("image error", e.toString());
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:42:49.007

嗨，试试我的代码，它工作正常。我想这会解决你的问题。链接如下：- [Imp Link](https://stackoverflow.com/questions/13414463/launch-android-camera-intent-and-layout/13414940#13414940)。

# jquery - 未捕获的 SyntaxError：意外的标识符和 eval 替代项

> ID：13682646
> 
> 赞同：0
> 
> 时间：2012-12-03T11:49:31.930
> 
> 标签：jquery, json, eval, web-hosting

我有一个在所有托管环境中都无法正常工作的功能。返回的数据为 JSON 格式。我认为问题出在 eval() 上。我可以为 eval() 使用任何替代方法吗？请帮我调试这个或建议任何替代方法。

**三天来，我一直在为这个错误挠头（它只出现在少数主机上，但在其他主机上运行良好）**

Load.php 中的数据如下

```
while($row=mysqli_fetch_array($sql)){
        $text=$row['mesg'];
        $fro=$row['fro'];
        $tocomr=$row['tocom'];
        $last_msg_id_db=$row_m['maxid'];

        $response=array();

        //$response['msg']=$table;
        $response['msg']=$text;
        $response['last_msg_id_db']=$last_msg_id_db;
        $final_response[]=$response;

    }
          echo json_encode($final_response); 
```

并且数据返回为

```
 [{"msg":"hi<br>","last_msg_id_db":"173"}]
    main.php:96

    main.php:96
   [{"msg":"heloo<br>","last_msg_id_db":"174"}] 
```

jquery函数如下。

```
function chat_com_one(id, name) {
$('#chatcom').show('fast');
(function chatcom_load_one(id, name) {

    $.ajax({
        type:"Post",
        url:"load.php",
        data:{
            tocom:id,
            last_msg_id:last_msg_id
        },

        success:function(data) {

            var json = eval(data);
            $.each(json, function(i, row) {
                $("#commidwin").append(row['msg']);
                last_msg_id = row['last_msg_id_db'];
            });
            setTimeout(chatcom_load_one(id, name), 500);
        },
        error:function(XMLhttprequest, textstatus, errorthrown) {
            alert("error:" + textstatus + "(" + errorthrown + ")");
        }

    });
}(id, name));
} 
```

Chrome的日志中给出了以下错误

```
Uncaught SyntaxError: Unexpected identifier main.php:95
 $.ajax.success main.php:95
fire jquery.min.js:974
self.fireWith jquery.min.js:1082
done jquery.min.js:7788
callback 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T11:53:37.370

请不要使用评估。只需设置您的`dataType`as `json`，jQuery 就会为您解码 JSON。

```
$.ajax({
    type:"POST",
    url:"load.php",
    dataType:"json",
    data:{
        tocom:id,
        last_msg_id:last_msg_id
    },
    success:function(data) {
        var json = data;
        $.each(json, function(i, row) {
            $("#commidwin").append(row['msg']);
            last_msg_id = row['last_msg_id_db'];
        });
        setTimeout(chatcom_load_one(id, name), 500);
    },
    error:function(XMLhttprequest, textstatus, errorthrown) {
        alert("error:" + textstatus + "(" + errorthrown + ")");
    }
}); 
```

# hadoop - 远程使用 Hadoop 集群

> ID：13682647
> 
> 赞同：3
> 
> 时间：2012-12-03T11:49:32.537
> 
> 标签：hadoop, hadoop-plugins

我有一个 Web 应用程序和 1 个远程集群（可以是一个或多个）。这些集群可以在不同的机器上。我想从我的 Web 应用程序执行以下操作：

1 HDFS 操作：-

*   创建新目录
*   从 HDFS（Hadoop 分布式文件系统）中删除文件
*   列出 HDFS 上存在的文件
*   将文件加载到 HDFS
*   卸载文件

2 工作相关行动：-

*   提交地图减少工作
*   查看他们的状态，即完成了多少工作
*   完成工作所花费的时间

我需要一个可以帮助我从 Web 应用程序执行这些任务的工具 - 通过 API、REST 调用等。我假设该工具将在同一台机器上运行（作为 Web 应用程序）并且可以指向特别是远程集群。

虽然作为最后一个选项（*因为可以有多个不同的集群，很难确保每个集群都安装了插件、库等*），但我想知道是否会有一些 Hadoop 库、插件-in 依赖于集群，允许从远程机器访问并执行上述任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:57:50.610

允许您在此处列出的所有内容的最佳框架是[Spring Data - Apache Hadoop](http://www.springsource.org/spring-data/hadoop)。这具有基于 Java Scripting API 的实现来执行以下操作

```
1 HDFS Actions :-

Create New Directory
Remove files from HDFS(Hadoop Distributed File System)
List Files present on HDFS
Load File onto the HDFS
Unload File 
```

以及基于弹簧调度的实现来执行以下操作

```
2 Job Related Actions:-

Submit Map Reduce Jobs
View their status i.e. how much job has comleted
Time taken by the job to finish 
```

# database - 将肥皂网络服务添加到 IIS

> ID：13682651
> 
> 赞同：0
> 
> 时间：2012-12-03T11:49:39.763
> 
> 标签：database, web-services, sql-server-2008, iis, iis-7

我创建了一个 Web 服务，它连接到本地计算机上托管在 SQL Server 2008 R2 中的数据库，并对其进行一些操作。

这是 Web 服务中的连接字符串：

```
conn = new SqlConnection("Data Source=amir-pc\\SQLEXPRESS;User Id=sa;Password=1234; Initial Catalog=Election;Integrated Security=True"); 
```

它运行良好，成功访问数据库并正常运行。

现在我想将此 Web 服务添加到 IIS。

我在 Windows 7 上成功地将它添加到 IIS 中，并且可以从浏览器中运行它。

```
localhost/election_service/service.asmx 
```

但是当我试图调用一个检查连接的函数时，它失败了，我不知道为什么。这是功能：

```
[WebMethod]
    public string Check_conn()
    {
        try
        {
            conn.Open();
            conn.Close();
            return "ok";
        }
        catch 
        {
            return "failed";
        }
    } 
```

我必须做任何修改才能访问数据库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:00:16.857

嗨，您能否提供更多信息，请尝试更改您的代码以了解引发的异常情况。

```
public string dbcheck()
{
    try
    {
        conn.Open();
        conn.Close();
        return "ok";
    }
    catch (Exception ex)
    {

        return ex.Message;

    }
} 
```

嗨，然后..是登录问题：Open IIS Open Application Pool Select your current application pool are you current working（默认为 DefaultAppPool） 转到高级选项，找到身份并更改为（NT AUTHORITY\Network Service）然后你已更改您的应用程序用户，现在您需要将网络服务权限添加到数据库打开 SQlMananger，然后转到节点安全，右键单击和属性转到 NT AUTHORITY\网络服务转到用户映射并添加您要允许的数据库使用权。

# html - 在淘汰赛中禁用文本框

> ID：13682654
> 
> 赞同：0
> 
> 时间：2012-12-03T11:50:14.020
> 
> 标签：html, knockout.js

我有一个如下表：

```
 <tbody data-bind="foreach: tasks">
     <tr>  
       <td>
          <span data-bind="text: goal" />
        </td>
        <td>
           <input type="text" data-bind="value: note , 
                 disable: !($data.isAllowedForMember)" />
        </td>
     </tr>
 </tbody> 
```

我想在 isAllowedForMember = false 时禁用注释文本框。但每次它做笔记禁用（无论是 isAllowedForMember = true 还是 false）。

这是我的视图模型

```
 //viewmodel
 function GoalSheetViewModel() {
 self.tasks = ko.observableArray([]); //tasklist
 self.note = ko.observable();
 self.isAllowedForMember = ko.observable();
 self.IsAllowedToChange = function () {
        $.ajax({ 
            success: function (results) {
                self.isAllowedForMember(results.d);
            },
        })
   };
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:04:43.467

`observable`如果您在以下情况下使用它，您应该打开包装：

```
 <input type="text" data-bind="value: note , disable: !$parent.isAllowedForMember()" /> 
```

下面这篇文章可以帮助你了解一些关于knockout的有用知识：[http ://www.knockmeout.net/2011/06/10-things-to-know-about-knockoutjs-on.html](http://www.knockmeout.net/2011/06/10-things-to-know-about-knockoutjs-on.html)

编辑：

`isAllowedForMember`是父上下文的成员，因此您应该使用`$parent`对象来访问它：

```
<input type="text" data-bind="value: note , disable: !$parent.isAllowedForMember()" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:02:26.660

正如 Artem 所说，您需要解开可观察对象，但更好的是使用带有名称的计算对象来说明业务规则的含义

像

```
this.readonlyMember = ko.computed(function() {
   return this.isAllowedForMember();
}, this); 
```

但是你的模型也有关系问题，因为你得到了

> ReferenceError: isAllowedForMember 未定义

# google-app-engine - OpenID 登录在 Gmail 上下文小工具中不起作用

> ID：13682655
> 
> 赞同：1
> 
> 时间：2012-12-03T11:50:24.597
> 
> 标签：google-app-engine, openid, gmail-contextual-gadgets

我正在尝试使用我的 gmail 小工具设置 SSO，但我被卡住了。貌似即使在弹窗中登录成功，重试获取用户的请求还是找不到用户。

这是我的处理程序：

编辑：更新的代码。请参阅下面答案的评论。

```
# /
class MainPage(BaseHandler):
    def get(self):
        user = users.get_current_user()
        openid = self.request.get('opensocial_viewer_id')
        self.response.headers['Content-Type'] = 'text/plain'
        if user:
            if openid:
                logging.info('Pairing %s with OpenID %s' % (user.email(), openid))
                my_user = MyUser.query(MyUser.openid == openid).get()
                if not my_user:
                    my_user = MyUser(key=ndb.Key('MyUser', user.email()),
                                           email=user.email(),
                                           username=user.email().split('@')[0])
                my_user.openid = openid
                my_user.put()
            self.response.write('Hello, %s! You can close this window.' % user.email())
            return
        self.response.write('Hello, webapp2 World!')

# /openid/get_user
class OpenIdGetUserHandler(webapp2.RequestHandler):
    def get(self):
        self.response.headers['Content-Type'] = 'application/json'
        openid = self.request.get('opensocial_viewer_id')
        user = MyUser.query(MyUser.openid == openid).get()
        if user:
            logging.info('MyUser with OpenID %s found' % openid)
            self.response.out.write(json.dumps({
                'user_exists': True,
                'user_email': user.email
            }))
            return
        logging.info('MyUser with OpenID %s not found. Checking if logged in.' % openid)
        self.response.out.write(json.dumps({
            'user_exists': False,
            'popup': 'https://myapp.appspot.com/openid/sign_in',
            'opensocial_viewer_id': openid
        }))

# /openid/sign_in
class OpenIdSignInHandler(webapp2.RequestHandler):
    def get(self):
        openid = self.request.get('opensocial_viewer_id')
        self.redirect(users.create_login_url(dest_url='/?opensocial_viewer_id=%s' % openid))

# /openid/sign_out
class OpenIdSignOutHandler(webapp2.RequestHandler):
    def get(self):
        self.redirect(users.create_logout_url(dest_url='/')) 
```

和 javscript（[基于本指南](https://developers.google.com/google-apps/marketplace/best_practices#gadget_sso)）：

```
function fetchData() {
  // Hit the server, passing in a signed request (and OpenSocial ID), to see if we know who the user is.
  osapi.http.get({
    'href' : 'https://wmp-sugarcrm-gadget.appspot.com/openid/get_user',
    'format' : 'json',
    'authz' : 'signed'
  }).execute(handleLoadResponse);
}

function handleLoadResponse(data) {
  // User exists, OpenID must have occurred previously.
  if (data.content.user_exists) {
    //document.getElementById('output').innerHTML = 'user exists';
    showOneSection('main');
    console.log('Logged in');
    init();
  // User doesn't exist, need to do OpenID to match user ID to OpenID.
  } else {
    showOneSection('approval')
    var url_root = data.content.popup;
    // Retrieve the domain of the current user. gadgets.util.getUrlParameters()['parent'] returns a value
    // of of the form: http(s)://mail.google.com/mail/domain.com/html for Gmail (other containers are similar).
    // The example below shows a regular expression for use with Gmail. For Calendar, use this regular
    // expression instead: /calendar\/hosted\/([^\/]+)/
    var domain = gadgets.util.getUrlParameters()['parent'].match(/.+\/a\/(.+)\/html/)[1];

    var url = url_root + '?domain=' + domain;
        url += url + '&opensocial_viewer_id=' + encodeURIComponent(data.content.opensocial_viewer_id);

    var button = document.getElementById('personalize');
    button.setAttribute('href', 'javascript:void(0);');
    button.setAttribute('onclick', 'openPopup("' + url + '")');

  }
}

function openPopup(url) {
  var popup = window.open(url, 'OpenID','height=800,width=600');

  // Check every 100 ms if the popup is closed.
  finishedInterval = setInterval(function() {
    // If the popup is closed, we've either finished OpenID, or the user closed it. Verify with the server in case the
    // user closed the popup.
    if (popup.closed) {
      console.log('popup closed');
      osapi.http.get({
        'href' : 'https://myapp.appspot.com/openid/get_user',
        'format' : 'json',
        'authz' : 'signed'
      }).execute(handleLoadResponse);

      clearInterval(finishedInterval);
    }
  }, 100);
}

// Call fetchData() when gadget loads.
gadgets.util.registerOnLoadHandler(fetchData); 
```

到目前为止，弹出窗口启动，然后我登录，然后重定向到我的应用程序主页，如果用户登录，则显示用户的电子邮件地址。

但是当弹出窗口关闭时，因此重试`fetchData()`，即使它在重定向中返回正确的用户到弹出窗口中的主页，`users.get_current_user()`仍然会返回。`None`

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T16:11:50.827

您**不能在上下文小工具中使用 OpenId**，因为小工具存在于代理所有请求的小工具容器中。这就是该指南向您展示**使用 popup 的解决方法**的确切原因。

小工具中的用户**由 ID 唯一定义**。

在弹出窗口中，您**可以**向服务器发送 OpenId 请求，因为您脱离了小工具容器。将唯一 ID 发送到服务器，以便您可以**将唯一 ID 链接到服务器上的 OpenId 用户**；

从那时起，您可以使用唯一 ID 从您的小工具中发送请求。服务器将知道用户的身份，因为您在通过弹出窗口进行呼叫时链接了唯一 ID 和身份。

如果您以某种方式将其保留在服务器上，则只需使用弹出窗口建立关系唯一 ID <> 身份一次。

# java - 使用 STS 模板项目创建新 Spring MVC 项目的奇怪行为，URL 不正确，我必须重建项目

> ID：13682656
> 
> 赞同：0
> 
> 时间：2012-12-03T11:50:26.513
> 
> 标签：java, eclipse, spring, spring-mvc, sts-springsourcetoolsuite

我对正确创建 Spring MVC 项目有疑问。

当我运行一个导入的项目时（例如，可从 STS 仪表板下载的 Spring MVC Showcase 示例），在浏览器 URL 栏中，该项目的 URL 如下：

```
http://localhost:8080/project-name/ 
```

（例如，Web MVC Showcase 示例具有项目名称：“spring-mvc-showcase”并具有以下 URL：

```
http://localhost:8080/spring-mvc-showcase/ ) 
```

现在，我的疑问与在 STS\Eclipse 中使用 Spring Template 创建一个新的 Spring MVC 项目有关。

我在 STS 中执行以下操作：

**文件 --> 新建 --> 项目**，在我看来是一个向导，我可以在其中选择项目类型。

所以我选择了**Spring Template Project**，现在出现在我的另一个向导窗口中，我可以在其中选择 Spring Project 的特定类型，我选择了**“Spring MVC Project”**

好的，现在在我看来，我必须在其中设置另一个向导窗口：

**项目名称**和我插入：**my-spring-project**

**顶级包**，我有插入：**org.mycompany.foo**

好的，现在我在服务器上运行我的项目，这不运行并且在浏览器的 URL 栏中我没有

```
http://localhost:8080/my-spring-project/ (as I would expect) 
```

但是我有：

```
http://localhost:8080/foo/ 
```

在堆栈跟踪中，我有以下错误消息：

> 警告：org.springframework.web.servlet.PageNotFound - 在 DispatcherServlet 中找不到带有 URI [/foo/] 的 HTTP 请求的映射，名称为“appServlet”

然后，如果我清理我的项目，STS 重建项目，如果我尝试再次运行它，项目运行良好并且 URL 地址仍然存在：

```
http://localhost:8080/foo/ 
```

我认为这是一种奇怪的行为，我不知道这是什么原因......

所以：

1）为什么网址不是

```
http://localhost:8080/my-spring-project/ 
```

?

2) 为什么我必须清理并重建我的项目才能运行它？

3) 我在创建标准 Spring MVC 项目时出错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-20T20:52:14.340

Eclipse > Properties > Web Project Settings : Set as Context Root `my-spring-project` 然后像在 Eclipse 中正常运行一样运行项目。它应该以`http://localhost:8080/my-spring-project/`. 也像展示项目一样进行映射：`<mvc:view-controller path="/" view-name="home"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:49:16.570

我认为您忘记在服务器上部署新项目。

*   1) 打开“服务器”视图（Ctrl+3，输入“服务器”）
*   2）右键单击您的服务器实例（例如“本地主机上的tomcat 7”）
*   3) 选择“添加和删除...”
*   4）从“可用”中选择“my-spring-project”并“添加>”它们
*   5）启动服务器并访问“localhost:8080/my-spring-project/”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:42:36.670

这是我的 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

# php - cakephp 在不同的桌子上插入

> ID：13682658
> 
> 赞同：2
> 
> 时间：2012-12-03T11:50:30.883
> 
> 标签：php, database, forms, cakephp

我正在尝试将以下表单的数据插入不是“默认”数据库的表中。但是，我不知道该怎么做，我仍在适应 cakephp。我猜表格是正确完成的，并且数据库中特定表的名称是输入中的名称。但我不是说他应该插入哪个表吗？那不是必须的吗？或者如果需要，我缺少什么来指定我想要的表？

```
 <?php   echo $this->Form->create('Ficha', array('action' => 'index')); ?>
//echo $this->Form->input('id_fichas', array('label' => 'Id Ficha:'));
echo $this->Form->input('class_subst', array('label' => 'Class mistura:'));
echo $this->Form->input('simbolos_perigo', array('label' => 'Símbolos:'));
echo $this->Form->input('frases_r', array('label' => 'Frases:'));
echo $this->Form->end('Finalizar Ficha'); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T14:28:29.117

按照惯例，表对象将使用与类名的小写和下划线版本匹配的表。在您的情况下，“Ficha”将映射到“fichas”表。如果你想要一个不同的表，你需要根据 CakePHP 版本定义它：

## CakePHP 3.x

您可以使用*setTable()*方法指定表：

```
class Example extends Table {

    public function initialize(array $config) {
        $this->setTable('my_table');

        // Prior to 3.4.0 use 'table' method
        // $this->table('my_table');
    }
} 
```

链接到[3.x 文档](https://book.cakephp.org/3.0/en/orm/table-objects.html)

## CakePHP 2.x

您的模型中的属性*$useTable将发挥作用：*

```
<?php
App::uses('AppModel', 'Model');

class Example extends AppModel {
   public $useTable = 'exmp'; // This model uses a database table 'exmp'
} 
```

链接到[2.x 文档](http://book.cakephp.org/2.0/en/models/model-attributes.html)

# javascript - 如何在函数内部调用函数？

> ID：13682663
> 
> 赞同：0
> 
> 时间：2012-12-03T11:50:45.360
> 
> 标签：javascript, jquery

```
var abc = {
    'a': 10,
    'b': 10,
    c: function() {
        //like if I have many many functions in c
        init_a();
        multiple();

        function init_a() {
            abc.a = 30;
        }

        function multiple() {
            alert(abc.a * abc.b);
        }

        function minus() {
            alert(abc.a - abc.b);
        }
        return {
            function myalert() {
                var result = abc.a + abc.b;
                alert(result);
            }
        }
    },
    d: function() {
        abc.c.myalert(); // ???  error??
        abc.c().myalert(); // ??? error??  **it run all functions in c but not just myalert, strange things happening...
    }

}
abc.d(); 
```

在函数 d 中调用“myalert()”函数的正确语法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T11:54:09.827

该`myalert()`功能~~是~~本地的`abc.c()`，所以这是不可能的。

你可以让`c()`返回`myalert()`：

```
c: function() {
    return function myalert() {
      // whatever
    }
}, d: function() {
    this.c()()
} 
```

请注意，返回的函数不必命名，即`return function() { .. }`.

**更新**

如果你想调用它`this.c().myalert()`，那么`c()`需要直接返回一个对象而不是函数：

```
c: function() {
    return {
        myalert: function() { ... }
    }
} 
```

**更新 2**

您的`c()`函数现在包含除了声明之外的其他语句`myalert()`。被调用时，`init_a()`并`multiple()`在它返回之前被调用。

我建议重构您的代码，例如，`myalert()`改为移入主对象：

```
var abc = {
    a: 10,
    b: 10,
    c: function() { ... }
    myalert: function() { ... }
    d: function() {
        this.myalert();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T11:56:00.383

您可以从中返回一个对象，`c`其中包含`myalert`：

```
var abc = {
    'c': function() {
        return {
            myalert: function() {
                alert('foo');
            }
        };
    },
    'd': function(){
        abc.c().myalert(); // foo
    }
};
abc.d();​ 
```

演示：http: [//jsfiddle.net/g2KEK/](http://jsfiddle.net/g2KEK/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:00:31.697

```
c: function() {
    return {
        myalert : function() {
            // whatever
        }
    }
}, d: function() {
    this.c().myalert()
} 
```

# c++ - 从 C++ 缓冲区到 python::boost::list

> ID：13682665
> 
> 赞同：1
> 
> 时间：2012-12-03T11:50:50.887
> 
> 标签：c++, python, boost, python-3.3

我正在尝试将 C++ 缓冲区转换为 python::boost::list，我的 C++ 类是：

```
#include "boost/python/list.hpp"

using namespace boost::python;

class Buffer {
public:
    unsigned char* m_pBuff;
    int m_iWidth;
    int m_iHeight;

    Buffer( cont int p_iWidth, const int p_iHeight ) {
        m_pBuff = new unsigned char[p_iWidth * p_iHeight];

        m_iWidth  = p_iWidth;
        m_iHeight = p_iHeight;
    }

    ~Buffer() { delete[] m_pBuff; }

    /* Class Functions */

    list getList ( void ) {
        list l;
        l.append(m_iWidth);
        l.append(m_iHeight);

        std::string data(m_iWidth * m_iHeight, ' ');

        unsigned char* pBuff = m_pBuff;
        for ( int i = 0; i < m_iWidth * m_iHeight; ++i, ++pBuff ) {
            data[i] = (char*) *pBuff;
        }

        l.append(data);

        return l;
    }
}; 
```

而python boost模块定义为：

```
using namespace boost::python;

BOOST_PYTHON_MODULE(BufferMethods)
{

    class_<Buffer>("Buffer", init<const int, const int>()) 
        .add_property("width", &Buffer::m_iWidth)
        .add_property("height", &Buffer::m_iHeight)
        /* Other functions */
        .def("getList", &Buffer::getList)
    ;
} 
```

但是当我在 python 中运行该模块时，它会返回此错误：

```
>>> from BufferMethods import *
>>> Buff = Buffer(800, 600)
>>> dataList = Buff.getList()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
UnicodeDecodeError: 'utf-8' codec can't decode byte 0xe0 in position 0: invalid continuation byte
>>> 
```

我做错了什么？？我正在使用 python 3.3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:43:01.523

当您尝试将项目附加到`boost::python::list`实例中时，附加项目的 python 类型由作为参数给出的 C++ 对象的类型确定。由于您`data`的类型为`std::string`，因此此附加操作正在尝试创建 Python 字符串。推测：我猜python字符串需要遵守一些布局，并且由于您只是向它提供一些随机数据，它无法将其解释为有效字符串，这就是您得到[UnicodeDecodeError](http://wiki.python.org/moin/UnicodeDecodeError)的原因。我不知道您究竟打算对列表做什么，以及您希望如何将缓冲区公开给 Python，但以下似乎可行（使用 a`std::vector<char>`作为类型`data`而不是`std::string`）：

```
#include <boost/python.hpp>
#include <boost/python/list.hpp>
#include <boost/python/suite/indexing/vector_indexing_suite.hpp>
#include <vector>

using namespace boost::python;

class Buffer {
public:
    unsigned char* m_pBuff;
    int m_iWidth;
    int m_iHeight;

    Buffer( const int p_iWidth, const int p_iHeight ) {
        m_pBuff = new unsigned char[p_iWidth * p_iHeight];

        m_iWidth  = p_iWidth;
        m_iHeight = p_iHeight;
    }

    ~Buffer() { delete[] m_pBuff; }

    /* Class Functions */

    list getList ( void ) {
        list l;
        l.append(m_iWidth);
        l.append(m_iHeight);

        std::vector<char> data(m_iWidth*m_iHeight);

        unsigned char* pBuff = m_pBuff;
        for ( int i = 0; i < m_iWidth * m_iHeight; ++i, ++pBuff ) {
            data[i] = (char) *pBuff;
        }

        l.append(data);

        return l;
    }
};

BOOST_PYTHON_MODULE(BufferMethods)
{

    class_<std::vector<char> >("CharVec")
            .def(vector_indexing_suite<std::vector<char> >());

    class_<Buffer>("Buffer", init<const int, const int>()) 
        .add_property("width", &Buffer::m_iWidth)
        .add_property("height", &Buffer::m_iHeight)
        /* Other functions */
        .def("getList", &Buffer::getList)
    ;
} 
```

所以在python（3.2）中：

```
In [1]: from BufferMethods import *

In [2]: Buff = Buffer(800,600)

In [3]: dataList = Buff.getList()

In [4]: dataList[2]
Out[4]: <BufferMethods.CharVec at 0x18172d0>

In [5]: dataList[2][2]
Out[5]: '\x00' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:06:12.410

使用 Python 2.7 解决了这个问题......可能是因为我使用的是非官方的构建 python.boost 从[这里](http://www.lfd.uci.edu/~gohlke/pythonlibs/)引起的。

# sql - sql查询计算具有相同值的两列

> ID：13682668
> 
> 赞同：2
> 
> 时间：2012-12-03T11:50:57.593
> 
> 标签：sql, oracle, oracle10g

我有一个包含 2 列关键字的表格，我需要计算它们的出现次数。我可以单独做，一次一列，然后加上总数，定期计数，

```
select count (id), kw1 from mytable group by kw1 
```

和 kw2 一样，但我需要直接从数据库中获取信息。

所以表是这样的：

```
id       kw1          kw2
1         a            b
2         c            d 
3         b             
4         e            a 
```

所以想法是获取每个关键字使用了多少次，所以结果应该是这样的：

```
'a'  2
'b'  2
'c'  1
'd'  1
'e'  1 
```

提前致谢

PS：对不起，我忘记了，但以防万一，我正在开发 Oracle 10g

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T11:52:13.240

试试这个：

```
SELECT kw, COUNT(kw)
FROM
(
   SELECT "kw1" AS kw FROM table1
   UNION ALL 
   SELECT "kw2"       FROM table1
) t
WHERE kw IS NOT NULL
GROUP BY kw
ORDER BY KW; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!4/9d278/5)

这会给你：

```
KW   COUNT(KW)
a       2
b       2
c       1
d       1
e       1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T12:27:47.320

它应该看起来像这样。

```
SELECT kw,SUM(kw)
FROM(
(SELECT kw1 AS kw, COUNT(kw1) 
FROM table
WHERE kw1 IS NOT NULL GROUP BY kw1) skw1

UNION ALL

(SELECT kw2, COUNT(kw2) 
FROM table
WHERE kw2 IS NOT NULL GROUP BY kw2) skw2
)
GROUP BY kw
ORDER BY kw 
```

以前的答案在执行 UNION 后不执行 SUM 操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:54:10.643

用于`union All`将两列数据合并为一列然后计算出现次数

```
 SELECT cnt, COUNT(cnt)
    FROM
    (
       SELECT kw1 AS cnt FROM table
       UNION ALL 
       SELECT kw2       FROM table
    ) t
 WHERE cnt IS NOT NULL
GROUP BY cnt
ORDER BY cnt; 
```

# asp.net-mvc - ASP 包中的绝对 URL

> ID：13682671
> 
> 赞同：20
> 
> 时间：2012-12-03T11:51:15.143
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-optimization, bundling-and-minification

我为谷歌地图使用了一个 jQuery 库，它依赖于首先加载的谷歌脚本。我希望能够将两者都包含在捆绑包中：

```
 bundles.Add(new ScriptBundle("myfoobundle").Include(
    "http://maps.googleapis.com/maps/api/js?sensor=false&amp;libraries=places",
    "~/scripts/jquery.fooplugin-{version}.js"
  )); 
```

这似乎不起作用（引发抱怨第一个字符串的异常）。有人可能会说这不应该工作，因为绝对 URL 并不意味着被缩小/捆绑。

但是当前的方法很麻烦，因为我需要确保依赖项是正确的，并且发生在不同的地方（捆绑代码中的一半问题，视图中的另一半）。

有一个如上所述的 1 步解决方案会很好。在这方面我有什么选择吗？

*更新：*

解决有关使用 CDN 作为解决方案的评论：如果我指定`bundles.UseCdn = true`它无效，我仍然会收到异常`The URL 'http://maps.googleapis.com/maps/api/js?sensor=false&amp;libraries=places' is not valid. Only application relative URLs (~/url) are allowed`。另外我不确定这样做的意义是什么，因为我已经使用了对 jQuery 等的 CDN 支持，所以不确定这会如何与我的用例*发生冲突。*

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-03-11T23:23:04.553

如果您使用`System.Web.Optimization`>= 1.1.2 的版本，则有一种新的便捷方法可以覆盖 url 的 for`Styles`和`Scripts`。在下面的示例中，我获取了一个`CdnBaseUrl`from`web.config`以用作所有脚本和样式表的基本 url：

```
public class BundleConfig
{
    private static readonly string BaseUrl = ConfigurationManager.AppSettings["CdnBaseUrl"];

    public static void RegisterBundles(BundleCollection bundles)
    {
        // This is the new hotness!!
        Styles.DefaultTagFormat = "<link href=\"" + BaseUrl + "{0}\" rel=\"stylesheet\"/>";
        Scripts.DefaultTagFormat = "<script src=\"" + BaseUrl + "{0}\"></script>";

        bundles.Add(new ScriptBundle("~/bundles/js").Include(
            "Your scripts here..."
        ));

        bundles.Add(new StyleBundle("~/bundles/css").Include(
            "Your css files here..."
        ));
    }
} 
```

[有关静态站点 (CDN) 优化的更多信息](http://www.dotnetexpertguide.com/2013/11/updated-aspnet-web-optimization-framework-and-cookieless-domain.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-06T19:46:46.393

目前，您必须在捆绑包中包含您所依赖的 jquery 的本地副本，或者您必须管理您提到的脚本标签。我们知道这种依赖管理问题，它属于资产管理类别，我们正在使用[codeplex 上的此工作项进行跟踪](http://aspnetoptimization.codeplex.com/workitem/26)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-03T15:27:09.553

Based on the MVC tutorials, your syntax is incorrect for creating a bundle from a CDN. And as others have said, ensure that you have the `bundles.UseCdn = true;` property set. Using the example on the [MVC site](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification) - your code should reflect the following:

```
public static void RegisterBundles(BundleCollection bundles)
{
   bundles.UseCdn = true;   //enable CDN support
   //add link to jquery on the CDN
   var jqueryCdnPath = "http://maps.googleapis.com/maps/api/js?sensor=false&amp;libraries=places";
   bundles.Add(new ScriptBundle("myfoobundle", jqueryCdnPath).Include(
                "~/Scripts/jquery-{version}.js"));
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-25T11:03:36.057

如果只是在捆绑中获取绝对网址，那么您可以这样做。

```
public static class Extensions
    {
        public static IHtmlString RenderScript(this UrlHelper helper, params string[] paths)
        {
            string scripts = System.Web.Optimization.Scripts.Render(paths).ToHtmlString();
            string hostName = HttpContext.Current.Request.Url.Scheme + Uri.SchemeDelimiter + HttpContext.Current.Request.Url.Authority;
            string replaced = Regex.Replace(scripts, "src=\"/", "src=\"" + hostName + "/", RegexOptions.Multiline | RegexOptions.IgnoreCase);
            return new HtmlString(replaced);
        }
    } 
```

这基本上会从 Scripts.Render 中获取 bahvior，然后对其应用绝对 URL。然后在视图中你必须写

```
 @Url.RenderScript("~/bundles/jquery") 
```

代替

```
 @Scripts.Render("~/bundles/jquery") 
```

享受编码！...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-30T16:21:30.533

我按照建议尝试了这个，但没有奏效：

```
string googleMapsApiCDN = "http://maps.google.com/maps/api/js?sensor=false&amp;language=en";
        bundles.Add(new ScriptBundle("~/bundles/gmap3", googleMapsApiCDN).Include(
                    "~/Scripts/GMap3/gmap3.min.js",         // GMap3 library
                    "~/Scripts/GMap3/mygmap3-about.js"      // Pops up and configures     
GMap3 on About page
                    )); 
```

渲染了 mygmap3-about.js 脚本，但 gmap3.min.js 和来自 google 的 CDN 脚本**都被排除在外**。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-03T12:05:43.733

您是否尝试过启用 CDN 支持并查看是否允许绝对 URL 工作：

```
bundles.UseCdn = true; 
```

# xsd - 加载架构时出现空指针异常

> ID：13682673
> 
> 赞同：1
> 
> 时间：2012-12-03T11:51:26.417
> 
> 标签：xsd

公共类 TestValidatorSample {

```
public static void main(String aa[]) throws SAXException, IOException, ParserConfigurationException {

    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    dbf.setNamespaceAware(true);
    DocumentBuilder parser = dbf.newDocumentBuilder();

    SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
    //      /test_elements.xsd
    Schema schema = factory.newSchema(new StreamSource(TestValidatorSample.class.getResource(
            "/xsds/pakagename/test_elements.xsd").toString()));

    Validator validator = schema.newValidator();
    DOMSource domsrc = new DOMSource(parser.parse(new InputSource("test-example.xml")));
    try {
        validator.validate(domsrc);
        System.out.println("Validation successfull!!!");
        //                  System.out.println(xmlFile.getSystemId() + " is valid");
    } catch (SAXException e) {
        System.out.println("Validation not successfull!!!");
        //                  System.out.println(xmlFile.getSystemId() + " is NOT valid");
        System.out.println("Reason: " + e.getLocalizedMessage());
    }
} 
```

}

第 47 行的线程“main”java.lang.NullPointerException 中的异常。

我在加载模式时遇到空指针（如上所述）异常。在上面的代码片段中，我试图加载一个模式，该模式将用于验证在我的应用程序中生成的 xml。

谁能帮我找出为什么我得到空指针异常？

# jquery - 在 jQuery 中某个时间 '$' 惹麻烦了？

> ID：13682675
> 
> 赞同：0
> 
> 时间：2012-12-03T11:51:34.580
> 
> 标签：jquery

在 jQuery 中某段时间 '$' 出事了，基本原因是什么？详细回答。

提前致谢

```
jQuery(function () {
        $("#tabs").tabs();
    });

jQuery(function () {
        jQuery("#tabs").tabs();
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:53:20.287

它因为其他库也使用`$`所以会有冲突使用[`jQuery.noConflict()`](http://api.jquery.com/jQuery.noConflict/)

```
jQuery.noConflict();
(function($) { 
  $(function() {
    // more code using $ as alias to jQuery
  });
})(jQuery); 
```

或喜欢

```
<script type="text/javascript" src="other_lib.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
  jQuery(document).ready(function($) {
    // Code that uses jQuery's $ can follow here.
  });
  // Code that uses other library's $ can follow here.
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T11:54:10.140

您可能有另一个库也使用`$`.

在这种情况下，您可以使用[`jQuery.noConflict.()`](http://api.jquery.com/jQuery.noConflict/)

```
var j = jQuery.noConflict();
j(function () {
   j("#tabs").tabs();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T11:53:44.820

原因可能与其他插件（例如也使用 $ 符号的原型）冲突

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T11:53:58.920

基本原因是该`$`变量也被 Prototypejs 和 Mootools 等其他 javascript 框架使用。

因此，如果你想同时使用 jQuery 和 Mootools，你应该避免使用`$`.

# java - 在 Java 中这种实例化是什么？

> ID：13682684
> 
> 赞同：3
> 
> 时间：2012-12-03T11:52:23.520
> 
> 标签：java, methods, constructor, overriding, instantiation

这对于 Java 来说可能是一个非常基本的问题，但我就是想不起来，也不知道如何在线搜索。

```
button.setOnClickListener(new OnClickListener()
{
  @Override
   public void onClick(View v)
   {
     Thread.sleep(100);
   }
} 
```

我习惯于使用诸如`new OnClickListener(arg1, arg2, ...)`. 以我自己的经验，我在构造对象时从未覆盖过方法。我只在扩展课程时才这样做。如果有任何术语，这种实例化在 Java 中称为什么？在其他什么情况下我们应该使用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T11:53:41.027

那是一个*匿名*类。它是`OnClickListener`接口的一个实现，但该实现是未命名的。它写起来很简洁，实现在调用上下文中是可见的（通常对可读性很有用），但由于它是就地实现，你不能在其他地方使用它。

另请注意，它是一个内部类，因此具有对其周围类的引用。

请参阅[此处](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)了解更多信息。

关于。对周围类的引用。内部类具有对其外部类的隐式引用（如果您尝试使用 XStream 等对内部类进行序列化，您会看到这一点。它会拉动外部类）。如果您在外部类中有一个变量，您可以在内部类中引用它（前提是它是一个`final`变量，请注意）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T11:53:23.427

它们被称为匿名类。

从技术上讲，它们是被实例化的类的子类，并提供重写的方法实现。

当您想要提供一个实现而不必专门声明顶级类时，它们很有用。

它们是 Java 对闭包的回答。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T11:58:11.833

```
new OnClickListener()
{
  @Override
  public void onClick(View v)
  {
    Thread.sleep(100);
  }
} 
```

从语法和语义的角度来看，这个构造是**实例化**和**类声明**的混合。同时，您指定`OnClickListener`要调用的构造函数（为此，假定接口具有默认构造函数）并提供属于您要声明的新子类的类主体。你没有给子类命名，这就是为什么这个构造被称为“匿名类”。匿名类实例化与声明紧密耦合，您不能从代码中的任何其他点实例化该类，除非它被声明。

在 Java 中有一个几乎相同的构造，你几乎不会在实践中看到它：一个**本地类**。它看起来就像一个普通的类声明，但它发生**在一个方法内部**，就像上面的匿名类一样。在这种情况下，该类被赋予了一个名称，并且可以在多个地方引用和实例化，但它们都在声明它的方法中。

在这两种情况下，您都可以获得任何其他类都无法使用的特殊功能，即使用方法中声明的**局部变量**的能力。起初这很奇怪，因为当方法完成时局部变量消失了，但是对局部类实例的引用继续存在。这就是为什么这些类被称为“闭包”的原因：据说它们“关闭”了它们的本地环境。他们有点“提升”变量声明并将它们保留为它们的实例变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-03T12:20:14.693

只是举一个如何使用它的例子......

```
public class TestClass {
    public static void main(String args[]) {
        OutOfTheMain ootm = new OutOfTheMain();
    }
}

public interface SuperInner {
    String words = "hello";
    String getWords();
}

public class OutOfTheMain {
    OutOfTheMain() {
        testInnerStuff(new SuperInner() {
            @Override
            public String getWords() {
                return words + " world";
            }
        });
    }

    private void testInnerStuff(SuperInner sinner) {
        System.out.println(sinner.getWords());
    }
} 
```

运行时，这将打印...

```
hello world 
```

您可以覆盖方法以添加其他功能，并稍后在运行时使用此类。

# c# - 用串口打开和关闭 LED

> ID：13682685
> 
> 赞同：1
> 
> 时间：2012-12-03T11:52:25.893
> 
> 标签：c#, winforms, serial-port

我用 C# winform 编写了程序。我想当操作成功时，LED 会亮起。我知道我必须使用这段代码：

```
serialport1.open();
serialport1.EnableDtr=true;
serialport1.close(); 
```

但在程序运行之前，LED 已打开。我在 Device Maneger 中将 ReceiveBuffer 设置为 low 。但没有工作并且 LED 已打开。

评论中的代码：

```
private void btn_store_Click(object sender, EventArgs e) {
  if (serialPort1.IsOpen == true) {
    serialPort1.Close();
  }
  try {
    serialPort1.Open();
    serialPort1.DtrEnable = true;
    lblError.Text = "success";
    lblError.ForeColor = Color.Green;
    serialPort1.Close();
  }
} 
```

# java - Java Comparator - 函数访问

> ID：13682687
> 
> 赞同：0
> 
> 时间：2012-12-03T11:52:34.160
> 
> 标签：java, comparator

我有课：

```
public class GridResponse<V> {
    public void setPage(int page) {
        this.page = page;
    } 
} 
```

并且类实现了比较器：

```
public class GridComparator<GridResponse> implements Comparator<GridResponse> {
    @Override
    public int compare(GridResponse o1, GridResponse o2) {
        o1.setPage = '1';
        return 0;
    }
} 
```

GridComparator 类有什么问题，因为我无法访问 GridResponse 中的功能？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:00:36.623

**该类`GridComparator`根本不应该是通用的**，它是特定于`GridResponse`该类的。

```
public class GridComparator implements Comparator<GridResponse<Integer>> {
    @Override
    public int compare(GridResponse<Integer> o1, GridResponse<Integer> o2) {
        o1.setPage(1);
        return 0;
    }
} 
```

# javascript - 淘汰赛js jquery范围滑块&& 2个输入

> ID：13682691
> 
> 赞同：3
> 
> 时间：2012-12-03T11:52:48.070
> 
> 标签：javascript, jquery, jquery-ui, knockout.js, jquery-ui-slider

我需要一些帮助。我有一个代码[http://jsfiddle.net/ZNvWR/19/](http://jsfiddle.net/ZNvWR/19/)。我是淘汰赛的新手，我找不到任何解决方案。

那么，如何重写此代码以获取工作输入（更改输入中的值会更改滑块值）？

```
<div data-bind="jqSlider: percent, jqOptions: { min: 0, max: 100, range:true }"></div>
<hr/>
Percent: <input data-bind="value: percent()[0]" />
Percent: <input data-bind="value: percent()[1]" />

ko.bindingHandlers.jqSlider = {
  init: function(element, valueAccessor, allBindingsAccessor) {
    //initialize the control
    var options = allBindingsAccessor().jqOptions || {};
    $(element).slider(options);

    //handle the value changing in the UI
    ko.utils.registerEventHandler(element, "slide", function() {
        //would need to do some more work here, if you want to bind against non-observables
        var observable = valueAccessor();
        observable($(element).slider("values"));
    });

    //handle disposal (if KO removes by the template binding)
    ko.utils.domNodeDisposal.addDisposeCallback(element, function() {
        $(element).slider("destroy");
    });
  },
  //handle the model value changing
  update: function(element, valueAccessor) {
    var value = ko.utils.unwrapObservable(valueAccessor());
    $(element).slider("values", value);   
  }
};

var viewModel = {
    percent: ko.observableArray([10,50])
};
ko.applyBindings(viewModel) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:52:00.573

我刚刚用一个滑块帮助了另一个 SO 用户，它可以像这样改变来做你想做的事

[http://jsfiddle.net/N9uwx/3/](http://jsfiddle.net/N9uwx/3/)

```
<input data-bind="value: min" /><input data-bind="value: max" /><div data-bind="slider: { min: min, max: max }, sliderOptions: {min: 0, max: 100, step: 1}"></div> 
```

# jsf-2 - java.lang.IllegalStateException：调用 JasperReport 时已为此响应调用 getOutputStream()

> ID：13682692
> 
> 赞同：2
> 
> 时间：2012-12-03T11:52:49.493
> 
> 标签：jsf-2, jasper-reports, ireport, servletexception, jasper-plugin

我正在 JSF 2 中尝试 iReport/JasperReport 但是在生成 PDF 时出现此错误。我搜索并发现了一些类似的问题和解决方案，但没有任何效果。很抱歉再次发布同样的问题。但是我尝试了所有可能的解决方案，但没有一个对我有用。请帮忙

```
java.lang.IllegalStateException: getOutputStream() has already been called for this response
at org.apache.catalina.connector.Response.getWriter(Response.java:637)
at org.apache.catalina.connector.ResponseFacade.getWriter(ResponseFacade.java:214)
at com.sun.faces.context.ExternalContextImpl.getResponseOutputWriter(ExternalContextImpl.java:723)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.createResponseWriter(FaceletViewHandlingStrategy.java:1009)
at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:382)
at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:124)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:999)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:565)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

以下是函数

```
public void init() throws IOException, JRException {
    JRBeanCollectionDataSource beanCollectionDataSource = new JRBeanCollectionDataSource(listReportObjects);
    ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
    HttpServletResponse httpServletResponse = (HttpServletResponse) FacesContext.getCurrentInstance().getExternalContext().getResponse();
    servletOutputStream = httpServletResponse.getOutputStream();
    ServletContext servletContext = (ServletContext) externalContext.getContext();
    String reportLocation = servletContext.getRealPath("/web/ireport/monthlyReport.jasper");
    jasperPrint = JasperFillManager.fillReport(reportLocation, new HashMap<String, Object>(), beanCollectionDataSource);
}

public void PDF(ActionEvent actionEvent) throws IOException, JRException {
    System.out.println("*****************PDF*********************");
    init();
    JasperExportManager.exportReportToPdfStream(jasperPrint, servletOutputStream);
} 
```

和 XHTML 代码：;

我的 POM 文件：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>com.nic</groupId>
<artifactId>RFD</artifactId>
<version>1.0-SNAPSHOT</version>
<packaging>war</packaging>

<name>RFD</name>

<properties>
    <endorsed.dir>${project.build.directory}/endorsed</endorsed.dir>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <netbeans.hint.deploy.server>Tomcat</netbeans.hint.deploy.server>
</properties>

<dependencies>
    <dependency>
        <groupId>org.eclipse.persistence</groupId>
        <artifactId>eclipselink</artifactId>
        <version>2.3.2</version>
    </dependency>
    <dependency>
        <groupId>org.eclipse.persistence</groupId>
        <artifactId>javax.persistence</artifactId>
        <version>2.0.3</version>
    </dependency>
    <dependency>
        <groupId>org.eclipse.persistence</groupId>
        <artifactId>org.eclipse.persistence.jpa.modelgen.processor</artifactId>
        <version>2.3.2</version>
        <scope>provided</scope>
    </dependency>        
    <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-api</artifactId>
        <version>2.1.13</version>
    </dependency>
    <dependency>
        <groupId>com.sun.faces</groupId>
        <artifactId>jsf-impl</artifactId>
        <version>2.1.13</version>
    </dependency>
    <dependency>
        <groupId>taglibs</groupId>
        <artifactId>standard</artifactId>
        <version>1.1.2</version>
    </dependency>
    <!-- PrimeFaces -->
    <dependency>
        <groupId>org.primefaces</groupId>
        <artifactId>primefaces</artifactId>
        <version>3.4.1</version>
    </dependency>  
    <dependency>
        <groupId>org.primefaces.extensions</groupId>
        <artifactId>all-themes</artifactId>
        <version>1.0.8</version>
    </dependency>
    <dependency>
        <groupId>org.primefaces.extensions</groupId>
        <artifactId>primefaces-extensions</artifactId>
        <version>0.6.1</version>
    </dependency>
    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>1.3.2</version>
    </dependency>
    <dependency>
        <groupId>commons-fileupload</groupId>
        <artifactId>commons-fileupload</artifactId>
        <version>1.2.2</version>
    </dependency>       
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.17</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate</artifactId>
        <version>3.2.6.ga</version>
        <exclusions>
            <exclusion>
                <artifactId>antlr</artifactId>
                <groupId>antlr</groupId>
            </exclusion>
            <exclusion>
                <artifactId>commons-logging</artifactId>
                <groupId>commons-logging</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>3.3.2.GA</version>
        <exclusions>
            <exclusion>
                <artifactId>commons-logging</artifactId>
                <groupId>commons-logging</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>javax.sql</groupId>
        <artifactId>jdbc-stdext</artifactId>
        <version>2.0</version>
    </dependency>
    <dependency>
        <groupId>javax.transaction</groupId>
        <artifactId>jta</artifactId>
        <version>1.1</version>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.21</version>
    </dependency>
    <dependency>
        <groupId>c3p0</groupId>
        <artifactId>c3p0</artifactId>
        <version>0.9.1.2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.servicemix.bundles</groupId>
        <artifactId>org.apache.servicemix.bundles.jettison</artifactId>
        <version>1.0.1_5</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>4.1.1.Final</version>
        <type>jar</type>
        <exclusions>
            <exclusion>
                <artifactId>antlr</artifactId>
                <groupId>antlr</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>antlr</groupId>
        <artifactId>antlr</artifactId>
        <version>2.7.7</version>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>commons-beanutils</groupId>
        <artifactId>commons-beanutils</artifactId>
        <version>1.8.3</version>
    </dependency>
    <dependency>
        <groupId>javax</groupId>
        <artifactId>javaee-web-api</artifactId>
        <version>6.0</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4.5</version>
    </dependency>
    <dependency>
        <groupId>net.sf.jasperreports</groupId>
        <artifactId>jasperreports</artifactId>            
        <version>4.8.0</version>
        <exclusions>
            <exclusion>
                <artifactId>commons-beanutils</artifactId>
                <groupId>commons-beanutils</groupId>
            </exclusion>
        </exclusions>
    </dependency>
</dependencies>

<build>

    <plugins>        
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>               
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <compilerArguments>
                    <endorseddirs>${endorsed.dir}</endorseddirs>
                </compilerArguments>                    
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.1.1</version>
            <configuration>
                <failOnMissingWebXml>false</failOnMissingWebXml>
                <packagingExcludes>WEB-INF/web.xml</packagingExcludes>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.1</version>
            <executions>
                <execution>
                    <phase>validate</phase>
                    <goals>
                        <goal>copy</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${endorsed.dir}</outputDirectory>
                        <silent>true</silent>
                        <artifactItems>
                            <artifactItem>
                                <groupId>javax</groupId>
                                <artifactId>javaee-endorsed-api</artifactId>
                                <version>6.0</version>
                                <type>jar</type>
                            </artifactItem>
                        </artifactItems>
                    </configuration>
                </execution>
            </executions>
        </plugin>
        <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>jasperreports-maven-plugin</artifactId>
            <version>1.0-beta-2</version>
            <configuration>
                <sourceDirectory>/web/ireport</sourceDirectory>
                <outputDirectory>/web/ireport</outputDirectory>
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>compile-reports</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>
<repositories>
    <repository>
        <url>http://download.eclipse.org/rt/eclipselink/maven.repo/</url>
        <id>eclipselink</id>
        <layout>default</layout>
        <name>Repository for library EclipseLink (JPA 2.0)</name>
    </repository>
    <repository>
        <url>http://repository.primefaces.org/</url>
        <id>primefaces</id>
        <layout>default</layout>
        <name>Repository for library PrimeFaces 3.2</name>
    </repository>                
</repositories> 
```

请帮忙

我没有在项目的其他任何地方使用函数 getOutputStream()。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-04T04:46:51.663

您可能没有直接这样做，但您的代码中有几处是可疑的，可以修改以获得所需的响应。除了在 servlet 容器尝试这样做或这样做两次之后尝试声明响应输出流之外，您得到的异常不会因为任何其他原因而发生

1) 线条

```
 ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
 HttpServletResponse httpServletResponse = (HttpServletResponse)FacesContext.getCurrentInstance().getExternalContext().getResponse();
 ServletContext servletContext = (ServletContext) externalContext.getContext(); 
```

正在对上下文资源进行重复（和不必要的调用）。

2）您未能调用`responseComplete()`您的`FacesContext`实例，这几乎肯定会保证将要下载的文件写入流将失败

3）虽然我不确定这一点，但我建议您 `actionListener`将`action`报告处理`commandButton`从`ActionListener`

4）我不知道是什么类型`jasperPrint`，但是您可以使用JasperReport 的`JasperRunManager.runReportToPdfStream()`接受`.jasper`文件输入流的函数来输出您的报告。

您可以结合所有这些并使用以下内容：

```
 FacesContext facesContext = FacesContext.getCurrentInstance(); //Get the context ONCE
     HttpServletResponse response = (HttpServletResponse)       facesContext.getExternalContext().getResponse();
     InputStream reportStream =   facesContext.getExternalContext().getResourceAsStream("/web/ireport/monthlyReport.jasper");
try {
    ServletOutputStream servletOutputStream = response.getOutputStream();
    response.setContentType("application/pdf");
    facesContext.responseComplete();

    try {  // Replace this with your desired JR utility method
        JasperRunManager.runReportToPdfStream(reportStream, servletOutputStream, params);
    } catch (JRException ex) {
        //
    }
    servletOutputStream.flush();
    servletOutputStream.close();
} catch (IOException ex) {
   //
} catch (Exception ex) {
       //
   } 
```

与您的问题无关，您需要绝对确定路径`/web/ireport/*`是安全的。在我看来，这就像一条可公开访问的路径。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-04T11:29:53.190

对于其他人帮助我发布我的最终工作（已解决）代码

```
public void init() throws IOException, JRException {
    JRBeanCollectionDataSource beanCollectionDataSource = new JRBeanCollectionDataSource(listReportObjects);
    String reportPath = FacesContext.getCurrentInstance().getExternalContext().getRealPath("/web/ireport/monthlyReport.jasper");
    jasperPrint = JasperFillManager.fillReport(reportPath, new HashMap(), beanCollectionDataSource);
    httpServletResponse = (HttpServletResponse) FacesContext.getCurrentInstance().getExternalContext().getResponse();
}

public void pdf() throws IOException, JRException {
    init();
    httpServletResponse.addHeader("Content-disposition", "attachment; filename=report.pdf");
    servletOutputStream = httpServletResponse.getOutputStream();
    JasperExportManager.exportReportToPdfStream(jasperPrint, servletOutputStream);
    FacesContext.getCurrentInstance().responseComplete();
} 
```

和 xhtml

```
<h:commandButton id="getPDF" value="PDF" actionListener="#{monthlyReportBean.pdf}" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-01T05:06:12.550

导出报告后使用`FacesContext.getCurrentInstance().responseComplete();`可能会解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-07T19:56:11.580

我解决了在 h:form 之后移动我的命令按钮的问题，我的意思是，在任何容器之外并且它可以工作，所以当命令在 div 或容器内时，我假设有一些东西，我注意到因为设置了“ajax”属性为 False 但仍然给我和容器的“更新”。

我有这个帮助。

# php - CodeIgniter RESTful，异步/后台进程

> ID：13682695
> 
> 赞同：5
> 
> 时间：2012-12-03T11:53:02.807
> 
> 标签：php, codeigniter, response

我正在使用 codeIgniter RESTful API (https://github.com/philsturgeon/codeigniter-restserver) 将信息（json 格式）返回到我的 android/iphone 应用程序。

有一个操作我发送一些值，如果一切正常，我返回 200 代码作为响应。

现在，我想以相同的方法添加一个新操作：使用 APNS（Apple Push Notificacion Service）和 GCM（Google Cloud Messaging）发送此修改的通知。

当我必须发送不超过 3-5 个通知时，它运行良好，问题是 APNS，因为我必须一一发送此消息并且需要很长时间，所以我的应用程序收到超时异常（所有通知都是已发送但用户收到错误连接...）

我可以发送 200 代码响应，然后继续发送此通知吗？（像这样的东西......）

```
function my_update_method_post(){
   //....GET my POST values
   update($data);
   $this->response(array('result'=>1),200));

   //Send Notifications
   ....
} 
```

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T19:51:48.133

我找到了一个非常适合我的解决方案，因为我不期望任何结果值。如果无法发送通知...我将其记录在我的数据库中。

这是我用来发送“异步”请求的函数（是的，这不是异步请求，但它可以按照我的要求工作）

```
function curl_post_async($url, $params)
{
    $post_string = http_build_query($params);
    $parts=parse_url($url);

    $fp = fsockopen($parts['host'],
        isset($parts['port'])?$parts['port']:80,
        $errno, $errstr, 30);

    if(!$fp)
    {
        //Perform whatever logging you want to have happen b/c this call failed!    
    }
    $out = "POST ".$parts['path']." HTTP/1.1\r\n";
    $out.= "Host: ".$parts['host']."\r\n";
    $out.= "Content-Type: application/x-www-form-urlencoded\r\n";
    $out.= "Content-Length: ".strlen($post_string)."\r\n";
    $out.= "Connection: Close\r\n\r\n";
    if (isset($post_string)) $out.= $post_string;

    fwrite($fp, $out);
    fclose($fp);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:02:25.783

由于 PHP 本身不支持线程或异步函数调用，您将不得不使用一种 hacky 解决方案。看看我的问题：[PHP file_get_contents() follow Content-length header](https://stackoverflow.com/questions/10941150/php-file-get-contents-follow-content-length-header)

解决方案是发送一个`Connection: Close`和`Content-Length`头，然后让客户端知道这些头（见上面的链接）。例如，在 curl 的情况下，一旦达到 Content-Length，连接就会关闭，但您的 PHP 脚本仍然“在后台”运行，因此您可以开始耗时的操作。

亲切的问候，

斯特凡

PS 如果脚本需要很长时间才能执行，请确保 PHP 最大执行时间不会妨碍您

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T12:02:36.297

是的，这是可能的。

你应该看看[PHP exec()](http://php.net/manual/en/function.exec.php)和[这个](http://www.sitecrafting.com/blog/to-run-php-code-in/)链接。您应该在控制器中设置一个函数，以便从命令行调用。然后，您将传入要使用的 GCM/APNS 数据数组。

此解决方案并不理想，因为您将无法告诉客户端所有消息都已成功发送。您将发回 200 表示请求已收到，仅此而已。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-03T04:46:15.100

看看[这篇文章](http://quickshiftin.com/blog/2011/04/non-blocking-web-service-processing-in-php/)。我喜欢这个解决方案不仅仅是让客户端告诉服务器立即挂断；如果您在服务器端构建此解决方案，会有多种好处。

1.  您知道一旦客户端断开连接，服务器将继续处理
2.  客户端仍然可以收到来自服务器的响应

**编辑**

我没有意识到 OP 无法访问此处的服务。在这种情况下，我提到的文章没有什么价值。这里的问题是服务器需要很长时间才能响应并挂起客户端。为此，我建议[curl_multi_init](http://php.net/manual/en/function.curl-multi-init.php)。这允许您同时发出多个请求。

# ios - 为 iOS 照片库实现图像保存的最佳方法

> ID：13682697
> 
> 赞同：1
> 
> 时间：2012-12-03T11:53:10.493
> 
> 标签：ios

在我的 iOS 应用程序中，我想提供保存从 iPhone 相机获得的照片的可能性。我还没有决定如何保存这些图片，然后再给你看。通过阅读 Apple 文档和其他文章，我发现了三种可能的解决方案：

1.  将图像保存到应用程序的 Documents 文件夹中
2.  在我的应用程序中，我还使用核心数据，因此我创建了一个具有可转换属性的实体，可以在其中保存照片
3.  照片库（此功能可在 IOS5 中使用）

您认为其中最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T11:57:35.757

第一个最好，您可以将图像保存到应用程序的 Documents 文件夹中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T15:58:19.880

首先，它取决于您的应用程序的功能，在您的情况下，我想更有可能使用文档目录。您还可以找到以下有用的指南。

*   文档目录具有沙盒的优势。
*   将核心数据中的文件路径和图像存储在文档目录中，并在需要时使用它们。
*   更容易同步文档目录中的核心数据和图像存储。示例：从文档目录和核心数据中删除图像。
*   **最重要的是**，请参阅苹果，**ios数据使用指南**，因为一些应用程序因此被拒绝

    [https://developer.apple.com/icloud/documentation/data-storage/](https://developer.apple.com/icloud/documentation/data-storage/)

    [http://www.chrisboyd.net/post/25806584185/icloud-and-the-new-ios-data-storage-guidelines](http://www.chrisboyd.net/post/25806584185/icloud-and-the-new-ios-data-storage-guidelines)

*   您的客户可能会抱怨备份到 iCloud 的数据过多。

*   记住不要在应用程序启动期间开始在主线程上移动文件的大工作。这将使您的应用程序被启动计时器看门狗杀死。

*   如果你不想要 icloud 备份。你有两个选择：

    1.将您的文件放在缓存目录中，然后它们将不会被备份，Apple 也不会拒绝您的应用程序。但是，当 iOS 5 空间不足时，它可能会删除其中的所有文件 2\. 将文件放入 Documents 但标记它们以便不备份。有一个关于如何做到这一点的技术说明（QA1719）。这仅适用于 iOS 5.0.1 及更高版本

*   您还可以查看此链接以获取更多信息 [http://iphoneincubator.com/blog/data-management/local-file-storage-in-ios-5](http://iphoneincubator.com/blog/data-management/local-file-storage-in-ios-5)

# android - 将设备地址发送到 android -bluetooth 中的 ConnectThread(BluetoothDevice 设备)

> ID：13682698
> 
> 赞同：1
> 
> 时间：2012-12-03T11:53:18.173
> 
> 标签：android, bluetooth

我有一个叫做扫描的按钮，它扫描可用的蓝牙设备并制作一个列表视图。当我按下该设备列表中的某个设备时，'正在调用 ConnectThread(BluetoothDevice 设备)，但如何将点击的设备地址发送到此。'使用下面的代码。在此'能够获取名称但如何获取地址.

```
 ListView lv = getListView();

        // listening to single list item on click
        lv.setOnItemClickListener(new OnItemClickListener() {
          public void onItemClick(AdapterView<?> parent, View view,
              int position, long id) {

              mBluetoothAdapter.cancelDiscovery();
            // Toast.makeText(getApplicationContext(), "clicked device", 2).show();
              String address = mArrayAdapter.get(position);
              device = mBluetoothAdapter.getRemoteDevice(address);

              new ConnectThread(device);
          }
        }); 
```

连接线程代码：

```
 private class ConnectThread extends Thread {
    private final BluetoothSocket mmSocket;
    private final BluetoothDevice mmDevice;

    public ConnectThread(BluetoothDevice device) {
        // Use a temporary object that is later assigned to mmSocket,
        // because mmSocket is final
        BluetoothSocket tmp = null;
        mmDevice = device;
        Toast.makeText(getApplicationContext(), "device: " + device, 2).show();
        // Get a BluetoothSocket to connect with the given BluetoothDevice
        try {
            // MY_UUID is the app's UUID string, also used by the server code
            tmp = device.createRfcommSocketToServiceRecord(MY_UUID);
        } catch (IOException e) { }
        mmSocket = tmp;
    }
    public void run() {
        // Cancel discovery because it will slow down the connection
        mBluetoothAdapter.cancelDiscovery();

        try {
            // Connect the device through the socket. This will block
            // until it succeeds or throws an exception
            mmSocket.connect();
        } catch (IOException connectException) {
            // Unable to connect; close the socket and get out
            try {
                mmSocket.close();
            } catch (IOException closeException) { }
            return;
        }

        // Do work to manage the connection (in a separate thread)
       // manageConnectedSocket(mmSocket);
    }

    /** Will cancel an in-progress connection, and close the socket */
    public void cancel() {
        try {
            mmSocket.close();
        } catch (IOException e) { }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:24:38.490

我找到了这个问题的答案。当我在列表视图中单击项目时，在下面的代码中使用。

```
 ListView lv = getListView();

        // listening to single list item on click
        lv.setOnItemClickListener(new OnItemClickListener() {
          public void onItemClick(AdapterView<?> parent, View view,
              int position, long id) {

              mBluetoothAdapter.cancelDiscovery();

              String info = mArrayAdapter.get(position);
              String address = info.substring(info.length() - 17);
              device = mBluetoothAdapter.getRemoteDevice(address);
              new ConnectThread(device);

          }
        }); 
```

# colors - 在时间序列jfreechart中用颜色填充区域

> ID：13682703
> 
> 赞同：1
> 
> 时间：2012-12-03T11:53:28.033
> 
> 标签：colors, jfreechart, time-series, fill, timeserieschart

我正在尝试生成一个时间序列，下面的区域填充了颜色。

查看 jfreechart 库的示例，有以下方法：

```
ChartFactory.createAreaChart(...) 
```

然而，所需的数据集是一个类别数据集，与我目前创建的时间序列数据集完全不同：

```
ChartFactory.createTimeSeriesChart(...) 
```

我应该使用哪些方法来填充绘制线下方的区域？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:23:02.047

创建图表后添加以下内容（使用`createTimeSeriesChart`）

```
XYPlot plot = (XYPlot) chart.getPlot();
plot.setRenderer(new XYAreaRenderer()); 
```

# c# - Windows Phone 上的 Android.Os.Bundle 等效项

> ID：13682706
> 
> 赞同：0
> 
> 时间：2012-12-03T11:53:35.537
> 
> 标签：c#, windows-phone

我正在创建自己的处理程序方法，我想知道如何实现可选的 Bundle 参数。

在Android中它看起来像

```
public bool updateUI(int mode, Bundle... params)
{    
    switch (mode)
    {
      case 0: return doStuff(params.getString("Name"));
      default: break;
    }
} 
```

这不在[迁移指南](http://windowsphone.interoperabilitybridges.com/articles/windows-phone-guide-for-android-application-developers)中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T11:58:45.570

如何在 .NET Framework 和 Windows Phone 中使用**命名和可选参数：http:**
[//msdn.microsoft.com/en-us/library/dd264739.aspx](http://msdn.microsoft.com/en-us/library/dd264739.aspx)
或者您可以使用**params**关键字来传递任意数量的参数： http:
[//msdn.microsoft.com/en-us/library/w5zay9db (v=VS.100).aspx](http://msdn.microsoft.com/en-us/library/w5zay9db(v=VS.100).aspx)

编辑：不确定 Bundle 实际是如何工作的，但它看起来像一个通用的数据容器。您可以尝试使用**动态**类型和**ExpandoObject**： http:
[//msdn.microsoft.com/en-us/library/system.dynamic.expandoobject (v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject(v=vs.95).aspx)

```
dynamic d = new ExpandoObject();
d.Data = "data";
d.Result = 42;

return d.Data; 
```

[ExpandoObject 的真正好处是什么？](https://stackoverflow.com/questions/1653046/what-are-the-true-benefits-of-expandoobject)

# .net - .NET 2.0 自定义滚动条控件

> ID：13682711
> 
> 赞同：1
> 
> 时间：2012-12-03T11:53:44.237
> 
> 标签：.net

我有带有滚动条控件的 WinForms 应用程序，我需要更改这些`scrollbars`.

除了从头开始创建滚动条控件之外，还有什么方法可以做到吗？我不能使用 WPF，因为目标是 .NET 2.0。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:02:12.483

据我所知，做这样的事情的唯一方法是从标准控件继承，然后覆盖 OnPaint() 方法。

在 .NET 2.0 中，不可能以任何其他方式做到这一点。

如果您改变主意并决定采用自定义控制路径，这里是 CodeProject > [http://www.codeproject.com/Articles/14801/How-to-skin-scrollbars-for-Panels-in的一个很好的例子-C](http://www.codeproject.com/Articles/14801/How-to-skin-scrollbars-for-Panels-in-C)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:04:30.443

```
public class MyScrollBar : VScrollBar
{
    public MyScrollBar()
    {
        SetStyle(ControlStyles.UserPaint, true);
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        e.Graphics.DrawRectangle(SystemPens.ControlDark, e.ClipRectangle.Left, e.ClipRectangle.Top, e.ClipRectangle.Width - 1, e.ClipRectangle.Height - 1);
    }
} 
```

有*一种*方法，但是可能很难保持滚动条轨道和按钮的正确位置。无论如何，你可以从这里开始。

# python - django 应用程序之外的包的单元测试

> ID：13682718
> 
> 赞同：0
> 
> 时间：2012-12-03T11:54:09.693
> 
> 标签：python, django, tdd

在我的 Django 项目中，我有一些包/文件夹本身不是应用程序，但包含使用 Django 模型的代码并且需要包含测试。显然，当我运行“test nonapppackage.testname”时，我得到：

> django.core.exceptions.ImproperlyConfigured：带有标签 xyzutils 的应用缺少 models.py 模块。

为应用外代码配置 unittest 的最佳方法是什么？

# magento - Magento 管理控制器给出 404

> ID：13682722
> 
> 赞同：1
> 
> 时间：2012-12-03T11:54:29.277
> 
> 标签：magento

根据[Alan's blog](http://alanstorm.com/magento_admin_controllers)的说明，我在 config.xml 中添加了路由器：

```
<?xml version="1.0"?>
<config>
    <modules>
        <Clean_Integration>
            <version>1.0.0</version>
        </Clean_Integration>
    </modules>
    <admin>
        <routers>
            <wellnesscoach_app_redirect>
                <use>admin</use>
                <args>
                    <module>Clean_Integration</module>
                    <frontName>appsync</frontName>
                </args>
            </wellnesscoach_app_redirect>
        </routers>
    </admin>
</config> 
```

然后我在这里定义了我的控制器`app/code/local/Clean/Integration/Controllers/IndexController.php`：

```
<?php

die('checkpoint1');

class Clean_Integration_IndexController extends Mage_Adminhtml_Controller_Action {

    public function indexAction() {
        $this->_redirectUrl('/appointments/sync/backend/');
        die('checkpoint2');
    }
} 
```

当我尝试打开此网址时，它会转到前端并抛出 404。

是什么导致 magento 不接这个管理路由器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T12:41:08.773

```
<?xml version="1.0"?>
<config>
  <modules>
      <Clean_Integration>
          <version>1.0.0</version>
      </Clean_Integration>
  </modules>
  <admin>
    <routers>
        <integration>
            <use>admin</use>
            <args>
                <module>Clean_Integration</module>
                <frontName>appsync</frontName>
            </args>
        </integration>
    </routers>
  </admin> 
```

应该是小写`controllers`

app/code/local/Clean/Integration/controllers/IndexController.php

您可能还想把它放在 Adminhtml 文件夹中，这样如果您想添加一个`frontend`和一个`admin`控制器，将来就不会遇到问题。

app/code/local/Clean/Integration/controllers/Adminhtml/IndexController.php

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:12:49.223

我看到您犯的一个错误是将控制器放在名为“Controllers”而不是“controllers”的文件夹中（案例错误）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-08T19:49:08.267

以供将来有此问题的其他人参考：

如果您的控制器不**使用**标准名称`IndexController.php`，您仍然需要使用约定命名*文件*名和*类名。*`...Controller`

因此，如果您的控制器位于*Adminhtml*文件夹中，请将其`ExtensionController.php`命名并在其中命名类`My_Module_Adminhtml_ExtensionController extends ...`

归功于[这篇出色的文章](http://twincreations.co.uk/magento-admin-routers-404-error-the-ultimate-fix/)。HTH。

# java - SAXException：尾部不允许有内容

> ID：13682727
> 
> 赞同：6
> 
> 时间：2012-12-03T11:55:15.520
> 
> 标签：java, xml, exception, exception-handling

这真让我抓狂。我已经将这段代码用于许多不同的项目，但这是第一次给我这种类型的错误。这是整个 XML 文件：

```
 <layers>
    <layer name="Layer 1" h="400" w="272" z="0" y="98" x="268"/>
    <layer name="Layer 0" h="355" w="600" z="0" y="287" x="631"/>
  </layers> 
```

这是我的自制 Xml 类中的可操作代码，它使用 DocumentBuilderFactory 来解析输入其中的 Xml：

```
public static Xml parse(String xmlString)
    {
        DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
        dbf.setNamespaceAware(true);
        Document doc = null;
        //System.out.print(xmlString);
        try
        {
            doc = dbf.newDocumentBuilder().parse(
                    new InputSource(new StringReader(xmlString)));
            // Get root element...
            Node rootNode = (Element) doc.getDocumentElement();
            return getXmlFromNode(rootNode);
        } catch (ParserConfigurationException e)
        {
            System.out.println("ParserConfigurationException in Xml.parse");
            e.printStackTrace();
        } catch (SAXException e)
        {
            System.out.println("SAXException in Xml.parse ");
            e.printStackTrace();
        } catch (IOException e)
        {
            System.out.println("IOException in Xml.parse");
            e.printStackTrace();
        }
        return null;
    } 
```

我正在使用它的上下文是：学校项目来制作一个 Photoshop 类型的图像处理应用程序。该文件与图层一起保存为 .png，此 xml 文件用于 .zip 文件中图层的位置等。我不知道压缩是否添加了一些神秘的额外字符。

感谢您的反馈。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-03T11:57:36.380

如果您在编辑器中查看该文件，您会在结束元素之后看到内容（可能是空格），例如

```
</layers>  <-- after here 
```

值得使用可以突出显示空白字符的工具将其丢弃，例如

```
$ cat -v -e my.xml 
```

将转储“不可打印”的字符。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-03T19:08:28.253

希望这可以在某些时候对某人有所帮助。有效的修复只是将 lastIndexOf() 与子字符串一起使用。这是现场的代码：

```
public void loadFile(File m_imageFile)
{
   try
   {
     ZipFile zipFile = new ZipFile(m_imageFile);

     ZipEntry xmlZipFile = zipFile.getEntry("xml");

     byte[] buffer = new byte[10000];
     zipFile.getInputStream(xmlZipFile).read(buffer);
     String xmlString = new String(buffer);
     Xml xmlRoot = Xml.parse(xmlString.substring(0, xmlString.lastIndexOf('>')+1));
     for(List<Xml> iter = xmlRoot.getNestedXml(); iter != null; iter = iter.next())
     {
       String layerName = iter.element().getAttributes().getValueByName("name");
       m_view.getCanvasPanel().getLayers().add( 
           new Layer(ImageIO.read(zipFile.getInputStream(zipFile.getEntry(layerName))), 
               Integer.valueOf(iter.element().getAttributes().getValueByName("x")),
               Integer.valueOf(iter.element().getAttributes().getValueByName("y")),
               Integer.valueOf(iter.element().getAttributes().getValueByName("w")),
               Integer.valueOf(iter.element().getAttributes().getValueByName("h")),
               Integer.valueOf(iter.element().getAttributes().getValueByName("z")),
               iter.element().getAttributes().getValueByName("name"))
        );
     }
     zipFile.close();
   } catch (FileNotFoundException e)
   {
     System.out.println("FileNotFoundException in MainController.loadFile()");
     e.printStackTrace();
   } catch (IOException e)
   {
       System.out.println("IOException in MainController.loadFile()");
       e.printStackTrace();
   } 
```

}

感谢所有做出贡献的人。我怀疑错误是由 zip 进程或使用 byte[] 缓冲区引入的。任何进一步的反馈表示赞赏。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-01-11T13:38:28.260

我在 XML 的末尾有一些额外的字符，正确检查 XML 或执行 XML 的在线格式，如果 XML 不正确，这将引发错误。我使用 [了在线 XML 格式化程序](http://www.webtoolkitonline.com/xml-formatter.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-18T05:58:09.120

我刚刚在 Sterling Integrator 中遇到了这个错误——当我在十六进制编辑器中查看文件时，它有大约 5 行额外的 char(0) 行，而不是空格。不知道它们来自哪里，但这正是问题所在，尤其是当我基本上是在进行统一转换时，所以 xsl 引擎（在本例中为 xalan）显然将其传递到结果中。在最后一个闭合尖括号之后删除了额外的行，问题解决了。

# excel - 通过 ADO 将 TDataSet 复制到 XLS

> ID：13682731
> 
> 赞同：1
> 
> 时间：2012-12-03T11:55:25.777
> 
> 标签：excel, delphi, ado

我正在尝试使用 ADO 连接将内容从 TDBGrid 复制到 Excel 文件以传输数据。这适用于 <= 255 个字符的值，但不适用于较长的字符串。如何复制长度超过 255 个字符的字符串？

将 DataType 更改为 adLongVarWChar tbl.Columns.Append 不起作用。无论我在创建表时使用什么，ADOQuery 都会获得一个大小为 255 的 varchar 字段。

```
procedure DBGridToExcelADO(DBGrid: TDBGrid; FileName: string; SheetName: string);
var
  cat               : _Catalog;
  tbl               : _Table;
  col               : _Column;
  i                 : integer;
  ADOConnection     : TADOConnection;
  ADOConnectionExcel: TADOConnection;
  ADOQuery          : TADOQuery;
  ScrollEvents      : TScrollEvents;
  SavePlace         : TBookmark;
begin
  //exporting
  ADOConnectionExcel := TADOConnection.Create(nil);
  try
    ADOConnectionExcel.LoginPrompt      := False;
    ADOConnectionExcel.ConnectionString := 'Provider=Microsoft.Jet.OLEDB.4.0; Data Source=' + FileName + ';Extended Properties=Excel 8.0';

    ADOConnectionExcel.Open;
    //WorkBook creation (database)
    cat := CoCatalog.Create;
    cat._Set_ActiveConnection(ADOConnectionExcel.ConnectionObject);
    //WorkSheet creation (table)
    tbl := CoTable.Create;
    tbl.Set_Name(SheetName);
    //Columns creation (fields)
    DBGrid.DataSource.DataSet.First;

    with DBGrid.Columns do
    begin
      for i := 0 to Count - 1 do
        if Items[i].Visible then
        begin
          col := nil;
          col := CoColumn.Create;
          with col do
          begin
            Set_Name(Items[i].Title.Caption);
            Set_Type_(adVarWChar);
          end;
          //add column to table
          tbl.Columns.Append(col, adVarWChar, 20);
        end;
    end;
    //add table to database
    cat.Tables.Append(tbl);

    col := nil;
    tbl := nil;
    cat := nil;

    //exporting
    ADOConnection                  := TADOConnection.Create(nil);
    ADOConnection.LoginPrompt      := False;
    ADOConnection.ConnectionString := 'Provider=Microsoft.Jet.OLEDB.4.0; Data Source=' + FileName + ';Extended Properties=Excel 8.0';
    ADOQuery            := TADOQuery.Create(nil);
    ADOQuery.Connection := ADOConnection;
    ADOQuery.SQL.Text   := 'Select * from [' + SheetName + '$]';
    ADOQuery.Open;

    DisableDependencies(DBGrid.DataSource.DataSet, ScrollEvents);
    SavePlace := DBGrid.DataSource.DataSet.GetBookmark;
    try
      with DBGrid.DataSource.DataSet do
      begin
        First;
        while not Eof do
        begin
          ADOQuery.Append;
          with DBGrid.Columns do
          begin
            ADOQuery.Edit;
            for i := 0 to Count - 1 do
              if Items[i].Visible then
              begin
                //Fails if Length > 255
                ADOQuery.FieldByName(Items[i].Title.Caption).AsString := FieldByName(Items[i].FieldName).AsString;
              end;
            ADOQuery.Post;
          end;
          Next;
        end;
      end;

    finally
      DBGrid.DataSource.DataSet.GotoBookmark(SavePlace);
      DBGrid.DataSource.DataSet.FreeBookmark(SavePlace);
      EnableDependencies(DBGrid.DataSource.DataSet, ScrollEvents);

      ADOQuery.Close;
      ADOConnection.Close;

      ADOQuery.Free;
      ADOConnection.Free;
    end;
  finally
    if Assigned(ADOConnection) and ADOConnection.Connected then ADOConnectionExcel.Close;
    ADOConnectionExcel.Free;
  end;
end; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:00:07.807

您可以使用 Jedi 中的 TJvDBGridExcelExport JVCL (www.delphi-jedi.org/)。我用这个效果很好，这是开源的。

# c# - 如何在 linq 中选择最大字符串来休眠

> ID：13682732
> 
> 赞同：2
> 
> 时间：2012-12-03T11:55:25.977
> 
> 标签：c#, linq, nhibernate, max, linq-to-nhibernate

我有一个**Card**类。这个类有一个按字符串类型的**代码列。**我有一个用于选择最大代码的 linq-to-NHibernte 查询。

```
var q = SessionInstance.Query<Card>()
       .Max(x => x.Code); 
```

例如该列的数据是：`18950,9850`并且期望结果是`18950`并且结果是`9850`。

我将此查询更改为：

```
var q = SessionInstance.Query<Card>()
       .Max(x => int.Parse(x.Code)); 
```

但是上面的查询有这个消息的运行时异常：

```
Expression type 'NhMaxExpression' is not supported by this SelectClauseVisitor. 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:35:01.180

NHibernate 不知道如何将您的`int.Parse`调用转换为 SQL。

最简单的解决方案：使用 SQL。

更复杂和/或更有趣：扩展 NHibernate LINQ 提供程序以支持该调用。谷歌为一些链接[扩展了 nhibernate linq](http://www.google.com/search?q=extending%20nhibernate%20linq)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:32:55.580

尝试使用 Convert.ToInt32 而不是 int.Parse 。看看这里： [http ://social.msdn.microsoft.com/Forums/en/adodotnetentityframework/thread/6c8892db-8df7-4174-b9b0-764dc1df82ad](http://social.msdn.microsoft.com/Forums/en/adodotnetentityframework/thread/6c8892db-8df7-4174-b9b0-764dc1df82ad)

# javascript - 检查 javascript 钩子和调用

> ID：13682736
> 
> 赞同：2
> 
> 时间：2012-12-03T11:55:48.990
> 
> 标签：javascript, html, firebug, reverse-engineering

有没有办法可以检查 html 元素上使用的 javascript？IE。如果我的 javascript 在外部 js 脚本中，是否有办法检查 js 的哪个部分与该 html 对象关联，就像您可以使用 firebug 检查哪些 css 元素附加到 html 一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:12:00.593

在这种情况下，还有一个非常酷的[插件](http://www.sprymedia.co.uk/article/Visual+Event+2)可以帮助您。

这是现场[演示](http://sprymedia.co.uk/VisualEvent/demo/)

# postgresql - 使用 \i 命令从文件读取时，postgreSQL 权限被拒绝

> ID：13682739
> 
> 赞同：6
> 
> 时间：2012-12-03T11:55:55.313
> 
> 标签：postgresql

这是我的问题：

> ```
> myname@ubuntu:~$ sudo su postgres -c "psql template1"
> Password: 
> psql (9.1.6)
> Type "help" for help.
> 
> template1=# \i /create.sql
> /create.sql: Permission denied 
> ```

即使文件在桌面上，我也有这个问题。当我复制 create.sql 的文本并将其粘贴到那里时，它可以工作。

使用 UBUNTU 12.10、postgresql 9.1

感谢您的帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2020-08-08T11:11:23.463

如果您在 windows 中工作，您只需传递由单引号包裹的整个路径。

```
test-# \i 'D:\\person.sql' --- > note here double backslash not single 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-03T12:07:44.753

问题是您已经`psql`以用户身份启动，`postgres`并且您没有授予`postgres`用户读取 SQL 文件的权限。您需要授予它权限。最简单的方法是授予世界读取权限：

```
chmod a+r create.sql 
```

您可以通过更改您的`umask`;来更改分配给文件的默认权限。搜索更多信息。一些程序相当烦人地忽略`umask`并设置限制性文件权限，所以你总是需要知道如何授予权限。见`man chmod`和`man chown`。

顺便说一句，您正在使用一种非常复杂的方法来`psql`以`postgres`用户身份启动。这会做得很好：

```
sudo -u postgres psql template1 
```

* * *

请注意，它`/create.sql`指定了以`create.sql`文件系统 ( ) 的根目录命名的文件`/`。我怀疑这是你的意图。

`/`如果它在您的主目录中，您可能希望将其指定为相对路径（不带前导），例如：

```
template1=# \i create.sql 
```

或者如果它在桌面上并且您已经`psql`在主目录中启动：

```
template1=# \i Desktop/create.sql 
```

# ant - Ant：当前目录下的所有目录

> ID：13682741
> 
> 赞同：0
> 
> 时间：2012-12-03T11:56:20.723
> 
> 标签：ant, directory, ant-contrib

我试图找出我当前目录下的所有目录。当前目录可能包含文件和目录。

在这种情况下，我正在寻找可以为我提供当前目录下所有子目录的现有任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:21:58.890

您需要使用 -path 选项和 -sbudirectory 选项，如下所示：

```
find . -type d -path "./dir1/*.1" -"subdirectory*name" -o -print 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T19:22:48.953

```
<project name="demo" default="run">

    <target name="run">
        <dirset id="dirs" dir="${basedir}/.."/>

        <pathconvert targetos="unix" property="path.unix" refid="dirs"/>

        <echo message="${path.unix}"/>
    </target>

</project> 
```

# java - 如何将 Android 中的 cURL 发送到 REST 服务

> ID：13682742
> 
> 赞同：2
> 
> 时间：2012-12-03T11:56:27.663
> 
> 标签：java, android, rest, curl

我是 android 的新手，我想从我的 REST 服务中获取一些数据，但是我在初始化我发送到我的 REST 服务的方法时遇到了一些问题。你知道 REST 服务使用 cURL 来操作一些数据（POST、PUT、GET、DELETE）。现在如何在 android 中通过 cURL 发送 POST PUT GET DELETE 方法。和使用httppost发送一样吗？或者如何将 cURL 发送到 android 中的 rest 服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:12:46.393

使用[HttpClient](http://developer.android.com/reference/org/apache/http/client/HttpClient.html)，您可以发送 POST、PUT、GET、DELETE 请求。对于示例 POST 请求，请查看[此处](http://www.androidsnippets.com/executing-a-http-post-request-with-httpclient)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-14T21:58:10.237

```
public void postData() {
// Create a new HttpClient and Post Header
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://www.yoursite.com/script.php");

try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
    nameValuePairs.add(new BasicNameValuePair("id", "12345"));
    nameValuePairs.add(new BasicNameValuePair("stringdata", "AndDev is Cool!"));
    httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    HttpResponse response = httpclient.execute(httppost);

} catch (ClientProtocolException e) {
    // TODO Auto-generated catch block
} catch (IOException e) {
    // TODO Auto-generated catch block
}
} 
```

// Newventuresmarket.com // Steven Koelsche` 谢谢布拉克。如果 cURL 需要，您可能还需要调整标题...

```
try {
        httppost.setHeader("Content-Type", "application/json");
        httppost.setHeader("Accept", "application/json"); 
```

# c# - 在 DevExpress "ASPxTreeList" 控件中单击节点时在服务器端进行一些验证

> ID：13682743
> 
> 赞同：0
> 
> 时间：2012-12-03T11:56:32.753
> 
> 标签：c#, javascript, asp.net, devexpress

我试过了，`treeList_OnNodeExpanded()`但是当点击节点时它没有被触发。

有没有其他方法可以实现在服务器端功能中触发的任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:41:53.830

使用[ASPxTreeList.NodeExpanding](http://documentation.devexpress.com/#AspNet/DevExpressWebASPxTreeListASPxTreeList_NodeExpandingtopic)。`e.Cancel`如果要取消扩展，请设置为 true。

# performance - Flash (as3) 在浏览器中的运行速度比在独立时慢

> ID：13682747
> 
> 赞同：1
> 
> 时间：2012-12-03T11:56:40.587
> 
> 标签：performance, actionscript-3, flash

我制作了一个基于 AS3 Netstream 的 Flash 自定义视频播放器。在开发过程中，它从未导致任何显着的 CPU 使用率：Youtube/Vimeo 的 CPU 使用率约为 10% 到 15%，而我自己的播放器则为 20% 到 25%。

现在它在我们的开发网络服务器上运行，它占用了 CPU。

![在此处输入图像描述](../Images/f91ad96033a1f47f54e2cdd9bda0ee48.png)

我尝试将帧速率设置得过低（1fps），但似乎并没有产生任何重大影响。

我们已经在运行播放器的 HTML 页面中试验了 WMODE。`wmode: "direct"`它稍微好一点，但仍远不及 FlashDevelop 中的 CPU 数量。

我很乐意发布您认为相关的所有代码，但目前我对可能导致此问题的原因感到茫然。

更新：

会不会和视频文件格式有关？

更新：

我在多台计算机上尝试过 Chrome 和 Firefox。正如预期的那样，CPU 使用率根据计算机的速度而有所不同，但始终是任何其他视频播放器的 4 或 5 倍。到目前为止，我们发现与其他播放器相比，CPU 较高是由解压缩引起的。如果使用较小的视频格式，效果会更好。但是，这并没有回答主要问题：为什么浏览器中的 CPU 使用率比独立 Flash 中的高得多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T19:26:50.147

在不同的环境下性能可能会有差异，所以请检查以下内容：

*   flashdevelop 是使用调试播放器还是发布播放器？
*   您的浏览器使用的是调试播放器还是发布播放器？
*   是否进行发布或调试构建（如果您使用 Flash IDE，此设置称为“允许调试”）是否重要？在调试播放器和发布播放器上进行测试？
*   你在使用 chrome pepper player (buildin) 吗？
*   您的代码是否有效、经过双重检查、没有运行时错误？
*   你有没有分析内存泄漏的闪存？
*   您在使用 StageVideo 吗？这将在 GPU 上渲染视频，这应该会提供更好的性能（顺便说一句 youtube 和 vimeo）
*   您是否使用其他视频、比特率、编码进行了测试？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T16:59:52.190

我在 Firefox 中禁用了插件容器（在 about:config 中，转到`dom.ipc.plugins.enabled`）`false`，我的 Flex 应用程序现在似乎运行得和在独立播放器中一样快。

# sql - 在 SQL Server 中创建时间间隔

> ID：13682754
> 
> 赞同：2
> 
> 时间：2012-12-03T11:57:21.140
> 
> 标签：sql, sql-server, sql-server-2008, datetime

我在 SQL Server 中有一个存储事件和`datetime`事件的表。我现在希望将这些事件分组为例如*10 分钟间隔*，以显示每组中有多少事件。

我正在寻找类似于以下的结果。有没有人有一个例子，如何做到这一点？

```
 FromTIme                | ToTime                  | Number of Events
    -----------------------------------------------------------------------
    2012-12-03 00:00:00.000 | 2012-12-03 00:10:00.000 |     5
    2012-12-03 00:10:00.000 | 2012-12-03 00:20:00.000 |    15 
```

该查询将在报告中使用，因此我希望能够设置间隔的`@StartDate`和`@EndDate`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T12:40:58.350

你可以这样做：

```
DECLARE @startDate DATETIME = '2012-12-03 00:00:00.000';
DECLARE @endDate   DATETIME = '2012-12-03 00:20:00.000';
DECLARE @counter INT = 1;
DECLARE @nOfIntervals INT = DATEDIFF(minute, @startDate, @endDate) / 10;

;WITH Temp
AS
(
    SELECT n
    FROM (VALUES(0), (1), (2), (3), (4), (5), (6), (7), (8), (9)) Nums(n)
), Numbers
AS
(
    SELECT n = t2.n * 10 + t1.n + 0
    FROM Temp t1
    CROSS JOIN Temp t2
), FromToCTE
AS
(
    SELECT  
      DATEADD(minute, 10 * n, @startDate) FromDate, 
      DATEADD(minute, 10 *(n +1), @startDate) ToDate
    FROM numbers 
    WHERE (n + 1) <= @nOfIntervals
 ),EventsFromTo
 AS
 (
     SELECT 
       c.FromDate,
       c.ToDate,
       e.EventDate
     FROM @Events e
     INNER JOIN FromToCTE c ON e.EventDate BETWEEN c.FromDate AND c.ToDate
 )  
 SELECT FromDate, ToDate, COUNT(*) "Number of Events"
 FROM EventsFromTo
 GROUP BY FromDate, ToDate; 
```

## [现场演示](https://data.stackexchange.com/stackoverflow/query/87746/creating-time-intervals-in-mssql)

这会给你类似的东西：

```
 FromDate                 ToDate          Number of Events
2012-12-03 00:00:00     2012-12-03 00:10:00          5
2012-12-03 00:10:00     2012-12-03 00:20:00          15 
```

## 这是如何运作的？

我使用了一个数字从 0 到 9 的临时表作为锚表：

```
SELECT n
FROM (VALUES(0), (1), (2), (3), (4), (5), (6), (7), (8), (9)) Nums(n) 
```

要生成从 0 到 99 的数字：

```
Numbers
AS
(
    SELECT n = t2.n * 10 + t1.n + 0
    FROM Temp t1
    CROSS JOIN Temp t2
 ) 
```

我使用此表`Numbers`生成从`@startDate`到的时间间隔`@endDate`，我假设两个日期之间的差异不会超过 99 分钟的间隔。如果您想让查询适用于大于 99 的更多范围，只需将表 temp 交叉连接更多次以生成更多数字。后来我使用这些生成的数字来生成日期时间间隔，每个数字之间有 10 分钟的间隔。之后，我将这个生成的表与`Events`事件日期字段上的表连接起来。有了一个`GROUP BY`，`COUNT`我们就完成了。

**请注意：**我没有检查使用两个参数传递给查询的日期差是否`@startDate`可以`@EndDate`被 10 分钟整除，我认为您可能需要在您的情况下检查这一点，我将把它作为作业留给你。

这可能需要做很多工作，但我没有找到不使用光标的简单方法

# regex - 为什么前瞻（有时）比捕获更快？

> ID：13682758
> 
> 赞同：7
> 
> 时间：2012-12-03T11:57:33.790
> 
> 标签：regex, perl, lookahead

这个问题的灵感来自[另一个](https://stackoverflow.com/questions/13666285/how-to-replace-a-followed-by-a-numeric-character-with-the-numeric-character-th)问题。

比较：前者`s/,(\d)/$1/`使用`s/,(?=\d)//`捕获组仅替换数字而不替换逗号，后者使用前瞻来确定逗号是否被数字取代。[如本答案](https://stackoverflow.com/a/13666564/1351191)所述，为什么后者有时更快？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T13:55:58.833

这两种方法做不同的事情并且有不同种类的间接费用。当您捕获时，perl 必须复制捕获的文本。无需消耗的前瞻匹配；它必须标记它开始的位置。您可以使用`re 'debug'`pragma 查看正在发生的事情：

```
use re 'debug';
my $capture = qr/,(\d)/; 
```

```
编译 REx ",(\d)"
最终程序：
   1：精确（3）
   3：打开 1 (5)
   5：数字（6）
   6：关闭 1 (8)
   8：结束（0）
在 0 处锚定“，”（检查锚定） minlen 2
释放 REx: ",(\d)"

```

```
use re 'debug';
my $lookahead = qr/,(?=\d)/; 
```

```
编译 REx ",(?=\d)"
最终程序：
   1：精确（3）
   3：IFMATCH[0] (8)
   5：数字（6）
   6：成功 (0)
   7：尾巴 (8)
   8：结束（0）
在 0 处锚定“，”（检查锚定） minlen 1
释放 REx: ",(?=\d)"

```

在大多数情况下，我希望前瞻比捕获更快，但正如其他线程正则表达式中所述，性能可能取决于数据。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T14:59:33.767

与往常一样，当您想知道两段代码中哪一段运行得更快时，您必须对其进行测试：

```
#!/usr/bin/perl

use 5.012;
use warnings;
use Benchmark qw<cmpthese>;

say "Extreme ,,,:";
my $Text = ',' x (my $LEN = 512);
cmpthese my $TIME = -10, my $CMP = {
    capture => \&capture,
    lookahead => \&lookahead,
};

say "\nExtreme ,0,0,0:";
$Text = ',0' x $LEN;
cmpthese $TIME, $CMP;

my $P = 0.01;
say "\nMixed (@{[$P * 100]}% zeros):";
my $zeros = $LEN * $P;
$Text = ',' x ($LEN - $zeros) . ',0' x $zeros;
cmpthese $TIME, $CMP;

sub capture {
    local $_ = $Text;
    s/,(\d)/$1/;
}

sub lookahead {
    local $_ = $Text;
    s/,(?=\d)//;
} 
```

该基准测试了三种不同的情况：

1.  仅有的 '，'
2.  只有',0'
3.  1% ',0'，其余 ','

在我的机器上和我的 perl 版本上，它会产生以下结果：

```
Extreme ,,,:
             Rate   capture lookahead
capture   23157/s        --       -1%
lookahead 23362/s        1%        --

Extreme ,0,0,0:
               Rate   capture lookahead
capture    419476/s        --      -65%
lookahead 1200465/s      186%        --

Mixed (1% zeros):
             Rate   capture lookahead
capture   22013/s        --       -4%
lookahead 22919/s        4%        -- 
```

这些结果证实了前瞻版本明显快于捕获的假设，除了几乎只有逗号的情况。正如 PSIAlt 在他的评论中已经解释的那样，这确实并不令人惊讶。

问候， 马蒂亚斯

# c# - 在 asp.net mvc 中发布两个及更多列表

> ID：13682770
> 
> 赞同：0
> 
> 时间：2012-12-03T11:58:06.087
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2

我正在使用 asp.net mvc 2，我发现了我无法理解的这种行为。
我有以下观点：

```
<%  using (Html.BeginForm("Index", "BlackListGrabber", FormMethod.Post) )
    {           
<%= Html.DropDownListFor(m => m.selectedArea, new SelectList(Model.areaList, "value", "text")) %>

<%  if (Model.districtList != null) { %>  
<%= Html.DropDownListFor(m => m.selectedDistrict, new SelectList(Model.districtList, "value", "text")) %>
<% } %>

<%  if (Model.townList!= null) { %>  
<%= Html.DropDownListFor(m => m.selectedTown, new SelectList(Model.townList, "value", "text")) %>
<% } %>  

<input type="submit" value="post" />
<% } %> 
```

和控制器的方法是这样的：

```
[HttpPost]
public ActionResult Index(BlackListGrabberModel postedModel)
{
    BlackListGrabberModel model = new BlackListGrabberModel(postedModel);            
    return View(model);
} 
```

最后但并非最不重要的是，我的模型：

```
BlackListGrabberModel(BlackListGrabberModel model)
{
    if (string.IsNullOrEmpty(model.selectedArea))
    {
        areaList = GetRegions();
    }
    else if (string.IsNullOrEmpty(model.selectedDistrict))
    {
        areaList = model.areaList;
        districtList = GetRegions(model.selectedArea);
    }
    else if (string.IsNullOrEmpty(model.selectedTown))
    {
        areaList = model.areaList;
        districtList = model.districList;
        districtList = GetRegions(model.selectedDistrict);
    }
} 
```

想法是然后我加载页面，我看到所有可能区域的列表。（我看到了 - 这是我的第一个下拉列表）当我选择区域时，单击“发布”按钮后，我看到所有区域的列表，它们从外部加载来源，这部分工作正常。

所以我从列表中选择地区，然后单击“发布”。之后我看到位于选定地区的所有城镇的列表，但 DistrictList 消失了。然后我在我的控制器中跟踪它，我发现属性postedModel.districtList 为空。但是postedModel.areaList 没问题！这是否意味着我只能发布一个 SelectList，或者我错过了什么？有人可以给我任何帮助吗？
**PS**属性“selectedArea”、“selectedDistrict”、“selectedTown”按预期发布。

**编辑。**感谢大家，我错过了一些重要的事情，你们给了我方向。
我的问题似乎是 areaList。它由默认构造函数填充。我忘记了这一点，所以后来我看到了postedModel.areaList 填充，我认为它是由asp.net mvc 机制神奇地发布的，并抱怨由于一些奇怪的问题而没有填充所有其他列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:01:05.297

您必须为每个请求重新填充模型中的列表属性。不会自动回发。只有选定的值被回发并绑定到模型中的属性（即已`selectedArea`绑定但未绑定`areaList`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:03:42.793

列表不应该发布，只有您的 html 表单中的选择元素的值才会发布。如果您需要保留列表值，您可以尝试将它们放在您的 GET for Index 中的 TempData 中，这将为下一个请求保留它们。

# html - 网站布局在 Chrome/Safari 中完美运行，但在 Firefox 中无法正常运行

> ID：13682772
> 
> 赞同：1
> 
> 时间：2012-12-03T11:58:11.723
> 
> 标签：html, firefox, google-chrome

所以我在这个网站上努力工作并达到了实际完成的程度，但是它在 Firefox 上不能正常工作，然后在 Chrome/safari 等上工作。在联系页面上，文本字段与右栏重叠。主页在 chrome 和 safari 中延伸得不够远。

我该怎么做才能解决这个问题

网站：[http ://www.growinhealth.org.uk/contact.php](http://www.growinhealth.org.uk/contact.php)

我还在学习 HTML/CSS，所以请放轻松。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:14:35.973

不同的浏览器以不同的方式处理输入字段的宽度，所以我会在输入标签和 textarea 标签中添加一个类，你想像这样固定宽度：

```
 <input class='yourClass'></input>
    <textarea class='yourClass'></textarea> 
```

然后在CSS中固定宽度

```
 .yourClass{width:300px} 
```

至于您的主页，在 Firefox 中，您称为“content1”的 div 似乎太短了，所以我会放入 CSS

```
 #content1{height:1400px} 
```

# tridion - 将 Tridion 组件转储为 XML

> ID：13682775
> 
> 赞同：3
> 
> 时间：2012-12-03T11:58:22.240
> 
> 标签：tridion, tridion-2011, dwt

使用模块化模板将 Tridion 组件内容（基于给定模式，即：非任意）转储到 XML 中的最简单方法是什么？

具体来说，需要将组件的内容传递给/作为 ASP.Net 自定义控件，即类似于：

```
<custom:MyControl runat="server"
    TextField="value1"..>
  <EmbeddedField>
    ..
  </EmbeddedField>
</custom:MyControl> 
```

我看到一种可能的方法是调整**默认 Dreamweaver 组件设计**DWT TBB，但这似乎太费力了。

**编辑**

另一个模糊的主题是上述问题的第二部分：将 XML 嵌入到 ASP.Net 控件标记中。问题是需要对 XML 进行转义。以下脑筋急转弯在 DWT 中执行此操作（假设 Nuno 的 TBB 写入输出）：

```
<custom:MyControl runat="server">
    <xml>
        @@(Output).replace(RegExp.call(null, /&/.toString()[1], "g"), '&').replace(RegExp.call(null, /</.toString()[1], "g"), '<').replace(RegExp.call(null, />/.toString()[1], "g"), '>').replace(RegExp.call(null, String.fromCharCode(34), "g"), '"')@@
    </xml>
</custom:MyControl> 
```

（所有这些只是为了克服 DWT 神秘的 JS 转义规则。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T13:37:51.493

使用以下代码创建 ac# Template Building Block：

```
TemplatingLogger log = TemplatingLogger.GetLogger(GetType());
if (package.GetByName(Package.ComponentName) == null)
{
    log.Debug("Not running in a Component Template, exiting.");
    return;
}
Component component = (Component)engine.GetObject(package.GetByName(Package.ComponentName));
package.PushItem(Package.OutputName, package.CreateStringItem(ContentType.Xml, component.Content.OuterXml)); 
```

并在您的模板中使用它，而无需任何其他构建块。

这将输出 的确切内容`Component.Content`，而这很少是您真正想要的（例如，您如何处理二进制文件或链接组件？），因此您将希望演变为其他内容，包含更多细节，并可能删除来自 XML 节点的命名空间...

我通常使用大的`switch(field.GetType().Name)`，然后根据需要处理每个字段类型，如下所示：

```
foreach (ItemField field in content)
{
    string fieldType = field.GetType().Name;
    switch (fieldType)
    {
        case "XhtmlField":
            // do something, like write it to an XmlWriter
            break; 
```

等等等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T12:33:00.527

我会使用 XSLT 中介，然后使用 XSLT TBB`<xsl:copy-of select="."/>`

如果您没有安装 XSLT 中介，编写一个 C# TBB`.Content`将组件的属性输出到名称为 Output 的包会更简单。有关详细信息，请参阅 Nuno 的代码示例。

# android - 在 CakePhp 的用户身份验证中，每个请求都会发送用户名和密码会减慢应用程序的速度？

> ID：13682778
> 
> 赞同：0
> 
> 时间：2012-12-03T11:58:37.777
> 
> 标签：android, api, cakephp, rest

我正在尝试使用 Cakephp 创建一个 RESTful API 以供 android 应用程序使用。每次 api 请求都发送用户名和密码会减慢应用程序的速度吗？超过 50% 的 API 调用不需要身份验证。并且需要中等级别的安全性，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:16:25.573

它不会减慢应用程序的速度，用户名和密码只会作为标题或额外的 POST 数据发送。但是，如果有人在监视连接，则不是很安全，因为他们可以获取您客户端的用户名和密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:07:39.973

理想情况下，登录成功后，api 应该以 SESSION ID 响应。这个 SESSION ID 应该与每个请求一起发送。

应用程序在每个 api 请求中发送会话 id 是一种相当常见的模式，不会以任何方式减慢应用程序的速度。

# c# - C# - String.Format()

> ID：13682780
> 
> 赞同：-1
> 
> 时间：2012-12-03T11:58:42.503
> 
> 标签：c#, string

我是 C# 的新手。任何人都可以解释以下几行：

```
 string value = "";
        string tempValue = "=Fields!{0}.Value";

        value = RemoveSpace(ReportDataTable.Columns[i].ColumnName);
        value = String.Format(tempValue, value); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-03T12:00:41.443

您需要阅读有关[string.Format](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)的信息，它将指定字符串中的每个格式项替换为对应对象值的文本等效项。

`RemoveSpace`将是诸如[**Trim()**](http://msdn.microsoft.com/en-us/library/t97s7bs3.aspx)之类的方法来删除字符串周围的空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:04:18.850

我假设您希望解释这一行：

```
value = String.Format(tempValue, value); 
```

[String.Format](http://msdn.microsoft.com/en-us/library/fht0f5be%28v=vs.110%29.aspx)从模式和值创建字符串。它是 C# 语言中的静态方法。它接收一个格式字符串，该字符串指定以下参数应插入的位置。格式字符串使用替换标记。

所以用你的值`string.Format`替换这个字符串中的“{0}” 。`"=Fields!{0}.Value"`

**旁注：**您可以（应该）始终先咨询 MSDN。只需将方法输入谷歌，第一个链接可能是文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T12:00:07.403

您正在`value`根据`tempValue`格式格式化，其中 {0} 是占位符
，有关字符串格式的更多信息，[请参阅此](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)

# linux - 问题控制脚本流

> ID：13682781
> 
> 赞同：3
> 
> 时间：2012-12-03T11:58:42.643
> 
> 标签：linux, shell, scripting

我是 shell 脚本的新手，我的脚本似乎没问题，但是我在控制流程时遇到了问题。请有人指出我犯了什么愚蠢的错误。

```
#! /bin/sh

echo "Are you sure youx want to delete $1? Answer y or n"
read ans
echo $ans
if $ans = "y"|"Y"
then
    mv $1 /home/parallels/dustbin
    echo "File $1 has been deleted"
else echo "File $1 has not been deleted"
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:06:19.523

使您的 if 条件如下：

```
if [ "$ans" = "y" -o "$ans" = "Y" ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T05:39:59.833

您的脚本有一些问题。有些是严重的，有些则不那么严重。

一是问题严重。

正如大师建议的那样，您需要使用方括号来包围您的`if`状况。这是因为`if`只测试条件的输出，它不执行实际的字符串比较。传统上，一个名为 的程序（`/bin/test`也称为`/bin/[`）负责处理该问题。如今，该功能已内置到 shell 中，但`/bin/sh`仍然表现得好像它是一个单独的程序。

事实上，`if`当你*不*使用方括号来表示你的情况时，你可以做一些有趣的事情。例如，`if grep -q 'RE' /path/to/file; then`很常见。该`grep -q`命令不发出任何输出，而只是返回由`if`.

第二个严重的问题是你正在呼应一个可能是也可能不是真的状态。我称这是一个严重的问题，因为......好吧，日志消息根本不应该做出虚假声明。如果 中的文件的权限错误`$1`，或者文件名包含空格，则您的`mv`命令将失败，但消息将声称它没有。稍后再谈。

接下来，不太严重的问题。

这些主要是样式和优化的东西。

首先，`read`在大多数平台上都包含一个`-p`允许您指定提示的选项。使用它，您不需要包含`echo`命令。

其次，您的缩进使得很难看到`if`构造正在包装什么。在这么小的程序中，这不是一个大问题，但是随着您的成长，您真的希望遵循一致的标准。

第三，如果您使用`case`语句而不是`if`.

毕竟，这是我编写此脚本的方式：

```
#!/bin/sh

if [ "$1" = "-y" ]; then
  ans=y
  shift
elif [ -t 0 ]; then
  read -p "Are you sure you want to delete '$1' (y/N) ? " ans
fi

case "$ans" in
  Y*|y*)
    retval=0
    if [ -z "$1" ]; then
      retval=64
      echo "ERROR: you didn't specify a filename." >&2
    if [ ! -f "$1" ]; then
      retval=66
      echo "ERROR: file '$1' not found!" >&2
    elif mv "$1" /home/parallels/dustbin/; then
      echo "File '$1' has been deleted" >&2
    else
      retval=$?
      echo "ERROR: file '$1' could not be deleted!" >&2
    fi
    ;;
  *)
    echo "ABORT: file '$1' has not been deleted" >&2
    retval=4
    ;;
esac

exit $retval 
```

除了上面提到的之外，以下是此代码段中的一些内容：

*   `[ "$1" = "-y" ]`- 如果用户指定了一个`-y`选项，那么我们的行为就好像问题是用“是”回答的。
*   `[ -t 0 ]`- 这测试我们是否在交互式终端上。如果我们是，那么用 提问是有意义的`read`。
*   `Y*|y*)`- 在 case 语句中，这匹配任何以大写或小写“y”开头的字符串。因此，有效的肯定回答将是“Y”、“yes”、“yellow”等。
*   `[ ! -f "$1" ]`- 这将测试文件是否存在。您可以`man test`或`man sh`查看 shell 中可用的各种测试。（`-f`可能不是最适合你的。）
*   `>&2`- 在一行的末尾，将其输出发送到“标准错误”而不是“标准输出”。这改变了管道、cron 等处理输出的方式。错误和日志数据通常被发送到 stderr，因此 stdout 可以专用于程序的实际输出。
*   `mv "$1" ...`- 文件名用引号括起来。这可以保护您，以防文件名中包含空格等特殊字符。
*   `$retval`- 此值来自对 中最接近的项目的最佳猜测[`man sysexits`](http://www.unix.com/man-page/all/3/sysexits/)。
*   `retval=$?`- 这是最近执行的命令的退出状态。在这种情况下，这意味着我们将`mv`的退出状态分配给变量`$retval`，因此如果`mv`失败，则整个脚本会报告失败的原因，就目前`mv`而言。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:11:46.227

以下是包含错误处理的完美代码

```
#!/bin/sh

echo "Are you sure you want to delete $1? Answer y or n"
read ans
echo $ans

if [ $ans == "y" ] || [ $ans == "Y" ]
then
    if [ -f $1 ]
    then
           mv $1 /home/parallels/dustbin
           echo "File $1 has been deleted"         
    else
           echo " File $1 is not found"
    fi
else 
    echo "File $1 has not been deleted"
fi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T15:48:38.077

您还可以将用户响应转换为任何一种情况，然后检查相应的情况，例如

```
read ans
ans=${ans,,}  # make 'ans' lowercase, or use ${ans^^} for making it uppercase
if [ "$ans" = "y" ]
then
   ....
fi 
```

# iphone - 带有“左”导航的 iPhone 应用程序。

> ID：13682782
> 
> 赞同：0
> 
> 时间：2012-12-03T11:58:44.947
> 
> 标签：iphone, objective-c, ios

我被要求创建一个带有左侧导航/菜单的 iphone 应用程序。由于没有可用于此的本机 UI 组件，我想知道实现此目的的最佳方法是什么。我记得唯一具有这种功能的应用程序是大约 18 个月前的 Facebook 应用程序。

是否有一个好的 3rd 方 API 来处理这种事情？

左侧导航的说明：屏幕左侧有一个永久的左侧导航，贯穿整个屏幕。当用户选择一个菜单选项时，UIView/UIViewController 从右侧滑入并覆盖菜单。一个小按钮留在屏幕左侧。如果用户选择此按钮，视图将再次滑回右侧，并且左侧导航菜单从视图下方出现，并且可以再次与之交互。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:15:16.100

哪里有问题？只需创建一个带有包含 UIButtons 的子视图的 UIView，您必须自己布局按钮（计算框架）。稍后您将该 leftmenuView 添加到 UiViewCobtroller。

# android - ScrollView里面的RelativeLayout只把widget放到屏幕框里

> ID：13682783
> 
> 赞同：0
> 
> 时间：2012-12-03T11:58:44.970
> 
> 标签：android, android-layout, android-relativelayout

是否可以在RelativeLayout 中使用一长串小部件，这些小部件又被包装到ScrollView 中。

```
<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="800dp"
    android:fillViewport="true" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="800dp"
         >

        <TextView
            android:id="@+id/screen_size_label"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="50dp"
            android:layout_marginTop="30dp"
            android:text="@string/screen_size" />

        <TextView
            android:id="@+id/screen_size_label2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/screen_size_label"
            android:layout_below="@+id/screen_size_label"
            android:text="@string/screen_size_label" />

        <TextView
            android:id="@+id/screen_size_label3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="@+id/screen_size_label"
            android:layout_below="@+id/screen_size_label2"
            android:text="@string/screen_size_label" />

        // each following child uses android:layout_below="@+id/previous" 
```

当我粘贴大量小部件以便实现屏幕底部时，下一个不会像我预期的那样放在前面的小部件之下，而是它们试图适应屏幕框导致混乱。相反，我需要的是把它们放在另一个下面——这样那些不适合屏幕框的东西就可以通过滚动来访问。

当我使用 LinearLayout 而不是 RellativeLayout 时它工作得很好，但是如果可能的话，我想使用 RelativeLayout。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:01:20.970

`Scrollview`将和的高度更改`RelativeLayout`为“fill_ `parent`”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:02:09.120

如果你改变和的高度怎么`Scrollview`办`RelativeLayout`..

```
<ScrollView
android:id="@+id/scrollView1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:fillViewport="true" >

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
     > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:06:00.833

您将滚动视图的高度和相对布局的高度定义为相同，则无需滚动。因此，您将滚动视图的高度更改为 fill_parent，并将 relativelayout 的高度更改为 wrap_content。

# ruby-on-rails - Rails 3 - 计算列

> ID：13682800
> 
> 赞同：2
> 
> 时间：2012-12-03T11:59:27.963
> 
> 标签：ruby-on-rails

我想创建一个计算字段，在轨道 3 上将 column1 和 column2 相乘。

像这样 ：

```
totalpoint = column1 * column2 
```

我必须在哪里放置代码？在模型中？我该怎么写？

从我的角度来看，我该如何称呼它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T12:27:45.220

我认为这更好地放在模型上

```
attr_reader :totalpoint

def totalpoint
  column1 * column2
end 
```

给出你的模型的一些实例`@m`，它可以在任何地方（在一个动作中，在视图中，等等）被访问为

```
@m.totalpoint 
```

您可以简单地从*模型*中访问它

```
@totalpoint 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:06:52.273

`@`在您的控制器中创建将计算放入正在调用的操作中的实例变量（以 开头）中，例如索引：

```
def index
  @totalpoint = column1 * column2
end 
```

在您的视图（index.html.erb）中，您可以使用实例变量：

```
<div>
  Total point = <%= @totalpoint %>
</div> 
```

如果您需要对多行执行此操作，则可以使用数组并在视图中使用它。

# java - 将 Java VisualVM 连接到本地应用程序

> ID：13682801
> 
> 赞同：0
> 
> 时间：2012-12-03T11:59:28.197
> 
> 标签：java, jmx

当我尝试使用以下 cmd 通过显式 JMX 连接将 Java VisualVM 连接到本地应用程序`java -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=9898 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false -jar javaws.jar`时，会出现错误：

> 无法访问 jar 文件 javaws.jar。

但是，当我使用另一个 .jar 文件时，它可以工作。但不适用于 javaws.jar。这个异常的原因是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:28:57.937

可能是该命令无法识别jar 文件palce。

试试这个选项

> java -Dcom.sun.management.jmxremote -Dcom.sun.management.jmxremote.port=9898 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false -jar "%JAVA_HOME %"\jre\lib\javaws.jar

# javascript - 当链接到 nullable-textarea 的 tinymce 留空时，在提交表单时，UI 在 Internet Explorer 9 中变得无响应

> ID：13682803
> 
> 赞同：1
> 
> 时间：2012-12-03T11:59:32.223
> 
> 标签：javascript, jquery, internet-explorer, internet-explorer-9

我是这个论坛的新手。请帮我解决这个问题。

当链接到我的表单中可为空的文本区域的 tinymce 编辑器留空时，在提交表单时，UI 在 Internet Explorer 9 中变得无响应并出现空文本节点。我也可以编辑文本节点。

我删除与 ajaxform 请求成功后与 textarea 链接的 tinymce 编辑器实例，使用`jQuery("#textAreaI").tinymce().remove();`. 我已经通过检查检查它是否被删除`tinyMCE.activeEditor == null`

我的页面还有其他与 tinymce 编辑器链接的文本区域。而且，当我在任何地方提交带有空文本区域的表单时，我都会遇到类似的问题。

它在 Firefox 和 chrome 中运行良好。

# mongodb - 如何检索实体对象的嵌入式列表？

> ID：13682804
> 
> 赞同：0
> 
> 时间：2012-12-03T11:59:34.057
> 
> 标签：mongodb

我有一个简单的问题，将实体的嵌入式集合存储和检索到 mongo。我已经检查了这些问题：

[如何序列化类？](https://stackoverflow.com/questions/8738432/how-to-serialize-class)Mongodb[保存对象列表](https://stackoverflow.com/questions/9551278/mongodb-saves-list-of-object)

我的理解是保存一个列表对象，该对象的类必须扩展ReflactionDBObject。这适用于保存对象，通过使用嵌入式集合检索它不起作用。

这里有一个简单的测试表明检索嵌入式实体不起作用！

```
@Test
  public void whatWasStoredAsEmbeddedCollectionIsRetrieved2() {

       BasicDBObject country = new BasicDBObject();

country.put("name", "Bulgaria");

List<City> cities = Lists.newArrayList(new City("Tarnovo"));

country.put("listOfCities", cities);

DBCollection collection = db().get().getCollection("test_Collection");

collection.save(country);

DBCursor object = collection.find(new BasicDBObject().append("name", "Bulgaria"));

DBObject returnedCity = object.next();

DBObject embeddedCities = (DBObject) returnedCity.get("listOfCities");

System.out.println(embeddedCities);
  } 
```

这里是城市班

```
class City extends ReflectionDBObject {

    String name;

    City() {
    }

    City(String name) {
      this.name = name;
    }

    public String getName() {
      return name;
    }

    @Override
    public boolean equals(Object o) {
      if (this == o) return true;
      if (!(o instanceof City)) return false;

      City city = (City) o;

      if (name != null ? !name.equals(city.name) : city.name != null) return false;

      return true;
    }

    @Override
    public int hashCode() {
      return name != null ? name.hashCode() : 0;
    }

    @Override
    public String toString() {
      return "City{" +
              "name='" + name + '\'' +
              '}';
    }

  } 
```

System.out.println 语句的输出`is [ { "_id" : null }]`

现在如何取回嵌入的对象和其中的嵌入列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T18:58:37.877

如果您不需要定义自己的类 City，您可以使用 BasicDBObjects 定义子文档。我只在 citySubDoc1 和 citySubDoc2 中添加了“名称”字段，但是当然，您可以在这些子文档中添加更多字段。

```
 // Define subdocuments

    BasicDBObject citySubDoc1 = new BasicDBObject();
    citySubDoc1.put("name", "Tarnovo");    

    BasicDBObject citySubDoc2 = new BasicDBObject();
    citySubDoc2.put("name", "Sofia");

    // add to list

    List<DBObject> cities = new ArrayList <DBObject>();
    cities.add(citySubDoc1);
    cities.add(citySubDoc2);

    country.put("listOfCities", cities);

    collection.save(country);

    // Specify query condition 

    BasicDBObject criteriaQuery = new BasicDBObject();
    criteriaQuery.put("name", "Bulgaria");

   // Perform the read

    DBCursor cursor = collection.find(criteriaQuery);

    // Loop through the results
    try {
        while (cursor.hasNext()) {
           List myReturnedListOfCities = (List) cursor.next().get("listOfCities");
           System.out.println(myReturnedListOfCities);
       }
    } finally {
        cursor.close();
    } 
```

# javascript - 从 datepicker 中的参数获取 id

> ID：13682811
> 
> 赞同：0
> 
> 时间：2012-12-03T12:00:08.327
> 
> 标签：javascript, jquery, datepicker

我有一个日期选择器功能，应该将输入字段转换为日期选择器。它运行这样的东西；

```
function activateDatePicker(id){
    $(function() {
            $(id).datepicker({
                defaultDate: "+1w",
                dateFormat: "yy-mm-dd",
                changeMonth: true,
                changeYear: true,
                numberOfMonths: 3,
            });
    });
} 
```

另一个函数将创建必要的输入标记并调用 activateDatePicker 函数以将其转换为 jquery datepicker，例如

```
function createInputTag(input){
    document.getElementById("sometag").innerHTML = 
                                  "<input id="+input+" />";
    activateDatePicker(input);
} 
```

该输入可以是任何内容，我将使用 createInputTag 创建多个日期选择器，每个都有不同的 ID。目前它什么也没做，控制台也没有显示任何错误。有谁知道为什么？我能做些什么来解决它？我希望有一个 javascript 的解决方案，但 jquery 也很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:02:49.850

您的选择器不正确

```
 $(id).datepicker({ 
```

应该

```
 $('#'+id).datepicker({ 
```

也输入..

```
 "<input id="+input+" />"; 
```

在 HTML 中，`<input>`标签没有结束标签。

我不认为你需要在函数中使用 ready 函数......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:14:44.867

除了@bipen 的回复，您可能不应该使用 $(function(){...}); 在你的函数里面：

```
function activateDatePicker(id)
{
        $(id).datepicker({
            defaultDate: "+1w",
            dateFormat: "yy-mm-dd",
            changeMonth: true,
            changeYear: true,
            numberOfMonths: 3,
        });   
} 
```

# c# - Linq 存储过程问题 - 返回一个 int

> ID：13682812
> 
> 赞同：3
> 
> 时间：2012-12-03T12:00:13.587
> 
> 标签：c#, asp.net, linq, linq-to-sql, int

我正在尝试使用 Linq 调用存储过程，存储过程在 SQL 中返回值很好，但是当我将它拖到我的 DBML 文件并尝试从我的代码中调用它时，它返回

> *找不到源类型“int”的查询模式的实现。未找到“选择”。*

我已经查看了我拥有的其他线程和其他存储过程，并且由于某种原因而不是使用`ISingleResult`this 是不同的，我似乎也无法更改返回类型。

这是后面的 DBML 代码

```
[global::System.Data.Linq.Mapping.FunctionAttribute(Name="dbo.displayDetails")]
public int displayDetails([global::System.Data.Linq.Mapping.ParameterAttribute(DbType="VarChar(1)")] string sex, [global::System.Data.Linq.Mapping.ParameterAttribute(DbType="Int")] System.Nullable<int> day, [global::System.Data.Linq.Mapping.ParameterAttribute(DbType="Int")] System.Nullable<int> month, [global::System.Data.Linq.Mapping.ParameterAttribute(DbType="Int")] System.Nullable<int> year, [global::System.Data.Linq.Mapping.ParameterAttribute(Name="PostCode", DbType="VarChar(10)")] string postCode, [global::System.Data.Linq.Mapping.ParameterAttribute(Name="AppTime", DbType="DateTime")] System.Nullable<System.DateTime> appTime, [global::System.Data.Linq.Mapping.ParameterAttribute(DbType="Int")] System.Nullable<int> filter)
{
        IExecuteResult result = this.ExecuteMethodCall(this, ((MethodInfo)(MethodInfo.GetCurrentMethod())), sex, day, month, year, postCode, appTime, filter);
        return ((int)(result.ReturnValue));
} 
```

我的页面代码出现错误

```
 var person = from p in db.displayDetails(sex.ToString(),
                  Convert.ToInt32(dayOfBirth),
                  Convert.ToInt32(monthOfBirth),
                  Convert.ToInt32(yearOfBirth),
                  postCode.ToString(),
                  Convert.ToDateTime(appointmentTime),
                  Convert.ToInt32(resultType))
                  select person;
        {
            p.Forename,
            p.Surname,
            p.AppointmentTime,
            p.Location
        };

        foreach (var record in person)
        {
            lblName.Text = record.Forename + " " + record.Surname;
            lblAppointmentTime.Text = record.AppointmentTime.ToString();
            lblWaitIn.Text = record.Location;
        } 
```

任何有关如何解决此问题的帮助将不胜感激。

更新 - 嗨，这是我的 SP：

```
@sex varchar (1),
@day int,
@month int,
@year int,
@PostCode varchar (10),
@AppTime DateTime,
@filter int

AS
BEGIN

declare @sql nvarchar(max)
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    -- Insert statements for procedure here

Select @Sql = 'SELECT DAY(DateOfBirth) AS DayOfBirth, MONTH(DateOfBirth) AS MonthOfBirth, 
YEAR(DateOfBirth) AS YearOfBirth, DateOfBirth, Sex, AppointmentTime, SchdlRefno, Forename, 
Surname, ClinicCode, Ur, PostCode, Specialty, Location
FROM dbo.tbl_Appointments'

if @filter  = 1
-- show search by just sex, day and month as no more needed for match
Select @sql = @Sql + ' WHERE (DAY(DateOfBirth) = ' + convert(varchar, @day, 103) + ') AND (MONTH(DateOfBirth) = ' + convert(varchar, @month, 103) + ') AND (Sex = ''' + @sex + ''')' 

if @filter  = 2

-- show search by sex, day and month and postcode

Select @sql = @Sql + ' WHERE (DAY(DateOfBirth) = ' + convert(varchar, @day, 103) + ') AND (MONTH(DateOfBirth) = ' + convert(varchar, @month, 103) + ') and (YEAR(DateOfBirth) = ' + convert(varchar, @year, 103) + ') AND (Sex = ''' + @sex + ''') and (postcode = ''' + @postcode + ''')' 

if @filter  = 3

-- show search by sex, day and month, postcode and appointment time

Select @sql = @Sql + ' WHERE (DAY(DateOfBirth) = ' + convert(varchar, @day, 103) + ') AND (MONTH(DateOfBirth) = ' + convert(varchar, @month, 103) + ') and (YEAR(DateOfBirth) = ' + convert(varchar, @year, 103) + ') AND (Sex = ''' + @sex + ''') and (postcode = ''' + @postcode + ''') and (AppointmentTime = ''' + convert(varchar, @AppTime, 121) + ''')' 

print @sql  

Exec sp_executesql  @sql

END 
```

所以，我通过一个过滤器来带回不同的搜索结果。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T12:03:54.827

The problem is the result of your function isn't a collection, it's a scalar value (`int`) therefore can't be projected.

# git - 在 Git 存储库中共享您的公钥 | 将任意 Git 对象推送到远程

> ID：13682814
> 
> 赞同：2
> 
> 时间：2012-12-03T12:00:18.390
> 
> 标签：git

在 Git 中，可以使用`git hash-object`. 这就是我所做的，存储我的公钥，我用它来签署 Git 标签 - 灵感来自 Git 书中的这一章 - [http://git-scm.com/book/en/Git-Internals-Git-References#Tags](http://git-scm.com/book/en/Git-Internals-Git-References#Tags)

所以，我`hash-object`的公钥，为它创建一个带注释的标签，并将标签推送到远程。并且可以推。但是，当其他用户从远程拉取更改时 - 他们看不到这个标签（但是，他们看到其他指向修订的*常规标签）。*

所以，问题是 - 是否可以将存储的任意对象推送到远程`hash-object`？或者，否则，`junio-gpg-pub`密钥实际上是如何存储在 Git 的 Git 存储库中的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T15:14:37.040

其他用户将需要使用`git fetch --tags`您的公钥来获取标签。fetch 命令通常只会检索指向可以从它检索的分支访问的对象的标签；这在选项的文档中有所提及`--tags`。您的公钥不是历史的一部分，因此不会自动获取。

# jquery - Bluehost Wordpress 实例中的 jQuery

> ID：13682815
> 
> 赞同：0
> 
> 时间：2012-12-03T12:00:21.490
> 
> 标签：jquery, javascript, bluehost

我是 Bluehost 和 Wordpress 的新手（我实际上是 Coldfusion 的人！！）。我正在为一位同事构建一个站点，并且我想使用一些 jQuery 功能。从 Bluehost cPanel 我安装并启用了一个 jQuery 插件，但是当我在浏览器中调用我的页面时，我看不到使用 firebug 加载的 jQuery 脚本。使用 $() 和 jQuery() 的 jQuery 函数调用也会产生未知的函数 js 错误。

当我通过 ftp 服务器登录到我的帐户时，我看不到 header.php 文件，在该文件中“wp-enque”脚本，正如其他各种论坛上所建议的那样。

/public_html 目录中有一个名为“wp-blog-header.php”的文件。现在不是wordpress，专家可以在Bluehost上有经验的人帮助我。

更新：我找到了通过站点结构的方法，并在主题文件夹中找到了 header.php 文件，并按照网络上其他博客中的建议添加了以下内容。

```
<?php
function wp_jquery_method() {
    wp_enqueue_script('jquery');            
}    

add_action('wp_enqueue_scripts', 'wp_jquery_method'); 
?> 
```

不走运，因为我仍然无法使用`jQuery()`函数调用来调用 jQuery 函数

问候

安格斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:30:43.013

我已经解决了这个问题，因为我错误地将上面的代码放置在`<?php wp_head(); ?>`与 therme 关联的 header.php 文件中的语句下方是正确的。

这是简单的操作员错误，可能会在深夜完成！很抱歉浪费大家的时间。。

在 [http://digwp.com/2009/06/includes-jquery-in-wordpress-the-right-way/找到了正确的解决方案](http://digwp.com/2009/06/including-jquery-in-wordpress-the-right-way/)

格斯

# javascript - IE 事件不捕获元素

> ID：13682817
> 
> 赞同：0
> 
> 时间：2012-12-03T12:00:27.440
> 
> 标签：javascript, jquery, dom

我正在编写一个防止表单点击的脚本，但我无法让它在 IE7 - 8 中工作，也许有人知道为什么会这样吗？

我尝试使用 ev = e || 窗口.事件；但没有什么好事发生。请帮助，并在未来感谢。

```
(function( button ) {
    $( document ).click(function( e ) {
        ev = e || event;
        var clickedEl = ev.srcElement || ev.target;
        var parentClass = $( button ).attr( 'class' ).split(' ')[0];

        if ( clickedEl !== button && $( clickedEl ).parents( '.' + parentClass ).
length == 0 && !$( clickedEl ).hasClass( parentClass ) ) {

            // DO SOMETHING
        }
    });
})($('.category_select')[0]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:11:58.973

因为您使用的是 jQuery，所以无论浏览器如何，都会将事件对象传递给回调。尽管重要的是要注意您不会收到*“纯”*事件对象：它被包装在一个 jQuery 对象中。要获取*真正*的事件对象，请执行以下操作：

```
var trueEvent = e.originalEvent; 
```

请注意，这应该可以解决问题：IE8 中没有 jQuery`stopPropagation`方法，您必须通过使用`.returnValue = false`和手动更正该方法`.cancelBubble = true`

```
(function( button )
{
    $( document ).click(function( e )
    {
            var ev = e.originalEvent,//this is all you need to do, plus ev is a variable, declare it as such, 
            clickedEl = ev.srcElement || ev.target,//separate var declarations by comma
            parentClass = $( button ).attr( 'class' ).split(' ')[0];
            if ( clickedEl !== button && $( clickedEl ).parents( '.' + parentClass ).length == 0 && !$( clickedEl ).hasClass( parentClass ) )
            {
                // DO SOMETHING
            }
    });
})($('.category_select')[0]); 
```

那应该可以工作
我还查看了 jQuery 参考[这是它在 jQuery 事件对象上所说的](http://api.jquery.com/category/events/event-object/)

# ios - 自定义默认当前位置警报消息 (iOS)

> ID：13682820
> 
> 赞同：2
> 
> 时间：2012-12-03T12:00:35.107
> 
> 标签：ios, cocoa-touch, location

当 iPhone 想要使用用户当前位置时，是否可以自定义默认警报消息。我不仅要更改文本，还要更改默认的蓝屏警报视图。是否可以 ？

![在此处输入图像描述](../Images/8eab4ebea5a1da2d55070cb1b0cae72c.png)

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T12:04:34.173

不可能。从[文档](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/doc/uid/TP40007125)中，

> 重要提示：除了不可用的硬件外，用户还可以选择拒绝应用程序访问位置服务数据。在应用程序的初始使用期间，Core Location 框架会提示用户确认使用位置服务是可以接受的。如果用户拒绝该请求，则 CLLocationManager 对象在以后的请求中向其委托报告一个适当的错误。您还可以使用 authorizationStatus 方法检查应用程序的显式授权状态。

警报由核心位置框架提示。我们无法控制它。

编辑：加起来，来自[这个](https://devforums.apple.com/message/181980#181980)Apple 开发者论坛线程（需要登录）

> 出于隐私原因，所有应用程序都以标准方式显示该警报。用户的当前位置是敏感信息，我们希望确保他们在知情的情况下同意在设备上使用它。我们这样做的方式是为用户提供一个明确、一致的机制来表示同意。如果允许应用程序**覆盖**或禁用警报，那么这种一致性就会丢失。

回答者是苹果员工..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-11T14:21:42.040

多年后，Apple 确实实现了一些自定义选项！

查看文档 [文档](https://developer.apple.com/library/ios/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html "文件")

如果您在 info.plist 中放入以下键之一（取决于您对位置服务的使用），您可以指定一个自定义字符串，该字符串另外显示在默认警报中。

*   NSLocationUsageDescription（从 iOS6 开始可用）
*   NSLocationWhenInUseUsageDescription (iOS8 起)
*   NSLocationAlwaysUsageDescription（iOS8 起）

# c# - 如何使用 Devart 在 C# 中终止正在运行的 sql 查询？

> ID：13682823
> 
> 赞同：0
> 
> 时间：2012-12-03T12:00:39.243
> 
> 标签：c#, .net, winforms, oracle, devart

我想创建自己的 sql 工具，但在终止正在运行的查询时遇到了一点问题。该工具将执行各种 sql 查询：选择、插入、更新等...

我将 Devart 与 c#、winforms 应用程序一起使用。这是我的代码：

```
 try
        {
            dt = null;
            dt = new OracleDataTable();
            dt.Connection = dp.sqlConnection;
            dt.SelectCommand = dp.sqlConnection.CreateCommand();
            dt.SelectCommand.CommandText = tbQuery.Text;
            IAsyncResult aRes = dt.BeginFill(null, null);

            SetStatus("In progress...");
            while (!aRes.IsCompleted)                        
            {
            }
            if (!cancel)
            {
                dt.EndFill(aRes);
                SetDgv(dt);
            }        
        }
        catch(Exception ex)
        {                    
            MessageBox.Show(ex.Message);
        } 
```

此代码正在另一个线程中执行。因此，当我按下取消按钮时，我会：

```
cancel = true; 
dt.CancelFetch(); 
```

它有效，但不适用于每个查询。它适用于这样的查询：select * from temp_table，其中 temp_table 有 100 万条记录。但是..我不使用语句：select column from - 这个查询有非常复杂的“where”部分，它只返回 50 条记录，但来自拥有超过 100 万条记录的表。我无法阻止那个..

你能告诉我如何停止每一个 sql 语句吗？这是杀死调用 BeginFill 方法的线程的好方法吗？

# android - 用于将设备恢复到唤醒模式的 Android 本机计时器？

> ID：13682826
> 
> 赞同：0
> 
> 时间：2012-12-03T12:00:43.967
> 
> 标签：android, timer, android-ndk

我想启动一个计时器，当设备处于低功耗（睡眠）模式时计时器到期时将触发该计时器。

设备仅在硬件事件（按下电源按钮）或任何网络活动（呼叫或数据包接收）时被唤醒（正常模式）。

有没有办法通过android本机层中的计时器将设备恢复到正常模式？

我google了很多，但找不到方法。也尝试使用 timer_create()。但是当设备处于低功耗（睡眠）模式时，它不会被触发。

请让我知道是否有人已经完成了这部分。

实际上，我需要的精度以毫秒为单位，带有 RTC_WAKEUP 的 AlarmManager 位于应用程序层中，在考虑延迟后将过期，这也在 Java 层中。（如果我实现 Jni，它将给应用程序带来一些开销，因为有多个计时器需要在睡眠模式下运行）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:47:22.863

要恢复设备，我认为您可以在这些方面进行探索 1\. PowerMangerService

```
 PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
    PowerManager.WakeLock wl = pm.newWakeLock(PowerManager.SCREEN_DIM_WAKE_LOCK, "My Tag");
    wl.acquire();
    //..screen will stay on during this section..

    wl.release(); 
```

2.屏幕超时设置中的android.provider.Settings.System.SCREEN_OFF_TIMEOUT值。3\. PowerManagerService 的 Intent.ACTION_SCREEN_ON 和 Intent.ACTION_SCREEN_OFF 意图

# android - 将原始 java 数据类型 double 转换为 OData Edm.Double

> ID：13682827
> 
> 赞同：0
> 
> 时间：2012-12-03T12:00:46.883
> 
> 标签：android, geolocation, odata, restlet, edmx

我正在开发一个 Android 应用程序，它检索位置并通过 Restlet [1] 将其发送到 OData 服务器

在 Android 中，位置将经度和纬度设置为双精度。

```
double lat = location.getLatitude(); 
```

我的 Restlet / OData 服务：

```
public class LatLoc {

  private double latitude;

  public void setLatitude(double latitude) {
    this.latitude = latitude;
  }
} 
```

OData $元数据：

```
<EntityType Name="locations">
    <Property Name="latitude" Type="Edm.Double"/> 
```

负责添加实体的方法：（GeoService 是处理 Restlet 连接的类并实现方法 addEntity() ）

```
public class LocTrans {
  GeoService proxy = new GeoService();
  void sendLoc(Location location) throws   Exception, Throwable {
    LatLoc locSend = new LatLoc();
    locSend.setLatitude(location.getLatitude());
    System.out.println("Lat")
    proxy.addEntity(locSend);
  }
} 
```

以XX.XXXXXXXXXXX`println`形式显示“正常”纬度（“。”后至少有 6 位数字）

但是服务器会收到像 XX.XXX 这样的纬度；所以只有小数点后3位。

Restlet 的文档表明 Edm.Double 和原始数据类型 double 是等效的。

我的错误在哪里，双值在发送到服务器时被切断了？

[1] [http://wiki.restlet.org/developers/172-restlet/267-restlet/271-restlet.html](http://wiki.restlet.org/developers/172-restlet/267-restlet/271-restlet.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T12:48:38.720

悲伤的答案：我还没有找到解决 Restlet 问题的方法。

我现在正在使用`odata4j`，这很有效。

```
void sendLocation(Location location, UUID uuid) throws Exception {
   OEntity newLocation = c.createEntity(entitySet)
     .properties(OProperties.guid("trackID", uuid.toString()),
     OProperties.double_("latitude", location.getLatitude()),
     .execute(); 
```

}

# jquery - 如何将其翻译为 jQuery - “如果兄弟姐妹不包含 class = “foo” 的元素做某事......”

> ID：13682828
> 
> 赞同：0
> 
> 时间：2012-12-03T12:01:06.550
> 
> 标签：jquery

如何将其翻译为 jQuery - “如果兄弟姐妹不包含 class = “foo” 的元素做某事......”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:03:06.153

这几乎就像你说的那样：

```
if ($(element).siblings('.foo').length == 0) {
} 
```

*如果元素的具有类 'foo' 的兄弟姐妹不存在，请执行...*

也可以看看：[`siblings(selector)`](http://api.jquery.com/siblings/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:02:44.263

尝试这个，

```
 var siblingssWithoutFooClass = $('#elementId').siblings().not('.foo'); 
```

# android - 使用 OpenCV 库与 android 进行对象识别

> ID：13682833
> 
> 赞同：2
> 
> 时间：2012-12-03T12:01:18.400
> 
> 标签：android, object-recognition

> **可能重复：**
> [我从哪里开始学习图像处理和对象识别？](https://stackoverflow.com/questions/432569/where-do-i-start-learning-about-image-processing-and-object-recognition)
> [有没有在android中实现对象识别的最佳方法？](https://stackoverflow.com/questions/13682406/is-there-any-best-way-for-implemeting-object-recognition-in-android)

我尝试使用 OpenCV 库在我的项目中实现对象识别（人脸跟踪），但是当我在我的设备上运行此应用程序时，我遇到了 openCV 问题，它需要在您的设备中安装 OpenCV 管理器。

我只是想知道是否有任何方法可以在不安装任何外部应用程序或设备中的支持文件的情况下进行对象识别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T13:54:01.330

或者你可以试试[FaceDetector](http://developer.android.com/reference/android/media/FaceDetector.Face.html)类。它从 API 级别 1 开始可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:04:36.860

尝试将 OpenCV 的本机库附加到您的项目并用于`OpenCVLoader.initDebug();`初始化。

# jpa - 不能将 @IdClass 属性用于 @ManyToOne 关系

> ID：13682837
> 
> 赞同：2
> 
> 时间：2012-12-03T12:01:32.220
> 
> 标签：jpa, jpa-2.0

我有一个`Gfh_i18n`实体，带有一个复合键（`@IdClass`）：

```
@Entity @IdClass(es.caib.gesma.petcom.data.entity.id.Gfh_i18n_id.class)
public class Gfh_i18n implements Serializable {

  @Id @Column(length=10, nullable = false)
  private String localeId = null;

  @Id <-- This is the attribute causing issues
  private Gfh gfh = null;
  ....
} 
```

和 id 类

```
public class Gfh_i18n_id implements Serializable {
  private String localeId = null;
  private Gfh gfh = null;
  ...
} 
```

正如写的那样，这是有效的。问题是我还有一个与以下`Gfh`内容有`@OneToMany`关系的课程`Gfh_i18n`：

```
@OneToMany(mappedBy="gfh")
@MapKey(name="localeId")
private Map<String, Gfh_i18n> descriptions = null; 
```

使用 Eclipse Dali，这给了我以下错误：

```
 In attribute 'descriptions', the "mapped by" attribute 'gfh' has an invalid mapping type for this relationship. 
```

如果我只是尝试做，在`Gfh_1i8n`

```
@Id @ManyToOne
private Gfh gfh = null; 
```

它解决了先前的错误，但给出了一个错误`Gfh_i18n`，说明

```
The attribute matching the ID class attribute gfh does not have the correct type es.caib.gesma.petcom.data.entity.Gfh 
```

[这个问题](https://stackoverflow.com/questions/9617859/jpa-map-manytoone-relation-with-idclass-persistence-argumentexception)与我的类似，但我不完全理解为什么我应该使用`@EmbeddedId`（或者是否有某种方式可以使用`@IdClass`with `@ManyToOne`）。

我在 Hibernate (JBoss 6.1) 上使用 JPA 2.0

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-05T00:31:57.773

您正在处理“派生身份”（在 JPA 2.0 规范第 2.4.1 节中描述）。

您需要更改您的 ID 类，以便与“子”实体（在您的情况下`gfh`）中的“父”实体字段对应的字段具有对应于“父”实体的单个`@Id`字段（例如`String`）的类型，或者，如果“父”实体使用`IdClass`, `IdClass`（例如`Gfh_id`）。

在`Gfh_1i8n`中，您应该`gfh`这样声明：

```
@Id @ManyToOne
private Gfh gfh = null; 
```

假设`GFH`有一个`@Id`type 字段`String`，您的 ID 类应如下所示：

```
public class Gfh_i18n_id implements Serializable {
  private String localeId = null;
  private String gfh = null;
  ...
} 
```

# java - 奇怪的浮点除法结果

> ID：13682838
> 
> 赞同：1
> 
> 时间：2012-12-03T12:01:33.550
> 
> 标签：java, grails, groovy, floating-point

我在一个 grails 项目中发生了这个奇怪的除法错误（但我认为 grails 与它无关，我认为是一个 groovy 或 java 问题）：

如果在 groovy 控制台中我运行它

```
float money = -1.30
float r = 0.01

println ((money/r).class.name)
println ((money/r).floatValue())
println ((money/r).toString() ) 
```

我得到这个输出

```
java.lang.Double
-130.0
-129.99999813735482 
```

groovy 中的浮点除法给了我一个 Double，这是正确的，但为什么 Double toString() 给我一个如此奇怪的值“-129.99999813735482”而不是正确的“-130.0”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T12:04:41.533

从[浮点指南](http://floating-point-gui.de/basic/)：

> **为什么我的数字，比如 0.1 + 0.2 加起来不是很好的 0.3 轮，而是得到一个奇怪的结果，比如 0.30000000000000004？**
> 
> 因为在内部，计算机使用的格式（二进制浮点）根本无法准确表示 0.1、0.2 或 0.3 之类的数字。
> 
> 当代码被编译或解释时，你的“0.1”已经被四舍五入到该格式中最接近的数字，这会在计算发生之前导致一个小的舍入误差。

具体来说，1.3 和 0.01 都不能准确地用 a 表示`float`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-03T12:07:38.317

正如每个人所说，`double`对于`float`你想要做的事情还不够精确。

一种解决方案是不用`float`作您的对象类型，并执行以下操作：

```
def money = -1.30
def r = 0.01

println ((money/r).class.name)
println ((money/r).floatValue())
println ((money/r).toString() ) 
```

如您所见，[Groovy 使用`BigDecimal`](http://groovy.codehaus.org/Groovy+Math)，这意味着输出为：

```
java.math.BigDecimal
-130.0
-130 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T12:06:05.607

通过执行`floatValue`，您限制了值的精确度。所以 JVM 进行了舍入，你得到了不同的值。

在你说“但是 130.0 应该是计算出来的值，因为它是正确的”之前，请记住计算机使用二进制格式来表示十进制数，这会导致小数的舍入错误（尝试用二进制表示 0.3 以了解原因） .

# google-app-engine - GAE 的 bigquery v2 超时

> ID：13682839
> 
> 赞同：2
> 
> 时间：2012-12-03T12:01:39.147
> 
> 标签：google-app-engine, google-bigquery, google-api-python-client

我正在谷歌应用引擎中从我的应用对 BigQuery 进行查询，有时会从 BQ 收到奇怪的结果（发现#restDescription）。我花了一些时间才明白只有当我查询的数据量很大时才会出现问题，从而使我的查询在 10 秒内超时。

我在这里找到了对我的问题的一个很好的描述： [Bad response to a BigQuery query](https://stackoverflow.com/questions/13628104/bad-response-to-a-bigquery-query-kinddiscoveryrestdescription-instead-of-bigq)

再次阅读 GAE 文档后，我发现应该在[***几秒钟***](https://developers.google.com/appengine/docs/python/runtime#The_Sandbox)内处理 HTTP 请求。所以我想，这只是一个猜测，bigquery 也可能以同样的方式限制自己，因此，必须“在几秒钟内”响应我的查询。

如果是这种情况，首先，我会有点惊讶，因为我的 bigquery 请求肯定会花费几秒钟以上......但无论如何，我通过强制我的 1 秒超时进行了测试查询，然后通过轮询 API 调用 getQueryResults 来获取 queryResult。

结果非常有趣。BigQuery 在 3 秒内或多或少地返回一些东西（不是我问的 1），然后我稍后会在 26 秒内通过轮询获得结果。这看起来像是规避了 10 秒超时问题。

但我几乎看不到自己在生产中做这个把戏。

有人遇到过与 BigQuery 相同的问题吗？当查询持续时间超过“几秒钟”时，我应该怎么做？

这是我用来查询的代码：

```
query_config = {
            'timeoutMs': 1000,
            "defaultDataset": {
                "datasetId": self.dataset,
                "projectId": self.project_id
            },
        }
query_config.update(params)
result_json = (self.service.jobs()
                       .query(projectId=project,
                       body=query_config)
                      .execute()) 
```

为了检索结果，我用这个进行投票：

```
self.service.jobs().getQueryResults(projectId=project,jobId=jobId).execute() 
```

这些是 BigQuery 上发生的事情的日志：

```
2012-12-03 12:31:19.835 /api/xxxxx/ 200 4278ms 0kb Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1
xx.xx.xx.xx - - [03/Dec/2012:02:31:19 -0800] "GET /api/xxxxx/ HTTP/1.1" 200 243 ....... ms=4278 cpu_ms=346 cpm_usd=0.000426 instance=00c61b117c1169753678c6d5dac736b223809b
I 2012-12-03 12:31:16.060
URL being requested: https://www.googleapis.com/discovery/v1/apis/bigquery/v2/rest?userIp=xx.xx.xx.xx
I 2012-12-03 12:31:16.061
Attempting refresh to obtain initial access_token
I 2012-12-03 12:31:16.252
URL being requested: https://www.googleapis.com/bigquery/v2/projects/xxxxxxxxxxxx/queries?alt=json
I 2012-12-03 12:31:19.426
URL being requested: https://www.googleapis.com/bigquery/v2/projects/xxxxxxxx/jobs/job_a1e74a6769f74cb997d998623b1b6b2e?alt=json
I 2012-12-03 12:31:19.500 
```

这是我的查询 API 调用返回给我的。在元数据中，状态为“正在运行”：

```
{u'kind': u'bigquery#queryResponse', u'jobComplete': False, u'jobReference': {u'projectId': u'xxxxxxxxxxx', u'jobId': u'job_a1e74a6769f74cb997d998623b1b6b2e'}} 
```

使用 jobId，我可以在 26 秒后检索结果，当它们准备好时。

一定有别的办法！我究竟做错了什么？

# javascript - jquery post后记住密码

> ID：13682842
> 
> 赞同：0
> 
> 时间：2012-12-03T12:01:45.763
> 
> 标签：javascript, jquery

这是代码

```
<script type='text/javascript'>

$("#focusform").submit(function(event) 
{

event.preventDefault();

  var $form = $( this ),

        usname = $form.find( 'input[name="name"]' ).val(),

        uspass = $form.find( 'input[name="pass"]' ).val();
        if($('#chk').is(':checked')) var checked='yes';
        else var checked='no';
          $.post("/login/submit/", { name: usname, pass: uspass, checkbox: checked, template_framed:"yes",submit: "yes" }, function(data)
 {

     if(data=='error'){
       alert("You have made an error");

       return false;

     }
     else{
        if(checked=='yes')window.location='/usercookie/';
        else window.location='/login/success/';
        return true;

     }
  });

 });

 </script> 
```

但是浏览器不想提示是否保存密码。你不能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:04:50.207

我会做一个预检查并使用 Ajax 来检查是否正确，这将返回错误或成功消息，如果成功继续发布表单，否则使用 Ajax 显示错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T05:24:30.213

```
<iframe id="temp" name="temp" src='/engine/blank.html' style="display:none"></iframe>
<form id='focusform' target='temp' method='post' onsubmit="return mySubmit()">
...
</form>
<script type='text/javascript'>

function mySubmit()
{

  var $form = $("#focusform"),

        usname = $form.find( 'input[name="name"]' ).val(),

        uspass = $form.find( 'input[name="pass"]' ).val();
        var checked = ($('#chk').is(':checked')?'yes':'no');
          $.post("/login/submit/", { name: usname, pass: uspass, checkbox: checked, template_framed:"yes",submit: "yes" }, function(data)
 {

     if(data=='error'){
       alert("<?=$lang['made_error']?>");

     }
     else{
        alert("Loged in");
     }
  });

}

 </script> 
```

它有效:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:06:05.403

`<form>`如果您没有`action`URL 并且没有提交按钮，浏览器将不会提供保存密码。您的密码字段也必须是`<input type="password" />`.

当您尝试以这种方式使用 jQuery 分配提交功能时，它不起作用：

```
$("#focusform").submit( ... 
```

但是，如果您`onsubmit`向表单添加属性，它确实有效：

```
<form id="focusForm" action="page.php" method="post" onsubmit="return mySubmit()">
                                                               ^^ here 
```

然后在您的提交函数中返回 false：

```
function mySubmit()
{
    // do the jquery ajax or whatever you want to do here

    return false;
} 
```

# objective-c - 防止应用程序备份文档文件夹？

> ID：13682859
> 
> 赞同：4
> 
> 时间：2012-12-03T12:03:00.143
> 
> 标签：objective-c, ios, xcode, backup, icloud

我试图阻止我的应用程序将文件备份到 iCloud，但已经变得完全混乱并且有点迷失。

-编辑-

由于下面的海报，我已经更新了这个以反映我所做的更改。

我想防止备份下载到应用程序文档目录的文件。

到目前为止，我有一个`PreventBackup`使用以下方法调用的类：

```
+ (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{    
   NSError *error = nil;
   BOOL success = [URL setResourceValue: [NSNumber numberWithBool: YES]
                              forKey: NSURLIsExcludedFromBackupKey error: &error];
   if(!success){
       NSLog(@"Error excluding %@ from backup %@", [URL lastPathComponent], error);
   }
   NSLog(@"prevent backup method called without error");
   return success;
} 
```

然后在应用程序启动时使用此代码调用它：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSURL *pathURL= [NSURL fileURLWithPath:documentsDirectory];
[PreventBackup addSkipBackupAttributeToItemAtURL:pathURL]; 
```

cosole 打印`prevent backup method called without error`，但应用程序仍显示为具有与以前相同数量的数据进行备份。

知道这是哪里出错了吗？

-编辑2-

好的，我想这已经解决了。这些文件正在下载到名为“downloads”的子文件夹中。更改上面的代码，使其如下所示似乎已经完成了诀窍：

```
NSString *downloadsFolder = [documentsDirectory stringByAppendingPathComponent:(@"/downloads")];
NSURL *pathURL= [NSURL fileURLWithPath:downloadsFolder];
[PreventBackup addSkipBackupAttributeToItemAtURL:pathURL]; 
```

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-03T12:12:55.407

```
- (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
{

    assert([[NSFileManager defaultManager] fileExistsAtPath: [URL path]]);

    NSError *error = nil;
    BOOL success = [URL setResourceValue: [NSNumber numberWithBool: YES]
                                  forKey: NSURLIsExcludedFromBackupKey error: &error];
    if(!success){
        NSLog(@"Error excluding %@ from backup %@", [URL lastPathComponent], error);
    }
    return success;
}

NSURL *documentURLWithExtension = [documentURL URLByAppendingPathExtension:extensionType]; 
```

将这个“ `documentURLWithExtension`”传递给这个函数

```
[self addSkipBackupAttributeToItemAtURL:documentURLWithExtension]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-16T10:48:46.437

**在斯威夫特：**

```
//Path of document directory
var docPathAry : NSArray! = NSSearchPathForDirectoriesInDomains(.DocumentDirectory, .UserDomainMask, true)
var docDirPathStr: AnyObject? = docPathAry.count > 0 ? docPathAry[0] : nil

self.addSkipBackupAttributeToItemAtURL(NSURL.fileURLWithPath(docDirPathStr as NSString)) 
```

和：

```
func addSkipBackupAttributeToItemAtURL(URL: NSURL!) -> Bool {
    assert(NSFileManager.defaultManager().fileExistsAtPath(URL.path))
    var err : NSError? = nil
    var success : Bool! = URL.setResourceValue(NSNumber.numberWithBool(true), forKey: NSURLIsExcludedFromBackupKey, error: &err)

    if(!success) {
        println("Error excluding \(URL.lastPathComponent) from backup\(err) ")
    }

    return success
} 
```

# sql - Oracle 版本之间的差异

> ID：13682862
> 
> 赞同：0
> 
> 时间：2012-12-03T12:03:05.713
> 
> 标签：sql, oracle, oracle10g, oracle11g, oracle9i

1.  在 9i 中有效的 SQL 语句在 11g 中仍然有效吗？
2.  11g 中是否有 9i 中没有的新功能？
3.  有效的 9i SQL 语句和 11g 中的相同语句之间是否存在行为差异？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:45:34.080

1.  在 9i 中有效的 SQL 语句在 11g 中仍然有效。Oracle 非常努力地确保向后兼容。当然，在某些情况下，旧版本的 Oracle 接受了实际上在语法上无效的 SQL 语句，而不是在更高版本正确引发错误的情况下引发错误。但这非常罕见。

2.  如果您对已在不同版本的 Oracle 中添加的功能感兴趣，那么您最好阅读[新功能指南的 SQL 语言改进一](http://docs.oracle.com/cd/B19306_01/server.102/b14214/chapter1.htm#OBJECTIVENO04030)章和[SQL 参考的 SQL 语言一章](http://docs.oracle.com/cd/B28359_01/server.111/b28286/wnsql.htm#sthref5)的新增功能。

3.  如果您要询问行为差异，那主要是对错误假设的依赖。例如，很多人认为`ORDER BY`如果查询包含`GROUP BY`. 这绝不是 Oracle 鼓励的假设，但 Oracle 碰巧对数据进行排序以执行`GROUP BY`. 在[10.2 中添加 hash group by 操作后](http://www.juliandyke.com/Optimisation/Operations/HashGroupBy.html)，Oracle 不再总是将数据排序为数据分组的副产品。这导致许多开发人员不得不返回代码来添加`ORDER BY`子句。由于不同的优化器设置，其他 SQL 语句在 11g 中的执行方式不同（特别是如果您从 9i 中的基于规则的优化器迁移）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-03T12:45:03.517

> 在 9i 中有效的 SQL 语句在 11g 中是否仍然有效

在某些情况下，以前有效的 SQL 语句在以后的版本中变得无效。例如，Oracle 8 和 9 之间的 IIRC，该`mod`函数用作中缀运算符变得非法；ie`select 12 mod 3 from dual`在 Oracle 8 中有效，但在 Oracle 9`select mod(12,3) from dual`中无效。（在两个版本中都有效）

> 11g 中是否有 9i 中没有的新功能

是的，当然，但列出它们将超出此答案的范围。

> 有效的 9i SQL 语句和 11g 中的相同语句之间是否存在行为差异

存在可能导致不良“影响”的行为差异。两个例子：

1.  查询优化器。在每个新版本中，由于新的查询优化器可能会选择与旧的查询优化器不同的、劣质的计划，因此某些查询的执行速度可能会显着变慢。

2.  分组依据：在 Oracle 9i 之前，`group by`提供排序结果。（`order by`不完全相同`order by`的**顺序**`group by`像. 因此，许多开发人员在该子句与该子句`order by`相同时省略了该`group by`子句。这在 Oracle 10g 中发生了变化，显然 10g 使用哈希表而不是排序树进行分组。正因为如此，一些程序在 10g 中提供的结果与在 9i 中不同。 *（注意：忽略预期的排序结果**一直是个坏主意）`order by`*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T12:06:40.633

是的当然。查看 Oracle Database SQL Language References 的第一章，例如[http://docs.oracle.com/cd/B28359_01/server.111/b28286/wnsql.htm#sthref5](http://docs.oracle.com/cd/B28359_01/server.111/b28286/wnsql.htm#sthref5)

# c# - 动态刷新 XML 文件的内容

> ID：13682863
> 
> 赞同：-1
> 
> 时间：2012-12-03T12:03:06.593
> 
> 标签：c#, xml, database

我有一个 XML 文件，其中包含来自 SQL 的数据`DataSource`。将新数据添加到数据库时，我需要动态刷新文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:06:00.613

使用[DataSet.GetXML](http://msdn.microsoft.com/es-es/library/system.data.dataset.getxml.aspx)

查询数据库并填充适配器后，如果检测到数据更改，则使用填充的数据集将 XML 保存到磁盘：

```
string file ="c:\\newxml.txt";
System.IO.File.WriteAllText(file, ds.GetXml()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:06:50.847

您应该查看数据库触发器 - [http://msdn.microsoft.com/en-us/library/aa258254%28v=sql.80%29.aspx](http://msdn.microsoft.com/en-us/library/aa258254%28v=sql.80%29.aspx)。

创建一个插入触发器，该触发器将在添加数据时填充或更新 xml 文件。这应该是一个可行的解决方案，因为没有分配插入。

# jquery - IE 中的部分视图验证错误

> ID：13682864
> 
> 赞同：0
> 
> 时间：2012-12-03T12:03:15.247
> 
> 标签：jquery, asp.net-mvc

我在另一个视图中有部分视图。部分视图是“登录”部分。我正在使用 jquery 验证。请看附图。

![在此处输入图像描述](../Images/1ee6deb88698de991e6d7959b09d0710.png) 这里的要求是，谁已经注册，他们将输入用户名/密码并进入下一页。（在登录部分视图中）和那些尚未注册的人，他们将输入电子邮件/密码/全名并进入下一页。（在主视图中）

在主视图中，必填字段很少。例如：电子邮件、密码等。现在的问题是，如果我在登录部分视图中输入用户名/密码，它不允许我继续。它给了我主视图中必填字段的错误。

这仅在 IE In FF 和 Crome 中发生，它可以按我的意愿工作。

知道在这种情况下该怎么办吗？

代码：登录部分：

```
<script src="<%: Url.Content("~/Scripts/jquery.validate.min.js") %>"    type="text/javascript"></script>
<script src="<%: Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js") %>"     type="text/javascript"></script>

<% using (Html.BeginForm("LogOn", "Account", new { returnUrl =     Request.QueryString["returnUrl"] }))
 { %>

<div>
        <div class="editor-label">
            <%:Html.Label("Email") %>

        </div>
        <div class="editor-field">

             <%:Html.TextBoxFor(m => m.UserName, new { style = "width:350px;" })%>
        </div>
        <div class="editor-label">
             <%:Html.LabelFor(m => m.Password)%>
        </div>
        <div class="editor-field">

            <%:Html.PasswordFor(m => m.Password, new { style = "width:350px;" })%> 
        </div>
        <p>
            <input type="image" value="Log On" title="Log On"     src="../../Content/images/signinnew.png"/>
        </p>
</div>
<%} %> 
```

主要观点：

```
<script type="text/javascript">
$(document).ready(function () {

    <%if (User.Identity.IsAuthenticated)
    { %>
        $("#logindata").hide();

    <%}
    else
    {%>
    $('#logindata').load("/Account/LogOn?returnUrl= <%:HttpContext.Current.Request.RawUrl%>"); 
    <%} %>
</script>

<%using (Html.BeginForm())
 { %>
<fieldset>
    <legend></legend>

     <div id="logindata" style="border-bottom-style: solid; border-bottom-width: 1px; border-bottom-color: #CCCCCC;margin-bottom:10px;">
         **// I am loading the logon partial view here.**
     </div>

     <div class="editor-label">
        <%: Html.LabelFor(m => m.DeliveryInfo.Email)%>
     </div>
     <div class="editor-field">
        <%: Html.TextBoxFor(m => m.DeliveryInfo.Email)%>    
     </div>
     <div id="tohide">
     <div class="editor-label">
        <%: Html.LabelFor(m => m.DeliveryInfo.Password)%>
     </div>
     <div class="editor-field">
        <%: Html.PasswordFor(m=>m.DeliveryInfo.Password)%>    
     </div>
     <div class="editor-label">
        <%: Html.LabelFor(m => m.DeliveryInfo.ConfirmPassword)%>
     </div>
     <div class="editor-field">
        <%: Html.Password("ConfirmPassword")%>    
        <br />
        <%:Html.ValidationMessageFor(m=>m.DeliveryInfo.ConfirmPassword) %>
     </div>
     </div>
     <div class="editor-label">
        <%: Html.Label("Fullname")%>
     </div>
     <div class="editor-field">
        <%: Html.TextBoxFor(m => m.DeliveryInfo.Name)%>    
     </div>         
</fieldset>    
</div>
<%}%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:27:33.043

我可以看到部分视图的 Html.BeginForm 但我看不到主视图的那个，所以我假设 Html.BeginForm 也覆盖了部分视图，这总是会导致在提交按钮时触发必填字段为局部视图按下。

```
<div id="logindata" style="border-bottom-style: solid; border-bottom-width: 1px; border-bottom-color:    
     #CCCCCC;margin-bottom:10px;">
     **// I am loading the logon partial view here.**
 </div>

<% using (Html.BeginForm("ActionMethod", "Controller"))
   { %>
     <div class="editor-label">
        <%: Html.LabelFor(m => m.DeliveryInfo.Email)%>
     </div>
     ......

 <%} %>
 </fieldset> 
```

# html - 如何禁用文本区域内的文本拖放？

> ID：13682866
> 
> 赞同：0
> 
> 时间：2012-12-03T11:36:22.137
> 
> 标签：html, user-interface, drag-and-drop, textarea

我正在做 UI 设计，我需要使用 Html textarea 对象。示例代码是：

```
<textarea rows="5" cols="60" spellcheck="false" style="font-size:12px; font-family: Verdana;">
Abc
Xyz
Mnp
Pqr
</textarea> 
```

我不想禁用 textarea，因为存在一些跨浏览器问题。如果我指向'xyz'中的'y'并将其拖动到文本'Mnp'之后，它将被移动为'Mnpyz'。我想避免文本区域内文本的这种拖放功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:09:12.853

### 如果您希望用户不更改 的内容`textarea`，可以使用`readonly`属性。

```
<textarea rows="5" cols="60" spellcheck="false" style="font-size:12px; font-family: Verdana;"
    readonly="readonly">
Abc
Xyz
Mnp
Pqr
</textarea> 
```

# c# - 从后面的代码中设置一个 web.config 中多个位置元素的授权部分

> ID：13682867
> 
> 赞同：0
> 
> 时间：2012-12-03T12:03:48.327
> 
> 标签：c#, asp.net, web-config

我在一个 web.config 文件中有两个 location 元素，并且想更改后面代码中的授权。

web.config 位置部分如下所示：

```
<configuration>
  <location path="~">
    <system.web>
      <compilation debug="false" targetFramework="4.0"/>
      <authorization>
        <allow roles=""/>
        <deny users="*"/>
      </authorization>
    </system.web>
  </location>

  <location path="~/SubPage">
    <system.web>
      <compilation debug="false" targetFramework="4.0"/>
      <authorization>
        <allow roles=""/>
        <deny users="*"/>
      </authorization>
    </system.web>
  </location>
</configuration> 
```

从后面的代码中，我想浏览位置元素，然后对特定的位置元素进行更改。例如，后面的 c# 代码将是：

```
Configuration myConfig = WebConfigurationManager.OpenWebConfiguration("~");
ConfigurationLocationCollection locations = myConfig.Locations;
foreach (ConfigurationLocation location in locations)
{   
   if (location.Path = "~")
   {
     //define & clear the authorization section of the particular location element.
     //create and apply rule for allow in that authorization section.
     //create and apply rule for deny  in that authorization section.
     //save the change

   }

   if (location.Path = "~/SubPage")
   {
     //define & clear the authorization section of the particular location element.
     //create and apply rule for allow in that authorization section.
     //create and apply rule for deny  in that authorization section.
     //save the change

   }

} 
```

我在这里尝试了几种不同的方法，但是到目前为止我还没有一种实际可行的解决方案...我需要将任何更改合并到根目录中的 web.config (~) （任何更改都必须反映在这个文件中，而不是子页面中的其他文件）。有什么推荐的工作解决方案来填补空白吗？目的是允许管理员用户在管理员用户界面上进行更改，以决定允许内部网络上的哪些用户或 Windows 组查看这两个位置，所以我特别想从后面的代码中更改允许的角色。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:49:51.317

经过几次尝试，放弃尝试对同一个文件进行所有更改，而是简单地在每个 location.Path 中打开一个新的配置管理器实例。

WebConfigurationManager.OpenWebConfiguration(location.Path)，然后将规则应用于每个位置的每个单独的 web.config。我无法将所有授权集中在一个地方，但至少它是有效的。

# file-format - AVI 文件头“文件大小”字段与文件的实际大小不匹配

> ID：13682868
> 
> 赞同：0
> 
> 时间：2012-12-03T12:03:51.040
> 
> 标签：file-format, avi

好的，所以我目前正在尝试**从一组位图制作 avi**。
所以我**在十六进制编辑器中打开了一个示例 avi 文件**来检查。它从“RIFF”开始。**接下来的四个字节**代表**文件大小**：我在 HEX 中得到**“40 6A EA 00” 。**现在这**转换**为十进制的 1080748544 和一些**128 MB**。但该文件实际上**只有 15 MB**。
是什么赋予了？

迪格维杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T05:19:35.033

哈哈好吧，我得到答案了。基本上文件大小是以**小端**格式给出的，因此我计算的是错误的大小。
**“40 6A EA 00”**确实转换为**128 MB**。然而， **“00 EA 6A 40”** *（EA 是最重要的字节）*实际上是大约**15 MB**

迪格维杰

# maven - Maven：处理真正的循环依赖

> ID：13682872
> 
> 赞同：0
> 
> 时间：2012-12-03T12:03:57.537
> 
> 标签：maven, circular-dependency

我的情况有些复杂，我不确定设置 Maven 环境的最佳方法是什么。

我正在编写一个框架来允许为特定系统创建测试。该系统可以托管各种应用程序，并且我对每个应用程序都有一组测试，我想将它们与框架分开（它处理“测试”的一般概念，以及消息发送/接收等） . 此外，该框架提供了一个通用 UI，因此可以将其构建为战争并进行部署，从而允许您运行和配置测试。

我目前正在做的是将框架构建为 jar 和 war，将框架列为每个应用程序测试套件中的依赖项，并使用覆盖拉入所有框架代码，以便每个套件都可以构建自己的 war 进行部署。这太恶心了。

我想要的是能够指定（可能通过配置文件）在框架中构建哪些测试套件，并最终得到一个包含指定套件的单个 framework.war 文件。尝试为此构建 pom 时，我一直遇到循环依赖，因为：

*   要构建测试，测试项目必须依赖于框架
*   要拉入指定的测试 jar，框架必须依赖于那些测试项目

我尝试过的事情：

*   制作框架的测试套件子项目：
    *   这不起作用（我认为）我无法将最终结果打包为战争（仅用于聚合器项目的 pom 打包）
*   将测试 .jars 列为系统依赖项：
    *   这行得通，但是必须手动指定 jar 的路径很麻烦
*   将测试作为 java 包放入框架中，并通过过滤器只编译你想要的：
    *   在技​​术上是可行的，但我真的更喜欢将逻辑分离到单独的 Maven 项目中，因为每个测试套件也可以配置，并且我想将所有配置保留在框架 pom 之外

理想的情况是父项目 pom 将：

1.  无需测试即可编译框架
2.  编译指定的测试套件
3.  重建框架 .war，包括指定的测试套件 jars

我不确定这是否可能和/或什至可取，但这对我来说似乎是最好的解决方案。提前感谢您对组织此项目的任何建议。

# jenkins - 使用 puppet 和 artifactory 持续交付

> ID：13682874
> 
> 赞同：4
> 
> 时间：2012-12-03T12:04:10.487
> 
> 标签：jenkins, puppet, artifactory, continuous-deployment, continuous-delivery

我有 Jenkins、Artifactory 和 3 个环境（开发、测试和生产）。

当开发人员从开发环境中提交某些内容时，它会在测试环境中进行编译和测试。它的构建和工件存储在 Artifactory 中。

现在我想进行下一步，在 puppet 的帮助下管理环境并将工件从 Artifactory 部署到生产环境。

但我需要一些提示才能开始：

1.  安装木偶的最佳位置在哪里？在与工件一起工作的同一台服务器上？Puppet 也配置环境.. 所以不确定是否有什么需要考虑的。

2.  在安装 puppet 之前或期间是否需要记住任何配置？特别是在人工制品和詹金斯的背景下。

感谢您的任何提示/帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T02:28:22.953

首先，您的第一个决定需要是要以主代理（客户端/服务器）模式还是以“无主”模式运行 puppet。puppetlabs.com 上的入门文档非常可靠，值得关注这些教程。

无论您的决定如何，您都需要在每台运行 puppet 的服务器上安装 puppet - 相同的二进制文件运行 master、agent、apply 等。

假设 redhat-ish 操作系统的 Puppet 101 masterless 示例：

```
# Install puppet
sudo yum install puppet -y

# Create basic manifest
 echo "notify {'hello world':}" > hello.pp

# Run masterless scenario:
sudo puppet apply hello.pp 
```

预期结果：

```
notice: hello world
notice: /Stage[main]//Notify[hello world]/message: defined 'message' as 'hello world'
notice: Finished catalog run in 0.03 seconds 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T22:40:33.787

免责声明：这就是我的做法:)

我认为将 Artifactory 与 Puppet Master 放在同一台服务器上没有任何好处，这似乎是个坏主意。

在 Artifactory 中，我有一个虚拟存储库，其中仅包含我关心的产品工件。我有一个单独的通用 Web 服务器，它托管各种东西 puppet 节点，有时我们公司的人需要下载。该服务器也是工件中虚拟存储库的转发代理。

本地 Web 服务器每晚同步到外部 aws 服务器。在内部，需要下载比特的节点从我们的本地服务器获取它们。在外部，它们从云服务器（实际上是一个自动扩展集群）下载。

这使得编写可以在节点上下载、md5 和安装工件的 puppet 清单/自定义类型变得相当简单。对于 Linux 来说，更巧妙的是构建软件包，但我目前还没有。

我还使用 Foreman 作为 Puppet ENC。软件版本在全局、组和节点级别（如果需要）配置为 Foreman 参数。要部署应用程序战争的新版本，只需登录 Foreman，设置参数，然后等待 Puppet 完成其工作（或登录节点并在需要时强制 Puppet 运行）。

希望能给你一些想法。

# java - OSGI JNDI 是否允许与来自非 OSGI 代码的 JNDI 调用共存？

> ID：13682882
> 
> 赞同：14
> 
> 时间：2012-12-03T12:04:32.423
> 
> 标签：java, osgi, jndi, apache-karaf, aries

[OSGI Enterprise Release 5 规范](http://www.osgi.org/Download/Release5)的第 126 章提到了兼容性：

> “支持 Java SE 和 Java EE 客户端使用的传统 JNDI 编程模型。”

以及使用不支持 OSGI 的代码：

> “不知道 OSGi 的客户端和 JNDI 上下文提供者使用静态方法连接到 JRE JNDI 实现。InitialContext 类提供从提供者对上下文的访问，提供者使用静态 NamingManager 方法进行对象转换和查找 URL 上下文。这个传统模型不知道 OSGi，因此只有在对缺乏 OSGi 意识的后果进行管理的情况下才能可靠地使用。”

但我不清楚此文本是否仅适用于在 OSGI 包内执行的“遗留”代码，或者也适用于 OSGI 容器外部的代码，例如在 OSGI 容器嵌入应用程序的情况下。

在嵌入场景中，OSGI 容器外部和内部都可能存在执行 JNDI 调用的应用程序代码，并且当它们在同一个 JVM 中执行时，它们将共享 JNDI 实现。

**问题：**在嵌入式 OSGI 容器中运行的 OSGI JNDI 实现是否应该允许容器外的不支持 OSGI 的代码像往常一样执行其 JNDI 调用，或者是否需要移植到“OSGI-awareness”？

我自己用 Apache Karaf 2.3.0（它使用 Apache Aries JNDI 1.0.0）尝试这个似乎不起作用，因为 Apache Aries 要求 JNDI 客户端调用源自 OSGI 包。
部分堆栈跟踪：

```
javax.naming.NoInitialContextException: The calling code's BundleContext could not be determined.
    at org.apache.aries.jndi.OSGiInitialContextFactoryBuilder.getInitialContext(OSGiInitialContextFactoryBuilder.java:46)
    at javax.naming.spi.NamingManager.getInitialContext(NamingManager.java:684)
    at javax.naming.InitialContext.getDefaultInitCtx(InitialContext.java:307)
    at javax.naming.InitialContext.init(InitialContext.java:242)
    at javax.naming.InitialContext.<init>(InitialContext.java:192) 
```

**问题：**这是正确的行为，还是我可以参考的规范中的某个部分违反了此限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T13:23:57.913

尝试在 Weblogic 上部署 Apache Karaf 时遇到了同样的问题。我们通过 servlet 桥接器使用 karaf - weblogic 中部署了一个战争，它将所有 http 请求桥接到 karaf。

我在 weblogic 上运行以下应用程序：

1.  app1（使用 JNDI）
2.  应用程序2
3.  karaf-bridge（将请求桥接到 Karaf）

一旦 karaf 启动在 Karaf 内部运行的 Aries JNDI 实现，就会将 javax.naming.NamingManager 内部的 InitialContextFactoryBuilder 设置为它自己的实现。NamingManager 持有对初始上下文工厂构建器的静态引用，因此无论其是否在 OSGI 环境中运行，设置此静态引用的任何实现都将成为 JNDI 提供者。

在我的情况下，当 app1（非 OSGI）尝试执行新的 InitialContext 时，Aries JNDI 尝试使用 BundleContext 解决它并失败。

我使用一些非常丑陋的技巧解决了这个问题，这些技巧包括从 jre 中提取 javax.naming 包并将其作为捆绑包安装在 karaf 中。

因此，您的问题的答案是：我认为问题实际上在于 jre 而不是 OSGI 关于如何管理 JNDI 查找的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T15:59:32.177

I'm not sure if I understand the problem correctly... JNDI is a Service Provider Interface, and it needs some underlying implementation to run with. All you need to do is to provision it the OSGI container.

I would recommend creating single bundle with all jars needed by JNDI and export all packages. Then use Dynamic-Import: * to use it. It worked in our case (Eclipse RCP application with JBoss 5 JNDI used for EJB calls).

However if you need JNDI inside and outside of the container and you don't want to struggle with Classloading, I would recommend adding all jars to the applications classpath. This way it should be accessible in whole your application.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-25T02:24:34.113

Apache Aries 似乎已经考虑到这一点，并提供了 JRE 初始上下文工厂构建器 (org.apache.aries.jndi.JREInitialContextFactoryBuilder) 的实现，它似乎可以工作。但是，为了使其工作，我必须更改注册 JVM 范围的初始上下文工厂构建器的 Aries 代码。可能有另一种（可能更好）的方式来实现这一点。但这似乎奏效了。

另外，请注意，问题并不止于在 NamingManager 中设置 InitialContextFactoryBuilder。ObjectFactoryBuilder 也出现了同样的问题（在 NamingManager 中再次设置了 JVM 范围）。根据您尝试连接的 JNDI 提供者，您可能还需要更改 Aries JNDI 代码的那部分。例如，对于 Tibco EMS JNDI 连接，我必须从 Aries 调整 OSGiObjectFactoryBuilder 的代码以返回 Tibco 特定的 ObjectFactory。这可以使用 Context.OBJECT_FACTORIES 环境值轻松概括。

我已经为此提出了一个 JIRA - [https://issues.apache.org/jira/browse/ARIES-1127](https://issues.apache.org/jira/browse/ARIES-1127)

# xcode - 使用 Application Loader 构建 Corona，不同构建设置的不同错误

> ID：13682888
> 
> 赞同：0
> 
> 时间：2012-12-03T12:04:46.150
> 
> 标签：xcode, coronasdk

我无法通过应用程序加载器提交应用程序。我已经用 Corona SDK 编写了这个应用程序。它已经在 Google Play 上可用，但 XCode 给了我错误......在开发过程中，我一直在我的个人 iPhone 上使用我的私人帐户中的开发人员配置文件测试该应用程序。现在我想将它与公司简介一起发布。但我不能。我收到的错误各不相同。如果我为设备构建，然后单击弹出的“您要上传到应用商店吗？” 我收到此错误：此应用包含与您的帐户无关的嵌入式配置文件。请使用与团队 ID 关联的配置文件***** ******

如果我改为为 Xcode Simulator 构建并尝试上传该 zip 文件，则会收到以下错误：

缺少 Coderesources 文件，它必须是符号 _CodeSignature/CodeResources。确保捆绑包位于本地安装的卷（不是远程 SMB 卷）上，并确保使用 mac os x finder 对其进行压缩。

Iphone Ipod Touch：应用程序可执行文件包含不受支持的架构：i386

无法从您的应用程序中提取代码签名权利。请确保 myAPP 是经过正确代码签名的有效 Mach 可执行文件。

我整个周末都在尝试制作新的个人资料和证书，但这并没有帮助。我的问题是我应该尝试修复哪些错误？如果这些错误只出现在不同的版本上？

Build.Settings 是否有任何好的模板，以便我可以确定它不是我的设置文件损坏？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T02:23:45.537

您是否在 build.settings 中指定了您的 BundleID？如果是这样，你需要吗？如果没有，把它拿出来。如果是这样，并且您在那里有实际的应用程序 ID，请尝试将其删除，以便它只是 com.appname.yourname，正如您在创建配置文件时在 iTunes Connect 中指定的那样。

# css - CSS后台上传到服务器

> ID：13682894
> 
> 赞同：-2
> 
> 时间：2012-12-03T12:05:12.033
> 
> 标签：css

我最近通过 Dreamweaver 上的 CSS 在我的网站背景中添加了一张图片。我已将 css 文件和图像文件保存到服务器，但这仍然没有出现在我的网站上。我哪里出错了？

我使用的代码是 background-image: url(../images/Christmasback.png); 我把它放进了身体里。在浏览器的 Dreamweaver 视图中，它工作正常

文件夹结构是

```
Site root
- WWW
     - CSS
          - site.css
     - Images
          - Christmasback.png
     - index.html 
```

CSS代码是：

```
html,body {
    margin: 0;
    padding: 0;
    color: #333;
    font-family: Arial, Helvetica, sans-serif;
    font-weight: normal;
    font-size: 11px;
    line-height: 16px;
    background-image: url(../images/Christmasback.png);
    background-repeat: repeat;
    background-color: #000000;
} 
```

和标题：

```
#header {
    position: relative;
    height: 90px;
    background-color: #000000;
    width: 908px;
    font-family: Arial, Helvetica, sans-serif;
    background-image: url(../images/xmas-header.gif);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:45:56.007

您可能需要刷新缓存才能看到更新的图像。

在 Windows/Linux 中在浏览器中按 Ctrl + F5，在 Mac 上按 Cmd + R

在开发时，您需要查看过期内容以供将来参考：

[http://developer.yahoo.com/performance/rules.html](http://developer.yahoo.com/performance/rules.html)

在 Add an Expires or a Cache-Control Header 标题下，它允许您为图像/css 等添加到期日期，以便浏览器在指定时间获取最新版本。

# maven - Maven 中的插件目标是什么意思？

> ID：13682898
> 
> 赞同：1
> 
> 时间：2012-12-03T12:05:48.697
> 
> 标签：maven, maven-plugin

我是 Maven 的新手。我正在阅读[Maven - The complete reference](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-pom.html)`Build settings` ，并在 pom.xml 文件的类别下遇到了术语插件目标：

> 在本节中，我们自定义默认 Maven 构建的行为。我们可以更改源代码和测试的位置，可以添加新插件，可以将插件目标附加到生命周期，还可以自定义站点生成参数。

你能用一个例子解释一下是什么意思`attaching plugin goal to the lifecycle`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:16:59.907

插件目标是插件所做的事情。将插件目标附加到生命周期是对 maven 说：当您正在经历生命周期并处于此阶段时，触发该插件执行插件所做的任何事情。这听起来可能相当混乱，所以让我们看一个例子：

我想在每次调用时将我的应用程序部署到服务器`mvn install`。为此，在`build`pom 部分，我添加了以下配置：

```
 <plugin>
            <groupId>org.jboss.as.plugins</groupId>
            <artifactId>jboss-as-maven-plugin</artifactId>
            <version>7.1.1.Final</version>
            <configuration>
                            ...
            </configuration>
            <executions>
                <execution>
                    <id>deploy-jar</id>
                    <phase>install</phase>
                    <goals>
                        <goal>deploy</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

看一下这`execution`部分：这描述了如何将`deploy`目标附加`jboss-as-maven-plugin`到构建生命周期的`install`阶段。

有关 Maven 生命周期及其阶段的进一步说明，请阅读[**此**](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html)

# android - 连接 rt.jar 的 java 堆空间错误

> ID：13682899
> 
> 赞同：1
> 
> 时间：2012-12-03T12:05:50.023
> 
> 标签：android

我想生成一个应用程序，它将与 Matlab M 文件协作。我发现一个 Matlab 为 java 开发了一个数据包。数据包是从 Matlab M 文件创建的 Java 类。这个数据包生成一个特殊的 jar 文件（这个 jar 文件需要一个 Javabuilder.jar，它包含在 Matlab 部署的数据包中），它在 java 上运行良好。我想将 Matlab 生成的 jar 文件（我称之为 my.jar）添加到我的 Android 项目中。我在我的项目中添加了 my.jar 和 Javabuilder.jar，我发现 Javabuilder.jar 文件需要 java rt.jar。我也在项目上附加了 rt.jar，但遇到了 java 堆空间错误。我找到了以下解决java堆空间错误的解决方案，但没有一个解决不了我的问题。

*   将 Eclips.ini 中可用的 -Xms40m 和 -Xmx512m 值更改为 Xms256m 和 Xmx1024m
*   我以 100m 的分区大小运行我的模拟器
*   我添加了 android:largeHeap="true" 命令 谁有新的建议？如果有人帮助我，我将不胜感激

# regex - 如何获得正确的正则表达式来获得我想要的输出

> ID：13682900
> 
> 赞同：2
> 
> 时间：2012-12-03T12:05:49.387
> 
> 标签：regex, perl

您好，我正在使用 perl，现在我不知道如何获得我想要的输出。我只想打印下面的所有数字 beetween DIGIT 是我的代码我希望这里有人可以帮助我找到正确的正则表达式。

请帮助我...这里是我的代码

```
#!/usr/bin/perl
my $string = "<TR><TD COLSPAN=2 VALIGN=TOP>Please enter the random key shown below:<TR><TD>&nbsp;<TD VALIGN=TOP><FONT SIZE=+1><FONT COLOR=WHITE>...</FONT>4<FONT COLOR=WHITE>...</FONT>5<FONT COLOR=WHITE>...</FONT>4<FONT COLOR=WHITE>..</FONT>4<FONT COLOR=WHITE>..</FONT>2<FONT COLOR=WHITE>..</FONT>2</FONT></TR>";

if ($string =~  m,</FONT>(\d)<FONT COLOR=WHITE,i) {
    print "$1\n";  #output 454422
} else {
     print "Wrong Regex! \n";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:14:13.277

您正在寻找`/g`“全局匹配”的标志，它匹配所有出现的模式，而不仅仅是第一个。

```
while ( $string =~  m,</FONT>(\d)<FONT COLOR=WHITE,ig ) {
    print "$1\n";
} # output 45442 
```

请注意，最后一个`2`与您的模式不匹配。如果您将其更改为：

```
m,</FONT>(\d)(?:</FONT|<FONT COLOR=WHITE),ig 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:14:31.253

我假设您想要的输出是注释行`#output 454422`。为此，您需要将正则表达式包装在`while`-loop 中并添加`/g` [修饰符](http://perldoc.perl.org/perlre.html#Modifiers)。现在，它只匹配一次。

```
my $string =
"<TR><TD COLSPAN=2 VALIGN=TOP>Please enter the random key shown below:<TR><TD>&nbsp;<TD VALIGN=TOP><FONT SIZE=+1><FONT COLOR=WHITE>...</FONT>4<FONT COLOR=WHITE>...</FONT>5<FONT COLOR=WHITE>...</FONT>4<FONT COLOR=WHITE>..</FONT>4<FONT COLOR=WHITE>..</FONT>2<FONT COLOR=WHITE>..</FONT>2</FONT></TR>";

while ( $string =~ m,</FONT>(\d)<FONT COLOR=WHITE,ig ) {
  if ($1) {
    print "$1\n";
  #output 454422
  } else {

    print "Wrong Regex! \n";
  }
} 
```

# android - 通过在 Android 中获取图像的 ID 在图库视图中设置图像

> ID：13682901
> 
> 赞同：1
> 
> 时间：2012-12-03T12:05:51.360
> 
> 标签：android, android-gallery

我在 res 文件夹中有很多图像，想要选择其中一些并在图库视图中显示它们现在问题是在运行时我必须决定我需要选择哪些图像。那么我怎样才能做到这一点，在运行时我有一个数组，其中包含要选择的图像名称。

```
Integer[] pics = { R.drawable.cocktail1, R.drawable.cocktail2,
        R.drawable.cocktail3, R.drawable.cocktail4, R.drawable.cocktail5,
        R.drawable.cocktail6, R.drawable.cocktail7 }; 
```

想要实现这一点，但在运行时将决定 pics 数组的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:36:44.187

```
gallery.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
                // TODO Auto-generated method stub
                @SuppressWarnings("unused")
                imageView.setImageBitmap(pics[arg2]);
            }
        }); 
```

# oracle - 使用 Oracle 数据泵时的 PLSQL 函数编译错误

> ID：13682907
> 
> 赞同：0
> 
> 时间：2012-12-03T12:06:01.307
> 
> 标签：oracle, plsql, datapump

我在 Oracle 数据库中有两个 PLSQL 函数。函数 A 使用函数 B。因此要成功编译函数 A，函数 B 必须已经存在。

当我使用数据泵导入函数时，它在函数 B 之前导入函数 A，导致编译错误。然后我必须进入 SQL Developer 并重新编译该函数，然后它才能工作。

我的问题是，有没有办法让数据泵导入功能/程序，以便首先加载依赖项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:00:03.973

除非您单独加载它们（首先是依赖对象），否则您无法更改它。

* * *

这可能不值得麻烦 - 您的无效程序将在下次调用时自动重新编译。如果它在你调用它的那一刻编译 - 一切都很好。

* * *

如果您愿意，可以尝试在导入结束时编译所有无效对象（user_objects.status = 'INVALID'）。oracle server rdbms/admin 目录下也有sql脚本...

# php - 如何在感谢页面上添加跟踪代码（tradetracker 和 daisycon）

> ID：13682908
> 
> 赞同：0
> 
> 时间：2012-12-03T12:06:02.253
> 
> 标签：php, opencart

我有一个任务，我做了研究，但我仍然无法完成。我正在使用 OpenCart。我必须添加代码跟踪（来自 tradetracker 和 daisycon）到感谢页面。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T16:56:41.157

如果您不太习惯编写自己的扩展程序并且您的跟踪代码是 JavaScript 或 HTML，您可以将其直接放入您的模板中。您将在以下位置找到您需要的模板：/catalog/view/theme/default/template/common/success.php

唯一的问题是现在每次页面加载时都会触发。任何成功都归功于此模板。

要解决此问题，您需要进入控制器并进行少量添加。

寻找：

```
if (isset($this->session->data['order_id'])) { 
```

在阅读下方添加新行：

```
$this->data['enable_tracking'] = TRUE; 
```

然后回到模板之前，只需在您添加的跟踪代码周围添加一个 if 语句，如下所示：

```
<?php if($enable_tracking === TRUE){ ?>
Delete this line and replace with tracking code
<?php } ?> 
```

那应该可以解决您的问题。

# javascript - 如何从用户代理字符串中找出所有版本的 iPad？

> ID：13682914
> 
> 赞同：4
> 
> 时间：2012-12-03T12:06:22.193
> 
> 标签：javascript, ipad, user-agent

我想从用户代理字符串中找出所有版本的 iPad（不包括 iPhone、iPod），目前在测试时我得到了以下字符串

```
Mozilla/5.0 (iPad; CPU OS 5_1_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Version/5.1 Mobile/9B206 Safari/7534.48.3 
```

问题：以下代码适用于所有 iPad 吗？

```
String userAgentStr = request.getHeader("User-agent");
if (userAgentStr.contains("iPad"))
{
    //do my logic
} 
```

编辑：

我正在使用 iPad 上的 Dolphin 浏览器，但我得到以下 UA 字符串：

```
Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_2_1 like Mac OS X; en_US) AppleWebKit/533.17.9 (KHTML, like Gecko) Mobile/8C148 Safari/6533.18.5 
```

同样来自 iPad UA 字符串的 iBrowser 是：

```
Mozilla/5.0 (iPhone; CPU iPhone OS 5_1_1 like Mac OS X) AppleWebKit/534.46 (KHTML, like Gecko) Mobile/9B206 
```

所以我上面的代码正在破坏......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:41:26.247

我强烈建议使用功能检测而不是评论中建议的设备检测。一个常用于特征检测的库是[modernizr](http://modernizr.com/)。

如果您必须使用设备检测，[这个要点](https://gist.github.com/646272)基本上是说您的代码应该可以工作。

# multithreading - 什么是流程特定变量？

> ID：13682917
> 
> 赞同：6
> 
> 时间：2012-12-03T12:06:41.850
> 
> 标签：multithreading, smalltalk, pharo

我试图加载一个显然是为早期版本的 Pharo 编写的包（Ratpack，从[http://ss3.gemstone.com/ss/RatPack.html](http://ss3.gemstone.com/ss/RatPack.html)到 Pharo 1.4）。

在那里，我收到了关于`environmentAt:put:`不支持的弃用警告`Project`。

根据文档，要走的路是使用**`ProcessSpecificVariable`**.

我的问题是：

*   这些是什么？
*   我该如何使用它们？
*   如何将“旧”（已弃用）代码移植到这个新系统？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T13:01:52.370

[您可以在问题跟踪器](http://code.google.com/p/pharo/issues/detail?id=4981 "问题跟踪器")中找到有关 PSS 的讨论

这是 Igor 关于如何使用 ProcessSpecificVariables 的片段：

假设 MyProcessSpecificVar 是 ProcessSpecificVariable 的子类。

然后你可以这样做：

```
[ MyProcessSpecificVar value: foo. ] fork.

[ MyProcessSpecificVar value. ] fork. 
```

等，即以与旧实现相同的方式允许这样做。

但是使用新的实现，您也可以使用它的实例，因此您不必为每个您可能想要使用的特定于流程的变量创建一个新类：

```
mykey := MyProcessSpecificVar new.

[ mykey value ] fork.
[ mykey value: 10 ] fork. 
```

# android - ListView 内的 Android 布局

> ID：13682921
> 
> 赞同：1
> 
> 时间：2012-12-03T12:06:51.520
> 
> 标签：android, android-layout

my 的行`ListView`由两个`TextView`s 组成：

我必须将第一个`TextView`放在最左边的位置，第二个`TextView`放在最右边的位置。我怎样才能做到这一点？

（最低 API 支持应至少为`2.3 Gingerbread`）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:09:41.027

简单地制作一个布局 xml 文件，它将被膨胀到每一行中，并且在该布局中您可以使用例如第一`android:gravity="left"`和`android:gravity="right"`第二`TextView`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:21:23.617

最佳实践是为此目的使用 RelativeLayout

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:paddingLeft="16dp"
                android:paddingRight="16dp"
                android:layout_gravity="center"
        >

    <TextView
            android:id="@+id/txtViewTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            />

    <TextView
            android:id="@+id/desk"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_toRightOf="@id/txtViewTitle"
            />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:11:57.503

您需要实现自定义列表适配器，并在布局中添加具有两个文本视图的 RelativeLayout，一个与父对齐左对齐，一个与右对齐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-03T12:12:17.287

请参阅[ListView 自定义](http://www.vogella.com/articles/AndroidListView/article.html) 和[自定义列表适配器](http://www.softwarepassion.com/android-series-custom-listview-items-and-adapters/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-03T13:00:49.027

只有以下标记对我有用：（在 Android 2.3 设备上测试）

对于第一个 TextView：

```
android:layout_alignParentLeft="true"
android:layout_alignParentRight="false" 
```

对于第二个文本视图：

```
android:layout_alignParentLeft="false"
android:layout_alignParentRight="true" 
```

# matlab - 从 Simulink 模型生成方程

> ID：13682924
> 
> 赞同：2
> 
> 时间：2012-12-03T12:06:54.457
> 
> 标签：matlab, simulink

我有一个大型 simulink 模型，其中包含许多源模块和接收器模块，其中许多模块之间只有基本的算术运算。我被要求记录模型背后的方程式。我目前正在手动执行此操作，我发现它相当慢，并且在此过程中出错的可能性相对较高。

Simulink 有什么方法可以自动生成方程（例如在 MATLAB 语法中）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T18:40:34.003

MATLAB/Simulink 中没有任何实用程序可以完全满足您的需求（我个人也不知道有任何第三方工具可以做到这一点）。

但是，我认为您最好的选择可能是使用[Simulink Coder](http://www.mathworks.com/products/simulink-coder/index.html)。这将允许您将 Simulink 模型转换为 C 代码。从该代码中，您可以比手动分析 Simulink 模型更容易地提取等效方程。

不过，问题是 Simulink Coder 是基础 Simulink 的附加包，因此您可能拥有也可能没有此工具。

# php - 使用 Facebook 用户作为 Wordpress 用户

> ID：13682926
> 
> 赞同：0
> 
> 时间：2012-12-03T12:07:04.237
> 
> 标签：php, facebook, wordpress

我引用了[这段代码](http://wordpress.org/support/topic/how-to-use-facebook-user-as-wordpress-user?replies=1)，我试图用它来将 facebook 用户记录为 wordpress 用户。然而，当用户注册时，is_user_logged_in() 会重复声明为 false。谁能给我一些关于我可能做错了什么的见解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:18:51.263

我写了一个 wordpress loginas.php 页面，因此，一个非常大的安全漏洞 :) ：

```
require_once(dirname(__FILE__) . '/wp-load.php');

function auto_login( $username ) {
    // log in automatically
    $user = get_userdatabylogin( $username );
    $user_id = $user->ID;
    wp_set_current_user( $user_id, $user_login );
    wp_set_auth_cookie( $user_id );
}

if (!is_user_logged_in()) {
    echo "Logging in as: ".$_GET['username'];
    auto_login($_GET['username']);
}
else
    echo "You are already logged in."; 
```

而且，在**我删除所有 cookie**后，它运行良好。所以，我想你可能对在你的代码之前执行的东西有问题。
实际上，我仍然无法弄清楚您的代码中发生了什么，您能否尝试更改`init`挂钩的执行优先级并移动到第一个位置。

请注意，为了正确执行您的编程身份验证，WordPress 请求应始终在创建 cookie 的同一域上完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:35:45.143

你为什么不试试这个插件[http://ottopress.com/wordpress-plugins/simple-facebook-connect/](http://ottopress.com/wordpress-plugins/simple-facebook-connect/)

我用过这个，它有效！它有一个功能，可以让用户使用他们的 fb 帐户登录到您的网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:46:17.660

请试试这个，

首先，您必须在 facebook 中创建一个新应用程序。在这里，您输入了您的站点域名并获得以下两个值。

1) 应用程序 ID

2) 秘密ID

并将以下代码放入您的函数中`connect_to_facebook()`：

```
define('APP_ID', 'Copy Facebook Application ID'); 
define('APP_SECRET', 'Copy Facebook Secrate ID'); 
```

# c# - 自定义 JQueryUI ValidationMessageFor 隐藏验证扩展方法

> ID：13682927
> 
> 赞同：2
> 
> 时间：2012-12-03T12:07:18.643
> 
> 标签：c#, asp.net-mvc-3, jquery-ui

我一直致力于为 MVC 创建自定义错误验证消息，以显示错误消息 jQueryUI 样式。

到目前为止看起来很酷，但是当没有错误消息时我需要隐藏整个 div ......我该怎么做？

这是我的 html 助手扩展方法：

```
 public static MvcHtmlString MyValidationMessageFor<TModel, TProperty>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TProperty>> expression)
        {              
                TagBuilder widgetDiv = new TagBuilder("div");
                widgetDiv.AddCssClass("ui-widget");
                widgetDiv.Attributes.Add("style", "font-size: 10px");

                TagBuilder errorDiv = new TagBuilder("div");
                errorDiv.AddCssClass("ui-state-error ui-corner-all");
                errorDiv.Attributes.Add("style", "padding:0 .7em;");

                TagBuilder paragraph = new TagBuilder("p");

                TagBuilder span = new TagBuilder("span");
                span.AddCssClass("ui-icon ui-icon-alert");
                span.Attributes.Add("style", "float: left; margin-right: .3em;");

                TagBuilder strong = new TagBuilder("strong");
                strong.InnerHtml = "Alert: ";

                paragraph.InnerHtml += span.ToString(TagRenderMode.Normal);
                paragraph.InnerHtml += strong.ToString(TagRenderMode.Normal);
                paragraph.InnerHtml += helper.ValidationMessageFor(expression).ToString();           

                errorDiv.InnerHtml += paragraph.ToString(TagRenderMode.Normal);

                widgetDiv.InnerHtml += errorDiv.ToString(TagRenderMode.Normal);                               

                return MvcHtmlString.Create(widgetDiv.ToString(TagRenderMode.Normal));            
        } 
```

这是它产生的html：

```
 <div class="ui-widget">
    <div class="ui-state-error ui-corner-all" style="padding: 0 .7em;">
        <p><span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span>
        <strong>Alert:</strong> Sample ui-state-error style.</p>
    </div>
</div> 
```

我假设我需要根据某些条件返回一个空白字符串......我该怎么做？

编辑：添加图片来说明问题 - div 无论如何都显示为空文本。

![警报！](../Images/b13f30d8355428667324f9bb49b54aa2.png)

Edit2：我注意到在调试时这个方法只被命中一次......也许不显眼的验证是问题所在。

这段代码没有帮助：

```
string propertyName = ExpressionHelper.GetExpressionText(expression);
string name = helper.AttributeEncode(helper.ViewData.TemplateInfo.GetFullHtmlFieldName(propertyName));

if (helper.ViewData.ModelState[name] == null ||
    helper.ViewData.ModelState[name].Errors == null ||
    helper.ViewData.ModelState[name].Errors.Count == 0)
{
    return MvcHtmlString.Empty;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:21:43.597

为什么不在构建 HTML 块之前对验证消息进行测试？如果它为空，则没有错误。

```
var validationMessage = helper.ValidationMessageFor(expression).ToString();
if (!string.IsNullOrEmpty(validationMessage))
{
    // Build your message as in your code.
} 
```

# javascript - .click 在 jquery 中不起作用？在我的菜单中，通过 $.ajax 获取 html 代码

> ID：13682933
> 
> 赞同：0
> 
> 时间：2012-12-03T12:07:45.137
> 
> 标签：javascript, jquery

我写了 showDataSubject() >function 使用 javascript 从 sql table.by jquery.ajax() 获取数据

```
function showDataSubject() {
            $.ajax({
                type: "POST",
                url: "subject.aspx/showDataSubject",
                data: "{}",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function(msg) {
                    // Replace the div's content with the page method's return.
                    $('#PanelSubjectMenu').html(msg.d);
                }
            });
        } 
```

c# 方法

```
[WebMethod]
    public static string showDataSubject()
    {
        SqlToXml sqlToXml = new SqlToXml();
       // sqlToXml.CreateSubject();
        return sqlToXml.CreateSubjectTreeViewClient();
       // htmlShowData = sqlToXml.CreateSubjectTreeViewClient();          

    } 
```

保存在小提琴
[http://jsfiddle.net/H5guu/](http://jsfiddle.net/H5guu/)
但 click() 方法不起作用。（在小提琴中它正常工作）
但在我的应用程序中它不起作用。

```
$('#PanelSubjectMenu  span').click(function() {
            $('#subjectTree span').css('color', 'black');
            $(this).css('color', 'red');
        }); 
```

什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:10:57.677

尝试对 jquery 1.7+ 使用延迟：

```
 $('#PanelSubjectMenu').on('click','span',function() {
                $('#subjectTree span').css('color', 'black');
                $(this).css('color', 'red');
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:15:45.873

我猜是因为你的 html 代码是动态的。所以你需要像这样绑定它：

```
$('#PanelSubjectMenu  span').live('click', function() {
    $('#subjectTree span').css('color', 'black');
    $(this).css('color', 'red');
}); 
```

对于旧版本的 jquery (<1.7) 或 jquery 1.7+

```
$(document).on('click', '#PanelSubjectMenu  span', function() {
    $('#subjectTree span').css('color', 'black');
    $(this).css('color', 'red');
}); 
```

# actionscript-3 - 在 2 个项目之间共享源代码？

> ID：13682935
> 
> 赞同：0
> 
> 时间：2012-12-03T12:07:58.990
> 
> 标签：actionscript-3, apache-flex, flash-builder, flex4.5

我有一个项目，其中包含一个为 Web 设计的大包“全局”类，我需要与一个新的移动项目共享这些类，但是当我添加它们时：

**属性 -> Flex 构建路径 -> 源路径 -> 添加文件夹**

它们开始出现在包名称之前的索引 [源路径]，并且因为它们 Flash Builder 开始抛出错误消息：

*“在源路径中找到的文件必须具有与定义的包“全局”相同的包结构''。”*

*   我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T17:07:18.600

正如我们在评论中所讨论的，我认为将“全局”类编译到**库**（.swc）中会是一种更好的方法。
您担心加载不必要的类：当您以“**合并**”的形式链接到库时，只有您使用的类实际编译到主应用程序（以及它们依赖的任何类）中，因此无需担心。
作为最后一个论点，我也认为这是一种更**灵活**的方法。编译后的库更易于重用和版本化，因此代码可以更轻松地分发给团队中的其他开发人员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:21:16.923

用右键单击->重构重命名其中一个包。比应该工作。

如果没有，您也可以尝试在同一个项目中使用您的两个代码，然后您可以选择在 Flash Builder 中运行的代码，方法是右键单击该 .as 或 .mxml 文件，然后选择 set as ... (或类似的东西）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:53:39.790

我想如果你将包含“src”而不是“src/global”，这个问题就会消失。

# visual-c++ - 我们可以在 VC++ 6.0 的单个项目中将 #include a*.cpp 放入另一个 *.cpp 文件吗

> ID：13682936
> 
> 赞同：0
> 
> 时间：2012-12-03T12:08:01.393
> 
> 标签：visual-c++

我正在 VC++ 6.0 中做一些示例程序。对于一些简单的小程序，我不想为每个程序创建单独的项目。我在一个项目中创建了 2 个文件并且没有 .h 文件，所以我将 .cpp 文件包含到另一个 .cpp 文件中。如果我编译它的工作但如果我构建代码它​​给出错误。以下是代码：

```
file1.cpp :
-----------

#include <iostream>
#include "Calculate_Int.cpp"
using namespace std;

int main ()
{
    cout << "\n\nFirst file \n" ;

    int x= cal_integer();

    return 0;

}

Calculate_Int.cpp:
------------------

#include<iostream>
using std::cout;
using std::endl;

int cal_integer(){
    cout<< 1+2<<endl;
    cout<<1-5<<endl;
    cout<<1-2<<endl;

        return 0;
} 
```

如果我构建这个 Project1.exe 以下是错误：

链接... Calculate_Int.obj：错误 LNK2005：“int __cdecl cal_integer(void)”(?cal_integer@@YAHXZ) 已在 file_1.obj 调试/Project_1.exe 中定义：致命错误 LNK1169：发现一个或多个多重定义符号错误执行链接.exe。

Project_1.exe - 2 个错误，0 个警告

请让我知道出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:16:21.517

包含文件与在包含该文件的位置复制该文件的内容相同。这意味着 的内容`Calculate_Int.cpp`在您的项目中被编译两次。这就是链接器错误告诉您的内容：它不知道选择哪个版本。

为了编译`main.cpp`你只需要知道你在那里使用的函数的签名；也就是说，你只需要一个声明，而不是一个定义。因此，您可以将这一行替换为`main.cpp`：

```
#include "Calculate_Int.cpp" 
```

有了这个：

```
int cal_integer(); 
```

你的项目将编译和链接就好了。无论如何，正确的方法是`Calculate_Int.h`使用该行创建一个文件并将其包含在您需要的任何地方。

# android - Android 2.2 空指针异常

> ID：13682937
> 
> 赞同：0
> 
> 时间：2012-12-03T12:08:09.363
> 
> 标签：android, android-layout, nullpointerexception

我是Android开发的新手。我遇到了一个问题，我确实花了两天时间试图找出代码有什么问题。

在我的应用程序中，我想要一个`Button`执行数据库更新的程序。单击此按钮时`Button`，我得到一个`NullPointerException`.

这是我的课：

```
package com.test.database;

import android.app.Activity;
import android.app.Dialog;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class SQLiteExample extends Activity implements OnClickListener {

    Button sqlUpdate, sqlView;
    EditText sqlName, sqlHotness;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.sqliteexample);
        sqlUpdate = (Button) findViewById(R.id.bSQLUpdate);
        sqlName = (EditText)findViewById(R.id.etName);
        sqlHotness = (EditText)findViewById(R.id.etSQLHotness);

        sqlView = (Button) findViewById(R.id.bSQLopenView);
        sqlView.setOnClickListener(this);
        sqlUpdate.setOnClickListener(this);

    }

    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub

        switch(arg0.getId()){

        case R.id.bSQLUpdate:

            boolean didItWork = true;

            try{
                String name = sqlName.getText().toString();
                String hotness = sqlHotness.getText().toString();

                HotOrNot entry = new HotOrNot(SQLiteExample.this);

                entry.open();
                entry.createEntry(name, hotness);
                entry.close();
            }catch (Exception e){
                didItWork = false;              
            }finally{
                if(didItWork){
                    Dialog d = new Dialog(this);
                    d.setTitle("Heck Yea!");
                    TextView tv = new TextView(this);
                    tv.setText("Success");
                    d.setContentView(tv);
                    d.show();
                }
            }           
            break;
        case R.id.bSQLopenView:

            break;      
        }
    }
} 
```

## 这是我的布局 xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Name" />

    <EditText
        android:id="@+id/etSQLName"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Hotness scale 1 to 10" />

    <EditText
        android:id="@+id/etSQLHotness"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10" />

    <Button
        android:id="@+id/bSQLUpdate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Update SQLite Database" />

    <Button
        android:id="@+id/bSQLopenView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="View" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T12:11:10.437

您在编辑文本中使用错误的 id 的第一件事。它是 etSQLName，您使用 etName。

因此，更改以下行并再次检查。

```
sqlName = (EditText)findViewById(R.id.etName); 
```

至

```
sqlName = (EditText)findViewById(R.id.etSQLName ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:44:18.777

```
sqlName = (EditText)findViewById(R.id.etSQLName); 
```

# c# - 如何获取复选框列表未选中的项目

> ID：13682938
> 
> 赞同：0
> 
> 时间：2012-12-03T12:08:12.443
> 
> 标签：c#, asp.net, visual-studio-2008

我有一个包含复选框列表的数据列表。

```
 <asp:DataList ID="dtlstfilter" runat="server">
 <ItemTemplate>
 <asp:CheckBoxList ForeColor="Gray"  AutoPostBack="true"    OnSelectedIndexChanged="chklist_SelectedIndexChanged" ID="chklist"
 runat="server">
</asp:CheckBoxList>
</ItemTemplate>
</asp:DataList> 
```

当我从 SelectedIndexChanged 事件中的复选框列表中选中一个时，我使用了选定的值

```
CheckBoxList c = (CheckBoxList)sender;
string selectedvalue= c.SelectedValue; 
```

同样，如果我从复选框列表中取消选中一个，如何从复选框列表中获取值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T13:11:40.850

如果适合您，您可以选择 jQuery Route...

```
if (!IsPostBack)
{
    foreach (ListItem item in chkList.Items)
    {
        //adding a dummy class to use at client side.
        item.Attributes.Add("class", "chkItem");
    }
} 
```

在您的表单上放置一个带有样式显示的按钮：无。还有一个隐藏字段来跟踪当前选中的复选框。

```
<asp:Button ID="hdnButton" runat="server" style="display:none;" OnClick="hdnButton_Click"/>
<asp:HiddenField ID="hdnCurrent" runat="server" /> 
```

jQuery 部分....

```
$(".chkItem input:checkbox").change(function(){            
    $("#hdnCurrent").val($(this).attr("id") + "|" + $(this).attr("checked"));
    $("#hdnButton").click();
}); 
```

如果您不想在后端进行字符串操作，可以使用更多隐藏字段。取决于你的口味。

然后像下面这样处理按钮单击事件。

```
protected void hdnButton_Click(object sender, EventArgs e)
{
    String[] Value = hdnCurrent.Value.Split('|');

    if (Value[1] == "true")
    {
        //Do operations here when the check box is checked
    }
    else
    { 
        //Do operations here when the check box is unchecked
    }

    //Value[0] contains the id of the check box that is checked/unchecked.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:28:38.297

如果`SelectedIndexChanged`您取消选中`CheckBox`. 所以它的工作方式相同。但是，如果您想知道（现在）未选中的项目，则必须将旧选择存储在某处，例如`ViewState`：

```
private IEnumerable<string> SelectedValues
{
    get
    {
        if (ViewState["SelectedValues"] == null && dtlstfilter.SelectedIndex >= -1)
        {
            ViewState["SelectedValues"] = dtlstfilter.Items.Cast<ListItem>()
                .Where(li => li.Selected)
                .Select(li => li.Value)
                .ToList();
        }else
            ViewState["SelectedValues"]  = Enumerable.Empty<string>();

        return (IEnumerable<string>)ViewState["SelectedValues"];
    }
    set { ViewState["SelectedValues"] = value; }
}

protected void chklist_SelectedIndexChanged(Object sender, EventArgs e)
{
    CheckBoxList c = (CheckBoxList)sender;
    var oldSelection = this.SelectedValues;
    var newSelection = c.Items.Cast<ListItem>()
                .Where(li => li.Selected)
                .Select(li => li.Value);
    var uncheckedItems = newSelection.Except(oldSelection);
} 
```

如果可以选择多个复选框，这甚至应该可以工作。

# c# - 动态更新 WMAppManifest 文件

> ID：13682940
> 
> 赞同：2
> 
> 时间：2012-12-03T12:08:23.333
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-8

在我的 Windows Phone 8 应用程序中，我想访问 WMAppManifest 文件。我还想动态更新循环磁贴图像路径。如何动态更新 Manifest 文件？请帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T21:30:00.063

为了在 WP7/WP8 上更新您的主磁贴，您无需更新您的 WmAppManfiest。而是`ShellTile.ActiveTiles.First().Update(myTileData)`使用与 WmApManfiest 中声明的图块类型匹配的图块数据调用。[ShellTile.ActiveTIles](http://msdn.microsoft.com/en-US/library/windowsphone/develop/microsoft.phone.shell.shelltile.activetiles%28v=vs.105%29.aspx)包含应用程序的所有磁贴。ShellTile.ActiveTIles 集合中的第一个磁贴始终是应用程序的主磁贴，每个后续磁贴始终是辅助磁贴。

您可以通过使用新数据对其调用 Update 来更新磁贴。这是一篇[很棒的文章](http://codingchick.net/?p=17)，介绍了如何设置和更新所有新的 WP8 磁贴（翻转、标志性和循环）。@ [http://codingchick.net/?p=17](http://codingchick.net/?p=17)

文章中的代码示例非常不言自明：

```
 27  // Select the application tile
   28             ShellTile myTile = ShellTile.ActiveTiles.First();
   29             if (myTile != null)
   30             {
   31                 // Create a new data to update my tile with
   32                 FlipTileData newTileData = new FlipTileData
   33                 {
   34                     Title = “New Title”,
   35                     BackgroundImage = new Uri(@”Assets\Tiles\ChangedTileMedium.png”, UriKind.Relative),
   36                     BackTitle = “New Background Image”,
   37                     BackBackgroundImage = new Uri(textBoxBackBackgroundImage.Text, UriKind.Relative),
   38                     BackContent = “New Back Content”
   39                 };
   40                 // Update the application Tile
   41                 myTile.Update(newTileData);
   42             } 
```

这是初始化 CycleTileData 文章中的代码片段示例：

```
 30   var cycleImages = new List<Uri>() { new Uri(@"Assets\Tiles\FlipCycleTileMedium.png", UriKind.Relative),
   31   new Uri(@”Assets\Tiles\CustomTileLarge.png”, UriKind.Relative) };
   32
   33                 CycleTileData newTileData = new CycleTileData
   34                 {
   35                     Title = “New Title”,
   36                     CycleImages = cycleImages,
   37                     Count = 5
   38                 }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:13:48.150

转到您的 Nuget 包管理器并搜索“Manifest”，您将获得“Access to WPAppManigfest...”包，它可以访问 Manifest 文件。

或者，在包管理器控制台中，使用此命令获取此包。

```
PM> Install-Package WMAppManifest 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T13:29:13.077

您不能以编程方式修改 WMAppManifest。您只能使用可视化编辑器或直接通过编辑 XML 在 Visual Studio 中对其进行编辑。
在运行时，您可以使用以下方法访问此文件，就像在资源中访问其他任何文件一样：
[如何使用 .NET 代码从 Windows Phone Marketplace 获取我的应用程序的深层链接？](https://stackoverflow.com/questions/13639564/how-to-get-a-deep-link-of-my-application-from-the-windows-phone-marketplace-usin/13640399#13640399)

对于在运行时创建或更新应用程序的现有或新磁贴，请使用本指南： http:
[//msdn.microsoft.com/en-us/library/windowsphone/develop/hh202948 (v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202948(v=vs.105).aspx)

# c - 在 C 中实现管道？

> ID：13682941
> 
> 赞同：1
> 
> 时间：2012-12-03T12:08:36.907
> 
> 标签：c, process, fork, pipe, dup

我正在尝试实现一个简单的外壳。我以这种方式分叉进程：

```
void forkProcess(char* cmd[]) {
    pid_t pid;
    char programPath[BUFFERLENGTH] = "/bin/";
    strcat(programPath, cmd[0]);
    int exitStatus;
    pid = fork();
    switch (pid) {
    case -1:
        printf("Fork failed; pid == -1\n");
        break;
    case 0:
        execv(programPath, cmd);
        exit(0);
        break;
    default:
        waitpid(pid, &exitStatus, 0);
        //printf("Exitstatus = %d\n", WEXITSTATUS(exitStatus));
        break;
    }
} 
```

现在`cmd`参数可能包含一个管道，例如：

`"ls" "-l" "|" "grep" "whatever" "(char*)NULL";`

那么如何实现管道功能呢？我知道有类似`pipe()`and的功能`dup()`，但我不知道如何在这种情况下使用它们。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:19:14.253

`fork()`在ing 启动子进程之前，您必须完全解析您的命令行。

如果正在使用管道运算符，则必须在调用之前设置管道`fork()`，因此它是继承的。

通常，您还必须使用`close()`并且经常`dup()`使管道替换分叉进程的标准输入。

继续阅读这些函数以“了解”大局，或者获取一本涵盖 Unix I/O 的书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:12:50.873

在这种情况下，您可以使用 popen()。

# asp.net-mvc-3 - 在 asp.net mvc 3 中设置脚本和 css 的优先级

> ID：13682943
> 
> 赞同：0
> 
> 时间：2012-12-03T12:08:44.253
> 
> 标签：asp.net-mvc-3, razor

我已经使用第三方 javascript 插件构建了树视图。我还为我的 asp.net MVC 3 应用程序使用了 Web 模板。并使用链接到很多 css 和 javascript 的布局视图。在我的类别视图中，我想显示树视图。但是由于布局视图的脚本，树视图被中断并且无法正确显示。当我放置 Layout = Null 时，它会正确显示。如何设置脚本链接和 css 链接的优先级以正确显示树视图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-16T15:44:17.737

看看[ClientDependancyMvc](http://nuget.org/packages/ClientDependency-Mvc/) NuGet 包。它允许为客户端资源设置优先级，如下所示：

```
Html.RequiresCss("Bootstrap/bootstrap.min.css", "Content", 2);
Html.RequiresCss("Bootstrap/bootstrap-responsive.min.css", "Content", 3);

Html.RequiresJs("jquery/1.7.1/jquery.min.js", "googleCDN", 1);
Html.RequiresJs("jqueryui/1.8.18/jquery-ui.min.js", "googleCDN", 2); 
```

其中最后一个参数是将元素插入页面的优先级。更多信息[在这里](https://github.com/Shandem/ClientDependency/wiki)。

# java - Java JPA 代理问题

> ID：13682945
> 
> 赞同：0
> 
> 时间：2012-12-03T12:08:58.000
> 
> 标签：java, jpa, eclipselink

我在我的 java 应用程序中使用 JPA(EclipseLink impl)。当系统级别没有配置代理时，应用程序可以工作，但是当我在系统级别配置代理时，应用程序失败

```
EntityManager entityManager = emf.createEntityManager(); 
```

并引发以下异常

```
Caused by: java.net.SocketException: Unknown proxy type : null
at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1074)
at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:341)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:395)
at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2137)
at java.net.Socket.connect(Socket.java:579)
... 24 more
at java.net.Socket.connect(Socket.java:528)

Caused by: java.net.SocketException: Unknown proxy type : null
at java.net.Socket.<init>(Socket.java:425)
at java.net.Socket.<init>(Socket.java:241)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:395)
at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:253)
at java.net.Socket.connect(Socket.java:579)
at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:290)
... 25 more
at java.net.Socket.connect(Socket.java:528)

at java.net.Socket.<init>(Socket.java:425)
at java.net.Socket.<init>(Socket.java:241)
at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:253)
at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:290)
... 25 more 
```

我怀疑它试图通过配置的代理访问 localhost 的 mysql db 并因此失败。但在系统级代理配置中，我已将以下 IP 配置为忽略主机

`127.0.0.1` `localhost`

并使用以下 jdbc url

```
<property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/clharvester" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:23:32.127

当您使用代理时，您必须使用服务器机器的真实 IP 地址连接到数据库。

# sql - getting error while trying to extract month from date

> ID：13682947
> 
> 赞同：2
> 
> 时间：2012-12-03T12:09:08.107
> 
> 标签：sql, oracle11g

I want to extract month from input date. I am trying this

```
select
    case
        when extract(month from :myDate) <= 6 then '1st' 
        when extract(month from :myDate) >= 7 then '2nd'
    end as half_of_the_year
from dual 
```

If i enter `2-12-12` then i get the error that

```
ORA-30076: invalid extract field for extract source
30076\. 00000 -  "invalid extract field for extract source"
*Cause:    The extract source does not contain the specified extract field.
*Action: 
```

Why i am getting this error ?

Thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:22:36.077

Try to explicitly convert your bind variable to the date datatype using `to_date` function:

```
select
    case
        when extract(month from to_date(:mydate, 'dd-mm-rr')) <= 6 then '1st'
        when extract(month from to_date(:mydate, 'dd-mm-rr')) >= 7 then '2nd'
    end as half_of_the_year
from dual 
```

# html - 谷歌网络字体变音符号从其他字体显示

> ID：13682951
> 
> 赞同：3
> 
> 时间：2012-12-03T12:09:18.457
> 
> 标签：html, css, meta-tags

我使用了 Google 网络字体中的 Archivo Narrow 字体，但变音符号显示来自 Lucida Grande 的正文字体。因此，除了罗马尼亚变音符号（我需要）之外的所有内容都以 Archivo Narrow 字体显示。并且不是缺少字形的问题。

我有这个`<head>`：

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link href='http://fonts.googleapis.com/css?family=Archivo+Narrow' rel='stylesheet' type='text/css'> 
```

在css中我这样称呼字体： `font-family:'Archivo Narrow', sans-serif; !important;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T14:04:36.810

将元素中的`href`属性值更改为`link`

```
http://fonts.googleapis.com/css?family=Archivo+Narrow&subset=latin,latin-ext 
```

当您选中“Latin Extended (latin-ext)”复选框时，按照 Google 说明中的说明进行操作。此复选框的确切含义未记录在案，但显然，只要您的拉丁字母超出拉丁 1（“西方”）曲目，您就应该使用此选项

# c - 比较两个空指针

> ID：13682952
> 
> 赞同：1
> 
> 时间：2012-12-03T12:09:33.007
> 
> 标签：c, pointers, null, c99

> C99 6.3.2.3/3 值为 0 的整型常量表达式或转换为 void * 类型的此类表达式称为空指针常量。55) 如果将空指针常量转换为指针类型，则生成的指针，称为空指针，保证比较**不等于**指向任何对象或函数的指针。

它是否说两个空指针不比较相等？但他们这样做：

```
int *a = 0;
int *b = 0;

assert(a == b); // true 
```

我想知道在这种情况下什么是不平等的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T13:17:27.850

您需要仔细阅读标准：空指针比较不等于任何指向**对象**或**函数**的指针。不能通过对对象（例如`&foo`）使用地址运算符来生成空指针。任何函数指针都保证为非 NULL。将这两者结合起来意味着空指针永远不会与 ptr-to-object 或 ptr-to-function 进行比较。

澄清一下，***比较不平等***的意思`a == b`是假的（等同于`a != b`真）。

您引用的段落没有说明比较两个空指针，但下一段确实：

***将空指针转换为另一种指针类型会产生该类型的空指针。任何两个空指针应该比较相等。***

***比较相等***表示为`a == b`真（相同`a != b`为假）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T13:05:52.857

如果对声明的解释有误，请纠正我。

```
int main() {
   void* a = (void *)0;
   int* b;    // pointer b is of different type to a
   printf((a == b) ? "equal" : "not equal");
   return 0;
} 
```

结果：

```
not equal 
```

该声明，

```
If a null pointer constant is converted to a pointer type, the resulting pointer, called a null
pointer, is guaranteed to compare unequal to a pointer to any object or function. 
```

说，当且仅当两者都是空指针或相同对象或函数的指针并且在比较两种不同的指针类型时不相等时，这两个指针才能比较相等。

# c# - .Register 和 .RegisterType 是否等效（对于具有无参数构造函数的类）？

> ID：13682955
> 
> 赞同：5
> 
> 时间：2012-12-03T12:09:41.650
> 
> 标签：c#, dependency-injection, autofac

使用 AutoFac 时，您可以使用`.RegisterType`将类与接口关联，但您也可以使用`.Register`（它允许您通过 lambda 指定构造函数参数）。

对于具有无参数构造函数的类，这两种方法是否等效？

```
var builder = new Autofac.ContainerBuilder();

builder.RegisterType<MyClass>().As<IMyInterface>();
builder.Register(x => new MyClass()).As<IMyInterface>(); 
```

有没有最好使用的场景`.RegisterType`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T21:45:27.443

假设你的类只有一个定义的构造函数，它们在功能上应该是等效的。

一个内部差异是`RegisterType`它将使用反射来确定要使用的构造函数，而`Register`lambda 提供了所需的所有信息。

# jquery-ui - drupal的jquery ui不工作

> ID：13682956
> 
> 赞同：0
> 
> 时间：2012-12-03T12:09:43.850
> 
> 标签：jquery-ui, drupal, drupal-7

版本 Drupal 7.16

我正在尝试以 Drupal 方式使用可拖动的 jquery：

我有一个简单的页面（带有 hook_menu），它调用一个 js 并渲染一个带有好类的简单 div 到可拖动：

```
(function($) {
Drupal.behaviors.testJs = {

    attach : function(context, settings) {
        $('.test-js').draggable();
    });
}
}
})(jQuery); 
```

这个js是加载的。我添加了 jquery Drupal 库：

```
drupal_add_library('system', 'ui'); 
```

或者

```
drupal_add_library('system', 'ui.draggable'); 
```

但是什么也没发生......当我有一个外部jquery时：

```
 drupal_add_js('http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js',   'external') 
```

可拖动的工作。我尝试启用 jquery 更新模块，但仅此而已....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-24T17:58:05.167

您调用的钩子很可能没有按正确的顺序调用。template_process_html 是 css 和 js 最终确定并呈现为模板变量的地方。尝试在 hook_preprocess_html 中添加您的代码，看看是否可行。否则找到一个在 template_process_html 之前调用的钩子，比如 hook_init。如果这不起作用，请提供更详细的代码示例，说明您如何尝试实现这一目标。

[https://api.drupal.org/api/drupal/includes%21theme.inc/function/template_process_html/7](https://api.drupal.org/api/drupal/includes%21theme.inc/function/template_process_html/7) [https://api.drupal.org/api/drupal/modules%21system%21theme.api.php/function /hook_process_HOOK/7](https://api.drupal.org/api/drupal/modules%21system%21theme.api.php/function/hook_process_HOOK/7) [https://api.drupal.org/api/drupal/includes%21theme.inc/function/theme/7](https://api.drupal.org/api/drupal/includes%21theme.inc/function/theme/7) [https://api.drupal.org/api/drupal/modules%21system%21system.api .php/function/hook_init/7](https://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_init/7)

# php - 试图获取非对象的属性 - CodeIgniter 错误

> ID：13682957
> 
> 赞同：1
> 
> 时间：2012-12-03T12:10:02.620
> 
> 标签：php, codeigniter, klout

我是codeigniter的新手，我正在尝试将Klout API集成到codeigniter，我有这个错误说Trying to get property of non-object Here

我将 API 放在应用程序文件夹之外

我将是 KloutAPIv2.class

```
<?php
// Define

DEFINE("HTTP_GET","GET");
DEFINE("HTTP_POST","POST");

// Get Started

class KloutAPIv2 {

/** @var String $BaseUrl The base url for the Klout API */
private $BaseUrl = "http://api.klout.com/";

/** @var String $Version YYYYMMDD */
private $Version = '20120511'; 

/** @var String $KloutKey */
private $KloutKey;

/**
 * Constructor for the API
 * Prepares the request URL and client api params
 * @param String $client_id
 * @param String $client_secret
 * @param String $version Defaults to v2, appends into the API url
 */
public function  __construct($kloutapi_key = false, $version="v2"){
    $this->BaseUrl = "{$this->BaseUrl}$version/";
    $this->KloutKey = $kloutapi_key;
}

/******************************************************/
//       Identity
/******************************************************/

/** 
 * KloutIDLookupByName
 * Looks up a Klout ID from a Screen Name
 * @param String $network The network to look the screen name up on
 * @param String $screenName The screen name to look up
 */
public function KloutIDLookupByName($network, $screenname){
    // Build the URL
    $url = $this->BaseUrl . "identity.json/". $network;
    // Append the lookup details
    $params['screenName'] = $screenname;
    $params['key'] = $this->KloutKey;
    // Return the result;
    $CurlResult = $this->GET($url,$params);
    $ResultString = json_decode($CurlResult);
    // Assume it only returns "ks" data:
    $KloutID = $ResultString->id;

    return $KloutID; 
}

/** 
 * KloutIDLookupByID
 * Looks up a Klout ID from a Twitter ID
 * @param String $network The network to look the screen name up on
 * @param String $id The screen name to look up
 */
public function KloutIDLookupByID($network, $id){
    // Build the URL
    $url = $this->BaseUrl . "identity.json/". $network ."/". $id;
    // Append the lookup details
    $params['key'] = $this->KloutKey;
    // Return the result;
    $CurlResult = $this->GET($url,$params);
    $ResultString = json_decode($CurlResult);
    // Assume it only returns "ks" data:
    $KloutID = $ResultString->id;

    return $KloutID; 
}

/** 
 * KloutIDLookupReverse
 * Looks up a Klout ID from a Twitter ID
 * @param String $network The network to look the screen name up on
 * @param String $id The screen name to look up
 */
public function KloutIDLookupReverse($network, $id){
    // Build the URL
    $url = $this->BaseUrl . "identity.json/klout/". $id ."/". $network;
    // Append the lookup details
    $params['key'] = $this->KloutKey;
    // Return the result;
    return $this->GET($url,$params);

}
/******************************************************/
//       User
/******************************************************/

/** 
 * KloutUser
 * Looks up Klout User Data
 * @param String $id The Klout ID to look up
 */
public function KloutUser($id){
    // Build the URL
    $url = $this->BaseUrl ."user.json/". $id;
    // Append the lookup details
    $params['key'] = $this->KloutKey;
    // Return the result;
    return $this->GET($url,$params);

}

/** 
 * KloutUserScore
 * Looks up Klout User Score
 * @param String $id The Klout ID to look up
 */
public function KloutUserScore($id){
    // Build the URL
    $url = $this->BaseUrl ."user.json/". $id ."/score";
    // Append the lookup details
    $params['key'] = $this->KloutKey;
    // Return the result;
    return $this->GET($url,$params);

}

/** 
 * KloutUserTopics
 * Looks up Klout User Topics
 * @param String $id The Klout ID to look up
 */
public function KloutUserTopics($id){
    // Build the URL
    $url = $this->BaseUrl ."user.json/". $id ."/topics";
    // Append the lookup details
    $params['key'] = $this->KloutKey;
    // Return the result;
    return $this->GET($url,$params);

}

/** 
 * KloutUserInfluence
 * Looks up Klout User Influence
 * @param String $id The Klout ID to look up
 */
public function KloutUserInfluence($id){
    // Build the URL
    $url = $this->BaseUrl ."user.json/". $id ."/influence";
    // Append the lookup details
    $params['key'] = $this->KloutKey;
    // Return the result;
    return $this->GET($url,$params);

}

/******************************************************/
//       Scores
/******************************************************/

/** 
 * KloutScore
 * Looks up Klout Score, does not return any other data
 * @param String $id The Klout ID to look up
 */
public function KloutScore($id){
    // Use the Klout Score Data call to pull just the Score
    $CurlResult = $this->KloutUserScore($id);
    $ResultString = json_decode($CurlResult);
    $KloutScore = $ResultString->score;

    return $KloutScore; 
}

/** 
 * KloutScore
 * Returns changes in klout score
 * @param String $id The Klout ID to look up
 * @param String $period options are either day, week, month
 */
public function KloutScoreChanges($id, $period){
    // Use the Klout Score Data call to pull just the Score
    $CurlResult = $this->KloutUserScore($id);
    $ResultString = json_decode($CurlResult);
    if ($period == "day") {
        $KloutScoreChanges = $ResultString->scoreDelta->dayChange;
    } elseif ($period == "week") {
        $KloutScoreChanges = $ResultString->scoreDelta->weekChange;
    } else {
        $KloutScoreChanges = $ResultString->scoreDelta->monthChange;
    }
    return $KloutScoreChanges; 
}

/******************************************************/
//       Utility
/******************************************************/

/**
 * Request
 * Performs a cUrl request with a url generated by MakeUrl. 
 * @param String $url The base url to query
 * @param Array $params The parameters to pass to the request
 */
private function Request($url,$params=false,$type=HTTP_GET){

    // Populate data for the GET request
    if($type == HTTP_GET) $url = $this->MakeUrl($url,$params);

    // borrowed from Andy Langton: http://andylangton.co.uk/
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
    if ( isset($_SERVER['HTTP_USER_AGENT']) ) {
        curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT'] );
    }else {
        // Handle the useragent like we are Google Chrome
        curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/525.13 (KHTML, like Gecko) Chrome/0.X.Y.Z Safari/525.13.');
    }
    curl_setopt($ch , CURLOPT_TIMEOUT, 30);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

    // Populate the data for POST
    if($type == HTTP_POST){
        curl_setopt($ch, CURLOPT_POST, 1); 
        if($params) curl_setopt($ch, CURLOPT_POSTFIELDS, $params);
    }

    $result=curl_exec($ch);
    $info=curl_getinfo($ch);
    curl_close($ch);

    return $result;
}

/**
 * GET
 * Abstraction of the GET request
 */
private function GET($url,$params=false){
    return $this->Request($url,$params,HTTP_GET);
}

/**
 * POST
 * Abstraction of a POST request
 */
private function POST($url,$params=false){
    return $this->Request($url,$params,HTTP_POST);
}

/**
 * MakeUrl
 * Takes a base url and an array of parameters and sanitizes the data, then creates a complete
 * url with each parameter as a GET parameter in the URL (Credit to Stephen Young)
 * @param String $url The base URL to append the query string to (without any query data)
 * @param Array $params The parameters to pass to the URL
 */ 
private function MakeUrl($url,$params){
    if(!empty($params) && $params){
        foreach($params as $k=>$v) $kv[] = "$k=$v";
        $url_params = str_replace(" ","+",implode('&',$kv));
        $url = trim($url) . '?' . $url_params;
    }
    return $url;
} 
```

} ?>

我创建了一个控制器作为 klout.php

```
<?php

if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class klout extends CI_Controller {

    public $kloutapi_key;

    function __construct() {
        parent::__construct();
        $this->load->file('./klout/KloutAPIv2.class.php');
        $this->kloutapi_key = 'key';
    }

    public function kloutID() {

        $network = "twitter";
        $userid = 318066771330736;

       $klout = new KloutAPIv2($this->kloutapi_key);
     $kloutid = $klout->KloutIDLookupByID($network, $userid);

        print_r($kloutid);
        exit();

    }

}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T17:23:22.040

Twitter ID 与 Twitter 屏幕名称的适应略有不同：URL 结构不同，“network”字符串也不同：

*   ID呼叫时，网络为“tw”
*   用网名打电话时，网络是“twitter”

[这主要是我们 API Proxy 的路由匹配系统的一种解决方法]。

所以，通过 ID： [http ://api.klout.com/v2/identity.json/tw/318066771330736?key=foo](http://api.klout.com/v2/identity.json/tw/318066771330736?key=foo)

按屏幕名称： [http ://api.klout.com/v2/identity.json/twitter?screenName=jack&key=foo](http://api.klout.com/v2/identity.json/twitter?screenName=jack&key=foo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T13:03:36.233

我认为您必须将代码作为库加载，而不是使用`$this->load->file`，我查看 Code Igniter 用户指南`$this->load->file`：

> $this->load->file('文件路径/文件名', true/false)
> 
> 这是一个通用的文件加载功能。在第一个参数中提供文件路径和名称，它将打开并读取文件。默认情况下，数据会发送到您的浏览器，就像查看文件一样，但是如果您将第二个参数设置为 true（布尔值），它会将数据作为字符串返回。

所以，我的建议是使用图书馆。将您`KloutAPIv2.class.php`的文件放入`klout.php`application/libraries 文件夹中并加载它`$this->load->library('kout');`

您可以在加载库时将参数传递给构造函数，如下例所示：

```
$params = array('type' => 'large', 'color' => 'red');
$this->load->library('Someclass', $params); 
```

更多信息：[http ://ellislab.com/codeigniter/user-guide/general/creating_libraries.html](http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html)

# iphone - 使用 UIScrollView

> ID：13682958
> 
> 赞同：0
> 
> 时间：2012-12-03T12:10:04.863
> 
> 标签：iphone, objective-c, ios, uitableview, uiscrollview

`UIScrollView`当我向用户展示表单时，我有一个。你可以在这里看到我的故事板的截图。在选择器下方有一个提交按钮。

![在此处输入图像描述](../Images/a560297f3e9041874ab482ca3552260f.png)

我现在要做的是，当用户按下提交时。在 tableview 的顶部出现了一个 uitableview，其中包含所有先前设置的异常。

我现在的问题是，当按下提交按钮时，如何`tableview`在顶部放置一个？`scrollview`

希望任何人都可以帮助我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-09T07:00:10.117

如果您在任何基本视图上添加`UIScrollView`和`UITableView`，那么您应该在滚动时使用或添加表格，

无论如何，这必须有效..

`[tableview.superView bringSubviewToFront:tableView];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:34:09.197

使用此代码...

```
[scrollView addSubView:tableView];
[scrollview bringSubviewToFront:tableView]; 
```

# qt - QGraphicsItem 跳转到场景矩形之外

> ID：13682960
> 
> 赞同：1
> 
> 时间：2012-12-03T12:10:12.603
> 
> 标签：qt

我正在编写一个基本的可移动 Qt 项目。但有时在移动或按下它时会跳到场景矩形之外。我正在开发 OpenSuse 12.2 + Qt 4.8.1。代码真的很简单。但我找不到问题。

这是我的代码：

```
TrackLabelItem::PpiTrackLabelItem(PpiTrackItem *pParent, QGraphicsScene *pScene, QGraphicsLineItem *pCombLine)
    : QGraphicsItem(0, pScene), mpParent(pParent), mpCombineLine(pCombLine), mBoundingRect(QRectF(0, 0, 45, 15))
{

    setZValue(TRACK_Z_VALUE);   
    setFlags( ItemIsMovable | ItemSendsGeometryChanges | ItemIgnoresTransformations);
    setCacheMode(QGraphicsItem::DeviceCoordinateCache);
}

TrackLabelItem::~TrackLabelItem()
{

}

QRectF TrackLabelItem::boundingRect() const
{
    return mBoundingRect;
}

void TrackLabelItem::paint(QPainter *pPainter, const QStyleOptionGraphicsItem *pOption, QWidget *pWidget)
{

    pPainter->setRenderHint(QPainter::Antialiasing);
    pPainter->setPen(QPen(Qt::white, /*0.3*/1, Qt::DotLine, Qt::RoundCap, Qt::RoundJoin));
    pPainter->drawRect(mBoundingRect);
    pPainter->setFont(MAP_FONT);
    pPainter->setPen(QPen(Qt::white));
    pPainter->drawText(2, 1, mBoundingRect.width()-2, mBoundingRect.height()-1, Qt::AlignHCenter | Qt::AlignVCenter, mText);

}//paint

void TrackLabelItem::mouseMoveEvent(QGraphicsSceneMouseEvent * pEvent)
{
    update();
    QGraphicsItem::mouseMoveEvent(pEvent);
}

QVariant TrackLabelItem::itemChange(GraphicsItemChange pChange, const QVariant &pValue)
{
    if (pChange == ItemPositionChange && scene())
    {
        // value is the new position.
        QPointF newPos = pValue.toPointF();
        QRectF rect = scene()->sceneRect();
        if (!rect.contains(newPos))
        {
            double rectBottom = rect.bottom() + MAP_SCENE_DIFF;
            // Keep the item inside the scene rect.
            double posX = qMin(rect.right(), qMax(newPos.x(), rect.left()));
            double posY = qMin(rectBottom, qMax(newPos.y(), rect.top()));
            newPos = QPointF(posX, posY);

            return newPos;
        }
    }
    else if(pChange == ItemPositionHasChanged)
    {
        QPointF endPoint(pValue.toPointF().x(), pValue.toPointF().y());
        QPointF startPoint = mpParent->pos();
        mpCombineLine->setLine(QLineF(startPoint, endPoint));

        return QPointF(pValue.toPointF().x(), pValue.toPointF().y());
    }

    return QGraphicsItem::itemChange(pChange, pValue);
}//itemChange 
```

# python - 解析执行文件路径

> ID：13682961
> 
> 赞同：1
> 
> 时间：2012-12-03T12:10:22.807
> 
> 标签：python, path

> **可能重复：**
> [检索python模块路径](https://stackoverflow.com/questions/247770/retrieving-python-module-path)
> [python，脚本路径](https://stackoverflow.com/questions/595305/python-path-of-script)

我有一个 Python 文件，我想在执行该文件时解析路径。如果我像这样运行 myPython.py：

```
python ~/Documents/Project/myPython.py 
```

我想知道文件 myPython.py 中的路径“~/Documents/Project/”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:12:05.960

[`sys.argv[0]`](http://docs.python.org/2/library/sys.html#sys.argv)是 Python 执行的脚本的路径。您可以使用[`os.path.dirname()`](http://docs.python.org/2/library/os.path.html#os.path.dirname)从中获取目录名称：

```
import sys, os
print os.dirname(sys.argv[0]) 
```

如果是在命令行中输入的完整路径，则取决于操作系统；Mac OS X 和 Linux 都包含该路径。

但是，路径可能会根据 Python 调用它的方式而有所不同。另一种方法是使用`__file__`，您可以通过使用[`os.path.abspath()`](http://docs.python.org/2/library/os.path.html#os.path.abspath)和[`os.path.expanduser()`](http://docs.python.org/2/library/os.path.html#os.path.expanduser)覆盖所有变体来使路径成为绝对路径：

```
print os.path.dirname(os.path.abspath(os.path.expanduser(__file__))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:21:45.827

这个例子应该很有帮助：

*测试.py：*

```
import os

print 'Script directory: ' + os.path.realpath(os.path.dirname(__file__))
print 'Working directory: ' + os.getcwd() 
```

*在终端执行：*

```
$光盘~
$ python ~/桌面/test.py
脚本目录：/Users/tomas/Desktop
工作目录：/Users/tomas
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:27:28.397

只是你需要在 py 文件中写两条语句：

```
 import sys
          print sys.argv[0] 
```

# c# - 寻找教程或基本信息，让我开始在 C# 中为初学者实现 C/C++ API

> ID：13682966
> 
> 赞同：-1
> 
> 时间：2012-12-03T12:10:59.123
> 
> 标签：c#, c++, c, api

我正处于学习 c#/.NET 的早期阶段，使用 MonoDevelop 来完成我的工作。我遇到了一些用 c 或有时 c++ 开发的 API。我一直在寻找信息来帮助我开始实现用 c 或 c++ 编写的 API，以便我可以将它们用于我的 c# 项目。我现在没有任何具体的代码可以给你看，我需要的是指向正确的方向。

以下是我浏览过的一些地方的示例：

我正在考虑在 C# 中实现 ac/C++ API。我做了一些研究，但我在开始时遇到了麻烦。

[http://www.codeproject.com/Articles/1285/Calling-API-functions-using-C](http://www.codeproject.com/Articles/1285/Calling-API-functions-using-C)（一篇有点过时的文章，看起来可行，但似乎并没有走得太远。）

[http://www.csharpfriends.com/Articles/getArticle.aspx?articleID=219](http://www.csharpfriends.com/Articles/getArticle.aspx?articleID=219) （一些基础知识，但没有太多关于发生了什么的细节。）

在 SO 上找到了一些东西： [C api to C# GUI](https://stackoverflow.com/questions/9271863/c-api-to-c-sharp-gui) （这看起来非常好）

[https://stackoverflow.com/questions/9747607/c-apivs-2005-integrate-into-c-sharp-vs-2010project](https://stackoverflow.com/questions/9747607/c-apivs-2005-integrate-into-c-sharp-vs-2010project) （没有给出答案）

[从 C# 与 C 交谈](https://stackoverflow.com/questions/3250956/talking-to-c-from-c-sharp) （看起来不错，一些关于 Pinvoke 的东西）

无论如何，我有点不知所措，可以使用一些指导让我开始。也许这对于一个菜鸟来说太过分了 [原文如此]？

任何帮助深表感谢。干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T12:41:51.457

试试[SWIG——](http://www.swig.org/)它是一个为多种语言创建围绕 C 和 C++ 代码的包装器的工具。

我已经用过很多次了，效果很好。基本上，您只需定义要包装的 C 和 C++ 代码文件/库，然后 SWIG 生成相应的 C# 类（和一些样板代码），您可以简单地将其添加到您的 C# 项目中（当然您必须编译 C/C++ 部分并使其成为 DLL）。

例如。你可能有带有类的小型 C++ 库

```
class Foo { public: int myMethod(Bar& bar); }
class Bar { ... } 
```

在 SWIGing 之后，您的 C# 代码将类似于：

```
Bar bar = new Bar();
Foo foo = new Foo();
int result = foo(bar); 
```

# windows-installer - Installshield MDI 对话框

> ID：13682967
> 
> 赞同：2
> 
> 时间：2012-12-03T12:11:01.063
> 
> 标签：windows-installer, installshield, mdiparent

我想在一个对话框上显示多个对话框。有谁可以建议如何在 Installshield 中实现这种 MDI 父子关系？

尽快感谢您的回复。

问候， 阿努普

# mysql - 能够导航到相关记录的 SQL 数据库浏览器

> ID：13682968
> 
> 赞同：0
> 
> 时间：2012-12-03T12:11:02.310
> 
> 标签：mysql, sql, ide

您能否提议一些 SQL 数据库浏览器，它允许导航到：

*   此行引用的表/行
*   此行引用的表/行

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T12:14:49.517

我个人使用 NAVICAT，非常有效。

您可以输入自己的查询（与您的问题相关），甚至可以使用可视查询生成器。

[Navicat 网站](http://www.navicat.com/)

# java - 在 Eclipse 中关闭 Java 程序时保存会话

> ID：13682970
> 
> 赞同：1
> 
> 时间：2012-12-03T12:11:06.690
> 
> 标签：java, eclipse, session

我想知道如何恢复我每次在 Eclipse 中关闭并重新运行程序时所做的输入。例如，该程序允许用户添加一个餐厅对象并将其添加到一个向量中。在我关闭并重新运行程序后，这些餐厅对象仍将存在于向量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:21:00.080

泽勒是对的。您必须以某种方式存储信息：在数据库或文件系统中

为此，您可以使用序列化容器对象，例如向量 ArrayList 等。另一种方法是将其写入数据库，然后在启动时程序读取数据库并反序列化对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T12:41:20.927

Eclipse 经常为纪念品提供接口。因此，您可以轻松恢复您的视图或编辑器。

例如视图部分：

```
 public void saveState(IMemento memento)
  public void init(IViewSite site, IMemento memento) throws PartInitException 
```

但这是为了保存输入/选择。

如果您想存储所有数据，我更喜欢（嵌入式）数据库以及 Java Persistance API 或 Hibernate。因此，您可以轻松地将对象存储在关系数据库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:17:02.013

您的程序结束时对所有对象的引用都丢失了，这些对象可能会被垃圾收集器销毁。

您的对象引用丢失了一个，您将无法取回它。

**有人认为您可以这样做：**您必须在某个文件中的某个地方序列化您的对象，例如：在某个文件中，当您重新启动程序时，只需读取该文件并获取它。
看看 [如何序列化对象并将其保存到 Android 中的文件？](https://stackoverflow.com/questions/4118751/how-do-i-serialize-an-object-and-save-it-to-a-file-in-android)

# .net - .NET SerialPort.Read 跳过字节

> ID：13682972
> 
> 赞同：1
> 
> 时间：2012-12-03T12:11:08.690
> 
> 标签：.net, serial-port, overrun

## 解决方案

通过“port.ReadByte”逐字节读取数据太慢，问题出在 SerialPort 类中。我将其更改为通过“port.Read”读取更大的块，现在没有缓冲区溢出。

虽然我自己找到了解决方案，但写下来对我有帮助，也许其他人也有同样的问题，并通过谷歌找到了这个......

（如何将其标记为已回答？）

## 编辑 2

通过设置

```
port.ReadBufferSize = 2000000; 
```

我可以将问题延迟约 30 秒。所以看起来，.Net 真的太慢了​​......因为我的应用程序不是那么重要，我只是将缓冲区设置为 20MB，但我仍然对原因感兴趣。

## 编辑

我刚刚测试了一些我以前没有想到的东西（我感到羞耻）：

```
port.ErrorReceived += (object self, SerialErrorReceivedEventArgs se_arg) => { Console.Write("| Error: {0} | ", System.Enum.GetName(se_arg.EventType.GetType(), se_arg.EventType)); }; 
```

看来我已经超支了。.Net 实现对于 500k 来说太慢还是我这边有错误？

## 原始问题

我构建了一个非常原始的示波器（avr，它通过 uart 将 adc 数据发送到 ftdi 芯片）。在 pc 端我有一个 WPF 程序来显示这些数据。

协议是：

两个同步字节 (0xaffe) - 14 个数据字节 - 两个同步字节 - 14 个数据字节 - ...

我使用 16 位值，因此 14 个数据字节内有 7 个通道（首先是 lsb）。

我用 hTerm 验证了 uC 固件，它确实发送和接收一切正确。但是，如果我尝试用 C# 读取数据，有时会丢失一些字节。oszilloscop 程序一团糟，但我创建了一个小型示例应用程序，它具有相同的症状。

我添加了两种扩展方法 a) 从 COM 端口读取一个字节并忽略 -1 (EOF) 和 b) 等待同步模式。

示例程序首先通过等待 (0xaffe) 同步到数据流，然后将接收到的字节与预期值进行比较。循环运行几次，直到弹出断言失败消息。我无法通过谷歌找到任何有关丢失字节的信息，我们将不胜感激。

## 代码

```
using System;
using System.Collections.Generic;
using System.Diagnostics;
using System.IO.Ports;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace SerialTest
{
    public static class SerialPortExtensions
    {
        public static byte ReadByteSerial(this SerialPort port)
        {
            int i = 0;
            do
            {
                i = port.ReadByte();
            } while (i < 0 || i > 0xff);
            return (byte)i;
        }

        public static void WaitForPattern_Ushort(this SerialPort port, ushort pattern)
        {
            byte hi = 0;
            byte lo = 0;

            do
            {
                lo = hi;
                hi = port.ReadByteSerial();
            } while (!(hi == (pattern >> 8) && lo == (pattern & 0x00ff)));
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            //500000 8n1
            SerialPort port = new SerialPort("COM3", 500000, Parity.None, 8, StopBits.One);
            port.Open();
            port.DiscardInBuffer();
            port.DiscardOutBuffer();

            //Sync
            port.WaitForPattern_Ushort(0xaffe);

            byte hi = 0;
            byte lo = 0;
            int val;

            int n = 0;

            // Start Loop, the stream is already synced
            while (true)
            {
                //Read 7 16-bit values (=14 Bytes)
                for (int i = 0; i < 7; i++)
                {
                    lo = port.ReadByteSerial();
                    hi = port.ReadByteSerial();

                    val = ((hi << 8) | lo);
                    Debug.Assert(val != 0xaffe);
                }
                //Read two sync bytes
                lo = port.ReadByteSerial();
                hi = port.ReadByteSerial();

                val = ((hi << 8) | lo);
                Debug.Assert(val == 0xaffe);

                n++;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T05:04:29.693

通过“port.ReadByte”逐字节读取数据太慢，问题出在 SerialPort 类中。我将其更改为通过“port.Read”读取更大的块，现在没有缓冲区溢出。

# android - 从 Android 到 WP 7-8 的 SQLite DB

> ID：13682980
> 
> 赞同：1
> 
> 时间：2012-12-03T12:11:26.660
> 
> 标签：android, windows-phone-7.1, windows-phone, windows-phone-8

我正在尝试开发一个使用 SQLite 数据库的简单应用程序跨平台。实际上我有一个使用这个数据库的 Android 应用程序，我正在寻找一个很好的解决方案来在基于 WP 7-8 和 W8 OS 的其他应用程序中使用这个数据库。

我读了这个指南[http://www.windowsphonegeek.com/news/windows-phone-7-native-database-programming-via-sqlite-client-for-wp7](http://www.windowsphonegeek.com/news/windows-phone-7-native-database-programming-via-sqlite-client-for-wp7) 但同时我找到了 Windows Phone 的预编译二进制文件8 在 [http://www.sqlite.org/download.html](http://www.sqlite.org/download.html)

现在我有点困惑，我不明白两件事：

*   WPGeek 的解决方案对 WP8 也有用吗？还是现在，感谢 WP8 和 W8，一切都改变了？
*   我可以使用 WP8 的预编译二进制文件为 WP 7.1 创建应用程序吗？

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:25:14.033

AFAIK，WPGeek 的解决方案对 WP8 也很有用。您现在不能将 WP8 的二进制文件用于 WP 7。因此，如果您同时针对 7.1 和 8，最好使用 WPGeeks 解决方案。

对于 Windows 8，这个过程又有点不同。您可以利用那里的预编译二进制文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T08:14:51.207

对于 WP7.1 和 WP8，我使用 [http://sqlitewindowsphone.codeplex.com/releases](http://sqlitewindowsphone.codeplex.com/releases)它对我很有用

# symfony - 生产服务器上的 Symfony2 Shell.php 错误

> ID：13682981
> 
> 赞同：1
> 
> 时间：2012-12-03T12:11:33.370
> 
> 标签：symfony

`app_dev.php`我在生产服务器上收到以下错误：

> ErrorException：注意：未定义变量：/www/acme/www/vendor/symfony/symfony/src/Symfony/Component/Finder/Shell/Shell.php 第 59 行中的输出
> 
> 1.  在 /www/acme/www/vendor/symfony/symfony/src/Symfony/Component/Finder/Shell/Shell.php 第 59 行
> 2.  在 ErrorHandler->handle('8', '未定义变量：输出', '/www/acme/www/vendor/symfony/symfony/src/Symfony/Component/Finder/Shell/Shell.php', '59', array('command' => 'find')) 在 /www/acme/www/vendor/symfony/symfony/src/Symfony/Component/Finder/Shell/Shell.php 第 59 行
> 3.  在 /www/acme/www/vendor/symfony/symfony/src/Symfony/Component/Finder/Adapter/AbstractFindAdapter.php 第 123 行中的 Shell->testCommand('find')
> 4.  在 /www/acme/www/vendor/symfony/symfony/src/Symfony/Component/Finder/Adapter/GnuFindAdapter.php 第 30 行中的 AbstractFindAdapter->isSupported()
> 5.  在 /www/acme/www/vendor/symfony/symfony/src/Symfony/Component/Finder/Finder.php 第 700 行中的 GnuFindAdapter->isSupported()
> 6.  在 Finder->searchInDirectory('/www/acme/www/vendor/symfony/symfony/src/Symfony/Component/Validator/Resources/translations') 在 /www/acme/www/vendor/symfony/symfony/src/Symfony /Component/Finder/Finder.php 第 628 行
> 7.  在 /www/acme/www/vendor/symfony/symfony/src/Symfony/Bundle/FrameworkBundle/DependencyInjection/FrameworkExtension.php 第 555 行中的 Finder->getIterator()
> 8.  在 FrameworkExtension->registerTranslatorConfiguration(array('fallback' => 'pl', 'enabled' => true), object(ContainerBuilder)) 在 /www/acme/www/vendor/symfony/symfony/src/Symfony/Bundle/ FrameworkBundle/DependencyInjection/FrameworkExtension.php 第 106 行
> 9.  在 FrameworkExtension->load(array(array('translator' => array('fallback' => 'pl'), 'secret' => 'eea6ad638afadb62cd7bc360e98f7d3b', 'router' => array('resource' => '/ www/acme/www/app/config/routing.yml', 'strict_requirements' => true), 'form' => true, 'csrf_protection' => true, 'validation' => array('enable_annotations' => true ), '模板' => array('engines' => array('twig')), 'trust_proxy_headers' => false, 'default_locale' => 'pl', 'session' => null), array('router ' => array('resource' => '/www/acme/www/app/config/routing_dev.yml'), 'profiler' => array('only_exceptions' =>false))), object(ContainerBuilder)) 在 /www/acme/www/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/Compiler/MergeExtensionConfigurationPass.php 第 42 行
> 10.  在 /www/acme/www/vendor/symfony/symfony/src/Symfony/Component/HttpKernel/DependencyInjection/MergeExtensionConfigurationPass.php 第 39 行中的 MergeExtensionConfigurationPass->process(object(ContainerBuilder))
> 11.  在 /www/acme/www/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/Compiler/Compiler.php 第 119 行中的 MergeExtensionConfigurationPass->process(object(ContainerBuilder))
> 12.  在 /www/acme/www/vendor/symfony/symfony/src/Symfony/Component/DependencyInjection/ContainerBuilder.php 第 494 行中的 Compiler->compile(object(ContainerBuilder))
> 13.  在 /www/acme/www/app/bootstrap.php.cache 第 950 行中的 ContainerBuilder->compile()
> 14.  在 /www/acme/www/app/bootstrap.php.cache 第 859 行中的 Kernel->buildContainer()
> 15.  在 /www/acme/www/app/bootstrap.php.cache 第 571 行中的 Kernel->initializeContainer()
> 16.  在 /www/acme/www/app/bootstrap.php.cache 第 614 行中的 Kernel->boot()
> 17.  在 /www/acme/www/web/app_dev.php 第 29 行的 Kernel->handle(object(Request))

在我的本地主机上一切正常，因此服务器配置可能有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T14:32:27.230

我的托管也遇到了同样的问题，关闭了 php safe_mode。实际上有一个待办事项，但我不知道他们什么时候会修复它。

```
// todo: find a better way (command could not be available)
exec('command -v '.$command, $output, $code); 
```

如 Symfony\Component\Finder\Shell\Shell 中所见；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T14:29:51.860

由于安全原因，托管服务提供商已关闭 PHP 执行功能。这就是发生上述错误的原因。有谁知道是否可以绕过 Symfony2 中的 exec 功能 - 我的意思是是否可以在关闭 exec 功能的服务器上运行 symfony2？

# java - 使用 DataOutputStream 时的新行，Android

> ID：13682983
> 
> 赞同：4
> 
> 时间：2012-12-03T12:11:45.987
> 
> 标签：java, android

我试图将一些数据从我的数据库导出到文件中。我正在使用，`DataOutputStream`因为我需要方法`writeChars(String r)`。

问题是我找不到改变线路的方法。留下一个空间，`"\n"`但它没有改变线。有什么办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T12:14:03.117

您可以使用类似的变量`String newLine = System.getProperty("line.separator");`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-03T12:16:49.153

如果您只想将文本写入文件，则您选择了错误的类。DataOuputStream.writeChars 始终以 UTF-16BE 写入字符。请改用 BufferedWriter 或 PrintWriter。PrintWriter.println 将特定于平台的行分隔符附加到行尾。行分隔符由系统属性 line.separator 定义，不一定是单个换行符 ('\n')。例如对于 Windows "\r\n"，对于 Unix '\n' 等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-03T12:14:31.490

用这个 ：`String nl = System.getProperty("line.separator");`

# ruby-on-rails - 在rails中，如何使用ajax重新加载部分，只有满足特定条件？

> ID：13682984
> 
> 赞同：0
> 
> 时间：2012-12-03T12:11:47.070
> 
> 标签：ruby-on-rails

我的应用程序有帖子和评论。我想使用 ajax 更新评论。只有当帖子的评论数量增加时，我才想重新加载部分评论。所以，我想创建一个动作，检查帖子的评论数，如果评论数增加，我将重新加载部分，否则我不想重新加载它。有可能实现这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T12:43:21.333

在架构方面，使用服务器推送技术会更好。例如 Faye [https://github.com/faye/faye](https://github.com/faye/faye)

您正在谈论的决定称为轮询。如果您没有高负载应用程序，这是可以接受的。

# php - 如何在页面上按角色列出用户？

> ID：13682985
> 
> 赞同：2
> 
> 时间：2012-12-03T12:11:47.460
> 
> 标签：php, drupal, drupal-7, drupal-modules, drupal-views

我的网站上有许多用户角色。

所有用户都有个人资料信息（添加了自定义文件）。

在一个页面中，我想显示用户喜欢的 3 种角色类型

```
Role1 :

picture |  name | email | phone no

.....
.....

Role2 :

picture |  name | email | phone no

.....
.....

Role3 :

picture |  name | email | phone no

.....
..... 
```

使用视图（过滤器）我们可以按角色或其他任何内容列出用户，但我想显示具有上述自定义格式的 3 个基于角色的用户。

我们有这样的选择吗？或者我可以为每个角色创建 3 个视图并最终合并它吗？还是我想编写自定义代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:30:08.340

在`Advanced section`视图中，单击添加新`Contextual filters`然后选择`User: Roles`

现在您可以列出由`Role ID`.

like：`users-page/2`将列出具有身份验证用户角色的用户，`users-page/3`将列出具有管理员角色的用户，等等。

**更新 1**：

在部分`Configure contextual filter: User: Roles`中，打开`More`底部的字段集。

然后访问该页面，`users-page/3+4`将列出具有管理员角色和角色 id 4 的用户。

**更新 2**：

添加`roles`到字段并检查`Exclude form display`. 然后在`Format`->`Settings`选择`Grouping field`到`Roles`。

# memory-management - 在咖啡脚本中构建类时，是否有理由不使用实例方法的粗箭头？

> ID：13682986
> 
> 赞同：12
> 
> 时间：2012-12-03T12:11:54.630
> 
> 标签：memory-management, coffeescript, arrow-functions

在咖啡脚本中构建类时，是否有理由**不**使用粗箭头作为实例方法？

编辑：那好吧！很好的回复！:)
总而言之，问题是：
- 占用更多内存
- 无法修补
- 求问，为什么要使用这种方法？
约定：
- 绑定函数时要明确。
- 在构造函数中声明粗箭头方法。
- 尽可能多地使用，而不是在类声明中。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-03T16:12:55.287

Yes, there are reasons to not use the fat arrows always. In fact i'd argue in favour of *never* using fat-arrowed methods :)

Thin-arrow and fat-arrow methods are conceptually different things. The former are compiled to the expected prototype-based JS code; the methods belong to the class prototype. Fat-arrowed methods, on the other hand are associated with each instance in the constructor's code.

The most obvious disadvantage of always using fat-arrowed methods is that it makes each class instance take more memory (because it has more own properties) and its initialization be slower (because it has to create those bound functions and set them each time an instance is created).

Another disadvantage of using fat-arrow methods is that it breaks the usual expectation of what a method is: a method is no longer a function shared between the instances of a class, but it now is a separate function for each instance. This can cause problems if, for example, you'd want to modify a method after it has been defined in the class:

```
class Foo
  # Using fat-arrow method
  bar: (x) => alert x

# I have some Foos
foos = (new Foo for i in [1..3])

# And i want to path the bar method to add some logging. 
# This might be in another module or file entirely.
oldbar = Foo::bar
Foo::bar = (args...) ->
  console.log "Foo::bar called with", args
  oldbar.apply @, args

# The console.log will never be called here because the bar method 
# has already been bound to each instance and was not modified by 
# the above's patch.
foo.bar(i) for foo, i in foos 
```

* * *

But the most important disadvantage in my opinion is more subjective: introducing fat-arrow methods makes the code (and the language) unnecessarily inconsistent and difficult to understand.

The code becomes more inconsistent because before introducing fat-arrow methods any time we see `<someProp>: <someVal>` in a class definition we know it means "declare a property named `<someProp>` with a value `<someVal>` in the class' prototype" (unless `<someProp> == 'constructor'`, which is a special case), it doesn't matter if `<someVal>` is a number or a function, it will just be a property in the prototype. With the introduction of fat-arrowed methods we now have another unnecessary special case: if `<someVal>` is a fat-arrowed function it will do a completely different thing than with any other value.

And there's another inconsistency: fat arrows [bind the `this` differently](https://github.com/jashkenas/coffee-script/issues/2492) when they are used in a method definition than when used anywhere else. Instead of preserving the outer `this` (which, inside a `class`, `this` is bound to the class constructor) the `this` inside a fat-arrowed method is an object that does not exist when the method is defined (i.e. an instance of the class).

If you mix thin-arrowed and fat-arrowed methods the code also becomes harder to follow because now every time a developer sees a fat-arrowed method they'll ask themselves why was it needed that for *that* method to be instance-bound. There's no immediate correlation between the method's declaration and where it's being used, which is where the need for fat-arrow method arises.

* * *

For all this, i'd recommend to never use fat-arrow methods. Prefer binding the method to an instance where it's going to be used instead of where the method is declared. For example:

```
# Be explicit about 'onClick' being called on 'someObject':
$someJQueryElement.on 'click', (e) -> someObject.onClick e

# Instead of:
$someJQueryElement.on 'click', someObject.onClick 
```

Or, if you really want to bind the method on every instance on construction time, be explicit about that:

```
# Instead of fat-arrow methods:
class A
  constructor: ->
    @bar = 42
  foo: => 
    console.log @bar

# Assing the method in the constructor, just like you would 
# do with any other own property
class A
  constructor: ->
    @bar = 42
    @foo = => 
      console.log @bar 
```

I think that in the second definition of `class A` it's much more explicit what is happening with the `foo` method than in the first definition.

Finally, notice that i'm not arguing against using the fat arrow at all. It's a very useful construct and i use it all the time for normal functions; i just prefer to avoid using it inside a `class` method definition :)

* * *

**Edit**: Another case against using fat-arrowed methods: decorator functions:

```
# A decorator function to profile another function.
profiled = (fn) ->
  (args...) ->
    console.profile()
    fn.apply @, args
    console.profileEnd()

class A
  bar: 10

  # This works as expected
  foo: profiled (baz) ->
    console.log "@bar + baz:", @bar + baz

  # This doesn't
  fatArrowedFoo: profiled (baz) =>
    console.log "@bar + baz:", @bar + baz

(new A).foo 5           # -> @bar + baz: 15
(new A).fatArrowedFoo 5 # -> @bar + baz: NaN 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-02T17:16:57.103

让我添加我的另一种观点。

@epidemian 表达的避免胖箭头的详细原因很好，但请考虑以下几点：

*   如果您不关心（非常或根本不关心）由 CoffeeScript 生成的“底层基于原型的 JS 代码”，只要您能够编写一致且无错误的 CoffeeScript 代码；
*   如果你不打算像 Java 那样编写大量的小类，那将花费 99% 的时间在继承树上上下调用彼此的方法，并且在此过程中完成的工作很少；换句话说，如果您认识到性能敏感的“内部循环”不是放置方法调用的好地方；
*   如果您不打算在运行时装饰、猴子修补或以其他方式修改类的方法；
*   如果您在标题注释中说明您对胖箭头的使用，为了将来开发您的代码的开发人员的利益；

那么我建议**始终将 fat arrow**用作方法和匿名函数的习惯。

这将使您的 CoffeeScript 代码更简单、更安全和更直观，因为您将知道这一点**`this`并`@`始终引用您正在定义其方法的当前对象**，就像在大多数其他编程语言中一样，与在运行时调用您的函数和方法的人无关.

更正式地说，胖箭头使`this`关键字（及其简写`@`）完全在词法范围内，就像任何其他标识符一样。编程语言历史表明，词法作用域是确定标识符作用域的最直观且不易出错的方法。这就是为什么它在很久以前成为所有新语言的标准行为。

如果您选择此路径，**细箭头将成为例外**，并且是一个有用的路径。您将使用它来准备那些需要`this`引用调用者在运行时定义的东西而不是您自己的对象的特定回调。这是一个反直觉的含义`this`，但是一些 JS 库在用户提供的函数中需要这种行为。然后细箭头将用于突出显示这些代码。如果我没记错的话，jQuery 通常会在函数参数中提供你需要的一切，所以你可以忽略它的人工`this`，但其他库就没有那么仁慈了。

注意：CoffeeScript 1.6.1 有一个与粗箭头方法相关的错误，因此您应该避免这种情况。以前和以后的版本应该没问题。

## 表现

当用作常规（匿名）函数时，胖箭头不会增加任何开销。在方法声明[中，它确实增加了**很小**的RAM 和 CPU 开销](http://nesbot.com/2012/1/20/CoffeeScript-why-is-function-binding-not-the-default)（真的很小：每个方法调用几纳秒和几个字节的 RAM，而后者在具有尾调用优化的引擎上消失了。）

恕我直言，作为交换的语言清晰度和安全性胖箭头足以容忍甚至欢迎小额开销。许多其他 CoffeeScript 习惯用法在生成的代码（for 循环等）中添加了自己的微小开销，目的是使语言行为更加一致且不易出错。胖箭也不例外。

# javascript - HTML 固定大元素

> ID：13682994
> 
> 赞同：3
> 
> 时间：2012-12-03T12:12:08.497
> 
> 标签：javascript, html, css, twitter-bootstrap

几个小时以来，我一直在绞尽脑汁和我的 Google Fu 试图找到一个解决方案，但似乎无法提出任何令人满意的解决方案。

我想将一个元素附加到页面的一侧以获得某些搜索条件，就像 Bootstrap 的“Affix”插件一样。（[在这里演示](http://twitter.github.com/bootstrap/components.html)）。问题是元素比窗口高得多的情况很常见。所以会涉及到元素本身的滚动。

通常这不会成为问题，因为当用户点击文档的顶部 + 底部时，他们将能够看到固定元素的顶部和底部。（请参阅引导示例，同时缩小窗口非常短）。但是我们计划在我们的结果集上使用无限滚动，这意味着不会有底部可以击中，因此他们永远不会看到固定元素的底部。当用户向下滚动时，它需要底部固定以便用户看到所有标准，然后在向上滚动时，它需要顶部固定。

所以我从修改 Bootstrap 的插件开始（我实际上并没有使用 bootstrap）。现在向下滚动页面很容易，在元素底部使用一个固定点意味着它直到你到达它的底部才被固定。

但是再次向上滚动是我遇到问题的地方。

我是否在这里遗漏了一些非常明显和容易的东西（毕竟是星期一早上），或者有人知道引导词缀的插件/补丁。

**TL;DR** 需要在页面上附加一个非常高的元素并允许它滚动。所以它在向下的路上是固定的，然后当他们向上滚动时，元素没有固定，所以它也在向上滚动。一旦元素的顶部被击中，将其固定在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T14:47:18.050

这是你想做的吗**[DEMO](http://jsbin.com/ijiqow/33)**

简单的 jQuery 函数会有所帮助。

```
$(function()
  {
 affix= $(".affix-top");
 var affixHeight = parseInt(affix.height());
 var affixTop    = parseInt(affix.offset().top);
 var affixBottom = parseInt(affixTop + affixHeight);

// Bind a scroll event for the whole page
$(document).bind("scroll", function(e) 
{
    // Calculate how far down the user has scrolled
    var screenBottom = parseInt($(window).height() +$(window).scrollTop()  );

    // Test if the div has been revealed
    if(screenBottom > affixBottom)
    {
      affix.attr("style","");
      affix.css({"bottom":"0px","position":"fixed"});
    }
   else
   {
    affix.attr("style","");
    affix.css({"top":"0px","position":"relative"});
   }
});

  }); 
```

# php - 第一次打开时出错，PHP

> ID：13682996
> 
> 赞同：0
> 
> 时间：2012-12-03T12:12:11.930
> 
> 标签：php, html, mysql

当程序直接运行时我收到一条错误消息，但是当我单击搜索按钮时它可以正常工作。

错误消息是`Notice: Undefined index no in [...] on line 21`，第 21 行是`$no1 = $_POST['no'];`

我该如何解决？

这是我的完整代码：

```
<html>
<head>
<title> Searching </title>
</head>
<body>

<form method="POST" action="out.php">
<table border="0" cellpadding="5" cellspacing="0">
<tbody>
    <tr>
        <td>  No </td>
        <td>:</td>
        <td> <input type="text" name="no"> </td>
        <td> <input type="SUBMIT" name="SUBMIT" id="SUBMIT" value="search" > 
        <?php

        include('connect.php');

        $no1 = $_POST['no'];
        $no = strtoupper($no1);
        $query = mysql_query("select no, type, time from park where no = '$no'") or die(mysql_error());
        $data = mysql_fetch_array($query); 

        ?>
        </td>
    </tr>

    <tr>
        <td>Type</td>
        <td>:</td>
        <td><input type="text" name="type" maxlength="30" value= "<?php echo $data['type']; ?>" /></td>
    </tr>
    <tr>
        <td>Time</td>
        <td>:</td>
        <td><input type="text" name="time" maxlength="4" value= "<?php echo $data['time']; ?>" //></td>
    </tr>

    <tr></tr>

</tbody>
</table>
</form>
</body>
</html> 
```

和截图：

![在此处输入图像描述](../Images/e5b5b1ecec20bf8db53976cb131093d2.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T12:15:35.197

首先检查天气`$_POST['no']`是否已设置`empty`

```
if(isset($_POST['no']) && !empty(trim($_POST['no']))){
  $no1 = $_POST['no'];
        $no = strtoupper($no1);
        $query = mysql_query("select no, type, time from park where no = '$no'") or die(mysql_error());
        $data = mysql_fetch_array($query); 

      .
      .
      .

      }
        ?> 
```

**警告：**您的代码容易受到[**sql 注入**](http://en.wikipedia.org/wiki/SQL_injection)的影响，并且`mysql_*`函数已被弃用，因此请使用[`PDO`](http://in2.php.net/pdo)或[`MySQLi`](http://in3.php.net/mysqli)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-03T12:16:38.850

当你第一次运行`$_POST['no']`时没有设置，但是当你选择搜索按钮时`$_POST['no']`被填充。因此，在您的代码中，您应该测试它是否已设置

```
if (isset($_POST['no'])) {
...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T12:21:54.410

当未设置数组的索引时，将引发错误**未定义的索引在您发布的图像中。**在这种情况下，错误确实意味着输入字段的值`no`尚未发布（尚未），因此`$_POST['no']`未设置变量。

如果您首先检查该变量是否存在，则可以防止发出错误。这可以通过*“神奇”* [`isset()`](http://php.net/manual/en/function.isset.php)功能来完成：

```
if (isset($_POST['no'])) {
    $no1 = $_POST['no'];
}
else {
    $no1 = ...
} 
```

# cuda - CUDA 开发人员工具包：显示驱动程序安装失败

> ID：13682997
> 
> 赞同：2
> 
> 时间：2012-12-03T12:12:15.353
> 
> 标签：cuda, nvidia

我有 Nvidia Quadro NVS4200M 和 Intel Integrated Graphics（在我的笔记本电脑上）。我似乎无法成功安装**[CUDA 5.0 工具包](https://developer.nvidia.com/cuda-toolkit)**。

我正在运行 64 位 Windows 7 企业版。我尝试了 64 位台式机和笔记本安装程序以及 32 位安装程序。

所有这些似乎都失败并显示错误消息**“显示驱动程序安装失败”**。[**我从这里**](http://www.nvidia.com/object/quadro-notebook-win8-win7-winvista-64bit-307.45-whql-driver.html)安装了最新的驱动程序，它应该支持 CUDA-5.0，尽管如此，安装还是失败了。

* * *

失败后，库和二进制文件存在，但未**安装 NSight Eclipse**（似乎没有独立安装链接）。可能的问题是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-03T15:37:52.430

1.  我不确定为什么在您的情况下驱动程序安装失败，但是如果您安装了“最近的”驱动程序，则无需使用 cuda 安装程序附带的驱动程序。cuda 安装程序提供了单独的选项来安装工具包（必需）、示例（可选）和驱动程序（仅当您有较旧的驱动程序时才需要），因此您可以在提示安装驱动程序时选择“否”，以避免这种情况，假设您有一个最近的驱动程序或[安装了一个](http://www.nvidia.com/Download/index.aspx?lang=en-us)如[307.45 驱动程序](http://www.nvidia.com/object/quadro-notebook-win8-win7-winvista-64bit-307.45-whql-driver.html)。
2.  如果您有 64 位操作系统，则应始终使用 64 位安装程序。
3.  唯一[官方支持的 Windows 的 C/C++ 编译器](http://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html#windows)是 cl.exe，Microsoft Visual Studio 附带的微软编译器（[Express 版](http://www.microsoft.com/visualstudio/eng/products/visual-studio-2010-express)可以，它是免费的）或[Windows SDK](https://stackoverflow.com/questions/8985860/compile-cuda-without-visual-studio-cannot-find-compiler-cl-exe-in-path) （仅供命令行使用）。你可以自由地尝试其他东西，但你的里程可能会有所不同。MS VS 2010（和 2008）是最容易使用的。MS VS 2012 可以工作，但[可能需要额外的步骤](http://blog.norture.com/2012/10/gpu-parallel-programming-in-vs2012-with-nvidia-cuda/)。
4.  我建议在安装 Microsoft Visual Studio*之后*安装 cuda 。这是因为 cuda 安装程序应该会自动找到您的 VS 安装并更新一些重要文件以使构建 cuda 项目更容易。
5.  nsight Eclipse Edition 是一个仅限 linux 的工具（或 mac）。它不适用于 windows，也不会由 windows cuda 安装程序安装。nsight EE 为代码构建、调试和分析提供了环境。在windows中，可以通过MS VS IDE进行代码构建，独立的Visual Profiler进行分析，并使用单独的插件nsight Visual Studio Edition，在Visual Studio中进行调试和分析，可以完成相应的操作。由于 Visual Studio 的构建方式，nsight Visual Studio 版不能与 Visual Studio 的免费版本一起使用。nsight visual studio 有[自己独立的安装程序](https://developer.nvidia.com/nvidia-nsight-visual-studio-edition)。
6.  Windows[入门指南](http://docs.nvidia.com/cuda/cuda-getting-started-guide-for-microsoft-windows/index.html)也可能很有趣。