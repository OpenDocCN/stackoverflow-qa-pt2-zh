# StackOverflow 问答 12667000-12667999

# dart - Dart 编程语言是否有相当于 Javascript 的“原型”？

> ID：12667001
> 
> 赞同：5
> 
> 时间：2012-10-01T02:51:14.170
> 
> 标签：dart

在 Dart 中，一个函数是否可以有一个与之关联的原型？

示例 Javascript 代码：

```
doStuff.prototype.isDefined = true; //is there anything like Javascript's function prototypes in Dart?
function doStuff(){
    console.log("The function doStuff was called!");
} 
```

是否可以在 Dart 中做与此等效的操作（即，为每个函数创建一个属性列表？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T05:10:32.677

这里要解决两件事：

首先，Dart 没有原型或原型继承，而是使用经典继承。对象有一个类，而不是原型，对象有一个超类，而不是原型链。

其次，对于您的具体情况，我认为我们必须了解更多您需要做的事情才能找出在 Dart 中执行此操作的惯用方式。应该很快就可以使用对象来模拟函数，这样您就可以调用一个对象并且仍然拥有与之关联的状态和其他方法。

有关更多信息，请参阅本文：[http ://www.dartlang.org/articles/emulating-functions/](http://www.dartlang.org/articles/emulating-functions/)

当该功能落地时，您将能够执行以下操作：

```
class DoStuff {
  bool isDefined = true;
  call() => print("The function doStuff was called!");
}
var doStuff = new DoStuff();

main() => doStuff(); 
```

如果您有一组关于您需要跟踪的函数的固定元数据，那么这很有效。它与 JavaScript 略有不同，因为 Dart 函数的每个实例都有自己的状态`isDefined`。我不确定是否有可能或容易获得该函数的多个实例是 JavaScript，但您可能需要将其设为`isDefined`静态，以便在所有实例之间共享该值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T03:34:31.473

Dart 不允许您在运行时从类的实例中添加或删除成员变量。在 Dart 中重写您的示例，它可能看起来像这样：

```
class doStuff {
  bool isDefined;
  doStuff() {
    isDefined = true;
  }
  void stuff() {
    print('The function stuff was called!');
  }
}

main() {
  new doStuff().stuff();
} 
```

如果你想在 Dart 的类中添加一个属性包，你可以这样写：

```
class PropertyObject {
  Map<String, Dynamic> properties;

  PropertyObject() {
    properties = new Map<String, Dynamic>();
  }

  Dynamic operator[](String K) => properties[K];
  void operator[]=(String K, Dynamic V) => properties[K] = V;
}

main() {
  PropertyObject bag = new PropertyObject();
  bag['foo'] = 'world';
  print('Hello ${bag['foo']}');
} 
```

请注意，您不能使用“.”访问地图属性。操作员。

# c++ - C++“不能将参数声明为抽象类型

> ID：12667002
> 
> 赞同：10
> 
> 时间：2012-10-01T02:51:15.847
> 
> 标签：c++, abstract-class, abstract

我正在尝试在 C++ 中实现通用包装器，它将能够比较两件事。我已经这样做了：

```
template <class T>
class GameNode {
    public:
        //constructor
        GameNode( T value )
            : myValue( value )
        { }

        //return this node's value
        T getValue() {
            return myValue;
        }

        //ABSTRACT
        //overload greater than operator for comparison of GameNodes
        virtual bool operator>( const GameNode<T> other ) = 0;

        //ABSTRACT
        //overload less than operator for comparison of GameNodes
        virtual bool operator<( const GameNode<T> other ) = 0;

    private:
        //value to hold in this node
        T myValue;
}; 
```

似乎我不能以这种方式重载 '<' 和 '>' 运算符，所以我想知道我能做些什么来解决这个问题。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-10-01T02:53:55.080

您的运算符函数正在通过副本接受它们的参数。但是，由于纯虚函数，无法构造新的 GameNode 实例。您可能希望通过引用来接受这些参数。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-01T02:53:14.237

抽象类型之所以有用，是因为它们是多态的，实际上它们必须以多态方式使用（这是虚拟和纯虚拟又名抽象之间的区别）。

多态性需要引用或指针。在这种情况下，您需要参考。

按值传递尝试通过复制参数来创建新对象，但无法创建抽象类型的实例。通过引用传递使用现有实例而不是创建新实例，并避免了这个问题。

# java - 从 URL 存储原始 HTML 内容，然后从内存中获取 InputStream（不使用连接）

> ID：12667003
> 
> 赞同：2
> 
> 时间：2012-10-01T02:51:15.240
> 
> 标签：java, multithreading, http, producer-consumer

我有一个涉及多线程的棘手问题。我所做的是使用一个线程池 ( `ExecutorService`)，该线程池的任务是打开连接并将它们放入`LinkedBlockingQueue`.

到目前为止，我使用过：

```
//run method in "getter threads"
public void run() {

    try {

    URL url = new URL(url_s); //url_s is given as a constructor argument

    //if I am correct then url.openStream will wait until we have the content
    InputStream stream = url.openStream();

    Request req = new Request(); //a class with two variables:
    req.html_stream = new InputSource(stream);
    req.source = stream;

    //this is a class variable (LinkedBlockingQueue<Request>)
    blocking_queue.put(req);

    } catch  (Exception ex) {
    logger.info("Getter thread died from an exeption",ex);
    return;
    }
} 
```

然后我有消费者线程 (java.lang.Thread) 接受这些`InputSource`s 和`InputStream`s 并执行以下操作：

```
public void run() {
   while(running) {
        try {
            logger.info("waiting for data to eat");
            Request req = blocking_queue.take();
            if(req.html_stream != null)
            eat_data(req);
        } catch (Exception ex) {
            logger.error(ex);
            return;
        }
   }
} 
```

eat_data 调用一个采用 InputSource 的外部库。该库使用单例实例进行处理，因此我不能将此步骤放在“getter”线程中。

当我针对少量数据测试这段代码时，它运行良好，但是当我为它提供数千个 URL 时，我开始遇到真正的问题。确切地找出问题所在并不容易，但我怀疑连接在消费者线程到达之前就超时了，有时甚至会导致死锁。

我以这种方式实现它是因为从 url.openStream() 到 InputSource 非常容易，但我意识到我确实必须在本地存储数据才能使其工作。

如何从 url.openStream() 获取可以存储在我的`LinkedBlockingQueue`（内存中的所有数据）中的某个对象，当我的消费者线程有时间处理它时，我可以将其转换为 InputSoruce？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T05:52:48.817

您可以将 URL 的内容复制到 a`ByteArrayOutputStream`并关闭 URL Stream。然后将其存储`ByteArrayInputStream`在队列中。

伪代码：

```
InputStream in = null;
try {
    in = url.openStream();
    ByteArrayOutputStream buffer = new ByteArrayOutputStream();
    IOUtils.copy(in, buffer);

    ByteArrayInputStream bin = new ByteArrayInputStream(buffer.toByteArray());
    queue.put(bin);
} 
```

参考 ：

1.  [java.io.ByteArrayInputStream](http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayInputStream.html)
2.  [java.io.ByteArrayOutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/ByteArrayOutputStream.html)
3.  [org.apache.commons.io.IOUtils.IOUtils](http://commons.apache.org/io/api-1.4/org/apache/commons/io/IOUtils.html)

# c# - 关于基于反汇编的简单C#代码手工编码IL的问题

> ID：12667008
> 
> 赞同：6
> 
> 时间：2012-10-01T02:52:37.070
> 
> 标签：c#, il

我刚开始稍微研究一下 IL，我很好奇我从编译器输出中删除多余代码的尝试（如下所示）是否有任何意外的副作用。

关于结果的几个问题：

1.  原文中nop操作的目的是什么？
2.  原始方法末尾的 br.s 的目的是什么？
3.  重新编写的版本是否有任何不当之处？

原始 C# 代码：

```
class Program {
    public static int Main() {
        return Add(1, 2);
    }
    public static int Add(int a, int b) {
        return a + b;
    }
} 
```

用（Original）编译`csc.exe`和反汇编：`ildasm.exe`

```
 .method public hidebysig static int32  Main() cil managed
  {
    .entrypoint
    .maxstack  2
    .locals init (int32 V_0)
    IL_0000:  nop
    IL_0001:  ldc.i4.1
    IL_0002:  ldc.i4.2
    IL_0003:  call       int32 Program::Add(int32, int32)
    IL_0008:  stloc.0
    IL_0009:  br.s       IL_000b
    IL_000b:  ldloc.0
    IL_000c:  ret
  } 
  .method public hidebysig static int32  Add(int32 a,
                                             int32 b) cil managed
  {
    .maxstack  2
    .locals init (int32 V_0)
    IL_0000:  nop
    IL_0001:  ldarg.0
    IL_0002:  ldarg.1
    IL_0003:  add
    IL_0004:  stloc.0
    IL_0005:  br.s       IL_0007
    IL_0007:  ldloc.0
    IL_0008:  ret
  } 
```

重写（产生相同的输出）：

```
 .method public hidebysig static int32  Main() cil managed
  {
    .entrypoint
        .maxstack  2
    ldc.i4.1
    ldc.i4.2
    call int32 Program::Add(int32, int32)
    ret
  }

  .method public hidebysig static int32  Add(int32 a, int32 b) cil managed
  {
    .maxstack  2
      ldarg.0
      ldarg.1
    add
    ret
  } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T12:04:57.670

您看到的所有“多余”代码都特定于调试构建（并且通常会针对发布构建进行优化），并允许您执行通常在发布构建中无法执行的操作。

调试构建代码允许在调试会话期间最大程度地独立设置断点和更改/检查堆栈值。此外，IL 代码应尽可能模仿更高级别的代码，以便每个“原因”和“效果”都可以映射到更高级别的代码行。

现在具体回答您的问题：

> 原文中nop操作的目的是什么？

NOP 允许您在未“执行”的地方设置断点。例如，方法、循环或 if 语句的左大括号。在这些不可执行的指令中，在左大括号处中断允许您在块开始之前修改/检查堆栈（尽管您可以很容易地通过在块执行的第一行中断而不是左大括号来实现这一点，但它仍然允许您独立地在左大括号处折断）

> 原始方法末尾的 br.s 的目的是什么？

查看原始代码，您可能会发现“跳转”到下一行而不是让代码自然“下降”到下一行是荒谬的。但读作：

“在调试构建中，每当方法需要返回时，跳转到方法的末尾，从堆栈中读取返回值，然后返回值”

那么它对调试有什么好处呢？

如果您的代码中有多个 return 语句，它们都会在从堆栈中读取返回值之前“跳转”到代码的末尾。这允许您在一个地方（方法的右大括号）放置一个断点并在返回值实际返回到调用方法之前对其进行修改。很有帮助不是吗？

> 重新编写的版本是否有任何不当之处？

您的代码没有任何不当之处。事实上，如果您在发布模式下构建原始文件并检查生成的 CIL，您会注意到它与您的大部分相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T03:21:52.820

免责声明：无论如何，我都不是 IL 专家。

1.  nop操作的目的是什么？

    不久前，programmers.stackexchange.com 上就 x86 ASM 进行了一次大讨论，请参见此处：[*Purpose of NOP instruction and align statement in x86 assembly*](https://softwareengineering.stackexchange.com/questions/165002/purpose-of-nop-instruction-and-align-statement-in-x86-assembly)。基本上是一样的。

2.  原始方法末尾的 br.s 的目的是什么？

    这只是方法结束的一个分支。如果您要在此函数中有多个返回路径，那么查看起来会更有意义。就目前而言，编译器已经包含它而不是优化它（可能编译器开关会将它优化掉）。

3.  重新编写的版本是否有任何不当之处？

    不是我能看到的。您刚刚剥离了如此简单的应用程序不需要的大部分编译器工作。如果您要对此代码进行任何进一步的添加，则需要额外的 IL 来完成它的任务。

# c - C中的处理过程

> ID：12667012
> 
> 赞同：0
> 
> 时间：2012-10-01T02:52:50.117
> 
> 标签：c

尝试处理从父进程发送到所有子进程的 SIGUSR1 信号时，我遇到了问题。孩子的处理程序什么都不做。我检查了 kill 命令的结果，它返回 0 表示发送的消息正常。有人能帮忙吗？下面是子进程的代码。我使用 execl 来区分孩子的代码和父亲的代码。请注意，处理程序适用于警报调用

```
#include <stdio.h>
#include <stdlib.h>
#include <signal.h>
#include <unistd.h>
#include <string.h>

/*Global declerations*/

int alarmflag=0;
double result=0;
int fd[2];

/*Handler for the alarm and SIGUSR1 signal*/
void signal_handler (int sig)
{
printf("******************");
if(sig==SIGALRM)
{
printf("Im child with pid:%d im going to die my value is %lf \n",getpid(),result);
alarmflag=1;
}

if(sig==SIGUSR1)
{
printf("gotit!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n");
}

}

double p_calculation ()
{
 int i=2;
 result=3;
 double prosimo=-1;

 while(!alarmflag)
    {
 prosimo=prosimo*(-1);
 result=result+(prosimo*(4/((double)i*((double)i+1)*((double)i+2))));
 i=i+2;
    }

}

main(int argc,char *argv[])
{
int fd[2];

/*handling signals*/
signal(SIGALRM,signal_handler);
signal(SIGUSR1,signal_handler);

/*Notify for execution time*/
printf("PID : %d with PPID : %d executing for %d seconds \n",getpid(),getppid(),atoi(argv[1]));

/*end this after the value passed as argument*/
alarm(atoi(argv[1]));
p_calculation();

/*Notify for finish*/
printf("Done!!!\n");

} 
```

父亲的代码如下：

```
#include <stdio.h>
#include <stdlib.h>
#include <signal.h>
#include <unistd.h>
#include <sys/types.h>

pid_t *childs; //array for storing childs pids
int number_of_childs;//variable for the number of childs
int count_controls=0;

/*Handler for the SIGINT signal*/

void control_handler(int sig)
{
int j;

for (j=0;j<number_of_childs;j++)
    {
    kill(childs[j],SIGUSR1);
    }

}

main (int argc,char *argv[]){

int i,child_status;
int fd[2];
char cast[512];
int pid;
number_of_childs=atoi(argv[1]);
signal(SIGINT,control_handler);
childs=malloc(number_of_childs*sizeof (pid_t));

if(pipe(fd)==-1)
    {
    perror("pipe");exit(1);
    }

for (i=0;i<number_of_childs;i++){
pid=fork();
    /*Create pipes to communicate with all children*/

    /*Fathers code goes here*/

    if(pid!=0)
        {
        printf("Parent process: PID= %d,PPID=%d, CPID=%d \n",getpid(),getppid(),pid);
        childs[i]=pid; // Keep all your childs in an array
        printf("Child:%d\n",childs[i]); 
        }

    /*If you are a child*/

        else 
        {
        /*Change the code for the childs and set the time of execution*/
        sprintf(cast,"%d",i+1);
        execl("./Child.out","",cast,NULL);
        }
    }   
        /*Father should never terminate*/               
        while (1);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T03:01:20.253

当我从 shell 中杀死一个孩子时，我看不到它有问题：

```
test]$ ./a.out 120
PID : 7406 with PPID : 7035 executing for 120 seconds 
******************gotit!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
******************Im child with pid:7406 im going to die my value is -nan 
Done!!! 
```

被 INT 杀死的父母确实会用 USR1 杀死孩子：

```
test]$ ./a.out 1 30
Parent process: PID= 7490,PPID=7035, CPID=7491 
Child:7491
PID : 7491 with PPID : 7490 executing for 40 seconds 
******************gotit!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! 
```

> 我的问题是当我对父进程使用 control -c 时。它得到了中断，但没有出现来自处理程序的消息，即孩子收到消息 – Giannos 9 分钟前

问题是您在子进程中获得了 SIGINT 。尝试在孩子中为 SIGINT 添加一个处理程序，然后运行您的测试。

按下 ctrl-c 后，您可以看到当前实现发生了什么：

```
serge    7685  7035 99 08:01 pts/3    00:00:08 ./a.out 1
serge    7686  7685 30 08:01 pts/3    00:00:02 [Child.out] <defunct> 
```

您的子进程收到 SIGINT 并终止。此外，有必要在父进程中处理 SIGCLD 以摆脱所有处于失效状态的子进程：

```
if (sig == SIGCLD)
{
   // harvest terminated DEFUNCT child process
   pid = waitpid(-1, &status, WNOHANG);
} 
```

# c# - 在 WCF 中不使用 CallBack 将数据推送到客户端

> ID：12667014
> 
> 赞同：3
> 
> 时间：2012-10-01T02:53:11.063
> 
> 标签：c#, wcf, service

是否可以在不使用回调的情况下将数据推送到 WCF 服务中的客户端？

设想：

有 2 个客户消费服务。客户端 1 发送消息，然后客户端 2 收到客户端 1 发送的消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T02:59:01.913

有几种方法可以解决这个问题

1.  使用 [发布-订阅框架](http://msdn.microsoft.com/en-us/magazine/cc163537.aspx#S6)

2.  在 WCF 中使用双工服务

还可以看看这篇文章， **使用 WCF 回调服务将数据推送到客户端** [http://www.dotnetcurry.com/ShowArticle.aspx?ID=721](http://www.dotnetcurry.com/ShowArticle.aspx?ID=721)

# c - 管道未执行 + 信号处理

> ID：12667030
> 
> 赞同：1
> 
> 时间：2012-10-01T02:56:27.343
> 
> 标签：c, shell, unix, pipe, system-calls

我正在尝试在外壳中实现一个简单的两级管道。

当我不做第二个分叉而只在父级中执行管道的其余部分时，它工作正常，但我退出了外壳。这就是为什么我想做第二个 fork 所以我不退出 shell。但是由于某种原因，上面的代码没有任何反应。你能帮我弄清楚可能出了什么问题吗？我有一种感觉，它不会等待我的两个进程都完成后再退出，但我可能是错的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:46:39.337

解决方法：关闭`fd[0]`和`fd[1]`在父。

在您想要的双叉模型中，您的父进程（外壳）保持其副本处于`fd[1]`打开状态。打开此选项后，孩子`pid2`将永远不会在其标准输入 fd 上看到 EOF。

注释：

1.  两个孩子都应该在 dup2'ing 后关闭他们的管道 fd
2.  之后的代码`execvp`，无论是在上面还是在您的*馅饼*中，都表明您认为这`execvp`将在一般情况下返回控制权。它不是。对于此代码，您最多可能需要`execvp`使用 a`perror`和`exit`。

# java - Linux 和 Windows 上的算术运算执行速度

> ID：12667031
> 
> 赞同：3
> 
> 时间：2012-10-01T02:57:22.320
> 
> 标签：java, linux, optimization, window

我用 Java 编写了一个小程序，对数百万个随机数进行除法运算，并计算在运行不同操作系统的同一台机器上除法运算的平均时间。运行程序后，我发现，在 Windows 上，除法操作平均需要，`1.6 * 10^-5 ms`而在 Linux（Ubuntu 12.04）上，它需要几乎 8 个因子，即`3.2 * 10^-6 ms`. 我不确定为什么 Java 程序会在 Ubuntu 而不是 Windows 上运行得更快。只是司机的事吗？还是算术运算在 Ubuntu 上更优化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T03:02:29.450

实际计算由处理器完成，完全独立于操作系统。

此外，Java 程序在虚拟 Java 机器中运行。

也许您在 Windows 上运行的线程数量更多，因此程序的处理器时间更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T02:58:46.443

时间本身是如此之小，无法（也不应该）以您的方式来衡量差异。有意义的数据只有在运行更长的时间时才能获得，并且在相同的硬件上等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T14:28:46.757

是 Dr B Advance OS 课堂作业 1。

# php - 显示来自 PHP 的隐藏表

> ID：12667033
> 
> 赞同：-2
> 
> 时间：2012-10-01T02:57:39.127
> 
> 标签：php

嗨，有人可以告诉我我是否在以下代码中遗漏了导致隐藏表不显示的内容？感谢您的关注。

```
 echo("<SCRIPT LANGUAGE='JavaScript'>document.getElementById('tblmain').style.display = 'block';</SCRIPT>"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T03:20:39.597

简单地拥有会不会更容易和更可靠

```
echo '<style type="text/css">#tblmain { display: block }</style>'; 
```

所以你不依赖JS可用？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T08:28:31.447

如果您使用的是 jQuery，请尝试以下操作：

```
echo("
            <SCRIPT LANGUAGE='JavaScript'>
                $(document).ready(function(){
                    $('#tblmain').show();
                });
            </SCRIPT>"
        ); 
```

请注意，`$(document).ready(function(){...});`当整个 DOM 树准备好时，它将触发代码。如果它不起作用，则意味着#tblmain 元素不存在。

# sql - 默认范围忽略条件中的动态值

> ID：12667036
> 
> 赞同：0
> 
> 时间：2012-10-01T02:58:08.393
> 
> 标签：sql, ruby-on-rails, activerecord, default-scope

在我的 Activity 模型中，我有一个默认范围：

```
default_scope where(:subject_id => Log.get_subject_id) 
```

问题出在 Log.get_subject_id 中，默认值为 0。这是我的 Log 模型：

```
@@subject_id = 0
def self.set_subject_id(val)
  @@subject_id = val
end
def self.get_subject_id
  @@subject_id
end 
```

当我通过控制器中的 Log.set_subject_id(10) 更改 @@subject_id 的值然后我尝试 Activity.all 时，它总是给我不好的结果。SQL：

```
SELECT "activities".* FROM "activities" WHERE "activities"."subject_id" = 0 
```

哪里有问题？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T03:04:59.253

使用这种形式`default_scope`，您的`Log.get_subject_id`调用将在解析类时进行评估，因此您实际上是在说这样的话：

```
default_scope where(:subject_id => 0) 
```

但是，您可以使用块 with[`default_scope`](http://api.rubyonrails.org/classes/ActiveRecord/Scoping/Default/ClassMethods.html#method-i-default_scope)来延迟范围的评估，直到您尝试使用它，并且可能`Log.get_subject_id`会有一个有用的值：

```
default_scope { where(:subject_id => Log.get_subject_id) } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T03:02:55.787

这是由于范围缓存而发生的，请尝试用 lambda 包装它：

```
default_scope lambda { { :conditions => { :subject_id => Log.get_subject_id } } } 
```

# vb.net - Vb.Net 选择表

> ID：12667038
> 
> 赞同：0
> 
> 时间：2012-10-01T02:58:42.310
> 
> 标签：vb.net

我是 Vb.NET 的新手，我在这里有一个从示例中获得的代码，它选择一个表。我想要的是我想选择另一个表。我只想选择用户以外的另一个表。因为我有另一个绑定/调用另一个表的表单。

我将如何做？

```
Dim connection As MySql.Data.MySqlClient.MySqlConnection
    Dim adapter As MySql.Data.MySqlClient.MySqlDataAdapter
    Dim commandBldr As MySql.Data.MySqlClient.MySqlCommandBuilder
    Dim command As MySql.Data.MySqlClient.MySqlCommand
    Dim dataSet As System.Data.DataSet
    Dim bindingSource1 As BindingSource

    Private Sub btConnect_Click(sender As System.Object, e As System.EventArgs) Handles btConnect.Click
        connection = New MySql.Data.MySqlClient.MySqlConnection
        connection.ConnectionString = "user id=" & tbUserName.Text + "; password=" & tbPassword.Text & "; server=" & tbServer.Text & "; database=" & tbDatabase.Text & "; pooling=false;"

        Try
            connection.Open()
            adapter = New MySql.Data.MySqlClient.MySqlDataAdapter
            commandBldr = New MySql.Data.MySqlClient.MySqlCommandBuilder
            command = New MySql.Data.MySqlClient.MySqlCommand
            dataSet = New System.Data.DataSet
            bindingSource1 = New BindingSource

            commandBldr.DataAdapter = adapter
            command.CommandText = "SELECT userID,pin, print1, print2 from users"
            command.Connection = connection
            adapter.SelectCommand = command
            adapter.Fill(dataSet)
            bindingSource1.DataSource = dataSet.Tables(0)
            dgvUsers.DataSource = bindingSource1

        Catch ex As Exception

        End Try 
```

我通过这样做得到它...

```
dataSet = New DataSet
adapter.SelectCommand.CommandText = "select * from dtr"
adapter.Fill(dataSet) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T03:06:29.403

您应该能够更改示例查询的命令文本以匹配您想要撤回的内容。例如：

```
command.CommandText = "SELECT col1, col2 from newTable" 
```

# objective-c - 选择器 Objective-C 设置

> ID：12667040
> 
> 赞同：1
> 
> 时间：2012-10-01T02:58:59.220
> 
> 标签：objective-c, ios, selector

我正在Objective-C，GLButton中制作一个自定义按钮。我想遵循目标动作设计模式。所以在 GLButton 我有

```
SEL _action;
NSObject *_target;

- (void) setAction:(SEL) action{
    _action = action;
} 

- (void) setTarget:(NSObject*) target{
    _target = target;
} 
```

并执行它调用的操作

```
[_target performSelector:_action]; 
```

在实例化 GLButton 的类中，我有方法

```
- (void) button1{
    NSLog(@"button1");
}

- (void) button2{
    NSLog(@"button2");
} 
```

然后我设置相应的目标/动作

```
[b1 setTarget:self];
[b1 setAction:@selector(button1)];
[b2 setTarget:self];
[b2 setAction:@selector(button2)]; 
```

但是当我单击任一按钮时，它总是会触发最后一个目标集，在本例中为 button2。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T03:07:02.547

这些实例变量是在您的 .m 文件中随机声明还是声明？

```
SEL _action;
NSObject *_target; 
```

它们需要是实例变量，或者更好的是 @property 声明。

# javascript - 我可以在 javascript 中执行此操作吗？（ASP.NET MVC）

> ID：12667042
> 
> 赞同：-1
> 
> 时间：2012-10-01T02:59:30.280
> 
> 标签：javascript, asp.net-mvc

```
<script type="text/javascript">
function CheckData(e) {

                var form = e.form;
                var dataItem = e.dataItem;

                var r = <%=Session["count"] %>;
                var s = [];
                var t = [];

                for (i=1;i<r;i++)
                {
                    s.push(<%=Session["level"+i] %>;

                }
                for(i=1;i<r;i++)
                {
                    t.push(<%=Session["level"+i+"val"] %>
                }

                if(e.mode="edit")
                {

                }
            }
    </script> 
```

我尝试将会话与 JavaScript 中的变量结合起来，但我的会话具有动态会话，当我尝试构建时，此代码会出错。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T03:07:00.797

没有。除非您在名为`i`. 您需要将该循环完全放在服务器上。就像是：

```
List<int> s = new List<int>();
for (int i = 0; i < r; i++)
{
    s.Add((int)Session["level" + i]);
} 
```

然后在您的客户端代码中：

```
var s = [<%= string.Join(",", s) %>]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T03:26:26.177

尝试这个：

```
<%
System.Text.StringBuilder sJscriptArray = new StringBuilder();
System.Text.StringBuilder sJscriptVals = new StringBuilder();
for (int i = 0; i < Convert.ToInt32(Session["count"]); i++)
{
    if (sJscriptArray.Length > 0)
    {
        sJscriptArray.Append(", ");
        sJscriptVals.Append(", ");
    }
    sJscriptArray.Append(Session[String.Concat("level", i)]);
    sJscriptVals.Append(Session[String.Concat("level", i, "val")]);

}
%>

<script type="text/javascript">
function CheckData(e) {
    var form = e.form;
    var dataItem = e.dataItem;

    var s = [ <%= sJscriptArray.ToString() %> ];
    var t = [ <%= sJscriptVals.ToString() %>];
    var r = s.length;

    if(e.mode="edit")
    {

    }
}
</script> 
```

# emacs - Emacs、平滑滚动、滚动边距和 eshell

> ID：12667043
> 
> 赞同：5
> 
> 时间：2012-10-01T02:59:34.423
> 
> 标签：emacs, scroll, elisp, margin, eshell

我喜欢大约 8 左右的滚动边距。这意味着当光标到达顶部或底部的 8 行以内时，缓冲区将开始滚动。但是，此方案不适用于 eshell 和 ansi-term 缓冲区、isql 缓冲区或任何可能与 emacs 一起使用的 REPL 缓冲区。在这些缓冲区中的任何一个中，当一个人执行任何操作时，它会立即向上滚动缓冲区，以便在缓冲区底部和输入行之间有 8 行，这使得使用任何类似终端的设备充其量是尴尬，最坏的情况是无法使用emacs 中的缓冲区，视情况而定。

除非它是全局的，否则似乎没有缓冲区可以识别滚动边距变量。因此，虽然我可以在不同模式下使用钩子将变量设置为不同的值，但它会影响我所有的打开缓冲区。

所以可以说我正在编辑一些代码。我决定在 shell 中做一些事情。我的 shell-mode-hooks 将滚动边距设置为 0（以便它们可以使用）。*然后将所有*缓冲区的滚动边距设置为 0 ，这使得在我的编码缓冲区中滚动变得很尴尬。但是，如果我打开一个新的编码缓冲区，它会将我的滚动边距设置回 8。然后我的 shell 缓冲区很尴尬或无法使用，因为每当它们获得焦点或显示命令的输出时，它会立即向上滚动 8 个空格。

除了在全局范围内为所有缓冲区保持滚动边距为 0 之外，是否有任何解决此问题的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T04:47:20.143

将评论转换为答案。在钩子中使用[缓冲区局部变量。](http://www.gnu.org/software/emacs/manual/html_node/elisp/Intro-to-Buffer_002dLocal.html#Intro-to-Buffer_002dLocal)

# lisp - 在 Lisp 中，不同层次的含义

> ID：12667047
> 
> 赞同：-2
> 
> 时间：2012-10-01T02:59:59.657
> 
> 标签：lisp, common-lisp

作为作业的一部分，教授说每个表情最多可以有3个级别。

只是为了确保我理解它：

以下是否有2个级别？ `( (a) (b) )`

以下是否有3个级别？

`( a ( b (c) ) )`

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:30:49.703

这不是标准的 Lisp 术语，所以这取决于教授的意思。特别是，他只是计算列表嵌套，还是将叶子对象也计算为一个级别。

他会认为一个原子本身（不在列表中）是什么“级别”？不管是什么，你的第一个例子是 2 个级别，第二个例子是 3 个级别。

# php - 巧妙地使用 PHP str_replace（或类似的东西）

> ID：12667048
> 
> 赞同：0
> 
> 时间：2012-10-01T03:00:15.690
> 
> 标签：php, arrays, variables, str-replace

我在模板文件中使用了大量的 PHP 变量，其中一些变量需要可供只能使用 HTML 的编辑器访问。我真正想做的是让他们在键入/编辑内容时识别出类似 [ITEM_NAME_1] 的变量，PHP 会找到它们，因为它们被括在括号中，并用适当的 PHP 变量替换它们（在这种情况下，$ITEM_NAME_1 )

每个页面的内容都在一个变量“$page_content”中，所以现在我知道如何完成的唯一方法是手动编写行来替换我需要的内容。

```
$page_content = str_replace("[ITEM_NAME_1]", "$ITEM_NAME_1", "$page_content"); 
print $page_content 
```

问题是有数百个“ITEM_NAME_X”变量，我不想为每个 ITEM_NAME_X 手动创建大量重复的“str_replace”行。

我想要完成的是让 PHP 在 $page_content 中找到包含在括号 [] 中的任何内容，从括号内获取名称并将其全部替换为该括号名称的变量。因此，如果它找到 [ITEM_5]，它将用 $ITEM_5 替换它。这是可能吗？让我知道，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T03:04:27.180

这是我用的：

```
public static function rewrite_curley($data,$message){

        if(is_array($data)){
            foreach($data as $key => $var){
                $find = '{'.$key.'}';
                $message = str_replace($find,$var,$message);
            }
            $message = preg_replace('/\{(.*)\}/','',$message); //strip any left over vars with out matches
        }
        return $message;

    } 
```

显然我的变量在 {} 中，因此函数名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T03:06:33.873

[`preg_replace`](http://us.php.net/preg_replace)用修饰符[`/e`试一试](http://us.php.net/manual/en/reference.pcre.pattern.modifiers.php)。将其与[变量变量名语法](http://php.net/manual/en/language.variables.variable.php)结合起来以获得您想要的效果。

```
$page_content = preg_replace('/\[(.*?)\]/e', '$$1', $page_content); 
```

这使用正则表达式来匹配方括号之间的字符串。字符串被捕获并`$1`在替换字符串中访问。第二个`$`查找以任何 in 命名的变量`$1`。

如果你想对替换做一些更复杂的事情，你可以从替换字符串中调用你自己的函数。例如：

```
function substitute_tag($tag_name)
{
    $replacement_values = array('foo' => 'bar', 'baz' => '42', ...);
    return $replacement_values[$tag_name];
}

$page_content = preg_replace('/\[(.*?)\]/e', 'substitute_tag("$1")', $page_content); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T03:06:50.547

为什么不简单地使用数组作为 str_replace 的参数？

```
str_replace(array('string1', 'string2'), array('replacement1', 'replacement2'), $page_content); 
```

这样您就可以避免使用正则表达式。

# uiimagepickercontroller - presentPopoverFromRect:inView:permittedArrowDirections:iOS 6.0 中的动画崩溃

> ID：12667050
> 
> 赞同：1
> 
> 时间：2012-10-01T03:00:22.867
> 
> 标签：uiimagepickercontroller, ios6, uipopovercontroller

我刚刚从 iOS 5.1.1 升级到 6.0，当它尝试显示一个带有 imagePickerViewController 作为其 contentVC 的弹出框以允许用户从 photoLibrary 中选择图像或视频时，以下代码路径与 SIGTRAP 一起崩溃。

它在 5.1.1 上运行良好。这几天我一直在解决这个问题，但没有任何进展。有没有人对此有处理？iOS6.0 有替代方法吗？如果需要，我可以添加更多代码...

我可以使用以下线路捕获图像和视频：

```
[self presentViewController:self.imagePickerViewController.imagePickerController animated:YES completion:NULL]; 
```

这是用户触摸 UIButton 后完整调用的方法。

```
- (void)showImagePicker:(UIImagePickerControllerSourceType)sourceType mediaType:(NSString *)mediaType
{
    if (self.capturedMovies.count > 0)
        [self.capturedMovies removeAllObjects];

    if ([UIImagePickerController isSourceTypeAvailable:sourceType])
    {
        [self.imagePickerViewController setupImagePicker:sourceType mediaType:mediaType];

        if (sourceType == UIImagePickerControllerSourceTypeCamera) { // WORKS
            [self presentViewController:self.imagePickerViewController.imagePickerController animated:YES completion:NULL];
        }
        else if (sourceType == UIImagePickerControllerSourceTypePhotoLibrary) { 
        //else if ([mediaType isEqualToString:(NSString *)kUTTypeMovie] || [mediaType isEqualToString:(NSString *)kUTTypeImage]) {

            if (!self.moviePickerPopoverController) {
                self.moviePickerPopoverController = [[UIPopoverController alloc] initWithContentViewController:self.imagePickerViewController.imagePickerController];
            }

            UIView *uiViewObject = self.mediaTitleTextField;

            CGFloat xLocation = uiViewObject.frame.origin.x;
            CGFloat yLocation = uiViewObject.frame.origin.y;

            CGFloat width = uiViewObject.bounds.size.width;
            CGFloat height = uiViewObject.bounds.size.height;

            // CRASHES HERE!!!
            [self.moviePickerPopoverController presentPopoverFromRect:CGRectMake(xLocation, yLocation, width, height)
                                                               inView:self.view
                                             permittedArrowDirections:UIPopoverArrowDirectionAny
                                                             animated:YES];
        }
    }
} 
```

这是代码窗口中弹出的内容：

线程 1：第 3 行上的信号 SIGTRAP：

```
libsystemkernel.dylib`_kill:
0x394e7830: mov r12, #37
0x394e7834: svc #128
0x394e7838: blo 0x394e7850 ; __kill + 32 <<<<<<<<< Thread 1: signal SIGTRAP
0x394e783c: ldr r12, [pc, #4] ; __kill + 24
0x394e7840: ldr r12, [pc, r12]
0x394e7844: b 0x394e784c ; __kill + 28
0x394e7848: ldrdeq r6, r7, [r0], -r12
0x394e784c: bx r12
0x394e7850: bx lr 
```

这是调试器的回溯：

(lldb) BT

```
* thread #1: tid = 0x2503, 0x394e7838 libsystem_kernel.dylib`__kill + 8, stop reason = signal SIGTRAP
    frame #0: 0x394e7838 libsystem_kernel.dylib`__kill + 8
    frame #1: 0x001275d4 MyAppName`TFHandleExceptions + 992
    frame #2: 0x36bd357e CoreFoundation`__handleUncaughtException + 614
    frame #3: 0x39313a64 libobjc.A.dylib`_objc_terminate() + 128
    frame #4: 0x3363c07a libc++abi.dylib`safe_handler_caller(void (*)()) + 78
    frame #5: 0x3363c114 libc++abi.dylib`std::terminate() + 20
    frame #6: 0x3363d598 libc++abi.dylib`__cxa_rethrow + 88
    frame #7: 0x393139d0 libobjc.A.dylib`objc_exception_rethrow + 12
    frame #8: 0x36b19f20 CoreFoundation`CFRunLoopRunSpecific + 456
    frame #9: 0x36b19d48 CoreFoundation`CFRunLoopRunInMode + 104
    frame #10: 0x38ca82ea GraphicsServices`GSEventRunModal + 74
    frame #11: 0x3701d300 UIKit`UIApplicationMain + 1120
    frame #12: 0x000629b0 MyAppName`main + 96 at main.m:16 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T19:49:20.453

这是[https://stackoverflow.com/a/12575058/1074338的副本](https://stackoverflow.com/a/12575058/1074338)

另外，我应该触摸调试器上的 go 按钮......它揭示了有问题的代码：

![在此处输入图像描述](../Images/d1cee408f3310d0ae001389862c3589a.png)

```
*** Terminating app due to uncaught exception
'UIApplicationInvalidInterfaceOrientation',
 reason: 'Supported orientations has no common orientation
 with the application, and shouldAutorotate is returning YES' 
```

# c++ - 将 at() 与自定义对象向量一起使用时出现分段错误

> ID：12667052
> 
> 赞同：-1
> 
> 时间：2012-10-01T03:01:08.017
> 
> 标签：c++, vector, segmentation-fault, stdvector

我正在创建一个应用程序来跟踪书店库存。它会将包含信息的文本文件的文件路径作为 main 的参数。我遇到的问题似乎是每当我尝试访问用于存储我的 Item 对象的类状态向量清单的元素时。首先是类头，然后是方法定义，然后是 main。提前致谢。

```
 #ifndef _BOOKSTORE_H_
    #define _BOOKSTORE_H_

    #include <vector>
    #include <iostream>
    #include <fstream>
    #include <string>
    #include <sstream>
    #include <algorithm>
    #include <iterator>
    #include <stdlib.h>

    #include "Item.h"
    #include "Paperback.h"
    #include "Hardcover.h"
    #include "Audiobook.h"
    #include "Ebook.h"

    using namespace std;

    class Bookstore {

    //States
    private:
        vector<Item*> inventory;
    //Behaviors
    public: 
        Bookstore();
        void loadInventory(const char*);
        void searchInventory(string);
        unsigned int inventorySize();
        void printInventory();
        vector<string> split(string);

    };

    #endif

    #include "Bookstore.h"

    Bookstore::Bookstore() {}

    void Bookstore::loadInventory(const char* filepath) {

        string ty = "";
        string ti = "";
        string au = "";
        string pri = "";
        string f = "";
        string cd = "";
        string pro = "";

        string line;
        ifstream ifs;
        ifs.open (filepath);

        if (ifs.is_open()) {
            while (ifs.good()) {
                ty = "";
                ti = "";
                au = "";
                pri = "";
                f = "";
                cd = "";
                pro = "";

                getline(ifs, line);

                if (line.compare("Paperback") == 0) {
                    ty = "Paperback";
                    getline(ifs, line);
                    ti = line;
                    getline(ifs, line);
                    au = line;
                    getline(ifs, line);
                    pri = line;
                    Paperback p(ty, ti, au, pri);
                    inventory.push_back(&p);
                }

                if (line.compare("Hardcover") == 0) {
                    ty = "Hardcover";
                    getline(ifs, line);
                    ti = line;
                    getline(ifs, line);
                    au = line;
                    getline(ifs, line);
                    pri = line;
                    getline(ifs, line);
                    f = line;
                    Hardcover h(ty, ti, au, pri, f);
                    inventory.push_back(&h);
                }

                if (line.compare("Audio") == 0) {
                    ty = "Audio";
                    getline(ifs, line);
                    ti = line;
                    getline(ifs, line);
                    au = line;
                    getline(ifs, line);
                    pri = line;
                    getline(ifs, line);
                    cd = line;
                    Audiobook a(ty, ti, au, pri, cd);
                    inventory.push_back(&a);
                }

                if (line.compare("Electronic") == 0) {
                    ty = "Electronic";
                    getline(ifs, line);
                    ti = line;
                    getline(ifs, line);
                    au = line;
                    getline(ifs, line);
                    pri = line;
                    getline(ifs, line);
                    pro = line;
                    Ebook e(ty, ti, au, pri, pro);
                    inventory.push_back(&e);            
                }

            }
        }

        ifs.close();
        cout << inventory.size() << endl;

        for (unsigned int i=0; i<inventory.size(); i++) {
            inventory.at(i)->printItem();
        }
    }

    void Bookstore::searchInventory(string query) {

        vector<string> searchStr;
        int count;
        string currentStr;

            for (unsigned int i=0; i<inventory.size(); i++) {

                    currentStr = inventory.at(i)->getTitle();
                    searchStr = split(currentStr);

                    for(unsigned int j = 0; j < searchStr.size(); j++) {
                        if (searchStr[j].compare(query)==0) {
                            inventory.at(i)->printItem();
                            count++;
                        }
                    }

                    currentStr = inventory.at(i)->getAuthor();
                    searchStr = split(currentStr);

                    for(unsigned int j = 0; j < searchStr.size(); j++) {
                        if (searchStr[j].compare(query)==0) {
                            inventory.at(i)->printItem();
                            count++;
                        }
                    }

                    if ((i==(inventory.size()-1))&&(count==0)) {
                        cout << "Sorry, no matching results were found." << endl;
                    } else if ((i==(inventory.size()-1))&&(count!=0)) {
                        cout << "Query complete." << endl;
                    }
            }
    }

    unsigned int Bookstore::inventorySize() {
        unsigned int num = inventory.size();
        return num;
    }

    void Bookstore::printInventory() {
        for (unsigned int i = 0; i < inventory.size(); i++) {
            inventory.at(i)->printItem();       
        }

    }

    vector<string> Bookstore::split(string s) {
        vector<string> pieces;
        istringstream iss(s);
        copy(istream_iterator<string>(iss), istream_iterator<string>(),
            back_inserter<vector<string> >(pieces));

        return pieces;
    }

    #include "Bookstore.h"

    int main(int argc, char** argv) {

        Bookstore current;

        if (argc==2) {
            current.loadInventory(argv[1]);
        }

        cout << current.inventorySize() << endl;

        //Initialize variables
        char status = 'R';
        string input = "";
        int iter = 1;

        //Run application until quit
        while (status=='R') {

            //Provide menu
            if (iter==1) {
                cout << "Welcome to Bookstore Inventory 9000." << endl;
            }

            if (current.inventorySize()==0) {
                    cout << "There are no entries!" << endl;
                    status = 'Q';
            } else {

                cout << "Would you like to (V)iew all, (S)earch, or (Q)uit?" << endl;

                getline(cin, input);

                if (input.compare("V")==0) {
                    current.printInventory();       
                } else if (input.compare("S")==0) {
                    cout << endl;
                    cout << "What are you looking for?" << endl;
                    getline(cin, input);
                    current.searchInventory(input);
                    cout << endl;
                } else if (input.compare("Q")==0) {
                    status = 'Q';
                    cout << "Thank you for perusing our inventory. Goodbye." << endl;
                } else {
                    cout << endl;
                    cout << "This is not a valid choice. Please try again." << endl;
                    cout << endl;
                }
            }

            iter++;

        }

    return -1;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T03:12:32.723

你的问题不在于`at()`. 您的问题是您将地址存储到局部变量，然后您使用该指针，即使局部变量不再存在。

具体来说，在 中`loadInventory`，这是一个示例：

```
 if (line.compare("Paperback") == 0) {
                ty = "Paperback";
                getline(ifs, line);
                ti = line;
                getline(ifs, line);
                au = line;
                getline(ifs, line);
                pri = line;
                Paperback p(ty, ti, au, pri);
                inventory.push_back(&p);
            } 
```

请注意倒数第二行中如何创建名为“p”的本地（堆栈）变量。在最后一行，您获取该局部变量的地址并将其存储起来。一旦代码到达上面引用中的最后一个大括号，名为“p”的变量就会消失，向量中的那个指针就不再有用了。

一种可能的解决方案是动态分配：

```
Paperback* p = new Paperback(ty, ti, au, pri);
inventory.push_back(p); 
```

`inventory`请注意，如果您这样做，一旦您的向量完成了这些指针，您就必须自己删除它们。

# c# - C# 从 PictureBox 中删除绘图

> ID：12667053
> 
> 赞同：2
> 
> 时间：2012-10-01T03:01:16.823
> 
> 标签：c#, winforms, image, picturebox

我有一张`PictureBox`图片和一张`Image`图片，`pic.Image = img`
我在图像上绘制了一些矩形

```
Graphics g = Grpahics.FromImage(pic.Image);
g.DrawRectangle(...); 
```

但是在某一时刻，我想从图像中删除矩形，我试过了

```
pic.Image = getOriginalImage();
pic.Refresh(); 
```

但图像保持不变（矩形仍然在图像顶部）我知道有一种方法`graphics.Clear(Color)`，但它用纯色替换整个图像
如何仅从图像中删除绘图`PictureBox`？
谢谢

编辑：我已经保存了原始图像，当我擦除时我使用原始图像

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T03:23:20.547

您正在覆盖原始图像。在本地保存图像并将其克隆到 PictureBox.Image 属性中。然后在要擦除时再次克隆

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T03:17:29.423

[使用Graphics.DrawImage()](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.drawimage.aspx)再次绘制背景图像或将图像再次分配给 Image 属性。以这种方式使用`Graphics`对象是直接写入显示在图像中的图像，`PictureBox`并且它不会保留使用 Graphics 对象和背景图像写入的内容的单独副本。

# android - Android 示例数据库不工作

> ID：12667055
> 
> 赞同：1
> 
> 时间：2012-10-01T03:01:19.103
> 
> 标签：android, database, sqlite

我在博客或 SO 上找到了这个示例数据库代码（不记得了）

```
package com.learn.db;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DBAdapter {

    private static final String DATABASE_NAME = " nba";
    private static final String DATABASE_TABLE = "bookList";
    private static final int DATABASE_VERSION = 1;
    private static String TAG = "Upgrading Database!";
    public static final String KEY_BOOK = "book";
    public static final String KEY_AUTHOR = "author";
    public static final String KEY_ISBN = "isbn";
    public static final String KEY_ROWID = "_id";
    public static final String KEY_RATING = "rating";
    public static final String KEY_STATUS = "status";

    private DatabaseHelper mDbHelper;
    private SQLiteDatabase mDb;

    private static final String DATABASE_CREATE = " create table  "
            + DATABASE_TABLE + " (" + KEY_ROWID
            + " integer primary key autoincrement,  " + KEY_AUTHOR
            + " text not null, " + KEY_BOOK + " text not null, " + KEY_RATING
            + " text not null, " + KEY_STATUS + " text not null, " + KEY_ISBN
            + " text not null); ";

    private final Context mCtx;

    public DBAdapter(Context ctx) {
        this.mCtx = ctx;

    }

    private static class DatabaseHelper extends SQLiteOpenHelper {
        DatabaseHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);

        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL(DATABASE_CREATE);

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("ALTER TABLE bookList ADD COLUMN String status");

        }
    }

    public DBAdapter open() throws SQLException {

        mDbHelper = new DatabaseHelper(mCtx);
        mDb = mDbHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        mDbHelper.close();
    }

    public long createBook(String book, String author, String isbn,
            float rating, String status) {
        ContentValues initialValues = new ContentValues();
        initialValues.put(KEY_BOOK, book);
        initialValues.put(KEY_AUTHOR, author);
        initialValues.put(KEY_ISBN, isbn);
        initialValues.put(KEY_RATING, rating);
        initialValues.put(KEY_STATUS, status);

        return mDb.insert(DATABASE_TABLE, null, initialValues);

    }

    public boolean deleteBook(long rowId) {
        return mDb.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;

    }

    public Cursor fetchAllBooks() {
        return mDb.query(DATABASE_TABLE, new String[] { KEY_BOOK, KEY_ISBN,
                KEY_AUTHOR, KEY_ROWID, KEY_RATING, KEY_STATUS }, null, null,
                null, null, null);
    }

    public Cursor fetchBook(long rowId) throws SQLException {
        Cursor mCursor = mDb.query(DATABASE_TABLE, new String[] { KEY_BOOK,
                KEY_AUTHOR, KEY_ROWID, KEY_ISBN, KEY_RATING, KEY_STATUS },
                KEY_ROWID + "=" + rowId, null, null, null, null);

        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;

    }

    public boolean updateBook(long rowId, String book, String author,
            String isbn, float rating, String status) {
        ContentValues args = new ContentValues();
        args.put(KEY_BOOK, book);
        args.put(KEY_AUTHOR, author);
        args.put(KEY_ISBN, isbn);
        args.put(KEY_RATING, rating);
        args.put(KEY_STATUS, status);

        return mDb.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;

    }
} 
```

我试图在我的主要活动中添加一条记录，但我在添加新书的那一行的 logcat 中遇到错误。

```
package com.learn.db;

import java.util.Random;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.graphics.Color;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

public class Start extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.start);
        DBAdapter fish_db = new DBAdapter(getApplicationContext());
        fish_db.createBook("Captain Underpants", "Dav Pilkey", "12343251321", 5, "In stock");
        Cursor cursor = fish_db.fetchAllBooks();
        if (cursor.moveToFirst()){
               do{
                  String data = cursor.getString(cursor.getColumnIndex("data"));
                    Toast.makeText(getApplicationContext(), data, Toast.LENGTH_LONG).show();
               }while(cursor.moveToNext());
            }
            cursor.close();
}
} 
```

根据logcat的实际错误是在线的空指针`return mDb.insert(DATABASE_TABLE, null, initialValues);`

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T03:08:16.470

`mDb`为空，需要先`fish_db.open()`调用`fish_db.createBook()`

# python - Python订购了垃圾收集字典？

> ID：12667057
> 
> 赞同：0
> 
> 时间：2012-10-01T03:01:49.667
> 
> 标签：python, garbage-collection, ordereddictionary

我希望我的 Python 程序具有确定性，因此我一直`OrderedDicts`在整个代码中广泛使用。不幸的是，今天在调试内存泄漏时，我发现 OrderedDicts 有一个自定义`__del__`方法，只要有循环就无法收集它们。不幸的是，文档中没有关于此的警告。

那么我能做什么呢？Python 标准库中是否有任何与 gc 配合得很好的确定性字典？我真的不想自己动手，尤其是在像这样愚蠢的单行功能上。

另外，这是我应该提交错误报告的东西吗？我不熟悉 Python 库的过程，以及他们认为的错误。

编辑：[看来这是一个已知的错误，早在 2010 年就已修复。我一定是安装了一个非常旧的 2.7 版本。](http://bugs.python.org/issue9825)我想最好的方法是只包含一个猴子补丁，以防用户碰巧运行像我这样的损坏版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:28:02.123

如果 __del__ 方法的存在对您来说有问题，只需将其删除：

```
>>> import collections
>>> del collections.OrderedDict.__del__ 
```

您将获得在参考周期中使用 OrderedDicts 的能力。您将失去让 OrderedDict 在删除后立即释放其所有资源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T04:51:14.377

听起来您已经找到了`OrderedDict`在您的 2.7 版本之后某个时间点修复的错误。如果它不在任何实际发布的版本中，也许您可​​以忽略它。但除此之外，是的，你需要一个解决方法。

我建议，而不是 monkeypatching `collections.OrderedDict`，您应该改用在 Python 2.4 或更高版本[的文档](http://docs.python.org/library/collections.html#collections.OrderedDict)中链接的[Equivalent OrderedDict 配方](http://code.activestate.com/recipes/576693/)（没有多余的）。如果不出意外，当有人走过来说“我需要在 2.6 上运行它，要移植多少工作”时，答案将是“少一点”……</p> `collections.OrderedDict``__del__`

但还有两点：

> 重写所有内容以避免循环是一项巨大的努力。

您的字典中有循环这一事实是一个危险信号，表明您做错了什么（通常使用强引用作为缓存或反向指针），这可能会导致其他内存问题，并且可能会导致其他问题错误。因此，无论如何，这种努力可能是必要的。

你还没有解释你想要完成什么；我怀疑“确定性”的事情只是一个红鲱鱼（特别是因为`dict`s 实际上是确定性的），所以最好的解决方案是`s/OrderedDict/dict/g`.

但是如果确定性是必要的，你就不能依赖循环收集器，因为它不是确定性的，这意味着你的终结器排序等等都变得不确定。这也意味着你的内存使用是不确定的——你最终可能会得到一个程序，它在 99.999% 的时间里保持在你想要的内存范围内，但不是 100%；如果这些界限非常重要，那可能比每次都失败更糟糕。

同时，没有指定字典的迭代顺序，但实际上，CPython 和 PyPy 按哈希桶的顺序进行迭代，而不是值或键的 id（内存位置），以及 Jython 和 IronPython 所做的任何事情（他们可能正在使用一些具有不同行为的底层 Java 或 .NET 集合；我没有测试过），键的内存顺序不太可能是相关的。（你怎么能有效地基于类似的东西迭代一个哈希表？）你可能对使用`id`for的对象进行测试感到困惑`hash`，但大多数对象是基于值的哈希值。

例如，以这个简单的程序为例：

```
d={}
d[0] = 0
d[1] = 1
d[2] = 2
for k in d:
  print(k, d[k], id(k), id(d[k]), hash(k)) 
```

如果您使用 CPython 2.7、CPython 3.2 和 PyPy 1.9 重复运行它，键将始终按 0、1、2 的顺序迭代。`id`列也可能*每次*都相同（这取决于您的平台），但您可以以多种方式修复它——以不同的顺序插入，反转值的顺序，使用字符串值而不是整数，将值分配给变量，然后插入这些变量而不是文字等。玩够了，您可以获得`id`列的所有可能顺序，但键仍然每次都以相同的顺序迭代。

迭代的顺序是不可*预测*的，因为要预测它，您需要转换`hash(k)`为存储桶索引的函数，这取决于您无法从 Python 访问的信息。即使它只是`hash(k) % self._table_size`，除非它`_table_size`暴露给 Python 接口，否则它也无济于事。（这是插入和删除序列的复杂函数，原则上可以计算出来，但实际上尝试起来很愚蠢。）

但它是*确定性*的；如果每次都以相同的顺序插入和删除相同的键，则每次的迭代顺序都是相同的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-25T15:51:36.930

请注意，[在 Python 2.7 中进行的修复](https://github.com/python/cpython/commit/2039753a9ab9d41375ba17877e231e8d53e17749#diff-52502c75edd9dd62aa7a817dbab542d2)以消除该`__del__`方法并阻止它们无法收集确实意味着每次使用`OrderedDict`（甚至是空的）都会导致引用循环，该引用循环必须被垃圾收集。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/46935255/445073)。

# java - 带方法的二叉树数据结构

> ID：12667058
> 
> 赞同：1
> 
> 时间：2012-10-01T03:01:58.817
> 
> 标签：java, binary-tree

我实现了一个二叉树数据结构。数据结构允许从列表构建二叉树（元素从左到右插入）。如何优化 insertElement？目前，它是递归的，所以如果树很深，它将耗尽内存。我怎样才能让它尾递归甚至结束递归？

```
public class Node {

    private int value;
    private boolean isLeaf;

    public Node (int value, boolean isLeaf){
        this.value = value;
        this.isLeaf = isLeaf;
    }

    public int getValue(){
        return value;
    }

    public void setLeaf(boolean value){
        this.isLeaf = value;
    }
    public boolean isLeaf(){
        return isLeaf;
    }

}

public class BinaryTree {

    Node root;
    BinaryTree left_child;
    BinaryTree right_child;

    public BinaryTree(){

    }
    public BinaryTree(Node root, BinaryTree left_child, BinaryTree right_child){
        this.root = root;
        this.left_child = left_child;
        this.right_child = right_child;
    }

    public BinaryTree insertElement(int element){
        if (root==null)
            return new BinaryTree(new Node(element, true), null, null);
        else {
            if (root.isLeaf()){
                root.setLeaf(false);
                if (element < root.getValue())
                    return new BinaryTree(root, new BinaryTree(new Node(element, true), null, null), null);
                else
                    return new BinaryTree(root, null, new BinaryTree(new Node(element, true), null, null));
            } else {
                if (element < root.getValue())
                    if (left_child!=null)
                        return new BinaryTree(root, left_child.insertElement(element), right_child);
                    else
                        return new BinaryTree(root, new BinaryTree(new Node(element, true), null, null), right_child);
                else
                    if (right_child!=null)
                        return new BinaryTree(root, left_child, right_child.insertElement(element));
                    else
                        return new BinaryTree(root, left_child, new BinaryTree(new Node(element, true), null, null));
            }
        }
    }

    public BinaryTree getLeftChild(){
        return left_child;
    }

    public BinaryTree getRightChild(){
        return right_child;
    }

    public void setLeftChild(BinaryTree tree){
        this.left_child = tree;
    }

    public void setRightChild(BinaryTree tree){
        this.right_child = tree;
    }

    public BinaryTree buildBinaryTree(int[] elements){
        if (elements.length==0)
            return null;
        else{
            BinaryTree tree = new BinaryTree(new Node(elements[0], true), left_child, right_child);
            for (int i=1;i<elements.length;i++){
                tree = tree.insertElement(elements[i]);
            }
            return tree;
        }
    }

    public void traversePreOrder(){
        if (root!=null)
            System.out.print(root.getValue() + " ");
        if (left_child!=null)
            left_child.traversePreOrder();
        if (right_child!=null)
            right_child.traversePreOrder();
    }

    public void traverseInOrder(){
        if (left_child!=null)
            left_child.traverseInOrder();
        if (root!=null)
            System.out.print(root.getValue() + " ");
        if (right_child!=null)
            right_child.traverseInOrder();
    }
    public void traversePostOrder(){
        if (left_child!=null)
            left_child.traversePostOrder();
        if (right_child!=null)
            right_child.traversePostOrder();
        if (root!=null)
            System.out.print(root.getValue() + " ");
    }

    public static void main(String[] args){
        int[] elements = new int[]{5,7,2,1,4,6,8};
        BinaryTree tree = new BinaryTree();
        tree = tree.buildBinaryTree(elements);
        tree.traversePreOrder();
        System.out.println();
        tree.traverseInOrder();
        System.out.println();
        tree.traversePostOrder();
        System.out.println();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T03:44:40.670

如果您认为树太深并且内存不足，最好使用循环而不是使用递归来实现逻辑。临时根=根；而（插入！=真）{

```
if(root==null)
    //add at the root.
else if(item<temproot->item )//it should go to left.
{
    if(temproot->left==null)
        //add your node here and inserted=true or put break; else just move pointer to   left.
 temproo=temproot->left; //take left address.

}
else if(it should go to right)
    //check the logic of above if clause.
}//end of while loop 
```

如果您发现它应该向左移动并且左侧没有子节点，只需在此处添加您的节点。无需将所有访问过的节点都放在系统堆栈中，因为无论如何您都没有使用这些节点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T03:43:06.090

In your coding, you create

> Node class which contains only value and boolean variable isLeaf.

Whenever an element is created, you create a new binary tree based on the inserted element and append to the main tree.

The other way you can implement binary tree is

> Node class contains its own value, left node and right node.

Inserting element still recursive but **whenever you insert an element you do not need to create a new binary tree, just a new node** like [here](http://www.roseindia.net/java/java-get-example/java-binary-tree-code.shtml)

# javascript - 匹配模式但以特定字符开头时排除匹配的正则表达式

> ID：12667059
> 
> 赞同：0
> 
> 时间：2012-10-01T03:01:59.000
> 
> 标签：javascript, regex

我有一个格式的字符串：

> PATTERN 或 abcPATTERNdef 或 PATTERN 或 <<[TEST].[PATTERN]>>

我创建了一个正则表达式（在 JavaScript 中），*它*`(^PATTERN)|([^\[]PATTERN)`返回前 3 次出现而忽略最后一次出现，但是我似乎也在返回的匹配项中获取了前面的字符：

 *“PATTERN”、“cPATTERN”和“PATTERN”

我需要的是没有前面字符的匹配项。

我是正则表达式的新手，如果问题反映了这一点，我深表歉意。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T03:06:35.040

我对你想要做什么感到有点困惑。你能看看这是否有效吗？

```
(^PATTERN)|[^\[](PATTERN) 
```

您是否要查找 PATTERN 之间的所有字符串？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T03:12:00.243

JavaScript 没有很好的后向支持，但如果你的格式保持不变，你可以尝试这样的事情：

```
PATTERN(?!]) 
```

它匹配所有出现的“PATTERN”，但后面没有`]`.

如果不是这种情况，请告诉我，我将更新我的答案以包括对 opening 的检查`[`。*

# haskell - cabal install 抱怨找不到可接受的 C 编译器

> ID：12667060
> 
> 赞同：2
> 
> 时间：2012-10-01T03:02:05.387
> 
> 标签：haskell, haskell-snap-framework

在 Windows 中尝试从 cabal 安装[snap](http://snapframework.com/)时，它抱怨无法找到 C 编译器。

这是输出：

```
> cabal update
> cabal install snap
Resolving dependencies...
In order, the following will be installed:
directory-1.2.0.0 (new version)
clientsession-0.8.0.1 (new package)
directory-tree-0.10.1 (new version)
process-1.1.0.2 (new version)
heist-0.8.1.1 (reinstall) changes: directory-1.1.0.2 -> 1.2.0.0,
directory-tree-0.11.0 -> 0.10.1, process-1.1.0.1 -> 1.1.0.2
unix-compat-0.4.0.0 (new package)
configurator-0.2.0.1 (new package)
snap-core-0.9.2.1 (new package)
snap-server-0.9.2.3 (new package)
snap-0.9.2.1 (new package)
Warning: Note that reinstalls are always dangerous. Continuing anyway...
Configuring directory-1.2.0.0...
configure: WARNING: unrecognized options: --with-compiler, --with-gcc
checking for gcc... no
checking for cc... no
checking for cl.exe... no
configure: error: in `/tmp/directory-1.2.0.0-4480/directory-1.2.0.0':
configure: error: no acceptable C compiler found in $PATH
See `config.log' for more details
cabal.exe: Error: some packages failed to install:
clientsession-0.8.0.1 depends on directory-1.2.0.0 which failed to install.
configurator-0.2.0.1 depends on directory-1.2.0.0 which failed to install.
directory-1.2.0.0 failed during the configure step. The exception was:
ExitFailure 1
directory-tree-0.10.1 depends on directory-1.2.0.0 which failed to install.
heist-0.8.1.1 depends on directory-1.2.0.0 which failed to install.
process-1.1.0.2 depends on directory-1.2.0.0 which failed to install.
snap-0.9.2.1 depends on directory-1.2.0.0 which failed to install.
snap-core-0.9.2.1 depends on directory-1.2.0.0 which failed to install.
snap-server-0.9.2.3 depends on directory-1.2.0.0 which failed to install.
unix-compat-0.4.0.0 depends on directory-1.2.0.0 which failed to install. 
```

如果它是用 Haskell 编写的，为什么还需要 C 编译器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T03:09:51.077

它需要一个 C 编译器，因为目录包有用 C 编写的位（通过 FFI 访问），正如您可以从[cabal 文件的 c-sources 部分](http://hackage.haskell.org/packages/archive/directory/1.2.0.0/directory.cabal)看到的那样。

# c - C - 仅使用 & 和 ~ 计算位或

> ID：12667065
> 
> 赞同：0
> 
> 时间：2012-10-01T03:02:50.370
> 
> 标签：c, bit-manipulation, bitwise-operators, bitwise-and, bitwise-or

我正在尝试按位计算 | 只使用 & 和 ~。

```
 int main() {

   int num1 = 3;
   int num2 = 6;

   printf("%d\n",num1|num2); 

   num1 = ~num1;
   num2 = ~num2;

   printf("d\n",num1);
   printf("d\n",num2);

   int num3 = num1 & num2;    

   printf("%d\n",num3); 

} 
```

这是输出：

```
7
d
d
-8 
```

我想弄清楚为什么`~num1`输出`d`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T03:07:21.720

代替

```
 printf("d\n",num1);
   printf("d\n",num2); 
```

和

```
 printf("%d\n",num1);
   printf("%d\n",num2); 
```

# ios - 为什么 iOS 应用程序包中的 PNG 图像比我的项目中的大？

> ID：12667066
> 
> 赞同：13
> 
> 时间：2012-10-01T03:02:55.413
> 
> 标签：ios, xcode, png

我正在为 iOS 6 更新 Hungry Helga（iPhone 和 iPad 版本），我的新 app bundle 档案中的所有 PNG 文件都比我之前的版本大 20% 到 40%。当然，这让我超过了 50 MB 的 3G 下载限制，所以我真的很想弄清楚发生了什么。

我目前在 OSX 10.7.5 上使用 Xcode 4.5 版。如果我没记错的话，以前的版本是用 Xcode 4.2 构建的。我尝试在构建设置中打开和关闭 PNG 压缩，但这对包中的图像大小没有影响。

举一个具体的例子，我最大的 PNG 图像是 1.9 MB 作为源资产。旧应用程序包中为 2.1 MB，新应用程序包中为 2.5 MB。

Apple 是否改变了 PNG 压缩器的工作方式，或者是否有我缺少的设置或其他什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-01T12:13:55.577

我不为 Apple 工作，也没有任何内幕消息 - 但是，我确实四处寻找并提出了一些理论。如果你使用终端，你可以 cd 进入 Xcode.app 并在那里找到 pngcrush：

> $查找。-name pngcrush ./Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/pngcrush

如果你然后运行：

```
./pngcrush -? 
```

你会发现一些有趣的花絮：

> | 它是用 LLVM 4.2.1 Compatible Apple Clang 4.0 (tags/Apple/clang-420.0.12) 编译的，并由 Apple 修改，如源代码中所示。

和

> -iphone（针对 iPhone 操作系统进行优化）

因为我也看到一些大的 png 在捆绑包中也比原来的大得多（我之前自己压碎了！），我想看看 Xcode 如何使用 pngcrush。我使用了一个旧的 UNIX 技巧：

*   将 pngcrush 移动到 xpngcrush
*   创建一个新的可执行 shell 文件，使用相同的参数列表调用 pngcrush
*   将参数记录到 /tmp 中的文本文件中

我发现苹果将 pngcrush 称为：

> pngcrush -q -iphone oldFile newFile

由此可以推断，pngrush 的 Apple 特有功能是专门为 iOS 定制图像而设计的。我说裁缝，不是暗恋。

Apple 真的在乎你的 png 是否是最小的文件，以节省最大的空间吗？我认为，不是真的-这些设备具有相当大的文件存储空间。他们真的关心你的应用下载速度是否真的很快吗？同样，我认为不是真的，因为用户会假设时间与应用程序的大小有关，并且这是在开发人员的控制之下。

然而，用户要让苹果负责的是启动速度。从第一次点击到应用开始做某事——人们会相信这就是设备的全部速度（我们开发人员知道这并不完全正确）。在新的 iPad3 中，一些启动图像现在非常大，那么如何才能使它们尽可能快地加载呢？

我不知道这个问题的答案，但我可以想象 Apple 会解压缩原始图像，然后使用能够尽可能快地将其加载到设备中的设置重新压缩它。

PS：

1）我刚刚禁用了crush选项，并观察到Xcode 4.5在没有修改的情况下复制了我的png文件。

2）为了缩小应用程序的大小，您是否尝试过使用具有高质量设置的 JPEG - 甚至是 1？这样的图像看起来非常好，而且要小得多。我的应用程序中的几乎所有图像都是 JPEG。您可以尝试使用预览来进行转换。

编辑：我想到可能有一个优雅的解决方案。也就是说，对于非常重要的图像——您希望尽快出现的图像——然后使用带有“-iphone”标志的 pngcrush。对于其他人，使用更标准的 pngcrush 选项。

一种方法是创建一个新的图像目录，并编写一个 shell 文件，使用真正的破碎机或 tje '-iphone' 标志预处理每个 png，将输出放在原始图像文件夹中（Xcode 可以在其中获取它们）。然后关闭自动“粉碎 PNG 文件”选项。

EDIT2：我在 bugreporter.apple.com 上输入了一个错误并发布在 Xcode listserv 上 - 如果您对此书签感兴趣，请在更新时回来。

EDIT3：有人给了我一个链接，更详细地解释了 Apple 的“-iphone”选项[ImageOptim的方式和原因](http://imageoptim.com/xcode.html)

EDIT4：Apple 回应了我的错误报告，确认他们修改了图像以便 iOS 更容易处理，这可能会使它们更大，有意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-29T10:26:17.253

Xcode 5 现在对图像压缩进行了更改。最好的压缩方式是使用资产目录。

如果即使使用 Xcode 5 和资产目录对您的应用程序而言效果不佳，请[使用 pngcrush 工具检查其他相关的后 PNG 优化问题以](https://stackoverflow.com/questions/7388324/png-optimization-issue-using-pngcrush-tool/23361487)获取更多答案可能会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T05:58:30.377

使用 David H 的脚本，我发现 Xcode 也将命令行参数“-f 0”传递给 pngcrush。手册页指出“-f 0”将在压缩之前禁用任何 IDAT 过滤，这会导致更大的 PNG 文件。从上面对我的 1.9 MB 示例文件进行测试确认：

*pngcrush -iphone in.png out.png*给出了我正在寻找的 2.1 MB 结果

*pngcrush -iphone -f 0 in.png out.png*产生不希望的 2.5 MB 结果

现在的问题是：为什么苹果要改变这一点？如果我解决它，它会以某种方式破坏图像加载吗？如果没有，在 Xcode 中是否有此设置，或者我是否总是必须使用脚本来过滤掉“-f 0”参数？

# javascript - 鼠标悬停和鼠标悬停javascript不起作用？

> ID：12667070
> 
> 赞同：0
> 
> 时间：2012-10-01T03:03:47.087
> 
> 标签：javascript, html

这是我当前的代码：

```
<html>
<head>
<title>Imagemap</title>
<script>
    function swapImageIn(id){
    document.getElementById(id).src='\\C:\Users\idb\Desktop\Websitefinal\usa.png';
    }
    function swapImageOut(id){
    document.getElementById(id).src='\\C:\Users\idb\Desktop\Websitefinal\worldmap_load.png';
    }
</script>
</head>
<body>

<div>
   <img src="\\C:\Users\idb\Desktop\Websitefinal\worldmap_load.png" id="main" alt="" usemap="#worldmap_load" style="border-style:none" />
</div>

<div>
<map id="worldmap_load" name="worldmap_load">
<area shape="poly" alt="USA" coords="77,49,109,23,86,11,0,34,0,78" nohref="nohref" title="USA" onMouseOver="swapImageIn('main')" onmouseout="swapImageOut('main')" />
</map>
</div>

</body>
</html> 
```

我正在尝试让 mouseover 事件和 mouseout 事件起作用。他们目前不工作。有什么建议么？

编辑 - 当地图区域被鼠标悬停时，我想要改变图像。但是，永远不会到达事件“onMouseOver”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T03:26:59.000

这在这里有效。我认为这是文件路径的问题。（使用正斜杠）

```
<!DOCTYPE html>
<html>
<head>
<script>
function swapImageIn(tgtIdStr)
{
    document.getElementById(tgtIdStr).src = "C:/xampp/htdocs/enhzflep/img/img1.png";
}
function swapImageOut(tgtIdStr)
{
    document.getElementById(tgtIdStr).src = "C:/xampp/htdocs/enhzflep/img/img2.png";
}

</script>
</head>
<body>
    <div>
       <img src="file.png" width='200' height='200' id="main" alt="" usemap="#worldmap_load" style="border-style:none" />
    </div>

    <div>
        <map id="worldmap_load" name="worldmap_load">
        <area shape="poly" alt="USA" coords="77,49,109,23,86,11,0,34,0,78" title="USA" onmouseover="swapImageIn('main')" onmouseout="swapImageOut('main')" />
        </map>
    </div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T03:05:52.543

你需要：

```
function swapImageIn(id){
    return function() {
    document.getElementById(id).src='\\C:\Users\idb\Desktop\Websitefinal\usa.png';
    }
}
function swapImageOut(id){
    return function() {
    document.getElementById(id).src='\\C:\Users\idb\Desktop\Websitefinal\worldmap_load.png';
    }
} 
```

并且`onmouseout`应该是`onMouseOut`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T03:11:24.773

试试这个代码：

```
<script>
    function swapImageIn(id){
    document.getElementById(id).src='C:/Users/idb/Desktop/Websitefinal/usa.png';
    }
    function swapImageOut(id){
    document.getElementById(id).src='C:/Users/idb/Desktop/Websitefinal/worldmap_load.png';
    }
</script> 
```

使用这个新的。

问候

# python - 多处理和套接字。怎么等？

> ID：12667071
> 
> 赞同：3
> 
> 时间：2012-10-01T03:03:57.533
> 
> 标签：python, sockets, multiprocessing

我有一个包含 4 个节点和一个主服务器的集群。Master 调度的作业可能需要 30 秒到 15 分钟才能结束。

节点正在监听 a`SocketServer.TCPServer`并且在主节点中，我打开一个连接并等待作业结束。

```
def run(nodes, args):
    pool = multiprocessing.Pool(len(nodes))
    return pool.map(load_job, zip(nodes, args)) 
```

该`load_job`函数发送数据，`socket.sendall`然后立即使用`socket.recv`（数据需要很长时间才能到达）。

该程序运行良好，直到运行大约 200 或 300 个这些作业。当它中断时，`socket.recv`接收一个空字符串并且在我终止节点进程并再次运行它们之前无法运行任何更多作业。

**我应该如何等待数据到来？**此外，错误处理`pool`非常差，因为它保存了来自另一个进程的错误并且没有正确的回溯显示，而且这个错误并不常见重复......

* * *

**编辑**：现在我认为这个问题与套接字无关：

经过一些研究，看起来我的节点正在为许多进程打开方式（因为它们也在 a 中运行它们的工作`multiprocessing.Pool`）并且不知何故它们没有被关闭！

我发现这些 SO 问题（[此处](https://stackoverflow.com/questions/6516508/python-multiprocessing-pool-inside-daemon-process)和[此处](https://stackoverflow.com/questions/6428842/zombie-process-in-python-multiprocessing-daemon)）在谈论在守护进程中使用`multiprocessing`时的僵尸进程（正是我的情况！）。

我需要进一步了解这个问题，但现在我正在杀死节点并在一段时间后恢复它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T08:12:59.893

（我在编辑之前回答了这个问题，因为我不明白你的意思）。

`socket.recv`不是在套接字上等待数据的最佳方式。我知道的最好方法是使用该`select`模块（[此处](http://docs.python.org/library/select.html)的文档）。在单个套接字上等待数据时最简单的用途是`select.select([your_socket],[],[])`，但它当然也可以用于更复杂的任务。

关于`socket.recv`接收空字符串的问题；当套接字是 TCP 套接字（在您的情况下）时，这意味着套接字已被对等方关闭。造成这种情况的原因可能会有所不同，但要了解的重要一点是，**发生这种情况后，您将不再从该套接字接收任何数据**，因此您能做的最好的事情就是关闭它（`socket.close`）。如果您不希望它关闭，那么您应该在此处搜索问题。

祝你好运！

# google-maps - 谷歌地图地理编码法律约束

> ID：12667073
> 
> 赞同：1
> 
> 时间：2012-10-01T03:04:17.067
> 
> 标签：google-maps, google-maps-api-3

我正在阅读有关谷歌地图的法律资料，并发现了一篇指出该规定的帖子：

*10.12 在没有相应 Google 地图的情况下使用或显示内容，除非您在 Maps API 文档、Street View API 文档中或通过 Google 的书面许可明确允许这样做（例如，您不得使用通过与 Google 地图结合使用的服务，但街景 API 文档明确允许您在没有相应 Google 地图的情况下显示街景图像）；或者...*

但是，我也遇到了这个非常好的教程，显示在目标位置的特定半径内的地址：

[http://stefanzvonar.com/2012/06/30/setting-up-google-maps-for-asp-net-and-sql-server-with-google-maps-api-v3/](http://stefanzvonar.com/2012/06/30/setting-up-google-maps-for-asp-net-and-sql-server-with-google-maps-api-v3/)

在本教程中，数据库实际上存储了地址的经纬度，这对于此功能的工作至关重要。想必，这些经纬度信息也可能是借助谷歌地图得出的。在这种情况下，是否发生违规行为？我不确定它是否与上述监管状态有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T10:19:55.377

这是一个灰色地带。您不得存储从 Google 获得的实际数据 [2\. 使用限制](http://maps.google.com/help/terms_maps.html)

但建议如果地理编码的结果显示在地图上并且标记移动到确切位置，则结果坐标是您存储的（我不是律师）。

另一种选择是从其他来源获取坐标，例如[Geonames](http://www.geonames.org/)

# java - 如何等待鼠标点击

> ID：12667074
> 
> 赞同：2
> 
> 时间：2012-10-01T03:04:16.853
> 
> 标签：java, swing, actionlistener, mouseclick-event

```
class GameFrameClass extends javax.swing.JFrame  {

    public void MyFunc()
    {
        UserButton.setText(Str);
        UserButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                UserButtonActionPerformed(evt);
            }
        });
        getContentPane().add(UserButton);
    }

    private void UserButtonActionPerformed(java.awt.event.ActionEvent evt) {

        //print some stuff after mouse click
    }
} 
```

在另一个类中，我定义了这个函数

```
void functionAdd()
{
    GameFrameClass gfc = new GameFrameClass()
    gfc.MyFunc()
    System.out.println("PRINT THIS AFTER MOUSE CLICK")  
} 
```

如果有人可以查看此代码。我想等待鼠标点击。有没有办法在单击鼠标后打印 System.out.println("PRINT THIS AFTER MOUSE CLICK") 行。现在这会立即发生，我不能等待鼠标点击。有没有办法做到这一点？除了在函数 UserButtonActionPerformed() 中执行此操作。请告诉我 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T03:09:42.247

这是一种非常“糟糕”的方式......

```
private void UserButtonActionPerformed(java.awt.event.ActionEvent evt) {
    addMouseListener(new MouseAdapter() {
        public void mouseClicked(MouseEvent evt) {
            System.out.println("PRINT THIS AFTER MOUSE CLICK");
            removeMouseListener(this);
        }
    });
} 
```

更好的方法是在`actionPerformed`方法中添加一个标志来“启用”鼠标侦听器（您之前添加的）。这个监听器会在每次点击时检查标志，当设置为它时，`true`它会翻转标志（到`false`）并处理事件......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T03:11:26.737

从措辞很难看出，但我假设他或她只是想在按钮被触发后执行代码（而不是实际上*等待*）。为此，您需要在 actionlistener（在本例中`UserButtonActionPerformed`）调用的方法中添加代码。

所以：

```
private void UserButtonActionPerformed(java.awt.event.ActionEvent evt) {

 System.out.println(...);

} 
```

此外，遵循 Java 编码约定将有助于人们在未来回答您的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T03:08:09.233

事件在另一个线程上进行管理，即[事件调度线程](http://en.wikipedia.org/wiki/Event_dispatching_thread)，它们不由正在执行代码的线程（大概是主线程）管理。

这意味着您可以将侦听器附加到 GUI 元素，但“等待”点击的唯一方法是执行`actionPerformed`回调中的代码。

没有办法暂停执行，因为`addActionListener`它没有做任何事情来有效地捕获事件，它只是添加了侦听器。从理论上讲，您可以锁定主线程等待事件分派通知，但这只是一个糟糕的设计。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T08:14:45.163

您始终可以通过在同一个类中定义 UserButtonActionPerformed 来等待。如果是这种情况，那么您不应该遇到您面临的问题

# amazon-ec2 - AWS EC2 中的维护模式

> ID：12667078
> 
> 赞同：1
> 
> 时间：2012-10-01T03:04:59.423
> 
> 标签：amazon-ec2, amazon-web-services

在 heroku 中，我们可以使用命令 heroku maintenance on 或 off... 我怎样才能在我的 AWS EC2 Web 服务中做到这一点？我试图停止使用服务器，`sudo service nginx stop` 但我不喜欢显示的错误页面。它说 url 中的错误。在heroku中，如果我使用维护命令，错误页面将显示“建设中”“维护”或类似的东西。

我如何在亚马逊网络服务中做到这一点？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T03:17:43.203

你必须自己做。AWS 不提供。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T03:17:06.787

是的，所以 heroku 有路由魔法，想想你的 rails 应用程序运行的默认 WebBrick 服务器在 rails 之外运行。Idk，假设您使用乘客，您不会真正注意到这一点，但在高层次上，nginx 将您应用程序的端口 3000 代理到端口 80 以处理某些请求。如果你不明白我的意思，我很抱歉。

所以（您的应用程序）--->（NGINX）----->（客户端）

这里的优势是 nginx 会继续运行，但在维护模式下，它们很可能会开始将您的页面拍摄到静态内容。如果您也通过代理而不是通过乘客运行您的 Rails 应用程序，那么您的解决方案很容易。停止您的 WebBrick、mongrel、unicorn、thin（这里有什么应用程序服务器）并为错误的网关错误（即 502 路由）设置错误消息页面。

如果您使用乘客。您可以编写一个位置块，它将覆盖您的所有路线到维护页面并在该服务器块中将乘客切换为关闭，现在您可以提供静态维护页面，而不是为您的应用程序提供服务。

Heroku 封装了很多技术并公开了一些不错的工具，因此您需要做更多的基础工作来自动化您的堆栈。但这是一个开始的地方。

# html - 在指定的电线上链接

> ID：12667079
> 
> 赞同：0
> 
> 时间：2012-10-01T03:05:41.500
> 
> 标签：html, image, coordinates, href

是否可以在 HTML 中图像的指定绳索上建立链接？

我得到了一张图片，我希望链接仅在它的指定位置可用。我真的不知道它是否可能，但如果可以，请给我一些提示。

先感谢您。

# jquery - 带有附加侧边栏描述的 jQuery 库？

> ID：12667084
> 
> 赞同：2
> 
> 时间：2012-10-01T03:05:52.220
> 
> 标签：jquery, gallery

我正在寻找一个 jQuery 插件或库，该插件或库具有正在显示的图像下方的水平缩略图浏览以及显示当前所选照片的​​详细信息的侧栏列，例如描述等。

它基本上是两列，左列由图片和水平缩略图组成。

理想情况下，我希望有一些东西可以使所有这些列定位可配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T03:09:53.973

像[这样](http://www.twospy.com/galleriffic/example-5.html)的东西？

调整布局有点痛苦，并且不会缩小那么大，但我过去使用过这个插件，它很容易设置和运行良好。

# java - 添加三个片段会引发 IllegalStateException

> ID：12667089
> 
> 赞同：2
> 
> 时间：2012-10-01T03:06:41.217
> 
> 标签：java, android, android-fragments, illegalstateexception, fragmentpageradapter

我将生成的活动与滑动视图和标题条一起使用。我的代码在每个活动中使用两个片段，但是当我添加三个片段时，它会强制关闭。

错误是：

```
java.lang.IllegalStateException: The specified child already has a parent. You must call removeView() on the child's parent first. fragment 
```

这是我的活动类 MainMenu：

```
//imports

public class MainMenu extends FragmentActivity {

    /**
     * The {@link android.support.v4.view.PagerAdapter} that will provide fragments for each of the
     * sections. We use a {@link android.support.v4.app.FragmentPagerAdapter} derivative, which will
     * keep every loaded fragment in memory. If this becomes too memory intensive, it may be best
     * to switch to a {@link android.support.v4.app.FragmentStatePagerAdapter}.
     */
    SectionsPagerAdapter mSectionsPagerAdapter;

    /**
     * The {@link ViewPager} that will host the section contents.
     */
    ViewPager mViewPager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main_menu);
        // Create the adapter that will return a fragment for each of the three primary sections
        // of the app.
        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main_menu, menu);
        return true;
    }

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to one of the primary
     * sections of the app.
     */
    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int i) {
            Fragment fragment = new Fragment();
            Bundle args = new Bundle();
            if(i == 0){
                fragment = new InsertCity();
            }else if(i == 1){
                fragment = new AddFlight();
            }else if(i == 2){
                fragment = new AddFlight();
            }
            fragment.setArguments(args);
            return fragment;
        }

        @Override
        public int getCount() {
            return 3;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            switch (position) {
                case 0: return getString(R.string.title_section1).toUpperCase();
                case 1: return getString(R.string.title_section2).toUpperCase();
                case 2: return getString(R.string.title_section3).toUpperCase();
            }
            return null;
        }
    }

} 
```

每个片段几乎是相同的，所以我只包括其中一个。

这是我的 InsertCity 类：

```
public class InsertCity extends Fragment {

    private LinearLayout ll;

    public InsertCity() {

    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ll = new LinearLayout(getActivity());

        ll.setOrientation(LinearLayout.VERTICAL);

        TextView usernameInstruction = new TextView(getActivity());
        ll.addView(usernameInstruction);

        Button btn = new Button(getActivity());
        btn.setText("Create Backup");
        btn.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {

            }
        });

        ll.addView(btn);
        // setContentView(ll);

    }

//  @Override
//  public void onDestroyView() {
//      super.onDestroyView();
//      ViewGroup parentViewGroup = (ViewGroup) ll.getParent();
//      if (null != parentViewGroup) {
//          parentViewGroup.removeView(ll);
//      }
//  }

    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        if(ll != null) { return ll; }
        return ll;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
    }

} 
```

我很确定这与我的 SectionsPagerAdapter 类或删除视图有关，但我不知道如何解决它。

帮助将不胜感激。

非常感谢！

# ruby-on-rails-3 - 在他们的个人资料页面上创建朋友

> ID：12667093
> 
> 赞同：1
> 
> 时间：2012-10-01T03:07:14.927
> 
> 标签：ruby-on-rails-3, devise, has-many-through, friend, user-profile

我希望用户（x）能够在用户（x）在用户（y）的个人资料页面上时将另一个用户（y）添加为朋友。我设置了一个 has_many_through 并且一切正常，除了我只能从用户索引视图中添加一个朋友。提前谢谢你......代码如下：

还：

我想将“朋友”链接放在 view/profile/show.html.erb 上。当我将@users = User.all 添加到现有的profiles_controller.rb 中时，我收到了错误- undefined method `friendships' for nil:NilClass. When I replaced @user = User.find(params[:id]) with @users = User.all I received the error - NoMethodError in Profiles#show... undefined method`inverse_friends' for nil:NilClass

在 UserIndexView 但不能在 ProfileShowView 中工作的代码：

```
% for user in @users %>
    <div class="user">
    <p>
      <strong><%=h user.email %> <%= user.id %></strong>
      <%= link_to "Add Friend", friendships_path(:friend_id => user), :method => :post%>
    <div class="clear"></div>
    </p>
    </div>
<% end %> 
```

出现以下错误：

```
 NoMethodError in Profiles#show
    Showing /Users/mgoff1/LOAP_1.2.2/app/views/profiles/show.html.erb where line #13 raised:
undefined method `each' for nil:NilClass
Extracted source (around line #13):
10: 
11: 
12: 
13:   <% for user in @users %>
14:       <div class="user">
15:         <p>
16:           <strong><%=h user.email %> <%= user.id %></strong>
    . . .

app/views/profiles/show.html.erb:    13:in`_app_views_profiles_show_html_erb___2905846706508390660_2152968520'
app/controllers/profiles_controller.rb:19:in `show' 
```

其余代码如下。

友谊.rb

```
class Friendship < ActiveRecord::Base
attr_accessible :create, :destroy, :friend_id, :user_id

 belongs_to :user
 belongs_to :friend, :class_name => "User"
end 
```

用户.rb

```
 class User < ActiveRecord::Base
  has_many :friendships
  has_many :friends, :through => :friendships
  has_many :inverse_friendships, :class_name => "Friendship", :foreign_key =>   "friend_id"
  has_many :inverse_friends, :through => :inverse_friendships, :source => :user

  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me,    :profile_attributes
  # attr_accessible :title, :body

  has_one :profile
  accepts_nested_attributes_for :profile

  before_save do | user |
  user.profile = Profile.new unless user.profile
 end
end 
```

友谊控制器.rb

```
class FriendshipsController < ApplicationController
  def create
    @friendship = current_user.friendships.build(:friend_id => params[:friend_id])
    if @friendship.save
      flash[:notice] = "Added friend."
      redirect_to current_user.profile
    else
      flash[:error] = "Unable to add friend."
      redirect_to root_url
    end
   end

  def destroy
    @friendship = current_user.friendships.find(params[:id])
    @friendship.destroy
    flash[:notice] = "Removed friendship."
    redirect_to current_user.profile
  end
 end 
```

users_controller.rb

```
class UsersController < ApplicationController
  def show
    @user = User.find(params[:id])
  end

  def index
    @users = User.all
  end
end 
```

profile_controller.rb

```
class ProfilesController < ApplicationController
  # GET /profiles
  # GET /profiles.json
  def index
    @profiles = Profile.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @profiles }
    end
  end

  # GET /profiles/1
  # GET /profiles/1.json
  def show
    @user = User.find(params[:id])
    @profile = Profile.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @profile }
    end
  end

  # GET /profiles/new
  # GET /profiles/new.json
  def new
    @profile = Profile.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @profile }
    end
  end

  # GET /profiles/1/edit
  def edit
    @user = User.find(params[:id])
    @profile = Profile.find(params[:id])
  end

  # POST /profiles
  # POST /profiles.json
  def create
    @profile = Profile.new(params[:profile])

    respond_to do |format|
      if @profile.save
         format.html { redirect_to @profile, notice: 'Profile was successfully created.' }
         format.json { render json: @profile, status: :created, location: @profile }
      else
        format.html { render action: "new" }
         format.json { render json: @profile.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /profiles/1
  # PUT /profiles/1.json
  def update
    @profile = Profile.find(params[:id])

    respond_to do |format|
      if @profile.update_attributes(params[:profile])
        format.html { redirect_to @profile, notice: 'Profile was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @profile.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /profiles/1
  # DELETE /profiles/1.json
  def destroy
    @profile = Profile.find(params[:id])
    @profile.destroy

    respond_to do |format|
      format.html { redirect_to profiles_url }
      format.json { head :no_content }
    end
  end
 end 
```

路线.rb

```
BaseApp::Application.routes.draw do

  resources :friendships

  resources :profiles

  #get "users/show"

  devise_for :users, :controllers => { :registrations => "registrations" }
  resources :users

  match '/show', to: 'profile#show'

  match '/signup',  to: 'users#new'

  root to: 'static_pages#home'

  match '/', to: 'static_pages#home'

  . . . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T11:31:07.207

每当您尝试调用没有实际对象的方法时，您都会得到“未定义的方法”。

这意味着该方法已定义 - 但您有一个“nil”并试图在其上调用它，并且该方法对于“nil”对象不存在。

请检查您的实际用户表。您需要与用户一起工作。请确认您有一些。

如有必要，您可以使用（在`script/rails console`）创建用户

`User.new(:name=>'fred', :password =>'pword', :password_confirmation => 'pword' )`

你也可以把它放在你的`db/seeds.db`文件中，这样你就可以在你`rake db:seed`第一次在新机器上设置应用程序时运行它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T03:25:19.390

你没有设置`@users`。`ProfilesController#show`

`for object in collection`只是调用`collection.each do |object|`，这就是你得到的原因`undefined method 'each' for NilClass`（也是为什么通常不鼓励使用这种语法，因为它会产生像这样的令人困惑的错误）。

**profile_controller.rb**

```
def show
  @users = User.all
  #...
end 
```

# android - 致命异常：主日食错误

> ID：12667099
> 
> 赞同：1
> 
> 时间：2012-10-01T03:08:26.377
> 
> 标签：android, listview

这是我的日志猫：

![在此处输入图像描述](../Images/70fb67ae7d71091923e25470547099b6.png)

它说`Fatal Exception : Main`并`res.resources`没有找到，还有很多其他错误。这是怎么回事？

这是我的主要活动：

```
public class MainActivity extends Activity {

private final static String highscore = "Your High Score : ";
private ListView listMenu;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    ListMenu listMenuData[] = new ListMenu[]
    {
        new ListMenu(R.drawable.repetition, "Repetition\n" + highscore, 0)
    };

    ListMenuAdapter adapter = new ListMenuAdapter(this, R.layout.listmenu_item, listMenuData);

    listMenu = (ListView)findViewById(R.id.listMenu);

    View header = (View)getLayoutInflater().inflate(R.layout.listmenu_header, null);
    listMenu.addHeaderView(header);

    listMenu.setAdapter(adapter);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

这是用于 setter-getter 的 ListMenu：

```
public class ListMenu {
public int icon, highscore;
public String title;

public ListMenu(){
    super();
}

public ListMenu(int icon, String title, int highscore){
    super();
    this.icon = icon;
    this.title = title;
    this.highscore = highscore;
} 
```

这是我的 ListMenuAdapter 类：

```
public class ListMenuAdapter extends ArrayAdapter<ListMenu> {
Context context;
int layoutResourceId;
ListMenu listmenu[] = null;

static class MenuHolder{
    ImageView imgMenuIcon;
    TextView txtTitle, txtHighScore;
}

public ListMenuAdapter (Context context, int layoutResourceId, ListMenu[] listmenu){
    super(context, layoutResourceId, listmenu);
    this.context = context;
    this.layoutResourceId = layoutResourceId;
    this.listmenu = listmenu;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    View row = convertView;
    MenuHolder holder = null;

    if(row == null)
    {
        LayoutInflater inflater = ((Activity)context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);

        holder = new MenuHolder();
        holder.imgMenuIcon = (ImageView)row.findViewById(R.id.imgMenuIcon);
        holder.txtTitle = (TextView)row.findViewById(R.id.txtTitle);
        holder.txtHighScore = (TextView)row.findViewById(R.id.txtHighScore);

        row.setTag(holder);
    }
    else holder = (MenuHolder)row.getTag();

    ListMenu menu = listmenu[position];
    holder.imgMenuIcon.setImageResource(menu.icon);
    holder.txtTitle.setText(menu.title);
    holder.txtHighScore.setText(menu.highscore);

    return row;
} 
```

我遵循并修改了本教程中的代码：[单击此处](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

**有人说`android.content.res.resources$NotFoundException`可以通过清理项目/重新启动 Eclipse 来修复错误，但它对我不起作用**

抱歉发了这么长的帖子，我现在真的不知道该怎么办谢谢：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T03:23:58.113

如果是这样，那么这就是问题所在。你应该做 ：

```
holder.txtHighScore.setText(""+menu.highscore); 
```

因为`menu.highscore`是`int`，它将调用`setText(int resId)`加载您在`strings.xml`.

如果你放`""+menu.highscore`，它将调用`setText(CharSequence text)`你想要的。

# python - 如何在pyqt中设置QThread的名称？

> ID：12667103
> 
> 赞同：7
> 
> 时间：2012-10-01T03:09:54.380
> 
> 标签：python, multithreading, pyqt, qthread

我正在使用`QtCore.QThread`（来自`PyQt4`）。

要记录，我还使用以下格式化程序：

`logging.Formatter('%(levelname)-8s %(asctime)s %(threadName)-15s %(message)s')`

结果日志是：

> 调试 2012-10-01 03:59:31,479 Dummy-3 my_message

我的问题是我想更明确地知道哪个线程正在记录......`Dummy-3`对我来说不是最明确的名字......

有没有办法将名称设置为`QtCore.QThread`日志模块可用的名称（作为 LogRecord 属性），以便使日志更有意义？

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T13:01:44.780

如果线程模块可用，日志模块将用于`threading.current_thread().name`设置`threadName`LogRecord 属性。

但是[文档](http://docs.python.org/library/threading.html#threading.current_thread)说如果当前线程不是由线程模块创建的（因此是“Dummy-x”名称） ，`threading.current_thread`则将使用一个虚拟线程对象。

我想可以通过猴子补丁`threading.current_thread`将名称重置为更合适的名称。但肯定更好的方法是`extra`在记录消息时使用字典：

```
logging.Formatter('%(levelname)-8s %(asctime)s %(qthreadname)-15s %(message)s')
...
extras = {'qthreadname': get_qthreadname()}
logging.warning(message, extra=extras) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-23T08:59:40.987

从[Qt5 文档](https://doc.qt.io/qt-5/qthread.html)中，您可以调用[setObjectName()](https://doc.qt.io/qt-5/qobject.html#objectName-prop)来修改线程名称

> 要选择线程的名称（例如，在 Linux 上由命令 ps -L 标识），您可以在启动线程之前调用 setObjectName()。

> 如果您不调用 setObjectName()，则为线程指定的名称将是线程对象的运行时类型的类名（例如，在 Mandelbrot 示例中为“RenderThread”，因为这是QThread 子类）。

不幸的是，它还指出：

> 这目前不适用于 Windows 上的发布版本。

# java - 为什么我应该使用单独的线程在 JAVA 中显示 GUI

> ID：12667105
> 
> 赞同：5
> 
> 时间：2012-10-01T03:10:41.670
> 
> 标签：java, swing, runnable, swingutilities, invokelater

这个简单的问题让我感到困惑。`setVisible`您可以通过设置框架的属性来显示 JAVA GUI 应用程序`true`。但是在我在互联网上找到的几乎所有示例中，它们都使用单独的线程来做同样的事情。

他们做这样的事情，

```
SwingUtilities.invokeLater(new Runnable() {

    @Override
    public void run() {
        new Frame().setvisible(true);  //just take the idea of this line
    }
}); 
```

我发现这两种方法没有区别。但是**肯定**有什么特殊的原因，这就是为什么大家都这样。

有人能解释一下吗..谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T03:11:57.427

以这种方式启动您的应用程序的主要原因是 Swing 组件*不是线程安全的*，因此您需要保证您的 GUI 将从哪个线程开始：称为`Event Dispatching Thread`( **EDT** ) 的线程。如果不这样做，您将无法确定它将从哪个线程开始，但正如一些评论员所指出的，主线程保证*不是*EDT。

您应该只在 EDT 中创建、访问或修改 UI 组件。否则会导致意外行为（如果幸运的话）和/或脏重绘。

我建议您熟悉一些资源：

*   [事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)
*   [在 AWT 和 Swing 中绘画](http://www.oracle.com/technetwork/java/painting-140037.html)

您还可以阅读[为什么我的样板 Java 桌面应用程序 JFrame 在 main 方法中使用 EventQueue.invokeLater？](https://stackoverflow.com/questions/7439522/why-does-my-boilerplate-java-desktop-app-jframe-use-eventqueue-invokelater-in-th)

**更新**

这是我一直在寻找的[博客：P](http://bitguru.wordpress.com/2007/03/21/will-the-real-swing-single-threading-rule-please-stand-up/)

这基本上解释了为什么`main`在开始之前与 EDT 同步很重要，它还描述了一些有关原因的细节。

它还描述了为什么许多开发人员在启动他们的应用程序时会犯这个根本错误（基本上，我们被告知我们可以，但我们从未真正被允许......坏我们）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T03:13:10.447

因为您在 GUI 上所做的每一次修改都应该在[事件调度线程](http://en.wikipedia.org/wiki/Event_dispatching_thread)上完成。这就是**AWT**和**SWING**的工作方式。

这是因为重绘是在单个线程上执行的，通过使用`invokeLater`您可以让该线程管理它，而不会因 Swing 缺乏线程安全性而产生潜在的问题。使用该语法，您可以将该指令委托给在适当的线程上执行，该线程是管理 GUI 元素的线程。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T03:13:47.887

Swing 不是线程安全的，所有组件都需要在[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)中初始化。这将防止诸如死锁之类的问题。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-01T03:14:28.800

Swing 类不是线程安全的；它们仅从对它们的所有操作都在同一线程（事件调度线程或 EDT）上执行这一事实获得线程正确性。因此，任何时候您与 Swing 对象交互时，它都*必须*在 EDT 上——`SwingUtilities.invokeLater`这是一个很好的方法。

如果没有那个调用，如果你只是`setVisible(true)`从任何 ol' 线程调用，你就不会有任何线程安全，`Frame`甚至可能看不到该方法的操作。更糟糕的是，他们`Frame`只能看到一些动作，破坏内部假设和不变量，并导致奇怪的行为、崩溃或死锁。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-01T03:16:30.350

几乎所有调用 Swing 方法的操作都必须在 Swing Event Dispatch 线程上运行。invokeLater() 是确保此不变量成立的方法。[在此处](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)阅读有关此内容的更多信息。

另请注意，大多数其他 GUI 工具包也是如此，例如 .NET、MFC 和其他中的表单。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-02T01:38:15.010

Java gui 框架被设计为单线程来强制线程安全：这种技术称为线程限制。因此，任何 gui 操作（例如组件创建、模型创建、事件发送等）都必须在事件调度线程 (EDT) 中执行。您描述的方式是在 EDT 中对操作进行排队的一种方式。

# machine-learning - 线性回归中正则化常数的范围

> ID：12667111
> 
> 赞同：1
> 
> 时间：2012-10-01T03:12:11.013
> 
> 标签：machine-learning, linear-regression

可用于“Lambda”的值范围是否有任何限制 - 线性回归中的正则化常数。【机器学习问题】

当 Lambda 值为 100 时，我非常适合数据。这是否在“实际”可接受的限制中？

我认为理论上，Lambda的价值是好的，但实际使用呢？

[解决家庭作业问题需要做一些小说明。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:13:27.867

我认为 lambda 的实用价值没有限制。您选择了最适合您的问题的方法并坚持下去。例如，如果你有太多的特征和太少的数据，那么模型往往会过度拟合，你必须用更大的 lambda 来对抗它（更好的做法是获取更多数据或删除一些特征）。另一方面，如果您有大量数据且特征数量相对较少，则过度拟合不会是一个大问题，并且 lambda 可以更小。

选择 Lambda 的一种方法是使用 lambda [A .. B] 的值（其中 A>0，B>A）训练您的模型，然后在交叉验证集上绘制成本函数。它将接近一条凸曲线，对应于全局最小值的 lambda 将是最优的。

如需更完整的解释，请观看本讲座：[https ://class.coursera.org/ml/lecture/preview/63](https://class.coursera.org/ml/lecture/preview/63)

# javascript - javascript _property 的意义是什么

> ID：12667112
> 
> 赞同：0
> 
> 时间：2012-10-01T03:12:30.403
> 
> 标签：javascript, jquery

我查看了 jQuery 源代码 v.1.8.1 并搜索 jQuery.fx.speeds，它的值是

```
jQuery.fx.speeds = {
slow: 600,
fast: 200,
// Default speed
_default: 400    }; 
```

为什么 jQuery 开发人员使用“_defaults”而不是“defaults”？

```
jQuery.fx.speeds = {
slow: 600,
fast: 200,
// Default speed
// Default without underscore prefix in it 
default: 400    }; 
```

具有前缀下划线的属性有什么好处？下划线到底代表什么？？

例子 ..

```
 var obj = {};  
obj.property = "property value";
obj._property = "property value with _";

alert( obj._property );
alert( obj.property ); 
```

什么时候 obj._property 比 obj.property 更合适？？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T03:14:36.857

前导下划线通常用于避免命名冲突。

可能是 jQuery 允许您定义自己的命名持续时间，或者已经计划了这种可能性，因此这将处理有人想要使用 name 的情况`"default"`。

所以这只是一个惯例。下划线本身不会改变属性的性质或行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T03:14:58.563

前缀下划线使得使用该库的人不太可能使用具有相同名称的变量。

# ms-access - 访问 - 计算/计算字段是相关表列的总和

> ID：12667117
> 
> 赞同：1
> 
> 时间：2012-10-01T03:13:53.893
> 
> 标签：ms-access, ms-access-2007

我为我开发了一个快速而肮脏的 MS Access 2010`.accdb`数据库来存储我的商店收据。

`Receipts`我有两个主表，并且在和之间建立了一对多的关系`Items`。

```
Receipts ( ReceiptId, DateTime, GrandTotal )
Items ( ItemId, ReceiptId, Description, LineTotal ) 
```

我想在表格中添加一个计算列，该列`Receipts`是`SUM()`所有收据的`Items.LineTotal`，这将使我能够检测收据的规定总额与我实际支付的金额之间的差异（例如披萨送货小费）。

当我打开表设计器`Receipts`并添加计算列时，我看不到`Items`表达式生成器中列出的表。我做了一个截图：![在此处输入图像描述](../Images/5367fed96a9c32466c1d50b1364b1fd2.png)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T03:32:50.143

计算字段不能引用不同表中的字段。请参阅[将计算字段添加到表中](http://office.microsoft.com/en-us/access-help/add-a-calculated-field-to-a-table-HA101820564.aspx)：

*在 Access 2010 中，您可以创建计算值的表字段。计算可以包括来自同一表中的字段的值以及内置的 Access 函数。*

*笔记*

*- 计算不能包括来自其他表或查询的字段。*

考虑提供计算字段的查询是否是可接受的替代方案。或者，对于窗体或报表，您可以添加一个控件并使用其控件源属性来执行计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T03:26:52.447

为什么不直接编写一个触发查询的宏。它是一个关系数据库。您想直接从表格中查看数据吗？我不太了解 Access，但我可能会使用查询并将分组收据上的行相加。

# html - XHTML 样式的空标签在 HTML5 中是否被视为无效？

> ID：12667124
> 
> 赞同：1
> 
> 时间：2012-10-01T03:15:41.047
> 
> 标签：html, xhtml

> **可能重复：**
> [自闭合标签在 HTML5 中有效吗？](https://stackoverflow.com/questions/3558119/are-self-closing-tags-valid-in-html5)

在 XHTML 中使用自闭合标签时，可以使用这种类型的语法：

```
<img src="myimage.png" /> 
```

但是，这在 HTML 中是完全有效的：

```
<img src="myimage.png"> 
```

XHTML 样式在技术上是否在 HTML5 中被认为是无效的，或者继续使用这种语法仍然完全可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T03:18:11.427

您描述的语法在 HTML5 中完全有效。

编辑：关于描述细微差别的问题，这是一个非常好的线程[：（非无效）自闭合标签在 HTML5 中有效吗？](https://stackoverflow.com/questions/3558119/are-self-closing-tags-valid-in-html5)

# java - 尝试使用 ArrayDeque 迭代器来制作统一成本搜索方法

> ID：12667131
> 
> 赞同：0
> 
> 时间：2012-10-01T03:17:39.533
> 
> 标签：java, iterator, arraydeque

如前所述，我正在使用我的 ArrayDeque 的迭代器边缘，以找到具有最低路径成本节点的图块。这是代码：

```
public static void UCS(String filename)
{
    //a double-ended queue, when used with "addFirst" and "remove", it's a LIFO queue
    ArrayDeque<Node> fringe = new ArrayDeque<Node>();
    //initial tile set
    ArrayList<Tile> tileSet = getTilesFromFile(filename);
    //start state has no placed tiles, and all tiles are in the unplaced list
    State startState = new State(new ArrayList<Tile>(),tileSet);
    //the node that goes with the start state, it has 0 path and step cost, and a null parent
    Node root = new Node(startState,0.0,0.0,null);
    //the fringe starts with just the root node
    fringe.addFirst(root);

    //These are for keeping track of the best solution since
    //we don't just need /a/ solution, we need the best one
    //after generating the whole tree
    double bestCost = Double.MAX_VALUE;
    State bestSolution = null;

    Iterator itr = fringe.iterator();

    //we go until there are no nodes left to be expanded
    while(!fringe.isEmpty())
    {
        double lowestCost = Double.MAX_VALUE;
        Node lowestCostNode = root;

        for (int i = 0; i < fringe.size(); i++)
        {
            if (((Node) itr.next()).getPathCost() < lowestCost)
            {
                lowestCost = ((Node) itr.next()).getPathCost();
                lowestCostNode = ((Node) itr.next());   
            }
        }
        //grab the node at the front of the FIFO queue
        Node currNode = lowestCostNode;
        fringe.remove(currNode);
        //if it is a goal state and the path cost is better than the best
        //goal state we've seen so far, it's the new best
        if(currNode.getState().isGoal() && currNode.getPathCost() < bestCost)
        {
            bestCost = currNode.getPathCost();
            bestSolution = currNode.getState();
        }

        //generate all child nodes and put them in the fringe 
        //at the back of the FIFO queue
        ArrayList<Node> childNodes = currNode.expand();
        for(Node c : childNodes)
        {
            fringe.addFirst(c);
        }
    }

    //print the solution along with the cost
    //you should also print the number of nodes generated and the amount of time it took
    //to perform the search
    System.out.println(bestSolution);
    System.out.println("Cost of best solution: "+bestCost);
} 
```

我敢肯定，有些逻辑可能仍然不正确，但是当我解决这个问题时，我会弄清楚这一点。也忽略奇怪的评论和类似的东西，其中很多是从 BFS 方法复制粘贴的。我得到的问题是这条线：

```
lowestCost = ((Node) itr.next()).getPathCost(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T04:08:05.373

我认为这：

```
for (int i = 0; i < fringe.size(); i++)
{
    if (((Node) itr.next()).getPathCost() < lowestCost)
    {
        lowestCost = ((Node) itr.next()).getPathCost();
        lowestCostNode = ((Node) itr.next());   
    }
} 
```

应该：

```
while (itr.hasNext()) 
{
    Node next = (Node) itr.next();
    if (next.getPathCost() < lowestCost)
    {
        lowestCost = next.getPathCost();
        lowestCostNode = next;   
    }
} 
```

# oracle - 如何在oracle中将trunc值与avg值进行比较

> ID：12667134
> 
> 赞同：3
> 
> 时间：2012-10-01T03:17:51.210
> 
> 标签：oracle, plsql, average

我应该将截断值与平均值进行比较。在我的表中，我有 2 个日期，order_date 和 ship_date；我使用 trunc(ship_date - order_date) 来获取物品运送所需的天数。现在我想将这段时间的平均值与我从`trunc()`函数中获得的值进行比较，如果`trunc()`函数更大，那么我只想显示结果。

到目前为止，这是我想出的，任何帮助表示赞赏。

```
select order_id, 
    order_date, 
    trunc(ship_date-order_date) as shipping_time 
from product_order 
where (trunc(ship_date-order_date) > Avg(trunc(ship_date-order_date))); 
```

当我这样做时，我收到此错误：

> ORA-00934: 此处不允许使用组功能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T05:49:05.607

这是一个基本问题。这不是`trunc`问题，而是经典的“将值与`average`整个表（或子集）上的值进行比较”。

一种经典的方法是在返回标量的单独查询中获取平均值：

```
select 
   order_id, 
   order_date, 
   trunc(ship_date-order_date) as shipping_time 
from product_order 
where 
  trunc(ship_date-order_date) > (select avg(trunc(ship_date-order_date)) 
                                 from product_order); 
```

另一种方法是（使用分析函数）：

```
select * 
from(
    select 
       order_id, 
       order_date, 
       trunc(ship_date-order_date) as shipping_time 
       avg(trunc(ship_date-order_date)) over() as avgshipping
    from product_order 
    )
where shipping_date > avgshipping; 
```

# nhibernate - nhibernate 无法保存或 SaveOrUpdate

> ID：12667137
> 
> 赞同：0
> 
> 时间：2012-10-01T03:18:11.093
> 
> 标签：nhibernate

我花了这么多时间。我迷失在其中。我让程序从 XML 中读取并将其反序列化为具有主键 'id' 的对象。但是同时使用 'SaveOrUpdate' 和 'Save' 方法不能使数据插入到数据库中。和 Log4Net 没有错误。没有插入日志。没有发生异常。有人帮助我。

今天我尝试在表中添加一个主键“HotelId”，它的身份和工作原理。如何在没有额外主键的情况下使其工作。因为 XML 中的 id 是唯一的。所以我不想添加额外的主键。

流是 *.hbm.xml 的一部分

```
 <id name="id" column="id" type="string"  >
     <generator class="assigned"/>
    </id>
    <property name="dateUpdated" column="dateUpdated" type="DateTime"  />
    <property name="name" column="name" type="string"  />
    <property name="address" column="address" type="string"  />
    <property name="zip" column="zip" type="string"  /> 
```

虽然我添加了一个不在 XML 中的额外主节点，但它的工作方式如下：

```
<id name="Id" column="HotelId" type="int" unsaved-value="0"  >
     <generator class="native"/>
    </id>
    <property name="id" column="id" type="string"  />
    <property name="dateUpdated" column="dateUpdated" type="DateTime"  />
    <property name="name" column="name" type="string"  />
    <property name="address" column="address" type="string"  />
    <property name="zip" column="zip" type="string"  /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T10:29:25.697

我的水晶球告诉我你不使用`transactions.Commit();`也不`session.Flush();`告诉会话你已经完成了你的工作并希望这些更改持续存在。我希望它没有坏

# java - 带有继承和子类的 Nullpointerexcption 和突然的 IOStream 闭包

> ID：12667140
> 
> 赞同：0
> 
> 时间：2012-10-01T03:18:35.187
> 
> 标签：java, io, nullpointerexception, class-hierarchy

之前有一个简短的背景，以便我们可以在相同的波长上进行交流。我有大约 8-10 门大学课程，从数据结构到所有语言的编程课程，再到特定的课程，如 java 和 c++。我有点生疏，因为我通常会从编码中休息 2-3 个月。这是我两年前开始考虑的个人项目。

好的，具体到细节和一个具体问题，我的 mutator 函数有问题。似乎是我试图错误地访问私有变量。问题是，我是否过多地嵌套了我的类并试图以不正确的方式改变基类变量。如果是这样，请指出正确的文献，或者确认这是我的问题，以便我可以重新研究这些信息。谢谢

```
package GroceryReceiptProgram;

import java.io.*;
import java.util.Vector;

public class Date {

    private int hour, minute, day, month, year;

    Date() {
        try {
            BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in));
            System.out.println("What's the hour? (Use 1-24 military notation");
            hour = Integer.parseInt(keyboard.readLine());
            System.out.println("what's the minute? ");
            minute = Integer.parseInt(keyboard.readLine());
            System.out.println("What's the day of the month?");
            day = Integer.parseInt(keyboard.readLine());
            System.out.println("Which month of the year is it, use an integer");
            month = Integer.parseInt(keyboard.readLine());
            System.out.println("What year is it?");
            year = Integer.parseInt(keyboard.readLine());
            keyboard.close();
        } catch (IOException e) {
            System.out.println("Yo houston we have a problem");
        }

    }

    public void setHour(int hour) {
        this.hour = hour;
    }

    public void setHour() {
        try {
            BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in));
            System.out.println("What hour, use military notation?");
            this.hour = Integer.parseInt(keyboard.readLine());
            keyboard.close();
        } catch (NumberFormatException e) {
            System.out.println(e.toString() + ":doesnt seem to be a number");
        } catch (IOException e) {
            System.out.println(e.toString());
        }
    }

    public int getHour() {
        return hour;
    }

    public void setMinute(int minute) {
        this.minute = minute;
    }

    public void setMinute() {
        try (BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in))) {
            System.out.println("What minute?");
            this.minute = Integer.parseInt(keyboard.readLine());
        } catch (NumberFormatException e) {
            System.out.println(e.toString() + ": doesnt seem to be a number");
        } catch (IOException e) {
            System.out.println(e.toString() + ": minute shall not cooperate");
        } catch (NullPointerException e) {
            System.out.println(e.toString() + ": in the setMinute function of the Date class");
        }
    }

    public int getMinute() {
        return minute;
    }

    public void setDay(int day) {
        this.day = day;
    }

    public void setDay() {
        try {
            BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in));
            System.out.println("What day 0-6?");
            this.day = Integer.parseInt(keyboard.readLine());
            keyboard.close();
        } catch (NumberFormatException e) {
            System.out.println(e.toString() + ":doesnt seem to be a number");
        } catch (IOException e) {
            System.out.println(e.toString());
        }
    }

    public int getDay() {
        return day;
    }

    public void setMonth(int month) {
        this.month = month;
    }

    public void setMonth() {
        try {
            BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in));
            System.out.println("What month 0-11?");
            this.month = Integer.parseInt(keyboard.readLine());
            keyboard.close();
        } catch (NumberFormatException e) {
            System.out.println(e.toString() + ":doesnt seem to be a number");
        } catch (IOException e) {
            System.out.println(e.toString());
        }
    }

    public int getMonth() {
        return month;
    }

    public void setYear(int year) {
        this.year = year;
    }

    public void setYear() {
        try {
            BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in));
            System.out.println("What year?");
            this.year = Integer.parseInt(keyboard.readLine());
            keyboard.close();
        } catch (NumberFormatException e) {
            System.out.println(e.toString() + ":doesnt seem to be a number");
        } catch (IOException e) {
            System.out.println(e.toString());
        }
    }

    public int getYear() {
        return year;
    }

    public void set() {
        setMinute();
        setHour();
        setDay();
        setMonth();
        setYear();
    }

    public Vector<Integer> get() {
        Vector<Integer> holder = new Vector<Integer>(5);
        holder.add(hour);
        holder.add(minute);
        holder.add(month);
        holder.add(day);
        holder.add(year);
        return holder;
    }
}; 
```

那显然是 Date 类，接下来是另一个基类 Location。

```
package GroceryReceiptProgram;

    import java.io.*;
    import java.util.Vector;

    public class Location {

        String streetName, state, city, country;
        int zipCode, address;

        Location() {
            try {
                BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in));
                System.out.println("What is the street name");
                streetName = keyboard.readLine();
                System.out.println("Which state?");
                state = keyboard.readLine();
                System.out.println("Which city?");
                city = keyboard.readLine();
                System.out.println("Which country?");
                country = keyboard.readLine();
                System.out.println("Which zipcode?");//if not u.s. continue around this step
                zipCode = Integer.parseInt(keyboard.readLine());
                System.out.println("What address?");
                address = Integer.parseInt(keyboard.readLine());
            } catch (IOException e) {
                System.out.println(e.toString());
            }
        }

        public void setZipCode(int zipCode) {
            this.zipCode = zipCode;
        }

        public void setZipCode() {
            try {
                BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in));
                System.out.println("What zipCode?");
                this.zipCode = Integer.parseInt(keyboard.readLine());
                keyboard.close();
            } catch (NumberFormatException e) {
                System.out.println(e.toString() + ":doesnt seem to be a number");
            } catch (IOException e) {
                System.out.println(e.toString());
            }
        }

        public void set() {
            setAddress();
            setCity();
            setCountry();
            setState();
            setStreetName();
            setZipCode();
        }

        public int getZipCode() {
            return zipCode;
        }

        public void setAddress(int address) {
            this.address = address;
        }

        public void setAddress() {
            try {
                BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in));
                System.out.println("What minute?");
                this.address = Integer.parseInt(keyboard.readLine());
                keyboard.close();
            } catch (NumberFormatException e) {
                System.out.println(e.toString() + ":doesnt seem to be a number");
            } catch (IOException e) {
                System.out.println(e.toString());
            }
        }

        public int getAddress() {
            return address;
        }

        public void setStreetName(String streetName) {
            this.streetName = streetName;
        }

        public void setStreetName() {
            try {
                BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in));
                System.out.println("What minute?");
                this.streetName = keyboard.readLine();
                keyboard.close();
            } catch (IOException e) {
                System.out.println(e.toString());
            }
        }

        public String getStreetName() {
            return streetName;
        }

        public void setState(String state) {
            this.state = state;
        }

        public void setState() {
            try {
                BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in));
                System.out.println("What minute?");
                this.state = keyboard.readLine();
                keyboard.close();
            } catch (IOException e) {
                System.out.println(e.toString());
            }
        }

        public String getState() {
            return state;
        }

        public void setCity(String city) {
            this.city = city;
        }

        public void setCity() {
            try {
                BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in));
                System.out.println("What minute?");
                this.city = keyboard.readLine();
                keyboard.close();
            } catch (IOException e) {
                System.out.println(e.toString());
            }
        }

        public String getCity() {
            return city;
        }

        public void setCountry(String country) {
            this.country = country;
        }

        public void setCountry() {
            try {
                BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in));
                System.out.println("What minute?");
                this.country = keyboard.readLine();
                keyboard.close();
            } catch (IOException e) {
                System.out.println(e.toString());
            }
        }

        public String getCountry() {
            return country;
        }
    }; 
```

他们的父母（什么是正确的名字？）类

```
package GroceryReceiptProgram;

    import java.io.*;

    public class FoodGroup {

        private int price, count;
        private Date purchaseDate, expirationDate;
        private Location location;
        private String name;

        public FoodGroup() {
            try {
                setPrice();
                setCount();
                expirationDate.set();
                purchaseDate.set();
                location.set();
            } catch (NullPointerException e) {
                System.out.println(e.toString() + ": in the constructor of the FoodGroup class");
            }
        }

        public void setPrice(int price) {
            this.price = price;
        }

        public void setPrice() {
            try (BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in))) {
                System.out.println("What Price?");
                price = Integer.parseInt(keyboard.readLine());

            } catch (NumberFormatException e) {
                System.out.println(e.toString() + ":doesnt seem to be a number");
            } catch (IOException e) {
                System.out.println(e.toString() + ": in the FoodGroup class, setPrice function");
            } catch (NullPointerException e) {
                System.out.println(e.toString() + ": in FoodGroup class. SetPrice()");
            }
        }

        public int getPrice() {
            return price;
        }

        public void setCount(int count) {
            this.count = count;
        }

        public void setCount() {
            try (BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in))) {
                System.out.println("What count?");
                count = Integer.parseInt(keyboard.readLine());

            } catch (NumberFormatException e) {
                System.out.println(e.toString() + ":doesnt seem to be a number");
            } catch (IOException e) {
                System.out.println(e.toString() + ": in the FoodGroup class, setCount()");
            } catch (NullPointerException e) {
                System.out.println(e.toString() + ": in FoodGroup class, setCount");
            }
        }

        public int getCount() {
            return count;
        }

        public void setName(String name) {
            this.name = name;
        }

        public void setName() {
            try {
                BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in));
                System.out.println("What minute?");
                this.name = keyboard.readLine();

            } catch (IOException e) {
                System.out.println(e.toString());
            }
        }

        public String getName() {
            return name;
        }

        public void setLocation(Location location) {
            this.location = location;
        }

        public Location getLocation() {
            return location;
        }

        public void setPurchaseDate(Date purchaseDate) {
            this.purchaseDate = purchaseDate;
        }

        public void setPurchaseDate() {
            this.purchaseDate.set();
        }

        public Date getPurchaseDate() {
            return purchaseDate;
        }

        public void setExpirationDate(Date expirationDate) {
            this.expirationDate = expirationDate;
        }

        public void setExpirationDate() {
            this.expirationDate.set();
        }

        public Date getExpirationDate() {
            return expirationDate;
        }
    } 
```

最后是主类，所以我可以访问所有这些工作。

```
 package GroceryReceiptProgram;

    public class NewMain {

        public static void main(String[] args) {
            FoodGroup test = new FoodGroup();
        }
    } 
```

如果有人有进一步的兴趣，这里是 UML 的链接。

[https://www.dropbox.com/s/1weigjnxih70tbv/GRP.dia](https://www.dropbox.com/s/1weigjnxih70tbv/GRP.dia)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T03:36:33.163

你的构造函数有问题`FoodGroup`，你没有初始化一些实例变量，所以它们取`null`默认值，给你带来问题：

```
public FoodGroup() {
    //...
    //null pointer exception here!
    expirationDate.set();
    //null pointer exception here!
    purchaseDate.set();
    //null pointer exception here!
    location.set();
    //...
} 
```

这个问题可以通过在使用它们之前创建这些变量来解决：

```
public FoodGroup() {
    //...
    expirationDate = new Date();
    //not null pointer exception!
    expirationDate.set();
    //similar to the other cases
    //...
} 
```

对这个和未来项目的一些建议：

*   不要创建与 Java API 中的类具有相似名称的类。例如，您的`Date`课程很容易被`java.util.Date`.
*   不要使用`Vector`类，而是使用`List<YourClass> list = new ArrayList<YourClass>()`. 更多信息：[ArrayList 和 Vector 之间有什么区别？](https://stackoverflow.com/questions/2986296/what-are-the-differences-between-arraylist-and-vector)为什么 Java Vector类[被认为已过时或不推荐使用？](https://stackoverflow.com/a/1386288/1065197)（这个来自[Jon Skeet](https://stackoverflow.com/users/22656/jon-skeet)）。
*   尝试为您的类使用公共构造函数。在您的情况下，您的程序将编译和运行只是因为您的所有类都在同一个包中，但是如果它们在不同的包中，则会出现问题，因为几乎所有构造函数都具有`default`可见性并且只能被以下类看到同一个包。请注意：[控制对类成员的访问](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)
*   `FoodGroup`不是父类，它是 1)`FoodGroup`和`Date`, 2)`FoodGroup`和之间的“具有”关系`Location`。它可以被看作是一个控制*两个*类实例的行为和生存的控制器。
*   When you post code here or other sites, **please** post a [SSCCE](http://sscce.org/) instead of your whole code. In that way, it will be easier for anyone to help you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T03:36:11.627

```
 public FoodGroup() {
        try {
            setPrice();
            setCount();
            expirationDate.set(); // expiration date is null here 
```

您需要在使用它们之前实例化您的字段。

# php - 是什么导致 html 标签在 Zend_Element 错误装饰器中不呈现？

> ID：12667141
> 
> 赞同：1
> 
> 时间：2012-10-01T03:18:35.030
> 
> 标签：php, zend-framework, zend-form-element, zend-view, html

我正在尝试将链接插入到表单上显示的错误消息中。在我的行动中，我做到了这一点。

```
 $this->view->editForm->getElement('value')->addError('this type/value combination already exists. click <a href="' 
       . $this->view->url(array(
          'module' => 'collection',
          'controller' => 'tag',
          'action' => 'detail',
          'id' => $tagExists->getId()
       ), null, true) 
   .'">here</a> to load the existing tag'); 
```

所以我想在渲染时在我的网络浏览器中看到的是

```
this type/value combination already exists click here to load the existing tag 
```

我看到的是

```
this type/value combination already exists click <a href="/collection/tag/detail/id/9">here</a> to load the existing tag 
```

我不确定如何真正使链接在浏览器中正确呈现。我假设那个错误装饰器中发生了某种输出卫生，但我不确定我应该在哪里寻找。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T04:00:53.093

您需要将*错误*装饰器`escape`上的选项设置为.*`false`*

 *```
$this->view->editForm->getElement('value')
    ->getDecorator('Errors')->setOption('escape', false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T12:02:43.397

我试过了

```
$this->view->editForm->getElement('value')
    ->getDecorator('Errors')
    ->setOptions(array('escape' => false)); 
```

哪个有效*

# java-me - 通过应用打开 Web/URL

> ID：12667145
> 
> 赞同：0
> 
> 时间：2012-10-01T03:19:31.190
> 
> 标签：java-me, midlet

我正在开发 J2ME。
你能介意帮我找出这段代码有什么问题吗：

```
HttpConnection c = null;

    try {
        c = (HttpConnection)Connector.open("http://www.mysite.com",Connector.READ_WRITE, true);
        c.setRequestMethod(HttpConnection.GET); //default
        is = c.openInputStream(); // transition to connected!
            int ch = 0;
        for(int ccnt=0; ccnt < 150; ccnt++) { // get the title.
            ch = is.read();
            if (ch == -1){
                break;
            }
                sb.append((char)ch);
        }
    }   
    catch (IOException x){
        x.printStackTrace();
    }
    finally{
        try     {
            is.close();
            c.close();
        } catch (IOException x){
            x.printStackTrace();
        }
    }
        System.out.println(sb.toString()); 
```

我正在尝试通过我的应用程序打开网站，谢谢之前:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:28:22.907

要在 J2ME 中打开 URL，请在非系统线程中执行以下操作：

[`MIDlet.platformRequest("http://www.mysite.com/");`](http://docs.oracle.com/javame/config/cldc/ref-impl/midp2.0/jsr118/javax/microedition/midlet/MIDlet.html#platformRequest%28java.lang.String%29)

# google-apps-script - 地理位置不适用于 HtmlService

> ID：12667146
> 
> 赞同：1
> 
> 时间：2012-10-01T03:19:35.340
> 
> 标签：google-apps-script

我创建了以下两个文件：

**代码.gs**

```
function doGet() {
  var html = HtmlService.createHtmlOutputFromFile('html.html');
  return html;
} 
```

**html.html**

```
<html>
<body>
<p id="messaging">Click the button to get your coordinates:</p>
<button onclick="getLocation()">Where am I</button>

<script>
  var message=document.getElementById("messaging");
  function getLocation() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(showPosition);
    } else {
      message.innerHTML="Geolocation is not supported.";
    }
  }

function showPosition(position) {
  message.innerHTML="Latitude: " + position.coords.latitude + "<br>Longitude: " + position.coords.longitude;
}
</script>
</body>
</html> 
```

当我调用发布的 URL 时，我得到了预期的消息和按钮。单击按钮，我收到失败消息“不支持地理位置”。如果我将 html.html 保存在一个文件中并在浏览器中打开它，它会按预期工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-24T02:59:49.903

自 2016 年起，地理位置可在 IFRAME 模式下与 HtmlService 一起使用。在这里测试它：[GAS-geolocation](http://bit.ly/1VDcLM8)

用 Chrome 和 Firefox（桌面）测试，都可以。不适用于 Safari（桌面）（共享位置确认框不会弹出。我讨厌 Safari！）

有趣的是，它适用于 iOS 9 上的 Safari，但不适用于 iOS 9 上的最新 Chrome。（同样的问题，没有确认弹出窗口）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T09:15:44.523

我相信，卡哈是这里的罪魁祸首。[您能否在Caja 操场](http://caja.appspot.com/)上运行您的代码以检查行为是否相同。[如果相同，您可以在Caja 问题跟踪器](http://code.google.com/p/google-caja/issues/list)中打开问题

要了解更多 Caja 对 HtmlService 的作用，您可以参考此[页面](https://developers.google.com/apps-script/html_service#Caja)。

**更新** 上面的答案已过时。现在可以使用浏览器中可用的 navigator.geolocation 对象访问位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T13:51:49.727

GeoLocation 在 HtmlService 中尚不可用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-12T10:21:22.003

我刚刚尝试了您的代码，因为我想在 Google 协作平台中使用 Google Apps 脚本做一些事情。

目前 HTMLService 似乎仍然不支持 GeoLocation，但我找到了一种可能的解决方法来满足我的特定需求（即与 Google 站点结合使用），这也可能对其他人有所帮助：

什么工作，是创建一个自定义的“谷歌网站小工具”

使用[教程点中的示例代码](http://www.tutorialspoint.com/html5/geolocation_getcurrentposition.htm)

我最终为我的小工具创建了一个“骨架”XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<Module>

<ModulePrefs title="GeoLocation"
            >
</ModulePrefs>

<Content type="html"><![CDATA[

    <form>
    <input type="button" onclick="getLocation();"
    value="Get Location"/>
    </form>

    <script>
    function showLocation(position) {
    var latitude = position.coords.latitude;
    var longitude = position.coords.longitude;
    alert("Latitude : " + latitude + " Longitude: " + longitude);
    }

    function errorHandler(err) {
    if(err.code == 1) {
    alert("Error: Access is denied!");
    }else if( err.code == 2) {
    alert("Error: Position is unavailable!");
    }
    }
    function getLocation(){

    if(navigator.geolocation){
    // timeout at 60000 milliseconds (60 seconds)
    var options = {timeout:60000};
    navigator.geolocation.getCurrentPosition(showLocation,
    errorHandler,
    options);
    }else{
    alert("Sorry, browser does not support geolocation!");
    }
    }
    </script>
]]></Content>
</Module>
```

现在，我可以将结果作为[URL 参数](https://developers.google.com/apps-script/guides/web#url_parameters)传递给 Google Apps Scripts Web App，而不是警报。

这并不理想，但到目前为止似乎工作正常。

# javascript - Keypress 和 Keydown 产生不同的行为

> ID：12667149
> 
> 赞同：1
> 
> 时间：2012-10-01T03:20:14.670
> 
> 标签：javascript

我正在尝试在按下回车键时创建弹出 div，而 div 包含一个按钮（我编写脚本在它启动时聚焦），当您再次按下回车键时将关闭 div。`keypress`我从 binding中收到 enter 键`keydown`，最终得到不同的结果。

**绑定'按键'**

一切正常，第一个输入键启动一个弹出框，另一个输入键关闭弹出框。

请参阅此[JSFiddle](http://jsfiddle.net/mochatony/SBxEH/1/)。

**绑定'keydown'**

这不能正常工作，因为它只用一个回车键立即启动并关闭弹出框（您不会看到）。

请参阅此[JSFiddle](http://jsfiddle.net/mochatony/SBxEH/)。

我的问题是为什么 keydown 会产生奇怪的行为，这就像对我来说两次触发 enter 键，但事实并非如此。如果我删除按钮焦点（），它将正常工作。这让我很困惑。

用 Firefox 和 chrome 测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T03:26:21.330

每次弹出窗口打开时，您都会重新绑定单击事件，因此每次单击关闭按钮时，它都会多次触发它，这将导致意外行为。

例如：

```
var Popup = function(){
    $('#ok-button').live('click',function(){
        $('#popup').remove();
    });                
}; 
```

此代码意味着每次创建新的 Popup 实例时，存在的每个 $('#ok-button') 都会绑定另一个单击事件。

至于当您使用 keydown 与 keypress 时它立即关闭的原因，这是因为弹出窗口打开的那一刻您已经将焦点设置在按钮上。

这两个关键事件的工作方式不同（在关键过程中的触发时间略有不同）。看来，使用 keydown，您正在更改实际操作中间的焦点（按下键盘上的按钮），然后继续并触发焦点单击。

移除焦点会停止奇怪的双触发行为，因为您不再绑定另一个单击事件。

我建议更改您的点击事件：

```
$('#ok-button').live('click', function(){
    $('#popup').remove();
}); 
var Popup = function(){
    // Whatever               
}; 
```

我还建议查看[jQuery 的 on 事件](http://api.jquery.com/on/)而不是使用 live。

# .net - 如何避免 XML 文档中的 html 标记

> ID：12667151
> 
> 赞同：0
> 
> 时间：2012-10-01T03:20:50.957
> 
> 标签：.net, xml, vb.net, xml-parsing, xmlreader

我有一个 XML 文档，其格式如下所示；

```
<root>
<DETAIL Replaces="XYZ" />
<DETAIL Description="Problem:<br><br>CRS750 dumps when panel F is opened<br><br>>>y" />
<DETAIL StepsToReproduce="ABC" />
</root> 
```

使用下面的函数，我可以将上面加载的 XML Doc 转换为所需的格式；

```
Function ProcessDetail(ByVal xmlText As String) As String
   xtr = New XmlTextReader("GetXMLFileLocation")
        xtr.WhitespaceHandling = WhitespaceHandling.None
        xmlDoc.Load(xtr)
        xtr.Close()

    Dim xmlDoc As New XmlDocument()
    xmlDoc.LoadXml(xmlText)
    Dim sDetail As New StringBuilder()
    sDetail.Append("<DETAIL>")
    For Each detailNode As XmlNode In xmlDoc.SelectNodes("//DETAIL")
        If Not detailNode.Attributes Is Nothing Then
            For Each attribute As XmlAttribute In detailNode.Attributes
 sDetail.Append("<" & attribute.Name.ToUpper & ">" & attribute.Value & "</" &    
 attribute.Name.ToUpper & ">")
            Next
        End If
    Next
    sDetail.Append("</DETAIL>")
    Return sDetail.ToString()
End Function 
```

问题：- 由于我在 DETAIL 下的描述节点有一些“HTML”标签，它给出了以下错误。请帮助我避免这种情况并给出以下输出。

```
ERROR MESSAGE : '<', hexadecimal value 0x3C, is an invalid attribute character. Line 
1,  position 1326.

DESIRED OUTPUT :
 <root>
 <DETAIL>
 <REPLACES>XYZ</REPLACES> 
 <DESCRIPTION>Problem:<br><br>CRS750 dumps when panel F is opened<br> 
 <br>>>y</DESCRIPTION>
 <STEPSTOREPRODUCE>ABC<STEPSTOREPRODUCE/>
 <root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T03:23:51.513

html-in-xml 将是无效的 XML 文档，需要在生成 xml 的源处进行修复。例如，XML 解析器不可能知道什么应该是 XML 的一部分，什么是简单的 html 标记。例如 xml 应该看起来像

```
<somexmltag>&lt;p&gt;This is a paragraph with embedded &lt;i&gt;italics&lt;/i&gt;&lt;/p>&gt;</somexmltag> 
```

或使用 CDATA：

```
<somexmltag><![CDATA[<p>This is a paragraph with embedded <i>italics</i></p>]]></somexmltag> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T07:34:58.953

使用 < 而不是 <, & 代替 & 和可选的 > 而不是>，还有“” 对于“和/或‘对于’

如果您正在生成（或转义）HTML，请确保在其他字符之前更改和符号！:-)

您不能在属性内使用 CDATA 部分。此外，CDATA 部分有时会出现在 HTML 中，并且它们不会嵌套，如果您不小心，可能会导致潜在的代码损坏甚至安全漏洞。（CDATA 注入攻击）。

# xsd - 如何定义具有强制属性的“任何元素”

> ID：12667153
> 
> 赞同：2
> 
> 时间：2012-10-01T03:21:51.190
> 
> 标签：xsd

我有一个 XML，它可以包含任何元素，例如：

```
<AnyElements>
  <Any1 id="any1" />
  <Any2 id="any2" />
  ...
</AnyElements> 
```

但是`id`属性是强制性的。

我如何定义这样的xsd？

```
<xs:element name="AnyElements" type="AnyRootType" />
<xs:complexType name="AnyRootType">
  <xs:sequence>
    <xs:any type="AnyChildType" minOccurs="1" maxOccurs="unbounded"/>
  </xs:sequence>
</xs:complexType> 

<xs:complexType name="AnyChildType">
  <xs:attribute ref="id" use="required"/>
</xs:complexType>

<xs:attribute name="id" type="xs:string"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T16:29:29.403

这完全取决于您将如何定义处理模型。以下是您需要首先考虑的一些事项。

`any`粒子不能被类型约束。它带有一个名为**skip**`processContents`、**lax**和默认值**strict**的属性。一旦您确切理解了它的含义，那么使用***skip***仅仅意味着您将无法强制执行您的强制属性 - 处理器将执行此操作，“跳过”。如果你设置它***lax***，那么它只会在描述内容的 XSD 实际可用**时才处理它，否则它会跳过；**第三个选项***strict***，要求描述此额外内容的 XSD 可用 - period。

 *******因此，`any`只有在验证期间描述“任何”的 XSD 可用时，才能使粒子工作。我想到的选项有点限制，但它的优点是最接近 any 的“精神”，因为它不必从特定的基本类型派生或引用某些属性；为此，类似于您的要求的关键约束：

```
 <xsd:key name="ofid">
        <xsd:selector xpath="*"/>
        <xsd:field xpath="@id"/>
    </xsd:key> 
```

实际上，键使属性成为必需。缺点可能是每个值也必须是唯一的。也许有一个名为 的属性`id`，这是预期的；相反，如果您希望将模式应用于诸如 之类的东西`age`，那么它就行不通了。

如果您认为 XSD 在运行时可用是可以接受的，那么其他替代方案可能包括使用抽象元素或具有抽象类型的元素。好消息是它会带来更严格的方法（您将从一开始就明确设置约束），并且不会设置值约束的唯一性。不利的一面可能是它创建了与另一个描述“合同”的 XSD 的耦合 - 您的强制属性。

更新：根据您的评论，以下是基于替代组的替代方案。我尝试尽可能多地保留旧的 XSD 组件名称。

**Contract.xsd**：这包含您的合同的组成部分。它基本上描述了您的替代小组的负责人；它表明需要一个 id 属性。

```
<?xml version="1.0" encoding="utf-8" ?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:complexType name="AnyChildType" abstract="true">
        <xsd:attribute name="id" use="required"/>
    </xsd:complexType>

    <xsd:element name="AnyElement" abstract="true" type="AnyChildType"/>
</xsd:schema> 
```

**GenericInstance.xsd**：它描述了“通用”文档的根。它在您定义的根元素的上下文中“集成”您的合同。

```
<?xml version="1.0" encoding="utf-8" ?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:include schemaLocation="Contract.xsd"/>

    <xsd:element name="AnyElements" type="AnyRootType"/>
    <xsd:complexType name="AnyRootType">
        <xsd:sequence>
            <xsd:element ref="AnyElement" maxOccurs="unbounded"/>
        </xsd:sequence>
    </xsd:complexType>
</xsd:schema> 
```

**SpecificInstance1.xsd**：特定合约。

```
<?xml version="1.0" encoding="utf-8" ?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:include schemaLocation="Contract.xsd"/>

    <xsd:element name="SomeElement1" substitutionGroup="AnyElement">
        <xsd:complexType>
            <xsd:complexContent>
                <xsd:extension base="AnyChildType">
                    <xsd:annotation>
                        <xsd:documentation>Any content goes.</xsd:documentation>
                    </xsd:annotation>
                </xsd:extension>
            </xsd:complexContent>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

**SpecificInstance2.xsd**：另一个合同（显示不同的创作风格）。

```
<?xml version="1.0" encoding="utf-8" ?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:include schemaLocation="Contract.xsd"/>

    <xsd:element name="SomeElement2" substitutionGroup="AnyElement" type="SomeElement2Type"/>
    <xsd:complexType name="SomeElement2Type">
        <xsd:complexContent>
            <xsd:extension base="AnyChildType">
                <xsd:annotation>
                    <xsd:documentation>Any content goes.</xsd:documentation>
                </xsd:annotation>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
</xsd:schema> 
```

从视觉上看，这就是它们是如何联系在一起的。您可以看到 XSD 之间的耦合保持在最低限度。

![在此处输入图像描述](../Images/1f874ac3f7f60d1d7158584d437a5846.png)

一个示例 XML，在您的通用实例和特定实例定义的范围内有效。

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<AnyElements xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <SomeElement1 id="1"/>
    <SomeElement2 id="1"/>
</AnyElements> 
```

如果您仅限于使用一个 XSD 验证您的 XML，那么下面将是一个 XSD：

```
<?xml version="1.0" encoding="utf-8" ?>
<!--XML Schema generated by QTAssistant/XML Schema Refactoring (XSR) Module (http://www.paschidev.com)-->
<xsd:schema elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:include schemaLocation="GenericInstance.xsd"/>
    <xsd:include schemaLocation="SpecificInstance1.xsd"/>
    <xsd:include schemaLocation="SpecificInstance2.xsd"/>
</xsd:schema> 
```

我已经使用在 .NET 上运行的 XSD 1.0 测试了上述内容；能够在 XSD 1.1 或其他 XSD 处理器中的特定功能上运行将使我所说的某些内容无效。*******

# javascript - ASP.Net 导航选项卡，如 Windows 选项卡控件

> ID：12667155
> 
> 赞同：0
> 
> 时间：2012-10-01T03:21:56.847
> 
> 标签：javascript, asp.net, .net, asp.net-mvc, web-applications

我想要一个类似于 Windows 选项卡控件的网页。每个网页在页面之间移动、回发等时不会丢失内容和数据。

这是网站设计和我的想法：

[母版页]

```
"Fruits"  "Cars"   "Animals"  "Operators" 
```

*   点击“水果”将跳转到“水果”页面，其他链接（标签）也是如此
*   用户在“水果”页面上搜索水果，填写一些字段等。
*   用户然后移动到“汽车”页面，然后通过填写一些字段等来建立自己的汽车
*   然后用户再次返回“Fruits”页面 -> 用户看到她/他在“Fruits”页面上离开的同一页面。

请提出一些除使用 javascript:history.go(-1) 之外的好方法。这有可能实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T11:27:47.490

使用 Jquery post 方法我们可以做同样的事情......让我们试试这个，这里有一个示例给你......

```
<div class="Tabclass" id="TabId1" onclick="TabClick('Fruits')">
        Fruits
    </div>
  <div class="activeTab" id="TabId2" onclick="TabClick('cars')">
        cars
    </div> 
```

这里的 TabClick("var") 是一个javascript函数，参数是标识选择了哪个选项卡。

假设包含 div 的数据的 id 是“DivMainContent”。让我们看看javascript函数

```
<script type="text/javascript">
           function TabClick(bType) {
               $(#DivMainContent").html("");
               if (bType == 'Fruits') {
                         $.post("@Url.Content("~/Controllername/actionname")",
                         function (data) {
                         $("#DivMainContent").html(data);
                    });
               }
               else if (bType == 'cars') {

                          $.post("@Url.Content("~/Controllername/actionname")",
                          function (data) {
                          $("#DivMainContent").html(data);
                    });
 }
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-03T22:03:15.953

Twitter bootstrap api 非常适合 HTML UI，看看他们的标签，你会发现它是你要找的

[http://twitter.github.com/bootstrap/javascript.html#tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T03:32:07.393

有很多方法可以实现您想做的事情。您可以进行用户会话并将 AJAX 调用发送到服务器设置输入并进行处理。或者，您可以使用只有一个页面并在其中导航的单页应用程序。可能还有很多。您应该选择哪一个取决于您的项目规格。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T03:34:26.210

绝对有可能，一个非常简单的解决方案是拥有 4 个 div 并隐藏/显示与用户单击的链接相对应的 div “例如：水果链接将显示水果 div”这种管道已经与大多数 JavaScript库，一个很好的是 Jquery UI 框架，选项卡控件将实现您想要做的事情

查看 jQuery 演示和文档，它可以很容易地通过 ajax 拥有客户端选项卡。

[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

[http://www.randomsnippets.com/2011/04/10/how-to-hide-show-or-toggle-your-div-with-jquery/](http://www.randomsnippets.com/2011/04/10/how-to-hide-show-or-toggle-your-div-with-jquery/)

如果您不适合使用 3party javascript 库，那么总是有简单的旧 javascript 方式来显示/隐藏 div

[http://webdesign.about.com/od/dhtml/a/aa101507.htm](http://webdesign.about.com/od/dhtml/a/aa101507.htm)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-01T03:34:42.237

最简单的方法是渲染所有选项卡的所有内容并使用 Javascript 在客户端切换不同的选项卡（例如，通过调整 css 属性“显示”是一种方法）。没有理由进行 AJAX 调用，除非您需要在显示之前提交更新另一个选项卡的数据。

# php - 一个表格，两个按钮将信息发送到不同的页面

> ID：12667174
> 
> 赞同：0
> 
> 时间：2012-10-01T03:25:36.237
> 
> 标签：php, forms, postgresql

我有一个通过 PHP 从 PostgreSQL 生成的表。

用户需要选择删除行或更新行。

所以我已经成功实现了一个删除按钮，利用隐藏元素将删除的关键信息传递给我的 delete.php

现在我正在尝试添加一个更新按钮，它将 php 发送到我的 update.php 而不是我的 delete.php。

但是，当我打开表单时，我会告诉它在提交时将数据发送到哪里。

那么我的问题是，有没有一种方法可以让两个按钮都可用，并且取决于按下哪个按钮，表单将数据发布到适当的 php-delete.php 和 update.php？也许我想不出的输入按钮的某些属性可以指导在哪里发布而不是将其作为表单属性？

这是我所拥有的一个例子：

```
 echo '<form action="delete.php" method="POST">';
        echo '<tr>';
        echo '<td class="even">' . $row['id'] . '</td>';
        echo '<td class="odd">' . $row['name'] . '</td>';
        echo '<td class="even">' . $row['countrycode'] . '</td>';
        echo '<td class="odd">' . $row['district'] . '</td>';
        echo '<td class="even">' . $row['population'] . '</td>';
        echo '<input type="hidden" name="todelete" value="'.$row['countrycode'].'"  />';
        echo '<input type="hidden" name="cityname" value='.$row['name'].'" />';
        echo '<input type="hidden" name="tablename" value="'.$_POST["search-type"].'"  />';
        echo '<td> <input class="odd" type="submit" name="updateBtn" value="Update?"  /></td>';
        echo '<td> <input class="even" type="submit" name="deleteBtn" value="Delete?" /></td>';
        echo '</tr>';
        echo '</form>'; 
```

这是为表的每一行生成的，因此每个表单都是唯一的，并且只发送该数据。

如果您对如何实现这两个按钮有任何想法，请告诉我！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T03:31:50.643

最简单的方法是有一个单一的脚本作为你的行动，然后有一个基本的

```
<?php

if (isset($_POST['deleteBtn'])) {
   ... do delete stuff
} else if (isset($_POST['updateBtn'])) {
   ... update stuff here ...
} 
```

否则，您会遇到一些 javascript 来动态更改操作目标。

# php - 如何将 PDO::FETCH_CLASS 与抽象类一起使用？

> ID：12667188
> 
> 赞同：0
> 
> 时间：2012-10-01T03:27:47.793
> 
> 标签：php, pdo

是否有`PDO::FETCH_CLASS`基于检索到的数据实例化子类的方法？假设存在一个抽象类`A`，类`B`和我的表上`C`的一个字段的实现，该字段将用于实例化正确的类。是否可以？`A``classname`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T04:43:52.990

听起来你需要，`PDO::FETCH_CLASSTYPE`. [从手册](http://php.net/manual/en/pdostatement.fetch.php)：

> PDO::FETCH_CLASS：返回所请求类的新实例，将结果集的列映射到类中的命名属性。如果 fetch_style 包括 PDO::FETCH_CLASSTYPE（例如 PDO::FETCH_CLASS | PDO::FETCH_CLASSTYPE），那么类的名称由第一列的值确定。

# c# - 从 C# 函数转换为 JavaScript 函数

> ID：12667192
> 
> 赞同：0
> 
> 时间：2012-10-01T03:28:15.647
> 
> 标签：c#, javascript

我在 C# 中有一个用于操作字符串的函数，当我在 C# 中使用时它运行良好。现在我想将此函数转换为在 JavaScript 中使用。这是 C# 中的函数：

```
 public static string TrimString(string str, int lenght)
 {
        string _str = str;

        int _iAdditionalLenght = 0;

        for (int i = lenght; i < str.Length; i++)
        {
            if (_str.Substring(i, 1) == " ")
                break;

            _iAdditionalLenght++;
        }

        return str.Substring(0, str.Length < (lenght + _iAdditionalLenght) ? str.Length : (lenght + _iAdditionalLenght));

 } 
```

我将其转换为 javascript ：

```
function TrimString(str, lengthStr) { //this is my testing 4
     var _str = str;
     var _iAdditionalLenght = 0;
     for (var i = lengthStr; i < str.length; i++) {
       if (_str.substring(i, 1) == " ")
           break;
       _iAdditionalLenght++;
     }

     return str.substring(0, str.length < (lengthStr + _iAdditionalLenght) ? str.length : (lengthStr + _iAdditionalLenght));
 } 
```

但是javascript不起作用。

谁能告诉我，我怎么能在 JavaScript 函数中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T03:59:12.457

C# 和 javascript 之间的子字符串不同

例如，strInput = "0123456789"

# 在 C# ==> Substring(int startIndex, int length)

```
 strInput.SubString(2,3) == will output ==> "234" 
```

# 在 Javascript ==> substring(int startIndex, int endIndex)

```
 strInput.substring(2,3) == will output ==> "2" 
```

插入尝试使用

```
 strInput.substr(2,3) == will output ==> "234" 
```

笔记 ：

在 javscript 中

```
 substring(Start character position, End Character position) 

     substr(Start character position, length of Character) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T03:35:41.293

您需要研究`substring`JavaScript 和 C# 中工作方式的差异。在 C# 中，它是应该提取的字符数，在 JS 中，它是停止提取的索引。

# c# - 使用时更改扩展器标题文本

> ID：12667193
> 
> 赞同：0
> 
> 时间：2012-10-01T03:29:07.787
> 
> 标签：c#, wpf, xaml

我有一个扩展器，它的标题旋转 -90 度：

```
<Expander Name="exProduct" Grid.Column="1" ExpandDirection="Left" 
          HorizontalAlignment="Right" VerticalAlignment="Stretch">
    <Expander.Header>
        <TextBlock Text="Add Product" FontSize="18"        
            <TextBlock.LayoutTransform>                
                <RotateTransform Angle="-90"/>             
            </TextBlock.LayoutTransform>
        </TextBlock>
    </Expander.Header> 
```

我怎样才能使用这样的东西，并且标题旋转 -90 度：

```
<Window.Resources>
<Style x:Key="ExpanderEx" TargetType="Expander">
<Setter Property="Header" Value="Show"/>
<Style.Triggers>
<Trigger Property="IsExpanded" Value="True">
<Setter Property="Header" Value="Hide"/>
</Trigger>
</Style.Triggers>
</Style>
</Window.Resources> 

<Expander Style="{StaticResource ExpanderEx}" >

<StackPanel>
    <Button Width="100" Height="50"/>
</StackPanel>
</Expander> 
```

# tfs - 如果我知道源位置，如何将所有文件和文件夹从 tfs 复制到远程路径？

> ID：12667194
> 
> 赞同：0
> 
> 时间：2012-10-01T03:29:29.917
> 
> 标签：tfs

我在 TFS 服务器上有一个文件夹，其中包含大约 10 个子文件夹。它的结构如下所示。

```
Top Folder ($/MyProject/Top)
|-- Sub 1 ($/MyProject/Top/Sub1)
    |-- file1-1.txt
|-- Sub 2 ($/MyProject/Top/Sub2)
    |-- file2-1.txt
    |-- file2-1.txt
|-- Sub 3 ($/MyProject/Top/Sub3)
|-- Sub 4 ($/MyProject/Top/Sub4)
    |-- file4-1.txt
    |-- file4-1.txt
|-- Sub 5 ($/MyProject/Top/Sub5)
    |-- file5-1.txt 
```

现在，我创建了一个自定义工作流活动，以逐个文件地从源复制到目标。我想将顶级文件夹中的所有文件和文件夹复制到远程路径。我怎样才能归档这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:23:01.993

一种简单的技术是在您调用的位置创建一个批处理文件，[`tf get`](http://msdn.microsoft.com/en-us/library/fx7sdeyf%28v=vs.100%29.aspx)然后使用[robocopy](http://technet.microsoft.com/en-us/library/cc733145%28v=ws.10%29.aspx)进行远程复制。

# c# - 嵌套属性类

> ID：12667199
> 
> 赞同：0
> 
> 时间：2012-10-01T03:30:39.160
> 
> 标签：c#, asp.net, properties, nested

我有一个父类和 3 个子类。这是一个例子：

父类：

```
public class blcSalesParam 
{   
    public string selectFrom
    {
        get;
        set;
    }

    public string pageAction
    {
        get;
        set;
    }
} 
```

儿童班：

```
public class blcDeliveryOrder 
{
    public int? DeliveryID
    {
        get;
        set;
    }

    public string DeliveryCode
    {
        get;
        set;
    } 
```

Child2类：

```
public class blcSalesOrder 
{
    public int? salesID
    {
        get;
        set;
    }

    public string salesAction
    {
        get;
        set;
    } 
```

所有子属性类都可以继承父属性类，child 和child2 也可以互相继承属性类。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T03:47:40.530

你所要做的就是使用概念`inheritance.`

```
public class blcDeliveryOrder : blcSalesParam 
{

} 
```

二孩班

```
public class blcSalesOrder : blcSalesParam 
{

} 
```

# java - 为什么 Red5 在几秒钟不活动后关闭？

> ID：12667200
> 
> 赞同：0
> 
> 时间：2012-10-01T03:31:04.117
> 
> 标签：java, process, red5, rtmp

我在我的 VPS 上安装了一个新的 Red5 服务器，我正在运行 CentOS 5.7 X64 并安装了 Webmin。我有 768MB 的内存和两个 IP 地址。

Java 6，用 'ant prepare' 和 'ant dist' 编译完成。

当我运行 Red5（有或没有我的自制网络应用程序）时，服务器在几秒钟不活动后关闭而没有特殊消息。（5秒到2分钟）

Red5服务器如何保持在线？

查看完整日志；

```
Running on  Linux
Starting Red5
Red5 root: /usr/local/red5/dist
Configuation root: /usr/local/red5/dist/conf
Root: /usr/local/red5/dist
Deploy type: bootstrap
Logback selector: org.red5.logging.LoggingContextSelector 
```

...

```
Setting default logging context: default
[INFO] [main] org.red5.server.Launcher - Red5 Server 0.9.1 $Rev: 4059 $ (http://code.google.com/p/red5/)
Red5 Server 0.9.1 $Rev: 4059 $ (http://code.google.com/p/red5/)
[INFO] [main] org.springframework.context.support.FileSystemXmlApplicationContext - Refreshing org.springframework.context.support.FileSystemXmlApplicationContext@7f70888e: startup date [Mon Oct 01 03:16:36 GMT 2012]; root of context hierarchy
[INFO] [main] org.springframework.beans.factory.config.PropertyPlaceholderConfigurer - Loading properties file from class path resource [red5.properties]
[INFO] [main] org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@554d7745: defining beans [placeholderConfig,red5.common,red5.core,context.loader,pluginLauncher,tomcat.server]; root of factory hierarchy
[INFO] [main] org.springframework.context.support.FileSystemXmlApplicationContext - Refreshing org.springframework.context.support.FileSystemXmlApplicationContext@4934ce4a: startup date [Mon Oct 01 03:16:37 GMT 2012]; root of context hierarchy
[INFO] [main] org.springframework.beans.factory.config.PropertyPlaceholderConfigurer - Loading properties file from class path resource [red5.properties]
[INFO] [main] org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@54c01e99: defining beans [placeholderConfig,red5.server,jmxFactory,jmxAgent,serializer,deserializer,statusObjectService,rtmpCodecFactory,rtmptCodecFactory,remotingCodecFactory,streamableFileFactory,filePersistenceThread,sharedObjectService,streamService,providerService,consumerService,bandwidthFilter,schedulingService,warDeployService,remotingClient,object.cache,keyframe.cache,flv.impl,flvreader.impl,mp4reader.impl,mp3reader.impl,org.springframework.beans.factory.config.MethodInvokingFactoryBean#0,org.springframework.beans.factory.config.MethodInvokingFactoryBean#1,streamExecutor,playlistSubscriberStream,clientBroadcastStream]; root of factory hierarchy
[WARN] [main] org.springframework.beans.GenericTypeAwarePropertyDescriptor - Invalid JavaBean property 'enableRmiAdapter' being accessed! Ambiguous write methods found next to actually used [public void org.red5.server.jmx.JMXAgent.setEnableRmiAdapter(java.lang.String)]: [public void org.red5.server.jmx.JMXAgent.setEnableRmiAdapter(boolean)]
[WARN] [main] org.springframework.beans.GenericTypeAwarePropertyDescriptor - Invalid JavaBean property 'enableSsl' being accessed! Ambiguous write methods found next to actually used [public void org.red5.server.jmx.JMXAgent.setEnableSsl(java.lang.String)]: [public void org.red5.server.jmx.JMXAgent.setEnableSsl(boolean)]
[WARN] [main] org.springframework.beans.GenericTypeAwarePropertyDescriptor - Invalid JavaBean property 'enableMinaMonitor' being accessed! Ambiguous write methods found next to actually used [public void org.red5.server.jmx.JMXAgent.setEnableMinaMonitor(java.lang.String)]: [public void org.red5.server.jmx.JMXAgent.setEnableMinaMonitor(boolean)]
[INFO] [main] org.red5.server.service.WarDeployer - War deployer service created
[INFO] [main] org.springframework.context.support.FileSystemXmlApplicationContext - Refreshing org.springframework.context.support.FileSystemXmlApplicationContext@7b6ee3ec: startup date [Mon Oct 01 03:16:37 GMT 2012]; parent: ApplicationContext 'red5.common'
[INFO] [main] org.springframework.beans.factory.config.PropertyPlaceholderConfigurer - Loading properties file from class path resource [red5.properties]
[WARN] [main] org.springframework.beans.factory.config.CustomEditorConfigurer - Passing PropertyEditor instances into CustomEditorConfigurer is deprecated: use PropertyEditorRegistrars or PropertyEditor class names instead. Offending key [java.net.SocketAddress; offending editor instance: org.apache.mina.integration.beans.InetSocketAddressEditor@7d5dc37d
[INFO] [main] org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@77a9f87c: defining beans [customEditorConfigurer,placeholderConfig,rtmpMinaConnManager,rtmpHandler,rtmpMinaIoHandler,rtmpTransport,rtmpMinaConnection,rtmptConnManager,rtmptHandler,rtmptServlet,rtmptConnection,rtmpsMinaIoHandler,rtmpsTransport]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@54c01e99
[INFO] [main] org.red5.server.net.rtmp.RTMPMinaTransport - RTMP Mina Transport bound to /0.0.0.0:1935
[INFO] [main] org.red5.server.net.rtmp.RTMPMinaTransport - RTMP Mina Transport Settings
[INFO] [main] org.red5.server.net.rtmp.RTMPMinaTransport - Connection Threads: 4
[INFO] [main] org.red5.server.net.rtmp.RTMPMinaTransport - I/O Threads: 16
[INFO] [main] org.red5.server.net.rtmp.RTMPMinaTransport - TCP No Delay: true
[INFO] [main] org.red5.server.net.rtmp.RTMPMinaTransport - Receive Buffer Size: 65536
[INFO] [main] org.red5.server.net.rtmp.RTMPMinaTransport - Send Buffer Size: 271360
[INFO] [main] org.red5.server.net.rtmp.RTMPMinaTransport - RTMP Mina Transport bound to /0.0.0.0:8443
[INFO] [main] org.red5.server.net.rtmp.RTMPMinaTransport - RTMP Mina Transport Settings
[INFO] [main] org.red5.server.net.rtmp.RTMPMinaTransport - Connection Threads: 4
[INFO] [main] org.red5.server.net.rtmp.RTMPMinaTransport - I/O Threads: 16
[INFO] [main] org.red5.server.net.rtmp.RTMPMinaTransport - TCP No Delay: true
[INFO] [main] org.red5.server.net.rtmp.RTMPMinaTransport - Receive Buffer Size: 65536
[INFO] [main] org.red5.server.net.rtmp.RTMPMinaTransport - Send Buffer Size: 271360
[INFO] [main] org.springframework.context.support.FileSystemXmlApplicationContext - Refreshing org.springframework.context.support.FileSystemXmlApplicationContext@673dd208: startup date [Mon Oct 01 03:16:37 GMT 2012]; parent: ApplicationContext 'red5.common'
[INFO] [main] org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@32771eb1: defining beans [global.clientRegistry,global.serviceInvoker,global.mappingStrategy,global.context,global.handler,global.scope,red5.scopeResolver]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@54c01e99
[INFO] [main] org.apache.catalina.core.AprLifecycleListener - The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/lib/amd64/server:/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/lib/amd64:/usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/jre/../lib/amd64:/usr/java/packages/lib/amd64:/usr/lib64:/lib64:/lib:/usr/lib
[INFO] [main] org.red5.server.tomcat.TomcatLoader - Setting connector: org.apache.catalina.connector.Connector
[INFO] [main] org.red5.server.tomcat.TomcatLoader - Address to bind: /0.0.0.0:5080
[INFO] [main] org.red5.server.tomcat.TomcatLoader - Loading tomcat context
[INFO] [main] org.red5.server.tomcat.TomcatLoader - Server root: /usr/local/red5/dist
[INFO] [main] org.red5.server.tomcat.TomcatLoader - Config root: /usr/local/red5/dist/conf
[INFO] [main] org.red5.server.tomcat.TomcatLoader - Application root: /usr/local/red5/dist/webapps
[INFO] [main] org.red5.server.tomcat.TomcatLoader - Starting Tomcat servlet engine
[INFO] [main] org.apache.catalina.startup.Embedded - Starting tomcat server
[INFO] [main] org.apache.catalina.core.StandardEngine - Starting Servlet Engine: Apache Tomcat/6.0.24
[INFO] [main] org.apache.coyote.http11.Http11Protocol - Initializing Coyote HTTP/1.1 on http-0.0.0.0-5080
[INFO] [main] org.apache.coyote.http11.Http11Protocol - Starting Coyote HTTP/1.1 on http-0.0.0.0-5080
[INFO] [main] org.red5.server.tomcat.TomcatLoader - Dedicated RTMPT server configuration was not specified
[INFO] [main] org.red5.server.tomcat.TomcatLoader - Dedicated RTMPS server configuration was not specified
Bootstrap complete
[INFO] [Launcher:/installer] org.springframework.beans.factory.config.PropertyPlaceholderConfigurer - Loading properties file from ServletContext resource [/WEB-INF/red5-web.properties]
[INFO] [Launcher:/vod] org.springframework.beans.factory.config.PropertyPlaceholderConfigurer - Loading properties file from ServletContext resource [/WEB-INF/red5-web.properties]
[INFO] [Launcher:/live] org.springframework.beans.factory.config.PropertyPlaceholderConfigurer - Loading properties file from ServletContext resource [/WEB-INF/red5-web.properties]
[INFO] [Launcher:/chatroulette] org.springframework.beans.factory.config.PropertyPlaceholderConfigurer - Loading properties file from ServletContext resource [/WEB-INF/red5-web.properties]
[INFO] [Launcher:/] org.springframework.beans.factory.config.PropertyPlaceholderConfigurer - Loading properties file from ServletContext resource [/WEB-INF/red5-web.properties]
[INFO] [Launcher:/vod] org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@521c5cd7: defining beans [placeholderConfig,web.context,web.scope,web.handler]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@32771eb1
[INFO] [Launcher:/] org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@2d9f90e3: defining beans [placeholderConfig,web.context,web.scope]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@32771eb1
[INFO] [Launcher:/installer] org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@4453d3cf: defining beans [placeholderConfig,web.context,web.scope,web.handler,installer.service]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@32771eb1
[INFO] [Launcher:/chatroulette] org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@495a2dc4: defining beans [placeholderConfig,web.context,web.scope,web.handler]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@32771eb1
[INFO] [Launcher:/live] org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@bba92db: defining beans [placeholderConfig,web.context,web.scope,web.handler]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@32771eb1
[INFO] [Launcher:/chat] org.springframework.beans.factory.config.PropertyPlaceholderConfigurer - Loading properties file from ServletContext resource [/WEB-INF/red5-web.properties]
[INFO] [Launcher:/chat] org.springframework.beans.factory.support.DefaultListableBeanFactory - Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@677210a5: defining beans [placeholderConfig,web.context,web.scope,web.handler]; parent: org.springframework.beans.factory.support.DefaultListableBeanFactory@32771eb1
[INFO] [Launcher:/installer] org.red5.server.service.Installer - Installer service created 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:36:06.770

这根本不应该发生。

您可以使用 red5-highpref.sh 启动服务器，它将在日志目录中创建一个名为：jvmstd.out 的文件，其中包含每个 System.out 调用或最终未显示在日志中的异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T18:08:56.607

停止的原因是 VPS 质量差。我已经在另一个 VPS 上重新安装了相同的东西并且运行良好。

# python - 如何根据索引值匹配值？

> ID：12667202
> 
> 赞同：2
> 
> 时间：2012-10-01T03:31:19.890
> 
> 标签：python, export-to-csv

有时我会遇到信息在两个数据集中的问题。虽然很麻烦，但我使用 Access 对数据进行配对，然后将其导出为 CSV。其他时候，我使用 for 循环来遍历两个列表并匹配数据，但它不能很好地扩展。

我想知道 Python 中是否有更有效的方法来“链接”数据。下面是我所说的一个例子

在这种情况下，一个数据集包含品牌和型号，另一个包含原产国。我希望能够将集合 A 和 B 中的数据组合成一个数据集以进行导出、分析等。

```
A=[['Chevy','Suburban'],['Toyota','Camry'],['Honda','Civic']]
B=[['Chevy','America'],['Toyota','Japan'],['Honda','Japan']]

AB =[['Chevy','Suburban','America'],['Toyota','Camry','Japan'],['Honda','Civic','Japan']] 
```

一如既往地感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T03:47:21.017

我认为您可以考虑[`collections.namedtuple`](http://docs.python.org/library/collections.html#collections.namedtuple)为此目的使用：

```
>>> from collections import namedtuple
>>> MakeOrigin = namedtuple('MakeOrigin', ['make', 'origin'])
>>> MakeModel = namedtuple('MakeModel', ['make', 'model'])
>>> A = [MakeModel('Chevy', 'Suburban'), MakeModel('Toyota', 'Camry'), MakeModel('Honda', 'Civic')]
>>> B = [MakeOrigin('Chevy', 'America'), MakeOrigin('Toyota', 'Japan'), MakeOrigin('Honda', 'Japan')]
>>> AB = [[a.make, a.model, b.origin] for a in A for b in B if a.make == b.make]
>>> AB
[['Chevy', 'Suburban', 'America'], ['Toyota', 'Camry', 'Japan'], ['Honda', 'Civic', 'Japan']] 
```

它更具可读性并允许更多有趣的操作。

* * *

不使用`namedtuple`：

```
>>> A=[['Chevy','Suburban'],['Toyota','Camry'],['Honda','Civic']]
>>> B=[['Chevy','America'],['Toyota','Japan'],['Honda','Japan']]
>>> 
>>> AB = [[a[0], a[1], b[1]] for a in A for b in B if a[0] == b[0]]
>>> AB
[['Chevy', 'Suburban', 'America'], ['Toyota', 'Camry', 'Japan'], ['Honda', 'Civic', 'Japan']] 
```

# python - 在python中绘制shapefile

> ID：12667203
> 
> 赞同：4
> 
> 时间：2012-10-01T03:31:32.107
> 
> 标签：python, shapefile

我有几个形状文件，我想`scatterplot`在上面绘制一些数据。

有没有人有办法加载形状文件然后绘制它？我已经遵循了几个教程，但到目前为止还没有成功。

我尝试使用的形状文件是巴基斯坦的一条道路。[在这里](http://www.mapcruzin.com/free-pakistan-arcgis-maps-shapefiles.htm)找到

我下载了模块`pyshp`，`shapelib`但对其他人开放！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T13:13:36.513

shapefile 和使用底图绘制地图的有用教程：http: [//www.packtpub.com/article/plotting-geographical-data-using-basemap](http://www.packtpub.com/article/plotting-geographical-data-using-basemap)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T04:21:06.187

尽管我很喜欢 D3、Matplotlib 和 R，但这听起来就像您只想在 Google 地图图表上方创建一个叠加层。

这比你想象的要容易：

[https://developers.google.com/maps/documentation/javascript/overlays](https://developers.google.com/maps/documentation/javascript/overlays)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T07:31:07.947

为此目的查看[Qgis 。](http://qgis.org/en/)

它有一个 python 控制台，使您能够以有效的方式处理数据。它还读取和写入 .shp 文件。

# php - 如何合并 Reddit 页面/帖子排名算法？

> ID：12667210
> 
> 赞同：7
> 
> 时间：2012-10-01T03:32:29.780
> 
> 标签：php, mysql, algorithm

我正在尝试学习如何编写像 Reddit.com 这样的网站算法，其中有成千上万的帖子需要排名。他们的排名算法是这样工作的（你不必阅读它，它更像是我的一个普遍问题）：[http ://amix.dk/blog/post/19588](http://amix.dk/blog/post/19588)

现在我有帖子存储在数据库中，我记录了他们的日期，他们每个人都有一个赞成和反对的字段，所以我正在存储他们的记录。我想知道你如何存储他们的排名？当特定帖子具有排名值，但随着时间而变化时，您如何存储它们的排名？

如果它们没有被存储，您是否会在每次用户加载页面时对每个帖子进行排名？

你什么时候存储这些帖子？您是否运行 cron 作业以每 x 分钟自动为每个帖子赋予一个新值？你存储它们的价值吗？这是暂时的。也许，直到该帖子达到其最低分数并被遗忘？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T03:40:42.247

I would definitely not calculate their rank every time you display them.

A simple, and not so performant solution would be to cache post rankings, and once one post's ranking changes, you clear or refresh the cache.

That is not ideal, but it is possible.

Another way would be to do as you alluded to: calculate and store ranks in the database (and ideally cache them), and then refresh those rankings using a cron job every x minutes.

Again, these are basic approaches to what you want to do. You can then build on them over time.

The algorithm you choose will most likely be very particular to your needs.

You need to also gauge what kind of traffic your site would be getting, as it would dictate what kind of lengths you should go through to get the right algorithm.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T03:49:56.123

我会立即在时间加权尺度上计算单票的分数。我会将该分数发送到队列中或使用它来增加一个字段，具体取决于其中哪一个对您来说是有效的。

在固定的时间间隔内，我会取出所有当前排名的文章和在时间窗口内获得投票的所有文章，然后按分数降序对所有排名文章和所有排队文章进行重新评分，直到我计算出足够的排名配额.

排名列表将被缓存并使用到下一个排名周期。您必须根据您的站点负载调整队列保留期（可能在最后 N 个队列中有活动的任何内容都会重新排队）、文章的保留等，但这应该是一个表现良好的起点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T06:10:25.477

如果您使用 reddit 使用的确切算法，您只需在项目被投赞成票或反对票时更改排名字段 - 实际上只有当赞成票和反对票之间的差异改变数量级时。本文进一步解释了他们的排名如何运作。

[http://bibwild.wordpress.com/2012/05/08/reddit-story-ranking-algorithm/](http://bibwild.wordpress.com/2012/05/08/reddit-story-ranking-algorithm/)

基本上，赞成票和反对票只会“取代”职位。如果 D 是赞成票数和反对票数之间的差值，则帖子每 D 的数量级向上或向下移动 12 小时。除此之外，这只是一个简单的时间排名。

* * *

但是，如果您想使用自己的排名系统，其中帖子的年龄以某种方式而非线性方式很重要，您将不得不创建一个索引字段并按照所说的时间间隔重新计算排名，或者只是将您的排序正如我在评论中所说，进入您的 SQL 查询。但很有可能，您可以找到一种不必一遍又一遍地重新计算的方法。

# ios - 如何让 managedObjectContext 在多个视图中工作

> ID：12667211
> 
> 赞同：0
> 
> 时间：2012-10-01T03:32:39.110
> 
> 标签：ios, nsmanagedobjectcontext

我在从多个视图访问我的 coredata 对象时遇到了麻烦，并且已经读到您必须在您的应用程序委托中以不同的方式声明它。但是我还没有找到一个对我有意义的示例。

这就是我目前在我的应用程序委托中声明它的方式。

//尝试为 coredata EResponses 设置上下文 *eResponses = [EResponses sharedManager]; eResponses.managedObjectContext = self.managedObjectContext;

我想知道如何让它适用于多个视图？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:40:54.870

您可以从应用程序委托中引用它（就像您正在做的那样）。

或者您可以设置一个包含托管对象上下文的单例类。我就是这样做的。我有一个具有所有核心数据功能的单例类，每当我需要进行一些数据库操作时，我都会使用我的核心数据单例类。

# ruby-on-rails - 给定数据库中的对象，如何从对象中删除单个项目？

> ID：12667212
> 
> 赞同：0
> 
> 时间：2012-10-01T03:32:39.057
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个这样的查询：

```
@users = User.where(:something => 'met') 
```

这将返回带有 1+ 个项目的 @users

我想要做的是循环遍历@user 对象以查看是否满足条件，如果满足条件我想从对象中删除该项目。我一直在尝试以下方法，但它似乎不起作用，尽管没有错误。

```
@users.each_with_index do |u, index|
  @users.delete(index) if u.id == 12
end 
```

关于更好地完成这项工作的建议？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T03:43:35.527

你想从数据库中删除它还是从列表中删除它？

在前一种情况下，做

```
@users.each do |u|
  u.delete if u.id == 12
end 
```

在后者中，做

```
@users.reject! do |u|
  u.id == 12
end 
```

或者，如果条件是用户返回“true”/“false”-ish 值的某种方法，

```
@users.reject! &:is_12

class User < ActiveRecord::Base
  def is_12
    self.id == 12
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T03:42:09.393

[Array#delete_if](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-delete_if) :

```
@users.delete_if { |u| u.id == 12 } 
```

You can also exclude it from the query all together:

```
User.where(:something => "met").where("id != ?", 12) 
```

The reason your try isn't working is because `Array#delete` takes an object, not an index. So you'd have to tweak your example:

```
@users.each { |u| @users.delete(u) if u.id == 12 } 
```

But that seems silly given the `delete_if` method :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T03:47:38.287

从您的获取中排除有问题的记录通常是一个更好的主意：

```
@users = User.where(:something => 'met').where('id!=?', 12) 
```

否则，您必须操纵结果集。一种简单的方法是将其转换为哈希并删除有问题的键：

```
@users = Hash[User.where(...).collect { |u| [ u.id, u ] }]
@users.delete(12) 
```

# django - 查询在 shell 中有效，但在浏览器中无效

> ID：12667216
> 
> 赞同：0
> 
> 时间：2012-10-01T03:33:48.443
> 
> 标签：django, django-queryset

我在视图中有这个查询：

```
def metas (request, pipol_id):
  pipol = Personas.objects.get(pk=pipol_id).evidencias_set.all().exclude(calidad=1)
  return render_to_response ( 'metas/metas.html', {'pipol': pipol} ) 
```

当我在 shell 中测试这段代码时：

```
pipol_id = u'3'
pipol = Personas.objects.get(pk=pipol_id).evidencias_set.all().exclude(calidad=1)
pipol.count()
Out[8]: 45
pipol = Personas.objects.get(pk=pipol_id).evidencias_set.all()
pipol.count()
Out[10]: 46 
```

查询按预期工作（我有`evidencia`一个`calidad=1`.

但是当我在我的模板中尝试时，我没有得到任何数据。

这是`urls.py`：

```
url (r'^(?P<pipol_id>\d+)/$', 'metas'), 
```

网址是这样的：`http://localhost:8000/metas/3/`。

没有错误，只是一个空的 QuerySet。我错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T04:44:22.093

在您的外壳中，您正在使用`3`for value ，`pipol_id`而在浏览器中您正在尝试使用 value `1`。

`Personas`具有 id 的对象`1`可能没有任何内容`evidencias_set`。

# c# - 反射排除基类的所有属性和所有其他派生类的特定属性

> ID：12667219
> 
> 赞同：2
> 
> 时间：2012-10-01T03:34:29.457
> 
> 标签：c#, .net, system.reflection

我有以下基类、中间类和派生类：

```
public class Base
{
    [DataMemberAttribute()]
    public int ValueBase { get; set; }

    [IgnoreForAllAttribute("Param1", "Param2")]
    public int IgnoreBase { get; set; }
}

public class Middle : Base
{
    [DataMemberAttribute()]
    public int ValueMiddle { get; set; }

    [IgnoreForAllAttribute("Param1", "Param2")]
    public int IgnoreMiddle { get; set; }
}

public class MostDerived : Middle
{
    [DataMemberAttribute()]
    public int ValueMostDerived { get; set; }

    [IgnoreForAllAttribute("Param1", "Param2")]
    public int IgnoreMostDerived { get; set; }
} 
```

我需要一个给定类型的函数，我需要返回层次结构中除基础之外的所有类的 DataMemberAttribute 属性。

此外，应该忽略图中所有类的所有 IgnoreForAllAttribute 属性。

```
var derivedObject = new MostDerived();
var attributes = MyShinyAttributeFunction(derivedObject.GetType());
// returns [] { ValueMostDerived, ValueMiddle } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T04:59:25.467

这是一个假设 DateMemberAttribute 和 IgnoreForAllAttribute 互斥的 LINQ 示例

```
IEnumerable<PropertyInfo> MyProperties(object o)
{
   o.GetType().GetProperties()
    .Where(p => !(p.DeclaringType is Base))
    .Where(p => p.GetCustomAttributes(false).Any(a => a is DataMemberAttribute)
} 
```

假设属性不互斥的示例

```
IEnumerable<PropertyInfo> MyProperties(object o)
{
   o.GetType().GetProperties()
    .Where(p => !(p.DeclaringType is Base))
    .Where(p => 
       { 
          var attributes = p.GetCustomAttributes(false);
          return attributes.Any(a => a is DataMemberAttribute)
             && !attributes.Any(a => a is IgnoreForAllAttribute);
       }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T04:30:08.373

```
var properties = new List<PropertyInfo>();

GetProps(typeof(MostDerived), properties); 
```

GetProps 是一个递归函数，它获取声明类型的属性，然后为层次结构中的下一个类型调用自身。它在到达“基地”时停止

```
private static void GetProps(Type T, List<PropertyInfo> Properties)
{
  if (T != typeof(Base))
  {
    var pis = T.GetProperties();

    foreach (var pi in pis)
    {
      if (pi.DeclaringType == T &&
        pi.GetCustomAttribute<DataMemberAttribute>() != null &&
        pi.GetCustomAttribute<IgnoreForAllAttribute>() == null)
      {
        Properties.Add(pi);
      }
    }

    GetProps(T.BaseType, Properties);

  }
} 
```

属性列表将包含具有 DataMemberAttribute 而没有 IgnoreForAllAttribute 的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T04:17:25.097

您可以使用以下函数来获得所需的结果： 在 propertyNames 中，您将获得所需的属性。

用法：

```
List<string> propertyNames = new List<string>();
List<string> basePropertyNames = new List<string>();
MyShinyAttributeFunction(derivedObject.GetType(), ref propertyNames, ref basePropertyNames); 
```

功能：

```
void MyShinyAttributeFunction(Type type, ref List<string> propertyNames, ref List<string> basePropertyNames)
{
    if (type == null)
        return;

    MyShinyAttributeFunction(type.BaseType, ref propertyNames, ref basePropertyNames);

    foreach (var property in type.GetProperties())
    {
        foreach (object customAttr in property.GetCustomAttributes(false))
        {
            if (customAttr is DataMemberAttribute)
            {
                if (type.BaseType.Name.Equals("Object"))
                {
                    DataMemberAttribute attribute = (DataMemberAttribute)customAttr;
                    if (!basePropertyNames.Contains(property.Name))
                        basePropertyNames.Add(property.Name);
                }
                else
                {
                    DataMemberAttribute attribute = (DataMemberAttribute)customAttr;
                    if (!propertyNames.Contains(property.Name) && !basePropertyNames.Contains(property.Name))
                        propertyNames.Add(property.Name);
                }
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T04:18:08.580

您必须使用以下内容：

*   [Type::GetProperties](http://msdn.microsoft.com/en-us/library/kyaxdd3x.aspx)方法，用于检索所有属性。
*   [MemberInfo::GetCustomAttributes](http://msdn.microsoft.com/en-us/library/dwc6ew1d.aspx)检索每个属性的属性。
*   [Type::BaseType](http://msdn.microsoft.com/en-us/library/system.type.basetype.aspx)属性检索类型的基类型。

当 BaseType 不存在时停止的递归函数应该可以解决问题。

# asp.net - 如何为 ASP.NET DropDownList 的每个选项添加标题属性

> ID：12667222
> 
> 赞同：2
> 
> 时间：2012-10-01T03:34:31.780
> 
> 标签：asp.net, html-select

我正在处理一个较旧的 ASP.NET 项目（我认为不是 MVC），他们需要的功能之一是当他们将鼠标悬停在下拉列表中的项目上时查看项目的描述。这可以通过使用以下代码并使用标题文本的 HTML 来简单地完成：

```
<select>
    <option value="1" title="Option 1 Desc">Option 1</option>
    <option value="2" title="Option 2 Desc">Option 2</option>
    <option value="3" title="Option 3 Desc">Option 3</option>
</select> 
```

好的，那么如何使用 ASP.NET DropDownList 控件来执行此操作？我有以下代码：

```
<asp:DropDownList ID="DropDownListLocation" runat="server" AutoPostBack="true" OnSelectedIndexChanged="DropDownListLocation_OnSelectedIndexChanged" CssClass="editorFieldServerControl" ClientIDMode="Static"></asp:DropDownList> 
```

在“代码背后”页面中：

```
private void PopulateFacilityDropdown(List<FacilityAvailableByLocation> facilities, int? selectedID)
{
    DropDownListFacility.DataSource = facilities;
    DropDownListFacility.DataTextField = "FacilityName";
    DropDownListFacility.DataValueField = "FacilityID";
    DropDownListFacility.DataBind();            
    DropDownListFacility.Items.Insert(0, new System.Web.UI.WebControls.ListItem("", ""));                   

    if (selectedID.HasValue && selectedID.Value > 0)
        DropDownListFacility.SelectedIndex = facilities.FindIndex(b => b.FacilityID == selectedID.Value);
        else DropDownListFacility.SelectedIndex = 0;
    }
} 
```

基本上，设施列表中的每个设施都有我可以退出的 ID、名称、描述的属性。我只想能够在每个`<option>`渲染的标题上放置一个标题属性并将描述放入其中。或者能够为每个`<option>`标签添加一个自定义属性，如“数据描述”，然后我可以使用一点 jQuery 自己将标题添加到每个选项标签中，这很容易。

我怀念那些您可以循环浏览列表并手动输出自定义下拉代码的日子。

有任何想法吗？非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T03:40:12.687

You can manually add a title attribute to each list item like this. Give it a shot:

```
 private void PopulateFacilityDropdown(List<FacilityAvailableByLocation> facilities, int? selectedID)
    {
        DropDownListFacility.DataSource = facilities;
        DropDownListFacility.DataTextField = "FacilityName";
        DropDownListFacility.DataValueField = "FacilityID";
        DropDownListFacility.DataBind();            
        DropDownListFacility.Items.Insert(0, new System.Web.UI.WebControls.ListItem(String.Empty, String.Empty);                   

        foreach (FacilityAvailableByLocation f in facilities)
        {
            DropDownListFacility.Items.FindByValue(f.FacilityID).Attributes.Add("title", f.TitleDescription);
        }

        if (selectedID.HasValue && selectedID.Value > 0)
            DropDownListFacility.SelectedIndex = facilities.FindIndex(b => b.FacilityID == selectedID.Value);
            else DropDownListFacility.SelectedIndex = 0;
        }
    } 
```

f.TitleDescription would be the property you want the title to be.

# javascript - “[object Object]”作为参数传递而不是实际对象

> ID：12667223
> 
> 赞同：0
> 
> 时间：2012-10-01T03:34:33.407
> 
> 标签：javascript, ruby-on-rails, ajax, http, heroku

我将 Heroku 与 Ruby on Rails 应用程序一起使用，并从 Safari 运行。我有以下 Ajax 调用：

```
$.ajax({
    type : 'POST',
    url : '/test_page',
    data : {stuff: arr1},
    dataType : 'script'
}); 
```

`arr1`应该是一个对象数组。在此之前有一个`console.log`权利，它是：

```
[Object, Object, Object, Object, Object, ...] 
```

但是，当我进行此 ajax 调用时，服务器端出现错误。日志显示

```
2012-10-01T03:13:34+00:00 app[web.1]: Parameters: {"stuff"=>"[object Object]"}
2012-10-01T03:13:34+00:00 app[web.1]: WARNING: Can't verify CSRF token authenticity
2012-10-01T03:13:34+00:00 app[web.1]: NoMethodError (undefined method `to_hash' for "[object Object]":String):
2012-10-01T03:13:34+00:00 app[web.1]: Completed 500 Internal Server Error in 1ms 
```

我无法复制该错误 - 从那以后我每次尝试它时，它都运行良好，并且之前一直运行良好（无论如何）。这个电话甚至和我打了几十次的电话完全相同，因为它是我的测试用例之一，所以它与更改发送的数据没有任何关系。我真的很困惑——什么会导致该字符串有时被传递给服务器而不是对象？

我认为这可能与“无法验证 CSRF 令牌真实性”行有关，因为其他成功请求的日志中没有显示。

对于那些想知道的人来说`dataType: 'script'`，它在那里是因为响应是一个呈现的 js.erb 文件 - 请参阅[http://lathamcity.com/posts/ajaxInRails.html](http://lathamcity.com/posts/ajaxInRails.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T03:36:45.940

```
dataType : 'script' 
```

你确定这会工作..

尝试

```
dataType : 'json' 
```

还要确保对发送的数据使用 json.stringify

```
data : {"stuff" : JSON.stringify(arr1)}, 
```

确保您的密钥包含在引号中

# php - 使用 PHP 变量数组填充 javascript 数组

> ID：12667226
> 
> 赞同：0
> 
> 时间：2012-10-01T03:34:56.573
> 
> 标签：php, javascript, arrays, json

> **可能重复：**
> [Javascript 和 PHP 中的动态饼图数据](https://stackoverflow.com/questions/12666888/dynamic-pie-chart-data-in-javascript-and-php)

以下代码用于在 javascript 中填充饼图：

```
<script type="text/javascript">

    var agg = { label: 'Aggressive', pct: [60, 10, 6, 30, 14, 10] },
        bal = { label: 'Balanced',   pct: [24,  7, 2, 18, 13, 36] },
        mod = { label: 'Moderate',   pct: [12,  4, 2, 10, 11, 61] },
        inc = { label: 'Income',     pct: [ 0,  0, 0,  0,  0,100] },

</script> 
```

而不是`tm: [40, 60, 67, 30, 74, 50]`如上所示，我想将 6 个值中的每一个都设为 php 变量。喜欢：`tm: [$r1, $r2, $r3, $r4, $r5, $r6]`。我该怎么做呢？

我该怎么做？一个php数组或json编码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T03:38:55.847

是的，`json_encode`一个 PHP 数组：

```
var agg = <?php echo json_encode(array('label' => 'Aggressive', 'pct' => array($r1, $r2, ...))); ?>,
    bal = <?php echo json_encode(...); ?>,
    ... 
```

# haskell - 笛卡尔平面

> ID：12667227
> 
> 赞同：2
> 
> 时间：2012-10-01T03:35:02.873
> 
> 标签：haskell, functional-programming

我试图在 Haskell 中定义一个函数，它接受一个整数参数 c 并返回笛卡尔平面上所有点的列表，`(x/c,y/c)`其中`x`和`y`是整数。 `x/c`介于 -2 和 1 之间并且`y/r`介于 -1 和 1 之间

这是我到目前为止所得到的，我几乎可以肯定它是正确的，但是`=`当我特别在这一行运行它时，我在输入时遇到了解析错误：`cart xs ys c = [(y/c,x/c) | x <- xs, y <- ys]`

```
plane :: Int -> [a]
plane c = cart [-1*c .. 1*c] [-2*c .. 1*c] c
     cart xs ys c = [(y/c,x/c) | x <- xs, y <- ys] 
```

示例输出将是：`plane 1`将生成：

```
[(-2.0, -1.0), (-1.0, -1.0), ( 0.0, -1.0), ( 1.0, -1.0),
 (-2.0,  0.0), (-1.0,  0.0), ( 0.0,  0.0), ( 1.0,  0.0),
 (-2.0,  1.0), (-1.0,  1.0), ( 0.0,  1.0), ( 1.0,  1.0)] 
```

任何人都知道我该如何解决这个问题！谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T03:45:33.817

你错过了`where`，除了看起来你有一些类型错误。

1.  `[a]`太笼统了
2.  `/`仅适用于小数类型。

所以

```
plane :: Int -> [(Int,Int)]
plane c = cart [-1*c .. 1*c] [-2*c .. 1*c] c where
    cart xs ys c = [(y `div` c,x `div` c) | x <- xs, y <- ys] 
```

可能是你想要的。与您所拥有的东西相比，最小的变化或多或少是有效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T02:09:46.287

我就是这样做的。 `fromintegral`是一个类型“胶水”函数，它将类型类中的任何值转换为`Integral`类型类中的任何其他`Num`类型。结果类型必须是 in `RealFrac`(like `Double`or `Rational`) 才能使用`/`运算符。

```
plane :: (Integral a, RealFrac b) => a -> [(b,b)] 
plane d = [(fI y / fI d,fI x / fI d) | x <- [-2*d..d], y <- [-d..d]] 
    where fI = fromIntegral 
```

# jquery - 从前置 div 中删除 .img css

> ID：12667229
> 
> 赞同：0
> 
> 时间：2012-10-01T03:35:26.417
> 
> 标签：jquery, css, inheritance, children

好的，正如标题所说，我有一个预先添加并动态加载的 div。我遇到的问题是我不能在这个上拆分 css，因为它也解析整个字符串。用法是这样的：我在字符串的某处有一个@username。如果用户将其悬停，则带有信息的 div 将被添加到当前用户名之前。现在有一个问题，我也允许用户在这个文本中发布图像。由于自动链接器很灵活，它不知道图像大小和限制，我想就这样离开它！所以我定义了看起来像这样的css类：

```
.minpost img{ max-height: 30px; max-width: 30px; } 
```

当然不用我说这个属性也是被前置的div继承的。而我不想！像 !important 这样漂亮的小技巧对我不起作用。

啊，顺便说一句，我考虑了将图像设置为前置 div 中的背景的解决方案，但我想知道是否还有其他解决方案。所以我问你们。如果您需要更多信息，请问？！

--- 已编辑 --- [http://jsfiddle.net/UAgDA/43/](http://jsfiddle.net/UAgDA/43/) <--- 添加了一个显示问题的 jsfiddle

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T03:59:36.960

你需要在里面重置`max-width`和`max-height`到：`none``#message`

```
#message img {
    max-height: none;
    max-width: none;    
} 
```

# java - 如何从重定向的文件中读取

> ID：12667232
> 
> 赞同：1
> 
> 时间：2012-10-01T03:35:48.907
> 
> 标签：java, redirect

抱歉，这是一个简单的问题，我找不到我正在寻找的内容，可能是因为我不知道关键字是什么。

例如，我有一个 read.java，当我重定向文件时，它应该能够读取名为 quotes.txt 的文件中有多少个 A：read < quotes.txt

如何从 java 中的quotes.txt 中读取？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T03:39:40.247

You can use `new Scanner(System.in)`. It will be available as Standard Input Stream for `read`, represented by [`System.in`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#in), which is a [`InputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html).

You can also do

```
BufferedReader br = new BufferedReader(new InputStreamReader(System.in)); 
```

and use that `br`.

# java - 各种搜索算法的Big-O运行时间

> ID：12667234
> 
> 赞同：6
> 
> 时间：2012-10-01T03:36:01.997
> 
> 标签：java, big-o, code-analysis, asymptotic-complexity

如果数组中至少有两个值是，则该方法`hasTwoTrueValues`返回。为建议的所有三个实现提供 Big-O 运行时间。`true``boolean``true`

//**版本 1**

```
public boolean hasTwoTrueValues(boolean[] arr) {
    int count = 0;
    for(int i = 0; i < arr.length; i++)
        if(arr[i])
            count++;
        return count >= 2;
} 
```

//**版本 2**

```
public boolean hasTwoTrueValues(boolean[] arr) {
    for(int i = 0; i < arr.length; i++)
        for(int j = i + 1; j < arr.length; j++ )
            if(arr[i] && arr[j])
                return true;
} 
```

//**版本 3**

```
public boolean hasTwoTrueValues(boolean[] arr) {
    for(int i = 0; i < arr.length; i++)
        if(arr[i])
            for(int j = i + 1; j < arr.length; j++)
                if(arr[j])
                    return true;
                        return false;
} 
```

这些是我的答案：

*   **版本 1**是`O(n)`
*   **版本 2**是`O(n^2)`
*   **版本 3**是`O(n^2)`

我对这个 Big-O 表示法真的很陌生，所以如果我的答案是正确/不正确的，我需要指导。如果我错了，你能解释一下并帮助我学习吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T03:52:49.180

版本 1 非常简单并且线性运行，因此其运行时间平均为 O(n)。

版本 2 更有趣一些。它*平均*以 n(n-1) 运行，即 O(n ² )。这个循环有一个早期`return`，所以它肯定有可能早在前两个元素就中断。

第 3 版更棘手。你必须小心这一点。第二个循环只会在`arr[i]`is时运行`true`。然后，它的运行时间必须分为不同的类别。

*   如果数组的所有元素都是假的，那么你的运行时间将是 O(n)。
*   如果数组的一半元素为真，那么您将在 (n(n-1))/2 的条件下运行第二个循环，即 O(n ² )。
*   如果数组的所有元素都为真，那么您将在 O(n ² ) 中运行。您还将在前两个元素之后立即退出，但您仍然使用两个循环来执行操作。

可以肯定地说，版本 3 的*平均*和*最差*运行时间将是 O(n ² )。最好是 O(n)，这绝对是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T04:23:27.890

简而言之，**最坏情况的**运行时间是： 版本 1：`O(n)`
版本 2：`O(n^2)`
版本 3：`O(n)`

* * *

更详细的分析...

对于此算法，您必须考虑最佳情况、最坏情况和平均情况运行时才能进行有意义的比较。

对于它们中的每一个，以下应举例说明：

```
bestCase = [ true, true, ...] // the first two are true
worstCase = [ false, false, ..., false] // all are false
averageCase = [ true, ..., true, ..., false // second true value is found about half-way 
```

对于您的所有算法，最佳情况下的运行时间是`O(2)`，表示恒定时间。

在最坏的情况下，您的第一个算法是`O(n)`，表示线性运行时。但是，在最坏的情况下，您的第二种算法会非常具体地退化，因为在每一步中，您要检查的元素都会减少一个。您最终得到 summation `n + (n-1) + (n-2) + ...`，它将评估为`n(n-1)/2`哪个，正如您正确所说的那样，在 中`O(n^2)`，并以二次方增长。

在所有都为假的“最坏情况”中（正如我们将看到的，这实际上不是**版本 3**的最坏情况），您的第三个算法实际上在线性时间内运行，因为该`if`语句阻止了第二个循环运行.

事实证明，**版本 3**永远*不会*在二次时间中运行：它在平均和最坏的情况下是线性的，因为它线性扫描第一个，然后只在发现之后才`true`线性扫描其余的第二个，尽管它没有`true`甚至不工作！因为您的内部 for 循环中有两个返回，所以一旦遇到第一个值，如果下一个直接邻居是`true`，它将返回。但是，如果下一个直接邻居是，它会立即返回并且不检查任何其他值。这意味着在输入上：`true``true``false``false`

```
[ true, false, true ] 
```

**版本 3**一看到第二个 false 值就会返回 false。（从技术上讲，我在这里假设您希望`return false`在 for 循环内执行此操作，在这种情况下，您还需要添加`{ }`，同样使用您的第一个版本。虽然并非总是必要的，但它有助于澄清到底发生了什么，特别是因为这与您当前的缩进不匹配。当不存在时，循环/if 主体中仅包含紧随其后的语句。）我怀疑，即使正确实施，**版本 3*仍将具有线性的最坏情况运行时间, 在输入上：

```
[true, false, false, ..., false] 
```

第一个 true 将导致它`n`在内循环中扫描时间，但随后外循环将继续运行到 n 而不再次运行内循环，总共为您提供 2n-1 次操作，这当然是在`O(n)`.

如果您`{ }`是正确的并且只是您的缩进是错误的，那么这些分析可能需要稍微修改，但这是您需要应用于大 O 问题（以及一般的渐近分析）的那种思维方式。

# ruby-on-rails - 复杂表格产生错误

> ID：12667235
> 
> 赞同：0
> 
> 时间：2012-10-01T03:36:03.410
> 
> 标签：ruby-on-rails, controller

我正在开发一个应用程序，该应用程序允许学生创建一个学期的课程目录。我为用户创建了模型；课程; 主题和类别。用户可以有很多课程。每门课程可以有许多科目和类别。课程、科目和类别的表格包括以下内容：

```
Catalog:  user_id and course_id
Courses: user_id; coursedetail_id, subject_id and category_id 
Coursedetail:  name; description
Subject: name; description
Category: name; description 
```

这个想法是管理员可以创建课程列表；主题和类别，用户可以选择他们想要添加到目录中的课程。我将课程和课程详细信息分开，因为我设想课程详细信息会随着时间的推移而增长，并且课程表将允许我加入 user_id 和课程详细信息，以便在必要时进行报告。

我试图在复杂表单上关注 Ryan 的 railscast 认为我应该使用复杂表单并且有很多关系才能让事情正常工作 - 但我**在目录控制器中遇到错误 - 无法找到**我知道在表中的 catalog_id。我现在不确定是否要采用复杂的形式，或者我应该寻找另一个方向来获得适当的形式。任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T04:29:17.453

我决定朝着不同的方向前进，并觉得我提出的问题可能过于宽泛，无法得到直接的回应。为此，我深表歉意。将来我将确保问题是具体的，并由清晰的代码支持，以获得适当的反馈和响应。

# python - 只让创建者在 django 中编辑类别

> ID：12667240
> 
> 赞同：0
> 
> 时间：2012-10-01T03:36:51.933
> 
> 标签：python, django, m2m

在我的网络应用程序中，我在 a`Category`和 a之间建立了 m2m 关系`User`

```
class Category(models.Model):
    users = models.ManyToManyField(User,related_name='category_users')
    title = models.CharField(max_length=200)
    description = models.TextField() 
```

当用户尝试创建类别时，我会这样做

```
category,created = Category.objects.get_or_create(title__iexact=category_title,defaults={'title':category_title,'description':category_title}) 
```

我需要为用户提供一个编辑页面。`Category`我想提供它以便只有创建类别的人才能编辑描述。所以，我尝试在模型中添加一个创建者字段。

```
class Category(models.Model):
        users = models.ManyToManyField(User,related_name='category_users')
        title = models.CharField(max_length=200)
        description = models.TextField()
        creator = models.ForeignKey(User,related_name='category_creator') 
```

但是，这会导致运行`IntegrityError`when`get_or_create()`方法，因为`creator_id`为 null

```
...
category_title = category_title_form.cleaned_data['title']
category_title = category_title.strip()
if len(category_title)>0:
            category,created = Category.objects.get_or_create(title__iexact=category_title,defaults={'title':category_title,'description':category_title})
            if request.user not in category.users.all():
                category.users.add(request.user)                
                category.save()
            if created:
                category.creator = request.user
            category.save() 
```

有人可以告诉我是否有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T04:24:13.083

当用户创建一个类别时，您可以将该类别添加到用户的“类别集”中——

```
category, created = user.category_set.get_or_create(
    title__iexact=category_title,
    defaults={'title': category_title, 'description': category_title}
) 
```

通过 user.category_set 访问类别表，会自动维护 user_id 字段。

通过此调用只能检索用户的类别，如果它创建一个新类别，则将自动设置 user_id。

# r - R：带有ggplot2的条件标签

> ID：12667242
> 
> 赞同：2
> 
> 时间：2012-10-01T03:36:58.763
> 
> 标签：r, ggplot2, conditional

使用[这个问题](https://stackoverflow.com/questions/7364404/how-do-i-label-a-stacked-bar-chart-in-ggplot2-without-creating-a-summary-data-fr)的答案，我怎样才能有条件地绘制百分比标签，比如说我只希望它们在百分比小于 50% 时出现在图上？或者更好的是，如果我只想查看与一个类别相关的百分比？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:34:37.350

我从与您链接的解决方案略有不同的解决方案开始，因为我发现该示例中的语法有点模糊（尽管它更短）。然后我为标签及其 y 位置创建列，并使用`geom_text()`.

```
require(ggplot2)
require(plyr)

#set up the data frame, as in the previous example
cls.grp <- gl(n=4,k=20,labels=c("group a","group b","group c", "group d"))
ser <- sample(x=c("neg","pos"),size=80,replace=TRUE, prob=c(30,70))
syrclia <- data.frame(cls.grp,ser)

#create a data frame with the 'metadata' you will plot
ct <- ddply(syrclia, "cls.grp", count) #count the occurrences of each cls.group type
ct <- ddply(ct, "cls.grp", transform, frac=freq/sum(freq)*100) #calculate frequencies as percentages
ct$frac_to_print <- ""

cutoff <- 30 #define the cutoff, below which you will not plot percentages
ct$frac_to_print[which(ct$frac > cutoff)] <- paste(ct$frac[which(ct$frac>cutoff)], "%") 
ct <- ddply(ct, "cls.grp", transform, pos = cumsum(freq)) #calculate the position for each label

ggplot(ct, aes(x=cls.grp, y=freq)) + 
  geom_bar(aes(fill=ser)) + 
  geom_text(aes(x=cls.grp, y=pos, label=frac_to_print)) 
```

# windows - 为什么本地开发服务器无法使用 Yesod？

> ID：12667248
> 
> 赞同：4
> 
> 时间：2012-10-01T03:39:16.143
> 
> 标签：windows, haskell, windows-8, yesod

我在 Windows 8 上运行最新版本的 Yesod 和 Haskell 平台。

我用 yesod init 创建了一个新的脚手架项目，然后在项目目录中执行以下命令：

```
cabal install
yesod devel 
```

Yesod devel 回应

```
Devel application launched: http://localhost:3000 
```

但是，当我使用 Chrome 访问 localhost:3000 时，会出现以下错误：

```
Error 101 (net::ERR_CONNECTION_RESET): The connection was reset. 
```

这与随机 localhost 端口不同（仅提供以下内容）：

```
Oops! Google Chrome could not connect to localhost:3010 
```

任何想法为什么会出现这种情况以及我能做些什么来解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T07:56:57.910

Warp 中引入了一个导致 Windows 出现问题的错误，并在大约一周前修复。最新版本的 yesod 平台应该可以解决这个问题（它在我的测试中在 Windows 中正常工作）。

# javascript - Internet Explorer 中的 Google 地图呈现显示灰色框

> ID：12667249
> 
> 赞同：0
> 
> 时间：2012-10-01T03:39:30.653
> 
> 标签：javascript, html, css, internet-explorer, google-maps

我正在制作一张显示一些标记的简单地图。该代码似乎在 Chrome 和 Firefox 中运行良好，但不会在 IE 中呈现。这是我在运行代码时得到的图片：http: [//imageshack.us/photo/my-images/833/iemapgrey.png/](http://imageshack.us/photo/my-images/833/iemapgrey.png/)

没有 javascript 错误，至少在 IE 调试控制台中没有。这是代码：

```
 <script src="http://maps.google.com/maps?file=api&amp;v=2&amp;key={{=GOOGLEMAP_KEY}}" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
function load() {
  if (GBrowserIsCompatible()) {
    var map = new GMap2(document.getElementById("map"));
    map.addControl(new GSmallMapControl());
    map.addControl(new GMapTypeControl());
    map.setCenter(new GLatLng(-34.885931,-66.093750), 1);
    map.setZoom(map.getZoom()+5);
    map.enableScrollWheelZoom();
    // Create a base icon for all of our markers that specifies the
    // shadow, icon dimensions, etc.
    var baseIcon = new GIcon();
    baseIcon.shadow = "http://www.google.com/mapfiles/shadow50.png";
    baseIcon.iconSize = new GSize(20, 34);
    baseIcon.shadowSize = new GSize(37, 34);
    baseIcon.iconAnchor = new GPoint(9, 34);
    baseIcon.infoWindowAnchor = new GPoint(9, 2);
    baseIcon.infoShadowAnchor = new GPoint(18, 14);
    var blueIcon = new GIcon();
    blueIcon.image = "http://www.google.com/intl/en_us/mapfiles/ms/micons/blue-dot.png";
    blueIcon.shadow = "http://www.google.com/mapfiles/shadow50.png";
    blueIcon.iconSize = new GSize(37, 34);
    blueIcon.shadowSize = new GSize(37, 34);
    blueIcon.iconAnchor = new GPoint(9, 34);
    blueIcon.infoWindowAnchor = new GPoint(9, 2);
    blueIcon.infoShadowAnchor = new GPoint(18, 14);

    function createMarker(point, i, message) {
       // Set up our GMarkerOptions object
       if(i==0) markerOptions = { icon:blueIcon };
       else markerOptions= {}
       var marker = new GMarker(point, markerOptions);
       GEvent.addListener(marker, "click", function() {
         marker.openInfoWindowHtml(message);
       });
       return marker;
    }
    {{for row in sites:}}{{if row.latitude and row.longitude:}}
      var point = new GLatLng({{=row.latitude}},{{=row.longitude}});
      map.addOverlay(createMarker(point, 0, 'Direccion: {{=row.adress}}, Operador: {{=row.owner}} <br> <a href="site/{{=row.legacy_site_id}}">Ver Sitio</a>'));
    {{pass}}{{pass}}
 }
}
//]]>
</script> 
```

谢谢您的帮助！！

# iphone - 使用 youtube 播放 fails on iPhone, but still works for iPad under iOS 6 (both work fine on iOS 5)

> ID：12667250
> 
> 赞同：3
> 
> 时间：2012-10-01T03:39:32.093
> 
> 标签：iphone, iframe, uiwebview, youtube-api, ios6

I use the following HTML template with an to hand to a UIWebView. I understand that this is the supported way to play youtube videos.

```
<html>
<body>
    <!-- 1\. The <iframe> (and video player) will replace this <div> tag. -->
    <div id="player"></div>

    <script>
        // 2\. This code loads the IFrame Player API code asynchronously.
        var tag = document.createElement('script');
        tag.src = "http://www.youtube.com/player_api";
        var firstScriptTag = document.getElementsByTagName('script')[0];
        firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

        // 3\. This function creates an <iframe> (and YouTube player)
        //    after the API code downloads.
        var player;
        function onYouTubePlayerAPIReady() {
            player = new YT.Player('player', {
                                   playerVars: {'autoplay' : 1},
                                   height: 'VIDEO_HEIGHT',
                                   width: 'VIDEO_WIDTH',
                                   videoId: 'VIDEO_ID',
                                   events: {
                                   'onReady': onPlayerReady,
                                   'onStateChange': onPlayerStateChange
                                   }
                                   });
        }

        // 4\. The API will call this function when the video player is ready.
        function onPlayerReady(event) {
            event.target.playVideo();
        }

        // 5\. The API calls this function when the player's state changes.
        //    The function indicates that when playing a video (state=1),
        //    the player should play for six seconds and then stop.
        var done = false;
        function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.PLAYING && !done) {
                setTimeout(stopVideo, 6000);
                done = true;
            }
            if (event.data == YT.PlayerState.ENDED) {
                event.target.clearVideo();
                done = true;
            }
        }
        function stopVideo() {
            player.stopVideo();
        }
        </script>
</body>
</html> 
```

Obviously, I substitute in the dynamic values for the HEIGHT, WIDTH and VIDEOID params. This has always worked fine under iOS 5 on iPhone and iPad. Now under iOS 6, when the user taps the triangle the video appears to download and try to start, then gives up. Here is what appears in the logfile:

```
> 2012-09-30 23:27:48.759 xxxxx[6219:c07] [MPAVController] Autoplay: Enabling autoplay
> 2012-09-30 23:27:48.759 xxxxx[6219:c07] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1)
> 2012-09-30 23:27:48.761 xxxxx[6219:c07] setting movie path: http://o-o---preferred---sn-ab5e6nll---v24---lscache1.c.youtube.com/videoplayback?upn=ag6FiVPe_XY&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&fexp=907064%2C908457%2C908310%2C914072%2C922401%2C920704%2C912806%2C913419%2C913546%2C913556%2C919349%2C919351%2C925109%2C919003%2C912706&key=yt1&expire=1349086864&itag=18&ipbits=8&sver=3&ratebypass=yes&mt=1349062032&ip=96.232.106.90&mv=m&source=youtube&ms=au&cp=U0hTTlBTVF9LTkNOM19ITVhJOnRob1gwVHFmQWUw&id=04d71fcbfe79a176&signature=33A43FD457B9FC5DD70284826E7D9BF113F9C0BB.9BC87BDCF97DFCB64F967D2CAD1051D2FC80DAC0 
```

Same results in Simulator (all supported models) and hardware device (iPhone 4s). Oddly, it still works just fine on iPad 2 (simulator and hardware), here is the logging:

```
> 2012-09-30 23:32:01.586 xxxxx[6390:c07] [MPAVController] Autoplay: Enabling autoplay
> 2012-09-30 23:32:01.586 xxxxx[6390:c07] [MPAVController] Autoplay: Skipping autoplay, disabled (for current item: 0, on player: 1)
> 2012-09-30 23:32:01.588 xxxxx[6390:c07] setting movie path: http://o-o---preferred---sn-ab5e6nll---v24---lscache1.c.youtube.com/videoplayback?upn=x7-Ydawtba4&sparams=cp%2Cid%2Cip%2Cipbits%2Citag%2Cratebypass%2Csource%2Cupn%2Cexpire&fexp=920921%2C926600%2C915704%2C914071%2C922401%2C920704%2C912806%2C913419%2C913546%2C913556%2C919349%2C919351%2C925109%2C919003%2C912706&key=yt1&expire=1349086864&itag=18&ipbits=8&sver=3&ratebypass=yes&mt=1349062271&ip=96.232.106.90&mv=m&source=youtube&ms=au&cp=U0hTTlBTVF9LTkNOM19ITVhJOmVQbjRzVUhBbFpF&id=04d71fcbfe79a176&signature=CD05405B78D1CD7987FE5B9F41DD2C15943BBC2E.863966BDB04003866C6740046C0C2499A0CC4DDD 
```

I've seen some similar questions here recently, but so far no one has suggested what might be be happening. Can anybody suggest what might be going on?

Regards, -MpK-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T02:10:53.177

您的 html 在模拟器和设备（iPhone 5）中按原样加载在 iOS 6 上的 UIWebView 中对我来说效果很好（使用 HEIGHT、WIDTH 和 VIDEOID 替换）。

问题可能是间歇性的 YouTube 或网络问题吗？之后您是否再次尝试过或尝试过其他视频 ID？

干杯，克里斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T06:15:53.817

我遇到了同样的问题。对我来说，这是因为我在 viewWillAppear 中加载了视频。加载 youtube 视频后再次调用 viewWillAppear。我通过更改我的代码来修复它（viewWillAppear 在视频加载后仅在 ios 6 中调用）

# javascript - Twitter Bootstrap - 在页面下拉时停止所有响应式导航栏？

> ID：12667253
> 
> 赞同：0
> 
> 时间：2012-10-01T03:39:41.783
> 
> 标签：javascript, html, twitter-bootstrap

我在一个页面上有几个响应式导航栏，但是当我点击下拉导航栏的小图标时，屏幕上的所有导航栏都会崩溃。当我只想要 1 时，如何防止所有导航栏崩溃？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T03:54:13.160

我`stopPropagation()`与 jQuery 一起使用。请参阅[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)。jQuery 有许多事件处理程序方法，例如`preventDefault()`可用于防止事件仅命中特定元素的方法。

# php - Unit testing with Zend_Session_Namespace

> ID：12667254
> 
> 赞同：2
> 
> 时间：2012-10-01T03:39:49.563
> 
> 标签：php, unit-testing, zend-framework, session, phpunit

I'm writing unit tests for a login system - but having difficulties with interacting with the Zend_Session_Namespace object. I'm using the Zend_Test extensions to the PHPUnit framework (ZF 1.10, PHPUnit 3.4.5)

Test

```
public function testAuthFailure()
{
  $request = $this->getRequest();
  $request->setMethod("POST");
  $request->setPost("username", "testUser");
  $request->setPost("password", "testPassword");

  $this->dispatch("/auth/login");

  $this->assertModule("auth");
  $this->assertController("login");
  $this->assertAction("validate");

  $loginSession = new Zend_Session_Namespace("login");
  $this->assertFalse(is_null($loginSession));
  $this->assertObjectHasAttribute("messages", $loginSession);
  $this->assertFalse(empty($loginSession->messages));
  $this->arrayHasKey("error", $loginSession->messages["error"]);
  $this->assertEquals($loginSession->messages["error"], "Could not log you in with that username and/or password");
} 
```

Current controller/action code

```
public function validateAction()
{
  $loginSession = new Zend_Session_Namespace("login");

  if (!$this->buildForm()->isValid($this->getRequest()->getPost())) {
    $loginSession->messages["error"][] = "Please enter your username and password";
  }

  $loginSession->messages["error"][] = "Could not contact the authentication server";

  $this->getResponse()
    ->setHttpResponseCode(303)
    ->setHeader("Location", "/auth/login");
} 
```

My unit test is failing at `$this->assertObjectHasAttribute("messages", $loginSession);` - whereas I would expect it to fail on the actual content of the message.

I have these lines in my phpunit bootstrap:

```
Zend_Session::$_unitTestEnabled = true;
Zend_Session::start(); 
```

How do I confirm that the session message is correctly set?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T07:30:06.867

今天重新审视这个问题时，有一个完全令人震惊的时刻：

我的 Zend_Session_Namespace 上的“消息”属性实际上是一个神奇的属性（使用 __get 和 __set 访问），并且无法通过反射识别（这是 PHPUnit 在调用 assertObjectHasAttribute 时测试该属性是否存在的方式）。

从测试中删除断言允许它继续，我的测试现在在预期的点失败，而不是过早地失败。

# sqlite - How to Create Web sql database offline

> ID：12667258
> 
> 赞同：1
> 
> 时间：2012-10-01T03:40:36.457
> 
> 标签：sqlite, cordova

i am Creating a project in phonegap and i want to use sql database i already create my database in sql lite
i want to know how to convert sql lite to websql and is there any application to create web sql (How to use web sql and where it is located in phonegap or chrome )

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T06:00:08.100

@ravi，

嘿，PhoneGap 正在开发 WebView，这是在 HTML5 上创建的。你知道html没有直接支持sqlite。因此，在 phonegap 内置功能中。

在 Phonegap 在应用程序目录上创建第一次数据库并始终由 Syntex 使用此数据库。欲了解更多信息，请阅读[此](http://docs.phonegap.com/en/1.2.0/phonegap_storage_storage.md.html)内容。

您可以创建一个新项目并在 index.html 中仅复制此 Syntex。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Contact Example</title>

    <script type="text/javascript" charset="utf-8" src="phonegap-1.2.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for PhoneGap to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // Populate the database 
    //
    function populateDB(tx) {
        tx.executeSql('DROP TABLE IF EXISTS DEMO');
        tx.executeSql('CREATE TABLE IF NOT EXISTS DEMO (id unique, data)');
        tx.executeSql('INSERT INTO DEMO (id, data) VALUES (1, "First row")');
        tx.executeSql('INSERT INTO DEMO (id, data) VALUES (2, "Second row")');
    }

    // Query the database
    //
    function queryDB(tx) {
        tx.executeSql('SELECT * FROM DEMO', [], querySuccess, errorCB);
    }

    // Query the success callback
    //
    function querySuccess(tx, results) {
        var len = results.rows.length;
        console.log("DEMO table: " + len + " rows found.");
        for (var i=0; i<len; i++){
            console.log("Row = " + i + " ID = " + results.rows.item(i).id + " Data =  " + results.rows.item(i).data);
        }
    }

    // Transaction error callback
    //
    function errorCB(err) {
        console.log("Error processing SQL: "+err.code);
    }

    // Transaction success callback
    //
    function successCB() {
        var db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
        db.transaction(queryDB, errorCB);
    }

    // PhoneGap is ready
    //
    function onDeviceReady() {
        var db = window.openDatabase("Database", "1.0", "PhoneGap Demo", 200000);
        db.transaction(populateDB, errorCB, successCB);
    }

    </script>
  </head>
  <body>
    <h1>Example</h1>
    <p>Database</p>
  </body>
</html> 
```

# java - Java libraries to determine voice note in wav file

> ID：12667260
> 
> 赞同：0
> 
> 时间：2012-10-01T03:40:41.640
> 
> 标签：java, waveform, voice-recording

Is any library written in java to determine voice note in wav file,

illustration: I record my voice then result the wav file, then I can know what is the note my voice.

This [website](http://www.seventhstring.com/tuner/tuner.html) has implemented this scenario:

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T03:57:11.613

您可能需要为此组合您自己的自定义类。我环顾四周，找不到任何专门为此目的的库，但创建自己的库应该不难。

以下是不同音符的频率列表： [http ://www.seventhstring.com/resources/notefrequencies.html](http://www.seventhstring.com/resources/notefrequencies.html)

您可以创建一个使用这些数字的类并将声音与每个频率进行比较以查看它是哪个频率。

将 wav 文件输入转换为频率将需要 FFT。这是一个问题的链接，该问题解释了如何做到这一点。 [Wav 文件作为频率图像](https://stackoverflow.com/questions/4214214/wav-file-as-frequency-image)

# android - Gettin an error with custom alertdialog onbackpress

> ID：12667262
> 
> 赞同：1
> 
> 时间：2012-10-01T03:40:44.180
> 
> 标签：android, back, android-alertdialog

I want to exit my app with an my customized alert dialog showing first to ask if user is sure they want to exit. am getting an error with the code I have below. By the way I used getparent() since the activity is within an activity group:

```
 @Override
    public void onBackPressed() {
        LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
        View view = inflater.inflate(R.layout.grocerylistdelete, null);
        AlertDialog.Builder builder = new AlertDialog.Builder(getParent());
        builder.setView(view);

        Button yes = (Button) view.findViewById(R.id.buttonYes);
        yes.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Intent i = new Intent(Intent.ACTION_MAIN);
                i.addCategory(Intent.CATEGORY_HOME);
                i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);
                finish();    

            }
        });

        Button no = (Button) view.findViewById(R.id.buttonNo);
        no.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Intent i = new Intent(getApplicationContext(), RecipeList.class);
                finish();
                startActivity(i);

            }
        });

        AlertDialog alert = builder.create();
        alert.show();

            }

    } 
```

Here is the error in LogCat:

```
10-01 11:45:39.795: E/AndroidRuntime(1549): FATAL EXCEPTION: main
10-01 11:45:39.795: E/AndroidRuntime(1549): java.lang.NullPointerException
10-01 11:45:39.795: E/AndroidRuntime(1549):     at com.mexican.recipes.RecipeList.onBackPressed(RecipeList.java:139)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at   android.app.Activity.onKeyUp(Activity.java:1898)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at android.view.KeyEvent.dispatch(KeyEvent.java:1280)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at android.app.Activity.dispatchKeyEvent(Activity.java:2078)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1663)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1687)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1120)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at android.app.Activity.dispatchKeyEvent(Activity.java:2073)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1663)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at android.widget.TabHost.dispatchKeyEvent(TabHost.java:278)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:789)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1687)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1120)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at android.app.Activity.dispatchKeyEvent(Activity.java:2073)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1663)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at android.view.ViewRoot.deliverKeyEventToViewHierarchy(ViewRoot.java:2560)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at android.view.ViewRoot.handleFinishedEvent(ViewRoot.java:2535)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1867)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at android.os.Handler.dispatchMessage(Handler.java:99)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at android.os.Looper.loop(Looper.java:123)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at android.app.ActivityThread.main(ActivityThread.java:3683)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at  java.lang.reflect.Method.invokeNative(Native Method)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at  java.lang.reflect.Method.invoke(Method.java:507)
 10-01 11:45:39.795: E/AndroidRuntime(1549):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-01 11:45:39.795: E/AndroidRuntime(1549):     at dalvik.system.NativeStart.main(Native Method) 
```

EDIT: Here is the whole code for RecipeList.java:

```
public class RecipeList extends ListActivity{
Typeface font;
Typeface bold;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.recipelist);

    font = Typeface.createFromAsset(RecipeList.this.getAssets(), "Book Antiqua.ttf");

    TextView recipe = (TextView) findViewById(R.id.textViewrecipe);

    recipe.setTypeface(font, Typeface.BOLD);
        setListAdapter(new MyAdapter(RecipeList.this, android.R.layout.simple_list_item_1,R.id.textViewCategory,getResources().getStringArray(R.array.categories)));
        this.getListView().setCacheColorHint(0);

}
private class MyAdapter extends ArrayAdapter<String> {

    public MyAdapter(Context context, int resource, int textViewResourceId,
            String[] strings) {
        super(context, resource, textViewResourceId, strings);
    }

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View row = inflater.inflate(R.layout.recipelistrow, parent, false);
    String [] items = getResources().getStringArray(R.array.categories);

    ImageView iv = (ImageView) row.findViewById(R.id.imageViewRecipe);
    TextView tvCategory = (TextView) row.findViewById(R.id.textViewCategory);
    TextView tvCategoryDesc = (TextView) row.findViewById(R.id.textViewcategorydesc);

    tvCategory.setTypeface(font, Typeface.BOLD);
    tvCategory.setText(items[position]);

    if(items[position].equals("Burritos")){
        iv.setImageResource(R.drawable.ic_list_burritos);
        tvCategoryDesc.setText("Burritos, with tasty combination of beef and beans, make it an enticing dish for your family and friends");
    }if(items[position].equals("Tacos")){
        iv.setImageResource(R.drawable.ic_list_tacos);
        tvCategoryDesc.setText("Taco counts a favorite for its versatility and variety. It's perfect for meat lovers and veggie lovers too!");
    }if(items[position].equals("Enchiladas")){
        iv.setImageResource(R.drawable.ic_list_enchiladas);
        tvCategoryDesc.setText("Enchilada makes the perfect match for your favorite salsa. Make it a bit spicy. It's awesome!");
    }if(items[position].equals("Fajitas")){
        iv.setImageResource(R.drawable.ic_list_fajitas);
        tvCategoryDesc.setText("Fajita is well-loved for its exquisite and delightful filling. It's a choice of either beef or boneless chicken.");
    }if(items[position].equals("Quesadillas")){
        iv.setImageResource(R.drawable.ic_list_quesadillas);
        tvCategoryDesc.setText("Quesadillas are filled with oozing goodness and mouthwatering flavors that you will find it hard to resist.");
    }if(items[position].equals("Salads")){
        iv.setImageResource(R.drawable.ic_list_salads);
        tvCategoryDesc.setText("Eat healthy and feel healthy with your protein-rich salads. Cut-off your carbs with this Mexican dish.");
    }if(items[position].equals("Chilis")){
        iv.setImageResource(R.drawable.ic_list_chili);
        tvCategoryDesc.setText("Make an extraordinary appetizer out of your chili con carne and enjoy its tempting flavors.");
    }if(items[position].equals("Other Delicacies")){
        iv.setImageResource(R.drawable.ic_list_otherdelicacies);
        tvCategoryDesc.setText("Learn more about the Mexican recipes that are sinfully good!");
    }
    return row;

    }
}
    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        Intent i = new Intent(this, SubRecipeList.class);
        i.putExtra("id", id);

        View view = TabGroupActivity.group.getLocalActivityManager()
                .startActivity("show_city", i
                .addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP))
                .getDecorView();

                TabGroupActivity.group.replaceView(view);

    }

    public void grocerylist (View v){
        Intent intent = new Intent(RecipeList.this, GroceryList.class);
        startActivity(intent);
    }
    public void recipe (View v){

        Intent i = new Intent(RecipeList.this, RecipeList.class);
        startActivity(i);
    }
    public void more (View v){

        Intent i = new Intent(RecipeList.this, MoreApps.class);
        startActivity(i);
    }

    @Override
    public void onBackPressed() {
        LayoutInflater inflater = (LayoutInflater) getSystemService(LAYOUT_INFLATER_SERVICE);
        View view = inflater.inflate(R.layout.grocerylistdelete, null);
        AlertDialog.Builder builder = new AlertDialog.Builder(getParent());
        builder.setView(view);

        Button yes = (Button) view.findViewById(R.id.buttonYes);
        yes.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Intent i = new Intent(Intent.ACTION_MAIN);
                i.addCategory(Intent.CATEGORY_HOME);
                i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(i);
                finish();    

            }
        });

        Button no = (Button) view.findViewById(R.id.buttonNo);
        no.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Intent i = new Intent(getApplicationContext(), RecipeList.class);
                finish();
                startActivity(i);

            }
        });

        AlertDialog alert = builder.create();
        alert.show();

            }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:25:05.040

替换这一行

```
AlertDialog.Builder builder = new AlertDialog.Builder(getParent()); 
```

和

```
AlertDialog.Builder builder = new AlertDialog.Builder(yourActivityName.this); 
```

很难知道以这种方式使用对话框的问题..

```
public void showDialog() {

    final Dialog dialog = new Dialog(yourActivityName.this);
    dialog.setContentView(R.layout.grocerylistdelete);
    dialog.setTitle("Save the changes?");

    dialog.show();
    Button yes = (Button) dialog.findViewById(R.id.buttonYes);
    yes.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            //Do youur work
        }
    });
    Button no = (Button) dialog.findViewById(R.id.buttonNo);
    no.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            //Do your work
        }
    });

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T04:23:05.500

一旦您发现了 RecipeList.java 中的错误，请尝试使用 ALertDialog 框，如下所示：

```
 new AlertDialog.Builder(this)
    .setIcon(android.R.drawable.ic_dialog_alert)
    .setTitle("Quit")
    .setMessage("Do you really want to quit?")
    .setPositiveButton("Yes", new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog,int which){
                       //your code for positive button click

            }
                    })
    .setNegativeButton("No", new OnClickListener(){
        @Override
        public void onClick(DialogInterface dialog, int which){
             //your code for negative button click

        }

    })
    .show(); 
```

# android - Between AudioTrack.write and AudioFlinger.read

> ID：12667265
> 
> 赞同：1
> 
> 时间：2012-10-01T03:40:55.953
> 
> 标签：android, pcm, audiotrack, audioflinger

I am checking the possibility of this way, if I got any silly thinking, please correct me. I would like to enhance the audio quality. According to some knowledge from web, I found that When an `audio/music/sound` is played , the `AudioTrack` will `write()` PCM data to the sharedbuffer, and then `AudioFlinger` will `read()` the PCM data form this sharedbuffer. The idea is to use a service to intercept the PCM data after it is wrote by `AudioTrack.write()`, modify the PCM data, and then restore it back to the sharedbuffer for `AudioFlinger` to `read()`; Could anyone help/correct me, please?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:07:23.677

我不太了解 AudioFlinger，但是要读取 PCM 数据，您可以使用 AudioRecord 并写入 PCM 数据，您可以使用 AUdioTrack 播放声音。

# google-app-engine - Reading and writing large files to and from Google Drive or Cloud Storage using Google App Engine

> ID：12667266
> 
> 赞同：0
> 
> 时间：2012-10-01T03:40:56.710
> 
> 标签：google-app-engine, google-drive-api, google-cloud-storage

I was wondering if Google App Engine supports reading and writing large files ( example, text files of size more than 2GB ) into and from Google Drive or Cloud Storage ?

What problems can I expect?

I'm using the Python 2,7 Google App Engine SDK by the way.

* * *

Updates.

I intend to read up to a million rows of data from Google's Data Store ( or maybe the new NDB ), and save the data into a text file for further processing either on Google Cloud Compute or some third party services like PiCloud.

The data is basically a network relationship and it goes like this:

```
A -> B
B -> C
A -> D 
```

The above means that A is linked to B, B is linked to C and A is linked to D and so on...

As i have over a million edges, i think i might have to use the task queue or cron job to do this?

So after i processed the relationships, i'll have another text file which contains some scores between each pair of nodes, which i will than write back into the database.

Best Regards.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T09:51:12.600

是的 - 问题是您打算如何编写文件？

您可以使用[gsutil](https://developers.google.com/storage/docs/gsutil)或[create_upload_url直接上传到 Cloud Storage，也可以使用此](https://developers.google.com/appengine/docs/python/blobstore/functions)[文件 API](https://developers.google.com/appengine/docs/python/googlestorage/)从您的应用程序写入。

如果您使用的是文件 API，那么您需要以不大于 32MB 的块读取或写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T03:46:18.507

应用引擎有一个 API，或者我想你可以使用 REST 云 API。我刚开始，但这里是 api 页面 [https://developers.google.com/appengine/docs/python/googlestorage/](https://developers.google.com/appengine/docs/python/googlestorage/)

# backbone.js - Instantiate view on backbone Router?

> ID：12667273
> 
> 赞同：0
> 
> 时间：2012-10-01T03:42:07.007
> 
> 标签：backbone.js, backbone-views

Can anyone help me understand this error? TIA

> TypeError: AppView is not a constructor [Break On This Error] var apView = new AppView();

```
define([
    'jquery',
   'backbone',
   'collections/Directory',
   'views/app',
   'common'
   ]   , function( $, Backbone, DirectoryCollection,AppView , Common ) {

var Workspace = Backbone.Router.extend({
    routes:{            
        "filter/:type": "urlFilter"
    },      

urlFilter: function (type) {            
        var apView = new AppView();
        apView.filterType = type;
        apView.trigger("change:filterType");          
    },

});
return Workspace;

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:42:09.227

AppView 是否在范围内或附加到窗口对象，以及扩展 Backbone.View？

# jakarta-ee - struts2 文本字段的标记

> ID：12667275
> 
> 赞同：1
> 
> 时间：2012-10-01T03:42:34.027
> 
> 标签：jakarta-ee, struts2

开发演示应用程序。

**错误：**无法解析推送标签下的属性。姓名和年龄

**形式：**

```
<s:form action="addStudentAction" method="POST">
    <s:push value="student">
        <s:textfield name="name" label="Name : " value="" />
        <s:textfield name="age" label="Age : " value=""/>
    </s:push>
    <s:submit/>
</s:form> 
```

**动作与型号：**

```
public class StudentAction extends ActionSupport implements ModelDriven {

    Student student = new Student();

    @Autowired
    StudentService studentService;

    public Object getModel() {
        return student;
    }

    public String execute(){
        return SUCCESS;
    }

    public String addStudent() throws Exception {
        student.setCreatedDate(new Date());
        studentService.add(student);
        return SUCCESS;
    }

    public Student getStudent() {
        return student;
    }

    public void setStudent(Student student) {
        this.student = student;
    }

}

package com.myapp.model;

import java.util.Date;

public class Student {

    private Long id;
    private String name;
    private Integer age;
    private Date createdDate;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public Integer getAge() {
        return age;
    }

    public void setAge(Integer age) {
        this.age = age;
    }

    public Date getCreatedDate() {
        return createdDate;
    }

    public void setCreatedDate(Date createdDate) {
        this.createdDate = createdDate;
    }

} 
```

**已编辑**

```
public class StudentAction extends ActionSupport implements ModelDriven<Student> {

    Student student = new Student();
    List<Student> studentList = new ArrayList<Student>();

    @Autowired
    StudentService studentService;

    public Student getModel() {
        return student;
    }

    public String execute(){
        return SUCCESS;
    }

    public String addStudent() throws Exception {
        student.setCreatedDate(new Date());
        studentService.add(student);
        return SUCCESS;
    }

} 
```

*仍然没有解决属性。查看选项。model.name 将解析该属性。*

![jsp](../Images/47583486ff70cc7e9b76c4779f300cea.png)

```
**struts.xml**

 <struts>
        <constant name="struts.devMode" value="true"/>

        <package name="default" namespace="/" extends="struts-default">

            <action name="addStudentAction" class="com.myapp.action.StudentAction" method="addStudent">
                <result name="success" type="redirectAction">listStudentAction</result>
            </action>

            <action name="listStudentAction" class="com.myapp.action.StudentAction" method="listAllStudents">
                <result name="success">/pages/student.jsp</result>
            </action>

        </package>

    </struts> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T04:08:08.893

在渲染期间访问变量时使用推送。在您的情况下，您将文本字段中的值设置为空，并且由于这就是您在推送中所做的一切，因此很明显推送标签没有做任何有用的事情。

我认为您可能打算在视图中“推动”学生，这相当于附加“学生”。到所有变量。这不是 push 标签的作用，尽管我必须承认这样的标签会很有用，并且可能会节省大量的打字时间。我们可以看到动作的目标实现了模型驱动（并且模型是学生），这有效地将学生推到了堆栈的顶部，所以只需删除推送标签就可以了。

以下是忠告：

您的操作有一个 get/set Student...如果它实现了 ModelDriven，它不应该。

你的StudentAction类，应该叫AddStudentAction。

应该删除 addStudent 方法，并将功能移到 execute() 中，即：

```
public String execute() throws Exception {
    student.setCreatedDate(new Date());
    studentService.add(student);
    return SUCCESS;
} 
```

您应该实现一个验证方法`public void validate()`（除非您在 xml 或注释中这样做）。

最后，这是个人偏好，但是当您实现 ModelDriven 时，它有助于提供类型，即：（`implements ModelDriven<Student>`然后 IDE 希望知道创建正确的 getter/setter）。

# xml - XSLT 1.0, Nmap XML, display part of a large attribute value, not sure best method to template

> ID：12667278
> 
> 赞同：1
> 
> 时间：2012-10-01T03:43:11.907
> 
> 标签：xml, xslt, xslt-1.0, nmap

I'm again working with Nmap XML, and while my XSLT is improving... I'm constantly reminded of my current limitations.

An example of the Nmap XML,

```
<?xml version="1.0"?>
<nmaprun scanner="nmap" args="nmap -sU -sS -sV -O -p T:20-23,25-26,53,79-81,88,106,110-111,113,119,135-139,143-144,161-162,179,199,389,427,443-445,465,513-515,543-544,548,554,587,631,646,705,873,990,993,995,1025-1029,1110,1433,1720,1723,1755,1900,1993,2000-2001,2049,2121,2717,3000,3128,3306,3389,3986,4899,5000,5009,5051,5060,5101,5190,5354,5357,5432,5631,5666,5800,5900,6000-6001,6646,7070,8000,8008-8009,8080-8081,8443,8888,9100,9999-10000,32768,49152-49157,U:53,67,69,111,123,137-138,161-162,199,705,1993,5353 -oX - 192.168.100.1 192.168.100.3 192.168.100.5 192.168.100.6 192.168.100.7 192.168.100.8 192.168.100.9 192.168.100.10 192.168.100.13 192.168.100.15 192.168.100.16 192.168.100.17 192.168.100.18 192.168.100.20 192.168.100.21 192.168.100.24 192.168.100.25" start="1341847779" startstr="Mon Jul  9 11:29:39 2012" version="5.51.6" xmloutputversion="1.03">
  <scaninfo type="syn" protocol="tcp" numservices="105" services="20-23,25-26,53,79-81,88,106,110-111,113,119,135-139,143-144,161-162,179,199,389,427,443-445,465,513-515,543-544,548,554,587,631,646,705,873,990,993,995,1025-1029,1110,1433,1720,1723,1755,1900,1993,2000-2001,2049,2121,2717,3000,3128,3306,3389,3986,4899,5000,5009,5051,5060,5101,5190,5354,5357,5432,5631,5666,5800,5900,6000-6001,6646,7070,8000,8008-8009,8080-8081,8443,8888,9100,9999-10000,32768,49152-49157"/>
  <scaninfo type="udp" protocol="udp" numservices="13" services="53,67,69,111,123,137-138,161-162,199,705,1993,5353"/>
  <verbose level="0"/>
  <debugging level="0"/>
  <host starttime="1341847779" endtime="1341854043">
    <status state="up" reason="echo-reply"/>
    <address addr="192.168.100.3" addrtype="ipv4"/>
    <hostnames>
      <hostname name="sub2.example.com" type="PTR"/>
    </hostnames>
    <ports>
      <extraports state="filtered" count="102">
        <extrareasons reason="no-responses" count="102"/>
      </extraports>
      <port protocol="tcp" portid="22">
        <state state="open" reason="syn-ack" reason_ttl="64"/>
        <service name="ssh" product="OpenSSH" version="4.3" extrainfo="protocol 2.0" method="probed" conf="10"/>
      </port>
      <port protocol="tcp" portid="80">
        <state state="open" reason="syn-ack" reason_ttl="64"/>
        <service name="http" product="Apache httpd" version="2.2.3" extrainfo="(CentOS)" method="probed" conf="10"/>
      </port>
      <port protocol="tcp" portid="631">
        <state state="closed" reason="reset" reason_ttl="64"/>
        <service name="ipp" method="table" conf="3"/>
      </port>
      <port protocol="udp" portid="5353">
        <state state="open|filtered" reason="no-response" reason_ttl="0"/>
        <service name="zeroconf" method="table" conf="3"/>
      </port>
    </ports>
    <os>
      <portused state="open" proto="tcp" portid="22"/>
      <portused state="closed" proto="tcp" portid="631"/>
      <osclass type="general purpose" vendor="Linux" osfamily="Linux" osgen="2.6.X" accuracy="100"/>
      <osmatch name="Linux 2.6.11 - 2.6.18" accuracy="100" line="30082"/>
    </os>
    <uptime seconds="3662901" lastboot="Mon May 28 03:46:31 2012"/>
    <distance value="2"/>
    <tcpsequence index="258" difficulty="Good luck!" values="E1B9999,E6F5E488,274272DD,94D932E2,B9CF9CA8,F7C309B"/>
    <ipidsequence class="All zeros" values="0,0,0,0,0,0"/>
    <tcptssequence class="1000HZ" values="DA505426,DA50548C,DA5054F2,DA505558,DA5055BD,DA505621"/>
    <times srtt="1424" rttvar="772" to="100000"/>
  </host>
  <host starttime="1341847779" endtime="1341854075">
    <status state="up" reason="echo-reply"/>
    <address addr="192.168.100.5" addrtype="ipv4"/>
    <hostnames>
      <hostname name="sub3.example.com" type="PTR"/>
    </hostnames>
    <ports>
      <extraports state="filtered" count="100">
        <extrareasons reason="no-responses" count="100"/>
      </extraports>
      <port protocol="tcp" portid="21">
        <state state="open" reason="syn-ack" reason_ttl="64"/>
        <service name="ftp" product="ProFTPD" version="1.3.3c" ostype="Unix" method="probed" conf="10"/>
      </port>
      <port protocol="tcp" portid="22">
        <state state="open" reason="syn-ack" reason_ttl="64"/>
        <service name="ssh" product="OpenSSH" version="4.3" extrainfo="protocol 2.0" method="probed" conf="10"/>
      </port>
      <port protocol="tcp" portid="80">
        <state state="open" reason="syn-ack" reason_ttl="64"/>
        <service name="http" product="Apache httpd" version="2.2.3" extrainfo="(CentOS)" method="probed" conf="10"/>
      </port>
      <port protocol="udp" portid="5353">
        <state state="open|filtered" reason="no-response" reason_ttl="0"/>
        <service name="zeroconf" method="table" conf="3"/>
      </port>
    </ports>
    <os>
      <portused state="open" proto="tcp" portid="21"/>
      <portused state="closed" proto="tcp" portid="631"/>
      <osclass type="general purpose" vendor="Linux" osfamily="Linux" osgen="2.6.X" accuracy="100"/>
      <osmatch name="Linux 2.6.11 - 2.6.18" accuracy="100" line="30082"/>
    </os>
    <uptime seconds="2854295" lastboot="Wed Jun  6 12:23:17 2012"/>
    <distance value="2"/>
    <tcpsequence index="261" difficulty="Good luck!" values="D0B97175,E38B93CA,E038B6D0,E754B4D7,4F3B8565,2E948D89"/>
    <ipidsequence class="All zeros" values="0,0,0,0,0,0"/>
    <tcptssequence class="1000HZ" values="AA1DFC6D,AA1DFCD3,AA1DFD39,AA1DFD9F,AA1DFE04,AA1DFE69"/>
    <times srtt="1561" rttvar="679" to="100000"/>
  </host>
  <host starttime="1341847779" endtime="1341854050">
    <status state="up" reason="echo-reply"/>
    <address addr="192.168.100.6" addrtype="ipv4"/>
    <hostnames>
      <hostname name="sub4.example.com" type="PTR"/>
    </hostnames>
    <ports>
      <extraports state="filtered" count="100">
        <extrareasons reason="no-responses" count="100"/>
      </extraports>
      <port protocol="tcp" portid="21">
        <state state="open" reason="syn-ack" reason_ttl="64"/>
        <service name="ftp" product="ProFTPD" method="probed" conf="10"/>
      </port>
      <port protocol="tcp" portid="22">
        <state state="open" reason="syn-ack" reason_ttl="64"/>
        <service name="ssh" product="OpenSSH" version="4.3" extrainfo="protocol 2.0" method="probed" conf="10"/>
      </port>
      <port protocol="tcp" portid="80">
        <state state="open" reason="syn-ack" reason_ttl="64"/>
        <service name="http" product="Apache httpd" version="2.2.3" extrainfo="(CentOS)" method="probed" conf="10"/>
      </port>
      <port protocol="tcp" portid="443">
        <state state="open" reason="syn-ack" reason_ttl="48"/>
        <service name="http" product="Apache httpd" tunnel="ssl" method="probed" conf="10"/>
        <script id="ssl-cert" output="Subject: commonName=sub4.example.comm&#10;Issuer: commonName=SSL CA/organizationName=SSL, Inc./countryName=US&#10;Public Key type: rsa&#10;Public Key bits: 2048&#10;Not valid before: 2012-06-03 22:50:03&#10;Not valid after:  2014-06-07 10:21:17&#10;MD5:   hexbits&#10;SHA-1:   hexbits"/>
      </port>
      <port protocol="udp" portid="5353">
        <state state="open|filtered" reason="no-response" reason_ttl="0"/>
        <service name="zeroconf" method="table" conf="3"/>
      </port>
    </ports>
    <os>
      <portused state="open" proto="tcp" portid="21"/>
      <portused state="closed" proto="tcp" portid="631"/>
      <osclass type="general purpose" vendor="Linux" osfamily="Linux" osgen="2.6.X" accuracy="100"/>
      <osmatch name="Linux 2.6.11 - 2.6.18" accuracy="100" line="30082"/>
    </os>
    <uptime seconds="2854295" lastboot="Wed Jun  6 12:23:17 2012"/>
    <distance value="2"/>
    <tcpsequence index="264" difficulty="Good luck!" values="D5B1C96,FE5DF509,C56A40B8,DF3C5676,63A52AF7,D9A58AAE"/>
    <ipidsequence class="All zeros" values="0,0,0,0,0,0"/>
    <tcptssequence class="1000HZ" values="AA1DFC6D,AA1DFCD3,AA1DFD39,AA1DFD9F,AA1DFE04,AA1DFE69"/>
    <times srtt="1608" rttvar="697" to="100000"/>
  </host>
  <runstats>
    <finished time="1341854092" timestr="Mon Jul  9 13:14:52 2012" elapsed="6314.31" summary="Nmap done at Mon Jul  9 13:14:52 2012; 25 IP addresses (5 hosts up) scanned in 156.31 seconds" exit="success"/>
    <hosts up="119" down="29" total="148"/>
  </runstats>
</nmaprun> 
```

I'm iterating per host, and am having trouble with this particular attribute,

```
<script id="ssl-cert" output="Subject: commonName=sub4.example.comm&#10;Issuer: commonName=SSL CA/organizationName=SSL, Inc./countryName=US&#10;Public Key type: rsa&#10;Public Key bits: 2048&#10;Not valid before: 2012-06-03 22:50:03&#10;Not valid after:  2014-06-07 10:21:17&#10;MD5:   hexbits&#10;SHA-1:   hexbits"/> 
```

### UPDATE

This is the altered XSL File, I was able to finish it. Please recommend any improvements, as I'm still learning XSL.

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="text" encoding="utf-8"/>
    <xsl:strip-space elements="*"/>
    <xsl:variable name="delimiter" select="','"/>

    <xsl:template match="/nmaprun/host">

        <xsl:value-of select="address[@addrtype='ipv4']/@addr"/>
        <xsl:value-of select="$delimiter"/>

        <xsl:apply-templates select="hostnames"/>
        <xsl:value-of select="$delimiter"/>

        <xsl:apply-templates select="os"/>
        <xsl:value-of select="$delimiter"/>

        <xsl:apply-templates select="ports"/>
        <xsl:text>&#10;</xsl:text>
    </xsl:template>

    <xsl:template match="hostnames">

        <xsl:value-of select="hostname[@type='PTR']/@name"/>
    </xsl:template>

    <xsl:template match="os">

        <xsl:value-of select="osclass[1]/@osfamily"/>
    </xsl:template>

    <xsl:template match="ports">

        <xsl:apply-templates select="port[@portid='443' and @protocol='tcp']/script[@id='ssl-cert' and @output]"/>
    </xsl:template>

    <xsl:template match="port[@portid='443' and @protocol='tcp']/script[@id='ssl-cert' and @output]">

        <xsl:variable name="vText" select="@output"/>
        <xsl:value-of select="concat(443,'_',substring-before(substring-after($vText, '&#10;Public Key type: '),'&#10;'),'_',substring-before(substring-after($vText, '&#10;Public Key bits: '),'&#10;'))"/>
    </xsl:template>

</xsl:stylesheet> 
```

This is post-transformation output,

```
192.168.100.3,sub2.example.com,Linux,
192.168.100.5,sub3.example.com,Linux,
192.168.100.6,sub4.example.com,Linux,443_rsa_2048 
```

The 443 is the @portid, which contains the script id="ssl-cert" @output.
The portid could be something other than 443, namely whatever was specified in the original scope.

The rsa is Public Key type:, which is contained in that crazy @output. Public Key type could be something other than rsa, such as dsa.

the 2048 is Public Key bits:, also contained in the @output. Additionally their could be more or less Public Key bits, than 2048\.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:55:23.957

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" >
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match=
 "/nmaprun
    /host
      /ports
            /port
              [@portid='443'
              and @protocol='tcp']
                  /script[@id='ssl-cert' and @output]

 ">

   <xsl:variable name="vText" select="@output"/>
   <xsl:value-of select=
   "concat('rsa ',
       substring-before
           (substring-after
              (substring-after($vText, 'rsa'),
               'bits: '),
            '&#10;')
      )"
    />
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<nmaprun scanner="nmap" args="nmap -sU -sS -sV -O -p T:20-23,25-26,53,79-81,88,106,110-111,113,119,135-139,143-144,161-162,179,199,389,427,443-445,465,513-515,543-544,548,554,587,631,646,705,873,990,993,995,1025-1029,1110,1433,1720,1723,1755,1900,1993,2000-2001,2049,2121,2717,3000,3128,3306,3389,3986,4899,5000,5009,5051,5060,5101,5190,5354,5357,5432,5631,5666,5800,5900,6000-6001,6646,7070,8000,8008-8009,8080-8081,8443,8888,9100,9999-10000,32768,49152-49157,U:53,67,69,111,123,137-138,161-162,199,705,1993,5353 -oX - 192.168.100.1 192.168.100.3 192.168.100.5 192.168.100.6 192.168.100.7 192.168.100.8 192.168.100.9 192.168.100.10 192.168.100.13 192.168.100.15 192.168.100.16 192.168.100.17 192.168.100.18 192.168.100.20 192.168.100.21 192.168.100.24 192.168.100.25" start="1341847779" startstr="Mon Jul  9 11:29:39 2012" version="5.51.6" xmloutputversion="1.03">
      <scaninfo type="syn" protocol="tcp" numservices="105" services="20-23,25-26,53,79-81,88,106,110-111,113,119,135-139,143-144,161-162,179,199,389,427,443-445,465,513-515,543-544,548,554,587,631,646,705,873,990,993,995,1025-1029,1110,1433,1720,1723,1755,1900,1993,2000-2001,2049,2121,2717,3000,3128,3306,3389,3986,4899,5000,5009,5051,5060,5101,5190,5354,5357,5432,5631,5666,5800,5900,6000-6001,6646,7070,8000,8008-8009,8080-8081,8443,8888,9100,9999-10000,32768,49152-49157"/>
      <scaninfo type="udp" protocol="udp" numservices="13" services="53,67,69,111,123,137-138,161-162,199,705,1993,5353"/>
      <verbose level="0"/>
      <debugging level="0"/>
      <host starttime="1341847779" endtime="1341854043">
        <status state="up" reason="echo-reply"/>
        <address addr="192.168.100.3" addrtype="ipv4"/>
        <hostnames>
          <hostname name="sub2.example.com" type="PTR"/>
        </hostnames>
        <ports>
          <extraports state="filtered" count="102">
            <extrareasons reason="no-responses" count="102"/>
          </extraports>
          <port protocol="tcp" portid="22">
            <state state="open" reason="syn-ack" reason_ttl="64"/>
            <service name="ssh" product="OpenSSH" version="4.3" extrainfo="protocol 2.0" method="probed" conf="10"/>
          </port>
          <port protocol="tcp" portid="80">
            <state state="open" reason="syn-ack" reason_ttl="64"/>
            <service name="http" product="Apache httpd" version="2.2.3" extrainfo="(CentOS)" method="probed" conf="10"/>
          </port>
          <port protocol="tcp" portid="631">
            <state state="closed" reason="reset" reason_ttl="64"/>
            <service name="ipp" method="table" conf="3"/>
          </port>
          <port protocol="udp" portid="5353">
            <state state="open|filtered" reason="no-response" reason_ttl="0"/>
            <service name="zeroconf" method="table" conf="3"/>
          </port>
        </ports>
        <os>
          <portused state="open" proto="tcp" portid="22"/>
          <portused state="closed" proto="tcp" portid="631"/>
          <osclass type="general purpose" vendor="Linux" osfamily="Linux" osgen="2.6.X" accuracy="100"/>
          <osmatch name="Linux 2.6.11 - 2.6.18" accuracy="100" line="30082"/>
        </os>
        <uptime seconds="3662901" lastboot="Mon May 28 03:46:31 2012"/>
        <distance value="2"/>
        <tcpsequence index="258" difficulty="Good luck!" values="E1B9999,E6F5E488,274272DD,94D932E2,B9CF9CA8,F7C309B"/>
        <ipidsequence class="All zeros" values="0,0,0,0,0,0"/>
        <tcptssequence class="1000HZ" values="DA505426,DA50548C,DA5054F2,DA505558,DA5055BD,DA505621"/>
        <times srtt="1424" rttvar="772" to="100000"/>
      </host>
      <host starttime="1341847779" endtime="1341854075">
        <status state="up" reason="echo-reply"/>
        <address addr="192.168.100.5" addrtype="ipv4"/>
        <hostnames>
          <hostname name="sub3.example.com" type="PTR"/>
        </hostnames>
        <ports>
          <extraports state="filtered" count="100">
            <extrareasons reason="no-responses" count="100"/>
          </extraports>
          <port protocol="tcp" portid="21">
            <state state="open" reason="syn-ack" reason_ttl="64"/>
            <service name="ftp" product="ProFTPD" version="1.3.3c" ostype="Unix" method="probed" conf="10"/>
          </port>
          <port protocol="tcp" portid="22">
            <state state="open" reason="syn-ack" reason_ttl="64"/>
            <service name="ssh" product="OpenSSH" version="4.3" extrainfo="protocol 2.0" method="probed" conf="10"/>
          </port>
          <port protocol="tcp" portid="80">
            <state state="open" reason="syn-ack" reason_ttl="64"/>
            <service name="http" product="Apache httpd" version="2.2.3" extrainfo="(CentOS)" method="probed" conf="10"/>
          </port>
          <port protocol="udp" portid="5353">
            <state state="open|filtered" reason="no-response" reason_ttl="0"/>
            <service name="zeroconf" method="table" conf="3"/>
          </port>
        </ports>
        <os>
          <portused state="open" proto="tcp" portid="21"/>
          <portused state="closed" proto="tcp" portid="631"/>
          <osclass type="general purpose" vendor="Linux" osfamily="Linux" osgen="2.6.X" accuracy="100"/>
          <osmatch name="Linux 2.6.11 - 2.6.18" accuracy="100" line="30082"/>
        </os>
        <uptime seconds="2854295" lastboot="Wed Jun  6 12:23:17 2012"/>
        <distance value="2"/>
        <tcpsequence index="261" difficulty="Good luck!" values="D0B97175,E38B93CA,E038B6D0,E754B4D7,4F3B8565,2E948D89"/>
        <ipidsequence class="All zeros" values="0,0,0,0,0,0"/>
        <tcptssequence class="1000HZ" values="AA1DFC6D,AA1DFCD3,AA1DFD39,AA1DFD9F,AA1DFE04,AA1DFE69"/>
        <times srtt="1561" rttvar="679" to="100000"/>
      </host>
      <host starttime="1341847779" endtime="1341854050">
        <status state="up" reason="echo-reply"/>
        <address addr="192.168.100.6" addrtype="ipv4"/>
        <hostnames>
          <hostname name="sub4.example.com" type="PTR"/>
        </hostnames>
        <ports>
          <extraports state="filtered" count="100">
            <extrareasons reason="no-responses" count="100"/>
          </extraports>
          <port protocol="tcp" portid="21">
            <state state="open" reason="syn-ack" reason_ttl="64"/>
            <service name="ftp" product="ProFTPD" method="probed" conf="10"/>
          </port>
          <port protocol="tcp" portid="22">
            <state state="open" reason="syn-ack" reason_ttl="64"/>
            <service name="ssh" product="OpenSSH" version="4.3" extrainfo="protocol 2.0" method="probed" conf="10"/>
          </port>
          <port protocol="tcp" portid="80">
            <state state="open" reason="syn-ack" reason_ttl="64"/>
            <service name="http" product="Apache httpd" version="2.2.3" extrainfo="(CentOS)" method="probed" conf="10"/>
          </port>
          <port protocol="tcp" portid="443">
            <state state="open" reason="syn-ack" reason_ttl="48"/>
            <service name="http" product="Apache httpd" tunnel="ssl" method="probed" conf="10"/>
            <script id="ssl-cert" output="Subject: commonName=sub4.example.comm&#10;Issuer: commonName=SSL CA/organizationName=SSL, Inc./countryName=US&#10;Public Key type: rsa&#10;Public Key bits: 2048&#10;Not valid before: 2012-06-03 22:50:03&#10;Not valid after:  2014-06-07 10:21:17&#10;MD5:   hexbits&#10;SHA-1:   hexbits"/>
          </port>
          <port protocol="udp" portid="5353">
            <state state="open|filtered" reason="no-response" reason_ttl="0"/>
            <service name="zeroconf" method="table" conf="3"/>
          </port>
        </ports>
        <os>
          <portused state="open" proto="tcp" portid="21"/>
          <portused state="closed" proto="tcp" portid="631"/>
          <osclass type="general purpose" vendor="Linux" osfamily="Linux" osgen="2.6.X" accuracy="100"/>
          <osmatch name="Linux 2.6.11 - 2.6.18" accuracy="100" line="30082"/>
        </os>
        <uptime seconds="2854295" lastboot="Wed Jun  6 12:23:17 2012"/>
        <distance value="2"/>
        <tcpsequence index="264" difficulty="Good luck!" values="D5B1C96,FE5DF509,C56A40B8,DF3C5676,63A52AF7,D9A58AAE"/>
        <ipidsequence class="All zeros" values="0,0,0,0,0,0"/>
        <tcptssequence class="1000HZ" values="AA1DFC6D,AA1DFCD3,AA1DFD39,AA1DFD9F,AA1DFE04,AA1DFE69"/>
        <times srtt="1608" rttvar="697" to="100000"/>
      </host>
      <runstats>
        <finished time="1341854092" timestr="Mon Jul  9 13:14:52 2012" elapsed="6314.31" summary="Nmap done at Mon Jul  9 13:14:52 2012; 25 IP addresses (5 hosts up) scanned in 156.31 seconds" exit="success"/>
        <hosts up="119" down="29" total="148"/>
      </runstats>
</nmaprun> 
```

**产生想要的正确结果：**

```
rsa 2048 
```

# php - 如何覆盖类公共静态函数？

> ID：12667279
> 
> 赞同：1
> 
> 时间：2012-10-01T03:43:23.600
> 
> 标签：php, class, function, static, public

如何在不编辑该文件的情况下覆盖类公共静态函数？假设我有一个类文件名 Display 并且在该类内部有一个名为 body open 的公共静态函数。

```
class Display {
    public static function body_open() {
        echo "\n" . '</head><!-- End <head> -->' . "\n\n";
        echo '<body class="' . self::body_class() . '">' . "\n\n";
        do_action('headway_body_open');
        echo "\n" . '<div id="zurbwrap">' . "\n";
        do_action('headway_whitewrap_open');
        do_action('headway_page_start');
    }

    public static function body_close() {
        echo "\n\n";
        do_action('headway_whitewrap_close');
        echo '</div><!-- #zurbwrap -->' . "\n";
        do_action('headway_body_close');
        echo "\n" . '</body>';
    }
} 
```

假设我想更改 body_open 公共静态函数的 div 包装器。如何在不触及核心类文件的情况下做到这一点？有没有办法覆盖它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T03:54:39.007

如果您使用的是 PHP 5.3+，则可以使用后期静态绑定：[http ://php.net/manual/en/language.oop5.late-static-bindings.php](http://php.net/manual/en/language.oop5.late-static-bindings.php)

5.3 之前的任何内容都意味着您可能必须重新考虑该特定类的当前实现/架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T03:56:35.330

如果您使用的是 PHP 5.3+，请使用[后期静态绑定。](http://www.php.net/manual/en/language.oop5.late-static-bindings.php)

# symfony - Symfony 2 多个应用程序？

> ID：12667282
> 
> 赞同：11
> 
> 时间：2012-10-01T03:43:55.787
> 
> 标签：symfony

这似乎是与 Symfony2 相关的最可怕的话题，因为经过一周的搜索和测试，我仍然无法找到答案。

简而言之，我正在构建一个包含多个子域的应用程序，我希望为所有子域使用不同的配置，同时从 /src 共享多个捆绑包，更重要的是，导入中央配置和路由（以及每个应用程序自己的)

我走上了创建单独的 /app 目录、AppKernal.php 文件和引导文件的道路。这个主要问题在另一个问题中有详细说明，该问题没有收到任何答案（不是我责怪任何人 TBH :D）。 [Symfony2 用于子域路由的多个配置和路由文件](https://stackoverflow.com/questions/12632702/symfony2-multiple-config-and-routing-files-for-subdomain-routing)

我找到了关于此事的讨论，Fabian 甚至参与了这个： [https ://groups.google.com/forum/?fromgroups=#!topic/symfony-devs/yneojUuFiqw](https://groups.google.com/forum/?fromgroups=#!topic/symfony-devs/yneojUuFiqw)

这个讨论是关于 github 的 PR 以在 2.2 版中提供支持（我听说还有 6 个月） [https://github.com/symfony/symfony/pull/3378](https://github.com/symfony/symfony/pull/3378)

有没有人以前做过这个？这个过程是否容易解释？是否有任何信息可以帮助解决这个问题？

我几乎处于看起来这根本不可能的阶段。对于像 Symfony 这样被吹捧的系统，我觉得这真的很奇怪，尤其是当 Symfony1.4 似乎很容易做到这一点时。

**更新**

感谢您的回复。挑战在于，有一个配置层次结构。这些配置依次导入自己的 routing.yml 文件。

例如：域[http://testing.api.mydomain.com](http://testing.api.mydomain.com)将包括以下配置：

config_api.yml -> config_testing.yml -> config_dev.yml -> config.yml

都导入自己的 routing.yml 文件。但是只加载了 config_api.yml 中的那个。似乎框架：路由器：配置选项覆盖了其他配置文件中以前的用法，而不是扩展。

平心而论，应用程序代码的位置无关紧要。具有分层路由的分层配置似乎是问题。

干杯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-08T10:58:56.617

Multiple applications projects can be achieved by splitting your code in multiple Kernels.

You can then benefit:

*   multiple web roots (useful for differents domains)
*   shared & specific config (via imports)
*   clean separation of Bundles...

I have described the whole process here: [http://jolicode.com/blog/multiple-applications-with-symfony2](http://jolicode.com/blog/multiple-applications-with-symfony2) and you can find an example distribution here: [https://github.com/damienalexandre/symfony-standard](https://github.com/damienalexandre/symfony-standard)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-06-13T17:36:43.200

抱歉弄坏了...

我只想说我也研究了 Symfony2 的多个应用程序结构。从 2.4 版本开始，当路由支持[基于主机名的路由](http://symfony.com/doc/current/components/routing/hostname_pattern.html)时，不再需要多个应用程序。

你现在需要做的就是将你的“应用程序”分成不同的包，比如`AcmeSiteBundle`and `AcmeApiBundle`，然后在`app/config/routing.yml`：

```
acme_site:
    host:     "www.{domain}"
    resource: "@AcmeSiteBundle/Resources/config/routing.yml"
    prefix:   /
    defaults:
        domain: "%domain%"
    requirements:
        domain: "%domain%"

acme_api:
    host:     "api.{domain}"
    resource: "@AcmeApiBundle/Resources/config/routing.yml"
    prefix:   /
    defaults:
        domain: "%domain%"
    requirements:
        domain: "%domain%" 
```

记得`domain`设置参数`app/config/parameters.yml`

```
parameters:
    .....
    domain: example.com 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-01T10:55:28.750

您可以使用 testing/Dev 示例创建不同的配置：

***第 1 步*** 创建与子域一样多的 web/app.php 文件。

```
web/app_subdomainx.php 
```

***第 2 步*** 在每个 app_subdomain_X.php 文件中更改配置：

```
$kernel = new AppKernel('subdomainx', false); 
```

***步骤 3*** 创建与您的环境匹配的配置文件

```
config_subdomainx.yml
security_subdomainx.yml 
```

***第4步***

通过访问您的特定域

/web/app_subdomainx.php

**PS：**

保留 config.yml 用于通用配置（如数据库连接）并将 config.yml 包含到 config_subdomainx.yml

```
imports:
    - { resource: config.yml } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-26T08:43:46.823

也许你可以试试这个包，它在同一个应用程序和数据库上处理多个域网站： [https](https://github.com/AppVentus/MultiDomainBundle) ://github.com/AppVentus/MultiDomainBundle 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T15:03:48.680

基本上 Fabien 是对的，没有理由拥有多个应用程序，如果您真的需要不同的应用程序，它可能是一个不同的项目。捆绑包和库可以像您在网络上看到的任何其他捆绑包一样轻松共享。然后，您可以在每个项目的应用程序部分中拥有属于您称为“应用程序”的每个东西的一小部分设置。如果他们共享整个代码，那么这只是每个子域的配置层次结构的问题，考虑到您想要共享配置的某些部分，这可能是您的情况。

Symfony 有很多方法可以让你重新利用非常好的代码，但是这个框架并不意味着有很多应用程序，如果你想尝试破解它，继续，但是你不再使用这个框架了。这就是为什么你找不到例子，不是因为它很可怕，它不会那么难修改，它只是很难看，IMO。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T09:55:37.490

您可以尝试在 github 上找到一些东西。我找到了以下应该执行此操作的 Bundle。[Imikay RouterBundle](https://github.com/imikay/RouterBundle "路由器捆绑")

# javascript - 如何在 jCrop 中实现 2:1 的比例？

> ID：12667287
> 
> 赞同：-3
> 
> 时间：2012-10-01T03:44:35.657
> 
> 标签：javascript, css, jcrop

j作物比例有限？如果宽度为 2px，高度为 2px。我想要宽高比 2:1。如何编辑 jCrop？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T03:45:47.827

你可以通过`setOption`方法做到这一点

```
jcrop_api.setOptions(
{
    aspectRatio: 2/1
}); 
```

# c++ - C++ 软件中 Python API 的成本是多少？

> ID：12667293
> 
> 赞同：1
> 
> 时间：2012-10-01T03:45:41.950
> 
> 标签：c++, python, api

我正在尝试为一些 C++ 调用制作的一些 Python API，但我发现性能没有下降。实际上，我认为仅用 C++ 编写的等效应用程序有点慢/滞后。

特别是，我在 C++ 中尝试[了 Pyside](http://qt-project.org/wiki/PySide)和一些 QT 应用程序。

现在我知道 GUI 喜欢对动态绑定有很好支持的语言，但我对 Python 内部的了解并不多：是否有一些解释为什么 Pyside 应用程序至少与 C++ 等效应用程序一样快？

如果我在我的 C++ 程序中提供 Python API，成本会是多少？另一种间接？

PS
python 是否为跨平台开发提供了一些本机窗口框架？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T04:05:34.087

冒着被否决的风险，我将提供一个非常粗略、有点主观的假设。

QT 虽然用途非常广泛，但并没有完全提供极快的 GUI API。它的抽象级别有相当大的成本。我们谈论的是每个小部件、每个布局等的堆分配。看看 QListWidget 以及 QListWidgetItem 本身是一个单独分配的、相当复杂的对象的事实。我曾经不得不分析一个开发人员的代码——逻辑被怀疑很慢，但我发现几乎整个 6 秒的操作都花在了创建一个包含数千个列表条目的 QListWidget 上。这是在 C++ 中的。

在没有看到您的代码和 QT 用法的情况下，我对此的想法是 QT GUI 的整体开销使得 C++ 和 Python 等语言之间的差异可以忽略不计。

现在不那么值得商榷的是，通过 Python 使用 QT 的效率比在 C++ 中使用它要高得多，在 C++ 中我们必须使用预处理的信号和插槽等来处理 MOC。你可能需要更多地关注这一点而不是使用一种语言与另一种语言的 GUI 框架的性能差异。

> PS python 是否为跨平台开发提供了一些本机窗口框架？

[http://wiki.python.org/moin/GuiProgramming](http://wiki.python.org/moin/GuiProgramming)

# javascript - 使用 HTML5 拖放，有没有办法获取已删除 URL 的页面标题？

> ID：12667294
> 
> 赞同：2
> 
> 时间：2012-10-01T03:45:45.557
> 
> 标签：javascript, html, drag-and-drop

目前我可以从浏览器的地址栏中拖动，然后拖放到另一个浏览器窗口中。到目前为止，我只能读取已删除项目的 URL。删除的 url 项目是否包含页面标题？（你会在拖动标题时看到它，所以我想知道它是否包含它。）或者有没有办法在 JavaScript 中引用第一个窗口以获得标题？（即。mywindow.title）

# jquery - 如果使用 fnAddData 添加数据，Jquery DataTables 搜索框不会返回任何结果？

> ID：12667296
> 
> 赞同：0
> 
> 时间：2012-10-01T03:45:47.250
> 
> 标签：jquery, datatables

我使用 ajax 调用从服务器获取数据数组，然后使用 fnAddData 将其添加到我的数据表中，它可以很好地显示数据，问题是当我在搜索框上键入任何内容时，表显示没有匹配的行.. 我猜它与 fnAddData 有关吗？

这是我的代码：

 `````
$oTbl = $('#tbl').dataTable({
    "bJQueryUI": true,
    "sPaginationType": "full_numbers"
});

$.ajax({
    url: "Fn.php",
    type: "POST",
    data: {fn: "readData"},
    cache: false,
    success: function (res) {
        $oTbl.fnClearTable();
        $oTbl.fnAddData(JSON.parse(res));
    }
}); 
````  `* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T04:06:52.403

```
Json Example:  {readData:[{"id":1,"name":"clearing House"}]       

dTable = $('#tbl').dataTable( {
    "bJQueryUI": true,
    "sPaginationType": "full_numbers",       
    "bProcessing": true,       
    "sAjaxSource": "Fn.php",  //your url      
    "sAjaxDataProp": "readData", //your json obj
        "aoColumns": [
                      { "mDataProp": "id", "bVisible":false },
                      { "sTitle":"Provider Name", "mDataProp": "name" }
                     ]                       
    });

 Hope this helps u... 
`````

# android - 带有选择器的自定义 Android 按钮不加载 bakground

> ID：12667297
> 
> 赞同：0
> 
> 时间：2012-10-01T03:45:49.880
> 
> 标签：android, android-layout, android-button

我在`drawable`文件夹中有这个自定义的 Android 按钮，带有一个选择器，可以为单击的按钮加载不同的图像

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/bt_blue_click" android:state_pressed="true"/>
    <item android:drawable="@drawable/bt_blue_unclick"/>
</selector> 
```

有时工作正常，有时不显示按钮的背景。

我也尝试过添加该行

```
<item android:drawable="@drawable/bt_blue_unclick" android:state_pressed="false"/> 
```

（因为未单击按钮时不会加载背景中的 PNG 图像。）

我无法弄清楚这个奇怪问题的原因是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T06:03:52.440

尝试这个...

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android" >
     <item android:drawable="@drawable/bt_blue_click" android:state_pressed="true"/>
    <item android:drawable="@drawable/bt_blue_unclick"/>

</selector> 
```

它在我的情况下运作良好..！

# java - Java Bean调用Java函数并将其传递给Jsp

> ID：12667299
> 
> 赞同：0
> 
> 时间：2012-10-01T03:45:59.970
> 
> 标签：java, jsp, javabeans

大家好，我有一个 LoginServlet，它具有登录用户的功能，但是我有一个 jsp 页面，其中包含我要使用的样式。我不确定如何在 login.jsp 中使用 LoginServlet 中的功能

这是我的 LoginServlet 的全部代码，我知道我已经编写代码来显示一个页面，但我需要使用这个 jsp 页面来显示。这是我得到的一个单项作业，它是我们使用 JSP 进行显示的要求的一部分。

```
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.servlet.RequestDispatcher;

/**
 * Servlet implementation class LoginServlet
 */
@WebServlet("/LoginServlet")
public class LoginServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#HttpServlet()
     */
    public LoginServlet() {
        super();
        // TODO Auto-generated constructor stub
    }

    private void sendLoginForm(HttpServletResponse response, 
              boolean withErrorMessage) 
              throws ServletException, IOException {

              response.setContentType("text/html"); 
              PrintWriter out = response.getWriter(); 
              out.println("<HTML>"); 
              out.println("<HEAD>"); 
              out.println("<TITLE>Login</TITLE>"); 
              out.println("</HEAD>"); 
              out.println("<BODY>"); 
              out.println("<CENTER>"); 

              if (withErrorMessage) 
                out.println("Login failed. Please try again.<BR>"); 

              out.println("<BR>"); 
              out.println("<BR><H2>Login Page</H2>"); 
              out.println("<BR>"); 
              out.println("<BR>Please enter your user name and password."); 
              out.println("<BR>"); 
              out.println("<BR><FORM METHOD=POST>"); 
              out.println("<TABLE>"); 
              out.println("<TR>"); 
              out.println("<TD>User Name:</TD>"); 
              out.println("<TD><INPUT TYPE=TEXT NAME=uniid></TD>"); 
              out.println("</TR>"); 
              out.println("<TR>"); 
              out.println("<TD>Password:</TD>"); 
              out.println("<TD><INPUT TYPE=PASSWORD NAME=password></TD>"); 
              out.println("</TR>"); 
              out.println("<TR>"); 
              out.println("<TD ALIGN=RIGHT COLSPAN=2>"); 
              out.println("<INPUT TYPE=SUBMIT VALUE=Login></TD>"); 
              out.println("</TR>"); 
              out.println("</TABLE>"); 
              out.println("</FORM>"); 
              out.println("</CENTER>"); 
              out.println("</BODY>"); 
              out.println("</HTML>"); 
            } 

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        sendLoginForm(response, false); 

    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    public void doPost(HttpServletRequest request, 
              HttpServletResponse response) 
              throws ServletException, IOException {  
                String uniid = request.getParameter("uniid"); 
                String password = request.getParameter("password"); 
                if (login(uniid, password)) {
                  /*RequestDispatcher rd = 
                    request.getRequestDispatcher("AnotherServlet"); 
                  rd.forward(request, response); */
                    response.sendRedirect("home_student.jsp"); 

                } 
                else {
                  sendLoginForm(response, true); 
                } 

    }

     boolean login(String uniid, String password) {
            try {
              Class.forName("com.mysql.jdbc.Driver");
              Connection con = 
                DriverManager.getConnection("jdbc:mysql://localhost:3306/wae","root",""); 
              System.out.println("got connection"); 

              Statement s = con.createStatement(); 
              String sql = "SELECT uniid FROM user" + 
                " WHERE uniid='" + uniid + "'" + 
                " AND password='" + password + "'"; 
              ResultSet rs = s.executeQuery(sql); 
              if (rs.next()) {
                return true; 
              } 
                rs.close(); 
                s.close(); 
                con.close(); 
            } 
            catch (ClassNotFoundException e) {
              System.out.println(e.toString()); 
            } 
            catch (SQLException e) {
              System.out.println(e.toString()); 
            } 
            catch (Exception e) {
              System.out.println(e.toString()); 
            } 
            return false; 
          }

        } 
```

这是我的jsp页面

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Mars University Lab System</title>
    <link rel="stylesheet" href="style.css" type="text/css" media="screen">
</head>

<body>
<jsp:include page="header.jsp"/>

<tr>
<td>
</td>
</tr>

<tr>
<td>
<div id = "centrecontent">

<table border="0" cellpadding="2">
<tr>
    <td width="500px" align="center">
    <br>
    <font size="5">Welcome to <i>The Department of <br>Rocket Science</i> Lab System<br></font>
    <br>
    For <b>Students</b> you can enrol in labs<br> and manage the labs you're enrolled in.<br><br>

    For <b>Tutors</b> you can view the labs<br> you're teaching and record attendence.<br><br>

    For <b>Lecturers</b> you can create and<br> manage lab classes, register Tutors and<br> assign those Tutors to labs.<br><br>

    </td>
    <td width="500px">
<table border="0" align="center">
        <tr>
        <td align="center">

        <table border="0"  align="center">
            <tr> <br><br><b>Existing Member? <br>Sign In Here!</b><br>
                <td align="right">
                    <form name ="login" METHOD=POST ACTION="SaveSession.jsp">
                        Username: <input type="text" name="username"/><br />
                        Password: <input type="password" name="pword"/><br />
                        <input type=SUBMIT value="Login" name="Submit" />

                </td>
            </tr>
        </table>

                <br><br><br><br>
    <form name="search_cat_bar" method="get" action="">
    <input type="hidden" name="dff_view" value="grid">
       Search:<input type="text" name="dff_keyword" size="30" maxlength="50"> <br>in 
       <select name="dff_cat1num" size="1">
         <option value="-1">All Subjects
         <option value="-2">--------------
         <option value="101">CSE2ICE
         <option value="193">CSE3PRA
         <option value="193">CSE3PRB
         <option value="193">CSE3WAE
       </select>
       <input type="submit" value="Find">
       </form>

        </td>
</tr>
</table>

</td>
</tr>
</table>

<table>
<tr>
</tr>
</table>

</div>

<jsp:include page="footer.jsp"/>

</body>

</html> 
```

我希望 login.jsp 页面调用我的 LoginServlet 以获取登录功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T04:13:11.767

1.  在 html 表单标签中添加操作。
2.  操作是 LoginServlet URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T04:45:39.337

使用标准方法更容易做到这一点：

1.  有`jsp`一个带有表单的页面，以接收来自用户的输入。
2.  有一个`servlet`来处理数据。
3.  如果出现问题，设置错误消息并将用户重定向到登录页面。否则将他重定向到目的地。
4.  不要忘记将表单的操作设置为 servlet 的地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T08:04:48.583

可以这样调用servlet：web.xml

```
<servlet>
        <servlet-name>UserLogin</servlet-name>
        <servlet-class>com.servlet.LoginServlet</servlet-class>//full class path
</servlet>

<servlet-mapping>
        <servlet-name>UserLogin</servlet-name>
        <url-pattern>/servlet/login</url-pattern>
    </servlet-mapping> 
```

登录.jsp

```
<form name="login" action="<%=request.getContextPath()%>/servlet/login" method="post">

</form> 
```

Servlet：登录检查，您也可以将错误消息发送到登录页面并显示消息，例如，

```
res.sendRedirect(req.getContextPath()+"/webpages/login.jsp?login=failed"); 
```

在 login.jsp 中，您可以检索参数 request.getParameter("login") 并显示正确的消息

# include - 百里香叶片段包括

> ID：12667300
> 
> 赞同：0
> 
> 时间：2012-10-01T03:46:06.177
> 
> 标签：include, thymeleaf

我不断收到“错误解析模板“片段/常见”，模板可能不存在或可能无法被任何已配置的模板解析器访问”。common.html 文件路径正确，fragments->common.html。我的文件夹结构：

-- 网络信息

---- 模板

------ 碎片

-------- common.html

------ index.html

任何帮助或指示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T17:36:15.003

我知道我参加聚会迟到了，但我想我会分享我正在做的事情，这对我来说似乎更容易一些。

我使用 java config 类来配置 thymeleaf，并使用模板别名使其更容易：

```
resolver.addTemplateAlias("footerTemplate","templates/footer"); 
```

然后我可以简单地执行以下操作：

```
<div th:include="footerTemplate :: copy"></div> 
```

假设您正确设置了后缀和前缀。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T13:34:01.213

好吧，我发现了问题。语法错误，错误消息说明了一切。我使用的是 common.html，include 语句中包含的模板名称不正确。

# c++ - 哪个 OO 框架从 C WinAPI 提供最平滑的转换：VCL、MFC 或 qt？

> ID：12667302
> 
> 赞同：1
> 
> 时间：2012-10-01T03:46:41.447
> 
> 标签：c++, winapi, window

对于习惯了 WinAPI/C 环境的人，我对这三个框架的优缺点很感兴趣。要转OO的代码不是很复杂：大约3000行代码，主要是控件。我想使程序面向对象，以使其可以被其他人维护。目前它是一大团C泥，我想用C++ OO重新编码。

我应该使用哪些框架？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T04:48:53.813

*   [Visual Component Library](http://en.wikipedia.org/wiki/Visual_Component_Library) (VCL) 是由 Borland 为其产品（Delphi 和 C++ Builder）开发的库。

*   [Microsoft 基础类库](http://en.wikipedia.org/wiki/Microsoft_Foundation_Class_Library)(MFC) 是由 Microsoft 开发的库，本质上是围绕 C WinAPI 的 C++ 包装器。但是，它不包含在 Visual C++ 2005/2008/2010 Express 中。

*   正如 MFC 的 Wikipedia 文章所说，[Windows 模板库](http://en.wikipedia.org/wiki/Windows_Template_Library)(WTL) 是一个 C++ 模板库，它是 MFC 的轻量级替代品。没有官方文档，虽然它正在[这里](http://www.viksoe.dk/code/wtldoc.htm)构建。（有关示例、控件和实用程序，请参阅[此页面](http://www.viksoe.dk/code/all_wtl.htm)。） WTL 没有与 IDE 集成，并且它不受[产品支持服务](http://support.microsoft.com)的官方支持。

*   [Qt](http://en.wikipedia.org/wiki/Qt_%28framework%29)是一个跨平台的 C++ 框架，提供三种许可证（GNU LGPL 2.1 with Qt special exception、GNU GPL 3.0、Commercial Developer License）。作为跨平台，该框架不是 C WinAPI 库的包装器。它还具有针对不同编程语言的绑定。
    Qt 使用的 API 风格是本机风格，在最新版本中；以前，它是在模拟原生 GUI（除了 Qt 是原生 GUI，例如在 KDE 中）。
    没有一个简单、完整的示例，它不会太长、太基础，无法让您了解 Qt 和 C WinAPI 之间的区别，但是您可以[在此处找到一些示例](http://doc.qt.digia.com/4.7-snapshot/all-examples.html). 我会说在所有框架中都使用了一些特定的概念，例如信号的概念（简而言之，从一个小部件引发的事件）和插槽（简而言之，当事件引发时调用的方法）的概念，其中允许您根据其他小部件的值更改小部件显示的内容。

    ```
    connect(xSlider, SIGNAL(valueChanged(int)), glWidget, SLOT(setXRotation(int)));
    connect(glWidget, SIGNAL(xRotationChanged(int)), xSlider, SLOT(setValue(int)));
    connect(ySlider, SIGNAL(valueChanged(int)), glWidget, SLOT(setYRotation(int)));
    connect(glWidget, SIGNAL(yRotationChanged(int)), ySlider, SLOT(setValue(int)));
    connect(zSlider, SIGNAL(valueChanged(int)), glWidget, SLOT(setZRotation(int)));
    connect(glWidget, SIGNAL(zRotationChanged(int)), zSlider, SLOT(setValue(int))); 
    ```

    如果您正在寻找一个允许您构建跨平台应用程序或使用不同编程语言的库，这就是我会选择的。考虑一下您获得 Qt 的许可证。

如果你想创建一个只在 Windows 上运行的 C++ 应用程序，我也会选择 WTL。尊重几年前，它现在更容易使用它，虽然不支持 IDE，这意味着（例如）没有创建 UI 类的实例或创建子类的向导一个 GUI 类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T03:54:55.130

MFC 和 WTL 都最接近 WinAPI，因为它们只是 WinAPI 上的 OOP 包装器。这是将 C 代码转换为 C++ 的最快捷方式。QT 更加健壮和现代，但您必须完全重新设计您的项目。我建议使用 WTL。

# c# - 在 C# 中删除 flowlayoutpanel 中的所有控件

> ID：12667304
> 
> 赞同：6
> 
> 时间：2012-10-01T03:47:06.883
> 
> 标签：c#, flowlayoutpanel

我正在构建一个流程布局面板，其每个控件代表一个房间。我想通过删除面板中的所有控件并添加新控件来重新加载所有房间。

我用了：

```
foreach(Control control in flowLayoutPanel.Controls) 
{
    flowLayoutPanel.Controls.Remove(control);
    control.Dispose(); 
} 
```

但是某些控件无法删除。

我试图在互联网上找到解决方案，但无处可寻。

任何身体都可以帮忙吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-02-12T20:58:43.710

[根据 MSDN，您可以通过调用](https://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.clear.aspx)[方法](https://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.clear.aspx)清除 a `ControlCollection`（例如 a `FlowLayoutPanel`）中的所有控件。例如：[`Clear()`](https://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.clear.aspx)

```
flowLayoutPanel1.Controls.Clear(); 
```

请注意：仅仅因为从集合中删除项目**并不**意味着处理程序已经消失，并且必须正确处理，以免您面临内存泄漏。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-01T15:25:15.173

那是因为您要从您正在迭代的同一个列表中删除控件。尝试这样的事情

```
List<Control> listControls = flowLayoutPanel.Controls.ToList();

foreach (Control control in listControls)
{
    flowLayoutPanel.Controls.Remove(control);
    control.Dispose();
} 
```

也许不是那样，但你明白了。将它们列在列表中，然后将其删除。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-10-19T09:49:53.220

注意：这是基于先前评论的可行解决方案，因此归功于该人:)

这对我有用：

```
List<Control> listControls = new List<Control>();

foreach (Control control in flowLayoutPanel1.Controls)
{
     listControls.Add(control);
}

foreach (Control control in listControls)
{
     flowLayoutPanel1.Controls.Remove(control);
     control.Dispose();
} 
```

可能有一种更好/更清洁的方法，但它确实有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-19T09:22:32.270

如果您正在寻找简单快捷的解决方案。这里是。

```
while (flowLayoutPanel.Controls.Count > 0) flowLayoutPanel.Controls.RemoveAt(0); 
```

# git - intellij 想法：如何将文件夹的内容（递归）与 SCM 存储库中的最新（或更早）修订版（例如，Git？）

> ID：12667309
> 
> 赞同：3
> 
> 时间：2012-10-01T03:48:02.533
> 
> 标签：git, version-control, intellij-idea

我正在处理从 maven 导入的项目（但我认为构建框架并不重要）..

无论如何..如果我右键单击项目中的一个文件并选择 Git（我的 SCM 系统），我会看到一个选项“与相同的存储库版本比较”。但是，如果我右键单击此文件的包含文件夹，此选项将显示为灰色。

我可以请求 Git / Show History.. 但是当我单击并输入（例如，最新版本），然后选择“与本地比较”时，我收到一个错误对话框，显示“不适用于文件：文件：//家/我/项目/等/等....'

我过去用 IDEA 做过这件事..现在我无法让它工作..有什么东西坏了或改变了..？还是我只是忘记了它是如何完成的？

谢谢 ！克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T00:34:42.413

我在上一篇文章中回答了我的问题。现在我意识到这不是我（或者可能是这种情况下的其他任何人）真正想要的答案。
上面的答案使您可以从上次签入中获取文件的树形视图，并查看项目中文件的当前状态与签入版本之间的任何差异。这就是我想要的。
但这限制了您只能查看您上次碰巧签入的文件的差异。

如果您上次签入文件`a`,`b`和`c`, 并且自上次签入以来您修改了`a`,`b`和 ,`x`怎么办？
好吧，就使用这种方法来查看`x`.

但是还有另一种方法......它有点像黑客，但它有效。你要做的是：

1.  将项目的当前内容递归复制到 /tmp/current
2.  执行 a`git stash`以使您的项目处于上次签入的状态（无更改）
    不要担心您可以在后续步骤中恢复。
3.  接下来转到 Intellij 项目视图中的顶级文件夹（与您复制到的相同的文件夹`/tmp/current`，然后右键单击并选择“ `Compare Directory With`”选择`/tmp/current`作为要比较的目标。
4.  现在，您将在一个井井有条的列表中看到与最新签到的所有差异。
5.  完成审核后，执行“ `git stash pop`”以将更改返回到您拥有项目的文件夹。

我不知道为什么没有更简单的方法可以做到这一点。
我将向 IntelliJ 提交一个错误并要求更方便的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T21:39:13.603

我将自己回答这个问题（对于任何感兴趣的人）。

这样做的方法是**选择您希望检查差异的修订，然后单击显示所有受影响的路径**。
这将为您提供该签入中文件的树形视图。

使用此树视图，您可以`Show Diff`在任何工件上选择“ ”，并且您可以看到该版本的工件状态与该版本之前的工件状态之间的差异。

这基本上是我想要的.. 差异是并排的，这非常有帮助。

现在，我还没有弄清楚如何在存储库中获得两个任意修订（SHA）之间的差异......这种技术似乎只适用于区分给定修订和紧接在它之前的修订。

我在 Stack Overflow 上看到其他关于如何获取 GIT 回购修订版的并排差异的问题。好吧，这似乎可以解决问题（在大多数情况下）。
这也是 Intellij 非常酷的另一个原因（我不为他们工作，我只是喜欢这个产品）。

# java - ImageIO.getReaderMIMETypes() 在运行 tomcat 的 Linux 上返回 null，在本地工作正常

> ID：12667311
> 
> 赞同：1
> 
> 时间：2012-10-01T03:48:10.557
> 
> 标签：java, spring, tomcat, jai

在 eclipse 和 tomcat7 中本地运行我的 spring 应用程序一切正常，但是当我将它部署到在我们的 linux 服务器上运行的 tomcat 7 时，应用程序无法启动，因为我正在注册一个

```
<bean class="org.springframework.http.converter.BufferedImageHttpMessageConverter"> 
```

它调用：

```
ImageIO.getReaderMIMETypes() 
```

这似乎返回null，因为它到达这里时一切都失败了：

```
public static MediaType parseMediaType(String mediaType) {
    Assert.hasLength(mediaType, "'mediaType' must not be empty"); 
```

我想这可能是运行 headless=true 的问题，但我将本地服务器更改为该服务器，它仍然有效。我想也许它与 JAI jars 有关，但是服务器上 Tomcat 使用的 jre 确实在 jre/lib/ext 中有 jai jars

# iphone - iPhone 设置中的应用设置

> ID：12667313
> 
> 赞同：0
> 
> 时间：2012-10-01T03:48:24.430
> 
> 标签：iphone, objective-c

我一直在阅读和探索在 iPhone 设置页面中添加自定义应用程序的设置。还有一个问题在我脑海中浮现，我们能否将我们设计的 XIB / UIStoryboard-viewController 指向 root.plist。

这可以帮助显示自定义设计并根据需要以不同方式处理事物。

例如，如果自定义应用程序使用密码保护，那么我们需要将密码保存到钥匙串中，这将需要编写额外的逻辑。

干杯，昆贾尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:35:25.247

您不能在应用的 iOS 设置页面中使用自定义 UIViewController。使用 Settings.bundle 时，首选项存储在不与钥匙串集成的 NSUserDefaults 中。因此，您需要在应用程序本身中包含密码的设置视图。

# android-ndk - 如何在android的另一个jni c项目中使用单独的jni代码进行edittext使用

> ID：12667314
> 
> 赞同：1
> 
> 时间：2012-10-01T03:48:30.373
> 
> 标签：android-ndk, android-edittext

我已经使用 JNI native 创建了 edittext 项目。我的代码已经编译并运行了这两个项目，并在模拟器中显示了 edittext。我还有另一个项目也使用了 jni native。我想使用edittext其他项目的代码在模拟器中显示edittext。请给我任何解决方案和示例。我是Android新手。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T04:57:17.837

您可以在一个 Android 应用项目中拥有多个**.so文件。**Java 代码应该加载这两个库，但不必一起加载。您的 Android.mk 文件将包含两个**$(BUILD_SHARED_LIBRARY)**

实际上，您可以将**jni**文件夹与您的**edittext**项目分开，并在新的 Android.mk 行的底部写入：

```
include $(LOCAL_PATH)/../../edittext/jni/Android.mk 
```

**从一个Android.mk**到另一个的相对路径取决于您如何将项目保存在磁盘上，如下所示：

```
MyProjects
  |
  --- edittext
  |       |
  |       ----- jni
  |              |
  |              --- Android.mk
  |
  --- new project
          |
          ----- jni
                 |
                 --- Android.mk 
```

# objective-c - 从另一个类调用浮点数组

> ID：12667318
> 
> 赞同：2
> 
> 时间：2012-10-01T03:49:05.147
> 
> 标签：objective-c, ios, arrays, class

菜鸟问题在这里。

如果我有一个带有数组 float itemsPosition[20][20] 的 A 类并且我有另一个 B 类可以访问它，我该怎么做？

我通常这样做是为了分配 A 类并访问其他对象，但在这种情况下，我无法在 A 类中合成浮点数组。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:42:13.993

浮点数是 C 类型，因此您不能使用典型的 Objective C 属性来直接访问它们。

最好的办法是创建一个“访问器”函数，让 B 类可以访问第一个数组条目“ `itemsPosition`”的指针。例如“ `itemsPosition[0][0]`”

在 A 类的 .h 文件中：

```
float itemsPosition[20][20];

- (float *) getItemsPosition; 
```

在 .m 文件中：

```
- (float *) getItemsPosition
{
    // return the location of the first item in the itemsPosition 
    // multidimensional array, a.k.a. itemsPosition[0][0]
    return( &itemsPosition[0][0] );
} 
```

在 B 类中，由于你知道这个多维数组的大小是 20 x 20，你可以很容易地找到下一个数组条目的位置：

```
 float * itemsPosition = [classA getItemsPosition];
    for(int index = 0; index < 20; index++)
    {
        // this takes us to to the start of itemPosition[index]
        float * itemsPositionAIndex = itemsPosition+(index*20);

        for( int index2 = 0; index2 < 20; index2++)
        {
            float aFloat = *(itemsPositionAIndex+index2);
            NSLog( @"float %d + %d is %4.2f", index, index2, aFloat);
        }
    }
} 
```

让我知道在某个地方为您放置一个示例 Xcode 项目是否对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T04:43:10.973

您可以保存指向您的数组的指针`@synthesize`。`NSValue`

```
@interface SomeObject : NSObject
@property (strong, nonatomic) NSValue *itemsPosition;
@end

@implementation SomeObject
@synthesize itemsPosition;
...
static float anArray[20][20];
...
- (void) someMethod
{
    ... add items to the array
    [self setItemsPosition:[NSValue valueWithPointer:anArray]];
}
@end

@implementation SomeOtherObject
...
- (void) someOtherMethod
{
    SomeObject *obj = [[SomeObject alloc] init];
    ...
    float (*ary2)[20] = (float(*)[20])[obj.itemsPosition pointerValue];
    ...
} 
```

# java - smoosh 方法的任何 O(n) 算法？

> ID：12667321
> 
> 赞同：2
> 
> 时间：2012-10-01T03:49:36.433
> 
> 标签：java, algorithm

我正在尝试完成一个 smoosh() 方法，它需要一个整数数组。完成后，数组仍应包含相同的数字，但只要数组有两个或多个连续的重复数字，它们就会被该数字的一个副本替换。因此，在 smoosh() 完成后，数组中没有两个连续的数字是相同的。

数组末尾的任何未使用元素都设置为 -1。

例如，如果输入数组是

```
[ 1 1 0 0 4 4 5 0 0 0 7 ] 
```

它读到

```
[ 1 0 4 5 0 7 ] 
```

smoosh() 完成后。

方法签名是： public static void smoosh(int[] ints)

我能够这样做：

```
for (int i=0; i<ints.length-1; i++) {
    if (ints[i+1]==ints[i])
        ints[i]=-1;
}
for (int i=0; i<ints.length-1; i++) {
    if (ints[i]==-1) {
        for (int j=i+1; j<ints.length; j++) {
            if (ints[j]!=-1) {
                //swap ints[j] and ints[i] and then break;
            }
        }
    }
} 
```

但是，这将是 O(n2) 时间（尽管几乎就位）。

我觉得应该有一些 O(n) 就地方法来做到这一点，但我不知道怎么做。谁能想到任何 O(n) 就地算法？（显然，如果您制作另一个相同大小的数组来帮助处理，那么您可以轻松获得 O(n) ，但这不是我想要的，因为那还没有到位......）

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T03:54:10.230

基本上如下。这个 O(n) 时间、O(1) 空间的“算法”实际上是 Python 代码，因为这是一种非常适合教授基本算法的语言，只要你避免使用所有复杂的东西，比如 lambda。

我现在实际上正在用它来教我 8 岁的儿子，因为他对我整天在工作中所做的事情表示了兴趣。

```
array = [1, 1, 0, 0, 4, 4, 5, 0, 0, 0, 7]

print array

count = len (array)
last = array[0] - 1
toidx = 0
for fromidx in range (0, count):
    if array[fromidx] != last:
        array[toidx] = array[fromidx]
        toidx = toidx + 1
        last = array[fromidx]
while toidx < count:
    array[toidx] = -1
    toidx = toidx + 1

print array 
```

这个的输出是：

```
[1, 1, 0, 0, 4, 4, 5, 0, 0, 0, 7]
[1, 0, 4, 5, 0, 7, -1, -1, -1, -1, -1] 
```

正如您的规格要求的那样。

它基本上通过数组运行两个索引，`fromix`无论如何索引都会前进一个。仅当 at 的值与最后传输的值不同时，`toidx`索引才会前进。`fromidx`最后传输的初始值设置为与第一个元素不同的值，以确保传输第一个元素。

换句话说，在该条件为真的每次迭代中，`from`索引处的值被复制到`toidx`索引中，`toidx`索引增加，并且`last`值被更新。如果 at 的值`fromidx`与上次传输的值相同，`toidx`则不更新索引。

然后，最后，所有剩余的值都设置为 -1。

* * *

由于您的规范要求用​​ -1 填充数组的其余部分，这就是我在上面的代码中所做的。

但是，您的示例结果不包含负值，因此，如果您需要*截断*数组而不是填充数组`-1`，则基本上将`while`末尾的循环替换为数组截断，使其大小现在为`toidx`。

在 Python 中，您可以通过以下方式执行此操作：

```
array = array[0:toidx] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T03:54:48.277

不需要你的内循环。您只需要跟踪您访问的最后一个值是什么，然后开始跳过，直到找到一个“新”数字。例如在伪代码中

```
previous = null;
newarray = array();
newpos = 0;
for (i = 0; i < oldarray.length; i++) {
   if (oldarray[i] == previous) {
      continue; // got a duplicate value, so skip it.
   } else {
      newarray[newpos++] = oldarray[i];
      previous = oldarray[i];
   }
}
for (i = newpos; i < oldarray.length; i++) {
   newarray[i] = -1; // fill in any empty slots
} 
```

现在你只剩下 O(n) 了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T03:56:25.420

如果您使用 a`LinkedList`代替，您可以使用 a `ListIterator`for 循环，将前一个值的值存储在列表中，`ListIterator.remove`如果它等于当前值则调用。

# c# - Autofac 属性注入 System.ComponentModel.DataAnnotations ValidationAttribute

> ID：12667326
> 
> 赞同：3
> 
> 时间：2012-10-01T03:50:55.100
> 
> 标签：c#, inversion-of-control, autofac

我无法对自定义数据注释验证属性执行属性注入

```
 public class CustomValidationAttribute : ValidationAttribute 
 {
    public ILogger Logger { get; set; }

    public CustomValidationAttribute(string keyPointer)
    { }

    public override bool IsValid(object value)
    {
        // Implementation here
        return true;
    }
} 
```

现在，在我的 MVC Application_Start 方法中，我有以下 Autofac 配置：

```
 // Autofac Ioc Container
        var builder = new ContainerBuilder();
        builder.RegisterType<Logger>().As<ILogger>().InstancePerHttpRequest();
        builder.RegisterType<CustomValidationAttribute>()
        .OnActivating(e =>
        {
            e.Instance.Logger = e.Context.Resolve<ILogger>();
        });
        var container = builder.Build();
        DependencyResolver.SetResolver(new AutofacDependencyResolver(container)); 
```

我还尝试了自动装配功能：

```
builder.RegisterType<CustomValidationAttribute>().PropertiesAutowired(); 
```

我猜数据注释上的属性的属性在编译时被解析并且不受运行时注入的影响。此方法适用于 MVC 过滤器属性，但不适用于数据注释属性。

任何帮助都非常感谢您使用替代方法来完成这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T10:26:48.023

作为参考，我们遇到了 ValidationAttribute 的问题，它需要使用 Repository 进行一些数据库工作，而 Repository 又使用了 Entity Framework DbContext。

我们的问题是 DbContext 被属性缓存了。这导致它包含的数据过时，从而影响了验证的结果！

我们通过在 IsValid 方法内的 Autofac Lifetimescope 声明中执行我们的 Repository 解析来修复它：

```
using Autofac;

...

public override bool IsValid(object value)
{
    using (var lifetimeScope = MvcApplication.Container.BeginLifetimeScope())
    {
        var repo = lifetimeScope.Resolve<IMyRepo>();

        // Do your validation checks which require the repo here

    } // The repo will be released / disposed here
} 
```

只需在此处添加我的解决方案，因为我在其他任何地方都没有找到针对此问题的解决方案 - 也许很明显没有其他人像我一样愚蠢:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T04:02:45.023

您的分析是正确的- Autofac 具有注入过滤器属性的机制[这是通过不将它们实例化为属性并依赖于暴露 MVC 3 的设施来实现的]。

没有适用于验证属性的自然扩展点，Autofac 也没有尝试这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T15:19:16.813

我最终使用了一个新的验证器和一些反射来设置数据注释中的属性实例。

```
 public class IocValidator : DataAnnotationsModelValidator<ValidationAttribute>
{
    public IocValidator(ModelMetadata metadata, ControllerContext context,
        ValidationAttribute attribute)
        : base(metadata, context, attribute) { }

    public override IEnumerable<ModelValidationResult> Validate(object container)
    {
        IEnumerable<PropertyInfo> props = 
            from p in Attribute.GetType().GetProperties()
            where p.CanRead 
                && p.CanWrite
                && (p.PropertyType.IsInterface || p.PropertyType.IsAbstract)
            select p;

        foreach (PropertyInfo prop in props)
        {
            var instance = IocHelper.Resolver.GetService(prop.PropertyType);

            if (instance != null)
                prop.SetValue(Attribute, instance, null);
        }

        return base.Validate(container);
    }
} 
```

然后在我的`Application_Start`我注册了我的新验证器适配器：-

```
 DataAnnotationsModelValidatorProvider.RegisterDefaultAdapter(typeof(IocValidator)); 
```

这种方法和验证器中 IocHelper 的依赖性（哦，讽刺的是，对依赖注入容器的依赖性）有明确的性能影响。

任何想法或更好的方法都非常受欢迎。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-05T10:09:55.843

[我在这个答案](https://stackoverflow.com/a/35214460/11635)中以不同的方式解决了它（你仍然通过`ValidationAttribute`s 连接东西），使一个人可以写：

```
class MyModel 
{
    ...
    [Required, StringLength(42)]
    [ValidatorService(typeof(MyDiDependentValidator), ErrorMessage = "It's simply unacceptable")]
    public string MyProperty { get; set; }
    ....
}

public class MyDiDependentValidator : Validator<MyModel>
{
    readonly IUnitOfWork _iLoveWrappingStuff;

    public MyDiDependentValidator(IUnitOfWork iLoveWrappingStuff)
    {
        _iLoveWrappingStuff = iLoveWrappingStuff;
    }

    protected override bool IsValid(MyModel instance, object value)
    {
        var attempted = (string)value;
        return _iLoveWrappingStuff.SaysCanHazCheez(instance, attempted);
    }
} 
```

使用一些帮助类（看那里），您可以在 ASP.NET MVC 中将其连接起来，如下所示`Global.asax`：-

```
DataAnnotationsModelValidatorProvider.RegisterAdapterFactory(
    typeof(ValidatorServiceAttribute),
    (metadata, context, attribute) =>
        new DataAnnotationsModelValidatorEx(metadata, context, attribute, true)); 
```

# string - Go StartsWith(str 字符串)

> ID：12667327
> 
> 赞同：77
> 
> 时间：2012-10-01T03:50:57.730
> 
> 标签：string, go, startswith

有没有一个`StartsWith(str1, str2 string)`函数可以检查是否`str1`是`str2`Go 语言的前缀？

我想要一个类似于[Java 的`startsWith()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#startsWith(java.lang.String)).

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-10-01T03:59:18.000

字符串包有你要找的东西。特别是 HasPrefix 函数：[http ://golang.org/pkg/strings/#HasPrefix](http://golang.org/pkg/strings/#HasPrefix)

例子：

```
fmt.Println(strings.HasPrefix("my string", "prefix"))  // false
fmt.Println(strings.HasPrefix("my string", "my"))      // true 
```

该软件包包含许多您应该检查的不同的字符串辅助函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-03T12:51:24.853

例如

如果要检查字符串是否以点开头

```
package main

import "strings"

func main() {
   str := ".com"
   fmt.Println(strings.HasPrefix(str, ".")
} 
```

终端：

```
$ true 
```

# objective-c - Cocos2D 2.0 ARC 启用不受控制的释放

> ID：12667329
> 
> 赞同：2
> 
> 时间：2012-10-01T03:52:21.727
> 
> 标签：objective-c, memory-management, cocos2d-iphone, automatic-ref-counting, dealloc

我最近将现有的 Cocos2D 项目从 0.8 版迁移到 2.0 版并启用了 ARC。

我这样做的方式是使用 Apple 的空应用程序模板，然后添加来自 Cocos2d 2.x 模板的代码，因为它有重大变化。之后，我添加了游戏中的代码并对已弃用的代码和 ARC 问题进行了必要的更改。

由于游戏正在运行，但不如预期，我没有动画并且游戏占用了整个 CPU 资源。从控制台我看到一切都在创建后立即被释放。我的旧代码不是原因，因为它甚至发生在我的任何场景被推送之前。

![在此处输入图像描述](../Images/fb7880209ae05a40279f9fcf1b5b869a.png)

**编辑** 我还再次重复了整个过程并从 Cocos2D 模板项目中制作了一个支持 ARC 的版本，但那里也一样。这可能是正常的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T11:28:28.313

That's not normal, although common problem when converting to ARC. ARC will release objects out of scope, whereas under MRC an alloc/init object would stay in memory (and leak). Check where you may need to keep a strong reference.

Here's an example that worked before converting to ARC:

```
-(void) someMethod
{
    id object = [[MyObject alloc] init];
} 
```

Under MRC, object stays in memory (leaks) after someMethod returns. Under ARC, ARC cleans up the object when the method returns. The simplest fix is to turn object into an ivar (aka instance variable, member of class).

Also check singletons. Depending on how its implemented, the Singleton class might dealloc right away. For example if the static instance is declared __weak or __unsafe_unretained.

You should also run the Xcode Analyzer (Build -> Analyze) to get pointers for potential issues.

# java - Java 程序可以访问自己的源代码吗？

> ID：12667330
> 
> 赞同：1
> 
> 时间：2012-10-01T03:52:25.827
> 
> 标签：java

在 Java 中，我想找到一种允许程序访问自己的源代码的方法，主要用于调试和元编程目的（例如在运行时打印方法签名，或允许程序读取自己的注释，或允许一个 Java 类来打印某种类型的所有方法，或者允许程序生成它自己的源代码的新版本等）。

有没有办法让 Java 程序访问它自己的源代码的副本，并逐行读取它？

```
//this is the first line of the program
//this method is not implemented
public class inspectSourceCode(){
    public static String getLine(int lineNumber){
        //get the line of the program's own source code as a string,
        //this is not currently implemented
    }
    //this method is implemented
    public static void main(String[] args){
        System.out.println(getLine(0));
        //should print "//this is the first line of the program",
        //if the method getLine works correctly
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T04:01:27.747

您可以直接访问代码中的 .java 文件。只需将其指向正确的目录并像访问其他文件一样访问该文件。

该程序本身并未运行 java 文件，而是在运行时使用已编译的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T04:50:29.163

> 我正在尝试设置每种方法的属性

我建议您使用注释，然后使用[`Method.getAnnotation`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Method.html#getAnnotation%28java.lang.Class%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T05:52:03.717

理论上，您可以在源代码中使用反编译器库来潜在地访问类，但请记住，由于优化和/或混淆等原因，您可能无法可靠地在字节码和 Java 代码之间进行 1-1 转换。还要记住，如果代码没有使用内置的调试信息编译，您甚至不一定有可用的 #s 行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T04:40:47.430

你检查过 ASM 吗？[http://asm.ow2.org/](http://asm.ow2.org/)

但我认为，你想要做的是非常昂贵的 CPU。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T04:11:26.417

> Java 程序可以访问自己的源代码吗？

一般来说没有。源代码*通常*在执行平台上不可用。

在源代码可用的子情况下，是的（当然）程序可以使用标准 Java I/O API 读取它。但是，没有专门用于读取源代码任务的标准 API。

> ...主要用于调试目的（例如在运行时打印方法签名，或允许程序读取自己的注释，或允许 Java 类打印某种类型的所有方法）

你不能做这些事情没有技术原因，但让我感到震惊的是，在这样的工具变得有用之前，你还有*很多工作要做。*而且，坦率地说，一个典型的 Java IDE 的源代码调试器已经完成了几乎所有这些事情，所以我真的不明白这种努力的意义。

# vb.net - 验证文本框

> ID：12667331
> 
> 赞同：0
> 
> 时间：2012-10-01T03:52:32.160
> 
> 标签：vb.net, winforms, isnumeric

我正在使用 Windows 窗体做一个简单的应用程序，我有一个问题......

我的表单有 15 个文本框，我想使用事件 KeyPress 或验证来验证每个人。我有这个工作的代码：

```
If Not IsNumeric(txtn1.Text) Then
e.Cancel = True
ErrorProvider1.SetError(txtn1, "")
Else
something(txtn1.text)
End If 
```

但是我有 15 个文本框（可能更多），并且在每个文本框事件中都有点单调地复制/粘贴此代码。你能教我用一个函数来做到这一点吗？

```
Public Function isnum(ByVal txt As TextBox, ByVal errpro as ErrorProvider) As Double
If Not IsNumeric(txt.Text) Then
e.Cancel = True    <-------------------------------This dont work
errpro.SetError(txt, "")
End If    
End Function

Private Sub txtn1_Validating(ByVal sender As Object, ByVal e As System.ComponentModel.CancelEventArgs) Handles txtKLDC.Validating

if isnum(txtn1, ErrorProvider1) then
something(txtn1.text)
end if 
```

我正在寻找正确的方法来做到这一点？

*英语是我的第二语言，我也在学习编程。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T03:56:53.460

使用常见的 KeyPress 事件，然后使用作为发起事件的 TextBox 的发送者对象并将其转换为 TextBox。

```
Private Sub txt_KeyPress(sender As System.Object, e As System.Windows.Forms.KeyPressEventArgs) Handles txtn1.KeyPress, txtn2.KeyPress, txtn3.KeyPress, txtn4.KeyPress, txtn5.KeyPress
    Dim tb As TextBox = CType(sender, TextBox)
    If Not IsNumeric(tb.Text) Then
        e.Handled = True
        ErrorProvider1.SetError(tb, "")
    Else
        something(tb.Text)
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T04:04:16.237

使用此代码：

```
Private Sub NumericValidation_KeyPress(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyPressEventArgs) _
Handles TextBox1.KeyPress, TextBox2.KeyPress, upto 16500 or so is possible...

Dim txt As TextBox = CType(sender, TextBox)
If Not IsNumeric(txt.Text) Then
e.Cancel = True
ErrorProvider1.SetError(txt, "")
Else
something(txt.text)
End If
End Sub 
```

请注意我是如何将每个文本框的 KeyPress 事件处理程序分配给单个 NumericValidation_KeyPress 子例程的。我将发件人转换为文本框以找出触发了哪个文本框按键事件。

# c++ - C++ 放置新的“构造函数”的多个参数

> ID：12667333
> 
> 赞同：2
> 
> 时间：2012-10-01T03:52:49.477
> 
> 标签：c++, macros, placement-new

为了进行一些自定义内存跟踪（泄漏预防、损坏检测），我不得不使用placement new 来创建C++ 对象，它工作得很好——但我正在努力弄清楚如何将参数传递给构造函数，因为它是从宏中调用的（因此可以自动提供文件+行）。

功能：

```
template <typename T>
T*
cpp_new(
    const char *file,
    size_t line
)
{
    T   *n = (T*)tracked_allocate(&memory_context, sizeof(T), file, line);

    if ( n )
    {
        construct(n);
    }
    else
    {
        throw std::bad_alloc();
    }

    return n;
} 
```

这是通过宏调用的：

```
#define new_object(type)    cpp_new<type>(__FILE__, __LINE__) 
```

放置新：

```
template <typename T>
void
construct(
    T *obj
)
{
    obj = new (obj) T;
} 
```

va_list 宏将涵盖可变参数数量的扩展，只是我不想提供构造函数具有的参数数量，删除 va_arg()，并且不能使用 va_start()，因为它需要一种格式。

这让我有点不知所措：[http ://www.drdobbs.com/cpp/calling-constructors-with-placement-new/232901023?pgno=2](http://www.drdobbs.com/cpp/calling-constructors-with-placement-new/232901023?pgno=2)

有什么方法可以`__VA_ARGS__`从 new_object 使用并将它们传递给构造函数？每个对象只有一个构造函数，但有许多不同类型的对象采用不同的参数，所以我想尽可能多地去除手动维护。

还是有更好的方法来做我正在尝试的事情！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T04:13:14.083

如果分配成功，则不应处理构造。这就是 - 表达式的工作`new`。它以类似事务的操作正​​确地做到了这一点：要么全部成功，要么在传播异常之前执行清理。

因此，摆脱了这个责任，你的宏的工作就是做只有宏才能做的事情，即获取文件名和行。

这些项目可以/应该传递给分配器函数，从技术上讲，它是一个“新的放置”，尽管在这里它*不会就地构造*：它是一个**新的放置**，仅仅是因为它有额外的用户定义的参数，如下所示：

```
bool hopefully( bool const c ) { return c; }

template< class X >
bool throw_( X const& x ) { throw x; }

void* operator new( size_t const size, char const* const filename, int const linenum )
{
    void* const p = tracked_allocate( &memory_context, size, filename, linenum );
    hopefully( p != 0 )
        || throw_( std::bad_alloc() )
    return p;
} 
```

你需要定义一个对应的放置释放函数，否则`new`当构造函数抛出时，表达式将无法释放：

```
void operator delete( void* const p )
{
    // Your custom deallocation.
}

void operator delete( void* const p, char const*, int )
{
    ::operator delete( p );
} 
```

现在您的宏只需要提供相关的放置参数，如下所示：

```
#define SOURCE_LINE_INFO __FILE__, __LINE__ 
```

然后你可以说，比如，

```
new (SOURCE_LINE_INFO) MyType( arg1, arg2, arg3 ) 
```

对于更可重用的解决方案，请考虑定义 a`struct`来保存文件名和行号。然后宏简化为构造该类型的实例，并且可以更普遍地使用。特别是，它可以用于记录呼叫。

# jquery - jquery, .data() 悬停一个 div 并在另外两个 div 上更改内容和图像 div

> ID：12667337
> 
> 赞同：0
> 
> 时间：2012-10-01T03:53:23.127
> 
> 标签：jquery, html, css

```
$(document).ready(function() {
    $("#MenuBar1 li").mouseover(function() {
        $("#back").attr("src", $(this).data("img"));
        $('.description').text($(this).data('description'));
    }).mouseout(function() { 
        $("#back").attr("src", $("#back").data("original"));
    });
}); 
```

​HTML 代码：

```
<div>
    <div style="width: 377px; position:relative; left: 395px;">
        <ul id="MenuBar1" class="MenuBarHorizontal">
            <div style="height:20px;">
                <li id="button1" data-img="http://http://demo/images/anne.jpg" width="357" height="241" border="0">
                    <a href="#">Anywhere</a>
                </li>
            </div>
            <div style="height:20px;">
                <li id="button2" data-img="http://demo/images/Banner.jpg">
                    <a href="#">ware</a>
                </li>
            </div>
            <div style="height:20px;">
                <li id="button3" data-img="http://demo/images/Banner.jpg">
                    <a href="#">Demand</a>
                </li>
            </div>
            <div style="height:20px;">
                <li id="button4" data-img="http:http://demo/images/Bans.jpg">
                    <a href="#">CM</a>
                </li>
            </div>
            <div style="height:20px;">
                <li id="button5" data-img="http://demo/images/eat.jpg">
                    <a href="#">Key</a>
                </li>
            </div>
            </a></li></div>
        </ul>
    </div>
    <div style="width: 357px; position: relative; top: -380px;" id="content"> 
        <img id="back"src="http://demo/images/Banner.jpg"data-original="http://demo/images/Banner.jpg" alt="e.s.t" /> 
    </div>
<div>
    <p>put text content here for each hover</p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T04:22:38.237

看起来像图像标签中的格式错误的 HTML

```
<img id="back"src="http://demo/images/Banner.jpg"data-original="http://demo/images/Banner.jpg" alt="e.s.t" /> 
```

id ，数据属性之间缺少空格...

```
 <img id="back" src="http://demo/images/Banner.jpg" data-original="http://demo/images/Banner.jpg" alt="e.s.t" /> 
```

**编辑**

[检查小提琴](http://jsfiddle.net/sushanth009/rapat/6/)

我已将描述类添加到 div。

还在 li 标签中添加了 data-description 属性。

检查上面的例子..

**更新**

```
 $(document).ready(function() {

        var defaultText  = '';
        $("#MenuBar1 li").mouseover(function() {
            $("#back").attr("src", $(this).data("img"));
            defaultText = $(".description").text();
            $(".description").text($(this).data("description"));
        }).mouseout(function() {
            $("#back").attr("src", $("#back").data("original"));
            $(".description").text(defaultText);
    });​ 
```

您正在尝试访问仅在第一个函数中具有范围的 defaultText 变量。尝试在鼠标悬停事件之外声明它。你刚刚遇到了一个范围错误：D；

# c# - 如何处理声明为列表的属性？

> ID：12667343
> 
> 赞同：1
> 
> 时间：2012-10-01T03:54:00.807
> 
> 标签：c#, dispose

我想处理声明为对象列表的列表。请找到示例

```
Class A
{
    public void m()
    {
        Ilist<myclass> sam = new Ilist<myclass>();
        sam.Add(ob1); ==> some objects i am adding
        sampleProperty = sam;
    }
}

class B:C
{
    public Ilist<myclass> sampleProperty
    {
        get;
        set;
    }

    public override void m()
    {
        foreach(myclass s in sampleProperty)
        {
        }
    }
} 
```

在我的申请关闭后，我的财产仍然存在。我不能将它设置为 null，因为我在覆盖方法中使用我的属性，所以我不知道它什么时候会被调用。我忘了通知一件事 C 类实现了 IDisposable 接口

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T03:57:04.893

您不需要在 C# 中处理列表。自动垃圾收集器会为您完成。**只有在需要释放、释放或重置非托管**资源时才处置对象。

编辑：如果是这种情况`myClass`（`disposable`实现 IDisposable），那么您只需在每个对象上调用 object.Dispose() 即可。

# android - Android中的简单全屏图像

> ID：12667346
> 
> 赞同：2
> 
> 时间：2012-10-01T03:54:14.420
> 
> 标签：android, image

我想让它当一个人点击一张图片时，它会全屏打开。

在 Android 中执行此操作的最有效方法是什么？

我能想到的最简单的方法是创建一个活动，其中 ImageView 的布局填满整个屏幕。但我认为有一些方法可以直接打开布局或带有 Intent 的 ImageView？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:57:21.173

最好的方法是.. 当您单击图像时，打开一个全屏自定义对话框，其中的图像具有属性填充父级。您无需进行另一项活动，您的目的将在一项活动本身中得到解决，从而提高性能，并且较少的活动将在堆栈中。

# f# - F# 改变对象的状态

> ID：12667348
> 
> 赞同：1
> 
> 时间：2012-10-01T03:54:34.267
> 
> 标签：f#, pass-by-reference, immutability, record, mutable

我有一个模拟器，它使用两个成员将某些状态作为记录保存：一个 Class1 的对象和一系列 Class2 的对象。

当模拟运行时，输入被读取，并且根据输入，这些对象的一些方法被调用。这种方法改变了它们的内部状态。

我正在学习 F#，我了解不可变数据的重要性。然而，考虑到这种状态的复杂性（远不止这里公开的），我认为拥有这些具有内部可变状态的对象并不是什么大不了的事。至少它是隐藏的。

然而，问题是另一个问题。这可能很简单。

在两次迭代之间，我丢失了对“一个”和“多个”对象的更改！

我猜 InvokeMethodOn （显然是简化的）获取了这些对象的副本。

我意识到我需要一些参考，但是......我在这里有点迷失......状态应该有参考成员吗？InvokeMethodOn 应该通过 ref 传递吗？他们都是？那么“多”序列呢？

**编辑：**可能有数百万个“许多”对象。它们中的每一个都有 1 或 2 KB 的状态（现在只是保存在一个字节的 blob 中）。

**编辑：**将“许多”更改为数组（并按照建议使用 Array.iter）解决了这个问题。谢谢大家！

```
type State = {
    one : Class1
    many : Class2 seq
}

type Simulator() = class
    member x.run(state : State) =
        // ....
        while ...
            let input = ReadInput
            if someFuncOf(input)
                then InvokeMethodOn(state.one, input)
                else Seq.iter (fun x -> InvokeMethodOn(x, input)) state.many                

    member x.InvokeMethodOn obj input =
         obj.ChangeInternalState input 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:20:57.303

> 在两次迭代之间，我丢失了对“一个”和“多个”对象的更改！
> 
> 我猜 InvokeMethodOn （显然是简化的）获取了这些对象的副本。

你猜错了；`InvokeMethodOn`只修改`Class1`or的当前状态`Class2`。假设您有`State`每次迭代的记录。因为您没有在任何地方创建 new`Class1`和`Class2`实例，所以这些记录都指向同一个类实例，并且在每次迭代中都以相同的方式进行修改。

> 我认为拥有具有内部可变状态的此类对象并不是什么大问题。至少它是隐藏的。

这是一件大事。您的*隐藏*状态被泄露并导致错误行为。我相信您正在担心性能，因此您想改变`Class1`and`Class2`的状态。我不知道通过引用传递如何帮助你。一个简单的修复方法是编写

```
member x.InvokeMethodOn obj input =
         obj.CreateNewInstanceWith input 
```

并通过调用字段更改为您返回新的`while`某种位置。`Seq.fold``State``InvokeMethodOn`

我认为如果您声明`Class1`and`Class2`作为记录并使用`with`block:会更好`{class1 with value = newValue}`。如果您需要进行性能优化，您可以稍后将记录更改为具有可变字段。此外，不要声明`seq`为记录字段，它会破坏记录的*结构平等*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T08:28:39.677

如果您的 Class1 和 Class2 包含您更改的可变状态，我看不出为什么每次迭代都会丢弃此类更改的原因，除非您以某种方式重新创建 Class1 的新副本。

如果我尝试编写与所呈现内容类似的内容，它运行良好。知道您的代码如何与此不同以找到我们缺少某些东西的地方会很有趣。

```
type Class1 = { mutable label : string}
type Container = { one : Class1; many : Class1 seq}

let a = { label = "a" }
let bs = [ { label = "b1" } ; { label = "b2" }]

let cont = { one =a ; many = bs}
printfn  "%A" cont.one.label

cont.one.label <- "changed a"
cont.many |> Seq.iter (fun x -> x.label <- "changed b")
printfn  "%A" cont

cont.one.label <- "changed again a"
printfn  "%A" cont 
```

请注意，在 F# 中，ref 实际上只是“可变内容”的隐藏表示

```
type 'a ref = { mutable contents : 'a } 
```

你可能想阅读这个关于[FSharp 中的突变的](http://en.wikibooks.org/wiki/F_Sharp_Programming/Mutable_Data)页面 它没有什么魔力，它应该澄清很多事情。

关于可变数据需要注意的一件事是数组默认是可变的：不需要重新声明它们是可变的。

# android - Android Fragment onActivityResult 使用前一个片段的数据转到下一个片段？

> ID：12667357
> 
> 赞同：0
> 
> 时间：2012-10-01T03:56:19.940
> 
> 标签：android, android-fragments, android-viewpager

A 有一个片段（片段 A），它从用户那里获取选定的照片。一旦用户在 Fragment AI 中选择了照片，就想去 Fragment B 并与我一起拍摄所选照片。我也在使用 viewpager，因此用户可以在片段之间滑动...我希望用户能够选择照片并在片段 A 的 onActivityResult 中转到或启动片段 B。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:07:32.490

您将需要使用侦听器（即 FragmentA.onFragmentBListener）在片段之间进行通信。

在 Fragment B 中，您将触发一个动作，并在 FragmentA 中侦听它（然后它可以通过启动或执行任何操作来对事件采取行动）。

这是一个很好的答案： [Android：在片段之间跳转的正确方法](https://stackoverflow.com/questions/7322619/android-correct-way-of-jumping-between-fragments)

# javascript - 单击父元素时如何切换两个图像？

> ID：12667367
> 
> 赞同：0
> 
> 时间：2012-10-01T03:57:58.167
> 
> 标签：javascript, jquery

我需要通过单击父标签来切换两个图像。

这是我的 JavaScript

```
$("#VerColMenu > li > a").click(function() {
    var src = ($(this).children()[0].attr('src') === 'img/plus.png')
    ? 'img/minus.png'
    : 'img/plus.png';
   $(this).children()[0].attr('src', src);
}); 
```

但这里什么也没有发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:03:32.210

`attr`是 jQuery 方法而不是 DOM 方法，所以你不需要`[0]`. 尝试这个：

```
$('#VerColMenu a').click(function(){
  var $img = $(this).children();
  var src = $img.attr('src');
  $img.attr('src', src === 'img/plus.png' ? 'img/minus.png' : 'img/plus.png');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T04:03:45.970

首先`.children()[0]`
将孩子作为 DOM 对象而不是 jQuery 对象..

并且 .attr() 只能用于 jQuery 对象。

尝试**:eq**选择器而不是 **.children()**

```
 $("#VerColMenu > li > a").click(function() {
      var src = ($(this).find('img:eq(0)').attr('src') === 'img/plus.png')
    ? 'img/minus.png'
    : 'img/plus.png';
   $(this).find('img:eq(0)') .attr('src', src);
}); 
```

我假设`.children()[0]` 您的意思是 li 内的第一个图像，因此使用`img:eq(0)` which 将选择 li 内的第一个图像元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T04:09:53.743

附加`[0]`到 jQuery 对象会检索底层的 DOM 对象。除了上面/下面的答案，您还可以使用[`.first()`](http://api.jquery.com/first/)来获取 jQuery 数组集中的第一个元素：

```
$("#VerColMenu > li > a").click(function() {
    var src = ($(this).children().first().attr('src') === 'img/plus.png') ? 'img/minus.png' : 'img/plus.png';
    $(this).children().first().attr('src', src);
}); 
```

[**演示**](http://jsfiddle.net/6jE8A/)

这当然必须被包裹`$(document).ready()`或类似的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T05:38:59.683

使用此代码它可以帮助你

```
 function toggle(a) {
        if (isloaded) {
            document.getElementById(a).src=toggleimage[i_image];
        }
        i_image++
        if (i_image>1) {i_image=0}
    }

 <a href="javascript:toggle()"><img name="togglepicture" src="p1.gif" border="0"></a> 
```

# php - PHP preg_match (.*) 不匹配过去的换行符

> ID：12667369
> 
> 赞同：31
> 
> 时间：2012-10-01T03:58:26.587
> 
> 标签：php, preg-match

我在 LONGTEXT 列中有这些数据（因此保留了换行符）：

```
Paragraph one
Paragraph two
Paragraph three
Paragraph four 
```

我正在尝试匹配第 1 到第 3 段。我正在使用以下代码：

```
preg_match('/Para(.*)three/', $row['file'], $m); 
```

这不返回任何内容。如果我尝试仅在段落的第一行内工作，则通过匹配：

```
preg_match('/Para(.*)one/', $row['file'], $m); 
```

然后代码工作，我得到正确的字符串返回。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-10-01T04:01:53.690

使用`s`修饰符。

```
preg_match('/Para(.*)three/s', $row['file'], $m); 
```

*[模式修饰符](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)*

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-01T04:00:42.187

添加[多行修饰符](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)。

例如：

```
preg_match('/Para(.*)three/m', $row['file'], $m) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T04:02:51.723

尝试将正则表达式设置为[全点](https://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)(PCRE_DOTALL)，因此它包含换行符（末尾的额外 's' 参数）：

```
preg_match('/Para(.*)three/s', $row['file'], $m); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-15T16:22:14.497

如果你不喜欢`/`开头 and ，请使用[T-Regx](https://t-regx.com)

```
$m = Pattern::of('Para(.*)three')->match($row['file'])->first(); 
```

# c# - 使用属性更改图像

> ID：12667370
> 
> 赞同：0
> 
> 时间：2012-10-01T03:58:39.427
> 
> 标签：c#, wpf, xaml

我正在使用 wpf，以下是我的图像状态：

```
<Image Source="{Binding ImageStatus}"  /> 
```

这是分配图像状态值时更改 iamge 状态的代码：

```
 public readonly DependencyProperty ImageStatusProperty;

    public ImageSource ImageStatus
    {
        get { return (ImageSource)GetValue(ImageStatusProperty); }
        set { SetValue(ImageStatusProperty, value); } 
```

我想在从资源分配图像时更改图像。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T08:15:07.863

你`DependencyProperty`一定是`static`。[建议阅读](http://msdn.microsoft.com/en-us/library/ms752914.aspx)。

# apache-flex - 关于 label.text 和 null 对象

> ID：12667374
> 
> 赞同：0
> 
> 时间：2012-10-01T03:59:21.707
> 
> 标签：apache-flex

我曾发表过这样的声明

> ```
>  normaluser.user_idUser
>               = parseInt(idUserInput.text); 
> ```

变量的值是这里的形式

```
 <s:FormItem width="232" label="User ID">
                <s:TextInput id="idUserInput" text="@{UIt.user_idUser}"/>
            </s:FormItem> 
```

假设“idUserInput”总是有价值，但为什么每次我跑到语句时都会出现相同的错误

TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 userDetailComp/update()[C:\Users\School\Adobe Flash Builder 4.6\FYPadminSideV3\src\userDetailComp.mxml:68] 在 userDetailComp/__updateButton_click()[C:\Users\School\Adobe Flash Builder 4.6\FYPadminSideV3\ src\userDetailComp.mxml:230]

附言。第 68 行是语句“parseInt(idUserInput.text);” 第 230 行是点击处理程序

> ```
>  click="update(event)"/> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:26:09.723

我找出问题所在。当我在 textinput 中使用数据绑定时，无法访问 textinput 的文本属性。不知道为什么，=.='，但是当我改变 parseInt(idUserInput.text); 到 parseInt(UIt.user_idUser); 这是数据绑定变量。一切正常。

# wordpress - 魔术场 - 多行编辑器中的“添加图像”按钮不起作用

> ID：12667375
> 
> 赞同：0
> 
> 时间：2012-10-01T03:59:24.580
> 
> 标签：wordpress

我正在使用 Magic Fields（版本 1.5.8.3）[http://wordpress.org/extend/plugins/magic-fields/](http://wordpress.org/extend/plugins/magic-fields/)我必须说这是很棒的插件，但是当我尝试使用“添加多行编辑器中的图像”按钮，当我按下按钮“插入帖子”时，没有插入图像。

在我发布这个问题之前，我还尝试停用所有插件（MF 除外）并切换主题。

截图：[http ://www2.picturepush.com/photo/a/10466810/img/10466810.jpg](http://www2.picturepush.com/photo/a/10466810/img/10466810.jpg)

使用 wordpress 3.2.1

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T02:01:40.253

在尝试检查我注意到的 Magic Fields 插件版本后，我需要将我的 Magic Fields 降级到版本 1.5.8.1，因为我使用的是 wordpress 3.2.1，这是两者的兼容版本。

Magic Fields 下载目录：[http ://wordpress.org/extend/plugins/magic-fields/download/](http://wordpress.org/extend/plugins/magic-fields/download/)

# classloader - 加载类时出现 java.lang.ClassFormatError

> ID：12667377
> 
> 赞同：0
> 
> 时间：2012-10-01T04:00:10.830
> 
> 标签：classloader, abstract-factory, classformaterror

我正在实现 AbstractFactory 模式，允许外人创建工厂。我正在从属性文件中读取工厂实现名称，加载工厂类并使用它来构造对象。问题是，当我尝试创建任务对象时，在我的工厂实现中的某个地方出现以下错误：

> 线程“Thread-1”java.lang.ClassFormatError 中的异常：类文件 com/testsuite/loadperformancetesterusage/tasks/GetUrl 中的代码段长度错误

以下是 GetUrl 构造函数，没什么花哨的！

```
public GetUrl( String protocol, String port, String hostname, String path, String producerClassName ) {
    super(producerClassName);
    this.protocol = protocol;
    this.hostname = hostname;
    this.port = port;
    this.path = path;
} 
```

关于这里可能发生的事情的任何反馈？交叉张贴[在这里](http://www.coderanch.com/t/594047/java/java/java-lang-ClassFormatError-while-loading)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:00:55.527

我使用的类的版本有些不匹配。现在可以了。

# java - 我的支持蓝牙的 Android 应用程序无法运行

> ID：12667382
> 
> 赞同：-2
> 
> 时间：2012-10-01T04:00:58.970
> 
> 标签：java, android, bluetooth

我正在做一个支持蓝牙的 Android 应用程序的项目。

我的应用程序不工作！有一个弹出框，说很*遗憾，蓝牙指示灯（我的应用程序名称）已停止*，我又回到了小部件屏幕。我的 XML 清单文件会有问题吗？

我的布局 XML 代码：

```
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

<Button
    android:id="@+id/buttonON"
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="Turn LED On" />

<Button
    android:id="@+id/buttonOFF"
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:text="Turn LED Off" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T04:05:29.540

对此最常见的答案是您在线程中执行的任务花费了太多时间，结果导致任务无响应并且应用程序因此而被终止。可能的解决方案是：

1.  改进应用程序的业务逻辑
2.  在单独的线程中完成您的任务
3.  采用异步方法

# java - 如何实现 com.objectspace.jgl 包？

> ID：12667383
> 
> 赞同：3
> 
> 时间：2012-10-01T04:01:05.280
> 
> 标签：java, objectspace

我从互联网上下载了一个使用以下代码的代码

```
import com.objectspace.jgl.*;
import com.objectspace.jgl.Array;
import com.objectspace.jgl.algorithms.Shuffling;
import com.objectspace.jgl.algorithms.Sorting;
import com.objectspace.jgl.BinaryPredicate; 
```

我在互联网上搜索过，但找不到 jgl 包。如果有人可以帮我找到这些包中包含的包或方法，那将有很大帮助。任何帮助是极大的赞赏。谢谢。

# jquery - 我的 jQuery 有冲突吗？

> ID：12667388
> 
> 赞同：0
> 
> 时间：2012-10-01T04:01:48.747
> 
> 标签：jquery, html, wordpress

帮助！

我正在使用自定义 WP 主题构建此站点： [http ://armandwho.com/site。](http://armandwho.com/site)

我正在尝试添加一个全屏背景视频（http://codecanyon.net/item/easy-video-background/1365012），并可以让它在这个测试站点[http://clickjoe.com](http://clickjoe.com)上工作（需要一分钟加载）但不在构建站点上。

通过 Safari Inspector 加载页面时出现错误：

/site/#:232TypeError: 'undefined' 不是函数（评估 '$("body").video_background'）

任何人都可以立即说出问题所在吗？

更新：加载构建和测试站点时，我能发现的唯一变化是文件“http://clickjoe.com/flash/video.swf”加载，但该文件没有加载到 BUILD 站点和电话完全一样。有什么东西阻止了这个文件的加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:53:51.130

首先，您包括 jQuery 1.6.2：

```
<script type="text/javascript" src="jquery/jquery-1.6.2.min.js"></script> 
```

这设置了 1.6.2`jQuery`和`$`对象。然后你包括`video_background`插件：

```
<script type="text/javascript" src="js/video_background.min.js"></script> 
```

这扩展了 jQuery 1.6.2`jQuery`和`$`对象以添加该`video_background`方法。稍后，您包含 jQuery 1.7.2：

```
<script type='text/javascript' src='http://armandwho.com/site/wp-includes/js/jquery/jquery.js?ver=1.7.2'></script> 
```

这会覆盖**(!!!)** 1.6.2`jQuery`和`$`对象，并且该`video_background`方法与它们一起使用。然后，在最后，您尝试调用`video_background`：

```
$("body").video_background({ /* ... */ }); 
```

...但`video_background`已经消失了。

* * *

解决方案是*只包含一个 jQuery*，并在`video_background`插件之前包含它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T04:45:44.673

页面加载后在控制台中运行此代码，它可以工作......：

```
$("body").video_background({ format:"16:9",
    mp4:"video/AM.mp4" ,
    formatMobile:"16:9",
    mp4Mobile:"video/AM.mp4" ,
    loop:"true",
    autoplay:"true",
    muted:"true"
  }); 
```

处理程序正在触发（`jQuery(document).ready();`你得到一个错误），我只是不知道为什么。此页面上有大量脚本，可能相互冲突。

当 ready() 处理程序触发时，可能 video_background javascript 文件没有正确加载？

您可以尝试一一删除其他脚本，直到找出问题所在。

# ios - 如何将 UILabel 添加为 UIButton iOS 的子视图

> ID：12667390
> 
> 赞同：3
> 
> 时间：2012-10-01T04:02:00.280
> 
> 标签：ios, uibutton, uilabel, subview

我想`UILabel`在`UIButton`. 这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [[self addressSearch] setDelegate:self];
    [[self worldMap] setDelegate:self];

    self.boolPushButtonTapped = YES;
    self.addressSearch.barStyle = 1;

    //Create pushButton
    self.pushButton = [UIButton buttonWithType:UIButtonTypeCustom];
    self.pushButton.frame = CGRectMake(106, 436, 110, 59);

    [self.pushButton setBackgroundImage:[UIImage imageNamed:@"pushButton2.png"] forState:UIControlStateNormal];
    [self.pushButton addTarget:self action:@selector(pushButtonTapped) forControlEvents:UIControlEventTouchUpInside];

    //Label
    self.distanceLabel = [[UILabel alloc] init];

    self.distanceLabel.text = @"test";

    [self.pushButton addSubview:self.distanceLabel];

    [self.view addSubview:self.pushButton];
} 
```

如果我不使用`alloc` `init`我会收到一个错误，并且如果我使用该标签中的文本不会改变。错误：

```
*** Assertion failure in -[NSLayoutConstraint constant], /SourceCache/Foundation/Foundation-992/Layout.subproj/NSLayoutConstraint.m:560
2012-10-01 14:01:01.889 RemindMe[1116:907] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '(null)' 
```

我想在这个按钮内添加，因为有一个动画。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:36:09.237

UIButtons 现在为您提供了很多控制权，但在可能使用自定义字体之类的东西之前，我只是制作了一个具有 UIButton 和 UILabel 的简单控件。我只是将 UILabel 放在 UIButton 的顶部，并带有 2px 左右的填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:40:48.557

你可以试试这个：

```
[self.pushButton.titleLabel setText: @"anytext"]; 
```

更新的答案：

如[UIButton 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIButton_Class/UIButton/UIButton.html "UIButton 类参考")中所述，您应该使用`setTitle:forState:`.

然后可以在按钮的关联标签对象中完成格式化`titleLabel`。

所以你不需要添加另一个 UILabel。

希望这可以帮助！

# scheme - “要求”在球拍博士中不起作用

> ID：12667394
> 
> 赞同：4
> 
> 时间：2012-10-01T04:02:27.283
> 
> 标签：scheme, racket

我是计划的新手，我正在尝试跟踪一个函数。我必须加载“跟踪”功能。根据球拍文档，我必须执行：

> （需要球拍/跟踪）

但我得到的回应是

> 要求：未定义；
> 不能引用未定义的标识符

我很困惑。如果有区别，我正在使用语言“R5RS”。在此找不到任何在线或堆栈溢出的内容。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-20T13:23:49.560

试试这个：

```
(#%require racket/trace) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T04:56:46.063

Chris Jester-Young 的评论是正确的：不要使用 R5RS。在标准的 R5RS 语言中，没有模块之类的东西。去看看[http://www.schemers.org/Documents/Standards/R5RS/](http://www.schemers.org/Documents/Standards/R5RS/)；没有一个关于模块的词，对吧？

Racket 对标准的重视程度超出了您的预期：如果您告诉它在 R5RS 模式下工作，它将**关闭**标准未描述的语言功能。

如果您使用的是 Racket 工具链，请不要使用 R5RS 语言，除非您真的想使用限制性语言。改用标准的*#lang 球拍*。请参阅：[http](http://docs.racket-lang.org/guide/intro.html) ://docs.racket-lang.org/guide/intro.html ，其中显示了如何在该模式下使用它。

# c - mmap 返回不能分配内存，即使有足够的内存

> ID：12667397
> 
> 赞同：5
> 
> 时间：2012-10-01T04:02:54.927
> 
> 标签：c, linux, memory-management, mmap, leveldb

我正在使用 leveldb 进行压力测试。

在`util/env_poisx.cc : NewRandomAccessFile()`

```
void* base = mmap(NULL, size, PROT_READ, MAP_SHARED, fd, 0); 
```

在插入 300 万个数据（每个 100k）之后。errno 说`Cannot allocate memory`。

为什么？

更多细节：

**最佳：**

```
 PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND                                                         
19794 root      20   0  290g 4.9g 4.7g S 98.6  7.8   2348:00 ldb 
```

**免费-m：**

```
 total       used       free     shared    buffers     cached

Mem:         64350      60623       3726          0        179      59353

-/+ buffers/cache:       1090      63259

Swap:          996          0        996 
```

**ulimit -a：**

```
core file size          (blocks, -c) unlimited
data seg size           (kbytes, -d) unlimited
file size               (blocks, -f) unlimited
pending signals                 (-i) 1024
max locked memory       (kbytes, -l) 32
max memory size         (kbytes, -m) unlimited
open files                      (-n) 10240
pipe size            (512 bytes, -p) 8
POSIX message queues     (bytes, -q) 819200
stack size              (kbytes, -s) 10240
cpu time               (seconds, -t) unlimited
max user processes              (-u) 530432
virtual memory          (kbytes, -v) unlimited
file locks                      (-x) unlimited 
```

**系统控制：**

```
vm.max_map_count = 300000
kernel.shmmni = 8092
kernel.shmall = 4194304
kernel.shmmax = 2147483648 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T16:56:50.203

人地图：

“ENOMEM 没有可用的内存，或者已超出进程的最大映射数。”

当您编写“300 万数据（每个 100k）”时，它似乎与 vm.max_map_count 为 300000 相关。如果您确定有足够的内存，请尝试更改此限制。

请给 /proc/[pid]/maps | wc -l 发生错误时

# xaml - Windows 8 内容属性不起作用

> ID：12667401
> 
> 赞同：1
> 
> 时间：2012-10-01T04:03:30.620
> 
> 标签：xaml, c#-4.0, windows-8, winrt-xaml

我在我的一个班级上设置了 ContentProperty，但是当我用 XAML 编码时，它会产生 XAMLParseException。想知道是否有人可以就我能做什么提供建议。

代码背后：

```
[ContentProperty(Name="Converters")]
class ChainedValueConverter: DependencyObject, IValueConverter
{
    public static readonly DependencyProperty ConvertersProperty = DependencyProperty.Register("Converters", typeof(ObservableCollection<IValueConverter>), typeof(ChainedValueConverter), null);

    public ChainedValueConverter()
    {
        SetValue(ConvertersProperty, new ObservableCollection<IValueConverter>());
    }

    public ObservableCollection<IValueConverter> Converters
    {
        get
        {
            return (ObservableCollection<IValueConverter>)GetValue(ConvertersProperty);
        }
    }

    public object Convert(object value, Type targetType, object parameter, string language)
    {
        object _cValue = value;
        foreach (IValueConverter converter in Converters)
        {
            _cValue = converter.Convert(_cValue, targetType, parameter, language);
            if (_cValue == DependencyProperty.UnsetValue)
                break;
        }
        return _cValue;
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        object _cValue = value;
        foreach (IValueConverter converter in Converters)
        {
            _cValue = converter.ConvertBack(_cValue, targetType, parameter, language);
            if (_cValue == DependencyProperty.UnsetValue)
                break;
        }
        return _cValue;
    }
}
/// <summary>
/// Converts boolean value to visibility.
/// </summary>
class BooleanToVisibilityConverter: IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, string language)
    {
        return (Boolean)value ? Visibility.Visible : Visibility.Collapsed;
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        return (Visibility)value == Visibility.Visible ? true : false;
    }
} 
```

XAML：

```
<common:ChainedValueConverter x:Key="A">
            <common:BooleanToVisibilityConverter />
    </common:ChainedValueConverter> 
```

上面的代码在运行时会产生带有 WinRT 信息的 XamlParseException：E_UNKNOWN_ERROR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T09:06:08.043

我真的很喜欢您对链式转换器的想法，并试图找到解决方案。看来您只需要在构造函数中初始化您的集合（创建一个新实例）。查看我的实现：

```
[ContentProperty(Name = "Converters")]
public class ChainedConverter : DependencyObject, IValueConverter
{
    public ChainedConverter()
    {
        Converters = new ObservableCollection<IValueConverter>();
    }

    public static readonly DependencyProperty ConvertersProperty =
        DependencyProperty.Register("Converters", typeof (ObservableCollection<IValueConverter>), 
        typeof (ChainedConverter), new PropertyMetadata(default(ObservableCollection<IValueConverter>)));

    public ObservableCollection<IValueConverter> Converters
    {
        get { return (ObservableCollection<IValueConverter>) GetValue(ConvertersProperty); }
        set { SetValue(ConvertersProperty, value); }
    }

    public object Convert(object value, Type targetType, object parameter, string language)
    {
        foreach (var c in Converters)
            value = c.Convert(value, targetType, parameter, language);
        return value; 
    }

    public object ConvertBack(object value, Type targetType, object parameter, string language)
    {
        foreach (var c in Converters)
            value = c.ConvertBack(value, targetType, parameter, language);
        return value; 
    }
} 
```

# java - jssc (serialPort.readBytes() ) 与 Arduino

> ID：12667404
> 
> 赞同：1
> 
> 时间：2012-10-01T04:03:44.457
> 
> 标签：java, serial-port, arduino

这是我的 Java 代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package jsscusbconnection;

import jssc.SerialPort;
import jssc.SerialPortEvent;
import jssc.SerialPortEventListener;
import jssc.SerialPortException;

/**
 *
 * @author Heshan
 */
public class JsscUsbConnection {

    /**
     * @param args the command line arguments
     */
    static SerialPort serialPort;

    public static void main(String[] args) {
        serialPort = new SerialPort("COM15");
        try {
            System.out.println("port open :" + serialPort.openPort());//Open port
            serialPort.setParams(SerialPort.BAUDRATE_9600,
                    SerialPort.DATABITS_8,
                    SerialPort.STOPBITS_1,
                    SerialPort.PARITY_NONE);

            int mask = SerialPort.MASK_RXCHAR + SerialPort.MASK_CTS + SerialPort.MASK_DSR;//Prepare mask
            serialPort.setEventsMask(mask);//Set mask
            serialPort.addEventListener(new SerialPortReader());//Add SerialPortEventListener
        } catch (SerialPortException ex) {
            System.out.println(ex);
        }
    }

    static class SerialPortReader implements SerialPortEventListener {

        public void serialEvent(SerialPortEvent event) {
            if (event.isRXCHAR()) {//If data is available
                //System.out.println(event.getEventValue());
                if (event.getEventValue() > 4) {//Check bytes count in the input buffer

                    //Read data, if 10 bytes available
                    try {
                        byte buffer[] = serialPort.readBytes(4);

                        System.out.println(buffer[0] + "  " + buffer[1] + "  " + buffer[2] + "  " + buffer[3]);
                    } catch (SerialPortException ex) {
                        System.out.println(ex);
                    }
                }
            } else if (event.isCTS()) {//If CTS line has changed state
                if (event.getEventValue() == 1) {//If line is ON
                    System.out.println("CTS - ON");
                } else {
                    System.out.println("CTS - OFF");
                }
            } else if (event.isDSR()) {///If DSR line has changed state
                if (event.getEventValue() == 1) {//If line is ON
                    System.out.println("DSR - ON");
                } else {
                    System.out.println("DSR - OFF");
                }
            }
        }
    }
} 
```

这是我的 Arduino 代码：

```
int k=0;

void setup(){
    Serial.begin(9600);
}

void loop(){
    Serial.println(67,BYTE);
    Serial.println(98,BYTE);
    Serial.println(34,BYTE);
    Serial.println(108,BYTE);
    Serial.flush();
} 
```

这是我的 Java 代码输出：

> 67 **13** **10** 98
> **13** **10** 34 **13**
> **10** 108 **13** **10**
> 67 **13** **10** 98

那些大胆的价值观是什么？我不知道这些未知值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T19:31:51.947

10 和 13 字节是 \r\n 符号。[来自http://arduino.cc](http://arduino.cc)`println()`的函数描述：

> 将数据作为人类可读的 ASCII 文本打印到串行端口，后跟回车 > 字符（ASCII 13 或“\r”）和换行符（ASCII 10 或“\n”）。该命令采用与 Serial.print() 相同的形式。

如果您不需要这些结束行符号，请使用[print()](http://arduino.cc/en/Serial/Print)函数或[write()](http://arduino.cc/en/Serial/Write)函数发送原始字节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T10:07:35.563

13是回车。10 是换行符。如果您正在处理串行 I/O，您应该知道这一点。9 是一个选项卡。12是换页。检查[ASCII 表](http://en.wikipedia.org/wiki/ASCII)。

# ios - 安装了 Xcode 4.5，MPMoviePlayerController 不再工作

> ID：12667406
> 
> 赞同：0
> 
> 时间：2012-10-01T04:03:50.917
> 
> 标签：ios, xcode, ios6

我很高兴看到当“升级”到 Xcode 4.5 时，我的应用程序中的任何视频都无法播放。

通常我会这样做：

```
self.moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:[self getBundleClip:@"theVideo"]];
self.moviePlayer.controlStyle = MPMovieControlStyleNone;
self.moviePlayer.shouldAutoplay = YES;
self.moviePlayer.repeatMode = MPMovieRepeatModeOne;
self.moviePlayer.view.frame = self.container.frame;
self.moviePlayer.view.userInteractionEnabled = NO;
[self.container addSubview:self.moviePlayer.view];

- (NSURL*)getBundleClip:(NSString*)clip
{
    NSBundle *bundle = [NSBundle mainBundle];
    NSString *moviePath = [bundle pathForResource:clip ofType:@"mp4"];
    return [NSURL fileURLWithPath:moviePath];
} 
```

同样，在我将 Xcode 更新到 4.5 之前，一切都运行良好。其他人有这个问题吗？

我也得到这个输出：

```
[MPAVController] Autoplay: Disabling autoplay for pause
[MPAVController] Autoplay: Disabling autoplay 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T07:48:45.100

我想你在函数中定义它？

如果你使用 ARC，你必须保留 MPMoviePlayerController

将其添加到接口文件中！

```
@property(nonatomic, strong) MPMoviePlayerController *moviePlayer; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T04:55:52.323

我不确定为什么它没有专门播放，但看起来行为会有所不同，具体取决于您构建的 iOS SDK 版本。查看[`MPMoviePlayerController`文档](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)。

特别是，您可能想尝试`prepareToPlay`在电影播放器​​上调用该方法。

# c++ - C++11 中来自 C99 的 fenv.h

> ID：12667409
> 
> 赞同：1
> 
> 时间：2012-10-01T04:04:05.533
> 
> 标签：c++, c, c++11

C99 中的 fenv.h 是否存在于 C++11 中？还有其他方法可以使用像 fesetround 这样的功能吗？也许提升？

gcc 4.7.2 编译此代码：

```
#include <cfenv>

int main() {} 
```

[http://liveworkspace.org/code/ffbd8e8a24633c7e74f7bcead3b1a287](http://liveworkspace.org/code/ffbd8e8a24633c7e74f7bcead3b1a287)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T04:08:11.867

> **`fenv.h`from`C99`存在`C++11`于?**

是的，它确实。

**参考：**

```
26.3 The floating-point environment [cfenv]
Standard C++11 26.3.1 Header <cfenv> synopsis [cfenv.syn] 
```

* * *

> **还有其他使用函数的方法`fesetround()`吗？也许提升？**

该函数`fesetround()`已由`cfenv`C++11 提供。
此外，`fenv.h`还存在于 C++11 中，以提供对 c 标准头文件的向后兼容性。它涵盖在：

```
D.5 C standard library headers [depr.c.headers] 
```

* * *

> **使用`fenv.h`or 和有什么不一样`cfenv`？**

包括在命名空间和*可能*在全局命名空间`cfenv`中导入符号名称。包括在全局命名空间和*可能*在命名空间中导入符号名称。`std`*`fenv.h`*`std`**

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T04:06:48.263

[是的，确实如此](http://en.cppreference.com/w/cpp/numeric/fenv/feround)。`cfenv`似乎是正确的标题，它只是在 C++11 中添加的。**

# java - 连接数组的两个元素以创建新的数组元素

> ID：12667410
> 
> 赞同：0
> 
> 时间：2012-10-01T04:04:15.517
> 
> 标签：java, arrays, string-concatenation

我遇到了组合数组值的问题。我想组合一个数组的两个值来为另一个数组创建一个值。这是我的代码：

```
String [] candid = {"A","B","C","D","E"};

String [] candidates = new String[candid.length];
        for (int i=0;i<candid.length;i++){
            candidates[i] = candid[i]+","+candid[i+1];
        } 
```

但是该命令`candidates[i] = candid[i]+","+candid[i+1];`不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T04:08:03.587

您可能想声明`candidates`为

```
String [] candidates = new String[candid.length-1]; 
```

Ps 注意：假设`candidate`是`candid`

**更新 ：**

根据 OP 的评论`candidates`初始化为

```
 String [] candidates = new String[candid.length]//Length of candid is used in the 
 question 
```

所以初始分析成立，代码将为`ArrayIndexOutOfBoundsException`最后一个元素生成，即`i+1`。

发生这种情况的原因是数组中只有 6 个元素，并且当`i is 6 the element`您尝试访问`7 th`元素时。数组索引是我正在裁判的地方的-1。因此，如果长度为 5，您将尝试访问 6。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T04:15:40.500

不知道你想要 Candidate.length 代表什么，但这是我尝试过的，它似乎有效：

```
public static void main(String[] args) {
    String[] candid = { "A", "B", "C", "D", "E" };
    String[] candidates = new String[candid.length-1];
    for (int i = 0; i < candid.length-1; i++) {
        candidates[i] = candid[i] + "," + candid[i + 1];
    }
    for (String s : candidates) {
        System.out.println(s);
    }
} 
```

将“candidate.length”替换为“candid.length-1”

输出结果为：

> A,B
> B,C
> C,D
> D,E

# c# - 确定字符串是否具有所有唯一字符

> ID：12667415
> 
> 赞同：2
> 
> 时间：2012-10-01T04:05:07.437
> 
> 标签：c#, algorithm

我正在研究一个提出以下问题的算法问题集：

“确定一个字符串是否具有所有唯一字符。假设您只能使用数组”。

我有一个可行的解决方案，但我想看看在时间复杂度方面是否有更好的优化。我不想使用 LINQ。感谢您提供的任何帮助！

```
static void Main(string[] args)
{
    FindDupes("crocodile");
}

static string FindDupes(string text)
{
    if (text.Length == 0 || text.Length > 256)
    {
        Console.WriteLine("String is either empty or too long");
    }

    char[] str = new char[text.Length];
    char[] output = new char[text.Length];

    int strLength = 0;
    int outputLength = 0;

    foreach (char value in text)
    {
        bool dupe = false;
        for (int i = 0; i < strLength; i++)
        {
            if (value == str[i])
            {
                dupe = true;
                break;
            }
        }
        if (!dupe)
        {
            str[strLength] = value;
            strLength++;

            output[outputLength] = value;
            outputLength++;
        }
    }
    return new string(output, 0, outputLength);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-01T04:29:08.050

如果您只关心时间复杂度，您可以将字符映射到 int 值，然后拥有一个 bool 值数组，这些值会记住您之前是否看过特定的字符值。

像... [未测试]

```
bool[] array = new bool[256]; // or larger for Unicode

foreach (char value in text)
  if (array[(int)value])
    return false;
  else
    array[(int)value] = true;

return true; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T04:10:33.123

试试这个，

```
 string RemoveDuplicateChars(string key)
    {
        string table = string.Empty;
        string result = string.Empty;
        foreach (char value in key)
        {
            if (table.IndexOf(value) == -1)
            {
                table += value;
                result += value;
            }
        }
        return result;
    } 
```

用法

```
Console.WriteLine(RemoveDuplicateChars("hello"));
Console.WriteLine(RemoveDuplicateChars("helo"));
Console.WriteLine(RemoveDuplicateChars("Crocodile")); 
```

输出

```
helo
helo
Crocdile 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T05:04:58.677

```
public boolean ifUnique(String toCheck){
    String str="";
    for(int i=0;i<toCheck.length();i++)
    {
         if(str.contains(""+toCheck.charAt(i)))
             return false;
         str+=toCheck.charAt(i);
    }
    return true;
} 
```

编辑：

您也可以考虑省略 toCheck 是空字符串的边界情况。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T20:01:30.690

以下代码有效：

```
 static void Main(string[] args)
    {
        isUniqueChart("text");
        Console.ReadKey();

    }

    static Boolean isUniqueChart(string text)
    {
        if (text.Length == 0 || text.Length > 256)
        {
            Console.WriteLine(" The text is empty or too larg");
            return false;
        }
        Boolean[] char_set = new Boolean[256];
        for (int i = 0; i < text.Length; i++)
        {
            int val = text[i];//already found this char in the string
            if (char_set[val])
            {
                Console.WriteLine(" The text is not unique");
                return false;
            }
            char_set[val] = true;
        }
        Console.WriteLine(" The text is unique");
        return true;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-24T21:11:47.340

如果字符串只有小写字母 (az) 或只有大写字母 (AZ)，您可以使用非常优化的 O(1) 解决方案。也可以使用 O(1) 空间。

C++代码：

```
bool checkUnique(string s){
    if(s.size() >26)
        return false;
    int unique=0;
    for (int i = 0; i < s.size(); ++i) {
        int j= s[i]-'a';
        if(unique & (1<<j)>0)
            return false;
       unique=unique|(1<<j);
   }
   return true;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-22T08:57:05.200

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-09-22T08:00:13.457

```
public static bool CheckUnique(string str)
{
    int accumulator = 0;
    foreach (int asciiCode in str)
    {
        int shiftedBit = 1 << (asciiCode - ' ');
        if ((accumulator & shiftedBit) > 0)
            return false;
        accumulator |= shiftedBit;
    }
    return true;
} 
```

# scala - 如何将一段中文文本拆分为单个字符？

> ID：12667419
> 
> 赞同：1
> 
> 时间：2012-10-01T04:05:31.273
> 
> 标签：scala, text, machine-learning, nlp

我正在做一个机器学习项目，我在中文文本上构建一个朴素贝叶斯分类器。我想使用 n-gram 汉字作为特征，所以我需要能够将文本拆分为 unigrams（单个字符）、bigrams（两个字符的序列）等等。（我不关心特殊的标记化之类的——我只想要原始字符作为 n-gram。）

我如何在 Scala 中做到这一点？我试图`text.sliding(2)`获得二元组，但这似乎并不奏效。（我猜是因为汉字不像英文那样是一个字节？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T08:31:52.640

一般来说，这是一个关于在 Java 中正确处理 Unicode 的问题，因此也是关于 Scala 的问题。从我对互联网的粗略浏览来看，似乎没有“一种真正的方法”来处理 Java 中的 Unicode。我不是 NLP 人，所以我对您想要做*什么的理解可能不正确。*

```
val text = "囗土夊米"  

val unigrams = text.toCharArray 

/* With the constraint unigrams is even, without the toString you get weird coercions */
val bigrams = 
  for (i <- 0 until unigrams.length if i % 2 == 0) yield unigrams(i).toString + unigrams(i + 1) 
```

类似的东西应该很容易推广到一组 n-gram 函数，这些函数将提取你需要的东西，这些当然是简单的幼稚实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T04:09:34.700

试试mecab。我使用 mecab 为日语和中文创建令牌。一旦安装了 mecab……python api。

请参阅此参考。

[非英语语言（CJK 等）中的 n-gram 名称分析](https://stackoverflow.com/questions/10034881/n-gram-name-analysis-in-non-english-languages-cjk-etc)

有关如何安装 mecab，请参阅此内容。

[http://nlp.solutions.asia/?tag=ubuntu](http://nlp.solutions.asia/?tag=ubuntu)

# jquery - jQuery 淡出和淡入问题

> ID：12667424
> 
> 赞同：1
> 
> 时间：2012-10-01T04:06:35.937
> 
> 标签：jquery, fadein, fadeout

我想用一些类别链接过滤投资组合拇指。流沙的bug太多，我宁愿自己写代码。我对 jQuery 还很陌生，所以我知道我会遇到问题，并且可能会遇到过多的代码。:)

我继续创建了一个 jsFiddle 来显示问题：

[http://jsfiddle.net/zHWgG/1/](http://jsfiddle.net/zHWgG/1/)

看看它是如何闪烁的？想要的效果是我单击一个过滤器，所有可见的都完全淡出，然后只有相应的拇指淡入。它工作且有效的 jQuery，但我怎么能：

1.  摆脱闪烁效果

2.  简化/创建更精简的代码（更少的字节）

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T04:10:46.510

使用动画结束回调。

```
$('.item').fadeOut(500, function() {
     $('.item').fadeIn(500);
}); 
```

**编辑：** 闪烁的发生是因为不可见的 .portfolio-itens 正在淡出 - 它们在效果激活时变得可见。尝试使用这个：

```
$('.portfolio-item:visible').fadeOut(500, function() {
     $('.item').fadeIn(500);
}); 
```

伪选择器`:visible`将仅为所需元素激活淡出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T04:45:01.003

要停止闪烁，您应该添加`.stop()`到您的代码 -> [http://api.jquery.com/stop/](http://api.jquery.com/stop/)

[http://jsfiddle.net/rrikesh/dS5zV/](http://jsfiddle.net/rrikesh/dS5zV/)

```
$('#all').click(function() {
        //fade out entire set (transition looks better)
        $('.portfolio-item').stop(true,true).fadeOut(500);
            //fadeIn all thumbs
            $('.portfolio-item').fadeIn(500);
        });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T05:31:49.387

试试这个来减少代码：

```
 $('.menu_item').click(function(){
    var callBack = (function(itemsToShow){
        $('.portfolio-item:visible').fadeOut(500, function() {
            $(itemsToShow).fadeIn(500);
        });
    });

    switch ($(this).attr('id')){
        case 'all':
            callBack('.portfolio-item');
            break;
        case 'web':
            callBack('.web');
            break;
        case 'graphic':
            callBack('.graphic');
            break;
        case 'logo':
            callBack('.logo');
            break;
        case 'motion':
            callBack('.motion');
            break;

    }                
}); 
```

从上面可以看出，我`menu_item`在导航列表中添加了类

[http://jsfiddle.net/zHWgG/18/](http://jsfiddle.net/zHWgG/18/)

# jquery - 为什么我的菜单按钮打不开链接？CSS、jQuery 或 HTML 问题？

> ID：12667425
> 
> 赞同：0
> 
> 时间：2012-10-01T04:06:37.577
> 
> 标签：jquery, css

为什么单击后我的主菜单按钮无法打开 URL 链接？主要的**绿色按钮**不是下拉菜单。是 CSS、jQuery 还是 HTML noob 错误？是否可以同时具有下拉菜单和可单击主按钮？

**[点击实际网站](http://www.restoredestates.com/)**布局上的“联系”按钮**/http://www.restoredestates.com/**

 **不起作用的代码：

```
 <ul>
        <li class="button"><a href="contact.html" target="_blank" class="green">Contact<span></span></a></li> 
```

**奇怪的是它适用于 jsfiddle 代码：http:** [//jsfiddle.net/VCUgrad08/rapat/1/embedded/result/](http://jsfiddle.net/VCUgrad08/rapat/1/embedded/result/)

它在实际网站上不起作用。:( 我需要“contact”按钮才能真正链接到“contact.html”（不是下拉菜单，现在上面的链接只是暂时的）

免责声明：我急于编写这个网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T04:32:52.380

试试这个代码。希望它会工作

```
<ul>
    <li class="button">
    <a class="green contact" target="_blank" href="contact.html"> 
```

js

```
 $("contact").click(function(){
        window.open("http://www.restoredestates.com/contact.html", "_blank");
    }); 
```**

# orchardcms - 如何在 Orchard CMS 中为页面组设置不同的二级菜单？

> ID：12667431
> 
> 赞同：0
> 
> 时间：2012-10-01T04:07:17.983
> 
> 标签：orchardcms

我必须使用主菜单（简单）来实现导航，但是每​​个菜单都会指向一组页面，这些页面有另一个“子菜单”，我在前面的内容区域中将其作为菜单小部件实现。

主导航是这样的：

主页 | 第一组 | 一些页面 | 另一页 | 第二组 | 又一页

当用户单击 Home、Some page、Yet another page 时，会直接进入该页面。

如果用户单击任何“组”，则会转到该组的“默认页面”，并且作为菜单小部件实现的子菜单显示在前面的内容区域中。第一组可以有5页

第 1.1 页 | 第 1.2 页 | 第 1.3 页 | 第 1.4 页 | 等等

第二组将有另一组页面。

我天真地设置了子页面的路径属性，以便它们共享一个公共路径：

/group-1/page-1-1 /group-1/page-1-2 /group-2/page-1-3 等

/group-2/page-2-1 /group-2/page-3-1 等

我期待使用匹配路径将一个小部件菜单隐藏在一个路径或另一个路径下。但问题是我不能针对特定的菜单或小部件，只能针对一般的内容类型等。我不能做这样的事情：

```
<Match Path="/group-1/*" ContentType="Widget SOME WAY TO TARGET A SPECIFIC WIDGET!!!">
     <!-- SEND THE NEEDED PARTS TO OBLIVION SO THAT ONLY THE CORRECT MENU SHOWS HERE --!>
    <Place Parts_Common_Body="-" />
</Match> 
```

我相信使用层规则来定位特定路径会更好，但我无法将层规则与 url("/group-1/*") 之类的东西匹配，所以这就是我为什么尝试使用似乎是错误工具的展示位置信息。

例如，有没有办法可以扩展图层规则以使用正则表达式？通过这种方式，我可以创建非常强大的图层，并将我的小部件布局在适当的图层上。

总之，我想要的是为网站的不同部分设置不同的子菜单。我只是有点迷失如何实现这一点，但层规则似乎是正确的工具，只有当我能够设法使用更强大的匹配语法时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:13:25.073

我觉得我有点瞎！！！

直接来自文档：

> `url("<url path>")`
> 如果当前 URL 与指定路径匹配，则为真。如果在路径末尾添加星号 (*)，则在该路径下的子文件夹中找到的所有页面都将评估为真（例如，`url("~/home*")`）。

因此，添加此规则足以为网站的整个部分创建一个图层：

**url("~/group-1*")**

我几乎为自己感到羞耻...

# python - Python：单词列表的 NLTK 概率

> ID：12667435
> 
> 赞同：0
> 
> 时间：2012-10-01T04:07:35.093
> 
> 标签：python, nltk

我一直在计算我的语料库中的单词列表，并查看单词列表的概率。

我一直在计算每个单词的频率，然后用 EXCEL 求和，但这确实需要很长时间。我名单上的字数是几千..

我只是想总结一下单词列表的频率总数，然后看单词的概率。

```
 genres = ['C:/A1.txt','C:/A2.txt','C:/A3.txt']
 modals = ['can', 'could', 'may', 'might', 'must', 'will']

 cfd = nltk.ConditionalFreqDist(
        (genre, word)
        for genre in genres
        for word in modals)

 cfd.tabulate(conditions=genres, samples=modals) 
```

请帮帮我。我已经花了两天时间来解决这个问题..

非常感谢你。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T04:48:45.353

这是我用来获取频率计数的函数。它使用 numpy 数组。您可以修改代码以获取概率。

```
def freqCount(y_list):
        x =array(y_list)
        y = bincount(x)
        ii = nonzero(y)[0]
        freq = zip(ii,y[ii])
        f = open(fn_freq,'w')
        f.write('Distribution:\n')
        print 
        print "Distribution:"
        freq_dict={}
        for ff in freq:
            temp = "%s %s\n" % (ff[0],ff[1])
            f.write(temp)
            print ff[0],ff[1]
            freq_dict[ff[0]]=ff[1]
        f.close()
        return freq_dict 
```

# php - 循环遍历包含 [] 的变量

> ID：12667442
> 
> 赞同：0
> 
> 时间：2012-10-01T04:08:19.760
> 
> 标签：php, concatenation

我正在尝试创建一个 PHP 函数，它将从数据库中回显信息。我的 col 名称看起来像banana[1]、banana[2]、apple[1]、apple[2]、apple[3] 等等。

该功能将选择水果

```
function fruits($fruit){

} 
```

然后在该函数中，我将遍历水果。

我该如何回应这些？

```
echo $fruit[$i]; 
```

显然行不通。

很基本，但我无法弄清楚。串联杀死我。

```
function ponctuation($section,$sect){

switch($section){
    case 'apple':
        $i=1;
    break;
    case 'banana':
        $i=13;
    break;
}

global $mysql_tablename;
global $FName;
global $Lname;

if(isset($mysql_tablename)){
$result = mysql_query("SELECT * FROM $mysql_tablename WHERE FName='$FName' AND Lname='$Lname'");
    $row = mysql_fetch_array($result);

echo '<form method="post" action="ponctuation.php?'.${$section.$sect}.'_valider">';
echo '<ul>';
$query = mysql_query("SELECT * FROM `ponct_enonces` WHERE `section`='$section' AND `sect`='$sect'");
while($row_q = mysql_fetch_assoc($query)) {
    if($row_q['enon']==0 && $row_q['senon']==0){
        echo '<h2>'.$row_q['enonce'].'</h2>';
    }
    if($row_q['enon']==1){
            echo '<h3>'.$row_q['enonce'].'</h3>';
            echo '<textarea rows="3" cols="100" name="'.$i.'" wrap="physical">' . $row[$section[$i]] . '</textarea>';
    }
    if($row_q['senon']==1){
            echo '<h4>'.$row_q['enonce'].'</h4>';
            echo '<textarea rows="3" cols="100" name="'.$i.'" wrap="physical">' . $row[$section]. '</textarea>';
    }
    $i++;
    }
echo '</ol>';
echo '<input type="submit" name="submit" value="Valider"/>';
echo '</form>';
} 
```

}

代码有点难看，有的 var 有法语名字，有的有英文名字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T04:12:20.173

col 名称不会为您扩展为 PHP 数组结构，例如

```
SELECT fruit[1], fruit[2], ...., fruit[100] 
```

会给你相当于

```
$row = array(
   'fruit[1]' => someval,
   'fruit[2]' => someval,
   ...
); 
```

如果你想迭代那些，你将不得不变得丑陋：

```
$fruit = array();
for ($i = 0; $i <= 100; $i++) {
    $fruit[$i] = $row['fruit[' . $i . ']'];
} 
```

这引出了一个问题……为什么？这是一个可怕的数据结构。将其正确规范化为“水果属性”子表将为您省去这个麻烦，并且还允许您拥有`n`属性，而不是固定的 1..100 范围或您拥有的任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T04:16:00.737

如果您尝试循环遍历一行中的所有列，您可以使用`fetch_array`：

```
$result = $mysqli->query($query);
$row = $result->fetch_array();

// loop over columns
for ($i = 0, $count = count($row); $i < $count; $i++)
    echo $row[$i]; 
```

这样，您就不必担心列名。不过，我可能误解了你的问题。

# javascript - 使用 jQuery 检索复选框值

> ID：12667443
> 
> 赞同：2
> 
> 时间：2012-10-01T04:08:21.790
> 
> 标签：javascript, jquery, html

我有以下 HTML：

```
<input type="checkbox" value="1"  class="trchoose">
<input type="checkbox" value="1"  class="trchoose">
<input type="checkbox" value="1"  class="trchoose">
<input type="checkbox" value="1"  class="trchoose"> 
```

以下是我的 jQuery 代码：

```
jQuery('.trchoose').click(function() {
    alert('');
    res= jQuery(this).attr('class');
    alert(res);
}); 
```

现在我需要获取被点击的特定复选框的值。上面的 jQuery 代码不起作用。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:13:21.580

这很简单。

```
<input type="checkbox" value="1"  class="trchoose">
<input type="checkbox" value="2"  class="trchoose">
<input type="checkbox" value="3"  class="trchoose">
<input type="checkbox" value="4"  class="trchoose">​ 
```

请检查，您的第二个复选框未关闭！

```
jQuery(document).ready(function(){
  $('.trchoose').click(function() {
    alert($(this).val());
  });​
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T04:13:41.377

```
jQuery('.trchoose').click(function() {
    alert('');
    var res= this.value; // or jQuery(this).val() for jQuery version, but overhead.
    alert(res);
}); 
```

我认为这`res`不是全局变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T04:12:31.020

演示：http: [//jsfiddle.net/32VQ8/](http://jsfiddle.net/32VQ8/)

```
jQuery(document).ready(function ($) {
  $('.trchoose').click(function() {
    alert($(this).val());
  });
});​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T04:12:31.773

像这样的东西应该工作：

```
$('.trchoose').on('change', function() {
    var value = $(this).val();
});​ 
```

**演示：http: [//jsfiddle.net/Blender/S4RVC/](http://jsfiddle.net/Blender/S4RVC/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T04:12:57.463

试试这个：

```
jQuery('.trchoose').click(function() {
    alert('');
    var res= jQuery(this).val();
    alert(res);
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T04:14:23.477

试试这个

```
function countChecked() {
  var n = $("input:checked").val();
     alert(n);
}
countChecked();
$(":checkbox").click(countChecked); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-01T04:20:25.437

试试这个..

```
jQuery('.trchoose').click(function() {
         alert(jQuery(this).val());
}); 
```

小提琴在[这里](http://jsfiddle.net/LkM8u/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-01T04:59:00.740

如果 HTML 被插入 DOM，你应该使用[.on()](http://api.jquery.com/on/)

```
$('.trchoose').on('click', function() {
    alert($(this).val());
}); 
```

# documentation - 重新安装后如何使用 rvm 生成文档？

> ID：12667445
> 
> 赞同：1
> 
> 时间：2012-10-01T04:09:32.703
> 
> 标签：documentation, rvm

我按照[http://rvm.io](http://rvm.io)上的说明安装了 RVM 。这是我所做的 **`rvm list`**：

```
rvm rubies

=* ruby-1.9.3-p194 [ x86_64 ]

# => - current
# =* - current && default
#  * - default 
```

后跟一个**`ruby -v`**：

```
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-darwin11.4.0] 
```

然后是**`rvm docs generate`**：

```
Currently 'rvm docs ...' does not work with non-rvm rubies. 
```

然后我尝试了**`rvm reinstall 1.9.3 && rvm docs generate`**。这导致 rvm 给了我上述错误。

**如何使用 rvm 生成文档？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:03:50.593

你需要先使用红宝石：

```
rvm use 1.9.3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:24:05.030

我正在使用 rvm 二进制文件（即我没有从源代码构建它）。有关更多详细信息，请参阅[此 git 问题](https://github.com/wayneeseguin/rvm/issues/1195)。执行 a`rvm reinstall 1.9.3 --disable-binary`将从源代码构建 rvm 并允许您使用 rvm 生成文档。（至少对于 1.9.3 版）

# java - Primefaces 登录应用程序

> ID：12667449
> 
> 赞同：0
> 
> 时间：2012-10-01T04:10:29.350
> 
> 标签：java, jsf, jakarta-ee, web-applications, primefaces

> **可能重复：**
> [JSF HTTP 会话登录](https://stackoverflow.com/questions/3841361/jsf-http-session-login)

我正在使用 Primefaces 来实现我的 Web 应用程序。在我的实现中，用户可以登录到系统，然后他们可以通过复制该 URL 再次加载重定向页面而无需再次登录。我怎样才能防止这种情况？

这是我的登录逻辑：

```
public String doLogin() {
    if(username != null  &&
        username.equals("admin") &&
        password != null  &&
        password.equals("admin")) {
        msg = "table?faces-redirect=true";
    } else
        if(user_name.contains(username) &&
            pass_word.contains(password) &&
            !user_name.contains("admin")) {
            msg = "table1?faces-redirect=true";
        }
    }
    return msg;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T04:31:20.330

如果用户会话没有过期，那么这是 Web 应用程序的正常行为。如果会话已过期，那么您必须确保有一个已登录的用户，并且该用户有权访问他/她在 URL 中使用的页面。您可以使用过滤器来实现此目的。

我假设您的 Web 应用程序位于 Java EE 6 容器上，例如 Tomcat 7 或 GlassFish 3.x：

```
@WebFilter(filterName = "MyFilter", urlPatterns = {"/*.xhtml"})
public class MyFilter implements Filter {

    public void doFilter(
        ServletRequest request, ServletResponse response, FilterChain chain)
        throws IOException, ServletException {

        //get the request page
        String requestPath = httpServletRequest.getRequestURI();
        if (!requestPath.contains("home.xhtml")) {
            boolean validate = false;
            //getting the session object
            HttpServletRequest httpServletRequest = (HttpServletRequest) request;
            HttpSession session = (HttpSession)httpServletRequest.getSession();
            //check if there is a user logged in your session
            //I'm assuming you save the user object in the session (not the managed bean).
            User user = (User)session.get("LoggedUser");
            if (user != null) {
                //check if the user has rights to access the current page
                //you can omit this part if you only need to check if there is a valid user logged in
                ControlAccess controlAccess = new ControlAccess();
                if (controlAccess.checkUserRights(user, requestPath)) {
                    validate = true;
                    //you can add more logic here, like log the access or similar
                }
            }
            if (!validate) {
                HttpServletResponse httpServletResponse = (HttpServletResponse) response;
                httpServletResponse.sendRedirect(
                    httpServletRequest.getContextPath() + "/home.xhtml");
            }
        }
        chain.doFilter(request, response);
    }
} 
```

您的 ControlAccess 类的一些实现：

```
public class ControlAccess {

    public ControlAccess() {
    }

    public boolean checkUserRights(User user, String path) {
        UserService userService = new UserService();
        //assuming there is a method to get the right access for the logged users.
        List<String> urlAccess = userService.getURLAccess(user);
        for(String url : urlAccess) {
            if (path.contains(url)) {
                return true;
            }
        }
        return false;
    }
} 
```

* * *

在寻找解释这一点的好方法时，我从 BalusC（JSF 专家）那里找到了更好的答案。这是基于 JSF 2 的：

*   [JSF HTTP 会话登录](https://stackoverflow.com/a/3842060/1065197)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T05:48:07.727

您可以进行[基于表单的身份验证](http://javaevangelist.blogspot.com/2011/06/jsf-2x-facelets-form-based.html)，以保护您的内页不被未经身份验证的用户访问。

您还可以让容器使用 JDBC 领域身份验证为您处理身份验证，如[本例所示](http://jugojava.blogspot.com/2011/02/jdbc-security-realm-with-glassfish-and.html)

# asp.net-mvc - 使用 ASP.NET、NHibernate / Fluent NHibernate 的最轻松的多租户实现

> ID：12667467
> 
> 赞同：3
> 
> 时间：2012-10-01T04:13:20.597
> 
> 标签：asp.net-mvc, nhibernate, fluent-nhibernate, multi-tenant

我正在尝试在我拥有的使用 NHibernate 的 ASP.NET MVC 应用程序中实现多租户。虽然我可以控制多租户的数据库。我试图找出使用 NHibernate 过滤数据库查询的最佳方法。

我想知道是否有一种无痛的方式，我可以`WHERE InstanceID = 1`使用 NHibernate 将条件（类似于）附加到每个 CRUD 查询到数据库。

我查看了全局过滤器。但我不确定我是否以正确的方式使用它。我尝试过这样的事情。

```
NHibernateSession.GetDefaultSessionFactory().GetCurrentSession()
.EnableFilter("instance-filter").SetParameter("InstanceId", "2"); 
```

但它似乎没有用。NHibernate 全局过滤器的任何好的例子/过滤所有数据库查询的任何好的方法都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T08:04:40.577

我一直在为我仍在规划阶段的一个小项目寻找同样的东西。我遇到的使用单个数据库的最完整实现是由[Michael Valenty](http://www.agileatwork.com/)在他的博客文章中编写的：[使用 Unity 和 NHibernate 的 ASP.NET MVC 中的螺栓固定多租户：第二部分 - 混合数据](http://www.agileatwork.com/bolt-on-multi-tenancy-in-asp-net-mvc-with-unity-and-nhibernate-part-ii-commingled-data/)。他还使用全局过滤器。

只是为了完整起见，以下是他使用的映射：

```
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
    <filter-def name="tenant">
        <filter-param name="id" type="System.Int32" />
    </filter-def>
</hibernate-mapping> 
```

对于每个实体：

```
<class name="User" table="[user]">
    <id name="Id" column="user_id">
        <generator class="identity" />
    </id>

    <property name="Username" />
    <property name="Email" />

    <filter name="tenant" condition="tenant_id = :id" />
</class> 
```

之后，他使用他选择的 IoC 容器将参数值注入到 ISession 的实例中。

```
session.EnableFilter("tenant").SetParameter("id", c.Resolve<Tenant>().Id); 
```

还有一个拦截器要实现——在保存实体（方法）时写入当前租户id的值，并在通过id（方法）`OnSave`加载实体时检查给定实体是否属于当前租户。覆盖是必要的，因为在通过 id 加载实体时不会应用租户过滤器。`OnLoad``OnLoad`

# java - 具有日期和时间格式的 Java JTextField

> ID：12667472
> 
> 赞同：1
> 
> 时间：2012-10-01T04:13:51.417
> 
> 标签：java, swing, date, datetime

> **可能重复：**
> [HH:mm:ss 中的 JTextField 时间](https://stackoverflow.com/questions/5914909/jtextfield-time-in-hhmmss)

无法制作这样的 JtextField：enterHour/enterMin/enterSec，即“/”不可编辑？并检索这些数据？

# devise - Active_admin 的设计 i18n 翻译不完整，正确的资源在哪里？

> ID：12667475
> 
> 赞同：0
> 
> 时间：2012-10-01T04:14:16.587
> 
> 标签：devise, activeadmin

虽然这里有一些翻译：

[https://github.com/gregbell/active_admin/tree/master/lib/active_admin/locales](https://github.com/gregbell/active_admin/tree/master/lib/active_admin/locales)

但它的设计并不完整。

我在哪里可以找到最好的资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:22:12.730

请按照以下说明操作：

```
$ cd config/locales && wget https://raw.github.com/diaspora/diaspora/master/config/locales/devise/devise.en.yml
$ wget https://raw.github.com/diaspora/diaspora/master/config/locales/devise/devise.fr.yml 
```

# Création d'une 应用程序 ruby​​onrails avec 设计 CanCan et ActiveAdmin

[http://blog.escarworld.com/post/2011/09/23/Cr%C3%A9ation-d-une-application-rubyonrails-avec-Devise-CanCan-et-ActiveAdmin](http://blog.escarworld.com/post/2011/09/23/Cr%C3%A9ation-d-une-application-rubyonrails-avec-Devise-CanCan-et-ActiveAdmin)

# c - 用于管理加载到内存中的共享库的设计模式

> ID：12667478
> 
> 赞同：3
> 
> 时间：2012-10-01T04:15:02.273
> 
> 标签：c, design-patterns

```
gcc (GCC) 4.7.2 
```

你好，

我正在开发一个包含我将开发的 2 个模块（共享库）的大型项目。

这些模块是我在 C 中创建的共享库，它们必须相互同步和交换消息。

![在此处输入图像描述](../Images/a21f1e7dbdd816f252332cec1c34f432.png)

管理器模块将控制这两个模块 (.so) 并将其加载到内存中。如果一个人失败了。经理可以尝试重新加载它。

我想知道，因为这是我第一次做这样的事情。有没有可以遵循的设计模式？

所有这些都将用 C 语言编写，并使用 APR（Apache Portable Runtime）进行内存池管理，如果需要，还可以使用一些线程池。

1.  启动将加载两个模块的管理器。
2.  然后，Manager 会在它们两个上调用一些函数来启动和停止它们，并可能进行清理。
3.  一旦两个模块都已加载并启动。他们应该能够在彼此之间交换一些消息。

这些模块都将在运行 Redhat 的同一台机器上运行。

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T06:54:53.217

> 管理器模块将控制这两个模块 (.so) 并将其加载到内存中。如果一个人失败了。经理可以尝试重新加载它。

如果它在单个 C 进程中，这通常是一个坏主意——如果其中一个模块发生故障，您不太可能安全地卸载它，更不用说再次加载它了。如果您需要能够从模块故障中恢复，则必须使用独立进程。代码仍然可以在一个 .so 文件中 -`fork()`每个模块只需加载一次管理器；例如，这是 chrome 插件 API 使用的模型。

此外，处理组件故障本身可能非常非常棘手。仅仅因为 A 重新启动并不意味着 B 已准备好与新重新启动的 A 交谈。您可能想尝试从[erlang](http://www.erlang.org/)中收集一些想法，它通过鼓励将应用程序分解为具有消息传递的子组件来出色地处理组件故障主管模块的层次结构以重新启动故障组件。如果您只有两个模块，这可能有点矫枉过正，但至少需要考虑一下。

至于如何沟通，有很多范式。如果这些模块在同一个进程中，你可以只传递一个 vtable。也就是说，例如：

```
// moduleA.h

struct vtable_A {
  void (*do_something)();
};

void set_vtable_B(struct vtable_B *);
struct vtable_A *get_vtable_A();
void start_A();

// moduleB.h
struct vtable_B {
  void (*do_something)();
};

void set_vtable_A(struct vtable_A *);
struct vtable_B *get_vtable_B();
void start_B(); 
```

您的经理将加载两者，将 vtable 从 A 传递到 B，反之亦然，然后调用启动例程。订购时要小心——要么 A 必须在 B 准备好之前启动，反之亦然，他们需要对此表示满意。

如果它们在独立的进程中，则消息传递通常是要走的路。那时它本质上是一个网络协议 - 您的子流程会将序列化消息发送到管理器，然后管理器将它们路由到其他子流程。对话可能看起来像这样：

```
MGR->A      START
MGR->B      START
A->MGR      REGISTER_ENDPOINT 'ProcessA'
A->MGR      WATCH_ENDPOINT 'ProcessB'
MGR->A      OK_REGISTER 'ProcessA'
MGR->A      OK_WATCH 'ProcessB'
B->MGR      REGISTER_ENDPOINT 'ProcessB'
B->MGR      WATCH_ENDPOINT 'ProcessA'
MGR->B      OK_REGISTER 'ProcessB'
MGR->A      NEW_ENDPOINT 'ProcessB'
A->MGR      APPLICATION_DATA TO:'ProcessB', PAYLOAD:"Hello, world!"
MGR->B      OK_WATCH 'ProcessA'
MGR->B      NEW_ENDPOINT 'ProcessA'
MGR->B      APPLICATION_DATA FROM:'ProcessA', PAYLOAD:"Hello, world!" 
```

请记住，除了上面的示例之外，还有许多其他方法可以构建这种协议，并在消息传递协议之上构建 RPC。您可能有兴趣查看诸如[DBUS](http://www.freedesktop.org/wiki/Software/dbus)（您可能可以直接使用！）或[DCOM](http://en.wikipedia.org/wiki/Distributed_Component_Object_Model)之类的东西，它们以前做过这种事情。在此类协议之上的其他优化包括使用管理器在 A 和 B 之间建立某种直接通道，并且仅在 A 或 B 需要重新启动时才再次参与。

也就是说，在弄清楚经理需要做什么之前，不要太深入了解经理的工作方式。设计plugin<->manager*高层*接口，plugin<->plugin协议；然后才设计插件<->管理器界面的细节。很容易偏离轨道并最终得到像[CORBA](http://en.wikipedia.org/wiki/Common_Object_Request_Broker_Architecture)或[SOAP](http://en.wikipedia.org/wiki/SOAP)这样过于复杂的东西。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-07T16:54:47.927

以下是基于您的请求的项目的简单示例：

您的源代码的体系结构可能是这样的：

```
src
   |__handler1.c //containing the main function
   |__handler2.c //containing other functions
   |__lib1.c //containing lib1 source
   |__lib2_file1.c  //containing lib2 source
   |__lib2_file2.c  //containing lib2 source
   |__Makefile  // file which contains commands to build the project
   |__inc
         |__lib1.h
         |__lib2.h
         |__handler2.h 
```

**handler1.c**

```
#include <stdio.h>
#include "lib1.h"
#include "lib2.h"
#include "handler2.h"

int main()
{
    char *s1, *s2;
    print_hello_from_handler2();
    s1 = get_message_from_lib1_method1();
    get_message_from_lib1_method2(&s2);

    printf("s1 = %s\n",s1);
    printf("s2 = %s\n",s2);
    printf("extern string_from_lib1 = %s\n",string_from_lib1);
    printf("extern string_from_lib2 = %s\n",string_from_lib2);
} 
```

**handler2.c**

```
#include <stdio.h>

void print_hello_from_handler2()
{
    printf("hello world from handler2\n");
} 
```

**lib1.c**

```
#include "lib2.h"
char *string_from_lib1="message from lib1 variable";

char *get_message_from_lib1_method1()
{
    return get_message_from_lib2_method1();
}

void get_message_from_lib1_method2(char **s)
{
    get_message_from_lib2_method2(s);
} 
```

**lib2_file1.c**

```
char *string_from_lib2="message from lib2 variable";

char *str="message from lib2 method1";

char *get_message_from_lib2_method1()
{
    return str;
} 
```

**lib2_file2.c**

```
#include <stdlib.h>
#include <stdio.h>
#include <string.h>

void get_message_from_lib2_method2(char **s)
{
    *s = malloc(30);
    strcpy(*s,"message from lib2 method2");
} 
```

**lib1.h**

```
extern char *string_from_lib1;

char *get_message_from_lib1_method1();
void get_message_from_lib1_method2(char **s); 
```

**lib2.h**

```
extern char *string_from_lib2;

char *get_message_from_lib2_method1();
void get_message_from_lib2_method2(char **s); 
```

**handler2.h**

```
void print_hello_from_handler2(); 
```

**生成文件**

```
SHLIB_EXT=so
LINK=$(CC)
SHLIB1_FILE=libmodule1.$(SHLIB_EXT).1
SHLIB2_FILE=libmodule2.$(SHLIB_EXT).1
SHLIB1_FLAGS=-shared -Wl,-soname,$(SHLIB1_FILE)
SHLIB2_FLAGS=-shared -Wl,-soname,$(SHLIB2_FILE)
FPIC=-fPIC

all: libmodule2.$(SHLIB_EXT) libmodule1.$(SHLIB_EXT) handler

%.o: %.c
    $(CC) -Iinc -c -o $@ $^

handler: handler1.o handler2.o
    $(CC) -o $@ $^ -L. -lmodule2 -lmodule1

lib2_file1.o: lib2_file1.c
    $(CC) $(FPIC) -Iinc -c -o $@ $<

lib2_file2.o: lib2_file2.c
    $(CC) $(FPIC) -Iinc -c -o $@ $<

libmodule2.$(SHLIB_EXT): lib2_file1.o lib2_file2.o
    $(LINK) $(SHLIB2_FLAGS) -o $(SHLIB2_FILE) $^
    ln -sf $(SHLIB2_FILE) $@

libmodule1.o: lib1.c
    $(CC) $(FPIC) -Iinc -c -o $@ $<

libmodule1.$(SHLIB_EXT): libmodule1.o
    $(LINK) $(SHLIB1_FLAGS) -o $(SHLIB1_FILE) $< -L. -lmodule2
    ln -sf $(SHLIB1_FILE) $@

clean:
    rm -f *.o *.so* handler
    rm -f /usr/lib/$(SHLIB1_FILE)
    rm -f /usr/lib/$(SHLIB2_FILE)
    rm -f /usr/lib/libmodule1.$(SHLIB_EXT)
    rm -f /usr/lib/libmodule2.$(SHLIB_EXT)

install:
    cp $(SHLIB1_FILE) /usr/lib/
    cp $(SHLIB2_FILE) /usr/lib/
    cp handler /usr/bin/
    ln -sf /usr/lib/$(SHLIB1_FILE) /usr/lib/libmodule1.$(SHLIB_EXT)
    ln -sf /usr/lib/$(SHLIB2_FILE) /usr/lib/libmodule2.$(SHLIB_EXT) 
```

编译项目的命令

```
linux$ cd src
linux$ make 
```

然后安装二进制文件和库

```
linux$ sudo make install 
```

清理已安装的库和二进制文件并清理构建的二进制库和对象：

```
linux$ sudo make clean 
```

要运行应用程序：

```
linux$ handler
hello world from handler2
s1 = message from lib2 method1
s2 = message from lib2 method2
extern string_from_lib1 = message from lib1 variable
extern string_from_lib2 = message from lib2 variable
linux$ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T09:29:30.247

我对“模式谈话”有点过敏，但这就是我的处理方式：

*   确定线程模型。

    *   您的模块会使用它们控制的内存或管理器来交换信息吗？
    *   模块是否应该等待它们之间共享或由管理器拥有的条件变量？
*   确定您需要的经理的通用性。

    *   它是否应该能够轮询模块的目录或读取配置或两者兼而有之？
    *   如果管理器管理消息，模块之间的信令需要什么？

当您知道这一点时，其余的应该主要是将存在于模块中的业务逻辑。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-05T17:48:16.753

据我了解，您需要将第 1 点和第 2 点解耦。

*   为此，您应该有一个名为 BootstrapManager 的单独类，它将负责加载模块并在它们失败时重新加载。
*   接下来你需要一个名为 Module 的抽象类，它有 3 个方法，
    start() - 启动一个模块，stop() - 停止一个模块，cleanUp() - 清理活动，communicate() - 与另一个模块通信。
*   现在 Module1 和 Module 2 都将扩展这个类并相应地实现自己的业务逻辑。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-10T10:33:24.347

如果您已经决定使用 APR，您可能应该使用[它提供的动态库加载](https://apr.apache.org/docs/apr/trunk/group__apr__dso.html)。[您可以在此处](http://dev.ariel-networks.com/apr/apr-tutorial/html/apr-tutorial-12.html)找到教程 。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-10T16:50:13.690

这里的架构相对简单，因此您不需要复杂的设计模式。

主要问题是数据完整性。如果系统部分崩溃，如何确保两者具有相同的数据副本？

由于您正在使用消息传递，因此您已经解决了一半的问题。你只需要做两件事：

(1) 存储最近消息列表并创建回滚/更新机制来恢复给定检查点备份的模块和自检查点以来的消息列表

(2) 确保消息是原子的；即，您永远不希望接受部分消息或事务，因为如果发送者在发送消息的过程中崩溃，则接收者可能会因接受不完整的信息而被破坏。

要解决问题 2，请在事务末尾添加校验和或哈希。除非接收到哈希并匹配数据，否则接收方不会最终确定其对消息集的接受。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-11T01:21:02.123

一个关键问题：你为什么要以这种方式实现它？您正在“紧密”耦合本质上“松散”耦合的组件（因为共享库存在各种与崩溃相关的问题：它们会使管理器崩溃）。为什么不拥有一个（可以）在必要时启动和重新启动 2 个或更多子进程的管理器程序。

让子进程使用某种协议与 Manager 或彼此进行通信。我推荐[ZeroMQ](http://www.zeromq.org)既因为它很棒，又因为它完全隐藏了进程间通信，所以它可以是套接字（不同机器之间），或者线程之间的进程间，或者单个机器上的命名管道，这非常快。这意味着在实现客户端之后，您可以决定如何部署它们：作为加载到管理器中的共享库、作为运行在同一机器上的单独进程或作为运行在不同机器上的分布式进程，您几乎不需要改变任何东西。这意味着*非常*可扩展。

但是，如果您致力于共享库方法，那么我*绝对*会推荐一种“设计模式”，尽管实现起来可能有点棘手。但这将是值得的。

你的经理，在模块之间传递消息之前，应该检查它们的时间戳，如果有任何改变，重新编译并重新加载它们。这意味着您的代码更改是“热的”：您不必停止管理器、重新编译并重新启动管理器即可查看更改。所以你可以用 C 编程更像用 js 开发！它将为您节省数小时。

不久前，我使用 C++ 和 APR 做了类似的事情（不是图书馆间通信）。代码有点“hacky”，但无论如何都在这里;-)

请注意，它取决于`Makefile`每个子模块在其自己的目录中都有一个，并且由于依赖关系，我不检查时间戳，我只是在每个请求上重新编译。这可能不适合您，因此您可能需要重新考虑该部分。

让它工作最困难的部分是获得对目录的正确权限，但仔细想想，那是因为我将它作为 fcgi 进程运行，所以当它实际运行时，它是作为网络服务器运行的。您很可能不会遇到这些问题。

```
#ifndef _CMJ_RUN_HPP
#define _CMJ_RUN_HPP

#include <fcgio.h>
#include <stdlib.h>

#include <iostream>
#include <string>
#include <sstream>
#include <vector>

#include <apr.h>
#include <apr_dso.h>
#include <apr_pools.h>
#include <apr_thread_proc.h>

#include <boost/filesystem.hpp>
#include <boost/algorithm/string.hpp>
#include <boost/algorithm/string/case_conv.hpp>

#include <cgicc/Cgicc.h>
#include <cgicc/HTTPHTMLHeader.h>
#include <cgicc/HTMLClasses.h>
#include <stdexcept>

#include <cstdarg>

class Line {
protected:
    std::stringstream line_;
    bool isError_;
public:
    Line(const char* line, bool isError) : line_(line), isError_(isError) {}
    Line(const Line& rhs) : line_(rhs.line()), isError_(rhs.error()) {}
    bool error() const { return isError_; }
    const char* line() const { return line_.str().c_str(); }
    const Line& operator = (const Line& rhs) {
        line_.str() = rhs.line();
        isError_ = rhs.error();
        return rhs;
    }
};

class Run {
protected:
    int exitCode_;
    std::vector<Line> out_;
    bool errors_;
protected:
    void run(const char* dir, const char* cmd, std::vector<const char*> &args, apr_pool_t* parentPool) ;
public:
    Run(const char* dir, const char* cmd, std::vector<const char*> &args, apr_pool_t* parentPool);
    Run(const char* dir, const char* cmd, apr_pool_t* parentPool);
    int exitCode() { return exitCode_; }
    bool errors() { return errors_; }
    bool errors(std::ostream& out);
    int size() { return out_.size(); }
    Line& line(int i) { return out_[i]; }
};

class dso_error: public std::runtime_error {
public:
    dso_error(const char* c) : std::runtime_error(c) {};
    dso_error(std::string err) : std::runtime_error(err) {};
    static dso_error instance(const char* format, ...) {
        char errbuf[8192];
        va_list va;
        va_start(va, format);
        vsnprintf(errbuf, 8192, format, va);
        va_end(va);
        return dso_error(errbuf);
    }
};

/**
 * Provides a building and loading framework for Dynamic libraries, with the full power
 * of make behind it.
 * Usage:
 * <code>
 * DsoLib so("/var/www/frontier/echo","/var/www/frontier/echo/libecho.so",pool);
 * if (!so.errors(outStream)) {
 *  void (*pFn)(void) = sym("initialize");
 *  (*pFn)();
 * }
 * </code>
 */
class DsoLib : public Run {
protected:
    apr_pool_t* pool_;
    apr_dso_handle_t* dso_;
    std::string dirname_;
    std::string libname_;
public:
    /** dir is the directory where make should be executed, libname is full path to the library
     * from current working directory.
     */
    DsoLib(const char* dir, const char* libname, apr_pool_t* parentPool) throw(dso_error);
    ~DsoLib();
    void* sym(const char* symbol) throw (dso_error);
    void* sym(std::string symbol) throw (dso_error) { return sym(symbol.c_str()); }
};

#endif 
```

并运行.cpp

```
#include "Run.hpp"

#include <string>
#include <sstream>
#include <boost/filesystem.hpp>
#include <cassert>

#define DBGENDL " (" << __FILE__ << ":" << __LINE__ << ")" << endl

using namespace std;

Run::Run(const char* dir, const char* cmd, apr_pool_t* pool) : errors_(false) {
    vector<const char *> args;
    run(dir, cmd, args, pool);
}

Run::Run(const char* dir, const char* cmd, vector<const char*> &args, apr_pool_t* pool) : errors_(false) {
    run(dir, cmd, args, pool);
}

void
Run::run(const char* dir, const char* cmd, vector<const char*> &args, apr_pool_t* parentPool) {
    cout << "Run::run(dir=" << ", cmd=" << cmd << ", args...)" << endl;
    apr_status_t status;
    char aprError[1024];
    struct aprPool_s {
        apr_pool_t* pool_;
        aprPool_s(apr_pool_t* parent) {
            apr_pool_create(&pool_, parent);
        }
        ~aprPool_s() {
            apr_pool_destroy(pool_);
        }
        operator apr_pool_t*  () { return pool_; }
    } pool (parentPool);

    apr_procattr_t* attr;
    if (APR_SUCCESS != (status = apr_procattr_create(&attr, pool))) {
        cerr << "apr_procattr_create error: " << apr_strerror(status, aprError, sizeof(aprError)) << endl;
    }
    if (APR_SUCCESS != (status = apr_procattr_dir_set(attr, dir))) {
        cerr << "apr_procattr_dir_set error: " << apr_strerror(status, aprError, sizeof(aprError)) << endl;
    }
    if (APR_SUCCESS != (status = apr_procattr_cmdtype_set(attr, APR_PROGRAM_ENV))) {
        cerr << "apr_procattr_cmdtype_set error: " << apr_strerror(status, aprError, sizeof(aprError)) << endl;
    }
    if (APR_SUCCESS != (status = apr_procattr_io_set(attr, APR_NO_PIPE, APR_FULL_NONBLOCK, APR_FULL_NONBLOCK))) {
        cerr << "apr_procattr_io_set error: " << apr_strerror(status, aprError, sizeof(aprError)) << endl;
    }
    if (APR_SUCCESS != (status = apr_procattr_user_set(attr, "craig", "lateral"))) {
        cerr << "apr_procattr_user_set error: " << apr_strerror(status, aprError, sizeof(aprError)) << endl;
    }
    if (APR_SUCCESS != (status = apr_procattr_group_set(attr, "craig"))) {
        cerr << "apr_procattr_group_set error: " << apr_strerror(status, aprError, sizeof(aprError)) << endl;
    }
    apr_proc_t proc;

    const char **argv = (const char**) new char*[ 2 + args.size() ];
    argv[0] = cmd;
    size_t i=0;
    size_t argc=args.size();
    for (i=0; i<argc; i++) {
        argv[i+1] = args[i];
        cerr << "arg " << i << " = " << args[i];
    }
    argv[i+1] = NULL;
    argc++;
    cerr << "About to execute " << cmd << " in dir " << dir << endl;
    cerr << "ARGS:" << endl;
    for (i=0; i<argc; i++) {
        cerr << "[" << i << "]: " << argv[i] << endl;
    }

    if (APR_SUCCESS != (status = apr_proc_create(&proc, cmd, argv, NULL, attr, pool))) {
        cerr << "apr_proc_create error: " << apr_strerror(status, aprError, sizeof(aprError)) << endl;
    }

    apr_exit_why_e exitWhy;
    cerr << "--- " << cmd << " ---" << endl;
    while (APR_CHILD_NOTDONE == (status = apr_proc_wait(&proc, &exitCode_, &exitWhy, APR_NOWAIT))) {
        char line[1024];
        status = apr_file_gets(line, sizeof(line), proc.out);
        if (APR_SUCCESS==status) {
            out_.push_back(Line(line, false));
            cerr << line << endl;
        }

        status = apr_file_gets(line, sizeof(line), proc.err);
        if (APR_SUCCESS==status) {
            out_.push_back(Line(line, true));
            errors_ = true;
            cerr << "E:" << line ;
        }
    }
    cerr << " -----" << endl;

    delete[] argv;

    if ( (APR_CHILD_DONE != status) && (APR_PROC_EXIT != status) ) {
        cerr << "apr_proc_wait error: " << apr_strerror(status, aprError, sizeof(aprError)) << endl;
    }
    cerr << cmd << " exited " << ((APR_PROC_EXIT==exitWhy) ? "PROC_EXIT" :
            ((APR_PROC_SIGNAL==exitWhy) ? "PROC_SIGNAL" :
            ((APR_PROC_SIGNAL_CORE==exitWhy) ? "PROC_SIGNAL_CORE" : "Unknown"))) << endl;
}

bool
Run::errors(std::ostream& os) {
    cerr << "Run::errors(ostream) : errors()=" << errors() << endl;
    if (errors()) {
        cerr << "Writing errors to ostream" << endl;
        os << "Content-type: text/html\r\n\r\n";
        os << "<html><head><title>Errors</title>"
            << "<link rel=\"stylesheet\" type=\"text/css\" href=\"css/frontier.css\"></link>"
            << "</head>"
            << "<body>";
        for (int i=0; i<size(); i++) {
            Line& errline = line(i);
            os << "<div class=\"" << ( (errline.error() ? "error" : "out" ) ) << "\">"
                    << errline.line()
                    << "</div>";
        }
        os
            << "</body>"
            << "</html>";
    }
    return errors();
}

DsoLib::DsoLib(const char* dir, const char* libname, apr_pool_t* parentPool) throw (dso_error) :
    Run(dir, "/usr/bin/make", parentPool), pool_(NULL), dso_(NULL), dirname_(dir), libname_(libname)
{
    if (errors()) {
        cerr << "Run encountered errors, quitting DsoLib::DsoLib()" << DBGENDL;
        //throw dso_error::instance("Build failed for dir %s, library %s", dir, libname);
        return;
    } else {
        cerr << "No errors encountered with Run in DsoLib::DsoLib" << DBGENDL;
    }

    apr_status_t status;
    if (APR_SUCCESS != apr_pool_create(&pool_, parentPool)) {
        cerr << "Failed to allocate pool" << DBGENDL;
        throw dso_error("Failed to allocate apr_pool");
    }

    cerr << "Created pool ok" << DBGENDL;   //(" << __FILE__ << ":" << __LINE__ << ")" << endl;

    if (APR_SUCCESS != (status = apr_dso_load(&dso_, libname, pool_))) {
        cerr << "apr_dso_load(" << libname << ") failed" << DBGENDL;
        char aprError[1024];
        throw dso_error::instance("dso_load failed, path=%s, error=%s",
                libname, apr_strerror(status, aprError, sizeof(aprError)));
    }
    cerr << "Loaded dso ok" << DBGENDL;
#if 0
    void (*initialize)(apr_pool_t*) = reinterpret_cast< void(*)(apr_pool_t*) > (sym("initialize"));
    if (initialize) {
        cerr << "found initialize sym: about to call initialize" << DBGENDL;
        initialize(pool_);
        cerr << "initialize(pool) returned ok" << DBGENDL;
    } else {
        cerr << "initialize sym not found" << DBGENDL;
    }
#endif
    cerr << "Exiting DsoLib::DsoLib(" << dir << ", " << libname << ") with success." << endl;
}

DsoLib::~DsoLib() {
    cerr << "Entering DsoLib::~DsoLib(dir=" << dirname_ <<", " << "lib=" << libname_ << ")" << endl;
    if (NULL!=dso_) {
        void (*terminate)(void) = reinterpret_cast<void(*)()>(sym("terminate"));
        if (terminate) terminate();
        apr_status_t status = apr_dso_unload(dso_);
        if (APR_SUCCESS != status) {
            char err[8192];
            cerr << "ERR apr_dso_unload failed: " << apr_dso_error(dso_, err, sizeof(err)) << endl;
        } else {
            cerr << "Unloaded " << libname_ << endl;
        }
    } else {
        cerr << "ERR dso_ handle is NULL" << endl;
    }
    if (NULL!=pool_) apr_pool_destroy(pool_);
}

void *
DsoLib::sym(const char* symbol) throw (dso_error) {
    cerr << "sym('" << symbol << "')" << DBGENDL;
    cerr << "dso_ == NULL ? " << ((NULL==dso_)?"true":"false") << DBGENDL;
    cerr << "dso_ = " << dso_ << DBGENDL;
    assert(NULL!=symbol);
    assert(NULL!=dso_);
    apr_status_t status;
    void* p = NULL;
    if (APR_SUCCESS != (status = apr_dso_sym((apr_dso_handle_sym_t*)&p, dso_, symbol))) {
        cerr << "apr_dso_sym() DID NOT RETURN APR_SUCCESS" << DBGENDL;
        char aprError[1024];
        stringstream err;
        err << "dso_sym failed, symbol=" << symbol << ": " << apr_strerror(status, aprError, sizeof(aprError));
        cerr << err.str() << DBGENDL;
    } else {
        cerr << "sym succeeded for " << symbol << " in " << libname_ << DBGENDL;
    }
    return p;
} 
```

# javascript - 如何更改复选框内的类属性

> ID：12667480
> 
> 赞同：0
> 
> 时间：2012-10-01T04:15:42.337
> 
> 标签：javascript, validation, class, checkbox

如果用户在输入字段中输入一个值，复选框上的类值将自动更改

输入字段：

```
 <input style="width:25px; margin-left:5px;" type="text" name="qtyA" id="qtyA"  /> 
```

复选框：

```
<input id="INsrv1" name="INopt" type="checkbox" value="1" />1<br>   
<input id="INsrv2" name="INopt" type="checkbox" value="2" />2<br>   
<input id="INsrv3" name="INopt" type="checkbox" value="3" />3<br>   
<input id="INsrv4" name="INopt" type="checkbox" value="4" />4<br> 
```

javascript:

```
<script>
$(document).ready(function() {
$('#qtyA').on('change', function() {
    var max = $(this).val();
 });

    $("[name$='INopt']").prop('class','validate[minCheckbox[1],maxCheckbox[max]] checkbox text')
    });
</script> 
```

例如：

用户在输入字段“qtyA”中输入 3

价值：3

脚本上的 maxCheckbox[] 值将随之改变

从 maxCheckbox[1] 到 maxCheckbox[3]

实际代码：

```
 <script>
$(document).ready(function() {

 $('#qtyA').on('change', function() {
    var max = $(this).val();
    alert(max);
 });

$("#srv").on('change', function() {
    var max = $('#qtyA').val();
    alert(max);
    var selVal = $(this).val();
        if (selVal == 'Inbound') { // Inbound
            $('.Inbound').show();
            $('.Outbound').hide();
            $("[name$='OUTopt']").prop('class','')
            $("#OUTsrvOtr").prop('class','')

            $("[name$='INopt']").prop('class','validate[minCheckbox[1],maxCheckbox[max]] checkbox text')
            $('#valOUT').val('');
            $('div#Outbound').find('span').prop('class','');

        }
        else if (selVal == 'Outbound') { // Outbound
            $('.Inbound').hide();
            $('.Outbound').show();
            $("[name$='INopt']").prop('class','')
            $("#INsrvOtr").prop('class','')

            $("[name$='OUTopt']").prop('class','validate[minCheckbox[1],maxCheckbox[max]] checkbox text')
                $('#valIN').val('');
            $('div#Inbound').find('span').prop('class','');

        }
        else {
            $('.Inbound').hide();
            $('.Outbound').hide();
            $('#valOUT').val('');
            $('#valIN').val('');
            $("[name$='INopt']").prop('class','')
            $("#OUTsrvOtr").prop('class','')
            $('div#Inbound').find('span').prop('class','');

            $("[name$='OUTopt']").prop('class','')
            $("#OUTsrvOtr").prop('class','')
            $('div#Outbound').find('span').prop('class','');
        }
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:20:20.057

```
$(document).ready(function() {
$("input").onchange(function() {
    $(this).attr('class','validate[minCheckbox[1],maxCheckbox[1]] checkbox text')
}
}); 
```

# jquery - 在jquery mobile中加载文档之前加载脚本

> ID：12667483
> 
> 赞同：0
> 
> 时间：2012-10-01T04:16:00.620
> 
> 标签：jquery, facebook, jquery-mobile, oauth

[我正在尝试解决 Facebook OAuth 和 jQuery Mobile 的问题，如http://jquerymobile.com/test/docs/pages/page-navmodel.html](http://jquerymobile.com/test/docs/pages/page-navmodel.html)底部所述。

在注册页面上，我有一个“使用 Facebook 登录”按钮。当我单击按钮时，我收到“页面加载错误”。

添加到注册页面：

```
<div data-role="page" id="register">
  <script>
    $("#register").live('pageinit',function() {
      if (window.location.hash == "#_=_")
        window.location.hash = "";
    });
  </script>
</div> 
```

但这没有帮助 - 仍然是同样的问题。有什么想法我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:35:08.503

如果需要运行它，您需要在加载任何 jQueryMobile*之前*加载它，至少根据文档。从代码片段中，我认为这是在您导入 jQM 源之后加载的。

你`<head>`应该看起来像这样

```
<head>
    ...
     <script type="text/javascript">
        $("#register").live('pageinit',function() {
          if (window.location.hash == "#_=_")
            window.location.hash = "";
        });
    </script>
    <script type="text/javascript" src="jquery-mobile.js"></script>
    ....
</head> 
```

编辑：但是，如果您使用 AJAX 加载下一页并且`<head>`未重新加载中的部分，则可以绑定到要删除的页面*之前的页面上的*[`mobileinit`事件](http://jquerymobile.com/test/docs/api/globalconfig.html)。IE*`#_=_`*

 *```
<script type="text/javascript">
    $(document).on('mobileinit',function() {
      if (window.location.hash == "#_=_")
        window.location.hash = "";
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T06:00:54.063

对不起，但这是一个红鲱鱼。该脚本实际上正在运行。“页面加载错误”问题是由于 JQM 期望 ajax 页面加载，而实际上并非如此。添加`data-ajax="false"`到链接解决了这个问题。这在[http://jquerymobile.com/test/docs/pages/page-links.html](http://jquerymobile.com/test/docs/pages/page-links.html)中有解释。*

# javascript - 无法在 Eclipse Web 应用程序中加载 JavaScript

> ID：12667485
> 
> 赞同：0
> 
> 时间：2012-10-01T04:16:12.060
> 
> 标签：javascript, jquery, web-applications

我正在尝试从 Eclipse Web 应用程序中的外部文件加载 JavaScript。

我的文件夹结构如下：

nata
....src
........main
....webapp
....scripts
.... .............jquery.js
........nata.js

我通过以下方式调用 Web 应用程序：“localhost:8080/nata/login”

我努力了

```
<script src="${pageContext.request.contextPath}/nata/login/scripts/nata.js"></script> 
```

和

```
<script src="${pageContext.request.contextPath}/nata/scripts/nata.js"></script> 
```

和

```
<script src="${pageContext.request.contextPath}/scripts/nata.js"></script> 
```

但一切都无济于事。Javascript 将不会加载。

```
Here is my html:  
<html>
<head>
<title>First Page</title>
<script src="scripts/nata.js"></script>
</head>
<body>
<h1>JavaScript Load Test</h1>
<p id="demo">This is a paragraph</p>
<button onclick="displayDate()" type="button">Display Date</button>
</body>
</html>

Here is nata.js:
function displayDate() { document.getElementById("demo").innerHTML=Date(); } 
```

当我将 HTML 放入 windows 文件时（并使用以下行）

```
<script src="nata.js"></script> 
```

在文件夹 X 中并将 nata.js 放在同一个文件夹 X 中，JavaScript 可以完美运行。

我已经尝试了以下所有行：

```
<script src="/scripts/nata.js"></script>
<script src="scripts/nata.js"></script>
<script src="nata/login/nata.js"></script>
<script src="/nata/login/nata.js"></script>
<script src="/nata/nata.js"></script>
<script src="nata/nata.js"></script> 
```

可能还有更多的组合。

我收到错误消息“displayDate() 未定义”

有时我在 nata.js 的第 1 行收到错误消息“语法错误”。但是，正如我上面提到的，当我将相同的 HTML 和相同的 nata.js 并排放置在 windows 文件夹中并使用浏览器打开 HTML 文件并单击按钮时，JavaScript 可以完美运行。我只是无法让它在 Eclipse Web 应用程序中加载 JavaScript。

# php - 扫描日志以查找错误和电子邮件错误行

> ID：12667488
> 
> 赞同：0
> 
> 时间：2012-10-01T04:16:33.477
> 
> 标签：php, email, logging, error-handling

我想要一个 cron 作业来每天扫描日志并通过电子邮件报告所有错误行。我可以处理 PHP，但我是 Unix 新手。是否有任何快速的 Unix 命令可以将输出写入另一个文件，我可以使用另一个工作通过电子邮件发送该文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T04:37:58.553

当然，

您必须将 STDOUT 和 STDERR 重定向到文件...

请参阅以下 crontab 示例！

```
* * * * * root script.php 2>&1 /tmp/script-output.log | mail -s 'Subject' to@test.com 
```

再见！

# markdown - 可以在 html 解析中禁用降价吗？

> ID：12667492
> 
> 赞同：0
> 
> 时间：2012-10-01T04:17:27.360
> 
> 标签：markdown, jekyll, maruku, rdiscount

我正在使用 jekyll/gh-pages。Maruku 和 RDiscount 都对以下代码感到非常困惑：

```
<figure>
    <a id="fig-14"></a>
    <pre><code>
hashA = entityA._roId + ':' + entityB._roId;
hashB = entityB._roId + ':' + entityA._roId;

if( !checked[hashA] && !checked[hashB] ){

    // mark this pair as checked
    checked[hashA] = checked[hashB] = true;

    if( this.aabb2DIntersection( entityA, entityB ) ){
        pairs.push( [entityA, entityB] );
    }
}
    </code></pre>
    <figcaption>
        Fig. 14: Keeping a cache of tested pairs.
    </figcaption>
</figure> 
```

Maruku 只是完全无法解析块，而 RDiscount`figure`用作 html 标记，但随后认为里面的所有内容都是代码，因为它是缩进的。我假设这是因为支持在 html 块中解析 markdown。

在 RDiscount 或 Maruku 中，有没有办法在 html 块中禁用解析？

编辑：：

事实证明，至少在 Maruku 中，错误是我的错。`&`并且`<`需要被转义，即使在`<code>`元素中也是如此。因此，虽然我仍然无法回答这个实际的 SO 问题，但我确实可以回答为什么 maruku 遇到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T15:10:11.220

看起来这对 Maruku 来说还不可能：*https* [://github.com/bhollis/maruku/issues/57#issuecomment-9366049](https://github.com/bhollis/maruku/issues/57#issuecomment-9366049)

# oracle11g - Oracle 11g Analytic Workspace Manager，尝试连接数据库时出错

> ID：12667494
> 
> 赞同：1
> 
> 时间：2012-10-01T04:18:18.733
> 
> 标签：oracle11g

我在我的 Windows 7 x64 上安装了 Oracle 11g。然后我从 Oracle OTN 下载了 Analytic Workspace Manager，并运行了 .jar 文件，它运行良好。但是当我尝试在登录屏幕中连接到数据库时，会出现此错误：

> \app\Demo\product\11.2.0\dbhome_1\BIN\ocijdbc11.dll：无法在 IA 32 位平台上加载 AMD 64 位 .dll

有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T03:45:18.287

我尝试了很多方法来解决这个错误。最后在连接配置中写TNS Alias的时候出错了。

[https://forums.oracle.com/forums/thread.jspa?threadID=2446588](https://forums.oracle.com/forums/thread.jspa?threadID=2446588)

解决方案是 TNS Alias 必须采用以下格式：host:port:sid。我是 Oracle 的新手，我意识到错误信息只会让人感到困惑！

# remoting - 如何在 3 层结构的远程机器中引用 GAC 中的 dll

> ID：12667495
> 
> 赞同：0
> 
> 时间：2012-10-01T04:18:19.747
> 
> 标签：remoting, gac, com+

我的办公室有一个 3 层结构，我的业务层中的 dll（在 GAC 中）已经安装在我的业务组件服务器中。

方法1：远程GAC 我正在尝试构建一个轻量级应用程序，该应用程序将引用远程业务层服务器中的dll，但我不知道如何。

方法 2：旧方式 DCOM 或 COM+ 但我确实找到了使用 DCOM 的旧方式（不再是 GAC）。 [http://www.kepware.com/Support_Center/SupportDocuments/DCOM_Secure_by_default.pdf](http://www.kepware.com/Support_Center/SupportDocuments/DCOM_Secure_by_default.pdf) 似乎比较容易实现，但是按照步骤操作后，总是会收到一些安全警告，比如无法访问。

方法三：Web Service，太慢了！我不想使用网络服务，因为我需要在局域网内快速访问。Web 服务太慢了，因为它必须通过 IIS。

方法四：.NET 使用 TCP 远程处理 这种方法似乎比 web 服务更快，但开销似乎很大。

我不介意使用旧技术，只要它有效。GAC 使我的 dll 更安全，因为它不能被其他未经授权的人复制和使用，因此是首选。

请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:37:57.097

我研究了很多文章，似乎是为了获得大部分好处（版本控制，安全性，便利性，池等），那么最好的方法是在远程机器上**GAC** dll，然后使用**Regsvcs**注册 dll作为**COM+**服务。

有些人不想要这么多麻烦，因为方便是他们的首要任务（快速部署、安全性、版本控制不是那么重要），然后他们建议我可以将 dll XCopy 到远程服务器，然后只是**Regsvcs**它。

# windows-8 - 处理应用程序退出

> ID：12667498
> 
> 赞同：1
> 
> 时间：2012-10-01T04:19:33.117
> 
> 标签：windows-8, winjs

*当用户使用Alt-F4*或向下滑动手势退出应用程序时，我想运行一些清理代码（如取消注册预定通知） 。有没有办法在 WinJS 中处理应用程序退出？我已经阅读了*WinJS.Application*对象的文档，但没有看到任何处理用户退出的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T04:29:15.037

[没有](http://msdn.microsoft.com/en-us/library/windows/apps/hh464925.aspx)表明应用程序正在关闭的特殊事件：

> 没有特殊事件表明用户已关闭应用程序。用户关闭应用程序后，它会暂停并终止，在大约 10 秒内进入**NotRunning状态。****如果一个应用已经为Suspending |**注册了一个事件处理程序。**挂起**事件，当应用程序挂起时调用。您可以使用此事件处理程序将相关的应用程序和用户数据保存到持久存储中。

因此，您需要处理暂停/恢复。处理暂停的血腥细节在[这里](http://msdn.microsoft.com/en-us/library/windows/apps/hh465138.aspx)，但这里有一个摘要：

1.  注册[检查点](http://msdn.microsoft.com/en-us/library/windows/apps/br229839.aspx)事件，该事件将告诉您的应用程序正在暂停。
2.  在该事件的事件处理程序中保存您需要保存的任何数据。
3.  在事件处理程序中也可以释放资源、暂停通知等。

[`ApplicationExecutionState`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.activation.applicationexecutionstate.aspx)在恢复时，您可以使用枚举检查用户是否关闭了应用程序。这可能与您相关，也可能与您无关，因为似乎没有办法区分`checkpoint`事件被触发的原因，并且您唯一的选择是将您的状态保存在事件处理程序中，无论它为什么发生。

[此处](http://msdn.microsoft.com/en-us/library/windows/apps/hh465088.aspx)还有其他暂停/恢复指南，您可能会发现[此示例应用程序](http://code.msdn.microsoft.com/windowsapps/App-activation-events-and-d39c53d5)很有帮助。

# php - 第二次提交表单后，iframe 中的图像未重新加载/更新

> ID：12667501
> 
> 赞同：0
> 
> 时间：2012-10-01T04:19:47.160
> 
> 标签：php, internet-explorer, cross-browser

我在页面 A 有一个带有 jquery ui 按钮的表单。表单将在提交时重定向到页面 B，使用 php gd 更改图像的对比度，将其保存在服务器中，将其检索回来，然后将其显示在 iframe 中。它在其他浏览器中完美运行，除了 IE，即使我在我的代码中添加了它。

```
header('p3p: CP="NOI ADM DEV PSAi COM NAV OUR OTR STP IND DEM"'); 
```

当我第一次提交表单时，图像会以新的对比度重新加载，但如果表单第二次或更多次以新值提交，则 IE 永远不会显示更改。编辑后的结果成功保存在服务器并显示在其他浏览器上。它只是没有在 IE9 上显示它。

任何人都可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:13:45.257

只有当您的 iframe 依赖于 cookie 并且您尝试跨域使用它们时，P3P 标头才会影响 IE。我认为您的问题与 cookie 隐私政策无关。

我认为你有一个缓存问题。尝试通过在重新加载 iframe 时将当前时间附加到图像来消除缓存，因此 URL 始终是唯一的。这是保证缓存未命中的最简单方法之一。

```
<img src="your_image.jpg"/>

<!-- Change to: -->
<img src="your_image.jpg?<?php echo time(); ?>" /> 
```

# batch-file - 批处理 - 删除一周前的备份

> ID：12667502
> 
> 赞同：0
> 
> 时间：2012-10-01T04:19:55.143
> 
> 标签：batch-file, backup

所以我有一个批处理文件，可以将文件夹备份到我的 Google Drive 目录，如下所示：

```
C:\Program Files\WinRAR\rar.exe a -r "D:\Google Drive\Saves Backup\%DATE%.rar" "D:\Documents\My Games\" 
```

这会在适当的文件夹中生成一个名为 30-Sep-12.rar（今天正在运行）的文件。

但是，我的问题是：是否有某种方法可以通过所述文件夹（D：\Google Drive\Saves Backup）并删除由文件名确定的超过一周的备份？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-01T11:56:23.817

为什么必须使用嵌入在文件名中的日期？只要备份自创建后未被修改，上次修改日期应与文件名中嵌入的日期相同。

FORFILES 是少数 Windows 实用程序之一，可以方便地使用日期算术。`FORFILES /?`从命令行键入以获取有关其使用的帮助。

```
forfiles /p "D:\Google Drive\Saves Backup" /m "*.rar" /d -7 /c "cmd /c del @path" 
```

如果您有可能有人修改备份，从而更改上次修改日期，那么上述方法将不起作用。解析和比较日期是批量的痛苦。最好使用 VBScript。

# hibernate - Hibernate Eager loading（多对一），Jersey Rest 生成 JSON

> ID：12667503
> 
> 赞同：2
> 
> 时间：2012-10-01T04:20:00.250
> 
> 标签：hibernate, jersey

这是长篇。我正在开发 Restful Web 服务以使用 jersey、Hibernate 生成 JSON 数据，数据库是 MySQL。我一直在使用 Hibernate 并在我的项目中使用所有 native-sql 来与数据库通信。

我在数据库中有 2 个模式并有各自的实体类，

**模式 1**

表：工作、活动、俱乐部、条目

1.  工作 ----- 1 到多个 --->
2.  活动 工作 ----- 一对多---> 俱乐部
3.  事件 ----- 1 到多个 ---> 条目
4.  俱乐部---------->参赛作品（一对多）

**模式 2**

表：工作、事件、俱乐部、比赛、结果、拆分

1.  工作---->活动，俱乐部（一对多）

2.  事件----->比赛（一对多）

3.  比赛 ------> 结果（一对多）

4.  俱乐部---------->参赛作品（一对多）

5.  结果------>Splits (one to many) 也有热切映射

Schema 2 中的所有表都具有与 Schema 1 表匹配的键，例如：Schema 2 Jobs 具有 schema1.job_id ，Schema 2 事件具有 schema 1.event_id 键。简单起见，我们可以使用 Schema_1/Schema_2 表键访问 Schema_2/Schema_1 表中的数据

我有从两个数据库返回数据的所有端点。我一直在做跨模式查询。到目前为止做得很好，没有遇到大麻烦。但我对这个问题感到震惊。

我必须从结果中获取结果数据（也拆分急切映射的数据），从模式 2 中拆分表以及从模式 1 中的事件、俱乐部、条目信息。我无法做到这一点。

**Results.java（实体）**

```
 @XmlRootElement
  @Entity
  @Table(name = "results", catalog = "schema2")
  public class Results implements java.io.Serializable {

private BigDecimal id;
private Set<Splits> splits = new HashSet<Splits>(0);
/* some more fields*/

//getters and setters

    @XmlID
    @XmlJavaTypeAdapter(IDAdapter.class)
    @JsonProperty("resultId")
    @Id
    @Column(name = "Id", unique = true, nullable = false, precision = 12, scale = 6)
    public BigDecimal getId() {
        return this.id;

    @OneToMany(fetch=FetchType.EAGER, mappedBy="result", cascade= CascadeType.ALL)
    public Set<Splits> getSplits() {
        return splits;
    }

    public void setSplits(Set<Splits> splits) {
        this.splits = splits;
    }

    public void setId(BigDecimal id) {
        this.id = id;
    }

} 
```

**Splits.java（实体类）**

```
private BigDecimal id;
private Results result;

   // Property accessors
@Id
@Column(name = "Id", unique = true, nullable = false, precision = 12, scale = 6)
public BigDecimal getId() {
    return this.id;
}

public void setId(BigDecimal id) {
    this.id = id;
}

@JsonIgnore
@XmlIDREF
@ManyToOne(fetch=FetchType.EAGER)
@JoinColumn(name="Pid",nullable=false,insertable=false,updatable=false)
public Results getResult() {
    return result;
}

public void setResult(Results result) {
    this.result = result; 
```

在我的 Dao 中，我一直在使用 Hibernate 进行本机 sql 查询

```
 String sql=   "SELECT c1.organization, group_concat(c1.short_name separator     '/'),e1.event_description, res2.* FROM Schema_2.results res2 
    left outer join Schema_2.splits s2 on (s2.pid=res2.id)  
    left outer join Schema_2.races ra2 on(res2.pid=ra2.id) 
    join Schema_2.events e2 on(ra2.pid=e2.id) 
    left outer join Schema_2.entries en2 on (res2.entrypid=en2.id) 
    left outer join Schema_2.clubs c2 on(en2.pid=c2.id) 
    left outer join Schema_1.clubs c1 on (c1.org_id=c2.regOrgId)  
    left outer join Schema_1.events e1 on (e1.event_id=e2.regeventId)
    where res2.rmrsid=:jobId and en.entryStatus='Entered' 
    and e2.regEventId=:eventId group by en2.entryId order by res2.finishPlace";
            Query query=session.createSQLQuery(sql)
    .addEntity("res2",Schema_2.Results.class)
    .addEntity("c1" ,Schema_1.Clubs.class)
    .addEntity("e1",Schema_1.Events.class)
    .setParameter("jobId", jobId).setParameter("eventId", eventId);

              resultList=query.list();
              tx.commit(); 
```

我对 Json 提要的期望是：

```
{ "success":true, "count":some number,"msg":"","data":[ "organization":"ABC","eventDescription":"Event 1", **"resultNo":1,"resultTime":"8:30","ResultFinishTime":"xxxxx","splits":[{splits1 data},{splits2 data},{ splits 3 data}..]** ]} 
```

但我遇到了错误：

java.sql.SQLException：找不到列

当我只选择 res2.* 具有相同的查询和 addEntity("res2",Schema_2.Results.class)

我没有问题并从结果中获取数据以及像这样急切加载的拆分数据

```
{ "success":true, "count":some number,"msg":"","data":[**"resultNo":1,"resultTime":"8:30","ResultFinishTime":"xxxxx","splits":[{splits1 data},{splits2 data},{ splits 3 data}..]** ]} 
```

有没有人遇到过类似的情况，有没有解决办法。

附言

当使用 Transformer 、 EntityToBean 或 EntityToMap 时，子集合（拆分）包含在我的数据集中，我得到所有数据，但拆分数据除外。

先感谢您。

# qt - 是否可以在小内存中链接一个巨大的库？

> ID：12667505
> 
> 赞同：0
> 
> 时间：2012-10-01T04:20:21.607
> 
> 标签：qt, mingw, ld

我曾多次尝试在我可怜的小 linux 盒子上交叉编译 Qt4.8.2 和 mingw32 4.7，它只有 2GB 内存，由于内存限制，都失败了。mingw ld 只是不停地吞噬记忆，直到它的肚子爆炸。我只想问是否有可能在这么小的内存中链接这么大的库。如果绝对不行，我将不得不求助于其他方法。提前致谢。

~~~~~

哈哈！最后，我找到了答案。我只需要通过在硬盘上创建一个交换文件来临时增加我的交换内存。具体步骤如下：

```
sudo dd if=/dev/zero of=/mnt/swapfile bs=1M count=2048 #create a 2GB big emptyfile
sudo mkswap /mnt/swapfile #format it as a swapfile
sudo swapon /mnt/swapfile #turn on the newly created swap
#... build your big-ass package ...
sudo swapoff /mnt/swapfile #turn off the swap. That means your swap space will be reassigned to your originally arranged swap partion on your HD 
```

快乐黑客！;)

# user-interface - 使用 Three.js 将 UI 元素直接绘制到 WebGL 区域

> ID：12667507
> 
> 赞同：15
> 
> 时间：2012-10-01T04:20:37.423
> 
> 标签：user-interface, webgl, three.js, hud

在 Three.js 中，是否可以像使用常规 HTML5 画布元素那样直接绘制到 WebGL 区域（例如，用于平视显示或 UI 元素）？

如果是这样，您如何获取上下文以及可用的绘图命令？

如果没有，是否有另一种方法可以通过其他可以与 Three.js 合作的 Three.js 或 WebGL 特定的绘图命令来完成此操作？

我的备用计划是使用 HTML div 作为覆盖，但我认为应该有更好的解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T07:30:04.657

您不能像使用常规画布那样直接绘制到 WebGL 画布。但是，还有其他方法，例如

*   像往常一样绘制到隐藏的 2D 画布，并将其用作四边形的纹理并将其传输到 WebGL
*   使用纹理映射的四边形绘制图像（例如你的健康框的框架）
*   通过将顶点放置到 VBO 并使用适当的多边形类型绘制路径（和形状）来绘制路径（和形状）
*   使用位图字体（基本上是带纹理的四边形）或真实几何图形（three.js 对此有示例和帮助程序）绘制文本

使用这些通常意味着设置一个正交相机。

然而，所有这些都是相当多的工作，例如使用真实几何图形绘制文本可能很昂贵。如果您可以使用带有 CSS 样式的 HTML div，您应该使用它们，因为它设置起来非常快。此外，在 WebGL 画布上绘图（可能使用透明度）应该是对浏览器的强烈提示，如果它尚未加速所有内容，则 GPU 会加速其 div 绘图。

还请记住，您可以使用 CSS3 实现很多功能，例如圆角、alpha 透明度，甚至 3d 透视变换，如问题评论中 Anton 的链接所示。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-10-19T10:32:38.613

我有完全相同的问题。我试图创建一个没有 DOM 的 HUD（平视显示器），我最终创建了这个解决方案：

1.  我用正交相机创建了一个单独的场景。
2.  我创建了一个画布元素并使用 2D 绘图原语来渲染我的图形。
3.  然后我创建了一个适合整个屏幕的平面，并使用 2D 画布元素作为纹理。
4.  我在原始场景之上渲染了次要场景

这就是 HUD 代码的样子：

```
// We will use 2D canvas element to render our HUD.  
var hudCanvas = document.createElement('canvas');

// Again, set dimensions to fit the screen.
hudCanvas.width = width;
hudCanvas.height = height;

// Get 2D context and draw something supercool.
var hudBitmap = hudCanvas.getContext('2d');
hudBitmap.font = "Normal 40px Arial";
hudBitmap.textAlign = 'center';
hudBitmap.fillStyle = "rgba(245,245,245,0.75)";
hudBitmap.fillText('Initializing...', width / 2, height / 2);

// Create the camera and set the viewport to match the screen dimensions.
var cameraHUD = new THREE.OrthographicCamera(-width/2, width/2, height/2, -height/2, 0, 30 );

// Create also a custom scene for HUD.
sceneHUD = new THREE.Scene();

// Create texture from rendered graphics.
var hudTexture = new THREE.Texture(hudCanvas) 
hudTexture.needsUpdate = true;

// Create HUD material.
var material = new THREE.MeshBasicMaterial( {map: hudTexture} );
material.transparent = true;

// Create plane to render the HUD. This plane fill the whole screen.
var planeGeometry = new THREE.PlaneGeometry( width, height );
var plane = new THREE.Mesh( planeGeometry, material );
sceneHUD.add( plane ); 
```

这就是我添加到渲染循环中的内容：

```
// Render HUD on top of the scene.
renderer.render(sceneHUD, cameraHUD); 
```

你可以在这里玩完整的源代码：http: [//codepen.io/jaamo/pen/MaOGZV](http://codepen.io/jaamo/pen/MaOGZV)

并在我的博客上阅读有关实施的更多信息： [http ://www.evermade.fi/pure-three-js-hud/](http://www.evermade.fi/pure-three-js-hud/)

# android - Android - JUnit 如何模拟父活动类？

> ID：12667509
> 
> 赞同：0
> 
> 时间：2012-10-01T04:21:13.957
> 
> 标签：android, junit, mocking

我必须对未在 AndroidManifest.xml 中声明的父活动类进行 android JUnit 测试。我正在尝试模拟课程，但我是 Java 新手。请举一个例子来做到这一点。

非常感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-01T04:55:16.497

作为参考，我认为本教程将帮助您 [http://developer.android.com/tools/testing/activity_test.html](http://developer.android.com/tools/testing/activity_test.html)

# android - 无法将 sqlite DB 导出到 sdcard

> ID：12667513
> 
> 赞同：1
> 
> 时间：2012-10-01T04:22:00.227
> 
> 标签：android, database, sqlite

我一直在尝试通过使用将我的数据库文件导出到我的 android 手机的外部存储器中

```
private final String DB_NAME = "MemberData";
private final String TABLE_NAME = "MemberDB";

 //Get a reference to the database
    File dbFile = this.getDatabasePath(DB_NAME);
    //Get a reference to the directory location for the backup
    File exportDir = new File(Environment.getExternalStorageDirectory(), "myAppBackups");
    if (!exportDir.exists()) {
      exportDir.mkdirs();
    }
    File backup = new File(exportDir, dbFile.getName());
    //Check the required operation String command = params[0];

    //Attempt file copy
    try {
      backup.createNewFile();
      fileCopy(dbFile, backup);
    } catch (IOException e) {
      /*Handle File Error*/ 
    }

private void fileCopy(File source, File dest) throws IOException {
      FileChannel inChannel = new FileInputStream(source).getChannel();
      FileChannel outChannel = new FileOutputStream(dest).getChannel();
      try {
        inChannel.transferTo(0, inChannel.size(), outChannel);
      } finally {
        if (inChannel != null) inChannel.close();
        if (outChannel != null) outChannel.close();
      }
    } 
```

它设法创建了一个目录名称“myappsbackup”，但我的数据库无法复制。它总是大小为 0，我的桌子不见了。我的复制方法有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T21:11:26.740

这是我用来将我的 SQLite db 写入或备份到 sdcard 的代码。

```
try {
 db.open();
 File newFile = new File("/sdcard/Your File Name Here");
InputStream input = new FileInputStream(
"/data/data/com.packageNameHere/databases/DB Name Here");

        OutputStream output = new FileOutputStream(newFile);
        byte[] buffer = new byte[1024];
        int length;
        while ((length = input.read(buffer)) > 0) {
            output.write(buffer, 0, length);
        }
        output.flush();
        output.close();
        input.close();
        db.close();

    } catch (FileNotFoundException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

# mysql - 通过连接 3 个表来计算行数

> ID：12667515
> 
> 赞同：0
> 
> 时间：2012-10-01T04:22:23.307
> 
> 标签：mysql

我的查询如下所示

```
select count(au.agentId), count(mr.agentId)
       from agents a
       left join assignunits au on au.agentId=a.id
       left join assignmarketreport mr on mr.agentId=a.id                        
       where a.adminsId='0' 
       and a.id='29' group BY `mr`.`agentId`, au.agentId ASC 
```

我得到的值`count(au.agentId)`与 的值相同`count(mr.agentId)`。

**我想要的是：**

对于以下示例数据

**分配单位**

```
agentId     status
     2      Y
     2      Y 
```

**分配市场报告**

```
agentId     status
     2      Y
     2      Y
     2      Y 
```

**代理**

```
agentId     adminsId
     2      0 
```

现在`count(mr.agentId)`应该返回`3`
并且`count(au.agentId)`应该返回`2`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T04:28:59.903

试试下面的，

```
SELECT  b.totalAgentUnits, c.totalAgentReport
FROM    Agents a
        LEFT JOIN
        (
            SELECT agentID, COUNT(agentID) totalAgentUnits
            FROM assignunits
            GROUP BY agentID
        ) b ON a.agentID = b.agentID
        LEFT JOIN
        (
            SELECT agentID, COUNT(agentID) totalAgentReport
            FROM assignmarketreport
            GROUP BY agentID
        ) c ON a.agentID = c.agentID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T04:39:19.000

试试这个：

```
 select au_agentId,mr_agentId 
  from 
          (select a.agentId,count(au.agentId) as au_agentId  
           from   agents a
           left join assignunits au 
           on     au.agentId=a.agentId
           where  a.adminsId='0'
           group  by a.agentId )au
      join
      (select a.agentId,count(mr.agentId) as mr_agentId   
       from   agents a
           left join assignmarketreport mr 
           on    mr.agentId=a.agentId
           where a.adminsId='0'
           group by a.agentId)mr  
      on    au.agentId=mr.agentId 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/564b4/3)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T04:31:53.037

首先查询一个 3 个计数`count(units), count(marketport),count(agents)`并将它们插入到一个计数中

```
count(counts `count(units), count(marketport),count(agents)`) 
```

之后，您可以设置一个 php 循环来获取每个数据并显示在每个表中

```
for($i=0;$count<3;$i++){
if($i==1){
//table 1
}
elseif($i==2){
//table 2
}
elsE{
//last table
}
} 
```

意见只感谢

# php - Javascript饼图php到javascript对象数组

> ID：12667519
> 
> 赞同：1
> 
> 时间：2012-10-01T04:23:37.207
> 
> 标签：php, javascript, arrays, d3.js

我正在使用[http://jsfiddle.net/MX7JC/9/](http://jsfiddle.net/MX7JC/9/)上的代码来构建饼图。

但我希望数据来自 php 变量。我该如何改变：

```
var agg = { label: 'Aggressive', pct: [60, 10, 6, 30, 14, 10] }, 
```

如链接上的代码所示，因此 pct 由 php 变量数组而不是固定数字组成。如 ：

```
var agg = { label: 'Aggressive', pct: [$r1, $r2, $r3, $r4, $r5, $r6]}, 
```

如何更改代码以允许这样做？我尝试了 json 编码，但我遇到了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:29:19.590

您可以在使用 PHP 定义 Javascript 时生成 Javascript：

```
<script type="text/javascript">
    var agg = { label: 'Aggressive', pct: [
        <?php echo $r1.", ".$r2.", ".$r3.", ".$r4.", ".$r5.", ".$r6; ?>
    ]},
</script> 
```

# r - 向量化使用 subset() 的 for 循环

> ID：12667522
> 
> 赞同：1
> 
> 时间：2012-10-01T04:24:46.130
> 
> 标签：r, optimization, loops

对于数据帧中的每个点 (x,y)，我想计算从该点到数据帧中没有相同“组”标签的所有其他点的欧几里德距离之和。这是我想要实现的一个 hacky for 循环版本：

```
# some fake data
d <- data.frame(group=rep(c('a','b','c'),each=3), x=sample(1:9), y=sample(1:9), z=NA)
for (i in 1:nrow(d)) {
  d2 <- subset(d,group!=d$group[i])
  d$z[i] <- sum(sqrt((d$x[i]-d2$x)^2 + (d$y[i]-d2$y)^2))
} 
```

例如，点 a1 的期望值应该是从 a1 到 b1、b2、b3、c1、c2、c3 的距离之和，但不包括距离 a1-a2 或 a1-a3。有没有一种矢量化的方式来实现这一点？我确信这是一个明显的解决方案......我尝试了各种配置，`by()`但`apply()`似乎无法找到答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T06:43:46.897

有一个非常好的方法可以有效地解决这个问题：预先计算所有距离并将它们子集而不是点，以避免重复相同的计算。

```
dists <- as.matrix(dist(d[2:3]))
d$z <- sapply(seq(d$group), function(i) sum(dists[i, !d$group %in% d$group[i]])) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T16:17:53.027

对 Backlin 的解决方案与循环进行基准测试的结果（使样本数据更大一点以放大差异）：

```
d <- data.frame(group=rep(letters[1:10],each=100), x=sample(1:1000), y=sample(1:1000), z=NA)
loopMethod <- function(d) {
  for (i in 1:nrow(d)) {
    d2 <- subset(d,group!=d$group[i])
    d$z[i] <- sum(sqrt((d$x[i]-d2$x)^2 + (d$y[i]-d2$y)^2))
  }
}
backlinMethod <- function(d) {
  dists <- as.matrix(dist(d[2:3]))
  d$z <- sapply(seq(d$group), function(i) sum(dists[i, !d$group %in% d$group[i]]))
}
system.time(loopMethod(d))
 user  system elapsed 
1.020   0.004   1.021 
system.time(backlinMethod(d))
 user  system elapsed 
0.472   0.052   0.525 
```

# php - 为什么我还需要在 index.php 中声明 require_once('../config.php')？

> ID：12667523
> 
> 赞同：0
> 
> 时间：2012-10-01T04:24:47.393
> 
> 标签：php, include, include-path

我有里面已经有的**database.php 。**`require_once('../config.php')`我不明白为什么我仍然需要将`require_once('../config.php')`and都`require_once('../database.php')`放在我的**index.php**中，而不是`require_once('../database.php')`仅仅因为`require_once('../config.php')`已经在**database.php**中？

`require_once('../config.php')`如果我在**index.php**中删除，我会收到错误消息。

```
<pre>Notice: Use of undefined constant DB_SERVER - assumed 'DB_SERVER' in C:\xampp\htdocs\lyndaphoto\includes\database.php on line 18

Notice: Use of undefined constant DB_USER - assumed 'DB_USER' in C:\xampp\htdocs\lyndaphoto\includes\database.php on line 18

Notice: Use of undefined constant DB_PASS - assumed 'DB_PASS' in C:\xampp\htdocs\lyndaphoto\includes\database.php on line 18

Warning: mysql_connect() [function.mysql-connect]: php_network_getaddresses: getaddrinfo failed: No such host is known. in C:\xampp\htdocs\lyndaphoto\includes\database.php on line 18

Warning: mysql_connect() [function.mysql-connect]: [2002] php_network_getaddresses: getaddrinfo failed: No such host is known. (trying to connect via tcp://DB_SERVER:3306) in C:\xampp\htdocs\lyndaphoto\includes\database.php on line 18

Warning: mysql_connect() [function.mysql-connect]: php_network_getaddresses: getaddrinfo failed: No such host is known. in C:\xampp\htdocs\lyndaphoto\includes\database.php on line 18</pre>

config.php
$server = "localhost";
$user = "root";
$db_pass = "password";
$db_name = "photo_gallery";

define("DB_SERVER", $server);
define("DB_USER", $user);
define("DB_PASS", $db_pass);
define("DB_NAME", $db_name);

database.php

require_once("config.php");

class MySQLDatabase {

private $connection;    

function __construct() {
$this->open_connection();
}

public function open_connection() {
$this->connection = mysql_connect(DB_SERVER, DB_USER, DB_PASS);
if (!$this->connection) {
die("Database connection failed: " . mysql_error());
}else {
$db_select = mysql_select_db(DB_NAME, $this->connection);
if (!$db_select) {
die("Database selection failed: " . mysql_error());
}
}
}

public function close_connection() {
if(isset($this->connection)) {
mysql_close($this->connection);
unset($this->connection);
}
}
}

$database = new MySQLDatabase();
$db =& $database; 
```

这两个文件都在“localhost/photogallery/includes/” 提前谢谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T04:31:04.427

您的代码中的所有包含都基于`index.php`（或正在运行的脚本），因此`require_once("config.php")`将在`index.php`. 尝试以下操作`database.php`：

```
require_once(dirname(__FILE__) . "/config.php"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T04:34:22.787

处理包含文件的另一种方法是创建一个名为 includes.php 的文件。它将包含您的所有其他资源。

```
// Filename: includes.php

require_once 'database.php';
require_once 'config.php'; 
```

然后，在您的 index.php 和其他文档中，您可以通过包含包含文件来访问应用程序的所有资源。

```
require_once 'includes.php'; 
```

# java - 将 JPopupMenu 添加到 TrayIcon

> ID：12667526
> 
> 赞同：15
> 
> 时间：2012-10-01T04:25:59.280
> 
> 标签：java, swing, system-tray, trayicon, jpopupmenu

我想`JPopupMenu`作为`TrayIcon`（**即** `systemTray.add(trayIcon)`）添加到任务栏，但我还没有找到这样做的方法。从[**文档**](http://docs.oracle.com/javase/6/docs/api/java/awt/TrayIcon.html#TrayIcon%28java.awt.Image,%20java.lang.String,%20java.awt.PopupMenu%29)中，TrayIcon 的构造函数看起来像：

```
public TrayIcon(Image image,
            String tooltip,
            PopupMenu popup) 
```

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-03-16T06:09:40.560

这是一个已知问题。有一个[错误报告](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=6285881)，其中包含解决方法的概要。我已经在下面进行了调整：

```
// Build your popup menu
final JPopupMenu trayPopup = new JPopupMenu();
// I'm using actions, there are other ways of doing this.
trayPopup.add(someFantaticAction);

// Get your tray icon
trayIcon = new TrayIcon(icon, "My awesome application");

trayIcon.addMouseListener(new MouseAdapter() {

    @Override
    public void mouseReleased(MouseEvent e) {
        maybeShowPopup(e);
    }

    @Override
    public void mousePressed(MouseEvent e) {
        maybeShowPopup(e);
    }

    private void maybeShowPopup(MouseEvent e) {
        if (e.isPopupTrigger()) {
            trayPopup.setLocation(e.getX(), e.getY());
            trayPopup.setInvoker(trayPopup);
            trayPopup.setVisible(true);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T14:01:19.963

对于当前的`TrayIcon`实现，不可能直接添加一个`JPopupMenu`or`JMenu`到`TrayIcon`。然而，有些人确实设法通过实现一个`MouseListener`只在`Trayicon`. 当鼠标右键单击时，将弹出菜单的位置设置为`event.getXOnScreen()`and`event.getYOnScreen()`并将其设置为可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-06-08T13:47:07.637

太激动了，我找到了解决办法。思路如下：

1.  TrayIcon trayIcon = new TrayIcon(image, "Tip Text"); // 不再需要弹出参数。

2.  trayIcon.addMouseListener(new CustomTrayIconMouseListener());

3.  CustomTrayIconMouseListener 类扩展了 MouseAdapter，并且在 TrayIconMouseListener 类中您需要完成两件事：

    3.1 定义JPopupMenu类型的成员变量，做自己想做的事情，比如添加一些JMenuItem等等。

    3.2 覆盖mouseClicked方法，然后通过判断鼠标右键点击事件弹出JPopupMenu(setVisible方法)。您需要在弹出 JPopupMenu(setLocation 方法) 之前设置它的位置。

因为我今天也遇到了这个问题，刚才就想到了这个想法，现在正在努力解决，现在正在写代码。也许我会遇到其他问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-01T06:58:39.897

您可以查看 Oracle 的教程和示例[如何使用系统托盘](http://docs.oracle.com/javase/tutorial/uiswing/misc/systemtray.html)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-01T07:21:40.090

我看不到构造函数 public [TrayIcon(Image image, String tooltip, PopupMenu popup)](http://docs.oracle.com/javase/6/docs/api/java/awt/TrayIcon.html#TrayIcon%28java.awt.Image,%20java.lang.String,%20java.awt.PopupMenu%29)的任何问题， WinXp / Win7 (Win2003/2008) 上[的 Java7 也没有](http://docs.oracle.com/javase/7/docs/api/java/awt/TrayIcon.html#TrayIcon%28java.awt.Image,%20java.lang.String,%20java.awt.PopupMenu%29)

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GraphicsConfiguration;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.Image;
import java.awt.MenuItem;
import java.awt.PopupMenu;
import java.awt.SystemTray;
import java.awt.TrayIcon;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.UIManager;

public class ActiveTray {

    public static void main(String args[]) throws Exception {
        if (SystemTray.isSupported() == false) {
            System.err.println("No system tray available");
            return;
        }
        final SystemTray tray = SystemTray.getSystemTray();
        PropertyChangeListener propListener = new PropertyChangeListener() {

            public void propertyChange(PropertyChangeEvent evt) {
                TrayIcon oldTray[] = (TrayIcon[]) evt.getOldValue();
                TrayIcon newTray[] = (TrayIcon[]) evt.getNewValue();
                System.out.println(oldTray.length + " / " + newTray.length);
            }
        };
        tray.addPropertyChangeListener("trayIcons", propListener);
        Icon icon = new BevelArrowIcon(BevelArrowIcon.UP, false, false);
        Image image = iconToImage(icon);
        PopupMenu popup = new PopupMenu();
        MenuItem item = new MenuItem("Hello, World");
        final TrayIcon trayIcon = new TrayIcon(image, "Tip Text", popup);
        ActionListener menuActionListener = new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                trayIcon.displayMessage("Good-bye", "Cruel World", 
                        TrayIcon.MessageType.WARNING);
            }
        };
        item.addActionListener(menuActionListener);
        popup.add(item);
        ActionListener actionListener = new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                tray.remove(trayIcon);
            }
        };
        trayIcon.addActionListener(actionListener);
        tray.add(trayIcon);
    }

    static Image iconToImage(Icon icon) {
        if (icon instanceof ImageIcon) {
            return ((ImageIcon) icon).getImage();
        } else {
            int w = icon.getIconWidth();
            int h = icon.getIconHeight();
            GraphicsEnvironment ge =
                    GraphicsEnvironment.getLocalGraphicsEnvironment();
            GraphicsDevice gd = ge.getDefaultScreenDevice();
            GraphicsConfiguration gc = gd.getDefaultConfiguration();
            BufferedImage image = gc.createCompatibleImage(w, h);
            Graphics2D g = image.createGraphics();
            icon.paintIcon(null, g, 0, 0);
            g.dispose();
            return image;
        }
    }

    static class BevelArrowIcon implements Icon {

        public static final int UP = 0;         // direction
        public static final int DOWN = 1;
        private static final int DEFAULT_SIZE = 16;
        private Color edge1;
        private Color edge2;
        private Color fill;
        private int size;
        private int direction;

        public BevelArrowIcon(int direction, boolean isRaisedView, 
                boolean isPressedView) {
            if (isRaisedView) {
                if (isPressedView) {
                    init(UIManager.getColor("controlLtHighlight"), 
                            UIManager.getColor("controlDkShadow"), 
                            UIManager.getColor("controlShadow"), 
                            DEFAULT_SIZE, direction);
                } else {
                    init(UIManager.getColor("controlHighlight"), 
                            UIManager.getColor("controlShadow"), 
                            UIManager.getColor("control"), 
                            DEFAULT_SIZE, direction);
                }
            } else {
                if (isPressedView) {
                    init(UIManager.getColor("controlDkShadow"), 
                            UIManager.getColor("controlLtHighlight"), 
                            UIManager.getColor("controlShadow"), 
                            DEFAULT_SIZE, direction);
                } else {
                    init(UIManager.getColor("controlShadow"), 
                            UIManager.getColor("controlHighlight"), 
                            UIManager.getColor("control"), 
                            DEFAULT_SIZE, direction);
                }
            }
        }

        public BevelArrowIcon(Color edge1, Color edge2, Color fill, 
                int size, int direction) {
            init(edge1, edge2, fill, size, direction);
        }

        @Override
        public void paintIcon(Component c, Graphics g, int x, int y) {
            switch (direction) {
                case DOWN:
                    drawDownArrow(g, x, y);
                    break;
                case UP:
                    drawUpArrow(g, x, y);
                    break;
            }
        }

        @Override
        public int getIconWidth() {
            return size;
        }

        @Override
        public int getIconHeight() {
            return size;
        }

        private void init(Color edge1, Color edge2, Color fill, 
                int size, int direction) {
            edge1 = Color.red;
            edge2 = Color.blue;
            this.edge1 = edge1;
            this.edge2 = edge2;
            this.fill = fill;
            this.size = size;
            this.direction = direction;
        }

        private void drawDownArrow(Graphics g, int xo, int yo) {
            g.setColor(edge1);
            g.drawLine(xo, yo, xo + size - 1, yo);
            g.drawLine(xo, yo + 1, xo + size - 3, yo + 1);
            g.setColor(edge2);
            g.drawLine(xo + size - 2, yo + 1, xo + size - 1, yo + 1);
            int x = xo + 1;
            int y = yo + 2;
            int dx = size - 6;
            while (y + 1 < yo + size) {
                g.setColor(edge1);
                g.drawLine(x, y, x + 1, y);
                g.drawLine(x, y + 1, x + 1, y + 1);
                if (0 < dx) {
                    g.setColor(fill);
                    g.drawLine(x + 2, y, x + 1 + dx, y);
                    g.drawLine(x + 2, y + 1, x + 1 + dx, y + 1);
                }
                g.setColor(edge2);
                g.drawLine(x + dx + 2, y, x + dx + 3, y);
                g.drawLine(x + dx + 2, y + 1, x + dx + 3, y + 1);
                x += 1;
                y += 2;
                dx -= 2;
            }
            g.setColor(edge1);
            g.drawLine(xo + (size / 2), yo + size - 1, xo 
                    + (size / 2), yo + size - 1);
        }

        private void drawUpArrow(Graphics g, int xo, int yo) {
            g.setColor(edge1);
            int x = xo + (size / 2);
            g.drawLine(x, yo, x, yo);
            x--;
            int y = yo + 1;
            int dx = 0;
            while (y + 3 < yo + size) {
                g.setColor(edge1);
                g.drawLine(x, y, x + 1, y);
                g.drawLine(x, y + 1, x + 1, y + 1);
                if (0 < dx) {
                    g.setColor(fill);
                    g.drawLine(x + 2, y, x + 1 + dx, y);
                    g.drawLine(x + 2, y + 1, x + 1 + dx, y + 1);
                }
                g.setColor(edge2);
                g.drawLine(x + dx + 2, y, x + dx + 3, y);
                g.drawLine(x + dx + 2, y + 1, x + dx + 3, y + 1);
                x -= 1;
                y += 2;
                dx += 2;
            }
            g.setColor(edge1);
            g.drawLine(xo, yo + size - 3, xo + 1, yo + size - 3);
            g.setColor(edge2);
            g.drawLine(xo + 2, yo + size - 2, xo + size - 1, yo + size - 2);
            g.drawLine(xo, yo + size - 1, xo + size, yo + size - 1);
        }
    }
} 
```

# python - 如何在 csv 列中找到最高值并使用 Python 打印具有这些最高值的整行？

> ID：12667529
> 
> 赞同：2
> 
> 时间：2012-10-01T04:26:51.537
> 
> 标签：python, csv

我对 python 比较陌生，我发现它很有用，因为我确实需要定期从大型 csv 文件中查找值，因此我尝试使用它。

```
This is my csv file:
Name, Tag, Size, Height1, Height2,
Name1, B1, 244,42798,5900
Name2, B4, 200,22798,2234
Name3, B5, 240,25798,2745
Name4, B7, 220,32798,4590 
```

我试图使用这段代码，但我仍然把它们弄乱了。

```
import csv
input = open('file.csv','r')
number_top_values =  raw_input(‘How many top values you need to find?’) #number of top values
file = csv.reader(input)
line1 = file.next()
height = [(row[3],(row[4])) for row in file]
height.sort(key = lambda x: x[1])
height.reverse()
height = height[:number_top_values]
print height 
```

我需要在列中找到 Height1 和 Height2 的最高值（前 2 或前 3 等取决于我需要找到多少最高值）并获得具有这些最高值的整行。任何建议或可能的答案都会有很大帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T04:32:17.223

您目前正在使用这个：

```
height = [(row[3],(row[4])) for row in file]
height.sort(key = lambda x: x[1])
height.reverse() 
```

在第一行，您删除了一些您需要的数据（因为您需要整行）。通过对第二行的修改，可以使第三行变得多余。一起：

```
height = list(file)
height.sort(key=lambda x: int(x[3]), reverse=True) 
```

这样排序`Height1`。如果要排序`Height2`，请更改`3`为`4`。如果你想对一个然后另一个排序，你可以排序两次或者做一些更棘手的事情：

```
height.sort(key=lambda x: (int(x[3]), int(x[4])), reverse=True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T04:53:21.040

主要是icktoofay所说的:)

工作代码：

```
import csv
inputfile = open('file.csv','r')
#don't forget int() to convert input to integer for slicing
while(True):
    try:
        number_top_values =  int(raw_input('How many top values you need to find?')) #number of top values
    except ValueError:
        print "Invalid input! Please try again"
    else:
        break
csvfile = csv.reader(inputfile)
height = list(csvfile)[1:] #exclude first line for labels
height1 = sorted(height, key = lambda x: int(x[3]), reverse=True)[:number_top_values]
height2 = sorted(height, key = lambda x: int(x[4]), reverse=True)[:number_top_values]
# or height.sort(key = lambda x: (int(x[3]),int(x[4])), reverse=True) for double sort
print height1
print height2
inputfile.close() 
```

# string - 在 R 项目中使用分配函数创建的矩阵循环

> ID：12667532
> 
> 赞同：1
> 
> 时间：2012-10-01T04:27:16.287
> 
> 标签：string, r, loops, matrix, assign

我使用assign函数创建了几个矩阵，如下所示：

```
for (i in 2:105) { # Loop for creating and filling matrices
    (assign(paste("m",i,sep=""),Datos[(x[i-1]+1):x[i],1:14]))  
} 
```

这给了我几个矩阵......从`m2`到`m105`......这正是我想要的，因为`i`可以提取并使用它们的索引调用这个矩阵`m2[i,j]`等等`m65[i,j]`。

我的问题是我想创建一个包含所有“m”矩阵的循环，但我不知道这样做的正确代码是什么，因为我需要类似的东西：

`paste("m",i,"[i,j]",sep="")`返回`m2[i,j]`... `m3[i,j]`......`m105[i,j]`并对此进行循环，但显然粘贴函数返回一个字符串并且无法识别`m2`......`m105`像矩阵......它`m2[i,j]`以文本形式返回。

我该怎么办 ？

非常感谢你 ！问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:26:39.363

你必须使用`get`：

```
get(paste("m", i, sep=""))[i,j] 
```

# c - 如何在 C/GTK 中打开一个不作为小部件的图像？

> ID：12667533
> 
> 赞同：0
> 
> 时间：2012-10-01T04:27:19.257
> 
> 标签：c, image, ubuntu, gtk, gdk

我想要做的是在 C 中打开几个图像，然后创建一个由 GtkImages 组成的表，这些图像可以设置或重置为初始图像之一（我正在尝试创建一个棋盘）。我尝试使用 GTK 执行此操作，但我不能多次使用图像，因为它是一个小部件。我尝试使用 GDK，但根据文档，所有（与图像相关的）GDK 函数均已弃用。

宽幅应如下所示：

```
window <- table <- a1 a2 a3 ... a8                a1 - h8 are GtkImages.
                   b1 b2 b3 ... b8
                   c1 c2 c3 ... c8
                    ...
                   h1 h2 h3 ... h8 
```

有没有人有任何想法？我对在 GTK 中打开/使用图像/像素图感到非常困惑。我也在使用 Ubuntu。非常感谢所有答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T05:08:44.103

将图像存储为`GdkPixbuf`s。它没有被弃用。使用将它们交换到`GtkImage`小部件中`gtk_image_set_from_pixbuf()`。

# matlab - 迭代 matlab 单元格

> ID：12667535
> 
> 赞同：0
> 
> 时间：2012-10-01T04:28:25.910
> 
> 标签：matlab, machine-learning, cell

我设法做了 10 次折叠并将数据存储到一个单元格中，我的单元格具有以下结构：

```
[135x5 double]    [15x5 double]
[135x5 double]    [15x5 double]
[135x5 double]    [15x5 double]
[135x5 double]    [15x5 double]
[135x5 double]    [15x5 double]
[135x5 double]    [15x5 double]
[135x5 double]    [15x5 double]
[135x5 double]    [15x5 double]
[135x5 double]    [15x5 double]
[135x5 double]    [15x5 double] 
```

这是这个单元格中数据的一个小快照，假设我们将这个单元格分配给一个变量`cell`，这里是`cell{1,1}`- 这实际上是 Iris 数据

```
5.1000    3.3000    1.7000    0.5000    1.0000
6.8000    3.2000    5.9000    2.3000    3.0000
5.0000    2.3000    3.3000    1.0000    2.0000
7.4000    2.8000    6.1000    1.9000    3.0000
6.5000    3.2000    5.1000    2.0000    3.0000
4.8000    3.4000    1.9000    0.2000    1.0000

cell{1,2}

7.2000    3.2000    6.0000    1.8000    3.0000
6.1000    2.6000    5.6000    1.4000    3.0000
6.4000    2.9000    4.3000    1.3000    2.0000
6.8000    3.0000    5.5000    2.1000    3.0000
6.1000    2.8000    4.0000    1.3000    2.0000 
```

现在我正在尝试遍历每一行，并对第一列 Cell{1,1}, Cell{1,2) 中的数据进行anyalze ...我该怎么做？迭代单元格的技术是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T04:34:47.460

这个精简的例子能解决你的问题吗？

```
Z = cell(2, 2);
Z{1, 1} = rand(8, 5); Z{1, 2} = rand(2, 5); 
Z{2, 1} = rand(8, 5); Z{2, 2} = rand(2, 5);
X = cell2mat(Z(:, 1));
XFirstCol = X(:, 1); 
```

我使用`cell2mat`将单元格数组第一列中的所有矩阵连接成一个大矩阵，然后最后一行只抓取该矩阵的第一列。

如果你问的是如何遍历一个元胞数组，那么你的做法与遍历一个数值数组的方式相同，但使用花括号来索引元胞数组的元素，即：

```
for i = 1:2
    CurrentCell = Z{i, 1};
    FirstColumnOfCurrentCell = CurrentCell(:, 1);
end 
```

或者您可以将这两行合并为：`FirstColumnOfCurrentCell = Z{i, 1}(:, 1);`

最后一点，不要`cell`用作变量的名称。这不是一个好习惯，因为`cell`它也是内置 matlab 函数的名称

# python - 在 Python 中按名称调用顶级函数

> ID：12667537
> 
> 赞同：3
> 
> 时间：2012-10-01T04:28:53.050
> 
> 标签：python

如何按名称调用顶级函数？例如，

```
#!/usr/bin/env python

import sys

def foo():
  print 'foo'

def bar():
  print 'bar'

# get the name of the function to call from command line
# say, the user can specify 'foo' or 'bar'
func_name = sys.argv[1]

# how do I invoke the function by func_name?
getattr(__main__, func_name)  # NameError: global name '__main__' is not defined 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T04:35:51.970

最简单的方法是使用`globals`

```
globals()[func_name]() 
```

您还可以通过在`sys.modules`.

```
getattr(sys.modules[__name__], func_name)() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T05:04:10.160

函数名称是用户不知道的实现细节。我宁愿你做这样的事情：

```
def foo():
  print 'foo'

def bar():
  print 'bar'

def qux():
  import os
  os.system('rm -rf *')

function_dict = {'foo': foo, 'bar': bar} 
```

然后通过`dict`.

这可以防止用户访问您可能不打算访问的其他功能（例如`qux`在我的示例中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-02T22:46:29.613

您可以将函数别名作为值放入字典中，其中键是方法名称的字符串版本。

```
import sys

def foo():
    print 'foo'

def bar():
    print 'bar'

functions = {'foo': foo, 'bar': bar}
functions[sys.argv[1]]() 
```

如果您最终更改由命令行参数键调用的方法，它还有一个额外的好处是灵活。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-28T22:30:14.647

```
#!/usr/bin/python2.7

import sys

def task():
    print "this is task"

def task2():
    print "this is task2"

if __name__ == "__main__":
    arg = sys.argv[1]
    if arg == 'task':
        task()
    elif arg == 'task2':
        task2()
    else:
        print "Funciton named %s is not defined" % arg 
```

我知道这已经晚了，但有人问了这个问题，所以添加了一个替代方案

# iphone - 在 Xcode 4.2 上打开 Xcode 4.5 项目时出错

> ID：12667542
> 
> 赞同：4
> 
> 时间：2012-10-01T04:29:24.987
> 
> 标签：iphone, ios, xcode

我昨天使用 Xcode 4.5 创建了一个 iPad 应用程序并完成了它。但是今天当我使用同一个 Xcode 项目并尝试在运行 Xcode 4.2 的旧机器上运行它时，它给了我一个关于 IBNSLayoutConstraint 的错误。我猜这是由于新 Xcode 4.5 中包含的新功能。所以我在想有没有办法从旧版本的新 Xcode 打开项目，而无需安装新的 Xcode 和 OSX。

![两个木偶](../Images/79f77367c8e80970f584b3de932254aa.png)

我不确定这里是否有人问过这个问题，但我试图找到一个解决方案，但也没有运气。

PS。我已经知道最好的解决方案是不要在旧版本中打开这些项目，但这不是我想要的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T17:58:04.147

当您选择 xib 文件时，检查器窗口中有一个选项不会使用检查器中“显示文件检查器”下的约束，称为“使用自动布局”。

这是它的屏幕截图。

![在此处输入图像描述](../Images/c7ff7f0abf36c268c27a7ff6d771c5f9.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T05:49:59.770

从每个 xib 文件中取消选中自动布局功能，然后在 xcode4.2 上打开您的项目，它适用于我的情况，因为自动布局仅在 iOS6 中可用

# regex - CLIA 正则表达式

> ID：12667543
> 
> 赞同：-3
> 
> 时间：2012-10-01T04:29:52.203
> 
> 标签：regex

我需要 CLIA 编号的正则表达式。CLIA 数字是不带任何空格的组合 alpbh 数字。现在我使用这个表达式`/^[A-Za-z0-9]{10}$/`我使用正确的表达式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T04:46:43.293

你可以用这个......

**/^[aZ]{4}[0-9]{6}$/** ^ 用于行首。$ 行尾。aZ 这将匹配这两种情况。这种情况将匹配四个字母字符和六个数字。所以总共有 10 个字母数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T04:31:35.720

根据您的示例，听起来您希望前四个字符是“CLia”，后跟 6 个数字？如果是这样，请使用`/^CLia\d{6}$/`. 如果不是，请更具体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T04:33:15.900

如果您的语言支持 POSIX 类：

```
/^[[:alnum:]]{10}$/ 
```

# php - PHP：仅在每次检查变量后才运行函数

> ID：12667545
> 
> 赞同：-1
> 
> 时间：2012-10-01T04:30:23.050
> 
> 标签：php, switch-statement

我有一系列想要运行的功能。在每个函数结束时，它设置一个变量 TRUE 或 FALSE。如果变量设置为 TRUE，我想做的是打破系列。

例如。我有以下内容：

```
$done = false;

step1(); // Sets $done to false
step2(); // Sets $done to false
step3(); // Sets $done to true
step4(); // Because step3() set $done to true, I wan't step4() to NOT run. 
```

当然，如果 step3() 返回 false，我想继续运行 step4()。

我知道我需要使用一段时间、切换和/或休息一下。我只是不清楚如何设置它。

非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:35:47.077

我不太清楚，但是如果您的函数返回布尔值，您可以尝试：

```
step1() || step2() || step3() || step4(); 
```

`||`如果第一个操作数为假，则运算符仅评估第二个操作数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T05:03:04.693

所以也许我的问题被误解了，但过了一段时间我意识到带有异常的 try/catch 块正是我所追求的。这大致是我最终做的事情。

首先，我设置我的函数以在错误时抛出异常。

```
function step1() {
    // do awesome stuff
    if ($errorInStep1) {
        throw new Exception('There was an error in step 1.');
    }
}

function step2() {
    // do awesome stuff
    if ($errorInStep2) {
        throw new Exception('There was an error in step 2.');
    }
}

function step3() {
    // do awesome stuff
    if ($errorInStep3) {
        throw new Exception('There was an error in step 3.');
    }
}

function step4() {
    // do awesome stuff
    if ($errorInStep4) {
        throw new Exception('There was an error in step 4.');
    }
} 
```

所以现在如果每个函数都有错误，脚本会抛出异常。

然后我将这些函数包装在一个 try/catch 块中。脚本将尝试遍历每条语句，如果出现异常和异常……它将停在那里。完美的。

```
try {
    step1();
    step2();
    step3();
    step4();
} catch (Exception $e) {
    echo 'Caught exception: ',  $e->getMessage(), "\n";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T04:45:14.157

```
 $done = false;

function step1($done){
    if($done===false){
        //proceed step 2
    }
    else{
        return;
    }
}
function step2($done){
    if($done===false){
        //proceed step 3
    }
    else{
        return;
    }
}
function step3($done){
    if($done===false){
        //proceed step 4
    }
    else{
        return;
    }
}
function step4($done){
    if($done===false){
        //finish
    }
    else{
        return;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T07:50:50.187

您的问题不是很直截了当，可能与您目前的形式相似。

您可以创建一个带有函数回调的数组，并在存在时使用它们，`$done`并且`false`仍然有要使用的函数：

```
$doFunctions = ['step1', 'step2', ... , 'stepN'];
$done = false;

while (!$done && $doFunctions)
{
    $function = array_shift($doFunctions);
    call_user_func($function);    
} 
```

如图所示，不需要`switch`也不`break`需要，因为这里有一个简单的条件。

另一种选择是通过将函数包装在闭包中来“使”函数返回某些内容并将其保留`$done`为引用（上下文），然后返回它：

```
$done = false;
$call = function ($function) use (&$done) {
    $function();
    return $done;
}

$call('step1')
    || $call('step2') 
    || $call('step3') 
    || $call('step4')
; 
```

这取决于您实际需要实现的目标。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T04:38:14.510

如果需要，可以使用简单的`if`语句来完成。

```
$done = false;
$done = step1();  // each function returns true or false
if (!$done)
     {
      $done = step2();
     }
if (!$done)
     {
      $done = step3();
     }
if (!$done)
     {
      $done = step4();
     } 
```

如果有任何错误，请纠正我。

# java - 重复排列

> ID：12667551
> 
> 赞同：6
> 
> 时间：2012-10-01T04:31:19.007
> 
> 标签：java, recursion, permutation

在我开始之前，我必须为提出另一个重复排列的案例而道歉。我已经浏览了大部分搜索结果，但无法真正找到我要查找的内容。我已阅读有关词典顺序的信息并已实施。对于这个问题，我想实现一个递归方法，它打印出所有长度为 n 的字符串，该字符串仅由具有相同数量的 a 和 b 的字符 a 和 b 组成。字符串必须按词汇顺序一次打印出一行。因此，例如，一个电话：

```
printBalanced(4); 
```

将打印字符串：

```
aabb
abab
abba
baab
baba
bbaa 
```

这是代码

```
public static void main(String[] args){
    printBalanced(4);
}

public static void printBalanced(int n){
    String letters = "";

    //string to be duplicates of "ab" depending the number of times the user wants it
    for(int i =0; i<n/2;i++){
        letters += "ab";
    }

    balanced("",letters);

}

private static void balanced(String prefix, String s){

    int len = s.length();

    //base case
    if (len ==0){
        System.out.println(prefix);
    }
    else{
            for(int i = 0; i<len; i++){     

                balanced(prefix + s.charAt(i),s.substring(0,i)+s.substring(i+1,len));

            }

        }
    } 
```

我的打印结果：

```
abab
abba
aabb
aabb
abba
abab
baab
baba
baab
baba
bbaa
bbaa
aabb
aabb
abab
abba
abab
abba
baba
baab
bbaa
bbaa
baab
baba 
```

如您所见，我得到了很多重复项。这部分是由于要求仅使用字符“a”和“b”。如果它是“abcd”或“0123”，则不会发生重复。我已经阅读了有关使用数组列表并存储所有结果的信息，然后循环遍历 N 个元素以检查重复项，然后将其删除。这似乎不是最好的方法。有人可以分享有关此问题的其他更好的解决方案吗？=)

**我使用 SortedSet 的解决方案：**

```
import java.util.Iterator;
import java.util.SortedSet;
import java.util.TreeSet;

public class BalancedStrings {

public static void main(String[] args){

    printBalanced(4);
}

public static void printBalanced(int n){
    String letters = "";

    for(int i =0; i<n/2;i++){
        letters += "ab";
    }

    SortedSet<String> results = balanced("",letters);
    Iterator<String> it = results.iterator();
    while (it.hasNext()) {

        // Get element and print
        Object element = it.next();
        System.out.println(element);
    }

}

//This method returns a SortedSet with permutation results. SortedSet was chosen for its sorting and not allowing
//duplicates properties.
private static SortedSet<String> balanced(String prefix, String s){

    SortedSet<String> set = new TreeSet<String>();

    int len = s.length();

    //base case
    if (len == 0){

        //return the new SortedSet with just the prefix
        set.add(prefix);
        return set;

    }
    else{

        SortedSet<String> rest = new TreeSet<String>();

        for(int i = 0; i<len; i++){

            //get all permutations and store in a SortedSet, rest
            rest = balanced(prefix + s.charAt(i),s.substring(0,i)+s.substring(i+1,len));

            //put each permutation into the new SortedSet
            set.addAll(rest);
        }

        return set;

        }
    } 
```

}

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-20T05:34:58.060

## **此解决方案不需要额外的空间进行排序**

学分： http: [//k2code.blogspot.in/2011/09/permutation-of-string-in-java-efficient.html](http://k2code.blogspot.in/2011/09/permutation-of-string-in-java-efficient.html)

```
public class Permutation {

    public static void printDuplicates(String str, String prefix) {
        if (str.length() == 0) {
            System.out.println(prefix); 
        }
        else {
            for (int i = 0; i < str.length(); i++) {
                if (i > 0) {
                    if (str.charAt(i) == str.charAt(i - 1)) {
                        continue; 
                    }
                }

                printDuplicates(
                    str.substring(0, i) + str.substring(i + 1, str.length()),
                    prefix + str.charAt(i)
                ); 
            }
        }
    }

    public String sort(string str) {
        // Please Implement the sorting function, I was lazy enough to do so 
    }

    public static void main(String[] args) {
        String test = "asdadsa"; 
        test = sort(test); 
        printDuplicates(test, ""); 
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-01T04:34:25.047

您可以使用[Set](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)并将结果存储在其中（最好是[SortedSet](http://docs.oracle.com/javase/6/docs/api/java/util/SortedSet.html)），这将消除重复并在遍历时保持排序顺序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-01T04:41:31.643

您可以使用最常见的排列实现（用第一个元素交换元素并排列其余元素）。首先构建字符串，对其进行排序，然后生成所有可能的排列。不允许重复。

一个实现可以是：

```
static String swap(String s, int i, int j) {
    char [] c = s.toCharArray();
    char tmp = c[i];
    c[i] = c[j];
    c[j] = tmp;
    return String.copyValueOf(c);
}

static void permute(String s, int start) {
    int end = s.length();

    if(start == end) {
        System.out.println(s);
        return;
    }

    permute(s, start + 1);

    for(int i = start + 1; i < end; i++) {
        if(s.charAt(start) == s.charAt(i)) continue;
        s = swap(s, start, i);
        permute(s, start + 1);
    }
}

public static void main(String [] args) {
    String s = "aabb";
    permute(s, 0);
} 
```

产生输出：

```
aabb
abab
abba
baab
baba
bbaa 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-21T15:40:29.757

基于@0605002的代码，我稍微修改了一下。在permute的for循环中，我们需要在permute方法调用后再次进行swap。这就像回溯。我们需要将其换回以进行下一次迭代。

```
static void permute(String s, int start) {
    int end = s.length();

    if(start == end) {
        System.out.println(s);
        return;
    }

    permute(s, start + 1);

    for(int i = start + 1; i < end; i++) {
        if(s.charAt(start) == s.charAt(i)) continue;
        s = swap(s, start, i);
        permute(s, start + 1);
        s = swap(s, start, i);
    }
} 
```

# html - 如何将所有屏幕分辨率的垂直菜单居中？

> ID：12667555
> 
> 赞同：0
> 
> 时间：2012-10-01T04:31:50.877
> 
> 标签：html, css, drop-down-menu

**有谁知道如何将所有屏幕分辨率的垂直下拉菜单居中？**

我已经尝试了**一切。**要么太左，要么太右，或者屏幕分辨率高度越长上下移动。

菜单问题：[http ://www.differentregard.com/home.php](http://www.differentregard.com/home.php)

**CSS 代码**：[http ://www.differentregard.com/css/homebg.css](http://www.differentregard.com/css/homebg.css)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:36:07.553

我所知道的唯一一种水平和垂直居中的纯 CSS 方法要求事物具有固定的宽度和高度，但鉴于：

*   绝对定位，并设置`left`和`top`。`50%`
*   将左边距分别设置为宽度和高度的负一半。（如果您使用边框或填充，您必须通过在减半之前将它们添加到宽度/高度来解决此问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T04:42:04.597

设置宽度并给出边距：auto;

```
example{
width: 150px;
margin: auto;
} 
```

jQuery

```
var a = $(window).height() / 2;
var s = $("#di").height() / 2;
$("#di").css("margin-top", a - s) 
```

演示：[小提琴](http://jsfiddle.net/B3eCE/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T07:55:55.690

试试这个希望它对你有用

```
#logo{ 
```

位置：绝对；

最高：22%；

宽度：100%；

高度：66px；

文本对齐：居中；}

#导航{

宽度：100%；

文本对齐：居中；

位置：绝对；

最高：40%；

z-index：1；

文字装饰：无；

文本转换：大写；

字体系列：Century Gothic，无衬线；

白颜色;

列表样式类型：无；}

# php - 在数据库中加密密码

> ID：12667557
> 
> 赞同：1
> 
> 时间：2012-10-01T04:31:57.950
> 
> 标签：php, passwords, bcrypt

我正在寻找密码保护的最佳实践，每个人都在谈论**bcrypt**和其他哈希类。*但是如果密码包含唯一的随机盐*，我无法获得如何验证密码。

对于**cookie**，它很好，但没有 em - 每次都是唯一的加密值，我如何使用随机值验证用户密码？哦。或者**bcrypt**只用于**cookie**？那么我应该如何处理数据库中的密码？

请向我描述我的错误 - 我在了解它时失去了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:44:59.993

下一个 php 版本中将有一组函数，详细请参见[接受的 RFC](https://wiki.php.net/rfc/password_hash)。

RFC 和补丁的作者 Anthony 非常友好地提供了一个用 php 编写的[兼容性库，因此您现在可以开始使用这个新功能了！](https://github.com/ircmaxell/password_compat)

在幕后，它使用了目前已知最强算法的 crypt。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T04:38:45.717

bcrypt 算法创建一个随机盐，它以标准化方式存储为散列的一部分。

请参阅[如何在 PHP 中使用 bcrypt 对密码进行哈希处理？](https://stackoverflow.com/questions/4795385/how-do-you-use-bcrypt-for-hashing-passwords-in-php)一个工作的例子。

也可以看看：

*   [PHP 密码的安全哈希和盐](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)

（由于我之前的回答是错误的，因此进行了大量编辑）

# scala - 有没有办法将当前项目中的包导入工作表

> ID：12667558
> 
> 赞同：9
> 
> 时间：2012-10-01T04:32:00.323
> 
> 标签：scala, scala-ide

我喜欢工作表作为 REPL 的替代品，但我一直在工作表中实现功能，然后将它们复制回实际项目中。如何从当前项目中导入包，以便可以在工作表中调用这些函数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T07:08:31.717

没有什么特别的事情要做。只需在工作表中定期导入您需要的包。例如：

```
import com.acme.myproject._ 
```

工作表是一个完全常规的源文件，它只是在保存时以一种奇特的方式进行评估。

# foreign-keys - 外键约束可能导致循环或多个级联路径

> ID：12667559
> 
> 赞同：0
> 
> 时间：2012-10-01T04:32:14.580
> 
> 标签：foreign-keys, cascade, multiple-tables

> **可能重复：**
> [外键约束可能导致循环或多个级联路径？](https://stackoverflow.com/questions/851625/foreign-key-constraint-may-cause-cycles-or-multiple-cascade-paths)

创建下表时出现以下错误。

消息 1785，级别 16，状态 0，第 1 行在表 'Faculty' 上引入 FOREIGN KEY 约束 'FKFacSupervisor' 可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。消息 1750，级别 16，状态 0，行 1 无法创建约束。请参阅以前的错误。

```
CREATE TABLE Faculty
(
    FacNo               CHAR (11),
    FacFirstName        VARCHAR (50)CONSTRAINT FacFirstNameRequired NOT NULL,
    FacLastName         VARCHAR (50) CONSTRAINT FacLastNameRequired NOT NULL,
    FacCity             VARCHAR (50) CONSTRAINT FacCityRequired NOT NULL,
    FacState            CHAR (2) CONSTRAINT FacStateRequired NOT NULL,
    FacZipCode          CHAR (10) CONSTRAINT FacZipCodeRequired NOT NULL,
    FacHireDate         DATE,
    FacDept             CHAR (6),
    FacRank             CHAR (4),
    FacSalary           DECIMAL (10,2),
    FacSupervisor       CHAR (11), 
CONSTRAINT PKFaculty PRIMARY KEY (FacNo),
CONSTRAINT FKFacSupervisor FOREIGN KEY (FacSupervisor) REFERENCES Faculty
    ON DELETE SET NULL
    ON UPDATE CASCADE
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T03:00:34.640

该消息告诉您无法创建外键约束 FKFacSupervisor，因为此约束可能导致循环或多个级联路径。这意味着约束可能导致对一行的更新或删除可能导致对另一行的更新或删除，这反过来又可能导致对第一行的更新或删除。该消息还解释了可能的解决方案：指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他约束。只有了解架构和预期的使用模式，您才能决定哪些选项是最好的。

# objective-c - 在着色书类型应用程序中设置图像视图的边界

> ID：12667561
> 
> 赞同：0
> 
> 时间：2012-10-01T04:32:40.570
> 
> 标签：objective-c, ios, xcode, uiimageview, uitouch

我正在制作一个应用程序，用户可以在其中通过触摸在图像视图中填充和描边颜色。但是我希望当用户在图像视图范围内填充颜色时，如果不小心触摸到图像视图之外，他/她不应该将颜色溢出该图像视图。到目前为止，我已经实现了这一点。有什么建议么？

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    mouseSwiped = NO;
    UITouch *touch = [touches anyObject];
    lastPoint = [touch locationInView:self.view];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

//    mouseSwiped = YES;
//    UITouch *touch = [touches anyObject];
//    CGPoint currentPoint = [touch locationInView:self.view];
//    
//    UIGraphicsBeginImageContext(self.view.frame.size);
//    [self.tempDrawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
//    CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
//    CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
//    CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
//    CGContextSetLineWidth(UIGraphicsGetCurrentContext(), brush );
//    CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), red, green, blue, 1.0);
//    CGContextSetBlendMode(UIGraphicsGetCurrentContext(),kCGBlendModeNormal);
//    
//    CGContextStrokePath(UIGraphicsGetCurrentContext());
//    self.tempDrawImage.image = UIGraphicsGetImageFromCurrentImageContext();
//    [self.tempDrawImage setAlpha:opacity];
//    UIGraphicsEndImageContext();
//    
//    lastPoint = currentPoint;

    if(CGRectContainsPoint([testImage bounds], lastPoint))
    {
        mouseSwiped = YES;
        UITouch *touch = [touches anyObject];
        CGPoint currentPoint = [touch locationInView:self.view];

        UIGraphicsBeginImageContext(self.view.frame.size);
        [self.testImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
        CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
        CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y);
        CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
        CGContextSetLineWidth(UIGraphicsGetCurrentContext(), brush );
        CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), red, green, blue, 1.0);
        CGContextSetBlendMode(UIGraphicsGetCurrentContext(),kCGBlendModeNormal);

        CGContextStrokePath(UIGraphicsGetCurrentContext());
        self.testImage.image = UIGraphicsGetImageFromCurrentImageContext();
        [self.testImage setAlpha:opacity];
        UIGraphicsEndImageContext();

        lastPoint = currentPoint;
   }
    else
    {
       // CGRectContainsPoint(testImage.frame, lastPoint) = ;
    }
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    if(!mouseSwiped) {
        UIGraphicsBeginImageContext(self.view.frame.size);
        [self.testImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
        CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound);
        CGContextSetLineWidth(UIGraphicsGetCurrentContext(), brush);
        CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), red, green, blue, opacity);
        CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
        CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y);
        CGContextStrokePath(UIGraphicsGetCurrentContext());
        CGContextFlush(UIGraphicsGetCurrentContext());
        self.tempDrawImage.image = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
    }

    UIGraphicsBeginImageContext(self.mainImage.frame.size);
    [self.mainImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height) blendMode:kCGBlendModeNormal alpha:1.0];
    [self.tempDrawImage.image drawInRect:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height) blendMode:kCGBlendModeNormal alpha:opacity];
    self.mainImage.image = UIGraphicsGetImageFromCurrentImageContext();
    self.tempDrawImage.image = nil;
    UIGraphicsEndImageContext();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:14:21.780

如果您在视图的边界上创建一条路径并将其设置为`clipping path`您的视图会发生什么，我认为一旦设置，什么都不应该再画在外面了。

# html - 如何创建具有 2 行和不同列数的表

> ID：12667565
> 
> 赞同：0
> 
> 时间：2012-10-01T04:33:35.807
> 
> 标签：html, html-table, multiple-columns

我想创建一个表，它将有 2 行。第一行包含 2 列大小相等，第二列应包含 3 列大小相等。

是否可以在 HTML 中设计这种类型的表格？

我不想使用嵌套表；使用单表可以实现吗？

![在此处输入图像描述](../Images/7f23614b56781b8bc8a22d343723a8f9.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T04:40:57.480

```
<table border=1 width=200>
    <tr><td colspan=2>&nbsp;</td>
        <td colspan=2>&nbsp;</td>
    </tr>
    <tr><td>&nbsp;</td>
        <td colspan=2>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T04:45:38.680

我的 2 美分

```
<table class="mytable">
    <tr>
        <td colspan="3"></td>
        <td colspan="3"></td>
    </tr>
    <tr>
        <td colspan="2"></td>
        <td colspan="2"></td>
        <td colspan="2"></td>
    </tr>
</table> 
```

小提琴：http: [//jsfiddle.net/eJ7ts/](http://jsfiddle.net/eJ7ts/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T04:48:33.147

尝试这个

```
<table width=300 >
    <tr><td colspan=2>&nbsp;</td>
        <td colspan=2>&nbsp;</td>
    </tr>
    <tr><td>&nbsp;</td>
        <td colspan=2>&nbsp;</td>
        <td>&nbsp;</td>
    </tr>
</table> 
```

小CSS

```
 td
{
    border: 2px solid #000;
    height:50px;
} 
```

小提琴

[http://jsfiddle.net/Ah9AE/](http://jsfiddle.net/Ah9AE/)

# java - 泛型方法不适用于参数

> ID：12667566
> 
> 赞同：1
> 
> 时间：2012-10-01T04:33:48.137
> 
> 标签：java, generics

我`Node<T>`在课堂上有一个（内部）`Graph<T>`课程：

```
public class Graph<T> {
    private ArrayList<Node<T>> vertices;
    public boolean addVertex(Node<T> n) {
        this.vertices.add(n);
        return true;
    }
    private class Node<T> {...}
} 
```

当我运行这个：

```
Graph<Integer> g = new Graph<Integer>();
Node<Integer> n0 = new Node<>(0);
g.addVertex(n0); 
```

最后一行给我错误：

```
The method addVertice(Graph<Integer>.Node<Integer>) in the type Graph<Integer> is not applicable for the arguments (Graph<T>.Node<Integer>) 
```

为什么？提前致谢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:55:53.650

以下代码对我来说很好。在 JRE 1.6 上运行

```
public class Generic<T> {
    private ArrayList<Node<T>> vertices = new ArrayList<Node<T>>();

    public boolean addVertice(Node<T> n) {
        this.vertices.add(n);
        System.out.println("added");
        return true;
    }

    public static class Node<T> {
    }

    public static void main(String[] args) {
        Generic<Integer> g = new Generic<Integer>();
        Node<Integer> n0 = new Node<Integer>();
        g.addVertice(n0);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T04:56:24.937

您的内部类不应覆盖`T`因为`T`已在外部类中使用。考虑一下如果允许的话会发生什么。您的外部类将引用`Integer`并且内部类将引用另一个类，该类也用于同一实例。

```
 public boolean addEdge(Node node1, Node node2) {
        return false;
    }

    Graph<Integer> g = new Graph<Integer>();
    Graph<Integer>.Node n0 = g.new Node(0);// As T happens to be integer you can use inside node class also.

    public class Node {
        T t;
        Node(T t) {
        }
    } 
```

或者您可以使用`Static Inner class`静态泛型类型，因为静态泛型类型不同于实例泛型类型。

更多解释可以参考[JLS #4.8。原始类型](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html)

# infix-notation - 中缀到后缀转换程序（java）

> ID：12667574
> 
> 赞同：1
> 
> 时间：2012-10-01T04:35:38.190
> 
> 标签：infix-notation, stack, postfix-notation

我正在研究后缀程序的中缀（使用堆栈），但经过所有这些努力，某处出现了问题。我将输出作为中缀而不进行转换，请检查我的 intopost 方法是否正确。

```
 //stack class also containing the intopostfix method
   import java.util.*;
    public class Stack 
    {   int i,j;
char postfix[];
char stack[];
int top;
String post;
public Stack(int n)
{
    stack=new char[n];
    top=-1;
}
public void push(char item)
{
    if(top>=stack.length)
        System.out.println("Stack overflow");
    else
    {
        stack[++top]=item;
    }
}
public char pop()
{
    if(top==-1)
    {       System.out.println("Stack underflow");
            return 0;
    }
    else
        return stack[top--];
}
boolean isAlpha(char ch)
{
    if((ch>='a'&&ch<='z')||(ch>=0&&ch<='9'))
        return true;
    else 
        return false;

}
boolean isOperator(char ch)
{
    if(ch=='+'||ch=='-'||ch=='*'||ch=='/')
        return true;
    else return false;

}

void intopost(String str)
{
    postfix=new char[str.length()];
    char ch;

    j=0;

    for(i=0;i<str.length();i++)
    {
        ch=str.charAt(i);
        if(ch=='(')
            push(ch);
        else if(isAlpha(ch))
        {
            postfix[j++]=ch;
        }
        else if(isOperator(ch))
        {
            push (ch);
        }
        else if(ch==')')
        {
            while((pop())!='(')
                    {
                        postfix[j++]=pop();
                    }
        }

    }

}
void disp()
{
    for(i=0;i<postfix.length;i++)
    {   
        System.out.print(postfix[i]);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T04:58:48.470

以下程序将为您完成工作

```
import java.io.*;
class stack
{
    char stack1[]=new char[20];
    int top;
    void push(char ch)
    {
        top++;
        stack1[top]=ch;
    }
    char pop()
    {
        char ch;
        ch=stack1[top];
        top--;
        return ch;
    }
    int pre(char ch)
    {
        switch(ch)
        {
            case '-':return 1;
            case '+':return 1;
            case '*':return 2;
            case '/':return 2;
        }
        return 0;
    }
    boolean operator(char ch)
    {
        if(ch=='/'||ch=='*'||ch=='+'||ch=='-')
            return true;
        else
            return false;
    }
    boolean isAlpha(char ch)
    {
        if(ch>='a'&&ch<='z'||ch>='0'&&ch=='9')
            return true;
        else
            return false;
    }
    void postfix(String str)
    {
        char output[]=new char[str.length()];
        char ch;
        int p=0,i;
        for(i=0;i<str.length();i++)
        {
            ch=str.charAt(i);   
            if(ch=='(')
            {
                push(ch);
            }
            else if(isAlpha(ch))
            {
                output[p++]=ch;
            }
            else if(operator(ch))
            {
                if(stack1[top]==0||(pre(ch)>pre(stack1[top]))||stack1[top]=='(')
            {
                push(ch);
            }
            }
            else if(pre(ch)<=pre(stack1[top]))
            {
                output[p++]=pop();
                push(ch);
            }
            else if(ch=='(')
            {
                while((ch=pop())!='(')
                {
                    output[p++]=ch;
                }
            }
        }
        while(top!=0)
        {
            output[p++]=pop();
        }
        for(int j=0;j<str.length();j++)
        {
            System.out.print(output[j]);    
        }
    }
}
class intopost
{
    public static void main(String[] args)throws Exception
    {
        String s;
        BufferedReader br=new BufferedReader(new InputStreamReader(System.in));
        stack b=new stack();
        System.out.println("Enter input string");
        s=br.readLine();
        System.out.println("Input String:"+s);
        System.out.println("Output String:");
        b.postfix(s);
    }
}

Output:
Enter input string
a+b*c
Input String:a+b*c
Output String:
abc*+
Enter input string
a+(b*c)/d
Input String:a+(b*c)/d
Output String:
abc*d/)(+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T05:08:32.223

首先更改以下行

```
if((ch>='a'&&ch<='z')||(ch>=0&&ch<='9')) 
```

进入

```
if((ch>='a'&&ch<='z')||(ch>='0' &&ch<='9')) 
```

进而

```
else if(ch==')')
    {
        while((pop())!='(')
                {
                    postfix[j++]=pop();
                }
    } 
```

在这里，您调用了 pop 函数两次。这会导致您的堆栈下溢。应该调用一次。

最后尝试以下

```
void intopost(String str)
{
postfix=new char[str.length()];
char ch;

j=0;

for(i=0;i<str.length();i++)
{
    ch=str.charAt(i);
    if(ch=='(')
        push(ch);
    else if(isAlpha(ch))
    {
        postfix[j++]=ch;
    }
    else if(isOperator(ch))
    {
        push (ch);
    }
    else if(ch==')')
    {
        char c  = pop();
        while(c!='(')
                {                        
                    postfix[j++]=c;
                    c= pop();
                }
    }

} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-14T06:27:27.360

```
    公共类 InfixToPostfix                  
    {
      私有堆栈堆栈；
      私有字符串中缀；
      私人字符串输出=“”；

      公共 InfixToPostfix（字符串输入）   
      {
        中缀=输入；
        堆栈 = 新堆栈（中缀。长度（））；
      }

      公共字符串 convertInfixToPostfix()      
      {
        for(int index=0; index < infix.length(); index++)
        {
          char itemRead = infix.charAt(index);

          开关（项目读取）
          {

          案例“+”：               
          案子 '-'：
            processOperator(itemRead, 1);      
            休息;               

          案子 '*'：               
          案子 '/'：
            processOperator(itemRead, 2);      
            休息;               

          案子 '（'：               
            stack.push(itemRead);   
            休息;

          案子 '）'：               
            popStackTillOpenParenthesis();        
            休息;

          默认：                
            输出 = 输出 + 项目读取；
            休息;
          }  
        }  
        而（！stack.isEmpty（））     
        {
          输出 = 输出 + stack.pop();
        }
        返回输出；                   
      }  

      public void processOperator(char infixOperator, int 优先级)
      {                                
        而（！stack.isEmpty（））
        {
          char popedOpr = stack.pop();

          if( popedOpr == '(' )            
          {
            stack.push(popedOpr);      
            休息;
          }
          别的                          
          {
            int popedOprPrecedence;                 
            如果（popedOpr == '+' || popedOpr == '-'）
              popedOprPrecedence = 1;
            别的
              popedOprPrecedence = 2;
            如果（popedOprPrecedence < 优先级）          
            {                       
              stack.push(popedOpr);   
              休息;
            }
            别的                       
              输出 = 输出 + popedOpr;  
          }  
        }  
        stack.push(infixOperator);        
      }  

      公共无效popStackTillOpenParenthesis()
      {                             
        而（！stack.isEmpty（））
        {
          char popedOpr = stack.pop();
          if( popedOpr == '(' )     
            休息;
          别的
            输出 = 输出 + popedOpr;
        }  
      }  
    }

```

带有算法和示例的后缀符号解释见：[http ://www.thinkscholar.com/java/java-topics/infix-to-postfix/](http://www.thinkscholar.com/java/java-topics/infix-to-postfix/) [http://www.thinkscholar.com/java/java-topics /中缀到后缀/](http://www.thinkscholar.com/java/java-topics/infix-to-postfix/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-06T17:32:09.067

试试这个代码

```
 /**
  * Checks if the input is operator or not
  * @param c input to be checked
  * @return true if operator
  */
 private boolean isOperator(char c){
  if(c == '+' || c == '-' || c == '*' || c =='/' || c == '^')
   return true;
  return false;
 }

 /**
  * Checks if c2 has same or higher precedence than c1
  * @param c1 first operator
  * @param c2 second operator
  * @return true if c2 has same or higher precedence
  */
 private boolean checkPrecedence(char c1, char c2){
  if((c2 == '+' || c2 == '-') && (c1 == '+' || c1 == '-'))
   return true;
  else if((c2 == '*' || c2 == '/') && (c1 == '+' || c1 == '-' || c1 == '*' || c1 == '/'))
   return true;
  else if((c2 == '^') && (c1 == '+' || c1 == '-' || c1 == '*' || c1 == '/'))
   return true;
  else
   return false;
 }

 /**
  * Converts infix expression to postfix
  * @param infix infix expression to be converted
  * @return postfix expression
  */
 public String convert(String infix){
  String postfix = "";  //equivalent postfix is empty initially
  Stack<Character> s = new Stack<>();  //stack to hold symbols
  s.push('#');  //symbol to denote end of stack

  for(int i = 0; i < infix.length(); i++){
   char inputSymbol = infix.charAt(i);  //symbol to be processed
   if(isOperator(inputSymbol)){  //if a operator
    //repeatedly pops if stack top has same or higher precedence
    while(checkPrecedence(inputSymbol, s.peek()))
     postfix += s.pop();
    s.push(inputSymbol);
   }
   else if(inputSymbol == '(')
    s.push(inputSymbol);  //push if left parenthesis
   else if(inputSymbol == ')'){
    //repeatedly pops if right parenthesis until left parenthesis is found
    while(s.peek() != '(') 
     postfix += s.pop();
    s.pop();
   }
   else
    postfix += inputSymbol;
  }

  //pops all elements of stack left
  while(s.peek() != '#'){
   postfix += s.pop();     
  }

  return postfix;
 } 
```

[这](http://javaingrab.blogspot.com/2014/05/infix-to-postfix-conversion-using-stack.html)取自我的博客。访问获取完整代码并详细查看转换的每个步骤。另请注意，此处还考虑了括号和指数，并且可以转换任何表达式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-01T13:21:49.783

试试这段代码，效率更高，因为这里我没有使用很多方法，只是主要方法。

```
package inn; 
```

导入 com.sun.org.apache.bcel.internal.generic.GOTO；导入 java.util.Scanner；

/** * * @作者疯子 */

公共课半条命{

```
public Half_Life() 
{

    //  a+b*c
    //  a*b+c
    // d/e*c+2
    // d/e*(c+2)
    // (a+b)*(c-d)
    // (a+b-c)*d/f
    // (a+b)*c-(d-e)^(f+g)
    // (4+8)*(6-5)/((3-2)*(2+2))
    //(300+23)*(43-21)/(84+7)  -> 300 23+43 21-*84 7+/

}

 public static void main(String[] args)
{

    System.out.print("\n Enter Expression : ");
    Scanner c=new Scanner(System.in);
    String exp=c.next();

    int sym_top=0,po_top=-1,p=0,p2=0;
    int size=exp.length();

    char a[]=exp.toCharArray();
    char symbols[]=new char[size];
    char pfix[]=new char[size];

    symbols[sym_top]='$';

    for(int i=0;i<size;i++)
    {
        char c1=a[i];

        if(c1==')')         
        {
            while(sym_top!=0)
            {
                if(symbols[sym_top]=='(')
                   break;

                pfix[++po_top]=symbols[sym_top--];                  
            }
            sym_top--;

        }

        else if(c1=='(')
        {
                         symbols[++sym_top]=c1;
        }

        else if(c1=='+' || c1=='-' || c1=='*' || c1=='/' || c1=='^')
        {

                            switch(c1)
                            {
                                case '+':
                                case '-':   p=2;
                                            break;

                                case '*':
                                case '/':   p=4;
                                            break;

                                case '^':   p=5;
                                            break;

                                default:    p=0;                              

                            }

                            if(sym_top<1)
                            {

                                    symbols[++sym_top]=c1;

                            }

                            else
                            {

                                   do
                                   {

                                       char c2=symbols[sym_top];

                                            if(c2=='^')
                                            {
                                                p2=5;
                                            }

                                            else if(c2=='*' || c2=='/')
                                            {
                                                p2=4;                
                                            }

                                            else if(c2=='+' || c2=='-')
                                            {
                                                p2=2;
                                            }

                                            else
                                            {
                                                p2=1;
                                            }

                                                    if(p2>=p)
                                                    {                                                   
                                                          pfix[++po_top]=symbols[sym_top--];
                                                    }

                                                    if(p>p2 || symbols[sym_top]=='$')
                                                    {
                                                          symbols[++sym_top]=c1;
                                                          break;
                                                    }

                                   }while(sym_top!=-1);

                            }

        }

        else
        {
            pfix[++po_top]=c1;
        }
    }

      for(;sym_top>0;sym_top--)
      {

               pfix[++po_top]=symbols[sym_top];

      }

    System.out.print("\n Infix to Postfix expression : ");

    for(int j=0;j<=po_top;j++)
    {

            System.out.print(pfix[j]);

    }    

    System.out.println("\n");
} 
```

}

检查最后一个大括号。

您可以通过以下方式索取更多数据结构程序：sankie2902@gmail.com

# iphone - 上传到服务器后，视频方向从纵向转换为横向：iPhone 相机

> ID：12667579
> 
> 赞同：3
> 
> 时间：2012-10-01T04:36:08.853
> 
> 标签：iphone, ios, ios4

我从我的应用程序中以纵向模式拍摄了一段视频。当我上传相同内容并在服务器上检查时，视频会自动转换为横向。

我正在使用以下代码开始捕获视频

```
picker.sourceType = UIImagePickerControllerSourceTypeCamera;

picker.videoMaximumDuration = 3.0;

picker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModeVideo;  

[self presentModalViewController:picker animated:YES]; 
```

请建议，我在从相机拍摄图像时遇到了同样的问题，为此我从[这篇](https://stackoverflow.com/questions/5427656/ios-uiimagepickercontroller-result-image-orientation-after-upload/5427890#5427890)文章中得到了帮助，但对于视频我没有任何正确的想法。

# adfs2.0 - 在服务提供者或身份提供者上导入 sp.xml 文件

> ID：12667581
> 
> 赞同：0
> 
> 时间：2012-10-01T04:36:44.890
> 
> 标签：adfs2.0, openam

我正在做 adfs+openam 联合，其中 openam 服务器是我的服务提供者，而 adfs 服务器是身份提供者。我在 openam 服务器上创建了 sp.xml 和 sp-extend.xml 文件。以及 adfs 服务器上的 idp.xml 和 idp-extend.xml。

但是无论是在 Openam 还是 adfs 服务器上，该 sp.xml 应该在哪里导入。idp.xml 也一样。我对此感到困惑。我正在参考以下站点进行配置：

[https://wikis.forgerock.org/confluence/display/openam/OpenAM+and+ADFS2+configuration](https://wikis.forgerock.org/confluence/display/openam/OpenAM+and+ADFS2+configuration)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:39:25.360

通常，idp.xml（ADFS 元数据）将被导入 OpenAM，而 sp.xml（OpenAM 元数据）将被导入 ADFS。

在 ADFS 方面，这将通过单击“添加信赖方信任”然后选择第二个选项“从文件中导入有关信赖方的数据”来完成。

文档不清楚。对于 OpenAM 来说很简单：

“第二次导入身份提供者。这可以通过上传元数据 XML 文件来完成。您需要同时上传每个提供者的元数据和扩展元数据文件。”

这意味着两个文件（idp 和 sp）。

对于 ADFS，它建议使用第一个“添加依赖方信任”选项，即“导入有关在线发布的依赖方的数据”。

“但是 ADFS 允许我们使用 OpenAM 联合 URL 来动态获取元数据。因此选择第一个选项并使用以下 URL

[https://sso01.aaa.local:8443/opensso/saml2/jsp/exportmetadata.jsp](https://sso01.aaa.local:8443/opensso/saml2/jsp/exportmetadata.jsp)

这将导入依赖方信任。”

我会尝试只将 idp.xml 导入 OpenAM，然后使用这两个选项中的任何一个将 sp.xml 导入 ADFS。

# c - 在 C 中读取和写入文件

> ID：12667582
> 
> 赞同：0
> 
> 时间：2012-10-01T04:37:45.353
> 
> 标签：c

我正在慢慢学习 C，但不是很好。我一直在阅读无数关于阅读和写作的主题和问题，但我还没有找到任何能让这一切都为我所用的东西。

我得到了以下代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#define MAX 100

struct YouTubeVideo { 
char video_name[1024];      // YouTube video name
int ranking;                // Number of viewer hits
char url[1024];             // YouTube URL
};

struct YouTubeVideo Collection[MAX];

int tail = 0;

//-- Forward Declaration --// 
void printall();
void insertion();
void branching(char option);
void menu(); 

int main()
{
char ch; 

// TODO: Add code to load save data from file

printf("\n\nWelcome to CSE240: YouTube Classic Hits\n");

do {
     menu();
     fflush(stdin);           // Flush the standard input buffer 
     ch = tolower(getchar()); // read a char, convert to lower case
     branching(ch);
} while (ch != 'q');

return 0; 
}

void menu()
{
printf("\nMenu Options\n");
printf("------------------------------------------------------\n");
printf("i: Insert a new favorite\n");
printf("p: Review your list\n"); 
printf("q: Save and quit\n");
printf("\n\nPlease enter a choice (i, p, or q) ---> "); 
}

void branching(char option)
{
switch(option)
{
    case 'i':
        insertion();
    break;

    case 'p':
        printall();
    break;

    case 'q':
        // TODO: Add code to save data into a file
    break;

    default:
        printf("\nError: Invalid Input.  Please try again..."); 
    break;
}
}

void insertion()
{
if(tail < MAX)
{
    printf("\nWhat is the name of the video? (No spaces characters allowed)\n");
    scanf("%s", Collection[tail].video_name);

    printf("\nHow many viewer hits does this video have?\n");
    scanf("%d", &Collection[tail].ranking);

    printf("\nPlease enter the URL: ");
    scanf("%s", &Collection[tail].url);

    tail++;
}
else
{
    printf("\nERROR: Your collection is full. Cannot add new entries.\n");
}
}

void printall()
{
int i; 

printf("\nCollections: \n"); 

for(i = 0; i < tail; i++)
{
    printf("\nVideo Name: %s", Collection[i].video_name);
    printf("\nRanking (Hits): %d", Collection[i].ranking);
    printf("\nURL: %s", Collection[i].url);
    printf("\n");
}
} 
```

我想编写将集合存储到文件中的代码，同样正确地编写将加载文件并从中读取的代码。

感谢一位相当有帮助的助教，我能够为每个人制定以下代码

```
void store()
{
FILE * fileName;
fileName = fopen ( "Ranking.dbm" , "wb" );
fwrite ( Collection, sizeof(struct YouTubeVideo), MAX, fileName);

fclose (fileName);
                    } 
```

和

```
void read()
{
FILE *fileName;
fileName = fopen("ranking.dbm", "rb");
if (fileName != NULL){
    fread ( Collection, sizeof(struct YouTubeVideo), MAX, fileName);
}
else {
    printf("ERROR");
                        }   

                    } 
```

我相信这些都可以发挥作用，但真正的问题是我认为我不太了解它们是如何工作的，而且我相信由于我什至不知道它们是如何工作的，所以我不知道如何在代码中使用它们。

我将这两种方法都添加到给定的代码中并想出了这个：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <ctype.h>

#define MAX 100

struct YouTubeVideo {
char video_name[1024];      // YouTube video name
int ranking;                // Number of viewer hits
char url[1024];             // YouTube URL
};

struct YouTubeVideo Collection[MAX];

int tail = 0;

//-- Forward Declaration --//
void printall();
void insertion();
void branching(char option);
void menu();
void store();
void read();

int main()
{
char ch;

read();

printf("\n\nWelcome to CSE240: YouTube Classic Hits\n");

do {
    menu();
    fpurge(stdin);            // Flush the standard input buffer
    ch = tolower(getchar()); // read a char, convert to lower case
    branching(ch);
} while (ch != 'q');

return 0;
}

void menu()
{
printf("\nMenu Options\n");
printf("------------------------------------------------------\n");
printf("i: Insert a new favorite\n");
printf("p: Review your list\n");
printf("q: Save and quit\n");
printf("\n\nPlease enter a choice (i, p, or q) ---> ");
}

void branching(char option)
{

switch(option)
{
    case 'i':
        insertion();
        break;

    case 'p':
        printall();
        break;

    case 'q':
        store();
        break;

    default:
        printf("\nError: Invalid Input.  Please try again...");
        break;
}
}

void insertion()
{
if(tail < MAX)
{
    printf("\nWhat is the name of the video? (No spaces characters allowed)\n");
    scanf("%s", Collection[tail].video_name);

    printf("\nHow many viewer hits does this video have?\n");
    scanf("%d", &Collection[tail].ranking);

    printf("\nPlease enter the URL: ");
    scanf("%s", &Collection[tail].url);

    tail++;
}
else
{
    printf("\nERROR: Your collection is full. Cannot add new entries.\n");
}
}

void printall()
{
int i;

printf("\nCollections: \n");

for(i = 0; i < tail; i++)
{
    printf("\nVideo Name: %s", Collection[i].video_name);
    printf("\nRanking (Hits): %d", Collection[i].ranking);
    printf("\nURL: %s", Collection[i].url);
    printf("\n");
}

}

void store()
{
FILE * fileName;
fileName = fopen ( "Ranking.dbm" , "wb" );
if (fileName != NULL)
    {
        fwrite ( Collection, sizeof(struct YouTubeVideo), MAX, fileName);
        fclose (fileName);
    }

else {
    perror("Following error occurred(): ");
}
                    }

void read()
{
FILE *fileName;
fileName = fopen("Ranking.dbm", "rb");
if (fileName != NULL)
    {
        fread ( Collection, sizeof(struct YouTubeVideo), MAX, fileName);
        fclose(fileName);
    }

else {
    perror("Following error occurred with fopen(): ");
                        }   

                    } 
```

现在我确信任何读过这篇文章的人可能已经因为他们看到了问题而面对手掌，但我没有。该代码不会创建要写入的文件，同样它也没有可读取的内容，所以我什至无法开始看到它有什么问题。现在我不是在寻找一个给定的答案，但我真的很想知道我做错了什么，我似乎不理解哪些概念，以及如何解决这些问题。我已经对此进行了几个小时的研究，我意识到这是初级的，但我真的很想学习。在教授说最多只需要几个小时即可完成的主题上花费数小时令人沮丧。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T04:41:18.540

`fopen()`你真的应该检查反对的返回值`NULL`- 如果打开文件有问题，它将返回`NULL`并设置`errno`. 这可能是一个权限错误，通过检查返回值并在设置了错误时打印错误，您将获得有关问题所在的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T04:53:35.727

我相信你可能对`read`函数有问题，它没有调用`fclose`文件句柄（顺便说一句，调用它`fileName`有点误导）。

因为您将文件保持打开状态，所以当您最终调用`store`. 如果无法在该函数中打开文件，您还没有输出任何错误消息，因此很容易被忽视……至少在您想知道为什么您的文件日期没有改变之前。

否则代码看起来没问题。它所做的只是将数组的全部内容转储出内存并再次读回。您可能还需要写出 的值`tail`，因为它会跟踪您保留的元素数量。因此，只需进行最少的代码更改，请执行以下操作：

```
fwrite ( &tail, sizeof(int), 1, fileName);
fwrite ( Collection, sizeof(struct YouTubeVideo), MAX, fileName); 
```

当然还有`fread`你`read`方法中的相应调用。

```
fread ( &tail, sizeof(int), 1, fileName);
fread ( Collection, sizeof(struct YouTubeVideo), MAX, fileName); 
```

重申：不要忘记关闭您的文件！！！！

```
fclose(fileName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T04:54:53.290

次要：确保更频繁地检查 fopen、fread、fwrite 等内容的返回值。

轻度：文件名中可能存在拼写错误（某些操作系统的文件名区分大小写）

严重：read() 没有为 tail 设置值... :)

# c# - 如何在 Windows Phone 7 中的 ListPicker 中选择更改后更新文本框内容？

> ID：12667586
> 
> 赞同：0
> 
> 时间：2012-10-01T04:38:36.677
> 
> 标签：c#, sql, windows-phone-7

我必须更新我的`txtid`, `txtName`, `txtAge`, `txtContact`..OnSelectionChange `ListPicker`，但即使在选择项目之后它也不会更新`txtfields`。我怎样才能加强它？

```
public partial class Update : PhoneApplicationPage
    {

        Button btnUpdate1 = null;
        TextBox txtid = null;
        TextBox txtName = null;
        TextBox txtAge = null;
        TextBox txtContact = null;
        ListPicker lp = null;
        int selectedItem ;

        public Update()
        {           
            InitializeComponent();
            int x = noofrows();
            createUpdateButton();
            createListPicker();
            selectedItem = Convert.ToInt32(lp.SelectedItem);     
            createTxtId(selectedItem);
            createTxtName(selectedItem);
            createTxtAge(selectedItem);
            createTxtContact(selectedItem);

        }
        public void createListPicker()
        {
            lp = new ListPicker();            
            lp.BorderBrush = new SolidColorBrush(Colors.White);
            lp.BorderThickness = new Thickness(3);
            lp.Margin = new Thickness(12, 5, 0, 0);
            lp.Width = 400;
            int x = noofrows();
            for (int a = 1; a <= x; a++)
            {
                string str1 = returnID(a);
                lp.Items.Add(str1);                
            }
            lp.SelectionChanged += (s, e) =>
            {
                selectedItem = Convert.ToInt32(lp.SelectedItem);

            };
            LayoutRoot.Children.Add(lp);    

        }
        public void createUpdateButton()
        {
            btnUpdate1 = new Button();
            btnUpdate1.Margin = new Thickness(100, 600, 0, 0);
            btnUpdate1.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
            btnUpdate1.VerticalAlignment = System.Windows.VerticalAlignment.Bottom;
            btnUpdate1.Height = 100;
            btnUpdate1.Width = 150;
            btnUpdate1.Content = "update";
            btnUpdate1.Foreground = new SolidColorBrush(Colors.White);
            btnUpdate1.Background = new SolidColorBrush(Colors.Black);
            btnUpdate1.BorderBrush = new SolidColorBrush(Colors.White);
            btnUpdate1.BorderThickness = new Thickness(3);
            btnUpdate1.FontSize = 28;
            LayoutRoot.Children.Add(btnUpdate1);
            btnUpdate1.Click += (s, e) =>
            {
                UpdateDatabase(selectedItem);
            };

        }
        public void createTxtId(int z)
        {
            int id  = z ;
            txtid = new TextBox();
            txtid.Margin = new Thickness(12, 100, 0, 0);
            txtid.Width = 400;
            txtid.Height = 100;
            txtid.FontSize = 28;
            txtid.Foreground = new SolidColorBrush(Colors.Black);
            txtid.BorderBrush = new SolidColorBrush(Colors.Black);
            txtid.VerticalAlignment = System.Windows.VerticalAlignment.Top;
            txtid.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
            txtid.BorderThickness = new Thickness(3);
            txtid.IsReadOnly = true;
            txtid.Text = "  " + id;
            LayoutRoot.Children.Add(txtid);

        }
        public void createTxtName(int z)
        {
            txtName = new TextBox();
            txtName.Margin = new Thickness(12, 200, 0, 0);
            txtName.Width = 400;
            txtName.Height = 100;
            txtName.FontSize = 28;
            txtName.Foreground = new SolidColorBrush(Colors.Black);
            txtName.BorderBrush = new SolidColorBrush(Colors.Black);
            txtName.VerticalAlignment = System.Windows.VerticalAlignment.Top;
            txtName.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
            txtName.BorderThickness = new Thickness(3);
            txtName.Text = SelectName(z);
            txtName.Tap += (s, e) =>
            {
                if (txtName.Text == "Name")
                {
                    txtName.Text = "";
                }
            };
            txtName.LostFocus += (s, e) =>
            {
                if (txtName.Text == "")
                {
                    txtName.Text = "Name";
                }
            };
            LayoutRoot.Children.Add(txtName);
        }
        public void createTxtAge(int z)
        {
            txtAge = new TextBox();
            txtAge.Margin = new Thickness(12, 300, 0, 0);
            txtAge.Width = 400;
            txtAge.Height = 100;
            txtAge.FontSize = 28;
            txtAge.Foreground = new SolidColorBrush(Colors.Black);
            txtAge.BorderBrush = new SolidColorBrush(Colors.Black);
            txtAge.VerticalAlignment = System.Windows.VerticalAlignment.Top;
            txtAge.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
            txtAge.BorderThickness = new Thickness(3);

            txtAge.MaxLength = 2;

            txtAge.Text = SelectAge(z);
            txtAge.InputScope = new InputScope();
            txtAge.InputScope.Names.Add(new InputScopeName() { NameValue = InputScopeNameValue.Number });
            txtAge.Tap += (s, e) =>
            {
                if (txtAge.Text == "Age")
                {
                    txtAge.Text = "";
                }
            };
            txtAge.LostFocus += (s, e) =>
            {
                if (txtAge.Text == "")
                {
                    txtAge.Text = "Age";
                }
            };
            LayoutRoot.Children.Add(txtAge);
        }
        public void createTxtContact(int z)
        {
            txtContact = new TextBox();
            txtContact.Margin = new Thickness(12, 400, 0, 0);
            txtContact.Width = 400;
            txtContact.Height = 100;
            txtContact.FontSize = 28;
            txtContact.MaxLength = 10;
            txtContact.Foreground = new SolidColorBrush(Colors.Black);
            txtContact.BorderBrush = new SolidColorBrush(Colors.Black);
            txtContact.VerticalAlignment = System.Windows.VerticalAlignment.Top;
            txtContact.HorizontalAlignment = System.Windows.HorizontalAlignment.Left;
            txtContact.BorderThickness = new Thickness(3);
            txtContact.Text = SelectContact(z);
            txtContact.InputScope = new InputScope();
            txtContact.InputScope.Names.Add(new InputScopeName() { NameValue = InputScopeNameValue.Number });
            txtContact.Tap += (s, e) =>
            {
                if (txtContact.Text == "Contact")
                {
                    txtContact.Text = "";
                }
            };
            txtContact.LostFocus += (s, e) =>
            {
                if (txtContact.Text == "")
                {
                    txtContact.Text = "Contact";

                }
            };
            LayoutRoot.Children.Add(txtContact);

        }
        public Int32 noofrows()
        {
            int b = Convert.ToInt32((Application.Current as App).db.SelectList("select count(*) from details"));
            return b;
        }
        public string returnID(int z)
        {
            return Convert.ToString((Application.Current as App).db.SelectList("select id from details where id =" + z));
        }
        public String SelectName(int x)
        {
            return Convert.ToString((Application.Current as App).db.SelectList("select name from details where id =" + x));
        }
        public String SelectAge(int x)
        {
            return Convert.ToString((Application.Current as App).db.SelectList("select age from details where id =" + x));
        }
        public String SelectContact(int x)
        {
            return Convert.ToString((Application.Current as App).db.SelectList("select contact from details where id =" + x));
        }
        public void  UpdateDatabase(int ID)
        {           
            if (txtName.Text=="Name")
            {
                MessageBox.Show("Enter a valid Name");

            }
            else if (txtAge.Text.Length>=3||txtAge.Text=="Age")
            {
                MessageBox.Show("Enter A valid Age (1-99)");

            }
            else if (txtContact.Text.Length != 10)
            {
                MessageBox.Show("Enter a valid Mobile number Of 10 digit");

            }
            else
            {
                string s1 = "update details set id='" + Convert.ToInt64(txtid.Text) + "', name = '" + txtName.Text + "', age = '" + txtAge.Text + "', contact = '" + txtContact.Text + "'where id = " + ID;
                string s2 = Convert.ToString((Application.Current as App).db.SelectList(s1));

                MessageBox.Show("Updated Successfully");
                NavigationService.Navigate(new Uri("/MainPage.xaml", UriKind.Relative));
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:03:20.880

你正在使用这么多的代码。如果您遵循 MVM 架构并尝试将文本块绑定到您的 viewModel 会更好。让我们考虑以下场景。

您已将 xaml 元素绑定到 viewModel 中的 selectedItem。现在，当 selectedItem 的值发生更改时，会触发 Notify 事件，该事件将通知 UI，并且值将自动更新。

我建议您研究[视图模型](http://msdn.microsoft.com/en-us/library/hh821028.aspx)并尝试实现它。它真的很容易，可以为您省去很多麻烦。

尝试实施一些[示例](http://code.msdn.microsoft.com/wpapps/Simple-MVVM-and-Windows-134e460f)

希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T03:47:05.967

我明白了...实际上，如果我们要更新，我们需要更改每个文本框的文本。所以选择改变后，试试这样。

公共无效 createListPicker()

```
 {
        lp = new ListPicker();            
        lp.BorderBrush = new SolidColorBrush(Colors.White);
        lp.BorderThickness = new Thickness(3);
        lp.Margin = new Thickness(12, 5, 0, 0);
        lp.Width = 400;
        int x = noofrows();
        for (int a = 1; a <= x; a++)
        {
            string str1 = returnID(a);
            lp.Items.Add(str1);                
        }
        lp.SelectionChanged += (s, e) =>
        {
            selectedItem = Convert.ToInt32(lp.SelectedItem);
            txtid.Text = selectedItem.ToString();
            txtName.Text = SelectName(selectedItem);
            txtAge.Text = SelectAge(selectedItem);
            txtContact.Text = SelectContact(selectedItem);
        };
        LayoutRoot.Children.Add(lp);    

    } 
```

这将在每次选择更改事件后立即更新。

# java - 树结构中的访问者模式

> ID：12667593
> 
> 赞同：2
> 
> 时间：2012-10-01T04:39:52.363
> 
> 标签：java, api, design-patterns

我想修改我对树结构和不同节点类型的访问者模式的使用。树结构中的每个节点都必须实现一个回调方法，并且访问者实现必须为每个节点类型（或者至少是他感兴趣的类型）实现类似以下的内容：

```
/**
 * Do something when visiting a {@link CommentNode}.
 * 
 * @param pNode
 *          the {@link CommentNode}
 */
EVisitResult visit(final @Nonnull CommentNode pNode);

/**
 * Do something when visiting an {@link ElementNode}.
 * 
 * @param pNode
 *          the {@link ElementNode}
 */
EVisitResult visit(final @Nonnull ElementNode pNode); 
```

我正在使用事务游标语义来浏览树结构并提供一个 acceptVisitor 方法，即在游标中我实现了以下内容：

```
@Override
public EVisitResult acceptVisitor(final @Nonnull IVisitor pVisitor) {
  assertNotClosed();
  return mCurrentNode.acceptVisitor(pVisitor);
} 
```

然而，访问者是 API 中的一个缺陷，因为暴露节点本身`ElementNode`是非常危险的，因为每个节点类型允许的修改应该只能在特定的写入事务中进行（实现为提供遍历树结构的方法）。否则，更改在`commit()`.

关于如何规避这种情况的任何建议？我以某种方式怀疑我是否能够提供访问者界面作为方法签名肯定必须不同......

好的，我将提供不可变的“包装器”或代理类：

```
/** Mutable {@link CommentNode}. */
private final CommentNode mNode;

/**
 * Constructor.
 * 
 * @param pNode
 *          mutable {@link CommentNode}
 */
private ImmutableComment(final @Nonnull CommentNode pNode) {
  mNode = checkNotNull(pNode);
}

/**
 * Get an immutable comment
 * 
 * @param pNode
 *          the {@link CommentNode} which should be immutable
 * @return an immutable instance
 */
public static ImmutableComment of(final @Nonnull CommentNode pNode) {
  return new ImmutableComment(pNode);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T18:26:43.237

您可以让游标类使用代理包装您的节点，这将向访问者公开与节点相同的接口。然后没有访问者可以直接修改节点。事务逻辑可以放在代理中，也可以将代理委托回游标。

# junit - 为 if、循环和异常编写 junit 测试用例的指南

> ID：12667604
> 
> 赞同：1
> 
> 时间：2012-10-01T04:41:49.620
> 
> 标签：junit

我是 Junit 的新手。我想为 if 条件，循环编写测试用例。

我们是否有任何指导方针或程序来编写 if,loop 条件的测试用例？
任何人都可以用一个例子来解释吗？

```
IF Age < 18 THEN WHILE Age <> 18

  DO ResultResult = Result +1 AgeAge = Age +1 END
  DO Print “You can start driving in {Result} years” 

ELSE 

 Print “You can start driving now!” 

ENDIF 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:32:15.930

对于您的代码应该能够处理的每个主要场景，您都需要一个测试用例。使用“if”语句，通常有两种情况，尽管您可能包括第三种情况，它是这两种情况的“边界”。对于循环，您可能希望包含循环多次运行的情况，以及根本不运行循环的情况。

在您的特定示例中，我将编写三个测试用例 - 一个年龄小于 18 岁，一个年龄正好是 18 岁，一个年龄超过 18 岁。在 JUnit 中，每个测试用例都是一个单独的方法测试班。每个测试方法都应该在特定场景中运行您正在测试的代码，然后断言结果是正确的。

最后，您需要考虑调用每个测试方法的内容。我强烈建议使用一个句子来指示您正在测试的场景以及您期望发生的情况。有些人喜欢以“test”这个词开始他们的测试方法名称；但我的经验是，这往往会将注意力从您尝试测试的 CONDITION 上转移开，并将注意力吸引到您正在测试的特定方法或功能上，结果您往往会得到较低质量的测试。对于您的示例，我会将测试方法称为这样的。

```
public void canStartDrivingIfAgeOver18()
public void canStartDrivingIfAgeEquals18()
public void numberOfYearsRemainingIsShownIfAgeUnder18() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:39:08.453

根据我对用junit for java编写的理解，我们习惯于将源代码创建到不同的块中是常规代码，并用于将值作为args从测试用例传递给函数，因此这些值将进入块语句，并通过测试用例。

例如，您通过假设 functionName(int age) 将变量设置为 age，对于测试，您应该将测试用例中的整数作为 functionName(18) 传递，它将进入语句并向您显示测试用例的状态.为测试类创建测试用例为功能编写测试用例

```
UseClass classObj=new UseClass();// it should be your class

    @Test
      public void testValidateAge() {
          classObj.validateAge("20");
          assertEquals(200,"");
   } 
```

如果错了，请纠正我:)

# c# - 使用 OLEDB 读取 excel

> ID：12667606
> 
> 赞同：2
> 
> 时间：2012-10-01T04:42:05.597
> 
> 标签：c#

我在我的网站上构建了一个 excel 上传功能。它将使用 OLEDB 读取 excel 数据。问题是用户输入的 excel 文件可以是“真正的”excel 文件，也可以是 html 导入扩展属性中的 excel，因此连接字符串不同。现在我用try catch处理它。如果第一个 conn 字符串产生异常，那么它将打开与 catch 中的另一个连接字符串的连接。

问题是我的领导说我不能使用那种方法。那么有什么方法可以让我在不尝试捕获（任何相关的引发异常）的情况下做到这一点，或者查看 excel 文件是否在 excel 8.0 扩展属性或 html 导入扩展属性中。

```
try
{
    ...
    try
    {
        connection.ConnectionString = GetConnectionString(pathCopy);
        connection.Open();
    }
    catch
    {
        connection.ConnectionString = GetConnectionStringHTMLEncoded(pathCopy);
        connection.Open();
    }
    ...
catch (Exception ex)
{
    ...
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T04:30:45.377

您可以通过在文本编辑器（如记事本）中打开其中一个 html 字符串编码文件来验证文件的内部构成。您应该看到底层文件仍然是 html 文本。您应该能够读取文件的第一行并检查字符串“html”

```
var reader = System.IO.File.OpenText(pathCopy);
string firstLine = reader.ReadLine();
if (firstLine.IndexOf("html", StringComparison.InvariantCultureIgnoreCase) > 0)
    //some stuff
else
    //other stuff 
```

你不应该在二进制文件上得到错误，你只会在字符串中得到一些非常奇怪的字符——幸运的是，这些字符不包括字符串“html”。

# java - 八皇后谜题逻辑错误

> ID：12667608
> 
> 赞同：0
> 
> 时间：2012-10-01T04:42:22.363
> 
> 标签：java, recursion, backtracking

我正在编写一个程序来递归地解决八皇后难题，但是我很难弄清楚我应该如何让我的程序“回溯”来解决问题。我的 Solve() 方法和我的 isOpen() 方法可能都是错误的，但我无法弄清楚我做错了什么。我在下面有我的代码（和驱动程序）。对不起，它太长了，但如果我能得到一些提示，我会很感激。

注意* 图片图标只是 Freddie Mercury 的图片

```
import java.io.*;
import java.util.Formatter;
import javax.swing.*;

import java.awt.*;

public class EightQueens extends JFrame {

// declare class constants as needed
final int BOARD_DIMENSION = 8;
final boolean[][] BOARD = new boolean[8][8];
// declare instance variables
PrintWriter output;
int backtrack;
int comparison;
File file;
// gui components
JPanel chessPanel;
JPanel square[];
Icon queenIcon;
JLabel imageLabel;

// constructor method
public EightQueens() throws FileNotFoundException {

    // gui stuff
    setTitle("8 Queens: Freddie Style");
    setPreferredSize(new Dimension(800, 800));
    chessPanel = new JPanel(new GridLayout(8, 8));
    chessPanel.setPreferredSize(new Dimension(100, 100));
    chessPanel.setBackground(Color.BLACK);
    square = new JPanel[64];
    queenIcon = new ImageIcon(getClass().getResource(
            "/resource/mercury.jpg"));
    JLabel imageLabel = new JLabel("", queenIcon, JLabel.CENTER);

    // CREATE AND INITIALIZE THE OUTPUT FILE
    file = new File("TraceQueens.txt");
    output = new PrintWriter(file);

    // CREATE AND INITIALIZE BOARD
    for (int i = 0; i < 8; i++)
        for (int j = 0; j < 8; j++)
            BOARD[i][j] = false;

    // add the squares to the chess panel
    for (int i = 0; i < square.length; i++)// adds chess squares to the
                                            // board
    {
        square[i] = new JPanel(new BorderLayout());
        square[i].setBackground(Color.BLACK);
        chessPanel.add(square[i]);
    }
    // this will make the squares the correct colors
    for (int i = 0; i < BOARD_DIMENSION; i = i + 2)
        square[i].setBackground(Color.WHITE);
    for (int i = BOARD_DIMENSION + 1; i < (2 * BOARD_DIMENSION)
            && i > BOARD_DIMENSION; i = i + 2)
        square[i].setBackground(Color.WHITE);
    for (int i = (2 * BOARD_DIMENSION); i < (3 * BOARD_DIMENSION)
            && i >= (2 * BOARD_DIMENSION); i = i + 2)
        square[i].setBackground(Color.WHITE);
    for (int i = (3 * BOARD_DIMENSION) + 1; i < (4 * BOARD_DIMENSION)
            && i > (3 * BOARD_DIMENSION); i = i + 2)
        square[i].setBackground(Color.WHITE);
    for (int i = (4 * BOARD_DIMENSION); i < (5 * BOARD_DIMENSION)
            && i >= (4 * BOARD_DIMENSION); i = i + 2)
        square[i].setBackground(Color.WHITE);
    for (int i = (5 * BOARD_DIMENSION) + 1; i < (6 * BOARD_DIMENSION)
            && i > (5 * BOARD_DIMENSION); i = i + 2)
        square[i].setBackground(Color.WHITE);
    for (int i = (6 * BOARD_DIMENSION); i < (7 * BOARD_DIMENSION)
            && i >= (6 * BOARD_DIMENSION); i = i + 2)
        square[i].setBackground(Color.WHITE);
    for (int i = (7 * BOARD_DIMENSION) + 1; i < (8 * BOARD_DIMENSION)
            && i > (7 * BOARD_DIMENSION); i = i + 2)
        square[i].setBackground(Color.WHITE);

    // puts the chess panel on the EightQueens frame
    add(chessPanel);

} // end constructor

// user interface method used to wrap the parameter representing the first
// column
public boolean solve() {
    return solve(0);
}

// recursive method solve

public boolean solve(int column) {

    // The Queen has been placed on the board in column
    int row = 0; 
    BOARD[row][column] = true;
    output.println("The queen has been placed at [0][" + column + "]");

    // if column is beyond the last column, then the problem is solved
    // base case
    for(int r = 0; r < BOARD_DIMENSION; r++); 
    if (column == BOARD_DIMENSION) {
        output.println("The problem has been solved");
        output.println("The program backtracked " + backtrack
                + " times and made " + comparison + " comparisons");

        // CLOSE FILE
        output.close();
        // RETURN TRUE
        return true;
    } else // attempt a solution from column
    {
        output.println("Attempting solution from column " + column);
        for (int i = 0; i < BOARD_DIMENSION; i++) {

            if (isOpen(i, column)) {
                BOARD[i][column] = true;
                comparison++;

                // solve the "rest of the board"
                if (solve(column + 1)) {
                    output.println("The queen has beel placed at [" + i
                            + "] + [" + column + "]");
                    square[((i * 2) + column)].add(imageLabel,
                            BorderLayout.CENTER);// this converts the 2-d
                                                    // array location into a
                                                    // single value to
                                                    // make it compatible with the gui representation of the
                                                    // board
                    return true;
                }

                else {

                    BOARD[i][column] = false;
                    output.println("the queen has been removed from ["+i+"]["+column+"]"); 
                }
            } else
                output.println("The queen cannot be placed at [" + i
                        + "][" + column + "]");
        }
        backtrack++;
        //output.close(); //This is for testing only
        return false;

        // return false to Backtrack to previous column since no squares in
        // current row will solve problem
    }
}

// Method to verify that the square is open.
public boolean isOpen(int row, int column) {
    {
        for (int i = 0; i < BOARD_DIMENSION; i++)// tests for the same row
        {
            if (BOARD[row][i] == true)
                return false;
        }

        for (int i = 0; i < BOARD_DIMENSION; i++)// test for the same column
        {
            if (BOARD[i][column] == true)
                return false;
        }

        for (int i = 0; i < BOARD_DIMENSION; i++)
            // test for diagonal down to the left
            while (row - 1 >= 0 && column - 1 >= 0) {
                if (BOARD[row - 1][column - 1] == true)
                    return false;
            }

        for (int i = 0; i < BOARD_DIMENSION; i++)
            // test for diagonal up to the left
            while (row + 1 < BOARD_DIMENSION && column - 1 >= 0)
                if (BOARD[row + 1][column - 1] == true)
                    return false;
    }
    return true;
}

// output the board
public void printBoard()// this is probably wrong, but
                        // I want to find my mistakes in
                        // the rest of the code before fixing it
{
    for (int i = 0; i < BOARD_DIMENSION; i++)
        for (int j = 0; j < BOARD_DIMENSION; j++) {
            if (BOARD[i][j] == false) {
                System.out.print("*");
                if (i == BOARD_DIMENSION - 1)
                    System.out.print("\n");
            }

            else
                System.out.print("Q");
        }

}

} // end class EightQueens 
```

司机：

```
import javax.swing.*;
import java.io.*;
import java.util.*;

public class EightQueensGame {
public static void main(String args[]) throws FileNotFoundException {
    EightQueens eightQueens = new EightQueens();

    eightQueens.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    eightQueens.pack();

    eightQueens.setVisible(true);//just for testing
    if (eightQueens.solve())
    {
        eightQueens.setVisible(true);
        eightQueens.printBoard();

    }

    else
        System.out.println("Sorry, there is no solution");
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:04:50.797

你想多了这个问题。我不得不删除您的许多代码，因为它是多余的并且可以通过更有效的方式来实现。检查此 google 代码存储库：[https](https://code.google.com/p/8queens/) ://code.google.com/p/8queens/了解除回溯之外的更多方法。顺便说一句，您在这里违反了 MVC 规则。你应该已经实现了求解器然后是用户界面，这样你就可以决定改变你的视图。

八皇后求解器.java

```
public class EightQueensSolver {

    final boolean[][] board ;
    final int[] queensPositions;

    public EightQueensSolver(int boardSize) {
        if(boardSize<4){
            throw new RuntimeException("Can not solve boards of size < 4");
        }
        board = new boolean[boardSize][boardSize];
        queensPositions = new int[boardSize];
    }

    boolean solve(){
        return solve(0);
    }

    boolean solve(int row){
        for(int col=0;col<board.length;col++){

            if(isSafe(row, col)){
                //place the queen for now in this spot
                board[row][col]=true;
                queensPositions[row] = col;
                //if we have finished the board, done.
                if(row==board.length-1) return true;
                //otherwise keep placing queens on next rows
                if(solve(row+1)){
                    //if placing the next queen will make the board solved, OK
                    return true;
                }else{
                    //otherwise backtrack and try other move
                    board[row][col]=false; 
                }
            }

        }
        return false;
    }

    boolean isSafe(int row,int col){
        //no need to test if on the same row, because we 
        //place a single queen on each row.
        //we only need to check if two queens are on 
        //same column or same diagonal
        for(int r=0;r<row;r++){
            for(int c=0;c<board.length;c++){
                if(board[r][c] && (c==col || Math.abs(c-col)==Math.abs(r-row))) 
                    return false;
            }
        }
        return true;
    }

    void printBoard(){
        System.out.println(Arrays.deepToString(board)
                .replace('[', '\n').replace("]", "")
                .replace("true", "Q").replace("false", " ")
        );
    }

    int getQueenColumnPosition(int row){
        return queensPositions[row];
    }
} 
```

八皇后UI.java

```
public class EightQueensUI extends JFrame {

    // gui components
    Icon queenIcon;
    JLabel imageLabel;
    EightQueensSolver solver;

    // constructor method
    public EightQueensUI(int boardSize) {
        super("8 Queens: Freddie Style");
        setPreferredSize(new Dimension(800, 800));
        getContentPane().setLayout(new GridLayout(boardSize, boardSize));
        queenIcon = new ImageIcon(getClass().getResource("circle.png"));
        solver = new EightQueensSolver(boardSize);

        solver.solve();

        for(int row=0;row<boardSize;row++){
            for(int col=0;col<boardSize;col++){
                JPanel panel = new JPanel(new BorderLayout());
                panel.setBackground( (col-row)%2 == 0 ? Color.BLACK : Color.WHITE);
                if(solver.getQueenColumnPosition(row)==col){
                    panel.add(new JLabel(queenIcon));
                }
                getContentPane().add(panel);
            }
        }

    } // end constructor

} // end class EightQueensUI 
```

八皇后游戏.java

```
public class EightQueensGame {
    public static void main(String[] args) throws FileNotFoundException {
        EightQueensUI eightQueens = new EightQueensUI(8);

        eightQueens.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        eightQueens.pack();

        eightQueens.setVisible(true);//just for testing
        eightQueens.solver.printBoard();
    }
} 
```

输出是

```
Q,  ,  ,  ,  ,  ,  ,  , 
 ,  ,  ,  , Q,  ,  ,  , 
 ,  ,  ,  ,  ,  ,  , Q, 
 ,  ,  ,  ,  , Q,  ,  , 
 ,  , Q,  ,  ,  ,  ,  , 
 ,  ,  ,  ,  ,  , Q,  , 
 , Q,  ,  ,  ,  ,  ,  , 
 ,  ,  , Q,  ,  ,  , 
```

**编辑**

我对 进行了一些修改，`EightQueensSolver`通过使用列表而不是矩阵来提高效率，从而为较大的电路板尺寸稍微缩短了计算时间。

```
public class EightQueensSolver {

    final int[] queensPositions;

    public EightQueensSolver(int boardSize) {
        if(boardSize<4){
            throw new RuntimeException("Can not solve boards of size < 4");
        }
        queensPositions = new int[boardSize];
        Arrays.fill(queensPositions, -1);
    }

    boolean solve(){
        return solve(0);
    }

    boolean solve(int row){
        for(int col=0;col<queensPositions.length;col++){

            if(isSafe(row, col)){
                //place the queen for now in this spot
                queensPositions[row] = col;
                //if we have finished the board, done.
                if(row==queensPositions.length-1) return true;
                //otherwise keep placing queens on next rows
                if(solve(row+1)){
                    //if placing the next queen will make the board solved, OK
                    return true;
                }else{
                    //otherwise backtrack and try other move
                    queensPositions[row]=-1; 
                }
            }

        }
        return false;
    }

    boolean isSafe(int row,int col){
        //no need to test if on the same row, because we 
        //place a single queen on each row.
        //we only need to check if two queens are on 
        //same column or same diagonal
        for(int r=0;r<row;r++){
            int c = queensPositions[r];
            if(c==col || Math.abs(c-col)==Math.abs(r-row)) 
                return false;
        }
        return true;
    }

    void printBoard(){
        for(int row=0;row<queensPositions.length;row++){
            for(int col=0;col<queensPositions.length;col++){
                if(queensPositions[row]==col) System.out.print("Q,");
                else System.out.print(" ,");
            }
            System.out.println();
        }
    }

    int getQueenColumnPosition(int row){
        return queensPositions[row];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T13:58:28.400

我做了一个比已经给出和接受的答案更面向对象的实现。我并没有声称它更有效，但代码实际上非常干净且易于阅读。最重要的部分是 branch() 方法。但同样，它没有以任何方式进行优化，它是蛮力的，对象的创建等使它不是最好的实现。看看 branch() 方法，我认为这是一种非常干净的实现回溯的方法。

```
import java.util.ArrayList;
import java.util.List;

public class EightQueens {

    public static final int DIMENSION = 20;
    private Board board;

    public EightQueens() {
        board = new Board();
    }

    public void solve() {
        boolean result = branch(0);
        System.out.println(result);
        print();
    }

    private boolean branch(int level) {
        Queen queen = new Queen(level, 0);
        for (int y = 0; y < DIMENSION; y++) {
            queen.setY(y);
            if (board.add(queen)) { // true: adding succeeded. valid position
                if (board.getCount() == DIMENSION || branch(level + 1)) {
                    // cond1: we added the last queen at a valid position, so we're done here.
                    // cond2: not adding the last queen => check if there exists subsolution
                    return true;
                } else {
                    // branch with (level + 1) failed, so remove the queen and go further
                    board.remove(queen);
                }
            }
        }

        return false;
    }

    private void print() {

        for (int y = 0; y < DIMENSION; y++) {
            for (int x = 0; x < DIMENSION; x++) {
                System.out.print(board.queenOn(x, y) ? "x" : "-");
            }
            System.out.print("\n");
        }
    }

    public static void main(String[] args) {
        EightQueens queens = new EightQueens();
        queens.solve();
    }

    // helper objects: Board and Queen
    private class Board {

        private final List<Queen> queens;

        public Board() {
            queens = new ArrayList<Queen>();
        }

        public int getCount() {
            return queens.size();
        }

        public boolean add(Queen queen) {
            for (Queen q : queens) {
                // same row
                if (q.getX() == queen.getX())
                    return false;
                // same column
                if (q.getY() == queen.getY())
                    return false;
                // same diagonal
                if (Math.abs(q.getY() - queen.getY()) == Math.abs(q.getX() - queen.getX()))
                    return false;
            }
            queens.add(queen);
            return true;
        }

        public boolean queenOn(int x, int y) {
            for (Queen queen : queens) {
                if (queen.x == x && queen.y == y) {
                    return true;
                }
            }
            return false;
        }

        public void remove(Queen queen) {
            queens.remove(queen);
        }
    }

    private class Queen {
        private int x, y;

        public Queen(int x, int y) {
            this.x = x;
            this.y = y;
        }

        public int getX() {
            return x;
        }

        public int getY() {
            return y;
        }

        public void setX(int x) {
            this.x = x;
        }

        public void setY(int y) {
            this.y = y;
        }
    }
} 
```

备注 #1：在 DIMENSION 等于 2 或 3 的情况下运行此程序将打印“false”，以及给定尺寸的空板。正确的行为，因为这些维度不存在解决方案。

备注#2：这个程序只找到第一个解决方案，而不是继续寻找更多的解决方案。但这当然不是这个答案的重点。

# java - 在 main() 中访问 jTextArea

> ID：12667611
> 
> 赞同：1
> 
> 时间：2012-10-01T04:43:00.577
> 
> 标签：java, swing

我正在尝试访问 main() 中的 jTextArea，但收到一条错误消息，指出`"Non-static members cannot be accessed in static context"`. 因此我通过以下方式访问：（使用netbeans）

```
public static void main(String args[]) throws Exception {
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
           new UserInterface().setVisible(true);
        }
    });

    sample ss=new sample();
    System.out.println("Inside Main()");
    ss.display("Happy");
}

class sample 
{
    void display(String message)
    {

        UserInterface ui=new UserInterface();
        System.out.println("inside sample:"+message);
        ui.jTextArea2.append(message);
        String aa=ui.jTextArea2.getText();
        System.out.println("Content of JTextArea2:"+aa);
    }
} 
```

我已将变量声明为：`public javax.swing.JTextArea jTextArea2;`

我得到以下输出：

Main() 内部

内样：Happy

JTextArea2 的内容：Happy

但问题是：该消息未显示在 GUI 的 jTextArea2 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T05:02:33.020

您已经创建了两个不同的引用`UserInterface`...

```
java.awt.EventQueue.invokeLater(new Runnable() {
    public void run() {
       // Here's one...
       new UserInterface().setVisible(true);
    }
});

//...

void display(String message)
{
    // And here's another
    UserInterface ui=new UserInterface(); 
```

现在这两个引用彼此无关，对其中一个的任何修改都不会影响另一个。

如果你没有这样的事情：

```
public static void main(String args[]) throws Exception {
    java.awt.EventQueue.invokeLater(new Runnable() {
        public void run() {
            UserInterface ui = new UserInterface();
            ui.jTextArea2.append(message);
            ui.setVisible(true)
        }
    });
} 
```

你应该会发现它有效。

**更新**

一直在加载类，`public static void main(String[] agrs)`否则很难完成任何事情；）

```
public class UserInterface extends javax.swing.JFrame { 
    public static void main(String args[]) throws Exception {
        java.awt.EventQueue.invokeLater(new Runnable() { 
            public void run() {
                UserInterface ui = new UserInterface();
                // Happy interactions :D
            } 
        }); 
    }
} 
```

# google-app-engine - Go appengine 示例抛出异常

> ID：12667613
> 
> 赞同：1
> 
> 时间：2012-10-01T04:43:18.220
> 
> 标签：google-app-engine, go

我无法使用 app-engine 包附带的 go 示例。

根据文档，我应该能够运行：

```
cd google_appengine
dev_appserver.py helloworld 
```

一切似乎都可以正常启动，如下面的终端输出所示：

```
WARNING  2012-10-01 04:32:09,023 rdbms_mysqldb.py:74] The rdbms API is not available     because the MySQLdb library could not be loaded.
INFO     2012-10-01 04:32:09,077 appcfg.py:585] Checking for updates to the SDK.
INFO     2012-10-01 04:32:09,728 appcfg.py:603] The SDK is up to date.
INFO     2012-10-01 04:32:09,746 dev_appserver_multiprocess.py:655] Running application dev~helloworld on port 8080: http://localhost:8080
INFO     2012-10-01 04:32:09,746 dev_appserver_multiprocess.py:657] Admin console is available at: http://localhost:8080/_ah/admin 
```

但是当我尝试查看在 localhost:8080 上提供的页面时，我得到：

```
<type 'exceptions.Exception'>: ('no .go files in %s', '/home/chris/.google_appengine/demos/helloworld') 
  args = ('no .go files in %s', '/home/chris/.google_appengine/demos/helloworld') 
  message = '' 
```

这是正确的，在 demos/helloworld 中没有 go 文件，而是在 demos/helloworld/helloworld 中（这是他们的文件夹结构，不是我的）。我尝试将文件移动到父文件夹，但这不起作用。

这是 go (1.0.3) 和 appengine 的全新安装。

顺便说一句，演示文件夹中的所有示例都会发生这种情况。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T17:42:26.643

你试过这个吗？

```
cd google_appengine
./dev_appserver.py demos/helloworld 
```

# cygwin - mkfifo 导致终端挂起？

> ID：12667621
> 
> 赞同：2
> 
> 时间：2012-10-01T04:44:49.837
> 
> 标签：cygwin, mkfifo

`mkfifo`根本不适用于 Cygwin ？一组简单的命令，例如

```
$ mkfifo my_pipe

$ echo "1234" > my_pipe 
```

只是使终端永远坐着，光标闪烁。我“做错了”吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T04:46:56.043

*不，你对这两个*命令都没有做错，只是你的期望有点偏离。

您缺少的是在该管道的*另一端*读取该数据的东西。这种明显的挂起也发生在 Linux 中，所以这不是 CygWin 问题（或任何类型的问题，真的）。

只需打开另一个窗口并输入：

```
cat <my_pipe 
```

你会看到数据出现，然后是原始`echo`完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T04:48:43.877

命名管道的问题是你需要在两端都有一些东西。如果管道尚未完成，您将无法写入管道，因此该`echo`命令将挂起，直到其他内容尝试从该管道读取，在您的情况下，这永远不会发生。

# oracle-apex - 如何在 Oracle ApEx 中禁用 1 到 N 个选项卡？

> ID：12667625
> 
> 赞同：0
> 
> 时间：2012-10-01T04:45:23.500
> 
> 标签：oracle-apex

我正在使用 Oracle ApEx 4.1.1。我目前有 6 个选项卡，即 Tab1、Tab2 等。

当用户第一次登陆我的应用程序的起始页时，即本例中的 Tab1，所有其他 Tabs、Tab2、Tab3 等也会呈现给用户。

目前，用户可以单击这些选项卡中的任何一个，但不会向用户显示任何数据，因为驾驶屏幕实际上来自 Tab1。因此，基本上，当用户单击 Tab1 上的链接时，与该 ID 相关的所有信息都会检索所有其他选项卡的所有信息。所以一切都在 Tab1 的上下文中。

现在在 ApEx 中，是否有一种方法可以禁用实际选项卡（从选项卡集中），这将阻止用户单击这些选项卡，直到从 Tab1 实际选择一条记录，然后从 Tab2 启用剩余选项卡到 Tab6？

此外，当用户再次登陆 Tab1 时，我想清除从 Tab2 到 Tab6 的所有数据并再次禁用这些选项卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:14:21.793

我实际上只是调整选项卡上的显示条件。使用应用程序项或使用您在第 2-6 页中引用的第 1 页中的页面项。当您单击此类链接时，必须提交第 1 页，因此将呈现选项卡。
至于清除，您可以设置一个前标头计算以始终将项目设置为 NULL。

好的，所以上面可能是最快和最省事的，但是从您下面的评论中，我更好地理解了您的问题。

主题 21 的示例标记

```
<ul id="tabs">
  <li class="first-non-current">
    <a href="javascript:apex.submit('T_TAB_1');" class="tab_link"><span></span>Tab 1</a>
  </li>
  <li class="non-current">
    <a href="javascript:apex.submit('T_TAB_2');" class="tab_link"><span></span>Tab 2</a>
  </li>
  <li class="current">
    <a href="javascript:apex.submit('T_TAB_3');" class="tab_link"><span></span>Tab 3</a>
  </li>
  <li class="non-current">
    <a href="javascript:apex.submit('T_TAB_4');" class="tab_link"><span></span>Tab 4</a>
  </li>
  <li class="last"><span></span></li>
</ul> 
```

因此，当您在第 1 页（即选项卡 1）上时，您可以根据 LI 元素的类来更改选项卡 2 和选项卡 3 的外观和行为方式。使用 javascript 禁用非当前选项卡上的 a-tags 的默认行为，并使用 css 更改外观和感觉（我不打算在这里提出：太多，并且非常特定于一个主题。间谍通过 firebug 的 css，或者查看 images 文件夹中的主题 css！）

# vba - 如果语句 VBA 访问 2010

> ID：12667632
> 
> 赞同：3
> 
> 时间：2012-10-01T04:46:11.817
> 
> 标签：vba, if-statement, ms-access-2010

当使用一个

```
If Then
'Do Something
Else If
'Do Something
End If 
```

如果第一个和第二个条件为真，它会只执行第一个还是两者都执行？

出于某种原因，当我有此代码时：

```
Dim Report As String

If (DateRange_Pro_TotalCount > 0) Then

        Dim DateRange_Pro_ReportStr As String

        DateRange_Pro_ReportStr = "Total Referrals: " & DateRange_Pro_TotalCount & vbNewLine _

        Report = Report & DateRange_Pro_ReportStr

    ElseIf (DateRange_InPro_TotalCount > 0) Then

        Dim DateRange_InPro_ReportStr As String

        DateRange_InPro_ReportStr = "Total Referrals: " & DateRange_InPro_TotalCount & vbNewLine _

        Report = Report & DateRange_InPro_ReportStr

End If

'next statement prints report variable to textBox 
```

即使两个条件都为真，该语句也只执行第一个条件。我将“Else If”更改为“End If”和“If”（两个不同的条件语句，而不是一个具有两个条件的语句）并且它起作用了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T04:47:36.300

是的，你是对的，它只会执行第一个块

来自[IF-THEN-ELSE 语句 (VBA)](http://www.techonthenet.com/excel/formulas/if_then.php)

```
If condition_1 Then
    result_1

 ElseIf condition_2 Then
   result_2
 ...
 ElseIf condition_n Then
    result_n

 Else
   result_else

 End If 
```

> condition_1 到 condition_n 按列出的顺序进行评估。**一旦发现条件为真，IF-THEN-ELSE 语句将执行相应的代码并且不再评估条件。**
> 
> result_1 到 result_n 是在发现条件为真时执行的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T04:48:20.410

`If...ElseIf...EndIf`完全按照它在英语中的建议：

*   `If`第一个条件为真，执行第一个块。
*   `Else`，`if`第二个条件为真，执行第二个块。

在您的情况下，您需要两个单独的 if 语句；无论其他条件的结果如何，它们都将被独立评估。

# nhibernate - 如何使用 Fluent NHibernate 创建一个不累积更新的 NHibernate 只读会话？

> ID：12667634
> 
> 赞同：0
> 
> 时间：2012-10-01T04:46:35.263
> 
> 标签：nhibernate, configuration, readonly

应该使用哪些配置选项来构建不会累积更新并始终保持只读状态的会话？

似乎将第一级或第二级缓存替换为只读版本可能是答案，如何使用流利的配置来实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T15:18:46.853

了解[如何在 nHiberate 中创建只读会话？](https://stackoverflow.com/questions/768191/how-to-create-a-readonly-session-in-nhiberate)

或者，您可以将默认的 Save/Update/Delete 事件侦听器替换为您自己的不执行任何操作的实现

为此，在您的 NHibernate 配置中，您需要执行以下操作：

```
Fluently.Configure()
    // your config goes here
    .ExposeConfiguration(
        x => x.EventListeners.SaveOrUpdateEventListeners = 
           new ISaveOrUpdateEventListener[ ]{new NoOpEventListener() } ;
    // etc for other types 
```

# objective-c - 内存泄漏和僵尸有什么区别？

> ID：12667636
> 
> 赞同：16
> 
> 时间：2012-10-01T04:46:47.527
> 
> 标签：objective-c, xcode, memory-leaks, automatic-ref-counting

我正在做一个基于 ARC 的项目。我从未从事过基于非 ARC 的项目。最近我

在我启用 ARC 的项目中遇到了一个僵尸。据我所知，不会有记忆

ARC 中的泄漏，因为对象将被自动释放。但我遇到了一个僵尸

说“消息传递给解除分配的实例”。我的困惑是内存泄漏等价物

给僵尸。如果是这种情况，那么 ARC 中也会发生内存泄漏吗？有什么帮助吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-01T04:53:34.400

Objective-C 用语中的“僵尸”与泄漏相反。泄漏是您不再有任何引用的已分配内存，因此您无法释放它。僵尸是一个*已*被释放的对象，但对它的引用仍然存在，并且消息仍在发送给它（这可能导致各种不可预知的行为）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T04:54:04.760

有几种可能性，如果不看代码就很难知道发生了什么。“传递给已释放实例的消息”错误意味着您有一个指向对象所在位置的指针，但此后已被释放。这可以并且仍然会发生在 ARC 中。这可能是因为你有一些非 ARC 代码（或者可能是 Core Foundation 的东西）与 ARC 代码交互，而事情在交接时出现了问题。这也可能发生，因为虽然 ARC 几乎每次都选择正确的时间点来释放对象，但它并不完美（通常有一些方法可以解决这些实例）。

# sql - 复杂的表关系

> ID：12667643
> 
> 赞同：2
> 
> 时间：2012-10-01T04:47:41.673
> 
> 标签：sql, database, relationship

有 3 个主要实体：用户、产品和产品列表。用户可以将产品标记为收藏。**产品列表中只能**设置喜欢的产品。

**示例 1：**我将牛奶和面包标记为最喜欢的。并将标记的牛奶添加到“给儿子”列表中。此外，用户可以在添加最喜欢的产品之前创建空产品列表。

**示例 2：**我创建列表“for sun”，将牛奶和面包标记为收藏夹，并将标记的牛奶添加到列表“for sun”。

喜欢的产品可以在没有产品列表的情况下存在。产品列表可以在没有最喜欢的产品的情况下存在。相同的产品可以设置在不同的列表中。

**主要问题：**产品列表必须与用户链接。如果它有喜欢的产品，可以通过它们链接。但是如果他没有产品，则必须直接链接到用户。 ![数据库的架构](../Images/d1e3c7b091baebcaa1156663aa150fe3.png)

可能的解决方案：创建 4 个表：用户、产品、产品列表和连接表产品列表 - 产品。在每个用户的产品列表中创建列表“最喜欢的”。但这也违反了规范化规则，因为每当将此产品添加到另一个列表时，我都需要重复添加产品以列出“收藏夹”。 ![在此处输入图像描述](../Images/7e69b5823658df9c796f9828be797aa6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T05:02:49.153

如果一个产品既在`ProductLists`命名的“收藏夹”中，又在其他一些中`ProductLists`，那么在 中需要有两个条目`ProductListsProducts`。这不违反规范化。您有两个`ProductsLists`和两个多对多关系存储在`ProductsListsProducts`. 我认为该建模没有问题。

如果每个用户都有一个（可能是空的）“最喜欢的”产品列表，您希望将其视为与其他产品不同的概念`ProductsLists`，那么只需制作表格：

`Users`, `ProductsLists`, `ProductsListsProducts`, `Products`, 和另外一个`UsersFavoriteProducts`.

`UsersFavoriteProducts`将包含 a`user_id`和 a `product_id`，并与典型的 . 分开处理`ProductsLists`。 `ProductsListsProducts`不会包含“最喜欢的”产品的关系；“收藏夹”关系只会存储在`UsersFavoriteProducts`.

# ios - UIScrollView 在 setContentSize 之后滚动

> ID：12667644
> 
> 赞同：0
> 
> 时间：2012-10-01T04:48:02.990
> 
> 标签：ios, uiscrollview

所以我想在 UIView(320,470) 中创建一些比 Viewport (320, 367) 高的细节内容。

我在 IB 中创建它，就像（见图）。在我 setContentSize 使 UIScrollView 可滚动之前，一切看起来都很好。

这是我放置的代码`ViewDidLoad`

```
CGRect frame = self.uiContent.frame;
[self.uiScrollView addSubview:self.uiContent];
[self.uiScrollView setContentSize:frame.size]; 
```

调用 setContentSize 后，内容会随着动画滚动到中间。如何防止自动滚动？

![在此处输入图像描述](../Images/79b5498906bce6b0732d774c4ab692a5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T04:47:59.473

我找到了罪魁祸首..它是`UITextView`。对不起，如果我没有提到我在地址标签下使用 UITextView 作为多行标签。

在其他问题上引用“Taketo Sano”：[https ://stackoverflow.com/a/5673026/453407](https://stackoverflow.com/a/5673026/453407)

> 我通过跟踪调用跟踪调查了自动滚动是如何完成的，并发现当在 UITextField 中键入一个字母时会调用一个内部 [UIFieldEditor scrollSelectionToVisible]。此方法似乎作用于 UITextField 的最近祖先的 UIScrollView。

`UIScrollView`更改文本`UITextView`时自动滚动到。`UITextView`所以我通过子类化`UIScrollview`和覆盖找到了解决方案

```
- (void)scrollRectToVisible:(CGRect)rect animated:(BOOL)animated { 
```

并且不返回任何内容以禁用自动滚动...如果您打算将来使用它，只需使用 bool 变量通过使用来启用/禁用它

```
- (void)scrollRectToVisible:(CGRect)rect animated:(BOOL)animated {
    if (!self.disableAutoScroll) {
        [super scrollRectToVisible:rect animated:animated];
    }
} 
```

因此您可以在通过代码更改 UITextView 之前禁用自动滚动并在之后启用它。

# .htaccess - 使用 mod_rewrite 检查文件是否存在

> ID：12667649
> 
> 赞同：1
> 
> 时间：2012-10-01T04:48:33.780
> 
> 标签：.htaccess, mod-rewrite

我想检查是否存在带有“jpg”扩展名的文件，否则检查“gif”是否存在，否则加载默认图像。全部使用 mod_rewrite，我阅读了很多示例，并且都是相同的。我想检查一个正则表达式 url。现在我的 httacces 是这个但没有找到：

```
RewriteEngine On
#RewriteBase /

# Do not do anything for already existing files and folders
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule .+ - [L]

# add .html file extension (if such file does exist)
# jpg
RewriteCond %{DOCUMENT_ROOT}/profileImgs/$1_50\.jpg$ -f
RewriteRule ^([0-9]+)/img/normal$ profileImgs/$1_50.jpg  [L]

# gif
RewriteCond %{DOCUMENT_ROOT}/profileImgs/$1_50\.gif$ -f
RewriteRule ^([0-9]+)/img/normal$ profileImgs/$1_50.gif  [L]

# default
RewriteRule ^([0-9]+)/img/normal$ profileImgs/noImg_50.gif  [L] 
```

我该如何解决这个问题？，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T05:34:28.193

尝试：

```
# add .html file extension (if such file does exist)
# jpg
RewriteCond %{REQUEST_URI} ^/([0-9]+)/img/normal$
RewriteCond %{DOCUMENT_ROOT}/profileImgs/%1_50\.jpg$ -f
RewriteRule ^([0-9]+)/img/normal$ profileImgs/$1_50.jpg  [L]

# gif
RewriteCond %{REQUEST_URI} ^/([0-9]+)/img/normal$
RewriteCond %{DOCUMENT_ROOT}/profileImgs/%1_50\.gif$ -f
RewriteRule ^([0-9]+)/img/normal$ profileImgs/$1_50.gif  [L]

# default
RewriteRule ^([0-9]+)/img/normal$ profileImgs/noImg_50.gif  [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T04:38:23.083

我用我朋友的解决方案解决了这个问题，2 htaccess。在我的主要htacces中：

```
RewriteRule ^([0-9]+)/normal profileImgs/$1/small [L,NS]
#RewriteRule ^([0-9]+)/normal profileImgs/$1/otherSize [L,NS] 
```

在第二个（profileImgs 内部）中：

```
# JPG
RewriteCond %{REQUEST_FILENAME}_small.jpg -f
RewriteRule ([0-9]+)/normal $1_small.jpg [NS,L]

# GIF
RewriteCond %{REQUEST_FILENAME}_small.gif -f
RewriteRule ([0-9]+)/normal $1_small.gif [NS,L]

# ANY
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ([0-9]+)/normal noImg_small.jpg

# JPG
#RewriteCond %{REQUEST_FILENAME}_otherSize.jpg -f
#RewriteRule ([0-9]+)/normal $1_otherSize.jpg [NS,L]

# GIF
#RewriteCond %{REQUEST_FILENAME}_otherSize.gif -f
#RewriteRule ([0-9]+)/normal $1_otherSize.gif [NS,L]

# ANY
#RewriteCond %{REQUEST_FILENAME} !-f
#RewriteRule ([0-9]+)/normal noImg_otherSize.jpg 
```

这让我可以放置其他尺寸......似乎很奇怪，因为使用 2 htaccess，我认为这可以做得更好，但这是我现在使用的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T04:52:29.277

尝试这个

```
RewriteCond %{DOCUMENT_ROOT}/profileImgs/$1_50\.jpg$ -f
RewriteRule ^profileImgs/[^/\.]+$ cache/gif$ [L,QSA]

RewriteRule ^profileImgs//([^/\.]+)$ profileImgs/.gif$ [L,QSA] 
```

# linux - 无法运行使用“mkbundle”命令构建的包

> ID：12667652
> 
> 赞同：1
> 
> 时间：2012-10-01T04:48:47.387
> 
> 标签：linux, mono

我可以使用该`mkbundle`命令构建一个捆绑包。之后，当我尝试在另一个未安装 Mono 的 Linux 系统中运行该应用程序时，该应用程序没有执行并且没有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:41:24.937

单独的 Mkbundle 将构建一个**仍然**依赖于单声道库的二进制文件。

如果您希望能够“将您的应用程序放在任何最近的 Linux 机器上并启动它”，您应该使用**mkbundle --static进行静态构建**

# java - 为 URLConnection.getInputStream() 转义 URL 的正确方法是什么？

> ID：12667656
> 
> 赞同：-1
> 
> 时间：2012-10-01T04:49:53.513
> 
> 标签：java, android, urlconnection

当我在 URI 的查询字符串部分有一个空格 (' ') 时，我在使用 URLConnection.getInputStream() 时遇到了一个非常奇怪的问题。具体来说，当我认为它们都应该失败或都成功时，我有一个有效的 URL 和另一个无效的 URL，此外，它每次都有效。

工作 URL：[http](http://minneapolis.craigslist.ca/search/sss?catAbb=sss&query=iPhone+sprint&sort=date&srchType=A&format=rss) ://minneapolis.craigslist.ca/search/sss?catAbb=sss&query=iPhone+sprint&sort=date&srchType=A&format=rss 失败的 URL（以下例外）：[http ://winnipeg.craigslist.ca/search/sss ?catAbb=sss&query=iPhone+sprint&sort=date&srchType=A&format=rss](http://winnipeg.craigslist.ca/search/sss?catAbb=sss&query=iPhone+sprint&sort=date&srchType=A&format=rss)

conn.getInputStream() 抛出 IO 异常：“索引 67 处查询中的非法字符：[http](http://winnipeg.en.craigslist.ca/search/sss?catAbb=sss&query=iPhone) ://winnipeg.en.craigslist.ca/search/sss?catAbb=sss&query=iPhone sprint two&sort=date&srchType=A&format=rss”

看来 openConnection 无法获得空间（我已经用 '+' 替换了它，因为我希望用 'URL' 替换它，我也尝试了 '%20' 得到相同的结果。

此外，URL.toString() 报告我上面打印的 URL，“+”不是空格。

代码如下，searchUrl 是一个 'URL' 实例。

```
 URLConnection conn = null;
        conn = searchUrl.openConnection();
        conn.setConnectTimeout(CONNECT_TIMEOUT);
        conn.setUseCaches(true);
        conn.setAllowUserInteraction(false);

        ByteArrayOutputStream oStream = new ByteArrayOutputStream();
        InputStream istream = conn.getInputStream();
        int numBytesRead, numBytesWritten = 0;
        byte[] buffer = new byte[8 * 1024];
        while ((numBytesRead = istream.read(buffer, 0, 8 * 1024)) > 0) {
            oStream.write(buffer, numBytesWritten, numBytesRead);
            numBytesWritten += numBytesRead;
        } 
```

关于在哪里处理这个问题的任何想法？我即将推销 URLConnection 并走另一条路线......

谢谢肯尼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:51:18.537

您的问题有问题（请参阅我的评论）。

但是，这里的根本问题是，在查询部分带有空格字符的 URL 不是合法的 URL……尽管典型的 Web 浏览器会接受它。因此例外是正确的。

您的示例 URL 似乎显示该空间是用“+”转义的。这是 HTML 表单转义而不是正确的 URL 转义。你似乎是说你得到相同的结果是你使用`%20`......这将是正确的转义。

因此，我的理论是，您实际上是通过删除转义的路由将此 URL 传递给您的代码......尽管您的跟踪记录似乎告诉您什么。（如果我能看到一个 SSCE，我们就可以测试这个理论......）

* * *

FWIW，通过调用 UrlEncoder.encode 来解决问题，正如其他一些答案所暗示的那样，这是一个坏主意。问题是它可能会“编码”其他不应编码的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T08:39:52.627

URL 本身最好用 new URI(null, url, null).toASCIIString() 编码。

查询字符串中的每个键和值都可以使用 URLEncoder.encode() 单独编码。根据[RFC 2936](http://www.ietf.org/rfc/rfc2396.txt)，这是不正确的，整个事情应该被编码为 URL 本身，但我从未见过它失败。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-01T05:41:35.873

```
String url= URLEncoder.encode("your URL without http or your query string part here");
URL searchUrl = new URL("http://" + url);
URLConnection conn = null;
conn = searchUrl.openConnection(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-01T05:11:16.427

你试过了吗`URLEncoder.encode(string, "UTF-8")`

以下是示例：

代替

```
String url = "http://somesite.com/page?user=" + user; 
```

和

```
String url = "http://somesite.com/page?user="
+ URLEncoder.encode(user, "UTF-8"); 
```

# c - 想加入阵列，但他们不这样做

> ID：12667661
> 
> 赞同：-1
> 
> 时间：2012-10-01T04:50:47.230
> 
> 标签：c, arrays

嗨我试图加入一个未定义大小的新数组中的整数数组（取决于前两个数组。但是当我运行代码时，它似乎停留在一个无限循环中。我做错了什么？Ps。数组应该在遇到-1 Ds时结束。

```
int
main (void) {
   void join(int arr1[], int arr2[]);
   int vectorA[11] = {8, 17, 29, 32, 33, 33, 77, 81, 90, 94, -1};
   int vectorB[11] = {8, 17, 29, 44, 33, 33, 77, 81, 90, 94, -1};

   join(vectorA, vectorB);
return 0;
}

void join(int arr1[], int arr2[])
{
   int count=0, counter=0;
   int i=0, j=0;
   while(arr1[i]>-1)
      count++;
   while(arr2[j]>-1)
      count++;
   int tot[count];
   for(i=0, j=0; ((arr1[i]>-1) || (arr2[j]>-1)); )
   {
       if(arr2[j]<0) {
       tot[counter++]=arr1[i++];
   }
   else if(arr1[i]<0) {
       tot[counter++]=arr2[j++];
   }
   else {
       tot[counter++]=arr2[j++];
       tot[counter++]=arr1[i++];
   }
}

printf("the doubled array is : \n");
for(int i=0; i<count; i++)
{
   printf("%d, ", tot[i]);
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T04:51:58.017

> ```
> while(arr1[i]>-1)
>       count++; 
> ```

这永远不会结束，因为`i`不会改变。也许你的意思是`arr[i++]`？

# marmalade - 果酱应用程序部署到剧本错误

> ID：12667662
> 
> 赞同：0
> 
> 时间：2012-10-01T04:50:52.153
> 
> 标签：marmalade, playbook

我正在使用 Marmalade System Deployment Tool 将应用程序（打包并安装）到我的剧本。它打包正确，但是当它进行部署时，我收到此错误（错误：运行 blackberry-deploy 时出错），这是日志错误。

* * *

成功：仅评估使用写入 'c:\Users\George\Documents\Marmalade\build_helloworld_vc10\deployments\default\playbook\release' 的包 [耗时 3.05 秒]。此软件包未经许可用于商业用途 --> 从以下位置部署到设备：deployments\default\playbook\release [execute] blackberry-deploy.bat ERROR: error running blackberry-deploy ***ERROR***

* * *

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:11:20.870

尝试编译一个包但不要安装，使用这个程序安装应用程序，轻而易举。

[http://hatax.home.comcast.net/~hatax/bb/Playbook_Tools.zip](http://hatax.home.comcast.net/~hatax/bb/Playbook_Tools.zip)

它与我的下载不同，因为我无法在此论坛中发布数字域（IP）。我几乎疯狂地试图解决这个问题。我希望它也能解决你的问题。

哈维。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T10:45:08.100

您没有果酱的标准许可证。您需要购买标准、靛蓝或基本许可证（我希望名称是正确的）。

您目前正在使用他们的 90 天免费评估许可证，该许可证不支持在设备上部署（他们为什么要支持，如果它是免费的）。

# c++ - QStringList.indexOf() 没有返回正确的值

> ID：12667664
> 
> 赞同：1
> 
> 时间：2012-10-01T04:51:13.563
> 
> 标签：c++, qt

我在一个文件中有一行是这样的：

```
DEF PatientLoadView Group { 
```

我正在尝试解析文件以获取上一行中单词“DEF”之后的单词。我正在尝试使用 string.split() 找到分割线，然后使用 QStringList 类的 indexOf 函数找到“DEF”的索引，然后获取它旁边的单词。但是 indexOf 函数为此行返回 -1。对于其他这样的行，它返回正确的值。可能是什么问题呢？我的代码如下：

```
QString line = in.readLine();
if(line.contains("DEF"))
{
    QStringList lineSplit = line.split(" ");
    int index = lineSplit.indexOf("DEF",0);
    QString nodeName = lineSplit[index+1]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:09:00.103

确保 . 中的`DEF`字符之前没有任何内容`line`。

特别要确保没有“\n”或其他控制字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T04:08:43.913

我找到了问题的原因 - 该行以制表符 '\t' 开头，这是我读入的字符串的一部分。删除此制表符对我来说效果很好，我现在能够得到正确的结果。

感谢您的帮助。

# php - 在Windows webmatrix2服务器的html页面中嵌入php

> ID：12667677
> 
> 赞同：1
> 
> 时间：2012-10-01T04:53:21.773
> 
> 标签：php, html, .htaccess, web-config

我正在尝试在我的 godaddy linux 托管网站上的 html 页面中嵌入 php 代码。我知道如何通过编辑我的 .htaccess 文件来指导我如何在 Godaddy 上执行此操作。

我的问题是我想**在windows webmatrix2下本地开发。**

在运行 iis 或 webmatrix 作为服务器的 windows 服务器下需要做什么？我的 godaddy 帐户托管在 linux 下，但我使用 webmatrix 在 windows 下开发。

我发现不起作用的解决方案。

1）根据一个来源将这些行添加到**applicationhost.config**文件

```
<add name="PHP53_via_FastCGI_html" path="*.html" 
   verb="GET,HEAD,POST" modules="FastCgiModule" 
   scriptProcessor="C:\Program Files (x86)\iis express\PHP\v5.3\php-cgi.exe"
   resourceType="Either" /> 
```

在 iisexpress 目录下。他们使我的整个本地站点崩溃。

2) 在 Webmatrix 中，在站点的**web.config**文件中添加此重写规则。

```
<system.webServer>
  <rewrite>
    <rules>
        <rule name="REWRITE_TO_PHP">
        <match url=".html" />
        <conditions logicalGrouping="MatchAll" />

        <action type="Rewrite" url=".php" />
            </rule>
    </rules>
</rewrite>
... more code 
```

**3) 或者在web.config**中试试这个

 **```
<rewrite>
    <rules>

        <rule name="REWRITE_TO_PHP">
        <match url="*.html" />
        <conditions logicalGrouping="MatchAll" />
        <action type="Rewrite" url="{"*.Php"} />

    </rule>
</rewrite> 
```

**4) 或者在web.config**中试试这个

 **```
<handlers>
<add name="html via php cgi" path="*.html" verb="*" modules="FastCgiModule" 
scriptProcessor="C:\Program Files\Php\php-cgi.exe" 
resourceType="Unspecified" />
</handlers> 
```

以上都不适合我。我知道以上所有这些都是很多信息。这是我在冗长的网络搜索中所能找到的。根据经验，我不是系统编码员。我只需要一些可以让我开始在 Windows 上用 html 编写 php 的东西。关键的突破将是如果我开始看到我的 php 以关键字颜色显示并让 webtrix intellisense 工作！**智能感知很棒！** 谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-08T21:52:49.997

在您的 web.config 文件中，您应该有

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<system.webServer>
    <handlers>
        <add name="PHP_via_FastCG1" path="*.htm" verb="*" modules="FastCgiModule" scriptProcessor="C:\PHP5.5\php-cgi.exe" resourceType="Either" />
        <add name="PHP_via_FastCG2" path="*.html" verb="*" modules="FastCgiModule" scriptProcessor="C:\PHP5.5\php-cgi.exe" resourceType="Either" />
    </handlers>
</system.webServer>
</configuration> 
```

其中 scriptProcessor="C:\PHP5.5\php-cgi.exe" 取决于您的 php 在系统上实际存储的位置。您可以使用 phpinfo() 来提示您的系统可能在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T06:30:55.880

我有同样的问题。

**解决方法：**在你的网站根目录下创建一个*web.config文件，代码如下：*

```
<configuration>
    <system.webServer>
    <rewrite>
        <rules>
            <rule name="GeneralRewrite" stopProcessing="true">
                <match url="^(.*).html$" ignoreCase="true" />
                <conditions>
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
                </conditions>
                <action type="Rewrite" url="{tolower:{R:1}}.php" />
            </rule>
        </rules>
    </rewrite>
    </system.webServer>
</configuration> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-12T22:38:11.140

好的，我认为您想要做的仅适用于 apache 而不是 webmatrix。有关更多信息，请阅读：[.html 文件中的 Php 标记在 WebMatrix 中不起作用](https://stackoverflow.com/questions/14029824/php-tags-in-html-files-dont-work-in-webmatrix)****

# iphone - UITabBarController、UINavigationController 和子 UIViewController 中的不同边界

> ID：12667684
> 
> 赞同：1
> 
> 时间：2012-10-01T04:54:03.753
> 
> 标签：iphone, ios, uiviewcontroller, uinavigationcontroller, uitabbarcontroller

我一直在查看有关边界与框架的一些帖子，但仍然有些困惑。

我有以下层次结构： UITabBarController > UINavigationController > UIViewController

当我尝试以下 NSLog

```
NSLog(@"%f %f %f",[[[self tabBarController] view] bounds].size.height, [[[self navigationController] view] bounds].size.height, [[self view] bounds].size.height); 
```

我得到以下输出：

```
480.000000 431.000000 460.000000 
```

我了解状态栏高度的 20 个差异原因，但我不明白为什么 UIViewController 的界限不包括状态栏高度，但 UINavigationController 和 UITabBarController 的界限包括...

**完善我的问题**

1）为什么顶部tabBarController的高度是480.0（为什么不排除状态栏高度20pt？？？）。好的，让我假设高度永远不会排除状态栏高度并继续前进

2) UINavigationController 的高度为 431.0（好吧，合理的猜测是它是 480-49，其中 49 是标签栏的高度）。但是为什么它选择性地排除标签栏的高度而不是状态栏的高度？？？Apple 的 View Programming Guide 似乎没有解释这一点……但让我们继续……

3) 为什么我的 UIViewController 的高度是 460？！

(3a) 为什么它不像UITabBarController和UINavigationController那样排除状态栏的20pt高度？？？

(3b) 更重要的是，为什么它不排除导航栏的高度（即为什么不应该是 431-44 = 387？！）

(3c) 为什么在我的 UINavigationController**内部的 UIViewController 的****高度**比 UINavigationController 长？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T02:43:05.930

有点想通了...我将 NSLog 放在 viewDidLoad 中，如果我将它们移动到 viewDidAppear，UIViewController 的高度正如预期的那样是 367 (=480-20-44-49)，它的原点是 (0, 64) ，占状态栏的20pt和导航栏的44pt

对于 UINavigationController，即使它的 origin.y 为 0 并且高度为 480.0，当我直接打印其导航栏的框架时，导航栏的 origin.y 为 20，所以基本上 UINavigationController 的框架仍在全屏但顶部 20pt（状态栏所在的位置）为空

# facebook-graph-api - 跟踪许多 facebook 页面的 facebook 喜欢计数

> ID：12667686
> 
> 赞同：0
> 
> 时间：2012-10-01T04:54:20.887
> 
> 标签：facebook-graph-api, facebook-like, google-docs

场景：我希望跟踪 100 到 1,000 个 Facebook 页面的“点赞数”。目前我有一个谷歌电子表格，它使用[这篇文章](http://facebook.stackoverflow.com/questions/10759917/tracking-competitors-facebook-likes)提到的图形 api 进行设置。

如果可能的话，我希望将这个过程自动化一点。

这是我目前的步骤：

1.  找到fb业务页面地址[https://facebook.com/businessnamehere](https://facebook.com/businessnamehere)
2.  找到 fb 页面 id 并将其输入到工作表中
3.  粉丝数是为允许通过图形 api 访问的企业填充的

夫妻问题：

1.  **某些业务页面阻止访问基本信息，并给出以下错误：**

    `{ "error": { "message": "Unsupported get request.", "type": "GraphMethodException", "code": 100 } }`

    除了拉出实际的fb业务页面并查看“赞数”之外，还有其他方法可以拉出“赞数”吗？

2.  **工作表仅从页面 ID 中提取。**

    有什么方法可以只从 facebook url 中提取“like count”而不需要收集 fb 页面 id？

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:17:51.463

有些页面可能有地理限制或年龄限制，甚至被锁定仅对管理员可见，这可能是您的问题的根本原因（在[介绍](https://developers.facebook.com/docs/reference/api/page/)中说明）。

至于您的第二个问题，您可以使用“facebook.com/”之后列出的企业名称进行图形请求。例如，您可以在[facebook.com/ign](https://www.facebook.com/ign)上使用

```
$info = $facebook->api('/ign','GET'); 
$likes = $info['likes']; 
```

而不是使用页面 ID 作为

```
$info = $facebook->api('/59685491632','GET'); 
$likes = $info['likes']; 
```

其中 59685491632 是 IGN 的页面 ID。

# android - 随着android中位置的变化，如何在网格视图中更改图像？

> ID：12667692
> 
> 赞同：0
> 
> 时间：2012-10-01T04:54:51.927
> 
> 标签：android, image, gridview

我正在拆分图像并放置在网格视图中。在网格视图中单击两个图像时，我想交换它们的位置。我可以改变他们的位置，但形象没有改变。我使用位图数组来分割图像并将它们放置在网格视图中。那么如何通过单击两个图像来更改网格视图中的图像？我应该如何进行图像交换？谁能帮助我？

```
public class Imagepieces extends Activity {
            ArrayList<Bitmap> breakedimages,duplicate;
            GridView g;
            int i=0,temp,temp2,rpos;

            @Override

            protected void onCreate(Bundle savedInstanceState) {
                // TODO Auto-generated method stub
                super.onCreate(savedInstanceState);
                setContentView(R.layout.activity_image);
                breakedimages = getIntent().getParcelableArrayListExtra("breaked image");
                duplicate = new ArrayList<Bitmap>(breakedimages);
                Collections.shuffle(duplicate);
                g = (GridView) findViewById(R.id.gridView1);
                g.setAdapter(new CutAdapter(this, breakedimages));
                g.setNumColumns((int) Math.sqrt(breakedimages.size()));
                g.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                            long arg3) {                
                        // TODO Auto-generated method stub
                        //=================================================
                        {

                    }
                });
            }

            class CutAdapter extends BaseAdapter {
                int iwidth, iheight; 
                Context context;

                public CutAdapter(Imagepieces ipieces, ArrayList<Bitmap> breakedimages) {
                    // TODO Auto-generated constructor stub
                    iwidth = breakedimages.get(0).getWidth();
                    iheight = breakedimages.get(0).getHeight();
                    context = ipieces;
                }

                @Override
                public int getCount() {
                    // TODO Auto-generated method stub
                    return duplicate.size();
                }

                @Override
                public Object getItem(int arg0) {
                    // TODO Auto-generated method stub
                    return duplicate.get(arg0);
                }

                @Override
                public long getItemId(int arg0) {
                    // TODO Auto-generated method stub
                    return arg0;
                }

                @Override
                public View getView(int arg0, View arg1, ViewGroup arg2) {
                    // TODO Auto-generated method stub
                    ImageView i=new ImageView(context);

                    i.setLayoutParams(new GridView.LayoutParams(iwidth +5,iheight +5));
                    i.setPadding(0, 0, 0, 0);
                    i.setImageBitmap(duplicate.get(arg0));

                    return i;
                }

            }
        } 
```

如何在网格视图中交换图像？当我在第一次单击时单击网格视图时，我必须获得位置，然后单击第二个位置。然后我在这两个位置的图像，并在更改所有图像之后，如果两者相等，我想与已分割的图像进行比较。然后我想在游戏结束时显示祝酒词。谁能帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:14:29.033

在`GridView`，当你想改变一个项目时，你所需要的只是改变`Adapter`你链接到的`GridView`。

例如，交换两个项目：（GridAdapter extends ArrayAdapter）

```
GridAdapter adapter = (GridAdapter)gridv.getAdapter();
String firstItem = adapter.getItem(firstPosition);
String secondItem = adapter.getItem(secondPosition);
adapter.remove(firstItem);
adapter.insert(firstItem, secondPosition);
adapter.remove(secondItem);
adapter.insert(secondItem, firstPosition); 
```

`Adapter`您还可以通过覆盖来更改自定义中的其他内容`getView()`。

# lua - 存储脚本

> ID：12667693
> 
> 赞同：-1
> 
> 时间：2012-10-01T04:55:01.570
> 
> 标签：lua

我正在我的 c++ 游戏引擎中实现 Lua 脚本引擎，我想知道存储和执行 Lua 脚本的最佳方式是什么。我有很多场景节点，每个节点都可以分配自己的脚本。为该特定脚本的每一帧调用**lauL_dofile(...)**是一个可行的选择，还是有更好的方法？例如，有没有办法存储已经解析的脚本？我在看**luaL_loadfile**和**lua_pcall**。我以为我会用第一个加载脚本，并在需要时用第二个调用它们，但是 lua_pcall 似乎没有唯一的 id 作为参数，那么我应该如何知道要执行哪个脚本呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:42:52.307

如果你打算使用 Lua API，你需要熟悉 Lua 堆栈。你可以学习做的最重要的事情之一就是理解如何阅读[Lua API 文档。](http://www.lua.org/manual/5.1/manual.html#lua_pcall)对于每个函数，右侧都有一个关于它如何影响堆栈的符号（如果它完全修改了堆栈）。

`luaL_loadfile`加载一个文件并将该文件作为 Lua 函数推送到堆栈上。`lua_pcall`在栈上执行一个函数。但它有一些关于它如何做事情的警告。

就堆栈而言，通过 Lua 调用函数的方式很简单。你推送你​​想要调用的函数。然后你按顺序从头到尾推送所有参数。然后你发出你对该函数的调用。`lua_pcall`以这种方式工作。这意味着要执行的函数的位置*总是* `nargs + 1`，相对于堆栈的顶部，其中`nargs`是您传递给函数的参数的数量。

请注意，这`lua_pcall`将从*堆栈中弹出函数*（连同所有参数）。如果你刚刚加载了文件，这将是Lua 中对该函数的*唯一引用。*因此，您将无法再次执行该文件。您应该在将其参数压入堆栈之前复制该函数，使用[`lua_pushvalue`to copy it](http://www.lua.org/manual/5.1/manual.html#lua_pushvalue)。您可能应该将它贴在`LUA_REGISTRYINDEX`桌子上或其他东西上，以便保留它的价值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T05:16:34.460

正如我所评论的，您通常`luaL_loadfile`在初始化时调用。加载的文件通常定义一些 [global] 名称（或填充一些全局表中的一些槽）作为 Lua 函数。[lua 5.2 文档](http://www.lua.org/manual/5.2/manual.html#4)`lua_call`给出了如何调用其中一个的示例（第 4 节） 。您将通过在 Lua 堆栈上推送适当的内容，在应用程序的适当位置执行此类调用（可能使用`lua_pcall`or ）。`lua_call`

# mysql - SQL 查询字段作为列

> ID：12667699
> 
> 赞同：4
> 
> 时间：2012-10-01T04:55:35.923
> 
> 标签：mysql, sql, select, pivot

我真的不知道该怎么说，但请检查下面的详细信息。

**学生**

```
|Student_ID|Student_Name|
|1         |Ryan        |
|2         |Camille     |
|3         |George      | 
```

**年级**

```
|Student_ID|Subject |Grade
|1         |Math    |5 
|1         |English |3 
|1         |History |1
|2         |Math    |3 
|2         |English |4 
|2         |History |1 
|3         |Math    |5 
|3         |English |1 
|3         |History |2 
```

有可能得到这个结果吗？

```
Student_Name|Math|English|History
Ryan        |5   |3      |1
Camille     |3   |4      |1
George      |5   |1      |2 
```

现在我一直在通过首先填充列名，然后是学生姓名，然后添加每个学生姓名的详细信息来填充未绑定的数据网格。这很耗时，我想更好地优化查询。

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-01T04:58:39.040

尝试，

```
SELECT  a.Student_name,
        MAX(CASE WHEN subject = 'MATH' THEN grade ELSE NULL END) MathGrade,
        MAX(CASE WHEN subject = 'ENGLISH' THEN grade ELSE NULL END) EnglishGrade,
        MAX(CASE WHEN subject = 'History' THEN grade ELSE NULL END) HistoryGrade
FROM    Student a
        LEFT JOIN Grade b
            ON a.Student_ID = b.Student_ID
GROUP BY a.Student_name 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/ad713/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T14:25:55.367

如果您有已知数量的主题，@John 的答案将起作用，如果您有未知数量的主题，那么您可以使用准备好的语句来动态生成它。这是一篇好文章：

[动态数据透视表（将行转换为列）](http://buysql.com/mysql/14-how-to-automate-pivot-tables.html)

您的代码如下所示：

```
SET @sql = NULL;
SELECT
  GROUP_CONCAT(DISTINCT
    CONCAT(
      'MAX(case when Subject = ''',
      Subject,
      ''' then Grade end) AS ',
      Subject
    )
  ) INTO @sql
FROM grade;

SET @sql = CONCAT('SELECT s.Student_name, ', @sql, ' 
                   FROM student s
                   LEFT JOIN grade AS g 
                    ON s.student_id = g.student_id
                   GROUP BY s.Student_name');

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/879e0/4)

# c++ - 如果从其他线程访问（读/写） src 缓冲区，是否有机会从 memcpy 获得访问冲突

> ID：12667702
> 
> 赞同：0
> 
> 时间：2012-10-01T04:56:06.890
> 
> 标签：c++, c

我的应用程序出现访问冲突。

调用栈：

```
0da0ccfc 77c46fa3 ntdll!KiUserExceptionDispatcher+0xe 
0da0d004 4dfeee3a msvcrt!memcpy+0x33 
0da0d45c 4dfdbc4b MyLibrary!MyClass::MyFunc+0x8d [MyFile.cpp @ 574]

[MyFile.cpp @ 574 memcpy( m_pMyPointer, m_pSrcPointer, m_nDataSize); 
```

在这里我确定以下事情.. m_pMyPointer 是有效的，任何其他线程都不会读取或写入此内存。m_pMyPointer 的大小大于 m_nDataSize。m_pSrcPointer 可以从其他线程（读取或写入）访问，m_pSrcPointer 的大小小于 m_nDataSize 的可能性很小。

我的疑问是，如果任何其他线程尝试读取/写入 m_pSrcPointer，是否有任何可能从 memcpy（m_pMyPointer，m_pSrcPointer，m_nDataSize）获取访问冲突。由于 memcpy() 读取 m_pSrcPointer，而不是写入它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:50:18.630

如果并发线程仅更改缓冲区中的数据，则不应通过从缓冲区复制/向缓冲区复制来获取任何 AV。

如果并发线程更改指向缓冲区的指针或包含缓冲区大小（字节数或元素数）的变量，您可以使用这些指针和大小变量轻松地从缓冲区复制到/从缓冲区中获取 AV。在这里，您正在进入未定义行为的领域。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T05:30:26.770

我会排除这一点。根据定义，对内存区域的并发读取访问是线程安全的。当一个线程写入由另一个线程读取的内存位置时，您将失去线程安全性，因为结果是不可预测的，但您仍然不应该遇到访问冲突（在大多数健全的平台中，包括 x86）。

最有可能的是或指向的*有效*内存区域的大小小于。`m_pMyPointer``m_pSrcPointer``m_nDataSize`

但是，如果您怀疑不同线程同时读取和写入同一块内存，这意味着您至少错过了那里的锁定方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T09:05:54.083

可能性很小。如果对 m_srcPtr 的写入不是原子的，或者另一个线程正在写入其他成员之一而您没有告诉我们这件事（例如，m_nDataSize 听起来很可能）。

如果对 m_srcPtr 的写入不是原子的，则取决于您的体系结构，您可能会在两次写入指针之间临时有一个无效指针。如果 m_nDataSize 与 m_srcPtr “同时”更新，则您有很多机会发生坏事。

请注意，这是高度依赖于架构的。

# python - 有时间限制的原始输入

> ID：12667707
> 
> 赞同：1
> 
> 时间：2012-10-01T04:56:58.243
> 
> 标签：python, input

> **可能重复：**
> [raw_input 和 timeout](https://stackoverflow.com/questions/3471461/raw-input-and-timeout)

我想知道如何让我的 raw_input 有时间限制。

我想要 raw_input=("What do you want?") 之类的东西，然后如果在 5 秒内没有给出输入，它会打印“为时已晚”

我一直在努力阅读，但 raw_input 似乎没有这样的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:14:32.167

使用[计时器](http://docs.python.org/release/2.5.2/lib/timer-objects.html)对象，将其设置为所需的秒数；一旦事件对象被调用，只需使用 tje timer 函数来显示您想要的消息。

# c++ - Glew 运行时间/链接器错误

> ID：12667708
> 
> 赞同：1
> 
> 时间：2012-10-01T04:57:07.607
> 
> 标签：c++, visual-studio-2010, opengl, linker, glew

不知道为什么，但是每次我在家用计算机上运行 OpenGL 程序时，都会在运行时弹出一个消息框，指出“无法在动态链接库 glew32.dll 中找到过程入口点 glewInit”。现在我几乎可以肯定我正确安装了所有东西，我按照 glew 网页上的说明进行操作，我什至可以让程序在我的工作计算机上运行。我尝试在线搜索此错误的解决方案，但大多数出现此错误的人都有它，因为他们忘记在链接器依赖项中包含 dll 文件（这不是我的问题。）有没有人对如何纠正或规避有任何见解这个错误？我目前的操作系统是 Windows 7 专业版 (2009)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-03T23:10:57.070

万不得已的快速解决方案是在您的系统上查找与其他应用程序一起提供的其他 glew32.dll（您可以通过网络轻松找到此类应用程序）。

混合标头/库版本时会出现问题。它会编译，但是虽然旧版本声明`glewInit`为入口点，但较新的版本（肯定是 1.9）`_glewInit@0`在**发布**配置中声明。

将上一次编译输出与旧的调试 exe 混淆也会产生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T05:15:44.917

不知道问题出在哪里，但我重新下载了 glew，我想我可能丢失了一个头文件（不是 glew.h），这迫使它以一个不太有用的错误消息炸毁。

# java - Libgdx 表太小，未填满视口

> ID：12667709
> 
> 赞同：4
> 
> 时间：2012-10-01T04:57:10.927
> 
> 标签：java, libgdx

我正在尝试使用表格来创建带有排列好的按钮和标签的菜单。我正在使用 libgdx 的最新夜间版本，它改变了 Table API（以及其他内容）。

这是我的 Screen 构造函数中的代码：

```
this.mStage = new Stage();
this.mTable = new Table();
this.mTable.setFillParent(true);
this.mTable.debugTable();
this.mStage.addActor(this.mTable);

// now I add some stuff to the table
// ... 
```

我的`resize`功能如下所示：

```
this.mStage.setViewport(width, height, true);
this.mTable.setFillParent(true);
this.mTable.invalidate(); 
```

我的`render`功能有以下几点：

```
System.out.println("Table size is " + 
    this.mTable.getWidth() + " by " + 
    this.mTable.getHeight());
this.mStage.draw();
Table.drawDebug(); 
```

虽然我的控制台显示正确的大小：

```
Table size is 480.0 by 640.0 
```

表格大小在其子项周围收缩，并且未扩展到正确的 480x640 大小。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T05:43:01.483

为了他人的利益回答我自己的问题。我向表中添加小部件的方式不正确：

```
this.mTable.row();
this.mTable.add(button).fillX(); 
```

我需要调用以下`fillX()`方法`row()`：

```
this.mTable.row().fillX();
this.mTable.add(button); 
```

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-24T16:28:31.077

要添加到上述答案，知道您可以为表设置这些设置默认值可能会有所帮助，如下所示：

`this.mTable.defaults().expandX().fillX();`

这些设置将统一应用于所有行和单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-14T05:04:29.540

通过首先使用`.expandX()`方法扩展一个单元格，然后通过调用`fillX()`. 所以你的初始代码：

```
this.mTable.row();
this.mTable.add(button).fillX(); 
```

应更正为以下版本：

```
this.mTable.row();
this.mTable.add(button).expandX().fillX(); 
```

这 2 行可以缩短为 1：

```
this.mTable.add(button).expandX().fillX().row(); 
```

# matlab - matlab - arrayfun(..) 调用，“没有足够的输入参数。”

> ID：12667716
> 
> 赞同：2
> 
> 时间：2012-10-01T04:58:44.547
> 
> 标签：matlab

在以下说明错误的简化示例中，该函数应返回数组中索引处`f_what(..)`的输入参数的值：`y``ts`

```
function Y = f_what(y, ts)

    function get_out = get(t)
        get_out = y(t);
    end

    Y = arrayfun(get, ts);

end 
```

调用它：

```
>> f_what(1:10, 1:5)
Error using f_what/get (line 4)
Not enough input arguments.

Error in f_what (line 7)
    Y = arrayfun(get, ts); 
```

此外，由于某种原因，以下内容`get(..)`应该与上述内容相同：

```
function Y = f_what(y, ts)

    get = @(t) y(t);

    Y = arrayfun(get, ts);

end 
```

调用它：

```
>> f_what(1:10, 1:5)

ans =

     1     2     3     4     5 
```

“没有足够的输入参数”......`arrayfun(..)`应该用一个参数来调用它的第一个参数。并且`get(..)`有一个输入参数。我不明白为什么这还不够。

**编辑：**更归结为：

```
function Y = f_what

    function get_out = get_(t)
        get_out = t;
    end

    Y = arrayfun(get_, 1:5);

end 
```

还是同样的错误。

**编辑 2：**如果我提供`@get`,`arrayfun(..)`而不是`get`. 但我仍然不明白为什么没有`@`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T05:45:08.700

查看[arrayfun](http://www.google.no/search?q=arrayfun&ie=UTF-8&oe=UTF-8&hl=en-gb&client=safari)文档

> 功能
> 
> 处理接受 n 个输入参数并返回 m 个输出参数的函数。

matlab 中的句柄使用@ 表示，因此您需要将@get 作为第一个参数传递。否则，matlab 会尝试评估函数 get 而不是获取其句柄，这会导致“参数不足”错误。

在您定义的示例中， get 是匿名函数的句柄，这就是它起作用的原因。

# algorithm - 最适合给定金额的硬币

> ID：12667721
> 
> 赞同：3
> 
> 时间：2012-10-01T04:59:00.867
> 
> 标签：algorithm, combinations

给定一组硬币，你如何以最优化的方式达到给定的金额？

假设在这种情况下，我们有 1、5、10、20 和 50 美分硬币的随机数，其中最大的硬币优先。

我的第一个直觉是使用所有可能适合的最大硬币，然后如果超过总和，则使用下一个价值最小的硬币。

这种方法会这样做还是有任何不足之处？有没有更有效的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T05:05:37.087

首先简单地分发最大的硬币是有缺陷的。

假设您的自动售货机已售完所有硬币，除了 50c、20c 和 1c 硬币各有 20 个，而您必须交付 60c 的零钱。

“优先级最大”（或贪婪）方案将给您 11 个硬币、1 个 50c 硬币和 10 个 1c 硬币。

更好的解决方案是三个 20c 硬币。

贪心方案只会给你*局部*最优解。对于全局最优，您通常需要检查所有可能性（尽管可能存在 minimax 类型的算法来减少搜索空间）以确定哪些可能性，对于交付更改，通常完全在可计算性的范围内。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T05:01:37.903

[贪婪算法](http://en.wikipedia.org/wiki/Greedy_algorithm)（你现在正在做的事情）通常被选择用于这类事情，并作为[最终状态机](http://en.wikipedia.org/wiki/Finite-state_machine)实现，用于自动售货机（对于这种特殊情况）。

> 贪心算法确定在找零时提供的最小硬币数量。这些是人类模仿贪心算法所采取的步骤

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-09T12:33:15.047

每次用尽最大面额的假设不会是最好的解决方案。例子：

```
Input: coins[] = {25, 10, 5}, V = 30
Output: Minimum 2 coins required
We can use one coin of 25 cents and one of 5 cents 

Input: coins[] = {9, 6, 5, 1}, V = 11
Output: Minimum 2 coins required
We can use one coin of 6 cents and 1 coin of 5 cents (min)
As per logic of exhausting largest coins first, we would end up with one
coin of 9 cents and 2 coins of 1 cent 
```

请参阅[此答案](https://stackoverflow.com/questions/3947867/find-the-least-number-of-coins-required-that-can-make-any-change-from-1-to-99-ce#answer-3950059 "这个答案")以获取更多说明。

# sql - 重叠数据

> ID：12667726
> 
> 赞同：1
> 
> 时间：2012-10-01T04:59:43.267
> 
> 标签：sql, database, oracle10g

我有一个 sql 查询来检查表 PRODUCTS 中产品记录的重叠。在大多数情况下，查询工作正常，但以下情况除外。

```
select * from products where 
product_reg_no = 'AL-NAPT' 
and (to_date('14-Aug-2001') BETWEEN to_date('27-Aug-2001') AND to_date('30-Aug-2001')
or to_date('31-Aug-2001') BETWEEN to_date('27-Aug-2001') AND to_date('30-Aug-2001')) 
```

如何使此查询捕获所有记录部分或完全重叠？

如果需要，我可以提供带有示例记录的表结构。

谢谢

更新 1

我在[此处](http://sqlfiddle.com/#!4/03d61/1)或如下添加了表结构和记录：

```
create table products
(product_reg_no varchar2(32),
 start_date date,
 end_date date);

Insert into products
   (product_reg_no, START_DATE, END_DATE)
 Values
   ('AL-NAPT', TO_DATE('08/14/2012', 'MM/DD/YYYY'), TO_DATE('08/31/2012', 'MM/DD/YYYY'));
Insert into products
   (product_reg_no, START_DATE, END_DATE)
 Values
   ('AL-NAPT', TO_DATE('08/27/2012', 'MM/DD/YYYY'), TO_DATE('08/30/2012', 'MM/DD/YYYY'));
COMMIT; 
```

从2012 年 8**月 14 日到 2012 年**8**月 31 日的第一个记录与从 2012 年 8****月 27 日到 2012 年**8**月 30 日**的第二个记录重叠。那么如何修改我的查询以获得重叠？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T05:19:02.010

这是一个奇怪的查询。您检查 2001 年 8 月 14 日是否介于 2001 年 8 月 27 日和 2001 年 8 月 30 日之间，这总是错误的，或者 2001 年 8 月 31 日在 2001 年 8 月 27 日和 2001 年 8 月 30 日之间，这也总是错误的。所以你的`where`条款永远是错误的。

**编辑：**感谢您的澄清

[SQL 小提琴演示](http://sqlfiddle.com/#!4/03d61/15)

```
select   p1.product_reg_no
       , p1.start_date p1s
       , p1.end_date   p1e
       , p2.start_date p2s
       , p2.end_date   p2e
from products p1, products p2
where p1.product_reg_no = p2.product_reg_no
  and not (    p1.end_date   < p2.start_date
           and p1.start_date > p2.end_date   ); 
```

您想要的是以下场景（1 代表第一行 2 代表第二行）

```
1    1
 2  2

 1  1
2    2

1    1
2    2

1   1
 2   2

 1   1
2   2 
```

你也可以转身说你不想要这个：

```
1 1
   2 2

   1 1
2 2 
```

我以为你也想要这个

```
1 1
  2 2

  1 1
2 2 
```

该`WHERE`条款也可以写成不同的

```
not (    p1.end_date   < p2.start_date and p1.start_date > p2.end_date   ) 
```

是相同的

```
 p1.end_date   >= p2.start_date or p1.start_date <= p2.end_date 
```

我想当我很久以前在学校时，它被称为德摩根定律。

您可能必须考虑如果您有超过 2 行会发生什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T06:16:49.563

请参阅[确定两个日期范围是否重叠](https://stackoverflow.com/questions/325933/determine-whether-two-date-ranges-overlap/)。

您可能需要使用`<=`而不是评估以下内容或次要变体`<`：

```
Start1 < End2 AND Start2 < End1 
```

由于您使用的是单个表，因此您需要有一个自联接：

```
SELECT p1.*, p2.*
  FROM products p1
  JOIN products p2
    ON p1.product_reg_no != p2.product_reg_no
   AND p1.start < p2.end
   AND p2.start < p1.end; 
```

不相等条件确保您不会获得与其自身配对的记录（尽管`<`条件也确保了这一点，但如果您使用`<=`，则不相等条件将是一个好主意。

这将为每对产品生成两行（一行 ProductA as`p1`和 ProductB as `p2`，另一行 ProductB as`p1`和 ProductA as `p2`）。为防止这种情况发生，请将 更改`!=`为`<`或`>`。

* * *

而且，更仔细地查看示例数据，您可能对注册号匹配且日期重叠的行非常感兴趣。在这种情况下，您可以忽略我对`!=`and `<`or的喋喋不休，毕竟`>`将条件替换为。`=`

```
SELECT p1.*, p2.*
  FROM products p1
  JOIN products p2
    ON p1.product_reg_no = p2.product_reg_no
   AND p1.start < p2.end
   AND p2.start < p1.end; 
```

* * *

SQL Fiddle（未保存）表明这有效：

```
SELECT p1.product_reg_no p1_reg, p1.start_date p1_start, p1.end_date p1_end,
       p2.product_reg_no p2_reg, p2.start_date p2_start, p2.end_date p2_end
  FROM products p1
  JOIN products p2
    ON p1.product_reg_no = p2.product_reg_no
   AND p1.start_date < p2.end_date
   AND p2.start_date < p1.end_date
 WHERE (p1.start_date != p2.start_date OR p1.end_date != p2.end_date); 
```

WHERE 子句消除了连接到自身的行。删除 SELECT 列表中的重复列名后，您可以看到所有数据。我加了一行：

```
INSERT INTO products (product_reg_no, start_date, end_date)
VALUES ('AL-NAPT', TO_DATE('08/27/2011', 'MM/DD/YYYY'), TO_DATE('08/30/2011', 'MM/DD/YYYY')); 
```

这没有被选中——表明它确实拒绝了不重叠的条目。

如果要消除双行，则必须添加另一个花哨的标准：

```
SELECT p1.product_reg_no p1_reg, p1.start_date p1_start, p1.end_date p1_end,
       p2.product_reg_no p2_reg, p2.start_date p2_start, p2.end_date p2_end
  FROM products p1
  JOIN products p2
    ON p1.product_reg_no = p2.product_reg_no
   AND p1.start_date < p2.end_date
   AND p2.start_date < p1.end_date
 WHERE (p1.start_date != p2.start_date OR p1.end_date != p2.end_date)
   AND (p1.start_date < p2.start_date OR
       (p1.start_date = p2.start_date AND p1.end_date < p2.end_date)); 
```

# asp.net - 如何在asp.net中管理多语言网站？

> ID：12667729
> 
> 赞同：0
> 
> 时间：2012-10-01T05:00:14.177
> 
> 标签：asp.net, .net, c#-4.0

我正在建立一个网站，将来它可能具有多语言功能。我只想知道我应该从一开始就考虑的任何数据库（例如 DataTypes 等）或编码规范，以便以后可以轻松地包含多语言功能。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T05:15:03.960

对于数据库列类型，如果您要在其中存储文本，我会保留所有文本 nVarchar。

您还可以签出 .net 资源文件： http: [//www.codeproject.com/Articles/5447/NET-Localization-using-Resource-file](http://www.codeproject.com/Articles/5447/NET-Localization-using-Resource-file)

如果您确定将来要翻译该网站，那么现在将所有内容都放在英文资源文件中不会有什么坏处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T05:04:22.913

您可以为每种文化创建一个[卫星大会](http://blogs.msdn.com/b/global_developer/archive/2011/07/22/introduction-to-satellite-assemblies.aspx)，然后您可以通过资源使用它来创建一个多语言网站。你可以看看以下文章：

[CodeProject - 创建多](http://www.codeproject.com/Articles/7998/Creating-multilingual-websites-Part-1)
[语言网站 使用 ASP.Net 4 的多语言 Web 应用程序](http://weblogs.asp.net/sreejukg/archive/2010/11/23/multi-lingual-web-applications-using-asp-net-4.aspx)

# ruby-on-rails - Mongoid - 在某些情况下无法设置/获取属性

> ID：12667732
> 
> 赞同：1
> 
> 时间：2012-10-01T05:00:40.817
> 
> 标签：ruby-on-rails, mongoid, updatemodel, setattribute

我有一个简单的模型类：

```
class Sentence
  include Mongoid::Document
  include Mongoid::Timestamps
  field :content, :type => String
  field :num_votes, :type => Integer
  field :last_submitted, :type => Time
  field :meaning_id , :type => String
  belongs_to :word
  belongs_to :user
  attr_accessible :content,:num_votes,:last_submitted
  attr_accessor :content,:num_votes,:last_submitted
end 
```

我正在尝试像这样设置内容属性：

```
sen = Sentence.first
sen.content = "Hello" - This does not update the attribute(no error thrown)
sen.write_attributes(content: "hello") - This does not update the attribute(no error thrown) 
```

但如果我这样做

```
sen[:content] = "Hello" - This updates the attribute
sen.write_attribute(:content,"Hello") - This updates the attribute 
```

我对这里发生的事情感到困惑，为什么在某些情况下，我的更新有效，而在其他情况下却没有。我对 get 属性也有同样的问题。sen.content 返回 nil，但 sen[:content] 返回正确的内容 我有另一个模型类，在这种情况下，上面提到的所有四种获取/设置属性的方法都适用于所有属性

```
class User
  include Mongoid::Document
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  ## Database authenticatable
  field :email,              :type => String, :default => ""
  field :encrypted_password, :type => String, :default => ""

  validates_presence_of :email
  validates_presence_of :encrypted_password

  ## Recoverable
  field :reset_password_token,   :type => String
  field :reset_password_sent_at, :type => Time

  ## Rememberable
  field :remember_created_at, :type => Time

  ## Trackable
  field :sign_in_count,      :type => Integer, :default => 0
  field :current_sign_in_at, :type => Time
  field :last_sign_in_at,    :type => Time
  field :current_sign_in_ip, :type => String
  field :last_sign_in_ip,    :type => String

  ## Confirmable
  # field :confirmation_token,   :type => String
  # field :confirmed_at,         :type => Time
  # field :confirmation_sent_at, :type => Time
  # field :unconfirmed_email,    :type => String # Only if using reconfirmable

  ## Lockable
  # field :failed_attempts, :type => Integer, :default => 0 # Only if lock strategy is :failed_attempts
  # field :unlock_token,    :type => String # Only if unlock strategy is :email or :both
  # field :locked_at,       :type => Time

  ## Token authenticatable
  # field :authentication_token, :type => String
  include Mongoid::Timestamps

  field :name, type: String
  validates :name, presence: true
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX }
  index({ email: 1 }, { unique: true, name: "email_index" })
  field :rank, type: String
  field :num_words, type: Integer
  field :time_in_city, type: Time
  field :last_logged_in, type: Time
  field :points, type: Integer
  has_many :sentences

  attr_accessible :name, :email, :password, :password_confirmation, :remember_me

end 
```

有人可以帮助我并告诉我为什么 get/set 在某些情况下有效，但在其他情况下无效？我正在使用 mongo (1.7.0) 使用 mongoid (2.5.0) 使用 rails (3.2.8)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:37:05.457

尝试删除`attr_accessor :content,:num_votes,:last_submitted`. 该`attr_accessor`方法用于创建方法来简单地设置和读取对象中的实例变量。例如，对于`attr_accessor :content`，您最终会得到以下方法：

```
def content= (something)
    @content = something
end

def content
    @content
end 
```

第一个不涉及`save`更新数据库的调用，只是更新内存中的实例变量。

# android - 如何使用命令行生成apk文件？

> ID：12667741
> 
> 赞同：9
> 
> 时间：2012-10-01T05:01:57.980
> 
> 标签：android, eclipse, command-line, apk, command-prompt

请告诉我如何在不使用 ECLIPSE ide 的情况下构建项目的 apk 文件。我找到了一些关于使用批处理文件的信息，但我不知道如何重新制作它。

```
echo on

SET PREV_PATH=%CD%
cd /d %0\..

REM Clear bin folder
rmdir "bin" /S /Q
rmdir "gen" /S /Q
mkdir "bin" || goto EXIT
mkdir "gen" || goto EXIT

REM Set your application name
SET APP_NAME=SecureSms

REM Define minimal Android revision
SET ANDROID_REV=android-8

REM Define aapt add command
SET ANDROID_AAPT_ADD="%ANDROID-SDK%\platforms\%ANDROID_REV%\tools\aapt.exe" add

REM Define aapt pack and generate resources command
SET ANDROID_AAPT_PACK="%ANDROID-SDK%\platforms\%ANDROID_REV%\tools\aapt.exe" package -v -f -I "%ANDROID-SDK%\platforms\%ANDROID_REV%\android.jar"

REM Define class file generator command
SET ANDROID_DX="%ANDROID-SDK%\platform-tools\dx.bat" --dex

REM Define Java compiler command
SET JAVAC="%JAVABIN%\javac.exe" -classpath "%ANDROID-SDK%\platforms\%ANDROID_REV%\android.jar"
SET JAVAC_BUILD=%JAVAC% -sourcepath "src;gen" -d "bin"

REM Generate R class and pack resources and assets into resources.ap_ file
call %ANDROID_AAPT_PACK% -M "AndroidManifest.xml" -A "assets" -S "res" -m -J "gen" -F "bin\resources.ap_" || goto EXIT

REM Compile sources. All *.class files will be put into the bin folder
call %JAVAC_BUILD% src\org\secure\sms\*.java || goto EXIT

REM Generate dex files with compiled Java classes
call %ANDROID_DX% --output="%CD%\bin\classes.dex" %CD%\bin || goto EXIT

REM Recources file need to be copied. This is needed for signing.
copy "%CD%\bin\resources.ap_" "%CD%\bin\%APP_NAME%.ap_" || goto EXIT

REM Add generated classes.dex file into application package
call %ANDROID_AAPT_ADD% "%CD%\bin\%APP_NAME%.ap_" "%CD%\bin\classes.dex" || goto EXIT

REM Create signed Android application from *.ap_ file. Output and Input files must be different.
call "%JAVABIN%\jarsigner" -keystore "%CD%\keystore\my-release-key.keystore" -storepass "password" -keypass "password" -signedjar "%CD%\bin\%APP_NAME%.apk" "%CD%\bin\%APP_NAME%.ap_" "alias_name" || goto EXIT

REM Delete temp file
del "bin\%APP_NAME%.ap_"

:EXIT
cd "%PREV_PATH%"
ENDLOCAL
exit /b %ERRORLEVEL% 
```

我从一个网站得到这个代码。（http://www.apriorit.com/our-company/dev-blog/233-how-to-build-apk-file-from-command-line）

我下载了源代码示例并在其中打开了批处理文件，但它没有生成它的 apk 文件。通常 apk 文件位于其 bin\ 对吗？但是当我打开文件夹时，文件不在那里。请帮助我如何使用这个。我很感激你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T05:08:23.490

您必须为此使用 Apache ant：

```
ant debug 
```

这将构建并签署必要的`.apk`文件。

有关更多信息，请参阅：[http ://codeseekah.com/2012/02/09/command-line-android-development-basics/](http://codeseekah.com/2012/02/09/command-line-android-development-basics/)

**编辑：**

ant 不是标准 Android SDK 设置的一部分。你必须安装它。

[从 The Apache Ant Project](http://ant.apache.org/bindownload.cgi)下载最新的 ant zip 文件。

```
Extract the zip file to a folder, say c:\ant\ 

Add c:\ant to your path environment variable 
```

完成这些后，您将能够从命令行运行 ant

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T05:15:43.577

默认情况下，apk 位于 bin 下，这是正确的，但是当您分发源代码时，最好不要添加任何 apk，因为“新鲜”编译的 apk 始终是更好的解决方案。

如果您`build.xml`在项目的根目录中调用了一个文件，请执行

```
ant debug 
```

否则，您需要使用构建阶段所需的最少信息更新您的项目

```
android update project -t android-10 -p . 
```

在这种情况下`android-10`是您的 apk/app/api 的目标，您可以为目标设备自定义此选项。

在此之后，您将获得您的`build.xml`一切，并准备好生成 apk。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-22T21:46:03.427

我在 Internet 上找到的用于创建 Android APK 的最佳示例之一是[https://geosoft.no/development/android.html](https://geosoft.no/development/android.html) 。如果您是，您也可以在根目录中使用 assembleDebug 命令（确保将 gradle 设置为环境变量）使用 Gradle。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-24T20:44:39.270

```
ant debug install 
```

如果您使用创建项目实际上是可行的（请注意，如果您正在运行多个设备，则应在安装时使用“adb -s”命令指定虚拟设备）

```
android create project -n <project_name>
        -t <target_version> -p <path> -k <package> -a <activity> 
```

并使用此命令在 avd 上运行（如果您已启动）

```
adb -e shell "am start -a android.intent.action.MAIN -n com.your.package/.YourActivity" 
```

（如果您在设备上运行，请将 -e 选项更改为 -d）

[参考](https://codeseekah.com/2012/02/09/command-line-android-development-basics/)

如果您不知道这些命令或参数，最好使用“AVD Manager.exe”来启动虚拟设备，因为有很多。

# asp.net - microsoft.identitymodel configsection 的 web.config 转换

> ID：12667742
> 
> 赞同：3
> 
> 时间：2012-10-01T05:02:03.970
> 
> 标签：asp.net, visual-studio-2010, web-config, transform, claims-based-identity

如何使用标准的 Visual Studio web.config 转换来转换 microsoft.identitymodel 配置部分中的 AudienceUris 和 federatedAuthentication 元素？

对于开发环境，我们为所有子域添加了后缀“-dev”以及特殊的 localhost 端口号，例如：realm="https://client-dev.domain.com:444"。今天主要的 web.config 反映了这一点，但理想情况下，我们希望将此设置移动到 Web.Debug.config 并且在 Web.Release.config 中，我们希望指定正确的受众和领域，没有“-dev”后缀和本地端口设置。但是，尝试将 xdt:Transform="Replace" 放在 Web.Debug.Config 内的 microsoft.identitymodel 元素中会导致以下警告：

```
The 'http://schemas.microsoft.com/XML-Document-Transform:transform' attribute is not declared. 
```

当然还有运行时故障（例如，无法找到 servicecertificate）。

这是 microsoft.identitymodel 部分：

```
<configuration>
  <configSections>
    <section name="microsoft.identityModel" type="Microsoft.IdentityModel.Configuration.MicrosoftIdentityModelSection, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
  </configSections>

  <microsoft.identityModel>
    <service>
      <applicationService>
        <claimTypeRequired>
          <claimType type="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/privatepersonalidentifier" optional="false" />
          <claimType type="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress" optional="false" />
        </claimTypeRequired>
      </applicationService>
      <serviceCertificate>
        <certificateReference x509FindType="FindByThumbprint" findValue="NNNNNNNNNN" storeLocation="LocalMachine" storeName="My" />
      </serviceCertificate>
      <certificateValidation certificateValidationMode="None" />
      <audienceUris>
        <add value="https://url/" />
      </audienceUris>
      <federatedAuthentication>
        <wsFederation passiveRedirectEnabled="true" issuer="https://url/" realm="https://url/" requireHttps="true" />
        <cookieHandler requireSsl="true" />
      </federatedAuthentication>
      <issuerNameRegistry type="Microsoft.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35">
        <trustedIssuers>
          <add thumbprint="NNNNNNNNNN" name="https://url/" />
        </trustedIssuers>
      </issuerNameRegistry>
    </service>
  </microsoft.identityModel>
<configuration> 
```

现有的不起作用的解决方案：

1）这里提出了同样的问题，但没有适当的回应。RemoveAll 和 Insert 不起作用： [microsoft.identityModel 上的 Web 配置转换 - 未声明“http://schemas.microsoft.com/XML-Document-Transform”属性](https://stackoverflow.com/questions/8513488/web-config-transform-on-microsoft-identitymodel-http-schemas-microsoft-com)

2）此外，尝试按照此线程上的建议操作命名空间，但这也不起作用： [http ://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/9ededb66-3e34-4bba- 8e20-a2cc6025f0f9](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/9ededb66-3e34-4bba-8e20-a2cc6025f0f9)

3) configSource 看起来很有希望，但在 microsoft.identitymodel 元素中指定时再次起作用。我得到：

```
Warning 1   The 'configSource' attribute is not declared. 
```

[http://blog.andreloker.de/post/2008/06/16/Keep-your-config-clean-with-external-config-files.aspx](http://blog.andreloker.de/post/2008/06/16/Keep-your-config-clean-with-external-config-files.aspx)

任何帮助将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T05:35:45.810

经过大量试验和错误后，我求助于 Loren Halvorson 的 XMLPreProcess 从 TemplateWeb.config 自动生成正确的 Web.config，作为每个项目的预构建事件的一部分。

虽然我希望 Visual Studio 在这方面的尝试能够为开发人员工作，但是时间就是金钱，是我继续前进的时候了。不用说，它在 SQL Azure SDK 中也被破坏了，因为只有在发布站点时才会发生转换。在最新的 Azure SDK 中，情况不再如此，因此转换也停止工作。哦快乐！

这是一个优秀工具的链接，我认为它是每个 ASP.NET 开发人员必备的工具：

[http://xmlpreprocess.codeplex.com/](http://xmlpreprocess.codeplex.com/)

# batch-file - Win Batch - 将文本附加到 TSV 文件的每一行

> ID：12667748
> 
> 赞同：3
> 
> 时间：2012-10-01T05:02:55.847
> 
> 标签：batch-file

我在一个目录中有许多 TSV 文件，我想在每一行附加文件名作为额外的列。例如，我的数据如下所示。

**前**

*文件名：* snapper_User_list.txt

```
Username    group        
user1 admin  
user2 users 
```

*文件名：* marlin_User_list.txt

```
Username    group  
root admin  
sql admin 
```

我的理想状态是拥有一个如下所示的文本文件。

**后**

*文件名：* 输出.txt

```
user1 admin snapper  
user 2 users snapper  
root admin marlin  
sql admin marlin 
```

现在我需要在 MS Windows 中完成这个。

我有下面的脚本工作，虽然它仍然在我的输出中显示完整的文件名。

```
Rem Rename the files by just using the name before the underscore.
for /f "tokens=1* delims=_" %%i in ( 'dir *.txt /b' ) do (
    rename %%i_%%j %%i.txt
    )

Rem Combine the files.
FOR %%I IN (*.txt) DO (
    FOR /f "tokens=*" %%a IN (%%I) DO (
        echo %%a%TAB%%%I>>combined.txt
        )
    ) 
```

这是非常丑陋的代码。

谢谢。（更新 - 更新我的代码）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T11:21:25.287

我将假设您指的是文件名中出现的下划线。

```
@echo off
setlocal

::The following defines a TAB character that is not preserved on StackOverflow
set "TAB=   "

for %%F in (*.txt) do call :processFile "%%F"
exit /b

:processFile
set "name=%~1"
set name=%name:_=&rem %
for /f "usebackq delims=" %%a in (%1) do echo %%a%TAB%%name%>>combined.txt 
```

魔术命令是`set name=%name:_=&rem %`。它通过在语句中注入 REMark 命令来工作。假设当前名称是`part1_part2.txt`. 搜索和替换展开后，完整的语句变为`set name=part1&rem part2.txt`

**编辑 - 改进的答案**

查看您编辑的问题，我意识到有更好的方法。我应该考虑使用 FOR /F 解析名称 :-) 你在那里 90%！

```
@echo off
setlocal

::The following defines a TAB character that is not preserved on StackOverflow
set "TAB=   "

for %%F in (*.txt) do (
  for /f "delims=_" %%I in ("%%F") do (
    for /f "usebackq delims=" %%a in ("%%F") do echo %%a%TAB%%%I>>combined.txt
  )
) 
```

# javascript - jQuery Slidedown 在点击后不隐藏？

> ID：12667749
> 
> 赞同：2
> 
> 时间：2012-10-01T05:03:03.063
> 
> 标签：javascript, jquery, jquery-events, slidedown

我有一个非常简单的 jQuery 滑动登录。我唯一的问题是，当单击站点上任何位置的链接和/或刷新页面时，我希望它不要“重新启动”/返回，直到用户单击关闭按钮。不确定这是否可能。

```
$(document).ready(function() {

    // Expand Panel
    $("#open").click(function(){
        $("div#panel").slideDown(2000, "easeOutBounce");
    }); 

    // Expand Panel
    $("#open").click(function(){
        $("body").slideDown("slow");
    }); 

    // Collapse Panel
    $("#close").click(function(){
        $("div#panel").slideUp(2000, "easeInBack"); 
    });     

    // Switch buttons from "Log In | Register" to "Close Panel" on click
    $("#toggle a").click(function () {
        $("#toggle a").toggle();
    });     
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:06:01.133

您可以在它向下滑动后创建一个 cookie，并在每次 $(document).ready() 调用时查看该 cookie 是否存在并相应地打开面板。

您可以在 Google 上搜索“如何使用 javascript 设置 cookie”，也可以按照 Konstantin D 的建议使用 $.cookie。

请参阅我在您的代码中的注释以清楚地理解：

```
$(document).ready(function() {

// see if cookie exists. if it does do the following
// $('div#panel').show();
// if it does not, you don't have to do anything

// Expand Panel
$("#open").click(function(){
    $("div#panel").slideDown(2000, "easeOutBounce");
    // now that it is opened, you should set your cookie here!

}); 

// Expand Panel
$("#open").click(function(){
    $("body").slideDown("slow");
}); 

// Collapse Panel
$("#close").click(function(){
    $("div#panel").slideUp(2000, "easeInBack"); 
    // once it is closed by user, remember to delete the cookie.
});     

// Switch buttons from "Log In | Register" to "Close Panel" on click
$("#toggle a").click(function () {
    $("#toggle a").toggle();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T05:06:21.393

为了在客户端 UI 中保持状态，您需要使用一些本地存储，例如 cookie。看看[jQuery cookie 插件](http://archive.plugins.jquery.com/project/Cookie)。

您将添加一个检查以查看 cookie 是否存在以及它是否显示面板展开。

代码：

```
if ($.cookie("isExpanded")) {
    $("div#panel").css('display', 'block');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T05:14:25.833

我会做这样的事情：

```
$(document).ready(function() {
  if(loginOpen == true)
      $("div#panel").show();

   // Expand Panel
   $("#open").click(function(){
       $("div#panel").slideDown(2000, "easeOutBounce");
       $("body").slideDown("slow");
       loginOpen = true;
   }); 

   // Collapse Panel
   $("#close").click(function(){
       $("div#panel").slideUp(2000, "easeInBack"); 
       loginOpen = false;
   });     

   // Switch buttons from "Log In | Register" to "Close Panel" on click
   $("#toggle a").click(function () {
       $("#toggle a").toggle();
   });     
});

var loginOpen = false; 
```

# iphone - 这是从后台线程访问 UI 工具包的安全方法吗...？

> ID：12667760
> 
> 赞同：2
> 
> 时间：2012-10-01T05:04:55.890
> 
> 标签：iphone, objective-c, ios, uikit

我必须从服务器下载图像，但我不想创建 NSURLConnection，我知道 UIKit 不是线程安全的，所以我尝试了这个，只需要确认这是否安全或是否会导致崩溃（截至现在它工作正常。）我尝试了以下

看开关的案例2。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
  switch (indexPath.row) {
    case 0:
    {
      CreateNewSurveyViewController *vc=[[CreateNewSurveyViewController alloc] init];
      [self.navigationController pushViewController:vc animated:YES];
      [vc release];
      break;
    }
    case 1:{
      MySurveyViewController *mySurveyViewController=[[MySurveyViewController alloc] init];
      [self.navigationController pushViewController:mySurveyViewController animated:YES];
      [mySurveyViewController release];
      break;
    }
    case 2:{

        self.progressHud.hidden = NO;
        [self performSelectorInBackground:@selector(loadProfileImage) withObject:nil];
      break;
    }
    default:
      break;
  }
}   
-(void)loadProfileImage {

    NSData* profileImageData = [NSData dataWithContentsOfURL:[NSURL URLWithString:self.userAccount.profileImageURL]];
    [self performSelectorOnMainThread:@selector(launchSettingsView:) withObject:profileImageData waitUntilDone:YES];

}

-(void)launchSettingsView:(NSData*)profileImageData {
    self.userAccount.userImage = [UIImage imageWithData:profileImageData];
    self.progressHud.hidden = YES;
    SettingsViewController* settingsViewController=[[SettingsViewController alloc] init];
    settingsViewController.userAccount = self.userAccount;
    settingsViewController.delegate = self;
    [self.navigationController pushViewController:settingsViewController animated:YES];
    [settingsViewController release];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:28:32.177

这对我来说看起来很安全。您在后台线程上完成所有联网，然后只在您回调的主线程方法中触摸 UI。通常人们会使用 GCD 或 NSOperationQueue 但这也应该有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T05:28:40.640

只要在主线程上完成实际的 UI 更新工作，就可以了。

# android - 如何获取 Android 的传感器值

> ID：12667763
> 
> 赞同：1
> 
> 时间：2012-10-01T05:05:14.927
> 
> 标签：android, c, android-emulator, kernel, android-sensors

我目前正在为 android（tegra/goldfish 分支）构建 3.1 内核。我想用 C 语言编写一个程序来获取传感器值。我确实有 inc/hardware/sensors.h 和一些相关文件，但是在尝试打开传感器设备时我不断收到错误消息。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T05:06:34.597

尤其是查看包含 NDK 的示例`native-activity`。

# python - Django 限制查询

> ID：12667764
> 
> 赞同：8
> 
> 时间：2012-10-01T05:05:16.527
> 
> 标签：python, django

我正在尝试运行一个 Django 查询，它将返回的结果限制为 5 个项目。这很容易，只是查询不会总是返回 5 个项目。在这种情况下，这样的语句（我的代码）会失败：

```
 users = User.objects.filter(username__istartswith = name)[5].only('Person__profile_picture', 'username') 
```

如果查询只返回一个结果，我会得到一个索引超出范围错误。有没有办法指示 Django 给我最多 5 个结果而不会让我崩溃？将所有内容都包装在 try 块中的标准解决方案是什么？还是我需要编写一个原始 SQL 查询来完成这个？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-01T05:08:45.433

如文档：[https ://docs.djangoproject.com/en/dev/topics/db/queries/#limiting-querysets](https://docs.djangoproject.com/en/dev/topics/db/queries/#limiting-querysets)

例如，这将返回前 5 个对象（LIMIT 5）：

```
Entry.objects.all()[:5] 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2020-02-04T07:25:17.660

```
users=User.objects.filter(username__istartswith=name)        
[:5].values(‘Person__profile_picture’,’username’) 
```

# c# - 使用 Directory.Move 时该文件已存在时无法创建该文件

> ID：12667770
> 
> 赞同：26
> 
> 时间：2012-10-01T05:06:45.190
> 
> 标签：c#

我正在尝试将目录从一个位置移动到同一驱动器上的另一个位置。我收到“**当该文件已存在时无法创建文件**”错误。下面是我的代码。

有人可以对此提出建议吗？

```
 string sourcedirectory = @"F:\source";
        string destinationdirectory = @"F:\destination";

        try
        {
            if (Directory.Exists(sourcedirectory))
            {
                if (Directory.Exists(destinationdirectory))
                {
                  Directory.Move(sourcedirectory, destinationdirectory);
                }
                else
                {
                  Directory.CreateDirectory(destinationdirectory);
                  Directory.Move(sourcedirectory, destinationdirectory);
                }
            }

        }
        catch (Exception ex)
        {
            log(ex.message);
        } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-01T06:08:37.903

正如前面两个答案所指出的，目标目录不存在。在您的代码中，如果目录不存在，您将创建目录，然后尝试移动您的目录，移动方法将为您创建目录。如果目录已经存在，您将需要删除它或移动它。

像这样的东西：

```
class Program
{
    static void Main(string[] args)
    {
        string sourcedirectory = @"C:\source";
        string destinationdirectory = @"C:\destination";
        string backupdirectory = @"C:\Backup";
        try
        {
            if (Directory.Exists(sourcedirectory))
            {
                if (Directory.Exists(destinationdirectory))
                {
                    //Directory.Delete(destinationdirectory);
                    Directory.Move(destinationdirectory, backupdirectory + DateTime.Now.ToString("_MMMdd_yyyy_HHmmss"));
                    Directory.Move(sourcedirectory, destinationdirectory);
                }
                else
                {
                    Directory.Move(sourcedirectory, destinationdirectory);
                }
            }

        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T06:11:31.240

您不需要先创建目录，它会抛出 IO 异常，如果目标目录存在，`Move`方法会自动为您创建它：

```
string sourcedirectory = @"F:\source";
string destinationdirectory = @"F:\destination";

if (Directory.Exists(sourcedirectory))
{
    if (!Directory.Exists(destinationdirectory))
    {
         Directory.Move(sourcedirectory, destinationdirectory);
    }
} 
```

更多信息`Directory.Move`：

[http://msdn.microsoft.com/en-us/library/system.io.directory.move.aspx](http://msdn.microsoft.com/en-us/library/system.io.directory.move.aspx)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T05:12:03.650

来自[http://msdn.microsoft.com/en-us/library/system.io.directory.move.aspx](http://msdn.microsoft.com/en-us/library/system.io.directory.move.aspx)

“例如，如果您尝试将 c:\mydir 移动到 c:\public，并且 c:\public 已经存在，则此方法会引发 IOException。您必须将“c:\public\mydir”指定为 destDirName 参数，前提是“c:\public”下不存在“mydir”，或者指定一个新的目录名称，例如“c:\newdir”。”

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-01T06:12:43.480

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.io.directory.move.aspx)，

> 例如，如果您尝试将 c:\mydir 移动到 c:\public，并且 c:\public 已经存在，则此方法将引发 IOException。

但是，在您的方法中，您是在移动之前创建目标目录。

所以，你需要改变你的方法

```
if (Directory.Exists(destinationdirectory))
{
  Directory.Move(sourcedirectory, destinationdirectory);
}
else
{
  Directory.CreateDirectory(destinationdirectory);
  Directory.Move(sourcedirectory, destinationdirectory);
} 
```

至

```
if (Directory.Exists(destinationdirectory))
{
  //delete or rename
}
Directory.Move(sourcedirectory, destinationdirectory); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-27T02:32:50.177

你可以打电话

```
Microsoft.VisualBasic.FileIO.FileSystem.MoveDirectory(source, destination, true); 
```

它在内部所做的是，如果目标目录不存在，它会创建它，然后遍历源目录的文件并将它们移动到目标目录。这样就不会出现“文件已存在时无法创建文件”的问题。

您需要添加`Microsoft.VisualBasic`作为参考。

# jquery - ajax表单的jquery发布内容

> ID：12667771
> 
> 赞同：-1
> 
> 时间：2012-10-01T05:06:47.653
> 
> 标签：jquery, asp.net-mvc, ajaxform, jquery-post

我有一个ajax表单如下：

```
@using (Ajax.BeginForm("Action", "Ctrler", null, new AjaxOptions { UpdateTargetId = "divSendML" }, new { id = "frmSendML" }))
{
    <div id="divSendML">

    @Html.EditorFor(x => x.SomeProperties)
    ...

    <div id="divPreview"></div>

    </div>
} 
```

然后我调用一个jquery post来更新标签divPreiview的内容，我想发布这个ajax表单的内容：

```
function PreViewGenerateHtml() {
    var form = $("#frmSendML");
    $.post("/Ctrler/Action",
            form.serializeArray(),
            function (data) {
                $("#divPreview").html(data);
            });
}

[HttpPost]
public ActionResult Action(ActionModel model)
{
} 
```

在服务器端，为什么映射模型对 SomeProperties 没有价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T12:28:29.497

目前尚不清楚为什么要编写这个`PreViewGenerateHtml`javascript 函数。当您使用`Ajax.BeginForm`并包含 jquery 非侵入式脚本时，它会自动 AJAXify 生成的表单，当您单击提交按钮时，它将异步发送到服务器。

另一方面，如果您想手动 AJAXify 表单，您应该使用普通`Html.BeginForm`而不是 Ajax.BeginForm，然后传递`form.serialize()`而不是传递`form.serializeArray()`给`$.post`方法。

目标控制器操作将接收与普通 HTML 表单完全相同的 POST 数据。因此，如果您希望默认模型绑定器绑定您的模型，则必须正确命名您的输入字段名称。这是一篇文章，说明了[绑定到集合的预期格式](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)。

如果您有疑问，请使用 javascript 调试工具（例如 FireBug 或 Chrome 开发人员工具栏）来检查与请求一起发送的确切数据负载。

# android - 借助google api绘制图表

> ID：12667772
> 
> 赞同：0
> 
> 时间：2012-10-01T05:07:21.000
> 
> 标签：android

我正在传递这个网址

```
String urlForLineChart ="http://chart.apis.google.com/chart?" +
                "cht=lc&" +
                "chs=200x125&" +
                "chxl=0%3a|1|2|3|4|5|6|7|8|9|10&"+
                "chd=t:10,3,5,8,15,20&"+                                
                "chxt=x,y&"+
                "chds=0,50&"+
                "chxr=0,0,16%7C1,0,50&"+
                "chm=s,FF0000,1,0,5"; 
```

制作图表但不代表预期的结果，请帮助我。我不知道如何传递参数。我搜索了很多。

* * *

我正在做如下

```
WebView mCharView = (WebView) findViewById(R.id.char_view);
mCharView.loadUrl(urlForLineChart); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T13:47:23.503

您必须在 webview 中启用 Javascript：

```
 webview = (WebView) findViewById(R.id.webview);
 webview.getSettings().setJavaScriptEnabled(true); 
```

# webbrowser-control - 当网络浏览器处于焦点时，CTRL+TAB

> ID：12667775
> 
> 赞同：2
> 
> 时间：2012-10-01T05:08:00.267
> 
> 标签：webbrowser-control, ctrl

我有一个带有选项卡控件的 Windows 应用程序。tabcontrol 的选项卡之一有一个 webbrowser 控件。现在我面临的问题是当焦点在 webbrowser 控件内时，tabcontrol的正常`Ctrl`+功能不起作用。我希望+更改选定的选项卡tabcontrol 即使焦点在选定选项卡中的 webbrowser 控件内。如何实现这一点？`Tab``Ctrl``Tab`

我已经尝试过覆盖 ProcessCmdKey.但是当焦点在 webbrowser 控件内时它不会被击中。

我也尝试了 registerhotkey 方法，它有效，但它锁定了我的应用程序中的`Ctrl`+`Tab`热键，并且系统在应用程序运行时不响应我的应用程序之外的任何其他`Ctrl`+`Tab`按键，这是 registerhotkey 的预期行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T03:00:23.480

这是您需要的代码：

```
 If WB.ContainsFocus Then
        MsgBox("We have focus, disappearing...")
        WB.Document.Body.RemoveFocus()
    End If 
```

现在，问题是，何时运行该代码。如果将它放在 WebBrowser1_GotFocus 事件中，则需要打开和关闭它。如果用户正在与 WB Control 交互，请关闭代码，并在他们没有交互以及您预计会遇到您提到的问题时重新打开它。

当然，您可以添加另一行以确保在您从正文中移除焦点后，特定控件/选项卡/面板等获得焦点。此外，这里还有 3 个其他 SO 问题的答案可能对您有所帮助，但这些问题将带您走向与我提供的方向不同的方向，可能是因为这些问题与您的问题不同，但足够相似有用（未按优先顺序列出）。

[防止 WebBrowser 控件窃取焦点？](https://stackoverflow.com/questions/1562619/prevent-webbrowser-control-from-stealing-focus)

[网络浏览器抢了焦点](https://stackoverflow.com/questions/8495857/webbrowser-steals-focus)

[在 C# 应用程序中聚焦 WebBrowser 控件](https://stackoverflow.com/questions/5312755/focusing-webbrowser-control-in-a-c-sharp-application)

更新：我只是想添加，而不是 .Body.RemoveFocus() 你可以这样做：

```
WB.Document.Body.Parent.RemoveFocus() 
```

我更喜欢哪个，因为 .Document 对象在智能感知上没有明确的 .RemoveFocus 方法，所以我在 VS2012 RC 中得到了启发。这可能是指 HTML 标记（而不是 .Document 对象），并且由于`html`标记是标记的唯一父`body`级，因此这是有道理的，并且在对象下的智能感知中没有直接可用的“HTML”对象，因为您可以通过其他方式获得，所以这样做更方便。

干杯，如果您需要更多信息，请告诉我。

# c - 读取数据文件时出现分段错误

> ID：12667778
> 
> 赞同：1
> 
> 时间：2012-10-01T05:08:07.650
> 
> 标签：c, arrays, file, file-upload, segmentation-fault

我正在尝试将字符文件读入 64 个字符的数组。文件读取发生在`main()`

```
int main (int argc, char **argv)
{
    FILE *fp;
    char write_msg[BUFFER_SIZE];

    fp = fopen("test.data", "r");

    int i;
    for ( i = 0; i < (BUFFER_SIZE-1); i++){
      fscanf(fp, "%s\n", &write_msg[i]);
      printf ("printing in the for loop");
    }
    fclose(fp);
    printf("Starting the main().\n");
    printf("in Reader, the msg is: %s\n",write_msg);

    pid_t pid;
    int fd[2]; 
```

我不断收到段错误，我不确定我在做什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:10:09.120

`fscanf(fp, "%s\n", &write_msg[i]);`应该是`fscanf(fp, "%c\n", &write_msg[i]);`，您不想将字符串扫描成字符。

并且 write_msg 应该以 '\0' 结尾，`write_msg[BUFFER_SIZE-1]=0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T05:11:18.447

我在您的代码中看到以下问题：

```
fscanf(fp, "%s\n", &write_msg[i]); 
```

您正在尝试读取从位置 i 开始在循环内移动的字符串。当 i 到达为字符串 write_msg 保留的内存末尾时，很容易出现分段错误。

另一个建议：对您的 fp 描述符进行验证：

```
fp = fopen("test.data", "r");
if ( fp == NULL ) {
    /* Show an error and exit */
} 
```

如果由于任何原因无法读取文件，则 fp 将为 NULL 并且会引发分段错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T05:12:46.557

您正在将一个可能相当长的字符串扫描到缓冲区中，而不限制将读取多少个字符。你不应该那样做。然后你会加`i`一，即使字符串可能更长。您应该使用`fgets`or`fread`将整个文件读入缓冲区，因为您确实不需要 的特殊功能`fscanf`，并且这些功能需要一定长度的字符才能读取。或者，如果你真的很喜欢你的 for 循环，你可以使用`fgetc`，它完全符合你的想法`fscanf`。

# r - lm 选项，对每个类别进行回归

> ID：12667782
> 
> 赞同：1
> 
> 时间：2012-10-01T05:08:41.313
> 
> 标签：r, lm

数据：

```
Y   X   levels
y1  x1  2 
```

...

```
lm(Y~X,I(levels==1)) 
```

下的`I(levels==1)`意思是`levels==1`？如果没有，我怎样才能只在等于时才对`Y`vs进行回归？`X``levels``1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:07:15.767

查看 nlme 包中的 lmList

```
set.seed(12345)
dataset <- data.frame(x = rnorm(100), y = rnorm(100), levels = gl(2, 50))
dataset$y <- with(dataset, 
    y + (0.1 + as.numeric(levels)) * x + 5 * as.numeric(levels)
)
library(nlme)
models <- lmList(y ~ x|levels, data = dataset) 
```

输出是 lm 模型的列表，每个级别一个

```
models

Call:
  Model: y ~ x | levels 
   Data: dataset 

Coefficients:
  (Intercept)        x
1    4.964104 1.227478
2   10.085231 2.158683

Degrees of freedom: 100 total; 96 residual
Residual standard error: 1.019202 
```

这是第一个模型的摘要

```
summary(models[[1]])

Call:
lm(formula = form, data = dat, na.action = na.action)

Residuals:
     Min       1Q   Median       3Q      Max 
-2.16569 -1.04457 -0.00318  0.78667  2.65927 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)   4.9641     0.1617  30.703  < 2e-16 ***
x             1.2275     0.1469   8.354 6.47e-11 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 1.128 on 48 degrees of freedom
Multiple R-squared: 0.5925,     Adjusted R-squared: 0.584 
F-statistic: 69.78 on 1 and 48 DF,  p-value: 6.469e-11 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T05:44:21.360

你有 的参数`subset`，`lm`这里是一个例子。

```
x <- rnorm(100)
y <- rnorm(100, sd=0.1) 
y[1:50] <- y[1:50] + 3*x[1:50] + 10  # line y = 3x+10
y[51:100] <- y[51:100] + 8*x[51:100] - 5 # line y = 8x-5
levels <- rep(1:2, each=50, len=100)

data = data.frame(x=x, y=y, levels=levels)

lm(y ~ x, data=data, subset=levels==1) # regression for the first part

Coefficients:   (Intercept)            x  
                    10.015          2.996

lm(y ~ x, data=data, subset=levels==2) # second part

Coefficients:   (Intercept)            x  
                    -4.986          8.000 
```

您正在`I(levels==1)`隐式传递到`subset`inside `lm`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T05:36:56.580

我不确定。但是这段代码似乎表明你是正确的。

```
my.data <- "x y level 
            1  2 1
            2  4 2
            3  4 1
            4  3 2
            5  5 1
            6  5 2
            7  7 1
            8  6 2
            9 10 1
            10 5 2"

my.data2 <- read.table(textConnection(my.data), header = T)
my.data2

lm(x ~ y,I(level==1), data=my.data2)

my.data <- "x y level 
            1  2 1
            3  4 1
            5  5 1
            7  7 1
            9 10 1"

my.data2 <- read.table(textConnection(my.data), header = T)
my.data2

lm(x ~ y, data=my.data2) 
```

# php - Prestashop 产品页面错误

> ID：12667794
> 
> 赞同：0
> 
> 时间：2012-10-01T05:10:54.543
> 
> 标签：php, mysql, prestashop

我需要帮助我找不到有关此错误的任何信息。即使在 Prestashop 论坛

我复制了我的实时站点并将其传输到我的本地服务器。现在配置正常，但是当我单击前端的任何产品时。

我收到以下错误

```
Fatal error: Class 'ObjectModel' not found in F:\xampp2\htdocs\checkedentertainment\product.php on line 32 
```

当我在后端检查产品时，产品仍在产品中，一切顺利。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T06:33:44.353

What the error says is that the class `ObjectModel` is missing. It couldn't be loaded. Many of the core classes in PrestaShop inherits from the ObjectModel so it is cruicial that it exists.

Please check your **classes** folder and make sure all your classes are there. There should be an `ObjectModel.php` file in the classes directory, if not, make sure to put it there!

# shell - 使用 cURL 上传带有文件的 POST 数据

> ID：12667797
> 
> 赞同：505
> 
> 时间：2012-10-01T05:10:56.770
> 
> 标签：shell, file, curl, post, file-upload

我想使用 cURL 不仅可以在 HTTP POST 中发送数据参数，还可以上传具有特定表单名称的文件。我应该怎么做呢？

HTTP Post 参数：

userid = 12345 filecomment = 这是一个图像文件

HTTP文件上传：文件位置=/home/user1/Desktop/test.jpg 文件的表单名=图片（对应PHP端的$_FILES['image']）

我认为 cURL 命令的一部分如下：

```
curl -d "userid=1&filecomment=This is an image file" --data-binary @"/home/user1/Desktop/test.jpg" localhost/uploader.php 
```

我遇到的问题如下：

```
Notice: Undefined index: image in /var/www/uploader.php 
```

问题是我正在使用 $_FILES['image'] 来获取 PHP 脚本中的文件。

如何相应地调整我的 cURL 命令？

* * *

## 回答 #1

> 赞同：761
> 
> 时间：2012-10-01T05:18:26.037

您需要使用以下`-F`选项：
`-F/--form <name=content> Specify HTTP multipart POST data (H)`

试试这个：

```
curl \
  -F "userid=1" \
  -F "filecomment=This is an image file" \
  -F "image=@/home/user1/Desktop/test.jpg" \
  localhost/uploader.php 
```

* * *

## 回答 #2

> 赞同：127
> 
> 时间：2015-01-20T12:33:33.853

将用户 ID 捕获为路径变量（推荐）：

```
curl -i -X POST -H "Content-Type: multipart/form-data" 
-F "data=@test.mp3" http://mysuperserver/media/1234/upload/ 
```

捕获用户 ID 作为表单的一部分：

```
curl -i -X POST -H "Content-Type: multipart/form-data" 
-F "data=@test.mp3;userid=1234" http://mysuperserver/media/upload/ 
```

或者：

```
curl -i -X POST -H "Content-Type: multipart/form-data" 
-F "data=@test.mp3" -F "userid=1234" http://mysuperserver/media/upload/ 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2014-04-21T23:54:11.647

这是我的解决方案，我已经阅读了很多帖子，它们真的很有帮助。最后，我用 cURL 和 PHP 为小文件编写了一些代码，我认为它们真的很有用。

```
public function postFile()
{    
        $file_url = "test.txt";  //here is the file route, in this case is on same directory but you can set URL too like "http://examplewebsite.com/test.txt"
        $eol = "\r\n"; //default line-break for mime type
        $BOUNDARY = md5(time()); //random boundaryid, is a separator for each param on my post curl function
        $BODY=""; //init my curl body
        $BODY.= '--'.$BOUNDARY. $eol; //start param header
        $BODY .= 'Content-Disposition: form-data; name="sometext"' . $eol . $eol; // last Content with 2 $eol, in this case is only 1 content.
        $BODY .= "Some Data" . $eol;//param data in this case is a simple post data and 1 $eol for the end of the data
        $BODY.= '--'.$BOUNDARY. $eol; // start 2nd param,
        $BODY.= 'Content-Disposition: form-data; name="somefile"; filename="test.txt"'. $eol ; //first Content data for post file, remember you only put 1 when you are going to add more Contents, and 2 on the last, to close the Content Instance
        $BODY.= 'Content-Type: application/octet-stream' . $eol; //Same before row
        $BODY.= 'Content-Transfer-Encoding: base64' . $eol . $eol; // we put the last Content and 2 $eol,
        $BODY.= chunk_split(base64_encode(file_get_contents($file_url))) . $eol; // we write the Base64 File Content and the $eol to finish the data,
        $BODY.= '--'.$BOUNDARY .'--' . $eol. $eol; // we close the param and the post width "--" and 2 $eol at the end of our boundary header.

        $ch = curl_init(); //init curl
        curl_setopt($ch, CURLOPT_HTTPHEADER, array(
                         'X_PARAM_TOKEN : 71e2cb8b-42b7-4bf0-b2e8-53fbd2f578f9' //custom header for my api validation you can get it from $_SERVER["HTTP_X_PARAM_TOKEN"] variable
                         ,"Content-Type: multipart/form-data; boundary=".$BOUNDARY) //setting our mime type for make it work on $_FILE variable
                    );
        curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/1.0 (Windows NT 6.1; WOW64; rv:28.0) Gecko/20100101 Firefox/28.0'); //setting our user agent
        curl_setopt($ch, CURLOPT_URL, "api.endpoint.post"); //setting our api post url
        curl_setopt($ch, CURLOPT_COOKIEJAR, $BOUNDARY.'.txt'); //saving cookies just in case we want
        curl_setopt ($ch, CURLOPT_RETURNTRANSFER, 1); // call return content
        curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, 1); navigate the endpoint
        curl_setopt($ch, CURLOPT_POST, true); //set as post
        curl_setopt($ch, CURLOPT_POSTFIELDS, $BODY); // set our $BODY 

        $response = curl_exec($ch); // start curl navigation

     print_r($response); //print response

} 
```

有了这个，我们应该可以在“api.endpoint.post”上发布以下变量。您可以轻松地使用此脚本进行测试，并且您应该`postFile()`在最后一行收到该函数的此调试。

```
print_r($response); //print response

public function getPostFile()
{

    echo "\n\n_SERVER\n";
    echo "<pre>";
    print_r($_SERVER['HTTP_X_PARAM_TOKEN']);
    echo "/<pre>";
    echo "_POST\n";
    echo "<pre>";
    print_r($_POST['sometext']);
    echo "/<pre>";
    echo "_FILES\n";
    echo "<pre>";
    print_r($_FILEST['somefile']);
    echo "/<pre>";
} 
```

它应该运行良好，它们可能是更好的解决方案，但这确实有效，并且对于理解边界和 multipart/from-data mime 如何在 PHP 和 cURL 库上工作很有帮助。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-11-27T11:13:09.647

如果您要上传 csv 等二进制文件，请使用以下格式上传文件

```
curl -X POST \
    'http://localhost:8080/workers' \
    -H 'authorization: eyJhbGciOiJIUzI1NiIsInR5cCI6ImFjY2VzcyIsInR5cGUiOiJhY2Nlc3MifQ.eyJ1c2VySWQiOjEsImFjY291bnRJZCI6MSwiaWF0IjoxNTExMzMwMzg5LCJleHAiOjE1MTM5MjIzODksImF1ZCI6Imh0dHBzOi8veW91cmRvbWFpbi5jb20iLCJpc3MiOiJmZWF0aGVycyIsInN1YiI6ImFub255bW91cyJ9.HWk7qJ0uK6SEi8qSeeB6-TGslDlZOTpG51U6kVi8nYc' \
    -H 'content-type: application/x-www-form-urlencoded' \
    --data-binary '@/home/limitless/Downloads/iRoute Masters - Workers.csv' 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2020-06-07T14:33:57.880

经过多次尝试，这个命令对我有用：

```
curl -v -F filename=image.jpg -F upload=@image.jpg http://localhost:8080/api/upload 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-10-10T01:26:47.173

导致我来到这里的问题原来是一个基本的用户错误——我没有`@`在文件的路径中包含符号，所以 curl 发布的是文件的路径/名称而不是内容。因此，考虑到我的测试文件的长度，该`Content-Length`值是 8 而不是我期望看到的 479。

当`Content-Length`curl 读取和发布文件时，将自动计算标题。

`curl -i -H "Content-Type: application/xml" --data "@test.xml" -v -X POST https://<url>/<uri/`

... < 内容长度：479 ...

在此处发布此内容以帮助将来的其他新手。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-06-26T11:18:58.183

作为替代方案`curl`，您可以使用[HTTPie](https://github.com/jakubroztocil/httpie#file-upload-forms)，它是一个 CLI，类似于 cURL 的人类工具。

1.  安装说明：[https ://github.com/jakubroztocil/httpie#installation](https://github.com/jakubroztocil/httpie#installation)

2.  然后，运行：

    ```
    http -f POST http://localhost:4040/api/users username=johnsnow photo@images/avatar.jpg

    HTTP/1.1 200 OK
    Access-Control-Expose-Headers: X-Frontend
    Cache-control: no-store
    Connection: keep-alive
    Content-Encoding: gzip
    Content-Length: 89
    Content-Type: text/html; charset=windows-1251
    Date: Tue, 26 Jun 2018 11:11:55 GMT
    Pragma: no-cache
    Server: Apache
    Vary: Accept-Encoding
    X-Frontend: front623311

    ... 
    ```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-10-06T21:28:39.400

以下是如何正确转义上传文件的任意文件名`bash`：

```
#!/bin/bash
set -eu

f="$1"
f=${f//\\/\\\\}
f=${f//\"/\\\"}
f=${f//;/\\;}

curl --silent --form "uploaded=@\"$f\"" "$2" 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-06-10T09:47:54.617

我得到了这个命令`curl -F 'filename=@/home/yourhomedirextory/file.txt' http://yourserver/upload`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-11-15T06:21:59.863

```
cat test.txt 
```

文件 test.txt 内容。

```
curl -v -F "hello=word" -F "file=@test.txt" https://httpbin.org/post

> POST /post HTTP/2
> Host: httpbin.org
> user-agent: curl/7.68.0
> accept: */*
> content-length: 307
> content-type: multipart/form-data; boundary=------------------------78a9f655d8c87a53
> 
* Connection state changed (MAX_CONCURRENT_STREAMS == 128)!
* We are completely uploaded and fine
< HTTP/2 200 
< date: Mon, 15 Nov 2021 06:18:47 GMT
< content-type: application/json
< content-length: 510
< server: gunicorn/19.9.0
< access-control-allow-origin: *
< access-control-allow-credentials: true
< 
{
  "args": {}, 
  "data": "", 
  "files": {
    "file": "file test.txt content.\n"
  }, 
  "form": {
    "hello": "word"
  }, 
  "headers": {
    "Accept": "*/*", 
    "Content-Length": "307", 
    "Content-Type": "multipart/form-data; boundary=------------------------78a9f655d8c87a53", 
    "Host": "httpbin.org", 
    "User-Agent": "curl/7.68.0", 
    "X-Amzn-Trace-Id": "Root=1-6191fbc7-6c68fead194d943d07148860"
  }, 
  "json": null, 
  "origin": "43.129.xx.xxx", 
  "url": "https://httpbin.org/post"
} 
```

# orbeon - 如何冻结 Orbeon Form Runner 中的列和行？

> ID：12667807
> 
> 赞同：0
> 
> 时间：2012-10-01T05:12:59.000
> 
> 标签：orbeon

我有一个包含 500 多个单元格的表格。如何像 Excel 一样冻结顶行和左列？可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T22:10:19.130

这不是 XForms 提供帮助的东西。为此，您需要编写 CSS/HTML。例如，请参阅有关如何[仅冻结 html 表格的顶行](https://stackoverflow.com/questions/8423768/freeze-the-top-row-for-an-html-table-only)的问题的答案。

# android - Android 3g 开关机事件

> ID：12667809
> 
> 赞同：0
> 
> 时间：2012-10-01T05:13:25.200
> 
> 标签：android, status, 3g

3G 开启或关闭时是否有任何广播事件？

现在我正在尝试接收以下事件：

```
<receiver android:name="tw.com.xxx">
  <intent-filter>
    <action android:name="android.net.wifi.STATE_CHANGE" /> <!-- for test -->
    <action android:name="android.net.nsd.STATE_CHANGED" /> <!-- Seems not 3G event -->
  </intent-filter>
</receiver> 
```

似乎它们根本不是 3G 事件。

我应该收到哪个动作来监控 3G 已打开/关闭？

有什么办法知道3G是打开还是关闭？

欢迎任何建议:-)

# php - 贝宝创建定期配置文件，显示下一个付款日期与配置文件开始日期相同

> ID：12667811
> 
> 赞同：5
> 
> 时间：2012-10-01T05:13:42.653
> 
> 标签：php, paypal, paypal-sandbox

创建的定期贝宝配置文件显示下一个付款日期与配置文件开始日期相同我认为它应该显示下个月的下一个付款日期，以下是我发送以创建配置文件的数组格式。

```
 Array
 (
[0] => 
[1] => AMT=9.99
[2] => CREDITCARDTYPE=Visa
[3] => ACCT=4662886735437488
[4] => EXPDATE=092017
[5] => CVV2=121
[6] => FIRSTNAME=Naeem+Bhatti
[7] => LASTNAME=
[8] => STREET=my+address+1
[9] => CITY=westchester
[10] => STATE=Alabama
[11] => ZIP=eq2
[12] => COUNTRYCODE=US
[13] => CURRENCYCODE=USD
[14] => PROFILESTARTDATE=2012-10-01T0%3A0%3A0
[15] => BILLINGPERIOD=Month
[16] => BILLINGFREQUENCY=1
[17] => DESC=Zimmapp Payment
[18] => EMAIL=naeembhatti@gmail.com
[19] => PAYMENTACTION=Sale
[20] => AUTOBILLAMT=AddToNextBilling
[21] => BILLINGTYPE=RecurringPayments
[22] => TOTALBILLINGCYCLES=0
 ) 
```

这就是配置文件的创建方式。

```
 Profile ID I-74V7UV5N4SBT
 Product/service    Zimmapp Payment
 Start date Oct 1, 2012
 End date   Indefinite - continue until canceled
 Next payment date  Oct 1, 2012

 Payment type   Regular Recurring Payment
 Payment cycle  Monthly
 Total cycles   Indefinite
 Cycles remaining   Indefinite
 Amount due per cycle   $9.99 USD Details
 Amount received    $0.00 USD 
```

我想要的是每月向用户收取 9.99 的费用，但下一个付款日期是否相同？请建议。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T06:29:43.510

我找到了解决方案，Paypal 在沙盒帐户一天通过后更改下一个付款日期，当我第二天回来时，所有下一个付款日期都已更正。

# php - 在多个目录中上传文件

> ID：12667820
> 
> 赞同：3
> 
> 时间：2012-10-01T05:14:34.857
> 
> 标签：php

这是一个在所有目录中上传文件的脚本。但是当我运行它时，它只上传一次然后上传失败。这段代码有什么问题？

```
function read_directory($p_pathname)
{
$d = dir ($p_pathname);
$target = $p_pathname; 
if(move_uploaded_file($_FILES['uploaded']['tmp_name'], $target.$_FILES['uploaded']['name'])) 
{
    echo $target. "Done<br>";
} 
else 
{
    echo $target."Sorry<br>";
}
while (($file = $d->read()) !== false)
{
    if (($file != ".") and ($file != ".."))
    {
        $filetype = filetype ("{$d->path}/{$file}");

        if ($filetype == "dir")
        {
            read_directory ("{$d->path}/{$file}");
        }
        else
        {
            // echo "\tFILE: {$d->path}/{$file}\n";
        }
    }
}
$d->close;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T06:12:11.243

使用`copy()`而不是`move_uploaded_file()`. `move_uploaded_file()`完成后删除源文件，因此您不能在同一个文件上多次使用它。`copy()`保留原始文件，因此您可以根据需要多次执行此操作。

当脚本退出时，如果上传的临时文件没有被脚本移动，PHP 会自动删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T05:16:53.353

在你第一次移动文件时......不复制......所以只有下次那个文件不在临时目录中，所以你不能再移动..

# javascript - 动态加载 json 文件 - javascript

> ID：12667822
> 
> 赞同：2
> 
> 时间：2012-10-01T05:14:49.547
> 
> 标签：javascript, json, jquery

请检查：

```
 var scripts = {};

require = function(src){
    var id = Math.round(+new Date()/1000);

    $.ajax({
        url: src + '.json',
        type: 'GET',
        dataType: "json",
        cache: false,
                    async: false,
        success : function(data){
            scripts[id] = data;
        }
    });

    return scripts[id];
} 
```

返回未定义：/有什么问题！？我不知道...

编辑！'async : false' 并运行！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T05:19:37.087

这是因为 $.ajax 在您的调用中是异步的。

```
return scripts[id]; 
```

`success`甚至在触发回调之前执行上述行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T05:20:38.280

这是一个异步调用。返回时脚本为空。

查明原因，

```
window.scripts = {};

require = function(src){
var id = Math.round(+new Date()/1000);

$.ajax({
    url: src + '.json',
    type: 'GET',
    dataType: "json",
    cache: false,
    success : function(data){
        window.scripts[id] = data;
        alert(window.scripts)
    }
});

//return scripts[id]; 
```

}

警报后，查看 window.scripts 的值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T05:20:54.090

它的异步问题.. Ajax 调用被异步调用。

```
return scripts[id]; 
```

在ajax调用return.s之前执行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T05:23:50.930

你的问题是调用是异步的。这意味着您的方法在调用完成之前返回。

而不是返回 scripts[id] 试试这个：

```
require = function(src){
    var id = Math.round(+new Date()/1000);

    $.ajax({
        url: src + '.json',
        type: 'GET',
        dataType: "json",
        cache: false,
        success : function(data){
            scripts[id] = data;
            DoStuff(scripts[id]);
        }
    });
}

DoStuff(data) {
    // do whatever it is you were going to do after the return.
} 
```

# java - 如何在java中创建一个不可继承和静态的类？

> ID：12667825
> 
> 赞同：4
> 
> 时间：2012-10-01T05:15:39.943
> 
> 标签：java

你能帮我如何创建一个不可继承且行为应该是静态的类（意味着我们不应该能够创建它的实例）。我需要这个类来存储常量值。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-01T05:17:02.017

```
public final class MyClass { 
    private MyClass() { }
} 
```

`final`关键字使其不可继承，并且构造构造函数将`private`有助于阻止它被实例化。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-01T05:19:47.407

你可以使用`final`关键字来类不能被继承。但我建议你使用`Enums`. `Enums`不能被继承，每个常量值只存在一个实例。您还可以使用`enums`.

```
public enum DaysOfweek
{
    SUNDAY,MONDAY.....
} 
```

您可以在此处阅读有关枚举的更多信息[Enum Types](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-01T05:16:41.950

为什么不使用具有几个静态和最终变量的接口？

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-01T05:17:49.753

*   对于第一种情况，您可以使用`final`类，因为它们不能被继承..
*   对于您的第二种情况，您可以使用`interface`，它们非常适合存放`Constants`。

但是你**不能**把它们都**放在一起**（因为有一个`interface`不能是`implemented`没有意义的）..
所以，最好的办法是你可以将两者的属性混合在一个类中..你可以有一个`final class`变量`public static final`，因为这就是在接口中创建一个变量`constant`，将服务于`constants`..

```
public final class A {
    public static final int YOUR_CONST = 5;

} 
```

如果您不想创建此类的实例，则可以`private 0-arg constructor`在其中包含一个..

```
public final class A {
    public static final int YOUR_CONST = 5; 

    private A() {}

} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-01T05:21:22.693

将其声明为 final 将不允许其他类扩展它，并将其构造函数设为私有，因此其他人（除了您自己的类）将无法实例化它：

```
public final class MyClass {

    private MyClass() {
        // Private so noone else can instantiate this
    }

} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-01T05:34:08.503

下面是包含常量值的类的示例：

```
public final class Trial // it is the FINAL
{
    private static final int CONSTANT_VALUE = 666;

    private Trial() // it is PRIVATE instead of PUBLIC
    {
    }

    public static int getConstantValue()
    {
       return CONSTANT_VALUE;
    }
} 
```

以下是如何测试上述类的示例：

```
public class Bully //extends Trial ////"extends" WILL NOT COMPILE
{
    public static void main(String[] args)
    {
        //Trial trial = new Trial(); ////"new Trial()" WILL NOT COMPILE

        // The only thing can be done is getting a constant value from "Trial"
        int acquiredValue = Trial.getConstantValue();
        System.out.println(acquiredValue);
    }
} 
```

希望有帮助:))

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-01T05:18:38.157

```
public final class MyClass {
    public static string MY_STRING;
    public static int MY_INT;

    private MyClass() {}
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-01T05:23:52.970

final ：使一个类最终，这意味着这个类不能被进一步继承。static ：如果所有方法都是静态的，则不需要创建此类的实例。并且在行为上应该是静态的。

单例模式：如果您的所有方法都不是静态的并且您不想创建多个实例，那么您可以将构造函数设为私有并在类中保留一个类对象的变量。如果它为空，则创建一次，如果不为空，则始终返回相同的实例。

谢谢

# pdf - 如何处理 Ubuntu 上的 PDF 文件乱码？

> ID：12667829
> 
> 赞同：0
> 
> 时间：2012-10-01T05:16:41.220
> 
> 标签：pdf, ubuntu

我已经搜索过这个方法：

```
sudo apt-get install poppler-data 
```

而且，当我从我的 Ubuntu 服务器下载 PDF 文件时，它的字符是乱码：(

我还没有重启我的服务器，有必要吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:04:06.877

运行命令

```
sudo mv /etc/fonts/conf.d/49-sansserif.conf /etc/fonts/conf.d/49-sansserif.conf.backup 
```

尝试。

或者这个方法：

```
sudo gedit /etc/fonts/conf.d/49-sansserif.conf 
```

将**sans-serif**（在文件第 -4 行的下方）更改为其他并重新启动您的 X。

# c++ - 以位为单位的整数类型大小的元程序

> ID：12667835
> 
> 赞同：2
> 
> 时间：2012-10-01T05:17:16.090
> 
> 标签：c++, metaprogramming

通过解决各种玩具问题，我开始熟悉元编程。这是一个让我难过的问题：如何编写一个元程序，以位为单位提供整数类型参数的大小。特别是，我想在没有[CHAR_BIT](http://www.cplusplus.com/reference/clibrary/climits/)或任何其他幻数的情况下做到这一点。

我从以下非元程序开始：

```
template <typename T>
int sizeInBits(void) {
    T flag = 1;
    int count = 0;
    while (flag != 0) {
        flag <<= 1;
        ++count;
    }
    return count;
} 
```

转换为元程序，我认为它看起来像这样：

```
template<typename T, int COUNT = 0, T FLAG = 1>
struct SizeInBits {
    enum {Result = SizeInBits<T, COUNT + 1, FLAG << 1 >::Result};
};

template<typename T, int COUNT>
struct SizeInBits<T, COUNT, 0> {
    enum {Result = COUNT};
}; 
```

但是，该程序无法编译，因为[显然](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=31584)专注于具有模板参数类型的非类型模板参数是非法的，因此我使用 gcc 4.6 收到以下错误消息：

```
error: type ‘T’ of template argument ‘0’ depends on a template parameter 
```

有任何想法吗？

**编辑**：
我本质上是在寻找与`<climits>`and中的幻数等效的元程序`<limits>`。因此，例如，我想在我的系统上给予，`SizeInBits<char>::Result`并给予.`8``SizeInBits<unsigned>::Result``32`

**关于有符号类型的左移运算符有效性的注意事项**：
在评论中，当溢出发生时，是否`FLAG << 1`为有符号类型定义了一些问题。根据[这篇文章](https://stackoverflow.com/questions/3784996/why-does-left-shift-operation-invoke-undefined-behaviour-when-the-left-side-oper)中引用的 C++03 标准，它被定义并执行上述算法所期望的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T05:47:07.367

非类型模板实参的类型不能依赖于偏特化的模板形参。编译器将不允许以下部分特化：

```
template <class T, T t> class X { };

// Invalid partial specialization
template <class T> class X<T, 25> { }; 
```

为了解决这个问题，您可以使用`int FLAG`：

```
#include <iostream> 

template<typename T, int COUNT = 0, int FLAG = 1>
struct SizeInBits {
    enum { 
        Result = SizeInBits<T, COUNT + 1, FLAG << 1>::Result
    };
};

template<typename T, int COUNT>
struct SizeInBits<T, COUNT, 0> {
    enum {
        Result = COUNT
    };
};

int main() {
   std::cout << SizeInBits<int, 10>::Result << std::endl;
} 
```

但似乎你需要`sizeof(T) * CHAR_BIT`或喜欢这样：

```
#include <iostream> 
#include <climits>

template<typename T>
struct SizeInBits {
    enum { 
        Result = sizeof(T) * CHAR_BIT
    };
};

int main() {
   std::cout << SizeInBits<long>::Result << std::endl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T06:11:15.267

那这个呢：

```
template<typename T, int COUNT = 0, int FLAG = 1>
struct SizeInBits {
    enum {Result = SizeInBits<T, COUNT + 1, static_cast<T>(FLAG) << 1 >::Result};
};

template<typename T, int COUNT>
struct SizeInBits<T, COUNT, 0> {
    enum {Result = COUNT};
}; 
```

它对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T18:08:01.517

这应该可以解决问题：

```
template<typename T, unsigned long long flag = 1uLL>
struct bits_in {
    enum {value = 1 + bits_in<T, (unsigned long long)(T)(flag << 1)>::value};
};

template<typename T>
struct bits_in<T, 0uLL> {
    enum {value = 0};
}; 
```

与[Nicolas 的版本](http://liveworkspace.org/code/4f54513d1bc7a4a3f412ee0650902b37)不同，它更简单，不会产生警告，并且[实际上可以正常工作](http://liveworkspace.org/code/9111c60a8eb9c6c263e66ba267ff3db1)。

# algorithm - 提出用于处理矩阵形式的巨型数据的数据结构（将其视为 Excel 工作表）

> ID：12667836
> 
> 赞同：0
> 
> 时间：2012-10-01T05:17:45.503
> 
> 标签：algorithm, excel, memory, data-structures

问题是想出一个可以与巨大的excel表一起工作的数据结构（显然不适合主存）

想象以下作为 excel 工作表的一部分，其中 e 代表一个空单元格。

```
 A B C D ...

1 3 9 e e ...

2 e e e e ...

3 e e 5 e ...

4 e e e e ...

5 e e 6 e ... 
```

所以数据结构应该允许我将excel表格存储到内存中（我们知道只有excel表格中的值才能放入主内存中）并支持以下操作

`getByColumn(Column col);`- 给出某一列的所有值，比如 C 列的 5,6

`getByRow(Row row);`- 给出某一行的所有值，例如 ROW 1 的 3 和 9 及更多

`insertCell(Column col, Row row, int value);`- 插入或覆盖单元格的值

`getExcelSheet(FileName);`- 以压缩形式给出整个 excel 表（数据结构）

什么是可以考虑的数据结构？我正在准备面试，这不是家庭作业。想从不同的人那里获得一些见解。

只是给个感觉：假设 excel 表是 1 TB，我们有 8GB 的​​内存。1 TB 的 Excel 表只有许多空单元格，但值遍布不同的单元格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:20:44.310

使用 Map/Dictionary 将单元坐标映射到值，为未明确设置的所有内容返回默认值 EMPTY_CELL。

在此基础上实现所需的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T09:03:12.963

有大量关于[稀疏矩阵](http://en.wikipedia.org/wiki/Sparse_matrix)主题的文献，这是一个广泛使用的术语，用于表示您所说的*巨型 Excel 工作表*。文献涵盖了数据结构和用于创建和修改它们的合适算法；Wikipedia 文章为您的研究提供了一个很好的起点。它可能会告诉你足够的信息来准备你的面试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T16:53:07.347

An elaboration of Tass' comment and Mark's answer (for which +1):

You can insert cell values efficiently if you use what wikipedia calls Dictionary Of Keys or DOK (which is essentially Jens' answer), but as you rightly comment, getByRow and getByColumn will be fairly slow.

A better option would be what wikipedia calls Coordinate List or COO: just a set of triples (rowindex, columnindex, value). You'd probably actually store this as three arrays. In order to make insertion fast, keep a set of sorted and unsorted entries, and insert into the unsorted set; whenever the number of unsorted entries goes over a threshold T (which might depend on the total number of nonempty cells K), sort them into the sorted set.

You'll want to sort them all by, say, row index, and keep another array with indices into the arrays to give the version that is sorted by column index.

For getByRow you would take the correct section of the arrays sorted by row index, and additionally search through the unsorted set.

All of this assumes that you *do* have enough memory to store a couple of words for every nonempty entry in the matrix. If not, you'll need to combine this with some sort of external memory approach.

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-01T05:23:35.377

您可以将这个神奇的 Excel 表存储在一个二维数组中，其中包含 null 的空单元格。如果数据不适合，我认为我们不走运

# iphone - 使用 AFHTTPClient 设置非默认 HTTP 标头

> ID：12667838
> 
> 赞同：1
> 
> 时间：2012-10-01T05:18:03.053
> 
> 标签：iphone, ios, afnetworking

我了解如何使用 AFHTTPClient 设置默认标头，但我只想在对某些资源执行请求时设置某些标头。除了构建我自己的 NSURLRequest（带有正确的标头）、创建一个操作并将该操作排入我的 AFHTTPClient 子类之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T00:37:19.413

如果您的网络请求将显着不同，则可能更容易创建多个 AFHTTPClient 子类来处理不同的情况。将您的标题添加到`- (id)initWithBaseURL:(NSURL *)url`.

否则，每当您使用 AFHTTPClient 子类创建 NSURLRequest 时，您都可以使用几种不同的方法设置标头：

`[client setDefaultHeader:@"key" value:@"value"];
[client setAuthorizationHeaderWithUsername:@"username" password:@"password"];
[client setAuthorizationHeaderWithToken:@"token"];`

您可以在创建 NSURLRequest 之前设置这些内容，例如：

`NSURLRequest *request = [client requestWithMethod:@"someMethod" path:@"somePath" parameters:someParameters];`

那么您的标头应该只在该请求中。您还可以使用 清除您的授权标头`- (void)clearAuthorizationHeader`。从 AFNetworking[源代码](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFHTTPClient.m#L401-403)中获取一些信息，您可以从 NSMutableDictionary 中删除任何必要的对象，如果它们没有被删除的话。

# android - 无法在android中的单独文本视图中显示值

> ID：12667840
> 
> 赞同：1
> 
> 时间：2012-10-01T05:18:28.877
> 
> 标签：android, web-services

我正在通过 Android 的肥皂方法使用 Web 服务。我在下一个屏幕上将来自该 Web 服务的值显示到两个单独的文本视图中。

在这里，该 Web 服务返回两个值。但我只能在下一个屏幕的文本视图中显示来自该 Web 服务的一个值。

但我需要在下一个屏幕上的两个单独的文本视图框中显示这两个值......我该怎么做？

建议请..

**注意：-** *该 Web 服务的输入值是**FromDate：** 01/01/2012 和**ToDate：** 07/07/2012*

*请找到我的参考资料*

**Main_WB.java**

```
public class Main_WB extends Activity  
{
EditText edt1,edt2;
//TextView txt_1;
Button btn;

@Override
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    edt1 = (EditText)findViewById(R.id.editText1);
    edt2 = (EditText)findViewById(R.id.editText2);
    btn = (Button)findViewById(R.id.button1);

    btn.setOnClickListener(new View.OnClickListener()
    {
    public void onClick(View v) 
    {
        getTMSChart(edt1.getText().toString(),edt2.getText().toString());
        Intent myint = new Intent(Main_WB.this,ResultActivity.class);
        startActivity(myint);
    }     
    });
 }

private void getTMSChart(String FromDate,String ToDate)
{
// txt_1 = (TextView)findViewById(R.id.textView1);

 System.setProperty("http.keepAlive", "false");        
 SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);        

 envelope.dotNet = true;

 String NAMESPACE = "http://tempuri.org/";
 String URL = "http://54.251.60.177/TMSOrdersService/TMSDetails.asmx";
 String METHOD = "GetTMSChart";

 SoapObject request = new SoapObject(NAMESPACE, METHOD);        
 request.addProperty("FromDate", FromDate);               
 request.addProperty("ToDate", ToDate);

 envelope.setOutputSoapObject(request);
 HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

 try 
 {
    androidHttpTransport.call(NAMESPACE + METHOD, envelope);
    SoapObject result = (SoapObject) envelope.bodyIn;
    SoapObject root =  (SoapObject) ((SoapObject)(result).getProperty(0)).getProperty("NewDataSet");
    int tablesCount = root.getPropertyCount();

    for (int i = 0; i < tablesCount; i++)
    {
       SoapObject table = (SoapObject) root.getProperty(i);
       int propertyCount = table.getPropertyCount();

    //   String[] ord = new String[propertyCount];
    //   String[] fre = new String[propertyCount];

    // int[] fre = new int[propertyCount];
    // int[] margin = new int[propertyCount];

    for (int j = 0; j < propertyCount; j++)
    {   

    String x,y;

    // int orderNo = Integer.parseInt(table.getPropertyAsString("Order_No"));
    // int freightRate = Integer.parseInt(table.getPropertyAsString("Freight_Rate"));
    // int marginPercent = Integer.parseInt(table.getPropertyAsString("Margin_Percent"));

    String orderNo =  table.getPropertyAsString("Order_No");
    String freight = table.getAttributeAsString("Freight_Rate");

    x = orderNo.toString();
    y = freight.toString();
    Intent in = new Intent(getApplicationContext(),ResultActivity.class);

    in.putExtra("gotonextpageX",x);
    in.putExtra("gotonextpageY", y);

    startActivity(in);

    //ord[j] = orderNo;
    //  fre[j] = freightRate;
    // margin[j]= marginPercent;

    //   x = orderNo.toString();
    //   y = fre.toString();

    //   Intent myIntent = new Intent(Main_WB.this, ResultActivity.class);
    //   myIntent.putExtra("gotonextpage", x);
    //   startActivity(myIntent);

    // whatever you do with these values
          }                   
       }
    }   
    catch (Exception e) 
    {
    }   
 } } 
```

**结果活动.java**

```
public class ResultActivity extends Activity 
{
String x,y;
TextView txt1,txt2;

@Override
public void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
setContentView(R.layout.main1);

Bundle extras = getIntent().getExtras();

if(extras != null)
{   
    x = extras.getString("gotonextpageX");
    y = extras.getString("gotonextpageY");
}
else
{   
}
txt1 = (TextView)findViewById(R.id.txtVw);
txt2 = (TextView)findViewById(R.id.txtVw2);

txt1.setText(x);
txt2.setText(y);

}} 
```

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T07:51:00.310

在这里检查一下...

```
public class Main_WB extends Activity {
EditText edt1, edt2;
// TextView txt_1;

Button btn;

ArrayList<String> result;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    edt1 = (EditText) findViewById(R.id.editText1);
    edt2 = (EditText) findViewById(R.id.editText2);
    btn = (Button) findViewById(R.id.button1);

    result = new ArrayList<String>();

    btn.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            result.addAll(getTMSChart(edt1.getText().toString(), edt2.getText().toString()));

            Intent in = new Intent(getApplicationContext(), ResultActivity.class);

            in.putExtra("gotonextpageX", result.get(0));
            in.putExtra("gotonextpageY", result.get(1));

            startActivity(in);
        }
    });
}

private ArrayList<String> getTMSChart(String FromDate, String ToDate) {
    // txt_1 = (TextView)findViewById(R.id.textView1);

    System.setProperty("http.keepAlive", "false");
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

    envelope.dotNet = true;

    String NAMESPACE = "http://tempuri.org/";
    String URL = "http://54.251.60.177/TMSOrdersService/TMSDetails.asmx";
    String METHOD = "GetTMSChart";

    SoapObject request = new SoapObject(NAMESPACE, METHOD);
    request.addProperty("FromDate", FromDate);
    request.addProperty("ToDate", ToDate);

    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    String x = "", y = "";

    ArrayList<String> stringResult = new ArrayList<String>();

    try {
        androidHttpTransport.call(NAMESPACE + METHOD, envelope);
        SoapObject result = (SoapObject) envelope.bodyIn;
        SoapObject root = (SoapObject) ((SoapObject) (result).getProperty(0)).getProperty("NewDataSet");
        int tablesCount = root.getPropertyCount();

        for (int i = 0; i < tablesCount; i++) {
            SoapObject table = (SoapObject) root.getProperty(i);
            int propertyCount = table.getPropertyCount();

            for (int j = 0; j < propertyCount; j++) {

                stringResult.add(table.getPropertyAsString("Order_No").toString());
                stringResult.add(table.getPropertyAsString("Freight_Rate").toString());
            }
        }
    } catch (Exception e) {
    }

    return stringResult;

}
} 
```

并且不要改变你的第二节课，这必须有效。

# php - 如何在同一个函数中多次更改变量的值？

> ID：12667842
> 
> 赞同：-1
> 
> 时间：2012-10-01T05:18:42.873
> 
> 标签：php

我正在尝试`$score`根据其`$total_votes`分数更改变量的值。现在的代码（当 I 时`echo $score`）每次运行该函数时都会产生一个值 1。这让我相信它`$score = $score+1`不能正常工作，代码中是否有我忽略的结构？

```
public function score($datediff,$total_votes){
    $score = 0;
    if ($total_votes < 10)                            { $score = $score+1;}
    if ($total_votes > 10 && $total_votes < 100 )     { $score = $score+1;}
    if ($total_votes > 100 && $total_votes < 1000 )   { $score = $score+1;}
    if ($total_votes > 1000 && $total_votes < 10000 ) { $score = $score+1;}

    echo $score.' ';
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T05:33:25.097

注意：在参考此答案之前，请阅读评论

至于你回复我的评论，我得到的是你想这样加起来..

```
public function score($datediff,$total_votes){
            $score = 0;
            if ($total_votes < 10)                              { $score = $score+1;}
            if ($total_votes > 10 && $total_votes < 100 )       { $score = $score+2;}
            if ($total_votes > 100 && $total_votes < 1000 )     { $score = $score+3;}
            if ($total_votes > 1000 && $total_votes < 10000 )   { $score = $score+4;}

            echo $score.' ';
            } 
```

您需要更改要添加到变量中的值`$score`

比如说你的总票数是 1500，除了最后一个条件之外没有一个条件满足，因此你试图在每个条件中添加的 +1 将不会执行，因为条件不满足，php 跳到其他，最后它添加最后一个条件中的值`$score`，所以如果你想要 +4 应该添加到你的if `$score`> **1000**并且**< 10000**比你应该在最后一个条件中添加 +4 到你的变量`$total_votes`****`$score`****

 ***** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T05:25:41.253

你的条件是相互排斥的。你不能有

```
$total_votes < 10 
```

同时

```
$total_votes > 10 && $total_votes < 100 
```

因为变量不能同时 < 10 和 > 10。因此 $score 不能多次增加。您正在寻找的可能是

```
public function score($datediff,$total_votes){
    $score = 1;

    if ($total_votes > 10)
        $score++;
    if ($total_votes > 100)
        $score++;
    if ($total_votes > 1000)
        $score++;
    if ($total_votes > 10000)
        $score++;
} 
```

请注意，函数实际上计算以 10 为底的对数的粗略版本：

```
$score = floor(log10($total_votes)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T05:21:56.397

你的`if`陈述是相互排斥的。当一个条件为真时，其他条件为假。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T05:22:52.440

尝试使用`STATIC`关键字..

```
public function score($datediff,$total_votes){
            static $score = 0;
            if ($total_votes < 10)                              { $score = $score+1;}
            if ($total_votes > 10 && $total_votes < 100 )       { $score = $score+1;}
            if ($total_votes > 100 && $total_votes < 1000 )     { $score = $score+1;}
            if ($total_votes > 1000 && $total_votes < 10000 )   { $score = $score+1;}

            echo $score.' ';
            } 
```

`$score`它只会在第一次调用函数时初始化。

还要看看[**变量范围**](http://php.net/manual/en/language.variables.scope.php)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-01T05:38:14.580

```
public function score($total_votes){
    $score = 0;

    if ($total_votes < 10)     { $score = $score+1;}
    if ($total_votes < 100 )   { $score = $score+1;}
    if ($total_votes < 1000 )  { $score = $score+1;}
    if ($total_votes < 10000 ) { $score = $score+1;}

    echo $score.' ';
} 
```

`$datediff`是无关的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-01T05:31:01.880

首先，您的变量 $score 必须是全局变量或会话变量。

其次，您应该使用 else if 语句，以便它仅适用于一种条件。

根据您的编码，您每次调用此函数时都设置 $score = 0 因此在函数外部定义它并更改值并查看您的答案

**注意：**不要在函数中重置这个

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-01T05:54:23.787

```
public function score($datediff,$total_votes){
    $score = 0;
    if ($total_votes > 0)       { $score = $score+1;}
    if ($total_votes > 10)      { $score = $score+1;}
    if ($total_votes > 100)     { $score = $score+1;}
    if ($total_votes > 1000 && $total_votes <= 10000 ){
        $score = $score+1;
    }

    echo $score.' ';
} 
```****

# php - 根据页面中用户的IP地址自动显示用户所在城市发布的内容

> ID：12667843
> 
> 赞同：1
> 
> 时间：2012-10-01T05:18:53.313
> 
> 标签：php, drupal

它应该根据用户浏览网站的城市显示自动发布的内容。我正在尝试使用 SmartIP。我正在尝试使用以下代码：

```
<?php
if ($_SESSION['smart_ip']['location']['country_code'] == 'IN'):
?> 
```

印度内容特定

```
<?php
elseif ($_SESSION['smart_ip']['location']['country_code'] == 'UY'):
?> 
```

乌拉圭 HTML 内容特定

```
<?php
....
else:
?> 
```

回退默认内容。

```
<?php
 ...
endif;
?> 
```

我尝试使用国家代码作为“IN”。但它不显示内容。我正在尝试将代码更改为

```
<?php
if ($_SESSION['smart_ip']['location']['country_code']['state_code'][city_code] == 'BAN'):
?> 
```

我的疑问是：

如果用户从班加罗尔或德里等城市浏览，我如何自动显示在班加罗尔发布的内容...？我在哪里可以添加这些国家、州、城市代码？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-01T05:49:13.143

您可以尝试实现一个“字典函数”：您使用您提到的地理代码调用它，它会返回您想要嵌入到 html 模板中的本地化内容。在后台，它查阅“目录”，通常是这样的数组结构：

```
$LCat = array (
  'India' => array (
    'Assam' => array (
      'Dispur' => "some Dispur specific content",
      'Guwahati' => "some Guwahati specific content",
      ... some other cities in that state ...
    ),
    'Orissa' => array (
      'Bhubaneswar' => "some Bhubaneswar specific content",
      ... some other cities in that state ...
    ),
    ... some other states in that country ...
  ),
  ... some other countries ...
); 
```

该函数在目录中查找匹配条目（例如，通过使用 is_set() 函数）：

```
if ( is_set($LCat[$_SESSION['smart_ip']['location']['country_code']]) ) {
  if ( is_set($LCat[$_SESSION['smart_ip']['location']['country_code']['state_code']]) )
    if ( is_set($LCat[$_SESSION['smart_ip']['location']['country_code']['state_code']['city_code']]) ) ) {
      $Location=$LCat[$_SESSION['smart_ip']['location']['country_code']['state_code']]['city_code']];
    } else {
      $Location=$LCat[$_SESSION['smart_ip']['location']['country_code']['state_code']]
  } else {
    $Location=$LCat[$_SESSION['smart_ip']['location']['country_code']]
} else {
  $Location="location specific content for 'Nirwana'";
} 
```

所以结构是：州>国家>城市，或者你需要的任何结构。这个想法是：尝试使用目录中最具体的匹配。如果它不存在，则使用不太具体的条目，依此类推。这样，您始终可以在结构中编写安全的后备代码，而不必为脚本可能偶然发现的每个位置编写后备代码。

显然，为匹配存储的内容可以是任何内容，我只选择了简单的字符串来说明这一点。此外，该结构可以以不同的方式存储，例如在运行时检查的文件系统层次结构中，每个国家的文件夹，每个州的文件夹，每个城市的文件等。如果您想提高性能并提供一种简单的方法来管理目录数据，那么您应该将该目录存储在您在运行时查询的数据库中。不过，这个想法保持不变。

请注意，我尚未测试该代码，但它应该为您提供可能的方法的建议。

# binary - 二进制减法：2 的补码和进位

> ID：12667846
> 
> 赞同：1
> 
> 时间：2012-10-01T05:19:30.567
> 
> 标签：binary, addition, operation

我想用二进制表示的数字 1010 1101 减去 1。我写出 1 的两个 s 补码：1111 1111，然后与第一个数字相加：

按位加法，带进位，得到 1 1010 1100：由于进位，我最终得到 1 位。这是如何在二进制加法中处理的？

还有，我是不是在用补码做加法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T05:24:54.043

这是一种完全有效且常用的减法方法，但“进位”标志与正常加法的含义不同。由于不是减去`n`，而是添加一个大数，因此需要以不同方式处理进位标志。这个额外的`1`通常表示按位加法的进位，而这里它表示一切正常。如果那里没有进位，这实际上意味着结果应该是负数 -`a - b`被转换为`a + 2^n - b`小于`2^n`，意思是`b > a`等等`a - b < 0`。无论哪种方式，都没有关系，因为您的结果将在结果的 8 位中正确显示。

# android - HTML5 视频 - Javascript play() 函数在果冻豆中不起作用

> ID：12667847
> 
> 赞同：2
> 
> 时间：2012-10-01T05:19:31.263
> 
> 标签：android, html

在 Jellybean 中，HTML5 视频中的自动播放不起作用。Javascript play() 函数在 jellybean 中不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-07T08:44:24.933

这是设计使然。play() 函数仅在源自用户交互时才有效。这最初是由 iOS 实现的，旨在防止手机在有限的、有时是昂贵的带宽上自动播放。

想象一下在国外漫游，如果您的手机会自动开始下载视频会花费多少。

# android - 安装包

> ID：12667848
> 
> 赞同：0
> 
> 时间：2012-10-01T05:19:35.003
> 
> 标签：android

当我尝试安装软件包时，我得到的只是：（`File not found: C:\Program Files\Android\android-sdk\temp\android-16_r02.zip`访问被拒绝）

最后`Nothing was installed`会闪烁。最新版本的`JDK`in也安装在我的电脑上。

我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:42:16.590

以管理员身份运行，它可能会工作......我遇到过类似的问题。让您的系统以管理员身份运行以安装文件。它的权限问题就是您拒绝访问的原因

# ios - CFStreamCreatePairWithSocketToHost 被 ios6 模拟器破坏？

> ID：12667852
> 
> 赞同：8
> 
> 时间：2012-10-01T05:19:59.957
> 
> 标签：ios

我注意到在我的程序中使用 CFStreamCreatePairWithSocketToHost 时出现随机 EXC_BADACCESS 错误，但仅限于 ios6 - 当使用 ios5 模拟器（甚至在带有 xcode4.5 的 ios6sdk 内部）时，一切正常。我最终将问题提取到随后的一个小测试程序中 - 如果你启用了保护 malloc，它会立即爆炸（参见下面的崩溃）。这也发生在弧形和非弧形。

```
@interface PHAppDelegate : UIResponder <UIApplicationDelegate, NSStreamDelegate>
{
    NSOutputStream*     mOutputStream;
    NSInputStream*      mInputStream;
}

@implementation PHAppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    NSString* testAddress = @"192.168.1.0";
    [self openWithHost:testAddress port:444];
    return YES;
}

- (void)openWithHost:(NSString*)host port:(int)port
{
    CFReadStreamRef readStream;
    CFWriteStreamRef writeStream;

    CFStreamCreatePairWithSocketToHost(kCFAllocatorDefault,
                                       (CFStringRef)host, /*ip_addr*/
                                       port,
                                       &readStream,
                                       &writeStream);

    mInputStream = (NSInputStream *)readStream;
    mOutputStream = (NSOutputStream *)writeStream;

    if (mInputStream == nil)
    {
        NSLog(@"couldn't create the inputStream using CFStreamCreatePairWithSocketsToHost()");
        return;
    }

    if (mOutputStream == nil)
    {
        NSLog(@"couldn't create the outputstream using CFStreamCreatePairWithSocketsToHost()");
        return;
    }

    [mInputStream setDelegate:self];
    [mOutputStream setDelegate:self];

    [mInputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [mOutputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

    [mInputStream open];
    [mOutputStream open];
}

#pragma mark NSStream delegate methods

- (void)stream:(NSStream *)aStream handleEvent:(NSStreamEvent)eventCode
{
    NSLog(@"stream-handleEvent");
}

@end 
```

在 com.apple.networking.connection 线程中崩溃：

```
#0  0x04b35140 in tcp_connection_destination_prepare_complete ()
#1  0x04b34fee in tcp_connection_destination_start ()
#2  0x04b34c2b in tcp_connection_start_next_destination ()
#3  0x04b33c70 in tcp_connection_handle_reachability_changed ()
#4  0x04b30a95 in __tcp_connection_start_block_invoke_0 ()
#5  0x049fa53f in _dispatch_call_block_and_release ()
#6  0x04a0c014 in _dispatch_client_callout ()
#7  0x049fc418 in _dispatch_queue_drain ()
#8  0x049fc2a6 in _dispatch_queue_invoke ()
#9  0x049fd280 in _dispatch_root_queue_drain ()
#10 0x049fd450 in _dispatch_worker_thread2 ()
#11 0x94e7de12 in _pthread_wqthread ()
#12 0x94e65cca in start_wqthread ()

EXC_BADACCESS @ address 0x04b35140
0x04b3513b  <+0072>  call   0x4b332de <tcp_connection_destination_list_remove>
0x04b35140  <+0077>  mov    0x28(%esi),%eax
0x04b35143  <+0080>  test   %eax,%eax 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-09T05:45:37.820

我在 iOS 5.x 和 iOS 6.x 中有非常相似的代码。唯一的区别是我在调用之前初始化and并`CFReadStreamRef`传递分配器。为方便起见，我通常还将代码作为类别添加到 NSStream 上。所以，代码看起来像这样：`CFWriteStreamRef``NULL``CFStreamCreatePairWithSocketToHost``NULL`

```
+ (void)createStreamsToHostNamed:(NSString*)hostName port:(NSInteger)port inputStream:(NSInputStream* __autoreleasing *)inputStream outputStream:(NSOutputStream* __autoreleasing *)outputStream {
    CFReadStreamRef readStream = NULL;
    CFWriteStreamRef writeStream = NULL;

    // Create a pair of of streams for a socket to the host specified
    CFStreamCreatePairWithSocketToHost(NULL, (__bridge CFStringRef)hostName, port, &readStream, &writeStream);

    // Assign the output parameters
    *inputStream  = (__bridge_transfer NSInputStream*)readStream;
    *outputStream = (__bridge_transfer NSOutputStream*)writeStream;
} 
```

您可以使用如下代码调用该方法：

```
@interface SomeClass : NSObject <NSStreamDelegate>
@end

@implementation SomeClass {
    NSInputStream* _inputStream;
    NSOutputStream* _outputStream;
}

- (void)_setupMethod {
    __autoreleasing NSInputStream* autoreleasingInputStream = nil;
    __autoreleasing NSOutputStream* autoreleasingOutputStream = nil;
    [NSStream createStreamsToHostNamed:kHostConstant port:kPortConstant inputStream:&autoreleasingInputStream outputStream:&autoreleasingOutputStream];

    if(autoreleasingInputStream != nil && autoreleasingOutputStream != nil) {
        _inputStream = autoreleasingInputStream;
        [_inputStream setDelegate:self];
        [_inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        _outputStream = autoreleasingOutputStream;
        [_outputStream setDelegate:self];
        [_outputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];

        [_inputStream open];
        [_outputStream open];
    }
}

// NSStreamDelegate methods ...

@end 
```

# asp.net - 即使使用 IE，验证器也无法在任何浏览器中工作

> ID：12667853
> 
> 赞同：0
> 
> 时间：2012-10-01T05:20:30.040
> 
> 标签：asp.net, visual-studio-2008, c#-4.0

我为用户创建文本框以选择日期并设置 requiredfieldvalidator。

```
<asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
    ControlToValidate="StartDate" ErrorMessage="RequiredFieldValidator" 
    ValidationGroup="Search" SetFocusOnError="True" Display="Dynamic" 
    ToolTip="*Fill START Date!">*Fill START Date!</asp:RequiredFieldValidator>
<asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" 
    ControlToValidate="EndDate" ErrorMessage="RequiredFieldValidator" 
    ValidationGroup="Search" Display="Dynamic" ToolTip="*Fill END Date!">*Fill END  Date!</asp:RequiredFieldValidator>

<asp:Label ID="DateFilter" runat="server" 
    Text="Filter by Date from :" style="font-family: 'Arial Narrow'" 
    AssociatedControlID="StartDate"></asp:Label>
<asp:TextBox ID="StartDate" runat="server" ></asp:TextBox>
<a href="javascript:;" onclick="window.open('CalendarPopup.aspx?textbox=StartDate','cal','width=220,height=205,left=270,top=180')"><img id="Img1" 
    src="calendar-icon.gif"  border="0" runat="server" alt="calendar" 
    style="height: 23px" align="bottom"></a>

 <asp:Label ID="Label4" runat="server" Text="to" Font-Names="Arial Narrow" 
     AssociatedControlID="EndDate"></asp:Label>
 <asp:TextBox ID="EndDate" runat="server"></asp:TextBox>
 <a href="javascript:;" onclick="window.open('CalendarPopup.aspx?textbox=EndDate','cal','width=220,height=205,left=270,top=180')"><img id="Img2" 
    src="calendar-icon.gif" border="0" runat="server" alt="calendar" 
    style="height: 23px" dir="ltr"></a>&nbsp;
<asp:Button 
    ID="Search" runat="server" BackColor="Black" Font-Names="Arial Narrow" 
    ForeColor="White" Text="SEARCH" Width="73px" onclick="Search_Click" /> 
```

然后，我需要使用比较验证器比较第一个日期必须小于第二个日期。

```
<asp:CompareValidator ID="CompareValidator1" runat="server" 
    ControlToCompare="EndDate" ControlToValidate="StartDate" 
    ErrorMessage="CompareValidator" Operator="GreaterThanEqual" Type="Date" 
    ValidationGroup="Search" Display="Dynamic" SetFocusOnError="True">*First date must be less than or equal to Second 
date!</asp:CompareValidator> 
```

两个验证器都不起作用。任何人请帮忙。谢谢..:) 西蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T05:45:00.307

更新，我以前没有看到它，但您需要让按钮与您的验证器属于同一验证组。试试这个：

```
<asp:Button ValidationGroup="Search"
    ID="Search" runat="server" BackColor="Black" Font-Names="Arial Narrow" 
    ForeColor="White" Text="SEARCH" Width="73px" onclick="Search_Click" /> 
```

哦，我很确定您需要我之前提到的其他逻辑运算符，因为 ControlToValidate 是根据 ControlToCompare 评估的主要值，因此 ControlToValidate 是 LessThan ControlToCompare = StartDate 是 LessThan EndDate：

```
<asp:CompareValidator ID="CompareValidator1" runat="server"
    ControlToCompare="EndDate" ControlToValidate="StartDate" 
    ErrorMessage="CompareValidator" Operator="LessThan" Type="Date" 
    ValidationGroup="Search" Display="Dynamic" SetFocusOnError="True">*First date must be less than or equal to Second date!</asp:CompareValidator> 
```

由于您遇到问题，我已经完整地检查了代码，并且它完全可以正常工作。复制并粘贴这个：

```
<asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
ControlToValidate="StartDate" ErrorMessage="RequiredFieldValidator" 
ValidationGroup="Search" SetFocusOnError="True" Display="Dynamic" 
ToolTip="*Fill START Date!">*Fill START Date!</asp:RequiredFieldValidator>
<asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" 
ControlToValidate="EndDate" ErrorMessage="*Fill END Date!" 
ValidationGroup="Search" Display="Dynamic" ToolTip="*Fill END Date!" />

<asp:Label ID="DateFilter" runat="server" 
Text="Filter by Date from :" style="font-family: 'Arial Narrow'" 
AssociatedControlID="StartDate"></asp:Label>
<asp:TextBox ID="StartDate" runat="server" ></asp:TextBox>
<a href="javascript:;" onclick="window.open('CalendarPopup.aspx?textbox=StartDate','cal','width=220,height=205,left=270,top=180')"><img id="Img1" 
src="calendar-icon.gif"  border="0" runat="server" alt="calendar" 
style="height: 23px" align="bottom"></a>

<asp:Label ID="Label4" runat="server" Text="to" Font-Names="Arial Narrow" 
AssociatedControlID="EndDate"></asp:Label>
<asp:TextBox ID="EndDate" runat="server"></asp:TextBox>
<a href="javascript:;" onclick="window.open('CalendarPopup.aspx?textbox=EndDate','cal','width=220,height=205,left=270,top=180')"><img id="Img2" src="calendar-icon.gif" border="0" runat="server" alt="calendar" style="height: 23px" dir="ltr"></a>&nbsp;
<asp:Button ValidationGroup="Search"
ID="Search" runat="server" BackColor="Black" Font-Names="Arial Narrow" 
ForeColor="White" Text="SEARCH" Width="73px" onclick="Search_Click" />

<asp:CompareValidator ID="CompareValidator1" runat="server"
ControlToCompare="EndDate" ControlToValidate="StartDate" 
ErrorMessage="CompareValidator" Operator="LessThan" Type="Date" 
ValidationGroup="Search" Display="Dynamic" SetFocusOnError="True">*First date must be less than or equal to Second date!</asp:CompareValidator> 
```

~

# extjs - 如何单击使用 Selenium 在 ExtJS 中实现的文件字段按钮？

> ID：12667858
> 
> 赞同：2
> 
> 时间：2012-10-01T05:20:54.387
> 
> 标签：extjs, selenium-ide, filefield

我正在测试一个在 ExtJs 中实现的应用程序。我需要单击一个实现为文件字段的按钮来上传文件。我无法使用 Selenium IDE 单击按钮。事实上，我在类似的按钮（已实现为文件字段）上尝试了相同的操作。

有人可以指导我如何使用 Selenium IDE 做到这一点吗？

以下是按钮的实现方式：

```
<td id="filefield-1262-browseButtonWrap" style="width: 92px;">
<div id="filefield-1262-buttonEl" class="x-btn x-form-file-btn x-btn-default-small x-                noicon x-btn-noicon x-btn-default-small-noicon" style="border-width:1px 1px 1px 1px;">
<em id="filefield-1262-buttonEl-btnWrap">
<button id="filefield-1262-buttonEl-btnEl" class="x-btn-center" autocomplete="off"   role="button" hidefocus="true" type="button">
**<span id="filefield-1262-buttonEl-btnInnerEl" class="x-btn-inner" style="background-color: transparent;">Import Local File</span>**
<span id="filefield-1262-buttonEl-btnIconEl" class="x-btn-icon "></span>
</button>
</em>
<input id="filefield-1262-fileInputEl" class="x-form-file-input" type="file" size="1" name="ipListFile">
</div>
</td> 
```

谢谢，哈帕尔

# c - 为什么尽管预增量在此代码中有效，但后增量运算符不起作用？

> ID：12667859
> 
> 赞同：0
> 
> 时间：2012-10-01T05:21:04.340
> 
> 标签：c, stack-overflow, post-increment, pre-increment

我对编程真的很陌生（我是一名电子和通信工程师），我无法弄清楚为什么一个程序有效而另一个程序无效。

在进一步学习之前，我想对递归函数有一个很好的理解。我将不胜感激有关此的任何帮助。

我知道 x++ 和 --x 之间的区别。但是在这个程序的上下文中，我认为这两个程序应该以相同的方式运行。但他们没有。

```
void rec(int x)
{
    if(x>0)
        rec(x--);
    printf("%d",x);
}

int main()
{
    rec(4);
    _getch();

} /*This doesn't work. And shows a stackoverflow */

void rec(int x)
{
    if(x>0)
        rec(--x);
    printf("%d",x);
}

int main()
{
    rec(4);
    _getch();

} /*This gives a proper output as expected*/ 
/*The output is 00123*/ 
```

谢谢！

**PS：**如果这是一个微不足道或愚蠢的问题，请原谅我，但我被困在这个问题上，我认为这是我可以寻求帮助的最佳地方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T05:23:25.993

```
void rec(int x) {
    if (x>0)
        rec(x--);
    printf("%d",x);
} 
```

这将永远递归（或至少直到你用尽堆栈空间）。`x--`表示使用的*当前*值`x`然后*递减*它。

换句话说，让我们`rec`使用参数 20 进行调用。它大于零，因此它将依次`rec`以当前值 20 再次调用，*然后*递减`x`（但在调用返回*后有效。*

因此，你永远`rec`用 20 的值跟注，这就是为什么你会耗尽你的筹码。

如果您更改`x--`为，它会在将其传递给函数*之前*`--x`递减，因此它将变为，此时它将运行备份打印所有这些值的堆栈。`x` *`20, 19, 18, ... 1, 0`*

 *如果你`printf ("before: %d\n", x)`在语句之前放了一个`if`，你会看到很多`20`行输出到屏幕上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T05:23:28.357

x-- 使用 x 的旧值（减量前）调用函数。因此，您将获得它以相同值调用自身的无限递归。--x 使用 x 的新（递减）值调用函数，因此它最终达到 x > 0 条件。

调查此问题的另一种方法是执行以下操作：

```
int a, b;
a = b = 1;

printf("--a: %d b--: %d\n", --a, b--); // Output is --a: 0 b--: 1 
```*

# database - 如何在 Scala、Lift 中使用数据库？

> ID：12667860
> 
> 赞同：-2
> 
> 时间：2012-10-01T05:21:03.893
> 
> 标签：database, scala, lift

我能够成功地从我的表单中读取数据并使用 println 在控制台中显示它们，我需要将它们添加到数据库中，目前我正在使用预定义数据库进行授权，请帮助我将表单值添加到数据库。到目前为止，我已经创建了以下类。

```
 object Form extends Form with LongKeyedMetaMapper[Form] {
  override def fieldOrder = List(name,age)
 }

 class Form extends LongKeyedMapper[Form] with IdPK {
  def getSingleton = Form
  object name extends MappedString(this,10)
  object age extends MappedString(this,5)
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T07:59:32.537

在 Lift wiki 站点上有一个设置 Lift Mapper 的示例。见[https://www.assembla.com/spaces/liftweb/wiki/Mapper](https://www.assembla.com/spaces/liftweb/wiki/Mapper)

# css - 将我的页脚宽度设置为 100% 会显示一个滚动条

> ID：12667862
> 
> 赞同：2
> 
> 时间：2012-10-01T05:21:22.723
> 
> 标签：css

虽然我将页脚的宽度设置为 100%，但它在宽度方面延伸到 100% 以上，并且有一个滚动条。任何想法为什么？我知道问题是宽度，因为当我删除 100% 时，它不会显示滚动条。该页面被分解为 body>wrapper>footer 这是我的代码：

```
 #footer {
  margin-top: 30px;
  color: white !important;
  padding-bottom: 15px;
  background: black;
  text-align: center;
  padding: 20px;
  height: 40px;
  min-width: 1000px;
  width:100%;
  position:absolute;
  bottom:0;
} 
```

还有body css：

```
body {
  font: normal 12pt Georgia, serif;
  color: #111;
  background: #990000;
  margin: 0 auto;
  text-align: center;
  background-position: 50% 50%;
  min-height: 100%;

  margin:0;
    padding:0;
    height:100%;
} 
```

和包装器css：

```
#wrapper {
    min-height:100%;
    position:relative;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T05:24:37.067

您在页脚的 css 中设置了填充。这增加了宽度并使其大于 100%。这就是您看到滚动条的原因。

用以下几行替换填充。

```
padding-top:20px;
padding-bottom:20px; 
```

此外，通过将页脚 div 的最小宽度设置为 1000 像素，您将在浏览器屏幕中获得小于 1000 像素的滚动条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T05:25:30.657

许多浏览器在 BODY 元素周围有一个默认边距，这会增加宽度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T05:24:14.387

这很可能是由于默认[盒子模型](https://developer.mozilla.org/en-US/docs/CSS/box_model)在 html 页面中的工作方式：在将内容的宽度设置为 100% 后，添加边框、边距和填充，最终宽度增加超过 100%。

**对于现代浏览器：万岁盒子大小！**

1.  使用您的原始代码查看[此 jsfiddle 。](http://jsfiddle.net/NS2bh/)
2.  请参阅[此较新版本](http://jsfiddle.net/NS2bh/2/)，并将[**框大小**](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)设置为`border-box`（仅适用于较新的浏览器）。这个版本不显示水平滚动条（我把最小宽度做得小了很多，否则它会抛出 jsfiddle 中的示例）。

**对于旧版浏览器**

如果你想为旧版浏览器解决这个问题，你必须对 CSS 中的填充做一些事情。将其从页脚中删除，并在其中放置一个“页脚内容” div，其边距等于您的旧填充。例如：

```
#footer { 
    /* padding: 20px; removed! */
}
#footer-content { 
    margin: 20px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T05:29:28.890

这是由于填充而发生的。请参阅此处的问题[说明](http://jsfiddle.net/jyVKZ/)。

**当您使用填充时，大小将分别添加到总高度和宽度中。**

删除填充将解决您的问题。[^(演示)](http://jsfiddle.net/jyVKZ/1/)

```
 #footer {
  margin-top: 30px;
  color: white !important;
  background: black;
  text-align: center;
  height: 40px;
  min-width: 1000px;
  width:100%;
  position:absolute;
  bottom:0;
} 
```

另一个好的解决方案是让浏览器以不同的方式对待您的元素。通过使用`box-sizing`属性。

```
 #footer {
  /* Add box-sizing */
  -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
  -moz-box-sizing: border-box;    /* Firefox, other Gecko */
  box-sizing: border-box;         /* Opera/IE 8+ */
  margin-top: 30px;
  color: white !important;
  padding-bottom: 15px;
  background: black;
  text-align: center;
  padding: 20px;
  height: 40px;
  min-width: 1000px;
  width:100%;
  position:absolute;
  bottom:0;
} 
```

[**演示**](http://jsfiddle.net/jyVKZ/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-14T18:07:20.940

只需在开始时为所有元素添加 0 填充、0 边框和 0 边距。

```
* {
padding: 0;
border: 0;
margin: 0;
} 
```

# ios-simulator - iOS6设备和模拟器上自定义UIToolbar作为inputAccessoryView的不同外观

> ID：12667863
> 
> 赞同：2
> 
> 时间：2012-10-01T05:21:32.787
> 
> 标签：ios-simulator, ios6, uitoolbar

我试图在我的 iOS6 通用应用程序中使用透明的 UIToolbar 作为 UITextField 的 inputAccessoryView。

在 iOS6 iphone 上运行时，工具栏看起来是透明的，但有一个顶部边框。而这只发生在 iOS6 iphone 上。不在 iOS6 ipad 设备上，不在 iOS6 ipad 模拟器上，甚至在 iOS6 **iPhone 模拟器**上。这是设备和模拟器的屏幕截图...

![iOS6设备截图](../Images/44495877970608492849cec3f47ea6d7.png)

![iOS6 模拟器截图](../Images/aff5a6fa0e0c5fdc9372987e654f9821.png)

这是我的代码...

```
// Transparent Toolbar.m

@implementation TransparentToolbar
- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();
    [[UIColor clearColor] setFill];
    CGContextFillRect(context, self.bounds);
}
@end

// ViewController.m

#import "ViewController.h"
#import "TransparentToolbar.h"

@interface ViewController () {
    TransparentToolbar *_accessoryView;
}
@end

@implementation ViewController
@synthesize textField;
- (TransparentToolbar *)_accessoryView
{
    if (!_accessoryView) {
        _accessoryView = [[TransparentToolbar alloc] init];
        [_accessoryView sizeToFit];
        [_accessoryView setTranslucent:YES];

        UIBarButtonItem *flexButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];

        UIButton *resignKeyboardButton = [UIButton buttonWithType:UIButtonTypeInfoDark];
        [resignKeyboardButton setFrame:CGRectMake(0, 0, 44, 44)];
        [resignKeyboardButton setTitle:@"DONE" forState:UIControlStateNormal];
        [resignKeyboardButton addTarget:self action:@selector(didTapResignKeyboardButton:) forControlEvents:UIControlEventTouchUpInside];

        UIBarButtonItem *resignKeyboardBarButton =[[UIBarButtonItem alloc] initWithCustomView:resignKeyboardButton];

        NSArray *itemsArray = [NSArray arrayWithObjects:flexButton, resignKeyboardBarButton, nil];
        [_accessoryView setItems:itemsArray];
    }

    return _accessoryView;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [textField setInputAccessoryView:[self _accessoryView]];
}

- (void)didTapResignKeyboardButton:(UIBarButtonItem *)aButtonItem
{
    [textField resignFirstResponder];
}
@end 
```

这里可能出了什么问题？

# php - Codeigniter 设置安装文件夹外的上传路径

> ID：12667864
> 
> 赞同：1
> 
> 时间：2012-10-01T05:21:47.990
> 
> 标签：php, codeigniter, upload

每当我回显时，我上传文件时遇到问题

```
$this->upload->display_errors(); 
```

这给出了错误`The upload path does not appear to be valid.`

我的目录结构

```
- main
   - CI_Installation
   - uploads
     - brochures 
```

我正在做的测试是在我的本地机器上。在生产服务器中，两个内部文件夹将位于根文件夹而不是`main`文件夹中。

我想将文件上传到`uploads`文件夹，即 CI 安装文件夹之外。我已经尝试设置路径 `./uploads/brochures/` `../../uploads/brochures/`和所有其他可能的路径，但仍然出现该错误。

**编辑**

我知道我的路径有问题，文件夹权限会产生另一个错误。该错误明确表示`The upload path does not appear to be valid.`

下面是代码片段，发布整个控制器是不可行的，因为它有几行代码，可能难以阅读。

```
 $config['upload_path'] = './uploads/brochures/';
                $config['allowed_types'] = 'gif|jpg|png|pdf|docx|doc';
                $config['max_size'] = '10000';
                $config["remove_spaces"]=TRUE;
                $config['encrypt_name']  = TRUE;
                $this->load->library('upload',$config);
                $this->upload->initialize($config);
                $uploaded = $this->upload->do_upload("b_path");
                $data = array('upload_data' => $this->upload->data());

                echo "ERRORS = ".$this->upload->display_errors(); 
```

有人可以在这里帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:14:32.720

如果您在本地主机上，那么您应该将上传路径更改为此

```
c:\wamp\www\ci_installation\upload\ 
```

在服务器上，如果您按照您的方式设置路径，它将正常工作。如果给了你 wamp 安装的路径，如果你正在使用其他东西，那么根据你的安装目录给出路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T06:43:44.740

我自己解决了这个问题。我将常数设置`UPLOAD_PATH`为`constants.php`

```
define('UPLOAD_PATH',dirname(dirname(dirname(dirname(__FILE__)))).DIRECTORY_SEPARATOR.'uploads/'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-26T17:36:33.270

您可以使用 FCPATH 常量，然后使用 '../' 向上移动一个目录，直到到达所需的文件夹。

# django - Hadoop和Django，有可能吗？

> ID：12667868
> 
> 赞同：24
> 
> 时间：2012-10-01T05:22:09.720
> 
> 标签：django, hadoop, rdbms

据我了解，Hadoop 是一个分布式存储系统。但是我真正不明白的是，我们可以用 Hadoop 替换普通的 RDBMS（MySQL、Postgresql、Oracle）吗？或者 Hadoop 只是另一种类型的文件系统，我们可以在其上运行 RDBMS？

另外，Django 可以与 Hadoop 集成吗？通常，Web 框架（ASP.NET、PHP、Java（JSP、JSF 等））如何与 Hadoop 集成？

我对 Hadoop 与 RDBMS 有点混淆，我将不胜感激。（对不起，我多次阅读文档，但可能由于我缺乏英语知识，我发现文档大部分时间有点混乱）

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-01T10:52:35.473

# 什么是 Hadoop？

想象一下下面的挑战：你有很多数据，我的意思是至少有 TB。您想要转换这些数据或提取一些信息并将其处理成一种格式，以便您可以使用它来进行索引、压缩或“消化”。

Hadoop 能够并行化这样的处理作业，并且最好的部分来了，它负责处理文件的冗余存储、在集群上的不同机器上分配任务等事情（是的，你需要一个集群，否则 Hadoop 是无法弥补框架的性能损失）。

如果您首先看一下 Hadoop 生态系统，您会发现 3 个大术语：HDFS（Hadoop 文件系统）、Hadoop 本身（使用 MapReduce）和 HBase（“数据库”有时是列存储，并不完全适合）

HDFS 是 Hadoop 和 HBase 使用的文件系统。它是主机上常规文件系统之上的一个额外层。HDFS 将上传的文件分割成块（通常为 64MB），并在集群中保持它们可用，并负责它们的复制。

当 Hadoop 获得要执行的任务时，它会获取 HDFS 上输入文件的路径、所需的输出路径、一个 Mapper 和一个 Reducer 类。Mapper 和 Reducer 通常是在 JAR 文件中传递的 Java 类。（但使用[Hadoop Streaming](http://hadoop.apache.org/docs/r0.15.2/streaming.html)，您可以使用任何您想要的命令行工具）。调用映射器来处理输入文件的每个条目（通常按行，例如：“如果该行包含错误的 F* 字，则返回 1”），输出被传递到化简器，后者将单个输出合并为所需的其他格式（例如：数字相加）。这是获得“坏词”计数器的简单方法。

很酷的事情：映射的计算是在节点上完成的：你线性地处理块，你只需将半消化（通常更小）的数据通过网络移动到减速器。

如果其中一个节点死亡：另一个节点具有相同的数据。

HBase 利用文件的分布式存储并存储其表，在集群上分成块。与 Hadoop 不同，HBase 提供对数据的随机访问。

如您所见，HBase 和 Hadoop 与 RDMBS 完全不同。HBase也缺乏很多RDBMS的概念。使用触发器、preparedstatements、外键等对数据进行建模并不是 HBase 想做的事情（我对此不是 100% 确定，所以请纠正我 ;-)）

# Django 可以与 Hadoop 集成吗？

对于 Java，这很简单：Hadoop 是用 Java 编写的，所有的 API 都在那里，可以随时使用。

对于 Python/Django，我（还）不知道，但我确信您可以使用 Hadoop 流/Jython 作为最后的手段。我发现了以下内容：[Mappers](http://www.hadoopy.com/en/latest/index.html)和 Reducers 中的 Hadoopy和[Python](http://www.michael-noll.com/tutorials/writing-an-hadoop-mapreduce-program-in-python/)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-23T21:41:39.747

[Hue](http://gethue.com)，Hadoop 的 Web UI 是[基于 Django 的](http://gethue.com/how-hue-integrates-hadoop-with-django/)！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-06T23:04:35.803

Django 可以连接大多数 RDMS，因此您可以将它与基于 Hadoop 的解决方案一起使用。

请记住，Hadoop 有很多东西，所以具体来说，您需要低延迟的东西，例如 HBase，不要尝试将它与 Hive 或 Impala 一起使用。

Python 有一个基于节俭的绑定，happybase，它可以让你查询 Hbase。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-07T11:22:03.480

Django 与 Hadoop 集成的基本 (!) 示例 [删除链接]

我使用 Oozie REST api 来执行作业，并使用“hadoop cat”来获取作业结果（由于 HDFS 的分布式特性）。更好的方法是使用 Hoop 之类的东西来获取 HDFS 数据。无论如何，这不是一个简单的解决方案。

PS 我已重构此代码并将其放入[https://github.com/Obie-Wan/django_hadoop](https://github.com/Obie-Wan/django_hadoop)。现在它是一个单独的 django 应用程序。

# asp.net - 使用构造函数构造类

> ID：12667874
> 
> 赞同：0
> 
> 时间：2012-10-01T05:23:07.453
> 
> 标签：asp.net, vb.net

我有一个带有构造函数的类。我的构造函数获取所有必需的参数，然后我使用这些参数返回另一个类。

```
Public Class SearchResults()

  private id as int

    Sub New(id) ' Constructor
        getResults(id)
    End Sub

    Public Function getResults(byval id as int) as List(of Products)
       ........
      return list (of products)
    End Function

End 
```

然后在我的页面中，我想获取所有产品。

```
Dim s = new SearchResults( 1 )
Dim p as list(of Products) = s.getResults() 
```

----现在我可以为每个人做这件事

这对我有用，但我确实觉得必须有更好的方法来做到这一点，我想坚持最好的标准。你们认为这是最好的方法还是可以改进？我的设计师将在他们的项目中使用这个类……所以我想让他们尽可能简单。

**或者如何创建一个类的集合......例如类产品及其集合类产品，其中产品是项目类的集合。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:52:03.097

有三种方法可以做你想做的事情：1）你可以加载结果并将它们存储在构造函数上的对象中 2）你可以将 ID 存储在对象中，并在需要时调用函数来获取结果 3）你可以使函数静态并传入 ID 以及集合（或获取集合所需的资源），并且根本不使用对象。

根据您的需要，很可能 1 或 3 将是最好的。如果您打算将对象重用于其他方法而不仅仅是一个函数，那么选项 1 是最好的，但如果您只需要 1 函数，请使用选项 3，如下所示：

```
Public Class SearchResults
Public Static Function getResults(ByVal id As int) As List(Of Products)
   '........
  return list (of products)
End Function

End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T05:29:27.637

您可以使 getResults 方法成为静态方法，并且不必创建一个类实例来调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T05:32:35.790

我个人会声明该`getResults`方法，`Shared`这样您就不必创建`SearchResults`对象来访问该方法。这也将允许您使用另一个 ID 再次调用该方法，而无需创建另一个对象。

# asp.net - 如何使用 facebook api 拉取用户数据

> ID：12667879
> 
> 赞同：0
> 
> 时间：2012-10-01T05:23:43.620
> 
> 标签：asp.net, c#-4.0, facebook-graph-api

我在我们的注册屏幕中有一个要求，我们询问用户是否想使用他们的 Facebook 个人资料进行注册。我们正在考虑的过程是当用户登录 facebook 或允许我们访问他们的数据时。我将只提取姓名、电子邮件、地址并将这些内容保存在我们的数据库中，就像根据他们的 Facebook 数据创建帐户一样。

我对如何启动它感到困惑，所以任何人都可以指出我或有示例代码如何做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:32:53.140

希望这篇文章能给你指明方向： [http ://www.mono-software.com/blog/post/Mono/179/Using-Facebook-API-in-ASP-NET/](http://www.mono-software.com/blog/post/Mono/179/Using-Facebook-API-in-ASP-NET/)

# php - 使用 sqlsrv 与 PHP 建立 sql server 2008 连接大问题

> ID：12667888
> 
> 赞同：1
> 
> 时间：2012-10-01T05:25:04.707
> 
> 标签：php, sql-server, connection

我知道这个话题有一些线索，但我现在有点绝望，所以我想我应该做一个新的。我正在尝试将 sql server 2008 与 php 连接，我正在使用 WAMP 服务器和 php 5.4.3。我已经阅读了很多关于 php.ini 文件的配置的内容，并且我做了我需要做的事情。但我仍然无法让我的连接正常工作！这是我所做的一个小总结

1.  就我而言，安装 Microsoft® SQL Server® 2012 Native Client 64 位。
2.  下载驱动程序 SQLSRV30.EXE 并移动到 php/ext 文件夹
3.  使用您的 PHP 文件夹，运行命令："C:\PHP\php.exe" -i | 我做了更多，我得到了下一个信息：HP Extension Build => API（这里是大数字）TS，VC9
4.  有了这些信息，我发现我的 php.ini 文件中需要这些新行

    对于 SQLSRV30.EXE、PHP 5.4、TS、VC9 添加行： [PHP_SQLSRV] extension=php_sqlsrv_54_ts.dll [PHP_PDO_SQLSRV] extension=php_pdo_sqlsrv_54_ts.dll

5.  重启我的服务器！！

好的，所以我有一个包含以下代码的页面：

```
<html> 
   <head> 
   <title>Resultado</title> 
  </head> 
  <body>
     <?php
    $server='ANDRES-PC';
    $connectinfo=array("Database"=>"ejemplo");
    //connect to DB
    $db=sqlsrv_connect($server,$connectinfo);

    if($db)
    {
    echo "Connection established.<br/>";
    }
    else
    {
    echo "Connection couldn't be established.<br/>";
    die(print_r( sqlsrv_errors(), true));
    }
         ?>

    </body> 
</html> 
```

但是当我尝试查看该页面时，我什么也没有！！！一个字都没有。你有什么问题是我的问题。我使用此页面[http://robsphp.blogspot.co.uk/2012/09/how-to-install-microsofts-sql-server.html](http://robsphp.blogspot.co.uk/2012/09/how-to-install-microsofts-sql-server.html)来建立连接！！请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T09:34:06.700

您已经正确完成了所有操作，所以我猜您已经安装了 64 位版本的 WAMP。请看这个答案：

[http://social.msdn.microsoft.com/Forums/en-US/sqldriverforphp/thread/6dc1dc1a-5d74-415b-9225-ce11f481f301](http://social.msdn.microsoft.com/Forums/en-US/sqldriverforphp/thread/6dc1dc1a-5d74-415b-9225-ce11f481f301)

在我的说明页面的某处，它说您必须使用 32 位 PHP：“Microsoft 用于 SQL Server 的 PHP 驱动程序仅在 PHP 32 位版本中运行”

编辑：没关系！我注意到您最近在我的博客页面上发表的评论： [http ://robsphp.blogspot.co.uk/2012/09/how-to-install-microsofts-sql-server.html](http://robsphp.blogspot.co.uk/2012/09/how-to-install-microsofts-sql-server.html)

我会留下这个答案，因为这是 sqlsrv 驱动程序不使用 WAMP 加载的常见原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T17:31:53.187

Sqlsrv 驱动程序仅适用于 32 位版本的 wamp。安装 32 位版本的 wamp 或使用 PDO 连接到 MSSQL 与 odbc 驱动程序 new PDO("odbc:dsn");

# android - Android Heap 内存分配机制

> ID：12667891
> 
> 赞同：1
> 
> 时间：2012-10-01T05:25:24.297
> 
> 标签：android, memory, allocation

我想知道Android手机（OS）上的堆内存分配是如何发生的。当我尝试分配几 MB（2-5 mb）的对象时会发生什么，当我尝试分配一个巨大的内存（大约 17-20 mb）时会发生什么......内存分配如何以及何时成功？我见过一些有足够堆可用但仍然会导致 OOM 的情况。我想了解更多关于这方面的信息......对此的任何指示都会有所帮助......

提前致谢。

问候吉里什

# c - 如何在C中循环套接字程序

> ID：12667894
> 
> 赞同：0
> 
> 时间：2012-10-01T05:25:45.913
> 
> 标签：c, sockets

我正在尝试在 C 中为一个项目创建一个基本的客户端/服务器系统。我有这个想法的基础......我的客户端中有一个while循环无限执行，直到服务器现在发送终止信号。我正在读/写积木。我设法让第一个读/写与服务器一起工作，但之后它就不起作用了。

我很确定我在插座上做错了什么。这个想法是我希望服务器等到客户端发送另一个 write() 命令。这是我在服务器/客户端上的内容：

客户

```
short connected = 1;
    do
    {
            // Send initial request on first pass
            // Afterwards send the resposne we were given
            n = write(sockfd, buffer, strlen(buffer));
            if (n < 0)
                     error("Failed to send messege. Terminating.");
            printf("%s\n", buffer);
            // Any errors?
            if (strcmp(buffer, "Session key does not match. Terminating.") == 0)
                    error(buffer);

            // Get session key response
            bzero(buffer, BUFFER_LENGTH);
            n = read(sockfd, buffer, BUFFER_LENGTH);
            if (n < 0)
                    error("Could not fetch result. Terminating.");

            printf("%s\n", buffer);
            sleep(1);
    } while (connected == 1); 
```

服务器

```
sockfd = socket(AF_INET, SOCK_STREAM, 0);
if (sockfd < 0)
{
        printf("Error opening socket.\n");
        exit(0);
}

// Taken from reference
bzero((char *) &serv_addr, sizeof(serv_addr));
portNumber = atoi(argv[1]);
serv_addr.sin_family = AF_INET;
serv_addr.sin_addr.s_addr = INADDR_ANY;
serv_addr.sin_port = htons(portNumber);
if (bind(sockfd, (struct sockaddr *) &serv_addr, sizeof(serv_addr)) < 0)
{
        printf("ERROR on binding.\n");
        close(sockfd);
        exit(0);
}

// Add listner to socket and wait until we are given something to do
// Taken from reference
listen(sockfd, 5);
clilen = sizeof(cli_addr);
newsockfd = accept(sockfd, (struct sockaddr *) &cli_addr, &clilen);
if (newsockfd < 0)
{
        printf("ERROR on accept.\n");
        close(sockfd);
        exit(0);
}

// Get initial session key request
bzero(buffer,BUFFER_LENGTH);
n = read(newsockfd, buffer, BUFFER_LENGTH);
if (n < 0)
{
        printf("ERROR reading from socket.\n");
        close(newsockfd);
        close(sockfd);
        exit(0);
}

// ... a bunch of processing of data

n = write(newsockfd, response, lengthOfKey + 15 + 1);
if (n < 0)
{
        printf("ERROR writing to socket.\n");
        close(newsockfd);
        close(sockfd);
        exit(0);
}

close(newsockfd);

// Get the previous key(s) now (we hope)
short connected = 1;
while (connected < 100)
{
        printf("waiting...\n");
        newsockfd = accept(sockfd, (struct sockaddr *) &cli_addr, &clilen);

        //... more processing
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T03:16:39.403

感谢评论，我发现 read() 块将停止服务器代码，直到它通过 write() 从客户端获得某些内容。所有工作:)谢谢

# jquery - 由于缓存，jQuery fadeIn 闪烁

> ID：12667897
> 
> 赞同：0
> 
> 时间：2012-10-01T05:26:07.587
> 
> 标签：jquery, fadein, flicker, waitforimages

我有这个：

```
$(document).ready(function() {
    $('#div').hide();
    $('#div').waitForImages(function() {
        $('#div').fadeIn();
    });
}) 
```

当用户第一次访问该站点时，这非常有效。然而，在刷新时，由于缓存而有很多闪烁。我尝试将其移动`$('#div').hide();`到整个文档中的几个不同位置，但结果是相同的。我也尝试过`$(window).load()`，`$(document).load()`但没有帮助。当然，如果我`display: none`在 CSS 中设置，则不会出现闪烁，但这意味着该站点对于非 JavaScript 用户来说是损坏的。我也尝试过通过 JavaScript 设置 CSS（即`$(#div).css({'display':'none'});`，但这不起作用。一定有办法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:30:07.570

您需要`display: none`为图像设置。我觉得这是唯一的出路。关于该网站被其他用户破坏，`<noscript>`如果没有检测到 JS 支持，请在标签内放置指向样式表的链接，以纠正这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T05:45:19.757

试试这个[小提琴](http://jsfiddle.net/alexdickson/3DfGP/)

```
$('body').waitForImages(

function() {
    $('body').append('<p>Images loaded.</p>');
}, function(loaded, total) {
    $(this).css({
        border: '1px solid #ccc'
    });
    $('span').html(parseInt(loaded / total * 100) + '% loaded.');
}); 
```

# c# - 如何在c#中将空分配给字符串数组

> ID：12667905
> 
> 赞同：0
> 
> 时间：2012-10-01T05:28:01.467
> 
> 标签：c#

如何在 c# 中将空分配给字符串数组？

```
string [] stack; //string array 
```

如何分配

```
stack = ""; //this statement gives error cannot implicitly convert to type string to string [] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-01T05:30:03.120

您不能使用：

```
string[] stack = ""; 
```

由于这里的堆栈是一个字符串数组。如果要为数组中的每个元素初始化空字符串，可以使用 LINQ with`Enumerable.Range`来获取结果，假设这里有 10 个项目：

```
 string[] stack = Enumerable.Range(0, 10)
                            .Select(i => string.Empty)
                            .ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T05:29:37.383

这将创建一个包含三个空字符串的数组。

```
string[] arr1 = new string[] { "", "", "" }; 
```

或者如果你只需要一个：

```
string[] arr1 = new string[] { "" }; 
```

或另一个示例（带有 3 个字符串）：

```
string[] arr1 = new string[3];
arr1[0] = "";
arr1[1] = "";
arr1[2] = ""; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-01T05:37:09.293

只需像这样遍历数组：

```
int length = stack.Length;
for(int i = 0; i < length; i++)
{
    stack[i] = string.Empty;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-05T17:32:31.807

如果您只想创建 string[] 对象的空数组。

```
string [] stack = new string[]{}; 
```

# javascript - 使用 Web 的矢量图像为小细节制作动画

> ID：12667909
> 
> 赞同：0
> 
> 时间：2012-10-01T05:28:52.817
> 
> 标签：javascript, html, animation

我想知道是否有一种方法可以为现代网络的矢量对象设置动画。我的例子是一个卡通鱿鱼轮廓，我想让它的触手动画化以使其摆动。我的目标是找到一种方法来做到这一点，而不是使用 Flash，并希望有移动支持。如果它只适用于最现代的浏览器，而且它更像是一种“有趣的额外”探索，那我没问题。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:01:47.463

Web 中基于矢量的图形转换为 SVG。尝试在谷歌上搜索“SVG Javascript”一词。

这是一个类似的问题：

[是否可以使用 JavaScript 操作嵌入在 HTML 文档中的 SVG 文档？](https://stackoverflow.com/questions/138309/is-it-possible-to-manipulate-an-svg-document-embedded-in-an-html-doc-with-javasc)

# selenium - 是否可以捕获 recaptcha 图像上的文本并使用 selenium rc 在文本框中键入相同的内容

> ID：12667911
> 
> 赞同：0
> 
> 时间：2012-10-01T05:29:15.843
> 
> 标签：selenium

我需要捕获 recaptcha 图像上的文本并在文本框中输入相同的内容。任何人都可以分享我的解决方案，我们如何使用 selenium rc 或 webdriver 来做到这一点，并使用 java 分享代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T06:27:29.593

您不能自动化验证码，但有一些方法可以处理验证码，但需要人工交互。
有两种方法可以使 CAPTCHA 自动化

1.通过中断命令
2.通过输入框

对于输入框

```
String captcha = selenium.getEval("prompt("Enter Captcha")");
selenium.type("fieldId", captcha); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T08:30:43.083

如果可能，验证码图像的意义何在？如果你在 Selenium 中绕过它，是什么阻止了攻击者这样做？这是不可能的，有很好的理由。

相反，只需为您的测试环境禁用 CAPTCHA。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T05:33:53.443

如果可以在您的测试环境中“作弊”，我会将预期值添加到隐藏字段并从那里提取。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-19T01:02:11.157

我在[这里](https://stackoverflow.com/questions/18935696/how-to-read-the-text-from-image-captcha/20660335#20660335)描述了其他解决方案，它是使用 CAPTCHA 求解器服务 API。

例如： http: [//www.deathbycaptcha.com](http://www.deathbycaptcha.com)。您实现他们的 API，将 CAPTCHA 传递给他们并返回文本。

[此处](http://revan28.lima-city.de/death_by_captcha/readme.html)的实施示例。

# php - 使用 jquery ajax 从 php 文件中获取数字

> ID：12667912
> 
> 赞同：0
> 
> 时间：2012-10-01T05:29:20.330
> 
> 标签：php, javascript, jquery

我是 AJAX 和 jQuery 的新手。我正在尝试从 unrate.php 传递一个数字以用作 checkVal（如下所示）。该文件做了很多事情，但它只回显数字。当我添加一个警报（checkVal）时，它显示一个无效字符，而不是我想要的数字。（我只想要号码）...

## ajax 处理程序：

```
$.get("unrate.php?numb="+ID, function(checkVal){
  if (checkVal == 1) {
    number.innerHTML = addNumb + 1;
  } else { 
    number.innerHTML = addNumb - 1;
  }
}); 
```

## unrate.php：

```
<?php
$uNum = $_SESSION['userNum'];
$ider = $_GET['numb'];
$sql = mysql_query("SELECT * FROM ratecheck WHERE ID =".$ider);
$checkRay = mysql_fetch_array($sql);
$checkVal = $checkRay[$uNum];

$sqlZ = mysql_query("UPDATE ratecheck SET `".$uNum."`=0 WHERE ID=".$ider)
or die(mysql_error());

    $sqlB = mysql_query("SELECT * FROM sources WHERE ID =".$ider);
    $sourceRay = mysql_fetch_array($sqlB);
    $newRC = $sourceRay['ratecount'] - 1;

    mysql_query("UPDATE sources SET ratecount =".$newRC." WHERE ID =".$ider)
    or die(mysql_error());

if ($checkVal > 1)
    {   
    $newpts = $sourceRay['points'] - 1; 
    $userEmail = $sourceRay['user'];

    mysql_query("UPDATE sources SET points =".$newpts." WHERE ID =".$ider)
    or die(mysql_error());  

        if ($_SESSION['userName']) 
        {
            $findUser = mysql_query("SELECT * FROM users WHERE email LIKE '".$userEmail."'") or mysql_error();
            $currentRate = mysql_fetch_array($findUser);
            $newrating = $currentRate['rating'] - 1;
            mysql_query("UPDATE users SET rating =".$newrating." WHERE email LIKE '".$userEmail."'")
            or mysql_error();      

        }
        else
        {
            die('ERROR');
        }
    }
else 
    {
    $newpts = $sourceRay['points'] + 1; 
    $userEmail = $sourceRay['user'];

    mysql_query("UPDATE sources SET points =".$newpts." WHERE ID =".$ider)
    or die(mysql_error());

        if ($_SESSION['userName']) 
        {
            $findUser = mysql_query("SELECT * FROM users WHERE email LIKE '".$userEmail."'") or mysql_error();
            $currentRate = mysql_fetch_array($findUser);
            $newrating = $currentRate['rating'] + 1;
            mysql_query("UPDATE users SET rating =".$newrating." WHERE email LIKE '".$userEmail."'")
            or mysql_error();      

        }
        else
        {
            die('ERROR');
        }
    }
echo $checkVal;
mysql_close(); 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:21:45.367

输出开头或结尾处的额外字符是您在使用 php.ini 时偶尔会遇到的。我非常赞同建议查看服务器原始输出的评论。您可能还想考虑以下可能性：

脚本文件开头或结尾的不可见字符。使用会显示隐藏字符的文本编辑器（甚至是十六进制编辑器）并查看是否有。`?>`此外，如果您没有做任何其他事情，您不必结束您的 php 脚本。您可以将其保持打开状态，因为这将防止字符出现在最后。

检查您的脚本具有的字符编码。这可能不是解决方案，但前段时间当我将编码更改为没有字节顺序标记的 UTF8 时，我遇到了类似的情况。尝试做同样的事情，看看是否能解决它

# android - 安卓聊天服务器

> ID：12667918
> 
> 赞同：2
> 
> 时间：2012-10-01T05:30:04.070
> 
> 标签：android

我需要为基于 android 的客户端创建一个聊天/通信服务器。

android 聊天客户端将通过 3g 或 wifi 网络连接到互联网我需要以下简单功能

*   注册一个新用户
*   从一个客户端向另一个客户端发送消息
*   一次将连接大约 500 个客户端

来自桌面应用程序开发，我脑海中只有基于套接字的解决方案，并且服务器应该是基于 Java 的应用程序

所以问题是：基于套接字的方法是否可行，或者我应该使用其他一些通信协议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-01T06:42:38.843

虽然使用 TCP 套接字可以完成这项工作，但这不是一个好主意，因为您必须处理很多事情，例如消息格式化、流式传输等。使用已经可用的消息传递协议和库之一。

我建议研究[XMPP](http://en.wikipedia.org/wiki/Extensible_Messaging_and_Presence_Protocol)，它有一套用于在设备之间实现消息传递的开放标准。一个优点是有大量的库可用于实现 XMPP 客户端和服务器。

要在 Android 设备上实现 XMPP 客户端，您可以使用名为[Smack](http://www.igniterealtime.org/projects/smack/)的库。它实际上是一个基于 Java 的库。我已经使用[Asmack](http://code.google.com/p/asmack/)实现了 Facebook XMPP 聊天客户端，它是 Smack 的 Android 端口。Smack 文档也适用于 Asmack。但是，Asmack 已经两年没有更新了，并且存在一些问题，我一直在考虑将我的客户端更改为 Smack，以查看新版本是否与 Android 兼容。

至于实现 XMPP 服务器，您可以查看由制作 Smack 的同一个人制作的[Openfire 。](http://www.igniterealtime.org/projects/openfire/index.jsp)我还没有使用它，但是项目页面有大量关于设置 Openfire 的文档。从我使用的 Smack 库的质量来看，我敢说 Openfire 会很好地工作。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T05:35:03.657

服务器的另一端用什么编写并不重要，因为 HTTP 是一种高级协议。实际上，您可能最终会使用套接字，除非您对[GCM](http://developer.android.com/guide/google/gcm/c2dm.html)做一些事情。套接字是重量级的电池，您可能只想偶尔保留套接字，以便以与应用程序使用成比例的速率检查聊天服务器上的更新。还请记住，您不能在主线程上保持网络连接，它通常会通过服务访问。

# c# - 如何在c#中将一个数组分解为2个数组？

> ID：12667924
> 
> 赞同：0
> 
> 时间：2012-10-01T05:30:33.047
> 
> 标签：c#, .net, arrays, split

如何在c#中将一个数组分成2个数组

例如，我有一个数组 [1,2,3,4,5,6,7,8,9,10] 将其分解为 [1,2,3,4,5] 和 [6,7,8, 9,10]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T05:38:34.310

使用 Linq

```
var a = new[] {1,2,3,4,5,6,7,8,9,10}
var a1 = a.Take(a.Length / 2).ToArray();
var a2 = a.Skip(a.Length / 2).ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-01T05:34:38.273

使用 Linq：

```
var source = new int[] {1,2,3,4,5,6,7,8,9,10};
var firstHalf = source.Take(source.Length/2).ToArray();
var secondHalf = source.Skip(source.Length/2).ToArray(); 
```

与[`Array.Copy`](http://msdn.microsoft.com/en-us/library/k4yx47a1.aspx)：

```
var source = new int[] {1,2,3,4,5,6,7,8,9,10};
var firstHalf = new int[source.Length/2];
var secondHalf = new int[source.Length - source.Length/2];
Array.Copy(source, firstHalf, firstHalf.Length];
Array.Copy(source, firstHalf.Length, secondHalf, 0, secondHalf.Length]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T05:33:24.900

您可以使用以下方法将数组拆分为 2 个单独的数组

```
public void Split<T>(T[] array, int index, out T[] first, out T[] second) {
  first = array.Take(index).ToArray();
  second = array.Skip(index).ToArray();
}

public void SplitMidPoint<T>(T[] array, out T[] first, out T[] second) {
  Split(array, array.Length / 2, out first, out second);
} 
```

用法：

```
int[] myArray = new int[] { 1,2,3,4,5,6,7,8,9,10 };
int[] newArray1;
int[] newArray2;

SplitMidPoint<int>(myArray, out newArray1, out newArray2); 
```

来自：[C#拆分数组](https://stackoverflow.com/questions/1841246/c-sharp-splitting-an-array)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-01T05:48:33.817

```
 public static T[] SubArray(this T[] data, int index, int length)
    {
          T[] result = new T[length];
          Array.Copy(data, index, result, 0, length);
          return result;
    }
    public void Split(T[] Source, T[] arr1,T[] arr2)
    {
         if(source.Length == 0)
         {
            arr1 = arr2 = new T[0];
            return ;
         } 
         int half = source.Length/2;
         arr1 = source.SubArray(0, half);
         arr2 = source.SubArray(half-1, half);
    } 
```

# r - R 64 在 SIMPROF 期间内存不足

> ID：12667925
> 
> 赞同：0
> 
> 时间：2012-10-01T05:30:45.520
> 
> 标签：r, memory-management, cluster-analysis

我对 R 比较陌生，目前正在尝试在一个包含 1000 个观测值和 24 个变量的小型数据集上运行 SIMPROF 分析（clustsig 包）。大约 30 次迭代后，我收到以下错误：

> 错误：无法分配大小为 1.3 Mb 的向量。另外：有 39 个警告（使用 warnings() 来查看）

所有额外的警告都与 R 达到 8183Mb 的总分配有关

我用来运行分析的方法如下。

```
Data <- read.csv(file.choose(), header=T, colClasses="numeric")
Matrix <- function(Data) vegan::vegdist(Data, method="gower")
SimprofOutput <- simprof(Data, num.expected=1000, num.simulated=999, method.cluster="average", method.distance=Matrix, alpha = 0.10, silent=FALSE, increment=100) 
```

我想知道是否有其他人在运行 SIMPROF 分析时遇到问题，或者有任何想法如何阻止 R 用完 RAM。我正在运行 64 位 Win7 Enterprise 并在具有 8gb RAM 的机器上使用 R 2.15.1

# html - 在Firefox中隐藏alt标签

> ID：12667926
> 
> 赞同：9
> 
> 时间：2012-10-01T05:30:53.577
> 
> 标签：html, firefox, attributes, hide, alt

根据默认行为，`alt`属性在图像渲染之前第一次渲染。我在一个网格中显示 25 个图像，所以它看起来有点尴尬，因为所有`alt`属性都首先显示。

`alt`是否可以在 Firefox中隐藏属性？

**注意：** `alt`在我的例子中，属性包含动态名称。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-01-21T23:04:05.860

在这里尝试了所有其他方法后，我发现这种方法效果最好，它使文本透明，直到图像加载：

```
.yourClass img {
    color: transparent;
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-01T06:27:43.240

防止`alt`显示属性值的方法是删除该属性。

属性（不是标签）的含义`alt`是它指定了一个替代方案，即在不显示图像的情况下替代图像。因此，如果您想在图像尚未加载时隐藏它，您要求的行为与该属性的真正含义相矛盾。

但是，您可以通过设置例如使`alt`文本在 Firefox 上不可见（使用通常的 CSS 警告）

```
img { background: white; color: white; } 
```

在 CSS 中。这意味着`alt`在浏览器永远无法获取图像或浏览器已配置为不显示图像的情况下，文本也是不可见的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-07-18T10:33:48.930

从以上所有答案的参考中，我发现最好的方法是使用

```
img:-moz-loading {
  visibility: hidden;
} 
```

假设没有图像，我们使用白色或透明颜色，然后 alt 属性不再使用，因此，如果没有图像，我们需要此属性来显示此处要加载的图像并显示要显示的替代文本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-21T05:36:32.427

除了设置为：

```
img { 
  background: white; 
  color: white;
} 
```

我也喜欢禁用 Firefox 的默认图像行为：

```
img:-moz-loading {
  visibility: hidden;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-28T06:21:44.287

老问题，但截至 2020 年，`img:-moz-loading {visibility: hidden;}`它不再起作用。

而不是做`img {background: white; color: white;}`，我认为这样做更有意义：

```
img {
   color: transparent;
} 
```

这样它就不会弄乱应该具有一定透明度的图像。此外，当您需要为 img 设置背景颜色时，它不会影响少数情况。

对于奖励积分，您可以这样做：

```
<img src="src.com/src" onerror="this.style.color='black'"/> 
```

如果浏览器无法获取图像，这会将其恢复为正常的 alt 颜色。

当然，添加到每个图像中是很乏味的，但如果您使用的是带有全局`<Image/>`组件的 JS 框架，则更容易。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-01T05:37:20.917

你能把动态名称放在**标题**属性中吗？您可以尝试黑色背景或黑色背景图像；也许 Firefox 仍然使用黑色文本颜色。也许`img { color: white; }`会做？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-01T05:51:28.933

如果你不介意添加一些额外的东西，这里是：

```
<img src = "283414_2114217089554_728204_nn.jpg" onload="this.setAttribute('alt','this is the alt of my image');" /> 
```

希望对您有所帮助... :))

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-01T05:53:20.860

无需担心 alt 函数，您可以为所有图像提供一个通用类，例如`image-to-show`创建一个绝对定位在该图像上的加载 div。因此，当页面加载时，您只显示加载 div，带有加载 gif，如下所示：

```
// show loading image
$('.loader').show(); 
```

加载图像后，您可以隐藏 div 并显示图像。

```
// main image loaded ?
$('.image-to-show').load(function(){
  // hide/remove the loading image
  $('.loader').hide();
}); 
```

您可以使用特定的图像 ID 进一步增强此代码。另一种更简洁的方法是将`data-loading`正在加载的图像设置为 true ，一旦图像被加载，设置`$('.image-to-show').data('loading', false)`

有多种方法可以解决这个问题，如果您需要进一步说明，请告诉我。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-10-01T06:19:30.020

我将从添加这个 CSS 开始，它将隐藏所有带有 alt 文本的图像（不是`display: none`因为我们想要撤消它并且我们不知道要撤消什么）：

```
img[alt] {
    width: 0;
    height: 0;
} 
```

然后在全部加载后显示它（这使用 jQuery）：

```
$(document).ready(function() {
    $('img[alt]').on('load', function() {
        this.style.width = 'auto';
        this.style.height = 'auto';
    });
}); 
```

# c# - 如何使用 EF 查看和编辑 DataGrid 中多个表的数据？

> ID：12667929
> 
> 赞同：2
> 
> 时间：2012-10-01T05:31:05.540
> 
> 标签：c#, .net, wpf, entity-framework

我有 2 个表：订单和客户。订单通过 IdCustomer 外键与客户相关联。

问题：我想在 DataGrid 中显示两个表中的值，并希望能够编辑属于 Orders 表的数据。

我设法在网格中显示和编辑 Orders 表，但是如何包含 Customers 表中的数据？

```
this.grdData.ItemsSource = context.Orders;

private void btnSave_Click(object sender, RoutedEventArgs e)
{
    context.SaveChanges();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:52:12.043

通常，如果您的表中有一个 fk，那么您的实体中就会有一个关系。如果你没有它，你应该添加它。

最好的方法是为您想要从两个实体中显示的内容创建一个 ViewModel 类：

```
public class OrderViewModel {
    public string CustomerName{ get; set; }
    public decimal OrderTotal { get; set; }
    public DateTime Date { get; set; }
} 
```

然后您需要执行一个检索所有信息的查询：

```
var query = from o in dataContext.Orders
            select new ViewModel {
                                   CustomerName = o.Customer.Name,                                                            
                                   OrderTotal = o.Total,
                                   Date = o.Date
                                 }; 
```

并将其用作 Grid 的数据源。

如果您的模型中没有任何关系，则可以进行不那么直接的查询：

```
var query = from o in dataContext.Orders
            join c in dataContext.Customers on o.CustomerId equals c.Id
            select new ViewModel {
                                   CustomerName = c.Name,                                                            
                                   OrderTotal = o.Total,
                                   Date = o.Date
                                  }; 
```

# c# - 正则表达式，负后缀

> ID：12667932
> 
> 赞同：2
> 
> 时间：2012-10-01T05:31:32.530
> 
> 标签：c#, regex, string-parsing

我有以下（键/值列表）结构

**字段：***值值值* **字段：***值值值*

**classType:** *type type2 ns.grrr.test3 _test4* **name_space.classType:** *grrr.test5 test6*

我希望能够将字符串解析成组

**classType** -*字段*

*   类型 -*值*
*   类型2
*   ns.grrr.test3
*   _test4

**name_space.classType**

*   grrr.test5
*   测试6

到目前为止我的尝试之一

```
^(?<field>((\w+\.?)+)\:)(?<value>(((\w+\.?)+)\s?)+) 
```

在 expresso 中，上述方法不起作用。我能够让一些部件工作但不使用所需的组

也试过：

```
(?<value>((?!\:)((\w+\.?)+\:?))) 
```

我试图确保值组不会意外包含一个没有特殊字符的字段，只有：

AZ AZ 0-9 _ 。-

任何帮助将不胜感激。

**更新**

越来越近，这会正确提取除最后一个术语“test6”之外的所有值......

欢迎任何帮助:)

（感谢@rfeague 对此的投入）。

```
((?<field>(\w+\.?)+)[:]((?<value>(\w+\.?)+)\s)+) 
```

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T07:14:35.663

这符合一切

```
(?<field>[^\s]+?):((?<value>[^\s]+)\s?)+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T07:11:18.473

感谢您的输入，我有以下内容为我带来了正确的结果

```
((?<field>(\w+\.?)+)[:]((?<value>(\w+\.?)+)(\s|$))+) 
```

# iphone - iPhone 已停止工作

> ID：12667934
> 
> 赞同：-2
> 
> 时间：2012-10-01T05:31:57.763
> 
> 标签：iphone, ios, ios6

早上好（白天/晚上/晚上），

不久前，我在我的 iPhone 上安装了 iOS 6.0 beta。从那时起，我一直在更新到最新版本的 iOS（iOS 6.0 Beta 4 是最后一个）。但是今天早上发生了一件奇怪的事情。

当我醒来并试图关闭闹钟时，我被一个Wi-Fi选择屏幕所震惊。在导航栏的右侧点击后`Next`，它进入一个新的屏幕并说“激活您的iPhone可能需要几分钟”。之后它告诉我iPhone无法激活。

将 iPhone 连接到 Mac 后，我尝试更新 iOS，但 iTunes 提示“iPhone 上的软件已过期，必须更新到较新版本”。但是当我尝试从 iTunes 更新时，它说 iPhone 具有最新版本（6.0）。

启动 Xcode 和管理器告诉我安装的`6.0 (10A5376e)`iOS 是 iOS 6.0 Beta 4（现在很明显它已经过期了，应该更新）。问题是：**如何从 iOS 6.0 Beta 4 更新到 iOS 6.0？**

谢谢，

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T05:36:31.440

您**必须下载 iOS6 发行版**`alt+restore`并使用技巧从 iTunes 恢复。

**请注意，如果您没有备份，您将丢失所有数据。**

不过，有一种方法可以做到这一点，无需恢复，数据将被保留。这是通过单击`alt+check for updates`而不是`alt+restore`。这不是 Apple 推荐的，所以我也不推荐，但如果您没有备份并且不想丢失数据，这似乎是目前唯一的选择。

# git - Apple 是否删除了 Xcode 4.5 命令行工具中的“git gui”命令？

> ID：12667936
> 
> 赞同：20
> 
> 时间：2012-10-01T05:32:01.913
> 
> 标签：git, xcode4.5, git-gui

更新到 Xcode 4.5 并安装开发人员工具后，我无法再从命令行运行“git gui”命令。它说：

```
$ git gui
git: 'gui' is not a git command. See 'git --help'. 
```

我正在运行这个版本：

```
$ git --version
git version 1.7.10.2 (Apple Git-33) 
```

搜索 git 文档 ( [http://git-scm.com/docs/git-gui](http://git-scm.com/docs/git-gui) ) 显示“git gui”应该可用，并且自 1.7.7 版以来没有更改。那么这个 Apple 版本的 git 是否删除了这个命令？我用它所有的时间！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-02T03:51:38.367

苹果确实删除了“git gui”命令，可能是因为他们删除了“git gui”所基于的[X11 。](http://www.macrumors.com/2012/02/17/apple-removes-x11-in-os-x-mountain-lion-shifts-support-to-open-source-xquartz/)

我决定只自制 git 而不是依赖 Xcode 命令行工具。

```
brew install git 
```

然后我编辑了 /etc/paths 文件，使 /usr/local/bin 目录位于 /usr/bin 目录之前，因为这也不对。然后退出终端窗口并重新启动，现在我得到：

```
$ which git
/usr/local/bin/git

$ git --version
git version 1.7.12.1 
```

并且 git gui 命令再次起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-04T10:39:00.953

这对我有用

`sudo vi ~/.gitconfig`

```
[alias]
gui = !sh -c '/usr/local/git/libexec/git-core/git-gui' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-10-13T14:59:53.360

这是一个老问题 - 在较新的系统上，请参阅[git gui 在 Mac（例如 Mountain Lion）中安装后无法正常工作](https://stackoverflow.com/questions/11722830/git-gui-not-working-after-installing-in-mac-e-g-mountain-lion/11794702#11794702) 我在 Big Sur 上，但除了使用的路径~~和符号链接 new`git`~~之外，说明是相同的。

我使用自制软件安装 git 和 git-gui，~~然后符号链接`git`到我的本地 bin 以确保它在 Apple 版本上使用它。~~

`gitk`是`git-gui`包装的一部分。

```
brew install git

brew install git-gui 
```

关闭所有终端窗口并打开一个新窗口（我使用了符号链接，直到我意识到我打开了其他与我的 . 混淆的终端窗口`$PATH`）

检查版本和路径：

```
which git 
which git-gui
git --version 
```

# java - Glassfish 部署 WAR 时出错 - 部署期间发生错误：准备应用程序时出现异常：资源无效：

> ID：12667937
> 
> 赞同：4
> 
> 时间：2012-10-01T05:32:02.827
> 
> 标签：java, deployment, web, glassfish, war

我正在尝试部署一个名为“VodfoneContractsDB.war”的 WAR 文件。它是使用 Netbean 的“来自数据库的 RESTful Web 服务”向导创建的简单 Web 服务。

“沃达丰”是我的数据库连接的名称。

我收到以下错误消息：

> 部署期间发生错误：准备应用程序时出现异常：资源无效：Vodafone__pm。有关详细信息，请参阅 server.log。

这是日志文件：

```
[#|2012-10-01T09:23:35.542+0400|WARNING|glassfish3.1.2|org.apache.catalina.connector.Request|_ThreadID=119;_ThreadName=Thread-2;|PWC4011: Unable to set request character encoding to UTF-8 from context , because request parameters have already been read, or ServletRequest.getReader() has already been called|#]

[#|2012-10-01T09:23:36.052+0400|INFO|glassfish3.1.2|org.glassfish.admingui|_ThreadID=119;_ThreadName=Thread-2;|GUI deployment: uploadToTempfile|#]

[#|2012-10-01T09:23:36.052+0400|INFO|glassfish3.1.2|org.glassfish.admingui|_ThreadID=119;_ThreadName=Thread-2;|======= uploadFileName=VodfoneContractsDB.war|#]

[#|2012-10-01T09:23:36.567+0400|SEVERE|glassfish3.1.2|javax.enterprise.system.core.com.sun.enterprise.v3.server|_ThreadID=121;_ThreadName=Thread-2;|Exception while invoking class org.glassfish.persistence.jpa.JPADeployer prepare method|#]

[#|2012-10-01T09:23:36.567+0400|SEVERE|glassfish3.1.2|javax.enterprise.system.core.com.sun.enterprise.v3.server|_ThreadID=121;_ThreadName=Thread-2;|Exception while preparing the app|#]

[#|2012-10-01T09:23:36.568+0400|SEVERE|glassfish3.1.2|javax.enterprise.system.core.com.sun.enterprise.v3.server|_ThreadID=121;_ThreadName=Thread-2;|Invalid resource : Vodafone__pm
java.lang.RuntimeException: Invalid resource : Vodafone__pm
    at com.sun.enterprise.connectors.ConnectorRuntime.lookupDataSourceInDAS(ConnectorRuntime.java:540)
    at com.sun.enterprise.connectors.ConnectorRuntime.lookupPMResource(ConnectorRuntime.java:469)
    at org.glassfish.persistence.common.PersistenceHelper.lookupPMResource(PersistenceHelper.java:63)
    at org.glassfish.persistence.jpa.ProviderContainerContractInfoBase.lookupDataSource(ProviderContainerContractInfoBase.java:71)
    at org.glassfish.persistence.jpa.PersistenceUnitInfoImpl.<init>(PersistenceUnitInfoImpl.java:108)
    at org.glassfish.persistence.jpa.PersistenceUnitLoader.loadPU(PersistenceUnitLoader.java:155)
    at org.glassfish.persistence.jpa.PersistenceUnitLoader.<init>(PersistenceUnitLoader.java:120)
    at org.glassfish.persistence.jpa.JPADeployer$1.visitPUD(JPADeployer.java:224)
    at org.glassfish.persistence.jpa.JPADeployer$PersistenceUnitDescriptorIterator.iteratePUDs(JPADeployer.java:495)
    at org.glassfish.persistence.jpa.JPADeployer.createEMFs(JPADeployer.java:233)
    at org.glassfish.persistence.jpa.JPADeployer.prepare(JPADeployer.java:168)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:410)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1066)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at org.glassfish.admin.rest.ResourceUtil.runCommand(ResourceUtil.java:214)
    at org.glassfish.admin.rest.ResourceUtil.runCommand(ResourceUtil.java:207)
    at org.glassfish.admin.rest.resources.TemplateListOfResource.createResource(TemplateListOfResource.java:148)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.server.impl.container.grizzly.GrizzlyContainer._service(GrizzlyContainer.java:182)
    at com.sun.jersey.server.impl.container.grizzly.GrizzlyContainer.service(GrizzlyContainer.java:147)
    at org.glassfish.admin.rest.adapter.RestAdapter.service(RestAdapter.java:148)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: com.sun.appserv.connectors.internal.api.ConnectorRuntimeException: Invalid resource : Vodafone__pm
    at com.sun.enterprise.connectors.service.ConnectorResourceAdminServiceImpl$MyDataSource.validateResource(ConnectorResourceAdminServiceImpl.java:274)
    at com.sun.enterprise.connectors.service.ConnectorResourceAdminServiceImpl$MyDataSource.setResourceInfo(ConnectorResourceAdminServiceImpl.java:255)
    at com.sun.enterprise.connectors.service.ConnectorResourceAdminServiceImpl.lookupDataSourceInDAS(ConnectorResourceAdminServiceImpl.java:245)
    at com.sun.enterprise.connectors.ConnectorRuntime.lookupDataSourceInDAS(ConnectorRuntime.java:538)
    ... 63 more
|#]

[#|2012-10-01T09:23:36.635+0400|SEVERE|glassfish3.1.2|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=121;_ThreadName=Thread-2;|Exception while preparing the app : Invalid resource : Vodafone__pm
com.sun.appserv.connectors.internal.api.ConnectorRuntimeException: Invalid resource : Vodafone__pm
    at com.sun.enterprise.connectors.service.ConnectorResourceAdminServiceImpl$MyDataSource.validateResource(ConnectorResourceAdminServiceImpl.java:274)
    at com.sun.enterprise.connectors.service.ConnectorResourceAdminServiceImpl$MyDataSource.setResourceInfo(ConnectorResourceAdminServiceImpl.java:255)
    at com.sun.enterprise.connectors.service.ConnectorResourceAdminServiceImpl.lookupDataSourceInDAS(ConnectorResourceAdminServiceImpl.java:245)
    at com.sun.enterprise.connectors.ConnectorRuntime.lookupDataSourceInDAS(ConnectorRuntime.java:538)
    at com.sun.enterprise.connectors.ConnectorRuntime.lookupPMResource(ConnectorRuntime.java:469)
    at org.glassfish.persistence.common.PersistenceHelper.lookupPMResource(PersistenceHelper.java:63)
    at org.glassfish.persistence.jpa.ProviderContainerContractInfoBase.lookupDataSource(ProviderContainerContractInfoBase.java:71)
    at org.glassfish.persistence.jpa.PersistenceUnitInfoImpl.<init>(PersistenceUnitInfoImpl.java:108)
    at org.glassfish.persistence.jpa.PersistenceUnitLoader.loadPU(PersistenceUnitLoader.java:155)
    at org.glassfish.persistence.jpa.PersistenceUnitLoader.<init>(PersistenceUnitLoader.java:120)
    at org.glassfish.persistence.jpa.JPADeployer$1.visitPUD(JPADeployer.java:224)
    at org.glassfish.persistence.jpa.JPADeployer$PersistenceUnitDescriptorIterator.iteratePUDs(JPADeployer.java:495)
    at org.glassfish.persistence.jpa.JPADeployer.createEMFs(JPADeployer.java:233)
    at org.glassfish.persistence.jpa.JPADeployer.prepare(JPADeployer.java:168)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:410)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1066)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
    at org.glassfish.admin.rest.ResourceUtil.runCommand(ResourceUtil.java:214)
    at org.glassfish.admin.rest.ResourceUtil.runCommand(ResourceUtil.java:207)
    at org.glassfish.admin.rest.resources.TemplateListOfResource.createResource(TemplateListOfResource.java:148)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.SubLocatorRule.accept(SubLocatorRule.java:134)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.server.impl.container.grizzly.GrizzlyContainer._service(GrizzlyContainer.java:182)
    at com.sun.jersey.server.impl.container.grizzly.GrizzlyContainer.service(GrizzlyContainer.java:147)
    at org.glassfish.admin.rest.adapter.RestAdapter.service(RestAdapter.java:148)
    at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
    at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
    at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
|#]

[#|2012-10-01T09:23:36.641+0400|INFO|glassfish3.1.2|org.glassfish.admingui|_ThreadID=119;_ThreadName=Thread-2;|Exception Occurred :Error occurred during deployment: Exception while preparing the app : Invalid resource : Vodafone__pm. Please see server.log for more details.|#] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-23T00:13:56.140

1.  转到 http://localhost:4848
2.  单击左侧导航树中的 JDBC 并展开它，选择 JDBC Connection Pool
3.  创建您的连接池
4.  为您的连接池创建一个 JNDI 名称
5.  重试部署您的应用程序。

祝帕特里克好运

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T08:40:33.070

解决方案是使资源成为应用程序范围的资源。确保 JNDI 名称以 java:app/ 为前缀。因此，在您的情况下，它将是 java:app/Vodafone。这应该在您的 persistence.xml 文件和 WEB-INF/glassfish-resources.xml 文件中完成。[在此处](http://www.oracle.com/technetwork/articles/java/pongegf-1517943.html)查找更多详细信息

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-03T13:15:28.883

有同样的问题。我在 persistence.xml 中的 jta-data-source 值前面放了一个 jdbc/，它解决了这个问题。希望这可以帮助某人。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T06:52:27.853

试试这个建议。 [http://blog.pinateknoloji.com/glassfishapplication-scoped-resources](http://blog.pinateknoloji.com/glassfishapplication-scoped-resources)

这个对我有用。您需要在 glassfish-resources.xml 中定义您的数据源并将此文件放入您的 WEB-INF。请记住在您的数据源前面加上 java:app/，以便它读取 java:app/Vodafone。并在您的 persistence.xml java:app/Vodafone 中使用此值

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-12T09:44:23.257

这是我遇到的故障案例。在这里，我将创建用于 MySQL 连接的 JNDI glassfish 手工工艺品。你对你的数据库做同样的事情。根据 NetBean 中的 glassfish-resources.xml 文件，您是否配置了 JNDI 属性以相应地适应

[http://dev.mysql.com/doc/connector-j/en/connector-j-usagenotes-glassfish-config.html](http://dev.mysql.com/doc/connector-j/en/connector-j-usagenotes-glassfish-config.html)

# java - 是否可以更改与表名不同的 BO 类名？

> ID：12667938
> 
> 赞同：2
> 
> 时间：2012-10-01T05:32:13.580
> 
> 标签：java, hibernate, struts

我正在使用struts，现在我有一个问题：BO类的名称是否可能与数据库中的表名不同？当我更改名称时，它会出错

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:39:23.473

如果您使用注释，请检查与您的对象关联的表名。

```
@Entity
@Table(name = "yourtablename")
public class YourClass {...} 
```

# azure - azure acs 错误 ID 1113 指定的 acs 服务命名空间和管理密钥组合无效

> ID：12667941
> 
> 赞同：3
> 
> 时间：2012-10-01T05:33:01.777
> 
> 标签：azure, asp.net-4.5

即使我提供了正确的管理服务密钥，我也会收到错误消息

```
error ID 1113 The specified acs service namespace ' xyz 'and management key combination is invalid 
```

![在此处输入图像描述](../Images/47d0f55424873cd0406607c20e7479a3.png)

我正在使用 VS2012

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T06:44:59.647

在 ACS 中，您在管理 ACS 命名空间时拥有用于签署令牌的密钥和用于身份验证的密钥。使用身份和访问工具时需要使用的工具是管理任务的关键。这是**管理密钥**或管理服务凭据，可通过以下操作找到：

1.  登录到 ACS 门户，然后单击 左侧导航中**管理**下的**管理服务。**
***   在**Management Service Accounts**下，单击**ManagementClient**（默认管理服务帐户）。*   在**Edit Management Service Account**页面上，在**Credentials**下单击**Symmetric Key**。*   在**Edit Management Credential**页面上，抓取如下所示的密钥：**

 **![在此处输入图像描述](../Images/846b4581490abfa19fc5caa44027bd12.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T06:27:29.547

确保您不使用新的管理门户来创建 ACS 命名空间。此外，您的命名空间不应以“-sb”结尾，如果您创建新的 ServiceBus，则会自动发生这种情况。有关详细信息，请参阅[http://acs.codeplex.com/discussions/402589#post941177](http://acs.codeplex.com/discussions/402589#post941177)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-04T20:39:21.277

如果您使用的是 VS2012，它不起作用。使用密码而不是对称密钥。检查[这个](http://tapanila.net/windows-azure-active-directory-access-control-with-visual-studio-2012/)**

# c# - 使用 rest api 编辑文件信息

> ID：12667942
> 
> 赞同：0
> 
> 时间：2012-10-01T05:33:10.737
> 
> 标签：c#, oauth

我正在使用 4shared rest api，并通过 http put 编辑文件信息。我这样编码：

```
public void UpdateFile(string fileID, string accessToken, int uniqueID)
{
  Action<string> OnResponse = this.OnFileUpdate;
  string uri = string.Format("http://api.4shared.com/v0/files/fileID.json?oauth_token=             {1}&UniqueID={2}",accessToken,uniquesID);
  uri=uri + "&name=mayank&description=This is for testing.";
  HttpWebRequest request = (HttpWebRequest)WebRequest.Create(new Uri(uri));            
        request.Method = "PUT";
        request.ContentType = "application/x-www-form-urlencoded";
        request.BeginGetResponse(delegate(IAsyncResult result)
        {
            HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(result);
            using (var stream = response.GetResponseStream())
            {
                using (StreamReader reader = new StreamReader(stream))
                {
                    string response1 = reader.ReadToEnd();
                    onResponseGot(response1);
                }
            }
        }, null);
}

private void OnFileUpdate(string result)
{
        if (!string.IsNullOrEmpty(result))
        {
            //do some code after file updates.
        }
    } 
```

现在我得到了响应，但具有相同的旧值。我也尝试在 api 控制台上测试它，但结果是一样的。我没有发现问题。

# javascript - 需要正则表达式来验证字符串

> ID：12667944
> 
> 赞同：1
> 
> 时间：2012-10-01T05:33:18.077
> 
> 标签：javascript, regex

我想做一个正则表达式来验证特定类型的字符串。

验证字符串的条件如下：

*   字符串不应包含 \（反斜杠）、/（正
    斜杠）、:（冒号）、*（星号）、? (问号), " (双
    引号), < (左尖括号), > (右尖括号), | (竖线)
*   不要包含连字符 (-) 或句点 (.) 作为字符串的第一个或最后
    一个字符。

我尝试了很多但没有取得任何成功，因为我需要满足所有条件的单个正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T05:38:57.927

正则表达式可能包含所谓的“类”、预定义的或自定义的字符集。尝试使用预定义的 [:alpha:] 或自定义的 [0-9*.><] 等。了解使用“^”字符进行类否定，并通过在特殊字符前面加上“\”来转义特殊字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T05:43:31.373

尝试：

```
/^[^.\-][^\/:*?"<>|]+[^.\-]$/ 
```

**编辑：**这个正则表达式应该工作：

```
/^(?![.\-])(?:[^\\\/:*?"<>|])*[^.\-\\\/:*?"<>|]$/ 
```

但是正如您所看到的，它变得非常难以阅读和丑陋，我认为您最好使用如下函数逐步完成它：

```
function isValidString(str) {
  return /^[^.\-]/.test(str) &&
    /[^.\-]$/.test(str) &&
    /[^\\\/:*?"<>|]+/.test(str);
} 
```

# python-2.7 - 如何在使用迭代器读取文件时使用pyparsing匹配多行

> ID：12667952
> 
> 赞同：2
> 
> 时间：2012-10-01T05:34:12.547
> 
> 标签：python-2.7, pyparsing

在我的 Pyparsing 语法的定义中，有一些语法会匹配跨越多行的字符串。如果我像这样使用api：

```
PyGrammar.parseString(open('file_name').read()) 
```

如果将以正确的方式运行。

但是，如果我想使用迭代器来读取文件，例如

```
with open('file_name') as f:
   for line in f:
      PyGrammar.parseString(line) 
```

解析器将中断

有没有办法解决这种情况。谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T02:56:48.803

根据 Paul（pyparsing 的作者）

```
with open('file_name') as f:
   for line in f:
      PyGrammar.parseString(line) 
```

上面的代码不是使用 pyparsing 的正确方法。Pyparsing 需要在解析文本之前查看所有源文本。所以当我用每一行文本调用 parseString 时，它不起作用。另一种解决方法是为其使用包装器。喜欢：

```
 # set up a generator to yield a line of text at a time
    linegenerator = open('big_hairy_file.txt')
    # buffer will accumulate lines until a fully parseable piece is found
    buffer = ""

    for line in linegenerator:
        buffer += line

        match = next(grammar.scanString(buffer), None)
        while match:
            tokens, start, end = match
            print tokens.asList()

            buffer = buffer[end:]
            match = next(grammar.scanString(buffer), None) 
```

# java - 如何使用java，android检测我们的png图像中的透明区域

> ID：12667954
> 
> 赞同：4
> 
> 时间：2012-10-01T05:34:25.417
> 
> 标签：java, android, android-canvas

我想检测图像的透明区域，并希望将第二张图像与第一张图像的透明区域合并......与android中的java部分......

我已经完成了合并图像的编码，但它没有合并到第一张图像的透明区域......

```
 public Bitmap combineImages(Bitmap c, Bitmap s) {
    Bitmap cs = null;

    int width, height = 0;

    if (c.getWidth() > s.getWidth()) {
        width = c.getWidth() + s.getWidth();
        height = c.getHeight();
    } else {
        width = s.getWidth() + s.getWidth();
        height = c.getHeight();
    }

    cs = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);

    Canvas comboImage = new Canvas(cs);

    comboImage.drawBitmap(c, 0f, 0f, null);
    comboImage.drawBitmap(s, 0f, 0f, null);

    return cs;
  } 
```

# java - _filename.java 在java中的含义

> ID：12667957
> 
> 赞同：0
> 
> 时间：2012-10-01T05:34:51.600
> 
> 标签：java

> **可能重复：**
> [java中是否有标准在变量或类名前使用_ [下划线]](https://stackoverflow.com/questions/1899683/is-there-a-standard-in-java-to-use-underscore-in-front-of-variable-or-class)

谁能说出 java 文件名前的下划线是否具有特殊含义或它只是一个普通的 java 文件？（意味着我们可以有一个名为 _abc.java 的 java 文件作为普通的 java 文件，或者它有一些特殊的功能）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:36:51.080

它与其他 Java 文件类似，但遵循这些命名约定以将文件与其他文件区分开来。

比方说，在您的项目中，您想要定义一些特殊的常量或想要有一些特殊的功能，那么您应该以这样的方式命名文件，以便于区分。`_`适合它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T05:44:05.087

没什么特别的。但这仅仅意味着代码不遵守Sun 给出的[标准 java 约定](http://www.oracle.com/technetwork/java/codeconventions-150003.pdf)

# android - 在android中添加图像代替文本

> ID：12667960
> 
> 赞同：-4
> 
> 时间：2012-10-01T05:35:03.720
> 
> 标签：android

我想添加一个图像（动画 gif）代替文本。假设当我输入 CAT（关键字）时，Edittext 中的 CAT 关键字被替换为猫的图像......我需要一些指南......谢谢......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T05:39:38.317

Android**不支持 .gif**文件。如果你想做第二件事，那么添加一个按钮并在其点击侦听器上使文本视图可见性变为**GONE**，图像视图可见性变为可见，**给出**图像路径。

# iphone - 保存方向错误的图像

> ID：12667964
> 
> 赞同：3
> 
> 时间：2012-10-01T05:35:49.957
> 
> 标签：iphone, ios, xcode

我正在使用`AGImagepickerContoller`它可以从相机胶卷中保存多张图像，我以这种方式保存在`successBlock`：

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory,    NSUserDomainMask ,YES );
    NSString *documentsDir = [paths objectAtIndex:0];
    NSString *savedImagePath = [documentsDir stringByAppendingPathComponent:[NSString stringWithFormat:@"oneSlotImages%u.png", i]];

    ALAssetRepresentation *rep = [[info objectAtIndex: i] defaultRepresentation];
    UIImage *image = [UIImage imageWithCGImage:[rep fullResolutionImage]];

    //----resize the images
    image = [self imageByScalingAndCroppingForSize:image toSize:CGSizeMake(256,256*image.size.height/image.size.width)];

    NSData *imageData = UIImagePNGRepresentation(image);
    [imageData writeToFile:savedImagePath atomically:YES]; 
```

我的问题是保存时，并在我的预览中加载。它看起来像这样： ![在此处输入图像描述](../Images/4e7802f1e6d3f74f643b94c2597162e4.png)

我想要的是在预览中像这样：

![在此处输入图像描述](../Images/bdb4dcf768d2c5893ccc347372291313.png)

我[在上传后阅读了这个 iOS UIImagePickerController 结果图像方向](https://stackoverflow.com/questions/5427656/ios-uiimagepickercontroller-result-image-orientation-after-upload)。

但我不太明白我应该把它放在我的代码中的什么地方。希望有人可以指导我的问题。谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-19T06:12:52.607

这是方法，传递任何方向的 UIImage 它将返回纵向图像

```
-(UIImage*)rotateUIImage:(UIImage*)src {

    // No-op if the orientation is already correct
    if (src.imageOrientation == UIImageOrientationUp) return src ;

    // We need to calculate the proper transformation to make the image upright.
    // We do it in 2 steps: Rotate if Left/Right/Down, and then flip if Mirrored.
    CGAffineTransform transform = CGAffineTransformIdentity;

    switch (src.imageOrientation) {
        case UIImageOrientationDown:
        case UIImageOrientationDownMirrored:
            transform = CGAffineTransformTranslate(transform, src.size.width, src.size.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;

        case UIImageOrientationLeft:
        case UIImageOrientationLeftMirrored:
            transform = CGAffineTransformTranslate(transform, src.size.width, 0);
            transform = CGAffineTransformRotate(transform, M_PI_2);
            break;

        case UIImageOrientationRight:
        case UIImageOrientationRightMirrored:
            transform = CGAffineTransformTranslate(transform, 0, src.size.height);
            transform = CGAffineTransformRotate(transform, -M_PI_2);
            break;
        case UIImageOrientationUp:
        case UIImageOrientationUpMirrored:
            break;
    }

    switch (src.imageOrientation) {
        case UIImageOrientationUpMirrored:
        case UIImageOrientationDownMirrored:
            transform = CGAffineTransformTranslate(transform, src.size.width, 0);
            transform = CGAffineTransformScale(transform, -1, 1);
            break;

        case UIImageOrientationLeftMirrored:
        case UIImageOrientationRightMirrored:
            transform = CGAffineTransformTranslate(transform, src.size.height, 0);
            transform = CGAffineTransformScale(transform, -1, 1);
            break;
        case UIImageOrientationUp:
        case UIImageOrientationDown:
        case UIImageOrientationLeft:
        case UIImageOrientationRight:
            break;
    }

    // Now we draw the underlying CGImage into a new context, applying the transform
    // calculated above.
    CGContextRef ctx = CGBitmapContextCreate(NULL, src.size.width, src.size.height,
                                             CGImageGetBitsPerComponent(src.CGImage), 0,
                                             CGImageGetColorSpace(src.CGImage),
                                             CGImageGetBitmapInfo(src.CGImage));
    CGContextConcatCTM(ctx, transform);
    switch (src.imageOrientation) {
        case UIImageOrientationLeft:
        case UIImageOrientationLeftMirrored:
        case UIImageOrientationRight:
        case UIImageOrientationRightMirrored:
            // Grr...
            CGContextDrawImage(ctx, CGRectMake(0,0,src.size.height,src.size.width), src.CGImage);
            break;

        default:
            CGContextDrawImage(ctx, CGRectMake(0,0,src.size.width,src.size.height), src.CGImage);
            break;
    }

    // And now we just create a new UIImage from the drawing context
    CGImageRef cgimg = CGBitmapContextCreateImage(ctx);
    UIImage *img = [UIImage imageWithCGImage:cgimg];
    CGContextRelease(ctx);
    CGImageRelease(cgimg);
    return img;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-01T06:16:14.080

导入该类别方法并将其放在像这样调整大小之前。

```
image  = [self fixOrientation]; //Put it like this.    
image = [self imageByScalingAndCroppingForSize:image toSize:CGSizeMake(256,256*image.size.height/image.size.width)]; 
```

//调整图片大小

或者你也可以在调整大小后放置它，

```
//----resize the images
image = [self imageByScalingAndCroppingForSize:image toSize:CGSizeMake(256,256*image.size.height/image.size.width)];
image  = [image fixOrientation]; //Put it like this. 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-21T05:31:34.647

彻底解决了我的问题！

我对图像方向感到非常沮丧，也意外地在我的 ImageViews 中旋转了 90 度，直到我将代码中的一行从 PNG 更改为 JPEG（似乎保留了原始方向数据）：

我更换了：

```
let data = UIImagePNGRepresentation(imageView.image!) 
```

和：

```
let data = UIImageJPEGRepresentation(imageView.image!, 100) 
```

感谢 Tomasz Nguyen [MFMailComposeViewController 图像方向的相关回答一百万](https://stackoverflow.com/questions/20204495/mfmailcomposeviewcontroller-image-orientation/25550859#25550859)

希望这可以帮助那里的人:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-01T06:24:54.043

```
UIImage *temp = [UIImage imageWithCGImage:imgref scale:1.0f orientation:UIImageOrientationUp]; 
```

# android - android : 使用 OAuth 登录到 gmail 以检索帐户详细信息

> ID：12667976
> 
> 赞同：1
> 
> 时间：2012-10-01T05:37:15.580
> 
> 标签：android, oauth, google-api

在我使用来自 Google API 的 Google OAuth 的应用程序中，我想获取用户帐户详细信息。用户将输入他的用户名和密码并登录。我看到了检索用户联系方式的样本。我的要求是获取用户帐户详细信息，例如全名、个人资料照片等。

我想我可以做类似于检索联系人的操作，但我无法找到用于获取帐户详细信息的“SCOPE”。

请帮助我提供有关此主题的正确指针或任何示例应用程序/文档。

多谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T08:59:17.073

我得到了答案范围 - [https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)

返回 youraccess_token = access_token

获取[https://www.googleapis.com/oauth2/v1/userinfo?alt=json&access_token=youraccess_token](https://www.googleapis.com/oauth2/v1/userinfo?alt=json&access_token=youraccess_token)

你会得到 json ：

{ “id”：“xx”，“name”：“xx”，“given_name”：“xx”，“family_name”：“xx”，“链接”：“xx”，“图片”：“xx”，“性别”：“xx”，“语言环境”：“xx”}

# erlang - 嵌入式应用程序的“Erlang”与“zeromq+任何语言”

> ID：12667983
> 
> 赞同：5
> 
> 时间：2012-10-01T05:38:07.580
> 
> 标签：erlang, zeromq

我想为嵌入式处理器编写演员风格的代码，我试图在用 Erlang 编写所有内容与用 zeromq+任何语言编写所有内容之间做出决定。从某种意义上说，使用 zeromq 看起来非常强大，因为我可以使用任何编程语言并使我的开发变得更加容易（许多可用的库），但是我不确定这种能力是否有任何陷阱？我知道 Erlang 可以更好地表示演员模型，尤其是使用 OTP 概念，但是用 zeromq 表示类似的演员模型似乎很容易？我看对了吗？

1\. 如果不将 Erlang 用于嵌入式应用程序（不需要分布式处理，Erlang 的一个要点），并且只是在 zeromq 等通用消息传递框架之上构建东西，我真的会失去什么？

2\. Erlang 为非分布式嵌入式应用程序提供的不仅仅是协调的消息传递框架吗？

3\. Erlang 的哪些具体功能可能需要很长时间才能用 zeromq 实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T19:46:56.087

你在比较苹果和橘子。使用 Erlang 的部分优势在于*语言*。如果您要将它与 zmq + 其他语言相提并论，那么比较中的其他语言确实很重要。zmq + ARM 组装？Erlang 带来了非手工编码 ASM 的所有美妙优势。

至于 Erlang 还带来了什么，[Embedded Erlang？Absolutely](http://www.1011ltd.com/web/blog/post/embedded_erlang)认为 Erlang 在容错、热代码加载、利用 Erlang 和 OTP 的快速开发、与 C 库的轻松交互以及通过实时 REPL 和复制粘贴术语进行简单调试等方面具有优势。

其中一些东西，例如热重载、设备上 REPL 和已建立的库，肯定需要一些真正的黑客才能从头开始重现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T19:59:36.063

我的观点是，您必须非常努力地在 Zmq 中获得相同类型的错误处理。当事情开始变糟时，Erlang 有一些非常好的内置错误处理。Erlang 花费了大量时间优化该部分并使其健壮。

另一方面，当您进行简单的基准测试时，Zmq 在某些语言的某些组合中可能更快。开销更少，因此它处理消息的速度可能比 Erlang 所能提供的更快。

但很有可能你最终会用你选择的语言重新实现大部分 Erlang。而且你可能不会像在 Erlang/OTP 上工作了 15 年的 6 到 10 名开发人员那样出色。

另一方面，Erlang 不是一门简单易学的语言。除了学习如何以功能风格进行编程之外，还有更多的方法。尤其是并发模式和故障处理可能需要一些时间来适应。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-14T12:56:57.517

[ZeroMQ =/= Erlang](http://www.rabbitmq.com/blog/2011/06/30/zeromq-erlang/)涵盖了许多不同之处。声称 ZeroMQ 只提供消息传递方面，而不提供轻量级流程、流程监控和其他方面。

# php - 如何从图像资源创建图像

> ID：12667990
> 
> 赞同：0
> 
> 时间：2012-10-01T05:38:43.017
> 
> 标签：php, image-processing

我的代码有什么问题..

我有一个图像。我把它分成几块。现在我将每个分割图像的资源存储在数组中。问题：如何从这些资源创建图像。数组元素的数据类型是资源。

```
<?php
include "game_db.php";
  $img="6eplzcnl.png";
  echo"<img src='$img'>";

    $img=imagecreatefrompng($img);

     $width = imagesx($img);
    $height = imagesy($img);

    $tile_width =50;//$_POST['width'];
    $tile_height =50;// $_POST['height'];

    //find no. of tiles in columns and rows
     $tiles_x = (int) $width/ $tile_width;
    $tiles_y = (int) $height / $tile_height;
    header("Content type: image/png");
    //cut big image into tiles
    for ($i=0, $k=0;$i<$tiles_x;$i++)
        for ($j=0;$j<$tiles_y;$j++, $k++)
        {

            $tile[$k] = imagecreatetruecolor($tile_width, $tile_height);
            imagecopyresized($tile[$k], $img, 0, 0, $tile_width* $i, $tile_height * $j, $tile_width, $tile_height, $tile_width, $tile_height);
        }

    //find only unique tiles
    for ($i=0;$i<$k;$i++)
    {
        if (sizeof($res)==0)
        {    
          $res[0] = imagecreatetruecolor($tile_width, $tile_height);
            imagecopy ($res[0],$tile[$i],0,0,0,0,$tile_width, $tile_height);
        }
        else
        {
            //check if tile matches any in the res array
            for ($j=0;$j<sizeof($res);$j++)
            {
                if (tile_match($tile[$i], $res[$j])==true) break;

            }
            //if reached end of array then add the nex tile
            if ($j==sizeof($res))
            { $res[$j] = imagecreatetruecolor($tile_width, $tile_height);
                imagecopy ($res[$j],$tile[$i],0,0,0,0,$tile_width, $tile_height);
            }
        }
    }

    //save all res tiles into a large image
    $finalimg = imagecreate (sizeof($res) * $tile_width, $tile_height);
    for ($i=0;$i<sizeof($res);$i++)
    {   echo "<br>";
    echo  gettype($res[$i]);

    //$res[$i] = base64_decode($res[$i]);
     //$im = imagecreatefromstring($res[$i]);
    //if ($im !== false) {
   // header('Content-Type: image/png');
   //imagepng($res[$i]);
    //imagedestroy($res[$i]);
     //}

        //imagecopy ($finalimg, $res[$i], $i * $tile_width, 0, 0, 0, $tile_width, $tile_height);
    }

    // set name of file

    function tile_match($a, $b)
    {

        $awid = imagesx ($a);
        $ahei = imagesy ($a);

        $bwid = imagesx ($b);
        $bhei = imagesy ($b);

        if (($awid!=$bwid)||($ahei!=$bhei)) return false;

        for ( $i=0;$i<$ahei;$i++)
        {

        for($j=0;$j<$awid;$j++)
        {
             $rgb1 = imagecolorat($a,$i,$j);
                 $rgb2 = imagecolorat($b,$i,$j); 
                 if($rgb1==$rgb2){}
                 else 
                 {return false; }

        }

        }

        return true;
    }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T05:44:14.590

通过图像复制重新采样

见文档：

[http://php.net/manual/en/function.imagecopyresampled.php](http://php.net/manual/en/function.imagecopyresampled.php)

# android - 如何从库项目中的活动中确定 Android 应用程序版本是专业版还是精简版？

> ID：12667991
> 
> 赞同：1
> 
> 时间：2012-10-01T05:38:54.930
> 
> 标签：android, android-manifest, android-activity

我目前正在通过使用库来保存所有重要代码（包括我的活动），将我的免费版本更改为 lite+pro 组合。基本上我打算做的是在代码中添加一行检查正在运行的应用程序是专业版还是精简版，并相应地修改应用程序的外观和功能。我只是不确定那条线应该是什么。

所以说我从清单启动的活动是`com.example.myapp.lib.MainActivity`，我的两个包是`com.example.myapp`和`com.example.myapp.pro`。我可以调用什么函数来检查当前正在运行的包是什么？

我突然想到我可以通过`preference.xml`每个应用程序中的文件来做到这一点。那会更好吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T05:51:49.533

您只需要从您的活动中调用 Activity.getPackageName

# java - android 内联类

> ID：12667993
> 
> 赞同：2
> 
> 时间：2012-10-01T05:38:57.617
> 
> 标签：java, android

这可能是一个愚蠢的问题，但我已经考虑了一段时间，我不知道它到底叫什么。

因此，对于 Android，对于 OnClickListeners、OnTouchListeners 等，您可以执行以下操作：

```
 bio.setOnCancelListener(new OnCancelListener() {

        public void onCancel(DialogInterface arg0) {
            // TODO Auto-generated method stub
        }
    }); 
```

几乎是在制作一个新的内联类。这在 Java 中叫什么，还是 Android 特有的东西？基本上，发生这种情况时会发生什么？由于 On[blah]Listeners 是接口，您是否几乎创建了一个实现 OnCancelListener 的内部类？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T05:42:12.847

你是对的。您正在创建一个匿名内部类，它将实现 OnCancelListener 所需的方法。

请参阅： [Java 中如何使用匿名（内部）类？](https://stackoverflow.com/questions/355167/how-are-anonymous-inner-classes-used-in-java)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T05:41:25.583

它们在 Java 中。它们被称为匿名类，因为它们没有任何名称。

这就是 java 试图解决其无法支持**闭包**（一种流行的语言特性）的方式。.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-01T05:43:00.553

它被称为匿名类。

# ruby - 重复排列

> ID：12667996
> 
> 赞同：5
> 
> 时间：2012-10-01T05:39:03.937
> 
> 标签：ruby

我知道如何创建值数组的排列。例如：

```
[*1..3].permutation(2) 
```

这导致以下六个排列：

```
[1, 2]
[1, 3]
[2, 1]
[2, 3]
[3, 1]
[3, 2] 
```

但是这个结果缺少三个排列，它们是相同值的组合，即：

```
[1, 1]
[2, 2]
[3, 3] 
```

我怎样才能得到所有的排列，包括上面重复的排列？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-01T05:45:07.993

尝试[#repeated_permutation](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-repeated_permutation)：

```
[*1..3].repeated_permutation(3).to_a

 > pp [*1..3].repeated_permutation(3).to_a
[[1, 1, 1],
 [1, 1, 2],
 [1, 1, 3],
 [1, 2, 1],
 [1, 2, 2],
 [1, 2, 3],
 [1, 3, 1],
 [1, 3, 2],
 [1, 3, 3],
 [2, 1, 1],
 [2, 1, 2],
 [2, 1, 3],
 [2, 2, 1],
 [2, 2, 2],
 [2, 2, 3],
 [2, 3, 1],
 [2, 3, 2],
 [2, 3, 3],
 [3, 1, 1],
 [3, 1, 2],
 [3, 1, 3],
 [3, 2, 1],
 [3, 2, 2],
 [3, 2, 3],
 [3, 3, 1],
 [3, 3, 2],
 [3, 3, 3]] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-01T05:56:56.843

我注意到您的问题要求*组合*，但您的示例使用了*重复排列*。如果您真的对生成实际组合感兴趣，那么一种快速而肮脏的方法是：

```
>> x = [* ?a..?c]
=> ["a", "b", "c"]
>> (0..x.length).each{|i| x.combination(i){|y| p y}}
[]
["a"]
["b"]
["c"]
["a", "b"]
["a", "c"]
["b", "c"]
["a", "b", "c"] 
```

# xcode - 如何使用旧版本的 Xcode 支持更大的 iPhone 5 屏幕？

> ID：12667998
> 
> 赞同：3
> 
> 时间：2012-10-01T05:39:17.250
> 
> 标签：xcode, xcode3.2, iphone-5

我使用**Xcode 3.2**开发了一个 iOS 应用程序，我想发布一个支持更大 iPhone 5 屏幕的应用程序的新版本。

我在应用程序委托中尝试了以下操作：

```
[window setFrame:[[UIScreen mainScreen] bounds]];
[window addSubview:viewController.view];
[window makeKeyAndVisible];

CGRect screenBounds = [[UIScreen mainScreen] bounds];

NSLog(@"%@",[NSValue valueWithCGRect:screenBounds]);
// NSRect: {{0, 0}, {320, 480}} 
```

如您所见，高度设置为 480pt。如何添加对 iPhone 5 更高屏幕的支持？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T09:13:51.480

将新的标准`Default-568h@2x.png`图像添加到您的主包并在 iPhone 5 上运行您的应用程序。如果它没有以完整分辨率显示，您可能需要升级您的 Xcode 版本并针对更新的 iOS SDK 编译应用程序。Xcode 3.2 已经被弃用了一段时间。

**编辑**看来，只需`Default-568h@2x`在早期的 SDK 上添加启动图像就可以像提到的 OP 一样工作。这很容易知道。

作为旁注，新的[iPhone 5 发布图像名称还有另一个答案](https://stackoverflow.com/questions/12497776/new-image-name-for-iphone-5)

# java - 如何对这些 JAXB 类型的类进行空值检查和索引检查

> ID：12667999
> 
> 赞同：0
> 
> 时间：2012-10-01T05:39:20.220
> 
> 标签：java, coding-style, jaxb

我得到了一个 XSD 文件来解组从外部 Web 服务返回的 XML。

我能够将收到的 XML 解组到 JAXB 类中。但是由于生成的 JAXB 类结构的深度，我不确定如何在检索值时对代码进行**空检查。**

检索学生姓名的示例，代码如下 -

```
jaxbResponse.getStudentDetails().get(0).getStudent().get(0).getName().get(0).getGivenName(); 
```

如果我必须对这段代码返回的列表进行**空**检查和**索引检查，它会变得非常混乱。**

这只是一个示例，我需要使用与上述代码类似的代码来获取大约 50 个参数。我不知道什么时候会得到**NullPointerException**或**IndexOutofBoundsException**。

我是使用 JaxB 类的新手，我需要一些帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T07:27:02.770

您的示例模式看起来像一个从简单生成的列表，`<xs:element minOccurs="{something}" maxOccurs="unbounded">`在这种情况下，您永远不应该得到一个`null`列表（尽管如果`minOccurs`为 0，您可能会得到一个空列表），并且您也不会从`null`列表中获取值。`@XmlElementWrapper`如果您有一个或您的架构将元素声明为可空的，您只需要担心空值。

如果没有看到（至少是从中提取）您的架构和/或生成的类，我不能更具体。