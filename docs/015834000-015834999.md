# StackOverflow 问答 15834000-15834999

# vb.net - Parallel.ForEach 每次都会给出不同的结果

> ID：15834003
> 
> 赞同：2
> 
> 时间：2013-04-05T12:28:08.320
> 
> 标签：vb.net, parallel-processing, task-parallel-library, parallel.foreach

请帮我将以下循环转换为并行循环。我尝试使用 Parallel.ForEach 和 ConcurrentBag 而不是 HashSet，但奇怪的是“Matched”每次返回不同的结果。

我想不通...是因为线程安全问题吗？

关键字列表包含大约 500 个唯一字符串，每个长度为 1-3 个单词。

项目包含大约 10000 个项目。

原始代码：

```
 Dim Items As IEnumerable(Of Item) = Db.Items.GetAll

    Dim Keywords As HashSet(Of String) 
    Dim Matched As HashSet(Of Item)

    For Each Item In Items

        For Each Keyword In Keywords

            If Regex.IsMatch(Headline, String.Format("\b{0}\b", Keyword), RegexOptions.IgnoreCase Or RegexOptions.CultureInvariant) Then 
                If Not Matched.Contains(Item) Then
                    Matched.Add(Item)
                End If

            End If

        Next

    Next 
```

尝试将其转换为

```
Dim Items As IEnumerable(Of Item) = Db.Items.GetAll

Dim Keywords As HashSet(Of String) 
Dim Matched As Concurrent.ConcurrentBag(Of Item)

Threading.Tasks.Parallel.ForEach(Of Item)(Items, Sub(Item)
    For Each Keyword In Keywords
        If Regex.IsMatch(Item.Title, String.Format("\b{0}\b", Keyword), RegexOptions.IgnoreCase Or RegexOptions.CultureInvariant) Then
            If Not Matched.Contains(Item) Then
            Matched.Add(Item)
            End If
       Continue For
      End If
   Next
End If 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T14:40:57.920

是的，您的代码当然不是线程安全的。使用线程安全集合不会使您的代码自动成为线程安全的，您仍然需要正确使用它们。

您的问题是，在一个线程上调用`Contains()`完成之后但之前`Add()`，`Add()`可以在另一个线程上调用（并且*在* `Contains()`执行时也可能发生同样的情况）。

您需要做的是：

1.  使用锁定（这意味着您不再需要使用线程安全集合）；或者
2.  使用类似的东西`ConcurrentHashSet`。.Net 中没有这样的类，但您可以`ConcurrentDictionary`改用（即使它不完全符合您的需求）。而不是你调用`Contains()`then `Add()`，你可以做`Matched.TryAdd(Item, True)`, where `True`is there 只是因为`ConcurrentDictionary`需要一些价值。

# javascript - Javascript拆分函数和Jquery不能一起工作

> ID：15834005
> 
> 赞同：5
> 
> 时间：2013-04-05T12:28:10.440
> 
> 标签：javascript, jquery

需要解析 URL 的 Get 变量。我制作了一个 document.location 的 jQuery 对象，然后使用 attr 函数获取搜索属性以获取所有变量。但是当我在它上面使用 split 函数并且之后使用 each() 时，它会给出错误，指出对象没有方法 each 。

```
TypeError: Object [object Array] has no method 'each' 
```

代码是：

```
 $(document.location).attr('search').split('&').each() 
```

我也尝试在第一个函数中使用搜索属性，但它不允许它，即 $(document.location.search) 给出错误。

我还检查了 split 函数返回的数据类型，控制台说它是一个对象，我也很困惑它应该是一个数组。

PS：以上所有代码都在 jQuery 的 document.ready 函数中

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T12:30:55.727

从对象创建 jQuery 对象`document.location`是没有意义的，因为它不是 DOM 元素。

只需`search`从对象中获取属性，并在循环数组时使用`$.each`方法，而不是元素：`.each`

```
$.each(document.location.search.split('&'), function(){
  ...
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T12:29:57.780

试试这个：

```
$.each($(document.location).attr('search').split('&'), function (index, value) {
    alert(index + ': ' + value);
}); 
```

jQuery[`.each()`](http://api.jquery.com/each/)方法用于迭代 jQuery 对象，为每个匹配的元素执行一个函数。

但是您从中得到的`$(document.location).attr('search').split('&')`是一个 JavaScript 数组，它显然没有“每个”方法：这就是您收到错误的原因。

要在 jQuery 中循环遍历数组，您需要使用[`$.each()`](http://api.jquery.com/jQuery.each/)上述方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:36:46.380

据我所知，JS 数组没有 each() 函数。

尝试

```
var search_arr = $(document.location).attr('search').split('&');
for (var s in search_arr) {
    console.log(search_arr[s];
} 
```

反而。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-05T12:30:19.203

jQuery 的`each()`函数是要自己调用的，直接从 jQuery 中调用；javascript 数组没有它作为函数，因为它不是那样构建的。

我想你正在寻找这个：

```
$.each($(document.location).attr('search').split('&'), function (index, value) {
    // stuff
}); 
```

# verilog - 我的 Verilog 行为代码得到正确模拟，但在 FPGA 上没有按预期工作

> ID：15834011
> 
> 赞同：0
> 
> 时间：2013-04-05T12:28:30.087
> 
> 标签：verilog, fpga, xilinx, modelsim

我使用状态机概念为展位乘数（基数 2）编写了一个行为程序。在使用 modelsim 进行程序模拟期间，我得到了正确的结果，但是当我将它移植到 fpga（spartan 3）时，结果并不如预期。

我哪里出错了？

```
module booth_using_statemachine(Mul_A,Mul_B,Mul_Result,clk,reset);

input Mul_A,Mul_B,clk,reset;
output Mul_Result;
wire [7:0] Mul_A,Mul_B;
reg [7:0] Mul_Result;

reg [15:0] R_B;
reg [7:0] R_A;
reg prev;
reg [1:0] state;
reg [3:0] count;

parameter start=1 ,add=2 ,shift=3;
always @(state)
begin

case(state)

  start:
   begin
      R_A   <= Mul_A;
      R_B   <= {8'b00000000,Mul_B};
      prev  <= 1'b0;
      count <= 3'b000;
      Mul_Result <= R_B[7:0];
     end

   add:
   begin

     case({R_B[0],prev})

         2'b00:
           begin
             prev <= 1'b0;
            end

         2'b01:
           begin
             R_B[15:8] <= R_B[15:8] + R_A;
         prev      <= 1'b0;
            end

         2'b10:
         begin
              R_B[15:8] <= R_B[15:8] - R_A;
              prev      <= 1'b1;
             end

         2'b11:
            begin
              prev <=1'b1;
             end

        endcase

    end

  shift:
   begin
     R_B  <= {R_B[15],R_B[15:1]};
     count <= count + 1;
    end

endcase

end  

  always @(posedge clk or posedge reset)
  begin

   if(reset==1)
      state <= start;

    else
      begin

        case(state)

            start:
              state <= add;

            add:
              state <= shift;

            shift:
              begin

                 if(count>7)
                  state <= start;

            else
              state <=add;

                end

     endcase
  end
  end   
 endmodule 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:50:29.093

您的组合`always`块中有一个不完整的敏感度列表。改变：

```
always @(state) 
```

至：

```
always @* 
```

这可能是合成锁存器。

`always`在组合块中使用阻塞分配。更改`<=`为`=`。

良好的综合和 linting 工具应该警告您这些构造。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:38:52.583

如果某些东西在模拟中起作用但在现实中不起作用，请遵循以下清单：

*   您是否已初始化每个寄存器？（是的）
*   您是否对每个时钟后传输的一个工作变量使用 2 个寄存器（否）（用于状态 2 信号/线路，例如 state 和 state_next 并在每个时钟 state_next 后传输到 state）

第二点的一个例子在[这里](http://www.asic-world.com/tidbits/verilog_fsm.html)，你需要下一个阶段逻辑，当前状态逻辑和输出逻辑。

有关如何为 FPGA 正确编码 FSM 的更多信息，请参见[此处](http://www.xilinx.com/training/free-video-courses.htm)（转到 HDL 编码技术 -> 基本 HDL 编码技术）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T14:35:29.320

你在这里遇到了各种各样的问题。

1.  您对第一个 always 块的敏感度列表不完整。您只是在看`state`，但还有许多其他信号需要在那里。如果您的工具支持它，请使用`always @*`，它会自动生成敏感度列表。更改此设置，您的代码将开始模拟，就像它在 FPGA 上运行一样。

    这隐藏了代码的其他问题，因为它导致信号在错误的时间更新。你已经设法让你的代码在模拟器中工作，但它是基于一个谎言。谎言是 , `R_A`, `R_B`, `prev`&`count`只`Mul_Result`依赖*于*状态的变化，但是还有更多的信号是该逻辑的输入。

2.  您陷入了 Verilog 关键字`reg`创建寄存器的陷阱。它没有。我知道这很愚蠢，但事实就是这样。这`reg`意味着它是一个可以从程序块分配给的变量。`wire`s 不能分配给程序块内。

    当您在时钟程序块（见脚注）中分配某些内容时，会创建一个寄存器，例如您的`state`变量。`R_A`, `R_B`,`prev`和`count`所有似乎都跨周期保存值，因此需要是寄存器。我会像这样更改代码：

首先，我会创建一组`next_*`变量。这些将包含我们在下一个时钟每个寄存器中想要的值。

```
reg [15:0] next_R_B;
reg [7:0]  next_R_A;
reg        next_prev;
reg [3:0]  next_count; 
```

然后我会改变时钟进程来使用这些：

```
always @(posedge clk or posedge reset) begin

 if(reset==1) begin
   state <= start;
   R_A   <= '0;
   R_B   <= '0;
   prev  <= '0;
   count <= '0;

 end else begin
   R_A   <= next_R_A;
   R_B   <= next_R_B;
   prev  <= next_prev;
   count <= next_count;

   case (state)
   ..... 
```

然后最后更改第一个过程以分配给`next_*`变量：

```
always @* begin
  next_R_A   <= R_A;
  next_R_B   <= R_B;
  next_prev  <= prev;
  next_count <= count;

  case(state)

    start: begin
      next_R_A   <= Mul_A;
      next_R_B   <= {8'b00000000,Mul_B};
      next_prev  <= 1'b0;
      next_count <= 3'b000;
      Mul_Result <= R_B[7:0];
    end

    add: begin

      case({R_B[0],prev})
        2'b00: begin
          next_prev <= 1'b0;
        end

    ..... 
```

笔记：

*   所有寄存器现在都有一个重置
*   任何寄存器的`next_`值都默认为其先前的值。
*   `next_`值永远不会被读取，除了时钟进程
*   非`next_`值永远不会被写入，除非在时钟进程中。

我还怀疑您想`Mul_Result`成为一个`wire`并拥有它，`assign Mul_Result = R_B[7:0];`而不是成为另一个仅在启动状态下更新的寄存器，但是我不确定您要在那里做什么。

* * *

*   寄存器通常是 a `reg`，但 a`reg`不一定是寄存器。

# jquery - 用于可过滤投资组合的多种数据类型 HTML/jQuery

> ID：15834020
> 
> 赞同：2
> 
> 时间：2013-04-05T12:28:52.577
> 
> 标签：jquery, html

我正在尝试自定义 Asta 的[可过滤投资组合](http://mazeofminds.com/533/filterable-portfolio-powered-by-jquery/)插件。

该插件的作用是仅显示所选类别的图像。它使用“数据类型”将特定图像链接到一个类别，如下所示：

```
<li data-id="id-1" data-type="blackandwhite"> 
```

我的问题是；是否可以为一个列表项提供多种数据类型？如果是这样，怎么做？

我尝试搜索这个问题，但奇怪的是找不到这个看似简单的问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:09:31.707

是的，有可能。该插件使用`li[data-type~=+$filterClass+]`名为“属性包含单词”的选择器。这意味着您可以添加多种类型，以空格分隔：例如`<li data-id="id-1" data-type="blackandwhite red someothercategory">`

# java - 如何配置 JToolBar 的框架？

> ID：15834025
> 
> 赞同：0
> 
> 时间：2013-04-05T12:29:00.803
> 
> 标签：java, swing, toolbar, visible, jtoolbar

[http://i.stack.imgur.com/YhSE3.png](http://i.stack.imgur.com/YhSE3.png)

在我将“toolbar.setVisible(false)”设置为 false 后，jtoolbar 被隐藏，但 jframe 仍在屏幕上？我该如何处理那个临时框架？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:07:32.563

I close JFrames with `JFrameName.setVisible(false)` it will hid it but if you want to use the same window again you will have to reset the window when you make it visable again.

# iphone - 如何检查多个按钮单击并将值保存在plist上？

> ID：15834028
> 
> 赞同：-7
> 
> 时间：2013-04-05T12:29:03.843
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我有 6 个`UIButtons`。

*   简单的

*   难的

*   加

*   减

*   划分

*   乘

可以一次单击`"Easy mode"`还是`"Hard mode"`一个按钮？

我可以同时点击任何按钮和多个按钮（加、减、乘、除）吗？

现在我想一次单击一个或多个按钮将只获得这些按钮的值。

方法

*   易加
*   容易加减
*   容易加、减、除
*   容易 - 乘，除，减
*   容易加、减、除
*   easy-减、乘、加

与“硬”案例相同。

这些是条件。但我想计算常见的分数。如何存储这些值并保存`NSMutableArray`？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-05T13:11:15.043

*如果我明白你想要什么，那么这里有一些逻辑。您可以添加/删除以满足您的要求。

**在这里直接输入，可能有错误/错别字。请考虑。*

在您的接口文件中：

```
@property BOOL yourChoice;//0-easy, 1-hard
@property BOOL plus;
@property BOOL minus;
@property BOOL divide;
@property BOOL multipy;
@property (strong) NSInteger score;
@property (strong) NSMutableArray *scores; 
```

在您的实现文件中：

```
-(IBAction)easy:(id)sender{
    yourChoice=0;
}

-(IBAction)hard:(id)sender{
    yourChoice=1;
} 
```

在选择操作方法中，而不是标签，我用标题检查它以使其可读。

```
//NSString *title=[(UIButton *)sender currentTitle]; //to get name in ios
-(IBAction)choices:(id)sender{// i have used osx style
     NSString *title=[(UIButton *)sender currentTitle];
     if([title isEqualToString:@"Plus"]) plus=1;
     else if([title isEqualToString:@"Minus"]) minus=1;
     else if([title isEqualToString:@"Divide"]) divide=1;
     else if([title isEqualToString:@"Multiply"]) multiply=1;
     self.score=plus+minus+divide+miltiply;
}

-(IBAction)showScore:(id)sender{
   NSString *choice=yourChoice?@"Hard":@"Easy";
   NSLog(@"Score for %@ is %d.", choice, self.score);

   self.scores[self.scores.count]=@(self.score);
   //reset every value
   youChoice=plus=minus=divide=multiply=score=0;

} 
```

# c# - 值转换器不被称为 XAML

> ID：15834029
> 
> 赞同：0
> 
> 时间：2013-04-05T12:29:05.330
> 
> 标签：c#, xaml, windows-phone-8

我在值转换器中放置了断点，它们从未被触发，但页面呈现时没有显示图像。

XAML：

```
xmlns:datatypes="clr-namespace:DataTypes_Portable;assembly=DataTypes_WinPhone8"
...
<phone:PhoneApplicationPage.Resources>
    <datatypes:WinPhone8ImageConverter x:Key="ImageConverter" />
</phone:PhoneApplicationPage.Resources>
...
<Image x:Name="LevelImage" HorizontalAlignment="Left" Height="Auto" VerticalAlignment="Top" Width="Auto" Margin="0" Grid.ColumnSpan="5" Source="{Binding Converter={StaticResource ImageConverter}, Path=App.Main.Game.CurrentLevel.CurrentPart.Image}"/> 
```

反恐精英：

```
public class WinPhone8ImageConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        var imageProvider = value as WinPhone8ImageProvider;
        return imageProvider.Image;
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

据我所知（通过试验和消除过程并查看引发了哪些异常），问题出在我试图绑定到值的 XAML 的一部分。

在断点处的值`App.Main.Game.CurrentLevel.CurrentPart.Image`被正确设置（即是 的一个实例`WinPhone8ImageProvider`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:21:59.023

事实证明，这根本与转换器无关。该值在图像加载之前绑定（因此源为空）。以供将来参考检查以确保您`INotifyPropertyChanged`在视图模型中正确实施。

# java - Android，从 url 获取文本在 Eclipse 中可以正常工作，但在设备上却不行

> ID：15834032
> 
> 赞同：0
> 
> 时间：2013-04-05T12:29:14.033
> 
> 标签：java, android

正如标题所暗示的，这段代码在 Eclipse 中运行良好，但是一旦我导出并尝试仅在设备上使用它，它就不会降低任何东西，只是返回 null。

它应该从 url 读取文本并将其显示在文本视图中

我不知道我做错了什么，它可能相当简单，但我只是看不到它

```
public class nextEvent extends Activity implements OnClickListener {

String Event;
TextView eventText;
TextView titleText;

String HTML;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.newevent);

    titleText = (TextView) findViewById(R.id.Title);
    eventText = (TextView) findViewById(R.id.Event);

            try { 
            getHTML();
        } catch (Exception e) {
            e.printStackTrace();
        }       
            eventText.setText("" + HTML);
    }

private void getHTML() throws ClientProtocolException, IOException 

{
    HttpClient httpClient = new DefaultHttpClient();
    HttpContext localContext = new BasicHttpContext();
    HttpGet httpGet = new HttpGet("http://masterzangetsu.eu/Apps/rocksoctest"); //URL!
    HttpResponse response = httpClient.execute(httpGet, localContext);
    String result = "";

    BufferedReader reader = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));

    String line = null;
    while ((line = reader.readLine()) != null) {
        result += line + "\n";
        HTML = result;
    }

}

public void onClick(View v) {
    // TODO Auto-generated method stub

} 
```

继承人的xml

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/scroller"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:fillViewport="true" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/Title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:text="Upcoming Events"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/Event"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/Title"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="44dp"
        android:text="Sever Event Update Failed" />

</RelativeLayout>

</ScrollView> 
```

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:32:25.397

您的模拟器可能运行的是比您的设备更旧的 Android 版本，并且您正在隐藏错误的 try-catch 块内的 UI 线程上执行网络调用；）较旧的模拟器可以正常工作。您的设备不允许这样做。使用 AsyncTask{} 进行网络调用。

为了说明这一点，摆脱你的 e.printStackTrace() 并在其中放置一个 Log.e() 转储到 LogCat。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:32:26.993

您正在`Http`. 可能您使用比您的设备 ( )`UI Thread`更旧的版本设置了您的模拟器。您应该使用or执行每个潜在的阻塞调用`Android` `(pre 3.0)``probably post 3.0``Thread``AsyncTask`

# asp.net - linq 列表中的 where 子句

> ID：15834033
> 
> 赞同：0
> 
> 时间：2013-04-05T12:29:20.920
> 
> 标签：asp.net, linq

H，我有一个订单列表，我正在尝试过滤此列表。到目前为止，我有：

```
 Dim orders = _orderController.LoadAll().ToList() 
```

这确实给了我一个可以在gridview上显示的订单列表。

我怎么能过滤这个列表*说*：`where order.referencenumber = "abc123"`

并且只在列表中给我一个订单以显示在gridview中

干杯，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:31:13.037

试试这个：

VB：

```
Dim orders = _orderController.LoadAll().Where(Function(c) c.referencenumber = "abc").ToList(); 
```

C＃：

```
var orders = _orderController.All().Where(o => o.referencenumber = "abc123").ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:32:57.313

您应该`Where`在致电之前应用该条款`ToList`

```
 Dim orders = _orderController.LoadAll().Where(Function(c) c.referencenumber = "abc").ToList() 
```

你应该检查你 在文档中找到的[例子](http://msdn.microsoft.com/en-us/library/bb534803%28v=vs.100%29.aspx)

# c# - stdole.dll 已经从不同的位置加载？

> ID：15834038
> 
> 赞同：4
> 
> 时间：2013-04-05T12:29:37.680
> 
> 标签：c#, .net

我正在尝试在 Visual Studio 2010 中构建一个由多个项目组成的解决方案，但是其中一个项目在我编译它时给了我一个奇怪的错误：

```
Cannot load referenced assembly: C:\Windows\assembly\GAC\stdole\7.0.3300.0_b03f5f711d50a3a\stdole.dll
System.IO.FileLoadException - API restriction: The assembly 'file:\\\<same as above>' has already loaded from a different location. It cannot be loaded from a new location within the same appdomain. 
```

起初我虽然需要删除这个 stdole.dll 引用，所以我删除了它。但是，删除它后，我收到以下错误：

> 找不到类型或命名空间“stdole”（您是否缺少 using 指令或程序集引用？）

再次添加引用再次给出了第一个错误。

我明白为什么我得到最后一个错误，但我不明白为什么我得到第一个。我是 .NET 的新手，并且是我目前公司中唯一一个对 C# 有任何经验的人，这意味着这里没有人可以帮助我。我也花了一些时间尝试在线查找解决方案，但我在该领域缺乏经验，这让我很难找到我能理解的答案。

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-14T14:26:31.083

您可以直接按地址添加对文件的引用，例如：

C:\WINDOWS\assembly\GAC\stdole\7.0.3300.0__b03f5f7f11d50a3a\stdole.dll

不是来自 GAC（注册程序集）

# c++ - ifstream 在尝试读取文本文件时设置故障位

> ID：15834041
> 
> 赞同：0
> 
> 时间：2013-04-05T12:29:45.283
> 
> 标签：c++

我的问题是尝试读取文本文件时直接设置了“故障位”。至少对我来说，奇怪的是，如果我构建并运行程序，它就可以工作。但是当我尝试调试它时，故障位设置。

我得到的实际错误信息是这样的：

> “Steg1_1A.exe 中 0x7740c41f 处的未处理异常：Microsoft C++ 异常：内存位置 0x003bf8e4 处的 std::ios_base::failure ..”

控制台程序的文本是这样的：“ios_base::failbit set”。

问题是，我该如何解决，以便在调试时 failbit 不会“使程序崩溃”？

这是我的功能：

```
void selectedMenuChoice(int choice)
{
int index = 0, initValue = 0;
const int fileNumberCount = 24;
double numFromFile = 0.0, sum = 0.0, average = 0.0, max = 0.0, min = 0.0;

switch (choice)
{
    // "Display temperature values"
    case 1:
        cout << "\nDisplaying the latest 24 temperature values:\n\n";
        break;

    // "View maximum and minimum temperatures"
    case 2:
        cout << "\nCalculating the maximum and minimum temperature...\n";
        break;

    // "View average temperature"
    case 3:
        cout << "\nCalculating average temperature...\n";
        break;
}

ifstream file;

file.exceptions(ifstream::failbit | ifstream::badbit);
try 
{
    //////////////////////////////////////////////////////////////////////////
    //////////////////////////////////////////////////////////////////////////
    // Here is the problem. It throws an exception directly when debugging
    file.open("templog.txt"); // filnamnet 
    //file.fail();

    // "View maximum and minimum temperatures"
    if (choice == 2)
    {
        initValue = 1;
        file >> numFromFile;
        max = min = numFromFile;
    }

    // Loopar igenom filen dock baserat på ett konstantvärde.
    for (index = initValue; index < fileNumberCount; index++)
    {
        file >> numFromFile;

        switch (choice)
        {
            // "Display temperature values"
            case 1:
                if (index % 6 == 0)
                {
                    cout << endl;
                }
                cout << fixed << setprecision(2) << setw(8) << numFromFile;
                break;

            // "View maximum and minimum temperatures"
            case 2:
                if (numFromFile > max )
                {
                    max = numFromFile;
                }
                if (numFromFile < min)
                {
                    min = numFromFile;
                }
                break;

            // "View average temperature"
            case 3:
                sum += numFromFile;
                average = sum/24;
                break;
        }
    }

}
catch (ifstream::failure e) 
{
    //std::cerr << "Exception opening/reading file.";
    cout << e.what(); // Skriver ut vad felet egentligen är..
}

file.close(); 

// Skriver ut information till användaren baserat på valet som användaren har gjort
if (choice == 2)
{
    cout << "\nMaximum temperature: " << fixed << setprecision(2) << max <<" degrees Celcius\n";
    cout << "\nMinimum temperature: " << min << " degrees Celcius\n";
}

else if (choice == 3)
{
    cout << "\nAverage temperature: ";
    cout << fixed << setprecision(2) << average << " degrees Celcius\n";
}

continueOnKeyPressed();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:39:10.310

扩展之前的评论：

许多编译器会将可执行文件的调试和发布版本放在不同的目录中。如果`file.open("templog.txt");`在发布模式下工作但不在调试模式下工作，那可能是因为输入文件与该版本的可执行文件位于同一目录中。

为确保始终可以找到该文件，请在调用`open()`函数时使用完整路径名。

# php - 在 setInterval 中调用具有不同参数的函数

> ID：15834046
> 
> 赞同：0
> 
> 时间：2013-04-05T12:29:58.893
> 
> 标签：php, function, parameters, setinterval

我正在使用 setInterval 函数在特定时间间隔后调用函数。
**代码如下：**

```
var refreshIdd = setInterval(function() {
      loadData(page);
   },  <?= $h; ?>); 
```

**例如：**
如果时间间隔，即 $h 是 1000（1 秒），我必须使用参数 1 调用函数 loadData。在第二秒我必须调用 loadData 2。在每个时间间隔中，我必须通过 1,2， 3 等。如果 $h 是 2000 即 2 秒，我必须在第 2 秒后用参数 1 调用 loadData，在第 4 秒用参数 2 等等
我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:34:56.037

这是独立的`$h`。

用设置`page = 1`并做一个简单的增量`page++`。这将在`page`每次调用时增加 1 的值。

```
var page = 1;
var refreshIdd = setInterval(function() {
    loadData(page++);
},  <?=$h?>); 
```

请参阅[简单演示](http://jsfiddle.net/gC86v/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:36:05.240

您可以创建一个单独的函数来获取差异参数。

```
var paramValue = 0;

var refreshIdd = setInterval(function() {
      param = getParam();
      loadData(param);
   },  <?= $h; ?>);

function getParam() {
   return ++paramValue;
} 
```

（或者）

很简单，

```
var paramValue = 0;    
var refreshIdd = setInterval(function() {
      loadData(++paramValue);
   },  <?= $h; ?>); 
```

# java - 创建自定义异常并将其从服务器抛出

> ID：15834049
> 
> 赞同：0
> 
> 时间：2013-04-05T12:30:05.443
> 
> 标签：java, maven, client-server

如果您创建一个自定义运行时异常并从服务器应用程序抛出它，并且您有一个捕获它的 Swing 客户端，那么您应该将异常类保存在哪里，以便 EJB jar 和 Swing 应用程序在其类路径中都有异常？您是在域项目（它是一个 Maven）中创建它，它都包含在它们的类路径中还是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:32:39.420

我的项目中通常有三个罐子。

*   客户
*   api
*   服务器

客户端和服务器项目都依赖于 Api。我的 Api jar 将包含所有服务接口和共享数据对象。

根据您的问题，我会在 Api jar 中有此异常。

# oauth-2.0 - OpenAM 作为 OAuth 2.0 提供者和 java 客户端示例

> ID：15834055
> 
> 赞同：3
> 
> 时间：2013-04-05T12:30:13.777
> 
> 标签：oauth-2.0, openam

我正在尝试将 OpenAM 作为 OAuth 2.0 提供程序，并希望找到一个为此目的设置 OpenAM 的示例以及 Java 中的客户端代码。有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-09-14T08:44:11.247

我会先阅读官方文档： [AM 7 doc](https://backstage.forgerock.com/docs/am/7/oauth2-guide/oauth2-configure-authz.html)

要测试您的 oauth2 提供程序是否工作，您不需要客户端应用程序，只需要一个外壳来测试一些 curl 命令（即客户端凭据流程：获取令牌、自省令牌、撤销令牌）

至于您的真实测试，您可以在 github 上找到大量现成的应用程序，几乎所有供应商都有自己的存储库，其中包含 java、spring、python 中的测试应用程序......

[Okta 示例将在 openam 上完美运行](https://github.com/oktadev/okta-java-spring-sso-example)

[Keycloak 示例应用](https://github.com/keycloak/keycloak-quickstarts)

# html - 我如何从 Facebook 的点赞按钮、html 中过滤掉点赞

> ID：15834056
> 
> 赞同：1
> 
> 时间：2013-04-05T12:30:16.130
> 
> 标签：html, css, facebook-like

我在 fb 开发者页面上为页面创建了一个类似 fb 的按钮。现在我要修改的页面部分看起来像这个 atm

![在此处输入图像描述](https://i.stack.imgur.com/AQTyH.gif)

所以我的问题是我想过滤掉**喜欢**的东西（**188**）。并用这个 188 做一个小段落，比如

> 这个站点喜欢**188**

这是一个看起来应该如何的小例子。

![在此处输入图像描述](https://i.stack.imgur.com/iGXog.gif)

提前谢谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:38:04.240

您可以通过 ajax 调用此 url 来获得喜欢

[http://graph.facebook.com/https://www.facebook.com/Cyprusjetset](http://graph.facebook.com/https://www.facebook.com/Cyprusjetset)

```
$.ajax({
            type: "POST",
            contentType: "application/json; charset=utf-8",
            url: "http://graph.facebook.com/https://www.facebook.com/Cyprusjetset",
            dataType: "json",
            success: function (data) {
                alert(data.likes);
            },
            error: function (result) {
                alert("Sorry no data found.");
            }
        }); 
```

看到这个链接[http://jsfiddle.net/YFtvU/6/](http://jsfiddle.net/YFtvU/6/)

# java - 卡尺：微观和宏观基准

> ID：15834059
> 
> 赞同：4
> 
> 时间：2013-04-05T12:30:25.473
> 
> 标签：java, benchmarking, caliper, microbenchmark

对于[ELKI](http://elki.dbs.ifi.lmu.de/)，我需要（并且拥有）比标准 Java JDK 和 Collections API 提供的更灵活的排序实现。（排序不是我的最终目标。我使用部分排序来批量加载索引结构，例如 kd-tree 和 R*-tree，并且我想为这些提供一个相当通用的实现，比目前 ELKI 中的更通用- 但无论哪种方式，优化排序都意味着优化索引构建时间）。

但是，排序算法的缩放比例会因您的数据大小而异。对于微小的数组，插入排序可以很好地执行是一个众所周知的事实（事实上，大多数快速排序实现将回退到低于某个阈值的插入排序）；不是通过理论，而是通过排序理论未考虑的 CPU 流水线和代码大小影响。

所以我目前正在对一些排序实现进行基准测试，以找到满足我特定需求的最佳组合；我希望我更灵活的实现在某种程度上与 JDK 默认实现（已经微调，但可能适用于不同的 JDK 版本）相提并论。

从长远来看，我需要这些东西易于重现和重新运行。在某个时候，我们会看到 JDK8。在 Dalvik VM 上，结果也可能与 Java 7 不同。哎呀，它们甚至在 AMD、Core i7 和 Atom CPU 上也可能不同。所以也许 Cervidae 会包含不同的排序策略，并在类加载时间上选择最合适的一种。

我目前的工作在 GitHub 上：[https ://github.com/kno10/cervidae](https://github.com/kno10/cervidae)

所以现在到实际的问题。最新的 caliper 提交为宏基准添加了一些实验性代码。但是，我面临的问题是我需要*两者*。当运行时间小于定时器分辨率的 0.1% 时，Caliper 宏基准测试失败；对于 10000 个对象，一些算法达到了这个阈值。与此同时，微基准测试抱怨说，当你的运行时间太长时，你应该做一个宏基准测试……

因此，为了对不同的排序大小进行基准测试，我实际上需要一种根据运行时动态地从微基准测试切换到宏基准测试的方法。事实上，我什至更喜欢 caliper 自动意识到运行时对于宏基准测试来说足够大，然后只进行一次迭代。

现在，我正在尝试通过使用以下方法来模拟它：

```
@Macrobenchmark
public int macroBenchmark() { ... }

public int timeMicroBenchmark(int reps) {
    int ret = 0;
    for (int i = 0; i < reps; i++) {
        ret += macroBenchmark();
    }
} 
```

在两种情况下共享基准测试代码。另一种代码是使用

```
@Macrobenchmark
public int macroBenchmark() {
    return timeMicroBenchmark(1);
}

public int timeMicroBenchmark(int reps) { ... } 
```

两个“适配器”中哪一个更可取？从微观一直到宏观获得一致基准测试的任何其他提示？

鉴于 caliper WebUI 目前无法使用，您使用什么来分析结果？我目前正在使用一个小型 python 脚本来处理 JSON 结果并报告加权平均值。事实上，我更喜欢旧的文本报告而不是 Web UI。

哦，当热点编译发生在基准测试循环中时，有没有办法让 Caliper 重新运行基准测试？现在它记录了一个错误，但也许它可以重新启动基准测试的那部分？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T15:21:23.127

我认为问题在于微基准测试仪器的输出被误解为“投诉”。它说：

> “信息：此实验不需要微基准。计时器的粒度 (%s) 小于测量运行时间的 0.1%%。如果此基准的所有实验的运行时间都大于 %s，请考虑使用宏基准工具。”

该消息的措辞特别传达了*单个实验*很长，但由于该基准方法的其他实验可能不是，所以它肯定不是错误。微基准测试仪的开销要多一些，但是虽然您的实验可能*不需要*微基准测试，但结果仍然完全有效。

# c# - 不稳定的计算错误

> ID：15834063
> 
> 赞同：1
> 
> 时间：2013-04-05T12:30:40.620
> 
> 标签：c#, matrix

我需要计算矩阵： ( **X^(T)** * **X** ) **^(-1)**。代码和注释的图例：

```
x is double[,] array;
xT - transposed matrix
^(-1) - inverted matrix 
```

每次我生成新的随机矩阵来使用它时，我发现该程序非常不稳定，因为它不能与任何输入数据一起正常工作。我对此很确定，因为如果一切正常，我最终需要得到单位矩阵，但有时我会得到一个非常糟糕的反转矩阵，所以我没有得到单位矩阵。我很失望，因为我总是使用相同类型的数据并且不转换任何东西。编译器是MVS 2010。希望你能帮助我。

这是我的**Program.cs**：

```
 static void Main(string[] args)
    {

        Matrix x = new Matrix(5, 4);
        //Matrix temp = new Matrix(x.Row, x.Col);
        //double[] y = new double[x.Row];
        //double[] b = new double[x.Row];

        //this data isn't calculated correctly. used for debugging
        x.MatrixX[0, 0] = 7; x.MatrixX[0, 1] = 6; x.MatrixX[0, 2] = 5; x.MatrixX[0, 3] = 8;
        x.MatrixX[1, 0] = 7; x.MatrixX[1, 1] = 5; x.MatrixX[1, 2] = 8; x.MatrixX[1, 3] = 5;
        x.MatrixX[2, 0] = 6; x.MatrixX[2, 1] = 8; x.MatrixX[2, 2] = 6; x.MatrixX[2, 3] = 8;
        x.MatrixX[3, 0] = 8; x.MatrixX[3, 1] = 5; x.MatrixX[3, 2] = 8; x.MatrixX[3, 3] = 7;
        x.MatrixX[4, 0] = 8; x.MatrixX[4, 1] = 5; x.MatrixX[4, 2] = 6; x.MatrixX[4, 3] = 7;
        /*
        7,00000  6,00000  5,00000  8,00000
        7,00000  5,00000  8,00000  5,00000
        6,00000  8,00000  6,00000  8,00000
        8,00000  5,00000  8,00000  7,00000
        8,00000  5,00000  6,00000  7,00000
        */

        //random matrix generation
        /*
        Random rnd = new Random();
        for (int i = 0; i < x.Row; i++)
            for (int j = 0; j < x.Col; j++)
                x.MatrixX[i, j] = rnd.Next(5, 10);
         */

        /*i'm going to calculate: (  X^(T)  *  X  )^(-1)
         * 1\. transpose X
         * 2\. multiply X and (1)
         * 3\. invert matrix (2)
         * +4\. i wanna check the results: Multilate of (2) and (3) = Identity_matrix.
         * */
        Matrix.Display(x);

        //1
        Matrix xt = Matrix.Transpose(x);
        Matrix.Display(xt);

        //2
        Matrix xxt = Matrix.Multiply(x, xt);
        Matrix.Display(xxt);

        //3
        Matrix xxtinv = Matrix.Invert(Matrix.Multiply(x, xt));
        Matrix.Display(xxtinv);

        //4
        Console.WriteLine("Invert(xxt) * xxt. IdentityMatrix:");
        Matrix IdentityMatrix = Matrix.Multiply(xxtinv, xxt);
        Matrix.Display(IdentityMatrix);

        Console.ReadKey();
    } 
```

这是具有所有功能的**Matrix.cs ：**

```
public class Matrix
    {
        private double[,] matrix;
        private int row;
        private int col;

        #region constructors
        public Matrix(int Row, int Col)
        {
            this.row = Row;
            this.col = Col;
            matrix = new double[Row, Col];
        }

        public Matrix()
        {
            Random rnd = new Random();
            Row = rnd.Next(3, 7);
            Col = rnd.Next(3, 7);
            matrix = new double[Row, Col];
            for (int i = 0; i < Row; i++)
                for (int j = 0; j < Col; j++)
                    matrix[i, j] = rnd.Next(5, 10);
        }

        public Matrix(Matrix a)
        {
            this.Col = a.Col;
            this.Row = a.Row;
            this.matrix = a.matrix;
        }
        #endregion

        #region properties
        public int Col
        {
            get { return col; }
            set { col = value; }
        }
        public int Row
        {
            get { return row; }
            set { row = value; }
        }
        public double[,] MatrixX
        {
            get { return matrix; }
            set { matrix = value; }
        }
        #endregion

        static public Matrix Transpose(Matrix array)
        {
            Matrix temp = new Matrix(array.Col, array.Row);
            for (int i = 0; i < array.Row; i++)
                for (int j = 0; j < array.Col; j++)
                    temp.matrix[j, i] = array.matrix[i, j];
            return temp;
        }

        static public void Display(Matrix array)
        {
            for (int i = 0; i < array.Row; i++)
            {
                for (int j = 0; j < array.Col; j++)
                    Console.Write("{0,5:f2}\t", array.matrix[i, j]);
                Console.WriteLine();
            }
            Console.WriteLine();
        }

        static public Matrix Multiply(Matrix a, Matrix b)
        {
            if (a.Col != b.Row) throw new Exception("multiplication is impossible: a.Col != b.Row");

            Matrix r = new Matrix(a.Row, b.Col);
            for (int i = 0; i < a.Row; i++)
            {
                for (int j = 0; j < b.Col; j++)
                {
                    double sum = 0;
                    for (int k = 0; k < b.Row; k++)
                        sum += a.matrix[i, k] * b.matrix[k, j];
                    r.matrix[i, j] = sum;
                }
            }
            return r;
        }

        static public Matrix Invert(Matrix a)
        {
            Matrix E = new Matrix(a.Row, a.Col);
            double temp = 0;
            int n = a.Row;

            for (int i = 0; i < n; i++)
                for (int j = 0; j < n; j++)
                {
                    E.matrix[i, j] = 0.0;

                    if (i == j)
                        E.matrix[i, j] = 1.0;
                }

            for (int k = 0; k < n; k++)
            {
                temp = a.matrix[k, k];

                for (int j = 0; j < n; j++)
                {
                    a.matrix[k, j] /= temp;
                    E.matrix[k, j] /= temp;
                }

                for (int i = k + 1; i < n; i++)
                {
                    temp = a.matrix[i, k];

                    for (int j = 0; j < n; j++)
                    {
                        a.matrix[i, j] -= a.matrix[k, j] * temp;
                        E.matrix[i, j] -= E.matrix[k, j] * temp;
                    }
                }
            }

            for (int k = n - 1; k > 0; k--)
            {
                for (int i = k - 1; i >= 0; i--)
                {
                    temp = a.matrix[i, k];

                    for (int j = 0; j < n; j++)
                    {
                        a.matrix[i, j] -= a.matrix[k, j] * temp;
                        E.matrix[i, j] -= E.matrix[k, j] * temp;
                    }
                }
            }

            for (int i = 0; i < n; i++)
                for (int j = 0; j < n; j++)
                {
                    a.matrix[i, j] = E.matrix[i, j];
                }

            return a;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:52:16.107

在您的示例中， x * transpose(x) 的行列式为零。结果，没有逆向，这可能就是你得到奇怪结果的原因。

我还注意到您的`Inverse`函数修改了传递给它的矩阵。这可能应该被修改以避免这种情况。

# c# - 从 Windows 8 上的 Windows 服务打印失败

> ID：15834064
> 
> 赞同：7
> 
> 时间：2013-04-05T12:30:44.597
> 
> 标签：c#, windows, service, printing

我有一个用 C# .NET 编写的 Windows 服务应用程序。此应用程序用于通过将文档打印到生成 PDF 的本地软件打印机来生成报告 pdf。这在 Windows XP 和 Windows 7 上运行良好。不幸的是，我发现在 Windows 8 上它失败了。然后我发现当我从我的服务打印时，在 Windows 8 上打印到任何（甚至是物理）打印机都会失败。我的工作计划中缺少什么？我这样打印：

```
FlowDocument document = MyDocument;
var source = document as IDocumentPaginatorSource;
var documentPaginator = source.DocumentPaginator;

using (var printServer = new LocalPrintServer())
{
    PrintQueue queue = printServer.GetPrintQueue(printerName);
    XpsDocumentWriter docWriter = PrintQueue.CreateXpsDocumentWriter(queue);

    // Print ticket - Approach 1
    // PrintTicket printTicket = queue.DefaultPrintTicket.Clone();

    // Print ticket - Approach 2
    var printTicket = new PrintTicket
    {
        PageOrientation = PageOrientation.Landscape,
        PageMediaSize = new PageMediaSize(PageMediaSizeName.ISOA4), // set size of media (paper)
    };

    documentPaginator.PageSize = new Size(document.PageWidth, document.PageHeight);
    docWriter.Write(documentPaginator, printTicket);
} 
```

服务设置为“系统帐户”而没有“与桌面交互”（但我也尝试过或以本地用户身份登录）。

这会导致 Windows 8 出现异常。使用“打印票证 - 方法 1”时：

```
System.Printing.PrintQueueException: PrintTicket provider failed to bind to printer. Win32 error: -2147467231
at MS.Internal.Printing.Configuration.PTProvider..ctor(String deviceName, Int32 maxVersion, Int32 clientVersion)
at MS.Internal.Printing.Configuration.PTProviderBase.Create(String deviceName, Int32 maxVersion, Int32 clientVersion)
at System.Printing.PrintTicketManager..ctor(String deviceName, Int32 clientPrintSchemaVersion)
at System.Printing.PrintQueue.get_DefaultPrintTicket() 
```

使用“打印票 - 方法 2”：

```
Exception encountered: System.Printing.PrintQueueException: Fehler beim Binden des PrintTicket-Anbieters an den Drucker. Win32-Fehler: -2147467231
bei MS.Internal.Printing.Configuration.PTProvider..ctor(String deviceName, Int32 maxVersion, Int32 clientVersion)
bei MS.Internal.Printing.Configuration.PTProviderBase.Create(String deviceName, Int32 maxVersion, Int32 clientVersion)
bei System.Printing.PrintTicketManager..ctor(String deviceName, Int32 clientPrintSchemaVersion)
bei System.Printing.PrintQueue.get_UserPrintTicket()
bei System.Printing.PrintQueue.get_CurrentJobSettings()
bei System.Printing.PrintQueue.CreateSerializationManager(Boolean isBatchMode, Boolean mustSetJobIdentifier)
bei System.Windows.Xps.XpsDocumentWriter.BeginWrite(Boolean batchMode, Boolean asyncMode, Boolean setPrintTicketHandler, PrintTicket printTicket, PrintTicketLevel printTicketLevel, Boolean printJobIdentifierSet)
bei System.Windows.Xps.XpsDocumentWriter.Write(DocumentPaginator documentPaginator, PrintTicket printTicket) 
```

我会说该服务能够找到这些打印机，因为当我尝试打印到不存在的打印机时，我得到了“无效的打印机名称”异常。

在这里，我将为自己保留一些相关问题： [从 Windows 服务打印，从 Windows 服务](https://stackoverflow.com/questions/2850122/printing-from-a-windows-service)打印 [，](https://stackoverflow.com/questions/4945177/printing-from-a-windows-service) http [://social.msdn.microsoft.com/Forums/en-US/ieextensiondevelopment/thread/b74bd27d-1cc8-4fca -a6de-2cd1371cf3b7/](http://social.msdn.microsoft.com/Forums/en-US/ieextensiondevelopment/thread/b74bd27d-1cc8-4fca-a6de-2cd1371cf3b7/) ,

轻度相关： [从 .NET 服务打印](https://stackoverflow.com/questions/7990/printing-from-a-net-service)，

编辑：

如果有人有兴趣尝试 - 这是我的示例服务应用程序，它尝试将简单文档打印到配置文件中选择的打印机：http: [//bin.mypage.sk/FILES/PrintTestService.rar](http://bin.mypage.sk/FILES/PrintTestService.rar)

编辑2：

有趣的。当我尝试不同的打印代码时没有错误：

```
using (var printDocument = new PrintDocument())
{
    printDocument.PrinterSettings.PrinterName = printerName;
    printDocument.Print();
} 
```

不幸的是，这是一个使用 System.Drawing.Graphics 库的旧 GDI+ 代码，它与我的以 System.Windows.Media.Visual 对象形式生成分页文档的代码不兼容。所以我不能用它来打印我的文档，除非我想花两周的时间从头开始创建我的文档的分页。

编辑3：

这里有关于这个问题的讨论：http: [//social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/96e7fc10-3f08-4808-b748-692e30377293](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/96e7fc10-3f08-4808-b748-692e30377293) 有一个“解决方法”可以使用“任何CPU的平台。这种解决方法确实有效（我试过了），但是当我的服务需要 x86 时，它在我的情况下不可用。我已通过我们公司联系了 MS 支持以找到真正的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T07:41:05.837

解决方案：等待微软修复此错误。我已经报告了这个错误（REG:113040910349062），他们已经确认了，但修复不会很快（在接下来的几个月内）并且没有指定日期。

我们使用的解决方法：创建一个处理打印的小型应用程序，将其编译为“anyCPU”应用程序并从服务应用程序运行它（我无法将其编译为“anyCPU”——由于其依赖关系，我需要“x86”）。此解决方法已经过测试并且有效。但它很脏+导致开销+额外的照顾。

编辑：Microsoft 提供了一个修复程序，应该可以在 Windows 8 中解决此问题：http: [//support.microsoft.com/kb/2872151/EN-US](http://support.microsoft.com/kb/2872151/EN-US)（“您无法在基于 x64 的版本中从 32 位 WPF 应用程序打印Windows 8 或 Windows Server 2012")

编辑 (2013-11-04)：我们已经测试了该修补程序，但它不适用于 Windows 8 或 Windows 8.1。目前我们再次处于与微软沟通的阶段。

编辑（2014 年初）：我们收到了 Microsoft 的回复，他们不知道如何修复此错误并且该错误已关闭。因此，目前我们唯一的解决方案是将一个小型应用程序 exe 编译为 AnyCPU，由我们的 x86 服务调用。这种方法有效，但会导致速度变慢，因此我们的产品也更难维护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-04T19:45:34.380

在[http://social.msdn.microsoft.com/Forums/windowsdesktop/en-US/fdcfa0fa-50aa-4a61-be79-5b4c8f65fbf7/](http://social.msdn.microsoft.com/Forums/windowsdesktop/en-US/fdcfa0fa-50aa-4a61-be79-5b4c8f65fbf7/)我们看到这已报告给 Microsoft 并确认为 Windows 8 和 Windows Server 中的错误2012 年。

当尝试从非标准用户会话（如服务）中的 32 位进程打印时，会触发此错误。

根据微软的说法，这个错误在 Windows 8.1 和 Windows Server 2012 R2 中得到了解决。但是，我们仍然可以在 Windows 8.1 上重现它。

在同一站点上，Microsoft 提供了一种解决方法。此解决方法为我们在 Windows 8.1 上解决了问题。它可能也适用于 Windows 8 和 Windows Server 2012。

解决方法如下：

1.  打开 Regedit 并转到 HKEY_CLASSES_ROOT\CLSID{BA7C0D29-81CA-4901-B450-634E20BB8C34}

2.  检查“AppID”注册表项的值。在我们的例子中，这是 {AA0B85DA-FDDF-4272-8D1D-FF9B966D75B0}

3.  现在转到 HKEY_CLASSES_ROOT\AppID{AA0B85DA-FDDF-4272-8D1D-FF9B966D75B0} （或您在系统上找到的相应值）
4.  在此注册表项下，删除名称为“AccessPermission”、“LaunchPermission”和“RunAs”的条目

由于这是 Windows 中的错误，因此您无法在代码中修复它。解决方法可能会产生副作用，但到目前为止，我们还没有在我们的场景中看到任何副作用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-08T13:18:48.833

我有从 Windows 服务打印的相同经验，但我的问题出在 Windows Server 2008 中，我认为这是因为 Windows 服务不具备此功能。我阅读了很多博客等，但没有找到任何解决方案。我终于找到了一种方法，该服务调用另一个 exe 使用 microsoft 任务库进行打印。

# jquery - 如果图像已被丢弃，则禁用图像丢弃？

> ID：15834065
> 
> 赞同：0
> 
> 时间：2013-04-05T12:30:49.857
> 
> 标签：jquery, drag-and-drop, jquery-ui-draggable, jquery-ui-droppable

我有同样的问题，我有两个 div 标签，我想从动态创建的图像列表中拖动图像。但我想限制另一个图像被拖动到​​同一个 div 上。

[如果 div 已被删除，则禁用删除？](https://stackoverflow.com/questions/12639533/disable-drop-if-div-has-already-been-dropped)

我使用了 Jamiec 在其回答中所说的方法。

但是，继承人的问题是我遇到了一个我无法解决的错误

> 未捕获的类型错误：无法设置未定义的属性“originalPosition”

请有人帮助我消除此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T13:17:27.397

# 选项1

请检查演示。如果已经有一个元素被放置在 droppable 上，元素将始终恢复到它的原始位置。

```
$('#target').droppable({
    accept: ".dragme",
    drop: function(event, ui) {
       ui.draggable.addClass('dropped');
       ui.draggable.draggable( "disable" );
      $('#target').droppable( "option", "accept", "" );
    }
});

$('.dragme').draggable({
    revert : 'invalid'
}); 
```

**[演示](http://jsfiddle.net/maheshsapkal/4GmBT/3/)**

# 选项：#2

这是另一个演示，当一个新元素被删除时，现有的被删除元素将恢复到它的原始位置。

```
var droppedObj = null;
$('#target').droppable({
    accept: ".dragme",
    drop: function (event, ui) {
        if(droppedObj !== null) {
            droppedObj.animate({ left: '0px', top : '0px', opacity : 1 }, 200).removeClass('dropped');
            droppedObj.draggable("enable");
        }
        droppedObj = ui.draggable;
        ui.draggable.addClass('dropped').draggable("disable");
    }
});

$('.dragme').draggable({
    revert: 'invalid'
}); 
```

**[演示](http://jsfiddle.net/maheshsapkal/B2Y3R/)**

# c# - 如何防止在文本框 Windows 上粘贴 Alpha

> ID：15834066
> 
> 赞同：-1
> 
> 时间：2013-04-05T12:30:53.837
> 
> 标签：c#

我正在开发一个 Windows 应用程序，我很容易使用按键事件在文本框中输入唯一的数字。但我仍然可以在文本框中粘贴 alpha bates 我如何限制在文本框中粘贴 alpha bates

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:49:07.127

我们使用 TextChanged 事件。

```
private void textBox1_TextChanged(object sender, EventArgs e)
        {
            var rgx = new Regex(@"\D");
            textBox1.Text = rgx.Replace(textBox1.Text, "");
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:53:36.870

使用 KeyPress 事件，

```
private void textBox1_KeyPress(object sender, KeyPressEventArgs e)
        {
            if (!Char.IsDigit(e.KeyChar))
            {
                e.Handled = true;
            }
            else
            {
                e.Handled = false;
            }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:57:42.480

您没有明确说明您正在使用什么 UI 技术，但如果它是 WinForms，您可以尝试使用具有适当掩码属性设置的 MaskedTextBox。

[MSDN MaskedTextBox 掩码属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.maskedtextbox.mask.aspx)

# testing - 如何使用 XQuery 在 SoapUI 中迭代 SOAP 响应？

> ID：15834070
> 
> 赞同：1
> 
> 时间：2013-04-05T12:31:00.317
> 
> 标签：testing, soap, xquery

我有一个类似于这个的 SOAP 响应：

```
<items>
 <item date="2009-10-02"> </item>
 <item date="2010-10-02"></item>
 <item date="2012-10-02"></item>
</items> 
```

我需要使用 xQuery 和我已经拥有的正则表达式检查每个项目中的日期是否具有正确的格式。我已经尝试过迭代，但它一直警告我：“当前响应中有多个匹配项”。这是我已经尝试过的：

```
 let $items:= (//items)
 for $i in $items
    return 1 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:32:18.937

我终于自己找到了一些有用的东西：

```
for $z in //item[1]
return matches($z/@date, 'regularexp') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T16:00:55.827

如果您的查询处理器支持 XQuery 3.0 并且您**对所有日期的组合结果**感兴趣，请使用“every-satisfies”语法。

```
every $date in //item/@date satisfies matches($date, '[-\d]+') 
```

如果处理器不支持该语法，您可以使用如下内容：

```
not(//item/@date/matches(., '[-\d]+') != true()) 
```

如果它只支持 XQuery 1.0，您可能需要环绕`matches`XPath 序列：

```
not(matches(//item/@date, '[-\d]+') != true()) 
```

* * *

如果您对**单个值**感兴趣，请使用：

```
//item/@date/matches(., '[-\d]+') 
```

或者对于 XQuery 1.0：

```
for $date in //item/@date
return matches($date, '[-\d]+') 
```

# xml - XML -> Smarty foreach 和 if 条件

> ID：15834073
> 
> 赞同：0
> 
> 时间：2013-04-05T12:31:14.560
> 
> 标签：xml, smarty

我对结果的 smarty 模板代码有一些小问题。问题是接下来这段代码可以**正常工作**，但如果条件不给我 500 个结果。代码如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<source>
<publisher>CMS</publisher>
<publisherurl><![CDATA[{$GLOBALS.site_url}]]></publisherurl>

    {foreach from=$listings item=listing}

        {if $listing.Country =='USA' || $listing.Country == 'UK' || $listing.Country == 'Russia'}

    <job>
        {$listings.foreach.Country.total} Total results
        <title><![CDATA[{$listing.Title}]]></title>

        <date><![CDATA[{$listing.activation_date}]]></date>
        <referencenumber><![CDATA[{$listing.id}]]></referencenumber>
        <url><![CDATA[{$listing.listing_url}]]></url>
        <company><![CDATA[{$listing.user.CompanyName}]]></company>
        <city><![CDATA[{$listing.City}]]></city>

        <country><![CDATA[{$listing.Country}]]></country>

        <description><![CDATA[{$listing.JobDescription|strip_tags:false} {$listing.JobRequirements|strip_tags:false}]]></description>
        <salary><![CDATA[{$listing.Salary.value} {foreach from=$listing.SalaryType item=list_value name="multifor"}{tr domain="Property_SalaryType"}{$list_value}{/tr}{if !$smarty.foreach.multifor.last}, {/if}{/foreach}]]></salary>

        <jobtype><![CDATA[{foreach from=$listing.EmploymentType item=list_value name="multifor"}{tr domain="Property_EmploymentType"}{$list_value}{/tr}{if !$smarty.foreach.multifor.last}, {/if}{/foreach}]]></jobtype>

    </job>

        {/if}    

    {/foreach}    

</source> 
```

如果您看到或知道答案，请在下面发布，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T12:40:01.913

在 $listings 上的 php 中执行 var_dump。你有多少记录>

# c# - 用逻辑过滤字符串列表？

> ID：15834084
> 
> 赞同：2
> 
> 时间：2013-04-05T12:31:44.070
> 
> 标签：c#, asp.net

我有一个字符串列表。我需要能够以类似于谷歌查询的方式过滤它们。

前任：`NOT water OR (ice AND "fruit juice")`

意思是返回没有单词 water 的字符串，或者如果有冰和“果汁”，则返回可以有水的字符串。

.NET 中是否有一种机制可以允许用户以这种形式（比如在文本框中）编写查询，并给定一个 List 或 IEnumerable 字符串，返回包含它的那些。

LINQ 可以做这样的事情吗？

我知道我可以用 LINQ 做到这一点，我更关心将任意字符串解析为可执行表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:34:27.580

没有内置任何东西。

您将需要自己解析这样的字符串，并可能使用这些[`Expression`](http://msdn.microsoft.com/en-gb/library/system.linq.expressions.expression.aspx)类来构建一个可执行的表达式来进行过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:34:30.723

对于这个查询：**意思是返回没有单词 water 的字符串，或者如果有冰和“果汁”，则返回可以有水的字符串。**

如果您要使用，请尝试这样的事情`LINQ`

```
 yourList.Where(i => !i.Contains("water") || 
                (i.Contains("water") && 
                 i.Contains("ice") && 
                 i.Contains("fruit juice"))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:35:23.403

在 LINQ 中：`list.Where(item => !item.Contains("water") || (item.Contains("ice") && item.Contains("fruit juice")))`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:38:45.627

我认为我们无法使用代码示例回答您，因为正如您所说，这更合乎逻辑。

在这种情况下我会做的是有预定义的条件（保存在某处），其中将包含您需要的所有条件以及它们的“编码翻译”，例如：

*   和
*   或者
*   并不是
*   和或
*   ETC...

您在运行时要做的就是将这些条件/标准翻译成 sql 或 linq 或您需要将其传递给的任何语言。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-06T22:51:00.233

您可以尝试使用以下`DataTable.Select`方法：

```
public static class ExpressionExtensions {

  public static IEnumerable<T> Select<T>(this IEnumerable<T> self, string expression) {
    var table = new DataTable();
    table.Columns.Add("Value", typeof(T));

    foreach (var item in self) {
      var row = table.NewRow();
      row["Value"] = item;
      table.Rows.Add(item);
    }

    return table.Select(expression).Select(row => (T)row["Value"]);
  }

} 
```

但是你必须按照它的格式来创建你的表达式：

```
var filtered = strings.Select("NOT Value LIKE '*water*' OR (Value LIKE '*ice*' AND Value LIKE '*fruit juice*')"); 
```

另请注意，在这种情况下，由于 string`fruit juice`已经包含 string `ice`，因此第二个条件是多余的。您必须找到一种表达“单词”而不是“子字符串”的方法。

最后，您最好自己实现解析逻辑。

# sql-server - 使用 XPath 选择名称中带有点的 xml 节点

> ID：15834086
> 
> 赞同：4
> 
> 时间：2013-04-05T12:31:48.790
> 
> 标签：sql-server, xpath

我正在尝试使用 Sql Server 中的 XPath 选择以下 xml 文档的 Lookup.Result 元素的文本节点。

```
<Commands>
<Command id="1">
<Lookup.Result>Result.OK</Lookup.Result>
</Command>
</Commands> 
```

我尝试以下查询：

```
declare @xml xml
set @xml = '<Commands>
    <Command id="1">
    <Lookup.Result>Result.OK</Lookup.Result>
    </Command>
    </Commands>
'
select t.c.value('./Lookup&#46;Result/text()[1]', 'varchar(20)')
from @xml.nodes('/Commands/Command') t(c) 
```

但我收到以下错误：XQuery [value()]: Syntax error near 'Lookup'

我怎么能逃脱。（在 Lookup.Result 元素标记名称中的点）在 XPath 表达式中？请帮助找到一个优雅的解决方案来解决这个问题。提前感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:51:03.197

```
 declare @xml xml 
    set @xml = '<Commands>
    <Command id="1">
    <Lookup.Result>Result.OK</Lookup.Result>
    </Command>
    </Commands> ' 

    select t.c.value('(./Lookup.Result/text())[1]', 'varchar(20)') 
    from @xml.nodes('/Commands/Command') t(c) 
```

你错过了

> ()

围绕上面的 xpath，MSSQL 处理 . 在我的机器上很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:39:05.590

那么只有 5 个转义字符：

```
"   &quot;
'   &apos;
<   &lt;
>   &gt;
&   &amp; 
```

所以你需要一个函数来预处理然后和另一个后处理。即在 udf 中包装 5 个嵌套的 REPLACE 语句...

# actionscript-3 - Actionscript 帮助：1084：语法错误：在 abc 之前需要 rightparen

> ID：15834087
> 
> 赞同：0
> 
> 时间：2013-04-05T12:31:49.043
> 
> 标签：actionscript-3, variables, text, actionscript, urlrequest

我正在做一个项目，我需要在 URLRequest 中的文本之间放置一个变量

```
url4 = new URLRequest("text/"abc"/text.png"); 
```

有什么帮助吗？？顺便说一句，假设 abc 是我要放置的变量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:33:15.837

您可以`+`在 AS3 中一起添加字符串和变量。

```
url4 = new URLRequest("text/"+abc+"/text.png"); 
```

# svg - 为svg中四行之间的区域着色

> ID：15834089
> 
> 赞同：9
> 
> 时间：2013-04-05T12:31:52.323
> 
> 标签：svg

除了在多边形中使用“填充”之外，还有什么方法可以为四个点之间的区域着色？我用四条线绘制了一个多边形，

```
<line x1="0" y1="0" x2="300" y2="0" style="stroke:rgb(255,0,0);stroke-width:2"></line>
<line x1="300" y1="0" x2="300" y2="150" style="stroke:rgb(255,0,0);stroke-width:2"></line>
<line x1="300" y1="150" x2="0" y2="150" style="stroke:rgb(255,0,0);stroke-width:2"></line>
<line x1="0" y1="150" x2="0" y2="0" style="stroke:rgb(255,0,0);stroke-width:2"></line> 
```

我想为这些线之间的区域着色。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-16T22:13:14.320

不，没有，因为你并没有真正的填充形状。你只有四行碰巧相遇。

使用 a`rect`将是一个更好的选择：

```
<rect x="0" y="0" width="300" height="150" fill="pink"/> 
```

[http://jsfiddle.net/nfxTE/](http://jsfiddle.net/nfxTE/)

或者，您可以使用折线并为其添加填充，而不是做四条独立的线：

```
<polyline points="0,0 300,0 300,150 0,150 0,0"
style="fill: pink; stroke:red; stroke-width: 1"/> 
```

[http://jsfiddle.net/nfxTE/2/](http://jsfiddle.net/nfxTE/2/)

不使用多边形、折线（或类似的）和填充的唯一另一种方法是用宽笔画做一条线：

```
<line x1="0" y1="75" x2="300" y2="75" style="stroke:red ;stroke-width:150"></line> 
```

[http://jsfiddle.net/nfxTE/1/](http://jsfiddle.net/nfxTE/1/)

这假定填充将与笔划颜色相同。由于笔划在线条/形状的内部和一半之外，因此您必须将线条的坐标设置为所需起点和笔划宽度之间距离的一半。这里的笔画是 150，我们希望它从 0 开始，所以 y1 和 y2 点设置为 75。

# c# - 我无法从 xml 中获取价值

> ID：15834093
> 
> 赞同：0
> 
> 时间：2013-04-05T12:32:07.810
> 
> 标签：c#, xml, linq-to-xml

我有 xml

```
<?xml version="1.0" encoding="UTF-8"?>
<info lang="ru" xmlns:x="http://www.yandex.ru/xscript">
    <region id="213" lon="37.617671" lat="55.755768" zoom="10">
        <title>Москва</title>
    </region>
    <traffic lon="37.617671" lat="55.755768" zoom="10"region="213">
        <length>489164.0</length>
        <level>6</level>
        <icon>yellow</icon>
        <timestamp>1365162401</timestamp>
        <time>15:46</time>
        <url>http://maps.yandex.ru/moscow_traffic</url>
        <title>Москва</title>
    </traffic>
</info> 
```

我需要从“水平”中获得价值

```
public void GetText(string filename)
    {  
        try
        {
            XDocument xDocument = LoadPage(filename);
            if (xDocument.Root == null) return;
            XElement elem = xDocument.Root.Element("info");
            if (elem != null)
                foreach (var el in elem.Elements("traffic"))
                {
                    Name = el.Element("level").Value;
                };
        }
        catch (Exception e)
        {
            MessageBox.Show(e.Message);
        }
    } 
```

此代码块适用于另一个 xml。它找不到“信息”，并且 elem=null。这段代码有什么问题。或者我怎样才能以其他方式获得这个值。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:40:03.893

这就是问题：

```
XElement elem = xDocument.Root.Element("info"); 
```

在您给我们的 XML 中，是`xDocument.Root` *元素*`info`。只需将其更改为：

```
XElement elem = xDocument.Element("info"); 
```

这将检查根元素是否真的*是* `info`.

另一种选择是：

```
foreach (var el in xDocument.Elements("info")
                            .Elements("traffic")) 
```

`Elements(info)`这样，如果返回一个空集合，您就不会进入循环体。

编辑：如果您需要它处理*有时* `info`是根元素而有时不是根元素的文档，您可能需要使用：

```
foreach (var el in xDocument.Descendants("info")
                            .Take(1)
                            .Elements("traffic")) 
```

（不过在那种情况下很奇怪。）

# azure - Azure 云角色包括存储 = 额外费用？

> ID：15834094
> 
> 赞同：1
> 
> 时间：2013-04-05T12:32:10.180
> 
> 标签：azure, azure-web-roles

我目前正在为即将到来的 Azure 项目进行成本分析。我很想使用 Azure 云角色，因为它提供了一定数量的存储空间。但是，我有一种感觉，这太好了，令人难以置信。

因此，我想知道。您是否必须为此“包含”存储支付交易成本/存储成本？我在 Azure 网站上找不到任何关于此的信息，我希望尽可能准确（即使交易成本几乎为零）。

编辑：为了澄清，我特别想知道存储的交易成本。您是否必须为存储的每笔交易支付少量费用（例如使用 Blob/Table 存储），或者这也包含在报价中？

编辑 2：我说的是云服务（web/worker）中包含的存储，而不是单独的表/blob 存储。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:29:06.487

你能澄清一下你指的是哪个报价吗？

使用云服务（Web/worker 角色），每个 VM 实例都有一些与之关联的本地存储，这是免费的，并且由于它是本地磁盘，因此没有与此存储相关的交易或相关费用。正如 Rik 在他的回答中指出的那样，数据并不持久：它位于单个磁盘上，如果磁盘崩溃，它将永远消失。

如果您将数据存储在 Blob、表或队列（Windows Azure 存储）中，则按 GB 付费（异地冗余存储每月每 GB 0.095 美分，本地冗余存储每月每 GB 0.07 美元），每 100,000 笔交易一分钱。只要您的存储帐户与您的云服务位于同一数据中心，就不会产生数据出口费用。

现在我们回到您指的是哪个报价的问题。例如，90 天免费试用包含 70GB 的 Windows Azure 存储和每月 5000 万笔交易。MSDN 订阅还包含存储和事务。如果您只是使用即用即付订阅，您需要为存储和交易付费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:59:28.940

存储包括在内，但不保证是持久的。您的角色可能会在不同的物理位置关闭并启动，这不会影响您的角色的可用性，但是您将丢失您在存储中的所有内容，即包含的存储是非常临时的。

至于交易成本，您只需为传出数据付费，而不是传入数据或 Azure 中的数据（一个角色到另一个角色）。

您按 GB 支付，每 100.000 笔交易 0.01 美元

# mysql - MySQL SELECT查询中*和column_name有什么区别

> ID：15834095
> 
> 赞同：0
> 
> 时间：2013-04-05T12:32:16.083
> 
> 标签：mysql, select

这是一个例子：

表 1 -columnA -columnB

问题：

和有什么区别

```
SELECT * FROM Table1 
```

和

```
SELECT columnA, columnB FROM Table1 
```

我知道这两个查询返回相同的结果。但是有区别还是这两个查询做完全相同的事情？

此外，MySQL 服务器如何处理这些？

有人可以指出这方面的任何文件吗？

谢谢！

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T12:35:31.183

没有区别。这是列的投影问题。

使用 时`*`，您无法控制列名。它只是选择表中的所有列。

虽然指定列名可以更灵活，但*在我自己看来*，因为您可以给列名 an`alias`并且您可以在列中执行一些操作，例如将其传递给函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:36:09.460

从表 1 中选择 *

返回 Table1 中的所有列。

参考手册[http://dev.mysql.com/doc/refman/5.1/en/index.html](http://dev.mysql.com/doc/refman/5.1/en/index.html) (MySql 5.1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:39:21.053

这是区别：

```
select count(*) from table, count all registers on that table, 
```

非常相似

```
select count(1) from table, count all registers on that table 
```

和

```
select count(column_name) from table, 
```

计算该表上 column_name 不为空的所有寄存器

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:40:02.353

如果您专门选择列，然后通过添加、删除或重命名列来更改表的结构，您将被迫编辑查询以使其工作（或者，在添加列的情况下，包括附加数据）。选择`*`将加载所有列，无论这些列是什么，因此如果稍后更新表结构，您的查询仍将完全有效。

但是：如果您的查询要包含连接，则需要`*`在表名前面加上前缀，如果两个表都具有相同名称的列，则存在列名冲突的风险。因此，在连接查询的情况下，我认为从每个表中选择单个列总是一个好主意，而不是`*`从一个表中选择另一个表中的单个列。

选择单个列还允许您使用别名重命名列，如下所示：

```
SELECT column_1 AS first, column_2 AS second
FROM some_table 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-05T12:40:13.087

通常，避免使用“SELECT *”。它是邪恶的、缓慢的，并且当您在几个月后返回它时，会使您的代码更难阅读。相反，命名并限定您的列。为您的表实例（如果您愿意，也可以为您的列）命名...

```
SELECT x.something, y.something_else FROM my_table x JOIN my_other_table y ON y.id = x.id 
```

如果您查看我对 SO 的许多其他回复，您会发现我并不总是听从这个建议，但这仍然是个好建议！

# windows-8 - 无法捕获 Windows 8 的 IPv6 多播流量

> ID：15834096
> 
> 赞同：3
> 
> 时间：2013-04-05T12:32:22.930
> 
> 标签：windows-8, ipv6, multicast, winsock2, multicastsocket

以下是我编写的用于捕获来自多播地址 ff02::1 和端口 9154 的 IPv6 多播数据的函数。
此代码在 Windows Vista 和 Windows 7 上运行良好。但我无法为 Windows 8 捕获相同的流量（没有`winsock`函数返回 Win8 的错误）。

使用`netstat`我能够验证我的应用程序是否正在使用此端口。
任何人都可以帮忙吗？

```
void func()
{

    int multicastChannel = 0;
    char multicastIP[] = "FF02::1";
    char multicastPort[] = "9154";

    ADDRINFO*  multicastAddr  = NULL;
    ADDRINFO*  localAddr      = NULL;
    ADDRINFO   hints          = { 0 };

    struct ipv6_mreq multicastRequest6;

    hints.ai_family = PF_UNSPEC;
    hints.ai_flags  = AI_NUMERICHOST;

    if ( getaddrinfo(multicastIP, NULL, &hints, &multicastAddr) != 0 )
    {
        printf("getaddrinfo() failed");
        return;
    }

    hints.ai_family   = multicastAddr->ai_family;
    hints.ai_socktype = SOCK_DGRAM;
    hints.ai_flags    = AI_PASSIVE;

    if ( getaddrinfo(NULL, multicastPort, &hints, &localAddr) != 0 )
    {
        printf("getaddrinfo() failed");
        return;
    }

    multicastChannel = socket(localAddr->ai_family, localAddr->ai_socktype, 0);

    if ( bind(multicastChannel, localAddr->ai_addr, localAddr->ai_addrlen) != 0 )
    {
        printf("bind() failed");
        return;
    }

    memcpy(&multicastRequest6.ipv6mr_multiaddr,
           &((struct sockaddr_in6*)(multicastAddr->ai_addr))->sin6_addr,
           sizeof(multicastRequest6.ipv6mr_multiaddr));

    multicastRequest6.ipv6mr_interface = 0;

    if ( setsockopt(multicastChannel,
                    IPPROTO_IPV6,
                    IPV6_ADD_MEMBERSHIP,
                    (char*) &multicastRequest6,
                    sizeof(multicastRequest6)) != 0 )
    {
        ERROR_ReportError("setsockopt() failed");
    }

    freeaddrinfo(localAddr);
    freeaddrinfo(multicastAddr);

    ioctlsocket(multicastChannel, FIONBIO, &arg);

    sockaddr_in6 fromAddr;

    while(1)
    {
        read = recvfrom(multicastChannel,
                data,
                1500,
                0,
                (struct sockaddr*)&fromAddr,
                &sizeof(sockaddr_in6);

        if (read > 0) {
            function();
        }
    }
} 
```

# windows-installer - CLSID {00024500-0000-0000-C000-000000000046} - Microsoft.Office.Interop.excel.dll 错误

> ID：15834105
> 
> 赞同：1
> 
> 时间：2013-04-05T12:32:43.033
> 
> 标签：windows-installer, vsto

我们使用 Microsoft.Office.Interop.excel.dll 创建了一个小型 excel 应用程序，
我们希望在客户端发布这个应用程序。系统配置如下。
1）它是一个sharepoint server 2010。
2）它安装了office webapp。
客户无法在“office webapp”之上安装office 2010。

问题：在运行应用程序时，我们收到以下错误消息：

```
Exception for while Processing the file; error is: Retrieving the COM class factory for component with
 CLSID {00024500-0000-0000-C000-000000000046} failed due to the following error: 
80040154 Class not registered (Exception from HRESULT: 0x80040154 (REGDB_E_CLASSNOTREG)). 
```

许多人都面临这个问题，根据现有的博客，唯一的解决方案是安装 office 2010（我们不能这样做，因为它不可能在“office webapp”之上安装 office 2010，这似乎是一个技术问题。）

所以我们使用 C# .Net 构建了一个自定义 MSI 包并部署了所有依赖文件。
'Microsoft.Office.Interop.excel.dll'（包括 office.dll）

我们仍然得到同样的错误。无法分发office.dll？这是一个与许可相关的问题吗？有没有办法克服这个问题？
客户准备购买许可证，但由于某些技术问题无法安装。

在此先感谢，赫曼特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:14:19.420

唯一可用的可再发行组件是[VSTO 运行时](http://www.microsoft.com/en-us/download/details.aspx?id=35594)。但是，我的理解与您已经收到的建议相同，您需要安装 Office 客户端位才能与 Office 应用程序互操作。webapps 不符合条件。

# sql - 计算 ms sql 中选择的修改结果

> ID：15834115
> 
> 赞同：2
> 
> 时间：2013-04-05T12:33:24.187
> 
> 标签：sql, sql-server

我想根据返回的 2 个字段对 select 的结果进行计数，并且我使用 group by 子句来执行此操作。尽管我使用 substring 和 patindex 修改了返回的字段之一，以获取结果中冒号后的所有内容，因此我最终得到一个包含单词“paper”或“online”的列。我想计算论文和在线结果的数量，但我得到的结果是基于该领域的原始内容而不是基于我修改的内容。这就是我现在正在做的事情：

```
select field1, field2, 
       case when substring(field3, patindex('%:%',field3)+1, 6) = 'Paper' then 'paper' 
   else 'online' end, count(field3) 'Count'
from theTable
group by field2, field1, field3
order by field2, field1 
```

我也试过：

```
select field1, field2, 
       count(case when substring(field3, patindex('%:%',field3)+1, 6) = 'Paper' then 'paper' 
   else 'online' end) 'Count'
from theTable
group by field2, field1, field3
order by field2, field1 
```

我需要做什么才能获得我所追求的计数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:41:17.557

```
SELECT  field1,
        field2,
        SUM(CASE WHEN substring(field3, patindex('%:%', field3) + 1, 6) = 'Paper'
                THEN 1
                ELSE 0
        END) totalPaper,
        SUM(CASE WHEN substring(field3, patindex('%:%', field3) + 1, 6) <> 'Paper'
                THEN 1
                ELSE 0
        END) totalOnline,
        count(field3) TotalCount
FROM    theTable
GROUP   BY field2, field1
ORDER   BY field2, field1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/f5d13/4)

感谢[mellamokb](https://stackoverflow.com/users/116614/mellamokb)的小提琴链接。`:D`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:40:52.130

计算什么取决于`GROUP BY`. 所以你需要 group by 子句中的逻辑：

```
select field1, field2, 
   case when substring(field3, patindex('%:%',field3)+1, 6) = 'Paper'
       then 'paper'  else 'online' end 'Type', count(field3) 'Count'
from theTable
group by field2, field1, case when substring(field3,
       patindex('%:%',field3)+1, 6) = 'Paper' then 'paper'  else 'online' end
order by field2, field1 
```

演示：[http ://www.sqlfiddle.com/#!3/f5d13/3](http://www.sqlfiddle.com/#!3/f5d13/3)

# html - 文件选择器组件是否有可用的 ARIA 属性？

> ID：15834119
> 
> 赞同：4
> 
> 时间：2013-04-05T12:33:38.407
> 
> 标签：html, attributes, accessibility, wai-aria

检查[角色](http://www.w3.org/TR/wai-aria/roles#role_definitions)的定义以及W3C 的可访问富 Internet 应用程序 (WAI-ARIA) 规范的状态[和属性定义](http://www.w3.org/TR/wai-aria/states_and_properties#state_prop_def)，但似乎没有为文件选择器（或一般的文件上传器）定义任何角色或状态。有吗？在这种情况下他们有多需要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T12:31:24.170

如果您使用的是`<input type="file" />`，则不需要向其中添加任何 ARIA 角色，因为所需的内容已经内置。如果你运行了 W3C 验证器，它抛出了一些关于缺少一些与 aria 相关的属性的东西，现在只需忽略它。验证器在一两周前更新，一些错误被意外抛出。

# regex - 如何确保数字中的某些数字不相同

> ID：15834123
> 
> 赞同：2
> 
> 时间：2013-04-05T12:33:53.713
> 
> 标签：regex, position

我有几个数字字符串，如下所示：

```
0000000
0000011
0000012 
```

我想验证模式是这样的：

```
AAAAABC 
```

其中`A`和都是不同的数字`B`。`C`所以在例子中， only`0000012`应该匹配。

到目前为止，我的正则表达式是`(\d)\1\1\1\1\d\d`，但它不能确保数字不同。我需要做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:37:04.903

我想你想要

```
(\d)\1{4}(?!\1)(\d)(?!\1|\2)\d 
```

**解释：**

```
(\d)       # Match a digit, capture in group 1
\1{4}      # Match the same digit as before four times
(?!\1)     # Assert that the next character is not the same digit as before
(\d)       # Match another digit, capture in group 2
(?!\1|\2)  # Assert the next character is different from both previous digits
\d         # Match another digit. 
```

在[regex101](http://regex101.com/r/mP4rM0)上查看。

# file - 使用matlab匹配两个文件内容并将结果作为矩阵输出

> ID：15834127
> 
> 赞同：0
> 
> 时间：2013-04-05T12:34:17.220
> 
> 标签：file, matlab, matrix, match

我是 Matlab 的新手。我需要你的帮助来解决我的问题。我试图实现几个代码，但不幸的是我找不到解决方案。

我有一个文件，我需要将每一行与剩余的行进行比较，并将结果作为矩阵输出，其中包含匹配项的 1，否则为 0。如果使用示例中所示的 2 列和 3 列重叠两行，则矩阵有 1 。例如，我在文件中有以下行。

1×10 20 安

2 是 15 20 吨

3℃ 25 40 安

输出应该是：

```
 1    2     3       

1   0    1     0

2   1    0     0

3   0    0     0 
```

真的，我会很感激任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T15:59:57.793

应该这样做

```
% open file
fh = fopen('test.txt');

% read data (adjust 10000 if necessary)
dat = textscan(fh, '%d %s %d %d %s', 10000);

% extract high and low values
hi = dat{4};
lo = dat{3};

% create grid
[ hig, log ] = meshgrid(hi, lo');

% compare high, low
overs = ~(log >= hig);

% check both ends & zero out diagonal
res = overs & overs' & ~logical(eye(length(hi)));

% close file
fclose(fh);

res 
```

# visual-c++ - 串口编程 - 识别接收数据的结束

> ID：15834128
> 
> 赞同：0
> 
> 时间：2013-04-05T12:34:18.430
> 
> 标签：visual-c++, serial-port

我正在使用 VC++ 编写一个串行端口应用程序，我可以在其中打开交换机设备上的端口，发送一些命令并显示它们的输出。我正在运行一个线程，它总是读取开放端口以输出给定命令。我的主线程一直等到读取完成，但问题是我如何识别命令输出结束，我应该向主线程发出信号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:20:49.763

几乎任何串行端口通信都需要*协议*。某种方式让接收者发现响应已被完整接收。一个非常简单的方法是使用永远不会出现在其余数据中的唯一字节或字符。换行是标准的，例如任何调制解调器都使用。

当您需要传输任意二进制数据时，这需要更加详细。一个常见的解决方案是首先发送响应的长度。然后接收器可以对接收到的字节进行倒计时以了解何时完成。这通常需要用特定的起始字节值进行修饰，以便接收器有机会与发送器重新同步。并且通常包括校验和或 CRC，以便接收器可以检测传输错误。进一步的修饰是通过来自接收器的 ACK/NAK 响应使错误可恢复。这样你就可以很好地重新发明 TCP。RFC-916 中的 RATP 协议就是一个很好的例子，尽管它被广泛忽略了。

# android - 如何横向滚动垂直插入的gridview

> ID：15834130
> 
> 赞同：0
> 
> 时间：2013-04-05T12:34:22.077
> 
> 标签：android

我正在执行一项从服务器检索图像并在应用程序的 GridView 中显示的任务。此网格视图正在上下滚动。但我想在菜单屏幕滚动时从左到右滚动这个视图。网格视图可以吗？或者有没有更好的方法来做到这一点？请帮我这样做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:02:49.550

在您的网格视图中添加此行。

```
android:scrollbars="horizontal" 
```

例如：

```
 <GridView
            android:id="@+id/gridView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"                
            android:animationCache="true"                
            android:numColumns="3"
            android:scrollbars="horizontal"
            android:scrollingCache="false" >
        </GridView> 
```

# bash - 在 bash 脚本中重定向错误消息

> ID：15834133
> 
> 赞同：0
> 
> 时间：2013-04-05T12:34:24.663
> 
> 标签：bash, pbs

我正在使用带有 PBS 的服务器。我正在测试它

```
echo sleep 10 | qsub 
```

目前服务器出现问题并返回错误消息。通过重定向此错误消息

```
echo sleep 10 | qsub 2>&1 
```

什么都不会打印。

现在我想把它放到一个shell脚本中并将输出保存在一个变量中：

```
out=`echo sleep 10 | qsub 2>&1` 
```

但是，尽管我使用 重定向错误消息`2>&1`，但变量`out`仍然包含错误消息。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:39:01.800

`2>&1`- 这实际上将 STDERR 重定向到 STDOUT

你追求的是`2>/dev/null`

```
out=`echo sleep 10 | qsub 2>/dev/null` 
```

# html - 是否有可能 flowplayer 先用 html5 播放然后 flashplayer

> ID：15834139
> 
> 赞同：1
> 
> 时间：2013-04-05T12:34:44.143
> 
> 标签：html, flowplayer

我的视频在亚马逊，我想通过 flowplayer 或 jwplayer 播放这个视频。但我的要求是视频首先尝试在 html5 中播放，如果不可能，它将进入 flash 模式。我需要 HTML5 嵌入代码和 Flash 嵌入代码的组合。嵌入代码将自动检测请求设备是否可以播放 HTML5。如果是这样，它将提供该代码。如果没有，它将提供 Flash 版本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T03:36:59.383

我知道这个问题被问到已经有一段时间了，但如果其他人正在寻找答案，你可以试试

```
<video width="VIDEO-WIDTH" height="VIDEO-HEIGHT" controls preload="auto">
<source src="VIDEO-PATH.m4v"  type="video/mp4">
<source src="VIDEO-PATH.ogv" type="video/ogg">
<object class="aligncenter" type="application/x-shockwave-flash" data="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf" width="560" height="315">
    <param name="movie" value="http://releases.flowplayer.org/swf/flowplayer-3.2.1.swf">
    <param name="allowFullScreen" value="true">
    <param name="wmode" value="transparent">
    <param name="flashvars" value="config={'clip': {'url':'VIDEO-PATH.m4v','autoPlay':false, 'autoBuffering':true }}">
    <p>Your browswer does not support video...</p>
</object>
</video> 
```

将“VIDEO-WIDTH”和“VIDEO-HEIGHT”替换为视频尺寸，将“VIDEO-PATH”替换为视频的完整网址，一切顺利。

一个重要提示： mp4/m4v 视频文件不会在 Firefox 中播放。如果您使用 HTML5 视频标签，Firefox 也不会回退到 Flash。它只会显示一个空白框。除了 mp4 之外，您还需要包含 ogv 文件格式。

# java - 表单动作属性struts2中的错误

> ID：15834143
> 
> 赞同：2
> 
> 时间：2013-04-05T12:34:54.223
> 
> 标签：java, forms, jsp, url, struts2

我的 login.jsp 在 web 文件夹中。

对此的操作被指定为：

## struts.xml

```
<package name="admin" extends="struts-default" namespace="/secure">

<action class="actions.LoginAction" name="authenticateUser">
    <result name="success" type="redirect">index</result>
    <result name="input">/login.jsp</result>
    <result name="error">/login.jsp</result>
</action>
</package> 
```

## 登录.jsp

```
<s:form action="secure/authenticateUser" method="post">

</s:form> 
```

=========================

在第一次请求它工作。

但是如果`validate()`操作方法返回错误，那么它将创建 url 为：

表单操作属性的“安全/安全/身份验证用户”。

我也尝试`<s:url>`了标签，但仍然存在同样的问题，任何人都可以帮助我。或者可以为此提供替代解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:49:59.727

您在表单标签上的操作属性可能有错误的名称。采用

```
<s:form namespace="/secure" action="authenticateUser" method="post"> 
```

# google-chrome - 停止从 selenium webdriver 加载浏览器

> ID：15834158
> 
> 赞同：9
> 
> 时间：2013-04-05T12:35:47.397
> 
> 标签：google-chrome, selenium, webdriver

我的 selenium webdriver 转到一个页面并等待该页面完成加载。如果 30 秒通过它超时并且脚本失败。

无论如何让网络驱动程序在 30 秒后停止页面加载（比如按浏览器上的“x”）？这将防止我的驱动程序超时。

我正在使用 Chrome 驱动程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T18:24:30.957

这就是我遇到这个问题的方式。我会一直使用这种方式，直到 chrome 支持`pageload`.

我在 chrome 中安装了一个名为 Stop load 的扩展程序，并设置了 5 秒停止加载。

然后我使用默认设置启动了我的驱动程序 -

```
DesiredCapabilities capabilities = DesiredCapabilities.chrome();
capabilities.setCapability("chrome.switches", Arrays.asList("--user-data-dir="+System.getProperty("user.home")+"\\AppData\\Local\\Google\\Chrome\\User Data"));
System.setProperty("webdriver.chrome.driver", "C:\\Program Files (x86)\\Google\\Chrome\\Application\\chromedriver.exe");
driver = new ChromeDriver(capabilities); 
```

如果 chrome 中的页面在 5 秒内未加载，您的扩展程序将通过在 5 秒内杀死它来处理它。

如果您在扩展程序中设置正确的停止加载时间，它的工作方式类似于隐式等待

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-08T17:35:21.883

您可以使用**JavaScript**函数和方法在***Ruby***中停止页面加载：**[**`window.stop()`**](https://developer.mozilla.org/en-US/docs/Web/API/window.stop)[**`Selenium::WebDriver::Driver#execute_script`**](http://selenium.googlecode.com/git/docs/api/rb/Selenium/WebDriver/Driver.html#execute_script-instance_method)**

 **```
driver.execute_script("window.stop()") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T13:51:35.703

尝试使用这个：

```
 driver.manage().timeouts().pageLoadTimeout(); 
```

文档：
[页面加载超时](http://selenium.googlecode.com/git/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html#pageLoadTimeout%28long,%20java.util.concurrent.TimeUnit%29)

另外，作为提示，您不能使用 Selenium WebDriver 访问浏览器的本机控件。如果你想这样做，如果你使用 Linux 或Windows 版[AutoIt ，请使用像](http://www.autoitscript.com/site/autoit/)[Sikuli](http://groups.csail.mit.edu/uid/sikuli/)这样的工具。**

# groovy - groovy 脚本的黑名单同步关键字

> ID：15834160
> 
> 赞同：2
> 
> 时间：2013-04-05T12:35:48.317
> 
> 标签：groovy

有一个应用程序，用户可以在其中提供自定义 groovy 脚本。他们可以在这些脚本中编写自己的函数。我想限制人们在这些脚本中使用“同步”关键字以及其他一些关键字。例如，应该不可能编写如下所示的函数。

```
public synchronized void test() {
} 
```

我正在创建一个 CompilerConfiguration 并使用[SecureASTCustomizer](http://groovy.codehaus.org/api/org/codehaus/groovy/control/customizers/SecureASTCustomizer.html)。但是，将 org.codehaus.groovy.syntax.Types.KEYWORD_SYNCHRONIZED 添加到黑名单令牌列表中似乎并没有完成这项工作。（如果我添加 org.codehaus.groovy.syntax.Types.PLUS 它会阻止在脚本中使用“+”..但似乎并没有完成同步的工作）

关于如何实现这一目标的任何想法......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T13:24:59.037

你可以这样做：

```
import org.codehaus.groovy.control.CompilerConfiguration
import org.codehaus.groovy.syntax.SyntaxException
import org.codehaus.groovy.ast.ClassNode
import org.codehaus.groovy.control.SourceUnit
import org.codehaus.groovy.classgen.GeneratorContext

class SynchronizedRemover extends org.codehaus.groovy.control.customizers.CompilationCustomizer {
    SynchronizedRemover() {
        super(org.codehaus.groovy.control.CompilePhase.CONVERSION)
    }

    void call(final SourceUnit source, final GeneratorContext context, final ClassNode classNode) {
        classNode.methods.each { mn ->
            if (mn.modifiers & 0x0020) { // 0x0020 is for synchronized
                source.addError(new SyntaxException("Synchronized is not allowed", mn.lineNumber, mn.columnNumber))
            }
        }
    }
}

def config = new CompilerConfiguration()
config.addCompilationCustomizers(new SynchronizedRemover())

def shell = new GroovyShell(config)
shell.evaluate '''
    class Foo { public synchronized void foo() { println 'bar' } }
''' 
```

这个想法是创建一个编译定制器来检查生成的类，并且对于每个方法，如果存在同步修饰符，则添加一个错误。对于方法内部的同步块，您可以使用`SecureASTCustomizer`自定义语句检查器。

# visual-studio-2010 - 即使将其更改为新值，如何使 wpf 组合框记住先前选择的值？

> ID：15834161
> 
> 赞同：1
> 
> 时间：2013-04-05T12:35:49.043
> 
> 标签：visual-studio-2010, mvvm, wpf-4.0

即使用户从组合框项目中选择新值，我也想将 wpf 组合框的默认/选定值显示为粗体。如何使 wpf 组合框记住之前选择的值并使其变为粗体，以便用户可以轻松识别之前的值，因为它是粗体。

请帮忙？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T17:14:28.783

你的组合框的对象是如何创建的？我会在类中添加一个名为 DefaultSelected 的布尔属性，然后使用组合框中的数据模板触发器来设置具有 DefaultSelected = true 的对象的样式。

```
 <DataTemplate x:Key="ComboTemplate" >
            <StackPanel Orientation="Horizontal">
                <TextBlock x:Name="myTextBlock" Text="{Binding ObjectName}" VerticalAlignment="Center"  />
            </StackPanel>
            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding DefaultSelected}" Value="True" >
                    <DataTrigger.Setters>
                        <Setter TargetName="myTextBlock" 
                        Property="FontWeight" 
                        Value="Bold"/>
                    </DataTrigger.Setters>
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>

                <ComboBox 
                        ItemsSource="{Binding myList, Mode=OneTime}"
                          ItemTemplate="{DynamicResource ComboTemplate}">                        
                </ComboBox> 
```

这是未经测试的，对不起，但应该让你朝着正确的方向前进

Ĵ

# php - 使用 post 将数据发送到 Web 服务

> ID：15834164
> 
> 赞同：0
> 
> 时间：2013-04-05T12:36:03.233
> 
> 标签：php, json, web-services, curl

我已经获得了一个如何连接到某个网络服务器的示例。

这是一个带有两个输入的简单表单：

![网络服务表单](https://i.stack.imgur.com/OHVIq.png)

它在提交带有令牌和 json 的表单后返回 true。

这是代码：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Webservice JSON</title>
    </head>
    <body>
        <form action="http://foowebservice.com/post.wd" method="post">
            <p>
                <label for="from">token: </label>
                <input type="text" id="token" name="token"><br>
                <label for="json">json: </label>
                <input type="text" id="json" name="json"><br>
                <input type="submit" value="send">
                <input type="reset">
            </p>
        </form>
    </body>
</html> 
```

为了使其动态化，我尝试使用 PHP 复制它。

```
$url = "http://foowebservice.com/post.wd";

$data = array(
  'token' => 'fooToken',
  'json' => '{"foo":"test"}',
);

$content = json_encode($data);
$curl = curl_init($url);
curl_setopt($curl, CURLOPT_HEADER, false);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_HTTPHEADER,
  array("Content-type: application/json"));
curl_setopt($curl, CURLOPT_POST, true);
curl_setopt($curl, CURLOPT_POSTFIELDS, $content);

$json_response = curl_exec($curl);

$status = curl_getinfo($curl, CURLINFO_HTTP_CODE);

curl_close($curl);

$response = json_decode($json_response, true); 
```

但我一定做错了什么，因为 $response 它被赋予了一个错误的值。

我不介意以任何其他方式执行此操作，而不是使用 Curl。

有什么建议么？

**更新**

正如第一个答案中所建议的，我尝试以这种方式设置 $data 数组：

```
$data = array(
  'token' => 'fooToken',
  'json' => array('foo'=>'test'),
); 
```

然而，回应也是错误的。

我已经尝试过[Postman REST - Chrome 客户端插件](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm?hl=en)，并使用开发工具/网络，标题中的 url 是：

```
Request URL:http://foowebservice.com/post.wd?token=fooToken&json={%22foo%22:%22test%22} 
```

我认为应该使用 CURL 发送相同的 url。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T12:50:00.883

您正在以 JSON 格式传递 POST 数据，请尝试以 k1=v1&k2=v2 的形式传递它。例如，在`$data`数组定义后添加以下内容：

```
foreach($data as $key=>$value) { $content .= $key.'='.$value.'&'; } 
```

然后删除以下行：

```
$content = json_encode($data); 
```

和

```
curl_setopt($curl, CURLOPT_HTTPHEADER,
   array("Content-type: application/json")); 
```

完整代码（已测试）：

**测试.php**

```
<?
$url = "http://localhost/testaction.php";

$data = array(
  'token' => 'fooToken',
  'json' => '{"foo":"test"}',
);

foreach($data as $key=>$value) { $content .= $key.'='.$value.'&'; }

$curl = curl_init($url);
curl_setopt($curl, CURLOPT_HEADER, false);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_POST, true);
curl_setopt($curl, CURLOPT_POSTFIELDS, $content);

$json_response = curl_exec($curl);

$status = curl_getinfo($curl, CURLINFO_HTTP_CODE);

curl_close($curl);

$response = json_decode($json_response, true);
var_dump($response);
?> 
```

**测试动作.php**

```
<?
echo json_encode($_POST);
?> 
```

**输出：**

```
array(2) {
  'token' =>
  string(8) "fooToken"
  'json' =>
  string(14) "{"foo":"test"}"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:39:52.900

部分`$data`已经 json 编码。尝试制作`$data`纯php。IE`$data['json']=array('foo'=>'test');`

# ios - 如何以编程方式改变方向

> ID：15834166
> 
> 赞同：0
> 
> 时间：2013-04-05T12:36:07.347
> 
> 标签：ios, objective-c, xcode, orientation

如何以编程方式更改方向。何时执行按钮操作？我尝试了下面的代码，但显示了一些错误，称为“uidevice 没有可见界面声明选择器设置方向”

我的代码是

```
 if (UIDeviceOrientationIsLandscape([UIDevice currentDevice].orientation))
 {
    // code for landscape orientation
    // OR
   //        [[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeRight];
    //        //  OR
 /  /        [[UIDevice currentDevice] setOrientation:UIInterfaceOrientationLandscapeLeft];

} 
```

# c# - 您如何制作具有多个“页面”的程序？

> ID：15834167
> 
> 赞同：1
> 
> 时间：2013-04-05T12:36:08.440
> 
> 标签：c#, winforms, panel, tabcontrol, wizard

您如何通过单击“下一步”按钮来制作类似于安装程序的东西，它会向您显示 like a`TextBox`而不是`ComboBox`new 上的 like `Panel`？

有点像在 a 上更改选项卡`TabControl`但不显示选项卡。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T12:38:28.913

您可能正在寻找向导。你可能会看到

[Winforms 的简单向导 - CodeProject](http://www.codeproject.com/Articles/120607/Simple-Wizard-for-WinForms)

你也可以看看[DevExpress 的 WinForms Wizard，](http://www.devexpress.com/Products/NET/Controls/WinForms/Wizard/)但它不是免费的。

# javascript - 与 JSON.stringify() 相比，使用 toString() 有什么区别？

> ID：15834172
> 
> 赞同：58
> 
> 时间：2013-04-05T12:36:38.647
> 
> 标签：javascript

在这两种情况下，我都会输出对象的内容：

```
alert(JSON.stringify(obj)); 
```

或者

```
alert(obj.toString()); 
```

所以......有什么区别？每一种的优点或缺点是什么？

有没有实际的例子来显示差异？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-05T12:49:10.877

除非您有一个自定义对象并`.toString`返回`JSON.stringify`该对象的自定义方法，否则`obj`不会给出`obj.toString() == JSON.stringify(obj)`.

像then`obj`这样的数组何时给出：`[1,2,3]``.toString()`

```
"1,2,3" 
```

并且`JSON.stringify`：

```
"[1,2,3]" 
```

这些很接近但并不完全相同，JSON 序列化的没有逗号，直接作为 Javascript 运行或可以解析为 JSON。

看：

```
["1,",2,3].toString();
//"1,,2,3" ... so you can't just split by comma and get original array
//it is in fact impossible to restore the original array from this result

JSON.stringify(["1,",2,3])
//'["1,",2,3]'
//original array can be restored exactly 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-04-05T12:38:35.830

对于一个对象说

```
obj = { a: 'a', '1': 1 } 
```

`obj.toString()`给

```
"[object Object]" 
```

`JSON.stringify(obj)`给

```
"{"1":1,"a":"a"}" 
```

对于[.toString()](http://es5.github.com/#x9.8)，当参数类型是对象时返回默认值。[另一方面， JSON.stringify返回 JSON 文本，可以使用](http://msdn.microsoft.com/en-us/library/ie/cc836459%28v=vs.94%29.aspx)[JSON.parse](http://msdn.microsoft.com/en-us/library/ie/cc836466%28v=vs.94%29.aspx)将其转换回 JSON 对象

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-04-05T12:39:03.987

正如您可能已经注意到的那样，当您尝试（希望如此）时，调用`.toString()`任何**对象**继承^((*​​))的对象`Object.prototype.toString()`，返回`[object Object]`.

这就是它内部定义的方式，从对象返回内部`[Class]`名称。当然，其他*对象*可以覆盖这个方法（记住，它最初是在原型链上定义的）并返回几乎任何东西。

`JSON.stringify()`另一方面，是 JSON 对象的一种方法，它将对象结构*序列*化为字符串版本。因此，*Javascript Object Notation*将描述一个具有纯*ascii 字符串*中所有嵌套结构的对象。

* * *

^((*) 例外：使用创建的对象`Object.create(null);`)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-01T17:39:21.700

您可以在 JSON.stringify 中使用 replacer 和 space 参数，将 replacer 参数作为函数传递，您可以修改 object 和 space 参数帮助您在每个键值对之前提供额外的空间。

```
const replacer = (key, value) => {
        // Filtering out properties
        if (typeof value === 'number') {
            return 1;
        }
        return value;
    },

    foo = {
        country: 'India',
        state: 'Gujarat',
        district: 45,
        cm: 'car',
        am: 7
    },

    result = JSON.stringify(foo, replacer);

console.log(result) // {"country":"India","state":"Gujarat","district":1,"cm":"car","am":1} 
```

空间论证——

```
const obj = { a : 1, b:2};

const obj_str = JSON.stringify(obj, null, '     ');// '\t' gives one tab 

console.log(obj_str) 
```

有关更多详细信息，您可以访问此[链接。](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify)

# mysql - 如何从数据库中选择代码

> ID：15834176
> 
> 赞同：-1
> 
> 时间：2013-04-05T12:36:49.690
> 
> 标签：mysql

我有一个包含这些代码的数据库

间接客户 客户代码 疗养院 NH000001 牙医 DN000001 其他 OT000001

和直接客户 客户代码 疗养院 NH050001 牙医 DN050001 其他 OT050001

注意 NH 后有 00 代表间接客户，05 代表直接客户

我需要编写一个查询来获取直接和间接客户的列表

```
SELECT * FROM bmwregistration ,corporation_data_entity,category_data_entity,ward_data_entity
                Where occu_corp_id='$corpo'         
                AND occu_division = '$divi' 
                AND bmwregistration.occu_corp_id = corporation_data_entity.corp_id

                AND bmwregistration.occu_ward = ward_data_entity.ward_id
                AND (cust_code LIKE '%BB00%' 
                OR cust_code LIKE '%DP00%' 
                OR cust_code LIKE '%NH00%' 
                OR cust_code LIKE '%PL00%' 
                OR cust_code LIKE '%DN00%' 
                OR cust_code LIKE '%OT00%' 
                OR cust_code LIKE '%PD00%' 
                OR cust_code LIKE '%PN00%' ) 
```

执行上述查询时，它会为相同的客户代码显示一行 8 次。我可以使用 group by 子句吗？查询有什么问题？

它在连续八行客户代码中选择具有相同客户代码的行

```
1
1
1
1
1
1
1
1
2
2
2
2
2
2
2
2
3( 8 times same row with cust_id 3) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:46:03.567

试试这个`group by`

```
 SELECT * FROM bmwregistration ,corporation_data_entity,category_data_entity,ward_data_entity
            Where occu_corp_id='$corpo'         
            AND occu_division = '$divi' 
            AND bmwregistration.occu_corp_id = corporation_data_entity.corp_id

            AND bmwregistration.occu_ward = ward_data_entity.ward_id
            AND (cust_code LIKE '%BB00%' 
            OR cust_code LIKE '%DP00%' 
            OR cust_code LIKE '%NH00%' 
            OR cust_code LIKE '%PL00%' 
            OR cust_code LIKE '%DN00%' 
            OR cust_code LIKE '%OT00%' 
            OR cust_code LIKE '%PD00%' 
            OR cust_code LIKE '%PN00%' ) 
      GROUP BY  bmwregistration 
```

# asp.net-mvc-4 - 如何让我的 MVC 应用程序发送命令并订阅 NServiceBus 中的事件

> ID：15834177
> 
> 赞同：0
> 
> 时间：2013-04-05T12:37:00.513
> 
> 标签：asp.net-mvc-4, nservicebus

也许我在这里遗漏了一些东西，这个问题可能与这个问题相同，[因此](https://stackoverflow.com/questions/2461675/hosting-an-nservicebus-subscriber-in-the-same-application-as-the-producer)对于任何重复感到抱歉。

我有一个 MVC4 站点，它非常乐意将 Sends() 命令发送到我的 NServiceBus 服务器。我现在希望同一个 MVC 站点能够从同一个 NServiceBus 服务器订阅 IEvents Publish()ed。但我就是无法让它工作。

消息正在从服务器发布并显示在 MSMQ 中，但我无法让 MVC 站点获取它们。

NServiceBus 3.3.5 可以做到这一点吗？如果是这样，我必须如何设置我的 MVC 站点才能使其正常工作？

提前致谢！

编辑：这是我在 MVC 应用程序中的配置：

```
Configure.With()
            .Log4Net()
            .StructureMapBuilder()
            .MsmqTransport()
            .IsTransactional(false)
            .PurgeOnStartup(false)
            .UnicastBus()
            .LoadMessageHandlers()
            .ImpersonateSender(false)
            .JsonSerializer()
            .CreateBus()
            .Start(() => Configure.Instance.ForInstallationOn<NServiceBus.Installation.Environments.Windows>().Install()); 
```

我没有实现 IConfigureThisEndpoint 或 AsA_ 接口的 EndpointConfig 类。我尝试添加一个，但它从未被调用，我无法确定主机是什么或如何从 Web 应用程序启动 NServiceBus 主机应用程序。甚至如果代码位于 IIS 中，主机将在什么上下文中运行（如果这有意义的话！）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:21:36.333

我的猜测是你`.LoadMessageHandlers()`在流畅的配置中错过了这一行`.UnicastBus()`——这是导致自托管应用程序不处理发送给它们的消息的最常见错误。

如果不是这种情况，请将您的流利配置块添加到您的问题中，我们会看看。

**编辑：发布流利的配置后**

我的下一个猜测是您声明序列化程序为时已晚。这`.UnicastBus()`一步是“让我们开始这件事！”之前的最后一站之一。我在想，也许当您达到这一点时，配置已经假设您将使用默认的 XmlSerializer。您能否尝试将序列化程序线移到后面`.StructureMapBuilder()`，看看是否效果更好？

如果这不起作用，我可能会考虑`.DefaultBuilder()`暂时使用它来排除您的 IoC 容器的问题。

关于您的其他评论，自托管总线永远不会有 EndpointConfig。这是仅由 NServiceBus.Host.exe 托管的端点的指针。

我还认为你从哪里调用这个流利的配置并不是很明显。该代码需要在 webapp 启动时调用一次 - 通常从 Global.asax 中的应用程序启动方法调用。因为 web 应用程序处于控制之中，所以没有像在 NServiceBus 主机中那样查找和连接 NServiceBus 管道的自动程序集扫描。

# java - 在arraylist中查找和显示元素

> ID：15834180
> 
> 赞同：-1
> 
> 时间：2013-04-05T12:37:15.030
> 
> 标签：java, arraylist

有没有简单的方法来搜索数组列表？我看到像 removeAll() 和 add() 这样的集合有很多事情要做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:47:07.047

向您的类添加一个方法，该方法`UserArchive`循环遍历列表并将每个用户 id 与传入的用户 id 进行比较。

```
public User findById(int id) {
    for (User u : list) {
        if (u.getCustomerID() == id) {
            return u;
        }
    }
    return null; // or empty User
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:59:00.427

您可以选择在循环中执行 if 并查看循环中每个 User 实例的 id：

```
for (User user : list) {
    if (user.getCustomerID == [The id to lookup]) {
       // Whatever you want to do
    }
} 
```

或者，如果您比较 User 的另一个实例而不是 CustomerID，您可以覆盖 User 类的 equals() 方法并解锁 List.contains 函数。

equals 的函数标题说：

> 如果此列表包含指定元素，则返回 true。更正式地说，当且仅当此列表包含至少一个元素 e 满足 (o==null ? e==null : o.equals(e)) 时，才返回 true。

这就是为什么你必须为你的对象覆盖 equals 。许多函数使用 equals() 作为对象，如果您希望结果好，则必须重写该函数。

```
// Or whatever instance of User you want to compare
User custToLookup = new User(idToLookup, "", "", "");

// You could stop here if you only want to know if the instance exist in the list
if (list.contains(custToLookup)){
    for (User user : list) {
        if (user.equals(custToLookup) {
            // Whatever you want to do
        }
    }
} 
```

*编辑：忘记了一些词

# java - 在 Java 应用程序中集成 RapidMiner

> ID：15834182
> 
> 赞同：5
> 
> 时间：2013-04-05T12:37:20.380
> 
> 标签：java, rapidminer

我在 RapidMiner 中有一个文本分类过程。它从指定的 Excel 表格中读取测试数据并进行分类。我还有一个小型 Java 应用程序，它正在运行这个进程。现在我想在我的应用程序中制作文件输入部分，这样每次我都可以从我的应用程序（而不是 RapidMiner）中指定 excel 文件。有什么提示吗？

这是代码：

```
import com.rapidminer.RapidMiner;
import com.rapidminer.Process;
import com.rapidminer.example.Attribute;
import com.rapidminer.example.Example;
import com.rapidminer.example.ExampleSet;
import com.rapidminer.operator.IOContainer;
import com.rapidminer.operator.Operator;
import com.rapidminer.operator.OperatorException;

import java.io.File;
import java.io.IOException;
import java.util.Iterator;
import com.rapidminer.operator.io.ExcelExampleSource; 
import com.rapidminer.tools.XMLException;

public class Classification {

    public static void main(String [] args) throws Exception{
         ExampleSet resultSet1 = null;
         IOContainer ioInput = null;
        IOContainer ioResult;
        try {
            RapidMiner.setExecutionMode(RapidMiner.ExecutionMode.COMMAND_LINE);
            RapidMiner.init();
            Process pr = new Process(new File("C:\\Users\\MP-TEST\\Desktop\\Rapid_Test\\Wieder_Model.rmp"));
            Operator op = pr.getOperator("Read Excel");
            op.setParameter(ExcelExampleSource.PARAMETER_EXCEL_FILE, "C:\\Users\\MP-TEST\\Desktop\\Rapid_Test\\HaendlerRatings_neu.xls");
            ioResult = pr.run(ioInput);
            if (ioResult.getElementAt(0) instanceof ExampleSet) {
                resultSet1 = (ExampleSet)ioResult.getElementAt(0);

                for (Example example : resultSet1) {
                    Iterator<Attribute> allAtts = example.getAttributes().allAttributes();
                    while(allAtts.hasNext()) {
                        Attribute a = allAtts.next();
                                if (a.isNumerical()) {
                                        double value = example.getValue(a);
                                        System.out.println(value);

                                } else {
                                        String value = example.getValueAsString(a);
                                        System.out.println(value);
                                }
                         }
                }
                    }
        } catch (IOException | XMLException | OperatorException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

          }
} 
```

这是错误：

```
Apr 09, 2013 9:06:05 AM com.rapidminer.Process run
INFO: Process C:\Users\MP-TEST\Desktop\Rapid_Test\Wieder_Model.rmp starts
com.rapidminer.operator.UserError: A value for the parameter 'excel_file' must be specified! 
    at com.rapidminer.operator.nio.model.ExcelResultSetConfiguration.makeDataResultSet(ExcelResultSetConfiguration.java:316)
    at com.rapidminer.operator.nio.model.AbstractDataResultSetReader.createExampleSet(AbstractDataResultSetReader.java:127)
    at com.rapidminer.operator.io.AbstractExampleSource.read(AbstractExampleSource.java:52)
    at com.rapidminer.operator.io.AbstractExampleSource.read(AbstractExampleSource.java:1)
    at com.rapidminer.operator.io.AbstractReader.doWork(AbstractReader.java:126)
    at com.rapidminer.operator.Operator.execute(Operator.java:855)
    at com.rapidminer.operator.execution.SimpleUnitExecutor.execute(SimpleUnitExecutor.java:51)
    at com.rapidminer.operator.ExecutionUnit.execute(ExecutionUnit.java:711)
    at com.rapidminer.operator.OperatorChain.doWork(OperatorChain.java:379)
    at com.rapidminer.operator.Operator.execute(Operator.java:855)
    at com.rapidminer.Process.run(Process.java:949)
    at com.rapidminer.Process.run(Process.java:873)
    at com.rapidminer.Process.run(Process.java:832)
    at com.rapidminer.Process.run(Process.java:827)
    at Classification.main(Classification.java:29) 
```

最好的祝福

阿门

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-24T03:40:56.567

对我来说很好：

*   [下载 Rapidminer](http://sourceforge.net/projects/rapidminer/)（并解压缩文件）
*   进入“lib”目录，你需要：
    1.  快速矿工.jar
    2.  启动器.jar
    3.  “/lib/freehep”目录中的所有jar。
*   将库 1、2 和 3 放入您的类路径 java 项目（库）中
*   复制此代码并运行：

```
 import com.rapidminer.Process;
    import com.rapidminer.RapidMiner;
    import com.rapidminer.operator.Operator;
    import com.rapidminer.operator.OperatorException;
    import com.rapidminer.operator.io.ExcelExampleSource;
    import com.rapidminer.tools.XMLException;
    import java.io.File;
    import java.io.IOException;
    import java.lang.Object;

    public class ReadRapidminerProcess {
      public static void main(String[] args) {
        try {
          RapidMiner.setExecutionMode(RapidMiner.ExecutionMode.COMMAND_LINE);
          RapidMiner.init();

          Process process = new Process(new File("/your_path/your_file.rmp"));
          process.run();

        } catch (IOException | XMLException | OperatorException ex) {
          ex.printStackTrace();
        }
      }
    } 
```

希望对你有帮助，我找了很多资料才找到答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:49:41.260

我看到有两种方法可以做到这一点。

第一个是以编程方式更改流程的 XML 定义。Rapidminer 进程由带有`.rmp`扩展名的 XML 文件指定。在文件中，您将找到要更改的运算符的定义。这是指定读取 Excel 运算符的简单过程的摘录：

```
<operator activated="true" class="read_excel" compatibility="5.3.005" expanded="true" height="60" name="Read Excel" width="90" x="313" y="75">
    <parameter key="excel_file" value="D:\file.xls"/>    <!-- HERE IS THE FILE PATH -->
    <parameter key="sheet_number" value="1"/>
    <parameter key="imported_cell_range" value="A1"/>
    <parameter key="encoding" value="SYSTEM"/>
    <parameter key="first_row_as_names" value="true"/>
    <list key="annotations"/>
    <parameter key="date_format" value=""/>
    <parameter key="time_zone" value="SYSTEM"/>
    <parameter key="locale" value="English (United States)"/>
    <list key="data_set_meta_data_information"/>
    <parameter key="read_not_matching_values_as_missings" value="true"/>
    <parameter key="datamanagement" value="double_array"/>
</operator> 
```

我突出显示了 excel 文件的路径所在的部分。您可以在您的应用程序中覆盖它。请注意不要破坏 XML 文件。

* * *

另一种方法是在您的 java 应用程序中加载进程后修改运算符。您可以通过`Process#getOperator(String name)`或获得对您的运营商的参考`Process#getAllOperators()`。我想它应该属于以下类别之一：

```
com.rapidminer.operator.io.ExcelExampleSource
com.rapidminer.operator.nio.ExcelExampleSource 
```

当您找到正确的运算符时，您可以通过`Operator#setParameter(String key, String Value)`.

此代码适用于 RapidMiner 5.3：（该过程只是读取 Excel 运算符和写入 CSV 运算符）

```
package sorapid;

import com.rapidminer.Process;
import com.rapidminer.RapidMiner;
import com.rapidminer.operator.Operator;
import com.rapidminer.operator.OperatorException;
import com.rapidminer.operator.io.ExcelExampleSource;
import com.rapidminer.tools.XMLException;
import java.io.File;
import java.io.IOException;

public class SOrapid {

  public static void main(String[] args) {
    try {
      RapidMiner.setExecutionMode(RapidMiner.ExecutionMode.COMMAND_LINE);
      RapidMiner.init();

      Process process = new Process(new File("c:\\Users\\Matlab\\.RapidMiner5\\repositories\\Local Repository\\processes\\test.rmp"));
      Operator op = process.getOperator("Read Excel");
      op.setParameter(ExcelExampleSource.PARAMETER_EXCEL_FILE, "d:\\excel.xls");
      process.run();

    } catch (IOException | XMLException | OperatorException ex) {
      ex.printStackTrace();
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T13:51:51.763

试试这个：

```
private SimpleExampleSet ReadExcel( File processXMLFile_, File excelFile_ ) throws IOException, XMLException, OperatorException
{
    IOContainer outParameters   = null;
    Process     readExcel       = new Process( processXMLFile_ );
    IOObject    inObject        = new SimpleFileObject( excelFile_ );
    IOContainer inParameters    = new IOContainer( inObject );

    outParameters   = readExcel.run( inParameters );

    SimpleExampleSet    result  = (SimpleExampleSet) outParameters.getElementAt( 0 );

    return result;

} 
```

抱歉，如果您需要，我无法使用 RapidMiner 脚本发布图像，我可以将其发送到电子邮件。

# assembly - 为什么 stmfd/ldmfd 会跳回 sub？

> ID：15834183
> 
> 赞同：3
> 
> 时间：2013-04-05T12:37:23.187
> 
> 标签：assembly, arm

我正在为 UNI 做一个项目，但遇到了问题。

我们正在学习如何在调用子程序时将寄存器压入/弹出堆栈。

我需要编写一个子程序将十进制数 0-15 转换为相应的十六进制 ASCII 码，并保留所有寄存器的值，除了`r0`应该存储结果的位置。我有一个 ASCII 代码表，基本上只需将`number*4`ASCII 表的起始地址添加，然后将值存储回`r0`.

我得到了正确的结果，但子程序循环。它不停地从跳到`ldmfd`跳`sub`。知道为什么吗？

```
main:
adr r0,num
adr r1,ascii
ldr r2,[r0]
bl  sub
sub:  stmfd sp!,{r1-r2,lr}
      ldr r0,[r1,r2,LSL #2]
      ldmfd sp!,{r1-r2,pc}

/* variables here */
num:    .word 15
ascii:  .word 0x30,0x31,0x32,0x33,0x34,0x35,0x36,0x37,0x38,0x39,0x41,0x42,0x43,0x44,0x45,0x46
/* end variables */ 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T12:51:57.267

请注意，您已将子例程直接放在调用它的指令之后：

```
bl  sub
sub:  stmfd sp!,{r1-r2,lr}
      ldr r0,[r1,r2,LSL #2]
      ldmfd sp!,{r1-r2,pc} 
```

那么当你从第一次调用返回时会发生什么`sub`？它将返回到 之后的指令`bl`，即`stmfd sp!,{r1-r2,lr}`。因此子程序有效地返回到其自身的开头。并且它将继续这样做，因为没有额外的隐式或显式写入`lr`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T13:45:50.400

您的代码有几个问题。

1.  主代码永远不会返回任何地方，这意味着在您的代码从子代码返回后，它将再次从“子：”开始，因为那是您的返回点。由于 lr 没有改变，它会卡在 stmfd/ldmfd 之间的循环中。您需要调用系统的退出功能。
2.  没有理由保存 r1、r2、lr。您不会在代码中更改它们，而且 r0-r3 和 r12 无论如何都是调用者保存的寄存器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T12:41:22.607

我不是 ARM 汇编专家，但我至少可以阅读一些本地编译器输出。

似乎 gcc 不喜欢存储`lr`在堆栈上（这是有道理的，寄存器的目的是尽可能*避免*堆栈访问）。

相反，子程序通过在链接寄存器上执行一个分支来结束：

```
bx  lr 
```

注意：似乎`bx`（分支交换）指令仅在支持 Thumb 的处理器上可用，因此它可能不适用于您。

# c# - 以编程方式设置 TextBox 文本并更新模型

> ID：15834184
> 
> 赞同：0
> 
> 时间：2013-04-05T12:37:24.543
> 
> 标签：c#, wpf, mvvm

我正在更新`TextBox.Text`C# 中的值，但绑定到的模型未更新。当我在视觉上更新它时它可以工作（评论这一行`myTextbox.Text="new value";`并在运行时手动输入值）

```
<TextBox Name="myTextbox" Text="{Binding myValue}"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:42:17.090

我认为您需要实施[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/ms743695.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:42:15.890

在您的视图模型中，您需要为绑定值调用属性更改的通知。

```
private string _myValue;
public string MyValue
{
    get { return _value; }
    set
    {
        _myValue = value;
        NotifyOfPropertyChanged("MyValue");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:31:06.267

在你的文本框（ui）中写“新值”它与你的代码隐藏（c＃）中的myTextbox.Text =“新值”不同

所以我的第一个问题是为什么你需要 myTextbox.Text="new value"??

# sql - 创建存储过程以使用前一行的数据更新 SQL 数据库中的一行

> ID：15834185
> 
> 赞同：0
> 
> 时间：2013-04-05T12:37:26.280
> 
> 标签：sql, sql-server, tsql, stored-procedures

大家下午好

我有一个用于跟踪装配线上生产的数据库。

成品将有效地显示每条`stage`生产线和当前在其中的序列号。

我已经创建了一个存储过程来检索和显示这些数据，但是我正在努力将一台机器从一个到另一个移动`stage 1`到等等`stage 2`......该表非常简单，它包含以下行：`stage 2``stage 3`

```
Stage_ID (PK, int, not null)
Build_ID(FK, int, null) 
```

实际上，我想构建一个存储过程来将`Build_ID`where的值移动`Stage_ID = 1`到`Stage_ID = 2`.

知道我会怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:46:46.430

```
update stageTable
set build_id = (select build_id from stageTable where stage_id = 1)
where stage_id = 2 
```

如果你需要它作为一个程序，你可以做这样的事情

```
create procedure sp_moveStage(@from int, @to int)
as 

update stageTable
set build_id = (select build_id from stageTable where stage_id = @from)
where stage_id = @to 
```

并执行它

```
exec sp_moveStage 1, 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:42:55.280

键是不可变的，因此您必须插入新行并删除旧行。那里不是理想的设计。

PS 如果 StageID 是您所拥有的 PK，那么您只能拥有 StageID = 2 的一行：

```
 Stage_ID (PK, int, not null)   <<<---
 Build_ID(FK, int, null) 
```

你想要的是这样的表：

```
 create table process
  (id int primary key,
   buildid int not null,
   stage  int not null,
   entrydatetime datetime,
   exitdatetime datetime
   ) 
```

显示构建何时进入和离开处理阶段。或者，如果阶段值可以以有意义的方式按顺序排序，您可以通过假设下一阶段的进入时间来得出阶段退出的时间。

无论如何，您都不希望像“过程中的阶段”这样的变化值成为 PK。Stage 是一个变化的值，一个构建的属性或属性，而 PK 是一个不可变的实体标识符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:44:21.933

这样的事情可能会奏效。
第 1 步 - 获取构建 ID 的最大阶段 ID 并将其设置为变量。第 2 步 - 将记录添加到表中。阶段 id 将是第 1 步中的变量加 1。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T12:46:19.507

嗯，

```
DECLARE @Build_ID int;

BEGIN TRANSACTION;

SELECT @Build_ID = Build_ID FROM SomeTable WHERE Stage_ID = 1;

UPDATE SomeTable SET Build_ID = @Build_ID WHERE Stage_ID = 2;

COMMIT TRANSACTION; 
```

# database - 我们应该使用网络服务还是直接访问数据库

> ID：15834186
> 
> 赞同：0
> 
> 时间：2013-04-05T12:37:28.887
> 
> 标签：database, wcf

我们应该使用网络服务还是直接访问数据库。当然，直接 DB 访问相对更快，而且如果我们必须为多个平台制作 Web 服务，那也很好。与 DB 调用相比，通过 Web 服务访问数据的时间是否显着长，还是略高？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T16:42:17.540

我不得不不同意 TruthOf42，因为 Web 服务是数据访问的最佳实践。这些天来，这种方法肯定有很大的转变，但我认为常用的方法与最佳实践不同。仅仅因为某些东西很常见/流行并不意味着它最适合所有情况。

为什么要使用网络服务？

1.  如果您计划拥有多个应用程序，请使用通用数据访问层。
2.  如果您计划将数据暴露给外部客户。
3.  如果你想在你的应用程序和数据库之间画一些硬的物理线。

我认为进行 Web 服务调用总是比仅针对数据库编写查询要慢。但是您可以通过明智的网络规划和缓存来缓解这些问题。

我同意 Aphelion 的观点，如果它是一个简单的应用程序，那就保持简单。

一个好主意是在代码中创建一个获取数据的接口，然后从数据库实现开始。如果您发现以后想引入 Web 服务，那么您可以保持相同的接口，只实现一个调用 Web 服务的版本，而不是直接拨打数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:52:00.890

不要试图优化你还没有写的东西。使用 Web 服务是最佳实践。直接调用数据库只会给您带来更多安全问题。

编写软件时最重要的是写得好，速度通常是最不关心的。

# javascript - 用于 JavaScript 的 Url.Content

> ID：15834188
> 
> 赞同：7
> 
> 时间：2013-04-05T12:37:30.417
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3

我目前使用这种方法来获取正确的相对 URI（与部署情况无关）。剃刀代码（asp.net mvc 3）：

```
@section JavaScript
{  
    <script type="text/javascript">
        var _getUrl =  "@Url.Content("~/bla/di/bla")";
    </script>
} 
```

单独的js文件：

```
$.ajax({
    url: _getUrl, 
```

你认为有更好的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T13:44:36.480

就我个人而言，我更喜欢使用 HTML5 data-* 属性或将 URL 作为我不显眼的 AJAXify 的某些 DOM 元素的一部分。

问题是你永远不会写`$.ajax`这样飞来飞去的电话。您编写它们以对应于一些 DOM 事件。例如点击锚点。在这种情况下，这很简单，您只需使用 HTML 帮助程序来生成此锚点：

```
@Html.ActionLink("click me", "someAction", "somecontroller", new { id = "123" }, new { @class = "link" }) 
```

进而：

```
$('.link').click(function() {
    $.ajax({
        url: this.href,
        type: 'GET',
        success: function(result) {
            ...
        }

    });
    return false;
}); 
```

或者您可能正在对表单进行 AJAX 化：

```
@using (Html.BeginForm("SomeAction", "SomeController", FormMethod.Post, new { id = "myForm" }))
{
    ...
} 
```

进而：

```
$('#myForm').submit(function() {
    $.ajax({
        url: this.action,
        type: this.method,
        data: $(this).serialize(),
        success: function(result) {
            ...
        }
    });
    return false;
}); 
```

另一个示例是在相应的 DOM 元素上没有适当的 url 时使用 HTML5 data-* 属性。假设您想在下拉列表的选择发生变化时使用 AJAX 调用控制器操作。例如级联ddls。

以下是您的下拉菜单的外观：

```
@Html.DropDownListFor(x => x.SelectedValue, Model.Values, new { id = "myDdl", data_url = Url.Action("SomeAction") }) 
```

进而：

```
$('#myDdl').change(function() {
    var url = $(this).data('url');
    var selectedValue =  $(this).val();
    $.getJSON(url, { id: selectedValue }, function(result) {
        ...
    });
}); 
```

如您所见，您实际上并不需要`_getUrl`您在视图中声明的这个全局 javascript 变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:42:38.423

我会做以下事情：

**Javascript 之前的**Razor C# 脚本****

 **```
@{
    var myUrlString = Url.Action("ActionName", new { controller="ControllerName" });
} 
```

**JavaScript**

```
$.ajax('@myUrlString',{
    // options
}); 
```

您也可以使用`Url.RouteUrl`或`Url.HttpRouteUrl`。

**编辑 - 显示带有分离的 JS 文件的示例**

*剃刀*

```
@{
    var myServerGeneratedValue = Url.Action("ActionName", new{controller="ControllerName"});
}
<script type="text/javascript">
    var myHelperObject = new MyHelperObject();
    myHelperObject.Init('@myServerGeneratedValue');
</script> 
```

*JS文件*

```
var MyHelperObject = function(){

    this.Init = function(serverGeneratedValue){
        // do something with serverGeneratedValue
    };

}; 
```**

# c# - 如何从 C# Windows 应用程序将参数传递到 HTML 电子邮件模板以发送电子邮件

> ID：15834192
> 
> 赞同：1
> 
> 时间：2013-04-05T12:37:47.420
> 
> 标签：c#, html, email, windows-applications

嗨，我需要使用 c# windows application 中的模板发送电子邮件。我已经创建了一个模板，但我无法通过 html 模板传递参数。这是我正在使用的模板。

对于这个 HTML 模板，我在我的 Windows 应用程序中调用它并通过 gmail smtp 发送。我能够发送邮件，但无法将参数传递给它。请帮帮我。这是我在 Windows 应用程序中调用的代码

```
try
{
  using (StreamReader reader = File.OpenText("H:\\Visitor Management_Project\\Visitor Management_Project\\Visitor Management_Project\\EmailTemplate.htm"))
  {
     SmtpClient SmtpServer = new SmtpClient("173.194.67.108", 587);
     SmtpServer.UseDefaultCredentials = false;
     SmtpServer.DeliveryMethod = SmtpDeliveryMethod.Network;
     SmtpServer.Credentials = new System.Net.NetworkCredential("ambarishkesavarapu@gmail.com", "*******");
     //SmtpServer.Port = 587;
     SmtpServer.Host = "smtp.gmail.com";
     SmtpServer.EnableSsl = true;
     message = new MailMessage();
     message.Subject = "Visitor Arrived";
     //message.SubjectEncoding = System.Text.Encoding.UTF8;
     message.IsBodyHtml = true;
     message.Body = "EmailTemplate.htm";
     //message.BodyEncoding = System.Text.Encoding.UTF8;
     message.From = new MailAddress("ambarishkesavarapu@gmail.com");
     message.To.Add(lblCPEmail.Text);
     message.Priority = MailPriority.High;
     message.Body = reader.ReadToEnd();
     message.DeliveryNotificationOptions = DeliveryNotificationOptions.OnFailure;
     SmtpServer.Send(message);
   }
 }
 catch (Exception ex)
 {
   MessageBox.Show(ex.Message);
 } 
```

如何将参数添加到 HTML 模板中，我在文本框的同一页面中获取该模板的所有参数。请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-30T10:30:28.743

我想你已经自己发现了答案，但我会继续发布答案。

如果您使用的是 Windows 窗体而不是 Windows 演示窗体（仅设计部分和 Windows 窗体上没有的许多新功能不同），我所做的是这样的（发送电子邮件）：

```
public void SendEmail(string _from, string _fromDisplayName, string _to, string _toDisplayName, string _subject, string _body, string _password)
    {
        try
        {
            SmtpClient _smtp = new SmtpClient();

            MailMessage _message = new MailMessage();

            _message.From = new MailAddress(_from, _fromDisplayName); // Your email address and your full name

            _message.To.Add(new MailAddress(_to, _toDisplayName)); // The recipient email address and the recipient full name // Cannot be edited

            _message.Subject = _subject; // The subject of the email
            _message.Body = _body; // The body of the email

            _smtp.Port = 587; // Google mail port
            _smtp.Host = "smtp.gmail.com"; // Google mail address
            _smtp.EnableSsl = true;
            _smtp.UseDefaultCredentials = false;
            _smtp.Credentials = new NetworkCredential(_from, _password); // Login the gmail using your email address and password

            _smtp.DeliveryMethod = SmtpDeliveryMethod.Network;
            _smtp.Send(_message);

            ShowMessageBox("Your message has been successfully sent.", "Success", 2);
        }

        catch (Exception ex)
        {
            ShowMessageBox("Message : " + ex.Message + "\n\nEither your e-mail or password incorrect. (Are you using Gmail account?)", "Error", 1);
        }
    } 
```

我正在这样使用它：

```
SendEmail(textBox2.Text, textBox5.Text, textBox3.Text, "YOUR_FULL_NAME", textBox4.Text, textBox6.Text, "YOUR_EMAIL_PASSWORD"); 
```

这是图像：

![在此处输入图像描述](https://i.stack.imgur.com/zMQS9.png)

愿这个答案对你有所帮助。

干杯!

# c - 填充轮廓的线性算法

> ID：15834200
> 
> 赞同：1
> 
> 时间：2013-04-05T12:38:05.840
> 
> 标签：c, opencv, image-processing

我正在尝试制作一种算法来填充线性复杂度的轮廓。我知道存在这样的算法。我在某处读到它与过境次数有关，但有一个特殊情况我还没有很好地解决。

到目前为止，我已经尝试使用以下算法。请注意，我无法访问以前的元素（左侧），因为它们将/可能被覆盖：

```
for (int y = blob->miny; y < blob->maxy; ++y)
{
int NumberOfBorderCrossings = 0;
unsigned int NextElem = 0;
unsigned int NextNextElem = 0;
for (int x = blob->minx-1; x < blob->maxx-1; ++x)
{
    NextElem = CV_IMAGE_ELEM(labelimg,unsigned int,y,x+1);
    NextNextElem = CV_IMAGE_ELEM(labelimg,unsigned int,y,x+2);

    if (CV_IMAGE_ELEM(labelimg,unsigned int,y,x) != label)
    {
        if (NextElem == label && NextNextElem != label)
            ++NumberOfBorderCrossings;
        else
            if (NumberOfBorderCrossings%2)
                CV_IMAGE_ELEM(labelimg,unsigned int,y,x) = label;
    }

}
} 
```

我得到的结果如下。输入在右侧（必须复制所有非黑色像素），错误输出在左侧。再次注意，我只有右侧的图像轮廓（未渲染）。 ![在此处输入图像描述](https://i.stack.imgur.com/YLcRy.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:29:55.913

看来您正在寻找一种通用的[多边形填充算法](http://en.wikipedia.org/wiki/Flood_fill)。您的线交叉计数算法将在它碰到单点以及水平和垂直线的地方中断。查看[Quickfill](http://www.codeproject.com/Articles/6017/QuickFill-An-efficient-flood-fill-algorithm)以了解可能的替代方案。

# javascript - 如何为 qtip 2 警报提供默认警报功能行为

> ID：15834201
> 
> 赞同：2
> 
> 时间：2013-04-05T12:38:08.933
> 
> 标签：javascript, qtip, qtip2

我正在使用 qtip2 显示我的 Web 应用程序的警报消息（如[http://craigsworks.com/projects/qtip2/demos/#dialogues](http://craigsworks.com/projects/qtip2/demos/#dialogues)所示）

我的代码是

1) 对话

```
function dialogue(content, title) {
    /* 
    * Since the dialogue isn't really a tooltip as such, we'll use a dummy
    * out-of-DOM element as our target instead of an actual element like document.body
    */
    $('<div />').qtip(
                {
                    content: {
                        text: content
                       , title: {
                           text: 'PMGSY ',
                           button: 'Close'
                       }
                    },
                    position: {
                        my: 'center', at: 'center', // Center it...
                        target: $(window) // ... in the window
                    },
                    show: {
                        ready: true, // Show it straight away
                        modal: {
                            on: true, // Make it modal (darken the rest of the page)...
                            blur: false, // ... but don't close the tooltip when clicked
                            escape: false
                        }
                    },
                    hide: false, // We'll hide it maunally so disable hide events

                    style: {
                        classes: 'qtip-shadow qtip-rounded qtip-dialogue', // Optional shadow...
                        widget: true //themeroller
                    },

                    events: {
                        // Hide the tooltip when any buttons in the dialogue are clicked
                        render: function (event, api) {
                            $('button', api.elements.content).click(api.hide);
                        },
                        // Destroy the tooltip once it's hidden as we no longer need it!
                        hide: function (event, api) { api.destroy(); }
                    }
                });
} 
```

2）将其称为警报

```
function Alert(message) {
    // Content will consist of the message and an ok button
    var message = $('<p />', { text: message }),
    ok = $('<button />', { text: 'Ok', 'class': 'full' });
    dialogue(message.add(ok), 'Alert!');
} 
```

问题是当我使用它时，它不会阻止进一步的处理，直到用户单击确定按钮（如默认警报功能）。

例如，这个警报甚至没有出现。

```
Alert("Customised alerts"); //this doesent show      
window.location.replace("/Home/startPage"); 
```

如何让我的自定义警报模仿默认警报功能？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-13T13:36:56.120

代替

```
ok = $('<button />', { text: 'Ok', 'class': 'full' }); 
```

和

```
ok = $('<button />', { text: 'Ok', 'class': 'full' }).click(function(){
    window.location.replace("/Home/startPage");
}); 
```

# php - 如何在标准 PHP 页面中使用简码？

> ID：15834204
> 
> 赞同：1
> 
> 时间：2013-04-05T12:38:19.550
> 
> 标签：php, mysql, wordpress, content-management-system

我想在我自己的 CMS 中使用 Wordpress 样式的简码。例如，对于嵌入式推文，我可以说：

`[tweet 'TWEET URL']`

并且推文将嵌入 Twitter 提供的标准格式。与 YouTube 视频类似：

`[youtube 'YOUTUBE VIDEO']`

将嵌入 YouTube 视频播放器。我将如何使用 PHP 和 MySQL 做到这一点？我不是在寻找“通用”系统；只要我知道自己在做什么，手动添加简码对我来说就可以了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T12:43:26.987

WordPress 有一个相当精细的方案来处理 dbms 中的帖子/页面内容并将其存放在输出流中。其中一部分涉及扫描文本以查找已注册的短代码，并将其替换为适当的 URL 或其他文本。

WordPress Codex 解释了如何编写插件来实现简码。有很多例子可以看。

[http://codex.wordpress.org/Shortcode_API](http://codex.wordpress.org/Shortcode_API)

但是，如果您要在自己的 CMS 中实现这一点，则需要构建自己的处理内容的方案，并将处理与其中联系起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:48:51.990

如果您能够从 PECL 安装自定义扩展，我建议您使用[BBCode Extension](http://www.php.net/manual/en/book.bbcode.php) for PHP。

来自官方文档的示例：

```
<?php
$arrayBBCode=array(
    ''=>         array('type'=>BBCODE_TYPE_ROOT,  'childs'=>'!i'),
    'i'=>        array('type'=>BBCODE_TYPE_NOARG, 'open_tag'=>'<i>',
                    'close_tag'=>'</i>', 'childs'=>'b'),
    'url'=>      array('type'=>BBCODE_TYPE_OPTARG,
                    'open_tag'=>'<a href="{PARAM}">', 'close_tag'=>'</a>',
                    'default_arg'=>'{CONTENT}',
                    'childs'=>'b,i'),
    'img'=>      array('type'=>BBCODE_TYPE_NOARG,
                    'open_tag'=>'<img src="', 'close_tag'=>'" />',
                    'childs'=>''),
    'b'=>        array('type'=>BBCODE_TYPE_NOARG, 'open_tag'=>'<b>',
                    'close_tag'=>'</b>'),
);
$text=<<<EOF
[b]Bold Text[/b]
[i]Italic Text[/i]
[url]http://www.php.net/[/url]
[url=http://pecl.php.net/][b]Content Text[/b][/url]
[img]http://static.php.net/www.php.net/images/php.gif[/img]
[url=http://www.php.net/]
[img]http://static.php.net/www.php.net/images/php.gif[/img]
[/url]
EOF;
$BBHandler=bbcode_create($arrayBBCode);
echo bbcode_parse($BBHandler,$text);
?> 
```

将返回：

```
<b>Bold Text</b>
[i]Italic Text[/i]
<a href="http://www.php.net/">http://www.php.net/</a>
<a href="http://pecl.php.net/"><b>Content Text</b></a>
<img src="http://static.php.net/www.php.net/images/php.gif" />
<a href="http://www.php.net/">
[img]http://static.php.net/www.php.net/images/php.gif[/img]
</a> 
```

如果您无法安装扩展，请查看此[PHP 库](http://svn.php.net/viewvc/pecl/bbcode/trunk/bbcode.php?view=co)，您可以将其包含在用户代码中。

# html - css hover更改iframe位置和z-index在IE中不起作用

> ID：15834217
> 
> 赞同：0
> 
> 时间：2013-04-05T12:38:47.393
> 
> 标签：html, css, iframe

当我将鼠标悬停在`iframe`css 更改时，我的页面上有一个功能`position`，`z-index`因此它`iframe`变得更大并移动到前面。但是它不会在 IE 中工作。很难触发悬停更改（我必须在 div 的边界上缓慢移动），并且当它触发时，放大`iframe`的内容丢失了。

JSfiddle 为此： http: [//jsfiddle.net/LWRUd/](http://jsfiddle.net/LWRUd/) （顺便说一句，小提琴工作正常）

**CSS：**

```
.server-unit-head{
    width: 300px;
    background-color: #ccccdd;
    font-size: 8pt;
    text-align:left;
    color:blue;
    /*This causes words to wrap on characters as opposed to white spaces*/
    white-space: -moz-pre-wrap !important;  /* Mozilla, since 1999 */
    white-space: -pre-wrap;      /* Opera 4-6 */
    white-space: -o-pre-wrap;    /* Opera 7 */
    white-space: pre-wrap;       /* css-3 */
    word-wrap: break-word;       /* Internet Explorer 5.5+ */
    word-break: break-all;
    white-space: normal;
}

.server-unit{
    height: 300px;
    width: 300px;
    z-index: 0;
    position: relative;
}

.server-unit:hover{
    background-color: transparent;
    z-index: 50;
}

.server-unit span{ /*CSS for enlarged iframe*/
    position: absolute;
    background-color: #ccccff;
    padding: 5px;
    left: -1000px;
    visibility: hidden;
    color: black;
    text-decoration: none;
}

.server-unit:hover span{ /*CSS for enlarged iframe on hover*/
    visibility: visible;
    top: 1px;
    left: 1px; /*position where enlarged iframe should offset horizontally */
} 
```

**HTML：**

```
<td class="server-unit-head">
    <p>${serverUnit}</p>
    <div class="server-unit">
        <p><iframe name="iFrameName" height="297" width="297" scrolling="no" src=" ${serverUnit}"><p>Your browser does not support iframes.</p></iframe>
        <span><iframe name="iFrameName" height="500" width="500" scrolling="yes" src=" ${serverUnit}"><p>Your browser does not support iframes.</p></iframe></span>
    </div>
</td> 
```

# udp - 为 UDP 打孔选择端口号

> ID：15834226
> 
> 赞同：2
> 
> 时间：2013-04-05T12:39:02.573
> 
> 标签：udp, port, p2p, nat, hole-punching

我有一个奇怪的问题。我有一个成功运行的 C++ (boost asio) P2P 应用程序，它可以在大多数 NAT 上运行。问题是当我将初始起始端口号设为 1000 时，它会检查 1000 是否空闲，否则会加一并选择一个端口并开始握手。但是当我有 10000、20000 或任何其他巨大的端口号时，打孔在端口受限的锥形 NAT 上不起作用。

这怎么可能？我很确定这与代码无关。最近它也不适用于我朋友的一个全锥 NAT，但它已在许多其他全锥 NAT 中工作。可能是什么原因？关于 NAT 的行为，我有什么遗漏吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-14T22:42:14.020

1.  在许多 NAT 实现中，有一些保护规则可以防止一台主机占用 WAN 接口上的大部分端口，例如[此处](http://help.stonesoft.com/onlinehelp/StoneGate/SMC/5.3.5/SGAG/SGOH_TroubleshootingMessages/Requested_NAT_Cannot_Be_Done.htm)所述。

2.  根据路由器的不同，NAT 表条目具有不同的生命周期，并且对于可以分配给单个客户端的端口数量总是有限制的（我见过从 128 到 4096 的数字）。

因此，我认为当您需要使用高端口时，您的源 IP 地址的 NAT 表已经满（或几乎满）来自旧连接的条目或来自其他应用程序的连接，因此路由器要么决定拒绝或不适合您的端口的新 NAT 条目。

但是，可以肯定的是，我会尝试在受控环境中重复这一点，收集 NAT 两侧的 Wireshark 转储并分析数据包。如果可能的话，启用路由器日志并查看它们也会有所帮助。

我知道这不是“灵丹妙药”，但希望它对您有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-15T03:11:02.473

不要试图自己选择端口号。操作系统可以比您的代码更快更好地做到这一点。

将您的套接字绑定到端口 0 并让操作系统为您选择一个可用的端口号。您没有指定什么编程语言，但它通常涉及在调用 bind() 后调用[getsockname](http://man7.org/linux/man-pages/man2/getsockname.2.html) () 以发现将使用的本地端口。Java 和 .NET 具有用于执行相同操作的等效 API。

然后按照此处的所有其他步骤操作： [https ://stackoverflow.com/a/8524609/104458](https://stackoverflow.com/a/8524609/104458)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-13T15:40:10.583

Not sure if this'll help but have you tried having one instance of the client application starting at 1001 and the other starting at 1000, then both increment by 1\.

While the 1000 will fail on client B, client A has already tried 1001 and so punched that hole, so hopefully it'll work, right? In theory, it sounds OK in my head.

# mysql - Mysql连接查询问题

> ID：15834228
> 
> 赞同：1
> 
> 时间：2013-04-05T12:39:05.407
> 
> 标签：mysql, performance, join, indexing

我目前有一个 SQL 查询问题。我有一个包含 colour_code 字段的产品表。我无法更改产品表，因为它是从外部来源获取的。

在网站上，用户可以通过 colour_code 搜索产品并返回该颜色的所有可用产品。

手头的任务是让不同的搜索词返回具有不同颜色代码的特定产品。为此，我添加了一个名为 colour_code_alias 的新表，该表仅包含一个与产品表中的 colour_code 字段相对应的 colour_code 字段和一个将返回此结果的 alias 字段。请参见下表示例。

```
**Product_tb**
id, colour_code
1, "ABC"

**colour_code_alias_td**
colour_code,alias
"ABC","XYZ" 
```

因此，如果用户搜索 XYZ，他们应该返回 id 为 1 的产品。如果他们搜索“ABC”，他们也应该返回 id 为 1 的产品。

我的问题是查询执行时间太长，因为它没有使用索引。我的简化查询如下：

```
Select * from product
left join colour_code_alias cca on cca.colour_code = product.colour_code
where (product.colour_code = 'XYZ' or cca.alias = "XYZ") 
```

当我使用解释时，它显示它没有使用此查询的键。当我删除 where 子句中的 'or cca.alias = "XYZ"' 时，正在使用产品表中的 colour_code 索引。

我正在寻求帮助以提高此类查询的性能，我应该如何索引这种类型的查询，甚至应该重写它？

任何帮助表示赞赏。

谢谢，马丁。

就像我所做的一样。我已经删除了左连接并在 where 子句中添加了一个选择查询。查询如下所示：

```
Select * from product
where (product.colour_code = 'XYZ' or product.colour_code = (select colour_code from colour_code_alias where alias = 'XYZ') ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:45:14.993

你应该有一个关于 product.colour_code 和别名的索引。

另一个想法是通过用原始表填充别名表来完全避免 OR 部分......类似于：

```
'ABC','ABC' 
```

这样你就有一个地方可以看。

**编辑：**

再想一想 - 使用数字键而不是字符串 - 这也会更有效。（但如果你不能改变桌子可能会很困难）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:17:05.080

你可以试试这个查询：

```
select *,
(select id from product where colour_code = cod.colour_code ) as id_prod
from 
colour_code_alias cod
where (cod.colour_code = 'ABC' or cod.alias = 'XYZ') 
```

# javascript - 将选择框文本插入数据库

> ID：15834235
> 
> 赞同：0
> 
> 时间：2013-04-05T12:39:28.923
> 
> 标签：javascript, jquery, html

我知道以前有人问过这个问题，但是我找不到解决问题的方法。

我有一个包含三个选项和三个值的选择框，这些值用于使用 JS 执行一些计算，因此我无法更改这些以匹配选项文本。这是为了计算增值税的金额

我的选择如下所示：

```
<select name="tax" id="tax" class="select">
<option value="20">Standard 20%</option>
<option value="0">Zero 0%</option>
<option value="0">Exempt 0%</option>
</select> 
```

这很好，但是我需要将文本插入数据库而不是值，因为它需要在后端查看。我尝试了一个javascript函数来向选择框添加一个隐藏的输入，该输入针对的是选择的选项，但这有点错误，而且看起来不正确。我想在从数据库中检索到值时在值旁边显示文本，但是我无法区分这两个 0 金额。

有人可以提供一些进一步的解决方案，最好的方法。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:42:29.423

您可以使用 jQuery 获取所选选项的文本，如下所示：

```
$("#tax option:selected").text(); 
```

您可以在 AJAX 请求中轻松使用它来将正确的值发送到数据库，只需将其分配给一个变量：

```
var the_text = $("#tax option:selected").text(); 
```

如果做不到这一点，为什么不直接在 JS 计算中进行查找 - 它会让你的生活变得更轻松：

```
<select name="tax" id="tax" class="select">
    <option value="standard">Standard 20%</option>
    <option value="zero">Zero 0%</option>
    <option value="exempt">Exempt 0%</option>
</select> 
```

你的 JS 可能看起来像这样：

```
var vat_amount = ($('#tax').val() == 'standard') ? 20 : 0; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:42:26.993

您可以使用 html() 函数通过 JS 检索文本。或者，如果您只是使用 POST 将数据发送到服务器，请尝试将这两个值添加到选项的 value 属性中，然后将其拆分为服务器端以获取正确的数据。

# java - TestNG 构建两个类，为什么？

> ID：15834236
> 
> 赞同：0
> 
> 时间：2013-04-05T12:39:30.793
> 
> 标签：java, webdriver, testng

我的 WebDriver 项目有一些问题。这是我的第一个病态尝试尽我所能解释。

我有这个 TestNG XML 文件：

```
<suite name="Automated test">
<test name="Running all tests for browser Chrome">
<parameter name="browser" value="chrome" />
<classes>
    <class name="TEST_Login" />
    <class name="TEST_Navigation" />
</classes> 
```

这只是一个示例，还会列出许多其他类。

在这些类中，我构建了 RemoteWebDriver

TEST_Login 文件。

```
@Parameters({"browser"})
public TEST_Login(String browser) throws MalformedURLException 
{
    CONF_Setup test = new CONF_Setup();
    this.driver     = test.setup(browser);
} 
```

该文件调用我构建 RemoteWebDriver 的配置文件。此类完成测试后，我使用 @AfterMethod 注释关闭驱动程序。

我遇到的问题是，在我的所有 TEST_xxx 类中，我构建了一个新的 RemoteWebDriver。当我通过 TestNG XML 文件执行测试时，它会尝试构建 RemoteWebDriver 的两个实例，这意味着测试将不会运行。浏览器打开，但就是这样。

有没有其他方法可以让 TestNG 在之前的类关闭之前等待构建其他类？如果没有，有没有人能很好地解决我的问题？

亲切的问候 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:26:28.640

通过不在每个类中构建 RemoteWebDriver 而是在单独的配置类中解决它

# xml - 如何导入具有多个 URI 的 xml 命名空间

> ID：15834237
> 
> 赞同：0
> 
> 时间：2013-04-05T12:39:43.680
> 
> 标签：xml, vb.net, xml-namespaces

我有一个使用轴属性来导航 XElements 的类。为此，我使用了 import 语句来导入 xml 命名空间。我想使用同一个类来处理不同版本的 xml 文件，它们的命名空间有不同的 URI，但前缀相同。

如果是 1.0 版，那么

```
imports <xmlns:name1="urn:company:name1:1.0">
imports <xmlns:name2="urn:company:name2:1.0">
imports <xmlns:gml="http://www.opengis.net/gml/3.2"> 
```

如果是 2.0 版，那么

```
imports xmlns:name1="urn:company:name1:2.0"
imports <xmlns:name2="urn:company:name2:2.0">
imports <xmlns:gml="http://www.opengis.net/gml/3.2">

public class myObject
  public Function GetElements(byval inXElement as XElement) as IEnumerable(of XElement)
    dim IXElement = from myElement in inXElement...<name1:ElementName> select myElement 
    return IXElement
  end function
end class 
```

我确信这可以通过为从基类继承的每个版本创建不同的对象来实现，但希望能够更快一些并且需要更少的代码重复。除了与前缀关联的 URI 之外，子类的许多功能和子类将完全相同。所以在基类中导入命名空间是行不通的。如果我在子类中导入命名空间，那么我必须复制所有函数和子类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T12:07:47.123

我找不到动态切换要导入的命名空间的解决方案，因此我重新设计了 xml 模式并从所有“urn:company:name”命名空间中删除了版本号。显然这并不理想，因为在需要导入我无法控制的不同版本的命名空间的情况下可能（并且可能会）出现这种情况，即 gml/3.2 与 gml/3.3。

# python - 如何将多个列表映射到一个字典？

> ID：15834244
> 
> 赞同：12
> 
> 时间：2013-04-05T12:39:58.203
> 
> 标签：python, list, dictionary

我使用了这段代码：

```
dictionary = dict(zip(list1, list2)) 
```

为了在字典中映射两个列表。在哪里：

```
list1 = ('a','b','c')
list2 = ('1','2','3') 
```

字典等于：

```
{'a': 1, 'c': 3, 'b': 2} 
```

有没有办法添加第三个列表：

```
list3 = ('4','5','6') 
```

这样字典将等于：

```
{'a': [1,4], 'c': [3,5], 'b': [2,6]} 
```

必须添加第三个列表，以便它遵循现有映射。

我们的想法是在 for 循环中迭代地进行这项工作，并将几十个值传递给正确映射的关键字。这样的事情可能吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-05T12:42:22.423

```
dict((z[0], list(z[1:])) for z in zip(list1, list2, list3)) 
```

将工作。或者，如果您更喜欢更好的字典理解语法：

```
{z[0]: list(z[1:]) for z in zip(list1, list2, list3)} 
```

这很容易扩展到任意数量的列表：

```
list_of_lists = [list1, list2, list3, ...]
{z[0]: list(z[1:]) for z in zip(*list_of_lists)} 
```

如果要转换类型以确保值列表包含所有整数：

```
def to_int(iterable):
    return [int(x) for x in iterable]

{z[0]: to_int(z[1:]) for z in zip(*list_of_lists)} 
```

当然，你可以在一行中做到这一点，但我宁愿不这样做。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-05T12:41:19.840

```
In [12]: list1 = ('a','b','c')

In [13]: list2 = ('1','2','3')

In [14]: list3 = ('4','5','6')

In [15]: zip(list2, list3)
Out[15]: [('1', '4'), ('2', '5'), ('3', '6')]

In [16]: dict(zip(list1, zip(list2, list3)))
Out[16]: {'a': ('1', '4'), 'b': ('2', '5'), 'c': ('3', '6')}

In [17]: dict(zip(list1, zip(map(int, list2), map(int, list3))))
Out[17]: {'a': (1, 4), 'b': (2, 5), 'c': (3, 6)}

In [18]: dict(zip(list1, map(list, zip(map(int, list2), map(int, list3)))))
Out[18]: {'a': [1, 4], 'b': [2, 5], 'c': [3, 6]} 
```

对于任意数量的列表，您可以这样做：

```
dict(zip(list1, zip(*(map(int, lst) for lst in (list2, list3, list4, ...))))) 
```

或者，要制作值列表而不是元组，

```
dict(zip(list1, map(list, zip(*(map(int, lst) for lst in (list2, list3, list4, ...)))))) 
```

# java - Java：整数中最高 1 位的偏移量

> ID：15834252
> 
> 赞同：0
> 
> 时间：2013-04-05T12:40:12.557
> 
> 标签：java, logarithm

为了简单起见，我们不考虑`0`负值。

**已知解决方案#1**

```
return (int)(Math.log(x)/Math.log(2)); // pseudo code 
```

问题：数值不稳定。对于`x=4`输入，它可能会回答 2 或 1。

**已知解决方案#2**

```
for(int i=0; ;++i)
{
    x = x >> 1;
    if(x==0)
        return i;
} 
```

问题：平均复杂度为 O(n)，其中 n 是类型的位数。我想有恒定的时间答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:44:45.290

[http://graphics.stanford.edu/~seander/bithacks.html#IntegerLogObvious](http://graphics.stanford.edu/~seander/bithacks.html#IntegerLogObvious)提供了许多`O(log n)`（或更好的！）解决方案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T12:46:37.947

这是一个基于[此](http://graphics.stanford.edu/~seander/bithacks.html#IntegerLogDeBruijn)的恒定时间 Java 解决方案：

```
private static final int MultiplyDeBruijnBitPosition[] = new int[] { 0, 9,
        1, 10, 13, 21, 2, 29, 11, 14, 16, 18, 22, 25, 3, 30, 8, 12, 20, 28,
        15, 17, 24, 7, 19, 27, 23, 6, 26, 5, 4, 31 };

public static int top1(int v) {
    v |= v >>> 1;
    v |= v >>> 2;
    v |= v >>> 4;
    v |= v >>> 8;
    v |= v >>> 16;
    return MultiplyDeBruijnBitPosition[(int)((v * 0x07C4ACDDL) >> 27) & 31];
} 
```

# cordova - 如何在 phonegap 应用程序中集成 dailymotion javascript sdk

> ID：15834259
> 
> 赞同：1
> 
> 时间：2013-04-05T12:40:27.887
> 
> 标签：cordova

我是 phonegap 和日常动作 javascript API 的新手。我需要将 javascript API 集成到现有的 phonegap 项目中，以便我能够将视频上传到日常动作，并据此用户将能够看到这些视频。我已经从[GitHub](https://github.com/dailymotion/dailymotion-sdk-js)下载了 dailymotion sdk 。但从这里开始，我不知道如何前进。

提前致谢。

# c# - 在带有终结器的现有类上实现 IDisposable

> ID：15834260
> 
> 赞同：0
> 
> 时间：2013-04-05T12:40:30.717
> 
> 标签：c#, .net

我有一个类目前有一个终结器，但还没有实现 IDisposable。微软表示“将 IDisposable 接口添加到现有类是一个版本破坏性更改，因为它会更改类的语义”。该类是否应该“固定”并实现 IDisposable？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:43:11.650

如果你控制了所有使用这个类的代码，那么你就可以做到，并更新代码以调用 Dispose。否则，这不是一个好主意，因为已经存在的外部代码不会调用您的 Dispose()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:46:28.537

如果添加 IDisposable，则需要在实例化您的类的所有代码中添加代码以调用 dispose() 方法。如果调用/实例化您的类的所有代码都不是由您管理的，那么这可能并不容易并导致未处理的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:47:32.183

这取决于，但基本上没有。终结器只是一个调用来释放内存的清理方法，没有暗示它会被消费代码调用。IDisposable 告诉全世界必须为类的实例调用 dispose 方法，即使在发生错误的情况下也是如此。如果这描述了您的代码，那么它首先应该是一次性的，所以答案是肯定的。但是，如果是这种情况，您将必须更改使用您的类的所有代码，以确保它们调用一次性。

# python - 如何操作数据框的列

> ID：15834267
> 
> 赞同：1
> 
> 时间：2013-04-05T12:40:57.093
> 
> 标签：python, rpy2

我使用 rpy2 的 read_csv() 从 CSV 文件中读取数据，它创建了一个 DataFrame。现在我想直接操作一整列。到目前为止我尝试了什么：

```
from rpy2.robjects.packages import importr
utils = importr('utils')

df = utils.read_csv(logn, header=args.head, skip=args.skip)
df.rx2('a').ro / 10 
```

我希望写回它显然没有的DataFrame：`df`不受此操作的影响。所以，另一个想法是

```
df.rx2('a') = df.rx2('a').ro / 10 
```

但这会产生一个函数调用不可分配的错误——这对我来说并不明显，因为 LHS 应该返回一个 Vector(?)

那么我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:21:17.407

在 Python 中，函数调用确实是不可赋值的，这就产生了对 R 代码进行一些调整的必要性。

尝试：

```
df[df.names.index('a')] = df.rx2('a').ro / 10 
```

# c++ - SDL_Flip 死锁

> ID：15834270
> 
> 赞同：1
> 
> 时间：2013-04-05T12:41:00.320
> 
> 标签：c++, multithreading, ubuntu, sdl, stdthread

在我的应用程序中，我有一个运行应用程序的简单 Execute 方法，大大简化了，它看起来像这样：

```
App::Execute()
{
     Initialize();

     SDL_Event event;        
     While(Running)
     {
         while(SDL_PollEvent(&event) > 0)
         {
             HandleEvent(&event);
         }

         Render();
     }
} 
```

Render() 看起来像这样，再次简化：

```
App::Render()
{
    SDL_FillRect(MainSurface, NULL, 0x000000); // MainSurface is declared inside the class

    // mCurrentScreen->Render(MainSurface);

    SDL_Flip(MainSurface);
} 
```

现在，当附加调试器时这工作正常，但是当我只运行可执行文件时，应用程序冻结，将 gdb 附加到进程，我可以告诉主线程卡在 SDL_Flip() 中。

我已经设法将这个问题缩小到我启动一个单独的线程来监听使用套接字的客户端，因为注释掉第二个线程的开始，使它在所有模式下工作！

线程在“服务器”类中像这样启动：

```
Server::Start()
{
    mThread = std::thread([this](){ListenThread(this); });
} 
```

ListenThread 执行通常的套接字设置 getaddrinfo()、socket()、bind()、listen()，最后调用阻塞函数 accept()。

同样，当附加调试器时，此服务器以及渲染和所有内容都可以完美运行，只有在“直接”启动时它才会挂起（迫使我 KILL 进程停止它）。

Server和App没有共同的数据结构，Server对App一无所知，两者的唯一关系就是App在Server上设置了回调函数。

```
 mServer->Callback = [this](Command cmd){ this->CommandReceived(); }); 
```

**编辑（附加）：**这只发生在我的电脑上，我的笔记本电脑上有完全相同的设置（ubuntu、gcc、sdl 版本等），它在我的笔记本电脑上运行良好。请注意它是否/如何相关，但我在 Windows 8 上的 Hyper-V 虚拟机中运行 Ubuntu，如果这有帮助的话。

# c++ - 在 C++ 中编译模板结构

> ID：15834274
> 
> 赞同：1
> 
> 时间：2013-04-05T12:41:23.283
> 
> 标签：c++, arrays, templates, g++, makefile

我已经使用 C++ 模板开发了一个数组库来处理许多类型 {int、float、double}。我将结构和函数的定义和声明存储在文件 Util.h 和 Util.cpp 中。我在arraySample.cpp 中调用它。但是，我无法编译该项目。g++ 说对 printArray 的未定义引用

错误信息

```
make all 
g++ -O2 -g -Wall -fmessage-length=0   -c -o arraySample.o arraySample.cpp
g++ -O2 -g -Wall -fmessage-length=0   -c -o Util.o Util.cpp
g++ -o arraySample arraySample.o Util.o 
arraySample.o: In function `main':
/home/vtvan/Desktop/workspace/arraySample/arraySample.cpp:15: undefined reference to `int printArray<double>(Array<double>)'
/home/vtvan/Desktop/workspace/arraySample/arraySample.cpp:22: undefined reference to `int printArray<int>(Array<int>)'
collect2: ld returned 1 exit status
make: *** [arraySample] Error 1 
```

请帮我解决这个问题，我尝试了很多次但无法解决。很奇怪，当我将3个文件组合在一起时，它可以很好地工作。所以请给我一些解决方案。我在这里附上3个文件的源代码供您参考。

非常感谢您，我期待您的回复。

实用程序.h

```
#ifndef UTIL_H_
#define UTIL_H_

#include <stdio.h>
#include <stdlib.h>
#include <string>
#include <typeinfo>

#define ARRAYMAXNDIMS 3

// multi-dimensional array 
template <typename T>
struct Array {
   T *x;
   int size;
   int nDims;
   int N[ARRAYMAXNDIMS];
};
template <typename T> int printArray(Array<T> A);

#endif /* UTIL_H_ */ 
```

实用程序.cpp

```
#include <stdio.h>
#include <stdlib.h>
#include <string>
#include <typeinfo>

#include "Util.h"

template <typename T> int printArray(Array<T> A) {

  int i = 0, j = 0;
  int k,l;

  std::string typeT = typeid(T).name();

  std::string format("  %9f");

  if (!typeT.compare("i"))
          format = "  %d";

  printf("Array with dimension (%d",A.N[0]);
  k=1;
  while(k<A.nDims && k<ARRAYMAXNDIMS){
    printf(",%d",A.N[k]);
    k++;
  }
  printf(")\n");

  switch (A.nDims) {
  case 1: // print 1D array
    for(k=0;k<A.N[0];k++){ printf("  %9d",A.x[k]);}
    printf("\n");
    return(1);
  case 2: // print 2D array
    for(k=0;k<A.N[0];k++){

      for(l=0;l<A.N[1];l++) {

          printf(format.c_str(),A.x[k+l*A.N[0]]);
      }
      printf("\n");
    }
    return(1);
  case 3: // print last 2 dimensions of a 3D array, where the index of the first dimension is i
    if(i<0 || i>=A.N[0]) {
      printf("index %d is outside the range of indices for the first dimension, i.e. [0:%d]\n",i,A.N[0]-1);
      return(0);
    }
    printf("printing slice (%d,:,:)\n",i);
    for(k=0;k<A.N[1];k++){
//      printf("%5d   ",k);
      for(l=0;l<A.N[2];l++) printf("  %9d",A.x[i+k*A.N[0]+l*A.N[0]*A.N[1]]);
      printf("\n");
    }
    return(1);
  }
} 
```

数组样本.cpp

```
#include <stdio.h>
#include <stdlib.h>

#include "Util.h"

int main(void) {

    Array<double> a;

    a.nDims = 2; a.N[0] = 2; a.N[1] = 2; a.size = 4;
    a.x = (double *)calloc(a.size,sizeof(double));
    a.x[0] = 1.23; a.x[1] = 2.23; a.x[2] = 3.23; a.x[3] = 5.23;

    printArray(a);

    Array<int>   b;
    b.nDims = 2; b.N[0] = 2; b.N[1] = 2; b.size = 4;
    b.x = (int *)calloc(b.size,sizeof(int));
    b.x[0] = 1; b.x[1] = 2; b.x[2] = 3; b.x[3] = 5;

    printArray(b);

        return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:44:20.757

您应该`printArray`在头文件中定义模板函数。只需将所有内容从`Util.cpp`移至`Util.h`。

这样想吧。当编译器正在编译`main.cpp`时，它会使用as`printArray(a)`来实例化`printArray`模板。但是它看不到函数的定义，所以无法生成对应的代码。因此，此时要使编译器可以看到函数实现，您应该将其放在头文件中。`T``double`

实现完全相同的事情的另一种方法是`#include <Util.cpp>`在底部`Util.h`（而不是`#include <Util.h>`顶部`Util.cpp`）。然而，给模板实现文件一个`.tpp`扩展名是很常见的做法。这让关系更清晰了一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:52:19.587

你已经以某种方式回答了你自己的问题。您需要通过剪切和粘贴代码或在 util.h 文件中使用 #include 指令将 util.cpp 代码与 util.h 文件结合起来。然后，当你在arraySample.cpp 中#include util.h 文件时，你会得到想要的效果。有关这方面的解释和一些历史，请参见 Vandevoorde 和 Josuttis 的“C++ 模板”第 6 章。

# xml - 使用正则表达式在 XML 中查找值

> ID：15834276
> 
> 赞同：-1
> 
> 时间：2013-04-05T12:41:28.247
> 
> 标签：xml, regex

我有一个下面的 xml

```
<ns1:Header>
<ns4:Name>Mohan</ns4:Name>
<ns4:Age>10</ns4:Age>
<ns4:Dept>CSE</ns4:Dept>
</ns1:Header> 
```

我需要编写一个正则表达式来从 Mohan 标记中查找名称。这里的命名空间（ns4）可能会动态变化。请帮助编写一个应该在所有命名空间中工作的通用正则表达式

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:47:45.800

尝试这个：

```
<ns\d+:Name>(.+)< 
```

但是你真的必须使用 RegEx 吗？有更好的方法，例如 .NET 中的 System.Xml.XmlDocument 类

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:48:15.220

binogure 的解决方案似乎是正确的，我只会让命名空间更通用：

```
/<(\w+:Name)>(\w+)<\/\1>/ 
```

或者，如果命名空间是可选的：

```
/<((?:\w+)?Name)>(\w+)(\/\1>/ 
```

该名称将在第二个捕获组中。

# web-applications - 使用 Gorilla 工具包通过根 URL 提供静态内容

> ID：15834278
> 
> 赞同：68
> 
> 时间：2013-04-05T12:41:28.590
> 
> 标签：web-applications, go, mux

我正在尝试使用 Gorilla 工具包的[`mux`包](http://www.gorillatoolkit.org/pkg/mux)在 Go Web 服务器中路由 URL。使用[这个问题](https://stackoverflow.com/questions/14081066/gae-golang-gorilla-mux-404-page-not-found/14082905#14082905)作为指导，我有以下 Go 代码：

```
func main() {
    r := mux.NewRouter()
    r.Handle("/", http.FileServer(http.Dir("./static/")))
    r.HandleFunc("/search/{searchTerm}", Search)
    r.HandleFunc("/load/{dataId}", Load)
    http.Handle("/", r)
    http.ListenAndServe(":8100", nil)
} 
```

目录结构为：

```
...
main.go
static\
  | index.html
  | js\
     | <js files>
  | css\
     | <css files> 
```

Javascript 和 CSS 文件的引用`index.html`如下：

```
...
<link rel="stylesheet" href="css/redmond/jquery-ui.min.css"/>
<script src="js/jquery.min.js"></script>
... 
```

当我`http://localhost:8100`在我的网络浏览器中访问时，`index.html`内容已成功交付，但是，所有的`js`和`css`URL 都返回 404。

如何让程序从`static`子目录中提供文件？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-04-05T13:26:07.310

我想你可能正在寻找`PathPrefix`...

```
func main() {
    r := mux.NewRouter()
    r.HandleFunc("/search/{searchTerm}", Search)
    r.HandleFunc("/load/{dataId}", Load)
    r.PathPrefix("/").Handler(http.FileServer(http.Dir("./static/")))
    http.ListenAndServe(":8100", r)
} 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2015-05-29T11:44:27.967

经过大量的反复试验，以上两个答案都帮助我想出了对我有用的方法。我在网络应用程序的根目录中有静态文件夹。

随着`PathPrefix`我不得不使用`StripPrefix`递归方式获得工作路线。

```
package main

import (
    "log"
    "net/http"
    "github.com/gorilla/mux"
)

func main() {
    r := mux.NewRouter()
    s := http.StripPrefix("/static/", http.FileServer(http.Dir("./static/")))
    r.PathPrefix("/static/").Handler(s)
    http.Handle("/", r)
    err := http.ListenAndServe(":8081", nil)
} 
```

我希望它可以帮助其他有问题的人。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-06-03T12:47:58.623

我这里有这段代码，它工作得很好并且可以重复使用。

```
func ServeStatic(router *mux.Router, staticDirectory string) {
    staticPaths := map[string]string{
        "styles":           staticDirectory + "/styles/",
        "bower_components": staticDirectory + "/bower_components/",
        "images":           staticDirectory + "/images/",
        "scripts":          staticDirectory + "/scripts/",
    }
    for pathName, pathValue := range staticPaths {
        pathPrefix := "/" + pathName + "/"
        router.PathPrefix(pathPrefix).Handler(http.StripPrefix(pathPrefix,
            http.FileServer(http.Dir(pathValue))))
    }
}
router := mux.NewRouter()
ServeStatic(router, "/static/") 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-05T13:17:08.933

试试这个：

```
fileHandler := http.StripPrefix("/static/", http.FileServer(http.Dir("/absolute/path/static")))
http.Handle("/static/", fileHandler) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-05-21T18:36:55.393

这将提供文件夹标志内的所有文件，以及在根目录提供 index.html。

# 用法

```
 //port default values is 8500
   //folder defaults to the current directory
   go run main.go 

   //your case, dont forget the last slash
   go run main.go -folder static/

   //dont
   go run main.go -folder ./ 
```

# 代码

```
 package main

import (
    "flag"
    "fmt"
    "net/http"
    "os"
    "strconv"
    "strings"

    "github.com/gorilla/handlers"
    "github.com/gorilla/mux"
    "github.com/kr/fs"
)

func main() {
    mux := mux.NewRouter()

    var port int
    var folder string
    flag.IntVar(&port, "port", 8500, "help message for port")
    flag.StringVar(&folder, "folder", "", "help message for folder")

    flag.Parse()

    walker := fs.Walk("./" + folder)
    for walker.Step() {
        var www string

        if err := walker.Err(); err != nil {
            fmt.Fprintln(os.Stderr, "eroooooo")
            continue
        }
        www = walker.Path()
        if info, err := os.Stat(www); err == nil && !info.IsDir() {
            mux.HandleFunc("/"+strings.Replace(www, folder, "", -1), func(w http.ResponseWriter, r *http.Request) {
                http.ServeFile(w, r, www)
            })
        }
    }
    mux.HandleFunc("/", func(w http.ResponseWriter, r *http.Request) {
        http.ServeFile(w, r, folder+"index.html")
    })
    http.ListenAndServe(":"+strconv.Itoa(port), handlers.LoggingHandler(os.Stdout, mux))
} 
```

# c# - 获取选定的动态文本框c#的文本

> ID：15834280
> 
> 赞同：1
> 
> 时间：2013-04-05T12:41:33.250
> 
> 标签：c#, winforms, user-controls, runtime, dynamically-generated

我在我的 winform 上有一个 `usercontrol`，并且在每次单击按钮时（在运行时）创建多个用户控件。我`usercontrol`有一个`textbox`. 另外，在 winform 上我有一个简单的文本框。我希望，当我选择用户控件时，动态文本框中的文本也出现在简单文本框中。在我的代码中，它说来自用户控件的文本框不在当前上下文中。我的代码：

```
private void Gettext()
{
    int i = 0;
    Control[] txt = Controls.Find("txtBox" + i.ToString(), true);//here I search for the dynamical textbox
    foreach (Control c in panel1.Controls)
    {
        if (c is UserControl1) 
        {
            if (((UserControl)c).Selected)
                 txtSimple.Text= txtBox[0].Text ;
        }
        i++;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:50:31.243

```
Control[] txt = ...
txtSimple.Text= txtBox[0].Text ; 
```

可以将 txtBox[0].Text 替换为 txt[0].Text 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T12:53:58.617

好的开始

```
Control[] txt = Panel1.Controls.Find("txtBox" + i.ToString(), true) 
```

然后

```
foreach (Control c in txt) // txt???
{
    UserControl1 uc = c as UserControl1;
    if (uc != null) 
    {
        if (uc.Selected) txtSimple.Text= uc.Text ;
    }
} 
```

然后，如果您正在测试 UserControl1，您还应该转换为 UserControl1 而不是 UserControl

UserControl1 是一个非常糟糕的名字。

我什至不会提及假设所有控件的名称都以 txtBox 开头，并且没有其他控件具有...

如果在运行时选择了多个控件，则整个事物都会死掉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T13:16:29.610

我不知道我是否正确理解了你的问题：

您的表单结构如下所示：

*   您的表单有一个 Panel panel1，其中包含许多 UserControl1 类型的 UserControl，在运行时创建，还有一个 TextBox txtSimple。
*   每个 UserControl 都有一个名为 ["txtBox" + i] 的文本框
*   在选择时要同步选定 UserControl 的 txtSimple 和 TextBox 的文本

然后：

```
int i=0;
foreach (Control c in panel1.Controls)
{
    if (c is UserControl1) 
    {
        if (((UserControl)c).Selected)
        {
             TextBox dynTxtBox = (TextBox)c.Controls["txtBox" + i];
             txtSimple.Text= dynTxtBoxe.Text;
        }
    }
    i++;
} 
```

如果您无法通过这种方式找到您的 TextBox，则可能意味着它的名称设置不正确。

此外，如果您的 UserControl 上只有一个 TextBox，那么通常不需要以这种特定方式命名它（我的意思是从您的代码中我假设您的第一个用户控件上有 txtBox0，第二个用户控件上有 txtBox1，依此类推）。您可以简单地将其命名为“txtBox”，然后像这样访问它：

```
txtSimple.Text = selectedUserControl.Controls["txtBox"].Text; 
```

控件名称在 Control、UserControl 和 Form 的 Controls 集合中是唯一的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T13:24:00.037

您需要在`UserControl`.

```
 //in UserControl
    public event EventHandler Selected;

    private void textBox1_MouseClick(object sender, MouseEventArgs e)
    {
        if(Selected!=null)
            Selected(this,null);
    } 
```

现在在动态创建 UserControl 时订阅 Selected 事件。像这样：

```
 UserControl control = new UserControl();
    control.Selected += myControl_Selected;

    private void myControl_Selected(object sender, EventArgs e)
    {
        UserControl control = (UserControl)sender;
        textBox2.Text = control.Text;
    } 
```

我希望这有帮助。

# objective-c - Objective-C中的视频录制错误

> ID：15834282
> 
> 赞同：1
> 
> 时间：2013-04-05T12:41:55.390
> 
> 标签：objective-c, video

我玩了 AVCam 演示示例，以添加一个播放器 (MPMoviePlayerController) 允许预览录制的视频

我在 xib 中添加了一个播放按钮以及相应的 IBOutlet 和 IBActions + 一个播放器：

```
@property (nonatomic,retain) IBOutlet UIBarButtonItem *playerButton;
@property (nonatomic, assign) MPMoviePlayerController *player;

- (IBAction)playVideo:(id)sender; 
```

我确实在 viewdidload 中初始化了播放器：

```
player = [[MPMoviePlayerController alloc] init]; 
```

播放动作如下

```
- (IBAction)playVideo:(id)sender {

     if(player) {
     [player stop];
     }
     // Create a new movie player object.
     [player setContentURL:[[[self captureManager] recorder] outputFileURL]];
     player.movieSourceType = MPMovieSourceTypeFile;
    [player prepareToPlay];
    CGRect viewInsetRect = CGRectMake( 0, 0, 200, 300);
    // Inset the movie frame in the parent view frame.
    [[player view] setFrame:viewInsetRect];

    player.scalingMode = MPMovieScalingModeAspectFill;
    player.controlStyle = MPMovieControlStyleNone;
    //player.useApplicationAudioSession = NO;

    //[self.view addSubview: [_player view]];
    [self.view addSubview:player.view];

    if(player) {
    [player play];
    }

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(playComplete) name:MPMoviePlayerPlaybackDidFinishNotification object:player];

} 
```

播放结束时调用 playComplete ：

```
-(void)playComplete {
    [player.view removeFromSuperview];
} 
```

结果：当我启动应用程序时，我可以录制任意数量的视频。当我播放最后录制的视频时，我可以毫无问题地播放它，但是在播放视频后，如果我再次尝试录制，我会在开始录制时遇到此错误：

错误域=AVFoundationErrorDomain 代码=-11803 “无法录制” UserInfo=0x152e60 {NSLocalizedRecoverySuggestion=再次尝试录制。，AVErrorRecordingSuccessfullyFinishedKey=false，NSLocalizedDescription=无法录制}

我认为这是临时输出文件的问题，但似乎不是。

我想知道引入 MPMoviePlayerController 是否会以某种我无法弄清楚的方式破坏应用程序的行为。

你们有些人有什么想法吗？

谢谢

磷

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:06:22.363

found that the -11803 was due to the fact that the captureManager session was not running (found the answer on Stackoverflow but i did not understand it very fast...)

at the end of the video preview play, in playComplete, I added a test to check the capture manager session status, to make it run if this was not the case anymore.

```
-(void)playComplete {
    [player.view removeFromSuperview];
    if(![[[self captureManager] session] isRunning]) {
        // Start the session. This is done asychronously since -startRunning doesn't return until the session is running.
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            [[[self captureManager] session] startRunning];
        });
    }
} 
```

It is working now, but if anyone knows why the video preview stops the captureManager session, I would be happy to understand it.

P

# batch-file - 为我修复的批处理脚本

> ID：15834283
> 
> 赞同：-1
> 
> 时间：2013-04-05T12:41:56.297
> 
> 标签：batch-file

此代码回显字符和字符的每一行号，但不完全正确。尝试修复。主要的是变量计数必须保留而不是 %%m。请用电话解释我的行！

以及如何使最后一行显示输入单词的最后一个字符。

```
@ECHO OFF

:input
set /p word=input your word:
if not defined word goto input
(ECHO %word%)> tempfile.txt

FOR %%x IN (tempfile.txt) DO ( SET /A lenght=%%~zx - 2 )
del tempfile.txt
echo %word% got %lenght% characters

setlocal enabledelayedexpansion
for /l %%m in (1,1,!lenght!) do (
    set /a count=0
    set /a count=count+%%m
    call echo !count! %%word:~!count!,1%%
) 
endlocal

pause 
```

所以，这里是输出：

```
input your word:qwertzuio
qwertzuio got 9 characters
1 w
2 e
3 r
4 t
5 z
6 u
7 i
8 o
9

Press any key to continue... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:34:02.680

当您回显字符时，您将其`!count!`用作索引，但从`count`1 开始，而您需要从 0 开始索引。

尝试这个：

```
for /l %%m in (1,1,!lenght!) do (
    set /a count=%%m
    set /a index=%%m-1
    call echo !count! %%word:~!index!,1%%
) 
```

我设置`index`为`%%m-1`从 0 开始，但从`count`1 开始。（我也摆脱了无用的额外`set /a count=0`内容。）

这是一个示例输出：

```
input your word:foo
foo got 3 characters
1 f
2 o
3 o
Press any key to continue . . . 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:35:16.890

此代码部分：

```
for /l %%m in (1,1,!lenght!) do (
    set /a count=0
    set /a count=count+%%m
    call echo !count! %%word:~!count!,1%%
) 
```

是胡说八道。对于*每次*迭代，您首先将 count 设置为零，然后添加 %%m ；最终结果是计数始终等于 %%m。如果您消除计数并使用 %%m 代替，您可能会获得完全相同的结果：

```
for /l %%m in (1,1,!lenght!) do (
    echo %%m !word:~%%m,1!
) 
```

另一方面，字符串位置从 0 开始，而不是 1，因此您需要像 Nate 之前所说的那样调整索引。但是，为了直接使用 FOR 变量进行子串提取，避免额外的 CALL 命令，这样修改 FOR 限制比较方便：

```
set /A lenMinus1=lenght-1
for /l %%m in (0,1,%lenMinus1%) do (
    set /a position=%%m+1
    echo !position! !word:~%%m,1!
) 
```

安东尼奥

# sql - 我看不到我的模型类

> ID：15834298
> 
> 赞同：1
> 
> 时间：2013-04-05T12:42:39.427
> 
> 标签：sql, entity-framework, asp.net-mvc-4

我首先在 MVC4 中有一个带有 Razor 和 Entity Framework 数据库的应用程序。我有一个 SQL 数据库。基于此，我使用新项目“ADO.NET Entity Data Model”生成了图表（edmx）。我选择了数据库连接，我的表和程序已经生成了一个包含表和关系的图表，但我可以找到必须生成的类在每个选择的表之后（在解决方案资源管理器中。对于来自数据库的表学生，我必须在我的解决方案中与班级学生进行映射）。我想添加一些验证。有人能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:25:55.950

EDMX 图有一个“代码隐藏”文件。单击 .edmx 文件旁边的 >，您应该会看到一个与 .edmx 名称相同但以 .Designer.cs 结尾的文件；这些类在该文件的“实体”区域中定义。

话虽如此，您永远不应该编辑该文件的内容。那里的代码是从您的图表生成的，因此当您在其他地方更改数据模型时，任何更改都会丢失。如果要向模型添加验证属性，则需要在其他地方创建部分声明，并将元数据类附加到它们。[这个 SO question](https://stackoverflow.com/questions/14059455/adding-validation-attributes-with-an-entity-framework-data-model)的公认答案显示了您需要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:46:49.453

您必须包含 EDMX 文件的命名空间，您可以在文件的属性中看到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:34:42.617

假设您在 Models 文件夹中创建 EDMX 文件。在解决方案资源管理器 -> 模型 -> Model1.edmx -> Model1.tt -> student.cs （这是你的学生表类）

# c++ - 如何配置 Visual Studio 不从库输出警告？

> ID：15834304
> 
> 赞同：1
> 
> 时间：2013-04-05T12:43:09.790
> 
> 标签：c++, visual-studio, compiler-warnings

有什么方法可以防止 Visual Studio 从包含的库中打印出警告？

\Wall 给了我大量来自 STL 和 Qt 标头的警告，尽管我只想查看那些源自我自己的代码（即当前 Visual Studio 项目的一部分的代码）的警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:48:30.860

您可以使用 pragma 设置每个文件的警告级别。

所以在你包括之前

```
#pragma warning( push )
#pragma warning( disable : 4705 )
#pragma warning( disable : 4706 )
#pragma warning( disable : 4707 )
// Some code

#include your files here

#pragma warning( pop ) 
```

更多信息在这里：http: [//msdn.microsoft.com/en-us/library/2c8f766e%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/2c8f766e%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-24T14:51:51.347

这是唯一的可移植方式（如果将 -isystem 与其他编译器一起使用）：

```
#ifdef _MSC_VER
#pragma warning(push)
#pragma warning(disable: ...)
#endif
#include <Q...>
#ifdef _MSC_VER
#pragma warning(pop)
#endif 
```

希望他们能在这些日子里实现 isystem ：

[https://visualstudio.uservoice.com/forums/121579-visual-studio-2015/suggestions/14717934-add-a-cl-exe-option-for-system-headers-like-gcc-s](https://visualstudio.uservoice.com/forums/121579-visual-studio-2015/suggestions/14717934-add-a-cl-exe-option-for-system-headers-like-gcc-s)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-05T14:35:54.887

您可以使用警告级别 4，它只会包含您的代码的警告。

# r - 使所有 gvim 窗口共享一个 R 进程和屏幕会话

> ID：15834306
> 
> 赞同：0
> 
> 时间：2013-04-05T12:43:13.367
> 
> 标签：r, vim

旧版本的 vim-r-plugin 提供了一个选项，可以选择所有 vim/gvim 实例是使用它们自己的 R 进程（和屏幕会话）还是单个共享进程（使用`vimrplugin_single_r`变量）。[参见 101217 版本文档的第 5.2 节](http://binfalse.de/wp-content/uploads/2010/12/vim-r-plugin-101217.html)。

当前版本的插件默认使用单独的 R 进程，尽管我尽了最大努力，但我对如何将其更改回单个进程感到茫然。有人知道怎么做吗？

**编辑**

我找到的最佳解决方案是使用版本 0.9.9.1，这是包含此选项的最后一个版本。

# iphone - 获取选定单元格的索引路径

> ID：15834317
> 
> 赞同：2
> 
> 时间：2013-04-05T12:43:47.307
> 
> 标签：iphone, ios, objective-c, uitableview, uialertview

当用户在编辑模式下点击默认`delete`按钮时`UITableView`，用户应该得到一个警报视图，如果他在 AlertView 中再次点击删除，则该行应该被删除。最初我用下面的代码完成了这个，没有 AlertView，它工作正常。

```
 [[self categoriesArray]removeObjectAtIndex:[indexPath row]];
   NSArray *indexPathsToRemove = [NSArray arrayWithObject:indexPath];
   [self.tableView deleteRowsAtIndexPaths:indexPathsToRemove withRowAnimation:UITableViewRowAnimationLeft];
   [self.categoriesArray writeToFile:[self dataFilePath]  atomically:YES]; 
```

但是现在，因为我必须在 alertview 委托方法中使用相同的代码。我不知道如何获取`[indexPath row]`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T12:50:39.400

将您的 indexpath 设置为`UIAlertView`Tag 并从 Delegate 获取。

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath // indexPath is here
{
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
       UIAlertView * alertView = [[UIAlertView alloc]initWithTitle:@"Alert" message:@"Are you sure want to delete" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Delete", nil];
       [alertView setTag:indexPath.row]; // Assigning here.
        [alertView show];
    }
}
    // UIAlertView Delegate

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSLog(@"%d",alertView.tag); // Your Indexpath is here

**Edited:**

    NSIndexPath * path = [NSIndexPath indexPathForRow:alertView.tag inSection:0];
    [[self categoriesArray]removeObjectAtIndex:[path row]];
    NSArray * indexPathsToRemove = [NSArray arrayWithObject:path];
    [self.tableView deleteRowsAtIndexPaths:indexPathsToRemove withRowAnimation:UITableViewRowAnimationLeft];
    [self.categoriesArray writeToFile:[self dataFilePath]  atomically:YES];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T12:49:26.973

在 commitEditingStyle 方法上将标签设置为警报视图

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath // indexPath is here
{
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
       UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Delete Record" message:@"Are you sure to delete the record." delegate:self cancelButtonTitle:@"NO" otherButtonTitles:@"YES", nil];
       alert.tag = indexPath.row;
       [alert show];
    }
} 
```

`Alert delegate`方法_

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
     if(buttonIndex == 1)//YES button clicked
     {
         [[self categoriesArray]removeObjectAtIndex:alertView.tag];
     }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T12:47:03.473

`UITableView`通过以下方式向您提供此信息：

`- (NSIndexPath *)indexPathForSelectedRow`

或者如果进行了多项选择：

`- (NSArray *)indexPathsForSelectedRows`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T12:47:45.487

在此委托方法中使用警报视图

```
 - (void)tableView:(UITableView *)tableView didEndEditingRowAtIndexPath:(NSIndexPath *)indexPath 
```

然后在用户单击删除时执行您想做的任何事情。如果用户在警报视图中按下删除，那么您必须使用警报视图委托方法来处理它。

# javascript - JS SQLITE，读取一个数据库并写入另一个

> ID：15834321
> 
> 赞同：1
> 
> 时间：2013-04-05T12:44:02.130
> 
> 标签：javascript, sqlite, titanium

我有以下函数，它从一个数据库中读取大约 15,000 行，格式化数据并写入另一个。目前这需要大约 6 秒的时间来执行。有没有办法做到这一点，而不使用 javascript 来格式化数据，只使用 sqlite 查询？或者其他加快速度的方法？

谢谢

```
 var events = db.open(events.sqlite3);
      function updateTimetable() {
        var rows = users.execute("SELECT id, complete, strftime('%s000',time) AS realTime, strftime('%H:%M',time) AS Time FROM exerciseLists WHERE patientId = ? ORDER BY time ASC", Alloy.Globals.currentUser);
          events.execute("DELETE FROM Events");
          events.execute('BEGIN');
          while (rows.isValidRow()) {
              var colorType;
              var active;
              var time = rows.fieldByName('Time');
              var realTime = rows.fieldByName('realTime');
              var now = new Date().getTime();
              if (realTime < now) {
                  colorType = 'red';
                  active = 'no';
              } else {
                  colorType = 'blue';
                  active = 'no';
              };
              if (rows.fieldByName('complete')) {
                  colorType = 'yellow';
              }
              if (Alloy.Globals.sessionButton.button.sessionId === rows.fieldByName('id')) {
                  colorType = 'green';
                  active = 'yes';
              }
              function pad(n) {
                  return n < 10 ? '0' + n : n
              }

              var d = new Date(parseInt(realTime));
              var dYear = d.getFullYear();
              var dDay = pad(d.getDate());
              var dMonth = pad(d.getMonth()+1);
              var dHour = pad(d.getHours()+1);
              var dMinute = pad(d.getMinutes()+1);

              var dFinal = dYear + "-" + dMonth + "-" + dDay + " " + dHour + ":" + dMinute;

              events.execute("INSERT INTO Events (title, date_start, date_end, note, location, identifier, type, attendees, organizer) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)", time, dFinal, '(null)', rows.fieldByName('id').toString(), colorType, rows.fieldByName('id').toString(), active, '(null)', '(null)');

              rows.next();
          }
          rows.close();
          events.execute('COMMIT');
          Alloy.Globals.refreshTimetable();
      }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:20:32.273

[将](http://www.sqlite.org/lang_attach.html)一个数据库附加到另一个数据库，然后使用`INSERT ... SELECT ...`：

```
ATTACH 'users.sqlite' AS users_db;

INSERT INTO Events (title, date_start, date_end,
                    note, location, identifier,
                    type, attendees, organizer)
SELECT strftime('%H:%M', time),
       strftime('%Y-%m-%d %H:%M', time),
       '(null)',  -- why not NULL?
       id,
       CASE WHEN id = ? /* sessionId */   THEN 'green'
            WHEN complete                 THEN 'yellow'
            WHEN time < CURRENT_TIMESTAMP THEN 'red'
            ELSE                               'blue'
       END,
       id,
       CASE WHEN id = ? /* sessionId */ THEN 'yes'
            ELSE                             'no'
       END,
       '(null)',
       '(null)'
FROM users_db.exerciseLists
WHERE patientId = ?
ORDER BY time; 
```

# c++ - 哪个编译器支持带有默认参数的函数指针？

> ID：15834324
> 
> 赞同：11
> 
> 时间：2013-04-05T12:44:08.520
> 
> 标签：c++, compiler-construction, standards, function-pointers

哪个 c++ 编译器可以编译下一个代码？

```
void (*G2API_CopyGhoul2Instance)(CGhoul2Info_v &ghoul2From, 
                                 CGhoul2Info_v &ghoul2To, 
                                 int modelIndex = -1); //<--- That's it! 
```

这不是我的代码，我有很多这样的东西。我知道标准不允许这样的声明，但是[这条](https://stackoverflow.com/a/2225426/2210651)评论告诉我一些编译器允许它。

PS 此代码来自[星球大战绝地武士：绝地学院](http://sourceforge.net/projects/jediacademy/)源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:57:19.627

虽然我找到了一个有用的链接，但无法建议编译器，其中列出了使用 GCC 编译器成功编译代码所需的修复。

[http://www.lucasforums.com/showthread.php?t=203922](http://www.lucasforums.com/showthread.php?t=203922)

希望对你有用。

# sql - 死锁与日志记录

> ID：15834325
> 
> 赞同：1
> 
> 时间：2013-04-05T12:44:11.770
> 
> 标签：sql, sql-server-2008, logging, deadlock

Web应用程序。C#，SQL 2k8

在一个列表中，在实际的动态 SQL 被执行并返回所需的记录之前，有很多事情正在发生。

最近我们为整个应用程序添加了一些代码（死锁问题），事务提交，回滚和重试 X 次，整个 9 码。

这是一个很大的优势，我们真的需要它。

但

为了调试列表的任何可能问题，我将动态 SQL 字符串保存在日志表中（它不存储最近几周的旧记录）

问题是：如果列表崩溃，现在没有日志。因为回滚的东西......

到目前为止，我最好的想法是调用列表两次：

1.  "check" - 模式，将创建动态 SQL，将其保存在 LOG tbl 中，但不会执行

2.  "list" - 模式将：

2a. 重新计算动态 SQL

或者

2b。复用“check-mode”创建的动态SQL

无论是 2a 还是 2b，都不应该有很大的性能问题，因为列表存储过程中最昂贵的部分将是动态 sql 的实际执行。“检查” - 模式是一些基本的字符串连接。

死锁重试部分只会进行第二次数据库调用，这也很好！

仍然。我不是有这个想法的最快乐的人。我想知道是否有更好的方法来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:31:37.527

您可以使用（表）变量和 TRY CATCH 块在事务期间保存数据。变量在回滚后保留。

如果您的翻译在存储​​过程中，则可能如下所示：

```
BEGIN TRY
    BEGIN TRAN

    DECLARE @SQL NVARCHAR(MAX)
    SET @SQL = 'SELECT 1'

    RAISERROR('A',16,1)

    EXEC (@SQL)

    COMMIT

END TRY
BEGIN CATCH
    ROLLBACK
    SELECT @SQL --WRITE TO LOG TABLE

END CATCH 
```

如果您的事务在 SP 之外 - 在 C# 代码中（这通常是一个更好的主意），您可以使用 RAISERROR 将变量连同发生的实际错误一起发送回应用程序。像这样的东西：

```
BEGIN TRY

    DECLARE @SQL NVARCHAR(MAX)
    SET @SQL = 'SELECT 1'

    RAISERROR('A',16,1)

    EXEC (@SQL)

END TRY
BEGIN CATCH

    DECLARE @ErrorMessage NVARCHAR(4000)
    DECLARE @ErrorSeverity INT
    DECLARE @ErrorState INT

    SELECT 
        @ErrorMessage = 'Error: ' + ERROR_MESSAGE() + '; SQL: ' + @SQL,
        @ErrorSeverity = ERROR_SEVERITY(),
        @ErrorState = ERROR_STATE()

    RAISERROR (@ErrorMessage,@ErrorSeverity,@ErrorState)

END CATCH 
```

# c++ - 奇怪的整数溢出逻辑

> ID：15834326
> 
> 赞同：1
> 
> 时间：2013-04-05T12:44:14.777
> 
> 标签：c++, integer-arithmetic

对于以下代码，我得到了溢出，但遗憾的是我似乎无法理解为什么。

```
std::int8_t smallValue         = -1;
unsigned int value             = 500;
std::uint8_t anotherSmallValue = 1;

auto test = smallValue * value * anotherSmallValue; 
```

之后`test`是一个相当大的值。

有人可以解释一下，这里会发生什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T12:47:45.513

结果类型将在`unsigned int` [这里测试](http://liveworkspace.org/code/1uymEV%241)。`smallValue * value` `smallValue`将被强制转换为无符号，所以这个表达式是`(unsigned)-1 * 500`. 但是，如果你用`-Wsign-conversion`- 编译器告诉你编译这段代码，你会做坏事。[关联](http://liveworkspace.org/code/1uymEV%243)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-05T12:57:29.267

当编译器看到`smallValue * value`时，它必须根据输入数据类型`signed`（8 位）和`unsigned int`（通常是 16 位或 32 位）决定结果的数据类型。C++ 的规则规定，在这种情况下，结果将是无符号的。因此， 的值`smallValue * value`不能是`-500`，正如您所期望的那样；相反，该值`-500`被解释为一个正数。

此外，您在这里将一个 8 位值乘以一个通常为 16 位或 32 位的值。在这种情况下，C++ 的规则规定，较小的存储值将首先被转换为与较大的相同的大小；所以在这种情况下，结果`smallValue * value`确实会大到足以存储一个数量级`500`。

继续乘以无符号数量`anotherSmallValue`(=1) 会导致另一个`unsigned`具有相同值的数量。

因为你正在使用`auto`，所以返回类型被推断为是`unsigned`。

简单地通过转换回 a `signed`(例如，通过将值定义`test`为 an `int`，而不是 an `auto`，通常会将整个操作的结果转换回一个`signed`值，而不在内部更改位；然后这将正确显示`-500`,正如您所期望的那样；但是，正如其他海报所指出的那样，这在理论上是相当危险的，因为它在技术上并不能保证工作，尽管它通常会以这种方式与今天的编译器一起工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T12:55:21.333

仅使用前两个变量 ( `smallValue * value`)，您将获得相同的结果。

首先，积分提升适用于两个值：`int8_t`变成`int`和`unsigned int`保持原样。

然后应用 C++11 5/9 中的这条规则来确定结果类型：

> 否则，如果无符号整数类型的操作数的秩大于或等于另一个操作数类型的秩，则将有符号整数类型**的操作数转换为无符号整数类型的操作数的类型**。

所以`-1`必须转换为`unsigned int`使用模运算，给出一个很大的正数。乘以 500 将溢出（再次使用模运算），给出不同的大数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T12:50:26.210

将'auto'设为签名类型，你会没事的：

```
long test = smallValue * value * anotherSmallValue; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T12:56:00.547

使用混合类型操作总是容易出现这样的错误。我建议您使用单一类型进行算术运算

# python - ipython 和 ipython 笔记本之间的奇怪精度差异然后使用带有 f2py 的 fortran 模块

> ID：15834327
> 
> 赞同：2
> 
> 时间：2013-04-05T12:44:18.433
> 
> 标签：python, fortran, ipython, f2py

在使用用 f2py 编译的 fortran 模块时，我遇到了 ipython 和 ipython 笔记本之间的奇怪精度差异。

我的 fortran 模块是：

```
subroutine tt(string,fmt,n_num,out)
  implicit none
  INTEGER,INTENT(IN)::n_num
  CHARACTER(LEN=*),INTENT(IN)::string
  CHARACTER(LEN=*),INTENT(IN)::fmt
  DOUBLE PRECISION,INTENT(OUT)::out(n_num)
  read(string,fmt) out
end subroutine tt 
```

编译：`f2py -c -m andre tt.f90`

在 ipython 我得到：

```
In [1]: import numpy as np
In [2]: import andre
In [3]: out = np.array(andre.tt(' 0.34 4.56 5.67','(3f5.2)',3),dtype=np.float)
In [4]: print out
    [ 0.34  4.56  5.67] 
```

这是所需的输出。但是，在 ipython 笔记本中，使用相同的代码，我得到：

```
print out
print out+0.0001
[ 0\.  4\.  5.]
[  1.00000000e-04   4.00010000e+00   5.00010000e+00] 
```

我究竟做错了什么？

# xml - 复杂的 Xpath 到 Linq to XML

> ID：15834328
> 
> 赞同：0
> 
> 时间：2013-04-05T12:44:19.363
> 
> 标签：xml, linq, linq-to-xml

我的输入 XML：

```
....
    <node Attribute1 = "GUID1">
        <childnode1 AttributeChildnode= var1> </childnode>
        <childnode2 AttributeChildnode= var2> </childnode>
    </node>
    <node Attribute1 = "GUID2">
        <childnode3 AttributeChildnode= var3> </childnode>
        <childnode4 AttributeChildnode= var4> </childnode>
    </node>
.... 
```

我的 XPath 代码如下所示

```
mynodelist = xmldoc.SelectNodes(".//node[@Attribute1 ='" & varString1 &'']/nodechild[@AttributeChildnode1 = ''& varString2 &'']") 
```

我不知道 Linq to XML 代码应该如何获得相同的结果有人可以帮助我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:47:17.243

您仍然可以使用 XPath`XDocument`和 LINQ to XML；

```
var doc = XDocument.Load(filePath);
var myNodeList = doc.XPathSelectElements(".//node[@Attribute1 ='" & varString1 &'']/nodechild[@AttributeChildnode1 = ''& varString2 &'']"); 
```

`XPathSelectElements``XNode`在命名空间内被声明为扩展方法`System.Xml.XPath`。

***标准*****Linq to XML 版本**

输入 XML：

```
<root>
    <node Attribute1="GUID1">
        <childnode AttributeChildNode1="var1" AttributeChildNode2="result1"></childnode>
        <childnode AttributeChildNode1="var2" AttributeChildNode2="result2"></childnode>
    </node>
    <node Attribute1="GUID2">
        <childnode AttributeChildNode1="var3" AttributeChildNode2="result3"></childnode>
        <childnode AttributeChildNode1="var4" AttributeChildNode2="result4"></childnode>
    </node>
</root> 
```

询问：

```
string guid = "GUID1";
string var = "var1";

var elements = XElement.Load("Input.txt");

var value = (from node in elements.Elements("node")
             where (string)node.Attribute("Attribute1") == "GUID1"
             from childNode in node.Elements()
             where (string)childNode.Attribute("AttributeChildNode1") == "var1"
             select (string)childNode.Attribute("AttributeChildNode2")).FirstOrDefault(); 
```

返回`result1`- `result4`，取决于`guid`和`var`变量值。

# macos - 适用于 Mac OS X 的 Commodore 64 开发工具

> ID：15834329
> 
> 赞同：6
> 
> 时间：2013-04-05T12:44:19.557
> 
> 标签：macos, c64

您使用哪些工具在 OSX 上对 C64 进行交叉开发？

哪些汇编器、文本编辑器或 IDE、gfx、sprite、字符集编辑器？

或者您只是更喜欢通过 parallels 桌面或 bootcamp 的 Windows 环境？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T22:29:27.190

**对于 MacOS X**

文本编辑器：Eclipse ( [http://www.eclipse.org/](http://www.eclipse.org/) )

汇编器：WUDSN ( [http://www.wudsn.com/](http://www.wudsn.com/) )

图形编辑器：GraFX2 ( [http://code.google.com/p/grafx2/](http://code.google.com/p/grafx2/) )

Sprite/Charset 编辑器：您可能需要开发自己的工具或使用在虚拟机上运行的 Windows。

**对于 Windows**

文本编辑器：Eclipse ( [http://www.eclipse.org/](http://www.eclipse.org/) )、EditPlus ( [http://www.editplus.com/](http://www.editplus.com/) ) 或 UltraEdit ( [http://www.ultraedit.com/](http://www.ultraedit.com/) )

汇编器：KickAssembler ( [http://www.theweb.dk/KickAssembler/Main.php](http://www.theweb.dk/KickAssembler/Main.php) ) 或 ACME 交叉汇编器 ( [http://www.esw-heim.tu-clausthal.de/~marco/smorbrod/acme/](http://www.esw-heim.tu-clausthal.de/~marco/smorbrod/acme/) )

图形编辑器：Timanthes ( [http://csdb.dk/release/?id=75871](http://csdb.dk/release/?id=75871) ) 或 Project One ( [http://csdb.dk/release/?id=86776](http://csdb.dk/release/?id=86776) )

Sprite 编辑器：SpritePad ( [http://csdb.dk/release/?id=100657](http://csdb.dk/release/?id=100657) )

字符集编辑器：CharPad ( [http://csdb.dk/release/?id=101863](http://csdb.dk/release/?id=101863) )

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-04-25T19:46:41.383

编辑：Relaunch64 现在可作为 Windows、OS X 和 Linux 的稳定版本：[http ://www.popelganda.de/relaunch64.html](http://www.popelganda.de/relaunch64.html)

如果您也对在 OS X 上使用 ACME 或 64tass 感兴趣，您也可以在那里找到最新的二进制文件。

Relaunch64 是一个专门专注于完成这项工作的 C64-Assembler-IDE，无需在开始之前进行全面设置。

在接下来的几天里，3.1 版将以更快的性能发布（参见[https://sourceforge.net/projects/relaunch64/files/3.1.0/](https://sourceforge.net/projects/relaunch64/files/3.1.0/)）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-05-08T01:11:38.747

我使用 Emacs 24.3 作为我的编辑器。它的库存`asm-mode`对于 C64 代码来说是可以的，尽管它不一定是为此而设计的，但我认为那里也有一些专用的 C64 模式。到目前为止，我选择的汇编程序是Style 的[TMPx](http://style64.org/release/tmpx-v1.0-style)（“Turbo Macro Pro cross”）。就像一个魅力，在用 VICE 测试时对我来说非常快。

编辑：我已经切换到 64tass，这在宏、代码组织、调试等方面更有帮助。我确实必须为我的 Intel mac 自己编译它，但这很容易。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-27T21:59:02.010

我的主要工具是[Sublime text 3](http://www.sublimetext.com/3)、[Kick Assembler](http://www.theweb.dk/KickAssembler/)和[Vice C64 仿真器](http://www.viceteam.org/)。我维护和使用[Kick Assembler (C64) sublime package](https://sublime.wbond.net/packages/Kick%20Assembler%20%28C64%29)，简而言之，它具有以下功能：

*   语法着色
*   构建、构建和运行、构建和调试等。
*   一些片段
*   代码导航/符号列表

*有关Kick Assembler (C64) sublime 软件包* [的](http://goatpower.org/)功能和安装的更多信息。

我主要使用 OSX，但有时也使用 Windows，因为所有三个工具（包括 Sublime 包）都可以在 OSX 和 Windows 上运行，所以我可以很灵活。

我还使用[TMPView](http://style64.org/release/tmpview-v1.3-style)来转换我的旧 TASM 源文件。在 Windows 端，我使用[DirMaster](http://style64.org/dirmaster)来处理旧的 c64 磁盘映像。

# java - Android - 在单击 ActionBar 按钮时创建 PopupMenu

> ID：15834332
> 
> 赞同：1
> 
> 时间：2013-04-05T12:44:22.420
> 
> 标签：java, android, android-actionbar, runtimeexception, popupmenu

单击操作栏中的按钮后，我试图使 PopupMenu 出现。

我有文件中的按钮 -`action.xml` 在“ `menu`”文件夹中。

这包含 ActionBar 的按钮。

```
<item
    android:id="@+id/overflow"
    android:icon="@drawable/ic_action_overflow"
    android:orderInCategory="2"
    android:menuCategory="container"
    android:title="Overflow Button"       
    android:showAsAction="ifRoom|withText"
    android:onClick="**showPopup**"
    />

<item
    android:id="@+id/add"
    android:icon="@drawable/add"
    android:title="Add Button"
    android:orderInCategory="100"
    android:showAsAction="ifRoom|withText"
    android:onClick="**showPopup**"
    /> 
```

单击按钮后，我希望`PopupMenu`显示一个按钮。该`showPopup`方法位于`FragmentActivity`类中：

```
 public void showPopup(MenuItem v) {        
        PopupMenu popup = new PopupMenu(this, this.getCurrentFocus());      
        popup.inflate(R.layout.pop);        
        popup.show();       
        } 
```

该`pop.xml`文件存储在布局文件夹中（并包含弹出菜单的视图）

不幸的是，这给了我一个`RuntimeException java.lang.reflect.InvocationTargetException`.

有任何想法吗？

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-26T19:47:43.507

首先，这很容易。

您必须将此属性添加到您的 actionBar 项。

```
android:onClick="openPopup" 
```

`openPopup`是你的弹出方法。

然后，在您`MainActivity`应该扩展的方式中，`ActionBarActivity`
您必须添加将被调用的方法`onClick`。

```
public void openPopup(MenuItem item){ 
      Point p;
      p.x = 0;
      p.y = 0;
      showPopup(MainActivity.this, p);
      Toast.makeText(this, "Popup Should Open", Toast.LENGTH_LONG).show();
  } 
```

当然还有`showPopup`方法。

```
private void showPopup(final Activity context, Point p) {

   // Inflate the popup_layout.xml
   LinearLayout viewGroup = (LinearLayout) context.findViewById(R.id.popup);
   LayoutInflater layoutInflater = (LayoutInflater) context
     .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
   View layout = layoutInflater.inflate(R.layout.popup_layout, viewGroup);

   // Creating the PopupWindow
   final PopupWindow popup = new PopupWindow(context);
   popup.setContentView(layout);
   popup.setWidth(ViewGroup.LayoutParams.WRAP_CONTENT);
   popup.setHeight(ViewGroup.LayoutParams.WRAP_CONTENT);
   popup.setFocusable(true);

   popupWidth = popup.getWidth();

   // Clear the default translucent background
   popup.setBackgroundDrawable(new BitmapDrawable(this.getResources()));

   // Displaying the popup at the specified location.
   popup.showAtLocation(layout, Gravity.NO_GRAVITY, p.x, p.y);

   // Getting a reference to Close button, and close the popup when clicked.
   Button close = (Button) layout.findViewById(R.id.close);
   close.setOnClickListener(new OnClickListener() {

     @Override
     public void onClick(View v) {
       popup.dismiss();
     }
   });
} 
```

而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-06T06:23:05.703

我想分享我的做法。假设我们有一个 id 为“btn”的按钮（或任何 clicakbale 视图），我们想在其点击时附加一个 popupMenu。将要显示的菜单放在以下 xml 中的菜单文件夹中，例如“menu1.xml”。

按钮的 OnClick 定义如下：

```
Button btn = (Button) findViewById(R.id.btn);
        btn.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                showPopupMenu(v);
            }
        }); 
```

showPopupMenu() 定义如下：

```
private void showPopupMenu(View view) {
    // inflate menu and attach it to a view onClick of which you want to display menu
    PopupMenu popup = new PopupMenu(mContext, view);
    MenuInflater inflater = popup.getMenuInflater();
    //inflate menu items to popup menu
    inflater.inflate(R.menu.menu1, popup.getMenu());
    //assign a cutom onClick Listener to it.
    popup.setOnMenuItemClickListener(new MyMenuItemClickListener());
    //Show Popup.
    popup.show();
} 
```

完整的帖子可以在这里找到：[http ://revisitingandroid.blogspot.in/2017/01/how-to-display-popup-menu-on-any-view.html](http://revisitingandroid.blogspot.in/2017/01/how-to-display-popup-menu-on-any-view.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T12:49:04.303

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:textSize="20sp"
        android:textColor="#000000"
        android:layout_margin="20dip"
        android:text="Popup Menu Example" />
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Touch here to see the menu."
        android:layout_margin="20dip"
        android:layout_gravity="center"
        android:textColor="#0000ff"
        android:id="@+id/anchor"/>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="20dip"
        android:layout_gravity="center"
        android:textSize="40sp"
        android:textColor="#808080"
        android:id="@+id/selection"/>
</LinearLayout>

package com.authorwjf.popmenu;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.PopupMenu;
import android.widget.PopupMenu.OnMenuItemClickListener;
import android.widget.TextView;
import android.app.Activity;
public class Main extends Activity implements OnClickListener, OnMenuItemClickListener
{

       private PopupMenu popupMenu;
       private final static int ONE = 1;
       private final static int TWO = 2;
       private final static int THREE = 3;
       @Override
       protected void onCreate(Bundle savedInstanceState) {
             super.onCreate(savedInstanceState);
             setContentView(R.layout.main);
             popupMenu = new PopupMenu(this, findViewById(R.id.anchor));
             popupMenu.getMenu().add(Menu.NONE, ONE, Menu.NONE, "Item 1");
             popupMenu.getMenu().add(Menu.NONE, TWO, Menu.NONE, "Item 2");
             popupMenu.getMenu().add(Menu.NONE, THREE, Menu.NONE, "Item 3");
             popupMenu.setOnMenuItemClickListener(this);
             findViewById(R.id.anchor).setOnClickListener(this);
       }
}

@Override
public void onClick(View v) {
       popupMenu.show();
}

@Override
public boolean onMenuItemClick(MenuItem item) {
       TextView tv = (TextView) findViewById(R.id.selection);
       switch (item.getItemId()) {
       case ONE:
              tv.setText("ONE");
              break;
       case TWO:
              tv.setText("TWO");
              break;
       case THREE:
              tv.setText("THREE");
              break;
       }
       return false;
} 
```

# perl - 目录树警告

> ID：15834334
> 
> 赞同：1
> 
> 时间：2013-04-05T12:44:24.613
> 
> 标签：perl

我写了一些脚本，递归打印目录的内容。但它会为每个文件夹打印警告。如何解决这个问题？

样本文件夹：

> dev# cd /tmp/test
> dev# ls -p -R
> test2/
> testfile
> testfile2
> 
> ./test2:
> testfile3
> testfile4

我的代码：

```
#!/usr/bin/perl

use strict;
use warnings;

browseDir('/tmp/test');

sub browseDir {
    my $path = shift;
    opendir(my $dir, $path);
    while (readdir($dir)) {
        next if /^\.{1,2}$/;
        if (-d "$path/$_") {
            browseDir("$path/$_");
        }
        print "$path/$_\n";
    }
    closedir($dir);
} 
```

和输出：

> dev# perl /tmp/cotest.pl
> /tmp/test/test2/testfile3
> /tmp/test/test2/testfile4
> 在 /tmp/cotest.pl 第 16 行的连接 (.) 或字符串中使用未初始化的值 $_。
> /tmp /test/
> /tmp/test/testfile
> /tmp/test/testfile2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:51:09.323

你可以试试那个代码：

```
 #!/usr/bin/perl

    use strict;
    use warnings;

    browseDir('/tmp');

    sub browseDir {
        my $path = shift;
        opendir(my $dir, $path);
        while (readdir($dir)) {
            next if /^\.{1,2}$/;
            print "$path/$_\n";
            if (-d "$path/$_") {
                browseDir("$path/$_");
            }
        }
        closedir($dir);
    } 
```

如果你得到那个错误，那是因为你在使用变量 $_ 之前调用了 browseDir()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:26:27.717

`$_`您在调用之前放置一个值，`browseDir`并且您希望它在调用之后存在该值`browseDir`（一个合理的期望），但是`browseDir`修改了该变量。

只需添加`local $_;`以`browseDir`确保在子退出之前撤消对它的任何更改。

* * *

与您的问题无关，以下是其他三个问题：

*   甚至没有最小的错误检查！
*   您可能会用完目录句柄来导航深层目录。
*   您过滤掉文件`".\n"`和`"..\n"`.

使固定：

```
#!/usr/bin/perl

use strict;
use warnings;

browseDir('/tmp/test');

sub browseDir {
    my $path = shift;

    opendir(my $dh, $path) or die $!;
    my @files = readdir($dh);
    closedir($dh);

    for (@files) {
        next if /^\.{1,2}z/;
        if (-d "$path/$_") {
            browseDir("$path/$_");
        }

        print "$path/$_\n";
    }
} 
```

* * *

最后，为什么不使用像[File::Find::Rule](http://search.cpan.org/perldoc?File%3a%3aFind%3a%3aRule)这样的模块呢？

```
use File::Find::Rule qw( );
print "$_\n" for File::Find::Rule->in('/tmp'); 
```

* * *

注意：在 5.12 之前，`while (readir($dh))`必须写成`while (defined($_ = readdir($dh)))`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T16:20:36.713

为什么不使用[File::Find](http://perldoc.perl.org/File/Find.html)模块？自 Perl 5.x 以来，它几乎包含在所有 Perl 发行版中。它不是我最喜欢的模块，因为它的工作方式有点混乱，但它做得很好。

你定义一个`wanted`子程序来做你想做的事情并过滤掉你不想要的东西。在这种情况下，您几乎打印了所有内容，因此`wanted`所做的只是打印找到的内容。

在`File::Find`中，文件名保存在 中`$File::Find::name`，该文件的目录在 中`$File::Find::dir`。是`$_`文件本身，可用于测试。

这是您想要的基本方法：

```
use strict;
use warnings;
use feature qw(say);

use File::Find;

my $directory = `/tmp/test`;

find ( \&wanted, $directory );

sub wanted {
    say $File::Find::Name;
} 
```

我更喜欢把我的`wanted`函数放在我的`find`子程序中，这样它们就在一起了。这相当于上面的：

```
use strict;
use warnings;
use feature qw(say);

use File::Find;

my $directory = `/tmp/test`;

find ( 
    sub { 
        say $File::Find::Name
    },
    $directory,
); 
```

好的编程说不要在子程序中打印。相反，您应该使用子例程来存储和返回您的数据。不幸的是，`find`根本不返回任何东西。您必须使用*全局*数组来捕获文件列表，然后将它们打印出来：

```
use strict;
use warnings;
use feature qw(say);

use File::Find;

my $directory = `/tmp/test`;
my @directory_list;

find ( 
    sub { 
        push @directory_list, $File::Find::Name
    }, $directory );

for my $file (@directory_list) {
   say $file;
} 
```

或者，如果您更喜欢单独的`wanted`子例程：

```
use strict;
use warnings;
use feature qw(say);

use File::Find;

my $directory = `/tmp/test`;
my @directory_list;

find ( \&wanted, $directory );
sub wanted {
    push @directory_list, $File::Find::Name;
}

for my $file (@directory_list) {
   say $file;
} 
```

我想要的子例程依赖于一个不是子例程本地的数组这一事实困扰着我，这就是为什么我更喜欢将`wanted`子例程嵌入到我的`find`调用中。

您可以做的一件事是使用您的子例程过滤掉您想要的内容。假设您只对 JPG 文件感兴趣：

```
use strict;
use warnings;
use feature qw(say);

use File::Find;

my $directory = `/tmp/test`;
my @directory_list;

find ( \&wanted, $directory );
sub wanted {
    next unless /\.jpg$/i;  #Skip everything that doesn't have .jpg suffix
    push @directory_list, $File::Find::Name;
}

for my $file (@directory_list) {
   say $file;
} 
```

请注意，在我将它推入我的数组之前，想要的子例程如何对`next`我不想要的任何文件执行 a。`@directory_list`同样，我更喜欢嵌入：

```
find (sub {
    next unless /\.jpg$/i;  #Skip everything that doesn't have .jpg suffix
    push @directory_list, $File::Find::Name;
} 
```

我知道这不是您所问的，但我只是想让您了解该`Find::File`模块并向您介绍 Perl 模块（如果您还不了解它们），它可以为 Perl 添加很多功能。

# javascript - 如何检查node.js的查询字符串中是否存在参数

> ID：15834336
> 
> 赞同：1
> 
> 时间：2013-04-05T12:44:25.357
> 
> 标签：javascript, node.js

如何验证参数是否存在于查询字符串中或不在 node.js 中？

我正在这样验证

```
if(prm1 == null)
return error 
```

但实际上在 console.log(prm1) 中说 undefined..

如何准确验证这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T12:59:22.957

如果参数不存在于您的 queryString 中，则返回为`undefined`. 该参数不会返回`null`，因为它没有被初始化。

试试这个 ：

```
if(typeof prm1 != 'undefined')
    return "error"; 
```

# c# - 测试遗留代码时添加虚拟关键字

> ID：15834340
> 
> 赞同：4
> 
> 时间：2013-04-05T12:44:33.167
> 
> 标签：c#, unit-testing, rhino-mocks

我正在向一些粗糙的遗留代码添加测试，以便有足够的信心认真重构它。问题之一是编写代码的人显然没有尝试使代码可测试（假设他们从未编写过单个单元测试！）

一个常见的问题是目前没有接口，只有 11 级深度的继承链。我正在使用 Rhino Mocks 将被测类与其依赖项隔离开来，但由于我正在模拟一个类，而不是一个接口，所以如果它具有`virtual`关键字，我只能存根只读属性。

我目前的想法是我只需将`virtual`关键字添加到属性中。没有计划将任何进一步的对象添加到现有的依赖链中，它将允许编写测试。

**是否有反对添加`virtual`关键字的任何论据，或者这是一个可以接受的妥协以便进行测试？**

示例代码...

在测试类中：

```
var someClassStub = MockRepository.GenerateStub<SomeClass>();
someClassStub.Stub(s => s.SomeProperty).Return("Test"); 
```

在某些类中：

```
public virtual string SomeProperty {
    get {
        return someDependency.SomeMethod();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:33:52.517

反对添加的主要论点`virtual`是它歪曲了你的意图。派生类的`virtual`关键字信号您期望此属性可能会被覆盖。

我不会使用`virtual`，而是像下面这样模拟依赖项：

```
var mockedDependency = MockRepository.GenerateMock<IDependency>();
mockedDependency.Expect(x => x.SomeMethod())
                .Returns("whatever your test dictates");

var target = new SomeClass(mockedDependency);

mockedDependency.VerifyAllExpectations(); 
```

然后将其注入到新创建的重载构造函数中，如下所示：

```
public SomeClass(IDependency dependency) : base()
{
    this.someDependency = dependency;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T17:44:25.387

与其`virtual`到处添加，不如使用一些更安全的方法使您的代码最初可测试。就个人而言，我强烈建议使用 Visual Studio 提供的“提取接口”工具，并在可能安全的情况下用接口替换具体的类引用。然后，模拟接口而不是具体类。

如果您使用不支持提取接口的 Visual Studio（或其他 IDE）版本，您所要做的就是跟踪该类的所有公共成员并将它们添加到接口并创建您的具体类实施它。

您的首要任务应该是获得最初的一组测试。这样，您以后可以在合理确定您的代码没有损坏的情况下进行更危险的更改。

对于任何致力于使旧的遗留代码单元测试的人，我强烈建议阅读《[有效地使用遗留代码》](https://rads.stackoverflow.com/amzn/click/com/0131177052)一书。这个价格很值。以至于我的经理最终给我的办公室买了一份副本来咨询。

# twitter-bootstrap - 如何在引导程序中使用 css（不是 JS）向 span 的内容添加填充？

> ID：15834341
> 
> 赞同：3
> 
> 时间：2013-04-05T12:44:34.433
> 
> 标签：twitter-bootstrap, row, containers, padding, html

我有一个引导站点，在那里我为 BODY 定义了一个背景图像，size=cover; 在几乎所有现代浏览器中都可以正常工作。

然后我定义了一个这样的结构：

```
<div class="row">
    <div class="span12">
        <div class="span1">&nbsp;</div>
        <div class="span5">CONTACT_FORM_CONTENT</div>
        <div class="span5">MAP_ETC_CONTENT</div>
        <div class="span1">&nbsp;</div>
    </div>
</div> 
```

现在，一些照片来看看它的外观：

在桌面浏览器中查看时 ![桌面视图](https://i.stack.imgur.com/TQhdh.jpg)

在智能手机中查看时 ![智能手机视图](https://i.stack.imgur.com/54gxe.jpg)

**问题**

在桌面浏览器中查看网站时，一切正常。左/右的每个“<span1>”正确地充当左/右的填充，但是当使用智能手机查看时，这些“<span1>”被转换并放置在我的内容的顶部/底部，并且左/右的填充消失了。

有谁知道如何在不使用 JS 的情况下解决这个问题？我想通过一些 CSS 更改来纠正整个网站。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T14:58:32.677

您可以通过像这样填充表单内容来完成此操作：

CSS：

```
.padded { padding: 10px; } 
```

HTML：

```
<div class="row">
    <div class="span12">
        <div class="span1">&nbsp;</div>
        <div class="span5">
            <div class="padded">
                 CONTACT_FORM_CONTENT
            </div>
        </div>
        <div class="span5">MAP_ETC_CONTENT</div>
        <div class="span1">&nbsp;</div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T04:44:20.170

将您的 div.row 包装在 div.container 中。不需要CSS。现在，当您使用移动设备并折叠空 div 时，.container 类将在您的 div 周围保持填充。这是理想的，因为它消除了多余的空白以利用屏幕空间，但保持填充。

此外，不需要内容为空的 div.span1。相反，删除它们，并将 .offset1 添加到您的第一个 div.span5。

此外，当将 span 嵌套在另一个 span 中时，您需要将其包含在另一个 div.row 中。但在这种情况下，我们可以完全删除 div.span12，因为内行加起来为 12（引导程序是“左”对齐的，因此您不必隐式向右填充空间，并计入您的总数 12细胞）。

如果您想要页面下方的 span12，只需在下方添加另一个 div.row，然后是 div.span12。它们只需要包含在 div.container 中。设置 div.container 样式以添加背景颜色。

如果你想调整 div.container 上的填充，你真的会想要编辑 Bootstrap LESS 文件，这是另一个蜡球和学习曲线。直接调整填充会使一堆其他测量值失控，你最终需要调整一堆东西来补偿。但我认为您会发现默认填充是合适的。

```
<div class="container" style="background-color:white;">
    <div class="row">
        <div class="span5 offset1">CONTACT_FORM_CONTENT</div>
        <div class="span5">MAP_ETC_CONTENT</div>
    </div>
</div> 
```

# ios - 自定义单元格正在复制同一 Tableview 中其他单元格的属性

> ID：15834346
> 
> 赞同：0
> 
> 时间：2013-04-05T12:44:59.697
> 
> 标签：ios, objective-c, uitableview

我正在为我的 UITableview 使用一个自定义单元格，其中我有几个 UILabel。在一个标签中，我将它的颜色设置为红色。这对我来说效果很好。但是，一旦我通过 Egorefresh 表委托方法重新加载 TableView，其他单元格的标签颜色也开始变为红色。我不知道为什么会出现这个问题，这让我很反感。

这是 TableView 数据源方法 cellForRowAtIndexPath 的代码：

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell 
  forRowAtIndexPath:(NSIndexPath *)indexPath{

    // Set the Frame for BackgroundView of Cell.
    NSDictionary * insuranceDic = [arr_insurance objectAtIndex:indexPath.row];
    insuranceDic = [[AppDelegate sharedInstance] removeNullsFromDictonary:insuranceDic];
    InsuranceCell * mycell = (InsuranceCell *)cell;
    if([[insuranceDic valueForKey:@"active"] isEqualToString:@"N"]){
        //TTTRegexAttributedLabel * label = [[TTTRegexAttributedLabel alloc] init];
        mycell.lbl_insuranceName.text =  [NSString stringWithFormat:@"%@ (%@)",
       [insuranceDic valueForKey:@"insurance_name"],@"Inactive"];
        mycell.lbl_insuranceName.textColor = [UIColor redColor];
        //[label setText:cell.lbl_insuranceName.text withRegex:@"(Inactive)" withFont: 
    [UIFont boldSystemFontOfSize:12] withColor:[UIColor redColor]];
    }
    else{
        mycell.lbl_insuranceName.text = [insuranceDic valueForKey:@"insurance_name"];
    }
} 
```

从这些方法重新加载表视图时，问题正在发生：

```
#pragma mark -
#pragma mark UIScrollViewDelegate Methods

- (void)scrollViewDidScroll:(UIScrollView *)scrollView{
// For Top Pull to refresh.
    [_refreshHeaderView egoRefreshScrollViewDidScroll:scrollView];
   //For Bottom Pull to refresh.
    [pullToBottomRefreshManager_ tableViewScrolled];
}

- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate: 
  (BOOL)decelerate{
    // For Top Pull to refresh.
    [_refreshHeaderView egoRefreshScrollViewDidEndDragging:scrollView];
    //For Bottom Pull to refresh.
    [pullToBottomRefreshManager_ tableViewReleased];
}

#pragma mark -
#pragma mark EGORefreshTableHeaderDelegate Methods

// Belowline is for stop refresh indicator
//[_refreshHeaderView 
  egoRefreshScrollViewDataSourceDidFinishedLoading:self.tableView];

- (void)egoRefreshTableHeaderDidTriggerRefresh:(EGORefreshTableHeaderView*)view{
    // When we going to refresh the data we need to reset the start varible to 1
    // and also removeallthe previous objects from the array.
    str_start = @"1";
    [self getInsuranceList];
}

- (BOOL)egoRefreshTableHeaderDataSourceIsLoading:(EGORefreshTableHeaderView*)view{
      return isReloading; // should return if data source model is reloading
}

- (NSDate*)egoRefreshTableHeaderDataSourceLastUpdated: 
  (EGORefreshTableHeaderView*)view{

      return [NSDate date]; // should return date data source was last changed

}

#pragma mark -
#pragma mark MNMBottomPullToRefreshManagerClient Methods
- (void)bottomPullToRefreshTriggered:(MNMBottomPullToRefreshManager *)manager {

   // Here we are incrementing start with records per page means start+=recordsperpare 
   or start+=20.
   str_start = [NSString stringWithFormat:@"%d",[str_start intValue]+
   [str_recordsPerPage intValue]];
   [self getInsuranceList];
} 
```

这是 cellForRowAtIndexPath 方法的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:  
    (NSIndexPath
    *)indexPath{
    static NSString *CellIdentifier = @"Cell";
    InsuranceCell  * cell = [InsuranceCell dequeOrCreateInTable:tableView];
     //    UITableViewCell *cell = [tableView 
     dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
      cell = [[[InsuranceCell alloc] initWithStyle:UITableViewCellStyleDefault 
      reuseIdentifier:CellIdentifier] autorelease];

    }
    NSDictionary * insuranceDic = [arr_insurance objectAtIndex:indexPath.row];
    insuranceDic = [[AppDelegate sharedInstance] removeNullsFromDictonary:insuranceDic];
    cell.lbl_insuranceNo.text = [insuranceDic valueForKey:@"insurance_no"];
    cell.lbl_groupNo.text = [insuranceDic valueForKey:@"group_no"];
    cell.lbl_priority.text = [self getPriorityDescFromCode:[insuranceDic    
    valueForKey:@"priority"]];
    cell.lbl_startDate.text = [insuranceDic valueForKey:@"start_date"];
    cell.lbl_endDate.text = [insuranceDic valueForKey:@"end_date"];
    cell.lbl_copay.text = [insuranceDic valueForKey:@"copay"];

   // This Condition is For setting alternate (White/SkyBlue) Background color for cell.
   //    if (fmod(indexPath.row, 2)==0) {
   //        cell.backgroundView.backgroundColor = [UIColor colorFromRGBIntegers:237       green:243 blue:249 alpha:1];
   //        
   //    }
   //    else{
   //        cell.backgroundView.backgroundColor = [UIColor colorFromRGBIntegers:250   green:250 blue:250 alpha:1];
   //    }

   cell.selectionStyle = UITableViewCellEditingStyleNone;
   return cell;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:51:05.817

如果您可以添加您的`cellForRowAtIndexPath:`实现，这将有所帮助。

鉴于您提供的信息，我想您正在重用单元格而不是之前重置颜色。`- (void)prepareForReuse`您需要覆盖`InsuranceCell` 并重置任何单元格特定属性。

示例实现：

```
- (void)prepareForReuse {
    [super prepareForReuse];
    // reset the label text color to your default color (e.g. black)
    self.lbl_insuranceName.textColor = [UIColor blackColor];
} 
```

您需要在**InsuranceCell**中实现此方法。

您需要了解，`cellForRowAtIndexPath:`您的 TableViewCells 的默认实现将被重用。这意味着您需要在重用单元之前显式重置每个属性。最方便的方法是覆盖该`prepareForReuse`方法，如上所示。

# java - HttpURLConnection 关闭 IO 流

> ID：15834350
> 
> 赞同：5
> 
> 时间：2013-04-05T12:45:26.857
> 
> 标签：java, sockets, stream, connection, httpurlconnection

我是 Java 和 HttpURLConnection 的新手。我应该在断开连接之前关闭打开的 IO 流吗？如果我关闭流，我是否也需要断开连接？哪种是正确的实施方式？

```
try {
String uri = "http://localhost:8081/RESTEASY/saju/post/text";
URL url = new URL(uri);
connection =
    (HttpURLConnection) url.openConnection();
connection.setRequestMethod("POST");
connection.setRequestProperty("Accept", "text/plain");
connection.setRequestProperty("Content-Type", "text/plain");
connection.setDoOutput(true);

OutputStream os = connection.getOutputStream();

//bla bla

System.out.println(connection.getResponseCode());
InputStream iStream = connection.getInputStream();

//bla bla

} catch (MalformedURLException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}finally{
    // os.close(); - IS THIS REQUIRED
    // iStream.close(); - IS THIS REQUIRED
    connection.disconnect();    
}
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T13:23:07.710

`close()`使用完输入/输出/错误流后，您应该调用它们。

断开连接更复杂。根据javadoc `disconnect()`：

> “表明在不久的将来不太可能向服务器发出其他请求。”

这是认识到 HTTP 1.1 规范具有“持久连接”功能，允许在对同一服务器的一系列请求中使用相同的 TCP/IP 连接。（这是透明地发生的。）当您调用 时`disconnect`，它很可能被视为关闭连接的提示。

因此，从资源和性能的角度来看：

*   `disconnect`如果您不太可能向同一服务器发送另一个请求，最好打电话，
*   如果在不久的将来可能有另一个请求，那是个坏主意。

# mysql - 使用mysql根据不同的座位计算导师的工资

> ID：15834353
> 
> 赞同：8
> 
> 时间：2013-04-05T12:45:38.170
> 
> 标签：mysql

我有下表表示一个导师在小组中教学生。每个学生都有一个进入数据库的条目。一个学生可以是一个人，也可以是一群人。我希望这样计算导师的“薪水”：付款是基于所花费的时间——这意味着每次坐（有一个或多个学生）只会计算一次坐——不同的坐！开始和结束时间是 unix 时间。

```
<pre>
    start   end     attendance
1359882000  1359882090  1
1359867600  1359867690  0
1359867600  1359867690  1
1359867600  1359867690  0
1360472400  1360477800  1
1360472400  1360477800  1
1359867600  1359867690  1
1359914400  1359919800  1
1360000800  1360006200  1
1360000800  1360006200  0
1360000800  1360006200  1

</pre> 
```

这就是我尝试过的：没有成功 - 我无法获得正确的持续时间（所有不同座位的小时数）

```
    SELECT YEAR(FROM_UNIXTIME(start)) 作为年份，
    MONTHNAME(STR_TO_DATE(MONTH(FROM_UNIXTIME(start)), '%m')) 作为月份，
    COUNT(DISTINCT start) 作为坐席，
    SUM(TRUNCATE((end-start)/3600, 1)) 作为持续时间
    从时间表
    通过...分组
    年（FROM_UNIXTIME（开始）），
    月（FROM_UNIXTIME（开始））

```

感谢您的建议/支持！

编辑：所需的结果

```
Rate = 25
Year    Month   Sittings    Duration    Bounty
2013    February     2         2.2          2.2*25
2013    April        4         12.0         12.0*25 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T13:02:43.620

您可能可以对子查询做一些事情，我玩过 SQL fiddle，这对您来说如何。链接到 sql 小提琴：[http ://sqlfiddle.com/#!2/50718c/3](http://sqlfiddle.com/#!2/50718c/3)

```
SELECT
  YEAR(d.date) AS year,
  MONTH(d.date) AS month,
  COUNT(*) AS sittings,
  SUM(d.duration) AS duration_mins
FROM (
  SELECT
    DATE(FROM_UNIXTIME(s.start)) AS date,
    s.attendance,
    end-start AS duration
  FROM schedules s
) d

GROUP BY 
  year,
  month 
```

我真的不知道目前出席人数在哪里，你没有具体说明。内部查询负责获取计划、提取开始日期和持续时间（以秒为单位）。

然后，外部查询使用这些派生值，但将它们分组以获得总和。您可以从这里详细说明，即您可能只想选择出勤率 > 0 的位置，或者您可能想乘以出勤率。

在下一个示例中，我已经这样做了，以小时为单位计算持续时间，并计算会话有 >1 出席率的适用持续时间以及适当的赏金假设赏金 == 小时 * 率：[http ://sqlfiddle.com/# !2/50718c/21](http://sqlfiddle.com/#!2/50718c/21)

```
SELECT
  YEAR(d.date) AS year,
  MONTH(d.date) AS month,
  COUNT(*) AS sittings,
  SUM(d.duration) AS duration,
  SUM(
    IF(d.attendance>0,1,0)
  ) AS sittingsWorthBounty,
  SUM(
    IF(d.attendance>0,d.duration,0)
  ) AS durationForBounty,
  SUM(
    IF(d.attendance>0,d.bounty,0)
  ) AS bounty

FROM (
  SELECT
    DATE(FROM_UNIXTIME(s.start)) AS date,
    s.attendance,
    (end-start)/3600 AS duration,
    (end-start)/3600 * @rate AS bounty
  FROM schedules s,
  (SELECT @rate := 25) v
) d

GROUP BY 
  year,
  month 
```

这里的关键点是，在子查询中，您每行执行所有计算。然后，主查询负责对结果进行分组并获取总数。例如，外部查询中的 IF 语句可以很容易地移到子查询中。我只是像这样将它们包括在内，这样您就可以看到值的来源。

# android - 如何仅向街道添加标记 - Android 开发

> ID：15834357
> 
> 赞同：4
> 
> 时间：2013-04-05T12:45:58.903
> 
> 标签：android, google-maps-api-3, google-maps-markers, google-maps-android-api-2

经过大量搜索，我还没有找到适合我的解决方案，我真的希望这里有人可以帮助我。首先我会解释我的问题，然后我会提到一些我迄今为止尝试/考虑过的方法。

基本上，我正在开发一个 Android 应用程序，其中标记随机出现在用户的位置周围。问题是，标记只需要放置在街道上。

我一直在使用 Google Maps Android API V2，但我正在尝试使用任何具有“限制”的东西，例如“地理编码”。

我考虑过使用不同的地图 API，例如 Nutiteq，但在实现它们时遇到了一些麻烦。由于我已经熟悉它，所以坚持使用 Google 会很好，但我愿意尝试您可能提出的任何建议。

我什至考虑在 html 文件中加载 Google Maps API V3，以便我可以使用 GDirections 加载从一个点到自身的路径，然后使用 JS 将此数据解析到 Google Maps Android API V2 但结果 GDirections 有一个限制好。

有人知道我该怎么做吗？即使解决方案是hacky，它仍然是一些东西。

我对 Android 开发相当陌生。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T15:05:34.917

有趣的是你想​​要达到的目标。您不需要加载 API V3 html。您可以直接使用路线 API：[http ://maps.googleapis.com/maps/api/directions/json?origin=51,19&destination=51,19&sensor=false](http://maps.googleapis.com/maps/api/directions/json?origin=51,19&destination=51,19&sensor=false)

它仍然有局限性，但就像每天 2000 台设备一样。而且您不想在单个用户的屏幕上放置超过 2000 个标记，是吗？

这很容易解析，例如使用 Gson。

# java - 横向模式：为什么我的电脑屏幕和手机上的结果不同？

> ID：15834363
> 
> 赞同：0
> 
> 时间：2013-04-05T12:46:09.083
> 
> 标签：java, android

这是我第一次在景观模型中制作活动 xml。直到现在，我在电脑屏幕上看到的就是我在手机上看到的。现在，它甚至不接近！我放置了一些布局、按钮和东西，像我需要的那样将它们居中，然后在手机上尝试了一些东西，有些东西远离屏幕，有些东西移到了右边，没有什么像我在我的 xml 中所做的那样。所以我必须稍微移动一些东西，然后在我的手机上尝试，没有任何顺序或规则。为什么会这样？

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/backgroundland" >

   <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:weightSum="4" >

        <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:layout_weight="1" >

            <Button
                    android:id="@+id/bA1"
                    android:layout_width="115dp"
                    android:background="@drawable/buttons"
                    android:textSize="18sp"
                    android:textColor="#ffffff"
                    android:padding="0dp"
                    android:layout_margin="3dp"
                    android:layout_height="35dp"
                    android:text="A1" />

            <Button
                    android:id="@+id/bA2"
                    android:layout_width="115dp"
                    android:background="@drawable/buttons"
                    android:textSize="18sp"
                    android:textColor="#ffffff"
                    android:padding="0dp"
                    android:layout_margin="3dp"
                    android:layout_height="35dp"
                    android:text="A2" />
            <Button
                    android:id="@+id/bA3"
                    android:layout_width="115dp"
                    android:background="@drawable/buttons"
                    android:textSize="18sp"
                    android:textColor="#ffffff"
                    android:padding="0dp"
                    android:layout_margin="3dp"
                    android:layout_height="35dp"
                    android:text="A3" />
            <Button
                    android:id="@+id/bA4"
                    android:layout_width="115dp"
                    android:background="@drawable/buttons"
                    android:textSize="18sp"
                    android:textColor="#ffffff"
                    android:padding="0dp"
                    android:layout_margin="3dp"
                    android:layout_height="35dp"
                    android:text="A4" />
            <Button
                    android:id="@+id/bKolonaA"
                    android:layout_width="115dp"
                    android:background="@drawable/buttons"
                    android:textSize="19sp"
                    android:textColor="#ffffff"
                    android:padding="0dp"
                    android:layout_margin="3dp"
                    android:layout_height="35dp"
                    android:text="Kolona A" />
            </LinearLayout>
            <LinearLayout
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:orientation="vertical"
                android:layout_weight="1" >

             <Button
                    android:id="@+id/bB1"
                    android:layout_width="115dp"
                    android:background="@drawable/buttons"
                    android:textSize="18sp"
                    android:textColor="#ffffff"
                    android:padding="0dp"
                    android:layout_margin="3dp"
                    android:layout_height="35dp"
                    android:text="B1" />
            <Button
                    android:id="@+id/bB2"
                   android:layout_width="115dp"
                    android:background="@drawable/buttons"
                    android:textSize="18sp"
                    android:textColor="#ffffff"
                    android:padding="0dp"
                    android:layout_margin="3dp"
                    android:layout_height="35dp"
                    android:text="B2" />
            <Button
                    android:id="@+id/bB3"
                    android:layout_width="115dp"
                    android:background="@drawable/buttons"
                    android:textSize="18sp"
                    android:textColor="#ffffff"
                    android:padding="0dp"
                    android:layout_margin="3dp"
                    android:layout_height="35dp"
                    android:text="B3" />
            <Button
                    android:id="@+id/bB4"
                    android:layout_width="115dp"
                    android:background="@drawable/buttons"
                    android:textSize="18sp"
                    android:textColor="#ffffff"
                    android:padding="0dp"
                    android:layout_margin="3dp"
                    android:layout_height="35dp"
                    android:text="B4" />
            <Button
                    android:id="@+id/bKolonaB"
                    android:layout_width="115dp"
                    android:background="@drawable/buttons"
                    android:textSize="19sp"
                    android:textColor="#ffffff"
                    android:padding="0dp"
                    android:layout_margin="3dp"
                    android:layout_height="35dp"
                    android:text="Kolona B" />   
            </LinearLayout>

            <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:layout_weight="1" >
            <Button
                    android:id="@+id/bC1"
                    android:layout_width="115dp"
                    android:background="@drawable/buttons"
                    android:textSize="18sp"
                    android:textColor="#ffffff"
                    android:padding="0dp"
                    android:layout_margin="3dp"
                    android:layout_height="35dp"
                    android:text="C1" />
            <Button
                    android:id="@+id/bC2"
                    android:layout_width="115dp"
                    android:background="@drawable/buttons"
                    android:textSize="18sp"
                    android:textColor="#ffffff"
                    android:padding="0dp"
                    android:layout_margin="3dp"
                    android:layout_height="35dp"
                    android:text="C2" />
            <Button
                    android:id="@+id/bC3"
                    android:layout_width="115dp"
                    android:background="@drawable/buttons"
                    android:textSize="18sp"
                    android:textColor="#ffffff"
                    android:padding="0dp"
                    android:layout_margin="3dp"
                    android:layout_height="35dp"
                    android:text="C3" />

            <Button
                android:id="@+id/bC4"
                android:layout_width="115dp"
                android:layout_height="35dp"
                android:layout_margin="3dp"
                android:background="@drawable/buttons"
                android:padding="0dp"
                android:text="C4"
                android:textColor="#ffffff"
                android:textSize="18sp" />

            <Button
                    android:id="@+id/bKolonaC"
                    android:layout_width="115dp"
                    android:background="@drawable/buttons"
                    android:textSize="19sp"
                    android:textColor="#ffffff"
                    android:padding="0dp"
                    android:layout_margin="3dp"
                    android:layout_height="35dp"
                    android:text="Kolona C" />
            </LinearLayout>

            <LinearLayout
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:layout_weight="1" >
            <Button
                    android:id="@+id/bD1"
                    android:layout_width="115dp"
                    android:background="@drawable/buttons"
                    android:textSize="18sp"
                    android:textColor="#ffffff"
                    android:padding="0dp"
                    android:layout_margin="3dp"
                    android:layout_height="35dp"
                    android:text="D1" />
            <Button
                    android:id="@+id/bD2"
                    android:layout_width="115dp"
                    android:background="@drawable/buttons"
                    android:textSize="18sp"
                    android:textColor="#ffffff"
                    android:padding="0dp"
                    android:layout_margin="3dp"
                    android:layout_height="35dp"
                    android:text="D2" />
            <Button
                    android:id="@+id/bD3"
                    android:layout_width="115dp"
                    android:background="@drawable/buttons"
                    android:textSize="18sp"
                    android:textColor="#ffffff"
                    android:padding="0dp"
                    android:layout_margin="3dp"
                    android:layout_height="35dp"
                    android:text="D3" />
            <Button
                    android:id="@+id/bD4"
                    android:layout_width="115dp"
                    android:background="@drawable/buttons"
                    android:textSize="18sp"
                    android:textColor="#ffffff"
                    android:padding="0dp"
                    android:layout_margin="3dp"
                    android:layout_height="35dp"
                    android:text="D4" />
            <Button
                    android:id="@+id/bKolonaD"
                    android:layout_width="115dp"
                    android:background="@drawable/buttons"
                    android:textSize="19sp"
                    android:textColor="#ffffff"
                    android:padding="0dp"
                    android:layout_margin="3dp"
                    android:layout_height="35dp"
                    android:text="Kolona D" />
            </LinearLayout>

            </LinearLayout>

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:orientation="horizontal" >

                <LinearLayout
                    android:layout_width="120dp"
                    android:layout_height="wrap_content" >

                    <Button
                        android:id="@+id/bIzlazA"
                        android:layout_width="50dp"
                        android:layout_height="35dp"
                        android:layout_marginLeft="20dp"
                        android:layout_marginTop="3dp"
                        android:background="@drawable/buttons_final"
                        android:padding="0dp"
                        android:text=""
                        android:textColor="#ffffff"
                        android:textSize="20sp" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="280dp"
                    android:layout_height="wrap_content" >

                    <Button
                        android:id="@+id/bKonacno"
                        android:layout_width="260dp"
                        android:layout_height="35dp"
                        android:layout_marginTop="3dp"
                        android:background="@drawable/buttons_final"
                        android:padding="0dp"
                        android:text=""
                        android:textColor="#ffffff"
                        android:textSize="20sp" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="100dp"
                    android:layout_height="match_parent" >

                    <TextView
                        android:id="@+id/tvVreme"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="30dp"
                        android:layout_marginTop="8dp"
                        android:text="100"
                        android:textColor="#ff0000"
                        android:textSize="20sp" />
                </LinearLayout>
            </LinearLayout>

</LinearLayout> 
```

![在此处输入图像描述](https://i.stack.imgur.com/6v7dY.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/SEA8e.jpg)

![在此处输入图像描述](https://i.stack.imgur.com/tGy7K.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:05:45.093

我所知道的是模拟器与真实设备的工作方式不同，所以你为什么不在调试模式下使用你的手机来看看你的代码到底做了什么。

发布您的代码可能是我们可以查看它是否不是模拟器问题

**编辑：**

只需将 android:layoutweight="1" 添加到底部的 3 个 lyouts 中，您应该会得到更好的结果 :)

```
<LinearLayout

                android:layout_width="fill_parent"
                android:layout_height="match_parent"
                android:orientation="horizontal" >

                <LinearLayout
                    android:layout_width="120dp"
                    android:layout_weight="1"
                    android:layout_height="wrap_content" >

                    <Button
                        android:id="@+id/bIzlazA"
                        android:layout_width="50dp"
                        android:layout_height="35dp"
                        android:layout_marginLeft="20dp"
                        android:layout_marginTop="3dp"
                        android:background="@drawable/ic_launcher"
                        android:padding="0dp"
                        android:text=""
                        android:textColor="#ffffff"
                        android:textSize="20sp" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="280dp"
                    android:layout_weight="1"
                    android:layout_height="wrap_content" >

                    <Button
                        android:id="@+id/bKonacno"
                        android:layout_width="260dp"
                        android:layout_height="35dp"
                        android:layout_marginTop="3dp"
                        android:background="@drawable/ic_launcher"
                        android:padding="0dp"
                        android:textColor="#ffffff"
                        android:textSize="20sp" />
                </LinearLayout>

                <LinearLayout
                    android:layout_width="100dp"
                    android:layout_weight="1"
                    android:layout_height="match_parent" >

                    <TextView
                        android:id="@+id/tvVreme"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginLeft="30dp"
                        android:layout_marginTop="8dp"
                        android:text="100"
                        android:textColor="#ff0000"
                        android:textSize="20sp" />
                </LinearLayout>
            </LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:06:12.957

模拟器和设备上的分辨率可能不同，而且您没有使用 dpi 而是像素。

使用绝对布局时也可能会出现问题。

没有代码很难猜

# java - Java 泛型：在复制子类的实例时捕获泛型类型

> ID：15834367
> 
> 赞同：0
> 
> 时间：2013-04-05T12:46:26.537
> 
> 标签：java, generics

在下面的代码示例中，有没有办法避免丑陋的 SuppressWarnings 注释？

代码测试参数*t*是否是*A的实例，如果是则返回**A*的另一个实例。这满足了*createCopy()*的一般约定，即返回与其参数相同类型的对象，因此它是一种安全操作。对*B*的测试也是如此。

我知道[通配符捕获和辅助方法](http://docs.oracle.com/javase/tutorial/java/generics/capture.html)，但我不确定在这种情况下是否以及如何帮助，尽管问题似乎非常相似。

```
abstract class Base {
    public static <T extends Base> T createCopy(T t) {
        if (t instanceof A) {
            @SuppressWarnings("unchecked")
            T copy = (T) new A((A) t);
            return copy;
        }

        if (t instanceof B) {
            @SuppressWarnings("unchecked")
            T copy = (T) new B((B) t);
            return copy;
        }

        throw new IllegalStateException();
    }
}

class A extends Base {
    public A() { }
    public A(A a) { }
}

class B extends Base {
    public B() { }
    public B(B b) { }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:08:01.187

您可以将类传递给方法，但这仍然很难看：

```
abstract class Base {
    public static <T extends Base> T createCopy(final T t,
            final Class<T> klass) {
        if (t instanceof A) {
            final T copy = klass.cast(new A((A) t));
            return copy;
        }

        if (t instanceof B) {
            final T copy = klass.cast(new B((B) t));
            return copy;
        }

        throw new IllegalStateException();
    }
}

class A extends Base {
    public A() {
    }

    public A(final A a) {
    }
}

class B extends Base {
    public B() {
    }

    public B(final B b) {
    }
} 
```

打电话`t.getClass()`也不行。原因是 T 可以是 A 或 B 的子类型（这就是您的代码不是真正类型安全的原因）。

**编辑**：为什么你的代码不是真正的类型安全：想象一个`AA`扩展的类`A`。如果您使用此类的实例调用您的方法，它将创建一个类型的对象`A`并尝试将其强制转换为`AA`.

# php - Crawler + Guzzle：访问表单

> ID：15834369
> 
> 赞同：3
> 
> 时间：2013-04-05T12:46:37.803
> 
> 标签：php, symfony, symfony-2.1, guzzle

我是用php guzzle客户端抓取网站，然后用symfony 2.1爬虫处理

我正在尝试访问一个表格......例如这里的这个测试表格 [http://de.selfhtml.org/javascript/objekte/anzeige/forms_method.htm](http://de.selfhtml.org/javascript/objekte/anzeige/forms_method.htm)

```
$url = 'http://de.selfhtml.org/javascript/objekte/anzeige/forms_method.htm';
$client = new Client($url);

$request = $client->get();
$request->getCurlOptions()->set(CURLOPT_SSL_VERIFYHOST, false);
$request->getCurlOptions()->set(CURLOPT_SSL_VERIFYPEER, false);
$response = $request->send();
$body = $response->getBody(true);
$crawler = new Crawler($body);
$filter = $crawler->selectButton('submit')->form();
var_dump($filter);die(); 
```

但我得到了例外：

> 当前节点列表为空。

所以我有点迷茫，关于如何访问表格

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-04T00:26:31.177

尝试使用 Goutte，它是一个基于您已经在使用的工具（Guzzle、Symfony2 Crawler）之上的屏幕抓取和网络抓取库。有关更多信息，请参阅[GitHub 存储库](https://github.com/fabpot/Goutte)。

您的代码使用 Goutte 看起来像这样

```
<?php
use Goutte\Client;

$url = 'http://de.selfhtml.org/javascript/objekte/anzeige/forms_method.htm';
$client = new Client();

$crawler = $client->request('GET', $url);
$form = $crawler->selectButton('submit')->form();
$crawler = $client->submit($form, array(
    'username' => 'myuser', // assuming you are submitting a login form 
    'password' => 'P@S5'
));
var_dump($crawler->count());
echo $crawler->html();
echo $crawler->text(); 
```

如果你真的需要设置 CURL 选项，你可以这样做：

```
<?php
$url = 'http://de.selfhtml.org/javascript/objekte/anzeige/forms_method.htm';
$client = new Client();
$guzzle = $client->getClient();
$guzzle->setConfig( 
    array(
        'curl.CURLOPT_SSL_VERIFYHOST' => false,
        'curl.CURLOPT_SSL_VERIFYPEER' => false,
    ));
$client->setClient($guzzle);
// ... 
```

**更新：**

使用 DomCrawler 时，我经常会遇到同样的错误。大多数时候是因为我没有在页面中选择正确的元素，或者因为它不存在。尝试而不是使用：

```
$crawler->selectButton('submit')->form(); 
```

请执行下列操作：

```
$form = $crawler->filter('#signin_button')->form(); 
```

您在哪里使用 filter 方法通过 id 获取元素，如果它有一个`'#signin_button'`，或者您也可以通过 class 获取它 `'.signin_button'`。过滤器方法需要[CssSelector 组件](http://symfony.com/doc/current/components/css_selector.html)。

还可以通过打印出 HTML ( `echo $crawler->html();`) 并确保您实际上在正确的页面上来调试您的表单。

# cordova - 如何通过点击图标在我们的应用程序中启动另一个应用程序

> ID：15834372
> 
> 赞同：1
> 
> 时间：2013-04-05T12:46:46.507
> 
> 标签：cordova

我正在使用 phonegap 开发一个 ipad 应用程序。并想通过点击图标从我的应用程序中启动另一个。任何人都可以帮助我如何启动它。我需要什么来启动另一个应用程序。

# c# - 在 .NET 中，GC.MaxGeneration 是否曾经不是 2？

> ID：15834376
> 
> 赞同：7
> 
> 时间：2013-04-05T12:46:54.550
> 
> 标签：c#, .net, garbage-collection

据我了解，所有版本的 .NET 都有三代垃圾收集 - 0、1 和 2。

在任何情况下，检查`GC.MaxGeneration`会产生除 2 以外的任何结果吗？其他框架上是否存在具有不同 GC 代数的 GC？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T12:54:34.023

应该注意的是[GC.MaxGeneration](http://msdn.microsoft.com/en-us/library/system.gc.maxgeneration.aspx)在应用程序的生命周期内保持不变，这本身就是一个实现细节：

> **给实施者的注意事项**
> 
> 对于此实现，该`MaxGeneration` 属性返回的值保证在执行应用程序的生命周期内保持不变。

这意味着不仅可以与 .NET 框架的其他实现`MaxGeneration`不同`2`，而且在程序执行期间也会*有所不同*（取决于调用属性 getter 时垃圾收集器使用的代数）。

其他实现也可以根据情况使用不同的垃圾收集器。例如，Mono 可以使用[Boehm](http://www.mono-project.com/Mono%3aRuntime#Mono.27s_use_of_Boehm_GC)非分代 GC （`MaxGeneration`将始终如此`0`），或[SGen 分代 GC](http://www.mono-project.com/Generational_GC)（仅实现两代，因此`MaxGeneration`将始终小于或等于`1`那里）。

# java - Java Servlet - 观察者模式导致空响应对象

> ID：15834382
> 
> 赞同：1
> 
> 时间：2013-04-05T12:47:11.277
> 
> 标签：java, servlets

我有一个 Java HttpServlet。该 servlet 包含一组使用观察者模式的对象，以便通过 servlet 的 Response 对象返回数据。这是我在 HttpServlet 中的 doGet() 方法的简化版本：

```
protected void doGet(final HttpServletRequest request, final HttpServletResponse response)
    MyProcess process = new MyProcess();
    // This following method spawns a few threads, so I use a listener to receive a completion event.
    process.performAsynchronousMethod(request, new MyListener() {
        public void processComplete(data) {
            response.getWriter().print(data.toString());
        }
    }
} 
```

如示例所示，我有一个要执行的进程，它产生各种线程以生成最终数据集。这个过程可能需要几秒钟到一分钟的时间。我的问题是，似乎随着 doGet() 方法的完成，响应对象变为空。当 processComplete() 被调用时，响应对象将为空 - 从而阻止我写出任何数据。

看起来好像 servlet 在调用异步方法后立即关闭连接。

将观察者模式用于异步任务时，是否有更好的方法来实现这种类型的 servlet？我应该以其他方式执行此操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:57:48.113

当 doGet 方法终止时，servlet 响应将被发送回客户端，它也不会等待您的异步调用完成。您需要找到一种方法来阻止，直到所有异步任务都完成，然后才允许 doGet() 方法返回。

[这个问题](https://stackoverflow.com/questions/4523050/how-to-wait-for-all-threads-variable-number-of-threads-to-finish-to-move-on-wi)的答案应该为您指明正确的方向。

还有一点需要注意的是，你不能保证线程会串行写入响应编写器，你可能会发现各种打印操作重叠并且输出会出现乱码（这对你来说可能无关紧要，取决于什么数据是，以及如何使用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:04:14.287

您可以尝试[规范版本 3.0](http://jcp.org/en/jsr/detail?id=315)中提供的异步 servlet ，并非所有 Web 服务器都支持它，只有一些现代服务器支持它。但这意味着服务器将在这段时间内保持套接字连接。因此，您应该知道可以同时连接多少个客户端，并非所有硬件/操作系统都可以处理大量打开的连接。

Web 客户端将等待，并且可能会超时。您还应该考虑套接字连接可能断开并且客户端永远不会得到结果的情况（例如，某些代理服务器会中断长时间运行的连接）。所以你应该允许“恢复”操作。

# prolog - 在 Java 中使用 (nb_)setarg/3 和 gnu.prolog

> ID：15834386
> 
> 赞同：1
> 
> 时间：2013-04-05T12:47:17.847
> 
> 标签：prolog, swi-prolog, unsatisfiedlinkerror, gnu-prolog

我目前正在尝试使用 gnu.prolog （[http://www.gnu.org/software/gnuprologjava/](http://www.gnu.org/software/gnuprologjava/)）从java中使用prolog。

感谢[CapelliC](https://stackoverflow.com/users/874024/capellic)的大力帮助，我现在有了一个非常适合我的目的的 prolog 程序。问题是 gnu.prolog 不支持`reverse/2`也不支持`nb_setarg/3`. Java 会抛出一个错误：

```
Exception in thread "Game" java.lang.IllegalArgumentException: The goal is not currently active 
```

自己实现不是什么大问题，`reverse/2`但我不知道如何替换`nb_setarg/3`（`setarg/3`也不起作用）

这是我的序言代码：

```
findPath(_Limit, [Goal | Rest], Goal, Temp, Temp, [Goal | Rest]) :- !.

findPath(Limit, [A | Rest], Goal, Cost, Temp, Path) :-
    path(A,B,C),
    \+member(B, Rest),
    NewCosts is (Temp + C),
    NewCosts < Limit,
    findPath(Limit, [B, A | Rest], Goal, Cost, NewCosts, Path).

searchPath(Start, Goal, Path_to_goal) :-
    S = path_len([], 50),
    repeat,
    arg(2, S, Limit),
    (   findPath(Limit, [Start], Goal, Cost, 0, Path)
    ->  (   Cost < Limit
        ->  nb_setarg(1, S, Path),
        nb_setarg(2, S, Cost),
        fail
        )
    ;   true
    ),
    arg(1, S, Rev),
    reverse(Rev, Path_to_goal). 
```

我尝试使用`JPL`from`SWI Prolog`但由于严重异常指出 Eclipse 无法正确找到库而无法运行它。我总是得到以下例外之一：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no jpl in java.library.path

UnsatisfiedLinkError: D:\Program Files\Prolog\bin\jpl.dll: Can't find dependent libraries

SWI-Prolog: [FATAL ERROR:
    Could not find system resources] 
```

即使遵循[此](https://stackoverflow.com/questions/9751357/jpl-swi-prolog-not-working)指南和[本](https://stackoverflow.com/questions/12283471/jpl-swi-prolog-configuration-failure)指南，我也无法解决我的问题。在 Windows（32 位）和 Ubuntu（64 位）上都没有。

您对我有什么解决方案可以让我`JPL`跑步或如何使用`nb_setarg/3`吗？到目前为止，我花了一天半的时间没有任何结果。相当令人沮丧...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T17:56:36.507

抱歉，我建议使用 GProlog setarg 代替 SWI-Prolog nb_setarg 是错误的。现在我以更简单和（我希望）更有效的方式重新编写了代码，在任何 ISO Prolog 下工作。

```
% this data is from original Prolog Dijkstra' algorithm implementation
:- initialization( consult(salesman) ).

:- dynamic(best_so_far/2).

path(X,Y,Z) :- dist(X, Y, Z).
path(X,Y,Z) :- dist(Y, X, Z).

findPath([Goal | Rest], Goal, Temp, Temp, [Goal | Rest]) :-
    !.
findPath([A | Rest], Goal, Cost, Temp, Path) :-
    path(A, B, C),
    \+ member(B, Rest),
    NewCost is Temp + C,
    best_so_far(Limit, _),
    NewCost < Limit,
    findPath([B, A | Rest], Goal, Cost, NewCost, Path).

% ?- searchPath(aberdeen, glasgow, L, P).
%
searchPath(Start, Goal, BestLen, BestPath) :-
    retractall(best_so_far(_, _)),
    asserta(best_so_far(1000000, [])),
    findPath([Start], Goal, Cost, 0, Path),
    % if we get here, it's because a lower Cost exists
    retractall(best_so_far(_, _)),
    asserta(best_so_far(Cost, Path)),
    fail
    ;
    best_so_far(BestLen, BestPath). 
```

如果您想稍加注意，应该有一个非常简单的启发式方法：即使 findPath 贪婪，选择第一个成本较低的分支。这可以用 setof+member 来完成...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:44:51.393

我要疯了……

正如我上面已经提到的，Java 中的 Prolog 和 SWI 中的 Prolog 之间存在一些差异。

我目前正在使用此代码：

```
% this data is from original Prolog Dijkstra' algorithm implementation
:- dynamic(best_so_far/2).

findPath([Goal | Rest], Goal, Temp, Temp, [Goal | Rest]) :-
    !.
findPath([A | Rest], Goal, Cost, Temp, Path) :-
    path(A, B, C),
    \+ member(B, Rest),
    NewCost is Temp + C,
    best_so_far(Limit, _),
    NewCost < Limit,
    findPath([B, A | Rest], Goal, Cost, NewCost, Path).

% ?- searchPath(aberdeen, glasgow, L, P).
%
searchPath(Start, Goal, BestLen, BestPath) :-
    retract_all(best_so_far(_, _)),
    asserta(best_so_far(50, [])),
    findPath([Start], Goal, Cost, 0, Path),
    % if we get here, it's because a lower Cost exists
    retract_all(best_so_far(_,_)),
    asserta(best_so_far(Cost, Path)),
    fail
    ;
    best_so_far(BestLen, BestPath).

retract_all(Term):-
    retract(Term),fail.
retract_all(_). 
```

在 SWI Prolog 中询问结果，我会在**0.016 秒内**得到答案。Java 需要**15 秒**才能获得相同的结果！

**此外，更糟糕的是：**在某些时候 gnu prolog 会提供**完全不同的结果**。

这是Java的一些概述：

```
From 190 to 221
pathList: [221, 191, 190]
distance: 2

From 191 to 221
pathList: [221, 251, 252, 253, 223, 193, 194, 195, 196, 197, 198, 199, 169, 139, 138, 137, 136, 135, 134, 133, 132, 131, 130, 129, 128, 127, 126, 125, 124, 123, 122, 121, 151, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191]
distance: 43

From 190 to 221
pathList: [221, 191, 190]
distance: 2 
```

您可以清楚地看到，有一条从**191**到**221**的路径。但是，我没有返回这个结果 ( `pathList: [221,191]`)，而是得到了一条完全不同的路径，从我的幽灵来的地方向后引导。`searchPath(191,221, Distance, Path)`在 SWI Prolog 中运行查询（立即）返回

```
7 ?- searchPath(191,221, Cost, Path).
Cost = 1,
Path = [221, 191]. 
```

再一次：我使用的是完全相同的代码。我复制并粘贴它以确保。而且我传递了正确的论点（这就是我将它们打印出来的原因）。

**我真的不知道如何感谢你（尤其是 CapelliC）。我敢肯定，你已经为我花费了太多时间。但我绝对是在我的智慧结束。**

编辑：认为查看我的 java 代码可能很有用：

```
private int decideHunterMovement() {
        // term which contains the result of the prolog method
        VariableTerm pathTerm = new VariableTerm("Path");
        VariableTerm distanceTerm = new VariableTerm("Distance");
        Integer movement;
        List<IntegerTerm> pathList = new LinkedList<IntegerTerm>();

        // Create the arguments to the compound term which is the question
        IntegerTerm hunterPosition = new IntegerTerm(hunter.getPosition());
        IntegerTerm targetPosition = new IntegerTerm(pacman.getPosition()); // target for hunter is the pacman position

        long time= System.nanoTime ();
        Term[] arguments = { hunterPosition, targetPosition, distanceTerm, pathTerm};
        // Construct the question
        CompoundTerm goalTerm = new CompoundTerm(AtomTerm.get("searchPath"), arguments);
        // Execute the goal and return the return code.
        int rc;
        System.out.println("From " + hunterPosition + " to " + targetPosition);
        try{
            // Create the answer
            rc = interpreter.runOnce(goalTerm);
            time = (System.nanoTime () - time) / 1000 / 1000;
            System.out.println("Result in:" + time+ "ms");
            // If it succeeded.
            if (rc == PrologCode.SUCCESS || rc == PrologCode.SUCCESS_LAST){
                // Get hold of the actual Terms which the variable terms point to
                Term path = pathTerm.dereference();
                Term distance = distanceTerm.dereference();
                // Check it is valid
                if (path != null){
                    if (path instanceof CompoundTerm){
                        // convert CompoundTerm to a Java LinkedList
                        convertToList((CompoundTerm) path, pathList);
                        if(VERBOSE_MODE){
                            System.out.println("pathList: " + pathList);
                            System.out.println("distance: " + (IntegerTerm) distance + "\n");
                        }
                    }else{
                            throw new NoAnswerException("PROLOG ERROR: Answer is not a CompundTerm: (" + path + ")");
                    }
                }else{
                    throw new NoAnswerException("PROLOG ERROR: Answer null when it should not be null");
                }
            }else{
                throw new NoAnswerException("PROLOG ERROR: Goal failed");
            }
        } catch (NoAnswerException e) {
            e.printStackTrace();
        } catch (PrologException e1) {
            e1.printStackTrace();
        }

        movement = decideMovement(pathList);
        return movement;
    } 
```

# wpf - 任何用于 WPF 的交互式 XAML 编辑器？

> ID：15834392
> 
> 赞同：0
> 
> 时间：2013-04-05T12:47:32.597
> 
> 标签：wpf, xaml

是否有可以与 WPF 一起使用的交互式 XAML 编辑器，或者在 XamlPadX 4.0 中使用 VisualStateManager 的某种方式？

我已经尝试过 XamlPadX 4.0，它很棒，直到我尝试使用它阻塞的 VisualStateManager 做某事。粗略的研究表明，VisualStateManager 支持在 Dotnet 4 中到达 WPF，而 XamlPadX 4 是使用 Dotnet 2.5 构建的。尝试重定向 XamlPadX 以使用 Dotnet 4 未成功。

据我所知，Blend 似乎没有交互模式，只是标准的 VS 样式代码/运行迭代周期。

我快速浏览了 Kaxaml。它似乎可以工作，但非常有限，例如没有可视化树浏览器。

更新 colinsmith 建议的混合功能

我安装了 VS2012 Update 2，我尝试使用 Blend 但没有成功。例如，输入以下代码并从“对象和时间线”面板中选择按钮会导致“对象和时间线”面板显示“（未打开故事板）”，并且状态面板中什么都没有。在 Blend 中单击“帮助”会将我带到 MSDN 页面，其中显示“我们很抱歉。找不到您请求的页面。” 并在网上搜索有关将 Blend for VS2012 与 WPF 结合使用的指导，这并没有让我感到惊讶，因为仅在几天前发布的 VS2012 Update 2 中才将 WPF 支持添加到 VS2012 的 Blend 中。

```
<Window x:Class="BlendScratchProject.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="91" Width="192">

    <Grid HorizontalAlignment="Center" VerticalAlignment="Center">
        <Button Content="Button">
            <Button.Template>
                <ControlTemplate TargetType="Button">
                    <Border x:Name="_rootElement">
                        <Border.Background>
                            <SolidColorBrush x:Name="_borderBrush" Color="Black"/>
                        </Border.Background>

                        <Grid Margin="4">
                            <Grid.Background>
                                <SolidColorBrush x:Name="_backgroundBrush" Color="Green"/>
                            </Grid.Background>

                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                Margin="5"/>
                        </Grid>

                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">

                                <VisualState x:Name="Normal"/>

                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <ColorAnimation Storyboard.TargetName="_borderBrush"
                                            Storyboard.TargetProperty="Color" To="Red" Duration="0:0:0"/>
                                    </Storyboard>
                                </VisualState>

                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                    </Border>
                </ControlTemplate>
            </Button.Template>
        </Button>
    </Grid>

</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:40:02.880

在 Blend 中，确保在状态面板中启用“过渡预览”，然后您可以在状态组中的状态之间切换（通过单击它们）来查看动画。

请参阅此链接上的选项 5：

*   [http://msdn.microsoft.com/en-gb/library/windows/apps/jj129458.aspx](http://msdn.microsoft.com/en-gb/library/windows/apps/jj129458.aspx)。

（注意：图标看起来会根据 Blend 的版本而有所不同！）。

除此之外，您还有常规的“拆分”模式，因此您可以看到 XAML 文本编辑器并在其中输入原始 XAML，并在您输入时看到它呈现（即按照 Kaxaml 等）。

对不起，如果那不是你想要的，或者我太理解你了......

下图，突出显示要选择的位。

![在此处输入图像描述](https://i.stack.imgur.com/ZU4z1.png)

警告：

只要确保您有一个支持 WPF 的 Blend 版本...WPF 支持被排除在 Visual Studio 2012 RTM 附带的 Blend 之外...要恢复它，您必须使用下载并使用“BLEND + SKETCHFLOW PREVIEW FOR VISUAL STUDIO 2012"....但现在 Visual Studio Update 2 中有一个合适的 RTM 版本。

如果您不使用 Visual Studio 2012，则只需使用单独的 Expression Blend 4 产品（或将其作为 Expression Studio 的一部分获取）。

# jquery - 如何仅将 CSS 应用于文本框中的部分文本？

> ID：15834394
> 
> 赞同：0
> 
> 时间：2013-04-05T12:47:36.840
> 
> 标签：jquery, css

我有几个如下所示的文本框，我想对冒号前面的单词应用一些样式：

有人可以建议如何实现这一目标吗？ ![在此处输入图像描述](https://i.stack.imgur.com/antLf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:36:47.313

```
<div contenteditable='true' 
style="width:225px;height:23px;border:1px solid black">
<span>Nome a Cigonome :</span>
entry of user 
```

```
span{
background-color:yellow;    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:52:07.687

从我看到的情况来看，您正试图将占位符一分为二并应用不同的样式，但这是无法做到的。

试试这个方法：

```
<form>
    <fieldset>
        <label for="name">Name:</label>
        <input id="name" type="text" placeholder="Batman" />
    </fieldset>
<form> 
```

这样，您可以在每个元素上应用两种不同的样式。,`placeholder`可以是样式，但不适用于所有浏览器。并且`placeholder` **属性是 HTML5**。

# android - Android LazyAdapter - 在两个 TextView 和一个 ImageView 上显示相同的数据

> ID：15834395
> 
> 赞同：0
> 
> 时间：2013-04-05T12:47:40.160
> 
> 标签：android, listview

在我的 ListView 中有 2 个 TextView 和一个 ImageView。
我正在使用 LazyAdapter 根据[此链接](https://github.com/thest1/LazyList/)从 JSON 文件加载图像。

我已成功加载数据，但我面临的问题是每个列表项在两个 TextView 中都显示图像的链接，而图像本身却正确显示。

这是适配器：
public class LazyAdapter extends BaseAdapter {

```
private Activity activity;
private ArrayList<HashMap<String, String>> data;
private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public LazyAdapter(Activity a, ArrayList<HashMap<String, String>> d) {
    activity = a;
    data=d;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return data.size();
}

@Override
public Object getItem(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return position;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    View vi=convertView;
    if(convertView==null)
        vi = inflater.inflate(R.layout.item, null);

    TextView name = (TextView)vi.findViewById(R.id.name);
    TextView price = (TextView)vi.findViewById(R.id.price); 
    ImageView image=(ImageView)vi.findViewById(R.id.image); 

    HashMap<String, String> smart = new HashMap<String, String>();
    smart = data.get(position);

    id.setText(smart.get(SmActivity.KEY_ID));
    name.setText(smart.get(SmActivity.KEY_NAME));

    price.setText(smart.get(SmActivity.KEY_PRICE));
    imageLoader.DisplayImage(smart.get(SmActivity.KEY_THUMB), image);
    return vi;
} 
```

}

这是活动：
public class SmActivity extends ListActivity {

```
static String url = "url-php to get json";

public static String KEY_PRICE, KEY_NAME, KEY_THUMB;

ListView list;  
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayList<HashMap<String, String>> smList = new ArrayList<HashMap<String, String>>();

    JSONParser jParser = new JSONParser();
    JSONObject json = jParser.getJson(url);

    try {
        JSONArray smJArray = json.getJSONArray("sm");
        for(int i = 0; i < smJArray.length(); i++){

        HashMap<String, String> map = new HashMap<String, String>();    
            JSONObject jsonObj = smJArray.getJSONObject(i);

            map.put(KEY_NAME, jsonObj.getString("product_name"));
            map.put(KEY_PRICE, jsonObj.getString("price")+"€");
            map.put(KEY_THUMB, jsonObj.getString("image_main"));
            smList.add(map);       
        }   
    } 
    catch (JSONException e) {

        e.printStackTrace();
    }
    list = (ListView)getListView().findViewById(android.R.id.list);
    adapter=new LazyAdapter(this, smList);        
    list.setAdapter(adapter);
} 
```

}

我可以理解 ListView 在所有项目中显示`map.put(...)`我正在使用的最后一个项目的值。
例如，如果 HashMap 中最后一个 put 是 map.put(KEY_PRICE, jsonObj.getString("price")+"€");
我不仅在价格上得到价格值，而且在名称 TextView 上也得到价格值。当然，我没有得到任何图像。

如有任何帮助，我将不胜感激。
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:28:08.320

行。我得到了它。我更换了：

`public static String KEY_PRICE, KEY_NAME, KEY_THUMB;`

经过

`static final String KEY_NAME = "product_name";`
`static final String KEY_PRICE = "price";`

和

`map.put("product_name", jsonObj.getString(KEY_NAME));`
`map.put("price", jsonObj.getString(KEY_PRICE));`

# sql-server - 无法启动 sql server 代理

> ID：15834401
> 
> 赞同：18
> 
> 时间：2013-04-05T12:47:45.927
> 
> 标签：sql-server, sql-server-2008-r2, sql-server-agent

我想启动 SQL Server Agent（sql server 2008 R2 Enterprise edition），然后我做了：

1.  打开 SQL Server 配置管理器。
2.  SQL Server 服务。
3.  右键单击 sql server 代理。

但是当我右键单击开始项目时被禁用。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-05T12:54:31.153

去运行类型**services.msc**

右键单击**SQL Server 代理 (MSSQLSERVER)**

然后检查您的启动类型可能被*禁用*的属性，将其更改为*自动*或*手动*，然后再试一次，它将启用启动选项

# c# - 从基类中的派生类获取属性

> ID：15834403
> 
> 赞同：10
> 
> 时间：2013-04-05T12:47:51.153
> 
> 标签：c#, oop, reflection

如何从基类的派生类中获取属性？

基类：

```
public abstract class BaseModel {
    protected static readonly Dictionary<string, Func<BaseModel, object>>
            _propertyGetters = typeof(BaseModel).GetProperties().Where(p => _getValidations(p).Length != 0).ToDictionary(p => p.Name, p => _getValueGetter(p));
} 
```

派生类：

```
public class ServerItem : BaseModel, IDataErrorInfo {
    [Required(ErrorMessage = "Field name is required.")]
    public string Name { get; set; }
}

public class OtherServerItem : BaseModel, IDataErrorInfo {
    [Required(ErrorMessage = "Field name is required.")]
    public string OtherName { get; set; }

    [Required(ErrorMessage = "Field SomethingThatIsOnlyHereis required.")]
    public string SomethingThatIsOnlyHere{ get; set; }
} 
```

在此示例中 - 我可以在 BaseModel 类中从 ServerItem 类中获取“名称”属性吗？

编辑：我正在尝试实现模型验证，如此处所述： [http ://weblogs.asp.net/marianor/archive/2009/04/17/wpf-validation-with-attributes-and-idataerrorinfo-interface-in -mvvm.aspx](http://weblogs.asp.net/marianor/archive/2009/04/17/wpf-validation-with-attributes-and-idataerrorinfo-interface-in-mvvm.aspx)

我想如果我创建一些包含（几乎）所有验证魔法的基本模型，然后扩展该模型，那就没问题了......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T12:53:36.013

如果要求派生类*必须*实现方法或属性，则应将该方法或属性作为抽象声明引入基类。

例如，对于您的`Name`属性，您将添加到基类：

```
public abstract string Name { get; set; } 
```

然后任何派生类都*必须*实现它，或者本身就是抽象类。

将属性的抽象版本添加到基类后，*除了*基类的构造函数之外`Name`，您将能够在基类中的任何位置访问它。

 ** * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-05T13:06:24.157

如果您**必须**从基类中逐字获取派生类的属性，则可以使用反射，例如 - 像这样......

```
using System;
public class BaseModel
{
    public string getName()
    {
        return (string) this.GetType().GetProperty("Name").GetValue(this, null);
    }
}

public class SubModel : BaseModel
{
    public string Name { get; set; }
}

namespace Test
{
    class Program
    {
        static void Main(string[] args)
        {
            SubModel b = new SubModel();
            b.Name = "hello";
            System.Console.Out.WriteLine(b.getName()); //prints hello
        }
    }
} 
```

但是，不建议这样做，您很可能应该像 Matthew 所说的那样重新考虑您的设计。

至于不向基类抛出属性——您可以尝试将基类和派生类解耦为不相关的对象，并通过构造函数传递它们。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-05T13:06:37.657

如果两个类都在同一个程序集中，你可以试试这个：

```
Assembly
    .GetAssembly(typeof(BaseClass))
    .GetTypes()
    .Where(t => t.IsSubclassOf(typeof(BaseClass))
    .SelectMany(t => t.GetProperties()); 
```

这将为您提供所有子类的所有属性`BaseClass`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-14T13:06:51.797

**通过在基类中创建虚拟**属性并将其**覆盖**到派生类来解决此问题的另一种方法。

```
public class Employee
{
    public virtual string Name {get; set;}
}

public class GeneralStaff
{
    public override string Name {get; set;}
}

class Program
{
        static void Main(string[] args)
        {
            Employee emp = new GeneralStaff();
            emp.Name = "Abc Xyz";
            //---- More code follows----            
        }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-05T14:02:39.677

好的，我解决的这个问题与这篇文章的作者略有不同：[http ://weblogs.asp.net/marianor/archive/2009/04/17/wpf-validation-with-attributes-and-idataerrorinfo-interface-in -mvvm.aspx](http://weblogs.asp.net/marianor/archive/2009/04/17/wpf-validation-with-attributes-and-idataerrorinfo-interface-in-mvvm.aspx)

```
public abstract class BaseModel : IDataErrorInfo {
    protected Type _type;
    protected readonly Dictionary<string, ValidationAttribute[]> _validators;
    protected readonly Dictionary<string, PropertyInfo> _properties;

    public BaseModel() {
        _type = this.GetType();
        _properties = _type.GetProperties().ToDictionary(p => p.Name, p => p);
        _validators = _properties.Where(p => _getValidations(p.Value).Length != 0).ToDictionary(p => p.Value.Name, p => _getValidations(p.Value));
    }

    protected ValidationAttribute[] _getValidations(PropertyInfo property) {
        return (ValidationAttribute[])property.GetCustomAttributes(typeof(ValidationAttribute), true);
    }

    public string this[string columnName] {
        get {
            if (_properties.ContainsKey(columnName)) {
                var value = _properties[columnName].GetValue(this, null);
                var errors = _validators[columnName].Where(v => !v.IsValid(value)).Select(v => v.ErrorMessage).ToArray();
                return string.Join(Environment.NewLine, errors);
            }

            return string.Empty;
        }
    }

    public string Error {
        get { throw new NotImplementedException(); }
    }
} 
```

也许它会帮助某人。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T12:55:29.013

扫描您的程序集以查找从 BaseModel 继承的所有类并创建如下字典：

```
Dictionary<Type, Dictionary<string, Func<BaseModel, object>>> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-15T11:09:35.423

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace TESTNEW
{
   public abstract class BusinessStructure
    {
       public BusinessStructure()
       { }

       public string Name { get; set; }
   public string[] PropertyNames{
       get
       { 
                System.Reflection.PropertyInfo[] Pr;
                System.Type _type = this.GetType();
                Pr = _type.GetProperties();
                string[] ReturnValue = new string[Pr.Length];
                for (int a = 0; a <= Pr.Length - 1; a++)
                {
                    ReturnValue[a] = Pr[a].Name;
                }
                return ReturnValue;
       }
   }

}

public class MyCLS : BusinessStructure
   {
       public MyCLS() { }
       public int ID { get; set; }
       public string Value { get; set; }

   }
   public class Test
   {
       void Test()
       {
           MyCLS Cls = new MyCLS();
           string[] s = Cls.PropertyNames;
           for (int a = 0; a <= s.Length - 1; a++)
           {
            System.Windows.Forms.MessageBox.Show(s[a].ToString());
           }
       }
   }
} 
```*

# android - 更改默认旋转方向

> ID：15834404
> 
> 赞同：0
> 
> 时间：2013-04-05T12:47:52.480
> 
> 标签：android, rotation

我想从左到右和从右到左方向旋转图像。我正在使用以下代码来旋转图像。`matrix.postRotate(90);

```
 bitmap = Bitmap.createBitmap(bitmap_rotate, 0, 0,
                bitmap_rotate.getWidth(), bitmap_rotate.getHeight(),
                matrix, true);` 
```

但它总是以相同的方向旋转图像。我想改变旋转方向。有什么办法可以改变方向。我用谷歌搜索了很多，但没有找到合适的。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:59:57.007

只需旋转 360 - yourAngle。

在你的情况下： `matrix.postRotate(270);`

# jquery - 将数据从 jquery 发布到控制器时出错

> ID：15834405
> 
> 赞同：0
> 
> 时间：2013-04-05T12:47:56.280
> 
> 标签：jquery, knockout.js

嗨，当我尝试将 ContentType 放入按钮单击事件的 ajax 调用中时，我遇到了错误

```
viewmodel = ko.observableArray();
$(document).ready(function () {
    $.ajax({
        url: "/Render/LoadSurveyQuestions?sg=" + getUrlVars()["g"] + "&stg=" + getUrlVars()["sig"],
        success: function (result) {
            viewmodel = ko.mapping.fromJS(result);
            ko.applyBindings(viewmodel, document.getElementById("tblQuestions"));
        }
    });
    $("#btnNext").click(function () {
        $.ajax({
            type: 'post',
            data: ko.toJSON(viewmodel),
            url: "/Render/SaveSurveyQuestionOptions",
            //contentType: "application/json; charset=utf-8",
            //   dataType: "json", 
            success: function (result) {}
        });
    }); 
```

我正在使用以下控制器方法来保存列表。使用 ajax 调用此方法时出现错误。

```
[System.Web.Http.HttpPost]
    [JsonFilter(Param = "listobj", JsonDataType = typeof (List < SurveyQuestion > ))]
    public void SaveSurveyQuestionOptions(List < SurveyQuestion > listobj) {

        if (listobj.Count > 0) {
            foreach(SurveyQuestion objSurveyQuestion in listobj) {
                foreach(SurveyOption objOption in objSurveyQuestion.OptionList) {
                    //if (objOption.OptionSelected)
                    //{
                    //    objSurveyQuestion.OptionId = objOption.OptionID;
                    //    objSurveyQuestion.OptionText = objOption.OptionText;
                    //}
                }
                //osurveymanager.InsertQuestionAnswers(objSurveyQuestion);

            }

        }
    } 
```

# c# - regasm /codebase 有效，但使用 regasm /codebase /regfile 生成的文件无效

> ID：15834410
> 
> 赞同：1
> 
> 时间：2013-04-05T12:48:04.997
> 
> 标签：c#, com, regasm, regedit

我有一个适用于 32 位和 64 位架构的 COM 可见 dll，我用它来将菜单项添加到 Windows 资源管理器上下文菜单中。使用“regasm myassembly.dll /codebase”注册 dll 并查看新菜单项。伟大的。注销也可以正常工作。

现在我想创建一个 .reg 文件，以便可以将菜单项添加到非开发机器。我使用“regasm myassembly.dll /codebase /regfile”生成一个我可以用 regedit 导入的 reg 文件。问题是，导入 .reg 后，我看不到菜单图标。为什么注册会失败？注意我在 64 位系统上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T14:00:11.867

你应该知道这是一个非常非常糟糕的主意。请阅读有关该主题的经典帖子。

[http://blogs.msdn.com/b/oldnewthing/archive/2006/12/18/1317290.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2006/12/18/1317290.aspx)

然后是最近的更新：

[http://blogs.msdn.com/b/oldnewthing/archive/2013/02/22/10396079.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2013/02/22/10396079.aspx)

即使您坚持要尝试此操作（或者如果程序集用于加载项以外的其他内容），尝试使用 .reg 文件注册程序集仍然不是一个好主意。

除了 COM 注册以使程序集正常工作之外，还有很多事情要做。很可能您必须将其添加到 GAC 以便 .NET 可以找到它。此外，.NET 的未来版本可能需要在注册表中添加更多信息或不同的信息。即使在今天（我怀疑），REGASM 也可能需要在不同的环境（x86 与 x64）上放置不同的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T14:07:02.343

注册 shell 扩展需要编写比注册`[ComVisible]`.NET 程序集通常所需的更多的注册表项。
您还必须[编写 Explorer 读取的密钥](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144110%28v=vs.85%29.aspx#handlernames)以发现扩展。
您根本没有提到您是如何处理的，这通常需要自定义`[ComRegisterFunction]`. 但可以肯定的是，.reg 文件不会包含这些密钥，因为自定义注册功能需要运行代码。

# android - ListView onclick 无法正常工作

> ID：15834424
> 
> 赞同：0
> 
> 时间：2013-04-05T12:48:53.173
> 
> 标签：android

嗨，我在列表视图中使用列表视图，我有蔬菜和非蔬菜。所以当我点击蔬菜时，它应该移动到下一个活动并显示项目，当我点击非蔬菜时，它应该到下一个活动。我有为两个列表项编写了 setonclickitemlistener() 但是当我按下 veg 或 non-veg 时，它只会进入 Non-veg 活动。这是代码

```
public class MainActivity extends Activity {

String[] items={"veg","non-veg"};

protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

     ListView lv= (ListView)findViewById(R.id.listView1);

  ArrayAdapter<Object> adapter1 = new ArrayAdapter<Object (this,android.R.layout.simple_list_item_1,items);

  lv.setAdapter(adapter1);      

    lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View v, int arg2,
                long arg3) {

            {
            Toast.makeText(getBaseContext(),"YOU HAVE SELECTED VEG", 4000).show();
        Intent i=new Intent(MainActivity.this,veg.class);
        startActivity(i);
            }
        }
    });

  lv.setOnItemClickListener(new OnItemClickListener() {         

            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {

                Toast.makeText(getBaseContext(),"YOU HAVE SELECTED NON-VEG", 4000).show();
            Intent i=new Intent(MainActivity.this,Nonveg.class);
            startActivity(i);

            }
        }); 
```

} }

请告诉我如何识别蔬菜和非蔬菜的 id 以及如何编写 setonclicklistener() 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:50:56.537

你只能有一个 OnItemClickListener... 这将不得不检查视图以确定去哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:54:44.637

此代码完全正常工作：

```
public class MainActivity extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final ListView lv = (ListView)findViewById(R.id.listView1);
        lv.setChoiceMode(ListView.CHOICE_MODE_SINGLE);

        final String[] values = new String[] { "Veg", "Non-veg" };

                // Define a new Adapter
                // First parameter - Context
                // Second parameter - Layout for the row
                // Third parameter - ID of the TextView to which the data is written
                // Forth - the Array of data

                ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                        android.R.layout.simple_list_item_1, android.R.id.text1, values);

                // Assign adapter to ListView
                lv.setAdapter(adapter); 

                lv.setOnItemClickListener(new OnItemClickListener() {

                    @Override
                    public void onItemClick(AdapterView<?> arg0, View arg1,
                            int arg2, long arg3) {
                        if (arg2 == 0) {
                        Intent intent = new Intent(MainActivity.this, veg.class);
                        startActivity(intent);
                        }
                        if (arg2 ==1) {
                            Intent intent = new Intent(MainActivity.this, Nonveg.class);
                            startActivity(intent);
                        }
                    }
                });
} 
```

arg2 是列表中项目的位置

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T12:57:40.717

单击列表视图项目时，在列表视图中的位置获取项目。检查它是蔬菜还是非蔬菜

```
public class MainActivity extends Activity {
String[] items={"veg","non-veg"};
ListView lv;
protected void onCreate(Bundle savedInstanceState) {

super.onCreate(savedInstanceState);

 setContentView(R.layout.activity_main);

 lv= (ListView)findViewById(R.id.listView1);
 setContentView(lv);
 ArrayAdapter<Object> adapter1 = new ArrayAdapter<Object> (this,android.R.layout.simple_list_item_1,items);

 lv.setAdapter(adapter1);      

 lv.setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View v, int arg2,
            long arg3) {

        {
             String itemselected =(String) (lv.getItemAtPosition(arg2));
             if(itemselected.equals("veg")){

             Toast.makeText(getBaseContext(),"YOU HAVE SELECTED VEG", 4000).show();
             Intent i=new Intent(MainActivity.this,veg.class);
             startActivity(i); 
          }
            else if(itemselected .equals("non-veg"))
            {
                Toast.makeText(getBaseContext(),"YOU HAVE SELECTED NON VEG",4000).show();
                     Intent i=new Intent(MainActivity.this,nonveg.class);
                      startActivity(i); 
            }

        }
    }

});

}
}); 
```

# mysql - MySQL CURSOR ERROR 1193：未知系统变量

> ID：15834433
> 
> 赞同：3
> 
> 时间：2013-04-05T12:49:32.247
> 
> 标签：mysql, cursor

我是第一次创建光标。（参考[这个网站](http://dev.mysql.com/doc/refman/5.0/en/cursors.html)）到目前为止我做了这个（

```
CREATE PROCEDURE `abc`.`cursordemo` (IN start_date DATETIME,IN end_date DATETIME)
BEGIN
DECLARE done INT DEFAULT FALSE;
  DECLARE k1,k2,g,s,last_status VARCHAR(45);
  DECLARE b, c INT;
  DECLARE cur1 CURSOR FOR SELECT `key` FROM `abc`.`temp_weekly`;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;

OPEN cur1;
 read_loop: LOOP
    FETCH cur1 INTO k1;
    IF done THEN
      LEAVE read_loop;
    END IF;
    block_cursor:BEGIN
        DECLARE cur2 CURSOR FOR SELECT `key`,`group`,`status` FROM `abc`.`jira_local` WHERE `key` = k1 AND updateddate < end_date;
        DECLARE CONTINUE HANDLER FOR NOT FOUND SET done1 = TRUE;
        OPEN cur2;
        REPEAT
            FETCH cur2 INTO k2,g,s;
            IF NOT done1 THEN

            IF s != last_status THEN
                CASE
                    WHEN s = 'verified' THEN
                    SET c = c +1;
                    WHEN s = 'closed' THEN
                    SET c = c +1;
                    WHEN s = 'to be scheduled' THEN
                    SET c = c +1;
                    WHEN s = 'deferred' THEN
                    SET c = c +1;
/*'resolved','closed','to be scheduled','deferred','validated','assigned','l3 need more info','l2 need more info','need more info'*/
                    WHEN s = 'resolved' THEN
                    SET c = c +1;
                    WHEN s = 'validated' THEN
                    SET c = c +1;
                    WHEN s = 'assigned' THEN
                    SET c = c +1;
                    WHEN s = 'l3 need more info' THEN
                    SET c = c +1;
                    WHEN s = 'l2 need more info' THEN
                    SET c = c +1;
                    WHEN s = 'need more info' THEN
                    SET c = c +1;
                END CASE;
                SET last_status = s;
            END IF;
            END IF; 
        UNTIL NOT done1 END REPEAT;
        INSERT INTO ticketsResolvedCount values(k2,g,s,c);
    END block_cursor;

  END LOOP;

  CLOSE cur1;
  CLOSE cur2;
END$$ 
```

我在做什么 1）从 temp_weekly 读取所有键并迭代 2）从 jira_local 表中查找特定键的所有记录，并计算它被验证、解决等的次数。

问题：当我编译它时，它给出了一个错误

```
ERROR 1193: Unknown system variable 'done1' 
```

另外，我参考[了这个](https://stackoverflow.com/questions/3224248/using-cursor-in-a-loop-of-a-stored-procedure)链接来在循环中创建一个存储过程

**更新：** 声明`done/done1`我的程序后看起来像这样

```
BEGIN

      DECLARE k1,k2,g,s,last_status VARCHAR(45);
      DECLARE b, c INT;
      DECLARE cur1 CURSOR FOR SELECT `key` FROM `abc`.`temp_weekly`;
        DECLARE done1 BOOLEAN DEFAULT FALSE;
        DECLARE done BOOLEAN DEFAULT FALSE;
      DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = TRUE;
        .
        .
        .
block_cursor:BEGIN
        DECLARE cur2 CURSOR FOR SELECT `key`,`group`,`status` FROM `abc`.`jira_local` WHERE `key` = k1 AND updateddate < end_date;
        DECLARE CONTINUE HANDLER FOR NOT FOUND SET done1 = TRUE;
       .
       .
       . 
```

这给了我

```
ERROR 1337: Variable or condition declaration after cursor or handler declaration 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T12:53:40.873

你需要`done1`像你一样声明`done`：

从

```
DECLARE done INT DEFAULT FALSE; 
```

到

```
DECLARE done, done1 INT DEFAULT FALSE;
            ^^^^^^^ 
```

# php - KendoUI Grid 服务器端排序/过滤器不适用于 SQL 查询

> ID：15834437
> 
> 赞同：0
> 
> 时间：2013-04-05T12:49:48.523
> 
> 标签：php, json, kendo-ui

我遇到了一个问题，即我的网格没有按预期排序/过滤。我总是从数据库中取回所有结果。

这是我的 JS：

```
<script>
'use strict';
(function($, kendo) {
   $("#grid").kendoGrid({
        dataSource: {
            type: "json",
            transport: {
                read: {
                    url:"http://server01/read.php",
                    type: "POST"
                }
            },
            schema: {
                data: "data",
                total: "total",
                model: {
                    fields: {
                        tID: { type: "number" },
                        tTitle: { type: "string" },
                        oDate: { type: "date" },
                        eDate: { type: "date" },
                        cDate: { type: "date" },
                        tKeywords: { type: "string" }
                    }
                }
            },
            pageSize: 2,
            serverPaging: true,
            serverFiltering: true,
            serverSorting: true
        },
        height: 430,
        filterable: true,
        sortable: true,
        pageable: true,
        columns: [{
                field:"tID",
                title:"TicketID",
                width:"60px",
                filterable: false
            },{
                field: "tTitle",
                title: "Ticket Bezeichnung"
            }, {
                field: "oDate",
                title: "Ticket eröffnet",
                format: "{0:MM/dd/yyyy}",
                width: "160px"
            }, {
                field: "eDate",
                title: "Ticket escaliert",
                format: "{0:MM/dd/yyyy}",
                width: "160px"
            }, {
                field: "cDate",
                title: "Ticket geschlossen",
                format: "{0:MM/dd/yyyy}",
                width: "160px"

            }, {
                field: "tKeywords",
                title: "keywords"
            }
        ]
    });
})(jQuery, kendo); 
```

在服务器端，它看起来像这样：

```
error_reporting(E_ALL);
include 'classes/classes.php';
if ($_SERVER['REQUEST_METHOD'] == 'POST') {
    header('Content-Type: application/json');
    $request = json_encode($_POST);
    $result = new DataSourceResult('mysql:host=localhost;dbname=jarvis','root','',array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8'));
    echo json_encode($result->read('jar_ticketing_index', array('tID', 'tTitle', 'tDesc', 'oDate', 'eDate', 'cDate','tKeywords'), $request));
}else{
    echo "Opps...";
} 
```

为了将过滤器应用于查询，我使用了 dataSourceResult 类：

```
class DataSourceResult {
    private $db;

    private $stringOperators = array(
        'eq' => 'LIKE',
        'neq' => 'NOT LIKE',
        'doesnotcontain' => 'NOT LIKE',
        'contains' => 'LIKE',
        'startswith' => 'LIKE',
        'endswith' => 'LIKE'
    );

    private $operators = array(
        'eq' => '=',
        'gt' => '>',
        'gte' => '>=',
        'lt' => '<',
        'lte' => '<=',
        'neq' => '!='
    );

    private $aggregateFunctions = array(
        'average' => 'AVG',
        'min' => 'MIN',
        'max' => 'MAX',
        'count' => 'COUNT',
        'sum' => 'SUM'
    );

    function __construct($dsn, $username=null, $password=null, $driver_options=null) {
        $this->db = new PDO($dsn, $username, $password, $driver_options);

    }

    private function total($tableName, $properties, $request) {
        if (isset($request->filter)) {
            $where = $this->filter($properties, $request->filter);
            $statement = $this->db->prepare("SELECT COUNT(*) FROM $tableName $where");
            $this->bindFilterValues($statement, $request->filter);
        } else {
            $statement = $this->db->prepare("SELECT COUNT(*) FROM $tableName");
        }

        $statement->execute();

        $total = $statement->fetch(PDO::FETCH_NUM);
        return (int)($total[0]);
    }

    private function page() {
        return ' LIMIT :skip,:take';
    }

    private function group($data, $groups, $table, $request, $properties) {
        if (count($data) > 0) {
            return $this->groupBy($data, $groups, $table, $request, $properties);
        }
        return array();
    }

    private function mergeSortDescriptors($request) {
        $sort = isset($request->sort) && count($request->sort) ? $request->sort : array();
        $groups = isset($request->group) && count($request->group) ? $request->group : array();

        return array_merge($sort, $groups);
    }

    private function groupBy($data, $groups, $table, $request, $properties) {
        if (count($groups) > 0) {
            $field = $groups[0]->field;
            $count = count($data);
            $result = array();
            $value = $data[0][$field];
            $aggregates = isset($groups[0]->aggregates) ? $groups[0]->aggregates : array();

            $hasSubgroups = count($groups) > 1;
            $groupItem = $this->createGroup($field, $value, $hasSubgroups, $aggregates, $table, $request, $properties);

            for ($index = 0; $index < $count; $index++) {
                $item = $data[$index];
                if ($item[$field] != $value) {
                    if (count($groups) > 1) {
                        $groupItem["items"] = $this->groupBy($groupItem["items"], array_slice($groups, 1), $table, $request, $properties);
                    }

                    $result[] = $groupItem;

                    $groupItem = $this->createGroup($field, $data[$index][$field], $hasSubgroups, $aggregates, $table, $request, $properties);
                    $value = $item[$field];
                }
                $groupItem["items"][] = $item;
            }

            if (count($groups) > 1) {
                $groupItem["items"] = $this->groupBy($groupItem["items"], array_slice($groups, 1), $table, $request, $properties);
            }

            $result[] = $groupItem;

            return $result;
        }
        return array();
    }

    private function addFilterToRequest($field, $value, $request) {
        $filter = (object)array(
            'logic' => 'and',
            'filters' => array(
                (object)array(
                    'field' => $field,
                    'operator' => 'eq',
                    'value' => $value
                ))
            );

        if (isset($request->filter)) {
            $filter->filters[] = $request->filter;
        }

        return (object) array('filter' => $filter);
    }

    private function addFieldToProperties($field, $properties) {
        if (!in_array($field, $properties)) {
            $properties[] = $field;
        }
        return $properties;
    }

    private function createGroup($field, $value, $hasSubgroups, $aggregates, $table, $request, $properties) {
        if (count($aggregates) > 0) {
            $request = $this->addFilterToRequest($field, $value, $request);
            $properties = $this->addFieldToProperties($field, $properties);
        }

        $groupItem = array(
            'field' => $field,
            'aggregates' => $this->calculateAggregates($table, $aggregates, $request, $properties),
            'hasSubgroups' => $hasSubgroups,
            'value' => $value,
            'items' => array()
        );

        return $groupItem;
    }

    private function calculateAggregates($table, $aggregates, $request, $properties) {
        $count = count($aggregates);

        if (count($aggregates) > 0) {
            $functions = array();

            for ($index = 0; $index < $count; $index++) {
                $aggregate = $aggregates[$index];
                $name = $this->aggregateFunctions[$aggregate->aggregate];
                $functions[] = $name.'('.$aggregate->field.') as '.$aggregate->field.'_'.$aggregate->aggregate;
            }

            $sql = sprintf('SELECT %s FROM %s', implode(', ', $functions), $table);

            if (isset($request->filter)) {
                $sql .= $this->filter($properties, $request->filter);
            }

            $statement = $this->db->prepare($sql);

            if (isset($request->filter)) {
                $this->bindFilterValues($statement, $request->filter);
            }

            $statement->execute();

            $result = $statement->fetchAll(PDO::FETCH_ASSOC);

            return $this->convertAggregateResult($result[0]);
        }
        return (object)array();
    }

    private function convertAggregateResult($properties) {
        $result = array();

        foreach($properties as $property => $value) {
            $item = array();
            $split = explode('_', $property);
            $field = $split[0];
            $function = $split[1];
            if (array_key_exists($field, $result)) {
                $result[$field][$function] = $value;
            } else {
                $result[$field] = array($function => $value);
            }
        }

        return $result;
    }

    private function sort($properties, $sort) {
        $count = count($sort);

        $sql = '';

        if ($count > 0) {
            $sql = ' ORDER BY ';

            $order = array();

            for ($index = 0; $index < $count; $index ++) {
                $field = $sort[$index]->field;

                if (in_array($field, $properties)) {
                    $dir = 'ASC';

                    if ($sort[$index]->dir == 'desc') {
                        $dir = 'DESC';
                    }

                    $order[] = "$field $dir";
                }

            }

            $sql .= implode(',', $order);
        }

        return $sql;
    }

    private function where($properties, $filter, $all) {
        if (isset($filter->filters)) {
            $logic = ' AND ';

            if ($filter->logic == 'or') {
                $logic = ' OR ';
            }

            $filters = $filter->filters;

            $where = array();

            for ($index = 0; $index < count($filters); $index++) {
                $where[] = $this->where($properties, $filters[$index], $all);
            }

            $where = implode($logic, $where);

            return "($where)";
        }

        $field = $filter->field;

        if (in_array($field, $properties)) {
            $index = array_search($filter, $all);

            $value = ":filter$index";

            if ($this->isDate($filter->value)) {
                $field = "date($field)";
                $value = "date($value)";
            }

            if ($this->isString($filter->value)) {
                $operator = $this->stringOperators[$filter->operator];
            } else {
                $operator = $this->operators[$filter->operator];
            }

            return "$field $operator $value";
        }
    }

    private function flatten(&$all, $filter) {
        if (isset($filter->filters)) {
            $filters = $filter->filters;

            for ($index = 0; $index < count($filters); $index++) {
                $this->flatten($all, $filters[$index]);
            }
        } else {
            $all[] = $filter;
        }
    }

    private function filter($properties, $filter) {
        $all = array();

        $this->flatten($all, $filter);

        $where = $this->where($properties, $filter, $all);

        return " WHERE $where";
    }

    private function isDate($value) {
        $result = date_parse($value);
        return $result["error_count"] < 1;
    }

    private function isString($value) {
        return !is_bool($value) && !is_numeric($value) && !$this->isDate($value);
    }

    private function bindFilterValues($statement, $filter) {
        $filters = array();
        $this->flatten($filters, $filter);

        for ($index = 0; $index < count($filters); $index++) {
            $value = $filters[$index]->value;
            $operator = $filters[$index]->operator;
            $date = date_parse($value);

            if ($operator == 'contains' || $operator == 'doesnotcontain') {
                $value = "%$value%";
            } else if ($operator == 'startswith') {
                $value = "$value%";
            } else if ($operator == 'endswith') {
                $value = "%$value";
            }

            $statement->bindValue(":filter$index", $value);
        }
    }

    public function create($table, $properties, $models, $key) {
        $result = array();
        $data = array();

        if (!is_array($models)) {
            $models = array($models);
        }

        $errors = array();

        foreach ($models as $model) {
            $columns = array();
            $values = array();
            $input_parameters = array();

            foreach ($properties as $property) {
                if ($property != $key) {
                    $columns[] = $property;
                    $values[] = '?';
                    $input_parameters[] = $model->$property;
                }
            }

            $columns = implode(', ', $columns);
            $values = implode(', ', $values);

            $sql = "INSERT INTO $table ($columns) VALUES ($values)";

            $statement = $this->db->prepare($sql);

            $statement->execute($input_parameters);

            $status = $statement->errorInfo();

            if ($status[1] > 0) {
                $errors[] = $status[2];
            } else {
                $model->$key = $this->db->lastInsertId();
                $data[] = $model;
            }
        }

        if (count($errors) > 0) {
            $result['errors'] = $errors;
        } else {
            $result['data'] = $data;
        }

        return $result;
    }

    public function destroy($table, $models, $key) {
        $result = array();

        if (!is_array($models)) {
            $models = array($models);
        }

        $errors = array();

        foreach ($models as $model) {
            $sql = "DELETE FROM $table WHERE $key=?";

            $statement = $this->db->prepare($sql);

            $statement->execute(array($model->$key));

            $status = $statement->errorInfo();

            if ($status[1] > 0) {
                $errors[] = $status[2];
            }
        }

        if (count($errors) > 0) {
            $result['errors'] = $errors;
        }

        return $result;
    }

    public function update($table, $properties, $models, $key) {
        $result = array();

        if (in_array($key, $properties)) {

            if (!is_array($models)) {
                $models = array($models);
            }

            $errors = array();

            foreach ($models as $model) {
                $set = array();

                $input_parameters = array();

                foreach ($properties as $property) {
                    if ($property != $key) {
                        $set[] = "$property=?";
                        $input_parameters[] = $model->$property;
                    }
                }

                $input_parameters[] = $model->$key;

                $set = implode(', ', $set);

                $sql = "UPDATE $table SET $set WHERE $key=?";

                $statement = $this->db->prepare($sql);

                $statement->execute($input_parameters);

                $status = $statement->errorInfo();

                if ($status[1] > 0) {
                    $errors[] = $status[2];
                }
            }

            if (count($errors) > 0) {
                $result['errors'] = $errors;
            }
        }

        if (count($result) == 0) {
            $result = "";
        }

        return $result;
    }

    public function read($table, $properties, $request = null) {
        $result = array();

        $result['total'] = $this->total($table, $properties, $request);

        $sql = sprintf('SELECT %s FROM %s', implode(', ', $properties), $table);

        if (isset($request->filter)) {
            $sql .= $this->filter($properties, $request->filter);
        }

        $sort = $this->mergeSortDescriptors($request);

        if (count($sort) > 0) {
            $sql .= $this->sort($properties, $sort);
        }

        if (isset($request->skip) && isset($request->take)) {
            $sql .= $this->page();
        }

        $statement = $this->db->prepare($sql);

        if (isset($request->filter)) {
            $this->bindFilterValues($statement, $request->filter);
        }

        if (isset($request->skip) && isset($request->take)) {
            $statement->bindValue(':skip', (int)$request->skip, PDO::PARAM_INT);
            $statement->bindValue(':take', (int)$request->take, PDO::PARAM_INT);
        }

        $statement->execute();

        $data = $statement->fetchAll(PDO::FETCH_ASSOC);

        if (isset($request->group) && count($request->group) > 0) {
            $data = $this->group($data, $request->group, $table, $request, $properties);
            $result['groups'] = $data;
        } else {
            $result['data'] = $data;
        }

        if (isset($request->aggregate)) {
            $result["aggregates"] = $this->calculateAggregates($table, $request->aggregate, $request, $properties);
        }

        return $result;
    }
} 
```

我总是从数据库中取回所有记录。看起来我的 DataSourceResult 对象没有以正确的方式获取过滤器变量。但我根本没有看到任何错误。

你能给我一个提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:27:13.200

好吧，我指出来了。我通过 POST 获得的过滤器需要作为对象传递给 dataSourceResult 类。

$object = json_decode(json_encode($_POST), FALSE);

现在它就像一个魅力！

# opencl - clEnqueueNDRangeKernel 的 opencl global_work_size

> ID：15834438
> 
> 赞同：0
> 
> 时间：2013-04-05T12:49:52.850
> 
> 标签：opencl

在参数中`clEnqueueNDRangeKernel`应该`global_work_size` 是 2 的幂？如果不是，并且返回的不是两个错误（如果有的话）？

**UPD** 基于答案：全局和本地工作大小不应该是两个的幂。工作组大小和波前大小之间的关系如何？：

*   如果波前大小为 64 且 local_work_size < 64 - 在每个锁定步骤中，将执行 64 个工作项，而 (64 - local_work_size) 将是“什么都不做”的工作项。
*   如果 128 > local_work_size > 64 - 执行情况如何？在甚至锁步中，整个波前将被执行（64 个工作项），并且在一个 local_work_size % 64 中执行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:24:01.660

全局工作大小不必是 2 的幂，它可以是任何正整数并且小于设备允许的最大工作项数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T16:40:46.847

这些值不需要是 2 的幂，但它必须是可以被工作组大小整除的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-07T19:40:32.953

正如已经说过的，它不一定是 2 的幂。但为了获得良好的性能，您必须选择 32 的倍数的本地工作大小（请参阅此相关问题：[关于全局和当地工作规模](https://stackoverflow.com/questions/3957125/questions-about-global-and-local-work-size)）

因此，由于您的本地工作量必须是您的全局工作量的除数，因此您可能有 2 的幂（优化的一个来源是选择比必要更大的全局工作量；为了选择一个好的局部工作量，你必须尝试一些）

# solr - 可以使用 REST-API 进行维基百科 Lucene 搜索吗？

> ID：15834442
> 
> 赞同：0
> 
> 时间：2013-04-05T12:50:03.350
> 
> 标签：solr, lucene, wikipedia-api

我得到大约 1-25 个搜索词，如果存在所有词或至少许多词出现的文章（在文章文本搜索中），我想在私人 wiki 中搜索。（或代替 and 运算符）。

现在我正在使用： [http://de.wikipedia.org/w/api.php?action=query&generator=search&gsrsearch=nutch&format=xml](http://de.wikipedia.org/w/api.php?action=query&generator=search&gsrsearch=nutch&format=xml) 和 [http://de.wikipedia.org/w/api.php?action =query&list=search&srsearch=nutch&format=xml](http://de.wikipedia.org/w/api.php?action=query&list=search&srsearch=nutch&format=xml)

第一个不包括分数或具有相关性顺序，这就是为什么我更喜欢后一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T08:14:50.987

MediaWiki 有一个可用的扩展名为 Lucene-Search：

[http://www.mediawiki.org/wiki/Extension:Lucene-search](http://www.mediawiki.org/wiki/Extension:Lucene-search)

# linux - 如何在 linux RHEL 4 上安装 yum 包？

> ID：15834443
> 
> 赞同：2
> 
> 时间：2013-04-05T12:50:18.133
> 
> 标签：linux, vmware, yum, rhel

当我 在 linux 终端上运行**root@localhost# yum install package_name命令时，它给出：**

```
bash: yum: command not found 
```

因为我的 linux 上没有安装 yello 更新和修改包。为此，我安装了我的 linux iso 光盘并编写命令

```
root@localhost# cd /meida/RHEL_4/i386/ Disk/ 1/
root@localhost RHEL_4 i386 Disk 1# ls 
```

但没有包目录。我没有找到任何 http url 表单下载（wget）yum.xxxrpm。我安装了 linux RHEL 4 AS 版本。请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:55:41.397

Yum 与 RHEL 4 (FOR RHN Stuff) 不兼容。他们没有正式将 yum 与 rhel4 一起发布，而是使用传统的 ' `up2date`' 实用程序。up2date 类似于 yum，但功能少得多的包管理实用程序，但在依赖关系解析方面做得很好。它以同样的方式解决包依赖关系，yum 做。

无论如何，你可以在这里得到 rpm 包，[http://dl.fedoraproject.org/pub/epel...oview/yum.html](http://dl.fedoraproject.org/pub/epel...oview/yum.html)。只需下载它并使用`rpm -ivh`命令安装。别指望，yum 会从 RHN 下载软件包。要与 rhn 同步，您仍然必须使用 up2date。

# java - 为 Android 应用程序创建 PHP 后端

> ID：15834444
> 
> 赞同：0
> 
> 时间：2013-04-05T12:50:21.387
> 
> 标签：java, php, android, authentication, login

我正在创建一个应该能够与其他用户共享内容的 Android 应用程序，并且我计划使用 PHP 后端。

我希望用户登录我的 Web 服务，以避免用无用的数据拖钓和填充我的服务。

但是现在我正在使用 Android 访问该服务，我知道创建 HTTP 帖子并将登录凭据发送到服务器很简单，但是如何保持会话处于活动状态？

据我所知，至少在没有可用个人数据的情况下，让应用程序使用手机登录服务是很常见的。

我应该如何存储Android设备已登录的数据？

假设我创建了一个包含用户、密码和 ID 的 MySQL 表。

我考虑使用 ANDROID_ID 或 IMEI 为设备生成唯一 ID，并将其与已登录我的 Web 服务的用户 ID 相关联，但这似乎不够安全。

其他应用程序如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T12:52:21.330

`Set-Cookie`如果您从第一个服务器响应（通过 设置）读取 cookie 并使用标头在后续请求中发送它，您可以继续使用会话`Cookie:`。就像网络浏览器一样。

这取决于您使用的 HTTP 库，以及它是如何完成的。

# java - CXF JAX-RS 客户端 - 避免需要覆盖 POJO 的 toString

> ID：15834454
> 
> 赞同：0
> 
> 时间：2013-04-05T12:50:53.573
> 
> 标签：java, cxf, jax-rs

我正在从 JAX-RS 客户端调用以下方法。

```
@POST
@Consumes("application/json")
@Produces("application/json")
public Book createBook(Book b); 
```

它通常会调用`b.toString()`来编组它。假设我无法控制类`Book`（它有自己的`toString()`），有没有办法告诉客户使用特定的库/工厂/其他东西将对象编组为 JSON 而不是调用`toString()`？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:22:00.350

你用的是杰克逊吗？如果没有，我会看看它：[CXF Jackson](http://cxf.apache.org/docs/jax-rs-data-bindings.html#JAX-RSDataBindings-Jackson)

由于 createBook 被声明为返回字符串，如果您尝试返回它，它将使用 toString。

我想知道如果这就是即将发布的内容，您为什么不返回 Book。我个人通常从我的方法返回响应，然后构建响应。在你的情况下，这可能是矫枉过正。

# java - org.jpedal.PdfDecoder.openPdfFile 在 Linux 服务器中抛出 NullPointerException

> ID：15834462
> 
> 赞同：1
> 
> 时间：2013-04-05T12:51:10.700
> 
> 标签：java, jpedal

我正在尝试打开具有图像的 pdf 文件，所以我想在 AWT 窗口中显示 pdf 文件，openPdfFile 方法和其他用于打开 pdf 文件的方法，如 openPdfFileFromURL、openPdfFileFromInputStream 是从 jpedal_lgpl.jar 文件中使用的。

它在 Windows 中运行良好，在我在 linux 服务器中部署类文件后，它抛出以下异常：

```
Exception:at org.jpedal.PdfDecoder.openPdfFile(Unknown Source)
    at org.jpedal.PdfDecoder.openPdfFileFromURL(Unknown Source) 
```

请告诉我 jpedal_lgpl.jar 是不是受支持的 jar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T07:20:21.417

URL 是否有效/有效？它是从浏览器打开的吗？

# rtmp - rtmpt 协议转储握手错误

> ID：15834463
> 
> 赞同：1
> 
> 时间：2013-04-05T12:51:11.963
> 
> 标签：rtmp, live-streaming

当我尝试在 Ubuntu 中使用 rtmpdump 转储 rtmpt 协议时，出现此错误：

```
ERROR: RTMP_Connect1, handshake failed. 
```

我想转储：

```
rtmpdump -v -r  "rtmpt://37.130.228.52:80/atv/atv3" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T00:54:42.593

我解决了这个问题。首先，rtmp url 的 ip 地址在几个 ip 地址之间发生变化。当我尝试其他 ip 号码时，它正在连接到 rtmp，但立即被拒绝。这是由于 swf 验证，即一些 rtmp url 也需要 swf 验证。因此，当我按以下方式输入时，它可以在 vlc 播放器上成功播放。

```
rtmpdump -v -r  "rtmpt://..../atv/atv3" -s http://....swf?i=1 | vlc - 
```

下一个问题是我想用 avconv/avplay 播放这个 rtmp，而不是用 vlc 播放器。我无法在 avplay 中成功提供 swfurl 参数。相反，我们也可以先使用 rtmpdump 转储，然后使用 avplay 或 avconv 进行管道传输，但我也无法实现这一点。

编辑：第二个问题解决了

> rtmpdump ...... | avplay -i 管道：0

# java - Android - 静态和动态按钮重量之间的区别

> ID：15834469
> 
> 赞同：1
> 
> 时间：2013-04-05T12:51:23.380
> 
> 标签：java, android, layout

我正在使用 TableLayout，其中第一行是静态的 (XML)，第二行是在运行时添加的。两种布局在视觉上应该是相同的。但是，我得到了不同的结果：

```
ROW 1: [----A-----] [----------B----------] [-----C----]
ROW 2: [-----A-----] [---------B---------] [-----C-----] 
```

这是第 1 行的 XML：

```
<Button
 android:id="@+id/stat_A"
 android:layout_width="0dp"
 android:layout_weight="1"
 android:text="A" /> 
```

按钮 stat_A 和 stat_C 的权重为“1”，而 stat_B 的权重为“2”。

这是 ROW 2 的 Java 代码：

```
 Button btn = new Button(this);
 btn.setId("dyn_A");
 LayoutParams btn_param = new TableRow.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT, _DYN_WEIGHT_);
 btn.setLayoutParams(btn_param);
 btn.setText("A");
 layout.addView(btn); 
```

_DYN_WEIGHT_ 对于按钮 dyn_A 和 dyn_C 是“1”，对于 dyn_B 是“2”。

我的错误在哪里？

谢谢！

**编辑**

完整的 XML：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/Tbl01"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".MainActivity">

    <TableRow
        android:id="@+id/row1"
        android:layout_width="match_parent"
        android:layout_height="match_parent">  

        <Button
            android:id="@+id/stat_A"
            android:layout_width="0dp"
            android:layout_weight="1"
            android:text="A" />

        <Button
            android:id="@+id/stat_B"
            android:layout_width="0dp"
            android:layout_weight="2"
            android:text="B" />

        <Button
            android:id="@+id/stat_C"
            android:layout_width="0dp"
            android:layout_weight="1"
            android:text="C" />

    </TableRow>     

    <TableRow
        android:id="@+id/row2"
        android:layout_width="match_parent"
        android:layout_height="match_parent">       
    </TableRow>

</TableLayout> 
```

# c# - 如何确定gridview中点击的项目

> ID：15834470
> 
> 赞同：2
> 
> 时间：2013-04-05T12:51:29.343
> 
> 标签：c#, xaml, gridview, microsoft-metro

我使用此 XAML 代码创建了一个 gridview 并向其中添加项目：

```
<Grid x:Name="MainStack" HorizontalAlignment="Left" Height="628" Grid.Row="1" VerticalAlignment="Top" Width="1366">
        <GridView
        x:Name="itemGridView"
        AutomationProperties.AutomationId="ItemsGridView"
        AutomationProperties.Name="Items"
        TabIndex="1"
            Grid.RowSpan="2"
        Padding="130,42,116,46"
        ItemTemplate="{StaticResource Standard250x250ItemTemplate}"
        SelectionMode="None"
        IsSwipeEnabled="false"
        IsItemClickEnabled="True"
        Background="#FFFB0404" Margin="0,0,0,0" RenderTransformOrigin="0.489,0.503" ItemClick="MainPage_Click">
            <x:String>Item 1</x:String>
            <x:String>Item 2</x:String>
            <x:String>Item 3</x:String>
            <x:String>Item 4</x:String>
            <x:String>Item 5</x:String>
            <x:String>Item 6</x:String>
            <x:String>Item 7</x:String>
            <x:String>Item 8</x:String>
        </GridView>
    </Grid> 
```

然后我尝试使用这个 C# 代码

```
 private void MainPage_Click(object sender, ItemClickEventArgs e)
    {
        string output = e.ClickedItem.ToString();
        int ClickValue = Convert.ToInt32(output);
        if (ClickValue == 0)
        {
            this.Frame.Navigate(typeof(ItemsPageRSS));
        }
    } 
```

单击第一项时使应用程序导航到页面但它给出了错误。

请如果有人能告诉我如何隔离每个 iem 并为每个 iem 添加单独的单击事件，以及如何通过向项目添加标题、副标题和图像来自定义 gridview 项目。先感谢您。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T13:29:19.363

如果您看不懂 MSDN 示例，我在这里给您一个简单的示例。只需创建新项目并粘贴整个代码。

XAML

```
<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <GridView
        x:Name="itemGridView"
        ItemTemplate="{StaticResource Standard250x250ItemTemplate}"
        SelectionMode="None"
        IsItemClickEnabled="True"
        Background="#FFFB0404" 
        ItemClick="MainPage_Click"/>
</Grid> 
```

C＃

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    var gvData = new ObservableCollection<MyData>();
    for (int i = 0; i < 8; i++)
    {
        gvData.Add(new MyData
        {
            ID = i,
            Image = new BitmapImage(new Uri("ms-appx:///Assets/Logo.png")), //You can add any image
            Title = "Title " + i,
            Subtitle = "Subtitle " + i
        });
    }
    itemGridView.ItemsSource = gvData;
}

private void MainPage_Click(object sender, ItemClickEventArgs e)
{
    MyData output = e.ClickedItem as MyData;
    int ClickValue = output.ID;
    if (ClickValue == 0)
    {
        this.Frame.Navigate(typeof(ItemsPageRSS));
        //TODO : Do whatever you want
    }

    //.....
    //TODO : Do operations for other items as well.
} 
```

您可以在（XAML 页面）类`MyData`的范围之外创建类。`MainPage`

```
public class MyData
{
    public int ID { get; set; }
    public ImageSource Image { get; set; }
    public string Title { get; set; }
    public string Subtitle { get; set; }
} 
```

# api - Facebook 上是否有类似 Foursquare 场地探索的 API？

> ID：15834471
> 
> 赞同：0
> 
> 时间：2013-04-05T12:51:29.873
> 
> 标签：api, facebook-graph-api, foursquare

在 Foursquare API 中，有一个端点“探索场所”，例如，您可以通过食物进行 lat 和 lng 过滤，它会返回场所列表。Facebook上有类似的东西吗？我找不到...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T13:09:34.623

使用搜索 API [http://developers.facebook.com/docs/reference/api/search/](http://developers.facebook.com/docs/reference/api/search/)

在 Graph API Explorer 上运行此示例：

```
search?distance=1000&center=-23.5475381,-46.5684873&type=place 
```

# php - 有没有将unicode数字符号转换为实际字符的解决方案

> ID：15834474
> 
> 赞同：1
> 
> 时间：2013-04-05T12:51:37.950
> 
> 标签：php, unicode, decode

我要在这个问题上大发雷霆了。如果有人有任何解决方案。我有一个 html 字符串

```
$html = '<div id="main">What is going on </div><div>&#1740;&#1729;&#1575;&#1722; 
&#1578;&#1608; &#1705;&#1608;&#1574;&#1740; &#1729</div>
<span>Some More Text &lt;good&gt;</span>; 
```

这是具有 html 实体 + 英文字符 + unicode 字符的数字符号的混合 html 字符串。我只想将 unicode 字符的数字符号转换为实际的 unicode 字符值。还有一些我不想丢失的用户格式。

我想要以下输出

```
$html = '<div id="main">What is going on </div><div>‘۔سلطان محمود نے گاڑی روکتے ہوئے</div>
<span>Some More Text &lt;good&gt;</span>; 
```

我用过

```
html_entity_decode($html, ENT_COMPAT, 'utf-8'); 
```

但这也将转换为我`&lt;`不想要的。`<``&gt;``>`

还有其他解决方案吗？？

注意：我并不是要求我的网页上没有正确显示 unicode 字符，它们显示得很好。因为网页呈现数字符号并显示为真正的 unicode 字符。但我也想要网页后面的实际 unicode 字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:13:49.833

尝试使用 preg_preplace_callback 和 html_entity_decode 作为回调。

```
$decode_single_entity = function ($matches) {
    return html_entity_decode($matches[0], ENT_COMPAT, 'utf-8');
};
$string = preg_replace_callback('/&#\d+;/', $decode_single_entity, $html); 
```

# python - 服务器向请求的客户端 xyz 推送通知：WebSocket Pusher/Pubnub

> ID：15834477
> 
> 赞同：0
> 
> 时间：2013-04-05T12:51:42.953
> 
> 标签：python, websocket, real-time, pusher, pubnub

让我们考虑一下我在一个 biz 应用程序中有 1000 个登录用户。现在，如果其中一个用户`xyz`将请求发送到服务器，但服务器需要/花费 5-10 分钟来完成/返回该请求响应。

**注意：**由于我的应用程序在 Google App Engine (Python) 上运行，这会引发截止日期超出错误。

在那种情况下，我在这里调用任务/后台任务队列。但是客户不知道该请求的任务状态是否已完成。

因此，要获得状态，我正在尝试使用 like`PubNub`或实现推送功能（第 3 方） `Pusher`。

现在这里的问题是，我怎样才能只向该请求的客户端发布消息 `xyz`？

**注意**：服务器发布状态消息应`xyz`仅向该请求的客户端发出警报/通知，而不是向该频道中存在的所有登录用户发出警报/通知。

作为新手在这里为`PubNub`or `Pusher`。

那么有什么想法/逻辑可以涵盖这种情况。？

**技术说明：** Google App Engine Python、Javascript。

***更新*****：**

我们需要哪个`pubnub`（沙盒层等）计划？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T06:04:15.307

# Google App Engine 上的服务器发送推送通知，使用 TaskQueues 进行后台处理长时间运行的任务

这是您在**Google App Engine Python 解决方案中需要的***源代码*，用于在使用**Google App Engine**任务/后台任务**队列**已完成任务队列处理步骤中的一个步骤以及任务队列已完全完成时通知用户。可是等等！您只想将通知发送给发起 TaskQueue 请求的**特定用户。**

 ******## 第 1 步 - 如何仅向客户端***XYZ***发布消息？

这很简单，这里是源代码：

> 此外，为了保护您的应用程序，请确保您通过以下方式获得正确的密钥：[https](https://admin.pubnub.com) ://admin.pubnub.com仪表板。

### JavaScript

```
<script src=https://pubnub.a.ssl.fastly.net/pubnub-3.4.3.min.js></script>
<script>(function(){

    var pubnub = PUBNUB.init({ subscribe_key : 'demo', ssl : true });
    pubnub.subscribe({
        channel : '0IHM4b2VpamZhaWU0eThyaWpvaWdma3Mg',  // SESSION ID
        message : function(message) { alert(message) }  // ALERT MESSAGE
    });

})();</script> 
```

> 请注意，我们使用一个简单的 JavaScript Alert() 函数来显示消息，但是您可能希望将其变成`<div>{message-here}</div>`页面上更强大的通知区域。

### 任务队列设置

```
taskqueue.add(
    url='/my-long-task',                                                                              
    countdown=1,
    method='GET',
    params={ 'sessionid' : '0IHM4b2VpamZhaWU0eThyaWpvaWdma3Mg' }
) 
```

基本上，您使用 User **Session ID**将通信路由到用户**XYZ**。现在在 Google App Engine Python 中，您将使用**会话 ID**向客户端发布您想要的任何消息状态。

### Google App Engine - Python 任务

```
import webapp2
from Pubnub import Pubnub ## Download - https://raw.github.com/pubnub/pubnub-api/master/google-app-engine/python/Pubnub.py
pubnub = Pubnub( "demo", "demo" )

def server_to_client_notify( sessionId, message ):
        pubnub.publish({
            "channel" : sessionId, ## SESSION ID
            "message" : "hi!"
        })

class LongRunningTaskQueue(webapp2.RequestHandler):
    def get(self):
        ## GET Session ID
        sessionId = urllib.unquote(self.request.get( 'sessionid', '' ))

        server_to_client_notify( sessionId, "Starting Your Job" )
        ## - DO A LOT OF WORK - ##
        ## - DO A LOT OF WORK - ##
        ## - DO A LOT OF WORK - ##

        server_to_client_notify( sessionId, "Your Job is Nearly Complete" )
        ## - DO A LOT OF WORK - ##
        ## - DO A LOT OF WORK - ##
        ## - DO A LOT OF WORK - ##

        server_to_client_notify( sessionId, "Your Job has Finished!" )

app = webapp2.WSGIApplication([('/my-long-task', LongRunningTaskQueue)]) 
```

基本概念是您将**SESSION ID**与 TaskQueue URL 命令一起发布，该命令启动/将任务添加到队列中。然后当 TaskQueue 启动时，您可以获取 URL 参数。

如果您想知道是否会有超过 1 个步骤，答案是：*“只有一个步骤”。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-06T12:44:45.907

使用消息定位特定用户的最佳方法是让用户订阅他们自己的独特频道。然后，您可以限制谁可以订阅该频道：

*   使用 Pusher，您可以通过[用户身份验证过程执行此操作](http://pusher.com/docs/authenticating_users)
*   使用 PubNub 使用长唯一频道名称，如[本常见问题解答中所述](https://help.pubnub.com/entries/21115547-How-do-I-Allow-only-Certain-Users-to-Subscribe-to-Certain-Channels-)

Pusher 不允许您让多个用户订阅同一个频道，而是只向其中一个用户发送消息/事件。据我所知，PubNub 也不提供此功能。

这两项服务都没有限制您可以订阅多少频道，因此每个用户拥有一个频道通常是一个很好的解决方案：

*   Pusher在所有计划中提供[无限频道。](http://pusher.com/pricing)
*   PubNub 还提供无限频道（请参阅：[https](https://help.pubnub.com/entries/21096201-How-Many-Channels-Can-I-Use-) ://help.pubnub.com/entries/21096201-How-Many-Channels-Can-I-Use- ）。多路复用时每个客户端似乎有[100 个通道的限制](https://help.pubnub.com/entries/21882797-How-Many-Channels-does-Multiplexing-Support-)，根据您的应用程序，您可能必须考虑到这一点，但通常每个客户端 100 个通道应该绰绰有余。******

# java - Java - 上传不同名称的文件

> ID：15834478
> 
> 赞同：0
> 
> 时间：2013-04-05T12:51:46.733
> 
> 标签：java, file

当用户选择文件时，它将以用户在上传过程中输入的不同名称存储在文件夹中（路径已在 ProjectConfig 文件中设置）。这是我的 Servlet 中的代码，

```
new ProjectConfig(); // For setting path for storing image 
    String dealerGalleryPath = ProjectConfig.get("dealergallery");
    DiskFileItemFactory factory = new DiskFileItemFactory();
    int locationid=2;
    ServletFileUpload upload = new ServletFileUpload(factory);
    String fileName = "";
    try
    {
        java.io.File fnew = null;
        //System.out.println(getServletContext().getRealPath("/images"));

        List fileItems = upload.parseRequest(request);

        Iterator i = fileItems.iterator();

        while ( i.hasNext () ) 
        {
            FileItem fi = (FileItem)i.next();
            if ( !fi.isFormField () )   
            {
                // Get the uploaded file parameters
                String fieldName = fi.getFieldName();
                //System.out.println("Field Name is.."+fieldName);
                fileName = fi.getName();
                if(fi.getName() != null && fi.getName().trim().length() != 0)
                {
                //System.out.println("File Name is.."+fileName);

                String realWebPath = dealerGalleryPath+locationid+"/"+fi.getName();

                fnew = new java.io.File(realWebPath); // **What to do here to change name of file??**
                fi.write(fnew);
                System.out.println("Success");
                //commonutil.setProductimage(fi.getName());
                }
            }
        }
        System.out.println("fileName::"+fileName);
        request.setAttribute("ImageName", fileName);
        RequestDispatcher rd = request.getRequestDispatcher("/jsp/ImageTesting.jsp");
        rd.forward(request, response);
    }catch(Exception e)
    {
        e.printStackTrace();
    } 
```

我在这个网站上浏览了问题..但找不到相关的答案。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-16T20:25:32.020

下一个代码在我的网站上运行良好：

```
filePath = "upload/"; // DIRECTORY IN THE ROOT OF YOUR WEBSITE.
fileName = fi.getName(); // ORIGINAL FILENAME (YOU DONT WANT IT).
file = new File( filePath + "newname" ); // NEW FILE WITH NEW NAME.
try { fi.write( file ); } // WRITES ORIGINAL FILE INTO NEW FILE.
catch ( Exception ew ) { /* HANDLE ERROR HERE */ } 
```

您的问题是：//**在这里如何更改文件名？** 好吧，您无需更改任何内容，但代码中上面的两行只是将“fi.getName()”更改为您想要的新名称。

# android - android-start a new line between to 单选按钮

> ID：15834480
> 
> 赞同：0
> 
> 时间：2013-04-05T12:51:59.880
> 
> 标签：android

我尝试在“这里”的注释处开始一个新行。我所有的尝试都没有成功。我不能只选择“android:orientation="horizo​​ntal"，因为我有另一个组件，它不能很好地工作。

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tableLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="right"
    android:background="@drawable/back"
    android:icon="@drawable/logo" >

 <TableRow
        android:id="@+id/radio_hot_or_cold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginRight="14.5sp"
        android:gravity="right"
        android:orientation="horizontal"  //not good
        android:padding="5dip"
        android:visibility="gone" >

        <RadioGroup
            android:id="@+id/radioGroup_consume"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_below="@+id/radio_consume"
            android:orientation="horizontal"  //not good >

            <EditText
                android:id="@+id/edit_message_hot"
                android:layout_marginRight="10.5sp"
                android:inputType="numberDecimal"
                android:minEms="2"
                android:minWidth="15sp" >
            </EditText>

            <TextView android:text="צריכה בחום" />

            <RadioButton
                android:id="@+id/radio0"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:checked="true"
                android:text="" />

    //////////////here I want a new line

            <EditText
                android:id="@+id/edit_message_cold"
                android:layout_marginRight="10.5sp"
                android:inputType="numberDecimal"
                android:minEms="2"
                android:minWidth="15sp" >
            </EditText>

            <TextView android:text="צריכה בקור" />

            <RadioButton
                android:id="@+id/radio1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="" />
        </RadioGroup>
    </TableRow>

................

</TableLayout> 
```

我不能只选择“android:orientation="horizo​​ntal"，因为我有另一个组件，它不能很好地工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:58:53.850

尝试添加`android:paddingTop="##dp"`到您的`EditText`或`android:paddingBottom="##dp"`您的`RadioButton`.

编辑：这样做怎么样：

```
<RadioButton
            android:id="@+id/radio0"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="true"
            android:text="" />

        </TableRow>
        <TableRow>

        <EditText
            android:id="@+id/edit_message_cold"
            android:layout_marginRight="10.5sp"
            android:inputType="numberDecimal"
            android:minEms="2"
            android:minWidth="15sp" >
        </EditText>

        <TextView android:text="צריכה בקור" />

        <RadioButton
            android:id="@+id/radio1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="" />
    </RadioGroup>
</TableRow> 
```

# java - Apache Xerces 是流式 XML 解析器吗？

> ID：15834484
> 
> 赞同：0
> 
> 时间：2013-04-05T12:52:03.530
> 
> 标签：java, xerces, castor

我正在编写一个需要使用[castor](http://castor.codehaus.org/)解组一个巨大的 XML 文件的应用程序。由于这个原因，我需要使用诸如 Stax 之类的流式 XML 解析器来解析 XML 文件。根据 Castor 的文档，castor 默认解析器是 Xerces。我访问了 Xerces 主页，但我找不到 Xerces 是否是流解析器的任何信息。

有谁知道 Xerces 是否是流解析器。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:25:04.407

[常见问题解答](http://xerces.apache.org/xerces-j/faq-write.html#faq-11)中有一些关于如何处理这种情况的建议。引用文档。

> **如何在流到达时从流中读取数据？**
> 
> 有3个问题你必须处理：

*   Apache 解析器在开始解析之前将整个数据流读入缓冲区；您需要更改此行为，以便他们“即时”分析
*   Apache 解析器在到达文件末尾时终止；使用数据流，除非发送方丢弃套接字，否则您没有文件结尾，因此您需要以其他方式终止
*   Apache 解析器在终止时关闭输入流，这会关闭套接字；您通常不希望这样，因为您需要向数据流源发送 ack，并且无论如何您可能希望在套接字上进行进一步的交换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:23:57.313

来自[http://en.wikipedia.org/wiki/Xerces](http://en.wikipedia.org/wiki/Xerces)：

> Xerces 是 Apache 用于解析、验证、序列化和操作 XML 的软件库的集合。该库实现了许多用于 XML 解析的标准 API，包括 DOM、SAX 和 SAX2

所以它似乎支持流式和非流式 API。有关所有受支持的 API，请参阅[http://xerces.apache.org/#xerces2-j 。](http://xerces.apache.org/#xerces2-j)

# jquery - 结合 jQuery UI 进度条/滑块

> ID：15834486
> 
> 赞同：1
> 
> 时间：2013-04-05T12:52:12.673
> 
> 标签：jquery, jquery-ui, progress-bar, jquery-ui-slider

我想使用 Jquery UI 滑块作为媒体播放器搜索栏。我想同时显示缓冲和搜索栏。有什么方法可以用一个滑块/进度条来完成这两项工作

目前我正在为两者使用单独的滑块

// 对于搜索栏

```
jwplayer(player_id).onTime(function(a){
  $("#slider-range" ).slider({ 
          max: a.duration,
          value:a.position,
   })
}); 
```

// 用于缓冲

```
jwplayer(player_id).onBufferChange(function(a){
    $("#slider-buffer" ).slider({
         value:a.bufferPercent,
        }) 
```

# opengl - 为什么即使在使用 GL_REPEAT 时我的纹理也会拉伸？

> ID：15834490
> 
> 赞同：1
> 
> 时间：2013-04-05T12:52:23.123
> 
> 标签：opengl, graphics, 3d, textures, texture-mapping

![在此处输入图像描述](https://i.stack.imgur.com/IsqMK.png)这是我的输出：！[在此处输入图像描述][2]

当我的墙壁很长时，图像会被拉伸，而当它们很小时，图像会被挤压。

我的加载纹理的代码，loadTGATexture 方法来自 superBible。

```
glGenTextures(1,&texture);  
glBindTexture(GL_TEXTURE_2D,texture);   
LoadTGATexture(textureFile, GL_LINEAR_MIPMAP_LINEAR, GL_LINEAR, GL_REPEAT); 
```

我给出纹理坐标的代码片段是：（j 是建筑物墙壁的索引）

```
 buildingArray[j][0] = n2.x;
    buildingArray[j][3] = 0;
    buildingArray[j][4] = n2.y;

    texBlgArray[j][0] = repeat_after_length;
    texBlgArray[j][5] = 0;

    normals[j][0] = normal.x;
    normals[j][6] = normal.y;
    normals[j][7] = normal.z;

    j++; 
```

我将长度后的重复设置为1。

我认为如果长度 > 1 会发生纹理 GL_REPEAT，我应该将其设置为大于 1 的某个值，但如果我这样做，纹理中的窗口会变得非常小并且不会很大。的窗口是可见的。我想平铺纹理，我不希望我的原始纹理图像的尺寸发生任何变化：![在此处输入图像描述](https://i.stack.imgur.com/4iXWj.png)

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T13:33:40.267

即使在长墙上，您的纹理坐标也可能已标准化（即它们在左角有 [0,0]，在右下角有 [1,1]）。如果要重复纹理，则需要*超过*1.0 的坐标。因此，如果三角形边的长度为 x，则纹理的范围应超过 x * some k。

# soap - 如何在 Spring Integration 中记录收到的 SOAP 消息

> ID：15834491
> 
> 赞同：0
> 
> 时间：2013-04-05T12:52:25.517
> 
> 标签：soap, spring-integration

我配置了基于 Web 服务的入站消息传递网关。我想记录传入的 SOAP 消息（信封和里面的所有消息）。最好的方法是什么？

我曾尝试使用带有日志记录通道适配器的窃听器，但不知道一个好的表达式值来获取实际的 SOAP XML。如果入站网关配置为不提取有效负载，我会将 SaajSoapMessage 视为有效负载，否则将视为 DOMSource。是否有将 SaajSoapMessage 作为 XML 字符串获取的表达式？

这是我看到 SaajSoapMessage 的 toString() 的配置：

```
<int:channel id="request">
    <int:interceptors>
        <int:wire-tap channel="logger"/>
    </int:interceptors>
</int:channel>
<int:logging-channel-adapter id="logger" expression="payload" level="DEBUG"/>

<int:channel id="reply"/>
<int-ws:inbound-gateway id="ws-inbound-gateway" request-channel="request" reply-channel="reply"
                        extract-payload="false"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:48:10.467

Spring Integration 位于 Spring Web Services 之上。SWS 有一些拦截器可以记录有效载荷和/或信封......

[http://static.springsource.org/spring-ws/sites/2.0/reference/html/server.html#d5e1416](http://static.springsource.org/spring-ws/sites/2.0/reference/html/server.html#d5e1416)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T16:31:34.877

Spring Web Services 提供了你可以使用的拦截器。

如果您使用编组器和解组器，则两者都有侦听器，可以在进行编组/解组之前和之后执行某些操作。

如果您需要捕获在 ws-inbound-gateway 之前或之后添加到消息中的信息，您可以使用服务激活器。

如果要确保记录任何异常，请考虑分段网关和消息流中的服务激活器。

# jsf-2 - Richfaces弹出验证的解决方法

> ID：15834494
> 
> 赞同：1
> 
> 时间：2013-04-05T12:52:28.500
> 
> 标签：jsf-2, richfaces

它在 Richfaces 中有据可查的错误（参见错误 RF-11413）

您可以在 Richfaces 展示 Rich:dataTable -> 编辑上尝试

我找到的唯一解决方案是：[https](https://community.jboss.org/message/735198) : //community.jboss.org/message/735198（寻找Eldin Okanovic的答案）

但这对我不起作用，所以我想出了类似的解决方案，对我有用。

在 xhtml rich:datatable 上添加操作 a4j:commandLink **action="#{carsBean.popupReset}"**

```
<a4j:commandLink styleClass="no-decor" render="editGrid" execute="@this"
                oncomplete="#{rich:component('editPane')}.show()" action="#{carsBean.popupReset}">
                <h:graphicImage value="/images/icons/edit.gif" alt="edit" />
                <a4j:param value="#{it.index}" assignTo="#{carsBean.currentCarIndex}"/>
                <f:setPropertyActionListener target="#{carsBean.editedCar}" value="{car}" />
</a4j:commandLink> 
```

在 CarsBean 添加方法 carsBean.popupReset

```
public void popupReset() {

    FacesContext context = FacesContext.getCurrentInstance();
    UIInput com1 = (UIInput) context.getViewRoot().findComponent("form:price");
    UIInput com2 = (UIInput) context.getViewRoot().findComponent("form:mage");        
    ...        

    com1.resetValue();
    com1.setValue(editedCar.getPrice());
    com2.resetValue();
    com2.setValue(editedCar.getMileage());
    ...

} 
```

这不是一个很好的解决方案，但到目前为止它对我有用。

# asp.net-mvc-4 - 为什么不能使用 DbContext.Entry(object).State 来更新引用？

> ID：15834496
> 
> 赞同：1
> 
> 时间：2013-04-05T12:52:30.760
> 
> 标签：asp.net-mvc-4, entity-framework-4, dbcontext

基于 Julie Lerman ( [http://msdn.microsoft.com/en-us/data/gg715119](http://msdn.microsoft.com/en-us/data/gg715119) ) 的 EF Code First 教程，我正在使用类似于以下代码片段的内容在 MVC 4 应用程序中更新我的模型：

```
public ActionResult Edit(int id, Person person)
{
    using (var db = new MyDbContext())
    {
        person.Address = db.Addresses.Find(312);

        db.Entry(person).State = EntityState.Modified;
        db.SaveChanges();
    }
} 
```

这会保存我的 Person 对象的所有标量属性，但不会保存对新地址的引用。在调试时，我可以看到我的 DbContext 知道更新的人。调用 SaveChanges() 后，ChangeTracker 拥有具有正确地址和状态 == 未更改的新人员。但是，下次我查看数据库时，我看到的是旧地址而不是新地址...

难道我做错了什么？这种行为是设计使然吗？

提前致谢！

**澄清：**

这个问题的灵感来自一些纯对象数据库（如 db4o 等）的行为，它与 DbContext API（或一般的 EF）的内部工作有关。

通过将语句稍微更改为：

```
using (var db = new MyDbContext())
{
    var p = db.Person.Find(person.Id);
    // Variable p is now a person's proxy...

    db.Entry(p).CurrentValues.SetValues(person);
    // The above statement seems unnecessary, but it is actually required...

    p.Address = db.Addresses.Find(312);

    db.SaveChanges();
} 
```

正如预期的那样，一切都被保存了。

令我困惑的是，为什么我们必须在我们的模型中使用外键关联，正如 Arnold 先生所建议的那样，只是为了能够使用以前的（简单）语法来更新对象的引用及其标量属性？在调用 db.Entry(person) 之后，该人拥有对其他对象的所有正确引用，为什么 EF 完全忽略它们（与许多对象数据库相比）并且只是在调用 SaveChanges() 时更新其标量？

# entity-framework - 在 LINQto EF 查询中访问外键表

> ID：15834501
> 
> 赞同：0
> 
> 时间：2013-04-05T12:53:06.120
> 
> 标签：entity-framework

我的数据库（mySQL）中有一些外键表。为什么这些在 LINQ to EF 中无法访问？例如，我有一个表 shippinglocationscontacts，为什么该表不成为 EF 模型的一部分？如何在 LINQ to EF 中访问这些表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:14:53.513

我敢打赌那`shippinglocationscontacts`是一个连接表。它只包含`shippinglocationId`和`contactId`（或类似名称）。这是一个 EF 功能。它将联结表映射为多对多关联，在本例中为运输地点和联系人。

所以`contact`has a property`shippinglocations`和`shippinglocation`has a property `contacts`。

您不直接操作表格。您将项目添加到集合中（例如`shippinglocation.contacts.Add(contact)`，EF 将在联结表中插入一条记录。

# r - R中的图层图

> ID：15834502
> 
> 赞同：0
> 
> 时间：2013-04-04T23:54:15.833
> 
> 标签：r, data-visualization, lattice

我需要分层散点图和`allEffects plot`. 以下是一些示例数据：

```
library("effects")
x<-c(1,2,6,7,4,3,5)
y<-c(5,6,3,6,9,4,4)
a<-as.factor(c(1,1,1,2,2,2,2))
xyplot(y ~ x|a)
lm.y<-lm(y~x*a)
plot(allEffects(lm.y)) 
```

需要明确的是，我想在情节上`xyplot`分层。`plot(allEfects...)`我会很感激任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T00:38:27.447

我建议使用 ggplot2 包，它应该看起来像这样。

```
ggplot(data, aes(y=y, x=x)) + 
  geom_point(shape = 1) +
  geom_smooth(method="lm", fullrange=T) +
  facet_grid(~a) + 
  theme(aspect.ratio = 1) 
```

它将允许您对图进行分层。

话虽如此 - 这不是一个完整的回应，因为我不确定如何合并您的 allEffects() 信息。其他人可能能够提供更好的反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T07:11:07.373

该包`latticeExtra`提供了几个功能来组合 `trellis`对象：`+.trellis`和`c.trellis`家庭`layer` 。在这里你需要`+.trellis`：

```
library("effects")
library("latticeExtra")

x <- c(1,2,6,7,4,3,5)
y <- c(5,6,3,6,9,4,4)
a <- as.factor(c(1,1,1,2,2,2,2))

pxy <- xyplot(y ~ x|a)

lm.y <- lm(y~x*a)
aef <- allEffects(lm.y) 
```

对象的`plot`方法`efflist`（的结果`allEffects`）存在问题：它只打印`trellis`对象但不返回。诀窍是使用定义为返回对象的对象（对象的组件）的`plot`方法 。您的示例的效果可以通过以下方式提取：`eff``efflist``trellis``aef[[1]]`

```
peff <- plot(aef[[1]]) 
```

最后一步`+.trellis`：

```
peff + pxy 
```

![图层效果](https://i.stack.imgur.com/NPIkh.png)

# java - 对象作为 Play 框架中表单的输入

> ID：15834507
> 
> 赞同：0
> 
> 时间：2013-04-05T12:53:34.673
> 
> 标签：java, forms, playframework-2.0

Play 框架（我使用 2.0.4）的模型和表单的所有示例都使用`String`,`int`或`Long`作为属性。

但是我有一个这样的模型：

```
public class MyModel {

    @Required
    public String name;

    @Required
    public Date birthdate;

    @Required
    public MyClass someObject;    
} 
```

现在`name`我可以简单地`@inputText(...)`在我的表单中使用一个字段。

对于`birthDate`我尝试`@inputDate(...)`在我的表单中使用一个字段，但这只是给了我一个输入字段以及我尝试在输入字段中输入的任何日期格式，它都会被拒绝。我也尝试过传递`'format -> "dd/mm/yyyy"`到这个领域，但没有成功。

我什至不知道如何`MyClass`为表单输入一个对象。

1.  我怎样才能完成这项`@inputDate()`工作？
2.  是否有必要使每个输入都成为 String/Int/Long 并在控制器中接收到这些值来构造`MyClass`它们的对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T02:50:02.327

### 回答问题编号 (1)。

你可以考虑这种技术。该模型可能如下所示：

```
@Required
@Formats.DateTime(pattern="dd/MM/yyyy")
public Date birthdate; 
```

因此，您可以使您的视图变得如此简单：

```
@helper.inputDate(myForm("birthdate"), '_label -> "Birthdate", '_help -> "format dd/MM/yyy") 
```

### 回答问题编号 (2)。

据我所知，必须以 , , 的形式从 HTML 表单`String`提交`Int`值`Long`。因为它们是在屏幕上显示信息的常用格式。此外，HTML 输入值以`String`、'Int'、'Long' 类型表示。

* * *

仅供参考，有一个有用的示例，`computer-database`您可以学习与其他课程相关的**模型**。它位于`<PlayFrameworkInstallDirectory>/samples/java/computer-database`。

# c++ - C++ 双除法和返回

> ID：15834517
> 
> 赞同：2
> 
> 时间：2013-04-05T12:53:51.150
> 
> 标签：c++, floating-point

我知道双打只是近似值。但我很惊讶

```
double f(int x, int y)
{
    return double(x)/y;
} 
```

和

```
double f(int x, int y)
{
    double z = double(x)/y;
    return z;
} 
```

可以返回不同的值。有谁知道为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T13:26:39.350

“为什么”的主要原因是标准允许它（除了我不是 100% 肯定它这样做）。务实的原因是在某些处理器（包括 Intel 32 位处理器）上，浮点寄存器的精度高于`double`. 中间计算是在寄存器中完成的，如果它们适合（并且标准明确允许中间结果具有更高的精度），因此任何给定表达式的结果将取决于编译器如何管理其寄存器以及何时溢出到内存。许多（大多数？）此类处理器的编译器将在寄存器中返回浮点值，以保持额外的精度。（我不确定这是否合法。在分配双精度时，我认为在复制构造双精度时，必须使值适合。返回值是复制构造，所以我认为它应该强制双精度. 无论如何...大多数编译器都没有，所以你必须处理它，不管标准可能会或可能不会对它说什么。）

我认为您可以通过显式转换最终结果来防止这种情况，即：

```
return double( double(x)/y ); 
```

，但我不确定（既不知道标准对它的描述，也不知道编译器实际做了什么）。

请注意，结果是否不同在某种程度上取决于您对它们的处理方式。如果您立即将它们分配给 a `double`，或者将它们传递给另一个需要 a 的函数`double`，那么所发生的只是舍入稍晚（但仍然在相同的值上）。但是，如果您在表达式中使用该值，则所有赌注都将被取消。在您的情况下，即使在舍入之后，`2.0 * f( a, b )`也可能会根据您的实现产生不同的值。`f`最明显的是，`f( a, b ) == f( a, b )`可能返回 false。（我见过一个导致`std::sort`崩溃的情况。使用的比较函数做了一些类似的事情 ，`return lhs.f() < rhs.f();`并且在`true`何时返回`lhs``rhs`是对同一个对象的引用；编译器将它调用的第一个函数的结果溢出到内存中，然后与第二个函数返回的寄存器中的值进行比较。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T13:01:02.137

我能想到这会发生的唯一方法是在 x87 FPU 上使用优化编译器。x87 FPU 使用 long 双精度，因此寄存器中的值可以比堆栈上的双精度变量中的值更精确地保存。至少可以想象，给定上述代码的优化编译器可能会在一种情况下使用寄存器作为返回值，而在另一种情况下使用堆栈。

但我想看一个真实的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:15:00.977

我编写了方法，并做了一个简单的测试，同时调用了它们。这些值只是[作为方面]相等。这里有两个选择：1）你提出了一个错误的问题。[我不这么认为！] 2) 当您将值“存储”在 z 中时，编译器会进行更多隐式转换，从而降低变量的精度。问题也可能是您传递值的方式。事实上，在许多语言中，如果通过赋值得到[EG float = .5]，那么进行除法 [EG ]`.5`会更精确`float z = 1 / 2;`

# sql - 生产 5 个月前的 where 子句

> ID：15834519
> 
> 赞同：-1
> 
> 时间：2013-04-05T12:53:53.023
> 
> 标签：sql, sql-server, sql-server-2008

我在这一行遇到了这个 case 表达式的问题

```
DATEPART(yyyy, DATEADD(mm, -5, getdate())) 
```

如果我删除这一行，它可以正常工作，但如果我把它排除在外，它会从每个 12 月选择记录，而不仅仅是像我想要的那样从 2012 年 12 月开始。

我到处搜索，我无法弄清楚。

```
Select C.CustId ,
Sum(Case DATEPART(mm, I.InvoiceDate)
When DATEPART(mm, DATEADD(mm, -5, getdate())) and
     DATEPART(yyyy, DATEADD(mm, -5, getdate()))
  Then Ia.Amount 
  Else 0 End) As 'Total0'
from Invoice I 
inner join InvoiceAmtSummary Ia  on I.GUIDInvoice=Ia.GUIDInvoice
inner join Customer C on  C.GUIDCustomer=I.GUIDCustomer
group by C.CustId 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:03:07.797

我想你可能想要

```
SELECT
            C.CustId,
            SUM
            (
                CASE 
                    WHEN
      DATEPART(mm, I.InvoiceDate) = DATEPART(mm, DATEADD(mm, -5, getdate()))
  AND
      DATEPART(yyyy, I.InvoiceDate) = DATEPART(yyyy, DATEADD(mm, -5, getdate()))
                        THEN Ia.Amount
                    ELSE
                        0
                END
            ) [Total0]
    FROM 
            Invoice I 
        JOIN
            InvoiceAmtSummary Ia  
                ON I.GUIDInvoice = Ia.GUIDInvoice
        JOIN
            Customer C 
                ON  C.GUIDCustomer = I.GUIDCustomer
    GROUP BY
            C.CustId 
```

* * *

或者，更明智的

```
DECLARE @TargetDate DateTime;
DECLARE @TargetYear Int;
DECLARE @TargetMonth Month;

SET @TagetDate = DATEADD(mm, -5, getdate()));
SET @TargetYear = YEAR(@TargetDate);
SET @TargetMonth = MONTH(@TargetDate);

SELECT
            C.CustId,
            SUM(COALESCE(Ia.Amount, 0))
     FROM
            Customer C
         LEFT JOIN
            ( 
            SELECT
                         MONTH(I.InvoiceDate) Month,
                         YEAR(I.InvoiceYear) Year,
                         I.GUIDInvoice,
                         I.GUIDCustomer
                FROM
                         Invoice I
            ) S
                ON S.GUIDCustomer = C.GUIDCustomer
         LEFT JOIN
            InvoiceAmtSummary Ia
                ON Ia.GUIDInvoice = S.GUIDInvoice
     WHERE
             S.Year = @TargetYear
         AND
             S.Month = @TargetMonth
     GROUP BY
             C.CustID; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:18:32.753

呃，为什么不：

```
WHERE InvoiceDate >= DATEADD(MONTH, DATEDIFF(MONTH,0,GETDATE())-4, 0)
  AND InvoiceDate <  DATEADD(MONTH, DATEDIFF(MONTH,0,GETDATE())-3, 0) 
```

最终评估（今天，2013 年 4 月 5 日）为：

```
WHERE InvoiceDate >= '2012-12-01'
  AND InvoiceDate <  '2013-01-01' 
```

放入您的查询：

```
SELECT C.CustId,
  [Total0] = SUM(CASE 
    WHEN InvoiceDate >= DATEADD(MONTH, DATEDIFF(MONTH,0,GETDATE())-4, 0)
     AND InvoiceDate <  DATEADD(MONTH, DATEDIFF(MONTH,0,GETDATE())-3, 0)
    THEN Ia.Amount ELSE 0 END
  )
FROM dbo.Invoice AS I 
INNER JOIN dbo.InvoiceAmtSummary AS Ia 
   ON I.GUIDInvoice = Ia.GUIDInvoice
INNER JOIN dbo.Customer AS C 
   ON C.GUIDCustomer = I.GUIDCustomer
GROUP BY C.CustId; 
```

尽管您可能希望将其放在`WHERE`子句中，除非您想包括当月没有销售的客户（似乎将他们排除在外是合乎逻辑的，因为您已经排除了从未有过销售的客户发票）。例如

```
SELECT C.CustId, Total0 = SUM(Ia.Amount)
FROM dbo.Invoice AS I
INNER JOIN dbo.InvoiceAmtSummary AS Ia 
   ON I.GUIDInvoice = Ia.GUIDInvoice
INNER JOIN dbo.Customer AS C 
   ON C.GUIDCustomer = I.GUIDCustomer
   WHERE InvoiceDate >= DATEADD(MONTH, DATEDIFF(MONTH,0,GETDATE())-4, 0)
     AND InvoiceDate <  DATEADD(MONTH, DATEDIFF(MONTH,0,GETDATE())-3, 0)
GROUP BY C.CustId; 
```

无论如何，现在您实际上可以使用 index on`InvoiceDate`而不是这种`DATEPART(MONTH`不可分割的 hack。

还有一些其他的提示：

1.  说出你的意思。`yyyy`当您可以输入`YEAR`并且更明确时，为什么要输入？要了解为什么这很重要，请尝试猜测这将返回什么，然后尝试找出为什么它没有按照您的想法执行：

    ```
    SELECT DATEPART(y, GETDATE()); 
    ```

2.  你的语法不正确。你不能说`CASE WHEN (some boolean expression) THEN`- 你必须将它与某物进行比较。`CASE`不是布尔构造，它是返回单个结果的表达式。所以你必须评估它，比如`CASE WHEN (expression) = 1 THEN`......

3.  请不要使用`AS 'alias'`带单引号的语法。[如果需要分隔符（在这种情况下不需要），请使用`[square brackets]`](https://sqlblog.org/2012/01/23/bad-habits-to-kick-using-as-instead-of-for-column-aliases). 某些形式的别名单引号定界符已被弃用，它们使代码更难阅读，因为它们看起来像字符串文字。

4.  请阅读以下有关日期范围查询的文章：

*   [BETWEEN 和魔鬼有什么共同点？](https://sqlblog.org/2011/10/19/what-do-between-and-the-devil-have-in-common)

*   [要改掉的坏习惯：错误处理日期/范围查询](https://sqlblog.org/2009/10/16/bad-habits-to-kick-mis-handling-date-range-queries)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:01:56.203

要仅选择 2012 年 12 月的记录，请尝试

```
select ... FROM ... where YEAR(your_timestamp) = 2012 AND MONTH(your_timestamp) = 12 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T13:38:09.393

试试这个。它现在为您提供本月的动态所有记录 - 5

```
select ... FROM ... where YEAR(your_timestamp) = YEAR(DATE_SUB(NOW(), INTERVAL 5 MONTH)) AND MONTH(your_timestamp) = Month(DATE_SUB(NOW(), INTERVAL 5 MONTH)) 
```

# java - 如何获取文件在 Windows Media Player 中播放的状态？

> ID：15834521
> 
> 赞同：0
> 
> 时间：2013-04-05T12:54:01.730
> 
> 标签：java, media, windows-media-player

我正在通过 java-code 做关于 Mini-Lyrics 的项目，所以，我想**在 Window Media Player 上运行**时获取 mp3 文件的信息，例如：关于信息开始时间、运行时间、结束时间、获取艺术家、专辑，歌手...请帮助我，感谢您回答我的问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T12:58:38.710

Java 没有内置的 API。您可以使用本机，即在 C# 中执行它并从 Java 中调用它。

或选择 JIntelliType，它可以帮助您调用 Windows 原生命令。[https://code.google.com/p/jintellitype/](https://code.google.com/p/jintellitype/)

# php - 如何在 Jquery 对话框中调用函数？

> ID：15834525
> 
> 赞同：1
> 
> 时间：2013-04-05T12:54:12.727
> 
> 标签：php, javascript, jquery

我一直在尝试在 jquery 对话框中调用 javascript 函数，我已经成功了。当我通过将数据从列表框传递到调用数据库的 php 页面来在对话框中创建动态表单时，就会出现复杂情况。我首先尝试在选择第一个下拉列表中的值时禁用第二个下拉列表。其次，我想验证一个文本框以查看用户名是否存在。

我创建了一个 JSbin [http://jsbin.com/etuhur/4/edit](http://jsbin.com/etuhur/4/edit)但我不确定如何复制 PHP 部分。当前的 JSbin 正在针对第一个下拉列表禁用第二个下拉列表。当表单由我传递到对话框的 php 页面创建时，我无法复制此功能。

有没有人有任何提示，指示或示例？过去两周我一直试图让它工作，但无济于事:(

编辑：我认为这与 DOM 无法识别由另一个页面创建的 PHP 表单数据有关，有人知道我将如何将它注册到 DOM 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:06:14.183

在选择下拉列表中，您要添加 onclick 调用。然后，您想让 javascript 中的所有内容成为您从 onclick 调用的函数。更新的 JSbin 的答案在这里：http: [//jsbin.com/etuhur/13/edit](http://jsbin.com/etuhur/13/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:57:56.800

委托您的`change`活动`on`

```
 $(document).on('change','select',function(){
   ....
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:50:59.623

您可以在对话框窗口打开后尝试加载表单功能吗

**编辑** 我已经放置了 $(this).dialog('close'); 以上返回假

```
$( "#dialogbox" ).dialog({

        autoOpen: false,
        modal: true,
        width: 'auto',
        show: {
            effect: "blind",
            duration: 1000
        },
        hide: {
            effect: "explode",
            duration: 1000
        },

        buttons: {
            //This function handles passing in the form data generated by getdialogbox.php 
            'Submit' : function(){
                $.ajax({
                    type: "POST",
                    url: "include/insertToDB.php",
                    data: $("#htmlform").serialize(),

                    success: function(){
                        $("#htmlform").submit();
                    }
                });
                $(this).dialog('close');
                return false;

            }
        },
        open: function( event, ui ) {    
            var $inputs = $('select.titans');
            var $controller = $('select.controller');
            $('select').change(function(){
                if($controller.val() !== ''){
                    $inputs.prop('disabled', $(this).val() !== '');
                    $inputs.val('');
               }else            {
                    $inputs.prop('disabled',false); 
               }
           });
        }

    }); 
```

# sql - 如何为 SQL Server 2008 Express 制作 .bak 文件

> ID：15834536
> 
> 赞同：0
> 
> 时间：2013-04-05T12:54:41.180
> 
> 标签：sql, sql-server-2008-express

如何`.bak`在 SQL Server 2008 中为选定的数据库表创建文件？

我有一个`TESTDB`超过 15 个表的数据库。我只想`.bak`为 5 个选定的表制作文件。

那么我该如何创建呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T13:03:11.053

通过制作`.bak`文件字面意思是备份数据库并将其恢复。在您的情况下，您不必在此处执行此操作。

`DTS`会为你解决的。意味着您需要使用`Export Wizard`. 只需按照以下步骤操作。

第 1 步：右键单击数据库
第 2 步：选择任务
第 3 步：选择导出数据
第 4 步：输入数据源详细信息
第 5 步：输入目标详细信息
第 6 步：选择要重新创建的表。

而已。

# c++ - 使用 reinterpret_cast 将一维动态数组转换为 IplImage 的 imageData 数据类型

> ID：15834537
> 
> 赞同：0
> 
> 时间：2013-04-05T12:54:42.517
> 
> 标签：c++, opencv, casting

我使用此代码片段将 IplImage 数据转换为动态数组。

`unsigned char *data = reinterpret_cast <unsigned char*> (image->imageData);`

我该如何做相反的事情？

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:05:46.407

无符号字符 *入口点；...图像->图像数据=入口点；

确保更新：image->widthStep、image->width、image->height、image->nChannels 等。

# android - Android 应用内订阅到期检查和测试

> ID：15834541
> 
> 赞同：3
> 
> 时间：2013-04-05T12:54:59.110
> 
> 标签：android, google-play, android-billing

我有一个有订阅的 android 应用程序。我想在订阅到期时做一些 ui 更改。

```
if( subscription expires )
   //do something 
```

Q1）我如何在代码中处理上述内容？我正在为应用内使用 TrivialDrive 示例应用程序类。我应该在哪里处理这个签入代码？

Q2) 保留关键字不适用于订阅测试。我必须使用实际信用卡来测试订阅吗？我的应用程序未发布，产品已激活且 apk 已签名。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-16T12:01:09.317

如果用户或您的应用程序的订阅结束，您将不会收到通知。相反，订阅购买将不再从`getPurchases`向 Google 发出的请求返回到自有产品列表中。如“用户计费”部分下的[文档中所述：](http://developer.android.com/google/play/billing/billing_subscriptions.html)

> 使用应用内计费版本 3，当您调用 getPurchases 时，将不再返回失败或过期的订阅。

如果您使用 TrivialDrive 示例中的 IabHelper，这意味着在您返回`mPurchaseMap`的对象中将不包含过期订阅的产品。`Inventory``IabHelper.QueryInventoryFinishedListener`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T17:24:33.503

我已经回答了我的第一个问题。我正在使用 AndroidBillingLibrary 的 Transaction.java 来获取产品的过期状态。

# selenium-webdriver - 使用 Java for Selenium Webdriver 从一个类调用一个方法到另一个类

> ID：15834543
> 
> 赞同：1
> 
> 时间：2013-04-05T12:55:05.220
> 
> 标签：selenium-webdriver, testng

我是 Selenium 和 Java 的新手。关于我的代码的基本思想是，我在我的 java 项目下创建了两个类，即第一个和第二个。我的第一个类包含所有方法（打开浏览器、登录、注销），我的第二个类包含从第一个继承所有方法的主程序。

我创建了一个 excel，说明应该根据 excel 表运行哪个测试用例（登录、注销）。测试用例将根据 Excel 表中“执行”列下的“Y”或“N”执行

当我尝试运行我的第二节课时，它显示了一个错误。请在下面找到我的代码以及错误和 excel 表作为测试用例应该运行的图像。

**这是我的第二课（主程序）**

```
package asdf;

import java.io.File;

import jxl.Cell;
import jxl.Sheet;
import jxl.Workbook;

import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.testng.SkipException;
import org.testng.annotations.DataProvider;
import org.testng.annotations.Test;

public class second {                   

    @DataProvider(name = "DP1")
    public Object[][] createData1() throws Exception {
        Object[][]retObjArr=getTableArray("Resource\\Testdata.xls","credentials","TD");
        return(retObjArr);
    }

    @Test(dataProvider = "DP1")
    public void execution(String TCname, String TCDescription, String Execute) {
        first r=new first();
        if(Execute.equalsIgnoreCase("Y")) { 
            if(TCname.equalsIgnoreCase("TC01")) {
                r.login();
            } else if(TCname.equalsIgnoreCase("TC02")) {
                r.login();
            r.logout();
        }
        } else {
        throw new SkipException("Skipping this test case: "+TCname);
        }
    }       

    public String[][] getTableArray(String xlFilePath, String sheetName, String tableName) throws Exception {
        String[][] tabArray=null;
        Workbook workbook = Workbook.getWorkbook(new File(xlFilePath));
        Sheet sheet = workbook.getSheet(sheetName);
        int startRow,startCol, endRow, endCol, ci, cj;
        Cell tableStart=sheet.findCell(tableName);
        startRow = tableStart.getRow();
        startCol = tableStart.getColumn();
        Cell tableEnd = sheet.findCell(tableName, startCol+1, startRow+1, 100, 64000,  false);
        endRow = tableEnd.getRow();
        endCol=tableEnd.getColumn();

        System.out.println("startRow="+startRow+",  endRow="+endRow+", " + "startCol="+startCol+", endCol="+endCol);
        tabArray = new String[endRow-startRow-1][endCol-startCol-1];
        ci=0;

        for (int i=startRow+1;i<endRow;i++,ci++) {
            cj=0;
            for (int j=startCol+1;j<endCol;j++,cj++) {
                tabArray[ci][cj]=sheet.getCell(j,i).getContents();
            }
        }
        return(tabArray);
    }
}        

**This is my First class (which contains all the methods and should return these methods to Second class)** 
```

```
package asdf;

import java.io.File;    
import org.openqa.selenium.WebDriver;    
import org.openqa.selenium.By;    
import org.openqa.selenium.WebDriver;    
import org.openqa.selenium.firefox.FirefoxDriver;    
import org.openqa.selenium.ie.InternetExplorerDriver;    
import org.openqa.selenium.remote.DesiredCapabilities;
import org.testng.annotations.BeforeMethod;    
import org.testng.annotations.Test;

public class first {

    public static WebDriver driver;
    public String baseUrl;
    static{
     driver =new InternetExplorerDriver();
     String baseUrl = "http://newtours.demoaut.com/";

    }

public void login()

{

    driver.get(baseUrl);

    driver.findElement(By.name("Email")).sendKeys("mercury");

    driver.findElement(By.name("Passwd")).sendKeys("mercury");

    driver.findElement(By.name("signIn")).click();
    }

public void logout()

{

    driver.findElement(By.xpath(".//*[@id='gb_71']"));

}

} 
```

**它抛出的异常如下**

```
> [TestNG] Running:
  C:\Users\SRI\AppData\Local\Temp\testng-eclipse--2072559575\testng-customsuite.xml

startRow=0, endRow=3, startCol=0, endCol=4
FAILED: execution("TC01", "login", "Y")
java.lang.ExceptionInInitializerError
    at asdf.second.execution(second.java:28)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
    at org.testng.internal.Invoker.invokeMethod(Invoker.java:714)
    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:128)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
    at org.testng.TestRunner.privateRun(TestRunner.java:767)
    at org.testng.TestRunner.run(TestRunner.java:617)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1203)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1128)
    at org.testng.TestNG.run(TestNG.java:1036)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175)
Caused by: java.lang.IllegalStateException: The path to the driver executable must be set by the webdriver.ie.driver system property; for more information, see http://code.google.com/p/selenium/wiki/InternetExplorerDriver. The latest version can be downloaded from http://code.google.com/p/selenium/downloads/list
    at com.google.common.base.Preconditions.checkState(Preconditions.java:176)
    at org.openqa.selenium.remote.service.DriverService.findExecutable(DriverService.java:105)
    at org.openqa.selenium.ie.InternetExplorerDriverService.access$1(InternetExplorerDriverService.java:1)
    at org.openqa.selenium.ie.InternetExplorerDriverService$Builder.build(InternetExplorerDriverService.java:177)
    at org.openqa.selenium.ie.InternetExplorerDriver.setupService(InternetExplorerDriver.java:111)
    at org.openqa.selenium.ie.InternetExplorerDriver.setup(InternetExplorerDriver.java:104)
    at org.openqa.selenium.ie.InternetExplorerDriver.<init>(InternetExplorerDriver.java:51)
    at asdf.first.<clinit>(first.java:19)
    ... 25 more

FAILED: execution("TC02", "logout", "N")
java.lang.NoClassDefFoundError: Could not initialize class asdf.first
    at asdf.second.execution(second.java:28)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
    at org.testng.internal.Invoker.invokeMethod(Invoker.java:714)
    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:128)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
    at org.testng.TestRunner.privateRun(TestRunner.java:767)
    at org.testng.TestRunner.run(TestRunner.java:617)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1203)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1128)
    at org.testng.TestNG.run(TestNG.java:1036)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175)

===============================================
    Default test
    Tests run: 2, Failures: 2, Skips: 0
===============================================

===============================================
Default suite
Total tests run: 2, Failures: 2, Skips: 0
===============================================

[TestNG] Time taken by [FailedReporter passed=0 failed=0 skipped=0]: 0 ms
[TestNG] Time taken by org.testng.reporters.SuiteHTMLReporter@9fa12f: 16 ms
[TestNG] Time taken by org.testng.reporters.JUnitReportReporter@1cc0a0f: 0 ms
[TestNG] Time taken by org.testng.reporters.XMLReporter@e43b44: 0 ms
[TestNG] Time taken by org.testng.reporters.EmailableReporter2@109062e: 0 ms
[TestNG] Time taken by org.testng.reporters.jq.Main@1d7e4d6: 31 ms 
```

恳请您对此提供帮助。

Excel工作表的屏幕截图：

```
TD    TCname        TCDescription          Execute  

       TC01                login                 Y  

       TC02                logout                N  

                                                               TD 
```

**添加 IE 路径后的新错误报告**

```
[TestNG] Running:
  C:\Users\SRI\AppData\Local\Temp\testng-eclipse--824275806\testng-customsuite.xml

startRow=0, endRow=3, startCol=0, endCol=4
FAILED: execution("TC01", "login", "Y")
java.lang.ExceptionInInitializerError
    at asdf.second.execution(second.java:28)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
    at org.testng.internal.Invoker.invokeMethod(Invoker.java:714)
    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:128)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
    at org.testng.TestRunner.privateRun(TestRunner.java:767)
    at org.testng.TestRunner.run(TestRunner.java:617)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1203)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1128)
    at org.testng.TestNG.run(TestNG.java:1036)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175)
Caused by: java.lang.IllegalStateException: The driver executable does not exist: C:\Selenium\iexploredriver.exe
    at com.google.common.base.Preconditions.checkState(Preconditions.java:176)
    at org.openqa.selenium.remote.service.DriverService.checkExecutable(DriverService.java:117)
    at org.openqa.selenium.remote.service.DriverService.findExecutable(DriverService.java:112)
    at org.openqa.selenium.ie.InternetExplorerDriverService.access$1(InternetExplorerDriverService.java:1)
    at org.openqa.selenium.ie.InternetExplorerDriverService$Builder.build(InternetExplorerDriverService.java:177)
    at org.openqa.selenium.ie.InternetExplorerDriver.setupService(InternetExplorerDriver.java:111)
    at org.openqa.selenium.ie.InternetExplorerDriver.setup(InternetExplorerDriver.java:104)
    at org.openqa.selenium.ie.InternetExplorerDriver.<init>(InternetExplorerDriver.java:51)
    at asdf.first.<clinit>(first.java:21)
    ... 25 more

FAILED: execution("TC02", "logout", "N")
java.lang.NoClassDefFoundError: Could not initialize class asdf.first
    at asdf.second.execution(second.java:28)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:80)
    at org.testng.internal.Invoker.invokeMethod(Invoker.java:714)
    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:901)
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1231)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:128)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:111)
    at org.testng.TestRunner.privateRun(TestRunner.java:767)
    at org.testng.TestRunner.run(TestRunner.java:617)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:334)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:329)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:291)
    at org.testng.SuiteRunner.run(SuiteRunner.java:240)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1203)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1128)
    at org.testng.TestNG.run(TestNG.java:1036)
    at org.testng.remote.RemoteTestNG.run(RemoteTestNG.java:111)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:204)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:175)

===============================================
    Default test
    Tests run: 2, Failures: 2, Skips: 0
===============================================

===============================================
Default suite
Total tests run: 2, Failures: 2, Skips: 0
===============================================

[TestNG] Time taken by [FailedReporter passed=0 failed=0 skipped=0]: 15 ms
[TestNG] Time taken by org.testng.reporters.SuiteHTMLReporter@9fa12f: 78 ms
[TestNG] Time taken by org.testng.reporters.JUnitReportReporter@1cc0a0f: 0 ms
[TestNG] Time taken by org.testng.reporters.XMLReporter@e43b44: 47 ms
[TestNG] Time taken by org.testng.reporters.EmailableReporter2@109062e: 0 ms
[TestNG] Time taken by org.testng.reporters.jq.Main@1d7e4d6: 110 ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:42:44.617

您缺少可执行 IE 驱动程序的路径。尝试这个：

```
File file = new File("C:/Selenium/iexploredriver.exe"); // your location of driver
System.setProperty("webdriver.ie.driver", file.getAbsolutePath());
WebDriver driver = new InternetExplorerDriver(); 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-16T14:03:39.817

试试下面的代码，也许能解决问题 -

```
public class first {

{

    System.setProperty("webdriver.ie.driver", "D:\\Pradeep\\pradeep\\IEDriverServer.exe");
         // your location of driver

}

WebDriver driver = new InternetExplorerDriver();

public String baseUrl = "http://newtours.demoaut.com/"; 
```

......然后你的代码

```
@test ... 
```

# android - 在android中验证“from date”和“to date”

> ID：15834544
> 
> 赞同：5
> 
> 时间：2013-04-05T12:55:06.047
> 
> 标签：android, validation, android-datepicker

我是一个应用程序，其中用户必须选择两个日期，即**从日期**和**到日期**。这两个字段都不应接受小于当前日期的任何日期。我已经浏览了本网站上的一些帖子，并通过使用单个日期选择器对话框实现了此功能和单个 ondatesetListener。

我的问题是我无法验证**迄今为止**应始终大于或等于起始**日期**的条件。请帮助我。我无法捕获起始**日期**，因为活动日期被**活动结束日期覆盖了**谢谢Advance.Following 是代码：

```
public class Leave_form extends Activity 
{       
    private static EditText tvDislpayResult;
    private Button startPickDate;
    private Button endPickDate;
    private Calendar startDate;
    private Calendar endDate;
    //private EditText startDateDisplay;
    //private EditText endDateDisplay;
    static final int DATE_DIALOG_ID = 0;
    private TextView startDateDisplay;
    private TextView endDateDisplay;
    private TextView activeDateDisplay;
    private Calendar activeDate;
    private Calendar currentDate;
    private Calendar fromDate;

    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_leave_form);

        /*  capture our View elements for the start date function   */
        startDateDisplay = (EditText) findViewById(R.id.e_from_date);
        startPickDate = (Button) findViewById(R.id.Set_date1);

        /*get tday date  */   

        currentDate=Calendar.getInstance();
        Log.d("currentDate ",""+(currentDate.get(Calendar.DAY_OF_MONTH))+(currentDate.get(Calendar.MONTH)+1)+(currentDate.get(Calendar.YEAR)));

        /* get the current date */
        startDate = Calendar.getInstance();
        Log.d("startdate ",""+(startDate.get(Calendar.DAY_OF_MONTH))+(startDate.get(Calendar.MONTH)+1)+(startDate.get(Calendar.YEAR)));

        /* add a click listener to the button   */
        startPickDate.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v) 
            {
                showDateDialog(startDateDisplay, startDate);
                Log.d("startDate-on click ",""+(startDate.get(Calendar.DAY_OF_MONTH))+(startDate.get(Calendar.MONTH)+1)+(startDate.get(Calendar.YEAR)));

            }
        });

        /* capture our View elements for the end date function */
        endDateDisplay = (EditText) findViewById(R.id.e_to_date);
        endPickDate = (Button) findViewById(R.id.Set_date2);

        /* get the current date */
        endDate = Calendar.getInstance();
        Log.d("endDate ",""+(endDate.get(Calendar.DAY_OF_MONTH))+(endDate.get(Calendar.MONTH)+1)+(endDate.get(Calendar.YEAR)));

        /* add a click listener to the button   */
        endPickDate.setOnClickListener(new View.OnClickListener()
        {
            public void onClick(View v)
            {
                showDateDialog(endDateDisplay, endDate);
                Log.d("endDate -on click",""+(endDate.get(Calendar.DAY_OF_MONTH))+(endDate.get(Calendar.MONTH)+1)+(endDate.get(Calendar.YEAR)));
            }
        });

        /* display the current date (this method is below)  */
       // updateDisplay(startDateDisplay, startDate);
       // updateDisplay(endDateDisplay, endDate);
    }

    private void updateDisplay(TextView dateDisplay, Calendar date) 
    {
        dateDisplay.setText(
                new StringBuilder()
                    // Month is 0 based so add 1
                    .append(date.get(Calendar.DAY_OF_MONTH) ).append("-")
                    .append(date.get(Calendar.MONTH)+1).append("-")
                    .append(date.get(Calendar.YEAR)).append(" "));

        Log.d("msg","date:"+(date.get(Calendar.DAY_OF_MONTH))+(date.get(Calendar.MONTH)+1)+(date.get(Calendar.YEAR)));

        fromDate=date;
    }

    public void showDateDialog(TextView dateDisplay, Calendar date)
    {
        Log.d("SDD", dateDisplay.getText().toString());
        Log.d("startdate ",""+(currentDate.get(Calendar.DAY_OF_MONTH))+(currentDate.get(Calendar.MONTH)+1)+(currentDate.get(Calendar.YEAR)));
       activeDateDisplay = dateDisplay;
        activeDate = date;
        showDialog(DATE_DIALOG_ID);
    }

    private OnDateSetListener dateSetListener = new OnDateSetListener()
    {
        @SuppressWarnings("deprecation")
        @Override
        public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) {
            activeDate.set(Calendar.YEAR, year);
            activeDate.set(Calendar.MONTH, monthOfYear);
            activeDate.set(Calendar.DAY_OF_MONTH, dayOfMonth);
            Log.d("activeDate-on dateset ",""+(activeDate.get(Calendar.DAY_OF_MONTH))+(activeDate.get(Calendar.MONTH)+1)+(activeDate.get(Calendar.YEAR)));

            if(currentDate.after(activeDate)|(currentDate.equals(activeDate)))
            {
                Toast toast=Toast.makeText(Leave_form.this, "Please select a valid date", Toast.LENGTH_LONG);
                toast.setGravity(Gravity.CENTER, 0, 0);
                toast.show();

            }
            else
            {
                if((currentDate.after(activeDate)|(currentDate.equals(activeDate)))&&(startDateDisplay.getText().toString()!=null))
                {
                    Log.d("startDate-on click ",""+(startDate.get(Calendar.DAY_OF_MONTH))+(startDate.get(Calendar.MONTH)+1)+(startDate.get(Calendar.YEAR)));
                    if(startDate.before(activeDate))
                    {
                        updateDisplay(activeDateDisplay, activeDate);
                    }

                    else
                    {
                        Toast.makeText(getApplicationContext(), "enter valid date", Toast.LENGTH_SHORT).show();
                        /*AlertDialog alertDialog=new AlertDialog.Builder(Leave_form.this).create();

                        alertDialog.setMessage("Choose a valid date");

                        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {

                            @Override
                            public void onClick(DialogInterface dialog, int which) {
                                // TODO Auto-generated method stub

                            }
                        });
                        alertDialog.show();*/
                    }
                }
                else
                {
                    updateDisplay(activeDateDisplay, activeDate);
                }

           }

            unregisterDateDisplay();
        }
    };

    private void unregisterDateDisplay() 
    {
        Log.d("startdate ",""+(currentDate.get(Calendar.DAY_OF_MONTH))+(currentDate.get(Calendar.MONTH)+1)+(currentDate.get(Calendar.YEAR)));
        Log.d("from date:","-"+activeDate.DAY_OF_MONTH+activeDate.MONTH+activeDate.YEAR);
        activeDateDisplay = null;
        activeDate = null;
    }

    @Override
    protected Dialog onCreateDialog(int id) {
        switch (id) {

            case DATE_DIALOG_ID:
                Log.d("fromdate","msg");
                Log.d("id",""+DATE_DIALOG_ID);
                return new DatePickerDialog(this, dateSetListener, activeDate.get(Calendar.YEAR), activeDate.get(Calendar.MONTH), activeDate.get(Calendar.DAY_OF_MONTH));
        }
        return null;
    }

    @Override
    protected void onPrepareDialog(int id, Dialog dialog) {
        super.onPrepareDialog(id, dialog);
        switch (id) {
            case DATE_DIALOG_ID:
                Log.d("id",""+DATE_DIALOG_ID);
                ((DatePickerDialog) dialog).updateDate(activeDate.get(Calendar.YEAR), activeDate.get(Calendar.MONTH), activeDate.get(Calendar.DAY_OF_MONTH));
                break;
        }
    }

    public void leave(View view)
    {
        Intent intent1=new Intent(this,Rough.class);
        setContentView(R.layout.activity_rough);
        startActivity(intent1);
    }
    public void logout(View view)
    {
        Intent intent2=new Intent (this,MainActivity.class);
        setContentView(R.layout.activity_main);
        startActivity(intent2);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:21:28.517

最好更改此类代码：

```
if((currentDate.after(activeDate)|(currentDate.equals(activeDate)))&&(startDateDisplay.getText().toString()!=null)) 
```

多个 if 块，如：

```
if((currentDate.after(activeDate)||(currentDate.equals(activeDate))
    if(!startDateDisplay.getText().toString().equals(null)) 
```

仔细注意差异！

也看看这个**[答案here](https://stackoverflow.com/a/6611300/1221203)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T08:51:34.993

**解决了..**

感谢@Amit 的回答。我的问题得到了解决，它就像一个魅力。我只更改了 OnDateSetListener 段中的代码。以下是代码：

```
 public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth)
    {

        activeDate.set(Calendar.YEAR, year);
        activeDate.set(Calendar.MONTH, monthOfYear);
        activeDate.set(Calendar.DAY_OF_MONTH, dayOfMonth);

        Date fromDate,toDate;
        try
            {

                //checks if the date chosen by the user is greater than the current system date.Doesnt allow to choose past date
                if(currentDate.before(activeDate)||currentDate.equals(activeDate))
                {

                    //checks if the from date edit text is empty or not
                    if(startDateDisplay.getText().toString().isEmpty())
                    {

                        updateDisplay(activeDateDisplay, activeDate);

                    }
                    else
                    {

                        //converts the date in the from date edittextbox and active date to dd-mm-yyyy format
                        SimpleDateFormat sdf=new SimpleDateFormat("dd-MM-yyyy");

                        fromDate=sdf.parse(startDateDisplay.getText().toString());
                        Log.d("fromdate",""+fromDate);

                        String temp=(activeDate.get(Calendar.DAY_OF_MONTH))+"-"+(activeDate.get(Calendar.MONTH)+1)+"-"+(activeDate.get(Calendar.YEAR));
                        toDate=sdf.parse(temp);
                        Log.d("todate",""+toDate);

                        //checks if todate is greater or equal to from date 
                        if ((toDate.after(fromDate))||(toDate.equals(fromDate)))
                        {
                            updateDisplay(activeDateDisplay, activeDate);

                        }
                        else
                        {
                            Toast toast=new Toast(getBaseContext());
                            toast=Toast.makeText(Leave_form.this, "To date should be greater than From date", Toast.LENGTH_SHORT);
                            toast.setGravity(Gravity.CENTER, 0, 0);
                            toast.show();
                        }
                    }
                }

                else
                {
                    Toast toast=new Toast(getBaseContext());
                    toast=Toast.makeText(Leave_form.this, "Please enter a valid date", Toast.LENGTH_LONG);
                    toast.setGravity(Gravity.CENTER, 0, 0);
                    toast.show();
                }
            }
        catch(Exception e)
        {
            Log.e("excepion",e.getMessage().toString());
        }
        unregisterDateDisplay();
    }
}; 
```

谢谢大家的回答。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-26T05:50:25.320

```
package com.example.pickerdate;

import java.util.Calendar;

import android.app.Activity;
import android.app.DatePickerDialog;
import android.app.Dialog;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.DatePicker;
import android.widget.DatePicker.OnDateChangedListener;
import android.widget.TextView;
import android.widget.Toast;

public class MainActivity extends Activity {

    private TextView mDateDisplay;
    private int mYear;
    private int year1;
    private int mMonth;
    private int mDay;
    private int month;
    private int day;
    static final int DATE_DIALOG_ID = 1;
    Button pickDate;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mDateDisplay = (TextView) findViewById(R.id.dateDisplay);
        pickDate = (Button) findViewById(R.id.pickDate);
        pickDate.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                System.out.println("hello3");
                showDialog(DATE_DIALOG_ID);

            }
        });

        System.out.println("hello1");
        final Calendar c = Calendar.getInstance();
        mYear = c.get(Calendar.YEAR);
        mMonth = c.get(Calendar.MONTH);
        mDay = c.get(Calendar.DAY_OF_MONTH);
        updateDisplay();
        year1 = mYear;
        month = mMonth;
        day = mDay;
    }

    @Override
    protected Dialog onCreateDialog(int id) {
        DatePickerDialog _date = null;
        switch (id) {

        case DATE_DIALOG_ID:
            _date = new DatePickerDialog(this, mDateSetListener, mYear, mMonth,
                    mDay) {
                @Override
                public void onDateChanged(DatePicker view, int year,
                        int monthOfYear, int dayOfMonth) {
                    System.out.println("----------onDateChanged()-----------"
                            + mYear + "--" + year);
                    System.out.println("----------onDateChanged()-----------"
                            + mMonth + "--" + monthOfYear);
                    System.out.println("----------onDateChanged()-----------"
                            + mDay + "--" + dayOfMonth);

                    /*
                     * These lines of commented code used for only setting the
                     * maximum date on Date Picker..
                     * 
                     * if (year > mYear && year) view.updateDate(mYear, mMonth,
                     * mDay);
                     * 
                     * if (monthOfYear > mMonth && year == mYear )
                     * view.updateDate(mYear, mMonth, mDay);
                     * 
                     * if (dayOfMonth > mDay && year == mYear && monthOfYear ==
                     * mMonth) view.updateDate(mYear, mMonth, mDay);
                     */

                    // these below lines of code used for setting the maximum as
                    // well as minimum dates on Date Picker Dialog..

                    if ((mYear > year)
                            || ((mMonth > monthOfYear) && (mYear == year))
                            || ((mDay > dayOfMonth) && (mYear == year) && (mMonth == monthOfYear))) {
                        view.updateDate(year1, month, day);

                    }

                }
            };

        }
        System.out.println("hello5");
        return _date;
    }

    protected void onPrepareDialog(int id, Dialog dialog) {
        switch (id) {

        case DATE_DIALOG_ID:
            System.out.println("hello6");

            ((DatePickerDialog) dialog).updateDate(mYear, mMonth, mDay);
            break;
        }
    }

    private void updateDisplay() {
        System.out.println("hello2");
        mDateDisplay.setText(new StringBuilder()
                // Month is 0 based so add 1
                .append(mMonth + 1).append("-").append(mDay).append("-")
                .append(mYear).append(" "));
    }

    private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {

        public void onDateSet(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {
            System.out.println("hello7");

            mYear = year;
            mMonth = monthOfYear;
            mDay = dayOfMonth;
            System.out.println("year=" + year);
            System.out.println("month=" + monthOfYear);
            System.out.println("day=" + dayOfMonth);
            updateDisplay();
        }
    };
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-07T07:47:39.490

在这里，我展示了一种简单的技术，可以将用户**输入的字符串转换为 Date**并**根据我们的逻辑进行比较**。

```
public class Main {

    public static void main(String[] args) {

        Calendar calendar = Calendar.getInstance();

        Date selectedDate = null;
        Date currentDate = null;

        //Formatter to format the date given by system
        SimpleDateFormat requiredFormant =  new SimpleDateFormat("yyyy-MM-dd");

        //To get current Date
        try {
            currentDate = requiredFormant.parse(requiredFormant.format(calendar.getTime()));
        } catch (ParseException e) {
            e.printStackTrace();
        }

        // user inputted Text ,it can be from EditText Etc
        try {
             selectedDate = requiredFormant.parse("2019-01-09");
        } catch (ParseException e) {
            e.printStackTrace();
        }

        //Logic to compare dates
        if (currentDate.equals(selectedDate))
            System.out.println("You born today ?");
        else if(currentDate.after(selectedDate))
            System.out.println("Good to proceed");
        else
            System.out.println("Not Possible");

    }

} 
```

# ios - 使用 GLSL 为 GPU 重写代码

> ID：15834545
> 
> 赞同：1
> 
> 时间：2013-04-05T12:55:06.290
> 
> 标签：ios, objective-c, xcode, opengl-es

我有一些当前在 CPU 上运行的代码，导致我的 OpenGL ES 应用程序出现滞后问题。该代码计算网格的变形。我无法理解如何让这段代码在 GPU 上运行以提高性能。

```
for(int i = 0; i < numberOfVertices; i++)
    {
        // Update the positions
        dPositions[(i*3+0)] += [[pMorphs objectAtIndex:(i*3+0)] floatValue] * weight;
        dPositions[(i*3+1)] += [[pMorphs objectAtIndex:(i*3+1)] floatValue] * weight;
        dPositions[(i*3+2)] += [[pMorphs objectAtIndex:(i*3+2)] floatValue] * weight;

    // Update the normals
        dNormals[(i*3+0)] += [[nMorphs objectAtIndex:(i*3+0)] floatValue] * weight;
        dNormals[(i*3+1)] += [[nMorphs objectAtIndex:(i*3+1)] floatValue] * weight;
        dNormals[(i*3+2)] += [[nMorphs objectAtIndex:(i*3+2)] floatValue] * weight;

    } 
```

我是否正确地考虑使用 GLSL 我需要使用 glUniform4fv 创建 3 件制服来上传 pMorphs、nMorphs 和权重值？然后如何在计算后返回此值并将其分配给 dPositions 和 dNormals？

时间概况 ![时间档案](https://i.stack.imgur.com/Iz463.png)

# jquery - 如何将 jQuery 函数参数自动传递给外部函数？

> ID：15834553
> 
> 赞同：0
> 
> 时间：2013-04-05T12:55:57.300
> 
> 标签：jquery

我正在尝试将“术语”传递给外部函数。

```
$('#item').terminal(function(command, term) { 
```

我能够做到这一点的唯一方法是在函数中传递“术语”。

```
myfucntion(term, 'hello world'); 
```

有没有办法我可以做到这一点而不必每次都通过它？

**编辑：**

```
$(function () {
    $('#cmd').terminal(function (command, term) {
        switch (command) {
            case 'start':
                cmdtxt(term, 'hello world');
                break;

            default:
                term.echo('');
        }
    }, {
        height: 200,
        prompt: '@MQ: '
    });
});

function cmdtxt(term, t) {
    term.echo(t);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:17:09.710

您可以将声明`cmdtxt`放置在匿名`terminal`回调中：

```
$('#cmd').terminal(function (command, term) {

    // ** define cmdtxt using the in-scope `term` **
    function cmdtxt(t) {
        term.echo(t);
    }

    //...

    cmdtxt('hello world');

    //...

    }
}, { height: 200, prompt: '@MQ: ' }); 
```

通过`cmdtxt`在回调函数中定义函数，您可以将`term`其置于`cmdtxt`. 这是因为`term`在定义时处于作用域内`cmdtxt`，而 JavaScript 允许函数访问在函数定义时处于作用域内的所有变量。（在计算机科学术语中，我们说范围内变量包含在新[函数闭包](http://en.wikipedia.org/wiki/Closure_%28computer_science%29)的*词法范围内*。）

但是请注意，此更改将使`cmdtxt`该回调函数之外无法访问。如果您在`cmdtxt`其他地方确实需要该功能，您可以随时在您需要的任何范围内重新定义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:15:48.143

是的，您可以使其对这两个功能都具有全局性。

```
var my_store = {
   term: // what ever is term probably function(){.....}
};
$(function () {
    $('#cmd').terminal(function (command, term) {
        switch (command) {
            case 'start':
                cmdtxt('hello world');
                break;

            default:
                term.echo('');
        }
    }, {
        height: 200,
        prompt: '@MQ: '
    });
});

function cmdtxt(t) {
    my_store.term.echo(t);
} 
```

我放它的原因`my_store`是为了尽可能减少对全球空间的污染。所以它的作用是存储在全局范围内访问的变量。

# sqlite - 当我的入口点是 DLL 并且托管应用程序不是 .NET 时，如何加载 system.data 配置部分

> ID：15834560
> 
> 赞同：2
> 
> 时间：2013-04-05T12:56:17.493
> 
> 标签：sqlite, com, c#-2.0, configurationsection, dbproviderfactories

我正在研究一个 .NET DLL，它通过 COM 在用 Java、Visual Basic 6 和 c++ 编写的许多不同应用程序中进行交互。

该应用程序将 SQLite 用于客户端数据库，我们使用 system.data DbProviderFactory 配置部分向 DLL 提供有关从何处获取连接的信息。如果托管应用程序在 .NET 中，这可以正常工作，但如果应用程序不是 .NET 应用程序，我如何通过代码加载该部分？

我们已经尝试使用 ConfigurationFileMap 和 ConfigurationManager 从一个专门命名的配置文件中加载它，但本节特别不加载，只包含 machine.config 中的条目。

是否有任何从命名配置文件中加载此部分的显式方法？

# c# - 如何连接到远程 Oracle 数据库

> ID：15834561
> 
> 赞同：4
> 
> 时间：2013-04-05T12:56:21.053
> 
> 标签：c#, .net, visual-studio-2010, oracle, odp.net

我必须将远程 Oracle DBMS 连接到我的 .NET C# Web 服务中

*   是要求客户端安装Oracle吗？为什么？
*   当您必须使用 ODP.NET 时

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-08T19:11:11.500

我建议使用 ODP.NET，因为它是免费的，并且是用于连接到 Oracle 的“官方”ADO.NET 兼容提供程序。¹

为了让您的用户不必单独安装 Oracle 客户端，请下载[Oracle Instant Client](http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html)，从那里获取以下文件...

```
oci.dll
Oracle.DataAccess.dll (the managed ODP.NET assembly itself)
orannzsbb11.dll
oraociei11.dll
OraOps11w.dll 
```

...并将它们与您的应用程序一起分发。

不幸的是，这些 DLL 中的大多数都是本机的（并且是 32 位/64 位特定的），因此您将无法为“任何 CPU”平台构建（但²）。

.NET 代码与您在“胖”Oracle 客户端下使用的代码相同（并且与任何其他 ADO.NET 提供程序非常相似），除了您可能应该考虑使用“tnsnames.ora 独立”[连接字符串](http://www.connectionstrings.com/oracle#oracle-data-provider-for-net-odp-net)，例如：

```
Data Source=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=MyHost)(PORT=MyPort)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=MyOracleSID)));User Id=myUsername;Password=myPassword; 
```

* * *

*¹有商业替代品和现在已弃用的旧 Microsoft 提供程序（无论如何都不会让您免于安装 Oracle 本机 DLL）。*

*²等待[完全托管的 Oracle 提供程序](http://www.oracle.com/technetwork/topics/dotnet/ow2011-fully-managed-odp-518049.pdf)，或编辑您的项目文件（MSBuild XML）以根据构建平台有条件地包含 32 位或 64 位 DLL，类似于以下内容：*

```
 <Choose>
    <When Condition="'$(Platform)' == 'x64'">
      <ItemGroup>
        <Reference Include="Oracle.DataAccess, processorArchitecture=x64">
          <SpecificVersion>False</SpecificVersion>
          <HintPath>..\ThirdParty\ODP.NET\x64\Oracle.DataAccess.dll</HintPath>
        </Reference>
        <Content Include="..\ThirdParty\ODP.NET\x64\oci.dll">
          <Link>oci.dll</Link>
          <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </Content>
        <Content Include="..\ThirdParty\ODP.NET\x64\orannzsbb11.dll">
          <Link>orannzsbb11.dll</Link>
          <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </Content>
        <Content Include="..\ThirdParty\ODP.NET\x64\oraociei11.dll">
          <Link>oraociei11.dll</Link>
          <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </Content>
        <Content Include="..\ThirdParty\ODP.NET\x64\OraOps11w.dll">
          <Link>OraOps11w.dll</Link>
          <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </Content>
      </ItemGroup>
    </When>
    <When Condition="'$(Platform)' == 'x86'">
      <ItemGroup>
        <Reference Include="Oracle.DataAccess, processorArchitecture=x86">
          <SpecificVersion>False</SpecificVersion>
          <HintPath>..\ThirdParty\ODP.NET\x86\Oracle.DataAccess.dll</HintPath>
        </Reference>
        <Content Include="..\ThirdParty\ODP.NET\x86\oci.dll">
          <Link>oci.dll</Link>
          <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </Content>
        <Content Include="..\ThirdParty\ODP.NET\x86\orannzsbb11.dll">
          <Link>orannzsbb11.dll</Link>
          <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </Content>
        <Content Include="..\ThirdParty\ODP.NET\x86\oraociei11.dll">
          <Link>oraociei11.dll</Link>
          <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </Content>
        <Content Include="..\ThirdParty\ODP.NET\x86\OraOps11w.dll">
          <Link>OraOps11w.dll</Link>
          <CopyToOutputDirectory>PreserveNewest</CopyToOutputDirectory>
        </Content>
      </ItemGroup>
    </When>
  </Choose> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T13:10:21.267

我认为您可以使用`Oracle.DataAccess`ODP.NET 中的命名空间

你可以这样使用：

```
var _testConx = new OracleConnection(_testConnectionString);
var rezList = new List<Type>();
string _GetSQL = @"SELECT STATEMENT";
var dbCommand = new OracleCommand(_GetSQL , _testConx);
dbCommand .CommandType = CommandType.Text;
var reader = dbCommand .ExecuteReader();
while (reader.Read())
{
   var rez = new Type();
   rez.Field1= TryGetInt(reader.GetOracleValue(0));
   rez.Field2= TryGetString(reader.GetOracleValue(1));

   rezList.Add(rez);
}
return rezList; 
```

这将使用 oracle 客户端连接到远程数据库。

您可以在配置文件等外部资源中指定连接字符串

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T15:23:14.283

我喜欢使用 System.Data.OracleClient。我知道它已被弃用，但它内置的事实使它非常易于使用。

我还喜欢使用 System.Web 中的 SqlDataSource 对象，即使在非 ASP.NET 应用程序中也是如此。下面是一些示例代码。然后，获取数据就像调用 GetDataView() 并传入您的 select 语句一样简单。您需要自己实现 GetDefaultConnectionString() 和 GetDefaultProviderName()。提供者名称是“System.Data.OracleClient”，[这些](http://www.connectionstrings.com/oracle#net-framework-data-provider-for-oracle)应该让您开始使用连接字符串。

请注意，由于 SqlDataSource 依赖于 System.Web，因此应用程序将需要整个 .NET Framework 4 配置文件（而不仅仅是较小的客户端配置文件）。取决于你在做什么，这可能是也可能不是问题。你总是可以实现你自己的 SqlDataSource 等价物，但我不喜欢重新发明轮子，除非它给我一个很好的优势。

```
 /// <summary>
    /// Creates a SqlDataSource object using the Default connectionstring in the web.config file and returns it.
    /// </summary>
    /// <returns>An SqlDataSource that has been initialized.</returns>
    public static SqlDataSource GetDBConnection()
        {
        SqlDataSource db = new SqlDataSource();
        db.ConnectionString = GetDefaultConnectionString();
        db.ProviderName = GetDefaultProviderName();
        return db;
        }
    /// <summary>
    /// Creates a DataView object using the provided query and an SqlDataSource object.
    /// </summary>
    /// <param name="query">The select command to perform.</param>
    /// <returns>A DataView with data results from executing the query.</returns>
    public static DataView GetDataView(string query)
        {
        SqlDataSource ds = GetDBConnection();
        ds.SelectCommand = query;
        DataView dv = (DataView)ds.Select(DataSourceSelectArguments.Empty);
        return dv;
        } 
```

进行更新/插入/删除同样容易......

```
SqlDataSource ds=GetDBConnection();
ds.InsertCommand="insert into my_table values ('5','6')";
ds.Insert(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T14:36:47.383

我们正在使用 Oracle 提供的 OLEDB 驱动程序连接到 .net 桌面应用程序中的远程 Oracle 数据库。也应该适用于 Web 服务。

```
String conString = "Provider=OraOLEDB.Oracle.1;User ID=username;password=password;Data Source=your_tnsname;Persist Security Info=False";
String query = "Select 2 from dual";
OleDbConnection OleDbCon = new OleDbConnection(conString);
OleDbCon.Open();
OleDbCommand cmd = new OleDbCommand(query, OleDbCon);
OleDbDataReader reader = cmd.ExecuteReader();
reader.Read();
decimal dResult = reader.GetDecimal(0);
con.Close();
return Convert.ToInt32(dResult); 
```

您应该添加适当的异常处理。

# javascript - JSON 字符串中未终止的字符串文字，其值来自带有 HTML 标记的 SQLServer

> ID：15834566
> 
> 赞同：0
> 
> 时间：2013-04-05T12:56:50.883
> 
> 标签：javascript, html, sql-server, ajax, json

我一直在尝试解决当我从该页面的下拉列表中选择“Breast”时在 Firebug 中遇到的“未终止的字符串文字错误” - [http://wftp.whclpreview.com/search.html](http://wftp.whclpreview.com/search.html)并点击提交按钮. 错误指向我以粗体突出显示的引号 -

SpecialGroups":"a","NationalAudits":"na","SpecialInterests": **"**

基本上，此错误是对 ASP.NET 函数的 $.ajax 调用的结果，该函数以 JSON 格式从 SQLServer 数据库（包含名为 SpecialInterests 的字段）返回数据。该数据库附加到管理员，允许用户通过 CKEDITOR 插件格式化文本。

如果文本很简单，那么一切正常，但如果它包含任何 HTML 标签或换行符，那么我会收到上述错误。

欢迎任何建议，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T14:06:11.067

如果您使用的是 AJAX，您可以传递一个**Object Literal**或使用 de 数据构建查询字符串：例如

```
 //if the variable contains HTML string,
 //ensure to encode it before sending the request
 var note = "  <strong>Important:</strong><br/> Additional notes. ";
 note = encodeHtml(note);

 //Object Literal
 var params = { "date": date, "expiry": expiry, "priority": priority, "note": note };

 //Query string to append to the url
 var paramsUrl = buildUrlParams(params).join("&");

  $.ajax({
    type: "POST",
    url:  "myservice/client",

    //ugly way
    //data: "date="+date+"&expiry="+expiry+"&priority="+priority+"&note="+note,

    //passing data as Literal Object        
    data: params,

    //passing data as querystring
    //data: paramsUrl,

    success: function(data){ alert(data); }
  }); 
```

* * *

```
 //Creates an array of parameters to build an URL querystring
  //@obj: Object to build the array of parameters
  function buildUrlParams(obj) {
      return $.map(obj, function(value, key) {
          return key + "=" + value;
      });
  } 
```

* * *

```
 //Encodes the HMTL to their respective HTML entities
  //@text: the HTML string to encode
  function encodeHtml(text) {
    var div = document.createElement("div");
    if ("innerText" in div) div.innerText = text;
    else div.textContent = text;
    return div.innerHTML.replace(/^\s+|\s+$/, "");
  } 
```

# java - 线性布局包装 TextView

> ID：15834568
> 
> 赞同：4
> 
> 时间：2013-04-05T12:56:55.033
> 
> 标签：java, android, layout, android-linearlayout

我正在设计如下布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/messageText"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Some really long text asd asd asd asd asd asd asd asd asd asd asd" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="12:45 PM" />

</LinearLayout> 
```

它提供了像上面这样的用户界面......

![长文本图像](https://i.stack.imgur.com/mx5JZ.png)

这是我需要的完美。由于方向是水平的，长文本会被正确包装，而不会将 Button 推离屏幕。按钮也没有拉伸。

但是如果文字很小。看起来像这样

![短文字图片](https://i.stack.imgur.com/n28SI.png)

我想要的是 Button 应该像这样与文本的左端对齐

![简短的正确文本](https://i.stack.imgur.com/lZle5.png)

我知道我将布局权重设置为 1。

在为按钮提供所需空间后，它会占用整个剩余区域。

如果我不说。并使宽度成为包装内容。它适用于短文本。但随着文本的增长。

它将按钮推离屏幕。

那就是问题所在。希望我对我的问题进行了足够的描述。但当然要读很久。当然是痛苦的。但是会很高兴知道任何指针。

我也不愿意使用相对布局。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T13:10:31.440

希望这对你有用。请试试这个：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<TextView
    android:id="@+id/messageText"
    android:layout_width="0dp"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="Some really long text asd asd asd asd asd asd asd asd asd asd asd![enter image description here][1]" />

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="12:45 PM" /> 
```

我认为您需要将线性布局的**android:layout_width="fill_parent"**更改为**android:layout_width="wrap_content"**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:10:41.670

试试这个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content"
android:layout_height="wrap_content" >

<TextView
    android:id="@+id/messageText"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
     android:layout_weight="1.0"
    android:text="Some really long text asd asd asd asd asd asd asd asd asd asd asd![enter image description here][1]" />

<Button
    android:id="@+id/button1"
    android:layout_width="100dp"
    android:layout_height="wrap_content"
    android:text="12:45 PM" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:34:57.520

我在我的设备上对其进行了测试并且工作正常。尝试一下

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:weightSum="1" >

<TextView
    android:id="@+id/messageText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:text="sdgdsgdhdhdfhdhgfffffffffffffffffffffffffffffffffffffffff" />

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="12:45 PM" />

</LinearLayout> 
```

# sql - 如何在 PostreSQL 中仅批量插入新行

> ID：15834569
> 
> 赞同：5
> 
> 时间：2013-04-05T12:56:55.110
> 
> 标签：sql, postgresql, insert, duplicate-removal, bulk

我有没有 ID 的产品列表（300 万个项目） - 只有标题。但我不知道数据库中已经存在哪些标题。必须将新产品（约 290 万个项目）添加到数据库中。之后，我必须知道每种产品（新的和现有的）的 ID。

在 PostgreSQL 中有最快的方法吗？我可以根据需要更改数据库（添加默认值、添加列等）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-05T13:06:12.643

### 导入数据

[**`COPY`**](http://www.postgresql.org/docs/current/interactive/sql-copy.html)将所有内容都放到**临时登台表中**，并仅将新标题插入目标表中。

```
CREATE TEMP TABLE tmp(title text);

COPY tmp FROM 'path/to/file.csv';
ANALYZE tmp;

INSERT INTO tbl
SELECT DISTINCT tmp.title
FROM   tmp 
LEFT   JOIN tbl USING (title)
WHERE  tbl.title IS NULL; 
```

ID应[`serial`](http://www.postgresql.org/docs/current/interactive/datatype-numeric.html#DATATYPE-SERIAL)使用`tbl_id`.`tbl`

`LEFT JOIN`/`IS NULL`构造取消现有标题的资格。`NOT EXISTS`将是另一种可能性。

`DISTINCT`防止临时表中传入数据的重复`tmp`。

[`ANALYZE`](http://www.postgresql.org/docs/current/interactive/sql-analyze.html)有助于确保查询计划器选择一个合理的计划，并且 autovacuum 不会分析临时表。

由于您有 300 万个项目，因此可能需要提高以下设置`temp_buffer`（*仅限本次会议*）：

```
SET temp_buffers = 1000MB; 
```

或者无论你能负担得起多少，并且足以将临时表保存在 RAM 中，这要快得多。注意：必须*首先*在会话中完成 - 在创建任何临时对象之前。

### 检索 ID

要查看导入数据的所有 ID：

```
SELECT tbl.tbl_id, tbl.title
FROM   tbl
JOIN   tmp USING (title) 
```

在同一个会话中！会话结束时会自动删除一个临时表。

# javascript - 页面上的多个 JQuery 元素放在一起时不起作用

> ID：15834571
> 
> 赞同：0
> 
> 时间：2013-04-05T12:57:11.020
> 
> 标签：javascript, jquery, html, asp-classic

我正在使用来自雅虎的 Jquery Zweather 提要设计一个网站。我想让大图像成为褪色到下一张图像的画廊。

我尝试添加 jcobb 基本滑块。滑块运行完美，但 Jquery Zweather 提要停止工作。我认为这可能与进入最外层 div 的 jcobb 基本滑块“触发器”有关，或者可能与库有关。

我放弃了使用滑块，但我仍然想使用它。您可以在一个页面上放置多个 Javascript/Jquery 项目吗？如果一个项目有一个“触发器，但另一个没有？如果你很好奇，我正在处理的网站是：

www.orangeburgcounty.org/countyWebsite/index.asp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:02:40.467

您可以尝试做一些事情来使其正常工作。

1.  确保您的脚本被拉入页面，一种检查方法是使用 Chrome 调试器中的“源”选项卡并在 html 头部分中搜索其他文件

2.  确保在包含 jQuery 之后包含了 datatale 脚本，因为它肯定依赖于它。

3.  检查是否正确包含 jQuery，并且只包含一次。

4.  注意 jQuery 冲突。还有一些其他库覆盖了 $，因此您的代码无法正常工作，因为 $ 不再是 jQuery 的别名。您可以使用它`jQuery.noConflict()`来避免与页面上使用相同变量 $ 的其他库发生冲突。

5.  检查 Chrome/FireBug 开发者工具是否有 JS 错误。

# node.js - thrift 中与容器数据类型等效的 nodejs 数据类型是什么？

> ID：15834572
> 
> 赞同：2
> 
> 时间：2013-04-05T12:57:11.170
> 
> 标签：node.js, thrift

与以下节俭数据类型等效的 nodejs 数据类型是什么 -

```
List
Set 
Map 
```

这是我的 .thrift 文件。

```
struct Person{
1: required string name_;
2: required map<i64,string> attribute1_;
3: required map<i64,i64> attribute2_;
4: required map<i64,string> attribute3_;
}

service ProcessPerson {  
  void DoPerson(
                1: required list<Person> person_array  
                ) 
} 
```

在 nodejs 客户端中，调用 DoPerson 方法时，person_array 的数据类型应该是什么？它是一个对象数组吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T16:23:52.207

Node.js doesn't over anything over native javascript, though there are modules available that implement the data types you are looking for

*   sets: [simplesets](https://github.com/PeterScott/simplesets-nodejs.git)
*   lists: [node-linkedlist](https://github.com/kilianc/node-linkedlist.git)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:08:42.387

除了 javascript 中的数据类型：数组和对象之外，node.js 不会添加任何专门的集合数据类型。如果您正在寻找与 List、Set 和 Map 类似的功能，我会看看[underscore](http://underscorejs.org/#collections)。它添加了用于迭代、分组、排序、过滤等的便捷方法。

是的，与您的示例等效的是一个对象数组：

```
var person  = {
   name: "Kevin Bacon",
   attribute1: {1:"one"},
   attribute2: {1:"two"},
   attribute3: {1:"three"}
};

function DoPerson(prs){
   var person_array = [person];
} 
```

List 是一个数组。Map 是一个对象，而 Set 可以是：

```
_.uniq(person_array) 
```

# windows - 是否可以使用 Windows 命令行编辑二进制文件？

> ID：15834573
> 
> 赞同：8
> 
> 时间：2013-04-05T12:57:18.267
> 
> 标签：windows, cmd, edit, binaryfiles

Windows 中有没有办法从命令行编辑二进制文件？即一种可以写入批处理文件的方式？

我希望能够在现有文件中的已知位置编辑单个字节。

这个现有的问题[1] 已解决，但这是一个 Linux 解决方案。我正在为 Windows 寻找类似的东西。

**背景**

从 Steam 下载时，GTA 1 中存在一个错误，即保存游戏数据文件在退出时损坏。结果，游戏第一次可以玩得很好，但随后就崩溃了。事实证明，这可以通过将文件中的第 5 个字节（即地址 0x04 处的字节）从 x00 更改为 x06[2] 来解决。

我可以很容易地在 Python 中做到这一点，例如：

```
with open("PLAYER_A.DAT", "rb") as f:
    bytes = f.read()
bytes = bytes[:4] + '\x06' + bytes[5:]
with open("PLAYER_A.DAT", "wb") as g:
    for b in bytes: g.write(b) 
```

理想情况下，尽管我宁愿在执行以下操作的批处理作业中执行此操作：

*   修复数据文件
*   推出 GTA

我可以制作一些对我有用的东西（使用 Python），但这无助于随机其他没有 Python 的人（是的，我知道它很容易获取和安装，但仍然如此）。同样，有一个免费软件声称可以做到这一点，但我不想在我的 PC 上运行随机的 .exe，我认为其他人也不应该这样做。出于这个原因，我想提供一个批处理文件，人们可以检查它，并且 - 如果他们对它的功能感到满意 - 自己运行。

谢谢你的帮助！

[1] [CLI：在地址处写入字节（从命令行十六进制编辑/修改二进制文件）](https://stackoverflow.com/questions/4783657/cli-write-byte-at-address-hexedit-modify-binary-from-the-command-line)

[2] [http://forums.steampowered.com/forums/showthread.php?t=1597746](http://forums.steampowered.com/forums/showthread.php?t=1597746)

[编辑] 修复了 Python 脚本，因为我发现它不能按原样工作（file.read() 返回一个不可变对象，因此您不能只更新其中一个值）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-05T13:28:08.560

我认为 PowerShell 是完成这项任务的完美工具。它适用于 XP 或更高版本，并且自 Windows 7 起自动提供：

只需创建一个`*.ps1`包含以下内容的文件：

```
$bytes = [System.IO.File]::ReadAllBytes("PLAYER_A.DAT");
$bytes[4] = 0x06;

[System.IO.File]::WriteAllBytes("PLAYER_A.DAT", $bytes);
& "C:\Path-To-GTA1-Exe-File.exe" 
```

请注意，必须启用未签名的 PowerShell 脚本：

1.  以管理员身份启动 PowerShell

2.  运行此命令： `Set-ExecutionPolicy RemoteSigned`

* * *

您也可以使用 VBScript，但脚本会稍长一些，因为它不是为读取二进制文件而设计的（您必须使用`ADODB.Stream`对象）。

以下是帮助函数的汇编：[http ://www.motobit.com/tips/detpg_read-write-binary-files/](http://www.motobit.com/tips/detpg_read-write-binary-files/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:20:17.067

将原始文件分成三个，然后在中间与您的替代字节合并怎么样？将二进制文件分成三部分（start -> target-1 / target / target+1 -> end），然后使用 COPY 将开始和结束块与中间的新字节合并。

我从来没有能够让 DOS（或任何 Windows 命令提示符）以本机方式拆分文件，但免费的 SPLITS.EXE 实用程序非常好，可以包含在您的解决方案中。COPY 当然是本机命令。

我现在找不到该实用程序的链接，但是在谷歌上搜索“免费的 dos 文件拆分实用程序”会产生很多点击...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-06-25T16:17:30.873

1.  生成一个您可以理解的格式的文件，例如。`fc`带有或的十六进制代码 或`certutil`带有 的十进制代码`comp`。
2.  搜索和替换/编辑字节
3.  将二进制（解码的十六进制文件或内存中的编辑数据）写入磁盘

从“Windows 命令行”修补文件字节 4 的一种解决方案：

```
echo Dim fso : Set fso = CreateObject("Scripting.FileSystemObject") > tmp.vbs
echo Set file = fso.OpenTextFile("PLAYER_A.DAT") >> tmp.vbs
echo set fsize = fso.GetFile("PLAYER_A.DAT") >> tmp.vbs
echo Dim out : Set out = fso.CreateTextFile("GTA.exe", true) >> tmp.vbs
echo data = file.Read(3) : out.write(data) : file.Skip(1) >> tmp.vbs
echo data = "06" : out.write chr("&H" ^& data) >> tmp.vbs
echo data = file.Read(fsize.Size) : out.write(data) >> tmp.vbs
echo file.Close >> tmp.vbs
echo out.Close >> tmp.vbs
cscript //nologo tmp.vbs & del tmp.vbs
start /b cmd /c GTA.exe 
```

在Win10 CMD中测试

# actionscript-3 - ActionScript 3 代码学习

> ID：15834576
> 
> 赞同：-4
> 
> 时间：2013-04-05T12:57:22.667
> 
> 标签：actionscript-3, programming-languages, var

这句话是什么意思 (i = 0; i++); 是指在 ActionScript 3 中还是在一般的计算机编程中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T12:59:58.027

也许你的意思是`i=0;i<number;i++`？

它通常写成一个`for`循环。这意味着您要循环某些特定操作的次数。

第一部分声明一个变量，第二部分显示循环的次数，最后一部分显示你想要增加多少。i++ 表示您希望 i 增加 1

例如

```
for( i=0; i<10; i++){
      do_action();
} 
```

它将循环 10 次并在括号中执行您的代码

# ios - iOS 推送通知自定义格式

> ID：15834581
> 
> 赞同：28
> 
> 时间：2013-04-05T12:57:33.137
> 
> 标签：ios, push-notification

我是所有 iOS 推送通知域的新手。我已经使用以下代码尝试了基本的推送通知，并且效果很好。我正在使用“使用 JdSoft.Apple.Apns.Notifications;” 来实现这一点。这是代码：

```
Notification alertNotification = new Notification(testDeviceToken);

alertNotification.Payload.Alert.Body = "Hello World";           
alertNotification.Payload.Sound = "default";
alertNotification.Payload.Badge = 1; 
```

这以以下结构将输出提供给 iPhone：

```
{
    aps =     {
        alert = "Hello World";
        badge = 1;
        sound = default;
    };
} 
```

我现在有添加自定义标签的要求，如下所示：

```
{
    "aps":   {
        "alert": "Hello World",
        "sound": "default",
    "Person":     {
            "Address": "this is a test address",
            "Name": "First Name",
            "Number": "023232323233"

    }  
  }
} 
```

我发现很难在“aps”中找到“Person”。我也知道您可以使用以下代码添加自定义属性：

alertNotification.Payload.AddCustom("Person", Newtonsoft.Json.JsonConvert.SerializeObject(stat));

但是上面的代码没有添加“aps”标签。请告诉我如何实现？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-10-30T12:26:54.493

不允许将自定义标签放在**aps**标签内。以下是文档中的说明：

> 提供者可以在 Apple 保留的 aps 命名空间之外指定自定义有效负载值。自定义值必须使用 JSON 结构化和原始类型：字典（对象）、数组、字符串、数字和布尔值。

因此，在您的情况下，您应该执行以下操作：

```
{
    "aps": {
        "alert": "Hello World",
        "sound": "default"
    },
    "Person": {
        "Address": "this is a test address",
        "Name": "First Name",
        "Number": "023232323233"
    }
} 
```

因此，您可以通过在主 JSON 中而不是在“aps”中查找它的键来读取您的自定义有效负载：

```
NSLog(@"%@",notification['Person']['Address']); 
```

以上将输出：

> 这是一个测试地址

[您可以在Apple 文档](https://developer.apple.com/library/content/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CreatingtheNotificationPayload.html#//apple_ref/doc/uid/TP40008194-CH10-SW1)中找到有关自定义有效负载的更多信息以及一些示例。

问候， HrisTo

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-09-15T19:08:04.027

您可以添加**Title**、**Subtitle**、**body**和许多其他键

```
{
  "aps": {
    "alert": {
      "title": "Hey! Checkout my custom notification",
      "subtitle": "Custom notification subtitle",
      "body": "Description of custom notification"
    },
    "sound": "default",
    "category": "CustomPush",
    "badge": 1,
    "mutable-content": 1
  },
  "Employee": {
    "Name": "John Doe",
    "Designation": "Manager"
  }
} 
```

其中**Employee**是自定义有效负载，您可以在其中根据需要设置自己的数据

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-10T11:40:57.517

我正在使用推锐库。

```
 public static JObject CreatePayload(APNSNotification apnsNotification, object content, int Ntype)
        {
            var payload = new Dictionary<string, object>();
            var aps = new Dictionary<string, object>();

            if ((int)NotificationType.CONFERENCE == Ntype)
            {
                var confNotification = new ConferenceNotification();
                confNotification = (ConferenceNotification)content;

                aps.Add("alert", confNotification.title);
                aps.Add("subtitle", confNotification.body);
                aps.Add("badge", confNotification.badgeCount);

                payload.Add("aps", aps);

                payload.Add("confId", confNotification.confId);
                payload.Add("pageFormat", confNotification.pageFormat);
                payload.Add("pageTitle", confNotification.pageTitle);
                payload.Add("webviewURL", confNotification.webview_URL);
                payload.Add("notificationBlastID", confNotification.notificationBlastID);
                payload.Add("dataValue", confNotification.dataValue);
                payload.Add("pushtype", "Events");
            }
            else if ((int)NotificationType.NEWS == Ntype)
            {
                var newsNotification = new NewsNotification();
                newsNotification = (NewsNotification)content;

                aps.Add("alert", newsNotification.title);
                aps.Add("subtitle", newsNotification.subtitle);
                aps.Add("badge", newsNotification.badgeCount);

                payload.Add("aps", aps);

                payload.Add("articleId", newsNotification.articleId);
                payload.Add("msgcnt", newsNotification.msgcnt);
                payload.Add("type", newsNotification.type);
                payload.Add("pushtype", "News");
            }

            return JObject.Parse(Newtonsoft.Json.JsonConvert.SerializeObject(payload));
        } 
```

# php - Joomla 2.5 在外部 php 页面中检索数据

> ID：15834582
> 
> 赞同：0
> 
> 时间：2013-04-05T12:57:35.257
> 
> 标签：php, joomla, joomla2.5

我在网站上使用 Joomla 2.5，但主页是一个外部 php 页面，我需要从特定的 joomla 文章和菜单项中获取数据。

1.  调用模块或连接到数据库以检索我需要的最佳方法是什么？
2.  如何调用 Joomla 类、函数等来获得我的结果？

我已经尝试过的：

此帖子中的“模块”解决方案（[外部页面中的 Joomla 菜单](https://stackoverflow.com/questions/12018778/joomla-menu-in-external-page)）显示有关会话已启动的错误。

数据检索的一些代码：

```
define('_JEXEC', 1);
define('JPATH_BASE', dirname(__FILE__).'/../../Joomla_2.5.9' );   // should point to joomla root
require_once ( JPATH_BASE .'/includes/defines.php' );
require_once ( JPATH_BASE .'/includes/framework.php' );
require_once ( JPATH_BASE .'/libraries/joomla/factory.php' );

$db = JFactory::getDBO();
$query = $db->getQuery(true);
$query->select('introtext')
 ->from('#__content')
 ->where('id = 1');
$db->setQuery($query);

$fullArticle = $db->loadResult();

echo $fullArticle; 
```

这段代码非常适合从特定文章中获取文章文本。当然，它不是那么实用，因为我想处理类别和多语言内容。

我将添加任何结果以更好地解决问题。任何进一步的想法肯定会有所帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:25:14.790

您需要初始化 Joomla 应用程序：

```
$joomlaPath = dirname(__FILE__).'/../../Joomla_2.5.9';
define('_JEXEC', 1);
define('DS', DIRECTORY_SEPARATOR);

if (file_exists($joomlaPath . '/defines.php')) {
    include_once $joomlaPath . '/defines.php';
}

if (!defined('_JDEFINES')) {
    define('JPATH_BASE', $joomlaPath);
    require_once JPATH_BASE.'/includes/defines.php';
}

require_once JPATH_BASE.'/includes/framework.php';

// Instantiate the application.
$app = JFactory::getApplication('site');

// Initialise the application.
$app->initialise(); 
```

首先，您可以访问已配置的 Joomla 环境。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-15T10:33:54.110

尼布拉！你的代码和我的很相似：

```
<?php
define( '_JEXEC', 1 );
define( 'JPATH_BASE', '/home/user7633/public_html/cms' );
define( 'DS', '/' );
require_once ( JPATH_BASE .DS.'includes'.DS.'defines.php' );
require_once ( JPATH_BASE .DS.'includes'.DS.'framework.php' );
JFactory::getApplication('site')->initialise();
$user = JFactory::getUser();
echo $user->username;
?> 
```

通过这种方式完成的代码**不起作用**！

我在 PHP 5.4.36 上使用 Joomal 3.4.1，代码只是偶尔工作。有时用户名是空的，有时是例外。我已登录！

我从“外部 URL”菜单项调用 PHP 文件。

# javascript - 使用 knockout.js 提交文本框值

> ID：15834592
> 
> 赞同：0
> 
> 时间：2013-04-05T12:57:50.200
> 
> 标签：javascript, knockout.js

我正在尝试将文本框中的值提交到一个数组中，该数组将以表格格式显示。将进行进一步的计算，但现在我遇到了绑定问题。在 chrome 的控制台中，我得到的错误是

```
Uncaught TypeError: Property 'item' of object#<ItemEntry> is not a function 
```

我不知道应该在哪里定义 newItem （从文本框提交的值）。

这是HTML

```
<td><input type="text" data-bind="value: newItem" /></td>
<button data-bind="click: addItem">Add Item</button>

<table>
    <thead><tr>
        <th>Item Number</th><th>Price</th><th></th>
    </tr></thead>
    <tbody data-bind="foreach: itemNumbers">
        <tr>
            <td data-bind="text: item"></td>
            <td data-bind="text: price"></td>
            <td><a href="#" data-bind="click: $root.removeItem">Remove</a></td>
        </tr>    
    </tbody>
</table>

<h3 data-bind="visible: totalCost() > 0">
    Total Cost: $<span data-bind="text: totalCost().toFixed(2)"></span>
</h3> 
```

这是javascript

```
function ItemEntry(item, price) {
    var self = this;
    self.item = item;
    self.price = price;

}

// Overall viewmodel for this screen, along with initial state
function EntryViewModel(newItem) {
    var self = this;
    self.newItem = newItem;

    // Editable data
    self.itemNumbers = ko.observableArray([
        new ItemEntry("New Item", "$22.50")
    ]);

    // Computed data
    self.totalCost = ko.computed(function() {
       var total = 0;
       for (var i = 0; i < self.itemNumbers().length; i++)
           total += self.itemNumbers()[i].item.price;
       return total;
    });    

    // Operations
    self.addItem = function() {
        self.itemNumbers.push(new ItemEntry(self.newItem, "$20.00"));
    }
    self.removeItem = function(item) { self.itemNumbers.remove(item) }
}

ko.applyBindings(new EntryViewModel()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:13:53.197

我看到了一些您可能想要进行的更新：

*   ItemEntry 接受一个`Price`参数，而您`price`在构造函数中处理
*   您的商品/价格在 ItemEntry 中不是可观察的，因此您`formattedPrice`不需要计算，它可以只是一个普通函数（除非您选择使它们可观察，就像您制作了一个完整的编辑器一样
*   该`formattedPrice`函数正在尝试读取`item.price()`. 价格是一个单独的参数，`item`实际上只是项目的名称。
*   在`formattedPrice`您可能需要考虑将值解析为数字
*   当您调用`addItem`第一个参数时，将是该上下文中的数据（即根视图模型）。因此，您可以阅读`newItem`它，也可以仅使用`self.newItem()`您当前的结构。
*   在结束时`addItem`，您可能想要清除`newItem`，因此输入框已准备好进行下一个条目。
*   您的`totalCost`计算正在阅读`item().price`，只需要做`item.price`.

这是一个包含许多这些变化的更新小提琴：http: [//jsfiddle.net/rniemeyer/8cDUn/](http://jsfiddle.net/rniemeyer/8cDUn/)

如果您想为这些项目创建一个编辑器，那么您可能希望使`ItemEntry`成员可观察。

# java - 如何在 Dequeue 中查找并返回对象？

> ID：15834594
> 
> 赞同：1
> 
> 时间：2013-04-05T12:57:55.670
> 
> 标签：java, data-structures, collections, queue, deque

我正在使用一个双端队列（java.util.Dequeue）并且想在队列中找到一个对象并返回它。

我目前正在使用该`contains()`方法检查队列是否包含对象，但不知道如何获取找到的对象的实际实例。正在搜索的实例*不是*同一个实例，因为我正在重写该`equals()`方法来测试类变量子集的相等性。

如果使用 Dequeue 无法做到这一点，那么我应该使用什么来代替？我需要将对象推送到列表的任一端并从一开始就将它们删除。并且显然能够搜索一个对象并获得它的实例化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:02:33.253

如果你想删除你正在搜索的对象，我有点不清楚，但是，一种可能的解决方案是获取一个迭代器，然后迭代列表并手动进行相等性检查。

```
Iterator<YourClass> it = yourDeque.iterator();
YourClass foundInstance = null;
while(it.hasNext()) {
    YourClass obj = it.next();
    if(obj.equal(theInstanceYouAreSearchingFor)) {
        foundInstance = obj;
        break;
    }
}
if(foundInstance != null) {
   yourDeque.remove(foundInstance); // if you wish to remove it as well
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:04:37.973

也许使用链表？您将获得在任意位置检索元素的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:07:18.267

您可以使用`LinkedList`，它实现`Deque`. 然后你可以这样做：

```
Deque<Object> queue = new LinkedList<>();
// ...
int index = (LinkedList<Object> queue).indexOf(obj);
if (index != -1)
    (LinkedList<Object> queue).get(index); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-18T17:39:04.427

*（只是为了好玩）*

如果您想通过基于索引的迭代 (a la `for(int i = 0; i < n; i++)`) 来实现，则需要`E get(int index)`和`E remove(int index)`方法。要做到这一点，`Deque`还必须实施`List`. 满足这一点的实现是`LinkedList`. 这是一些泛型黑客：

```
import java.util.Deque;
import java.util.LinkedList;
import java.util.List;

import static java.util.Arrays.asList;

public class Main {
    public static void main(String[] args) {
        foo(new LinkedList<>(asList("this", "is", "a", "test")));
        foo(new LinkedList<>(asList(2, 3, 5, 7, 11, 13)));
    }

    public static <E, Delist extends Deque<E> & List<E>> void foo(Delist message) {
        System.out.println(message.get(1) + " " + message.getFirst() + " " + message.get(2) + " " + message.getLast());
    }
} 
```

# git - 更改 git 设置以允许多个用户推送/提交文件

> ID：15834598
> 
> 赞同：0
> 
> 时间：2013-04-05T12:58:01.673
> 
> 标签：git, github, beagleboard

我有一个 beaglebone，我在不久前（当我第一次学习 git 时）设置了一个用于特定 github 帐户的 ssh 密钥。该帐户是我们公司的主帐户。许多人直接在 beaglebone 上工作，并直接从 beaglebone 推送到 github。我想更改设置，以便每当有人想要提交或推送到 github 时，都会询问他们的用户名。

我最近的提交和推送看起来像这样......你会看到我没有输入用户名的选项，只有我们公司主帐户的密码。

```
root@beaglebone:/var/lib/cloud9/pypos# git commit -a -m "class restructured and passing the new updated test script"
[class_restructure 1db2e33] class restructured and passing the new updated test script
 2 files changed, 14 insertions(+), 10 deletions(-)
root@beaglebone:/var/lib/cloud9/pypos# git push origin class_restructure
Enter passphrase for key '/home/root/.ssh/id_rsa':
Counting objects: 7, done.
Compressing objects: 100% (4/4), done.
Writing objects: 100% (4/4), 531 bytes, done.
Total 4 (delta 3), reused 0 (delta 0)
To git@github.com:FarmDesign/pypos.git
   83831a8..1db2e33  class_restructure -> class_restructure
root@beaglebone:/var/lib/cloud9/pypos# 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T11:21:12.433

GitHub 支持与您在那里托管的存储库进行通信的不同协议。如果您使用 SSH 协议，那么 git 会要求您输入密码以解锁存储在 .ssh 中的密钥，这与推送到 GitHub 存储库的能力相关（任何有权访问该密钥的人都可以推送到存储库，因此提供只需要访问密钥的密码）。但是，如果您使用 HTTP，则会要求您提供 GitHub 用户名和密码。

因此，请转到存储库的 GitHub 网页，并注意存储库 URL 旁边（靠近页面顶部）的 HTTP、SSH 和 GIT 切换按钮。使用该按钮来查看 repo 的 URL 是如何变化的——这些是根据您使用的协议可以访问您的 repo 的不同 URL。现在，单击“HTTP”并将该 URL 复制到剪贴板。

现在，转到您的终端并 cd 到您本地克隆的 repo 目录。现在，使用 git remote 命令更改 git 将与 GitHub 存储库通信的 URL：

```
git remote set-url origin THE_URL_THAT_YOU_JUST_COPIED_TO_CLIPBOARD 
```

现在，当您尝试执行 git push 时，git 将使用 HTTP 协议，该协议将要求您指定用户名和密码。

# c++ - 如何声明一个类的结构向量

> ID：15834601
> 
> 赞同：1
> 
> 时间：2013-04-05T12:58:06.663
> 
> 标签：c++, oop

我有一堂课，里面有一个结构。如何创建这种结构类型的向量？

这是示例：

```
class A {
public:
    struct mystruct {   
        mystruct (int _label, double _dist) : label(_label), dist(_dist) {}   
        int label;
        double dist;
    };
} 
```

现在在这个类“A”中有一个如下的函数。

```
 myfunc ( vector<mystruct> &mystry ); 
```

所以我的问题是我需要用结构向量调用这个函数。我该如何声明？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T12:59:37.970

使用范围运算符`::`：

```
std::vector<A::mystruct> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:03:46.173

```
class A 
{
public:
    struct mystruct
    {   
        mystruct ( int _label, double _dist ) : label (_label), dist (_dist) {}   
        int label;
        double dist;
    };

    void myfunc(std::vector<mystruct> &mystr);
} 
```

只要你在 mystruct 之后声明 myfunc 就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T13:12:02.347

当你*声明*A 的方法时，`mystruct`已经在作用域中，所以你可以不加限定地使用它：

```
class A {
public:
    struct mystruct {   
        mystruct (int _label, double _dist) : label(_label), dist(_dist) {}   
        int label;
        double dist;
    };

    void myfunc(std::vector<mystruct> &);
} 
```

但是当你调用它时，你*调用*的参数类型取决于你在哪里：

```
void free_function() {
    A a;
    std::vector<A::mystruct> arg;
    a.myfunc(arg);
}

void A::another_method() {
    std::vector<mystruct> arg;
    this->myfunc(arg);
} 
```

# python - 如何使用开放CV在python中计算3D直方图

> ID：15834602
> 
> 赞同：4
> 
> 时间：2013-04-05T12:58:10.670
> 
> 标签：python, opencv, histogram

我想在 python 中计算我的 Cielab 图像的 3D 直方图。我正在使用 openCV 来计算我的直方图。我想使用`compareHist`openCV 的功能比较图像，这就是为什么我使用 openCV 来计算我的图像的 3D 直方图。

我尝试了以下变量：

```
i_lab = image.copy()
i_lab = i_lab.astype(np.uint8)
Range_hist = [[0, 100], [-100, 100], [-100, 100]]    
hist_1 = cv2.calcHist([i_lab], [[0], [1], [2]], None, [[20], [20], [20]], Range_hist) 
```

但它给出了错误`SystemError: error return without exception set` 请告诉我我做错了什么以及是否可以在 python 中使用 openCV 计算 3D 直方图

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-29T15:35:26.970

我在尝试制作 HSV 图像的 3D 直方图时遇到了这个问题，并遇到了同样的错误。事实证明，[OpenCV 文档](http://docs.opencv.org/modules/imgproc/doc/histograms.html#cv2.calcHist)让我们误入歧途。这些文档是为 C++ API 编写的，因此只能用作 Python `cv2`API 的模糊指南（尽管我发现这些文档有时也会误导 C++）。

函数签名如下：

```
cv2.calcHist(images, channels, mask, histSize, ranges[, hist[, accumulate]]) -> hist 
```

关键是`channels`,`histSize`和`ranges`参数应该是平面列表，而不是您的示例中的嵌套列表。尝试以下操作，假设`i_lab`是三通道图像：

```
range_hist = [0, 100, -100, 100, -100, 100]
hist_1 = cv2.calcHist([i_lab], [0, 1, 2], None, [20, 20, 20], range_hist) 
```

如需更完整的示例，请尝试使用[opencvpython 博客中的](http://opencvpython.blogspot.com)[代码清单](https://github.com/abidrahmank/OpenCV2-Python/blob/master/Official_Tutorial_Python_Codes/3_imgproc/comparehist.py)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-31T07:31:29.873

为了在 cielab 中计算直方图，这对我有用：

calcHist 的函数签名：图像、通道、掩码、bin 数量、每个维度中直方图 bin 边界的 dims 数组的数组。

```
img = cv2.imread(file) # in bgr 
hist = cv2.calcHist([img],[0, 1, 2],None,[256, 256, 256],[0, 255, 0, 255, 0, 255]) # in bgr
img = cv2.cvtColor(img, cv2.COLOR_BGR2LAB) # in lab 
hist = cv2.calcHist([img],[0, 1, 2],None,[100, 2*128, 2*128],[0, 100, -128, 127, -128, 127])`# in lab 

correlation = cv2.HISTCMP_CORREL # compare histograms using correlation
corr = cv2.compareHist(img, img2, correlation) 
```

# jquery - 单击图像后获取锚点内的文本

> ID：15834609
> 
> 赞同：0
> 
> 时间：2013-04-05T12:58:22.507
> 
> 标签：jquery

我有几个类似于以下 HTML 的链接，但是文本不同：-

```
<a class="rpLink " href="#">
   <span class="rpOut">
   <span class="rpExpandHandle"></span>
   <img class="rpImage" src="Images/favourite.png">
    <span class="rpText">Baskets with Product </span>
   </span>
</a> 
```

当用户单击最喜欢的图像时，我试图获取文本（在 rpText 内）。

到目前为止，我有以下 JQuery：-

```
 $('.rpItem').on("click", "img", function (e) {
        var text = $(this).find(".rpLink").text();
        e.preventDefault();
        var args = {
            reportName: e
        };
        alert($(this).attr('href'));
        $.ajax({
            type: "POST",
            url: "Default.aspx/AddToFavourites",
            data: JSON.stringify(args),
            contentType: "application/json;charset=utf-8;",
            success: function () {
            },
            error: function () {
                alert("Fail");
            }
        });
    }); 
```

但是我无法获得文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:04:29.660

如果点击事件是最喜欢的img，那么你可以使用`siblings()`

试试这个

```
 $('.rpItem').on("click", "img", function (e) {
    $(this).siblings('span.rpText').text();
    .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:03:35.720

试试这个：

```
var text = $(this).find(".rpText").text(); 
```

# c++ - 如何在 C++ 中读取/写入 excel 复选框状态

> ID：15834612
> 
> 赞同：0
> 
> 时间：2013-04-05T12:58:38.267
> 
> 标签：c++, excel, com, ole

我正在处理一个问题，该问题需要我在 Excel 中的给定单元格中读取/写入复选框的状态。

我知道你可以访问activeX控件，可以使用COM/OLE访问。但是，我无法找到任何解决此问题的方法。事实上，我什至不确定您是否可以使用行列访问复选框。我研究了activeX复选框的属性。找到了 top 和 left 属性，但没有找到 row-column

我想问一下：1.有没有直接的方法可以做到这一点。2.如果不是，任何间接方式，比如以某种方式获取顶部/左列，然后获取行/列位置并比较两者。3\. 有没有办法对表单控件做同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T06:40:13.993

感谢大家的回复。我在 MSDN 上发现了一些有用的东西。稍微修改了一下，分享给大家。。谢谢大家的支持

（原谅格式）

msdn 中的 Autowrap() 函数完全未经编辑：

```
HRESULT AutoWrap(int autoType, VARIANT *pvResult, IDispatch *pDisp, LPOLESTR ptName, int cArgs...) {
// Begin variable-argument list...
va_list marker;
va_start(marker, cArgs);

if(!pDisp) {
    MessageBox(NULL, "NULL IDispatch passed to AutoWrap()", "Error", 0x10010);
    _exit(0);
}

// Variables used...
DISPPARAMS dp = { NULL, NULL, 0, 0 };
DISPID dispidNamed = DISPID_PROPERTYPUT;
DISPID dispID;
HRESULT hr;
char buf[200];
char szName[200];

// Convert down to ANSI
WideCharToMultiByte(CP_ACP, 0, ptName, -1, szName, 256, NULL, NULL);

// Get DISPID for name passed...
hr = pDisp->GetIDsOfNames(IID_NULL, &ptName, 1, LOCALE_USER_DEFAULT, &dispID);
if(FAILED(hr)) {
    sprintf(buf, "IDispatch::GetIDsOfNames(\"%s\") failed w/err 0x%08lx", szName, hr);
    MessageBox(NULL, buf, "AutoWrap()", 0x10010);
    _exit(0);
    return hr;
}

// Allocate memory for arguments...
VARIANT *pArgs = new VARIANT[cArgs+1];
// Extract arguments...
for(int i=0; i<cArgs; i++) {
    pArgs[i] = va_arg(marker, VARIANT);
}

// Build DISPPARAMS
dp.cArgs = cArgs;
dp.rgvarg = pArgs;

// Handle special-case for property-puts!
if(autoType & DISPATCH_PROPERTYPUT) {
    dp.cNamedArgs = 1;
    dp.rgdispidNamedArgs = &dispidNamed;
}

// Make the call!
hr = pDisp->Invoke(dispID, IID_NULL, LOCALE_SYSTEM_DEFAULT, autoType, &dp, pvResult, NULL, NULL);
if(FAILED(hr)) {
    sprintf(buf, "IDispatch::Invoke(\"%s\"=%08lx) failed w/err 0x%08lx", szName, dispID, hr);
    MessageBox(NULL, buf, "AutoWrap()", 0x10010);
    _exit(0);
    return hr;
}
// End variable-argument section...
va_end(marker);

delete [] pArgs;

return hr;
} 
```

这是编辑后的 ​​main() 函数：

```
int main()
{
 // Initialize COM for this thread...
   CoInitialize(NULL);

   // Get CLSID for our server...
   CLSID clsid;
   HRESULT hr = CLSIDFromProgID(L"Excel.Application", &clsid);

   if(FAILED(hr)) {

      ::MessageBox(NULL, "CLSIDFromProgID() failed", "Error", 0x10010);
      return -1;
   }

   // Start server and get IDispatch...
   IDispatch *pXlApp;
   hr = CoCreateInstance(clsid, NULL, CLSCTX_LOCAL_SERVER, IID_IDispatch, (void **)&pXlApp);

   if(FAILED(hr)) {
      ::MessageBox(NULL, "Excel not registered properly", "Error", 0x10010);
      return -2;
   }

   // Make it visible (i.e. app.visible = 1)
   {
      VARIANT x;
      x.vt = VT_I4;
      x.lVal = 1;
      AutoWrap(DISPATCH_PROPERTYPUT, NULL, pXlApp, L"Visible", 1, x);
   }

   // Make it visible (i.e. app.visible = 1)
   {
      VARIANT x;
      x.vt = VT_BSTR;
      x.bstrVal = ::SysAllocString (L"D:\\");
      AutoWrap(DISPATCH_PROPERTYPUT, NULL, pXlApp, L"DefaultFilePath", 1, x);
   }

   // Get Workbooks collection
   IDispatch *pXlBooks;
   {
      VARIANT result;
  VariantInit(&result);
  AutoWrap(DISPATCH_PROPERTYGET, &result, pXlApp, L"Workbooks", 0);
  pXlBooks = result.pdispVal;
   }

   // Call Workbooks.Add() to get a new workbook...
   IDispatch *pXlBook;
   {
      VARIANT parm;
  parm.vt = VT_BSTR;
  parm.bstrVal = ::SysAllocString(L"a.xlsx");

  VARIANT result;
  VariantInit(&result);
  AutoWrap(DISPATCH_METHOD, &result, pXlBooks, L"Open", 1,parm);
  pXlBook = result.pdispVal;
    }

   // Get ActiveSheet object
   IDispatch *pXlSheet;
   {
enter code here
  VARIANT result;
  VariantInit(&result);
  AutoWrap(DISPATCH_PROPERTYGET, &result, pXlBook, L"ActiveSheet",0);
  if(result.pdispVal != NULL)
    pXlSheet = result.pdispVal;
   }

   //Get shapes collection..
    IDispatch *pShapes;
    {
       VARIANT result;
   VariantInit(&result);
   AutoWrap(DISPATCH_PROPERTYGET, &result, pXlSheet, L"Shapes",0);
   pShapes = result.pdispVal;
}

int nControls;  
{
   VARIANT result;
   VariantInit(&result);
   AutoWrap(DISPATCH_PROPERTYGET, &result, pShapes, L"Count",0);
   if(result.vt == VT_I4)
       nControls = result.lVal;
}

for(int i = 1; i <= nControls; ++i) {

    IDispatch * pShape;

    {  
        VARIANT x;
        x.vt = VT_I4;
        x.lVal = i;

        VARIANT result;
        VariantInit(&result);
        AutoWrap(DISPATCH_METHOD, &result, pShapes, L"Item",1, x);
        pShape = result.pdispVal;
    }   

    IDispatch *pControlFormat = NULL;
    {
        VARIANT result;
        VariantInit(&result);
        AutoWrap(DISPATCH_PROPERTYGET, &result, pShape, L"Type",0);

        // msoFormControl
        if(result.lVal == 8)
        {
            VARIANT result0;
            VariantInit(&result0);
            AutoWrap(DISPATCH_PROPERTYGET, &result0, pShape, L"FormControlType",0);

            // xlCheckBox
            if(result0.lVal == 1) {

                // Get range containing cell to be tested
                VARIANT result2;
                VariantInit(&result2);
                IDispatch * range;
                {
                    VARIANT param1;
                    param1.vt= VT_BSTR;
                    param1.bstrVal = ::SysAllocString(L"F5");

                    VARIANT result3;
                    VariantInit(&result3);
                    AutoWrap(DISPATCH_PROPERTYGET, &result3, pXlSheet,L"Range",1,param1);
                    range = result3.pdispVal;
                }

                // Get the top, left, bottom, right of cell
                DOUBLE top, left, bottom, right;
                {
                    VARIANT result4;
                    VariantInit(&result4);

                    AutoWrap(DISPATCH_PROPERTYGET,&result4, range,L"Top",0);
                    top = result4.dblVal;

                    AutoWrap(DISPATCH_PROPERTYGET,&result4, range,L"Left",0);
                    left = result4.dblVal;

                    AutoWrap(DISPATCH_PROPERTYGET,&result4, range,L"Height",0);
                    bottom = top + result4.dblVal;

                    AutoWrap(DISPATCH_PROPERTYGET,&result4, range,L"Width",0);
                    right = left + result4.dblVal;
                }
                range->Release();

                // Get the top, left of checkbox
                FLOAT shapetop, shapeleft;
                {
                    VARIANT result5;
                    VariantInit(&result5);

                    AutoWrap(DISPATCH_PROPERTYGET,&result5, pShape,L"Top",0);
                    shapetop = result5.fltVal;

                    AutoWrap(DISPATCH_PROPERTYGET,&result5, pShape,L"Left",0);
                    shapeleft = result5.fltVal;
                }

                // Get hold of control format
                VARIANT result1;
                VariantInit(&result1);
                AutoWrap(DISPATCH_PROPERTYGET, &result1, pShape, L"ControlFormat",0);
                pControlFormat = result1.pdispVal;

                // Check if the checkbox if within the range boundary. If yes, then check it, else dont
                if((top <= shapetop) && (bottom >= shapetop) && (left <= shapeleft) && (right >= shapeleft)) {

                    // Perpare the parameter
                    VARIANT parm;
                    VARIANT_BOOL t = VARIANT_TRUE;;
                    parm.vt = VT_BOOL;
                    parm.pboolVal = &t;

                    AutoWrap(DISPATCH_PROPERTYPUT, NULL, pControlFormat, L"Value", 1, parm);
                }                   
            }
        }
    }

    if(pControlFormat != NULL) pControlFormat->Release();
    pShape->Release();
}

   // to save when we tell Excel to quit...
   {
       VARIANT x;
  x.vt = VT_I4;
  x.lVal = 1;
  AutoWrap(DISPATCH_METHOD, NULL, pXlBook, L"Save", 0);
    }

   // Wait for user...
   ::MessageBox(NULL, "All done.", "Notice", 0x10000);

   // Tell Excel to quit (i.e. App.Quit)
   AutoWrap(DISPATCH_METHOD, NULL, pXlApp, L"Quit", 0);

   // Release references...

   pShapes->Release();

   pXlSheet->Release();
   pXlBook->Release();
   pXlBooks->Release();
   pXlApp->Release();

   // Uninitialize COM for this thread...
   CoUninitialize();

   return 0;
} 
```

更多详情： http:
[//support.microsoft.com/kb/216686](http://support.microsoft.com/kb/216686)
[http://msdn.microsoft.com/en-us/library/office/bb149081%28v=office.12%29.aspx](http://msdn.microsoft.com/en-us/library/office/bb149081%28v=office.12%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:26:29.520

尽管看起来，电子表格中不包含复选框；它们被画在上面。所以他们对行或列一无所知，你不能那样引用他们。

复选框保存在`OLEObjects`集合中。[此处](http://msdn.microsoft.com/en-us/library/bb178183%28v=office.12%29.aspx)的此示例应为您提供所需的信息：

```
Private Sub chkFinished_Click()
    ActiveSheet.OLEObjects("CheckBox1").Object.Value = 1
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:26:47.453

我不认为复选框是“在单元格中”，有几种方法（我能想到的）可以获得值。

第一：不要检查复选框的值，检查其链接单元格的值（如果已分配）

第二：使用类似下面的伪代码来确定哪个控件在哪里。

```
ForEach Sheet.Controls As Control
  If Control.Type = Checkbox Then
    Row = 1
    YPos = 0
    Do
      If YPos + Sheet.Rows(Row).RowHeight > Control.Top Then
        Exit Do
      Else
        YPos = YPos + Sheets.Rows(Row).RowHeight
      End If
    Loop
    Column = 1
    XPos = 0
    Do
      If XPos + Sheet.Columns(Column).ColumnWidth > Control.Left Then
        Exit Do
      Else
        XPos = XPos + Sheets.Columns(Column).ColumnWidth
      End If
    Loop
    Debug.Print Control.Name & " is in Cell(" & XPos & ", " & YPos & ")"
  End If
End ForEach 
```

# node.js - 如何在node.js中格式化mongodb返回的日期[数据在数组中]

> ID：15834616
> 
> 赞同：0
> 
> 时间：2013-04-05T12:58:54.843
> 
> 标签：node.js, mongodb, mongoose

我正在使用猫鼬并使用

```
objmodel.find(query, function(err,result){        
callbackvalue(err,result);
}); 
```

代码原型。

该结果对象包含类似 json 的数组

```
{
  "feild1":"",
  "datefield" :"",
  "field":[ 
    {
     "datefield":""
     "field2":""
 } 
```

这是结果中一个文档的样本。

我需要将日期格式更改为 IST 格式，并再次需要在浏览器中显示相同的 json 数组。

实现它的最佳方法是什么？

我放了一个循环并更改了结果对象中的所有内容。在 mongodb 中，实际上 5 小时 30 分钟是滞后的，但在 node.js 中制作 console.log(field) 时相同的字段是正确的。但我希望在 json 中具有相同的效果，并且它必须作为结果作为 json 发送到响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:03:12.613

要更改架构输出，请在 toObject 方法中使用 transform 选项，如下所示：

```
mymodel.toObject({ transform : function(model, modelObject, options){
    _.each(modelObject.field, function(field, index){
        modelObject.field[index].datefield = "yourconverteddate field.datefield";
    });         

}}); 
```

# jquery - jquery preventdefault 仅在第一次触摸时

> ID：15834617
> 
> 赞同：1
> 
> 时间：2013-04-05T12:58:57.257
> 
> 标签：jquery, mobile, hover, preventdefault

我希望学习一种方法，使用 jquery 仅针对触摸编写以下代码？

```
$(".portfolio a").one("click", false); 
```

此代码用于`hover`可视菜单链接上的事件。我想阻止链接在第一次触摸时通过，所以悬停事件发生在第一次触摸时，第二次触摸会带你进入链接。

悬停类与href相关...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-21T16:07:32.017

只需在取消绑定链接一次之前测试触摸行为：

```
if ("ontouchstart" in document.documentElement) {
   $(".portfolio a").one("click", false, function(e){
     e.preventDefault();
   }
} 
```

或相反亦然

```
$(".portfolio a").one("click", false, function(e){
   if ("ontouchstart" in document.documentElement) {
     e.preventDefault();
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:01:42.150

添加一个`.hover`类可能比使用`:hover`伪选择器更自然。这将使您能够执行以下操作：

```
$(".portfolio a").one("click", function(e) {
    e.preventDefault();
    $(this).addClass('hover');
}); 
```

然后，下一次单击将照常进行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:01:42.713

```
$(".portfolio a").one("click", false, function(event){

event.preventDefault();

};); 
```

尝试这个

# c# - 避免在输入字段中注入脚本

> ID：15834621
> 
> 赞同：1
> 
> 时间：2013-04-05T12:59:10.910
> 
> 标签：c#, asp.net-mvc

为了避免通过输入字段注入脚本，我`ValidateInputAttribute`在控制器操作中将 设置为 false。在我看来，我使用的`<%:`是`<%=`.

我想知道的是，除了上面还有更通用的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:38:42.063

> 为了避免通过输入字段注入脚本，我将 ValidateInputAttribute 设置为 false

这与您想要达到的效果完全相反。它允许脚本注入。当您将其设置为 false 时，基本上您将禁用请求值的验证。

> 在我看来，我使用的是 <%: 而不是 <%=

这是在视图上显示时对所有数据进行 HTML 编码的正确方法。当然，如果您正在使用 HTML 帮助程序（例如 Html.DisplayFor 或 Html.EditorFor 您不需要使用`<%:`，因为这些帮助程序已经负责正确编码输出）。

# mysql - MySQL的设置操作

> ID：15834623
> 
> 赞同：3
> 
> 时间：2013-04-05T12:59:22.497
> 
> 标签：mysql

MySQL可以使用集合操作`intersect`（​​∩）和`except`（-）吗？如果可以，请举个例子如果不能，那是什么操作呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:09:03.413

在 mysql 中可以使用 intersect，但你必须稍微不同地编写它。这是一个例子（[这里](http://www.bitbybit.dk/carsten/blog/?p=71)是一个很好的描述的链接）：

```
SELECT a.member_id, a.name
  FROM a INNER JOIN b
 USING (member_id, name) 
```

您还可以在页面中找到除（减号）的示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:07:34.930

Mysql 不支持 intersect 和 except，但你可以通过其他方式实现。

相交：

```
SELECT a.x, a.y FROM a JOIN b ON a.x = b.x AND a.y = b.y; 
```

除了：

```
SELECT a.* FROM a WHERE NOT EXISTS (SELECT 1 FROM b WHERE b.x = a.x) 
```

# python - 如何在 setup.py 中指定显式 python 打包依赖项？

> ID：15834628
> 
> 赞同：7
> 
> 时间：2013-04-05T12:59:32.387
> 
> 标签：python, python-2.7, pip, setup.py

我想创建一个 python 包`mycode`，使用`pip`( `setup.py`) 安装，它依赖于另一个包`base`。为了合并这个包依赖项，我按照[setup.py 说明](http://docs.python.org/2/distutils/setupscript.html#relationships-between-distributions-and-packages)`setup`并在 函数中创建了一个条目，`setup.py`内容如下：

```
'requires': ['base'] 
```

在我`python setup.py sdist`用. `pip install`_ 似乎输入被忽略了。`mycode``base``requires``setup.py`

任何想法出了什么问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T13:21:19.743

您需要指定`install_requires`，请参阅[新的和更改的`setup`关键字](http://setuptools.readthedocs.io/en/latest/setuptools.html#new-and-changed-setup-keywords)。

该`requires`领域过于模糊和不精确，因此`setuptools`民间（因此`easy_install`，从其`pip`演变而来）添加了更具体的领域。此外，还有运行测试所需的依赖项`setup_requires`和字段。`test_requires``setup.py`

# android - Android DroidGap 禁用后退按钮

> ID：15834629
> 
> 赞同：10
> 
> 时间：2013-04-05T12:59:35.847
> 
> 标签：android, cordova, back-button

请任何人建议，我如何在使用时禁用后退按钮按下事件`PhoneGap`？

我需要在我的`Activity`, （`DroidGap`代码）中做一些事情来控制后退按钮事件。

甚至，以下代码在我的 . 中运行良好`Activity`，但在与`DroidGap`.

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
     if (keyCode == KeyEvent.KEYCODE_BACK) {
         //preventing default implementation previous to android.os.Build.VERSION_CODES.ECLAIR
         return true;
     }
     return super.onKeyDown(keyCode, event);    
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T10:44:26.453

打电话帮了我`setOnKeyListener`。`appView`

我只需要在上面的代码片段中做一个小的改动，如下所示：

```
appView.setOnKeyListener(new OnKeyListener() { 
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            return true;
        }
        return onKeyDown(keyCode, event); 
    } 
}); 
```

**已编辑**

按键事件时实际上发生了两个动作 - `Action Up`&`Action Down`

因此，应使用以下内容来获取关键事件。

```
appView.setOnKeyListener(new OnKeyListener() { 
    public boolean onKey(View v, int keyCode, KeyEvent event) {
        if (keyCode == KeyEvent.KEYCODE_BACK && event.getAction() == KeyEvent.ACTION_UP) {
            // Do Here whatever you want 
            return true;
        }
        return onKeyDown(keyCode, event); 
    } 
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-05-29T07:23:28.720

比纳伦德拉的版本略好。它可以正确处理除后退按钮以外的按键呼叫。例如，将下面的代码放在 onCreate 覆盖中。

```
appView.setOnKeyListener(new View.OnKeyListener() { 

        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if (event.getAction() == KeyEvent.ACTION_UP) {
                if(keyCode == KeyEvent.KEYCODE_BACK) {
                    // Do Stuff Here
                    return true;
                }
                return onKeyUp(keyCode, event);
            }
            return onKeyDown(keyCode, event); 
        } 
   }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T13:03:03.873

就我而言，我像这样使用 Javascript + jquery：

```
$(document).on('backbutton',
     function(e){

         e.preventDefault();

         // do whatever you like here.

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-05T05:11:10.437

```
// ************ stop the back button  *****************

public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {

        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-25T06:35:26.590

```
if (keyCode == KeyEvent.KEYCODE_BACK) {

    return true;
} 
```

# map - OpenLayers - 关闭 IE 中的地图选择

> ID：15834631
> 
> 赞同：0
> 
> 时间：2013-04-05T12:59:38.367
> 
> 标签：map, selection, openlayers

我在 div 中有一个地图，但是当用户在 div 外部单击然后拖动到地图中时，地图被选中并变为蓝色，这对于必须在之前单击多个地方的用户来说有点不安蓝色终于消失了。

我发现以下 css 属性可以在 .olMap 类中设置为 none，这会在 Chrome、Firefox、Safari 和 Opera 中关闭地图的选择，但在 IE 中则没有。

```
.olMap
{
    -moz-user-select: none;
    -khtml-user-select: none;
    -webkit-user-select: none;
    -o-user-select: none;
} 
```

有谁知道可以设置这样的另一个属性来关闭 IE 中的地图选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:51:32.213

您可以使用 -ms-user-select: none; 适用于 IE 10+。

对于早期版本的 IE，请尝试：

```
<div unselectable="on"> </div> 
```

# angularjs - 指令应该与 Angular JS 中的控制器对话吗？

> ID：15834632
> 
> 赞同：7
> 
> 时间：2013-04-05T12:59:39.847
> 
> 标签：angularjs

我一直在观看 John Linquist 的视频，在一个视频中他举了一个例子：

```
var app = angular.module('twitterApp', [])

app.controller("AppCtrl", function ($scope) {
   $scope.loadMoreTweets = function () {
      alert("Loading tweets!");
   }
}

app.directive("enter", function() {
   return function (scope, element, attrs) {
      element.bind("mouseenter", function () {
         scope.LoadMoreTweets();
      })
   }
} 
```

我想知道的一件事是本示例中的指令是否应该与控制器对话，或者创建服务然后让指令与服务对话是否是一种更好的编程实践？我想我仍然不确定指令以这种方式与控制器交谈是否是常见的做法。

[U管视频](http://www.youtube.com/watch?v=LJmZaxuxlRc&list=PLP6DbQBkn9ymGQh2qpk9ImLHdSH5T7yw7&index=14)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T13:50:17.643

我会怎么做

```
<span enter="loadMoreTweets()">Something</span> 
```

JS

```
app.controller('AppController', function ($scope) {
   $scope.loadMoreTweets = function () {
      console.log("Loading tweets!");
   }  
})

app.directive("enter", function() {
   return {
     link: function (scope, element, attrs) {
       element.bind("mouseenter", function () {
          scope.$apply(attrs.enter)
       })
     }
   }
}); 
```

演示：[Plunker](http://plnkr.co/edit/seVRv7lgkXQzvV74t85Q?p=preview)

另一种实现相同目标的方法

```
app.directive("enter", function() {
   return {
    scope: {
      callback: '&enter'
    },
    link: function (scope, element, attrs) {
       element.bind("mouseenter", function () {
          scope.$apply('callback()')
       })
     }
   }
}); 
```

演示：[Plunker](http://plnkr.co/edit/DrruUYZPMiKsX5ROilh3)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T13:04:16.110

**这是常见的做法吗？**

是的，这是常见的做法，指令经常需要访问 $scope 的变量，并调用方法（如`LoadMoreTweets`）。

即使在[官方文档](http://docs.angularjs.org/guide/directive)中，他们也有类似..

```
scope.$watch(...) 
```

...fom 在指令中（控制器可能正在对监视变量进行更改）。

指令以这种方式与控制器通信是完全合适的。

您甚至可以将控制器本身（不仅仅是作用域）注入到`link`指令的方法中。[查看http://docs.angularjs.org/guide/directive](http://docs.angularjs.org/guide/directive)的“链接功能”部分。

*“控制器在所有指令之间共享，这允许指令将控制器用作通信通道。”*

**但是我*可以*使用服务吗？**

当然可以。问题是为什么？如果您正在使用单个页面（例如显示推文）并且控制器已经具有`$scope.tweets`变量和`$scope.loadMoreTweets`方法，那么如果您尝试将服务粘贴在不需要的地方，那么您将过于复杂。

另一方面，服务非常适合*应用程序范围的*数据，例如用户配置文件。如果您的指令需要访问当前登录的用户，那么通过 service 来实现这一点很有意义。

从文档：

*Angular 服务是执行 Web 应用程序常见的特定任务的单例，例如 $http 服务，它提供对浏览器的 XMLHttpRequest 对象的低级别访问。*

**如果您有一个最适合单例的应用程序范围的任务，请务必使用服务。如果您只需要从指令访问/修改 $scope，只需直接与控制器对话，或触发控制器可以响应的事件。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T13:46:26.000

像这样调用外部作用域函数是有风险的，因为它对周围作用域做出假设。如果指令在不同的上下文中使用会发生什么？

可重用指令可以采用更好的[1] 策略与外部世界进行通信：

*   将其依赖关系推迟到服务。这更适合系统范围的功能。我想它不适用于您的示例。
*   定义一个包含某些`&attr`属性的隔离范围，该属性绑定到外部范围的表达式。该指令可以将该表达式作为其私有范围的方法来调用。

作为第二种策略的一个例子，我修改了你的例子。在此处查看实际操作[http://plnkr.co/5uOBNu](http://plnkr.co/5uOBNu)

```
var app = angular.module('twitterApp', []);
app.controller("AppCtrl", function ($scope) {
    $scope.loadMoreTweets = function() {
        alert("Loading tweets!");
    };
});

app.directive("specialEnter", function() {
    return {
        scope: {
            onEnter: '&'
        },
        link: function(scope, element, attrs) {
            element.bind("mouseenter", function() {
                scope.onEnter();
            });
        }
    };
});

<div ng-controller="AppCtrl">
    <div special-enter on-enter="loadMoreTweets()">Hover here!</div>
</div> 
```

[1] “更好”在某种意义上避免了硬性依赖。

# backbone.js - 如何在监听 jqGrid 事件的 Backbone.js 视图中获取正确的事件目标？

> ID：15834635
> 
> 赞同：0
> 
> 时间：2013-04-05T12:59:53.247
> 
> 标签：backbone.js, jqgrid, backbone-views, backbone-events

我`jqGrid`一起使用`Backbone.js`并且我有代表网格的视图。代码如下：

```
var GridView = Backbone.View.extend({
    initialize:     function(){
        _.bindAll(this);
    },
    beforeSelectRow:function(e){
        return $(e.target).is('img') ? false : true;
    },
    render:         function(){
        var self = this;

        this.$el.load(
            this.collection.url + 'grid/',
            function(){
                self.$jqGrid = self.$('.jqGrid');
                self.$jqGrid.on('jqGridBeforeSelectRow',self.beforeSelectRow);
            }
        );

        return this;
    }
}); 
```

网格的行可以包含图像。如果我单击某个图像，我会期望网格的行不会被选中。我监听了触发的事件`jqGridBeforeSelectRow`，`jqGrid`但我得到了一个不正确的事件目标。我希望事件目标是图像。我发现了类似的问题[JQGrid Not select row when click in a specific cell](https://stackoverflow.com/questions/5967754) and there are all works。我的听众怎么了？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:24:00.457

首先，请更改：

```
return $(e.target).is('img') ? false : true; 
```

到：

```
return !$(e.target).is('img'); 
```

其次，您应该看一下[jqGrid 的文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aevents)，它说侦听器采用的参数是 (rowid, e)。所以基本上你使用的*e参数是 rowid，没有任何目标键。*

第三，还请查看[Backbone 的文档](http://backbonejs.org/#Events-listenTo)，如果您的版本足够新（或者如果您可以更新），请考虑删除`_.bindAll(this)`并改用 Model#listenTo 方法，如`self.listenTo(self.$jqGrid, self.beforeSelectRow)`.

最后但同样重要的是，您确定 beforeSelectRow 事件是由您的 $jqGrid 元素触发的吗？可能不是这样。但这只是在进行这些更改后验证它是否不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:11:50.040

我自己不使用 Backbone，但我希望我理解你是正确的。如果单击的是网格内部的图像，您想拒绝选择网格的行。回调`beforeSelectRow`是事件的事件处理程序`jqGridBeforeSelectRow`。如果我理解你是正确的，那么同一个事件处理程序可以通过以下方式绑定

```
$("#list").bind("jqGridBeforeSelectRow", function (e) {
    return $(e.target).is('img') ? false : true;
}); 
```

事件处理程序是错误的，因为`e.target`它始终`<table>`是元素的 DOM，它是网格的基本元素。原因是*元素*`jqGridBeforeSelectRow`的自定义*事件`<table>`*。

正确的实施将是

```
$("#list").bind("jqGridBeforeSelectRow", function (e, rowid, eventOriginal) {
    return !$(eventOriginal.target).is("img");
}); 
```

发起“jqGridBeforeSelectRow”事件`eventOriginal`的原始事件的表示事件对象。`click`我认为将更改转换为 Backbone 版本对您来说很清楚。

[演示](http://www.ok-soft-gmbh.com/jqGrid/TestChart1.htm)演示了结果。

# java - 如何在 ubuntu 中为 java 应用程序提供进程名称

> ID：15834646
> 
> 赞同：1
> 
> 时间：2013-04-05T13:00:22.803
> 
> 标签：java, ubuntu

我正在运行两个`java`应用程序`ubuntu`，我为此搜索过，但我不知道如何为每个 java 应用程序提供唯一的进程名称。我将应用程序作为 jar 文件（`java -jar app.jar`）运行。但是当我看到使用 shell 命令的进程时最佳 。

它只显示 java，而不是应用程序名称。有关此的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:54:19.400

### 解决方案

如果您在后台运行命令（`&`在末尾添加），您可以获得 using 的 PID [`$!`](http://www.tldp.org/LDP/abs/html/internalvariables.html#PIDVARREF)：

> 后台运行的最后一个作业的 PID（进程 ID）

### 命令

```
java -jar app.jar &; echo $! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:04:43.853

您可以从终端尝试`ps -aef | grep java`。它将列出正在运行的 Java 命令，您可以通过查看命令参数从中推断出应用程序名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:41:36.480

如果这是启动/停止 Java 进程，您可以执行如下启动脚本：

```
#!/bin/sh

PROGRAM_NAME=sicm
PROGRAM_HOME=/usr/local/sicm
PIDFILE=/var/run/$PROGRAM_NAME.pid

application_start() {
        CMDLINE="/usr/lib/java/bin/java -jar $PROGRAM_NAME.jar"
        echo -n "Starting $PROGRAM_NAME daemon: $CMDLINE"
        cd $PROGRAM_HOME

        /usr/lib/java/bin/java -classpath lib -jar $PROGRAM_NAME.jar &
        ps -Ao pid,command | grep java | grep $PROGRAM_NAME.jar | awk '{print $1}' > $PIDFILE
        echo
}

application_stop() {
        echo -n "Stopping $PROGRAM_NAME daemon..."

        if [ -r $PIDFILE ]; then
                PID=`cat $PIDFILE`
                if [ $PID -gt 0 ]; then
                        kill $PID
                        echo
                        sleep 1
                        fi
                rm -f $PIDFILE
        fi
        killall $PROGRAM_NAME
}

application_restart() {
        application_stop
        sleep 1
        application_start
}

case "$1" in
'start')
        application_start
        ;;
'stop')
        application_stop
        ;;
'restart')
        application_restart
        ;;
*)
        echo "usage $0 start|stop|restart"
esac 
```

# css - 您可以设置文本输入的先前提交值列表的样式吗？

> ID：15834649
> 
> 赞同：-1
> 
> 时间：2013-04-05T13:00:35.040
> 
> 标签：css

![http://i.stack.imgur.com/c6xsL.jpg](https://i.stack.imgur.com/jNpOR.jpg)

是否可以使用 CSS 来设置文本输入中出现的先前提交值列表的样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:50:08.257

使用萤火虫，似乎该下拉列表不会被添加到 DOM 中。可能在浏览器的 chrome 级别处理。

如果您想设置类似的样式，则必须自己跟踪以前输入的值。无论是使用 cookie 还是 HTML5 本地存储，您都可以为每个用户保存他们之前输入的值，并让 Javascript 创建您自己的预填充列表，您可以按照自己喜欢的方式设置样式。

# c# - 无需进行无数次操作即可形成字符串

> ID：15834653
> 
> 赞同：1
> 
> 时间：2013-04-05T13:00:56.513
> 
> 标签：c#, string

在解析 html Web 文档时，我最终得到的字符串可能如下所示：

"钢铁之刃 \n \n \n \n \n典型 - 你的情况 \n 28\n 347\n \n $8.47 \n \n1234567891011121314151617181920212223242526272829303132"

我在这个字符串中想要的只是这些值：

*   一根弦“钢之刃”
*   价值 8.47 美元的 int

我怎样才能轻松地解析字符串而不必执行多个`string.Replace`or `string.Split`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T13:02:18.470

如果你事先知道格式，你可以写一个正则表达式来解析它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:10:51.507

如果你知道格式，你可以这样做：

```
 string first = yourString.Split('\n')[0]; //Blades of Steel
  string second = yourString.Split('\n')[9]; //$8.47 
```

# java - getRuntime 与管道？

> ID：15834656
> 
> 赞同：0
> 
> 时间：2013-04-05T13:01:03.543
> 
> 标签：java, runtime

我想在 java 程序中执行以下命令。但它只执行第一部分。| 之后的部分 不执行

```
Process process = Runtime.getRuntime().exec(" adb devices | tail -n +2 | cut -sf 1");

        process.waitFor(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:04:19.380

您需要在 shell 中运行它。试试这个：

```
Process process = Runtime.getRuntime().exec(new String[] {
        "/bin/sh",
        "-c",
        "adb devices | tail -n +2 | cut -sf 1"
});
process.waitFor(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:04:36.167

请改用脚本，因为 Pipe 本身是 shell 的一部分。

或者做这样的事情：

```
String[] commands = {
"/bin/sh",
"-c",
"ls /etc | grep release"
};

Process p = Runtime.getRuntime().exec(commands); 
```

# c# - 如何仅使用单个键查找来改变字典条目？

> ID：15834660
> 
> 赞同：0
> 
> 时间：2013-04-05T13:01:17.150
> 
> 标签：c#, dictionary

假设我需要增加`Value`a 中的条目`Dictionary`，例如：

```
public void Increment( string key, int increment )
{
    m_dict[key] += increment;
} 
```

并且还假设我需要在没有条目时使其工作`key`，例如：

```
public void Increment( string key, int increment )
{
    if ( m_dict.ContainsKey( key ) )
    {
        m_dict[key] += increment;
    }
    else
    {
        m_dict[key] = increment;
    }
} 
```

有没有办法将`key`查找次数减少到一个？

我能想到的最好的解决方案是以下，这有点笨拙并且使用两个查找：

```
public void Increment( string key, int increment )
{
    long value;
    if ( m_dict.TryGetValue( key, out value ) )
    {
        m_dict[key] = value + increment;
    }
    else
    {
        m_dict.Add( key, increment );
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:07:43.263

I'm not certain whether it only does the one lookup under the hood, but `ConcurrentDictionary` has an `AddOrUpdate` method that has the behaviour you're looking for, but as I said, I can't be sure of the number of lookups.

See: [http://msdn.microsoft.com/en-gb/library/ee378675.aspx](http://msdn.microsoft.com/en-gb/library/ee378675.aspx)

Furthermore, I believe Dictionary has the automatic `AddOrUpdate` behaviour:

`_dict["key"] = 12` will always mutate or add depending on whether it exists already.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:39:22.443

你可以使用类似的东西。

```
public class Holder {
    public long Value { get; set; }
}

public void Increment(Dictionary<string, Holder> dict, string key, int increment) {
        Holder box;
        if(dict.TryGetValue(key, out box)) box.Value += increment;
        else {
            dict[key] = new Holder {
                Value = increment
            };
        }
    } 
```

包装类不会对性能产生明显影响，因为这几乎等于已经发生的装箱/拆箱（我认为）。

我做了一个小测试，性能似乎更好，您必须确认所有用例的性能是否更好。

```
 [Fact]
        public void benchmark_dictionary() {
            var dictionary = new Dictionary<string, long> {
                {"a", 1},
                {"b", 2},
                {"c", 3}
            };

            var dictionary2 = new Dictionary<string, Holder> {
                {
                    "a", new Holder() {
                        Value = 1
                    }
                }, {
                    "b", new Holder() {
                        Value = 2
                    }
                }, {
                    "c", new Holder() {
                        Value = 3
                    }
                }
            };

            var iterations = 1000000;
            var timer = new Stopwatch();
            timer.Start();
            for(int i = 0; i < iterations; i++)
                Increment(dictionary, "a", 1);
            timer.Stop();

            // DumpOnConsole() -> Console.WriteLine( objetc ) 
            timer.ElapsedMilliseconds.DumpOnConsole();

            dictionary.DumpOnConsole();

            timer.Restart();

            for(int i = 0; i < iterations; i++)
                Increment(dictionary2, "a", 1);
            timer.Stop();

            timer.ElapsedMilliseconds.DumpOnConsole();

            dictionary2.DumpOnConsole();
        } 
```

问候。

# c++ - 使用文本装置——谷歌测试

> ID：15834662
> 
> 赞同：1
> 
> 时间：2013-04-05T13:01:21.583
> 
> 标签：c++, tdd, fixtures, googletest

我有一堂课，我打算使用 Google 测试框架对其进行测试。我很好奇为什么需要“文本装置”？（如此处所述：[https](https://code.google.com/p/googletest/wiki/V1_6_Primer) ://code.google.com/p/googletest/wiki/V1_6_Primer ）。我不能只使用几个 TEST() 宏吗？为什么需要固定装置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:30:32.977

它们不是绝对必要的，但允许您共享许多不同但相关的测试共享的变量初始化和脚手架代码。简而言之，这是一个方便的功能，可以让您编写更短的测试。这有助于提高可读性并缩短 TDD 中的测试代码周期。

# jquery - JQuery浏览器调整大小启动功能

> ID：15834665
> 
> 赞同：0
> 
> 时间：2013-04-05T13:01:26.037
> 
> 标签：jquery, function, resize

我有以下功能，它在准备好文档时按预期工作，但在调整大小时它不会注册大小更改并在调整大小之前执行大小警报。我已经添加了`menuInitialized`作为标志来尝试解决这个问题，但现在它初始化了多次。例如，如果我多次调整浏览器的大小，它将警告“小”、“大”、“小”。

```
var menuInitialized = false;

function doMenu() {
    var left = $('.c_left').height();
    var right = $('.c_right').height();
    if (left > right) {
        $('.c_right').css('height', left + 'px');
    }
    $(".c_left, .top_right, .c_right, .c_myaccount, .header_image, .c_footer, .copyright, .accepts, .myaccount, .header_logo").removeAttr('style');
    var $menu = $(".c_left");
    var width = $(window).width();
    var status = 'closed';
    var width = $(window).width();
    if (width < 550) {
        if (!menuInitialized) {
            $('.icon-menu-2').on('click', function(event) {
                alert('small');
                if (status === 'closed') {
                    $menu.animate({
                        width: 185,
                        marginLeft: 0,
                        display: 'toggle'
                    }, 'fast');
                    $(".top_right, .c_right, .c_myaccount, .c_footer, .copyright, .accepts").animate({
                        marginLeft: 185,
                        display: 'toggle'
                    }, 'fast');
                    $(".myaccount").animate({
                        marginRight: -185,
                        display: 'toggle'
                    }, 'fast');
                    return status = 'open';
                } else if (status === 'open') {
                    $menu.animate({
                        width: 0,
                        marginLeft: -185,
                        display: 'toggle'
                    }, 'fast');
                    $(".top_right, .c_right, .c_myaccount,.c_footer, .copyright, .accepts").animate({
                        marginLeft: 0,
                        display: 'toggle'
                    }, 'fast');
                    $(".myaccount").animate({
                        marginRight: 0,
                        display: 'toggle'
                    }, 'fast');
                    return status = 'closed';
                }
            });
            menuInitialized = true;
        }

    } else if ((width < 800) && (width > 550)) {
        if (menuInitialized) {
             $('.icon-menu-2').on('click', function(event) {
                alert('large');
                if (status === 'closed') {
                    $menu.animate({
                        width: 185,
                        marginLeft: 0,
                        display: 'toggle'
                    }, 'fast');
                    $(".top_right, .c_right, .c_myaccount, .header_image, .c_footer, .copyright, .accepts").animate({
                        marginLeft: 185,
                        display: 'toggle'
                    }, 'fast');
                    $(".myaccount, .header_logo").animate({
                        marginRight: -185,
                        display: 'toggle'
                    }, 'fast');
                    return status = 'open';
                } else if (status === 'open') {
                    $menu.animate({
                        width: 0,
                        marginLeft: -185,
                        display: 'toggle'
                    }, 'fast');
                    $(".top_right, .c_right, .c_myaccount, .header_image,.c_footer, .copyright, .accepts").animate({
                        marginLeft: 0,
                        display: 'toggle'
                    }, 'fast');
                    $(".myaccount, .header_logo").animate({
                        marginRight: 0,
                        display: 'toggle'
                    }, 'fast');
                    return status = 'closed';
                }
            });
            menuInitialized = false;
        }
    }
}
$(document).ready(doMenu);
$(window).resize(doMenu); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:05:01.623

将所有 js/jquery 放入准备好的文档中：

```
$(document).ready(

    // Init
    var menuInitialized = false;
    doMenu();

    // Resize event
    $(window).resize(doMenu);

    // doMenu function
    function doMenu() {

        if (!menuInitialized) {
            menuInitialized = true;

            if (width < 550) {
                alert('small')
            } else if ((width < 800) && (width > 550)) {
               alert('large')
            }
        }
    }

); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:07:28.380

我希望您不会更新`width`.

所以在函数内部你应该得到对象的新宽度

```
function doMenu() {
    width = some_value // Get the width of the desired object

    // Your code here...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:11:59.233

我需要取消绑定点击功能，即：`$('.icon-menu').unbind('click');`

# c++ - 如何在c ++中将矩阵转换为邻接列表

> ID：15834674
> 
> 赞同：0
> 
> 时间：2013-04-05T13:02:11.580
> 
> 标签：c++, pointers, graph

我有一个表示图表的数组。我想将它转换为类型的邻接列表`(i,j)`（`i<j`所以没有双重数据）。到目前为止，我有一个问题：

1.  我不知道如何访问数组和修改它，我还没有编译下面的代码，但我很确定`list[node]->..`是不正确的..

到目前为止，这是我的代码，没有数组：

```
struct node {
    public:
        int number;
        node* next;
};

class AdjList {
    public: 
        void initialize (node* list);
        void convert (bool** array, node* list);
        void make (node*list, int number, int node);
    private:
};

void AdjList::initialize (node* list) {
    for (int i=0; i<10; i++) {
        list[i]->next = NULL;
    }
}

void AdjList::make(node* list, int num, int node) {
    if (list[node]->next == NULL) {
        node* New = new node*;
        list->[node]->next = New;
        New->next = NULL;
        New->number = num;
    }
    else {
        node* New = list[node];
        while (New->next != NULL)
            New = New->next;
        node* New2 = new node*;
        New->next = New2;
        New2->number = num;
    }
}

void AdjList::convert(bool** array, node* list) {
    for (int i=0; i<10; i++) {
        for (int j=i+1; j<10; j++) {
            if (array[i][j] == true)
                make(list, j, i);
        }
    }
}

int main () {
    node* list[10];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T14:51:46.753

我会把它放在这里，也许它会对某人有所帮助：

```
for (int i=0;i<bound;i++) {
    for (int j=i+1;j<bound;j++) {
        help = list[i];
        if (Array[i][j] == true) {
            help2 = new node;
            if (help->next == NULL) {
                help->next = help2;
                help2->number = j;
                help2->next = NULL;
            }
            else {
                while (help->next != NULL)
                    help = help->next;
                help->next = help2;
                help2->next = NULL;
                help2->number = j;
            }
        }   
    }
} 
```

我就是这样做的。

# ios - 为什么单击 UITextField 后，其中的所有文本都被清除了？我可以通过某种方式解决这个问题吗？

> ID：15834675
> 
> 赞同：0
> 
> 时间：2013-04-05T13:02:12.377
> 
> 标签：ios, objective-c, cocoa-touch

我有一个`UITextField`，当我在其中输入一些文本然后选择下一个`UITextField`然后再次单击上一个时，所有文本都被删除。当我单击 UITextField 时是否可以保存文本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:05:22.483

是的，这是可能的。您只需要将`UITextField`'s设置`clearsOnBeginEditing`为`NO`. 无论是在代码中还是在 IB 中。在 IB 中，TextField 的属性中有一个复选框。或者你只是这样做：

```
self.textField.clearsOnBeginEditing = NO; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:05:28.873

```
[textField setClearsOnBeginEditing:FALSE]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T13:05:46.120

`UITextField`具有 的属性`clearsOnBeginEditing`。

> 如果此属性设置为 YES，则当用户选择文本字段开始编辑时，将清除文本字段的先前文本。如果否，文本字段会在用户点击该字段的位置放置一个插入点。

# java - 调用未存根的方法时抛出 RuntimeException

> ID：15834676
> 
> 赞同：38
> 
> 时间：2013-04-05T13:02:13.597
> 
> 标签：java, mockito

我正在使用 Mockito。我想在`RuntimeException`调用未存根的方法时抛出一个。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-04-05T13:29:37.333

您可以为模拟设置默认答案。所有未存根的方法都将使用此默认答案。

```
public void testUnstubbedException() {
    // Create a mock with all methods throwing a RuntimeException by default
    SomeClass someClass = mock( SomeClass .class, new RuntimeExceptionAnswer() );

    doReturn(1).when(someClass).getId(); // Must use doReturn

    int id = someClass.getId(); // Will return 1

    someClass.unstubbedMethod(); // Will throw RuntimeException
}

public static class RuntimeExceptionAnswer implements Answer<Object> {

    public Object answer( InvocationOnMock invocation ) throws Throwable {
        throw new RuntimeException ( invocation.getMethod().getName() + " is not stubbed" );
    }

} 
```

请注意，您**不能**使用`when`此功能，因为该方法是在之前调用的`when`（模拟[when() 调用如何工作？](https://stackoverflow.com/questions/14440270/how-does-mockito-when-invocation-work)`RuntimeException` ）并且它会在模拟进入存根模式之前抛出 a 。

因此，您必须使用`doReturn`它才能工作。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-07T04:13:42.243

最好的方法是使用`verifyNoMoreInteractions`和`ignoreStubs`静态方法。在测试的“行为”部分之后调用它们；如果调用了任何未存根的方法但未验证，您将失败。

```
verifyNoMoreInteractions(ignoreStubs(myMock)); 
```

这在[https://static.javadoc.io/org.mockito/mockito-core/2.8.47/org/mockito/Mockito.html#ignore_stubs_verification](https://static.javadoc.io/org.mockito/mockito-core/2.8.47/org/mockito/Mockito.html#ignore_stubs_verification)进行了描述，尽管我相信那里的代码示例目前包含印刷错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-30T07:28:37.603

完善汤姆的回答[https://stackoverflow.com/a/15835255/1484823](https://stackoverflow.com/a/15835255/1484823)

Mockito 现在提供内置支持，带有引发异常的默认答案，并且可以使用 @Mock 注释指定

```
 @Mock(answer = Answers.RETURNS_SMART_NULLS)
    private BackingAppDeploymentService backingAppDeploymentService; 
```

或者

```
 private BackingAppDeploymentService  backingAppDeploymentService =
      Mockito.mock(BackingAppDeploymentService.class, new ReturnsSmartNulls()); 
```

见[https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#RETURNS_SMART_NULLS](https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#RETURNS_SMART_NULLS)

> 如果您的代码使用未存根调用返回的对象，您将获得 NullPointerException。Answer 的这个实现返回 SmartNull 而不是 null。SmartNull 提供比 NPE 更好的异常消息，因为它指出了调用未存根方法的行。您只需单击堆栈跟踪。
> 
> ReturnsSmartNull 首先尝试返回普通值（零、空集合、空字符串等），然后尝试返回 SmartNull。如果返回类型为 final，则返回纯 null。
> 
> ReturnsSmartNulls 可能是 Mockito 4.0.0 中的默认返回值策略

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-05T13:08:34.667

您模拟整个类，结果是所有方法都将返回 null。

然后你可以使用`doReturn(...)`来改变这种行为。同样，您可以使用`doThrow(...)`to make（我只记得`void`）方法抛出异常。

这是否回答你的问题？

# xcode - 为什么我在 iOS 模拟器中的应用程序不会更改为 Xcode 中的当前版本？

> ID：15834677
> 
> 赞同：0
> 
> 时间：2013-04-05T13:02:14.893
> 
> 标签：xcode, ios-simulator

当我在 Xcode 故事板中对我的项目进行更改，并在 iOS 模拟器中重新启动我的应用程序时，模拟器会显示我的项目的过时版本。怎么了？

在 Xcode 中： ![在此处输入图像描述](https://i.stack.imgur.com/0w147.png)

在 iOS 模拟器中： ![在此处输入图像描述](https://i.stack.imgur.com/SREL4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:49:58.537

尝试：

*   在构建之前清洁目标。`shift-command-K`
*   重置 iOS 模拟器（在“iOS 模拟器”菜单上，选择“重置内容和设置...”

# android - Android保存bmp图片

> ID：15834680
> 
> 赞同：0
> 
> 时间：2013-04-05T13:02:23.207
> 
> 标签：android, bmp

我正在尝试将捕获的 .bmp 文件保存到 sdcard。这是负责此操作的代码片段：

```
 String root = Environment.getExternalStorageDirectory().toString();
    File mFolder = new File(root + "/mFolder");

    if (!mFolder.exists()) 
    {
        mFolder.mkdir();
    }
    String strF = mFolder.getAbsolutePath();
    File mSubFolder = new File(strF + "/MyApp-SubFolder");

    if (!mSubFolder.exists()) 
    {
        mSubFolder.mkdir();
    }
    String s = "myfile.png";

    File f = new File(mSubFolder.getAbsolutePath(),s);
    String strMyImagePath = f.getAbsolutePath();
    FileOutputStream fos = null;
    try 
    {
        fos = new FileOutputStream(f);
        bmp.compress(Bitmap.CompressFormat.PNG,70, fos);

        fos.flush();
        fos.close();
        Log.d("asd", "yeah!");
    //  MediaStore.Images.Media.insertImage(getContentResolver(), b, "Screen", "screen");
    }catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

但是有一个错误：

> 图片无效，大小为 0kb

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:07:17.603

试试这个

```
private boolean SaveToSD() {

        String imageName = null;

        Bitmap sourceBitmap = ((BitmapDrawable) img.getDrawable()).getBitmap();

        boolean imageSaved = false;

        if (sourceBitmap != null && !sourceBitmap.isRecycled()) {
            File storagePath = new File(
                    Environment.getExternalStorageDirectory() + "/iGridu/");

            if (!storagePath.exists()) {
                storagePath.mkdirs();
            }

            int count = storagePath.list().length;

            Log.i("SaveToSD count", "" + count);

            imageName = String.valueOf(count + 1) + "_igridu";

            FileOutputStream out = null;
            File imageFile = new File(storagePath, String.format("%s.jpg",
                    imageName));
            try {
                out = new FileOutputStream(imageFile);
                imageSaved = sourceBitmap.compress(Bitmap.CompressFormat.JPEG,
                        90, out);
                out.flush();
                out.close();
            } catch (Exception e) {
                Log.e("SaveToSD ", "Unable to write the image to gallery" + e);

            }

            ContentValues values = new ContentValues(3);
            values.put(Images.Media.TITLE, imageName);
            values.put(Images.Media.MIME_TYPE, "image/jpeg");
            values.put("_data", imageFile.getAbsolutePath());

            getContentResolver().insert(Media.EXTERNAL_CONTENT_URI, values);
        }

        return imageSaved;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:11:15.753

你必须把它放在你的 Manifest.xml

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

# highcharts - 如何在柱形图中隐藏零值

> ID：15834687
> 
> 赞同：18
> 
> 时间：2013-04-05T13:02:56.637
> 
> 标签：highcharts

我正在使用柱形图并在每个条形图的顶部显示这些值。如果它们是 0，我不想显示这些值。怎么做？这是我的一段代码

```
var series = {  data: [],   
                dataLabels: {
                    enabled: true,
                    color: 'black',
                    align: 'right',
                    x: -3,
                    y: 3,
                    style: {
                        color: '#333',
                        fontWeight: 'bold',
                        fontSize: '12px',
                        fontFamily: 'Trebuchet MS, Verdana, sans-serif'
                    }
                },
                pointWidth: 28
}; 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-05T13:39:21.277

您可以使用格式化程序。这样的事情应该这样做：

```
dataLabels: {
  formatter:function() {
    if(this.y != 0) {
      return this.y;
    }
  }
} 
```

[http://api.highcharts.com/highcharts#plotOptions.series.dataLabels.formatter](http://api.highcharts.com/highcharts#plotOptions.series.dataLabels.formatter)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-05T13:40:34.993

您可以使用数据标签格式化程序并添加检查值是否大于零的条件。

[http://jsfiddle.net/DdvGm/](http://jsfiddle.net/DdvGm/)

```
plotOptions: {
        series: {
            dataLabels:{
                enabled:true,
                formatter:function(){
                    if(this.y > 0)
                        return this.y;
                }
            }
        }
    }, 
```

[http://api.highcharts.com/highcharts#plotOptions.column.dataLabels.formatter](http://api.highcharts.com/highcharts#plotOptions.column.dataLabels.formatter)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-06-16T17:26:38.437

这是答案，如果现有答案正确，您的问题有多短，我不完全起诉。

在 highcharts 中，0 被认为是一个数字，因此它将在图表上呈现它。但是 null 是隐藏的。因此，当您添加数据时，您必须检查值是否为 0，如果是，则将其更改为 null。

如果您有任何问题，请告诉我。

小提琴： http: [//jsfiddle.net/8kr0tods/](http://jsfiddle.net/8kr0tods/)看到may是0，mar是null，null是隐藏的。

```
 if($VAL==0)
    {
        $VAL='null';
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-10T18:54:58.283

在使用 react/typescript 导出的类时，我遇到了上述答案的问题。进入函数的“this”是类的“this”，而不是预期的。

为了解决这个问题，我不得不将函数移到导出的类之外。这是一个例子。

```
export class MyClass extends React.Component<MyClassProps,any> {
     drawChart() {
          const options = {
               ...
                series: [{
                     ...
                     dataLabels: {
                          ...
                          formatter: formatter
                     }
                }]
           }
           ...
      }
 }

 function formatter() {
      if (this.y != 0) //My use case was different, so I used this.point.value
           return this.y;
 } 
```

# javascript - ExtJS 4.2：工具提示不够宽，无法查看内容

> ID：15834689
> 
> 赞同：31
> 
> 时间：2013-04-05T13:03:00.717
> 
> 标签：javascript, extjs

自从升级到 ExtJS 4.2 以来，我注意到当文本字段中有错误时显示的工具提示不够宽，无法看到工具提示的内容——它们似乎总是 40px 宽。

这是一个显示问题的测试用例：

```
<html>
<head>
    <title>Field error tooltips</title>
    <link rel="stylesheet" type="text/css" href="ext-4.2.0/resources/css/ext-all.css">
    <script type="text/javascript" src="ext-4.2.0/ext-all-debug.js"></script>
</head>
<body>
    <script type="text/javascript">
    Ext.onReady(function(){

        var form = Ext.create("Ext.form.Panel",{
            title: 'My form',
            width: 300,
            height: 100,
            items: [
                {xtype: 'textfield', name: 'FIELD1', fieldLabel: 'Field 1', allowBlank: false}
            ],
            renderTo: Ext.getBody()
        });
    });
    </script>
</body>
</html> 
```

在上面的示例中，如果您单击该字段，然后在没有输入任何内容的情况下单击它，它会显示一个工具提示，说明它不允许为空。不幸的是，工具提示不够宽，无法看到该消息。有没有其他人遇到过这个？

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-08T13:22:26.497

感谢大家的帮助，但我在 sencha 论坛上找到了一个似乎可行的解决方案：

[http://www.sencha.com/forum/showthread.php?260106-Tooltips-on-forms-and-grid-are-not-resizing-to-the-size-of-the-text/page3#24](http://www.sencha.com/forum/showthread.php?260106-Tooltips-on-forms-and-grid-are-not-resizing-to-the-size-of-the-text/page3#24)

特别是应用程序开头的以下代码：

```
delete Ext.tip.Tip.prototype.minWidth; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-04-08T01:44:02.600

这是 extjs 4.2 的错误，它适用于 firefox 19 但不适用于 chrome 26

您应该覆盖工具提示的 css 类：

```
.x-tip {
    width: auto !important;
}
.x-tip-body {
    width: auto !important;
}
.x-tip-body span {
    width: auto !important;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-06T02:19:58.867

抱歉，我帮不上什么忙，这是 4.2.0 的一个已知问题，可能会在下一个版本中修复。见：[http ://www.sencha.com/forum/showthread.php?257201](http://www.sencha.com/forum/showthread.php?257201)

作为临时解决方法，如果您不需要提示容器的动态大小，您可以覆盖 CSS

```
.x-tip-form-invalid, .x-tip-body-form-invalid {
    width: 150px !important;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-10T10:42:00.227

出于好奇，时不时地看这个……

我尝试比较 4.1 和 4.2 的来源。我认为问题出在某个地方的自动容器布局中。在 4.1 和 4.2 之间发生了很多变化。所以我们可以看看这个。

希望它适用于某些人。

```
if(Ext.isIE10) { 
      Ext.supports.Direct2DBug = true;
  }

  if(Ext.isChrome) {
      Ext.define('Ext.layout.container.AutoTip', {
        alias: ['layout.autotip'],
        extend: 'Ext.layout.container.Container',

        childEls: [
            'clearEl'
        ],

        renderTpl: [
            '{%this.renderBody(out,values)%}',

            '<div id="{ownerId}-clearEl" class="', Ext.baseCSSPrefix, 'clear" role="presentation"></div>'
        ],

        calculate: function(ownerContext) {
            var me = this,
                containerSize;

            if (!ownerContext.hasDomProp('containerChildrenDone')) {
                me.done = false;
            } else {

                containerSize = me.getContainerSize(ownerContext);
                if (!containerSize.gotAll) {
                    me.done = false;
                }

                me.calculateContentSize(ownerContext);
            }
        }
    });

    Ext.override(Ext.tip.Tip, {
        layout: {
            type: 'autotip'
        }
    });
}

Ext.QuickTips.init(); 
```

您可以查看[有关此论坛主题的](http://www.sencha.com/forum/showthread.php?260106-Tooltips-on-forms-and-grid-are-not-resizing-to-the-size-of-the-text&p=955886&viewfull=1#post955886)更多详细信息。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-04-25T16:37:14.913

删除 Ext.tip.Tip.prototype.minWidth 并不能在所有情况下（在 IE10 上）为我解决问题，并添加

```
if(Ext.isIE10) { 
      Ext.supports.Direct2DBug = true;
} 
```

修复了工具提示，但会导致其他奇怪的问题（有时会影响工具栏按钮的边距！）。我见过的最好的解决方案是：

```
Ext.override(Ext.tip.QuickTip, {
        helperElId: 'ext-quicktips-tip-helper',
        initComponent: function ()
        {
            var me = this;

            me.target = me.target || Ext.getDoc();
            me.targets = me.targets || {};
            me.callParent();

            // new stuff
            me.on('move', function ()
            {
                var offset = me.hasCls('x-tip-form-invalid') ? 35 : 12,
                    helperEl = Ext.fly(me.helperElId) || Ext.fly(
                        Ext.DomHelper.createDom({
                            tag: 'div',
                            id: me.helperElId,
                            style: {
                                position: 'absolute',
                                left: '-1000px',
                                top: '-1000px',
                                'font-size': '12px',
                                'font-family': 'tahoma, arial, verdana, sans-serif'
                            }
                        }, Ext.getBody())
                    );

                if (me.html && (me.html !== helperEl.getHTML() || me.getWidth() !== (helperEl.dom.clientWidth + offset)))
                {
                    helperEl.update(me.html);
                    me.setWidth(Ext.Number.constrain(helperEl.dom.clientWidth + offset, me.minWidth, me.maxWidth));
                }
            }, this);
        }
    }); 
```

这似乎适用于 IE9 和 10、Chrome 和 Firefox。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-11T13:19:58.383

另一个不错的解决方案是添加这个 CSS ：

```
.x-border-box .x-tip, .x-border-box .x-tip * {
  box-sizing: content-box;
} 
```

但是工具提示有点太大了。

我将尝试使用覆盖 Ext.tip.QuickTip 的 user826840 的解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-19T13:26:29.027

另一种解决方案是覆盖 QuickTip 的最小宽度，因为字段布局会创建不依赖 QuickTip 单例的新 QuickTip（与文档相反）。

```
Ext.override(Ext.tip.QuickTip,{
    minWidth: 200
}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-09T10:17:24.117

使用`<br/>`标签显示多行工具提示有时对解决宽度问题很有用。

```
const msg = 'bla bla...<br/>bla bla...'; // Here <br/> tag in html message.

Ext.create('Ext.tip.ToolTip', {
    target: component.id,
    html: msg
}); 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-04-25T09:41:20.473

如果您在 IE 浏览器中遇到工具提示 EXTJS 4.2.1 的问题。您必须将以下行添加到您的 ASPX 页面：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

# iphone - 使用 NSURLConnection 发送文件

> ID：15834690
> 
> 赞同：1
> 
> 时间：2013-04-05T13:03:02.487
> 
> 标签：iphone, objective-c, ios5, multipartform-data

嗨，我正在为 NSURLConnection 使用以下代码

```
 //initialize new mutable data
responseData = [[NSMutableData alloc] init];
//initialize url that is going to be fetched.
NSURL *url = [NSURL URLWithString:URLCALL];

//initialize a request from url
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[url standardizedURL]];

//set http method
[request setHTTPMethod:@"POST"];
//initialize a post data
 NSString *postData = [[NSString alloc] initWithString:@"action=3&amp;senderCountryCode=91&amp;senderPhoneNo=9573795715&amp; receiverPhoneNo=9336240585&amp;version=1.0"];
//set request content type we MUST set this value.

[request setValue:@"application/x-www-form-urlencoded; charset=utf-8" forHTTPHeaderField:@"Content-Type"];

//set post data of request
[request setHTTPBody:[postData dataUsingEncoding:NSUTF8StringEncoding]];

//initialize a connection from request
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];    
//start the connection
[connection start]; 
```

现在我必须将文件添加为多部分类型请帮助我如何使用它

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-05T13:06:06.770

Try this & check:

```
- (NSURLRequest *)buildRequest:(NSData *)paramData fileName:(NSString *)name {
    NSMutableURLRequest *request = [[[NSMutableURLRequest alloc] init] autorelease];
    NSString *charset = (NSString *)CFStringConvertEncodingToIANACharSetName(CFStringConvertNSStringEncodingToEncoding(NSUTF8StringEncoding));
    [request setURL:self.url];
    [request setHTTPMethod:self.method];

    NSString *boundary = @"0xKhTmLbOuNdArY";
    NSString *endBoundary = [NSString stringWithFormat:@"\r\n--%@\r\n", boundary];

    NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; charset=%@; boundary=%@", charset, boundary];
    [request addValue:contentType forHTTPHeaderField: @"Content-Type"];

    NSMutableData *tempPostData = [NSMutableData data]; 
    [tempPostData appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

    // Sample Key Value for data
    [tempPostData appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"\r\n\r\n", @"Key_Param"] dataUsingEncoding:NSUTF8StringEncoding]];
    [tempPostData appendData:@"Value_Param"] dataUsingEncoding:NSUTF8StringEncoding]];
    [tempPostData appendData:[endBoundary dataUsingEncoding:NSUTF8StringEncoding]];

    // Sample file to send as data
    [tempPostData appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"%@\"\r\n", name] dataUsingEncoding:NSUTF8StringEncoding]];
    [tempPostData appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
    [tempPostData appendData:paramData];
    [tempPostData appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
    [request setHTTPBody:tempPostData];
    return request;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:17:10.430

如果您真的想手动执行此操作并使用 NSData *data 中的文件，您可以执行以下操作：

```
NSString *boundary = @"0Xvdfegrdf876fRD";
NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@",boundary];
[request addValue:contentType forHTTPHeaderField: @"Content-Type"];

NSMutableData *body = [NSMutableData data];

[body appendData:[[NSString stringWithFormat:@"--%@\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"Content-Disposition: form-data; name=\"userfile\"; filename=\"file.png\"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithString:@"Content-Type: application/octet-stream\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[NSData dataWithData:data]];
[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n",boundary] dataUsingEncoding:NSUTF8StringEncoding]];

// setting the body of the post to the request
[apiRequest setHTTPBody:body]; 
```

但我宁愿使用像[AFNetworking](https://github.com/AFNetworking/AFNetworking)这样的 API，它可以让您在几行内完成文件上传：

```
NSData *imageData = UIImagePNGRepresentation(image);
NSURLRequest *request = [client multipartFormRequestWithMethod:@"POST" path:@"/upload" parameters:nil constructingBodyWithBlock: ^(id <AFMultipartFormData> formData) {
  [formData appendPartWithFileData:imageData mimeType:@"image/png" name:@"avatar"];
}]; 
```

# mysql - mysql insert into 语法，什么命令？它是如何工作的

> ID：15834698
> 
> 赞同：1
> 
> 时间：2013-04-05T13:03:21.113
> 
> 标签：mysql

找不到这个问题的答案，它是一个关于 INSERT INTO 命令如何工作的相对简单的查询。

当我从 PHP 运行此命令时，它会在数据库中**搜索**行名还是按数字顺序对它们进行寻址。

```
$sql="INSERT INTO $tbl_name(title, date, description) VALUES('$title', '$date', '$description')"; 
```

数据库结构

1.  标题
2.  日期
3.  描述

因此，如果我要在该表中添加另一行（成为第 4 行），是否需要按顺序处理（即在“描述”之后）或者我可以从任何地方调用它，只要它与值数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:06:07.090

实际上，列的顺序并不重要，只要它存在于表中即可。但是值的顺序取决于您如何在`INSERT`子句中声明列名。优化器不够聪明，无法确定您插入的值是针对特定列的。

如果您曾经交换列的值并且列上的数据类型不匹配，它会隐式尝试将其转换为特定的数据类型，如果失败，则会引发异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T13:09:15.887

如果您明确设置列名（您可以通过这样的子字符串 $tbl_name(title, date, description)）

...您可能会忽略列的实际顺序。

# php - PHP：下载文件

> ID：15834699
> 
> 赞同：0
> 
> 时间：2013-04-05T13:03:22.720
> 
> 标签：php

这是我下载文件的代码：

假设我想下载pdf，所以

```
$file = 'Dev-TipsTricks.pdf';
$mime_type = 'application/pdf';
header("Content-type: $mime_type");
header("Content-disposition: attachment; filename=$file");
ob_clean();
flush(); 
readfile('wp-content/uploads/'.$file);
exit; 
```

但是下载后当我尝试打开它时说： ![在此处输入图像描述](https://i.stack.imgur.com/OW1yi.gif) 我也尝试过 docx & 再次：

![在此处输入图像描述](https://i.stack.imgur.com/P9NpK.gif)

虽然文件内容是正确的并且在**上传**文件夹中它是正确打开的，但我也尝试了我的**gif 图像**代码，但它说：

![在此处输入图像描述](https://i.stack.imgur.com/jYsEG.gif)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:07:17.313

Well, if you are trying to send a PDF, you should also make sure to have the right extension (see the first screenshot, where you try to open it with Word).

For the second screenshot: try opening the file in a text editor, or comment out the "Content-disposition" header to check whether the `readfile` command is actually working properly. (maybe the path to the file is incorrect)

# python - 给定一个工作日名称的字符串，如何将工作日计算为十进制（以及它出现的下一个日期）？

> ID：15834705
> 
> 赞同：5
> 
> 时间：2013-04-05T13:03:39.920
> 
> 标签：python, datetime, optimization

给定一个字符串，`reqDayOf`这是一个工作日名称，您如何将工作日计算为十进制（然后根据`datetime`对象返回它的下一个实例）？

获取`datetime`对象的年份和 iso 年份的第几周，然后使用`strptime`年份 + 年份中的星期 + 工作日名称，但感觉就像一个 hack。

```
import datetime

def getDateFromDayOf(dateTimeObj,reqDayOf):
  #reqDayOf is one of ['monday','tuesday','wednesday','thursday','friday','saturday','sunday']
  #return the next instance of reqDayOf
  #after dateTimeObj
  #as a datetime object 
  #Get the WeekOfYear from dateTimeObj and then
  #get the date based on Year + WeekOfYear + reqDayOf 
  (dtoYear,dtoIsoWeek,x)=dateTimeObj.isocalendar()
  checkDate= '{}-{}-{}'.format( dtoYear,dtoIsoWeek,reqDayOf)
  dateOfDay=datetime.datetime.strptime(checkDate,"%Y-%U-%A")
  #return dateOfDay if it's greater than the original date
  if dateOfDay > dateTimeObj:
    return dateOfDay
  else:
    #this is needed on Sundays
    #add a week
    return dateOfDay + datetime.timedelta(days=7)  

>>> datetime.datetime.now().strftime('%a %Y %b %d')
'Fri 2013 Apr 05'
>>> getDateFromDayOf(datetime.datetime.now(),'Monday').strftime('%a %Y %b %d')
'Mon 2013 Apr 08' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T13:17:43.747

星期几（作为整数）由[weekday 方法](http://docs.python.org/2/library/datetime.html#datetime.date.weekday)返回：

```
import datetime as DT
dow = dict(zip('monday tuesday wednesday thursday friday saturday sunday'.split(),
           range(7)))

def getDateFromDayOf(dateTimeObj, reqDayOf):
    weekday = dateTimeObj.weekday()        
    return dateTimeObj + DT.timedelta(days=(dow[reqDayOf.lower()]-weekday-1)%7+1) 
```

* * *

```
In [90]: getDateFromDayOf(DT.datetime.now(), 'Monday').date()
Out[90]: datetime.date(2013, 4, 8)

In [91]: getDateFromDayOf(DT.datetime.now(), 'Tuesday').date()
Out[91]: datetime.date(2013, 4, 9)

In [92]: getDateFromDayOf(DT.datetime.now(), 'Friday').date()
Out[92]: datetime.date(2013, 4, 12) 
```

* * *

或者，使用[dateutil](http://niemeyer.net/python-dateutil)，

```
import datetime as DT
import dateutil
import dateutil.relativedelta as rdelta
import dateutil.rrule as rrule

dow = dict(zip('monday tuesday wednesday thursday friday saturday sunday'.split(),
               (getattr(rdelta, d) for d in 'MO TU WE TH FR SA SU'.split())))
def getDateFromDayOf(dateTimeObj, reqDayOf):
    rr = rrule.rrule(
        rrule.DAILY,                       # step by days
        byweekday = dow[reqDayOf.lower()], # return only this day of the week
        dtstart = dateTimeObj)             # start on this day 
    res = rr.after(dateTimeObj, inc=False) # inc=False means don't include the dtstart day
    return res 
```

使用 dateutil 您可以以高级方式表达这个想法，而不必担心肮脏的细节中的错误，例如

```
DT.timedelta(days=(dow[reqDayOf.lower()]-weekday-1)%7+1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T16:34:56.530

这类似于[@unutbu 的 anwser](https://stackoverflow.com/a/15835012/355230)中的 weekday 方法，但以不需要将日期名称（或其缩写）硬编码到其中的方式实现。它使用`datetime.date`'`toordinal()`方法将日期转换为单个数字，然后计算要添加多少天才能获得所需的工作日，最后使用该`date.fromordinal()`方法将新数字转换回日期。

它创建并使用一个名为的字典`DAYNUMS`将`reqDayOf`工作日名称转换为从 1 到 7 的数字，并且该`date.isoweekday()`方法用于对`dateTimeObj`传递给它的参数做同样的事情。该`DAYNUMS`字典是在不使用硬编码的日期名称的情况下创建的，因此它也可以在非英语语言环境和给定适当`reqDayOf`参数的语言中工作，例如`'lundi'`代替`'Monday'`法语语言环境。

```
import datetime

# Create dictionary based on fact that 2013-April-01 was a Monday.
DAYNUMS = {datetime.date(2013, 4, i).strftime('%A').lower(): i
               for i in range(1, 8)}

def getDateFromDayOf(dateTimeObj, reqDayOf):
    daysDiff = (DAYNUMS[reqDayOf.lower()] - dateTimeObj.isoweekday() - 1) % 7 + 1
    return datetime.date.fromordinal(dateTimeObj.toordinal() + daysDiff)

a_date = datetime.datetime.strptime('2013-04-05', '%Y-%m-%d')
print(a_date.strftime('%a %Y %b %d'))                              # -> Fri 2013 Apr 05
print(getDateFromDayOf(a_date, 'Monday').strftime('%a %Y %b %d'))  # -> Mon 2013 Apr 08 
```

# php - 无法远程登录到 php 套接字代码

> ID：15834708
> 
> 赞同：1
> 
> 时间：2013-04-05T13:03:46.257
> 
> 标签：php, sockets, telnet

我创建了一个 php 程序来监听一个端口。这是 php 代码

```
<?php

if(!($sock = socket_create(AF_INET, SOCK_DGRAM, 0)))
{
    $errorcode = socket_last_error();
    $errormsg = socket_strerror($errorcode);
    die("Couldn't create socket: [$errorcode] $errormsg \n");
}
echo "Socket created \n";

if( !socket_bind($sock, "192.168.0.177" , 5060) )
{
    $errorcode = socket_last_error();
    $errormsg = socket_strerror($errorcode);
    die("Could not bind socket : [$errorcode] $errormsg \n");
}
echo "Socket bind OK \n";

while(1)
{
    echo "Waiting for data ... \n";

    $r = socket_recvfrom($sock, $buf, 512, 0, $remote_ip, $remote_port);

    echo $buf;
}

?> 
```

但是当我这样做时，`telnet 192.168.0.177 5060`我会收到消息

```
Could not open connection to the host on port 5060 
```

我检查了 telnet 服务，它运行良好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:10:00.020

那是因为您打开了一个 UDP 套接字，并`telnet`使用了 TCP。

# c# - 使用 Web 客户端发送 url

> ID：15834709
> 
> 赞同：1
> 
> 时间：2013-04-05T13:03:45.977
> 
> 标签：c#, asp.net, webclient

当我尝试地址栏上的以下链接 url 时，响应为“OK”

```
http://ww.exmaple.com.tr/webservices/addlead.php?first_name=" + r.Name + "&last_name=" + r.Surname + "&phone=" + r.Telephone + "&hash=" + r.HashCode 
```

但是当我尝试像下面这样与 webclient 链接时，响应是“AUTH ERROR”

```
string URI = "http://ww.exmaple.com.tr/webservices/addlead.php";
string myParameters = "first_name=" + r.Name + "&last_name=" + r.Surname + "&phone=" + r.Telephone + "&hash=" + r.HashCode;

using (WebClient wc = new WebClient())
{
  wc.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
  string HtmlResult = wc.UploadString(URI, myParameters);
} 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:19:47.597

我认为，您应该使用 DownloadString 而不是 UploadString(URI, myParameters) ，如下所示：

```
string URI = "http://ww.exmaple.com.tr/webservices/addlead.php?";
string myParameters = "first_name=" + r.Name + "&last_name=" + r.Surname + "&phone=" + r.Telephone + "&hash=" + r.HashCode;

URI += myParameters;

using (WebClient wc = new WebClient())
{
 try
 {
  wc.Headers[HttpRequestHeader.ContentType] = "application/x-www-form-urlencoded";
  string HtmlResult = wc.DownloadString(URI);
 }
 catch(Exception ex)
 {
  // handle error
  MessageBox.Show( ex.Message );
 }
} 
```

当你想打开一个需要授权的 URL 时，你可能必须这样做两次：

*   首先使用 GET 只是为了打开一个会话并获取一个 cookie
*   之后使用步骤 1 中的 cookie 进行 POST

[编辑]找到了这个例子：[https ://stackoverflow.com/a/4740851/1758762](https://stackoverflow.com/a/4740851/1758762)

祝你好运！

# javascript - 使用jquery注入具有冒号属性的标签

> ID：15834716
> 
> 赞同：2
> 
> 时间：2013-04-05T13:04:05.307
> 
> 标签：javascript, jquery, xhtml

我正在尝试使用 jquery 在 div 中注入以下跨度。

```
HTML:
<span epub:type="pagebreak" id="pagePrefix" title="1"></span>

JS:
$('div').html('<span epub:type="pagebreak" id="pagePrefix" title="1"></span>'); 
```

并得到以下错误，`SyntaxError: DOM Exception 12`

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T03:31:03.497

当您将`innerHTML`序列化的 DOM 节点传递给`$('div').html()`. 只要您`DOCTYPE`是`html`. 但是，`DOCTYPE`您的序列化 DOM 节点在插入文档之前`xhtml`必须清除[一些额外的情况。](http://www.w3.org/TR/2008/WD-html5-20080610/dom.html#innerhtml1)根据[W3.org](http://www.w3.org/TR/2008/WD-html5-20080610/dom.html#innerhtml1)，包含`Attr`节点、`Text`节点、`CDATASection`节点、`Comment`节点或`ProcessingInstruction`节点的序列化 DOM 节点，其数据包含与 XML Char 产品不匹配的字符（包括 U+003A COLON “:”）必须引发`INVALID_STATE_ERR`异常。

[W3](http://www.w3.org/TR/2008/WD-html5-20080610/dom.html#innerhtml1)还指定了用户代理在 XML(XHTML) 上下文中设置`innerHTML`DOM 属性`HTMLElements`时必须运行的算法。`HTMLDocuments`该算法的第 2 步是：

> 如果`innerHTML`在一个元素上设置属性，用户代理必须向刚刚创建的解析器提供与该元素的开始标记相对应的字符串，声明 DOM 中该元素范围内的所有命名空间前缀，以及声明DOM 中该元素范围内的默认命名空间（如果有）。

用户代理不知道您已`epub`在父元素上指定命名空间，因为当前上下文位于根上下文之外。因此，您需要在追加到 DOM 时为序列化的 DOM 节点指定命名空间。

```
$('div').html('<span xmlns:epub="http://www.idpf.org/2007/ops" 
        epub:type="pagebreak" id="pagePrefix" title="1"></span>'); 
```

[jsFiddle 在这里](http://jsfiddle.net/brianhadaway/g6xF7/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T13:05:24.750

转义冒号：

```
$('div').html('<span epub\:type="pagebreak" id="pagePrefix" title="1"></span>'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T13:08:10.913

```
$('div').append('<span />').attr('epub\:type', 'pagebreak').attr('id', 'pagePrefix').attr('title', '1'); 
```

# javascript - 使用 javascript 创建锚点 href，并且链接中没有主机 url

> ID：15834719
> 
> 赞同：1
> 
> 时间：2013-04-05T13:04:15.807
> 
> 标签：javascript, url, anchor, href

我正在尝试使用 javascript 动态创建链接，但每次都将主机 url 附加到链接中。我该如何阻止这种情况发生。我在 js fiddle 上创建了一个示例。创建的链接将“ [http://fiddle.jshell.net/mTgtr/show/](http://fiddle.jshell.net/mTgtr/show/) ”添加到 www.google.com 链接。

[http://jsfiddle.net/mTgtr/](http://jsfiddle.net/mTgtr/)

```
var eventLink = "www.google.com";
var elEventBlock = document.createElement('div');
var elA = document.createElement('a');
elA.setAttribute('href', eventLink);
elA.setAttribute('target', '_blank');
elA.innerHTML = "test";
document.getElementById("myDiv").appendChild(elA); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T13:05:14.030

您应该在 URL 前加上协议，例如`http://`, `https://`,`ftp://`等。

# javascript - window.location.href 在 IE9 中不起作用

> ID：15834733
> 
> 赞同：3
> 
> 时间：2013-04-05T13:05:01.047
> 
> 标签：javascript, html, internet-explorer-9, window.location

嗨，我用以下代码保存了一个画布。

```
var img = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream");
window.location.href = img; 
```

但是 IE9 不起作用。无法打开数据：image/octet-stream;base64,iVBORw0KGgoAAAANSUhEUgAAB4AAA.....

我怎样才能让它在 IE9 上工作？感谢您的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T11:01:54.277

可能会尝试使用

```
window.location.assign(img); // or
window.location = img; 
```

有关更多详细信息，请检查[window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)

# c - C 中的程序出现双重释放或损坏 (!prev) 错误

> ID：15834735
> 
> 赞同：1
> 
> 时间：2013-04-05T13:05:03.013
> 
> 标签：c, struct, malloc, corruption

运行我的程序时出现这样的错误：

```
*** glibc detected *** ./prog: double free or corruption (!prev): 0x09155170 *** 
```

问题显然是通过 malloc 将内存分配给结构，但我不知道它有什么问题。这是我的程序的代码（在 C 中）：

```
#include <stdio.h>
#include <malloc.h>
#include <stdlib.h>
#include <string.h>

typedef struct 
{
      char kood[4];
      int kogus;
      char nimetus[80];
      double hind;
      int P;
      int K;
      int A;
}ese;

void sort(int m, ese* d);

void search_kood(int m, ese* d);

void search_nimetus(int m, ese* d);

void search_kuupaev(int m, ese* d);

int menu();

int main (void)
{
    FILE *list;
    list = fopen("elektroonikapood.txt", "r");
    int menu_valik,m,i;
    m=0;
    if (list==NULL)
      {
            printf("Empty or corrupted file!");
            getchar();
            return 0;   
      }  
    ese *esemed = (ese*) malloc(sizeof(ese)); 
    while(!feof(list)) 
      {

                  fscanf(list, "%s", esemed[m].kood);
                  fscanf(list, "%d", &esemed[m].kogus);
                  fscanf(list, "%s", esemed[m].nimetus);
                  fscanf(list, "%lg", &esemed[m].hind);
                  fscanf(list, "%d", &esemed[m].P);
                  fscanf(list, "%d", &esemed[m].K);
                  fscanf(list, "%d", &esemed[m].A);
                  m++;
      }

    while(1)
   { menu_valik = menu();
    if(menu_valik == 1)
      sort(m, esemed);
    else if (menu_valik == 2)
      search_kood(m, esemed);
    else if (menu_valik == 3)
      search_kuupaev(m, esemed);
    else if (menu_valik == 4)
      search_nimetus(m, esemed);
    else if (menu_valik == 0)
        {
          free(esemed);
          fclose(list);
          exit(1);
       }
    else
      break;
     }
     return 0;
} 
```

还有一些附加功能，但我认为它们没有问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T13:07:57.707

在本声明中：

```
ese *esemed = (ese*) malloc(sizeof(ese)); 
```

*您只为一个*结构分配空间。紧接着您读取多个结构，从而覆盖内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:09:08.633

首先...[不要在 C 中强制转换 malloc](https://stackoverflow.com/a/605858/28169)。它可以隐藏错误。

其次...您的 malloc 在`while( !feof( list ) )`循环之外，但它只分配 ese 结构的单个实例，但是您的循环意味着您正在加载多个实例...这意味着您正在覆盖内存...此时所有赌注都取消了。

```
 ese *esemed = NULL; 
   ese *lastItem = NULL;

   while(!feof(list)) 
   {
        ese* newItem = malloc( sizeof( ese ) );

        if( !esemed ) esemed = newItem;
        if( lastItem ) lastItem->next = newItem;

        lastItem = newItem;

        fscanf(list, "%s", newItem->kood);
        fscanf(list, "%d", &newItem->kogus);
        fscanf(list, "%s", newItem->nimetus);
        fscanf(list, "%lg", &newItem->hind);
        fscanf(list, "%d", &newItem->P);
        fscanf(list, "%d", &newItem->K);
        fscanf(list, "%d", &newItem->A);
    } 
```

# java - 保护 RESTful Web 服务（Tomcat 上的 Jersey）

> ID：15834748
> 
> 赞同：2
> 
> 时间：2013-04-05T13:05:32.360
> 
> 标签：java, security, jersey, ws-security

我已经使用`Jersey`. 我现在需要做的是保护他们。这意味着我需要加密传输的数据并对用户进行身份验证。我使用的服务器是`Tomcat`

有没有这方面的文章和教程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:10:50.523

对于加密，您可以在 tomcat 中使用 https。 [这](http://tomcat.apache.org/tomcat-7.0-doc/ssl-howto.html)是有关如何操作的指南。对于身份验证，您可以查看这篇[文章](https://stackoverflow.com/questions/6774506/jersey-client-api-authentication)。

希望这可以帮助 ！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:09:33.670

我认为，如果您没有具体细节，您应该使用基于令牌的身份验证。

身份验证发生在另一个服务上，而不是 REST 服务，一旦经过身份验证，就可以使用令牌并将其提供给客户端以访问 REST 服务。

# ios - dealloc gets not called for control

> ID：15834754
> 
> 赞同：0
> 
> 时间：2013-04-05T13:06:05.340
> 
> 标签：ios, objective-c, memory-management, uiwebview

I have a sub class of UIWebView and use it in a view controller.

```
CViewController *controller = [[CViewController alloc] init];
self.webView = controller;
[controller release]; 
```

Now in my view controller dealloc gets called and I call `[_webView release]` but the dealloc in my UIWebView subclass gets never called and the memory usage raise on every time I put one view controller on the stack and never gets released after pop from the stack. Also I can see all my windows in the Safari Development Tools, so they are never be released. I check the retainCount (I know its not very useful) but it told me after the assignment to my property the retainCount is 3? (Property is nonatomic, retain)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:18:08.567

3`retainCount`是红鲱鱼；无用的分心。 [http://www.whentouseretaincount.com](http://www.whentouseretaincount.com)等等。

由于您有一个反复泄漏的场景，[Heapshot 分析](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)应该有助于准确确定内存滞留的原因。

但是，您可能不需要走那么远。如果您的应用程序只有一个 UIWebView，那么您应该能够简单地将分配工具配置为仅跟踪活动对象并跟踪保留/释放事件。这样，将内存中的对象列表过滤到 UIWebView 并单击到与对象关联的保留/释放事件列表。将在那里找到额外的保留。

然而，这可能是一种症状，而不是原因。原因可能是缓存出错，或者可能是其他一些未正确释放的对象挂在 Web 视图上。

# c# - Linq 从每个类别中获取 3 条记录

> ID：15834764
> 
> 赞同：1
> 
> 时间：2013-04-05T13:06:32.107
> 
> 标签：c#, linq

我的表中有“类别”列，我想从每个类别中取 3 行。这是我的桌子的例子：

```
 ID | Category | Text
----------------------
 01 |    TST   | Text here
 02 |    TST   | Text2 here
 03 |    TST   | Text3 here
 04 |    TST   | Text4 here
 01 |   TST02  | Text here
 02 |   TST02  | Text2 here
 03 |   TST02  | Text3 here
 04 |   TST02  | Text4 here
 05 |   TST02  | Text5 here 
```

这就是我想回来的原因：

```
 ID | Category | Text
----------------------
 01 |    TST   | Text here
 02 |    TST   | Text2 here
 03 |    TST   | Text3 here
 01 |   TST02  | Text here
 02 |   TST02  | Text2 here
 03 |   TST02  | Text3 here 
```

我怎么能用 LINQ 做到这一点？

我试着这样做：

```
.GroupBy(x => x.Category).Take(3) 
```

但在那之后我不能使用 .Select

**更新：** 当我使用 SelectMany 时出现错误：

> 无法识别查询源：ItemName = x, ItemType = System.Linq.IGrouping`2[System.String,ADDE.Models.Notification], Expression = from IGrouping`2 x in {from Notification w in value(NHibernate.Linq .NhQueryable`1[ADDE.Models.Notification]) where ([w].UserId == 04bccede-46d0-44f8-814b-346d5510acb8) orderby [w].Time asc select [w] => GroupBy([w].类别，[w])}

**更新 2：** 这是我的代码：

```
.GroupBy(x => x.Category).SelectMany(x => x.Take(3)).Select(
                                                     s =>
                                                     new NotificationData
                                                         {
                                                             Category = s.Category,
                                                             Text = s.Text,
                                                             Time = DateTime.Now.Subtract(s.Time)
                                                         }) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T13:09:49.880

你想用这个：

```
var result = data.GroupBy(x => x.Category)
                 .SelectMany(x => x.Take(3)); 
```

# php - How to post data using ajax/jquery after confirmation popup

> ID：15834767
> 
> 赞同：1
> 
> 时间：2013-04-05T13:06:53.260
> 
> 标签：php, javascript, jquery, ajax

I would like to send an id from the hidden input type in the form, when a confirmation message pops up and user clicks ok. Right now I cant even make this code without the confirmation popup work, no errors, just a refresh and nothing happens. You may be thinking why I need to confirm adding an item to a cart but that's because I also need to delete an item from the database later on.

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">

$(document).ready(function(){
$('#add').click(function(){
var id = $("#get_id").val()

$.confirm({
        'title'     : 'Delete Confirmation',
        'message'   : 'You are about to delete this User.Continue?',
        'buttons'   : {
            'Yes'   : {

                'action': function(){$a.ajax({
url: 'http://localhost/com/index.php/shopping_basket/view_basket',
type: 'POST',
data: { id: id },
    success: (function(){
    alert('added' + id);

});
                }

            },
            'No'    : {

                'action': function(){}  // Nothing to do in this case. You can as well omit the action property.
            }
        }
    });

});
});
</script> 
```

the form

```
<form id="basket" method="post" action="">
<input type="hidden" id="get_id" value="<?php echo $id ?>">
<input type="submit" id="add" value="Add">
</form> 
```

btw what's the difference in using window.location.href to send something instead of this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T13:08:47.153

`<?php $id ?>`没有 - 就不会包含任何东西`echo`，正如[Ruler](https://stackoverflow.com/a/15834865/901048)指出的那样，无论如何你都忘了给它命名：

```
<input type="hidden" name="whatsmyname" value="<?php echo $id ?>"> 
```

此外，您需要向`submit`表单添加处理程序，而不是`click`处理程序，并取消其正常行为：

```
$('#basket').on('submit',function(e){
    e.preventDefault(); // prevents the form from submitting normally
    $a.ajax({
        url: 'http://localhost/com/index.php/cart/add_cart',
        type: 'POST',
        data: { id: id }, // this comma was missing
        success: (function(){
            alert('added' + id);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T13:11:24.067

有很多事情要做。

1）放在`echo`这里

```
<input type="hidden" value="<?php echo $id ?>"> 
```

2) 给元素命名。那么只有你可以在任何地方访问

```
<input type="hidden" name="id" id="id" value="<?php echo $id ?>"> 
```

3）同样在jquery中，变量的用途是什么`id`。你从哪里得到它？添加那个..

```
var id = $("#id").val();
$a.ajax({
    url: 'http://localhost/com/index.php/cart/add_cart',
    type: 'POST',
    data: { id: id }
        success: (function(){
        alert('added' + id);

}); 
```

4) 最后，不能为表单元素赋予 Click 功能，将其更改为`submit()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T13:54:15.747

尝试这个：

下载js文件 [http://www.bvbcode.com/code/5ytvmx8r-879020-down](http://www.bvbcode.com/code/5ytvmx8r-879020-down)

jquery.confirm.js

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="jquery.confirm.js"></script>
$(document).ready(function(){
$('#add').click(function(){
var id = $("#get_id").val()

$.confirm({
            'title'     : 'Delete Confirmation',
            'message'   : 'You are about to delete this User.Continue?',
            'buttons'   : {
                'Yes'   : {

                    'action': function(){$a.ajax({
    url: 'http://localhost/com/index.php/cart/add_cart',
    type: 'POST',
    data: { id: id }
        success: (function(){
        alert('added' + id);

    });
                    }

                },
                'No'    : {

                    'action': function(){}  // Nothing to do in this case. You can as well omit the action property.
                }
            }
        });

});
});
<form id="basket" method="post" action="">
<input type="hidden" id="get_id" value="<?php echo $id ?>">
<input type="submit" id="add" value="Add">
</form> 
```

# jsf - JSF how to ignore operating system language by configuring locale?

> ID：15834769
> 
> 赞同：0
> 
> 时间：2013-04-05T13:06:54.417
> 
> 标签：jsf, locale

Depending on the operating system $LANG value, the display of a number is different in a JSF page. For example, with the code :

```
<h:outputText value="#{myController.myNumberValue}" /> 
```

With the $LANG = en_US.ISO-8859-1, I have "623, 451". With the $LANG = fr_FR.UTF-8, I have "623 451".

My question is how my application can be independent from the operation system configuration?

I tried the following configuration in faces-config.xml but it doesn't work :

```
<locale-config>
    <default-locale>en</default-locale>
</locale-config> 
```

I also tried to encapsulate h:outputText tag within the following tag, but it doesn't work too :

```
<f:view locale="en">
    <h:outputText value="#{myController.myNumberValue}" />    
</f:view> 
```

Any idea to resolve my problem?

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T10:37:10.373

JSF 调用具有默认语言环境的 Integer.toString() 或 Long.toString() 方法。

**第一个解决方案：**

`Locale.setDefault(myHardcodeLocale);`从您的[ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)调用

**第二种解决方案**：

创建自定义格式化程序。您可以使用 facelets 并为数字创建自己的 outputText。

```
<h:outputText value="#{myController.myNumberValue}">
    <f:convertNumber type="#,###.00"/>
</h:outputText> 
```

# algorithm - 小数底的整数对数

> ID：15834770
> 
> 赞同：1
> 
> 时间：2013-04-05T13:06:59.303
> 
> 标签：algorithm

我正在研究一个问题具有自然对数刻度的程序。

到目前为止，我使用的是 base 2，并[在此处找到](https://stackoverflow.com/a/11398748/931303)`unsigned int log2(uint64_t)`了（在 C/C++ 中）的一个很好的实现。

但是，我发现基数 2 对我的问题来说太多了：我需要使用分数基数，例如 3/2。

有人知道这种操作的实现吗？

我目前的解决方案是`round(log(x)/log(base))`round 返回整数，但我至少在跳跃以避免对日志进行两次评估。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:08:58.280

`log(base)`是一个常数，所以只需评估一次并取其倒数（将其转换为乘法而不是昂贵的除法）。

```
const float k = 1.0f / log(base); // init constant once

y = round(log(x) * k); // each evaluation only requires one log,
                       // one multiply and one round 
```

# .net - 在 WiX 中设置关闭服务的超时时间

> ID：15834774
> 
> 赞同：0
> 
> 时间：2013-04-05T13:07:17.167
> 
> 标签：.net, wix, windows-installer, wix3.5

我有一项服务需要 30-60 秒才能停止。当我运行安装程序并将服务升级到新版本时，我总是会看到以下窗口（我在继续安装之前验证服务是否已停止。

![错误截图：安装程序无法自动关闭所有请求的应用程序。 请确保在继续安装之前关闭正在使用的应用程序保存文件。](https://i.stack.imgur.com/5lPul.png)

有没有办法在安装程序中设置此超时，以便应用程序有足够的时间停止服务以进行最终用户可能安装的任何更新？我们的安装程序是使用 WiX 3.5 构建的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:28:33.307

不幸的是，等待在 Windows Installer 中是不可配置的。从[他们的文档中](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371634%28v=vs.85%29.aspx)：

```
Wait 

Leaving this field null or entering a value of 1 causes the installer to 
wait a maximum of 30 seconds for the service to complete before proceeding.

The wait can be used to allow additional time for a critical event to return
a failure error. A value of 0 in this field means to wait only until the
service control manager (SCM) reports that this service is in a pending state
before continuing with the installation. 
```

您需要让您的服务更快地关闭（对最终用户来说也很棒；）或者必须编写一个自定义操作来自己关闭。这将是一大块工作，并[为安装增加了更多的脆弱性](http://robmensching.com/blog/posts/2007/8/17/zataoca-custom-actions-are-generally-an-admission-of-failure)（就像每个自定义操作一样），所以我会尽可能努力地修复服务。

# java - 不能从静态上下文引用非静态方法 generatePublic(KeySpec)

> ID：15834785
> 
> 赞同：0
> 
> 时间：2013-04-05T13:07:45.233
> 
> 标签：java

我在这行特定的代码中收到上述错误：

```
KeyFactory keyFactory=keyFactory.getInstance(keyAlgorithm);

        EncodedKeySpec privateKeySpec=new PKCS8EncodedKeySpec(privateKeyBytes);
        PrivateKey privateKey1=keyFactory.generatePrivate(privateKeySpec); 
```

准确地说，这是我得到的错误：

```
GeneratePublicPrivateKeys.java:35: error: non-static method generatePublic(KeySp
ec) cannot be referenced from a static context
PublicKey publicKey1=KeyFactory.generatePublic(publicKey
Spec); 
```

注意：我已经浏览了这些帖子
[“非静态方法不能从静态上下文引用”错误](https://stackoverflow.com/questions/4922145/non-static-method-cannot-be-referenced-from-a-static-context-error)
[非静态方法不能从静态上下文引用](https://stackoverflow.com/questions/2694566/non-static-method-cannot-be-referenced-from-a-static-context)
等等，我已经尝试了那里提供的解决方案，但没有他们没有解决我的问题

我该怎么办？
先感谢您：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:10:15.507

尝试更改此行：

```
PublicKey publicKey1=KeyFactory.generatePublic(publicKey
Spec); 
```

到

```
PublicKey publicKey1=keyFactory.generatePublic(publicKey
Spec); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:11:34.123

你需要改变

```
KeyFactory.generatePublic(...) 
```

成为：

```
keyFactory.generatePublic(...) 
```

目前，您的代码正试图调用该`generatePublic`方法，就好像它是静态的（即与 KeyFactory 类相关联，而不是与该类型的对象相关联）。您需要在类的特定实例上调用此方法 - 大概是`keyFactory`您的第一个代码片段中引用的对象。

# jquery - 如何从远程站点修复 Access-Control-Allow-Origin 错误

> ID：15834787
> 
> 赞同：0
> 
> 时间：2013-04-05T13:07:49.837
> 
> 标签：jquery, ajax

我正在尝试在[http://rate-exchange.appspot.com/currency](http://rate-exchange.appspot.com/currency)上使用该服务，但我得到的只是 Access-Control-Allow-Origin 错误。

了解这是一个服务器问题，并且[http://rate-exchange.appspot.com/currency](http://rate-exchange.appspot.com/currency)不是我的服务，我不知道如何解决这个问题。

使用这样的服务：

```
$.getJSON("http://rate-exchange.appspot.com/currency", { "from": Currency.From, "to": Currency.To }, function (result) {
    if (!result.err) {
        Currency.Rate = result.rate;
        $("#footer-output").text("All sales in " + Currency.To + " including VAT");
    }
    else {
        $("#footer-output").text("All sales in local currency including VAT");
    }
}); 
```

现在尝试直接在我的浏览器中获取这些数据不是问题。有什么我可以做的，还是只能在服务器上修复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:18:41.173

以下将起作用。我冒昧地在代码中添加了一个货币对象。这部分显然是你在别处定义的。

Plunkr： [http ://beta.plnkr.co/aMVPVE9kUPPcsD0Ma5s3](http://beta.plnkr.co/aMVPVE9kUPPcsD0Ma5s3)

代码：

```
$(function(){
 Currency = {};
 Currency.From = "USD";
 Currency.To = "PEN";
 Currency.Rate= 0;
 $.getJSON("http://rate-exchange.appspot.com/currency?callback=?", { "from": Currency.From, "to": Currency.To }, function (result) {
    if (!result.err) {
        Currency.Rate = result.rate;
        $("#footer-output").text("All sales in " + Currency.To + " including VAT");
    }
    else {
        $("#footer-output").text("All sales in local currency including VAT");
    }
}); 
```

添加回调=？到 url 和 jquery 将发出一个 jsonp 请求。这是文档中的部分（中途）： [http ://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

JSONP

如果 URL 包含字符串“callback=?” （或类似的，由服务器端 API 定义），请求被视为 JSONP。有关详细信息，请参阅 $.ajax() 中对 jsonp 数据类型的讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:21:55.147

使用 JSONP：

```
Currency = {};
Currency.From = "USD";
Currency.To = "PEN";
Currency.Rate= 0;   
$.get("http://rate-exchange.appspot.com/currency", { "from": Currency.From, "to": Currency.To }, function (result) {
    if (!result.err) {
        Currency.Rate = result.rate;
        $("#footer-output").text("All sales in " + Currency.To + " including VAT");
    }
    else {
        $("#footer-output").text("All sales in local currency including VAT");
    }
}, 'jsonp'); 
```

[**演示**](http://jsfiddle.net/U6jQG/)

# qt - QProcess not work with start but work with startDetached

> ID：15834798
> 
> 赞同：4
> 
> 时间：2013-04-05T13:08:19.210
> 
> 标签：qt, windows-7, qprocess

I have a problem with start dos application with Qprocess::start.

```
#include <QtGui/QApplication>
#include <QProcess>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);

    QProcess *process = new QProcess();
    process->start("c:\\femag\\wfemag_02-2013.exe");

    return a.exec();
} 
```

the executed application fails at some point with this kind of error "invalid handle".

when I use

```
process->startDetached("c:\\femag\\wfemag_02-2013.exe"); 
```

the application starts OK. But I need to use process->start().

I tried this on windows7 32 or 64 bit with same issue. But in windows8 it is working ok.

Can somebody help me with this problem?

# android - Android 项目：导出问题 启动取消！Proguard 返回错误代码 1。请参阅控制台

> ID：15834799
> 
> 赞同：9
> 
> 时间：2013-04-05T13:08:31.097
> 
> 标签：android, export, warnings, apk, proguard

我在 project.prperties 中取消了以下行的注释

```
proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt 
```

工作progard，它工作正常。

但是当我添加 android-support-v4.jar 库时，导出签名的应用程序项目时出错

```
Launch canceled!
 Proguard returned with error code 1\. See console
 Note: there were 316 duplicate class definitions.
 Warning: com.google.android.gms.common.images.ImageManager$a: can't find superclass or interface android.content.ComponentCallbacks2
 Warning: com.google.android.gms.maps.MapFragment: can't find superclass or interface android.app.Fragment
 Warning: com.google.android.gms.common.GooglePlayServicesUtil: can't find referenced field 'int smallestScreenWidthDp' in class android.content.res.Configuration
 Warning: com.google.android.gms.common.images.ImageManager: can't find referenced method 'void registerComponentCallbacks(android.content.ComponentCallbacks)' in class android.content.Context
 Warning: com.google.android.gms.common.images.ImageManager$a: can't find referenced class android.content.ComponentCallbacks2
 Warning: com.google.android.gms.maps.MapFragment: can't find referenced class android.app.Fragment
 Warning: com.google.android.gms.maps.MapFragment: can't find referenced class android.app.Fragment
 Warning: com.google.android.gms.maps.MapFragment: can't find referenced class android.app.Fragment
 Warning: com.google.android.gms.maps.MapFragment: can't find referenced class android.app.Fragment
 Warning: com.google.android.gms.maps.MapFragment: can't find referenced class android.app.Fragment
 Warning: com.google.android.gms.maps.MapFragment: can't find referenced class android.app.Fragment
 Warning: com.google.android.gms.maps.MapFragment: can't find referenced class android.app.Fragment
 Warning: com.google.android.gms.maps.MapFragment: can't find referenced class android.app.Fragment
 Warning: com.google.android.gms.maps.MapFragment: can't find referenced class android.app.Fragment
 Warning: com.google.android.gms.maps.MapFragment: can't find referenced class android.app.Fragment
 Warning: com.google.android.gms.maps.MapFragment: can't find referenced class android.app.Fragment
 Warning: com.google.android.gms.maps.MapFragment: can't find referenced class android.app.Fragment
 Warning: com.google.android.gms.maps.MapFragment$a: can't find referenced class android.app.Fragment
 Warning: com.google.android.gms.maps.MapFragment$a: can't find referenced class android.app.Fragment
 Warning: com.google.android.gms.maps.MapFragment$b: can't find referenced class android.app.Fragment
 Warning: com.google.android.gms.maps.MapFragment$b: can't find referenced class android.app.Fragment
 Warning: com.google.android.gms.maps.MapFragment$b: can't find referenced class android.app.Fragment
 Warning: com.google.android.gms.maps.MapFragment$b: can't find referenced class android.app.Fragment
   You should check if you need to specify additional program jars.
 Warning: there were 21 unresolved references to classes or interfaces.
      You may need to specify additional library jars (using '-libraryjars').
 Warning: there were 2 unresolved references to program class members.
      Your input classes appear to be inconsistent.
      You may need to recompile them and try again.
      Alternatively, you may have to specify the option 
          '-dontskipnonpubliclibraryclassmembers'.
 java.io.IOException: Please correct the above warnings first.
at proguard.Initializer.execute(Initializer.java:321)
at proguard.ProGuard.initialize(ProGuard.java:211)
at proguard.ProGuard.execute(ProGuard.java:86)
at proguard.ProGuard.main(ProGuard.java:492) 
```

我尝试将以下行添加到 proguard-project.txt 但它不起作用

```
-dontwarn android.support.**
-dontwarn com.google.ads.**
-libraryjars libs/android-support-v4.jar
-keep public class * extends com.phonegap.api.Plugin 
-keep public class org.apache.cordova.DroidGap 
-keep public class org.apache.cordova.** 
-dontwarn android.webkit.*
-dontwarn org.apache.**
-dontwarn  android.support.v7.widget.**
-keep class android.support.v7.widget.** { *; }
-dontwarn com.google.ads.** -keep class com.google.ads.** {*;}
-keep class com.google.android.gms.analytics.**
-keep class com.google.analytics.tracking.**
-dontwarn com.google.android.gms.analytics.**
-dontwarn com.google.analytics.tracking.**
-keep class com.google.ads.**  { *; }
-dontwarn com.google.ads.**
-keep public class com.admob.android.ads.** {*;} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-10T07:20:33.783

我自己找到了答案。在 proguard-project.txt 文件中添加以下 2 行解决了该问题。

```
-dontwarn com.google.android.gms.*
-ignorewarnings 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-03T14:29:52.530

虽然我不喜欢关闭警告，但我需要以这种方式使用 -dontwarn：

```
-dontwarn com.google.android.gms.** 
```

# ios - Parsing JSON and save locally

> ID：15834801
> 
> 赞同：1
> 
> 时间：2013-04-05T13:08:35.633
> 
> 标签：ios, objective-c, json

I'm working on an iOS application written in Objective-C and I'm almost done, except for one thing:

I'm parsing a JSON into a tableview, and I want to store the data locally in the app. But I don't know the best way of doing this. Each row has an image, a title, description, and a link. I have different tabs with different JSON.

(I don't want to parse the JSON every time the app opens up, I want to check if something new has been added to the JSON and THEN parse it again. But for now I'm just happy if I can manage to save the data from the JSON locally)

I've been struggling with this for a while now and I really need some help. This is the last thing that I need to fix before the app is ready for App Store.

Don't know if you need to see any code, but I post it anyway so you might get a better understanding of what I'm doing.

Code for parsing json:

```
 jsonData_ = [[NSMutableData alloc] init];
    NSString *urlString = [NSString stringWithFormat:@"http://www.myUrl.se/json/%@.json", _whatState];
    NSURL *url = [NSURL URLWithString: urlString];
    NSURLRequest *urlReq = [NSURLRequest requestWithURL: url];
    NSURLConnection *connection = [NSURLConnection connectionWithRequest: urlReq delegate:self];

-(void)connectionDidFinishLoading:(NSURLConnection*) connection{

    //NSLog(@"Succeeded! Recieved %d bytes of data", [jsonData_ length]);
    NSError *error;
    NSArray *items = [NSJSONSerialization JSONObjectWithData: jsonData_ options: kNilOptions error: &error];

    NSSortDescriptor *sortDesc = [[[NSSortDescriptor alloc] initWithKey:@"title" ascending:YES]copy];
    NSMutableArray *sortedItems = [NSMutableArray arrayWithObject: sortDesc];
    sortedItems = [[items sortedArrayUsingDescriptors: sortedItems] copy];

    if(!error)
    {
        tableData_ = sortedItems;
        tableImgs_ = [[NSMutableArray alloc] initWithArray: tableData_ copyItems: YES];
        [self.tableView reloadData];
        jsonIsFinishedLoading = TRUE;

    }
    else
    {
        NSLog(@"ERROR");
    }
} 
```

Code for my tableview:

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *cellIdentifier = @"listItem";
    TSCustomCell *cell = (TSCustomCell*) [tableView dequeueReusableCellWithIdentifier:cellIdentifier forIndexPath:indexPath];
    [cell setSelectedBackgroundView:selectedCellBgColorView];

    if(jsonIsFinishedLoading)
    {
        NSDictionary *row = [tableData_ objectAtIndex: indexPath.row];
        NSString *title = [row objectForKey:@"title"];

        cell.url = [row objectForKey:@"url"];
        UIFont *defaultFont = [UIFont fontWithName:@"Edmondsans-Bold" size:12.0];

        [cell.listItemLbl setText: title];
        [cell.listItemLbl setFont:defaultFont];

        if([[tableImgs_ objectAtIndex:indexPath.row] isMemberOfClass: [UIImage class]])
            {
                [cell.listItemImage setImage: [tableImgs_ objectAtIndex: indexPath.row]];
            }
            else
            {

                UIActivityIndicatorView *loadingSymbol = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle: UIActivityIndicatorViewStyleGray];
                loadingSymbol.frame = cell.listItemImage.frame;
                [cell addSubview: loadingSymbol];
                [loadingSymbol startAnimating];

                dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0ul);

                dispatch_async(queue, ^{

                    NSString *url = [row objectForKey: @"image"];

                    if([url isEqualToString: @""])
                    {
                        url = @"http://www.myUrl.se/images/standard.png";
                    }
                    else
                    {
                        url = [row objectForKey: @"image"];
                    }

                    NSURL *imgUrl = [NSURL URLWithString: url];
                    NSData *imageData = [NSData dataWithContentsOfURL: imgUrl];
                    UIImage *image = [UIImage imageWithData: imageData];

                    if(image != nil)
                    {
                        [tableImgs_ replaceObjectAtIndex:indexPath.row withObject:image];
                        NSLog(@"tableImgs != nil");

                    }
                    else
                    {
                        NSLog(@"tableImgs = nil");
                        [cell.listItemImage setImage: [UIImage imageNamed:@"standard_transp.png"]];
                    }

                    dispatch_sync(dispatch_get_main_queue(), ^{

                        [loadingSymbol removeFromSuperview];
                        [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation: UITableViewRowAnimationNone];

                    });  
                }); //end dispatch_async
            }
        }
    }

    return cell;

} 
```

Thanks!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:21:12.567

如果我理解你是正确的 - 你可以通过这段代码将你的数据与 JSOn 保存到用户默认值中

```
[[NSUserDefaults standardUserDefaults] setObject:jsonData_ forKey:@"myData"]; 
```

如果你正在解析 json - 你有数据

当你想得到它

```
jsonData_ = [[NSUserDefaults standardUserDefaults] valueForKey: @"myData"]; 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-05T13:25:32.280

这是关于使用[NSCoding 协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)和[NSFileManager](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html)将对象保存到磁盘[的有用教程。](http://www.raywenderlich.com/1914/how-to-save-your-app-data-with-nscoding-and-nsfilemanager)如果您为每一行创建一个对象，您将能够保存它们。

您也可以使用这种方法来保存 JSON 本身，或者您可以将其存储在[用户 defaults](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)中。

```
# Saving
[[NSUserDefaults standardUserDefaults] setObject:jsonData forKey:@"json data"];
[[NSUserDefaults standardUserDefaults] synchronize]; // Generally happens automatically, but if this might happen close to backgrounding you'll want this

# Loading
jsonData = [[NSUserDefaults standardUserDefaults] objectForKey:@"json data"]; 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-05T13:12:40.917

使用 AFNetworking 来实现这一点。它比 NSURLConnection 更容易、更快、更好。

在此处阅读更多信息：[AFNetworking](http://www.raywenderlich.com/30445/afnetworking-crash-course)

# android - Avoid future dates when validating birthdates

> ID：15834802
> 
> 赞同：0
> 
> 时间：2013-04-05T13:08:36.897
> 
> 标签：android, validation

I'm trying to Birthdate in the form of "MM/DD/YYYY", and I want to consider "future" dates to be invalid.

Here's my code so far:

```
final Calendar c = Calendar.getInstance();
mDay = c.get(Calendar.DAY_OF_MONTH);
mMonth = c.get(Calendar.MONTH);
mYear = c.get(Calendar.YEAR);

//String db=bdate.getText().toString();

bdate.setOnClickListener(new View.OnClickListener() {
  @Override
    public void onClick(View v) { 
      showDialog(DATE_DIALOG_ID);
    }
  });
  updateDisplay();
}

private void updateDisplay() {
  // TODO Auto-generated method stub
  this.bdate.setText(new StringBuilder()
  // Month is 0 based so add 1
  .append(mDay).append("-").append(mMonth + 1).append("-")
  .append(mYear).append(" "));
}

private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {
  public void onDateSet(DatePicker view, int monthOfYear, int dayOfMonth,int year) {
    mDay = dayOfMonth;
    mMonth = monthOfYear;
    mYear = year;

    if (year > mYear)
      view.updateDate(mYear,mMonth,mDay);

    if (monthOfYear > mMonth && year == mYear)
      view.updateDate(mYear, mMonth, mDay);

    if (dayOfMonth > mDay && year == mYear && monthOfYear == mMonth)
      view.updateDate(mDay, mMonth, mYear);

    updateDisplay();
  }
};

@Override
protected Dialog onCreateDialog(int id) {
  switch (id) {
    case DATE_DIALOG_ID:
      return new DatePickerDialog(this, mDateSetListener,mDay,mMonth,mYear);
    }
  return null;
 } 
```

I used textview, but at the moment it accepts "future" dates. How can I improve my validation code?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:16:35.043

这里输入代码看看使用Calendar.after(calendar)方法： http: [//developer.android.com/reference/java/util/Calendar.html#after(java.lang.Object)](http://developer.android.com/reference/java/util/Calendar.html#after(java.lang.Object))

在您的 onDateSet 回调中，您可以使用返回的值来创建一个名为 selectedDate 的新日历对象。然后...

```
boolean isAfterToday = selectedDate.after(c); 
```

# android - showDialog button doesent calls method i told him to

> ID：15834803
> 
> 赞同：0
> 
> 时间：2013-04-05T13:08:38.183
> 
> 标签：android, dialog

ok I got activity that doesent have his layout, it is only there to take gps coordinates and if he succeed then default camera intent is started, if not i show him dialog where user have 2 buttons one to cancel and go back to starting activity and second one is to try getting picture again (calling method for obtaining gps and then sending to camera intent).

The problem is that sometimes when i hit try again button it doesent call getPicture() methond but just continue on like button was never hit nor the dialog was shown and that problem happens often

Here is my code:

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    getPicture();
}

public void getPicture(){

    LocationManager locationManager = null;

    locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    locationListener = new MyLocationListener();

    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, locationListener);

    if(locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER)){
        if(MyLocationListener.latitude>0){
            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);

            startActivityForResult(cameraIntent, CAMERA_REQUEST);

        } else {

            showDialog(GPS_CANT_CONNECT);
        }
    }else{

        showDialog(GPS_OFF);
    }
}

@Override
 protected Dialog onCreateDialog(int id) {
        Dialog d = null;
        switch (id){

        case GPS_OFF: {
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("Please turn on your GPS before taking picture");
            builder.setNeutralButton("Try Again", new OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    getPicture();
                }
            });
            builder.setNegativeButton("Cancel", new OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    Intent intent = new Intent(StartCameraActivity.this, MainActivity.class);
                    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(intent);

                }
            });
            d = builder.create();
            break;
        }
        case GPS_CANT_CONNECT: {
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("GPS cant get coordinates! Please make sure that you are outside");
            builder.setNeutralButton("Try Again", new OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    getPicture();
                }
            });
            builder.setNegativeButton("Cancel", new OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    Intent intent = new Intent(StartCameraActivity.this, MainActivity.class);
                    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(intent);

                }
            });

            d = builder.create();
            break;
        }

          return d;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:17:52.543

只需添加：

```
d.show(); 
```

在每一`d = builder.create();`行之后。

因为您只有创建对话框而不显示这就是它不显示的原因。

喜欢：

```
case GPS_CANT_CONNECT: {
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setTitle("GPS cant get coordinates! Please make sure that you are outside");
            builder.setNeutralButton("Try Again", new OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    getPicture();
                }
            });
            builder.setNegativeButton("Cancel", new OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    Intent intent = new Intent(StartCameraActivity.this, MainActivity.class);
                    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(intent);

                }
            });

            d = builder.create();
            d.show();
            break;
        } 
```

# ruby - Error when installing homebrew with ruby

> ID：15834804
> 
> 赞同：1
> 
> 时间：2013-04-05T13:08:38.683
> 
> 标签：ruby, osx-lion, homebrew

Trying to install homebrew from here:

```
$ ruby -e "$(curl -fsSL https://raw.github.com/gist/323731)"
-e:1: syntax error, unexpected ']'
[This script has been moved.][url]
                             ^ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:08:38.683

在浏览器中访问[https://raw.github.com/gist/323](https://raw.github.com/gist/323731) ​​731 ，您会看到

> [此脚本已被移动。][url]
> 
> [网址]：[https ://github.com/mxcl/homebrew/blob/master/Library/Contributions/install_homebrew.rb](https://github.com/mxcl/homebrew/blob/master/Library/Contributions/install_homebrew.rb)

但这似乎不起作用。所以使用

```
$ ruby -e "$(curl -fsSL raw.github.com/mxcl/homebrew/go)" 
```

反而。

# iphone - 整数 0000 cocos2d

> ID：15834807
> 
> 赞同：4
> 
> 时间：2013-04-05T13:08:46.050
> 
> 标签：iphone, objective-c, nsstring, string-formatting

我有一个起始编号，从 0000 开始加一，我已经完成了，但结果是 1,2,3 而不是 0001,0002,0003 等。我怎样才能做到这一点？

我使用这个字符串：

```
stringa = [NSString stringWithFormat:@"Score: %d",score]; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T13:14:40.327

```
stringa = [NSString stringWithFormat:@"Score: %04d",score]; 
```

应该做你想做的。

“4”是（最小）字段宽度，“0”用于填充零而不是空格。 `stringWithFormat`了解（几乎）所有“printf”格式（在此处详细描述：http: [//pubs.opengroup.org/onlinepubs/009695399/functions/printf.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/printf.html)）。

# java - 用于序列化单例的瞬态

> ID：15834809
> 
> 赞同：0
> 
> 时间：2013-04-05T13:08:49.530
> 
> 标签：java, singleton

有效的 Java - 为了保持单例保证，您必须声明所有实例字段瞬态并提供“readResolve”方法。通过在这里声明字段瞬态我们可以实现什么？这是一个示例：

```
....
....
public final class MySingleton implements Serializable{
 private int state;
 private MySingleton() { state =15; }
 private static final MySingleton INSTANCE = new MySingleton();
 public static MySingleton getInstance() { return INSTANCE; }
 public int getState(){return state;}
public void setState(int val){state=val;}
private Object readResolve() throws ObjectStreamException {
  return INSTANCE; 
 }
    public static void main(String[] args) {
        MySingleton  c = null;
        try {
            c=MySingleton.getInstance();
            c.setState(25);
            FileOutputStream fs = new FileOutputStream("testSer.ser");
            ObjectOutputStream os = new ObjectOutputStream(fs);
            os.writeObject(c);
            os.close();
        } catch (Exception e) {
            e.printStackTrace();
        }

        try {
            FileInputStream fis = new FileInputStream("testSer.ser");
            ObjectInputStream ois = new ObjectInputStream(fis);
            c = (MySingleton) ois.readObject();
            ois.close();
            System.out.println("after deser: contained data is " + c.getState());
        } catch (Exception e) {
            e.printStackTrace();
        }

    }
} 
```

无论我是否将“状态”变量声明为瞬态，我都会将 c.getState() gettign 打印为 25。我在这里遗漏了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:36:31.150

通过使属性瞬态获得的是您不会序列化状态。序列化它是不必要的，因为它无论如何都会被 readResolve() 方法丢弃。

如果状态包含在 int 中，则无关紧要。但是，如果状态是对象的复杂图，则会产生显着的性能差异。当然，如果状态是不可序列化的，你别无选择。

也就是说，序列化单例是有问题的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:56:00.113

> 无论我是否将“状态”变量声明为瞬态，我都会将 c.getState() gettign 打印为 25。我在这里遗漏了什么吗？

您替换了反序列化的对象，因为 readResolve() 返回了 MySingleton 的私有静态实例，从而覆盖了反序列化返回的实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T18:49:23.877

```
try {
            c=MySingleton.getInstance();
            c.setState(25);
            FileOutputStream fs = new FileOutputStream("testSer.ser");
            ObjectOutputStream os = new ObjectOutputStream(fs);
            os.writeObject(c);
            os.close();
 } 
```

您得到 25 是因为您在对象中设置了该值。参考上面的代码。我想你期望答案是 15？

# jquery - 引导日期选择器 - 解析日期

> ID：15834811
> 
> 赞同：5
> 
> 时间：2013-04-05T13:08:54.967
> 
> 标签：jquery, twitter-bootstrap, datepicker

我正在使用相当不错[的 eternicode's/bootstrap-datepicker](https://github.com/eternicode/bootstrap-datepicker) jQuery 插件。

我正在尝试使用包含的[DPGlobal](https://github.com/eternicode/bootstrap-datepicker/blob/master/js/bootstrap-datepicker.js#L947)工具来执行一些日期操作。

例子：

```
dpg = $.fn.datepicker.DPGlobal;
date_format = 'dd/mm/yyyy';
date_str = '31/12/2013';
console.log(dpg.parseDate(start, date_format)); 
```

返回我（在 Firefox 上）

> 类型错误：format.parts 未定义

我究竟做错了什么 ？

* * *

看看[我的小](http://jsfiddle.net/LcrJR/)例子

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T13:34:21.860

您还必须在使用之前解析格式`parseDate(...)`:)。

```
dpg.parseDate(date_str, dpg.parseFormat(date_format)) 
```

我已经更新了你的[小提琴](http://jsfiddle.net/LcrJR/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:34:26.787

您需要解析第`format`一个使用`parseFormat(format)`

```
$('body').append($('<div />').text(dpg.parseDate(date_str, dpg.parseFormat(date_format)))); 
```

演示：[Plunker](http://plnkr.co/edit/Q4Yllhw8cBZdnYb3iFu2?p=preview)

# windows - C ++防止单击红色X时关闭控制台窗口

> ID：15834818
> 
> 赞同：3
> 
> 时间：2013-04-05T13:09:16.463
> 
> 标签：windows, visual-c++, console-application

我正在开发一个没有类和对象的简单 C++ 控制台应用程序。
是否有任何方法或功能可以防止单击红色 X 按钮时控制台关闭？
我正在使用 Visual Studio C++ Express 2010：一个仅包含 main.cpp 文件的简单控制台应用程序。谢谢你回答我的问题 ：） ！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-25T08:58:55.460

这对我有用：

```
#include "conio.h"
void main()
{
    HWND hwnd = GetConsoleWindow();
    HMENU hmenu = GetSystemMenu(hwnd, FALSE);
    EnableMenuItem(hmenu, SC_CLOSE, MF_GRAYED);
} 
```

当我们这样做时，重新启用按钮：

```
EnableMenuItem(hmenu, SC_CLOSE, MF_ENABLED); 
```

...并设置窗口的标题：

```
char consoleTitle[256];
wsprintf(consoleTitle, _T("My little window"));
SetConsoleTitle((LPCTSTR)consoleTitle); 
```

* * *

我看到大多数参考文献都使用`DeleteMenu`而不是`EnableMenuItem`. 我更喜欢后者，因为您可以获得更多控制权（启用/禁用/灰色等）。有关完整选项，请查看 MSDN[控制台功能](https://docs.microsoft.com/en-us/windows/console/console-functions)和[菜单功能](https://docs.microsoft.com/en-us/windows/win32/menurc/menu-functions)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T09:10:03.993

您可以使用[SetConsoleCtrlHandler](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686016%28v=vs.85%29.aspx)来控制控制台窗口。您需要编写一个回调来处理事件（例如`CTRL_CLOSE_EVENT`）。您也可以使用[GetConsoleWindow](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683175%28v=vs.85%29.aspx)函数来获取窗口句柄，并处理窗口消息。我已经用以前的方法控制了窗口，不确定是否处理特定的窗口消息（通过窗口句柄）。

请参阅[控制台功能](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682073%28v=vs.85%29.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T17:31:02.893

如果您正在接收窗口的消息，则可以捕获窗口的关闭消息并阻止它关闭。不幸的是，控制台独立于其中运行的程序，您没有那种控制权。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-05T17:26:07.200

抱歉，这不是评论，我还没有足够的积分来评论。

您不能只删除表单属性中的按钮吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-01T01:43:28.487

你总是可以使用信号：

```
#include <cstdio>
void my_handler(int param) {
  main();
}
int main() {
  signal(SIGABRT, my_handler);
  signal(SIGTERM, my_handler);
  return 0;
} 
```

您显然应该允许用户选择关闭应用程序，方法是更改​​ my_handler. my_handler 调用 main，因此每当程序关闭时，都会调用 my_handler，因此调用 main。

# python - python中的字母/单词猜谜游戏

> ID：15834819
> 
> 赞同：3
> 
> 时间：2013-04-05T13:09:23.440
> 
> 标签：python

*背景*

我正在尝试用 python 编写一个基本的字母游戏。在游戏中，计算机版主从可能的单词列表中挑选一个单词。每个玩家（计算机 AI 和人类）都会看到一系列空白，每个字母对应一个单词。然后每个玩家猜测一个字母和一个位置，并被告知以下内容之一：

那个字母属于那个位置（最好的结果）那个字母在那个单词中，但不在那个位置那个字母不在任何剩余的空白处当单词完全显示时，玩家猜对最多的字母赢得一分。电脑版主又选了一个词，重新开始。第一个获得五分的玩家赢得比赛。在基本游戏中，两个玩家共享他们正在填写的同一组空白，因此玩家可以从彼此的工作中受益。

*问题*

我现在正在研究计算机 AI 部分（代码的底部）。我希望它从尚未猜到的字母列表中选择一个随机字母。最好的方法是什么？

```
import random

#set initial values
player1points= 0
ai= 0
userCorrectLetters= ''
aiCorrectLetters=''
wrongPlace=''
wrongLetters=''
correctLetters = ''
notInWord = ''
endGame = False
alreadyGuessed = 'a'
userGuessPosition = 0

###import wordlist, create mask
with open('/Users/jamyn/Documents/workspace/Lab3/Lab3/wordlist.txt') as wordList:
    secretWord = random.choice(wordList.readlines()).strip()

print (secretWord) 
mask = '_'  * len(secretWord)
for i in range (len(secretWord)):
    if secretWord[i] in correctLetters:
        mask = mask[:i] + secretWord[i] + mask [i+1:]
for letter in mask:
    print (letter, end='')
    print ()

print ()

def addAlreadyGuessed():
    alreadyGuessed= userCorrectLetters + aiCorrectLetters + wrongLetters + correctLetters

def displayGame():
    print ('letters are in word but not in correct location:', wrongPlace)
    print ('letters not in word:', notInWord)
    ##asks the user for a guess, assigns input to variable
def getUserGuess(alreadyGuessed):

    while True:
        print ('enter your letter')
        userGuess = input ()
        userGuess= userGuess.lower()
        if len(userGuess) != 1:
            print ('please enter only one letter')
        elif userGuess in alreadyGuessed:
            print ('that letter has already been guessed. try again')
        elif userGuess not in 'abcdefjhijklmnopqrstuvwxyz':
            print ('only letters are acceptable guesses. try again.')
        else:
            return userGuess

def newGame():
    print ('yay. that was great. do you want to play again? answer yes or no.')
    return input().lower().startswith('y')

userTurn=True     
while userTurn == True:
    print ('which character place would you like to guess. Enter number?')
    userGuessPosition = int(input())

    slice1 = userGuessPosition - 1  
    print (secretWord)  

    ##player types in letter
    guess = getUserGuess(wrongLetters + correctLetters)
    if guess== (secretWord[slice1:userGuessPosition]):
        correctLetters = correctLetters + guess
        print ('you got it right! ')
        break
    elif guess in secretWord:
            userCorrectLetters = userCorrectLetters + guess 
            correctLetters = correctLetters + guess
            print ('that letter is in the word, but not in that position')
            break
    else:
            wrongLetters = wrongLetters + guess
            print ('nope. that letter is not in the word')
            break

print ('its the computers turn')

aiTurn=True

while aiTurn == True:
    aiGuess=random.choice('abcdefghijklmnopqrstuvwxyz')
    print (aiGuess) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T13:14:12.150

使用 pythons 集合，保留一个包含所有 26 个字母的集合，以及猜测的集合，然后只询问大集合中不在较大集合中的元素[http://docs.python.org/2/library /sets.html](http://docs.python.org/2/library/sets.html) ...然后从该结果中提取您的随机选择

```
allletters = set(list('abcdefghijklmnopqrstuvwxyz'))
usedletters = set() # update this as you go
availletters = allletters.difference(usedletters) #s - t    new set with elements in s but not in t 
```

打印出很好的集合，你可以做

```
print sorted(availletters) 
```

或者

```
print ', '.join(sorted(availletters)) 
```

回答您对添加猜测的跟进，这是一个简单的示例

```
allletters = set(list('abcdefghijklmnopqrstuvwxyz'))
usedletters = set() # update this as you go
while( len(usedletters) != len(allletters) ):
    guessedletter = raw_input("pick a letter")
    availletters = allletters.difference(usedletters)
    usedletters.update(guessedletter) 
```

您也可以只列出一个列表并减去猜到的字母，例如：

```
allletters = set(list('abcdefghijklmnopqrstuvwxyz'))
while( len(usedletters) != len(allletters) ):
    guessedletter = raw_input("pick a letter")
    allletters.difference_update(guessedletter) 
```

# c# - 如何将 JS 中的复杂 JSON 转换为 Silverlight 中的 .NET 类

> ID：15834820
> 
> 赞同：0
> 
> 时间：2013-04-05T13:09:25.460
> 
> 标签：c#, javascript, .net, json, silverlight

我有一个 Silverlight 项目，它必须与当前的 Javascript 库进行互操作，才能使用 AJAX 获取 JSON 数据，JSON 数据如下所示：

```
{"javaClass":"java.util.ArrayList","list":[{"JOB_NUM":"21", "DEADLINE":{"time":1359583200000,"javaClass":"java.sql.Timestamp"}, "javaClass":"JobEntity"}]} 
```

在 Silverlight 中，我创建了一个“桥”类来将 JSON 数据转换为 C# 类。主要方法如下：

```
public static T Invoke<T>(string method)
    {
        ScriptObject result = HtmlPage.Window.Eval("$.parseJSON("+method+")") as ScriptObject;
        if (result != null)
        {
            ScriptObject data = result.GetProperty("list") as ScriptObject;
            if (data != null)
                return data.ConvertTo<T>();
        }

        return default(T);
    } 
```

另外，我在这里附加了实体 POCO 类（简化）。

```
public class JobEntity
{
    public string JOB_NUM {get; set;}
    public string DEADLINE {get; set;}
} 
```

问题是如何将名为“DEADLINE”的时间戳转换为 C# 中的日期格式字符串。我想这可能与 DEADLINE 属性中的 setter 访问器有关。

`ConvertTo<string>()`顺便说一句，如果评估的值是 Javascript 中的字符串本身，我就不能使用 ScriptObject 的方法，这很奇怪。即，我只能以这种方式解析字符串：

```
scriptObject.ToString();  //ConvertTo<string>() will not work. 
```

这里有什么意义？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:17:59.610

使用 Newtonsoft.JSON 程序集，您可以将 json 字符串解析为 JToken 对象，然后找到 date 属性，就像对这个问题[Deserializing JSON to .NET object using Newtonsoft（或 LINQ to JSON 可能？）](https://stackoverflow.com/questions/4749639/deserializing-json-to-net-object-using-newtonsoft-or-linq-to-json-maybe)

# php - 获取用户时区相关日期

> ID：15834824
> 
> 赞同：0
> 
> 时间：2013-04-05T13:09:37.207
> 
> 标签：php

嗨，我有一项任务需要捕获用户访问详细信息，例如浏览器、操作系统版本和它使用的时区。

但是，我能够解决检测浏览器和操作系统版本的解决方案。

我正在寻找一种解决方案，我的 php 代码可以检测到时区用户在尝试访问我的网页时所拥有的内容。另外，我如何将用户的时间转换为服务器时间。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:17:44.180

```
-new Date().getTimezoneOffset()/60; 
```

getTimezoneOffset() 将从 GMT 中减去您的时间并返回分钟数。因此，如果您居住在 GMT-8 中，它将返回 480。将其转换为小时，除以 60。另外，请注意符号与您需要的相反——它计算的是 GMT 与您的时区的偏移量，而不是您的时区时区与 GMT 的偏移量。要解决此问题，只需乘以 -1

# r - 使用开始和结束位置之间的值创建列表

> ID：15834825
> 
> 赞同：3
> 
> 时间：2013-04-05T13:09:40.427
> 
> 标签：r

我有一个这种格式的文本文件

```
begin    end   
1        10    
25       35
40       50
37       48
...      ... 
```

我使用这些命令创建一个列表，其中包含“开始”和“结束”列的值之间的所有值

```
x <- read.table("in.txt")

result <- vector("list",486)
      for(i in 1:486){
      result[[i]] <- c(x[i,1]:x[i,2])
      }
lapply(result, write, "out.txt", append=TRUE, ncolumns = 1) 
```

因此，我得到一个包含 1 列的文件，其中所有值都在不同的行上。现在我想做一些额外的事情。

我有两个额外的列，而不是只有“开始”和“结束”列的输入文件，如下所示：

```
begin    end    A    B
1        10     x    0
25       35     x    1
40       50     x    2
37       48     y    0 
```

我现在希望这些其他列的值也出现在我的输出中，这样我就得到了这样的东西

```
position    A    B
1           X    0
2           X    0
3           X    0
...
10          X    0
...
40          X    2
41          X    2
...
37          Y    0 
```

如何更改我的功能，使输出看起来像这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T13:14:09.670

这是一个`data.table`解决方案：

```
require(data.table)
DT <- data.table(DF, key=c("A", "B"))
DT[, list(pos = seq(begin, end, by=1)),by=key(DT)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T13:19:57.743

这是一个基本答案：

```
lapply(1:nrow(x), function(u) cbind(position=x$begin[u]:x$end[u], x[u,3:4])) 
```

高温高压

# c# - 是否可以在 C# 中覆盖 Winform 面板的填充？

> ID：15834826
> 
> 赞同：1
> 
> 时间：2013-04-05T13:09:45.153
> 
> 标签：c#, winforms, overriding, padding

我有一个非常简单的问题，但我还没有找到一个简单的灵魂。

我正在创建一个具有边框和圆角的自定义面板。我希望能够覆盖填充，所以无论用户放置什么，我都会为其添加一些值，这样它就不会与边框重叠。我希望能够在运行时和在设计时。因此，例如，如果我将一个控件（例如 PictureBox）停靠在我的面板中，它就不会在边框上绘制。

我试图简单地覆盖填充属性，但出现以下错误：

`cannot override inherited member 'System.Windows.Forms.Control.Padding.set' because it is not marked virtual, abstract, or override`
任何人都有一个（简单的）解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:51:08.097

好吧， Padding 属性不是虚拟的，所以试图覆盖它根本行不通。您将不得不*更换*该物业。这需要使用*new*关键字，这是解决继承问题的一种通常非常麻烦的方法。但它适用于 Winforms 控件，因为设计者只使用控件的实际实例，Winforms 本身不使用设置器，客户端代码很少使用基类来调用设置器。

所以这几乎总是可以正常工作：

```
class MyControl : Control {
    public new Padding Padding {
        get { return base.Padding; }
        set {
            // override value
            //...
            base.Padding = value;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:44:53.740

我能想到的最好的是：

```
 protected override void OnPaddingChanged(EventArgs e)
    {
        base.OnPaddingChanged(e);
        if (Padding.Left < 3)
        {
            base.Padding = new Padding(3, base.Padding.Top, base.Padding.Right, base.Padding.Bottom);
        }
        if (Padding.Top < 3)
        {
            base.Padding = new Padding(base.Padding.Left, 3, base.Padding.Right, base.Padding.Bottom);
        }
        if (Padding.Right < 3)
        {
            base.Padding = new Padding(base.Padding.Left, base.Padding.Top, 4, base.Padding.Bottom);
        }
        if (Padding.Bottom < 3)
        {
            base.Padding = new Padding(base.Padding.Left, base.Padding.Top, base.Padding.Right, 3);
        }
    } 
```

它在设计时和运行时工作，我不知道它是否有用，但它适用于我必须做的事情。

# git - 在 GitHub 提交上获取更改的行号

> ID：15834831
> 
> 赞同：2
> 
> 时间：2013-04-05T13:10:01.953
> 
> 标签：git, github, git-diff

当您访问 GitHub 上的存储库并单击其中一个提交时，除了提交消息之外，该网站还会向您显示已更改的源文件，其中蓝色区域 (+) 表示添加，红色区域 (-) 表示删除。现在我希望能够以编程方式获得相同的东西。也就是说，我已经将 repo 克隆到我的计算机上，我想去克隆的目录并执行 git diff commit# 或其他操作，以便输出是更改的源文件和更改的行号。我花了很长时间在网上寻找解决方案，但没有一个适合我！请问有什么建议吗？

注意：有 git diff --stat 或 --numstat 等，但它们只给你更改的文件和更改的数量。我想要的是特定的行号。似乎 git diff 没有任何输出选项。

# android - Mobfox - 横幅互联网连接

> ID：15834833
> 
> 赞同：1
> 
> 时间：2013-04-05T13:10:03.967
> 
> 标签：android, banner, mobfox

我正在尝试在我的应用程序中使用 Mobfox 添加横幅。按照 Mobfox 提供的指南，我将此代码添加到 MainActivity.java 的 onCreate 方法中：

```
layout = (RelativeLayout) findViewById(R.id.rel_lay);

if (mAdView != null) {
    mAdView = new AdView(this,"http://my.mobfox.com/request.php"
        , "fe96717d9875b9da4339ea5367eff1ec", true, true);
    mAdView = setAdListener(this);
    layout.addView(mAdView);
} 
```

但我收到此错误：“未定义 MainActivity 类型的方法 setAdListener(MainActivity)”。如何定义该方法？我在 Mobfox 的指南中找不到。

如何使横幅有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T08:07:15.900

您必须将 AdListener 设置为您的 mAdView，如`MobFox Android SDK Setup Guide`. 使用下面的代码：

```
mAdView = new AdView(this, "http://my.mobfox.com/request.php",
    "fe96717d9875b9da4339ea5367eff1ec", true, true);
mAdView.setAdListener(this);
layout.addView(mAdView); 
```

**您的活动必须实施`AdListener`。**

# javascript - 验证Firefox JSP中的文本字段onkeypress事件

> ID：15834834
> 
> 赞同：0
> 
> 时间：2013-04-05T13:10:11.180
> 
> 标签：javascript, jsp, firefox, onkeypress

我已经编写了 onKeyPress 事件，它在用户输入一些文本时验证文本，然后从某个字段中跳出标签应该验证文本，如果没有输入任何内容或输入不正确的值，应该给出错误通知用户并且焦点应该回到该字段并且用户必须除了字段的帮助按钮外，不允许进入下一个字段。

```
<jade:input type="text" name="dtxtDesigCd" 
    value="" size="10" maxlength="8" 
    classname="input" disabledclass="disabled-input" style="color: black"  
    datasource="dsDesigHourDetail:desigCode"
    onkeypress= "checkDesignation(this, event);">
</jade:input> 
```

我还有一个自定义 JSP 标记“PickList”，它基本上是一个按钮，它显示一个模式窗口，从数据库中获取相关字段的帮助，从帮助窗口中选择后，从数据库中选择的记录显示到 JSP 中的文本字段中。

我们早期的供应商使用了修改后的 SOFIA 框架，现在我必须维护代码。早期代码的问题是必须双击此按钮才能获得帮助，因为它使用 onblur 而不是 onkeypress，并且需要多次尝试，因为它不断给出错误。

早期的 onblur 代码是

```
 onblur="setValue('DESIGNATION');" onkeyup="capitalize(this);" 
```

现在已替换为

```
 onkeypress= "checkDesignation(this, event);"> 
```

JSP中帮助按钮/PickList的代码如下：

```
<rap:pickfromlist name="picklistDesignation" datasource="dsDesigHourDetail" 
    pflheading="Designation Details" focusfield="dtxtDesigCd"
    pflcolumnsdesc="Designation Code, Description" 
    fieldlist="distinct emp_desig_cd, emp_desig_desc " 
    lookuptable="pmm_designation" orderby="emp_desig_cd"
    targetproperty="desigCode, designation" 
    whereclause=" executive_post='N' and crew_flg = 'N'" /> 
```

在此字段中，指定的描述被捕获为从选择列表中选择或在通过 setValue 方法提交表单后，该方法通过表单中的隐藏变量操作将传递的值发送到服务器并提交表单。

```
<jade:input type="text" name="dlblDesigDesc" value="" size="50" 
    classname="labeltext" style="color: black" 
    datasource="dsDesigHourDetail:designation" enabled="False">
</jade:input> 
```

checkDesignation(obj, evt) 定义为

```
function checkDesignation(obj, evt) {
    var evt = (evt) ? evt : (window.event) ? event : null;
    if (evt) {
        var len = TrimString(obj.value).length;
        alert("Designation : " + obj.value);
        if (evt.keyCode == 9 && len >= 0) {
            if (len == 0) {
                setErrMessage('Designation must be entered and not blank');
                document.forms[0].htmlPageTopContainer_pageForm_detailDesigHourForm_dtxtDesigCd.focus();
                document.forms[0].htmlPageTopContainer_pageForm_detailDesigHourForm_dtxtDesigCd.value = '';
                setValue('DESIGNATION');
                return false;
            } else {
                capitalize(obj);
                setValue('DESIGNATION');
                return true;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:21:06.437

检查这个

```
 $("#textbox").bind("onKeyPress ", function (e) {
                if (e.altKey || e.ctrlKey || e.shiftKey){
                    return true;
    }
    else{
    // you have this text box inner text in this.val() and can be checked with 
           your validate function.
    }
            }); 
```

# rhomobile - 条码扫描器和签名捕获是否需要 Rhomobile Suite 中的许可证？

> ID：15834835
> 
> 赞同：-1
> 
> 时间：2013-04-05T13:10:12.570
> 
> 标签：rhomobile

条码扫描器和签名捕获是否需要 Rhomobile Suite 中的许可证？

免费版的 Rhomobile Suite 中是否可以对条码扫描器和签名捕获进行编码？

请问有人快点回复吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:59:37.323

从 Rhodes 版本开始，`3.3.3`这些设备功能需要许可证。但是，您可以使用旧版本的 Rhodes，这些设备功能无需许可证即可使用。这[在文档中进行了解释](http://docs.rhomobile.com/rhodes/device-caps)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T08:45:00.133

如果你选择 Rhoelements，那么你必须购买许可证，关于签名，你可以像 Sketch 和 JQuery 签名一样选择 JQuery，我使用 Barcode 作为 Rhoelemnts，我不知道 Barcode 是否会有替代选项。

# git - Git在某些文件中显示差异

> ID：15834838
> 
> 赞同：0
> 
> 时间：2013-04-05T13:10:20.837
> 
> 标签：git

我正在使用 Github GUI，并且我有一个名为 2.4 的项目的旧版本，但是某个文件中的差异太大而无法看到。

我可以通过命令行显示提交中的差异：`8f135b0`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:12:57.677

在什么和什么之间？当前和旧的提交？

`git diff HEAD 8f135b0`

更一般地说，`git-diff`可以进行两次提交并显示它们之间的差异。HEAD 是您所在的当前头部的符号名称。

有关`man git-diff`更多信息，请参阅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:17:39.927

命令：

```
git show 8f135b0 
```

...它向您展示了该提交作为差异引入的更改，以及提交消息和其他详细信息。

# git - 如何让 git 列出特定路径中特定类型的所有已更改文件以针对特定错误？

> ID：15834839
> 
> 赞同：5
> 
> 时间：2013-04-05T13:10:21.273
> 
> 标签：git, git-log, git-status

我想知道如何让 git 列出所有更改的文件

*   某种类型的（例如所有 php 文件）
*   根据某个错误编号提交。或尚未提交的
*   并且在特定的路径中

我将首先为我的问题列出一个示例情况。

假设我更改了以下文件：

**未提交的更改**

```
/site/main.php
/site/main.html
/site/includes/lib.php 
```

**提交 3**
提交消息：“错误 xyz：进行了一些更改”

```
/site/main.php
/site/main.html
/site/main.js
/test/test.php
/test/test.html 
```

**提交 2**
提交消息：“错误 xyz：进行了更多更改”

```
/site/main.php
/site/main.html
/site/includes/include.php 
```

**提交 1**
提交消息：“错误 abc：注意这是另一个错误”

```
/site/login.php 
```

假设我仍在研究错误 xyz。现在我需要一个列表，列出到目前为止在站点目录中已针对此错误更改的所有 php 文件。所以我需要以下列表作为输出：

```
/site/main.php
/site/includes/lib.php
/site/includes/include.php 
```

什么命令可以做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-05T14:38:56.897

这很接近：

```
git log --grep=xyz -- '*.php' 
```

该`--grep`参数应用于提交消息。files 参数上的单引号确保`git`进行扩展。

一个测试：

```
ebg@ebg(328)$ git log --oneline
f687708 bar x, y, not a
dfb4b96 foo d, e, f
df18118 foo a, b, c
ebg@ebg(329)$ git log --oneline --grep=a
f687708 bar x, y, not a
df18118 foo a, b, c
ebg@ebg(330)$ git log --oneline --grep=a -- 'a.*'
df18118 foo a, b, c 
```

文件扩展可能需要一些东西来处理子目录。有点：

```
git log --oneline --grep=a -- '*/a.*' 'a.*' 
```

# ruby-on-rails - 将 XML 发送回服务器 Rails

> ID：15834846
> 
> 赞同：0
> 
> 时间：2013-04-05T13:10:43.570
> 
> 标签：ruby-on-rails, xml, ruby-on-rails-3

因为在我想知道是否有人可以指出一些在处理 XML（post/puts 请求）时显示最佳实践的资源或者可能显示一个示例之前，我从未这样做过。

例如，我正在尝试将一些 XML 回发到[google 联系人 api](https://developers.google.com/google-apps/contacts/v3/#updating_contacts)以更新联系人

我目前所做的是将传入的 XML 保存到我的模型中，在应用程序中执行编辑功能，然后保存回模型。一旦所有内容都更新，我想以 XML 格式将更新后的联系人回发回 API，在目前我只更新电子邮件地址和人名

这是一个 PUTS 请求

```
https://www.google.com/m8/feeds/contacts/userEmail/full/{contactId} 
```

有人可以提供一个他们将如何做到的例子吗？

要返回的 XML 是

```
PUT /m8/feeds/contacts/default/full/<var>contactId</var>
If-Match: <var>Etag</var>

<entry gd:etag='<var>Etag</var>'>
<id>http://www.google.com/m8/feeds/contacts/<var>userEmail</var>/base/<var>contactId</var></id>
<updated>2008-02-28T18:47:02.303Z</updated>
<category scheme='http://schemas.google.com/g/2005#kind'
term='http://schemas.google.com/contact/2008#contact'/>
<gd:name>
<gd:givenName>New</gd:givenName>
<gd:familyName>Name</gd:familyName>
<gd:fullName>New Name</gd:fullName>
</gd:name>
<content type='text'>Notes</content>
<link rel='http://schemas.google.com/contacts/2008/rel#photo' type='image/*'
href='https://www.google.com/m8/feeds/photos/media/<var>userEmail</var>/<var>contactId</var>'/>
 <link rel='self' type='application/atom+xml'
href='https://www.google.com/m8/feeds/contacts/<var>userEmail</var>/full/<var>contactId</var>'/>
<link rel='edit' type='application/atom+xml'
href='https://www.google.com/m8/feeds/contacts/<var>userEmail</var>/full/<var>contactId</var>'/>
<gd:phoneNumber rel='http://schemas.google.com/g/2005#other'
primary='true'>456-123-2133</gd:phoneNumber>
<gd:extendedProperty name='pet' value='hamster'/>
<gContact:groupMembershipInfo deleted='false'
href='http://www.google.com/m8/feeds/groups/<var>userEmail</var>/base/<var>groupId</var>'/>
</entry>
</pre> 
```

任何建议表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:25:53.017

我对 google 联系人 API 一无所知，但在 Rails 中使用[Net::HTTP](http://ruby-doc.org/stdlib-2.0/libdoc/net/http/rdoc/Net/HTTP.html)、[HTTParty](https://github.com/jnunemaker/httparty)或类似方法进行 POST/PUT/GET 非常简单。

在 HTTParty 我很确定它是这样的：

```
require 'httparty'
response = HTTParty.put("https://www.google.com/m8/feeds/contacts/userEmail/full/{contactId}",
             :body => { :xml => xml_data }) 
```

# .net - .Net 正则表达式拆分为可选项目和贪婪

> ID：15834847
> 
> 赞同：0
> 
> 时间：2013-04-05T13:10:44.157
> 
> 标签：.net, regex, parsing, split, regex-greedy

这是我要解析的数据测试样本：

```
Content1
***
Content2
***
Content3
Content3
***

Content4
***
Content5

***
***
Content6
***
***
***
Content7 
```

简而言之，数据条目由新行上的分隔符字符串分隔。我想获取 Content1、Content2、Content3\r\nContent3、\r\nContent4、Content5\r\n、Content6、Content7。我尝试了一个非常简单的 regex `(\r\n)?^\*\*\*$(\r\n)?`，它在 RegexBuddy 的 Split 中使用 '^$ match at line breaks' 选项和 .Net flavor selected 为我提供了正确的输出，尽管多个分隔符之间有空字符串，我知道我必须手动删除。但是，以下 C# 代码：

```
string regexPattern = string.Format(@"(\r\n)?^{0}$(\r\n)?", Regex.Escape("***"));
var records = Regex.Split(document, regexPattern, RegexOptions.Multiline); 
```

返回我整个输入字符串。我在这里错在哪里？

另外，我不明白为什么正则表达式`(\r\n)?\*\*\*(\r\n)?`（它并不真正适合我，因为一个条目可以包含分隔符字符串）返回我 Content1、\r\n、\r\n、Content2、\r\n 等. \r\n 物品不应该被贪婪地抢走吗？RegexBuddy 用这个正则表达式给了我正确的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:27:21.190

### 1\. 究竟在哪里`$`匹配？

主要问题是`$`匹配字符之前`\n`，所以如果有任何`\r`before `\n`，你需要在模式中指定它。否则，将不返回任何匹配项。`"\r$"`您可以使用on测试拆分字符串`"Content1\r\nContent2\r\nContent3"`以查看效果。

只是一个示例，显示在哪里被认为是行首`^`和行尾`$`（在`Multiline`选项下）。第一行是原始字符串（新行和回车分别显示为`\n`和），第二行用和`\r`匹配的零长度字符串的位置进行注释。`^``$`

```
***\r\nConte\rn\rt3\r\nCo\nntent3
^***\r$\n^Conte\rn\rt3\r$\n^Co$\n^ntent3$ 
```

为了解决这个问题，我们只需要`\r`在`$`. 在下面第 3 节的解决方案中，我测试 optional `\r`，因为`\r`如果输入文件来自 UNIX 环境，则可能不存在。

### 2\. 在结果中包含捕获的文本`Regex.Split`：

从 .NET Framework 2.0 开始，[`Regex.Split`](http://msdn.microsoft.com/en-sg/library/ze12yx1d%28v=vs.110%29.aspx)将在分隔符处拆分字符串，并**在结果数组中包含捕获的文本**。

要解决上述问题，只需将*捕获组*（捕获文本+分组属性）变为*非捕获组* `(?:pattern)`（仅分组属性）。

### 三、结论

所以解决方案是：

```
var records = Regex.Split(document, @"(?:\r?\n)?^[*]{3}\r?$\n?", RegexOptions.Multiline); 
```

[**ideone 上的演示**](http://ideone.com/lfIIrj)

您可以单独处理结果中的空字符串。

# android - 如何将刚刚创建的对象从一个活动传递到另一个活动？

> ID：15834848
> 
> 赞同：1
> 
> 时间：2013-04-05T13:10:46.517
> 
> 标签：android, android-intent, android-activity

我的应用程序包含 2 个活动。Activity A 是通过启动应用程序创建的。在这个中，我创建了我自己的 MyClass 类的对象。此类包含一个字符串和 3 个整数。在活动 A 中，该对象被写入。第二个活动 B 需要读取这个对象。我怎样才能将它从 A 传递到 B？还是有其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:16:01.140

有几种方法可以将对象从一个活动传递到另一个活动：

**1.**应用程序类：该类对您的所有应用程序活动都是可见的，因此您可以从一个活动将您的对象保存在此类中，然后从另一个活动访问它。

**2.**您可以将您的类分解为简单的变量：字符串和 3 个整数，并通过捆绑或意图将它们从一个活动传递到另一个活动，然后再次构造您的对象。

```
Intent intent = new Intent (this, TargetActivity.class);
intent.putExtra(KEY, value);
intent.putExtra(KEY, "value");
startActivity(intent); 
```

**3.**如果您的对象实现了 Serializable/Parcelable，那么您可以通过捆绑传递它。

关于如何序列化对象的示例：

[如何序列化对象并将其保存到 Android 中的文件中？](https://stackoverflow.com/questions/4118751/how-do-i-serialize-an-object-and-save-it-to-a-file-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:15:43.207

一种选择可能是实现 Serializable 接口，然后您可以使用 Intent#putExtra() 方法的 putExtra(Serializable..) 变体在 Intent 中传递对象实例。

```
 //to pass :
   intent.putExtra("MyClass", obj);  

// to retrieve object in second Activity
getIntent().getSerializableExtra("MyClass"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:26:22.983

这可能很棘手，因为不能保证您的应用程序不会在活动之间被杀死。实际上，它可以在活动*期间*被杀死，因此保留持久对象可能会很棘手。

我首选的方法是“单例模式”，您可以在其中创建一个类，该类的目的是创建一个包含您想要保留的任何数据的单个实例。如果您的应用程序被终止，单例实例将丢失并且必须重新创建，但所有 Android 应用程序始终都存在这种风险。

有关我在 Android 中实现单例的信息，请参阅[在 Android 中保存同一 Activity 的多个实例状态。](https://stackoverflow.com/questions/14774987/save-multiple-instances-states-of-the-same-activity-in-android/14779357#14779357)

哦，我应该补充一点，这只适用于所有活动都在同一个进程中，共享相同地址空间的应用程序。否则，您必须使您的对象可序列化并将其写入文件。

# java - 为什么不在文本中显示两张图片？

> ID：15834853
> 
> 赞同：0
> 
> 时间：2013-04-05T13:10:50.897
> 
> 标签：java, android, eclipse, text, image

当我在 text1 中输入 S 时，相应的图片会出现在 text2 中，但是当我在 text1 中输入 G 时，相应的图片会显示在 text2 中，但是 S 的前一张图片显示为字母而不是图片。这是为什么？为什么不能显示两张图片？怎么了？

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final EditText te1 = (EditText)findViewById(R.id.t1); 
        final EditText te2 = (EditText)findViewById(R.id.t2); 

        final Button v = (Button)findViewById(R.id.b1);     
     v.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub      
                //imva.setImageResource(R.id.b1);

                te2.setText(" ");

                String t= te1.getText().toString();

                char [] aa = t.toString().toCharArray(); 
                  for (int i = 0 ; i < aa.length ; i++)
                  {
                      if (aa[i] == 's')
                      {
                     SpannableStringBuilder builder = new SpannableStringBuilder(te1.getText());

                     do {
                ImageSpan imageSpan = new ImageSpan(getBaseContext(),R.drawable.a1);  
                int pos = builder.toString().indexOf("s");
                builder.replace(pos, pos + 1, "$");
                 builder.setSpan(imageSpan, pos, pos + 1,Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
              } while (builder.toString().indexOf("s") > -1);
                    te2.setText(builder);

                      }  
                    if (aa[i] == 'g')
                    {           
                 SpannableStringBuilder builder = new SpannableStringBuilder(te1.getText());
                     do {
                    ImageSpan imageSpan = new ImageSpan(getBaseContext(),R.drawable.a2);  
                    int pos = builder.toString().indexOf("g");
                    builder.replace(pos, pos+ 1, "$");
                 builder.setSpan(imageSpan, pos, pos + 1,Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
              } while (builder.toString().indexOf("g") > -1);
                te2.setText(builder);

                      }  
                  } 
```

# javascript - Javascript - 检索操作系统日期格式

> ID：15834855
> 
> 赞同：6
> 
> 时间：2013-04-05T13:10:51.880
> 
> 标签：javascript, date, operating-system, date-format

嗯...好吧，所以我已经在网上搜索了 2 天，但没有任何运气。我已经看到了很多关于如何格式化 javascript 日期的答案，例如 new Date().toString("yyyy-MM-dd")... 这将返回类似 2013-04-05 的内容。

这绝对不是问题。

我想要的是设置我的操作系统显示日期的格式，然后检索该特定格式并将其显示在浏览器中的可能性。

例如，假设我将操作系统中的日期格式更改为 MM-yyyy/dd （这是为了争论，是否可行无关紧要））。那么我希望在我的操作系统中看到 04-2013/05，对吧？接下来，我想通过 Javascript 在我的浏览器中检索这种特定格式，以便我可以使用它来格式化整个网页中的日期。

如果这是精神错乱并且无法做到，请告诉我，因为我在搜索中感到头疼。另外，如果您说使用*someDateObject* .toLocaleDateString() 而没有确切解释为什么 .toLocaleDateString 会起作用，我将忽略它，因为我尝试将我的操作系统中的日期格式设置为多种格式，并且每次我使用.toLocaleDateString()，我收到相同的格式：dd/MM/yyyy

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:41:31.613

使用的 .toLocaleDateString 方法语言环境的第一个属性。

您可以通过 navigator.language（在 firefox 或 chrome 中）参数获取当前语言环境。在 IE 中可以获取 navigator.browserLanguage 或 navigator.systemLanguage

在 IE 以外的浏览器中，无法通过这种方式获取系统语言

在此之后，您可以调用*new Date.toLocaleString(navigator.language||navigator.browserLanguage)*它将根据浏览器语言正确格式化

# android - 如何在电子邮件中制作 Html 超链接

> ID：15834857
> 
> 赞同：0
> 
> 时间：2013-04-05T13:10:57.563
> 
> 标签：android, html

我在下面的代码中制作超链接，当我在电子邮件中发送它时无法点击，谢谢帮助

```
 String url = "http://www.google.com";

      String hyperLink = "<a  ref=\"" + url + "\">"+"click"+"</a>";

StringBuilder sb = new StringBuilder();
sb.append(EmailPreText+" "+Name);
sb.append('\n');
sb.append(Html.fromHtml(hyperLink)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:15:13.390

你试过这样吗？

```
String url = "http://www.google.com";
String hyperLink = "<a  href=\"" + url + "\">"+"click"+"</a>"; 
```

nb HREF & // 在协议之后。

# paypal - PayPal Payflow 链接中信用卡表格的 CSC 字段中接受的 1 位数字

> ID：15834859
> 
> 赞同：0
> 
> 时间：2013-04-05T13:11:09.603
> 
> 标签：paypal, payflowlink

在 PayPal Payflow 链接中，当我在 CSC 字段中输入 1 位数字时，它接受并在测试交易期间成功完成交易。它没有出现任何错误消息。根据用户指南，CSC 应该是 3 或 4 位数字。是有任何方法可以在 PayPal Payflow 链接表单中添加或更改验证。

我已经尝试过了，但我找不到解决方案

请帮我...

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T20:58:54.870

无法通过您的 Payflow 帐户设置添加任何类型的验证检查。您唯一能做的就是将其设置为必需/可编辑，并检查它是否获得 X、N 或 Y 作为响应，并据此采取行动。

# c# - 从数组中读取数据并写入附加到现有文件：我的代码未按预期附加数据

> ID：15834864
> 
> 赞同：0
> 
> 时间：2013-04-05T13:11:19.703
> 
> 标签：c#, filestream

我的应用程序从数组中读取数据，然后写入现有文件。它应该写到行尾，但是当我运行应用程序时它不会附加任何东西。

经过研究，我遇到了[这个类似的帖子](https://stackoverflow.com/questions/10946421/append-data-to-existing-file-in-c-sharp)。我按照该帖子的回答修改了我的代码，现在我收到一个错误：

> 'FileStream' 是一个`namespace`，但使用起来像一个`type`.

我添加了`System.IO`命名空间，但问题仍然存在。

这是我的代码：

```
private void button1_Click(object sender, EventArgs e)
    {
        string file_path = @"C:\Users\myfolder\Desktop\FileStream\Processed\Output.txt";
        string data = " ";

        try
        {
            using (FileStream aFile = new FileStream(file_path, FileMode.Append, FileAccess.Write))
            using (StreamWriter author = new StreamWriter(aFile, true))
            {
                string[] output_receiptNos = ReadFile().ToArray();
                for (int index = 0; index < output_receiptNos.Length; index++)
                {
                    data = output_receiptNos[index];
                    author.WriteLine(data);
                }
                MessageBox.Show("Data Sucessfully Processed");

            }

        }
        catch (Exception err)
        {
            MessageBox.Show("Could not process Data");
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:35:52.867

您的[预定义构造函数](http://msdn.microsoft.com/en-us/library/36b035cb.aspx)`FileStream`接受一个字符串（用于文件名）和一个布尔值（用于附加（覆盖数据））的工作，您没有添加任何内容。并且所写的是不可编译的，因为它没有采用 Stream 和布尔值的构造函数。 `StreamWriter``StreamWriter`

正如评论中已经提到的那样，您的代码中可能与一些奇怪地命名为“FileStream”的命名空间发生冲突。（顺便说一句，这是个坏主意）。
但是，我认为您可以直接使用 StreamWriter 类来消除错误。
然后花点时间找出为什么编译器认为你有一个名为“FileStream”的命名空间

```
 using (StreamWriter author = new StreamWriter(file_path, true))
        {
            string[] output_receiptNos = ReadFile().ToArray();
            for (int index = 0; index < output_receiptNos.Length; index++)
            {
                data = output_receiptNos[index];
                author.WriteLine(data);
            }
            MessageBox.Show("Data Sucessfully Processed");
        } 
```

# sql - 复杂的组 SQL 查询

> ID：15834870
> 
> 赞同：2
> 
> 时间：2013-04-05T13:11:40.733
> 
> 标签：sql, group-by, pivot

这是我的查询和结果；

```
select 
DATEADD(dd, DATEDIFF(dd, 0, PostDate), 0) as Date, 
Stores.Name StoreName, 
SUM(PosCash + PosCredit + PosBillCash + PosBillCredit) as Revenue  
from StoreRevenue
inner join Stores on Stores.ID = StoreRevenue.StoreID
group by DATEADD(dd, DATEDIFF(dd, 0, PostDate), 0), Stores.Name 
```

结果： http: [//prntscr.com/zaele](http://prntscr.com/zaele)

我想创建一个必须按日期和商店名称分组的表（结果）。

```
Date, Avcılar Mağaza, Ataşehir Mağaza
2013-03-04, 150, 200
2013-03-05, 200, 250
2013-03-06, 300, 150 
```

子组的行（这些：2013-03-04、150、200）是每个商店的日期和收入我想要得到那种结果我也在 sql 中尝试过“pivot”但它对我不起作用

对不起我的英语不好。-谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:15:09.557

试试这个：

```
WITH CTE
AS
(
    select 
      DATEADD(dd, DATEDIFF(dd, 0, PostDate), 0) as Date, 
      Stores.Name StoreName, 
      PosCash + PosCredit + PosBillCash + PosBillCredit as Revenue  
    from StoreRevenue
    inner join Stores on Stores.ID = StoreRevenue.StoreID
)
SELECT *
FROM CTE AS c
PIVOT
(
   SUM(Revenue)
   FOR StoreName IN ([Avcılar Mağaza],  [Ataşehir Mağaza], ...)
) AS p 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T13:16:24.960

您可以使用该`PIVOT`函数将数据从行转换为列：

```
select *
from
(
  select 
    DATEADD(dd, DATEDIFF(dd, 0, PostDate), 0) as Date, 
    Stores.Name StoreName, 
    (PosCash + PosCredit + PosBillCash + PosBillCredit) as Revenue  
  from StoreRevenue
  inner join Stores 
    on Stores.ID = StoreRevenue.StoreID
) d
pivot
(
  sum(Revenue)
  for StoreName in ([Avcılar Mağaza], [Ataşehir Mağaza]..)
) piv; 
```

或者你可以使用一个聚合函数`CASE`：

```
select DATEADD(dd, DATEDIFF(dd, 0, PostDate), 0) as Date,
  sum(case when Stores.Name = 'Avcılar Mağaza' 
      then PosCash + PosCredit + PosBillCash + PosBillCredit end) as [Avcılar Mağaza],
  sum(case when Stores.Name = 'Ataşehir Mağaza' 
      then PosCash + PosCredit + PosBillCash + PosBillCredit end) as [Ataşehir Mağaza]
from StoreRevenue
inner join Stores 
  on Stores.ID = StoreRevenue.StoreID
group by DATEADD(dd, DATEDIFF(dd, 0, PostDate), 0) 
```

如果您的商店数量未知，则可以使用动态 sql：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(name) 
                    from Stores
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT Date, ' + @cols + ' 
            from 
            (
                select 
                  DATEADD(dd, DATEDIFF(dd, 0, PostDate), 0) as Date, 
                  Stores.Name StoreName, 
                  (PosCash + PosCredit + PosBillCash + PosBillCredit) as Revenue  
                from StoreRevenue
                inner join Stores 
                  on Stores.ID = StoreRevenue.StoreID
            ) x
            pivot 
            (
                sum(Revenue)
                for StoreName in (' + @cols + ')
            ) p '

execute(@query) 
```

# c# - 如何更改表单内的焦点并使新控件处理按下的键？

> ID：15834871
> 
> 赞同：0
> 
> 时间：2013-04-05T13:11:46.877
> 
> 标签：c#, focus, keydown

我有一个带有搜索框的表单和一个带有结果的 datagridview。我需要的是搜索框，以便在我按下字符或数字键时始终获得焦点，然后处理该键。因此，例如，如果我的焦点在数据网格上，并且我按下一个字符，它将转到搜索框。（此外，每当在表单中按下向上或向下箭头时，焦点将转到数据网格，但我对此没有任何问题。）

现在，下面的代码将作为字符的魅力。但是，当我得到数字时，我不能这样做（因为我`e.KeyCode.ToString()`不会给我数字，而是“d0”或“numpad0”）。

```
 private void Form_KeyDown(object sender, KeyEventArgs e)
    {
        if (!this.tbxSearch.Focused)
        {
            if ((e.KeyCode >= Keys.A) && (e.KeyCode <= Keys.Z))
            {
                this.tbxSearch.Focus();
                this.tbxSearch.Text = (e.Shift) ? e.KeyCode.ToString() : e.KeyCode.ToString().ToLower();
                this.tbxSearch.SelectionStart = this.tbxSearch.Text.Length;
            }
        }
    } 
```

当然，我可能会以几乎相同的方式进行操作，只需获取“ `e.KeyCode.ToString()`”中的最后一个字符，但这对我来说似乎不太合适。我的意思是，必须有一种更简单的方法来改变焦点，然后让控件处理按下的键。

我已经尝试在`PreviewKeyDown`事件中创建它，但它不会被表单触发（即使`KeyPreview`属性设置为`true`）：

```
 private void Form_PreviewKeyDown(object sender, PreviewKeyDownEventArgs e)
    {
        if ((e.KeyCode == Keys.Down) || (e.KeyCode == Keys.Up))
            this.dgvResults.Focus();
        else
            this.tbxSearch.Focus();
    } 
```

所以我想知道：我怎样才能改变表单的焦点，让新的控件处理关键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T14:30:56.740

您可以检查密钥是否是这样的数字：

```
private Keys[] numericKeys =
        {
             Keys.D1,
             Keys.D2,
             Keys.D3,
             Keys.D4,
             Keys.D5,
             Keys.D6,
             Keys.D7,
             Keys.D8,
             Keys.D9,
             Keys.D0,
             Keys.NumPad0,
             Keys.NumPad1,
             Keys.NumPad2,
             Keys.NumPad3,
             Keys.NumPad4,
             Keys.NumPad5,
             Keys.NumPad6,
             Keys.NumPad7,
             Keys.NumPad8,
             Keys.NumPad9
};

...

bool isDigit = numericKeys.Contains(e.KeyCode); 
```

或像这样：

```
bool isDigit = Char.IsDigit((char)e.KeyCode); 
```

或者：

```
bool isLetterOrDigit = char.IsDigit((char)e.KeyCode); 
```

# java - 无科学记数法的 BigDecimal 格式完全精确

> ID：15834879
> 
> 赞同：39
> 
> 时间：2013-04-05T13:12:12.203
> 
> 标签：java, string-formatting, bigdecimal

我想将 a 转换`BigDecimal`为`String`用于打印目的，但打印出所有没有科学记数法的数字。例如：

```
BigDecimal d = BigDecimal.valueOf(12334535345456700.12345634534534578901);
String out = d.toString(); // Or perform any formatting that needs to be done
System.out.println(out); 
```

我想`12334535345456700.12345634534534578901`打印出来。现在我得到：`1.23345353454567E+16`。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-04-05T13:16:18.083

要保持 a 的精度，`BigDecimal`您需要将值作为 a 传递`String`

```
BigDecimal d = new BigDecimal("12334535345456700.12345634534534578901");
System.out.println(d.toPlainString()); 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-05T13:16:28.007

该类`BigDecimal`有一个`toPlainString`方法。调用此方法而不是标准`toString`，它将打印出没有科学计数法的完整数字。

**例子**

```
BigDecimal b = new BigDecimal("4930592405923095023950238502395.3259023950235902");
System.out.println(b.toPlainString());

Output: 4930592405923095023950238502395.3259023950235902 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T13:15:31.220

你想使用一个`DecimalFormat`：

```
DecimalFormat df = new DecimalFormat("#.#");  
String output = df .format(myBD);
System.out.println(value + " " + output); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-05T13:16:44.157

你可以用这个

```
BigDecimal d = BigDecimal.valueOf(12334535345456700.12345634534534578901);
String out= d.toPlainString();
System.out.println(out); 
```

# android - Osmdroid 地图旋转

> ID：15834881
> 
> 赞同：6
> 
> 时间：2013-04-05T13:12:13.910
> 
> 标签：android, map, rotation, tiles, osmdroid

我正在做 osmdroid 地图项目。我正在为地图使用自定义图块。谁能告诉我如何旋转自定义瓷砖地图？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T02:01:08.883

最新版本的 osmdroid 包括旋转地图的能力。

```
mMapView.setMapOrientation(45.0f); 
```

最新的示例应用程序还包括一个旋转手势覆盖，用于使用两指旋转手势旋转地图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-12-31T09:06:21.233

```
RotationGestureOverlay mRotationGestureOverlay = new RotationGestureOverlay(context, map);
mRotationGestureOverlay.setEnabled(true);
map.setMultiTouchControls(true);
map.getOverlays().add(mRotationGestureOverlay); 
```

# html - 如何在非触摸环境下运行触摸屏应用程序？

> ID：15834884
> 
> 赞同：0
> 
> 时间：2013-04-05T13:12:22.337
> 
> 标签：html, mobile, touch

我需要在我的桌面上运行基于触摸的浏览器应用程序并修改一些用触摸事件编写的代码。有人能告诉我在非触摸环境中运行触摸屏应用程序的最佳方法是什么吗？并检查它的事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:15:19.143

如果您的应用在浏览器中运行，您可以通过在 Chrome 的开发者工具中打开触摸模拟来模拟非触摸系统上的触摸事件。

在 Chrome 26+ 中，可以通过单击右下角的“齿轮”图标，然后选择“覆盖”面板来找到它。请参阅[https://developers.google.com/chrome-developer-tools/docs/mobile-emulation#emulate-touch-events](https://developers.google.com/chrome-developer-tools/docs/mobile-emulation#emulate-touch-events)

注意：这仅在 DevTools 打开时有效。所以它应该可以用于测试，但不能用于最终用户运行。

# hadoop - 地图减少所有者没有

> ID：15834886
> 
> 赞同：0
> 
> 时间：2013-04-05T13:12:24.820
> 
> 标签：hadoop, mapreduce

引起：java.io.IOException：路径 c:\hadoop\hdfs\m apred\local\maplogs\taskTracker\Administrator\jobcache\job_201304051800_0003\attempt_201304051800_0003_m_000000_0\output\file.out.index 的所有者“管理员”不匹配预期所有者'

我正在 Windows 7 64 位上的 hdinsight 上尝试这个。

此错误发生在我更改 mapred-site.xml 中的 mapred.local.dir 之后。

如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:40:20.060

首先尝试一个简单的方法：以管理员身份从 CLI 运行作业或更改 tmp dir 的权限以供所有人使用

# ajax - 加载json数据时出错

> ID：15834887
> 
> 赞同：0
> 
> 时间：2013-04-05T13:12:26.767
> 
> 标签：ajax, json

我正在尝试将`.json`数据加载到我的网络应用程序中，但它永远无法成功。

它总是返回错误函数。

这是我的`.js`文件：

```
 $(document).ready(function () {
 var output = $('#stage');

 $.ajax({
     url: 'http://www.haverhill-ps.org/ios/app/data/calendar-json.json',
     dataType: 'json',
     timeout: 5000,
     success: function (data) {
         $.each(data, function (i, item) {
             var eventInfo = '<h1>' + item.month + '</h1>' + '<p>' + item.date + '<br>' + item.time + '</p>';

             output.append(eventInfo);
         });
     },
     error: function () {
         output.text('There was an error loading the data.');
     }
 });
}); 
```

这是`json`数据：

```
{
    "month": "June", //November
    "date": "10", //10
    "time": "5PM", //5PM
}, {
    "month": "July", //November
    "date": "4", //10
    "time": "1PM", //5PM
} 
```

然后，在我的 html 中，我有一个 div 设置：

```
<div id="stage">Run here...</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:21:32.807

返回的数据不是有效的 json。

您丢失了结果，`[`并且`]` 注释在 json 中无效。每个对象的`,`最后一个元素末尾的 也是无效的。[您可以在例如http://jsonlint.com/](http://jsonlint.com/)验证您的 json

一个有效的 json 看起来是这样的：

```
[{
    "month": "June",
    "date": "10",
    "time": "5PM"
}, {
    "month": "July",
    "date": "4",
    "time": "1PM"
}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:20:37.270

可能你想看看是什么错误，这样做

```
error: function (xhr, ajaxOptions, thrownError) {
        alert(xhr.status);
        alert(thrownError);
      } 
```

# plugins - 在 RTC 服务器 3.0.13 中部署扩展插件版本 4.0

> ID：15834891
> 
> 赞同：1
> 
> 时间：2013-04-05T13:12:43.447
> 
> 标签：plugins, version, rtc

我使用 rtc 服务器 4.0 版开发了一个 rtc 扩展插件。

是否可以在 RTC 服务器版本 3.0.13 中部署此插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:33:06.220

这主要取决于您在插件最低版本方面的插件扩展定义：（
如[this thread](https://jazz.net/forum/questions/103158/rtc-extensions-problem)所示）

![最低版本](https://i.stack.imgur.com/AQbw1.png)

最好在 RTC3 中构建该扩展插件，然后尝试将其部署在 RTC4 服务器上。

# xml - 在 Flex 中将分层数据转换为 XML

> ID：15834893
> 
> 赞同：2
> 
> 时间：2013-04-05T13:12:53.577
> 
> 标签：xml, apache-flex

如何在 Flex 中将平面/分层数据转换为 XML 格式。以下是我的分层数据：（表格格式）

```
Asia  India  Chennai  TN  Category1 Product1 100
Asia  India  Mumbai   MH  Category1 Product1 100
Asia  India  Calcutta CT  Category1 Product1 100
Asia  India  Calcutta CT  Category2 Product2 200
EMEA  UK     London   LN  Category3 Product1 123    
EMEA  UK     London   LN  Category3 Product2 455    
EMEA  UK     Reading  RN  Category1 Product1 500    
EMEA  UK     Reading  RN  Category1 Product2 430

        I need to format/convert this to XML format so that I can populate that resulting xml as dataprovider to a Tree control.
       Asia
         India
             Chennai
                TN
                  Category1
                     Product1
                          100
             Mumbai
                MH
                  Category1
                     Product1
                          100   
                                such a tree structure. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-06T13:37:58.183

我会制作一个简单的转换器来获得真正的 XML 结构。解决方案的复杂性取决于您拥有的源文本。

这是我的实现。

假设您的分层数据结构良好，并且每个元素之前都有一定数量的空格。就我而言，我使用 4 个空格作为一级转换。

我从一个文本文件加载数据，如下所示：

```
 Asia
        India
            Chennai
                TN
                    Category1
                        Product1
                            100
            Mumbai
                MH
                    Category2
                        Product2
                            200
                    Category3
                        Product3
                            300                  
                        Product4
                            400 
```

然后我遍历每个字符串并分析其级别。生成的树如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/RODNM.png)

// 应用

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           minWidth="955" minHeight="600" creationComplete="init(event)">
<fx:Script>
    <![CDATA[
        import mx.events.FlexEvent;

        private const SPACEDELIMITER:int = 4;
        private var loader:URLLoader;
        private var ar:Array = new Array();
        [Bindable]private var data:XML = <Root/>;
        private var inputStr:String;

        protected function init(event:FlexEvent):void
        {
            loader = new URLLoader(new URLRequest("com/treexml/tree.txt"));
            loader.dataFormat = URLLoaderDataFormat.TEXT;
            loader.addEventListener(Event.COMPLETE, completeHandler);
        }

        private function completeHandler(event:Event):void
        {
            inputStr = URLLoader(event.target).data;
            parseString();
        }

        private function parseString():void
        {
            var levels:Array = new Array();
            ar = inputStr.split("\r\n");
            var reg:RegExp = /[a-z0-9]/gi;

            var globalShift:int = String(ar[0]).search(reg);

            for (var i:int = 0; i < ar.length; i++)
            {
                var item:String = ar[i];
                var shift:int = item.search(reg); //amount of witespaces before the text
                var level:int = (shift - globalShift)/SPACEDELIMITER; //level of the node
                var label:String = item.substring(shift, item.length);

                levels[level] = i; //id of the last element for the given level 

                var node:XML = new XML();
                node = <child id = {i} label = {label}/>;

                if (level == 0)
                    data.appendChild(node);
                else
                    data..child.(@id == levels[level - 1]).appendChild(node);
            }
        }

    ]]>
</fx:Script>

<mx:Tree width="250" 
         height="400" 
         dataProvider="{data.child}"
         labelField="@label"/>

</s:Application> 
```

**//编辑**

如果您的数据未通过空格对齐，请尝试使用其他版本的 parseString 函数。

假设您的数据如下所示：

```
Asia India Chennai TN Category1 Product1 100
Asia India Mumbai MH Category1 Product1 100
Asia India Calcutta CT Category1 Product1 100
Asia India Calcutta CT Category2 Product2 200
EMEA UK London LN Category3 Product1 123
EMEA UK London LN Category3 Product2 455
EMEA UK Reading RN Category1 Product1 500
EMEA UK Reading RN Category1 Product2 430 
```

功能是：

```
 private function parseString():void
{
    ar = inputStr.split("\r\n");
    var map:Dictionary = new Dictionary();
    var delimiter:String = "***";
    var id:int = 0;
    for (var i:int = 0; i < ar.length; i++)
    {
        if(ar[i].length){//if it's not an empty string
            var itemArray:Array = ar[i].replace(/\s{2,}/g, ' ').split(" ");//collapse multiple spaces as one using RegEx
            var key:String = "";
            var prevkey:String = "";

            for (var j:int = 0; j< itemArray.length; j++)
            {
                prevkey = key;
                key += itemArray[j] + delimiter;

                if (map[key] == null)
                {
                    map[key] = id;

                    var node:XML = <child id = {id} label = {itemArray[j]}/>;

                    if (j == 0)
                        data.appendChild(node);
                    else
                        data..child.(@id == map[prevkey]).appendChild(node);

                    id++;
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-13T14:25:39.003

[这是使用递归函数形成此答案](https://stackoverflow.com/questions/15877645/how-to-convert-xmllist-to-xml-in-flex/15885494#15885494)的一种不太有效的方法：

```
var data:String = '';//this is just to keep the data in the editor, you would dinamically load this usually
data += 'Asia  India  Chennai  TN  Category1 Product1 100\n';
data += 'Asia  India  Mumbai   MH  Category1 Product1 100\n';
data += 'Asia  India  Calcutta CT  Category1 Product1 100\n';
data += 'Asia  India  Calcutta CT  Category2 Product2 200\n';
data += 'EMEA  UK     London   LN  Category3 Product1 123\n';    
data += 'EMEA  UK     London   LN  Category3 Product2 455\n';    
data += 'EMEA  UK     Reading  RN  Category1 Product1 500\n';    
data += 'EMEA  UK     Reading  RN  Category1 Product2 430\n';

trace(cleanNodes(parseTableString(data).*));

function parseTableString(str:String):XML{
    var lines:Array = str.split('\n');
    var xml:XML = <root />;
    for(var i:int = 0; i < lines.length; i++){
        //collapse multiple spaces to 1 using RegEx, then split
        var nodes:Array = lines[i].replace(/\s{2,}/g, ' ').split(' ');
        for(var j:int = 0 ; j < nodes.length; j++){
            if(nodes[j].length){
                var node:String = '<item name="'+nodes[j]+'"/>';
                if(j > 0){//if the node has parents
                    var pre:String = '';//create enclosing tags
                    var post:String = '';
                    for(var k:int = 0 ; k < j; k++){//build up parent hierarchy
                        pre += '<item name="'+nodes[k]+'">';
                        post += '</item>';
                    }
                    node = pre+node+post;//concatenate as a full node
                    xml.appendChild(new XML(node));//add full node (will add duplicates)
                }
            }
        }
    }
    return xml;
}

function cleanNodes(nodes:XMLList):XML{
    var parent:XML = nodes.parent();
    var result:XML = new XML("<"+parent.localName()+" />");//copy parent node name
    for each(var a:XML in parent.attributes()) result['@'+a.name()] = parent.attribute(a.name());//and attributes
    //merge duplicates at one level
    var found:Dictionary = new Dictionary(true);
    for each(var child:XML in nodes){
        var name:String = child.@name;
        if(!found[name]) {
            found[name] = child;
            result.appendChild(child);
        }else{//merge
            found[name].appendChild(child.*);
        }
    }
    //recurse
    for each(var kid:XML in result.*){//for each child node
        if(kid.*.length() > 0){//if it has children
            var clean:XML = cleanNodes(kid.*);//get a clean copy of each child node
            delete result.*[kid.childIndex()];//remove the original
            result.appendChild(clean);        //add the cleaned one (replace)
        }
    }
    return result;  
} 
```

哪个输出：

```
<root>
  <item name="Asia">
    <item name="India">
      <item name="Chennai">
        <item name="TN">
          <item name="Category1">
            <item name="Product1">
              <item name="100"/>
            </item>
          </item>
        </item>
      </item>
      <item name="Mumbai">
        <item name="MH">
          <item name="Category1">
            <item name="Product1">
              <item name="100"/>
            </item>
          </item>
        </item>
      </item>
      <item name="Calcutta">
        <item name="CT">
          <item name="Category1">
            <item name="Product1">
              <item name="100"/>
            </item>
          </item>
          <item name="Category2">
            <item name="Product2">
              <item name="200"/>
            </item>
          </item>
        </item>
      </item>
    </item>
  </item>
  <item name="EMEA">
    <item name="UK">
      <item name="London">
        <item name="LN">
          <item name="Category3">
            <item name="Product1">
              <item name="123"/>
            </item>
            <item name="Product2">
              <item name="455"/>
            </item>
          </item>
        </item>
      </item>
      <item name="Reading">
        <item name="RN">
          <item name="Category1">
            <item name="Product1">
              <item name="500"/>
            </item>
            <item name="Product2">
              <item name="430"/>
            </item>
          </item>
        </item>
      </item>
    </item>
  </item>
</root> 
```

就我个人而言，我认为@Anton 的回答更好，因为它只在需要时添加节点（而不是我的创建重复，然后删除它们）。我还添加了一个正则表达式，将多个空格合并为一个到他的答案中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T13:21:16.110

如果转换为 XML 的唯一原因是用作 Tree 数据提供者，那么您不需要这样做。一种更有效的方法是使用树数据描述符。这使您可以使数据提供者保持平坦，而描述符可以让您描述其结构，以便树知道哪些对象是彼此的子对象。[http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7b69.html](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7b69.html)

# r - ggplot2：有没有办法将单个图覆盖到 ggplot 中的所有方面

> ID：15834897
> 
> 赞同：17
> 
> 时间：2013-04-05T13:13:01.860
> 
> 标签：r, ggplot2

我想使用 ggplot 和 faceting 来构建一系列按因子分组的密度图。此外，我想在每个不受刻面施加的约束的刻面上添加另一个密度图。

例如，多面图将如下所示：

```
require(ggplot2)
ggplot(diamonds, aes(price)) + facet_grid(.~clarity) + geom_density() 
```

然后我想在每个方面的顶部分层以下单密度图：

```
ggplot(diamonds, aes(price)) + geom_density() 
```

此外，带有分面的 ggplot 是做到这一点的最佳方法，还是有首选方法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-05T13:22:34.357

实现此目的的一种方法是创建`diamonds2`仅包含 column`price`和两个`geom_density()`调用的新数据框 - 一个将使用 original `diamonds`，第二个将使用`diamonds2`. 因为`diamonds2`没有列`clarity`，所有值都将用于所有方面。

```
diamonds2<-diamonds["price"]
ggplot(diamonds, aes(price)) + geom_density()+facet_grid(.~clarity) + 
     geom_density(data=diamonds2,aes(price),colour="blue") 
```

![在此处输入图像描述](https://i.stack.imgur.com/Yt8qA.png)

**更新**- 正如@BrianDiggs 所建议的那样，无需制作新数据框而是将其转换为`geom_density()`.

```
ggplot(diamonds, aes(price)) + geom_density()+facet_grid(.~clarity) +
     geom_density(data=transform(diamonds, clarity=NULL),aes(price),colour="blue") 
```

另一种方法是在不分面的情况下绘制数据。添加两个调用`geom_density()`- 在一个添加`aes(color=clarity)`中为每个级别添加不同颜色的密度线`clarity`并留空第二个`geom_density()`- 这将添加整体黑色密度线。

```
ggplot(diamonds,aes(price))+geom_density(aes(color=clarity))+geom_density() 
```

![在此处输入图像描述](https://i.stack.imgur.com/bjYSj.png)

# mysql - 从远程转储文件恢复 mysql 数据库

> ID：15834898
> 
> 赞同：1
> 
> 时间：2013-04-05T13:13:03.897
> 
> 标签：mysql, linux, mysqldump, redhat

是否可以从远程服务器恢复转储文件？

```
mysql -u root -p < dump.sql 
```

dump.sql 可以位于远程服务器中吗？如果是这样，我如何在上面的命令中引用它。复制到服务器不是一种选择，因为服务器中没有足够的空间。我在红帽5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:47:27.783

1.  实现从远程服务器到本地的SSH远程访问
2.  在远程服务器上运行 cat dump.sql | ssh -c 'mysql -u root -pPASSWORD'

或者

1.  从远程服务器实现 MYSQL 访问
2.  为 root@(REMOTESERVER) 设置所有权限
3.  在远程服务器上运行 mysql -h mysql.yourcompany.com -u root -p < dump.sql

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:01:26.020

也许试试这个？选择一个可用的服务器端口（称为 12345）

1.  在你的 mysql 盒子上做`nc -l 12345 | mysql -u root -p`
2.  在带有转储文件的盒子上`nc mysqlbox 12345 < local_dump_file.sql`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-05T13:14:34.017

查看 mysql 连接的 -h 选项

[MySQL 连接文档](http://dev.mysql.com/doc/refman/5.0/en/connecting.html)

编辑：哦，我看错了，您不是要加载到远程服务器上，而是希望文件来自远程服务器。如果您可以登录到文件所在的远程服务器，那么您可以：

```
 remotebox:user>>mysql -h <your db box> < local_dump_file.sql 
```

# java - 其他字符串中日期的正则表达式

> ID：15834904
> 
> 赞同：0
> 
> 时间：2013-04-05T13:13:14.950
> 
> 标签：java, regex

这是我的示例字符串：

```
xzyxxy%MM%xyzxy%DD%xyyzy 
```

我想把它变成一个正则表达式。MM 必须在 1-12 范围内，DD 在 1-31 范围内。以下是与正则表达式匹配的可能字符串：

```
xzyxxy5xyzxy28xyyzy
xzyxxy11xyzxy2xyyzy
xzyxxy12xyzxy31xyyzy 
```

我对正则表达式非常陌生，我的第一个想法是为 MM 和 DD 获取一个正则表达式，然后将其附加到另一个字符串中。这可能是我的java方法：

```
String getRegex()   { 
    String MMRegex = "";
    String DDRegex = "";

    String regex;
    regex = expression.replaceAll("%DD%", DDRegex);
    regex = regex.replaceAll("%MM%", MMRegex);

    return regex; 
} 
```

问题是当我找到 DD 和 MM 的正则表达式并将其附加到其他字符串时它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:26:10.223

我想也许你想要的与正则表达式没有任何关系。如果你想在一个字符串中过去一天和一个月，你可以使用：

```
String answer = String.format("xzyxxy%dxyzxy%dxyyzy", 5, 28); 
```

再次，如果你想走另一条路，也许使用：

```
String date = "xzyxxy5xyzxy28xyyzy";
String dateparts[] = x.split("[^0-9]+"); 
```

那么 dateparts[1] 将是“5”而 dateparts[2] 将是“28”是你可以使用的东西吗？

# oracle - Oracle 10g 开发人员表单中的错误绑定变量错误

> ID：15834905
> 
> 赞同：-1
> 
> 时间：2013-04-05T13:13:19.067
> 
> 标签：oracle, oracleforms

我创建了一个名为密码的表

```
CREATE TABLE PASSWORD (USER_ID NUMBER(10)  CONSTRAINT  PASSWORD_USER_ID_PK PRIMARY KEY,
PASSWD   VARCHAR2(20) NOT NULL);

INSERT INTO PASSWD (USER_ID,PASSWD) VALUES (1,100);
INSERT INTO PASSWD (USER_ID,PASSWD) VALUES (2,200); 
```

并在 Oracle 表单开发者 10g 中创建了登录表单。我将此代码用于登录按钮。

```
DECLARE
    CURSOR login_cursor IS
      SELECT user_id,
             passwd
      FROM   password;
    user_id_var password.user_id%TYPE;
    passwd_var  password.passwd%TYPE;
    login_flag  BOOLEAN := FALSE;
BEGIN
    OPEN login_cursor;

    <<check_records>>
    LOOP
        FETCH login_cursor INTO user_id_var, passwd_var;

        IF( :login_user_id = user_id_var
            AND :login_passwd = passwd_var ) THEN
          Message('You are in');

          login_flag := TRUE;

          exit check_records;
        END IF;

        EXIT WHEN login_cursor%NOTFOUND;
    END LOOP;

    CLOSE login_cursor;

    IF( NOT login_flag ) THEN
      Message('INVALID LOGIN');
    END IF;

    clear_form;
END; 
```

但错误信息出现

```
bad bind variable 'login_user_id'
bad bind variable 'login_passwd' 
```

解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:25:11.727

表单变量使用`:block_name.item_name`. 您正在使用`:login_user_id`的似乎缺少对块的引用，因此 Forms 无法引用该变量，并且似乎它是一个绑定变量，但事实并非如此。

更正引用变量的语法

# servicestack - ServiceStack 验证功能引发异常

> ID：15834907
> 
> 赞同：1
> 
> 时间：2013-04-05T13:13:29.277
> 
> 标签：servicestack

我正在尝试在 ServiceStack 中实现验证功能，以在调用 db 操作之前验证我的 RequestDTO。当我尝试验证请求 dto like

```
ValidationResult result = this.AddBookingLimitValidator.Validate(request); 
```

代码自动自动抛出验证错误。我什至无法调试服务幕后发生了什么？我可以改变这种行为还是我在这里做错了什么。谢谢。

我的请求 DTO：

```
[Route("/bookinglimit", "POST")]
[Authenticate]
public class AddBookingLimit : IReturn<AddBookingLimitResponse>
{       
  public int ShiftId { get; set; }
  public DateTime Date { get; set; }
  public int Limit { get; set; }
} 
```

我的回应 DTO：

```
public class AddBookingLimitResponse
{
  public int Id { get; set; }
  public ResponseStatus ResponseStatus { get; set; }
} 
```

验证类：

```
public class AddBookingLimitValidator : AbstractValidator<AddBookingLimit>
{
  public AddBookingLimitValidator()
  {
    RuleFor(r => r.Limit).GreaterThan(0).WithMessage("Limit 0 dan büyük olmalıdır");
  }
} 
```

服务实施：

```
public AddBookingLimitResponse Post(AddBookingLimit request)
{
  ValidationResult result = this.AddBookingLimitValidator.Validate(request);          

  Shift shift = new ShiftRepository().Get(request.ShiftId);
  BookingLimit bookingLimit = new BookingLimit
  {
    RestaurantId = base.UserSession.RestaurantId,
    ShiftId = request.ShiftId,
    StartDate = request.Date.AddHours(shift.StartHour.Hour).AddMinutes(shift.StartHour.Minute),
    EndDate = request.Date.AddHours(shift.EndHour.Hour).AddMinutes(shift.EndHour.Minute),
    Limit = request.Limit,
    CreateDate = DateTime.Now,
    CreatedBy = base.UserSession.UserId,
    Status = (byte)Status.Active
  };
  return new AddBookingLimitResponse
  {
    Id = new BookingLimitRepository().Add(bookingLimit)
  };
        } 
```

应用主机代码：

```
container.RegisterValidators(typeof(AddBookingLimitValidator).Assembly);
Plugins.Add(new ValidationFeature()); 
```

我在 C# 代码中使用该服务：

```
 try
 {
   AddBookingLimitResponse response = ClientHelper.JsonClient.Post(new AddBookingLimit
   {
     Date = DateTime.Parse(DailyBookingLimitDateTextBox.Text),
     Limit = Convert.ToInt32(DailyBookingLimitTextBox.Text),
     ShiftId = Convert.ToInt32(DailyDayTypeSelection.SelectedValue)
    });
    WebManager.ShowMessage(UserMessages.SaveSuccessful.FormatString(Fields.BookingLimit));
  }
  catch (WebServiceException ex)
  {
    WebManager.ShowMessage(ex.ResponseStatus.Message);           
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:50:59.553

对，ServiceStack 会在服务被调用之前验证请求 DTO（如果`ValidationFeature`启用）。

要在服务中手动调用验证器，您必须从`AppHost`第一行中删除此行：

```
Plugins.Add(new ValidationFeature()); 
```

请确保您的服务中的验证器属性具有 type `IValidator<>`，否则如果您使用`container.RegisterValidators(typeof(AddBookingLimitValidator).Assembly)`.

```
public class TestService : Service
{
    public IValidator<Request> Validator { get; set; }

    public RequestResponse Post(Request request)
    {
        Validator.Validate(request); 
        ...
    }
} 
```

# drop-down-menu - D3.js条形图轴标签具有选择框

> ID：15834908
> 
> 赞同：0
> 
> 时间：2013-04-05T13:13:31.027
> 
> 标签：drop-down-menu, d3.js, nvd3.js

我们需要添加带有轴标签的下拉菜单，以便用户可以从那里更改数据。我们需要此下拉框效果仅适用于特定标签。

我们尝试过的一种方法是添加带有标签的 svg:image 并且该功能工作正常，但另一个标签具有不需要的向下箭头图像。那么任何人都可以帮助我如何只选择一个标签吗？实际上有多个标签，并且它的索引在图表更新时发生了变化。请在下面找到用于将图像添加到所有标签的代码。

例如

```
g.selectAll('.nv-x.nv-axis').selectAll('.tick.major').append("svg:image").
on("click", click)
.attr("xlink:href", "images/top-bar-logo.png")
.attr("width", 20)
.attr("height", 20).attr("x", -20); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:32:50.300

您可以使用该[`filter()`功能](https://github.com/mbostock/d3/wiki/Selections#wiki-filter)选择需要将图像附加到的刻度。我链接到的文档有一些示例——您可以`filter()`通过将不同的选择器传递给`selectAll()`.

# objective-c - Facebook iOS 应用帖子是用 CoreGraphics 绘制的吗？

> ID：15834909
> 
> 赞同：0
> 
> 时间：2013-04-05T13:13:36.303
> 
> 标签：objective-c, facebook, core-graphics

有谁知道 iOS 版 Facebook 应用程序如何显示帖子项目？

在 iOS 应用程序中显示这些帖子项目的最佳（最有效）方式是什么？

核心显卡？图像视图？

谢谢

![iOS 版 Facebook](https://i.stack.imgur.com/8RBlq.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:17:51.017

他们正在使用自定义`UITableView`

> 最后，当您启动 iOS 版 Facebook 时，您希望看到您的新闻提要，而不是加载微调器。为了尽可能提供最佳体验，我们现在会立即显示以前缓存的内容。但这引入了一个新问题：如果您的新闻提要中有很多故事，UITableView 通过为您的新闻提要中的每个故事调用委托方法 -tableView:heightForRowAtIndexPath: 在工作中抛出一个小扳手，以便计算出如何高以使其滚动条。这将导致应用程序从磁盘加载所有故事数据并仅计算整个故事布局以返回故事的高度，这意味着随着您积累更多故事，启动将逐渐变慢。

您可以在此处阅读有关 ObjectiveC Facebook 版本的更多详细信息：[https](https://www.facebook.com/notes/facebook-engineering/under-the-hood-rebuilding-facebook-for-ios/10151036091753920) ://www.facebook.com/notes/facebook-engineering/under-the-hood-rebuilding-facebook-for-ios/10151036091753920 （这也是上面引用的来源)

# ruby-on-rails - 如何重置我的 sidekiq 计数器？

> ID：15834911
> 
> 赞同：59
> 
> 时间：2013-04-05T13:13:39.173
> 
> 标签：ruby-on-rails, ruby, sidekiq

在我的 sidekiq 仪表板中，我在左侧看到一个带有计数器的框

```
Processed 168
Failed 111
Busy 0
Scheduled 0
Retries 0
Enqueued 0 
```

如何将它们全部重置为 0？

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-12-13T10:02:10.870

要重置统计信息：

`Sidekiq::Stats.new.reset`

参考：[将重置统计信息添加到 Web UI 摘要框和 API 方法](https://github.com/mperham/sidekiq/pull/888)

此外，您现在可以清除特定统计信息：

*   单项统计`Sidekiq::Stats.new.reset('failed')`
*   或多个统计数据`Sidekiq::Stats.new.reset('failed', 'processed')`

（感谢[https://stackoverflow.com/users/2475008/tmr08c](https://stackoverflow.com/users/2475008/tmr08c)更新）

* * *

## 回答 #2

> 赞同：112
> 
> 时间：2013-04-29T18:12:42.270

要重置已处理的作业：

```
Sidekiq.redis {|c| c.del('stat:processed') } 
```

并重置失败的作业：

```
Sidekiq.redis {|c| c.del('stat:failed') } 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-07-02T13:10:08.183

此外，要重置历史记录面板中的特定日期，您可以执行以下操作：

```
Sidekiq.redis {|c| c.del('stat:processed:2015-07-02') }
Sidekiq.redis {|c| c.del('stat:failed:2015-07-02') } 
```

并为您想要清除的每一天重复。

如果你有一个疯狂的工作产生和失败的次数比你平时多很多次，并且你得到一个历史图表，其中有一个巨大的尖峰，这使得你所有的常用历史值实际上都是一条平线，这很有用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-06-26T18:30:36.080

# 1.清除重试集

Sidekiq::RetrySet.new.clear

# 2.清除预定作业

Sidekiq::ScheduledSet.new.clear

# 3\. 清除“已处理”和“失败”作业

Sidekiq::Stats.new.reset

# 3.清除“死亡”工作统计

Sidekiq::DeadSet.new.clear

字体：[https ://gist.github.com/wbotelhos/fb865fba2b4f3518c8e533c7487d5354](https://gist.github.com/wbotelhos/fb865fba2b4f3518c8e533c7487d5354)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-10-25T17:47:41.990

只是为了补充所有好的答案，使用 ruby​​ 交互模式重置计数器，在控制台中执行此操作：

```
irb
irb(main):001:0> require 'sidekiq/api'
=> true
irb(main):002:0> Sidekiq.redis {|c| c.del('stat:processed') }
=> 1
irb(main):003:0> Sidekiq.redis {|c| c.del('stat:failed') }
=> 1 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-01-05T09:17:48.680

如果您想删除整个内容以及特定日期的历史记录面板，以下是有用的片段：

```
from_date = Date.new(2016, 1, 1)
to_date = Date.today

Sidekiq.redis do |redis|
  redis.del("stat:processed")
  redis.del("stat:failed")

  (from_date..to_date).each do |date|
    redis.del("stat:processed:#{date}")
    redis.del("stat:failed:#{date}")
  end
end 
```

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2017-09-27T16:23:29.213

这还将重置历史记录并从 Redis 队列中完全删除所有内容

```
Sidekiq.redis {|c| c.flushdb } 
```

# jquery - heroku 中的 best_in_place 错误

> ID：15834913
> 
> 赞同：0
> 
> 时间：2013-04-05T13:13:45.387
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, best-in-place

我有 best_in_place gem 在我的开发环境中工作，但是当我部署到 Heroku 时，我收到以下错误：

```
ActionView::Template::Error (undefined method `best_in_place' for #<#<Class:0x000000036600a0>:0x000000037a12e8>):
2013-04-05T13:00:55+00:00 app[web.1]:     56:               <% end %>
2013-04-05T13:00:55+00:00 app[web.1]:     57:             </div>
2013-04-05T13:00:55+00:00 app[web.1]:     61:           </div>
2013-04-05T13:00:55+00:00 app[web.1]:     62:           <div class="budget_description budget_field">
2013-04-05T13:00:55+00:00 app[web.1]:   app/controllers/budgets_controller.rb:33:in `show'
2013-04-05T13:00:55+00:00 app[web.1]: 
2013-04-05T13:00:55+00:00 app[web.1]:     58:             <div class="budget_name budget_workspace">
2013-04-05T13:00:55+00:00 app[web.1]:     59:               <h1><%= best_in_place @budget, :name, :inner_class => "test" %></h1> 
```

我的宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'    
gem 'devise'
gem 'pg'
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  gem 'jquery-rails'
  gem 'best_in_place'
end 
```

是否`gem 'best_in_place'`需要在资产组之外？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:18:32.817

是的，您应该将`best_in_place`宝石移出该`assets`组。

资产组仅在资产编译部署期间包含，而不是在运行时包含。

# arrays - sed 用 functionName('hello') 替换 $_REQUEST["hello"]

> ID：15834915
> 
> 赞同：0
> 
> 时间：2013-04-05T13:13:51.543
> 
> 标签：arrays, variables, replace, sed

在我的旧 php 应用程序中，我仍然使用 $_REQUEST 请求参数，现在我有一个函数可以在返回之前进行一些检查。

所以我希望像 $_REQUEST["hello"] 这样的所有变量都用我的函数替换，所以我有像 _request('hello') 这样的东西

我尝试了以下 sed 命令，但它没有找到我的 $_REQUEST 变量。

```
sed 's/$_REQUEST\["(.*)"\]/_request('\1')/g' 
```

我尝试了不同的方法，例如转义 $ 字符或更改正则表达式 (.*)，但它不起作用。这个有什么问题？

我将使用此命令来节省将所有 $_REQUEST 变量更改为函数调用的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:25:40.923

试试这个：

```
$ cat file
sed replace $_REQUEST["hello"] with functionName('hello')

$ sed 's/\$_REQUEST\["\([^"]*\)"\]/_request('\''\1'\'')/g' file
sed replace _request('hello') with functionName('hello') 
```

您需要使用 '\'' 因为 ' 会将您打回 shell，因此您需要在 shell 中提供文字 ' 后跟另一个 ' 才能返回 sed。我还将 .* 更改为 [^"]* 所以它会停在字符串的末尾，而不是最后一个 " 。

# c# - 有人可以用 C# 解释这种语法吗？

> ID：15834918
> 
> 赞同：0
> 
> 时间：2013-04-05T13:14:07.183
> 
> 标签：c#, syntax

在 Java 中创建对象时，我习惯于以下语法：

```
objectX1 = new ObjectX(some arguments); 
```

在查看 C# 中的项目时，我遇到了以下代码：

```
_createSample = new Func<SampleBase>[]
{
    () => new SkeletonMappingSample();
} 
```

我需要向我解释两件事。首先，创建一个没有括号和参数列表的对象，而是使用带有表达式的 {} 是如何工作的？

接下来，{}之间的表达式是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T13:18:19.497

您找到的代码：

```
_createSample = new Func<SampleBase>[]
{
    () => new SkeletonMappingSample();
} 
```

只是创建数组然后用值初始化它的符号。

这实际上与以下内容相同：

```
_createSample = new Func<SampleBase>[1];
_createSample[0] = () => new SkeletonMappingSample(); 
```

除了在`{ }`版本中，边界是由编译器根据您在`{ }`

对于对象：

```
SomeClass abc = new SomeClass()
{
   SomeProperty = "SomeValue",
} 
```

只是一种创建对象然后设置一些属性值的方法，它实际上与：

```
SomeClass abc = new SomeClass();
abc.SomeProperty = "SomeValue"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:16:11.247

[此代码创建一个Func](http://msdn.microsoft.com/en-us/library/bb549151.aspx)数组：`_createSample = new Func<SampleBase>[]`

然后它使用[集合初始化器将一个](http://msdn.microsoft.com/en-us/library/bb384062.aspx)[lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx) `() => new SkeletonMappingSample()`实例化为其中的唯一元素（注意大括号，分号是可选的）：

```
{
    () => new SkeletonMappingSample();
} 
```

此表达式将在调用时实例化一个新的 SkeletonMappingSample：

```
var newMappingSample = _createSample[0](); 
```

# delphi - 获取特定值的垂直条的高度

> ID：15834921
> 
> 赞同：1
> 
> 时间：2013-04-05T13:14:11.763
> 
> 标签：delphi, height, teechart

我正在尝试使用堆叠系列创建条形图。每个酒吧由两部分组成。主要部分有正常颜色和黑色边框，“超限”部分有更亮的颜色和红色边框。在 IDE (Delphi XE3) 中配置此行为没有问题。当我的“超限”条太小时，配置的行为开始变得糟糕。如果此条高 1px，则红色边框消失，仅渲染 1px 画笔颜色线。我需要渲染边框颜色线。所以我试图改变这个栏的颜色。

这是我的代码的一部分：

```
Series1.AddY((RamTotal-RamAvailable-memover) / mb, titlemem);
if memover > 0 then
  Series2.AddY(memover / mb, titlememover);
if (memover > 0) and (Series2.CalcBarBounds(0).Height <= 2) then
  Series2.ValueColor[0] := FSmallOverColor; 
```

问题在于 CalcBarBounds 函数。只有在图表已经显示后它才会返回正确的值。它第一次返回 0。这导致将边框颜色应用于每个“超出限制”栏，而不管它在第一次显示时的高度。当我按下清除所有系列并调用与以前相同的代码的重新加载按钮时，一切看起来都很好。如果我从代码中调用 reload，它就不起作用。调用刷新、重绘或任何无济于事的方法。尝试在 AfterDraw 事件上更改颜色也不起作用。

每个系列只有一个值。我有 TeeChart Standard v2012.06.120613 32bit。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:55:43.750

> 问题在于 CalcBarBounds 函数。只有在图表已经显示后它才会返回正确的值。它第一次返回 0。这导致将边框颜色应用于每个“超出限制”栏，而不管它在第一次显示时的高度。当我按下清除所有系列并调用与以前相同的代码的重新加载按钮时，一切看起来都很好。如果我从代码中调用 reload，它就不起作用。

您可能必须在调用之前强制重新绘制图表`CalcBarBounds`。在图表完成第一次绘制之前，某些内部值未初始化或没有有效值。

> 调用刷新、重绘或任何无济于事的方法

你试过调用`Draw`函数吗？

# stackmob - StackMob 的数据/内容管理前端

> ID：15834927
> 
> 赞同：0
> 
> 时间：2013-04-05T13:14:30.517
> 
> 标签：stackmob

对于 iOS 应用程序，我正在寻找 BaaS 提供商。从开发人员的角度来看，StackMob 非常有趣，但我缺少一个不错的（网络）前端来添加和编辑存储的对象。仪表板中的“数据管理”选项不适合非技术人员。

StackMob 上是否有一个不错的（免费或付费）前端用于内容管理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T08:31:37.423

我不知道 StackMob 有任何预构建的 CMS 前端。但是，我们大多数寻求类似产品的客户使用的是我们提供的 HTML5 产品。这允许您创建完全属于您品牌的 StackMob 内容的自定义 HTML5 应用程序。它不像预建选项那么简单，但它确实为您提供了很大的灵活性。

泰

# javascript - 从 asp.net 中的外部文件调用 JavaScript 函数 - 错误

> ID：15834933
> 
> 赞同：-2
> 
> 时间：2013-04-05T13:14:38.433
> 
> 标签：javascript, asp.net

我在一个单独的文件中有一个 JavaScript 函数，其名称类似于 home.js / 现在我想调用它 / 使用 asp 按钮 / 和 OnClientClick 事件 / 但发生以下错误：解析器错误消息：无法设置“OnClientClick”属性声明式地。/我不知道问题出在哪里？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:16:39.107

您必须在后面的代码中设置“onclientclick”属性，例如

```
btnSave.OnClientClick = "MyJSFunction();"; 
```

您不能在标记中设置它（以声明方式）。

# wcf - 具有更改 ClientCredentials 的 AutoFac WCF 代理

> ID：15834936
> 
> 赞同：0
> 
> 时间：2013-04-05T13:14:42.317
> 
> 标签：wcf, autofac

我正在编写 WCF 服务，并且正在为 DI 使用 AutoFac WCF 集成。我有一个稍微奇怪的情况，我有另一个需要凭据的服务的代理。凭据将根据传入的一些参数而改变，因此我不能只在设置容器并完成它时设置值。

```
public class MyService : IMyService
{
    private ISomeOtherService _client;
    public MyService(ISomeOtherService client)
    {
        _client = client;
    }

    public Response SomeCall(SomeData data)
    {
        // how do I set ClientCredentials here, without necessarily casting to concrete implementation
        _client.MakeACall();
    }
} 
```

在代理上设置凭据而不必强制转换为已知类型或 ChannelBase 的最佳方法是什么。我试图避免这种情况，因为在我的单元测试中，我正在模拟该代理接口，因此将其转换回其中一种类型会失败。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-08T16:44:21.930

**您可以做到，但这并不简单**，您必须稍微更改设计，以便将“决定并设置凭据”的逻辑从课程中拉出`MyService`。

首先，让我们定义场景中的其余类，以便您可以看到它们组合在一起。

我们有`ISomeOtherService`界面，我稍微修改了一下，这样您就可以实际看到最后设置了哪些凭据。我让它返回一个字符串而不是一个void。我还有一个实现，`SomeOtherService`它有一个凭证获取/设置（这是你`ClientCredentials`在 WCF 中的）。这一切看起来像这样：

```
public interface ISomeOtherService
{
  string MakeACall();
}

public class SomeOtherService : ISomeOtherService
{
  // The "Credentials" here is a stand-in for WCF "ClientCredentials."
  public string Credentials { get; set; }

  // This just returns the credentials used so we can validate things
  // are wired up. You don't actually have to do that in "real life."
  public string MakeACall()
  {
    return this.Credentials;
  }
} 
```

请注意，该`Credentials`属性没有被接口公开，因此您可以在不将接口转换为具体类型的情况下看到它是如何工作的。

接下来，我们为您在问题中显示`IMyService`的操作提供接口和关联的请求/响应对象。`SomeCall`（在您遇到的问题中，`SomeData`但想法相同，我只是采用了稍微不同的命名约定，以帮助我保持输入与输出的正确性。）

```
public class SomeCallRequest
{
  // The Number value is what we'll use to determine
  // the set of client credentials.
  public int Number { get; set; }
}

public class SomeCallResponse
{
  // The response will include the credentials used, passed up
  // from the call to ISomeOtherService.
  public string CredentialsUsed { get; set; }
}

public interface IMyService
{
  SomeCallResponse SomeCall(SomeCallRequest request);
} 
```

有趣的部分是我们用来选择凭证集的数据`Number`在请求中。它可以是任何你想要的，但在这里使用一个数字会使代码更简单一些。

**这是它开始变得更加复杂的地方**。首先你真的需要熟悉两个 Autofac 的东西：

*   [隐式关系](https://code.google.com/p/autofac/wiki/RelationshipTypes)——我们可以在 a 上引用`Func<T>`而不是 a`T`来获得“创建`T`实例的工厂”。
*   [使用注册代表的参数](https://code.google.com/p/autofac/wiki/ResolveParameters)——我们可以获取一些输入并使用它来通知解析操作的输出。

我们将在这里使用这两个概念。

**的实现`MyService`被切换为采用工厂**，该工厂将接受`int`并返回`ISomeOtherService`. 当您想要获得对其他服务的引用时，您执行该函数并传入将确定客户端凭据的数字。

```
public class MyService : IMyService
{
  private Func<int, ISomeOtherService> _clientFactory;

  public MyService(Func<int, ISomeOtherService> clientFactory)
  {
    this._clientFactory = clientFactory;
  }

  public SomeCallResponse SomeCall(SomeCallRequest request)
  {
    var client = this._clientFactory(request.Number);
    var response = client.MakeACall();
    return new SomeCallResponse { CredentialsUsed = response };
  }
} 
```

**真正的关键是`Func<int, ISomeOtherService>`依赖。**我们将注册`ISomeOtherService`，Autofac 将自动创建一个工厂，为我们接收`int`并返回一个`ISomeOtherService`。不需要真正的特殊工作......虽然注册有点复杂。

**最后一部分是为您注册一个 lambda，`ISomeOtherService`**而不是一个更简单的类型/接口映射。lambda 将寻找一个类型化的`int`参数，我们将使用它来确定/设置客户端凭据。

```
var builder = new ContainerBuilder();
builder.Register((c, p) =>
  {
    // In WCF, this is more likely going to be a call
    // to ChannelFactory<T>.CreateChannel(), but for ease
    // here we'll just new this up:
    var service = new SomeOtherService();

    // The magic: Get the incoming int parameter - this
    // is what the Func<int, ISomeOtherService> will pass
    // in when called.
    var data = p.TypedAs<int>();

    // Our simple "credentials" will just tell us whether
    // we passed in an even or odd number. Yours could be
    // way more complex, looking something up from config,
    // resolving some sort of "credential factory" from the
    // current context (the "c" parameter in this lambda),
    // or anything else you want.
    if(data % 2 == 0)
    {
      service.Credentials = "Even";
    }
    else
    {
      service.Credentials = "Odd";
    }
    return service;
  })
.As<ISomeOtherService>();

// And the registration of the consuming service here.
builder.RegisterType<MyService>().As<IMyService>();
var container = builder.Build(); 
```

好的，现在您已经注册了一个整数并返回了服务实例，您可以使用它：

```
using(var scope = container.BeginLifetimeScope())
{
  var myService = scope.Resolve<IMyService>();
  var request = new SomeCallRequest { Number = 2 };
  var response = myService.SomeCall(request);

  // This will write "Credentials = Even" at the console
  // because we passed in an even number and the registration
  // lambda executed to properly set the credentials.
  Console.WriteLine("Credentials = {0}", response.CredentialsUsed);
} 
```

繁荣！无需转换为基类即可设置凭据。

**设计变更：**

*   **凭证“设置”操作已从消费代码中移出。**如果您不想在消费代码中强制转换为基类，您将别无选择，只能将凭证“设置”操作拉出。这种逻辑在 lambda 中可能是正确的；或者你可以把它放在一个单独的类中，在那个 lambda 中使用；或者你可以[处理 OnActivated 事件](https://code.google.com/p/autofac/wiki/LifetimeEvents)并在那里做一点魔法（我没有展示 - 练习留给读者）。但是“将它捆绑在一起”位必须在组件注册（lambda、事件处理程序等）中的某个位置，因为这是您仍然拥有具体类型的唯一点。
*   **凭据是为代理的生命周期设置的。**如果您在使用代码中只有一个代理，在执行每个操作之前设置不同的凭据，这可能不太好。我无法从您的问题中判断您是否拥有它，但是......如果是这种情况，您将需要为每个呼叫使用不同的代理。这可能意味着您实际上想要在完成代理后处理它，[因此您需要查看 using`Owned<T>`](https://code.google.com/p/autofac/wiki/OwnedInstances)（这将使 factory `Func<int, Owned<T>>`），或者如果服务长期存在，您可能会遇到内存泄漏单身人士。

**可能还有其他方法可以做到这一点。**您可以创建自己的自定义工厂；你可以处理`OnActivated`我提到的事件；您可以使用该`Autofac.Extras.DynamicProxy2`库创建一个动态代理，该代理拦截对您的 WCF 服务的调用并在允许调用继续之前设置凭据...我可能会集思广益其他方式，但您明白了。*我在这里发布的是我会怎么做*，希望它至少可以为你指明一个方向，帮助你到达你需要去的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T16:18:30.100

我们最终采用的方法是将**ISomeOtherService 转换**为**ClientBase**，

这避免了引用代理类型。然后在我们的单元测试中，我们可以像这样设置模拟

```
var client = new Mock<ClientBase<ISomeOtherService>>().As<ISomeOtherService>(); 
```

所以它可以转换为 ClientBase，但仍设置为 ISomeOtherService

# pbs - 强制 qsub (PBS) 在退出前等待作业结束

> ID：15834938
> 
> 赞同：1
> 
> 时间：2013-04-05T13:14:46.003
> 
> 标签：pbs, qsub

我一直在使用 Sun Grid Engine 在集群的一个节点上运行我的作业。

通常我会在退出之前等待工作完成并使用：

```
qsub -sync yes perl Script.pl 
```

但是现在我不再使用 Sun Grid Engine，而是使用 PBS Pro 10.4

我找不到-sync 的相应指令。

有人可以帮助我吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T09:33:33.733

PBSPro 没有 -sync 等效项，但您可以使用 -I 选项结合使用 expect 来告诉它运行什么代码以获得相同的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-19T12:05:49.407

PBS的等价物`-sync`是`-Wblock=true`.

这可以防止 qsub 在作业完成之前退出。需要这个可能是不寻常的，但我发现它在使用一些不是为 HPC 设计的软件时很有用。该软件执行多个同时运行的工作程序实例。但是，它必须等待一个（或有时更多）实例完成，并对结果进行一些处理，然后再生成下一个。如果工作程序在没有写入特定文件的情况下完成，则假定它已失败。我能够为工作程序编写一个包装脚本`qsub`，并使用该`-Wblock=true`选项使其等待工作程序作业完成。

# c - 如何在 C 中对数组执行拆分和连接功能？

> ID：15834941
> 
> 赞同：0
> 
> 时间：2013-04-05T13:14:51.430
> 
> 标签：c

如何在 C 中对数组元素执行连接和拆分功能？

例如，假设我有两个数组：

```
int value[]=  {0,1,2,3};
int id[]  = {1,1,3,3};
// I want to join the elements of "value" array whoz value of "id" are same.
//In my case 0,1 elements from "value" array has the same "id" value that is 1,1
//and 2,3 from "value" has same "id" value 3,3\. So it will join {01,23}
//And if i want to perform split function it will give me back{0,1,2,3} 
```

我在 perl 脚本中做了同样的事情，但我不确定如何在 C 中获得这个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:16:54.603

C 没有像许多高级语言那样的内置“动态”数组。

您必须使用 自己分配所需的存储空间`malloc()`，然后将所需的数据逐个元素复制到新数组中。

我也不太明白您描述的所需操作......“加入`value`其值`id`相同的元素”没有意义。

你想计算数组的[交集吗？](http://en.wikipedia.org/wiki/Intersection_%28set_theory%29)但它们显然不是套装，所以这听起来也不对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T14:06:43.693

以下将做你想要的：

```
#include <stdlib.h>
#include <stdio.h>

int main(){
  int i,v;
  int ID_SIZE=7;
  int value[]={0,1,2,3,1,4, 7};
  int id[]=   {1,1,3,3,2,2,10};

  //Discover largest and smallest ids in order to allocate memory
  int min=0,max=0,length;
  for(i=1;i<ID_SIZE;++i){
    if(id[i]<id[min]) min=i;
    if(id[i]>id[max]) max=i;
  }
  //Replace ids with values
  min=id[min];
  max=id[max];
  length=max-min+1;

  int **unions;
  int *append;
  append=(int *)calloc(length,sizeof(int));

  for(i=0;i<length;++i)
    append[i]=-1;    //Initial insertion point for each id is at 0

  //Create 2D array unions[IDS HERE][VALUES HERE]
  unions=(int **)calloc(length,sizeof(int*));
  for(i=0;i<length;++i)
    unions[i]=(int *)calloc(ID_SIZE,sizeof(int));

  //Join arrays
  for(i=0;i<ID_SIZE;++i){
    printf("Inserting %d into %d at %d\n",value[i],id[i],append[id[i]-min]+1);
    unions[id[i]-min][++append[id[i]-min]]=value[i];
  }

  for(i=0;i<length;++i){
    if(append[i]>=0){
      printf("Id %d has: ",i+min);
      for(v=0;v<=append[id[i]-min];++v)
        printf("%d ",unions[i][v]);
      printf("\n");
    }
  }

  return 0;
} 
```

它创建了两个动态数组。

一个名为的数组`append`跟踪为每个 id 找到了多少值。

另一个数组，称为`unions`存储计算结果。

对于我在程序中定义的输入，返回以下内容：

```
Inserting 0 into 1 at 0
Inserting 1 into 1 at 1
Inserting 2 into 3 at 0
Inserting 3 into 3 at 1
Inserting 1 into 2 at 0
Inserting 4 into 2 at 1
Inserting 7 into 10 at 0
Id 1 has: 0 1 
Id 2 has: 1 4 
Id 3 has: 2 3 
Id 10 has: 7 
```

# c++ - 派生类中数据的设计和初始化

> ID：15834942
> 
> 赞同：0
> 
> 时间：2013-04-05T13:14:52.367
> 
> 标签：c++, c++11, constructor, initialization

我有以下层次结构：

```
 Base_class
      |
 Traits_class
      |
Concrete_class 
```

现在问题是数据包含在`Base_class`（它需要在那里，因为`Traits_class`必须可以访问它。`Traits_class`是一个类模板，根据传递的模板参数具有不同的功能（所以我使用部分模板特化来处理不同的classes）。最后，在最低级别，`Concrete_class`也是一个类模板。我`Concrete_class`只创建实例。

现在的问题是：我已经编写了所有的构造函数、析构函数，并且我在`Concrete_class`. 这意味着我不调用基本构造函数，而是直接在派生类中初始化状态。有人可以指出这是否有问题吗？只有析构函数在`Base_class`, 中声明并声明为受保护。这个设计有明显的缺陷吗？

感谢您的洞察力！

**编辑**

所以我按照 Yakk 对 CRTP 的评论修改了设计，现在我有了

```
 Traits_class
      |
Concrete_class 
```

我还将所有数据`Concrete_class`移至`Traits_class`. 但是发生了一些奇怪的事情，因为我无法访问`Traits_class`. `Traits_class`我的意思是，我确实访问过它，但似乎我正在访问幽灵数据，因为我在其中初始化了成员`Traits_class`（甚至在`Traits_class`构造函数中打印），但随后该类为空。所以我真的不明白发生了什么（我正在将 Traits_class const_casting 到 Concrete_class 来执行此操作）。

最后，我只写了静态成员函数`Traits_class`来初始化`Concrete_class`. 我想我可以使用受保护的成员函数来做同样的事情（因为我继承自`Traits_class`），但我相信这是同样的事情。

如果您有任何进一步的意见，请告诉我。再次感谢您的 C++ 智慧。

啊

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T17:44:01.223

你的推理有误。构造函数总是初始化所有基类和非静态成员（从技术上讲，虚拟基由最派生的类型初始化，而不是由任何其他基的构造函数初始化），因此 Base_class 实际上将由其编译器生成的默认构造函数初始化（或编译器生成的复制/移动构造函数，如果您正在执行复制或移动），它将使用其默认（或复制/移动）构造函数初始化所有数据成员。您可以稍后在具体类的构造函数中分配这些成员，但此时已经进行了初始化。

由于基类拥有所有数据成员，因此它实际上是在发生复制或移动时初始化所有数据成员的基类。如果您在最派生类中编写自己的复制或移动构造函数，则需要在初始化列表中调用基类的复制/移动构造函数，否则数据成员将是默认构造的，您将被迫事后使用复制/移动分配。这通常效率低下，在某些情况下可能是不正确的。（例如，我编写了可以移动构造的类，但由于切片问题而无法移动分配；如果您的 Base_class 中有这样一个类作为数据成员，则无法单独实现移动语义在 Concrete_class 中。）

如果必须从 Concrete_class 初始化所有数据成员，我建议您在 Base_class 中提供一个受保护的构造函数，该构造函数按值获取所有数据成员并将它们移动到自己的数据成员中，并在 Traits_class 中提供完美转发构造函数（或继承基类的构造函数，如果您使用的是具有此支持的编译器）。这允许具体类指定初始化数据成员的值，但允许基类进行实际初始化。它还允许 Base_class 和 Traits_class 构造函数访问完全初始化的数据成员（否则它们只能访问处于默认初始化状态的数据成员）。

这是一个例子：

```
`struct Base_class {
protected:
    Base_class( string s ) : s_( move(s) ) { }
    ~Base_class() = default;
    // Request copy/move, since we're declaring our own (protected) destructor:
    Base_class(Base_class const &) = default;
    Base_class(Base_class &&) = default;
    Base_class &operator=(Base_class const &) = default;
    Base_class &operator=(Base_class &&) = default;

    string s_;
};

template<int>
struct Traits_class : Base_class {
protected:
    template<typename... P>
    Traits_class( P &&p )
        : Base_class( forward<P>(p)... )
    { }
};

template<int I>
struct Concrete_class : Traits_class<I> {
    Concrete_class( char c )
        : Traits_class<I>( string( I, c ) )
    { }
};` 
```

`作为旁注，数据不一定必须在 Base_class 中才能让 Traits_class 能够访问它。如果您不介意虚函数调用的开销并且不需要在构造函数或析构函数中访问（我假设您不需要，因为当前数据在 Concrete_class 的构造函数运行之前，成员没有最终值）。或者，为了避免虚拟调用开销，您可以使用 @Yakk 提到的 Curiously Recurring Template Pattern。`

 `**== 回复在原始问题中编辑 ==**

基类的构造函数将在派生类的构造函数之前运行，因此如果数据存储在派生类中，它将在基类的构造函数中未初始化（并且已经在其析构函数中回收）。您可以将构造函数视为获取基类的实例并将其转换为派生类的实例（通过初始化类的派生部分等），并且作为一种特殊情况，没有基类的构造函数类将“无”（原始存储）转换为类的实例。

因此，当您的特征类构造函数运行时，它还不是一个具体的派生类。因此，访问派生类的数据成员或以其他方式将该类用作派生类是非法的。该语言甚至对虚函数强制执行此操作；如果您在基类的构造函数或析构函数中调用虚函数，它将调用该函数的基版本。例子：

```
#include <iostream>
using namespace std;

struct Base {
  Base() { cout << "Base ctor\n"; v(); }
  ~Base() { v(); cout << "Base dtor\n"; }
protected:
  virtual void v() const { cout << "Base::v\n"; }
};

struct Derived : Base {
  Derived() { cout << "Derived ctor\n"; v(); }
  ~Derived() { v(); cout << "Derived dtor\n"; }
protected:
  virtual void v() const { cout << "Derived::v\n"; }
};

int main() { Derived d; }

/* Output:
Base ctor
Base::v
Derived ctor
Derived::v
Derived::v
Derived dtor
Base::v
Base dtor
*/ 
````

# c# - 在 C# 中测试泛型类型的惯用方法

> ID：15834944
> 
> 赞同：1
> 
> 时间：2013-04-05T13:14:55.487
> 
> 标签：c#, .net, syntax, types

如果我可以在 C# 中测试这样的基本类类型：

```
bool stringTest = new string() is string;
// and
bool listOfStringTest = new List<string>() is List<string>; 
```

如何测试任何东西的列表或我知道可以使用反射来解决的列表，但是在 C# 中是否有更简单、更惯用的方法呢？

例如，如果我测试`List<int>`或`List<string>`两者都会返回 true。并且`Nullable<int>`会`DateTime`返回错误。注意：仅用`List<>`作寻找通用用途的示例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T13:18:22.367

我认为这样做的唯一方法是使用反射：

```
Type listType = new List<string>().GetType();
bool isList = listType.IsGenericType && list.GetGenericTypeDefinition() == typeof(List<>); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-05T13:17:29.140

对于完全匹配，您可以使用以下[`Type.GetGenericTypeDefinition`方法](http://msdn.microsoft.com/en-us/library/system.type.getgenerictypedefinition.aspx)：

```
bool listOfStringTest = new List<string>().GetType().GetGenericTypeDefinition() == typeof(List<>); 
```

正如[Lee](https://stackoverflow.com/users/152602/lee)所建议的，您必须确保所讨论的类型是通用的才能使用此方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-05T15:39:32.037

我不完全确定你在追求什么。如果您想了解一个对象是否*可用作*特定类型，那么我会尽可能地使用`Type.IsAssignableFrom`它。如果您要查看实例是否是未绑定泛型类型的构造泛型类型（例如，构造泛型`List<string>`是未绑定泛型的类型`List<>`，这似乎是您在描述中无法使用的唯一情况`is`），那么您可以做这样的事情：

```
var type = obj.GetType();
bool b = type.IsGenericType && typeof (List<>).IsAssignableFrom(type.GetGenericTypeDefinition()); 
```

这告诉你，在一个假设的世界中，你可以声明一个 type 的变量`List<>`，那个变量可以被赋值为`obj`。

不幸的是，您`IsGenericType`首先需要检查，因为如果类型不是通用的，某些`GetGenericTypeDefintion`实现会抛出异常（如果它们返回`null`，`IsGenericType`则不需要）。

# java - 如何在java中使用正则表达式从带引号的字符串中提取文本？

> ID：15834950
> 
> 赞同：0
> 
> 时间：2013-04-05T13:15:06.057
> 
> 标签：java, regex, csv

我有一个这样的字符串：

```
"0008934","1801 W NORMATOWN ROAD","ROMEOVILLE","IL","US","60446","8158866981","Y" 
```

我想提取双引号内的所有值。你能帮我完成任务吗？

这是我所期待的：

```
0008934
1801 W NORMATOWN ROAD
ROMEOVILLE
IL
US
60446
8158866981
Y 
```

任何人都可以请帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T13:16:25.870

你可以这样做：

```
import java.util.regex.Pattern;
import java.util.regex.Matcher;

public class RegexTest {

    public static void main(String[] args) {
        String strInput = "\"0008934\",\"1801 W NORMATOWN ROAD\",\"ROMEOVILLE\",\"IL\",\"US\",\"60446\",\"8158866981\",\"Y\"";
        Pattern pattern = Pattern.compile("\"([^\"]*)\"");
        Matcher matcher = pattern.matcher(strInput);
        while (matcher.find()) {
            System.out.println(matcher.group(1));
        }
    }
} 
```

**输出：**

```
0008934
1801 W NORMATOWN ROAD
ROMEOVILLE
IL
US
60446
8158866981
Y 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-05T13:17:59.417

您可能还想考虑[OpenCSV](http://opencsv.sourceforge.net/)，这是一个轻量级且简单的开源库，仅包含几个 Java 类。由于您的输入是 CSV，因此 OpenCSV 可以为您执行此操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-05T13:22:53.030

使用剥离前导和尾随引号，然后拆分`","`

```
String[] parts = input.replaceAll("(^\")|(\"$)", "").split("\",\""); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T13:21:06.697

一旦您遇到问题并尝试使用正则表达式解决它，您就会遇到两个问题。
考虑一下：

```
String[] list = input.split(",");  
foreach (String str : list){  
    str.replaceAll("\"","");
} 
```

# javascript - 谷歌地图多个标记点击事件

> ID：15834953
> 
> 赞同：2
> 
> 时间：2013-04-05T13:15:13.010
> 
> 标签：javascript, google-maps, google-maps-markers

我循环并放置了一些标记，但是当我单击标记时，它们都以相同的值响应

这是我的代码

```
 for(a=0; a < prod.length; a++){      
  // we add marker to map  
  var myLatlng = new google.maps.LatLng(prod[a]['lat'],prod[a]['lon']);
  var marker = new google.maps.Marker({
  position: myLatlng,
  map: map,
  title: prod[a]['name']+" \n"+prod[a]['description'],
  icon: image
  });        
  google.maps.event.addListener(marker, "click", function() {
    show_details(a);
  });      
} 
```

函数 show_details，a 始终具有相同的值

我在这里查看了其他答案，但这并没有解决我的问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-05T13:17:03.663

异步编程/脚本中的典型问题。当点击事件运行时传递的`a`变量，所以，它的值是`for`循环结束后的值。您应该创建一个内部函数作用域，并将值保存`a`在一个变量中，该变量只存在于该作用域中。解决方案：

```
 (function(z){
    google.maps.event.addListener(marker, "click", function() {
       show_details(z);
    });    
 })(a); 
```

该`a`变量也位于回调函数之外。因此，如果您修改`a`( 或`for`循环修改) 的值，并且在调用事件处理程序时，它会看到修改后的`a`.

帮助链接：[http](http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/) ://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/ 。

# java - Java Swing JLabels 显示在 buildGUI 方法中，但如果从另一个方法添加则不显示

> ID：15834955
> 
> 赞同：2
> 
> 时间：2013-04-05T13:15:13.603
> 
> 标签：java, swing, jlabel, miglayout

我是写射箭记分卡的业余爱好者。该程序运行良好，但代价是每 18 行中有 19 段相同的代码。我试图通过使用方法调用来压缩代码。我正在使用 Java SE6 和 Mig 布局

这是 GUI 中有效的代码部分。GUI被称为如下

HomePage（包含 main 方法） -> ChoiceGUI -> buildScoresPanel

```
 public  void buildScoresPanelMIG(JPanel scoresPanel) {        

    for (row = 0; row<(int)numberofrows; row++){  
       scoresPanel.add(scorelabel1[row],"gapleft 0,w 35px, hmin 35px,split 18");
       scoresPanel.add(scorelabel2[row],"gap before 0px,gapleft 0,w 35px, hmin 35px");
       scoresPanel.add(scorelabel3[row],"gap before 0px,gapleft 0,w 35px, hmin 35px");
       scoresPanel.add(scorelabel4[row],"gap before 0px,gapleft 0,w 35px, hmin 35px");
       scoresPanel.add(scorelabel5[row],"gap before 0px,gapleft 0,w 35px, hmin 35px");
       scoresPanel.add(scorelabel6[row],"gap before 0px,gapleft 0,w 35px, hmin 35px");
       //another 12 Jlabels              }
    } 
```

但是，如果我将代码放在一个方法中并按如下方式调用它，即使我尝试过 revalidate() repaint() 和 setVisible(true)，Jlabels 也不会显示

```
 public  void buildScoresPanelMIG(JPanel scoresPanel) {

           for (row = 0; row<(int)numberofrows; row++){  

              addScoreLabels();

           }
    }

    public void addScoreLabels(){

     scoresPanel.add(scorelabel1[row],"gapleft 0,w 35px, hmin 35px,split 18");
     scoresPanel.add(scorelabel2[row],"gap before 0px,gapleft 0,w 35px, hmin 35px");
     scoresPanel.add(scorelabel3[row],"gap before 0px,gapleft 0,w 35px, hmin 35px");
     scoresPanel.add(scorelabel4[row],"gap before 0px,gapleft 0,w 35px, hmin 35px");
     scoresPanel.add(scorelabel5[row],"gap before 0px,gapleft 0,w 35px, hmin 35px");
     scoresPanel.add(scorelabel6[row],"gap before 0px,gapleft 0,w 35px, hmin 35px");
    //another 12 labels
     //scoresPanel.revalidate(); 
     //scoresPanel.repaint();
     //scoresPanel.setVisible(true);
  } 
```

我在互联网上搜索了很长一段时间试图解决这个问题，我意识到我对 Swing 组件的工作原理有一个基本的误解，如果有人能解释一下，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T14:12:43.267

我相信您的组件约束是非法的（除了可能的其他原因）。这些是我设法找到的有关 MigLayout 的主要资源：

*   [快速开始](http://www.miglayout.com/QuickStart.pdf)
*   [备忘单](http://migcalendar.com/miglayout/cheatsheet.html)
*   [白皮书](http://www.miglayout.com/whitepaper.html)
*   [apidoc](http://migcalendar.com/miglayout/javadoc/net/miginfocom/swt/MigLayout.html)
*   [演示](http://www.miglayout.com/)

备忘单是您最好的朋友，尽管阅读白皮书并下载和查看用户友好的演示不会有什么坏处。如果您查看备忘单，您会发现您基本上尝试以几种不同（可能不兼容）的方式设置相同的东西。

我已经制作了一个 SSCCE，用于从 MigLayout 托管的 JPanel 中动态添加/删除标签。它是用[MigLayout 3.7.4](http://mvnrepository.com/artifact/com.miglayout/miglayout/3.7.4)构建的。

截屏： ![MigLayout 添加删除调试测试 SSCCE](https://i.stack.imgur.com/QpIFa.png)

代码：

```
public class App extends JFrame {

public JPanel mainPanel;
public int addedCount = 1;
public final int initRowsCount = 8;
public final int columnsCount = 5;

public App() {
    super("MiGLayout test");
    initUI();       
}

private void redrawMainPanel() {        
    mainPanel.revalidate();
    mainPanel.repaint();
}

private JMenuBar initMenuBar() {
    JMenuBar menuBar = new JMenuBar();
    JMenu menu = new JMenu("test menu");
    JMenuItem removeMenuItem = new JMenuItem("remove a component");
    JMenuItem addMenuItem = new JMenuItem("add a component");
    JCheckBoxMenuItem debugMenuItem = new JCheckBoxMenuItem("debug mode");
    removeMenuItem.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            if (mainPanel.getComponentCount() > 0) {
                mainPanel.remove(mainPanel.getComponents()[mainPanel.getComponentCount() - 1]);
                --addedCount;
            }
            App.this.redrawMainPanel();
        }
    });
    addMenuItem.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            mainPanel.add(
                        initLabel(addedCount / columnsCount, addedCount % columnsCount), 
                        (addedCount % columnsCount == columnsCount - 1 ? "grow 35, wrap" : "grow 35")
                        );
            ++addedCount;
            App.this.redrawMainPanel();
        }
    });
    debugMenuItem.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            MigLayout migLayout = ((MigLayout)mainPanel.getLayout());
            String lc = (String)migLayout.getLayoutConstraints();
            if (lc.contains("debug")) {
                lc = lc.substring(0, lc.lastIndexOf(','));
            }
            else {
                lc += ",debug";
            }
            migLayout.setLayoutConstraints(lc);  
            App.this.redrawMainPanel();
        }
    });
    menu.add(addMenuItem);
    menu.add(removeMenuItem);
    menu.add(debugMenuItem);
    menuBar.add(menu);
    return menuBar;
}

private JLabel initLabel(int i,int j) {
    JLabel label = new JLabel("label " + i + " " + j);        
    label.setHorizontalAlignment(JLabel.CENTER);
    label.setBorder(BorderFactory.createEtchedBorder());       
    return label;
}
private JPanel initMainPanel() {
    JPanel panel = new JPanel(); 
    panel.setLayout(new MigLayout("nogrid, fill, debug"));
    JLabel label; 
    for (int i = 0; i < initRowsCount; i++) {
        for (int j = 0; j < columnsCount; j++) {                
            panel.add(initLabel(i, j), (j == columnsCount - 1 ? "grow 35, wrap" : "grow 35"));
             ++addedCount;
        }
    }  
    addedCount--;
    return panel;
}

public void initUI() {
    this.setPreferredSize(new Dimension(1024, 768));
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.setJMenuBar(initMenuBar());
    this.getContentPane().add(mainPanel = initMainPanel());
    this.setLocationByPlatform(true);
    this.pack();        
}

public static void main(String[] args) {       
    // SwingUtilities.invokeLater
    // or
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            new App().setVisible(true);     ;
        }
    });
}
} 
```

MigLayout 有两种或三种操作模式，它们被设置为布局约束 - MigLayout 构造函数参数。基本模式是网格和纯流模式（`nogrid`布局约束）。

如果我没记错的话，在网格模式下，您需要定义至少一个维度（行、列），并且有多种方法可供您使用（至少布局、行和列约束）。然后有两种模式：可以添加有和没有单元格坐标的组件。

flow-only 模式相当于网络浏览器的可视化格式化系统：内联元素排成一行（例如 HTML`span`标签），而块元素从下一行开始（例如 HTML `div`）。组件约束打破了界限 -将`wrap`以下组件放置在下一行。

布局约束绘制红线和蓝`debug`线，分别是布局和组件边界。

`fill`布局约束：

> 为列和/或行声明容器中的所有可用空间。**至少一个组件需要有一个“增长”约束才能填充容器。**尽管尊重“增长优先”，但空间将被平均分配。如果没有列/行具有“增长”设置，则行/列中组件的增长权重将迁移到该行/列。

`grow`组件约束（也可以用作行/列约束）：

> 设置组件相对于同一单元格中的其他组件的增长速度。权重（如果未指定，则默认为 100）纯粹是相对于其他组件权重的值。两倍的重量将获得双倍的额外空间。如果未设置此约束，则增长权重设置为 0，并且组件不会增长（除非在行/列中设置填充，在这种情况下，可以使用“增长 0”显式使其不增长）。增长权重只会与相同增长优先级组和相同单元格中的权重进行比较。见下文。

通过这种方式，框架的大小调整不会弄乱布局，因为它们都是平等地增长的。还有更多方法可以实现非常不同的布局。它似乎是“一个布局管理器来统治它们”。如果您有疑问，请下载演示。甚至还有一个动画示例。业余爱好者的绝佳技术选择；）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:24:00.860

也尝试将`scoresPanel`作为参数传递给您的`addScoreLabels()`方法：

```
addScoreLabels(scoresPanel);

...

public void addScoreLabels(JPanel scoresPanel) { ... 
```

正如 Chris Cooney 在评论中指出的那样，您可能在`scoresPanel`字段变量中存储了一个不同的面板，该面板在第一种方法中被局部变量隐藏，但在第二种方法中没有。

# php - 多对多关系以及 Laravel 4 中的位置

> ID：15834956
> 
> 赞同：0
> 
> 时间：2013-04-05T13:15:15.800
> 
> 标签：php, many-to-many, where, laravel, laravel-4

在 Laravel 4 中，当处理多对多关系时，我想做以下事情：

```
/* get all skills for one specific topic */
Route::get( '/api/topics/{topicSlug}/skills', function( $topicSlug )
{
    $skills = Skill::where( 'topic.slug', '=', $topicSlug )->get();
} 
```

现在的问题是，这`topic.slug`显然不是表中的一列`skills`。相反，`slug`是表中的一列`topics`，它通过称为（包括和）`skills`的数据透视表与表相关。`skills_topics``skill_id``topic_id`

我尝试了许多变体，但我无法正确查询。**如果我想获得一个特定主题的所有技能，查询应该是什么样子？**

* * *

这些型号是：

```
class Skill extends Eloquent {
    public function topics()
    {
        return $this->belongsToMany( 'Topic' ); 
    }
} 
```

和

```
class Topic extends Eloquent {
    public function skills()
    {
        return $this->belongsToMany( 'Skill' );
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-05T13:32:15.133

好吧，如果我理解正确，您实际上应该获得具有相关技能的主题。像这样的东西：

```
$topic = Topic::with('skills')->where('slug', $topicSlug)->first(); 
```

并通过以下方式访问技能：

```
foreach ($topic->skills as $skill) {  } 
```

# asp.net - 保存 asp.net 用户可编辑的配置设置

> ID：15834960
> 
> 赞同：1
> 
> 时间：2013-04-05T13:15:26.710
> 
> 标签：asp.net

我希望在 ASP.net MVC4 应用程序中存储一些会影响整个应用程序的随机全局设置。

这些设置需要网站管理员可以编辑（我做了一个小表格）

它们是当前站点范围内的折扣、促销到期日期、合作伙伴服务的密钥等。它们不适合数据库，因为它们是单个（标量）值，不适合任何列表（或表）。它们应该只是在应用程序级别的某个单例对象中。然而，需要坚持 - 一旦管理员更改了他们不希望仅因为服务器（或应用程序）被重置而重置的值。

我想通过设置对象将它们存储在web.config文件中。但是我会定期发布升级，这会覆盖服务器上的 we.config。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T13:32:36.820

您可以使用以下内容；

数据库（首选）

XML 文件

纯文本文件

这些中的任何一个都将为您提供一种存储信息的方式，并且一个简单的读写界面将允许您的应用程序访问。然后，您可以将它们存储在`Application`或`Session`对象中并相应地使用它们。

# couchdb - CouchDB 视图 - 将键作为 JSON 发出并基于任何属性进行过滤

> ID：15834963
> 
> 赞同：0
> 
> 时间：2013-04-05T13:15:38.870
> 
> 标签：couchdb

考虑遵循员工文档结构

```
{ 
   "_id":...,
   "rev":...,
   "type":"Employee",
   "fName":...,
   "lName":...,
   "designation":...,
   "department":...,
   "reportingTo":...,
   "isActive":..,
   more attributes
   more attributes
} 
```

并在名为“Employee”的视图中遵循地图功能

```
function(doc) {
  if (doc.type=="Employee") {
    emit({
            "EID":doc._id,
            "FirstName":doc.fName,
            "LastName":doc.lName,
            "Designation":doc.designation,
            "Department":doc.department,
            "ReportingTo":doc.reportingTo,
            "Active":doc.isActive
         },
        null
        );
  }
}; 
```

我想根据发射属性的任何组合和顺序查询此视图（查询可能包括一些随机属性，可能像鸭子打字）。可能吗？如果是这样，请让我知道一些示例或链接。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:54:12.273

我遇到过几次同样的问题；你可以，但你必须自己索引每个（而不是像你所做的那样全部在一个哈希中）。但是你可以通过emit的值来完成整个事情。它可能效率很低，但可以完成工作。（请参阅此链接：[查看片段](http://wiki.apache.org/couchdb/View_Snippets#Arbitrarily_query_against_any_document_property_.28.22uniview.22.29)）

IE：

```
function(doc) {
    if (doc.type=="Employee") {
        emit(["EID",doc.values.EID], doc.values);
        emit(["FirstName", doc.fName], doc.values);
        emit(["LastName", doc.lName], doc.values);
        emit(["Designation", doc.designation], doc.values);
        emit(["Department", doc.department], doc.values);
        emit(["ReportingTo", doc.reportingTo], doc.values);
        emit(["Active", doc.isActive], doc.values);
    }
} 
```

这会将所有“EID”的东西放在树的同一部分，等等，我不确定这对你是好是坏。

如果您开始需要 [field name:]value 搜索的大量功能，那么转向 Lucene-CouchDB 设置可能是值得的。有几个存在，但有点不成熟。

# jquery - MVC 4 - 如何使用 JavaScript 加载视图

> ID：15834965
> 
> 赞同：5
> 
> 时间：2013-04-05T13:15:46.600
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-4

我对 MVC 和 JavaScript 很陌生。我在视图上有一个下拉列表（'ProcessGroupRevisions'），当用户在下拉列表中选择某个项目时，我想在控制器中执行一个操作，该操作将呈现一个新视图。我有以下代码，有点被删掉了。但我知道这是不对的（因为它不起作用），但我不确定我需要做什么才能让它起作用。

```
 // This handles the onchange for the Revisions dropdown.
        $("#ProcessGroupRevisions").change(function () {
            if ($("#ProcessGroupRevisions").prop("value") == "-1") {
                '@Url.Action("AddNewRevision", "SetpointManagement", new RouteValueDictionary { { "processGroupId", ViewBag.ProcessGroupId } })';
            }
        }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T13:20:06.880

您可以尝试使用jquery加载方法：

```
$('#yourContainer').load('/ControllerName/ActionName'); 
```

在这种情况下，“yourContainer”必须是要用作视图容器的 HTML 元素的 ID。您可能还希望有一些额外的逻辑来避免将硬编码的 URL 放在那里的控制器。在这种情况下，您可以执行以下操作：

```
var baseUrl = '@Url.Content("~")'

$("#yourContainer").load(baseUrl + "ControllerName/ActionName"); 
```

请注意，baseUrl 变量必须在您的 CSHTML 文件中定义，而不是在单独的 js 文件中，因为它必须在服务器端处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-05T13:27:44.473

对不起，在我第一次完成之前不小心发布了。

```
<script>
    $(function(){
        $("#ProcessGroupRevisions").change(function () {
            if ($("#ProcessGroupRevisions :selected").val() == "-1") {
                var url = '@Url.Action("AddNewRevision", "SetpointManagement")';
                //To load the view via AJAX
                $("#GroupRevisionDetails").load(url, new {processGroupId: $("#ProcessGroupRevisions :selected").val()});
                //To load the view and replace the current page
                window.location.href = url + "?processGroupId=" + $("#ProcessGroupRevisions :selected").val();
            }
        });
    });
</script>

<select id="ProcessGroupRevisions">
    <option value="-1">-- Pick One --<option>
    <option value="1">Group Revision 1<option>
    <option value="2">Group Revision 2<option>
    <option value="3">Group Revision 3<option>
    <option value="4">Group Revision 4<option>
</select>

<div id="GroupRevisionDetails"></div> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T13:28:33.510

您可以尝试使用`window.location`
For 例如。

```
window.location = "/ControllerName/ActionName"; 
```

# haskell - Haskell 中的所有图形和网络库是如何实现的？

> ID：15834966
> 
> 赞同：6
> 
> 时间：2013-04-05T13:15:46.597
> 
> 标签：haskell, functional-programming, monads, hackage

我才开始学习 Haskell。我读过它是一种纯函数式语言，其中的所有内容都是不可变的。因此，诸如输入输出、写入和读取数据库之类的事情会导致状态的可变性。我知道 Haskell 中有一个叫做 monads 的东西，它允许在 Haskell 中使用命令式特性，例如`IO Monad`. 但我很有趣的是，Haskell 中所有必要的事情都是在 monad 的帮助下实现的吗？在 HackageDB 上有很多包可以处理 3d 图形、数据库、解析 HTML、编写 Web 服务器等等。

这一切背后的总体思路是什么？是什么让 Haskell 保持纯粹并同时适用于编写所有这些？我希望有人会为我澄清这一点。提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T14:13:40.970

我通过下面的类比来理解这些东西，我将用 JavaScript 来表达。

# 如何表达一个有副作用的计算？

## 1.一个函数

这显然是首先想到的：

```
var launchRockets = function () {
  prepareRockets( queryDBForPreparationParameters() )
  launchAllPreparedRockets()
  outputResults()
} 
```

你可以看到一个有效的函数调用了一堆其他有效的函数，这些函数本身可以产生未知的效果以及随之而来的所有后果。

## 2\. 使用说明

表达这一点的另一种方式是编写一组指令，描述这些有效的计算，以便稍后执行某些函数。（曾经编写过 SQL 查询吗？）

```
var launchRocketsInstructions = [
  {
    description: "Prepare rockets",
    parameters: {
      description: "Query a DB for preparation parameters"
    }
  },
  {
    description: "Launch all prepared rockets"
  },
  {
    description: "Output results"
  }
] 
```

那么我们在第二个例子中看到了什么？我们看到一个不可变的数据树来描述计算而不是立即执行它。这里没有副作用，为了组成这个数据树，我们当然可以使用纯函数。这就是 Haskell 中副作用的本质所在。该语言提供的所有基础设施：monads、the `IO`、`do`-notation - 这些只是工具和抽象，简化了您编写单个指令树的任务。

当然，要真正执行这些指令，最终将不得不逃入副作用的狂野世界。在 JavaScript 的情况下，它类似于`execute(launchRocketsInstructions)`，在 Haskell 的情况下，它是运行时执行您使用主模块的功能生成的指令树的根`main`，它成为您程序的单一入口点。因此，Haskell 的副作用实际上发生在语言范围之外，这就是为什么它是纯粹的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-05T13:25:31.480

> 我读过它是一种纯函数式语言，其中的所有内容都是不可变的。

Haskell 只是纯粹的/默认情况下/。如果您向编译器声明（通过一元类型）您希望具有某些效果，那么它们将被启用。

它们只是默认情况下不启用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-05T16:22:20.410

在 Haskell 中，你永远不会真正执行任何事情。您只需通过组合 IO 操作来构建您希望执行的操作的描述，然后将该描述分配给 main。然后编译器将它在主变量中找到的任何程序描述转换为可执行代码。

我建议你阅读这篇我写[的 Haskell IO 介绍，](http://www.haskellforall.com/2013/01/introduction-to-haskell-io.html)它更详细地说明了事情。

但是，这仅说明了我们如何组合 IO 操作，而不是我们如何引入新操作。Haskell 有两种方式来添加新的 IO 动作：

*   编译器内置
*   外部函数接口 (FFI)

然后 IO monad 所做的就是将这些原始 IO 动作组合成更大的 IO 动作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T19:41:37.373

是的，Haskell 中所有必要的东西都是在 monad 的帮助下编写的。Monads 是允许 Haskell 既纯粹又适用于编写实际 I/O 的实用程序的一般思想。

我建议阅读 Simon Peyton Jones 的著名论文[“Tackling the Awkward Squad”](http://research.microsoft.com/en-us/um/people/simonpj/papers/marktoberdorf/)，它解释了如何使用 IO monad 以纯函数式语言进行实际编程。

# dynamics-crm-2011 - CRM 2011 Outlook 客户端的启动页面

> ID：15834969
> 
> 赞同：0
> 
> 时间：2013-04-05T13:15:54.133
> 
> 标签：dynamics-crm-2011, crm

我们将 CRM Dynamics 2011 设置为使用 Outlook 作为客户端。当 CRM 服务器不可用时（可能处于维护模式/发布正在进行等），我们需要向 Outlook 客户端显示某种启动页面或用户友好消息

我们怎样才能做到这一点？如果是网络，那会更容易，但是如何在 Outlook 客户端中实现。

我们无法将 Outlook 设置为离线模式，因为组织中不允许使用离线模式。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:44:52.523

我们仍在运行 Dynamics CRM 4.0。通过使用根站点属性上的“重定向到 URL”选项并指向自定义但简单的 HTML 页面，我能够在 IE 客户端和 Outlook 客户端中显示我自己的启动页面。

# c# - 如何覆盖 ListBox 中的垂直滚动行为？

> ID：15834970
> 
> 赞同：1
> 
> 时间：2013-04-05T13:15:55.393
> 
> 标签：c#, windows-phone-7, drag-and-drop, mouseevent, scrollviewer

我正在使用带有 wrappnael 的列表框以网格方式保存图像列表。我还使用鼠标拖动行为来拖放列表框中的项目。但我无法垂直向上或向下拖动项目，因为 ListBox 中有垂直滚动。如何在不影响滚动行为的情况下垂直拖动项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T13:18:19.083

尝试：

```
<ListBox ScrollViewer.VerticalScrollBarVisibility="Disabled"></ListBox> 
```

希望它的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T14:32:49.753

如果您不需要在 中选择任何内容`ListBox`并且不希望滚动的能力，您可以随时将您的`ListBox`控件替换为`ItemsControl`. 那么你就完全没有滚动的问题了。

# sql - 检查子查询中是否存在列值

> ID：15834976
> 
> 赞同：1
> 
> 时间：2013-04-05T13:16:11.540
> 
> 标签：sql, sql-server

我有 3 个表产品类别和产品类别。

产品表：

```
ProductID ProductName
1             P1
2             P2
3             P3 
```

类别表：

```
CategoryID CategoryName
1              C1
2              C2
3              C3 
```

产品分类：

```
ProductID CategoryID
1            1
1            2
1            3
2            3
3            1
3            2 
```

我需要一个返回超过 1 个类别的产品的查询。根据上面的表格数据，结果将是：

```
ProductID     ProductName
    1             P1
    3             P3 
```

所以我写了一个查询来获取所有具有多个 CategoryID 的 ProductID，如下所示：

```
select ProductID,count(CategoryID)    
from ProductCategory   
group by Productid   
having count(CategoryID)>1) 
```

但是，当我尝试使用以下查询显示产品详细信息时，出现错误：

```
select *
from Product
where ProductID in (
    select ProductID,count(CategoryID)  
    from ProductCategory 
    group by Productid 
    having count(CategoryID)>1)) 
```

我的查询错了吗？我如何获得属于多个类别的所需产品详细信息？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-05T13:17:20.547

删除`COUNT()`子查询中的 。使用 on`IN`子句时，子查询的结果必须只有一个返回列。

```
SELECT  *
FROM    Product
WHERE   ProductID IN 
        (
            SELECT  ProductID
            FROM    ProductCategory
            GROUP   BY Productid
            HAVING  count(CategoryID) > 1
        ) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/48929/1)

或通过使用`JOIN`

```
SELECT  a.*
FROM    Product a
        INNER JOIN 
        (
            SELECT  ProductID
            FROM    ProductCategory
            GROUP   BY Productid
            HAVING  count(CategoryID) > 1
        ) b ON a.ProductID = b.ProductID 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/48929/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T13:45:58.247

您可以尝试在 SQL Server 中使用 CROSS APPLY 运算符

```
SELECT DISTINCT C.ProductID,C.ProductName,A.CategoryID,A.Total
FROM Product C
CROSS APPLY (
    Select CA.CategoryID,Total=COUNT(*)
    From ProductCategory CA
    Where C.ProductID=CA.ProductID
    Group By CA.CategoryID Having COUNT(*)>1
) AS A
ORDER BY A.Total DESC 
```

看看：[http ://explainextended.com/2009/07/16/inner-join-vs-cross-apply/](http://explainextended.com/2009/07/16/inner-join-vs-cross-apply/)

# api - Foursquare API 列表 -> ListItems -> ?Venues?

> ID：15834977
> 
> 赞同：1
> 
> 时间：2013-04-05T13:16:14.223
> 
> 标签：api, foursquare

通过foursquare API 和文档，我正在尝试从列表中提取场地。

我正在收到一个列表响应，其中包含 listItems，它应该是“此列表中列表项的计数和项”。

API 响应的只是计数。

```
 {
      id: "510ae78ae4b0607cd8d8504f"
      name: "Brunchn'"
      description: ""
      user: {
        id: "157255"
        firstName: "Jon"
        lastName: "Doe"
        gender: "male"
        relationship: "self"
        photo: {
          prefix: "https://irs3.4sqi.net/img/user/"
          suffix: "/POOIJDBXTTRPSB0.jpg"
        }
      }
      editable: true
      public: true
      collaborative: false
      url: "https://foursquare.com/jon_doe/list/brunch"
      canonicalUrl: "https://foursquare.com/jon_doe/list/brunch"
      createdAt: 1359669130
      updatedAt: 1364583099
      followers: {
        count: 0
      }
      listItems: {
        count: 3
      }
    } 
```

从文档中，如果我得到项目响应，我可以检索场地，但似乎没有连接，或者我从错误的 API 调用中进行此操作。有人有什么建议吗？

电话是[https://api.foursquare.com/v2/users/self/lists](https://api.foursquare.com/v2/users/self/lists)

# java - android应用程序在startActivity（）上崩溃

> ID：15834987
> 
> 赞同：8
> 
> 时间：2013-04-05T13:16:40.187
> 
> 标签：java, android, xml, android-intent

我已经启动了一个 Intent 并要求它进入主要活动，当它尝试它时应用程序崩溃。

这是尝试进入主要活动的代码。

```
Intent i = new Intent(
".MAIN_ACTIVITY");
startActivity(i); 
```

这是 Main_Activity 的 XML 清单。

```
<activity
    android:name=".MainActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN_ACTIVITY" />

        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

我对此还是很陌生，所以任何帮助和/或建议都非常有价值。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-05T13:23:35.000

像这样写：

```
Intent i = new Intent(MainActivity.this, NewActivity.class);
startActivity(i); 
```

您还需要在清单文件中声明这两个活动类，如下所示：

```
<activity
android:name=".MainActivity"
android:label="@string/app_name" >
<intent-filter>
    <action android:name="android.intent.action.MAIN_ACTIVITY" />

    <category android:name="android.intent.category.DEFAULT" />
</intent-filter>
</activity>
<activity
    android:name=".NewActivity"
    android:label="@string/app_name" >
</activity> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-09T00:59:03.097

对于那些来自谷歌的人，我试图在 putExtra 中传递大字符串（超过 90K 符号），我的应用程序因此而崩溃。正确的解决方案是将字符串保存到文件或实现 Singleton。

这是相关链接[Intent putExtra 方法的最大长度？（强制关闭）](https://stackoverflow.com/questions/12496700/maximum-length-of-intent-putextra-method-force-close)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-05T13:22:55.287

根据您的代码：如果我`newActiviy`在我的项目中创建了，那么：

我必须在 android 清单文件中添加该活动。

像：

```
<activity
    android:name=".MainActivity"
    android:label="@string/app_name" >
    <intent-filter>
        <action android:name="android.intent.action.MAIN_ACTIVITY" />

        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
    <activity android:name=".newActivity"></activity>
</activity> 
```

调用该活动只需执行以下操作：

```
Intent intent = new Intent(MainActivity.this, newActivity.class);
    startActivity(intent); 
```

**在这里提问之前尝试一些谷歌搜索。你必须检查这个：[构建你的第一个 Android 应用程序](http://developer.android.com/training/basics/firstapp/creating-project.html)并[开始另一个活动](http://developer.android.com/training/basics/firstapp/starting-activity.html#CreateActivity)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-05T13:18:00.877

像这样开始新的活动：

```
Intent intent = new Intent(YourCurrentActivity.this, TargetActivity.class);
    startActivity(intent); 
```