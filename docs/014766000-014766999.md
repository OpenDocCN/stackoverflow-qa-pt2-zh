# StackOverflow 问答 14766000-14766999

# clojure - 有没有类似 ML 的数据类型声明和 clojure 中的模式匹配的东西？

> ID：14766007
> 
> 赞同：2
> 
> 时间：2013-02-08T05:03:56.867
> 
> 标签：clojure, pattern-matching, ml

我对 sml（1 个月）和 clojure（1 周）都是新手。几周前我在 sml 中学习了数据类型和模式匹配，想知道 clojure 中是否有类似的东西。那里似乎有几个模式匹配库。它们是否具有 ML 模式匹配的全部功能？数据类型如何？我是否必须使用 deftype 之类的东西来创建自己的数据类型？如果是这样，我该怎么做？deftype 对我来说看起来很复杂。

如果人们在 lisp 世界中不使用数据类型，那么在 clojure 中使用数据类型进行模式匹配的惯用方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T07:48:41.473

在 Clojure 世界中，您可以使用一些用于多态性的“点菜”选项：

*   如果你想定义高效的分派函数，这些函数可以多态地处理不同的数据类型，你通常会使用[协议。](http://clojure.org/protocols)`deftype`不同的数据类型可能意味着用或定义的 Java 类或 Clojure 类型`defrecord`。
*   [core.match](https://github.com/clojure/core.match)是一个很好的通用模式匹配库
*   [多](http://clojure.org/multimethods)方法提供通用多态分派，可以分派/匹配其参数的任何函数。比协议稍慢，但非常灵活。

至于定义自己的数据类型：

*   不要低估使用纯数据（存储在常规地图、列表、向量中）做事。在大多数情况下，这是 Clojure 中最简单、最灵活的方法。
*   如果您认为这还不够，我建议`defrecord`而不是`deftype`在大多数情况下：defrecord 创建一些行为类似于 hashmap 的东西，因此它非常灵活且用户友好。对于编写库和编译器等的人来说，deftype 更像是一种低级构造。

# servlets - 在 servlet 中间呈现响应

> ID：14766008
> 
> 赞同：1
> 
> 时间：2013-02-08T05:03:58.930
> 
> 标签：servlets, httpresponse

我想知道如何在 servlet 处理过程中呈现响应（基本上是我的 HTML）。因为响应总是只在 servlet 的末尾呈现，这意味着一旦所有命令都被执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:17:56.310

Servlet 3.0[在 servlet 中具有异步支持](https://blogs.oracle.com/enterprisetechtips/entry/asynchronous_support_in_servlet_3)。这意味着您可以在呈现响应后呈现响应并执行一些其他任务。

# javascript - 如何在javascript中获取a href标签值

> ID：14766012
> 
> 赞同：-2
> 
> 时间：2013-02-08T05:04:23.267
> 
> 标签：javascript, jquery

我有一个图像，它在 .cs 文件中定义了“a href”标记的 InnerHTML，如下所示。

```
HtmlGenericControl _divToolTipContainer = new HtmlGenericControl("div");
_divToolTipContainer.ID = string.Format("divToolTipContainer.{0}", item.ID.ToString());
_divToolTipContainer.InnerHtml = "<a href=\"javascript:__doPostBack('" + btnItemThumbnail.ClientID.Replace("_", "$") + "','')\">" +
                                       itemimage; 
```

现在我想在 javascript 中获取 a href 值。所以有这个代码：

```
var a = document.getElementById(oElementId);
alert( a.href ); 
```

但是正在检索的值是“未定义的”。

那么正确的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:06:52.850

尝试`a`在控制台中打印 Element

```
var a = document.getElementById(oElementId);
console.log( a ); 
```

看看你能得到什么。另外，你试过了`getAttribute`吗？

```
alert(a.getAttribute('href')); 
```

# c++ - 导出的函数转发给自己？

> ID：14766019
> 
> 赞同：5
> 
> 时间：2013-02-08T05:04:53.250
> 
> 标签：c++, windows, portable-executable

我今天在解析 Windows 可移植可执行文件结构时遇到了一个非常奇怪的问题。特别是在导出表中。

在尝试解析 DLL 中导出函数的函数地址时，我发现自己遇到了 Stack Overflow（因此这似乎是最合适的 QA 板）。

我编写了自己的版本，`GetProcAddress`手动进行解析而不是调用现有`GetProcAddress`方法。请不要只告诉我使用现有的`GetProcAddress`方法，它不适合我目前的情况，我想从中学习一些东西。

对于我遇到的大多数情况，我的版本运行良好，没有遇到任何问题。然而，该函数已针对名为`API-MS-Win-Core-ProcessThreads-L1-1-0.dll`（作为递归解析的一部分`Kernel32.dll`）的 DLL 进行了测试，这就是 StackOverflow 发生的时间。

我已将其范围缩小到从以下导出的函数`API-MS-Win-Core-ProcessThreads-L1-1-0.dll`：

```
CreateRemoteThreadEx 
```

现在，这个导出的函数实际上是一个转发导出。通常这不用担心；我已经编写了我的函数，以便它应该处理转发的导出。然而这个函数被转发到

`api-ms-win-core-processthreads-l1-1-0.CreateRemoteThreadEx`

有人在这里看到问题吗？单步执行代码，`GetProcAddress`然后我的函数调用`LoadLibrary`并`api-ms-win-core-processthreads-l1-1-0`尝试递归查找`CreateRemoteThreadEx`。然而，在下一次迭代中，该`CreateRemoteThreadEx`函数再次被转发......

`api-ms-win-core-processthreads-l1-1-0.CreateRemoteThreadEx`

StackOverflow 就这样开始了。经过一番调查，我发现调用的结果

```
LoadLibraryA("api-ms-win-core-processthreads-l1-1-0"); 
```

返回相同的结果

```
LoadLibraryA("kernel32.dll"); 
```

我难住了。

这是我当前的代码：

```
#include <Windows.h>

#define MKPTR(p1,p2) ((DWORD_PTR)(p1) + (DWORD_PTR)(p2))

INT LookupExport(IMAGE_DOS_HEADER* pDosHd, DWORD* pNames, DWORD nNames, LPCSTR lpProcName)
{
    // Do a binary search on the name pointer table
    INT start = 0, 
        index = -1,
        middle = -1, 
        end = nNames - 1,
        cmp = 0;

    CHAR *pName;

    while (start <= end && index == -1)
    {
        middle = (start + end) >> 1;
        pName = (CHAR*)MKPTR(pDosHd, pNames[middle]);

        if ((cmp = strcmp(pName, lpProcName)) == 0)
            index = middle; // found
        else if (cmp < 0)
            start = middle + 1;
        else
            end = middle;
    }

    return index;
}

FARPROC InternalGetProcAddress(HMODULE hModule, LPCSTR lpProcName)
{
    BOOL ordinalSearch = HIWORD(lpProcName) == 0;
    WORD ordinal = 0;
    IMAGE_DOS_HEADER *pDosHd = (IMAGE_DOS_HEADER*)hModule;

    if (pDosHd->e_magic != IMAGE_DOS_SIGNATURE)
        return NULL;

    IMAGE_NT_HEADERS *pNtHd = (IMAGE_NT_HEADERS*)MKPTR(pDosHd, pDosHd->e_lfanew);
    if (pNtHd->Signature != IMAGE_NT_SIGNATURE)
        return NULL;

    IMAGE_DATA_DIRECTORY directory = pNtHd->OptionalHeader.DataDirectory[IMAGE_DIRECTORY_ENTRY_EXPORT];
    if (directory.Size == 0 || directory.VirtualAddress == 0)
        return NULL;

    IMAGE_EXPORT_DIRECTORY *pExports = (IMAGE_EXPORT_DIRECTORY*)MKPTR(pDosHd, directory.VirtualAddress);
    if (!ordinalSearch)
    {
        INT index = LookupExport(pDosHd, (DWORD*)MKPTR(pDosHd, pExports->AddressOfNames), pExports->NumberOfNames, lpProcName);
        if (index == -1)
            return NULL;
        ordinal = ((WORD*)MKPTR(pDosHd, pExports->AddressOfNameOrdinals))[index];
    }
    else
    {
        ordinal = LOWORD(lpProcName);
    }

    INT delta = pExports->Base - 1;
    DWORD dwAddress = ((DWORD*)MKPTR(pDosHd, pExports->AddressOfFunctions))[ordinal - delta];
    // Check whether forwarded:
    if (dwAddress >= directory.VirtualAddress && dwAddress < (directory.VirtualAddress + directory.Size))
    {
        CHAR pForward[256];
        strcpy(pForward, (CHAR*)MKPTR(pDosHd, dwAddress));
        CHAR *pFunction = strchr(pForward, '.');
        if (pFunction == NULL)
            return NULL;

        // break into seperate parts and recurse
        *pFunction++ = 0;
        return InternalGetProcAddress(LoadLibraryA(pForward), pFunction);
    }

    return (FARPROC)MKPTR(hModule, dwAddress);
} 
```

任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:39:42.850

好的，在遵循@sergmat 的建议后，我查看了 API Set 文档（感兴趣的人可以[在这里](http://www.geoffchappell.com/studies/windows/win32/apisetschema/index.htm)找到）。我现在已经修改了我的 GetProcAddress 代码来简单地查找 Api Set 表。

```
#include <Windows.h>

#define MKPTR(p1,p2) ((DWORD_PTR)(p1) + (DWORD_PTR)(p2))

typedef struct _stripped_peb32 {
    BYTE    unused1[0x038];
    PVOID   ApiSet;
    BYTE    unused2[0x1AC];
} PEB32;

typedef struct _stripped_peb64 {
    BYTE    unused1[0x068];
    PVOID   ApiSet;
    BYTE    unused2[0x23C];
} PEB64;

typedef struct _PROCESS_BASIC_INFORMATION {
    PVOID       Reserved1;
    LPVOID      PebBaseAddress;
    PVOID       Reserved2[2];
    ULONG_PTR   UniqueProcessId;
    PVOID       Reserved3;
} PROCESS_BASIC_INFORMATION;

typedef struct _api_set_host {
    DWORD           ImportModuleName;
    WORD            ImportModuleNameLength;
    DWORD           HostModuleName;
    WORD            HostModuleNameLength;
} API_SET_HOST;

typedef struct _api_set_host_descriptor {
    DWORD           NumberOfHosts;
    API_SET_HOST    Hosts[1];
} API_SET_HOST_DESCRIPTOR;

typedef struct _api_set_entry {
    DWORD           Name;
    WORD            NameLength;
    DWORD           HostDescriptor;
} API_SET_ENTRY;

typedef struct _api_set_header {
    DWORD           unknown1;
    DWORD           NumberOfEntries;
    API_SET_ENTRY   Entries[1];
} API_SET_HEADER;

typedef NTSTATUS (__stdcall *fnNtQueryInformationProcess)(HANDLE ProcessHandle, DWORD ProcessInformationClass, PVOID ProcessInformation, ULONG ProcessInformationLength, PULONG ReturnLength);

API_SET_HEADER *GetApiSetHeader()
{
    fnNtQueryInformationProcess NtQueryInformationProcess = (fnNtQueryInformationProcess)GetProcAddress(LoadLibraryW(L"ntdll.dll"), "NtQueryInformationProcess");
    if (!NtQueryInformationProcess)
        return NULL;

    PROCESS_BASIC_INFORMATION info;
    if (NtQueryInformationProcess(GetCurrentProcess(), 0, &info, sizeof(info), NULL) != S_OK)
        return NULL;

#if defined(_WIN32)
    return (API_SET_HEADER*)(((PEB32*)info.PebBaseAddress)->ApiSet);
#elif defined(_WIN64)
    return (API_SET_HEADER*)(((PEB64*)info.PebBaseAddress)->ApiSet);
#else
    return NULL; // unsupported architecture
#endif
}

HMODULE ResolveImportMap(LPCSTR lpModuleName)
{
    API_SET_HEADER *pHeader = GetApiSetHeader();
    if (pHeader == NULL)
        return NULL;
    API_SET_ENTRY *pEntry = pHeader->Entries;
    API_SET_HOST_DESCRIPTOR* pDescriptor;
    wchar_t module[128];

    // First, normalize the LPCSTR, the API Set table doesn't have the API- prefix
    if (strnicmp("api-", lpModuleName, 4) == 0)
        lpModuleName += 4;

    // Next convert the LPCSTR to a unicode string for comparison and remove the extension (if found)
    mbstowcs(module, lpModuleName, sizeof(module) / sizeof(wchar_t));
    wchar_t *dot = wcsrchr(module, L'.');
    if (dot) *dot = L'\0';

    // Begin the lookup:
    // todo: implement a case-insensitive binary search, not much to be gained for the effort IMO as there's
    //          only 35 entries in the current version of Windows 7, but the option is there for performance nuts.
    for(unsigned long i = 0; i < pHeader->NumberOfEntries; ++i, ++pEntry)
    {
        // Check the top-level host map
        if (wcsnicmp(module, (const wchar_t*)MKPTR(pHeader, pEntry->Name), pEntry->NameLength) == 0)
        {
            pDescriptor = (API_SET_HOST_DESCRIPTOR*)MKPTR(pHeader, pEntry->HostDescriptor);
            // iterate backwards through the hosts to find the most important one (I think this is naive)
            for(unsigned long j = pDescriptor->NumberOfHosts; j > 0; --j)
            {
                if (pDescriptor->Hosts[j - 1].HostModuleNameLength)
                {
                    memcpy(module, (const void*)MKPTR(pHeader, pDescriptor->Hosts[j - 1].HostModuleName), pDescriptor->Hosts[j - 1].HostModuleNameLength);
                    module[pDescriptor->Hosts[j - 1].HostModuleNameLength / sizeof(wchar_t)] = L'\0';
                    return GetModuleHandleW(module); // All the modules should already be loaded, so use GetModuleHandle rather than LoadLibrary
                }
            }
        }
    }

    return NULL;
}

INT LookupExport(IMAGE_DOS_HEADER* pDosHd, DWORD* pNames, DWORD nNames, LPCSTR lpProcName)
{
    // Do a binary search on the name pointer table
    INT start = 0, 
        index = -1,
        middle = -1, 
        end = nNames - 1,
        cmp = 0;

    CHAR *pName;

    while (start <= end && index == -1)
    {
        middle = (start + end) >> 1;
        pName = (CHAR*)MKPTR(pDosHd, pNames[middle]);

        if ((cmp = strcmp(pName, lpProcName)) == 0)
            index = middle; 
        else if (cmp < 0)
            start = middle + 1;
        else
            end = middle;
    }

    return index;
}

FARPROC InternalGetProcAddress(HMODULE hModule, LPCSTR lpProcName)
{
    if (hModule == NULL)
        return NULL;

    BOOL ordinalSearch = HIWORD(lpProcName) == 0;
    WORD ordinal = 0;
    IMAGE_DOS_HEADER *pDosHd = (IMAGE_DOS_HEADER*)hModule;

    if (pDosHd->e_magic != IMAGE_DOS_SIGNATURE)
        return NULL;

    IMAGE_NT_HEADERS *pNtHd = (IMAGE_NT_HEADERS*)MKPTR(pDosHd, pDosHd->e_lfanew);
    if (pNtHd->Signature != IMAGE_NT_SIGNATURE)
        return NULL;

    IMAGE_DATA_DIRECTORY directory = pNtHd->OptionalHeader.DataDirectory[IMAGE_DIRECTORY_ENTRY_EXPORT];
    if (directory.Size == 0 || directory.VirtualAddress == 0)
        return NULL;

    IMAGE_EXPORT_DIRECTORY *pExports = (IMAGE_EXPORT_DIRECTORY*)MKPTR(pDosHd, directory.VirtualAddress);
    if (!ordinalSearch)
    {
        INT index = LookupExport(pDosHd, (DWORD*)MKPTR(pDosHd, pExports->AddressOfNames), pExports->NumberOfNames, lpProcName);
        if (index == -1)
            return NULL;
        ordinal = ((WORD*)MKPTR(pDosHd, pExports->AddressOfNameOrdinals))[index];
    }
    else
    {
        ordinal = LOWORD(lpProcName);
    }

    INT ordbase = pExports->Base - 1;
    DWORD dwAddress = ((DWORD*)MKPTR(pDosHd, pExports->AddressOfFunctions))[ordinal - ordbase];
    // Check whether forwarded:
    if (dwAddress >= directory.VirtualAddress && dwAddress < (directory.VirtualAddress + directory.Size))
    {
        CHAR pForward[256];
        strcpy(pForward, (CHAR*)MKPTR(pDosHd, dwAddress));
        CHAR *pFunction = strchr(pForward, '.');
        if (pFunction == NULL)
            return NULL;

        // break into seperate parts and recurse
        *pFunction++ = 0;
        // check if ordinal-forwarded
        if (*pFunction == '#')
            pFunction = (PSTR)(unsigned short)(atoi(++pFunction));

        HMODULE hDestination = LoadLibraryA(pForward);

        // detect an infinite loop, the forward declaration requests the same module handle with 
        // the same function lookup, this could be an Api Set (Windows7+)
        if (hDestination == hModule && (ordinalSearch ? LOWORD(pFunction) == LOWORD(lpProcName) : strcmp(pFunction, lpProcName) == 0))
            hDestination = ResolveImportMap(pForward); // ResolveImportMap will return NULL if not an API Set and so avoid infinite recursion

        return InternalGetProcAddress(hDestination, pFunction);
    }

    return (FARPROC)MKPTR(hModule, dwAddress);
} 
```

# jquery - 如何将动态 div id 传递给 highchart

> ID：14766025
> 
> 赞同：0
> 
> 时间：2013-02-08T05:05:54.427
> 
> 标签：jquery, html, jquery-ui, highcharts, highstock

我有使用 Jquery Ui 创建的动态选项卡。我想向由 Jquery ui 创建的 div 添加一个高图表。当我将此 id 传递给 Highchart 选项的“renderTo”时，它会显示错误 #13。我已经查找过它，根据它，Highcharts 找不到 Div。

所以有什么建议我可以解决这个问题..？

```
function miniG_help()
{

    $("#tab_container").tabs("add","#tabs-1","123");
         $( "#tab_container" ).tabs( "refresh" );
    plotGraph(url_temp,"#tabs-1");  
}

function plotGraph(url,divId)
{
..................
options.chart={renderTo: divId};
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:22:51.353

This error occurs because the div hasn't been written to the dom yet, and does not exist when you try to create the chart. Make sure your element is written to the page before creating the chart.

One suggestion would be to call the method to create the chart on load of the tabs. There is a "load" event you can tie this to ([http://api.jqueryui.com/tabs/#event-load](http://api.jqueryui.com/tabs/#event-load)):

```
$( ".selector" ).tabs({
    load: function( event, ui ) {
        //call method to create chart now
    }
}); 
```

# ruby-on-rails - 在 routes.rb 中为控制器创建功能添加哪些路由？

> ID：14766026
> 
> 赞同：0
> 
> 时间：2013-02-08T05:05:55.413
> 
> 标签：ruby-on-rails, routes, controllers

我的 chap_three_controller.rb 文件：

```
class ChapThreeController < ApplicationController
   def create
      @marker = Marker.new(params[:m])
      if @marker.save
         res={:success=>true,:content=>"<div><strong>found </strong>#{marker.found}
              </div><div><strong>left </strong>#{marker.left}</div>"}
      else
         res={:success=>false,:content=>"Could not save the marker"}
      end
      render :text=>res.to_json
   end
end 
```

我的 routes.rb 文件

```
match '/map3', :to => 'chap_three#map'
match '/map3/create', :to => 'chap_three#:action' 
```

我是否正确地将控制器中的创建功能与我的路线相匹配？因为它不工作..

这是我的 javascript 代码片段：

```
request.open('GET', 'create' + getVars, true);
 request.onreadystatechange = function() {
    if (request.readyState == 4) {
 //the request is complete
    var success=false;
    var content='Error contacting web service';
    try {
 //parse the result to JSON (simply by eval-ing it)
      res=eval( "(" + request.responseText + ")" );
      content=res.content;
      success=res.success;
    }catch (e){
       success=false;
     } 
```

我不断收到的错误是“联系网络服务时出错”。这意味着我的 request.responseText 不起作用，并且我的控制器中的 create 方法没有做任何事情......任何帮助都会很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:08:10.230

你希望你的比赛是：

```
match '/map3/create' => 'chap_three#create' 
```

`#`分别分隔控制器名称和动作名称，并且是`:to`不必要的，仅在定义`root`路由时使用。我建议阅读[Rails 路由指南](http://guides.rubyonrails.org/routing.html)

# asp.net-mvc - VS 2010 的实体数据模型向导关闭

> ID：14766028
> 
> 赞同：0
> 
> 时间：2013-02-08T05:05:59.783
> 
> 标签：asp.net-mvc, visual-studio-2010

我正在使用 VS 2010 ，当我想创建实体模型时，实体模型向导关闭时没有错误，当我从数据库中选择时......我不明白原因，也不知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:30:58.940

你在VS2010中安装过第三方插件吗？请尝试在安全模式下启动 VS2010 并再次测试该行为以避免任何第三方加载项的影响。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/ms241278.aspx](http://msdn.microsoft.com/en-us/library/ms241278.aspx)。

此外，当您创建一个新的实体数据模型时是否有任何问题？这是有关如何创建实体数据模型的教程， http: [//learnentityframework.com/LearnEntityFramework/tutorials/creating-an-ado-net-entity-framework-entity-data-model/](http://learnentityframework.com/LearnEntityFramework/tutorials/creating-an-ado-net-entity-framework-entity-data-model/)。

希望这有效。

# c - 边界检查和整数溢出

> ID：14766030
> 
> 赞同：1
> 
> 时间：2013-02-08T05:06:18.083
> 
> 标签：c

问题很简单：给定`start_index`和`count`，我想看看这些组合是否可以用来安全地访问带有`length`元素的数组。我暂时拥有的是以下内容：

```
uint32_t start_index = (value from somewhere);
uint32_t count = (value from somewhere);
uint32_t length = (value set earlier);
char *array = (memory allocated earlier);

if(start_index + count < length) {
    // access array starting at start_index
} else {
    // bailout
} 
```

当然，检查是不充分的，因为`start_index + count`它可能会超过 uint32_t 的最大可能值并环绕到一个较小的值。为了解决这个问题，我想知道将变量提升为 64 位或放入第二个条件是否更有效`start_index + count > start_index`。或者也许有其他一些聪明的方法来处理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T05:12:35.390

你可以通过做一些不同的事情来避免溢出：首先检查`count`小于`length`（否则退出），然后你可以安全地`start_index`比较`length - count`.

# jquery - 所有输入元素的 css 选择器，除了少数

> ID：14766033
> 
> 赞同：0
> 
> 时间：2013-02-08T05:06:31.047
> 
> 标签：jquery, jquery-selectors, css-selectors

我有一个包含 10 个输入元素的 HTML 表单，我想在每个输入元素的按键上调用一个函数，除了其中的 2 个

```
$(":input").live("keypress", function(e){ 
// something...
}); 
```

上面的选择器适用于所有输入元素。但我想从上面的代码中排除我的 2 个输入元素（按 id 或按类）。我该怎么做？css 选择器中是否有**排除/不功能？**

另一种方法是附加输入元素的 id 以包含在“keypress_”之类的东西中，然后使用

```
$("[id^=keypress_]").live("keypress", function(e){ 
// something...
}); 
```

但我不想更改 HTML id。这可以通过css选择器完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T05:09:01.850

您可以使用`:not`选择器或`.not`jQuery 方法。在这种情况下，两者的工作方式应该相同。

```
$(":input:not([id^=keypress_]")
$(":input").not("[id^=keypress_]") 
```

* * *

不要使用`.live`，因为它已在 jQuery 1.9 中删除。改为通过以下方式使用事件委托`.on`：

```
$(document).on('keypress', ':input:not([id^=keypress_])', function () { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:11:30.350

jQuery 中有一个`:not()`选择器，也有一个`.not()`方法。

这可能对您有用：

```
$(":input:not([id^=keypress_])") 
```

或这个：

```
$(":input").not("[id^=keypress_]") 
```

此链接可能包含更多信息。 [http://api.jquery.com/not-selector/](http://api.jquery.com/not-selector/)

# c - 函数参数，如 C 中的 printf

> ID：14766040
> 
> 赞同：6
> 
> 时间：2013-02-08T05:06:59.877
> 
> 标签：c, printf

我想实现一个`Myprintf()`接受参数的函数，例如`printf()`. 现在我这样做：

```
sprintf(demoString, "Num=%d String=%s", num, str);
Myprintf(demoString); 
```

我想将此函数调用替换为：

```
Myprintf("Num=%d String=%s", num, str); 
```

这怎么可能？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-08T05:17:58.357

```
#include <stdio.h>
#include <stdarg.h>

extern int Myprintf(const char *fmt, ...);

int Myprintf(const char *fmt, ...)
{
    char buffer[4096];
    va_list args;
    va_start(args, fmt);
    int rc = vsnprintf(buffer, sizeof(buffer), fmt, args);
    va_end(args);
    ...print the formatted buffer...
    return rc;
} 
```

从您的问题中不清楚输出是如何完成的；您现有的`Myprintf()`可能会在某处输出它，也许是`fprintf()`. 如果是这种情况，您可以改写：

```
int Myprintf(const char *fmt, ...)
{
    va_list args;
    va_start(args, fmt);
    int rc = vfprintf(debug_fp, fmt, args);
    va_end(args);
    return rc;
} 
```

如果您不想使用返回值，请将函数声明为`void`并且不要打扰变量`rc`。

这是“`printf()`覆盖功能”的一种相当常见的模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T05:09:21.383

您需要定义一个[带有可变参数的函数](https://stackoverflow.com/questions/205529/c-c-passing-variable-number-of-arguments-around)，并使用[vsprintf](http://www.cplusplus.com/reference/cstdio/vsprintf/)来构建字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T05:09:40.470

和它的`printf`亲戚在一个称为*可变参数函数*的函数家族中，并且在 C 标准库的头文件中有宏/函数[`<stddef.h>`](http://port70.net/~nsz/c/c11/n1570.html#7.16)来操作可变参数列表。查看 GNU 文档以获取示例：[How Variadic Functions are Defined and Used](http://www.gnu.org/software/libc/manual/html_node/How-Variadic.html#How-Variadic)。

# c# - 安装 Windows 服务时出现错误 1053

> ID：14766044
> 
> 赞同：2
> 
> 时间：2013-02-08T05:07:14.860
> 
> 标签：c#, service

我创建了一个演示服务。

1.  按原样构建项目（Service1 构造函数、OnStart、OnStop）
2.  添加了安装程序，更改了所需的属性。
3.  构建项目。
4.  打开命令提示符，运行“C:\Windows\Microsoft.NET\Framework\v4.0.30319\InstallUtil.exe”TestService.exe
5.  安装时出现以下错误

> C:\Users**>"C:\Windows\Microsoft.NET\Framework\v4.0.30319\InstallUt il.exe" "C:\Users**\Documents\Visual Studio 2010\Projects\TestService\TestService\bin \Debug\TestService.exe" Microsoft (R) .NET Framework 安装实用程序版本 > 版权所有 (c) Microsoft Corporation。版权所有。
> 
> 运行事务安装。
> 
> 开始安装的安装阶段。查看 C:\Users**\Documents\Visual Studio 2010\Projects\TestService\TestService\bin\Debug\TestService.exe 程序集进度的日志文件内容。该文件位于 C:\Users**\Documents\Visual Studio 2010\Projects\TestService\TestService\bin\Debug\TestService.InstallLog。安装程序集“C:\Users**\Documents\Visual Studio 2010\Projects\TestService\TestService\bin\Debug\TestService.exe”。受影响的参数是：logtoconsole = logfile = C:\Users**\Documents\Visual Studio 2010\Projects\TestS ervice\TestService\bin\Debug\TestService.InstallLog 程序集路径 = C:\Users**\Documents\Visual Studio 2010\ Projects\TestService\TestService\bin\Debug\TestService.exe 安装服务Service1...
> 
> 安装阶段发生异常。System.Security.SecurityException：找不到源，但无法搜索部分或全部事件日志。无法访问的日志：安全性。
> 
> 安装的回滚阶段即将开始。查看 C:\Users**\Documents\Visual Studio 2010\Projects\TestService\TestService\bin\Debug\TestService.exe 程序集进度的日志文件内容。该文件位于 C:\Users**\Documents\Visual Studio 2010\Projects\TestService\TestService\bin\Debug\TestService.InstallLog。回滚程序集“C:\Users**\Documents\Visual Studio 2010\Projects\TestService\TestService\bin\Debug\TestService.exe”。受影响的参数是：logtoconsole = logfile = C:\Users**\Documents\Visual Studio 2010\Projects\TestS ervice\TestService\bin\Debug\TestService.InstallLog 程序集路径 = C:\Users**\Documents\Visual Studio 2010\ Projects\ TestService\TestService\bin\Debug\TestService.exe 将事件日志恢复到源 Service1 的先前状态。System.Diagnostics.EventL ogInstaller 安装程序的回滚阶段发生异常。System.Security.SecurityException：找不到源，但无法搜索部分或全部事件日志。无法访问的日志：安全性。在安装的回滚阶段发生异常。这个 except ion 将被忽略，并且回滚将继续。但是，回滚完成后，机器可能不会完全恢复到其初始状态。这个 except ion 将被忽略，并且回滚将继续。但是，回滚完成后，机器可能不会完全恢复到其初始状态。这个 except ion 将被忽略，并且回滚将继续。但是，回滚完成后，机器可能不会完全恢复到其初始状态。
> 
> 回滚阶段成功完成。
> 
> 事务安装已完成。安装失败，已回滚。
> 
> 我尝试使用安装项目安装服务，但每次我尝试运行服务时都会出现**错误 1053**

# iphone - 如何创建 iOS 模拟器

> ID：14766046
> 
> 赞同：5
> 
> 时间：2013-02-08T05:07:38.087
> 
> 标签：iphone, ios, ipad, emulation

使用 Xcode，我们得到了一个模拟器（不是模拟器），它适合各种级别的测试，但最终您需要设备进行实际测试。我有兴趣为各种 iPhone、iPad 和不同的 iOS 版本创建模拟器。我的问题是，我们可以为 iOS 创建一个模拟器，如果可以的话，方法是什么。我是模拟器领域的新手，我是一名 iOS 开发人员，非常熟悉 Objective c 和 iOS sdk。我需要知道这需要哪些技能，以及如何进行。任何电子书，网站，都欢迎。我不是在寻找一个完美的答案，一个好的指导方针会起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:20:22.000

我不知道该怎么做，但我认为如果你需要这样做，你需要为处理器编译源`armv7`代码`armv7s`。

请检查这些链接，我在搜索[**iOS Emulator**](http://modmyi.com/content/5195-ios-emulator-underway-iemu-project.html)时发现，[**iOS Emulators**](http://devworks.thinkdigit.com/Mobiles-PDAs/iOS-emulators-are-here_9803.html)

# javascript - AngularJS问题模拟httpGET请求

> ID：14766051
> 
> 赞同：4
> 
> 时间：2013-02-08T05:08:01.700
> 
> 标签：javascript, unit-testing, angularjs

所以我是 angularjs 及其模拟库的新手。我正在尝试测试是否发出了特定的 GET 请求，但是对于第二个断言，我总是会收到此错误，并且无法弄清楚原因：

```
Error: Unsatisfied requests: GET /1.json 
```

我在下面的代码中有什么搞砸了吗？

应用程序.js

```
var App = angular.module('App', []).config(['$routeProvider', function($routeProvider) {
  $routeProvider.when('/', {
    templateUrl: 'views/main.html',
    controller: 'MainCtrl'
  }).when('/Items', {
    templateUrl: 'views/items.html',
    controller: 'Ctrl'
  }).otherwise({
    redirectTo: '/'
  });
}]); 
```

Ctrl.js

```
function Ctrl($scope, $http, $filter) {
  $scope.items = [];

  $http.get('/1.json').success(function(data) {$scope.items = data.items;});
}

Ctrl.$inject = ["$scope","$http", "$filter"]; 
```

规范/Ctrl.js

```
describe('Controller: Ctrl', function() {
  var $httpBackend;
  // load the controller's module
  beforeEach(module('App'));
  beforeEach(inject(function($injector) {
    $httpBackend = $injector.get('$httpBackend');

    // backend definition common for all tests
    $httpBackend.whenGET('/1.json').respond('Response!');
  }));

  afterEach(function() {
    $httpBackend.verifyNoOutstandingExpectation();
    $httpBackend.verifyNoOutstandingRequest();
  });

  var Ctrl, scope;

  // Initialize the controller and a mock scope
  beforeEach(inject(function($rootScope, $controller) {

    scope = $rootScope.$new();
    Ctrl = $controller('Ctrl', {
      $scope: scope
    });
  }));

  it('should initialize with 0 items', function() {
    expect(scope.items.length).toBe(0);
    $httpBackend.flush();
  });

  it('should make store request', function(){
    var controller = scope.$new(Ctrl);
    $httpBackend.expectGET('/1.json');
    $httpBackend.flush();
  });
}); 
```

**编辑**：添加应用程序和控制器代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T07:40:13.017

我终于让我的单元测试工作了！主要是因为我重组了我的应用程序以使其更有意义和更模块化。

我将尝试提供信息以帮助遇到此问题的下一个人：

首先是我改用 $resource 而不是 $http。

我没有注入 $injector，而是注入*了 $httpBackend*，如下所示：

```
beforeEach(inject(function(_$httpBackend_, $rootScope, $route,  $controller){

  $httpBackend = _$httpBackend_;
  $httpBackend.expectGET('/path/to/api').respond([{id:1}]); 
```

我没有将“Ctrl”作为字符串引用，而是传入了实际的类

`Ctrl = $controller('Ctrl', { $scope: scope });`

变成了

```
var ProductsCtrl = ['$scope', function($scope){ ... }];

Ctrl = $controller(ProductsCtrl, {
  $scope: scope
});` 
```

如果您使用 $resources，请确保您引用了 angular-resources.js 文件

我真的很喜欢 Angularjs；我认为只需要一些时间来思考如何测试。祝你好运！

# c++ - OpenGL/C++ 和 Maya 集成

> ID：14766058
> 
> 赞同：1
> 
> 时间：2013-02-08T05:08:37.170
> 
> 标签：c++, opengl, unity3d, maya

我想知道是否可以将您在 Maya 等软件中制作的模型导入您的 C++/OpenGL 代码中，以便您可以将这些模型用作游戏角色？

如果可能的话，我应该怎么做？

如果不可能，或者这不是人们通常创建 3d 游戏角色的方式，那么创建 3d 角色然后在 c++ 游戏程序中使用它们的标准或优选方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:57:09.173

这是很有可能的，也是常用的。您可以解析 Maya 可以导出的多种格式之一。例如，[在这里](http://en.wikibooks.org/wiki/OpenGL_Programming/Modern_OpenGL_Tutorial_Load_OBJ)您可以看到`obj`格式的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:32:21.017

是的，这是可能的，这就是我为自己用 C++/OpenGL 制作的游戏创建所有游戏模型的方式。您可以使用 Collada 等外部资源，但我只是使用 Maya C++ API 编写了自己的导出器，并为游戏应用程序编写了自己的导入器。这很容易做到。有关如何编写自己的导出器的更多信息，您可以[在此处](http://download.autodesk.com/global/docs/mayasdk2012/en_us/index.html)找到 Maya 的 API 手册。

# ruby-on-rails - NoMethodError undefined method '-@' NoMethodError 在控制器 Ruby on Rails

> ID：14766060
> 
> 赞同：4
> 
> 时间：2013-02-08T05:08:40.977
> 
> 标签：ruby-on-rails, controller, nomethoderror, unary-operator

**上下文：** 我从存储库中提取了最新的代码，并试图确保我将要推送的更改能够与该版本的代码一起使用。这是一个 Ruby on Rails 应用程序。另外值得注意的是，在运行我从网络上提取的主应用程序时，不会出现此错误。但是，如果我运行我的分支或克隆到我的环境中的主分支，我尝试的每个 url 都会出现错误。所以它在我的尽头。

**问题：** 当我转到 localhost:3000 时，我收到以下错误：

```
NoMethodError in HomeController#index
undefined method `-@' for #<ActionDispatch::Response:0x64fd460> 
```

**我尝试了什么：** 我在*#rubyonrails* IRC 频道上提出了我的问题，但没有人能够通过完整跟踪确定发生了什么（我没有在这里发布它，因为我不确定什么是最好的方法在此处执行此操作；在代码块或块引用中看起来不太好）。我查看了 HomeController 的 index 方法，它的定义如下：

```
 def index
      @groups = @current_user.groups
      @things = Thing.where(:group_id => @groups.map{|e|e.id})
    end 
```

我也用谷歌搜索过，还没有找到解决问题所需的东西。

**到目前为止我学到了什么：** -@ 是一个运算符。有些人可能会在假设 Ruby 有快捷方式时收到类似的错误

```
 variable = variable + 1 
```

许多其他语言都有：

```
 variable++ 
```

下面是这种情况的一个例子：[Undefined method `+@' for false:FalseClass (NoMethodError) ruby](https://stackoverflow.com/q/3548701/1480946)

**问题：** 有人对如何在这里找到问题有任何进一步的建议吗？另外，如果我可以轻松地将 Full Trace 放在这里，以美观的方式格式化，有人会告诉我怎么做吗？我对这个不知所措:(

**更新（2/8/2013）：** 似乎问题不一定存在于 HomeController 或 home/index.html.erb 视图中。我试图通过有效的操作访问任何 url，同样的错误发生在“NoMethodError in ...”更改为相应的 [...]Controller#index 时。

**更新（2013 年 2 月 9 日）：** 由于无论我尝试导航到哪个 url，都会发生此错误，因此我决定查看 config 文件夹中的 routes.rb 文件。这次我通过 ruby​​mine 而不是命令行运行我的服务器，这让我更容易阅读。我开始查看所有吐出的内容，并注意到一条感兴趣的行，其中包括：

```
["private-key looking thing"] [127.0.0.1] Started GET "/" for 127.0.0.1 at 2013-02-09 18:20:52 -0700 
```

routes.rb 中似乎存在语法错误（这是我目前最好的猜测）。这并不能解释为什么这只是在我的本地环境中使用相同代码集的问题，但我还需要解决什么问题？

在我筛选此文件时，是否有人有任何建议要注意的事项？就错误而言，不确定要寻找什么。Rubymines 检查东西将我所有的双引号都转换为单引号，并且真的没有什么可抱怨的。

在此先感谢，杰克史密斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:40:50.510

我猜这也可能是相应视图页面 Home/index.html.haml 中的语法错误。我怀疑变量调用前面有意外的“-”。我试图在我的 Rails 平台中模拟类似的场景，并在浏览器上查看以下页面

```
undefined method `-@' for false:FalseClass 
```

正确的代码行

```
%h1 All Movies
= "filtervalue=#{@isFilterOld}"
= "Sortvalue=#{@isSortOld}" 
```

编辑以模拟错误（观察 isFilterOld 变量前面的 - ）

```
 %h1 All Movies
    = "filtervalue=#{-@isFilterOld}"
    = "Sortvalue=#{@isSortOld}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-13T23:48:31.657

我已经解决了这个问题！

## 什么解决了它：

1.  转到您的 gem 所在的目录（对我来说是 C:\RailsInstaller\Ruby1.9.3\lib\ruby\gems\1.9.1）
2.  删除除捆绑器之外的所有宝石
3.  确保从 /cache/、/gems/ 和 /specifications/ 文件夹中删除 gem（我刚从 /gems/ 文件夹中删除了它们，并`bundle install`表示它仍然可以找到 gem）
4.  跑`bundle install`

## 进一步查询：

有人知道为什么会这样吗？我不知道此时我是否可以缩小导致问题的范围，因为该应用程序现在正在运行（我可以访问所有具有相应视图的 url）。如果问题再次出现，我将一一删除宝石以确定哪一个至少对我造成了问题。但是，如果有人对此有任何见解，我认为，除了我之外，还有更多的人会非常感谢更详细的答案。感谢所有迄今为止提供帮助的人！

# xna - 如何优化 A* (AStar) 搜索凹形？（包括截图）

> ID：14766061
> 
> 赞同：6
> 
> 时间：2013-02-08T05:08:43.300
> 
> 标签：xna, hierarchical-data, path-finding, a-star

我正在编写一个相当简单的自上而下的 2D 游戏。它对所有碰撞数据使用均匀分布的 2D 瓦片网格。网格中的每个图块要么是实心的，要么是空的。

对于寻路，我使用 A*（A 星），并尝试了曼哈顿和对角线（又名切比雪夫距离）启发式方法。

它在大多数情况下运行良好，但在尝试找到位于凹形（例如 U 形）凹槽中的目标时变得非常昂贵。

例如，在下图中，右边的人会找到左边的人。所有的草（绿色、深绿色和黄色）都是空的。唯一的实心瓷砖是棕色的“木”瓷砖和灰色的“石头”瓷砖，形成了一个侧面的“U”形。

![未解决的例子](../Images/5884f00ac5e8352329af12f167c40881.png)

现在这里是路径搜索的结果（在本例中为曼哈顿启发式的 A*）：

![解决的例子](../Images/65b3c17c1282d175efb5c5462a39d066.png)

红色和绿色的调试绘制方块显示在 A* 搜索期间访问了哪些图块。红色在“关闭”列表中，绿色在“开放”列表中（根据 A* 规范）。选择的最终路径中的蓝线（正确）。

如您所见，搜索相当详尽，访问了许多图块，创建了一个几乎完美的圆圈。

我理解*为什么*会发生这种情况，基于 A* 算法和我选择的启发式方法（当你沿着墙壁移动经过目标时，更远的瓷砖开始具有更好的 F 值，导致它们在返回正确之前被探索小路）。我不知道如何使它变得更好:)

关于可能的改进有什么建议吗？可能是不同的启发式方法？也许一起使用不同的路径搜索算法？

谢谢！

* * *

根据一些建议，我倾向于更新我的 A* 实现以包含[HPA*](http://webdocs.cs.ualberta.ca/~mmueller/ps/hpastar.pdf)中的改进。根据一些初步阅读，它似乎可以很好地解决上述情况，只要层次结构中的粒度适当。一旦我完成调查，我会更新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T06:19:29.043

您需要[打破与端点的联系](http://theory.stanford.edu/~amitp/GameProgramming/Heuristics.html#breaking-ties)。

![在不中断与端点的联系的情况下](../Images/a8146025c2c6ac3a3064d0b06bcbb850.png)
*（不打破对端点的联系）*

![与端点断绝关系](../Images/545ae3cf32a491fde9dde5ff46829432.png)
*（与端点断绝关系）*

![有障碍物的例子](../Images/e4426ea741f7191c8a1858a6df919ae0.png)
*（有障碍物的例子）*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-15T04:17:18.383

我最终使用了动态 HPA*。我在这里写了有关解决方案的详细信息：

[http://www.matthughson.com/2013/03/05/dynamic-hpa-part-1/](http://www.matthughson.com/2013/03/05/dynamic-hpa-part-1/)

# modernizr - 让 Modernizr.mq 在 IE 8 中工作

> ID：14766074
> 
> 赞同：1
> 
> 时间：2013-02-08T05:09:52.067
> 
> 标签：modernizr

我正在使用`Modernizr.mq`（[http://modernizr.com/docs/#mq](http://modernizr.com/docs/#mq)）在我的 JS 中运行检查，我的印象是[**Respond**](https://github.com/scottjehl/Respond) polyfill 可以`Modernizr.mq`在 IE 8 中工作，因为 IE 8 不支持媒体查询，但是情况并非如此，请参阅 IE 8 中的此测试页：http: [//goo.gl/ND9sA](http://goo.gl/ND9sA)，根据此 bg 应为橙色：

```
if (Modernizr.mq('screen and (min-width: 650px)')) {
     $('body').css('background', 'orange');
} 
```

那么**Respond**是否仅适用于 CSS 而不是 JS 中指定的媒体查询？我认为`Modernizr.mq`使用[**matchMedia**](http://caniuse.com/matchmedia)和**Respond**包括**matchMedia polyfill** [，](https://github.com/paulirish/matchMedia.js/)但仍然不起作用。

那么，您如何`Modernizr.mq`为 IE 8 工作，还是不能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T16:02:47.587

如果您加载 polyfill，Modernizr 不会更改其测试的值，因此如果浏览器不支持媒体查询，`Modernizr.mq()`则会返回`false`，并且添加 Respondjs polyfill 不会改变这一点。

对于那个很抱歉。

话虽如此，如果你已经加载了 polyfill，那么你已经在尽你所能来支持旧浏览器（Respondjs 支持 IE6/7/8），所以你可以用 Modernizr 标志实现更多的功能. , 从理论上讲，您不需要使用带有 polyfill 的 Modernizr 测试，因为所有浏览器都应该支持该功能。

# jquery - 如何清除jCanvas中一组图层中的单个图层

> ID：14766080
> 
> 赞同：1
> 
> 时间：2013-02-08T05:10:07.967
> 
> 标签：jquery, canvas, jcanvas

我正在使用最新版本的 jCanvas。我的画布上有两层。我有一个绘制这 2 层的函数。每次调用该函数时，我都想清除一层并保持另一层完好无损，因为我在后者上绘制了一条曲线。如何使用 jCanvas 清除单个图层？我在 jCanvas 的文档中找不到关于清除图层的任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:13:19.783

建议您使用**removeLayer()** API。这是[API 文档](http://calebevans.me/projects/jcanvas/docs/layers/#removing-layers)~~，请确保在调用 removeLayer() 之后注意有关调用 drawLayers() 的部分~~。

更新 2013-02-16：由于 jCanvas 版本[13.02.11](https://github.com/caleb531/jcanvas/commit/39fec4bf3ea68e602f2141b2ba511183e29d4412)，**drawLayers()**在用户调用**removeLayer()**后自动发生，因此用户不再需要显式 drawLayers() 调用。[此外，自 2013-02-13 提交以来，“测试](https://github.com/caleb531/jcanvas/tree/master/tests)”子目录中有单元测试代码演示了新功能。

# visual-studio-2012 - 无法将 Web Essentials 安装到 VS12

> ID：14766082
> 
> 赞同：16
> 
> 时间：2013-02-08T05:10:17.410
> 
> 标签：visual-studio-2012, web-essentials

我似乎无法安装 WebEssentials。我不断收到此错误，即使我获得了 VSIX 扩展的 VS 图标，并且在程序中更新了 VS12。

```
2013-02-07 21:59:15 - Microsoft VSIX Installer
2013-02-07 21:59:15 - -------------------------------------------
2013-02-07 21:59:15 - Initializing Install...
2013-02-07 21:59:16 - Extension Details...
2013-02-07 21:59:16 -   Identifier      : 5fb7364d-2e8c-44a4-95eb-2a382e30fec7
2013-02-07 21:59:16 -   Name            : Web Essentials 2012
2013-02-07 21:59:16 -   Author          : Mads Kristensen
2013-02-07 21:59:16 -   Version         : 2.4.5
2013-02-07 21:59:16 -   Description     : Adds many useful features to Visual Studio for web developers.
2013-02-07 21:59:16 -   Locale          : en-US
2013-02-07 21:59:16 -   MoreInfoURL     : http://vswebessentials.com/changelog
2013-02-07 21:59:16 -   InstalledByMSI  : False
2013-02-07 21:59:16 -   SupportedFrameworkVersionRange : 4.5
2013-02-07 21:59:16 - 
2013-02-07 21:59:16 -   Supported Products : 
2013-02-07 21:59:16 -       Microsoft.VisualStudio.Pro
2013-02-07 21:59:16 -           Version : 11.0
2013-02-07 21:59:16 - 
2013-02-07 21:59:16 -   References      : 
2013-02-07 21:59:16 -       -------------------------------------------------------
2013-02-07 21:59:16 -       Identifier   : Microsoft.VisualStudio.MPF.11.0
2013-02-07 21:59:16 -       Name         : Visual Studio MPF 11.0
2013-02-07 21:59:16 -       Version      : 11.0
2013-02-07 21:59:16 -       MoreInfoURL  : 
2013-02-07 21:59:16 -       Nested       : No
2013-02-07 21:59:16 - 
2013-02-07 21:59:16 - 
2013-02-07 21:59:16 - Searching for applicable products...
2013-02-07 21:59:16 - Found installed product - Microsoft Visual Studio Express 2012 for Web
2013-02-07 21:59:16 - Found installed product - Global Location
2013-02-07 21:59:16 - VSIXInstaller.NoApplicableSKUsException: This extension is not installable on any currently installed products.
   at VSIXInstaller.App.InitializeInstall()
   at System.Threading.Tasks.Task.InnerInvoke()
   at System.Threading.Tasks.Task.Execute() 
```

我能想到的唯一曲线球是我没有使用自定义文件夹来安装 VS12。TIA

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-08T21:56:47.717

不幸的是 VS Web Express 不允许安装 3rd 方扩展。因此它仅适用于 VS Pro、Premium 和 Ultimate

# ibatis - iBATIS - 自动生成的密钥异常

> ID：14766084
> 
> 赞同：0
> 
> 时间：2013-02-08T05:10:26.370
> 
> 标签：ibatis, mybatis

我正在使用 IBATIS 2.3.4 版本。数据库是 MS SQL Server。

我正在尝试在表 T_PROFILE 中插入记录，该表具有 Identity 主列自动生成的值。

我的 IBATIS 配置是

```
<insert id="insertProfile" parameterClass="profileDO" useGeneratedKeys="true" keyProperty="profileId">
        INSERT INTO T_PROFILE (E_ID,PROFILE_NAME,DEFAULT_PROFILE)
        VALUES(#eId#, #profileName#, #isDefaultProfile#)

        <selectKey resultClass="java.lang.Long" keyProperty="profileId" >
            SELECT @@IDENTITY AS profileId
        </selectKey>
    </insert> 
```

它给出了错误

```
Caused by: com.ibatis.common.xml.NodeletException: Error parsing XML.  Cause: org.xml.sax.SAXParseException: Attribute "useGeneratedKeys" must be declared for element type "settings".
    at com.ibatis.common.xml.NodeletParser.parse(NodeletParser.java:62)
    at com.ibatis.sqlmap.engine.builder.xml.SqlMapConfigParser.parse(SqlMapConfigParser.java:62)
    at com.ibatis.sqlmap.engine.builder.xml.SqlMapConfigParser.parse(SqlMapConfigParser.java:55)
    at org.springframework.orm.ibatis.SqlMapClientFactoryBean.buildSqlMapClient(SqlMapClientFactoryBean.java:339)
    ... 160 more
Caused by: org.xml.sax.SAXParseException: Attribute "useGeneratedKeys" must be declared for element type "settings". 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:57:21.947

如果您在数据库中设置了标识列，则以下查询本身将起作用。不需要 useGeneratedKeys。

```
 <insert id="insertProfile" parameterClass="profileDO" >
    INSERT INTO T_PROFILE (E_ID,PROFILE_NAME,DEFAULT_PROFILE)
    VALUES(#eId#, #profileName#, #isDefaultProfile#)

    <selectKey resultClass="long" keyProperty="profileId" >
        SELECT @@IDENTITY AS profileId
    </selectKey>
</insert> 
```

# python - Python 标准输入，readlines。改变输出顺序

> ID：14766085
> 
> 赞同：0
> 
> 时间：2013-02-08T05:10:27.727
> 
> 标签：python, string, for-loop, stdin, readlines

我在 Mac 上工作，有一个关于 python 的问题。我正在使用一个名为 rectangle.txt 的 .txt 文件，在文件中它看起来像这样：

```
abcde
fghij
klmno 
```

我需要在使用标准输入时阅读这些内容。但这就是我需要我的程序：

```
afk
bgl
chm
din
ejo 
```

到目前为止，我有一个程序可以读取所有行并将它们拆分并打印出来。 **代码编辑**

```
So when I changed my code to this:

for line in sys.stdin.readline():
    ls1 = line
    print ls1 
```

我收到了清单：

```
a
b
c
d
e 
```

所以现在我只需要遍历其他那些，但我无法弄清楚

我从命令行运行这个函数：

```
python rectangle.py < rectangle.txt 
```

我正在努力学习所有这些，所以我不想给我答案，而是希望有人帮助向我解释这一点，希望我能理解。

此外，除了这个 .txt 文件输入。我的程序也将使用这些输入进行测试：

```
123
456
789 
```

和

```
A
B
C 
```

所有人都在做与上面相同的事情。再次感谢您帮助我。我已经为此工作了几个小时，似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:15:51.020

值得信赖的`zip`功能来帮助：

```
>>> lines = ["abc", "def", "ghi"]
>>> result = [''.join(x) for x in zip(*lines)]
>>> result
['adg', 'beh', 'cfi'] 
```

说明：[zip](http://docs.python.org/3.1/library/functions.html#zip)完全符合您的期望 - 将每个给定可迭代的元素聚合到一个新列表中。我们必须单独传递 zip 迭代，而不是作为[列表`*lines`传递](http://docs.python.org/release/3.2/tutorial/controlflow.html#unpacking-argument-lists)。最后，我们只是将单个字符数组连接在一起，因为我们想要一个字符串数组而不是字符数组的数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:31:04.790

我假设每行中的输入必须是相同的长度。

在这种情况下，有一个输入字符串列表和这些字符串循环之一的长度。

["abcde", "fghij", "kilmn"] 从这里你注意到每个字符串的第一个字符的模式是什么？“a”+“f”+“k”。

# c# - 如何从c#中的dob计算年龄

> ID：14766086
> 
> 赞同：14
> 
> 时间：2013-02-08T05:10:54.190
> 
> 标签：c#, asp.net, date

```
 private void button1_Click(object sender, EventArgs e)
    {
        DateTime dob = new DateTime();
        textBox1.Text = dob.ToString();
        int age;
        age = Convert.ToInt32(textbox2.Text);
        age = DateTime.Now.Year - dob.Year;
        if (DateTime.Now.DayOfYear < dob.DayOfYear)
            age = age - 1;

    } 
```

如何从 dob 计算年龄。这是我的 form1.cs。请有任何想法

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-10-10T09:44:51.237

```
DateTime today = DateTime.Today;

int age = today.Year - bday.Year;

if (bday > today.AddYears(-age))
 age--; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-08T05:20:24.433

您可以使用 TimeSpan 来计算它，例如：

```
DateTime dob = .....
DateTime Today = DateTime.Now;
TimeSpan ts = Today - dob;
DateTime Age = DateTime.MinValue + ts;

// note: MinValue is 1/1/1 so we have to subtract...
int Years = Age.Year - 1;
int Months = Age.Month - 1;
int Days = Age.Day - 1; 
```

来源：[http ://forums.asp.net/t/1289294.aspx/1](http://forums.asp.net/t/1289294.aspx/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T05:12:23.357

**[更新]：**考虑闰年使用[365.242 而不是 365](https://www.google.co.in/webhp?sourceid=chrome-instant&ion=1&espv=2&ie=UTF-8#q=days%20in%20a%20year&qscrl=1)。我相信你应该会好[到 2799 年](http://en.wikipedia.org/wiki/Leap_year#Algorithm)。

DateTime 有一个运算符重载，当您使用减法运算符时，您会得到一个[TimeSpan](http://msdn.microsoft.com/en-us/library/system.timespan.aspx)实例。

所以你会这样做：

```
DateTime dob = ..
TimeSpan tm = DateTime.Now - dob;
int years = ((tm.Days)/365); 
```

理想情况下，您的代码应如下所示：

```
private void button1_Click(object sender, EventArgs e)
{
    DateTime dob = //get this some somewhere..
    textBox1.Text = dob.ToString();
    TimeSpan tm = (DateTime.Now - dob);
    int age = (tm.Days/365) ;
} 
```

TimeSpan 结构表示一个时间间隔，它具有、等属性`Days`，因此您可以在需要时使用它们。`Hours``Seconds`

# dojo - 更改 FilteringSelect 的内容

> ID：14766087
> 
> 赞同：1
> 
> 时间：2013-02-08T05:10:58.663
> 
> 标签：dojo

我正在尝试更改`FilteringSelect`小部件的内容。我似乎一直遇到这个错误：

```
Uncaught TypeError: Cannot call method 'toString' of undefined 
```

我尝试将 更改`store`为使用 a `MemoryStore`，我尝试克隆数据并使用`setData(data)`.

我试过`store.put(newItem)`用我的新项目打电话。这似乎在我第一次做事时起作用，但在连续更改时，我通常会以`toString`-error 告终。

```
<select dojoType="dijit.form.FilteringSelect" id="wellsSelectCombo" onChange="selectWell(this.value);" searchAttr="label">
    <option value="Select well(s) on map..."></option> 
```

```
var item = {
        label: label,
        id: "feature_content_pane_" + i,            
        index: i
    }; var wellsSelectCombo = dijit.byId('wellsSelectCombo');
wellsSelectCombo.store.put(item); 
```

# android - Android AutoCompleteTextView 意外行为

> ID：14766092
> 
> 赞同：0
> 
> 时间：2013-02-08T05:11:17.430
> 
> 标签：android

我在我的应用程序中使用 AutoCompleteTextView，但它意外地工作。自动完成列表显示列表中不需要的文本，但当我选择此文本并从自动完成文本视图中移除焦点时，它会将正确的文本设置为自动完成文本字段。另一个问题是我想在 autocompletetext 字段中获取所选文本的 id，当我在 autocompletetextview 的自定义适配器中填充列表时，我正在关联这个 id。这是我正在使用的代码。

```
autoComMarker = (AutoCompleteTextView) findViewById(R.id.auto_rainfall_of_markaz_id);
autoComMarker.setThreshold(1);
CustomMarkazAdapter adapter = new CustomMarkazAdapter(getBaseContext(),     R.layout.custom_auto_com_listview, marqazList);
autoComMarker.setAdapter(adapter);

autoComMarker.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> arg0, View view,
                int position, long arg3) {
            autoComMarker.setTag(view.getTag());
            Log.e("Markaz list", ""+view.getTag());
        }
    }); 
```

这是 CustomMarkazAdapter 的代码：

```
public class CustomMarkazAdapter extends ArrayAdapter<Markaz>{

private ArrayList<Markaz> items;
private Context CurrentContext;
private Markaz CurrentItem;

public CustomMarkazAdapter(Context context, int textViewResourceId,
        ArrayList<Markaz> objects) {
    super(context, textViewResourceId, objects);

    items =  objects;
    CurrentContext = context;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

     if ((items == null) || ((position + 1) > items.size()))
        return convertView; //Can't extract item

   CurrentItem = (Markaz)items.get(position);    

    LayoutInflater vi = (LayoutInflater)CurrentContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    convertView = vi.inflate(R.layout.custom_auto_com_listview, null);      
    TextView text = (TextView) convertView.findViewById(R.id.custom_auto_com_text);

    text.setText(CurrentItem.getMarkazName());
    convertView.setTag(CurrentItem.getMarkazID());
    Log.e(CurrentItem.getMarkazName(),""+CurrentItem.getMarkazID());
    return convertView;
} 
```

}

我在这里设置的markazID 不是我正在寻找的，它根据autocompletelistview 项目位置设置markaz id。我不需要我需要与markazList 一起传递的markaz id。请帮助我，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:28:27.943

试试这个。

```
 autoComMarker.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> arg0, View view,
                    int position, long arg3) {
               Markaz items= adapter.getItem(position);
               //Now you can get items of Markaz from items.get...
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:32:39.453

您必须`position`在`listview`. 执行以下操作`autoComMarker.setOnItemClickListener()`：

```
 Markaz items= adapter.getItem(position); 
```

# php - 使用filezilla从服务器下载时出现php文件问题

> ID：14766096
> 
> 赞同：0
> 
> 时间：2013-02-08T05:11:31.440
> 
> 标签：php, download, editing, filezilla

我在notepad++中创建了一个php页面（正确缩进），有1000多行，并通过FileZilla上传到服务器，代码在服务器上运行良好，但是当我下载代码进行编辑时，它显示整行合并为一行并且看起来很乏味编辑所需的代码。任何帮助都是非常可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:30:43.587

Windows 换行符 ( `carriage return`+ `line feed`) 可能会转换为 Unix 样式 ( `line feed`)。您可以使用类似[unix2dos](http://www.thefreecountry.com/tofrodos/)的东西将它们转换回来。[您可以在Wikipedia](http://en.wikipedia.org/wiki/Newline)上阅读有关不同操作系统如何处理新行的更多信息。

做更多的研究表明，如果您使用 FileZilla 使用二进制格式上传和下载文件，它不会进行转换。因此，要么在上传时使用二进制文件以保留 Windows 格式，要么将其关闭以下载回您的计算机，以使其将 Unix 换行符转换为 Windows。查看[Filezilla 维基](http://wiki.filezilla-project.org/Data_Type)

# java - Java Process Builder 重定向输出在 Eclipse 中工作，而不是作为 jar

> ID：14766099
> 
> 赞同：1
> 
> 时间：2013-02-08T05:12:12.887
> 
> 标签：java, process, stdout, processbuilder

我正在使用流程构建器来启动新的主类。我这样做`builder.inheritIO();`了，它在 Eclipse 中工作（stdout 和 stderr 重定向到单个控制台）。但是，当我导出 jar 时，输出不会重定向（仅显示原始进程输出）。我在 Java 7 上。有什么我应该看的想法吗？

一些代码：

```
ProcessBuilder builder = new ProcessBuilder(arr);
//builder.redirectOutput();
//builder.redirectError();
//builder.redirectOutput(ProcessBuilder.Redirect.INHERIT);
// those don't work either
builder.inheritIO();
Process p = builder.start(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-03T17:53:02.800

这似乎是windows下java中的一个bug。将在 java8 中修复。

[https://bugs.openjdk.java.net/browse/JDK-8023130](https://bugs.openjdk.java.net/browse/JDK-8023130)。

您可以使用旧方式并重定向流手册。

```
ProcessBuilder builder = new ProcessBuilder("...");

Process p = builder.start();

p.getOutputStream();
p.getInputStream();
p.getInputStream(); 
```

# sql - 如何将 SQL Server 查询逻辑合并到一个案例中？

> ID：14766100
> 
> 赞同：1
> 
> 时间：2013-02-08T05:12:15.253
> 
> 标签：sql, sql-server, tsql

我在 SQL Server 2005 上运行了一个 T-SQL 查询，我在其中定义了一个要返回给应用程序的数据表。

我使用几个case语句分配了几个值，每个case语句都有相同的逻辑。

我想知道是否有一种方法可以提高效率而不是多次执行相同的逻辑？我已经简化了这里的逻辑，但希望足以说明这一点。有没有一种方法我不必使用相同的“pt.PTYP_Category IN (90, 92, 94, 96, 98)”逻辑来定义三个案例语句？

```
`INSERT INTO @MemberAccountingDetail
    (
     MACD_DPST_FEES_RowID,
     MACD_HighOrderSort,
     MACD_CategorySortDate, 
     MACD_MemberName
     )  
 SELECT 
   d.DPST_ID As MACD_DPST_FEES_RowID,
   CASE
         WHEN  pt.PTYP_Category IN (90, 92, 94, 96, 98) 
             THEN 0
         ELSE     1
     END As MACD_HighOrderSort,
   CASE
         WHEN  pt.PTYP_Category IN (90, 92, 94, 96, 98) 
             THEN DATEADD(ss, 1, d.DPST_TransactionDate)
         ELSE     @DefaultDate
     END As MACD_CategorySortDate,
   CASE
         WHEN  pt.PTYP_Category IN (90, 92, 94, 96, 98) 
             THEN pt.PTYP_CategoryDesc
         ELSE     SUBSTRING(ISNULL(d.DPST_OriginUserID, ''), 1, 11)
     END As MACD_MemberName
 FROM
     Deposit d
        INNER JOIN PaymentType pt
           ON pt.PTYP_ID = d.DPST_PTYP_ID
 WHERE 
     d.DPST_MEMB_ID = @MEMB_ID; 
```

谢谢你，吉姆`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:26:53.050

您可以使用公用表表达式，因此您只需编写一次“IN STATEMENT”：

```
INSERT INTO @MemberAccountingDetail
(
    MACD_DPST_FEES_RowID,
    MACD_HighOrderSort,
    MACD_CategorySortDate, 
    MACD_MemberName
)
WITH CTE (PTYP_ID, IsInCollection)
AS
(
    SELECT pt.PTYP_ID, CASE WHEN  pt.PTYP_Category IN (90, 92, 94, 96, 98) THEN 0 ELSE 1 END AS IsInCollection
    FROM PaymentType pt
)
SELECT 
    d.DPST_ID As MACD_DPST_FEES_RowID,
    CTE.IsInCollection As MACD_HighOrderSort,
    CASE WHEN CTE.IsInCollection = 1 
        THEN DATEADD(ss, 1, d.DPST_TransactionDate)
        ELSE     @DefaultDate
    END As MACD_CategorySortDate,
    CASE WHEN CTE.IsInCollection = 1
        THEN pt.PTYP_CategoryDesc
        ELSE SUBSTRING(ISNULL(d.DPST_OriginUserID, ''), 1, 11)
    END As MACD_MemberName
FROM Deposit d
INNER JOIN CTE 
  ON CTE.PTYP_ID = d.DPST_PTYP_ID
INNER JOIN PaymentType pt
  ON pt.PTYP_ID = d.DPST_PTYP_ID
WHERE d.DPST_MEMB_ID = @MEMB_ID; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:45:57.410

您可以在表中创建一个计算列，将这 5 个类别汇总为一个代码，然后使用它。

这意味着您不必再对幻数进行硬编码。但是你仍然需要四个不同的 case 语句。这是其中任何试图“聪明”地解决它只会让它变得更加复杂的事情之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T05:35:47.017

您可以尝试使用 UNION 进行两个单独的选择，但我不确定它会更快：

```
INSERT INTO @MemberAccountingDetail
    (
     MACD_DPST_FEES_RowID,
     MACD_HighOrderSort,
     MACD_CategorySortDate, 
     MACD_MemberName
     )  

 SELECT 
   d.DPST_ID As MACD_DPST_FEES_RowID,
   0 As MACD_HighOrderSort,
   DATEADD(ss, 1, d.DPST_TransactionDate) As MACD_CategorySortDate,
   pt.PTYP_CategoryDesc As MACD_MemberName
 FROM
     Deposit d
        INNER JOIN PaymentType pt
           ON pt.PTYP_ID = d.DPST_PTYP_ID
 WHERE 
     d.DPST_MEMB_ID = @MEMB_ID and pt.PTYP_Category IN (90, 92, 94, 96, 98)
 UNION ALL
 SELECT 
   d.DPST_ID As MACD_DPST_FEES_RowID,
   1 As MACD_HighOrderSort,
   @DefaultDate As MACD_CategorySortDate,
   SUBSTRING(ISNULL(d.DPST_OriginUserID, ''), 1, 11) as MACD_MemberName
 FROM
     Deposit d
        INNER JOIN PaymentType pt
           ON pt.PTYP_ID = d.DPST_PTYP_ID
 WHERE 
     d.DPST_MEMB_ID = @MEMB_ID and pt.PTYP_Category NOT IN (90, 92, 94, 96, 98) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T12:50:36.603

CROSS APPLY 的另一种选择

```
 INSERT INTO @MemberAccountingDetail
    (
     MACD_DPST_FEES_RowID,
     MACD_HighOrderSort,
     MACD_CategorySortDate, 
     MACD_MemberName
     )  
 SELECT 
   d.DPST_ID As MACD_DPST_FEES_RowID,
   CASE WHEN o.IsMatch = 1 THEN 0 
        ELSE 1 END As MACD_HighOrderSort,
   CASE WHEN o.IsMatch = 1 THEN DATEADD(ss, 1, d.DPST_TransactionDate) 
        ELSE @DefaultDate END As MACD_CategorySortDate,
   CASE WHEN o.IsMatch = 1 THEN pt.PTYP_CategoryDesc 
        ELSE SUBSTRING(ISNULL(d.DPST_OriginUserID, ''), 1, 11) END As MACD_MemberName
 FROM Deposit d INNER JOIN PaymentType pt ON pt.PTYP_ID = d.DPST_PTYP_ID
                CROSS APPLY (SELECT CASE WHEN pt.PTYP_Category IN (90, 92, 94, 96, 98) THEN 1 END AS IsMatch) o
 WHERE d.DPST_MEMB_ID = @MEMB_ID; 
```

# javascript - 发送多个 HTML 表单通过带有 AJAX 的 POST 请求框？我有一个带有多个选择框的 html 表单。我不知道如何通过发布请求使用 AJAX 将值发送到我的 php 应用程序。如果我使用 GET 请求并使用单个选择框，但当我使用多个选择框时，它工作得很好。这个想法是让用户保持控制（或使用 mac 的命令）并选择一个或多个类别。根据选择的类别将确定使用 AJAX 将显示哪些其他表单选项。选择框如下所示： Edit: SOLVED <select multiple="" name="ca</h1>
<blockquote>
        <p>ID：14766103</p>
        <p>赞同：2</p>
        <p>时间：2013-02-08T05:12:28.643</p>
        <p>标签：javascript, html, ajax, arrays, forms</p>
        </blockquote>

            <hr/>
            <h2>回答 #1</h2>
            <blockquote>
            <p>赞同：7</p>
            <p>时间：2013-02-08T05:29:51.403</p>
            </blockquote>

<p>您必须自己生成要在 POST 中发送的查询字符串。这是要使用的 HTML 标记：</p>

<pre>和 Javascript 函数： function sendCategories(sel){ var xmlhttp; if (window.XMLHttpRequest) { xmlhttp = new XMLHttpRequest(); } else { xmlhttp = new ActiveXObject("Microsoft.XMLHTTP"); } xmlhttp.onreadystatechange = function () { if (xmlhttp.readyState === 4 && xmlhttp.status === 200) { document.getElementById("my_div").innerHTML = xmlhttp.responseText; } }; xmlhttp.open("POST","http://www.mysite.com/update_categories.php",true); xmlhttp.setRequestHeader("Content-Type", "application/x-www-form-urlencoded"); var values = [], i, j, cur; for (i = 0, j = sel.options.length; i < j; i++) { cur = sel.options[i]; if (cur.selected) { values.push(encodeURIComponent(cur.value)); } } if (values.length) { values = encodeURIComponent(sel.name) + "=" + values.join("&" + encodeURIComponent(sel.name) + "="); } else { values = null; } xmlhttp.send(values); } 请注意，我将事件从 更改onclick为onchange，但这取决于您是否希望在单击元素时运行此函数，或者它的值确实发生了变化......它可以减少一些不必要的调用。 这应该生成一个查询字符串，该查询字符串通常用于为<select>选择了多个选项的 a 发送值。 这是一个 jsFiddle，它演示了如何在此处生成查询字符串：http: //jsfiddle.net/kKWQM/ 回答 #2 赞同：2 时间：2013-02-08T05:20:47.493 你可以做这样的事情， <select multiple name="categories[]" onclick="sendCategories(this)"> 并使用 JQuery 制作 AJAX， function sendCategories(sel){ var values = $(select).serialize(); console.log (values); // See if you get the serialized data in console. $.ajax({ type: 'POST', url: "http://www.mysite.com/update_categories.php" data: values, success: function (data) { document.getElementById("my_div").innerHTML = data; } }); } 仅供参考，不推荐使用 Netscape 事件绑定模型，您可以像这样使用跨浏览器事件绑定 回答 #3 赞同：1 时间：2015-06-10T01:10:48.893 您可以使用 JS 字符串和数组函数来实现该解决方案。实际上，您需要发送到 Apache 的字符串应该包含如下模式： xxx[]=a&xxx[]=b&xxx[]=c 其中 SELECT 元素的名称xxx[]在您的表单中，a、b 和 c 是用户选择的三个值。 所以是的，您重复键名的次数与用户在 SELECT 中选择的不同选项一样多。 在 JS 中，您可以使用一组选定的选项： selected_options.join("&xxx[]=") to produce that pattern. 回答 #4 赞同：0 时间：2013-02-08T05:28:12.597 jQuery 应该让你更容易做到这一点。在包装的选择上调用 .val() 会返回一个包含所选值的数组。您只需将这些发布到服务器： HTML： <html> <body> <form> <select name="mySelect" multiple="on"> <option value="1">Uno</option> <option value="2">Dos</option> <option value="3">Tres</option> </select> </form> <input id="submitButton" type="button" value="Click To Submit"/> </body> </html> JavaScript： $(function() { $('#submitButton').click(function() { var valuesArray = $('select[name=mySelect]').val() $.ajax({ type: 'POST', url: '/path/to/php', // your php url would go here data: { mySelect: valuesArray } }).done(function(msg) { // parse response from msg }); }); });<code><select multiple name=" categories[]"="" onchange="sendCategories(this);" &gt;="" <="" code=""></select>

# ember.js - 模型可以与 EmberJS 中的相同模型类型有关系吗

> ID：14766106
> 
> 赞同：1
> 
> 时间：2013-02-08T05:12:48.273
> 
> 标签：ember.js

我刚开始使用 EmberJS 并尝试定义导航结构。

我想要一个也有子页面的页面对象。我将如何在数据结构中关联它们？

这是我到目前为止所拥有的：

```
 App.Page = DS.Model.extend({
        title:          attr('string',                      { defaultValue:''}),
        url:            attr('string',                      { defaultValue:''}),
        defaultPage:    attr('boolean',                     { defaultValue:false}),
        parentPage:     attr('string',                      { defaultValue:''}),
        children:       attr('string',                      { defaultValue:''}),
        position:       attr('string',                      { defaultValue:'left'}),

        getChildren:function(){
            return App.NavigationController.filterProperty('parentPage',this.get('title'));
        }
    }); 
```

到目前为止，这是我使用它的方式：

```
 this.pushObject(App.Page.createRecord({
            title:          "Page",
            url:            "/page"
        }));

        this.pushObject(App.Page.createRecord({
            title:          "Child of Page",
            url:            "/child_of_page",
            parentPage:     "Page"
        })); 
```

任何指针？

**编辑示例：**

我正在尝试您的建议，但收到以下信息：

```
pPg = App.Page.createRecord({title:'Page1'});

pPg.get('childen').pushObject(App.Page.createRecord({title:'cPage1', parentPage:pPg}));
// output TypeError: Cannot call method 'pushObject' of undefined

var cPg1 = App.Page.createRecord({title:'cPage1', parentPage:pPg});
var cPg2 = App.Page.createRecord({title:'cPage2', parentPage:pPg});

pPg.get('children').objectAt(0);
// outputs undefined
pPg.get('children').objectAt(1);
// outputs undefined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T14:06:03.933

我认为，就像您与其他模型有关：使用`belongsTo`and `hasMany`：

```
App.Page = DS.Model.extend({
    title:          attr('string',                      { defaultValue:''}),
    url:            attr('string',                      { defaultValue:''}),
    defaultPage:    attr('boolean',                     { defaultValue:false}),
    parentPage:     DS.belongsTo('App.Page'),
    children:       DS.hasMany('App.Page'),
    position:       attr('string',                      { defaultValue:'left'})
}); 
```

不再需要该`getChildren`方法，您只需使用`children`and`parentPage`属性：

```
var parentPage = App.Page.createRecord({
    title:          "Page",
    url:            "/page"
});
parentPage.get('children').pushObject(App.Page.createRecord({
    title:          "Child of Page",
    url:            "/child_of_page"
}));

var anotherChild = App.Page.createRecord({
    title:          "Child of Page",
    url:            "/child_of_page",
    parentPage:     parentPage
}); 
```

这将创建一个`Page`有 2 个孩子的对象。

创建对象时有两种定义关系的方法 - 要么告诉父母关于孩子的事情，要么告诉孩子关于父母的事情，不需要告诉两者 - ember 将同步关系。**这仅适用于您定义不同模型之间的关系！**

### 编辑

使用`get`with`objectAt`访问*hasMany*关系：

*   `parentObj.get('children')`- 得到所有的孩子。请注意，这不是一个常规的 JS 数组，而是一个`Ember.Array`因此没有`[ ]`运算符。
*   `parentObj.get('children').objectAt(1)`- 获得特定的孩子。

### 编辑 2

当您处理与同一模型的关系时，您需要告诉父母和孩子他们的关系：

```
var parent = App.Page.createRecord({
    title:          "Page",
    url:            "/page"
});
parent.get('children').pushObject(App.Page.createRecord({
    title:      "Child of Page",
    url:        "/child_of_page",
    parentPage: parent
})); 
```

请参阅[this fiddle](http://jsfiddle.net/crUFE/12/) with working example。

# python - Pythonic 方式来检索区分大小写的路径？

> ID：14766107
> 
> 赞同：4
> 
> 时间：2013-02-08T05:12:53.550
> 
> 标签：python, linux, windows, path, directory

我想知道是否有更快的方法来实现在 python 中返回区分大小写路径的函数。我想出的解决方案之一适用于 linux 和 windows，但需要我迭代 os.listdir，这可能很慢。

此解决方案适用于不需要足够速度的应用程序和上下文：

```
def correctPath(start, path):
    'Returns a unix-type case-sensitive path, works in windows and linux'
    start = unicode(start);
    path = unicode(path);
    b = '';
    if path[-1] == '/':
        path = path[:-1];
    parts = path.split('\\');
    d = start;
    c = 0;
    for p in parts:
        listing = os.listdir(d);
        _ = None;
        for l in listing:
            if p.lower() == l.lower():
                if p != l:
                    c += 1;
                d = os.path.join(d, l);
                _ = os.path.join(b, l);
                break;
        if not _:
            return None;
        b = _;

    return b, c; #(corrected path, number of corrections)

>>> correctPath('C:\\Windows', 'SYSTEM32\\CmD.EXe')
(u'System32\\cmd.exe', 2) 
```

但是，当上下文从 50,000 多个条目的大型数据库中收集文件名时，这将不会那么快。

一种方法是为每个目录创建一个字典树。将字典树与路径的目录部分匹配，如果发生键未命中，执行 os.listdir 为新目录查找并创建一个字典条目，并删除未使用的部分或保留变量计数器作为一种方法为每个目录分配一个“生命周期”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-13T23:45:26.213

以下是对您自己的代码的轻微重写，并进行了三处修改：在匹配之前检查文件名是否已经正确，在测试之前将列表处理为小写，使用索引查找相关的“真实大小写”文件。

```
def corrected_path(start, path):
    '''Returns a unix-type case-sensitive path, works in windows and linux'''
    start = unicode(start)
    path = unicode(path)
    corrected_path = ''
    if path[-1] == '/':
        path = path[:-1]
    parts = path.split('\\')
    cd = start
    corrections_count = 0

    for p in parts:
        if not os.path.exists(os.path.join(cd,p)): # Check it's not correct already
            listing = os.listdir(cd)

            cip = p.lower()
            cilisting = [l.lower() for l in listing]

            if cip in cilisting:
                l = listing[ cilisting.index(cip) ] # Get our real folder name
                cd = os.path.join(cd, l)
                corrected_path = os.path.join(corrected_path, l)
                corrections_count += 1
            else:
                return False # Error, this path element isn't found
        else:
            cd = os.path.join(cd, p)
            corrected_path = os.path.join(corrected_path, p)

    return corrected_path, corrections_count 
```

我不确定这是否会更快，尽管正在进行的测试少了一点，而且一开始的“已经正确”的捕获可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T16:04:46.273

带有不区分大小写缓存的扩展版本，用于提取更正的路径：

```
import os,re

def corrected_paths(start, pathlist):
    ''' This wrapper function takes a list of paths to correct vs. to allow caching '''

    start = unicode(start)
    pathlist = [unicode(path[:-1]) if path[-1] == '/' else unicode(path) for path in pathlist ]

    # Use a dict as a cache, storing oldpath > newpath for first-pass replacement
    # with path keys from incorrect to corrected paths
    cache = dict() 
    corrected_path_list = []
    corrections_count = 0
    path_split = re.compile('(/+|\+)')

    for path in pathlist:
        cd = start
        corrected_path = ''
        parts = path_split.split(path)

        # Pre-process against the cache
        for n,p in enumerate(parts):
            # We pass *parts to send through the contents of the list as a series of strings
            uncorrected_path= os.path.join( cd, *parts[0:len(parts)-n] ).lower() # Walk backwards
            if uncorrected_path in cache:
                # Move up the basepath to the latest matched position
                cd = os.path.join(cd, cache[uncorrected_path])
                parts = parts[len(parts)-n:] # Retrieve the unmatched segment
                break; # First hit, we exit since we're going backwards

        # Fallback to walking, from the base path cd point
        for n,p in enumerate(parts):

            if not os.path.exists(os.path.join(cd,p)): # Check it's not correct already
            #if p not in os.listdir(cd): # Alternative: The above does not work on Mac Os, returns case-insensitive path test

                listing = os.listdir(cd)

                cip = p.lower()
                cilisting = [l.lower() for l in listing]

                if cip in cilisting:

                    l = listing[ cilisting.index(cip) ] # Get our real folder name
                    # Store the path correction in the cache for next iteration
                    cache[ os.path.join(cd,p).lower() ] = os.path.join(cd, l)
                    cd = os.path.join(cd, l)
                    corrections_count += 1

                else:
                    print "Error %s not in folder %s" % (cip, cilisting)
                    return False # Error, this path element isn't found

            else:
                cd = os.path.join(cd, p)

        corrected_path_list.append(cd)

    return corrected_path_list, corrections_count 
```

在一组路径的示例运行中，这大大减少了 listdirs 的数量（这显然取决于您的路径有多相似）：

```
corrected_paths('/Users/', ['mxF793/ScRiPtS/meTApaTH','mxF793/ScRiPtS/meTApaTH/metapAth/html','mxF793/ScRiPtS/meTApaTH/metapAth/html/css','mxF793/ScRiPts/PuBfig'])
([u'/Users/mxf793/Scripts/metapath', u'/Users/mxf793/Scripts/metapath/metapath/html', u'/Users/mxf793/Scripts/metapath/metapath/html/css', u'/Users/mxf793/Scripts/pubfig'], 14)
([u'/Users/mxf793/Scripts/metapath', u'/Users/mxf793/Scripts/metapath/metapath/html', u'/Users/mxf793/Scripts/metapath/metapath/html/css', u'/Users/mxf793/Scripts/pubfig'], 5) 
```

在此过程中，我意识到 Mac OSX Python 上的路径匹配返回路径匹配，就好像它们不区分大小写一样，因此存在性测试总是成功。在这种情况下，listdir 可以向上移动以替换它。

# javascript - 在slidejs中动态生成内容时出现堆栈溢出错误

> ID：14766108
> 
> 赞同：1
> 
> 时间：2013-02-08T05:12:56.833
> 
> 标签：javascript, jquery, html, stack-overflow, slidesjs

当我动态生成第二张幻灯片的内容并将其添加到 DOM 时，在调用 $('#slides1 .next').click(); 时出现“堆栈溢出错误”；

[slidejs：如何用相同的上一个下一个按钮控制两张幻灯片？](https://stackoverflow.com/questions/14743445/slidejs-how-to-control-two-slides-with-same-previous-next-button)

# jquery - 滚动时如何在不使用 position:fixed 的情况下保持 div 固定

> ID：14766113
> 
> 赞同：0
> 
> 时间：2013-02-08T05:13:11.197
> 
> 标签：jquery, position, fixed, scrolltop

我刚刚创建了一个不随页面其余部分滚动的侧菜单，或者更确切地说，它通过使用滚动事件将自身重新定位到包含 div 的顶部，获取 scrollTop 值并使用一点缓动重新定位侧菜单 div。这一切都很好，但我宁愿它只是保持静止不动。所以问题是，有没有办法让它保持绝对静态而不使用位置：固定？（位置：固定会导致窗口大小调整的其他问题需要破解来解决。使用绝对也会导致同样的问题）

我目前的代码：

```
$('#mainbox').scroll(function() {
  var newTopMargin = $(this).scrollTop();
  $('#sidemenu').animate({marginTop: newTopMargin}, 100 );
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T05:14:43.977

不要使用`.animate`. 只需使用`.css('marginTop', newTopMargin)`. 我想你也可以删除`100`from`.animate`

# c - 可以合并具有静态存储持续时间和相等的常量初始化器的常量对象吗？

> ID：14766115
> 
> 赞同：1
> 
> 时间：2013-02-08T05:13:27.847
> 
> 标签：c, c99, language-lawyer, sentinel

考虑两个具有静态存储持续时间和相等的常量初始值设定项的对象：

```
static const int a = 50;
static const int b = 50; 
```

编译器将这些组合起来是否有效`&a == &b`？

（对于上下文，我正在考虑使用静态常量对象来获取唯一地址以用作标记指针值。如果编译器组合这些对象是合法的并且我对两个这样的对象使用相同的常量值，那么地址可以是平等的，我不能将它们用作哨兵值。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T17:53:08.890

指针必须比较不相等。见 C99 6.5.9 第 6 段：

> 两个指针比较相等当且仅当两者都是空指针，都是指向同一个对象（包括指向对象的指针和在其开头的子对象）或函数的指针，两者都是指向同一数组最后一个元素的指针对象，或者一个是指向一个数组对象末尾的指针，另一个是指向另一个数组对象的开头的指针，该数组对象恰好紧随地址空间中的第一个数组对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T05:26:48.030

不，标准禁止这样做。不同的对象必须有不同的地址。在`const char a[]="abc", b[]="abc";`，`a`和`b`被分配在不同的地址。如果它们是指针也是如此：在`const char *a="abc", *b="abc",`a `and`b` 中也分配在不同的地址；它们指向的字符串常量可以是单个常量数组，就好像它是一个命名对象一样。

# javascript - 如何为 D3 圆圈包布局中的每个圆圈着色

> ID：14766117
> 
> 赞同：2
> 
> 时间：2013-02-08T05:13:36.557
> 
> 标签：javascript, d3.js, colors, circle-pack

这是 d3js 中的包布局示例：

[http://bl.ocks.org/4063530](http://bl.ocks.org/4063530)

是否可以控制单个圆圈的颜色？

这是带有颜色的包布局的另一个示例：

[http://bl.ocks.org/4063269](http://bl.ocks.org/4063269)

![在此处输入图像描述](../Images/1e9b851411556fb84a1390bc947dcef2.png)

你能帮我理解第二张图表中的气泡是如何分配颜色的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T10:34:35.650

您只需添加属性`fill`即可更改颜色：

```
node.append("圆")
      .attr("r", function(d) { return dr; })
      .style("填充", function(d){ return d.color; });

```

在上面的示例中，假设您的数据包含一个`color`字段。

# ms-word - MSWord 宏：搜索和突出显示格式化的文本模式

> ID：14766123
> 
> 赞同：1
> 
> 时间：2013-02-07T15:17:10.393
> 
> 标签：ms-word, vba, vbscript

我正在尝试编写一个 MSWord 宏，该宏将在 MSWord 文件中找到并突出显示（黄色）某些类型的文本字符串。

例如：

1) 斜体逗号，后跟空格，然后是非斜体文本。因此，例如：

> 这句话中的*第二个*逗号是*斜体的，*应该由所需的宏突出显示。*但是这句话中的逗号不应该突出显示，因为整个句子都是斜体的。*

2) 一个粗体字符（任何种类，甚至是空格），前后都是非粗体字符。因此，例如：

> 这句话以粗体标点符号结尾**。**应该强调第一个时期。

我知道第一个时期可能看起来很正常，但事实并非如此。它很大胆。

3) SmallCaps 中的任何单词，长度大于 4 个字母，但不大写。我不知道如何在降价中使用小型大写字母......但想象一下，以下文本在 MSWord 中的小型大写字母中：

> 想象一下所有这些都在小型股中。. . “under”这个词应该突出显示，因为它的长度超过四个字符但没有大写

有谁知道这是否可能？我知道使用正则表达式很容易找到文本模式，但是为这些模式添加格式更改似乎很棘手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:35:04.683

运行cmd，

```
cscript //Nologo regexp02.vbs 
```

正则表达式02.vbs：

```
Dim objRegExp    : Set objRegExp = CreateObject("VBScript.RegExp")
objRegExp.Global = True

Dim input 
input="Imagine All of This Is in Small Caps. . . the Word under Should Be Highlighted Because It Is More Than Four Characters Long but is not Capitalized"

WScript.Echo input

WScript.Echo 

Dim Pattern1 : Pattern1 = "\b[a-z]{5,}\s"
WScript.Echo "Pattern1 : " & Pattern1
WScript.Echo 

objRegExp.Pattern = Pattern1

Set objMatches = objRegExp.Execute(input)

For i=0 To objMatches.Count-1
Set objMatch = objMatches.Item(i)
WScript.Echo objMatch.Value
Next

WScript.Echo 

Dim Pattern2 : Pattern2 = "\b[A-Z]([a-z]{4,})\s"
WScript.Echo "Pattern2 : " & Pattern2
WScript.Echo 

objRegExp.Pattern = Pattern2

Set objMatches = objRegExp.Execute(input)

For i=0 To objMatches.Count-1
    Set objMatch = objMatches.Item(i)
    WScript.Echo objMatch.Value

    WScript.Echo Left(objMatch.Value, 1)

'TODO test bold sumbol Left(objMatch.Value, 1)
'
'   TODO Highlight Code
'

Next 
```

输出：

```
Imagine All of This Is in Small Caps. . . the Word under Should Be Highlighted Because It Is More Than Four Characters Long but is not Capitalized

Pattern1 : \b[a-z]{5,}\s

under

Pattern2 : \b[A-Z]([a-z]{4,})\s

Imagine
I
Small
S
Should
S
Highlighted
H
Because
B
Characters
C 
```

VBA 的正则表达式：

打开参考

![打开参考](../Images/d2982f4a5fa220b1661544f9b718c13a.png)

选择 COM-server Microsoft VBScript 正则表达式 5.5

![选择 COM 服务器](../Images/7df944ae749cea5be9294177e524d934.png)

VBA代码：

```
Dim objRegExp As New VBScript_RegExp_55.RegExp

objRegExp.IgnoreCase = False
objRegExp.Global = True 

objRegExp.Pattern = Pattern1 
```

录制宏

![录制宏](../Images/5c9638e623da7e738012773aac8dd628.png)

按 Ctrl+F，打开搜索对话框

![打开搜索对话框](../Images/1d96d49292ba6e5c2f274bed6b4c087d.png)

选择字体属性

![选择字体属性](../Images/136908d5973e1c28ddaf261efb886145.png)

选择字体样式

![选择字体样式](../Images/15e1a2a144e1d49b58aa3d3b8bf089d5.png)

按查找下一个

![按查找下一个](../Images/b7998cea370b977725c9a3d0a038cedb.png)

停止宏录制，打开 VBA 编辑器

![停止宏录制，打开 VBA 编辑器](../Images/5b957dc67f8cc0d559a92d636f1e4c3c.png)

编辑宏 SearchItalic

![编辑宏 SearchItalic](../Images/3c36f6c9aade5d2e23de5e5168d32e36.png)

运行宏 SearchItalic

![运行宏 SearchItalic](../Images/9d7e27ea8b9adbdb87af1b32875bc5e7.png)

搜索斜体文本：

```
Sub SearchItalic()

Selection.Find.ClearFormatting
Selection.Find.Font.Italic = True
With Selection.Find
    .Text = ""
    .Forward = True
    .Wrap = wdFindContinue
End With
Selection.Find.Execute
End Sub 
```

# javascript - 如何停止 HTML 表单字段中的文本突出显示

> ID：14766127
> 
> 赞同：2
> 
> 时间：2013-02-08T05:14:05.027
> 
> 标签：javascript, html, css, highlight, form-fields

在谷歌上花了一些时间后，我来到这里寻求解决方案。我要做的是在用户使用光标选择时停止输入字段（HTML 表单字段）的文本突出显示。如果用户尝试在输入字段中选择全部或部分文本，则光标应停在用户开始鼠标左键单击的索引处。像这样的东西

**这不应该**

![在此处输入图像描述](../Images/bfe58e4effc19ae46495d41cb32e214b.png)

**这应该**

![在此处输入图像描述](../Images/128fdca54fdc2c90a2cec270ae2317a6.png)

用户应该能够将光标定位在用户想要的任何索引中，但用户不应该能够突出显示文本。我不是 CSS 方面的专家。有什么解决办法吗？JS 解决方案是使用 setSelectionRange 或 createTextRange。

请提供任何最好的 CSS 或 JS 解决方案。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-08T05:26:56.513

I hope its not possible to stop the highlight, well instead you can apply a trick to change the background color of the highlight to the textfield background color.

When the background colors would be same then it would not be highlighted, here ios the code to achieve the same :-

[View Demo at jsfiddle](http://jsfiddle.net/ACpPF/).

**CSS**

```
input::selection {
background: #fff; 
}
input::-moz-selection {
background: #fff; /* Firefox lower versions */
} 
```

# regex - regexec，括号的存在与否，行为

> ID：14766135
> 
> 赞同：1
> 
> 时间：2013-02-08T05:14:52.670
> 
> 标签：regex, r

我试图理解为什么在以下示例中添加括号会得到不同的响应。任何解释将不胜感激

```
> regexec("\\w*\\.*", "12.3")
[[1]]
[1] 1
attr(,"match.length")
[1] 3

> regexec("[\\w*\\.*]", "12.3")
[[1]]
[1] 3
attr(,"match.length")
[1] 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T05:20:35.010

在`[`and内部`]`，特殊字符（如`.`,`*`等）被视为普通字符，在这里您给出了一个带有字符类的正则表达式，其中包含`\\w*\\.*`查找单词字符（字母、数字或下划线）或 a`*`或 a `.`（即最多允许一个字符）。

字符类允许出现其中指定的任何字符。在这里，在字符类内部，`\\w`被视为`\w`. `\\.`被视为一个点（`.`这里没有特殊含义）

针对`\\w*\\.*`匹配模式包含零个或多个单词字符，后跟零个或多个字符，`.`并且您的输入是`12.3`两个数字后跟一个点，导致匹配长度为 3。

针对`[\\w*\\.*]`一个匹配模式包含以下任何一次且仅出现一次 - 单词字符、*、。

由于您的输入开头有一个数字，因此它是匹配的。所以匹配长度为1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T05:16:43.910

括号创建一个“字符类”，意思是“匹配任何列出的字符之一”。第一个是“匹配 0 个或多个 \w 后跟 0 个或多个句点”。第二个是“匹配 \w、星号、句点或星号（冗余）之一。”

# java - 我不断收到编译时错误，为什么？

> ID：14766139
> 
> 赞同：-4
> 
> 时间：2013-02-08T05:15:20.440
> 
> 标签：java

该代码应该编写一个 Java 程序，该程序从标准输入中读取一个正整数列表，并确定它们中的任何一个是否可以写为其他输入整数的子集的总和。提示：搜索加起来为某个值的整数子集最好递归完成。但是，请避免生成所有子集。当您搜索总和为 x 的子集时，不必考虑大于 x 的输入整数。如果 y≤x 是其他输入整数之一，则对总和为 x 的子集的搜索可以分为在包含 y 和不包含 y 的子集之间搜索。

```
import java.util.Scanner;
import java.util.Arrays;

public class jodiejo {

    public static int[] integers = new int[1000];

    public static void main(String args[]) {

        Scanner scan = new Scanner(System.in);

        int n = 0;
        integers = new int[1000];

        while (scan.hasNextInt()) {

            integers[n] = scan.nextInt();
            n++;

        }

        for (int i = 0; i < n; i++) {

            searchSum(integers[i], i);
        }

        System.out.print("NO");

        Arrays.sort(integers, 0, n);
    }

    public static void searchSum(int number, int position) {
        for (int i = position - 1; i >= 0; i--) {
            if (number - integers[i] == 0) {
                System.out.print("YES");
                System.exit(0);
            } else if (number - integers[i] > 0) {
                searchSum(number - integers[i], i);
            } else if (number - integers[i] < 0) {
                return
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:19:04.807

我认为错误必须在这里：

```
else if(number - integers[i] < 0)
{
return //this is the problem
}
} 
```

所以在like`;`之后加一个分号`return``return;`

为什么要`integers`在 main 方法中第二次初始化数组：
`integers = new int[1000];`
这是多余的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T05:20:01.470

在最后一次返回之后你需要一个分号，即：

```
 public static void searchSum(int number, int position) {
        for (int i = position - 1; i >= 0; i--) {
            if (number - integers[i] == 0) {
                System.out.print("YES");
                System.exit(0);
            } else if (number - integers[i] > 0) {
                searchSum(number - integers[i], i);
            } else if (number - integers[i] < 0) {
                return;
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T05:20:09.303

你的问题在这里，你没有分号后`return`声明：

```
else if(number - integers[i] < 0)
{
return  //No Semicolon
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T05:21:48.003

排队：49

而不是`return`, `return;`- 缺失`;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T05:20:34.197

```
import java.util.Scanner;
import java.util.Arrays;

public class jodiejo
{

    public static int[] integers = new int[1000];

    public static void main(String args[])
    {

        Scanner scan = new Scanner(System.in);

        int n = 0;
        integers = new int[1000];

        while (scan.hasNextInt())
        {

            integers[n] = scan.nextInt();
            n++;

        }

        for (int i = 0; i < n; i++)
        {

            searchSum(integers[i], i);
        }

        System.out.print("NO");

        Arrays.sort(integers, 0, n);
    }

    public static void searchSum(int number,
                                 int position)
    {
        for (int i = position - 1; i >= 0; i--)
        {
            if (number - integers[i] == 0)
            {
                System.out.print("YES");
                System.exit(0);
            }
            else if (number - integers[i] > 0)
            {
                searchSum(number - integers[i], i);
            }
            else if (number - integers[i] < 0)
            {
                return;
            }
        }
    }
} 
```

# jquery - 仍在加载时进行部分 AJAX 渲染

> ID：14766141
> 
> 赞同：2
> 
> 时间：2013-02-08T05:15:23.287
> 
> 标签：jquery, ruby-on-rails, ajax

我使用 Ruby on Rails 和 jQuery。

只是想知道你们是否知道一种使用 jQuery 请求数组的方法，然后将数组的每个成员呈现到已完成加载的 HTML 主体，同时继续加载其他成员。

例如。

如果我使用 jQuery 请求一个脚本，该脚本在 JSON 数组中返回 30 个成员。通常，在整个数组完全加载之前，您将无法访问该数组。但是如果数组成员 1,2 和 3 都完成了怎么办。有没有办法在 4-30 成员继续加载时使用这些成员？那可能吗？某种渐进式渲染？加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:20:24.213

也许不是最好的解决方案，但您可以在循环中一次请求一个：

```
function getNext(num) {
    $.getJSON('/path', 'num=' + num).done(function () {
        getNext(num + 1);
    });
} 
```

当你到达最后一个时，发送一个 404 并且`.done`不会被调用。

# vb.net - VB.NET 中块级变量的范围是什么？

> ID：14766144
> 
> 赞同：3
> 
> 时间：2013-02-08T05:15:39.620
> 
> 标签：vb.net, string, scope

考虑以下代码：

```
For i As Integer = 0 To 10
   Dim str As String = str & " Kratika "
Next 
```

当我附加调试器并检查 at 的值`str`时`i = 10`，我看到以下内容：

```
 Kratika  Kratika  Kratika  Kratika  Kratika  Kratika  Kratika  Kratika  Kratika  Kratika  Kratika 
```

为什么要连接前一个值？我希望每次都将变量设置为`kratika`，因为每次它都会声明一个新的 String 对象，对吧？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T05:49:15.760

这是预期的行为。

正如您在对另一个答案的评论中提到的那样，使用整数而不是字符串连接可能更容易看到：

```
Sub Main()
  For i As Integer = 0 To 5
     Dim j As Integer = j + 1
     Console.WriteLine(j.ToString())
  Next
End Sub 
```

输出如下：

```
1
2
3
4
5
6 
```

为了了解原因，我们转向文档，特别是关于[scope](http://msdn.microsoft.com/en-us/library/1t0wsc67.aspx)的部分。`j`您声明的变量位于*块*范围内，因为它是在块内声明的`For`。但是，在块范围内声明的变量在其包含过程的整个持续时间内仍保留其值。正如文档在注释中所说：

> 即使变量的范围仅限于块，它的生命周期仍然是整个过程的生命周期。如果在过程中多次输入块，则每个块变量都保留其先前的值。为了避免在这种情况下出现意外结果，明智的做法是在块的开头初始化块变量。

所以发生的事情是，每次你重新进入`For`区块时，`j`仍然有它之前的值。因为等号的右边首先被求值，所以旧的值`j`加 1，然后存储到`j`（有效地擦除旧的内容`j`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:19:05.507

嗨，你已经在循环内使用`str & " Kratika "`了。如果你只期望 `" Kratika "`每次都只`Dim str As String = " Kratika "`在循环内使用。

现在再次检查

# php - PDO Prepared Statements：无法将多个值绑定到查询

> ID：14766148
> 
> 赞同：1
> 
> 时间：2013-02-08T05:15:52.723
> 
> 标签：php, sql, pdo, prepared-statement

我是 PDO 和准备好的语句的新手，我无法将多个值绑定到我的查询。如果在进行 SELECT 时只是一个，我没有问题，例如：

```
SELECT foo FROM table WHERE id=:something // no problem 
```

但是多个，并试图插入我被卡住了：

```
Insert INTO mytable (field1, field2) VALUES (:value1, :value2) // No bueno 
```

尝试了几种不同的方法并在这里阅读了其他帖子，但没有运气。以下是我遇到问题的示例：

```
$insertSQL = $db->prepare("INSERT INTO voting_poll (ipaddress, choice) 
    VALUES (':ipaddress', :value)");
    $insertSQL->bindParam(':ipaddress', getenv('REMOTE_ADDR'), PDO::PARAM_STR);
    $insertSQL->bindParam(':value', $_POST['radio'], PDO::PARAM_STR);
    $insertSQL->execute(); 
```

我收到以下错误：**无效的参数号：绑定变量的数量与令牌的数量不匹配**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:18:59.560

1.  你不要在参数周围加上引号。删除查询中的引号`:ipaddress`。

2.  [`bindParam()`](http://www.php.net/manual/en/pdostatement.bindparam.php)必须与变量一起使用，因为它将参数绑定到变量引用。如果您想使用一个值（例如，函数的返回值，如`getenv()`），请[`bindValue()`](http://php.net/manual/en/pdostatement.bindvalue.php)改用。

# php - 什么是引导（在 Web 开发中）？

> ID：14766151
> 
> 赞同：0
> 
> 时间：2013-02-08T05:16:01.793
> 
> 标签：php, web-applications, web, bootstrapping

我读了几篇关于 php 框架的文章，他们谈到了引导。我对引导程序的了解为零，我已经在谷歌中搜索过它们，我发现的都是关于 twitter bootstrap 等我不明白的。

有人可以解释什么是引导（尤其是在网络开发领域），如果你愿意，请给出一些例子或链接（因为我找不到这个的好例子）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:24:04.273

From [Wikipedia](http://en.wikipedia.org/wiki/Bootstrapping#Software_loading_and_execution) (first Google result):

> Software loading and execution
> 
> The computer term bootstrap began as a metaphor in the 1950s. In computers, pressing a bootstrap button caused a hardwired program to read a bootstrap program from an input unit. The computer would then execute the bootstrap program, which caused it to read more program instructions. It became a self-sustaining process that proceeded without external help from manually entered instructions. As a computing term, bootstrap has been used since at least 1953.

# java - Glassfish 抛出 com.sun.xml.ws.client.ClientTransportException：服务器发送 HTTP 状态代码 500：内部服务器错误

> ID：14766152
> 
> 赞同：0
> 
> 时间：2013-02-08T05:16:03.760
> 
> 标签：java, jax-ws, glassfish-3

我已经将 jax-ws Web 服务部署到 glassfish 3.1 中。我的客户端请求返回 5000 到 10000 个对象列表的服务方法。在处理服务器之间抛出带有以下堆栈跟踪的 ClientTransportException。

```
com.sun.xml.ws.client.ClientTransportException: The server sent HTTP status code 500: Internal Server Error
at com.sun.xml.ws.transport.http.client.HttpTransportPipe.createResponsePacket(HttpTransportPipe.java:314)
at com.sun.xml.ws.transport.http.client.HttpTransportPipe.process(HttpTransportPipe.java:265)
at com.sun.xml.ws.transport.http.client.HttpTransportPipe.processRequest(HttpTransportPipe.java:184)
at com.sun.xml.ws.transport.DeferredTransportPipe.processRequest(DeferredTransportPipe.java:109)
at com.sun.xml.ws.api.pipe.Fiber.__doRun(Fiber.java:641)
at com.sun.xml.ws.api.pipe.Fiber._doRun(Fiber.java:600)
at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:585)
at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:482)
at com.sun.xml.ws.client.Stub.process(Stub.java:323)
at com.sun.xml.ws.client.sei.SEIStub.doProcess(SEIStub.java:161)
at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:113)
at com.sun.xml.ws.client.sei.SyncMethodHandler.invoke(SyncMethodHandler.java:93)
at com.sun.xml.ws.client.sei.SEIStub.invoke(SEIStub.java:144)
at $Proxy190.webservicemethodcall(Unknown Source)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.java:166)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

我尝试监视 glassfish 请求，但它在请求统计信息中显示错误计数 1，但它没有为我提供错误计数的任何适当原因。在多次测试中已经观察到，我在客户端获得了客户端传输，但在服务器上，方法线程分别正常工作到最后一行。它不知道连接断开。我认为连接已断开，因此线程最终无法返回响应。

注意：如果返回响应很小，例如最多 3000 个对象，它可以正常工作。但我不认为这是大小问题。这是超时问题。我的请求连接在创建响应之前中断

请帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:32:41.433

HTTP 500 表示内部服务器错误，这不是您的客户端的错。您的请求在服务器上失败。你应该在那里寻找更多信息。您的客户端堆栈跟踪不会有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T14:16:19.450

您可以尝试以下任意组合：

1.  在您的请求运行时，从客户端运行连续 ping。您应该看到 ping 中断（或至少 TTL 增加以确认理论）

2.  为服务器和客户端之间的 HTTP 消息交换的转储设置以下 JVM 属性

    ```
    -Dcom.sun.xml.ws.transport.http.HttpAdapter.dump=true 
    ```

3.  试试[TCPMon](http://technonstop.com/tcpmon-tutorial)

4.  Implement a JAX-WS [SOAP Handler](http://jax-ws.java.net/articles/handlers_introduction.html) to capture the exact moment when the pipe runs dry. This might have the extra benefit of throwing a meaningful exception when the handler attempts to log a message and gets burnt by the absent message

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T10:38:46.277

If your logging policy is not clearly defined, your exception might be silently swallowed on server side.

I would try to add a try/catch block to detect where this happens (and eventually remove it later if you improve your logging strategy)

```
public returnType yourMethod(){
    try {
    .... all your code
    }catch (final Throwable t) {
      log.error("Failed to wait for device update: " + t.getMessage());
      //eventually re-throw the error
    }
} 
```

# c# - 为什么 Math.Round 不返回 int？

> ID：14766153
> 
> 赞同：39
> 
> 时间：2013-02-08T05:16:03.870
> 
> 标签：c#, math

在 C# 中，为什么舍入数学函数 Floor、Ceiling 和 Round 不返回一个`int`？考虑到函数的结果总是一个整数，为什么它返回`float`a`double`或`decimal`？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-02-08T05:24:08.033

[`double`范围为 ±5.0 × 10 ^(-324)至 ±1.7 × 10 ^(308)](http://msdn.microsoft.com/en-us/library/678hzkk9.aspx)，[`long`范围为 –9,223,372,036,854,775,808 至 9,223,372,036,854,775,807](http://msdn.microsoft.com/en-us/library/ctetwysk.aspx)。不幸的是，并非**所有**整数浮点值都可以用整数表示。

例如，`1e19`已经超出了 64 位有符号整数的范围。

```
(long)Math.Round(1e19) == -9223372036854775808L // WTF? 
```

虽然单参数重载确实`Math.Round(double)`会`Math.Round(decimal)`返回整数值，但这些重载仍然不能返回整数值类型。

如果你*知道*传递给函数的值将返回一个可以用整数值类型表示的值，你可以自己进行强制转换。图书馆不会这样做，因为它需要考虑一般情况。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-08T05:24:26.843

> 考虑到函数的结果总是一个整数，

不，不会的。[您甚至可以使用Math.Round 方法 (Double, Int32)](http://msdn.microsoft.com/en-us/library/75ks3aby.aspx)指定位数

> digits 类型：
> System.Int32
> 返回值中的小数位数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T05:25:16.327

这样做是为了包含大于 int 范围内的数字。因此 Math.Floor 将返回一个 double 类型，它可以根据大小和开发人员转换为 int 或 long。如果你在 int 范围之外尝试了 Math.Floor，如果 Math.Floor 返回一个 int，它就会失败，但它没有，它返回一个可以转换为 long 的 double。

```
 double d = 4147483647.5678;
     long a = (long)Math.Floor(d);
     int b = (int)Math.Floor(d);
     Console.WriteLine(a);
     Console.WriteLine(b); 
```

请注意，在转换为 int 时，b 被推回 MIN int，因为 int 无法容纳它。

# csv - Pandas AssertionError：必须是混合类型的DataFrame

> ID：14766155
> 
> 赞同：1
> 
> 时间：2013-02-08T05:16:25.093
> 
> 标签：csv, import, pandas

我仍然遇到 Pandas 导入数据的问题，这让我很头疼。我有一些以前的帖子。无论如何，我对简单 CSV 文件的最新尝试导致 frame.py 中出现“AssertionError：必须是混合类型 DataFrame”。在该示例中，如果我只导入整数列，我可以导入我制作的 CSV 文件。现在这让我想知道是否还有其他问题。所以我回到基础，尝试了 Pandas 的一个例子。使用数据

```
 date,A,B,C
20090101,a,1,2
20090102,b,3,4
20090103,c,4,5 
```

然后我试图

```
pd.read_csv('foo.csv') 
```

它仍然给出了这个错误。我已经搜索了其他有此错误的其他实例，但找不到任何东西。我想知道它是否在我的系统上。运行 windows64、EPD（安装了 pandas-0.10.1.win-amd64-py2.7.exe）、Wing IDE 编辑器（v4.1.9-1）。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T07:37:09.130

来自 Wing 技术支持：

“Wing 在失败的断言处停止，因为它的默认配置是在引发任何 AssertionError 时停止；这可以通过从调试器 -> 异常首选项中的始终报告异常列表中删除 AssertionError 来更改”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T17:25:49.580

我也在 Wing 中得到了这个断言。

在 Wing 的“例外”选项卡的左上角有一个标记为“忽略此异常位置”的复选框，我将其选中，并且 Wing 不再打扰我。

# mongodb - 使用 Doctrine MongoDB 按 ID 查询区分集合

> ID：14766156
> 
> 赞同：1
> 
> 时间：2013-02-08T05:16:33.153
> 
> 标签：mongodb, doctrine-odm, doctrine-mongodb

如何使用 Doctrine MongoDB 查询只知道其 ObjectId 的对象？通过 id 查询，using`$dm->findOneBy(array('id' => $id))`将只返回一种已区分文档类型的结果，而不返回其他类型的结果。通过命令行查询，例如`db.documents.find({ "_id": ObjectId(...) });`返回预期的行。

**编辑：**问题似乎是，如果我不知道我要查询的文档类型并且我正在使用自定义存储库，则使用的文档名称仅与其中一个的类名称相关联两个文档类（因此对于其他类型的文档返回 0 结果）。这通常是有道理的，因为如果我不知道我正在寻找什么类型的文档，Doctrine 应该如何？给定一个有区别的集合，有没有办法在存储库中自动使用正确的文档名称而无需明确告知教义？

有关问题的抽象，请参见下文。

谢谢！

* * *

我有一组受歧视的文档生活在同一个*文档*集合中，按其`type`领域进行区分，例如

```
{
  "_id" : ObjectId("510fdb6c91a4cb4c25000000"),
  "name" : "Contract",
  "type" : "document"
}
{
  "_id" : ObjectId("510fdb6c91a4cb4c25000001"),
  "name" : "Tutorial",
  "length_min": "60"
  "type" : "video"
}
... 
```

我对`Document`和`Video`类的映射如下所示：

```
<!-- "Doc" Document mapping -->
<doctrine-mongo-mapping ...>
  <document name="Doc" collection="documents" repository-class="DocRepository">
    <discriminator-field fieldName="type" />
    <discriminator-map>
      <discriminator-mapping value="document" class="Doc" />
      <discriminator-mapping value="video" class="Video" />
    </discriminator-map>

    <field fieldName="id" id="true" />
    <field fieldName="name" field="name" type="string" />
  </document>
</doctrine-mongo-mapping>

<!-- "Video" Document mapping -->
<doctrine-mongo-mapping ...>
  <document name="Video" collection="documents" repository-class="DocRepository">
    <discriminator-field fieldName="type" />
    <discriminator-map>
      <discriminator-mapping value="document" class="Doc" />
      <discriminator-mapping value="video" class="Video" />
    </discriminator-map>

    <field fieldName="id" id="true" />
    <field fieldName="name" field="name" type="string" />
    <field fieldName="length_min" field="length_min" type="int" />
  </document>
</doctrine-mongo-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T17:55:30.370

我为这个问题想出的两个解决方案是：

1.  创建不同的存储库，这些存储库只是围绕实际抽象存储库进行工作的包装器。这会产生依赖注入的开销。
2.  使用类名限定符获取共享存储库，以便查询正确类型的对象。

这两种解决方案仍然需要知道类名（或至少知道它的类型，以便可以派生适当的类）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T09:37:46.617

在您的情况下，我只看到一个解决方案，而没有像上面建议的 Sean Quinn 那样创建一些额外的包装存储库。

我会为所有被区分的文档使用一个集合——如果你没有你存储的所有类的基类，我会添加一些抽象类。它在[有关继承映射的 Doctrine 文档](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/inheritance-mapping.html)中进行了描述。长话短说，你只使用一个集合，一些字段通知存储对象的类，在查询这个存储库后，你得到一个适当类的对象。

要使用单一集合继承映射，您需要将`inheritance-type="SINGLE_COLLECTION"`属性添加到顶级`document`标签。

# interrupt - 具有高波特率循环缓冲器的 PIC 中断驱动 UART

> ID：14766159
> 
> 赞同：2
> 
> 时间：2013-02-08T05:17:32.227
> 
> 标签：interrupt, pic, circular-buffer, uart

我正在尝试从具有 PIC 18f4550 的传感器以波特率 = 38400 读取数据。使用 FIFO 循环缓冲区，我可以将传感器中的数据存储到数组中。

传感器将响应请求命令并返回 15 个字节的测量值（**与我创建的循环缓冲区相同**）。我必须抓取所有**15 个字节**并将 \r\n 放在末尾以分隔每个测量值，因为没有分隔符。

所以我使用了两个指针，**inputpointer**和**outputpointer**来存储字节和传输字节。因为18f4550只有一个硬UART，所以我用它来读取数据并向传感器发送命令，同时使用软件UART通过RS232输出到笔记本电脑。

当缓冲区被读取并发送到串行端口时，我请求进行新的测量。

它工作得很好，但我只想知道当头指针超出尾指针时是否有更好的方法来避免FIFO溢出，即当有大量数据被缓冲但它们无法及时输出时。

这是代码：16MHZ PIC 18f4550 mikroC 编译器

```
char dataRx[15];
char unsigned inputpointer=0;
char unsigned outputpointer=0;
        // initialize pointers and buffer.
void main() {
      ADCON1=0x0F;  //turn analog off

      UART1_Init(115200);  //initialize hardware UART @baudrate=115200, the same setting for the sensor
      Soft_UART_Init(&PORTD,7,6,38400,0); //Initialize soft UART to commnuicate with a laptop
      Delay_ms(100); //let them stablize

      PIE1.RCIE = 1;                //enable interrupt source
      INTCON.PEIE = 1;
      INTCON.GIE = 1;

      UART1_Write(0x00);            //request a measurement.
      UART1_Write(0xE1);            //each request is 2 bytes

      while(1){

        Soft_UART_Write(dataRx[outputpointer]);  //output one byte from the buffer to laptop
        outputpointer++;                        //increment output pointer
        if(outputpointer==0x0F)                 //reset pointer if it's at the end of the array
        {
            outputpointer=0x00;
            Soft_UART_Write(0x0D);              //if it's at the end, that means the buffer is filled with exactly one measurement and it has been output to the laptop. So I can request another measurement.
            Soft_UART_Write(0x0A);              //add \r\n
            UART1_Write(0x00);                  //request another measurement
            UART1_Write(0xE1);
        }

}
void interrupt(void){ //interrupt routine when a byte arrives
      dataRx[inputpointer]=UART1_Read();            //put a byte to a buffer
      inputpointer++;
      if (inputpointer==0x0F){inputpointer=0;}      //reset pointer. 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T15:27:33.510

也许您可以在传输传感器读数时禁用中断，然后在完成传输数据后重新启用它？

它可能不会产生重大影响，但它可能会阻止您提到的 FIFO 溢出？

# java - Java Rock / Paper / Scissors，做错了吗？

> ID：14766160
> 
> 赞同：0
> 
> 时间：2013-02-08T05:17:36.070
> 
> 标签：java

学习java很明显。我能够使游戏正常运行。但我需要这样做，以便如果用户放置 R/P/S 以外的内容，则默认为 Rock。我不需要循环。如果我放石头，游戏就完美了。如果我放了 RPS 以外的任何东西，它也可以完美运行，并且默认为摇滚。但是，如果我做纸或剪刀，它会给我纸和剪刀的答案，并且默认为摇滚答案。关于为什么这不起作用的任何提示？

另外，我的方向错了吗？我可以这样做更好吗？这感觉真的......充其量是不雅的。

```
 public static void main(String[] args) {
            // TODO Auto-generated method stub
    Scanner in = new Scanner(System.in);
    String userChoice="", userInput, compChoice="";
    int ranInt = (int)(Math.random()*3);
    if (ranInt == 0){
            compChoice = "Rock";
    } else if (ranInt == 1){
            compChoice = "Paper";
    }else if (ranInt == 2){
            compChoice = "Scissors";
    }
    System.out.println("Please select one of [R/P/S]: ");
            userInput = in.next();

    if(userInput.equalsIgnoreCase("p")){
            userChoice = "Paper ";
            if(compChoice.equalsIgnoreCase("Rock")){
                    System.out.println("You chose: "+userChoice);
                    System.out.println("I chose: "+compChoice);
                    System.out.println(userChoice + "beats "+compChoice +"- you win!");
            }else if (compChoice.equalsIgnoreCase("Paper")){
                    System.out.println("You chose: "+userChoice);
                    System.out.println("I chose: "+compChoice);
                    System.out.println("A tie!");
            }else if(compChoice.equalsIgnoreCase("Scissors")){
                    System.out.println("You chose: "+userChoice);
                    System.out.println("I chose: "+compChoice);
                    System.out.println(compChoice + " beats " + userChoice + " - i win!");
                    }
            }

    if(userInput.equalsIgnoreCase("S")){
            userChoice = "Scissors ";
            if(compChoice.equalsIgnoreCase("Paper")){
                    System.out.println("You chose: "+userChoice);
                    System.out.println("I choce: "+compChoice);
                    System.out.println(userChoice + "beats "+compChoice +"- you win!");
            }else if(compChoice.equalsIgnoreCase("Scissors")){
                    System.out.println("You chose: "+userChoice);
                    System.out.println("I chose: "+compChoice);
                    System.out.println("A tie!");
            }else if(compChoice.equalsIgnoreCase("Rock")){
                    System.out.println("You chose: "+userChoice);
                    System.out.println("I chose: "+compChoice);
                    System.out.println(compChoice + " beats " + userChoice + " - i win!");
                    }
            }              
    if(userInput.equalsIgnoreCase("R")){
            userChoice = "Rock ";
            if(compChoice.equalsIgnoreCase("Rock")){
                    System.out.println("You chose: "+userChoice);
                    System.out.println("I chose: "+compChoice);
                    System.out.println("A Tie!");
            }else if(compChoice.equalsIgnoreCase("Paper")){
                    System.out.println("You chose: "+userChoice);
                    System.out.println("I chose: "+compChoice);
                    System.out.println(compChoice + " beats " + userChoice + " - you lose!");
            }else if(compChoice.equalsIgnoreCase("Scissors")){
                    System.out.println("You chose: "+userChoice);
                    System.out.println("I chose: "+compChoice);
                    System.out.println(userChoice + " beats " + compChoice + " - you win!");
                    }
            }
    else {
            userChoice = "";
            System.out.println("Invalid selection, defaulting to rock.");
            if(compChoice.equalsIgnoreCase("Rock")){
                    System.out.println("You chose: Rock");
                    System.out.println("I chose: "+compChoice);
                    System.out.println("A Tie!");
            }else if (compChoice.equalsIgnoreCase("Paper")){
                    System.out.println("You chose: Rock");
                    System.out.println("I chose: "+compChoice);
                    System.out.println(compChoice + " beats " + "Rock - you lose!");
            } else if(compChoice.equalsIgnoreCase("Scissors")){
                    System.out.println("You chose: Rock");
                    System.out.println("I chose: "+compChoice);
                    System.out.println("Rock beats " + compChoice + " - you win!");
                    } 
            }
    } 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T05:22:04.670

在伪代码中，您的代码结构是：

```
if (paper) {
    process paper
}

if (scissors) {
    process scissors
}

if (rock) {
    process rock
} else {
    process default rock
} 
```

请注意（因为情况是互斥的）如果`paper`or`scissors`为真，`rock`则为假并且`else`将执行。只需将结构更改为：

```
if (paper) {
    process paper
} else if (scissors) {
    process scissors
} else if (rock) {
    process rock
} else {
    process default rock
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T05:22:34.513

你的代码需要有`else if`'S'分支和'R'分支，否则逻辑如下（对于'S'输入）：

if (P) 做某事 // 不，所以继续
if (S) 做某事 // 是的，'S' 的东西
也做.

有关在代码中添加“优雅”的想法，请查看[Rock、Paper、Scissors的 Rosetta 代码页面](http://rosettacode.org/wiki/Rock-paper-scissors#Java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T05:54:45.723

您询问了“优雅”的解决方案，一种方法是使用获胜矩阵，换句话说，如下所示：

```
public enum RPS {
   ROCK, PAPER, SCISSORS;

   public int test(RPS otherRps) {
      int[][] winMatrix = { 
            {  0, -1,  1 }, 
            {  1,  0, -1 }, 
            { -1,  1,  0 } };
      return winMatrix[ordinal()][otherRps.ordinal()];
   }
} 
```

然后您可以通过简单地调用枚举的 test(...) 方法来测试结果。例如：

```
import java.util.Random;
import java.util.Scanner;

public class RockPaperScissors {
   private static Random random = new Random();
   private static Scanner in = new Scanner(System.in);

   public static void main(String[] args) {
      RPS compChoice = RPS.values()[random.nextInt(RPS.values().length)];
      RPS userChoice = getUserChoice();

      String result = "";
      switch (userChoice.test(compChoice)) {
      case 1:
         result = "you win!";
         break;

      case -1:
         result = "you lose!";
         break;

      case 0:
         result = "it's a tie";

      default:
         break;
      }
      System.out.printf("You chose %s, the computer chose %s, %s%n",
            userChoice, compChoice, result);
   }

   private static RPS getUserChoice() {
      System.out.print("Please select one of [R/P/S]: ");
      String userChoiceStr = in.nextLine().trim();
      if (userChoiceStr.isEmpty()) {
         return RPS.ROCK;
      }
      for (RPS rps : RPS.values()) {
         if (rps.toString().startsWith(userChoiceStr.toUpperCase())) {
            return rps;
         }
      }

      return RPS.ROCK; // default
   }
} 
```

# asp.net - 应用程序池错误和 ASP.NET 错误

> ID：14766164
> 
> 赞同：1
> 
> 时间：2013-02-08T05:18:00.743
> 
> 标签：asp.net, .net, exception-handling, application-pool

每当我们在 Windows 2008 R2 64 位操作系统上运行的 IIS7.5 中遇到以下错误时

> 为应用程序池“应用程序池名称”提供服务的进程与 Windows 进程激活服务发生了致命的通信错误。进程 ID 为“2388”。数据字段包含错误号。

在触发上述错误几秒钟后，我们还会触发随机的 ASP.net 错误。

应用程序池致命通信错误与asp.net之间是否有任何关系

在过去的 2 周里，我一直在为我的 IT 部门解决这个问题，以解决这个错误。应用程序池错误一天出现 2-3 次，导致一些用户注销。

我们的应用程序构建为在“任何 CPU”上运行。请指导解决问题

# python - 如何使用套接字通过 Web 传输数据？

> ID：14766165
> 
> 赞同：1
> 
> 时间：2013-02-08T05:18:07.597
> 
> 标签：python, sockets, web, python-2.7

**问题**

如何创建一个在网络上工作的套接字服务器？

仅仅是正确的端口转发问题，还是我必须购买一个域？

如果我需要一个域，有没有免费的方法可以做到这一点？

**背景**

我目前正在使用 Windows 7（32 位）上的 Python 2.7.3 开发一个基本的[IM项目。](http://en.wikipedia.org/wiki/Instant_messaging)

我想使用 Python 将消息从控制台发送到我朋友的一台计算机。 [这](http://www.devshed.com/c/a/Python/Sockets-in-Python/2/)是非常宝贵的，但它只适用于一台机器。

在尝试通过 Internet 发送消息时，我尝试了几种策略。

1.  由于我最终将使用我的 Mac 作为服务器，因此我使用了[端口映射](http://www.codingmonkeys.de/portmap/)来转发不同的端口。当我这样做时，Python 通过给我以下错误消息来响应：

    ```
    Enter the PORT number (1 - 10,000)4235
    Socket Created
    Bind failed. Error Code : 49 Message Can't assign requested address

    Traceback (most recent call last):
       File "/Users/BigKids/Desktop/Server v3.py", line 18, in <module>
          sys.exit()
      SystemExit 
    ```

2.  我试图简单地将我的 IP 地址作为端口，但它会以错误消息响应：

    ```
    Please enter the host's IP >>> 68.***.***.128
    Enter the PORT number (1 - 10,000)2432
    Socket Created
    Bind failed. Error Code : 10049 
    Message The requested address is not valid in its context

    Traceback (most recent call last):
      File "D:\Python Programs\Sockets\First Project\Server v3.py", line 19, in   <module>
        sys.exit()
      SystemExit 
    ```

    这是必要的代码：

    ```
    HOST = raw_input("Please enter the host's IP >>> ")

    PORT = input ("Enter the PORT number (1 - 10,000)")

    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM )
    s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
    print "Socket Created"

    try:
        s.bind((HOST, PORT))
    except socket.error, msg:
        print "Bind failed. Error Code : " + str(msg[0]) + " Message " + str(msg[1])
        sys.exit() 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:59:43.940

您的示例代码应该能够在 Internet 上运行。从编程的角度来看，在 LAN 上或在 Internet 上运行的东西没有太大区别。

但是，如果您想通过 Internet 连接到套接字，则侦听套接字必须绑定到可路由的公共 IP 地址。

如果你朋友的电脑只是另一个局域网上的电脑，很可能它没有公网IP地址，因此你无法连接。

一种解决方案是制作类似于此[聊天示例](http://lightloch.com/2012/03/15/simple-python-chat-client-server/)的内容并`server.py`在 Internet 服务器上运行（使用公共 IP 地址）。您和您的朋友都将运行`client.py`.

# xcode - 如何将我的项目从外部驱动器保存到 Xcode？

> ID：14766168
> 
> 赞同：-1
> 
> 时间：2013-02-08T05:18:33.857
> 
> 标签：xcode

我将我的 xcode 项目和文件保存到外部拇指驱动器上，因为我必须在我的计算机中放入一个新硬盘并重新安装操作系统和 xcode。现在，当我连接驱动器并从驱动器窗口打开文件时，它将在 xcode 中打开项目。我试图在 xcode 文件菜单中单击保存，但是当我取出外部驱动器时，项目在 xcode 窗口中消失了。如何将项目保存到 Xcode 中，以便在我移除外部驱动器后它会保留在那里。我还是个新手，我敢肯定这很容易，但我想不通。任何帮助都是极好的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T05:21:37.930

我认为您可以简单地将项目文件夹拖放到内部硬盘驱动器中，然后从那里打开项目。

# c++ - 在 C++ 控制台中显示笑脸和悲伤脸的代码

> ID：14766169
> 
> 赞同：0
> 
> 时间：2013-02-08T05:18:40.613
> 
> 标签：c++, c++11

我是 C++ 的新手，我需要帮助才能使用 C++ 控制台获得笑脸和悲伤的脸，下面是我得到的代码，但它也没有给我大笑脸和悲伤的脸。

如果有人能提供帮助，我将不胜感激。

谢谢。

```
#include<iostream.h>

using namespace std;

int main()
{

      printf("%C",2);

      std::cin.ignore();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T05:29:50.857

根据您的终端，这些字符可能对应于 ASCII 代码 1 和 2，否则表示标题开头 (SOH) 和文本开头 (STX) 控制字符。

您可以通过尝试来测试：

```
#include <stdio.h>
int main(){
    printf("\1 \2");
} 
```

或者，您可以结合使用 unicode 的[表情符号块](http://www.fileformat.info/info/unicode/block/emoticons/list.htm)`wchar`、合适的语言环境和合适的字体来访问各种笑脸。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T05:22:32.997

[ASCII codes for smileys](http://chexed.com/ComputerTips/asciicodes.php) are `1` and `2`:

```
int main(int argc, char *argv[])
{
    printf("%c %c\n", 1, 2);
    return 0;
} 
```

Note: highly unstable, might cause your computer to explode! (*not really*) You should use Karthik T's suggestion :)

**Edit**

Seriously, you should use this only for fun. It may work or it may not work, depending on terminal emulator you are using. It is working on my Windows 8 cmd.exe screen, but it is not working in Putty via ssh.

# php - 我需要在 python 上做这个任何想法

> ID：14766174
> 
> 赞同：-1
> 
> 时间：2013-02-08T05:19:10.163
> 
> 标签：php, python, xml

我需要在 python 上执行此操作任何帮助，此代码检查 xml 文件中的调制解调器状态，如果不正常则激活服务

XML 示例

```
<SMSCStatus>
        <Name>HUAWEI Mobile Connect - 3G Modem</Name>
        <Status>ERROR</Status>
        <StatusDetail>
                Modem Failure -- Unable to access modem, ensure that it is powered on and passes diagnostic tests.
        </StatusDetail>
        <MessagesToday>0</MessagesToday>
        <MessagesLast7Days>0</MessagesLast7Days>
        <MessagesLast30Days>0</MessagesLast30Days>
</SMSCStatus>
<?php

$xml = simplexml_load_file("xmlfile");
$status1 = $xml->SMSCStatus->Status;

if ($status1 == "OK")
        {
        $fp = fopen("status.txt", "w");
        fwrite($fp, "2");
        fclose($fp);
        }
  else
        {
        $statusr = json_encode(array(
                'server' => 'TOO FAIL'
        ));
        echo exec('net start "NowSMS"');
        }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:51:34.493

在 python 中，将[其](https://stackoverflow.com/questions/1912434/easiest-way-to-parse-xml-in-python)用作exec的替代模块`simplexml_load_file`和[子进程模块。](http://docs.python.org/2/library/subprocess.html)

# java - 大于 2.3MB 的 png 文件的 OOM 错误

> ID：14766176
> 
> 赞同：0
> 
> 时间：2013-02-08T05:19:23.220
> 
> 标签：java, android, bitmap

我的应用程序在打开大小为 2.5MB 的 .png 文件时崩溃。此文件具有高分辨率。我收到 OOM 错误。

导致错误的代码是：

```
long sizeInMB = imageFile.length()/(1024*1024);
if(sizeInMB > 2){
    int inSampleSize = (int) (sizeInMB/5);
    if(sizeInMB%5 > 0){
        inSampleSize++;
    }
    Options opts = new Options();
    opts.inSampleSize=inSampleSize;
    bitmap = BitmapFactory.decodeFile(filePath, opts);    
}else{
    bitmap = BitmapFactory.decodeFile(filePath);
} 
```

该行`bitmap = BitmapFactory.decodeFile(filePath)`导致错误。

任何帮助将不胜感激，

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T05:29:22.920

因为在您的情况下，2MB 位图可能需要大约 10MB 的内存

参考[this](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html) on how to load large bitmaps

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T06:22:54.410

尝试使用它可能会解决您的问题。

```
Options opts = new Options(); 
  opts.inJustDecodeBounds = true; 
  BitmapFactory.decodeFile(path, opts); 
  Log.e("optwidth",opts.outWidth+""); 
  opts.inJustDecodeBounds = false; 
  if(opts.outWidth>500){ 
          opts.inSampleSize = 4; 
          mBitmap = BitmapFactory.decodeFile(path, opts); 
  } 
  else mBitmap = BitmapFactory.decodeFile(path, opts); 
```

我已经添加了宽度大小的代码，您也可以根据您对高度的要求添加。

如果您想了解更多信息，请查看此链接，它将对您有所帮助：[处理大型位图](https://stackoverflow.com/questions/2220949/handling-large-bitmaps)

其他建议的链接在这里：[Out of memory cache error when access inside the app](https://stackoverflow.com/questions/13606045/out-of-memory-cache-error-when-accessing-inside-the-app/13606461#13606461)

# linux - Linux 命令模糊重定向

> ID：14766180
> 
> 赞同：0
> 
> 时间：2013-02-08T05:19:40.740
> 
> 标签：linux, bash

嗨，我有一个名为 header.txt 的实验室标头，我想将 cat 放入我的 3 C 文件中 `cat ../header.txt > find -name *.c`

上述说法有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T06:15:35.220

I/O 重定向操作符`<`,`>`等等都只使用*一个单词*作为参数，并将其用作*文件名*。其他任何内容都被视为命令行的一部分。

所以当你运行这个时：

```
cat ../header.txt > find -name *.c 
```

它与此完全相同：

```
cat ../header.txt -name *.c > find 
```

这可能不会做任何有用的事情。

另一个问题：你`*.c`没有被转义或引用，所以 bash 会扩展它而不是将它传递给`find`.

* * *

你可以做你想做的事`tee`，它接受任意数量的参数：

```
cat ../header.txt | tee *.c 
```

然后你甚至不需要`cat`更多了，真的。

```
tee *.c < ../header.txt 
```

当然，您也可以使用`cp`. 也许您打算*附加*到这些文件？如果是这样，也传递`-a`给`tee`。

* * *

有趣的琐事：zsh 和其他一些 shell 将让您拥有*多个* `>`运算符，就像`tee`. （多个`<`也是允许的，并且像`cat`.）

```
cat infile > outfile1 > outfile2 
```

但是您实际上必须单独列出每个文件，因此您不能将此快捷方式与`*.c`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:28:29.597

输出重定向适用于文件，而不是命令。您需要分别处理每个文件。

```
find -name *.c -print0 | while IFS= read -r -d '' f; do
  cat ../header.txt >> $f   # Append instead of overwriting
done 
```

至于“模棱两可的重定向”，您通常会在编写如下内容时得到它：

```
... > *.c 
```

并且 glob`*.c`扩展到多个文件。例如：

```
$ echo "" >> *.c
-sh: *.c: ambiguous redirect
$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:09:09.893

您可以使用以下命令在您的 C 文件前面加上实验室的标头：

```
for file in *.c
do cat ../header.txt "$file" > x
   mv x "$file"
done 
```

如果这将是一个生产操作，你会担心使用一个唯一的文件名作为临时文件名（我只是假设如果你不小心把一个文件叫做`x`躺着，它不包含任何东西重要），您将处理中断等并清理中间文件。`mv`您可以考虑使用或`cp`替换原始文件是否更好- 再次考虑权限、符号链接、硬链接和清理。

# java - 如何实现 TLS-SRP 连接

> ID：14766181
> 
> 赞同：4
> 
> 时间：2013-02-08T05:19:44.250
> 
> 标签：java, ssl

我有一个客户端/服务器远程桌面应用程序，客户端将连接到服务器以远程控制服务器桌面。我想建立一个 TLS-SRP 来保护通道，因为 SRP 支持相互身份验证和前向保密。我的问题是 TLS-SRP 是否适合远程桌面应用程序，我也遇到过 TLS-DHE_RSA 哪个更安全？

谷歌搜索后，似乎 TLS-SRP 仅支持基于 Web 的应用程序？JSSE 也不支持 SRP。

# python - 如何在 django 中添加模型？

> ID：14766187
> 
> 赞同：-2
> 
> 时间：2013-02-08T05:20:17.073
> 
> 标签：python, django, django-models, django-views

我是 django 的新手，正在学习...

首先我提出了申请。阅读 django 书。我成功直到“模型”概念。

但是当我尝试添加模型时，我遇到了一些错误。实际上如何在django中连接模型。

我的 urls.py 看起来像

```
from django.conf.urls.defaults import *
from videoapp.views import hello, current_datetime, index, list

urlpatterns = patterns('',
    ('^videoapp/$', index),
    ('^videoapp/time/(\d{1,2})/$', current_datetime),
    ('^videoapp/list/$', list),
) 
```

视图.py

```
from django.template.loader import get_template
from django.template import Template, Context
from django.http import HttpResponse
import datetime
import MySQLdb

def hello(request):
    return HttpResponse("Hello world")

def current_datetime(request,offset):
    offset = int(offset)
    now = datetime.datetime.now()
    names={'current_date': now,'total':10}
    t = get_template('mytemplate.html')
    html = t.render(Context({'current': names}))
    return HttpResponse(html)

def index(request):
    now = datetime.datetime.now()
    names={'current_date': now,'total':10}
    t = get_template('index.html')
    html = t.render(Context({'current': names}))
    return HttpResponse(html)

def list(request):
    now = datetime.datetime.now()
    names={'current_date': now,'total':10}
    t = get_template('list.html')
    html = t.render(Context({'current': names}))
    return HttpResponse(html) 
```

设置.py

```
# Django settings for videoapp project.
import os
settings_dir = os.path.dirname(__file__)
PROJECT_ROOT = os.path.abspath(os.path.dirname(settings_dir))

DEBUG = True
TEMPLATE_DEBUG = DEBUG

ADMINS = (
    # ('Your Name', 'your_email@example.com'),
)

TEMPLATE_DIRS = (
    os.path.join(PROJECT_ROOT, 'videoapp/templates/'),
)

MANAGERS = ADMINS

DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.mysql', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': 'videoapp',                      # Or path to database file if using sqlite3.
        'USER': 'root',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': 'localhost',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '3306',                      # Set to empty string for default. Not used with sqlite3.
    }
}

# Local time zone for this installation. Choices can be found here:
# http://en.wikipedia.org/wiki/List_of_tz_zones_by_name
# although not all choices may be available on all operating systems.
# In a Windows environment this must be set to your system time zone.
TIME_ZONE = 'America/Chicago'

# Language code for this installation. All choices can be found here:
# http://www.i18nguy.com/unicode/language-identifiers.html
LANGUAGE_CODE = 'en-us'

SITE_ID = 1

# If you set this to False, Django will make some optimizations so as not
# to load the internationalization machinery.
USE_I18N = True

# If you set this to False, Django will not format dates, numbers and
# calendars according to the current locale.
USE_L10N = True

# If you set this to False, Django will not use timezone-aware datetimes.
USE_TZ = True

# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = ''

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = 'v*7)@c@qyyoqg0=pbbllrv$$oip*ke^njgr63o1g9gdzc9@x)c'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    #'django.middleware.common.CommonMiddleware',
    #'django.contrib.sessions.middleware.SessionMiddleware',
    #'django.middleware.csrf.CsrfViewMiddleware',
    #'django.contrib.auth.middleware.AuthenticationMiddleware',
    #'django.contrib.messages.middleware.MessageMiddleware',

    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'videoapp.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'videoapp.wsgi.application'

TEMPLATE_DIRS = (
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    #'django.contrib.auth',
    #'django.contrib.contenttypes',
    #'django.contrib.sessions',
    #'django.contrib.sites',
    #'django.contrib.messages',
    #'django.contrib.staticfiles',

    # Uncomment the next line to enable the admin:
    # 'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'videoapp'
    #'videoapp.users'

)

# A sample logging configuration. The only tangible logging
# performed by this configuration is to send an email to
# the site admins on every HTTP 500 error when DEBUG=False.
# See http://docs.djangoproject.com/en/dev/topics/logging for
# more details on how to customize your logging configuration.
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'filters': {
        'require_debug_false': {
            '()': 'django.utils.log.RequireDebugFalse'
        }
    },
    'handlers': {
        'mail_admins': {
            'level': 'ERROR',
            'filters': ['require_debug_false'],
            'class': 'django.utils.log.AdminEmailHandler'
        }
    },
    'loggers': {
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': True,
        },
    }
} 
```

现在我已经连接了数据库，并且在 db 中有一个名为“users”的表。

我必须创建一个模型，并且需要在“列表”视图中获取所有用户。

有人可以用正确的方法给我建议吗？我认为 Django 的书在这部分很复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T05:24:38.610

**models.py**

```
class Sample(models.Model):
    user = models.ForeignKey(User)
    key = models.CharField(max_length=35, unique=True)
    created = models.DateTimeField(auto_now_add=True)

    def __unicode__(self):
        return self.user 
```

**views.py**

```
from app_name.models import Sample
def view_name(request):
    samples = Sample.objects.filter()
return render(request, 'page.html', {'samples': samples}) 
```

**template.html**

```
{% for sample in samples %}
    {{sample.user}}<br/>{{sample.key}}.....
{% endfor %} 
```

# ember.js - Ember.js 属性观察者异常行为

> ID：14766192
> 
> 赞同：2
> 
> 时间：2013-02-08T05:20:30.380
> 
> 标签：ember.js

我与 Ember 的财产观察员一起经历了一些不寻常的行为。请参阅此 jfiddle 以了解实际代码：http: [//jsfiddle.net/sBVtJ/3/](http://jsfiddle.net/sBVtJ/3/)

1.  当观察者监视两个属性时，当两个属性同时更新时，它将被触发两次。
2.  当在控制器上为另一个路由设置观察者时，它不会开始触发，直到该路由处于活动状态（预期）。但是当离开那条路线时，观察者会继续开火（不是故意的）。

关于行为2的更多讨论：首次加载应用程序时，您可以单击“更改多个属性操作”，属性将开始递增。然而，观察者并没有被解雇。现在导航到观察者路线。当您增加属性时，观察者将触发。然后导航回索引路线。观察者将继续触发属性增量。现在，每次从任一路由增加属性时，都会触发观察者。我的预期行为是仅在观察者路线处于活动状态时让观察者触发。有什么办法可以做到这一点？

我对行为 1 的问题：请注意，每当更新属性时，观察者都会触发两次，即使它们同时更新。同时更新两个属性时，是否可以让观察者只触发一次？

```
App = Ember.Application.create();

App.Router.map(function(){
    this.resource('observer');
});
App.Router.reopen({location:'none'});

App.ApplicationController = Ember.Controller.extend({
    consoleProp: function(){
        console.log(this.get('controllers.application.prop1'));
    },
    changeTwoProperties: function(){
        this.get('controllers.application').incrementProperty('prop1');
        this.get('controllers.application').incrementProperty('prop2');
    },
    prop1:0,
    prop2:0
});

App.IndexController = Ember.Controller.extend({
    needs: ['application'],
    changeTwoPropertiesBinding: 'controllers.application.changeTwoProperties',
    consolePropBinding: 'controllers.application.consoleProp'
});

App.ObserverController = Ember.Controller.extend({
    needs: ['application'],
    changeTwoPropertiesBinding: 'controllers.application.changeTwoProperties',
    consolePropBinding: 'controllers.application.consoleProp',

    theObserver: function(){
        console.log('observer fired');
    }.observes('controllers.application.prop1', 'controllers.application.prop2')
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:15:55.860

对于第一部分，使用`Ember.beginPropertyChanges()`and `Ember.endPropertyChanges()`。有关更多信息，请参阅[此 SO 答案](https://stackoverflow.com/questions/8752805/emberjs-set-multiple-properties-at-once)

```
Ember.beginPropertyChanges();
this.get('controllers.application').incrementProperty('prop1');
this.get('controllers.application').incrementProperty('prop2');
Ember.endPropertyChanges(); 
```

对于第二种行为，它需要更多的研究。我认为`ObserverController`在您访问观察者路线之前不会创建，但是当您离开路线时，它不会被破坏..

# python - testing whether a Numpy array contains a given row

> ID：14766194
> 
> 赞同：67
> 
> 时间：2013-02-08T05:20:34.743
> 
> 标签：python, numpy

Is there a Pythonic and efficient way to check whether a Numpy array contains at least one instance of a given row? By "efficient" I mean it terminates upon finding the first matching row rather than iterating over the entire array even if a result has already been found.

With Python arrays this can be accomplished very cleanly with `if row in array:`, but this does not work as I would expect for Numpy arrays, as illustrated below.

With Python arrays:

```
>>> a = [[1,2],[10,20],[100,200]]
>>> [1,2] in a
True
>>> [1,20] in a
False 
```

but Numpy arrays give different and rather odd-looking results. (The `__contains__` method of `ndarray` seems to be undocumented.)

```
>>> a = np.array([[1,2],[10,20],[100,200]])
>>> np.array([1,2]) in a
True
>>> np.array([1,20]) in a
True
>>> np.array([1,42]) in a
True
>>> np.array([42,1]) in a
False 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-02-08T06:18:12.377

You can use .tolist()

```
>>> a = np.array([[1,2],[10,20],[100,200]])
>>> [1,2] in a.tolist()
True
>>> [1,20] in a.tolist()
False
>>> [1,20] in a.tolist()
False
>>> [1,42] in a.tolist()
False
>>> [42,1] in a.tolist()
False 
```

Or use a view:

```
>>> any((a[:]==[1,2]).all(1))
True
>>> any((a[:]==[1,20]).all(1))
False 
```

Or generate over the numpy list (potentially VERY SLOW):

```
any(([1,2] == x).all() for x in a)     # stops on first occurrence 
```

Or use numpy logic functions:

```
any(np.equal(a,[1,2]).all(1)) 
```

If you time these:

```
import numpy as np
import time

n=300000
a=np.arange(n*3).reshape(n,3)
b=a.tolist()

t1,t2,t3=a[n//100][0],a[n//2][0],a[-10][0]

tests=[ ('early hit',[t1, t1+1, t1+2]),
        ('middle hit',[t2,t2+1,t2+2]),
        ('late hit', [t3,t3+1,t3+2]),
        ('miss',[0,2,0])]

fmt='\t{:20}{:.5f} seconds and is {}'     

for test, tgt in tests:
    print('\n{}: {} in {:,} elements:'.format(test,tgt,n))

    name='view'
    t1=time.time()
    result=(a[...]==tgt).all(1).any()
    t2=time.time()
    print(fmt.format(name,t2-t1,result))

    name='python list'
    t1=time.time()
    result = True if tgt in b else False
    t2=time.time()
    print(fmt.format(name,t2-t1,result))

    name='gen over numpy'
    t1=time.time()
    result=any((tgt == x).all() for x in a)
    t2=time.time()
    print(fmt.format(name,t2-t1,result))

    name='logic equal'
    t1=time.time()
    np.equal(a,tgt).all(1).any()
    t2=time.time()
    print(fmt.format(name,t2-t1,result)) 
```

You can see that **hit or miss, the numpy routines are the same speed to search the array**. The Python `in` operator is *potentially* a lot faster for an early hit, and the generator is just bad news if you have to go all the way through the array.

Here are the results for 300,000 x 3 element array:

```
early hit: [9000, 9001, 9002] in 300,000 elements:
    view                0.01002 seconds and is True
    python list         0.00305 seconds and is True
    gen over numpy      0.06470 seconds and is True
    logic equal         0.00909 seconds and is True

middle hit: [450000, 450001, 450002] in 300,000 elements:
    view                0.00915 seconds and is True
    python list         0.15458 seconds and is True
    gen over numpy      3.24386 seconds and is True
    logic equal         0.00937 seconds and is True

late hit: [899970, 899971, 899972] in 300,000 elements:
    view                0.00936 seconds and is True
    python list         0.30604 seconds and is True
    gen over numpy      6.47660 seconds and is True
    logic equal         0.00965 seconds and is True

miss: [0, 2, 0] in 300,000 elements:
    view                0.00936 seconds and is False
    python list         0.01287 seconds and is False
    gen over numpy      6.49190 seconds and is False
    logic equal         0.00965 seconds and is False 
```

And for 3,000,000 x 3 array:

```
early hit: [90000, 90001, 90002] in 3,000,000 elements:
    view                0.10128 seconds and is True
    python list         0.02982 seconds and is True
    gen over numpy      0.66057 seconds and is True
    logic equal         0.09128 seconds and is True

middle hit: [4500000, 4500001, 4500002] in 3,000,000 elements:
    view                0.09331 seconds and is True
    python list         1.48180 seconds and is True
    gen over numpy      32.69874 seconds and is True
    logic equal         0.09438 seconds and is True

late hit: [8999970, 8999971, 8999972] in 3,000,000 elements:
    view                0.09868 seconds and is True
    python list         3.01236 seconds and is True
    gen over numpy      65.15087 seconds and is True
    logic equal         0.09591 seconds and is True

miss: [0, 2, 0] in 3,000,000 elements:
    view                0.09588 seconds and is False
    python list         0.12904 seconds and is False
    gen over numpy      64.46789 seconds and is False
    logic equal         0.09671 seconds and is False 
```

Which seems to indicate that `np.equal` is the fastest pure numpy way to do this...

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-08T12:12:57.300

Numpys `__contains__` [is, at the time of writing this, `(a == b).any()`](https://github.com/numpy/numpy/blob/7bc5480/numpy/core/src/multiarray/sequence.c#L114-L130) which is arguably only correct if `b` is a scalar (it is a bit hairy, but I believe – works like this only in 1.7\. or later – this would be the right general method `(a == b).all(np.arange(a.ndim - b.ndim, a.ndim)).any()`, which makes sense for all combinations of `a` and `b` dimensionality)...

EDIT: Just to be clear, this is *not* necessarily the expected result when broadcasting is involved. Also someone might argue that it should handle the items in `a` separately as `np.in1d` does. I am not sure there is one clear way it should work.

Now you want numpy to stop when it finds the first occurrence. This AFAIK does not exist at this time. It is difficult because numpy is based mostly on ufuncs, which do the same thing over the whole array. Numpy does optimize these kind of reductions, but effectively that only works when the array being reduced is already a boolean array (i.e. `np.ones(10, dtype=bool).any()`).

Otherwise it would need a special function for `__contains__` which does not exist. That may seem odd, but you have to remember that numpy supports many data types and has a bigger machinery to select the correct ones and select the correct function to work on it. So in other words, the ufunc machinery cannot do it, and implementing `__contains__` or such specially is not actually that trivial because of data types.

You can of course write it in python, or since you probably know your data type, writing it yourself in Cython/C is very simple.

* * *

That said. Often it is much better anyway to use sorting based approach for these things. That is a little tedious as well as there is no such thing as `searchsorted` for a `lexsort`, but it works (you could also abuse `scipy.spatial.cKDTree` if you like). This assumes you want to compare along the last axis only:

```
# Unfortunatly you need to use structured arrays:
sorted = np.ascontiguousarray(a).view([('', a.dtype)] * a.shape[-1]).ravel()

# Actually at this point, you can also use np.in1d, if you already have many b
# then that is even better.

sorted.sort()

b_comp = np.ascontiguousarray(b).view(sorted.dtype)
ind = sorted.searchsorted(b_comp)

result = sorted[ind] == b_comp 
```

This works also for an array `b`, and if you keep the sorted array around, is also much better if you do it for a single value (row) in `b` at a time, when `a` stays the same (otherwise I would just `np.in1d` after viewing it as a recarray). *Important:* you must do the `np.ascontiguousarray` for safety. It will typically do nothing, but if it does, it would be a big potential bug otherwise.

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-02-08T05:30:05.910

I think

```
equal([1,2], a).all(axis=1)   # also,  ([1,2]==a).all(axis=1)
# array([ True, False, False], dtype=bool) 
```

will list the rows that match. As Jamie points out, to know whether at least one such row exists, use `any`:

```
equal([1,2], a).all(axis=1).any()
# True 
```

Aside:
I suspect `in` (and `__contains__`) is just as above but using `any` instead of `all`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-02-26T19:41:30.347

I've compared the suggested solutions with [perfplot](https://github.com/nschloe/perfplot) and found that, if you're looking for a 2-tuple in a long unsorted list,

```
np.any(np.all(a == b, axis=1)) 
```

is the fastest solution. An explicit short-circuit loop can always be faster if a match is found in the first few rows.

## [![enter image description here](../Images/a64ad5b8324c1836d50f508706334e06.png)](https://i.stack.imgur.com/lpYJP.png)

Code to reproduce the plot:

```
import numpy as np
import perfplot

target = [6, 23]

def setup(n):
    return np.random.randint(0, 100, (n, 2))

def any_all(data):
    return np.any(np.all(target == data, axis=1))

def tolist(data):
    return target in data.tolist()

def loop(data):
    for row in data:
        if np.all(row == target):
            return True
    return False

def searchsorted(a):
    s = np.ascontiguousarray(a).view([('', a.dtype)] * a.shape[-1]).ravel()
    s.sort()
    t = np.ascontiguousarray(target).view(s.dtype)
    ind = s.searchsorted(t)
    return (s[ind] == t)[0]

perfplot.save(
    "out02.png",
    setup=setup,
    kernels=[any_all, tolist, loop, searchsorted],
    n_range=[2 ** k for k in range(2, 20)],
    xlabel="len(array)",
) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T10:01:43.947

If you really want to stop at the first occurrence, you could write a loop, like:

```
import numpy as np

needle = np.array([10, 20])
haystack = np.array([[1,2],[10,20],[100,200]])
found = False
for row in haystack:
    if np.all(row == needle):
        found = True
        break
print("Found: ", found) 
```

However, I strongly suspect, that it will be much slower than the other suggestions which use numpy routines to do it for the whole array.

# python - 为什么 setattr 和 getattr 允许空格？

> ID：14766196
> 
> 赞同：16
> 
> 时间：2013-02-08T05:20:37.223
> 
> 标签：python, attributes

假设我定义了这个类：

```
class A:
    pass

a = A() 
```

现在显然我可以像这样设置属性：

```
a.x = 5 
```

但是使用`setattr`，我可以给出`a`名称中包含空格的属性。

```
setattr(a, 'white space', 1)
setattr(a, 'new\nline', None) 
```

`dir(a)`包含`'white space'`和`'new\nline'`。

我无法使用`.`运算符访问这些属性，因为它会引发`SyntaxError`：

```
>>> a.white space
  File "<interactive input>", line 1
    a.white space
                ^
SyntaxError: invalid syntax
>>> a.new\nline
  File "<interactive input>", line 1
    a.new\nline
              ^
SyntaxError: unexpected character after line continuation character 
```

但我可以`getattr`：

```
>>> getattr(a, 'white space')
1
>>> getattr(a, 'new\nline')
None 
```

这个功能背后有什么原因吗？如果是这样，它是什么？

我们应该利用它，还是遵循 PEP8 中定义的标准？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-08T05:34:00.457

对象属性仅仅是在对象的`__dict__`. 如果您从这个角度考虑它，那么在属性名称中允许空格（或任何其他可以包含在 a`str`中的字符）是完全有意义的。

```
>>> class X(object):
...  pass
... 
>>> x = X()
>>> setattr(x, 'some attribute', 'foo')
>>> x.__dict__
{'some attribute': 'foo'}
>>> x.__dict__['some attribute']
'foo' 
```

也就是说，Python 的语言语法不允许在直接属性引用中使用空格，因为解释器不知道如何对程序源进行属性标记（解析）。我会坚持使用可以通过直接属性引用访问的[属性名称](http://www.pasteur.fr/formation/infobio/python/ch02s03.html)，除非您绝对需要这样做。

# .net - 来自 .net Web 请求的 curl 和证书参数

> ID：14766199
> 
> 赞同：1
> 
> 时间：2013-02-08T05:20:49.220
> 
> 标签：.net, curl, certificate

以前我问过一个关于 curl 和安全证书的问题，以及如何在 .net 中完成等价的：

[使用 .NET 使用安全证书的 cURL 请求](https://stackoverflow.com/questions/13533351/curl-request-using-net-using-security-certificate)

我正在尝试从在本地系统下运行的 Windows 服务运行代码（我知道这不是最好的想法，但我需要访问文件）

该服务在我无法添加证书的登录下运行。所以我想知道是否有一种方法可以像 curl 使用来自 .net webrequest 的 pem 文件那样完成它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:29:37.627

弄清楚了

我有一个 PFX 文件，事实证明，如果我使用 X509Certificate2 而不是 X509Certificate，我可以从该文件创建证书，并将 pfx 文件名和密码传递给类的构造函数：

X509Certificate2 证书 = 新 X509Certificate2(fullPathToPFXFile, certificatePassword);

req = (HttpWebRequest)WebRequest.Create("www.abc.com");

req.ClientCertificates.Add(cert);

# windows-phone-7 - 如何在 Windows Phone 的 Messagebox 中添加超链接按钮？

> ID：14766203
> 
> 赞同：0
> 
> 时间：2013-02-08T05:20:56.550
> 
> 标签：windows-phone-7, hyperlink, messagebox

我想在 Messagebox 中显示超链接。例如像这样

![在此处输入图像描述](../Images/648bf80070a41f2da99ac596f405a6d8.png)

如果用户点击位置设置，它将打开设置页面。我也想在可能的应用程序中做类似的事情。

谢谢你，娜迦·哈里什。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:23:20.583

您不能自定义默认 MessageBox。相反，您可以创建一个可以用作 MessageBox 的自定义用户控件。

否则，我建议您使用[MessagePrompt](http://coding4fun.codeplex.com/wikipage?title=MessagePrompt)，它可以帮助您根据需要自定义它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T11:43:30.123

或者您可以使用[Windows Phone Toolkit中的 CustomMessageBox 实现](http://phone.codeplex.com/)

在这里可以找到示例[...](http://shawnoster.com/2012/10/welcome-custommessagebox-to-the-windows-phone-toolkit/)（在底部还有您正在搜索的超链接）

# asp.net-mvc - ASP.NET MVC 应用程序不会更新某些控制器

> ID：14766208
> 
> 赞同：3
> 
> 时间：2013-02-08T05:21:30.830
> 
> 标签：asp.net-mvc, visual-studio-2012, publishing

我正在使用 Visual Studio 2012 中针对 Web 应用程序的发布 Web 选项发布到 IIS。当我发布时，控制台告诉我构建和发布成功，并且在大多数情况下，一切都正确发布。但是有一个控制器最近没有发布。没有错误，但它不会发布。

我尝试删除控制器和视图，清理解决方案，关闭我的网络服务器，删除整个发布目录，然后重新发布。但是当我再次启动服务器时，旧控制器仍然存在！所以我创建了一个具有不同名称的新控制器并发布了 - 新控制器与旧幻像一起成功发布，但现在我需要进行更改，我遇到了与新控制器相同的问题......我不'不明白为什么会这样。有人见过这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T16:01:42.980

1.  打开*解决方案资源管理器*
2.  右键单击文件
3.  点击**属性**
4.  将**复制到输出**更改为**始终**复制或**如果更新则复制**

# git - Jenkins + Git Publisher - 如何推回 {GIT_BRANCH}？

> ID：14766214
> 
> 赞同：9
> 
> 时间：2013-02-08T05:21:44.057
> 
> 标签：git, jenkins

我在 Jenkins 1.500 上使用当前版本的 Git 插件（SCM 提供者和发布者）。SCM 轮询工作正常，使用我的 git HTTP URL 和“功能-*”的“构建分支”设置。这会获取对任何分支的更改，例如“feature-1234”，运行构建/测试/覆盖任务，并报告成功或失败。所有这些工作都很好，包括来自集成分支的合并，代码应该在成功构建和代码审查后结束。

问题在于尝试将完成的构建分支推回原点，在同一个“feature-1234”分支上。在这种情况下，构建变量“GIT_BRANCH”包含“origin/feature-1234”，它会在构建成功后在 Git Publisher 中产生以下错误和失败：

```
Pushing HEAD to branch origin/feature-1234 at repo origin
ERROR: Failed to push branch origin/feature-1234 to origin
hudson.plugins.git.GitException: Command "/usr/bin/git push https://jenkins:jenkinsPWD@myproject.com/git/project HEAD:origin/feature-1234" returned status code 1:
stdout: 
stderr: error: unable to push to unqualified destination: origin/feature-1234
The destination refspec neither matches an existing ref on the remote nor
begins with refs/, and we are unable to guess a prefix based on the source ref.
error: failed to push some refs to 'https://jenkins:jenkinsPWD@myproject.com/git/project'

    at hudson.plugins.git.GitAPI.launchCommandIn(GitAPI.java:897)
    at hudson.plugins.git.GitAPI.launchCommand(GitAPI.java:858)
    at hudson.plugins.git.GitAPI.push(GitAPI.java:915)
    at hudson.plugins.git.GitPublisher$4.invoke(GitPublisher.java:351)
    at hudson.plugins.git.GitPublisher$4.invoke(GitPublisher.java:333)
    at hudson.FilePath.act(FilePath.java:865)
    at hudson.FilePath.act(FilePath.java:838)
    at hudson.plugins.git.GitPublisher.perform(GitPublisher.java:333)
    at hudson.tasks.BuildStepMonitor$3.perform(BuildStepMonitor.java:36)
    at hudson.model.AbstractBuild$AbstractBuildExecution.perform(AbstractBuild.java:810)
    at hudson.model.AbstractBuild$AbstractBuildExecution.performAllBuildSteps(AbstractBuild.java:785)
    at hudson.model.Build$BuildExecution.post2(Build.java:183)
    at hudson.model.AbstractBuild$AbstractBuildExecution.post(AbstractBuild.java:732)
    at hudson.model.Run.execute(Run.java:1582)
    at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
    at hudson.model.ResourceController.execute(ResourceController.java:88)
    at hudson.model.Executor.run(Executor.java:236)
Build step 'Git Publisher' changed build result to FAILURE
Build step 'Git Publisher' marked build as failure 
```

看到那里额外的“起源”了吗？**origin/feature-1234** <== 这是 ${GIT_BRANCH} 的当前值，虽然我知道它是一个远程分支，但它阻止了我运行我们想要遵循的过程。

如果我错过了一些简单的东西，我很想听听。但是我已经为构建中与 git 相关的各个部分尝试了许多不同的设置，但似乎没有什么可以让我将合并和测试的代码提交回工作分支（与集成分支相反，这很容易做到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-01T01:32:40.197

在构建配置中，“Source Code Management” => Advance 有一个字段“Name” 需要指定repository的ID，然后在git发布者插件中使用：“Target remote name”

这两个名字需要相同看“？” - 获取更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T15:18:40.457

对我来说，一种解决方法似乎是手动推送分支，至少每次都相同时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-17T11:22:41.783

我建议将完全限定配置`/refs/remotes/origin/feature-1234`为您的 Git“要构建的分支”。这种方式对我来说似乎更容易理解。

在这种情况下，您的 $GIT_BRANCH 会被 Jenkins 神奇地设置为`origin/feature-1234`与您观察到的相同。

然后，不要使用过于复杂（但可移植）的 GitPublisher，只需添加一个构建后步骤“Execute Shell”：

```
echo Remote branch is $GIT_BRANCH, replacing origin with refs/heads.
git push --follow-tags "$GIT_URL" "+HEAD:${GIT_BRANCH/#origin\//refs/heads/}" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-06T09:22:36.227

我手动推动更改。您可以在批处理脚本中使用如下的 windows 环境变量：

这评估为例如。**'git结帐功能-1234'**

```
git checkout %GIT_BRANCH:origin/= % 
```

这评估为例如。**'git push origin feature-1234'**

```
git push %GIT_BRANCH:/= % 
```

您也可以对令牌宏执行类似的操作，例如`${GIT_BRANCH##origin/}`和`${GIT_BRANCH#*/}`。这些在一些 Jenkins 插件中工作，但不是全部，所以它可能在 Git Publisher 中不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-29T22:59:46.140

在构建部分添加“执行 shell 脚本”使用这个 shell 脚本：

```
echo current Branch is ${GIT_BRANCH#*/}
git checkout ${GIT_BRANCH#*/}
git commit -am 'Your commit message'
git push origin ${GIT_BRANCH#*/} 
```

这应该是构建部分的最后一步。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-04-11T01:11:08.693

首先，寻找`GIT_LOCAL_BRANCH`变量（[https://plugins.jenkins.io/git/#branch-variables](https://plugins.jenkins.io/git/#branch-variables)）

在我的情况下它丢失了，所以我从`GIT_BRANCH`变量中提取它，作为一个肮脏的解决方法

```
$ GIT_LOCAL_BRANCH=$(echo ${GIT_BRANCH} | awk -F\/ '{print $2}')
$ echo $GIT_LOCAL_BRANCH
feature-1234 
```

# javascript - 用于流程图的开源 HTML5 JS 库

> ID：14766216
> 
> 赞同：11
> 
> 时间：2013-02-08T05:21:45.010
> 
> 标签：javascript, html, html5-canvas, flowchart

我打算编写一个应用程序，它可以让我绘制流程图，例如可以跨越连接到 N 级深度的多个动态矩形（节点）的图表。很明显的想法是使用一个flowchat库来达到目的。我喜欢[http://gojs.net/latest/samples/flowchart.html](http://gojs.net/latest/samples/flowchart.html)提供的示例，但由于许可条款，我可能无法使用它。

我正在搜索开源 JS 库，以便可以在 HTML5 画布上绘制此类图表。有什么想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-08T07:24:08.933

为符合我们需要的东西找到了一些不错的库。任何寻找类似的人都可以在 GitHub [https://github.com/jsplumb/jsplumb上查看](https://github.com/jsplumb/jsplumb)

# c# - 在 Word 文档中突出显示字符串

> ID：14766219
> 
> 赞同：2
> 
> 时间：2013-02-08T05:22:26.143
> 
> 标签：c#, asp.net, aspose

我在一个 ASP.NET 网站（Web Forms，.NET 4.0）中工作我有一个使用 Aspose.Words 创建的 word 文档。现在我需要突出显示 word 文档中的某些字符串。我需要一个函数来执行这个行动。像这样的东西，

```
private void Highlight(Document doc,String anyString,Color red)
{
    //Highlight all "anyString" in doc by red color
} 
```

有人可以帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T05:51:52.300

您可以使用 Aspose 为您执行此操作，因此您可以避免 Web 服务器上的单词自动化（可能没有安装 Office）。大部分代码都基于 Aspose[文档](http://www.aspose.com/docs/display/wordsnet/How+to++Find+and+Highlight+Text)中的示例。

设置以下类：

```
 private class ReplaceEvaluatorFindAndHighlight : IReplacingCallback
    {
        /// <summary>
        /// This method is called by the Aspose.Words find and replace engine for each match.
        /// This method highlights the match string, even if it spans multiple runs.
        /// </summary>
        ReplaceAction IReplacingCallback.Replacing(ReplacingArgs e)
        {
            // This is a Run node that contains either the beginning or the complete match.
            Node currentNode = e.MatchNode;

            // The first (and may be the only) run can contain text before the match, 
            // in this case it is necessary to split the run.
            if (e.MatchOffset > 0)
                currentNode = SplitRun((Run)currentNode, e.MatchOffset);

            // This array is used to store all nodes of the match for further highlighting.
            List<Node> runs = new List<Node>();

            // Find all runs that contain parts of the match string.
            int remainingLength = e.Match.Value.Length;
            while (
                (remainingLength > 0) &&
                (currentNode != null) &&
                (currentNode.GetText().Length <= remainingLength))
            {
                runs.Add(currentNode);
                remainingLength = remainingLength - currentNode.GetText().Length;

                // Select the next Run node. 
                // Have to loop because there could be other nodes such as BookmarkStart etc.
                do
                {
                    currentNode = currentNode.NextSibling;
                }
                while ((currentNode != null) && (currentNode.NodeType != NodeType.Run));
            }

            // Split the last run that contains the match if there is any text left.
            if ((currentNode != null) && (remainingLength > 0))
            {
                SplitRun((Run)currentNode, remainingLength);
                runs.Add(currentNode);
            }

            // Now highlight all runs in the sequence.
            foreach (Run run in runs)
                run.Font.HighlightColor = Color.Red;

            // Signal to the replace engine to do nothing because we have already done all what we wanted.
            return ReplaceAction.Skip;
        }

        /// <summary>
        /// Splits text of the specified run into two runs.
        /// Inserts the new run just after the specified run.
        /// </summary>
        private static Run SplitRun(Run run, int position)
        {
            Run afterRun = (Run)run.Clone(true);
            afterRun.Text = run.Text.Substring(position);
            run.Text = run.Text.Substring(0, position);
            run.ParentNode.InsertAfter(afterRun, run);
            return afterRun;
        }
    } 
```

然后使用它：

```
Aspose.Words.Document doc = new Aspose.Words.Document(@"Z:\Temp\test.docx");

Regex reg = new Regex("anyString", RegexOptions.IgnoreCase);
doc.Range.Replace(reg, new ReplaceEvaluatorFindAndHighlight(), true);

doc.Save(@"Z:\Temp\newdoc.docx"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:28:50.093

您可以使用以下代码打开 Word 文档并突出显示搜索到的文本：

```
private void btnFind_Click(object sender, EventArgs e)
{
object fileName = "xxxxx"; //The filepath goes here
string textToFind = "xxxxx"; //The text to find goes here
Word.Application word = new Word.Application();
Word.Document doc = new Word.Document();
object missing = System.Type.Missing;
try
{
    doc = word.Documents.Open(ref fileName, ref missing, ref missing, 
    ref missing, ref missing, ref missing, ref missing, ref missing, 
    ref missing, ref missing, ref missing, ref missing, ref missing, 
    ref missing, ref missing, ref missing);
    doc.Activate();
    foreach (Word.Range docRange in doc.Words)
    {
        if(docRange.Text.Trim().Equals(textToFind,
           StringComparison.CurrentCultureIgnoreCase))
        {
            docRange.HighlightColorIndex = 
              Microsoft.Office.Interop.Word.WdColorIndex.wdDarkYellow;
            docRange.Font.ColorIndex = 
              Microsoft.Office.Interop.Word.WdColorIndex.wdWhite;
        }
    }
}
catch (Exception ex)
{
    MessageBox.Show("Error : " + ex.Message);
}
} 
```

您必须使用以下语句添加对 Microsoft.Office.Interop.Word 的引用：

```
using Word = Microsoft.Office.Interop.Word; 
```

如果你想做一个函数，然后修改它

# iphone - Convert a NSString into a NSArray

> ID：14766221
> 
> 赞同：0
> 
> 时间：2013-02-08T05:22:28.033
> 
> 标签：iphone, objective-c, xcode, nsstring, nsarray

I received data from a JSON web service and converted it to an NSArray. I've saved the NSArray in my database for retrieval at a later date. The data in the database looks like this:

```
(
        {
        ResponseCount = 2;
        ResponseTotal = 8;
    },
        {
        ResponseCount = 6;
        ResponseTotal = 8;
    }
) 
```

Now I'm at the point where I want to take that data and turn it back into an NSArray. I try doing something along the lines of

```
NSArray *responseArray = self.CoreDataTable.ResponseArray; //NSString value 
```

or

```
NSArray *responseArray = (NSArray *) self.CoreDataTable.ResponseArray; //NSString value 
```

But when this runs, the NSArray comes back with no objects in it. Any ideas what is wrong?

* * *

Code to clarify data saving process.

```
CoreDataTable *coreDataTable = [NSEntityDescription insertNewObjectForEntityForName:@"CoreDataTable" inManagedObjectContext:self.managedObjectContext];
coreDataTable.CategoryName = [d objectForKey: @"CategoryName"];
coreDataTable.ResponseArray = [d objectForKey: @"ResponseArray"];
[self.managedObjectContext save:nil]; 
```

# python - Regex needed for variable expansion in python

> ID：14766227
> 
> 赞同：0
> 
> 时间：2013-02-08T05:23:12.790
> 
> 标签：python, regex

I am having a variable having a value something like this

```
var = '${home_${path}}' 
```

I want a regex which detects `${ any content }` recursively. That is, first I should match `${home_${path}}` and then `${path}`. I need this to evaluate the variable content by replacing ${..} with its actual content.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:30:12.857

我认为你需要一个正则函数而不是正则表达式。问题是纯正则表达式无法匹配任意嵌套的递归模式。因此，它们对于赛道匹配的开启者和关闭者没有多大用处。

相反，编写一个函数来传递跟踪 LIFO 堆栈中的开启者的输入字符串（只需附加到常规 python 列表），然后在找到它们时匹配关闭器（弹出最近的相应开启者）：

```
import re

braces = re.compile(r'(\${)|(})')

def substitute(s, **env):
    openers = []
    pos = 0
    while 1:
        mo = braces.search(s, pos)
        if mo is None:
            break
        opener, closer = mo.groups()
        if opener:
            openers.append(mo.start())
            pos = mo.end() + 1
            continue
        start = openers.pop()
        end = mo.end()
        body = s[start+2 : end-1]
        s = s[:start] + env[body] + s[end:]
    return s

print substitute('Return to ${home_${path}} for further ${action}',
                 home_world='earth',
                 home_state='kansas',
                 path='state',
                 action='orders') 
```

# scala - Scala按顺序打印地图

> ID：14766228
> 
> 赞同：1
> 
> 时间：2013-02-08T05:23:16.070
> 
> 标签：scala, map, match

我有一个 Map[String,String] ，我想根据键以特定的顺序打印它。例如，我想打印 id、name、address 的值。所以我想将我的键与“id”、“name”、“address”匹配，然后打印每个键的值。我有以下代码，但它不起作用：

```
articlesmap.keys match{
    case ("id") => println(articlesmap.get("id"))
        case ("name") => println(articlesmap.get("name"))
        case ("address") => println(articlesmap.get("address"))
 } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T05:42:25.267

你可以使用`for`：

```
for { 
  k <- Seq("id", "name", "address") // the keys in the order you want to print them.
  v <- articlesmap.get(k) 
} println (k+ " is " + v) 
```

如果您只想打印值，`collect`则可以：

```
Seq("id", "name", "address") collect articlesmap foreach println 
```

`collect`比`map`id 你不能确定一个键实际上在地图中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T06:14:27.260

这是我所知道的最简单的解决方案：

```
scala>  val keys = Seq("id", "name", "address") 
keys: Seq[java.lang.String] = List(id, name, address)

scala>  val articlesmap = Map("id" -> 1, "name" -> "john", "address" -> "some address")
articlesmap: scala.collection.immutable.Map[java.lang.String,Any] = Map(id -> 1, name -> john, address -> some address)

scala>  keys map articlesmap foreach println
1
john
some address

scala>  val keys = Seq("name", "id", "address")
keys: Seq[java.lang.String] = List(name, id, address)

scala>  keys map articlesmap foreach println
john
1
some address 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T05:41:15.670

变量 articlemap.keys 是 type `Iterable[String]`，但您的案例匹配匹配 type `String`。试试这个：

```
def mapTest(map: Map[String, String]) {
    map.keys.foreach {
      case ("id") => println(map.get("id"))
      case ("name") => println(map.get("name"))
      case ("address") => println(map.get("address"))
    }
  }                                            

  val mapper = Map("id" -> "123", "name" -> "Bob", "address" -> "123 Fake Street")

  mapTest(mapper)

  // => Some(123)
  //    Some(Bob)
  //    Some(123 Fake Street) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-08T05:47:12.203

您可以创建一个`OrderedMap`或者您可以对排序`keys`结果进行排序并处理该排序的结果。

# android - 我应该在 android 应用程序中设置布局的最常见尺寸是什么？

> ID：14766229
> 
> 赞同：0
> 
> 时间：2013-02-08T05:23:16.583
> 
> 标签：android, android-layout, android-screen-support

我已经开发了一个 android 应用程序并准备好用于 3.7 英寸 hdpi 手机。但我希望该应用程序可以在所有类型的设备平板电脑和手机上运行。我以前开发的应用程序仅适用于固定尺寸。现在我想知道我应该为哪些尺寸设置不同的布局。（我想要最常用的尺寸）？请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T05:30:37.783

把所有的`layouts`和`android:layout_width="fill_Parent"/"wrap_content"`（`android:layout_height="fill_Parent"/"wrap_content"`当然，根据你的要求）。不要对任何`layout`参数进行硬编码，并将以下标记放在`Manifest`文件中：

```
 <supports-screens android:largeScreens="true"
    android:normalScreens="true" android:smallScreens="true"
    android:resizeable="true" android:anyDensity="true" /> 
```

# vba - Run same excel macro on multiple excel files

> ID：14766238
> 
> 赞同：13
> 
> 时间：2013-02-08T05:24:15.647
> 
> 标签：vba, excel

I have a folder where I receive 1000+ excel files on daily bases they all are same format and structure. What I want to do is run a macro on all 100+ files on daily bases ?

Is there way to automate this ? So I can keep running that same macro on 1000+ files daily.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-08T06:03:33.133

假设您将文件放在相对于主工作簿的“文件”目录中，您的代码可能如下所示：

```
Sub ProcessFiles()
    Dim Filename, Pathname As String
    Dim wb As Workbook

    Pathname = ActiveWorkbook.Path & "\Files\"
    Filename = Dir(Pathname & "*.xls")
    Do While Filename <> ""
        Set wb = Workbooks.Open(Pathname & Filename)
        DoWork wb
        wb.Close SaveChanges:=True
        Filename = Dir()
    Loop
End Sub

Sub DoWork(wb As Workbook)
    With wb
        'Do your work here
        .Worksheets(1).Range("A1").Value = "Hello World!"
    End With
End Sub 
```

在此示例`DoWork()`中是您应用于所有文件的宏。确保您在宏中进行的所有处理始终在`wb`（当前打开的工作簿）的上下文中。

*免责声明：为简洁起见，跳过了所有可能的错误处理。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T08:17:51.040

部分问题可能是如何在 1000 个文件上运行它？...我必须将此宏添加到所有 1000 个工作簿吗？

一种方法是将宏集中添加到文件中`PERSONAL.XLSB`（有时扩展名可能不同）。每次启动 Excel 时，此文件都会在后台加载，并使您的宏随时可用。

最初，PERSONAL.XLSB 文件将不存在。要自动创建此文件，只需开始录制“虚拟”宏（使用电子表格左下角的录制按钮）并选择“个人宏工作簿”将其存储。

录制宏后，您可以使用`Alt`+打开 VBA 编辑器，`F11`您将看到带有“虚拟”录制宏的 PERSONAL.XLSB 文件。

我使用此文件来存储始终可用的通用宏负载，与我打开的 .xlsx 文件无关。我已将这些宏添加到我自己的菜单功能区中。

此通用宏文件的一个缺点是，如果您启动多个 Excel 实例，您将收到一条错误消息，指出 PERSONAL.XLSB 文件已被 Excel 实例 Nr 使用。1\. 这时候只要不添加新的宏就没有问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-08T16:03:31.197

非常感谢你

```
Sub ProcessFiles()
    Dim Filename, Pathname As String
    Dim wb As Workbook

    Pathname = ActiveWorkbook.Path & "C:\Users\jkatanan\Desktop\20170206Glidepath\V37\"
    Filename = Dir(Pathname & "*.xls")
    Do While Filename <> ""
        Set wb = Workbooks.Open(Pathname & Filename)
        BSAQmacro wb

        wb.Close SaveChanges:=True
        Filename = Dir()
    Loop
End Sub
Sub DoWork(wb As Workbook)
    With wb
        'Do your work here
        .Worksheets(1).Range("A1").Value = "Hello World!"
    End With
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-13T09:26:57.760

除了将值传递给 DoWork 之外，还可以在`Processfiles()`.

```
Sub ProcessFiles()

    Dim Filename, Pathname As String
    Dim wb1 As Workbook
    Dim wb2 As Workbook

    Dim Sheet As Worksheet
    Dim PasteStart As Range
    Dim Counter As Integer

    Set wb1 = ActiveWorkbook
    Set PasteStart = [RRimport!A1]

    Pathname = ActiveWorkbook.Path & "\For Macro to run\"
    Filename = Dir(Pathname & "*.xls")
    Do While Filename <> ""
        Set wb2 = Workbooks.Open(Pathname & Filename)
        For Each Sheet In wb2.Sheets
                With Sheet.UsedRange
                .Copy PasteStart
                Set PasteStart = PasteStart.Offset(.Rows.Count)
            End With
        Next Sheet
        wb2.Close
        Filename = Dir()
    Loop
End Sub 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-02T06:39:47.190

```
Sub ProcessFiles()
    Dim Filename, Pathname As String
    Dim wb As Workbook

    Pathname = ActiveWorkbook.Path & "\C:\Users\20098323\Desktop\EXCL\"
    Filename = Dir(Pathname & "*.xlsx")
    Do While Filename <> ""
        Set wb = Workbooks.Open(Pathname & Filename)
        DoWork wb
        wb.Close SaveChanges:=True
        Filename = Dir()
    Loop
End Sub

Sub DoWork(wb As Workbook)
    With wb
        'Do your work here
        .Worksheets(1).Range("A1").Value = "Hello World!"
    End With
End Sub 
```

运行此代码时，它显示错误的文件名或编号。我已将所有文件存储在 ("\C:\Users\20098323\Desktop\EXCL\") EXCL 文件夹中

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-27T22:17:49.613

这不是问题的确切答案，因为我只是试图在我打开的任何文件上运行单个脚本并且无法使其工作，但我认为这可能会帮助像我这样的其他人。一旦我将代码移动到 Visual Basic for Applications 对话框中的模块（转到“插入”然后“模块”），它就起作用了。一旦我将我的 VBA 代码添加到模块中，我就能够在 Excel 中打开任何其他文件（甚至是 CSV 文件）并转到宏，然后从另一个文件（包含带有代码的模块）中运行宏我打开的文件。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2015-03-16T08:28:10.357

谢谢彼得姆！！

实际上，我使用与您发布的代码完全相同的代码（process_fiels 和 dowork）完成了我的宏。

效果很好！！（在我的问题之前）

我的 1000 个工作簿中的每一个都有 84 个工作表。我自己的宏（终于起作用了！）将每个工作簿分成 85 个不同的文件（原始文件 + 每个工作表的简短版本，保存为单个文件）。

这让我在同一个文件夹中有 1000 个文件 + 1000x85，这真的很难理清。

我真正需要的是 Process_Files 获取第一个文件，使用第一个文件的名称创建一个文件夹，将第一个文件移动到具有 ist 名称的文件夹中，然后运行我的宏（在以第一个文件命名的文件夹中新创建的文件夹...），回去取第二个文件，用第二个文件的名字创建一个文件夹，将第二个文件移动到名字为ist的文件夹中，然后运行我的宏（在第二个命名的文件夹中）新创建的文件夹中的文件...）等...

最后，我应该将所有文件移动到与文件同名的文件夹中，原始 \Files\ 文件夹的内容将是 1000 个具有原始文件名称的文件夹，包含原始文件 + 84 个文件我自己的宏已经做到了。

也许使用代码更容易：

Sub ProcessFiles() Dim Filename, Pathname As String Dim wb As Workbook

```
Pathname = ActiveWorkbook.Path & "\Files\"
Filename = Dir(Pathname & "*.xls")
Do While Filename <> "" 
```

（这里应该读取文件名，用文件名创建一个文件夹，将文件移动到这个新创建的文件夹中）

```
 Set wb = Workbooks.Open(Pathname & Filename)  <- open file, just as is.
    DoWork wb   <- do my macro,just as is
    wb.Close SaveChanges:=False      <- not save, to keep the original file 
```

（回到原来的 \Files\ 文件夹）

```
 Filename = Dir()   <-   Next file, just as is
Loop 
```

结束子

Sub DoWork(wb As Workbook) With wb MyMacro End With End Sub

非常感谢，这个网站很棒！

__________________编辑，宏现在可以工作了 _________________________

如您所见，我不是 VBA 专家，但宏终于可以工作了。代码一点也不整洁，我不是软件程序员。

就在这里，有一天它可能会对某人有所帮助。

Sub ProcessFiles_All() Dim Filename, Pathname, NewPath, FileSource, FileDestination As String Dim wb As Workbook

```
 Pathname = ActiveWorkbook.Path & "\Files\"
    Filename = Dir(Pathname & "*.csv")

 Do While Filename <> ""

     NewPath = Pathname & Left(Filename, 34) & "\"

 On Error Resume Next
     MkDir (NewPath)
 On Error GoTo 0

 Set wb = Workbooks.Open(Pathname & Filename)

    DoWorkPlease wb   '  <------------   It is important to say please!! 
```

On Error Resume Next wb.Close SaveChanges:=False if Err.Number <> 0 then 'Error handler needed here End if

```
 Filename = Dir()

 Loop 
```

结束子

Sub DoWorkPlease(wb As Workbook) With wb

' 因为我的应用程序每列有超过 1800 个单元格，而且非常耗时 ' 我使用“测试模式”，我只使用 18 个值。

```
 Dim TestingMode As Integer
 Dim ThisRange(1 To 4) As Variant

 TestingMode = 0

If TestingMode = 1 Then
   ThisRange(1) = "B2:CG18"
   ThisRange(2) = "CT2:CT18"
   ThisRange(3) = "CH2:CN18"
   ThisRange(4) = "CN2:CS18"
   Rows("19:18201").Select
   Selection.Delete Shift:=xlUp
End If

If TestingMode = 0 Then
   ThisRange(1) = "B2:CG18201"
   ThisRange(2) = "CT2:CT18201"
   ThisRange(3) = "CH2:CN18201"
   ThisRange(4) = "CN2:CS18201"
End If 
```

' 加速宏，关闭更新和警报
Application.ScreenUpdating = False Application.DisplayAlerts = False

' 这是我的代码，它从数字操纵单元格值（传感器读取的值需要“转换”为真实世界的值。代码实际上不在此处。

'然后我将整个事情复制成数字，不再有公式，这样更容易工作。

'_____________________________________ '只获得价值 - 没有更多的公式

```
 Sheets.Add After:=Sheets(Sheets.Count)
 Sheets("Sheet1").Select
 Columns("A:CT").Select
 Selection.Copy
 Sheets("Sheet2").Select
 Columns("A:A").Select
 Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
     :=False, Transpose:=False
 Application.CutCopyMode = False
 Selection.NumberFormat = "0"
 With Selection
     .HorizontalAlignment = xlCenter
     .VerticalAlignment = xlBottom
     .WrapText = False
     .Orientation = 0
     .AddIndent = False
     .IndentLevel = 0
     .ShrinkToFit = False
     .ReadingOrder = xlContext
     .MergeCells = False
 End With 
```

' 然后我将这个新工作簿保存到具有自己名称的文件夹中（在文件夹 \FILES\

'____________________________________ '将作品保存在自己的文件夹下

Dim CleanName, CleanPath, CleanNewName As Variant CleanPath = ActiveWorkbook.Path CleanName = ActiveWorkbook.Name CleanName = Left(CleanName, 34) '我取出扩展名 CleanPath = CleanPath + "\" + CleanName CleanNewName = CleanPath + "\" + CleanName CleanNewName = CleanNewName + "_clean.csv" ' 我现在添加“clean”以具有不同的名称。

On Error Resume Next ActiveWorkbook.SaveAs Filename:=CleanNewName, FileFormat:=xlCSV, CreateBackup:=False

'如果出现错误，我会使用文件名创建一个空文件夹，以了解哪个文件需要返工。

```
If Err.Number <> 0 Then
    MkDir (CleanPath + "_error_" + CleanName)
End If 
```

'继续下一步

ActiveSheet.Move_After:=ActiveWorkbook.Sheets(1)

' 然后，我将工作簿拆分为单独的文件，其中包含各个传感器所需的数据。

' 这是每个文件我需要的各个范围。由于我有超过 1000 个文件，因此值得付出努力。

'_______________ 分裂！！______________________________

暗色 Col(1 到 98) 作为变体 Col(1) = "A:A,B:B,CH:CH,CN:CN,CT:CT" Col(2) = "A:A,C:C,CH :CH,CN:CN,CT:CT" Col(3) = "A:A,D:D,CH:CH,CN:CN,CT:CT" Col(4) = "A:A,E:E ,CH:CH,CN:CN,CT:CT" Col(5) = "A:A,F:F,CH:CH,CN:CN,CT:CT" Col(6) = "A:A,G :G,CH:CH,CN:CN,CT:CT" Col(7) = "A:A,H:H,CH:CH,CN:CN,CT:CT" Col(8) = "A:A ,I:I,CH:CH,CN:CN,CT:CT" Col(9) = "A:A,J:J,CH:CH,CN:CN,CT:CT" Col(10) = "A :A,K:K,CH:CH,CN:CN,CT:CT" Col(11) = "A:A,L:L,CH:CH,CN:CN,CT:CT" Col(12) = "A:A,M:M,CH:CH,CN:CN,CT:CT" Col(13) = "A:A,N:N,CH:CH,CN:CN,CT:CT" Col(14 ) = "A:A,O:O,CH:CH,CN:CN,CT:CT" Col(15) = "A:A,P:P,CI:CI,CO:CO,CT:CT" Col (16) = "A:A,Q:Q,CI:CI,CO:CO,CT:CT"Col(17) = "A:A,R:R,CI:CI,CO:CO,CT:CT" Col(18) = "A:A,S:S,CI:CI,CO:CO,CT: CT" Col(19) = "A:A,T:T,CI:CI,CO:CO,CT:CT" Col(20) = "A:A,U:U,CI:CI,CO:CO, CT:CT" Col(21) = "A:A,V:V,CI:CI,CO:CO,CT:CT" Col(22) = "A:A,W:W,CI:CI,CO: CO,CT:CT" Col(23) = "A:A,X:X,CI:CI,CO:CO,CT:CT" Col(24) = "A:A,Y:Y,CI:CI, CO:CO,CT:CT" Col(25) = "A:A,Z:Z,CI:CI,CO:CO,CT:CT" Col(26) = "A:A,AA:AA,CI: CI,CO:CO,CT:CT" Col(27) = "A:A,AB:AB,CI:CI,CO:CO,CT:CT" Col(28) = "A:A,AC:AC, CI:CI,CO:CO,CT:CT" Col(29) = "A:A,AD:AD,CJ:CJ,CP:CP,CT:CT" Col(30) = "A:A,AE: AE,CJ:CJ,CP:CP,CT:CT" Col(31) = "A:A,AF:AF,CJ:CJ,CP:CP,CT:CT" Col(32) = "A:A, AG:AG,CJ:CJ,CP:CP,CT:CT"Col(33) = "A:A,AH:AH,CJ:CJ,CP:CP,CT:CT" Col(34) = "A:A,AI:AI,CJ:CJ,CP:CP,CT: CT" Col(35) = "A:A,AJ:AJ,CJ:CJ,CP:CP,CT:CT" Col(36) = "A:A,AK:AK,CJ:CJ,CP:CP, CT:CT" Col(37) = "A:A,AL:AL,CJ:CJ,CP:CP,CT:CT" Col(38) = "A:A,AM:AM,CJ:CJ,CP: CP,CT:CT" Col(39) = "A:A,AN:AN,CJ:CJ,CP:CP,CT:CT" Col(40) = "A:A,AO:AO,CJ:CJ, CP:CP,CT:CT" Col(41) = "A:A,AP:AP,CJ:CJ,CP:CP,CT:CT" Col(42) = "A:A,AQ:AQ,CJ: CJ,CP:CP,CT:CT" Col(43) = "A:A,AR:AR,CK:CK,CQ:CQ,CT:CT" Col(44) = "A:A,AS:AS, CK:CK,CQ:CQ,CT:CT" Col(45) = "A:A,AT:AT,CK:CK,CQ:CQ,CT:CT" Col(46) = "A:A,AU: AU,CK:CK,CQ:CQ,CT:CT" Col(47) = "A:A,AV:AV,CK:CK,CQ:CQ,CT:CT" Col(48) = "A:A, AW:AW,CK:CK,CQ:CQ,CT:CT" Col(49) = "A:A,AX:AX,CK:CK,CQ:CQ,CT:CT" Col(50) = "A:A,AY:AY,CK:CK,CQ:CQ, CT:CT" Col(51) = "A:A,AZ:AZ,CK:CK,CQ:CQ,CT:CT" Col(52) = "A:A,BA:BA,CK:CK,CQ: CQ,CT:CT" Col(53) = "A:A,BB:BB,CK:CK,CQ:CQ,CT:CT" Col(54) = "A:A,BC:BC,CK:CK, CQ:CQ,CT:CT" Col(55) = "A:A,BD:BD,CK:CK,CQ:CQ,CT:CT" Col(56) = "A:A,BE:BE,CK: CK,CQ:CQ,CT:CT" Col(57) = "A:A,BF:BF,CL:CL,CR:CR,CT:CT" Col(58) = "A:A,BG:BG, CL:CL,CR:CR,CT:CT" Col(59) = "A:A,BH:BH,CL:CL,CR:CR,CT:CT" Col(60) = "A:A,BI: BI,CL:CL,CR:CR,CT:CT" Col(61) = "A:A,BJ:BJ,CL:CL,CR:CR,CT:CT" Col(62) = "A:A, BK:BK,CL:CL,CR:CR,CT:CT" Col(63) = "A:A,BL:BL,CL:CL,CR:CR,CT:CT" Col(64) = "A: A,BM:BM,CL:CL,CR:CR,CT:CT" Col(65) = "A:A,BN:BN,CL:CL,CR:CR,CT:CT" Col(66) = "A:A,BO:BO,CL:CL, CR:CR,CT:CT" Col(67) = "A:A,BP:BP,CL:CL,CR:CR,CT:CT" Col(68) = "A:A,BQ:BQ,CL: CL,CR:CR,CT:CT" Col(69) = "A:A,BR:BR,CL:CL,CR:CR,CT:CT" Col(70) = "A:A,BS:BS, CL:CL,CR:CR,CT:CT" Col(71) = "A:A,BT:BT,CM:CM,CS:CS,CT:CT" Col(72) = "A:A,BU: BU,CM:CM,CS:CS,CT:CT" Col(73) = "A:A,BV:BV,CM:CM,CS:CS,CT:CT" Col(74) = "A:A, BW:BW,CM:CM,CS:CS,CT:CT" Col(75) = "A:A,BX:BX,CM:CM,CS:CS,CT:CT" Col(76) = "A: A,BY:BY,CM:CM,CS:CS,CT:CT" Col(77) = "A:A,BZ:BZ,CM:CM,CS:CS,CT:CT" Col(78) = " A:A,CA:CA,CM:CM,CS:CS,CT:CT" Col(79) = "A:A,CB:CB,CM:CM,CS:CS,CT:CT" Col(80) = "A:A,CC:CC,CM:CM,CS:CS,CT:CT" Col(81) = "A:A,CD:CD,CM:CM,CS:CS,CT:CT" Col(82) = "A:A,CE:CE, CM:CM,CS:CS,CT:CT" Col(83) = "A:A,CF:CF,CM:CM,CS:CS,CT:CT" Col(84) = "A:A,CG: CG,CM:CM,CS:CS,CT:CT" ' 我想拆分 84 个新文件，所以为了测试我只使用 1 个，而对于真实的我使用 84

将 CounterMode 调暗为整数

如果 TestingMode = 1 那么 CounterMode = 1 否则 CounterMode = 84

```
For i = 1 To CounterMode 
```

' 此代码获取所需的列，并将其粘贴到新工作簿中。

```
 Sheets("Sheet1").Select
 Cells.Select
 Selection.ClearContents
 Range("A1").Activate
 Sheets(2).Select
 Range(Col(i)).Select
 Selection.Copy
 Sheets("Sheet1").Select
 ActiveSheet.Paste
 Application.CutCopyMode = False
 With Selection
     .HorizontalAlignment = xlCenter
     .VerticalAlignment = xlBottom
     .WrapText = False
     .Orientation = 0
     .AddIndent = False
     .IndentLevel = 0
     .ShrinkToFit = False
     .ReadingOrder = xlContext
     .MergeCells = False
 End With
 Columns("A:E").EntireColumn.AutoFit 
```

' 保存单个文件

```
'_____________save the work________________ 
```

Dim ThePath, TheName, TheSwitch As String ThePath = ActiveWorkbook.Path + “\” TheName = Left(ActiveWorkbook.Name, 34) ' 从名称中取出扩展名 ThePath = ThePath + TheName TheSwitch = Cells(3, 2) ' 在单元格(3,2) 我有个人名字的名字，所以我加了文件名。TheName = ThePath + "_" + TheSwitch + ".xls"

```
Range("A1").Select
Sheets("Sheet1").Select
Sheets("Sheet1").Copy

Dim SheetName As Variant 
```

' 我将 Sheets(1) 命名为 Sheet1，因为原始工作表具有测试的名称和日期。' 我这样做是为了在所有文件上使用相同的名称以进行绘图，然后我将工作表重命名为 ' 原始名称

SheetName = ActiveSheet.Name ActiveWorkbook.Sheets(1).Name = "Sheet1"

'这是情节

```
Columns("A:E").EntireColumn.AutoFit
Columns("B:E").Select
ActiveSheet.Shapes.AddChart.Select
ActiveChart.SetSourceData Source:=Range("'Sheet1'!$B:$E")
ActiveChart.ChartType = xlXYScatterLinesNoMarkers

ActiveWorkbook.Sheets(1).Name = SheetName 
```

'保存错误恢复下一个 ActiveWorkbook.SaveAs Filename:=TheName, FileFormat:=56, CreateBackup:=False

```
If Err.Number <> 0 Then
    MkDir (ThePath + "_error_" + TheName)
End If

ActiveWorkbook.Close 
```

接下来我'____________________那是拆分__________________________________' 打开屏幕更新：Application.ScreenUpdating = True Application.DisplayAlerts = True Range("A1").Select

```
 End With 
```

结束子

# variables - error : Can't read "n" : no such variable in tcl

> ID：14766244
> 
> 赞同：3
> 
> 时间：2013-02-08T05:24:58.170
> 
> 标签：variables, tcl, upvar

```
proc rep {name} {
    upvar $name n 
    puts "nm is $n"
} 
```

In the above procedure, '`name`' is a parameter which is passed to a procedure named '`rep`'. When I run this program I got "`error : Can't read "n" : no such variable`". Could any one tell me what could be the possible cause for this error.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T08:56:48.570

`rep`如果您传递给其名称的变量在调用范围内不存在，则会产生该错误消息。例如，用 tclsh 检查这个交互式会话……</p>

```
% 过程代表 {名称} {
    upvar $name n
    提出“nm 是 $n”
}
% 代表富
无法读取“n”：没有这样的变量
% 设置富 x
X
% 代表富
纳米是 x

```

## 更深入……</h2>

如果未设置变量，则该变量`foo`处于有趣的状态`upvar`；它实际上是存在的（它在全局命名空间的变量哈希表中被引用）但没有内容，因此测试它是否存在失败。（当一个变量在某处有一个条目时，即存在一个变量——也就是说，某个存储将其内容放入其中——并且它在该存储中设置了一个值；一个未设置的变量可以是一个`NULL`在 C 级别具有 a 的变量存储。由于这个原因，Tcl 语言本身根本不支持`NULL`值；它们对应于不存在。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-20T22:55:23.617

我也遇到了这个。我意识到我发送的是 $foo 而不是 foo （注意，没有美元符号）。

```
% set foo 1
%
% rep $foo
can't read "foo": no such variable
%
% rep foo
nm is 1 
```

希望能帮助到你。

# java - Struts 2 failed to use bean:message

> ID：14766245
> 
> 赞同：1
> 
> 时间：2013-02-08T05:25:10.277
> 
> 标签：java, jsp, struts2, resources, javabeans

I am trying to use a bean to show predefined messages, I have created the following files, but it runs into following error, when I type `< me` the auto code generator does not show `<message - resources>` tag !!!!

```
org.apache.jasper.JasperException: The Struts dispatcher cannot be found.  This is usually caused by using Struts tags without the associated filter. Struts tags are only usable when the request has passed through its servlet filter, which initializes the Struts dispatcher needed for this tag. - [unknown location]

root cause

The Struts dispatcher cannot be found.  This is usually caused by using Struts tags without the associated filter. Struts tags are only usable when the request has passed through its servlet filter, which initializes the Struts dispatcher needed for this tag. - [unknown location]
note The full stack traces of the exception and its root causes are available in the GlassFish Server Open Source Edition 3.1.2.2 logs. 
```

`struts.xml`

```
<!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd">

<struts-config>
    <!-- Configuration for the default package. -->
      <message-resources parameter="com/myapp/struts/messages"/>   
    <package name="default" extends="struts-default">

        <result-types>
            <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult"/>
        </result-types>
        <action name="register">
            <result type="tiles">register</result>
        </action>
    </package>

</struts-config> 
```

`register.jsp`:

```
<%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %>

    <div id="Header">
        <bean:message key="welcome.loggedin"/>
    </div> 
```

`messages.properties`:

```
# -- welcome --
welcome.loggedin=You are logged in.
welcome.heading=Struts Applications in Netbeans!
welcome.message=It's easy to create Struts applications with NetBeans. 
```

I suppose the problem is with my jar files

```
commons-digester-1.8.1.jar
commons-fileupload-1.2.1.jar
commons-io-1.3.2.jar
commons-lang-2.1.jar
commons-logging-1.1.jar
displaytag-1.2.jar
displaytag-export-poi-1.2.jar
displaytag-portlet-1.2.jar
freemarker-2.3.13.jar
jdom-1.1.jar
jstl-1.2.jar
junit-3.8.1.jar
ognl-2.6.11.jar
pagertag.jar
sqlite-jdbc-3.7.2.jar
struts2-convention-plugin-2.1.6.jar
struts2-core-2.1.6.jar
struts2-dojo-plugin-2.1.2.jar
struts2-tiles-plugin-2.1.6.jar
tiles-api-2.1.2.jar
tiles-compat-2.1.2.jar
tiles-core-2.1.2.jar
tiles-jsp-2.1.2.jar
tiles-servlet-2.1.2.jar
struts-taglib-1.3.10.jar
xwork-2.1.2.jar 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:17:11.537

该`<bean:message key=`标签是一个 Struts1 标签，在 Struts2 中它被替换为`<s:text name=`. 除非您没有足够的理由运行这两个框架，否则您不应该使用 Struts1 标签。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T07:09:59.317

您在 Struts 2 应用程序中使用 Struts 1 标签。不。Struts 1 和 Struts 2 是两个完全不同的 Web 框架。

这是[关于 i18n 的 Struts2 文档页面](http://struts.apache.org/2.3.8/docs/localization.html)。

# android - Need adb commands WiFi control

> ID：14766248
> 
> 赞同：1
> 
> 时间：2013-02-08T05:25:27.140
> 
> 标签：android

How can I turn ON/OFF WiFi of android device from back end of the running application using adb shell??? Can I control the device WiFi signal strength using adb shell or any other technique??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:59:51.043

您无法使用 adb shell 控制 Wifi 的强度，但您可以通过 adb shell 打开/关闭 wi-fi，也可以通过编程方式：

1.  以编程方式：

但必须指定权限：

```
 <uses-permission
        android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission
        android:name="android.permission.CHANGE_WIFI_STATE" />
    <uses-permission
        android:name="android.permission.WAKE_LOCK" /> 
```

并称它为

```
final WifiManager wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
wifi.setWifiEnabled(!wifi.isWifiEnabled()); 
```

2\. 通过 adb 这有点粗略但是，您可以使用“keyevents”：

```
adb shell am start -a android.intent.action.MAIN -n com.android.settings/.wifi.WifiSettings
adb shell input keyevent 20 & adb shell input keyevent 23 
```

使用“adb shell”，您可以意向 android 设置包并运行“wifi.WifiSettings”活动。然后我们必须从这里实现按键。

此外，如果您需要了解更多关于“keyevents”的信息：

[adb shell 输入事件](https://stackoverflow.com/questions/7789826/adb-shell-input-events) 如果这有帮助，请告诉我！

# php - Creating SQLite Version from server MySQL db

> ID：14766250
> 
> 赞同：0
> 
> 时间：2013-02-08T05:25:36.947
> 
> 标签：php, android, mysql, sqlite

Hi I need advice on how to create the sqlite db for my app. You see, I have an app that connects to a server db in php/mysql platform. I need my android app to have an sqlite db that is a minimal version of the server db particularly only data that are relevant to the type of user using the app.

Some things I've considered:

1.  Attach a pre-populated sqlite db to the APK. This one would certainly make the APK package big.
2.  Create the sqlite db upon first time use of the app, connect to the server and extract necessary data to populate the sqlite db. I'm not sure how to do this as I usually use json to exctract data from server. This might also take so much time as each record will be inserted to the sqlite tables.
3.  I was thinking of requesting the server to create a pre-populated sqlite db based on the latest set of data it has. Then the app would then download this generated sqlite db and transfer it to my android app.

Any thoughts on this would be much appreciated. If you have other suggestions, please let me know.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:31:15.997

如果我是你，我会选择选项 3：让服务器准备 SQLite db 并使用 zip 或 gzip 或类似的东西对其进行压缩。根据您的数据，SQLite 数据库应该从原始大小压缩 2x-5x。

然后您的 apk 将连接到服务器，下载压缩的 SQLite db，将其解压缩到应用程序主目录（或 SD 卡，如果您有权限并希望这样做）。

从此时起，您只需从您的应用程序连接到此数据库。如果要下载更新，最好不要重新下载整个数据库，而是实施增量更新。如果服务器足够智能，它可以提供另一个较小的 SQLite 数据库，只提供增量更新（也压缩）。或者，它可以提供文本 SQL 脚本（同样是压缩的），通过执​​行它可以获得必要的更新（以及可能的模式更改）。

# javascript - Why is there a comma to start the array? For example, jQuery.ajax(url [, setting])

> ID：14766251
> 
> 赞同：-3
> 
> 时间：2013-02-08T05:25:38.797
> 
> 标签：javascript, jquery, arrays, comma

Why is there a comma (i.e., this part "[,") to start the array?

For example, jQuery ajax gives the following: jQuery.ajax( url **[,** settings ] ). Can someone explain to me why a programmer will implement code like this.

Could it be the index will start at 1 instead of 0 when using this array, so the first item is blank?

First time using stackoverflow. I tried Google and searched multiple sources (including stackoverflow) and I can't find the answer to this. Thanks for the help.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T05:26:40.540

It's just a pseudo-syntax in which the brackets indicate an optional argument. Brackets here do not delimit an array. The comma is inside of the brackets as well because the comma is only used if the optional argument is used, like so:

```
foo(bar[, baz])
// means either
foo(bar)
// or
foo(bar, baz) 
```

# html - Individual Image gesture control in winjs canvas

> ID：14766253
> 
> 赞同：3
> 
> 时间：2013-02-08T05:25:41.917
> 
> 标签：html, canvas, gesture, winjs

I have tried the following code in order to implement gesture control over individual images placed inside the canvas.But this works only for the whole canvas not for the individual elements

```
 var can = document.getElementById("canvas");

        for (var i = 0; i < 10; i++) {
            onjarray[i] = document.getElementById("Img" + i);
            can.appendChild(onjarray[i]);
        }

            can.originalTransform = can.style.transform;
            gObj1 = new MSGesture();
            // Defining gesture object for Pen, mouse and touch
            gObj1.target = can;
            can.gesture = gObj1;
            can.gesture.pointerType = null;

            can.addEventListener("MSPointerDown", onPointerDown, false);
            can.addEventListener("MSGestureTap", onTap, false);
            can.addEventListener("MSGestureHold", onHold, false);
            can.addEventListener("MSGestureChange", onGestureChange, false);
            can.addEventListener("wheel", onMouseWheel, false);
            // Mouse Wheel does not generate onPointerUp
            can.addEventListener("MSGestureEnd", onGestureEnd, false); 
```

can some one point me towards the rightway to have gesture control over individual elemnts place in the canvas

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T16:00:38.647

不可能。一旦你将一个元素“喷洒”到画布上，你对它的控制就永远失去了。您不能对其进行更改、删除或捕获事件。它本质上不再是一个元素——它只是画布上的像素。您可以在画布上覆盖 SVG 形状并捕获应用于 SVG 对象的用户事件。这对你有用吗？

# php - WAMP 上的 shmop/PHP

> ID：14766257
> 
> 赞同：-1
> 
> 时间：2013-02-08T05:26:11.253
> 
> 标签：php, wamp, shared-memory

PHP 的 shm_ 函数在我的 LINUX 服务器上运行良好，但在 Windows 上不受支持。目前我正在 WAMP 上测试我的代码，并使用 file_get/put_content 作为 shm_attach 等的本地替代品，但这很笨拙。我认为 shmp_ 系列函数是独立于操作系统的。但是，当我尝试一些简单的事情时

```
<?php
$shm_key = 12879;
$shm_id = shmop_open($shm_key, "c", 0644, 100);
echo $shm_id;
?> 
```

PHP 抱怨它不知道 shmop_open。我在 Google 上搜索了一个扩展，发现 shmop 是由一个特殊的 PHP 构建提供的。我现在不可能进入这个问题，但我想知道是否有可能找到一个已激活 shmop 的现成版本（Win 32），以便我可以将它与 Windows7 + WAMP 一起使用。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:39:00.363

在 WAMP v2.2 上

*   左键单击 WAMP 托盘图标
*   选择 PHP -> PHP 扩展
*   向下滚动以查找`php_shmop`并启用它
*   WAMP 重新启动

    你应该很高兴。

# sql - 检查 `isql` 查询是否成功

> ID：14766260
> 
> 赞同：1
> 
> 时间：2013-02-08T05:26:45.947
> 
> 标签：sql, linux, isql

有什么方法可以检查`isql`查询是否失败？`isql`无论查询成功与否，它似乎都返回 0，只有在连接服务器出错时才返回 false。如何确定我的 Sybase 查询是否可以从命令行运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:34:11.077

只需运行此命令

```
 isql -v SERVERNAME Username password 
```

在提示符处运行您的查询

```
>SELECT COUNT (*) FROM table

+------+
|      |
|  100 |    
+------+ 
```

如果你没有得到任何价值回来有一些问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T22:44:34.547

`--retserverror`似乎是我正在寻找的东西。

# c++ - Reading a file of ints should be working but is not

> ID：14766263
> 
> 赞同：-2
> 
> 时间：2013-02-08T05:26:49.943
> 
> 标签：c++, linux, putty

Me and a friend have been working on a program over the past couple of days and figured out how to read a file of ints into a program, it worked the first day we made it, but i must've changed something because now it reads from the second integer on and adds a zero at the end. Here's the code:

```
#include <iostream>

#include <string>
#include <iomanip>
#include <fstream>
#include <cmath>
#include <cstdlib>
using namespace std;

struct Hand
{
  int handCards[52];
  int totalCards;
};

struct Card
{
  char rank;
  char suit;
};

void OpenFile (ifstream&, string&);
void ReadFile (ifstream&, Hand&);
void ProcessRank (Hand&, int CardRank[]);
void ProcessSuit (Hand&, int CardSuit[]);
char GetRank (int);
char GetSuit (int);
void PrintCard (Card);
Card ConvertRaw (Hand);
void PrintHand (Card, Hand);
int main()
{
  ifstream inf;
  string filename;
  Hand theHand;
  Card aCard;
  int CardRank[13];
  int CardSuit[4];

  OpenFile(inf, filename);
  ReadFile(inf, theHand);

}

void OpenFile (ifstream &inf, string &filename)
{
  cout<<"What is the name of the file?" <<endl;
  cin>>filename;

  inf.open(filename.c_str());

  if (inf.fail())
    {
      cout<<"Sorry, that file doesn't exist" <<endl;
      exit(1);
    }
  else
    cout<<"Success!" <<endl <<endl;
}

void ReadFile (ifstream &inf, Hand &theHand)
{
  theHand.totalCards=0;
  int i=0;
  inf>>theHand.handCards[i];
  while(inf.good())
    {
      i++;
      inf>>theHand.handCards[i];
      theHand.totalCards++;
      cout<<theHand.handCards[i];
    }
}

  void ProcessRank (Hand &theHand, int rank[])
{
  int placement;
  for (int i=0; i<13; i++)
    {
      rank[i]=0;
    }
  for (int i=0; i=theHand.totalCards; i++)
    {
      placement=(theHand.handCards[i]%13);
      switch (placement)
        {
        case 0:rank[0]++; break;
        case 1:rank[1]++; break;
        case 2:rank[2]++; break;
        case 3:rank[3]++; break;
        case 4:rank[4]++; break;
        case 5:rank[5]++; break;
        case 6:rank[6]++; break;
        case 7:rank[7]++; break;
        case 8:rank[8]++; break;
        case 9:rank[9]++; break;
        case 10:rank[10]++; break;
        case 11:rank[11]++; break;
        case 12:rank[12]++; break;
        }
    }

void ProcessSuit (Hand &theHand, int suit[])
{
  int placement;
  for (int i=0; i<5; i++)
    {
      suit[i]=0;
    }
  for (int i=0; i=theHand.totalCards; i++)
    {
      placement=(theHand.handCards[i]/13);
      switch (placement)
        {
        case 0:suit[0]++; break;
        case 1:suit[1]++; break;
        case 2:suit[2]++; break;
        case 3:suit[3]++; break;
        }
    }
}

char GetRank(int CardRank)
{
  int rankV=(CardRank%13);
  switch(rankV)
    {
    case  0: return 'A';
    case  9: return 'T';
    case 10: return 'J';
    case 11: return 'Q';
    case 12: return 'K';
    default: return (char(rankV + '0' + 1));
    }
}

char GetSuit (int CardSuit)
{
  int suitV=(CardSuit/13);
    switch(suitV)
      {
      case  0: return 'D';
      case  9: return 'H';
      case 10: return 'S';

   }
}

void PrintCard (Card aCard)
{
  cout<<aCard.rank<<aCard.suit<<endl;
}

Card ConvertRaw(int rawValue)
{
  Card finalCard;
  finalCard.rank=GetRank(rawValue);
  finalCard.suit=GetSuit(rawValue);
  return finalCard;
}

void PrintHand (Card aCard, Hand theHand)
{
  for (int i=0; i <theHand.totalCards; i++)
    {
    PrintCard(ConvertRaw(theHand.handCards[i]));
    }
} 
```

output is 234560 should be 123456

when i put in all the code the file never stops and the core is dumped

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:41:44.113

在`ReadFile`中，您在 while 循环之外读取了第一张卡片，但在您有机会打印第一张卡片之前，您读取了第二张卡片。

不知道为什么你的最后一张牌是 0，可能与你`Hand`没有显示的课程有关。

另外，您是否考虑过使用[VCS](https://en.wikipedia.org/wiki/Revision_control)？

# c# - 检查是否将重复行添加到datagridview

> ID：14766268
> 
> 赞同：0
> 
> 时间：2013-02-08T05:27:15.677
> 
> 标签：c#, winforms, datagridview, duplicates

我有两个表单 Form1(DGV1) 和 Form2(DGV2)，两个表单上都有 Datagridview 控件。

在 Form1 上有一个指向 Form2 的按钮链接，用户可以在其中向 Form1 datagridview(DGV1) 添加行。在 Form2 Datagridview 的第一列中有一个复选框，用户一次只能选择一行。有两个按钮Form2 1) 完成 2) 添加项目

当用户通过依次选择行来单击“添加项目”时，必须将行添加到 Form1 上的 datagridview 中，当单击“完成”按钮时，表单 1 应显示所有添加的行。

我已经使用以下代码实现了这一点：

```
int inde x= objQM.gvItemDetails.Rows.Add(); 
DataGridViewRow row = (DataGridViewRow)objQM.gvItemDetails.Rows[index]; 
decimal UnitCos = Convert.ToDecimal(gvInventory.Rows[RowIndex].Cells[8].Value.ToString()); row[0] = false; 
row[1] = 1;
row[2] = gvInventory.Rows[RowIndex].Cells[6].Value.ToString();
row[3] = LoadSellQty();
row[4] = Convert.ToDecimal(gvInventory.Rows[RowIndex].Cells[8].Value.ToString());
row[5] = LoadSellQty() * UnitCost; 
row[7] = Convert.ToInt32(gvInventory.Rows[RowIndex].Cells[1].Value.ToString()); 
```

现在的问题是验证当在 Form2 上单击 AddItems 按钮时，是否将同一行添加到 Form1 上的 DGV1 中。我的意思是不能添加重复的行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T06:11:35.737

我相信您的`DataGridView`行中有一个唯一的名称，您可以通过使用`linq`

```
bool IsExist = dataGridView1.Rows.Cast<DataGridViewRow>()
                                   .Count(c => !string.IsNullOrWhiteSpace(c.Cells[colIndex].EditedFormattedValue.ToString()) &&
                                   c.Cells[colIndex].EditedFormattedValue.ToString().Trim() == dgv[colIndex, rowIndex].EditedFormattedValue.ToString()) > 1;

if (IsExist)
{
   //do stuff
} 
```

**更新**基于`ItemID`

```
bool IsExist = dataGridView1.Rows.Cast<DataGridViewRow>()
                      .Count(c => 
                      c.Cells[colIndexOfItemId]
                      .EditedFormattedValue.ToString() == ItemID) > 1; //or (int)c.Cells[colIndexOfItemId].Value 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:55:55.633

我会尝试以下两种不同的方式，顺便说一句，我更喜欢解决方案＃2：

1.  行数少就自己写个循环，一个一个地检查值，这样代码看起来不太好。

2.  如果您使用的是 DataSet 或 DataTable，请尝试将 UniqueConstraint 添加到实际包含所有列的 DataTable 上，因此如果添加了重复行，它将抛出异常并且您知道。有关更多详细信息，请查看[此处](http://msdn.microsoft.com/en-us/library/st1t2c35.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-25T21:41:02.240

```
 private void dgViewOrderList_CellValidated(object sender, DataGridViewCellEventArgs e)
        {
            if (e.ColumnIndex == 0 && dgViewOrderList.CurrentCell.Value != null)
            {
                var cellValue = dgViewOrderList.CurrentCell.Value.ToString();
                var isExist = dgViewOrderList.Rows.Cast<DataGridViewRow>().Count(c =>c.Cells[0].EditedFormattedValue.ToString() == cellValue) > 1;
                if (isExist)
                {
                    dgViewOrderList.CurrentCell.Value = null;
                }
            }
        }
    } 
```

# java - 02-08 10:11:26.825: E/WindowManager(17630): andrhas leaked window com.android.internal.policy.impl.PhoneWindow that was originally added here

> ID：14766272
> 
> 赞同：0
> 
> 时间：2013-02-08T05:28:06.130
> 
> 标签：java, android, window, rss-reader

I have to develop one BBC_NEWS_READER android application from [here](https://github.com/okey666/BBC-News-Reader)

The app is force closed while run the application also gave me following error. The error is :

```
 E/WindowManager(17630): Activity com.digitallizard.bbcnewsreader.ReaderActivity 
      has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4a4dc
       760 that was originally added here

        E/WindowManager(17630): android.view.WindowLeaked: Activity 
        com.digitallizard.bbcnewsreader.ReaderActivity has leaked window
        com.android.internal.policy.impl.PhoneWindow$DecorView@4a4dc760 that was originally 
        added here
            at android.view.ViewRoot.<init>(ViewRoot.java:247)

        E/WindowManager(17630):     at android.app.Dialog.show(Dialog.java:241)
         com.digitallizard.bbcnewsreader.Eula.show(Eula.java:87)

         E/WindowManager(17630):    at 
         com.digitallizard.bbcnewsreader.ReaderActivity.onCreate(ReaderActivity.java:444) 
```

How can i resolve these error??? please help me.i have used same code as that github project.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:59:31.813

只需`Eula.show(this);`在设置内容视图后添加该行，如下所示：

> ```
>  this.setContentView(R.layout.reader_activity);
>     Eula.show(this); // show the eula 
> ```

# iphone - 未知类 在 Interface Builder 文件中 - IOS

> ID：14766276
> 
> 赞同：0
> 
> 时间：2013-02-08T05:28:19.940
> 
> 标签：iphone, ios, cocoa-touch, uitableview

我已通过添加以下几行来解决此问题...

```
[<class_name> class]; 
```

在 Appdelegate 中的应用程序 didFinishLaunchingWithOptions 中。在 SO 中的一个线程中检查解决方案时，我得到了这个想法。谁能解释是什么问题？当我尝试像这样加载时，我通过添加 xib 及其相应的 .h 和 .m 自定义了 tableview 单元格......

```
 if (cell == nil)
            {
                NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"<class_name>" owner:self options:nil];
                cell = [nib objectAtIndex:0];
            } 
```

应用程序因上述错误而崩溃。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:00:06.270

不要将 xib / nib 文件命名为“ `<class_name>`”。只是不要。

将其命名为对 Objective C 而言更有意义的名称，例如“ `NewbeeTableViewCell`”。

此外，在 xib 文件中，确保它包含您的自定义表格视图单元格。进入该表格视图单元格的身份检查器并将单元格的名称从“ `UITableViewCell`”更改为“ `NewbeeTableViewCell`”或您希望您的子类表格视图单元格的任何名称。这就是导致您在构建时看到的“未知类”错误的原因。

# php - 如何触发重新加载浏览器选项卡

> ID：14766281
> 
> 赞同：1
> 
> 时间：2013-02-08T05:28:43.523
> 
> 标签：php, javascript, html, debugging

如何触发浏览器重新加载/刷新页面？

我正在使用 php，并编写了一个用于调试的类。调试类会将我的日志输出到文件中。每次执行调试时都会重新创建文件日志。

假设文件日志是html，我用浏览器查看。我不知道每次重新创建日志文件时如何刷新页面。

浏览器是 Firefox 或 Chrome。任何的想法 ？

注意：我知道这可以通过在页面中使用 ajax 进行间隔连续检查来完成。FF 或 Chrome 是否提供了任何 api 来在需要时刷新特定的标签页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:07:26.023

虽然它可能无法*完全*满足您的需求，[但 livejs](http://livejs.com/)几乎符合要求。它会查找标题中的更改，如果自上次检查以来上次更改日期已更改，它将重新加载页面。

用法相当简单，将脚本放在可访问的地方并放置

```
<script type='text/javascript' src='js/livejs.js'></script> 
```

在你的`head`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T07:43:03.047

Firefox 附加组件“自动重新加载”。它可以指定执行某些*url时要监视的**文件*。

# wordpress - 将预先存在的 URL 重定向到 wordpress 永久链接 url

> ID：14766284
> 
> 赞同：0
> 
> 时间：2013-02-08T05:29:00.250
> 
> 标签：wordpress, url-rewriting

我以前有一个静态网站，其页面例如 www.example.com/pages?id=123

我将该网站改造成一个带有永久链接的 wordpress 网站，例如：www.example.com/Iam-a-url

现在这是我的问题，我现有的用户正在访问 www.example.com/pages?id=123 并得到一个找不到页面的错误（因为它当然不存在）。我该如何将它们重定向到 www.example.com/Iam-a-url

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:46:21.260

把它放到你的functions.php中

```
function _redir_old_site(){
    if( (stripos($_SERVER['REQUEST_URI'], 'pages?id=') !== FALSE) ){
        //you can set the redirect based on the id
        $oldID = $_GET['id'];
        //set default page id
        $nowID = 5;
        switch( $oldID ){
           case '123':
                //the page id now
                $nowID = 46;
              break;
           //....and so on.....
        }
        header("location:". get_permalink($nowID) );
        exit;
    }
}

add_action('template_redirect', '_redir_old_site', 1); 
```

祝你好运！:)

# java - 用于 Java Web 服务的 PHP SOAP 客户端

> ID：14766292
> 
> 赞同：0
> 
> 时间：2013-02-08T05:30:07.283
> 
> 标签：java, php, web-services, soap, wsdl

我已经使用 Java 的 Web 服务构建了一个 wsdl，并在 localhost(wamp) 上运行它。我正在尝试为 wsdl 创建一个 PHP SoapClient，但它显示“文档末尾的额外内容”。但是当我尝试使用 Java 客户端或 .NET 客户端运行服务时，它会运行 wsdl。

我试过在网上搜索它，但仍然找不到问题。请帮忙。

以下是我创建 SoapClient 的方式：

```
$client = new SoapClient('http://localhost/path/to/ServiceSever?wsdl', array('trace' => 1)); 
```

我还尝试通过创建 SoapServer 来运行它，然后从中创建一个客户端：

```
$server = new SoapServer('http://localhost/path/to/ServiceSever?wsdl');
$server->addFunction('getinfos');
$server->handle(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T14:24:42.183

I use this to create the soapClient call in PHP given a runnning wsdl [http://sourceforge.net/projects/wsdl2php/](http://sourceforge.net/projects/wsdl2php/)

and here you can find the documentation [http://www.urdalen.no/wsdl2php/manual.php](http://www.urdalen.no/wsdl2php/manual.php)

give it a try

# bash - Kill all pid files in a folder

> ID：14766304
> 
> 赞同：4
> 
> 时间：2013-02-08T05:31:04.390
> 
> 标签：bash, unix, command-line, resque, pid

I have a folder that is filled with .pid files. Each has the PID for a resque worker. How can I kill every PID in that folder from the command line?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T05:34:13.207

```
cat folder/*.pid | xargs kill 
```

should do it?

If you need to specify a signal, for example `KILL`, then

```
cat folder/*.pid | xargs kill -KILL 
```

If your pidfiles lack newlines, this may work better:

```
( cd folder &&
for pidfile in *.pid; do echo kill -QUIT `cat $pidfile`; done
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T06:48:40.577

According to the [docs](https://github.com/defunkt/resque#signals) it says to use:

```
ps -e -o pid,command | grep [r]esque-[0-9] | cut -d ' ' -f 1 | xargs -L1 kill -s QUIT 
```

**Note**: That looks them up **by name** instead of using the `.pid` files.

Also, the `QUIT` signal will gracefully kill them. If you want to forcefully kill them use `TERM` instead.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T05:34:30.420

Run the command:

```
kill `cat folder/*.pid` 
```

If the PID files don't have newlines, then the following should work:

```
for f in folder/*.pid; do kill `cat "$f"`; done 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-08T05:35:12.467

Run this - with backticks:

```
kill -9 `cat /path/*.pid` 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-23T17:52:25.923

Although the Question is answer but thought that there some many awesome way you can

do some task in linux that what the answer is for exhibiting the power of linux

How abt this

```
pgrep ruby | xargs ps | grep [r]esque | awk '{print $1}' | xargs kill -9 
```

NOTE: `pgrep` is not supported in MAC-OS just thought would be useful to some one

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-06T02:46:57.913

Leading padding will cause errors. Use`sed 's/^ *//g'` to remove leading spacing/padding:

```
ps -e -o pid,command | grep '[r]esque-[0-9]' | sed 's/^ *//g' | cut -d ' ' -f 1 |  xargs -L1 kill -s QUIT 
```

# php - 如何从动态 ajax 生成的表（PHP、JQuery、MySQL）中获取 ROW id

> ID：14766309
> 
> 赞同：0
> 
> 时间：2013-02-08T05:31:19.857
> 
> 标签：php, jquery, html, mysql, ajax

好的，我一直在做这个小项目，我以前做过；单击表行时使用 jquery 会给出 ID/值，但不能使用 php 或 ajax。所以我有点迷路了，在 ajax 查询之前，表中有一个包含信息的预设行。当我单击它时，一切正常，但是在从下拉菜单中选择一个源之后（源是一个名称，用于搜索包含某个名称的所有行）并将所有相关行加载到表中。单击一行 jquery 对生成的数据没有任何作用，但是当单击 thead 时，它会启动我设置的测试警报。我正在使用热键打开隐藏的弹出窗口，以便用户与表单/页面进行交互。

`jquery-1.7.1.js.js`
`jqueryhotkeys.js`

**外部 JS 文件**：`eval.js`

```
var s,
    Joe = {
        settings: {                 
        winWidth:       $(window).width(),
        winHeight:      $(window).height(),
        entriesPopW:    $('#overlay_entries').width(),
        entriesPopH:    $('#overlay_entries').height()
    },
    init: function() {
        s = this.settings;
        this.bindUIActions();
    },
    bindUIActions: function() {                 
        $(document).bind('keydown.f7',function (evt){
            //View Previous Entries
            $("#overlay_entries").fadeIn(1000);Joe.entries();Joe.loadEntries();
            $("#assList").change(function(e){
                assSelect = $("#assList").val();
                Joe.entryTable(assSelect);
            });
            $("#table-2 tr").click(function() {
                alert("You clicked ROW:\n\nID:  " + $(this).attr('id'));
            });
            $(".f7button").click(function(x){$("#overlay_entries").fadeOut(500);return false;});
            return false; 
        });             
    },
    //shows or hides hidden window
    entries: function(){if(!$("#overlay_entries").is(':visible')){return;} $("#overlay_entries").css({  left: (s.entriesPopW/2)+50 ,top: (s.entriesPopH/2)+50,position:'fixed'   }); },
    //populates table after drop down menu selection
    entryTable: function(a){
        var jac = a;
        $.ajax({
            type: "GET",
            url: "joe_functions.php?select="+jac,
            error: function() {alert('error');},
            success: function (data) {
                $("#table-2 tbody").ajaxComplete(function () {
                    $(this).html(data);                    
                });
            }
        }); 
    },
    //this loads the dropdown menu with names
    loadEntries: function(){
        $.ajax({
            type: "GET",
            url: "joe_functions.php?content=dropdown",
            error: function() {alert('error');},
            success: function (data) {$("#assList").ajaxComplete(function () {$(this).html(data);});}
        });
    }
}; 
```

**HTML 文件**

```
<head>
    <title>The Eval Form</title>
    <script src="jquery-1.7.1.js"></script>
    <script src="jquery.hotkeys.js"></script>
    <script type="text/javascript" src="eval.js"></script>
    <script>
        (function() {Joe.init();})();
    </script>
<style>
</style>

</head>

<body>
<div id="overlay_entries" style="display:none">
    <h2> Previous Entries:</h2>
    <center>
        <select name="" id="assList"></select><br/><br/>    
        <table id="table-2">
            <thead>
                <th class="entryColOne">Associate</th>
                <th class="entryColTwo">Eval Date</th>
                <th class="entryColThree">Score</th>
                <th class="entryColFour">Overall</th>
            </thead>
            <tbody>
                <tr>
                    <td>John</td>
                    <td>Smith</td>
                    <td>johnsmith@example.com</td>
                    <td>http://www.example.com</td>
                </tr>
            </tbody>
        </table>
        <br/>
        <input type="submit" class="f7button" value=""/>
    </center>
</div>
</body>
</html> 
```

**PHP 文件：** `joe_functions.php`

```
<?php
require 'db_connect.php';

if(isset($_GET['select']) && !empty($_GET['select'])){
    $passed = $_GET['select'];
    //$test = '<tr><td colspan=4">'.$passed.'</td></tr>';
    $sqlb   = 'SELECT * FROM joe_eval WHERE wmid ='.$passed.' ORDER BY id';
    $queryb     = mysql_query($sqlb);
    $numb   = mysql_num_rows($queryb);

    $tableData = '';
    $ib = 0;
    if(!$queryb){
        $query_error = '<tr><td colspan="4">MySQL Error: '.mysql_error().'</td></tr>';
        $tableData .= $query_error;
    }else{
        while($ib <$numb){
            $wmid   = mysql_result($queryb,$ib,'wmid');
            $person     = mysql_result($queryb,$ib,'employee'); 
            $id = mysql_result($queryb,$ib,'id');
            $date       = mysql_result($queryb,$ib,'date');
            $score      = (mysql_result($queryb,$ib,'dm1')+mysql_result($queryb,$ib,'dm2')+mysql_result($queryb,$ib,'dm3')+mysql_result($queryb,$ib,'dm4')+mysql_result($queryb,$ib,'dm5')+mysql_result($queryb,$ib,'dm6')+mysql_result($queryb,$ib,'dm7'))/7;
            $numFormat = number_format($score, 2, '.', '');
            $overall    =   '';

            if ($numFormat >= 1 && $numFormat < 1.6) {$overall = 'Below Needs';
            }else if ($numFormat >= 1.6 && $numFormat < 2.7) {$overall = 'Improvment Needed';
            }else if ($numFormat >= 2.7 && $numFormat < 3.6) {$overall = 'Good Performer';
            }else if ($numFormat >= 3.6 && $numFormat < 4.6) {$overall = 'Exceeds Expectations';
            }else if ($numFormat >= 4.6 && $numFormat <= 5) {$overall = 'Top Dog';}

                // HERE IS WERE THE ROW ID IS BEING INSERTED
                // WHICH WILL LATER BE USED TO LOAD FORM
                $tableData .= '<tr id="'.$id.'"><td>'.$person.'</td><td>'.$date.'</td><td class="score">'.$numFormat.'</td><td>'.$overall.'</td></tr>';
            $ib++;
        }
    }
    // Send back the tbody HTM
    echo $tableData;
}else{
    $tableData .= '<tr><td colspan="4"><b>YOU MUST SELECT A NAME FROM THE LIST ABOVE!</b></td></tr>';
}
?> 
```

所以我不确定这是否可能是 JS 文件中的错误，或者我是否应该在 PHP 文件中添加一些内容以生成与发送到 ajax 请求的数据一起生成的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:53:13.140

您可以做的一件事是使用 jquery .on()，它用于将事件处理程序绑定到动态生成的数据上，在您的情况下是从 ajax 调用接收的数据，

所以而不是

```
$("#table-2 tr").click(function() {
      alert("You clicked ROW:\n\nID:  " + $(this).attr('id'));
}); 
```

你可以做这样的事情

```
$("#table-2 tr").on("click", function() {
      alert("You clicked ROW:\n\nID:  " + $(this).attr('id'));
}); 
```

让我知道这是否有帮助。

您还可以[在此处阅读有关 jquery .on() 的信息](http://api.jquery.com/on)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:08:37.613

多亏了**Mandeep Jain**拍拍肩膀，让他朝不同的方向看，这是一个快速而简单的解决方法。

### 第一次尝试：

```
$("#table-2 tbody tr").click(function() {
     alert("You clicked ROW:\n\nID:  " + $(this).attr('id'));
}); 
```

### 第二次尝试：

```
$("#table-2 tbody tr").on("click", function() {
     alert("You clicked ROW:\n\nID:  " + $(this).attr('id'));
}); 
```

### 第三个也是最后一个工作修复：

```
$("#table-2 tbody tr").live("click", function() {
     alert("You clicked ROW:\n\nID:  " + $(this).attr('id'));
}); 
```

[jQuery 文档](http://api.jquery.com/live/)：

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。
> 
> 此方法提供了一种将委托事件处理程序附加到页面的文档元素的方法，这在将内容动态添加到页面时简化了事件处理程序的使用。

# python - 如何在 Python 中验证日期并让它在某个日期或之前？

> ID：14766312
> 
> 赞同：0
> 
> 时间：2013-02-08T05:32:00.373
> 
> 标签：python

我从时间模块导入时间并`datetime.now()`尝试创建一个函数。问题是，我的格式是`YYYY-MM-DD`，但`datetime.now()`返回：

```
datetime.datetime(2013, 2, 7, 21, 24, 9, 308361). 
```

和

```
time.strptime('2012-03-14','%Y-%m-%d') 
```

返回这个：

```
time.struct_time(tm_year=2012, tm_mon=3, tm_mday=14, tm_hour=0, tm_min=0, tm_sec=0, tm_wday=2, tm_yday=74, tm_isdst=-1) 
```

如何制作一个给我一个有效日期的函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T05:37:40.247

改为使用`strftime`。

```
In [55]: datetime.datetime.now().strftime('%Y-%m-%d')
Out[55]: '2013-02-08' 
```

或者

```
In [57]: time.strftime('%Y-%m-%d')
Out[57]: '2013-02-08' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:49:17.073

你也可以这样做

```
import datetime
today = datetime.date.today()
print today.strftime('The date is %d, %h %Y') 
```

输出

`The date is 08, Feb 2013`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:35:46.927

根据您的标题要求，您始终可以这样做：

```
from datetime import datetime
import time

some_time_in_seconds = datetime.now().replace(year=<some_year> day=<some day>).strftime("%s")

now = time.time()

if int(some_time_in_seconds) - now > 0:
    #Some date is after now 
```

# c++ - 一个简单的算法，需要两个 INT 并返回一个随机的 INT

> ID：14766314
> 
> 赞同：-1
> 
> 时间：2013-02-08T05:32:22.727
> 
> 标签：c++, c, random

该功能将是这样的。

```
int generateSortOfRandomInt(int X, int Y){

/*
Your program

*/

return randomINT that is always the same for X and Y
} 
```

如果 generateSortOfRandomInt(5,15) != generateSortOfRandomInt(15,5)

一个例子就像

```
int value1 = generateSortOfRandomInt(1, 3);  // 546547
int value2 = generateSortOfRandomInt(3, 1);  // 134566
int value3 = generateSortOfRandomInt(1, 3);  // 546547 THE SAME AS value1
int value4 = generateSortOfRandomInt(2, 3);  // 646621 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T05:50:26.200

使用哈希函数，例如

```
return std::hash<int>()(std::hash<int>()(x) + y); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-08T07:15:58.903

```
int generateSortOfRandomInt(int X, int Y)
{
    return (X * 0xcafebabe) ^ (Y * 0xdeadbeef);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T05:45:30.733

搜索 2D 的 Perlin 噪声。如果我没记错的话，这将为相同的输入提供相同的输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T05:42:26.287

你的问题很模糊。有一百万种不同的方法可以做到这一点。

一些想法是：将数字相除并移动小数点以创建一个数字。

但是，根据您如何根据作为参数给出的数字的顺序获得不同的结果。我会使用这些数字根据参数 [http://www.cprogramming.com/tutorial/bitwise_operators.html向左或向右移动位](http://www.cprogramming.com/tutorial/bitwise_operators.html)

* * *

## 回答 #5

> 赞同：-6
> 
> 时间：2013-02-08T05:41:57.887

这是我想出的：

```
int generateSortOfRandomInt(int X, int Y)
{
    srand(x*x+y);

    return rand();
} 
```

# php - 如何在cakephp中将数组转换为数组

> ID：14766317
> 
> 赞同：0
> 
> 时间：2013-02-08T05:32:50.950
> 
> 标签：php, arrays, cakephp, variables

当我调试名为 的变量时，将数组数组转换为数组时出现问题`$todaysdata`，它显示在输出下方，

```
 Array
                 (
                   [0] => Array
                        (
                           [Requestcard] => Array
                             (
                                 [id] => 954
                                 [userprofile_id] => 14
                                 [userprofile_name] => Syed Imran
                                 [sex] => male

                              )

                         )

                ) 
```

但实际上我希望以给定格式输出

```
 Array
                               (
                                 [Requestcard] => Array
                                    (
                                      [id] => 954
                                      [userprofile_id] => 14
                                      [userprofile_name] => Syed Imran
                                      [sex] => male

                                     )

                               ) 
```

如果有人知道。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T05:51:03.290

只需使用`array_shift`

```
array_shift($array) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T06:11:28.280

我更喜欢`array_shift`在这种情况下使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T05:41:12.270

解决您给出的示例的正确语法类似于：

```
$result_array = $original_array[0]; 
```

如果您有多个数组要向上移动，您可能需要考虑 PHP 的[array_merge()](http://php.net/manual/en/function.array-merge.php)函数。

# java - 使用 Displaytag 导出 Excel

> ID：14766318
> 
> 赞同：0
> 
> 时间：2013-02-08T05:32:57.620
> 
> 标签：java, decorator, displaytag

我正在使用 Display 标签在表格中显示结果。我正在使用装饰器类来自定义某些列的外观

我有一列显示由装饰器自定义的结果

```
public String getMyLink(){
    return "<a href='"+getCurrentRowObject().getLink()+"'>Details</a>";
} 
```

正如我所期望的那样，这正在显示。

但是当我将结果导出为 Xml/Excel 或任何其他格式时，我得到的列详细信息为“http://myLink'>Details”

但我希望它作为 http://myLink 导入（没有额外的装饰器数据）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:37:41.433

我找到了解决方案。谢谢 ：）

[http://displaytag.sourceforge.net/1.2/tut_decorators.html#Table_decorators_and_exports](http://displaytag.sourceforge.net/1.2/tut_decorators.html#Table_decorators_and_exports)

# android - 没有在 Android 中获取外部字体

> ID：14766320
> 
> 赞同：0
> 
> 时间：2013-02-08T05:33:08.187
> 
> 标签：android, fonts

我没有从创建新类中获得外部字体，我在其中定义了外部字体。

**字体样式.Java**

```
public class FontStyle extends Activity{
    public final static String roboto_regular = "fonts/roboto_regular.ttf";
    public Typeface font_roboto_regular = Typeface.createFromAsset(getAssets(),
        roboto_regular);

} 
```

和**MainActivity.Java**

```
public class MainActivity extends Activity {
FontStyle font_style;
  @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
            fontStyling();
    }

   private void fontStyling() {
   TextView test= (TextView) findViewById(R.id.tv_test);
   test.setTypeface(font_style.font_roboto_regular );
} 
```

我收到此错误或 logcat：

```
 java.lang.RuntimeException: Unable to start activity  ComponentInfo{com.test/com.test.MainActivity}: java.lang.NullPointerException 
```

请人纠正我：提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T05:40:24.687

首先，您需要将 Activity 上下文传递`FontStyle`给访问`getAssets`方法。如果 FontStyle 不是 Activity 则无需将 Activity 扩展到它。将您的 FontStyle 类更改为：

```
public class FontStyle {
Context context;
public final static String roboto_regular = "fonts/roboto_regular.ttf";
public FontStyle(Context context){
 this.context=context;
}
  public Typeface getTtypeface(){
     Typeface font_roboto_regular = 
        Typeface.createFromAsset(context.getAssets(),roboto_regular);

    return font_roboto_regular;
  }
} 
```

现在将 Activity 代码更改为为 TextView 设置自定义字体：

```
public class MainActivity extends Activity {
FontStyle font_style;
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        font_style=new FontStyle(MainActivity.this);
        fontStyling();
    }

private void fontStyling() {
TextView test= (TextView) findViewById(R.id.tv_test);
test.setTypeface(font_style.getTtypeface());
} 
```

# regex - 带有空行的样式表问题

> ID：14766321
> 
> 赞同：1
> 
> 时间：2013-02-08T05:33:09.590
> 
> 标签：regex, ftp, dreamweaver

当我使用 FTP 打开样式表时，似乎有很多空白行和空格。我如何删除它，请帮助..

示例行在这里

上传的CSS：

```
h1{
color:#01486d;    
font-size:42px;
} /* no blank lines  */ 
```

当我通过 FTP 打开相同的样式表时，就像

```
 h1    {
     color:#01486d; 

font-size:42px;

}/* lots of white spaces and blank lines */ 
```

有人建议使用正则表达式，但我不知道如何在 Dream Viewer 中使用正则表达式。请帮忙谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:55:43.087

如果你打开 Vi/Vim，你可以用下面的代码删除空行：

```
:g/^$/d 
```

并且可以使用以下代码删除选项卡：

```
:g/\t/d 
```

分解：

点击转义，然后`:`将带您进入命令提示符。实际的命令是搜索整个文档 之间的所有内容都是`g/\t/d` 要查找的正则表达式模式，在这种情况下，以 ( ) 开头的行带有行尾标记 ( ) 和制表符 ( )。代表要采取的行动。在这种情况下，请删除该行。`g``/ /``^``$``\t``d`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:42:48.283

命令 > 应用源格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T05:47:21.943

查找空行的正则表达式：

```
^$ 
```

正则表达式在一行中查找多个空行：

```
[\n]{2,} 
```

您可以只删除第一个，或将第二个替换为`\n`.

# android - 我似乎无法从 Pinterest Json 获取 JSON 文件

> ID：14766322
> 
> 赞同：0
> 
> 时间：2013-02-08T05:33:12.057
> 
> 标签：android, json, pinterest

我在从 pinterest 获取 json 时遇到问题，它总是在 JSONArray 部分出错。

*代码*

```
JSONArray bodyarray = null;
JSONParser jParser = new JSONParser();
JSONObject json = jParser.getJSONFromUrl(url);
Log.i("url",""+url);
Log.i("json",""+json);
try{    
    bodyarray = json.getJSONArray(TAG_body);  <---- this is the error here "NullPointerException"
    Log.i("JSON", ""+bodyarray);
} 
```

*收到 JSON*

网址 - [http://pinterestapi.co.uk/username/pins](http://pinterestapi.co.uk/username/pins)

从 facebook 和 twitter 解析 JSON 时我没有遇到这个问题，这只发生在 pinterest 链接中。如何在 pinterest 链接上获取数组？

*这是我正在使用的解析器*

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();           

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n"); //\n
        }
        is.close();
        json = sb.toString();
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}

} 
```

*这是带有 Log on json = sb.toStirng(); 的 logcat；和 str_final*

```
02-08 15:09:13.032: I/json sbtostring(416): <!DOCTYPE html>
02-08 15:09:13.032: I/json sbtostring(416): <html>
02-08 15:09:13.032: I/json sbtostring(416):     <head>
02-08 15:09:13.032: I/json sbtostring(416):         <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
02-08 15:09:13.032: I/json sbtostring(416):         <meta name="robots" content="noindex,nofollow" />
02-08 15:09:13.032: I/json sbtostring(416):         <title>Whoops, looks like something went wrong.</title>
02-08 15:09:13.032: I/json sbtostring(416):         <style>
02-08 15:09:13.032: I/json sbtostring(416):             /* Copyright (c) 2010, Yahoo! Inc. All rights reserved. Code licensed under the BSD License: http://developer.yahoo.com/yui/license.html */
02-08 15:09:13.032: I/json sbtostring(416):             html{color:#000;background:#FFF;}body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,code,form,fieldset,legend,input,textarea,p,blockquote,th,td{margin:0;padding:0;}table{border-collapse:collapse;border-spacing:0;}fieldset,img{border:0;}address,caption,cite,code,dfn,em,strong,th,var{font-style:normal;font-weight:normal;}li{list-style:none;}caption,th{text-align:left;}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:normal;}q:before,q:after{content:'';}abbr,acronym{border:0;font-variant:normal;}sup{vertical-align:text-top;}sub{vertical-align:text-bottom;}input,textarea,select{font-family:inherit;font-size:inherit;font-weight:inherit;}input,textarea,select{*font-size:100%;}legend{color:#000;}
02-08 15:09:13.032: I/json sbtostring(416):             html { background: #eee; padding: 10px }
02-08 15:09:13.032: I/json sbtostring(416):             body { font: 11px Verdana, Arial, sans-serif; color: #333 }
02-08 15:09:13.032: I/json sbtostring(416):             img { border: 0; }
02-08 15:09:13.032: I/json sbtostring(416):             .clear { clear:both; height:0; font-size:0; line-height:0; }
02-08 15:09:13.032: I/json sbtostring(416):             .clear_fix:after { display:block; height:0; clear:both; visibility:hidden; }
02-08 15:09:13.032: I/json sbtostring(416):             .clear_fix { display:inline-block; }
02-08 15:09:13.032: I/json sbtostring(416):             * html .clear_fix { height:1%; }
02-08 15:09:13.032: I/json sbtostring(416):             .clear_fix { display:block; }
02-08 15:09:13.032: I/json sbtostring(416):             #content { width:970px; margin:0 auto; }
02-08 15:09:13.032: I/json sbtostring(416):             .sf-exceptionreset, .sf-exceptionreset .block { margin: auto }
02-08 15:09:13.032: I/json sbtostring(416):             .sf-exceptionreset abbr { border-bottom: 1px dotted #000; cursor: help; }
02-08 15:09:13.032: I/json sbtostring(416):             .sf-exceptionreset p { font-size:14px; line-height:20px; color:#868686; padding-bottom:20px }
02-08 15:09:13.032: I/json sbtostring(416):             .sf-exceptionreset strong { font-weight:bold; }
02-08 15:09:13.032: I/json sbtostring(416):             .sf-exceptionreset a { color:#6c6159; }
02-08 15:09:13.032: I/json sbtostring(416):             .sf-exceptionreset a img { border:none; }
02-08 15:09:13.032: I/json sbtostring(416):             .sf-exceptionreset a:hover { text-decoration:underline; }
02-08 15:09:13.032: I/json sbtostring(416):             .sf-exceptionreset em { font-style:italic; }
02-08 15:09:13.032: I/json sbtostring(416):             .sf-exceptionreset h1, .sf-exceptionreset h2 { font: 20px Georgia, "Times New Roman", Times, serif }
02-08 15:09:13.032: I/json sbtostring(416):             .sf-exceptionreset h2 span { background-color: #fff; color: #333; padding: 6px; float: left; margin-right: 10px; }
02-08 15:09:13.032: I/json sbtostring(416):             .sf-exceptionreset .traces li { font-size:12px; padding: 2px 4px; list-style-type:decimal; margin-left:20px; }
02-08 15:09:13.032: I/json sbtostring(416):             .sf-exceptionreset .block { background-color:#FFFFFF; padding:10px 28px; margin-bottom:20px;
02-08 15:09:13.032: I/json sbtostring(416):                 -webkit-border-bottom-right-radius: 16px;
02-08 15:09:13.032: I/json sbtostring(416):                 -webkit-border-bottom-left-radius: 16px;
02-08 15:09:13.032: I/json sbtostring(416):                 -moz-border-radius-bottomright: 16px;
02-08 15:09:13.032: I/json sbtostring(416):                 -moz-border-radius-bottomleft: 16px;
02-08 15:09:13.032: I/json sbtostring(416):                 border-bottom-right-radius: 16px;
02-08 15:09:13.032: I/json sbtostring(416):                 border-bottom-left-radius: 16px;
02-08 15:09:13.032: I/json sbtostring(416):                 border-bottom:1px solid #ccc;
02-08 15:09:13.032: I/json sbtostring(416):                 border-right:1px solid #ccc;
02-08 15:09:13.032: I/json sbtostring(416):                 border-left:1px solid #ccc;
02-08 15:09:13.032: I/json sbtostring(416):             }
02-08 15:09:13.032: I/json sbtostring(416):             .sf-exceptionreset .block_exception { background-color:#ddd; color: #333; padding:20px;
02-08 15:09:13.032: I/json sbtostring(416):                 -webkit-border-top-left-radius: 16px;
02-08 15:09:13.032: I/json sbtostring(416):                 -webkit-border-top-right-radius: 16px;
02-08 15:09:13.032: I/json sbtostring(416):                 -moz-border-radius-topleft: 16px;
02-08 15:09:13.032: I/json sbtostring(416):                 -moz-border-radius-topright: 16px;
02-08 15:09:13.032: I/json sbtostring(416):                 border-top-left-radius: 16px;
02-08 15:09:13.032: I/json sbtostring(416):                 border-top-right-radius: 16px;
02-08 15:09:13.032: I/json sbtostring(416):                 border-top:1px solid #ccc;
02-08 15:09:13.032: I/json sbtostring(416):                 border-right:1px solid #ccc;
02-08 15:09:13.032: I/json sbtostring(416):                 border-left:1px solid #ccc;
02-08 15:09:13.032: I/json sbtostring(416):             }
02-08 15:09:13.032: I/json sbtostring(416):             .sf-exceptionreset li a { background:none; color:#868686; text-decoration:none; }
02-08 15:09:13.032: I/json sbtostring(416):             .sf-exceptionreset li a:hover { background:none; color:#313131; text-decoration:underline; }
02-08 15:09:13.032: I/json sbtostring(416):             .sf-exceptionreset ol { padding: 10px 0; }
02-08 15:09:13.032: I/json sbtostring(416):             .sf-exceptionreset h1 { background-color:#FFFFFF; padding: 15px 28px; margin-bottom: 20px;
02-08 15:09:13.032: I/json sbtostring(416):                 -webkit-border-radius: 1
02-08 15:09:13.042: E/JSON Parser(416): Error parsing data org.json.JSONException: Value <!DOCTYPE of type java.lang.String cannot be converted to JSONObject
02-08 15:09:13.063: E/JSON Parser(416): Error parsing data org.json.JSONException: Value <!DOCTYPE of type java.lang.String cannot be converted to JSONObject
02-08 15:09:13.063: I/url(416): http://pinterestapi.co.uk/username/pins
02-08 15:09:13.072: I/json(416): null
02-08 15:09:13.072: D/AndroidRuntime(416): Shutting down VM
02-08 15:09:13.082: W/dalvikvm(416): threadid=1: thread exiting with uncaught exception (group=0x40015560)
02-08 15:09:13.102: E/AndroidRuntime(416): FATAL EXCEPTION: main
02-08 15:09:13.102: E/AndroidRuntime(416): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.AR.ARGroup/com.AR.ARGroup.Social_Pinterest}: java.lang.NullPointerException
02-08 15:09:13.102: E/AndroidRuntime(416):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
02-08 15:09:13.102: E/AndroidRuntime(416):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
02-08 15:09:13.102: E/AndroidRuntime(416):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
02-08 15:09:13.102: E/AndroidRuntime(416):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
02-08 15:09:13.102: E/AndroidRuntime(416):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-08 15:09:13.102: E/AndroidRuntime(416):  at android.os.Looper.loop(Looper.java:123)
02-08 15:09:13.102: E/AndroidRuntime(416):  at android.app.ActivityThread.main(ActivityThread.java:3683)
02-08 15:09:13.102: E/AndroidRuntime(416):  at java.lang.reflect.Method.invokeNative(Native Method)
02-08 15:09:13.102: E/AndroidRuntime(416):  at java.lang.reflect.Method.invoke(Method.java:507)
02-08 15:09:13.102: E/AndroidRuntime(416):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
02-08 15:09:13.102: E/AndroidRuntime(416):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
02-08 15:09:13.102: E/AndroidRuntime(416):  at dalvik.system.NativeStart.main(Native Method)
02-08 15:09:13.102: E/AndroidRuntime(416): Caused by: java.lang.NullPointerException
02-08 15:09:13.102: E/AndroidRuntime(416):  at com.AR.ARGroup.Social_Pinterest.onCreate(Social_Pinterest.java:76)
02-08 15:09:13.102: E/AndroidRuntime(416):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
02-08 15:09:13.102: E/AndroidRuntime(416):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
02-08 15:09:13.102: E/AndroidRuntime(416):  ... 11 more 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:16:45.633

这是一个获取请求。你正在使用 HttpPost httpPost = new HttpPost(url);。

将其替换为**HttpGet httpGet = new HttpGet(url);**

# javascript - 有条件地阻止锚标记的默认操作的问题

> ID：14766323
> 
> 赞同：0
> 
> 时间：2013-02-08T05:33:53.110
> 
> 标签：javascript, jquery

有一个锚标签：inventoryHome，它将用户带到不同的页面。

如果 rateMap 的大小大于 0，我需要显示一个确认弹出窗口，确认用户是否要丢弃未保存的更改。

如果用户确认丢弃，则调用方法 navigateToInv()。

在下面的代码中，虽然调用了 navigateToInv() 方法并触发了点击事件，但页面并没有导航到新页面。

```
<li><a href="<%=request.getContextPath()%>/inventory" id="inventoryHome"> <spring:message code="inventoryTab" /></a></li>

    $('#inventoryHome').click(function(e) {
            if (Object.size(rateMap) > 0) {

                e.preventDefault();
                showDiscardConfirmationPopUp(navigateToInv, false);
            }
        });

    var navigateToInv = function (){
        rateMap = new Object();
         $('#inventoryHome').trigger('click');
    }

 Object.size = function(obj) {
     var size = 0, key;
     for (key in obj) {
         if (obj.hasOwnProperty(key)) size++;
     }
     return size;
 }; 
```

无法识别问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:21:07.853

问题是调用`trigger('click')`锚标记不会导致它导航到由 href 值指定的页面。看到[这个答案](https://stackoverflow.com/questions/1762703/re-firing-a-click-event-on-a-link-with-jquery/1763231#1763231)。

您要么必须设置`window.location`为 href 值，要么更改逻辑，以便`e.preventDefault()`仅在用户选择不放弃更改后调用，如下所示：

```
$('#linkId').click(function(e) {
    if (hasUnsavedChanges() && !confirmDiscard()) {
         e.preventDefault();
    }
} 
```

在您的情况下，它将是：

```
$('#inventoryHome').click(function(e) {
    if (!$.isEmptyObject(rateMap) && !confirm("Discard changes?")) {
        e.preventDefault();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-16T06:34:41.603

我达到了相同的效果：

```
var navigateToInv = function(){
    document.location.href= $("#inventoryHome").attr('href'); 
} 
$('#inventoryHome').click(function(e) { 
    if (Object.keys(ratePopUpMap).length > 0) {
     e.preventDefault(); 
     showDiscardConfirmationPopUp(navigateToInv, false);
     }
}) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T05:52:35.683

问题似乎`rateMap`是永远不会改变为`<= 0`. 因此，即使您`click()`手动调用该方法，它仍然会遵循禁用默认操作的链，这就是它不会重定向到所需页面的原因。您应该添加另一个以 true 开头的状态变量，因此它会触发 prevent default 分支，然后在手动调用`click()`within之前立即设置为 false `navigateToInv()`。

# javascript - knockout.js 选项绑定不起作用

> ID：14766325
> 
> 赞同：0
> 
> 时间：2013-02-08T05:33:56.453
> 
> 标签：javascript, knockout.js

在下面的代码中。

```
<div data-bind="foreach: $root.menusarray">
    <span data-bind="text: Name">Course Option Name: </span>
    <select data-bind="options:CourseOptions, 
                       optionsText: 'Name', 
                       optionsValue:'Id',
                       value: $root.selectedoptionsid"></select>
</div> 
```

`$root.menusarray`包含一个对象数组，并且`CourseOptions`是其中的另一个对象数组。`$root.selectedoptionsid`是一个可观察的 id 数组，它不是`CourseOptions`or的一部分`$root.menusarray`。

我正在尝试显示与的当前值或数组中的第一个匹配`'Name'`的匹配项。`'Id'``$root.selectedoptionsid``'Name'``CourseOptions`

如果未找到匹配项，则还必须将新选择存储在`$root.selectedoptionsid`可观察数组中的相同位置。的长度`$root.selectedoptionsid`等于`CourseOptions`。有什么建议么？

# objective-c - 目标C：用于迭代但排除数组中的对象

> ID：14766336
> 
> 赞同：0
> 
> 时间：2013-02-08T05:34:54.477
> 
> 标签：objective-c

如何遍历两个对象的数组以比较它们，但是在第二次迭代（对于 obj2）我想排除比较已经发现匹配的对象（obj1）？换句话说，我不希望他们都找到同一个对象。

```
for (object *obj1 in array) 
    if (obj1 == "this") //run next iteration
    for (object *obj2 in array)
    // if (obj2 == @"this"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:44:09.597

```
for(object *obj1 in array) {
    for (object *obj2 in array) {
        if(obj1 == obj2) continue; //this matches if the object is same
        //do your code
    }
} 
```

# javascript - 使 HTML 按钮在单击时消失，然后在 X 次后重新出现？

> ID：14766340
> 
> 赞同：0
> 
> 时间：2013-02-08T05:35:39.387
> 
> 标签：javascript, html, button, time, hide

如何使 HTML 按钮在单击时消失，然后在 2 秒后重新出现？我找到了一些方法，但我需要它来处理我已经拥有的代码。我怎样才能做到这一点？

```
<script language="JavaScript">

  function enableTorch(milliSeconds) {
    ipwajax('enabletorch');
    window.setTimeout("ipwajax('disabletorch');",milliSeconds);
  }

</script>
<input type="button" style="font: bold 20px Arial" onclick="enableTorch(1500);" value="LED ON"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:42:30.737

```
<!--
$("p").hide()
Demonstrates the jQuery hide() method, hiding all <p> elements.
-->
<html>
<head>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  $("button").click(function(){
    $("button").hide();
    $("button").show(2000);/*2 sec time*/
  });
});
</script>
</head>

<body>

<button>Click me</button>
</body>
</html> 
```

这个将隐藏按钮并在 2 秒内重新显示

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T05:51:56.793

检查这个

```
function enableTorch(milliSeconds) {
   ipwajax('enabletorch');
   document.getElementById('torch').style.display="none";
   setTimeout(function(){ipwajax('disabletorch');document.getElementById('torch').style.display='inline'}, milliSeconds);
  }

<input type="button" id = "torch" style="font: bold 20px Arial" onclick="enableTorch(1500);" value="LED ON"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T05:55:14.647

```
$(document).ready(function(){
  $("button").click(function(){
    $(this).hide().show(2000);
  });
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T05:46:37.177

给你[http://jsfiddle.net/4eCrQ/](http://jsfiddle.net/4eCrQ/)

```
$('.first').on('click', function() {
    $('.second').hide();
    setTimeout(function() {
        $('.second').show();
    }, 2000);
}); 
```

# jquery - 如何使用这个 localstorage 示例插入这个脚本？

> ID：14766343
> 
> 赞同：2
> 
> 时间：2013-02-08T05:36:27.457
> 
> 标签：jquery, html, local-storage, swap

我编写了一个脚本，通过该网站[http://www.martyregan.com/](http://www.martyregan.com/)告诉多个 div ，通过单击“网站语言”按钮从英文 div 切换到日文 div。

它以我喜欢的方式工作，尽管我的客户想知道 DIV 在转到另一个页面时是否可以留在日文 DIV 上。

该脚本当前告诉第一个子类（两个相应的 div）显示和隐藏任何其他共享该类的内容。

它还告诉第一个子类是活动的，所以我想有一种方法可以实现某种缓存/内存脚本来处理它。

```
 $(function() {
$('#left-sidebar-inner .ddsmoothmenu-v, #right-sidebar-inner .ddsmoothmenu-v, #pb_sidebar .ddsmoothmenu-v, #main-content-inner .content, #main-content-inner .contact, #main-content-inner .right, #main-content-inner .program, #main-content-inner .worksnav, #main-content-inner .worksnav2, #main-content-inner .heading').hide();
$('#left-sidebar-inner .ddsmoothmenu-v:first, #right-sidebar-inner .ddsmoothmenu-v:first, #pb_sidebar .ddsmoothmenu-v:first, #main-content-inner .content:first, #main-content-inner .contact:first, #main-content-inner .right:first, #main-content-inner .program:first, #main-content-inner .worksnav:first, #main-content-inner .worksnav2:first, #main-content-inner .heading:first').show();
$('#language a:first').addClass('active');

$('#language a').click(function() {
if ($(this).hasClass('active') == true) {
    return false;
}
else {
    $('a.active').removeClass('active');
    $(this).addClass('active');

    $('#left-sidebar-inner .ddsmoothmenu-v, #right-sidebar-inner .ddsmoothmenu-v, #pb_sidebar .ddsmoothmenu-v, #main-content-inner .content, #main-content-inner .contact, #main-content-inner .right, #main-content-inner .program, #main-content-inner .worksnav, #main-content-inner .worksnav2, #main-content-inner .heading').fadeOut();
    var contentToLoad = $(this).attr('href');
    $(contentToLoad).fadeIn();

    return false;
}
});
}); 
```

这是给我的例子：

```
$('a.en').click(function(){
localStorage.setItem('language', 'en');
});

$('a.fr').click(function(){
localStorage.setItem('language', 'fr');
});

// to get the language value use getItem
localStorage.getItem('language'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:34:23.943

您的问题可以很快得到解决，所以与其再次告诉您这可以由任何自由职业者解决，我希望我只是这样做了；）

这是未经测试的，因为创建测试环境需要付出太多的努力，

但它*应该可以*工作，如果你在语言选择器的链接中添加一个 html id 标签，

```
<div id="language">
    <a id="en" href="#mainnaven, #contenten, #contacten, #works_righten, #works_programen,  #worksnaven,  #worksnav2en, #works_headen" class="">
        <img src="http://www.martyregan.com/files/1413/5826/9756/en.png">
    </a>
    <a id="jp" href="#mainnavjp, #contentjp, #contactjp, #works_rightjp, #works_programjp, #worksnavjp, #worksnav2jp, #works_headjp" class="active">
        <img src="http://www.martyregan.com/files/5213/5826/9759/jp.png">
    </a>
</div> 
```

注意我添加到 div 中的 id="en" 和 id='jp'。

如果那不可能，我们将不得不添加更多行。

那么脚本将是：

```
jQuery(function($) {
  var language = localStorage.getItem('language');

  if(!language) {
    language = "en";
  }

  $('#left-sidebar-inner .ddsmoothmenu-v').fadeOut(function(){

    var link =  $('#'+language);
    var contentToLoad = link.attr('href');

    $('.active').removeClass('active');
    link.addClass('active');

    $(contentToLoad).fadeIn();
  });

  $('#left-sidebar-inner .ddsmoothmenu-v').show();
  $('#language a:first').addClass('active');

  $('#language a').live('click',function() {

    if ($(this).hasClass('active') == true) {
        return false;
    } else {
        $('a.active').removeClass('active');
        $(this).addClass('active');

        var language = 'jp';
        if($(this).attr('href').indexOf('mainnaven') > 0 ) {
          language = 'en'
        }

        localStorage.setItem('language', language);

        $('#left-sidebar-inner .ddsmoothmenu-v').fadeOut();
        var contentToLoad = $(this).attr('href');

        $(contentToLoad).fadeIn();

        return false;
    }
  });
}); 
```

玩得开心

亚沙

# spring - Spring DAO 未注入 JSF 托管 bean

> ID：14766345
> 
> 赞同：2
> 
> 时间：2013-02-08T05:36:34.610
> 
> 标签：spring, hibernate, jsf-2

我在我的演示应用程序中使用 JSF2+Spring3.1+Hibernate4，我想使用注释来创建会话工厂，但是我的 DAO 类没有在 Jsf Managed Bea 类中初始化，所以我得到空指针异常。我的**applicationContext.xml**

```
<beans xmlns="http://www.springframework.org/schema/beans"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:tx="http://www.springframework.org/schema/tx"
        xmlns:context="http://www.springframework.org/schema/context"
        xsi:schemaLocation="http://www.springframework.org/schema/beans
                http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                http://www.springframework.org/schema/tx 
                http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
                http://www.springframework.org/schema/context 
                http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:annotation-config></context:annotation-config>

    <context:component-scan base-package="com.otv"></context:component-scan>

    <!-- Data Source Declaration -->
    <bean id="DataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource"  >
        <property name="driverClass" value="org.postgresql.Driver" />   
        <property name="jdbcUrl" value="jdbc:postgresql://localhost:5432/postgres" />   
        <property name="user" value="postgres" />   
        <property name="password" value="hariom" /> 
        <property name="maxPoolSize" value="10" />
        <property name="maxStatements" value="0" />
        <property name="minPoolSize" value="5" /> 
    </bean>

    <!-- Session Factory Declaration -->
    <bean id="SessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean ">
        <property name="dataSource" ref="DataSource" />
        <property name="annotatedClasses">
            <list>
                <value>com.otv.model.User</value>
            </list>
        </property>
        <property name="hibernateProperties">
            <props>
                <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
                <prop key="hibernate.show_sql">true</prop>
            </props>
        </property>
          <property name="packagesToScan" value="com.otv.user"></property>
    </bean>

    <!-- Transaction Manager is defined -->
    <bean id="txManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager" >
       <property name="sessionFactory" ref="SessionFactory"/>
    </bean>

  <!-- Enable the configuration of transactional behavior based on annotations -->
    <tx:annotation-driven transaction-manager="txManager"/>

</beans> 
```

UserDAO.java 类

```
package com.otv.user.dao;

import java.util.List;

import com.otv.model.User;

import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;

/**
 * 
 * User DAO
 * 
 * @author onlinetechvision.com
 * @since 25 Mar 2012
 * @version 1.0.0
 *
 */

@Repository
@Transactional
public class UserDAO   {

    @Autowired
    private SessionFactory sessionFactory;

    /**
     * Get Hibernate Session Factory
     * 
     * @return SessionFactory - Hibernate Session Factory
     */
/*  public SessionFactory getSessionFactory() {
        return sessionFactory;
    }

    *//**
     * Set Hibernate Session Factory
     * 
     * @param SessionFactory - Hibernate Session Factory
     *//*
    public void setSessionFactory(SessionFactory sessionFactory) {
        this.sessionFactory = sessionFactory;
    }*/

    /**
     * Add User
     * 
     * @param  User user
     */
    public void addUser(User user) {
        sessionFactory.getCurrentSession().save(user);
    }

    /**
     * Delete User
     * 
     * @param  User user
     */
    public void deleteUser(User user) {
        sessionFactory.getCurrentSession().delete(user);
    }

    /**
     * Update User
     * 
     * @param  User user
     */
    public void updateUser(User user) {
        sessionFactory.getCurrentSession().update(user);
    }

    /**
     * Get User
     * 
     * @param  int User Id
     * @return User 
     */
    public User getUserById(int id) {
        List list = sessionFactory.getCurrentSession()
                                            .createQuery("from User where id=?")
                                            .setParameter(0, id).list();
        return (User)list.get(0);
    }

    /**
     * Get User List
     * 
     * @return List - User list
     */
    public List<User> getUsers() {
        List list = sessionFactory.getCurrentSession().createQuery("from User").list();
        return list;
    }

} 
```

和我的 managedBean 类

```
package com.otv.managed.bean;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.RequestScoped;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.dao.DataAccessException;

import com.otv.model.User;
import com.otv.user.dao.UserDAO;
import com.otv.user.service.IUserService;

/**
 * 
 * User Managed Bean
 * 
 * @author onlinetechvision.com
 * @since 25 Mar 2012
 * @version 1.0.0
 *
 */
@ManagedBean(name="userMB")
@RequestScoped
public class UserManagedBean implements Serializable {

    private static final long serialVersionUID = 1L;
    private static final String SUCCESS = "success";
    private static final String ERROR   = "error";

    //Spring User Service is injected...

    List<User> userList;

    private int id;
    private String name;
    private String surname;

      @Autowired
      private UserDAO userDAO;
    /**
     * Add User
     * 
     * @return String - Response Message
     */
    public String addUser() {
        try {
            User user = new User();
            user.setId(getId());
            user.setName(getName());
            user.setSurname(getSurname());
            userDAO.addUser(user);
            return SUCCESS;
        } catch (DataAccessException e) {
            e.printStackTrace();
        }   

        return ERROR;
    }

    /**
     * Reset Fields
     * 
     */
    public void reset() {
        this.setId(0);
        this.setName("");
        this.setSurname("");
    }

    /**
     * Get User List
     * 
     * @return List - User List
     */
    public List<User> getUserList() {
        userList = new ArrayList<User>();
        userList.addAll(userDAO.getUsers());
        return userList;
    }

    /**
     * Get User Service
     * 
     * @return IUserService - User Service
     */

    /**
     * Set User List
     * 
     * @param List - User List
     */
    public void setUserList(List<User> userList) {
        this.userList = userList;
    }

    /**
     * Get User Id
     * 
     * @return int - User Id
     */
    public int getId() {
        return id;
    }

    /**
     * Set User Id
     * 
     * @param int - User Id
     */
    public void setId(int id) {
        this.id = id;
    }

    /**
     * Get User Name
     * 
     * @return String - User Name
     */
    public String getName() {
        return name;
    }

    /**
     * Set User Name
     * 
     * @param String - User Name
     */
    public void setName(String name) {
        this.name = name;
    }

    /**
     * Get User Surname
     * 
     * @return String - User Surname
     */
    public String getSurname() {
        return surname;
    }

    /**
     * Set User Surname
     * 
     * @param String - User Surname
     */
    public void setSurname(String surname) {
        this.surname = surname;
    }

} 
```

现在在 Managedbean 方法中，DAO 对象为空，我得到空指针异常

> 警告：#{userMB.addUser}：java.lang.NullPointerException javax.faces.FacesException：#{userMB.addUser}：com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:118) 处的 java.lang.NullPointerException ) 在 javax.faces.component.UICommand.broadcast(UICommand.java:315) 在 javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:794) 在 javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:第1259章org.apache.catalina.core.ApplicationFilterChain 的 javax.faces.webapp.FacesServlet.service(FacesServlet.java:593) 的 .execute(LifecycleImpl.java:118)。internalDoFilter(ApplicationFilterChain.java:305) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225) at org.apache .catalina.core.StandardContextValve.invoke(StandardContextValve.java:123) 在 org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472) 在 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java :168) 在 org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927) 在 org.apache.catalina.core 的 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)。 StandardEngineValve.invoke(StandardEngineValve.java:118) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407) 在 org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585) 在 org.apache.tomcat.util.net 的 org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001) .JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312) 在 java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908 ) 在 java.lang.Thread.run(Thread.java:662) 引起：javax.faces.el.E​​valuationException: java.lang.NullPointerException 在 javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102) 在com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:102) ... 23 更多原因：java。lang.NullPointerException 在 com.otv.managed.bean.UserManagedBean.addUser(UserManagedBean.java:57) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.apache.el.parser.AstValue.invoke(AstValue.java:264)在 org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278) 在 com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105) 在 javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter .java:88) ... 24 更多addUser(UserManagedBean.java:57) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.apache.el.parser.AstValue.invoke(AstValue.java:264) 在 org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java :278) at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105) at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88) ... 24 更多addUser(UserManagedBean.java:57) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.apache.el.parser.AstValue.invoke(AstValue.java:264) 在 org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java :278) at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105) at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88) ... 24 更多invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.apache.el.parser.AstValue .invoke(AstValue.java:264) 在 org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278) 在 com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105) 在 javax。 faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88) ... 24 更多invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.apache.el.parser.AstValue .invoke(AstValue.java:264) 在 org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:278) 在 com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105) 在 javax。 faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88) ... 24 更多在 com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105) 处调用(MethodExpressionImpl.java:278) 在 javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88) ... 24更多的在 com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:105) 处调用(MethodExpressionImpl.java:278) 在 javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:88) ... 24更多的

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-08T17:16:49.647

简而言之，您的 bean 应该完全由 JSF 或 Spring 管理。

这一点有很多证据。只需在此处和/或网络上查找“JSF + spring integartion”即可。

现在让我考虑一下这个问题，以增强您的理解。

许多 Web 应用程序由多个“层”组成，也称为应用程序的“层”：用于查看应用程序页面的 Web 层或表示层、用于执行应用程序和数据层的逻辑和业务规则的业务层或中间层，或持久层，用于向/从数据库传输数据。这些层可能具有以下配置：

1.  `Entity`将保存从您的数据库派生的数据的类，并且最合理地被诸如 Hibernate 之类的 ORM 框架使用；
2.  `DAO`将用于访问数据库并至少在数据库上执行 CRUD 操作的类，最重要的是为您的 Web 部件返回 Web 层的实体类；
3.  `Service`将反映您的应用程序提供的业务操作的类；
4.  `Bean`将支持您的视图的类，并且很可能包含在您的网页中使用的数据、操作方法、转换等。

下一步是为您的 Web 应用程序选择框架。

1.  您为所有层选择 Spring，这意味着您的 DAO 将是`@Repository`类，您的服务将是`@Service`类，您的 Bean 将是`@Component`类。您很可能会使用像 Hibernate 这样的 ORM 框架来处理数据库，因此您的实体将是`@Entity`在 Hibernate 样式中正确配置的 JPA 类。您的视图技术很可能是为与 Spring 核心一起工作而精心设计的 Spring MVC。例如，[Mkyong](http://www.mkyong.com/tutorials/spring-tutorials/)有很多关于使用 Spring 的简单教程。

2.  您为所有层选择原生 JSF+EJB 框架，这意味着您的 DAO 和服务将是`@EJB`类，您的 bean 将是`@ManagedBean`类。您很可能还会使用 Hibernate 作为 ORM 解决方案和 JPA 提供者，并将通过`EntityManager`. 您的视图技术将是 JSF，因为它很自然地打算与上述技术一起使用。例如，[BalusC](http://balusc.blogspot.com)有许多关于使用 JSF 的启发性教程。

这两种选择都有其拥护者和反对者。有人说为什么要选择不是~~Sun 的~~Oracle 解决方案的原生解决方案，其他人则说它太复杂和令人困惑并且缺乏可供学习的资源。

由于这不是技术选择上的争议，因此我不会在这里详细介绍，但会指出 Spring 是一个轻量级容器，它将运行在像 Tomcat 这样的简单 servlet 容器上，而 EJB 需要像 Glassfish 这样的应用程序服务器才能运行。我认为这是将 JSF 作为基于组件的 Web 框架和 Spring 作为轻量级依赖注入和业务层框架相结合的主要驱动力。

当我们决定将这两个框架集成在一起时，我将解释集成的工作原理以及 NPE 发生的原因。

1.  实体类要么是 JPA/Hibernate 注释类，要么是由 xml 配置的简单 POJO。
2.  DAO 将`@Repository`实现基本接口以避免紧密耦合。它们将由 Spring 框架管理。
3.  服务也将`@Service`实现基本接口。它们也将由 Spring 框架管理。请注意，如果您使用`@Transactional`.
4.  因此，如果您想将 Bean 用作依赖注入框架，那么Bean 必须`@Component`并且`@Scope("value")`必须由 Spring 管理，从而允许通过`@Autowired`.

因此，NPE 源于对您的 bean 作为视图的逻辑部分应该由 JSF 管理的误解（请注意，这`@ManagedProperty`也不起作用）。bean 由 JSF 实例化，但您的服务驻留在 JSF 知道的 Spring 上下文中，因此无法进行注入。另一方面，如果 bean 保留在 Spring 上下文中，它的生命周期和依赖项将由 Spring 注入。

因此，要使其正常工作，请将 bean 标记为

```
@Component
@Scope("request")
public class SpringManagedBeanToBeUsedByJSF {

    ...

    @Autowired
    private SpringService springService;

    ...

} 
```

并做好将 Spring 与 JSF 结合使用的所有先决条件。如果您迷失方向，请参阅[这个出色的设置示例。](http://www.mkyong.com/jsf2/jsf-2-0-spring-hibernate-integration-example/)这样，所有 bean 都将由 Spring 管理，并且当您在 faces-config.xml 中附加 EL-resolver（允许 JSF '看到' Spring beans）和 web.xml 中的必要侦听器时，它们将在 JSF 视图中可见。当您这样做时，所有 Spring bean 都可以在 .xhtml 文件中引用，如果您需要将 JSF 操作放在 bean 中，只需将它们放在（Spring）托管 bean 中或使它们实现至关重要到JSF接口等。只有这样才能实现集成。当然，您也可以使用 JSF 托管 bean，`@FacesConverter`并且`@FacesValidator`应用程序中的类也是如此，只是不要相互干扰，但是在一个应用程序中使用两个依赖注入框架至少会令人困惑。

希望这可以帮助您更好地了解情况。

您的代码也存在一些问题，我不会在这个一般性答案中强调。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T17:15:44.233

您可以尝试 UserDAO 的 ManagedProperty 注释吗

```
@ManagedProperty("#{userDAO}")
private UserDAO userDAO;

private void setUserDAO(UserDAO userDAO){
this.userDAO=userDAO;
} 
```

您可能还需要更改 dao 注释

```
@Repository("userDAO")
@Transactional
public class UserDAO 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:02:16.317

从 applicationContext.xml 中删除 bean 声明。当您使用 @Repository 注释 UserDao 时，spring 容器将使用它创建一个单例 bean。这应该可以解决您的问题。

从 applicationContext.xml 中删除它：`<bean id="UserDAO" class="com.otv.user.dao.UserDAO"> </bean>`

# c++ - C++ OpenGL 照明仅照亮某些墙壁

> ID：14766346
> 
> 赞同：1
> 
> 时间：2013-02-08T05:36:42.990
> 
> 标签：c++, opengl, lighting

我在 opengl 中点亮我的场景，有 4 面墙，其中只有 2 面被点亮。我认为这是正常的问题，但我不确定。

这是照明代码：

```
glShadeModel(GL_SMOOTH);
//glEnable(GL_CULL_FACE);

glEnable(GL_LIGHTING);
glEnable(GL_LIGHT0);
glEnable(GL_LIGHT1);

GLfloat lightpos0[] = {-5, 1, 0, 0.};
GLfloat AmbientLight0[] = {0.2, 0.2, 0.2,1.0}; 
GLfloat DiffuseLight0[] = {0.8, 0.8, 0.8,1.0};
GLfloat SpecularLight0[] = {1.0, 1.0, 1.0,1.0};

glLightfv(GL_LIGHT0, GL_POSITION, lightpos0);
glLightfv(GL_LIGHT0, GL_AMBIENT, AmbientLight0);
glLightfv(GL_LIGHT0, GL_DIFFUSE, DiffuseLight0);
glLightfv(GL_LIGHT0, GL_SPECULAR, SpecularLight0);

GLfloat lightpos1[] = {5, 1, 0, 0};
GLfloat AmbientLight1[] = {0.2, 0.2, 0.2,1.0}; 
GLfloat DiffuseLight1[] = {0.8, 0.8, 0.8,1.0};
GLfloat SpecularLight1[] = {1.0, 1.0, 1.0,1.0};

glLightfv(GL_LIGHT1, GL_POSITION, lightpos1);
glLightfv(GL_LIGHT1, GL_AMBIENT, AmbientLight1);
glLightfv(GL_LIGHT1, GL_DIFFUSE, DiffuseLight1);
glLightfv(GL_LIGHT1, GL_SPECULAR, SpecularLight1); 
```

这是绘制 4 面墙的代码。

```
 //north
    glBegin(GL_QUADS);
glNormal3f(1.0,0,0);
glVertex3f(-10,0,-10);
glVertex3f( 10,0,-10);
glVertex3f( 10,5,-10);
glVertex3f(-10,5,-10);
glEnd();
//south
glBegin(GL_QUADS);
glNormal3f(-1.0, 0, 0);
glVertex3f(-10,0, 10);
glVertex3f( 10,0, 10);
glVertex3f( 10,5, 10);
glVertex3f(-10,5, 10);
glEnd();
//east
glBegin(GL_QUADS);
glNormal3f(0,0, -1.0);
glVertex3f( 10,0,-10);
glVertex3f( 10,0,10);
glVertex3f( 10,5,10);
glVertex3f( 10,5,-10);
glEnd();
//west
glBegin(GL_QUADS);
glNormal3f(0,0,1.0);
glVertex3f( -10,0,-10);
glVertex3f( -10,0,10);
glVertex3f( -10,5,10);
glVertex3f( -10,5,-10);
glEnd(); 
```

如果有帮助，这里是正在发生的事情的图片：http: [//i.stack.imgur.com/xRgVL.png](http://i.stack.imgur.com/xRgVL.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T06:08:43.790

正如 Vladislav Khorev 所指出的，法线必须指向所有点共有的坐标（鉴于这种特殊的正交排列）。但也应该考虑多边形的缠绕：

```
 // Polygon A --  north     Polygon B -- south
 glVertex3f(-10,0,-10);     glVertex3f(-10,0, 10); 
 glVertex3f( 10,0,-10);     glVertex3f( 10,0, 10);
 glVertex3f( 10,5,-10);     glVertex3f( 10,5, 10);
 glVertex3f(-10,5,-10);     glVertex3f(-10,5, 10);
 Normal(0,0,1),             Normal(0,0,-1); 
```

两个多边形（南北），是不同的绕组。第一个是从点 0,0,0 观察到的顺时针，另一个是逆时针。一个应该与这些一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T06:02:25.163

似乎您将错误的法线向量传递给墙壁。

如果你的墙的所有点的 Z = -10（墙平行于 X），那么它的法向量必须指向 Z 的正方向：(0,0,1)。所有方向都是如此。

尝试这个：

```
glBegin(GL_QUADS);
glNormal3f(0,0,1);
glVertex3f(-10,0,-10);
glVertex3f( 10,0,-10);
glVertex3f( 10,5,-10);
glVertex3f(-10,5,-10);
glEnd();
//south
glBegin(GL_QUADS);
glNormal3f(0, 0, -1);
glVertex3f(-10,0, 10);
glVertex3f( 10,0, 10);
glVertex3f( 10,5, 10);
glVertex3f(-10,5, 10);
glEnd();
//east
glBegin(GL_QUADS);
glNormal3f(-1,0, -0);
glVertex3f( 10,0,-10);
glVertex3f( 10,0,10);
glVertex3f( 10,5,10);
glVertex3f( 10,5,-10);
glEnd();
//west
glBegin(GL_QUADS);
glNormal3f(1, 0, 0);
glVertex3f( -10,0,-10);
glVertex3f( -10,0,10);
glVertex3f( -10,5,10);
glVertex3f( -10,5,-10);
glEnd(); 
```

# android - 从 Activity 回调的 Fragment 中的空指针异常

> ID：14766347
> 
> 赞同：1
> 
> 时间：2013-02-08T05:36:43.987
> 
> 标签：android, android-fragments, nullpointerexception, android-activity

在我们继续之前，我知道你在想什么。**我初始化了我的对象**。我还在适当的方法中进行了初始化（我尝试了 onCreateView 和 onResume）。

我的问题是一个抛出空指针异常的对象（实际上，不止一个对象抛出空指针，但它们以相同的方式初始化），我终其一生都无法弄清楚原因。

**背景：**我有一个包含 TabHost 和 ViewPager 的 Activity。Activity 也是我拥有的 Fragment 的容器（我们将其称为 Frag A）。在我的 Activity 中，当 Frag A 可见时，用户可以单击一个按钮，该按钮会显示两个连续的 DialogFragment。当第二个 DialogFragment 完成时，它从 Frag A 调用一个方法，将一些视图添加到 Frag A 的布局。调用该方法时，尽管我在 onCreateView 和 onResume 中都尝试这样做，但我的所有对象都没有保持初始化状态。

以下是适用的代码： 执行该行时在最后一个方法中引发异常`wpp.addBlankExercise();`。我 99% 确信这与 TabHost/ViewPager 在 Frag A 上使用生命周期回调的方式有关。我不知道 TabHost/ViewPager 的哪个部分导致了这种情况。

**活动**

```
 static class DummyTabFactory implements TabHost.TabContentFactory {
    private final Context mContext;

    public DummyTabFactory(Context context) {
        mContext = context;
    }

    @Override
    public View createTabContent(String tag) {
        View v = new View(mContext);
        v.setMinimumWidth(0);
        v.setMinimumHeight(0);
        return v;
    }
}

public TabsAdapter(FragmentActivity activity, TabHost tabHost, ViewPager pager) {
    super(activity.getSupportFragmentManager());
    mContext = activity;
    mTabHost = tabHost;
    mViewPager = pager;
    mTabHost.setOnTabChangedListener(this);
    mViewPager.setAdapter(this);
    mViewPager.setOnPageChangeListener(this);
}

public void addTab(TabHost.TabSpec tabSpec, Class<?> clss, Bundle args) {
    tabSpec.setContent(new DummyTabFactory(mContext));
    String tag = tabSpec.getTag();

    TabInfo info = new TabInfo(tag, clss, args);
    mTabs.add(info);
    mTabHost.addTab(tabSpec);
    notifyDataSetChanged();
}

@Override
public int getCount() {
    return mTabs.size();
}

@Override
public Fragment getItem(int position) {
    TabInfo info = mTabs.get(position);
    return Fragment.instantiate(mContext, info.clss.getName(), info.args);
}

@Override
public void onTabChanged(String tabId) {
    int position = mTabHost.getCurrentTab();
    mViewPager.setCurrentItem(position);
}

@Override
public void onPageSelected(int position) {
    TabWidget widget = mTabHost.getTabWidget();
    int oldFocusability = widget.getDescendantFocusability();
    widget.setDescendantFocusability(ViewGroup.FOCUS_BLOCK_DESCENDANTS);
    mTabHost.setCurrentTab(position);
    widget.setDescendantFocusability(oldFocusability);
}

@Override
public void getChoiceIndex(DialogFragment dialog) {
    amount = QuantityDialogFragment.amount;
    /* We keep track of which exercises are cardio exercises and which exercises are strength exercises here. If it is a cardio
    * exercise then the value is true (first choice) if it's not then the value is false (second example). */
    if (result == 0) {
        // Cardio exercise
        wpp.cardioBoolean = true;
    /* Null Pointer thrown here because the global variables that "addBlankExercise()" uses are no longer initialized. */
        wpp.addBlankExercise();
    } else {
        // Strength exercise
    // Null Pointer also thrown here for the same reason.
        wpp.cardioBoolean = false;
        wpp.addBlankExercise();
    }
} 
```

这里是一小部分`addBlankExercise()`。它比这长得多，但它使用这里看到的基本模式：

```
public void addBlankExercise () {
    printLineNumber();
    System.out.println("addBlankExercise() " + getLineNumber());
    for (int i = 0; i < WorkoutPlannerActivity.amount; i++) {
        printLineNumber();
        if (isCardioList.size() == etExerciseTracker) {
        isCardioList.add(cardioBoolean);
        }
        printLineNumber();
    LinearLayout layoutInfo = new LinearLayout(context);
    layoutInfo.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
    layoutInfo.setOrientation(LinearLayout.HORIZONTAL);
    layoutInfo.setBackgroundColor(colorBlack);
    layoutInfo.setPadding(0, 0, 10, 5);

    editTextTitle = new EditText(context);
    editTextTitle.setHint("Sample Exercise");
    editTextTitle.setTextAppearance(context, R.style.style_exercise_title);
    editTextTitle.setHintTextColor(colorRed);
    editTextTitle.setBackgroundColor(colorAndroidTransparent);
    editTextTitle.setLayoutParams(new LinearLayout.LayoutParams(0, LayoutParams.WRAP_CONTENT, 12));
    editTextTitle.setTag(editTextTitle.getKeyListener());
    editTextTitle.setId(etExerciseTracker);
    etExerciseTracker ++; 
```

这是堆栈跟踪：

```
02-08 07:26:46.082: E/AndroidRuntime(6790): FATAL EXCEPTION: main
02-08 07:26:46.082: E/AndroidRuntime(6790): java.lang.NullPointerException
02-08 07:26:46.082: E/AndroidRuntime(6790): at android.view.ViewConfiguration.get(ViewConfiguration.java:318)
02-08 07:26:46.082: E/AndroidRuntime(6790): at android.view.View.<init>(View.java:3234)
02-08 07:26:46.082: E/AndroidRuntime(6790): at android.view.ViewGroup.<init> (ViewGroup.java:420)
02-08 07:26:46.082: E/AndroidRuntime(6790): at android.widget.LinearLayout.<init> (LinearLayout.java:168)
02-08 07:26:46.082: E/AndroidRuntime(6790): at com.nutrifit.Fragments.WorkoutPlannerPopup.addBlankExercise(WorkoutPlannerPopup.java:398)
02-08 07:26:46.082: E/AndroidRuntime(6790): at com.nutrifit1.Activities.WorkoutPlannerActivity.getChoiceIndex(WorkoutPlannerActivity.java:198)
02-08 07:26:46.082: E/AndroidRuntime(6790): at com.nutrifit.Fragments.QuantityDialogFragment$1.onClick(QuantityDialogFragment.java:44) 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T01:48:42.240

Null 指针异常来自 TabsAdapter 类中重写的**getItem**方法。问题是我的 FragmentPagerAdapter 实现没有保留对正在实例化的 Fragment 对象的引用/引用。

**供将来参考：**如果使用 TabHost 和 ViewPager，请添加一种方法来保持对 PagerAdapter 实例化的片段的对象引用，以避免空指针异常。

# matlab - Matlab：在matlab中选择一个概率为'i'的数字'i'

> ID：14766349
> 
> 赞同：1
> 
> 时间：2013-02-08T05:37:03.373
> 
> 标签：matlab, probability

我在matlab中遇到了一个问题。如何在矩阵中选择概率为“i”的数字“i”。我想在一个矩阵中执行此操作，我从每一行中选择一个数字“i”，概率为“i”。

任何帮助表示赞赏

一个样本矩阵（不需要选择零）：

```
 w1= .47;
    w2= .023;
    m1= .06;
    m2= .037;
    x=rand(1,m1)<=m1;
    tolerance= 0.01;

    Transition=[m1 w1 0  w1 0  0   0;
        0  m1 w1 0  0  0   0;
        0  0  m1 w1 0  0   0;
        0  0  0  m2 w2 0   0;
        0  0  0  0  m2 w1  w1;
        0  0  0  0  0  m1  w1
        0  0  0  0  0  0   m1]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:49:10.647

所以让我们从一个提示开始。假设您只有一个数字`0.06`，并且您想要一个向量（= 矩阵中的一行），该数字是分散的，因此有`0.06`可能选择它。一个简单的解决方案是从一个 100 个零的向量开始，`v=zeros(100,1)`然后将数字放在 6 个随机位置`0.06`，即

```
ind=randi(100,1,6);
v(ind)=0.06; 
```

您能想出一种方法将其扩展到每行多个数字吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T06:01:08.987

首先，我们可以计算一个累积概率矩阵，`Tc`为找到第一列超过 0 到 1 之间的随机值的策略做准备。

```
Tc = zeros(size(T));
Tc(:, 1) = T(:, 1);
for k = 2 : size(T, 2)
  Tc(:, k) = Tc(:, k - 1) + T(:, k);
end 
```

现在要从每一行中提取数字，我们首先绘制`p = rand(size(T, 2), 1)`然后找到`p`落入累积概率桶中的列：

```
for k = 1 : size(T, 1)
  col = find(T(k, :) > p(k), 1, 'first');
  if isempty(col)
    fprintf('nothing drawn for row %d\n', k);
  else
    fprintf('row %d, col %d, p = %f\n', k, col, T(k, col));
  end
end 
```

这是有效的，因为顺序无关紧要。例如，对于某些 p = 0.2，某些任意累积分布可能会从 0.65 增加到 0.85。在这个区间内产生一个值的概率`rand`确实是 0.2。如果这是 的最后一个非零条目`T`，`rand`将返回一个概率为 0.15 的值，该值没有绘制任何数字。在另一个示例中，如果 中的所有条目`T`都为零，则累积分布将永远不会超过 可以绘制的`rand`。对于最后一个示例，如果在 0.5 处有两个条目，每个条目，累积分布将超过`rand`在任一列绘制的一半和一半。

# ios - 如何创建通讯录和联系人

> ID：14766351
> 
> 赞同：0
> 
> 时间：2013-02-08T05:37:05.373
> 
> 标签：ios, addressbook

我已经为显示联系人的地址簿和联系人创建了一个代码。它工作正常但突然出现运行时错误。因为我是 ios 新手。我无法找到堆栈溢出中的任何人都可以告诉的错误错误。

```
- (void)viewDidLoad
 {
 [super viewDidLoad];
 self.view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
 self.view.backgroundColor = [UIColor yellowColor];
 self.navigationItem.leftBarButtonItem = [[[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemCancel target:self action:@selector(gotohomepage:)]autorelease];
   ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
[[picker navigationBar] setBarStyle:UIBarStyleBlack];
picker.peoplePickerDelegate = self;
// Display only a person's phone, email, and birthdate
NSArray *displayedItems = [NSArray arrayWithObjects:[NSNumber numberWithInt:kABPersonPhoneProperty],nil];

picker.displayedProperties = displayedItems;
[self presentModalViewController:picker animated:YES];
[picker release];

}
- (IBAction)gotohomepage:(id)sender
{
[self dismissViewControllerAnimated:YES completion:nil];
}
- (BOOL)peoplePickerNavigationController:(ABPeoplePickerNavigationController *)peoplePicker shouldContinueAfterSelectingPerson:(ABRecordRef)person
{

ABAddressBookRef addressBook = ABAddressBookCreate();

int i;
NSString *strName = @"";
NSString* company = @"";
NSString *address = @"";
NSString *suburb = @"";
NSString *postalcode = @"";
NSString *state = @"";
NSString *country = @"";
NSString *mobile = @"";
NSString *phone = @"";
NSString *emailid = @"";

strName = (NSString *)ABRecordCopyCompositeName((ABRecordRef) person);
CFStringRef name = ABRecordCopyCompositeName((ABRecordRef) person);
company  = (NSString *)ABRecordCopyValue((ABRecordRef) person, kABPersonOrganizationProperty);

NSArray*  allPeople = (NSArray *)ABAddressBookCopyPeopleWithName(addressBook,name);
CFRelease(name);

for (i = 0; i < [allPeople count]; i++)
{
    ABRecordRef record = [allPeople objectAtIndex:i];

    ABMutableMultiValueRef multiValue = ABRecordCopyValue(record, kABPersonAddressProperty);
    for(CFIndex i=0; i<ABMultiValueGetCount(multiValue); i++)
    {
        NSString* HomeLabel = (NSString*)ABMultiValueCopyLabelAtIndex(multiValue, i);
        if([HomeLabel isEqualToString:@"_$!<Home>!$_"])
        {
            CFDictionaryRef dict = ABMultiValueCopyValueAtIndex(multiValue, i);
            address = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressStreetKey)];
            suburb = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressCityKey)];
            postalcode = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressZIPKey)];
            state = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressStateKey)];
            country = [NSString stringWithFormat:@"%@", CFDictionaryGetValue(dict, kABPersonAddressCountryKey)];

            CFRelease(dict);
        }
        CFRelease(HomeLabel);
    }
    CFRelease(multiValue);
}
CFRelease(allPeople);

ABMultiValueRef phones =(NSString*)ABRecordCopyValue(person, kABPersonPhoneProperty);
NSString* mobileLabel = nil;
for(CFIndex i = 0; i < ABMultiValueGetCount(phones); i++)
{
    mobileLabel = (NSString*)ABMultiValueCopyLabelAtIndex(phones, i);
    if([mobileLabel isEqualToString:(NSString *)kABPersonPhoneMobileLabel])
    {
        mobile = (NSString*)ABMultiValueCopyValueAtIndex(phones, i);
        NSLog(@"phone   %@",mobile);
    }
    else if ([mobileLabel isEqualToString:(NSString*)kABPersonPhoneIPhoneLabel])
    {
        phone = (NSString*)ABMultiValueCopyValueAtIndex(phones, i);
        NSLog(@"phone   %@",phone);

        CFRelease(mobileLabel);
        break ;
    }
    CFRelease(mobileLabel);

}
CFStringRef value, label;
ABMutableMultiValueRef multi = ABRecordCopyValue(person, kABPersonEmailProperty);
CFIndex count = ABMultiValueGetCount(multi);
if (count == 1)
{
    value = ABMultiValueCopyValueAtIndex(multi, 0);
    emailid = (NSString*) value;
    NSLog(@"self.emailID   %@",emailid);
    CFRelease(value);
}
else
{
    for (CFIndex i = 0; i < count; i++)
    {
        label = ABMultiValueCopyLabelAtIndex(multi, i);
        value = ABMultiValueCopyValueAtIndex(multi, i);

        // check for Work e-mail label
        if (CFStringCompare(label, kABWorkLabel, 0) == 0)
        {
            emailid = (NSString*) value;
            NSLog(@"self.emailID   %@",emailid);
        }
        else if(CFStringCompare(label, kABHomeLabel, 0) == 0)
        {
            emailid = (NSString*) value;
            NSLog(@"self.emailID   %@",emailid);
        }

        CFRelease(label);
        CFRelease(value);
    }
}
CFRelease(multi);    
CFRelease(phones);
CFRelease(addressBook);

[self dismissModalViewControllerAnimated:YES];

return NO;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T06:28:05.377

在 iOS6 上，苹果引入了新的隐私控制，用户可以控制每个应用程序对联系人和日历的访问。因此，在代码方面，您需要添加一些方法来请求权限。在iOS5或之前，我们可以随时调用

```
ABAddressBookRef addressBook = ABAddressBookCreate(); 
```

获取地址簿没有任何问题，但是在iOS6中，如果您没有权限，此调用将返回空指针。这就是为什么我们需要更改获取 ABAddressBookRef 的方法。

此类错误一般出现在未授予访问通讯录权限的情况下，请添加这段代码

```
__block BOOL accessGranted = NO;
if (ABAddressBookRequestAccessWithCompletion != NULL) { // we're on iOS 6
    dispatch_semaphore_t sema = dispatch_semaphore_create(0);
    ABAddressBookRequestAccessWithCompletion(addressBook, ^(bool granted, CFErrorRef error) {
        accessGranted = granted;
        dispatch_semaphore_signal(sema);
    });
    dispatch_semaphore_wait(sema, DISPATCH_TIME_FOREVER);
    dispatch_release(sema);   
}
else { // we're on iOS 5 or older
    accessGranted = YES;
}

if (accessGranted) {
    // Do whatever you want here.
} 
```

礼貌：- [http://programmerjoe.blogspot.in/2012/10/ios6-permissions-contacts.html](http://programmerjoe.blogspot.in/2012/10/ios6-permissions-contacts.html)

如果这不能解决您的问题，请回复我..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T05:56:19.527

错误在于，因为在 IOS6 上，Apple 增加了一些未经所有者许可任何人都无权获取内容的功能。

# java - java迷宫生成器中的算法错误

> ID：14766354
> 
> 赞同：1
> 
> 时间：2013-02-08T05:37:20.377
> 
> 标签：java

我正在尝试编写一个生成二维迷宫的程序。迷宫的主体是一个 2-d int 数组。边界单元格的值为 2。阻塞单元格（墙）的值为 1，空单元格（路径）的值为 0。最初，我将所有单元格的值设置为 1。然后，从在顶行的随机列中，我在迷宫中移动，将当前单元格设置为 0，直到到达底行。

这一切都很好，除了，而不是单行路径，我经常以大范围的 0 结束。因此，我尝试添加到 if 语句以防止它在其周围的单元格已经为零时将单元格标记为零。不幸的是，我的逻辑存在一些缺陷，导致程序在我运行时永远运行而没有打印任何内容。请帮我找出那个缺陷。

我对编程相当陌生，并且将其作为学习练习，因此我也对其他算法建议持开放态度。谢谢

我的代码：

```
package RoboProj;

import java.util.Random;

public class Maze {
public int[][] grid;
final int width, height;

public Maze() {
    width = 20;
    height = 20;
    grid = new int[width][height];

    makeMaze();
}

public void makeMaze() {
    //* empty = 0, wall = 1, border = 2, travelled =3;

    //mark borders
    for (int curr = 0; curr < height; curr++) {
        grid[0][curr] = 2;  //top
        grid[curr][0]=2; //left
        grid[height -1][curr] = 2; //bottom
        grid[curr][width-1] = 2; //right
    }
    //initially mark all cells as walls
    for (int row = 1; row < height-1; row++){
        for (int col = 1; col < width-1; col++){
            grid[row][col]=1;
        }      
    }

    int row = 0;
    Random r = new Random();
    int col =  r.nextInt(width);

    grid[row][col] = 0;

    while (row != height-1){
        int next = r.nextInt(4);
        if (next == 0 && row-1 > 0 && grid[row-1][col-1] == 1 && grid[row-1][col+1] == 1){
            grid[row-1][col]=0;
            row = row-1;
          //  System.out.print(next);
        }
        if (next == 1 && grid[row+1][col-1] == 1 && grid[row+1][col+1] == 1){
            grid[row+1][col]=0;
            row = row+1;
           // System.out.print(next);
        }      
        if (next == 2&& col-1 > 0 && grid[row+1][col-1] == 1 && grid[row-1][col-1] == 1){
            grid[row][col-1]=0;
            col = col-1;
                  //     System.out.print(next);
        } 
        if (next == 3 && col+1 < width-1 && grid[row-1][col+1] == 1 && grid[row+1][col+1] == 1){
            grid[row][col+1]=0;
            col = col+1;
                   //     System.out.print(next);
        } 
    }
}
} 
```

@Anupam Saini：我正在寻找这样的东西，其中“途径”的宽度永远不会超过一个单元格。

```
1 1 1 1 1 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 
1 1 1 1 1 0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 
1 1 1 1 1 0 0 0 0 0 1 1 1 1 1 1 1 1 1 1 
1 1 1 1 1 1 1 1 1 0 1 1 1 1 1 1 1 1 1 1 
1 1 1 1 1 1 0 0 0 0 1 1 1 1 1 1 1 1 1 1 
1 1 1 1 1 1 0 1 1 1 1 1 1 1 1 1 1 1 1 1 
1 1 1 1 1 1 0 0 0 0 0 0 0 0 0 0 1 1 1 1 
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 0 1 1 1 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T14:50:49.470

我对您的代码进行了一些修改，使其更具可读性。我使用 switch case 语句来表示迷宫中的移动，0 表示左转 i 表示右转，2 表示向下移动。这

> isValidTurn()

和

> 移动鼠标（）

是感兴趣的方法。

```
 import java.util.Random;

    public class Maze {
    private final int[][] grid;
    private final int width, height;

    public static void main(String args[]) {
        Maze mz = new Maze(20, 20);
        mz.moveMouse();
    }

    private void generateDefaultMaze() {
        System.out.println(this);
        // * empty = 0, wall = 1, border = 2, travelled =3;

        // mark borders
        for (int curr = 0; curr < height; curr++) {
            grid[0][curr] = 2; // top
            grid[curr][0] = 2; // left
            grid[height - 1][curr] = 2; // bottom
            grid[curr][width - 1] = 2; // right
        }
        // initially mark all cells as walls
        for (int row = 1; row < height - 1; row++) {
            for (int col = 1; col < width - 1; col++) {
                grid[row][col] = 1;
            }
        }

        System.out.println(this);
    }

    public Maze(int width, int height) {
        this.width = width;
        this.height = height;
        grid = new int[width][height];
        this.generateDefaultMaze();
    }

    /**
     * Overridden method to generate a human readable maze state.
     */
    @Override
    public String toString() {
        StringBuffer sb = new StringBuffer(1024);
        for (int i = 0; i < this.width; i++) {
            for (int j = 0; j < this.height; j++) {
                sb.append(this.grid[i][j]).append(",");
            }
            sb.append("\n");
        }
        sb.append("\n");
        sb.append("**************");
        sb.append("\n");
        return sb.toString();
    }

    /**
     * Row pointer can either move left or right and it's value should be
     * between 0 and width. In case of 0 value at this grid[row][col] do not
     * move the pointer.
     * 
     * @param row The row pointer value.
     * @param col The column pointer value.
     * @return
     */
    private boolean isValidTurn(int row, int col) {
        if (row >= 0 && row < width && !(this.grid[col][row] == 0)) {
            return true;
        }
        return false;
    }

    public void moveMouse() {
        Random r = new Random();
        int row = r.nextInt(width);
        int col = 0;

        grid[col][row] = 0;
        // System.out.println(this);
        while (col < (this.height - 1)) {
            // Assuming the mouse moves in only 3 directions left right or down
            // in the maze. 0 indicates left turn 1 indicates right turn and
            // 2 indicates down movement in the maze.
            int nextDir = r.nextInt(3);
            switch (nextDir) {
            case 0: // left turn
                if (this.isValidTurn((row - 1), col)) {
                    --row;
                    this.grid[col][row] = 0;
                }
                break;
            case 1: // right turn
                if (this.isValidTurn((row + 1), col)) {
                    ++row;
                    this.grid[col][row] = 0;
                }
                break;
            case 2: // down movement
                ++col;
                this.grid[col][row] = 0;
                break;
            }
            System.out.println("turn : " + nextDir);
            // System.out.println(this);
        }
        System.out.println(this);
    }
 } 
```

# drupal - drupal 6 /user/permissions 复选框页面核心模块

> ID：14766357
> 
> 赞同：2
> 
> 时间：2013-02-08T05:37:23.467
> 
> 标签：drupal, drupal-6, drupal-modules

有谁知道我在哪里可以找到在drupal中制作用户/权限复选框页面的代码？我想看看如何为我正在构建的自定义模块制作类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T10:28:01.247

您正在寻找的功能是`theme_checkbox($element)`并且可以在`root/includes/form.inc`. 如果您想知道某个 HTML 元素由什么函数/模板负责，那么[**主题开发人员**](http://drupal.org/project/devel_themer)就是您的朋友。

启用模块，设置权限，您会看到一个小复选框*Themer info*。然后只需指向您感兴趣的 HTML 部分并查看正在渲染的主题函数/模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T07:12:45.420

我认为在默认模块文件夹中，user.admin.inc 文件中有用户文件夹，其中包含权限功能的代码是 user_admin_perm(); 看到这个代码

# android - sencha Ext.List 组件中的单击事件

> ID：14766361
> 
> 赞同：0
> 
> 时间：2013-02-08T05:37:43.317
> 
> 标签：android, extjs, sencha-touch, sencha-touch-2

我使用 sencha touch 2 创建了列表。

```
var aroundList = Ext.create('Ext.List', {
    itemCls : 'my-dataview-item',
    id : 'aroundMeList',
    itemTpl : '<div><img style="padding:1px; border-style:solid; border-width:1px; border-color:{trustColor}" src="' + localStorage.httpServerPrefix + '{imageURI}"/><span id="name">{fullname}</span><span id="time">{time}</span><p id="msg">{text}<span id="count">&nbsp;{replyCount}&nbsp;</span></p><p id="dist">&nbsp;< '+localStorage.radius+''+localStorage.unit+' '+'&nbsp;</p></div>',
    store : aroundStore,
    listeners : {
        select : {
            fn : this.onMessageClickedInAround,
            scope : this
        }
    }
}); 
```

我得到这样的输出（不完全是，但是，像这样）

![在此处输入图像描述](../Images/ca3f6f10d8c35f1d520d00ff50c61fbf.png)

当用户单击列表中的第一行或第一项时，我正在调用 onMessageClickedInAround 方法（此方法用于显示来自该用户的消息），您可以看到上面的代码。

**现在我有一个要求，当用户单击列表中的任何图片时，我需要显示相应的个人资料页面（即一个用户可以通过单击列表中的图像查看其他人的个人资料）**，有什么办法可以做这 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T08:54:06.657

您应该为此使用事件委托

*更新*

```
var aroundList = Ext.create('Ext.List', {
    // rest of your cfg
    listeners : {
        // other listeners
        tap: {
            fn: yourHandler,
            element: 'element',
            delegate: 'img'
        }
    }
}); 
```

如前所述，以下内容已过时

```
var aroundList = Ext.create('Ext.List', {
    // rest of your cfg
    listeners : {
        // other listeners
        el: {
            tap: yourHandler,
            delegate: 'img'
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T09:17:20.163

如果您的列表由数据源填充，则 sencha touch 会将相应的记录传递给您的 itemTap 侦听器。您可以按照以下方式执行此操作。

```
 listeners : {
        itemtap: function (list, index, item, record) {
            // Show next view based on current record
        }
    } 
```

如果您只想在图像点击上执行此操作，则可以检查该侦听器中的事件。

```
 listeners : {
        itemtap: function (list, index, item, record, senchaEvent) {
            if (senchaEvent.event.target.nodeName === 'img') {
                // Show next view
            }
        }
    } 
```

您也可以上课`<img>`并检查。

# c++ - 如何在 .pri 文件的内容前添加路径？

> ID：14766363
> 
> 赞同：1
> 
> 时间：2013-02-08T05:38:01.293
> 
> 标签：c++, qt, build, qmake

我有以下目录结构，我想使用 Qt .pri 文件简化事情。

```
Project1/
    project1.pro
    main.cpp
    Algorithms/
        algorithm1.h
        algorithm1.cpp
        ...
        // add an algorithms.pri file here
    Utilities/           
        utiliy1.h
        utiliy1.cpp
        ...
        // add an utilities.pri file here
    Gui/
        gui1.h
        gui1.cpp
        ...
        // add a gui.pri file here

AlgorithmsUnitTest/
     algorithms_unit_test.pro
     main.cpp

UtilitiesUnitTest/
     utilities_unit_test.pro
     main.cpp 
```

我要解决的问题之一是，当我从一个或多个文件夹中添加或删除源文件时`Algorithms`，`Utilities`我`Gui`必须从所有其他`.pro`文件中删除它。

我想`.pri`为每个文件夹创建一个文件，其中包含该文件夹中的源文件和头文件。这些文件将包含在所有其他项目中。然后，如果我添加/删除源文件或头文件，我只会从相应的`.pri`文件中删除它。

这种方法的问题在于，在`.pri`文件中包含`.pro`文件只是简单的复制粘贴。也就是说，如果`algorithms_unit_test.pro`包含`algorithms.pri`文件，qmake 构建系统将在不存在的`AlgorithmsUnitTest/Algorithms`文件夹中查找文件。

`.pri`解决方案是在文件的内容前面加上

```
../Project1/ 
```

但我不知道该怎么做。请问你能教我怎么做或建议一些其他的方式来组织我的项目吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T09:46:24.943

`PWD`您可以在您的 .pri 文件中使用 qmake 变量。

**算法.pri**

```
SOURCES      += $$PWD/algorithm1.cpp
HEADERS      += $$PWD/algorithm1.h 
```

**实用程序.pri**

```
SOURCES      += $$PWD/utiliy1.cpp
HEADERS      += $$PWD/utiliy1.h 
```

...

[http://doc.qt.digia.com/qt/qmake-variable-reference.html](http://doc.qt.digia.com/qt/qmake-variable-reference.html)

# iframe - 当 n IE 时，从 iframe 内的页面加载的 HTML 表单元素无法将目标设置为页面中的另一个 iframe

> ID：14766370
> 
> 赞同：0
> 
> 时间：2013-02-08T05:38:43.613
> 
> 标签：iframe

我在 iframe 内加载了一个页面，该页面上是一个带有两个文件输入标签的表单元素，其目标设置为与表单位于同一页面内的 iframe。提交表单后，它将文件发送到 JSP 页面，在处理文件上传返回后，该页面会写出一些 javascript，通知用户上传已完成并执行一些其他处理。在 FF 和 Chrome 上，这个设置工作得很好，但由于某种原因，在 IE 中，而不是在 iframe 中加载表单操作，会弹出一个新窗口。

我将表单、输入和 iframe 插入到通过以下 javascript 加载到第一个 iframe 的页面的 DOM 中：

```
var containerDiv = document.createElement('div');
containerDiv.setAttribute("id", "containerDiv");
containerDiv.style.position = "absolute";
containerDiv.style.top = "360px";
containerDiv.style.left = "20px";
containerDiv.style.width = "300px"

var iFrame = document.createElement('iframe');
iFrame.setAttribute("id", "target-iframe");
iFrame.name = "target-iframe";
iFrame.style.visibility = "hidden";
iFrame.style.height = "50px";

var zipInput = document.createElement('input');
zipInput.setAttribute("type", "file");
zipInput.setAttribute("id", "zipInput");
zipInput.setAttribute("name", "test");
zipInput.setAttribute("title", "Test");
zipInput.style.marginBottom = "10px";

var pdfInput = document.createElement('input');
pdfInput.setAttribute("type", "file");
pdfInput.setAttribute("id", "pdfInput");
pdfInput.setAttribute("name", "test");
pdfInput.setAttribute("title", "Test");

var form = document.createElement('form');
form.setAttribute("id", "uploadForm");
form.setAttribute("enctype", "multipart/form-data");
form.setAttribute("action", "http://servername:8090/xmlserver/jsp/Upload.jsp?BatchID=" + CSForm.getField("BatchID").getValue());
form.setAttribute("method", "POST");

document.getElementById("DFS__pagediv1").appendChild(containerDiv);
document.getElementById("containerDiv").appendChild(form);
document.getElementById("containerDiv").appendChild(iFrame);
document.getElementById("uploadForm").appendChild(zipInput);
document.getElementById("uploadForm").appendChild(pdfInput); 
```

我已经根据下面的代码将表单目标设置为 iframe 名称，但它仍然会为 IE 弹出一个新窗口。

```
document.getElementById('uploadForm').target = document.getElementById("target-iframe").name;
alert(document.getElementById('uploadForm').target);
document.getElementById('target-iframe').style.visibility="Visible";
document.getElementById("uploadForm").submit(); 
```

我希望这是我所缺少的基本内容，我非常感谢您可能拥有的任何帮助或解决方法。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:45:24.017

我使用以下代码的变体来解决此问题。显然，在 IE 中命名 iFrame 实际上并没有命名 iFrame。

```
var iFrameID  = 'ID1';
var myIFrame = document.createElement('iframe');

myIFrame.setAttribute('src', 'about:blank');
myIFrame.setAttribute('id', iFrameID);
myIFrame.setAttribute('NAME', iFrameID);
myIFrame.style.display = 'none';
document.body.appendChild(myIFrame);
if((onReadyFunction) && (typeof(onReadyFunction) == 'function'))  captureEvent('load', function(){ var iFrame = document.getElementById(iFrameID); var doc = (iFrame.contentDocument)?(iFrame.contentDocument):((iFrame.contentWindow)?(iFrame.contentWindow.document):(self.frames[iFrameID].document)); if (doc.location.href == 'about:blank') { return; } else { onReadyFunction(doc.body.innerHTML); } }, myIFrame);
[B]if(self.frames[iFrameID].name != iFrameID) { /* *** IMPORTANT: This is a BUG FIX for Internet Explorer *** */ self.frames[iFrameID].name = iFrameID; }[/B] 
```

# canvas - 画布 3d 绘制一个点

> ID：14766371
> 
> 赞同：1
> 
> 时间：2013-02-08T05:38:45.253
> 
> 标签：canvas, 3d, html5-canvas

我刚刚在[How To Create 3D Graphics Using Canvas (Windows)](http://msdn.microsoft.com/en-us/library/ie/hh535759%28v=vs.85%29.aspx)上看到了 canvas 的链接。

我如何使用它来绘制一个简单的点，例如`(x,y,z)=(3,2,5)`？任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T16:45:02.667

它带您浏览的示例专门用于绘制和查看表单的 3D 函数`z=f(x,y)`

首先简要解释代码中发生的事情，然后考虑绘制各个点。

如果您转到示例页面[canvas3dRotation.html](http://samples.msdn.microsoft.com/Workshop/samples/canvas/3Dcanvas/canvas3dRotation.html)并查看源代码，您会发现以下内容：

```
Surface.prototype.equation = function(x, y)
      /*
        Given the point (x, y), returns the associated z-coordinate based on the provided surface equation, of the form z = f(x, y).
      */
      {
        var d = Math.sqrt(x*x + y*y); // The distance d of the xy-point from the z-axis.

        return 4*(Math.sin(d) / d); // Return the z-coordinate for the point (x, y, z). 
      } 
```

这建立了给定的方程。

以下代码存储了绘制方程所需的所有点。这些存储在`surface.points`数组中。

```
Surface.prototype.generate = function()
      /*
        Creates a list of (x, y, z) points (in 3 x 1 vector format) representing the surface.
      */
      {
        var i = 0;

        for (var x = constants.xMin; x <= constants.xMax; x += constants.xDelta)
        {
          for (var y = constants.yMin; y <= constants.yMax; y += constants.yDelta)
          {
            this.points[i] = point(x, y, this.equation(x, y)); // Store a surface point (in vector format) into the list of surface points.              
            ++i;
          }
        }
      } 
```

使用这种方法显然比写出要单独绘制的所有点要快得多，而且没有 3D 示例仅基于一个点。

但是，假设您想绘制单个点，那么您将删除 357 surface.generate() 处的线并将其替换为代码以绘制所有单个点。这意味着新代码

所以首先在代码中添加一个新方法

```
Surface.prototype.plot = function(x, y, z)
      /*
        add the point (x, y, z)  (in 3 x 1 vector format) to the surface.
      */
      {
            this.points.push(point(x, y, z)); // Store a surface point
      } 
```

然后代替`surface.generate()`，使用`surface.plot(3,2,5)`。

当然，他们的示例有 8100 个点，因此可以绘制更多点，或者找到一种方法来生成您想要绘制的所有点。

希望这有助于您入门。

# powershell - Powershell - 格式化锯齿状数组输出

> ID：14766374
> 
> 赞同：2
> 
> 时间：2013-02-08T05:39:12.400
> 
> 标签：powershell

所以我认为这对powershell来说是一件简单的事情，但我似乎无法弄清楚如何将我的数组输出为列。下面是我的脚本。

```
$Table = @()

$Employees = Get-ADUser -SearchBase "OU=Emplyoees,DC=mydomain,DC=com" -Filter * -Properties * | ?{$_.telephoneNumber -ne $Null}

ForEach($User in $Employees){$Table += @($User.Name,$user.telephoneNumber)}

($Table) 
```

输出类似于：

User1
PhoneNumber1
User2
PhoneNumber2

我希望它看起来像：

姓名 电话号码
用户 1 电话号码 1
用户 2 电话号码 2

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T06:03:48.000

尝试这个：

```
ForEach($User in $Employees){$Table += ,@($User.Name,$user.telephoneNumber)} #NOTE THE COMMA HERE
$table | % { $_ -join '`t' } # the `t is a tab, but you can use whatever you want 
```

评论后编辑：

如果只需要布局，您可以尝试：

```
 $table | % {  "{0,-20}{1,20}" -f $_[0],$_[1]  } #the 2nd value in {} is the relative cursor position the sign left o right alignment 
```

但为什么不只使用`$Employees`变量来显示结果：

```
$Employees = Get-ADUser -SearchBase "OU=Emplyoees,DC=mydomain,DC=com" -Filter * -Properties * | 
?{$_.telephoneNumber -ne $Null} | select name, telephonenumber | ft 
```

# php - xmlhttp.open(url) 和使用 AJAX 调用 php 函数不起作用？

> ID：14766375
> 
> 赞同：1
> 
> 时间：2013-02-08T05:39:21.980
> 
> 标签：php, javascript, ajax

只是 php 的初学者，我想使用 AJAX 调用 php 方法。我尝试了一切，但不知道错误是什么。没有从对象 xmlhttp 得到任何响应。

这是我的java脚本代码：

```
function loadData(){
    var mID=ddItems;
    var method=2;
    var xmlhttp;
    if (window.XMLHttpRequest) {    
        xmlhttp = new XMLHttpRequest();
    }
    if (xmlhttp.readyState == 4 || xmlhttp.readyState == 0) {
        xmlhttp.open("GET", "../code/GetItemsInDD.class.php?id=" + mID + "&method=" + method, true); **// is this statement correct**

    xmlhttp.onreadystatechange = function(){
        if (xmlhttp.readyState==4 && xmlhttp.status==200) **//conditin is false,**
        {
            document.getElementById("ddItems").innerHTML=xmlhttp.responseText; 
        }
     }
    xmlhttp.send();
    }
} 
```

我的 js 文件位于“projectname/javascript/script.js”中，而我的 php 文件位于“projectname/code/GetItemsInDD.class.php”目录中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T05:42:28.327

为什么不使用 jQuery 来发出 AJAX 请求？就这么简单，在你的页面中包含 jQuery

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script> 
```

和JS代码，

```
$.ajax({
  type: 'GET',
  url: '../code/GetItemsInDD.class.php?id=" + mID + "&method=" + method',
  success: function (data) {
     document.getElementById("ddItems").innerHTML = data; 
  }
}); 
```

这样，您就不需要检查 readyState 和 status 的东西

jQuery 遵循面向对象的方法来声明`XMLHttpRequest`对象，因此您不必担心创建多个对象来发出多个 AJAX 请求。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T11:15:49.240

```
 function loadData(){
           var xmlhttp;
           var mID=ddItems;
           var method=2;
              if (window.XMLHttpRequest)
              {// code for IE7+, Firefox, Chrome, Opera, Safari
               xmlhttp=new XMLHttpRequest();
              }
             else
             {// code for IE6, IE5
             xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
              }
             xmlhttp.onreadystatechange=function()
               {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
              {
            document.getElementById("ddItems").innerHTML=xmlhttp.responseText;
              }
           }
           xmlhttp.open("GET", "../code/GetItemsInDD.class.php?id=" + mID + "&method=" + method, true);
          xmlhttp.send();
          } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T06:34:08.323

我对您的代码进行了 2 处所需的更改，现在尝试运行它。确保 URL 正确。

```
function loadData()
{
var mID=ddItems;

var method=2;

var xmlhttp;

if (window.XMLHttpRequest) {    
    xmlhttp = new XMLHttpRequest();
}

else    //For some versions of IE
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");

xmlhttp.onreadystatechange = function()
{
    if (xmlhttp.readyState==4 && xmlhttp.status==200) **//conditin is false,**
    {
        document.getElementById("ddItems").innerHTML=xmlhttp.responseText; 
    }
 }

xmlhttp.open("GET", "../code/GetItemsInDD.class.php?id=" + mID + "&method=" + method, true); **// is this statement correct**
xmlhttp.send();
} 
```

}

更改 1：您可能在使用 ActiveXObject 的旧版本 IE 中运行代码。

更改 2：如果 readyState 更改（正如您在 IF 块中编写的那样），则不应调用 open() 方法，仅在 open() 方法初始化 ajax 调用然后通过 send( ） 方法。

# c# - 为什么 C# 和 Android 中的 Base64 字符串不同

> ID：14766376
> 
> 赞同：0
> 
> 时间：2013-02-08T05:39:30.683
> 
> 标签：c#, android

我已将一张图像转换为 base64 字符串，并且输出与在线网站相同。

但是当我从 Android 转换它时，相同的图像是不同的。

你能解释一下为什么 C# 和 Android base64 字符串对于同一个图像是不同的。

C#.NET 代码

```
string cImagePath = @"G:\bg-listing.png";
byte[] imagebyte = StreamFile(cImagePath);
String result = System.Convert.ToBase64String(imagebyte);
System.IO.StreamWriter outFile;
try
{
    outFile = new System.IO.StreamWriter(Application.StartupPath + "//image2base641.txt",
                                     false,
                                     System.Text.Encoding.Default);
                outFile.Write(result.ToString());
                outFile.Close();
            }
            catch (System.Exception exp)
            {
                // Error creating stream or writing to it.
                System.Console.WriteLine("{0}", exp.Message);
            } 
```

安卓代码

```
Bitmap bitmapOrg = BitmapFactory.decodeResource(getResources(),  R.drawable.image);
ByteArrayOutputStream bao = new ByteArrayOutputStream();
bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 100, bao);
byte [] ba = bao.toByteArray();
 String ba1=Base64.encodeToString(ba,Base64.DEFAULT); 
```

两个图像 base64 是不同的。

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T05:45:42.600

base 64 有很多变体，涉及行长、填充、校验和等。[关于 Base64 的维基百科文章](http://en.wikipedia.org/wiki/Base64)有一个很好的变体表。

我的猜测是 C# 和 Android 只是使用不同的变体。

**编辑**根据您更新的帖子，还有其他几种可能性：

*   Android 可能会在将 .jpg 文件打包为资源时对其进行修改（然而，虽然资源打包器在压缩方面非常激进，但可能并非如此）；
*   Android 可能会以不同于原始图像的方式重新编码图像（两个 .jpg 文件可以表示相同的像素值，而不是逐字节相同）

更好的测试是跳过（在 Android 代码中）从资源到 a`Bitmap`并返回到 .jpg 编码的转换。只需将资源作为流打开，直接将其读入字节数组，然后以 base 64 编码。

# xml - 如何使用字段之间的关系创建 XSD Schema

> ID：14766380
> 
> 赞同：1
> 
> 时间：2013-02-08T05:39:46.530
> 
> 标签：xml, xsd, schema, keyref

我附上了我的 xsd 的截断版本

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<xs:complexType name="School_ip_details">
    <xs:sequence>
        <xs:element type="xs:string" name="Tarun_Name" />
        <xs:element type="xs:string" name="Tarun_IP" />
        <xs:element type="xs:string" name="Tarun_Subnet" />

    </xs:sequence>
</xs:complexType>

<xs:element name="CLASSESS">
    <xs:complexType>
        <xs:sequence>
            <xs:element name="Taruns">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="Tarun" maxOccurs="127">
                            <xs:complexType>
                                <xs:sequence>
                                    <xs:element type="xs:string" name="Tarun_Name" />
                                    <xs:element type="xs:string" name="Tarun_Prefix" />
                                    <xs:element type="xs:string" name="Tarun_Subnet" />
                                </xs:sequence>
                            </xs:complexType>
                        </xs:element>
                    </xs:sequence>
                </xs:complexType>
            </xs:element>

            <xs:element name="Schools">
                <xs:complexType>
                    <xs:sequence>
                        <xs:element name="School">
                            <xs:complexType>
                                <xs:sequence>
                                    <xs:element name="School_IPdetails" type="School_ip_details" />
                                </xs:sequence>
                            </xs:complexType>
                        </xs:element>
                    </xs:sequence>
                </xs:complexType>

                <xs:keyref name="TarunRef" refer="TarunKey">
                    <xs:selector xpath="." />
                    <xs:field xpath="./School/School_IPdetails/Tarun_Name" />

                </xs:keyref>
            </xs:element>

        </xs:sequence>
    </xs:complexType>
    <xs:key name="TarunKey">
        <xs:selector xpath="./Taruns/Tarun/Tarun_Name" />

        <xs:field xpath="." />
    </xs:key>

    <xs:key name="TarunIPKey">
        <xs:selector xpath="./Taruns/Tarun/Tarun_Prefix" />
        <xs:field xpath="." />
    </xs:key>

</xs:element> 
```

这里我想实现以下场景。当我提到任何值`CLASSES/Taruns/Tarun/Tarun_Name`时，该特定`CLASSES/Scools/School/School_ip_details/Tarun_Name`值的值应反映在`CLASSES/Taruns/Tarun/Tarun_Prefix``Tarun_Name``CLASSES/Scools/School/School_ip_details/Tarun_IP`

请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T20:56:58.103

在您的 XSD 参考指南中查找身份约束（唯一、密钥和 keyref）。（您没有 XSD 参考指南吗？获取一份。）

# quickblox - 使用 QuickBlox API 在网站上进行实时聊天

> ID：14766386
> 
> 赞同：1
> 
> 时间：2013-02-08T05:40:47.840
> 
> 标签：quickblox

我们想使用 QuickBlox Chaa API 开发网站实时聊天小部件。

1）在这样的小部件中，用户无需登录即可开始聊天。我们可以创建一个可用于所有聊天会话的通用用户吗？2）第二个要求是存储聊天会话，有没有办法存储聊天会话有办法获取聊天会话文本。我们能上钩吗？

请告诉我们是否可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T23:05:13.490

1) 您必须在[quickblox.com](http://quickblox.com/)上注册。之后，为您的应用程序创建项目。获取令牌和密钥以访问您的应用程序。您将有一个主要用户来使用 QB 及其模块。

2）您不必要求用户注册。只是给他们的名字聊天。如果您想使用小部件[ChattAR](https://github.com/QuickBlox/ChattAR-ios)的源代码，只需删除注册码即可。允许用户输入他输入的用户名。

3) 将消息历史记录保存在[“自定义对象”](http://quickblox.com/developers/Custom_Objects)模块中。该模块是一个灵活的工具，您可以创建任意数量的数据字段，并为您需要的每种数据类型选择一个。[此外，您可以在“内容”](http://quickblox.com/modules/content/)模块中保存任何文件（文本等）以获取聊天会话文本。

# c# - 如何调整 DatagramSocket.MessageReceived 以用于 async/await？

> ID：14766394
> 
> 赞同：5
> 
> 时间：2013-02-08T05:41:20.817
> 
> 标签：c#, network-programming, windows-runtime, task-parallel-library, async-await

我想用 TPL 包装以下数据报套接字操作以清理 API，以便它可以很好地与`async`和一起使用`await`，就像`StreamSocket`类一样。

```
public static async Task<bool> TestAsync(HostName hostName, string serviceName, byte[] data)
{
    var tcs = new TaskCompletionSource<bool>();
    var socket = new DatagramSocket();
    socket.MessageReceived += (sender, e) =>
    {
        var status = false; // Status value somehow derived from e etc.
        tcs.SetResult(status);
    };
    await socket.ConnectAsync(hostName, serviceName);
    var stream = await socket.GetOutputStreamAsync();
    var writer = new DataWriter(stream);
    writer.WriteBytes(data);
    await writer.StoreAsync();
    return tcs.Task;
} 
```

症结在于`MessageReceived`将`DatagramSocket`类变成事件异步模式和新`async`模式的奇怪混杂的事件。无论如何，`TaskCompletionSource<T>`允许我调整处理程序以符合后者，所以这并不太可怕。

除非端点从不返回任何数据，否则这似乎工作得很好。与处理程序关联的任务`MessageReceived`永远不会完成，因此返回的任务`TestAsync`永远不会完成。

很好地包装此操作以合并超时和取消的正确方法是什么？我想扩展这个函数来`CancellationToken`为后者提供一个参数，但是我该怎么做呢？我想出的唯一一件事是创建一个额外的“监控”任务`Task.Delay`，我使用它传递一个超时值和取消令牌以支持这两种行为，如下所示：

```
public static async Task<bool> CancellableTimeoutableTestAsync(HostName hostName, string serviceName, byte[] data, CancellationToken userToken, int timeout)
{
    var tcs = new TaskCompletionSource<bool>();
    var socket = new DatagramSocket();
    socket.MessageReceived += (sender, e) =>
    {
        var status = false; // Status value somehow derived from e etc.
        tcs.SetResult(status);
    };
    await socket.ConnectAsync(hostName, serviceName);
    var stream = await socket.GetOutputStreamAsync();
    var writer = new DataWriter(stream);
    writer.WriteBytes(data);
    await writer.StoreAsync();

    var delayTask = Task.Delay(timeout, userToken);
    var t1 = delayTask.ContinueWith(t => { /* Do something to tcs to indicate timeout */ }, TaskContinuationOptions.OnlyOnRanToCompletion);
    var t2 = delayTask.ContinueWith(t => { tcs.SetCanceled(); }, TaskContinuationOptions.OnlyOnCanceled);

    return tcs.Task;
} 
```

然而，这有各种各样的问题，包括延迟任务和`MessageReceived`处理程序之间的潜在竞争条件。我从来没有能够让这种方法可靠地工作，而且它看起来非常复杂，而且线程池的使用效率低下。这很繁琐，容易出错，而且让我头疼。

旁注：我是唯一对`DatagramSocket`API 感到困惑的人吗？它不仅看起来是`IAsyncAction`WinRT 模型和 TPL 与一些棘手的 EAP 的丑陋组合，而且我对旨在表示基本无连接协议（例如包含`ConnectAsync`在其中命名的方法的 UDP）的 API 不太满意。这对我来说似乎是一个矛盾。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T12:54:21.710

首先，我认为 UDP 的接口`DatagramSocket`之所以有意义，正是因为 UDP 的性质。如果您有数据报流，则事件是表示它的适当方式。WinRT `IAsyncAction`（或 .Net `Task`）只能表示拉模型，您可以在其中显式请求每条数据（例如，可能有一个方法`ReadNextDatagramAsync()`）。这对 TCP 来说是有意义的，因为它有流量控制，所以如果你慢慢地读取数据，发送者也会慢慢地发送它们。但对于 UDP，推送模型（由 WinRT 和 .Net 中的事件表示）更有意义。

我同意这个名字`Connect`没有 100% 的意义，但我认为它*主要*是有道理的，尤其是让它更符合`StreamSocket`. 而且您确实需要这样的方法，以便系统可以解析域名并将端口分配给您的套接字。

对于您的方法，我同意@usr 的观点，即您应该创建一个单独的方法来接收数据报。而且，如果您想将一个异步模型转换为另一个，同时添加原始模型本身不支持的功能，那将会很麻烦，我认为您对此无能为力。

如果您正确实施它，它也不会效率低下：您应该确保在`Task`完成后，`MessageReceived`取消订阅事件，处理关联的计时器`Delay()`（您可以通过取消传递给的令牌来实现`Delay()`）和委托用传入的`CancellationToken`注册是未注册的（我认为你应该[`Register()`](http://msdn.microsoft.com/en-us/library/dd321635.aspx)直接使用而不是（ab）使用`Delay()`）。

关于比赛条件，您当然必须考虑它们。但是这里有一个相对简单的方法来处理它：使用(eg )的`Try`方法。`TaskCompletionSource`[`TrySetResult()`](http://msdn.microsoft.com/en-us/library/dd449176.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T11:32:50.477

超时：启动一个计时器并用于`tcs.TrySetCancelled()`完成任务。对于取消`cancellationToken.Register`，用于注册您也设置为取消的回调。小心处理计时器。

我建议您将计时器逻辑移动到可重用的辅助方法中。这可以防止代码看起来像意大利面条，其中混杂了许多不相关的东西。

# python - 带有套接字和 sys.stdin 的 Python 选择

> ID：14766398
> 
> 赞同：7
> 
> 时间：2013-02-08T05:41:31.200
> 
> 标签：python, sockets, select, client

我是 Python 编程新手，我正在尝试创建服务器和客户端。我仍然希望能够从键盘输入一些东西，这样我就可以通过输入“退出”从服务器关闭服务器。我从各个站点获取了示例代码，以了解我在套接字编程和此代码方面所处的位置。

但是，每当我运行代码时，都会收到以下错误消息：

```
The host name of this machine is 127.0.0.1
The IP address of the host is 127.0.0.1
Server now awaiting client connection on port 2836
im right before the select
Traceback (most recent call last):
  File "/root/Server_2.py", line 42, in <module>
    inputready, outputready, exceptready = select.select(input, [], [])
TypeError: argument must be an int, or have a fileno() method.
>>> 
```

我正在阅读以通过这个（在 Windows 中）是删除 sys.stdin 因为 Windows 只接受套接字。我正在尝试在 Linux 中编写此代码。我已经尝试了各种各样的方法来让它发挥作用，但我已经没有资源和想法可以尝试了。下面是服务器代码：

```
import socket                       #import socket module
import select
import sys

host = "127.0.0.1"
print ("The host name of this machine is " + host)
hostIP = socket.gethostbyname(host)    # get host IP address
print ("The IP address of the host is %s" % (hostIP)) 
port = 2836                        # Reserve the port for the server
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)
s.bind((hostIP, port))                # This server to a port

s.listen(4)                         # Now wait for client connection

print("Server now awaiting client connection on port %s" % (port))

#WINDOWS ONLY ACCEPTS SOCKETS FOR SELECT(), no standard in
input = [s, sys.stdin]

running = 1

while running:

    print("im right before the select")
    # when there's something in input, then we move forward
    # ignore what's in output and except because there's nothing
    # when it comes to sockets
    inputready, outputready, exceptready = select.select(input, [], [])

    print("i'm here na")
    # check who made a response
    for x in inputready:

        if x == s:
            print(s)
            #handle the server socket
            client, address = s.accept()
            print("connection comming in")
            input.append(client)

        elif x == sys.stdin:
            # handle standard input
            stuff = sys.stdin.readline()
            if stuff == "exit":
                running = 0
            else:
                print("you typed %s" % (stuff))

        else:
            #handle all other sockets
            data = x.recv(1024)
            print("i received " + data)
            if data:
                if data == "exit":
                    x.close()
                    input.remove(x)
                    running = 0
                else:
                    x.send(data)
                    print("I am sending %s" % (data))
            else:
                x.close()
                input.remove(x)

s.close() 
```

任何帮助或想法将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-12-04T15:53:06.453

好吧，我知道你 7 年前问过这个问题，但我也有类似的问题，所以我想我会回答你。我仍在工作并修复具有相同功能的程序，但我知道的一件事是作为参数的列表`select.select()`需要是文件描述符（整数）。

所以如果你有这个块

```
input = [s, sys.stdin]

running = 1

while running:

    print("im right before the select")
    # when there's something in input, then we move forward
    # ignore what's in output and except because there's nothing
    # when it comes to sockets
    inputready, outputready, exceptready = select.select(input, [], []) 
```

我要说的第一件事是将您的阅读列表更改为 not `input`。您可能会与 input() 函数发生冲突，这可能会导致令人困惑的错误。之后，您希望这些值是文件描述符。所以第一行应该是

```
inputSockets = [s.fileno(), sys.stdin.fileno()] 
```

然后在检查哪个套接字准备就绪时，你会想要这样做

```
for x in inputready:
    if x == s.fileno():
        # Read from your s socket
    elif x == sys.stdin().fileno():
        # Read from stdin
    else:
        '''
        Here you would want to read from any other sockets you have.
        The only problem is your inputSockets array has ints, not socket
        objects. What I did was store an array of actual socket objects
        alongside the array of file descriptors. Then I looped through the
        list of sockets and found which socket's .fileno() matched x. You could
        probably be clever and use a dict() with the filenos as key and socket as
        value
        ''' 
```

# php - 模板中的智能评估

> ID：14766400
> 
> 赞同：0
> 
> 时间：2013-02-08T05:41:49.937
> 
> 标签：php, smarty, eval

我制作了从数组创建表单的模板。它动态选择名称并从上次获取的值中选择。但我不能像普通的 php 那样写 eval

```
eval('$value = "\$smarty.get.'.$feature.name.'";'); 
```

在我的模板中

```
<div id="BMTProductsSearch" class="block">
<h4>Search</h4>
<form id="FBMTProductsSearch" action="{$link->getPageLink('search.php', true)}" method="get">
<ul>
{foreach from=$features item=feature}
<li>
<label for="{$feature.name}">{$feature.name}</label>
<select name="{$feature.name}">
<option value="">-- {$feature.name} --</option>
{foreach from=$feature.options item=option}
{eval var='$value = "\$smarty.get.'.$feature.name.'";' assign="value"} 
<option value="'{$option.value}'">{$option.value} {$value}</option>
{/foreach}
</select>
</li>
{/foreach}
<li>
<label for="search_query_block">{l s='product name' mod='BMTProductsSearch'}</label>
<input class="search_query" type="text" id="search_query_block" name="search_query" value="{if isset($smarty.get.search_query)}{$smarty.get.search_query|htmlentities:$ENT_QUOTES:'utf-8'|stripslashes}{/if}">
</li>
<li>
<input type="hidden" name="orderby" value="position">
<input type="hidden" name="orderway" value="desc">
<input type="submit" id="search_button" class="button_mini" value="{l s='go' mod='BMTProductsSearch'}">
</li>
</ul>
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-31T13:47:04.270

在这种情况下，您应该简单地使用 assign 而不是 eval 这种方式：

```
{assign var=value value= $smarty.get[$feature.name]} 
```

然后`$value`在选项中使用。你也不能创建这个变量，而不是：

```
<option value="'{$option.value}'">{$option.value} {$value}</option> 
```

你可以使用：

```
<option value="'{$option.value}'">{$option.value} {$smarty.get[$feature.name]}</option> 
```

# svm - 我们可以从朴素贝叶斯和 SVM 中获得用于垃圾邮件过滤的混合算法吗？

> ID：14766404
> 
> 赞同：0
> 
> 时间：2013-02-08T05:42:05.003
> 
> 标签：svm, libsvm, bayesian, email-spam, spam-prevention

我正在开发垃圾邮件过滤应用程序。我需要关于朴素贝叶斯和 SVM 的混合算法的建议。（例如，基于特征向量、概率）。任何帮助表示赞赏。我们可以从朴素贝叶斯和 SVM 开发混合算法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T12:18:41.390

不确定为什么要合并这两种特定方法，但您可以为此使用[集成学习](http://en.wikipedia.org/wiki/Ensemble_learning)方法。

编辑：根据您的评论，您似乎已经有两个独立训练的分类器，并希望将它们一起用于分类。一种可能的方法是共同校准分类器结果，例如通过求和和阈值。

即：给定一个输入，例如一封电子邮件，朴素贝叶斯和 SVM 都生成一个实值结果；让我们表示这些结果*nb*和*svm*。您可以使用线性回归来查找系数*c1*和*c2*以及阈值*t*，以便仅在*c1* * *nb* + *c2* * *svm* > *t*时将电子邮件分类为垃圾邮件。当然，您可以使用更复杂的方法，但如果运气好的话，这将比每个单独的分类器提供更好的性能。

# android - android apjsua 如何从 main_android.c 函数调用 pjsua_app.c

> ID：14766409
> 
> 赞同：1
> 
> 时间：2013-02-08T05:42:28.930
> 
> 标签：android, android-ndk, voip

我正在尝试从 pjsip [http://trac.pjsip.org/repos/wiki/Getting-Started/Android实现 apjsua 示例](http://trac.pjsip.org/repos/wiki/Getting-Started/Android)

我让一切正常，我可以添加 main_android.c 函数并从 Java 调用它们。（JNI 正在工作）问题是我无法弄清楚如何从 main_android.c 调用 pjsip.c 库函数

任何帮助将不胜感激

# android - SQliteException：没有这样的表

> ID：14766416
> 
> 赞同：2
> 
> 时间：2013-02-08T05:42:41.333
> 
> 标签：android

我创建了一个数据库，之前在其中创建了两个表。使用这两个表查询在 android 应用程序中执行，例如插入和选择查询。但是后来当我在 sqlite 管理器中添加更多表并且现在我想在其中一个新表中插入数据时，我得到了异常，SQliteException：否这样的表。请告诉我解决方案。难道新表没有保存在数据库中？

# perl - perl 否定前瞻不适用于大字符串

> ID：14766418
> 
> 赞同：2
> 
> 时间：2013-02-08T05:42:54.223
> 
> 标签：perl, negative-lookahead

perl 负面展望不适用于大字符串（长度 > 40000，在活动 perl 和 cygwin perl 版本 5.14 中）。我尝试了相同的代码，`mingw perl 5.8.8`但它停止处理长度> 5000的字符串。

我正在使用的代码是：

```
my $str = q(A  B);
my $pattern = '(A)(?:(?!(X)).)*(B)';  
if ( $str =~ m/$pattern/ ) {
    print "matched\n";
} 
```

这适用于所有三个版本的 perl。但是当我通过添加空格来增加字符串的长度时，模式会停止匹配。

例如：`my $str = q(A ...some 50000 spaces... B);`

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T06:01:36.487

Perl 对各种正则表达式操作的大小施加了内部限制（在大多数系统上可能是有符号的 16 位整数）以限制堆栈增长。 [这个答案](https://stackoverflow.com/a/4593612/1735796)很好地分解了限制。

从经验测试来看，当空间数达到 32767 时，就是你失败的时候，所以肯定是这个限制。

# asp.net-mvc-4 - 将数据从控制器传递到 DAL

> ID：14766419
> 
> 赞同：1
> 
> 时间：2013-02-08T05:42:56.200
> 
> 标签：asp.net-mvc-4

我创建了一个 web 方法，它将采用这样的参数

```
public HttpResponseMessage  MakeOrders([FromUri] int[] orderId)
{
} 
```

请求将是这样的

```
http://www.test.com/MakeOrders?orderId=1&orderId=2 
```

我需要将这些传递`orderId's`给`DAL`. 所以我有2个问题

1.  `[FromUri]`这是正确的实现还是在查询字符串中传递数组值的标准实践方式？
2.  我是否需要循环`orderId's`并作为单个元素传递给 DAL，以便我可以像这样制作我的 DAL

达尔

```
public void UpdateOrder(int OrderId)
{
   var query = 'Update tbl SET isApproved=1 WHERE OrderId=@orderid'; 
} 
```

还是我需要像这样发送数组

```
public void UpdateOrder(int[] OrderId)
{
   var query = 'Update tbl SET isApproved=1 WHERE OrderId in (@orderid)'; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T19:37:49.830

第一个答案是：我认为更好的方法是以json格式传递List

例如：

```
// Json format

var a=[1,2,3]; 
```

使用 jquery 的 $.ajax() 方法传递这个值。

第二个答案是：

```
public void UpdateOrder(int[] OrderId)
{
   var orderids= string.Join(",", (string[])OrderId.ToArray(Type.GetType("System.String")))
   var query = 'Update tbl SET isApproved=1 WHERE OrderId in (@orderids)'; 
} 
```

# android - 如何连接到 android 中的 asp.net 网络服务？

> ID：14766421
> 
> 赞同：0
> 
> 时间：2013-02-08T05:43:07.743
> 
> 标签：android, asp.net

我想在 android 中调用 asp.net web 服务，以便它可以在后端进行验证。我想做一个应用程序。在android中调用web服务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-17T14:52:10.750

wsdl2code.com - 它生成从您的 wsdl 到 iphone 和 android 本机代码的所有所需代码！这对我很有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T07:44:20.227

首先，您需要下载 ksoap2 android jar。然后在 Eclipse 中右键单击您的项目文件夹。单击属性，然后单击 java**构建路径 > 库 > 添加外部 jar**。然后将代码编写为..

```
 SoapObject request = new SoapObject(YOUR_CONNECTION_NAMESPACE, methodName);

    //add parameters to web service method..
request.addProperty(parameterName, parameterValue);

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);

HttpTransportSE androidHttpTransport = new HttpTransportSE(YOUR_CONNECTION_URL);
androidHttpTransport.call(YOUR_ACTION_NAME, envelope);

result = (Object) envelope.getResponse(); 
```

关于这个主题的一个非常好的教程是..

*   [调用-Asp-Net-Webservice-ASMX-From-an-Android-Ap](http://www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an-Android-Ap)

# android - TextWatcher.afterTextChanged 在退格后的字符串不正确

> ID：14766422
> 
> 赞同：5
> 
> 时间：2013-02-08T05:43:08.370
> 
> 标签：android, android-edittext, textwatcher

我正在使用 TextWatcher 来收听关键输入。当用户键入“@”时，我打开一个列表活动，用户必须从列表中进行选择。选择后，我将所选项目的文本（包括初始 @）放置到 edittext 并继续正常编辑。

问题是当我按下退格键时，我在 aftertextchanged 事件中得到的字符串是错误的，并且 listactivity 再次弹出。

```
editText.addTextChangedListener(new TextWatcher() {
        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count)
        {

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after)
        {

        }

        @Override
        public void afterTextChanged(Editable s)
        {
            String str = s.toString();

            if (str.length() > 0)
            {
                if (str.substring(str.length() - 1).equals("@"))
                {
                    Intent i = new Intent(MessageComposeActivity.this, MembersListActivity.class);
                    startActivityForResult(i, Util.MEMBERS_LIST);
                }
            }
        }
    }); 
```

在 onActivityResult 中：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data)
{
    super.onActivityResult(requestCode, resultCode, data);

    if (requestCode == Util.MEMBERS_LIST)
        if (resultCode == RESULT_OK)
        {
            editText.setText(editText.getText().toString() + data.getExtras().get("screenname") + " ");
            editText.setSelection(editText.getText().length());
        }
} 
```

**例如：**

在 EditText 中，我键入“@”，然后会弹出活动并选择“James”。EditText 现在显示@James。如果我按退格键一次或两次，则在 EditText 显示@Jam 时再次弹出列表活动。

PS：afterTextChanged() 有时会为退格（或任何键）调用两次，在第二次执行 afterTextChanged() 时，我得到错误的输入字符串。在第一次执行 afterTextChanged() 时，我得到了@Jam，在第二次执行时，我得到了“@”，因此会弹出 listactivity。

**问题：** 为什么 afterTextChanged() 被调用两次，为什么在第二次执行时我得到错误的文本？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-01T22:10:57.340

我有同样的问题。我不知道是什么导致了长度为 0 的可编辑/字符序列的额外错误回调。

我正在寻找实际上导致空 EditText 的 EditText 的更改。我最终不得不实现一个处理程序来检查 500 毫秒后的 EditText 长度。您可能必须使您的 edittext 静态或最终。它应该看起来像这样：

```
 final Handler handler =new Handler();
     final Runnable r = new Runnable(){

         @Override
         public void run()
         {
            //

             String str = editText.getText().toString();

             if (str.length() > 0)
             {
                 if (str.substring(str.length() - 1).equals("@"))
                 {
                     Intent i = new Intent(MessageComposeActivity.this, MembersListActivity.class);
                     startActivityForResult(i, Util.MEMBERS_LIST);
                 }
             }
         }
     } ;

    editText.addTextChangedListener(new TextWatcher()
    {
        @Override
        public void beforeTextChanged(CharSequence charSequence, int i, int i2, int i3)
        {

        }

        @Override
        public void onTextChanged(CharSequence charSequence, int i, int i2, int i3)
        {

        }

        @Override
        public void afterTextChanged(Editable s)
        {

            handler.postDelayed(r,500);

        }
    }); 
```

# java - java如何分割空间

> ID：14766425
> 
> 赞同：-1
> 
> 时间：2013-02-08T05:43:22.427
> 
> 标签：java

伙计们，我需要您对以下查询的帮助----我的字符串如下：

```
"Symbol Exchange    Security Type   Mid Extraction time Net Change  Last price  Bid price   Ask price" 
```

我想将其拆分如下

```
"Symbol,Exchange,Security Type,Mid,Extraction time,Net Change,Last price,Bid price,Ask price" 
```

请帮助解决以下查询，因为`split(\\s+)`没有提供所需的解决方案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T05:46:30.077

假设间隙是制表符：

```
String sentence = "Symbol Exchange    Security Type   Mid Extraction time Net Change  Last price  Bid price   Ask price";

String newSentence = sentence.replace('\t', ','); 
```

[参考： `String.replace()`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28char,%20char%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:46:58.873

你试过这个：

```
String s = "Your source string";
String m = s.replace(" ", ","); 
```

试试看。

# c# - 如何让 sitecore 显示图像（或其他资源）

> ID：14766428
> 
> 赞同：2
> 
> 时间：2013-02-08T05:43:38.820
> 
> 标签：c#, .net, sitecore, sitecore6

[我使用本指南](http://www.sitecore.net/Community/Technical-Blogs/John-West-Sitecore-Blog/Posts/2012/06/Sitecore-MVC-Playground-Part-1-Enable-MVC.aspx)安装了干净的 Sitecore 6.6 并启用了 MVC 支持。所以我的环境是 Sitecore 6.6、ASP .NET MVC 3 和 Razor、Microsoft SQL Server Express 2012、IIS 7.5，我使用的是 Microsoft Visual Studio 2012 Express for Web。我有以下代码：

```
@Model.PageItem.Fields["Title"];<br />
@Model.PageItem.Fields["Image"].GetValue(true, true);<br />
@Model.PageItem.Fields["Text"];<br />
Sitecore.Data.Items.MediaItem item = Model.PageItem.Fields["Image"].Item;
@Sitecore.StringUtil.EnsurePrefix('/', Sitecore.Resources.Media.MediaManager.GetMediaUrl(item));<br /> 
```

结果很简单：

```
Sitecore
<image mediaid="{4DFD3ABC-0BC0-41D2-BD38-705946A1368A}" mediapath="/Images/xbox" src="~/media/4DFD3ABC0BC041D2BD38705946A1368A.ashx" />
<p>Welcome to Sitecore</p> 
/sitecore/shell/~/media/110D559FDEA542EA9C1C8A5DF7E70EF9.ashx 
```

当我导航到最后一行中指定的路径时，出现以下错误：

```
HTTP Error 404.0 - Not Found
The resource you are looking for has been removed, had its name changed, or is temporarily unavailable. 
```

我尝试了几件事，例如：

1.  Web.config 中的 Media.UseItemPaths 更改为 trye（或 false） - 没有任何效果...
2.  Web.config 中的 Media.RequestExtension 设置为空（默认为 ashx）
3.  我已将 ashx 添加到 Web.config 中的允许扩展（因为如果我不能拥有正常的扩展，我至少想要有工作的 ashx 链接）
4.  我已将 ashx 添加到 IIS 7.5 -> 请求过滤 -> 文件扩展名

当然，在每次更改后（以防万一）我重新启动服务器并清除浏览器的缓存（实际上，在几次请求之后我禁用了 chrome 的缓存）。

我在 sdn.sitecore.net 上寻找解决方案，但没有运气。实际上，到目前为止，我已经花了 3 个多小时寻找解决方案，但无法弄清楚出了什么问题……任何帮助或建议表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T20:04:37.893

Sitecore.Mvc.Helpers.SitecoreHelper 类的 Field 方法将允许您输出 Image 字段。

这是一个输出三个字段的示例视图渲染：

```
@using Sitecore.Mvc.Presentation
@using Sitecore.Mvc
@model RenderingModel

@Html.Sitecore().Field("Title")<br />
@Html.Sitecore().Field("Image")<br />
@Html.Sitecore().Field("Text")<br /> 
```

John West 曾在 Sitecore MVC 上发表过大量博客，您可能想看看他的[关于 MVC Helpers 和 Sitecore ASP.NET CMS](https://community.sitecore.net/technical_blogs/b/sitecorejohn_blog/posts/about-mvc-helpers-with-the-sitecore-asp-net-cms)帖子。

# progress-bar - 推荐栏在主要内容区域上方打开

> ID：14766430
> 
> 赞同：1
> 
> 时间：2013-02-08T05:43:46.030
> 
> 标签：progress-bar, facebook-recommendations

我对 FB 推荐栏的定位有疑问。最近几天栏在主要内容区域（靠近页面中间）打开，而不是在角落。我注意到这发生在其他几个页面上，而不仅仅是我的。那么这个问题有什么解决办法吗？

# java - 在 JSP 中单击提交按钮时，如何将 HTML5 验证添加到隐藏标签中？

> ID：14766434
> 
> 赞同：1
> 
> 时间：2013-02-08T05:44:13.450
> 
> 标签：java, html

我在 jsp 页面中对我的表单使用 html5 验证。我已经给出了 novalidate 的形式。当我单击该表单的提交按钮时，它现在应该验证表单并在一个之前隐藏的标签中显示所有验证。我怎样才能在 jsp 中获得这些？这是我的表单代码。

```
<form action="#join1_form" method="POST">
  <div>
    <input type="text" name="firstname" id="firstname" value="" required placeholder="First Name" pattern="\w+" />
    <input type="text" name="lastname" id="lastname" value="" required placeholder="Last Name" pattern="\w+" />
  </div>
  <div>
    <input type="email" name="email" placeholder="Your Email" id="email" value="" required />
  </div>
  <div>
    <input name="password" id="password" type="password" required placeholder="New Password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])\w{6,}" name="password" onchange="this.setCustomValidity(this.validity.patternMismatch ? 'Password must contain at least 6 characters, including UPPER/lowercase and numbers' : '');
if(this.checkValidity()) form.cpassword.pattern = this.value;">
  </div>
  <div>
    <input name="cpassword" id="cpassword" type="password" placeholder="Re-enter Password" required pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z])\w{6,}" name="cpassword" onchange="this.setCustomValidity(this.validity.patternMismatch ? 'Please enter the same Password as above' : '');">
  </div>
  <div>
    <input type="label" hidden value="">
  </div>
  <input type="submit" value="Next">
</form> 
```

我想在提交提交按钮后显示所有验证注释。这些验证应该显示在此处隐藏的文本字段中。我该怎么做？

这是我不重复 emailID 的代码。我应该把它放在上面的哪里？如何在上面隐藏的文本字段中显示它的验证？

```
<%
Connection conn = null;
PreparedStatement ps=null;
ResultSet rs = null;
Class.forName("com.mysql.jdbc.Driver").newInstance();
conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/test","root", "");
String email1=request.getParameter("lemail");
try{
  String q="SELECT * FROM userdetails where email=?";
  ps=conn.prepareStatement(q);
  ps.setString(1,email1);
  rs=ps.executeQuery();
  if(rs.next())
  {
    //what to do here?
  }
  else
  {
    //what to do here?
  }
}
catch(Exception e)
{
  e.printStackTrace();
}
try{
  if(ps!=null){
    ps.close();
  }
  if(rs!=null){
    rs.close();
  }
  if(conn!=null){
    conn.close();
  }
}
catch(Exception e)
{
  e.printStackTrace();
}
%> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:49:29.427

```
<html:form action="storenotes" onsubmit="return demo()"> 
```

在 JavaScript 中调用 demo() 函数并通过 return true 或 return false 提交表单

# jsf-2 - 从验证器设置 bean 属性

> ID：14766435
> 
> 赞同：1
> 
> 时间：2013-02-08T05:44:24.307
> 
> 标签：jsf-2, validation

有没有办法从 a 设置 bean 属性`Validator`？
就我而言，我有一个`validator`连接到数据库并执行一些验证的。
成功验证后，我想将从数据库接收到的对象保存在 bean 属性中。
目前我正在通过从验证器设置我的 bean 的静态属性来做到这一点。
这是我的验证器方法

```
public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {
    //perform validation
    if(isValidated) {
        Referral ref = database.getReferral(value.toString());  //receive referral object from batabase
        RegistrationBean.staticReferral = ref; // Set ref to RegistrationBean's static property
    } else {
       FacesMessage msg = new FacesMessage(FacesMessage.SEVERITY_FATAL, "Invalid Referral!", "Referral does not exist!");
        throw new ValidatorException(msg);
    }
} 
```

这是我的`RegistrationBean`

```
@ManagedBean  
@ViewScoped  
public class RegistrationBean implements Serializable {

    //other bean properties
    private Referral referral;
    public static Referral staticReferral;

    public RegistrationBean() {
        //default constructor
    }

    public Referral getReferral() {
        this.staticReferral = referral;
        return referral;
    }
    // other getters, setters and methods
} 
```

所以我心中的问题是：

*   有没有办法直接从 bean 设置 bean 属性？（不使用静态属性）
*   使用现有方法是否会出现任何并发问题（一个用户可能会收到其他用户选择的推荐对象等）？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T09:30:26.817

托管 bean 中的静态成员在所有实例（以及应用程序的用户）之间共享。因此，在将成员变量设为静态之前，请至少三思。

如果您使验证器成为托管 bean，则可以将目标托管 bean 注入验证器。有关详细信息，请参阅[此答案](https://stackoverflow.com/a/8629655/620338)。

在给定的示例中，注入了 EJB，但您可以通过`@ManagedProperty`注解注入 JSF 托管 bean

# ruby-on-rails - 用于评论的 Ajax 删除未重新加载部分 + rails 3.2

> ID：14766438
> 
> 赞同：0
> 
> 时间：2013-02-08T05:44:51.597
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3.2

我有 ajax 评论提交和删除，提交完美但删除不起作用。

以下是我的代码：-

**控制器**

```
def destroy
  @status_update = StatusUpdate.find(params[:id])
    if @user == current_user
      if @status_update.destroy
        respond_with do |format|
          format.html do
            if request.xhr?
              render :partial => "users/post_status_update", :locals => {:user => @user}, :layout => false, :status => :created
            else
              redirect_to @user
            end
          end
        end
      end
    end
  end 
```

**Javascript**

```
$(document).ready(function(){

  $('.delete-status-update')
    .on("ajax:beforeSend", function(evt, xhr, settings){
    })

    .on("ajax:success", function(evt, data, status, xhr){
      $('.status-partial').replaceWith(xhr.responseText);

    })

}); 
```

**看法**

```
.status-partial
  -@user.status_updates.latest.limit(5).each do |status_update|
    .row-fluid.cycle-status-update{:class => cycle("dark", "light")}
      .row-fluid
        .span11
          = status_update.status
        .span1
          .delete-status-update-link
            %strong= link_to "X", [@user,status_update], :remote => true, :method => :delete, :class => "delete-status-update"
      .row-fluid
        .time-ago-in-words
          ="#{time_ago_in_words(status_update.created_at)} ago" 
```

问题是，一旦我单击删除链接，状态部分没有被替换，在刷新页面 ajax 删除第一次工作后，它再次停止工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:13:58.550

你不必要地使一切复杂化。您的销毁控制器可能很简单，如下所示：

```
def destroy
  @status_update = StatusUpdate.find(params[:id])
  if @user == current_user
    unless @status_update.destroy
      redirect_to @user
    end
  end
end 
```

在您看来，不要通过 $.ajax 调用，而是尝试使用 rails`link_to "action", action_path, remote: true`

将您的 html 视图文件命名为 destroy.js.erb。

这些可以是它的内容：

```
$('.status-partial').html(<%= @user.generate_new_content.to_s %>); 
```

Rails 将负责其余的工作。当您单击链接时，具有“状态部分”类的元素将其 html 内容替换为“一些新内容”。

将 HTML 和 AJAX 响应分开是一种很好的做法，Rails 提供了一种方便的方法来做到这一点。用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T04:57:23.523

问题在于 javascript 文件中使用的语法`.on`，它不像`.live`. 将语法更改为

```
$(document).ready(function(){

  $(document).on("ajax:success", "#create_status_update_form", function(evt, data, status, xhr){
      $('.status-partial').replaceWith(xhr.responseText);
      $('.comment-text').val('');
    })

}); 
```

解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T05:52:31.657

我认为如果你这样做会更好

```
respond_with do |format|
format.js 
```

然后调用一个文件`destroy.js.erb`来放置删除后应该触发的javascript

# android - 如何将android中的textview固定到屏幕中心？

> ID：14766442
> 
> 赞同：0
> 
> 时间：2013-02-08T05:45:12.317
> 
> 标签：android, textview

请帮帮我。:(

如何动态地将 TextView 放在屏幕中央？我的意思是，任何类型的屏幕分辨率都固定在屏幕中央。

提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:57:24.067

这是一个非常基本的Android原理。您应该通读[Android 开发者课程。](http://developer.android.com/training/index.html)它会告诉你如何做这样的事情。

要回答您的问题，请使用具有 match_parent 布局参数的布局并将重力设置为中心，如下所示：

```
<RelativeLayout android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_gravity="center" /> 
```

或以编程方式：

```
relativeLayout.setGravity(Gravity.CENTER); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:48:21.470

将其放入相对布局并添加

```
android:layout_centerInParent="true" 
```

或在与父级高度和宽度匹配的线性布局中使用此代码

```
 android:gravity="center"
    android:layout_gravity="center" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T05:50:15.380

您可以将重力放置`textview`如下：

```
 <YourTextView>.setGravity(Gravity.CENTER); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T05:50:47.463

您可以使用**相对布局**并在其中添加具有以下属性的**文本视图。**

```
android:layout_centerInParent="true"
android:layout_height="wrap_content"
android:layout_width="wrap_content" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T05:55:50.710

> 你可以使用下面的代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:gravity="center"
android:orientation="vertical" >
<TextView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:id="@+id/txt"
    android:text="@string/hello" />
</LinearLayout> 
```

# c# - 使用 Linq 的两个列表的棘手组合

> ID：14766451
> 
> 赞同：1
> 
> 时间：2013-02-08T05:46:31.473
> 
> 标签：c#, .net, linq, lambda

我希望有人能够在这里指导我正确的方向......

```
public class SubmissionLog
{  
    public int PKId {get;set;}  
    public int SubmissionId {get;set;}  
    public DateTime Created {get;set;}   
    public int StatusId {get;set;}
} 
```

这是数据：

```
1, 123, '1/24/2013 01:00:00', 1  
2, 456, '1/24/2013 01:30:00', 1  
3, 123, '1/25/2013 21:00:00', 2  
4, 456, '1/25/2013 21:30:00', 2  
5, 123, '2/25/2013 22:00:00', 1  
6, 123, '2/26/2013 21:00:00', 2  
7, 123, '2/16/2013 21:30:00', 1 
```

我想要关注的是：我想知道给定日期从 StatusId 1 到 StatusId 2 的平均时间跨度。

所以，假设日期是 2013 年 2 月 26 日，那么我认为如果首先得到这样的列表是有意义的：

```
var endlingList = (from sl in db.SubmissionLogs  
    where (DateTime.Now.AddDays(days).Date == sl.Created.Date) // days = passed number of days to make it 2/26/2013  
    && (sl.StatusId == 2)  
    select sl).ToList();

var endingLookup = endlingList.ToLookup(a => a.SubmissionId, a => a.Created); // thought of using lookup because Dictionary doesn't allow duplicates 
```

在那之后，我想我会弄清楚起点

```
var startingList = (from sl in db.SubmissionLogs  
where endingList.Select(a => a.SubmissionId).ToArray().Contains(sl.QuoteId)  
&& sl.StatusId == 1
select sl).ToList(); 
```

然后我所做的是：

```
var revisedList = endingLookup.Select(a =>
new SubmissionInterval {
    SubmissionId = a.Key,
    EndDateTime = endingLookup[a.Key].FirstOrDefault(), //This is where the problem is. This will only grab the first occurance.
    StartDateTime = startLookup[a.Key].FirstOrDefault() //This is where the problem is. This will only grab the first occurance.
}); 
```

然后我要做的平均如下（同样，这将仅包括某些提交 id 提交日志的状态 1 和状态 2 的初始或第一次出现）：

```
return revisedList.Count() > 0 ? revisedList.Select(a=> a.EndDateTime.Subtract(a.StartDateTime).TotalHours).Average() : 0; 
```

所以，我希望有人能理解我的问题首先是什么......重新说明一下，我想获得每个状态1和2之间的时间跨度。我传递日期，然后我必须查找2这确保我会找到 1。如果我反过来寻找 1，那么 2 可能不存在（无论如何都不想要）。

最后我希望能够平均一些东西......所以让我们说如果一些提交首先在 5 小时的时间跨度内从 1 变为 2（我留下的代码将使我达到这一点），那么让我们假设它被重新分配给 1，然后在 6 小时的新时间跨度内又回到 2，我希望能够同时获得两者并取平均值，所以 (5+6)/2。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T10:39:38.087

我想我明白你想要做什么。这有帮助吗

```
void Main()
{
    var list = new List<SubmissionLog>
    {
        new SubmissionLog(1, 123, "1/24/2013 01:00:00", 1),
        new SubmissionLog(2, 456, "1/24/2013 01:30:00", 1),
        new SubmissionLog(3, 123, "1/25/2013 21:00:00", 2),
        new SubmissionLog(4, 456, "1/25/2013 21:30:00", 2),
        new SubmissionLog(5, 123, "2/25/2013 22:00:00", 1),
        new SubmissionLog(6, 123, "2/26/2013 21:00:00", 2),
        new SubmissionLog(7, 123, "2/16/2013 21:30:00", 1),
    };

    // split out status 1 and 2
    var s1s = list.Where (l => l.StatusId == 1).OrderBy (l => l.Created);
    var s2s = list.Where (l => l.StatusId == 2).OrderBy (l => l.Created);

    // use a sub-query to get the first s2 after each s1
    var q = s1s.Select (s1 => new 
        {
            s1, 
            s2 = s2s.FirstOrDefault (s2 => 
                s1.SubmissionId == s2.SubmissionId &&
                s2.Created >= s1.Created    
            )
        }
    ).Where (s => s.s1.PKId < s.s2.PKId && s.s2 != null);

        // extract the info we need 
        // note that TotalSecond is ok in Linq to Object but you'll 
        // probably need to use SqlFunctions or equivalent if this is to 
        // run against a DB.
    var q1 = q.Select (x => new 
        {
            Start=x.s1.Created,
            End=x.s2.Created,
            SubmissionId=x.s1.SubmissionId, 
            Seconds=(x.s2.Created - x.s1.Created).TotalSeconds
        }
    );

        // group by submissionId and average the time
    var q2 = q1.GroupBy (x => x.SubmissionId).Select (x => new {
        x.Key, 
        Count=x.Count (),
        Start=x.Min (y => y.Start),
        End=x.Max (y => y.End),
        Average=x.Average (y => y.Seconds)});
}

public class SubmissionLog
{  
    public SubmissionLog(int id, int submissionId, string date, int statusId)
    {
        PKId = id;
        SubmissionId = submissionId;
        Created = DateTime.Parse(date, CultureInfo.CreateSpecificCulture("en-US"));
        StatusId = statusId;
    }
    public int PKId {get;set;}  
    public int SubmissionId {get;set;}  
    public DateTime Created {get;set;}   
    public int StatusId {get;set;}
} 
```

# javascript - Javascript函数：有些东西不工作

> ID：14766452
> 
> 赞同：-2
> 
> 时间：2013-02-08T05:46:33.057
> 
> 标签：javascript, asp.net

我的应用程序中有一个用于验证表单的 Javascript 函数，我在单击按钮时调用它。但是脚本不起作用。

**脚本**：

```
function payment() {
  alert("hi");
  var theuser = document.getElementById("<%=txtcardname.ClientID%>").value;
  var thecardno = document.getElementById("<%=txtcreditdet.ClientID%>").value;
  var thecvv = document.getElementById("<%=txtcvv.ClientID%>").value;
  var matchname = theuser.match(userRegex);
  var divcontent = document.getElementById("<%=errorcontent.ClientID%>");
  var msglbl = document.getElementById("<%=lblerror.ClientID%>");
  var ermsg = "";
  /*username validation*/
  if (matchname == null) {
    ermsg += "<li class='logli'>Username is Empty or Invalid.</li>";
  }
  /*Mobile validation*/
  if (themobile.length != 10) {
    ermsg += "<li class='logli'>Enter Your CardNumber Correctly.</li>";
  }
  /*Email validation*/
  if (thecvv.length!=3) {
    ermsg += "<li class='logli'>Enter Ur Cvv Correctly.</li>";
  }
  if (ermsg != "") {
    divcontent.style.display = "block";
    divcontent.style.background-colour="Aqua";
    divcontent.style.border = "1px solid #ff0000";
    divcontent.style.width = "100%";
    divcontent.style.margin = "0px 0 10px 15px";
    msglbl.style.display = "block";
    msglbl.style.margin = "0 0 15px 15px";
    msglbl.innerHTML = "Please correct the below errors" + "<ul>" + ermsg + "</ul>";
    return false;
  }
  return true;
} 
```

**ASPX**：

```
<asp:Button ID="btnpay" runat="server" Text="PAY" CssClass="btnpaystyle" OnClientClick="if(!payment())return false;"/> 
```

**注意**：我`payment()`在按钮的 clientclick 事件中调用该函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T17:47:10.403

在你的 asp 按钮中试试这个：

OnClientClick="return payment();"

# php - 如何将值从android传递给php？

> ID：14766454
> 
> 赞同：-1
> 
> 时间：2013-02-08T05:46:53.620
> 
> 标签：php, android, json, params

我在将值从 android 传递给 php 脚本时遇到问题。

我希望`questionid`传递到 php 脚本`url_get_ansurl`，但我不能传递值。

这个怎么做？请指导我。

非常感谢。

> ```
>  try {
>         int success = json.getInt(TAG_SUCCESS);
>         if (success == 1) {
>             System.out.println("Success");
>             groups = json.getJSONArray(TAG_GROUP);
>             System.out.println("Result Success+++"+groups);
>              for (int i = 0; i < groups.length();i++) {
>             JSONObject c = groups.getJSONObject(i);
>             String question = c.getString(TAG_QUES);
>             System.out.println("Checking ::"+question);
>             ques1.add(question);
>             String questionid = c.getString(TAG_QUESID);
>             System.out.println("Checking ::"+questionid);
>             id=questionid;
>             quesid.add(questionid);
>              }
>         } else {
>             showAlert();
>         }
>     } catch (JSONException e) {
>         System.out.println("Error "+e.toString());
>     }
>         List<NameValuePair> params1 = new ArrayList<NameValuePair>();
>         params1.add(new BasicNameValuePair("qid", qid));
>         json = jsonParser.makeHttpRequest(url_get_ansurl, "GET", params1);
>         System.out.println("ques value got");
>         Log.d("All Groups: ", json.toString());
>         System.out.println("question");
>         try {
>         int success = json.getInt(TAG_SUCCESS);
>         System.out.println("Success");
>         if (success == 1) {
>             System.out.println("Success");
>             groups = json.getJSONArray(TAG_GROUP);
>             System.out.println("Result Success+++"+groups);
>              for (int i = 0; i < groups.length();i++) {
>             JSONObject c = groups.getJSONObject(i);
>                 String answer = c.getString(TAG_ANSW);
>                 System.out.println("Checking ::"+answer);
>                 answ1.add(answer);
>              }
>         } else {
>             showAlert();
>         }
>     } catch (JSONException e) {
>         System.out.println("Error "+e.toString());
>     }
>     protected void onPostExecute(String file_url) {
>         pDialog.dismiss();
>      ques1=new ArrayList<String>(new ArrayList<String>(ques1));
>         //  j=0;
>         TextView txtque = (TextView) findViewById(R.id.que_txt); 
>         txtque.setText(ques1.get(j)); 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T05:56:21.663

您可以通过 POST 或 GET 使用它

```
 List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("questionid", questionid));

    try {
        HttpParams httpParameters = new BasicHttpParams();
        HttpConnectionParams.setConnectionTimeout(httpParameters, 10000);
        HttpConnectionParams.setSoTimeout(httpParameters, 10000);
        HttpClient httpClientpost = new DefaultHttpClient(httpParameters);

        //HttpGet post = new HttpGet(url_request);
        HttpPost post = new HttpPost(url_request);

        UrlEncodedFormEntity ent = new UrlEncodedFormEntity(params,
                HTTP.UTF_8);
        post.setEntity(ent);

        HttpResponse responsePOST = httpClientpost.execute(post);
        HttpEntity resEntity = responsePOST.getEntity();
        String getresponse = EntityUtils.toString(resEntity); //Response from the server
    } catch (IOException e) {
        e.printStackTrace();
    } catch (JSONException e) {
        e.printStackTrace();
    } 
```

# sql - 单列数据的差异

> ID：14766459
> 
> 赞同：2
> 
> 时间：2013-02-08T05:47:12.673
> 
> 标签：sql, oracle

我试图找到单列数据的差异，即不同的是

```
Column C
date 2 (1/2/12) would check the difference from date 1 (1/1/12)
date 3 (1/3/12) would check the difference from date 2 (1/2/12)
date 4 (1/4/12) would check the difference from date 3 (1/3/12) 
```

我想我可以创建另外两列日期天数减去 -1 和金额然后显示差异

```
Column A<date>  Column B<Amount> Column C <Difference>
1/1/12            550             -150
1/2/12            400              300
1/3/12            700             -200
1/4/12            500 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T05:55:11.103

你可以使用`LEAD`解析函数

```
SELECT  "Column A", 
        "Column B",
        (LEAD("Column B", 1) OVER (ORDER BY "Column A") - "Column B") AS "Difference"
FROM    TableName 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!4/03f86/5)

其他）

*   [LAG 和 LEAD 分析函数](http://www.oracle-base.com/articles/misc/lag-lead-analytic-functions.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T05:57:45.400

这是使用`CTE`and的另一个选项`RowNum`：

```
WITH CTE AS (
  SELECT  ColA,
        ColB,
        rownum rn
  FROM    YourTable
  ORDER BY ColA
)
SELECT C.*,
  C.ColB - C2.ColB ColC
FROM CTE C
  LEFT JOIN CTE C2 ON C.rn = C2.rn + 1 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!4/fb128/1)。

祝你好运。

# html - 菜单中的垂直对齐

> ID：14766461
> 
> 赞同：0
> 
> 时间：2013-02-08T05:47:26.080
> 
> 标签：html, css

我的菜单结构是

```
 <div id="menu">
  <ul>
     <li><a href="#"><span>Two Words</span></a></li>
     <li><a href="#"><span>Three Words</span></a></li>
     <li><a href="#"><span>Very Long menu item</span></a></li>
     <li><a href="#"><span>Short word</span></a></li>
     <li><a href="#"><span>item5</span></a></li>
     <li><a href="#"><span>item6</span></a></li>
  </ul>
 </div> 
```

菜单具有固定宽度 720 像素和固定高度 50 像素。我怎样才能使菜单项与此图像上的一样？ ![在此处输入图像描述](../Images/3c8e5875e749f3cde2ed83f9df7fa852.png)

这是我的 CSS

```
#menu {width:720px; height:50px; }
#menu ul {margin:0px; padding:0px;}
#menu ul li {display:inline; float:left; margin-left:1px;}
#menu ul li a {display:block; width:119px; height:100%;}                
#menu ul li a span {display:inline-block;vertical-align:middle;
background-color:gray; text-align:center; font-size: 14px; width:100%;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:57:07.857

这是一个先机：

```
#menu {
    border: 1px solid #0000ff;
    padding: 10px;
}

ul li {
    border: 1px solid #ff0000;
    display: table-cell;
    height: 80px;
    margin: 10px 5px;
    text-align: center;
    width: 80px;
    vertical-align: middle;
} 
```

[jsfiddle](http://jsfiddle.net/sqva3/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:50:37.883

在您创建的跨度标签中使用 text-align="center" 或使用 css 执行相同操作。

# c - 使用指针修改字符串

> ID：14766462
> 
> 赞同：0
> 
> 时间：2013-02-08T05:47:25.957
> 
> 标签：c, pointers, segmentation-fault

所以我有一个函数，它需要一个指向“字符串”数组的指针（我将字符串理解为只是后面跟着“\0”的内存块）。由于字符串已经是指向字符串第一个字节的指针，所以我的指针实际上是一个** doublePointer。但是，我对 Ying Yang 进行了分段故障，老实说，我不知道在低级别视图中发生了什么。下面是我的代码，它的功能是读取字符并将第一个单词的第一个字母（在字符串中）和句号后大写。

```
 void autocaps(char ** words)
    {

    /* Add code here */
    //Period Boolean
    bool next=false;
    //First Word Boolean
    bool fcap=true;
    //Counter Variable
    int i=0;
    int j=0;
    //Second Pointer
    char** wordx = words;

    //LowerCase Bomb & Period Flagging
    while(wordx[i][j]!='\0'){
      while(wordx[i][j]!='\0'){
       //A-Z Filter
       if((wordx[i][j]>='A')&&(wordx[i][j]<='Z')){
      wordx[i][j]+=32;
       }
       if(wordx[i][j]=='.'){
      next=true;
       }
      j++;
      }
    i++;
    }

 i=0;
 j=0;
 //Cap First Word & Cap Post Period
 while(words[i]!='\0'){
   while(words[i][j]!='\0'){
    //a-z Filter
    if((words[i][j]>=97)&&(words[i][j]<=122)){
  if(fcap){
    words[i][j]-=32;
    fcap=false;
  }
  if(next){
    words[i][j]-=32;
  }
    }
    j++;
  }
 i++;
}
return; 
```

}

当我打印通过参数传递的原始指针时，我出现了段错误。如果有人可以向我解释这个的低级概念，因为我很困惑，我到处扔三颗星和四颗星，我什至不知道它是否让我离调试代码更近或更远。

谢谢你！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:58:46.157

您说的是“字符串数组”，但根据您的代码和您的意图（大写第一个字符和句点之后），我将假设您打算将其用于传递给函数的单个字符串。

字符串只是一个字符数组，后跟一个 0 值。你想要做的是遍历字符数组。要从字符指针获取要取消引用指针的字符。这就是为什么您在下面我们实际检查字符串中的字符的任何地方都看到“*words”的原因。

双指针、三指针和四指针使您远离解决方案。

这是一个重新设计的示例：

```
void autocaps(char* words)
{
  bool fcap=true; /* true so first letter is made cap */

  while (*words != '\0') 
  {
    if (fcap)
    {
        /* capitalize */
        if ((*words >= 'a') && (*words <= 'z'))
        {
            *words -= 32;
        }

        fcap = false;
    }
    else
    {
        /* not cap */
        if ((*words >= 'A') && (*words <= 'Z'))
        {
            *words += 32;
        }
    }

    /* period - cap next letter */
    if (*words == '.')
    {
        fcap = true;
    }

    /* step to next character in array */
    words++;
  }

  return;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T20:23:34.487

我正在将字符串数组初始化为连续字符串，例如：

```
char *words[2] = {"hello", "world"}; 
```

那么您将在第一次到达时遇到分段错误

```
**words+=32; 
```

因为您正在尝试修改只读位置。

您应该像这样初始化字符串：

```
char word1[] = {'h', 'e', 'l', 'l', 'o', 0};
char word2[] = {'w', 'o', 'r', 'l', 'd', 0};
char *words[] = {word1, word2}; 
```

另一个问题确实是

```
*words++; 
```

您不想这样做有两个原因：

1.  正如其他海报提到的那样， ++ 优先于取消引用运算符，因此您实际上是将单词数组从一个字符串增加到下一个，而不是一个字符到下一个。
2.  解引用运算符则没有任何影响。

现在，如果你想前进到下一个字符，你不想这样做：

```
(*words)++ 
```

因为现在您实际上是在更改 words 数组中的指针，而您不想这样做。

# jsp - 如何将 ActionBean 中的 HashMap 与 JSP 上的表单映射？

> ID：14766463
> 
> 赞同：1
> 
> 时间：2013-02-08T05:47:35.330
> 
> 标签：jsp, hashmap, stripes

我正在使用条纹。我的 Action bean 有一个 HashMap，它有 id(String) 和 quantity(int)。在 JSP 上，我提交了一个表单、我想要映射到 HashMap 的 id 和数量，以便表单上的所有 id 和数量都“放入”到 HashMap 中。我该怎么做？

我做了类似的事情 -

在 ActionBean（带有 getter 和 setter）中 -

```
private Map<String, Integer> productVariantMap = new HashMap<String, Integer>(); 
```

在 JSP 上 -

```
<s:useActionBean
beanclass="com.hk.web.action.core.b2b.B2BAddToCartAction" var="atc"/>
<s:useActionBean> 
```

我正在通过一个循环获取 onsubmit 中的值并将这些值放在

```
 ${atc:productVariantMap.put(id, quantity)};
 or 
 $(atc.productVariantMap.put(id,quantity)}; 
```

这些都不起作用。建议我一种方法来映射我的 HashMap 或根据我的要求添加这些值。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T07:26:41.637

这在[文档](http://www.stripesframework.org/display/stripes/Indexed+Properties#IndexedProperties-IndexedPropertieswithMaps%28andarbitrarykeytypes%29)中有所描述。在你的动作 bean 中为你的地图有一个 getter 和一个 setter，并在名为 like 的 HTML 表单中有输入字段`productVariantMap['foo']`（foo 是地图的键）。

因此，例如，包含以下输入字段的表单将使用 1 填充映射 key `"foo"`， 2 填充 key `"bar"`：

```
<input type="text" name="productVariantMap['foo']" value="1"/>
<input type="text" name="productVariantMap['bar']" value="2"/> 
```

# windows-8 - 为 Win 8 创建 QBOE 时间输入应用程序

> ID：14766464
> 
> 赞同：0
> 
> 时间：2013-02-08T05:47:39.950
> 
> 标签：windows-8, quickbooks-online

我的公司使用 Quick Books Online 进行会计，这就是我们记录项目时间的地方。为了使时间输入更容易，并且是一种学习如何编写 Windows 8 Metro 应用程序的方法，我认为这将是一个有用的项目，可以简化时间跟踪，应用程序可以自动将我的时间提交给 QB。想法是用户将使用他们自己的 QBO 登录名，以便能够看到他们的时间条目。

我一直在寻找 QBOE 的 api，似乎无法判断是否可以使用非管理员凭据连接到 QBOE 帐户。我的想法有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T13:37:40.007

不，这是不可能的。您需要在 QB 和您的应用程序之间进行对话。

您可能会在 appcenter 上查看许多不同的时间表应用程序。[https://appcenter.intuit.com/category/time-tracking](https://appcenter.intuit.com/category/time-tracking)

# c - 如果我在对句柄 h 的异步读取尚未完成之前调用 CloseHandle(h) 会怎样？

> ID：14766465
> 
> 赞同：0
> 
> 时间：2013-02-08T05:47:41.593
> 
> 标签：c, windows, exception, file-io, asynchronous

考虑以下场景：

```
auto h = CreateFile(...);
ReadFileEx(h, ...); // Asynchronous read for a large block of data. say, 1GB.
CloseHandle(h); 
// If the read has not yet finished here, what will happen? Big Bang??? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T06:24:47.427

只要 Asyncronous 句柄在调用时有效，异步操作将保持有效，直到完成。这是因为异步文件 IO 调用包含对内核中文件对象的隐式引用计数。

当异步事件完成时，如果用户模式下没有更多句柄指向该文件，则该文件将在内核内部关闭。

请注意，这确实有明显的副作用。特别是，如果您打开文件以进行独占读/写，发出异步操作然后关闭句柄，则在异步操作完成之前，该文件将无法打开以进行读/写。

# asp.net - 如何在 .Net 中实现数据脚手架

> ID：14766466
> 
> 赞同：0
> 
> 时间：2013-02-08T05:47:44.973
> 
> 标签：asp.net, .net, data-binding

我打算在 ASP.Net 中开始一个项目，并希望实施数据脚手架，因为它是一个很好的学习曲线，而且截止日期很短。到目前为止我所理解的只是数据脚手架用于根据数据自动创建网页，以方便开发人员编写更少的代码（Doless, Have More）。

谁能给我一个很好的指导来做那件事？或一些教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:51:16.313

你可以毫不费力地用谷歌搜索它： [http ://weblogs.asp.net/scottgu/archive/2011/05/05/ef-code-first-and-data-scaffolding-with-the-asp-net-mvc- 3-tools-update.aspx](http://weblogs.asp.net/scottgu/archive/2011/05/05/ef-code-first-and-data-scaffolding-with-the-asp-net-mvc-3-tools-update.aspx)用于 MVC 或[http://msdn.microsoft.com/en-us/library/ee377606%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/ee377606%28v=vs.100%29.aspx)如果您使用的是 asp.net Web 表单

# java - synchronized 关键字和 ReentrantLock 的区别

> ID：14766468
> 
> 赞同：1
> 
> 时间：2013-02-08T05:47:48.730
> 
> 标签：java, multithreading, synchronized, reentrantlock

我根据[此页面](http://www.ibm.com/developerworks/library/j-jtp0730/index.html)上的示例制作了一个线程池。在工作线程中，我们有一个永远不会让线程死亡的无限循环，以及当没有工作要做时暂停线程的 wait() 方法调用：

```
while (true) {
    synchronized(queue) {
         loop:while (queue.isEmpty()) { // labled the loop so we can return here
             try
             {
                 queue.wait();
                 if(queue.isEmpty())    // check the condition predicate again
                     continue loop;
             }
             catch (InterruptedException ignored)
             {
             }
         }    
         r = (Runnable) queue.removeFirst();
 }

// If we don't catch RuntimeException, 
// the pool could leak threads
try {
    r.run();
}
catch (RuntimeException e) {
    // You might want to log something here
} 
```

事实是，如果队列为空，则`r = (Runnable) queue.removeFirst();`可以抛出一个 RuntimeException 。`NoSuchElementException`并且当在该行上引发此类异常时，当前持有互斥锁的线程将死亡，并且池会泄漏线程。当线程死亡时，互斥锁似乎被释放。

但是，如果您不使用 default`synchronized`关键字来同步队列，而是使用`ReentrantLock`to 锁定和发送`Condition`信号和等待，则当前持有互斥锁的线程在意外中断时似乎不会释放锁定。

因此，就我而言，当我在 Threads 选项卡下检查 JVisualVM 时，我可以看到`AWT-EventQueue-0`线程正在等待`Thread-1`释放互斥锁。但是 Thread-1 在运行任务的途中死了，并且意外终止（`RuntumeException`），并且互斥锁似乎没有被释放。

我的问题：

1)如果持有它的线程意外终止，是否不会释放[ReentrantLocks ？](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReentrantLock.html)

2）上面的代码片段之间`while (queue.isEmpty()) {`有什么区别吗？`if (queue.isEmpty()) {`我看不出有什么区别，因为线程在这两种情况下都会等待。但我认为它在使用时的行为有所不同`if`（比如如果多个线程会影响队列）。

**EDIT**
Java Concurrency in Practice 状态：

> 由于所有这些原因，当您从等待中醒来时，您必须再次测试条件谓词，如果尚未为真，则返回等待（或失败）。由于您可以在条件谓词不为真的情况下反复唤醒，因此您必须始终在循环内调用等待，在每次迭代中测试条件谓词。

看看我在上面的代码中的编辑，现在代码应该是正确的，如 Java Concurrency in Practice 中所述。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T06:37:43.787

> 1）如果持有它的线程按预期终止，ReentrantLocks 不会被释放吗？

仅当您显式调用[Lock#unlock()](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html#unlock%28%29)时才释放锁定。这就是为什么建议在 finally 块中调用[Lock#unlock()](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html#unlock%28%29)以防止应用程序中的死锁。

> 2) 上面的代码片段中的 while (queue.isEmpty()) { 和 if (queue.isEmpty()) { 有什么区别吗？我看不出有什么区别，因为线程在这两种情况下都会等待。但是我认为使用 if 时的行为会有所不同（例如，如果多个线程会影响队列）。

在那里，在特定情况下没有太大差异。但是在你的应用程序中使用你保证断言，当队列为空时`while`你不会调用。`removeFirst()`此外，使用 while 而不是 if 的 PROS 是[虚假的 wakeups](https://stackoverflow.com/questions/2540984/why-do-threads-spontaneously-awake-from-wait)。

* * *

*注意：* 如果您不仅要为教育实施此模式，请考虑使用[BlockingQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ArrayBlockingQueue.html)。java.util.concurrent 库解决了许多多线程问题，在大多数情况下，您可以基于 java.util.concurrent 的高级抽象来构建应用程序，而不是使用诸如 wait()/notify() 之类的低级技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T09:53:25.603

您的代码似乎太复杂了-我只想写：

```
while (true) {
    synchronized(queue) {
         while (queue.isEmpty()) {
             try {
                 queue.wait();
             } catch (InterruptedException ignored) {
                 //don't ignore me please
                 //you probably should exit the loop and return here...
             }
         }
         r = queue.removeFirst(); //Why use a cast? Use generics instead.
     }
 } 
```

唯一`queue.removeFirst()`可能抛出 NoSuchElementException 的情况是它被同时修改，如果对队列的所有访问都是在同步块中进行的，这是不可能的。

因此，找到您访问队列的位置而不持有监视器上的锁，您将解决您的问题。

The reason why you must call `wait` within a loop is that wait might wake spuriously (i.e. because wait wakes up does not mean your condition has become true so you need to test it again).

* * *

As a side note, if you used a [BlockingQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html) you would not have to worry about those low level details and you could simply write:

```
while(true) {
    Runnable r = queue.take(); //blocks until queue is not empty
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T14:26:45.233

加入的东西`java.util.concurrent`给你更多的灵活性，比如定时等待和尝试锁定/获取方法。此外，与 lock.lock()/unlock() 对不同，同步为您提供代码块。当没有争用时，它也往往更有效。无论如何，在使用并发时，一定要考虑一下，`java.util.concurrent`因为那里已经解决了许多问题。

# java - 带有 Azerty vrs Qwerty 的 Java 机器人

> ID：14766470
> 
> 赞同：1
> 
> 时间：2013-02-08T05:47:54.000
> 
> 标签：java, keyevent, awtrobot, qwerty

我希望这不是重复的，但我已经搜索了论坛并且还没有找到任何答案。

我的 java 应用程序使用 Robot 类输入文本时遇到问题。提供了文本，应用程序将其键入。当用户拥有 QWERTY 键盘时，一切正常。当用户有一个 AZERTY 键盘时，值会不正确。

例如将“1234567890”输入软件类型“&é”'(§è!çà"

我希望有些人知道如何支持多种键盘布局。先感谢您。

这是一个片段

```
String TRANSLATION_SHIFT = "~!@#$%^&*()_+{}|:\"<>?";
String TRANSLATION_NON_SHIFT = "`1234567890-=[]\\;',./";
Robot robot = new Robot();
String text = "1234567890";
int key;
for (char c: text.toCharArray()){
  switch(c){
    ....
    case '0':
      key = KeyEvent.VK_0;
      break;
case '1':
  key = KeyEvent.VK_1;
  break;
...(etc etc)...
case '9':
  key = KeyEvent.VK_9;
  break;
    ...
  }
  robot.keyPress(key);
  robot.keyRelease(key);
} 
```

里面也有代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:06:07.110

我认为您需要了解键盘布局，我不确定是否有一些内置函数来指定类的语言环境，但是您可以找到支持不同键盘布局`Robot`的类的包装器实现，[请参阅此库](https://code.google.com/p/windowlicker/source/browse/trunk/src/core/main/com/objogate/wl/#wl/robot)`Robot`

# java - 拆分不同范围内的数字

> ID：14766473
> 
> 赞同：4
> 
> 时间：2013-02-08T05:48:13.973
> 
> 标签：java, hashmap, concurrenthashmap

我正在尝试测量每个线程插入数据库所需的时间。我已经在`ConcurrentHashMap`命名映射中捕获了所有这些性能数字，例如每个线程插入的时间。在那个并发哈希映射中，它将是这样的。

```
Key- 10
Value- 2 
```

这意味着 2 个呼叫在 10 毫秒内返回。下面的另一个例子

```
Key - 20
Value -1 
```

这意味着，1 个呼叫在 20 毫秒内返回。

而且该地图将包含更多数据，这意味着更多的键值对。

所以现在我正在尝试通过使用上面的相同地图来做类似下面的事情，这意味着我需要迭代上面的地图以获得该特定范围内的以下数字。那有可能吗？

```
How many calls(X number) came back in between 1 and 20 ms
How many calls(X number) came back in between 20 and 40 ms
How many calls(X number) came back in between 40 and 60 ms
How many calls(X number) came back in between 60 and 80 ms
How many calls(X number) came back in between 80 and 100 ms
How many calls(X number) came back after 100 ms 
```

我最初想到的一些代码。

```
SortedSet<Long> keys = new TreeSet<Long>(map.keySet());
for (Long key : keys) {
    System.out.print(key + " : ");
    for (int i = 0; i < map.get(key); i++) {
                 // Not sure what I am supposed to do here?
    }
    System.out.println();
} 
```

有人能帮我一下吗？

**更新：-**

我的地图样本值-

```
{31=3, 48=1, 33=1, 30=12, 43=1, 38=1, 32=1} 
```

这意味着总调用是`3+1+1+12+1+1+1 = 20`通过`value`从`map`

除此之外，我需要弄清楚上述情况意味着这样的事情

```
How many calls(X number) came back in between 1 and 20 ms
How many calls(X number) came back in between 20 and 40 ms
How many calls(X number) came back in between 40 and 60 ms
How many calls(X number) came back in between 60 and 80 ms
How many calls(X number) came back in between 80 and 100 ms
How many calls(X number) came back after 100 ms 
```

以下是我尝试使用以下建议的代码-

私人静态无效drawHistogram（地图地图）{

```
int counter[] = new int[6];

for (Integer key : map.keySet()) {
    System.out.println("" + key);    

    // add sample
    int idx = key / 20;
    idx = Math.min(idx, counter.length - 1);
    counter[idx]++;
    }

for (int i = 0; i < counter.length; i++) {
    System.out.println(counter[i] + " came back in between " + i * 20 + " and " + (i + 1) * 20
            + " ms");
} 
```

}

如您所见，我打了 20 个电话，但这仅显示 7 个电话。我做错了什么吗？这是我得到的输出-

```
0 came back in between 0 and 20 ms
5 came back in between 20 and 40 ms
2 came back in between 40 and 60 ms
0 came back in between 60 and 80 ms
0 came back in between 80 and 100 ms
0 came back in between 100 and 120 ms 
```

仅显示 7 个电话。但是有20个电话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:08:18.747

```
SortedSet<Long> keys = new TreeSet<Long>(map.keySet());
Map<Long, Long> values = new HashMap<Long, Long>();
Integer total = null;
Integer current = null;
Long point = null;
for (Long key : keys) {
    System.out.print(key + " : ");
    current = map.get(key);
    if(key >= 1 && key <= 20) {
        point = 1;
    } // Do Other Comparisons also and change point 2, 3, 4, 5, 6

    total = values.get(point);
    if(total == null) {
        total = 0;
    }
    total += current;
    values.put(point, total);
    System.out.println();
} 
```

现在如果你循环`keySet`抛出`values`

第 1 点将是`How many calls(X number) came back in between 1 and 20 ms`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:09:44.150

您可以使用 a`NavigableMap`来查询一系列数字（头、尾）。线程安全的实现是`ConcurrentSkipListMap`.

特别看方法`NavigableMap<K,V> headMap(K toKey, boolean inclusive)`，`NavigableMap<K,V> tailMap(K fromKey, boolean inclusive)`和`SortedMap<K,V> subMap(K fromKey, K toKey)`

例子

```
//your existing concurrent map changed to concurrent navigable map
NavigableMap<Long, Long> throughputCounter = new ConcurrentSkipListMap<Long, Long>();
            // this prints for inclusive values - 1 and 20 are both included
            System.out.println("How many calls(X number) came back in between 1 and 20 ms:" + calcThroughput(throughputCounter.subMap(1L, true, 20L, true)));
            System.out.println("How many calls(X number) came back in between 20 and 40 ms:" + calcThroughput(throughputCounter.subMap(20L, true, 40L, true)));
            System.out.println("How many calls(X number) came back in between 40 and 60 ms:" + calcThroughput(throughputCounter.subMap(40L, true, 60L, true)));
            System.out.println("How many calls(X number) came back in between 60 and 80 ms:" + calcThroughput(throughputCounter.subMap(60L, true, 80L, true)));
            System.out.println("How many calls(X number) came back in between 80 and 100 ms:" + calcThroughput(throughputCounter.subMap(80L, true, 100L, true)));
            System.out.println("How many calls(X number) came back in after 100 ms:" + calcThroughput(throughputCounter.tailMap(100L)));

    private Long calcThroughput(NavigableMap<Long, Long> subMap) {
        Long sumOfARange = new Long(0);
        for (Long value : subMap.values()) {
            sumOfARange += value;
        }
        return sumOfARange;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:22:14.513

你根本不需要地图。您可以简单地将时间除以 20 (ms) 并在数组中增加一个计数器。

```
public static void main( String[] args) {
    int counter[] = new int[6];
    for ( int i = 0 ; i < 100 ; i++ ) {
        int time = (int) ( Math.random() * 200 );
        System.out.println( "" + time  );
        // add sample
        int idx = time / 20;
        idx = Math.min( idx, counter.length-1);
        counter[idx]++;
    }

    for ( int i = 0 ; i < counter.length ; i++ ) {
        System.out.println( counter[i] + " came back in between " + i*20 + " and " + (i+1)*20 + " ms" );
    }
} 
```

请注意，最后一个数组元素保存所有样本的数量> = 100ms，因此应该更正输出。省略以使代码尽可能简短和清晰。

示例输出

```
13 came back in between 0 and 20 ms
10 came back in between 20 and 40 ms
13 came back in between 40 and 60 ms
10 came back in between 60 and 80 ms
11 came back in between 80 and 100 ms
43 came back in between 100 and 120 ms 
```

更新：输出应该是

```
for ( int i = 0 ; i < counter.length-1 ; i++ ) {
    System.out.println( counter[i] + " came back in between " + i*20 + " and " + (i+1)*20 + " ms" );
}
System.out.println( counter[counter.length-1] + " came back after 100" ms" ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T06:23:36.760

你可以试试：

```
SortedSet<Long> keys = new TreeSet<Long>(map.keySet());

int group1To20=0;
int group20To40=0;
int group40To60=0;
int group60To80=0;
int group80To100=0;
int groupAbove100=0;
for (Long key : keys) {
 if(key>=0 && key<=20){
  group1To20=group1To20+map.get(key);
  }elseif(key>20 && key<=40){
   group20To40=group20To40+map.get(key);
  }
 //Similarly do as above for other range of group

}//end of loop

System.out.print("group 1-20 contains " +  group1To20);
//Now print the group range and values here

} 
```

我已经尝试过您的解决方案。我可能误解了你的问题。如果是这样，请为我澄清这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T06:52:00.753

预计需要轻松重新定义存储桶大小（实际上是您聚合到的存储桶数量），我建议：

```
 Map<Integer, Integer> values = new HashMap<Integer, Integer>();

    int[] definition = {0, 20, 40, 60, 80, 100};
    int[] buckets = new int[definition.length];

    for (int time : values.keySet()) {
        for (int i=definition.length-1; i>=0; i--) {
            if (time >= definition[i]) {
                buckets[i] += values.get(time);
                break;
            }
        }
    }
    for (int i=0; i<definition.length; i++) {
        String period = "";
        if (i == definition.length-1) {
            period = "greater than " + definition[i] + "ms";
        } else {
            period = "between " +
                      (definition[i]+1) +
                      " and " +
                      definition[i+1] + "ms";
        }
        System.out.println(buckets[i] + " came back " + period);
    } 
```

可配置性是通过更改来管理的`definition`。我使用以下代码对此进行了测试：

```
 Random rnd = new Random();
    for (int i=0; i<1000; i++) {
        int time = rnd.nextInt(121);
        Integer calls = values.get(time);
        if (calls == null) {
            calls = Integer.valueOf(0);
        }
        calls += 1;
        values.put(time, calls);
    } 
```

# c++ - 在自定义库中找不到函数

> ID：14766479
> 
> 赞同：0
> 
> 时间：2013-02-08T05:48:40.193
> 
> 标签：c++, header-files

我有一个测试文件包含的自定义库（和相应的 cpp 文件）。当我尝试在测试文件中调用该函数时，它给了我错误“未定义对 <函数名称> 的引用”。我在将东西放入库文件方面不是很有经验，因此不胜感激。

输入.h

```
#ifndef LOC_H
#define LOC_H
#include<vector>
struct loc{
    int room, row, col;
    char c;
    bool stacked;
    //loc *north, *east, *south, *west;
};
#endif
void Input(std::vector<std::vector<std::vector<loc> > > &b, loc & start); 
```

输入.cpp

```
#include<iostream>
#include<cstdlib>
#include<unistd.h>
#include<getopt.h>
#include "input.h"

using namespace std;

void Input(vector<vector<vector<loc> > > &b, loc & start) {
    //Do stuff
} 
```

测试.cpp

```
#include<iostream>
#include "input.h"
#include<vector>

using namespace std;

int main(int argc, char* argv[]) {
    vector<vector<vector<loc> > > building;
    loc start = {0, 0, 0, '.', false};
    Input(building, start);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:18:48.313

根本不涉及图书馆。您只需在链接时链接所有源文件的目标文件。最简单的方法是从源代码编译它：

```
g++ -o test test.cpp input.cpp 
```

当您有一个较大的项目时，您可能希望单独编译，由 makefile 或脚本控制。

```
g++ -c test.cpp
g++ -c input.cpp
g++ -o test test.o input.o 
```

这看起来有点笨拙，但显示了幕后所做的事情。

# android - Ftp通过android在特定路径上传文件

> ID：14766480
> 
> 赞同：1
> 
> 时间：2013-02-08T05:48:57.390
> 
> 标签：android, upload, path, ftp

```
 f.connect("ftp.drivehq.com",21);
        if(f.login("XXXX", "XXX"))
        {
        f.enterLocalPassiveMode();
        f.setFileType(FTP.BINARY_FILE_TYPE);
        FileInputStream in = new FileInputStream(URL);
        result = f.storeFile(newfile, in);
        in.close();
        f.logout(); 
        f.disconnect();
        }
    It upload fine but not in particular path i also try as ftp://ftp.drivehq.com/myfolder 
```

但它在android未知主机异常中给出错误，比如我需要在特定文件夹中上传文件所以提前感谢帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:20:38.917

您好，请使用以下代码。它对我有用，我已经检查过了。

```
SimpleFTP ftp = new SimpleFTP();

         try
         {
            // Connect to an FTP server on port 21.

            ftp.connect("host", 21, "username", "password");

            // Set binary mode.
            ftp.bin();

            // Change to a new working directory on the FTP server.

            ftp.cwd("/httpdocs/yourdestinationfolderinftp");

            // Upload some files.
            ftp.stor(new File("/mnt/sdcard/ftp.jpg"));              

            // Quit from the FTP server.
            ftp.disconnect();

         }
         catch (Exception e) {
            // TODO: handle exception
             e.printStackTrace();
        }

    } 
```

# c# - 将动态生成的 GridView 放到特定位置 在 ASP.Net C# 中

> ID：14766488
> 
> 赞同：3
> 
> 时间：2013-02-08T05:49:36.477
> 
> 标签：c#, asp.net

我在 C# 文件后面的代码中创建了 gridview。

我想将该网格视图放入特定`<div>`的源文件中。

我生成网格的代码是：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;

public partial class gv1 : System.Web.UI.Page
{
    SqlConnection cn;
    SqlCommand cmd;
    DataSet ds;
    SqlDataAdapter da;

    protected void Page_Load(object sender, EventArgs e)
   {
        cn = new SqlConnection("Data Source=AMIR-PC\\MOHEMMAD;Initial Catalog=CRM_InvestPlus;Integrated Security=True");

   }
   protected void Button1_Click(object sender, EventArgs e)
   {
       cn.Open();
       string query = "select V.Version_Name,S.Software_Name,C.Capacity,V.Price from " +
        "Software_Master S inner join Version_Master V inner join Dealer_License_Capacity C " +
        "on V.Version_ID=C.Version_ID and V.Software_ID=C.Software_ID on " +
        "S.Software_ID=C.Software_ID where C.ID='D00001' and C.Software_ID='001' and C.Version_ID='1'";

    cmd = new SqlCommand(query, cn);
    da = new SqlDataAdapter(cmd);
    ds = new DataSet();
    da.Fill(ds);
    cn.Close();

    GridView gr1 = new GridView();
    Table t = new Table();
    gr1.Controls.Add(t);

    int count = Convert.ToInt32(ds.Tables[0].Rows[0]["Capacity"].ToString());

    for (int i = 0; i < count; i++)
    {

        GridViewRow row = new GridViewRow(i, i, DataControlRowType.DataRow, DataControlRowState.Normal);
        TableCell cell1 = new TableCell();
        TableCell cell2 = new TableCell();
        TableCell cell3 = new TableCell();
        TableCell cell4 = new TableCell();

        TextBox txtPrice = new TextBox();

        FileUpload fl = new FileUpload();
        fl.ID = "fl" + i;

        if (i == 0)
        {
            cell1.Text = ds.Tables[0].Rows[0]["Software_Name"].ToString();
            cell2.Text = ds.Tables[0].Rows[0]["Version_Name"].ToString();
            //cell3.Text = ds.Tables[0].Rows[0]["Price"].ToString();
            cell3.Controls.Add(txtPrice);
        }
        else
        {
            cell1.Text = "";
            cell2.Text = "";
            cell3.Text = "";
        }

        cell4.Controls.Add(fl);

        row.Cells.Add(cell1);
        row.Cells.Add(cell2);
        row.Cells.Add(cell3);
        row.Cells.Add(cell4);

        gr1.Controls[0].Controls.AddAt(i, row);

    }
    form1.Controls.Add(gr1);
   }
} 
```

网格生成成功...

现在我想将网格 gr1 放置到`<div class="block-border">`标记为：

```
 <div class="grid_6">   
        <div class="container_12">
            <div class="block-border"> 
```

怎么可能把 gr1 放在最后`<div>`..???

请帮助
提前谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T06:00:10.233

你需要添加 runat="server" 和一个 id 到你的 div 标签，你可以这样做

```
<div id="block" runat="server" class="block-border">

block.Controls.Add(gr1); 
```

# iphone - 如何自定义 UITableViewCell 而不会在 UITableView 中冻结

> ID：14766490
> 
> 赞同：0
> 
> 时间：2013-02-08T05:49:52.270
> 
> 标签：iphone, ios, uitableview, reuseidentifier

我已经自定义了表格视图单元格，创建了 nib 文件及其对应的 .h 和 .m 文件。一切正常，除了滚动时的缓慢，我怎样才能避免冻结可能是什么问题？

和

```
obj = [self.listData objectAtIndex: [indexPath row]];

if (obj != nil) {

    static NSString *CellIdentifier;

    if (obj->status == status1) {
        CellIdentifier = @"Cell_italic";
    } else if (obj->status == status2) {
        CellIdentifier = @"Cell_cent";
    } else {
        CellIdentifier = @"Cell";
    }

    custom_cell *cell = (custom_cell*) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"custom_cell" owner:self options:nil];
        cell = [nib objectAtIndex:0];

        char file_path[MAX_PATH]; // Holds file path.
        memset(file_path, 0, MAX_PATH);

        // Get path
        // Set Image
        UIImage *cellImage = [UIImage imageWithContentsOfFile:fle_path];

        if (cellImage != nil) {
            [cell.image_view setImage:cellImage];
        } 

        NSString *combined_name = [NSString stringWithCString:obj->combined_name encoding:NSASCIIStringEncoding];
        NSString *email = [NSString stringWithCString:obj->email encoding:NSASCIIStringEncoding];

        // Set name
        if (obj->status == status1)
        {
            cell.name_label.text = combined_name;

            cell.name_label.font = [UIFont fontWithName:@"Georgia-Italic" size:18];
            cell.email_label.text = email;

            cell.selectionStyle = UITableViewCellSelectionStyleNone;

            return cell;
        }

        . . .
        . . .

} 
```

dequeueReusableCellWithIdentifier 总是返回 nil，对吗？如果没有自定义，我已经多次看到它不是 nil，现在它总是返回 nil。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:57:52.560

每次都加载图像，这就是为什么表格滚动冻结的原因，`UITableView`您可以通过多种方式实现延迟加载，请参考下面的链接和演示可能会对您有所帮助：-

[https://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

[https://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage) `//README Section says,how to use it in your app.`

[https://github.com/nicklockwood/AsyncImageView/](https://github.com/nicklockwood/AsyncImageView/)

您还可以使用 UI 线程在后台进程中加载​​图像

```
dispatch_queue_t backgroundQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
dispatch_queue_t mainQueue = dispatch_get_main_queue();
dispatch_async(backgroundQueue,^{
  // background process
  image = [NSData dataWithContentsOfFile:imageName];
  dispatch_async(mainQueue,^{
    // always update GUI from the main thread
    // uiimageview.image = image.... etc
 });
}); 
```

# opengl - OpenGL顶点属性重用

> ID：14766491
> 
> 赞同：2
> 
> 时间：2013-02-08T05:50:12.673
> 
> 标签：opengl, shader, vbo

在默认的网格顶点构造中，我们这样做。

```
//v = vertex, p = position, c = color
buffer = { v0 , p0, c0,
           v1 , p0, c0,
           v2 , p0, c0  }; 
```

我们有一个三角形。但我想重用这样的明显属性：

```
//p and c are the same for all vertexes
buffer = { v0, p0, c0 ,
           v1, 
           v2 }; 
```

我们可以在着色器上使用统一的值来做到这一点，但我将在同一个缓冲区上渲染数千个具有不同位置的三角形：

```
buffer = { v0, p0, c0 ,
           v1, 
           v2,
           v3, p1, c1,
           v4,
           v5, 
           v6, p2, c2,
           ...}; 
```

我现在的解决方案是：

1）像第一个例子一样发送每个顶点的属性副本（不想，但可能是最好的解决方案）。

2）发送索引属性（用于搜索）和位置/颜色的统一数组（统一大小限制问题？）

3) 最佳解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T11:00:45.090

> ```
> //p and c are the same for all vertexes 
> ```

不，他们不是。在您的情况下，顶点是 v、p 和 c 的整体组合。改变其中一个，你得到一个完全不同的顶点。常见的误解，但这就是它的工作原理

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T11:04:19.513

假设您不在古老的硬件上，并且顶点内存并不是那么重要，只需复制数据并为每个顶点保留完整的属性集。肯定不会慢。

以这种方式“重用”数据通常会导致性能下降，因为 GPU 无法优化数据访问；它必须做你想做的复杂事情。

# android - Facebook Graph API 与喜欢的帖子不同

> ID：14766499
> 
> 赞同：1
> 
> 时间：2013-02-08T05:50:37.807
> 
> 标签：android, facebook, facebook-graph-api

我的应用程序中有一个方法允许用户“喜欢”他/她的新闻提要中的帖子。它是通过一个简单的图形请求使用`HttpMethod.POST`. 但是，当我尝试使用 执行“不同”操作`HttpMethod.DELETE`时，我收到一个错误回调：

```
02-08 00:35:57.298: I/Detail(2628): {Response:  responseCode: 403, graphObject: null, error: 
{HttpStatus: 403, errorCode: 200, errorType: OAuthException, errorMessage: (#200) 
Feed story publishing to other users is disabled for this application}, isFromCache:false} 
```

现在我认为这与最近尝试让所有与 Facebook 集成的应用程序使用所有 Facebook 外观对话框和样式有关，但我可能是错的。这是让我怀疑的[路线图帖子：](https://developers.facebook.com/roadmap/completed-changes/)

> 删除通过 Graph API 向朋友墙发帖的功能 我们将删除通过 Graph API 向用户朋友墙发帖的功能。具体来说，针对 [user_id]/feed 的 [user_id] 与会话用户不同的帖子，或 target_id 用户与会话用户不同的 stream.publish 调用将失败。如果您想允许人们发布到他们朋友的时间线，请调用提要对话框。通过用户提及标签或动作标签包含朋友的故事将显示在朋友的时间线上（假设朋友批准标签）。有关详细信息，请参阅此博客文章。

关于我可能做错了什么的任何想法，或者 Facebook 只是毁了我？谢谢！

编辑：这是我用来运行请求的代码。

```
Request likeRequest = new Request(Utility.fbSession, null, null, null, new Request.Callback() {
    @Override
    public void onCompleted(Response response) {
        String responseString = response.toString();
        Log.i("Detail", responseString);
        updateDetail();
    }
});
HttpMethod nextLikeCall = HttpMethod.DELETE;
likeRequest.setHttpMethod(nextLikeCall);
likeRequest.setGraphPath(itemId+"/likes");
likeRequest.executeAsync(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:08:39.700

当您从图表数据中获取帖子 ID 时，它应该采用如下格式：XXXXX_YYYYY。XXXXXX 只是用户 ID，而 YYYYY 是实际的帖子 ID。您需要做的是仅提取并使用图表为您提供的帖子 ID 的 YYYYY 部分。所以你想发送graph.facebook.com/YYYYY/likes而不是graph.facebook.com/XXXXX_YYYYY/likes。这将适用于喜欢和不喜欢，您可以先在图形资源管理器中进行测试，然后再将子字符串提取方法组合在一起。

不知道如何在 Android 上提取字符串的一部分，但我知道在 Objective-C/iOS 中，可以这样做（代码未经测试，供参考/想法）：

```
SString *actualPostIdStr;      //The String we will put the actual postId in
NSString *oldIdStr          =   //<the string in format XXXXX_YYYYY>
NSInteger charCount         =   [oldIdStr length]; //get the length of the original XXXXX_YYYYY string
NSRange fRangeCount         =   [oldIdStr rangeOfString:@"_"]; //get count of characters to remove (XXXXXX)

if (fRangeCount.location != NSNotFound){
    NSInteger startingPos   =   fRangeCount.location + 1; //get the starting character position of the actual postId
    actualPostIdStr         =   [[oldIdStr substringWithRange:NSMakeRange(startingPos, charCount - startingPos)] copy];
} 
```

希望这可以帮助。

编辑：
好的，所以我整天都在玩喜欢...似乎这种方法有时不起作用，但这完全取决于您尝试喜欢/不喜欢的图形对象的类型。例如......普通的状态帖子，这种方法非常有效。但是，我在尝试为带有消息/故事帖子对象的照片点赞时遇到了问题。事实证明，在这种带有照片的帖子对象的图表数据中，除了状态帖子图表数据中的普通“id”之外，还有一个名为“object_id”的附加参数。在这种情况下，对于照片和故事帖子，您需要传递“object_id”，不变以成功取消喜欢。

这种混乱似乎要么是 FB 端的错误，要么他们正在进行更改并禁止来自 graph api 的喜欢/不喜欢 & 只是忘记/还没有告诉我们:) 希望是前者。同时，您只需要使用我上面的答案，但只需确保您使用可以找到的尽可能多的不同类型的帖子对象进行测试，并在不同的 id （“id”的一部分）时使用 if 条件...“object_id”...等）是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T20:48:45.467

有时*Daniel McCarthy*的方法行不通。在这种情况下，我们需要获取 Graph API 请求 XXX_YYYY，找到字段**object_id**与此 object_id 不同。

# python - 在类方法中无法访问类数据属性

> ID：14766501
> 
> 赞同：-1
> 
> 时间：2013-02-08T05:50:42.097
> 
> 标签：python

我编写了一个小程序，它将打印我指定的路径内的所有文件和目录。源代码是：

```
import os
import glob

class FolderStats:
    targetdir = ""

    def __init__(self, dirpath = None):
        targetdir = dirpath
        totalfiles = 0
        totalsubfolders = 0

    def FolderIterator(self):
        print self.targetdir
        listing = os.listdir(self.targetdir)
        for infile in listing:
            print "current file is: %s" % (infile)

if __name__ == '__main__':
    Obj = FolderStats(raw_input('Enter your path: '))
    Obj.FolderIterator() 
```

上面的代码没有执行。我在方法中遇到错误`FolderIterator`：执行打印命令时，它什么也不打印。`<targetdir>`不再包含我提供的路径。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:53:05.197

在你的`__init__`你需要使用`self.targetdir`而不是`targetdir`

```
>>> class Test:
    var = 1
    def __init__(self):
        var = 2         
        print self.var  # Object variable
        print var       # Local variable
    def func(self):
        print self.var
        print var       # this will fail, because there's no local var in this scope

>>> a = Test()
1
2
>>> a.func()
1

Traceback (most recent call last):
  File "<pyshell#12>", line 1, in <module>
    a.func()
  File "<pyshell#10>", line 9, in func
    print var
NameError: global name 'var' is not defined 
```

# html - 使用 winjs 将 webview 捕获为图像快照

> ID：14766505
> 
> 赞同：3
> 
> 时间：2013-02-08T05:50:58.240
> 
> 标签：html, winjs, snapshot

我在 HTML 正文中有以下代码，其中包含 div 元素中的几个图像。我想捕获整个看到的，因为它在 webview 上可见。

```
 <div data-win-control="SdkSample.ScenarioOutput" id="grid">
  <img id ="Img0" src="/images/0.png" class="GestureTile"/>
  <img id ="Img1" src="/images/1.png" class="GestureTile"/>
  <img id ="Img2" src="/images/2.png" class="GestureTile"/>
  <img id ="Img3" src="/images/3.png" class="GestureTile"/>
  <img id ="Img4" src="/images/4.png" class="GestureTile"/>
  <img id ="Img5" src="/images/5.png" class="GestureTile"/>
  <img id ="Img6" src="/images/6.png" class="GestureTile"/>
  <img id ="Img7" src="/images/7.png" class="GestureTile"/>
  <img id ="Img8" src="/images/8.png" class="GestureTile"/>
  <img id ="Img9" src="/images/9.png" class="GestureTile"/>
 </div> 
```

是否可以通过winjs直接捕获或者我应该采用其他方式？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T19:26:01.730

我知道这个话题有点老了，但是从 8.1 开始，您可以[将 webview 内容作为 Blob 获取](http://msdn.microsoft.com/en-us/library/windows/apps/dn301835.aspx)，然后对它进行任何您需要的操作（将其发送到服务器，创建数据 URI 并将其放入`<img>`. ..

```
myWebview.capturePreviewToBlobAsync().done(
    function(imgBlob) {
        // do whatever you need to with the Blob
    },
    function(err) {
        // handle errors... not sure what you might get here, honestly
    }
); 
```

我还没有实现这个，所以我不能说是否有任何问题。

**更新**

所以我尝试实现上述内容，这就是它在文档中所说的，但它对我不起作用。我要离开它，因为下面的评论者说它对他们有用。对我来说，我不得不改用下面的代码，因为该`capturePreviewToBlobAsync`方法没有返回承诺。不知道为什么...

```
var myWebView = document.getElementById("theWebviewToCapture");
var captureOperation = myWebView.capturePreviewToBlobAsync();
captureOperation.addEventListener("complete", function (e) {
    var inputStream = e.target.result.msDetachStream();
    // Now you could copy that input stream to a file stream or whatever...
});
captureOperation.start(); 
```

查看[此页面上的示例](http://blogs.windows.com/windows/b/appbuilder/archive/2013/07/17/what-s-new-in-webview-in-windows-8-1.aspx)（搜索“capturePreviewToBlobAsync”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T15:56:17.763

据我所知（我很乐意听到其他消息），唯一可以捕捉到的是画布的内容。我认为您无法捕获呈现的 HTML。对不起。

# javascript - for-loop 卡在同一个数字上

> ID：14766515
> 
> 赞同：0
> 
> 时间：2013-02-08T05:52:29.140
> 
> 标签：javascript

下面的循环为 i=0 运行一次，然后无限期地为 i=1 运行到浏览器崩溃中，即 i 不递增：

```
cascadeComponent: function(item, fn, scope) {
    if (fn.call(scope || this, item) !== false) {
        if (item.items) {
            for (i = 0; i < item.items.items.length; i++) {
                this.cascadeComponent(item.items.items[i], fn, scope);
            }
        }
    }
} 
```

我可以通过使用框架迭代循环来避免这个问题。或者，我有相同的循环，但在 item.items 与 item.items.items 中发现数组的细微差别。

任何想法为什么会发生这种情况？在 Chrome 和 Firefox 中也是如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T05:56:07.897

您正在使用全局`i`变量。在函数的开头添加这一行：

```
var i; 
```

否则，对于 的所有调用，每个递归调用都将重置`i`为 0 `cascadeComponent`。

# sql - 使用 Openquery 链接服务器更新表

> ID：14766520
> 
> 赞同：5
> 
> 时间：2013-02-08T05:52:41.527
> 
> 标签：sql, sql-server, sql-server-2008, tsql, openquery

我已经尝试过这段代码，但仍然出现以下错误，也许有人可以帮忙？

```
UPDATE a 
SET    a.MMDWNO = '21'
FROM   OPENQUERY(NMIIFLIB,
       'select * from MVXCDTANSN.MITMAS WHERE MMITTY = ''25''') a 
```

错误 ：

> 链接服务器“NMIIFLIB”的 OLE DB 提供程序“MSDASQL”返回消息“[IBM][iSeries Access ODBC 驱动程序][DB2 UDB]SQL7008 - MVXCDTANSN 中的 MITMAS 对操作无效。”。
> 消息 7343，级别 16，状态 4，第 1 行
> 链接服务器“NMIIFLIB”的 OLE DB 提供程序“MSDASQL”无法更新表“[MSDASQL]”。

选择语句工作正常，但是当我尝试更新时，我总是坚持这一点。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T06:49:54.330

如果您尝试更新链接服务器上的表，请尝试以下语法：

```
UPDATE OPENQUERY(NMIIFLIB, 'select * from MVXCDTANSN.MITMAS where MMITTY = ''25''')
SET MMDWNO = 21 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2015-01-10T20:01:53.233

你必须试试这个。希望这会帮助你。

```
UPDATE OPENQUERY(firstlink, 'select * from job.dbo.student where id = ''3''') 
    SET name = 'sanjeev acharya' 
```

# dataset - 我需要从文件中提取三列

> ID：14766521
> 
> 赞同：1
> 
> 时间：2013-02-08T05:52:43.813
> 
> 标签：dataset, text-files, extract

我正在做一个关联规则挖掘项目。对于我的数据集，我需要从文本文件中提取三列。

这是文本[文件](http://dl.dropbox.com/u/59650664/project.txt)的链接。

我需要提取 Billno、Product 和 Batch 列并将它们写入文本文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T05:59:15.533

最简单的方法是使用 grep [http://www.dreamincode.net/forums/topic/290545-using-a-grep-command-in-ac-program-in-linux/](http://www.dreamincode.net/forums/topic/290545-using-a-grep-command-in-a-c-program-in-linux/)

否则，该数据是一致的，所有的账单号码都是相同的长度，并且似乎很容易正则表达式 [http://www.cplusplus.com/reference/regex/](http://www.cplusplus.com/reference/regex/)

# python - 无法访问 python 全局变量（真的很奇怪）

> ID：14766522
> 
> 赞同：0
> 
> 时间：2013-02-08T05:52:44.580
> 
> 标签：python, global

因此，这是正在发生的事情的简化版本

```
x = []

def test():
    return x

def init():
    x.append('blah') 
```

问题： init() 函数在单独的文件中运行并正确更新全局变量 x。但是在运行 test() 函数之后，我总是会得到 [] 而不是 ['blah'] 的值。但这就是奇怪的地方。如果我要运行这个函数（whatever_file.py 是这些函数存储位置的名称）：

```
x = []

def test():
    from whatever_file import x
    return x

def init():
    x.append('blah') 
```

这工作正常。我会得到 ['blah'] 的回报。我尝试将 global x 放入 init 和 test 函数中也无济于事。我不知道发生了什么事

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T06:08:58.427

Python 的全局变量并不是真正的全局变量。每个模块都有自己的全局变量，因此您存储的变量在其他模块的全局变量中不可见。

要将值存储在另一个模块的命名空间中，只需直接在模块对象上设置属性：

```
import math

def store(x):
    math.x = x 
```

# ios - iPad相机弹出框预览错误的旋转和缩放

> ID：14766523
> 
> 赞同：0
> 
> 时间：2013-02-08T05:52:48.383
> 
> 标签：ios, objective-c, ipad, uipopovercontroller

我在弹出窗口中显示相机（在 iPad 上 - iPad 应用程序被锁定到 Lanscape Left）并且预览是纵向的并且比例错误。代码如下 - 我已经计算出旋转并添加了它，但现在预览尺寸太薄了。

```
 UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

   if ([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeCamera])
   {
    imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
    imagePicker.videoQuality = UIImagePickerControllerQualityTypeMedium;
    imagePicker.mediaTypes = [UIImagePickerController availableMediaTypesForSourceType:UIImagePickerControllerSourceTypeCamera];

    CGAffineTransform transformRotation = CGAffineTransformMakeRotation(270 * M_PI/180);

    imagePicker.cameraViewTransform = transformRotation;
    }
    else
    {
       NSLog(@"Camera not available. Using photo library");
       imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
    }

     imagePicker.delegate = self;
     _photoPopover = [[UIPopoverController alloc] initWithContentViewController:imagePicker];
     [_photoPopover presentPopoverFromRect:view.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:12:41.490

原来是 iOS 6.0 处理旋转方式的问题——它在 6.1 中修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:57:22.273

我认为这是您问题的解决方案，因此您可以按照下面提供的链接遵循代码。

[横向 UIImagePickerController](https://stackoverflow.com/questions/2083672/uiimagepickercontroller-in-landscape)

它将对您有很大帮助。享受编码。

# codeigniter - 从动态创建的表行将值发布到控制器

> ID：14766524
> 
> 赞同：0
> 
> 时间：2013-02-08T05:52:53.840
> 
> 标签：codeigniter

我正在为一个项目使用 codeigniter。

我有一个通过 jquery append 动态添加行的表。

因此，当我单击按钮提交时，它会将所有行值的值发布到控制器，但我不知道该怎么做。

我的表格行是这样的

```
<td>
  <input type="text" class="createWOBlockBG large ui-autocomplete-input" name="basefabrics" id="basefabrics1" autocomplete="off"> 
</td> 
```

我不想使用 ajax 调用。如何将视图中的许多输入传递给控制器​​？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:58:15.623

如果您`table with rows`和如前所述的提交按钮位于表单内，
则将表单的属性指定`action`给要访问您的值的控制器

在控制器中，您可以获得如下值

```
$value = $this->input->post('name_of_your_input'); 
```

考虑您的意见

```
$base_fabrics = $this->input->post('basefabrics'); 
```

如果您的表单操作正在调用加载视图的相同控制器方法，您可以检查提交按钮的点击，然后获取值

```
if ($this->input->post('name_of_submit_btn'))
{
    $base_fabrics = $this->input->post('basefabrics');
} 
```

**编辑**：如果您的所有输入都具有相同的名称，那么最好将其命名为`name="basefabrics[]"`
这样当您获取值时

```
$base_fabrics = $this->input->post('basefabrics'); 
```

`$base_fabrics`将是一个数组

# c++ - 堆栈数据结构作为模板：主要方法不识别堆栈中的方法

> ID：14766528
> 
> 赞同：0
> 
> 时间：2013-02-08T05:53:06.573
> 
> 标签：c++, visual-studio-2010, stack

请看下面的代码，

**堆栈.h**

```
template <typename T>

class Stack
{
public:
    Stack(int number)
    {
        maxSize = number;
        top = -1;
        stackData = new T*[maxSize];
    }

    ~Stack()
    {
        delete [] stackData;
    }

    int count()
    {

    }

    bool isEmpty()
    {
        if(top==-1)
        {
            return true;
        }
        else
        {
            return false;
        }
    }

    bool isFull()
    {
        if(top== (maxSize-1))
        {
            return true;
        }
        else
        {
            return false;
        }
    }

    *T pop()
    {
        if(!isEmpty())
        {
            return stackData[top--]; // Remove Item From Stack
        }
    }

    *T peek()
    {
        T *peekData =  &stackData[top];
        return peekData;
    }

    void push(T *pushValue)
    {
        if(!isFull())
        {
            stackData[++top] = pushValue;
        }
    }

private:
    int maxSize;
    T ** stackData;
    int top;
}; 
```

**主文件**

```
#include <iostream>
#include "Stack.h"
#include <iostream>

using namespace std;

int main()
{
    int i = 0;

    Stack<double> doubleStack(5);
    double doubleValue = 1.1;

    cout << "pushing elements into the stack" << endl;

    while(i<5)
    {
        doubleStack.push();
    }

    system("pause");
    return 0;
} 
```

当我运行此代码时，我收到以下错误。

```
1>------ Build started: Project: CourseWork2, Configuration: Debug Win32 ------
1>  Main.cpp
1>c:\users\yohan\documents\visual studio 2010\projects\coursework2\coursework2\stack.h(48): error C2146: syntax error : missing ';' before identifier 'pop'
1>          c:\users\yohan\documents\visual studio 2010\projects\coursework2\coursework2\stack.h(74) : see reference to class template instantiation 'Stack<T>' being compiled
1>c:\users\yohan\documents\visual studio 2010\projects\coursework2\coursework2\stack.h(48): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\yohan\documents\visual studio 2010\projects\coursework2\coursework2\stack.h(49): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\yohan\documents\visual studio 2010\projects\coursework2\coursework2\stack.h(54): warning C4183: 'pop': missing return type; assumed to be a member function returning 'int'
1>c:\users\yohan\documents\visual studio 2010\projects\coursework2\coursework2\stack.h(56): error C2146: syntax error : missing ';' before identifier 'peek'
1>c:\users\yohan\documents\visual studio 2010\projects\coursework2\coursework2\stack.h(56): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\yohan\documents\visual studio 2010\projects\coursework2\coursework2\stack.h(57): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\yohan\documents\visual studio 2010\projects\coursework2\coursework2\stack.h(60): warning C4183: 'peek': missing return type; assumed to be a member function returning 'int'
1>c:\users\yohan\documents\visual studio 2010\projects\coursework2\coursework2\stack.h(48): error C2146: syntax error : missing ';' before identifier 'pop'
1>          c:\users\yohan\documents\visual studio 2010\projects\coursework2\coursework2\main.cpp(11) : see reference to class template instantiation 'Stack<T>' being compiled
1>          with
1>          [
1>              T=double
1>          ]
1>c:\users\yohan\documents\visual studio 2010\projects\coursework2\coursework2\stack.h(48): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\yohan\documents\visual studio 2010\projects\coursework2\coursework2\stack.h(49): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\yohan\documents\visual studio 2010\projects\coursework2\coursework2\stack.h(49): warning C4183: 'pop': missing return type; assumed to be a member function returning 'int'
1>c:\users\yohan\documents\visual studio 2010\projects\coursework2\coursework2\stack.h(56): error C2146: syntax error : missing ';' before identifier 'peek'
1>c:\users\yohan\documents\visual studio 2010\projects\coursework2\coursework2\stack.h(56): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\yohan\documents\visual studio 2010\projects\coursework2\coursework2\stack.h(57): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>c:\users\yohan\documents\visual studio 2010\projects\coursework2\coursework2\stack.h(57): warning C4183: 'peek': missing return type; assumed to be a member function returning 'int'
1>c:\users\yohan\documents\visual studio 2010\projects\coursework2\coursework2\main.cpp(18): error C2660: 'Stack<T>::push' : function does not take 0 arguments
1>          with
1>          [
1>              T=double
1>          ]
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

Intellelisense 不识别除 isFull()、count() 和 isEmpty() 之外的任何方法。因为这个，我无法编写其余的代码！

为什么是这样？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T05:55:45.617

你把星号放在错误的位置。它应该是：

```
T *pop() {
    //implementation
} 
```

和

```
T *peek() {
    //implementation
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T05:55:52.607

您`*`在函数语法中放错了位置：

更新：

```
 *T pop()
 *T peek() 
```

到：

```
 T* pop()
 T* peek() 
```

# c - getopt_long_only() 不工作

> ID：14766530
> 
> 赞同：0
> 
> 时间：2013-02-08T05:53:36.783
> 
> 标签：c, getopt-long

我需要检查以下参数：

```
 ./centro -n CD1 –cp 100000 –i 100000 –t 30 –s 1000 –p 11111 
```

他们可以按任何顺序出现。我有以下代码：

```
void checkParameters (int argc, char** argv, center_data* info) {

    int opt = 0;

    const char* const short_options = "n:i:t:s:p:a:";

    static struct option long_options[] = {
                    {"cp", 1, NULL, 'a'},
                    {0, 0 , 0, 0}
    };

    if(argc != 13)
            error("Error en numero de argumentos \n");

    while(opt != -1){

        opt = getopt_long_only(argc, argv, short_options, long_options, NULL);

        switch (opt){   

            case 'n':
                strcpy(info->center_name, optarg);
                break;

            case 'a':
                printf("el optgar %s \n", optarg);
                info->cap_max = atoi(optarg);
                if (!(38000 <= info->cap_max && info->cap_max <= 3800000))
                    error("Error en la capacidad maxima del centro. \n");

                break;

            case 'i':
                printf("el optgar %s \n", optarg);
                info->stock = atoi(optarg);
                break;

            case 't':
                printf("el optgar %s \n", optarg);
                info->response_time = atoi(optarg);
                if (!(0 <= info->response_time && info->response_time <= 180))
                    error("Error en el tiempo de respuesta \n");

                break;

            case 's':
                printf("el optgar %s \n", optarg);
                info->supply = atoi(optarg);
                if(!(0 <= info->supply && info->supply <= 10000))
                    error("Error en la cantidad de suministro \n");

                break;

            case 'p':
                printf("el optgar %s \n", optarg);
                info->port = atoi(optarg);
                if (0 <= info->port && info->port <=1023)
                    error("Error: se esta utilizando un puerto bien conocido");

                break;

            case -1:
                printf("caso -1\n");
                break;

            default:
                printf("caso default\n");
                abort();
        }
    }

    if (!(0 <= info->stock && info->stock <= info->cap_max))
        error("Error en el inventario actual de la bomba \n");
} 
```

问题是，它首先进入 n 案例，然后是 -1 并退出。这没有任何意义。我看不到使用 getopt_long_only 的错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T07:22:49.013

请注意以下中破折号的不同长度：

```
./centro -n CD1 –cp 100000 –i 100000 –t 30 –s 1000 –p 11111 
```

第一个是*减号*。其他的更长。那就是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T07:51:51.150

先生，您没有对所有论点使用减号

试试这个命令：

```
./centro -a 100 -n 100000 -i 100000 -t 30 -s 1000 -p 11111 
```

顺便说一句，你能告诉我们它是哪个字符吗，我在我的键盘上找不到任何这样的字符。

# c - 将双指针和指针传递给函数时出现分段错误

> ID：14766531
> 
> 赞同：1
> 
> 时间：2013-02-08T05:53:38.397
> 
> 标签：c, pointers, singly-linked-list

当我做：

```
t_node *node1;
t_node **head;
void *elem;
int c = 1;

elem = &c;
head = NULL;
node1 = malloc(sizeof(t_node));
node1->elem = elem;
head = &node1;
//add_node(node1,head); //substitute this with line above and it doesn't work
printf("%d\n",*(int*)(*head)->elem); // prints 1 and works fine 
```

但是当我创建一个名为 ADD_NODE 的函数时它不起作用？！？？！？

```
void add_node(t_node *node1, t_node **head){
   head = &node1;
} 
```

这对我来说没有任何意义......为什么这会导致它不起作用？从字面上调用该函数会执行相同的代码。

编辑：请记住 add_node 的签名没有问题。我必须有那个签名

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T06:14:25.227

在对函数的调用中，参数的作用域仅属于该函数，因此您对“head = &node1”的赋值对函数外部的变量没有影响。

要影响您传入的变量，您必须传递变量的地址。例如：

```
void add_node(t_node **node1, t_node ***head){
   *head = node1;
} 
```

电话是：

```
add_node(&node1, &head); 
```

请注意，您必须取消引用函数中的“head”指针，以便使用“node1”值更新“head”处的值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T06:04:34.317

C 是一种按值传递的语言。就相关而言，您的函数实际上根本没有做任何事情`main()`。

在 comp.lang.c FAQ 中查看[这个问题。](http://c-faq.com/ptrs/passptrinit.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T06:13:04.457

在“C”中，变量是通过引用传递的，因此要更改函数调用中的值，您应该将指针传递给变量。

正确的步骤是 -

void add_node(t_node **node1, t_node ***head){ *head = node1; }

# c++ - 如何设置数据结构以有效地从 Pod 中删除 Monkey？

> ID：14766532
> 
> 赞同：1
> 
> 时间：2013-02-08T05:53:46.177
> 
> 标签：c++

在我的 C++ 应用程序中，我有一些`Pod`对象在内部将有关`Monkey`s 的信息存储在向量中。`MonkeyInternal`是一个大类，有很多关于猴子的属性……

我这里的意图是创建一个轻量级代理对象`Monkey`，它只存储一个索引，该索引可用于访问存储在私有向量中的更多信息`Pod`（猴子是反复无常的，它们的属性可能会改变，我们希望程序中的任何猴子对象始终保持最新状态。）。

```
class Pod {
  public:
    typedef Monkey monkey_type;

    Monkey monkey(int monkey_index) {
      return Monkey(this, monkey_index);
    }

    // Lightweight proxy Monkey object that can be passed around easily.
    class Monkey {
      public:
        Monkey(Pod* pod, int monkey_index) {
          pod_ = pod;
          monkey_index_ = monkey_index;
        }
      private:
        Pod* pod_;
        int monkey_index_; // To get monkey internal info, index into pod.
        friend class Pod; // Monkey is a proxy that delegates to Pod.
    }

  private:
    // MonkeyInternal objects stores hefty data about monkeys.
    vector<MonkeyInternal> monkeys_;
} 
```

通过这些数据结构，我可以很容易地随机访问猴子的内部信息。我还可以轻松地将另一只猴子有效地插入 pod（O(1) 摊销）。

然而，移除一只猴子是 O(n)，因为我必须把所有的猴子都移到左边。我可以通过使用`unordered_map`（或一些好的哈希表）-O(n) 来稍微提高移除效率，但是有什么方法可以组织我的数据结构以支持 O(1) 移除猴子？

也许我可以使用一个聪明的设计模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:16:44.283

你的 Monkey 类实际上是一个智能指针——让它在语法上表现得像一个指针可能会很好，这样用户就可以对他们正在处理的内容拥有正确的心理模型。

至于删除，我假设您要删除按值存储在向量中的 MonkeyInternal？如果复制 MonkeyInternal 的成本很高，那么最好的保存方法是在向量​​中存储一些便宜的东西，比如 MonkeyInternal*。

一旦你沿着这条路线走下去，你可能会发现用 std::shared_ptr 之类的东西替换你的 Monkey 类型会更好，然后就完成了。

顺便说一句，只要副本便宜，线性内存访问就非常便宜，因为 CPU 内存预测可以很好地计算出正在发生的事情。如果您必须追逐指针，这将分崩离析，因此您可能会发现 std::vector 比 std::list 快，即使它在技术上是 O(n) 而不是 O(1) 用于插入和删除。

# javascript - 使用 grunt 运行 2 个异步任务

> ID：14766538
> 
> 赞同：11
> 
> 时间：2013-02-08T05:54:39.310
> 
> 标签：javascript, node.js, coffeescript, gruntjs

我正在开发一个小型节点项目，我使用咖啡脚本而不是客户端代码。我正在尝试使用 grunt 设置我的开发环境。我已经为运行服务器实现了自定义 grunt 任务，如下所示：

```
start = require './start' #just a function to start express.js application
grunt.registerTask 'server', 'Starting server', ->
    grunt.log.write 'Preparing server to start'
    done = do @async
    start (err) ->
        grunt.log.write "server running at localhost:4000" 
```

我还想使用 grunt-contrib-watch 插件运行“watch”任务：

```
grunt.initConfig
    watch:
        coffee:
            files: ['public/coffee/**/*.coffee']
            tasks: ['coffee']
        jade:
            files: ['public/jade/**/*.jade']
            tasks: ['jade']
        less:
            files: ['public/less/**/*.less']
            tasks: ['less'] 
```

问题是：如何让这两个任务（watch 和 server）同时运行？我想让服务器启动并运行，并且不想在每次更改某些客户端代码时重新加载它。提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-23T07:46:30.703

您可以使用以下两个包中的任何一个同时运行两个或多个任务：

1.  [咕噜并行](https://github.com/iammerrick/grunt-parallel)
2.  [咕噜并发](https://github.com/sindresorhus/grunt-concurrent)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-09T15:55:08.403

将其添加到您的监视任务中，并摆脱`done = do @async`服务器任务的内部。

`tasks: ['server', 'coffee']`

您想在 Grunt 配置中为服务器任务指定一个选项是否“长时间运行”。`@async`然后，只有在需要长时间运行（没有监视任务）时才可以调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-17T19:34:26.710

我遇到了同样的问题，即无法从 grunt 任务中同时启动监视和连接服务器。

为了解决这个问题，我在 Gruntfile 中使用 grunt-exec 将服务器作为后台进程启动

末尾的和号 (&)`grunt connect:preview &`将服务器作为后台进程启动。

```
,exec: {
  start_server: {
    command: 'grunt connect:preview &'
  }
} 
```

然后像这样注册 grunt 任务

```
grunt.registerTask('preview', ['clean:preview', 'template', 'exec', 'watch' ]); 
```

必须有更好的方法来做到这一点，但到目前为止，这是我能想到的最好的方法。

# php - 如何显示类别及其子类别

> ID：14766539
> 
> 赞同：3
> 
> 时间：2013-02-08T05:54:44.723
> 
> 标签：php, codeigniter

我有这样的桌子

```
cat:
----
cat_id    name
---------------
1        cat-1
2        cat-2 

sub-cat:
--------

id    cat_id    name
-------------------------
1       1       sub-cat-1
2       1       sub-cat-2
3       2       sub-cat-3
4       2       sub-cat-4 
```

我需要像使用 PHP 这样的输出

```
cat-1
 sub-cat-1
 sub-cat-2
cat-2
 sub-cat-3
 sub-cat-4 
```

我的查询是

```
SELECT * FROM `cat` 
        JOIN `sub-cat`  ON cat.cat_id = sub-cat.cat_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:00:55.643

你可以使用这个代码

```
$sql = mysqli_query("SELECT * FROM `cat` ");
while($row = mysqli_fetch_array($sql))
{
   echo "cat ".$row['name'];
   $sql1 = mysqli_query("SELECT * FROM `sub-cat` where id = ".$row['cat_id']);
   while($row1 = mysqli_fetch_array($sql1))
   {
        echo "sub-cat ".$row1['name'];
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T06:03:06.207

使用下面的代码

```
function tree($pid='',$new_ar=array())
{
if($pid!="")
{
    $new_ar1=array();
    $sel="select name from subcat where cat_id=".$pid." order by cat_id";
    $mq=mysql_query($sel);
    while($fe=mysql_fetch_assoc($mq))
    {
        array_push($new_ar1,$fe["name"]);
    }
    return $new_ar1;
}
else
{
    $sel="select name from cat order by name";
    $mq=mysql_query($sel);
    while($fe=mysql_fetch_assoc($mq))
    {
        array_push($new_ar,$fe["name"]);

        $new_ar[$fe["name"]]=array();

        array_push($new_ar[$fe["name"]],tree($fe["name"],$new_ar));

    }
}
//die($sel);
//echo "<pre>";
//print_r($new_ar);
//echo "<pre>";
    return $new_ar;
} 
```

调用函数

```
tree(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T06:48:37.450

我最终得到了这段代码`smarty`

```
{assign var=foo value=''}

{foreach from=$blog_lists key=k item=blog }
          {if $foo neq $blog ->category_id}
              {$blog->category_name}<br />
              {assign var=foo value=$blog->category_id}
          {/if}

          {$blog->subcat_name}<br />

{/foreach} 
```

# c# - 在 C# 对象数组中搜索最接近的浮点值

> ID：14766542
> 
> 赞同：0
> 
> 时间：2013-02-08T05:54:54.283
> 
> 标签：c#, arrays, search, object

所以我有一个对象数组，每个对象都有一个名为 value....

例如，如果我提供一个 25 的值并且我在 5 的范围内搜索（25 和最接近的值之间的差异小于 5），我有这个：

```
array[0].value = 16
array[1].value = 19
array[2].value = 22 
```

然后它会执行一些我想要的代码。

有什么简单的方法可以解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T06:06:19.037

假设这`X`是数组中对象的类。

```
public void WhenInRange(IEumerable<X> array, int value, int delta, Action<X> action)
{
   var s = value - delta;
   var e = value + delta;
   foreach (var match in array.Where(x => s <= x.value && e <= x.value))
      action(match);
} 
```

要打印所有匹配项，请执行以下操作：

```
WhenInRange(array, 25, 5, (x) => Console.WriteLine(x.value)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T05:59:35.607

在伪代码中：

```
for every element of the array:
    let d = the absolute value of (element.value - target_value)
    if d is less than min_difference:
        do something
        break the loop 
```

而已。您问题中的相应值将是`target_value`25 和`min_difference`5。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:03:42.460

如果您只关心数组中的**一个**值需要在目标数量内，您可以执行以下操作：

```
 float[] array = {1.0f, 10.0f, 15.7f};
        float target = 25;
        float range = 5;

        foreach (float f in array)
        {
            float temp = f - target;
            if (temp < range && temp > (-range))
            {
                //execute code here
            }
        } 
```

编辑：出于某种原因，我起初假设这些是浮点数，但相同的代码是任何基于数字的数据类型的逻辑。

# knockout.js - 数据绑定按钮值以查看模型 KnockoutJS

> ID：14766545
> 
> 赞同：1
> 
> 时间：2013-02-08T05:55:14.953
> 
> 标签：knockout.js

我想将按钮的值绑定到我的空白视图模型，我该怎么做？我做了这个**[小提琴](http://jsfiddle.net/Fumunchu/qCCVe/)**来展示我想要实现的目标。

这是我的视图模型：

```
var CustomerSearchViewModel = {
    SearchType: ko.observable(""),
    SearchString: ko.observable("");
}

$(document).ready(function () {
    ko.applyBindings(CustomerSearchViewModel);
}); 
```

这是我尝试进行数据绑定的方式：

```
<button type="button" data-bind='value: SearchType, valueUpdate: "afterkeydown"' value="0" class="btn" data-toggle="button">Company Name</button> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T06:09:38.350

有多种方法可以解决此问题，但您尝试使用`value`按钮绑定的方式不起作用。

需要对 HTML 进行最少修改的最简单的解决方案之一是使用`click`绑定并`SearchType`在事件处理程序中设置：

```
var CustomerSearchViewModel = {
       SearchType: ko.observable(""),
       SearchString: ko.observable(""),
       setSearchType : function(data, element)
       {           
           this.SearchType($(element.target).val());
       }
   }; 
```

然后你的按钮应该是这样的：

```
<button type="button" data-bind='click: setSearchType'
        value="0" class="btn" data-toggle="button">Company Name</button> 
```

演示[JSFiddle](http://jsfiddle.net/ESPnc/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:33:41.220

我建议像这样创建你的模型：

```
function CustomerSearchViewModel = {
    SearchType: ko.observable(""),
    SearchString: ko.observable(""),
    UpdateSearch: function(data, event) {
        this.SearchType($(event.target).val());
        this.SearchString($(event.target).attr('searchString'));
    }
}

$(document).ready(function () {
    ko.applyBindings(CustomerSearchViewModel);
}); 
```

然后在绑定中添加一个点击事件来更新`SearchString`，使用一个名为的自定义属性`searchString`。像这样的东西：

```
<button type="button" data-bind='click: UpdateSearch' searchString="Company Name" class="btn" value="0" data-toggle="button">Company Name</button> 
```

# javascript - 使用javascript在keypressevent上将小写转换为大写

> ID：14766547
> 
> 赞同：0
> 
> 时间：2013-02-08T05:55:20.383
> 
> 标签：javascript

`onkeypress`如何在触发事件时键入小后者时转换大写？我的函数在 Internet Explorer 中运行，但在 Google Chrome 和 FireFox 中不运行。

```
function Capital(evt) [
    key = (evt || window.event) ? evt.keyCode : evt.which;
    if (key >= 97 && key <= 122) {
        if ((evt || window.event)) evt.keyCode = evt.keyCode - 32;
        else evt.which = evt.which - 32;
    }
} 
```

这个函数调用`onkeypress="Capital(event)"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T06:14:04.240

这根本不需要 JS，只需`text-transform: uppercase;`为您的元素设置即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T06:03:16.177

很容易。将元素传递给您的函数并转换 .

```
<script type="text/javascript">
    function convertCase(elem)
    {
        elem.value = elem.value.toUpperCase();
    }
</script>
<input onkeypress="convertCase(this);" type="text" id="txt1" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-23T06:17:20.480

```
document.getElementById('my-ok').onkeypress = function() {
  var self = this
  setTimeout(function() {
    self.value = self.value.toUpperCase()
  }, 0)
}
```

```
<input id='my-ok' type="text">
```

[事件和时间](http://javascript.info/tutorial/events-and-timing-depth#give-the-browser-time-for-job)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-08T06:09:45.987

我建议不要在按键上编写脚本，而是将其写在下面的模糊事件上。

```
 window.onload = function () {
            var textBx = document.getElementById("txt");

            textBx.onblur = function () {
                this.value = this.value.toUpperCase();
            };
        }; 
```

# c# - 如何使用 WCF 进行双向通信

> ID：14766557
> 
> 赞同：0
> 
> 时间：2013-02-08T05:56:08.487
> 
> 标签：c#, wcf, two-way

场景是我有一个 win 应用程序，它是服务的客户端。其他 Win 应用程序也在使用该服务。如果在任何客户端应用程序上单击按钮，它会使用服务中的按钮标题搜索应用程序，如果找到，则通知该应用程序。使用所有应用程序中的计时器是一种方式，但我不想使用它。

# iphone - 在目标 C 中保存之前更改图像

> ID：14766562
> 
> 赞同：0
> 
> 时间：2013-02-08T05:56:30.383
> 
> 标签：iphone, ios, xcode

我在空闲时间创建照片应用程序，但我想知道如何在将图像保存到照片文件夹之前设置图像的宽度和高度

```
@interface BIDViewController ()

@end

@implementation BIDViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (IBAction)useCameraRoll:(id)sender {
    if([UIImagePickerController isSourceTypeAvailable:UIImagePickerControllerSourceTypeSavedPhotosAlbum])
    {
        UIImagePickerController *imagePiker = [[UIImagePickerController alloc]init];
        imagePiker.delegate = self;
        imagePiker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
        imagePiker.mediaTypes = @[(NSString *) kUTTypeImage];
        imagePiker.allowsEditing =NO;
        [self presentViewController:imagePiker
                           animated:YES completion:nil];
        _newMedia = NO;
    }
}

- (IBAction)useCamera:(id)sender {
    if([UIImagePickerController isSourceTypeAvailable: UIImagePickerControllerSourceTypeCamera])
    {
        UIImagePickerController *imagePicker = [[UIImagePickerController alloc]init];
        imagePicker.delegate =  self ;
        imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
        imagePicker.mediaTypes = @[(NSString *) kUTTypeImage];
        i
        imagePicker.allowsEditing = NO;
        [self presentViewController:imagePicker
                           animated:YES completion:nil];
        _newMedia = YES;
    }

}

-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSString *mediaType = info[UIImagePickerControllerMediaType];

    [self dismissViewControllerAnimated:YES completion:nil];

    if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {
        UIImage *image = info[UIImagePickerControllerOriginalImage];

        _imageView.image = image;
        if (_newMedia)
            UIImageWriteToSavedPhotosAlbum(image,
                                           self,
                                           @selector(image:finishedSavingWithError:contextInfo:),
                                           nil);
    }
    else if ([mediaType isEqualToString:(NSString *)kUTTypeMovie])
    {
        // Code here to support video if enabled
    }
}

-(void)image:(UIImage *)image
finishedSavingWithError:(NSError *)error
 contextInfo:(void *)contextInfo
{
    if (error) {
        UIAlertView *alert = [[UIAlertView alloc]
                              initWithTitle: @"Save failed"
                              message: @"Failed to save image"
                              delegate: nil
                              cancelButtonTitle:@"OK"
                              otherButtonTitles:nil];
        [alert show];
    }
}

-(void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    [self dismissViewControllerAnimated:YES completion:nil];
}

@end 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-08T05:59:49.070

`UIImage`在调用之前调整从选取器中检索到的对象的大小`UIImageWriteToSavedPhotosAlbum()`。[这](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)是一些用于轻松调整图像大小的好代码。

# javascript - 如何使用父div id更改绝对位置div的css属性

> ID：14766563
> 
> 赞同：0
> 
> 时间：2013-02-08T05:56:41.943
> 
> 标签：javascript, jquery

```
<html>
<head>
<script src="jquery.min.js"></script>
</head>
<body>
 <div id="disp"> 
   <div>
      hi how are u
   </div>
   <div style="position:absolute;left:50px;top:100px;">
      hello
   </div>
 </div>
 <script type="text/javascript">
  $(function(){
    $("#disp").css({"background-color":"#00ff00"});
  });
  </script>
</body>
</html> 
```

这里它为“hi how are u”赋予蓝色，但它没有反映在下一个 div 中，因为它在位置：绝对如何使其成为父 div 的一部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T05:58:31.233

`.val`用于s的value属性，`<input>`s的selectedIndex选项的值`<select>`等。人。

我不确定您到底想要什么，但我认为您的意思是`.html`改用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T05:59:17.883

改用`.text()`：

```
alert($("#show").text()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:12:02.680

也可以试试 alert($("#show").html());

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T06:05:08.690

我不确定我是否理解您的问题，但在我看来您需要这样做：

```
$("#show").children(); 
```

这将返回 ID 为“show”的 div 下的所有子 DOM 对象。您可以通过执行以下命令对其进行测试：

```
console.log($("#show").children()); 
```

这会将您的对象发布到控制台。希望这可以帮助！

# android - 将数据从服务器获取到 Sqlite DB

> ID：14766568
> 
> 赞同：1
> 
> 时间：2013-02-08T05:57:21.477
> 
> 标签：android, android-sqlite

在我的应用程序中，我有一个`Sqlite database`本地。当应用程序启动时，我正在运行一个并从服务器`Thread`获取数据。`Json`解析这些 json 数据后，我正在`Sqlite`我的应用程序中创建一个数据库。就长期运行的过程而言，它编写了大量代码。一切正常，

**但是，我只是想看看是否有另一种方法可以直接用这个服务器数据库填充我的本地数据库？基本上是一个更强大的解决方案。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:45:29.557

使用 OrmLite，kunalk 是对的。我自己尝试过 OrmLite，它既快速又简单。通过使用 OrmLite，我的代码也被推卸了。OrmLite 也有很好的文档。

# c# - RadPanel 中的重定向页面

> ID：14766572
> 
> 赞同：1
> 
> 时间：2013-02-08T05:57:34.190
> 
> 标签：c#, asp.net, telerik, radpanelbar

我有两个必须并排显示的表格。

当我单击该行时，它必须重定向到 RadPanel

```
Response.Redirect("Url.aspx"); 
```

这是我的 radpanel 代码。

```
<telerik:RadSplitter ID="RadSplitter1" runat="server">
     <telerik:RadPane ID="RadPane1" runat="server" ContentUrl="Form4.aspx">
                <telerik:RadAjaxPanel ID="AjaxPanel1" runat="server" Height="100%">  
           </telerik:RadAjaxPanel>
     </telerik:RadPane>
</telerik:RadSplitter> 
```

每次当我点击一行时。它只会重定向到页面。但不在 radpanel 内？

我将如何做到这一点？

注意：它必须显示在 RadPanel 中

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T18:25:31.867

您分配了内容 url，但也有内部内容（ajaxpanel）

```
string newURL= "otherForm.aspx";
you can change the RadPane1.ContentUrl = newURL; 
```

...应该可以按原样工作，但您需要删除 ajaxpanel。

# wordpress - 如何为自定义代码编写的评论添加分页

> ID：14766575
> 
> 赞同：1
> 
> 时间：2013-02-08T05:57:51.683
> 
> 标签：wordpress, wordpress-theming

嗨，我已通过模板文件中的自定义代码检索到注释，如下所示

```
<?php $comments = get_comments();?>
<?php foreach($comments as $comment) : ?>
<?php if ($comment->comment_approved == '0') : ?>
<p class="waiting-message">Your comment is awaiting moderation.</p>
<?php endif; ?>
<?php echo $comment->comment_author; ?>
<?php echo comment_date('n M y'); ?>
<?php echo $comment->comment_content;?>
<?php endforeach; ?> 
```

现在我不知道如何像 << 1, 2, 3 >>... 那样进行编号分页...请帮帮我

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T07:08:55.007

```
define('DEFAULT_COMMENTS_PER_PAGE',5);

$id=get_the_ID();

$page = (get_query_var('page')) ? get_query_var('page') : 1;;

//$page=2;

$limit = DEFAULT_COMMENTS_PER_PAGE;

$offset = ($page * $limit) - $limit;

$param = array(

    'status'=>'approve',

    'offset'=>$offset,

    'post_id'=>$id,

    'number'=>$limit,

);
$total_comments = get_comments(array('orderby' => 'post_date' ,

            'order' => 'DESC',

            'post_id'=>$id,

           'status' => 'approve',

            'parent'=>0));

$pages = ceil(count($total_comments)/DEFAULT_COMMENTS_PER_PAGE);
$comments = get_comments($param ); 
```

你的评论会是这样的

和分页一样

```
<?php

        $args = array(

'base'         => @add_query_arg('page','%#%'),

'format'       => '?page=%#%',

'total'        => $pages,

'current'      => $page,

'show_all'     => False,

'end_size'     => 1,

'mid_size'     => 2,

'prev_next'    => True,

'prev_text'    => __('Previous'),

'next_text'    => __('Next'),

'type'         => 'plain');

// ECHO THE PAGENATION 

echo paginate_links( $args );

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-23T03:03:06.330

我试图完成与原始海报类似的事情：收集 Wordpress 网站上的所有评论并以分页布局显示它们。

上面的答案非常有帮助，但我永远无法让它在我的网站上完全运行。我尝试了一些不同的方法，它对我有用。我在这里发布代码以防对其他人有帮助。

```
 <?php
        //Page variables.
        $page = (get_query_var('paged')) ? get_query_var('paged') : 1;
        $per_page = 10;
        $offset = ( ($page -1) * $per_page);

        //Args - comments (paginated).
        $args1 = array(
            'status' => 'approve',
            'post_status' => 'publish',
            'number' => $per_page,
            'offset' => $offset,
        );

        //Args - comments (not paginated).
        $args2 = array(
            'status' => 'approve',
            'post_status' => 'publish',
        );

        //Get comments (paginated).
        $all_comments1 = get_comments( $args1 );

        //Get comments (not paginated) and count.
        $all_comments2 = get_comments( $args2 );
        $all_comments_num = count( $all_comments2 );

        //Display the paginated comments.
        if ( $all_comments1 ) {
            foreach ( (array) $all_comments1 as $comment ) {
                echo '<section class="news-post"><header><time>' . get_comment_date('n.j.y') . '</time><h5>' . $comment->comment_author . ' on <a href="' . esc_url( get_comment_link( $comment ) ) . '">' . get_the_title( $comment->comment_post_ID ). '</a>:</h5>' . $comment->comment_content . '</section>';
            }
        }

        //Args - "paginate_links".
        $page_args = array(
            'base'         => get_permalink( get_the_ID() ). '%_%',
            'format'       => 'page%#%',
            'total'        => ceil($all_comments_num / $per_page),
            'current'      => $page,
            'show_all'     => True,
            'end_size'     => 2,
            'mid_size'     => 2,
            'prev_next'    => True,
            'prev_text'    => __('« Previous'),
            'next_text'    => __('Next »'),
            'type'         => 'plain',
        );

        //Display the "paginate_links".
        echo paginate_links($page_args);
        ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-23T09:40:56.830

以防万一有人遇到我的情况：

我一直在寻找 OP 想要实现的目标，但是在 Woocommerce 的产品单页上：没有任何效果。主要问题之一是，由于某种原因，如果使用公共查询变量，Woocommerce 将重定向到原始 URL。所以，从@anstrangel0ver 的解决方案开始，这就是我所做的：

由于使用'page'作为查询变量是不可能的，我通过我的functions.php文件添加了一个：

```
function themeslug_query_vars( $qvars ) {
    $qvars[] = 'review';
    return $qvars;
}
add_filter( 'query_vars', 'themeslug_query_vars' ); 
```

然后我稍微修改了他的代码，粘贴在我的产品页面上：

```
$ID = $product->get_ID();

$page = (get_query_var('review')) ? get_query_var('review') : 1;

$total_comments = get_comments(array(
    'orderby'   => 'post_date',
    'order'     => 'DESC',
    'post_id'   => $ID,
    'status'    => 'approve',
    'parent'    => 0,
));

$per_page = 4;
$pages = ceil(count($total_comments)/$per_page);

$limit = $per_page;
$offset = ($page * $limit) - $limit;

$param = array(
    'status'    => 'approve',
    'offset'    => $offset,
    'post_id'   => $ID,
    'number'    => $limit,
);

// Pagination args
$args = array(
    'base'         => get_permalink($ID). '%_%',
    // 'format'       => 'comment-page-%#%',
    'format'       => '?review=%#%',
    'total'        => $pages,
    'current'      => $page,
    'show_all'     => false,
    'end_size'     => 1,
    'mid_size'     => 2,
    'prev_next'    => true,
    'prev_text'    => __('<'),
    'next_text'    => __('>'),
    'type'         => 'plain',
);

$comments = get_comments($param); 
```

然后是一个 foreach 来创建我的自定义结构：

```
<?php foreach ($comments => $comment): ?>
    //your code
<?php endforeach; ?> 
```

# c# - VS2005到VS2010项目转换显示“此安装不支持项目类型”

> ID：14766576
> 
> 赞同：-1
> 
> 时间：2013-02-08T05:57:51.770
> 
> 标签：c#, visual-studio-2010, visual-studio-2005, windows-ce, project-conversion

我有一个用 VS2005 创建的项目。我将项目转换为VS2008，发现OK。但是当我尝试将项目转换为 VS2010 时，它显示“此安装不支持项目类型”。尽管我尝试了各种不同的方法，但我找不到它的确切解决方案。使用 .NET framework 2.0 和 PlatformFamilyName 的项目是 WindowsCE。为了详细分析，我将 VS2005 项目文件的内容粘贴在下面：-

++++++++++++++++++++++++++++++++++++++++++++++++++++++ ++++++++++++++++++++++++++++++++++++

```
<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
    <ProductVersion>8.0.50727</ProductVersion>
    <SchemaVersion>2.0</SchemaVersion>
    <ProjectGuid>{97630F0B-C62D-4135-A1F9-06092B830918}</ProjectGuid>
    <OutputType>Library</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>NativeMethods</RootNamespace>
    <AssemblyName>NativeMethods</AssemblyName>
    <ProjectTypeGuids>{4D628B5B-2FBC-4AA6-8C16-197242AEB884};{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}</ProjectTypeGuids>
    <PlatformFamilyName>WindowsCE</PlatformFamilyName>
    <PlatformID>E2BECB1F-8C8C-41ba-B736-9BE7D946A398</PlatformID>
    <OSVersion>5.0</OSVersion>
    <DeployDirSuffix>NativeMethods</DeployDirSuffix>
    <TargetFrameworkVersion>v2.0</TargetFrameworkVersion>
    <FormFactorID>
    </FormFactorID>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|AnyCPU' ">
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\Debug\</OutputPath>
    <DefineConstants>DEBUG;TRACE;$(PlatformFamilyName)</DefineConstants>
    <NoStdLib>true</NoStdLib>
    <NoConfig>true</NoConfig>
    <ErrorReport>prompt</ErrorReport>
    <FileAlignment>512</FileAlignment>
    <WarningLevel>4</WarningLevel>
    <GenerateSerializationAssemblies>Off</GenerateSerializationAssemblies>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|AnyCPU' ">
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\Release\</OutputPath>
    <DefineConstants>TRACE;$(PlatformFamilyName)</DefineConstants>
    <NoStdLib>true</NoStdLib>
    <NoConfig>true</NoConfig>
    <ErrorReport>prompt</ErrorReport>
    <FileAlignment>512</FileAlignment>
    <WarningLevel>4</WarningLevel>
    <GenerateSerializationAssemblies>Off</GenerateSerializationAssemblies>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="mscorlib" />
    <Reference Include="System" />
    <Reference Include="System.Data" />
    <Reference Include="System.Windows.Forms" />
    <Reference Include="System.Xml" />
  </ItemGroup>
  <ItemGroup>
    <Compile Include="ceddk.cs" />
    <Compile Include="coredll.cs" />
    <Compile Include="Properties\AssemblyInfo.cs" />
  </ItemGroup>
  <Import Condition="'$(TargetFrameworkVersion)' == 'v1.0'" Project="$(MSBuildBinPath)\Microsoft.CompactFramework.CSharp.v1.targets" />
  <Import Condition="'$(TargetFrameworkVersion)' == 'v2.0'" Project="$(MSBuildBinPath)\Microsoft.CompactFramework.CSharp.targets" />
  <ProjectExtensions>
    <VisualStudio>
      <FlavorProperties GUID="{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}">
        <HostingProcess disable="1" />
      </FlavorProperties>
    </VisualStudio>
  </ProjectExtensions>
  <!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
       Other similar extension points exist, see Microsoft.Common.targets.
  <Target Name="BeforeBuild">
  </Target>
  <Target Name="AfterBuild">
  </Target>
  -->
</Project> 
```

++++++++++++++++++++++++++++++++++++++++++++++++++++++ ++++++++++++++++++++++++++++++++++++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T01:17:06.570

Visual Studio 2010 不支持 .NET Compact Framework 开发。最后一个受支持的版本是 Visual Studio 2008。

# python - 安装 phpmyadmin 后 Apache 站点错误

> ID：14766581
> 
> 赞同：0
> 
> 时间：2013-02-08T05:58:02.277
> 
> 标签：python, apache, phpmyadmin, mod-wsgi

我的 Apache 网络服务器上有一些站点。站点配置如下：

```
WSGIScriptAlias / /var/www/academmedia/academmedia/wsgi.py
WSGIDaemonProcess academmedia user=devlogin3 group=devlogin3 home=/var/www/acad$
WSGIProcessGroup academmedia 
```

一切正常，直到我安装了重新配置 apache 的 phpmyadmin，现在仍然有文件，`sites-available`但`apache2 restart`我收到警告：

`module wsgi_module is already loaded, skipping`

当试图从浏览器访问站点时 - 内部服务器错误。

# webmatrix-2 - 使用 WebMatrix 添加带有多个文件上传的下拉列表/选择

> ID：14766585
> 
> 赞同：1
> 
> 时间：2013-02-08T05:58:17.080
> 
> 标签：webmatrix-2

我希望有人可以帮助在 WebMatrix2 中添加选择字段。我希望能够在 App_data > UploadedFiles > folderA、foldeB 等中添加文件夹，这些文件夹用文件夹 A、文件夹 B 等填充选择字段。

我遵循了“在 ASP.NET 网页（Razor）站点中处理文件”，该代码确实有效，但它只显示了如何将多个文件添加到特定目录（UploadedFiles）。我希望能够根据下拉菜单保存文件。

这是我到目前为止所拥有的：

```
@using Microsoft.Web.Helpers;
 @{
var message = "";
if (IsPost) {
  var fileName = "";
  var fileSavePath = "";
  int numFiles = Request.Files.Count;
  int uploadedCount = 0;
  for(int i =0; i < numFiles; i++) {
      var uploadedFile = Request.Files[i];
      if (uploadedFile.ContentLength > 0) {
          fileName = Path.GetFileName(uploadedFile.FileName);
          fileSavePath = Server.MapPath("~/App_Data/UploadedFiles/" +fileName);
          uploadedFile.SaveAs(fileSavePath);
          uploadedCount++;
      }
   }
     Response.Redirect("videoList.cshtml");
 }
}
 <form method="post" enctype="multipart/form-data" action="">
  <div>
 <h1>File Upload - Multiple-File Example</h1>
  @if (!IsPost) {
    @FileUpload.GetHtml(
        initialNumberOfFiles:2,
        allowMoreFilesToBeAdded:false,
        includeFormTag:false,
        addText:"Add another file",
        uploadText:"Upload")
    }  
  </div>
  <input type="submit" value="Upload" />       
  </form> 
```

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T08:43:32.643

大概您想为每个文件上传提供一个下拉列表？如果是这样，我建议不要使用 FileUpload 帮助程序。只需使用基本的 HTML：

```
<form method="post" action="" enctype="multipart/form-data">
<input type="file" name="file1" />
<select name="folder1">
    <option>FolderA</option>
    <option>FolderB</option>
</select>
<br />
<input type="file" name="file2" />
<select name="folder2">
    <option>FolderA</option>
    <option>FolderB</option>
</select>
<input type="submit />
</form> 
```

第一个文件将在`Request.Files["file1"]`和相应的下拉选择中`Request["folder1"]`

# windows-phone - 如何在windows phone的日历控件上添加图像

> ID：14766591
> 
> 赞同：0
> 
> 时间：2013-02-08T05:58:36.673
> 
> 标签：windows-phone

我是 Windows phone 应用程序开发的新手，我在我的应用程序中使用 windows phone 7 日历控件。我想在特定日期的日历单元格上添加一个小图像。是否可以使用可用的日历控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T21:47:51.510

当前日历控件无法实现。

# asp.net-mvc-3 - 如何将选中的一个单选按钮传递给 jquery？

> ID：14766592
> 
> 赞同：0
> 
> 时间：2013-02-08T05:58:39.570
> 
> 标签：asp.net-mvc-3, radio-button, html.radiobuttonlist

我在 mvc3 中有两个 @html.radiobutton 。我需要将选定的一个值传递给 jquery

我的代码：

```
 @Html.RadioButton("gender", "1", false, new { id = "id1" }) male

   @Html.RadioButton("gender", "2", true, new { id = "id2" }) female 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:00:57.270

为单选按钮设置组名

```
<input type="radio" name="group1" value="Milk"> 
```

单选按钮与其他 HTML 表单元素略有不同，它们提供多个选项并且只允许一个选择。在这种情况下，HTML 编辑器包含一个特殊工具，可以让您的单选按钮选项井井有条。以下是如何使用它：

**[将单选按钮组添加到 HTML 表单](http://www.coffeecup.com/help/articles/adding-a-radio-button-group-to-an-html-form/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:07:05.303

检查此链接[http://www.w3schools.com/html/tryit.asp?filename=tryhtml_radio](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_radio)

简单的 ... ：）

这里两个单选行都有 name="sex" ，这表明 HTML 的单选组相同，因此您可以在两个中选择一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:17:19.030

这是[RadioButton 方法的重载](http://msdn.microsoft.com/en-us/library/dd492690.aspx)。

```
Gender:
@Html.RadioButton("Gender", "1", true, new { id = "yourId" }) Male
@Html.RadioButton("Gender", "2", false, new { id = "yourId" }) Female 
```

希望能帮助到你。

* * *

**编辑**

`$('input[name=Gender]:radio:checked')`将为您提供选定的单选按钮，同时`$('input[name=Gender]:radio:not(:checked)'`为您提供未选择的单选按钮。

```
$(function(){
     $('input[name=Gender]:radio').click(function () {
          //Here we can get the selected radio button
          var selected=$('input[name=Gender]:radio:checked');
          alert('You have selected'+ selected);
     });
}); 
```

# ruby-on-rails - Bootstrap 忽略某些媒体查询

> ID：14766595
> 
> 赞同：0
> 
> 时间：2013-02-08T05:59:13.747
> 
> 标签：ruby-on-rails, twitter-bootstrap, sass

我目前有以下包含内容的 scss 文件：

```
/* Portrait tablet to landscape and desktop */
@media (min-width: 768px) and (max-width: 979px) {
// Something here
}

/* Desktop */
@media (min-width: 981px) and (max-width: 1198px) {
// Something here
}

/* Large Desktop */
@media (min-width: 1200px) {
// Something here
} 
```

如果我`application.css`在 Rails 中加载文件，我会得到以下信息：

```
/* Portrait tablet to landscape and desktop */
@media (min-width: 768px) and (max-width: 979px) {
  /* Remove gap between nav and content*/
  /* line 120, ../../app/assets/stylesheets/static_pages.css.scss */
  .navbar-fixed-top {
    margin-bottom: 0 !important;
  }

  /* Remove any padding from the body */
  /* line 125, ../../app/assets/stylesheets/static_pages.css.scss */
  body {
    padding-top: 0 !important;
  }

  /* line 133, ../../app/assets/stylesheets/static_pages.css.scss */
  .static_pages-controller-home .landing .sign-up {
    display: none;
  }
  /* line 142, ../../app/assets/stylesheets/static_pages.css.scss */
  .static_pages-controller-home .container #students #bulletpoints h2, .static_pages-controller-home .container #students #bulletpoints p {
    text-align: left !important;
  }
}
/* Desktop */
/* Large Desktop */
@media (min-width: 1200px) {
  /* Remove gap between nav and content*/
  /* line 168, ../../app/assets/stylesheets/static_pages.css.scss */
  .navbar-fixed-top {
    margin-bottom: 0 !important;
  }

  /* Bypass left & right padding */
  /* line 186, ../../app/assets/stylesheets/static_pages.css.scss */
  .static_pages-controller-home .container #students #bulletpoints h2 {
    text-align: left !important;
  }
} 
```

请注意，在编译后的文件中，我们有注释`/* Desktop */`，但媒体查询中的 CSS 不存在，实际上似乎编译忽略了整个媒体查询。有没有办法解决这个问题？

我的目标是为该宽度范围提供一些特定的 css。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:10:06.203

在没有看到您的实际代码的情况下，我最好的猜测是您在未编译的文件中有语法错误。没有理由不能为桌面范围提供一些 css。

你可以试试这个。

备份您的未编译文件，然后启动一个新文件，其中包含：

```
/* Portrait tablet to landscape and desktop */
@media (min-width: 768px) and (max-width: 979px) {
// Something here

    font-color{
    color:red;
    }
}

/* Desktop */
@media (min-width: 981px) and (max-width: 1198px) {
// Something here

font-color{
    color:green;
    }
}

/* Large Desktop */
@media (min-width: 1200px) {
// Something here

font-color{
    color:blue;
    }
} 
```

编译这个，惊喜，字体颜色会在不同的角度发生变化。

完成此工作后，将其他@media 内容逐个添加回来，以便查明原因。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-31T15:53:09.110

旧帖子，但也许我可以帮助某人。

我解决了这个问题，在里面添加这个 HTML`<head>...</head>`

```
<head>
    ...
    <meta name="viewport" content="width=device-width,initial-scale=1">
    ...
</head> 
```

# iphone - 有没有办法通过用另一个应用程序替换应用程序来处理 iphone 应用程序内购买？

> ID：14766600
> 
> 赞同：0
> 
> 时间：2013-02-08T05:59:20.537
> 
> 标签：iphone, objective-c, in-app-purchase

我最近开始研究如何将应用内购买添加到 iphone 应用程序中，我遇到了使用产品标识符的 Store Kit 方法（请参阅此处：[http ://www.raywenderlich.com/2797/introduction-to-in-app -购买](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)）。然而，如果没有深入研究，这个过程看起来比我希望的更长、更乏味。

是否可以通过简单地将应用程序的代码复制到一个新文件中来实现应用内购买，将附加内容添加到该文件，然后让应用内购买简单地“切换”两个版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:57:24.377

框架的想法当然是允许您像黑盒子一样使用一切。所以答案是肯定的。让我指导你。

1.  复制并导入项目源但忽略 InAppRageIAPHelper.m
2.  在您自己的应用程序委托或控制器中，执行

    @interface YourAppDelegate : IAPHelper {

然后

```
- (id)init { 
    NSSet *productIdentifiers = [NSSet setWithObjects:
         @"your product id",
    nil];

if ((self = [super initWithProductIdentifiers:productIdentifiers])) {                

}
return self; 
```

}

现在您可以使用 [self requestProducts] 请求产品。当您在 - (void)productsLoaded:(NSNotification *)notification 中收到通知时，您的产品已加载。

# javascript - jQuery：单选按钮值未清除

> ID：14766605
> 
> 赞同：1
> 
> 时间：2013-02-08T05:59:50.640
> 
> 标签：javascript, jquery

我这里有一个代码。

```
<div class="proptions_container">

<button class="showbutton classname" >Call</button>
<div id="rd" style="display:none;">
<form id="blankform">   
<input class="check_val" type="radio" name="check_val" onClick="setShemp(this.value)" value="callondesktop">Call On Desktop<br>
</form>
<form id="valueform">
<input class="check_val" type="radio" name="check_val" onClick="setShemp(this.value)" value="callonphone">Call On Phone
</form>
</div>
<div id="custom_proptions" style="display:none;">
<form style="border: 1px solid; display: block; float: left; padding: 13px 13px 12px 14px;">    
<input name="proption_1" type="text" class="text" id="proption_1" placeholder="First Proption" />
<br>
<input name="proption_2" type="text" class="text" id="proption_2" placeholder="Second Proption" />
<br>
<input type="submit" class="classname" value="Call" />
<button id ="cancel"  class="classname">Cancel</button>
</form>
</div>

<script>
    function setShemp(value)
    {
        if(value == 'callondesktop')
            {
                       $("#blankform").submit();
            }

        if(value == 'callonphone'){
            $('div#rd').slideUp('slow');
            $('.showbutton').hide();
            $('#custom_proptions').slideDown('slow');

        }

    }

    $('#cancel').click(function(e) {
        $('.check_val').val('');  
        e.preventDefault();

        $('#custom_proptions').slideUp('slow');
         e.preventDefault();
        //$('div#rd').slideDown('slow');
        $('.showbutton').show();
    });

    $('.showbutton').click(function() {
        $('div#rd').slideDown('slow');
    });

 $('#proptions').click(function() {
        if ($(this).find(':selected').val() === '5') {
            $('div#custom_proptions').slideDown('slow');
        } else {
            $('div#custom_proptions').slideUp('slow');
        }
    });
</script> 
```

单击通话按钮时会出现两个单选按钮（均未选中）。

选择`Call on Phone` 收音机后，我将显示一个 html 表单，其中包含两个按钮`Call`和`Cancel` .

点击`Cancel` 我只是显示主`call` 按钮。

现在问题来了。在单击主`Call`按钮时，出现了我不想要的收音机先前选择的值。

我希望在单击呼叫按钮时不应该选择任何单选值。

请让我知道为什么单选按钮值第二次显示为选定值。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:09:21.477

元素的检查状态和禁用状态等属性值应通过 处理`.prop`，而不是`.attr`。采用：

```
$("input[name='check_val']").prop('checked', false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:05:43.277

你可以做的是..在显示按钮`click`的功能上..取消选中收音机...

```
 $('.showbutton').click(function() {
    $('input[name="check_val"]').attr('checked', null);  
     //Or u can just use class selector $('input.check_val').attr('checked', null);
    //OR using prop $("input[name='check_val']").prop('checked', false);
    $('div#rd').slideDown('slow');

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:08:10.567

删除属性“已检查”

```
 $('input[name="check_val"]').removeAttr('checked'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T06:12:49.460

试试这个

```
 $('input[name="check_val"]').attr('checked',false); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T06:15:35.793

你可以这样做：

```
$('.showbutton').click(function () {
    $('div#rd').slideDown('slow');
    $(':radio:checked').prop('checked', false);
}); 
```

# ios - 如何与翻译人员共享和合作？

> ID：14766608
> 
> 赞同：0
> 
> 时间：2013-02-08T05:59:58.497
> 
> 标签：ios, localization

通常在我们的 iOS 项目中，我们有多种支持的语言。它们存储在标准的 .string 文件中，如下所示：

```
/* News section */
"news_title" = "News";
"ok_button_title" = "Ok"; 
```

这个文件当然可以邮寄给非技术翻译，他会被告知“只需将右侧的内容替换为法语中的等效文本即可”。这对他们来说并不容易理解，他们可能会在 wordpad.exe 中打开文件并将其保存为一种奇怪的格式，或者通常会弄乱文件。

其他人是如何解决这些问题的？是否有可用的工具可以提供帮助？

这可能不是 iOS 开发所独有的——我想 Rails、C#、Java 开发人员面临同样的挑战？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T13:24:48.190

[https://www.transifex.com/](https://www.transifex.com/)可以处理 iOS 文件。像这样的其他平台也可以。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T14:51:30.067

您可以考虑为您未来的 iOS+Android 项目使用 DMLocalizedString。目前源代码仅适用于 iOS，但我相信制作 Android 版本非常容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-09T19:26:07.190

苹果开发网站上有推荐的翻译机构，其中一些提供与开发环境的集成。例如，查看[tethras.com](http://www.tethras.com) - [http://kb.tethras.com/localizing-your-ios-app](http://kb.tethras.com/localizing-your-ios-app)。

电子表格是另一种选择，但您应该包括描述或使用字符串的位置以及屏幕截图，因为上下文就是翻译中的一切！应包括任何长度限制（对于较长的字符串，比英语扩展 +30%，对于短字符串，扩展为 200% 等），还应包括有关如何处理标记的说明。避免向他们发送任何嵌入代码的东西，因为它有被破坏和提高测试要求的风险。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T17:47:20.810

这个问题绝对不是 iOS 独有的——它通常与软件本地化有关，我在一家软件公司负责。这表示：

*   我自己翻译用户界面。
*   如果我做不到，也许我们在国外的办事处之一可以提供帮助，所以我会与他们协调。
*   或者我们与代理机构合作。

我们使用 CAT 工具来执行此操作（CAT = 计算机辅助翻译）。在我们的例子中，它是 SDL Passolo，但这只是一个示例。以前我们有不同的工具，功能和工作流程几乎相同。

CAT 工具旨在确保在翻译过程中保留源文件格式。例如，Passolo 将默认读取 Windows 资源 DLL 或 Java 属性。它将提取需要翻译的内容并确保其他所有内容（例如字符串 ID）都受到写保护。我的 Passolo 版本不会自动识别 iOS 格式，但我可以使用正则表达式轻松地为这些文件定义一组规则。

此外，在更新的情况下，我只需导入新的源文件，该工具就会以不同的颜色突出显示新的和更改的字符串，并允许我对其进行过滤。其他所有内容都是自动预翻译的。这称为翻译记忆库。

我们的 Windows 客户端包含数万个字符串，并且每年会更新数次。虽然我们的翻译可能在语言上很糟糕，但更新总是很快完成，而且我们从来没有因为本地化而损坏目标文件或功能问题。

缺点是：这些工具并不便宜（尽管情况有所改善，在我们的案例中，投资很快就得到了回报）。如果您不想自己购买 CAT 工具，请确保您与使用这些工具的代理机构或翻译人员合作。

您可能希望查看[http://www.proz.com](http://www.proz.com)和 CAT 工具：[http](http://wiki.proz.com/wiki/index.php/Category:CAT_tools) ://wiki.proz.com/wiki/index.php/Category:CAT_tools 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T23:29:28.533

我们使用了一个电子表格文件，我们将其发送给了翻译人员。翻译者只需添加一个包含翻译文本的列。请参阅下面的示例文件：

[http://members.home.nl/bas.de.reuver/files/multilanguage.zip](http://members.home.nl/bas.de.reuver/files/multilanguage.zip)

或者，您可以使用更易于在线共享的 Google 文档电子表格。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-10T17:56:17.003

我想你可能误解了字符串文件格式。我应该看起来更像这样，每个要本地化的字符串都有注释，如本地化指南中所示，即

```
/* Error string used for unknown error types. */ 
"ErrorString_1" = "An unknown error occurred."; 
```

确保使用描述性文本填写评论字段`NSLocalizedString()`，这就是评论的来源。

此页面看起来很有帮助：[https ://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPInternational/Articles/NotesForLocalizers.html](https://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPInternational/Articles/NotesForLocalizers.html)

您应该使用该`genstrings`工具为您生成字符串文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-08T06:06:36.383

在[Apple 的“国际化编程主题简介”页面](http://developer.apple.com/library/ios/#documentation/MacOSX/Conceptual/BPInternational/BPInternational.html)上可以找到很多信息，这可能有点吓人，但至少在某种程度上浏览一下是值得的。

是的，本地化您的应用程序可能就像将字符串文件从一种语言更改为另一种一样简单，但某些语言可以将几个单词分解成一个句子或从根本上改变对话框的外观（在这种情况下，实际的 xib 可能需要修改为了在该语言上看起来正确——幸运的是，您有特定于语言的资源文件夹，其中包含特定于语言的 xib 文件，您可以将其放入应用程序包的资源区域等）。因此，您需要熟悉添加其他语言时可能出现的潜在问题和陷阱。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-08T06:08:34.380

如果翻译无法理解“只需将右侧的内容替换为法语中的等效文本”，那么他可能不应该担任翻译。这很好。最多，明确告诉他们使用文本编辑器而不是文字处理器 - 即记事本或 Gedit 或 TextEdit 适用，Word、OpenOffice Writer 和 Pages 不适用。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-08T09:08:39.183

我开发了一个名为[lokaligo.com](https://lokaligo.com)的在线工具。它可以处理 iOS 和 Android 项目，并允许您邀请自己的翻译。

它还可以在 iOS 上自动截屏。

# php - 未定义的变量

> ID：14766611
> 
> 赞同：0
> 
> 时间：2013-02-08T06:00:11.890
> 
> 标签：php

我在第 52、53、54、55 行不断收到未定义的变量，但不知道如何修复它。任何帮助将不胜感激。

```
<table>
            <form name="emailMe" id="emailMe" action="contactMe.php" method="post">

                <tr><th><p>First Name </p></th> <td><p><input type="text" name="firstName" maxlength="10"value="<?php print($fName); ?>" /></p></td></tr>
                <tr><th><p>Last Name </p></th> <td><p><input type="text" name="lastName" maxlength="25"value="<?php print($lName); ?>" /></p></td></tr>
                <tr><th><p>Email </p></th> <td><p><input type="text" name="email" maxlength="50"value="<?php print($email); ?>" /></p></td></tr>
                <tr><th><p>Message </p></th> <td><p><input type="text" name="message" maxlength="250"value="<?php print($message); ?>" /></p></td></tr>
        </table>

                <p><input type="submit" name="submit" value="Submit" />
                <input type="reset" value="Clear Form" /></p>
            </form>

        <?php 

            if(isset($_POST["submit"])){

            $errorCount = 0;
            $fName      = $_POST['firstName'];
            $lName      = $_POST['lastName'];
            $email      = $_POST['email'];
            $message    = $_POST['message']; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T06:05:49.977

```
<?php print($fName); ?>
<?php print($lName); ?> 
<?php print($email); ?> 
<?php print($message);?> 
```

您的 HTML 代码中的所有此类变量在您使用它们之前都没有被声明。这就是导致错误的原因。在您打印它们之前，这些变量都没有被初始化。您可以将 PHP 代码放在 HTML 之前以初始化它们。像这个例子

```
if(isset($_POST["submit"]))
{
 $fName = $_POST['firstName'];
}
else
{
 $fName = "";
} 
```

**编辑：**

像这样

```
<?php 

        if(isset($_POST["submit"])){
        $errorCount = 0;
        $fName      = $_POST['firstName'];
        $lName      = $_POST['lastName'];
        $email      = $_POST['email'];
        $message    = $_POST['message'];
        }
        else
        {
        $fName      = "";
        $lName      = "";
        $email      = "";
        $message    = "";
        }
?> 
```

这需要超越您的 HTML

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-12T08:42:48.903

遵循这个简单的步骤：
**从此更改：**
`<tr><th><p>First Name </p></th> <td><p><input type="text" name="firstName" maxlength="10" value="<?php print($fName); ?>" /></p></td></tr>`

**对此：**
`<tr><th><p>First Name </p></th> <td><p><input type="text" name="firstName" maxlength="10" value="<?php if(isset($fname)) print($fName); ?>" /></p></td></tr>`

在所有剩余的步骤中重复这样的操作，您就可以开始了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:07:49.873

嘿，像这样声明`<table>`内部`<form>`标签：

```
 <form name="emailMe" id="emailMe" action="contactMe.php" method="post">
<table>
                <tr><th><p>First Name </p></th> <td><p><input type="text" name="firstName" maxlength="10"value="<?php print($fName); ?>" /></p></td></tr>
                <tr><th><p>Last Name </p></th> <td><p><input type="text" name="lastName" maxlength="25"value="<?php print($lName); ?>" /></p></td></tr>
                <tr><th><p>Email </p></th> <td><p><input type="text" name="email" maxlength="50"value="<?php print($email); ?>" /></p></td></tr>
                <tr><th><p>Message </p></th> <td><p><input type="text" name="message" maxlength="250"value="<?php print($message); ?>" /></p></td></tr>
        </table>

                <p><input type="submit" name="submit" value="Submit" />
                <input type="reset" value="Clear Form" /></p>
            </form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T06:08:28.873

您在声明变量之前使用它们。改变如下。

```
 <?php 

                if(isset($_POST["submit"])){

                $errorCount = 0;
                $fName      = $_POST['firstName'];
                $lName      = $_POST['lastName'];
                $email      = $_POST['email'];
                $message    = $_POST['message'];

    ?>
<form name="emailMe" id="emailMe" action="contactMe.php" method="post">
    <table>
            <tr><th><p>First Name </p></th> <td><p><input type="text" name="firstName" maxlength="10"value="<?php print($fName); ?>" /></p></td></tr>
                    <tr><th><p>Last Name </p></th> <td><p><input type="text" name="lastName" maxlength="25"value="<?php print($lName); ?>" /></p></td></tr>
                    <tr><th><p>Email </p></th> <td><p><input type="text" name="email" maxlength="50"value="<?php print($email); ?>" /></p></td></tr>
                    <tr><th><p>Message </p></th> <td><p><input type="text" name="message" maxlength="250"value="<?php print($message); ?>" /></p></td></tr>
            </table>
            <p><input type="submit" name="submit" value="Submit" />
            <input type="reset" value="Clear Form" /></p>
</form> 
```

**注意：我可以看到您`$_POST["submit"]`在表单中检查 a，如果它与您在 HTML 代码中使用的提交相同，即使将其更改为我的代码，您也会收到错误消息。**

因为，在这种情况下，您使用的是未定义的变量，因为最初没有提交表单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T06:10:26.063

请从当前位置删除以下行并将这些行放在表格标记之前。

```
 if(isset($_POST["submit"])){

        $errorCount = 0;
        $fName      = $_POST['firstName'];
        $lName      = $_POST['lastName'];
        $email      = $_POST['email'];
        $message    = $_POST['message']; 
```

# javascript - 向上/向下移动表格行，但不能再次移动

> ID：14766614
> 
> 赞同：2
> 
> 时间：2013-02-08T06:00:20.783
> 
> 标签：javascript, jquery, row

**我在这里创建了一个 jsFiddle：http: [//jsfiddle.net/markrummel/SEQbd/](http://jsfiddle.net/markrummel/SEQbd/)。**

我有三个表格行，每行都有一个向上和向下按钮。通过单击 DOWN 按钮，该行将与其下方的行进行切换。通过单击向上按钮，该行将与其上方的行进行切换。

我的代码中的所有内容都可以上下切换行。但是，移动一行后，我无法再移动该行或与之切换的行。我仍然可以移动尚未移动/切换的行。

我需要调用一些函数来刷新`table`s`DOM`或个人`tr`s 吗？我的假设是 jQuery 不再识别这些行。

jsFiddle 上的示例：

1.  向下移动**项目一**，
2.  看到现在**项目一**和**项目二**不能上下移动，
3.  看到**第 3 项**仍然可以上移。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T06:05:48.453

这是因为您破坏了绑定单击事件的元素。[您可以通过使用.on](http://api.jquery.com/on/)处理事件来轻松修复它：

将第一行更改为：

```
$(document).on("click", 'button.change-rank', function() { 
```

工作演示：http: [//jsfiddle.net/SEQbd/2/](http://jsfiddle.net/SEQbd/2/)

* * *

但这不是最好的方法。我会确保移动元素而不是一直破坏/创建元素。而不是使用`.html()`and `.html(someStrng)`，您可以使用`.append( [jQuery Element/DOM Node] )`

在此处查看演示：http: [//jsfiddle.net/SEQbd/4/](http://jsfiddle.net/SEQbd/4/)

* * *

您可以像这样简单地编写代码：http: [//jsfiddle.net/3Wkfm/](http://jsfiddle.net/3Wkfm/)

```
$('button.change-rank').click(function() {                                                               
    var direction = $(this).attr('data-direction'),
        $original = $(this).closest("tr"),
        $target = direction === "up" ? $original.prev() : $original.next();

    if ( $target.length && direction === "up" ) {
        $original.insertBefore($target);
    }
    else if( $target.length ) {
        $original.insertAfter($target);
    }
}); 
```

`var a = condition ? c : d`和写法一样：

```
if ( condition ) {
    var a = c;
}
else {
    var a = d;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:05:35.550

原因应该是丢失了事件绑定，当您通过 .html() 重建表格时，您需要做的只是将您的函数重新绑定到那些移动的按钮，或者只是不移动按钮，我的意思是只移动第一个 td或者其他的东西。

# java - 获取文件未找到异常，因为路径未正确格式化

> ID：14766615
> 
> 赞同：1
> 
> 时间：2013-02-08T06:00:46.443
> 
> 标签：java, mysql, filenotfoundexception

我正在使用 Windows，并且在 java 代码中我创建了一个查询，看起来像
“LOAD DATA LOCAL INFILE 'F:/cust_files/1360235457810_customer_xlsx.xlsx.csv' IGNORE INTO TABLE customer.temp_20130207_10098_1360235533471505000 FIELDS TERMINATED BY ',';”
但是当我运行应用程序时，我得到和文件未找到异常并且路径看起来像，
F：cust_files1360235457810_customer_xlsx.xlsx.csv

java.io.FileNotFoundException MESSAGE：F：cust_files1360235457810_customer_xlsx.xlsx.csv（系统找不到指定的文件）

可以有人让我知道是什么原因造成的以及解决方案是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-23T12:45:47.220

您必须将路径中的所有 \ 替换为 \\

利用

```
String after = before.replace("\\", "\\\\"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:05:00.313

使用双重`\\`前进在您的 Windows 系统中获得正确的路径。

参考[http://dev.mysql.com/doc/refman/5.1/en/string-literals.html](http://dev.mysql.com/doc/refman/5.1/en/string-literals.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:06:20.250

利用 ：

```
F:\\cust_files\\1360235457810_customer_xlsx.xlsx.csv 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T06:07:46.043

您需要使用此路径
`F:\\cust_files\\1360235457810_customer_xlsx.xlsx.csv`

路径被分隔，`\`但我们需要转义它，因此您需要再添加一个 slash `\`。因此它变成了`\\`
希望这有帮助

# java - Hibernate 验证器在正则表达式匹配时占用 CPU

> ID：14766620
> 
> 赞同：0
> 
> 时间：2013-02-08T06:01:19.127
> 
> 标签：java, regex, hibernate, hibernate-validator

我们正在尝试使用休眠验证器验证地址。有时休眠验证器会挂起 java 正则表达式匹配。它完成了占用 CPU 使用率并且无法处理其他任何内容。有没有办法摆脱这种情况？这是java 6中的错误吗？

```
java.lang.Thread.State: RUNNABLE
    at java.lang.Character.codePointAt(Character.java:2335)
    at java.util.regex.Pattern$CharProperty.match(Pattern.java:3344)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3737)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)
    at java.util.regex.Pattern$Loop.match(Pattern.java:4295)
    at java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3782)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)
    at java.util.regex.Pattern$Loop.match(Pattern.java:4295)
    at java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3782)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)
    at java.util.regex.Pattern$Loop.match(Pattern.java:4295)
    at java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3782)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)
    at java.util.regex.Pattern$Loop.match(Pattern.java:4295)
    at java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3782)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)
    at java.util.regex.Pattern$Loop.match(Pattern.java:4295)
    at java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3782)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)
    at java.util.regex.Pattern$Loop.match(Pattern.java:4295)
    at java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3782)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)
    at java.util.regex.Pattern$Loop.match(Pattern.java:4295)
    at java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3782)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)
    at java.util.regex.Pattern$Loop.match(Pattern.java:4295)
    at java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3782)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)
    at java.util.regex.Pattern$Loop.match(Pattern.java:4295)
    at java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3782)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)
    at java.util.regex.Pattern$Loop.match(Pattern.java:4295)
    at java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3782)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)
    at java.util.regex.Pattern$Loop.match(Pattern.java:4295)
    at java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3782)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)
    at java.util.regex.Pattern$Loop.match(Pattern.java:4295)
    at java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3782)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)
    at java.util.regex.Pattern$Loop.match(Pattern.java:4295)
    at java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3782)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)
    at java.util.regex.Pattern$Loop.match(Pattern.java:4295)
    at java.util.regex.Pattern$GroupTail.match(Pattern.java:4227)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3782)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$Ques.match(Pattern.java:3691)
    at java.util.regex.Pattern$Curly.match0(Pattern.java:3789)
    at java.util.regex.Pattern$Curly.match(Pattern.java:3744)
    at java.util.regex.Pattern$GroupHead.match(Pattern.java:4168)
    at java.util.regex.Pattern$Loop.matchInit(Pattern.java:4314)
    at java.util.regex.Pattern$Prolog.match(Pattern.java:4251)
    at java.util.regex.Matcher.match(Matcher.java:1127)
    at java.util.regex.Matcher.matches(Matcher.java:502)
    at org.hibernate.validator.constraints.impl.PatternValidator.isValid(PatternValidator.java:52)
    at org.hibernate.validator.constraints.impl.PatternValidator.isValid(PatternValidator.java:28)
    at org.hibernate.validator.engine.ConstraintTree.validateSingleConstraint(ConstraintTree.java:278)
    at org.hibernate.validator.engine.ConstraintTree.validateConstraints(ConstraintTree.java:153)
    at org.hibernate.validator.engine.ConstraintTree.validateConstraints(ConstraintTree.java:117)
    at org.hibernate.validator.metadata.MetaConstraint.validateConstraint(MetaConstraint.java:84)
    at org.hibernate.validator.engine.ValidatorImpl.validateConstraint(ValidatorImpl.java:452)
    at org.hibernate.validator.engine.ValidatorImpl.validateConstraintsForDefaultGroup(ValidatorImpl.java:397)
    at org.hibernate.validator.engine.ValidatorImpl.validateConstraintsForCurrentGroup(ValidatorImpl.java:361)
    at org.hibernate.validator.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:313)
    at org.hibernate.validator.engine.ValidatorImpl.validateCascadedConstraint(ValidatorImpl.java:613)
    at org.hibernate.validator.engine.ValidatorImpl.validateCascadedConstraints(ValidatorImpl.java:478)
    at org.hibernate.validator.engine.ValidatorImpl.validateInContext(ValidatorImpl.java:322)
    at org.hibernate.validator.engine.ValidatorImpl.validate(ValidatorImpl.java:139)
    at org.springframework.validation.beanvalidation.SpringValidatorAdapter.validate(SpringValidatorAdapter.java:114)
    at com.liquidation.unifiedregistration.services.impl.UserServiceImpl.validateUser(UserServiceImpl.java:766)
    at sun.reflect.GeneratedMethodAccessor440.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:196)
    at $Proxy76.validateUser(Unknown Source) 
```

# jquery - twitter bootsrap typeahead jquery ajax回调不起作用

> ID：14766622
> 
> 赞同：0
> 
> 时间：2013-02-08T06:01:20.013
> 
> 标签：jquery, callback, bootstrap-typeahead

ISSUE: twitter bootsrap typeahead jquery ajax 回调不起作用

我正在使用 jQuery v1.8.3、Bootstrap v2.2.1、bootstrap-typeahead.js v2.2.2 接收 JSON 响应但未调用回调...

JSON 响应 `{"ResultSet":{"Query":"face","Result":[{"symbol":"FB"},{}, {}..]}}`

我已经看过与此问题相关的不同帖子并尝试过。但他们都没有为我工作。有没有人遇到过这种问题？

```
inputSearch.typeahead({
  source: function (query, processSearchResults) {
    query = inputSearch.val();
    return $.getJSON('ticker_search', { query: query }, function (data) {
      return processSearchResults(data);
    });

  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:15:59.893

数据应该是一个数组

```
['item 1', 'item 2'] 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/nbdpD/)。

你需要做类似的事情

```
inputSearch.typeahead({
    source: function (query, processSearchResults) {
        query = inputSearch.val();
        return $.getJSON('ticker_search', { query: query }, function (data) {
            if(data && data.ResultSet && $.isArray(data.ResultSet.Result)){
                processSearchResults($.map(data.ResultSet.Result, function(item, index){
                    return item.symbol;
                }));
            }
        });

    }
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/nbdpD/1/)

# python - 在 Raspberry Pi 上运行 Google AppEngine Python SDK

> ID：14766625
> 
> 赞同：1
> 
> 时间：2013-02-08T06:01:35.773
> 
> 标签：python, google-app-engine, python-2.7, raspberry-pi

我正在尝试在我的 Raspberry Pi Model B 上为 Python 2.7 运行 GAE，并且我完全按照教程进行操作，但是每当我输入“dev_appserver.py”命令时，它都会返回：

bash：dev_appserver.py：找不到命令

或者

sudo：dev_appserver.py：找不到命令

不能在 Pi 上运行它吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-09T04:07:07.553

卡塞卡索，

您只需要指定 dev_appserver.py 的确切路径或先将其放入 PATH 中。

例如，以下是我从下载到在树莓派上运行的步骤：

```
wget http://googleappengine.googlecode.com/files/google_appengine_1.7.4.zip
unzip google_appengine_1.7.4.zip
cd google_appengine/demos/guestbook
../../dev_appserver.py . 
```

这对我有用，没有错误。为避免每次都输入 dev_appserver.py 的确切路径，您可以通过在 shell 中输入以下内容将其添加到您的 PATH 中：（
此路径假定您的用户名是“pi”并且您在主目录中解压缩了 appengine，否则需要稍微改变这条路径）

```
export PATH=$PATH:/home/pi/google_appengine 
```

这允许您尝试使用的方法：

```
dev_appserver.py . 
```

要在每次登录时自动将其添加到您的 PATH 中，您可以将该 PATH 行粘贴到 .bashrc 文件的末尾，该文件位于 /home/pi/.bashrc

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T06:10:49.590

我对 Raspberry Pi 没有任何经验，但您可以尝试在它前面加上前缀，`python`表示您想用 Python 执行文件（您的错误意味着它正在尝试执行`dev_appserver.py`它无法识别的命令）：

```
python /path/to/dev_appserver.py /path/to/your/app 
```

您还可以调整您的路径以包含`/path/to/google_appengine/`，以便搜索该位置并找到该命令，但我再次不熟悉 Raspberry Pi，因此这可能不是一个选项:)

似乎（至少是传闻）[有人](https://groups.google.com/forum/#!msg/google-appengine/oAFns0vAaXE/14lnjwk1RQEJ)让它运行了，但我想性能会有所欠缺。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T21:29:31.380

@Eric Olson 的路径不再有效，但他的回答很棒。似乎下面的 wget 链接至少现在可以工作（将版本更改为最新版本）。此外，为了便于参考，还包括其他使此操作变得超级简单的命令（解压缩和删除命令）：

```
wget -O gae.zip https://storage.googleapis.com/appengine-sdks/featured/google_appengine_1.9.15.zip
unzip gae.zip
rm gae.zip 
```

# asp.net - xml xslt 帮助 - 转换未正确呈现

> ID：14766627
> 
> 赞同：2
> 
> 时间：2013-02-08T06:01:58.080
> 
> 标签：asp.net, xml, wcf, xslt

我有一个用于绑定的 xml 文件：

```
<?xml version="1.0" encoding="utf-16"?>
<MyCustomer>
  <Customers>
    <CutomerCode>C001</CutomerCode>
    <CustomerName>Shahbaz</CustomerName>
    <City>Karachi</City>
    <Country>Pakistan</Country>
  </Customers>
  <Customers>
    <CutomerCode>C002</CutomerCode>
    <CustomerName>Imran</CustomerName>
    <City>Lahore</City>
    <Country>Pakistan</Country>
  </Customers>
</MyCustomer> 
```

我正在应用 XSLT：

```
<xsl:stylesheet
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 version="1.0">

 <xsl:strip-space elements="*"/>
 <xsl:output indent="yes"/>
 <xsl:template match="MyCustomer">
   <xsl:copy>
     <Customers>
       <xsl:apply-templates select="Customers/*"/>
     </Customers>
   </xsl:copy>
 </xsl:template>
 <xsl:template match="Customers/*">
   <xsl:copy>
       <xsl:value-of select="."/>
   </xsl:copy>
 </xsl:template>
 <xsl:template match="Customers/City">
      <xsl:element name="Address">
         <xsl:element name="City">
       <xsl:value-of select="." />
        </xsl:element>
    </xsl:element>
 </xsl:template>
 <xsl:template match="Customers/Country">
      <xsl:element name="Address">
         <xsl:element name="Country">
       <xsl:value-of select="." />
        </xsl:element>
    </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

这个 XSLT 给了我结果：

```
<?xml version="1.0" encoding="utf-16"?>
<MyCustomer>
  <Customers>
    <CutomerCode>C001</CutomerCode>
    <CustomerName>Shahbaz</CustomerName>
    <Address>
      <City>Karachi</City>
    </Address>
    <Address>
      <Couontry>Pakistan</Couontry>
    </Address>
    <CutomerCode>C002</CutomerCode>
    <CustomerName>Imran</CustomerName>
    <Address>
      <City>Lahore</City>
    </Address>
    <Address>
      <Country>Pakistan</Country>
    </Address>
  </Customers>
</MyCustomer> 
```

虽然我需要这样的转换：

```
<?xml version="1.0" encoding="utf-16"?>
<MyCustomer>
  <Customers>
    <CutomerCode>C001</CutomerCode>
    <CustomerName>Shahbaz</CustomerName>
    <Address>
      <City>Karachi</City>
      <Country>Pakistan</Country>
    </Address>
    <CutomerCode>C002</CutomerCode>
    <CustomerName>Imran</CustomerName>
    <Address>
      <City>Lahore</City>
      <Couontry>Pakistan</Couontry>
    </Address>
  </Customers>
</MyCustomer> 
```

请帮助我想要正确的转换。请帮助我想要正确的 xslt 方法请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:48:13.970

您确定要解开个人的包装`Customers`吗？

由于这两个模板，您的样式表似乎无法正常工作：

```
<xsl:template match="Customers/City">
      <xsl:element name="Address">
         <xsl:element name="City">
       <xsl:value-of select="." />
        </xsl:element>
    </xsl:element>
 </xsl:template>
 <xsl:template match="Customers/Country">
      <xsl:element name="Address">
         <xsl:element name="Country">
       <xsl:value-of select="." />
        </xsl:element>
    </xsl:element>
 </xsl:template> 
```

这些为您提供了两种不同的`Address`元素。

您*可以*执行以下操作：

```
<xsl:template match="Customers/City">
    <Address>
        <City>
            <xsl:value-of select="." />
        </City>
        <Country>
            <xsl:value-of select="following-sibling::Country"/>
        </Country>
    </Address>
</xsl:template>
<xsl:template match="Customers/Country"/> 
```

这是一个类似的 XSLT 1.0 样式表，它给出了想要的结果，并且在我看来更简洁：

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="MyCustomer">
        <xsl:copy>
            <xsl:apply-templates select="@*"/>
            <Customers>
                <xsl:apply-templates select="node()"/>
            </Customers>
        </xsl:copy>
    </xsl:template>

    <xsl:template match="Customers">
        <xsl:apply-templates select="node()[not(self::City) and not(self::Country)]"/>
        <Address>
            <xsl:apply-templates select="City|Country"/>
        </Address>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<MyCustomer>
   <Customers>
      <CutomerCode>C001</CutomerCode>
      <CustomerName>Shahbaz</CustomerName>
      <Address>
         <City>Karachi</City>
         <Country>Pakistan</Country>
      </Address>
      <CutomerCode>C002</CutomerCode>
      <CustomerName>Imran</CustomerName>
      <Address>
         <City>Lahore</City>
         <Country>Pakistan</Country>
      </Address>
   </Customers>
</MyCustomer> 
```

# iphone - 如何安全地重命名 iOS 分发配置文件？

> ID：14766643
> 
> 赞同：0
> 
> 时间：2013-02-08T06:03:38.983
> 
> 标签：iphone, ios, xcode, app-store, provisioning-profile

我几个小时前刚刚提交了我的第一个应用程序，现在处于“等待审核”状态

但我犯了一个错误——

我已经命名了我的*分发*配置文件`My Company Distribution Profile`。我应该做的事情被命名为我的分发配置文件`My GAME Distribution Profile`。

现在该应用程序正在等待批准，并且我计划将来对我的应用程序进行更新，有没有一种方法可以安全地重命名我的分发配置文件？

如...我担心通过重新命名我当前的分发配置文件...我永远无法更新当前提交的应用程序吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T06:24:43.470

如果您坚持在您的应用程序挂起时更改配置名称，您可以继续拒绝您的二进制文件。然后对配置名称进行更改，并将其合并到您要提交的应用程序中，然后再次重新提交您的二进制文件。您可能会失去排队等待审核的位置，但这并没有太大的区别。所以我建议您拒绝二进制文件并进行更改然后重新提交。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T06:08:43.277

**如果您更改配置文件并使用此更改的配置上传您的应用程序，由于配置的差异，它将被视为新应用程序，而不是现有应用程序的更新。**

错误命名的个人资料有什么问题？除了你，没有人能看到。所以不用担心。

# php - PHP 在页面刷新时为 MYSQL 重新添加价值

> ID：14766651
> 
> 赞同：0
> 
> 时间：2013-02-08T06:04:50.120
> 
> 标签：php, mysql, variables, refresh

我对 php 相当陌生，但我知道我的方法，并且我对这个问题做了很多研究，但仍然找不到正确的解决方案。这是我的php代码：

```
 <html>
    <head>
    <body>
    <form action="default.php" method="POST">
    <input type="text" name="hname">
    <input type="submit" name="submit" value="Submit">
    </form>
    <?php
    require("connect.php");
    $con = mysql_connect("mysql10.000webhost.com","$username","$password");
    $pname=$_POST[hname];
    mysql_query("INSERT INTO web_members(name) VALUES('$pname')");
    $result = mysql_query("SELECT * FROM web_members");
    while($row = mysql_fetch_array($result))
    {
    echo $row['name'];
    echo "<br />";
    }

    ?> 
```

基本上它会很好地添加并显示变量，但是每当我刷新页面时，它都会重复该过程。有人能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:09:07.113

使用如下代码

```
<?php
require("connect.php");
$con = mysql_connect("mysql10.000webhost.com","$username","$password");
if(isset($_POST[hname]))
{
   $pname=$_POST[hname];
   mysql_query("INSERT INTO web_members(name) VALUES('$pname')");
   header("location:default.php");
}
else
{
   $result = mysql_query("SELECT * FROM web_members");
   while($row = mysql_fetch_array($result))
   {
      echo $row['name'];
      echo "<br />";
   }
}

?> 
```

希望它会帮助你。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:05:54.143

为此，您需要使用[POST/REDIRECT/GET 模式](http://community.developer.authorize.net/t5/The-Authorize-Net-Developer-Blog/Handling-Online-Payments-Part-6-Preventing-Duplicate-Submissions/ba-p/11168)。它可以防止表单重新提交。

# javascript - 在鼠标悬停时更改文本框的背景颜色

> ID：14766652
> 
> 赞同：-6
> 
> 时间：2013-02-08T06:04:56.013
> 
> 标签：javascript, css

我有一个文本框。现在鼠标悬停，蓝色显示。但实际上我不想在鼠标悬停时改变颜色。任何人都可以给我这个CSS样式...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:13:04.703

相当笼统和模棱两可的问题，但如果我理解正确的话，试试这个

```
textarea:hover, input[type="text"]:hover {
background: #ffffff;
} 
```

如果您的意思是焦点，请用焦点替换悬停并将#ffffff更改为您想要的颜色

# javascript - javascript 为全局声明的变量返回 undefind

> ID：14766653
> 
> 赞同：3
> 
> 时间：2013-02-08T06:04:58.300
> 
> 标签：javascript

我是 javascript 的初学者。我有一个疑问。下面给出了我的代码。当我运行这个时，第一个警报框显示“未定义”。我不明白为什么？非常感谢..

```
<html>
<head>
<script type="text/javascript">
var a = 123;
   function foo()
   {
     alert(a);
     var a = 890;
     alert(a);
   }
     foo();
     alert(a); 
</script>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T06:07:42.390

这是因为在*提升*之后*执行之前*，您的`foo()`函数内部看起来像：

```
function foo() {
    var a; // declaration hoisted to top
    alert(a); // the local var is 'undefined' at this point
    a = 890; // assignment operation not hoisted
    alert(a);
} 
```

在此处阅读有关吊装的更多信息：

*   [http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting](http://www.adequatelygood.com/2010/2/JavaScript-Scoping-and-Hoisting)
*   [http://javascriptissexy.com/javascript-variable-scope-and-hoisting-explained/](http://javascriptissexy.com/javascript-variable-scope-and-hoisting-explained/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T06:08:12.883

我相信这是因为变量声明提升。变量声明被提升到其范围的顶部。这意味着，从技术上讲，您的代码是这样执行的：

```
var a;
a = 123;
function foo()
{
  var a;
  alert(a);
  a = 890;
  alert(a);
}
foo();
alert(a); 
```

在这种情况下，`a`首先在全局范围内定义一个`undefined`值。然后，将其值设置为`123`。当函数被调用时，`a`会立即在函数中声明一个 new`undefined`值作为局部变量，这就是为什么`undefined`首先会发出警报。然后，您将其值设置为`890`。因此，即使您`var`在函数中间使用，也并不意味着它就是这样执行的，因为提升。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:09:46.300

您将变量 a 初始化两次，这会产生奇怪的结果。现在它的范围有两次不同。

```
<html>
<head>
<script type="text/javascript">
var a = 123;
   function foo()
   {
     alert(a);
     a = 890;
     alert(a);
   }
     foo();
     alert(a); 
</script>
</head>
<body>
</body>
</html> 
```

# mysql - 将多个值传递给Mysql中的单个参数时出错

> ID：14766657
> 
> 赞同：0
> 
> 时间：2013-02-08T06:05:31.283
> 
> 标签：mysql

`="select * from Table1 where Parameter in " "('" Join(Parameters!Parameter1.Value, "','") "')"+""`我在上述查询中遇到错误，错误是

> 报告处理过程中发生错误。无法为数据集“dataset1”设置命令文本。处理数据集“dataset1”的 CommandText 表达式时出错。

我已使用此查询将多个值传递给 MySql 中的单个参数。在我的其他报告中它工作正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:14:16.920

看起来你的 sql 字符串有一些问题。尝试这个：

```
="select * from Table1 where Parameter in ('" + Join(Parameters!Parameter1.Value, "','") + "')" 
```

你的 Join 函数中的分隔符应该放在第一位吗？您使用什么语言？我猜是php？如果是这样，我认为它应该是：

```
="select * from Table1 where Parameter in ('" + Join("','", Parameters!Parameter1.Value) + "')" 
```

祝你好运。

# java - for循环中的初始化

> ID：14766659
> 
> 赞同：-3
> 
> 时间：2013-02-08T06:05:40.353
> 
> 标签：java, for-loop

有人可以解释初始化部分在做什么吗？以及这个 for 循环将如何结束？

```
 The for loop generally I see is 
  for(int i =0; i<5; i++){

 }

but the following one is 
 int[][] xx = { {-1,0},  {0,1},{1,0},{0,-1}};

 for(int[] y : xx){
    int i = y[0];
    int j = y[1];

    System.out.println(i+" "+j);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T06:10:11.667

这称为*增强的 for 循环*。这：

```
for(int[] y : xx){
    . . .
} 
```

相当于：

```
for (int index = 0; index < xx.length; ++index) {
    int[] y = xx[index];
    . . .
} 
```

where`index`是编译器生成的变量名，它不会出现在`for`循环体中。

[您可以在此处](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html)和[此处](https://blogs.oracle.com/CoreJavaTechTips/entry/using_enhanced_for_loops_with)阅读有关它的更多信息。

# regex - Scala 列表匹配正则表达式

> ID：14766667
> 
> 赞同：6
> 
> 时间：2013-02-08T06:06:19.387
> 
> 标签：regex, list, scala, match

我有一个字符串列表和一个正则表达式模式。我想过滤列表中与正则表达式不匹配的项目。我正在使用以下似乎不起作用的代码：

```
val matching = token.filter(x => regex.pattern.matcher(x).matches) 
```

其中 token 是字符串列表，regex 是我要匹配的模式

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T06:17:42.557

您的代码应该可以工作。你确定你的正则表达式是正确的吗？

```
val regex = "a.c".r
val tokens = List("abc", "axc", "abd", "azc")
tokens filter (x => regex.pattern.matcher(x).matches)
//result: List[String] = List(abc, axc, azc) 
```

**编辑：**

给定您的正则表达式，确保以下示例符合您的期望：

```
val regex = """\b[b-df-hj-np-tv-z]*[aeiou]+[b-df-hj-np-tv-z]*\b""".r

regex.pattern.matcher("good").matches
//res3: Boolean = true

regex.pattern.matcher("no good deed").matches
//res4: Boolean = false 
```

该`matches`方法将尝试匹配整个字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T06:18:56.500

完整性的另一种选择：

```
val words = List("alpha", "bravo", "charlie", "alphie")
words.filter(_.matches("a.*"))

res0: List[java.lang.String] = List(alpha, alphie) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T06:18:02.927

你有没有试过这样：

```
val list = List("abc","efg","")
val p = java.util.regex.Pattern.compile(".*")

val matching = list filter { p.matcher(_).matches } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T06:43:02.847

我在使用 Scala 的 Regex 引擎时遇到的问题是它`.matches`会尝试匹配整个字符串，而不是对每个可能的子字符串进行匹配。

在许多正则表达式引擎中，以下代码将评估为匹配项：

`"alphie".match(/a/)`

在 Scala 中，`.matches`在这里使用会失败；它将尝试将“a”与整个字符串“alphie”进行匹配。但是，如果 Regex 是`/a*/`，它会起作用，因为该`*`字符将匹配零个或多个字符。

如果添加重复的正则表达式符号不是一个选项，该`findAllIn`方法可能很有用：

```
val words = List("alpha", "bravo", "charlie", "alphie")

val regex = "a.".r                                

//returns a tuple with the list item that matched, plus the text that fit the regex
for {
    word <- words
    matches <- regex.findAllIn(word)
} yield (word,matches) 
```

注意：`findAllIn`如果字符串中有多个匹配项，则可能多次匹配特定字符串。

# c# - 从 Outlook 调用（或传递参数）.aspx 页面

> ID：14766671
> 
> 赞同：-4
> 
> 时间：2013-02-08T06:06:39.943
> 
> 标签：c#, asp.net, email, outlook, sendmail

我是 asp.net 的新手。

我在 Outlook 邮件中有一个按钮，当使用单击该按钮时，我想从 Outlook 调用（或将参数传递给）.aspx 页面。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:09:34.760

```
Process.Start("http://example.com?Page.aspxparam=value"); 
```

将通过给定的 url 打开默认浏览器，并将 param=value 传递给页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:14:17.027

不能那样做。Outlook 不会运行任何脚本或处理 HTML 邮件中的任何表单代码。这些链接将起作用，但它们将在 Outlook 外部的单独浏览器窗口中打开。
还是您的意思是您编写了 Outlook 插件并将自定义按钮添加到 Outlook 检查器？

# java - 我是否正确使用 Java swing 和图形？

> ID：14766672
> 
> 赞同：8
> 
> 时间：2013-02-08T06:06:41.480
> 
> 标签：java, swing

我只是在学习 java，必须使用 java swing 库和 Graphics2D 类来做一些事情。基本上我必须画一个有多个部分的建筑起重机：一个身体（起重机的身体）和一些附加的手臂（基本上它看起来像这样：http: [//i.imgur.com/4YIkYqW.jpg](http://i.imgur.com/4YIkYqW.jpg)） .

我的问题围绕着我是否正确使用了 Java swing 类？在下面的代码中，我省略了不必要的代码，因为我只是想确保我的结构正确（正确使用 JPanel、paintComponent() 等）。任何帮助将不胜感激，因为我正在学习 Java！多谢你们。

```
public class CraneSimulator {

    ...
    public JFrame frame;
    public MyPanel panel;

    public CraneSimulator() {
        frame = new JFrame("CraneSimulator");

        ...

        panel = new MyPanel();
        frame.add(panel);

    }

    public static void main(String[] args) {
        CraneSimulator simulator = new CraneSimulator();    
    }
}   

class MyPanel extends JPanel {
    CraneBody body;
    CraneArm arm1;
        ...
    Graphics2D graphics;

    public MyPanel() {
        body = new CraneBody();
        arm1 = new CraneArm(body);
        ...
        addMouseListener(new MouseAdapter() {
            public void mousePressed(MouseEvent e) {
                ...         }
            }
            public void mouseReleased(MouseEvent e) {
                    ...
            }
        });

        addMouseMotionListener(new MouseAdapter() {
            public void mouseDragged(MouseEvent e) {
                ...             
            }
        });
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        graphics = (Graphics2D) g;
        ...
        body.paint(g);      
        arm1.paint(g);  
    }
}

class CraneBody {
    ...

    public CraneBody() {
         ....
    }
    ...
    public void paint(Graphics g) {
        Graphics2D g2 = (Graphics2D) g;

            // Use g2 to actual paint crane Body on screen here (ie. g2.drawRect, etc)      
    }
}

class CraneArm {
    ...

    public CraneArm() {
         ....
    }
    ...
    public void paint(Graphics g) {
        Graphics2D g2 = (Graphics2D) g;

            // Use g2 to actual paint the crane armon screen here (ie. g2.drawRect, etc)        
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T06:14:30.647

您的代码结构良好，并遵循使用 Java 图形和 OOP 的优秀实践。

正如评论中所建议的，如果您没有理由将其设为实例变量，则最好在*本地定义您的 Graphics 对象。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T09:33:42.463

您的代码几乎是完美的。但有几个建议：

1.  声明初始化有一些[优点](https://stackoverflow.com/questions/3918578/should-i-initialize-variable-within-constructor-or-outside-constructor)；
2.  你只需要一个MouseAdapter；
3.  使用 Graphics2D 作为参数，这样您就不需要再次从 Graphics 转换它。
4.  删除字段“图形”，改为将其设为局部变量。（感谢@GuillaumePolet）。

有些人可能不同意，但根据您的代码，我会进行这些更改以使其更整洁。

```
public class CraneSimulator {
    ...
    private JFrame frame = new JFrame("CraneSimulator");
    private MyPanel panel = new JPanel();

    public CraneSimulator() {
        ...
        frame.add(panel);
    }
    public static void main(String[] args) {
        CraneSimulator simulator = new CraneSimulator();    
    }
}   

class MyPanel extends JPanel {
    CraneBody body = new CraneBody();
    CraneArm arm1 = new CraneArm(body);
    ...
    MouseAdapter mAdapter = new MouseAdapter() {
        public void mousePressed(MouseEvent e) {
            ...
        }
        public void mouseReleased(MouseEvent e) {
            ...
        }
        public void mouseDragged(MouseEvent e) {
            ...             
        }
    }

    public MyPanel() {
        ...
        addMouseListener(mAdapter);
        addMouseMotionListener(mAdapter);
    }

    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D graphics = (Graphics2D) g;
        ...
        body.paint(graphics);
        arm1.paint(graphics);  
    }
}

class CraneBody {
    ...
    public CraneBody() {
         ....
    }
    ...
    public void paint(Graphics2D g) {
        // You don't need to cast a Graphics again.      
    }
}

class CraneArm {
    ...
    public CraneArm() {
         ....
    }
    ...
    public void paint(Graphics2D g) {
        // You don't need to cast a Graphics again.
    }
} 
```

# java - HashMap.clear() 是否将内部哈希表调整为原始大小？

> ID：14766677
> 
> 赞同：3
> 
> 时间：2013-02-08T06:07:08.460
> 
> 标签：java, hashmap

这段代码执行后 HashMap 会发生什么？

```
HashMap m  = new HashMap();
for (int i = 0; i < 1024 * 1024; i++)
    m.put(i, i);
m.clear(); 
```

1M 之后，内部哈希表将从原来的 16 增长到 1MB。clear() 是否将其调整为原始大小？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T06:09:22.590

不，表格保持其大小。所有元素都设置为`null`：

```
public void clear() {
    modCount++;
    Entry[] tab = table;
    for (int i = 0; i < tab.length; i++)
        tab[i] = null;
    size = 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T06:09:27.363

这是一个实现细节，我不知道[您正在阅读什么 API](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)，其中包含有关 1M 放置或内部哈希表的任何内容。

让我们看一个实现：

```
 620       /**
  621        * Removes all of the mappings from this map.
  622        * The map will be empty after this call returns.
  623        */
  624       public void clear() {
  625           modCount++;
  626           Entry[] tab = table;
  627           for (int i = 0; i < tab.length; i++)
  628               tab[i] = null;
  629           size = 0;
  630       } 
```

[http://www.docjar.com/html/api/java/util/HashMap.java.html#621](http://www.docjar.com/html/api/java/util/HashMap.java.html#621)

所以 OpenJDK 7 的实现并没有恢复原来的大小。

# c - 在结构错误中指向取消引用

> ID：14766683
> 
> 赞同：4
> 
> 时间：2013-02-08T06:07:53.477
> 
> 标签：c, pointers, linked-list, dereference, circular-list

我有一个创建循环列表的功能，我在编译时遇到问题，不确定它是否是语法，如果有人可以提供帮助，不胜感激。

```
 void CreateCircularList(struct node** listRef, struct node** tailRef)

    {    
    Push(&*listRef, "String 1");
    *tailRef=*listRef;
    Push(&*listRef, "String 2");
    Push(&*listRef, "String 3");
    Push(&*listRef, "String 4");

    *(tailRef->next)=*listRef;

    } 
```

编译器在最后一行标记一个错误：

> “成员引用基类型 'struct node*' 不是结构或联合”

任何想法为什么？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T06:10:24.520

你可能想要

```
 (*tailRef)->next = *listRef; 
```

作为最后的任务。

你不能写`tailRef->next`，因为`tailRef`它是一个指向指针的指针。

出于可读性的原因，我还建议只编码 `Push(listRef, "Some string");`而不是你的。`Push(&*listRef, "Some string");`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T06:13:23.410

我认为您需要按以下方式进行操作

```
(*tailRef)->next = *listRef; 
```

即获取`struct node *`指向的 by `tailref`，取消引用`->`以获取指向的元素`struct node *`，`next`然后将其设置为指向的元素`listRef`

# mysql - 在 db 字段下检索到不正确的数据

> ID：14766684
> 
> 赞同：0
> 
> 时间：2013-02-08T06:08:04.870
> 
> 标签：mysql, sql

我在下面有一个查询：

```
SELECT sa.StudentId, GROUP_CONCAT( DISTINCT StudentAnswer
ORDER BY StudentAnswer
SEPARATOR ',' ) AS StudentAnswer
FROM Student st
INNER JOIN Student_Answer sa ON ( st.StudentId = sa.StudentId )
INNER JOIN Student_Response sr ON ( sa.StudentId = sr.StudentId )
INNER JOIN Question q ON ( sr.QuestionId = q.QuestionId )
INNER JOIN Answer an ON q.QuestionId = an.QuestionId
LEFT JOIN Reply r ON q.ReplyId = r.ReplyId
LEFT JOIN Option_Table o ON q.OptionId = o.OptionId
WHERE q.SessionId =27
GROUP BY sa.StudentId, q.QuestionId
ORDER BY StudentAlias, q.SessionId 
```

它输出的结果在这里：

![在此处输入图像描述](../Images/b7458ec9ed4376077bbae901976f9d97.png)

现在我计划编写一个更大的查询，因此我将所有这些表都包含在`FROM`

但结果中的问题是`StudentAnswer`列。它显示学生的重复学生答案。这是不正确的，好像我通过从`FROM`语句中删除一些表来使查询稍微小一些，然后它显示正确的学生答案：

```
SELECT sa.StudentId, q.QuestionId, GROUP_CONCAT( DISTINCT StudentAnswer
ORDER BY StudentAnswer
SEPARATOR ',' ) AS StudentAnswer
FROM Student st
INNER JOIN Student_Answer sa ON ( st.StudentId = sa.StudentId )
INNER JOIN Question q ON ( sa.QuestionId = q.QuestionId )
WHERE q.SessionId =27
GROUP BY sa.StudentId, q.QuestionId
ORDER BY StudentAlias, q.SessionId 
```

![在此处输入图像描述](../Images/fc9aa14afdb6d7466c068ad5098f424d.png)

我的问题是，我能否`StudentAnswer`在第一个查询的列下获得正确的学生答案？

以下是表格列表：

**学生：**

```
StudentId (PK auto)  StudentForename  StudentSurname 
39                   Luke             McFadzen
40                   Chris            Tucker 
```

**学生回答：**

```
StudentAnswerId (PK auto)  QuestionId (FK Question)  StudentAnswer  StudentId (FK student)
1                          72                         D             39
2                          73                         B             39
3                          73                         C             39
4                          73                         D             39
5                          72                         C             40
6                          73                         A             40
7                          73                         C             40
8                          73                         E             40 
```

**学生响应：**

```
StudentResponseId (PK auto)  QuestionId (FK Question) ResponseTime  StudentId (FK student)
1                            72                       00:00:05      39
2                            73                       00:00:15      39
3                            72                       00:00:09      40
4                            73                       00:00:26      40 
```

**问题：**

```
QuestionId (PK auto)  QuestionNo  SessionId (FK Session) ReplyId (FK Reply) OptionId (FK Option)    
72                    1           23                     1                  3
73                    2           23                     2                  7 
```

**回答：**

```
AnswerId (PK auto)    QuestionId (FK Question)      Answer  
1                          72                         C             
2                          73                         A             
3                          73                         C             
4                          73                         D 
```

**回复：**

```
ReplyId (PK auto)  ReplyType
1                  Single
2                  Multiple 
```

**选项表：**

```
ReplyId (PK auto)  ReplyType
1                  A-C
2                  A-D
3                  A-E
4                  A-F
5                  A-G
6                  A-H
7                  A-I
8                  A-J 
```

**完整查询：**

```
SELECT
sa.StudentId, StudentAlias, StudentForename, StudentSurname, q.SessionId, q.QuestionId,
QuestionNo, QuestionContent, o.OptionType, q.NoofAnswers, 
GROUP_CONCAT( DISTINCT Answer ORDER BY Answer SEPARATOR ',' ) AS Answer, r.ReplyType, QuestionMarks, 
GROUP_CONCAT(DISTINCT StudentAnswer ORDER BY StudentAnswer SEPARATOR ',') AS StudentAnswer, ResponseTime, MouseClick, StudentMark
FROM Student st
INNER JOIN Student_Answer sa ON (st.StudentId = sa.StudentId)
INNER JOIN Student_Response sr ON (sa.StudentId = sr.StudentId)
INNER JOIN Question q ON (sr.QuestionId = q.QuestionId)
INNER JOIN Answer an ON q.QuestionId = an.QuestionId
LEFT JOIN Reply r ON q.ReplyId = r.ReplyId
LEFT JOIN Option_Table o ON q.OptionId = o.OptionId
WHERE q.SessionId =27
GROUP BY sa.StudentId, q.QuestionId
ORDER BY StudentAlias, q.SessionId

Student - Student_Answer (StudentId)
Student - Student_Response (StudentId)
Student_Answer - Question (QuestionId)
Student_Response - Question (QuestionId)
Question - Answer (QuestionId)
Question - Reply (ReplyId)
Question - Option_Table (OptionId) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:43:41.610

实际上你的查询已经在工作了，你只需要添加这个条件

```
SELECT  sa.StudentId
    ,   StudentForename
    ,   StudentSurname
    ,   q.SessionId
    ,   q.QuestionId
    ,   QuestionNo
    ,   o.OptionType
    ,   GROUP_CONCAT(DISTINCT Answer ORDER BY Answer SEPARATOR ',') AS Answer
    ,   r.ReplyType
    ,   GROUP_CONCAT(DISTINCT StudentAnswer ORDER BY StudentAnswer SEPARATOR ',') AS StudentAnswer
    ,   ResponseTime
FROM    Student st
        INNER JOIN Student_Answer sa
            ON (st.StudentId = sa.StudentId)
        INNER JOIN Student_Response sr
            ON (sa.StudentId = sr.StudentId)
                AND sa.QuestionID = sr.QuestionID -- <<==lacking condition
        INNER JOIN Question q
            ON (sr.QuestionId = q.QuestionId)
        INNER JOIN Answer an
            ON q.QuestionId = an.QuestionId
        LEFT JOIN Reply r
            ON q.ReplyId = r.ReplyId
        LEFT JOIN Option_Table o
            ON q.OptionId = o.OptionId
GROUP   BY sa.StudentId , q.QuestionId; 
```

或者，您可以使用子查询连接值

```
SELECT  DISTINCT sa.StudentId
    ,   StudentForename
    ,   StudentSurname
    ,   q.SessionId
    ,   q.QuestionId
    ,   QuestionNo
    ,   o.OptionType
    ,   an.QuestionAnswer
    ,   r.ReplyType
    ,   sa.StudentAns
    ,   ResponseTime
FROM    Student st
        INNER JOIN 
        (
            SELECT  StudentID, QuestionID,
                    GROUP_CONCAT(StudentAnswer ORDER BY StudentAnswer SEPARATOR ',') StudentAns
            FROM    Student_Answer
            GROUP   BY StudentID, QuestionID
        )sa ON (st.StudentId = sa.StudentId) 
        INNER JOIN Student_Response sr
            ON (sa.StudentId = sr.StudentId) AND sa.QuestionID = sr.QuestionID
        INNER JOIN Question q
            ON (sr.QuestionId = q.QuestionId) 
        INNER JOIN 
        (
            SELECT  QuestionID, 
                    GROUP_CONCAT(DISTINCT Answer ORDER BY Answer) QuestionAnswer
            FROM    Answer
            GROUP   BY QuestionID
        ) an
            ON q.QuestionId = an.QuestionId
        LEFT JOIN Reply r
            ON q.ReplyId = r.ReplyId
        LEFT JOIN Option_Table o
            ON q.OptionId = o.OptionId 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/3f3e4/16)

# javascript - 如何通过mvc4中的提交按钮传递自定义参数

> ID：14766686
> 
> 赞同：0
> 
> 时间：2013-02-08T06:08:12.777
> 
> 标签：javascript, asp.net, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

大家好，我正在使用 mvc4 创建一个登录页面，其中登录凭据是从数据库中获取的。在数据库中，相关表包含 3 列，即：**userid**、**password**和**partnerid**。当用户输入他的凭据并单击提交按钮时，如果登录成功，他将被带到一个地址如下的页面：

```
http://localhost:58361/Home?result1=true 
```

这是我的提交按钮代码：

```
<input type="submit" value="Login" class="login_button" onclick="return validateLoginPage()" /> 
```

这里的 validateLoginPage 是一个 js 函数，它检查是否有任何输入字段没有留空。

我的要求是单击提交按钮时，用户被重定向到的页面地址如下所示：

```
http://localhost:58361/Home?result1=true?partnerid='somevalue' 
```

**partnerid 值取自数据库并存储在 ViewData 中**

如何做到这一点？提前致谢

**编辑**

这是提交按钮的操作结果

```
 public ActionResult Index(LoginModel model,string res)
    {
        LoginUser = model.Userid;
        LoginPassword = model.Password;
        verify(LoginUser, LoginPassword);
        res = result;
        if (res == "true")
        {
            return RedirectToAction("Index", "Home", new { result1 = result });
        }
        else
        {
            ViewData["alert"] = "The Login Credentials are Incorrect";
            return View();
        }
    } 
```

**verify**方法与数据库验证登录凭据是否正确，并返回字符串值**“result”**为真或假

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T06:39:14.557

如果我对您的理解正确，您想提交一个表单，引导用户

```
Home?result1=true?partnerid='somevalue' 
```

我将其解释为使用 null 操作（默认为 Index）并始终传递 result1=true 和来自 ViewData 的 partnerid

```
 @using(Html.BeginForm(null, "Home", FormMethod.Get, 
new { result1=true, partnerid='@(ViewData["somevalue"])' })) //for query string 
```

**警告：**正如 Karthik 所指出的，此代码未经测试。更能证明这一点：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:11:37.933

创建一个隐藏的输入来保存你的值，如下所示：

```
<input type="hidden" value="XXX" name="refNameHere" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:23:21.343

假设我已经正确理解了您的问题，并且您的 Home Index 控制器方法看起来像这样

```
public ActionResult Index(int partnerid)
{
    ViewBag.PartnerId = partnerid;
    return View();
} 
```

您应该可以在登录方法中执行此操作

```
public ActionResult Login()
{
    // Authentication stuff goes here
    return RedirectToAction("Index", "Home", new { partnerid = 1 });
} 
```

由于您为处理登录的操作添加了代码，从而简化了我的编辑。您所要做的就是从您的数据源中获取 partnerid，将其放在一个字符串中并将其包装在 '' 中，然后更改

```
return RedirectToAction("Index", "Home", new { result1 = result }); 
```

到

```
return RedirectToAction("Index", "Home", new { result1 = result, partnerid = partnerId }); 
```

那么您必须在 HomeController 上添加一个 Index 操作以获取名为 result1 和 partnerid 的字符串参数，并且一切都应该工作

# c++ - 调用 C++ 函数并更改其参数（链表）

> ID：14766689
> 
> 赞同：0
> 
> 时间：2013-02-08T06:08:23.677
> 
> 标签：c++, function, pointers, linked-list

我是 C++ 的初学者，我在 main 中定义了一个链表，我将它作为参数提供给一个函数，在该函数内部，列表发生了变化，但是当程序从函数中出来时，链表没有改变我应该怎么做? 就像这样

```
mnlist nodes;
nodes.first = NULL:
typelist typel;
typel.first = NULL;
nodes = list-scheduling(nodes,typel);//this is my function 
```

但是当程序退出列表调度时 typel 不会改变

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:11:16.980

（我不知道一个名为“list-scheduling”的函数是如何编译的......）

无论如何，使用参考。代替

```
void foo(LinkedList l); 
```

将其声明为

```
void foo(LinkedList &l); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:17:50.400

你应该读[这个](http://www.cs.cornell.edu/courses/cs213/2002fa/lectures/Lecture02/Lecture02.pdf)

按值传递：

```
int n =10
function(int n)
{
n++;
cout<<n ;  //n==11
}
cout<<n ; //n=10\. only local value changes 
```

通过参考：

```
int n=10;
function(int &n)
{
n++;
cout<<n ; //n=11
}
cout<<n; //n=11\. Passed address of n, so changes will reflect 
```

# iphone - 在“应用程序想使用您当前的位置”中不允许点击的委托方法是什么？

> ID：14766713
> 
> 赞同：1
> 
> 时间：2013-02-08T06:10:12.867
> 
> 标签：iphone, ios, objective-c, geolocation

我想在用户按下不允许弹出“应用程序想使用您当前的位置”时打开一个弹出窗口。有没有任何委托方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T06:13:03.123

[你不敢看文档...](https://developer.apple.com/library/mac/documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/doc/uid/TP40007124-CH3-SW14)

```
- (void)locationManager:(CLLocationManager *)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status
{
    if (status == kCLAuthorizationStatusDenied) {
        // FA1LZ
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:16:31.787

检查`locationManager:didFailWithError:`和。`locationManager:didChangeAuthorizationStatus:`_`CLLocationManagerDelegate`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:18:10.413

首先需要获取当前位置。阅读此[文档](http://tech.pro/tutorial/971/getting-your-location-in-an-iphone-application)以获取当前位置。

并使用这种方法

```
- (void)locationManager:(CLLocationManager *)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status 
```

**参数 ：**

**1 - manager**
报告事件的位置管理器对象。
**2 - status**
应用程序的新授权状态。

**本方法的使用**

只要应用程序使用位置服务的能力发生变化，就会调用此方法。由于用户允许或拒绝为您的应用程序或整个系统使用位置服务，因此可能会发生更改。

更多信息阅读[官方文档](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManagerDelegate_Protocol/CLLocationManagerDelegate/CLLocationManagerDelegate.html#//apple_ref/doc/uid/TP40007124-CH3-SW14)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T06:18:52.603

您可以使用以下委托方法：

```
- (void)locationManager:(CLLocationManager*)manager didFailWithError:(NSError*)error
{
    if([error code]== kCLErrorDenied)
        self.locationDenied = YES;

        switch ([error code]) {
            // "Don't Allow" on two successive app launches is the same as saying "never allow". The user
            // can reset this for all apps by going to Settings > General > Reset > Reset Location Warnings.
        case kCLErrorDenied:
            [appDelegate showAllowGPSLocationView];
        default:
            break;
        }

    self.locationDefined = NO;
} 
```

当用户不允许 GPS 定位时，将调用上述委托方法。您可以使用“kCLErrorDenied”检查并处理您想做的任何事情。

这里，“showAllowGPSLocationView”是“AppDelegate”中实现的方法，用于通知用户允许 GPS 定位。

希望，对你有帮助。

快乐编码:)

干杯!

# c# - 贷款摊销代码计算

> ID：14766716
> 
> 赞同：1
> 
> 时间：2013-02-08T06:10:36.300
> 
> 标签：c#

我有一个贷款摊销代码，我在网上找到并进行了一些修改以满足我的需要（C#）。我遇到的问题是计算包含在循环中的每月利息。它不会返回正确的值。

下面是我的代码（有点长）：

```
 private void CalculateLoan()
        {
            // Make sure we use types that hold decimal places             
            DateTime payDate = DateTime.ParseExact(_startDate.Value, "yyyyMMdd", null);
            double interestRate = 0;
            double monthlyInterest = 0;
            double loanAmount;
            short amortizationTerm = 0;
            double currentBalance;
            double cummulativeInterest = 0;
            double monthlyPrincipal = 0;
            double cummulativePrincipal = 0;

            loanAmount = double.Parse(_principal.Value);
            currentBalance = loanAmount;
            interestRate = double.Parse(_interestRate.Value) * 0.01;
            amortizationTerm = short.Parse(_period.Value);

            // Calculate the monthly payment and round it to 2 decimal places           
            var monthlyPayment = ((interestRate / 12) / (1 - (Math.Pow((1 + (interestRate / 12)), -(amortizationTerm))))) * loanAmount;
            monthlyPayment = Math.Round(monthlyPayment, 2);

            // Storage List
            List<AmortPayment> amortPaymentList = new List<AmortPayment>();

            // Loop for amortization term (number of monthly payments)
            for (int j = 0; j < amortizationTerm; j++)
            {
                // Calculate monthly cycle
                monthlyInterest = currentBalance * interestRate;  **<-----problem here**
                monthlyPrincipal = monthlyPayment - monthlyInterest;
                currentBalance = currentBalance - monthlyPrincipal;

                if (j == amortizationTerm - 1 && currentBalance != monthlyPayment)
                {
                    // Adjust the last payment to make sure the final balance is 0
                    monthlyPayment += currentBalance;
                    currentBalance = 0;
                }

                // Reset Date
                payDate = payDate.AddMonths(1);
                // Add to cummulative totals
                cummulativeInterest += monthlyInterest;
                cummulativePrincipal += monthlyPrincipal;

                amortPaymentList.Add
                    (new AmortPayment 
                    { 
                      RowNumber = j + 1,
                      Date = payDate,
                      ScheduledPayment = Math.Round(monthlyPayment, 2),                                        
                      Interest = Math.Round(monthlyInterest, 2),
                      TotalRepayment = Math.Round(monthlyPayment + monthlyInterest, 2),
                      Balance = Math.Round(currentBalance, 2),   
                      TotalInterest = Math.Round(cummulativeInterest, 2),
                      TotalBalance = Math.Round(currentBalance + cummulativeInterest, 2)
                    });

                // Add values to SAP matrix          
                _rowNo.Value = (j + 1).ToString();
                _date.ValueEx = payDate.ToString("yyyyMMdd");
                _payment.Value = monthlyPayment.ToString();
                _interest.Value = monthlyInterest.ToString();
                _totalRepayment.Value = (monthlyPayment + monthlyInterest).ToString();
                _balancePrincipal.Value = currentBalance.ToString();
                _balanceInterest.Value = cummulativeInterest.ToString();
                _total.Value = (currentBalance + cummulativeInterest).ToString();

                _form.Freeze(true);
                oMatrix.AddRow();
                _form.Update();
                _form.Freeze(false);
            }
        } 
```

有人可以告诉我声明哪里出错了 `monthlyInterest = currentBalance * interestRate;`吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:15:29.493

您应该使用巨额利率而不是年利率，只需将利率设为 12

```
monthlyInterest = currentBalance * interestRate / 12; 
```

# flash - 如何将不同的视频流式传输到同一个 RTMP URL？

> ID：14766717
> 
> 赞同：2
> 
> 时间：2013-02-08T06:10:42.723
> 
> 标签：flash, apache-flex, red5, rtmp, live-streaming

我正在尝试使用 Red5 作为服务器，Flash 和 Adob​​e Air 作为客户端来开发视频会议应用程序。在学习了如何使用 Flex 创建一个简单的视频聊天应用程序之后，我很困惑，我们如何将会议中许多人的视频流式传输到同一个 rtmp url？ **我的 rtmp 网址是：rtmp://localhost/MyFirstRed5Server**

现在我无法理解这里的逻辑。我需要为不同的用户使用不同的 URL，或者我可以将所有用户的视频流式传输到同一个 rtmp url？我是初学者，所以请不要介意我的问题和我的英语中的歧义。我只是需要一些提醒。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T07:33:19.123

不，

每个用户都将连接到相同的 rtmp-url。但是，当您加载视频时，您会连接到另一个 NetStream。

所以 NetConnection 可以在所有 NetStream 之间共享，当然视频聊天中的每个客户端都有自己的流。

您只需要确保发送者和接收者知道流的名称，可能您通过 RTMP 或通过 SharedObject 发送有关流名称的消息。当有人开始在 Red5/Server-Side 上流式传输时，您可以捕捉到该事件。因此，客户端实际上不需要主动创建消息并预先发送一些东西。您可以在服务器端侦听该事件，然后同步到所有客户端（正在广播的客户端除外）。

塞巴斯蒂安

# jquery - 单击事件处理程序中未添加类

> ID：14766719
> 
> 赞同：1
> 
> 时间：2013-02-08T06:10:49.557
> 
> 标签：jquery

我正在学习 jQuery，但我遇到了`.on()`事件处理程序的问题。我不知道为什么这个类`done`没有被添加到动态添加的新列表项中。任何援助将不胜感激。 [jsFiddle](http://jsfiddle.net/jack2ky/Xarvu/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script src="http://code.jquery.com/jquery-latest.js"></script>
<style>
ul li{
    list-style: none;
}
.done{
    text-decoration: line-through;
    color: red;
}
.green{
    color:green;
}
</style>
</head>
<script type="text/javascript">
$(document).ready(function(){
    $('#taskText').keydown(function(evt){
        if(evt.keyCode == 13){
            addTask(this, evt);
        }
    });
    $('#addTask').click(function(evt){
        addTask(document.getElementById('taskText'), evt);
    });
//the problem is the code below//

    $('#tasks li').on("click", function(evt){
        $(this).addClass('done');
    });
});
function addTask(textBox, evt){
    evt.preventDefault();
    var taskText = textBox.value;
    $("<li>").text(taskText).appendTo('#tasks');
    textBox.value = '';
};
</script>
<body>

<ul id = "tasks">

</ul>
<input type= 'text' id ='taskText'>
<input type = 'submit' id ="addTask" />
<div class = "green"> green text</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T06:13:18.573

您需要为事件绑定后创建的元素指定[可选`selector`参数：`.on()`](http://api.jquery.com/on/)

```
$('#tasks').on('click', 'li', function(evt){
    $(this).addClass('done');
}); 
```

直接来自 API 文档：

> **事件处理程序仅绑定到当前选定的元素；当您的代码调用`.on()`.** 为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面*后*选择元素并附加事件处理程序。或者，使用委托事件来附加事件处理程序，如下所述。
> 
> 委托事件的优点是它们可以处理来自以后添加到文档的*后代元素的事件。*通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。例如，此元素可以是模型-视图-控制器设计中视图的容器元素，或者`document`如果事件处理程序想要监视文档中的所有冒泡事件。在加载任何其他 HTML 之前，文档元素在文档中是可用的`head`，因此在此处附加事件是安全的，而无需等待文档准备好。

# performance - 从 oracle 获取 blob 数据时的限制

> ID：14766722
> 
> 赞同：1
> 
> 时间：2013-02-08T06:11:08.827
> 
> 标签：performance, oracle, blob, jmeter

我正在尝试使用 JDBC 从 oracle 下载 BLOB 数据。为了知道获取blob数据的平均响应时间，我正在使用JMeter调用一个或多个线程的Getting blob data Java程序。但是我得到了我无法理解的奇怪响应时间。

我在下面尝试了一些测试。（blob数据大小为1M）

1.用Jmeter在一个线程中获取blob数据

2.用Jmeter在两个线程中获取blob数据

3.在两个线程中使用JMeter在同一个表中获取不同的blob数据

4.在两个线程中使用Jmeter在不同的表中获取不同的blob数据。

.从测试1和2，我发现测试2的响应时间几乎是测试1的两倍我无法理解这一点（我的服务器有四个核心，没有人使用它）。我怀疑拿到相同的blob数据时是否有锁所以我尝试了测试3。但是响应时间与test2几乎相同。然后我尝试了测试4以确保我访问时是否有锁同一张表，但测试 4 的响应时间也与测试 3 相同。

我认为oracle可以同时处理很多用户的请求，所以我无法理解我从测试中得到的结果。oracle在同时获取blob数据时是否有一些限制？

这是获取blob数据的代码

```
 public SampleResult runTest(JavaSamplerContext arg0) {
              ////
    try {

        Class.forName(JDBC_CLASS_NAME);
        conn=DriverManager.getConnection(JDBC_THIN+dbserverIp+":"+port+":"+sid,dbuser,userPwd);
        statement=conn.createStatement();
        rs=statement.executeQuery(sqlText);
        responseStr=RESPONSE_DATA_OK_HEAD+KAIGYOU_CODE;
        if(rs.next()){
            String fileId=rs.getString(FILE_ID_COLUMN_NAME);
            oracle.sql.BLOB blob=((OracleResultSet)rs).getBLOB(BLOB_COLUMN_NAME);
            in=blob.getBinaryStream();

            int size=blob.getBufferSize();
            byte[] buffer=new byte[size];
            int len=-1;
            bos=new ByteArrayOutputStream();
            while((len=in.read(buffer))!=-1){
                readCount=readCount+1;
                bos.write(buffer,0,len);
            }
            byte[] blobValues=bos.toByteArray();
            responseStr=responseStr+fileId+","+blobValues.length+","+readCount+KAIGYOU_CODE;

        }else{
            responseStr=RESPONSE_DATA_ZERO;
        }
    } catch (Exception e) {
        e.printStackTrace();
        getNGSampleResult(e,sr);
        return sr;
    }finally{
        try {
            if(rs!=null){
                rs.close();
                rs=null;
            }
            if(statement!=null){
                statement.close();
                statement=null;
            }
            if(conn!=null){
                conn.close();
                conn=null;
            }
            if(in!=null){
                in.close();
                in=null;
            }
            if(bos!=null){
                bos.close();
                bos=null;
            }
        } catch (Exception e) {
            e.printStackTrace();
            getNGSampleResult(e,sr);
            return sr;
        }
    }
    sr.sampleEnd();
    sr.setSuccessful(true);
    sr.setResponseCodeOK();
    sr.setResponseMessageOK();
    sr.setResponseData(responseStr,"UTF-8");
    sr.setDataType(SampleResult.TEXT);
    return sr;
} 
```

这是测试计划

```
<?xml version="1.0" encoding="UTF-8"?>
<jmeterTestPlan version="1.2" properties="2.1">
<hashTree>
<TestPlan guiclass="TestPlanGui" testclass="TestPlan" testname="Test Plan"    enabled="true">
  <stringProp name="TestPlan.comments"></stringProp>
  <boolProp name="TestPlan.functional_mode">false</boolProp>
  <boolProp name="TestPlan.serialize_threadgroups">false</boolProp>
  <elementProp name="TestPlan.user_defined_variables" elementType="Arguments"  guiclass="ArgumentsPanel" testclass="Arguments" testname="User Parameter" enabled="true">
    <collectionProp name="Arguments.arguments">
      <elementProp name="env_test_date" elementType="Argument">
        <stringProp name="Argument.name">env_test_date</stringProp>
        <stringProp name="Argument.value">20130202</stringProp>
        <stringProp name="Argument.metadata">=</stringProp>
      </elementProp>
      <elementProp name="env_test_case" elementType="Argument">
        <stringProp name="Argument.name">env_test_case</stringProp>
        <stringProp name="Argument.value">Run at the same time</stringProp>
        <stringProp name="Argument.metadata">=</stringProp>
      </elementProp>
      <elementProp name="env_test_filesize" elementType="Argument">
        <stringProp name="Argument.name">env_test_filesize</stringProp>
        <stringProp name="Argument.value">1M</stringProp>
        <stringProp name="Argument.metadata">=</stringProp>
      </elementProp>
      <elementProp name="env_test_thread" elementType="Argument">
        <stringProp name="Argument.name">env_test_thread</stringProp>
        <stringProp name="Argument.value">2users</stringProp>
        <stringProp name="Argument.metadata">=</stringProp>
      </elementProp>
    </collectionProp>
  </elementProp>
  <stringProp name="TestPlan.user_define_classpath"></stringProp>
</TestPlan>
<hashTree>
  <ThreadGroup guiclass="ThreadGroupGui" testclass="ThreadGroup" testname="ULDLtest" enabled="true">
    <stringProp name="ThreadGroup.on_sample_error">continue</stringProp>
    <elementProp name="ThreadGroup.main_controller" elementType="LoopController" guiclass="LoopControlPanel" testclass="LoopController" testname="loop controller" enabled="true">
      <boolProp name="LoopController.continue_forever">false</boolProp>
      <intProp name="LoopController.loops">-1</intProp>
    </elementProp>
    <stringProp name="ThreadGroup.num_threads">2</stringProp>
    <stringProp name="ThreadGroup.ramp_time">1</stringProp>
    <longProp name="ThreadGroup.start_time">1358319600000</longProp>
    <longProp name="ThreadGroup.end_time">1358328499000</longProp>
    <boolProp name="ThreadGroup.scheduler">true</boolProp>
    <stringProp name="ThreadGroup.duration">300</stringProp>
    <stringProp name="ThreadGroup.delay"></stringProp>
  </ThreadGroup>
  <hashTree>
    <JavaSampler guiclass="JavaTestSamplerGui" testclass="JavaSampler" testname="Java DL BLOB Request" enabled="true">
      <elementProp name="arguments" elementType="Arguments" guiclass="ArgumentsPanel" testclass="Arguments" enabled="true">
        <collectionProp name="Arguments.arguments">
          <elementProp name="SQL_TEXT" elementType="Argument">
            <stringProp name="Argument.name">SQL_TEXT</stringProp>
            <stringProp name="Argument.value">select * from t_download_file_data t where t.file_id=&apos;testdata1M.csv&apos;</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
          </elementProp>
          <elementProp name="DB_USER" elementType="Argument">
            <stringProp name="Argument.name">DB_USER</stringProp>
            <stringProp name="Argument.value">xxxx</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
          </elementProp>
          <elementProp name="USER_PWD" elementType="Argument">
            <stringProp name="Argument.name">USER_PWD</stringProp>
            <stringProp name="Argument.value">xxxx</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
          </elementProp>
          <elementProp name="SID" elementType="Argument">
            <stringProp name="Argument.name">SID</stringProp>
            <stringProp name="Argument.value">xxxxx</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
          </elementProp>
          <elementProp name="DBSERVER_IP" elementType="Argument">
            <stringProp name="Argument.name">DBSERVER_IP</stringProp>
            <stringProp name="Argument.value">xxx.xx.xx.xx</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
          </elementProp>
          <elementProp name="PORT" elementType="Argument">
            <stringProp name="Argument.name">PORT</stringProp>
            <stringProp name="Argument.value">1521</stringProp>
            <stringProp name="Argument.metadata">=</stringProp>
          </elementProp>
        </collectionProp>
      </elementProp>
      <stringProp name="classname">sample.TestSamplerClient</stringProp>
    </JavaSampler>
    <hashTree/>
    <ResultCollector guiclass="TableVisualizer" testclass="ResultCollector" testname="Reust for table" enabled="false">
      <boolProp name="ResultCollector.error_logging">false</boolProp>
      <objProp>
        <name>saveConfig</name>
        <value class="SampleSaveConfiguration">
          <time>true</time>
          <latency>true</latency>
          <timestamp>true</timestamp>
          <success>true</success>
          <label>true</label>
          <code>true</code>
          <message>true</message>
          <threadName>true</threadName>
          <dataType>true</dataType>
          <encoding>false</encoding>
          <assertions>true</assertions>
          <subresults>true</subresults>
          <responseData>false</responseData>
          <samplerData>false</samplerData>
          <xml>true</xml>
          <fieldNames>false</fieldNames>
          <responseHeaders>false</responseHeaders>
          <requestHeaders>false</requestHeaders>
          <responseDataOnError>false</responseDataOnError>
          <saveAssertionResultsFailureMessage>false</saveAssertionResultsFailureMessage>
          <assertionsResultsToSave>0</assertionsResultsToSave>
          <bytes>true</bytes>
        </value>
      </objProp>
      <stringProp name="filename"></stringProp>
    </ResultCollector>
    <hashTree/>
    <ResultCollector guiclass="ViewResultsFullVisualizer" testclass="ResultCollector" testname="Result for graph" enabled="false">
      <boolProp name="ResultCollector.error_logging">false</boolProp>
      <objProp>
        <name>saveConfig</name>
        <value class="SampleSaveConfiguration">
          <time>true</time>
          <latency>true</latency>
          <timestamp>true</timestamp>
          <success>true</success>
          <label>true</label>
          <code>true</code>
          <message>true</message>
          <threadName>true</threadName>
          <dataType>true</dataType>
          <encoding>false</encoding>
          <assertions>true</assertions>
          <subresults>true</subresults>
          <responseData>false</responseData>
          <samplerData>false</samplerData>
          <xml>true</xml>
          <fieldNames>false</fieldNames>
          <responseHeaders>false</responseHeaders>
          <requestHeaders>false</requestHeaders>
          <responseDataOnError>false</responseDataOnError>
          <saveAssertionResultsFailureMessage>false</saveAssertionResultsFailureMessage>
          <assertionsResultsToSave>0</assertionsResultsToSave>
          <bytes>true</bytes>
        </value>
      </objProp>
      <stringProp name="filename"></stringProp>
    </ResultCollector>
    <hashTree/>
    <ResultCollector guiclass="StatVisualizer" testclass="ResultCollector" testname="Report" enabled="true">
      <boolProp name="ResultCollector.error_logging">false</boolProp>
      <objProp>
        <name>saveConfig</name>
        <value class="SampleSaveConfiguration">
          <time>true</time>
          <latency>true</latency>
          <timestamp>true</timestamp>
          <success>true</success>
          <label>true</label>
          <code>true</code>
          <message>true</message>
          <threadName>true</threadName>
          <dataType>true</dataType>
          <encoding>false</encoding>
          <assertions>true</assertions>
          <subresults>true</subresults>
          <responseData>false</responseData>
          <samplerData>false</samplerData>
          <xml>true</xml>
          <fieldNames>false</fieldNames>
          <responseHeaders>false</responseHeaders>
          <requestHeaders>false</requestHeaders>
          <responseDataOnError>false</responseDataOnError>
          <saveAssertionResultsFailureMessage>false</saveAssertionResultsFailureMessage>
          <assertionsResultsToSave>0</assertionsResultsToSave>
          <bytes>true</bytes>
        </value>
      </objProp>
      <stringProp name="filename">log\ULDLPerformance_${env_test_case}_${env_test_thread}_${env_test_filesize}_${env_test_date}.jtl</stringProp>
    </ResultCollector>
    <hashTree/>
  </hashTree>
   </hashTree>
  </hashTree>
  </jmeterTestPlan> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:06:28.657

如果有足够的硬件，Oracle 数据库可以扩展到数十万同时用户。因此，您看到的结果要么是由于硬件的限制，要么是由于您编写程序的方式存在缺陷。

例如，如果您的服务器只有一个核心，那么它一次只能做一件事。因此，两个用户运行它需要两倍的时间。并不是说那是实际发生的事情，只是说明它可能是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T10:09:45.140

正如你编码它你正在测量： - 连接到 db - blob 读取 - 连接关闭

您也许可以使用 JDBC 配置元素：

[http://jmeter.apache.org/usermanual/component_reference.html#JDBC_Connection_Configuration](http://jmeter.apache.org/usermanual/component_reference.html#JDBC_Connection_Configuration)

因此，在您采样之前建立了连接。

然后通过查看 jdbc 请求如何工作以访问数据库连接来修改您的代码：

```
 conn = DataSourceElement.getConnection("Variable Name used in JDBC_Connection_Configuration"); 
```

# android - date.getTIme() 的负值

> ID：14766734
> 
> 赞同：1
> 
> 时间：2013-02-08T06:11:42.010
> 
> 标签：android, date, datetime

在获得特定日期的时间时，我得到负值。可能是什么原因。我的代码是这样的。我有两个字符串值，分别存储创建日期和截止日期，并分别创建两个日期 date1 和 date2。当我检查 long 值时，我得到负值。我的 Logcat 也在那里。

```
Log.i("Cdate ",cdate);
        Log.i("Ddate ",ddate);
    datesdf=new SimpleDateFormat("yyyy-MM-dd");

            try
            {
                date1=datesdf.parse(cdate);
                date2=datesdf.parse(ddate);
            }
            catch (ParseException e) 
            {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

    long creationdate=date1.getTime();
            long duedatee=date2.getTime();
            Log.i("Creation date",Long.toString(creationdate));
            Log.i("Due date",Long.toString(duedatee)); 
```

日志猫::

```
02-08 11:29:10.020: I/Cdate(1244): 8-1-2013
02-08 11:29:10.020: I/Ddate(1244): 08-0-2013
02-08 11:29:10.030: I/Creation date(1244): -61741117800000
02-08 11:29:10.030: I/Due date(1244): -61743796200000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:15:55.673

您用于解析的数据格式与您指定日期的方式不匹配。你得到的日期是在第 8 年。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T10:30:15.760

您的日期格式错误。您需要更改为

```
 datesdf=new SimpleDateFormat("dd-MM-yyyy"); 
```

假设 8-1-2013 代表 2013 年 1 月 8 日。

# apache - Cgi 脚本不会刷新表单

> ID：14766740
> 
> 赞同：1
> 
> 时间：2013-02-08T06:12:33.237
> 
> 标签：apache, bash, cgi

我正在使用 Bash 编写一个 cgi 脚本，这个表单提交了我的表单的 url，现在即使我更改代码以减少查询，它也不会刷新。

```
echo '<form method=GET action="AddStudent.sh?a=Fname&b=Lname&c=Jdate&d=Lpay&e=Add&f=Pname&g=Pphone">' 
```

当我将其更改为此时，它仍然提交为 Fname 而不是 Tname

```
echo '<form method=GET action="AddStudent.sh?a=Tname&b=Lname&c=Jdate&d=Lpay&e=Add&f=Pname&g=Pphone">' 
```

当我将其更改为此时，该 url 仍然包含以前的查询。

```
echo '<form method=GET action="AddStudent.sh?a=Tname">' 
```

是我的浏览器、apache 设置或代码有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:46:00.613

由于您使用 GET，您在操作 URL 上指定的查询字符串将被删除并替换为表单内容。如果您没有更改实际表单元素中的任何内容，这将导致相同的 GET 到相同的 URL，这将被您的浏览器缓存。

解决方案是将参数添加为表单元素，如果您计划一遍又一遍地使用 GET 提交相同的值，则可能添加一个“Cache-Control: no-cache”标头。

# c# - 你如何让两个实例通过同一个类与 echotor 通信？

> ID：14766742
> 
> 赞同：0
> 
> 时间：2013-02-08T06:12:36.983
> 
> 标签：c#, methods, instance

假设我有一个人班。我在那个 people 类中有一个 cash 属性和一个 name 属性，当它被初始化时，我可以设置现金的数量和我想要的名字。假设我想创建一个 give 方法，它从 people 对象中获取现金并将其提供给其他 people 对象，然后将其从提供它的 people 对象中取出。现在我知道我可以把它放在类之外，让 (x) 对象在它们被初始化之后给 (y) 对象，但这不是我想要的。我想要一个可以在我实际初始化对象之前接受变量和它的方法，所以在我初始化它之后，我要做的就是填写参数。

我知道这可能会令人困惑，所以我会做一些例子来更好地阐述我在说什么。

所以可以说我的人员类是这样的：

```
class People
{
    private decimal cash;
    private string name = "";
    public string Name
    {
        get { return name; }
        set { name = value; }
    }
    public decimal Cash
    {
        get { return cash; }
        set { cash = value; }
    }
} 
```

有没有办法在同一个类中为类的实例 1 设置现金给类的实例 2？

我尝试创建另一个名为 bet 的类并在其中放置一个方法。但是当我尝试将它放在人员课程中时，我遇到了同样的问题。我做不到

```
public void give (People person, decimal amount)
{
    person.cash += amount 
    person.cash -= amount
} 
```

因为我正在使用相同的变量，它只会给出数量并获取相同对象的数量。

我必须制定一种给予和一种接受的方法吗？如果我希望它是动态的并且只需要调用方法而不是手动必须 + 和 - 我在表单中初始化的对象的数量，那将如何工作？

请记住，我对此很陌生，我还不知道如何使用事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:20:04.317

您应该将钱从当前人转移到另一个人，请调查我对 Give 方法的实现

```
class People
{
private decimal cash;
private string name = "";
public string Name
{
get { return name; }
set { name = value; }
}
public decimal Cash
{
get { return cash; }
set { cash = value; }
}

public void Give(Person target, decimal amount)
{
  Cash -= amount;
  target.Cash += amount;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:31:10.703

您可以将 3 个参数传递给函数，例如

```
class People
{
private decimal cash;
private string name = "";
public string Name
{
get { return name; }
set { name = value; }
}
public decimal Cash
{
get { return cash; }
set { cash = value; }
}

public static void Give(People p1,People p2, decimal amount)
{
  p2.Cash -= amount;
  p1.Cash += amount;
}
} 
```

您也可以使用 Viacheslav 提供的解决方案，但为此您必须小心调用 Give 函数的对象，但在此方法中，您可以直接从类中调用该方法，不需要对象来调用该函数。

# android - HTTPResonse 超时

> ID：14766748
> 
> 赞同：1
> 
> 时间：2013-02-08T06:13:07.123
> 
> 标签：android, timeout, httpresponse

我有一个使用设备 WiFi 发送请求的场景。在这种情况下，WiFi 已连接，但 WiFi 进一步未连接到互联网，在这种情况下，我发送 HTTP 请求，但在这种情况下 HTTPResonse 的响应非常慢。当设备连接到 WiFi 并且 WiFi 连接到 Internet 时，它可以正常工作。

我需要减少请求的第一个场景代码中的响应时间如下

```
public String[] doHttpGetWithCode(String url, HashMap<String, String> headerParam) throws Exception {
    String[] result = new String[2];
    HttpGet httpget = new HttpGet(url);
    HttpResponse response;
    int timeoutConnection = 3000;
    int timeoutSocket = 5000;
    HttpParams httpParameters = new BasicHttpParams();
    DefaultHttpClient httpclient = new DefaultHttpClient(httpParameters);

    httpget.addHeader("language", Constants.DEVICE_LANGUAGE);       
    Iterator myIterator = headerParam.keySet().iterator();
    while(myIterator.hasNext()) {
        String key=(String)myIterator.next();
        String value=(String)headerParam.get(key);        
        httpget.addHeader(key, value);

    }       
    HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);

    HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);

    response = httpclient.execute(httpget);
    HttpEntity entity = response.getEntity();
    InputStream is = entity.getContent();
    BufferedReader reader = new BufferedReader(new InputStreamReader(is));
    StringBuilder sb = new StringBuilder();
    String line = null;
    try {
        while ((line = reader.readLine()) != null) {
            sb.append(line + "\n");
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            is.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    result[0] = response.getStatusLine().getStatusCode()+"";
    result[1] = sb.toString();
    return result;
} 
```

在这种情况下，我正在使用没有进一步互联网连接的测试 WiFi，以下代码行需要很长时间

```
response = httpclient.execute(httpget); 
```

需要减少响应时间提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:10:38.537

你可以使用这样的东西：

/** * 检查网络服务的可用性 * * @param host 主机地址 * @param seconds 超时秒数 * @return 主机可用性 */

```
public static boolean checkIfURLExists(String host, int seconds)
{
    HttpURLConnection httpUrlConn;
    try
    {
        httpUrlConn = (HttpURLConnection) new URL(host).openConnection();

        // Set timeouts in milliseconds
        httpUrlConn.setConnectTimeout(seconds * 1000);
        httpUrlConn.setReadTimeout(seconds * 1000);

        // Print HTTP status code/message for your information.
        System.out.println("Response Code: " + httpUrlConn.getResponseCode());
        System.out.println("Response Message: "
                + httpUrlConn.getResponseMessage());

        return (httpUrlConn.getResponseCode() == HttpURLConnection.HTTP_OK);
    }
    catch (Exception e)
    {
        System.out.println("Error: " + e.getMessage());
        return false;
    }
} 
```

# python - 如果我在 Django 中使用表单向导，如何访问 URL 参数并使用它们？

> ID：14766753
> 
> 赞同：0
> 
> 时间：2013-02-08T06:13:32.550
> 
> 标签：python, django, django-formwizard

我正在使用 Django 1.4。我花了很长时间在 django 页面上搜索和查看文档，[https:](https://docs.djangoproject.com/en/1.4/ref/contrib/formtools/form-wizard/) //docs.djangoproject.com/en/1.4/ref/contrib/formtools/form-wizard/等。很少有人问过这个问题并且碰巧没有人回答它。

我需要做的是：

使用 urls.py 中的 slug 参数（如下所示）：

```
FORMS=[...]
url(r'^url/(?P<slug>[\w-]+)/form/$', WizardWizard.as_view(FORMS)), 
```

在views.py中（如下）：

```
class WizardWizard(SessionWizardView):
    template_name = "template.html"

    extra_context = Model.objects.filter(slug=slug) # HERE!

    def done(self, form_list, **kwargs):
        ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:38:58.667

也解决了这个问题。**FormWizard**实例包含**self.args**和**self.kwargs**，它们设置为从 URLconf 传递给视图的**args**和**kwargs 。****您可以在django.views.generic.base.dispatch**中看到它

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T04:47:03.797

在被困几天之后，答案相当简单。如果您正在阅读本文，请确保您首先使用基于类的通用视图，否则这是一个不同的问题。

您可以在以下链接上找到相关信息，尚不清楚这是您分配额外上下文的方式（不是使用 extra_context var）： [https ://docs.djangoproject.com/en/1.4/ref/contrib/formtools/form -wizard/#django.contrib.formtools.wizard.views.WizardView.get_context_data](https://docs.djangoproject.com/en/1.4/ref/contrib/formtools/form-wizard/#django.contrib.formtools.wizard.views.WizardView.get_context_data)

为所有表单向导页面设置上下文变量的示例代码（与他们的略有不同）：

```
def get_context_data(self, form, **kwargs):
    context = super(PaperworkWizard, self).get_context_data(form=form, **kwargs)

    #this line makes camp available as a var in the template context.
    #it sets it to an OBJECT RETRIEVED USING THE SLUG FROM THE URL.
    context.update({'camp': Camp.objects.get(slug=self.kwargs.get("slug"))})
    return context 
```

您需要将此代码放在由 SessionWizardView（或 CookieWizardView）组成的子类中。在问题的上下文中，views.py 文件中的 WizardWizard 类。

以任何其他方式执行此操作的问题在于 self.args 和 self.kwargs 在调度函数运行时设置。注意：**您不能通过设置 extra_context 变量来设置上下文**这是我失败的地方。

从 freenode 上的#django 频道归功于 nkryptic。如果您在得到这个答案后仍然被卡住，那么这是一个很棒的去处。我祝大家好运。**

# android - Android Google Map Pins 在不同手机上显示不同尺寸

> ID：14766755
> 
> 赞同：5
> 
> 时间：2013-02-08T06:13:37.313
> 
> 标签：android, google-maps-markers, google-maps-android-api-2, android-drawable

我正在尝试在 Android 谷歌地图上实现图钉显示。

我已经成功实现了它。但是，我对为什么在不同的手机上以不同的尺寸显示引脚感到有点困惑。

我目前正在使用相同的 R.drawable png 文件，该文件存储在 /res/drawable 文件夹下。为什么会这样？有没有办法标准化这个？

以下是三星和 HTC 手机之间的比较示例：

![在此处输入图像描述](../Images/370ec97802a8ca966509732b9e284746.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-08T06:36:50.653

*   小屏幕手机 -> 36 x 36 px (ldpi)(120dpi)图像尺寸（保留在 res/drawable-ldpi 文件夹下）
*   普通屏幕手机-> 48 x 48 px (mdpi)(160dpi)图像尺寸（在 res/drawable-mdpi 下）
*   大屏幕手机/平板电脑-> 72 x 72 px (hdpi)(240dpi)图像尺寸（在 res/drawable-hdpi 下）
*   额外的屏幕平板电脑-> 96 x 96 px (xhdpi)(320dpi)图像尺寸（在 res/drawable-xhdpi 下）

如果您在适当的文件夹中有 4 个具有上述大小的 PNG 文件，那么它在所有手机/平板电脑上都应该看起来不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:16:00.783

请在 res 文件夹下创建 drawable 文件夹.. 然后将所有 pin 图像保留在该文件夹中.. 然后它不会显示各种尺寸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T04:20:44.150

我也遇到了地图标记大小的问题。我把它们放在可绘制文件夹中，但随后 lint 开始抱怨并告诉我：

```
 ... "If the icon really is density independent (for example a solid color) 
  you can place it in drawable-nodpi." 
```

我这样做了。标记在 7 英寸和 9 英寸屏幕上看起来更加一致，而且棉绒也很高兴。我正在使用 Android 地图 V2。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-26T05:18:38.943

请在 res 文件夹下创建 drawable 文件夹.. 然后将所有 pin 图像保留在该文件夹中.. 然后删除所有其他可绘制文件夹，如 drawable-mdpi、drawable-hdpi 等...仅保留可绘制文件夹并将图像存储在该文件夹中。

# android - Android广播接收器 - 如何获取包名

> ID：14766756
> 
> 赞同：0
> 
> 时间：2013-02-08T06:14:00.160
> 
> 标签：android, android-broadcast

广播接收器调用应用程序时如何获取音乐播放器的包名。我使用了一组 playate 和 metachanged 广播接收器来摆脱音乐播放器。我需要获取我当前播放的音乐播放器的包名。我不确定这是否可行。如果有人有想法，请与我分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:19:30.447

您可以使用以下代码获取当前活动的包名称和活动名称，

```
List< ActivityManager.RunningTaskInfo > taskInfo = am.getRunningTasks(1); 

            Log.d("topActivity", "CURRENT Activity ::"
                    + taskInfo.get(0).topActivity.getClassName());

            ComponentName componentInfo = taskInfo.get(0).topActivity;
            Log.d("topActivity", "CURRENT Package ::"
                    + componentInfo.getPackageName()); 
```

或者

```
if(isMusicActive().equalsto(true))
{
public static String PACKAGE_NAME = getApplicationContext().getPackageName();
// get package name of player.
} 
```

# eclipse - 如何调试位于远程的代码

> ID：14766757
> 
> 赞同：0
> 
> 时间：2013-02-08T06:14:00.447
> 
> 标签：eclipse, jetty

我正在开发一个网络应用程序。我正在使用 Eclipse 和 Jetty 7 作为此 Application 的 Web 服务器。我对代码进行了更改并将其部署到位于远程的 Linux 机器上。

部署后，我使用`http://10.56.345:8080/MViewer` 我的问题通过浏览器访问应用程序，在这种情况下是否可以调试？

请分享您的观点。

提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:29:28.517

您可以在 eclispe 中使用远程调试器。您可以在 Eclipse 远程调试配置中使用正确的连接参数进行设置

![在此处输入图像描述](../Images/9ed2bce49637ecb0607f193c6dbb816c.png)

# jquery - 如何从 jQuery Linkfy 获取标签并将其存储到另一个表中

> ID：14766760
> 
> 赞同：2
> 
> 时间：2013-02-08T06:14:08.287
> 
> 标签：jquery, ruby-on-rails-3

我正在使用 jQuery linkfy 创建类似推文的功能，在这里我只想将文本区域中的标签存储到标签表中。有什么办法可以执行此操作吗？下面是我的 jQuery 代码片段

```
<script type="text/javascript">
function toHashtagUrl(hashtag) {
return "/search?q=" + hashtag;
}

jQuery(document).ready(function() {
jQuery("form input[type='submit']").click(function() {
str = this.form.tweet_title.value
jQuery("#tweet_content").html(str);
var s= jQuery("#tweet_content").linkify(toHashtagUrl);

document.getElementById('tweet_title').value = s[0].innerHTML;

});
});
</script> 
```

**查看文件**

```
<%= form_for(@tweet, :remote => true) do |f| %>
 <table width="100%" border="0" cellspacing="5" cellpadding="5">
 <div id="tweet_content" style="display:none;"></div>
<tr>
  <td align="left" valign="top">
    <div class="labeldiv">Title</div>
    <%= f.text_area :title, :rows=>2 %>
  </td>
 </tr>
<tr>
    <td colspan="3" align="left" valign="top">
      <%= f.submit "Save", :class=>"btn btn-primary" %>
    </td>
</tr>
<% end %> 
```

**输出** 如果我在文本区域中输入以下文本，则需要将 #tag1 和 #tag2 存储在标签表中，并且“测试”需要存储在推文表中。

“**测试#tag1 #tag2** ”

任何帮助将是一个很大的解脱！

# php - 我的 CodeIgniter 项目未在 WAMP 服务器上运行

> ID：14766763
> 
> 赞同：3
> 
> 时间：2013-02-08T06:14:23.030
> 
> 标签：php, mysql, codeigniter-2

我在 CodeIgniter 中开发了我的项目，该项目在 XAMPP 服务器上运行完美，但在 WAMP 服务器上不运行。

我变了

```
$config['index_page'] = 'index.php'; to $config['index_page'] = ''; 
```

和 .htaccess 我已经

```
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

网站主页正常显示。但是，每当我单击以法语版本出现的任何链接 wamp 服务器主页时，都没有链接可用。

仅当 URL 中有 index.php 时，项目才能在 WAMP 上正常运行。

例如

```
http://localhost/codeigniter/welcome/view (This link doesn't work)
http://localhost/codeigniter/index.php/welcome/view (Links works properly) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T11:14:19.867

试试这个，它无处不在：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|css|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteRule ^(.*)$ index.php/$1 [L] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-25T15:33:07.903

`httpd.conf`在文件中启用 mod_rewrite

就我而言，我已经在本地磁盘 C 上安装了 WAMP

找到 httpd 文件只需导航到`C:\wamp\bin\apache\apache2.2.6\conf`

使用记事本编辑器打开 httpd.conf 文件，然后找到以下行：

```
#LoadModule rewrite_module modules/mod_rewrite.so 
```

并取消注释

保存文件并重新启动 Apache 以使新设置生效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:19:30.493

签`RewriteBase`入`.htaccess`文件。就像下面

```
RewriteBase /your project folder name/ 
```

复制以下代码并将其粘贴到您的`.htaccess`文件中

```
<IfModule mod_rewrite.c>
Options +FollowSymlinks
RewriteEngine On
RewriteBase /codeigniter/

#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L]

#RewriteRule ^page/(.*)$ index.php?/#$1 [R=301,L,NE] 
```

# 如果我们没有安装 mod_rewrite，所有 404 的 # 都可以发送到 index.php，一切正常。# 提交人：ElliotHaughin

```
ErrorDocument 404 /index.php; 
```

希望它会帮助你。并检查一件事，即您的网址。如果有任何 ~ 符号，则`.htaccess`文件将有所不同。否则上面的代码将起作用。谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T06:23:35.027

尝试这个

```
RewriteEngine On    //missed this
RewriteCond %{REQUEST_URI} ^/system.*
RewriteRule ^(.*)$ index.php?/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.+)$ index.php?/$1 [L] 
```

# python - 如何在 python 中设置 __contains__ 方法？

> ID：14766767
> 
> 赞同：3
> 
> 时间：2013-02-08T06:14:29.363
> 
> 标签：python, class, methods, contains

我无法理解如何在我的班级中正确设置**contains方法。**我知道当您调用它时它会自动使用运算符“in”，我只是不认为我了解如何正确设置它。

我必须用它来查看 anotherCircle 是否包含在特定的圆圈中（都是来自用户的输入）。教授让我们为此做两种不同类型的方法。

第一个我没有问题并且或多或少地理解它在做什么，它如下：

```
def contains(self, circle2d):
  dist = math.sqrt((circle2d._x - self._x)**2 + (circle2d._y - self._y)**2) #Distance of second circle's coords from the first circle's coords
  if dist + circle2d._radius <= self._radius:
     return True 
```

然而，应该做同样事情的下一个方法使用**contains**方法，以便我们可以在主函数中调用**它**。我只有这个：

```
def __contains__(self, anotherCircle):
    if anotherCircle in self:
        return True 
```

尝试运行此程序时出现多个错误。我想我错过了自我，但我不确定是什么？有人可以尝试向我解释在编写这样的**contains**方法时到底需要做什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T06:23:16.577

对象上的`__contains__`方法不*调用* `in`；相反，它是`in`运营商所称的。

当你写

```
if circle1 in circle2: 
```

python 解释器将看到这`circle2`是一个 Circle 对象，并会寻找为`__contains__`它定义的方法。它基本上会尝试调用

```
circle2.__contains__(circle1) 
```

这意味着您需要在`__contains__`不使用 的情况下编写方法`in`，否则您将编写一个永无止境的递归方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T06:34:56.047

您的`__contains__`方法**必须**使用与原始方法相同的逻辑`contains`。否则 Python 怎么知道一个圆圈包含另一个圆圈意味着什么？你必须告诉它，这就是`__contains__`方法的用途。您可以`__contains__`调用`contains`，也可以将整个代码放在该方法中。

# ios - 用户最后触摸了哪个标签以及如何将其从视图中移除

> ID：14766769
> 
> 赞同：0
> 
> 时间：2013-02-08T06:14:32.210
> 
> 标签：ios, nsmutablearray, uilabel

我想知道如何知道用户最后一次触摸哪个标签以及如何从视图中删除该特定标签。我知道如何更改所有标签的属性，但我不知道如何找出最后选择的标签。

这就是我向视图添加标签的方式。

```
myNewLabel.text =textField.text;
numberOfLabels++;
myNewLabel.tag=numberOfLabels;
[self.view addSubview:myNewLabel];
[shirtBackgroundView addSubview:myNewLabel];
[myNewLabel addGestureRecognizer:panGestureRecognizer];
[myNewLabel addGestureRecognizer:rotateGestureRecognizer];
[myNewLabel addGestureRecognizer:PinchGestureRecognizer];
myNewLabel.userInteractionEnabled=YES;
myNewLabel.backgroundColor=[UIColor clearColor]; 
[arrayForLabels addObject:myNewLabel]; 
```

这是我更改所有标签颜色的方法。

```
 for(int i=0;i<numberOfLabels;i++)
    {
        UILabel *tempLabel = [arrayForLabels objectAtIndex:i];
        tempLabel.textColor=[UIColor redColor];
    }

 -(void)labelMoved:(UIPanGestureRecognizer *)recognizer
{
    CGPoint translation = [recognizer translationInView:self.view];
    recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x,
                                         recognizer.view.center.y + translation.y);
    [recognizer setTranslation:CGPointMake(0, 0) inView:self.view];

    if (recognizer.state == UIGestureRecognizerStateEnded) {

        CGPoint velocity = [recognizer velocityInView:self.view];
        CGFloat magnitude = sqrtf((velocity.x * velocity.x) + (velocity.y * velocity.y));
        CGFloat slideMult = magnitude / 200;
        NSLog(@"magnitude: %f, slideMult: %f", magnitude, slideMult);

        float slideFactor = 0.1 * slideMult; // Increase for more of a slide
        CGPoint finalPoint = CGPointMake(recognizer.view.center.x + (velocity.x * slideFactor),
                                         recognizer.view.center.y + (velocity.y * slideFactor));
        finalPoint.x = MIN(MAX(finalPoint.x, 0), self.view.bounds.size.width);
        finalPoint.y = MIN(MAX(finalPoint.y, 0), self.view.bounds.size.height);

        [UIView animateWithDuration:slideFactor*2 delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
            recognizer.view.center = finalPoint;
        } completion:nil];

    }

} 
```

感谢您的任何建议...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:28:49.123

您可以将 .h 类中的属性声明为 UILabel *lastSelectedLabel; 在你的识别器中

```
-(void)labelMoved:(UIPanGestureRecognizer *)recognizer{
          if(lastSelectedLabel!=nil){
                [lastSelectedLabel removeFromSuperview];
                lastSelectedLabel=recognizer.view;

          }else
              lastSelectedLabel=recognizer.view;
} 
```

我认为上面应该工作..

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T06:32:14.543

对于检测`UIlabels`以捕获水龙头：

```
label.userInteractionEnabled = YES;
 UIGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(tapRecieved:)]; 
[label addGestureRecognizer:tap];
[tap release]; 
```

//当你触摸时重复每个额外的标签

```
-(void) tapRecieved:(UITapGestureRecognizer *)tap{  
      currentLabel = (UILabel *) tap.view;
        [currentLabel removeFromSuperview];
 } 
```

# jquery - 如何在服务器上运行的 asp 按钮中包含 html 属性？

> ID：14766770
> 
> 赞同：-1
> 
> 时间：2013-02-08T06:14:37.077
> 
> 标签：jquery, asp.net, button, html

我想为使用 c#**动态创建的 asp 按钮添加一些 html 属性，**以便我可以使用它们与使用 jquery 的按钮进行交互。我基本上需要在渲染页面的 html 中将 class 和 rel 作为按钮的属性。

我是使用 jquery 的初学者，并且对如何将 jquery 与我动态创建的 asp 按钮一起使用知之甚少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:20:09.477

要在 jquery 中添加属性，您可以使用[attr()](http://api.jquery.com/attr/)

```
 $('#elementsID').attr('rel','thisrel'); 
```

> 这将属性添加`rel="thisrel"`到元素`id=elementsID`

要添加类，您可以使用[addClass()](http://api.jquery.com/addclass/)

```
$('#elementsID').addClass('newClass'); 
```

> 这增加`class="newClass"`了元素`id=elementsID`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:21:04.933

asp按钮中有一个“cssClass”属性，因此您可以分配一个类名并使用jquery使用类名访问该按钮。否则，您可以看到生成的按钮 id，这是一个很大的值，但无论您运行多少次代码，它都会保持不变。

# python - 无法通过 jython 创建数据源

> ID：14766772
> 
> 赞同：0
> 
> 时间：2013-02-08T06:14:54.050
> 
> 标签：python, websphere, wsadmin

```
jdbc = AdminConfig.getid('/JDBCProvider:Oracle JDBC Driver/')
AdminConfig.createDatasource(jdbc, '[-name %jdbcDS% -jndiName jdbc/%jdbcDS% -dataStoreHelperClassName com.ibm.websphere.rsadapter.Oracle10gDataStoreHelper -componentManagedAuthenticationAlias %PROFILE_NAME%/Cramer_User -configureResourceProperties [[URL java.lang.String jdbc:oracle:thin:@%DB_HOST%:1521:%DB_SID%]]]') 
```

给出以下错误（我已经用一些虚拟值替换了实际值）：

```
WASX7015E: Exception running command: "AdminConfig.createDatasource(jdbc, '[-name %jdbcDS% -jndiName jdbc/%jdbcDS% -dataStoreHelperClassName com.ibm.websphere.rsadapter.Oracle10gDataStoreHelper -componentManagedAuthenticationAlias %PROFILE_NAME%/Cramer_User -configureResourceProperties [[URL java.lang.String jdbc:oracle:thin:@%DB_HOST%:1521:%DB_SID%]]]')"; exception information:
 com.ibm.bsf.BSFException: exception from Jython:
Traceback (innermost last):
  File "<input>", line 1, in ?
AttributeError: createDatasource 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T04:51:50.043

使用`AdminTask`而不是`AdminConfig`.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-09-03T10:31:22.643

```
jdbcProviderId = AdminConfig.getid('/JDBCProvider:Oracle JDBC Driver/')
AdminConfig.create('DataSource', jdbcProviderId, '[-name %jdbcDS% -jndiName jdbc/%jdbcDS% -dataStoreHelperClassName com.ibm.websphere.rsadapter.Oracle10gDataStoreHelper -componentManagedAuthenticationAlias %PROFILE_NAME%/Cramer_User -configureResourceProperties [[URL java.lang.String jdbc:oracle:thin:@%DB_HOST%:1521:%DB_SID%]]]') 
```

# java - 是最适合理解 JVM 语言代码的字节码查看器还是反编译器

> ID：14766773
> 
> 赞同：1
> 
> 时间：2013-02-08T06:14:58.933
> 
> 标签：java, clojure, jvm, profiler, decompiler

我对 JVM 上的 Clojure 和 Scala 的一些性能感到困惑，我想知道理解神秘功能代码的最佳方法是什么。我应该学习了解字节码，还是使用分析器来猜测性能？请有经验的人推荐这方面的工具吗？我知道 JD ( [http://java.decompiler.free.fr](http://java.decompiler.free.fr) ) 是最好的反编译器。这是我应该走的路线吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:18:34.583

反编译器几乎不会告诉您运行中代码的性能。读取字节码只是偶尔对理解行为有用，而对于更动态的特征，它的用处就更小了。这有几个原因。首先是基于静态分析进行性能调整是不明智的，通常只会捕获公然的咆哮，并可能导致您过早地进行优化。第二个是在 VM 中运行的内容与字节码不同。Just In Time 编译器将进行许多优化，例如倾斜短方法。

要查看应用程序在做什么，性能方面，你真的需要一个分析器。弄清楚你的堆使用情况以及垃圾收集需要多少时间，然后使用采样分析器查看哪些代码正在花费时间。IBM 的 Health Center 是一个不错的选择，或者您可以尝试 Visual VM 或其他任何数量的。

# qt5 - Qt5 exe没有在windows8中运行

> ID：14766776
> 
> 赞同：1
> 
> 时间：2013-02-08T06:15:04.290
> 
> 标签：qt5

我有一个 qt 应用程序，`qt4.7`我将它移植到`qt5.0`. 如果从`PC where qt5 is installed`. 但是，如果它是从未安装 qt 的 PC 运行的，即使它在同一文件夹中具有所有 dll，它也*不会运行，甚至不会给出任何错误消息。*

但是，如果我安装 qt 并从同一个文件夹中尝试，应用程序甚至可以在不设置*环境变量*的情况下运行。在一些问题中，我看到人们回答有关添加 dll 的问题，我尝试添加他们指定的所有 dll。但没有任何帮助。任何人都知道如何处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T12:01:19.053

Qt 5 引入了一些在运行时（而不是启动时）加载的 DLL。这些 DLL 只能由 Dependency Walker 检测到，前提是您使用“分析”功能，该功能默认情况下不启用。

我假设您使用的是 Qt Project 网站上的预编译包。社区发现了对 libEGL.dll 的静默依赖，以及对 qwindows.dll 的不太静默的依赖，它必须相对于具有以下文件夹结构的 .exe 放置：

```
app.exe
libEGL.dll
platforms\qwindows.dll 
```

另外，看看你是否能在[http://doc-snapshot.qt-project.org/qt5-stable/qtdoc/deployment-windows.html找到任何有用的东西](http://doc-snapshot.qt-project.org/qt5-stable/qtdoc/deployment-windows.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:02:13.783

在[bugreports.qt-project.org](https://bugreports.qt-project.org)上有一个[错误报告](https://bugreports.qt-project.org/browse/QTBUG-28766)。它可以提供帮助。

# ocaml - 提供可选依赖项的最简单方法是什么？

> ID：14766777
> 
> 赞同：3
> 
> 时间：2013-02-08T06:15:16.780
> 
> 标签：ocaml

我正在制作一个基于绿洲的小库，并且我的代码完全依赖于`sexplib`非必要的方式。有没有一种方法可以让这个库的可能用户选择他们是否想要依赖项附带的额外功能，并且还可以轻松地维护我的代码，尽可能少地重复。

也`cppo`可能没有意义，因为它与依赖关系一样`sexplib`多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T13:03:33.980

一种方法是将所有与 sexplib 相关的代码移动到单独的模块中，并将其打包为单独的 ocamlfind（子）包 - 它可以是单独的 cma 或只是普通的 cmo。

# c# - 如何在 asp.net 中的 ASPxPopupControl_WindowCallback 中调用 Javascript 函数

> ID：14766782
> 
> 赞同：0
> 
> 时间：2013-02-08T06:15:38.660
> 
> 标签：c#, javascript, asp.net

我有一个 ASPxPopupControl 并且在回调函数中我想调用一个 javascript 函数

```
<script type="text/javascript">
    function ShowAlert() {
      alert('Display Message Alert');
    }   
</script>

protected void ASPxPopupControl_WindowCallback(object source, DevExpress.Web.ASPxPopupControl.PopupWindowCallbackArgs e) {

    I want to Call ShowAlert() javascript function from here
}

I tried this code but it only works on button click event

Page.ClientScript.RegisterStartupScript(GetType(), "MyKey",                 "ShowDetailView();", true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:24:13.073

这是一个工作代码，它将从代码隐藏中调用 javascript 函数。

```
<script type="text/javascript">
    function ShowAlert() {
      alert('Display Message Alert');
 }   
</script> 
```

**代码背后**

```
Page.ClientScript.RegisterStartupScript(this.GetType(), "Call my function", "ShowAlert();", true); 
```

**额外**的情况下，如果你想用 javascript 打开一个窗口而不是弹出窗口，

```
ScriptManager.RegisterStartupScript(Page, typeof(Page), "Alert", "window.open('description.aspx','Mywindow','scrollbars=Yes,width=800,menubar=yes, resizable=No');", true); 
```

# c++ - 如何将 Dockwidget 浮动模式窗口可移动设置为 false？

> ID：14766785
> 
> 赞同：1
> 
> 时间：2013-02-08T06:15:44.183
> 
> 标签：c++, qt

我有一个处于浮动模式的 QdockWidget。我希望这个浮动窗口稳定在特定位置（窗口不应该移动拖拽/或无论如何）。我怎样才能得到这个？

# cygwin - 从 dos 命令运行 cygwin 构建的 exe 文件

> ID：14766792
> 
> 赞同：2
> 
> 时间：2013-02-08T06:16:23.630
> 
> 标签：cygwin, command-prompt

我在 Cygwin 中构建了一个 exe（来自 .cc 的文件）。当我在 Cygwin 命令提示符下运行时，它运行良好，例如

```
$./learn.exe 0.2 0.1 
```

给出预期的输出。

当我从 Windows 命令提示符调用 cygwin 并运行相同的命令时，例如

```
c:\cygwin\bin\bash -c "./learn.exe 0.1 0.1" 
```

它给出了错误说法

```
error while loading shared libraries: ?: cannot open shared object file:
No such file or directory 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T20:39:25.880

Cygwin .EXE 文件应在 Windows 命令行中运行。如果您在带有 的目录中`learn.exe`，则可以将其运行为：

```
learn.exe 0.1 0.1 
```

*（如果您需要大量参数或良好的参数解析，在 Cygwin Bash 中运行可能会更好。）*

# drupal-7 - 如何在 Drupal 7 中更改 webform 的显示样式

> ID：14766793
> 
> 赞同：3
> 
> 时间：2013-02-08T06:16:23.490
> 
> 标签：drupal-7

我使用 Drupal 7 webform 制作了一个表单，但我想更改表单的显示样式。请让我知道如何编辑显示。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T13:49:20.627

覆盖 webform-form.tpl.php。[http://drupalcontrib.org/api/drupal/contributions!webform!templates!webform-form.tpl.php/7](http://drupalcontrib.org/api/drupal/contributions!webform!templates!webform-form.tpl.php/7)

# java - 如何为 Java Web 项目配置连接池？

> ID：14766795
> 
> 赞同：1
> 
> 时间：2013-02-08T06:16:28.737
> 
> 标签：java, jakarta-ee, tomcat, servlets, jdbc

我一直在研究使用 JDBC api 和类的连接池。但我仍然不知道如何为 java web 项目配置连接池类。您可能知道，连接池是一个封装了 JDBC api 的单例类。但是连接类在web项目部署到Tomcat服务器时启动一次，我想知道是否需要对Web.xml配置文件做一些事情，让Tomcat服务器加载连接池类。非常感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T08:18:33.687

有很多方法可以做到这一点。[JNDI](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html)是一种方式——但它在 tomcat 中并不是那么“用户友好”。数据源也可以在 Spring 中配置。例如：

```
<bean id="dataSource"
      class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${jdbc.driverClassName}"/>
    <property name="url" value="${jdbc.url}"/>
    <property name="username" value="${jdbc.username}"/>
    <property name="password" value="${jdbc.password}"/>
</bean> 
```

最简单的方法是创建一个[ServletContextListener](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)类，创建您的数据源并将其放入[ServletContext](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html)以便可以从`ServletContext`您的项目中检索相同的实例。

[在这里](https://stackoverflow.com/questions/12158810/database-connection-reuse)查看我的回答如何创建`ServletContextListener`.

**也可以看看：**

*   [Spring中如何使用Tomcat提供的JNDI DataSource？](https://stackoverflow.com/questions/9183321/how-to-use-jndi-datasource-provided-by-tomcat-in-spring)

# python - Django Url 错误：int() 以 10 为底的无效文字：“python”

> ID：14766796
> 
> 赞同：0
> 
> 时间：2013-02-08T06:16:29.670
> 
> 标签：python, django, tags

我正在创建一个带有帖子和标签的小 Django 应用程序。但是我的 urls-models-views 有一些问题。我不明白为什么在我的应用程序中我得到这个错误，int() 以 10 为底的无效文字：'python'。这里的“python”是一个标签。我的文件：models.py：

```
class Category(models.Model):
    name = models.CharField(max_length=55)

    def __unicode__(self):
        return u"%s" %(self.name)

class Post(models.Model):
    title = models.CharField(max_length=255)
    slug = models.SlugField(max_length=255, unique=True)
    excerpt = models.TextField(blank=True, help_text="A small teaser of\
                your content")
    content = MarkupField()
    date_created = models.DateTimeField(auto_now_add=True)
    is_published = models.BooleanField(default=True)
    objects = models.Manager()
    published_objects = PublishedManager()
    tags = TaggableManager()
    category = models.ForeignKey(Category)

    class Meta:
        ordering = ("date_created",)

    def __unicode__(self):
        return u"%s %s %s %s %s" %(self.title, self.date_created, self.is_published, self.category, self.tags)

    def get_absolute_url(self):
        return "/posts/%s/" % self.id 
```

视图.py：

```
from django.conf import settings
from django.views.generic import ListView, RedirectView
from blog.models import Post
from django.template import RequestContext
from django.shortcuts import render_to_response
from django.http import HttpResponse

def blogg(request):
    posts = Post.objects.get(title="generic views")
    ctx = {"posts":posts}
    return render_to_response("index.html",ctx, context_instance=RequestContext(request))

def post_detail(request, post_id):

    post = Post.objects.get(id=post_id)

    return render_to_response("post_detail.html",
        {"post":post}, context_instance=RequestContext(request))

def tagdetail(request, tag):
    posts = Post.objects.filter(tags=tag)
    return render_to_response("tag_detail.html",
        {"posts":posts, "tags":tag}, context_instance=RequestContext(request)) 
```

网址.py：

```
urlpatterns = patterns('',
    url(r'^$', "blog.views.blogg"),
    url(r'^posts/(?P<post_title>\d+)/$',"blog.views.post_detail"),
    url(r'^posts/tag/(?P<tag>\w+)$',"blog.views.tagdetail"),
) 
```

错误：

```
ValueError at /posts/tag/python

invalid literal for int() with base 10: 'python'

Request Method:     GET
Request URL:    
Django Version:     1.4.3
Exception Type:     ValueError
Exception Value:    

invalid literal for int() with base 10: 'python'

Exception Location:     /home/ada/virtualenv/local/lib/python2.7/site-packages/django/db/models/fields/__init__.py in get_prep_value, line 537
Python Executable:  /home/ada/virtualenv/bin/python
Python Version:     2.7.3
Python Path:    

['/home/ada/mainproject',
 '/home/ada/virtualenv/local/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg',
 '/home/ada/virtualenv/local/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg',
 '/home/ada/virtualenv/src/django-taggit',
 '/home/ada/virtualenv/lib/python2.7/site-packages/setuptools-0.6c11-py2.7.egg',
 '/home/ada/virtualenv/lib/python2.7/site-packages/pip-1.2.1-py2.7.egg',
 '/home/ada/virtualenv/lib/python2.7',
 '/home/ada/virtualenv/lib/python2.7/plat-linux2',
 '/home/ada/virtualenv/lib/python2.7/lib-tk',
 '/home/ada/virtualenv/lib/python2.7/lib-old',
 '/home/ada/virtualenv/lib/python2.7/lib-dynload',
 '/usr/lib/python2.7',
 '/usr/lib/python2.7/plat-linux2',
 '/usr/lib/python2.7/lib-tk',
 '/home/ada/virtualenv/local/lib/python2.7/site-packages',
 '/home/ada/virtualenv/local/lib/python2.7/site-packages/PIL',
 '/home/ada/virtualenv/lib/python2.7/site-packages',
 '/home/ada/virtualenv/lib/python2.7/site-packages/PIL']

Can yo please tell me why I get this error:invalid literal for int() with base 10: 'python'
Thanks for help. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:30:13.343

在 django 中，`filter(tags=tag)`是一个快捷方式`tags__pk=tag`，在你的情况下，你有一个标签名称，所以你应该使用`filter(tags__name=tag)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:30:06.617

`tadgetails`在您的视图中更新以下行

```
posts = Post.objects.filter(tags=tag) 
```

作为

```
posts = Post.objects.filter(tags__name=tag) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-30T09:56:59.227

对于这些问题，“base 10”后面是一个字，有一个可能的原因是数据库发生了变化，不是在外键列成为键之前，而是在数据没有被修改之前，解决办法是要么数据库数据或删除所有数据，或 /admin/ 手动修改外键数据。希望能帮到你

# .net - 如何以一种方式将一个 texblock 值绑定到其他 textblock 并在 MVVM 中获取值

> ID：14766798
> 
> 赞同：1
> 
> 时间：2013-02-08T06:16:39.563
> 
> 标签：.net, wpf, xaml, mvvm, xaml-binding

让我用一张图片来解释我的问题![在此处输入图像描述](../Images/1ab69f2fadb60837aa06fbe01ba72b7c.png)

我的项目中有 MVVM 结构。我有两个文本块，`Textblock 1`和`textblock 2`. 现在，每当 Textblock1 的 Text 更改时，我希望`textblock2's`Text 与 Text 相同。`Textblock1's`但我应该能够将`Textblock2's`Text 设置为不同于`Textblock1's`. 所以我正在设置 Textblock1 的文本属性的单向绑定。

如何获取`Textblock2's`In MVVM 的 Text 属性。如果我为 Text 属性创建一个属性`Textblock2's`，我将无法将`Textblock1's`文本绑定到`textblock2`.

如果我想进一步澄清我的问题，请告诉我。

感谢期待。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T06:21:52.287

在 VM 中使用两个属性，并在那里实现相等/覆盖逻辑。这正是虚拟机擅长的那种东西。

```
VM 
  Prop1 <-- Binding- TextBlock1
  Prop2 <-- Binding- TextBlock2 
```

Prop1 设置器的实现使得它也更新 Prop2（不要忘记 INotifyPropertyChanged），如果您设置 Prop2 使其切换到并保持不同的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T12:20:13.237

这是与 flq 的答案一起使用的代码：

```
public class MyViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private string _text1;
    private string _text2;

    public string Text1
    {
        get { return _text1; }
        set
        {
            if (_text1 != value)
            {
                _text1 = value;                    

                RaisePropertyChanged("Text1");

                Text2 = _text1;
            }
        }
    }        

    public string Text2
    {
        get { return _text2; }
        set
        {
            if (_text2 != value)
            {
                _text2 = value;

                RaisePropertyChanged("Text2");
            }
        }
    }

    public MyViewModel()
    {

    }

    private void RaisePropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }        
} 
```

请务必将绑定更改为双向。

编辑：

这是 XAML：

```
<TextBox Text="{Binding Text1, UpdateSourceTrigger=PropertyChanged}" />
<TextBox Text="{Binding Text2}" /> 
```

设置 UpdateSourceTrigger=PropertyChanged 允许在您键入时更新属性，因此 TextBox2 将在您键入时更新。（仅供参考 - TextBoxes 的默认绑定是双向的）

# selenium - 计算给定 xpath 表达式匹配的元素数

> ID：14766807
> 
> 赞同：9
> 
> 时间：2013-02-08T06:17:31.040
> 
> 标签：selenium, xpath

如何计算给定 xpath 表达式匹配的元素数

```
xpath: driver.findElement(By.xpath("//div[contains(@id,'richedittext_instance')]")) 
```

我需要的只是计数。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T07:05:19.383

**试试这个代码：**

```
//Assume driver is intialized properly.
int iCount = 0;
iCount = driver.findElements(By.xpath("Xpath Value")).size()); 
```

`iCount`具有相同`xpath`值的元素数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-29T18:49:17.020

另一种选择如果您的要求*严格*基于使用 Selenium 的需要，您可以使用 WebElements 执行类似的操作并获取返回列表的大小：

```
List<WebElement> myListToCheck=currentDriver.findElements(By.xpath("somePath"));
if(myListToCheck.size()>0){
//do this
}else{
//do something else
} 
```

或者只是简单地返回返回列表的大小；如果这就是你真正想从中得到的一切......

```
int mySize=myListToCheck.size() 
```

我相信一旦您建立了 WebElements 列表，您还可以使用迭代器来查看该列表。有帮助，我不知道...只是提供另一种方式来完成相同的最终游戏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T13:19:57.473

*在 Selenium 中不起作用，它只允许从 XPath 返回节点，而不是像`count(...)`. 仅供参考，对大多数其他提供更完整 XPath API 的工具有效。*

您应该只从查询中返回尽可能少的数据量。`count(//div[contains(@id,'richedittext_instance')])`计算 XPath 中的结果数量，*因此*速度更快，因为不必将所有元素从 XPath 引擎传递到 Selenium。

我无法帮助您如何`int`从硒中获取它作为 n ，但这应该很容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-13T01:15:47.723

请执行下列操作：

```
from selenium.webdriver.common.by import By
elements = driver.find_elements(By.XPATH, "Your_XPath") 
```

这会输出一个`selenium.webdriver.firefox.webelement.FirefoxWebElement`s 列表（在我的 Firefox 浏览器中）。

最后，找出列表的长度：

```
len(elements) 
```

**注意。**: 请注意，我写的是`find_elements()`（复数）而不是`find_element()`。他们两个是不同的。`find_element()`只返回第一个匹配的 web 元素，但是要找到所有匹配的 web 元素的列表，我们必须使用`find_elements()`.

# mysql - Groovy：在 mysql 查询中使用 switch/case

> ID：14766812
> 
> 赞同：0
> 
> 时间：2013-02-08T06:18:00.213
> 
> 标签：mysql, insert

我有一个文本文件：

```
ACTION = NEW        
NEW_NUMBER = '123456'
TEXT_NAME1 = 'TEST1'
TEXT_NAME2 = 'TEST2'
TEXT_NAME3 = 'TEST3' 
```

我想在我的代码中进行多个 INSERT 查询。我怎么能这样做？

```
def sqlstr = new Properties().with { props ->
  new File( '/path/to/file' ).withReader { r ->
    load( r )
    switch( props.ACTION ) {
      case 'NEW':
        "INSERT INTO TABLE1.DB (NUMBER, NAME1, NAME2, NAME3) VALUES ($NEW_NUMBER, $TEXT_NAME1, $TEXT_NAME2, $TEXT_NAME3)"
        "INSERT INTO TABLE2.DB (NUMBER, NAME1, NAME2, NAME3) VALUES ($NEW_NUMBER, $TEXT_NAME1, $TEXT_NAME2, $TEXT_NAME3)" 
        break

    }
  }
}

// Assuming sql is set up right:
sql.execute sqlstr 
```

# php - Ajax：成功替换字符串

> ID：14766817
> 
> 赞同：0
> 
> 时间：2013-02-08T06:18:21.227
> 
> 标签：php, jquery, ajax, post

我有一个 Ajax 函数，可以在点击时更新一些数据。我将变量作为函数参数发送。另一方面，我解析一个变量数组并将函数应用于每个变量。这是我的代码：

```
function vote(user, picture){
  var data = {
    "user": user,
    "picture": picture
  };
  var url = 'vote_up.php';
  $.ajax({
    type: 'POST',
    url: url,
    data: data,
    async: true,
    dataType: 'json',
    success: function(response) {
      $('a#voteaza').replaceWith('<span style="color:#abb4c9; font-size: 15px;"> </span>');
      $('#changeNumber').html(parseInt($('#changeNumber').html(), 10)+1);
    }
  });
} 
```

和 PHP：

```
foreach($photos['data'] as $photo) {
  $a = end(explode( '/',$photo['source']));
  <a href="#" id="voteaza" name = "<?php echo $a; ?>" style="color:#abb4c9; font-size: 15px; font-weight: bold; " onclick="vote('<?php echo $user ?>', '<?php echo $a ?>');">Voteaza</a> <br /> <span style="color:#abb4c9; font-size: 13px;" id="changeNumber"> <?php echo no_votes($a); ?> Voturi </span> 
```

问题是，在成功时，jquery

```
$('a#voteaza').replaceWith('<span style="color:#abb4c9; font-size: 15px;"> Vote! </span>');
$('#changeNumber').html(parseInt($('#changeNumber').html(), 10)+1); 
```

将所有 'voteaza' id 替换为 'Vote' 字符串，并递增所有 'changenumber' id 字段。但我希望仅对当前 Ajax 更新的`<a name`元素执行成功函数。

知道怎么做吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:42:49.497

您的 ID 在页面中应该是唯一的。您不能在页面中提供相同的 ID 两次：您可以看到您在 foreach 中调用了 id 并且都具有相同的值。

试试这个，我不确定这是否有效。你可以让它以这种方式工作。

```
vote(this,'<?php echo $user ?>', '<?php echo $a ?>')

function vote(test,user, picture){

$(test).replaceWith('<span style="color:#abb4c9; font-size: 15px;"> Vote! </span>'); 
```

# spring - 在 Spring MVC 中传递日期以请求参数

> ID：14766818
> 
> 赞同：60
> 
> 时间：2013-02-08T06:18:27.047
> 
> 标签：spring, spring-mvc

我是 Spring MVC 的新手-我正在尝试将我的 javascript 中的日期作为请求参数传递

我的控制器看起来像 -

```
public @ResponseBody List<RecordDisplay> getRecords(
            @RequestParam(value="userID") Long userID,
            @RequestParam(value="fromDate") Date fromDate,
            @RequestParam(value="toDate") Date toDate) { 
```

我的问题是如何从 javascript 进行调用 - URL 应该是什么样的

```
for eg. - /getRecords?userID=1&fromDate=06022013&toDate=08022013' 
```

我是否需要一种方法来解析日期以便 Spring 可以识别它？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-02-08T07:51:43.827

采用`@DateTimeFormat("MMddyyyy")`

```
public @ResponseBody List<RecordDisplay> getRecords(
@RequestParam(value="userID")  Long userID,
@RequestParam(value="fromDate")     @DateTimeFormat(pattern="MMddyyyy") Date fromDate,
@RequestParam(value="toDate")     @DateTimeFormat(pattern="MMddyyyy") Date toDate) { 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-04-15T18:17:42.090

这现在也是 @DateTimeFormat ，它支持一些常见的 ISO 格式

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-09-25T17:55:38.863

使用 @DateTimeFormat(pattern="yyyy-MM-dd") 其中 yyyy 是年，MM 是月，dd 是日期

```
public @ResponseBody List<Student> loadStudents(@DateTimeFormat(pattern="yyyy-MM-dd") Date birthDay) {
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-11-30T10:20:17.423

您应该使用您的`application.properties`（或任何其他项目属性）并设置环境变量`spring.mvc.format.date`。

# codeigniter - 无法使用 Code Igniter、REST、Lighttpd url-rewrite 和 Backbone.js 接收 PUT 数据

> ID：14766819
> 
> 赞同：3
> 
> 时间：2013-02-08T06:18:33.567
> 
> 标签：codeigniter, rest, backbone.js, lighttpd

我将 CodeIgniter 与 REST API 和 Backbone.js 一起使用。Web 服务器是 lighttpd。我还更改了 lighttpd.conf 以重写 URL 以从 url 中删除 index.php，如下所示：-

```
url.rewrite-once = (
 "/(.*)\.(.*)" => "$0",
 "/(css|files|img|js|stats)/" => "$0",
 "^/([^.]+)$" => "/index.php/$1"
) 
```

来自 js 的调用到达 Codeigniter Put 函数，但 $this->put() 的值为空。请帮助我追踪为什么 PUT 数据的值为空。

注意：当我不重写 URL 时，这工作得很好。这也适用于 Apache Web 服务器。

在调试 REST_Controller.php 文件时，在函数“protected function_parse_put()”中，我发现文件“php://input”的内容也是空的

以下是在进行 PUT 调用时从 Chrome Web 检查器获取的请求标头和有效负载：-

```
**Request Headers**
PUT http://10.82.0.160/cav_settings/api/2 HTTP/1.1
Pragma: no-cache
Origin: http://10.82.0.160
Cache-Control: no-cache
User-Agent: Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.56 Safari/537.17
Content-Type: application/json
Accept: application/json, text/javascript, */*; q=0.01
Referer: http://10.82.0.160/settings/2
X-Requested-With: XMLHttpRequest
**Request Payload**
{"aggregation":{"enabled":"false","mode":""},"dns":{"auto":"false","servers":["10.0.0.5","10.20.0.20"]},"id":"2","dhcp":"false","ip":"10.82.0.160","netmask":"255.255.255.0","default_gw":"","mtu":"1500"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:11:50.343

你可以使用 Backbone.emulateJSON = true;

这是您疑问的最佳答案:)

[Codeigniter REST 服务器的 Backbone.js PUT/DELETE 问题](https://stackoverflow.com/questions/8319080/backbone-js-put-delete-problems-with-codeigniter-rest-server?rq=1)

# c# - WaitForExit 有时（随机）不起作用

> ID：14766830
> 
> 赞同：0
> 
> 时间：2013-02-08T06:19:49.497
> 
> 标签：c#, waitforexit

代码（仅部分）大部分时间都可以正常工作，但有时它只是挂在那里，即使任务管理器中的进程不再存在，try...catch 块之后的行似乎也不会被调用。

因为大多数时候它没有问题，所以在调试时我无法重现该问题。谁能给我一个提示，为什么或在什么情况下会发生这种情况？

```
try {
    process.Start();
    process.BeginOutputReadLine();
    process.BeginErrorReadLine();
    process.WaitForExit(settings.PlinkConnectTimeout * 1000);
    if (process != null && !process.HasExited) {
        if (IsConnected) {
            process.WaitForExit();
        }
        else {
            process.Kill();
        }
    }
}
catch { }

IsConnected = false;
IsConnecting = false;
Disconnected(isLastSuccess, isReconnect); 
```

# android - 对话框的自定义文本实现 OnClick 侦听器 Android

> ID：14766831
> 
> 赞同：0
> 
> 时间：2013-02-08T06:19:53.343
> 
> 标签：android

朋友们我只想设置自定义字体表单我的资产/字体文件夹我的 Java 代码看起来像这样

```
package customtext;
import android.app.Dialog;  
import android.content.Context;  
import android.os.Bundle;  
import android.view.View;  
import android.view.Window;
import android.widget.Button;
public class Custom extends Dialog implements android.view.View.OnClickListener{  
    public Custom(Context context) {  
        super(context);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
}  
Button btn;  
    @Override  
    protected void onCreate(Bundle savedInstanceState) {  
        super.onCreate(savedInstanceState);  
        setContentView(R.layout.custom);  
        btn=(Button) findViewById(R.id.dismis_dialog);  
        btn.setOnClickListener(this);  
    }  
    @Override  
    public void onClick(View v) {  
        dismiss();  
    }  
} 
```

当我尝试像[这样](https://stackoverflow.com/questions/10061494/android-getassets-in-common-class-gives-the-method-getasssets-is-undefined-fo)添加 它对我不起作用

它的错误

这是我的 XML

```
 <?xml version="1.0" encoding="utf-8"?>  
   <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"  
   android:layout_width="fill_parent"  
   android:layout_height="fill_parent"   
   android:orientation="vertical"
   style="@style/Theme.CustomDialog"   >

       <FrameLayout
           android:layout_width="250sp"
           android:layout_height="70sp"
           android:background="#ee8f03" >
            <TextView
                 android:layout_width="180sp"  
                 android:layout_height="wrap_content"   
                 android:id="@+id/sharedialog"
                 android:text="@string/msg"  
                 android:textColor="#272b2d"
                 android:background="#ef8e01"
                 android:layout_gravity="center" >  
            </TextView>  
       </FrameLayout>

       <FrameLayout
           android:layout_width="250sp"
           android:layout_height="70sp"
           android:background="#fff" >

           <Button 
             android:layout_width="wrap_content"  
             android:layout_height="wrap_content"  
             android:layout_gravity="bottom"
             android:clickable="true" 
             android:id="@+id/dismis_dialog"  
             android:text="@string/dismis"/> 
       </FrameLayout>

  </LinearLayout> 
```

请您告诉如何将自定义字体添加到这种类型的上下文对话框中

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:22:30.277

试试这个

```
Typeface type = Typeface.createFromAsset(getAssets(), "name.ttc");
dismis_dialog.setTypeface(type);
sharedialog.setTypeface(type); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:24:23.237

查看此链接以创建自定义对话框

[http://www.mkyong.com/android/android-custom-dialog-example/](http://www.mkyong.com/android/android-custom-dialog-example/)

您也可以像这样设置自定义字体

```
Typeface type = Typeface.createFromAsset(getAssets()/fonts, "myfonts.ttc");
youTextView.setTypeface(type); 
```

将您的字体放入资产目录下的字体文件夹中

# selenium-ide - storeTextPresent by ID selenium IDE

> ID：14766832
> 
> 赞同：0
> 
> 时间：2013-02-08T06:20:03.593
> 
> 标签：selenium-ide

---用一个简单的例子跳到我的编辑---

我搜索了 Ad Nauseum，花了几个小时才接近这个结果，但仍然没有解决我的自动化问题。这是我通过 PDF 将本地纸张从印刷版转换为在线版的东西，内容被推送到网站并且不直播，直到我进入并编辑一些设置，其中很多都是多余的。因此，如果我能通过这一点，我就很成功，并且可以从字面上减少完成这项工作所需的时间。

这篇论文有二十或三十位作者，one_off_byline 可能会有所不同，这里有一些例子。

id=id_one_off_byline value="Michael Reid" 但是它也可能看起来像接下来的两个或一些变体。

id=id_one_off_byline value="作者 Michael Reid" id=id_one_off_byline value="作者 Michael Reid - 你的日报"

我使用 storeTextPresent 在页面上找到 Michael。但是问题是页面上还有另一个选择值框，其中包含选择框中的每个作者姓名，这就是我实际上要填充的内容。所以这就是我所拥有的

```
<tr>
    <td>storeTextPresent</td>
    <td>Jeff</td>
<td>IsTextAppears</td>
</tr>
<tr>
    <td>gotoIf</td>
    <td>${isTextAppears}</td>
    <td>Jeff</td>
</tr>
<tr>
    <td>storeTextPresent</td>
    <td>Graham</td>
    <td>IsTextAppears</td> 
</tr>
<tr>
    <td>gotoIf</td>
    <td>${isTextAppears}</td>
    <td>Graham</td>     
   </tr>
<tr>
<td>label</td>
<td>Jeff</td>
 </tr>
<tr>
<td>label</td>
<td>Graham</td>
</tr> 
```

****我希望另一种表达方式*_ _* _****

 **表单字段1（忽略语法，我这里只是设置一个例子） id= 是两个表单字段中的重要部分。

```
<select name="select" id="pick_animal" value="">
  < option="the fast cat" id="1">
  < option="the fast dog" id="2">
</select> 
```

表单域 2

```
<input type="text" id="some_animal" value="the fast cat from dover"> 
```

我需要检测到这一点，`id="some_animal"` `contains cat` 以便我可以对字段 1 中的正确选项执行操作。我可以很好地完成第二部分，我只是无法在 id 为“some_animal”的输入中检测到“猫” storeTextPresent 只是寻找cat 存在于页面的任何位置。啊！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:45:04.223

```
<tr>
    <td>storeTextPresent</td>
    <td>Jeff</td>
    <td>IsTextAppears</td>
</tr>
<tr>
    <td>gotoIf</td>
    <td>${isTextAppears}==Jeff</td>
    <td>Jeff</td>
</tr>
<tr>
    <td>goto</td>
    <td>END</td>
    <td></td>
</tr>
<tr>
    <td>label</td>
    <td>Jeff</td>
    <td></td>
</tr>
<tr>
    <td>echo</td>
    <td>something</td>
    <td></td>
</tr>
<tr>
    <td>label</td>
    <td>END</td>
    <td></td>
</tr>

Try like this. 
```**

# c# - 短到字节转换

> ID：14766834
> 
> 赞同：3
> 
> 时间：2013-02-08T06:20:07.760
> 
> 标签：c#

我正在尝试将短类型转换为 2 字节类型以存储在字节数组中，这是“到目前为止”运行良好的片段。

```
if (type == "short")
{
   size = data.size;
   databuffer[index+1] = (byte)(data.numeric_data >> 8);
   databuffer[index] = (byte)(data.numeric_data & 255);
   return size;
} 
```

Numeric_data 是 int 类型。在我处理值 284（十进制）之前，这一切都很好。原来 284 >> 8 是 1 而不是 4。

主要目标是：

```
byte[0] = 28
byte[1] = 4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T06:58:50.743

这是你想要的：

```
 static void Main(string[] args)
    {
        short data=284;

        byte[] bytes=BitConverter.GetBytes(data);
        // bytes[0] = 28
        // bytes[1] = 1
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T06:57:59.320

只是为了好玩：

```
public static byte[] ToByteArray(short s)
{
    //return, if `short` can be cast to `byte` without overflow
    if (s <= byte.MaxValue) 
        return new byte[] { (byte)s };

    List<byte> bytes = new List<byte>();
    byte b = 0;
    //determine delta through the number of digits
    short delta = (short)Math.Pow(10, s.ToString().Length - 3);
    //as soon as byte can be not more than 3 digits length
    for (int i = 0; i < 3; i++) 
    {
        //take first 3 (or 2, or 1) digits from the high-order digit
        short temp = (short)(s / delta);
        if (temp > byte.MaxValue) //if it's still too big
            delta *= 10;
        else //the byte is found, break the loop
        {
            b = (byte)temp;
            break;
        }
    }
    //add the found byte
    bytes.Add(b);
    //recursively search in the rest of the number
    bytes.AddRange(ToByteArray((short)(s % delta))); 
    return bytes.ToArray();
} 
```

这种递归方法至少可以使用任何正值来满足 OP 的需求`short`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T06:29:15.463

为什么`284 >> 8`会`4`？

为什么会`284`被分成等于`28`and的两个字节`4`？

的二进制表示`284`是`0000 0001 0001 1100`。如您所见，有两个字节（八位），分别是`0000 0001`（`256`十进制）和`0001 1100`（`28`十进制）。

`284 >> 8`是`1`( `0000 0001`) 并且是正确的。

`284`应该分成两个字节等于`256`和`24`。

**你的转换是正确的！**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T06:41:26.267

如果你坚持：

```
short val = 284;
byte a = (byte)(val / 10);
byte b = (byte)(val % 10); 
```

**免责声明：**

这没有多大意义，但这是你想要的。我假设你想要从 0 到 99 的值。合乎逻辑的做法是使用 100 作为分母，而不是 10。但话又说回来，我不知道你想做什么。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T07:17:33.983

放弃您正在使用的无意义转换并继续`System.BitConverter.ToInt16`

```
 //to bytes
  var buffer = System.BitConverter.GetBytes(284); //your short value

  //from bytes
  var value = System.BitConverter.ToInt16(buffer, 0); 
```

# python-2.7 - 当 PyQT4 与 BaseHTTPServer 混合时，Python 冻结

> ID：14766837
> 
> 赞同：2
> 
> 时间：2013-02-08T06:20:11.240
> 
> 标签：python-2.7, pyqt4

我的 Python 代码有错误，我是 Python 新手，我也是 PyQT 新手。我想做的是用 GUI 构建一个基本的 http 代理服务器。我已经在控制台中完成了它，但是当我尝试实现 GUI 时，我得到了一个错误。

这是我的代码，任何帮助表示赞赏。

```
import BaseHTTPServer, SocketServer,sys
from PyQt4 import QtCore, QtGui
from Ui_MiniGui import Ui_MainWindow

class ThreadingHTTPServer(SocketServer.ThreadingMixIn, BaseHTTPServer.HTTPServer):
    pass

class webServer(QtCore.QThread):
    log = QtCore.pyqtSignal(object)

    def __init__(self, parent = None):
        QtCore.QThread.__init__(self, parent)

    def run(self):
        self.log.emit("Listening On Port 1805")
        Handler = BaseHTTPServer.BaseHTTPRequestHandler

        def do_METHOD(self):
            method = self.command
#I got some trouble here, how can i emit the signal back to the log?
            #self.log.emit(method) not work, python not crash
            #webServer.log.emit(method) not work, python not crash
        #below one not work and python crashes immediately
            webServer().log.emit(method)

        Handler.do_GET = do_METHOD

        self.httpd = ThreadingHTTPServer(("", 1805), Handler)
        self.httpd.serve_forever()

class Form(QtGui.QMainWindow):
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)
        self.ui = Ui_MainWindow()
        self.ui.setupUi(self)
        self.server = webServer()
        self.server.log.connect(self.write_to_textEdit)
        self.server.start()

    def write_to_textEdit(self, data):
        print data
        self.ui.textEdit.setText(data)

if __name__ == "__main__":

    app = QtGui.QApplication(sys.argv)
    myapp = Form()
    myapp.show()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-27T23:21:16.573

在这一行

```
webServer().log.emit(method) 
```

您创建一个新的网络服务器实例并发出它的日志信号。由于这是一个新对象，这个信号还没有连接到任何东西，所以它什么也没做。

要在正确的对象上发出信号，您可以执行以下操作：

```
def run(self):
    ...
    server = self
    def do_METHOD(self):
        ...
        server.log.emit(self) 
```

# ruby-on-rails - Rails 向数组添加元素

> ID：14766843
> 
> 赞同：1
> 
> 时间：2013-02-08T06:21:10.230
> 
> 标签：ruby-on-rails, ruby

我有一种方法可以计算给定记录集的平均值：

```
input = params[:recommendation_ratings].values  # The params are sent from radio_tags in my view.

input.each do |mini_params|
rating_id = mini_params[:rating_id]
l = Rating.find(rating_id) #Find record on Rating table. 
l.rating #Get value associated with rating_id
total_rating = []
total_rating << l.rating
average = total_rating.inject{ |sum, el| sum + el }.to_f / total_rating.size
puts average
end 
```

l.rating 未附加到 total_rating 数组。看跌平均值打印为：

```
3.0
3.0
3.0
3.0
3.0 
```

如何将返回的每个评级附加到数组中以计算平均值和其他数学函数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T06:38:52.940

尝试：

```
total_rating = []    
input.each do |mini_params|
  rating_id = mini_params[:rating_id]
  l = Rating.find(rating_id) #Find record on Rating table. 
  total_rating << l.rating      
end
average = total_rating.sum / total_rating.size.to_f 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T06:31:49.040

这应该可以解决您的问题，但有更好的方法

```
total_rating = []    
input.each do |mini_params|
  rating_id = mini_params[:rating_id]
  l = Rating.find(rating_id) #Find record on Rating table. 
  total_rating << l.rating
  average = total_rating.inject(:+).to_f / total_rating.size
  puts average
end 
```

因此，给定一个 id 数组，请尝试以下操作

```
Rating.where(id: mini_params[:rating_id]).average(:rating) 
```

更新：修复单行版本

```
rating_ids = input.map { |mini_params| mini_params[:rating_id] }
Rating.where(id: rating_ids).average(:rating) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:29:03.827

您需要首先获得您想要平均的所有评级。我假设您已经这样做了，并且所有这些评级都存储在`total_rating`. 然后您需要将特定评级添加到该数组：

```
rating_id = mini_params[:rating_id]
l = Rating.find(rating_id)
total_rating << l
average = total_rating.sum.to_f / total_rating.size
puts average 
```

# jquery - jQuery：查找和替换所有属性

> ID：14766844
> 
> 赞同：1
> 
> 时间：2013-02-08T06:21:11.820
> 
> 标签：jquery, dom

我试图在each() 中替换输入id 属性的特定部分和标签属性。但是，当我检查渲染时，只有输入 id 的属性已更改为 id="something_else_[name]"，但 for 的属性的标签保持不变，如 for="id_target_[name]"。

我究竟做错了什么？

jQuery：

```
$(window).bind('load', function() {
    $('.target').each( function() { 
        $(this).html($(this).html().replace('id_target','something_else'));
    });
}); 
```

标记：

```
<div class="target">
<input id="id_target_Bob" type="checkbox">
<label for="id_target_Bob">Target Bob</label>
</div> 
```

结果：

```
<div class="target">
<input id="something_else_Bob" type="checkbox">
<label for="id_target_Bob">Target Bob</label> <!-- why is this left unchanged? -->
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T06:23:51.840

`.replace`仅替换搜索字符串的*第一个*实例。如果要替换所有实例，则必须使用带有`g`（全局）标志的正则表达式：

```
.replace(/id_target/g, 'something_else') 
```

[http://jsfiddle.net/ExplosionPIlls/cV6pw/](http://jsfiddle.net/ExplosionPIlls/cV6pw/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T06:31:35.150

您可以只更新属性。这将在您的目标 div 中找到所有输入和标签标签并替换它们的属性：

**HTML：**

```
<div class="target">
  <input id="id_target_Bob" type="checkbox">
  <label for="id_target_Bob">Target Bob</label>
</div> 
```

**Javascript：**

```
$(document).ready(function () {
    $('div.target').each(function () {         
        $('input').attr('id', 'something_else');
        $('label').attr('for', 'something_else');
    });
}); 
```

**提示：**

为了获得更好的性能，您应该始终在您的类前面加上它所属的标签。jQuery 中第二快的选择器是标签选择器，因为它映射到原生 Javascript 方法，`getElementsByTagName()`.

而不是使用`$('.target').each(function () {...`，做`$('div.target').each(function () {...`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T06:24:53.920

正则表达式`g`是你需要的

试试这个

```
 $(this).html($(this).html().replace(/id_target/g,'something_else')); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T06:24:28.263

因为它只替换您告诉脚本这样做的第一次出现

您需要使用`/id_target/g`它来替换它找到的所有事件，而不仅仅是第一个

# android - 为什么 Android 无法将文件读取到 File 对象？

> ID：14766846
> 
> 赞同：0
> 
> 时间：2013-02-08T06:21:14.863
> 
> 标签：android

这是我创建文件对象的代码。我确定该文件存在。但是文件`length()`返回 0 并且`exists()`也返回 false。

```
File uploadFile = new File(Environment.getExternalStorageDirectory() + "/DCIM/DSC00050.jpg");
int totalSize = (int) uploadFile.length(); // Get size of file, bytes 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:33:51.590

if`exists()`返回 false 表示文件不存在或不可访问。确保 SD 卡已安装并且您的应用程序具有足够的权限，即`READ_EXTERNAL_STORAGE`. 我怀疑这是问题所在，因为在这种情况下你应该得到异常。

另一件事是记录绝对文件路径`uploadFile.getAbsolutePath()`并确保它是正确的。

**编辑：**

你确定你的图片不是直接在`DCIM`文件夹下`DCIM/Camera`吗？使用 Android 中的任何文件浏览器并检查文件完整路径。我在代码中看不到任何其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:34:57.420

写入后`File uploadFile = new File(...);`它不会创建文件本身。

AFAIK`If File.exists() is returning false, then file just doesn't exist yet.`

但是是的，您可以通过调用创建文件`file.createNewFile()`

# algorithm - 随机选择枢轴的优点

> ID：14766851
> 
> 赞同：1
> 
> 时间：2013-02-08T06:21:45.657
> 
> 标签：algorithm, sorting

在快速排序中，我们可以以不同的方式选择一个枢轴值。随机选择一个枢轴值就是其中之一。它说当我们随机选择枢轴值时，它最小化了 O(n^2) 的机会。谁能解释它是如何发生的？有什么缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T08:00:34.243

如果预期值是所有可能输入（排列）的平均值，则随机和非随机选择都会产生一个算法，其预期运行时间为 Theta(n*log(n))。

在实践中，并非所有输入排列都是同样可能的。特别是，当挑选前置（n^2）复杂性时，您通常会被分类或几乎分类。最重要的是，如果你的挑选算法是确定性的，攻击者可以制作一个令人讨厌的排列，使你的算法成为二次方，从而实现拒绝服务。

选择随机元素作为枢轴可以防止这些非随机情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T06:23:46.427

有一个数学证明，随机枢轴的预期运行时间是 Theta(n logn)。

[wiki 页面](http://en.wikipedia.org/wiki/Quicksort)对此有一个部分。

# java - 如何将新的 API 导入 Java？

> ID：14766854
> 
> 赞同：1
> 
> 时间：2013-02-08T06:21:55.300
> 
> 标签：java, eclipse, ini4j

我是一名初级程序员，希望利用我在互联网上遇到的 API 中的一些功能， http: [//ini4j.sourceforge.net/](http://ini4j.sourceforge.net/)是 API 的链接，它允许 Java 与 .ini 文件交互. 我已经下载了包含导入所需的所有文件的存档，但我不确定如何将它们导入 Eclipse，以便我可以将它们与我的 Java 项目一起使用，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:47:03.883

我实际上建议看看 Maven。它是一个工具，可帮助您管理构建、依赖项、...

这样，如果您想将代码签入源代码存储库，则无需同时提交 jar 文件，并且可以更轻松地更新文件。

快速示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.kanescharles.iniProject</groupId>
    <artifactId>iniProject</artifactId>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>iniTest</name>
    <url>http://www.kanecharles.com/iniTest</url>
    <build>
        <finalName>iniTest</finalName>
        <plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <dependencies>
        <dependency>
            <groupId>org.ini4j</groupId>
            <artifactId>ini4j</artifactId>
            <version>0.5.2</version>
        </dependency>        
    </dependencies>  
</project> 
```

对于 Eclipse，你有 m2eclipse 插件，如果你想查找依赖项，我会推荐[mvnRepository](http://www.mvnrepository.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T06:27:07.850

最简单的方法是在您的项目下创建一个新文件夹，例如并将您要使用的库的`lib`所有文件复制到该文件夹​​（*请注意*，您可以在 eclipse 中完成所有这些操作）`jar``lib`

 *刷新您的 Eclipse 项目，以便显示新文件。右键单击它们并选择`Build Path -> Add to Build Path`

您也可以右键单击您的项目并选择`Build Path -> Configure Build Path`*

# php - 使用php按日期过滤xml数据

> ID：14766857
> 
> 赞同：0
> 
> 时间：2013-02-08T06:22:06.293
> 
> 标签：php, xml, date, xml-parsing

我想使用 php 按日期过滤我的 xml 数据

```
<xml>
<customer>
  <cid>1</cid>
  <amount_paid>1000</amount_paid>
  <date>2012-01-10</date>
</customer>
<customer>
  <cid>2</cid>
  <amount_paid>3000</amount_paid>
  <date>2012-01-10</date>
</customer>
<customer>
  <cid>3</cid>
  <amount_paid>1000</amount_paid>
  <date>2012-01-05</date>
</customer>
<customer>
  <cid>6</cid>
  <amount_paid>7000</amount_paid>
  <date>2012-01-21</date>
</customer>
</xml> 
```

如何按日期过滤我的 xml？例如。我想获得 date = "2012-01-10" 的客户

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:26:21.653

[看到它在行动](http://codepad.viper-7.com/s1YcOf)

```
<?php
    $string = '<xml>
<customer>
  <cid>1</cid>
  <amount_paid>1000</amount_paid>
  <date>2012-01-10</date>
</customer>
<customer>
  <cid>2</cid>
  <amount_paid>3000</amount_paid>
  <date>2012-01-10</date>
</customer>
<customer>
  <cid>3</cid>
  <amount_paid>1000</amount_paid>
  <date>2012-01-05</date>
</customer>
<customer>
  <cid>6</cid>
  <amount_paid>7000</amount_paid>
  <date>2012-01-21</date>
</customer>
</xml>';

$xml = simplexml_load_string($string);

foreach ($xml->customer AS $customer)
{
    if ($customer->date == '2012-01-10')
    {
        echo $customer->cid . "<br>\n";
        echo $customer->amount_paid . "<br>\n";
    }
} 
```

# perl - 什么是共享 perl 脚本的可重新加载配置参数的好方法

> ID：14766862
> 
> 赞同：1
> 
> 时间：2013-02-08T06:22:35.890
> 
> 标签：perl, configuration, import, daemon, signal-handling

我有很多具有通用配置的小型 Perl 守护进程。

目前，我使用它来加载设置：

在 myconfig.pm 中：

```
package MyConfig;
use base 'Exporter';

BEGIN {
    our @EXPORT = qw( $DB_DSN $DB_USER $DB_PWD );
}

our @EXPORT;
use vars @EXPORT;

$DB_DSN = "DBI:mysql:...";
$DB_USER = 'asdad';
... 
```

在 daemon.pl 中：

```
use MyConfig; 
```

这工作得很好。但是现在我有了新的要求，即在`USR1`收到信号时重新加载配置。我知道

```
$SIG{"USR1"} = sub { ... } 
```

但接下来呢？`use MyConfig`再次？看起来很生气。

我的脚本必须在许多不同的平台和从 5.8 到现代的不同 perl 版本上运行，所以我试图避免使用 CPAN 模块。

请为我指出有关此任务的良好解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T06:57:40.297

当你时`use Module (ARGS)`，这相当于

```
BEGIN {
  require Module;
  Module->import(ARGS);
} 
```

`require`定位并编译模块。每个模块只发生一次。运行通常将 subs 和变量加载到调用者命名空间（由 Exporter 模块提供）的`import`特殊sub。`import`所以

```
$SIG{USR1} = sub { no warnings 'redefine'; MyConfig->import }; 
```

可能很好地解决您的问题。

* * *

### 跟进：

我编写了这个小程序来证明它是有效的（使用 ALRM 而不是 USR1）：

```
use 5.010;
package Foo;
sub import{ # The Exporter module writes something similar.
  no strict 'refs';
  *{caller()."::var"} = \do{ my$x = 1 }; # put $foo into callers namespace
}

package main;
Foo->import(); # use Foo; if the package were in another file
$SIG{ALRM} = sub{ Foo->import; alarm 10 };
alarm 10;
while(1){
  say $var++;
  sleep 1;
} 
```

输出：一次又一次地从 0 数到大约 10。请注意，我更改了循环内的变量，因此我可以看到它发生了变化并被正确重置。

# jquery - 防止XSS攻击

> ID：14766863
> 
> 赞同：5
> 
> 时间：2013-02-08T06:22:41.270
> 
> 标签：jquery, asp.net, security, xss

我正在开发一个 ASP.Net C# + jQuery ajax 网站项目。我试图防止 xss 攻击，我知道下面不是完整的方法，但这至少是我应该做的 - 在接受用户的免费字符串输入时使用 HtmlEncode）。我真的有人来检查我是否做对了。

因此，假设我们有一个场景，其中一个页面控件是“描述”文本框，用户可以输入用于描述其产品的“免费”字符串。为了防止得到 xss 攻击输入，在服务器端的页面方法中，我使用 包裹了“描述”文本`HtmlUtility.HtmlEncode()`，因此字符串在进入数据库之前将被解释为纯文本，即`<script>`变为`&gt;script&lt;`.

接下来的部分是我的疑问 - 如何在将 html 编码文本返回给用户之前处理它？

当用户想要查看输入的描述文本时，网站从数据库中检索并打印出来。

对描述执行 html 解码是否合乎逻辑，这样用户就不会看到那些奇怪的`&gt;&lt;`字符？它会破坏首先使用 HtmlEncode 的目的吗？如果是，这是正确的 jQuery 行来解码和打印文本给用户？？？

`$("#txtDescription").val($(this).html(obj.Description).text();`

非常非常感谢你

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T06:25:50.617

不要对进入数据库的文本进行编码。以原始、未过滤的形式存储它。如果将字符串输出到支持 HTML 的上下文（例如输出到浏览器），则仅对 HTML 字符进行编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T23:49:04.110

您需要记住您处理的每个字符串的内容类型以及它的来源 - 无论是来自安全来源还是不受信任的来源，并且还需要知道何时连接两个字符串，它们都是相同的内容类型和信任的字符串-等级。

> 我使用 包裹了“描述”文本`HtmlUtility.HtmlEncode()`，因此在进入数据库之前字符串将被解释为纯文本，即`<script>`变为`&gt;script&lt;`.

在这里，您好像在说描述字段是纯文本字符串，而您在数据库中存储的是安全 HTML 字符串（因为`HtmlEncode`保证 的输出不包含危险代码）。

这显示了过早编码内容的第一个问题。如果您正在编写要发送到服务器的 SQL 字符串，则预编码为 HTML 并不能保护您免受 SQL 注入。对于 SQL，使用 SQL 准备语句是克服此问题的好方法，但预编码不会使字符串在所有上下文中都是安全的。

> 接下来的部分是我的疑问 - 如何在将 html 编码文本返回给用户之前处理它？
> 
> 当用户想要查看输入的描述文本时，网站从数据库中检索并打印出来。

如果用户正在接收安全 HTML，并且您有一个安全 HTML 字符串，则可以将其发送给用户。

如果用户正在接收纯文本电子邮件，那么您需要将存储在数据库中的安全 HTML 转换为纯文本。

如果用户正在接收 RSS，那么您需要确保使用 XML 的子字符串来编写 RSS。

[上下文自动转义](https://developers.google.com/closure/templates/docs/security)可以帮助您确保在输出时正确编码值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-12T03:17:43.233

[使用AntiXss 库](http://www.microsoft.com/en-nz/download/details.aspx?id=28589)而不是 httputility.htmlencode是个好主意。考虑阅读文档以获得更清晰的信息。您在 AntiXSS 库 wrt 输入编码中有更广泛的选择。[它遵循本讨论](https://stackoverflow.com/questions/2022289/why-use-microsoft-antixss-library)中提到的更安全的基于白名单的方法。

# c++ - 在没有任何内存泄漏的情况下初始化 const char *

> ID：14766864
> 
> 赞同：2
> 
> 时间：2013-02-08T06:22:49.833
> 
> 标签：c++, string, char, constants

下面是我的示例代码。它只是一个示例，类似于我在应用程序中使用的代码。

```
#define STR_SIZE 32

void someThirdPartyFunc(const char* someStr);

void getString(int Num, const char* myStr)
{
  char tempStr[] = "MyTempString=";
  int size = strlen(tempStr) + 2;
  snprintf((char*)myStr, size, "%s%d", tempStr, Num);
}

int main()
{
  const char * myStr = new char(STR_SIZE);
  getString(1, myStr); // get the formated string by sending the number
  someThirdPartyFunc(myStr); // send the string to the thirdpartyFunction
  delete myStr;

  return 0;
} 
```

如果我使用此代码，我会遇到异常。我认为问题在于删除“myStr”。但是删除确实是必要的。

有没有其他方法可以格式化 getString 中的字符串并将其发送到 ThirdPartyFunc？

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-08T06:27:39.580

您分配的不是一个字符数组，而是一个字符与这一行：

```
 const char * myStr = new char(STR_SIZE); 
```

并且一个分配的字符被初始化为`STR_SIZE`，在这种情况下导致“字符溢出”。

如果你想要一个大小的数组`STR_SIZE`：

```
 const char * myStr = new char[STR_SIZE]; 
```

（注意矩形 [ ]）。您必须使用`delete[]`运算符解除分配这样分配的内存块。

个人注意：您上面编写的代码（手动分配的字符串等）具有良好的教育意义；你会犯很多这样的错误，从而了解 C/C++ 的内部工作原理。对于您不想要的生产代码，对于您想要的生产代码`std::string`或其他字符串容器，以避免重复与字符串相关的错误。一般来说，您不是成功地重新发明字符串库如何工作的人。对于其他容器类型也是如此，例如动态可增长数组（`std::vector`）或字典类型或其他类型。但是对于上面的代码进行教育摆弄是一个很好的目的。

您的代码片段中还有其他问题（移交`const char*`给函数然后修改内存，`size`调用时未正确计算参数`snprintf`等），但这些与您的段错误问题无关。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-08T06:26:20.153

重新*技术*，而不是

```
const char * myStr = new char(STR_SIZE); 
```

做

```
char const myStr[STR_SIZE] = ""; 
```

请注意，两者都存在无法修改字符串的问题。

但是您只询问了分配/解除分配问题。

* * *

但是，在语言技术之上的水平有很多错误。

这是原始代码，完整的：

```
void someThirdPartyFunc(const char* someStr);

void getString(int Num, const char* myStr)
{
  char tempStr[] = "MyTempString=";
  int size = strlen(tempStr) + 2;
  snprintf((char*)myStr, size, "%s%d", tempStr, Num);
}

int main()
{
  const char * myStr = new char(STR_SIZE);
  getString(1, myStr); // get the formated string by sending the number
  someThirdPartyFunc(myStr); // send the string to the thirdpartyFunction
  delete myStr;

  return 0;
} 
```

以下是在 C++ 级别执行此操作的方法：

```
#include <string>           // std::string
#include <sstream>          // std::ostringstream
using namespace std;

void someThirdPartyFunc( char const* ) {}

string getString( int const num )
{
    ostringstream stream;
    stream  << "MyTempString=" << num;
    return stream.str();
}

int main()
{
  someThirdPartyFunc( getString( 1 ).c_str() );
} 
```

从更自然的`#define`代码中消失了，但请注意，即使使用所有大写的宏名称，它也很容易导致不需要的文本替换。无论如何，大写大写都是令人眼花缭乱的（这就是为什么它是宏名称约定，而不是其他约定）。在 C++ 中，只需使用`const`。

# python - 如何建立对 python 调用的跟踪能力？

> ID：14766867
> 
> 赞同：3
> 
> 时间：2013-02-08T06:23:02.283
> 
> 标签：python, python-2.7, trace

假设我有一些 python 代码，例如在某处定义的某个类，**它不能被修改**

```
class MyClass(object):

    def __init__(self, arg1, arg2):
        do_something...
    def foo(self):
        do_something 
```

现在我想添加一个跟踪功能，例如来自外部的一些机制来跟踪上述类的每个方法调用。我希望能够在例如`__init__`被调用时打印出来，`foo`甚至是`__del__`是`MyClass`.

这可能吗，如何做到最好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T07:50:56.083

您可以创建一个跟踪装饰器并将其附加到类实例或类定义的所有方法，如`decorate_methods`函数所示。

```
import functools
import inspect
import types

class TestClass(object):
    def func1(self):
        pass

    def func2(self, a, b):
        pass

def trace(func):
    @functools.wraps(func)
    def decorator(*args, **kwargs):
        print "TRACE:", func.__name__, args, kwargs
        return func(*args, **kwargs)
    return decorator

def decorate_methods(obj, decorator):
    for name, func in inspect.getmembers(obj):
        if isinstance(func, types.MethodType):
            setattr(obj, name, decorator(func))

# Apply the decorator to a class instance
test1 = TestClass()
decorate_methods(test1, trace)
test1.func1()
test1.func2('bar1', b='bar2')

# Apply the decorator to the class definition
decorate_methods(TestClass, trace)
test2 = TestClass()
test2.func1()
test2.func2('bar1', b='bar2') 
```

脚本的输出将是：

```
TRACE: func1 () {}
TRACE: func2 ('bar1',) {'b': 'bar2'}
TRACE: func1 (<__main__.TestClass object at 0x7f5a8d888150>,) {}
TRACE: func2 (<__main__.TestClass object at 0x7f5a8d888150>, 'bar1') {'b': 'bar2'} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T06:27:03.850

创建一个包装原始类的代理类，然后在打印跟踪后委托工作：

```
 class MyClassProxy(object):

      def __init__(*args, **kwds):
           print 'Initializing'
           self.o = MyClass(*args, **kwds)

      def foo(self):
           print 'Fooing'
           return self.o.foo() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T06:37:43.457

使用如下所示的装饰器：

```
def call_trace(orig_func):

    def decorated_func(*args, **kwargs):
        print "========>In function: " + orig_func.__name__ + "<========"
        orig_func(*args, **kwargs)
    return decorated_func 
```

应用这个装饰器来跟踪函数。它在输入函数之前打印函数名称。

前任：

```
@call_trace
def foo(self):
    do_something 
```

希望能帮助到你。

[更新]：您可以使用元类，唯一需要更改的是在您的类中添加“元类”参数，如下所示。如您所见，下面的代码将“call_trace”装饰器应用于“ExBase”类中的每个函数。

我昨天试过了，效果很好。我也是python的新手。:)

```
def call_trace(orig_func):

    def inner_func(*args, **kwargs):
        print ("function name:" + str(orig_func.__name__))
        orig_func(*args, **kwargs)
    return inner_func

class ExMeta(type):

    def __new__(cls, name, bases, attrs):

        for attr in attrs:
            if hasattr(attrs[attr], '__call__'):
                attrs[attr] = call_trace(attrs[attr])
        return type.__new__(cls, name, bases, attrs)

class ExBase(metaclass=ExMeta):

    x = "x"
    y = "y"
    def __init__(self):
        self.__name = "name"

    def getname(self):
        return self.__name

b = ExBase()
b.getname() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T08:13:04.527

从 github.com/pgbovine/OnlinePythonTutor/tree/master/v3 获取 OnlinePythonTutor 的代码。

你不需要为所有的 JS 东西操心。将文件提取到某个目录中。您可以使用 python /path/to/my/OnlinePythonTutor-master/v3/generate_json_trace my_script.py 运行脚本

这将逐步为您提供程序正在执行的所有操作。如果您想查看 bdb [http://docs.python.org/2/library/bdb.html](http://docs.python.org/2/library/bdb.html)中的源代码和底层源，这可能会有点过头了。bdb 的文档很糟糕，所以我很难弄清楚到底发生了什么，但我认为这是一个很酷的问题，祝你好运。

# java - Java ArrayList 概念

> ID：14766873
> 
> 赞同：2
> 
> 时间：2013-02-08T06:23:19.177
> 
> 标签：java

如何在 ArrayList 中循环遍历 ArrayList？

例如，如果我有一个 ArrayList 称为 Plant 对象的植物。并且每个 Plant 对象内部都有随机数量的花名。如何通过 ArrayList，在每个 Plant 处停下并打印出 Plant 的花名列表？（只是一个例子）然后继续下一个工厂，等等。

植物：有一个花的数组列表：有一个花名的数组列表

植物属于一类，花卉属于另一类

有没有办法用标准的 for 循环来做到这一点？不互动……？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T06:26:22.773

尝试这样的事情。

```
for( Plant plant : plants) {
    for(Flowers flower : plant.getFlowers()) {
        System.out.println(flower.getName());
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:28:51.567

```
 ArrayList<Object> outerList = new ArrayList<Object>();
    ArrayList<Object> innerList = new ArrayList<Object>();

    for(Object outer: outerList){
        for(Object inner: innerList){

            //Perform operation with innerList. Print or something else.
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:50:41.523

如果您不确定在哪个位置会得到另一个列表对象，请使用方法实例并检查。示例代码在这里。

```
for(int i=0;i<l1.size();i++){
    if(!(l1.get(i) instanceof List<?>)){
    System.out.println(l1.get(i));
    }
    else {
    for(int j=0;j<((List)l1.get(i)).size();j++){
        System.out.println(((List)l1.get(i)).get(j));
    }
    }
    } 
```

# c# - LinkBut ton 不会触发命令事件

> ID：14766876
> 
> 赞同：0
> 
> 时间：2013-02-08T06:23:22.007
> 
> 标签：c#, asp.net, listview, event-handling

我知道有很多关于此的相关帖子或文章，但似乎它们对我的情况没有帮助。我什至与该站点上的工作示例进行了比较，[http://www.ezineasp.net/post/ASP-Net-LinkBut​​ton-Command-Event.aspx](http://www.ezineasp.net/post/ASP-Net-LinkButton-Command-Event.aspx)，我认为没有太大区别。我认为我的代码应该可以工作，但显然它不会。如果这看起来像重复，我很抱歉，但这是我在这里发帖的最后手段。

这是我的 HTML：

```
 <asp:ListView runat="server" ID="AppsList">
        <LayoutTemplate>
            <div>
                <asp:PlaceHolder runat="server" ID="itemPlaceHolder" />
            </div>
        </LayoutTemplate>

        <ItemTemplate>
            <div class="applist">
                <div class="app">
                    <asp:ImageButton ID="imgbtnApp" runat="server" ImageUrl='<%#Eval("Icon") %>' height="100" width="100" CommandName="Select" CommandArgument='<%# Eval("ID") %>' OnCommand="AppsList_ItemCommand" />
                </div>
                <div class="appname">
                    <asp:LinkButton ID="linkbtnAppName" runat="server" CommandName="Select" ForeColor="#333333" CommandArgument='<%# Eval("ID") %>' OnCommand="AppsList_ItemCommand" CssClass="linkbtnAppName"><%# Eval("AppName") %></asp:LinkButton>
                </div>
            </div>
        </ItemTemplate>

        <EmptyDataTemplate>
            Sorry - Nothing found.
        </EmptyDataTemplate>
    </asp:ListView> 
```

代码：

```
protected void AppsList_ItemCommand(object sender, CommandEventArgs e)
{
    if (e.CommandName == "Select")
    {
        txtTest.Text = e.CommandArgument.ToString();
    }
} 
```

我在这里尝试实现的是，当我单击图像按钮或链接按钮时，将 ListView 中项目的 ID 捕获到文本框中。两者都将执行相同的操作。我已经让图像按钮工作了。当我单击图像时，ID，例如 1 将出现在文本框中。但是当我想用链接按钮做同样的事情时，什么都不会发生。该事件不会以任何方式触发。

我看过一些关于中继器或 AJAX 做同样事情的帖子，但我只是想知道为什么这段代码不能工作。我将不胜感激任何指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-06T09:11:55.953

根据我自己的经验，我错误地设置 `ViewStateMode="Disabled"`了页面指令。

因此，当在列表视图中单击链接按钮后发生回发时，现有数据将消失。因此，不会到达 LinkBut​​ton 的 OnCommand 事件并且永远不会触发。

删除 ViewStateMode 属性后，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:59:49.570

我注意到您的 eventArgs 应该 ListViewCommandEventArgs 而不是 CommandEventArgs，并且您还应该将 itemCommand 事件绑定到您的 aspx 页面，如下所示。

ASPX：

```
<asp:ListView runat="server" ID="AppsList" OnItemCommand="AppsList_OnItemCommand"> 
```

代码背后：

```
 protected void AppsList_OnItemCommand(object sender, ListViewCommandEventArgs e)
  {
    if (String.Equals(e.CommandName, "Select"))
    {
    }
  } 
```

更新：

还要从图像按钮和链接按钮 OnCommand="AppsList_ItemCommand" 中删除 OnCommand 属性，并且每个 CommandName 应该不同于其他。

```
 <div class="applist">
        <div class="app">
            <asp:ImageButton ID="imgbtnApp" runat="server" ImageUrl='<%#Eval("Icon") %>' height="100" width="100" CommandName="Select" CommandArgument='<%# Eval("ID") %>'  />
        </div>
        <div class="appname">
            <asp:LinkButton ID="linkbtnAppName" runat="server" CommandName="Select" ForeColor="#333333" CommandArgument='<%# Eval("ID") %>' CssClass="linkbtnAppName"><%# Eval("AppName") %></asp:LinkButton>
        </div>
    </div>
</ItemTemplate> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T07:18:04.207

好吧，如果有人想知道为什么会这样，这是我在花费大量时间撕下我的代码以查看它有什么问题后发现的。我怀疑有人会碰到这个问题，但要解决这个问题，分享就是关怀。

显然，我放在母版页中的搜索按钮是这背后的原因。我已将其 ID 分配为“提交”，这是阻止我的链接按钮工作的东西，我不知道为什么会这样。搜索功能只是一个允许用户在网页中查找关键字的搜索引擎。当搜索按钮的 ID 分配为“提交”时，链接按钮的 OnCommand 事件不会触发。

当我将其更改为“submit1”时，一切正常。我仍然是这个 asp.net 的新手，谁能告诉我为什么这甚至会影响链接按钮？无论如何，OnCommand 事件现在可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-09T20:34:55.327

我对 LinkBut​​tons 也有类似的问题。我不记得我是怎么想出来的，但我一定很沮丧，很快就开始点击 LinkBut​​ton 几次，我注意到 Command 事件偶尔会触发一次。很快我就想，如果我在页面完全加载之前单击 LinkBut​​ton，该命令就会正确触发。如果页面已完全加载，那么似乎某些东西正在劫持 LinkBut​​ton 上的该命令。

没有成功，我从其他建议之一中搜索了可能使用名称/ID“提交”的任何按钮。我的页面上没有。

成功后，我尝试使用 ASP.Net Buttons 而不是 LinkBut​​tons。这似乎解决了我的问题。我不完全确定是什么导致了这种情况，但按钮似乎在我的情况下工作，所以我会坚持下去。

# perl - Perl 中的编译时间和运行时间

> ID：14766878
> 
> 赞同：5
> 
> 时间：2013-02-08T06:23:30.947
> 
> 标签：perl, runtime, compile-time

我正在阅读[此文档](http://oreilly.com/catalog/pperl3/chapter/ch18.html)以了解 Perl 程序的生命周期。

在这样的命令行上运行 Perl 脚本时，**运行**时和**编译**时事件何时发生：

```
perl my_script.pl 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-08T07:29:26.140

`perl script.pl`将编译`script.pl`然后执行`script.pl`。同样，`require Module;`将编译`Module.pm`然后执行`Module.pm`。

如果编译器遇到一个`BEGIN`块，它会在该块被编译后立即执行该块。请记住，这`use`是一个由 a和可能 a`BEGIN`组成的块。`require``import`

例如，

```
# script.pl
use Foo;
my $foo = Foo->new();
$foo->do(); 
```

做：

1.  编译`script.pl`
    1.  编译`use Foo;`
    2.  执行`require Foo;`
        1.  编译`Foo.pm`
            1.  ...
        2.  执行`Foo.pm`
            1.  ...
    3.  执行`import Foo;`
    4.  编译`my $foo = Foo->new();`
    5.  编译`$foo->do();`
2.  执行`script.pl`
    1.  执行`my $foo = Foo->new();`
    2.  执行`$foo->do();`

# c#-4.0 - 在 Visual Studio 2012 中创建安装程序

> ID：14766882
> 
> 赞同：0
> 
> 时间：2013-02-08T06:23:37.600
> 
> 标签：c#-4.0, visual-studio-2012, clickonce, sql-server-express

我想部署我的应用程序，它使用水晶报表和 SQL Server express。如何创建可以创建数据库并在安装时配置 app.config 文件的安装程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T07:12:02.527

ClickOnce 将不允许您在安装时轻松运行 db 脚本。您将不得不使用 VS 安装项目或像 InstallShield 这样的工具来提供对安装过程的更多控制。

# multithreading - 将休眠与弹簧一起使用时出错

> ID：14766883
> 
> 赞同：0
> 
> 时间：2013-02-08T06:23:40.743
> 
> 标签：multithreading, spring, hibernate

我不断收到以下错误（几乎每隔一段时间） -

```
 org.hibernate.HibernateException: No Hibernate Session bound to thread, and      configuration does not allow creation of non-transactional one here
  org.springframework.orm.hibernate3.SpringSessionContext.currentSession(SpringSessionContext.java:63) 
```

这是我的配置文件。

web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
     <web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee       
    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<!-- The definition of the Root Spring Container shared by all Servlets 
    and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters --> 
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- <context:property-placeholder location="classpath*:WEB-INF/**/*.properties"/>-->

<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>
            /WEB-INF/spring/appServlet/servlet-context.xml
        </param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<!-- Spring Security -->
<filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
</filter>

<filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

根上下文.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xmlns:context="http://www.springframework.org/schema/context"
 xmlns:util="http://www.springframework.org/schema/util"
 xmlns:tx="http://www.springframework.org/schema/tx"
 xsi:schemaLocation="http://www.springframework.org/schema/beans        http://www.springframework.org/schema/beans/spring-beans.xsd
    http://www.springframework.org/schema/context     http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

<!-- Root Context: defines shared resources visible to all other web components -->
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations" value="classpath:application.properties"/>
</bean>

<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost/sedona"/>
    <property name="username" value="${db.username}"/>
    <property name="password" value="${db.password}"/>
</bean>

<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
    <constructor-arg ref="dataSource"/>
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="packagesToScan"> 
        <list>
            <value>com.digmyidea.sedona.domain</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.HSQLDialect</prop>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<context:component-scan base-package="com.digmyidea.sedona" />

<tx:annotation-driven/>

<import resource="appServlet/security.xml"/> 
```

servlet-context.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
    <beans xmlns="http://www.springframework.org/schema/beans" 
 xmlns:context="http://www.springframework.org/schema/context" 
 xmlns:mvc="http://www.springframework.org/schema/mvc" 
 xmlns:tx="http://www.springframework.org/schema/tx"
 xmlns:p="http://www.springframework.org/schema/p" 
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
 xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-3.1.xsd                 
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.1.xsd               
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

<!-- Enables the Spring MVC @Controller programming model -->
<mvc:annotation-driven />

<context:annotation-config/>

<!-- Handles HTTP GET requests for /resources/** by efficiently serving 
    up static resources in the ${webappRoot}/resources directory -->
<mvc:resources mapping="/resources/**" location="/resources/" />

<!-- Resolves views selected for rendering by @Controllers to .jsp resources 
    in the /WEB-INF/views directory <beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver"> 
    <beans:property name="prefix" value="/WEB-INF/views/" /> <beans:property 
    name="suffix" value=".jsp" /> </beans:bean> 
-->

<!-- Tiles -->
<bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer" id="tilesConfigurer">
    <property name="definitions">
        <list>
            <value>/WEB-INF/layout/layout.xml</value>
            <!-- Scan views directory for Tiles configurations -->
            <value>/WEB-INF/views/**/tiles.xml</value>
        </list>
    </property>
</bean>

<bean class="org.springframework.web.servlet.view.UrlBasedViewResolver" id="tilesViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView"/>
</bean>

<context:component-scan base-package="com.digmyidea.sedona.controller" use-default-filters="false">
    <context:include-filter type="annotation" expression="org.springframework.stereotype.Controller"/>
</context:component-scan> 
```

-->

我认为在上下文初始化过程中会发生某种竞争条件。我在 DAO 类上使用了 @Transactional 注释。

任何帮助将不胜感激。

这是堆栈跟踪 -

```
 org.hibernate.HibernateException: No Hibernate Session bound to thread, and configuration does not allow creation of non-transactional one here
org.springframework.orm.hibernate3.SpringSessionContext.currentSession(SpringSessionContext.java:63)
org.hibernate.impl.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:544)
com.digmyidea.sedona.services.UserServiceImpl.getCurrentSession(UserServiceImpl.java:26)
com.digmyidea.sedona.services.UserServiceImpl.save(UserServiceImpl.java:50)
com.digmyidea.sedona.controller.account.UserController.createUser(UserController.java:109)
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
java.lang.reflect.Method.invoke(Method.java:597)
org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:311)
org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:116)
org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:113)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:101)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:113)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:45)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:182)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:323)
org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:173)
org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259) 
```

note Apache Tomcat/6.0.29 日志中提供了根本原因的完整堆栈跟踪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T00:38:57.717

将以下过滤器添加到您的 web.xml

```
 <filter>
        <filter-name>hibernateFilter</filter-name>
        <filter-class>org.springframework.orm.hibernate3.support.OpenSessionInViewFilter</filter-class>
        <init-param>
            <param-name>flushMode</param-name>
            <param-value>AUTO</param-value>
        </init-param>
    </filter>
    <filter-mapping>
        <filter-name>hibernateFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

# php - 不同用户级别的PHP登录

> ID：14766885
> 
> 赞同：0
> 
> 时间：2013-02-08T06:23:47.483
> 
> 标签：php, sql

我正在创建具有不同用户级别的登录名。如果用户名和密码是 admin 或 staff，如何从我的表 users 中获取 user_level 字段。

这是代码：

```
<?php
include("../config/database.php");

if(isset($_POST["login"]))
{
  $username = $_POST['username'];
  $password = $_POST['password'];

  $username = stripslashes($username);
  $password = stripslashes($password);
  $username = mysql_real_escape_string($username);
  $password = mysql_real_escape_string($password);

  $query = "SELECT * FROM users 
                     WHERE username= '$username' OR email= '$username'  
                           AND password='$password'";
  $result = mysql_query($query);

  $count = mysql_num_rows($result);//counting table rows

  if($count==1)
  {//check if found username and password
    if(user_level == "admin")
    {
      header("Location: ../views/admin/dashboard.php");
    }
    elseif(user_level=="patient")
    {
      header("Location: ../views/default/home.php");
    }

  }
  else
  {
    echo "WRONG USERNAME OR PASSWORD!";
  }

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:33:40.820

做一些改变，它会工作......

```
$count = mysql_fetch_assoc($result); 
```

并且

```
if($count==1){//check if found username and password
        if($count['user_level'] == "admin"){
            header("Location: ../views/admin/dashboard.php");
        }elseif($count['user_level']=="patient"){
            header("Location: ../views/default/home.php");
        }

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:32:44.987

您应该`user_level`在数据库表中添加一个字段`users`。您可以为其分配值`admin`或`patient`在注册级别。

之后，对新变量使用相同的查询`$previlage`。然后使用它从数据库中获取内容，如下所示，，，

```
 $previlage=mysql_fetch_array($result); //fetch contents from db

            if($previlage['user_level'] == "admin"){
                header("Location: ../views/admin/dashboard.php"); // if userlevel admin
            }elseif($previlage['user_level']=="patient"){
                header("Location: ../views/default/home.php"); // if user level is patient
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:28:02.770

```
if(user_level == "admin"){ 
```

应该

```
$record=mysql_fetch_assoc($result);
if($record["user_level"] == "admin"){ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T06:28:04.260

首先尝试使用括号分隔

```
$sql = "SELECT * FROM users
        WHERE (username= '$username' OR email= '$username')  
        AND password='$password'";"; 
```

并且`mysql_*`功能也被贬低了。您可以使用`mysqli_*`or `PDO`。

为了回答您的问题，您是否有一个字段来确定用户在您的表中的角色？如果是这样，只需返回该字段并检查用户是否是适当的角色。

例子：

```
$data = mysql_fetch_assoc($result);

if ($data["user_level"] == "admin" ){
   ...
} 
```

# javascript - 提交由 jquery 脚本生成的表单？

> ID：14766888
> 
> 赞同：0
> 
> 时间：2013-02-08T06:23:56.280
> 
> 标签：javascript, jquery

我创建了一个简单的脚本来根据上传的文件生成自定义表单，
该脚本正常工作没有问题
，唯一的问题是提交创建的不是 DOM 的一部分，因为它是由 Jquery 创建的。
当我提交它时，即使它有值，它也会发送空值。
这是代码

```
$(function(){

    //------------- Plupload php upload  -------------//
    // Setup html4 version
    $("#html4_uploader").pluploadQueue({
        // General settings
        runtimes : 'html4', 
        url : '../../assets/dashboard/php/upload.php',
        max_file_size : '10mb',
        max_file_count: 15, // user can add no more then 15 files at a time
        chunk_size : '5mb',
        multiple_queues : true,

        // Rename files by clicking on their titles
        rename: true,

        // Sort files
        sortable: true,
    });

    var uploader = $('#html4_uploader').pluploadQueue();
    uploader.bind('FileUploaded', function(up, file, info) {
            if (uploader.files.length == (uploader.total.uploaded + uploader.total.failed)) {
                $('.gradient').hide();

                form    = '<form class="form-horizontal" id="mediaAdd" novalidate="novalidate" method="post">';
                length  = uploader.files.length;
                files   = uploader.files;

                for (var i = 0; i <= length-1; i++) {
                    form+= '<div class="alert alert-success" id="message" style="display:none;"></div>';
                    form+= '<div class="form-row row-fluid">';
                    form+= '<div class="nostyle">';
                    form+= '<div class="row-fluid">';
                    form+= '<label class="form-label span3" for="medianame">عنوان الملف</label>';
                    form+= '<input class="span3 text" name="mediatitle[]" type="text">';
                    form+= '<input type="hidden" name="mediapath[]" value="'+files[i].name+'" >';
                    form+= '<strong style="margin-right:20px;" >'+files[i].name+'</strong>';
                    form+= '</div>';
                    form+= '</div>';
                 }

                 form+= '<div class="form-row row-fluid">';
                 form+= '<div class="span12">';
                 form+= '<div class="row-fluid">';
                 form+= '<div class="form-actions">';
                 form+= '<div class="span3"></div>';
                 form+= '<div class="span9 controls">';
                 form+= '<button type="submit" id="submit" class="btn marginR10" style="margin:10px;" >حفظ</button>';
                 form+= '<button class="btn btn-danger">مسح</button>';
                 form+= '</div>';                  
                 form+= '</div>';
                 form+= '</div>';
                 form+= '</div>';
                 form+= '</div>';
                 form+= '</form>';
                 $('#multiform').html(form);

                 $('#mediaAdd').submit(function(){
                        $(form).ajaxSubmit({
                             type: "POST", 
                             async: false,  
                             data: $('#mediaAdd').serialize(),
                             success: function(data){
                                alert(data);
                             },
                             error: function(){alert('error');}
                        });

                        return false;
                 });
            }
        });

}); 
```

这是来自 php 文件的 var 哑结果

```
Array
(
    [mediatitle] => Array
        (
            [0] => 
            [1] => 
            [2] => 
            [3] => 
        )

    [mediapath] => Array
        (
            [0] => 18.jpg
            [1] => 4.jpg
            [2] => 7.jpg
            [3] => 22.jpg
        )
) 
```

对于 mediapath[] 它的值没有问题，因为它是由脚本给出的，但对于 mediatitle[] 它给出空值..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:51:20.773

您需要更改绑定事件的方式，这样您就不必担心何时将它们的目标添加到 dom

像这样的东西会起作用：

```
var $body=$(document.body); //top parent in the dom 

$body.on("submit","#mediaAdd",function(e) {})
     .on("FileUploaded","#html4_uploader", function//...)
     //...
       ; 
```

在 jquery 范围内绑定，如果您在函数链 a`.off(`之前使用相同的选择器和相同的事件进行操作，以避免事件被多次触发

# wordpress - 需要帮忙。我想在 wordpress 页面中嵌入一个带有 Flash 演示的网页

> ID：14766891
> 
> 赞同：0
> 
> 时间：2013-02-08T06:24:18.473
> 
> 标签：wordpress, flash, embed

以下是带有 Flash 演示的网页链接：

[http://services.google.com/analytics/breeze/en/v5/interface_navigation_v15_ad1/](http://services.google.com/analytics/breeze/en/v5/interface_navigation_v15_ad1/)。

现在我在 wordpress 中创建了一个页面，我想将该视频嵌入到我创建的页面中，这可能吗？感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T23:57:09.040

只需使用[**`IFRAME`**](https://developer.mozilla.org/en-US/docs/HTML/Element/iframe).

最好将这种 HTML 作为简码嵌入，例如`[embed_html src="http://example.com"]`：

```
add_shortcode( 'embed_iframe', 'shortcode_so_14766891' );

/**
 * Example usage
 * [embed_html src="http://site.com" width="400" height="400"]Iframes not enabled[embed_html]
 */
function shortcode_so_14766891( $atts, $content = '' ) 
{
    extract(shortcode_atts(array(
            'url'      => null,
            'width'    => '100%',
            'height'   => '500',
        ), $atts ));

    // URL not provided, bail out
    if( !$url )
        return;

    $html = "<iframe id='myFrame' src='$url' width='$width' height='$height'>$content</iframe>";

    return $html;       
} 
```

# jquery - 选中复选框时启用文本框

> ID：14766894
> 
> 赞同：4
> 
> 时间：2013-02-08T06:24:37.850
> 
> 标签：jquery

选中复选框时，我尝试使用 jquery 启用文本框。 [我的页面](http://sushiant.com/%D8%AA%D9%85%D8%A7%D8%B3-%D8%A8%D8%A7-%D9%85%D8%A7/) jquery：

```
<script>
$(document).ready(function(){
  $('#isNews').change(function(){
    $("#newsSource").prop("disabled",false);
});
});
</script> 
```

html:

```
<label class="checkbox">
    <input type="checkbox" id="isNews" name="isNews">If you want send news:
</label>
<label for="newsSource" class="ilable">news source</label>
<input id="newsSource" name="newsSource" class="input-xlarge" disabled="" type="text" placeholder="news source"> 
```

有什么问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-08T06:26:50.293

改成

```
$('#isNews').change(function(){
   $("#newsSource").prop("disabled", !$(this).is(':checked'));
}); 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/7Zr75/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T06:28:52.357

除了与不包含 jQuery 相关的错误之外，将您的代码更改为：

```
$('#isNews').change(function () {
    $("#newsSource").prop("disabled", !this.checked);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T06:27:28.290

我不会说阿拉伯语，但是您在所有脚本的其余部分*之后都包含了 jQuery。*您需要首先包含*jQuery*。

您在控制台中收到“未定义的变量 $”。始终注意控制台。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T06:27:56.527

您遇到的错误是

```
$ is not defined 
```

所以你可能没有加载jquery .. :)

将此添加到您的`<head>`标签中

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T06:28:08.637

这是您的正确代码

```
<script>
$(document).ready(function(){
  $('#isNews').click(function(){
    if($(this).is(":checked"))
       $("#newsSource").removeAttr("disabled");
    else
       $("#newsSource").atte("disabled" , "disabled");
});
});
</script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-08T06:29:20.407

我打开了你给的链接。在您的页面源代码中，问题是您在 jquery 代码之后包含 jquery。尝试在 document.ready 代码之前添加它。

# ruby-on-rails - 随着时间的推移在 Rails 中更改业务规则验证

> ID：14766902
> 
> 赞同：3
> 
> 时间：2013-02-08T06:25:54.130
> 
> 标签：ruby-on-rails

有几次我遇到过这样的情况，我们有一个具有业务驱动验证的模型，例如：

```
class Order < ActiveRecord::Base
  validates_numericality_of :total, :greater_than => 5.0

  # Some more logic
end 
```

在某个时候，老板决定新的最低订单应该是 10 美元，所以我们将验证更新为 10。然而，这意味着任何价值在 5 美元到 10 美元之间的现有订单将不再验证，并且我调用的任何逻辑order.save() 将开始失败（有时无声无息）。我在一个大型的 Rails 应用程序中遇到过很多次，但还没有找到一个好的解决方案。一些想法：

1.  确保在推出代码更改时没有任何待处理的“订单”会受到影响
2.  `:if => Proc.new { |o| o.created_at.nil? or o.created_at > date_new_validation_is_effective }`在新验证中添加一个，但可以肯定这很快就会变得笨拙
3.  在其他地方“验证”业务规则，例如接受用户指定输入的控制器，而不是作为模型验证。但这违反了在 Rails 中有很多支持者的 Fat Model/Skinny Controller 原则。

有没有一种不同的方法来整合这个逻辑，或者从长远来看保持像#2 这样的策略是可管理的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-24T18:29:35.193

您可以将此业务逻辑验证设置为仅运行`:on => :create`。我假设您不经常编辑/更新订单总额。

这将使其对未来的所有订单生效，同时不会影响系统中现有模型的有效性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T06:43:44.177

您可以将版本添加到订单记录和特定于版本的验证。

# python - Python删除组合字典列表中的重复值

> ID：14766904
> 
> 赞同：3
> 
> 时间：2013-02-08T06:26:02.563
> 
> 标签：python, list, dictionary, key, duplicates

我需要一点功课帮助。我必须编写一个将几个字典组合成新字典的函数。如果一个键出现多次；新字典中与该键对应的值应该是唯一列表。作为一个例子，这是我到目前为止所拥有的：

```
f = {'a': 'apple', 'c': 'cat', 'b': 'bat', 'd': 'dog'}
g =  {'c': 'car', 'b': 'bat', 'e': 'elephant'}
h = {'b': 'boy', 'd': 'deer'}
r = {'a': 'adam'}

def merge(*d):
    newdicts={}
    for dict in d:
        for k in dict.items():
            if k[0] in newdicts:
                newdicts[k[0]].append(k[1])
            else:
                newdicts[k[0]]=[k[1]]
    return newdicts

combined = merge(f, g, h, r)
print(combined) 
```

输出如下所示：

{'a': ['apple', 'adam'], 'c': ['cat', 'car'], 'b': ['bat', 'bat', 'boy'], 'e' ：['大象']，'d'：['狗'，'鹿']}

在“b”键下，“bat”出现两次。如何删除重复项？

我查看了过滤器，lambda，但我不知道如何使用 with（也许 b/c 它是字典中的列表？）

任何帮助，将不胜感激。并提前感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T06:31:54.120

只需在添加之前测试列表中的元素：-

```
for k in dict.items():
    if k[0] in newdicts:
        if k[1] not in newdicts[k[0]]:  # Do this test before adding.
            newdicts[k[0]].append(k[1])
    else:
        newdicts[k[0]]=[k[1]] 
```

* * *

而且由于您只需要列表中的唯一元素`value`，因此您可以只使用 a`Set`作为值。此外，您可以在`defaultdict`此处使用 a，这样您就不必在添加之前测试密钥是否存在。

另外，不要使用内置的变量名。而不是`dict`其他一些变量。

因此，您可以将`merge`方法修改为：

```
from collections import defaultdict

def merge(*d):
    newdicts = defaultdict(set)  # Define a defaultdict
    for each_dict in d:

        # dict.items() returns a list of (k, v) tuple.
        # So, you can directly unpack the tuple in two loop variables.
        for k, v in each_dict.items():  
            newdicts[k].add(v)

    # And if you want the exact representation that you have shown   
    # You can build a normal dict out of your newly built dict.
    unique = {key: list(value) for key, value in newdicts.items()}
    return unique 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T06:33:57.170

```
>>> import collections
>>> import itertools
>>> uniques = collections.defaultdict(set)
>>> for k, v in itertools.chain(f.items(), g.items(), h.items(), r.items()):
...   uniques[k].add(v)
... 
>>> uniques
defaultdict(<type 'set'>, {'a': set(['apple', 'adam']), 'c': set(['car', 'cat']), 'b':        set(['boy', 'bat']), 'e': set(['elephant']), 'd': set(['deer', 'dog'])}) 
```

请注意，结果是在一个集合中，而不是在一个列表中——这种方式的计算效率要高得多。如果您希望最终形式是列表，那么您可以执行以下操作：

```
>>> {x: list(y) for x, y in uniques.items()} 
```

{'a': ['apple', 'adam'], 'c': ['car', 'cat'], 'b': ['boy', 'bat'], 'e': ['elephant '], 'd': ['鹿', '狗']}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T06:33:45.813

在你的 for 循环中添加：

```
for dict in d:
    for k in dict.items():
        if k[0] in newdicts:
            # This line below
            if k[1] not in newdicts[k[0]]:
                newdicts[k[0]].append(k[1])
        else:
            newdicts[k[0]]=[k[1]] 
```

这确保不添加重复项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T07:00:21.907

当你想要独特的元素时使用 set：

```
def merge_dicts(*d):
    result={}
    for dict in d:
        for key, value in dict.items():
          result.setdefault(key, set()).add(value)
    return result 
```

尽量避免使用索引；而是解包元组。

# jsp - jqplot 在 chrome 中渲染不好？Chrome 显示 jqplot 轴的对齐和填充不正确

> ID：14766913
> 
> 赞同：1
> 
> 时间：2013-02-08T06:26:25.113
> 
> 标签：jsp, charts, jqplot, jqchart

我在我的jsp页面中使用jqplot..成功集成了条形图，折线图等。现在当我在chrome中看到这个图表时，我遇到了这个问题，在mozila中，同样的图表显示完美的y和x轴标签对齐，但是当我在 chrome 中看到相同的图表时，y 轴和 x 轴对齐和填充看起来非常奇怪且非常合理......让我给你这个片段

Mozilla浏览器显示是这样的

![在此处输入图像描述](../Images/695c5a30b15b166f48b4f4f5673be330.png)

那么为什么轴标签在这个 chrome 浏览器中看起来如此笨拙并且非常接近轴线？

![在此处输入图像描述](../Images/12a9ed6ed091daac2c60938a3379c44e.png)

所以任何人都可以指导我如何消除 chrome 和 mozila 浏览器中的这种差异，以及如何通过正确对齐轴使该图表至少看起来不错

这是我尝试过的代码

```
$(document).ready(function(){  
    var line2 = [['1/1/2008', 3.03], ['2/14/2008', 2.30], ['3/7/2008', 3.12], ['4/22/2008', 1.25]];

    var plot1 = $.jqplot('chart7', [line2], { animate: !$.jqplot.use_excanvas,

          axes:{
            xaxis:{
              renderer:$.jqplot.DateAxisRenderer,
              tickOptions:{
                  pad:2.5,
                  left:10,
                formatString:'%b&nbsp;',
                angle: - 40,
                fontSize: '7pt'
              }
            },
            yaxis:{
                pad:2.5,
              tickOptions:{
                formatString:'%.2f'
                }
            }
          },
          highlighter: {
            show: true,
            sizeAdjust: 1.5
          },
          cursor: {
              style: 'default',
            show: true,

            followMouse: true,
          },grid: {background: 'white'}
      });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T20:01:24.387

我用您的代码设置了一个小提琴示例：http: [//jsfiddle.net/WdLnm/330/](http://jsfiddle.net/WdLnm/330/)`Chrome`在我​​的浏览器上看起来很棒。

如果它看起来对您来说也不错，那么您的网站上遇到了 CSS 问题。

# android - 当我按下后退按钮时，我的列表项被删除

> ID：14766914
> 
> 赞同：1
> 
> 时间：2013-02-08T06:26:46.493
> 
> 标签：android, back-button

在这个活动中，我试图动态存储数据，但是当我在模拟器中按下后退按钮时，我的列表项被删除了.....

这是我的主要活动...

```
 public class Dynamic extends Activity {

    Button bt,bt2;
    EditText et,et2;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        bt = (Button) findViewById(R.id.nameok);
        et = (EditText) findViewById(R.id.name);

        final String input = et.getText().toString();

        bt.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                if (et.getText().length() == 0) {
                    Context context = getApplicationContext();
                    CharSequence text = "Enter Your Name";
                    int duration = Toast.LENGTH_SHORT;

                    Toast toast = Toast.makeText(context, text, duration);
                    toast.show();
                } else {
                    if (et.getText().length() == 0) {
                        Context context = getApplicationContext();
                        CharSequence text = "Enter Your Number";
                        int duration = Toast.LENGTH_SHORT;

                        Toast toast = Toast.makeText(context, text, duration);
                        toast.show();
                    } else {
                    et2.setVisibility(View.VISIBLE);
                    bt2.setVisibility(View.VISIBLE);
                      bt2.setOnClickListener(new View.OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            // TODO Auto-generated method stub
                            String input = et.getText().toString();
                            String input1 = et2.getText().toString();
                            Intent in = new Intent(Dynamic.this, GetList.class);
                            in.putExtra("input", input);
                            in.putExtra("input1", input1);
                            startActivity(in);

                        }
                    });

                }
                }
            }
        });
    }
    protected void onStart() {
        // TODO Auto-generated method stub
        super.onStart();

        et2 = (EditText) findViewById(R.id.number);
        bt2 = (Button) findViewById(R.id.numberok);

    }
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

这是我给列表的列表：

```
 public class GetList extends Activity {
public void onCreate(Bundle savedInstanceState) {
    ListView lv;
    Button bt3;

    ArrayAdapter<String> a_adapter;
    ArrayList<String> x_listItems;
    ArrayList<String> y_listItems;
    super.onCreate(savedInstanceState);

    setContentView(R.layout.list);

    lv = (ListView) findViewById(R.id.listView1);
    bt3 = (Button) findViewById(R.id.nameok1);
    bt3.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent in3=new Intent(GetList.this,Dynamic.class);
            startActivity(in3);
        }
    });

    x_listItems = new ArrayList<String>();
    y_listItems = new ArrayList<String>();

    a_adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, x_listItems);

    lv.setAdapter(a_adapter);

    Intent in = getIntent();

    String inp = in.getStringExtra("input");
    String inp1 = in.getStringExtra("input1");

    if (null != inp && inp.length() > 0) {
        x_listItems.add(inp);

        a_adapter.notifyDataSetChanged();
    }
    if (null != inp1 && inp1.length() > 0) {
        y_listItems.add(inp1);
        Log.v("num", ""+y_listItems);

    }
}

     } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:16:40.343

如果您在 GetList Activity 上按下后退按钮，则 ArrayList 的值将被删除，因为如果您想保留 ArrayList 的值，则 Activity 已销毁

```
ArrayList<String> x_listItems;
ArrayList<String> y_listItems; 
```

对此

```
public static ArrayList<String> x_listItems;
public static ArrayList<String> y_listItems; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T07:25:03.797

尝试从您的 oncreate 方法中声明所有变量..

```
 public class GetList extends Activity {
     ListView lv;
        Button bt3;

        ArrayAdapter<String> a_adapter;
        ArrayList<String> x_listItems;
        ArrayList<String> y_listItems;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list);

        lv = (ListView) findViewById(R.id.listView1);
        bt3 = (Button) findViewById(R.id.nameok1);
        bt3.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Intent in3=new Intent(GetList.this,Dynamic.class);
                startActivity(in3);
            }
        });

        x_listItems = new ArrayList<String>();
        y_listItems = new ArrayList<String>();

        Intent in = getIntent();

        String inp = in.getStringExtra("input");
        String inp1 = in.getStringExtra("input1");

        if (null != inp && inp.length() > 0) {
            x_listItems.add(inp);

            a_adapter.notifyDataSetChanged();
        }
        if (null != inp1 && inp1.length() > 0) {
            y_listItems.add(inp1);
            Log.v("num", ""+y_listItems);

        }

         a_adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, x_listItems);

         lv.setAdapter(a_adapter);
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:41:22.243

我不确定：

只需从 OnStart 中删除这两行并粘贴到 OnCreate。我只是根据android生命周期这么说。删除 OnStart 会更好

```
et2 = (EditText) findViewById(R.id.number);
bt2 = (Button) findViewById(R.id.numberok); 
```

我在您的代码中发现了一些错误：

```
 if (et.getText().length() == 0) {
            Context context = getApplicationContext();
            CharSequence text = "Enter Your Name";
            int duration = Toast.LENGTH_SHORT;

            Toast toast = Toast.makeText(context, text, duration);
            toast.show();
        } else {
            if (et2.getText().length() == 0) { // you noticed this as et
                Context context = getApplicationContext();
                CharSequence text = "Enter Your Number";
                int duration = Toast.LENGTH_SHORT;

                Toast toast = Toast.makeText(context, text, duration);
                toast.show();
            } 
```

# java - SOAPAction 标头值异常 java web 服务

> ID：14766919
> 
> 赞同：1
> 
> 时间：2013-02-08T06:27:11.150
> 
> 标签：java, web-services

在 netbeans IDE 中使用 WSDL 创建了 Web 服务源。然后在 servlet 类中生成代码来调用 web 服务方法。我得到这样的代码：

```
private void getSomething() {
com.bla.bla.SomeService service = new com.bla.bla.SomeService();
QName portQName = new QName("http://bla.com/test/services", "SomeServiceSoap");
String req = "<getSomething xmlns="\url\"><a id=\"5\"/></getSomething>";
try {
    Dispatch<Source> dispatch = null;
    dispatch = service.createDispatch(portQName, Source.class, Service.Mode.PAYLOAD);
    Source result = dispatch.invoke(new StreamSource(new StringReader(req)));
} catch (Exception ex) {
    ex.printStackTrace();
}
} 
```

但是当我调用这个方法时，我得到一个异常：`javax.xml.ws.soap.SOAPFaultException: System.Web.Services.Protocols.SoapException: Server did not recognize the value of HTTP header SOAPAction: .` 如何解决这个问题？任何帮助表示赞赏！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:26:19.730

该错误意味着，尽管端点`http://bla.com/test/services`上运行了一些 Web 服务，但该特定服务上没有`operation`可用的 Web 服务。

或者

客户端没有提供任何`operation`调用`SimpleSoapService`

# cocoa-touch - 通过在 NSManagedObject 的子类中获取相关对象来管理关系是否安全

> ID：14766920
> 
> 赞同：0
> 
> 时间：2013-02-08T06:27:14.770
> 
> 标签：cocoa-touch, core-data, entity-relationship

假设我在核心数据中有一个员工实体和一个公司实体。

所以员工和公司是这样相互关联的：

员工 <<---> 公司

现在我正在尝试在每个类中纠正一个 manageRelationships 方法，如下所示：

```
@interface Employee : NSManagedObject
- (void)manageRelationships;
@property (nonatomic, retain) Company *company; // for relationship
@property (nonatomic, retain) NSNumber *companyId; // acts as foreign key 
@end

@implementation Employee
@dynamic company;
@dynamic companyId;
- (void)manageRelationships
{
   // prepare a predicate as @"companyId == %@",self.companyId

   // execute a fetch request against Company entity

   // map relationship using self.company = retrievedCompanyObject
} 
```

现在我有几个问题：

> 1.  如上所述，在 NSManagedObject 的子类中触发获取请求并映射关系是否安全？
>     
>     
> 2.  他们有更好的方法来实现它吗？（上述方法背后的想法是 - 我将在每个创建的托管对象上调用上述方法，以便它自动管理和映射所有关联关系）

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T08:24:54.617

我明白你在做什么。但不要忘记，Core Data 为您提供了一个**对象图**，数据库只是次要的实现细节。因此，完全不需要外键的整个概念，因为数据库层将为您管理它。

但是，唉，我假设您在创建员工时只是没有`Company`对象，而只是获得了公司 ID。当然，您可以覆盖`NSManagedObject`子类，也许最好在id 属性的*设置器中：*

```
-(void)setCompanyId:(NSNumber*)newId {
   self.companyId = newId;
   if (!newId) { self.company = nil; }
   else {
      Company *myCompany = ... // fetch company
      self.company = myCompany;
   }
} 
```

但是，您可以看到这是多余的。无需将外键保留在您的实体中。您可以随时检索它

```
NSNumber *companyId = employee.company.id; 
```

所以也许最好简单地在你的`Employee`类中添加一个方便地添加公司的方法：

```
-(void)addCompanyWithId:(NSNumber*)companyID {
   if (!companyID) { self.company = nil; }
   else {
      Company *employer = ...// fetch company
      self.company = employer ? employer : nil;
   }
} 
```

# mysql - 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在

> ID：14766921
> 
> 赞同：0
> 
> 时间：2013-02-08T06:27:23.210
> 
> 标签：mysql, arrays, warnings, fetch

嗨，我收到此错误，sql 查询正常，这是我的代码。

```
$query = "INSERT into members VALUES(NULL,'$fname','$sname','$gender','$status','$dob','$phone','$address','$email','$chapter','$join_date','$cell')";

$result = mysql_query($query,$connection) 
    or show_error();

    echo $result;

$new_member = array();
$new_member = mysql_fetch_array($result) 
    or die (mysql_error());
echo 'new_member =', $new_member;
mysql_close();
return $new_member; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:49:26.500

必须删除变量附近的单引号，并且 $query 应该是

"插入成员 VALUES(NULL,$fname,$sname,$gender,$status,$dob,$phone,$address,$email,$chapter,$join_date,$cell)";

# php - E_PARSE 和 error_reporting

> ID：14766922
> 
> 赞同：1
> 
> 时间：2013-02-08T06:27:25.020
> 
> 标签：php

从手册：

```
错误报告（E_ERROR | E_WARNING | E_PARSE）；

```

如果 E_PARSE 是编译时错误，在 error_reporting 函数中使用它是否有意义？

以这个脚本为例：

```
错误报告（E_ALL ^ E_PARSE）；
x = 1;

```

如果 php.ini 激活它，解析错误仍然会显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:30:02.043

如果包含的文件中存在解析错误：

```
<?php /* good.php */
error_reporting(E_ALL ^ E_PARSE);
include 'bad.php';
?>

<?php /* bad.php */
z = 1;
?> 
```

这可能也是为了与禁用`E_PARSE`.

# c - 试图扫描到二维 malloc 数组 c 编程

> ID：14766923
> 
> 赞同：0
> 
> 时间：2013-02-08T06:27:24.067
> 
> 标签：c

我已经查看了很多关于二维 malloc 数组的问题，但基本上无论出于何种原因我都找不到解决方案....感谢所有在这里提供帮助的人！=）

无论如何，我似乎无法让这个 fscanf 工作 =/ 如果有人可以帮助我，那将不胜感激，因为我根本看不到任何错误，但我知道有一个错误，因为此时我的程序崩溃了。

```
 array1 = (int**)malloc((c)*sizeof(int*));
        int a = 0, i = 0;
        for (a = 0; a < c; a++){
            array1[a] = (int*)malloc((c+1)*sizeof(int));

        }
    a=0;

    for(a = 0; a < c; a++){
                for(i = 0; i < c; i++){
                fscanf(ifp, "%d", array1[a][i]);

    }
    } 
```

其中 c 是所需数组的最大大小。在这种情况下，它设置为 3，但我确实需要它作为变量

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T06:31:44.730

使用`scanf`函数族读取值时，目标需要是指针。`array1[a][i]`不是指针，*而是*实际值（`scanf`将被视为指针，您现在进入了*未定义行为*的领域）。

你想要的是`&array1[a][i]`.

PS。您不应该强制转换的返回值`malloc`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T06:32:33.863

fscanf 接受指针，所以我认为你需要在它的第三个参数前面加上一个＆符号。编译器没有警告过你吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-08T06:33:19.620

你要：

```
fscanf(ifp, "%d", &array1[a][i]);
                  ^ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T06:34:06.863

malloc 和其他语法是正确的，问题在于将值读取到数组

替换这个 `fscanf(ifp, "%d", array1[a][i]);`

和

`fscanf(ifp, "%d", &array1[a][i]);`

始终启用编译器警告，并注意它:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T06:39:22.713

[你需要阅读这个。](http://unixhelp.ed.ac.uk/CGI/man-cgi?scanf%203)

请养成阅读手册的习惯。它有很大帮助。

# javascript - 更改悬停时的文本不起作用

> ID：14766928
> 
> 赞同：0
> 
> 时间：2013-02-08T06:27:43.753
> 
> 标签：javascript, jquery

我有一个选择图像的按钮，它的默认状态是“选择图像”，选择图像后，按钮的innerHTML更改为文件名。现在，我想做的是，如果我将鼠标悬停在按钮上，而它没有说“选择图像”，我希望它说“选择不同的图像”，然后 onmouseout 我希望它回到原来的状态之前（图像文件名）。

我将以下内容放在一起，但它不起作用......我对 JS 和 jQuery 选项持开放态度。

```
window.addEventListener('load', function(event) {
    var btn = document.getElementById('file-button');
    if (btn.innerHTML !== "Select Image") {
        var temp = btn.innerHTML;
        btn.onmouseover = btn.innerHTML = "Select a different image";
        btn.onmouseout = btn.innerHTML = temp;
    }
}); 
```

**解决方案**——感谢伊恩

```
window.addEventListener('load', function(event) {
    var btn = document.getElementById('file-button');
    btn.onmouseover = function () {
        if (this.innerHTML !== "Select Image") {
            var temp = this.innerHTML;
            this.innerHTML = "Select a different image";
        }
    };

    btn.onmouseout = function () {
        if (this.innerHTML !== "Select Image") {
            this.innerHTML = temp;
        }
    };
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:29:58.193

试试这个：

```
window.addEventListener('load', function(event) {
    var btn = document.getElementById('file-button');
    if (btn.innerHTML !== "Select Image") {
        var temp = btn.innerHTML;
        btn.onmouseover = function () {
            this.innerHTML = "Select a different image";
        };

        btn.onmouseout = function () {
            this.innerHTML = temp;
        };
    }
}); 
```

您需要将`.onmouseover`和`.onmouseout`属性设置为函数。然后，您不妨使用`this`, 而不是`btn`.

**更新：**

我想你想把你的逻辑重新安排成这样：

```
window.addEventListener('load', function(event) {
    var btn = document.getElementById('file-button');
    var temp = btn.innerHTML;
    btn.onmouseover = function () {
        if (this.innerHTML !== "Select Image") {
            temp = this.innerHTML;
            this.innerHTML = "Select a different image";
        }
    };

    btn.onmouseout = function () {
        if (this.innerHTML !== "Select Image") {
            this.innerHTML = temp;
        }
    };
}); 
```

[http://jsfiddle.net/3WkXp/](http://jsfiddle.net/3WkXp/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:33:24.193

由于您使用的是 jQuery，因此可以将其写为

```
$(function(){
    var temp = $('#file-button').html();
    if (temp !== "Select Image") {
        $('#file-button').hover(function(){
            $(this).html('Select a different image')
        },function(){
            $(this).html(temp)
        });
    }
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/eTwb6/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-08T06:58:17.950

试试这个

实际上，您仅在 btn 的 html ！== 时才绑定事件侦听器`Select Image`

```
var temp;
$("#file-button").mouseover(function() {
    if ($(this).html() !== "Select Image")
    {
        temp = $(this).html();
        $(this).html("Select a different Image");
    }
}).mouseout(function() {
    if ($(this).html() === "Select a different Image")
        $(this).html(temp);
}); 
```

# android - 完成特定活动的所有实例

> ID：14766929
> 
> 赞同：6
> 
> 时间：2013-02-08T06:27:46.767
> 
> 标签：android, instance, activity-finish, activity-stack

应用程序中可能有很多活动，最后启动的活动保持在堆栈顶部，并在按下它时完成当前活动。我有一个活动序列，这是流程..

如果我们有 A,B, **C(1)** ,D, **C(2)** ... Activity C(1) 和 C(2) 是在导航应用程序时启动的 Activity C 的两个不同实例。所以需要的是清除活动 C 的所有实例，结果应该是当我完成**C(2)**时，我应该留下这些堆栈**A,B,D**。我应该怎么办 。

**IMP** - 我想让**C(1)**在堆栈中保持活动状态，直到我完成 C(2)，因为我可以使用 New Task 标志启动 C 而不是创建这些实例，但是这些实例具有不同的 UI 和工作。

以下方法是不利的。

**第一的**

```
@Override
public void onBackPressed(){
    super.onBackPressed();
    Intent intent = new Intent(C(2).this , D.class);    
    intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP));
    startActivity(intent);
} 
```

这将从堆栈中清除所有活动并重新启动活动

**第二**

跟踪单例类中的 Activity，然后重新启动所需的流程，这将如何消耗有许多要启动的 Activity 的时间。

所以我认为应该有一些使用包管理器或其他可以解决问题的解决方案，解决方案表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T13:01:20.307

我不知道在完成活动 C2 时手动关闭活动 C1 的方法。

但是，您可以通过这种方式处理恢复中的活动 C1 -

1 - 在您的应用程序类中设置一个标志：

```
public static boolean IsClosingActivities = false; 
```

这个值可以在活动 C2 发生“完成”之前由 C2 设置为“真”。

并在您将为新活动 C 调用 startActivity 的位置设置“false”。（假设稍后可以在应用程序中创建活动 C 的新实例）。

2 - 在 C 实现 on resume ：

```
 @Override
    protected void onResume() {     
        super.onResume();
        if (YourApplication.IsClosingActivities) {
                this.finish();
        } 
    } 
```

这样 - 当用户从 D 导航回来时 - C1 将自行完成，他将被导航到 B。

# r - 绘制柯西分布的密度

> ID：14766935
> 
> 赞同：1
> 
> 时间：2013-02-08T06:28:14.083
> 
> 标签：r

我被要求绘制柯西分布的密度，平均值为 0，介于 -5 和 5 之间，并将其与平均值为 0 和标准差为 1.2 的正态分布的密度重叠。而且我什至不知道从哪里开始..有什么帮助吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-08T07:05:22.097

使用 .查看 Cauchy 发行版的文档`?dcauchy`。事实上，这是在x0*位置*计算柯西密度函数的函数，而不是*平均值*（如@Dason 和 @iTech）提及；它肯定是为 x0=0 定义的。

正态分布的等效函数是`dnorm`，图可能如下所示：

```
x<-seq(-10,10,by=0.1)
plot(x, dnorm(x),type="l")
lines(x, dcauchy(x),col="red") 
```

![x0=0 的 Cauchy dist 覆盖在 Normal dist 上。](../Images/7059905a1386f40dc28670c6507ce7a6.png)

请注意，该`seq`命令有些随意：它只是创建一个向量，其值从 -10 到 10 以 1/10 的间隔均匀分布。

祝你功课的其余部分好运。

***更新：***

这是一种更简单的使用方法`plot.function`：

```
plot(dnorm, -10, 10, n=1001)
plot(dcauchy, -10, 10, n=1001, col='red', add=TRUE) 
```

# highcharts - 向 highcharts 添加标志（与 highstock 相同）

> ID：14766937
> 
> 赞同：0
> 
> 时间：2013-02-08T06:28:44.953
> 
> 标签：highcharts

请参阅此处的主题： http://highslide.com/forum/viewtopic.php?f=9&t=22151&p=87009&hilit= [13701#p87009](http://highslide.com/forum/viewtopic.php?f=9&t=22151&p=87009&hilit=13701#p87009)

以及指向答案的链接（不再有效）： [http ://highslide.com/forum/viewtopic.php?f=10&t=13701](http://highslide.com/forum/viewtopic.php?f=10&t=13701)

有人可以帮我找到/复制答案吗，我想像在 highstock 图表中一样向 highcharts 添加标志。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:59:53.087

您应该使用 Highstock 库和 Highcharts 图表，如下例所示：

[http://jsfiddle.net/SUH26/1/](http://jsfiddle.net/SUH26/1/)

```
<script src="http://code.highcharts.com/stock/highstock.js"></script>

var chart = new Highcharts.Chart({
//parameters
}); 
```

# php - 无法使用 php sdk 获取 soundcloud access_token。invalid_grant 错误

> ID：14766938
> 
> 赞同：0
> 
> 时间：2013-02-08T06:28:46.720
> 
> 标签：php, zend-framework, oauth-2.0, access-token, soundcloud

我正在使用 soundcloud php sdk。当我使用 sdk 进行跟踪时，它可以成功运行。但是当我尝试获取访问令牌以使用它时，sdk 向我发送了一个错误 401。调试错误消息后，我得到了下面的 responseJSON：{"error":"invalid_grant"}

这是我的代码，我使用 Zend 框架

```
$code = $this->getRequest()->getParam('code',false);
if($code){
$client = new Services_Soundcloud($this->soundcloud['client_id'],$this->soundcloud['secret_key']);
try {
$access_token = $client->accessToken($code);
} catch (Services_Soundcloud_Invalid_Http_Response_Code_Exception $e) {
exit($e->getMessage());
}
} 
```

有没有人知道如何解决这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T17:09:26.617

为了交换访问令牌的代码，您必须`Services_Soundcloud`使用客户端 ID、客户端密码*和*重定向 uri 实例化您的实例。以下代码应该可以工作，假设您将重定向 uri 存储在`$this->soundcloud`：

```
$client = new Services_Soundcloud(
    $this->soundcloud['client_id'],
    $this->soundcloud['secret_key'],
    $this->soundcloud['redirect_uri']
);

$code = $this->getRequest()->getParam('code',false);

if ($code) {
    try {
        $access_token = $client->accessToken($code);
    } catch (Services_Soundcloud_Invalid_Http_Response_Code_Exception $e) {
        exit($e->getMessage());
    }
} 
```

让我知道这是否能解决问题。

# javascript - 如何在按钮单击事件上重定向页面

> ID：14766940
> 
> 赞同：11
> 
> 时间：2013-02-08T06:28:51.087
> 
> 标签：javascript

我在表单上使用了一个按钮。单击该链接时，如何链接到另一个网页/文件？这是我尝试过的代码，但不起作用。

```
<button class="btn" data-bind="click: function() { document.location.href=$(this).attr('RiskAssessmentMain.aspx'); }">back</button> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-08T06:38:38.813

```
<input type='button'value='back' class="btn" onclick="document.location.href='RiskAssessmentMain.aspx';"/> 
```

试试看：http: [//jsfiddle.net/wzy4B/](http://jsfiddle.net/wzy4B/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-08T06:34:16.690

`<form>` **在action**属性中设置你想去的url 。然后使用 a`submit`而不是`button`.
这是一个例子：

```
 <form action="http://google.com">   
    <input type="submit" value="Google">
 </form> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-08T06:51:52.237

你可以试试这个

```
<script>
      function open_win() {
           window.open("http://www.google.com")
      }
</script> 
```

或者你也可以这样做

```
<script>
       function openWin() {
            myWindow=window.open('','','width=200,height=100');
            myWindow.document.write("<p>This is 'myWindow'</p>");
            myWindow.focus();
       }
</script>

<input type="button" value="Open window" onclick="openWin()" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T06:35:09.090

试试这个

```
 <nav>
    <ul>
      <li><a href="#">button</a></li>
    </ul>
  </nav> 
```

这是CSS

```
nav
{
    position:fixed;
    bottom:350px;
    left:600px;
}

nav ul ul {
    display: none;
}

nav ul li:hover > ul {
    display: block;
}

nav ul {
    background: #FFD700; 
    box-shadow: 0px 0px 9px rgba(0,0,0,0.15);
    padding: 0 20px;
    border-radius: 10px;  
    list-style: none;
    position: relative;
    display: inline-table;
    color:black;
}

nav ul:after {
    content: ""; clear: both; display: block;
}

nav ul li {
    float: left;
}

nav ul li:hover {
    background:     #FFD700;
    color:white;
}

nav ul li:hover a {
    color:black;
}

nav ul li a {
    display: block; padding: 25px 40px;
    color: maroon; text-decoration: none;
}

nav ul ul {
    background:     #CFB53B;border-radius: 0px; padding: 0;
    position: absolute; top: 100%;
}

nav ul ul li {
    float: none; 
    border-top: 1px solid #6b727c;
    border-bottom: 1px solid #575f6a;
    position: relative;
}

nav ul ul li a {
    padding: 15px 40px;
    color: #fff;
}   
nav ul ul li a:hover {
    background: #996515;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-21T06:53:41.067

```
<a href = "https://stackoverflow.com/"><button type = 'submit' class = 'btn'>Let's Go Home</button></a>
```

我们也可以使用标签。我们必须删除按钮外观的文本装饰。像这样的东西。

# c# - 当我更改 datagridview 时，SubmitChanges() 不起作用

> ID：14766943
> 
> 赞同：1
> 
> 时间：2013-02-08T06:28:52.660
> 
> 标签：c#, winforms

当我使用 datagridview 和`SubmitChanges()`

```
private void Form1_Load(object sender, EventArgs e)
{
    this.book_infoDataGridView.DataSource = bookstore.book_info;
    BindingSource bds=new BindingSource();
    bds.DataSource = this.bookstore.book_info;
    this.book_infoBindingSource = bds;
    this.book_infobindingNavigator.BindingSource = bds;

}      

private void save_Click(object sender, EventArgs e)
{
   this.book_infoBindingSource.EndEdit();
    bookstore.SubmitChanges();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T07:05:54.873

我相信你正试图[`.SubmitChanges()`](http://msdn.microsoft.com/en-us/library/bb399378.aspx)从你的数据中`DataGridView`

```
 private void save_Click(object sender, EventArgs e)
    {
        using (var bookstoreContext = new yourContext())
        {
            var b = (BookClass)bds.Current;
            var book = bookstoreContext.Products.Single(c => c.BookId == b.BookId); //or .First()
            book.BookName = b.BookName;
            book.BookInfo = b.BookInfo;
            bookstoreContext.SubmitChanges();
        }
    } 
```

# java - Java线程回调线程上下文

> ID：14766945
> 
> 赞同：0
> 
> 时间：2013-02-08T06:29:08.710
> 
> 标签：java, multithreading, callback, activemq

如何确保在主线程的上下文中调用回调？

我正在使用 ActiveMQ，特别是，我试图了解如何确保在创建 activemq 使用者的线程的上下文中执行回调。

我在侦听器/处理程序中获得的线程 ID 与创建使用者和设置侦听器的线程 ID 不同，因此我试图了解如何确保处理程序/侦听器中的代码在第一个线程线程上运行。

如果我创建了在侦听器中运行代码的线程，我可能会使用 Executor 和 Future，但由于它是由 activemq 为我创建的，我希望弄清楚如何让侦听器在上下文中执行“主”线程。

然后我开始阅读一般的 java 线程回调，大多数文章都解释了调用一个类的方法，你传递给实现 runnable 的线程。在我看来，该回调中的任何代码仍将在我刚刚生成的线程的上下文中。

..那么如何确保在主线程的上下文中调用回调？

在 .net 中，我可以使用 SynchronizationContext 或在 WPF 中使用此上下文的调度程序。

我一直在查看同步方法，但看起来这些方法访问另一个线程中定义的数据变量，即“主”线程，在我的情况下，变量/数据是在消费者线程中创建的，我需要将它们传回/ 确保它们在“主”线程上可用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T16:41:55.947

有趣的问题。我要做的第一件事是确保我知道正在执行的线程。一个简单的方法是把这个打印语句放在回调中： System.out.println(Thread.currentThread());

现在就使方法在特定线程上运行而言：不要这么认为。获取线程的上下文不是 Java 的一部分。与.Net 不同，JVM 可能由不同的公司编写。IBM 作为一个非常好的。来自 Oracle 的 JRocket 是另一个。因此，进入引擎盖并不是那么容易。

我会再四处寻找，让你知道如果找到怎么办。

# javascript - 将数字转换为十万/千万系统中的单词

> ID：14766951
> 
> 赞同：110
> 
> 时间：2013-02-08T06:29:45.933
> 
> 标签：javascript, numbers

我正在编写一些将给定数字转换为单词的代码，这是我在谷歌搜索后得到的。但我认为这样一个简单的任务有点太长了。两个正则表达式和两个`for`循环，我想要更简单的东西。

我试图用尽可能少的代码行来实现这一点。到目前为止，这是我想出的：

有什么建议么？

```
var th = ['','thousand','million', 'billion','trillion'];
var dg = ['zero','one','two','three','four', 'five','six','seven','eight','nine'];
 var tn = ['ten','eleven','twelve','thirteen', 'fourteen','fifteen','sixteen', 'seventeen','eighteen','nineteen'];
 var tw = ['twenty','thirty','forty','fifty', 'sixty','seventy','eighty','ninety'];

function toWords(s) {
    s = s.toString();
    s = s.replace(/[\, ]/g,'');
    if (s != parseFloat(s)) return 'not a number';
    var x = s.indexOf('.');
    if (x == -1)
        x = s.length;
    if (x > 15)
        return 'too big';
    var n = s.split(''); 
    var str = '';
    var sk = 0;
    for (var i=0;   i < x;  i++) {
        if ((x-i)%3==2) { 
            if (n[i] == '1') {
                str += tn[Number(n[i+1])] + ' ';
                i++;
                sk=1;
            } else if (n[i]!=0) {
                str += tw[n[i]-2] + ' ';
                sk=1;
            }
        } else if (n[i]!=0) { // 0235
            str += dg[n[i]] +' ';
            if ((x-i)%3==0) str += 'hundred ';
            sk=1;
        }
        if ((x-i)%3==1) {
            if (sk)
                str += th[(x-i-1)/3] + ' ';
            sk=0;
        }
    }

    if (x != s.length) {
        var y = s.length;
        str += 'point ';
        for (var i=x+1; i<y; i++)
            str += dg[n[i]] +' ';
    }
    return str.replace(/\s+/g,' ');
} 
```

此外，上面的代码转换为英文编号系统，如百万/十亿，我需要南亚编号系统，如十万和千万。

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2013-02-08T06:38:10.987

**更新**：看起来这比我想象的更有用。我刚刚在 npm 上发布了这个。[https://www.npmjs.com/package/num-words](https://www.npmjs.com/package/num-words)

* * *

这是一个较短的代码。一个正则表达式，没有循环。在南亚编号系统中随心所欲地转换

```
var a = ['','one ','two ','three ','four ', 'five ','six ','seven ','eight ','nine ','ten ','eleven ','twelve ','thirteen ','fourteen ','fifteen ','sixteen ','seventeen ','eighteen ','nineteen '];
var b = ['', '', 'twenty','thirty','forty','fifty', 'sixty','seventy','eighty','ninety'];

function inWords (num) {
    if ((num = num.toString()).length > 9) return 'overflow';
    n = ('000000000' + num).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/);
    if (!n) return; var str = '';
    str += (n[1] != 0) ? (a[Number(n[1])] || b[n[1][0]] + ' ' + a[n[1][1]]) + 'crore ' : '';
    str += (n[2] != 0) ? (a[Number(n[2])] || b[n[2][0]] + ' ' + a[n[2][1]]) + 'lakh ' : '';
    str += (n[3] != 0) ? (a[Number(n[3])] || b[n[3][0]] + ' ' + a[n[3][1]]) + 'thousand ' : '';
    str += (n[4] != 0) ? (a[Number(n[4])] || b[n[4][0]] + ' ' + a[n[4][1]]) + 'hundred ' : '';
    str += (n[5] != 0) ? ((str != '') ? 'and ' : '') + (a[Number(n[5])] || b[n[5][0]] + ' ' + a[n[5][1]]) + 'only ' : '';
    return str;
}

document.getElementById('number').onkeyup = function () {
    document.getElementById('words').innerHTML = inWords(document.getElementById('number').value);
};
```

```
<span id="words"></span>
<input id="number" type="text" />
```

唯一的限制是，您最多可以转换 9 位数字，我认为这在大多数情况下已经足够了..

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-05-29T08:35:42.073

> “*看似*简单的任务。” –[土豆片](https://stackoverflow.com/users/153285/potatoswatter)

确实。这个问题的细节中有很多小鬼。解决这个问题非常有趣。

**编辑：**此更新采用了更加组合的方法。以前有一个大功能包含其他几个专有功能。相反，这次我们定义了可用于多种任务的通用可重用函数。更多关于那些在我们看看`numToWords`本身之后......

```
// numToWords :: (Number a, String a) => a -> String
let numToWords = n => {
  let a = [
    '', 'one', 'two', 'three', 'four',
    'five', 'six', 'seven', 'eight', 'nine',
    'ten', 'eleven', 'twelve', 'thirteen', 'fourteen',
    'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'
  ];
  let b = [
    '', '', 'twenty', 'thirty', 'forty',
    'fifty', 'sixty', 'seventy', 'eighty', 'ninety'
  ];
  let g = [
    '', 'thousand', 'million', 'billion', 'trillion', 'quadrillion',
    'quintillion', 'sextillion', 'septillion', 'octillion', 'nonillion'
  ];
  // this part is really nasty still
  // it might edit this again later to show how Monoids could fix this up
  let makeGroup = ([ones,tens,huns]) => {
    return [
      num(huns) === 0 ? '' : a[huns] + ' hundred ',
      num(ones) === 0 ? b[tens] : b[tens] && b[tens] + '-' || '',
      a[tens+ones] || a[ones]
    ].join('');
  };
  // "thousands" constructor; no real good names for this, i guess
  let thousand = (group,i) => group === '' ? group : `${group} ${g[i]}`;
  // execute !
  if (typeof n === 'number') return numToWords(String(n));
  if (n === '0')             return 'zero';
  return comp (chunk(3)) (reverse) (arr(n))
    .map(makeGroup)
    .map(thousand)
    .filter(comp(not)(isEmpty))
    .reverse()
    .join(' ');
}; 
```

**以下是依赖项：**

您会注意到这些几乎不需要任何文档，因为它们的意图很明显。`chunk`可能是唯一需要一点时间来消化的，但它真的还不错。加上函数名很好地说明了它的作用，它可能是我们以前遇到过的函数。

```
const arr = x => Array.from(x);
const num = x => Number(x) || 0;
const str = x => String(x);
const isEmpty = xs => xs.length === 0;
const take = n => xs => xs.slice(0,n);
const drop = n => xs => xs.slice(n);
const reverse = xs => xs.slice(0).reverse();
const comp = f => g => x => f (g (x));
const not = x => !x;
const chunk = n => xs =>
  isEmpty(xs) ? [] : [take(n)(xs), ...chunk (n) (drop (n) (xs))]; 
```

***“所以这些让它变得更好？”***

看看代码是如何显着清理的

```
// NEW CODE (truncated)
return comp (chunk(3)) (reverse) (arr(n))
    .map(makeGroup)
    .map(thousand)
    .filter(comp(not)(isEmpty))
    .reverse()
    .join(' ');

// OLD CODE (truncated)
let grp = n => ('000' + n).substr(-3);
let rem = n => n.substr(0, n.length - 3);
let cons = xs => x => g => x ? [x, g && ' ' + g || '', ' ', xs].join('') : xs;
let iter = str => i => x => r => {
  if (x === '000' && r.length === 0) return str;
  return iter(cons(str)(fmt(x))(g[i]))
             (i+1)
             (grp(r))
             (rem(r));
};
return iter('')(0)(grp(String(n)))(rem(String(n))); 
```

最重要的是，我们在新代码中添加的实用功能可以在您的应用程序的其他地方使用。这意味着，作为以这种方式实现的副作用`numToWords`，我们可以免费获得其他功能。奖金苏打水！

**一些测试**

```
console.log(numToWords(11009));
//=> eleven thousand nine

console.log(numToWords(10000001));
//=> ten million one 

console.log(numToWords(987));
//=> nine hundred eighty-seven

console.log(numToWords(1015));
//=> one thousand fifteen

console.log(numToWords(55111222333));
//=> fifty-five billion one hundred eleven million two hundred 
//   twenty-two thousand three hundred thirty-three

console.log(numToWords("999999999999999999999991"));
//=> nine hundred ninety-nine sextillion nine hundred ninety-nine
//   quintillion nine hundred ninety-nine quadrillion nine hundred
//   ninety-nine trillion nine hundred ninety-nine billion nine
//   hundred ninety-nine million nine hundred ninety-nine thousand
//   nine hundred ninety-one

console.log(numToWords(6000753512));
//=> six billion seven hundred fifty-three thousand five hundred
//   twelve 
```

**可运行的演示**

```
const arr = x => Array.from(x);
const num = x => Number(x) || 0;
const str = x => String(x);
const isEmpty = xs => xs.length === 0;
const take = n => xs => xs.slice(0,n);
const drop = n => xs => xs.slice(n);
const reverse = xs => xs.slice(0).reverse();
const comp = f => g => x => f (g (x));
const not = x => !x;
const chunk = n => xs =>
  isEmpty(xs) ? [] : [take(n)(xs), ...chunk (n) (drop (n) (xs))];

// numToWords :: (Number a, String a) => a -> String
let numToWords = n => {

  let a = [
    '', 'one', 'two', 'three', 'four',
    'five', 'six', 'seven', 'eight', 'nine',
    'ten', 'eleven', 'twelve', 'thirteen', 'fourteen',
    'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'
  ];

  let b = [
    '', '', 'twenty', 'thirty', 'forty',
    'fifty', 'sixty', 'seventy', 'eighty', 'ninety'
  ];

  let g = [
    '', 'thousand', 'million', 'billion', 'trillion', 'quadrillion',
    'quintillion', 'sextillion', 'septillion', 'octillion', 'nonillion'
  ];

  // this part is really nasty still
  // it might edit this again later to show how Monoids could fix this up
  let makeGroup = ([ones,tens,huns]) => {
    return [
      num(huns) === 0 ? '' : a[huns] + ' hundred ',
      num(ones) === 0 ? b[tens] : b[tens] && b[tens] + '-' || '',
      a[tens+ones] || a[ones]
    ].join('');
  };

  let thousand = (group,i) => group === '' ? group : `${group} ${g[i]}`;

  if (typeof n === 'number')
    return numToWords(String(n));
  else if (n === '0')
    return 'zero';
  else
    return comp (chunk(3)) (reverse) (arr(n))
      .map(makeGroup)
      .map(thousand)
      .filter(comp(not)(isEmpty))
      .reverse()
      .join(' ');
};

console.log(numToWords(11009));
//=> eleven thousand nine

console.log(numToWords(10000001));
//=> ten million one 

console.log(numToWords(987));
//=> nine hundred eighty-seven

console.log(numToWords(1015));
//=> one thousand fifteen

console.log(numToWords(55111222333));
//=> fifty-five billion one hundred eleven million two hundred 
//   twenty-two thousand three hundred thirty-three

console.log(numToWords("999999999999999999999991"));
//=> nine hundred ninety-nine sextillion nine hundred ninety-nine
//   quintillion nine hundred ninety-nine quadrillion nine hundred
//   ninety-nine trillion nine hundred ninety-nine billion nine
//   hundred ninety-nine million nine hundred ninety-nine thousand
//   nine hundred ninety-one

console.log(numToWords(6000753512));
//=> six billion seven hundred fifty-three thousand five hundred
//   twelve
```

* * *

如果您想查看 ES5 变体，可以使用[babel.js](http://babeljs.io)转译代码

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-05-29T05:55:33.430

我花了一段时间开发一个更好的解决方案。它可以处理非常大的数字，但是一旦它们超过 16 位，您就可以将数字作为字符串传递。关于 JavaScript 数字的限制。

```
 function numberToEnglish( n ) {

        var string = n.toString(), units, tens, scales, start, end, chunks, chunksLen, chunk, ints, i, word, words, and = 'and';

        /* Remove spaces and commas */
        string = string.replace(/[, ]/g,"");

        /* Is number zero? */
        if( parseInt( string ) === 0 ) {
            return 'zero';
        }

        /* Array of units as words */
        units = [ '', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen' ];

        /* Array of tens as words */
        tens = [ '', '', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety' ];

        /* Array of scales as words */
        scales = [ '', 'thousand', 'million', 'billion', 'trillion', 'quadrillion', 'quintillion', 'sextillion', 'septillion', 'octillion', 'nonillion', 'decillion', 'undecillion', 'duodecillion', 'tredecillion', 'quatttuor-decillion', 'quindecillion', 'sexdecillion', 'septen-decillion', 'octodecillion', 'novemdecillion', 'vigintillion', 'centillion' ];

        /* Split user argument into 3 digit chunks from right to left */
        start = string.length;
        chunks = [];
        while( start > 0 ) {
            end = start;
            chunks.push( string.slice( ( start = Math.max( 0, start - 3 ) ), end ) );
        }

        /* Check if function has enough scale words to be able to stringify the user argument */
        chunksLen = chunks.length;
        if( chunksLen > scales.length ) {
            return '';
        }

        /* Stringify each integer in each chunk */
        words = [];
        for( i = 0; i < chunksLen; i++ ) {

            chunk = parseInt( chunks[i] );

            if( chunk ) {

                /* Split chunk into array of individual integers */
                ints = chunks[i].split( '' ).reverse().map( parseFloat );

                /* If tens integer is 1, i.e. 10, then add 10 to units integer */
                if( ints[1] === 1 ) {
                    ints[0] += 10;
                }

                /* Add scale word if chunk is not zero and array item exists */
                if( ( word = scales[i] ) ) {
                    words.push( word );
                }

                /* Add unit word if array item exists */
                if( ( word = units[ ints[0] ] ) ) {
                    words.push( word );
                }

                /* Add tens word if array item exists */
                if( ( word = tens[ ints[1] ] ) ) {
                    words.push( word );
                }

                /* Add 'and' string after units or tens integer if: */
                if( ints[0] || ints[1] ) {

                    /* Chunk has a hundreds integer or chunk is the first of multiple chunks */
                    if( ints[2] || ! i && chunksLen ) {
                        words.push( and );
                    }

                }

                /* Add hundreds word if array item exists */
                if( ( word = units[ ints[2] ] ) ) {
                    words.push( word + ' hundred' );
                }

            }

        }

        return words.reverse().join( ' ' );

    }

// - - - - - Tests - - - - - -
function test(v) {
  var sep = ('string'==typeof v)?'"':'';
  console.log("numberToEnglish("+sep + v.toString() + sep+") = "+numberToEnglish(v));
}
test(2);
test(721);
test(13463);
test(1000001);
test("21,683,200,000,621,384");
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2016-07-29T12:31:56.287

您可能想尝试递归。它适用于 0 到 999999 之间的数字。请记住[(~~)](https://stackoverflow.com/questions/4055633/what-does-double-tilde-do-in-javascript)与 Math.floor 的作用相同

```
var num = "zero one two three four five six seven eight nine ten eleven twelve thirteen fourteen fifteen sixteen seventeen eighteen nineteen".split(" ");
var tens = "twenty thirty forty fifty sixty seventy eighty ninety".split(" ");

function number2words(n){
    if (n < 20) return num[n];
    var digit = n%10;
    if (n < 100) return tens[~~(n/10)-2] + (digit? "-" + num[digit]: "");
    if (n < 1000) return num[~~(n/100)] +" hundred" + (n%100 == 0? "": " " + number2words(n%100));
    return number2words(~~(n/1000)) + " thousand" + (n%1000 != 0? " " + number2words(n%1000): "");
}
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-02-01T08:19:55.980

[![在此处输入图像描述](../Images/16379be6ca7d21ac1ff0e1e9a73a357c.png)](https://i.stack.imgur.com/ej8kz.png)

```
 <html>

<head>

    <title>HTML - Convert numbers to words using JavaScript</title>

    <script  type="text/javascript">
    	function onlyNumbers(evt) {
    var e = event || evt; // For trans-browser compatibility
    var charCode = e.which || e.keyCode;

    if (charCode > 31 && (charCode < 48 || charCode > 57))
        return false;
    return true;
}

function NumToWord(inputNumber, outputControl) {
    var str = new String(inputNumber)
    var splt = str.split("");
    var rev = splt.reverse();
    var once = ['Zero', ' One', ' Two', ' Three', ' Four', ' Five', ' Six', ' Seven', ' Eight', ' Nine'];
    var twos = ['Ten', ' Eleven', ' Twelve', ' Thirteen', ' Fourteen', ' Fifteen', ' Sixteen', ' Seventeen', ' Eighteen', ' Nineteen'];
    var tens = ['', 'Ten', ' Twenty', ' Thirty', ' Forty', ' Fifty', ' Sixty', ' Seventy', ' Eighty', ' Ninety'];

    numLength = rev.length;
    var word = new Array();
    var j = 0;

    for (i = 0; i < numLength; i++) {
        switch (i) {

            case 0:
                if ((rev[i] == 0) || (rev[i + 1] == 1)) {
                    word[j] = '';
                }
                else {
                    word[j] = '' + once[rev[i]];
                }
                word[j] = word[j];
                break;

            case 1:
                aboveTens();
                break;

            case 2:
                if (rev[i] == 0) {
                    word[j] = '';
                }
                else if ((rev[i - 1] == 0) || (rev[i - 2] == 0)) {
                    word[j] = once[rev[i]] + " Hundred ";
                }
                else {
                    word[j] = once[rev[i]] + " Hundred and";
                }
                break;

            case 3:
                if (rev[i] == 0 || rev[i + 1] == 1) {
                    word[j] = '';
                }
                else {
                    word[j] = once[rev[i]];
                }
                if ((rev[i + 1] != 0) || (rev[i] > 0)) {
                    word[j] = word[j] + " Thousand";
                }
                break;

            case 4:
                aboveTens();
                break;

            case 5:
                if ((rev[i] == 0) || (rev[i + 1] == 1)) {
                    word[j] = '';
                }
                else {
                    word[j] = once[rev[i]];
                }
                if (rev[i + 1] !== '0' || rev[i] > '0') {
                    word[j] = word[j] + " Lakh";
                }

                break;

            case 6:
                aboveTens();
                break;

            case 7:
                if ((rev[i] == 0) || (rev[i + 1] == 1)) {
                    word[j] = '';
                }
                else {
                    word[j] = once[rev[i]];
                }
                if (rev[i + 1] !== '0' || rev[i] > '0') {
                    word[j] = word[j] + " Crore";
                }                
                break;

            case 8:
                aboveTens();
                break;

            //            This is optional. 

            //            case 9:
            //                if ((rev[i] == 0) || (rev[i + 1] == 1)) {
            //                    word[j] = '';
            //                }
            //                else {
            //                    word[j] = once[rev[i]];
            //                }
            //                if (rev[i + 1] !== '0' || rev[i] > '0') {
            //                    word[j] = word[j] + " Arab";
            //                }
            //                break;

            //            case 10:
            //                aboveTens();
            //                break;

            default: break;
        }
        j++;
    }

    function aboveTens() {
        if (rev[i] == 0) { word[j] = ''; }
        else if (rev[i] == 1) { word[j] = twos[rev[i - 1]]; }
        else { word[j] = tens[rev[i]]; }
    }

    word.reverse();
    var finalOutput = '';
    for (i = 0; i < numLength; i++) {
        finalOutput = finalOutput + word[i];
    }
    document.getElementById(outputControl).innerHTML = finalOutput;
}
    </script>

</head>

<body>

    <h1>

        HTML - Convert numbers to words using JavaScript</h1>

    <input id="Text1" type="text" onkeypress="return onlyNumbers(this.value);" onkeyup="NumToWord(this.value,'divDisplayWords');"

        maxlength="9" style="background-color: #efefef; border: 2px solid #CCCCC; font-size: large" />

    <br />

    <br />

    <div id="divDisplayWords" style="font-size: 13; color: Teal; font-family: Arial;">

    </div>

</body>

</html>
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-04-20T09:34:50.130

我喜欢我在这里得到的结果，我认为它易于阅读且足够短，可以作为解决方案。

```
function NumInWords (number) {
  const first = ['','one ','two ','three ','four ', 'five ','six ','seven ','eight ','nine ','ten ','eleven ','twelve ','thirteen ','fourteen ','fifteen ','sixteen ','seventeen ','eighteen ','nineteen '];
  const tens = ['', '', 'twenty','thirty','forty','fifty', 'sixty','seventy','eighty','ninety'];
  const mad = ['', 'thousand', 'million', 'billion', 'trillion'];
  let word = '';

  for (let i = 0; i < mad.length; i++) {
    let tempNumber = number%(100*Math.pow(1000,i));
    if (Math.floor(tempNumber/Math.pow(1000,i)) !== 0) {
      if (Math.floor(tempNumber/Math.pow(1000,i)) < 20) {
        word = first[Math.floor(tempNumber/Math.pow(1000,i))] + mad[i] + ' ' + word;
      } else {
        word = tens[Math.floor(tempNumber/(10*Math.pow(1000,i)))] + '-' + first[Math.floor(tempNumber/Math.pow(1000,i))%10] + mad[i] + ' ' + word;
      }
    }

    tempNumber = number%(Math.pow(1000,i+1));
    if (Math.floor(tempNumber/(100*Math.pow(1000,i))) !== 0) word = first[Math.floor(tempNumber/(100*Math.pow(1000,i)))] + 'hunderd ' + word;
  }
    return word;
}

console.log(NumInWords(89754697976431))
```

结果是：

> 八十九七千五百四十亿六亿九千七百万九十七万六千四百三十一

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2021-02-06T15:03:49.863

## 2021 年 2 月更新

尽管这个问题是在 8 年前提出的，有各种解决方案和答案，但最简单的解决方案可以通过在数组中插入名称而无需修改代码即可轻松更新以增加规模；并且使用非常短的代码是下面的函数。

此解决方案适用于数字的英文阅读（不是南亚系统），并使用标准的美国英语（美国方式）编写大数字。即它不使用英国系统（英国系统使用“和”一词如：“三十二万二千”）。

提供了测试用例以及一个输入字段。

**请记住，我们将其转换为单词的是“无符号整数”。**

你可以增加`scale[] array`超越Sextillion。

由于该函数很短，您可以将其用作内部函数，例如在货币转换中使用十进制数，并为整个部分和小数部分调用两次。

希望它是有用的。

```
/********************************************************
* @function    : integerToWords()
* @purpose     : Converts Unsigned Integers to Words
*                Using String Triplet Array.
* @version     : 1.05
* @author      : Mohsen Alyafei
* @date        : 15 January 2021
* @param       : {number} [integer numeric or string]
* @returns     : {string} The wordified number string
********************************************************/
const Ones  = ["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten",
                "Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],
      Tens  = ["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety","Hundred"],
      Scale = ["","Thousand","Million","Billion","Trillion","Quadrillion","Quintillion","Sextillion"];
//==================================
const integerToWords = (n = 0) => {
if (n == 0) return "Zero";                                   // check for zero
n = ("0".repeat(2*(n+="").length % 3) + n).match(/.{3}/g);   // create triplets array
if (n.length > Scale.length) return "Too Large";             // check if larger than scale array
let out= ""; return n.forEach((Triplet,pos) => {             // loop into array for each triplet
if (+Triplet) { out+=' ' +(+Triplet[0] ? Ones[+Triplet[0]]+' '+ Tens[10] : "") +
      ' ' + (+Triplet.substr(1)< 20 ? Ones[+Triplet.substr(1)] :
             Tens[+Triplet[1]] + (+Triplet[2] ? "-" : "") + Ones[+Triplet[2]]) +
      ' ' +  Scale[n.length-pos-1]; }
}),out.replace(/\s+/g,' ').trim();};                         // lazy job using trim()
//==================================

//=========================================
//             Test Cases
//=========================================
var r=0; // test tracker
r |= test(0,"Zero");
r |= test(5,"Five");
r |= test(10,"Ten");
r |= test(19,"Nineteen");
r |= test(33,"Thirty-Three");
r |= test(100,"One Hundred");
r |= test(111,"One Hundred Eleven");
r |= test(890,"Eight Hundred Ninety");
r |= test(1234,"One Thousand Two Hundred Thirty-Four");
r |= test(12345,"Twelve Thousand Three Hundred Forty-Five");
r |= test(123456,"One Hundred Twenty-Three Thousand Four Hundred Fifty-Six");
r |= test(1234567,"One Million Two Hundred Thirty-Four Thousand Five Hundred Sixty-Seven");
r |= test(12345678,"Twelve Million Three Hundred Forty-Five Thousand Six Hundred Seventy-Eight");
r |= test(123456789,"One Hundred Twenty-Three Million Four Hundred Fifty-Six Thousand Seven Hundred Eighty-Nine");
r |= test(1234567890,"One Billion Two Hundred Thirty-Four Million Five Hundred Sixty-Seven Thousand Eight Hundred Ninety");
r |= test(1001,"One Thousand One");
r |= test(10001,"Ten Thousand One");
r |= test(100001,"One Hundred Thousand One");
r |= test(1000001,"One Million One");
r |= test(10000001,"Ten Million One");
r |= test(100000001,"One Hundred Million One");
r |= test(12012,"Twelve Thousand Twelve");
r |= test(120012,"One Hundred Twenty Thousand Twelve");
r |= test(1200012,"One Million Two Hundred Thousand Twelve");
r |= test(12000012,"Twelve Million Twelve");
r |= test(120000012,"One Hundred Twenty Million Twelve");
r |= test(75075,"Seventy-Five Thousand Seventy-Five");
r |= test(750075,"Seven Hundred Fifty Thousand Seventy-Five");
r |= test(7500075,"Seven Million Five Hundred Thousand Seventy-Five");
r |= test(75000075,"Seventy-Five Million Seventy-Five");
r |= test(750000075,"Seven Hundred Fifty Million Seventy-Five");
r |= test(1000,"One Thousand");
r |= test(1000000,"One Million");
r |= test(1000000000,"One Billion");
r |= test(1000000000000,"One Trillion");
r |= test("1000000000000000","One Quadrillion");
r |= test("1000000000000000000","One Quintillion");
r |= test("1000000100100100100","One Quintillion One Hundred Billion One Hundred Million One Hundred Thousand One Hundred");

if (r==0) console.log("All Tests Passed.");

//=====================================
// Tester Function
//=====================================
function test(n,should) {
let result = integerToWords(n);
if (result !== should) {console.log(`${n} Output   : ${result}\n${n} Should be: ${should}`);return 1;}
}
```

```
<input type="text" name="number" placeholder="Please enter an Integer Number" onkeyup="word.innerHTML=integerToWords(this.value)" />
<div id="word"></div>
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2019-02-05T15:17:12.920

我修改了MC萨满的代码，修复了单个数字有并出现在它之前的错误

```
function numberToEnglish( n ) {

    var string = n.toString(), units, tens, scales, start, end, chunks, chunksLen, chunk, ints, i, word, words, and = 'and';

    /* Remove spaces and commas */
    string = string.replace(/[, ]/g,"");

    /* Is number zero? */
    if( parseInt( string ) === 0 ) {
        return 'zero';
    }

    /* Array of units as words */
    units = [ '', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen' ];

    /* Array of tens as words */
    tens = [ '', '', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety' ];

    /* Array of scales as words */
    scales = [ '', 'thousand', 'million', 'billion', 'trillion', 'quadrillion', 'quintillion', 'sextillion', 'septillion', 'octillion', 'nonillion', 'decillion', 'undecillion', 'duodecillion', 'tredecillion', 'quatttuor-decillion', 'quindecillion', 'sexdecillion', 'septen-decillion', 'octodecillion', 'novemdecillion', 'vigintillion', 'centillion' ];

    /* Split user argument into 3 digit chunks from right to left */
    start = string.length;
    chunks = [];
    while( start > 0 ) {
        end = start;
        chunks.push( string.slice( ( start = Math.max( 0, start - 3 ) ), end ) );
    }

    /* Check if function has enough scale words to be able to stringify the user argument */
    chunksLen = chunks.length;
    if( chunksLen > scales.length ) {
        return '';
    }

    /* Stringify each integer in each chunk */
    words = [];
    for( i = 0; i < chunksLen; i++ ) {

        chunk = parseInt( chunks[i] );

        if( chunk ) {

            /* Split chunk into array of individual integers */
            ints = chunks[i].split( '' ).reverse().map( parseFloat );

            /* If tens integer is 1, i.e. 10, then add 10 to units integer */
            if( ints[1] === 1 ) {
                ints[0] += 10;
            }

            /* Add scale word if chunk is not zero and array item exists */
            if( ( word = scales[i] ) ) {
                words.push( word );
            }

            /* Add unit word if array item exists */
            if( ( word = units[ ints[0] ] ) ) {
                words.push( word );
            }

            /* Add tens word if array item exists */
            if( ( word = tens[ ints[1] ] ) ) {
                words.push( word );
            }

            /* Add 'and' string after units or tens integer if: */
            if( ints[0] || ints[1] ) {

                /* Chunk has a hundreds integer or chunk is the first of multiple chunks */
                if( ints[2] || (i + 1) > chunksLen ) {
                    words.push( and );
                }

            }

            /* Add hundreds word if array item exists */
            if( ( word = units[ ints[2] ] ) ) {
                words.push( word + ' hundred' );
            }

        }

    }

    return words.reverse().join( ' ' );

}

// - - - - - Tests - - - - - -

function figure(val) {
  finalFig = numberToEnglish(val);
  document.getElementById("words").innerHTML = finalFig;
}
```

```
<span id="words"></span>
<input id="number" type="text" onkeyup=figure(this.value)  />
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2014-11-08T22:52:20.343

将输入字符串转换为数字而不是将其保留为字符串，将解决方案限制为该机器/浏览器上允许的最大浮点/整数值。我下面的脚本可以处理高达 1 万亿美元 - 1 美分的货币 :-)。通过添加 3 或 4 行代码，我可以扩展到处理多达 999 万亿。

```
var ones = ["","One","Two","Three","Four","Five","Six","Seven","Eight",
            "Nine","Ten","Eleven","Twelve","Thirteen","Fourteen",
            "Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"]; 

var tens = ["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy",
            "Eighty","Ninety"]; 

function words999(n999)   {    // n999 is an integer less than or equal to 999.
//
// Accept any 3 digit int incl 000 & 999 and return words.
// 

    var words = ''; var Hn = 0; var n99 = 0;

    Hn = Math.floor(n999 / 100);                  // # of hundreds in it

    if (Hn > 0)   {                               // if at least one 100

      words = words99(Hn) + " Hundred";           // one call for hundreds
    }

    n99 = n999 - (Hn * 100);                      // subtract the hundreds.

    words += ((words == '')?'':' ') + words99(n99); // combine the hundreds with tens & ones.

    return words;
}                            // function words999( n999 )

function words99(n99)   {    // n99 is an integer less than or equal to 99.
//
// Accept any 2 digit int incl 00 & 99 and return words.
// 

    var words = ''; var Dn = 0; var Un = 0;

    Dn = Math.floor(n99 / 10);           // # of tens

    Un = n99 % 10;                       // units

    if (Dn > 0 || Un > 0) {

      if (Dn < 2) {

        words += ones[Dn * 10 + Un];     // words for a # < 20

      } else {

        words += tens[Dn];

        if (Un > 0) words += "-" + ones[Un];
      }
    }                               // if ( Dn > 0 || Un > 0 )

    return words;
}                                   // function words99( n99 )

function getAmtInWords(id1, id2) {  // use numeric value of id1 to populate text in id2 
//
// Read numeric amount field and convert into word amount
// 

    var t1 = document.getElementById(id1).value;

    var t2 = t1.trim();

    amtStr = t2.replace(/,/g,'');        // $123,456,789.12 = 123456789.12

    dotPos = amtStr.indexOf('.');        // position of dot before cents, -ve if it doesn't exist.

    if (dotPos > 0) {

      dollars = amtStr.slice(0,dotPos);  // 1234.56 = 1234
      cents   = amtStr.slice(dotPos+1);  // 1234.56 = .56

    } else if (dotPos == 0) {

      dollars = '0';
      cents   = amtStr.slice(dotPos+1);  // 1234.56 = .56

    } else {

      dollars = amtStr.slice(0);         // 1234 = 1234
      cents   = '0'; 
    }

    t1      = '000000000000' + dollars;  // to extend to trillion, use 15 zeros
    dollars =  t1.slice(-12);            // and -15 here.

    billions  = Number(dollars.substr(0,3));
    millions  = Number(dollars.substr(3,3));
    thousands = Number(dollars.substr(6,3));
    hundreds  = Number(dollars.substr(9,3));

    t1 = words999(billions);    bW = t1.trim();   // Billions  in words

    t1 = words999(millions);    mW = t1.trim();   // Millions  in words

    t1 = words999(thousands);   tW = t1.trim();   // Thousands in words

    t1 = words999(hundreds);    hW = t1.trim();   // Hundreds  in words

    t1 = words99(cents);        cW = t1.trim();   // Cents     in words

    var totAmt = '';

    if (bW != '')   totAmt += ((totAmt != '') ? ' '  : '') + bW + ' Billion';
    if (mW != '')   totAmt += ((totAmt != '') ? ' '  : '') + mW + ' Million';
    if (tW != '')   totAmt += ((totAmt != '') ? ' '  : '') + tW + ' Thousand';
    if (hW != '')   totAmt += ((totAmt != '') ? ' '  : '') + hW + ' Dollars';

    if (cW != '')   totAmt += ((totAmt != '') ? ' and ' : '') + cW + ' Cents';

//  alert('totAmt = ' + totAmt);    // display words in a alert

    t1 = document.getElementById(id2).value;

    t2 = t1.trim();

    if (t2 == '')  document.getElementById(id2).value = totAmt;

    return false;
}                        // function getAmtInWords( id1, id2 )

// ======================== [ End Code ] ==================================== 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-05-04T10:53:30.497

如果您需要 Cent，那么您可以使用这个

```
 <script>
            var iWords = ['zero', ' one', ' two', ' three', ' four', ' five', ' six', ' seven', ' eight', ' nine'];
            var ePlace = ['ten', ' eleven', ' twelve', ' thirteen', ' fourteen', ' fifteen', ' sixteen', ' seventeen', ' eighteen', ' nineteen'];
            var tensPlace = ['', ' ten', ' twenty', ' thirty', ' forty', ' fifty', ' sixty', ' seventy', ' eighty', ' ninety'];
            var inWords = [];

            var numReversed, inWords, actnumber, i, j;

            function tensComplication() {
            if (actnumber[i] == 0) {
                inWords[j] = '';
            } else if (actnumber[i] == 1) {
                inWords[j] = ePlace[actnumber[i - 1]];
            } else {
                inWords[j] = tensPlace[actnumber[i]];
            }
            }

            function convertAmount() {
                var numericValue = document.getElementById('bdt').value;
                numericValue = parseFloat(numericValue).toFixed(2);

                var amount = numericValue.toString().split('.');
                var taka = amount[0];
                var paisa = amount[1];
                document.getElementById('container').innerHTML = convert(taka) +" taka and "+ convert(paisa)+" paisa only";
            }
            function convert(numericValue) {
            inWords = []
            if(numericValue == "00" || numericValue =="0"){
                return 'zero';
            }
            var obStr = numericValue.toString();
            numReversed = obStr.split('');
            actnumber = numReversed.reverse();

            if (Number(numericValue) == 0) {
                document.getElementById('container').innerHTML = 'BDT Zero';
                return false;
            }

            var iWordsLength = numReversed.length;
            var finalWord = '';
            j = 0;
            for (i = 0; i < iWordsLength; i++) {
                switch (i) {
                    case 0:
                        if (actnumber[i] == '0' || actnumber[i + 1] == '1') {
                            inWords[j] = '';
                        } else {
                            inWords[j] = iWords[actnumber[i]];
                        }
                        inWords[j] = inWords[j] + '';
                        break;
                    case 1:
                        tensComplication();
                        break;
                    case 2:
                        if (actnumber[i] == '0') {
                            inWords[j] = '';
                        } else if (actnumber[i - 1] !== '0' && actnumber[i - 2] !== '0') {
                            inWords[j] = iWords[actnumber[i]] + ' hundred';
                        } else {
                            inWords[j] = iWords[actnumber[i]] + ' hundred';
                        }
                        break;
                    case 3:
                        if (actnumber[i] == '0' || actnumber[i + 1] == '1') {
                            inWords[j] = '';
                        } else {
                            inWords[j] = iWords[actnumber[i]];
                        }
                        if (actnumber[i + 1] !== '0' || actnumber[i] > '0') {
                            inWords[j] = inWords[j] + ' thousand';
                        }
                        break;
                    case 4:
                        tensComplication();
                        break;
                    case 5:
                        if (actnumber[i] == '0' || actnumber[i + 1] == '1') {
                            inWords[j] = '';
                        } else {
                            inWords[j] = iWords[actnumber[i]];
                        }
                        if (actnumber[i + 1] !== '0' || actnumber[i] > '0') {
                            inWords[j] = inWords[j] + ' lakh';
                        }
                        break;
                    case 6:
                        tensComplication();
                        break;
                    case 7:
                        if (actnumber[i] == '0' || actnumber[i + 1] == '1') {
                            inWords[j] = '';
                        } else {
                            inWords[j] = iWords[actnumber[i]];
                        }
                        inWords[j] = inWords[j] + ' crore';
                        break;
                    case 8:
                        tensComplication();
                        break;
                    default:
                        break;
                }
                j++;
            }

            inWords.reverse();
            for (i = 0; i < inWords.length; i++) {
                finalWord += inWords[i];
            }
            return finalWord;
            }

        </script>

        <input type="text" name="bdt" id="bdt" />
        <input type="button" name="sr1" value="Click Here" onClick="convertAmount()"/>

        <div id="container"></div> 
```

[js小提琴](http://jsfiddle.net/mahfuzcmt/vxmta5ua/1/)

这里 taka 表示美元，paisa 表示美分

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2015-12-12T02:13:30.837

这是对@LordZardeck 对[@naomik 上述出色答案](https://stackoverflow.com/a/30524915/4585712)的评论的回应。对不起，我会直接发表评论，但我以前从未发布过，所以我没有这样做的特权，所以我在这里发帖。

无论如何，我刚刚在上周末将 ES5 版本翻译成更易读的形式，所以我在这里分享它。这应该忠实于原文（包括最近的编辑），我希望命名清晰准确。

```
function int_to_words(int) {
  if (int === 0) return 'zero';

  var ONES  = ['','one','two','three','four','five','six','seven','eight','nine','ten','eleven','twelve','thirteen','fourteen','fifteen','sixteen','seventeen','eighteen','nineteen'];
  var TENS  = ['','','twenty','thirty','fourty','fifty','sixty','seventy','eighty','ninety'];
  var SCALE = ['','thousand','million','billion','trillion','quadrillion','quintillion','sextillion','septillion','octillion','nonillion'];

  // Return string of first three digits, padded with zeros if needed
  function get_first(str) {
    return ('000' + str).substr(-3);
  }

  // Return string of digits with first three digits chopped off
  function get_rest(str) {
    return str.substr(0, str.length - 3);
  }

  // Return string of triplet convereted to words
  function triplet_to_words(_3rd, _2nd, _1st) {
    return (_3rd == '0' ? '' : ONES[_3rd] + ' hundred ') + (_1st == '0' ? TENS[_2nd] : TENS[_2nd] && TENS[_2nd] + '-' || '') + (ONES[_2nd + _1st] || ONES[_1st]);
  }

  // Add to words, triplet words with scale word
  function add_to_words(words, triplet_words, scale_word) {
    return triplet_words ? triplet_words + (scale_word && ' ' + scale_word || '') + ' ' + words : words;
  }

  function iter(words, i, first, rest) {
    if (first == '000' && rest.length === 0) return words;
    return iter(add_to_words(words, triplet_to_words(first[0], first[1], first[2]), SCALE[i]), ++i, get_first(rest), get_rest(rest));
  }

  return iter('', 0, get_first(String(int)), get_rest(String(int)));
} 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2016-05-24T09:14:16.007

```
var inWords = function(totalRent){
//console.log(totalRent);
var a = ['','one ','two ','three ','four ', 'five ','six ','seven ','eight ','nine ','ten ','eleven ','twelve ','thirteen ','fourteen ','fifteen ','sixteen ','seventeen ','eighteen ','nineteen '];
var b = ['', '', 'twenty','thirty','forty','fifty', 'sixty','seventy','eighty','ninety'];
var number = parseFloat(totalRent).toFixed(2).split(".");
var num = parseInt(number[0]);
var digit = parseInt(number[1]);
//console.log(num);
if ((num.toString()).length > 9)  return 'overflow';
var n = ('000000000' + num).substr(-9).match(/^(\d{2})(\d{2})(\d{2})(\d{1})(\d{2})$/);
var d = ('00' + digit).substr(-2).match(/^(\d{2})$/);;
if (!n) return; var str = '';
str += (n[1] != 0) ? (a[Number(n[1])] || b[n[1][0]] + ' ' + a[n[1][1]]) + 'crore ' : '';
str += (n[2] != 0) ? (a[Number(n[2])] || b[n[2][0]] + ' ' + a[n[2][1]]) + 'lakh ' : '';
str += (n[3] != 0) ? (a[Number(n[3])] || b[n[3][0]] + ' ' + a[n[3][1]]) + 'thousand ' : '';
str += (n[4] != 0) ? (a[Number(n[4])] || b[n[4][0]] + ' ' + a[n[4][1]]) + 'hundred ' : '';
str += (n[5] != 0) ? (a[Number(n[5])] || b[n[5][0]] + ' ' + a[n[5][1]]) + 'Rupee ' : '';
str += (d[1] != 0) ? ((str != '' ) ? "and " : '') + (a[Number(d[1])] || b[d[1][0]] + ' ' + a[d[1][1]]) + 'Paise ' : 'Only!';
console.log(str);
return str;
} 
```

这是修改后的代码，支持小数点后 2 位的印度卢比。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-10-28T19:06:11.450

以下是翻译自

*   整数到单词
*   浮动到单词
*   钱到话

测试用例在底部

```
var ONE_THOUSAND = Math.pow(10, 3);
var ONE_MILLION = Math.pow(10, 6);
var ONE_BILLION = Math.pow(10, 9);
var ONE_TRILLION = Math.pow(10, 12);
var ONE_QUADRILLION = Math.pow(10, 15);
var ONE_QUINTILLION = Math.pow(10, 18);

function integerToWord(integer) {
  var prefix = '';
  var suffix = '';

  if (!integer){ return "zero"; }

  if(integer < 0){
    prefix = "negative";
    suffix = integerToWord(-1 * integer);
    return prefix + " " + suffix;
  }
  if(integer <= 90){
    switch (integer) {
      case integer < 0:
        prefix = "negative";
        suffix = integerToWord(-1 * integer);
        return prefix + " "  + suffix;
      case 1: return "one";
      case 2: return "two";
      case 3: return "three";
      case 4:  return "four";
      case 5: return "five";
      case 6: return "six";
      case 7: return "seven";
      case 8: return "eight";
      case 9: return "nine";
      case 10: return "ten";
      case 11: return "eleven";
      case 12: return "twelve";
      case 13: return "thirteen";
      case 14: return "fourteen";
      case 15: return "fifteen";
      case 16: return "sixteen";
      case 17: return "seventeen";
      case 18: return "eighteen";
      case 19: return "nineteen";
      case 20: return "twenty";
      case 30: return "thirty";
      case 40: return "forty";
      case 50: return "fifty";
      case 60: return "sixty";
      case 70: return "seventy";
      case 80: return "eighty";
      case 90: return "ninety";
      default: break;
    }
  }

  if(integer < 100){
    prefix = integerToWord(integer - integer % 10);
    suffix = integerToWord(integer % 10);
    return prefix + "-"  + suffix;
  }

  if(integer < ONE_THOUSAND){
    prefix = integerToWord(parseInt(Math.floor(integer / 100), 10) )  + " hundred";
    if (integer % 100){ suffix = " and "  + integerToWord(integer % 100); }
    return prefix + suffix;
  }

  if(integer < ONE_MILLION){
    prefix = integerToWord(parseInt(Math.floor(integer / ONE_THOUSAND), 10))  + " thousand";
    if (integer % ONE_THOUSAND){ suffix = integerToWord(integer % ONE_THOUSAND); }
  }
  else if(integer < ONE_BILLION){
    prefix = integerToWord(parseInt(Math.floor(integer / ONE_MILLION), 10))  + " million";
    if (integer % ONE_MILLION){ suffix = integerToWord(integer % ONE_MILLION); }
  }
  else if(integer < ONE_TRILLION){
    prefix = integerToWord(parseInt(Math.floor(integer / ONE_BILLION), 10))  + " billion";
    if (integer % ONE_BILLION){ suffix = integerToWord(integer % ONE_BILLION); }
  }
  else if(integer < ONE_QUADRILLION){
    prefix = integerToWord(parseInt(Math.floor(integer / ONE_TRILLION), 10))  + " trillion";
    if (integer % ONE_TRILLION){ suffix = integerToWord(integer % ONE_TRILLION); }
  }
  else if(integer < ONE_QUINTILLION){
    prefix = integerToWord(parseInt(Math.floor(integer / ONE_QUADRILLION), 10))  + " quadrillion";
    if (integer % ONE_QUADRILLION){ suffix = integerToWord(integer % ONE_QUADRILLION); }
  } else {
    return '';
  }
  return prefix + " "  + suffix;
}

function moneyToWord(value){
  var decimalValue = (value % 1);
  var integer = value - decimalValue;
  decimalValue = Math.round(decimalValue * 100);
  var decimalText = !decimalValue? '': integerToWord(decimalValue) + ' cent' + (decimalValue === 1? '': 's');
  var integerText= !integer? '': integerToWord(integer) + ' dollar' + (integer === 1? '': 's');
  return (
    integer && !decimalValue? integerText:
    integer && decimalValue? integerText + ' and ' + decimalText:
    !integer && decimalValue? decimalText:
    'zero cents'
  );
}

function floatToWord(value){
  var decimalValue = (value % 1);
  var integer = value - decimalValue;
  decimalValue = Math.round(decimalValue * 100);
  var decimalText = !decimalValue? '':
    decimalValue < 10? "point o' " + integerToWord(decimalValue):
    decimalValue % 10 === 0? 'point ' + integerToWord(decimalValue / 10):
    'point ' + integerToWord(decimalValue);
  return (
    integer && !decimalValue? integerToWord(integer):
    integer && decimalValue? [integerToWord(integer),  decimalText].join(' '):
    !integer && decimalValue? decimalText:
    integerToWord(0)
  );
}

// test
(function(){
  console.log('integerToWord ==================================');
  for(var i = 0; i < 101; ++i){
    console.log('%s=%s', i, integerToWord(i));
  }
  console.log('floatToWord ====================================');
  i = 131;
  while(i--){
    console.log('%s=%s', i / 100, floatToWord(i / 100));
  }
  console.log('moneyToWord ====================================');
  for(i = 0; i < 131; ++i){
    console.log('%s=%s', i / 100, moneyToWord(i / 100));
  }
}());
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2016-06-23T16:20:23.900

另一种使用余数并支持不同语言的转换：

```
function numberToWords(number) {
  var result = [];

  var fraction = number.toFixed(2).split('.');
  var integer_part = parseInt(fraction[0]);
  // var fractional_part = parseInt(fraction[1]); -- not handled here

  var previousNumber = null;
  for (var i = 0; i < fraction[0].length; i++) {
    var reminder = Math.floor(integer_part % 10);
    integer_part /= 10;
    var name = getNumberName(reminder, i, fraction[0].length, previousNumber);
    previousNumber = reminder;
    if (name)
      result.push(name);
  }

  result.reverse();
  return result.join(' ');
} 
```

该`getNumberName`函数与语言相关，最多可处理*9999*的数字（但很容易扩展它以处理更大的数字）：

```
function getNumberName(number, power, places, previousNumber) {
  var result = "";
  if (power == 1) {
    result = handleTeensAndTys(number, previousNumber);
  } else if (power == 0 && places != 1 || number == 0) {
    // skip number that was handled in teens and zero
  } else {
    result = locale.numberNames[number.toString()] + locale.powerNames[power.toString()];
  }

  return result;
} 
```

`handleTeensAndTys`处理十的倍数：

```
function handleTeensAndTys(number, previousNumber) {
  var result = "";
  if (number == 1) { // teens
    if (previousNumber in locale.specialTeenNames) {
      result = locale.specialTeenNames[previousNumber];    
    } else if (previousNumber in locale.specialTyNames) {
      result = locale.specialTyNames[previousNumber] + locale.teenSuffix;
    } else {
      result = locale.numberNames[previousNumber] + locale.teenSuffix;    
    }
  } else if (number == 0) { // previousNumber was not handled in teens
    result = locale.numberNames[previousNumber.toString()];
  } else { // other tys
    if (number in locale.specialTyNames) {
      result = locale.specialTyNames[number];
    } else {
      result = locale.numberNames[number];
    }
    result += locale.powerNames[1];
    if (previousNumber != 0) {
      result += " " + locale.numberNames[previousNumber.toString()];
    }
  }
  return result;
} 
```

最后，语言环境示例：

```
var locale = { // English
  numberNames: {1: "one", 2: "two", 3: "three", 4: "four", 5: "five", 6: "six", 7: "seven", 8: "eight", 9: "nine" },
  powerNames: {0: "", 1: "ty", 2: " hundred", 3: " thousand" },
  specialTeenNames: {0: "ten", 1: "eleven", 2: "twelve" },
  specialTyNames: {2: "twen", 3: "thir", 5: "fif" },
  teenSuffix: "teen"
};

var locale = { // Estonian
  numberNames: {1: "üks", 2: "kaks", 3: "kolm", 4: "neli", 5: "viis", 6: "kuus", 7: "seitse", 8: "kaheksa", 9: "üheksa"},
  powerNames: {0: "", 1: "kümmend", 2: "sada", 3: " tuhat" },
  specialTeenNames: {0: "kümme"},
  specialTyNames: {},
  teenSuffix: "teist"
}; 
```

这是一个带有测试的 JSFiddle：[https ://jsfiddle.net/rcrxna7v/15/](https://jsfiddle.net/rcrxna7v/15/)

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-01-02T19:29:20.207

我修改了@McShaman 的代码，将其转换为 CoffeeScript，并通过[JSNice](http://www.jsnice.org/)添加了文档。这是结果，对于那些感兴趣的人（英语）：

```
###
    Convert an integer to an English string equivalent
    @param {Integer} number the integer to be converted
    @return {String} the English number equivalent
###
inWords = (number) ->
    ###
        @property {Array}
    ###
    englishIntegers = [
        ""
        "one "
        "two "
        "three "
        "four "
        "five "
        "six "
        "seven "
        "eight "
        "nine "
        "ten "
        "eleven "
        "twelve "
        "thirteen "
        "fourteen "
        "fifteen "
        "sixteen "
        "seventeen "
        "eighteen "
        "nineteen "
    ]

    ###
        @property {Array}
    ###
    englishIntegerTens = [
        ""
        ""
        "twenty"
        "thirty"
        "forty"
        "fifty"
        "sixty"
        "seventy"
        "eighty"
        "ninety"
    ]

    ###
        @property {Array}
    ###
    englishIntegerThousands = [
        "thousand"
        "million"
        ""
    ]
    number = number.toString()
    return "" if number.length > 9

    ###
        @property {string}
    ###
    number = ("000000000" + number).substr(-9)

    ###
      @property {(Array.<string>|null)}
      ###
    number = number.match(/.{3}/g)

    ###
        @property {string}
    ###
    convertedWords = ""

    ###
        @property {number}
    ###
    i = 0
    while i < englishIntegerThousands.length

        ###
            @property {string}
        ###
        currentNumber = number[i]

        ###
            @property {string}
        ###
        tempResult = ""
        tempResult += (if convertedWords isnt "" then " " + englishIntegerThousands[i] + " " else "")
        tempResult += (if currentNumber[0] isnt 0 then englishIntegers[Number(currentNumber[0])] + "hundred " else "")

        ###
            @property {string}
        ###
        currentNumber = currentNumber.substr(1)
        tempResult += (if currentNumber isnt 0 then ((if tempResult isnt "" then "and " else "")) + (englishIntegers[Number(currentNumber)] or englishIntegerTens[currentNumber[0]] + " " + englishIntegers[currentNumber[1]]) else "")
        convertedWords += tempResult
        i++
    convertedWords 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-08-12T08:04:44.977

虽然，这个问题已经得到解答 - 我仍然想分享我最近在 java 脚本中开发的一些东西（基于我在 Internet 上找到的旧 C#.Net 实现的逻辑），用于将印度货币值转换为单词。它最多可以处理 40 位数字。你可以看看。

用法：InrToWordConverter.Initialize();。var inWords = InrToWordConverter.ConvertToWord(amount);

执行：

```
htPunctuation = {};
listStaticSuffix = {};
listStaticPrefix = {};
listHelpNotation = {};

var InrToWordConverter = function () {

};

InrToWordConverter.Initialize = function () {
    InrToWordConverter.LoadStaticPrefix();
    InrToWordConverter.LoadStaticSuffix();
    InrToWordConverter.LoadHelpofNotation();
};

InrToWordConverter.ConvertToWord = function (value) {
    value = value.toString();

    if (value) {
        var tokens = value.split(".");
        var rsPart = "";
        var psPart = "";
        if (tokens.length === 2) {
            rsPart = String.trim(tokens[0]) || "0";
            psPart = String.trim(tokens[1]) || "0";
        }
        else if (tokens.length === 1) {
            rsPart = String.trim(tokens[0]) || "0";
            psPart = "0";
        }
        else {
            rsPart = "0";
            psPart = "0";
        }

        htPunctuation = {};
        var rsInWords = InrToWordConverter.ConvertToWordInternal(rsPart) || "Zero";
        var psInWords = InrToWordConverter.ConvertToWordInternal(psPart) || "Zero";

        var result = "Rupees " + rsInWords + "and " + psInWords + " Paise.";
        return result;
    }
};

InrToWordConverter.ConvertToWordInternal = function (value) {
    var convertedString = "";
    if (!(value.toString().length > 40))
    {
        if (InrToWordConverter.IsNumeric(value.toString()))
        {
            try
            {
                var strValue = InrToWordConverter.Reverse(value);
                switch (strValue.length)
                {
                    case 1:
                        if (parseInt(strValue.toString()) > 0) {
                            convertedString = InrToWordConverter.GetWordConversion(value);
                        }
                        else {
                            convertedString = "Zero ";
                        }
                        break;
                    case 2:
                        convertedString = InrToWordConverter.GetWordConversion(value);
                        break;
                    default:
                        InrToWordConverter.InsertToPunctuationTable(strValue);
                        InrToWordConverter.ReverseHashTable();
                        convertedString = InrToWordConverter.ReturnHashtableValue();
                        break;
                }
            }
            catch (exception) {
                convertedString = "Unexpected Error Occured <br/>";
            }
        }
        else {
            convertedString = "Please Enter Numbers Only, Decimal Values Are not supported";
        }
    }
    else {
        convertedString = "Please Enter Value in Less Then or Equal to 40 Digit";
    }
    return convertedString;
};

InrToWordConverter.IsNumeric = function (valueInNumeric) {
    var isFine = true;
    valueInNumeric = valueInNumeric || "";
    var len = valueInNumeric.length;
    for (var i = 0; i < len; i++) {
        var ch = valueInNumeric[i];
        if (!(ch >= '0' && ch <= '9')) {
            isFine = false;
            break;
        }
    }
    return isFine;
};

InrToWordConverter.ReturnHashtableValue = function () {
    var strFinalString = "";
    var keysArr = [];
    for (var key in htPunctuation) {
        keysArr.push(key);
    }
    for (var i = keysArr.length - 1; i >= 0; i--) {
        var hKey = keysArr[i];
        if (InrToWordConverter.GetWordConversion((htPunctuation[hKey]).toString()) !== "") {
            strFinalString = strFinalString + InrToWordConverter.GetWordConversion((htPunctuation[hKey]).toString()) + InrToWordConverter.StaticPrefixFind((hKey).toString());
        }
    }
    return strFinalString;
};

InrToWordConverter.ReverseHashTable = function () {
    var htTemp = {};
    for (var key in htPunctuation) {
        var item = htPunctuation[key];
        htTemp[key] = InrToWordConverter.Reverse(item.toString());
    }
    htPunctuation = {};
    htPunctuation = htTemp;
};

InrToWordConverter.InsertToPunctuationTable = function (strValue) {
    htPunctuation[1] = strValue.substr(0, 3).toString();
    var j = 2;
    for (var i = 3; i < strValue.length; i = i + 2) {
        if (strValue.substr(i).length > 0) {
            if (strValue.substr(i).length >= 2) {
                htPunctuation[j] = strValue.substr(i, 2).toString();
            }
            else {
                htPunctuation[j] = strValue.substr(i, 1).toString();
            }
        }
        else {
            break;
        }
        j++;

    }
};

InrToWordConverter.Reverse = function (strValue) {
    var reversed = "";
    for (var i in strValue) {
        var ch = strValue[i];
        reversed = ch + reversed;
    }
    return reversed;
};

InrToWordConverter.GetWordConversion = function (inputNumber) {
    var toReturnWord = "";
    if (inputNumber.length <= 3 && inputNumber.length > 0) {
        if (inputNumber.length === 3) {
            if (parseInt(inputNumber.substr(0, 1)) > 0) {
                toReturnWord = toReturnWord + InrToWordConverter.StaticSuffixFind(inputNumber.substr(0, 1)) + "Hundred ";
            }

            var tempString = InrToWordConverter.StaticSuffixFind(inputNumber.substr(1, 2));

            if (tempString === "")
            {
                toReturnWord = toReturnWord + InrToWordConverter.StaticSuffixFind(inputNumber.substr(1, 1) + "0");
                toReturnWord = toReturnWord + InrToWordConverter.StaticSuffixFind(inputNumber.substr(2, 1));
            }
            toReturnWord = toReturnWord + tempString;
        }
        if (inputNumber.length === 2)
        {
            var tempString = InrToWordConverter.StaticSuffixFind(inputNumber.substr(0, 2));
            if (tempString === "")
            {
                toReturnWord = toReturnWord + InrToWordConverter.StaticSuffixFind(inputNumber.substr(0, 1) + "0");
                toReturnWord = toReturnWord + InrToWordConverter.StaticSuffixFind(inputNumber.substr(1, 1));
            }
            toReturnWord = toReturnWord + tempString;
        }
        if (inputNumber.length === 1)
        {
            toReturnWord = toReturnWord + InrToWordConverter.StaticSuffixFind(inputNumber.substr(0, 1));
        }

    }
    return toReturnWord;
};

InrToWordConverter.StaticSuffixFind = function (numberKey) {
    var valueFromNumber = "";
    for (var key in listStaticSuffix) {
        if (String.trim(key.toString()) === String.trim(numberKey)) {
            valueFromNumber = listStaticSuffix[key].toString();
            break;
        }
    }
    return valueFromNumber;
};

InrToWordConverter.StaticPrefixFind = function (numberKey) {
    var valueFromNumber = "";
    for (var key in listStaticPrefix) {
        if (String.trim(key) === String.trim(numberKey)) {
            valueFromNumber = listStaticPrefix[key].toString();
            break;
        }
    }
    return valueFromNumber;
};

InrToWordConverter.StaticHelpNotationFind = function (numberKey) {
    var helpText = "";
    for (var key in listHelpNotation) {
        if (String.trim(key.toString()) === String.trim(numberKey)) {
            helpText = listHelpNotation[key].toString();
            break;
        }
    }
    return helpText;
};

InrToWordConverter.LoadStaticPrefix = function () {
    listStaticPrefix[2] = "Thousand ";
    listStaticPrefix[3] = "Lac ";
    listStaticPrefix[4] = "Crore ";
    listStaticPrefix[5] = "Arab ";
    listStaticPrefix[6] = "Kharab ";
    listStaticPrefix[7] = "Neel ";
    listStaticPrefix[8] = "Padma ";
    listStaticPrefix[9] = "Shankh ";
    listStaticPrefix[10] = "Maha-shankh ";
    listStaticPrefix[11] = "Ank ";
    listStaticPrefix[12] = "Jald ";
    listStaticPrefix[13] = "Madh ";
    listStaticPrefix[14] = "Paraardha ";
    listStaticPrefix[15] = "Ant ";
    listStaticPrefix[16] = "Maha-ant ";
    listStaticPrefix[17] = "Shisht ";
    listStaticPrefix[18] = "Singhar ";
    listStaticPrefix[19] = "Maha-singhar ";
    listStaticPrefix[20] = "Adant-singhar ";
};

InrToWordConverter.LoadStaticSuffix = function () {
    listStaticSuffix[1] = "One ";
    listStaticSuffix[2] = "Two ";
    listStaticSuffix[3] = "Three ";
    listStaticSuffix[4] = "Four ";
    listStaticSuffix[5] = "Five ";
    listStaticSuffix[6] = "Six ";
    listStaticSuffix[7] = "Seven ";
    listStaticSuffix[8] = "Eight ";
    listStaticSuffix[9] = "Nine ";
    listStaticSuffix[10] = "Ten ";
    listStaticSuffix[11] = "Eleven ";
    listStaticSuffix[12] = "Twelve ";
    listStaticSuffix[13] = "Thirteen ";
    listStaticSuffix[14] = "Fourteen ";
    listStaticSuffix[15] = "Fifteen ";
    listStaticSuffix[16] = "Sixteen ";
    listStaticSuffix[17] = "Seventeen ";
    listStaticSuffix[18] = "Eighteen ";
    listStaticSuffix[19] = "Nineteen ";
    listStaticSuffix[20] = "Twenty ";
    listStaticSuffix[30] = "Thirty ";
    listStaticSuffix[40] = "Fourty ";
    listStaticSuffix[50] = "Fifty ";
    listStaticSuffix[60] = "Sixty ";
    listStaticSuffix[70] = "Seventy ";
    listStaticSuffix[80] = "Eighty ";
    listStaticSuffix[90] = "Ninty ";
};

InrToWordConverter.LoadHelpofNotation = function () {
    listHelpNotation[2] = "=1,000 (3 Trailing Zeros)";
    listHelpNotation[3] = "=1,00,000 (5 Trailing Zeros)";
    listHelpNotation[4] = "=1,00,00,000 (7 Trailing Zeros)";
    listHelpNotation[5] = "=1,00,00,00,000 (9 Trailing Zeros)";
    listHelpNotation[6] = "=1,00,00,00,00,000 (11 Trailing Zeros)";
    listHelpNotation[7] = "=1,00,00,00,00,00,000 (13 Trailing Zeros)";
    listHelpNotation[8] = "=1,00,00,00,00,00,00,000 (15 Trailing Zeros)";
    listHelpNotation[9] = "=1,00,00,00,00,00,00,00,000 (17 Trailing Zeros)";
    listHelpNotation[10] = "=1,00,00,00,00,00,00,00,00,000 (19 Trailing Zeros)";
    listHelpNotation[11] = "=1,00,00,00,00,00,00,00,00,00,000 (21 Trailing Zeros)";
    listHelpNotation[12] = "=1,00,00,00,00,00,00,00,00,00,00,000 (23 Trailing Zeros)";
    listHelpNotation[13] = "=1,00,00,00,00,00,00,00,00,00,00,00,000 (25 Trailing Zeros)";
    listHelpNotation[14] = "=1,00,00,00,00,00,00,00,00,00,00,00,00,000 (27 Trailing Zeros)";
    listHelpNotation[15] = "=1,00,00,00,00,00,00,00,00,00,00,00,00,00,000 (29 Trailing Zeros)";
    listHelpNotation[16] = "=1,00,00,00,00,00,00,00,00,00,00,00,00,00,00,000 (31 Trailing Zeros)";
    listHelpNotation[17] = "=1,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,000 (33 Trailing Zeros)";
    listHelpNotation[18] = "=1,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,000 (35 Trailing Zeros)";
    listHelpNotation[19] = "=1,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,000 (37 Trailing Zeros)";
    listHelpNotation[20] = "=1,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,000 (39 Trailing Zeros)";
};
    if (!String.trim) {
    String.trim = function (str) {
        var result = "";
        var firstNonWhiteSpaceFound = false;
        var startIndex = -1;
        var endIndex = -1;
        if (str) {
            for (var i = 0; i < str.length; i++) {
                if (firstNonWhiteSpaceFound === false) {
                    if (str[i] === ' ' || str[i] === '\t') {
                        continue;
                    }
                    else {
                        firstNonWhiteSpaceFound = true;
                        startIndex = i;
                        endIndex = i;
                    }
                }
                else {
                    if (str[i] === ' ' || str[i] === '\t') {
                        continue;
                    }
                    else {
                        endIndex = i;
                    }
                }
            }
            if (startIndex !== -1 && endIndex !== -1) {
                result = str.slice(startIndex, endIndex + 1);
            }
        }
        return result;
    };
} 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-03-18T20:21:50.790

使用符合土耳其货币的 JavaScript 尝试此代码

 ````
function dene() {
         var inpt = document.getElementById("tar1").value;
         var spt = inpt.split('');
         spt.reverse();

         var tek = ["", "Bir", "İki", "Üç", "Dört", "Beş", "Altı", "Yedi", "Sekiz", "Dokuz"];
         var onlu = ["", "On", "Yirmi", "Otuz", "Kırk", "Elli", "Atmış", "Yetmiş", "Seksen", "Doksan"];
         var Yuz = ["", "Yüz", "İkiYüz", "Üçyüz", "DörtYüz", "BeşYüz", "AltıYüz", "YediYüz", "SekizYüz", "DokuzYüz"];
         var ska = ["", "", "", "", "Bin", "Milyon", "Milyar", "Trilyon", "Katrilyon", "Kentilyon"];
         var i, j;
         var bas3 = "";
         var bas6 = "";
         var bas9 = "";
         var bas12 = "";
         var total;

               for(i = 0; i < 1; i++) {

                      bas3 += Yuz[spt[i+2]] + onlu[spt[i+1]] + tek[spt[i]];
                      bas6 += Yuz[spt[i+5]] + onlu[spt[i+4]] + tek[spt[i+3]] + ska[4];
                      bas9 += Yuz[spt[i+8]] + onlu[spt[i+7]] + tek[spt[i+6]] + ska[5];
                      bas12 += Yuz[spt[i+11]] + onlu[spt[i+10]] + tek[spt[i+9]] + ska[6];

                   if(inpt.length < 4) {
                       bas6 = '';
                       bas9 = '';
                   }
                   if(inpt.length > 6 && inpt.slice(5, 6) == 0) {
                     bas6 = bas6.replace(/Bin/g, '');
                   }
                   if(inpt.length < 7) {
                       bas9 = '';
                   } 
                   if(inpt.length > 9 && inpt.slice(1,3) == 000){
                       bas9 = bas9.replace(/Milyon/g, '');
                   }

                   if(inpt.length < 10) {
                    bas12 = '';
                 }
             }

         total = bas12 + bas9 + bas6 + bas3;
         total = total.replace(NaN, '');
         total = total.replace(undefined, '');

        document.getElementById('demo').innerHTML = 
            total;

     } 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2018-06-12T23:13:58.363

很多很好的答案。我需要我的印度（南亚）编号系统。我修改了上面的代码之一 - 将其附在此处，以防其他人需要它。在印度编号系统中，千位之后的组是 2 位数字，而不是西方系统中的 3 位数字。

```
var IS_SOUTH_ASIAN = true;
function int_to_words(int) {
  if (int === 0) return 'zero';

  var ONES_WORD  = ['','one','two','three','four','five','six','seven','eight','nine','ten','eleven','twelve','thirteen','fourteen','fifteen','sixteen','seventeen','eighteen','nineteen'];
  var TENS_WORD  = ['','','twenty','thirty','fourty','fifty','sixty','seventy','eighty','ninety'];
  var SCALE_WORD_WESTERN = ['','thousand','million','billion','trillion','quadrillion','quintillion','sextillion','septillion','octillion','nonillion'];
  var SCALE_WORD_SOUTH_ASIAN = ['','thousand','lakh','crore','arab','kharab','neel','padma','shankh','***','***'];

  var GROUP_SIZE = (typeof IS_SOUTH_ASIAN != "undefined" && IS_SOUTH_ASIAN) ? 2 : 3;
  var SCALE_WORD = (typeof IS_SOUTH_ASIAN != "undefined" && IS_SOUTH_ASIAN) ? SCALE_WORD_SOUTH_ASIAN : SCALE_WORD_WESTERN;

  // Return string of first three digits, padded with zeros if needed
  function get_first_3(str) {
    return ('000' + str).substr(-(3));
  }
  function get_first(str) { //-- Return string of first GROUP_SIZE digits, padded with zeros if needed, if group size is 2, make it size 3 by prefixing with a '0'
    return (GROUP_SIZE == 2 ? '0' : '') + ('000' + str).substr(-(GROUP_SIZE));
  }

  // Return string of digits with first three digits chopped off
  function get_rest_3(str) {
    return str.substr(0, str.length - 3);
  }
  function get_rest(str) { // Return string of digits with first GROUP_SIZE digits chopped off
    return str.substr(0, str.length - GROUP_SIZE);
  }

  // Return string of triplet convereted to words
  function triplet_to_words(_3rd, _2nd, _1st) {
    return  (_3rd == '0' ? '' : ONES_WORD[_3rd] + ' hundred ') + 
            (_1st == '0' ? TENS_WORD[_2nd] : TENS_WORD[_2nd] && TENS_WORD[_2nd] + '-' || '') + 
            (ONES_WORD[_2nd + _1st] || ONES_WORD[_1st]);  //-- 1st one returns one-nineteen - second one returns one-nine
  }

  // Add to result, triplet words with scale word
  function add_to_result(result, triplet_words, scale_word) {
    return triplet_words ? triplet_words + (scale_word && ' ' + scale_word || '') + ' ' + result : result;
  }

  function recurse (result, scaleIdx, first, rest) {
    if (first == '000' && rest.length === 0) return result;
    var newResult = add_to_result (result, triplet_to_words (first[0], first[1], first[2]), SCALE_WORD[scaleIdx]);
    return recurse (newResult, ++scaleIdx, get_first(rest), get_rest(rest));
  }

  return recurse ('', 0, get_first_3(String(int)), get_rest_3(String(int)));
} 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-04-30T13:12:54.403

虽然该系统确实使用了 for 循环，但它使用美国英语并且快速、准确且可扩展（您可以向“th”变量添加无限值，它们将被包含在内）。

此函数向后抓取 3 组数字，因此它可以获得`,`通常以数字形式分隔它们的数字组。然后将每组三个数字添加到一个仅包含 3 个数字的单词形式的数组中（例如：一百二十三）。然后它获取新的数组列表，并再次反转它，同时将`th`相同索引的 var 添加到字符串的末尾。

```
var ones = ['','one ','two ','three ','four ', 'five ','six ','seven ','eight ','nine ','ten ','eleven ','twelve ','thirteen ','fourteen ','fifteen ','sixteen ','seventeen ','eighteen ','nineteen '];
var tens = ['', '', 'twenty ','thirty ','forty ','fifty ', 'sixty ','seventy ','eighty ','ninety ', 'hundred '];
var th = ['', 'thousand ','million ','billion ', 'trillion '];

function numberToWord(number){
  var text = "";
  var size = number.length;

  var textList = [];
  var textListCount = 0;

  //get each 3 digit numbers
  for(var i = number.length-1; i >= 0; i -= 3){
    //get 3 digit group
    var num = 0;
    if(number[(i-2)]){num += number[(i-2)];}
    if(number[(i-1)]){num += number[(i-1)];}
    if(number[i]){num += number[i];}

    //remove any extra 0's from begining of number
    num = Math.floor(num).toString();

    if(num.length == 1 || num < 20){
      //if one digit or less than 20
      textList[textListCount] = ones[num];
    }else if(num.length == 2){
      //if 2 digits and greater than 20
      textList[textListCount] = tens[num[0]]+ones[num[1]];
    }else if(num.length == 3){
      //if 3 digits
      textList[textListCount] = ones[num[0]]+tens[10]+tens[num[1]]+ones[num[2]];
    }

    textListCount++;

  }

  //add the list of 3 digit groups to the string
  for(var i = textList.length-1; i >= 0; i--){
    if(textList[i] !== ''){text += textList[i]+th[i];} //skip if the number was 0
  }

  return text;
} 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2021-01-04T10:26:54.720

**也适用于十进制值的函数**

```
function amountToWords(amountInDigits){
    // American Numbering System
    var th = ['','thousand','million', 'billion','trillion'];

    var dg = ['zero','one','two','three','four', 'five','six','seven','eight','nine'];
    var tn = ['ten','eleven','twelve','thirteen', 'fourteen','fifteen','sixteen', 'seventeen','eighteen','nineteen'];
    var tw = ['twenty','thirty','forty','fifty', 'sixty','seventy','eighty','ninety'];
    function toWords(s){
      s = s.toString();
      s = s.replace(/[\, ]/g,'');
      if (s != parseFloat(s))
      return 'not a number';
      var x = s.indexOf('.');
      if (x == -1) x = s.length;
      if (x > 15) return 'too big';
      var n = s.split('');
      var str = '';
      var sk = 0;
      for (var i=0; i < x; i++){
        if ((x-i)%3==2){
          if (n[i] == '1') {
            str += tn[Number(n[i+1])] + ' ';
            i++; sk=1;
          } else if (n[i]!=0) {
              str += tw[n[i]-2] + ' ';sk=1;
            }
          } else if (n[i]!=0) {
            str += dg[n[i]] +' ';
            if ((x-i)%3==0)
            str += 'hundred ';
            sk=1;
          } if ((x-i)%3==1) {
            if (sk) str += th[(x-i-1)/3] + ' ';sk=0;
          }
        }
        if (x != s.length) {
          var y = s.length;
          str += 'point ';
          for (var i=x+1; i<y; i++) str += dg[n[i]] +' ';
        }
        return str.replace(/\s+/g,' ');
      }

      return toWords(amountInDigits);
  }
```

```
<input type="text" name="number" placeholder="Number OR Amount" onkeyup="word.innerHTML=amountToWords(this.value)" />
<div id="word"></div>
```

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2021-09-19T11:56:48.330

# 基于 ES2022 + 最快的 TypeScript 版本

[在 Typescript Playground 上进行测试](https://www.typescriptlang.org/play?target=8#code/MYGwhgzhAEByBMB1AEgSwHYBNXQN4ChpoB6Y6AIkDZIQIUhAKSEFlIQekhzDoAHAJ1QDcwAXAKbQIffqmDQOAsJgD26EAE9oALwEdZAFVkBOHQC5hfLugDmAbQC60ALysiAcgA+geEhAqJBPAZJCBpSCeASSEABSFonQCxIQD5IQAZIJ0AqSDDAQEgQp0BsSEBgSCdADkgwvydAMEhAAkgnWkAZSC9KJ0B0SCZIwE5IJ0AaSBr-QHFICNqQos9a6IZPelaM70AmSFr0vz7awFBIPMbASEgGWgD0+sWnQHBIN3o3FYbACEglvya90KK6leiQ+hCVpLr6U6XR+j8wo4nAfEh6aaO5wP2V9d+9TGgL8gAlIQBAkID2pCzhDAUlgSt0nCVhNAISQgB5IQE-MKDFbhPFLAG47aMEn7OHk46AVkgqdFKYTkoB+SDJjORkKp6KxVLm4SW5zCRI2ZOpwQaov8TIi3RpwXOMqS0XoMsezwl70+YQlc3SBUyBXWuvqgoKfilRuhRvp4KNSRZJoymKNXKNc2qwKiqqi63dTyidV9fiiZsDUXaoZiIQjdojowjUwjcyq6QCTgm6XoKbWwsFqbqZKzZoiueOxazAqzdoLqdVJY10yztFpjdudSa2aqtDbxq77aLYV7pYH3ei4PCg6rw-btcH9anhSZDDJDDbDgAdBA2CBUHwABT2IjQZwOA8ASgA3PhWJwePwhCIxBIpDJ5Ep2OBgAJDCITBZrDYj2qQAcSAxSInEGMJADRIJw3AibxMTTCI6icSCkMKAJBnXTdtz3Y8LyvIg2AAVwAI23CQHz4cRoGAeRuHUPcAA9v2MDBTFPFjfzwA8QAEPhoHQQx0CIgBbEj1FsaBGLXXizD4AALS9DykyT0FsACAAZoAAfiPDSNIcaAhPU6AAEZoCcJwBOgABSaB4BMrTdIcAzoAAahUwxGKUw81IA6TZNMBSfKIXj+I4Ti2MkhAUAwbA1zUDRtD0cxpOAeSwA4ABhWRMAEABBPddzUgBaAD4FPU9oAAKjMrSPLSjLstygq9zUjzTKqkroAAVngAAOSwQugVAADNoGK6AAD5oA0qqCGUohaPQERoG4SKzGipA0CwVAEvULRdB0VK13SzKcrywrd0msqzMq6BuoAFkG4aiDGibuHmg9lI4STuHco9oHSIpAY8jhXugABfA9oeU0bZF+3cwpGySNPPayZrRka3Lcr7Fpo+RVvWowuIAmKdvixLDpSxrzpaq6bvK+7atM+qpNOpqLtayaOq63qBqG76RvG3dPu4-GiF+gD-o8wzDI88m4r2rcwE-cxUGsWXQckCHYcPPXJb4oiODU8HWGh6H8FASAYBigBJXawDUhb2C4XhBCMR9JGkOQFGUKnkoMEm2KsSSrB8m93fvUQqKfH3X2UFXPw2v9JIcTR5NkIiICdzAnAAGTAABreSnCyjQpCcfKODAEinAAaSa2unFgVAQCwrcd13PDL1YSjqJdpbCf4+QBAgFPQ7sfHnAAeXQAQnE0AB3WRF-kqQF4AMSzjgnE3ngF4AZVQRinEPgR6PQJwAFFUFMeS+BbjAF80AQr+v3jL8XpeBBAei19QBwQQb89472AVffeo1wFnxPtA8+l9oG33vtA1u89wEdxwvuCWR4nAnnxvhA8y1VqCBWhPf8ODv5vz4IoABQCaHbzoXvMa1CYGMRYfAqhNCkEPxoagviigMFdx7gRQ88NEbIxwJpdGOAAA8dUsaoBxnjRaRD+J8CEqJcSUtoAAFl+DyTXKNEAsgEa7hwGQVm+F8aqOgLIDRYkJIARwHZVmEN7aO3QPtJKR01zEQgPJXc-E5EOV0qPCA6trCGBIeEvgmsJqyB0oDeWtj57hNkJEo8DhKrDT1pbQipFyKe1jgTdA9EgG7mYsHMwHEqmmHFoeZGgkBKaMcezQKwUDyMVUo5RJLlXLGRsABcyllrJ2QcoM2avTXINSMlJYafk2lvyCopHifFJBbUQA7bATsvHU2OrTZql0iqlSZlVFmbMDlcyuu1O6D1+YvQPO9SaU0hnKOUjY4mP4opkyQFs1AOyA5HROmdQ53NGZ3T5s9QW+Mnli0HotbRMtAbICIlgKQmBtZm3xgbKGB4xETQkajdGalMbSKUfU95w81opw2X8gFB1A7As5vTY5D1Tk1TqgDS5LKea3O6n1B5MKRZwqFpLP6AM5YA3cdszxScBARIlZi3WMMDxSD4MbU2PkLZXmtlAOAvz0B8BAPUyOd4inUWfL7N8gK9BBy+WYSe0Bw4iNNR7fuccXx+3fKrIQU9DzOAzlnHOWAnA6LbtueQTgABC4bUCRs0FwEAEar4AEUiIyETcmpwaaMBUSTXGq+582GxsjefNgeas0z2ABWgtLd5AlqvgAEQEMABtTgACqWAW1tsbURFqrb83xvRd2wdqb018HVQjPKA6s05q7TO2t59p1trLSQ5do6nBVr4P2ttsBZCX3XVmgAanfXNbbO3cFPYantfbL2mDPRuhNY870PtneOydHAX3Xo3XOr9NbS3Pqvf+wtAhy0CBEn+ttW791Ad3fu8DkHH1cHvd+rNnbWIoeA04XtsgMOvtrU+r5mG21pv4B+vDqHa1zoo1h8+RH8MAbA4a5DDGr7QZo3BhBLHKORtI5gGuxHR2CL3ELY8Z5e5EHdRSkpq0wm2FE5u+e39V4Zw3qA42TD-7H1Phw9+d8H5PyU6-d+n8QHL1-v-DOgDoHb2NjZ5hAgQHabgRfKhjm9PIPc4Zvi7nhNYIlmJ-Bw0bHRLTpZczhqaFWcYQwlhkD2GwJobplh3CWF8OoX54RcMEYErWZI2a0joByNZgo8l8Kh4rTUZJPRClDHGNMeYuqViVFUoSU42ydU3EGqNbswOx0NaSSCfZRJYSFVRLfjEuJu42uaV6YZQwkqPKjfSc1ogOL8VIzy5JErhXiv6VK7jaTFXVryWq-ourJiOBmJIPI1bh4Qtndq0Yy712LFzQ664oWNi2soxcWjL7VLtHuJ6zalK8k4mGRRWigQmAHBdc2YakAvWjr9fIfxCZWkABkmPbE9N0r9Qwv0tbJOB0j0Hx1+LnIBuknJ5sXUFOolJ5aZSmIpxqfaup8LGmSQCksjpykukAT8rN5y+35t6XXFINg0gioAGY7mTTsrL+6SuqoNXmTzmSfOVnKWRhFWpac4d4py5t-i+WsYkoK9jQ75WZP8U+axTafr8ak+R7apldMjnXROdAZXZz5Fco5p77mNzOoctZoHkFVy2oAwqncnqsuBYQ1hW8hF4ridSu60juVCqM9g2VcpHFaqNU6zp5bELY90cTSqjYGaLsudrIWT1fb+3gtUsECIGlAEHCmXgLLx6PUABsAB2fqOgDJt8q9APgWkALS44GIkSTtPxrnQLIJeu47tL3km3IQxUSrdUxqnogitdqnTogxQJle7s4pC+ZOf6hF-L4EKv9fm-J8QFkLxGSshTDd17-3kPqPuPtPgkj1Log2tPqgCJGPAtgDIEuZN1DPmrkeCJBAFkh-l-i-sYn-j3hpAAHqmSD4PTmT6AAA66AySDgOgkuoGMuu4pkPUKBDgFBJO20Ss5+pSl+1BtB0u-ADBTB2SdOrADe-ETeLe+kH+aileXeR4ABA+I+Y+E+hC7es+7Aj+CMS+6AK+a+G+W+O+vEE06AB+00s0x++qCOMqnBLOV+IgN+KhU+fA9+6hC+mhz+r+ehmB3+OB-+feChwBWk26vUEBo6UBMB482sCBdyyBEqaBGBDhn+3hv+-+BBRBJBRkrBEqNBa4Uu9BjBzBmRCsBqVhzO3B2RuR-B+RQha2Iioh1kAEzeEhUh0+MhBu3e8hQBShRulKjhah8+T+2hL+uh7+B42+u+RhJhR+R2FhDsPWpR5SHefA9hPRxCzh-RbhgxHhIxKxWBP+uBHRihIBQR4BYaoRVE4RcBHkURSB72sscRd2RCuxPheBhB8Aw+6R5BlBWRvBeR8Ag+BRXxRRCOcxF+5SPBORdBlRfxlUzWFsvcixIxQAA)

### 印地语版本

```
class N2WHindi {
  // "शून्य&quot;
  private static readonly zeroTo99: string[] =
    '|एक|दो|तीन|चार|पाँच|छः|सात|आठ|नौ|दश|ग्यारह|बारह|तेरह|चौदह|पन्द्रह|सोलह|सत्रह|अठारह|उन्नीस|बीस|इक्कीस|बाईस|तेईस|चौबीस|पच्चीस|छब्बीस|सत्ताईस|अट्ठाईस|उनतीस|तीस|इकतीस|बत्तीस|तैंतीस|चौंतीस|पैंतीस|छत्तीस|सैंतीस|अड़तीस|उनतालीस|चालीस|इकतालीस|बयालीस|तैंतालीस|चौवालीस|पैंतालीस|छियालीस|सैंतालीस|अड़तालीस|उनचास|पचास|इक्यावन|बावन|तिरपन|चौवन|पचपन|छप्पन|सत्तावन|अट्ठावन|उनसठ|साठ|इकसठ|बासठ|तिरसठ|चौंसठ|पैंसठ|छियासठ|सड़सठ|अड़सठ|उनहत्तर|सत्तर|इकहत्तर|बहत्तर|तिहत्तर|चौहत्तर|पचहत्तर|छिहत्तर|सतहत्तर|अठहत्तर|उन्यासी|अस्सी|इक्यासी|बयासी|तिरासी|चौरासी|पचासी|छियासी|सत्तासी|अट्ठासी|नवासी|नब्बे|इक्यानबे|बानबे|तिरानबे|चौरानबे|पंचानबे|छियानबे|सत्तानबे|अट्ठानबे|निन्यान्बे'.split(
      '|'
    );

  private static readonly place: string[] = 'हज़ार|लाख|करोड़|अरब|खरब|नील'.split('|');

  public static convert(x: string): string {
    let n: number = x.length;
    x = n == 0 ? '00' : n == 1 || n % 2 == 0 ? '0' + x : x;
    n = x.length;
    let r: string = N2WHindi.zeroTo99[x.charCodeAt((n -= 2)) * 10 + x.charCodeAt(n + 1) - 528];
    if (n > 0) {
      const v: string = N2WHindi.zeroTo99[x.charCodeAt((n -= 1)) - 48];
      if (v) {
        r = v + ' सौ ' + r;
      }
    }
    for (let i = 0; n > 0; i++) {
      const v: string = N2WHindi.zeroTo99[x.charCodeAt((n -= 2)) * 10 + x.charCodeAt(n + 1) - 528];
      if (v) {
        r = v + ' ' + N2WHindi.place[i] + ' ' + r;
      }
    }
    return r;
  }
} 
```

### 印度英文版

```
class N2WIndian {
  private static readonly zeroTo99: string[] = [];
  private static readonly place: string[] = 'Thousand|Lakh|Crore|Arab|Kharab|Nil'.split('|');

  static {
    const ones: string[] =
      '|One|Two|Three|Four|Five|Six|Seven|Eight|Nine|Ten|Eleven|Twelve|Thirteen|Fourteen|Fifteen|Sixteen|Seventeen|Eighteen|Nineteen'.split(
        '|'
      );

    const tens: string[] = '||Twenty|Thirty|Forty|Fifty|Sixty|Seventy|Eighty|Ninety'.split('|');

    for (let i = 0; i < 100; i++) {
      const t: number = Math.floor(i / 10);
      const o: number = i % 10;
      N2WIndian.zeroTo99.push(t < 2 ? ones[i] : tens[t] + (o ? ' ' + ones[o] : ''));
    }
  }

  public static convert(x: string): string {
    let n: number = x.length;
    x = n == 0 ? '00' : n == 1 || n % 2 == 0 ? '0' + x : x;
    n = x.length;
    let r = N2WIndian.zeroTo99[x.charCodeAt((n -= 2)) * 10 + x.charCodeAt(n + 1) - 528];
    if (n >= 1) {
      const v: string = N2WIndian.zeroTo99[x.charCodeAt((n -= 1)) - 48];
      if (v) {
        r = v + ' Hundred ' + r;
      }
    }
    for (let i = 0; n > 0; i++) {
      const v: string = N2WIndian.zeroTo99[x.charCodeAt((n -= 2)) * 10 + x.charCodeAt(n + 1) - 528];
      if (v) {
        r = v + ' ' + N2WIndian.place[i] + ' ' + r;
      }
    }
    return r;
  }
} 
```

### 国际版

```
class N2WIntl {
  private static readonly zeroTo999: string[] = [];

  private static readonly place =
    '|Thousand|Million|Billion|Trillion|Quadrillion|Quintillion|Sextillion|Septillion|Octillion|Nonillion|Decillion|Undecillion|Duodecillion|Tredecillion|Quattuordecillion|Quindecillion|Sedecillion|Septendecillion|Octodecillion|Novendecillion|Vigintillion|Unvigintillion|Duovigintillion|Tresvigintillion|Quattuorvigintillion|Quinvigintillion|Sesvigintillion|Septemvigintillion|Octovigintillion|Novemvigintillion|Trigintillion|Untrigintillion|Duotrigintillion|Trestrigintillion|Quattuortrigintillion|Quintrigintillion|Sestrigintillion|Septentrigintillion|Octotrigintillion|Noventrigintillion|Quadragintillion'.split(
      '|'
    );

  static {
    const ones =
      '|One|Two|Three|Four|Five|Six|Seven|Eight|Nine|Ten|Eleven|Twelve|Thirteen|Fourteen|Fifteen|Sixteen|Seventeen|Eighteen|Nineteen'.split(
        '|'
      );
    const tens = '||Twenty|Thirty|Forty|Fifty|Sixty|Seventy|Eighty|Ninety'.split('|');
    for (let i = 0; i < 100; i++) {
      const t = Math.floor(i / 10);
      const o = i % 10;
      N2WIntl.zeroTo999[i] = t < 2 ? ones[i] : tens[t] + (o == 0 ? '' : ' ' + ones[o]);
    }
    for (let i = 100; i < 1000; i++) {
      const h = Math.floor(i / 100);
      const t = Math.floor(i / 10) % 10;
      const o = i % 10;
      const r = N2WIntl.zeroTo999[h] + ' Hundred';
      N2WIntl.zeroTo999[i] = t == 0 && o == 0 ? r : r + ' ' + N2WIntl.zeroTo999[t * 10 + o];
    }
  }

  public static convert(x: string): string {
    let n = x.length;
    x = n == 0 ? '000' : '0'.repeat((3 - (n % 3)) % 3) + x;
    n = x.length;
    let r: string = '';
    for (let i = 0; n > 0; i++) {
      const v: string =
        N2WIntl.zeroTo999[x.charCodeAt((n -= 3)) * 100 + x.charCodeAt(n + 1) * 10 + x.charCodeAt(n + 2) - 5328];
      if (v) {
        r = v + ' ' + N2WIntl.place[i] + ' ' + r;
      }
    }
    return r;
  }
} 
```

```
const test = () => {
  {
    let n = 5000000;
    const test: string = '1234567890';
    const t0 = performance.now();
    while (n-- > 0) {
      N2WHindi.convert(test);
    }
    const t1 = performance.now();
    console.log('1234567890 to 5 Million times: ' + (t1 - t0) + 'ms');
    console.log('10^16 -1 :\n' + '9'.repeat(15) + '\n' + N2WHindi.convert('9'.repeat(15)));
  }

  {
    let n = 5000000;
    const test: string = '1234567890';
    const t0 = performance.now();
    while (n-- > 0) {
      N2WIndian.convert(test);
    }
    const t1 = performance.now();
    console.log('1234567890 to 5 Million times: ' + (t1 - t0) + 'ms');
    console.log('10^16 -1 :\n' + '9'.repeat(15) + '\n' + N2WIndian.convert('9'.repeat(15)));
  }

  {
    let n = 5000000;
    const test: string = '1234567890';
    const t0 = performance.now();
    while (n-- > 0) {
      N2WIntl.convert(test);
    }
    const t1 = performance.now();
    console.log('1234567890 to 5 Million times: ' + (t1 - t0) + 'ms');
    console.log('10^127 -1 :\n' + '9'.repeat(126) + '\n' + N2WIntl.convert('9'.repeat(126)));
  }
};

test(); 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-06-18T20:59:02.767

这也是对[naomik 出色帖子的](https://stackoverflow.com/a/30524915/4585712)回应！不幸的是，我没有代表在正确的地方发帖，但我把它留在这里以防它可以帮助任何人。

如果您需要英式英语书面形式，则需要对代码进行一些修改。英式英语在几个方面与美式英语不同。基本上你需要在两个特定的地方插入“和”这个词。

1.  **一百后**假设有十个和一个。例如一百一十。一千一十七。**不是**一千一百和。
2.  在某些边缘，**在一千，一百万，十亿等之后**。当没有更小的单位时。例如一千零十。一百万四十四。**不是**一百万和一千。

第一种情况可以通过检查 makeGroup 方法中的 10 和 1 并在它们存在时附加“和”来解决。

```
makeGroup = ([ones,tens,huns]) => {
var adjective = this.num(ones) ? ' hundred and ' : this.num(tens) ? ' hundred and ' : ' hundred';
return [
  this.num(huns) === 0 ? '' : this.a[huns] + adjective,
  this.num(ones) === 0 ? this.b[tens] : this.b[tens] && this.b[tens] + '-' || '',
  this.a[tens+ones] || this.a[ones]
].join(''); 
```

};

第二种情况更复杂。它相当于

*   如果倒数第二个数字为零，则将“和”添加到“一百万、一千”或“十亿”。例如

1,100, **0** 57 100 万**10057**。5,000, **0** 06 五**百万和**六

我认为这可以通过使用过滤器函数在@naomik 的代码中实现，但我无法弄清楚如何。最后，我决定遍历返回的单词数组并使用 indexOf 查找最终元素中缺少单词“hundred”的实例。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2018-06-09T16:31:30.370

我刚刚编写[了 paisa.js](https://github.com/sudhirj/paisa.js)来执行此操作，它也可以正确处理数以亿计的数字，可以检查一下。核心看起来有点像这样：

```
const regulars = [
  {
    1: 'one', 2: 'two', 3: 'three', 4: 'four', 5: 'five', 6: 'six', 7: 'seven', 8: 'eight', 9: 'nine'
  },
  {
    2: 'twenty', 3: 'thirty', 4: 'forty', 5: 'fifty', 6: 'sixty', 7: 'seventy', 8: 'eighty', 9: 'ninety'
  }
]

const exceptions = {
  10: 'ten',
  11: 'eleven',
  12: 'twelve',
  13: 'thirteen',
  14: 'fourteen',
  15: 'fifteen',
  16: 'sixteen',
  17: 'seventeen',
  18: 'eighteen',
  19: 'nineteen'
}

const partInWords = (part) => {
  if (parseInt(part) === 0) return
  const digits = part.split('')
  const words = []
  if (digits.length === 3) {
    words.push([regulars[0][digits.shift()], 'hundred'].join(' '))
  }
  if (exceptions[digits.join('')]) {
    words.push(exceptions[digits.join('')])
  } else {
    words.push(digits.reverse().reduce((memo, el, i) => {
      memo.unshift(regulars[i][el])
      return memo
    }, []).filter(w => w).join(' '))
  }
  return words.filter(w => w.trim().length).join(' and ')
} 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2020-05-03T13:15:12.390

我的解决方案基于 Juan Gaitán 的印度货币解决方案，金额高达千万。

```
function valueInWords(value) {
    let ones = ['', 'one', 'two', 'three', 'four',
            'five', 'six', 'seven', 'eight', 'nine',
            'ten', 'eleven', 'twelve', 'thirteen', 'fourteen',
            'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'];   
    let tens = ['twenty','thirty', 'forty','fifty', 'sixty', 'seventy', 'eighty', 'ninety'];
    let digit = 0;   
    if (value < 20) return ones[value];   
    if (value < 100) {     
        digit = value % 10; //remainder     
        return tens[Math.floor(value/10)-2] + " " + (digit > 0 ? ones[digit] : "");   
    }
    if (value < 1000) {    
         return ones[Math.floor(value/100)] + " hundred " + (value % 100 > 0 ? valueInWords(value % 100) : "");   
    }   
    if (value < 100000) {     
        return valueInWords(Math.floor(value/1000)) + " thousand " + (value % 1000 > 0 ? valueInWords(value % 1000) : "");   
    }   
    if (value < 10000000) {     
        return valueInWords(Math.floor(value/100000)) + " lakh " + (value % 100000 > 0 ? valueInWords(value % 100000) : "");   
    }   
    return valueInWords(Math.floor(value/10000000)) + " crore " + (value % 10000000 > 0 ? valueInWords(value % 10000000) : ""); 
} 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-07-27T06:12:23.217

```
 function numberToEnglish( n ) {

        var string = n.toString(), units, tens, scales, start, end, chunks, chunksLen, chunk, ints, i, word, words, and = 'and';

        /* Remove spaces and commas */
        string = string.replace(/[, ]/g,"");

        /* Is number zero? */
        if( parseInt( string ) === 0 ) {
            return 'zero';
        }

        /* Array of units as words */
        units = [ '', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen' ];

        /* Array of tens as words */
        tens = [ '', '', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety' ];

        /* Array of scales as words */
        scales = [ '', 'thousand', 'million', 'billion', 'trillion', 'quadrillion', 'quintillion', 'sextillion', 'septillion', 'octillion', 'nonillion', 'decillion', 'undecillion', 'duodecillion', 'tredecillion', 'quatttuor-decillion', 'quindecillion', 'sexdecillion', 'septen-decillion', 'octodecillion', 'novemdecillion', 'vigintillion', 'centillion' ];

        /* Split user argument into 3 digit chunks from right to left */
        start = string.length;
        chunks = [];
        while( start > 0 ) {
            end = start;
            chunks.push( string.slice( ( start = Math.max( 0, start - 3 ) ), end ) );
        }

        /* Check if function has enough scale words to be able to stringify the user argument */
        chunksLen = chunks.length;
        if( chunksLen > scales.length ) {
            return '';
        }

        /* Stringify each integer in each chunk */
        words = [];
        for( i = 0; i < chunksLen; i++ ) {

            chunk = parseInt( chunks[i] );

            if( chunk ) {

                /* Split chunk into array of individual integers */
                ints = chunks[i].split( '' ).reverse().map( parseFloat );

                /* If tens integer is 1, i.e. 10, then add 10 to units integer */
                if( ints[1] === 1 ) {
                    ints[0] += 10;
                }

                /* Add scale word if chunk is not zero and array item exists */
                if( ( word = scales[i] ) ) {
                    words.push( word );
                }

                /* Add unit word if array item exists */
                if( ( word = units[ ints[0] ] ) ) {
                    words.push( word );
                }

                /* Add tens word if array item exists */
                if( ( word = tens[ ints[1] ] ) ) {
                    words.push( word );
                }

                /* Add 'and' string after units or tens integer if: */
                if( ints[0] || ints[1] ) {

                    /* Chunk has a hundreds integer or chunk is the first of multiple chunks */
                    if( ints[2] || ! i && chunksLen ) {
                        words.push( and );
                    }

                }

                /* Add hundreds word if array item exists */
                if( ( word = units[ ints[2] ] ) ) {
                    words.push( word + ' hundred' );
                }

            }

        }

        return words.reverse().join( ' ' );

    }

// - - - - - Tests - - - - - -
function test(v) {
  var sep = ('string'==typeof v)?'"':'';
  console.log("numberToEnglish("+sep + v.toString() + sep+") = "+numberToEnglish(v));
}
test(2);
test(721);
test(13463);
test(1000001);
test("21,683,200,000,621,384");
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2020-10-18T13:40:15.617

对于那些正在寻找英制/英文命名约定的人。

基于@Salman 的[回答](https://stackoverflow.com/a/14767071/2848551)

```
var a = ['','one ','two ','three ','four ', 'five ','six ','seven ','eight ','nine ','ten ','eleven ','twelve ','thirteen ','fourteen ','fifteen ','sixteen ','seventeen ','eighteen ','nineteen '];
var b = ['', '', 'twenty','thirty','forty','fifty', 'sixty','seventy','eighty','ninety'];

function inWords (num) {
    if ((num = num.toString()).length > 12) return 'overflow';
    n = ('00000000000' + num).substr(-12).match(/^(\d{3})(\d{3})(\d{3})(\d{1})(\d{2})$/);
    if (!n) return; var str = '';
    str += (n[1] != 0) ? (Number(n[1]) > 99 ? this.a[Number(n[1][0])] + 'hundred ' : '') + (a[Number(n[1])] || b[n[1][1]] + ' ' + a[n[1][2]]) + 'billion ' : '';
    str += (n[2] != 0) ? (Number(n[2]) > 99 ? this.a[Number(n[2][0])] + 'hundred ' : '') + (a[Number(n[2])] || b[n[2][1]] + ' ' + a[n[2][2]]) + 'million ' : '';
    str += (n[3] != 0) ? (Number(n[3]) > 99 ? this.a[Number(n[3][0])] + 'hundred ' : '') + (a[Number(n[3])] || b[n[3][1]] + ' ' + a[n[3][2]]) + 'thousand ' : '';
    str += (n[4] != 0) ? (a[Number(n[4])] || b[n[4][0]] + ' ' + a[n[4][1]]) + 'hundred ' : '';
     str += (Number(n[5]) !== 0) ? ((str !== '') ? 'and ' : '') +
                (this.a[Number(n[5])] || this.b[n[5][0]] + ' ' +
                    this.a[n[5][1]]) + '' : '';
    return str;
}

document.getElementById('number').onkeyup = function () {
    document.getElementById('words').innerHTML = inWords(document.getElementById('number').value);
};
```

```
<span id="words"></span>
<input id="number" type="text" />
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2020-12-08T22:30:55.793

想到的最干净，最简单的方法：

```
const numberText = {
  1: 'one',
  2: 'two',
  3: 'three',
  4: 'four',
  5: 'five',
  6: 'six',
  7: 'seven',
  8: 'eight',
  9: 'nine',
  10: 'ten',
  11: 'eleven',
  12: 'twelve',
  13: 'thirteen',
  14: 'fourteen',
  15: 'fifteen',
  16: 'sixteen',
  17: 'seventeen',
  18: 'eighteen',
  19: 'nineteen',
  20: 'twenty',
  30: 'thirty',
  40: 'forty',
  50: 'fifty',
  60: 'sixty',
  70: 'seventy',
  80: 'eighty',
  90: 'ninety',
  100: 'hundred',
  1000: 'thousand',
}

const numberValues = Object.keys(numberText)
  .map((val) => Number(val))
  .sort((a, b) => b - a)

const convertNumberToEnglishText = (n) => {
  if (n === 0) return 'zero'
  if (n < 0) return 'negative ' + convertNumberToEnglishText(-n)

  let num = n
  let text = ''

  for (const numberValue of numberValues) {
    const count = Math.trunc(num / numberValue)

    if (count < 1) continue

    if (numberValue >= 100) text += convertNumberToEnglishText(count) + ' '

    text += numberText[numberValue] + ' '
    num -= count * numberValue
  }

  if (num !== 0) throw Error('Something went wrong!')

  return text.trim()
} 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2021-03-17T08:38:04.260

我得到和使用的最简单的可能是来自 Ben E。我对他的代码进行了修改，因为当您尝试转换 500,000.00 时，它只会返回例如“五百”。我只是添加了一行条件代码来修复它。还增加了给出最后两位小数的规定。我现在用它在打印支票时将金额转换为单词。这是我添加到其中的修订：

```
if (Math.floor((number%(100*Math.pow(1000,i))/Math.pow(1000,i))) == 0) {
    word = first[Math.floor(tempNumber/(100*Math.pow(1000,i)))] + 'Hundred ' + mad[i] 
        + ' ' + word;
} else { 
```

我很难在此处粘贴代码，但如果您需要任何说明，请告诉我

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2021-06-30T06:27:18.490

由@pramod kharade 回答

简化

```
function NumToWord(inputNumber) {
    var str = new String(inputNumber)
    var splt = str.split("");
    var rev = splt.reverse();
    var once = ['Zero', ' One', ' Two', ' Three', ' Four', ' Five', ' Six', ' Seven', ' Eight', ' Nine'];
    var twos = ['Ten', ' Eleven', ' Twelve', ' Thirteen', ' Fourteen', ' Fifteen', ' Sixteen', ' Seventeen', ' Eighteen', ' Nineteen'];
    var tens = ['', 'Ten', ' Twenty', ' Thirty', ' Forty', ' Fifty', ' Sixty', ' Seventy', ' Eighty', ' Ninety'];

    numLength = rev.length;
    var word = new Array();
    var j = 0;

    for (i = 0; i < numLength; i++) {
        switch (i) {

            case 0:
                if ((rev[i] == 0) || (rev[i + 1] == 1)) {
                    word[j] = '';
                }
                else {
                    word[j] = '' + once[rev[i]];
                }
                word[j] = word[j];
                break;

            case 1:
                aboveTens();
                break;

            case 2:
                if (rev[i] == 0) {
                    word[j] = '';
                }
                else if ((rev[i - 1] == 0) || (rev[i - 2] == 0)) {
                    word[j] = once[rev[i]] + " Hundred ";
                }
                else {
                    word[j] = once[rev[i]] + " Hundred and";
                }
                break;

            case 3:
                if (rev[i] == 0 || rev[i + 1] == 1) {
                    word[j] = '';
                }
                else {
                    word[j] = once[rev[i]];
                }
                if ((rev[i + 1] != 0) || (rev[i] > 0)) {
                    word[j] = word[j] + " Thousand";
                }
                break;

            case 4:
                aboveTens();
                break;

            case 5:
                if ((rev[i] == 0) || (rev[i + 1] == 1)) {
                    word[j] = '';
                }
                else {
                    word[j] = once[rev[i]];
                }
                if (rev[i + 1] !== '0' || rev[i] > '0') {
                    word[j] = word[j] + " Lakh";
                }

                break;

            case 6:
                aboveTens();
                break;

            case 7:
                if ((rev[i] == 0) || (rev[i + 1] == 1)) {
                    word[j] = '';
                }
                else {
                    word[j] = once[rev[i]];
                }
                if (rev[i + 1] !== '0' || rev[i] > '0') {
                    word[j] = word[j] + " Crore";
                }                
                break;

            case 8:
                aboveTens();
                break;

            default: break;
        }
        j++;
    }

    function aboveTens() {
        if (rev[i] == 0) { word[j] = ''; }
        else if (rev[i] == 1) { word[j] = twos[rev[i - 1]]; }
        else { word[j] = tens[rev[i]]; }
    }

    word.reverse();
    var finalOutput = '';
    for (i = 0; i < numLength; i++) {
        finalOutput = finalOutput + word[i];
    }
return finalOutput;
}

console.log(NumToWord(123))
console.log(NumToWord(12345678))
console.log(NumToWord(12334543))
console.log(NumToWord(6789876123))
```

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2021-09-08T19:25:17.120

西班牙语转换

```
class Converter {
constructor() {
    this.unit = ['CERO', 'UN', 'DOS', 'TRES', 'CUATRO', 'CINCO', 'SEIS', 'SIETE', 'OCHO', 'NUEVE'];
    this.units = ['CERO', 'UNO', 'DOS', 'TRES', 'CUATRO', 'CINCO', 'SEIS', 'SIETE', 'OCHO', 'NUEVE'];
    this.tenToSixteen = ['DIEZ', 'ONCE', 'DOCE', 'TRECE', 'CATORCE', 'QUINCE', 'DIECISEIS'];
    this.tens = ['TREINTA', 'CUARENTA', 'CINCUENTA', 'SESENTA', 'SETENTA', 'OCHENTA', 'NOVENTA'];
    this.monedaSingular = " PESO";
    this.monedaPlural = " PESOS";
    this.monedaMillon = " DE PESOS";
    this.centavoSingular = " CENTAVO"
    this.centavoPlural = " CENTAVOS"
    this.elMessage = document.getElementById('message');
    this.addListener();
}

addListener() {
    let elInput = document.getElementById('field-number');
    elInput.addEventListener('keyup', () => {
        if (elInput.value !== '') {
            this.convertToText(elInput.value);
        } else {
            this.elMessage.innerText = '';
        }
    });
}
convertToText(number) {
    number = this.deleteZerosLeft(number);
    if (!this.validateNumber(number)) {
        this.elMessage.innerText = 'Sólo se aceptan números enteros positivos.';
        return;
    }
    let num = number;
    number = number.split(".")[0];
    let entero = this.getName(number);
    let moneda;
    if (parseInt(number) == 1) {
        //this.elMessage.innerText = 
        moneda = entero + this.monedaSingular;
    } else {
        moneda = entero + this.monedaPlural;
    }
    if (num.indexOf('.') >= 0) {
        let d = num.split(".")[1];
        d = this.getName(d);
        if (parseInt(d) == 0) {
            moneda = moneda;
        } else if (parseInt(d) == 1) {
            moneda = moneda + " CON " + d + " " + this.centavoSingular;
        } else {
            moneda = moneda + " CON " + d + " " + this.centavoPlural;
        }
    }
    this.elMessage.innerText = moneda;
}

// Elimina los ceros a la izquierda
deleteZerosLeft(number) {
    let i = 0;
    let isZero = true;
    for (i = 0; i < number.length; i++) {
        if (number.charAt(i) != 0) {
            isZero = false;
            break;
        }
    }
    return isZero ? '0' : number.substr(i);
}

validateNumber(number) {
    // Validar que la cadena sea un número y que no esté vacía
    if (isNaN(number) || number === '') {
        return false;
    }
    // Validar que el número no sea negativo
    if (number.indexOf('-') >= 0) {
        return false;
    }
    return true;
}

getName(number) {
    number = this.deleteZerosLeft(number);

    if (number.length === 1) {
        return this.getUnits(number);
    }
    if (number.length === 2) {
        return this.getTens(number);
    }
    if (number.length === 3) {
        return this.getHundreds(number);
    }
    if (number.length < 7) {
        return this.getThousands(number);
    }
    if (number.length < 13) {
        return this.getPeriod(number, 6, 'MILLON');
    }
    if (number.length < 19) {
        return this.getPeriod(number, 12, 'BILLON');
    }
    return 'Número demasiado grande.';
}

getUnits(number) {
    let numberInt = parseInt(number);
    return this.unit[numberInt];
}

getTens(number) {
    // Obtener las unidades
    let units = number.charAt(1);

    if (number < 17) {
        return this.tenToSixteen[number - 10];
    }
    if (number < 20) {
        return 'DIECI' + this.getUnits(units);
    }
    // Nombres especiales
    switch (number) {
        case '20':
            return 'VEINTE';
        case '22':
            return 'VEINTIDOS';
        case '23':
            return 'VEINTITRES';
        case '26':
            return 'VEINTISEIS';
    }
    if (number < 30) {
        return 'VEINTI' + this.getUnits(units);
    }
    let name = this.tens[number.charAt(0) - 3];
    if (units > 0) {
        name += ' Y ' + this.getUnits(units);
    }
    return name;
}

getHundreds(number) {
    let name = '';
    // Obtener las centenas
    let hundreds = number.charAt(0);
    // Obtener las decenas y unidades
    let tens = number.substr(1);

    if (number == 100) {
        return 'CIEN';
    }
    // Nombres especiales
    switch(hundreds) {
        case '1':
            name = 'CIENTO';
            break;
        case '5':
            name = 'QUINIENTOS';
            break;
        case '7':
            name = 'SETECIENTOS';
            break;
        case '9':
            name = 'NOVECIENTOS';
    }
    if (name === '') {
        name = this.getUnits(hundreds) + 'CIENTOS';
    }
    if (tens > 0) {
        name += ' ' + this.getName(tens);
    }
    return name;
}

getThousands(number) {
    let name = 'MIL';
    // Obtener cuantos dígitos están en los miles
    let thousandsLength = number.length - 3;
    // Obtener los miles
    let thousands = number.substr(0, thousandsLength);
    // Obtener las centenas, decenas y unidades
    let hundreds = number.substr(thousandsLength);

    if (thousands > 1) {
        // Se reemplaza la palabra uno por un en numeros como 21000, 31000, 41000, etc.
        name = this.getName(thousands).replace('UNO', 'UN') + ' MIL';
    }
    if (hundreds > 0) {
        name += ' ' + this.getName(hundreds);
    }
    return name;
}

// Obtiene periodos, por ejemplo: millones, billones, etc.
getPeriod(number, digitsToTheRight, periodName) {
    let name = 'UN ' + periodName;
    // Obtener cuantos dígitos están dentro del periodo
    let periodLength = number.length - digitsToTheRight;
    // Obtener los dítos del periodo
    let periodDigits = number.substr(0, periodLength);
    // Obtener los digitos previos al periodo
    let previousDigits = number.substr(periodLength);

    if (periodDigits > 1) {
        name = this.getName(periodDigits).replace('UNO', 'UN') + ' ' + periodName.replace('Ó', 'O') + 'ES';
    }
    if (previousDigits > 0) {
        name += ' ' + this.getName(previousDigits);
    }
    return name;
} 
```

}

新转换器（）；

* * *

## 回答 #31

> 赞同：-1
> 
> 时间：2018-10-06T09:48:46.920

```
 var units = ["", "one", "two", "three", "four", "five", "six", "seven", "eight", "nine"];
var tens = ["", "", "twenty", "thirty", "forty", "fifty", "sixty", "seventy", "eighty", "ninety"];

function convert7digitIntoWords(num) {
    var remainder = num % 1000000
    var hun = num - remainder;
    var div = Math.floor(num / 100000);
    if (remainder !== 0)
        return (convert2digitIntoWords(div) + " lakhs " + convert5digitIntoWords(remainder % 100000))
    else
        return (convert2digitIntoWords(div) + " lakhs ")
}

function convert6digitIntoWords(num) {
    var remainder = num % 100000
    var hun = num - remainder;
    var div = Math.floor(num / 100000);
    if (remainder !== 0)
        return (units[div] + " lakh " + convert5digitIntoWords(remainder))
    else
        return (units[div] + " lakh ")
}

function convert5digitIntoWords(num) {
    var remainder = num % 10000
    var hun = num - remainder;
    var div = Math.floor(num / 1000);
    if (remainder !== 0)
        return (convert2digitIntoWords(div) + " thousand " + convert3digitIntoWords(remainder % 1000))
    else
        return (convert2digitIntoWords(div) + " thousand")
}

function convert4digitIntoWords(num) {
    var remainder = num % 1000
    var hun = num - remainder;
    var div = Math.floor(num / 1000);
    if (remainder !== 0)
        return (units[div] + " thousand " + convert3digitIntoWords(remainder))
    else
        return (units[div] + " thousand")
}

function convert3digitIntoWords(num) {
    var remainder = num % 100
    var hun = num - remainder;
    var div = Math.floor(num / 100);
    if (remainder !== 0)
        return (units[div] + " hundred " + convert2digitIntoWords(remainder))
    else
        return (units[div] + " hundred ")
}

function convert2digitIntoWords(num) {
    var remainder = num % 10;
    var div = Math.floor(num / 10);
    return (tens[div] + " " + convertNumIntoWords(remainder));
}

function convertNumIntoWords(num) {

    switch (("" + num).length) {
        case 1:
            return units[num];
        case 2:
            return convert2digitIntoWords(num);
        case 3:
            return convert3digitIntoWords(num)
        case 4:
            return convert4digitIntoWords(num)
        case 5:
            return convert5digitIntoWords(num)
        case 6:
            return convert6digitIntoWords(num)
        case 7:
            return convert7digitIntoWords(num)
        default:
            return "cannot be converted"
    }
}

console.log(convertNumIntoWords(3445125)); 
```

* * *

## 回答 #32

> 赞同：-1
> 
> 时间：2019-07-04T06:24:42.023

使用 JavaScript 和 html 将数字转换为法语单词 - 原始法语单词

```
 <html>
            <head>
                <title>Number to word</title>

                <script>
                    function toWords() {
                        var s = document.getElementById('value').value;
                        var th = ['','mille','million', 'milliard','billion'];
                        var dg = ['zéro','un','deux','trois','quatre', 'cinq','six','sept','huit','neuf'];
                        var tn = 

    ['dix','onze','douze','treize', 'quatorze','quinze','seize', 'dix-sept','dix-huit','dix-neuf'];
                    var tw = ['vingt','trente','quarante','cinquante', 'soixante','soixante-dix','quatre-vingt','quatre-vingt-dix'];
                    s = s.toString();
                    s = s.replace(/[\, ]/g,'');
                    if (s != parseFloat(s)) return 'not a number';
                    var x = s.indexOf('.');
                    if (x == -1)
                        x = s.length;
                    if (x > 15)
                        return 'too big';
                    var n = s.split(''); 
                    var str = '';
                    var sk = 0;
                    for (var i=0;   i < x;  i++) {
                        if ((x-i)%3==2) { 
                            if (n[i] == '1') {

                                str += tn[Number(n[i+1])] + ' ';
                                i++;
                                sk=1;
                            } else if (n[i]!=0) { 
                                if(s!=21 && s!=31 && s!=41 && s!=51 && s!=61 && s!=71 && s!=72 && s!=73 && s!=74 && s!=75 && s!=76 && s!=100 && s!=91 && s!=92 && s!=93 && s!=94 && s!=95 && s!=96){
                                if(s==20 || s==30 || s==40 || s==50 || s==60 || s==70 || s==80 || s==90){
                                str += tw[n[i]-2] + ' ';} // for not to display hyphens for 20,30...90 
                                else{
                                str += tw[n[i]-2] + '-';}
                                sk=1;
                                }
                            }
                        } else if (n[i]!=0) {
                            if(s!=21 && s!=31 && s!=41 && s!=51 && s!=61 && s!=71 && s!=72 && s!=73 && s!=74 && s!=75 && s!=76 && s!=100 && s!=91 && s!=92 && s!=93 && s!=94 && s!=95 && s!=96){

                            str += dg[n[i]] +' ';
                            if ((x-i)%3==0) str += 'hundert ';  // for start from 101 - 

                            sk=1;
                            }
                        }
                        if ((x-i)%3==1) {
                            if(s!=21 && s!=31 && s!=41 && s!=51 && s!=61 && s!=71 && s!=72 && s!=73 && s!=74 && s!=75 && s!=76 && s!=100 && s!=91 && s!=92 && s!=93 && s!=94 && s!=95 && s!=96){
                            if (sk)
                                str += th[(x-i-1)/3] + ' ';
                            sk=0;
                            }
                        }
                    }

                    if (x != s.length) {
                        var y = s.length;
                        //str += 'point ';
                        //for (var i=x+1; i<y; i++)
                        //  str += dg[n[i]] +' ';
                        str += 'virgule ';
                         var counter=0;
                         for (var i=x+1; i<y; i++){
                            if ((y-i)%3==2) { 
                                                if (n[i] == '1') {
                                                                str += tn[Number(n[i+1])] + ' ';
                                                                i++;
                                                                counter=1;
                                                } else if (n[i]!=0) {
                                                                str += tw[n[i]-2] + '-';
                                                                counter=1;
                                                }
                                            }else if (n[i]!=0) { // 0235
                                                str += dg[n[i]] +' ';
                                            }
                         }

                    }

                    if (s!=21 && s!=31 && s!=41 && s!=51 && s!=61 && s!=71 && s!=72 && s!=73 && s!=74 && s!=75 && s!=76 && s!=100 && s!=91 && s!=92 && s!=93 && s!=94 && s!=95 && s!=96){
                    document.getElementById("demo").innerHTML = str.replace(/\s+/g,' ')

                    }
                    else if (s==21){
                    str = 'vingt-et-un'
                    document.getElementById("demo").innerHTML = str;
                    }//alert(str.replace(/\s+/g,' '));
                    else if (s==31){
                    str = 'trente-et-un'
                    document.getElementById("demo").innerHTML = str;}
                    else if (s==41){
                    str = 'quarante-et-un'
                    document.getElementById("demo").innerHTML = str;}
                    else if (s==51){
                    str = 'cinquante-et-un'
                    document.getElementById("demo").innerHTML = str;}
                    else if (s==61){
                    str = 'soixante-et-un'
                    document.getElementById("demo").innerHTML = str;}
                    else if (s==71){
                    str = 'soixante-et-onze'
                    document.getElementById("demo").innerHTML = str;}
                    else if (s==72){
                    str = 'soixante-douze'
                    document.getElementById("demo").innerHTML = str;}
                    else if (s==73){
                    str = 'soixante-treize'
                    document.getElementById("demo").innerHTML = str;}
                    else if (s==74){
                    str = 'soixante-quatorze'
                    document.getElementById("demo").innerHTML = str;}
                    else if (s==75){
                    str = 'soixante-quinze'
                    document.getElementById("demo").innerHTML = str;}
                    else if (s==76){
                    str = 'soixante-seize'
                    document.getElementById("demo").innerHTML = str;}
                    else if (s==100){
                    str = 'cent'
                    document.getElementById("demo").innerHTML = str;}
                    else if (s==91){
                    str = 'quatre-vingt-onze'
                    document.getElementById("demo").innerHTML = str;}
                    else if (s==92){
                    str = 'quatre-vingt-douze'
                    document.getElementById("demo").innerHTML = str;}
                    else if (s==93){
                    str = 'quatre-vingt-treize'
                    document.getElementById("demo").innerHTML = str;}
                    else if (s==94){
                    str = 'quatre-vingt-quatorze'
                    document.getElementById("demo").innerHTML = str;}   
                    else if (s==95){
                    str = 'quatre-vingt-quinze'
                    document.getElementById("demo").innerHTML = str;}   
                    else if (s==96){
                    str = 'quatre-vingt-seize'
                    document.getElementById("demo").innerHTML = str;}               
                }
            </script>
        </head>
        <body>
            <p>Enter only numbers (max 15 digits) : </p>
            <input type="text" name="value" id='value' /><br>
            <input type="button" value="submit" onclick="toWords()" />
            <p id="demo"></p>
            <p id="demo1"></p>
        </body>
    </html> 
````

# sql - 如何从不同的表中检索数据

> ID：14766955
> 
> 赞同：2
> 
> 时间：2013-02-08T06:30:09.967
> 
> 标签：sql

我有2个表如下：

```
Time: ID, UserID, start, End
User: ID, ClientID 
```

我想检索一段时间内与具有客户端 ClientID 的用户关联的所有时间。

例如

与具有客户端 ClientID = 5 和 Time startdate >15/12/12 表时间值的用户关联的时间

```
1, 3, 17/12/12 , 18/12/12
2, 5, 16/12/12 , 18/12/12
3, 4, 19/12/12 , 20/12/12 
```

表用户值

```
1, 4
2, 3
3, 5
4, 5 
```

结果应该是：

```
1, 3 17/12/12 , 18/12/12
3, 4, 19/12/12 , 20/12/12 
```

我怎样才能实现上述目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-08T06:32:14.167

我认为您需要使用`INNER JOIN`：

```
SELECT *
FROM Time T
    INNER JOIN User U ON T.UserId = U.Id
WHERE U.ClientId = @ClientId 
```

这是给你的一些小提琴：[http ://www.sqlfiddle.com/#!3/edc4b/3](http://www.sqlfiddle.com/#!3/edc4b/3)

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T06:36:06.390

试试这个，

```
select * from time t, user u
where t.id = u.id
and u.ClientID = 5; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T06:37:24.013

我不知道你到底想说什么，但对我来说要求看起来相当简单

```
select t.* from User u, Time t where u.id = t.userid and u.clientid= ? 
```

# c++ - 在 Visual Studio 2012 中为 C++ CLR 支持的 DLL 项目将 .NET 框架 4.5 降级到 4？

> ID：14766957
> 
> 赞同：8
> 
> 时间：2013-02-08T06:30:26.733
> 
> 标签：c++, .net, visual-studio, frameworks

链接 Visual C# .NET Framework 4.0 支持的项目时出现此错误，因为我添加了 C++ CLR DLL 与 4.5 .NET Framework 的引用。

```
error CS0246: The type or namespace name 'project' could not be found (are you missing a using directive or an assembly reference?) 
```

因此，对于这个 C++ CLR 支持的 DLL 项目，如何在 Visual Studio 2012 中将 .NET 框架 4.5 降级到 4.0？

我以前见过这个，这是原因。对于我的 C++，此链接可能有助于我的事业[http://msdn.microsoft.com/en-us/library/bb772098(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/bb772098(v=vs.90).aspx)

我刚刚也发现了这个警告：

```
 C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1578,5): warning MSB3274: The primary reference "X" could not be resolved because it was built against the ".NETFramework,Version=v4.5" framework. This is a higher version than the currently targeted framework ".NETFramework,Version=v4.0". 
```

有人见过这个吗？那么我如何降级 C++ DLL？

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-08T08:59:58.737

C++ IDE 不支持 .NET 项目的多目标。您需要手动编辑 .vcxproj。如果已打开项目，请关闭它，然后在文本编辑器中打开 .vcxproj。找到这一行：

```
<TargetFrameworkVersion>v4.5</TargetFrameworkVersion> 
```

并将其修改为“v4.0”。在 VS 中再次打开项目。项目 + 属性、通用属性、框架和参考。在列表中选择“系统”并检查相对路径属性。它现在应该指向 4.0 版本。

请注意一个重大问题和 C++ IDE 不支持多目标的核心原因。[#using 指令](http://msdn.microsoft.com/en-us/library/vstudio/yab9swk4%28v=vs.110%29.aspx)存在问题，它从 c:\windows\microsoft.net 子目录加载程序集。这将使它加载 .NET 4.5 程序集，而不是您在定位 4.0 时想要的 4.0 程序集。4.0 参考程序集存储在 c:\program files\reference 程序集中。这可能导致很难诊断运行时问题，4.5 程序集与 4.0 程序集不兼容。在您自己的代码中避免 #using 很容易，但它在 include/msclr/marshal.h 和 include/vcclr.h 头文件中使用。如果您使用这些标题，请注意购买者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-08T07:17:04.560

我已经想通了。这是警告，但指定的链接确实解决了问题。

[http://msdn.microsoft.com/en-us/library/bb772098(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/bb772098(v=vs.90).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-30T07:08:53.710

对我有用的是：在项目属性-> 配置属性-> 项目默认值中。.NET 目标框架版本 - 编辑为您需要的版本 - 在我的例子中是 4.6.1

# ios - 带框架的屏幕截图

> ID：14766960
> 
> 赞同：1
> 
> 时间：2013-02-08T06:30:35.280
> 
> 标签：ios

如果要截屏是ios app，可以使用以下代码：

```
UIGraphicsBeginImageContext(self.view.bounds.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
currentCaptureImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

但我想从特定点捕获图片，例如（start.x，start.y）并具有特定的宽度和高度，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T06:33:43.557

我只是用谷歌搜索并从[如何捕获特定大小的 self.view 中得到最佳答案](https://stackoverflow.com/questions/12692611/how-to-capture-a-specific-size-of-the-self-view:-)

```
UIGraphicsBeginImageContextWithOptions(CGSizeMake(300, 320), YES, 0.);
    [self.view.window.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

例如，如果您的视图是 600x320 并且您想捕获中间 300 点的宽度，您可以将上下文向左平移 150 点：

```
UIGraphicsBeginImageContextWithOptions(CGSizeMake(300, 320), YES, 0.);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextTranslateCTM(context, -150.f, 0.f);
    [self.view.window.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext(); 
```

# asp.net - 在 asp.net 中显示站点的常量 URL

> ID：14766962
> 
> 赞同：0
> 
> 时间：2013-02-08T06:30:59.587
> 
> 标签：asp.net

我有一个页面数量的网站，在 asp.net 中开发。我有一个页面网址，例如：示例：

```
1) http://www.xyz.com/Home.aspx 
2) http://www.xyz.com/Index.aspx
3) http://www.xyz.com/viewMember?Name=abc&id=1 
```

但最终用户在任何页面，我想显示 URL，如`"http://www.xyz.ie"`.

web.config 中是否有任何设置？如果没有，还有其他方法吗？

请帮我...

提前致谢。贾加迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:27:42.743

您不能为不同的页面保留一个 URL - 但您可以做一些技巧来模拟它。

要使 url 保持不变，但内容会发生变化，您需要采取一些技巧。

我不推荐，搜索引擎他们不会跟随你做什么，他们显示每个页面不同，用户无法制作书签，普通用户可以轻松找到页面的真实 url，即使在浏览器上单击不同的位置也可以找到它。

一个技巧是使用框架或 iframe。在主页上，您将所有其余部分加载到 iframe 或框架内。

第二个技巧是使用 ajax 来加载彼此的内容。

最后，您可以使用会话来知道要在用户身上显示什么，用户没有更改链接，而是发回更改内容。

# php - 禁止在 php 中调用最终父函数

> ID：14766963
> 
> 赞同：0
> 
> 时间：2013-02-08T06:31:00.253
> 
> 标签：php, oop, inheritance, final

我有一个父类，它有一个最终的公共函数。是否可以禁止在派生类中访问此方法？从父类派生的其他类仍然需要能够调用它。

```
class ParentClass {
    final public function test() {

    }
}
class ChildClass extends ParentClass {

}
class ChildClass2 extends ParentClass {

}

$child = new ChildClass();
$child2 = new ChildClass2();
// make this illegal:
$child->test();
// but not this:
$child2->test(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T06:51:29.103

当您从类继承时，这意味着派生类[*是*](http://en.wikipedia.org/wiki/Is-a)继承的类。这意味着它具有完全相同的基本功能，可以扩展、覆盖等。如果派生类具有在父类中定义的方法没有意义，则意味着派生类*不是*它派生的类。

对于现实世界的示例，假设您有`FlyingMachine`一个具有方法的类，`Fly`并且`Move`如果您从中派生类是不合逻辑`Car`的，`FlyingMachine`因为汽车不会飞，而`AirPlane`从提到的基类派生类则完全没问题。但是，如果您有`Machine`具有方法的基类`Move`并且 car 是从该类派生的`Car : Machine`（汽车是机器，对吗？），那将是合乎逻辑的，它也是机器，`FlyingMachine`所以`FlyingMachine : Machine`非常好，因为飞机是飞行机器`AirPlane : FlyingMachine`是有道理的。

对于您给定的示例，这应该类似于：

```
abstract class VeryBaseClass {
    public function MethodThatIsLogicalForEveryDerivedClass() {}
}

abstract class BaseClass extends VeryBaseClass {
    public function SomeOtherFunctionThatMakesSenseOnlyForSomeClasses() {}
}

class ClassThatShouldNotHaveSpecificFunctionDefinedInBaseClass extends VeryBaseClass{}

class ClassThatShouldHaveSomeOtherMethod extends BaseClass {} 
```

**编辑：**

如果有几个派生类需要的功能，但对于其中一些，它应该是公共的，而对于其中一些则不是。您应该在基类中将此方法定义为受保护的（派生类可以访问一个但不能从外部访问）。并且在要求该方法公开的派生类中创建另一个方法并调用父方法。例如：

```
abstract class Car { protected function Shift() {} }

class ManualCar extends Car {
    public function Shift() { parent::Shift(); }
}

class AutomaticCar extends Car {
      //Some implementation of automatic car that uses protected Shift method
} 
```

[小演示](http://codepad.viper-7.com/8687vU)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T07:09:29.903

如何在方法中检查该类，如果它是不允许的类，则抛出异常：

```
class ParentClass {
    final public function test() {
        if (get_class($this) == "ChildClass")
            throw new Exception("ChildClass cannot call test()")
    }
} 
```

注意：这是相当邪恶的

# php - 单击按钮时执行 php 命令 html

> ID：14766964
> 
> 赞同：0
> 
> 时间：2013-02-08T06:31:05.037
> 
> 标签：php, html, forms, post, button

我将如何做这样的工作？

```
<input name="downvid2" type="button" id="downvid2" onclick="
  <?php
header('Content-disposition: attachment; filename=file.pdf');
header('Content-type: application/pdf');
readfile('file.pdf');
?>" value="Download Story" /> 
```

问题是我会做一个表单并提交，但我需要一些 PHP 变量的值，我不想在移动页面时丢失它们。

完整的代码是：

```
<title>Legendmaker - Your Legendmaker Adventure Starring You:</title>

<?php
if( $_POST )
{
$username="***";
$password="*****";
    $con = mysqli_connect("storycodes.db.10339998.hostedresource.com",$username,$password);

    if (!$con)
    {
        die('Could not connect: ' . mysqli_error());
    }

    mysqli_select_db($con, "storycodes");

$code = $_POST['codeInput'];
$code = mysqli_escape_string($con, htmlspecialchars($code)); //May not acually need htmlspecialchars
$query = "SELECT story,video FROM `storycodes` WHERE `code` = '$code'";
$result = mysqli_query($con, $query);

  if (mysqli_num_rows($result)) 
  {
    $row = mysqli_fetch_assoc($result);
    mysqli_free_result($result); 
    extract($row);
    echo $story . $video;   

  }
   else 
  {
   echo "No Data Found. Please check your serial code to ensure that you have not incorrectly entered it. If the code is correct please email the website administrator for further assistance";
  }     

mysqli_close($con);
}
?>
<div align="center">
  <p><span class="linkText"><a href="/index.html">Home</a> <a href="/contact-us.php">Contact Us</a> <a href="/payments.html">Products</a><a href="/products.html"></a></span> </p>
  <p>&nbsp;</p>
  <h2 class="headingText"><img alt="legendmaker - makes legends: banner" width="728" height="90" /></h2>
  <h2 class="headingText">&nbsp;</h2>
  <h2 class="headingText">Your story</h2>
</div>
<p>&nbsp;</p>

  <label>
  <input type="button" name="downvid" id="downvid" value="Download Video" />
  </label>
  <input name="downvid2" type="button" id="downvid2" onclick="
  <?php
header('Content-disposition: attachment; filename=file.pdf');
header('Content-type: application/pdf');
readfile('file.pdf');
?>" value="Download Story" /> 
```

我想我必须让它处理涉及文件 PHP 的所有事情，因为我想让这些文件不能通过网络访问，这样只有那些在以前的表单中输入序列码的人才能访问它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-08T06:32:23.713

不，它不能工作。PHP 是一种服务器端语言，而 HTML 不是。如果您不想提交表单，那么您可以为此目的使用 AJAX，但不像您所要求的那样。要么提交表单以将数据发送到 PHP，要么使用 JavaScript，尤其是 AJAX。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T06:49:53.050

onclick 事件在客户端执行。而且由于 PHP 是服务器端，因此您的伪代码无法工作。

更好的解决方案是通过链接或提交表单来重定向用户。

重定向应该指向您的 PHP 脚本，该脚本将下载发送给您的用户。这将使浏览器停留在当前页面上，效果就像你的伪样本一样。

# ruby-on-rails - 使用一个表单将数据插入多个表

> ID：14766968
> 
> 赞同：1
> 
> 时间：2013-02-08T06:31:31.780
> 
> 标签：ruby-on-rails, forms, nested-attributes

我是 ruby​​ on rails 的新手...我正在做一个关于办公空间租金的项目 每个列表都有很多图像 有列表表和图像表

```
class Listing < ActiveRecord::Base
 attr_accessible :agent_id, :description, :key_feature, :location_id, :size, :title,    :office_type, :parking_ratio, :floors, :price, :nearest_metro, :distance, :image, :location_title, :display_order, :images_attributes

 has_many:images, :dependent => :destroy
 accepts_nested_attributes_for :image
end

class Image < ActiveRecord::Base
 # attr_accessible :title, :body
 attr_accessible :id, :image_url, :title_image, :listing_id, :created_at, :updated_at
 belongs_to :listing
end 
```

我想为列表制作表格，以便它还要求为该特定列表添加图像。它应该为 image_url 创建一个空白选项卡，并将它的小图像上传到它的右侧。在它下面应该要求添加新图像...单击呈现另一个 image_url 选项卡，依此类推...列表应保存在列表表中，图像应保存在引用该列表的图像表中..请帮助我！！！我使用以下代码制作了表格：-

```
<%=f.fields_for :images do |image| %>
 <%= image.label :image %><br />
 <%= image.text_field :image_url %><br /> <br />
 <%= image.hidden_field :listing_id, :value => params[:id] %> 
```

它会显示已经手动插入数据库中的图像，从而在编辑特定列表时显示它们。但是当要求制作新列表时，它从不显示图像选项卡......所以我很无助......我怀疑整个结构可能是错了..请帮帮我！

这是我用于更新和创建的列表控制器

```
def create
@listing = Listing.new(params[:listing])

respond_to do |format|
  if @listing.save
    format.html { redirect_to ([:member, @listing]), notice: 'Listing was successfully created.' }
    format.json { render json: @listing, status: :created, location: @listing }
  else
    format.html { render action: "new" }
    format.json { render json: @listing.errors, status: :unprocessable_entity }
  end
end 
```

结尾

```
def update
@listing = Listing.find(params[:id])

respond_to do |format|
  if (@listing.update_attributes(params[:listing]))
    format.html { redirect_to ([:member, @listing]), notice: 'Listing was successfully updated.' }
    format.json { head :no_content }
  else
    format.html { render action: "edit" }
    format.json { render json: @listing.errors, status: :unprocessable_entity }
  end
end 
```

结尾

# php - 无法从 EXIF 检索 GPS 位置

> ID：14766972
> 
> 赞同：1
> 
> 时间：2013-02-08T06:31:46.873
> 
> 标签：php

在 PHP 中，我试图从图像中提取 EXIF 信息。在命令行与 mod_php 中执行相同的代码时，我得到了截然不同的结果。

在命令行中，我可以看到我需要的所有数据，但使用 mod_php 的数据很少。我想知道这与 mbstring 事情有关，但无法找出根本原因。

知道如何在 mod_php 中读取整个 Exif 数据吗？

```
$exif = exif_read_data($fileLoc, "EXIF", true);

foreach ($exif as $i => $value) {
    if( ) {
        error_log("Debug:: In $i");
        foreach ($value as $j => $jvalue){
            error_log("      Debug: $j => $jvalue");
        }
    }
    else {
        error_log("Debug: $i => $value");
    }
} 
```

mod_php 输出：

```
 Debug:: In COMPUTED
       Debug: html => width="2592" height="1936"
       Debug: Height => 1936
       Debug: Width => 2592
       Debug: IsColor => 1 
       Debug: ByteOrderMotorola => 1
 Debug:: In IFD0
       Debug: Orientation => 1
       Debug: Exif_IFD_Pointer => 38
 Debug:: In EXIF
       Debug: ColorSpace => 1
       Debug: ExifImageWidth => 2592
       Debug: ExifImageLength => 1936 
```

命令行输出：

```
<snip>
Debug:: In EXIF
      Debug: ExposureTime => 1/120
      Debug: FNumber => 14/5
      Debug: ExposureProgram => 2
      Debug: ISOSpeedRatings => 100
      Debug: ExifVersion => 0221
      Debug: DateTimeOriginal => 2012:01:12 15:30:57
      Debug: DateTimeDigitized => 2012:01:12 15:30:57
      Debug: ComponentsConfiguration => 
      Debug: ShutterSpeedValue => 12989/1880
      Debug: ApertureValue => 4281/1441
      Debug: BrightnessValue => 19112/3529
      Debug: MeteringMode => 5
      Debug: Flash => 16
      Debug: FocalLength => 77/20
      Debug: SubjectLocation => Array
      Debug: FlashPixVersion => 0100
      Debug: ColorSpace => 1
      Debug: ExifImageWidth => 2592
      Debug: ExifImageLength => 1936
      Debug: SensingMethod => 2
      Debug: ExposureMode => 0
      Debug: WhiteBalance => 0
      Debug: SceneCaptureType => 0
      Debug: Sharpness => 2
Debug:: In GPS
      Debug: GPSLatitudeRef => N
      Debug: GPSLatitude => Array
      Debug: GPSLongitudeRef => W
      Debug: GPSLongitude => Array
      Debug: GPSAltitudeRef => 
      Debug: GPSAltitude => 0/1
      Debug: GPSTimeStamp => Array 
```

# c# - 在 C# 中自定义 GridView

> ID：14766974
> 
> 赞同：0
> 
> 时间：2013-02-08T06:31:49.357
> 
> 标签：c#, .net, gridview

我是 C# 编程的新手。我有一个包含不同优惠的数据库，我可以从数据库中获取这些优惠。但现在我想为这些优惠创建一个自定义外观页面（请参见附图![在此处输入图像描述](../Images/d73b21a37a1a8c21e7c76aae88103025.png)）

假设如果数据库中有 7 个报价，我希望它们出现在我的页面上，就像该描述下顶部的报价图像一样。我该怎么做 ？我使用了 Gridview，但它在表格中给出了结果我可以自定义网格视图以获得这种外观吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:13:39.640

你有很多其他选项可以使用 dataview、repeater 或 JQuery。

尝试搜索上述主题并尝试实施该过程。

# java - 使用 JasperReports API 生成报告时获取空值

> ID：14766976
> 
> 赞同：0
> 
> 时间：2013-02-08T06:31:50.423
> 
> 标签：java, jasper-reports

我使用*iReport设计了我的报告并用**Java*编译了它。

当我通过*Java生成**PDF*格式的报告时，我得到空值。

 *我在 pie 数据集中得到 Key 为空。错误并且输出*PDF*或*html*具有*空*值。

我的代码：

```
public class PdfFromJasperFile {

    public static void main(String[] args) throws JRException, IOException {

        JasperReport jasperReport;
        JasperPrint jasperPrint;
        Map param = new HashMap();
        try {
            String sourceFileName = "C:/Users/Sadagopan/Documents/report3.jrxml";

            jasperReport = JasperCompileManager.compileReport(sourceFileName);
            jasperPrint = JasperFillManager.fillReport(jasperReport, param,
                    new JREmptyDataSource());
            JasperExportManager.exportReportToHtmlFile(jasperPrint, 
                    "C:/Users/Sadagopan/Documents/sample.html");
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

我的*JRXML*文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="report3" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="3d69a5d5-0c1e-4b1f-9424-513fa329f402">
    <queryString>
        <![CDATA[Select * from person where name ='sadagopan']]>
    </queryString>
    <field name="id" class="java.lang.Long">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <field name="name" class="java.lang.String">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <field name="address" class="java.lang.String">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <field name="phonenumber" class="java.lang.String">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <field name="salary" class="java.math.BigDecimal">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <field name="pension" class="java.math.BigDecimal">
        <fieldDescription><![CDATA[]]></fieldDescription>
    </field>
    <group name="id">
        <groupExpression><![CDATA[$F{id}]]></groupExpression>
    </group>
    <group name="name">
        <groupExpression><![CDATA[$F{name}]]></groupExpression>
    </group>
    <group name="phonenumber">
        <groupExpression><![CDATA[$F{phonenumber}]]></groupExpression>
    </group>
    <group name="salary">
        <groupExpression><![CDATA[$F{salary}]]></groupExpression>
    </group>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="60" splitType="Stretch">
            <staticText>
                <reportElement uuid="a006c204-9feb-4302-90b1-fe5bdddbe3d8" x="89" y="11" width="384" height="49"/>
                <textElement>
                    <font size="36"/>
                </textElement>
                <text><![CDATA[Person Salary report]]></text>
            </staticText>
        </band>
    </title>
    <pageHeader>
        <band height="27" splitType="Stretch"/>
    </pageHeader>
    <columnHeader>
        <band height="25" splitType="Stretch">
            <staticText>
                <reportElement uuid="b74a5413-2dee-4cd5-ac06-e73a022343bc" x="0" y="5" width="48" height="20"/>
                <textElement/>
                <text><![CDATA[ID   ]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="9df2c923-e5b6-4bb0-95f0-5c437495ea53" x="63" y="5" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[Name]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="b054ca79-f62e-4c80-817f-270e9ee4839a" x="163" y="5" width="176" height="20"/>
                <textElement/>
                <text><![CDATA[Address]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="e49b408e-8c6f-4aea-af7b-15ab31eb4643" x="329" y="5" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[Phonenumber]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="4bf8ce1f-5284-4642-a45a-90aeff267abd" x="429" y="5" width="59" height="20"/>
                <textElement/>
                <text><![CDATA[salary]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="f99f4ce6-d8df-41b6-b1cb-8a5ef17b46c3" x="488" y="5" width="100" height="20"/>
                <textElement/>
                <text><![CDATA[pension]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="53" splitType="Stretch">
            <textField>
                <reportElement uuid="e91cc334-4623-42a2-bc78-e6c248606f65" x="0" y="0" width="48" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{id}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="3b8498fb-8560-4178-86bf-183ab6855d49" x="63" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{name}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="78c2be84-eebd-4465-b8c2-53d201e3246a" x="163" y="0" width="166" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{address}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="813442d3-a459-4fc9-83fb-ac170bf5a9a8" x="329" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{phonenumber}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="37d739d1-f413-465f-aecc-6bc2a3b8ff72" x="429" y="0" width="59" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{salary}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="99c32bab-b3d5-4ade-bb47-b3858ce6e2d6" x="488" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{pension}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <columnFooter>
        <band height="236" splitType="Stretch">
            <pieChart>
                <chart>
                    <reportElement uuid="e214bf8f-78d8-424b-a617-4b417385a9e5" x="48" y="21" width="440" height="215"/>
                    <chartTitle/>
                    <chartSubtitle/>
                    <chartLegend/>
                </chart>
                <pieDataset>
                    <keyExpression><![CDATA[$F{id}]]></keyExpression>
                    <valueExpression><![CDATA[$F{salary}]]></valueExpression>
                </pieDataset>
                <piePlot>
                    <plot/>
                    <itemLabel/>
                </piePlot>
            </pieChart>
        </band>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T08:40:31.570

这是因为您要传递`JREmptyDataSource()`给您的报告，这就是为什么`$F{id}`为空

以下是您可以传递给报告的可能[数据源。](http://jasperreports.sourceforge.net/sample.reference/datasource/index.html#datasources)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T06:08:56.880

任何人参考的工作代码

`公共类TestJasper {

```
public static void main(String[] args) {

     String reportPath = "C:/Users/Sadagopan/Documents/report3.jasper";
     Map<String, Object> params = new HashMap<String, Object>();
     Connection connection;

    try {

       // JasperReport jasperReport = JasperCompileManager.compileReport(reportSource);
          Class.forName("com.mysql.jdbc.Driver");
          connection = DriverManager.getConnection("jdbc:mysql://localhost:3306/person","root","password");

        System.out.println("Filling report...");
        JasperPrint jasperPrint = JasperFillManager.fillReport(reportPath, params, connection);
        JasperExportManager.exportReportToHtmlFile(jasperPrint, "C:/Users/Sadagopan/Documents/sample.html"); 
        JasperViewer.viewReport(jasperPrint, false);
        connection.close();
    } catch (Exception e) {
        System.out.println(e.getMessage());
    }

    }
} 
```

'*

# java - Java mappedByteBuffer 和 flip() 和 position()

> ID：14766979
> 
> 赞同：1
> 
> 时间：2013-02-08T06:32:00.010
> 
> 标签：java, buffer, nio

我有一些问题`java.nio.Buffer`。基本上，我的问题始于是否`flip()`总是需要调用来在读取和写入之间切换，或者是否只需要慢速 I/O，例如在先写入再读取的情况下，以确保在读取数据之前完全写入数据. 我的特别问题是 mappedByteBuffer。看起来如果文件存在并且大小我知道，我可以使用`position(int newPosition)`调用导航到文件的任何部分，并执行读取或写入，即基本上将缓冲区用作一块内存而忘记了标记或限制的概念。这是真的？

考虑以下示例。如果我有一个包含整数 1 的文件，那么从头开始是 2，看来我可以将另一个整数 3 放在位置 0，倒带并从缓冲区中读取 3 和 2。限制不应该像在普通的非 mmap 缓冲区中那样阻止我使用第二个 getInt 吗？我什么时候需要调用flip() 来在mappedByteBuffer 的写入和读取之间切换？谢谢！

```
final int FILESIZE = 1024;

RandomAccessFile fileHandle;
    FileChannel fileChannel;
    File testFile = new File("c:/temp/testbbrw.dat");
    fileHandle = new RandomAccessFile(testFile, "rw");

    fileChannel = fileHandle.getChannel();
    MappedByteBuffer mbb = fileChannel.map(FileChannel.MapMode.READ_WRITE, 0, FILESIZE);

    int pos, data;

    mbb.position(0);
    mbb.putInt(3);

    mbb.position(0);
    data=mbb.getInt();  //I get 3
    data=mbb.getInt();  //I get 2, which was written to the file before this program runs

    mbb.force();
    fileHandle.close(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T07:09:29.033

这就是 Buffer.flip 所做的

```
347    public final Buffer flip() {
348        limit = position;
349        position = 0;
350        mark = -1;
351        return this;
352    } 
```

它正在准备缓冲区，以便缓冲区上的下一个读取操作从位置 0 开始并在当前限制处结束。意味着您告诉它，您已完成更改缓冲区并准备将其移动或复制到其他地方（这意味着读取它）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T07:29:09.990

> 我的问题始于是否总是需要调用 Flip() 来在读取和写入之间切换，或者是否只需要慢速 I/O，例如在先写入再读取的情况下，以确保数据在写入之前完全写入读。

1.  任何描述的 A`Buffer`都以您可以阅读或放入它的状态开始，这是同一件事。
2.  `flip()`把它置于一个你可以从中写或从中获取的状态，这是同一回事。
3.  尽管它的（非常愚蠢`flip()`的）名字，不是`flip()`. 它唯一的逆元是`compact()`和`clear()`。

为清楚起见，我发现最好始终将 a`Buffer`置于可读状态，仅在需要时将其翻转为可写状态，然后立即将其恢复为可读状态。

这是用于 I/O。

如果您正在做的只是`get()`并且`put()`我不确定我是否会使用`flip()`，因为这是`MappedByteBuffer`我当然不会调用`clear()`or `compact()`，这两者都可能对文件造成可怕的事情，并且也排除使用`flip()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-10T20:25:39.447

与典型的循环有限缓冲区相比，Java中的 API 设计`Buffer`令人困惑且违反直觉。更糟糕的是文档中的术语选择不当，加上读/写和 put/get 术语的模棱两可使用，前者指的是***使用***a的外部操作（通常由 a `Channel`），而后者指的是由a***提供的***操作。*`Buffer`*`Buffer`**

 **### Java 缓冲区

在创建时，一个新的缓冲区是“空的”，准备好被填充。它可能会立即在构造函数中提供一些内容，但它仍处于“填充”状态。

该`flip()`方法将缓冲区的逻辑状态从被填充“翻转”到被清空。相当愚蠢`flip()`地不会自我逆转，即使在普通英语中它通常会描述一个逻辑上可逆的动作。实际上，查看代码，在没有干预的情况下调用它两次`clear`或`compact`将缓冲区设置为无效状态，导致其他方法返回无意义的。^([1])

`clear()`和`compact()`方法是 的逻辑逆，`flip()`将缓冲区恢复到“填充”状态，前者也清空它，后者保持剩余内容。

一般建议是使用 try/finally 将任何给定的缓冲区*始终*保持在一致状态；例如：

```
ByteBuffer wrap(ByteBuffer src, ByteBuffer tgt) {
    // assume buffers are *always* kept in the "filling" state
    try {
        src.flip(); // change `src` to "emptying"; assume tgt already filling
        // transfer some or all of `src` to `tgt`
        }
    finally {
        if(src.remaining()) { src.compact(); } // revert `src` to "filling" without discarding remaining data
        else                { src.clear();   } // compact() is (usually) less efficient than clearing
        } 
```

### 典型的有限循环缓冲器

Java 缓冲区最反直觉的地方是由于大多数循环缓冲区实现都具有并发读/写能力，因此它们维护三个值 ,`head`和`tail`（`capacity`如果语言允许，最后一个通常从后备数组推断出来）***他们***只是允许值换行。`head`是读取数据的位置`tail`，也是写入数据的位置。当到达底层数组的末尾时，head/tail 的值被简单地设置为零（即它循环）。

当 时`head == tail`，缓冲区为空。当 时`inc(tail) == head`，缓冲区已满，当前内容长度由 到达`head <= tail ? (tail - head) : (capacity - head + tail)`。后备数组的大小通常`capacity+1`使得`tail`索引不等于`head`缓冲区已满时的索引（如果没有单独的标志，这将是模棱两可的）。

这使得内部索引处理稍微复杂一些，但是为了不必翻转状态并且永远不需要将数据“压缩”回内部数组的开头（尽管大多数实现会将开始/结束索引重置为清空缓冲区时为零）。

通常，当读取可能需要两个数组副本时，这也转化为权衡；首先从`head`数组的末尾开始，然后从数组的开头到`tail`。当目标也是一个缓冲区并在写入期间回绕时，可能需要三个复制操作（但额外的副本隐藏在`put`方法中）。

### 假设

我最好的猜测是 Java 以这种方式定义缓冲区，以便对缓冲区的所有读取和写入都发生在连续的块中。这大概可以在处理套接字、内存映射和通道等事物时启用下游/内部优化，从而避免需要制作中间副本。

这里只是猜测。

### 笔记

[1] 无效，因为双重翻转会导致限制设置为 0，而不是`capacity`，这反过来会导致`BufferOverflowException`大多数内部方法由于`limit - position`<= 0 或位置 >= 限制。例如：

```
 511       final int nextPutIndex() {                          // package-private
  512           if (position >= limit)
  513               throw new BufferOverflowException();
  514           return position++;
  515       }
  516   
  517       final int nextPutIndex(int nb) {                    // package-private
  518           if (limit - position < nb)
  519               throw new BufferOverflowException();
  520           int p = position;
  521           position += nb;
  522           return p;
  523       }
  524   
  525       /**
  526        * Checks the given index against the limit, throwing an {@link
  527        * IndexOutOfBoundsException} if it is not smaller than the limit
  528        * or is smaller than zero.
  529        */
  530       final int checkIndex(int i) {                       // package-private
  531           if ((i < 0) || (i >= limit))
  532               throw new IndexOutOfBoundsException();
  533           return i;
  534       } 
```**

# javascript - windows 8 应用程序认证测试问题

> ID：14766981
> 
> 赞同：0
> 
> 时间：2013-02-08T06:32:06.660
> 
> 标签：javascript, windows-8

嗨，我正在使用 javaScript 开发 Windows 8 Metro 应用程序我开发应用程序并测试它我通过测试应用程序使用 Windows 应用程序认证工具包它最终显示我失败了

```
 Performance test 
```

失败的字节码生成

```
Error Found: The bytecode generation test detected the following errors:
    This package was deployed for development or authoring mode. Uninstall the package and re-install it normally.
Impact if not fixed: As a performance optimization to accelerate JavaScript execution time, JavaScript files ending in the ".js" extension generate bytecode when the app is deployed. This optimization significantly improves start-up and ongoing execution times for JavaScript.
How to fix: You may need consider one or more of these steps to fix the issue:
- Ensure that event logging is enabled
- All JavaScript files are syntactically valid; otherwise exclude the respective files from the package
- Please note that you should uninstall all previous versions of the app before deploying
Otherwise exclude the respective files from the package. 
```

我试图解决这个问题，但我不能说当我使用许可的 windows 8 pro 和 Visual Studio Professional 2012 时，但我没有付费的开发人员许可证帐户，但只有一个微软开发人员帐户。

我的主要问题是测试应用程序并使其通过我是否需要任何有效的付费开发者帐户或普通帐户就足以测试，因为它显示包已部署用于开发或创作模式我已阅读微软的文档如何测试我做了同样的应用程序，但问题没有得到纠正，你能建议我一些关于这方面的信息吗？

我需要一个有效的付费开发者帐户还是普通帐户足以测试并使其通过。请..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T07:28:59.817

尝试运行 Store -> Create App Package 并选择“否”，然后按下一步按钮。之后，WACK-Tool 会自动启动，它将通过字节码生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T13:15:44.170

您应该能够使用您的开发者许可证测试您的应用程序。[请参阅使用 Windows 应用认证工具包 (Windows) 测试您的应用中的](http://msdn.microsoft.com/en-us/library/windows/apps/hh694081.aspx)详细信息。

# merge - Notepad++ 合并两行

> ID：14766982
> 
> 赞同：3
> 
> 时间：2013-02-08T06:32:10.703
> 
> 标签：merge, notepad++

我想将每两行合并为一行，并在其间添加一个 TAB。

**原创**STAN LEE： 地球上
有超过60 亿人。 从基因上讲，我们大多数人 几乎都是一样的。 但 时不时会发生突变。

**结果**
STAN LEE：地球上有超过 60 亿人。
从基因上讲，我们大多数人几乎都是一样的。
但时不时会发生突变。

此外，我还想在之后有一个 TAB：

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-08T06:43:45.670

您的问题的一个简单解决方案是使用**宏**顶部菜单。记录一个案例所需的更改，并继续重播宏以修复所有问题。但是，您需要找出可以重复的模式。

这是使用 Notepad++ Regex 的另一种可能的解决方案。

**寻找：** `^(.*)[\r\n]+`

**代替：** `\1\t`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-05T14:38:29.567

我只是偶然发现了您的问题：这是一种不需要宏的正则表达式方法：

**寻找：** `([^\t]*?)\r\n([^\t]*?)\r\n`

**代替：** `\1\t\2\r\n`

它之所以有效，是因为我们可以匹配两行换行符之前的所有内容，**并且我们可以区分**已经由制表符处理的行。

如果选项卡存在于原始行中，它将不起作用。然后正则表达式将“递归”匹配，并将所有内容加入一行。

# java - 如何在android中打印一周的所有时间

> ID：14766987
> 
> 赞同：0
> 
> 时间：2013-02-08T06:32:24.893
> 
> 标签：java, android, date

我想通过单击一个按钮来显示一周中的一整天。动作将是这样的，例如假设月份是 2013 年 2 月，所以在第一次单击按钮时我想显示这几天。

```
3/11/2013, 4/11/2013, 5/11/2013, 6/11/2013, 7/11/2013, 8/11/2013, 9/11/2013 
```

第二次单击按钮时，我想像这样显示

```
10/11/2013, 11/11/2013, 12/11/2013, 13/11/2013, 14/11/2013, 15/11/2013, 16/11/2013 
```

同样，在每次单击按钮时，我都想以这种格式显示剩余的日子。那么如何做到这一点，我已经尝试过这段代码，但它会显示

```
3/11/2013, 4/11/2013, 5/11/2013, 6/11/2013, 7/11/2013, 8/11/2013, 9/11/2013 
```

我使用的代码

```
Calendar c = Calendar.getInstance();

// Set the calendar to monday of the current week
c.set(Calendar.DAY_OF_WEEK, Calendar.SUNDAY);

// Print dates of the current week starting on Monday
DateFormat df = new SimpleDateFormat("dd/MM/yyyy", Locale.US);
for (int i = 0; i < 7; i++) 
{
    System.out.println(df.format(c.getTime()));
    c.add(Calendar.DAY_OF_MONTH, 1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:41:08.170

您的几乎就在那里，只是添加`c.add(Calendar.WEEK_OF_YEAR, week);`以根据输入参数增加一周

```
public static void getDaysOfWeek(int week) {
    Calendar c = Calendar.getInstance();
    // Set the calendar to monday of the current week
    c.set(Calendar.DAY_OF_WEEK, Calendar.SUNDAY);
    c.add(Calendar.DATE, week * 7);
    // Print dates of the current week starting on Monday
    DateFormat df = new SimpleDateFormat("dd/MM/yyyy", Locale.US);
    for (int i = 0; i < 7; i++) {
        System.out.println(df.format(c.getTime()));
        c.add(Calendar.DAY_OF_MONTH, 1);
    }
} 
```

使用上述方法获取星期几。只需将第一次传递给方法，将 1 传递给下一次单击，依此类推。您将获得一周中的相应日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T07:08:57.867

```
public static void main(String[] args) {
    int next = 1;
    for(int i =0 ;i< 4 ;i++)
    weekOfGivenMonth(next++);
}

private static void weekOfGivenMonth(int weekNext) {

    Calendar c = Calendar.getInstance();

    c.set(Calendar.WEEK_OF_MONTH, weekNext);

    DateFormat df = new SimpleDateFormat("EEE dd/MM/yyyy");
    for (int i = 0; i < 7; i++) {
        System.out.println(df.format(c.getTime()));
        c.add(Calendar.DATE, 1);
    }

} 
```

试试这个我根据你的要求编辑的。我使用循环而不是你应该使用按钮来调用该月的第二周、第三周和第四周。

# iphone - 如何使用 UITabBarController App 进入横向模式？

> ID：14766988
> 
> 赞同：0
> 
> 时间：2013-02-08T06:32:25.430
> 
> 标签：iphone, uikit, uitabbarcontroller, uiinterfaceorientation

我有一个`UITabBarController`, 并且每个选项卡处理不同`UIViewController`的，根据需要推送堆栈新控制器。并且每个都`UIViewController`使用 NIB 和包含的方法创建：

```
-(BOOL)shouldAutorotateToInterfaceOrientation:UIInterfaceOrientation)interfaceOrientation {
    return YES;
} 
```

但是我发现当我以横向模式进入应用程序时，它不起作用，仍然是纵向模式，为什么？对于我的 ipad 应用程序，它可以工作，并且在 plist 中为所有设备方向设置了“支持的界面方向（iPad）”和“支持的界面方向（iPhone）”。并且 xcode 的目标启用了“支持的界面方向”按钮为灰色，但仍然不适用于 iphone，ipad 会很好，为什么？非常感谢！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T06:35:55.083

您正在测试哪个 iOS？

-（BOOL）应该自动旋转到接口方向：UI接口方向）接口方向；

适用于 iOS5

如果您使用的是 iOS6，请确保在应用程序设置中单击这些。 ![在此处输入图像描述](../Images/af1b484afea36abc5e7568d3e19492a1.png)

# python - 我需要让我的评估函数跟踪用户需要多少次尝试才能获得正确答案（Python）

> ID：14766989
> 
> 赞同：0
> 
> 时间：2013-02-08T06:32:26.267
> 
> 标签：python, recursion, tkinter

我知道它必须递归地完成（我认为）但不太确定如何。在 def evaluate 中，它必须记录在给出正确答案之前调用了多少次评估。那就是我卡住的地方。

```
from tkinter import Label, Frame, Entry, Button, LEFT, RIGHT, END
from tkinter.messagebox import showinfo
from random import randrange

# Questions 1 and 2
class Ed(Frame):
    'Simple arithmetic education app'
     def __init__(self,parent=None):
         'constructor'
         Frame.__init__(self, parent)
         self.pack()
         Ed.make_widgets(self)
         Ed.new_problem(self)

     def make_widgets(self):
         'defines Ed widgets'
         self.entry1 = Entry(self,width = 15)
         self.entry1.pack(side = LEFT)
         self.entry2 = Entry(self,width = 15)
         self.entry2.pack(side = LEFT)
         self.button = Button(self, text = "Enter", command = self.evaluate)
         self.button.pack(side = RIGHT)

     def new_problem(self):
         'generates new numbers and decides whether + or -'
         self.entry1.delete(0,END)
         self.entry2.delete(0,END)
         num1 = randrange(0,10)
         num2 = randrange(0,10)
         signNum = randrange(1,3)
         if num1 < num2 and signNum == 2:
             self.new_problem()
         else:
             num1 = str(num1)
             num2 = str(num2)
             if signNum  == 1:
                 sign = "+"
             elif signNum == 2:
                 sign = "-"
             problem = (num1)+sign+(num2)
             self.entry1.insert(0,problem)
     def evaluate(self):
         'handles button "Enter" clicks by comparing answer in entry to correct  result'
         if eval(self.entry1.get()) == int(self.entry2.get()):
             showinfo(title = "Yes!",message = "You got it!")
             self.new_problem()
         else:
             self.entry2.delete(0,END)
     Ed.mainloop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T06:43:46.173

在 init 中添加一个实例变量：

```
def __init__(self,parent=None):
        'constructor'
        Frame.__init__(self, parent)
        self.pack()
        Ed.make_widgets(self)
        Ed.new_problem(self)
        self.triesCount = 0 
```

并在评估中更新它：

```
def evaluate(self):
        'handles button "Enter" clicks by comparing answer in entry to correct  result'
        if eval(self.entry1.get()) == int(self.entry2.get()):
            showinfo(title = "Yes!",message = "You got it!")
            self.new_problem()
        else:
            self.entry2.delete(0,END)
            self.triesCount += 1 
```

或者，您可以创建一个单独的问题类来封装所有问题操作和变量，并执行类似的操作来处理尝试计数。

# javascript - 动态 jQuery CSS 与 3 状态翻转 backgroundPosition 变化取决于状态

> ID：14766992
> 
> 赞同：0
> 
> 时间：2013-02-08T06:32:33.527
> 
> 标签：javascript, jquery, html, css, css-sprites

我的标题区域有一个 href，当用户单击此标题时，我想将页面背景从黑色更改为白色，并将导航按钮的颜色从白色更改为黑色。我的所有按钮的背景都是从三态样式表 PNG 应用的，并且我使用背景位置 CSS 通过更改背景位置以悬停效果显示它们。

我可以使用 jquery 执行此操作，方法是使用如下点击功能：

```
$('#HomeButton').click(function () {    
    if (!siteWhite) {
        $('body').css('backgroundColor', 'white');
        $('a.pageTitleButton').css({ 'backgroundPosition': '543px 0' });
        $('a.pageTitleButton:hover').css({ 'backgroundPosition': '-545px 0' });
    }
    else {
        $('body').css('backgroundColor', 'black');
        $('a.pageTitleButton').css({ 'backgroundPosition': '0px 0' });
        $('a.pageTitleButton:hover').css({ 'backgroundPosition': '-145px 0' });
    }

    // Reset site style white bool
    siteWhite = !siteWhite;
}); 
```

但是，我的按钮是具有 3 种状态的精灵表，一种黑色文本、白色文本和红色文本。当我以正常样式悬停在它随 jquery 更改之前，我的文本是白色的，悬停是红色的。我想要做的是当我点击标题并用jquery更改siteWhite bool，然后将页面背景更改为白色，我希望我的按钮的默认状态位于我的spritesheet的文本黑色位置，悬停在红色位置。当我使用上面的代码时，我的悬停在更改背景位置并将背景更改为白色后停止工作。

有没有更好的方法来解决这个问题？任何我试图做的解决方案或提示将不胜感激。在用户将 siteBlack 表单更改为 siteWhite 后，我不想加载一个全新的样式表来更改这些元素。

这是我的 CSS/HTML：

```
<a href="#Home" id="HomeButton" class="pageTitleButton"></a>

a.pageTitleButton {
    display: block;
    width: 546px;
    height: 56px;
    text-decoration: none;
    background: url('../Images/Rollovers/king_harobed.png');
    margin: 0px 1.5px 0px 0px;
    float: left;
}
a.pageTitleButton:hover {
    background-position: -545px 0;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:46:16.663

处理 CSS 中的所有样式要好得多，并且只在 jquery 中保留状态更改：

```
$('#HomeButton').click(function () {    
    if (!siteWhite) {
        $('body').addClass ('white');
    }
    else {
        $('body').removeClass ('white');
    }

    // Reset site style white bool
    siteWhite = !siteWhite;
}); 
```

你的CSS得到：

```
a.pageTitleButton {
    display: block;
    width: 546px;
    height: 56px;
    text-decoration: none;
    background: url('../Images/Rollovers/king_harobed.png');
    margin: 0px 1.5px 0px 0px;
    float: left;
    background-position: 0px 0;
}
a.pageTitleButton:hover {
    background-position: -145px 0;
}

body.white a.pageTitleButton {
    background-position: 543px 0;
}
body.white a.pageTitleButton:hover {
    background-position: -545px 0;
} 
```

您只需要在新选择器中指定从默认状态发生的变化，即背景位置。您还需要为主体创建规则以更改其颜色。

# java - 关于 Web 应用程序环境中的 Java Executor 框架

> ID：14766994
> 
> 赞同：1
> 
> 时间：2013-02-08T06:32:41.993
> 
> 标签：java, executorservice

我计划在我的一个 Web 应用程序中使用 executor 框架来处理后台进程，例如发送邮件和记录详细信息。当我开始阅读 Executor API 时，我了解到它提供了线程池工具。但是我有一个想法，就像我们在 Web 应用程序中不需要线程池机制。因为默认情况下我的应用程序服务器控制线程轮询并且没问题。所以我的观点是我们不需要在 Web 应用场景中实现线程池吗？这一点是对还是错？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T08:24:29.153

这取决于您指的是哪些线程。

用于处理进入应用服务器的请求的线程由容器本身处理。你不必担心这一点。

但是，如果您的应用程序需要处理由请求发起的较长任务，并且您希望快速响应请求，那么您可以让线程处理这些任务。为此，您可以在[应用程序启动](http://docs.oracle.com/javaee/7/api/javax/servlet/ServletContextListener.html)时启动多个线程，并在需要运行长任务时使用它们。[看到这个](https://stackoverflow.com/questions/4907502/running-a-background-java-program-in-tomcat)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-27T16:16:17.980

从 Java EE 7 开始，现在有一个 'ManagedExecutorService' ，它是 SE ExecutorService 的 EE 类似物。它被设计用于“托管环境”，即由运行在 EE 服务器中的应用程序使用。[http://docs.oracle.com/javaee/7/api/javax/enterprise/concurrent/ManagedExecutorService.html](http://docs.oracle.com/javaee/7/api/javax/enterprise/concurrent/ManagedExecutorService.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-17T16:39:04.993

**服务器容器为Java EE 应用程序**组件提供运行时支持

> （例如 servlet 和 Enterprise JavaBeansTM (EJBTM)）

. 它们在应用程序组件代码与平台服务和资源之间提供了一层。所有应用程序组件代码都在由容器管理的线程上运行，并且每个容器通常期望对容器提供的对象的所有访问都发生在同一线程上。

正是由于这种行为，应用程序组件通常无法从不受容器管理的线程中可靠地使用其他**Java EE 平台服务。****Java EE 产品提供商**也不鼓励以非托管方式使用资源，因为它可能会破坏平台旨在提供的企业功能，例如

> 可用性、安全性、可靠性和可扩展性。

检查此[链接](https://jcp.org/en/jsr/detail?id=236)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-08T06:58:57.073

这是不正确的。应用服务器确实管理自己的线程池，但执行器框架创建的线程不由应用服务器管理。

# jquery - jQuery在jsp页面中每5秒运行一次函数

> ID：14766998
> 
> 赞同：-1
> 
> 时间：2013-02-08T06:32:46.817
> 
> 标签：jquery

我的 jsp 页面中有以下脚本，我需要每 5 秒刷新（调用）一次以刷新要显示的数据：

```
$(document).ready(function () {

            var sampleData = <%=sms.getTimeline()%>;

            ...
        }); 
```

有人可以让我知道该怎么做吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T06:34:27.950

您可以使用 setInterval 在每个特定时间间隔后运行您的 javascript 代码或函数

**[帮助](http://www.w3schools.com/jsref/met_win_setinterval.asp)**