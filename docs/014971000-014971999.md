# StackOverflow 问答 14971000-14971999

# android - SchemaFactory.newInstance() 异常

> ID：14971004
> 
> 赞同：4
> 
> 时间：2013-02-20T01:53:17.203
> 
> 标签：android, xml-parsing, xsd, sax, xml-validation

我正在尝试针对 Android 架构检查 xml，但在函数的第一行，在创建**架构工厂实例**时，我得到了一个异常。

异常行：

> schemaFactory= SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);

我也使用过[XMLSchema-instance](http://www.w3.org/2001/XMLSchema-instance)和[XMLSchema](http://www.w3.org/2001/XMLSchema)，但一开始也遇到了同样的异常。

我看到很多其他人也有同样的问题，比如[this](https://stackoverflow.com/questions/3129934/schemafactory-doesnt-support-w3c-xml-schema-in-platform-level-8)，但我还没有找到这个问题的答案。

仅供参考 - 我在以下功能中使用它：

```
public static boolean validateWithExtXSDUsingSAX(String xml, String xsd) throws
        ParserConfigurationException, IOException {
    try {
        SAXParserFactory factory = SAXParserFactory.newInstance();
        factory.setValidating(false);
        factory.setNamespaceAware(true);

        SchemaFactory schemaFactory = null;
        try {
            schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
        } catch (Exception e) {
            System.out.println("schema factory error" + e.getMessage());
        }

        SAXParser parser = null;

        try {
            factory.setSchema(schemaFactory.newSchema(new Source[] { new StreamSource(xsd) }));
            parser = factory.newSAXParser();
        } catch (SAXException se) {
            System.out.println("SCHEMA : " + se.getMessage()); // problem in
                                                               // the XSD
                                                               // itself
            return false;
        }

        XMLReader reader = parser.getXMLReader();
        reader.setErrorHandler(

        new ErrorHandler() {

            public void warning(SAXParseException e) throws SAXException {
                System.out.println("WARNING: " + e.getMessage()); // do
                                                                  // nothing
            }

            public void error(SAXParseException e) throws SAXException {
                System.out.println("ERROR : " + e.getMessage());
                throw e;
            }

            public void fatalError(SAXParseException e) throws SAXException {
                System.out.println("FATAL : " + e.getMessage());
                throw e;
            }
        });

        reader.parse(new InputSource(xml));

        return true;
    } catch (ParserConfigurationException pce) {
        throw pce;
    } catch (IOException io) {
        throw io;
    } catch (SAXException se) {
        return false;
    }
} 
```

**编辑**：

Android 原始版本中包含的 Java XML 验证器存在一些问题。您可以尝试使用 Xerces，您可以在此处下载表格：

[http://code.google.com/p/xerces-for-android/](http://code.google.com/p/xerces-for-android/)

虽然下载部分没有下载，但您可以通过 SVN checkout 下载源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T22:27:50.933

我有同样的问题，并在那里发现了很多类似的问题，但没有很好的例子来说明如何做到这一点。以下是我使用 Xerces-for-Android 所做的工作，以使我的东西正常工作。祝你好运 ：）

以下对我有用：

1.  创建验证实用程序。
2.  将 xml 和 xsd 都放入 android 操作系统上的文件中，并针对它使用验证实用程序。
3.  使用 Xerces-For-Android 进行验证。

Android确实支持我们可以使用的一些包，我创建了我的xml验证实用程序基于：[http ://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/validation/package-summary.html](http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/validation/package-summary.html)

我最初的沙盒测试使用 java 非常顺利，然后我尝试将其移植到 Dalvik 并发现我的代码不起作用。Dalvik 不支持某些东西，所以我做了一些修改。

我找到了对 android 的 xerces 的引用，所以我修改了我的沙盒测试（**以下不适用于 android，之后的示例可以**）：

```
import java.io.File;

import javax.xml.XMLConstants;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.transform.Source;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamSource;
import javax.xml.validation.Schema;
import javax.xml.validation.SchemaFactory;
import javax.xml.validation.Validator;

import org.w3c.dom.Document;

/**
 * A Utility to help with xml communication validation.
 */
public class XmlUtil {

    /**
     * Validation method. 
     * Base code/example from: http://docs.oracle.com/javase/1.5.0/docs/api/javax/xml/validation/package-summary.html
     * 
     * @param xmlFilePath The xml file we are trying to validate.
     * @param xmlSchemaFilePath The schema file we are using for the validation. This method assumes the schema file is valid.
     * @return True if valid, false if not valid or bad parse. 
     */
    public static boolean validate(String xmlFilePath, String xmlSchemaFilePath) {

        // parse an XML document into a DOM tree
        DocumentBuilder parser = null;
        Document document;

        // Try the validation, we assume that if there are any issues with the validation
        // process that the input is invalid.
        try {
            // validate the DOM tree
            parser = DocumentBuilderFactory.newInstance().newDocumentBuilder();
            document = parser.parse(new File(xmlFilePath));

            // create a SchemaFactory capable of understanding WXS schemas
            SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);

            // load a WXS schema, represented by a Schema instance
            Source schemaFile = new StreamSource(new File(xmlSchemaFilePath));
            Schema schema = factory.newSchema(schemaFile);

            // create a Validator instance, which can be used to validate an instance document
            Validator validator = schema.newValidator();
            validator.validate(new DOMSource(document));
        } catch (Exception e) {
            // Catches: SAXException, ParserConfigurationException, and IOException.
            return false;
        }     

        return true;
    }
} 
```

上面的代码必须进行一些修改才能与 xerces for android ( [http://gc.codehum.com/p/xerces-for-android/](http://gc.codehum.com/p/xerces-for-android/) ) 一起使用。你需要SVN来获取项目，以下是一些婴儿床笔记：

```
download xerces-for-android
    download silk svn (for windows users) from http://www.sliksvn.com/en/download
        install silk svn (I did complete install)
        Once the install is complete, you should have svn in your system path.
        Test by typing "svn" from the command line.
        I went to my desktop then downloaded the xerces project by:
            svn checkout http://xerces-for-android.googlecode.com/svn/trunk/ xerces-for-android-read-only
        You should then have a new folder on your desktop called xerces-for-android-read-only 
```

使用上面的jar（最终我会把它做成一个jar，直接复制到我的源代码中以便快速测试。如果你想这样做，你可以用Ant快速制作jar（[http://ant.apache .org/manual/using.html](http://ant.apache.org/manual/using.html) ))，我能够获得以下内容来进行我的 xml 验证：

```
import java.io.File;
import java.io.IOException;

import mf.javax.xml.transform.Source;
import mf.javax.xml.transform.stream.StreamSource;
import mf.javax.xml.validation.Schema;
import mf.javax.xml.validation.SchemaFactory;
import mf.javax.xml.validation.Validator;
import mf.org.apache.xerces.jaxp.validation.XMLSchemaFactory;

import org.xml.sax.SAXException;

/**
 * A Utility to help with xml communication validation.
 */public class XmlUtil {

    /**
     * Validation method. 
     * 
     * @param xmlFilePath The xml file we are trying to validate.
     * @param xmlSchemaFilePath The schema file we are using for the validation. This method assumes the schema file is valid.
     * @return True if valid, false if not valid or bad parse or exception/error during parse. 
     */
    public static boolean validate(String xmlFilePath, String xmlSchemaFilePath) {

        // Try the validation, we assume that if there are any issues with the validation
        // process that the input is invalid.
        try {
            SchemaFactory  factory = new XMLSchemaFactory();
            Source schemaFile = new StreamSource(new File(xmlSchemaFilePath));
            Source xmlSource = new StreamSource(new File(xmlFilePath));
            Schema schema = factory.newSchema(schemaFile);
            Validator validator = schema.newValidator();
            validator.validate(xmlSource);
        } catch (SAXException e) {
            return false;
        } catch (IOException e) {
            return false;
        } catch (Exception e) {
            // Catches everything beyond: SAXException, and IOException.
            e.printStackTrace();
            return false;
        } catch (Error e) {
            // Needed this for debugging when I was having issues with my 1st set of code.
            e.printStackTrace();
            return false;
        }

        return true;
    }
} 
```

**一些旁注：**

为了创建文件，我制作了一个简单的文件实用程序来将字符串写入文件：

```
public static void createFileFromString(String fileText, String fileName) {
    try {
        File file = new File(fileName);
        BufferedWriter output = new BufferedWriter(new FileWriter(file));
        output.write(fileText);
        output.close();
    } catch ( IOException e ) {
       e.printStackTrace();
    }
} 
```

我还需要写一个我可以访问的区域，所以我使用了：

```
String path = this.getActivity().getPackageManager().getPackageInfo(getPackageName(), 0).applicationInfo.dataDir; 
```

有点hackish，它有效。我确信有一种更简洁的方法可以做到这一点，但是我想我会分享我的成功，因为我没有找到任何好的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-26T07:38:38.720

从 google 存储库下载 jar 文件[xerces-for-android.jar的链接。](https://xerces-for-android.googlecode.com/issues/attachment?aid=10001000&name=xerces-for-android.jar&token=ABZ6GAc7O-z2sUWIxY-w5VwRzPTAD6yFww%3A1419578867304)

如果以上链接不可用，请使用此页面下载：[xerces](https://code.google.com/p/xerces-for-android/issues/detail?id=1)

# html - 如何阻止 html/css 对象调整大小

> ID：14971011
> 
> 赞同：0
> 
> 时间：2013-02-20T01:53:48.643
> 
> 标签：html, css, twitter-bootstrap

我正在将 Twitter 引导程序用于制作 CSS 足球场的应用程序。我最初是通过下载 Twitter 引导程序并将其放入我的应用程序来构建应用程序的。然而，为了利用 LESS，我创建了一个新应用程序，在其中安装了带有用于 Rails 应用程序的 gem 的 Twitter 引导程序。在这个新应用程序中，如果我改变浏览器的大小，足球场的尺寸就会改变（看起来很糟糕）。在旧应用程序中，我可以调整浏览器的大小，并且该字段将保持不变。到目前为止，我使用的 CSS 完全相同（即我没有在这个新应用程序中包含任何 LESS）并且 HTML 也是相同的，因此，我不确定要包含哪些代码这个问题。从我的

这是足球场的代码，虽然因为它在我的原始应用程序中工作，我不知道用这个标记改变任何东西是否会有所不同，但布局也没有改变。

请注意，我喜欢响应式网站的想法，但是，我需要足球场保持相同的大小，所以如果可以使用 css 对其进行处理以确保它不会调整大小，我会很满意。

```
 <div class="span3 field">
           <div class="row endzonenorth">

           </div>

       <div class="row field">
                <span class="qb"></span>
         <div class="horizontalRule">
                    <span class="funnyzone">&nbsp; &nbsp; &nbsp;END ZONE</span>
                </div> 
            <div class="horizontalRule">
             <div class="number right">10</div>
             <div class="number left">10</div>
                </div>
             <div class="horizontalRule">
             <div class="number right">20</div>
             <div class="number left">20</div>
                 </div>
             <div class="horizontalRule">
             <div class="number right">30</div>
             <div class="number left">30</div>
                 </div>
             <div class="horizontalRule">
             <div class="number right">40</div>
             <div class="number left">40</div>
                 </div>
             <div class="horizontalRule">
              <div class="number right">50</div>
             <div class="number left">50</div>
                 </div>
             <div class="horizontalRule">
                  <div class="number right">40</div>
             <div class="number left">40</div>
             </div>
             <div class="horizontalRule">
                 <div class="number right">30</div>
             <div class="number left">30</div>
             </div>
             <div class="horizontalRule">
                 <div class="number right">20</div>
             <div class="number left">20</div>
             </div>
             <div class="horizontalRule">
                 <div class="number right">10</div>
             <div class="number left">10</div>
             </div>
             <div class="horizontalRule">
                <span class="funnyzonesouth">END ZONE</span>
             </div>

       </div>
       <div class="row endzonesouth">

       </div>
     </div> 
```

CSS：

```
div.horizontalRule
{
clear:both;
width:100%;
background-color:#fff;
height:1px;
margin-top:30px;
margin-bottom:30px;
display: block;
opacity: .75;
}

.number.right{
    color: #fff;
    position: absolute;
    right: 40px;
    margin-top: -10px;
}
.number.left{
    color: #fff;
    position: absolute;
    left: 40px;
    margin-top: -10px;
}
.funnyzone{

    opacity: .75;

    /*top: 7px;*/
    position: absolute;
    color: #fff;
    font-size: 22px;
    margin-top: -25px;
    margin-left: 15px;

}
.funnyzonesouth{
    font-size: 22px;
    color: #fff;
    opacity: .75;
    margin-top: 4px;
    margin-left: 40px;
    /*bottom: -3px;*/
    position: absolute;
    transform:rotate(180deg);
-ms-transform:rotate(180deg); /* IE 9 */
-moz-transform:rotate(180deg); /* Firefox */
-webkit-transform:rotate(180deg); /* Safari and Chrome */
-o-transform:rotate(180deg); /* Opera */

}

.span3.field{

  background-color: rgb(96, 211, 43);
}
.row.field{
    width: 90%;
  background-color: #56a636;
    position: relative;
    margin-left: auto;
    margin-right: auto;
}
.row.endzonenorth{
    width: 90%;
    height: 25px;
  background-color: #56a636;
    color: #fff;
    font-size: 22px;
    margin-left: auto;
    margin-right: auto;

}
.row.endzonesouth{
    width: 90%;
    height: 25px;
  background-color: #56a636;
    color: #fff;
    font-size: 24px;
    margin-left: auto;
    margin-right: auto;

}
.row.endzone{
    height: 30px;
  background-color: #56a636;
}
.line {
    color: white; 
    display: block;
    padding-top: 10px;
    padding-bottom: 10px;
    opacity: 0.55,

}
.linea{
    padding-top: 10px;
    padding-bottom: 10px;
    color: white;
    display:block;

}

.leftvertical {
    width:1px;
    height:410px;
    background-color:#fff;
    opacity: .55;

    position: absolute;
    left:50px;
}

.rightvertical {
    width:1px;
    height:410px;
    background-color:#fff;
    opacity: .55;

    position: absolute;
    right:50px;
}

.number.left
{
transform:rotate(90deg);
-ms-transform:rotate(90deg); /* IE 9 */
-moz-transform:rotate(90deg); /* Firefox */
-webkit-transform:rotate(90deg); /* Safari and Chrome */
-o-transform:rotate(90deg); /* Opera */
}

.number.right
{
transform:rotate(270deg);
-ms-transform:rotate(270deg); /* IE 9 */
-moz-transform:rotate(270deg); /* Firefox */
-webkit-transform:rotate(270deg); /* Safari and Chrome */
-o-transform:rotate(270deg); /* Opera */
}

.row.endzone{

width: 90%;
}

.row.endzone2{

width: 90%;
}

.qb{
position: absolute;
width: 50px;
height: 50px;
background-image: url('/assets/qb.png');
/*background-color: #fff;*/
left: 75px;
top: 300px;
visibility:hidden;
}

.span4.offset4{

-webkit-border-radius: 3px;
-moz-border-radius: 3px;
border-radius: 3px;
font-size: 25px;
font-weight: bold;
min-height: 30px;
text-align: center; 
/*width: 100%;*/
display: inline-block;

}
.row.main{

  padding-top: 20px;
}
.span6.offset2{

-webkit-border-radius: 3px;
-moz-border-radius: 3px;
border-radius: 3px;
/*font-size: 25px;*/
padding-top: 10px;
font-size: 16px;
font-weight: bold;
min-height: 30px;
text-align: center; 
/*width: 100%;*/
display: inline-block;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:04:26.263

您似乎使用的是相对宽度尺寸，即 100%。而是尝试使用绝对宽度，即 500 像素；或者，尝试为您的容器设置宽度。

```
.span3.field{
    width:500px;
    background-color: rgb(96, 211, 43);
} 
```

希望这个对你有帮助..

# javascript - 更改 jQuery 掩码，如果

> ID：14971015
> 
> 赞同：0
> 
> 时间：2013-02-20T01:54:03.560
> 
> 标签：javascript, jquery, hide, option

### 所有州的手机口罩：(99) 9999-9999

### 圣保罗（巴西）的手机口罩：(99) 99999-9999

它比其他状态多一个数字。我`<option value="STATE_ACRONYM">`列出了所有州，圣保罗是“SP”

# 我需要的

When option value = "SP", output specific mask

```
 <script>
jQuery(function($){
       $("#celular").mask("(99) 9999-9999");
       $("#celular_sp").mask("(99) 99999-9999");
});
</script>

        <label for="celular">Telefone Celular</label>
             <span class="w">
                <input tabindex="1" class="input" id="celular" type="text" />
        </span>

         <label for="estado">Estado</label>
        <select id="estado" style="width:300px;">
            <option value="">Selecione</option>
            <option value="AC">Acre</option>
            <option value="AL">Alagoas</option>
            <option value="AP">Amap&aacute;</option>
            <option value="AM">Amazonas</option>
            <option value="BA">Bahia</option>
            <option value="CE">Cear&aacute;</option>
            <option value="DF">Distrito Federal</option>
            <option value="ES">Esp&iacute;rito Santo</option>
            <option value="GO">Goi&aacute;s</option>
            <option value="MA">Maranh&atilde;o</option>
            <option value="MT">Mato Grosso</option>
            <option value="MS">Mato Grosso do Sul</option>
            <option value="MG">Minas Gerais</option>
            <option value="PA">Par&aacute;</option>
            <option value="PB">Para&iacute;ba</option>
            <option value="PR">Paran&aacute;</option>
            <option value="PE">Pernambuco</option>
            <option value="PI">Piau&iacute;</option>
            <option value="RJ">Rio de Janeiro</option>
            <option value="RN">Rio Grande do Norte</option>
            <option value="RS">Rio Grande do Sul</option>
            <option value="RO">Rond&ocirc;nia</option>
            <option value="RR">Roraima</option>
            <option value="SC">Santa Catarina</option>
            <option value="SP">S&atilde;o Paulo</option>
            <option value="SE">Sergipe</option>
            <option value="TO">Tocantins</option>
        </select> 
```

# 可能的解决方案

如果`<option value="SP">`，那么`div.celular_sp{style="display:block !important}`（在这里编造编程语言，因为我不懂 PHP）

```
 <label for="celular">Telefone Celular</label>
             <span class="w">
                <input tabindex="1" class="input" id="celular" type="text" />
        </span>

        <label for="celular_sp" style="display:none">Telefone Celular - São Paulo</label>
             <span class="w">
                <input tabindex="1" class="input" id="celular_sp" type="text" />
         </span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:01:52.857

为什么要为电话号码使用两个字段？只需在状态更改时更改/添加掩码。在javascript中；这不能/不应该用像 php 这样的服务器端语言来完成。

就像是：

```
$("#estado").on("change", function() {
  if ($(this).val() == 'SP') {
    $("#celular").mask("(99) 99999-9999");
  } else {
    $("#celular").mask("(99) 9999-9999");
  }
}); 
```

**编辑：**请注意，您至少需要 jQuery 1.7 才能使用[`on()`](http://api.jquery.com/on/).

# c - 键盘映射的后台c程序

> ID：14971020
> 
> 赞同：2
> 
> 时间：2013-02-20T01:54:54.880
> 
> 标签：c, windows, fonts

我在我的 Windows 8 系统中安装了一个 Bramm TTF 文件。通过windows字符映射，我能够找到单个字符代码。附在地图截图下方。我们可以在右下角看到“！”的字符代码 是 0x21。同样，我可以找到所有其他字母的所有字符代码。

![Bramma TTF 的字符映射](../Images/4762f12f53a922b695b18de351b4f573.png)

现在，我使用基于美国的键盘布局为该字体定义了一个字符映射。例如，我将键盘中的物理字符“a”映射到第 3 行第 1 列中显示的字符。[每当我从键盘上按“a”时，必须显示相应的字符]

我想编写一个后台 C 程序，以便它监听键盘敲击，并且根据我之前定义的字符映射，我的 C 程序应该输出该映射字符。即，当我从键盘点击字符“a”时，它应该返回映射的字符。

任何人都可以帮助我解决这个问题，或者只是给我一个解决方案的线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T17:07:32.803

我对这些字体有点熟悉，它们出现在 SO 的其他问题中。试图处理使用这种字体的后果的用户提出的问题。他们比较严重。

最大的问题是这种字体不兼容 Unicode。呈现到屏幕上的文本的实际字符串非常不同，包含来自 ANSI 字符集的字符。可怕**的**错误是当显示这些字符串的程序保存数据时。数据文件包含原始字符串，一个很好的例子是 Excel 电子表格。当任何其他程序读取此电子表格时，它只会包含乱码。当被另一台没有安装相同字体的机器上的程序读取时尤其糟糕。非常**非常**痛苦。

实际上，您甚至破坏了键盘到 ANSI 字符之间的法线映射，从而使这个问题变得更糟。第 3 行中的第一个字符是通过在键盘上键入大写 I（眼睛）产生的。

信息很明确：**不要这样做**。Windows 很好地支持带有印度脚本的 Unicode 兼容字体，如 Sylfaen、Mangal、Latha 等字体。所有这些都在我的 Windows 8 机器上可用，距离它们通常使用的地方大约一万英里。它还在语言小程序下提供了印度语键盘布局，我只是选择了一个作为示例：

![在此处输入图像描述](../Images/20c53265ffe820c4b90ce1cf6029f9af.png)

好吧，这是你的葬礼。您不必编写 C 程序来翻译这些击键，您需要自定义键盘布局。它是一个 DLL。您通常需要 DDK 来构建它们，但有一些简单的工具可用于自动生成它们。没有比使用 MKLC（Microsoft 键盘布局创建器）更容易的了。网页和下载链接[在这里](http://msdn.microsoft.com/en-us/goglobal/bb964665.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T23:29:44.987

Google 的虚拟键盘（也适用于您的物理键盘）

```
https://code.google.com/apis/ajax/playground/#virtual_keyboard 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T08:12:58.233

[http://www.tavultesoft.com/](http://www.tavultesoft.com/)允许您为 MSWindows 和网络创建键盘。随时提供超过 1000 个键盘。有开发者版本和用户版本。使用开发人员版本，您可以创建安装程序来安装字体、键盘、键盘映射和文档。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T14:46:28.273

可能你应该使用[autohotkey](http://autohotkey.com/)。使用此应用程序，您可以收听一组键，然后发送一组不同的键。

这可以用作“自动更正”的实现

例如

```
:*:btw::By the way ` 
```

将自动更正`btw`为`By the way`.

autohotkey 支持相当复杂的脚本，并且许多脚本已经在线可用。

另一方面，如果您只想用英文键盘打印马拉雅拉姆语 unicode 字符，您可能还会想到一个名为[baraha的流行软件](http://www.baraha.com/)

# google-app-engine - 谷歌应用引擎不再接受二进制文件上传

> ID：14971021
> 
> 赞同：2
> 
> 时间：2013-02-20T01:54:55.637
> 
> 标签：google-app-engine

我使用 kay 框架已经有一段时间了，但是自从我上次更新应用引擎以来，我无法上传非纯 ASCII 文件......

我得到的错误是：

> UnicodeDecodeError：“ascii”编解码器无法解码位置 0 的字节 0xff：序数不在范围内（128）

这是完整的日志：

```
MacBook-Pro-de-Erwann:scrollshowPROD diwann$ python manage.py appcfg update
Running on Kay-2.0.0qa1
Compiling templates...
Now compiling templates in www/templates to www/templates_compiled.
Now compiling templates in user/templates to user/templates_compiled.
Now compiling templates in presentation/templates to presentation/templates_compiled.
Now compiling templates in /Users/diwann/Source/scrollshow/scrollshow-web/lexman/scrollshowPROD/kay/auth/templates to /Users/diwann/Source/scrollshow/scrollshow-web/lexman/scrollshowPROD/kay/auth/templates_compiled.
Now compiling templates in /Users/diwann/Source/scrollshow/scrollshow-web/lexman/scrollshowPROD/presentation/templates to /Users/diwann/Source/scrollshow/scrollshow-web/lexman/scrollshowPROD/presentation/templates_compiled.
Now compiling templates in /Users/diwann/Source/scrollshow/scrollshow-web/lexman/scrollshowPROD/user/templates to /Users/diwann/Source/scrollshow/scrollshow-web/lexman/scrollshowPROD/user/templates_compiled.
Now compiling templates in /Users/diwann/Source/scrollshow/scrollshow-web/lexman/scrollshowPROD/www/templates to /Users/diwann/Source/scrollshow/scrollshow-web/lexman/scrollshowPROD/www/templates_compiled.
Finished compiling templates...
02:36 AM Host: appengine.google.com
02:36 AM Application: scrollshow; version: 1
02:36 AM 
Starting update of app: scrollshow, version: 1
02:36 AM Getting current resource limits.
02:36 AM Scanning files on local disk.
Could not guess mimetype for static/assets/themes/plimse/California beach/Repertoire temporaire pour combler un ancien nom de theme.  Using application/octet-stream.
02:37 AM Scanned 500 files.
Could not guess mimetype for static/assets/themes/plimse/California beach/Repertoire temporaire pour combler un ancien nom de theme.  Using application/octet-stream.
02:37 AM Cloning 430 static files.
02:37 AM Cloning 466 application files.
02:37 AM Uploading 3 files and blobs.
02:37 AM Missing File Path : static/assets/themes/plimse/textures/scrollViewTexturedBackgroundColor_web.jpg
02:37 AM Missing File Path : static/assets/themes/plimse/textures/underPageBackgroundColor_web.jpg
02:37 AM Missing File Path : static/media/js/scrollshowReader.js
02:37 AM File Path : static/assets/themes/plimse/textures/scrollViewTexturedBackgroundColor_web.jpg
ERROR:root:An unexpected error occurred. Aborting.
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 2302, in DoUpload
    self.blob_batcher.Flush()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 1579, in Flush
    self.SendBatch()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 1536, in SendBatch
    payload,
UnicodeDecodeError: 'ascii' codec can't decode byte 0xff in position 0: ordinal not in range(128)
02:37 AM Rolling back the update.
Traceback (most recent call last):
  File "manage.py", line 24, in <module>
    script.run()
  File "/Users/diwann/Source/scrollshow/scrollshow-web/lexman/scrollshowPROD/kay/lib/werkzeug/script.py", line 121, in run
    return func()
  File "/Users/diwann/Source/scrollshow/scrollshow-web/lexman/scrollshowPROD/kay/management/appcfg.py", line 58, in do_appcfg_passthru_argv
    result = app.Run()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 2688, in Run
    self.action(self)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 4235, in __call__
    return method()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 3247, in Update
    self.UpdateVersion(rpcserver, self.basepath, appyaml, yaml_file_basename)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 3196, in UpdateVersion
    return appversion.DoUpload(paths, openfunc)
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 2302, in DoUpload
    self.blob_batcher.Flush()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 1579, in Flush
    self.SendBatch()
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/appcfg.py", line 1536, in SendBatch
    payload,
UnicodeDecodeError: 'ascii' codec can't decode byte 0xff in position 0: ordinal not in range(128) 
```

*请注意，“缺少文件路径”部分是我自己添加的，以便知道是哪些文件导致了错误*

首先似乎我的代码的某些字符不再被允许，在我将它们全部删除后，我成功地将我的应用程序上传到应用程序引擎。但是现在，我需要上传一张图片，它仍然抱怨它不是 ASCII ......（这个日志说它无法上传文件“scrollViewTexturedBackgroundColor_web.jpg”，因为第一个字符不是 ascii）......

在 kay 或 app engine 中有什么需要设置的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T23:42:19.073

我在 kay user mailing list 上得到了答案。他们说直接使用 google_appengine/appcfg.py 。

注意：这是我所做的完整命令行：

> python /Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/appcfg.py 更新。

# ckeditor - ckeditor在保存时添加标签

> ID：14971023
> 
> 赞同：0
> 
> 时间：2013-02-20T01:55:05.653
> 
> 标签：ckeditor

我的电子邮件中有 ckeditor，但是当我保存模板并再次打开它时，html 标签会再次添加到其中。

例如：我的原始电子邮件：

```
 <font size="3"><span style="font-family: Arial, Sans Serif;">Hi there<br /> dfgs </span>
    </font> <h2 style="color: blue;">   <font size="3"><span style="font-family: Arial, Sans Serif;">dfsg</span></font>
</h2> <font size="3"><span style="font-family: Arial, Sans Serif;">cdgfs<br /> <span style="font-family:courier new,courier,monospace;">dgfs</span></span></font><br /> 
```

当我保存它并再次打开它进行编辑而不是保存它时，这就是我得到的：

```
<font size="3"><span style="font-family: Arial, Sans Serif;"><font size="3"><span style="font-family: Arial, Sans Serif;"><font size="3"><span style="font-family: Arial, Sans Serif;">Hi there<br />
dfgs </span></font> </span></font> </span></font>
<h2 style="color: blue;">
    <font size="3"><span style="font-family: Arial, Sans Serif;"><font size="3"><span style="font-family: Arial, Sans Serif;"><font size="3"><span style="font-family: Arial, Sans Serif;">dfsg</span></font></span></font></span></font></h2>
<font size="3"><span style="font-family: Arial, Sans Serif;"><font size="3"><span style="font-family: Arial, Sans Serif;"><font size="3"><span style="font-family: Arial, Sans Serif;">cdgfs<br />
<span style="font-family:courier new,courier,monospace;">dgfs</span></span></font></span></font></span></font><br /> 
```

它在我保存时不断添加，我有办法解决这个问题。

谢谢

编辑：版本 - 3.6.5

CKEDITOR.config.height = 600;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:55:36.137

它适用于我在 CKEDITOR 4.0.1 中禁用[autoParagraph](http://docs.ckeditor.com/#!/api/CKEDITOR.config-cfg-autoParagraph)。它似乎也在 v3 分支的最后一个版本中工作。所以...

1.  你用的是什么版本的CKE？这就像算命一样。
2.  还要发布您的配置和运行编辑器的方式。

# sql - 检查表的内部联接包含未按预期工作的相同值

> ID：14971027
> 
> 赞同：0
> 
> 时间：2013-02-20T01:55:38.243
> 
> 标签：sql, duplicates, inner-join

```
从 own.no_preselection_1_a 中选择 COUNT(1)；
SELECT COUNT(1) FROM own.no_preselection_1;

选择计数（1）从
  (SELECT DISTINCT * FROM own.no_preselection_1_a
  );

选择计数（1）从
  (SELECT DISTINCT * FROM own.no_preselection_1
  );

选择计数（1）
FROM OWN.no_preselection_1 t1
INNER JOIN OWN.no_preselection_1_a t2
ON t1.number = t2.number
AND t1.location_number = t2.location_number;

```

这将返回：

```
计数(1)               
----------------------
398                    

计数(1)               
----------------------
398                    

计数(1)               
----------------------
308                    

计数(1)               
----------------------
308                    

计数(1)               
----------------------
578                    

```

如果我们在这里查看连接的视觉解释：http: [//www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

问题出在最后一个查询上。我会认为如果集合是相同的（即完美重叠），那么内部连接将返回一个与原始集合大小相同的集合。

问题是每个重复项*都*在为彼此创建条目吗？（例如，如果每个表上有 3 个相同值的重复值，它会为它创建 3x3 = 9 个条目？）这里的解决方案是什么？（只需选择不同的值来进行内部连接？）这是检查两个表是否包含相同数据的好测试吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T01:58:18.477

您的表中有重复项，因为列表中的第一个和第三个以及第二个和第四个计数清楚地表明了这一点。

连接正常工作，所以没有“问题”。你想达到什么目的？加入不满足您的目标。

我建议你用一些实际数据和你想要的结果来注释你的问题。

如果要显示两个表具有相同的值，可以尝试联合。假设两个表中的所有列都相同，并且一行中的列唯一标识每一行：

```
select t.*
from ((select '1' as which, t.*
       from OWN.no_preselection_1 t
      ) union all
      (select '1-a' as which, t.*
       from OWN.no_preselection_1_a
      )
     ) t
group by < all the columns in the tables >
having count(*) <> 1 
```

如果您仅限于两列并想查看是否有相应的条目（有重复项），则以下工作：

```
select t.*
from ((select '1' as which, number, location_number,
              row_number() over (partition by number, location_number order by number) as seqnum
       from OWN.no_preselection_1 t
      ) union all
      (select '1-a' as which, number, location_number,
              row_number() over (partition by number, location_number order by number) as seqnum
       from OWN.no_preselection_1_a
      )
     ) t
group by number, location_number, seqnum
having count(*) <> 1 
```

# javascript - 无法在适当的时间调用域上的 dispose

> ID：14971028
> 
> 赞同：4
> 
> 时间：2013-02-20T01:55:40.137
> 
> 标签：javascript, node.js, express, middleware, node.js-domains

我的`domain`模块有问题。目前，我正在尝试捕获请求中抛出的任何未捕获的错误。使用`express`中间件和域。所有请求都通过此函数进行路由，然后再调用`next`并转到正确的路由。

```
app.use (req, res, next) ->
    domain = createDomain()
    domain.on "error", (err) ->
        res.send(500)
        domain.dispose()

    domain.enter()
    next() 
```

问题是，如果从未抛出错误，我该如何处理域？

我可以在中间件之外提升域和事件，所以我不必处理，但是我将无法访问我需要发送 500 的中间件参数。

有没有人对我如何处理这个问题有更好的解决方案？我花了太多时间试图找出一种方法（以及许多 hacky 方法）来处理这个问题。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-06T10:14:11.673

`domain.dispose()`如果没有发生错误，您不需要调用。的目的`domain.dispose()`是清理任何在跳出堆栈中间后处于不确定状态的资源，并抑制由于状态不佳而可能发生的后续错误。的反向调用`domain.enter()`很简单`domain.exit()`。

也就是说，浏览域的代码，看起来您不想以这种方式使用`domain.enter`/ 。`exit`每个 domain.enter/exit 对应于 domain 模块代码中一个共享数组的栈 push/pop。因此，例如，如果第二个请求在第一个请求完成之前进入，然后第一个请求在第二个完成之前退出，则在第一个域处理程序中调用 exit 将弹出第二个请求的域。似乎很有可能进入和退出不应该在异步事物中分开。

您是否尝试过简单地使用`domain.run(next)`？这似乎对我有用。它基本上是为你进入域，然后调用你给它的回调，然后在回调返回后立即退出域。在域中创建的任何计时器或事件发射器也将与该域相关联。事件发射器在调用事件处理程序时也使用类似的进入-调用-退出模式。从代码中可以看出，跟踪事件处理程序的不是域，而是跟踪域的事件处理程序。

简而言之，不要尝试将 enter 与 dispose 配对，也不要尝试跨异步边界使用 enter/exit。使用运行/绑定/添加/删除。

# javascript - 计算比率差异？

> ID：14971030
> 
> 赞同：0
> 
> 时间：2013-02-20T01:55:52.503
> 
> 标签：javascript, jquery, html, resize

在我们的网站上，我们有视频缩略图，单击缩略图会在模式对话框中打开视频。

视频本身是 16:9，但播放器底部有额外的细节，所以没有。

在对话框中，我们有两个按钮，增长和收缩。

按钮以 (originalsize (*|/) growBy) 为单位增大/缩小播放器。因此，对于原始步长的 50%，growBy 将是 1.5。

无论如何，这一切都很好，并显示在代码块 #1 中，

我遇到的问题是我需要设置一个限制，这样，如果要求对话框超出窗口的宽度或高度，它将简单地增长到它可以的（按比例）最大尺寸。

例如，如果我们被要求超出窗口的最大宽度，对话框宽度（包括填充）将等于窗口宽度，但高度不会（当然，除非对话框比例恰好与窗口匹配，但这不太可能！）

相反，如果我们被要求超出窗口的最大高度，对话框高度（包括填充）将等于窗口高度，但高度不会（再次除非对话框比例恰好与窗口匹配） .

这就是我被卡住的地方，我的尝试是在代码块 #2 中，现在我只是在检查高度是否太大，但我可以很好地完成高度，问题是，我没有知道如何计算调整高度步长时的宽度。有趣的代码在 Code Block pre#2 中。

如果我的想法是正确的，我需要计算出百分比`videoStep.height` `tempStep.height`是多少，然后设置`tempStep.width`为`videoStep.width+ (videoStep.width*percentage)`？

但我试着做：

```
var percentage = tempStep.height/videoStep.height;
tempStep.width = videoStep.width+(videoStep.width*percentage); 
```

代替

```
tempStep.width = (newDialogSize.width-videoDialogSize.padding.width) - windowSize.width; 
```

但是由于视频比例丢失，宽度似乎放大太多（播放器比例变为 586:281）

### 代码块 pre#2

```
var windowSize = {
    height: $(window).height(),
    width: $(window).width()
};

useTempStep = false;
var fullDialogSize = {
    height: newDialogSize.height+videoDialogSize.padding.height,
    width: newDialogSize.width+videoDialogSize.padding.width
};
if(fullDialogSize.height > windowSize.height){

    $growButton.addClass('disabled');

    tempStep.height = (newDialogSize.height-videoDialogSize.padding.height) - windowSize.height;
    tempStep.width = (newDialogSize.width-videoDialogSize.padding.width) - windowSize.width;

    useTempStep = true;

    newPlayerSize = sizeCalc(currentPlayerSize, tempStep, action);
    newDialogSize = {
        height: newPlayerSize.height + dialogDifference.height,
        width: newPlayerSize.width + dialogDifference.width //This line is not being calculated right!
    };

} 
```

### 代码块 #1

```
function sizeCalc(currentPlayerSize, step, action){
    var newPlayerSize;
    if (action == 'grow') {
        newPlayerSize =  {
            height: currentPlayerSize.height + step.height,
            width: currentPlayerSize.width + step.width
        };
    } else {
        newPlayerSize =  {
            height: currentPlayerSize.height - step.height,
            width: currentPlayerSize.width - step.width
        };
    }

    return newPlayerSize;
}

var $videoDialog = $('#video');
var $videoPlayer = $('#video-player_wrapper');
var $growButton = $('.resizeVideo[data-action="grow"]', $videoDialog);
var $shrinkButton = $('.resizeVideo[data-action="shrink"]', $videoDialog);
var growBy = 1.5;
var videoPlayerSize = {
    height: $videoPlayer.height()
};

var videoDialogSize = {
    height: $videoDialog.height(),
    width: $videoDialog.width()
};

var dialogDifference = {
    height: videoDialogSize.height - videoPlayerSize.height,
    width: videoDialogSize.width - videoPlayerSize.width
};

var videoStep = {
    height: (videoPlayerSize.height*growBy)-videoPlayerSize.height,
    width: (videoPlayerSize.width*growBy)-videoPlayerSize.width
};

var clickHandler = function () {
    var button = $(this);

    var action = button.data('action');

    var currentPlayerSize = {
        height: $videoPlayer.height(),
        width: $videoPlayer.width()
    };

    var newPlayerSize = sizeCalc(currentPlayerSize, videoStep, action);

    var newDialogSize = {
        height: newPlayerSize.height + dialogDifference.height,
        width: newPlayerSize.width + dialogDifference.width
    };

    var windowSize = {
        height: $(window).height(),
        width: $(window).width()
    };

    var newMargin = -(newDialogSize.width / 2);

    $videoDialog.animate({
        height: newDialogSize.height,
        width: newDialogSize.width,
        marginLeft: newMargin
    });

    $videoPlayer.animate({
        height: newPlayerSize.height,
        width: newPlayerSize.width
    });
};

$growButton.on('click', clickHandler);
$shrinkButton.on('click', clickHandler); 
```

### 代码块 #2

```
function sizeCalc(currentPlayerSize, step, action){
    var newPlayerSize;
    if (action == 'grow') {
        newPlayerSize =  {
            height: currentPlayerSize.height + step.height,
            width: currentPlayerSize.width + step.width
        };
    } else {
        newPlayerSize =  {
            height: currentPlayerSize.height - step.height,
            width: currentPlayerSize.width - step.width
        };
    }

    return newPlayerSize;
}

var $videoDialog = $('#video');
var $videoPlayer = $('#video-player_wrapper');
var $growButton = $('.resizeVideo[data-action="grow"]', $videoDialog);
var $shrinkButton = $('.resizeVideo[data-action="shrink"]', $videoDialog);
var growBy = 1.5;
var videoPlayerSize = {
    height: $videoPlayer.height(),
    width: $videoPlayer.width()
};

var videoDialogSize = {
    height: $videoDialog.height(),
    width: $videoDialog.width(),
    padding: {
        height: $videoDialog.outerHeight() - $videoDialog.height(),
        width: $videoDialog.outerWidth() - $videoDialog.width()
    }
};

var dialogDifference = {
    height: videoDialogSize.height - videoPlayerSize.height,
    width: videoDialogSize.width - videoPlayerSize.width
};

var videoStep = {
    height: (videoPlayerSize.height*growBy)-videoPlayerSize.height,
    width: (videoPlayerSize.width*growBy)-videoPlayerSize.width
};

var tempStep = {
    height: 0,
    width: 0
};

var useTempStep = false;

var clickHandler = function () {
    var button = $(this);

    if(button.hasClass('disabled')){
        return;
    }

    $growButton.removeClass('disabled');

    var action = button.data('action');

    var currentPlayerSize = {
        height: $videoPlayer.height(),
        width: $videoPlayer.width()
    };

    var newPlayerSize = sizeCalc(currentPlayerSize, (useTempStep ? tempStep : videoStep), action);

    var newDialogSize = {
        height: newPlayerSize.height + dialogDifference.height,
        width: newPlayerSize.width + dialogDifference.width
    };

    var windowSize = {
        height: $(window).height(),
        width: $(window).width()
    };

    useTempStep = false;
    var fullDialogSize = {
        height: newDialogSize.height+videoDialogSize.padding.height,
        width: newDialogSize.width+videoDialogSize.padding.width
    };
    if(fullDialogSize.height > windowSize.height){

        $growButton.addClass('disabled');

        tempStep.height = (newDialogSize.height-videoDialogSize.padding.height) - windowSize.height;
        tempStep.width = (newDialogSize.width-videoDialogSize.padding.width) - windowSize.width;

        useTempStep = true;

        newPlayerSize = sizeCalc(currentPlayerSize, tempStep, action);
        newDialogSize = {
            height: newPlayerSize.height + dialogDifference.height,
            width: newPlayerSize.width + dialogDifference.width
        };

    }

    var newMargin = -(newDialogSize.width / 2);

    $videoDialog.animate({
        height: newDialogSize.height,
        width: newDialogSize.width,
        marginLeft: newMargin
    });

    $videoPlayer.animate({
        height: newPlayerSize.height,
        width: newPlayerSize.width
    });
};

$growButton.on('click', clickHandler);
$shrinkButton.on('click', clickHandler); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:08:11.250

如果高度需要缩小¹，那么宽度需要与比率相匹配。（因为 16/9 指的是宽高比）

伪代码：

```
new_height = max_height;
new_width  = height * ratio;
// where ratio = 16/9 
```

以下是我可能建议更改的内容：

```
 var ratio = currentPlayerSize.width / currentPlayerSize.height,
        new_height = newPlayerSize.height + dialogDifference.height;

    newDialogSize = {
        height: new_height,
        width:  new_height * ratio
    }; 
```

笔记：

¹如果高度 > 宽度和高度 > max_height，则需要更改高度

或者你的问题可能只是在`sizeCalc()`：

```
 function sizeCalc(currentPlayerSize, step, action){
        var newPlayerSize,
            ratio = currentPlayerSize.width / currentPlayerSize.height;
            new_height;

        if (action == 'grow') {
            new_height = currentPlayerSize.height + step.height;
        } else {
            new_height = currentPlayerSize.height - step.height;
        }

        newPlayerSize =  {
            height: new_height,
            width:  new_height * ratio
        };

        return newPlayerSize;
    } 
```

# java - 在 Java 中生成内容后，在 Apache 中转换 set-cookie Session Cookie 标头

> ID：14971032
> 
> 赞同：0
> 
> 时间：2013-02-20T01:56:04.643
> 
> 标签：java, apache, session, cookies

我怎样才能拥有一个 apache 配置，它采用由 java 应用程序服务器生成的原始网页并将 set-cookie 会话标头转换为具有额外标志。

IE

**从**

```
Set-Cookie:JSESSIONID=f232xxx; path=/moedev-wss; secure 
```

**到**

```
Set-Cookie:JSESSIONID=f232xxx; path=/moedev-wss; secure; httponly 
```

不幸的是，我的 java 代码不能轻易更新，但如果我可以在 Apache 中更改标头，我的问题就解决了。

注意我调查了以下模块：

*   mod_headers：无法搜索其他生成器生成的内容。
*   mod_rewrite：不编辑未代理的内容。
*   mod_proxy：不编辑未代理的内容。

我为什么要这样做？简而言之：安全问题请参阅[OWASP 关于该主题](https://www.owasp.org/index.php/HttpOnly)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:53:49.710

**在 MOD_SECURITY 框架中找到的答案**

在我离开上面的问题之后，我想到了 apache 模块可以提供哪些帮助。

然后我在 mod_security 中搜索了这些信息。

我找到了 Ryan Barnett 的优秀文章和规则集。

[使用 HTTPOnly 标志帮助保护 Cookie](http://blog.modsecurity.org/2008/12/helping-protect-cookies-with-httponly-flag.html)

来自上面链接的规则集：

```
# Identifies SessiondIDs without HTTPOnly flag and sets the "http_cookie" ENV
# Token for Apache to read
SecRule RESPONSE_HEADERS:/Set-Cookie2?/ "!(?i:\;? ?httponly;?)" "chain,phase:3,t:none,pass,nolog"
  SecRule MATCHED_VAR "(?i:(j?sessionid|(php)?sessid|(asp|jserv|jw)?session[-_]?(id)?|cf(id|token)|sid))" "t:none,setenv:http_cookie=%{matched_var}"

# Now we use the Apache Header directive to set the new data

Header set Set-Cookie "%{http_cookie}e; HTTPOnly" env=http_cookie 
```

我要感谢 Ryan Barnett 和 mod_security。

现在我将继续在我的环境中测试这个解决方案。

# android - 安卓 USB 音频

> ID：14971036
> 
> 赞同：0
> 
> 时间：2013-02-20T01:56:44.017
> 
> 标签：android, usb, audio-streaming

USB Host 模式下的 Android 设备可以将音频流式传输到连接的 USB 设备吗？

Android 配件模式对我不起作用，因为我连接到我的 Android 设备的 USB 设备无法为 USB 总线供电。

# python - 在追加之前确保列表存在于 dict 键的 Pythonic 方法

> ID：14971038
> 
> 赞同：3
> 
> 时间：2013-02-20T01:56:48.587
> 
> 标签：python

我是从这样的角度提出这个问题的，即我的印象是请求宽恕而不是许可更像是 Pythonic。

所以，我有一些类似的代码：

```
d = dict()
try:
    d[est['state']].append(est)
except Exception:
    d[est['state']] = []
    d[est['state']].append(est) 
```

在上面的代码中，我以重复自己为代价请求宽恕而不是许可，这很蹩脚！所以，别无选择，我宁愿：

```
d = dict()
if est['state'] in d:
    d[est['state']].append(est)
else:
    d[est['state']] = [est] 
```

这两种方法都有些粗糙。有什么更好的方法来做到这一点？到目前为止我发现的最好的是：

```
from collections import defaultdict
d = defaultdict(list)
d[est['state']].append(est) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:48:40.470

pythonic 方式是您已经发现的后者：[defaultdict](http://docs.python.org/2/library/collections.html#defaultdict-objects)是一个 dict 子类，它调用工厂函数来提供缺失值。它在 python 2.5 及更高版本中可用。

```
>>> import collections
>>> d = collections.defaultdict(list)
>>> d[0].append('potato')
>>> d
defaultdict(<type 'list'>, {0: ['potato']}) 
```

它的存在正是为了这个目的，所以`dict.setdefault`尽可能避免黑客攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:47:17.673

如果您担心速度，可以尝试对几种不同的方法进行基准测试。我尝试了“if key in dictionary”方法，发现 try/except 平均要快 10% 左右。我发现我在这类问题上的 Python 最佳实践每隔几年就会发生变化。如果您需要与 Python 2.4 兼容，此答案可能会有所帮助。

使用您的示例，我将拥有：

```
d = {}

# Confirm separately that est['state'] does not raise a KeyError.

state = est['state']

try:
    l = d[state]
except KeyError:
    l = []
    d[state] = l

l.append(est) 
```

# javascript - 潮汐dk 打开用户选择的文件

> ID：14971045
> 
> 赞同：0
> 
> 时间：2013-02-20T01:57:38.030
> 
> 标签：javascript, file-io, tidesdk

我正在创建一个程序，用户在其中创建项目，编辑它们保存它们......等等。但是，为了打开一个项目，我很难过。我希望用户能够打开一个对话框并选择一个文件，然后单击打开。然后我想打开/读取该文件以在程序中使用。就像专业软件一样。但是，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T11:42:39.993

查看有关如何使用 Filesystem 模块读取和写入文件的文档：[http ://tidesdk.multipart.net/docs/user-dev/generated/#!/api/Ti.Filesystem](http://tidesdk.multipart.net/docs/user-dev/generated/#!/api/Ti.Filesystem)

# windows - 简单的 NMAKE 文件失败（1 个回显命令）

> ID：14971046
> 
> 赞同：1
> 
> 时间：2013-02-20T01:57:40.123
> 
> 标签：windows, visual-studio-2012, makefile, nmake

对于我的一生，我无法弄清楚我对构建环境做了什么。即使是现在，最简单的 make 文件也让我失望：

win32.mak：

```
ALL:
    echo test 
```

命令：

```
nmake -f win32.mak 
```

输出：

```
Microsoft (R) Program Maintenance Utility Version 11.00.51106.1
Copyright (C) Microsoft Corporation.  All rights reserved.

        echo Hey!
The system cannot find the path specified.
Hey!
NMAKE : fatal error U1077: 'echo' : return code '0x1'
Stop. 
```

有没有人有任何想法？

* * *

可能相关（或不相关）的东西：每当我打开 VS2012 的开发人员命令提示符时，都会看到两行“系统找不到指定的路径”。这是相对较新的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T16:45:10.480

谁知道这个问题会与 Ansicon 有关：

我在[这里找到了我的问题的答案。](https://stackoverflow.com/questions/6637922/the-system-cannot-find-the-path-specified-when-starting-ruby-and-rails-command-p)

我修复了卸载 ansicon 并从磁盘上更永久的位置重新安装它。

# ember.js - Ember 中的嵌套视图

> ID：14971056
> 
> 赞同：2
> 
> 时间：2013-02-20T01:58:32.690
> 
> 标签：ember.js

我需要 Ember 中的递归嵌套视图集。基本上将其视为带有文件夹的文件结构。

我以为我可以做到这一点`render`，但没有奏效。内景`structures/show`：

```
{{#each child in structures}}
  {{ render 'structures/show' child }}
{{/each}} 
```

我得到错误：

```
Uncaught Error: assertion failed: This view is already rendered 
```

我在另一个关于使用帮助器的[SO Question](https://stackoverflow.com/questions/9962647/recursive-view-in-handlebars-template-not-working-after-upgrading-to-ember-0-9-6)中读到`{{view}}`：

```
{{#each child in structure.structures}}
  {{ view App.StructuresShowView structureBinding='child'}}<br>
{{/each}} 
```

但这不能正确渲染。可能是因为示例太旧了？

如何使用不同的对象正确渲染相同的视图（和控制器？）以构建嵌套/递归视图？有没有比对象方向更好的方法？

谢谢。

* * *

更新。看起来[itemControllerClass](https://github.com/emberjs/ember.js/issues/1637)可能是我要找的？仍在试图弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:18:32.673

我认为您不能`{{render}}`在一条路线上多次调用。如果您需要多次创建某些内容，则可能需要使用`{{control}}`，这与具有一个控制器（单例）并且每次调用时都有一个新控制器`{{render}}`的区别相同。`{{render}}``{{control}}`

这是与您的[问题](https://github.com/emberjs/ember.js/issues/1990)相关的未解决问题。

# java - 使用 eclipse 编译旧的 Java 源代码

> ID：14971057
> 
> 赞同：4
> 
> 时间：2013-02-20T01:58:33.490
> 
> 标签：java, eclipse

我正在构建使用“枚举”作为变量名的非常古老的 Java 代码，并且出现“无法将枚举解析为变量”错误。如何消除错误？

```
<OLD JAVA CODE>
Enumeration enum = props.propertyNames();
while (enum.hasMoreElements()) { 
```

在[此站点](http://www.coderanch.com/t/105687/vc/Eclipse-point-JDK-JRE)之后，我尝试将编译器合规级别设置为 1.3，但它不起作用。

![在此处输入图像描述](../Images/751115e60d169f7f7c0b3188c60a9ad7.png)

![在此处输入图像描述](../Images/ff8704c2489862e329338204074855f8.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T03:13:35.883

再次检查属性 > Java 编译器设置。您可以通过在此对话框中配置编译器合规性设置来摆脱使用保留关键字引起的错误`enum`（我使用的是 Juno）：

[朱诺对话](http://i.stack.imgur.com/Kmv9s.png)

# linux - Linux：远程运行 shell 命令并打印结果

> ID：14971058
> 
> 赞同：0
> 
> 时间：2013-02-20T01:58:33.653
> 
> 标签：linux

我想创建一个在远程 Linux 机器上运行 shell 命令并打印出结果的脚本。类似于“运行一次”的 SSH 之类的东西。或者对于那些熟悉 Android 开发的人来说，类似“adb shell”之类的东西。例如，我想在我的远程机器上运行“ls”并在本地主机上显示结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:05:15.987

这由 ssh 直接支持：

```
ssh [options] [user@]hostname [command] 
```

例如

```
ssh user@host ls 
```

如果没有给出命令，则通常默认运行交互式 shell。

# java - Restful Webservice Java，服务器端

> ID：14971059
> 
> 赞同：0
> 
> 时间：2013-02-20T01:58:42.863
> 
> 标签：java, web-services, rest

我正在尝试开发一个小型服务器，其中包括一个宁静的网络服务。

我想将 JAX-RS 用于 web 服务部分，但我看到的每个示例都使用 tomcat 服务器，并且我不能使用任何“应用程序”服务器（这意味着我可以在我的代码中创建一个服务器，但是不能从外面运行它）。

无论如何，我想知道是否有人要展示任何示例，以及关于我可以使用哪个轻库在我的代码中运行如此简单的服务器的任何建议（不能使用任何 gpl / lgpl 等许可证，所以没有球衣） .

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:02:56.743

可以将 Tomcat 嵌入到您的应用程序中，请参见此处的示例：http: [//java.dzone.com/articles/embedded-tomcat-minimal](http://java.dzone.com/articles/embedded-tomcat-minimal)

另一个流行的嵌入式 servlet 容器选择是[Jetty ，](http://jetty.codehaus.org/jetty/)[这里](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty)有一个教程。

### 编辑

Jersey 提供的示例也很有帮助，这是使用 Grizzly HTTP 库运行的示例：[https ://github.com/jersey/jersey/blob/master/examples/helloworld/src/main/java/org/glassfish/球衣/示例/helloworld/App.java](https://github.com/jersey/jersey/blob/master/examples/helloworld/src/main/java/org/glassfish/jersey/examples/helloworld/App.java)

您甚至可以使用与 JDK 捆绑在一起的 HTTP 服务器（可能不是真正的应用程序的方式）：[https ://github.com/jersey/jersey/blob/master/examples/helloworld-pure-jax-rs /src/main/java/org/glassfish/jersey/examples/helloworld/jaxrs/App.java](https://github.com/jersey/jersey/blob/master/examples/helloworld-pure-jax-rs/src/main/java/org/glassfish/jersey/examples/helloworld/jaxrs/App.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:33:52.670

你检查过[http://www.sparkjava.com/](http://www.sparkjava.com/)吗？它非常轻巧简洁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T04:04:01.507

将服务器构建到代码中没什么。参见[“嵌入码头”](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty)，其中之一。还有许多其他具有不同难度和功能的选项，例如[Simple Framework](http://www.simpleframework.org/)、[Tomcat](http://tomcat.apache.org/tomcat-5.5-doc/catalina/docs/api/org/apache/catalina/startup/Embedded.html)、[Grizzly](http://grizzly.java.net/nonav/docs/docbkx2.0/html/quickstart.html)、[Netty](https://netty.io/)和[Vert.x](http://vertx.io/)，仅举几例。然后，如果您不被 Java 这种语言所困扰，那么可以使用用于轻量级 REST 服务器的[Ratpack 。](https://github.com/tlberglund/ratpack-template)否则，在嵌入式服务器中运行类似 Jersey 的东西非常简单。我每天都在测试中这样做。

# html - 背景颜色属性不接受打印 css

> ID：14971061
> 
> 赞同：0
> 
> 时间：2013-02-20T01:58:55.340
> 
> 标签：html, css, printing, css-float

我正在尝试在打印 css 中为我的标签提供背景颜色。它采用边框颜色，但不采用 css 的 background-color 属性。如何解决？

[http://jsfiddle.net/gVLeg/embedded/result/](http://jsfiddle.net/gVLeg/embedded/result/)

```
#stateLabelLeftSo {
  display: inline-block; 
  margin-left: 4px; 
  border: 1px solid red; 
  background-color: green;
}

@media print {
  body {
    margin:0;
    padding:0; 
    line-height: 1.4em; 
    word-spacing:1px; 
    letter-spacing:0.2px; 
    font: 12px Arial, Helvetica,"Lucida Grande", serif; 
    color: #000;
  }
  .mainDiv {
    display: none;
  }
  #soLeft { 
    width: 300px;
    border: 1px solid red; 
    background-color: green;
  }
  #billTextSO { 
    width: 101px;
  }
  #attentionTextSo { 
    width: 101px; 
  }
  #addressTextSo { 
    width: 101px; 
  }
  #cityTextSo {
    width: 40px; 
    margin-left: 5px; 
    height: 13px; 
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:11:51.987

css中的background-color默认不能打印，也不推荐。背景颜色可能会覆盖文本。如果你想要一些背景，你可以直接使用图像。

# php - 如何从 for 循环中获取生成的密码的值

> ID：14971062
> 
> 赞同：0
> 
> 时间：2013-02-20T01:59:00.900
> 
> 标签：php

我管理我的代码以从我的记录表（“tbl_studentreg”）中生成我的学生（大约 45 名学生）的随机密码。现在我想用生成的随机密码将它保存到一个新表（tbl_student），但我的问题是我无法从生成的密码中获取数据。请帮助我并给我一些建议。

```
<?php
function genpass(){
    $charset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890!@#$%^&*()_+';
    return substr(str_shuffle($charset), 0, 12);
}
?>
<?php
if(isset($_POST['generate'])){
    $generated_pass = $_POST['generate'];
    genpass();
}
?>
<form method="post" action='enroll_student.php' name ='register'>

    <?php
    $yr = date("Y");
    if ($result = $mysqli->query("SELECT
        tbl_studentreg.studId,
        tbl_studentreg.fname,
        tbl_studentreg.lname,
        tbl_studentreg.mname,
        tbl_studentreg.dob,
        tbl_studentreg.address,
        tbl_department.departmentName,
        tbl_studentreg.sy
        FROM tbl_studentreg
        Inner Join tbl_department ON tbl_studentreg.departmentId = tbl_department.departmentId WHERE tbl_studentreg.sy =  '$yr' "))
    {
        if ($result->num_rows > 0)
        {
            echo "<table width= '1000'>";
            echo "<tr><th>StudentID</th><th>Name</th><th>Date of Birth</th><th>Address</th><th>Department</th><th>School Year</th><th>Password</th></tr>";

            while ($row = $result->fetch_object())
            {
                echo "<tr>";

                echo "<td align='center'>" . $row->studId . "</td>";  
                echo "<td align='center'>" . $row->fname . " ". $row->mname ." ". $row->lname ." </td>";
                echo "<td align='center'>".$row->dob."</td>";
                echo "<td align='center'>" . $row->address. "</td>";
                echo "<td align='center'>".$row->departmentName."</td>";
                echo "<td align='center'>".$row->sy."</td>";

                if(isset($generated_pass)) {
                    for($i=0; $i <= $row->studId; $i++){ 
                        $generated_pass = genpass($i);             
                        echo "<td>$generated_pass</td>";
                    }
                }
                if(isset($_POST['save'])) {
//here i want to pass the value of my generated pass, 
//i use global $generated_pass but still dont work.     
                    $save = $_POST['save'];
                    $insert = $mysqli->query("INSERT INTO tbl_student 
                        (studId, fname,  lname, mname, password, dob, address, 
                            f_fname, f_mname, f_lname, m_fname, m_mname, m_lname, departmentId)
                    VALUES ('".$row->studId."', '".$row->fname."', '".$row->lname."', 
                        '".$row->mname."', '$generated_pass', '".$row->dob."', '".$row->address."',
                        '".$row->f_fname."', '".$row->f_mname."', '".$row->f_lname."', 
                        '".$row->m_fname."', '".$row->m_mname."', '".$row->m_lname."', 
                        '".$row->departmentId."')");
                }
                echo "</tr>";
            }
            echo "</table>";
        }
        else
        {
            echo "No Results.";
        }
    }
    else
    {
        echo "Error: " . $mysqli->error;
    }
    $mysqli->close();
    echo '<br>';
include 'count.php'; //this one will give the total no. of results, just ignore.
?>

<br />        

<tr><td></td></tr><tr><td><input type='submit' name='generate' value='Generate'/></td></tr>
</table>
</form>
<form action="enroll_student.php" method="post" name="save">
    <input type='submit' name='save' value='Save'/>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:51:01.670

既然您发现了发布问题，请添加密码安全性：

```
function genpass($userEmail){
    $charset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890!@#$%^&*()_+';
    $pss= substr(str_shuffle($charset), 0, 12);
    YourFunctionSendEmailWithPassword(userEmail, $pss); //email password to user
    $salt = sha1(md5(pss));
    $password = md5(pss . $salt);
    return $password;
} 
```

这将为您的密码增加一些安全性

# c4 - 升级后 C4 选项在 XCODE 中消失了

> ID：14971065
> 
> 赞同：1
> 
> 时间：2013-02-20T01:59:20.570
> 
> 标签：c4

应用程序的 C4 选项已消失。XCODE 做后台更新吗？我可以关掉这个吗？它似乎影响了C4，这是正确的吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:51:14.323

如果您刚刚从 4.5 升级到 4.6，那么您可能只需要重新安装即可。

我还没有升级，但我认为这将解决问题，因为 Xcode 是一个应用程序，当它安装时，它会删除旧的并用新的替换它。模板文件直接安装到应用程序中，而不是 Xcode 外部的共享位置（这就是文件被删除的原因）。

另外，我不确定后台更新。

# syntax - 为什么橘子酱有这么奇怪的名字？

> ID：14971067
> 
> 赞同：0
> 
> 时间：2013-02-20T01:59:32.957
> 
> 标签：syntax, marmalade

我读过一些关于 Marmalade Framework 的教程。你知道......这太棒了:) 例如：

```
// Creating an Image from a Web Based Image File:
CIwGameFile* image_file = new CIwGameFile();
image_file->Open( "http://site...../icon.gif", false, true );
image_file->Close();

// Now we will create a sprite to display our downloaded web image:
CIwGameBitmapSprite* test_sprite = new CIwGameBitmapSprite();
test_sprite->setImage( image );
test_sprite->setDestSize( image->getWidth(), image->getHeight() ); 
```

为什么？？为什么第一个方法的名称为大写（Open、Close），而第二个方法的名称为小写（setImage、getWidth）？他们这样做时有什么常识吗？还是 Marmalade 在整个库中有如此令人敬畏的语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:56:38.970

IwGame 对 setter 和 getter 使用首字母小写

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T05:45:13.667

果酱`Upper Camel case`用于所有方法（据我所知）。您所说的方法不是 Marmalade 自己的 API 方法。这些是`IwGame`引擎的方法。果酱无法控制这一点。

# java - jsf中的绝对路径不起作用

> ID：14971071
> 
> 赞同：1
> 
> 时间：2013-02-20T02:00:07.073
> 
> 标签：java, jsf, jsf-2, primefaces

我是 jsf 的新手。

我基本上有 4 个 jsf 文件。

1) 菜单.xhtml

```
<h:html xmlns="http://www.w3.org/1999/xhtml" 
xmlns:c="http://java.sun.com/jsp/jstl/core"
xmlns:h="http://java.sun.com/jsf/html"    
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets" 
xmlns:p="http://primefaces.org/ui">

 <h:head>

<h:body>

  <p:layout fullPage="true">
   <p:layoutUnit position="north" style="min-width: 300px;" gutter="0">
    <ui:insert name="header">
     <ui:include src="../../layout/header.xhtml" />
    </ui:insert>
   </p:layoutUnit>

   <p:layoutUnit position="center" style="border:none;" gutter="0">
    <p:panel id="content" style="background : transparent; border : 0;">
     <ui:include src="content.xhtml" />
    </p:panel>
   </p:layoutUnit>

   <p:layoutUnit position="west" collapsible="true" gutter="6"  >
   <h:panelGroup id="menu" layout="block">
   <h:form>
    <ul>
     <li><p:commandLink value="goto-include1" action="#{bean.doAction1}" update=":mainContent" ajax="true" /></li>
     <li><p:commandLink value="goto-include2" action="#{bean.doAction2}" update=":mainContent" ajax="true" /></li>
    </ul>
   </h:form>
  </h:panelGroup>
   </p:layoutUnit>

   <p:layoutUnit position="south" style="min-width: 300px;" gutter="0">
    <div id="footer" class="ui-widget ui-widget-header">
     <ui:include src="../../layout/footer.xhtml"></ui:include>
    </div>
   </p:layoutUnit>

  </p:layout>`enter code here`

 </h:body>
</f:view>
</h:html> 
```

包括1.jsp

```
<ui:composition xmlns="http://www.w3c.org/1999/xhtml"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
        <h:outputText value="Include1"/>
</ui:composition> 
```

包括2.jsp

```
<ui:composition xmlns="http://www.w3c.org/1999/xhtml"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
        <h:outputText value="Include1"/>
</ui:composition> 
```

包括3.jsp

```
<ui:composition xmlns="http://www.w3c.org/1999/xhtml"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
        <h:outputText value="Include1"/>
</ui:composition> 
```

内容.jsp

```
<ui:composition xmlns="http://www.w3c.org/1999/xhtml"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui">
    <h:panelGroup id="mainContent" layout="block">
        <ui:include src="#{bean.page}.xhtml" />
    </h:panelGroup>
</ui:composition> 
```

我的豆类是

```
package com.assia.dslo.expresse.gui.component.pe;

import java.io.File;
import java.io.Serializable;

public class Bean implements Serializable {

    private String page = "include3";
    public String getPage() {
        return page;
    }
    public void setPage(String page) {
        this.page = page;
    }
    private static final long serialVersionUID = -802772877129109794L;

    public void doAction1() {
        this.page = "expresse/pe/include1.xhtml";
    }

    public void doAction2() {
        this.page = "include2";
    }
} 
```

预期的行为是，当我单击 Include1 链接时，它会在中心框架中显示 include1.jsf，对于 Include2 链接也是如此。

但是，Include1 的绝对路径不起作用。如果我用相对路径替换绝对路径，那么它工作正常。有人可以帮我理解为什么会这样吗？这是预期的行为还是我做错了什么。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:49:41.403

绝对路径以斜杠开头`/`，它将带您到根目录。您的路径不以斜杠开头，`/`因此根本不是绝对路径。

相应地修复它。代替

```
this.page = "expresse/pe/include1.xhtml"; 
```

经过

```
this.page = "/expresse/pe/include1.xhtml"; 
```

* * *

**与具体问题无关**，建议将不应直接公开访问的文件放在`/WEB-INF`文件夹中。否则，最终用户在浏览器的地址栏中输入/猜测其路径时将获得部分/损坏的页面。

```
this.page = "/WEB-INF/expresse/pe/include1.xhtml"; 
```

对所有其他包含和模板文件执行相同操作。不要忘记用以 . 开头的绝对路径替换它们的相对路径`/WEB-INF`。

### 也可以看看：

*   [我需要将哪些 XHTML 文件放入 /WEB-INF 而哪些不需要？](https://stackoverflow.com/questions/9031811/which-xhtml-files-do-i-need-to-put-in-web-inf-and-which-not/9033567#9033567)

# php - 使用使用 AJAX 显示的数据时从 ajax 发布表单调用获取响应

> ID：14971073
> 
> 赞同：0
> 
> 时间：2013-02-20T02:00:10.157
> 
> 标签：php, jquery, ajax

我有一个下拉框，当它更改时，我将使用 JQuery 显示一个包含数据库中信息的表。现在那个工作得很好。同时，我想对该表应用“就地编辑”。当我单击一行时，我可以更改该行的值，但是，当我提交新值时，数据不会改变。我必须刷新我的页面，然后该值将被更新。我怀疑这是因为使用 JQuery 调用的表。但这里是代码。我正在使用此功能来显示信息表：

```
function loadData(page){
    var dataString = "";
    dataString = "page="+page;
    $.ajax({
        type: "POST",
        url: "load_data.php",
        data: dataString,
        success: function(msg){
            $("#container").ajaxComplete(function(event, request, settings)
            {
                $("#container").html(msg);
            });
        }
    });
} 
```

我正在使用此代码应用当前正在工作的“就地编辑”，但唯一不起作用的是当我想用新值重新加载表时。

```
$(".edit_tr").live('click',function(){
    var ID=$(this).attr('id');

    $("#first_"+ID).hide();
    $("#first_input_"+ID).show();
    var first=$("#first_input_"+ID).val();

}).live('change', function(){
    var ID=$(this).attr('id');
    var first=$("#first_input_"+ID).val();
    var dataString = 'id='+ ID +'&thename='+first;

    var initName = $("#hidden_first_input_"+ID).val();

    $.ajax({
        type: "POST",
        url: "edit_page.php",
        data: dataString,
        cache: false,
        success: function(html){
              alert(html); // the alert is not coming. even put any process, nothing happen
        }
     });
}); 
```

但是这些值正在更新到数据库中。我必须刷新，并使用 JQuery 再次调用该表，然后该值将被更新。或者我可以点击分页，然后它会是正确的。知道为什么会这样吗？先感谢您！

# c# - 如何使用带有 C# 的标准输入将字符串发送到具有 UTF-8 编码的进程中？

> ID：14971075
> 
> 赞同：1
> 
> 时间：2013-02-20T02:00:34.967
> 
> 标签：c#, utf-8, console-application, stdin

我需要`stdin`使用 UTF-8 编码将字符串发送到进程中。我这样做：

```
var info = new ProcessStartInfo("process.exe", "");

info.UseShellExecute = false;
info.CreateNoWindow = false;
info.RedirectStandardInput = true;
info.RedirectStandardOutput = true;

var process = System.Diagnostics.Process.Start(info);

string stringToSend = "человек";
byte[] utf16Bytes = Encoding.Unicode.GetBytes(stringToSend);
byte[] utf8Bytes = Encoding.Convert(Encoding.Unicode, Encoding.UTF8, utf16Bytes);

//But how do I send it now?
//process.StandardInput.WriteLine(stringToSend);    //Replaces all non-ASCII chars with ???? 
```

但是这个过程收到的是???? 而不是非英文字符。

PS。西里尔字母只是为了说明这个例子。

# c++ - 使用 C 的数据结构/抽象数据类型，其作用类似于 C++ 中的向量

> ID：14971082
> 
> 赞同：0
> 
> 时间：2013-02-20T02:01:19.423
> 
> 标签：c++, c

嗨，我正在使用 C 编译器（GCC），但不能使用 C++ 中的向量。那么如何使用 c 创建类似的数据结构/动态数组，它可以像向量一样工作？这可能很容易，但我不知道我该怎么做。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:04:42.160

从一个结构体开始，该结构体包含一个指向正确类型、当前使用的大小和当前分配大小的指针。用 malloc 分配空间。如果空间不足，请使用 realloc 来增加它。

# jquery - jQuery 的 $ 对 XSS 安全吗？

> ID：14971083
> 
> 赞同：15
> 
> 时间：2013-02-20T02:01:23.673
> 
> 标签：jquery, xss

在 jQuery 中：

```
$('<script>alert("foo");</script>')
// nothing shows up 

// wrap it in a <p> 
$('<script>alert("foo");</script>').wrap('<p>')
// oh no, an alert just popped up. 
```

是否`$('any string what so ever')`能够使 JavaScript 在任何浏览器上执行？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-20T02:16:36.610

### 没有 $ 不是 XSS 安全的。

您可以使用此技巧注入任意 JavaScript。

```
$("<img src=x onerror=alert(/xss/.source)>") 
```

# php - 在 Wordpress 中使用图像作为自定义字段

> ID：14971085
> 
> 赞同：0
> 
> 时间：2013-02-20T02:01:27.133
> 
> 标签：php, wordpress, custom-fields

有人可以帮我更改此主题以从每个帖子的自定义字段“侧边栏”中提取侧边栏中的图像，而不是像现在这样的特色图像。框架和链接可以保持不变，我只需要图像来自自定义字段而不是特色图像。

```
 <div id="content" class="city_page">
        <div id="inner_sidebar">
            <?php
                $mypages = get_pages( array( 'child_of' => 9, 'sort_column' => 'post_title', 'sort_order' => 'asc' ) );

                foreach( $mypages as $page ) {      
                    $content = $page->post_content;
                    if ( ! $content ) // Check for empty page
                        continue;

                    $content = apply_filters( 'the_content', $content );
                ?>
                <div class="item city">
                    <?php echo get_the_post_thumbnail($page->ID, 'thumbnail'); ?>
                    <a href="<?php echo get_page_link( $page->ID ); ?>"><img class="frame" src="<?php bloginfo('url'); ?>/images/city_image_frame_thumb.png" alt="" /></a>
                    <a class="title" href="<?php echo get_page_link( $page->ID ); ?>"><?php echo $page->post_title; ?></a>
                </div>
                <?php
                }   
            ?>
        </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:00:49.883

只要您在“侧边栏”自定义字段中放置图像 URL，您就可以将整个 img src 替换为以下内容。

```
<?php echo get_post_meta($post->ID, 'sidebar', true) ?> 
```

您可以在此处了解有关缩略图网址的 get_post_meta 的更多信息：http: [//codex.wordpress.org/Function_Reference/get_post_meta#Retrieve_a_Custom_Field_Thumbnail_Url](http://codex.wordpress.org/Function_Reference/get_post_meta#Retrieve_a_Custom_Field_Thumbnail_Url)

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-01T19:20:38.203

[就个人而言，我是高级自定义字段](http://www.advancedcustomfields.com/)插件的忠实粉丝。它是我在新的 WordPress 安装中安装的首批插件之一。它非常灵活，并且有一个用于获取和设置自定义字段的简单 API。

一探究竟！

# perl - Perl 在可存储写入期间是否安全地延迟 INT 信号？

> ID：14971093
> 
> 赞同：2
> 
> 时间：2013-02-20T02:02:13.670
> 
> 标签：perl, io, signals, ipc

我担心执行`Storable::store`操作时数据损坏。我正在将大约 100 MB 的数据写入 NFS 以在特定检查点备份我的计算，但该过程并不十分迅速。

为了防止损坏，我有一个`SIG{INT}`信号处理程序。就在`Storable::store`调用之前，设置了一个全局变量，表明终止是不安全的。完成后`Storable::store`，该全局变量将返回一个值以指示可以中断。

该全局变量用于指示信号处理程序是否会调用`die`，或者它是否只会打印一条语句“Can't stop yet”。

但我真的有帮助吗？我现在从阅读[perlipc](http://perldoc.perl.org/perlipc.html#Deferred-Signals-%28Safe-Signals%29 "perlipc")中看到，中断 IO 有时是安全完成的，有时则不是......也就是说，如果我的信号处理程序最终在我的`Storeable::store`操作中间被调用，那么对我的信号处理程序子例程的短暂转移可能仍然足以把事情搞砸。

有谁知道`Storable`在这种情况下表现如何？或者我的信号处理设置真的合适吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T02:54:33.590

从 5.8.1 开始，Perl 使用“[安全信号](http://perldoc.perl.org/perlipc.html#Deferred-Signals-%28Safe-Signals%29)”（默认情况下）。当您通过 设置信号处理程序时`%SIG`，Perl 实际上安装了一个简单的信号处理程序，它只会增加一个计数器。在 Perl 操作之间，Perl 检查计数器是否非零，如果是则调用您的信号处理程序。这样，您的信号处理程序就不会在系统调用或库调用中间执行。

您只需要担心两件事：

*   `$!`在信号处理程序中修改全局变量（例如）。
*   系统调用返回 EINTR 或 EAGAIN，因为在调用期间有信号进入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T02:12:41.197

如果您真的担心`SIGINT`可能会中断`store`，请尝试添加`SA_RESTART`到您的信号处理程序。在 Linux 上，这将强制系统调用在收到信号时自动重试。这可能会无限期地推迟您的信号处理程序，因为`SIGINT`将无法中断 I/O 操作。但是，它应该能够`Storable::store`在任何中断情况下安全运行。

# java - 从 java 代码启动 javaFX 应用程序

> ID：14971099
> 
> 赞同：5
> 
> 时间：2013-02-20T02:02:42.233
> 
> 标签：java, graphics, javafx-2, javafx

我目前正在为单人游戏运行 JavaFX 纸牌游戏。我想让多个玩家通过 TCP 套接字连接进行游戏，为此我有一个用 java 编写的简单客户端/服务器骨架程序。

我的问题是：服务器/客户端代码在 java 中。如何从客户端 java 代码启动 javafx 应用程序，然后根据服务器返回的游戏状态更新它？

简单的服务器-客户端循环将是：客户端发送动作，服务器更新游戏状态，并将其回显给客户端。

```
client pseudo-code

if(!clientGUI.isInitialised())
   initJavaFXapp();  // I am struggling to do this

//keep reading from server 
if(obj instanceOf gameState)
    javaFXGUI.update(obj) 
```

我是使用 javaFX 的初学者，我使用了图形方面，因为我的应用程序是基于它的。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-20T04:06:08.677

假设`MyApplication`类扩展`javafx.application.Application`，您可以通过以下方式启动它：

```
 javafx.application.Application.launch(MyApplication.class); 
```

# awk - 使用 awk 从文件的第一行打印特定字段

> ID：14971102
> 
> 赞同：4
> 
> 时间：2013-02-20T02:02:50.783
> 
> 标签：awk, line, field

我有一个文件（logins.txt），我需要将它制作成一个只显示第一次和最后一次登录日期/时间以及最后一次登录日期/时间的文件。logins.txt 如下所示：

```
Feb 13 2:43 (login IP)
Feb 13 2:48 (login IP)
Feb 13 5:23 (login IP)
Feb 13 9:43 (login IP)
Feb 14 1:34 (login IP)
Feb 14 8:42 (login IP)
Feb 14 8:47 (login IP) 
```

我想打印：

```
First Login: Feb 13 2:43
Last Login: Feb 14 8:47 
```

现在请记住，我正在使用一个 .awk 文件，其中包含我的所有 awk 语句，它执行 logins.txt 并使用我想要打印的内容创建一个不同的文件。

最后一次登录很容易。我只是简单地说：

```
END{
print "$1, $2, $3";
} 
```

打印出这些字段的最后一次出现。但是我如何在第一次出现时做到这一点？

编辑：太棒了，将 NR==1 工作，但我需要在 END 字段中使用它，因为我需要它在我想要打印的其他内容下方。我如何把它放在一切之下？我也希望它像这样打印：

```
Blah blah blah blah blah blah blah blah
Blah blah blah blah blah blah blah blah
Blah blah blah blah blah blah blah blah
First Login: Feb 13 2:43      Last Login: Feb 14 8:47 
```

这是我的 END 打印语句

```
NF==1 {a=$1; b=$2; c=$3;}

END{
   print "Feed\t\t\tAccepted\tRejected\tCanceled";
   print "-----------------------------------------------------------------";
   print "swrinde:\t\t", accepted_sw"\t\t", rejected_sw"\t\t", canceled_sw"\t\t";
   print "news.cais.net:\t\t", accepted_ne"\t\t", rejected_ne"\t\t", canceled_ne"\t\t";
   print "\?:\t\t\t", accepted_un"\t\t", rejected_un"\t\t", canceled_un"\t\t";
   print "\nStart Time = ", a, b, c RS "\tEnd Time =", $1, $2, $3;
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T02:06:42.263

用 限定另一个块`NR==1`：

```
awk 'NR==1 { print "First Login:", $1, $2, $3 } END { print "Last Login:", $1, $2, $3 }' logins.txt 
```

结果：

```
First Login: Feb 13 2:43
Last Login: Feb 14 8:47 
```

`NR`是行数的缩写。见[这里](http://www.thegeekstuff.com/2010/01/8-powerful-awk-built-in-variables-fs-ofs-rs-ors-nr-nf-filename-fnr/)。HTH。

* * *

***编辑1：***

这里有两种方法，取决于你的风格。第一个会被认为更正确：

```
awk 'NR==1 { a=$1; b=$2; c=$3 } { print "Blah" } END { print "First Login:", a, b, c  RS "Last Login:", $1, $2, $3 }' logins.txt

awk 'NR==1 { x=("First Login:" FS $1 FS $2 FS $3) } { print "Blah" } END { print x RS "Last Login:", $1, $2, $3 }' logins.txt 
```

结果：

```
Blah
Blah
Blah
Blah
Blah
Blah
Blah
First Login: Feb 13 2:43
Last Login: Feb 14 8:47 
```

***编辑2：***

像这样运行你的脚本：

```
awk -f script.awk logins.txt 
```

内容`script.awk`：

```
NR==1 {
    a=$1
    b=$2
    c=$3
}

{
    print "Blah"
}

END {
    print "First Login:", a, b, c  RS "Last Login:", $1, $2, $3
} 
```

***编辑3：***

```
BEGIN { OFS="\t\t" }

NR==1 { a=$1; b=$2; c=$3 }

END{
   print "Feed\t\t\tAccepted\tRejected\tCanceled"
   print "-----------------------------------------------------------------"
   print "swrinde:", accepted_sw, rejected_sw, canceled_sw
   print "news.cais.net:", accepted_ne, rejected_ne, canceled_ne
   print "?:\t", accepted_un, rejected_un, canceled_un

   print "Start Time = " a FS b FS c
   print "End Time = " $1 FS $2 FS $3
} 
```

结果：

```
Feed            Accepted    Rejected    Canceled
-----------------------------------------------------------------
swrinde:                        
news.cais.net:                      
?:                          
Start Time = Feb 13 2:43
End Time = Feb 14 8:47 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T06:19:07.853

```
awk 'NR==1{x="First Login "$1FS$2FS$3;}END{x=x" last Login "$1FS$2FS$3;print x}' your_file 
```

[在这里](http://ideone.com/2DZ4Sd)测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T15:14:20.493

最后一次登录也尝试使用变量，因为不是每个 awk 都保留 END 部分中的字段值。例如：

```
awk '{l=$1 FS $2 FS $3} NR==1{f=l} END{ print "First login: " f; print "Last login: " l}' infile 
```

# ios - 图像更改 CALayer 核心动画

> ID：14971103
> 
> 赞同：1
> 
> 时间：2013-02-20T02:02:56.473
> 
> 标签：ios, cocoa-touch, core-animation, quartz-graphics, caanimation

在动画之前/期间/之后更改“Sprite”图像的最佳方法是什么？

我显示图像：

```
CALayer *am = [[CALayer alloc] init];
am.contents = img;
am.bounds = CGRectMake(150, 150, 46, 47);
[self.view.layer addSublayer:am];
[am setNeedsDisplay]; 
```

假设我有一个将精灵从位置 A 带到位置 B 的动画，我将如何在图层到达位置 B 或离开位置 A 时更改图层的图像？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:16:41.200

您可以使用精灵表，也可以按照这种方式添加到 plist 文件中。 [http://www.raywenderlich.com/1271/how-to-use-animations-and-sprite-sheets-in-cocos2d](http://www.raywenderlich.com/1271/how-to-use-animations-and-sprite-sheets-in-cocos2d)

（没有 cocos2d）如果你想手动给框架，那么这个教程是最好的。也提供源代码，欣赏。[http://mysterycoconut.com/blog/2011/01/cag1/](http://mysterycoconut.com/blog/2011/01/cag1/)

# apache - 查看本地网络上的多个 Mamp Pro 网站

> ID：14971104
> 
> 赞同：0
> 
> 时间：2013-02-20T02:02:57.547
> 
> 标签：apache, port, mamp, lan

使用 Mamp Pro 2.1.1 我有 3 个 Wordpress 网站正在运行，我想通过移动设备（iPhone、iPad 等）查看这些网站以进行测试，并允许我的团队在通过我的办公室 LAN 实时发布之前同时进行编辑。

通过将端口 8888 附加到我的 IP ( `mylocalIP:8888`)，我可以通过电话或其他计算机访问第一个网站。但是，我无法弄清楚如何轻松查看任何其他网站。

我已经尝试为每个其他网站设置不同的端口号，而不是去我想要的地方，而是重定向到`mylocalIP:8888`非常令人沮丧的地方。

![端口设置画面](../Images/be4aab003f91ce56a5f93f0818feac73.png)

我正在寻找的是一些简单的东西，比如`mylocalIP:5555`去正确的网站。我不是在寻找在网站上工作或想要预览/批准它的每个人的计算机上安装另一个程序和/或调整设置。

有什么想法吗？我已经从本地 Mac 和 MAMP 安装中了解到 Apache 冲突的可能性，这可能是问题吗？如果有帮助，我正在运行 OSX 10.8.2。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T09:18:32.207

我已经成功使用了包括我的计算机名称的设置，例如 myMacBookPro。

在您的情况下，它看起来像这样：

1.  IP / 端口 = * / 5555
2.  添加 'theNameOfYourComputer.local' 作为别名（例如 myMacBookPro.local）
3.  您 LAN 上的其他人现在应该能够通过[http://theNameOfYourComputer.local:5555访问您的站点](http://theNameOfYourComputer.local:5555)

希望对你有效。

# android - 图像视图布局

> ID：14971107
> 
> 赞同：0
> 
> 时间：2013-02-20T02:03:09.040
> 
> 标签：android, android-layout, android-imageview

本质上，我正在寻找没有中心的 scaleType="centerCrop" 之类的东西。

`ImageView`当显示大于屏幕尺寸时，我无法正确显示。我正在尝试显示一个`ImageView`开始`top=0`，`left=0`并且没有缩放。图像不适合屏幕是可以的。现在我有一个相对布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ImageView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/postagram_blank_large"/>
</RelativeLayout> 
```

我试过`wrap_content`在`RelativeLayout`高度和宽度上使用 a 。我也玩过和`scaleType`使用过`Scrollview`. 的问题`ScrollView`是图像比显示端口更高更宽（这也是注定要发生的）。

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:12:28.200

可以将`android:background`图像缩放到屏幕尺寸吗？尝试`android:src`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:51:36.993

尝试这个：

```
<ImageView
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:src="@drawable/postagram_blank_large"
    android:scaleType="matrix"
    /> 
```

`wrap_content`而不是`fill_parent`也有效，使用你想要的任何东西

# php - htaccess - 如果链接不存在重定向到搜索

> ID：14971111
> 
> 赞同：0
> 
> 时间：2013-02-20T02:03:30.137
> 
> 标签：php, .htaccess, mod-rewrite

我最近更改了我的网站永久链接。一些链接被谷歌索引，它们在搜索结果中。但是由于我的永久链接的更改，现在谷歌搜索将它们发送到错误 404 页面，这真的很糟糕。

因此，我不想显示 error404，而是将它们重定向到从链接中提取关键字的搜索页面，例如：

**我现在不存在的原始链接：**

```
http://www.mydomain.com/2013/01/some-title-of-my-site/ 
```

**现在如果是 error404 将它们重写到搜索页面**

```
http://www.mydomain.com/search?q=some+title+of+my+site 
```

**这是我的解决方案：它工作得很好（没有错误页面:-)）**

使用htaccess将error404重定向到搜索页面，然后通过explode url设置搜索查询

```
$urlfrom404 =   strtolower($_SERVER['REQUEST_URI']);
$tokens = explode('/', $urlfrom404);
$removeHyphen = strtr($tokens[sizeof($tokens)-2], '-', ' '); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:15:51.817

你不需要`.htaccess`做重定向。相反，您可以这样做：

```
if ( num_rows_result ( $query ) == 0 )
    header ( 'Location: /search?q=' . $_GET['post'] ); 
```

该函数`num_rows_result ( $query )`应该返回从您的数据库中匹配的行数，它应该是`0`或者`1`没有其他，因为您应该将它与主键进行比较。

# ios - GameKit 回合制和实时比赛

> ID：14971113
> 
> 赞同：1
> 
> 时间：2013-02-20T02:03:34.293
> 
> 标签：ios, game-center, gamekit, multiplayer

我正在开发一个有两个玩家的简单 Game Center 多人游戏；游戏的设置就像一场定时国际象棋比赛，每个玩家轮流，但只有 x 秒的时间来行动。我认为计时器对于保持玩家参与并避免回合制可能发生的长时间不活动是必要的。我查看了基于回合和实时比赛的 Apple Docs，但仍然找不到解决我的问题的方法。

简单来说，这款游戏有三个要求：

*   需要 Game Center/GameKit 实施
*   玩家必须轮流
*   玩家必须有时间限制

哪种方法最适合这种情况？实时还是回合制？它们可以同时使用吗？

我感谢您的帮助！

PS 我可能会有几个关于正确实施的后续问题。

# jquery - jQuery 选择，关于 ie6

> ID：14971114
> 
> 赞同：0
> 
> 时间：2013-02-20T02:03:48.687
> 
> 标签：jquery, css

给定以下html：

```
<ul class="accordion">

  <li class="accountStatus">
    <a href="#">
    <ul class="sub-menu"></ul>
  </li>

  <li class="Personal">
    <a href="#">
    <ul class="sub-menu"></ul>
  </li>

</ul> 
```

我知道以下 jquery select 适用于两个元素（a 和子菜单）：

```
$('.accordion > li > a')
    $('.accordion li > .sub-menu'); 
```

但这在ie6中不起作用。所以有人请给我另一种选择来选择需要选择的确切元素。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:24:48.363

一种方法是使用您在 IE6 中**知道的方法获取所有节点，然后在继续之前转换为 jQuery 对象，例如 (&** [**fiddle**](http://jsfiddle.net/FTav3/) )

```
var all_uls = document.getElementsByTagName('ul'), i = all_uls.length, 
    interesting_uls = [], interesting_as = [];
while (i--) {
    if (all_uls[i].className === 'accordion') {
        // get ul.accordion
        interesting_uls.push(all_uls[i]);
    }
}
all_uls = interesting_uls, i = all_uls.length; // reset for next class lookup
while (i--) {
    if (all_uls[i].className === 'sub-menu') {
        // get ul.accordion ul.sub-menu
        interesting_uls.push(all_uls[i]);
    }
    // get <a>s
    interesting_as = interesting_as.concat(all_uls[i].getElementsByTagName('a'));
}
$(interesting_uls); // to jQuery obj
$(interesting_as); 
```

# java - 垂直写入数组的整数

> ID：14971117
> 
> 赞同：-2
> 
> 时间：2013-02-20T02:04:13.513
> 
> 标签：java, arrays, integer

我知道这可能很简单，但我似乎真的不明白如何垂直写整数。例如，有一个数组有 4 个整数，分别是 9、21、63 和 501，结果如下

```
 9  2  5  6
        1  0  3
           1 
```

这是我程序的一小步，可能是最简单的一步，但我不明白该怎么做:(有人可以帮助我或指导我，这样我就可以完成我的程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:16:59.907

试试这个伪代码

```
int[] list = new int[] {9,21,63,501};
bool finished = false;

if (list.Count > 0) {

   for (var j=0;!finshed; j++) {
      finished = true;

      for (var i = 0; i<list.Count;i++) {
         String val = list[i].ToString();
         if (val.length>j) {
            write(val.charAt(j));
            finished = false;
         }
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T02:45:38.387

我创建了一个非常模块化且易于遵循的解决方案。

**编辑**：转换`digitAtIndex()`为纯数值计算。
保留原件并调用它`digitAtStrIndex()`。

```
public class IntegerColumns {

  public IntegerColumns() {
    int[] arr = new int[] {9, 21, 501, 63};
    printColumnMajorOrder(arr);
  }

  public static void main(String[] args) {
    new IntegerColumns();
  }

  // --------------------- Primary Functions --------------------------

  // Prints out an Array of Integers, each in a vertical column
  public void printColumnMajorOrder(int[] arr) {
    int cols = arr.length;
    int rows = maxDigits(arr);
    for (int r = 0; r < rows; r++) {
      for (int c = 0; c < cols; c++) {
        int d = digitAtIndex(arr[c], r);
        System.out.printf("%s\t", d >= 0 ? Integer.toString(d) : " ");
      }
      System.out.println();
    }
  }

  // Returns the length of an Integer
  public int numDigits(int i) {
    if (i <= 0) return 0;
    return (int)Math.floor(Math.log10(i))+1;
  }

  // Numeric calculation to find a digit at a specified index
  public int digitAtIndex(int num, int index) {
    int digits = numDigits(num);
    int deg = digits - index - 1;
    int pow = (int)Math.pow(10, deg);
    return pow > 0 ? (int)(num/pow)%10 : -1;
  }

  // Returns the number of digits for the longest Integer in an Array
  public int maxDigits(int[] arr) {
    int max = 0;
    for (int i : arr) {
      int size = numDigits(i);
      if (size > max) max = size;
    }
    return max;
  }

  // ---------------------- Extra Functions ---------------------------

  // Hybrid of Integer and Substrings - String manipulation = slow
  public int digitAtStrIndex(int number, int i) {
    String n = Integer.toString(number);
    return n.length() > i ? Integer.parseInt(n.substring(i, i+1)) : -1;
  }

  // Prints the digits of a number vertically
  public void printNumberVertical(int num) {
    for (int i = 0; i < numDigits(num); i++)
      System.out.println(digitAtIndex(num, i));
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T04:21:16.657

`公共类 VerticalPrintService {

```
private int[] data;

public VerticalPrintService( int[] intArray ) {

    this.data = intArray;

}

public void printVertically(){
    int cols = data.length; // # of columns
    int rows = getRows(); // # of rows

    System.out.println("cols: " + cols);
    System.out.println("rows: " + rows);

    String[][] matrix = new String[rows][cols];
    int rowIndex = 0;
    int colIndex = 0;

    // populate 2d array
    for ( int i : data ) {
        String str = String.valueOf(i);
        for ( int j = 0; j < str.length(); j++ ) {
            matrix[rowIndex][colIndex] = String.valueOf(str.charAt(j));
            rowIndex++;
        }

        colIndex++;
        rowIndex = 0;
    }

    // print
    for ( int i = 0; i < rows; i++ ) {
        for ( int j = 0; j < cols; j++ ) {
            if ( null == matrix[i][j] ) {
                System.out.print("\t");
            } else {
                System.out.print( matrix[i][j] + "\t" );
            }
        }
        System.out.println();
    }
}

private int getRows(){

    int max = 0;
    for ( int i : data ) {
        int len = String.valueOf(i).length();
        if ( len > max ) {
            max = len;
        }
    }

    return max;
} 
```

}`

在你的主要方法中

`public static void main(String[] args) {

```
int[] array = { 9, 53, 501, 90 };
VerticalPrintService vps = new VerticalPrintService(array);
vps.printVertically(); 
```

}`

# excel - Excel 将合并的单元格复制并粘贴为单单元格格式

> ID：14971118
> 
> 赞同：-1
> 
> 时间：2013-02-20T02:04:19.630
> 
> 标签：excel, formatting, copy, paste, cells

我正在尝试将一组合并单元格中的一些数据复制到单个单元格格式中。我不知道该怎么做。

我试图复制这个：

![在此处输入图像描述](../Images/f8ce1f926cdb6f0d4229339c17fafc1d.png)

这是我粘贴它时得到的：

![在此处输入图像描述](../Images/095767e9a5f0df42cd87a19dc8cefcaa.png)

这就是我粘贴它时想要发生的事情：

![在此处输入图像描述](../Images/1621ea47e072fb2c574fec85ff67e8ff.png)

由于我合并的单元格“是”单个单元格，我希望它们能像单个单元格一样粘贴。我在任何地方都没有找到解决方案。我知道您可以特殊粘贴值，但这并不能保留我需要的格式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T07:57:11.263

如果您粘贴您的选择，您会在粘贴范围的左下方看到一个蓝色的小图标。单击它并选择第三个图标“公式和数字格式”： ![在此处输入图像描述](../Images/691189de35c36207b8508ca9fd3da983.png)

这应该做的工作！

# javascript - 如何过滤存储在 jQuery 变量中的数据

> ID：14971120
> 
> 赞同：2
> 
> 时间：2013-02-20T02:04:32.970
> 
> 标签：javascript, jquery, jquery-selectors, filter

我有一个 javascript 变量来缓存选择器，例如：

```
var listOfDefferedElements = $('div [id^="Defer"]'); 
```

在调试视图中，我看到该列表具有类似于以下的数据：

```
listOfDefferedElements =
[
  <div id=​"DeferRed-1" class=​"Red Defer" title=​"Defer">​&amp;nbsp;​&lt;/div>, 
  <div id=​"DeferGreen-3" class=​"Green Defer" title=​"Deffered">​&amp;nbsp;​&lt;/div>, 
  <div id=​"DeferGreen-4" class=​"Green Defer" title=​"Defer">​&amp;nbsp;​&lt;/div>​, 
  <div id=​"DeferBlue-6" class=​"Blue Defer" title=​"Defer">​&amp;nbsp;​&lt;/div>​,
  <div id=​"DeferBlue-7" class=​"Blue Defer" title=​"Defer">​&amp;nbsp;​&lt;/div>​, 
  <div id=​"DeferBlue-8" class=​"BlueDefer" title=​"Deffered">​&amp;nbsp;​&lt;/div>, 
  <div id=​"DeferBlue-9" class=​"Blue Defer" title=​"Defer">​&amp;nbsp;​&lt;/div>​
] 
```

我想知道如何使用存储过滤条件的变量按类进一步过滤

```
var filter = "Blue" 
```

在变量中需要这样的输出，最后我应该能够更改类“延迟”->“删除”。感谢任何帮助。

```
listOfFilteredElements =
[
 <div id=​"DeferBlue-6" class=​"Blue Defer" title=​"Defer">​&amp;nbsp;​&lt;/div>​,
 <div id=​"DeferBlue-7" class=​"Blue Defer" title=​"Defer">​&amp;nbsp;​&lt;/div>​, 
 <div id=​"DeferBlue-8" class=​"Blue Defer" title=​"Deffered">​&amp;nbsp;​&lt;/div>, 
 <div id=​"DeferBlue-9" class=​"Blue Defer" title=​"Defer">​&amp;nbsp;​&lt;/div>​
] 
```

直到现在我试过这个，它过滤包含类“蓝色”的选择器：

```
var listOfFilteredElements  = _.filter(listOfDefferedElements, function(elem){
    return (elem.className).indexOf('Blue') >= 0;
}); 
```

现在我可以有一个语句来更改/更新其中所有元素的类吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T02:13:36.603

```
$("div[id^="Defer"]." + filter).removeClass('Defer').addClass('Delete'); 
```

[http://jsfiddle.net/ExplosionPIlls/GvyAg/](http://jsfiddle.net/ExplosionPIlls/GvyAg/)

由于 jQuery 方法将字符串作为选择器的参数，因此您可以像普通字符串一样连接它。 `.`是类选择器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T02:08:22.210

```
$('listOfDefferedElements ').find('.blue'); 
```

或者正如 ExplosionPills 所说的关于 data-* 使用这些。

像这样

标记：

```
<div id=​"DeferBlue-6" class=​"Defer" title=​"Defer" data-color="blue">​&amp;nbsp;​&lt;/div>​, 
```

jQuery

```
var filterResult=$('div [data-color="blue"]'); 
```

# c# - 二进制流“0”不包含有效的 BinaryHeader

> ID：14971121
> 
> 赞同：0
> 
> 时间：2013-02-20T02:04:38.367
> 
> 标签：c#

我得到这个异常“二进制流'0'不包含有效的BinaryHeader。可能的原因是无效的流或序列化和反序列化之间的对象版本更改。”。我正在寻找有关此异常的解决方案 2 天现在没有成功。我尝试了（我认为）everthing。请问有人可以看看下面的代码吗？错误在哪里？

谢谢。

```
 private player ByteArrayToPlayer(byte[] temp)
    {
        try
        {
            MemoryStream objectStream = new MemoryStream(temp);

            IFormatter BinaryFormatter
                        = new BinaryFormatter();

            objectStream.Position =0;

            return (player)BinaryFormatter.Deserialize(objectStream);     <--- get exception
        }
        catch (Exception ex)
        {
            ;
        }
        return null;

    }
    private byte[] PlayerToByteArray(player o)
    {
        try
        {
            objectStream = new MemoryStream();

           IFormatter BinaryFormatter
                        = new BinaryFormatter();

            BinaryFormatter.Serialize(objectStream, o);
            objectStream.Seek(0, SeekOrigin.Begin);
            return objectStream.ToArray();
        }
        catch (Exception ex)
        {
            ;

        }

        return null;
    }

   //Here are classes which serialize and deserialize.

    [Serializable()]
    public class player :ISerializable
   {
       public byte[] temp;
       public int id;
       public bool isConnected;
       public cube[] receivedCubes;
       public cube[] cubesToSend;
       public string name;
       public bool isLoaded = false;
       public List<index>[] indexes;         // list of field indexes

       public void GetObjectData(SerializationInfo info, StreamingContext ctxt)
       {
           info.AddValue("receivedCubes", receivedCubes);
           info.AddValue("name", name);
           info.AddValue("temp", temp);
           info.AddValue("isConnected", isConnected);
           info.AddValue("isLoaded", isLoaded);
           info.AddValue("cubesToSend", cubesToSend);
           info.AddValue("indexes", indexes);
           info.AddValue("id", id);

       }
       public player()
       { }

       public player(SerializationInfo info, StreamingContext ctxt)
       {
           receivedCubes = (cube[])info.GetValue("receivedCubes", typeof(cube[]));
           name = (String)info.GetValue("name", typeof(string));
           temp = (byte[])info.GetValue("temp", typeof(byte[]));
           isConnected = (bool)info.GetValue("isConnected", typeof(bool));
           isLoaded = (bool)info.GetValue("isLoaded", typeof(bool));
           cubesToSend = (cube[])info.GetValue("cubesToSend", typeof(cube[]));
           indexes = (List<index>[])info.GetValue("indexes", typeof(List<index>[]));
           id = (int)info.GetValue("id", typeof(int));

       }

   }

    [Serializable()]
    public class index   //object idex indicate where cube entry on the screen from other player
    {
        public int x;       
        public int y;
        public int indexOfTargetCube;     // that mark own of index( cube)
        public byte direct;
        public index()
        {
        }

          public index (SerializationInfo info, StreamingContext ctxt)
       {

           x = (int)info.GetValue("x", typeof(int));
           y = (int)info.GetValue("y", typeof(int));
           indexOfTargetCube = (int)info.GetValue("temp", typeof(int));
           direct=(byte)info.GetValue("isConnected",typeof(byte));

       }
          public void GetObjectData(SerializationInfo info, StreamingContext ctxt)
        {
            info.AddValue("x", x);
            info.AddValue("y", y);
            info.AddValue("indexOfTargetCube", indexOfTargetCube);
            info.AddValue("direct", direct);

        }

    }

[Serializable()]
public class cube :ISerializable
{
    public int x;  // position x
    public int y;   // position y
    public int size;  // size of cube
    public byte direct=2;  // direct , default is rigtUp=2;
    public  byte speed;    // speed cube
    public bool live;      // isLive ???
    public int room = 0;   // where cube is
    public bool isOut;     // idicate for dealer, that is cube out from players
    public bool isMarked = false; // indicate that cube have index
    public byte numOfExit = 0;    // num. of exit for dealer
    public int exploseTimer = 0;   // timer for explose
    public byte sizeTimer;          // timer for size cube
    public byte speedTimer=0;      // timer for speed cube
    public byte stopTimer=0;      // timer for stop cube
    public byte lastDirect=0;      // last direct, if cube keep position
    public int assumeX = 0;        // for index calculate
    public int assumeY=0;          // for index calculate

    public cube()
    {

    }

    public void GetObjectData(SerializationInfo info, StreamingContext ctxt)
    {
        info.AddValue("x", x);
        info.AddValue("y", y);
        info.AddValue("size", size);
        info.AddValue("direct", direct);
        info.AddValue("speed", speed);
        info.AddValue("live", live);
        info.AddValue("room", room);
        info.AddValue("isOut", isOut);
        info.AddValue("isMarked", isMarked);
        info.AddValue("numOfExit", numOfExit);
        info.AddValue("exploseTimer", exploseTimer);
        info.AddValue("sizeTimer", sizeTimer);
        info.AddValue("speedTimer", speedTimer);
        info.AddValue("stopTimer", stopTimer);
        info.AddValue("lastDirect", lastDirect);
        info.AddValue("assumeY", assumeY);
        info.AddValue("assumeY", assumeY);

    }

       public cube(SerializationInfo info, StreamingContext ctxt)
       {
           x=(int)info.GetValue("x", typeof(int));
           y=(int)info.GetValue("y", typeof(int));
           size=(int)info.GetValue("size", typeof(int));
           direct=(byte)info.GetValue("direct",typeof(byte));
           speed=(byte)info.GetValue("speed", typeof(byte));
           live=(bool)info.GetValue("live", typeof(bool));
           room=(int)info.GetValue("room", typeof(int));
           isOut=(bool)info.GetValue("isOut", typeof(bool));
           isMarked=(bool)info.GetValue("isMarked",typeof(bool));
           numOfExit=(byte)info.GetValue("numOfExit",typeof(byte));
           exploseTimer=(int)info.GetValue("exploseTimer",typeof(int));
           sizeTimer=(byte)info.GetValue("sizeTimer",typeof(byte));
           speedTimer=(byte)info.GetValue("speedTimer",typeof(byte));
           stopTimer=(byte)info.GetValue("stopTimer",typeof(byte));
           lastDirect=(byte)info.GetValue("lastDirect",typeof(byte));
           assumeX=(int)info.GetValue("assumeY",typeof(int));
           assumeY=(int)info.GetValue("assumeY",typeof(int));

       }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:26:17.877

修复这两个错别字，然后它对我来说很好：

你的意思是“assumeX”，它试图添加相同的密钥两次：

```
info.AddValue("assumeY", assumeY); 
```

在这里的两个地方都使用假设X。交叉的变量不会抛出，但会有错误的数据：

```
assumeX=(int)info.GetValue("assumeY",typeof(int)); 
```

# php - 在 PHP 中使用花括号来构造代码

> ID：14971123
> 
> 赞同：23
> 
> 时间：2013-02-20T02:04:46.253
> 
> 标签：php, curly-braces

是否可以将 PHP 中的代码片段括在括号内（不使用片段作为函数）？

以下代码的行为方式是否与没有大括号时的行为方式相同？或者可能有任何问题，具体取决于括号内或括号外使用的代码类型？

例如，这是否会：

```
<?php

// First Code-Block
{# several lines of code
}

// Second Code-Block
{# another several lines of code
}

?> 
```

始终以与以下相同的方式运行：

```
<?php

// First Code-Block
# several lines of code

// Second Code-Block
# another several lines of code

?> 
```

**更新：** 正如“My1”的评论中所述，目标之一是构建大型代码段。特别是因为大多数 IDE 都为您提供了折叠括号之间的行的选项。

特别是考虑到“dragondreamer”的“Luke Mills”的答案，我玩了一下，到目前为止我没有遇到任何副作用。当然，这可能会随着未来的新 PHP 版本而改变，但“Luke Mills”的回答给出了需要注意的很好的指示。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-20T02:08:31.783

是的，但它不会创建新的本地范围。这不是通常会做的事情。通常人们用评论标记这样的块。

**更新：**

花了一些时间在手册中找到对它的引用，但这里是：

[http://www.php.net/manual/en/control-structures.intro.php](http://www.php.net/manual/en/control-structures.intro.php)

> 任何 PHP 脚本都是由一系列语句构成的。语句可以是赋值、函数调用、循环、条件语句，甚至是什么都不做的语句（空语句）。语句通常以分号结尾。此外，通过用花括号封装一组语句，可以将语句分组为一个语句组。语句组本身也是一个语句。本章描述了各种语句类型。

这里的关键是**可以通过用花括号封装一组语句来将语句分组为一个语句组**。

我还查看了与这种情况有关的[变量范围](http://php.net/manual/en/language.variables.scope.php)的引用，但手册没有特别提到它，但是你可以这样想：

在 PHP 中，函数和类创建一个变量范围。你可以在[这里](http://php.net/manual/en/language.variables.scope.php)阅读。但是语句组（如上所述）没有。不要把语句组的花括号想成函数（或类）包裹括号的样子，而要把它们想成包裹控制结构（、、、、、等）的语句组的花`if`括号——因为他们就是这样。很明显，如果您使用大括号不引入新范围的语句（或任何其他控制结构），它们只是语句块的包装器。`for``while``switch``if`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-03-24T13:57:46.323

如果将 PHP 代码行为括在大括号中，则它不会改变。但是，您不能在大括号内使用一些 PHP 语句：

*   `namespace`声明；
*   命名空间`use`声明别名或导入任何名称；
*   全球`const`声明；
*   `__halt_compiler()`.

这意味着，以下脚本将起作用：

```
<?php
const x = 5;
echo x; 
```

但以下内容将无法编译：

```
<?php
{
  const x = 5;
  echo x;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-07-22T08:29:57.007

在我正在进行的一个项目中，我使用语句组来指示结构——在我的例子中，节点之间的父/子关系在路由器中创建：

```
$router = new Router();

$admin = $router->route('admin');
{
    $upload = $admin->route('upload')->post('upload');

    $menu = $admin->route('menu');
    {
        $menu->route('load')->get('load');
        $menu->route('save')->get('save');
    }
} 
```

```

在内部，这构建了一个层次结构，如：

```
/admin
  /upload
  /menu
    /load
    /save 
```

在这个例子中调用`route()`创建了一个孩子——所以代码创建了一个模型（在路由器内部），它具有树结构，但代码的结构并没有反映这一点。

我在这里使用花括号使代码更清晰，因为阅读没有花括号和缩进的代码将非常困难：

```
$router = new Router();

$admin = $router->route('admin');
$upload = $admin->route('upload')->post('upload');
$menu = $admin->route('menu');
$menu->route('load')->get('load');
$menu->route('save')->get('save'); 
```

我认为，这种情况下的缩进确实可以澄清正在发生的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-05T16:48:29.690

我也这样做，仅仅是因为我的文本编辑器（Komodo Edit 8.5）。如果它可以帮助您并且不会造成任何问题并且没有其他简单的方法可以做到这一点，那么这不是“糟糕的理由”或“糟糕的编码”。

我通过解决方法解决了这个问题：

```
if(1 == 1){ //always executing if function
//whatever you want to add
}
# 
```

在末尾添加 # 可以防止我的编辑器折叠大括号下方的所有空行。这有助于进一步构建代码。

# ios - 在 iOS 中，使用 UIViewController 构建通用 UI 组件是一种好习惯吗？

> ID：14971127
> 
> 赞同：2
> 
> 时间：2013-02-20T02:05:06.840
> 
> 标签：ios, objective-c

如果我想构建一个通用的 UI 组件（一个将处理自己的视图和逻辑、数据源等的组件），子类化 UIViewController 是一个好习惯吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:50:42.047

我过于简单的答案是“不，在构建通用组件时不会自动从`UIViewController`子类开始”。然而，仅此一项并不是一个有用的答案，在某些情况下，`UIViewController`子类正是正确的解决方案。

相反，让我们考虑如何决定你的组件应该是什么。我认为解决这个问题的最好方法是回答三个问题：

1.  这个组件负责什么？
2.  你想如何与之互动？
3.  它的依赖是什么？

在所有情况下，我们都可以尝试尽可能简单地开始，只有在这些问题的答案需要时才增加复杂性。

这个组件可以只是一个功能吗？没有对象，没有类，如果您只想添加一些行为，那么我们可能需要的只是一个函数。如果此行为仅适用于特定的现有类型，那么也许我们需要现有类上的类别。

不足以涵盖我们想要做什么？好的，我想我们可能正在谈论一种新类型，所以让我们创建一个类。它可以只是一个子类`NSObject`吗？

想要在视图中显示一些东西？好的，那么我们至少有一个子类，如果它更具交互性`UIView`，也许是一个子类。`UIControl`

视图需要一些数据来支持它吗？没问题，听起来我们现在需要两件；显示数据的视图和提供数据的数据源。在这里，视图不需要知道谁创建和拥有这个数据源。只要向视图提供了一个，我们就可以使用它，其他任何事情都超出了视图的职责范围。类似地，我们可能会添加一个委托来通知其他一些与视图交互的对象。

如果我们还没有涵盖这个组件的所有职责，那么也许我们还需要另一个部分，在控制器层中的一些东西来管理我们的视图。我们仍然没有（还）谈论一个`UIViewController`虽然！拥有一个作为`NSObject`子类的“控制器”或“服务”很好。如果这部分需要做的只是管理网络连接，或者将`NSFetchedResultController`结果映射到我们视图的数据源协议并更新视图，或者只是提供最常见的模型对象映射到视图数据源的便捷实现，那么一个简单的“控制器” “对象仍然是我们所需要的。

还是不够？最后，我们到了考虑提供`UIViewController`子类的地步。也许我们想让组件的用户只展示一个模态视图控制器来移交交互的责任（发送电子邮件，撰写推文）。也许我们想要提供一组与视图控制器生命周期事件相关的通用默认行为（`UITableViewController`闪烁的滚动条`-viewDidAppear:`）。

从您需要支持您想要提供的行为的部分构建您的组件，但要使其尽可能小和简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T02:12:59.917

我会说不。但这取决于。如果您的组件管理其他视图控制器或具有/将具有任何类型的非特定于视图的逻辑（例如导航逻辑、业务逻辑等），那么您应该子类化视图控制器。*再一次，这使它不仅仅是一个 UI 组件。*

否则，您应该继承一个 UIView，就像 Apple 对许多组件所做的那样，包括 UITableView（说到数据源）、GLKView、UICollectionView。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T02:09:26.060

是的，在许多情况下这是一种很好的做法。iOS SDK 包含许多`UIViewController`子类示例。其中一些只包含少量的通用行为，如果不进行定制基本上是无用的：

*   `GLKViewController`
*   `UICollectionViewController`
*   `UITableViewController`

其中一些提供了重要的通用行为，但仍然主要是您自己的视图控制器的容器：

*   `UINavigationController`
*   `UIPageViewController`
*   `UISplitViewController`
*   `UITabBarController`

但它们中的大多数本质上都是完整的包，很少或不需要（或能力）自定义它们的行为：

*   `ABNewPersonViewController`
*   `ABPersonViewController`
*   `ABUnknownPersonViewController`
*   `EKCalendarChooser`
*   `EKEventEditViewController`
*   `EKEventViewController`
*   `GKAchievementViewController`
*   `GKFriendRequestComposeViewController`
*   `GKGameCenterViewController`
*   `GKLeaderboardViewController`
*   `GKMatchmakerViewController`
*   `GKTurnBasedMatchmakerViewController`
*   `MFMailComposeViewController`
*   `MFMessageComposeViewController`
*   `MPMediaPickerController`
*   `MPMoviePlayerViewController`
*   `PKAddPassesViewController`
*   `QLPreviewController`
*   `SKStoreProductViewController`
*   `SLComposeViewController`
*   `TWTweetComposeViewController`
*   `UIActivityViewController`
*   `UIImagePickerController`
*   `UIReferenceLibraryViewController`
*   `UIVideoEditorController`

如果您考虑所有这些的共同点，您可能会得出结论，它们都有两个共同点：

*   每个都有与之交互的特定模型（在 MVC 意义上），并且该模型并不特定于您的应用程序。模型差异很大（`UIVideoEditorController`的模型是单个视频；`UIImagePickerController`的模型是整个照片库；`GKAchievementViewController`的模型是可能在“云”中的 Apple 服务器上的数据库），在某些情况下您提供模型（或某些模型的属性），在某些情况下，您会在最后收到模型（或其片段）。但在任何情况下，视图控制器都会处理用户和模型之间的所有交互，而您的应用程序很少或没有持续的帮助。

*   每个都提供自己的视图层次结构，几乎不需要或不需要自定义（甚至允许）。

换句话说，这些视图控制器中的每一个都不仅仅是 MVC 模式的“C”。这是整个 MVC 冰山的一角。

如果您的组件也是 MVC 的冰山，那么将冰山一角暴露为`UIViewController`子类是非常合适的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T03:23:11.447

这取决于您使用的 iOS 版本。

A. 在 iOS 5.0 之前，这不是一个好的做法，也不推荐。

B. 从 iOS 5.0 开始，就可以了。

子类化一个 UI 组件的视图控制器（UIView），这意味着你想使用视图控制器生命周期方法来管理用户交互和视图显示过程，数据模型等。所以，如果生命周期方法不能轻易自动化调用，视图控制器没有那么有意义。

从 iOS 5.0 开始，可以创建自定义视图控制器容器，因此，可以使用视图控制器构建自定义通用 ui 组件以添加为子视图控制器。

在 iOS 5.0 之前。使用自定义委托协议子类化 UIView 是正确的方法。另一件事是关于代码组织。将所有自定义委托方法放到另一个自定义类中，而不是在视图控制器中，在视图控制器中只需初始化一个委托类实例，并将其设置为视图委托属性。

# c# - 上传的文件为空

> ID：14971128
> 
> 赞同：1
> 
> 时间：2013-02-20T02:05:11.160
> 
> 标签：c#, html, asp.net-mvc, file-upload, asp.net-mvc-4

在 ASP.NET MVC4 中，文件上传视图总是向控制器发送 null。我不知道为什么，我不知道如何解决它并且搜索已被证明是徒劳的......

控制器方法：

```
[HttpPost]
[ValidateInput(false)]
public ActionResult uploadCustomImage(int id, HttpPostedFileBase file)
{} 
```

看法：

```
@using (Html.BeginForm("uploadCustomImage", "W", new { id=ViewBag.id }, FormMethod.Post, new { enctype = "multipart/form-data", name="uploadingimage" }))
{ 
    <input name="file" id="file" type="file" />
    @Html.SubmitButton()
} 
```

它可以很好地进入控制器，因此路由一切正常。但文件始终为空。我尝试了几种不同的方法：重命名输入/对象，不使用文件参数并调用它： HttpPostedFileBase file = Request.Files["file"]; （结果也为空）

我尝试包含一个 formcollection 作为参数（有和没有不必要的表单元素）。这个文件仍然是空的。

我当然是在按提交之前选择一个文件 =P 我已经尝试了多个文件；具有非常基本的文件名（没有奇怪的 unicode，甚至没有空格）和更奇怪的文件名。大文件，小文件。

一切都是空的！我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:11:07.323

你的名字不对齐......你需要在你的控制器中绑定你的文件控件“postedFile”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T20:29:15.263

试试这样：

```
@using (Html.BeginForm("uploadCustomImage", "W", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
   <input name="fileToUpload" type="file" />
   <input type="submit" />
}

[HttpPost]
[ValidateInput(false)]
public ActionResult uploadCustomImage(int id, HttpPostedFileBase fileToUpload)
{} 
```

**[编辑]**

我刚刚在我正在处理的项目中实现了一个上传功能并且它有效。

```
@using (Html.BeginForm("Import", "MY_CONTROLLER", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <input type="file"  id="UploadedXlsFile" name="UploadedXlsFile"/>

    <input type="submit" id="Submit" name="Submit" value="Submit"/>

}

public ActionResult Import()
{
    if (Request.Files["UploadedXlsFile"].ContentLength > 0)
    {
       .............Do stuff ................
    }
} 
```

以前的代码对我有用。如果我在 Action 方法中放置一个断点，我可以看到该文件不为空。

# sql - sp_executesql 以及全文搜索和变形形式

> ID：14971129
> 
> 赞同：1
> 
> 时间：2013-02-20T02:05:13.757
> 
> 标签：sql, sql-server, full-text-search, sp-executesql

我正在尝试在其中执行带有全文搜索的 sp_executesql。

此查询运行良好。

```
exec sp_executesql 
    N'SELECT TOP (@p0)  this_.org_id as y0_, this_.u_Name as y1_, this_.Category as y2_ FROM Organization this_ 
    WHERE contains (this_.u_Name,@p1)'
    ,N'@p0 int,@p1 nvarchar(4000)',
    @p0=1000,@p1=N'service' 
```

但是我必须为单词变化添加一个变形形式，然后看起来参数 @p1 现在是空白的，并且查询没有返回任何结果。任何原因 ？如果我将@p1 替换为实际的“服务”一词，一切正常。

```
exec sp_executesql 
N'SELECT TOP (@p0)  this_.org_id as y0_, this_.u_Name as y1_, this_.Category as y2_ FROM Organization this_ 
WHERE contains (this_.u_Name,''formsOf(inflectional, @p1)'')'
,N'@p0 int,@p1 nvarchar(4000)',
@p0=1000,@p1=N'service' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T05:58:28.453

在 formsOf() 中，您的变量 @p1 变成了一个字符串。尝试这个：

```
exec sp_executesql 
N'declare @ft nvarchar(4000)
set @ft = ''formsof(inflectional, '' + quotename(@p1, ''"'') + '')''
SELECT TOP (@p0)  this_.org_id as y0_, this_.u_Name as y1_, this_.Category as y2_ FROM Organization this_ 
WHERE contains (this_.u_Name,@ft)'
,N'@p0 int,@p1 nvarchar(4000)',
@p0=1000,@p1=N'service' 
```

# ios - 为什么不移动设备时调用了didupdatelocation

> ID：14971140
> 
> 赞同：4
> 
> 时间：2013-02-20T02:07:01.343
> 
> 标签：ios, objective-c, cllocation

我将 CLLocation 用于在地图视图中记录人们跑步或行走时的轨迹的应用程序，但我发现当我的设备仍然（未移动）时，- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray * )locations 也经常被调用？目前，我的 locationmanager 的期望精度是 10 米，距离过滤器是 10。

如何处理这种情况？我尝试过使用大距离过滤器值（如 150），但我发现如果我这样做，那么我无法准确记录人们何时跑步或走路

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T02:25:28.370

GPS 不准确。您可以移动几英尺并获得相同的位置。或者你可以静坐不动，然后被告知你已经移动了几英尺。

您也许可以结合加速度计的测量结果来确定您是否真的移动了，但这只有在设备坐在桌子上不动时才有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T02:18:13.970

你有`stopUpdatingLocation`在初始之后打电话`startUpdatingLocation`吗？如果您不调用它，它将不断更新位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-03T17:07:57.423

系统如何知道你是否真的搬家了？它必须获取您的位置才能找到。您期望的准确度越准确，它看起来就越有活力和频率。我的意思是，如果它假设使用蜂窝塔信息，那么它会研究更多的蜂窝塔以更好地进行三角测量。或者简单地说，它的获取之间的间隔会更小。**结论：即使您不移动，操作系统也会获取数据**。

此外，为了对您的位置进行三角测量，操作系统（取决于您期望的准确度和之前的动作）将使用 GPS、wifi、蜂窝塔的组合。而且因为有人可能突然关闭/打开他们的 wifi，或者您用来获取位置的卫星移动了一点或卫星发生了变化，或者蜂窝塔信号可能由于其带宽而变得或多或少准确限制那么您计算的位置可能会发生变化，如果它超过您的距离过滤器，则会触发回调。（我不相信你得到的回调少于你的距离过滤器，但我可能是错的）这可能意味着你`distanceFilter`被设置为非常小的数字，这取决于你的业务需求可能是也可能不是一个好的选择。**结论：您的位置永远不会 100% 准确**

周期性抓取的结果、错误的可能性和小距离过滤器导致可能不正确的 locationChanges。

# java - logback SMTPAppender 在不同的线程上复制模式

> ID：14971144
> 
> 赞同：4
> 
> 时间：2013-02-20T02:07:28.217
> 
> 标签：java, logback, smtpappender

我无法始终如一地重现这一点。我确实怀疑这是 logback 中的一个错误，但显然这听起来不太可能，在我提交之前我需要一个干净的可重现的测试用例，所以如果有人看到类似的行为，我会问 SO。

基本上我有一个`SMTPAppender`看起来像这样的：

```
<appender name="QA-SMTP"
    class="ch.qos.logback.classic.net.SMTPAppender">
            <!-- SMTP appends a default evaluator of on error, this is the simplest evaluator I found to implement -->
    <evaluator class="ch.qos.logback.classic.boolex.OnMarkerEvaluator">
        <marker>me.unroll.logging.loggers.InfoEmail.QA</marker>
    </evaluator>

    <smtpHost>smtp.gmail.com</smtpHost>
    <smtpPort>465</smtpPort>
    <SSL>true</SSL>
    <username>test</username>
    <password>test</password>
    <from>test</from>
    <to>test</to>
    <subject>%message</subject>
    <layout>
        <pattern>hello! thread: %thread</pattern>
    </layout>
</appender> 
```

我收到的电子邮件看起来像这样。这没有发生 1）如果`logger.error(...)`在线程上调用`main`，或者 2）当我刚刚创建一个测试池并提交时，虽然它经常 - 但*不是*始终 - 发生在我发现它的实际生产案例中（其中正在接受来自 MINA 的回调）。

> 你好！线程：主你好！线程：NioProcessor-2

另一种情况与另一个附加程序匹配，为简洁起见省略：

> 已为用户 / 创建了操作。
> 
> 由机器创建：ip-10-212-90-140.ec2.internal 时间戳：2013 年 2 月 19 日，02:48:09.747 记录器来源：me.unroll.logging.loggers.InfoEmail 在应用程序中：监控客户端 yahoo === ==========================对用户 12345 / test@gmail.com 采取了行动
> 
> 机器创建：ip-10-212-90-140.ec2.internal 时间戳：2013 年 2 月 19 日，15:24:06.016

“用户 ID / 电子邮件”取自`MDC`- 这就是为什么我有明确打印线程的想法。从本质上讲，它看起来像是创建了相同的日志事件，一个来自主线程（logback 到底是如何设法附加我的主线程的？不知道），另一个来自有问题的实际线程。

有没有人看到这种行为或知道如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:50:45.747

也许我误解了你的问题，但正如我所见，你说 logback 有时会在一封电子邮件中发送两个事件。按照设计，有一个 bufferSize 允许收集事件包，如果它们来得很快。文档中有一段引用：

> SMTPAppender 将日志事件累积在一个或多个固定大小的缓冲区中，并在用户指定的事件发生后将相应缓冲区的内容发送到电子邮件中。SMTP 电子邮件传输（发送）是异步执行的。默认情况下，电子邮件传输由 ERROR 级别的日志事件触发。

您将评估器更改为基于标记的。这意味着附加到记录器的先前事件将位于缓冲区中，直到标记的事件到来。

还要注意评估者如何触发电子邮件传输。

> 因此，SMTPAppender 发送的任何电子邮件中传递的日志记录事件的数量上限为 256。

如果您希望每封电子邮件有单个事件，则应将缓冲区大小更改为 1。但我怀疑如果消息的发送速度比发送电子邮件的速度快，它会丢弃消息：

> SMTPAppender 在其循环缓冲区中仅保留最后 256 个日志记录事件，当其缓冲区已满时丢弃较旧的事件。

但据我了解，您可以更改`asynchronousSending`为 false ，因此它将阻止日志记录语句，直到发送消息。

也许你可以在模式的末尾添加“%n”，这样它就会用一个新的行分隔日志事件，这样它就可以阅读了。

免责声明：我只是在阅读文档并且从未尝试过自己，所以不要相信它，只是在家里尝试一下。

# .htaccess - 配置文件 url 的 htaccess RewriteRule

> ID：14971147
> 
> 赞同：0
> 
> 时间：2013-02-20T02:08:00.703
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite

这是我的 .htaccess ：

```
RewriteEngine on
RewriteBase /site
RewriteCond %{request_filename} -f

RewriteRule ^(.*) $1 [L]
RewriteRule ^([a-z]+)(/([^/]{0,32})(/.+)?)?$  index.php?a=$1&u=$3    [L] 
```

如果有人访问 www.mysite.com/johndoe htaccess 将他/她发送到此链接 index.php?a=profile&u=johndoe，我正在尝试以这种方式使用短网址，这样做的最佳方法是什么？我确实阅读了 htaccess 教程并尝试了不同的方法但失败了：/

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-20T09:00:21.853

尝试反转条件并删除重写基础：

```
RewriteEngine on

RewriteCond %{request_filename} !-f
RewriteCond %{request_filename} !-d
RewriteRule ^([^/]+)/?$  /index.php?a=profile&u=$1    [L] 
```

这将使它成为：

> 如果有人访问 www.mysite.com/johndoe

“johndoe”被 匹配`^([^/]+)/?$`并反向引用`$1`，结果是：

> 此链接 index.php?a=profile&u=johndoe

# php - 从另一个网站提取文本

> ID：14971157
> 
> 赞同：0
> 
> 时间：2013-02-20T02:08:59.033
> 
> 标签：php

是否可以使用 php 从另一个域（当前未拥有）中提取文本数据？如果没有其他方法？我试过使用 iframe，因为我的页面是一个移动网站，所以看起来不太好。我正在尝试显示特定区域的海洋预报。[这](http://forecast.weather.gov/MapClick.php?lat=29.26034686&lon=-91.46038359&unit=0&lg=english&FcstType=text&TextType=1)是我要显示的链接。

更新...........

这就是我最终使用的。也许它会帮助别人。但是，我觉得我的问题有不止一个正确答案。

```
<?php

$ch = curl_init("http://forecast.weather.gov/MapClick.php?lat=29.26034686&lon=-91.46038359&unit=0&lg=english&FcstType=text&TextType=1");

curl_setopt($ch, CURLOPT_HEADER, false);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
$content = curl_exec($ch);
curl_close($ch);
echo $content;

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:16:31.363

尝试使用如下所示的用户代理。然后你可以使用 simplexml 来解析内容并提取你想要的文本。 [有关 simplexml 的更多信息。](http://php.net/manual/en/book.simplexml.php)

```
$opts = array(
  'http'=>array(
    'method'=>"GET",
    'header'=>"User-agent: www.example.com"
  )
);

$content = file_get_contents($url, false, stream_context_create($opts));
$xml = simplexml_load_string($content); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T03:10:13.343

这就像我认为你想要的那样工作，除了它取决于天气网站的相同格式（也显示“Outlook”）。

```
<?php
//define the URL of the resource
$url = 'http://forecast.weather.gov/MapClick.php?lat=29.26034686&lon=-91.46038359&unit=0&lg=english&FcstType=text&TextType=1';
//function from http://stackoverflow.com/questions/5696412/get-substring-between-two-strings-php
function getInnerSubstring($string, $boundstring, $trimit=false)
{
    $res = false;
    $bstart = strpos($string, $boundstring);
    if($bstart >= 0)
    {
        $bend = strrpos($string, $boundstring);
        if($bend >= 0 && $bend > $bstart)
        {
            $res = substr($string, $bstart+strlen($boundstring), $bend-$bstart-strlen($boundstring));
        }
    }
    return $trimit ? trim($res) : $res;
}
//if the URL is reachable
if($source = file_get_contents($url))
{
    $raw = strip_tags($source,'<hr>');
    echo '<pre>'.substr(strstr(trim(getInnerSubstring($raw,"<hr>")),'Outlook'),7).'</pre>';
}
else{
    echo 'Error';
}
?> 
```

如果您需要任何修改，请发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T02:11:35.473

您可以为此使用 cURL。看看[http://www.php.net/manual/en/book.curl.php](http://www.php.net/manual/en/book.curl.php)

# android - AVD 模拟器没有与谷歌日历同步的选项

> ID：14971158
> 
> 赞同：8
> 
> 时间：2013-02-20T02:09:04.103
> 
> 标签：android, google-calendar-api, avd, data-synchronization, google-account

我的应用程序具有向日历添加事件的功能，但为了实现这个 Android 的日历应用程序需要有日历。为了添加日历，您必须添加一个 Google 帐户。所以我在模拟器中添加了一个谷歌帐户。它显示为同步关闭：

![同步已关闭](../Images/7eedf1dfe5584b37d791ecfedcc2b813.png)

，所以当我点击它时，数据同步下没有项目。

![没有相关产品](../Images/96615ac3c6912820dca1fbcfd5a727b7.png)

当我进入日历应用程序 - 设置并单击显示的电子邮件地址时，它说该**帐户未同步**。

![帐户未同步](../Images/742d7a06aede9c222835c1cf0b728c99.png)

当我点击帐户和同步按钮时，我又回到了第一方，无限循环。

注意在模拟器中使用电子邮件应用程序同步很好。 ![电子邮件很好](../Images/9fbb498c13fa9aed7e59abaddf7955f0.png)

我是否遗漏了一些未记录的步骤，或者谷歌最近为谷歌日历关闭了这个功能。或者您是否需要一个 Google Plus 帐户才能使用此功能，因为他们会在帐户创建屏幕中让您使用 Google plus。

我正在使用带有 Google API 的 Android 4.03。我也在 4.2 上试过这个，我也遇到了同样的问题。

这是从打开设置菜单一直到单击帐户名称的logcat [http://pastebin.com/9Fk8NA0i](http://pastebin.com/9Fk8NA0i)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-06-16T15:21:41.920

我知道这是旧的，但我确实找到了解决方案。Sergery 是正确的，您不能通过免费的 Google 帐户使用 Google Sync，因此您不能使用免费的 Google 帐户来同步日历。

我的解决方案是注册一个免费的 Outlook.com 帐户并使用 Outlook.com 的活动同步设置。

我遵循的步骤来自[我的博客](http://samuelhaddad.com/2015/06/16/add-a-calendar-on-android-emulator/)，如下所示：

*   在 outlook.com 上注销免费帐户
*   选择公司账户
*   输入用户名，例如 email@outlook.com
*   选择手动设置
*   选择“Exchange”的帐户类型（这将允许我们与主动同步同步）
*   输入服务器为 s.outlook.com
*   安全类型为 SSL/TLS
*   选择下一步
*   确认设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T20:01:21.713

我知道现在回答你的问题为时已晚，但我刚刚遇到了和你一样的问题。可能对某人有用。经过几个小时的密集谷歌搜索，我发现了问题的根本原因：“从 2013 年 1 月 30 日开始，除了付费 Google Apps 用户之外，其他用户将无法使用 Google Sync 设置新设备”。这是[链接](http://support.google.com/a/bin/answer.py?hl=en&answer=2716936)。

# html - 我怎样才能像主要网站一样实现apple-touch-icon-precomposed favicons？

> ID：14971159
> 
> 赞同：3
> 
> 时间：2013-02-20T02:09:09.633
> 
> 标签：html, favicon

根据 Twitter bootstrap 文档，您将`apple-touch-icon-precomposed`图标和您的一般 favicon 设置如下：

```
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-touch-icon-114-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-icon-72-precomposed.png">
<link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png">
<link rel="shortcut icon" href="assets/ico/favicon.png"> 
```

这一切都很好而且很花哨，但我似乎找不到任何实际使用这些链接标签来执行此操作的主要网站 - 是否有理由或其他方式使图标可用？

我检查过：

*   谷歌
*   必应
*   Facebook
*   推特主页

是否有任何主要网站使用 apple-touch-icon-precomposed favicons？

如果是这样，他们在哪里/他们是如何做到的？如果不是，为什么不呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:20:09.953

如果您将它们直接包含在也可以使用的文档根目录下。我们的网站出现问题，Apple 无法找到图标。不过，我并没有参与其中，我只是听说过，但解决方案是将图标直接放在文档根目录下。

# class - 我可以在 Scala 中动态构造一个基于它扩展的类计算的特征吗？

> ID：14971164
> 
> 赞同：1
> 
> 时间：2013-02-20T02:09:30.410
> 
> 标签：class, scala, mixins, traits

我想完成一些与标准 mixin 有点不同的事情。我想构建一个特征，其新字段是根据它扩展的类（或特征）的字段计算的。

例如，如果我有这样的课程：

```
class Point {
    var x: Int = 0
    var y: Int = 0
} 
```

我想制作一个这样的课程：

```
class Point' {
    var x: Int = 0
    var y: Int = 0
    var myx: Int = 0
    var myy: Int = 0
} 
```

我希望能够编写一个函数来计算字段名称`myx`，`myy`然后使用特征将它们混合到类中。这是我想做的一些虚构的伪Scala：

```
def addMy(cls: Class) {
    newFields = cls.fields.map( f => createField("my" + f.name, f.type) )
    myTrait = createTrait(newFields)
    extendClass(cls, myTrait)
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:56:37.760

我能想到的实现这种行为的最简单方法是使用 Scala 2.10 的[动态](http://www.scala-lang.org/api/current/index.html#scala.Dynamic)特性。因此，`Point`必须扩展`Dynamic`，您可以通过将计算逻辑添加到成员函数`selectDynamic`和`updateDynamic`. 这并不是“混合”实际所指的内容，但它仍然允许您动态添加功能。

为了确保可以检查是否混合了特定功能，您可以使用以下约定。为了检查一个字段是否混入，用户可以调用`hasMyx`或`has...`一般。默认情况下，您的实现返回`false`. 每次混入一个新字段时，相应的`has...`函数都会返回`true`。

请注意，您所有混合字段的返回类型将是`Any`（除非您的所有字段都属于同一类型，请参见例如[这个问题](https://stackoverflow.com/questions/14483923/can-i-create-a-class-with-multiple-dynamic-methods-with-different-return-types)）。我目前认为无法避免这种设计的大量铸造。

# c - 用 fgets() 填充字符串数组后，如何从字符串数组中删除换行符“\n”？

> ID：14971168
> 
> 赞同：1
> 
> 时间：2013-02-20T02:10:12.927
> 
> 标签：c, arrays, string, char, fgets

我正在使用的数组是：

```
char arr[91][12]; 
```

所以我使用 for 循环从文件中填充我的数组，如下所示：

```
for(i = 0; fgets(arr[i], 12, inFile); i++){} 
```

当我想打印该数组中的任何内容时，它会自动转义到下一行。

测试该数组：

```
for(i = 0; fgets(arr[i], 12, inFile); i++){
    printf("%s", arr[i]);
}

//one
//two
//three etc.

//want it to be 'one two three etc.' 
```

我正在尝试使用`strpbrk()`查找`\n`数组中的每个字符串并将其更改为`\0`：

```
for(i = 0; fgets(arr[i], 12, inFile); i++){
if(strpbrk(arr[i], "\n") != NULL ){
    arr[i][strpbrk(arr[i], "\n")] = '\0';
    }
printf("%s", arr[i]);
} 
```

但这给了我错误。有没有更好的方法来做我想做的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T02:14:14.463

它实际上比你想象的要简单得多。如果换行符在末尾（就像使用 读取时一样`fgets`），只需将最后一个字符更改为字符串终止符：

```
arr[i][strlen(arr[i]) - 1] = '\0'; 
```

这`-1`是因为数组（可以认为是字符串）从零开始索引并转到`length - 1`.

* * *

为了确保你真的*有*一个换行符，你可以`strpbrk`像你一样使用 eg （但当然不是你在其他答案中解释的方式）。但我认为使用[`strrchr`](http://en.cppreference.com/w/c/string/byte/strrchr). 首先是因为它更简单（只搜索字符而不是字符串），其次是因为它从末尾开始搜索：

```
char *newlineptr = strrchr(arr[i], '\n');
if (newlineptr != NULL)
    *newlineptr = '\0'; 
```

* * *

或者最快的方式：

```
size_t length = strlen(arr[i]);
if (arr[i][length - 1] == '\n')
    arr[i][length - 1] = '\0'; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T02:16:13.677

`strpbrk()`返回一个指向换行符的指针，所以你应该只使用一次：

```
char *nl;

if ((nl = strpbrk(arr[i], "\n")) != NULL)
    *nl = '\0'; 
```

或者，换行符将是字符串中的最后一个字符，所以这也有效：

```
size_t len = strlen(arr[i]);
if (arr[i][len-1] == '\n')
   arr[i][--len] = '\0'; 
```

请注意，这会检查您是否有换行符；`fgets()`当 NUL 之外的任何内容的空间用完时停止读取`'\0'`，即使它还没有读取换行符。这也为您提供了字符串的长度（`strpbrk()`间接地也是如此；它是`nl - arr[i] - 1`）。请注意`strpbrk()`和它的相对`strcspn()`比 更复杂`strlen()`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T02:13:45.297

`strpbrk`返回一个*指向*. `'\n'`所以改变：

```
arr[i][strpbrk(arr[i], "\n")] = '\0'; 
```

到：

```
*strpbrk(arr[i], "\n") = '\0'; 
```

# java - 无法弄清楚为什么我的三角形类上的 x 和 y 坐标被切换

> ID：14971171
> 
> 赞同：0
> 
> 时间：2013-02-20T02:11:03.000
> 
> 标签：java, debugging, implementation

我不知道我是否在我的代码中做错了什么，我正在测试我的三角形类，并且由于某种原因，我的三角形构造函数的角 C 将 x 与 y 切换。

```
public class TriangleIsosceles {
    private Point cornerA;
    private Point cornerB;
    private Point cornerC;
    private int x1;
    private int y1;
    private int x2;
    private int y2;
    private int x3;
    private int y3;

    public TriangleIsosceles(){
        cornerA = new Point(x1,y1);
        cornerB = new Point(x2,y2);
        cornerC = new Point(x3,y3);
    }

    public TriangleIsosceles(int X1,int Y1,int X2,int Y2,int X3,int Y3){
        x1 = X1;
        y1 = Y1;
        x2 = X2;
        y2 = Y2;
        x3 = X3;
        y3 = Y3;

        cornerA = new Point(X1,Y1);
        cornerB = new Point(X2,Y2);
        cornerC = new Point(X3,Y3);
    }

    public boolean isIsosceles(){
        double lengthAB = Math.sqrt(Math.pow(x1-x2,2) + Math.pow(y1-y2,2));
        double lengthBC = Math.sqrt(Math.pow(x2-x3,2) + Math.pow(y2-y3,2));
        double lengthCA = Math.sqrt(Math.pow(x3-x1,2) + Math.pow(y3-y1,2));

        boolean isIsosceles = false;
        if(lengthAB == lengthBC || lengthBC == lengthCA || lengthCA == lengthAB){
            isIsosceles = true;
        }
        System.out.println(lengthAB);
        System.out.println(lengthBC);
        System.out.println(lengthCA);
        return isIsosceles;
    }
} 
```

在我的测试器类中，我尝试
`TriangleIsosceles t2 = new TriangleIsosceles(0, 0, 0, 10, 0, 5); System.out.println(t2.isIsosceles());`
了输出为 **10.0
5.0
5.0
true**

但是当我尝试

```
TriangleIsosceles t2 = new TriangleIsosceles(0, 0, 0, 10, 5, 0);
        System.out.println(t2.isIsosceles()); 
```

输出为 **10.0
10.295630140987
5.0990195135927845
假**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:22:51.523

您的第一个测试实际上并没有创建一个三角形。3 个点 (0,0)、(0,10) 和 (0,5)。它们都在同一平面上具有 X 坐标 - 这是一条线。所以你的三角形类不验证它是一个有效的三角形，所以你以返回 true for 的行结束`isIsoceles`。

你的第二个三角形实际上不是等腰三角形。这些点是 (0,0)、(0,10) 和 (5,0)，它们没有两个相等的边。

# syntax - MOVE 命令和批处理文件中的 %CD% 变量出现问题

> ID：14971172
> 
> 赞同：0
> 
> 时间：2013-02-20T02:11:05.430
> 
> 标签：syntax, batch-file, move, cd

**背景**

我正在尝试将`.minecraft's`文件夹移动到 Windows 漫游文件夹。之后，我想把它放回原来的位置。（我的目标是一个档案系统来切换保存/玩家）

我不明白我做错了什么 - 也许`%CD%`变量与移动命令不兼容？我得到的错误是“错误的语法不正确”

**代码**

```
 @echo off
title .Minecraft switcher
echo welcome !
PING 1.1.1.1 -n 1 -w 1000 >NUL
md .minecrafts
cd %CD%/.minecrafts 
md temp
cd %CD%\..
:3
cls
echo enter 1 to switch .minecrafts
echo enter 2 to create new subdir
set /p "In=:"
if %In%==1 goto :1
if %In%==2 goto :2
if %In%==3 goto :4
if %In%==5 goto :5
goto :3
:1
cls
echo enter folder name
echo folder list...
cd %CD%\.minecrafts
dir /b
set /p "d=:"
MOVE %appdata%\.minecraft %CD%\temp
MOVE %CD%\%d%\.minecraft %appdata%
pause
MOVE %appdata%\.minecraft %CD%\%d%
MOVE %CD%\temp\.minecraft %appdata%
pause
goto :3

:2
cls
echo set folder name
set /p "name=:"
cd %CD%\.minecrafts 
md %name%
cd %CD%\..
pause
goto :3
:4
exit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:01:40.580

%cd% 是当前目录。如果您更改目录，它总是会更改。

```
C:\Users\syss>echo %cd%
C:\Users\syss

C:\Users\syss>cd ..

C:\Users>echo %cd%
C:\Users

C:\Users> 
```

如您所见，您不需要在每个 cd 命令上写 %cd% 。

如果您想要调用批处理文件的目录：

```
set workingdir=%~dp0 
```

然后使用 %workingdir% 而不是 %cd%

还要确保您使用 Windows 斜杠“\”而不是标准斜杠“/”（参见第 6 行）

# c# - 方向键的使用

> ID：14971174
> 
> 赞同：0
> 
> 时间：2013-02-20T02:11:11.727
> 
> 标签：c#, .net, winforms

我想要的是这样的

`Arrow Key down`例如，通过按`button1`执行单击操作

`ArrowKeyDown = button1.Click`并通过这样做单击我的图像在我的`picturebox`. 和向上一样，`right`和`left`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:51:44.743

从您的按钮中获取所有代码。单击并将其放入单独的函数中。

然后您可以从您的 button1.Click 和您的按键 Down 事件中调用该函数。

在按下键的内部，您必须使用 if 语句和 e.KeyCode 来确保在调用子例程之前您拥有正确的键。

如果您的代码如下所示

```
 private void button1_Click(object sender, EventArgs e)
 {
     //do something here
 } 
```

现在会更像这样

```
private void doSomething()
{
    //do something here
}

private void button1_Click(object sender, EventArgs e)
{
    doSomething();
}

private void Form1_KeyDown(object sender, KeyEventArgs e)
{
    if (e.KeyCode == Keys.Down)
    {
        doSomething();
    }
    else if(e.keyCode==Keys.Right)
    {
         doSomethingElse();
    }
     //etc.etc
} 
```

另一种更简洁的按键事件方法是使用 switch 语句

```
private void Form1_KeyDown(object sender, KeyEventArgs e)
{
    switch (e.KeyCode)
    {
        case Keys.Down:
            doSomething();
            break;
        case Keys.Right:
            //do Something Else
            break;
        case Keys.Up:
            //do Something Else
            break;
        case Keys.Left:
            //do Something Else
            break;
        default:
            //they hit a key you did not handle
            break;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:33:13.007

您正在尝试使用，[`Form.KeyPreview`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.keypreview.aspx)但在使用它之前，您必须设置表单的属性，`KeyPreview = true`并且您提到`Button Click`您可以通过使用[`.PerformClick Method`](http://msdn.microsoft.com/en-us/library/system.windows.forms.button.performclick.aspx)

```
 private void Form1_Load(object sender, EventArgs e)
    {
        this.KeyPreview = true;
        this.KeyDown += new KeyEventHandler(Form1_KeyDown);
        button1.Click += new EventHandler(button1_Click);
    }

    private void Form1_KeyDown(object sender, KeyEventArgs e)
    {
        switch (e.KeyCode)
        {
            case Keys.Left:
                button1.PerformClick();
                break;
            case Keys.Right:
                button1.PerformClick();
                break;
            case Keys.Down:
                button1.PerformClick();
                break;
            case Keys.Up:
                button1.PerformClick();
                break;
        }
    }

    private void button1_Click(object sender, EventArgs e)
    {
        MessageBox.Show("Okay");
    } 
```

# sql - 使用 select 仅提取表中的一个数据

> ID：14971175
> 
> 赞同：0
> 
> 时间：2013-02-20T02:11:13.397
> 
> 标签：sql, select

我的数据库中有 3 个表

表 1 (用户)
userid(PK)
EmployeeName

表 2 (SubDept)
SubDeptID(PK)
部门

表 3 (SubDeptTransfer)
TransferID(PK)
userid(FK)
SubDeptID(FK)

这是表 3 的示例表

![在此处输入图像描述](../Images/a032953eb16ff30d25cd823a03f5d313.png)
我想做的是能够打印用户 100 的 SubDeptID。问题是因为有两个用户 ID 为 100，所以它都打印了。任务是能够仅打印一个具有后一个 TransferID 的数据。什么可能是该问题的最佳选择语句？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:16:39.937

最好的方法是使用窗口函数`row_number()`：

```
select transferId, userId, subDeptId
from (select t.*,
             row_number() over (partition by userid order by TransferId desc) as seqnum
      from t
     ) t
where seqnum = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T03:18:52.193

我会这样做：

```
SELECT subDeptId FROM SubDeptTransfer WHERE userId = 100 ORDER BY transferId DESC LIMIT 1 
```

# permissions - 没有权限将 QTP 的对象存储库保存在共享网络文件夹中

> ID：14971177
> 
> 赞同：1
> 
> 时间：2013-02-20T02:11:30.977
> 
> 标签：permissions, file-permissions, qtp, network-share, shared-directory

每当我尝试将对象存储库保存在我公司的共享网络文件夹中时，QTP 都会抱怨说：“您没有在此文件夹中保存所需的权限。您想将文件保存在我的文档文件夹中吗？” 问题是，我确实有权读取和写入我要保存的文件夹。此外，我没有管理员权限，因此无法以管理员身份运行 QTP。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:11:30.977

QTP 能够保存到共享网络文件夹并且它确实有权这样做。

诀窍是使用完整的 UNC 路径。这意味着，如果您想将文件保存在`GlobalStore.tsr`：

```
\\somewhere.corpnet.com\Groups\QA\Automation\Object Repository\ 
```

您将在“文件名”字段中输入整个路径：

```
\\somewhere.corpnet.com\Groups\QA\Automation\Object Repository\GlobalStore.tsr 
```

![保存到文件名字段中的完整 UNC 路径](../Images/66bb4dd26ae5e5a460d03657e743fdcb.png)

# algorithm - Hill Climbing 搜索算法应用于旅行商

> ID：14971181
> 
> 赞同：4
> 
> 时间：2013-02-20T02:11:43.723
> 
> 标签：algorithm, search, traveling-salesman

假设我们有 7 个城市 A,B,C,D,E,F,G 并且我们有一个起始状态 ABCDEFGA 和一些成本 'x' ，我不明白这个节点的子节点是什么。意味着如何爬山算法的第二次迭代会继续吗？

作为起始状态的节点 ABCDEFGA 会有 6 个子节点吗？就像在

**第二次迭代**是 ACBDEFGA、**ADCBEFGA**、AECDBFGA、AFCDEBGA、AGCDEFBA？

**第三次迭代：**假设在第二次迭代中选择了ADCBEFGA，那么第三次迭代是否会与所有其他城市交换城市'C'等等？

我只想知道我对算法的理解是否正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T02:29:00.833

Hill Climbing 算法非常适合寻找局部最优，它通过改变当前状态的一小部分来获得更好的（在这种情况下，更短的）路径。

如何实施小改动以找到更好的解决方案取决于您。假设您只想切换两个节点，并且仅在结果优于当前解决方案时才保留结果。

只需将第二个城镇与其他城镇交换即可获得以下信息：

```
# first iteration
start: ABCDEFGA
next: ACBDEFGA, ADCBEFGA, AECDBFGA, AFCDEBGA, AGCDEFBA

# second iteration
start: ADCBEFGA
next: ACDBEFGA, ABCDEFGA, AECBDFGA, AFCBEDGA, AGCBEFDA 
```

您会想要检查每种可能性的适用性并保留最好的一种。然后重复，直到下一个可能性都没有比你当前的状态更好。您将希望在每次迭代中不断使用相同的算法。

您可以在第一次迭代时切换第二个城市，在第二次迭代中切换第三个城市，在第三次迭代中切换第四个城市，等等。但请确保您循环返回并继续这种交换方式，并且在到达终点时不要停止。我建议坚持一个点并与其他点交换，但无论你如何解决这个问题，最终你都会得到不同的次优答案。

# android - 多个表不适用于android

> ID：14971183
> 
> 赞同：0
> 
> 时间：2013-02-20T02:11:53.267
> 
> 标签：android, dao, android-sqlite

我已经在网上搜索以解决我的问题，但我找到的解决方案都没有为我工作，所以这是我的问题。

我有道：

```
public class AqntCategoryDAO extends SQLiteOpenHelper{

public static abstract class AqntCategoryEntry implements BaseColumns {
    public static final String TABLE_NAME = "category";
    public static final String COLUMN_NAME_NAME = "name";
    public static final String COLUMN_NAME_TAG = "tag";
    public static final String COLUMN_NAME_STATUS = "status";
}

//globals
public static final int DATABASE_VERSION = 1;
public static final String DATABASE_NAME = "AquiNaoTemPlaces.db";

public static String[] columns = {
    AqntCategoryEntry._ID,
    AqntCategoryEntry.COLUMN_NAME_NAME,
    AqntCategoryEntry.COLUMN_NAME_TAG,
    AqntCategoryEntry.COLUMN_NAME_STATUS
    };

public AqntCategoryDAO(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {

    StringBuffer sql_create = new StringBuffer();
    sql_create.append("CREATE TABLE IF NOT EXISTS "+AqntCategoryEntry.TABLE_NAME);
    sql_create.append("( ");
        sql_create.append(AqntCategoryEntry._ID+" INTEGER PRIMARY KEY AUTOINCREMENT,");
        sql_create.append(AqntCategoryEntry.COLUMN_NAME_NAME+" TEXT,");
        sql_create.append(AqntCategoryEntry.COLUMN_NAME_TAG+" TEXT,");
        sql_create.append(AqntCategoryEntry.COLUMN_NAME_STATUS+" INTEGER");
    sql_create.append(" )");
    Log.i("SQL: ",sql_create.toString());
    db.execSQL(sql_create.toString());
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS " + AqntCategoryEntry.TABLE_NAME);
    onCreate(db);
}
... 
```

和：

```
public class AqntPlacesDAO extends SQLiteOpenHelper{

public static abstract class AqntPlacesEntry implements BaseColumns {
    public static final String TABLE_NAME = "places";
    public static final String COLUMN_NAME_NAME = "name";
    public static final String COLUMN_NAME_LATITUDEE6 = "latitudeE6";
    public static final String COLUMN_NAME_LONGITUDEE6 = "longitudeE6";
    public static final String COLUMN_NAME_RATE = "rate";
    public static final String COLUMN_NAME_STATUS = "status";
}

//globals
public static final int DATABASE_VERSION = 1;
public static final String DATABASE_NAME = "AquiNaoTemPlaces.db";

public static String[] columns = {
    AqntPlacesEntry._ID,
    AqntPlacesEntry.COLUMN_NAME_NAME,
    AqntPlacesEntry.COLUMN_NAME_LATITUDEE6,
    AqntPlacesEntry.COLUMN_NAME_LONGITUDEE6,
    AqntPlacesEntry.COLUMN_NAME_RATE,
    AqntPlacesEntry.COLUMN_NAME_STATUS
    };

public AqntPlacesDAO(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {

    StringBuffer sql_create = new StringBuffer();
    sql_create.append("CREATE TABLE IF NOT EXISTS "+AqntPlacesEntry.TABLE_NAME);
    sql_create.append("( ");
        sql_create.append(AqntPlacesEntry._ID+" INTEGER PRIMARY KEY AUTOINCREMENT,");
        sql_create.append(AqntPlacesEntry.COLUMN_NAME_NAME+" TEXT,");
        sql_create.append(AqntPlacesEntry.COLUMN_NAME_LATITUDEE6+" TEXT,");
        sql_create.append(AqntPlacesEntry.COLUMN_NAME_LONGITUDEE6+" TEXT,");
        sql_create.append(AqntPlacesEntry.COLUMN_NAME_RATE+" REAL,");
        sql_create.append(AqntPlacesEntry.COLUMN_NAME_STATUS+" INTEGER");
    sql_create.append(" )");
    Log.i("SQL: ",sql_create.toString());
    db.execSQL(sql_create.toString());
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF `EXISTS` " + AqntPlacesEntry.TABLE_NAME);
    onCreate(db);
}
... 
```

当我尝试

```
AqntPlacesDAO daoPlace = new AqntPlacesDAO(context);
AqntCategoryDAO catAuxDAO = new AqntCategoryDAO(context);

List<AqntPlaces> places = daoPlace.getPlaces();
List<AqntCategory> catss = catAuxDAO.getCategories();
daoPlace.close();
catAuxDAO.close(); 
```

它只创建第一个，另一个向我显示错误：

```
02-19 22:51:29.083: E/AndroidRuntime(9336): android.database.sqlite.SQLiteException: no such table: category: , while compiling: SELECT _id, name, tag, status FROM category 
```

但如果我只运行一个 DAO，它就可以工作。

有人知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:28:03.057

您遇到问题是因为*仅在数据库文件不存在时才*`onCreate()`调用。

 *您的两个 DAO 共享数据库文件`AquiNaoTemPlaces.db`，但只有实际使用的第一个会导致其`onCreate()`方法被调用。在您的情况下，它是“地方”DAO - 它将在这一行的引擎盖下初始化：

```
List<AqntPlaces> places = daoPlace.getPlaces(); 
```

之后，该方法将初始化数据库文件`AqntPlacesDAO.onCreate()`。当 VM 执行该行时：

```
List<AqntCategory> catss = catAuxDAO.getCategories(); 
```

数据库文件已经存在并被初始化，所以`AqntCategoryDAO.onCreate()` *不会*被调用。

解决方案是每个数据库文件使用*一个* `SQLiteOpenHelper`子类（我们称之为）。`Helper`当然，您可以`Helper`为每个逻辑 DAO 子类化 - 设计取决于您。这里的关键是`Helper.onCreate()`/`onUpgrade()`应该创建/修改存储在底层数据库中的*所有表。**

# php - 如何通过用户ID显示数据库中的记录

> ID：14971185
> 
> 赞同：1
> 
> 时间：2013-02-20T02:12:14.697
> 
> 标签：php, sql

我想按用户 ID 显示数据库中的记录。这意味着工作人员必须输入员工编号和密码并提出新项目的请求，该请求将被保存在数据库中。

该请求工作正常，但在 request.php 页面之后，我想在receipt.php 中显示该员工订购的项目。我怎么能这样做？这是定义表的 SQL：

```
CREATE TABLE `orders` (                                                       
          `orderno` bigint(20) NOT NULL AUTO_INCREMENT,                               
          `orderqty` bigint(20) NOT NULL,                                             
          `orderdate` date DEFAULT NULL,                                              
          `itemno` bigint(20) DEFAULT NULL,                                           
          `staffid` varchar(50) DEFAULT NULL,                                         
          PRIMARY KEY (`orderno`),                                                    
          KEY `FK_itemno` (`itemno`),                                                 
          KEY `FK_staffid` (`staffid`),                                               
          CONSTRAINT `FK_itemno` FOREIGN KEY (`itemno`) REFERENCES `item` (`itemno`)  
        ) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=latin1 
```

这是receipt.php的PHP代码：

```
<?php require_once('Connections/sqlconnection.php'); ?>
<?php 
    if (!isset($_SESSION)) {
         session_start();
    }

    $colname_rsstaff = $_SESSION['staffid'];
    if (isset($_GET['staffid'])) {
        $colname_rsstaff = $_GET['staffid'];
    }

if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "",  $theNotDefinedValue = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ?          mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

mysql_select_db($database_sqlconnection, $sqlconnection);
$query_rsorders = "SELECT * FROM orders";
$rsorders = mysql_query($query_rsorders, $sqlconnection) or die(mysql_error());
$row_rsorders = mysql_fetch_assoc($rsorders);
$totalRows_rsorders = mysql_num_rows($rsorders);

mysql_select_db($database_sqlconnection, $sqlconnection);
$query_rsitem = "SELECT * FROM item";
$rsitem = mysql_query($query_rsitem, $sqlconnection) or die(mysql_error());
$row_rsitem = mysql_fetch_assoc($rsitem);
$totalRows_rsitem = mysql_num_rows($rsitem);

mysql_select_db($database_sqlconnection, $sqlconnection);
$query_rsstaff = "SELECT * FROM staff";
$rsstaff = mysql_query($query_rsstaff, $sqlconnection) or die(mysql_error());
$row_rsstaff = mysql_fetch_assoc($rsstaff);
$totalRows_rsstaff = mysql_num_rows($rsstaff);

mysql_select_db($database_sqlconnection, $sqlconnection);
$query_rsitemlist = sprintf("SELECT * FROM itemlist WHERE itemlist.staffid = %s",        GetSQLValueString($colname_rsstaff, "text"),"ORDER BY orderdate DESC");
$rsitemlist = mysql_query($query_rsitemlist, $sqlconnection) or die(mysql_error());
$row_rsitemlist = mysql_fetch_assoc($rsitemlist);
$totalRows_rsitemlist = mysql_num_rows($rsitemlist);
?>

<title>Sistem Pengurusan Stok</title>
<center>
  <form name="form1" method="POST" action="request.php">
    <table width="633" height="262" border="1">
      <tr>
        <td height="124" colspan="6"><?php include 'header.php'?></td>
      </tr>
      <tr>
        <td width="119" height="51" 
        align="center">No Resit</td>
        <td width="130" align="center">Tarikh Tempah</td>
        <td width="181" align="center">Nama Barang</td>
        <td align="center">Kuantiti</td>
        <td align="center">&nbsp;</td>
      </tr>
      <?php do { ?>
        <tr>
          <td height="35" align="center"><?php echo $row_rsitemlist['orderno']; ?></td>
          <td align="center"><?php echo $row_rsitemlist['orderdate']; ?></td>
          <td align="center"><?php echo $row_rsitemlist['itemname']; ?></td>
          <td width="146" align="center"><?php echo $row_rsitemlist['orderqty']; ?></td>
          <td width="23" align="center"><img src="images/delete.jpg" width="68" height="32" align="center" /></td>
     </tr>
        <?php } while ($row_rsitemlist = mysql_fetch_assoc($rsitemlist) && $rsitemlist); ?>
     <tr>
         <td height="40" colspan="6" align="right"><input type="submit" name="button2" id="button2" value="Kembali"/>
          <input type="submit" name="button" id="button" value="Hantar" /></td>
     </tr>
    </table>
  </form>
</center>
<?php
mysql_free_result($rsorders);

mysql_free_result($rsitem);

mysql_free_result($rsstaff);

mysql_free_result($rsitemlist);
?> 
```

我真的希望有人可以真正检查我的代码。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:32:37.757

你可以通过设置会话来做到这一点......机制是

1.  `start_session()`在 request.php 的顶部
2.  在 request.php 上，为订单数据创建会话变量，参见 [手册](http://php.net/manual/en/reserved.variables.session.php)
3.  在reciept.php（或您想要的任何页面）上使用该会话变量来显示您的订单数据..

希望这可以帮助...

# php - 在插入 mysql 数据库之前删除不必要的 .csv 行

> ID：14971190
> 
> 赞同：-3
> 
> 时间：2013-02-20T02:13:22.430
> 
> 标签：php, mysql, csv

是否可以在插入/导入数据库之前删除/删除 CSV 文件中不必要的行？我有上传文件。

例如。

我想删除/删除 CSV 中的空白行，或者我只想在我的数据库字段中插入数据。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:18:12.057

我建议您将数据加载到临时表中，然后使用 SQL 进行过滤。

毕竟，您是将数据放入数据库中。数据库非常擅长这种操作

# mysql - 如何选择 2 个有条件的表并显示所有数据

> ID：14971191
> 
> 赞同：0
> 
> 时间：2013-02-20T02:13:24.033
> 
> 标签：mysql

如何选择 2 个有条件的表并显示所有数据

```
store_profile
id + store_name
1  | Accessorize.me 
2  | Active IT 
3  | Edushop
4  | Gift2Kids
5  | Heavyarm 
6  | Bamboo 

store_fee
id + store_id + date_end
1  |    1     | 27-6-2013
2  |    2     | 29-8-2013
3  |    3     | 02-6-2013
4  |    4     | 20-4-2013 
```

以下是我之前的查询

```
$query = "select sp.id, sp.store_name, sf.id, sf.store_id, sf.date_end from store_profile sp, store_fee sf where sf.store_id=sp.id" 
```

结果是这样的：

```
1  | Accessorize.me  27-6-2013
2  | Active IT       29-8-2013
3  | Edushop         02-6-2013
4  | Gift2Kids       20-4-2013 
```

但我想要的是显示所有商店名称，包括`date_end`但如果没有`date_end`仍然可以显示商店名称为空`date_end`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:15:22.460

使用左连接：

```
select sp.id, sp.store_name, sf.id, sf.store_id, sf.date_end 
from store_profile sp left join store_fee sf on sf.store_id=sp.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T02:15:57.563

您使用的语法被解释为`INNER JOIN`，这意味着没有相应条目的存储`store_profile`不会显示。你想使用`LEFT JOIN`：

```
SELECT sp.id, sp.store_name, sf.id, sf.store_id, sf.date_end 
FROM store_profile sp
LEFT JOIN store_fee sf 
ON sf.store_id=sp.id 
```

`LEFT JOIN`表示将返回第一个表中的所有记录，即使第二个表中没有匹配项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T02:15:58.927

您想使用外部联接。使用外连接，连接表上的列不需要匹配连接表中的条件列来获得结果：

```
SELECT * FROM store_profile sp LEFT JOIN store_fee sf ON (sf.store_id = sp.id) 
```

# c - C中两个数组的交集函数

> ID：14971202
> 
> 赞同：2
> 
> 时间：2013-02-20T02:14:01.600
> 
> 标签：c

我正在学习在我的操作系统类中使用 C 语言，这就是我目前所拥有的用于查找两个数组交集的函数。

交集基本上是当你拿两个集合并且你只得到两个集合中的元素时。

例如，如果集合 A 包含 = {1,2,3}，集合 B 包含 = {2,3,4}，则 A 和 B 的交集是 {2,3}。我正在尝试在 C 中创建一个函数，该函数获取两个数组并返回一个包含两个传递数组中的整数的数组。

我想我在这里几乎有了解决方案，但我收到一条错误消息：“标识符‘计数’未定义”

```
 int intersection(int array1[4], int array2[4])
    {       
        int arrayReturn[sizeof(array1) + sizeof(array2)]
        int count = 0;

        for(int i = 0; i < 4; i++)
        {
            for(int j = 0; j < 4; j++)
            {
                if(array1[i]==array2[j])
                {
                    count = count + 1;
                    arrayReturn[count] = array1[i];
                }
            }
        }

    } 
```

我非常习惯 Java，我觉得 Java 和 C 几乎相同。我真的找不到这里有什么问题，因为 count 在 if 语句中的范围内。我看不到 count 是如何未定义的。

计数有什么问题，我该如何解决这个交叉函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T02:18:12.163

`count`您在声明之前的行中缺少分号。

```
 int arrayReturn[sizeof(array1) + sizeof(array2)]; //Semicolon Here
  int count = 0; 
```

* * *

我是怎么看到错误的？错误消息是`identifier 'count' is undefined`我检查的第一件事是编译器告诉我的原因。然而，这不是问题，因为声明在那里，并且在正确的范围内。那么，现在我该怎么办？我应该查看变量初始化之前的行和使用之前的行。这是您肯定会发现错误的地方。

简而言之，当编译器消息似乎没有帮助时，不要停止。看看周围。

* * *

此外，正如 GRAYgoose124 指出的那样，您应该在函数体的末尾有一个 return 语句，因为您的函数应该返回一个整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-25T15:53:25.880

此行缺少分号：

```
int arrayReturn[sizeof(array1) + sizeof(array2)]; //semicolon was missing 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T02:22:28.977

正如 AshRj 指出的那样，您缺少分号。

提示：[clang](http://clang.llvm.org/)编译器非常擅长提供诊断输出。如果你尝试用它编译你的代码，你会得到以下输出：

```
source.c:3:57: error: expected ';' at end of declaration
        int arrayReturn[sizeof(array1) + sizeof(array2)]
                                                        ^
                                                        ; 
```

即使您没有正常使用 clang 编译项目，您也可以尝试编译代码片段来帮助您找出问题所在。这就是我对你的片段所做的，你[可以在这里看到](http://liveworkspace.org/code/NCn3U%240)。（请注意警告。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-29T18:02:25.503

```
void readArr(int  arr1[],int n1, int arr2[],int n2,int arr3[]){
int n=0;
int j=0;
for(j=0;j<n1;j++){
    for(int k=0; k<n2;k++){
        if(arr1[j]==arr2[k]){
            int element = arr1[j];
            int k=checkArrayContains(arr3,n,element);
            if(k==1){
                printf("%d\n",arr1[j] );
                arr3[n]=arr1[j];

                n++;

            }

        }

    }
}

displayArray(arr3,n);} 
```

我认为这个实现更清楚。

# parsing - 整数字符串解析器

> ID：14971204
> 
> 赞同：0
> 
> 时间：2013-02-20T02:14:12.537
> 
> 标签：parsing, integer, byte, parseint

我正在解析 XML 文档，当我尝试将正在读取的 String （数据）保存为**Integer**时，我发现了一个异常。

```
Integer.parseInt(data) 
```

我还尝试将属性类型更改为**Byte**并尝试另一种方式，但它不起作用。

```
{Byte.parseByte(data)} 
```

更准确地说，我正在做，

```
{message.setType(Integer.parseInt(data));} 
```

我也尝试过*valueOf*和*intValue*，但也没有用。

messageType 是两次（int 或 byte）。

在解析 XML 时，我打印出数据，它完全具有我所期望的值和长度。（值：9，长度：1）

# php - WordPress - 移至新服务器后解析错误

> ID：14971206
> 
> 赞同：0
> 
> 时间：2013-02-20T02:14:35.610
> 
> 标签：php, wordpress

我刚刚将 WordPress 网站从开发环境移动到生产托管环境。第一个是Windows Dev，第二个是Linux Managed Hosting（只有管理面板+ ftp）。如果没有在其自定义代码行中包含这样的站点，所有工作都按预期工作：

```
<?php echo get_field_object('social')['label']; ?> 
```

此代码由插件高级自定义字段使用。在我的开发中没有问题，在生产中悬停我得到这个错误：

```
Parse error: syntax error, unexpected '[', expecting ',' or ';' in 
/var/sites/m/domain.name/public_html/wp-content/themes/m30pl/single-facylitator.php on line 21 
```

提到的线是我上面介绍的。我不知道可能出了什么问题，生产服务器上的 PHP 版本是 5.3。

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:19:03.667

您有 PHP 版本差异...您的代码将在 5.4+ 版本上运行...

# jquery - 如何让 jquery 导航栏在 div 标签中加载信息？

> ID：14971209
> 
> 赞同：0
> 
> 时间：2013-02-20T02:14:46.300
> 
> 标签：jquery, css, ajax, html

我在我的导航栏上使用 jquery，但我想让它在我的一个 div 标签中加载信息我需要添加到我的导航栏中的任何内容，该导航栏与 jquery/ajax 一起运行以加载到 div 中，我应该添加什么div 标签使其功能相同。我的网站是。

[http://www.horimonotattoo.com](http://www.horimonotattoo.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:25:10.233

我不完全确定您要达到的目标，但这也许会有所帮助。单击链接时，您可以使用 jQuery 在页面中添加 div，如下所示。

```
<head>
<!-- include jquery library -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<!-- run a script for when a button or element is clicked -->
<script type="text/javascript">

//when page has loaded
$(document).ready(function() {
//when link with class name 'linkClassName' is clicked
    $('.linkClassName').click(function(){
    //add a div after the </a> tag
    $(this).append('<div>hello</div>');
});//end click function
});//end document ready

</script>

</head>

<body>

<a href="#" class="linkClassName">Click Me</a>

</body> 
```

一个工作示例在这里[http://jsfiddle.net/nskWD/1/](http://jsfiddle.net/nskWD/1/)

您还可以在 click 函数中使用 .load(url) 将整个页面加载到 div 中，

$('#divId').load(url);

# c# - 有没有办法覆盖 MVC 控制器操作？

> ID：14971211
> 
> 赞同：5
> 
> 时间：2013-02-20T02:15:21.050
> 
> 标签：c#, asp.net, asp.net-mvc-4, nopcommerce

我正在改编一个开源项目（NopCommerce）。它是一个很棒的软件，并支持使用插件的可扩展性。对于一个插件，我想向视图添加信息，为此，我想从控制器继承并覆盖我需要更改的操作。所以这是我的控制器：

```
public class MyController : OldController{
//stuff

public new ActionResult Product(int productId)
{
 //Somestuff
}

} 
```

我从插件更改了路由，但是当调用此操作时，出现以下错误：

> 当前对控制器类型“MyController”的操作“产品”请求在以下操作方法之间不明确： MyPlugin 类型上的 System.Web.Mvc.ActionResult Product(Int32) OldController 类型上的 System.Web.Mvc.ActionResult Product(Int32)

有什么办法可以覆盖这个方法吗？（ps：我不能使用override关键字，因为它在OldController中没有标记为virtual、abstract或override）

谢谢，奥斯卡

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T02:46:18.713

如果 OldController 的方法少，就这样重新声明。

```
public class MyController : Controller 
{
    private OldController old = new OldController();

    // OldController method we want to "override"
    public ActionResult Product(int productid)
    {
        ...
        return View(...);
    }

    // Other OldController method for which we want the "inherited" behavior
    public ActionResult Method1(...)
    {
        return old.Method1(...);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-14T07:09:15.143

当然，在控制器上“执行 F12”并查看标记为虚拟的项目

```
 public override void OnActionExecuting(ActionExecutingContext context)
    {
        if (Request.Headers.TryGetValue("myHeader", out var value))
        {
            HashId = hashid.ToString();
        }
        base.OnActionExecuting(context);
    } 
```

# r - 避免 r 图中的标签过度拥挤

> ID：14971214
> 
> 赞同：5
> 
> 时间：2013-02-20T02:15:23.273
> 
> 标签：r, plot, ggplot2

我正在努力避免下图中的标签过于拥挤：

```
set.seed(123)
position <- c(rep (0,5), rnorm (5,1,0.1), rnorm (10, 3,0.1), rnorm (3, 4, 0.2), 5, rep(7,5), rnorm (3, 8,2),  rnorm (10,9,0.5),
               rep (0,5), rnorm (5,1,0.1), rnorm (10, 3,0.1), rnorm (3, 4, 0.2), 5, rep(7,5), rnorm (3, 8,2),  rnorm (10,9,0.5))
group <- c(rep (1, length (position)/2),rep (2, length (position)/2)  )
mylab <- paste ("MR", 1:length (group), sep = "")
barheight <- 0.5

y.start <- c(group-barheight/2)
y.end <- c(group+barheight/2)
mydf <- data.frame (position, group, barheight, y.start, y.end, mylab)

plot(0,type="n",ylim=c(0,3),xlim=c(0,10),axes=F,ylab="",xlab="")
#Create two horizontal lines
require(fields)
yline(1,lwd=4)
yline(2,lwd=4)
#Create text for the lines
text(10,1.1,"Group 1",cex=0.7)
text(10,2.1,"Group 2",cex=0.7)
#Draw vertical bars
lng = length(position)/2
lg1 = lng+1
lg2 = lng*2
segments(mydf$position[1:lng],mydf$y.start[1:lng],y1=mydf$y.end[1:lng])
segments(mydf$position[lg1:lg2],mydf$y.start[lg1:lg2],y1=mydf$y.end[lg1:lg2])
text(mydf$position[1:lng],mydf$y.start[1:lng]+0.65, mydf$mylab[1:lng], srt = 90)
text(mydf$position[lg1:lg2],mydf$y.start[lg1:lg2]+0.65, mydf$mylab[lg1:lg2], srt = 90) 
```

您可以看到一些区域被标签挤满 - 当 x 值相同或相似时。我只想显示一个标签（当同一点有多个标签时）。例如，

mydf$position[1:5] 都是 0，

但相应的标签 mydf$mylab[1:5] -

```
 MR1  MR2  MR3  MR4  MR5 
```

我只想显示第一个“MR1”。

类似地，以下点太接近了（比如 0.35 的差异），它们应该被认为是一个单独的集群，并且将显示第一个标签。通过这种方式，我将能够摆脱过度拥挤的标签。我怎样才能实现它？

![在此处输入图像描述](../Images/d22e0a622187f0e04276527c7f2a9a67.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T08:44:21.830

如果您将标签隔开并添加一些额外的行，您**可以**标记每个标记。

```
clpl <- function(xdata, names, y=1, dy=0.25, add=FALSE){
  o = order(xdata)
  xdata=xdata[o]
  names=names[o]
  if(!add)plot(0,type="n",ylim=c(y-1,y+2),xlim=range(xdata),axes=F,ylab="",xlab="")
  abline(h=1,lwd=4)
  dy=0.25
  segments(xdata,y-dy,xdata,y+dy)
  tpos = seq(min(xdata),max(xdata),len=length(xdata))
  text(tpos,y+2*dy,names,srt=90,adj=0)
  segments(xdata,y+dy,tpos,y+2*dy)
} 
```

然后使用您的数据：

```
clpl(mydf$position[lg1:lg2],mydf$mylab[lg1:lg2]) 
```

给出：

![带有标注的标记线](../Images/0aa14b4216481bed357db5e4a90aaa25.png)

然后，您可以考虑在主线下方标记集群。

我没有太多考虑在一个情节中做多行，但我认为对我的代码和 add 参数进行一些处理应该是可能的。您还可以使用颜色来显示集群。我相当确定这些技术存在于 R 的一些集群包中......

显然，如果有很多标记，即使这也会被弄脏，但是如果有很多集群，同样的事情也会发生。也许您最终会使用这种技术标记集群？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T04:17:35.630

一般来说，我同意@Joran 的观点，集群标签不能自动化，但你说过用集群中的第一个标签来标记一组行是可以的，因此可以自动化一些过程。

将以下代码放在该行之后`lg2 = lng*2`会产生下图所示的结果：

```
clust <- cutree(hclust(dist(mydf$position[1:lng])),h=0.75)
u <- rep(T,length(unique(clust)))
clust.labels <- sapply(c(1:lng),function (i)
    {
    if (u[clust[i]])
        {
        u[clust[i]] <<- F
        as.character(mydf$mylab)[i]
        }
    else
        {
        ""
        }
    })

segments(mydf$position[1:lng],mydf$y.start[1:lng],y1=mydf$y.end[1:lng])
segments(mydf$position[lg1:lg2],mydf$y.start[lg1:lg2],y1=mydf$y.end[lg1:lg2])
text(mydf$position[1:lng],mydf$y.start[1:lng]+0.65, clust.labels, srt = 90)
text(mydf$position[lg1:lg2],mydf$y.start[lg1:lg2]+0.65, mydf$mylab[lg1:lg2], srt = 90) 
```

![标记的集群](../Images/f99b463a55a6855910b45022e86055c0.png)

（我只在下一行标记了集群——同样的原则也可以应用于上一行）。可能必须根据具体情况调整参数`h`以`cutree()`提供您想要的标签分辨率，但这种方法至少比手动标记每个集群更容易。

# jquery - 访问用 Jquery .load() 加载的 HTML 中的变量

> ID：14971217
> 
> 赞同：0
> 
> 时间：2013-02-20T02:15:39.030
> 
> 标签：jquery, variables, get, scope, jquery-load

这可能有一个简单的答案，但我似乎无法在任何地方找到它。我正在将本地 HTML 文件加载到模态覆盖中。HTML 文件中有一个幻灯片。我想设置一个变量并在加载的 HTML 中访问它以了解从哪张幻灯片开始。

我尝试将它与 URL 作为 GET 变量一起发送。我已经尝试在大括号中的 url 之后发送它并作为 POST 检索。我试过设置一个全局变量，但我很确定它超出了范围，而且我似乎无法得到它。

以下是一些相关代码：

```
$(document).ready(function() {

    $("a.slide0").click(function() {
        $( '#revealLayer' ).load( 'slideshow1.html?slide=0');
        $( '#revealLayer' ).appendTo( '#revealModal' );
        $( '#revealModal' ).reveal();
        return false;
    });

    $("a.slide1").click(function() {
        $( '#revealLayer' ).load( 'slideshow1.html?slide=1');
        $( '#revealLayer' ).appendTo( '#revealModal' );
        $( '#revealModal' ).reveal();
        return false;
    });

}); 
```

我怎样才能在接收端得到这个？帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:35:27.603

已经在这里的这篇文章中解释了如何做到这一点： [jquery load() 的问题](https://stackoverflow.com/questions/14967807/problems-with-jquery-load/14968224#14968224)

快速模型（未测试）：

这假设 #revealModal 是您想要信息的 div，并且 slideshow1.html?slide=[0-1] 网址实际上链接到 PHP 文件。

```
$(document).ready(function() {
    $("a.slide0").click(function() {
        $('#revealModal').load('slideshow1.html', {slide:'0'}, function(){
            $(this).reveal();
            return false;
        });   
    });

    $("a.slide1").click(function() {
        $('#revealModal').load('slideshow1.html', {slide:'1'}, function(){
            $(this).reveal();
            return false;
        });
    });
}); 
```

slideshow1.html?slide=1 和 slideshow1.html?slide=0 需要为此处理`$_POST['slide']`PHP 中的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T02:27:47.407

您应该使用该`load()`方法的 thirs 参数，它是一个**回调**，将在加载过程完成时调用（相当于 ready()）。

试试这个：

```
$("a.slide0").click(function() {
    $('#revealLayer').load('slideshow1.html?slide=0',
                           {},
                           function(response, status, whr) {
        $('#revealLayer').appendTo( '#revealModal' );
        $('#revealModal').reveal();
    });

    // Cancel the click
    return false;
}); 
```

方法定义为：

```
.load( url [, data ] [, complete(responseText, textStatus, XMLHttpRequest) ] ) 
```

# c++ - 是否可以按线性时间进行一般排序？

> ID：14971219
> 
> 赞同：1
> 
> 时间：2013-02-20T02:15:56.450
> 
> 标签：c++, algorithm

我试图在 O(n) 时间内解决一个问题，给定两个前向迭代器到一个容器的前面和一个容器的后面，我想删除容器中至少不出现的所有元素 <这个次数 > 次。例如，给定一个字符串向量，例如 ("john", "hello", "one", "yes", "hello", "one")，我想删除所有出现少于 2 次的元素，我的最终向量将只包含 ("hello", "one")。

我在想，如果我可以在 O(n) 时间内进行一般排序，我可以完成这个结果（在 O(n) 时间内），但我很难用字符串、整数、字符或其他任何可能被使用（一般）。我是否正确地考虑了这一点，还是有更简单的方法来解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:20:05.427

是的，您实际上不是在排序而是删除元素。

1）。将每个单词存储到一个哈希集中。2）。查找并仅在不在哈希集中时添加。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T02:32:26.167

简短的回答：没有。基于比较的排序需要`O(n log n)`时间。（这可以正式证明。）如果您对输入有所了解（例如，输入在已知范围内随机均匀分布），那么您可以及时使用众所周知的算法，例如桶排序或基数排序`O(n)`。与@Mooing Duck 不同，没有`O(1)`及时排序（这应该很明显——对于任何排序算法，您必须至少访问每个元素一次）。

但是，正如其他几位海报所指出的那样，您的问题不需要排序算法......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T02:21:38.903

无需排序

1) 填充`std::unordered_map<string,vector<int>> indexOfStrings;`- O(N)

2) 对于每个`string`,`vector size() < 2`删除元素 - O(删除次数) <= O(N)

`indexOfStrings`- 存储字符串每次出现的索引。这允许从向量中快速删除而无需搜索。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T02:25:49.500

你不需要排序，你只需要一个`unordered_map`：

```
unordered_map<string, int> counter;
vector<string> newvec;
for(string &s : v) {
    if((++counter[s]) == 2) {
        newvec.push_back(s);
    }
} 
```

请注意，这是 C++11 代码。（感谢@jogojapan 的代码改进建议）。

# mysql-workbench - 如何将模型部署到不同的数据库/模式

> ID：14971221
> 
> 赞同：2
> 
> 时间：2013-02-20T02:15:58.903
> 
> 标签：mysql-workbench

我有一个 mySQL 服务器。我想加载 2-3 个版本的模式进行测试。即从同一个模型项目中加载 proj_dev、proj_ci、proj_stage、proj_prod ......这样我就可以有 proj_dev 用于开发烟雾测试，proj_ci 用于自动回归等。

我在“数据库”选项卡下尝试了许多选项，但它们似乎都想部署到相同的模式。我错过了什么吗？

# macos - 安装后无法连接到 Mac OS X 上的 Postgresql

> ID：14971223
> 
> 赞同：8
> 
> 时间：2013-02-20T02:16:02.477
> 
> 标签：macos, sockets, postgresql, installation

所以我将 Postgresql 安装到我的 Mac 上，每当我运行类似的东西`psql`或`createdb cool_database_name`我收到以下错误。

```
psql: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/tmp/.s.PGSQL.5432"? 
```

所以我遵循不同的解决方案。我重新安装 postgresql 无济于事。我去 postgresql.conf` 并将其更改为

```
#port = 5432                             # (change requires restart)
#max_connections = 20                    # (change requires restart)
# Note:  Increasing max_connections costs ~400 bytes of shared memory per
# connection slot, plus lock space (see max_locks_per_transaction).
#superuser_reserved_connections = 3     # (change requires restart)
#unix_socket_directory = '/var/pgsql_socket'             # (change requires restart)
#unix_socket_group = ''                 # (change requires restart)
#unix_socket_permissions = 0777         # begin with 0 to use octal notation 
```

但仍然一无所有。我运行诸如

```
ls -lA /var/run/postgresql 
```

这告诉我文件或目录不存在。

我也检查了`pg_hba.conf`文件，但一切看起来都很好

```
# "local" is for Unix domain socket connections only
local   all             all                                     trust
# IPv4 local connections:
host    all             all             127.0.0.1/32            trust
# IPv6 local connections:
host    all             all             ::1/128                 trust
# Allow replication connections from localhost, by a user with the
# replication privilege.
#local   replication     jason                                trust
#host    replication     jason        127.0.0.1/32            trust
#host    replication     jason        ::1/128                 trust 
```

当我跑步时，`psql -h localhost`我得到

```
psql: could not connect to server: Connection refused
    Is the server running on host "localhost" (::1) and accepting
    TCP/IP connections on port 5432?
could not connect to server: Connection refused
    Is the server running on host "localhost" (127.0.0.1) and accepting
    TCP/IP connections on port 5432?
could not connect to server: Connection refused
    Is the server running on host "localhost" (fe80::1) and accepting
    TCP/IP connections on port 5432? 
```

我不知道如何解决这个问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T06:44:44.767

问题是 Mac OS 附带 PostgreSQL

```
$ `which psql` --version
psql (PostgreSQL) 9.1.4
contains support for command-line editing 
```

您需要像这样更改 PATH：

```
export PATH="path_to_bin_folder_of_your_new_postgres_install:$PATH" 
```

例如，对于 Postgres.app：

```
export PATH="/Applications/Postgres.app/Contents/MacOS/bin:$PATH" 
```

这可能有用：[http ://blog.ringerc.id.au/2012/09/postgresql-packaging-on-mac-os-x-is-mess.html](http://blog.ringerc.id.au/2012/09/postgresql-packaging-on-mac-os-x-is-mess.html)

# c# - 加载一个程序集并在 Wpf 中调用它的函数

> ID：14971224
> 
> 赞同：0
> 
> 时间：2013-02-20T02:16:04.690
> 
> 标签：c#, wpf

在我的应用程序中，我使用的是在单独的项目中编译的用户控件。

假设我的应用程序名为 ABC.exe，用户控件的名称是 bb.dll，而开发 bb.dll 只是为了在 ABC.exe 中使用。

在用户控件 bb.dll 的情况下，我想调用 ABC.exe 的一个公共函数

是否有可能做到这一点？

我在框架工作 3.5 中这样做

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:23:55.893

使用 Assembly.Load 加载 bb.dll。

从 ABC.exe 调用方法

*   在构建期间从 BB.DLL 引用 ABC.exe
*   使用反射来查找类型/方法并调用它
*   在控件初始化期间将方法/类/接口从 ABC.exe 中的类传递到 BB.dll 中的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:15:16.967

由于您的 ABC.exe 引用的是 BB.dll，因此您不能从 BB.dll 引用 ABC.exe，因为它将成为循环引用。您必须使用反射来加载您的 ABC.exe，然后从 BB.dll 的事件处理程序代码中调用该函数。

# asp.net - div 分层无法正常工作：CSS

> ID：14971231
> 
> 赞同：0
> 
> 时间：2013-02-20T02:17:02.323
> 
> 标签：asp.net, css, html, layer

我正在尝试为整个页面制作一个半透明的背景图像，其余内容分层（不透明）。但是，当我尝试对 div 进行分层时，页面内容也是半透明的。我试过切换 z-indexes 并没有改变任何东西。

这是两种相关的样式

```
#backgroundImage
{
    background-image: url('/Images/background.jpg');
    background-size: 100%;
    opacity: 0.5;
    height: 100%;
    width: 100%;
    position: absolute;
    z-index: 1;
}

#PageWrapper
{
    z-index: 2;
} 
```

这是页面标记

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="Frontend.master.cs" Inherits="PTMS.MasterPages.Frontend" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head runat="server">
    <title></title>
    <asp:ContentPlaceHolder ID="head" runat="server">
    </asp:ContentPlaceHolder>
    <link href="../Styles/Styles.css" rel="stylesheet" type="text/css" />
</head>

<body>    
    <form id="form1" runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server" EnablePageMethods="True">
            <Scripts>
                <asp:ScriptReference runat="server" Path="~/Scripts/jquery-1.4.1.min.js"/>
            </Scripts>
        </asp:ScriptManager>
        <div id="backgroundImage">
        <div id="PageWrapper" >
            <div id="Header">
                <asp:SiteMapPath ID="MainMenuSiteMapPath" runat="server"></asp:SiteMapPath>
            </div>
            <div id="RightSide">
                <UserControls:Sidebar ID="RightSidebar" runat="server" />
            </div>
            <div id="LeftSide">
                <UserControls:Navbar ID="LeftSidebar" runat="server" />
            </div>
            <div id="MainContent">                
                <asp:ContentPlaceHolder ID="cpMainContent" runat="server">        
                </asp:ContentPlaceHolder>
            </div>

            <div id="Footer">
                <asp:LoginName ID="LoginName1" runat="server" FormatString="Logged in as {0}" />
                <LoggedInTemplate>
                    (<asp:LoginStatus ID="LoginStatus1" runat="server" />)
                </LoggedInTemplate>
            </div>
        </div>
        </div>
    </form>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:22:12.113

要使**z-index**工作，您还需要拥有`position: absolute, relative, or fixed`.

所以你的`PageWrapper`风格没有任何这个位置值，所以它不起作用。

此外 backgroundImage 层必须是单独的，并且 pageWrapper 不能在他里面。

查看最终结果：http: [//jsfiddle.net/EnUaK/](http://jsfiddle.net/EnUaK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T02:33:10.120

解决了这个问题。我移动了 backgroundImage div 的结束标记，因此它不再包装 PageWrapper div，然后设置 backgroundImage div 的不透明度并添加 position: absolute; 到我的 PageWrapper。

# sql - 通过VB添加SQL列的最简单方法

> ID：14971233
> 
> 赞同：-1
> 
> 时间：2013-02-20T02:17:59.623
> 
> 标签：sql, vb.net, visual-studio-2012, sql-server-2012

我想要做的是首先检查某个列是否已经存在于表中，如果不添加它。我想通过visual basic来实现这一点。如果有人花一点时间来评论并简要解释每个步骤，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:01:55.827

这是用于检查列**是否**存在的 vb.net 脚本，**如果不**存在，请创建它..

*''' **summary** ''' 检查数据库中是否存在表。''' ''' 要检查的表名 ''' 连接字符串以连接到 ''' 适用于 Access 或 SQL '''*

```
Public Function DoesTableExist(ByVal tblName As String, ByVal cnnStr As String) As Boolean
    ' For Access Connection String,
    ' use "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" &
    ' accessFilePathAndName

' Open connection to the database
Dim dbConn As New OleDbConnection(cnnStr)
dbConn.Open()

' Specify restriction to get table definition schema
' For reference on GetSchema see:
' http://msdn2.microsoft.com/en-us/library/ms254934(VS.80).aspx

Dim restrictions(3) As String
restrictions(2) = tblName
Dim dbTbl As DataTable = dbConn.GetSchema("Tables", restrictions)

If dbTbl.Rows.Count = 0 Then
    'Table does not exist
    DoesTableExist = False
Else
    'Table exists
    DoesTableExist = True
End If

dbTbl.Dispose()
dbConn.Close()
dbConn.Dispose() 
```

结束功能

*''' ''' 检查表中是否存在字段。''' ''' 要签入的表名 ''' 要检查的字段名 ''' 要连接到的连接字符串 ''' '''*

Public Function DoesFieldExist(ByVal tblName As String, _ ByVal fldName As String, _ ByVal cnnStr As String) As Boolean ' 对于访问连接字符串，' 使用 "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" & ' accessFilePathAndName

```
' Open connection to the database
Dim dbConn As New OleDbConnection(cnnStr)
dbConn.Open()
Dim dbTbl As New DataTable

' Get the table definition loaded in a table adapter
Dim strSql As String = "Select TOP 1 * from " & tblName
Dim dbAdapater As New OleDbDataAdapter(strSql, dbConn)
dbAdapater.Fill(dbTbl)

' Get the index of the field name
Dim i As Integer = dbTbl.Columns.IndexOf(fldName)

If i = -1 Then
    'Field is missing
    DoesFieldExist = False
Else
    'Field is there
    DoesFieldExist = True
End If

dbTbl.Dispose()
dbConn.Close()
dbConn.Dispose() 
```

结束功能

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T02:25:06.613

有两种方法可以确定列是否存在：尝试使用它并在不存在时捕获错误，或者从数据库中读取元数据，请参阅[SQL Server：提取表元数据（描述、字段及其数据）类型）](https://stackoverflow.com/questions/887370/sql-server-extract-table-meta-data-description-fields-and-their-data-types)

一旦您知道需要添加列，您就可以使用 ALTER TABLE 命令将该列添加到表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-27T13:23:40.887

```
 Dim connString As String = "Data Source=NameOfMachine\InstanceofSQLServer;Initial Catalog=NameOfDataBase;Integrated Security=True"
    Dim MyCol As String = "NameOfColumn"
    Dim MyTable As String = "[NameOfTable]" ' or "[Name Of Table]" use brackets if table name contains spaces or other illegal Characters
    Dim MySql As String = "IF NOT EXISTS(SELECT * FROM INFORMATION_SCHEMA.COLUMNS" & vbCrLf &
"WHERE TABLE_NAME = '" & MyTable & "' AND COLUMN_NAME = '" & MyCol & "')" & vbCrLf &
"BEGIN" & vbCrLf &
"ALTER TABLE [dbo]." & MyTable & " ADD" & vbCrLf & "[" & MyCol & "] INT NULL ;" & vbCrLf & "END"

    Try
        ' MsgBox(MySql)- this msg box shows the Query so I can check for errors- Not required for code.
        Dim dbConn = New SqlConnection(connString)' Note ConnString must be declared in the form class or within this Sub. Connstring is your connection string
        Dim dbCmd = New SqlCommand(MySql, dbConn)
        dbConn.Open()
        dbCmd.ExecuteNonQuery()
        'MessageBox.Show("Ready To Load Addendums")

        dbConn.Close()

    Catch ex As Exception
        MsgBox("We've encountered an error;" & vbCrLf & ex.Message)

    End Try 
```

# java - 更快地插入到 oracle

> ID：14971241
> 
> 赞同：2
> 
> 时间：2013-02-20T02:18:35.283
> 
> 标签：java, sql-server, oracle

sql server 主机上有一个视图，它有大约 100 列，每 4 小时大约有 40000 条新记录插入其中。我使用 netbeans 编写了一个 java 应用程序，它首先从 SQL Server 主机读取数据并将其插入到不同主机上的 Oracle 数据库表中。

阅读时间很短，从不超过 20 秒，但插入有时需要超过 10 分钟！我不能使用批处理，因为如果发生异常，我需要继续插入，但是如果我使用批处理，它将在第一个异常后终止。

我怎样才能使这个过程更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:27:06.430

您可以在 Oracle 中轻松使用批量处理。只需保存异常。当您的批量操作完成并且至少有 1 个异常时，会引发一个异常，让您有机会处理它们。

有关解释和示例，请参阅[Morgans Library](http://psoug.org/reference/array_processing.html)向下滚动到异常。

# sql - How do I select the count of records, then group them by a foreign key?

> ID：14971248
> 
> 赞同：3
> 
> 时间：2013-02-20T02:19:11.560
> 
> 标签：sql, select, count

I have two tables: Products and Suppliers. SupplierID is a foreign key in products table. I need to make a table that contains country, supplierID, company name all from the supplier table then I need to have the number of products each supplier has. I tried the following query:

```
SELECT DISTINCT s.country, 
                s.supplierid, 
                s.companyname, 
                (SELECT Count(DISTINCT productid) AS 
                        "Number of Products Supplied" 
                 FROM   products 
                        INNER JOIN suppliers 
                                ON p.supplierid = s.supplierid) AS 
                "Number of products Supplied" 
FROM   suppliers s, 
       products p 
WHERE  ( s.country = 'usa' 
          OR s.country = 'uk' ) 
       AND s.supplierid = p.supplierid 
```

But I get the total number of products and not number of products supplied by each supplier. Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T02:40:09.550

```
SELECT s.country, s.supplierid, s.companycame, Count(*) AS Number_of_Products_Supplied
FROM suppliers s
 JOIN products p ON s.supplierid=p.supplierid
WHERE s.country IN ('usa', 'uk')
GROUP BY s.country, s.supplierid, s.companycame 
```

I think that should do what you want, if I understood your question.

# android - Android：SharedPreferences 问题（多个 SharedPreferences）

> ID：14971250
> 
> 赞同：0
> 
> 时间：2013-02-20T02:19:31.860
> 
> 标签：android, arraylist, sharedpreferences

我有多个`SharedPreferences`，每个都存储一个`int`值。我之前已经成功创建了多个`SharedPreferences`，但我正在尝试一种稍微不同的方法。我只保留最高的 5 个值。我`SharedPreference`从`ArrayList`. 我在上面调用反向排序方法，然后我删除最后一个值（因为它是额外的）。然后我将每个索引放入`SharedPreferences`. 这是我所拥有的：

```
prefs1 = this.getSharedPreferences("key1", Context.MODE_PRIVATE);
int value1 = prefs1.getInt("number1", 0);

prefs2 = this.getSharedPreferences("key2", Context.MODE_PRIVATE);
int value2 = prefs2.getInt("number2", 0);

prefs3 = this.getSharedPreferences("key3", Context.MODE_PRIVATE);
int value3 = prefs3.getInt("number3", 0);

prefs4 = this.getSharedPreferences("key4", Context.MODE_PRIVATE);
int value4 = prefs4.getInt("number4", 0);

prefs5 = this.getSharedPreferences("key5", Context.MODE_PRIVATE);
int value5 = prefs5.getInt("number5", 0);

ArrayList<Integer> numList = new ArrayList<Integer>();
Collections.addAll(numList, value0, value1, value2, value3, value4, value5);
Collections.sort(numList, Collections.reverseOrder());
numList.remove(numList.size()-1);
value1 = numList.get(0);
value2 = numList.get(1);
value3 = numList.get(2);
value4 = numList.get(3);
value5 = numList.get(4);

Editor editor = prefs1.edit();
editor.putInt("number1", value1);
editor.commit();

editor = prefs2.edit();
editor.putInt("number2", value2);
editor.commit();

editor = prefs3.edit();
editor.putInt("number3", value3);
editor.commit();

editor = prefs4.edit();
editor.putInt("number4", value4);
editor.commit();

editor = prefs5.edit();
editor.putInt("number5", value5);
editor.commit(); 
```

我遇到的问题是，即使在`value0`执行完成后为正之后，我的其他活动中的每个值都显示为 0。

我这样做有什么问题吗？（如果不是，那一定是当我在另一项活动中获得这些值时，但我几乎肯定我有这个权利。）

编辑*

也许是在检索中，这里来自检索活动：

```
prefs1 = this.getSharedPreferences("key1", Context.MODE_PRIVATE);
num1 = prefs1.getInt("number1", 0); //0 is the default value
tv1 = (TextView) findViewById(R.id.val1);
tv1.setText(String.valueOf(num1));

prefs2 = this.getSharedPreferences("key2", Context.MODE_PRIVATE);
num2 = prefs2.getInt("number2", 0); //0 is the default value
tv2 = (TextView) findViewById(R.id.val2);
tv2.setText(String.valueOf(num2));

prefs3 = this.getSharedPreferences("key3", Context.MODE_PRIVATE);
num3 = prefs3.getInt("number3", 0); //0 is the default value
tv3 = (TextView) findViewById(R.id.val3);
tv3.setText(String.valueOf(num3));

prefs4 = this.getSharedPreferences("key4", Context.MODE_PRIVATE);
num4 = prefs4.getInt("number4", 0); //0 is the default value
tv4 = (TextView) findViewById(R.id.val4);
tv4.setText(String.valueOf(num4));

prefs5 = this.getSharedPreferences("key5", Context.MODE_PRIVATE);
num5 = prefs5.getInt("number5", 0); //0 is the default value
tv5 = (TextView) findViewById(R.id.val5);
tv5.setText(String.valueOf(num5)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T02:32:46.603

您可以将 SharedPreferences 视为您所有东西的巨型地图，但除非您正在做任何时髦的事情，否则您应该从同一个巨型地图（即相同的 SharedPreferences）存储和检索数据。您正在做的是创建命名的共享首选项。我建议只使用默认值。如果您想了解更多关于这意味着什么的信息，[请查看这个问题。](https://stackoverflow.com/questions/5946135/difference-between-getdefaultsharedpreferences-and-getsharedpreferences)

因此，在您的情况下，如果您要存储 5 个值，则可以`SharedPreferences`通过提供不同的键在同一个值内执行此操作，如下所示：

```
SharedPreferences mSharedPreferences = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());  
SharedPreferences.Editor mSharedPreferencesEditor = mSharedPreferences.edit();

mSharedPreferencesEditor.putInt("numberX", numberX);
mSharedPreferencesEditor.putInt("numberY", numberY);
mSharedPreferencesEditor.commit()

mSharedPreferences.getInt("numberX", numberX);
mSharedPreferences.getInt("numberY", numberY); 
```

您可以轻松地`get`使用`put`不同的键进入相同的 sharedPrefs。您的代码将变为：

```
SharedPreferences mSharedPreferences = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());  
SharedPreferences.Editor mSharedPreferencesEditor = mSharedPreferences.edit();

int value1 = mSharedPreferences.getInt("number1", 0);
int value2 = mSharedPreferences.getInt("number2", 0);
int value3 = mSharedPreferences.getInt("number3", 0);
int value4 = mSharedPreferences.getInt("number4", 0);
int value5 = mSharedPreferences.getInt("number5", 0);

...

mSharedPreferencesEditor.putInt("number1", value1);
mSharedPreferencesEditor.putInt("number2", value2);
mSharedPreferencesEditor.putInt("number3", value3);
mSharedPreferencesEditor.putInt("number4", value4);
mSharedPreferencesEditor.putInt("number5", value5);
mSharedPreferencesEditor.commit(); 
```

您关于所有值都为 0 的问题可能会有所不同。我完全希望您对 getInt 的所有调用都为 0，因为您在 sharedPrefs 中**永远不会**存储除 0 之外的任何内容。看起来您只是在添加零并放置零。我不确定您在这里尝试做什么，但在调用此函数之前的某个时间点，通过调用`mSharedPreferencesEditor.putInt(number);`sharedPrefs 对象将数字 1-5 分配给 0 以外的值肯定会有所帮助，如下所示：

```
SharedPreferences mSharedPreferences = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());  
SharedPreferences.Editor mSharedPreferencesEditor = mSharedPreferences.edit();

//for example, for the key "number5"
mSharedPreferencesEditor.putInt("number5", value5); 
```

# python - 通过相同的键加入大字典

> ID：14971251
> 
> 赞同：2
> 
> 时间：2013-02-20T02:19:35.587
> 
> 标签：python, bioinformatics, dictionary, defaultdict

我有大约 10 个包含 python 字典的大文件，如下所示：

```
 dict1:
    {   
        'PRO-HIS-MET': {
            'A': ([1,2,3],[4,5,6],[7,8,9]),
            'B': ([5,2],[6],[8,9]),
            'C': ([3],[4],[7,8])},
        'TRP-MET-GLN': {
            'F': ([-5,-4,1123],[-7,-11,2],[-636,-405])}
    }

    dict2:
    {   
        'PRO-HIS-MET': {
            'J': ([-657], [7,-20,3], [-8,-85,15])}

        'TRP-MET-GLN':{
            'K': ([1,2,3],[4,50,6],[7,80,9]), 
            'L': ([5,20],[60,80],[8,9])}
    } 
```

基本上它们都是字典的字典。每个文件大小约为 1 GB（以上只是数据示例）。无论如何，我想做的就是将这 10 部字典加入到一起：

```
 final:
    {
        'PRO-HIS-MET': {
            'A': ([1,2,3],[4,5,6],[7,8,9]),
            'B': ([5,2],[6],[8,9]),
            'C': ([3],[4],[7,8])
            'J': ([-657], [7,-20,3], [-8,-85,15])},
        'TRP-MET-GLN': {
            'F': ([-5,-4,1123],[-7,-11,2],[-636,-405])
            'K': ([1,2,3],[4,50,6],[7,80,9]), 
            'L': ([5,20],[60,80],[8,9])}
    } 
```

我在小文件上尝试了以下代码，它工作正常：

```
 import csv
    import collections
    d1 = {}
    d2 = {}
    final = collections.defaultdict(dict)

    for key, val in csv.reader(open('filehere.txt')):
        d1[key] = eval(val)
    for key, val in csv.reader(open('filehere2.txt')):
        d2[key] = eval(val)

    for key in d1:
        final[key].update(d1[key])
    for key in d2:
        final[key].update(d2[key])

    out = csv.writer(open('out.txt', 'w'))
    for k, v in final.items():
        out.writerow([k, v]) 
```

但是，如果我在我的 1 GB 文件上尝试这样做，我会通过将 d1 和 d2 以及最终字典保存在内存中来快速耗尽内存。

我有几个想法：

1.  有没有一种方法可以让我从分段字典中加载键，比较它们，如果在多个字典中找到相同的键，只需组合值？
2.  与其将字典合并到一个巨大的文件中（这将来可能会让我记忆犹新），如何在合并数据后创建多个包含一个键的所有值的单独文件？例如，对于上述数据，我将只有：

    ```
    pro-his-met.txt:
    'PRO-HIS-MET': {
        'A': ([1,2,3],[4,5,6],[7,8,9]),
        'B': ([5,2],[6],[8,9]),
        'C': ([3],[4],[7,8])
        'J': ([-657], [7,-20,3], [-8,-85,15])}
    trp-met-gln.txt:
    'TRP-MET-GLN': {
        'F': ([-5,-4,1123],[-7,-11,2],[-636,-405])
        'K': ([1,2,3],[4,50,6],[7,80,9]), 
        'L': ([5,20],[60,80],[8,9])} 
    ```

作为生物学家，我没有太多的编程经验（您可能已经猜到上述数据代表了生物信息学问题），因此非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:28:09.173

就个人而言，这听起来像是一个问题数据库的原型被发明来解决。是的，您可以通过保留文件自己解决这个问题，并将它们映射到内存中并让操作系统处理交换等，但这确实很复杂，而且很难做得很好。

如果您可以让一个已经投入了数百万工时的数据库来处理它，为什么还要付出所有这些努力呢？这将更有效率，并且作为额外的好处，更容易查询信息。

我已经看到 Oracle DB 存储了超过 10 GB 的数据而没有任何问题，我相信 postgre 也会处理这个问题。好消息是，如果你使用 ORM，你可以抽象出这些细节并担心如果有必要，稍后再谈。

此外，虽然生物信息学不是我的专长，但我很确定周围有针对生物信息学量身定制的特定解决方案——也许其中一个是最合适的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T02:55:44.653

该`shelve`模块是一个非常易于使用的 Python 数据库。它远没有真正的数据库强大（为此，请参阅@Voo 的答案），但它可以解决操作大型字典的窍门。

首先，从您的词典创建书架：

```
import shelve
s = shelve.open('filehere.db', flag='n', protocol=-1, writeback=False)
for key, val in csv.reader(open('filehere.txt')):
    s[key] = eval(val)
s.close() 
```

现在你已经把所有东西都整齐地搁置了，你可以高效地操作字典：

```
import shelve
import itertools
s = shelve.open('final.db', flag='c', protocol=-1, writeback=False)
s1 = shelve.open('file1.db', flag='r')
s2 = shelve.open('file2.db', flag='r')
for key, val in itertools.chain(s1.iteritems(), s2.iteritems()):
    d = s.get(key, {})
    d.update(val)
    s[key] = d # force write
s.close() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T02:31:09.527

这个概念应该有效。

我会考虑在每次执行部分键时对文件进行多次传递。并保存该结果。

例如。如果您在一次传递中创建所有键的唯一第一个字符的列表，然后将每个传递处理到新的输出文件。如果它是简单的字母数据，则逻辑选择将是字母表中每个字母的循环。

例如。在“p”通行证中，您将处理“PRO-HIS-MET”

然后，您将在最后结合所有文件的所有结果。

如果您是开发人员，那么如果您可以处理这种交互，上一个答案中的数据库想法可能是最好的方法。这个想法需要创建一个 2 级结构，您可以在其中插入和更新记录，然后使用 SQL 语句查询结果。

# javascript - 在 ASP.NET 中测试时如何不使用 http://localhost

> ID：14971252
> 
> 赞同：-2
> 
> 时间：2013-02-20T02:19:45.027
> 
> 标签：javascript, asp.net, visual-studio-2010

（请注意：提交过程不允许我使用 URL “...localhost”等，所以我希望我的 Q 被理解。）

为了测试 cookie javascript 代码，需要设置一个非 ...localhost... 服务器。

我使用了这些说明... [为什么 asp.net 不在 localhost 中创建 cookie？](https://stackoverflow.com/questions/390219/why-wont-asp-net-create-cookies-in-localhost)

但我不知道如何设置第 2 步....

我更改了主机文件并在 cookie 代码中使用了“.livesite.com”。

但是，当我运行页面 (F5) ...localhost... 时正在使用。

我需要在我的 VS2010 中设置一个选项吗？我用谷歌搜索但找不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T02:26:58.870

您可以使用本地 IIS Web 服务器，也可以使用计算机名作为 URL 而不是 localhost。要更改 VS 2010 中的选项，请右键单击项目并选择属性。在 web 选项卡中选择“使用本地 IIS web 服务器”。指定您的计算机名称以及要在其中运行应用程序的虚拟目录。

# java - 无法将值从 Java 代码传递到 JSP

> ID：14971257
> 
> 赞同：0
> 
> 时间：2013-02-20T02:20:15.253
> 
> 标签：java, database, jsp

我正在尝试连接到数据库并显示从 JSP 表中的数据库列读取的值。为此，我创建了一个 Java 类，它可以连接到数据库并在本地类变量中读取我需要的值。现在在 JSP 方面，我正在创建该类的一个对象并尝试从数据库中检索值。在 JSP 方面，我没有得到 Java 类变量中的值。但是，当我独立运行 Java 类时，我能够显示数据库值。只是我无法有效地将值传递给 JSP。这是我的代码：

```
JSP:

<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@ page import="com.mypckg.*"%>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title></title>
</head>
<body>
    <%
        DBConnect dbCon = new DBConnect();
        String[] Codes = dbCon.getCode().split("##");
    %>

    <table>
        <tr>
            <td>Name</td>
            <td>Code</td>
        </tr>
        <%
            for (int i = 0; i < Codes.length; i++) {
        %>
        <tr>
            <td>
                <%
                    dbCon.getName();
                %>
            </td>
            <td>
                <%
                    dbCon.getCode();
                %>
            </td>
        </tr>
        <%} %>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:03:15.203

而不是使用

```
<%
   dbCon.getName();
%> 
```

尝试使用

```
<%= dbCon.getName(); %> 
```

（当然对于 dbCon.getCode() 也是如此）

这是当您希望简单地输出方法的返回值时使用的标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T08:57:25.693

如果要执行语句，可以使用 <% java command %> 如果要打印值，请使用 <%= java command %>

在那个 wat 中使用 java 命令不是一个好习惯...参考 jstl 标签 ...这是更有效和安全的方式:) ...

# php - 从未知的字符串长度捕获日期

> ID：14971258
> 
> 赞同：1
> 
> 时间：2013-02-20T02:20:40.807
> 
> 标签：php, parsing, trim

我有一个字符串说“ETS 13-JUN-13sf342356”。我可以使用一些简单的 ltrim 和 rtrim 函数来解析日期。我的问题是，如果我不知道之前或之后是什么，或者字符串有多长，我还能捕捉到这个日期吗？还有一些例子是：

*   “乔R13JUN134092883094”
*   “CC13-JUN-13tl320994”
*   “3425313-JUN-13tl345550”

是否有一个函数可以始终从这些字符串中捕获（在这种情况下）13-JUN-13 日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:31:22.630

我根据您的输入尝试了以下操作并为此工作。似乎很长，但试一试：

```
([0-9]{2})(\-[A-Z]+|[A-Z]+)(\-[0-9]{2}|[0-9]{2}) 
```

# c# - 延迟加载和多个引用

> ID：14971259
> 
> 赞同：1
> 
> 时间：2013-02-20T02:20:43.307
> 
> 标签：c#, .net, entity-framework, lazy-loading, navigation-properties

我的数据库设置有一个实体表，该表具有一个 Ref_Type 导航属性（以及一个引用 TypeID 的 FK）。Type 表有一个 Ref_Department，相同的 FK 设置。最后，Department 表具有 Ref_Locale 和相同的 FK 设置。

我将实体保存在一个列表中，这是一个单例的属性。它的创建如下；

```
private Singleton()
{
    using (Database db = new Database())
    {
        List<Entities> EntityList = db.Entities.ToList<Entities>();
    }
} 
```

这很好，导航属性已全部加载，我可以访问其中任何一个。当我按如下方式更新实体条目时出现问题；

```
public void UpdateEntity(Entities oldEnt, Entities newEnt)
{
    using (Database db = new Database())
    {
        Entities ent = db.Entities.Where(e => e.EntityName == oldEnt.EntityName).FirstOrDefault();
        ent.EntityName = newEnt.EntityName;
        ent.EntityEmail = newEnt.EntityEmail;
        ...
        ent.EntityType_ID = newEnt.EntityType_ID;
        db.SaveChanges();
    }

    RefreshEntities();
}

public void RefreshEntities()
{
    using (Database db = new Database())
    {
        db.Configuration.LazyLoadingEnabled = false;
        db.SaveChanges();
        EntityList = db.Entities.Include("Ref_EntityType").Include("Ref_EntityPosition").ToList<Entities>();
    }
} 
```

Ref_Entity 被正确加载，但在 Ref_Entity 中，Ref_Department 只是空。我试过`db.Entities.ToList<Entities>();`在我的构造函数中使用like，没有骰子。如您所见，我还尝试关闭 LazyLoading（我想我可能需要调用 SaveChanges() 才能实际应用标志）。我也尝试过 .Include("Ref_Department") 但它只是抱怨实体不存在它，这是有道理的。

我传递给 UpdateEntity 方法的 newEnt 没有初始化 Ref_Type，我假设在 UpdateEntity 方法中没有改变的任何东西都会保持不变......

所以现在我对发生了什么以及如何解决它有点茫然。如果有人可以帮助解释我哪里出错了，或者给我一些关于如何修复我的代码以使其工作的指示，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:41:06.593

一时兴起，我修改`RefreshEntities()`为；

```
EntityList = db.Entities.Include("Ref_EntityPosition").Include("Ref_EntityType").
    Include("Ref_EntityType.Ref_Department").
    Include("Ref_EntityType.Ref_Department.Ref_Locale").ToList<Entities>(); 
```

现在我得到了所有的参考资料。

我仍然不确定为什么它会在构造函数中加载所有引用而不是在`RefreshEntities()`方法中加载，即使调用是相同的，但这解决了问题，所以我很高兴让它保持这样。

# powershell - Powershell 中的枚举与管道

> ID：14971263
> 
> 赞同：1
> 
> 时间：2013-02-20T02:21:51.180
> 
> 标签：powershell, powershell-3.0

我感到很困惑。我不明白为什么 Powershell 中的 foreach 行为与 C# 如此不同。

这个简单的代码不会产生任何输出：

```
@{a=1; b=2} | %{ $_.key } 
```

我在 Linqpad 中使用 C# 做的一个近似值给出了我期望的输出：

```
var ht = new Hashtable();
ht["a"] = 1;
ht["b"] = 2;

foreach (DictionaryEntry kvp in ht)
{
    kvp.Key.Dump();
}

// output

a
b 
```

如果我枚举散列表的 Keys 成员，我可以做我需要的。但我不明白为什么枚举哈希表本身不会返回键值对。事实上，它似乎返回了对象本身：

```
>     @{a=1; b=2} | %{ $_.gettype() }

IsPublic IsSerial Name                                     BaseType
-------- -------- ----                                     --------
True     True     Hashtable                                System.Object 
```

Powershell 在这里做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T03:02:02.707

PowerShell 管道将“展开”数组和集合（一级），但不是哈希表。如果要在 PowerShell 中枚举哈希表的键值对，请调用 .getenumerator() 方法：

```
$ht = @{a=1;b=2}
$ht.GetEnumerator()

Name                           Value                                                             
----                           -----                                                             
a                              1                                                                 
b                              2 
```

# .htaccess - 在表达式引擎中迁移后配置 .htaccess 文件

> ID：14971271
> 
> 赞同：2
> 
> 时间：2013-02-20T02:23:23.770
> 
> 标签：.htaccess, mod-rewrite, expressionengine

所以基本上我已经将一个站点从原始顶级域移动到我站点中的一个文件夹，但是由于 .htaccess 不会自动重定向到 /en/，所以页面是空白的

我尝试将我的域 julianjosephs.com 放在现有域之前，但它不起作用。不知道现在该怎么办。

原来的：`http://morganstachs.com/en/`

发展：`http://julianjosephs.com/morganstachs.com/`

***.htaccess 文件内容***

```
# -- LG .htaccess Generator Start --

# .htaccess generated by LG .htaccess Generator v1.0.0
# http://leevigraham.com/cms-customisation/expressionengine/addon/lg-htaccess-generator/

# secure .htaccess file
<Files .htaccess>
 order allow,deny
 deny from all
</Files>

# Dont list files in index pages
IndexIgnore *

# EE 404 page for missing pages
ErrorDocument 404 /index.php?/

# Simple 404 for missing files
<FilesMatch "(\.jpe?g|gif|png|bmp)$">
  ErrorDocument 404 "File Not Found"
</FilesMatch>

RewriteEngine On

RewriteBase /

# remove the www
RewriteCond %{HTTP_HOST} ^(www\.$) [NC]
RewriteRule ^ http://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# Add a trailing slash to paths without an extension
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5}|/)$
RewriteRule ^(.*)$ $1/ [L,R=301]

# Remove index.php
# Uses the "include method"
# http://expressionengine.com/wiki/Remove_index.php_From_URLs/#Include_List_Method
RewriteCond %{REQUEST_URI} !(\.[a-zA-Z0-9]{1,5})$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} ^/(_includes|site|landing_pages|listings_shortcut|offers|scripts|xml|en|sp|fr|members|P[0-9]{2,8}) [NC]
RewriteRule ^(.*)$ /index.php?/$1 [L]

# Remove IE image toolbar
<FilesMatch "\.(html|htm|php)$">
  Header set imagetoolbar "no"
</FilesMatch>

# -- LG .htaccess Generator End --

RewriteCond %{HTTP_HOST} ^admin\.morganstachs\.com$ [OR]
RewriteCond %{HTTP_HOST} ^www\.admin\.morganstachs\.com$
RewriteRule ^/?$ "http\:\/\/morganstachs\.com\:2082" [R=301,L] 
```

# json - 如何获取没有特殊标签的 JSON 数据？

> ID：14971272
> 
> 赞同：0
> 
> 时间：2013-02-20T02:23:26.117
> 
> 标签：json

我正在使用 API 从网站获取数据。我得到了如下数据：

1>

```
 "tags": {
    "data": [
      {
        "name": "action:archived"
      },
      {
        "name": "archived"
      },
      {
        "name": "inbox"
      },
      {
        "name": "source:email"
      }
    ]
  } 
```

2>

```
 "tags": {
    "data": [
      {
        "name": "inbox"
      },
      {
        "name": "source:email"
      }
    ]
  } 
```

并按照手册，我可以只使用标签“收件箱”而不是“存档”使用这样的链接获取数据：`https://abc.com/DATA?tags=inbox`，我试过了，正如你所猜到的，如果我想的话，两个数据都有名为“收件箱”的标签获取没有标签“ `archived`”的数据，我该怎么办？

感谢您的宝贵时间，任何提示都会有所帮助。

# opengl - 在opengl中将颜色应用于四边形中的单个顶点

> ID：14971282
> 
> 赞同：5
> 
> 时间：2013-02-20T02:25:08.067
> 
> 标签：opengl, colors, cocos2d-iphone, vertex-array-object

我正在尝试为通过绘制的四边形的单个顶点着色`glDrawElements`，我正在使用**cocos2d** libray，所以我已经能够清除源代码以准确了解正在发生的事情，代码如下：

```
glBindVertexArray( VAOname_ );
glDrawElements(GL_TRIANGLES, (GLsizei) n*6, GL_UNSIGNED_SHORT, (GLvoid*) (start*6*sizeof(indices_[0])) );
glBindVertexArray(0); 
```

所以使用顶点数组对象。我正在尝试修改传递的对象的单个顶点颜色，它似乎可以工作，但存在下图描述的故障：

![在此处输入图像描述](../Images/bb0203007ccfeb8ef843c8f583126ce3.png)

这里我尝试改变左下和右下顶点的颜色。结果是不同的，我猜这是因为四边形被渲染为一对共享斜边的三角形，它们位于从左下顶点到右上顶点的对角线上。所以这可能会导致不同的结果。

现在我想对第一个案例也有第二个结果。有没有办法获得它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T02:54:05.403

# php - 如何使用 PHP 5.2 从 DateTime 对象获取 unix 时间戳？

> ID：14971284
> 
> 赞同：4
> 
> 时间：2013-02-20T02:25:30.030
> 
> 标签：php, date, datetime

我正在研究几年前的代码库，它使用 DateTime。服务器使用**PHP 5.2**。

我看到在**PHP 5.3**之后添加了**DateTime::getTimestamp()**。

 ****是否可以从PHP 5.2**中的 DateTime 获取时间戳？

我使用 get_class_methods 来查看该方法是否可用，但不是。

```
Array
(
    [0] => __construct
    [1] => format
    [2] => modify
    [3] => getTimezone
    [4] => setTimezone
    [5] => getOffset
    [6] => setTime
    [7] => setDate
    [8] => setISODate
) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-20T02:28:20.633

```
$datetime = new DateTime();
echo $datetime->format('U'); 
```

[看到它在行动](http://codepad.viper-7.com/6ZxvwI)

**编辑**

从 PHP 5.4 开始，您可以将其设为单行：

```
echo (new DateTime())->format('U'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T02:28:38.420

> 在使用 PHP 5.2 时，使用 U 作为 DateTime::format() 的参数是一种替代方法。

```
$ts = $datetimeObj->format('U'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T02:28:44.503

如果你想看看[手册](http://www.php.net/manual/en/datetime.format.php)：

> 在使用 PHP 5.2 时，使用 U 作为 DateTime::format() 的参数是一种替代方法。

就是`DateTime::format('U')`这样。**

# html - 应用 SVG 高斯模糊后 Div 消失

> ID：14971288
> 
> 赞同：5
> 
> 时间：2013-02-20T02:25:52.760
> 
> 标签：html, css, firefox, svg, svg-filters

我正在尝试将高斯模糊应用于具有一些包含某些内容的子节点的元素。

对于 Chrome，我采用了应用样式：

```
 -webkit-filter: blur(2px); 
```

火狐不支持这个。Firefox 支持的是[将 SVG 应用于元素](https://developer.mozilla.org/en-US/docs/Applying_SVG_effects_to_HTML_content)。知道这一点后，我在 google 上搜索了一个示例，他们将解释如何使用 SVG 将高斯模糊应用于元素。我在这个演示中找到了[这个](http://css-plus.com/examples/2010/05/how-to-add-a-gaussian-blur-effect-to-elements-within-firefox/)[例子](http://css-plus.com/2010/05/how-to-add-a-gaussian-blur-effect-to-elements-within-firefox/)。

我酝酿了以下CSS：

```
 #div-with-content{
        -webkit-filter: blur(2px);
        filter: url('#blur');
    } 
```

并将其放入相应的`HTML`文件中：

```
 <svg:svg>
        <svg:filter id="blur">
            <svg:feGaussianBlur stdDeviation="2"/>
        </svg:filter>
    </svg:svg> 
```

但是当我去测试页面时，我看到那个页面`div-with-content`已经不存在了。它已经消失了。每次我从中删除模糊样式时，`div-with-content`它都会再次出现。

谁能帮我解决这个问题，我真的在我的知识范围内尝试了一切。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T23:23:16.530

我不知道是你的撇号还是你的 svg: 但这个版本在 Firefox 中完美运行：

```
CSS:
#div-with-content{
        filter: url("#blur");
    }

HTML:
<svg>
   <filter id="blur">
       <feGaussianBlur stdDeviation="2"/>
   </filter>
</svg>

<div id="div-with-content"> WOohooo</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T16:29:19.383

如果只有你想模糊的文字，有这个小技巧

```
p{
   color: transparent;
   text-shadow: 0 0 4px #222;
} 
```

你可以在这里看到它是如何工作[的 jsFiddle](http://jsfiddle.net/Y4FU2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-03T11:32:12.267

# 编辑

*[您**可以**从外部文档加载](https://developer.mozilla.org/en-US/docs/Applying_SVG_effects_to_HTML_content#Using_external_references)，只要“该文档来自与其应用的 HTML 文档相同的来源”。*

确保在 URL 参数中传递了具有 svg 效果的 html 页面以及 svg 效果的 ID（例如，

所以，而不是

```
url('#filter-effect') 
```

做

```
filter: url('index.html#filter-effect') 
```

在我阅读@RobertLongon 的评论之前，这对我来说并不明显，但现在它是有道理的。您可以将所有 SVG 放在一个文档中，并从其他 html 文件中引用它们。

-

# 老答案：

## Mozilla 开发者网络 说：

> > 您可以在同一文档中或在外部样式表中指定 SVG 样式。

......但他们充满了它。错误报告？

### 使用`<style>`而不是`<link>`

由于我无法理解的原因，如果您`.blur`在 html 文档之外声明该类， via `<link>`，您的元素将消失，同时仍占用空间。这就是为什么小提琴在其他答案中工作但实施不是的原因。JSFiddle 使用`<style>`. 为了避免这种行为，您应该改为`.blur`在文档中声明类，也就是`<style>...</style>`

也很重要：

> > 注意：命名空间在 HTML5 中无效，请不要在 HTML 格式文档的标签中使用“svg:”。

再次，`<style>`，不是`<link>`。

来源：
反复试验
[mdn：将 SVG 效果应用于 HTML 内容](https://developer.mozilla.org/en-US/docs/Applying_SVG_effects_to_HTML_content)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-13T16:37:17.593

我在尝试使用的过滤器上看到了相同的行为。事实证明，我还将过滤器定义的 SVG 设置为`display: none;`. 一旦我删除它，过滤器就可用并且它们应用的 HTML 元素正确显示。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-05-14T10:02:39.770

这可能已经晚了 2 年，但是调用文档的名称并没有为我做这件事，但是像这样将样式直接放在元素上效果很好：

```
<div class="imageblur" style="filter:url(#blur) "> 
```

# c - strcat 和分段错误 11

> ID：14971296
> 
> 赞同：0
> 
> 时间：2013-02-20T02:26:17.670
> 
> 标签：c, string, printf, strcat

我的代码如下：

```
 #include<stdio.h>
   #include <string.h>
   #include <math.h>
   #include <stdlib.h>
   int string_length(char*);
   void reverse(char*);
   int main(void)
   {
      char num[256];
      printf("%c[%d;%d;%dmPlease enter a number of rows: ", 0x1B, 5, 32, 40);
      gets(num);
      //gets number

printf("%c[%dm\n", 0x1B, 0);
//Resets color

//Variables
char revnum[50], q[50] = "\0", r[50] = "\v";
int i, x, j, z, w;

//Reverses inputted character string
reverse(num);

//Takes reversed inputted character string and out puts it as an integer
for(i = 0; num[i] != '\0'; ++i) {
    j = -(48-num[i]);
    double y = i;
    x = j*pow(10, y) + x;
}

//Takes integer version of inputted character string and assigns a counter's value (counting up to our integer version) to a character string
for (z = 0; z <= x; z++) {
    sprintf(revnum, "%d", z);

    //Takes the new character string for each number up to the inputted value and prints it vertically, but no differentiating between numbers and printing them horizontally to each other
    for (w = 0; revnum[w] != '\0'; ++w) {
        strcat(q, r);
        printf("%s", q);
        strcat(q, revnum[w]);
      }
   }

  }

  //Function which reverses a character string
   void reverse(char *num)
{
int length, c;
char *begin, *end, temp;

length = string_length(num);

begin = num;
end = num;

for ( c = 0 ; c < ( length - 1 ) ; c++ )
    end++;

for ( c = 0 ; c < length/2 ; c++ )
{
    temp = *end;
    *end = *begin;
    *begin = temp;

    begin++;
    end--;
}
}

 int string_length(char *pointer)
 {
int c = 0;

while( *(pointer+c) != '\0' )
    c++;

return c;
} 
```

该程序的重​​点是输出输入数字之前的所有数字，每个数字的数字垂直，然后数字本身水平列出。

请帮忙！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T09:43:52.460

你犯了几个错误。此代码有效：

```
#include<stdio.h>
#include <string.h>
#include <math.h>
#include <stdlib.h>
int string_length(char*);
void reverse(char*);
int main(void)
{
  char num[256];
  printf("Please enter a number of rows: ", 0x1B, 5, 32, 40);
  gets(num);
  //gets number

//Variables
char revnum[50], q[50] = "\0";
int i, x, j, z, w;

//Reverses inputted character string
reverse(num);

//Takes reversed inputted character string and out puts it as an integer
x = atoi(num);

//Takes integer version of inputted character string and assigns a counter's value (counting up to our integer version) to a character string
for (z = 0; z <= x; z++) {
sprintf(revnum, "%d", z);

//Takes the new character string for each number up to the inputted value and prints it vertically, but no differentiating between numbers and printing them horizontally to each other
for (w = 0; revnum[w] != '\0'; ++w) {
    printf("%s\v", q);
char a[2];
sprintf(a,"%c",revnum[w]);
strcat(q,a);
  }
}

}

//Function which reverses a character string
void reverse(char *num)
{
int length, c;
char *begin, *end, temp;

length = string_length(num);

begin = num;
end = num;

for ( c = 0 ; c < ( length - 1 ) ; c++ )
end++;

for ( c = 0 ; c < length/2 ; c++ )
{
temp = *end;
*end = *begin;
*begin = temp;

 begin++;
 end--;
}
}

int string_length(char *pointer)
{
int c = 0;

while( *(pointer+c) != '\0' )
c++;

return c;
} 
```

并使用选项*-fno-stack-protector*进行编译以防止堆栈碰撞检测。

# java - 在 Spring bean 中定义枚举映射

> ID：14971302
> 
> 赞同：3
> 
> 时间：2013-02-20T02:26:49.623
> 
> 标签：java, spring, dictionary, dependency-injection

我正在尝试在我的 Spring beans xml 中定义一个枚举映射，并且我希望它填充到 xml 中，但是当我尝试像这样定义它时

```
<bean class = "java.util.EnumMap">
    <constructor-arg>
        <util:map key-type="org.itemlist.products.stockitem">
            <entry key="stockitem.SOAP">100</entry>
        </util:map> 
    </constructor-arg> 
```

**更新**

这是我的bean配置

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context
    http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/util 
    http://www.springframework.org/schema/util/spring-util-3.0.xsd">

    <bean class = "java.util.EnumMap">
        <constructor-arg>
            <util:map key-type="org.itemlist.products.stockitem">
                <entry key="stockitem.SOAP">100</entry>
            </util:map> 
        </constructor-arg>
    </bean>

</beans> 
```

当我在条目中添加一个值时，这就是现在的错误

```
cvc-complex-type.2.3: Element 'entry' cannot have character [children], because the type's content type is element-only. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T02:32:04.737

您是否在标题中定义了这些架构：

```
http://www.springframework.org/schema/util 
http://www.springframework.org/schema/util/spring-util-3.0.xsd 
```

和命名空间：

```
xmlns:util="http://www.springframework.org/schema/util" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-12T08:53:44.330

你可以这样定义它：

```
 <bean id="springBean" class="a.b.c.d.MyEnum">
        <constructor-arg>
            <util:map key-type="a.b.c.d.MyEnum" value-type="aa.b.c.d.Mya.b.c.d.MyVal">
                <entry>
                    <key><value type="a.b.c.d.MyEnum">ENUM-VAL1</value></key>
                    <ref bean="myValBean1" />
                </entry>
                <entry>
                    <key><value type="a.b.c.d.MyEnum">ENUM-VAL1</value></key>
                    <ref bean="myValBean1" />
                </entry>
            </util:map>
        </constructor-arg>
    </bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-01T06:01:57.633

该错误消息意味着该`entry`元素必须为空，即不包含文本或其他元素。你想要的语法是：

```
<entry key="stockitem.SOAP" value="100"/> 
```

该`entry`元素还允许您将对另一个 bean 的引用作为值传递，例如：

```
<entry key="stockitem.SOAP" value-ref="myOtherBean"/> 
```

（这在您的情况下没有用，我只是为了完整性而提到它）

# ios - 应用程序使用 App Store 以外的机制不当解锁或启用附加功能

> ID：14971306
> 
> 赞同：0
> 
> 时间：2013-02-20T02:27:23.330
> 
> 标签：ios, app-store

我的应用程序被拒绝的原因：

“我们发现您的应用程序使用 App Store 以外的机制不恰当地解锁或启用了附加功能，这不符合 App Store 审查指南”

“修改您的应用程序以使用应用内购买 API 来提供内容购买功能可能是合适的。”

我所做的如下：

![在此处输入图像描述](../Images/29ae4902206ff7a34552b9680695db40.png)

由于这个应用程序是供我的特定客户公司使用的，我只希望从我那里获得邀请码的公司使用我的应用程序。不收费。我不知道是否有必要使用 In App Purchase API 来代替？如果是真的，你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T02:41:16.430

您的应用程序不能被公众使用，因此不属于 App Store。

如果您只打算将您的应用程序提供给少数特定人员，则应使用 Ad-Hoc Distribution 使其可供他们使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T03:57:06.140

向审核团队解释目的，有时他们会倾听。此外，也许将该消息作为“登录页面”代替。拥有用户名和密码，而不是验证码。验证码消息可能看起来更像是您在 AppStore 背后销售应用程序。如果您还没有提供访问代码/登录详细信息，请向审核团队提供，以便他们可以实际审核该应用程序。

# r - 如何查看具有一个或多个 NA 的重复记录？

> ID：14971312
> 
> 赞同：1
> 
> 时间：2013-02-20T02:27:59.610
> 
> 标签：r, duplicate-data, missing-data

我的数据集如下所示：

```
ID Score
A1 60
A1 50
A1 NA
B1 30
B1 33
C1 48
C1 39
D1 21
D1 38
D1 NA 
```

我想查看具有 NA 的重复记录。如：

```
A1 60
A1 50
A1 NA
D1 21
D1 38
D1 NA 
```

感谢您的时间和善意的考虑...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T02:33:23.970

使用 data.table 的几种方法。

假设您的数据位于名为的 data.frame 中`DF`

```
library(data.table)
DT <- data.table(DF, key = 'ID')

# self join with the ID values with NA values in score

DT[.(DT[is.na(Score),unique(ID)])]

# or 

DT[,if(any(is.na(Score))) {.SD},by=ID] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T02:41:34.223

一种使用`ave`. `Compose`投入娱乐：

```
require(functional)
DF[as.logical(ave(DF$Score, DF$ID, FUN=Compose(is.na, any))),]
##    ID Score
## 1  A1    60
## 2  A1    50
## 3  A1    NA
## 8  D1    21
## 9  D1    38
## 10 D1    NA 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T02:32:53.907

可能有一个稍微整洁的方法来做到这一点：

```
df <- data.frame(ID=rep(c("A1", "B1", "C1"), each=4), Score=sample(1:100,12))
df$Score[c(1,7)] <- NA

df[df$ID %in% df$ID[which(is.na(df$Score))],] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T03:16:23.960

你可以试试这个

```
 mydata<-data.frame(ID=c(rep("A1",3),rep("B1",2),rep("C1",2),rep("D1",3)),Score=c(60,50,NA,30,33,48,39,21,38,NA))

     mydata[mydata$ID%in%unique(mydata$ID)[-which(is.na(as.vector(tapply(mydata$Score,mydata$ID,FUN=function(x){match(NA,x)}))))],] 
```

# c - 分叉一个长时间运行的进程并避免调用 waitpid 来清理僵尸？

> ID：14971314
> 
> 赞同：1
> 
> 时间：2013-02-20T02:28:03.567
> 
> 标签：c, linux, fork, waitpid

我有一个长时间运行的进程（node.js），它调用 fork（作为 C++ 模块的一部分）。这会将新进程创建为 node.js 进程的子进程。但是，没有任何东西会等待/等待这个子进程，所以它在终止后仍然是一个僵尸。

是否可以在当前进程不是其父进程的情况下 fork() 一个进程，以便在终止时它不会保持在僵尸状态而是被清除？

如果不是，我能否以某种方式表明我不会对孩子调用 waitpid 并且不关心它何时终止？

如果失败了，我可以编写/找到一个可以执行 waitpid 的本机模块，但我需要确定它会：

1.  不阻塞父进程（node.js）
2.  调用模块函数后不留下任何僵尸

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T08:32:40.000

这是我用来创建守护进程的代码。注释描述*了为什么要*完成每个步骤。

```
Status daemon_init(void)
{
  pid_t pid;
  int fh;

  /*-----------------------------------------------------------------------
  ; From the Unix Programming FAQ (corraborated by Stevens):
  ;
  ; 1\. 'fork()' so the parent can exit, this returns control to the command
  ; line or shell invoking your program. This step is required so that
  ; the new process is guaranteed not to be a process group leader. The
  ; next step, 'setsid()', fails if you're a process group leader.
  ;---------------------------------------------------------------------*/

  pid = fork();
  if (pid == (pid_t)-1)
    return retstatus(false,errno,"fork()");
  else if (pid != 0)    /* parent goes bye bye */
    _exit(EXIT_SUCCESS);

  /*-------------------------------------------------------------------------
  ; 2\. 'setsid()' to become a process group and session group leader. Since
  ; a controlling terminal is associated with a session, and this new
  ; session has not yet acquired a controlling terminal our process now
  ; has no controlling terminal, which is a Good Thing for daemons.
  ;
  ; _Advanced Programming in the Unix Environment_, 2nd Edition, also
  ; ignores SIGHUP. So adding that here as well.
  ;-----------------------------------------------------------------------*/

  setsid();
  set_signal_handler(SIGHUP,SIG_IGN);   /* ignore this signal for now */

  /*-------------------------------------------------------------------------
  ; 3\. 'fork()' again so the parent, (the session group leader), can exit.
  ; This means that we, as a non-session group leader, can never regain a
  ; controlling terminal.
  ;------------------------------------------------------------------------*/

  pid = fork();
  if (pid == (pid_t)-1)
    return retstatus(false,errno,"fork(2)");
  else if (pid != 0)    /* parent goes bye bye */
    _exit(EXIT_SUCCESS);

  /*-------------------------------------------------------------------------
  ; 4\. 'chdir("/")' to ensure that our process doesn't keep any directory in
  ; use. Failure to do this could make it so that an administrator
  ; couldn't unmount a filesystem, because it was our current directory.
  ;
  ; [Equivalently, we could change to any directory containing files
  ; important to the daemon's operation.]
  ;
  ; I just made sure the name of the script we are using contains the full
  ; path.
  ;-------------------------------------------------------------------------*/

  chdir("/");

  /*-----------------------------------------------------------------------
  ; 5\. 'umask(022)' so that we have complete control over the permissions of
  ; anything we write. We don't know what umask we may have inherited.
  ;-----------------------------------------------------------------------*/

  umask(022);

  /*-----------------------------------------------------------------------
  ; 6\. 'close()' fds 0, 1, and 2\. This releases the standard in, out, and 
  ; error we inherited from our parent process. We have no way of knowing
  ; where these fds might have been redirected to. Note that many daemons
  ; use 'sysconf()' to determine the limit '_SC_OPEN_MAX'.
  ; '_SC_OPEN_MAX' tells you the maximun open files/process. Then in a
  ; loop, the daemon can close all possible file descriptors. You have to
  ; decide if you need to do this or not. If you think that there might
  ; be file-descriptors open you should close them, since there's a limit
  ; on number of concurrent file descriptors.
  ;
  ; 7\. Establish new open descriptors for stdin, stdout and stderr. Even if
  ; you don't plan to use them, it is still a good idea to have them
  ; open. The precise handling of these is a matter of taste; if you
  ; have a logfile, for example, you might wish to open it as stdout or
  ; stderr, and open '/dev/null' as stdin; alternatively, you could open
  ; '/dev/console' as stderr and/or stdout, and '/dev/null' as stdin, or
  ; any other combination that makes sense for your particular daemon.
  ;
  ; We do this here via dup2(), which combines steps 6 & 7.
  ;------------------------------------------------------------------------*/

  fh = open(DEV_NULL,O_RDWR);
  if (fh == -1)
    return retstatus(false,errno,"open(" DEV_NULL ")");

  assert(fh > 2);

  dup2(fh,STDIN_FILENO);
  dup2(fh,STDOUT_FILENO);
  dup2(fh,STDERR_FILENO);

  close(fh);

  return c_okay;
} 
```

如果你想在上下文中查看这个函数，你可以在这里查看：[https ://github.com/spc476/syslogintr/blob/master/syslogintr.c](https://github.com/spc476/syslogintr/blob/master/syslogintr.c)

# java - 在 Java 中快速搜索特定字符

> ID：14971316
> 
> 赞同：3
> 
> 时间：2013-02-20T02:28:11.740
> 
> 标签：java, performance, search, character

这可能看起来有点像一个愚蠢的问题。也许它是。但是我有一个我经常使用的功能，想知道这是否是完成这项工作的最快方法。该功能被使用了很多次，以至于任何速度的增加实际上都是显而易见的。它所做的只是检查一个字符是否是一个核苷酸（即：如果一个字符是“A”、“T”、“C”或“G”。

```
private static boolean isValidNucleotide(char nucleotide) {
    nucleotide = Character.toUpperCase(nucleotide);
    if(nucleotide == 'A') return true; 
    if(nucleotide == 'T') return true;
    if(nucleotide == 'C') return true;
    if(nucleotide == 'G') return true;
    return false;
} 
```

这是完成工作的最快方法吗？还是您认为值得实现某种索引/映射/其他东西（可能在函数之外执行比较，然后将此文本复制到代码中的几个位置）？我真的不是Java中这种事情的专家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T02:42:03.630

最快的（但内存效率最低的仍然是 255 字节还不错！）将是这样的：

```
/* this is static member of class */
static boolean map[] = new boolean[256];
static {
    for(int j = 0; j < map.length; j++)
        map[j] = false;
    /* map your required values true here */ 
    map['A'] = true;
    map['T'] = true;
    map['C'] = true;
    map['G'] = true;
    /* make small letter here too */
    map['a'] = true;
    map['t'] = true;
    map['c'] = true;
    map['g'] = true;
} 
```

然后做一个这样的函数：

```
private static boolean isValidNucleotide(char nucleotide) {
    /* complexity is just one access to array */
    return map[nucleotide];
} 
```

正如@paxdiablo 所说，java char 是 2 个字节而不是 1 个字节，但你的字符在这个范围内。通过简单地更改`return map[nucleotide];`为`return map[0x00ff & nucleotide];`应该工作。

您还可以更改地图的大小以`65536`确保安全并避免任何类型的错误。`boolean map = new boolean[65536]`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T02:30:04.380

您可以尝试 a `switch-case`，它通常实现为小型开关的表查找：

```
switch(nucleotide) {
case 'A':
case 'T':
case 'C':
case 'G':
    return true;
}
return false; 
```

`if`请注意，如果调用足够频繁，JVM 的 JIT 可能会使基于 - 的代码非常快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T02:37:32.757

摆脱`Character.toUpperCase`并检查大写和小写的情况，它将显着加快您的功能。

```
private static boolean isValidNucleotide(char nucleotide) {       
    if(nucleotide == 'A' || nucleotide == 'a') return true; 
    // Rest of your conditions

    return false;
} 
```

我用你的原始函数做了一个小测试，它平均`80 ms`需要执行`10000000 times`，但是当我删除`Character.toUpperCase()`并明确检查这两种情况时，它只需要`40 ms`，这是显着的改进。

**编辑：**

使用`Map`@Shivam Kalra 建议的解决方案只需要`11 ms`平均！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-20T02:37:51.987

我没试过，但你可以试试用正则表达式看看性能

# ruby - Rails - has_many 构建方法不保存关联

> ID：14971324
> 
> 赞同：0
> 
> 时间：2013-02-20T02:29:10.353
> 
> 标签：ruby, ruby-on-rails-3, model-associations

我在尝试使关联起作用时遇到了一些麻烦。

我的模型看起来像：

**广告.rb**

```
class Advertise < ActiveRecord::Base

  belongs_to :user
  belongs_to :country

  has_many :targets
  # has_many :hss, :through => :targets

  validates :description, :presence => true
  validates :url, :presence => true
  validates :country_id, :presence => true
  validates :kind, :presence => true

  attr_accessible :description, :hits, :url, :active, :country_id, :kind

  KINDS = {
    '1' => 'Commoditie',
    '2' => 'Service',
  }

  HS = {
    '1' => 'Section',
    '2' => 'Chapter',
    '4' => 'Heading',
    '5' => 'SubHeading 1',
    '6' => 'SubHeading 2',
  }
end 
```

**hs.rb**

```
class Hs < ActiveRecord::Base
  attr_accessible :code, :kind

  has_many :targets
  has_many :advertises, :through => :targets
end 
```

**目标.rb**

```
class Target < ActiveRecord::Base
  attr_accessible :advertise_id, :hs_id

  belongs_to :advertise
  belongs_to :hs
end 
```

`advertises_controller.rb`

```
 def new
    @advertise = Advertise.new

    @countries = Country.all
  end

  def create
    @advertise = current_user.advertises.build(params[:advertise])

    if @advertise.save
      flash[:notice] = 'Advertise created with successful'
      redirect_to root_path
    else
      render :new
    end
  end 
```

用于`form`创建新广告。

`/advertises/new.html.haml`

```
%table.table.table-striped
  %tr
    %td{:colspan => 2}= advertise.input :url, :required => true
  %tr
    %td{:colspan => 2}= advertise.input :description, :required => true, :as => :text, :input_html => { :cols => 50, :rows => 3 }
  %tr
    %td{:colspan => 2}= advertise.input :country_id, :collection => @countries, :as => :select, :label => 'Origin', :required => true
  %tr
    %td{:colspan => 2}= advertise.input :kind, :collection => Advertise::KINDS.map(&:reverse), :as => :select, :label => 'Type', :required => true
  %tr
    %td{:colspan => 2}= advertise.input_field :active, as: :boolean, inline_label: 'Active'

  =fields_for :targets do |target|
    %tr
      %td= select_tag :hs_kind, options_for_select(Advertise::HS.map(&:reverse).insert(0,'') )
      %td= target.select :hs_id, '' 
```

`hash`参数：

```
[3] pry(#<AdvertisesController>)> params
=> {"utf8"=>"✓",
 "authenticity_token"=>"fOdn4NYLg/4HXruWURZPf9DYVT4EQzbaTRTKZvX1ugY=",
 "advertise"=>
  {"url"=>"http://test.com",
   "description"=>"test",
   "country_id"=>"17",
   "kind"=>"2",
   "active"=>"1"},
 "hs_kind"=>"2",
 "targets"=>{"hs_id"=>"487"},
 "commit"=>"Create Advertise",
 "action"=>"create",
 "controller"=>"advertises"} 
```

哈希对我来说似乎没问题，但它只创建`Advertise`，而不是`target`为`advertise`关联创建。

有吗？也许是错误的模型关联。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:19:26.907

尝试改变

```
=fields_for :targets do |target| 
```

到

```
= advertise.fields_for :targets do |target| 
```

并将以下内容添加到advertise.rb

```
accepts_nested_attributes_for :targets
attr_accessible :targets_attributes  # just add targets_attributes to attr_accessible 
```

请注意，执行此操作时，没有目标的广告对象将不会显示目标字段。您必须构建一个与广告相关的新目标对象才能显示字段

```
# example: on the new action of the controller
@advertise = Advertise.new
@advertise.targets.build 
```

# actionscript-3 - flashbuilder 列表组件 - 如何添加图片 URL

> ID：14971326
> 
> 赞同：0
> 
> 时间：2013-02-20T02:29:25.907
> 
> 标签：actionscript-3, apache-flex, flexbuilder

我正在使用 flashbuilder 4.6，并且正在开发一个简单的应用程序，它使用 listcomponent 从 XML 服务（外部 URL）中提取数据，该服务在 flashbuilder 中设置了数据/服务功能。

现在我有一个相对简单的列表，它只显示 xml 项的“名称”：

```
<s:List id="list1" x="0" y="108" width="320" height="355" change="list1_changeHandler(event)"
        creationComplete="list1_creationCompleteHandler(event)" labelField="Itemname">
     <s:AsyncListView list="{getDataResult.lastResult}"/>
</s:List> 
```

...我有另一个 xml 节点/数据元素，它是缩略图的完整 URL (http:// ... .jpg)，我希望该图像与“名称”元素的左侧对齐.

我尝试使用类似下面的东西，但没有运气。我在网上找到的信息对理解 itemrenderers 并没有太大帮助（这是我认为我需要使用的）。

```
<s:List id="list1" x="0" y="108" width="320" height="355" change="list1_changeHandler(event)"
        creationComplete="list1_creationCompleteHandler(event)" labelField="Itemname">
     <s:AsyncListView list="{getDataResult.lastResult}"/>
             <mx:itemRenderer>
                 <mx:Component> 
                     <mx:Label text="Itemname"/>
                     <mx:Image source="ItemImageURL"/>
                 </mx:Component>
             </mx:itemRenderer>
</s:List> 
```

没有itemrenderers，有什么方法可以做到这一点吗？还是那是唯一的出路？我的尝试是否完全接近在列表组件中实现缩略图的正确方法？感谢有人可以在这里提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:21:39.463

您提供的代码混合了 Spark 和 MX 组件，我预计会出现编译器错误。对于初学者，您有以下问题：

*   这`mx:itemRenderer`是用于定义组件属性的语法。因此，它用于定义`s:List`组件上 itemRender 属性的值。这将导致编译器错误，因为命名空间不同。您应该指定`s:itemRenderer`。
*   `mx:Component`用于定义新的嵌入式组件。但是，您的命名空间是错误的。在 Flex 4.6 中，您应该指定 fx 命名空间，而不是 mx 命名空间。
*   有两个组件被列为`mx:Component`标签的子组件，它们应该只有 1。MX 世界中的解决方案是将标签和图像包装在一个容器中。在 Spark 世界中，itemRenderer 必须扩展[ItemRenderer](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/ItemRenderer.html)类。
*   对于文本和源，您要指定字符串文字；不是数据元素中的变量。

你有正确的想法；但错误的执行。阅读有关[创建 itemRenderers](http://help.adobe.com/en_US/flex/using/WS4bebcd66a74275c3-fc6548e124e49b51c4-8000.html)的信息。

我会像这样重写你的代码：

```
<s:List id="list1" x="0" y="108" width="320" height="355" change="list1_changeHandler(event)"
        creationComplete="list1_creationCompleteHandler(event)" >
     <s:AsyncListView list="{getDataResult.lastResult}"/>
             <s:itemRenderer>
                 <fx:Component> 
                    <s:ItemRenderer dataChange="onDataChange()">
                      <fx:Script>
                        <![CDATA[
                          protected function onDataChange():void{
                             labelDisplay.text =data.Itemname
                             imageDisplay.source = data.ItemImageURL
                          }
                        ]]>
                      </fx:Script>
                      <s:HGroup>
                       <s:Label id="labelDisplay" />
                       <s:Image id="imageDisplay" />
                      </s:HGroup>
                    </s:ItemRenderer>
                 </fx:Component>
             </s:itemRenderer>
</s:List> 
```

这是我在浏览器中编写的未经测试的代码；但它应该展示正确的方法。命名空间是正确的。有一个组件定义为 itemRenderer，它扩展了 ItemRenderer 类。当 itemRenderer 数据更改时，例如当您在列表中滚动时，显示的项目应更新。并且这两个项目的位置使它们不会显示在彼此之上。

# c++ - 在实践中，自定义 Double 类会比内置 double 慢得多吗？

> ID：14971327
> 
> 赞同：1
> 
> 时间：2013-02-20T02:29:28.250
> 
> 标签：c++

所以假设我做类似的事情

```
class Double {
  double m_double;
public:
  Double() { }
  Double(double d) : m_double(d) { }
  operator double() const { return m_double; }
  operator double&() { return m_double; }
}; 
```

也许我以后想扩展它以使 NaN 更友好一些（通过添加 bool say）等。

我的问题是，你是否认为这个 Double （以及可能的扩展）会比直接使用内置的 double 慢得多？

如果您在处理大型数据集、向量、复制/移动此类数据的向量等方面有一些经验 - 我希望您能根据您的经验给我一些关于这个主题的具体见解/指针/提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:38:47.377

现代编译器进行了出色的优化。封装在一个类中的单个标量通常与普通标量一样好。如果您在成员运营商中添加额外的检查，那么它将花费您添加的费用。如果您需要应用额外的限制来加倍，那么这是个好主意。

**示例：** `std::array<T,N>`它是......本质上只是一个数组。与原始数组相比，我未能找到证明任何开销的测试。增加的限制和类似容器的功能使其有价值。

避免让运算符静默转换为标量，例如`operator double()`. 编译器非常容易地对拼写错误应用隐式转换，并且有时可以编译缺陷。后来需要一些时间才能意识到为什么它会像现在这样工作。使转换更明确，例如`double raw() const`. 生成的代码更容易理解并且运行速度更快。

**示例：** `std::array<T,N>`不会像普通数组那样转换为指向第一个元素的原始指针。用户必须使用`&a[0]`来获取指向第一个元素的原始指针。这使得它更安全，更容易在代码中理解。它工作得很快（优化代码中的操作成本为 0）。

# smartphone - 在智能手机上查看 IBM Cognos 活动报告

> ID：14971328
> 
> 赞同：1
> 
> 时间：2013-02-20T02:29:30.777
> 
> 标签：smartphone, cognos-bi

此[链接](http://www.ironsidegroup.com/2010/12/14/ibm-cognos-10-%E2%80%93-active-reports-is-it-a-solution-for-your-organization/)表示 IBM Cognos 10 开发的活动报告无法在移动设备上呈现 [请参阅“IBM Cognos 10 活动报告是否存在任何危险信号”下的最后一行]。这是真的吗？

我的第二个问题是——我可以在不安装 IBM Cognos Mobile 的情况下通过智能手机中的普通浏览器查看活动报告吗？

开发环境：IBM Cognos BI 10.1.1 Report Studio；IOS/安卓智能手机

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:23:38.420

这取决于您的 Cognos 版本。从 10.1 初始版本开始，不支持移动设备上的 Active Reports，因此该链接对于该版本是正确的。

从 10.1 Refresh Release 1 (AKA 10.1.1) 开始，它在使用 Cognos Mobile 应用程序的 iPad 上受支持。您可以看到 Active Reports 部分已添加到 10.1.1 的 Supported Environments 页面：[http ://www.ibm.com/support/docview.wss?uid=swg27022474](http://www.ibm.com/support/docview.wss?uid=swg27022474)

# java - 从边构造一棵树

> ID：14971332
> 
> 赞同：1
> 
> 时间：2013-02-20T02:30:20.130
> 
> 标签：java, algorithm, graph, tree

如果我试图构建一个给定输入的树，每行一个边，其中一条边由它连接的两个顶点表示。是否可以使用 Node 结构/类来构造树，还是应该像图形一样将其表示为邻接列表？

我遇到的主要问题是输入的顺序。如果给我两个或多个起初根本没有连接的边，那么我有一堆没有连接的 Node 对象，而通常给你一棵树并插入树中只是使新节点成为子节点（或父节点？）另一个节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T05:17:26.017

您是否考虑过使用图数据库技术（例如 neo4j）来存储节点和边？它是可嵌入的。

我在 scala 上广泛使用嵌入式 orientdb 和 tinkerpop 蓝图来绘制图形算法。我建议您查看这些技术，因为它们使这些问题和图算法构造变得微不足道。

属性图 dbs 使用索引来允许查找类型，因此您可以找到一个节点并从那里开始遍历图。无需重新发明轮子。

主要概念是：节点、边、属性（可以存在于节点或边上。边类型（例如在社交图中“知道”）。用于确定遍历方向的出边和内边边缘。以及提到的索引，它“键入”节点并允许查找。

可以查询每个节点的入边或出边，并且可以检查边的类型和属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:48:09.573

如果您担心如何存储多个节点而不是一个根节点，一种方法是拥有一个指向 Node.js 的 N 指针数组。假设每个节点的索引为 0 到 N - 1，其中 N 是树中的节点数，您可以将第 i 个节点指针存储在数组的第 i 个元素中。

如果您将在堆栈中一次分配 N 个节点的数组（在 C/C++ 中），而不是使用指针，这种方法会更加有益。这是内存分配时间的巨大改进。

# php - 使用 ajax 更改 index.php 中的 php 变量值且无需重新加载页面

> ID：14971334
> 
> 赞同：0
> 
> 时间：2013-02-20T02:30:43.273
> 
> 标签：php, javascript, html, mysql, ajax

当单击相应的锚点时，我需要使用 ajax 将 $message1 和 $message2 加载回 index.php，以便新值显示在 index.php 中而无需重新刷新页面。这段代码按原样运行，我只是不知道该怎么做，有人可以帮我弄清楚怎么做吗？我以前从来没有写过这种类型的脚本，并且得到了一些关于如何做的建议，但我仍然很困惑。

这是我的 general.js 文件

```
$(".vote").click(function() {
var id = $(this).attr("id");
var name = $(this).attr("name");
var eData = $(this).attr("data-options");
var dataString = 'id='+ id + '&' + eData ;
var parent = $(this);

if(name=='up')
{
   $(this).fadeIn(200).html('');
   $.ajax({
      type: "POST",
      url: "up.php",
      data: dataString,
      cache: false,
      success: function(html){
         parent.html(html);
      }
   });
}
else
{
   $(this).fadeIn(200).html('');
   $.ajax({
      type: "POST",
      url: "down.php",
      data: dataString,
      cache: false,
      success: function(html){
         parent.html(html);
      }
   });
 }
 }); 
```

这是我的 index.php 中的 html

```
 <?php

 $sql = mysql_query("SELECT * FROM blogData ORDER BY id DESC");
 $sql2=mysql_query("SELECT * FROM messages WHERE mod(mes_id,2) = 0 ORDER BY mes_id DESC");
 $sql3=mysql_query("SELECT * FROM messages WHERE mod(mes_id,2) = 1 ORDER BY mes_id DESC");

 $count_variable = 0;

    while(($row = mysql_fetch_array($sql))AND($row2 = mysql_fetch_array($sql2))AND($row3 = mysql_fetch_array($sql3)) ){
        $id = $row['id'];
        $title = $row['title'];
        $content = $row['content'];
        $category = $row['category'];
        $podcast = $row['podcast'];
        $datetime = $row['datetime'];

        $message1=$row2['msg'];
        $mes_id1=$row2['mes_id'];
        $totalvotes1=$row2['totalvotes'];

        $message2=$row3['msg'];
        $mes_id2=$row3['mes_id'];
        $totalvotes2=$row3['totalvotes'];

    ?>

<table class="content">
 <tr>
 <td>

 <div id="main">
 <div id="left">
 <span class='up'><a href="" class="vote" name="up" data-options="key1=<?php echo $mes_id1;?>&key2=<?php echo $mes_id2;?>"><img src="up.png" alt="Down" /></a></span><br />
 <?php echo $totalvotes1; ?><br />
 </div>
 <div id="message">
 <?php echo $message1; ?>
 </div>
 <div class="clearfix"></div>
  </div>
 <div id="main">
 <div id="right">
 <br />
 <?php echo $totalvotes2; ?><br />
 <span class='down'><a href="" class="vote" name="down" data-options="key1=<?php echo $mes_id1;?>&key2=<?php echo $mes_id2;?>"><img src="down.png" alt="Down" /></a></span>
 </div>
 <div id="message">
 <?php echo $message2; ?>
 </div>
 <div class="clearfix"></div>
 </div>
 </td>
 </tr>
 </table>

 <?php
  }
  ?> 
```

这是我的 up.php 文件

```
 <?php

 session_start();
 include("config.php");

 $ip=$_SERVER['REMOTE_ADDR']; 

 $mes_id1 = $_POST['key1'];
 $mes_id2 = $_POST['key2'];
 $totalvotes1 = $_POST['key3'];

 $ip_sql=mysql_query("select ip_add from Voting_IP where mes_id_fk='$mes_id1' and ip_add='$ip'");
 $count=mysql_num_rows($ip_sql);

 $ip_sql2=mysql_query("select ip_add from Voting_IP where mes_id_fk='$mes_id2' and ip_add='$ip'");
 $count2=mysql_num_rows($ip_sql2);

 // if the user has already voted, execute script
 if($count==0 && $count2!=0)
 {
 $sql = "update Messages set totalvotes=totalvotes+1  where mes_id='$mes_id1'";
 mysql_query( $sql);

 $sql_in = "insert into Voting_IP (mes_id_fk,ip_add) values ('$mes_id1','$ip')";
 mysql_query( $sql_in);

 $sql = "update Messages set totalvotes=totalvotes-1  where mes_id='$mes_id2'";
 mysql_query( $sql);

 $sql_in = "DELETE FROM Voting_IP WHERE mes_id_fk='$mes_id2'";
 mysql_query( $sql_in);

 // if the user has not voted, execute script
 }
 else if($count==0 && count2==0)
 {
$sql = "update Messages set totalvotes=totalvotes+1  where mes_id='$mes_id1'";
 mysql_query( $sql);

 $sql_in = "insert into Voting_IP (mes_id_fk,ip_add) values ('$mes_id1','$ip')";
 mysql_query( $sql_in);

 }
 ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T02:49:36.237

例如，在您的第一个 Ajax 请求中，您`url`已将`up.php`

```
 $.ajax({
      type: "POST",
      url: "up.php",
      data: dataString,
      cache: false,
      success: function(html){
         parent.html(html);
      }
   }); 
```

这意味着您将从中检索数据`up.php`。Ajax 请求的工作方式是显示在 php 页面上的任何数据，在完成加载后，将作为字符串返回到发送 Ajax 请求的页面。

在您的 up.php 页面中，您没有放置任何 echo 语句或任何 html 代码。因此，您的成功函数中没有返回数据。这使得`parent.html(html)`多余。

您也不能像您指定的那样从 Ajax 请求更新一个 php 页面上的变量。您需要做的是更新 HTML 数据，或构建`up.php`页面，以便它返回一个变量，您希望在成功函数中将其设置为 Javascript 变量...。

IE

在 up.php 中，您必须再次执行 sql 语句，以检索要更改 $message 的数据，然后回显...

或多或少像这样：（我知道非常笼统）

```
$data = $_POST['ajaxRequestData'];
//do something with the data to create a new SQL statement

//do the sql statement and extract the value of $message that you're looking for
//THEN****
echo $message; 
```

接下来在您的 Ajax 成功函数中......

```
$.ajax({
      type: "POST",
      url: "up.php",
      data: dataString,
      cache: false,
      success: function(data){
         //here data will be equal to the value that you echoed in the up.php page.
         //do whatever you want to do with it... You will not have access to the php variable on this page with Javascript. 
         //Server sided languages like PHP do not talk directly with client sided languages like Javascript except with Ajax.

         updateMessage(data); //what I would do is create a function to send the variable to, to perform the necessary modifications to update your webpage.
      }
});
//Note that as soon as the success function ends, the returned data is no longer available to you 
//so you must pass it to a function (or a global variable) to be able to use it. 
```

# html - 使用 CSS 在页面上居中表单元素

> ID：14971337
> 
> 赞同：1
> 
> 时间：2013-02-20T02:31:00.710
> 
> 标签：html, css

我已经尝试了所有我知道的在 CSS 中居中元素的方法，但我无法让这些表单元素在页面上居中。

我的代码：http: [//jsfiddle.net/VJLst/1/](http://jsfiddle.net/VJLst/1/)

```
<style>
#divQuizFillBlank {
    margin-left: auto;
    margin-right: auto;
}
#textQuizFillBlankUserAnswer {
    border: 2px solid #000;
    font-size: 16px;
    font-weight: bold;
    width: 80%;
    height: 40px;
    float: left;
    box-sizing: border-box;
    vertical-align: middle;
}
#buttonQuizFillBlankSubmit {
    border: 2px solid #000;
    font-size: 20px;
    font-weight: bold;
    width: 10%;
    height: 40px;
    float: left;
    margin-left: 5px;
}
</style>

<div id="divQuizFillBlank">
<input type="text" id="textQuizFillBlankUserAnswer">
<input type="button" id="buttonQuizFillBlankSubmit" value="&gt;">
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T02:32:31.427

### 您需要设置`width`for `#divQuizFillBlank`。

该规则`margin: auto;`不适用于没有`width`. 此外，它仅适用于`block`元素，并且这些元素占据了全部可用宽度。

```
#divQuizFillBlank {
    margin-left: auto;
    margin-right: auto;
    width: 80%;
} 
```

### 更新小提琴：http: [//jsfiddle.net/praveenscience/VJLst/2/](http://jsfiddle.net/praveenscience/VJLst/2/)

# r - 时间线事件浓度

> ID：14971344
> 
> 赞同：0
> 
> 时间：2013-02-20T02:31:56.953
> 
> 标签：r, statistics, usage-statistics

给定一系列事件，是否有一种算法可以确定在某个时间段内是否发生了一定数量的事件？例如，给定用户登录列表，是否有任何三十天的时间段包含超过 10 次登录？

我可以想出一些蛮力的方法来做到这一点，只是想知道是否有这种问题的算法或名称，而我在通常的谷歌搜索中没有出现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T10:28:33.613

一般来说，它被称为*binning*。它基本上是使用*计数*作为汇总函数在索引（*例如）上聚合一个变量（**例如）。* `events` *`time`*

 **由于您没有提供数据，我将仅展示一个简单的示例：

```
# Start with a dataframe of dates and number of events
data <- data.frame(date=paste('2013', rep(1:12, each=20), rep(1:20, times=12), sep='-'),
                   logins=rpois(12*20, 5))

# Make sure to store dates as class Date, it can be useful for other purposes
data$date <- as.Date(data$date)

# Now bin it. This is just a dirty trick, exactly how you do it depends on what you want.
# Lets just sum the number of events for each month
data$month <- sub('-', '', substr(data$date, 6, 7))
aggregate(logins~month, data=data, sum, na.rm=TRUE) 
```

那是你想要的吗？**

# extjs - Sencha touch - youtube 视频作为 iframe

> ID：14971358
> 
> 赞同：0
> 
> 时间：2013-02-20T02:33:41.867
> 
> 标签：extjs, sencha-touch-2, sencha-architect

据我了解，我们无法使用`Ext.Video`组件播放 youtube 视频。所以我习惯`Iframe`将视频嵌入到我的`Ext.container`中，当我在 google chrome 中测试它时，它工作得很好。但是，当我在 Android 手机或 Android 模拟器中打开测试网址时，它无法正常工作。请参阅所附图片。

![Youtube Embed as iframe 似乎不起作用！](../Images/ecbb9e9cf2349ba0eac5adf1c9bd896e.png)

谢谢帕万

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:45:16.377

Don't try to reinvent the wheel. Try ext-ux-youtubeplayer: [http://code.google.com/p/ext-ux-youtubeplayer/](http://code.google.com/p/ext-ux-youtubeplayer/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-22T05:47:51.533

我将嵌入网址更改为 [http://www.youtube.com/embed/](http://www.youtube.com/embed/)并开始工作，但这并不好..当我改变手机方向时，它的行为确实不同..但现在它解决了我的问题

# android - 谷歌地图信息窗口阻止点击事件

> ID：14971361
> 
> 赞同：2
> 
> 时间：2013-02-20T02:33:51.890
> 
> 标签：android, google-maps

我已经实现了一个返回这个膨胀的 XML的[InfoWindowAdapter](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.InfoWindowAdapter#getInfoContents%28com.google.android.gms.maps.model.Marker%29)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:id="@+id/layoutRoot"
    android:clickable="true">

    <TextView
        android:id="@+id/titleText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:text="Medium Text"
        android:textStyle="bold"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/snippetText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Medium Text"
        android:gravity="center"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

哪个膨胀了

```
public class MarkerWindowProvider implements InfoWindowAdapter {
    private LayoutInflater lInflater;
    private InfoWindowClickListener onClick;

    public MarkerWindowProvider(Context parent, InfoWindowClickListener onClick) {
        lInflater = (LayoutInflater) parent.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        this.onClick = onClick;
    }

    @Override
    public View getInfoContents(Marker marker) {
        return null;
    }

    @Override
    public View getInfoWindow(final Marker marker) {
        View contents = lInflater.inflate(R.layout.custom_infowindow, null);
        ((TextView)contents.findViewById(R.id.titleText)).setText(marker.getTitle());
        ((TextView)contents.findViewById(R.id.snippetText)).setText(marker.getTitle());
        contents.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                onClick.onClick(marker);
            }
        });
        return contents;
    }

    public interface InfoWindowClickListener {
        public void onClick(Marker marker);
    }
} 
```

显示膨胀的布局而不是股票信息窗口，但无论我选择将 XML 膨胀到哪种方法，OnClick 方法都不会触发。

我真的需要这个功能。关于为什么这不起作用的任何想法？有什么选择吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-15T19:59:01.737

据说，您无法处理来自信息窗口内视图的任何事件。此弹出窗口不是“实时”视图，您甚至无法禁用默认背景选择器（以阻止闪烁）。很遗憾。所以不建议将按钮和文本视图用于输入。

# javascript - 如何使用 fabric.js 禁用画布元素的缩放点？

> ID：14971363
> 
> 赞同：22
> 
> 时间：2013-02-20T02:34:00.490
> 
> 标签：javascript, canvas, fabricjs

默认情况下，fabric.js 元素带有 8 个点来缩放任何对象。但是我正在使用的应用程序特别要求不允许在单个轴（水平或垂直）上进行拉伸。我只想要角点，而不是边上的点。

使用fabric.js 有可能吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2014-05-22T15:23:12.163

是的，

你可以使用`object.setControlsVisibility()`： http: [//fabricjs.com/docs/fabric.Object.html#setControlsVisibility](http://fabricjs.com/docs/fabric.Object.html#setControlsVisibility)

```
this.setControlsVisibility({
    mt: false, // middle top disable
    mb: false, // midle bottom
    ml: false, // middle left
    mr: false, // I think you get it
}); 
```

JsFiddle 示例： http: [//jsfiddle.net/Colmea/GjjJ8/1/](http://jsfiddle.net/Colmea/GjjJ8/1/)（请注意，1.4.0 版本中的“mr”控件存在一个小错误，已在 1.4.1 中修复）。

**或者**您可以使用`object.setControlVisible()`：

`object. setControlVisible('mt', false); // disable middle top control`

**注意：**这只会隐藏控件并避免拖动它们。但要避免任何规模：用途`lockScalingX`和`lockScalingY`属性。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-02-20T12:18:51.667

您可以使用`object.lockUniScaling = true`.
此外，您可以自定义角落： http: [//fabricjs.com/customization](http://fabricjs.com/customization)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-07-23T11:21:43.313

```
 imgInstance.setControlsVisibility({
         mt: false, 
         mb: false, 
         ml: false, 
         mr: false, 
         bl: false,
         br: false, 
         tl: false, 
         tr: false,
         mtr: false, 
    }); 
```

将“imgInstance”更改为您的对象。

@ [http://fabricjs.com/docs/fabric.Image.html](http://fabricjs.com/docs/fabric.Image.html)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-10-05T16:11:51.567

用它：

object.hasControls = object.hasBorders = false;

请参阅[http://fabricjs.com/customization](http://fabricjs.com/customization)

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-02-20T08:37:16.940

默认情况下你无法做到。但是您可以创建一些函数，例如：如果 width = x then height = y 在某些事件中 x 和 y 之间存在某种关系（例如“on:scaling”），您始终可以使宽度和高度保持一定的比例。

# shell - 修剪脚本的输出

> ID：14971364
> 
> 赞同：1
> 
> 时间：2013-02-20T02:34:21.510
> 
> 标签：shell, sed, trim, output

```
ping website.com -n 3 | grep Minimum 
```

会告诉你

```
Minimum = 24ms, Maximum = 62ms, Average = 36ms 
```

我要添加什么来修剪除最小 ping 之外的所有内容？只让它输出“24”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:41:52.263

您可以通过管道输出`ping`into `sed`：

```
sed 's/Minimum = \([0-9]\+\)ms.*/\1/' 
```

或者，如果您有`GNU grep`，请输入：

```
grep -oP "(?<=Minimum = )[0-9]+(?=ms)" 
```

# php - 使用 header('location: ') 是否足以对页面进行密码保护？

> ID：14971366
> 
> 赞同：0
> 
> 时间：2013-02-20T02:34:28.667
> 
> 标签：php

基本上，我正在检查用户是否已登录，如果没有，我将使用 header('location: login.php') 重定向到登录页面。

如果浏览器实际上是重定向还是服务器，我感到困惑？如果是浏览器，那么用户是否可以阻止浏览器重定向并查看页面内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:36:17.827

是的，重定向的不是浏览器，而是在将任何内容发送到浏览器之前的 php。

只需确保您在通话`exit()`后使用，`header`并且在通话之前没有任何内容输出到浏览器`header`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T02:36:54.760

服务器正在重定向。客户端浏览器通过标头修改定向到服务器发送的页面。用户无法阻止来自页面的重定向，但**能够**在该行重定向代码 header('location: login.php'); 之后看到内容

```
// print to error log before and after header redirect to show code is executed after the redirect
error_log("before redirect");
header('location: login.php');

// this will get get executed.  To prevent, exit() script immediately after the header redirect
error_log("after redirect"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T02:37:07.393

如果“足够”，您的意思是信息不会暴露给未经身份验证的任何人，即使他们嗅探网络流量，那么您绝不能将信息发送到任何未经身份验证的请求的响应正文中.

这样的事情就足够了：

```
header('location: login.php');
exit; // make sure not to echo anything in the body 
```

它将导致浏览器接收 HTTP 标头并开始对 login.php 的全新请求，同时不会在响应中显示任何敏感信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T02:38:03.133

好吧，保持简单，检查特定变量并基于它，决定重定向/显示内容是可以的......这样的事情对你有用..

```
if(your condition){
header(Location: login.php)
exit() or die() ;
}else{
show contents.....} 
```

# sql - SQL中的复数

> ID：14971368
> 
> 赞同：1
> 
> 时间：2013-02-20T02:34:44.423
> 
> 标签：sql, ms-access, grouping, aggregation

假设我有：

```
A       B  
andy    10
andy    20
andy    30
andy    40
paul    10
paul    50
ryan    3 
```

...我希望结果是：

```
A       B       C
andy    10      10
andy    20      30
andy    30      60
andy    40      100
paul    10      10
paul    50      60
ryan    3       3 
```

什么查询将为我实现这一目标？将 C 视为累积频率。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T10:02:15.227

一种方法..未经测试的建议...子选择汇总了它们匹配的相关值并且在当前行之前按顺序排列...

```
SELECT
  name as A, 
  value as B,
  ( SELECT sum(value) FROM the_table t2 WHERE t2.name=t1.name 
    AND t2.second_order_field<=t1.second_order_field ) as C
FROM the_table t1
ORDER BY t1.name,t1.second_order_field 
```

# python - Python：如何获得多个系统命令的最终输出？

> ID：14971373
> 
> 赞同：4
> 
> 时间：2013-02-20T02:35:22.777
> 
> 标签：python, subprocess

SO上有很多帖子，比如这个：[Store output of subprocess.Popen call in a string](https://stackoverflow.com/questions/2502833/python-store-output-of-subprocess-popen-call-in-a-string)

复杂的命令有问题。例如，如果我需要从中获取输出

> ps -ef|grep 某事|wc -l

子进程不会做这项工作，因为子进程的参数是[程序名称，参数]，所以不可能使用更复杂的命令（更多程序、管道等）。

有没有办法捕获多个命令链的输出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T02:42:26.703

只需将`shell=True`选项传递给子进程

```
import subprocess
subprocess.check_output('ps -ef | grep something | wc -l', shell=True) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T02:43:59.470

对于使用 subprocess 模块的无外壳、干净的版本，您可以使用以下示例（[来自文档](http://docs.python.org/2/library/subprocess.html#replacing-shell-pipeline)）：

```
output = `dmesg | grep hda` 
```

变成

```
p1 = Popen(["dmesg"], stdout=PIPE)
p2 = Popen(["grep", "hda"], stdin=p1.stdout, stdout=PIPE)
p1.stdout.close()  # Allow p1 to receive a SIGPIPE if p2 exits.
output = p2.communicate()[0] 
```

Python 程序在这里基本上做了 shell 所做的事情：它将每个命令的输出依次发送到下一个命令。这种方法的一个优点是程序员可以完全控制命令的单个标准错误输出（如果需要，它们可以被抑制、记录等）。

也就是说，我通常更喜欢使用`subprocess.check_output('ps -ef | grep something | wc -l', shell=True)`nneonneo 建议的 shell-delegation 方法：它是通用的、非常清晰且方便的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T02:39:45.293

好吧，另一种选择就是用纯 Python 实现部分命令。例如，

```
count = 0
for line in subprocess.check_output(['ps', '-ef']).split('\n'):
    if something in line: # or re.search(something, line) to use regex
        count += 1
print count 
```

# .htaccess - htaccess RewriteRule 导致错误 310 (ERR_TOO_MANY_REDIRECTS)

> ID：14971376
> 
> 赞同：1
> 
> 时间：2013-02-20T02:35:28.197
> 
> 标签：.htaccess, joomla, joomla2.5

首先，我将解释我要完成的工作。在开发过程中，我只想允许使用我自己的 IP 地址访问我的网站，而其他人将被定向到我的 offline.html

我的网站在 Joomla 上运行！2.5.9

我已将此 .htaccess 文件添加到根目录：

我已经用 123.123.123.123**替换**了我的 IP 地址，只是为了放在这里。我的 IP 地址是静态的。

```
RewriteEngine On

RewriteCond %{REMOTE_HOST}        !^123\.123\.123\.123$
RewriteCond %{REQUEST_URI}        !^offline\.html
RewriteCond %{REQUEST_URI}        !^(\.png|\.jpg|\.gif|\.jpeg|\.bmp|\.swf|\.css|\.js)$
RewriteRule ^(.*)                /offline.html    [R=307,L] 
```

当我测试通过我的 VPN 访问我的网站时，我会从 Chrome 收到以下错误消息：

错误 310 (net::ERR_TOO_MANY_REDIRECTS)：重定向太多。

之后，我看到添加了正确的 offline.html 路径，并且与 Firefox 相同，尽管错误消息略有不同：

Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。

这可能是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:11:54.310

你可以试试这个：

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /
RewriteCond %{REMOTE_ADDR}  !123\.123\.123\.123
RewriteCond %{REQUEST_URI}  !\.(png|jpg|gif|jpeg|bmp|swf|css|js)  [NC]
RewriteCond %{REQUEST_URI}  !offline\.html
RewriteRule  .*              offline.html                     [R=307,L] 
```

# c# - 从 ASP.NET 中的页面获取呈现的 HTML

> ID：14971381
> 
> 赞同：1
> 
> 时间：2013-02-20T02:36:45.683
> 
> 标签：c#, asp.net, html, webforms

您好，我有一个带有以下脚本的 html 页面 (twitter.html)

```
<script type="text/javascript" charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js"></script>
        <script type="text/javascript">
            function getParameterByName(name)
            {
              name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
              var regexS = "[\\?&]" + name + "=([^&#]*)";
              var regex = new RegExp(regexS);
              var results = regex.exec(window.location.search);
              if(results == null)
                return "";
              else
                return decodeURIComponent(results[1].replace(/\+/g, " "));
            }
            var TwitterCount = getParameterByName('TwitterCount');
            var TwitterHandleName = getParameterByName('TwitterHandleName');
            new TWTR.Widget({
                version: 2,
                type: 'profile',
                rpp: TwitterCount,
                interval: 30000,
                width: 272,
                height: 'auto',
                theme: {
                    shell: {
                        background: '#ffffff',
                        color: '#000000'
                    },
                    tweets: {
                        background: '#ffffff',
                        color: '#005A8C',
                        links: '#000000'
                    }
                },
                features: {
                    scrollbar: false,
                    loop: false,
                    live: false,
                    behavior: 'all'
                }
            }).render().setUser(TwitterHandleName).start();
        </script> 
```

如果我访问该页面

```
http://localhost/twitter.html?TwitterHandleName=billgates&TwitterCount=3 
```

我可以看到最后 3 条推文。

我想要的是从我的 aspx 页面在此页面上进行 http 发布。下面的代码仅返回脚本标签等，而不是呈现的 html。我的问题是如何获取页面的呈现 html？

```
HttpWebRequest loHttp = (HttpWebRequest)WebRequest.Create("http://localhost/twitter.html?TwitterHandleName=billgates&TwitterCount=3);
            loHttp.Timeout = 30000;    
            loHttp.UserAgent = "Twitter";
            HttpWebResponse loWebResponse = (HttpWebResponse)loHttp.GetResponse();
            //Encoding enc = Encoding.GetEncoding(1252);  // Windows default Code Page

            StreamReader loResponseStream = new StreamReader(loWebResponse.GetResponseStream());

            string htmlCode = loResponseStream.ReadToEnd();

            loWebResponse.Close();
            loResponseStream.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:34:21.777

我知道它使用的是预构建的 javascript 小部件，但是您可以使用[https://github.com/danielcrenna/tweetsharp](https://github.com/danielcrenna/tweetsharp)（可从 NuGet 获得）或[http://linqtotwitter.codeplex.com/](http://linqtotwitter.codeplex.com/)之类的 twitter 包装器将其移动到服务器端吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:39:26.030

您可以尝试将该网址打开到您网页上的框架中，并使用 javascript 从其中获取 html。

# javascript - 多个 AJAX 刷新和 TinyMCE 出现问题

> ID：14971384
> 
> 赞同：7
> 
> 时间：2013-02-20T02:37:00.843
> 
> 标签：javascript, jquery, ajax, tinymce

所以我遇到了这个困境。

```
<SCRIPT src="../js/tiny_mce/tiny_mce.js"></script>
<SCRIPT type="text/javascript">
   tinyMCE.init({
        mode : "textareas",
        theme : "simple"
   });
</SCRIPT>
<SCRIPT src="../js/admin.js"></script> 
```

以上是在我的 PHP 页面上调用的。

然后我打电话

```
var request = $.ajax(
{
   url:"getEvents.php",
   type:"POST",
   data:{'method':'showevents'},
   dataType:"html"
   }).done(function(msg){
        $('#eventlistbody').html(msg);
   }); 

   setTimeout(
        function(){
            $(".mceSimple").each(function(){
              tinyMCE.execCommand("mceAddControl",false, this.id);
           })
   },2000); 
```

这会加载一堆文本区域...... tinyMCE 将在第一次返回时加载到所有文本区域......当我单击重新加载时再次运行上述内容并返回它们不再附加 tinyMCE 的文本区域给他们。我不确定为什么它第一次而不是以后的工作。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-20T11:30:30.617

您应该在重新加载之前正确关闭 tinymce，以便能够在重新加载后重新初始化 tinymce 编辑器。这是必要的，因为 tinymce 不喜欢被拖到 dom 周围。并且初始化的编辑器实例可能有一个唯一的 id（使用 reload 将强制 tinymce 尝试初始化具有相同 id 的第二个编辑器 - 这将失败）。

**Tinymce3：** 要关闭 edtor 实例，请使用：

```
tinymce.execCommand('mceRemoveControl',true, editor_id); 
```

重新初始化使用

```
tinymce.execCommand('mceAddControl',true, editor_id); 
```

**Tinymce4：** 要关闭 edtor 实例，请使用：

```
tinymce.execCommand('mceRemoveEditor',true,editor_id); 
```

重新初始化使用

```
tinymce.execCommand('mceAddEditor',true,editor_id); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-22T04:12:50.697

对我来说 tinyMCE.remove(editor_id) 有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-17T21:03:52.523

**Tinymce4：要关闭 edtor 实例，请使用：**

```
tinymce.remove(); 
```

或指定一个唯一 ID

```
tinymce.execCommand('mceRemoveEditor',true,editor_id); 
```

**重新初始化使用**

```
tinymce.init(conftinymce); 
```

或指定一个唯一 ID

```
tinymce.execCommand('mceAddEditor',true,editor_id); 
```

# c# - 为什么 C++ fseek/fread 的性能是 C# FileStream 的 Seek/Read 的几倍

> ID：14971385
> 
> 赞同：5
> 
> 时间：2013-02-20T02:37:02.737
> 
> 标签：c#, c++, performance, filestream

我正在做非常简单的测试：

1.  有一个包含随机二进制信息的大文件，大小约为 6Gb
2.  算法使“SeekCount”重复循环
3.  每次重复都在执行以下操作：
    *   计算文件大小范围内的随机偏移量
    *   寻求该偏移量
    *   读取小块数据

**C＃：**

```
 public static void Test()
    {
        string fileName = @"c:\Test\big_data.dat";
        int NumberOfSeeks = 1000;
        int MaxNumberOfBytes = 1;
        long fileLength = new FileInfo(fileName).Length;
        FileStream stream = new FileStream(fileName, FileMode.Open, FileAccess.Read, FileShare.Read, 65536, FileOptions.RandomAccess);
        Console.WriteLine("Processing file \"{0}\"", fileName);
        Random random = new Random();
        DateTime start = DateTime.Now;
        byte[] byteArray = new byte[MaxNumberOfBytes];

        for (int index = 0; index < NumberOfSeeks; ++index)
        {
            long offset = (long)(random.NextDouble() * (fileLength - MaxNumberOfBytes - 2));
            stream.Seek(offset, SeekOrigin.Begin);
            stream.Read(byteArray, 0, MaxNumberOfBytes);
        }

        Console.WriteLine(
            "Total processing time time {0} ms, speed {1} seeks/sec\r\n",
            DateTime.Now.Subtract(start).TotalMilliseconds, NumberOfSeeks / (DateTime.Now.Subtract(start).TotalMilliseconds / 1000.0));

        stream.Close();
    } 
```

**然后在C++**中做同样的测试：

 **```
void test()
{
     FILE* file = fopen("c:\\Test\\big_data.dat", "rb");

char buf = 0;
__int64 fileSize = 6216672671;//ftell(file);
__int64 pos;

DWORD dwStart = GetTickCount();
for (int i = 0; i < kTimes; ++i)
{
    pos = (rand() % 100) * 0.01 * fileSize;
    _fseeki64(file, pos, SEEK_SET);
    fread((void*)&buf, 1 , 1,file);
}
DWORD dwEnd = GetTickCount() - dwStart;
printf(" - Raw Reading: %d times reading took %d ticks, e.g %d sec. Speed: %d items/sec\n", kTimes, dwEnd, dwEnd / CLOCKS_PER_SEC, kTimes / (dwEnd / CLOCKS_PER_SEC));
fclose(file);
} 
```

**执行次数：**

1.  C#：100-200 次读取/秒
2.  C++：25 万次读取/秒（25 万次）

**问题：**为什么在文件读取这样的微不足道的操作上，C++ 比 C# 快数千倍？

**附加信息：**

1.  我玩了流缓冲区并将它们设置为相同的大小（4Kb）
2.  磁盘已整理碎片（0% 碎片）
3.  操作系统配置：Windows 7、NTFS、一些最新的现代 500Gb 硬盘（如果没记错的话是 WD）、8 GB RAM（尽管几乎没有使用）、4 核 CPU（利用率几乎为零）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T17:53:23.553

C++ 版本的测试有一个错误——随机偏移的计算受到限制，因此只能在很短的距离内进行搜索，这使得 C++ 的结果看起来好多了。

@MooingDuck 建议了计算偏移量的正确代码：

> **rand()/double(RAND_MAX)*fileSize**

随着这种变化，C++ 和 C# 的性能变得相当 - 大约 200 次读取/秒。

感谢大家的贡献。**

# php - PHP OOP PDO 致命错误：允许的内存已耗尽

> ID：14971393
> 
> 赞同：2
> 
> 时间：2013-02-20T02:38:26.090
> 
> 标签：php, function, pdo

我收到这个错误。我使用类文件、函数文件和视图文件。致命错误：允许的内存已耗尽

```
 public function adminSearchFullName($admin_firstname,$admin_lastname){
        $adminsearchresultsfullname = array();

        try {
            $db = database::databaseConnect();

            $stmt = $db->prepare('SELECT * FROM personalinfo WHERE firstname like ? AND lastname like ? AND deleted = 0');
            $stmt->execute(array('%' . $admin_firstname . '%', '%' . $admin_lastname . '%'));

            $adminsearchresultsfullname = $stmt->fetchAll(PDO::FETCH_OBJ);

            if($stmt->rowCount() < 1){
                $adminsearchresultsfullname = null;
            }
            $db = null;
        }
        catch (PDOException $e){
            $adminsearchresultsfullname = null;
        }
        return $adminsearchresultsfullname;
    } 
```

我的功能如下所示：

```
 function adminSearchFullName($admin_firstname,$admin_lastname){
     return $adminsearchresultsfullname = adminSearchFullName($admin_firstname,$admin_lastname);
 } 
```

最后我的视图页面如下所示：

```
if(!empty ($admin_firstname) && !empty($admin_lastname)){
                    //Query and display contact details based on first and last names.

                    $adminsearchresultsfullname = adminSearchFullName($admin_firstname,$admin_lastname);
                    if ($adminsearchresultsfullname != null){
                        ?>
                        <a href="index.php">Home</a> | <a href="adduser.php">Add User</a> | <a href="viewusers.php">View Users</a> |<a href="addcontact.php">Add Contact</a> | <a href="viewcontacts.php">View Contacts</a> | <a href="searchcontact.php">Search Contact</a><br /><hr />
                        <p>Click on the name to see details of the contact.</p>

                        <table cellpadding="5">
                            <tr>
                                <td>
                                    <b>Search result</b>
                                </td>
                            </tr>

                        <?php

                        foreach($adminsearchresultsfullname as $key => $adminfoundfullname){
                            $admin_id_fullname = $adminfoundfullname->id;
                            $admin_found_fullname_firstname = $adminfoundfullname->firstname;
                            $admin_found_fullname_lastname = $adminfoundfullname->lastname;
                            ?>
                            <tr>
                                <td>
                                    <a href="contactdetails.php?id=<?php echo $admin_id_fullname; ?>"><?php echo $admin_found_fullname_firstname . ' ' . $admin_found_fullname_lastname; ?></a>
                                </td>
                            </tr>
                        <?php 
                        }?>
                        </table>
                    <?php }

                }else{
                    echo 'No record found.  Please <a href="searchcontact.php"> return</a> and try a different name.';
                } 
```

其余的以及仅查找名字和姓氏的所有其他功能都可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:37:49.407

您必须减少脚本处理的数据量，而不是增加内存限制。这就是数据库的用途。让数据库完成所有工作，然后只返回特定页面所需的数据。它很少超过 100 KB - 否则页面将太重而无法被浏览器加载。

但是，您的问题似乎只是偶然的递归，而您已经解决了。

# javascript - JavaScript 运行时错误：“$”未定义

> ID：14971394
> 
> 赞同：11
> 
> 时间：2013-02-20T02:38:32.950
> 
> 标签：javascript, jquery, html, canvas

如此经典的问题，但在寻找实际原因时却遇到了可怕的时间。通常，当我看到这个错误时，这是​​因为 jQuery 引用是在需要它的代码之后，或者返回 jQuery 链接，或者 jQuery 冲突等......到目前为止，这些似乎都不是这种情况。不幸的是，寻找这个问题的解决方案导致我在发布此类案例后发布。我敢肯定我的问题在这里同样简单，但是一个多小时的狩猎，仍然没有运气......

编辑：附加信息...解决方案文件（我已经多次重新创建试图解决这个问题。是 JavaScript Windows Store Blank App 模板，我在 Visual Studio 中执行此操作。唯一的参考文件是 Windows 库javascript 1.0，我也尝试删除它进行测试。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>HTML5 Canvas Template</title>
        <style>
            /* styles here */
        </style>
    </head>
    <body>
        <canvas id="myCanvas" width="500" height="500">
            <p>Canvas not supported.</p>
        </canvas>

        <script type="text/javascript" src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                var canvas = $("#myCanvas").get(0);
                var context = canvas.getContext("2d");

                function renderContent()
                {
                    // we'll do our drawing here...
                }

                renderContent();
            });
        </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-20T02:49:58.217

它指出**`JQuery`**引用的 URL 不正确

试试这个：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-04T18:09:40.140

我尝试了上面列出的所有内容，但在我输入此字符串之前似乎没有任何效果

```
<script src="../scripts/jquery-2.2.3.min.js" type="text/javascript"></script> 
```

在 HTML 文件的头部。所以它看起来是这样的：

```
<!DOCTYPE html>
<html>
<head>

    <!-- jQuery Reference -->
    <script src="../scripts/jquery-2.2.3.min.js" type="text/javascript"></script>

    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />

    <title>some title</title>

</head>
<body>
... 
```

js 文件位于文件夹“scripts”的下一层。最后，错误消失了，真是一种解脱！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-27T22:51:54.667

就我而言，问题是我通过 https 呈现我的页面，但我试图通过 http 请求 JQuery 文件，出于安全原因，许多浏览器都阻止了该文件。

我的解决方法是改变这个......

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script> 
```

……到这……

```
<script src="//code.jquery.com/jquery-1.9.1.min.js"></script> 
```

这会导致浏览器使用与正在呈现的页面相同的协议（http 或 https）下载 JQuery。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-06T01:22:45.803

我的一些客户遇到了这个问题，因为他们显然阻止了从 3rd 方网站加载 Javascript。所以现在我总是使用下面的代码来包含 jQuery：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
window.jQuery || 
document.write('<script type="text/javascript" src="/js/jquery-1.9.1.min.js">\x3C/script>')
</script> 
```

这样可以确保即使我的客户端阻止从 CDN 域加载 Javascript 文件，客户端仍然会从我自己的服务器下载文件，而浏览器不会阻止该文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-03T10:22:17.917

就我而言，另一个变体 - 我被迫使用代理。所以**- IE11--> InternetOptions -> Connections--> LANSettings-Proxy Server--> UseProxyServer** - 应该检查。还要检查 jQUery 脚本源的可用性，我在 VS2012 中工作的变体 - 就像在上面的例子中一样

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-04-27T21:43:02.200

我得到了同样的错误代码：

> （错误：“generateText”未定义）

...关于代码

`var bodyText=["The....now."]`

我在我的文本编辑器（Notepad++）上发现，当在变量的正上方输入多行文本时`bodyText`，如果我没有点击`return carriage`（enter==>WordWrap 关闭），只需继续输入 w/o`return carriage`并让编辑器调整文本有效吗？

必须在记事本++的设置中？？

# github - 如何在 Windows 的 github 中删除未同步的提交？

> ID：14971395
> 
> 赞同：23
> 
> 时间：2013-02-20T02:38:37.210
> 
> 标签：github, github-for-windows

我有两个使用 GitHub (Windows) 的未同步提交，但现在不想提交。我怎样才能恢复或删除它们？

![截屏](../Images/f8292f82da89877c138e0578cf25e0fb.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-20T07:42:08.813

如“[如何在 Windows 版 Github 上访问一些命令](https://stackoverflow.com/questions/12120905/how-to-reach-some-commands-on-github-for-windows)”中所述，您最好的做法是使用 git CLI（命令行界面），从“GitHub for Windows”打开一个 shell，或使用[msysgit](http://code.google.com/p/msysgit/)。

然后一个`git reset HEAD^2`（或者即使`git reset --hard HEAD^2`你真的想删除这些文件以及任何正在进行的工作）会删除这些提交（如“[如何删除未推送的 git 提交？](https://stackoverflow.com/questions/3197413/how-do-i-delete-unpushed-git-commits) ”或“[如何删除 'git commit'](https://stackoverflow.com/questions/1338728/how-to-delete-a-git-commit) ”） .

刷新后，GitHub for Windows 应该不再显示未同步的提交。

[下面的其他](https://stackoverflow.com/a/29360722/6309) [答案](https://stackoverflow.com/a/31108457/6309)提到了最近添加的“ `Undo most recent commit`”，它实现了相同的重置：

[![撤消最近的提交](../Images/df553a7e7f377654a4528d83c4d9acc6.png)](https://i.stack.imgur.com/rytP8.png)

* * *

[正如我在“ GitHub 撤消丢弃](https://stackoverflow.com/a/22346161/6309)”中提到的，“丢弃更改”功能将实现与`git reset.`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-03-31T04:39:22.037

在最新版本的 GitHub (Windows) 中，在“设置”按钮下，“同步”图标/按钮旁边有“撤消最近的提交”选项，它将处理那些未同步的提交。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-06-29T05:34:17.890

最新版本的 Windows 版 GitHUb 有这个选项。如果您有任何未同步的提交，该选项将被启用。这是来自 GitHub 的一个非常有用的更新。

![在此处输入图像描述](../Images/df553a7e7f377654a4528d83c4d9acc6.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-03-12T22:47:18.350

有一个撤消按钮。右键单击要提交的文件并选择“放弃更改”。

[https://github.com/blog/1441-undo-button-in-github-for-windows](https://github.com/blog/1441-undo-button-in-github-for-windows)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-06-16T16:25:17.863

我建议，根据问题的措辞方式以及搜索的内容，人们可能希望在通过 GitHub for Windows 菜单中的 git CLI/（“在 Git Shell 中打开”）重置时使用“FETCH_HEAD” .

进入 shell 后，运行： git reset FETCH_HEAD --hard

这会将您重置回您上次从遥控器中删除更改时的位置 - 这似乎是一些访问此页面的人想要做的事情。

# ruby-on-rails-3 - 服务器上的 500 内部服务器错误，在本地工作

> ID：14971405
> 
> 赞同：0
> 
> 时间：2013-02-20T02:39:23.413
> 
> 标签：ruby-on-rails-3, asset-pipeline

`production.log`当所有给我的都是这个时，我该如何去追踪错误？

```
11:     <%= javascript_include_tag "application" %>
12:     <%= csrf_meta_tags %>
13:     <%= yield(:head) %>
app/views/layouts/application.html.erb:10:in `_app_views_layouts_application_html_erb__4417234491726047977_45250520'
app/controllers/docs_controller.rb:27:in `index'
Processing by ErrorsController#broken as HTML
Rendered errors/broken.html.erb within layouts/application (0.5ms)
Completed 500 Internal Server Error in 16ms 
```

仅供参考：第 10 行`application.html.erb`是`<%= stylesheet_link_tag "application", :media => "all" %>`所以我假设它与我的 CSS 或我的 gemfile 有关。我该如何进一步调查？

另外，我的gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.12'
gem 'json', '1.7.7'
gem 'mysql2'

group :assets do
  gem 'coffee-rails'
end

group :development do
  gem 'better_errors'
  gem 'binding_of_caller'
  gem 'meta_request'
end

group :development, :test do
  gem 'rspec-rails'
  gem 'steak'
  gem 'factory_girl_rails'
end

gem 'sass'
gem 'less-rails'
gem 'less-rails-bootstrap'
gem 'jquery-rails'
gem 'devise', '>= 2.1.2'
gem 'cancan'
gem 'paperclip', '~> 3.0'
gem 'therubyracer'
gem 'yaml_db'
gem 'passenger'
gem 'capistrano'
gem 'prawn'
gem 'bootstrap-wysihtml5-rails'
gem 'turbolinks'
gem 'jquery-turbolinks'
gem 'kaminari'
gem 'truncate_html'
gem 'rails3-jquery-autocomplete'
gem 'whenever'
gem 'impressionist'
gem 'acts_as_list'
gem 'acts_as_indexed'
gem 'state_machine'
gem 'exception_notification'
gem 'public_activity' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:11:33.370

我的 gemfile 需要`uglifier`，它是用另一个 gem 的旧版本导入的。

```
gem 'uglifier' 
```

修复。

# python - 本地机器上的python udp socket.timeout

> ID：14971406
> 
> 赞同：1
> 
> 时间：2013-02-20T02:39:40.637
> 
> 标签：python, sockets, udp, socket-timeout-exception

所以我正在制作一个使用 UDP 进行分配的基本“ping”应用程序，除了 socket.settimeout() 的实现之外，一切都在工作。我似乎无法弄清楚为什么，但这与绑定的套接字有关。这可能只是 Python 中的一个怪癖，但我想在记录之前确认它。我不是在寻找功能代码答案（那是作弊），而是为什么我所拥有的东西被破坏了。（例如：Python不喜欢同一台机器上的客户端/服务器等一些未记录的原因）

Python 套接字超时详细信息： http: [//docs.python.org/2/library/socket.html#socket.socket.settimeout](http://docs.python.org/2/library/socket.html#socket.socket.settimeout)

在下面的代码中，与运行在同一台机器上的服务器的通信是成功的，但前提是客户端没有绑定到套接字。但是如果它没有绑定到套接字，超时系统就会失败（这是通过关闭服务器来测试的，其中所有十个超时都会立即打印出来）。

注意：代码并不理想，但这是网络理论课而不是编程课。它只需要最终起作用。我现在可以交出并获得 A，但我想了解为什么超时功能不起作用。

**编辑：**为了澄清一个问题，在客户端使用 Bind 是在我意识到 UDP 不需要它之前看到服务器代码之后使用它，但它恰好使超时功能正常工作，但破坏了正常操作。socket.settimeout() 声明可能只适用于 TCP 吗？

客户端代码（有超时）：

```
import socket
import time
import select

data = "Re-verify our range to target... one ping only. \n"

addrDest = ("127.0.0.1",8675)
addrLocal = ("127.0.0.1",12345)

totalTime = 0
averageTime = 0
totalPings = 0
#timeout_seconds = 1.0

UDPSock = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)
UDPSock.bind(addrLocal) 
# adding bind here even though it's UDP makes timeout work,
# but breaks normal functionality
UDPSock.settimeout(1)

while (totalPings < 10):
 totalPings = (totalPings + 1)
 start = time.clock()
 str_list = []
 str_list.append(str(totalPings))
 str_list.append(" ")
 str_list.append(str(start))
 str_list.append(" ")
 str_list.append(data)
 dataOut = ''.join(str_list)
 UDPSock.sendto(dataOut,addrDest)
 try:
      dataIn,addrIn = UDPSock.recvfrom(1024)
      print dataIn.strip(),"\n",addrIn
      elapsed = ((time.clock() - start) * 1000)
      print elapsed, " ms round trip"
 except socket.error:
      print "Connection timed out for Packet #", totalPings 
```

服务器代码：

```
import socket

UDPSock = socket.socket(socket.AF_INET,socket.SOCK_DGRAM)

# (to all IP addresses on this system)
listen_addr = ("",8675)
UDPSock.bind(listen_addr)

# Report on all data packets received and
# where they came from in each case (as this is
# UDP, each may be from a different source and it's
# up to the server to sort this out!)
while True:
    data,addr = UDPSock.recvfrom(1024)
    print data.strip(),addr
    UDPSock.sendto(data,addr) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T06:57:04.767

为什么需要绑定到客户端的本地地址？客户端在任何时候也会充当服务器吗？如果没有，则根本不需要绑定客户端。仅当您需要客户端充当服务器时才需要特定端口，如果您不调用 bind 它将创建一个随机端口，范围为（保留 0 - 1023）1024 - 65535（如果我没记错的话）和这将是 UDP 数据包中的源端口，源地址是客户端运行的地址。

根据伯克利套接字

```
bind() assigns a socket to an address. When a socket is created using socket(), 
it is only given a protocol family, but not assigned an address. This association with an address must be performed with the bind() system call before the socket can accept connections to other hosts 
```

如果这是一个网络类项目，并且您正在尝试实现客户端-服务器体系结构，那么您不应该从客户端代码中调用**bind**，因为客户端不应该充当服务器，客户端应该连接到侦听服务器，而不是连接到客户端的服务器。

**更新：**

可能需要从 TCP 客户端-服务器设计而不是 UDP 客户端-服务器模型调用绑定，因为 UDP 是一种发送后忘记的设计，并且没有低级别的数据包发送成功确认。UDP 数据包本身将具有源地址和端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:53:37.903

我通过删除异常处理找到了问题的原因。关闭服务器时出现套接字错误，特别是“socket.error：[Errno 10054] 现有连接被远程主机强制关闭”当它尝试从套接字读取时。当套接字未在 Python 中绑定时，这显然忽略了超时函数（这就是我绑定它时超时起作用的原因）。如果我运行服务器，但只是让它不发送任何数据（通过注释最后一行），程序在没有收到返回的数据包时正确超时。我还将使用更具体的异常处理程序最后，这只是 Python 中的一个怪癖，而 UDP 是无连接的事实。

另外，有人提到使用“选择”来解决这个问题。我调查了一下，我最终会得到一个 if...else 语句块，它有点工作，但首选本机异常。谢谢大家。

-吉米

# c# - 每次数据上下文更改时是否都会创建自定义用户控件？

> ID：14971413
> 
> 赞同：0
> 
> 时间：2013-02-20T02:40:11.620
> 
> 标签：c#, .net, wpf, xaml

这是一个更普遍的问题......我有一个我编写的用户控件（用户控件，而不是自定义控件）。我在 DataGridColumn 中使用这个控件来提供查找功能。就像这样：

```
 <DataGridTemplate ColumnHeader="Company">
                   <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <lookupCtl:LookUpCTL SelectedCompany="{Binding Company, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                           CompanyChangedCommand="{Binding DataContext.CompanyChangedCmd, RelativeSource={RelativeSource AncestorType=DataGrid}}"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn> 
```

我注意到的是，每当父/包含控件的 dataconext 更改时，就会调用 LookUpCTL 的构造函数。这是预期的行为吗？无论如何要防止这种情况？因为我不明白为什么这有必要......控件的单个实例应该能够从我认为的数据上下文中刷新自己。

编辑：谷歌搜索没有提供任何明确的答案......但从我读过的内容来看，问题可能是Datagrid。由于我的控件在数据网格中使用，每次网格的 itemsource 更改时，它会破坏并重新创建控件吗？我可以看到这样做的意义..但不确定这是否是我所看到的原因。假设它是......有没有办法让数据网格重用用户控件的实例，而不是在数据网格的 itemsource 更改时创建新实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:13:45.847

看起来，当数据网格的 itemsource 发生更改时，用作数据网格的 DataTemplate 列的用户控件被破坏并重新创建的原因。就我而言，解决方案是使用普通网格，因为我的列表中始终有 4 个项目用作网格的 itemsource。这不是理想的，也不是 N 项列表的解决方案。但在我的情况下，它极大地提高了性能，因为我的用户控件在初始化缓存数据时执行了一些密集的数据库查找。

# jquery - MVC 4 和捆绑包

> ID：14971415
> 
> 赞同：1
> 
> 时间：2013-02-20T02:40:25.253
> 
> 标签：jquery, asp.net-mvc, client-side-validation

在我的本地机器上，这个脚本标签效果很好。它包括几个脚本

```
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

全部来自我的 bundles.config 文件中的这一行。

```
bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
    "~/js/jquery.unobtrusive*",
    "~/js/jquery.validate*")); 
```

在联系表单（这是一个非常小的站点）上，当我单击“提交”按钮时，验证发生在客户端，除非填写了所有必填字段，否则不会提交表单。我可以验证我的所有脚本需求正在加载。

但是，当我发布站点时，不会发生“未找到”错误，但它不会加载任何 jquery.unobtrusive 或 jquery.validate 脚本。如果您单击联系表单上的提交，该页面会执行服务器往返，这不是我想要的。

如果我通过标签手动添加脚本并重新加载页面，则验证发生在客户端。

我已经验证了路径是正确的，并且 Chrome 没有报告任何丢失的文件等。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:49:44.747

您使用的是什么版本的 JQuery？

我过去使用 JQuery 1.9.0 也遇到过类似的问题。

如果你有同样的情况，你可以查看这个[帖子](https://stackoverflow.com/questions/14402741/jquery-1-9-0-and-modernizr-cannot-be-minified-with-the-asp-net-web-optimization)。

# c# - 过滤实体框架可枚举的 Distinct 属性

> ID：14971416
> 
> 赞同：0
> 
> 时间：2013-02-20T02:40:37.083
> 
> 标签：c#, wpf, entity-framework, filter

以下语句不返回不同的值，而是返回整个列表：

```
 public ObservableCollection<MasterPartsList> ParentAssemblyBOM
    {
        get
        {
            var enumerable = this._parentAssemblyBOM
                                    .Where(parent => parent.isAssy == true).Distinct();
            return new ObservableCollection<MasterPartsList>(enumerable) ;

        } 
```

真的，我应该只能说该对象是唯一的，因为 this._parentAssemblyBOM.partNumber 将是不同的属性。我如何在这个逻辑中工作以产生正确的结果？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:46:28.583

尝试按标识符（在您的情况下是零件号）分组，然后选择组中的第一个：

```
 var enumerable = this._parentAssemblyBOM
                                .Where(parent => parent.isAssy == true)
                                .GroupBy(x => x.partNumber)
                                .Select(x => x.FirstOrDefault()); 
```

# java - 如何为我的以下 java 代码绘制 UML 类图？

> ID：14971419
> 
> 赞同：2
> 
> 时间：2013-02-20T02:41:09.090
> 
> 标签：java, uml, class-diagram

我有一个抽象流程类

```
Abstract class **A** 
```

它有成员函数`run()`

类**B,C,D,E**继承自抽象类**A**。

我有一个名为**F** (ProcessFactory) 的类，它有一个名为的函数，该函数`getProcess()`接受参数并给出指定类型的进程对象的一个​​实例。

现在另一个名为**G**的类使用**F类并获取****B、C、D、E**类的实例并对其进行处理。

如果有人可以为上述场景提供 UML 类图，我会很高兴。由于我的类涉及线程，所以有什么可以在 UML 中显示线程相关类的内容吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:27:47.413

UML 类图是静态图，因此它不关心类是线程、进程还是猴子。一切都是一个类，它具有属性和方法。您可以声明它`A`从线程继承，但这就是您可以说的关于线程的全部内容。所以你会得到这样的东西：

![在此处输入图像描述](../Images/e9e3c76181278697728844c575daae37.png)

*   **编辑**：请参阅下面的评论以进行澄清。

# objective-c - 保存 NSDocument 时收到通知

> ID：14971421
> 
> 赞同：1
> 
> 时间：2013-02-20T02:41:10.403
> 
> 标签：objective-c, cocoa, nsdocument, autosave

如何在`NSDocument`保存、第一次和后续时间时收到通知？

我首先认为覆盖`writeToURL:ofType:error:`会做到这一点，但似乎在第一次保存文档之前也调用此方法进行临时自动保存，并且可能在复制/复制操作时调用。

另一方面，`setFileURL:`似乎在第一次保存文档时被调用，但在随后的时间里却没有。

是否有某种保存通知？还是我必须解决上述方法的各种边界情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T12:22:29.297

`NSDocument`具有[writeSafelyToURL::::](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/nsdocument_Class/Reference/Reference.html#//apple_ref/occ/instm/NSDocument/writeSafelyToURL%3aofType%3aforSaveOperation%3aerror%3a)，除了目标位置 URL 之外，它还获取传入的 NSSaveOperationType。
这将允许您过滤掉自动保存操作。

覆盖时不要忘记调用超级实现`writeSafelyToURL`。

# javascript - 我如何用 jQuery 写这个更短的代码？

> ID：14971427
> 
> 赞同：1
> 
> 时间：2013-02-20T02:42:10.183
> 
> 标签：javascript, jquery

有人能帮我吗。我想把这段代码写得更好更短。那么我该如何写这个更短更好的jQuery代码片段呢？

```
$("#empty_trash").click(function() {
    $('.wardopeskab ul').prepend('<li class="underbukser"></li>');
    $('.wardopeskab ul').prepend('<li class="underbukser"></li>');
    $('.wardopeskab ul').prepend('<li class="underbukser"></li>');
    $('.wardopeskab ul').prepend('<li class="underbukser"></li>');
    $('.wardopeskab ul').prepend('<li class="underbukser"></li>');
    $('.wardopeskab ul').prepend('<li class="underbukser"></li>');
    $('.wardopeskab ul').prepend('<li class="underbukser"></li>');
    $('.wardopeskab ul').prepend('<li class="underbukser"></li>');
    $('.wardopeskab ul').prepend('<li class="underbukser"></li>');
    $('.wardopeskab ul').prepend('<li class="underbukser"></li>');
    $('.wardopeskab ul').prepend('<li class="t-shirt"></li>');
    $('.wardopeskab ul').prepend('<li class="t-shirt"></li>');
    $('.wardopeskab ul').prepend('<li class="t-shirt"></li>');
    $('.wardopeskab ul').prepend('<li class="t-shirt"></li>');
    $('.wardopeskab ul').prepend('<li class="t-shirt"></li>');
    $('.wardopeskab ul').prepend('<li class="t-shirt"></li>');
    $('.wardopeskab ul').prepend('<li class="t-shirt"></li>');
    $('.wardopeskab ul').prepend('<li class="t-shirt"></li>');
    $('.wardopeskab ul').prepend('<li class="t-shirt"></li>');
    $('.wardopeskab ul').prepend('<li class="t-shirt"></li>');
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T02:48:17.393

一点原始的 JavaScript 能力：

```
$('.wardopeskab ul')
    .prepend(
        new Array(11).join('<li class="underbukser">underbukser</li>') +
        new Array(11).join('<li class="t-shirt">t-shirt</li>')
    ); 
```

小提琴：http: [//jsfiddle.net/8yEhE/5/](http://jsfiddle.net/8yEhE/5/)

注意：输入的数字比写出的次数多 1 `11`。`new Array(11)`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-20T02:45:32.993

也许有一个循环？

```
$("#empty_trash").click(function() {
    var elem = $('.wardopeskab ul');

    for(var i = 0; i < 10; i++) {
        elem.prepend('<li class="underbukser"></li>');
    }

    for(var i = 0; i < 10; i++) {
        elem.prepend('<li class="t-shirt"></li>');
    }
}); 
```

最好不要使用幻数；10 应该有某种名称。我不确定你要做什么，所以我不确定它会被命名为什么。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-20T02:47:26.240

使用循环、for 循环、while 循环等：

```
$("#empty_trash").click(function () {
    while ( /* Loop Condition Here */ ) {

        $('.wardopeskab ul').prepend('<li class="underbukser"></li>');

    }
    while ( /* Loop Condition Here */ ) {

        $('.wardopeskab ul').prepend('<li class="t-shirt"></li>');

    }

}); 
```

# windows - VBA7 中的 ShellExecuteEx 打印失败，访问被拒绝

> ID：14971428
> 
> 赞同：3
> 
> 时间：2013-02-20T02:42:17.577
> 
> 标签：windows, vba

我们在 Word 宏中有 VBA 代码，用于下载一个或多个文档，然后使用 Windows 功能打印它们[`ShellExecuteEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762154%28v=vs.85%29.aspx)。该代码在 Windows 2000、XP 和 7（32 位和 64 位）上的 Word 版本 97、2000、2003、2007 和 2010（32 位）中成功运行。

但在 64 位 Word 2010 和 2013 中调用`ShellExecuteEx`失败。我们更新了[MSDN 上记录](http://msdn.microsoft.com/en-us/library/ee691831%28office.14%29.aspx)并[在 Win32API_PtrSafe 文件中指定的](http://www.microsoft.com/en-au/download/details.aspx?id=9970)VBA7（64 位）声明。例如：

```
#If VBA7 Then
Type SHELLEXECUTEINFO
    cbSize As Long
    fMask As Long
    hwnd As LongPtr
    lpVerb As String
    lpFile As String
    lpParameters As String
    lpDirectory As String
    nShow As Long
    hInstApp As LongPtr
    lpIDList As LongPtr
    lpClass As String
    hkeyClass As LongPtr
    dwHotKey As Long
    hIcon As LongPtr
    hProcess As LongPtr
End Type
Declare PtrSafe Function ShellExecuteEx Lib "shell32.dll" Alias "ShellExecuteExA" _
    (sei As SHELLEXECUTEINFO) As Boolean
#End If 
```

用法是这样的：

```
Dim bReturn As Boolean
Dim sei As SHELLEXECUTEINFO

With sei
    .cbSize = Len(sei)                  ' size of the object
    .fMask = SEE_MASK_NOCLOSEPROCESS    ' indicate that we want a hProcess back
    .hwnd = GetDesktopWindow()          ' the window we are calling from
    .lpVerb = "print"                   ' print the file
    .lpFile = lpFile                    ' the file we want to print
    .lpParameters = vbNullString        ' no parameters because its a file
    .lpDirectory = vbNullString         ' use the current dir as working dir
    .nShow = SW_HIDE                    ' state of the window to open
End With

bReturn = ShellExecuteEx(sei)

If bReturn Then
    WaitForSingleObject sei.hProcess, 5000
    CloseHandle sei.hProcess
    DoEvents
Else
    MsgBox "ShellExecuteEx failed with code: " & Err.LastDllError
End If 
```

在 32 位字中它可以工作，但在 64 位字中调用`ShellExecuteEx`总是失败，返回 5 (SE_ERR_ACCESSDENIED)。我尝试了一系列标志值`fMask`（包括 SEE_MASK_NOASYNC），尝试不指定 的值`hwnd`和不同的值`nShow`，所有这些都具有相同的失败结果。

更简单的[`ShellExecute`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)函数在 32 位和 64 位 Word 中都有效，但它太不灵活了。我们想要使用`ShellExecuteEx`它是因为它在打印多个文档时更好：它使我们能够等待打印应用程序（Word、Adobe Reader 等）在发送另一个打印请求之前准备好。否则，如果应用程序未准备好，打印请求将失败。（我尝试在打印请求之间等待几秒钟，但这并不可靠。）

为什么`ShellExecute`打印文件但`ShellExecuteEx`由于访问被拒绝而失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-12T22:09:16.383

对于 64 版本的操作系统，您必须使用 LenB 而不是 Len。整个答案在这里：[http ://www.utteraccess.com/forum/office-2010-x64-bit-qu-t1914261.html](http://www.utteraccess.com/forum/office-2010-x64-bit-qu-t1914261.html)

# wordpress - 在 wordpress admin 中向媒体库添加自定义分类

> ID：14971433
> 
> 赞同：0
> 
> 时间：2013-02-20T02:42:57.030
> 
> 标签：wordpress, wordpress-theming, taxonomy, custom-taxonomy

我已经向媒体添加了一个自定义分类，它在媒体管理部分中显示为一个文本字段。我希望这是典型的复选框格式，因为它存在于自定义帖子类型管理页面中。有没有办法在函数中覆盖它以使此自定义分类显示在复选框中，以便用户可以轻松选择哪个图像属于特定分类条目？

这是我用来将分类法引入媒体库的代码：

```
 register_taxonomy('Categories',array('project', 'slides', 'attachment'), array(
    'hierarchical' => true,
    'labels' => $labels,
    'show_ui' => true,
    'query_var' => true,
    'rewrite' => array( 'slug' => 'categories' ),
  )); 
```

在第一行中，通过添加`'attachment'`到数组中，它在媒体库中添加了项目类别字段。现在我只需要将其设为包含当前分类条目的复选框列表。关于如何实现这一目标的任何想法？

我找到了这篇文章，但从未使用过过滤器，对于如何让它为我工作有点困惑：

[https://wordpress.stackexchange.com/questions/29858/adding-category-tag-taxonomy-support-to-images-media](https://wordpress.stackexchange.com/questions/29858/adding-category-tag-taxonomy-support-to-images-media)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:23:50.017

你是那里的大部分。要将分类类别呈现为特殊的 HTML 显示，例如复选框列表，最好的方法是使用内置的 WordPress Walker 类。它正是为这种事情而制作的。

[http://codex.wordpress.org/Function_Reference/Walker_Class](http://codex.wordpress.org/Function_Reference/Walker_Class)

我使用这种方法创建了一个新的“SLP_Tagalong”walker 类，该类将我的分类类别列表呈现为复选框列表（我只显示文本名称，但它可以轻松显示标记图像），只要有人编辑商店位置。

我有修改后的 Walker Class，如果你想看的话，我可以分享。我会在这里发帖，但它是 150 行。给我发个 PM，我会用这种方式回击它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T00:23:34.133

我确信沃克课程会成功，但看着手抄本让我想起了弦理论和存在主义。WP 3.5.1 的好处是，当您将分类与设置为 Hierarchal 的“附件”相关联时，该复选框默认显示在媒体库中。

耶！！

不过，这可能无法彻底回答所提出的问题，因此我将把它留给任何想要解决这个问题的人。

# servicestack - ServiceStack 工作，但 Swagger-UI 不工作

> ID：14971436
> 
> 赞同：3
> 
> 时间：2013-02-20T02:43:10.323
> 
> 标签：servicestack, swagger

我遵循了 ServiceStack (3.9.37) 教程并创建了一个空的 ASP.Net Web 应用程序并让 web 服务按预期工作：

`[http://www.somedomain.com:53032/api/metadata](http://www.somedomain.com:53032/api/metadata)`

我还链接了 Swagger-UI 包 (3.9.35)

我添加了 Plugins.Add(new SwaggerFeature()); 在 AppHost.Configure

我的问题是 Swagger-UI 不可用，正如我所期望的那样：

`[http://www.somedomain.com:53032/swagger-ui/index.html](http://www.somedomain.com:53032/swagger-ui/index.html)`

我收到带有堆栈跟踪的错误“未找到请求的处理程序：”。

我已经尝试过目标框架 4.0 和 4.5，结果相同。Visual Studio 版本是 2012

我错过了什么才能正确连接这个链接吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T06:29:59.747

发现这是一个路径问题。通过对 web.config 进行以下修改来解决：

```
//Added Location node
//path moved here
<location path="api">  // Path moved to location area !!!

<system.web>
<compilation debug="true" targetFramework="4.5"/>
<httpRuntime/>
<httpHandlers>

//Path returned to wildcard
<add path="*" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*"/>

</httpHandlers>
<pages controlRenderingCompatibilityVersion="4.0"/>
</system.web>
<system.webServer>
<modules runAllManagedModulesForAllRequests="true"/>
<validation validateIntegratedModeConfiguration="false"/>
<handlers>
<add path="*" name="ServiceStack.Factory" type="ServiceStack.WebHost.Endpoints.ServiceStackHttpHandlerFactory, ServiceStack" verb="*" preCondition="integratedMode" resourceType="Unspecified" allowPathInfo="true"/>
</handlers>
</system.webServer>
</location> 
```

# types - 我在 Dev C++ 中收到错误消息（类型为 `const double' 和 ` 的无效操作数 ' 到二进制 `operator<<' )

> ID：14971437
> 
> 赞同：-3
> 
> 时间：2013-02-20T02:43:11.100
> 
> 标签：types, double, constants, dev-c++

这是我的代码开始的地方。在代码的最底部，我将详细介绍错误点。

```
#include <iostream>
#include <iomanip>
#include <cmath>

using namespace std;

int main()
{
    //declare variables

int usedWater = 0;
int prevReading = 0;
int currReading = 0;
const double WATER_RATE = .007;
const double MIN_CHARGES = 16.67;
double totalCharges = 0.0;

cout <<"enter the current reading: ";
cin >> currReading;
cout <<"enter the previous reading: ";
cin >> prevReading;

usedWater = currReading - prevReading;

totalCharges = usedWater * WATER_RATE;

if(totalCharges < MIN_CHARGES)
{

totalCharges = MIN_CHARGES << endl;
cout << "total charges: "  << MIN_CHARGES;   

}
else
{
cout << "Total Charges : " << totalCharges;

} 

cout << "total Charges : " << totalCharges;
cout << "Used Water : " << usedWater;

system ("pause");

 return 0;
} 
```

第 36 行是我得到错误的地方。这个：（totalCharges = MIN_CHARGES << endl;）
我看不到任何拼写错误。或者可能是一些错误的词。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:50:21.440

```
totalCharges = MIN_CHARGES << endl; 
```

不确定您到底想达到什么目的，但我怀疑它会更好：

```
totalCharges = MIN_CHARGES; 
```

您当前的行试图做的是设置`totalCharges`为`MIN_CHARGES`左移位的值`endl`。即使编译器允许，那可能也不会很好结束:-)

* * *

而且，顺便说一句，您可能可以用一行代码替换大部分代码：

```
totalCharges = std::min (MIN_CHARGES, usedWater * WATER_RATE); 
```

您可能还希望在大多数语句的末尾添加换行符，`cout <<`这样您的输出就不会集中在一行中。

正确的做法通常是使用`'\n'`而不是`std::endl`因为后者强制刷新，这可能导致性能下降（尽管在这种特定情况下可能不明显）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T02:53:38.177

`<< endl`不属于此作业：

```
totalCharges = MIN_CHARGES; 
```

[`std::endl`](http://en.cppreference.com/w/cpp/io/manip/endl)是用于添加换行符和刷新流的流操纵器。`MIN_CHARGES`是一个`double` `const`值，因此这样的按位左移操作为零意义。

你可能的意思是：

```
if (totalCharges < MIN_CHARGES)
{
    totalCharges = MIN_CHARGES;
}

cout << "Total Charges : " << totalCharges; 
```

# apache - Apache 虚拟主机显示其工作但未加载正确的索引

> ID：14971439
> 
> 赞同：0
> 
> 时间：2013-02-20T02:43:30.733
> 
> 标签：apache, osx-mountain-lion, virtualhost

我正在使用此配置，并且我的 .dev 工作正常，但它的显示`it works`而不是其中的`index.php`内容是否有默认值`index.php`？

MACOSX

```
<Virtualhost *:80>
    VirtualDocumentRoot "/Users/Jess/Sites/dev/%1/"
    ServerName vhosts.dev
    ServerAlias *.dev
    UseCanonicalName Off
    LogFormat "%V %h %l %u %t \"%r\" %s %b" vcommon
    ErrorLog "/Users/Jess/Sites/dev/vhosts-error_log"

    <Directory "/Users/Jess/Sites/dev/*">
    Options -Indexes FollowSymLinks
    AllowOverride AuthConfig FileInfo
    Order allow,deny
    Allow from all
    </Directory>
</Virtualhost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:21:48.613

我相信默认文件是`/Library/WebServer/Documents/index.html`. 确保您的配置文件添加在`/etc/apache2/httpd.conf`. 像这样的东西：

```
Include /etc/apache2/users/XXXXX.conf 
```

# search - solr 4.1 java.lang.IllegalArgumentException：第一个位置增量必须 > 0（得到 0）

> ID：14971442
> 
> 赞同：3
> 
> 时间：2013-02-20T02:43:42.813
> 
> 标签：search, solr, indexing

全部！在我将我的 solr 版本更新到 4.1 后，重建索引时出现这样的错误：

```
Warning: Error creating document : SolrInputDocument[dop_pos_state=, dop_country=, dop_first_name_onlySort=Rick, dop_first_name=Rick, dop_sync_flag=true, dop_orgid=1522402, dop_last_name=King, dop_last_name_onlySort=King, dop_invite_flag=true, dop_name=Rick King, dop_metro_area=, dop_create_date=2012-12-15 08:53:55.0, dop_address=Greater Boston Area, dop_job_level=1, dop_id=343218, dop_title=at A & J Engineering Inc., dop_update_date=2013-02-19 09:38:38.0, dop_metromap_id=210, dop_facebook_linked=0, dop_linkedin_linked=0, dop_crunchBase_linked=0, dop_twitter_linked=0] 

java.lang.IllegalArgumentException: first position increment must be > 0 (got 0)
at org.apache.lucene.index.DocInverterPerField.processFields(DocInverterPerField.java:125)
at org.apache.lucene.index.DocFieldProcessor.processDocument(DocFieldProcessor.java:306)
at org.apache.lucene.index.DocumentsWriterPerThread.updateDocument(DocumentsWriterPerThread.java:250)
at org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:376) 
```

当我删除 schema.xml 中的字段 dop_title （即“在 A & J Engineering Corp.”）时，它工作正常。dop_title 的分析器如下：

```
<fieldType name="text" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.SnowballPorterFilterFactory" language="English" protected="protwords.txt"/>
    <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"/>
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.SnowballPorterFilterFactory" language="English" protected="protwords.txt"/>
    <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
  </analyzer>
</fieldType> 
```

然后我放入solr的分析页面，结果是： ![在此处输入图像描述](../Images/7b1156b04f921bcb043286d7fc0190fe.png)

这是怎么发生的，我可以通过什么方式避免这种情况？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:35:43.220

令牌处理正在从基于流的迁移到基于图形的处理。这在 Solr 4.1 中发现了一些奇怪的边缘情况。看起来你的就是其中之一（回归）。如果你愿意，你可以打开[一个问题](https://issues.apache.org/jira/browse/SOLR)，有人会看它。

同时，您可能会发现如果您勾选分析页面右侧的小“详细输出”按钮，它会显示有关管道中每个步骤的更多信息，包括位置值，这很有用。这可以帮助您更快地调试此问题和/或帮助避免它。

# java - 为什么 Ant Exec 任务返回码与 ERRORLEVEL 值不匹配？

> ID：14971444
> 
> 赞同：5
> 
> 时间：2013-02-20T02:44:09.220
> 
> 标签：java, ant, batch-file

我有一个从 Ant exec 任务调用的批处理脚本来编译一些 CSharp 代码。批处理脚本的结构如下

```
msbuild.exe %ARGS%
echo %ERRORLEVEL% 
```

现在当任务在 Ant 中运行时，我得到以下结果：

```
 [exec] Time Elapsed 00:00:09.48
 [exec] 0

 BUILD FAILED
 C:\proj\build.xml:410: exec returned: 2 
```

%ERRORLEVEL% 怎么可能是 0，但 Ant 执行程序的返回码是 2？如果命令不返回代码，这是设置了一些默认错误代码吗？蚂蚁文档显示：

```
error code 2 means 'no such program', 
```

但显然我的批处理文件正在正确执行。

**使用 Ant 代码更新**

```
<target name="build.csharp" if="isWindowsPlatform">
    <exec executable="cmd.exe" failOnError="true">
        <arg value="/c"/>
        <arg value="build.csharp.bat" />
    </exec>
</target> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T09:04:46.920

[ANT 手册](http://ant.apache.org/manual/Tasks/exec.html)指出：

> # 错误和返回码
> 
> 默认情况下，a 的返回码`<exec>`被忽略；当您设置时，`failonerror="true"`任何返回代码信号失败（特定于操作系统）都会导致构建失败。或者，您可以设置`resultproperty`属性的名称并将其分配给结果代码（当然，除非是不变性）。
> 
> 如果尝试启动程序失败并出现依赖于操作系统的错误代码，则`<exec>`停止构建，除非`failifexecutionfails`设置为`false`. 如果程序存在，您可以使用它来运行程序，否则什么也不做。
> 
> 这些错误代码是什么意思？好吧，它们依赖于操作系统。在 Windows 机器上，您必须查看文档；错误代码 2 表示“没有这样的程序”，这通常意味着它不在路径上。每当您从任何 Ant 任务中看到这样的错误时，这通常不是 Ant 错误，而是您机器上的一些配置问题。

要获取程序的返回码，您需要使用[exec 任务的](http://ant.apache.org/manual/Tasks/exec.html)**resultproperty**属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T20:30:53.850

ANT wiki 中有一篇关于此行为的文章，包括解决方案： [http ://wiki.apache.org/ant/AntOnWindows](http://wiki.apache.org/ant/AntOnWindows)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-21T08:35:55.707

我跑了一堆排列。我试过了：

*   没有最终的退出语句，只有命令
*   `exit %errorlevel%`
*   `exit /b %errorlevel%`
*   `@comspec /c exit %errorlevel%`

唯一能让 ant 看到正确错误代码的技术是`exit %errorlevel%`. 虽然脚本现在可以正常工作，但有点烦人，因为直接从命令 shell 运行它会导致 shell 之后退出。（通过作品调用脚本`cmd /c`，但很麻烦。）

我很想请一位 DOS 专家来这里解释这些结果并对其进行扩展。谢谢。

# c# - 根据列名获取数据

> ID：14971445
> 
> 赞同：1
> 
> 时间：2013-02-20T02:44:36.127
> 
> 标签：c#, for-loop

如何使用`Datarow`根据列名检索数据？我正在尝试从我的第一次循环中循环数据库数据

```
//Trying to get data
DataRow dr = dsResult.Tables[1].Rows[0];
//trying to get data successful 

//what i trying to achieve is to retrieve data from database based on rows index and 
     column name
for(int i =0; i <datagridview.Rows.Count ; i++){

   string a = dr['ColumnName'].['RowsIndex'].toString(); //Failed

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:50:14.597

```
 for (int i = 0; i < dataTable.Rows.Count; i++)
        {
            DataRow dr = dataTable.Rows[i]; //Where the RowIndex
            string a = dr[0].ToString();    //Where the ColumnIndex or ColumnName
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T03:47:56.223

尝试 ？

```
dr.Rows[RowsIndex]['ColumnName'].ToString() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T02:48:18.960

您是否尝试过删除`'columnName'`规范之后的句点，并放置`rows[i]["columnName"]`而不是`[columnName][rows]`？

# php - 通过使用 PHP 变量调用 javascript 函数

> ID：14971446
> 
> 赞同：-1
> 
> 时间：2013-02-20T02:44:55.500
> 
> 标签：php, javascript, jquery, web

在当前示例中，我设置了一个带有唯一 ID 的表单。还有一个带有唯一 ID 的链接。选择链接时，javascript 函数将以该形式淡出。是否可以根据用于标识表单和链接的 PHP 变量调用 javascript 函数？那么当它对应于表单的唯一ID时它会正确淡入淡出吗？

PHP

```
while($row = mysql_fetch_array($query)){ $form_id = $row[id]; ?><a href="#"
id="askedClick"><?php echo $row[post_text].'<br>'?></a>

<form action="<?php $curent_file ?>"
method="POST" id="<?php echo $row[id] ?>">Do you know the anwer?
    <input type="submit" value="Yes" name="<?php echo $form_id.'yes'?>"
    />
    <input type="submit" value="No" name="<?php echo $form_id.'no'?>" />
</form>
<?php } ?> 
```

JAVASCRIPT

```
 $(document).ready(function () {
     $("phpvariable").hide();
     $("#phpvariable").click(function () {
         $("#phpvariable").fadeIn(1200)
     });
 }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:54:15.863

你可以使用 id，但是给你的链接一个说“showForm”的类并使用 HTML 遍历来隐藏它后面的表单会容易得多

```
$('.showForm').click(function(){
    $(this).nextAll('form').first().fadeIn();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T02:54:31.430

您可以使用`echo`php 语句。下面的例子：

```
echo '
 $(document).ready(function () {
     $("#' . $phpvariable . '").hide();
     $("#' . $phpvariable . '").click(function () {
         $("#' . $phpvariable . '").fadeIn(1200);
     });
 });'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T13:47:59.583

我找到了一种更简单的方法，我想我应该回去把它放上来供参考

```
//Javascript
$(".testLink").click(function() {
        var linkId = $(this).attr('id');
        $("#testDiv"+linkId).fadeIn(400)
});

//PHP
for ($i = 0;$i < /*whatever*/; $i++){
?>
    <a href="#" class="testLink" id="<?php echo $i; ?>"> Click Here  </a>

    <div style="display:none;" id="<?php echo 'testDiv'.$i ?>" > 
            Unique Data                                                                              
    </div>
<?php
} 
```

在此方法中，在单击的链接和要在 javascript 中操作的元素之间创建一个唯一的 id。这样，每个链接都可以属于同一类，但每个链接都有一个与其对应元素相关联的唯一 ID，即 div、form、span 等。

# c - 需要帮助逐行读取信息，并在代码中使用它从 txt 文件中读取信息。

> ID：14971447
> 
> 赞同：0
> 
> 时间：2013-02-20T02:44:59.260
> 
> 标签：c, line, fgets, scanf

我被要求创建一个文本文件，其中包含以下格式的行。每种类型的信息（或字段）都必须用空格分隔，并且每行必须以换行符结尾：

```
Category1 LabelA 0.32 10 0.60  8
Category1 LabelX 0.24 12 0.90  4
Category2 LabelZ 0.55 14 1.50  10 
```

我被要求通读它并使用带有指针的函数来计算每个类别的整数以及所有类别的总计算。我有两个问题。

*   我应该以 \n 结束 txt 文件中的每一行还是只需按 Enter（因为通常会键入它）就足够了？
*   我应该如何从文件中读取并存储值而不修改或打开它？我对使用 fgets 或 fscanf 感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T02:51:27.627

逻辑：

*   循环while`!feof(FILE)`
    1.  `fgets()`1 行
    2.  `sscanf()`线
    3.  做你的计算！

可以优化以下代码以减少对函数的调用，但为了表达清晰，我创建了多个函数..每个函数只做 1 项工作：

```
#include <stdio.h>
#include <string.h>

void get_data(const char *ptr, char *category, char *label, float *f1,
          int *fint, float *f2, int *sint) //fint = first-int, sint is second int
{
  sscanf(ptr,"%s%s%f%d%f%d\n", category, label, f1, fint, f2, sint); 
}

const char *get_line(FILE *f, char *target, size_t size)
{
  fgets(target, size, f);
}

double random_calculation(float f1, int fint, float f2, int sint) 
{
  return f1 * fint + f2 * sint;
} 

int main(int argc, char *argv[])
{
  char buffer[512];
  char label[50], category[50];
  FILE *file;
  float f1, f2; 
  int fint,sint;
  double answer;
  if(argc != 2) { puts("No file!"); return 0;}
  file = fopen(argv[1], "r");//open in text mode
  if(!file) return;
  while(!feof(file)) {
    get_line(file, buffer, 511);
    puts(buffer);
    get_data(buffer, category, label,&f1,&fint, &f2, &sint);
    answer = random_calculation(f1, fint, f2, sint);
    printf(">>> %s %s: %lf\n\n", category, label, answer);
  }
  return 0;
} 
```

# ruby-on-rails - Bundler 在使用 Git 时遇到问题

> ID：14971450
> 
> 赞同：1
> 
> 时间：2013-02-20T02:45:21.603
> 
> 标签：ruby-on-rails

我已经克隆[了 Discourse](http://www.discourse.org/faq/)的 master 分支。我的共享主机对于 Ruby on Rails 来说是相当新的。它不会让我在任何使用 Git的[gem上运行 bundle install 。](http://en.wikipedia.org/wiki/RubyGems)错误：

```
Gemfile syntax error:
/home/soociali/rails_apps/Discus/Gemfile:3: syntax error, unexpected ':', expecting $end
...ctive_model_serializers', git: 'git://github.com/rails-api/a...
                          ^ 
```

Gemfile：[https ://github.com/discourse/discourse/blob/master/Gemfile](https://github.com/discourse/discourse/blob/master/Gemfile)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T17:19:45.657

这是因为您尝试运行的文件具有属于[Ruby](http://en.wikipedia.org/wiki/Ruby_%28programming_language%29) 1.9 的语法，并且您的计算机上安装了旧版本。你需要更新它。

不知道你用的是哪个操作系统。*[在 CentOS 上安装 Ruby 1.9 是 CentOS](http://www.freshblurbs.com/blog/2010/11/06/install-ruby-1-9-centos.html)*[的](http://en.wikipedia.org/wiki/CentOS)指南，它可能会让您了解如何更新它。

或使用[RVM](https://rvm.io/)。它会让你的生活更轻松。

# java - 如何通过电话线将数据发送到 ISO8583 主机（拨号 NAC），客户端是 JAVA？

> ID：14971452
> 
> 赞同：2
> 
> 时间：2013-02-20T02:45:25.983
> 
> 标签：java, iso8583

我正在构建一个用 java 编写的 ISO8583 客户端，我需要发送到 ISO8583 主机，该主机托管在具有专用电话号码（模拟）的 NAC 上。

客户端（PC）正在生成 TCP/IP 数据，理想情况下它应该呼叫电话号码并发送数据包并接收响应数据包。

我已经完成了所有 Iso8583 部件，它也适用于 IP->IP，我想知道如何设置它以在 IP(TCP) -> 模拟电话线 (HOST) 中工作。

谢谢，拉吉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T16:24:39.517

如果您使用的是 NAC，那么您不需要 TCP -> 串行线路，这是 NAC 交换机的工作，除非您正在编写自己的交换机。

交易流程是 ISO HOST -> NAC (TCP)-> NAC (Serial) -> Terminal/POS。

如果要从 PC 向 NAC 发送串行数据包，则需要将一个调制解调器连接到 PC 的串行端口并发送数据。

如果您有第三方 NAC（Ingenico，Verifone），那么您不需要调制解调器，因为它们通常会提供一个串行接口，您可以连接到 PC 以发送数据。

如果您对 C API 感兴趣（您可以轻松地将它们转换为 java），请查看 github 项目

[https://github.com/kchandan/nac_switch](https://github.com/kchandan/nac_switch)

我建议您分叉它并创建可能对其他人有用的 JAVA API。

# postgresql - 在不使用 JBoss 模块的情况下解决 postgresql 缺少依赖项或避免手动操作 jboss 托管文件

> ID：14971457
> 
> 赞同：0
> 
> 时间：2013-02-20T02:45:52.680
> 
> 标签：postgresql, jakarta-ee, maven, jboss, jboss-arquillian

我正在使用 postgresql、JBoss 7.1 和 J2EE6。我的项目结构有 1 个耳朵，1 个 JAR 持有 EJB，1 个 WAR 持有 web 前端。

我将 postgresql 驱动程序作为 JBoss 模块提供并更改standalone.xml 以引用数据源。以上一切正常。

现在我想使用 arquillian 来测试一个带有 postgres 数据源的 jboss 托管实例。我不想更改 maven 下载的 jboss，因为我想在我的应用程序中提供所有依赖项（唯一可以接受的是 JBoss 上的 Standalone.xml 中的数据源配置）。

`EarContent/lib`问题：如果我开始在项目中使用 postgresql jar ，`ear`我在启动 jboss 时会丢失/不满足依赖项，看起来 jboss 无法找到部署在里面的驱动程序`standalone/deployments`。查看网络 ppl 告诉示例如何将 postgres 驱动程序与模块一起使用，但这不是我想要做的。我想将 postgresql 驱动程序与应用程序一起发布，这样我就可以毫不费力地控制版本（并且我可以在不将模块添加到我将使用 arquillian 测试的 jboss 的情况下针对 postgres 进行测试）。

如何添加 postgres 驱动程序以与我的应用程序一起提供而不会`missing/unsatisfied`在 JBoss 中发生依赖项错误？

如果这是不可能的，我如何更改 JBoss 文件而不在每次执行`clean`目标时手动更改？比如 modules 和 standalone.xml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T02:11:37.430

在应用程序中发布驱动程序是不可能的（[JDBC 驱动程序是否应该包含在 WAR 中？](https://stackoverflow.com/questions/3770741/should-jdbc-drivers-be-included-in-a-war#comment3991125_3770773)）

我找到了解决这个问题的方法：
在 maven 中创建一个本地存储库`org.jboss.as:jboss-as-dist:7.1.1.Final`，本地存储库将有一个自定义 jboss 分发，其中所需的驱动程序作为模块（如果需要，使用不同的 artifactId/groupId）。

测试时，您将使用自定义本地存储库而不是官方存储库，然后您将完全控制在使用 arquillian 进行测试时需要哪些文件。

# ide - 哪个 IDE 支持 LESS（动态样式表语言）？

> ID：14971466
> 
> 赞同：0
> 
> 时间：2013-02-20T02:46:49.927
> 
> 标签：ide, less

如果这里有人知道哪个IDE支持LESS？我在做的时候有很多问题。

如果我犯了错误，[JavaScript](http://lesscss.org/#download)将不会呈现我的 LESS CSS；这就是为什么我需要 IDE 来纠正我的一些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:19:45.283

Scott Guthrie 刚刚宣布[在 Visual Studio 2012 中现在提供对 LESS 的一流支持](http://weblogs.asp.net/scottgu/archive/2013/02/18/announcing-release-of-asp-net-and-web-tools-2012-2-update.aspx)。我还没有尝试过，所以我不确定“一流的支持”是什么意思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T05:19:03.810

Intellij IDEA 带有插件 LESS 和另一个插件“LESS CSS Compiler”，您可以在编辑 LESS 文件时实时编译 CSS，CSS 已经输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T02:53:00.440

[IntelliJ](http://www.jetbrains.com/idea/)是业内最好的 IDE，通过插件支持 LESS CSS：

[http://plugins.jetbrains.com/plugin?pr=idea&pluginId=7059](http://plugins.jetbrains.com/plugin?pr=idea&pluginId=7059)

# matlab - MATLAB：乘以标准基的简便方法

> ID：14971469
> 
> 赞同：0
> 
> 时间：2013-02-20T02:47:35.763
> 
> 标签：matlab, linear-algebra

这似乎很容易，但我并不擅长。

我想生成以下乘以两个标准基的矩阵：

> $E_{ij}:= (e_i - e_j)(e_i - e_j)^T$

任何人都知道如何用几行来写它吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:35:20.217

假设基础中的每个向量都是大小矩阵`d x N`（向量按列排列）：

```
e1 = rand(4, 3); % random 4 x 3 matrix
e2 = rand(4, 3); 
```

那么矩阵中的每个条目，即两个单个向量之间的内积将由下式给出

```
E(i,j) = (e1(:,i) - e2(:,j))' *(e1(:,i) - e2(:,j)); 
```

相反的情况适用于`N x d`矩阵，即

```
E(i,j) = (e1(i,:) - e2(j,:)) * (e1(i,:) - e2(j,:))'; 
```

在第一种情况下，您可以通过单个单线构建整个矩阵：

```
E = (e1 - e2)' * (e1 - e2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:10:43.847

由于我们处理的是正交的标准基元素，那么

```
e_i * e_j^T 
```

是一个稀疏矩阵，除了第 - 项之外的所有`i,j`项都为零。

因此，如果`ii`和`jj`是两个基向量的索引，并且`n`是维度，那么：

```
Eij = sparse( [ii ii jj jj], [ii jj ii jj], [1 -1 -1 1], n, n ); 
```

# heroku - 用于位置数据的 Web 服务

> ID：14971472
> 
> 赞同：0
> 
> 时间：2013-02-20T02:48:02.090
> 
> 标签：heroku, geolocation, foursquare, distance, quadtree

我正在尝试在 Heroku 上设计一个 Web 服务，该服务以固定的时间间隔从许多人那里收集 GPS 位置。除了在任何特定时刻跟踪每个人的位置之外，我还希望能够查询谁在某个范围/半径内。

我知道如何使用四叉树来做到这一点，但我只是想确保没有已经这样做的附加服务，这样我就不会重新发明轮子。

任何帮助，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T05:02:05.410

[Heroku 支持](https://devcenter.heroku.com/articles/heroku-postgres-extensions-postgis-full-text-search#postgis)PostgreSQL [PostGIS](http://opengeo.org/technology/postgis/)，可以满足您的一切需求。看起来[SpatialDB](https://addons.heroku.com/spacialdb)处于私有 alpha 阶段，但您可能想尝试获得邀请。

[MongoDB 还支持空间索引](http://docs.mongodb.org/manual/core/geospatial-indexes/)，因此如果您愿意，您应该查看 Heroku 上的 MongoDB 附加组件。

# asp.net - 通过 FindControl() 的 ClientID 与 html 中的 Generated ID 不同

> ID：14971476
> 
> 赞同：0
> 
> 时间：2013-02-20T02:48:39.963
> 
> 标签：asp.net, findcontrol

我在用户控件中定义了一个文字，该文字嵌入在 aspx 中，并且本身嵌入在 Masterpage 中。

this.Parent.FindControl("litError") 将控件返回给我......但客户端 ID 是“phContent_litError”。它确实在服务器端代码上找到了控件...

当我查看生成的 HTML 时，我看到“ctl00_ctl00_phContent_litErrorPanel”

正常吗？

我的问题是因为我在我的 ajaxmanager 的 ajaxsettings 中动态添加了一个启动器控件（按钮）来更新 litError ......但是，当出现错误时，我更新了 litError.text ......但它不会在浏览器...这使我检查了 litError 控件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:55:42.310

服务器端查找控件具有按名称查找服务器控件的能力，并且正如您所观察到的，它们在页面中生成，以便唯一。是正常的。广告为什么 Ajax 控件中的字段没有更新，您需要发布更多代码。

# c# - ajax 中缺少文件：保存时的 AsyncFileUpload

> ID：14971484
> 
> 赞同：0
> 
> 时间：2013-02-20T02:49:41.467
> 
> 标签：c#, asp.net

我的 asp 文件上有一个 ajax:AsyncFileUpload

```
<asp:UpdatePanel ID="modalActLogAction" runat="server" >    
      <ajax:AsyncFileUpload ID="fuActionAttachment" runat="server" Width="240px" OnClientUploadComplete = "OnClientUploadCompleteFn"/>
</asp:UpdatePanel> 
```

问题是当我在提交文件后尝试访问时，它是空的。

```
if(fuActionAttachment.HasFile)
   {
      //save statement
   } 
```

我试图`enctype="multipart/form-data" method="post"`在我的母版页中添加我的表单标签，但仍然无法正常工作。在我的其他页面上，我确实有相同的文件上传方法并且它们工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:00:19.407

文件上传在更新面板中无法正常工作......这是众所周知的问题......

试试这个：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
<ContentTemplate>
<asp:Panel ID="pnlUploadImage" runat="server">
<asp:FileUpload ID="fuldImage" runat="server"></asp:FileUpload>

<asp:LinkButton ID="btnbUpload" runat="server" onclick="btnbUpload_Click">Add</asp:LinkButton>
</asp:Panel>

</ContentTemplate>
<Triggers>
<asp:PostBackTrigger   ControlID="btnbUpload"/></Triggers>
</asp:UpdatePanel> 
```

# layout - Ring / Jetty中的自动代码重新加载

> ID：14971489
> 
> 赞同：5
> 
> 时间：2013-02-20T02:49:49.153
> 
> 标签：layout, asynchronous, clojure, jetty, ring

将 Ring / Jetty 与 Clojure 一起使用，当我对代码进行任何更改时，我必须重新加载整个 JVM。

有没有办法让 Jetty 与我的代码更改保持异步，所以我可以简单地刷新浏览器窗口并立即获取更改？

具体来说，我正在使用 Hiccup 进行 HTML 解析，它主要是我正在制作的布局更改。

如果布局更改被自动编译并在刷新时在浏览器中可用，那将是一个巨大的节省时间。

有人有这方面的信息吗？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T04:14:41.883

您可能想专门查看[lein-ring](https://github.com/weavejester/lein-ring)`:auto-reload?`和`:auto-refresh?`选项。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-20T09:19:34.610

作为 ring 中自动重新加载功能的替代方案，如果您使用的是启用 repl 的开发系统，例如 emacs + nrepl 或逆时针（如果不这样做，您应该尝试一个看看它的不同之处），您可以直接从编辑器重新评估特定定义或文件到正在运行的系统中。IMO 这是一个比保存+（自动）重新加载要好得多的工作流程。我使用 emacs/nrepl.el 并且我从来没有使用过自动重新加载。

# c# - WCF 服务在第一次加载时响应 413

> ID：14971490
> 
> 赞同：1
> 
> 时间：2013-02-20T02:49:51.400
> 
> 标签：c#, asp.net, wcf, wcf-binding

我有一个令人费解的问题，我找不到答案。我正在尝试将大量数据上传到 WCF 服务，它会在第一次和后续尝试中返回 413 错误，直到在接受大数据请求后发送低于 64kb 限制的请求。我已经在绑定中扩展了 maxReceivedMessageSize 和 maxStringContentLength 元素，这解决了在初始小请求之后发送请求时的问题（如果这些没有扩展，则返回不同的错误 400 而不是 413）。

我的系统是在 IIS 7 上运行的 ASP.NET 3.5 应用程序，WCF 服务使用自定义绑定、SOAP 消息和客户端/服务器证书。

基本上重现的顺序如下（在2台服务器上测试）

*   IIS7 工作进程启动
*   发送大于 64kb 的请求：返回 413 错误
*   发送任何大于 64kb 的请求：返回 413 错误
*   发送小于 64kb 的请求：返回 200 和有效的肥皂响应
*   发送大于 64kb 的请求：返回 200 和有效的肥皂响应

如果 maxReceivedMessageSize 和 maxStringContentLength 元素没有增加，则会发生以下情况：

*   IIS7 工作进程启动
*   发送大于 64kb 的请求：返回 413 错误
*   发送任何大于 64kb 的请求：返回 413 错误
*   发送小于 64kb 的请求：返回 200 和有效的肥皂响应
*   发送大于 64kb 的请求：返回 400 错误

调试表明，当收到 413 错误时，服务器并没有真正初始化我的服务，一旦有一个小请求进来，它就会被初始化并注意我的绑定规则，然后允许大量数据。

我怀疑这是 WCF 库中的一个问题，可以通过升级来解决，但这并不是一个真正的选择，需要解决。我在考虑如何在应用程序启动时初始化有问题的服务，或者以某种方式增加默认的 WCF 最大接收字节数

从我的 web.config：

```
<system.web>
    <httpRuntime maxRequestLength="65536" executionTimeout="1800"/>
</system.web>
<system.webServer>
    <security>
        <requestFiltering>
            <requestLimits maxAllowedContentLength="67108864" />
        </requestFiltering>
    </security>
</system.webServer>
<system.serviceModel>
    <services>
        <service behaviorConfiguration="ServiceTlsBehavior" name="ELSLookupServiceTLS">
            <endpoint address="" binding="customBinding" bindingConfiguration="TlsBinding" contract="Lookup" />
        </service>
    </services>
    <bindings>
        <customBinding>
            <binding name="TlsBinding" closeTimeout="00:04:00" openTimeout="00:12:00" receiveTimeout="00:15:00" sendTimeout="00:05:00">

                <textMessageEncoding>
                    <readerQuotas maxStringContentLength="2147483647" maxArrayLength="2147483647" />
                </textMessageEncoding>
                <httpsTransport requireClientCertificate="true" maxReceivedMessageSize="6553600" maxBufferPoolSize="6553600" maxBufferSize="6553600" />
            </binding>
        </customBinding>
    </bindings>
    <behaviors>
        <serviceBehaviors>
           <behavior name="ServiceTlsBehavior">
                <serviceMetadata httpGetEnabled="false" httpsGetEnabled="true" />
                <serviceDebug includeExceptionDetailInFaults="true" />
                <dataContractSerializer maxItemsInObjectGraph="6553600"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
 </system.serviceModel> 
```

我的服务实施：

```
[ServiceBehavior(AddressFilterMode = AddressFilterMode.Any)]
public class ELSLookupService : Lookup
{
     //serivce call implemented here
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T06:43:05.657

好的，找到了问题，如果有人在这里遇到这个问题，为了参考起见：错误与初始 SSL 流量和 IIS 相关，并且似乎与 WCF 无关（我可能错了）。

必须增加 IIS 中的 uploadReadAheadSize 设置。

在 IIS7 中，您可以在 serverRuntime 元素下的 web.config 中扩展它，请参阅： [http ://www.iis.net/configreference/system.webserver/serverruntime](http://www.iis.net/configreference/system.webserver/serverruntime)

在 IIS6 中，它也可能会弹出，它显然是每个站点设置的 IIS。

# asp.net-mvc - 从 n 层 ASP.Net MVC 应用程序的服务层处理或抛出异常的适当方法是什么？

> ID：14971499
> 
> 赞同：5
> 
> 时间：2013-02-20T02:50:38.913
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4, exception-handling

我有一个三层的 Web 应用程序：Web > Services > Core。服务有一堆帮助 Web 构建和解释视图模型的业务逻辑。有时服务层可能会出现问题，用户应该被推送到错误页面。

在 MVC 应用程序的服务层应该如何实现错误处理？例如：

```
public void DeleteOrder(int orderId)
{
    var order = _db.Order.FirstOrDefault(c => c.OrderId == orderId);
    if (order == null)
    {
        // error handling
    }

    _db.Orders.Remove(order);
    _db.SaveChanges();
} 
```

那个 isNull 块会发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T03:26:26.790

通常，您会将异常处理代码放在控制器中。在您的术语中，我假设 MVC 控制器位于您的“Web”层中，并且这些控制器调用您的“服务”层中的方法，例如您展示的“DeleteOrder”方法。如果是这种情况，在 DeleteOrder 的错误处理代码中，您应该简单地抛出一个异常：

```
if (order == null)
{
    throw new InvalidOperationException("Specified OrderId does not exist");
} 
```

这样，未处理的异常将被传递到您的控制器，您的异常处理代码所在的位置，您可以在那里记录异常并将用户重定向到适当的错误页面。

至于如何处理控制器中的异常，您有多种选择：

1.  为每个操作方法使用 try-catch 块
2.  [通过实现OnException](http://msdn.microsoft.com/en-us/library/dd470196%28v=vs.108%29.aspx)方法在控制器类上实现[IExceptionFilter 接口](http://msdn.microsoft.com/en-us/library/system.web.mvc.iexceptionfilter%28v=vs.108%29.aspx)
3.  使用内置的[HandleErrorAttribute 异常过滤器](http://msdn.microsoft.com/en-us/library/system.web.mvc.handleerrorattribute%28v=vs.108%29.aspx)
4.  创建您自己的[自定义异常处理过滤器](http://www.codeproject.com/Articles/422572/Exception-Handling-in-ASP-NET-MVC)

第四种方法（创建自己的异常过滤器）可能是最可靠的方法。在这里，您可以添加异常日志记录，以及根据抛出的异常类型将用户重定向到适当的错误页面的代码。

[您可以在此处](http://www.prideparrot.com/blog/archive/2012/5/exception_handling_in_asp_net_mvc)找到 MVC 控制器异常处理的一个很好的概述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T03:29:28.587

抛出一个用户友好的异常是要走的路。您的控制器应该尝试/捕获调用您的服务层的代码，并通过将用户重定向到适当的错误页面来采取相应的行动。

在您展示的具体示例中，OrderNotFoundException 就可以了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T07:34:37.813

如果服务层是在 WCF 上构建的，则使用[故障契约](http://msdn.microsoft.com/en-us/library/ms752208.aspx)来传达错误/异常信息。

# java - Spring 3 with Tiles 2.2 - 模板不显示

> ID：14971506
> 
> 赞同：2
> 
> 时间：2013-02-20T02:51:11.810
> 
> 标签：java, spring, tiles

我是 Spring 3 和 Tiles 2.2.2 的新手。我正在关注[http://static.springsource.org/spring/docs/3.0.x/reference/view.html](http://static.springsource.org/spring/docs/3.0.x/reference/view.html)上的 Spring 文档来配置 Tiles，但模板没有显示在我的测试页面上。

这是我的**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>livros</display-name>
  <welcome-file-list>
    <welcome-file>formulario-login.jsp</welcome-file>  
  </welcome-file-list>

  <servlet>
    <servlet-name>springmvc</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>    
  </servlet>
  <servlet-mapping>
    <servlet-name>springmvc</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

  <filter>
     <filter-name>SetCharacterEncodingFilter</filter-name>
     <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
     <init-param>
         <param-name>encoding</param-name>
         <param-value>UTF8</param-value>
     </init-param>
     <init-param>
         <param-name>forceEncoding</param-name>
         <param-value>true</param-value>
     </init-param>
  </filter>
  <filter-mapping>
     <filter-name>SetCharacterEncodingFilter</filter-name>
     <url-pattern>/*</url-pattern>
  </filter-mapping>

</web-app> 
```

...这是我的**spring-context.xml**

```
 <mvc:annotation-driven />

    <mvc:resources location="/resources/" mapping="/resources/**"/>

    <mvc:default-servlet-handler/>

    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/views/"/>
        <property name="suffix" value=".jsp"/>
    </bean>

    <bean id="viewResolver" class="org.springframework.web.servlet.view.ResourceBundleViewResolver">
      <property name="basename" value="views"/>
    </bean>

    <mvc:interceptors>
        <bean class="br.com.coldsoft.livros.interceptor.AutorizadorInterceptor" />
    </mvc:interceptors>

    <bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
      <property name="definitions">
        <list>
          <value>/WEB-INF/tiles-defs.xml</value>
        </list>
      </property>
    </bean>
</beans> 
```

**瓷砖-defs.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE tiles-definitions PUBLIC
       "-//Apache Software Foundation//DTD Tiles Configuration 2.0//EN"
       "http://tiles.apache.org/dtds/tiles-config_2_0.dtd">

<tiles-definitions>
    <definition name="layout"
        template="/WEB-INF/templates/layout.jsp">
        <put-attribute name="title" value="Controle de Livros" />
        <put-attribute name="menu" value="/WEB-INF/templates/menu.jsp" />
        <put-attribute name="body" value="/WEB-INF/templates/body.jsp" />
        <put-attribute name="footer" value="/WEB-INF/templates/footer.jsp" />
    </definition>

    <definition name="main" extends="layout">
        <put-attribute name="title" value="Main"></put-attribute>
        <put-attribute name="body" value="/WEB-INF/views/main.jsp"></put-attribute>
    </definition>    
</tiles-definitions> 
```

**布局.jsp**

```
<html>
<head>
    <!-- Titulo Controle de Livros -->
    <title><tiles:insertAttribute name="title" ignore="true" /></title>
</head>

<body>
    <tiles:insertAttribute name="menu" />
    <tiles:insertAttribute name="body" />
    <tiles:insertAttribute name="footer" />
</body>
</html> 
```

**视图.属性**

```
main.(class)=org.springframework.web.servlet.view.tiles2.TilesView
main.url=main 
```

当我访问`http://myserver:8080/livros/main`它时，它只显示这个 main.jsp 的内容

```
<div class="container">
    <h3>Bem vindo, ${usuarioLogado.login}!!!!!!!!!!!!!!!!</h3>
</div> 
```

如何显示我在 layout.jsp 上创建的模板（它们位于 WEB-INF/templates）？

请帮帮我！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T07:42:51.777

替换为`viewResolver`：

```
<bean class="org.springframework.web.servlet.view.UrlBasedViewResolver"
      id="tilesViewResolver">
     <property name="viewClass"
               value="org.springframework.web.servlet.view.tiles2.TilesView" />
</bean> 
```

并删除`InternalResourceViewResolver`

# ios - 在演示过程中演示？尝试使用解析登录 Facebook 后显示新视图。

> ID：14971511
> 
> 赞同：7
> 
> 时间：2013-02-20T02:51:31.190
> 
> 标签：ios, objective-c, xcode

我正在尝试展示我已经为用户输入数据并保存在解析中的 UITableView。我很确定我没有显示导航视图。

当我登录时，我收到错误：

```
Checklists[4516:c07] Warning: Attempt to present <ChecklistsViewController: 0x10525e90> 
on <UINavigationController: 0x9648270> while a presentation is in progress! 
```

谢谢你的帮助。

```
#import "LoginViewController.h"
#import "ChecklistsViewController.h"
#import "SetupViewController.h"
#import <Parse/Parse.h>

@interface LoginViewController ()

@end

@implementation LoginViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    PFLogInViewController *login = [[PFLogInViewController alloc] init];
    login.fields = PFLogInFieldsFacebook;
    // Need to set the delegate to be this controller.
    login.delegate = self;
    login.signUpController.delegate = self; //signUpController is a property on the login view controller
    [self presentModalViewController:login animated:NO];

}

    - (void)logInViewController:(PFLogInViewController *)logInController didLogInUser:(PFUser *)user
{
    [self dismissModalViewControllerAnimated:YES];
    NSLog(@"Successfully logged in.");
    ChecklistsViewController *controller = [[ChecklistsViewController alloc] initWithStyle:UITableViewStylePlain];
    controller.modalTransitionStyle = UITableViewStylePlain;
    [self presentModalViewController:controller animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-20T03:07:43.177

此方法已被弃用一段时间

```
 presentModalViewController:animated: 
```

你应该改用这个

```
 presentViewController:animated:completion: 
```

这同样适用

```
 dismissModalViewControllerAnimated: 
```

现在我们使用这个

```
 dismissViewControllerAnimated:completion: 
```

当我们不想要完成块时，我们只需将其设置为 nil。

但是在您的情况下，完成块可以解决您的问题......它确保事件的正确顺序，即在解雇完成之前不会进行演示。

```
 - (void)logInViewController:(PFLogInViewController *)logInController 
                   didLogInUser:(PFUser *)user
{
    [self dismissViewControllerAnimated:YES completion:^{
        NSLog(@"Successfully logged in.");
        ChecklistsViewController *controller = 
              [[ChecklistsViewController alloc] initWithStyle:UITableViewStylePlain];
        controller.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
        [self presentViewController:controller animated:YES completion:nil];
    }];

} 
```

[NB - modalTransitionStyle 在您的原始代码中不正确，我也进行了更改。感谢[Daniel G](https://stackoverflow.com/users/1652402/daniel-g)指出这一点]

# ember.js - Ember 手动 addObserver 是否需要 removeObserver

> ID：14971513
> 
> 赞同：2
> 
> 时间：2013-02-20T02:51:48.187
> 
> 标签：ember.js

给定以下代码，我是否需要随时删除观察者？我觉得我有。。

```
App.Views.MyView = Ember.View.extend({
    init: function ()
    {
        var self = this;

        // Add observer
        self.addObserver('App.Path.To.ItemsObject', self, self._itemsObserver);

        return this._super();
    },
    _itemsObserver: function(){
        //Do something
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T07:41:14.160

是的，你必须。您可以为此任务使用**willInsertElement**和**willDestroyElement的事件。**请参阅[Ember.View 的文档](http://emberjs.com/api/classes/Ember.View.html#event_willInsertElement)

# java - Java 二维数组学生记录输入

> ID：14971514
> 
> 赞同：0
> 
> 时间：2013-02-20T02:51:58.223
> 
> 标签：java, bufferedreader

我正在学习 Java，并且我已经在这个练习上工作了 2 天。我已经在互联网上寻找答案，但我似乎找不到最好的解决我的问题的方法是： 1\. 如何存储字符串输入（如 fName、mName //或者我这样做对吗？）到一个二维数组。我见过一些示例程序，其语法如下：

```
fName = fName.getText();
lName = lname.getText(); 
```

但它们似乎不适合我正在尝试编码的内容，我也无法绕过它，因为我只是一个初学者。

1.  在所有循环之后如何打印所有输入。就像用户在“输入学生人数”中输入“4”一样，会打印4个学生信息。

这是我最初的非工作代码：

```
import java.io.*;
public class Main {
    public static void main(String[] args)throws IOException{
        BufferedReader datain = new BufferedReader (new InputStreamReader (System.in));

        String fName, lName, course, yrLevel, bDate;
        int age;
        int arr [] [];
        int size;

     System.out.print("Enter number of students: \n");
        size = Integer.parseInt(datain.readLine());
        arr = new int [size][];

        for(int a = 0; a < arr.length; a++){

        System.out.print("Enter first name: \n");
        fName = datain.readLine();
        /*insert code here to store fName to two dimensional array
        like this one? arr [0] = new int [a]; */
        System.out.print("Enter last name: ");
        lName = datain.readLine();
        System.out.print("Enter course: ");
        course = datain.readLine();
        System.out.print("Enter year level: ");
        yrLevel = datain.readLine();
        System.out.print("Enter age: ");      
        age = Integer.parseInt(datain.readLine());
    }
       /* desired output be like:
       Student 1
       Name: Bat Man
       Year Level: Graduate School
       Birthdate: Feb. 20, 2012
       Age: 7

       Student 2
       Name: Super Man
       Year Level: Masteral
       Birthdate: Jan. 1, 2012
       Age: 8
        */
        System.out.println("Name: " +arr[0][0] + " " + arr[0] [1]); //just me showing my non-working idea of printing them.
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:10:03.713

您应该创建一个存储学生详细信息的小对象，而不是使用多维数组。像这样：

```
public class Student {

    public String name;
    public String yearLevel;
    //etc...

    //constructor
    public Student(String name, String yearLevel, etc...) {
        this.name = name;
        this.yearLevel = yearLevel;
        //etc...
    }
} 
```

然后从用户输入中获取数据并使用它构建一个学生。然后学生可以存储在一个数组中：

```
Student[] students = new Student[numberOfStudents]; 
```

或者更好的是，您可以将学生存储在数组列表中，然后您不必知道所需的学生数量：

```
ArrayList<Student> students = new ArrayList<Student>(); 
```

# sql - 查询 sql“事件日志”模式

> ID：14971518
> 
> 赞同：1
> 
> 时间：2013-02-20T02:52:27.333
> 
> 标签：sql, postgresql, event-log

给定这个模式（在 postgresql-9.2 中）：

```
CREATE TABLE foo (
   id serial PRIMARY KEY,
   ...other columns elided...
);

CREATE TYPE event_type AS ENUM ('start', 'stop');

CREATE TABLE foo_event (
   id serial PRIMARY KEY,
   foo_id integer NOT NULL REFERENCES foo (id),
   timestamp timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
   type event_type NOT NULL
); 
```

我怎样才能得到所有`foo`的“跑步”？也就是说，`foo`最近事件是“开始”的`foo`s，或者更好的是，至少开始了一次并且`stop`在最后一个事件之后没有 s 的 s `start`（以防我将来添加更多事件类型）。

* * *

到目前为止，我最好的尝试是：

```
SELECT * FROM foo
 WHERE id NOT IN
 (SELECT foo_id FROM foo_event
  WHERE type='stop'); 
```

当然，这里的问题是它永远不会返回任何`foo`曾经停止过的 s。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T03:21:55.143

使用`MAX()`聚合来检索每个组的最新`start`事件`foo_id`，您可以针对子查询执行检索大于子句中事件的`LEFT JOIN`最新（也是`MAX()`）事件的子查询。在 events 子查询中查找带有s 的，表示不匹配。`stop``start``ON``NULL``stop`

```
SELECT 
  foo.*,
  fstart.*
FROM 
  foo 
  INNER JOIN (
   /* Left side gets most recent start events */
   SELECT
    foo_id, 
    MAX(timestamp) AS start_ts
   FROM
    foo_event
   WHERE event_type = 'start'
   GROUP BY foo_id
 ) fstart ON foo.id = fstart.foo_id
 /* Right side gets most recent stop events */
 LEFT JOIN (
  SELECT
    foo_id,
    MAX(timestamp) AS stop_ts
  FROM
    foo_event
  WHERE event_type = 'stop'
  GROUP BY foo_id
 /* JOIN rows that have a greater stop time than start time */
 ) fstop ON fstart.foo_id = fstop.foo_id AND fstop.stop_ts > fstart.start_ts
 /* And find rows where there's no matching stop event greater than the start */
WHERE fstop.stop_ts IS NULL 
```

### 看看那个，它确实有效！[http://sqlfiddle.com/#!12/8642d/1](http://sqlfiddle.com/#!12/8642d/1)

注意，如果停止事件可以与其相应的开始事件同时结束，请在子句中使用`>=`而不是...`>``ON`

# android-activity - 我可以使用活动最终节点在活动图中拆分活动流吗？

> ID：14971521
> 
> 赞同：1
> 
> 时间：2013-02-20T02:52:36.390
> 
> 标签：android-activity, uml, diagram, diagramming

我有一个用例图，以下是其中的一部分，需要描述我想要做什么：

![在此处输入图像描述](../Images/19ad5ec234e0b686a9391bcca2c10a41.png)

我绘制了**用旋钮**打开和用旋钮**关闭**的活动图，方法如下：

![在此处输入图像描述](../Images/028702c32e789bc70d779ef0fd0ca459.png)

![在此处输入图像描述](../Images/7a989286976149628bd8f155140282d0.png)

但是我不确定这两个图的决策分支中的**最终节点。**我想要做的是为使用旋钮打开和使用旋钮关闭用例图保留单独的图表，但我不确定在决策中放置*最终节点*是否是表示它的正确方法，例如，如果在决策分支导致系统已经开启，则*使用 KNOB 开启*的活动图中的*流程*结束，这是因为如果系统已经开启，则对应的活动图是*使用 KNOB 关闭*活动图。

 **但这似乎很令人困惑，因为**在到达决策分支之前，如果两者相同，我怎么知道要选择哪个活动图？**我的意思是，从符合 UML 的角度来看是否正确，例如，开始遵循**使用 KNOB 活动图打开**的流程，然后到达决策分支并确定系统已经开启并且只是“跳转”到**与用 KNOB 关闭**用例相对应的活动图，并从决策分支继续遵循后一张图中的流程？或者我应该严格遵守**系统已经关闭**的场景并选择使用 KNOW活动图**打开？**

现在，这引出了另一个问题；**每个活动图可以代表多个用例吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:08:46.270

UML 规范说*一个活动可能有多个活动最终节点。第一个到达停止活动中的所有流。*（因此，在您的示例中，控制流停止是因为灯已经打开/关闭，或者在该状态下打开后）。或者，您可以使两条边都指向同一个最终节点*，这是等效的，因为最终节点的唯一目的是终止活动。

在我看来，每个用例都应该与其他用例分开（尽管活动可能包含嵌套活动，这将模拟较低级别的行为）。

（*请注意，它不是“最终状态”而是“最终节点”，因为它位于活动图中。状态机具有最终状态。）此外，您没有“拆分”活动流（如在 fork 节点中） ，因为决策节点恰好选择一个出边。**

# asp.net-mvc - 将删除操作从 Web 移动到 MVC 应用程序中的服务层 - 它应该返回什么？

> ID：14971523
> 
> 赞同：0
> 
> 时间：2013-02-20T02:52:49.707
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我的服务层中有以下方法：

```
public void DeleteOrder(int orderId)
        {
            var order = _db.Order.FirstOrDefault(c => c.OrderId == orderId);
            if (order == null)
            {
                // error handling
            }

            _db.Orders.Remove(order);
            _db.SaveChanges();
        } 
```

将某些东西返回给控制器的最佳实践是什么？目前 Remove() 操作只是调用它并重定向用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:02:00.243

这取决于服务。

如果服务层是一个肥皂服务，你应该把错误当作错误处理并指定一个错误契约。

[http://msdn.microsoft.com/en-us/library/ms733721.aspx](http://msdn.microsoft.com/en-us/library/ms733721.aspx)

如果您使用的是 RESTFul 服务，我总是返回一个指示服务操作是否成功的 Error 对象。

```
Class ErrorObject {

Bool IsOk

String ErrorMessage

String Trace

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T02:58:04.023

这取决于您将与什么样的客户互动。由于您正在重定向客户端，因此听起来您目前不支持 AJAX 客户端。

在这种情况下，约定（由 Ruby on Rails 开始）是在成功结果后重定向，否则显示与操作对应的页面，但会出错。但请记住，大多数使用现代 Web 应用程序的人都希望使用 javascript 和异步请求 (AJAX)。在这种情况下，您可能希望返回记录良好的 JSON，它是以下两种类型之一：

```
{"error": {"code": ..., "fields": {"field1": "error message", "field2": "error message 2"}} 
```

或其他一些没有设置“错误”的 JSON，如果成功的话。然后，各种客户端都可以访问您的 Web 服务，包括 JSONP 或带有 CORS 的 XHR 等技术。

# css - 如何使此背景在整个屏幕上水平重复？

> ID：14971526
> 
> 赞同：0
> 
> 时间：2013-02-20T02:53:14.053
> 
> 标签：css, background, background-image

我使用图像作为背景。它只有几个像素宽，所以我让它在屏幕的宽度上重复。出于某种原因，它会在浏览器窗口右侧稍稍停顿（取决于您的像素设置，介于一厘米和一英寸之间）。这是我正在使用的CSS：

```
#bgcontainer { margin:0; padding:0; background:url(images/main_bg.gif) top repeat-x;} 
```

如何摆脱最后的白色列并使背景图像一直重复到最后？该站点位于 avidest.com，因此您可以看到，如果您一直滚动到右侧，则会出现一个白色列。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T03:08:56.477

您是否尝试过后台重复：重复-x

```
#bgcontainer { margin:0; padding:0; background:url(images/main_bg.gif); background-repeat:repeat-x
;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:08:51.993

将背景css设置为body标签，也许这可以帮助你解决你的问题

```
body { margin:0; padding:0; background:url(images/main_bg.gif) top repeat-x;} 
```

# struts2 - struts.xml 和 web.xml 的路径

> ID：14971528
> 
> 赞同：4
> 
> 时间：2013-02-20T02:53:21.643
> 
> 标签：struts2, struts

当我使用eclipse开发struts2时。我发现 struts.xml 文件可以放在 src 文件夹或 WebContent\WEB-INF\classes 中。两条路都没问题。

有什么不同？什么更好？不同的路径是否会影响性能或其他东西？struts.xml 文件还有其他路径吗？

而 web.xml 只能放在 WebContent\WEB-INF 中？或者 web.xml 的任何其他路径？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T04:15:19.680

1.  从*Web 应用程序的*角度来看，没有区别：`struts.xml`预计在部署后位于类路径的根目录。它如何以及何时到达那里是无关紧要的。

2.  将配置文件放在源目录中会更好，因为您不需要管理类目录本身。像 Maven 这样的工具将工件从项目`src/main/resources`目录移动到类路径。`src/main/java`除非专门配置为这样做，否则它不会移动 XML 文件。

3.  不。

4.  您*可以*覆盖默认位置。很少有充分的理由；所以不要。如果您使用多个配置文件，可以将它们放在包中，但我会将它们留在类路径中。

5.  这是一个完全不相关的问题，但它应该保留在默认位置，`WEB-INF`. `WebContent`是特定于项目的（Eclipse）——您需要配置部署/打包过程才能找到它。

# c++ - 这段 C++ CRTP 代码是否应该编译，如果可以，它应该怎么做？

> ID：14971536
> 
> 赞同：1
> 
> 时间：2013-02-20T02:54:05.113
> 
> 标签：c++, templates, inheritance, overloading, crtp

我正在考虑使用 CRTP 类来帮助重载，并想知道以下代码会做什么：

```
#include <iostream>
#include <typeinfo>

template <class TDerived>
class FunctionImplementation
{
};

class AbstractFunction
{
};

class BaseFunction : public AbstractFunction, public FunctionImplementation<BaseFunction>
{
};

class DerivedFunction : public BaseFunction, public FunctionImplementation<DerivedFunction>
{
};

template <class TDerived>
void foo(const FunctionImplementation<TDerived>& function) {
    std::cout << "In foo for " << typeid(TDerived).name() << std::endl;
}

int main() {
    BaseFunction base;
    DerivedFunction derived;

    foo(base);
    foo(derived);
} 
```

在 OS X 上使用 GCC 4.2 时，它无法编译：

```
overload.cpp: In function ‘int main()’:
overload.cpp:31: error: no matching function for call to ‘foo(DerivedFunction&)’ 
```

在同一系统上使用 Clang 4.0，它在运行时编译并执行“自然”的事情：

```
In foo for 12BaseFunction
In foo for 15DerivedFunction 
```

使用 Visual C++ 2010，它也可以编译但运行方式不同：

```
In foo for class BaseFunction
In foo for class BaseFunction 
```

最后，Linux 上的 GCC 4.7.2 不会编译，但会给出更完整且相当权威的错误消息：

```
overload.cpp: In function ‘int main()’:
overload.cpp:31:16: error: no matching function for call to ‘foo(DerivedFunction&)’
overload.cpp:31:16: note: candidate is:
overload.cpp:22:6: note: template<class TDerived> void foo(const FunctionImplementation<TDerived>&)
overload.cpp:22:6: note:   template argument deduction/substitution failed:
overload.cpp:31:16: note:   ‘DerivedFunction’ is an ambiguous base class of ‘const FunctionImplementation<TDerived>’ 
```

哪个是对的？我不是导航语言标准的专家...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T04:19:19.730

在这种情况下，我相信 gcc 是正确的。您要求编译器为您执行类型推导，问题是类型的给定参数`DerivedFunction`不是`FunctionImplementation<TDerived>`直接的，因此必须执行转换。此时，转换列表包括`FunctionImplementation<BaseFunction>`（通过`BaseFunction`）和`FunctionImplementation<DerivedFunction>`（直接）。这两个选择之间没有顺序，因此编译器会模棱两可地退出。

该标准在 §14.8.2.1 [temp.deduct.call]/4,5 中对此进行了处理

> （第 4 段）一般来说，演绎过程试图找到模板参数值，使推导的 A 与 A 相同（在类型 A 如上所述转换之后）。但是，有三种情况允许不同：
> 
> [...]
> 
> 如果 P 是一个类并且 P 具有 simple-template-id 形式，则转换后的 A 可以是推导出的 A 的派生类。同样，如果 P 是指向 simple-template-id 形式的类的指针，则转换后的 A 可以是指向由推导的 A 指向的派生类的指针。
> 
> （第 5 段）仅当类型推导失败时才考虑这些替代方案。如果它们产生多个可能的推导 A，则类型推导失败。

在第 4 段中，它允许类型推导选择参数类型的基数，在这种情况下有 2 个这样的基数。第 5 段确定如果应用上一条规则产生多个结果，则类型推导失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T05:47:59.323

好吧，下面的答案是错误的。我一直相信阅读 13.3.1p7

> 在候选函数模板的每种情况下，候选函数模板特化是使用模板参数推导（14.8.3、14.8.2）生成的。然后以通常的方式将这些候选函数作为候选函数处理。

该模板参数推导使用适当的重载解析机制在语法上可能的特化（函数的函数重载解析等）中进行选择。

事实证明这不是真的：模板参数推导有自己的、非常有限的一组规则，这些规则坚持完全匹配（步 cv 限定符和取消引用等），只允许派生类到模板基参数的转换在这里被视为一种特殊情况——这种特殊情况明确禁止使用函数重载决议来处理任何歧义。

因此，对于正确的答案，请参见上文。我把这个答案留在这里是因为它得到了支持，让我相信我不是唯一一个以这种方式犯错的人：

重载解决方法`foo(derived)`是在类中查找`FunctionImplementation<T>`声明`Derived`。类`Derived`没有该模板的成员范围声明，因此来自其基类的递归查找结果被组合在一起，在其层次结构中产生了两种特化：

```
Derived
:   Base
    :   AbstractFunction
    ,   FunctionImplementation<Base>
,   FunctionImplementation<Derived> 
```

考虑到在进行名称查找时在基类派生层次结构中找到声明的深度，这意味着在不*默默地*影响所有使用多重继承的派生类中的先前结果的情况下，任何名称或基类都不能添加到类中。相反，C++ 拒绝为您选择并提供 using-declarations 来显式声明哪个基类对（在本例中为 tepmlate）名称的使用是您要引用的名称。

这方面的标准是在 10.2 中，p3-5 是肉。

# c - C 程序在记录前退出

> ID：14971542
> 
> 赞同：0
> 
> 时间：2013-02-20T02:54:36.587
> 
> 标签：c, logging, error-logging

我以前遇到过这样的事情，但通常只是在处理`stdout`.

```
#define LOG 1

static void logoutput(char *info) {
    FILE *dbg;
    dbg = fopen(LOGFILE, "a+");
    if(dbg != NULL) {
        fprintf(dbg, "Mix%d: %s\n", MIXNUM, info);
        fclose(dbg);
    }
    else printf("Error writing to log file.\n");
    return;
}

if (data[0] != NULL) {
    if(LOG) logoutput("WARNING, something bad happened on port 1!");
    exit(1); //Adding a sleep(1); before this didn't help.
} 
```

我遇到的问题是，当 时`data[x] != NULL`，程序立即退出并且从不记录任何内容。

我尝试添加一个`sleep(1);`，但这并没有成功。我四处搜寻，但找不到合适的条款。处理这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:23:17.100

为什么不试试下面的代码？

```
#define LOG 1

static int logoutput(char *info) {
    FILE *dbg = NULL;
    dbg = fopen(LOGFILE, "a+");
    if(dbg != NULL) {
        fprintf(dbg, "Blah%d: %s\n", PARTNUM, info);
        fclose(dbg);
    }
    else {
        printf("Error writing to log file.\n");
    }
    return 0;//all good!
}    

static void logoutput_exit(char *info) {
   while(logoutput(info) != 0);
   exit(1);
}

if (data[0] != NULL) {
    if(LOG) logoutput_exit("WARNING, something bad happened on port 1!");
    //Adding a sleep(1); before this didn't help.
} 
```

# android - android webview占用全屏

> ID：14971545
> 
> 赞同：4
> 
> 时间：2013-02-20T02:55:00.633
> 
> 标签：android

我正在尝试获取标题“54dp”，其余的活动是 WebView。

当我在 eclips 的“图形布局”中预览我的活动时，它看起来不错。但是当在手机或模拟器上运行应用程序时，webview 会占据整个屏幕。

这就是预览的样子和我想要的样子：

![在此处输入图像描述](../Images/7857c288a129ee4a8de9331e8ec7040d.png)

但这是我在运行应用程序时看到的：

![在此处输入图像描述](../Images/ab4a05585177164e1fc7aa4e41ab5202.png)

这是布局 xml 的样子：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/page_background"
    >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/Layout_Header"
        android:layout_width="fill_parent"
        android:layout_height="54dp"
        android:orientation="horizontal" 
        android:background="@drawable/container_header"
        android:paddingLeft="16dp"
        android:paddingRight="16dp"

        >

        <ImageView
            android:id="@+id/imgHeaderLogo"
            android:layout_weight="1"
            android:layout_width="0dp"
            android:layout_height="46dp"
            android:contentDescription="@string/img_header_logo_description"
            android:src="@drawable/header_logo" 
            android:layout_gravity="center"
            />

    </LinearLayout>

    <WebView android:id="@+id/web_engine"
             android:layout_width="fill_parent"
             android:layout_height="fill_parent"
            />
</LinearLayout> 
```

# 解决方案：

在活动java文件中我有这个：

```
WebView browser = (WebView) findViewById(R.id.web_engine);
WebSettings webSettings = browser.getSettings();
setContentView(browser); 
```

当我应该有这个时：

```
setContentView(R.layout.activity_sign_in_web_view); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T17:08:04.500

这是因为一些重定向，打开浏览器应用程序，你可以使用

```
webview.setWebViewClient(new WebViewClient() {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {         
        view.loadUrl(url);
        return true;
    }
}); 
```

在您的`WebView`. 我刚刚遇到了同样的问题，在[这里](https://stackoverflow.com/a/3382258/326849)找到了解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T03:10:13.543

将 WebView 的高度设置为 0dp，将其权重设置为 1。

```
<WebView android:id="@+id/web_engine"
         android:layout_width="fill_parent"
         android:layout_height="0dp"
         android:layout_weight="1"
        /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T03:05:26.367

为 web 视图在 xml 中手动更改

```
android:layout_height="fill_parent" 
```

作为

```
 android:layout_height="200dp" 
```

如果它有效，可以在“android:layout_height”中根据需要更改高度参数

# c++ - 如何在不转换的情况下从文件中读取时间

> ID：14971546
> 
> 赞同：0
> 
> 时间：2013-02-20T02:55:01.687
> 
> 标签：c++, file-io, ipc

我的问题很笼统，但我会用一个具体的例子来解释它。

假设我需要在两个应用程序之间进行时间通信。一种简单的方法是让一个应用程序将`gettimeofday()`(`tv_sec`和`tv_usec`) 的输出写入文件并让另一个应用程序读取它。第二个应用程序需要“转换”字符串以获得`timeval`.

有什么办法可以避免转换？

有没有比简单的文件写入/读取更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T03:16:32.253

假设两个进程在同一台机器上（或至少在相同架构的机器上），[`std::time()`](http://en.cppreference.com/w/cpp/chrono/c/time)(from [`<ctime>`](http://en.cppreference.com/w/cpp/header/ctime)) 的结果将是[自 Epoch 以来的秒数](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap04.html#tag_04_15)，并且不需要任何转换：

```
std::time_t seconds_since_epoch = std::time(NULL); 
```

免责声明：这不是[ipc](/questions/tagged/ipc "显示标记为“ipc”的问题")的最佳方法，您需要在写入文件时[**锁定文件**](http://www.boost.org/doc/libs/1_53_0/doc/html/interprocess/synchronization_mechanisms.html#interprocess.synchronization_mechanisms.file_lock)以供读取*等*。只是回答问题。

* * *

**更新，以下评论。**

如果您需要编写 a `timeval`，也许最简单的方法是按原样定义`<<`和`>>`运算符 for`timeval`并将它们作为文本写入和读取文件（无需担心字节顺序）（无需转换）：

```
std::ostream& operator <<(std::ostream& out, timeval const& tv)
{
    return out << tv.tv_sec << " " << tv.tv_usec;
}

std::istream& operator >>(std::istream& is, timeval& tv)
{
    return is >> tv.tv_sec >> tv.tv_usec;
} 
```

这将允许您执行以下操作（忽略并发）：

```
// Writer
{
    timeval tv;
    gettimeofday(&tv, NULL);
    std::ofstream timefile(filename, std::ofstream::trunc);
    timefile << tv << std::endl;
}

// Reader
{
    timeval tv;
    std::ifstream timefile(filename);
    timefile >> tv;
} 
```

如果两个进程同时运行，则需要锁定文件。[这是使用Boost](http://www.boost.org/doc/libs/release/doc/html/interprocess/synchronization_mechanisms.html#interprocess.synchronization_mechanisms.file_lock)的示例：

```
// Writer
{
    timeval tv;
    gettimeofday(&tv, NULL);
    file_lock lock(filename);

    scoped_lock<file_lock> lock_the_file(lock);

    std::ofstream timefile(filename, std::ofstream::trunc);
    timefile << tv << std::endl;
    timefile.flush();
}

// Reader
{
    timeval tv;
    file_lock lock(filename);

    sharable_lock<file_lock> lock_the_file(lock);

    std::ifstream timefile(filename);
    timefile >> tv;

    std::cout << tv << std::endl;
} 
```

...为清楚起见，我省略了[`exception`](http://www.boost.org/doc/libs/1_48_0/doc/html/boost/interprocess/interprocess_exception.html)处理（当文件不存在时）；您需要将此添加到任何具有生产价值的代码中。

# angularjs - AngularJS：在 ng-include 中修改父范围

> ID：14971549
> 
> 赞同：5
> 
> 时间：2013-02-20T02:55:14.683
> 
> 标签：angularjs, angularjs-scope

我发现了这个线程，其中 d 范围不修改其父范围的 OP 的原始小提琴[。](http://jsfiddle.net/ItsLeeOwen/e5rfP/)`ng-include`

其中一个答复建议：

> 它丑陋且不可预测，因此我建议您将数据包装在对象变量中：http: [//jsfiddle.net/e5rfP/3/](http://jsfiddle.net/e5rfP/3/)

这似乎有效。为什么是这样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T04:10:21.280

对象变量之所以起作用，是因为 JavaScript 原型继承的工作方式。ngInclude 创建自己的子范围。这个子作用域原型继承自父作用域。

在 JavaScript 中，当我们在子作用域中编写类似的东西时`$scope.x = 22`，这会在子 $scope 上创建一个`x`属性并为其分配值 22 —— 这里没有参考原型链，因此父 $scope 看不到发生了什么。

当我们在子作用域上写类似的东西`$scope.someObj.prop1 = 22`时，如果 JavaScript 在子 $scope 上找不到`someObj`对象，它会查询原型链，而链中的下一个 $scope 就是父 $scope。如果`someObj`存在于父 $scope 上，则修改父 $scope。

正如我在评论中提到的，以下 SO 问题和答案更详细地解释了这一切（有很多图片）：[AngularJS 中范围原型/原型继承的细微差别是什么？](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs/14049482#14049482)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-06T21:33:48.700

该指令将包含一个部分而不创建新范围。例如，您可以在部分中创建一个表单并从父控制器控制该表单。

这是我为它创建[的 Repo 的链接。](https://github.com/jamesharrington/angular-static-include)

我的答案基于[这个 SO 答案](https://stackoverflow.com/a/17340138/1456666) 祝你好运:-)

# r - 根据计数列拆分值

> ID：14971550
> 
> 赞同：1
> 
> 时间：2013-02-20T02:55:21.593
> 
> 标签：r

我有一个包含 2 列的数据框

```
>mydata <- data.frame(Obj = c(1,2,3,2), Count = c(2,3,1,4))
>mydata
  Obj Count
1   1     2
2   2     3
3   3     1
4   2     4 
```

我想根据计数拆分 Obj 列以获得原子对象，例如 (1, 1, 2, 2, 2, 3, 2, 2, 2, 2) 是的，这与**表**函数相反。在 R 中有什么功能可以做到这一点吗？

PS：一个简单的 for 循环就可以解决问题，但我觉得使用内置的高效函数总是好的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:58:51.720

你在寻找`rep`，`Count`与时俱进的论据

```
with(mydata, rep(Obj, Count)) 
```

或`rep.int`，这是一个稍快的实现`rep(x, times)`

```
with(mydata, rep.int(Obj,  Count)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T03:01:56.100

尝试

```
rep(mydata$Obj,mydata$Count) 
```

# jquery - 如何将 Fisheye 与 ExtJS 面板集成

> ID：14971551
> 
> 赞同：1
> 
> 时间：2013-02-20T02:55:31.763
> 
> 标签：jquery, extjs4, extjs4.1, extjs-mvc, fisheye

我如何将这些图标移动到中心并在鼠标悬停上工作

我正在尝试将 Fisheye 集成到我的 Ext Js 项目中，例如[http://www.ndesign-studio.com/demo/css-dock-menu/css-dock.html](http://www.ndesign-studio.com/demo/css-dock-menu/css-dock.html)

```
1\. Downloaded the js files (jquery+interface)  
2\. Downloaded the CSS with images  
3\. In my app.js created a panel using items config  
4\. Now used added event in the listener and its not working at all  
5\. Following is the file structures 
```

索引.html：

```
 <script type="text/javascript" src="js/jquery.js"></script>
    <script type="text/javascript" src="js/interface.js"></script>
    <link href="style.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript" src="ext-4.1.1/ext-debug.js"></script>
        <script type="text/javascript" src="app.js"></script> 
```

应用程序.js：

```
 Ext.application({
    requires: ['Ext.container.Viewport'],
    name: 'AM',
    controllers:['Users'],

    appFolder: 'app',

    launch: function() {
        Ext.create('Ext.container.Viewport', {
            layout: 'border',
            items: [
                {
                xtype:'panel',
                id:'navigationPanel',
                height:350,
                collapsible:true,
                resizable:true,
                region:'south',
                loader:{
                url:'sample.html',
                autoLoad:true
                },
                listeners:{
                        'added':function( navp, container, pos,  eOpts  ){
                        $('#dock').ready(
                            function()
                            {
                                $('#dock2').Fisheye(
                                    {
                                        maxWidth: 60,
                                        items: 'a',
                                        itemsText: 'span',
                                        container: '.dock-container2',
                                        itemWidth: 40,
                                        proximity: 80,
                                        alignment : 'left',
                                        valign: 'bottom',
                                        halign : 'center'
                                    }
                                )

                            }
                        )
                    }}
                }]
        });
     }
    }); 
```

示例.html：

```
<div class="dock" id="dock2">
  <div class="dock-container2">
  <a class="dock-item2" href="#"><span>Home</span><img src="images/home.png" alt="home" /></a> 
  <a class="dock-item2" href="#"><span>Contact</span><img src="images/email.png" alt="contact" /></a> 
  <a class="dock-item2" href="#"><span>Portfolio</span><img src="images/portfolio.png" alt="portfolio" /></a> 
  <a class="dock-item2" href="#"><span>Music</span><img src="images/music.png" alt="music" /></a> 
  <a class="dock-item2" href="#"><span>Video</span><img src="images/video.png" alt="video" /></a> 
  <a class="dock-item2" href="#"><span>History</span><img src="images/history.png" alt="history" /></a> 
  <a class="dock-item2" href="#"><span>Calendar</span><img src="images/calendar.png" alt="calendar" /></a> 
  <a class="dock-item2" href="#"><span>Links</span><img src="images/link.png" alt="links" /></a> 
  <a class="dock-item2" href="#"><span>RSS</span><img src="images/rss.png" alt="rss" /></a> 
  <a class="dock-item2" href="#"><span>RSS2</span><img src="images/rss2.png" alt="rss" /></a> 
  </div>
</div> 
```

当我跑步时，我得到 1 个图标，底部左对齐，鼠标悬停不起作用。

它应该与底部的链接[http://www.ndesign-studio.com/demo/css-dock-menu/css-dock.html](http://www.ndesign-studio.com/demo/css-dock-menu/css-dock.html)完全相同

非常感谢您的帮助！！！阿斯维尼

# jquery - chrome 中的过滤器灰度与 :not 选择器有问题

> ID：14971553
> 
> 赞同：1
> 
> 时间：2013-02-20T02:55:44.773
> 
> 标签：jquery, google-chrome, css, svg-filters

我有那样的东西

```
$('body > :not(.extras)').addClass("desaturation_filtr"); 
```

并且必须将此课程应用于整个身体而无需额外课程

```
.desaturation_filtr
 {

    -webkit-filter: grayscale(100%);
    filter: grayscale(100%);
    -moz-filter: grayscale(100%);
    -ms-filter: grayscale(100%);
    -o-filter: grayscale(100%);
    filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale");
} 
```

但是当它这样做时，该网站非常有问题，因为网页是像素化的并且不可读

您可以通过单击右上角的条纹按钮来实时查看@http [://www.industrukt.pl/des 。](http://www.industrukt.pl/des)

在 Firefox 中一切都很好。

尝试使用

> $('.extras').removeClass("desaturation_filtr");

但它不起作用。当然，在那行代码之前，我没有从之前的代码片段中删除

我认为这是 Chrome 错误：/ 但不知道如何解决

# java - 生成自动 ID IdGeneratorStrategy

> ID：14971558
> 
> 赞同：8
> 
> 时间：2013-02-20T02:56:01.857
> 
> 标签：java, json, google-app-engine, curl, jdo

我正在使用 Goole App Engine 来构建我的 REST API，我已经将我的类标记为*PersistenceCapable*并且我定义了我的**@PrimaryKey**并且还标记为**@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)**，我已经有了 EndPoints生成。但是当我在终端窗口中键入 curl 命令以插入新实体或注册表时，它不起作用。这是代码：

```
 @PersistenceCapable(identityType = IdentityType.APPLICATION)
 class Student{
    @PrimaryKey
    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
    private Long     id;
    private String   studentName;
    ....
    ....
    ....
} 
```

* * *

这是来自本地服务器的 curl 命令和响应。当我尝试插入一个新实体时

```
curl -H 'Content-Type: application/json' -d'{"studentName": "myname"}' htto://localhost:8889/_ah/api/utp/v1/student 
```

* * *

这是来自本地服务器的响应。

```
"error" : {
"message" : "javax.jdo.JDOFatalInternalException: El valor de llave dado para construir una identidad de SingleFieldIdentity de tipo \"class javax.jdo.identity.LongIdentity\" para la clase \"class com.alex.wserver.Student\" es nulo.\nNestedThrowables:\norg.datanucleus.exceptions.NucleusException: El valor de llave dado para construir una identidad de SingleFieldIdentity de tipo \"class javax.jdo.identity.LongIdentity\" para la clase \"class com.alex.wserver.Student\" es nulo." 
```

我一直认为 id 是自动生成的插入的。但这并没有发生在这里。与一起插入 id 不同

* * *

1.  我的课错了吗？
2.  我的 POST/json 请求好吗？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-22T00:12:55.003

我认为我已经找到了解决方案。似乎谷歌应用引擎（GAE）框架生成的每个端点都有一个简单的方法，每次有人试图插入或更新时检查一个持久实例，所以事实是每次我试图插入一个新的使用 curl/json 的学生没有为实例指定 de new id 它显示如下错误消息：

```
 "error": {
      "message": javax.jdo.JDOFatalInternalException: The key value passed to construct a
      SingleFieldIdentity type \ class javax.jdo.identity.LongIdentity \ for class \ class com.alex.wserver.Student \ is null. \ nNestedThrowables: \ norg.datanucleus.exceptions.NucleusException: the key value passed to construct a SingleFieldIdentity type \ class javax.jdo.identity.LongIdentity \ for class \ class com.alex . wserver.Student \ is null. 
```

* * *

所以我已经解决了编辑我的端点类的问题，方法是检查新对象（由 curl 命令发送并包装的 json 格式）是否具有非空 id 值，甚至在检查对象之前是否已使用以下代码存储：

```
 if(student.getKey() != null){
            if (containsStudent(student)) {
                throw new EntityExistsException("Object already exists");
            }
        }
        mgr.makePersistent(student); 
```

* * *

到目前为止，我还没有看到任何可以为我澄清这方面的文件。我还要补充一点，在试图弄清楚发生了什么之前，我花了很多时间阅读有关[GAE的文档。](https://developers.google.com/appengine/docs/java/datastore/jdo/dataclasses)

* * *

所有这一切让我觉得可能只是 GAE 文档不是最新的，或者我可能没有足够的搜索，所以如果有人知道的话。请让我知道并增加常识。谢谢@DataNucleus。

**注意：** “我所做的这个分叉不应被视为正确答案，它可能会将您带到您的应用程序的意外行为。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-15T19:11:16.953

问题在于自动生成的端点的 contains 方法。当 id 为 null 并且方法捕获异常 javax.jdo.JDOObjectNotFoundException 时，抛出的异常是 javax.jdo.JDOFatalInternalException。

永远不会捕获异常，您会收到错误消息。我不知道这是一个错误还是什么，但是在更新了 catch 语句以捕获两者之后，问题就解决了。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-26T12:00:14.803

正如 AlexSanchez 在回答中所说，生成的端点代码需要在插入新身份时已经设置的主键。

虽然有些人可能将此视为错误，但其他人可能会将其视为一项功能，因为它需要客户端以某种方式生成密钥（例如，当密钥类型为字符串时，通过创建随机 uuid）。这样，客户端即使在离线时也可以创建完整的实体图，并在在线时将它们上传到服务器。

（我认为 Spine 框架就是这个想法的一个例子：http: [//spinejs.com/](http://spinejs.com/)。）

# data-structures - 将队列存储在哈希表或向量的向量中

> ID：14971561
> 
> 赞同：1
> 
> 时间：2013-02-20T02:56:57.037
> 
> 标签：data-structures, hashmap, queue, client-server, server-side

我有一个服务器多客户端服务器 - 在收到来自客户端的消息后，服务器需要处理它，然后再将其传递给另一个客户端。

我不知道我想做的最好的实现是什么，所以很感激任何帮助。这些消息将按时间间隔发送，因此消息需要被接收、处理并推送到结构中，然后才能在特定时间从要发送的结构中访问。消息有两个属性：目的地和优先级。访问将按时间间隔进行，有两种模式：特定于客户端节点，或向所有节点开放接收。

1.  如果时间间隔只允许特定节点接收，那么会发生从最高优先级到最低优先级检查的所有队列，即以最高优先级发送的最早消息将从结构中“推出”。
2.  如果时间间隔为“开放”，则无论节点如何，最高优先级的最早消息都将被“推出”。

我首先认为它可能是 a `vector<vector<queue<message>>`，但我意识到根据第 2 点进行搜索效率不高。我将不胜感激任何建议！有人建议我使用哈希映射，但我没有这方面的经验，如果这是最好的方法，我将不胜感激。

编辑：将相同的消息推送到两个不同的结构中是更好的解决方案吗？一：按优先级分类，向量持有FIFO队列（每个优先级一个）。二：按节点分类，`vector<vector<queue<message>>`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T04:19:09.793

H除非对尺寸和速度有所了解，否则没有一个答案。所以，我想我会记下我想出的一些选择。

**选项 1——超级计算机：**假设我们假设有一台超快的机器，与所涉及的数据量相比。我们可以简单地将消息存储在一个无序列表中，因为它每次都足够快地遍历列表（平均而言，我们需要遍历列表的一半）。

**选项 1A——让我们稍微麻烦一下**：按优先级+到达时间排序的列表将使“打开”响应快速，因为我们只是从“顶部”获取。对于特定于节点的响应，我们通常会搜索不到一半，因为最高优先级都在开头附近

**选项 2 —— 低资源，一百个节点，数百条消息：**如果插入数据结构的时间不是那么重要，并且当你需要发送消息时你必须有尽可能短的响应，那么你需要一个全局队列，以便您可以在间隔打开时弹出。您还需要特定于节点的队列。最后，您需要一种立即到达特定于节点的队列的方法。这意味着：

1.  全局有序列表
2.  N 节点特定的有序列表
3.  以 Node-Id 为键的映射，并指向特定于节点的列表

正如我所看到的，痛苦的部分是同步，以便您每次都从全局和特定于节点的列表中删除（添加时相同）

我的第一个想法是将每条消息包装在一个包装器中，该包装器就像双向链表中的一个节点。但是，它实际上是两个列表。包装器将具有基于全局优先级的 Prev 和 Next；但是，它也会有一个基于节点特定优先级的 Prev 和 Next。这样一来，您只需取出一份消息本身的副本，同时以标准方式修复 prev/next 指针。（这基本上结合了上面的#1 和#2）。

对于#3，我会保留一张地图，但不是查找特定于节点的列表，而是指向该特定节点的“头”包装器。

这是一张图片，用于说明。 ![双重职责，双向链表](../Images/af4280dddff7542557452135cbdfa496.png)

听起来很有趣！

# javascript - 我的 Greasemonkey 脚本在我的 PC 之外是否可见？

> ID：14971563
> 
> 赞同：2
> 
> 时间：2013-02-20T02:57:05.117
> 
> 标签：javascript, security, passwords, greasemonkey

如果这是一个愚蠢的问题，请原谅我。我不熟悉如何处理浏览器脚本。

我正在编写一个简短的 Greasemonkey 脚本，其中涉及将我自动登录到一个网站，这当然涉及插入我的密码。我原本打算在脚本本身中包含我的密码，但我担心如果其他人可以看到我的脚本，他们也会看到我的密码。

所以我的问题是，我的脚本是否有可能被我的浏览器和本地 PC 之外的任何人/任何东西看到？我不是在谈论其他任何人使用我的计算机，而是任何人从网络上的其他地方“探测”或以其他方式检查我的浏览器。

如果是这样，我如何存储我的密码，以便在不牺牲我的安全性的情况下自动插入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T11:08:20.393

名义上，没有。Greasemonkey 脚本在您的 PC 之外并不比您硬盘上的任何其他未加密文件更可见。

也就是说，有几件事要记住：

1.  **请改用密码实用程序。**
    尽可能使用旨在使用和保护密码的受信任实用程序。如前所述，[*LastPass*](https://lastpass.com/)非常受欢迎。我也使用了[*安全登录*](https://addons.mozilla.org/en-us/firefox/addon/secure-login/)，效果很好。

    诚然，这些实用程序并不适用于所有情况，因为如此多的网站坚持使用自己的登录页面/系统变体。所以，我个人确实使用 Greasemonkey 脚本来登录一些低风险的网站。

2.  **切勿对敏感站点使用自动登录。** 如果您为银行、信用卡、重要工作数据库等使用脚本。总有一天*会*有人坐在您的计算机前，他们*会*访问该站点（并自动登录），并且*会*发生不好的事情。银行就可以了。
    现在，我知道有些人会（愚蠢地）忽略这一点。但是，如果你这样做了，至少让登录由热键或热键序列触发——永远不要完全自动。

3.  **当心`unsafeWindow`。**
    Greasemonkey 脚本曾经容易受到针对[`unsafeWindow`](http://wiki.greasespot.net/UnsafeWindow). 虽然我*相信*这个漏洞已被 Firefox 版本 4 关闭（旧的漏洞利用配方肯定不适用于现代 GM+FF），但`unsafeWindow`漏洞利用将允许受感染的网页查看您的部分脚本源并使用`GM_`函数。

    所以，特别是对于登录脚本，不要使用`unsafeWindow`.

4.  ***切勿在任何源*文件中包含真实密码。**
    不要让窥探者或恶意软件很容易获取您的密码！几十年来，这一直是通向 pwn-dom 的简单途径，但人们仍然为此感到烦恼——可能每天都如此。

5.  **不要以明文形式存储密码。**并且不要使用“密码”和“用户名”作为变量名。这不会阻止一个坚定的坏人，但它会减慢“诚实”的窥探和脚本小子。

这是我在自动登录的两个页面上使用的 Greasemonkey 脚本框架（都是论坛，低风险，低敏感度）。

用户名和密码存储在浏览器首选项数据库中（通过 可见`about:config`），而不是脚本源。它们经过轻微加密以减慢窥探速度。

第一次运行脚本时，它会提示输入随机密钥以及用户名和密码。之后，可以通过 Greasemonkey 上下文菜单更改用户名和密码。

```
// ==UserScript==
// @name     _Autologin, sensitive info framework
// @include  http://YOUR_SERVER.COM/YOUR_PATH/*
// @require  http://crypto.stanford.edu/sjcl/sjcl.js
// @grant    GM_getValue
// @grant    GM_setValue
// @grant    GM_registerMenuCommand
// ==/UserScript==

var encKey  = GM_getValue ("encKey",  "");
var usr     = GM_getValue ("lognUsr", "");
var pword   = GM_getValue ("lognPwd", "");

if ( ! encKey) {
    encKey  = prompt (
        'Script key not set for ' + location.hostname + '. Please enter a random string:',
        ''
    );
    GM_setValue ("encKey", encKey);

    usr     = pword = "";   // New key makes prev stored values (if any) unable to decode.
}
usr         = decodeOrPrompt (usr,   "U-name", "lognUsr");
pword       = decodeOrPrompt (pword, "P-word", "lognPwd");

function decodeOrPrompt (targVar, userPrompt, setValVarName) {
    if (targVar) {
        targVar     = unStoreAndDecrypt (targVar);
    }
    else {
        targVar     = prompt (
            userPrompt + ' not set for ' + location.hostname + '. Please enter it now:',
            ''
        );
        GM_setValue (setValVarName, encryptAndStore (targVar) );
    }
    return targVar;
}

function encryptAndStore (clearText) {
    return  JSON.stringify (sjcl.encrypt (encKey, clearText) );
}

function unStoreAndDecrypt (jsonObj) {
    return  sjcl.decrypt (encKey, JSON.parse (jsonObj) );
}

//-- Add menu commands that will allow U and P to be changed.
GM_registerMenuCommand ("Change Username", changeUsername);
GM_registerMenuCommand ("Change Password", changePassword);

function changeUsername () {
    promptAndChangeStoredValue (usr,   "U-name", "lognUsr");
}

function changePassword () {
    promptAndChangeStoredValue (pword, "P-word", "lognPwd");
}

function promptAndChangeStoredValue (targVar, userPrompt, setValVarName) {
    targVar     = prompt (
        'Change ' + userPrompt + ' for ' + location.hostname + ':',
        targVar
    );
    GM_setValue (setValVarName, encryptAndStore (targVar) );
}

/*-- These next 3 lines are for debug / edification.  
Remove or comment out of the final script.
*/
console.log ("Script start.");
console.log ("usr: ",   usr);
console.log ("pword: ", pword);

// ADD YOUR CODE TO SET THE USERNAME AND PASSWORD ON THE LOGIN PAGE, HERE. 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-05-22T10:46:56.963

对，他们是！！通过请求站点对脚本事件的事件侦听器，`DOMNodeInserted`您的源代码（以及您的密码）对请求站点上的所有脚本都是可见的。

在[这里](http://commons.oreilly.com/wiki/index.php/Greasemonkey_Hacks/Getting_Started#Security_Hole_.231:_Source_Code_Leakage)查看更多信息。

# java - 如何在未将对象作为参数传递的方法中创建引用实例化类对象的对象？

> ID：14971564
> 
> 赞同：0
> 
> 时间：2013-02-20T02:57:17.480
> 
> 标签：java, methods, parameters

```
synchronized void drop(Board board) {
    int[][] a = getArray();
    int[][] b = board.getArray();

    //I don't have currentObject here... what do I need to write?                
    if (Board.goDown(currentX, currentY, b, a, board, currentObject)) {
        currentY++;
        updateXY();
    }
} 
```

方法调用是`currentObject.drop(board)`，但我们不能`currentObject`作为变量传入。

有什么简单的方法可以做到这一点，还是我只需要重写整个代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T03:01:31.187

你可以使用[这个关键字](http://docs.oracle.com/javase/tutorial/java/javaOO/thiskey.html)。

“this”是对当前对象的引用。

# frameworks - .NET Framework 方法未找到“无效 System.GC.Collect”

> ID：14971575
> 
> 赞同：1
> 
> 时间：2013-02-20T02:59:18.327
> 
> 标签：frameworks, internals, dcom

我正在尝试运行一些服务并收到此消息

> 找不到方法：'无效 System.GC.Collect（Int32，System.GCCollectionMode）'

我怀疑服务器，因为该服务在其他服务器上运行。我真的很想知道这个问题的根源是什么，因为我在其他服务器上遇到了这个问题。我尝试从我的服务中获取代码，最后我意识到，即使我运行一个只有一个静态主程序的控制台应用程序并调用 GC，我也会收到此错误，我正在使用带有 Framework 2.0 和 3.5 的 Windows Server 2003

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:27:55.340

创建控制台应用程序时，请确保您的目标框架未设置为 Client Profile FrameWork 3.5。

上述设置位于项目属性的应用程序选项卡中

如果要使用 GCCollectionMode 和 Framework 2.0，则必须安装 .NET 2.0 Service Pack 1

# iphone - UITextField辞职第一响应者后如何更改UIScrollView contentSize

> ID：14971576
> 
> 赞同：0
> 
> 时间：2013-02-20T02:59:27.017
> 
> 标签：iphone, ios, objective-c, uitextfield

我正在编写一个 iPhone 应用程序，并且我有一些 UITextfields 会在键盘出现时被覆盖；因此，我将 UITextFields 放在 a`UIScrollView`中，并将自己设置为委托，这样当键盘变为活动状态时，就会调用此方法：

```
-(void) textFieldDidBeginEditing:(UITextField *)textField
{
    self.myScrollView.contentSize = CGSizeMake(self.myScrollView.contentSize.width, 560);
    [self.myScrollView setContentOffset:CGPointMake(0, 200) animated:YES];
} 
```

请注意，我将 contentSize 设置得更高，这样即使文本字段成为焦点，用户仍然可以滚动。

同样，当文本字段退出第一响应者状态时，将调用此方法：

```
-(void) textFieldDidEndEditing:(UITextField *)textField
{
    [self.myScrollView setContentOffset:CGPointMake(0, 0) animated:YES];
    self.myScrollView.contentSize = CGSizeMake(self.myScrollView.contentSize.width,self.myScrollView.frame.size.height);    
} 
```

请注意，一旦放下键盘，所有内容都可见，因此无需启用滚动（contentSize = frame.size）。

但是，我的问题是因为我在设置 contentOffset 之后立即设置 contentSize，所以 setContentOffset 动画没有时间完成。相反，动画看起来非常生涩。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T03:45:19.203

使用 UIKeyboardDidShowNotification 和 UIKeyboardWillHideNotification 是一个好主意：

第一步：收听两个通知

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardDidShow:)
                                             name:UIKeyboardDidShowNotification object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardWillBeHidden:)
                                             name:UIKeyboardWillHideNotification object:nil]; 
```

第 2 步：在键盘显示时做一些事情

```
- (void)keyboardDidShow:(NSNotification*)notification
{
CGSize keyboardSize = [[[notification userInfo] objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue].size;

BOOL Need_Resize; // judge by yourself

if (Need_Resize) {
    double offset; // judge by yourself
    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationDuration:0.5];
    [UIView setAnimationBeginsFromCurrentState:YES];
    [self.view setCenter:CGPointMake(self.view.center.x, self.view.center.y - offset];
    [UIView commitAnimations];
}

} 
```

第 3 步：在键盘隐藏时做一些事情

```
// in animation code, set the view back to the original place
[self.view setCenter:CGPointMake(self.view.center.x, self.view.frame.size.height/2)]; 
```

这个方案不需要UIScrollView，只需要调整view的位置，加上动画，看起来就够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:44:31.300

那这个呢？不知道它是否会起作用，但只是从我的脑海中：

```
[UIView animateWithDuration:0.5
                  animations:^{
                      self.myScrollView.contentSize = CGSizeMake(self.myScrollView.contentSize.width, 560);
                  } completion:^(BOOL finished) {
                      [self.myScrollView setContentOffset:CGPointMake(0, 200) animated:YES];
                  }]; 
```

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T03:52:23.273

您可以尝试使用[scrollRectToVisible:animated:](http://developer.apple.com/library/ios/ipad/#//apple_ref/occ/instm/UIScrollView/scrollRectToVisible%3aanimated%3a)而不是设置内容偏移量，并将其传递给您的文本字段的矩形或`CGRectZero`取决于您要去的方向。

# javascript - 取消绑定和取消委托事件以仅提交一个表单

> ID：14971577
> 
> 赞同：0
> 
> 时间：2013-02-20T02:59:50.160
> 
> 标签：javascript, ruby-on-rails, backbone.js

我有 3 个选项卡可以在它们之间切换。对于我的一个选项卡，我在 Backbone 中生成一个表单/视图，我可以将其提交给我的控制器。问题是，如果我在选项卡之间切换并单击生成表单的选项卡，然后单击提交，我会将多个 AJAX 调用提交给我的控制器。

```
 addPlace: function(e) {
      if(!this.isSearch){
        this.add = new add({
          model: this.model,
          attachPoint: this.$("div.addAPlaceForm")
        });
        $('.add_to_place').addClass("hidden");
        $('.matchingWrapper').addClass("hidden");
        this.add.render();
        this.add.on("place:selected", this.placeSelect, this);
        this.isSearch = true;
      } 
    }

    //this.add.render()
    render: function(e){
      this.$el.html(this.addPlaceForm({
        place: this.model
      }));  
      view.prototype.render.call(this);
  } 
```

当用户切换到不生成表单的其他选项卡之一时，它会点击此功能：

```
 addPlacebacklink: function(e) {
        this.add.undelegateEvents();
        this.add.unbind();

        $("div.addAPlaceForm").html("");
        this.isSearch = false;
    } 
```

我已经读到您应该这样做`unbind`，`undelegateEvents`但是，我仍然看到对我的控制器的多个 AJAX 调用。如何设置 Backbone，以便我可以多次在选项卡之间切换并且仍然只提交一个表单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:40:51.363

我实际上重构了我的代码以检查 this.add 并在切换选项卡时隐藏表单。

```
addPlace: function(e) {
  if(!this.add){
    this.add = new add({
      model: this.model,
      attachPoint: this.$("div.addAPlaceForm")
      this.add.render();
      this.add.on("place:selected", this.placeSelect, this);
    });
    this.$('.add_to_place').addClass("hidden");
    this.$('.matchingWrapper').addClass("hidden");
    this.$(".form-horizontal").removeClass("hidden");

  } 
}

addPlacebacklink: function(e) {
     this.$(".form-horizontal").addClass("hidden");
} 
```

# objective-c - NSUbiquitousKeyValueStore 类和 -boolForKey: 方法

> ID：14971580
> 
> 赞同：1
> 
> 时间：2013-02-20T03:00:55.703
> 
> 标签：objective-c, cocoa-touch, nsubiquitouskeyvaluestore

这[是链接](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSUbiquitousKeyValueStore_class/Reference/Reference.html#//apple_ref/doc/uid/TP40010934)

> boolForKey：返回与指定键关联的布尔值。
> 
> -(BOOL)boolForKey:(NSString *)aKey 参数 aKey 键值存储中的键。
> 
> 返回值 如果布尔值与指定的键相关联，则返回该值。如果未找到密钥，则此方法返回 NO。

所以，在过去的 4 个小时里，我仍然无法找到一种方法来区分代码中的这两种情况：

**A)**用指定键设置布尔值 NO 后返回值为 NO

**从：**

**B）**返回值为NO，因为没有找到这样的指定键！

任何帮助，将不胜感激 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T03:03:36.240

您可以使用`objectForKey:`该键查看对象是否实际存在。

# javascript - 使用 Javascript 调用 Perl 脚本并显示结果

> ID：14971581
> 
> 赞同：-2
> 
> 时间：2013-02-20T03:01:11.413
> 
> 标签：javascript, ajax, perl, integration

我在谷歌上查了一下，但没有找到完全保留我的问题的任何东西。有没有办法用 JavaScript 调用 Perl 脚本，然后将 Perl 脚本得到的结果放入网络文档中？我读过 AJAXs 可以做到这一点，但我希望有人可以放置一个简单的 hello world 示例来模拟这一点。另外，因为 Perl 通常必须安装在计算机上才能使用它，javascript 是如何做到这一点的呢？是否服务器安装了 Perl，以便当 javascript 调用它时服务器进行计算，然后 javascript 可以获取结果？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:10:18.363

您可能对 Perl 的[Mojolicious](http://mojolicio.us) web 框架感兴趣，特别是因为它支持 websockets，这是浏览器和服务器之间的双向通信。

[这是 Mojo 和 websockets 的示例](https://github.com/kraih/mojo/blob/master/examples/websocket.pl)。在这个例子中，客户端向服务器发送一些文本，服务器预先设置一个心脏并将其发送回浏览器显示。当然，在您的情况下，服务器可以运行一些代码并将结果发回。

这种架构在我的[Galileo CMS](https://github.com/jberger/Galileo)中被大量使用，它使用 websockets 来更新页面，而不需要服务器刷新和确认更新成功。

# javascript - 解析字符串以获取时间

> ID：14971585
> 
> 赞同：0
> 
> 时间：2013-02-20T03:01:55.767
> 
> 标签：javascript, jquery, django

我正在做一个项目，该项目以这种格式向我发送时间列表：

“[u'8:00', u'16:00', u'22:00']”

我想知道的是如何仅从该字符串中获取 javascript/jquery 中的时间数组？我尝试了正则表达式的各种组合，似乎没有什么能够提取时间。我难住了！任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:04:55.760

试试这个：

```
var str = "[u'8:00', u'16:00', u'22:00']";
var times = str.match(/\d{1,2}:\d{1,2}/g);
console.log(times); //=> ["8:00", "16:00", "22:00"] 
```

# c++ - 从 C++/CLI 应用程序将 STL 字符串传递给 C++ DLL

> ID：14971590
> 
> 赞同：1
> 
> 时间：2013-02-20T03:02:49.400
> 
> 标签：c++, opencv, c++-cli

我有一个使用 OpenCV 的 C++/CLI 项目。我自己在 VS 2010 中编译了这个版本的 OpenCV，我可以在非托管项目中毫无问题地使用它——当我尝试在托管项目中使用它时，问题就开始了。

感兴趣的函数是`cv::imread(std::string&, int)`。简单地从托管模块调用它根本不起作用，在接收端产生 <invalid pointer>。我有点期待它。毕竟，托管代码有自己的`std::string`实现。

当我创建一个单独的 C++ 文件、从其模块中删除 CLI 支持并将我的代码放入其中时，事情变得更有趣了。现在，`imread`得到了一个有效的指针，但它的内容被打乱了。显然，`string`我正在传递它包含偏移 4 个字节的字符串指针，但它希望它位于 0 偏移量。

非托管模块使用与 OpenCV 相同的 CRT DLL，并将所有选项设置为适合正常 OpenCV 使用的值。为什么会有不同的`string`布局？我搞不清楚了。

示例代码：

```
#include <opencv/cv.h>
#include <opencv/highgui.h>

#include <string>

using namespace cv;
using namespace std;

void Run()
{
    string path("C:\\Users\\Don Reba\\Pictures\\Merlin 1D.jpg");

    Mat image(imread(path, CV_LOAD_IMAGE_GRAYSCALE));
    imwrite("image.jpg", image);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T21:04:20.600

回答标题中的问题：不，您不能直接将 std::string 从托管代码编组为非托管代码。[有关原因，请参阅另一个 SO 问题](https://stackoverflow.com/questions/874551/stdstring-in-c)的答案。主要原因是 std::string 是模板而不是“真实”类型。

基本上，您需要编写一个小型非托管模块，它为 openCV 函数提供简单的包装，摆脱 STL 类型。使用您的示例函数，它可以很简单：

```
declspec(__dllexport) imread(char* c, int i) {
    string s = c;
    cv::imread(s, i);
} 
```

至于字符串偏移的问题......尝试创建一个单独的项目，从一开始就使用“非托管”类型。将项目切换到托管并返回可能会导致项目设置混乱，产生不可预测的后果 - 至少，我已经两次遇到这样的坑......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:11:37.933

您不应该（不能）在不同的模块（DLL）之间传递 std::string& ，除非您确定所有模块都以相同的方式编译（发布与调试等）。

例如：如果您在 release 中编译一个 DLL，而在 debug 中编译另一个 DLL - 那么 std::string 的内存布局可能会有所不同。其他编译器设置也可能影响内存布局。

试试这个 - 将下面的代码编译为发布与调试并运行它。在调试中，您在版本 28 中获得 32。

```
#include <iostream>
#include <string>

int main()
{
   std::cout << "sizeof(std::string) : " << sizeof(std::string) << std::endl;

   return 0;
} 
```

我建议不要使用 std::string 跨越模块边界。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T03:34:26.667

**简短回答**：**是**的，如果您对 DLL 和 C++/CLI 应用程序使用相同的编译器设置，则可以将 STL 字符串从 C++/CLI 应用程序传递给本机 C++ DLL。

**代码**：

```
#include <msclr/marshal_cppstd.h> // header for marshal utilities

...

String^ path = "C:\\Users\\Don Reba\\Pictures\\Merlin 1D.jpg"; // Managed string
std::string s = msclr::interop::marshal_as<std::string>(path); // To stl string
cv::imread(s, CV_LOAD_IMAGE_GRAYSCALE); 
```

有关详细信息，请参阅此页面：http: [//msdn.microsoft.com/en-us/library/bb384865.aspx](http://msdn.microsoft.com/en-us/library/bb384865.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T01:15:54.900

问题是 Visual Studio 2010 默认为 C++ 和 C++/CLI 项目使用不同的工具集。这就是为什么 STL 类尽管设置相同但布局不同的原因。要解决此问题，请确保在 C++/CLI 项目*中将配置属性/常规/平台工具集*设置为 v100。

# mysql - 为了表格，我应该制作一个非索引表吗？

> ID：14971600
> 
> 赞同：0
> 
> 时间：2013-02-20T03:04:43.937
> 
> 标签：mysql, database

我正在建立一个数据库，我遇到了一种情况，为条目创建一个单独的表更有意义。但是，索引此表实际上没有意义。我可以将这个表与另一个表合并，但我相信它的形式很差（适用于这个项目，但不会普遍适用）。

有什么提示或建议吗？具体而言，索引表使用 GameId AI 跟踪“游戏”。有问题的表格将为每个玩家提供一个单独的条目（因此像 PlayerGame 这样的表格）。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T05:02:30.537

必须在 gameid 和 playerid 上添加索引

# android - 如何获得其他活动的价值

> ID：14971610
> 
> 赞同：0
> 
> 时间：2013-02-20T03:06:18.073
> 
> 标签：android

我按照这个网站做项目 [http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/](http://www.androidhive.info/2012/01/android-login-and-registration-with-php-mysql-and-sqlite/)

现在，我想获取用户名到其他活动并显示它。我试过了，但我不能成功。我该怎么办？那是我的代码

 `````
public class LoginActivity extends Activity {
Button btnLogin;
EditText inputusername;
EditText inputPassword;
TextView loginErrorMsg;

// JSON Response node names
private static String KEY_SUCCESS = "success";
private static String KEY_ERROR = "error";
private static String KEY_ERROR_MSG = "error_msg";
private static String KEY_UID = "uid";
private static String KEY_NAME = "name";
private static String KEY_EMAIL = "email";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.login);

    // Importing all assets like buttons, text fields
    inputusername = (EditText) findViewById(R.id.loginusername);
    inputPassword = (EditText) findViewById(R.id.loginPassword);
    btnLogin = (Button) findViewById(R.id.btnLogin);
    loginErrorMsg = (TextView) findViewById(R.id.login_error);

    // Login button Click Event
    btnLogin.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            String username = inputusername.getText().toString();
            String password = inputPassword.getText().toString();
            UserFunctions userFunction = new UserFunctions();
            Log.d("Button", "Login");
            JSONObject json = userFunction.loginUser(username, password);

            // check for login response
            try {
                if (json.getString(KEY_SUCCESS) != null) {
                    loginErrorMsg.setText("");
                    String res = json.getString(KEY_SUCCESS); 
                    if(Integer.parseInt(res) == 1){
                        // user successfully logged in
                        // Store user details in SQLite Database
                        DatabaseHandler db = new DatabaseHandler(getApplicationContext());
                        JSONObject json_user = json.getJSONObject("user");

                        // Clear all previous data in database
                        userFunction.logoutUser(getApplicationContext());
                        db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID));     

                        //get username
                        EditText et = (EditText)findViewById(R.id.loginusername);
                        String name = et.getText().toString();

                        //new Intent对
                        Intent intent = new Intent();
                        intent.setClass(LoginActivity.this, DashboardActivity.class);

                        Bundle bundle = new Bundle();
                        bundle.putString("name",name);

                        intent.putExtras(bundle);

                        startActivity(intent);

                        // Launch Dashboard Screen
                        Intent dashboard = new Intent(getApplicationContext(), DashboardActivity.class);

                        // Close all views before launching Dashboard
                        dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(dashboard);

                        // Close Login Screen
                        finish();
                    }else{
                        // Error in login
                        loginErrorMsg.setText("Incorrect username/password");
                    }
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
    });

}
} 
````  ``````
public class DashboardActivity extends Activity {
UserFunctions userFunctions;
Button btnLogout;
Button btnViewOrders;
Button btnViewProfile;

private EditText hihi;

String pid;

private static String KEY_NAME = "name";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //get Intent Bundle
    Bundle bundle = this.getIntent().getExtras();       

    String name = bundle.getString("name");     

    TextView mytv = (TextView)findViewById(R.id.abc);
    mytv.setText("you name is:" + name); 

    /**
     * Dashboard Screen for the application
     * */
    // Check login status in database
    userFunctions = new UserFunctions();
    if(userFunctions.isUserLoggedIn(getApplicationContext())){
   // user already logged in show databoard
        setContentView(R.layout.dashboard);
        btnLogout = (Button) findViewById(R.id.btnLogout);

        btnLogout.setOnClickListener(new View.OnClickListener() {

            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                userFunctions.logoutUser(getApplicationContext());
                Intent login = new Intent(getApplicationContext(), LoginActivity.class);
                login.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(login);
                // Closing dashboard screen
                finish();
            }
        });

    }else{
        // user is not logged in show login screen
        Intent login = new Intent(getApplicationContext(), LoginActivity.class);
        login.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(login);
        // Closing dashboard screen
        finish();
    }
}    

} 
````  `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T03:17:50.983

您正在创建两个意图。第一个包含捆绑包，但随后您立即创建一个没有捆绑包的意图来启动第二个活动，该活动覆盖第一个活动。如果您愿意，只需将标志添加到原始意图：

```
//new Intent对
Intent intent = new Intent();
intent.setClass(LoginActivity.this, DashboardActivity.class);

Bundle bundle = new Bundle();
bundle.putString("name",name);

intent.putExtras(bundle);
intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

startActivity(intent); 
```

根本不需要第二个意图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:17:04.833

尝试以下方法：-

```
pass value from one activity (Activity1.java)

       Intent myIntent = new Intent(Activity1.this, Activity2.class);
       myIntent.putExtra("name","name");
       myIntent.putExtra("id","65");
       startActivity(myIntent); 

get value from another activity  (Activity2.java)

    Intent intent = getIntent();
    String name=intent.getStringExtra("name");
    String id=intent.getStringExtra("id"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T04:33:13.297

尝试以下代码：

从 LoginActivity 传递值：

```
Intent intent = new Intent(getApplicationContext(),DashboardActivity.class);
intent.putExtra("name",name);
startActivity(intent); 
```

要在 DashboardActivity 中获取价值：

```
Bundle extras = getIntent().getExtras();
if (extras != null) {
String name = extras.getString("name");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T04:49:51.757

如果您使用“共享偏好”，而不是使用意图，它将更加简单和可靠````

# r - 索引矩阵是否/应该与 xts 对象一起使用？

> ID：14971612
> 
> 赞同：4
> 
> 时间：2013-02-20T03:06:46.823
> 
> 标签：r, xts

当我将索引矩阵与 xts 对象一起使用时，我得到了令人惊讶的结果。见下文。

如果我将 x 强制转换为矩阵（不出所料），它会按预期工作。

感谢您的任何帮助。

```
> data(sample_matrix)
> x<- as.xts(sample_matrix)
> i<- matrix(1:4, 2, 2,  byrow=T )
> i
     [,1] [,2]
[1,]    1    2
[2,]    3    4
> head(x)
               Open     High      Low    Close
2007-01-02 50.03978 50.11778 49.95041 50.11778
2007-01-03 50.23050 50.42188 50.23050 50.39767
2007-01-04 50.42096 50.42096 50.26414 50.33236
2007-01-05 50.37347 50.37347 50.22103 50.33459
2007-01-06 50.24433 50.24433 50.11121 50.18112
2007-01-07 50.13211 50.21561 49.99185 49.99185
> x[i]<- NA
> head(x)
               Open     High      Low    Close
2007-01-02       NA 50.11778 49.95041 50.11778
2007-01-03       NA 50.42188 50.23050 50.39767
2007-01-04       NA 50.42096 50.26414 50.33236
2007-01-05       NA 50.37347 50.22103 50.33459
2007-01-06 50.24433 50.24433 50.11121 50.18112
2007-01-07 50.13211 50.21561 49.99185 49.99185 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T04:34:12.437

我有一个解决方法。代替

```
x[i]<- NA 
```

使用核心数据：

```
> coredata(x)[i]<- NA
> head(x)
               Open     High      Low    Close
2007-01-02 50.03978       NA 49.95041 50.11778
2007-01-03 50.23050 50.42188 50.23050 50.39767
2007-01-04 50.42096 50.42096 50.26414       NA
2007-01-05 50.37347 50.37347 50.22103 50.33459
2007-01-06 50.24433 50.24433 50.11121 50.18112
2007-01-07 50.13211 50.21561 49.99185 49.99185 
```

尽管在我（初学者）看来，xts 在原始代码中做错了事。

# python - 如何编写 setup.py 来安装除一个子模块之外的软件包？

> ID：14971616
> 
> 赞同：1
> 
> 时间：2013-02-20T03:07:44.763
> 
> 标签：python, distutils

我正在将一个库移植到 python 3，但是，它的一个子模块严重损坏，因此 Python 3 上的所有单元测试都失败了，作者建议我删除它而不是等待他修复它。但是，如果我这样做，合并肯定会更加困难。有没有办法告诉 distutils 不要安装它（或其测试用例）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:28:56.273

查看[指定要分发的文件](http://docs.python.org/2/distutils/sourcedist.html#specifying-the-files-to-distribute)和[清单相关选项](http://docs.python.org/2/distutils/sourcedist.html#manifest-related-options)。

# xcode - 如何从创建的方法返回类型 UILabel

> ID：14971617
> 
> 赞同：0
> 
> 时间：2013-02-20T03:07:53.490
> 
> 标签：xcode, xcode4, xcode4.5

我有这个

```
UILabel *selectedLabel;
    selectedLabel = nil;
    if (is_x) {
        selectedLabel = labelField_x;
    } else if (is_y) {
        selectedLabel = labelField_y;
    } else if (is_z) {
        selectedLabel = labelField_z;
    } 
```

为了防止这种情况在代码中重复，我怎样才能创建一个返回类型 UILabel 类的方法。

我试过这个（它不起作用）：

在头文件（.h）文件中：

```
//new method
- (UILabel *) selected; 
```

在实现（.m）文件中：

```
- (UILabel *) selected {
 UILabel *selectedLabel;
    selectedLabel = nil;
    if (is_x) {
        selectedLabel = labelField_x;
    } else if (is_y) {
        selectedLabel = labelField_y;
    } else if (is_z) {
        selectedLabel = labelField_z;
    }
return selectedLabel;
}

- (IBAction)buttonPressed:(id)sender{
 [self selected];

} 
```

如何在 IBAction 中返回 selectedLabel。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:11:57.870

您的代码看起来不错，您需要做的就是`UILabel`在 buttonPressed: 方法中创建一个变量来存储对返回标签的引用。所以改变

```
[self selected]; 
```

到：

```
UILabel *selectedLabel = [self selected];
// Now do what you want with the selectedLabel 
```

# python - 使用 SQLAlchemy 正确使用 MySQL 全文搜索

> ID：14971619
> 
> 赞同：8
> 
> 时间：2013-02-20T03:08:28.517
> 
> 标签：python, mysql, full-text-search, sqlalchemy

我希望能够在我的 SQLAlchemy 映射对象之一的多个文本字段中进行全文搜索。我还希望我的映射对象支持外键和事务。

我打算使用 MySQL 来运行全文搜索。但是，我知道 MySQL 只能在不支持事务和外键的 MyISAM 表上运行全文搜索。

为了实现我的目标，我计划创建两个表。我的代码将如下所示：

```
class User(Base):
    __tablename__ = 'users'
    id = Column(Integer, primary_key=True)
    name = Column(String(50))
    description = Column(Text)

users_myisam = Table('users_myisam', Base.metadata,
                     Column('id', Integer),
                     Column('name', String(50)),
                     Column('description', Text),
                     mysql_engine='MyISAM')

conn = Base.metadata.bind.connect()
conn.execute("CREATE FULLTEXT INDEX idx_users_ftxt \
              on users_myisam (name, description)") 
```

然后，搜索我将运行这个：

```
q = 'monkey'
ft_search = users_myisam.select("MATCH (name,description) AGAINST ('%s')" % q)
result = ft_search.execute()
for row in result: print row 
```

这似乎有效，但我有几个问题：

1.  我创建两个表来解决我的问题的方法是否合理？有没有标准/更好/更清洁的方法来做到这一点？

2.  是否有一种 SQLAlchemy 方法来创建全文索引，或者我最好像上面那样直接执行“CREATE FULLTEXT INDEX ...”？

3.  看起来我在搜索/匹配查询时遇到了 SQL 注入问题。如何选择“SQLAlchemy 方式”来解决这个问题？

4.  有没有一种干净的方法可以将 users_myisam 选择/匹配直接加入我的用户表并返回实际的用户实例，因为这是我真正想要的？

5.  为了使我的 users_myisam 表与我的映射对象用户表保持同步，我在我的 User 类上使用 MapperExtension 并设置 before_insert、before_update 和 before_delete 方法来适当地更新 users_myisam 表是否有意义，或者是有更好的方法来做到这一点吗？

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-24T18:03:51.023

> 我创建两个表来解决我的问题的方法是否合理？有没有标准/更好/更清洁的方法来做到这一点？

我以前从未见过这种用例尝试过，因为重视事务和约束的开发人员往往首先使用 Postgresql。我知道这在您的特定情况下可能是不可能的。

> 是否有一种 SQLAlchemy 方法来创建全文索引，或者我最好像上面那样直接执行“CREATE FULLTEXT INDEX ...”？

conn.execute() 很好，但如果你想要更集成的东西，你可以使用 DDL() 构造，通读[http://docs.sqlalchemy.org/en/rel_0_8/core/schema.html?highlight=ddl#定制-ddl](http://docs.sqlalchemy.org/en/rel_0_8/core/schema.html?highlight=ddl#customizing-ddl)了解详情

> 看起来我在搜索/匹配查询时遇到了 SQL 注入问题。如何选择“SQLAlchemy 方式”来解决这个问题？

**注意**：此配方*仅*适用于`MATCH`同时针对多列 - 如果您只有一列，请更简单地使用[match()运算符。](http://docs.sqlalchemy.org/en/rel_1_0/core/sqlelement.html#sqlalchemy.sql.operators.ColumnOperators.match)

基本上你可以使用 text() 构造：

```
from sqlalchemy import text, bindparam

users_myisam.select(
  text("MATCH (name,description) AGAINST (:value)", 
       bindparams=[bindparam('value', q)])
) 
```

更全面地，您可以定义一个自定义构造：

```
from sqlalchemy.ext.compiler import compiles
from sqlalchemy.sql.expression import ClauseElement
from sqlalchemy import literal

class Match(ClauseElement):
    def __init__(self, columns, value):
        self.columns = columns
        self.value = literal(value)

@compiles(Match)
def _match(element, compiler, **kw):
    return "MATCH (%s) AGAINST (%s)" % (
               ", ".join(compiler.process(c, **kw) for c in element.columns),
               compiler.process(element.value)
             )

my_table.select(Match([my_table.c.a, my_table.c.b], "some value")) 
```

文档：

[http://docs.sqlalchemy.org/en/rel_0_8/core/compiler.html](http://docs.sqlalchemy.org/en/rel_0_8/core/compiler.html)

> 有没有一种干净的方法可以将 users_myisam 选择/匹配直接加入我的用户表并返回实际的用户实例，因为这是我真正想要的？

您可能应该创建一个 UserMyISAM 类，像 User 一样映射它，然后使用 relationship() 将两个类链接在一起，然后像这样的简单操作是可能的：

```
query(User).join(User.search_table).\
           filter(Match([UserSearch.x, UserSearch.y], "some value")) 
```

> 为了使我的 users_myisam 表与我的映射对象用户表保持同步，我在我的 User 类上使用 MapperExtension 并设置 before_insert、before_update 和 before_delete 方法来适当地更新 users_myisam 表是否有意义，或者是有更好的方法来做到这一点吗？

MapperExtensions 已被弃用，因此您至少会使用[事件 API](http://docs.sqlalchemy.org/en/rel_0_8/core/event.html)，并且在大多数情况下，我们希望尝试在刷新过程之外应用对象突变。在这种情况下，我将使用 User 的构造函数，或者使用[init 事件](http://docs.sqlalchemy.org/en/rel_0_8/orm/events.html#sqlalchemy.orm.events.InstanceEvents.init)，以及一个基本的[@validates](http://docs.sqlalchemy.org/en/rel_0_8/orm/mapper_config.html?highlight=validates#sqlalchemy.orm.validates)装饰器，它将接收 User 上目标属性的值并将这些值复制到`User.search_table`.

总的来说，如果您一直在从其他来源（如 Oreilly 书）学习 SQLAlchemy，那么它确实已经过时多年了，我将专注于当前的在线文档。

# android - Android Emulator 未在 Virtualbox Ubuntu 实例中启动

> ID：14971621
> 
> 赞同：1
> 
> 时间：2013-02-20T03:08:40.753
> 
> 标签：android, eclipse, virtual-machine, virtualbox

我正在使用 Windows 7 64 位（12 GB RAM），VirtualBox 4.2.4 运行 Linux Ubuntu 12.04 32 位实例。

我的 Ubuntu VM 有 128MB 的显存、3D 加速、4GB 的 RAM、2 个 CPU 处理器和充足的空间。

我在我的 VirtualBox 实例中安装了 Eclipse Juno，从[http://developers.android.com](http://developers.android.com)下载了 Android SDK 。

我使用 ARM CPU 将我的 AVD 设置为运行 Android 4.2，API 级别为 17。

在 Eclipse 中，我创建了一个新的 Android 应用程序（一个基本应用程序）并尝试运行它。不过，模拟器永远不会加载。

尝试启动时出现以下错误的变体：

```
OpenGL Warning: glXGetFBConfigAttrib for 0x9dbb250, failed to get XVisualInfo
OpenGL Warning: XGetVisualInfo returned 0 visuals for 0x9dbb328 
```

我对 XGetVisualInfo 做了一些研究，它似乎与 VirtualBox 相关。任何人都可以提供指针吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T03:48:15.093

您不能这样做有两个原因：模拟器使用 Intel 虚拟化技术 (VT) 或 AMD 虚拟化 (AMD) 扩展，但这已被运行在 VirtualBox 内的 Ubuntu VM 使用，您不能在其中再次使用它一个已经在运行的虚拟机。

与调试/中断虚拟机相关的 CPU 中断也有同样的情况，该虚拟机也已被 VirtualBox 使用，并且无法由另一个嵌入式虚拟机再次共享，但我不记得关于这个的确切细节。

我不知道您在 VM 中运行模拟器的原因，但您可以做的一件事是直接在 VirtualBox 内部作为其自己的 VM 或在 VirtualBox 外部运行模拟器，并在 Eclipse 和模拟器之间建立连接。在网络上，您会找到很多关于如何直接在 VirtualBox 中运行模拟器的参考资料。我过去自己做过，没有问题。

# css - Twitter Bootstrap 1024px 固定宽度

> ID：14971627
> 
> 赞同：1
> 
> 时间：2013-02-20T03:09:14.197
> 
> 标签：css, twitter-bootstrap

我的项目需要我创建 1024px 固定宽度的网站。如何使用 Twitter Bootstrap，它使用 960px 固定宽度方法调整到 1024px 宽度。

拥有 1024 像素宽度的网站有什么缺点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T03:18:20.477

您可以创建 .container 类并将其分配为 1024px 的宽度。

```
.container{
            width:1024px;
           } 
```

你将不得不根据它重写类。

缩小尺寸可以使用小型显示器，浏览器中可以有滚动条。假设您创建的页面为 1024×768，它们将不适合将其分辨率设置为 800×600 的访问者的屏幕。

但是通常现在人们有更大的屏幕和很好的分辨率，所以你选择 1024px 大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T03:21:10.757

您实际上可以使用[自定义表单](http://twitter.github.com/bootstrap/customize.html)自定义 Twitter Bootstrap 。否则，您可以在此处设置 CSS：

```
.container{
    width: 1024px;
} 
```

# java - 构造一个只读的空列表的最佳方法是什么？

> ID：14971628
> 
> 赞同：2
> 
> 时间：2013-02-20T03:09:15.500
> 
> 标签：java, java-6

我正在我的系统中创建一个“事件”的不可变表示，因此对于在构造函数中传递的所有者列表，我想对它们进行只读视图。此外，如果他们传入`null`列表，我想在这种情况下创建一个只读的空列表。

现在，由于`Collections.unmodifiableList`犹豫不决`null`，我目前有这个：

```
userOwners_ = Collections.unmodifiableList(userOwners != null 
                                           ? userOwners 
                                           : new ArrayList<String>(0)); 
```

但这似乎有点丑陋和低效。在 Java 中有没有更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-20T03:19:50.767

`Collections.emptyList()`. 但说真的，`null`应该是NPE。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T03:20:11.983

一个同样丑陋但效率略高的答案是

```
userOwners_ = userOwners != null ? 
                  Collections.unmodifiableList(userOwners) :
                  Collections.emptyList(); 
```

然而，还有一些其他的事情需要观察。

1.  似乎在某个时候，有人决定用`null`来表示一个空列表。那是糟糕的设计......并导致需要特殊处理。最好将其设置为新列表，或者`emptyList()`如果您知道列表始终为空。

2.  如果您没有有意识地决定这`null`是表示空列表的方式，那么这`null`是“意外的”，您应该让它抛出一个 NPE，以便您可以追踪并修复原因。（它可能是您假设在其他地方初始化的变量......但不是。这是一个错误。）

3.  关于您想要“只读”列表还是“不可变”列表存在一些混淆：

    *   该`unmodifiableList()`方法为您提供了一个您无法修改的列表；即它是“只读的”。但是原始列表仍然可以修改，并且这些更改将通过“只读”包装器可见。
    *   如果您想要一个“不可变”列表（即根本无法更改的列表），您需要`clone()`原始列表，然后使用`unmodifiableList()`.
    *   这些都不会使列表的元素（“所有者”对象）不可变（如果它们还不是不可变的）。
4.  标识符`userOwners_`是最广泛接受/使用的 Java 样式指南中的代码样式违规。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T03:16:57.987

结果 userOwners_ 仍然是可变的 - 对 userOwners 的任何更改都将成为 userOwners_ 的一部分。

如果您真的希望该成员变量是不可变的，那么正确的方法是：

```
private final List<String> userOwners;

public MyObject(List<String> userOwners){
  this.userOwners = userOwners != null ? Collections.unmodifiableList(new ArrayList<String>(userOwners)) : Collections.emptyList();
} 
```

作为一个次要问题，您的成员变量命名不遵循 Java 样式指南（对于我们这些定期阅读 Java 代码的人来说，userOwners_ 很奇怪）

扩展另一张海报所写的内容：在接受公共方法的空输入（不抛出 NPE）之前，请认真思考。这种行为可以隐藏错误——最好是快速失败并迫使调用者思考他们在做什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T03:23:16.250

我的首选方式是使用[Guava](http://code.google.com/p/guava-libraries/)：

```
this.userOwners = ImmutableList.copyOf(Preconditions.checkNotNull(userOwners)); 
```

就像 tackline 的回答一样，这也会引发异常，而不是默默地将 null 转换为空列表。

与此处的其他答案不同， using`ImmutableList.copyOf()`确保调用者无法向您传递他们以后可以变异的列表。

# php - DateTime->format("U") 不返回带有时区信息的值

> ID：14971630
> 
> 赞同：0
> 
> 时间：2013-02-20T03:09:49.157
> 
> 标签：php, datetime, timezone

在 PHP 5.2 中，我使用以下代码从 DateTime 对象中获取时间戳。

```
$dateTime = new DateTime("now", new DateTimeZone("America/Los_Angeles") );

echo $dateTime->format("U"); 
```

问题是**format("U")**只返回服务器时间戳，即 UTC。

如何让它从太平洋时区（洛杉矶）返回时间戳？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T03:24:41.087

您对时间戳的概念不正确，时间戳与**时区无关**，它定义为**自协调世界时 (UTC) 午夜 1970 年 1 月 1 日以来经过的秒数**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:12:30.457

尝试在 PHP 脚本顶部设置时区。我认为时间戳总是UTC。使用 date() 函数将其格式化为您需要的格式。

```
 // set timezone to pacific time
    date_default_timezone_set('America/Los_Angeles'); 
```

# c# - 将枚举转换为列表

> ID：14971631
> 
> 赞同：124
> 
> 时间：2013-02-20T03:09:52.313
> 
> 标签：c#, .net, enums, generic-list

如何将以下枚举转换为字符串列表？

```
[Flags]
public enum DataSourceTypes
{
    None = 0,
    Grid = 1,
    ExcelFile = 2,
    ODBC = 4
}; 
```

我找不到这个确切的问题，这个[Enum to List](https://stackoverflow.com/questions/1167361/how-do-i-convert-an-enum-to-a-list-in-c)是最接近的，但我特别想要`List<string>`

* * *

## 回答 #1

> 赞同：225
> 
> 时间：2013-02-20T03:10:12.513

使用`Enum`的静态方法，[`GetNames`](http://msdn.microsoft.com/en-us/library/system.enum.getnames%28v=vs.110%29.aspx)。它返回 a `string[]`，如下所示：

```
Enum.GetNames(typeof(DataSourceTypes)) 
```

如果您想创建一个仅对一种类型执行此操作的方法，`enum`并将该数组转换为 a `List`，您可以编写如下内容：

```
public List<string> GetDataSourceTypes()
{
    return Enum.GetNames(typeof(DataSourceTypes)).ToList();
} 
```

您需要`Using System.Linq;`在班级顶部使用 .ToList()

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-07-09T19:00:44.793

我想添加另一个解决方案：就我而言，我需要在下拉按钮列表项中使用 Enum 组。所以他们可能有空间，即需要更多用户友好的描述：

```
 public enum CancelReasonsEnum
{
    [Description("In rush")]
    InRush,
    [Description("Need more coffee")]
    NeedMoreCoffee,
    [Description("Call me back in 5 minutes!")]
    In5Minutes
} 
```

在辅助类（HelperMethods）中，我创建了以下方法：

```
 public static List<string> GetListOfDescription<T>() where T : struct
    {
        Type t = typeof(T);
        return !t.IsEnum ? null : Enum.GetValues(t).Cast<Enum>().Select(x => x.GetDescription()).ToList();
    } 
```

当您调用此助手时，您将获得项目描述列表。

```
 List<string> items = HelperMethods.GetListOfDescription<CancelReasonEnum>(); 
```

补充：无论如何，如果你想实现这个方法，你需要枚举的 :GetDescription 扩展。这就是我使用的。

```
 public static string GetDescription(this Enum value)
    {
        Type type = value.GetType();
        string name = Enum.GetName(type, value);
        if (name != null)
        {
            FieldInfo field = type.GetField(name);
            if (field != null)
            {
                DescriptionAttribute attr =Attribute.GetCustomAttribute(field,typeof(DescriptionAttribute)) as DescriptionAttribute;
                if (attr != null)
                {
                    return attr.Description;
                }
            }
        }
        return null;
        /* how to use
            MyEnum x = MyEnum.NeedMoreCoffee;
            string description = x.GetDescription();
        */

    } 
```

# php - 检查数组时PHP If语句不起作用

> ID：14971632
> 
> 赞同：0
> 
> 时间：2013-02-20T03:09:57.363
> 
> 标签：php, if-statement

我有这个 If 语句来检查用户提交的数据。首先将数据转换为一个数组，然后将其传递给该 if 语句所在的函数。

```
$errCount = 0;
$errMSG ='';
// Check Name
if ($submitData['FullName'] != '') {
    if (strlen ($submitData['FullName']) < 4) {
        $errCount + 1;
        $errMSG .='The Full Name was too short!';
    }
} else {
    $errCount + 1;
    $errMSG .='The Full Name Field was left blank!';
} 
```

当它运行时，即使是空字符串，也不会触发任何错误。

我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T05:24:27.750

增加 $errCount 变量时，您没有为其赋值；

```
$errCount = 0;
$errMSG ='';
$submitData['FullName']='';
// Check Name
if ($submitData['FullName'] != '') {

if (strlen ($submitData['FullName']) < 4) {
    $errCount=$errCount + 1; // or u can write  $errCount++;
    $errMSG .='The Full Name was too short!';
    }
} else {

 $errCount=$errCount + 1; // or u can write  $errCount++;
$errMSG .='The Full Name Field was left blank!';
}

echo $errMSG;

echo $errCount; 
```

这将工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:25:03.820

```
$errCount = 0;
$errMSG ='';
// Check Name

if(isset($submitData['FullName']) && strlen ($submitData['FullName'])>0 && strlen ($submitData['FullName'])<4)
{
    $errCount++;
    $errMSG .='The Full Name was too short!';
}
else if($submitData['FullName'] == '')
{
    $errCount++;
    $errMSG .='The Full Name Field was left blank!';
}
else
{
    //success
} 
```

# php - Magento：自定义产品集合不会填充分层导航/过滤器损坏

> ID：14971636
> 
> 赞同：0
> 
> 时间：2013-02-20T03:10:07.193
> 
> 标签：php, magento, magento-1.5, layered-navigation

我正在构建一个自定义的“销售”页面，该页面将自动显示任何具有销售价格的产品。

我的方法是获取整个产品集合并添加可见的过滤器，具有销售价格，具有图像（我们的商店需要，因为我们与 POS 系统集成，因此产品会自动创建并从 POS 可见）。

我获取产品的代码如下所示：

```
$_productCollection = Mage::getResourceModel('catalog/product_collection');
        $_productCollection->setVisibility(Mage::getSingleton('catalog/product_visibility')->getVisibleInCatalogIds());
        $_productCollection = $this->_addProductAttributesAndPrices($_productCollection)
         ->addStoreFilter() 
         ->addAttributeToSort('entity_id', 'desc') //THIS WILL SHOW THE LATEST PRODUCTS FIRST
        ->addAttributeToFilter('special_price', array('notnull' => 1)) // only products where special_price is not empty
        ->addAttributeToFilter('thumbnail', array('neq' => 'no_selection'))
         ->setPageSize($this->get_prod_count())
         ->setCurPage($this->get_cur_page());
        $this->setProductCollection($_productCollection);

$_helper = $this->helper('catalog/output');
$this->setData('column_count',5); 
```

它按预期工作，我得到了一份有库存、在售、可见并有图像的产品列表。唯一的问题是不再填充分层导航。该类别绝对设置为“锚”，所以这不是问题。

我相信这是因为分层导航正在寻找分配给该类别的产品并且该类别为空 - 它使用的是自定义模板，该模板调用/覆盖上述产品集合。

所以我的问题是，如果我对上述假设是正确的，我怎样才能将集合的结果发送到分层导航？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:54:55.657

我认为您必须创建一个类别，然后将您的收藏结果添加到其中，因此新类别将包含产品并显示图层导航。建议：在尝试任何新事物之前，请先备份。

# linux - Linux：将命令的输出重定向到“查找”

> ID：14971643
> 
> 赞同：0
> 
> 时间：2013-02-20T03:10:35.320
> 
> 标签：linux, shell

我有一个文件名列表作为某些命令的输出。我需要在给定目录中找到这些文件中的每一个。

我尝试了以下命令：

```
ls -R /home/ABC/testDir/ | grep "\.java" | xargs find /home/ABC/someAnotherDir -iname 
```

但它给了我以下错误：

```
find: paths must precede expression: XYZ.java 
```

什么是正确的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T03:12:35.803

```
ls -R /home/ABC/testDir/ | grep -F .java | 
    while read f; do find . -iname "$(basename $f)"; done 
```

您也可以使用`${f##*/}`代替 basename。或者;

```
find /home/ABC/testDir -iname '*.java*' | 
 while read f; do find . -iname "${f##*/}"; done 
```

请注意，毫无疑问，许多人会反对在`ls`不使用空字节作为文件名分隔符的情况下解析或查找的输出，声称文件名中的空格会导致问题。这些人通常会忽略文件名中的换行符，他们的反对意见可以被安全地忽略。（只要您的文件名中不允许有空格，就是这样！）

更好的选择是：

```
find /home/ABC/testDir -iname '*.java' -exec find . -iname {} 
```

xargs 不起作用的原因是您不能在 find 中将 2 个参数传递给 -iname。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:12:31.963

查找 /home/ABC/testDir -name "\.java"

# ruby-on-rails - Gem 依赖冲突

> ID：14971644
> 
> 赞同：3
> 
> 时间：2013-02-20T03:10:40.093
> 
> 标签：ruby-on-rails, rubygems, dependencies, bundler, omniauth

我遇到了与一年多前发布的上一个问题类似的问题。 [如何在 Rails 3（捆绑器）中解决这个 gem 依赖问题？](https://stackoverflow.com/questions/6559863/how-do-i-fix-this-gem-dependency-problem-in-rails-3-bundler)

我是 ROR 的新手。尝试`bundle install`在应用程序上运行时，我收到以下信息：

`Could not find twitter-2.5.0 in any of the sources`

我试图删除我的 Gemfile.lock。并`bundle install`再次尝试。并收到输出：

```
Bundler could not find compatible versions for gem "faraday":
  In Gemfile:
    twitter (>= 0) ruby depends on
      faraday (~> 0.8) ruby

    omniauth (~> 0.3.2) ruby depends on
      faraday (0.7.3) 
```

结果来自`gem list`

```
*** LOCAL GEMS ***

abstract (1.0.0)
actionmailer (3.0.19, 3.0.10)
actionpack (3.0.19, 3.0.10)
activemodel (3.0.19, 3.0.10)
activerecord (3.0.19, 3.0.10)
activeresource (3.0.19, 3.0.10)
activesupport (3.0.19, 3.0.10)
addressable (2.3.3, 2.2.8)
arel (2.0.10)
bcrypt-ruby (3.0.1)
bitly (0.8.0)
bson (1.6.4)
bson_ext (1.6.2)
builder (2.1.2)
bundler (1.2.3)
capybara (1.1.2)
carrierwave (0.5.8)
carrierwave-mongoid (0.1.7)
chef (11.2.0)
childprocess (0.3.5)
crack (0.3.1)
devise (1.5.3)
diff-lcs (1.1.3)
erubis (2.6.6)
excon (0.16.1)
factory_girl (4.0.0)
factory_girl_rails (4.0.0)
faraday (0.8.5)
ffi (1.1.5)
fog (1.5.0)
formatador (0.2.3)
formtastic (1.2.4)
gibbon (0.3.5)
growl (1.0.3)
guard (1.3.2)
guard-rspec (1.2.1)
guard-spork (1.1.0)
haml (3.1.7)
haml-rails (0.3.4)
hashie (1.2.0)
highline (1.6.15)
httparty (0.8.3)
httpauth (0.2.0)
i18n (0.5.0)
ipaddress (0.8.0)
jquery-rails (1.0.19)
json (1.7.6)
jwt (0.1.5)
koala (1.6.0, 1.4.0)
libwebsocket (0.1.5)
linkedin (0.3.7)
listen (0.4.7)
log4r (1.1.10)
macaddr (1.6.1)
mail (2.2.19)
mime-types (1.21, 1.19)
mini_magick (3.4)
mixlib-authentication (1.3.0)
mixlib-cli (1.3.0)
mixlib-config (1.1.2)
mixlib-log (1.4.1)
mixlib-shellout (1.1.0)
mongo (1.6.2)
mongoid (2.2.6)
mongoid_slug (0.10.0)
mongoid_taggable (0.1.7)
multi_json (1.6.1, 1.0.4)
multi_xml (0.5.3, 0.4.4)
multipart-post (1.1.5)
net-ldap (0.2.2)
net-scp (1.0.4)
net-ssh (2.6.5, 2.5.2)
net-ssh-gateway (1.2.0)
net-ssh-multi (1.1)
nokogiri (1.5.6, 1.5.5)
oa-basic (0.3.2)
oa-core (0.3.2)
oa-enterprise (0.3.2)
oa-more (0.3.2)
oa-oauth (0.3.2)
oa-openid (0.3.2)
oauth (0.4.7, 0.4.6)
ohai (6.16.0)
omniauth (1.1.3, 0.3.2)
omniauth-facebook (1.4.1)
omniauth-oauth2 (1.1.1)
orm_adapter (0.0.7)
polyglot (0.3.3)
pyu-ruby-sasl (0.0.3.3)
rack (1.2.8, 1.2.6, 1.2.3)
rack-mount (0.6.14)
rack-openid (1.3.1)
rack-test (0.5.7)
rails (3.0.19, 3.0.10)
rails_config (0.3.1)
railties (3.0.19, 3.0.10)
rake (10.0.3, 0.9.2)
rb-fchange (0.0.5)
rb-fsevent (0.9.1)
rb-inotify (0.8.8)
rdiscount (1.6.8)
rdoc (3.12.1, 3.12)
remarkable (4.0.0.alpha4)
remarkable_activemodel (4.0.0.alpha4)
remarkable_mongoid (0.6.0)
rest-client (1.6.7)
rspec (2.11.0)
rspec-core (2.11.1)
rspec-expectations (2.11.2)
rspec-mocks (2.11.2)
rspec-rails (2.11.0)
ruby-hmac (0.4.0)
ruby-openid (2.2.0)
ruby-openid-apps-discovery (1.2.0)
rubygems-bundler (1.1.0)
rubyntlm (0.1.1)
rubyzip (0.9.9)
rvm (1.11.3.6)
sass (3.2.1)
selenium-webdriver (2.25.0)
simple-navigation (3.8.0)
simple_oauth (0.2.0)
soloist (0.9.7)
spork (0.9.2)
sqlite3 (1.3.7)
sqlite3-ruby (1.3.3)
stringex (1.4.0)
subexec (0.2.2)
systemu (2.5.2)
thor (0.14.6)
treetop (1.4.12)
twitter (4.5.0)
tzinfo (0.3.35, 0.3.29)
uuid (2.3.5)
warden (1.2.1) 
will_paginate (2.3.16)
XMLCanonicalizer (1.0.1)
xpath (0.1.4)
yajl-ruby (1.1.0) 
```

宝石文件：

```
source 'http://rubygems.org'

gem 'rails', '~> 3.0.19'

#gem 'sqlite3-ruby', :require => 'sqlite3'
gem "haml-rails"
gem "sass"
gem "mongoid"
gem "mongo", "1.6.2"
gem "bson_ext", "1.6.2"
gem 'formtastic', '~> 1.2'
gem 'devise', '~> 1.4'
gem "declarative_authorization", :git => 'git://github.com/opusmagnum/declarative_authorization.git'
gem 'mongoid_taggable'
gem 'rdiscount'
gem "simple-navigation", "~> 3.6"
gem "will_paginate", "~> 2.3.16"
gem 'mongoid_slug', :require => 'mongoid/slug'
gem "omniauth", "~> 0.3.2"
gem "twitter" 
gem "koala"
gem "bitly"
gem "linkedin"
gem "rails_config"
gem 'gibbon', '~> 0.1'
gem 's3_swf_upload', :git => 'git://github.com/nathancolgate/s3-swf-upload-plugin'
gem 'carrierwave'
gem 'carrierwave-mongoid', :require => 'carrierwave/mongoid'
gem 'fog'
gem "mini_magick", "~> 3.3"
gem "jquery-rails"

group :test, :development do
  gem "factory_girl_rails"
  gem 'rspec-rails'
  gem 'capybara'
  gem 'remarkable_mongoid'
  gem 'spork'
  gem 'guard'
  gem 'guard-rspec'
  gem 'guard-spork'
  gem 'rb-fsevent'
  gem 'growl'
end 
```

我也尝试了添加`gem 'twitter', :git => 'https://github.com/sferik/twitter.git'`到我的 gemfile 的建议，但也没有运气。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T05:59:38.837

Gemfile 中的一些 gem 被锁定到某些版本。这可能会在进行更新时产生问题，并且当您删除 Gemfile.lock 时，任何未锁定到版本的内容都会为最新的可能版本打开。通常我不认为删除锁定文件是一种好习惯。

相反，您应该运行`bundle update gemfile_name`以更新特定的 gem。运行`bundle update`将尝试将所有 gem 更新到版本约束允许的最新版本。

如果您查看 Gemfile.lock 文件（与 不同`gem list`），您将看到 gem、它们的版本以及它们的依赖项。

基于此，您应该能够找出加载法拉第作为依赖项，并尝试放宽版本约束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-02T03:48:33.423

This answer is very late, but you inadvertently upgraded the twitter gem, which was yanked as gruzy notes in a comment here.

Just specify another repo, with a tag that's not broken for you and does not conflict with faraday. For me, this was:

```
gem 'twitter', :git => 'https://github.com/sferik/twitter.git', :tag => 'v2.2.0' 
```

You probably just replace `v2.2.0` with `v2.5.0`, and the breakage should be gone.

# java - 有没有 .charAt().contains() 这样的东西？

> ID：14971647
> 
> 赞同：-1
> 
> 时间：2013-02-20T03:10:56.437
> 
> 标签：java

有没有办法将字符串中的单个字符与另一个字符串进行比较？这是一个例子：

```
String a = "0123456789";
String b = "5 + 3 / 2";

if(b.charAt(0) == 'something in string a') {
    // do something
} 
```

或者

```
b.charAt(i).contains(a) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T03:14:26.597

我认为您正在寻找相反的结果-而不是检查“b 是否在 a”中，而是检查“a 是否包含 b”。

[`String.contains`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)在这种情况下不会很有效，但你可以做`a.indexOf(b.charAt(0)) != -1`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T03:14:43.680

如果你想知道第一个字符是否`b`是其中的一个，`a`那么你可以这样做：

```
if (a.indexOf(b.charAt(0)) != -1) ... 
```

换句话说，在字符串中搜索该字符，而不是尝试以相反的方式进行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T03:15:17.070

试试这个：

```
if(a.indexOf(b.charAt(0)) != -1){
   //There's a match
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T03:14:25.367

`if("something in string a".contains(b.charAt(0)))`---> 做某事

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-20T03:17:48.440

1)`.contains()`是 String 类方法，因此不能用于原始数据类型 char
2) 您可以像整数 b.charAt(i) == c.charAt(j) 一样与 chars 进行比较，但不能将 char 与 String 进行比较

# cocoa - drawLayer:inContext: 在使用 Layer-Hosting NSView 时在内容上绘制背景

> ID：14971649
> 
> 赞同：0
> 
> 时间：2013-02-20T03:11:16.680
> 
> 标签：cocoa, core-animation, calayer, nsview, appkit

这让我有些痛苦……

我希望在我的应用程序中使用图层托管视图，但我遇到了这个奇怪的问题。

这是一个简单的例子。只需在 Xcode 中创建一个新项目并在 AddDelegate 中输入以下内容即可实现：（将 QuartzCore 添加到项目后）：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    NSView *thisView = [[NSView alloc] initWithFrame:CGRectInset([self.window.contentView bounds], 50, 50)];

    [thisView setLayer:[CALayer layer]];
    [thisView setWantsLayer:YES];
    thisView.layer.delegate = self;

    thisView.layer.backgroundColor = CGColorCreateGenericRGB(1,1,0,1);
    thisView.layer.anchorPoint = NSMakePoint(0.5, 0.5);
    [self.window.contentView addSubview:thisView];

    //Create custom content
    [thisView.layer display];
} 
```

我还实现了以下 CALayer Delegate 方法：

```
- (void)drawLayer:(CALayer *)layer inContext:(CGContextRef)ctx {
    [[NSColor blueColor] setFill];
    NSBezierPath *theBez = [NSBezierPath bezierPathWithOvalInRect:layer.bounds];
    [theBez fill];
} 
```

如果我运行这段代码，我可以看到子视图被添加到 windows contentView （大黄色矩形），我假设它是一个图层托管视图......我可以看到椭圆形被绘制成蓝色，但是它位于黄色矩形*下方*，其原点位于主窗口中的 (0,0) 处……就像它实际上并未在黄色层内绘制一样。

我猜我的视图不是真正的图层托管，或者传递给图层的上下文是错误的......但为什么它会在下面？

我一定做错了什么...

继续奇怪，如果我向图层添加 CABasicAnimation，如下所示：

```
CABasicAnimation *myAnimation = [CABasicAnimation animation];
myAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation"];
myAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
myAnimation.fromValue = [NSNumber numberWithFloat:0.0];
myAnimation.toValue = [NSNumber numberWithFloat:((360*M_PI)/180)];

myAnimation.duration = 1.0;
myAnimation.repeatCount = HUGE_VALF;

[thisView.layer addAnimation:myAnimation forKey:@"testAnimation"];
thisView.layer.anchorPoint = NSMakePoint(0.5, 0.5); 
```

黄色背景得到动画，围绕其中心旋转，但蓝色椭圆在图层框架内正确绘制（但也在外面，在窗口的原点，所以它存在两次）但没有动画。当然，我希望椭圆与图层的其余部分一起旋转。

我已经在[这里](http://lagente.ca/LayerTesting.zip)为那些愿意提供帮助的人提供了这个项目。

雷诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:51:16.173

知道了。我很困惑，在这种情况下调用的上下文是 CGContextRef，而不是 NSGraphicsContext！

我似乎能够通过从 CGContextRef 设置 NSGraphicsContext 来获得我需要的结果：

```
NSGraphicsContext *gc = [NSGraphicsContext graphicsContextWithGraphicsPort:ctx flipped:NO];
[NSGraphicsContext saveGraphicsState];

[NSGraphicsContext setCurrentContext:gc]; 
```

//这里插入绘图代码

```
[NSGraphicsContext restoreGraphicsState]; 
```

# python - 为合并和展平树结构设置合并

> ID：14971652
> 
> 赞同：3
> 
> 时间：2013-02-20T03:11:37.337
> 
> 标签：python, data-structures, merge, tree-traversal

我有一组这样的数据：

```
data = { 1: {"root": [2],
             "leaf": [10, 11, 12],
             },
         2: {"root": [1,3],
             "leaf": [13, 14, 15],
             },
         3: { "root": [2],
              "leaf": [16, 17],
            },
         4: {"root": [],
             "leaf": [17, 18, 19],
             },
         5: { "root": [],
              "leaf": [20, 21]
             },
       } 
```

从这些数据中，初始键是根节点索引，它包含一个解释哪些根节点和叶节点与其相关的字典。

我想将所有索引合并到相关列表中。

*   由根索引连接的根索引，两个/所有根索引和所有叶索引都合并在结果列表中。
*   根索引可以通过叶连接到另一个根，根索引和所有叶索引合并到结果列表中。

我在找出遍历和合并数据的最佳方法时遇到了一些麻烦。从上述数据集中，**预期输出**为：

```
[[1, 2, 3, 4, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19], [5, 20, 21]] 
```

***Fixed Attempt***，似乎有效，有没有更有效的方法？

```
class MergeMachine(object):
    processed = []

    def merge(self, idx, parent_indexes, existing):
        if idx not in self.processed:
            parent_indexes.append(idx)
            if self.data[idx]["root"]:
                for related_root_idx in self.data[idx]["root"]:
                    if related_root_idx not in self.processed and related_root_idx not in parent_indexes:
                        existing.extend(self.merge(related_root_idx, parent_indexes, existing))
                        self.processed.append(related_root_idx)
            existing.append(idx)
            existing.extend(self.data[idx]["leaf"])
            self.processed.append(idx)
        return existing

    def process(self, data):
        results = []
        self.data = data
        for root_idx in self.data.keys():
            r = set(self.merge(root_idx, [], []))
            if r:
                combined = False
                for result_set in results:
                    if not r.isdisjoint(result_set):
                        result_set.union(r)
                        combined = True
                if not combined:
                    results.append(r)
        return results

mm = MergeMachine()
mm.process(data) 
```

有没有一种有效的方法将数据合并到*预期的输出*中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T03:39:16.533

我不知道这是否有效，但它似乎有效：

```
data = #your data as posted

data = [set ( [k] ) | set (v ['root'] ) | set (v ['leaf'] ) for k, v in data.items () ]
merged = []
while data:
    e0 = data [0]
    for idx, e in enumerate (data [1:] ):
        if e0 & e:
            data [idx + 1] = e | e0 #idx is off by 1 as I enumerate data [1:]
            break
    else: merged.append (e0)
    data = data [1:]

print (merged) 
```

我想在最坏的情况下（即不可能合并）成本应该是 O(n**2)。它是连续的，没有递归。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T04:56:19.630

我想出了这个，它与上面的类似，但并不完全相同。我的具有破坏性，它消耗输入数据结构，我认为它在同一点有界（如果没有输入数据相关，则为 On^2）。

```
def merge(data):
  result = []
  while data:
    k, v = data.popitem()
    temp = set([k]) | set(v['root']) | set(v['leaf'])
    for idx, test in enumerate(result):
      if test & temp:
        result[idx] |= temp
        break
    else:
      result.append(temp)
  return result 
```

# android - 有人有修改zxing二维码项目的经验吗？

> ID：14971655
> 
> 赞同：0
> 
> 时间：2013-02-20T03:12:00.280
> 
> 标签：android, zxing

我正在修改一个基于开源项目zxing的二维码项目，但是当我输入汉字时，发现从其他二维码软件得到的结果总是以“]Q2 \ 000026”为前缀. 我不明白这是什么意思。使用zxing-2.1版本。这是项目链接[http://code.google.com/p/zxing/](http://code.google.com/p/zxing/)。

我的项目代码是：

```
 @Override
public void run() {
    // TODO Auto-generated method stub
                 try {
            mTextContent = chinese test 中文测试";
            Bitmap bitmap = Create2DCode(mTextContent);
            return;
        } catch (WriterException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
}

public Bitmap Create2DCode(String str) throws WriterException {
    Map<EncodeHintType, Object> hints = new HashMap<EncodeHintType, Object>();
    hints.put(EncodeHintType.ERROR_CORRECTION, ErrorCorrectionLevel.Q);
    hints.put(EncodeHintType.CHARACTER_SET, "GBK");//UTF-8
    // hints.put(EncodeHintType.CHARACTER_SET, "UTF-8");//It's the same result.
    BitMatrix matrix = new MultiFormatWriter().encode(str,BarcodeFormat.QR_CODE, 500, 500, hints);
    int width = matrix.getWidth();
    int height = matrix.getHeight();
    int[] pixels = new int[width * height];
    for (int i = 0; i < pixels.length; i++) {
        pixels[i] = 0xffffffff;
    }
    for (int y = 0; y < height; y++) {
        for (int x = 0; x < width; x++) {
            if (matrix.get(x, y)) {
                pixels[y * width + x] = 0xff000000;
            }
        }
    }
    Bitmap bitmap = Bitmap.createBitmap(width, height,
            Bitmap.Config.ARGB_8888);
    bitmap.setPixels(pixels, 0, width, 0, 0, width, height);
    return bitmap;
} 
```

任何人都可以给我一些帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-09T03:11:13.093

我认为您使用的二维码软件可能不支持它。因为我曾经使用过 zxing lib 并编写了如下代码。中文可以被叫“wochacha”的应用识别，但不能被“wechat”识别

地图提示 = new HashMap(); hints.put(EncodeHintType.CHARACTER_SET, "UTF8"); BitMatrix 矩阵 = new MultiFormatWriter().encode(str,BarcodeFormat.QR_CODE, 400, 400, hints);

# c# - 使用 routes.maproute 和参数

> ID：14971661
> 
> 赞同：2
> 
> 时间：2013-02-20T03:13:09.063
> 
> 标签：c#, asp.net, asp.net-mvc-3, asp.net-mvc-4

我有一个参数，我想用作 URL 的默认结尾，但它目前是一个参数。我希望它始终指向 Home Controller & Index Action，但“/”成为 pageName 参数。

例如，我想要

```
http://localhost:18792/?pageName=HomePage 
```

可通过以下方式访问：

```
http://localhost:18792/HomePage 
```

这是我当前的 routes.maproute：

```
routes.MapRoute(
                name: "Default",
              url: "{controller}/{action}/{pageName}",
                defaults: new { controller = "Home", action = "Index", pageName = "HomePage" }
            ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T03:35:17.983

为此，您必须为每个页面创建一个路由。不要修改“默认”路由。. 添加新路线：

```
routes.MapRoute(
    name: "HomePage",
    url: "HomePage",  
    defaults: new { controller = "Home", action = "HomePage" }
); 
```

对于动态路由，您可以使用：

```
routes.MapRoute(
    name: "PageName",
    url: "{pageName}",  
    defaults: new { controller = "Home", action = "Index", pageName = "defaultPage" }
); 
```

它将映射到 ~/defaultpage 或 ~/homepage 与“主页”控制器中的操作“索引”：

```
 public ActionResult Index(string pageName)
    {
        ViewBag.Message = pageName;
        return View();
    } 
```

# api - 做 REST url 的正确方法是什么？

> ID：14971662
> 
> 赞同：4
> 
> 时间：2013-02-20T03:13:15.757
> 
> 标签：api, url, rest

```
domain.com/blog/How-To-Code/3 (page 3)
domain.com/user/alicejohnson/comments 
```

或者

```
domain.com/How-To-Code/3
domain.com/alicejohnson/comments 
```

Facebook 和 Quora 采用第二种方式：[http](http://www.quora.com/Swimming/Can-one-swim-from-New-Zealand-to-Australia) ://www.quora.com/Swimming/Can-one-swim-from-New-Zealand-to-Australia 他们去掉了名词，直奔对象。

Stackoverflow 采用第一种方式：[做 REST url 的正确方法是什么？](https://stackoverflow.com/questions/14971662/what-is-the-correct-way-to-do-rest-urls)

我应该做什么？

最重要的是，**这对 SEO 有何影响**？

另外，如果我做第二个版本，我该如何为此编写“路由器”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:30:59.857

也许将上面的“博客”和“用户”视为名称空间。如果 How-To-Code 有多种用途，您可能需要在其后面添加一些内容。

有些人倾向于对“适当的 REST”持迂腐态度，但我尽量避免这种情况。我会设计您的 URL 方案，使其符合您的需求，与工具配合使用，并允许您简单地将 URL 粘贴到浏览器中以测试您的代码。

# drupal - Drupal 6 有多个用户注册页面

> ID：14971665
> 
> 赞同：0
> 
> 时间：2013-02-20T03:13:35.227
> 
> 标签：drupal, drupal-6, captcha

我目前有一个 iOS 应用程序，除了一个小问题外，它已构建并运行。每当匿名用户通过网络创建帐户时（使用 Drupal 的用户注册表单），我想保留 CAPTCHA。但是，我想要另一个包含相同 Drupal 注册表单（没有验证码）的 URL，以便用户可以从 iOS 应用程序中创建一个帐户（应用程序使用 Drupal iOS SDK 和 userRegister 函数连接到 Drupal 站点）。

这在 Drupal 6 中可行吗？有没有办法克隆 user_register 表单，使原始表单具有 CAPTCHA 并位于 mysite.com/user/register，而 user_register_clone 表单没有 CAPTCHA 并位于 mysite.com/user/register/mobile？

在此先感谢，祝您有美好的白天/夜晚！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:57:34.437

在 autoassignrole ( [http://drupal.org/project/autoassignrole](http://drupal.org/project/autoassignrole) ) 模块中，有一个明显的示例，即克隆用户注册表单并在与注册不同的页面中创建注册过程。

该模块根据用户创建帐户的路径分配用户角色。

因此，您可以检查模块的代码以获取示例。

# php - PHP 爆炸词

> ID：14971667
> 
> 赞同：0
> 
> 时间：2013-02-20T03:13:40.880
> 
> 标签：php

我是 PHP 编程新手。我需要你的帮助来完成我的作业。

我想爆出下面这句话：**我爱我的乐队和我的猫**成数组。

但我需要使用**空格**和单词**以及**作为分隔符。所以它应该变成这样：

```
$arr[0] -> I
$arr[1] -> love
$arr[2] -> my
$arr[3] -> band
$arr[4] -> my
$arr[5] -> cat 
```

我试过这样：

```
$words = "I love my band and my cat"
$stopwords = "/ |and/";
$arr = explode($stopwords, $words); 
```

但问题是，它还会删除字符**并**从词**带**中删除，所以它变成了这样：

```
$arr[0] -> I
$arr[1] -> love
$arr[2] -> my
$arr[3] -> b
$arr[4] -> my
$arr[5] -> cat 
```

这不是我想要的。我想删除完全**和**的单词，而不是包含**和**字符的单词。

有没有办法解决这个问题？有谁能够帮我？非常感谢.. ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T03:23:59.227

如果您想避免`and`在单词中间分裂，您必须过滤结果列表 ( `array_diff`)，或者使用更复杂的正则表达式。然后还要考虑`preg_match_all`而不是拆分：

```
 preg_match_all('/  (?! \b and \b)  (\b \w+ \b)  /x', $input, $words); 
```

这只会搜索连续的单词字符，而不是分解空格。并且断言`?!`将跳过`and`.

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2013-02-20T03:19:31.497

尝试这个：

```
<?php
$words = "I love my band and my cat";
$clean = str_replace(" and",'',$words);
$array = explode(" ",$clean);
print_r($array);
?> 
```

# message-queue - 在分布式消息队列中实现容错

> ID：14971673
> 
> 赞同：3
> 
> 时间：2013-02-20T03:15:03.603
> 
> 标签：message-queue, distributed, distributed-system, fault-tolerance

假设下图中中间的消息队列失败了。发件人仍然可以获取使用其他消息队列发送的消息。

但是如果消息队列在收到消息后死亡会发生什么。发送方如何知道消息是否已发送给接收方以决定是否在不同的消息队列中重新发送？

类似地，如果接收者在消息队列将其消息传递给它之后死亡，会发生什么？发送者如何知道接收者是否满足了它的预期请求？

![在此处输入图像描述](../Images/919b0a905447a464553f68551e35e562.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T03:43:19.793

作为起点，您需要阅读[http://en.wikipedia.org/wiki/Two_Generals%27_Problem](http://en.wikipedia.org/wiki/Two_Generals%27_Problem)。

这是计算机科学中一个非常著名且非常常见的问题的一个例子。从技术上讲，它被认为是“已解决”，因为我们知道答案；但是，简短的故事是：您所要求的（严格来说）是不可能的。如果置信度<1.0，您可以设计一些协议，使您能够获得消息已经（或尚未）传递的任何程度的置信度。

在实践中，使用了两阶段和三阶段分布式事务协议的变体，以及各种重新传输和重新同步回退。具体取决于实施。

通常的选择是允许重复的可能性并要求接收方做出适当的响应。这是 TCP 做出的选择，如果您考虑一下，它就是试图为同一个问题找到一个合理的答案。

# asp.net - 显示用户名登录注销ASP

> ID：14971679
> 
> 赞同：0
> 
> 时间：2013-02-20T03:15:51.787
> 
> 标签：asp.net

我正在构建一个小型 Web 应用程序，我需要创建一个登录页面。我有自己的 MS-SQL 服务器数据库，其中有一个表用户，登录将从表中检索信息以验证用户。现在，当用户登录时，我希望能够看到用户名和旁边的注销链接。但是，我不知道如何实现它。我阅读了有关登录名控制的信息，但它似乎只适用于会员提供程序。有什么办法可以吗？谢谢~~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:22:20.107

您需要添加一个登录控件，如下所示：

```
<asp:Login ID="LoginCtrl" runat="server" DestinationPageUrl="Defaul.aspx"></asp:Login> 
```

在代码后面

```
Private Sub Log_Authenticate(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.AuthenticateEventArgs) Handles LoginCtrl.Authenticate
    If LoginCtrl.UserName = "Username" AndAlso LoginCtrl.Password = "Password" Then
        e.Authenticated = True
End If

void MyLogin_Authenticate(object sender, AuthenticateEventArgs e)
{
    if(UserName == "Username" && Password == "Password")
    e.Authenticated = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T07:24:46.013

根据您所写的内容，我假设您在成功登录后必须设置一些会话变量来保存您的登录详细信息，并且您没有使用 .net 提供的实用程序的任何功能，如会员提供商。在这种情况下，当登录详细信息成功时，设置一个保存用户唯一标识号的会话变量。

例子：

登录成功后，您可以将会话变量 ["uid"] 设置为用户 ID。在您的页面加载事件中检查此变量以查看用户是否已通过身份验证。如果用户已通过身份验证，那么如果 userid 会话变量为 null 或 0 重定向到登录页面，您是否会做其他事情。

现在，为了显示登录/注销名称，您可以创建一个包含 2 行表的用户控件。在每一行中，在顶行添加一个面板 panel1，在底行添加一个面板 2。将其可见性设置为隐藏

现在在顶行面板 panel1 中拖动带有文本的链接按钮作为登录名。单击事件将用户重定向到登录页面。在面板 2 中拖动一个标签说 label1 和一个带有文本注销的链接按钮。注销时单击事件会破坏会话并重定向到登录页面。

现在在用户控件加载事件中检查 uid 会话变量，如果 uid 有效，则将 label1 文本设置为 username 。使 panel2 可见，并在 uid 变量无效的情况下执行相反的操作。在您需要显示登录/注销详细信息的任何地方使用此控件。希望这足以开始......

# java - 无法从代码中删除一行？

> ID：14971681
> 
> 赞同：-2
> 
> 时间：2013-02-20T03:16:14.460
> 
> 标签：java

该应用程序是一个数字猜谜游戏我的问题是当用户得到正确的随机数时，如果他输入“y”它会询问用户是否要继续它会创建一个新的随机数并要求用户猜测它。然后它应该要求用户“输入一个数字”。相反，我得到

“太高”（或“太低”）
“输入数字”

ex 输出：
输入数字：
2
正确，你知道了！数字是 2 你在 2 次尝试中得到它。
你想再玩一次吗 (y/n):
y
太低了！再试一次。
输入号码：

我如何在不打印假设在他输入数字后确定的“太高”或“太低”的情况下解决问题？

附言。我尝试了很多方法，但被卡住了:(

```
public static void main(String[] args) {
    System.out
            .println("Welcome to the gussing game, Try to guess the number am thinking of to win!");
    System.out
            .println("++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++");
    System.out.println();

    System.out
            .println("Am thinking of a number between 0 and 10\. Try to guess it.");
    System.out.println();

    Scanner sc = new Scanner(System.in);
    String choice = "y";

    double rightNum = Math.random() * 10;
    int randomNum = (int) rightNum; // convert the random number to int
    int tries = 0;

    while (!choice.equalsIgnoreCase("n")) {

        System.out.println("Enter the Number:");
        int guess = sc.nextInt();
        tries++;

        if (guess == randomNum) {
            System.out.println("Correct you've got it! The Number Was "
                    + randomNum);
            System.out.println("You got it in " + tries + " tries.");
            System.out.println("Would you like to play again (y/n):");
            choice = sc.next();

            if (choice.equalsIgnoreCase("y"))
            // reset the random number

            {
                rightNum = Math.random() * 10;
                randomNum = (int) rightNum;
                tries = 0;

            }
        }

        if (guess > randomNum + 10) {
            System.out.println("Way to high! Try again.");
        } else if (guess < randomNum) {
            System.out.println("Too low! Try again.");
        } else if (guess > randomNum && guess <= randomNum + 10) {
            System.out.println("Too high! Try again.");
        }

    }

} 
```

}

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T03:20:58.153

```
else if (guess > randomNum + 10)
{
    System.out.println("Way to high! Try again.");
} 
```

你错过了其他的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:36:53.067

改变这个

```
{
    rightNum = Math.random() * 10;
    randomNum = (int) rightNum;
    tries = 0;
} 
```

到

```
{
    rightNum = Math.random() * 10;
    randomNum = (int) rightNum;
    tries = 0;
    continue; /* this goes back to while loop */
} 
```

# bash - 安装节点时，我收到有关我的路径的提示

> ID：14971689
> 
> 赞同：2
> 
> 时间：2013-02-20T03:16:42.397
> 
> 标签：bash, node.js, path

**迅速的**

```
Node was installed at

   /usr/local/bin/node

npm was installed at

   /usr/local/bin/npm

Make sure that /usr/local/bin is in your $PATH. 
```

**我如何判断它是否在我的路径中？**

bash 配置文件

```
export PATH=$PATH:/Users/anderskitson/bin

export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)"

export PATH="/usr/local/mysql/bin:$PATH"

#navigate to tech basics theme
alias techbasics='cd /Users/anderskitson/sites/techbasics/wp-content/themes/techBasicsCustom ; subl . ' 
```

**这是我的回声**

```
Anderss-iMac:~ anderskitson$ echo $PATH
/usr/local/mysql/bin:/Users/anderskitson/.rbenv/shims:/Users/anderskitson/.rbenv/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/Users/anderskitson/bin 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T03:22:40.570

> 我如何判断它是否在我的路径中？

在提示下：

```
echo $PATH | tr ':' '\n' | grep '^/usr/local/bin$' 
```

如果您看到`/usr/local/bin`，那么它在您的 $PATH 中。

如果它不存在（如果它不存在，我会感到惊讶）：您需要将以下内容添加到您的 Bash 配置文件中：

```
export PATH="/usr/local/bin:${PATH}" 
```

...以及`source`您的 Bash 配置文件或启动新的 shell 会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:22:44.783

`echo $PATH`是告诉您自己的用户的一种非常简单的方法，但是节点会由另一个用户运行吗？可能会`/etc/init.d/node`运行一个将其包含在`$PATH`. 不过，我不会担心它。

# core-data - UIAlertView 未从 Appdelegate 中显示

> ID：14971692
> 
> 赞同：0
> 
> 时间：2013-02-20T03:17:10.577
> 
> 标签：core-data, ios6, migration, uialertview

我正在研究核心数据迁移。当持久存储不匹配并且应用程序崩溃时，我正在尝试处理异常。但在它崩溃之前，我想让用户知道（通过警报视图）他需要先卸载应用程序，然后重新安装它。我在persistentStoreCoordinator 访问器方法中有警报视图的代码，但警报视图从未出现。

这是代码：

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{

  if (__persistentStoreCoordinator != nil) {
    return __persistentStoreCoordinator;
}

NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"ExchangeMail.sqlite"];

NSError *error = nil;
__persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];

// Dictionary required to store the details of psc on the disk,
NSDictionary *sourceMetadata = [NSPersistentStoreCoordinator metadataForPersistentStoreOfType:NSSQLiteStoreType URL:storeURL error:&error];

// This BOOL value is required to check whether a migration is required or not.
BOOL pscCompatibile = [[self managedObjectModel] isConfiguration:nil compatibleWithStoreMetadata:sourceMetadata];
NSLog(@"Migration needed? %d", !pscCompatibile);

NSMutableDictionary *options = [[NSMutableDictionary alloc] init];
[options setValue:[NSNumber numberWithBool:YES] forKey:NSMigratePersistentStoresAutomaticallyOption];
[options setValue:[NSNumber numberWithBool:YES] forKey:NSInferMappingModelAutomaticallyOption];

UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Non-matching Database File" message:@"The model configuration used to open the store is compatible with the one that was used to create the store. Please Uninstall the App and try again." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
[__persistentStoreCoordinator lock];
if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error]) {

 //        dispatch_queue_t queue = NULL;
 //        queue = dispatch_get_main_queue();
 //        dispatch_async(queue, ^{
 //            [[NSFileManager defaultManager]removeItemAtURL:storeURL error:nil];
 //            
 //            [self.myAlertView show];
 //        });

    [self.myAlertView show];
    //exit(-1);
}

[__persistentStoreCoordinator unlock];

if(!pscCompatibile){
    isMigrationRequired = YES;
}

return __persistentStoreCoordinator; 
```

}

# html - 鼠标悬停更改图像位置和大小

> ID：14971697
> 
> 赞同：15
> 
> 时间：2013-02-20T03:18:07.517
> 
> 标签：html, css, hover

我正在尝试为我的网站制作一个按钮菜单，但鼠标悬停时图像的位置存在问题。这是我到目前为止创建的[http://jsfiddle.net/tNLUx/](http://jsfiddle.net/tNLUx/)

在鼠标悬停时，我希望所选图像增长，而其他图像保持与第一张图像相同的位置......如何使向下图像增长并向下移动而不是向上移动？

```
#btnSocial {
  width:100px;
  position: relative;
  opacity: 0.5;
  -webkit-opacity: 0.5;
  -moz-opacity: 0.5;
  transition: 0.5s ease;
  -webkit-transition: 0.5s ease;
  -moz-transition: 0.5s ease;
}
#btnSocial:hover{
  width: 150px;
  opacity: 1;
  -webkit-opacity: 1;
  -moz-opacity: 1;
}
```

```
<img src="http://img24.imageshack.us/img24/3221/32845401.png" alt="img1" id="btnSocial" class="social1" />
<img src="http://img24.imageshack.us/img24/3221/32845401.png" alt="img1" id="btnSocial" class="social2"/>
<img src="http://img24.imageshack.us/img24/3221/32845401.png" alt="img1" id="btnSocial" class="social3"/>
<img src="http://img24.imageshack.us/img24/3221/32845401.png" alt="img1" id="btnSocial" class="social4"/>
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-20T03:23:49.410

用于`transform: scale(x, y)`缩放对象。
用于`transform: translate(x, y)`移动对象。
这两个属性也可以组合：`transform: scale(x, y) translate(x, y)`.

例子：

```
.btn-social {
    width: 100px;
    position: relative;
    opacity: 0.5;
    transition: 0.3s ease;
    cursor: pointer;
}

.btn-social:hover {
    opacity: 1;

    /** default is 1, scale it to 1.5 */
    transform: scale(1.5, 1.5);

    /** translate 50px from left, and 40px from top */
    /** transform: translate(50px, 40px); */

    /** combine both scale and translate */
    /** transform: scale(1.5, 1.5) translate(50px, 40px); */
}
```

```
<img src="http://sstatic.net/stackexchange/img/logos/so/so-icon.png?v=c78bd457575a" class="btn-social" />
<img src="http://sstatic.net/stackexchange/img/logos/so/so-icon.png?v=c78bd457575a" class="btn-social" /><br />
<img src="http://sstatic.net/stackexchange/img/logos/so/so-icon.png?v=c78bd457575a" class="btn-social" />
<img src="http://sstatic.net/stackexchange/img/logos/so/so-icon.png?v=c78bd457575a" class="btn-social" />
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T04:01:01.273

检查这个[http://jsfiddle.net/tNLUx/11/](http://jsfiddle.net/tNLUx/11/)

`position: relative;`从 CSS 中移除

```
#btnSocial{
    width:100px;
    opacity: 0.5;
    -webkit-opacity: 0.5;
    -moz-opacity: 0.5;
    transition: 0.5s ease;
    -webkit-transition: 0.5s ease;
    -moz-transition: 0.5s ease;

} 
```

# php - 未设置输出变量 CodeIgniter

> ID：14971698
> 
> 赞同：1
> 
> 时间：2013-02-20T03:18:18.650
> 
> 标签：php, codeigniter, grocery-crud

我正在`CodeIgniter`开发带有`Grocery_CRUD`扩展名的系统。我正在尝试将登录系统与 CRUD 应用程序集成。

目前，当用户登录时出现此错误，应显示 CRUD 应用程序：

**严重性：通知消息：未定义变量：输出文件名：views/members_area.php 行号：13**

这是发生错误的行：`<?php echo $output; ?>`

我意识到这`$output`没有被设置，但我不明白为什么！有任何想法吗？

这是我的整个 members_area.php 文件：查看

```
<?php
echo '<span class="italic">'.date("l, F d, Y " ,time()).'</span>';
echo '<h3>Welcome: '.$this->session->userdata('username').' '. anchor('logout/signout', 'logout').'</h3>';
?>
<a href='<?php echo site_url('site/dishes_management')?>'>Dishes</a> |
<a href='<?php echo site_url('site/orders_management')?>'>Orders</a> 
<?php echo $output; ?> 
```

这是我的 site.php 文件：控制器

```
<?php
class Site extends CI_Controller{

    function __construct(){
        parent::__construct();
        $this->is_logged_in();
        $this->load->database();
        $this->load->helper('url');
        $this->load->library('grocery_CRUD');
    }

    function members_area($output = null){
        $this->load->view('members_area', $output);

    }

    function is_logged_in(){
        $is_logged_in = $this->session->userdata('is_logged_in');
        if(!isset($is_logged_in) || $is_logged_in != true){
            echo 'You need to login to access this page. <a href="../login">Login</a>';
            die();
    }

    function dishes_management()
    {
        try{
            $crud = new grocery_CRUD();
            $crud->set_theme('datatables');
            $crud->set_table('dishes');
            $crud->set_subject('Dish');
            $crud->required_fields('dish_name');
            $crud->columns('dish_name','dish_desc','dish_price', 'dish_cat');
            $output = $crud->render();
            $this->members_area($output);
        }catch(Exception $e){
            show_error($e->getMessage().' --- '.$e->getTraceAsString());
        }
    }

    function orders_management()
    {
            $crud = new grocery_CRUD();
            $crud->set_relation('customerNumber','customers','{contactLastName} {contactFirstName}');
            $crud->display_as('customerNumber','Customer');
            $crud->set_table('orders');
            $crud->set_subject('Order');
            $crud->unset_add();
            $crud->unset_delete();
            $output = $crud->render();
            $this->members_area($output);
    }
}
}
?> 
```

默认情况下，我希望将`members_area.php`输出设置为显示菜肴表中的项目。这似乎不起作用。

任何帮助，一如既往地非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:11:42.527

您是否尝试将输出包含在数组中？

`$this->load->view('members_area', array('output'=>$output));`

或者

```
$output['output'] = $output;
$this->load->view('members_area', $output); 
```

您必须将其作为二维数组发送到视图中，codeigniter 正试图`output`从给定数据中找到一个键，但由于您没有为要搜索的视图提供正确的数据而无法找到它。

# ios - iOS parse.com 推送错误

> ID：14971705
> 
> 赞同：1
> 
> 时间：2013-02-20T03:19:28.247
> 
> 标签：ios, arrays, dictionary, error-handling, parse-platform

我有一个字符串数组，我试图保存以解析为推送通知的通道。数组是正确的，我不知道发生了什么。有人可以对此有所了解吗？谢谢。

错误：

> 错误：错误的通道名称：TestString123（代码：112，版本：1.1.30）

代码：

```
- (void)saveSelectedDepartmentsToParse:(NSMutableDictionary *)dictionary {

    NSArray *array = [dictionary allKeysForObject:@"YES"];

    NSLog(@"Array = %@", array);

    PFInstallation *currentInstallation = [PFInstallation currentInstallation];

    [currentInstallation addObjectsFromArray:array forKey:@"channels"];
    [currentInstallation saveInBackgroundWithBlock:^(BOOL succeeded, NSError *error) {

        if (error == nil) {

            NSLog(@"Parse Save Succeeded");
        }
        else {

            NSLog(@"Parse Save Failed, %@", error.localizedDescription);
        }
    }];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:37:09.417

原因是 Parse 不接受通道中的空格或任何特殊字符。删除所有空格和特殊字符后，操作成功。

# mysql - 将mysql数据目录移动到不同的位置

> ID：14971708
> 
> 赞同：0
> 
> 时间：2013-02-20T03:19:49.480
> 
> 标签：mysql

我创建了一个以“/Volumes/x”作为数据目录的 mysql 实例。我想将其移至“Volumes/y”。但是，这会引发一个错误，指出 mysql 表不存在并且数据库存在致命错误。

有没有办法将数据目录移动到不同的位置？

当我尝试移动数据目录时，出现以下错误。顺便说一句，我用新路径的位置更新了 /etc/my.cnf。我仍然收到这些错误。

```
130219 19:26:33 [注意] 插件 'FEDERATED' 已禁用。
/usr/local/mysql/bin/mysqld: 表 'mysql.plugin' 不存在
130219 19:26:33 [错误] 无法打开 mysql.plugin 表。请运行 mysql_upgrade 来创建它。
130219 19:26:33 InnoDB：InnoDB 内存堆被禁用
130219 19:26:33 InnoDB：互斥锁和 rw_locks 使用 GCC atomic builtins
130219 19:26:33 InnoDB：压缩表使用 zlib 1.2.3
130219 19:26:33 InnoDB：初始化缓冲池，大小=2.0G
130219 19:26:33 InnoDB：缓冲池初始化完成
130219 19:26:33 InnoDB：支持的最高文件格式是梭子鱼。
130219 19:26:33 InnoDB：等待后台线程启动
130219 19:26:34 InnoDB：5.5.30 开始；日志序列号 1593283
130219 19:26:34 [注意] 服务器主机名（绑定地址）：'0.0.0.0'；端口：3306
130219 19:26:34 [注] - '0.0.0.0' 解析为 '0.0.0.0';
130219 19:26:34 [注意] 在 IP 上创建的服务器套接字：'0.0.0.0'。
130219 19:26:34 [错误] 缺少系统表 mysql.proxies_priv；请运行 mysql_upgrade 来创建它
130219 19:26:34 [错误] 无法打开和锁定特权表：表 'mysql.servers' 不存在
130219 19:26:34 [错误] 本机表 'performance_schema'.'events_waits_current' 的结构错误
130219 19:26:34 [错误] 本机表 'performance_schema'.'events_waits_history' 的结构错误
130219 19:26:34 [错误] 本机表 'performance_schema'.'events_waits_history_long' 的结构错误
130219 19:26:34 [错误] 本机表 'performance_schema'.'setup_consumers' 的结构错误
130219 19:26:34 [错误] 本机表 'performance_schema'.'setup_instruments' 的结构错误
130219 19:26:34 [错误] 本机表 'performance_schema'.'setup_timers' 的结构错误
130219 19:26:34 [错误] 本机表 'performance_schema'.'performance_timers' 的结构错误
130219 19:26:34 [错误] 本机表 'performance_schema'.'threads' 的结构错误
130219 19:26:34 [错误] 本机表 'performance_schema'.'events_waits_summary_by_thread_by_event_name' 的结构错误
130219 19:26:34 [错误] 本机表 'performance_schema'.'events_waits_summary_by_instance' 的结构错误
130219 19:26:34 [错误] 本机表 'performance_schema'.'events_waits_summary_global_by_event_name' 的结构错误
130219 19:26:34 [错误] 本机表 'performance_schema'.'file_summary_by_event_name' 的结构错误
130219 19:26:34 [错误] 本机表 'performance_schema'.'file_summary_by_instance' 的结构错误
130219 19:26:34 [错误] 本机表 'performance_schema'.'mutex_instances' 的结构错误
130219 19:26:34 [错误] 本机表 'performance_schema'.'rwlock_instances' 的结构错误
130219 19:26:34 [错误] 本机表 'performance_schema'.'cond_instances' 的结构错误
130219 19:26:34 [错误] 本机表 'performance_schema'.'file_instances' 的结构错误
130219 19:26:34 [错误] mysql.db 的列数错误。预期 22，发现 20。使用 MySQL 50091 创建，现在运行 50530。请使用 mysql_upgrade 修复此错误。
130219 19:26:34 [错误] mysql.user 在位置 29 处没有“Event_priv”列
130219 19:26:34 [错误] 无法打开 mysql.event
130219 19:26:34 [错误] 事件调度程序：初始化系统表时出错。禁用事件调度程序。
130219 19:26:34 [注意] /usr/local/mysql/bin/mysqld：准备连接。
版本：'5.5.30' 套接字：'/tmp/mysql.sock' 端口：3306 MySQL 社区服务器（GPL）

```

我运行了 mysql_upgrade，下面是输出，如果之后我重新启动，则没有错误。我仍然担心为什么我会看到错误。

```
/usr/local/mysql/bin/mysql_upgrade: '--datadir' 选项总是被忽略
寻找“mysql”为：/usr/local/mysql/bin/mysql
寻找“mysqlcheck”为：/usr/local/mysql/bin/mysqlcheck
使用连接参数运行 'mysqlcheck'：'--port=3306' '--socket=/tmp/mysql.sock'
使用连接参数运行 'mysqlcheck'：'--port=3306' '--socket=/tmp/mysql.sock'
bala_test.bala_1 好的
bala_test.bala_2 好的
mysql.columns_priv 确定
mysql.db 好的
mysql.func 好的
mysql.help_category
错误：需要表升级。请执行“修复表`help_category`”或转储/重新加载以修复它！
mysql.help_keyword
错误：需要表升级。请执行“REPAIR TABLE `help_keyword`”或转储/重新加载以修复它！
mysql.help_relation 确定
mysql.help_topic
错误：需要表升级。请执行“修复表`help_topic`”或转储/重新加载以修复它！
mysql.host 好
mysql.proc
错误：需要表升级。请执行“REPAIR TABLE `proc`”或转储/重新加载以修复它！
mysql.procs_priv
错误：需要表升级。请执行“REPAIR TABLE `procs_priv`”或转储/重新加载以修复它！
mysql.tables_priv 好的
mysql.time_zone 好的
mysql.time_zone_leap_second OK
mysql.time_zone_name
错误：需要表升级。请执行“修复表`time_zone_name`”或转储/重新加载以修复它！
mysql.time_zone_transition OK
mysql.time_zone_transition_type OK
mysql.user 确定

修理桌子
mysql.help_category OK
mysql.help_keyword 确定
mysql.help_topic 好的
mysql.proc 好的
mysql.procs_priv 好的
mysql.time_zone_name 确定
运行“mysql_fix_privilege_tables”...
好的

```

# c++ - 特征透视投影矩阵

> ID：14971712
> 
> 赞同：3
> 
> 时间：2013-02-20T03:19:55.580
> 
> 标签：c++, opengl-es-2.0, eigen

我正在尝试为 OpenGL 创建一个透视投影矩阵。我知道如何使用 a`float[16]`但为了一致性起见，我想使用 Eigen 矩阵。

[公式](http://openglbook.com/the-book/chapter-4-entering-the-third-dimension/)为：

```
 [ xScale   0                 0                        0               ]
P = [   0    yScale              0                        0               ]
    [   0      0    -(zFar+zNear)/(zFar-zNear) -2*zNear*zFar/(zFar-zNear) ]
    [   0      0                -1                        0               ] 
```

在哪里：

```
yScale = cot(fovY/2)
xScale = yScale/aspectRatio 
```

由于公式是列优先且 c 数组定义为行优先，因此您将定义一个`float[16]`矩阵：

```
float P[16] = {
  xScale, 0, 0, 0,
  0, yScale, 0, 0,
  0, 0, -(zFar+zNear)/(zFar-zNear), -1
  0, 0, -2*zNear*zFar/(zFar-zNear), 0
}; 
```

那么我将如何使用 Eigen 创建这样的矩阵呢？我会使用一个`Eigen::Affine3f`还是一个`Eigen::Matrix4f`？查看[文档](http://eigen.tuxfamily.org/dox/TutorialMapClass.html)[，](http://eigen.tuxfamily.org/dox/TutorialGeometry.html) 我不清楚如何设置单个单元格值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T08:17:43.487

在您的情况下，最简单的是使用[逗号初始化](http://eigen.tuxfamily.org/dox-devel/group__TutorialAdvancedInitialization.html)语法：

```
Eigen::Matrix4f pmat;
pmat << xScale, 0, 0, 0,
        0, yScale, 0, 0,
        0, 0, -(zFar+zNear)/(zFar-zNear), -1,
        0, 0, -2*zNear*zFar/(zFar-zNear), 0; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T03:25:50.010

可以简单地使用括号来设置单个单元格值，例如 Matrix(0,0) = xScale; .

# iphone - 缩进在 UITableView ( ios6 ) 中不起作用

> ID：14971714
> 
> 赞同：1
> 
> 时间：2013-02-20T03:20:03.833
> 
> 标签：iphone, ios, ipad, ios6

单元格没有根据级别缩进。

我在 cellForRowAtIndexPath 中配置了缩进宽度。

```
- (NSInteger)tableView:(UITableView *)tableView indentationLevelForRowAtIndexPath:(NSIndexPath *)indexPath{

            NSInteger theLevel=0;
            if ( indexPath.row==1) {
                theLevel=5;
            }
            return theLevel;
        } 
```

在下图中，我根据其级别更改了按钮和标签的框架框架。

![在此处输入图像描述](../Images/c785719632b821ab8e4c1696a51563da.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:45:24.460

如果您已将子视图添加到单元格，那么您需要设置子视图的自动调整大小掩码，以便在 contentView 大小更改时重新定位它们。

请看这个[答案](https://stackoverflow.com/questions/2502822/indentationlevelforrowatindexpath-not-indenting-custom-cell)。

# performance - javaFX 内存释放，javaFX 错误？

> ID：14971720
> 
> 赞同：7
> 
> 时间：2013-02-20T03:20:43.533
> 
> 标签：performance, memory-management, javafx

我在javaFX示例Ensemble.jar中发现频繁切换页面时，内存会越来越高，无法释放。这也发生在我的项目中。这是javaFX的错误吗？现在我们的测试人员总是抱怨这个问题。

有没有解决这个问题的好方法？javaFX中的“内存释放”我们可以做什么？

为了解决这个问题，我们做了什么：

1.  当我们销毁 javaFX 页面时，将全局变量设置为 NULL。
2.  减少 .css 文件中“重复大图”的使用。
3.  在 Platform.runLater() 中调用 GC。（这似乎有点傻）

但是效果不是很明显，谁能帮帮我们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-20T13:21:53.180

这不是 JavaFX 中的错误。

**我猜您的内存泄漏来自对属性的侦听器的使用。**

JavaFX 使用[属性](https://docs.oracle.com/javase/8/javafx/api/javafx/beans/property/Property.html)作为观察者模式的实现。将 ChangeListener 添加到属性时，实际上是在属性对象中添加了对侦听器的引用。如果您不调用[RemoveListener 方法](https://docs.oracle.com/javase/8/javafx/api/javafx/beans/value/ObservableValue.html#removeListener-javafx.beans.value.ChangeListener-)来删​​除此引用，那么只要属性对象本身没有被垃圾收集，您的侦听器就不会被垃圾收集。

我不知道您的代码是什么样的，但我可以做出一些假设：

*   每次切换页面时都会实例化一个新控制器
*   每个控制器实例化一个侦听器对象并将其添加到属性对象。
*   切换页面时，前一个控制器会被垃圾回收，而属性对象则不会。在属性对象中，有对监听器对象的引用，因此监听器对象保留在内存中。切换页面越多，实例化不会被垃圾收集的侦听器越多，内存泄漏就越大。

如果给Properties添加Listeners，尝试调用removeListener方法，看看是否解决了问题。

问候，

西里尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-18T10:10:15.827

也许这无关紧要，也许我在说些愚蠢的话，但是这个选项帮助我减少了内存使用，并防止了“内存泄漏”（不断增加内存使用）：

-XX:+UseG1GC（这是一个 VM 选项）。

# php - 在 PHP 中读取图像中的条形码

> ID：14971722
> 
> 赞同：0
> 
> 时间：2013-02-20T03:20:55.780
> 
> 标签：php

是否有任何适用于 PHP 的条形码阅读器库？我正在尝试制作一个移动应用程序，用户可以在其中拍摄条形码照片并进行处理。

不幸的是，我用于开发的 Corona SDK 只支持像企业许可证这样的库，这非常昂贵。

所以，我一直认为从图像中获取条形码的最佳方法是将图像文件发送到我的服务器，使用 PHP 处理它，然后将扫描的条形码数据发送回移动应用程序。

我已经用谷歌搜索了一段时间，但仍然没有运气，或者它在那里，但我只是错过了。谁能给我一个链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:25:34.590

试试 zxing 库。你可以从这里下载它： [一个链接](http://code.google.com/p/zxing/downloads/list)！

甚至这可能会有所帮助： http: [//phpmyweb.net/2012/07/18/integrating-zxing-in-your-android-app-as-standalone-scanner/](http://phpmyweb.net/2012/07/18/integrating-zxing-in-your-android-app-as-standalone-scanner/)

# c# - Rally API“无法从传输连接读取数据：连接已关闭。”

> ID：14971729
> 
> 赞同：1
> 
> 时间：2013-02-20T03:21:48.327
> 
> 标签：c#, rally

当我尝试上传附件时，我随机收到此错误。

> “无法从传输连接读取数据：连接已关闭。”

我有一个使用 C# RallyRestAPI 的导入函数，它从测试轨道中提取数据并将其插入到 Rally 中，并将附件复制到 Rally。我的测试数据有 3 个大小不同的附件，分别为 350k、63k 和 43k。当我运行我的导入器时，它会在不同时间的不同上传错误。没有一致性。有时三个都会失败，有时第二个会，第三个会成功。创建和更新故事似乎很好，所以它看起来像超时，但我不确定如何更改 RallyRestAPI 中的超时。

有没有其他人使用 C# 和 Rally RestAPI 遇到过这个问题？

这是我的上传代码。对 Connect() 的调用返回一个 RallyRestAPI 对象并登录到该对象。我每次调用 Rally 时都会重新登录（不确定我是否需要这样做）。

```
private string AddAttachment(string reference, string name, string content, long contentSize, string type) {

            var restAPI = Connect();
            try {
                var attachmentContent = new DynamicJsonObject();
                attachmentContent["Content"]        = content;
                attachmentContent["Workspace"]      = _workspace["_ref"];
                attachmentContent["Project"]        = _target["_ref"];
                var result = restAPI.Create("AttachmentContent", attachmentContent);
                if (result.Success) {
                    _logger.Info("Attached the relevant AttachmentContent.");
                }
                else {
                    throw new LoggedException("Could not attach attachment to '" + reference + "' due to the following errors\n" + GetErrorList(result.Errors));
                }

                var attachmentContentRef = result.Reference;

                // DynamicJSONObject for Attachment Container
                var myAttachment = new DynamicJsonObject();
                myAttachment["Workspace"]   = _workspace["_ref"];
                myAttachment["Project"]     = _target["_ref"];
                myAttachment["Artifact"]    = reference;
                myAttachment["Content"]     = attachmentContentRef;
                myAttachment["Name"]        = Path.GetFileName(name);

                var contentType = "image/jpg";
                if (!string.IsNullOrEmpty(type)) {
                    switch (type.Trim().ToLower()) {
                        case "doc":
                            contentType = "document/text";
                            break;
                        default:
                            contentType = type;
                            break;
                    }
                }
                myAttachment["ContentType"] = contentType;
                myAttachment["Size"]        = contentSize;

                result = restAPI.Create("Attachment", myAttachment);
                if (result.Success) {
                    _logger.Info("Attached the relevant attachment.");
                }
                else {
                    throw new LoggedException("Could not attach attachment to '" + reference + "' due to the following errors\n" + GetErrorList(result.Errors));
                }
                return attachmentContentRef;
            }
            catch (Exception ex) {
                throw new LoggedException("Unhandled exception occurred: ",ex);
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T01:32:47.280

在我的测试中，我能够一致地上传最大为 5 MB 的 Rally 限制而没有错误的附件。似乎与文件类型无关。

我建议向 Rally Support 提交案例 (rallysupport@rallydev.com)。支持有可用于识别瓶颈的工具 - 并尝试查看它们是服务器端/数据相关问题还是客户端连接问题。

# iphone - 键盘出现时的滚动视图：图书馆还是 DIY？

> ID：14971737
> 
> 赞同：0
> 
> 时间：2013-02-20T03:23:01.067
> 
> 标签：iphone, ios, xcode

`UITextField`当用户点击相应的对象时，我已经竭尽全力让整个视图移动到适当的位置，看起来无缝。我知道我不是唯一一个绝对讨厌这样做的人。

以尽可能少的工作量使这项工作尽可能精美的最佳方法是什么？

我已经尝试过[TPKeyboardAvoiding](https://github.com/michaeltyson/TPKeyboardAvoiding)，它完全糟透了。

现在，我已经完成了这段代码，但它也以它自己的特殊方式很糟糕：

```
- (void)viewDidLoad
{
    self.view.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleLeftMargin);
    self.scrollView.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleLeftMargin);

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWasShown:)
                                                 name:UIKeyboardDidShowNotification object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillBeHidden:)
                                                 name:UIKeyboardWillHideNotification object:nil];
}

- (void)keyboardWasShown:(NSNotification *)aNotification
{
    NSDictionary* info = [aNotification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);
    self.scrollView.contentInset = contentInsets;
    self.scrollView.scrollIndicatorInsets = contentInsets;

    // If active text field is hidden by keyboard, scroll it so it's visible
    // Your application might not need or want this behavior.
    CGRect aRect = self.view.frame;
    aRect.size.height -= kbSize.height;
    if (!CGRectContainsPoint(aRect, self.activeField.frame.origin) ) {
        CGPoint scrollPoint = CGPointMake(0.0, self.activeField.frame.origin.y-kbSize.height);
        [self.scrollView setContentOffset:scrollPoint animated:YES];
    }
}

- (void)keyboardWillBeHidden:(NSNotification *)aNotification
{
    UIEdgeInsets contentInsets = UIEdgeInsetsZero;
    self.scrollView.contentInset = contentInsets;
    self.scrollView.scrollIndicatorInsets = contentInsets;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T20:54:52.887

对我来说，它适用[于 TPKeyboardAvoiding](https://github.com/michaeltyson/TPKeyboardAvoiding)，我在所有项目中都使用它。您是否尝试过：

1.  将 UIScrollView 添加到视图控制器的 xib
2.  将滚动视图的类设置为 TPKeyboardAvoidingScrollView（仍在 xib 中，通过身份检查器）
3.  将所有控件放在该滚动视图中？

我也找到了这个解决方案：[键盘管理器](https://github.com/hackiftekhar/IQKeyboardManager/tree/master/KeyboardTextFieldDemo)

1.  下载演示项目
2.  只需将 KeyboardManager 和 SegmenedNextPrevious 类拖放到您的项目中
3.  在你的 appDelegate 中只写一行代码：

    [键盘管理器安装键盘管理器]；

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:08:19.890

您是否知道如果您的视图控制器派生自 UITableViewController，当文本字段或文本视图获得焦点时，当键盘显示时滚动表格视图是自动的？你不必做任何事情。话虽这么说，但对于您的应用程序来说，重构 UI 以便它使用带有静态单元格的表格视图而不是您现在正在做的任何事情可能效果不佳。

如果这对您不起作用，您可以`contenSize`在显示键盘时将滚动视图更改为可见区域的大小，然后在滚动视图上调用[scrollRectToVisible:animated:](http://developer.apple.com/library/ios/ipad/#//apple_ref/occ/instm/UIScrollView/scrollRectToVisible%3aanimated%3a)将它传递给您的键盘内的文本字段的矩形WasShown: 选择器.

# scala - Scala 和 Play2：ClassCastException：java.lang.Object 无法转换为 play.api.libs.json.JsValue

> ID：14971744
> 
> 赞同：2
> 
> 时间：2013-02-20T03:23:27.007
> 
> 标签：scala, exception, casting, playframework-2.0

这是我第二次碰到这个。编辑：我发现这也是我第二次在堆栈上询问，并且是我第三次或第四次遇到这个问题。其他问题在这里：[Cast Class Exception in Scala: java.lang.Object to Scala CaseClass](https://stackoverflow.com/questions/14541682/cast-class-exception-in-scala-java-lang-object-to-scala-caseclass)

大量编辑...经过大量分析，我可以简化问题。看来这是我如何使用特征和实现/覆盖 toJson 方法的问题......我确信这很容易，但我无法找到我做错了什么。

我得到了这个类转换异常，我看不出有什么问题。

我有这个：

```
package service

import play.api.libs.json.{JsObject, Json, JsValue}

/**
 * author: jason goodwin
 */
trait Jsonable{

  def toJson: JsValue = {null}
}

object Jsonable {
  def renderJsonableListToJson(entities: Iterable[Jsonable]): String = {

    val jsonList = Json.toJson(entities.map(x => x.toJson).toSeq)
    val result = JsObject("meta" -> JsObject(Seq()) :: "data" -> jsonList :: Nil)

    Json.stringify(result)
  }
} 
```

这与java库接口：

```
trait GraphedArticle extends BaseFramedEntity with Jsonable {

  @Property("articleId")
  def setArticleId (userId: String)

  @Property("articleId")
  def getArticleId:String

  @Property("title")
  def setTitle (title: String)

  @Property("title")
  def getTitle:String

  @Property("preview")
  def setPreview (preview: String)

  @Property("preview")
  def getPreview: String

  @Property("imageUrl")
  def setImageUrl (imageUrl: String)

  @Property("imageUrl")
  def getImageUrl: String

  @Property("articleUrl")
  def setArticleUrl (imageUrl: String)

  @Property("articleUrl")
  def getArticleUrl: String

  override def toJson: JsValue = {
    val ret = JsObject(
      "articleId" -> Json.toJson(getArticleId)
        :: "graphId" -> Json.toJson(asVertex().getId.toString)
        :: "created_time" -> Json.toJson(123123123)
        :: "url" -> Json.toJson(getArticleUrl)
        :: "title" -> Json.toJson(getTitle)
        :: "preview" -> Json.toJson("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Ut euismod pellentesque facilisis. Morbi odio sem, dapibus eget cursus vel, sodales in diam. Nunc porttitor mauris vitae diam imperdiet nec bibendum magna eleifend. Mauris sapien lectus, sodales et tincidunt at, aliquam a leo. Nullam quis enim vitae ligula condimentum tempus. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Aliquam ut facilisis quam. Aenean sed dapibus sapien. Nulla facilisi.")
        :: "image" -> Json.toJson(getImageUrl)
        :: "topics" -> JsArray(Seq(Json.toJson("Tiger Dog"), Json.toJson("Lemon Party")))
        :: "from_user" -> JsArray(
        JsObject(
          "username" -> Json.toJson("fudgeface")
            :: "full_name" -> Json.toJson("Mr. Fudge Face")
            :: "id" -> Json.toJson("#3:27")
            :: "profile_picture" -> Json.toJson("url here")
            :: Nil
        ) :: Nil)
        :: "shares" -> JsArray(
        JsObject(
          "count" -> Json.toJson("100")
            :: Nil
        ) :: Nil)
        :: Nil).asInstanceOf

    println(ret.toString, "here")
    ret

  }
} 
```

如果我尝试访问 toJson，它就会死掉。其他方法有效。

```
println("\n\n"+getArticleList(defaultPage, defaultPageSize).head.toJson)

error] application - 

! @6dckhec3c - Internal server error, for request [GET /articles] ->

play.core.ActionInvoker$$anonfun$receive$1$$anon$1: Execution exception [[ClassCastException: java.lang.Object cannot be cast to play.api.libs.json.JsValue]]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:134) [play_2.9.1.jar:2.0.4]
    at play.core.ActionInvoker$$anonfun$receive$1.apply(Invoker.scala:115) [play_2.9.1.jar:2.0.4]
    at akka.actor.Actor$class.apply(Actor.scala:318) [akka-actor.jar:2.0.2]
    at play.core.ActionInvoker.apply(Invoker.scala:113) [play_2.9.1.jar:2.0.4]
    at akka.actor.ActorCell.invoke(ActorCell.scala:626) [akka-actor.jar:2.0.2]
    at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:197) [akka-actor.jar:2.0.2]
Caused by: java.lang.ClassCastException: java.lang.Object cannot be cast to play.api.libs.json.JsValue
    at $Proxy53.toJson(Unknown Source) ~[na:na]
    at controllers.ArticleController$$anonfun$index$1.apply(ArticleController.scala:111) ~[classes/:2.0.4]
    at controllers.ArticleController$$anonfun$index$1.apply(ArticleController.scala:97) ~[classes/:2.0.4]
    at play.api.mvc.Action$$anon$1.apply(Action.scala:170) ~[play_2.9.1.jar:2.0.4]
    at play.core.ActionInvoker$$anonfun$receive$1$$anonfun$6.apply(Invoker.scala:126) ~[play_2.9.1.jar:2.0.4]
    at play.core.ActionInvoker$$anonfun$receive$1$$anonfun$6.apply(Invoker.scala:126) ~[play_2.9.1.jar:2.0.4]
[debug] application - [securesocial] calling deleteExpiredTokens() 
```

知道为什么吗？这在我看来没问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:57:00.953

已经有一个类似于`Jsonable`默认框架的特征。这个特征被称为 a `Writes`。该`toJson`方法会自动使用它。

它会像这样工作：

```
import play.api.libs.json.Json.toJson 

object GraphedArticle {

  implicit object graphedArticleWrites extends Writes[GraphedArticle] {
    def writes(g: GraphedArticle) = 
      toJson(Map(
          "articleId" -> toJson(g.getArticleId),
          "graphId" -> toJson(asVertex().getId.toString)
          "created_time" -> toJson(123123123)))
    }
} 
```

这种方法看起来有点不同：

```
import play.api.libs.json.Json.toJson

def renderListToJson[T](entities: Iterable[T])(implicit writes:Writes[T]): String = {

  val jsonList = Json.toJson(entities.map(Json.toJson).toSeq)
  val result = Json.toJson(Map(
      "meta" -> Json.toJson(Seq()), 
      "data" -> jsonList))

  Json.stringify(result)
} 
```

# java - 如何在 Java 中使用 printf 截断？

> ID：14971745
> 
> 赞同：2
> 
> 时间：2013-02-20T03:23:28.520
> 
> 标签：java, format

我试图在 Java 中使用 printf 截断到第三个小数点，但我一直只得到第二个小数点。这是我尝试这样做的代码行：

```
System.out.printf("The speed in ft/sec is %6.2f\n", time); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-20T03:25:04.790

试试`%6.3f`吧。格式是

```
%(before).(after)(type)
    6         3    f

    6 -> 6 digits before the decimal
    3 -> 3 digits AFTER the decimal 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-20T03:24:48.603

试试这个：

```
System.out.printf("The speed in ft/sec is %6.3f\n", time); 
```

以上将*四舍五入*到小数点后三位（而不是“截断”它们）。唯一的区别在于点之后的值。

# php - Laravel 4 路线不工作

> ID：14971746
> 
> 赞同：0
> 
> 时间：2013-02-20T03:23:47.030
> 
> 标签：php, laravel

我确实看过其他 Laravel Route 问题，但似乎没有什么对我有用。

我正在尝试 Laravel 4。我运行了命令： php artisan controller:make PhotoController

创建我的控制器。然后我在我的 routes.php 文件中添加了一个路由，如下所示：

```
Route::resource('photo', 'PhotoController'); 
```

当我转到 localhost/photo 时，我看到 404 Not Found。

有任何想法吗？我可以看到根目录和 /index.php，它们都说“Hello World”，所以我知道有些东西正在工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:29:36.187

您可能需要运行

> 作曲家转储自动加载

从命令行，所以 laravel 知道控制器在那里。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-23T08:38:41.583

你也可以试试这个：

```
php artisan dump-autoload 
```

# html - Jquery Mobile：自动显示弹出/对话框

> ID：14971751
> 
> 赞同：1
> 
> 时间：2013-02-20T03:24:01.867
> 
> 标签：html, jquery-mobile

我正在尝试创建一个对话框或弹出消息，自动显示满足某个条件。就我而言，如果 $.POST 失败，我想向用户显示一条消息。我从这个[SO](https://stackoverflow.com/questions/6101370/creating-a-dialog-jquery-mobile)帖子中得到了建议并显示了弹出窗口，但是整个屏幕都被弹出窗口覆盖了，并且关闭按钮没有做任何事情。

```
<!DOCTYPE html> 
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<title>jQuery Mobile Web App</title>
<link href="jquery-mobile/jquery.mobile.theme-1.0.min.css" rel="stylesheet" type="text/css"/>
<link href="jquery-mobile/jquery.mobile.structure-1.0.min.css" rel="stylesheet" type="text/css"/>
<script src="jquery-mobile/jquery-1.6.4.min.js" type="text/javascript"></script>
<script src="jquery-mobile/jquery.mobile-1.0.min.js" type="text/javascript"></script>
<script src="common.js" type="text/javascript"></script>
</head> 
<body> 

<div data-role="page" id="contactsPage">
    <div data-role="header">
        <h1>My Contacts</h1>
    </div>
    <div data-role="content">   
        <ul data-role="listview" id="contactsList" data-filter="true">
        <script>
        var jqxhr = $.post("http://www.somewhere.com/...", 
        {
            org_id:"112211",
            max_last_modified_date:"2000-12-31 13:00:00 +0000"
        },
            function(data) {
                $('#contactsList li').remove();
                JSONResult = JSON.parse(data);
                for (var i = 0; i < JSONResult.contacts.contact.length; i++) {
                    //Do something
                }

                $('#contactsList').listview('refresh');
            });
            jqxhr.fail(function() {
                $('#dialogText').html("There was a problem connecting to the internet. Please check your mobile data or WIFI connection and try again."); 
                $.mobile.changePage("#connectionErrorDialog");
            });
        </script>
        </ul>
    </div>
</div>

<div data-role="dialog" id="connectionErrorDialog">
    <div id="dialogText"></div>
    <button id="closeDialog">Ok</button>
</div>

</body>
</html> 
```

有没有办法设置屏幕的尺寸并使关闭按钮起作用？这是自动向用户显示对话框/弹出窗口的正确方法吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T11:09:08.147

在新版本的 Jquery Mobile 中有[Pop Ups](http://jquerymobile.com/demos/1.2.0/docs/pages/popup/index.html)

这些弹出窗口的好处：

```
// open the popup
$("#popup").popup("open");

// close the popup
$("#popup").popup("close"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T05:57:29.497

这就是我在 JQM 中的做法：

```
$.ajax({
    url: "http://www.somewhere.com/...",
    data: {
           org_id:"112211",
           max_last_modified_date:"2000-12-31 13:00:00 +0000"
          },
    sucess: function(data){
                $( '#contactsList li' ).remove();
                JSONResult = JSON.parse(data);
                for (var i = 0; i < JSONResult.contacts.contact.length; i++) {
                    //Do something
                }

                $( '#contactsList' ).listview('refresh');
            },
    error: function(textStatus){
           $( '#dialogText' ).html("There was a problem connecting to the internet. Please check your mobile data or WIFI connection and try again."); 
                $.mobile.changePage( "#connectionErrorDialog" );
          }
}) 
```

# c# - 休眠拦截器

> ID：14971752
> 
> 赞同：1
> 
> 时间：2013-02-20T03:24:01.603
> 
> 标签：c#, hibernate, onload, interceptor

onload 只带实体的id，其他属性为null。

我需要验证是否实体采样，取决于IAccount的某些属性的值。到目前为止，这是我的代码：

```
public bool OnLoad(object entity, object id, System.Collections.IDictionary state)
{
    IAccount account = (IAccount)entity;
    account.xxxxxx        
    return true;
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T13:51:24.937

OnLoad 发生在实体对象实际初始化之前，因此“实体”将具有默认属性值，正如您已经看到的。您评估或更改实体状态的方式是通过传入的“状态”。

您的示例对于您要评估的内容不是很具体，但是如果您的 IAccount 的 IsSampling 属性为 false，让我们假设您希望执行一些日志记录：

```
public bool OnLoad(object entity, object id, System.Collections.IDictionary state)
{
    var isSampling = state["IsSampling"] as bool?;

    if( entity is IAccount && isSampling.HasValue )
    {
        if( !isSampling )
            Log.Write( string.Format( "Sampling for Account with id {0} is not active", id ) );
    }

    return false;
} 
```

另请注意，我返回 false，表示实体的状态尚未更改。如果要改变实体的状态，必须通过传入的状态集合（而不是通过正在传入的实体对象）进行，并且必须返回true。

很难找到涵盖此内容的文档，但这里有一个来源（虽然它有点过时）：[NHibernate.IInterceptor](http://elliottjorgensen.com/nhibernate-api-ref/NHibernate/IInterceptor.html#M%3aNHibernate.IInterceptor.OnLoad%28System.Object,System.Object,System.Object%5B%5D,System.String%5B%5D,NHibernate.Type.IType%5B%5D%29)

# c - 订阅者元数据信息到 ZMQ 中的发布者

> ID：14971758
> 
> 赞同：1
> 
> 时间：2013-02-20T03:24:57.750
> 
> 标签：c, zeromq

我正在使用 zmq_socket_monitor 服务来使用线程生成方法监视 ZMQ_REP 套接字。但据我所知，此服务仅适用于 INPROC，不适用于远程机器。

```
 My Main code:
    void *ctx = zmq_init (1);
    void *rep = zmq_socket (ctx, ZMQ_REP);
    int rc = zmq_socket_monitor (rep, "inproc://monitor.req", ZMQ_EVENT_ALL);

My Thread Code:
    void rep_socket_monitor (void *ctx)
    {
    zmq_event_t event;
    void *s = zmq_socket (ctx, ZMQ_PAIR);
    rc = zmq_connect (s, "inproc://monitor.req");
    while (true) 
    {
        zmq_msg_t msg;
        rc = zmq_recvmsg (s, &msg, 0);
        memcpy (&event, zmq_msg_data (&msg), sizeof (event));
        switch (event.event)
        {
          //Check for events
        }
    }
    } 
```

在这里，如果我检查任何事件，我会得到我自己机器的监控地址。如果某个远程机器客户端尝试连接到我怎么办。当它连接到我正在监视的端口时，我如何获取它的 IP 地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T20:15:04.000

您将监视套接字连接到本身*未*绑定到任何端点的 REP 套接字，因此没有端点可供外部各方连接。

在您的情况下，例如：

```
void *ctx = zmq_init (1);
void *rep = zmq_socket (ctx, ZMQ_REP);
int rc = zmq_socket_monitor (rep, "inproc://monitor.req", ZMQ_EVENT_ALL);
// Create thread, check error messages...
...
// Bind the REP socket to your external endpoint
rc = zmq_bind (rep, myExternalEndPoint); 
```

查看[zmq_socket_monitor API 文档](http://api.zeromq.org/3-2:zmq-socket-monitor)（适用于版本 3.2.2），了解如何设置它的示例。

注意事项：

> 此初始实现仅支持面向连接（tcp 和 ipc）的传输。
> 
> **ZMQ_EVENT_CONNECTED：建立连接**
> ZMQ_EVENT_CONNECTED 事件在与远程对等点建立连接时触发。这可以同步或异步发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-14T09:55:40.433

从监视器套接字读取的消息有 2 帧：

*   事件编号（16bit）+事件值（32bit）
*   TCP 和 IPC 的受影响端点的名称

文档没有明确说明，但端点是指套接字的*本地*端点：您绑定到的 ip/port。要获取*远程*端点（连接对等方的 ip/端口），首先需要连接文件描述符：ZMQ_EVENT_CONNECTED 事件的事件值。然后在获得的 fd 上调用 getpeername，如下所示：

```
std::string getPeerName(int socketFd) {
    sockaddr_storage sockaddrStore;
    socklen_t len = sizeof(sockaddrStore);

    sockaddrStore.ss_family = AF_UNSPEC;
    getpeername(socketFd, (sockaddr*)&sockaddrStore, &len);

    if (sockaddrStore.ss_family == AF_INET) {
        char addrstr[INET_ADDRSTRLEN];
        sockaddr_in* sockaddrin = (sockaddr_in*)&sockaddrStore;

        inet_ntop(AF_INET, &sockaddrin->sin_addr, addrstr, INET_ADDRSTRLEN);
        return std::string("tcp://") + addrstr;
    }

    return "<unknown>";
} 
```

# delphi - 来自 DLL 的 DWM 交互

> ID：14971762
> 
> 赞同：2
> 
> 时间：2013-02-20T03:25:19.807
> 
> 标签：delphi, firemonkey, dwm, remobjects, firemonkey-fm2

大家早上好。

我目前正在尝试编写一个小型应用程序，该应用程序是围绕通过 Windows DWM API（例如 DWM Thumbnails）提供的功能构建的。其中一个功能是能够从应用程序中动态选择缩略图区域，并将其放大/放大。可以通过某种“设置区域”功能从 DWM 执行此操作，但我想先尝试我自己的路线，然后再深入 API。

最近找到[了 Delphi 的示例](http://www.delphigeist.com/2011_01_01_archive.html)，我希望从演示中扩展并构建更具体的东西。我开始着手将代码移至`Firemonkey FM2`应用程序（因为与 VCL 相比，我更喜欢框架的视觉功能）。通过一些调整，我设法构建了它，但不幸`DWMRegisterThumbnail`的是，尽管 VCL 版本运行完美，但在 FMX 应用程序中运行时似乎不会返回有效结果。

然后我再看远一点，决定试一试九头蛇。我将工作的 VCL 示例复制到 Hydra 插件中，并创建了一个 Firemonkey 主机应用程序。我正确设置了两个部分并进行了编译。DLL 正确加载，我可以按预期在 FMX 主机内看到 VCL 插件接口。但是，在尝试查看窗口的 DWM 缩略图时，我再次遇到了运行非 hydra FMX 应用程序时遇到的相同问题。

然后我开始创建一个 VCL 主机应用程序，以确保它不是特定于 VCL-FMX 交互的问题。我编译了 VCL 主机，加载到 VCL 插件中，我再次可以在 VCL 主机中看到 VCL 插件。然而再一次，我仍然发现我无法从 DWM 查看缩略图。显然，这不是 Firemonkey-VCL 交互问题。

因此，我得出的结论是从 DLL 运行 DWM 代码存在问题。理想情况下，我想要一个 FMX 主机应用程序，因为我更容易将 a`TSelection`放在缩略图上，并以这种方式处理缩放（例如非常少的代码，并且无需寻找自定义组件）提及额外的奖金，例如`MakeScreenshot`。

所以，切入正题；**是否可以从 Hydra 插件调用 DWM API，和/或将 DWM 缩略图输出到 Firemonkey 表面？**

我的 Hydra 插件中使用的代码[与链接示例](http://www.delphigeist.com/2011_01_01_archive.html)中使用的代码相同，并且我的主机应用程序中使用的代码[基于 Remobject Youtube 频道上的简单示例](http://www.youtube.com/watch?v=1ADYE5EdIKQ)。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-20T05:00:57.147

如果没有源代码，我猜你没有将正确的窗口句柄传递给[`DwmRegisterThumbnail`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa969521%28v=vs.85%29.aspx)函数。您可以使用该 [`FmxHandleToHWND`](http://docwiki.embarcadero.com/Libraries/XE3/en/FMX.Platform.Win.FmxHandleToHWND)函数将 FMX 表单句柄转换为 Windows 句柄。

试试这个修改后的代码版本

```
unit Unit28;

interface

uses
  System.SysUtils, System.Types, System.UITypes, System.Classes, System.Variants,
  FMX.Types, FMX.Controls, FMX.Forms, FMX.Dialogs, Winapi.Windows, Winapi.DwmApi;

type
  TForm28 = class(TForm)
    Button1: TButton;
    procedure FormCreate(Sender: TObject);
    procedure Button1Click(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    FTumbnail: HTHUMBNAIL;
    FPreviewEnabled: Boolean;
    { Private declarations }
    procedure PreviewWindow(const ASource, ADest: HWND; const ARect: TRect);
    procedure PreviewDisable;
  public
    { Public declarations }
  end;

var
  Form28: TForm28;

implementation

uses
  FMX.Platform.Win;

{$R *.fmx}

procedure TForm28.Button1Click(Sender: TObject);
var
  Index: Integer;
  LRect: TRect;
begin
  LRect := Rect(5, 5, Self.Width -20,Self.Height -50);
  //here I'm using a fixed window handle ($000102EE) just a sample
  PreviewWindow($000102EE, FmxHandleToHWND(Self.Handle), LRect);
end;

procedure TForm28.FormCreate(Sender: TObject);
begin
  FPreviewEnabled := False;
end;

procedure TForm28.FormDestroy(Sender: TObject);
begin
  PreviewDisable;
end;

procedure TForm28.PreviewDisable;
begin
  if FPreviewEnabled then
    FPreviewEnabled := NOT Succeeded(DwmUnregisterThumbnail(FTumbnail));
end;

procedure TForm28.PreviewWindow(const ASource, ADest: HWND; const ARect: TRect);
var
  LResult: HRESULT;
  LThumpProp: DWM_THUMBNAIL_PROPERTIES;
begin
  if not DwmCompositionEnabled then begin
    ShowMessage('DWM composition is NOT enabled.');
    Exit;
  end;
  PreviewDisable;
  FPreviewEnabled := Succeeded(DwmRegisterThumbnail(ADest, ASource, @FTumbnail));
  if FPreviewEnabled then
  begin
    LThumpProp.dwFlags := DWM_TNP_SOURCECLIENTAREAONLY or DWM_TNP_VISIBLE or DWM_TNP_OPACITY or DWM_TNP_RECTDESTINATION;
    LThumpProp.fSourceClientAreaOnly := False;
    LThumpProp.fVisible := True;
    LThumpProp.opacity := 200;
    LThumpProp.rcDestination := ARect;
    LResult := DwmUpdateThumbnailProperties(FTumbnail, LThumpProp);
    FPreviewEnabled := (LResult = S_OK);
  end else
    ShowMessage('Cannot link to window  ' + IntToStr(ASource));
end;

end. 
```

![在此处输入图像描述](../Images/47053c06b437ba14714af9f821e0a46f.png)

# python - 使用python读取txt文件中的列表

> ID：14971763
> 
> 赞同：0
> 
> 时间：2013-02-20T03:25:29.030
> 
> 标签：python, list

我是 Python 的初学者，我正在做这个项目，我有一个包含 7 列数字的文本文件。我需要编写一个程序来提取第 1、6 和 7 列的数据，并将它们打印在列中，而这些数据仅在列中。这是我到目前为止所做的，但似乎有问题。有人可以指出我吗？

```
import sys
import os
import re

GC11 = 'NGC4697'

base_dirname = '/projects/XRB_Web/abcadmus/499/Lists/'
Luminositylist = base_dirname + GC11 + '_final_list.txt'

try:
  file = open(Luminositylist, 'r')
except IOError:
  print 'Cannot open: '+Luminositylist

source = [ ]
luminosity = [ ]
luminosityerr = [ ]
for line in file:
   point = line.split()
   a = source.append(int((point[0])))
   b = luminosity.append(float((point[5])))
   c = luminosityerr.append(float((point[6])))
   print a, b, c 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T03:34:16.423

`list.append()`return `None`，所以你的作业没有做任何有用的事情。

我不确定为什么需要打印它们并将它们附加到列表中，但请尝试以下方法：

```
 point = line.split()

   a = int(point[0])
   b = float(point[5])
   c = float(point[6])

   source.append(a)
   luminosity.append(b)
   luminosityerr.append(c)

   print a, b, c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:33:14.903

看看 Python CSV 库：[http](http://docs.python.org/2/library/csv.html) ://docs.python.org/2/library/csv.html ，你可能会发现它已经完成了你需要的一切。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T03:33:51.587

假设我有一个名为`test.txt`以下布局的文件：

```
ABC1234
DEF5678
GHI9101 
```

我可以做这个，

```
with open('test.txt', 'r') as f:
  out = [[x[0],x[5],x[6]] for x in f.readlines()] 
```

要获得如下所示的结果`out`：

```
[['A', '3', '4'], ['D', '7', '8'], ['G', '0', '1']] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T04:09:59.023

适用于具有任意列数的 csv（或任何分隔）文件的解决方案

```
f = file("myFile", mode="r")
delimiter = "," # comma for csv files

myData = [i.split(delimiter) for i in file.readlines()] # All the data as a nested list
myColumns = [row[0],row[5],row[6] for row in myData] # select your source, lum and lumerr columns
source, luminosity, luminosityerr = zip(*myColumns) 
```

# jquery - 在引导模式中使用 ajax 加载内容

> ID：14971766
> 
> 赞同：23
> 
> 时间：2013-02-20T03:25:42.323
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

我正在尝试让我的引导模式使用 ajax 检索数据：

```
<a href="{{ path('ajax_get_messages', { 'superCategoryID': 35, 'sex': sex }) }}" data-toggle="modal" data-target="#birthday-modal">
  <img src="{{ asset('bundles/yopyourownpoet/images/messageCategories/BirthdaysAnniversaries.png') }}" alt="Birthdays" height="120" width="109"/>
</a> 
```

我的模态：

```
<div id="birthday-modal" class="modal hide fade">
<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3>Birthdays and Anniversaries</h3>
</div>
<div class="modal-body">

</div>
<div class="modal-footer">
    <a href="#" data-dismiss="modal" class="btn">Close</a>
    {#<button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>#}
</div>
</div> 
```

当我单击链接时，显示模式但正文为空。此外，我没有看到任何 ajax 请求。我正在使用 Bootstrap 2.1.1

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2014-12-31T09:04:30.983

投票最多的答案[在 Bootstrap 3.3 中已弃用，并将在 v4 中删除](https://getbootstrap.com/docs/3.4/javascript/#modals-options)。试试这个：

JavaScript：

```
// Fill modal with content from link href
$("#myModal").on("show.bs.modal", function(e) {
    var link = $(e.relatedTarget);
    $(this).find(".modal-body").load(link.attr("href"));
}); 
```

Html（基于[官方示例](https://getbootstrap.com/docs/3.4/javascript/#live-demo)。请注意，对于 Bootstrap 3.*，我们设置`data-remote="false"`为禁用已弃用的 Bootstrap 加载功能）：

```
<!-- Link trigger modal -->
<a href="remoteContent.html" data-remote="false" data-toggle="modal" data-target="#myModal" class="btn btn-default">
    Launch Modal
</a>

<!-- Default bootstrap modal example -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
      </div>
      <div class="modal-body">
        ...
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div> 
```

自己尝试一下：[https ://jsfiddle.net/ednon5d1/](https://jsfiddle.net/ednon5d1/)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-09-08T18:34:23.630

像这样在 Bootstrap 3 中轻松完成：

```
<a data-toggle="modal" href="remote.html" data-target="#modal">Click me</a> 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-02-20T09:02:18.647

这是我解决问题的方法，可能对某些人有用：

Ajax 模态似乎不适用于 boostrap 2.1.1

所以我最终自己编码：

```
$('[data-toggle="modal"]').click(function(e) {
  e.preventDefault();
  var url = $(this).attr('href');
  //var modal_id = $(this).attr('data-target');
  $.get(url, function(data) {
      $(data).modal();
  });
}); 
```

调用模式的链接示例：

```
<a href="{{ path('ajax_get_messages', { 'superCategoryID': 6, 'sex': sex }) }}" data-toggle="modal">
    <img src="{{ asset('bundles/yopyourownpoet/images/messageCategories/BirthdaysAnniversaries.png') }}" alt="Birthdays" height="120" width="109"/>
</a> 
```

我现在通过 ajax 发送整个模态标记。

[归功于](https://gist.github.com/drewjoh/1688900)drawjoh

# repository-pattern - 使用 ServiceStack.ORMLite 的存储库模式中的事务

> ID：14971770
> 
> 赞同：9
> 
> 时间：2013-02-20T03:26:15.597
> 
> 标签：repository-pattern, servicestack, ormlite-servicestack

我正在使用 ServiceStack.ORMLite 实现存储库模式，如下所示：

```
public class MyRepository : IMyRepository
{
    private IDbConnectionFactory DbConnectionFactory = null;

    public MyRepository(IDbConnectionFactory dbConnectionFactory)
    {
        DbConnectionFactory = dbConnectionFactory;
    }

    public void MyMethod()
    {
        using (var connection = DbConnectionFactory.OpenDbConnection())
        using (var cmd = connection.CreateCommand())
        {
            //Do something here
        }
    }
} 
```

但是当我需要在 DbTransaction 中扭曲一些 DB 操作时，我不知道如何处理 DbTransaction。它看起来[`TransactionScope`](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)是一个解决方案，但我不知道这是否太重了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T04:59:07.263

[ServiceStack OrmLite](https://github.com/ServiceStack/ServiceStack.OrmLite/)让您可以访问 ADO.NET 的原始数据`IDbConnection`和`IDbTransaction`您应该使用的类，而不是 TransactionScope 的。您可以使用`IDbConnection.OpenTransaction()`扩展方法创建事务，例如：

```
public class MyRepository : IMyRepository, IDisposable
{
    private IDbConnectionFactory DbFactory { get; set; }

    private IDbConnection db;
    private IDbConnection Db
    {
        get { return db ?? (db = dbFactory.Open()); }
    }

    public void WithTransactions()
    {
        using (var trans = Db.OpenTransaction())
        {
            //Do something here

            trans.Commit();
        }
    }

    public List<Poco> WithoutTransactions()
    {
        return Db.Select<Poco>();
    }

    public void Dispose()
    {
        if (db != null) 
            db.Dispose();
    }
} 
```

由于它需要更少的代码，我更喜欢属性注入并使用惰性`Db`属性来简化我的方法的数据访问模式。

注意：每当您的任何类保留对打开的引用`IDbConnection`（如这个）时，它应该注册为**None/Transient**或**RequestScope**以便在使用后处理连接（即不要将其注册为单例）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-03T17:44:30.240

我喜欢 mythz 的回答，但是根据 mythz 的反馈，我自己在让事情正常工作时遇到了一些麻烦。我遇到了另一个答案，起初，它似乎不是我想要的，但最终让我朝着正确的方向前进。

[使用 ServiceStack.ORMLite 实现工作单元和存储库模式的最佳实践](https://stackoverflow.com/questions/14973648/best-practices-of-implementing-unit-of-work-and-repository-pattern-using-service)

# android - 如何从后台弹出片段

> ID：14971780
> 
> 赞同：86
> 
> 时间：2013-02-20T03:28:14.230
> 
> 标签：android, android-fragments, back-stack

我有一个活动 A，它调用片段 Bf，它调用片段 Cf。我希望在调用 Cf 时将 Bf 放在后台堆栈中，以便用户可以导航回它。但是，如果在 Cf 中按下特定按钮，我希望将 Bf 从后台堆栈中删除。这可能吗？

我看到有一个 popBackStack() 函数。但是，我对这将如何工作感到有些困惑。使用此功能是否安全？是否有可能在后台堆栈的 Bf 之后插入来自不同应用程序的活动？

另外，有什么方法可以改变 backstack 上片段的 savedInstanceState 吗？

我只是不知道如何使用模拟器对 backstack 进行健壮的测试。

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2013-02-20T06:25:45.747

您可以按名称弹出片段。在将片段添加到后台堆栈时，只需给它们一个名称。

```
fragmentTransaction.addToBackStack("fragB");
fragmentTransaction.addToBackStack("fragC"); 
```

然后在 Fragment_C 中，使用名称 ie.. 弹出回栈`fragB`并包含`POP_BACK_STACK_INCLUSIVE`

```
someButtonInC.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View v) {

        FragmentManager fm = getActivity()
                .getSupportFragmentManager();
        fm.popBackStack ("fragB", FragmentManager.POP_BACK_STACK_INCLUSIVE);
    }
}); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2018-07-30T07:10:47.537

**从 BackStack 中弹出 Fragment 的三种方法**

只需添加以下任何行：

1)

```
getActivity().getSupportFragmentManager().popBackStack(); 
```

2)

```
getActivity().getSupportFragmentManager().popBackStack(null, FragmentManager.POP_BACK_STACK_INCLUSIVE); 
```

3)

```
getActivity().getSupportFragmentManager().popBackStackImmediate(null, FragmentManager.POP_BACK_STACK_INCLUSIVE); 
```

它们都是从 Backstack 中弹出片段的简单方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-27T11:39:10.510

首先替换片段container_view，那时我们添加名称，如“后期交易”

```
 getSupportFragmentManager().beginTransaction().replace(R.id.container_view, 
    profileFragment, "Profile").addToBackStack("Later Transaction").commit(); 
```

然后在后面按下按钮使用后来的事务名称弹出返回堆栈

```
 int count = getSupportFragmentManager().getBackStackEntryCount();
    if(count > 1) {
     getSupportFragmentManager().popBackStack("Later Transaction", 
     FragmentManager.POP_BACK_STACK_INCLUSIVE);
    } else {
        DialogUtils.show(HomeActivity.this, 
        getString(R.string.exit_app_message), getString(R.string.alert), 
       "Yes","No", new DialogUtils.ActionListner() {
            @Override
            public void onPositiveAction() {
                finish();
            }
            @Override
            public void onNegativeAction() {
            }
        });
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-01T13:42:40.413

这是使用弹出最后一个片段的示例`BackStackEntry`

```
val manager = supportFragmentManager
try {
    // get last entry (you can get another if needed)
    val entry = manager.getBackStackEntryAt(manager.backStackEntryCount - 1)
    // you can pop it by name
    manager.popBackStack(entry.name, FragmentManager.POP_BACK_STACK_INCLUSIVE)
    // or pop by id
    manager.popBackStack(entry.id, FragmentManager.POP_BACK_STACK_INCLUSIVE)
} catch (ex: Exception) {
    ex.printStackTrace()
} 
```

# jsf - JSF：如何为生日创建自定义验证器？

> ID：14971787
> 
> 赞同：0
> 
> 时间：2013-02-20T03:29:06.103
> 
> 标签：jsf, date, jsf-2, validation

我想使用自定义验证器创建选定的生日。这是我的看法：

```
 <h:selectOneMenu id="birthdate_day" value="#{userc.userb.b_day}">
            <f:validator validatorId="dateExistValidator" />
            <f:attribute name="day" value="#{dateExist.submittedValue}" />
            <f:ajax event="blur" render="m_birthdate_day" />

            <f:selectItem itemLabel="Dia" itemValue="" />
            <f:selectItems value="#{userc.birthDateDays}" />
        </h:selectOneMenu>
        <h:selectOneMenu id="birthdate_month" value="#{userc.userb.b_month}" binding="#{dateExist}" >
            <f:selectItem itemLabel="Mês" itemValue="" />
            <f:selectItems value="#{userc.birthDateMonths}" var="month" itemValue="#{month.key}" itemLabel="#{month.value}" />
            <f:ajax event="blur" execute="birthdate_day birthdate_month" render="m_birthdate_month" />
        </h:selectOneMenu>
        <h:selectOneMenu id="birthdate_year" value="#{userc.userb.b_year}">
            <f:selectItem itemLabel="Ano" itemValue="" />
            <f:selectItems value="#{userc.birthDateYears}" />
            <f:ajax event="blur" render="m_birthdate_year" />
        </h:selectOneMenu> 
```

这是我的验证器：

```
@FacesValidator("dateExistValidator")
public class DateValidator implements Validator {

    @Override
    public void validate(FacesContext context, UIComponent component, Object value) throws ValidatorException {
        Integer day =   (Integer) value;
        Integer month = (Integer) component.getAttributes().get("month");
        Integer year =  (Integer) component.getAttributes().get("year");

        if (day == null || month == null || year == null) {
            return; // Just ignore and let required="true" do its job.
        }

        // do the verifications if the selected date exist
    }
} 
```

但是由于某种原因，我的`month`和`year`我的验证器中的对象始终为空。老实说，我不知道如何将选择的值链接`selectItems`到我的`validator.`

我怎样才能做到这一点 ？或者我应该仅在用户提交表单时进行此验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:41:56.140

你发布的代码不完整吗？

任何方式这应该工作

```
 <h:selectOneMenu id="birthdate_day" value="#{userc.userb.b_day}">
        <f:validator validatorId="dateExistValidator" />

        <f:attribute name="month" value="#{myMonth}" />
        <f:attribute name="year" value="#{myYear}" />
        <f:ajax event="blur" render="m_birthdate_day" />

        <f:selectItem itemLabel="Dia" itemValue="" />
        <f:selectItems value="#{userc.birthDateDays}" />
    </h:selectOneMenu>
    <h:selectOneMenu id="birthdate_month" value="#{userc.userb.b_month}" binding="#{myMonth}" >
        <f:selectItem itemLabel="M?s" itemValue="" />
        <f:selectItems value="#{userc.birthDateMonths}" var="month" itemValue="#{month.key}" itemLabel="#{month.value}" />
        <f:ajax event="blur" execute="birthdate_day birthdate_month" render="m_birthdate_month" />
    </h:selectOneMenu>
    <h:selectOneMenu id="birthdate_year" value="#{userc.userb.b_year}" binding="#{myYear}">
        <f:selectItem itemLabel="Ano" itemValue="" />
        <f:selectItems value="#{userc.birthDateYears}" />
        <f:ajax event="blur" render="m_birthdate_year" />
    </h:selectOneMenu> 
```

此外，要从属性中获取值，您应该首先将它们转换为它们的*UIElement*，然后提取它们的值，例如

```
UISelectOne month = (UISelectOne) component.getAttributes().get("myMonth");
month.getSubmittedValue() 
```

# python-2.7 - 我可以让 pygame 有一个具有两个功能的键盘按钮吗？

> ID：14971789
> 
> 赞同：-2
> 
> 时间：2013-02-20T03:29:21.013
> 
> 标签：python-2.7, pygame

我正在用 pygame 制作游戏，我想知道是否可以以某种方式做到这一点，如果你按一次空格键，一张图片会被涂抹，但如果你再次按空格键，另一张图片会被涂抹。

谢谢，维克多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:23:39.363

哦是的。每次按空格键时增加一个变量。当它变为 2（或 2 的倍数）时，应该加载您的第二张图像。

# iphone - 在xib文件中选择后如何更改uibutton图像

> ID：14971791
> 
> 赞同：2
> 
> 时间：2013-02-20T03:29:32.710
> 
> 标签：iphone, uibutton

我的 XIB 中有一个 uibutton 我想在选择它后更改它的图像

我已将 **状态配置更改为（突出显示）**并将**背景图像更改为 =“我想更改的图像”。**

但它不工作。xcode 版本 = 4.6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T03:38:23.890

您想将**状态配置**更改为`selected`not`highlighted`

# textview - 如何将数据从 SQlite 显示到多个 textview

> ID：14971793
> 
> 赞同：0
> 
> 时间：2013-02-20T03:29:55.937
> 
> 标签：textview, android-sqlite, android

我在将数据从 sqlite 显示到许多 textview 时遇到问题。例如，对于名称，我想输入 textviewName。下面是我的代码。

```
protected void onCreate(Bundle savedInstanceState) 
{   
    super.onCreate(savedInstanceState);
    setContentView(R.layout.profile);

    TextView TV_Name = (TextView)findViewById(R.id.TVName);
    TextView TV_DOB = (TextView)findViewById(R.id.TVDOB);
    TextView TV_Address = (TextView)findViewById(R.id.TVAddress);
    TextView TV_BloodType = (TextView)findViewById(R.id.TVBloodType);
    TextView TV_Height =    (TextView)findViewById(R.id.TVHeight);
    TextView TV_DrName =    (TextView)findViewById(R.id.TVDrName);
    TextView TV_DrContact = (TextView)findViewById(R.id.TVDrContact);
    TextView TV_CaretakerName = (TextView)findViewById(R.id.TVCaretakerName);
    TextView TV_CaretakerContact = (TextView)findViewById(R.id.TVCaretakerContact);
    TextView TV_HospitalName = (TextView)findViewById(R.id.TVHospitalName);
    TextView TV_HospitalContact = (TextView)findViewById(R.id.TVHospitalContact);

    DBHelper helper = new DBHelper(this);
    database = helper.getWritableDatabase();

    String sql = "select * from " + DBHelper.TABLE_PATIENT;
    Cursor cursor = database.rawQuery(sql, null);
    if (cursor.moveToFirst()) {
       do {
           idList.add(cursor.getLong(0));
           list.add(cursor.getString(1));
           list.add(cursor.getString(2));
           list.add(cursor.getString(3));
           list.add(cursor.getString(4));
           list.add(cursor.getString(5));
           list.add(cursor.getString(6));
           list.add(cursor.getString(7));
           list.add(cursor.getString(8));
           list.add(cursor.getString(9));
           list.add(cursor.getString(10));
           list.add(cursor.getString(11));
           list.add(cursor.getString(12));
           list.add(cursor.getString(13));

       } while (cursor.moveToNext());
    }

    TV_Name.setText(cursor.getString(1)); 
        TV_DOB.setText(cursor.getString(2));
    cursor.close(); 

} 
```

但我收到错误 java.lang.NullPointerException

更新：这里是我的数据库

```
public class DBHelper extends SQLiteOpenHelper{

public static final String DB_NAME = "MyDocDB";
public static final int DB_VERSION = 1; 

//Table Patient Details//
    public static final String TABLE_PATIENT = "patient";
    public static final String PATIENT_ID = "id";
    public static final String NAME = "name";
    public static final String DOB = "dob";
    public static final String ADDRESS = "address";
    public static final String BLOODTYPE = "bloodtype";
    public static final String HEIGHT = "height";
    public static final String DRNAME = "drname";
    public static final String DRCONTACT = "drcontact";
    public static final String GUARDIANNAME1 = "guardianname1";
    public static final String GUARDIANCONTACT1 = "guardiancontact1";
    public static final String GUARDIANNAME2 = "guardianname2";
    public static final String GUARDIANCONTACT2 = "guardiancontact2";
    public static final String HOSPITALNAME = "hospitalname";
    public static final String HOSPITALCONTACT = "hospitalcontact";

public DBHelper(Context context) {
    super(context, DB_NAME, null, DB_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    createTable(db);    
            testInsert(db);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
}   

//create table
public void createTable(SQLiteDatabase db)
{
    String query = "create table "+ TABLE_PATIENT +" (" +
            PATIENT_ID + " integer primary key autoincrement," +
            NAME + " text," +
            DOB + " text," +
            ADDRESS + " text," +
            BLOODTYPE + " text," +
            HEIGHT + " text," +
            DRNAME + " text," +
            DRCONTACT + " text," +
            GUARDIANNAME1 + " text," +
            GUARDIANCONTACT1 + " text," +
            GUARDIANNAME2 + " text," +
            GUARDIANCONTACT2 + " text," +
            HOSPITALNAME + " text," +
            HOSPITALCONTACT + " text)";
    db.execSQL(query);  
}

//insert
public void insertDataProfile(SQLiteDatabase db, String name, String dob,
        String address, String bloodtype, String height,
        String drname, String drcontact, String guardianname1, 
        String guardiancontact1, String guardianname2, 
        String guardiancontact2, String hospitalname, String     hospitalcontact)
{
    ContentValues cvPatient = new ContentValues();
    cvPatient.put(NAME, name);
    cvPatient.put(DOB, dob);
    cvPatient.put(ADDRESS, address);
    cvPatient.put(BLOODTYPE, bloodtype);
    cvPatient.put(HEIGHT, height);
    cvPatient.put(DRNAME, drname);
    cvPatient.put(DRCONTACT, drcontact);
    cvPatient.put(GUARDIANNAME1, guardianname1);
    cvPatient.put(GUARDIANCONTACT1, guardiancontact1);
    cvPatient.put(GUARDIANNAME2, guardianname2);
    cvPatient.put(GUARDIANCONTACT2, guardiancontact2);
    cvPatient.put(HOSPITALNAME, hospitalname);
    cvPatient.put(HOSPITALCONTACT, hospitalcontact);
    db.insert(TABLE_PATIENT, null, cvPatient);
}

public void testInsert(SQLiteDatabase db)
{
    db.execSQL("INSERT INTO "
    + TABLE_PATIENT
    + "name, dob, address, bloodtype, height, drname, "
    + "drcontact, guardianname1, guardiancontact1, " 
    + "guardianname2, guardiancontact2,hospitalname, "
    + "hospitalcontact"
    + " VALUES ('muna', '11/02/90', 'No 34, Taman Seri Mengkuang 8', " +
    "'0', '158', 'dr nurul', '12344', 'dada', '141'," +
    "'fafa', '34141', 'faga', '14141');");

public Cursor getAllData(SQLiteDatabase db)
{

    return db.query(TABLE_PATIENT, new String[]{PATIENT_ID, NAME, ADDRESS,
            BLOODTYPE, HEIGHT, DRNAME, DRCONTACT, GUARDIANNAME1, GUARDIANCONTACT1,
            GUARDIANNAME2, GUARDIANCONTACT2, HOSPITALNAME, HOSPITALCONTACT},
            null, null, null, null, null);  
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T05:25:20.020

{

```
 protected void onCreate(Bundle savedInstanceState) 
 {   
  super.onCreate(savedInstanceState);
  setContentView(R.layout.profile);

  TextView TV_Name = (TextView)findViewById(R.id.TVName);
  TextView TV_DOB = (TextView)findViewById(R.id.TVDOB);
  TextView TV_Address = (TextView)findViewById(R.id.TVAddress);
  TextView TV_BloodType = (TextView)findViewById(R.id.TVBloodType);
  TextView TV_Height =    (TextView)findViewById(R.id.TVHeight);
  TextView TV_DrName =    (TextView)findViewById(R.id.TVDrName);
  TextView TV_DrContact = (TextView)findViewById(R.id.TVDrContact);
  TextView TV_CaretakerName = (TextView)findViewById(R.id.TVCaretakerName);
  TextView TV_CaretakerContact = (TextView)findViewById(R.id.TVCaretakerContact);
  TextView TV_HospitalName = (TextView)findViewById(R.id.TVHospitalName);
  TextView TV_HospitalContact = (TextView)findViewById(R.id.TVHospitalContact);

DBHelper helper = new DBHelper(this);
database = helper.getWritableDatabase();

String sql = "select * from " + DBHelper.TABLE_PATIENT;
Cursor cursor = database.rawQuery(sql, null);
if (cursor.moveToFirst()) {
   do {
       idList.add(cursor.getLong(0));
       list.add(cursor.getString(1));
       list.add(cursor.getString(2));
       list.add(cursor.getString(3));
       list.add(cursor.getString(4));
       list.add(cursor.getString(5));
       list.add(cursor.getString(6));
       list.add(cursor.getString(7));
       list.add(cursor.getString(8));
       list.add(cursor.getString(9));
       list.add(cursor.getString(10));
       list.add(cursor.getString(11));
       list.add(cursor.getString(12));
       list.add(cursor.getString(13));

   } while (cursor.moveToNext());
}

cursor.moveToFirst();
TV_Name.setText(cursor.getString(1)); 
TV_DOB.setText(cursor.getString(2));
cursor.close(); 
```

}

你试过这个吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:34:41.717

那不是因为您已经使用 moveToNext 将光标移到了末尾吗？我认为在再次访问数据之前调用 MoveToFirst。

# vb.net - 如何从多条记录中获取每条记录的最小日期

> ID：14971794
> 
> 赞同：0
> 
> 时间：2013-02-20T03:30:22.613
> 
> 标签：vb.net, greatest-n-per-group, sql

我想获得我的表中每条记录的最小日期，其中包含一个主键的多个日期条目。看看我的表：

```
 CaseNo     Entry_date   
   ABC-001     2/12/13
   ABC-002     2/09/13
   ABC-001     1/01/13
   ABC-001     1/31/13
   ABC-002     1/01/13
   ABC-003     2/01/12
   ABC-003     2/18/13 
```

我想要这个结果：

```
 CaseNo     Entry_date    Min_date
       ABC-001     2/12/13      1/01/13
       ABC-002     2/09/13      1/09/13
       ABC-001     1/01/13      1/01/13
       ABC-001     1/31/13      1/01/13
       ABC-002     1/09/13      1/09/13 
       ABC-003     2/01/12      2/01/13
       ABC-003     2/18/13      2/01/13 
```

我想在我的桌子上记录每个 CaseNo 的最短日期。

我试过这段代码：

```
Select CaseNo,Entry_date, Min(Entry_date) as Min_date
from mytable group by CaseNo 
```

结果是这样的：

```
 CaseNo     Entry_date    Min_date
   ABC-001     1/01/13      1/01/13
   ABC-002     1/09/13      1/09/13 
   ABC-003     2/01/12      2/01/13 
```

该代码删除了没有最短日期的行。我想显示所有最小日期为 Min_date 的记录。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T05:37:20.037

不确定您使用的是什么 RDBMS，但我想到了两种方法。

## 对派生表 JOIN

创建 ( `CaseNo`, `MIN(Entry_date)`) 行的派生表，并将其与主表连接：

```
 SELECT CaseNo, Entry_date, d.Min_date AS "Min_date"
      FROM tbl
INNER JOIN (  SELECT CaseNo, MIN(Entry_date) AS "Min_date"
                FROM tbl
            GROUP BY 1) d
        ON tbl.CaseNo = d.CaseNo; 
```

## 使用分析（窗口）函数

`Entry_date`如果您的 RDBMS 支持它，您可以跳过派生表并以系统提供的最小值询问您的记录`CaseNo`：

```
SELECT CaseNo, Entry_date, MIN(Entry_date) OVER (PARTITION BY CaseNo) AS "Min_date"
  FROM tbl; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-28T03:13:15.957

试试这个

```
SELECT
  CaseNo,
  Entry_date,
  (SELECT MIN(Entry_date) FROM Cases subc WHERE subc.CaseNo=c.CaseNo GROUP BY CaseNo) AS MinEntryDate
FROM Cases c 
```

# c# - 从后面的代码启动 OpenOffice 作为服务不起作用

> ID：14971797
> 
> 赞同：2
> 
> 时间：2013-02-20T03:31:14.140
> 
> 标签：c#, asp.net, asp.net-mvc, openoffice.org

在我的开发机器上一切正常。但是当我在服务器上尝试并从代码启动它时，OpenOffice 无法连接到端口 2002。如果我使用完全相同的命令从 cmd 启动它，它的工作......

我做错了什么？

Cmd 命令

```
c:/openoffice/program/soffice.exe -headless -nologo -nofirststartwizard -norestore -accept=socket,host=localhost,port=2002;urp;StarOffice.Service 
```

从代码

```
 var info = new ProcessStartInfo("c:/openoffice/program/soffice.exe")
                {
                    UseShellExecute = false,
                    RedirectStandardInput = true,
                    RedirectStandardOutput = true,
                    RedirectStandardError = true,
                    Arguments = "-headless -nologo -nofirststartwizard -norestore -accept=socket,host=localhost,port=2002;urp;StarOffice.Service" 
                };

            var result = Process.Start(info); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T00:05:56.427

在 IIS 管理器（此处为 IIS 7.5）中，进入应用程序使用的应用程序池的高级设置。将“加载用户配置文件”设置为 True。

这似乎是必需的，就像`-nofirststartwizard`您已经拥有的一样。

这两件事结合起来对我有用。

# c++ - 以明显的方式反转位

> ID：14971799
> 
> 赞同：2
> 
> 时间：2013-02-20T03:31:51.247
> 
> 标签：c++, c, bit-manipulation

我看到了链接[http://pvtridvs.net/pool/bithacks.html#BitReverseObvious](http://pvtridvs.net/pool/bithacks.html#BitReverseObvious)并在此处发布了代码：

```
unsigned int v;         // reverse the bits in this
unsigned int t = v;     // t will have the reversed bits of v
int i;

for (i = sizeof(v) * 8 - 1; i; i--)
{
  t <<= 1;
  v >>= 1;
  t |= v & 1;
} 
```

有人能解释一下为什么这个看起来很简单的算法有效吗？我在纸上测试了一些最简单的例子，比如 4 位 0011 等，它可以工作，但我根本不明白为什么这 3 行移位和按位运算可以实现它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T03:34:52.587

它将位从 的低位“移出”，并将位“移入`v`”到 的低位`t`。把变量想象成一堆比特。您正在从中弹出位`v`并将它们推入`t`. 从一个列表中弹出并推送到另一个最初为空的列表是反转任何列表的简单方法。初始化只是对结果执行最低位的初始“推送”。这个技巧可以节省一只小狗并推动（即左右移位）。例如，对于一个字节，只需要 7 次以上的 pop-push。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:35:33.137

每轮`t`上移一个位置，`v`下移一个位置；并且当前最后一个 but of`v`被放置在`t`.

# autocad - 从一系列点和 3dpolyline 创建 3d 折线

> ID：14971800
> 
> 赞同：2
> 
> 时间：2013-02-20T03:31:51.727
> 
> 标签：autocad

我有一系列点和一条 3dpolyline。如何连接这些以获得 3dpolylines。

我不想点击每个点来加入 3dpolyline。

附件请看图片了解更多细节

.![在此处输入图像描述](../Images/75f7c2c395f628d982837bc7b3bf7b40.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-24T15:32:45.717

从模型空间中获取所有点。

使用这些点创建 Polyline3d。

# eclipse - 从 Eclipse 中运行 Tomcat 总是给我 404（但 index.html 有效）

> ID：14971808
> 
> 赞同：4
> 
> 时间：2013-02-20T03:32:21.830
> 
> 标签：eclipse, spring, maven, tomcat, servlet-3.0

首先是我的软件堆栈：

*   日食 4.2
*   雄猫 7.0.37
*   带有 m2e 插件的 Maven
*   javax.servlet 3.0.1
*   Spring WebMVC 和 Spring Web 3.2.1

我正在使用**没有 web.xml**的 servlet 3 。

**我做了什么：**

*   Eclipse -> 新的 Maven 项目
*   编辑 pom.xml：添加 Spring 和 javax.servlet
*   Eclipse -> 项目属性 -> 项目构面 -> 添加动态 Web 构面
*   Eclipse -> 项目属性 -> 部署程序集 -> 删除 WebContent 并添加 /src/main/webapp
*   添加`javax.servlet.ServletContainerInitializer`到 /src/main/webapp/META-INF/services 并放入实现的完全限定类名中`WebApplicationInitializer`

目前我的项目包含大约 7 个文件（3x .java、1x .jsp、1x .html、1x .pom、1x javax.servlet.ServletContainerInitializer）

**什么有效：**

通过 Maven 编译和打包，然后简单地将 .war 部署在独立的 Tomcat 上。

*   `http://127.0.0.1/MyApp/`显示 index.html
*   `http://127.0.0.1/MyApp/hello`显示 hello.jsp

**什么不起作用：**

如果我现在尝试通过`Run -> Run on Server`. 然后我选择我的 Tomcat 目录等... servlet ( `/hello`) 只给出 404。但 index.html 有效。

**3 个 Java 文件：**

初始化程序.java：

```
public class Initializer implements WebApplicationInitializer {
    @Override
    public void onStartup(ServletContext servletContext) throws ServletException {
        AnnotationConfigWebApplicationContext ctx = new AnnotationConfigWebApplicationContext();
        ctx.register(WebAppConfig.class);

        Dynamic servlet = servletContext.addServlet("dispatcher", new DispatcherServlet(ctx));
        servlet.setLoadOnStartup(1);
        servlet.addMapping("/");    
    }
} 
```

WebAppConfig.java：

```
@Configuration
@ComponentScan("myapp.server")
@EnableWebMvc
public class WebAppConfig extends WebMvcConfigurerAdapter {
    @Override
    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
        configurer.enable();
    }

    @Bean
    public InternalResourceViewResolver setupViewResolver() {
        InternalResourceViewResolver resolver = new InternalResourceViewResolver();
        resolver.setPrefix("/WEB-INF/views/");
        resolver.setSuffix(".jsp");
        return resolver;
    }
} 
```

FooController.java：

```
@Controller
public class FooController { 
    @RequestMapping("/hello")
    public String helloWorld(Model model) {
        model.addAttribute("wisdom", "Goodbye XML");
        return "hello";
    }
} 
```

如果您需要更多其他信息，请告诉我。

谢谢！！

编辑：如果它是通过 Eclipse 启动的，我在哪里可以找到 Tomcat 的日志文件？

## 输出：

Eclipse 控制台（这一切都是在启动 Tomcat 之后发生的，即使我调用一些 URL，例如or ，它**也不会改变**）： http: [//pastebin.com/gGn0j48T](http://pastebin.com/gGn0j48T)`http://localhost:8080/``http://localhost:8080/MyApp/`

Tomcat 日志似乎保存在`.metadata/.plugins/org.eclipse.wst.server.core/tmp0/logs/`. 只有一个文件`localhost_access_log.2013-02-20.txt`，输出看起来并不有趣： http: [//pastebin.com/QmD4wPmA](http://pastebin.com/QmD4wPmA)

现在我已经这样做了`catalina.out`：[https ://stackoverflow.com/a/5045247/1321564](https://stackoverflow.com/a/5045247/1321564)

这是重新启动 Tomcat 并尝试一些 URL 后的输出：文件保持为空......？！

我还意识到 Tomcat 上的以下目录是空的：`wtpwebapps/MyApp/WEB-INF/lib/`. 那里不应该有一些Spring库吗？！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-11T13:39:07.457

搞定了！！！

如上所述：`WEB-INF/lib`文件夹中没有 Spring 库。

因为我使用的是 Maven。解决方案非常简单：

*   右键单击项目
*   点击`Properties`
*   点击`Deployment Assembly`
*   点击`Add...`
*   选择`Java Build Path Entries`
*   点击`Next`
*   选择`Maven Dependencies`
*   点击`Finish`

重新启动服务器。

现在我可以在服务器视图中看到不同之处：

*   展开 Tomcat 服务器。现在你可以看到项目
*   展开项目。**现在有`spring-web-3.2.1.RELEASE.jar`上市**。以前不是这样的。

# python - 如何在 Python 中通过 .format() 函数使用多个选项

> ID：14971809
> 
> 赞同：2
> 
> 时间：2013-02-20T03:32:45.673
> 
> 标签：python, python-3.x, string-formatting

我阅读了 Python3.3 文档中关于 .format() 函数的部分并进行了一些在线研究，但不幸的是，我只找到了“单一”选项的示例和解释。

这是一个例子：

*   打印右对齐

`>>> print("this is a {:>30} test ".format(2.345345345345))`

```
this is a                 2.345345345345  test 
```

*   仅打印小数点后 2 位

`>>> print("this is a {:.2f} test ".format(2.345345345345))`

```
this is a 2.35  test 
```

但是我怎么能同时做这两个呢？我已经尝试了各种变化，但不幸的是没有成功。有人知道正确的语法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:35:54.563

尝试

```
print("this is a {:>30.2f} test ".format(2.345345345345)) 
```

如有疑问，请尝试显而易见的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T03:35:59.153

像这样：

```
print("this is a {:>30.2f} test ".format(2.345345345345)) 
```

# mysql - MySQL - 在 JOIN 中选择给定日期之前的最新记录

> ID：14971816
> 
> 赞同：0
> 
> 时间：2013-02-20T03:33:35.970
> 
> 标签：mysql, sql, date, join

请耐心等待，我是 SQL 新手，无法解释这一点......

我有两个类似于以下的表：

```
test1
+------+----------+----------+-----------+
|  id  |  serial  |  t1data  |  t1date   |
+------+----------+----------+-----------+
|  1   |    a     |   ...    |  6/02/12  |
|  2   |    a     |   ...    |  6/04/12  |
|  3   |    b     |   ...    |  6/06/12  |
|  4   |    a     |   ...    |  6/08/12  |
+------+----------+----------+-----------+

test2
+------+----------+----------+-----------+
|  id  |  serial  |  t2data  |  t2date   |
+------+----------+----------+-----------+
|  1   |    a     |   ...    |  6/05/12  |
|  2   |    b     |   ...    |  6/07/12  |
|  3   |    b     |   ...    |  6/08/12  |
|  4   |    a     |   ...    |  6/09/12  |
+------+----------+----------+-----------+ 
```

我想创建一个查询来连接这两个表，以便其中的每条记录`test2`对应`test1`于`test2`. 任何给定的序列都可以在任一表中有多个记录。

使用上面的示例，结果应如下所示：

```
+----------+----------+-----------+----------+-----------+
|  serial  |  t2data  |  t2date   |  t1data  |  t1date   |
+----------+----------+-----------+----------+-----------+
|    a     |   ...    |  6/05/12  |   ...    |  6/04/12  |
|    b     |   ...    |  6/07/12  |   ...    |  6/06/12  |
|    b     |   ...    |  6/08/12  |   ...    |  6/06/12  |
|    a     |   ...    |  6/09/12  |   ...    |  6/08/12  |
+----------+----------+-----------+----------+-----------+ 
```

这是我尝试过的查询，但它不起作用。

```
SELECT 
    t2.serial, t2.t2data, t2.t2date, t1a.t1data, t1a.t1date
FROM 
    test2 t2
JOIN 
    test1 t1a ON (t1a.serial = t2.serial AND t1a.t1date > t2.t2date)
LEFT JOIN 
    test1 t1b ON (t1a.serial = t1b.serial AND t1a.t1date < t1b.t1date)
WHERE 
    t1b.serial IS NULL 
```

我可能在这一切都错了，但我能做些什么来完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:19:42.313

我不确定这是否是最好的方法，但它正在工作：

```
SELECT t2.serial, t2.t2data, t1.t1data, t1.t1date
FROM
  (SELECT t2.serial, t2.t2data, t2.t2date,
         (SELECT max(t1date)
            FROM test1 t1
           WHERE t1.serial = t2.serial
             AND t1.t1date <= t2.t2date) AS t1date
  FROM test2 t2) t2
  LEFT OUTER JOIN
   test1 t1 ON t2.serial = t1.serial AND t2.t1date = t1.t1date; 
```

[http://www.sqlfiddle.com/#!2/215c263/2](http://www.sqlfiddle.com/#!2/215c263/2)

# php - 在字符后搜索字符串

> ID：14971819
> 
> 赞同：0
> 
> 时间：2013-02-20T03:33:46.853
> 
> 标签：php

我知道如何在 @ 等字符之后搜索字符串。它的代码是使用 strcmp 和 strstr 的组合。但是即使不在之后如何搜索字符串

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:38:06.297

使用`strpos`. 它为您提供一个字符串在另一个字符串中的位置，否则为 false。

[http://php.net/manual/en/function.strpos.php](http://php.net/manual/en/function.strpos.php)

```
$position_of_substring = strpos($what_to_search_in, $what_to_search_for);
if( $position_of_substring === false )
{
    echo 'The string does not contain the string you are looking for.';
}
else
{
    echo 'Your substring is at position: ' . $position_of_substring;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:46:04.153

您应该使用名为“preg_match”的方法

这里是文档的链接：http: [//php.net/manual/en/function.preg-match.php](http://php.net/manual/en/function.preg-match.php)

这里有一个例子：

```
$subject = "@as.asd.com";
$subject2 = "@asd.as.com";
$pattern = '/asd.com/';
echo preg_match ($pattern, $subject); // return 1 if does match
echo preg_match ($pattern, $subject2); // return 0 if doesn't match 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T04:29:07.247

```
$pattern = '/asd.com/';
$subject has the string that you want to test 
```

使用您要搜索的字符展开主题。例如。/@

> $parts = explode("@", $subject);

检查@是否存在于字符串中。如果确实如此，则比较并回显输出

```
if(count($parts) == 2)  
    echo preg_match ($pattern, $parts[1]); 
```

参考官方文档中的[preg_match](http://php.net/manual/en/function.preg-match.php)

# java - 在 Hadoop 中传播自定义配置值

> ID：14971825
> 
> 赞同：5
> 
> 时间：2013-02-20T03:34:13.913
> 
> 标签：java, properties, configuration, hadoop, mapreduce

在 Map/Reduce 期间，有什么方法可以在 Hadoop 中设置和（稍后）获取自定义配置对象？

例如，假设一个应用程序预处理一个大文件并动态确定与该文件相关的一些特征。此外，假设这些特征保存在自定义 Java 对象（例如，一个`Properties`对象，但不排他地，因为有些可能不是字符串）中，并且随后对于每个映射和归约作业都是必需的。

应用程序如何“传播”这个配置，以便每个映射器和缩减器函数在需要时可以访问它？

一种方法可能是使用类的`set(String, String)`方法`JobConf`，例如，通过`JSON`第二个参数将配置对象序列化为字符串，但这可能太过分了，然后`JobConf`每个人都必须访问适当`Mapper`的`Reducer`实例（例如，采用类似于[前面问题](https://stackoverflow.com/questions/5696773/how-to-retrieve-hadoop-job-configuration-based-on-job-id-that-is-currently-runni)中建议的方法）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-20T04:07:28.670

除非我遗漏了什么，否则如果您有一个`Properties`包含 M/R 作业所需的所有属性的对象，您只需将`Properties`对象的内容写入 Hadoop`Configuration`对象即可。例如，像这样：

```
Configuration conf = new Configuration();
Properties params = getParameters(); // do whatever you need here to create your object
for (Entry<Object, Object> entry : params.entrySet()) {
    String propName = (String)entry.getKey();
    String propValue = (String)entry.getValue();
    conf.set(propName, propValue);
} 
```

然后在您的 M/R 作业中，您可以使用该对象在映射器（函数）或归约器（函数）中`Context`取回您的对象，如下所示：`Configuration``map``reduce`

```
public void map(MD5Hash key, OverlapDataWritable value, Context context)
    Configuration conf = context.getConfiguration();
    String someProperty = conf.get("something");
    ....
} 
```

请注意，在使用`Configuration`对象时，您还可以访问`Context`和方法`setup`，`cleanup`如果需要进行一些初始化很有用。

另外值得一提的是，您可能可以直接`addResource`从对象调用方法`Configuration`以将属性直接添加为`InputStream`文件或文件，但我相信这必须是像常规 Hadoop XML 配置一样的 XML 配置，所以这可能只是矫枉过正。

**编辑**：如果是非字符串对象，我建议使用序列化：您可以序列化您的对象，然后将它们转换为字符串（可能使用 Base64 对它们进行编码，因为我不确定如果您有不寻常的字符会发生什么)，然后在映射器/归约器端反序列化您从内部属性中获得的字符串中的对象`Configuration`。

另一种方法是执行相同的序列化技术，但改为写入 HDFS，然后将这些文件添加到`DistributedCache`. 听起来有点矫枉过正，但这可能会奏效。

# pdf - 电子签名和数字签名有什么区别？

> ID：14971830
> 
> 赞同：1
> 
> 时间：2013-02-20T03:34:26.690
> 
> 标签：pdf, digital-signature

我想知道电子​​签名和数字签名的区别？我试着用谷歌搜索它，我得到了一些关于数字签名以及它们是如何被认证的信息。

但我无法理解的是相同的身份验证过程是否对电子签名有效？如果它不同，那么确切的过程是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-24T09:47:43.580

电子签名是指创建具有法律约束力的协议的电子签名过程，而数字签名往往是指由公钥/私钥签名产生的加密签名。

公钥/私钥数字签名可能是用于电子签名的签名方法之一。

数字签名不是电子签名的原因是单独应用它不会创建具有法律约束力的协议，例如，您可以应用数字签名来保护某些数据以通过不受信任的网络传输（实际上这是最初的目的公钥/私钥）。

以此类推，您可以想到您的手写签名等价物 - 您可以在一张空白纸或留言簿上随意多次签名您的名字，不会对您产生任何法律义务。创建签名的不仅是签名方法，还有更广泛的上下文。

我认为电子签名的身份验证过程没有严格的答案。最好将其视为需要建立的一组原则，因为这可以产生任意数量的特定过程。（我认为“身份验证过程”是指生成具有法律约束力的协议的过程）。

合同的形成更注重原则而不是固定过程的原因是，从根本上说，你可以在自己和另一方之间选择任何方式来形成合同，只要它符合一些原则——例如，你重新授权首先达成该协议，即您与其他人之间达成共识等。尽管某些特定合同可能被规定为某种形式和类型。

我同意围绕电子签名的语义仍在不断发展和模棱两可。该行业仍然相对年轻，在缺乏强大和发达的词汇表的情况下，公司试图以不同的方式表达他们的产品。最后我只想说，这个答案中的任何内容都不应被解释为法律建议。我希望这有助于回答你的问题。

# mysql - 我现在在 myisam(mysql) 中有数据表。我应该使用innoDB的关系表吗？

> ID：14971834
> 
> 赞同：0
> 
> 时间：2013-02-20T03:34:49.297
> 
> 标签：mysql, innodb, myisam

具有诸如`tid(int) zid(int) direction(tinyint) type(tinyint)`具有相当繁重的读写操作以及加入 myisam 中的其他表的列的表是否更好地在 myisam 或 innodb 中进行引擎？

有人告诉我，innodb 的写入性能比 myisam 差。真的吗？并且每当不使用主键提取数据时，innodb 也具有类似 myisam 的表锁。是否有任何技术可用于使用 myisam 和 innodb 连接表之间的表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:53:55.523

默认情况下，您应该始终使用 InnoDB。它更快；它支持事务、外键和行级锁定；它对崩溃的容忍度更高——总而言之，它比 MyISAM 好得多。

在某些情况下可能需要 MyISAM 表。两种常见的是：

*   您使用的是不支持全文或地理空间索引的旧版本 MySQL，您需要启用这些功能。

    （请注意，如果您*使用*全文索引，通常最好还是使用外部搜索引擎，例如 Sphinx——MySQL 的全文搜索并不是特别好。）

*   您有一些具有不寻常数据访问模式的表（特别是非常大的只写表，例如日志），它们有时可以在 MyISAM 下执行得更好。

但是，除非您确定这些条件适用，否则您应该使用 InnoDB。这几乎总是正确的选择。

# c# - C# 中的异或字符串

> ID：14971836
> 
> 赞同：11
> 
> 时间：2013-02-20T03:35:07.050
> 
> 标签：c#, xor

我最近开始玩 C#，我试图理解为什么下面的代码不能编译。在错误注释的行中，我得到：

> 无法将类型“int”隐式转换为“char”。显式转换退出（您是否缺少演员表？）

我正在尝试用两个字符串做一个简单的异或运算。

```
public string calcXor (string a, string b)
{
    char[] charAArray = a.ToCharArray();
    char[] charBArray = b.ToCharArray();
    char[] result = new char[6];
    int len = 0;

    // Set length to be the length of the shorter string
    if (a.Length > b.Length)
        len = b.Length - 1;
    else
        len = a.Length - 1;

    for (int i = 0; i < len; i++) {
        result[i] = charAArray[i] ^ charBArray[i]; // Error here
    }

    return new string (result);
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-10-10T14:03:08.930

如果您使用 XOR-ing 隐藏数据，请查看下面的代码。只要需要，密钥就会重复。这可能是一种更短/更好的方法：

```
public static string xorIt(string key, string input)
{
    StringBuilder sb = new StringBuilder();
    for(int i=0; i < input.Length; i++)
        sb.Append((char)(input[i] ^ key[(i % key.Length)]));
    String result = sb.ToString ();

    return result;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-20T03:44:05.730

你正在做一个`xor`2 个字符。`int`由于没有数据丢失，这将为您进行隐式类型转换。但是，从`int`to转换回`char`需要您提供显式转换。

您需要将您的明确转换`int`为`char`for `result[i]`：

```
result[i] = (char) (charAArray[i] ^ charBArray[i]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-26T00:59:00.373

如果结果的值很重要，那么艾伦是正确的（接受的答案）。如果您只是在寻找匹配并且不担心性能，请使用 strcmp() 或 memcmp() 作为替代方案。

在汇编程序中，由于 T 周期较少，通常通过对自身进行 XOR 来初始化事物。如果我是暴力破解（哈希比较），那么这将是对 strcmp 或 memcmp 的改进，因为我真的不排序顺序，只是匹配/不匹配。

读者也应该意识到[这一点](https://stackoverflow.com/a/1445405/1734032)，这是可以调整的。

# c# - 如何在具有多台服务器的高流量asp.net应用程序中实现随机数流

> ID：14971846
> 
> 赞同：3
> 
> 时间：2013-02-20T03:35:51.657
> 
> 标签：c#, asp.net

这个问题来自这样的知识，即当`new Random()`被快速调用时，它会以我假设基于的相同值播种`DateTime.Now.Ticks`。

假设您在最新版本的 ASP.NET、IIS、.NET 等上有一个高流量的 Web 应用程序。它实现了一个在线赌场。我认为模拟老虎机需要从单个随机数流中提取。

在大容量情况下，您可能会得到两台具有相同随机数生成器的老虎机，从而导致过多的大头奖。我对伪随机生成器没有完全了解，但我的直觉是，要安全地实施在线赌场，您确实需要从一个只播种一次的生成器中提取。

我能想到的一个解决方案是一个同步队列，它有一个推送数字的线程，但我不知道如何在多站点应用程序之间同步它。

这种情况有一个好的/标准的解决方案吗？

**更新：我正在处理的实际场景（实际上没有机会获得足够的音量来导致问题）**

我的实际情况是，我有一个流量适中的 asp.net Web 表单站点，并且需要在每个请求上显示两个用户控件之一。我使用以下代码这样做：

```
// Randomly display one of (FreeCreditScore1, MyFreeScoreNow1)
private void ShowCreditScoreAd()
{
    FreeCreditScore1.Visible = (new Random().Next(2) == 1);
    MyFreeScoreNow1.Visible = !FreeCreditScore1.Visible;
} 
```

如果我通过快速连续调用上面的代码来对上面的代码进行单元测试，它会失败，我开始明白原因是它`new Random()`在同一个“tick”中被调用。

也就是说，我确实相信我目前的实现已经足够了（请随时纠正我），但我很好奇如果我真的想严格要求它如何解决......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:20:26.120

只需用锁保护随机数生成器。除非您每秒向它发出数十万次调用，否则它将足够快。

```
public class MyRandomObject
{
    private readonly Random _rnd = new Random();

    public int Next()
    {
        lock (_rnd)
        {
            return _rnd.Next();
        }
    }
} 
```

在您说“锁太慢”之前，请注意我在旧的 2.4 GHz 四核上进行了测试。当锁没有被争用时，获得一个随机数大约需要 70 纳秒。锁争用会降低性能，但您需要大量请求。

在 Web 应用程序中，您希望初始化其中的一个`Application_Start`，并使该单例可用于您的应用程序的其余部分。

有更快的方法，但它们更难以实施。一种方法是预先生成数百万个随机数（调用`Random.NextBytes`）并将它们存储在缓冲区中。用读/写锁保护它。当剩余值的数量达到某个阈值时，线程会获取写入器锁，阻止所有其他访问，直到它重新填充缓冲区。如果您使用其他一些随机数来源，这可能是您想要采用的方式。例如`RNGCryptoServiceProvider.GetBytes`方法（[http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider.getbytes.aspx](http://msdn.microsoft.com/en-us/library/system.security.cryptography.rngcryptoserviceprovider.getbytes.aspx)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-25T14:21:27.660

创建一个静态`Random`实例。通过生成 4 个加密安全的随机字节来播种它。您甚至可以使该`Random`实例`[ThreadLocal]`删除所有锁定。

我不知道为什么 BCL 不包含这样的东西并自动使用它来播种新实例。它很容易做到，提供完美的播种并完美地扩展到任意数量的线程。

# php - PHP/SQL QUERY - 语法错误，意外 '{' 但是删除后查询不起作用

> ID：14971850
> 
> 赞同：0
> 
> 时间：2013-02-20T03:36:00.853
> 
> 标签：php, sql

```
<?

$string = '<?php 

$con = mysql_connect("localhost","#","#");
if (!$con)
  {
  die("Could not connect: " . mysql_error());
  }

$location = $_SERVER["REMOTE_ADDR"];
$live = "Scotland";

mysql_select_db("#", $con);
// Line 77 below
mysql_query("UPDATE order SET location='{$location}' WHERE live='{$live}'"); 

?>';

$my_file = 'data.php';
$handle = fopen($my_file, 'w') or die('Cannot open file:  '.$my_file);
fwrite($handle, $string);

?> 
```

当我尝试上面的代码时，尝试写入 data.php 文件时出现此错误：

> 解析错误：语法错误，第 77 行 /home/#/public_html/write.php 中的意外“{”

我尝试从 {location} 和 {live} 周围删除撇号 (')，但查询不起作用。

谁能帮我解决这个问题，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T04:01:11.230

我假设您正在尝试制作某种自动代码制作脚本。

看起来你已经遇到了引号的问题。

您似乎遇到的问题是在生成字符串时正在解释变量，而不是在另一端。类似以下的内容至少可以解决您遇到的问题之一：

```
<?php
$string = <<<EOT
<?php 
$con = mysql_connect("localhost","#","#");
if (!$con)
  {
  die("Could not connect: " . mysql_error());
  }

$location = \$_SERVER["REMOTE_ADDR"];
$live = "Scotland";

mysql_select_db("#", $con);
// Line 77 below
mysql_query("UPDATE order SET location='{$location}' WHERE live='{$live}'"); 

?>
EOT;

$my_file = 'data.php';
$handle = fopen($my_file, 'w') or die('Cannot open file:  '.$my_file);
fwrite($handle, $string);
?> 
```

此外，这仍然不会在另一端编译，您需要在您使用的所有变量上转义“$”（如 \$con 和 \$live）

（代码未经测试）

但是，要解决您的实际问题，请尝试以下操作：

```
mysql_query("UPDATE order SET location=\'{$location}\' WHERE live=\'{$live}\'"); 
```

（转义引号）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:39:24.423

你可以试试这个：

```
mysql_query("UPDATE order SET location=".$location." WHERE live=".$live); 
```

# macos - 如何使用具有权限的 Cyber duck 连接到我的 ec2 实例？

> ID：14971851
> 
> 赞同：4
> 
> 时间：2013-02-20T03:36:01.823
> 
> 标签：macos, permissions, amazon-ec2, sftp, cyberduck

我尝试使用 ec2-user 登录，但由于某种原因登录失败：

![](../Images/1c67b514f342353bb8dd7f435122bd17.png)

使用用户名：ubuntu 我可以很好地登录，但是，我没有任何权限，我不能 sudo su 获得写入文件的权限。我尝试使用 cyberduck 终端并发送命令选项，但 sudo su 不适用于它们。Cyber​​duck 只是旋转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T16:51:23.210

我认为该`ec2-user`帐户不适用于最近的 Ubuntu AMI，这可能解释了登录失败。

你可以通过几种方式来解决这个问题。第一种是专门为 FTP 创建一个新用户帐户，并仅授予它对必要文件夹的权限。首先[创建用户](https://serverfault.com/a/283717/47022)，然后为非交互式登录[创建一个公钥/私钥对。](http://globalconstant.scnay.com/2009/11/10/passwordless-login-ssh/)这将允许您像平常一样操作您的 FTP 客户端。

我**首选的解决方案**是将文件上传到`ubuntu`主目录，然后以 root 身份运行脚本，将文件移动到正确的位置。您不必以这种方式修改系统配置，但您必须分两步进行文件传输。

在其中创建一个暂存文件夹`/home/ubuntu`并将文件复制到那里。在服务器上创建一个`/home/ubuntu/copy.sh`脚本，如下所示：

```
#!/bin/bash
sudo su     #this will only work if sudo doesn't prompt for a password
cp -r /home/ubuntu/stage/* /var/www/html/ 
```

然后从您的开发机器调用脚本：

```
$ ssh -i ~/path/to/key.pem ubuntu@ec2.hostname.com /home/ubuntu/copy.sh 
```

如果你想变得非常花哨，你可以设置一个 git 存储库并在你推送时使用[post-receive 钩子](http://globalconstant.scnay.com/2013/02/20/using-a-git-post-receive-hook-for-easy-production-deploys/)为你处理这一切。根本不需要 FTP 客户端。

# java - HTMLUnit 没有点击按钮

> ID：14971853
> 
> 赞同：0
> 
> 时间：2013-02-20T03:36:03.087
> 
> 标签：java, htmlunit

我有一个简单的 HTML 单元代码，用于按下按钮并在页面上提交表单，但它不想工作。这是我的代码：

```
 public static boolean sub(String ref, String zip) throws Exception {
WebClient webClient = new WebClient(BrowserVersion.FIREFOX_3_6);
webClient.getOptions().setRedirectEnabled(true);
webClient.getOptions().setJavaScriptEnabled(true);
webClient.getCookieManager().setCookiesEnabled(true);

    final HtmlPage page1 = webClient.getPage("http://site.com/");
    webClient.waitForBackgroundJavaScript(20000);

    final HtmlButton button = page1.getFirstByXPath("//*[@id=\"lookup\"]");
    final HtmlTextInput orderField = page1.getFirstByXPath("//*[@id=\"order-number\"]");
    final HtmlTextInput zipField = page1.getFirstByXPath("//*[@id=\"order-user-info\"]");

    orderField.setValueAttribute(ref);
    zipField.setValueAttribute(zip);
    final HtmlPage page2 = button.click();
        webClient.waitForBackgroundJavaScript(20000);

    System.out.println(page2.asText());
    webClient.closeAllWindows();
    return true;
} 
```

所有这一切都是打印出第一页的文本，但填充了文本框。如您所见，我尝试等待 javascript，它仍然无法正常工作。任何帮助表示赞赏。

更新：我发现了一些新信息。似乎当我输入正确的订单号时，它只显示当前页面并填写了文本框，而不是它应该重定向到的页面，但是当我输入错误信息时，它显示当前页面填写的文本框和“错误信息”错误消息。看来这只是没有重定向......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T18:22:30.887

你试过用

```
webClient.getOptions().setRedirectEnabled(true); 
```

# mysql - 未在多个列上强制执行唯一索引 - MySQL 与 Oracle 的不同行为

> ID：14971855
> 
> 赞同：2
> 
> 时间：2013-02-20T03:36:07.130
> 
> 标签：mysql

这个简单的脚本：

```
create table test (a integer not null, b integer, c integer not null);
create unique index test1 on test (a, b, c);
insert into test values(1, null, 1);
insert into test values(1, null, 1);
select * from test; 
```

使用 MySQL 成功运行，使用 Oracle 失败并出现 ORA-0001“违反唯一约束”。

我不确定标准对多个空列上的唯一索引有何规定，但 MySQL 的行为可能与 Oracle 类似。

另见[http://lists.mysql.com/mysql/183630](http://lists.mysql.com/mysql/183630)

亚历山大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T06:37:33.530

MySQL 在设计上允许在具有`UNIQUE`索引的列中有多个 NULL 值。

MySQL 上的`BDB storage engine`是一个例外，它不允许在一列中有多个`NULL`值，并且在其上具有 UNIQUE 索引。

另一方面，Oracle 在`NULL`价值观方面表现不同。当您在 Oracle 中的单个列上创建`UNIQUE`索引时，它将允许您拥有多个`NULL`值，因为`NULL`基本上意味着*Unknown value*，因此两个 NULL 值不能相互比较。不仅如此，在 Oracle 的情况下，NULL 值不会存储在 Index 中。这意味着，当您`UNIQUE`在 Oracle 中的多列上创建索引时，其中两列是`NOT NULL`，一列是`NULLABLE`，即使一列包含 ，它也不允许您插入具有相同值的两条记录`NULL`。

考虑一下：

```
CREATE TABLE test (a NUMBER NOT NULL,
                   b NUMBER,
                   c NUMBER NOT NULL
                  );

INSERT INTO test VALUES (1, NULL, 1);
1 rows inserted.

INSERT INTO test VALUES (1, NULL, 1);

SQL Error: ORA-00001: unique constraint (RQ4151.UQ_TEST) violated
00001\. 00000 -  "unique constraint (%s.%s) violated"
*Cause:    An UPDATE or INSERT statement attempted to insert a duplicate key.
           For Trusted Oracle configured in DBMS MAC mode, you may see
           this message if a duplicate entry exists at a different level.
*Action:   Either remove the unique restriction or do not insert the key. 
```

发生这种情况是因为 Oracle 未在索引中存储 NULL 值，因此尝试比较 NOT NULL 列值的索引中的唯一性，但失败，导致错误被标记。

# iphone - 带有关闭块的 presentViewController

> ID：14971857
> 
> 赞同：3
> 
> 时间：2013-02-20T03:36:12.967
> 
> 标签：iphone, ios, uiviewcontroller

这就是我想要的。呈现一个 UIViewController (UITableViewController) 并在 presentViewController 方法中合并一个dismiss块。

所以是这样的：

```
[self presentViewController:vc 
    animated:YES 
    completion:nil 
    onDismiss:^{
        NSLog(@"dismissed")
    }
]; 
```

我尝试实现[这个 SO 解决方案](https://stackoverflow.com/questions/12658147/present-and-dismiss-uiviewcontroller-with-completion-blocks-without-protocols)，因为它看起来正是我需要的东西，但并没有完全弄清楚它应该如何完成。谁能给我详细的描述？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T04:01:50.173

为了澄清评论中的讨论：

在 ContainerViewController 的标头中定义此函数：

```
-(void)presentViewController:(UIViewController *)viewController animated:(BOOL)animated completion:(void (^)(void))completion dismissCompletion:(dispatch_block_t)dismissCompletion 
```

[并按照此处](https://stackoverflow.com/a/12662872/155513)的其余说明执行 ContainerViewController 的功能

然后在您的 ViewController 调用中

```
[containerViewController presentViewController:presentedViewController animated:YES completion:<whatever> dismissCompletion:<whatever>] 
```

如果您从 ContainerViewController 中调用它，`self`如果您在 SomeOtherViewController 中使用 ContainerViewController (CVC) 对象，则可以在 CVC 对象上调用它。

# inno-setup - 在inno setup中卸载一个应用程序时，我可以控制要卸载的内容吗？

> ID：14971858
> 
> 赞同：2
> 
> 时间：2013-02-20T03:36:18.993
> 
> 标签：inno-setup

关于 inno-setup 的一个快速问题：我可以自定义卸载程序要删除的文件吗？据我所知，卸载程序总是卸载安装程序创建的所有文件。如果答案是肯定的，我该怎么办？

我的情况是：安装应用程序后，目录“{pf}\myapp\”包含一些 dll、两个可执行文件，并为每个可执行文件创建了两个桌面图标和卸载程序。我期望用户可以卸载每个可执行文件，而不是所有文件；如果它是唯一剩下的可执行文件，卸载程序将删除所有文件。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T19:03:35.020

如果您想要单独的卸载程序，则必须编写单独的安装程序。*一般规则是您必须为每个应用程序*编写单独的安装程序。

也就是说，您可以拥有任意数量的*共享文件*，可以是在不同应用程序之间*共享的 dll、可执行文件等。*

Windows 具有定义明确的过程来跟踪共享文件，并带有引用计数。引用计数由安装程序递增，由卸载程序递减。仅当卸载期间引用计数达到 0 时，才会从系统中删除文件。

您使用该**`sharedfile`**标志来指示安装程序共享文件。MyLib.dll 文件在以下示例中共享：

```
[Files]
Source: "MyProg.exe"; DestDir: "{app}"
Source: "MyProg.chm"; DestDir: "{app}"
Source: "MyLib.dll"; DestDir: "{sys}"; Flags: sharedfile
Source: "Readme.txt"; DestDir: "{app}"; Flags: isreadme 
```

从文档（强调我的）：

> **共享文件**
> 
> 指定文件在多个应用程序之间共享，**并且只有在没有其他应用程序使用它时才应在卸载时删除**。安装到 Windows 系统目录的大多数文件都应使用此标志，包括 .OCX、.BPL 和 .DPL 文件。
> 
> Windows 的标准共享文件引用计数机制（位于注册表中的 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\SharedDLLs 下）用于跟踪有多少应用程序依赖于该文件。每次安装文件时，文件的引用计数都会增加。（无论安装程序是否实际替换磁盘上的文件，都会发生这种情况。）当卸载使用该文件的应用程序时，引用计数会减少。如果计数达到零，则删除文件（在用户确认的情况下，除非**`uninsnosharedfileprompt`**还指定了标志）。

# ios - UITableViewDataSource 方法何时被调用？

> ID：14971861
> 
> 赞同：2
> 
> 时间：2013-02-20T03:36:57.233
> 
> 标签：ios, uitableview

我知道`reloadData`在表视图上执行时会请求 UITableView 的数据源方法。

我很好奇在其他情况下何时要求他们。

是在表视图的初始化上吗？
是表视图添加到视图层次结构时吗？
如果我在添加到视图层次结构之前直接从 nib 加载表视图会怎样？awakeFromNib 之后是否请求数据源方法？

# mod-rewrite - rewritecond 检查它是脚本还是客户端

> ID：14971865
> 
> 赞同：0
> 
> 时间：2013-02-20T03:37:20.277
> 
> 标签：mod-rewrite, client

我的网站通过包含“页面”目录 (PHP) 中的页面来工作，我想禁止访问该目录中的文件。但是，当我将 .htaccess 文件放在那里说：`deny from all`时，它禁止访问所有文件，而不仅仅是包含文件或使用样式表的请求。

当他们尝试像这样查看这些文件时，我还尝试将用户带到另一个页面：

```
RewriteCond %{THE_REQUEST} \.php[\ /?].*HTTP/
RewriteRule ^.*$ index.php?path=1 [QSA]

RewriteCond %{THE_REQUEST} \.css[\ /?].*HTTP/
RewriteRule ^.*$ index.php?path=1 [QSA]

RewriteCond %{THE_REQUEST} \.js[\ /?].*HTTP/
RewriteRule ^.*$ index.php?path=1 [QSA] 
```

这行得通，它只是不允许加载样式表/js。它确实让 PHP 文件被包含但不被查看，这很好，所以我可以保留这三个文件中的第三个。但是我的 css 文件包含有关我的文件结构的信息，我不想向黑客泄露这些信息。所以，我不希望这些公开。

无论如何......我的问题是：**如果最后两个使它们仅在请求来自客户端时适用，我可以放在前面吗**
**？** IE`RewriteCond`

 **```
RewriteCond %{THE_REQUEST} IS_COMING_FROM_A_CLIENT_OR_BROWSER
RewriteCond %{THE_REQUEST} \.css[\ /?].*HTTP/
RewriteRule ^.*$ index.php?path=1 [QSA]

RewriteCond %{THE_REQUEST} IS_COMING_FROM_A_CLIENT_OR_BROWSER
RewriteCond %{THE_REQUEST} \.js[\ /?].*HTTP/
RewriteRule ^.*$ index.php?path=1 [QSA] 
```

PS如果可能的话，我宁愿不这样做，`deny from all`因为我在共享主机上，他们可能不喜欢那样做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:47:16.383

检查 HTTP_REFERER 是否适用于 .js 和 .css 文件包含的 .php 页面以外的内容？**

# javascript - getElementByTagName() 不起作用

> ID：14971866
> 
> 赞同：-1
> 
> 时间：2013-02-20T03:37:21.773
> 
> 标签：javascript, html, getelementbyid

```
<!DOCTYPE html>
<html>
<head> <script language="javascript" type="text/javascript">  <pre> function whatImg(){
            var str = getUrlVars()["obj"];
            document.getElementByTagName('img').src = 'images/dog.png';
            }                                   
        function getUrlVars() {
            var vars = {};
            var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) {vars[key] = value;});
            return vars;
        }<code>                             
    </script>

</head>

<body>

    <div data-role="page">
        <img src="images/keys.png" id="image"/>
        <script type="text/javascript"  language="javascript">  whatImg();</script>     
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:38:33.667

它`getElementsByTagName`不是`getElementByTagName`

并`document.getElementByTagName('img')[0].src`改用

你最好在html代码下面写js代码：

```
<!DOCTYPE html>
<html>
    <head></head>
    <body>
        <div data-role="page">
            <img src="images/keys.png" id="image" />
        </div>
        <script>
            function whatImg() {
                var str = getUrlVars()["obj"];
                document.getElementsByTagName('img')[0].src = 'images/dog.png';
            }

            function getUrlVars() {
                var vars = {};
                var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m, key, value) {
                    vars[key] = value;
                });
                return vars;
            }
            whatImg();
        </script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T03:39:19.017

因为没有`getElementByTagName`. 你忘了一个`s`: [`.getElementsByTagName`](https://developer.mozilla.org/en-US/docs/DOM/element.getElementsByTagName)。

它还返回 a [`NodeList`](https://developer.mozilla.org/en-US/docs/DOM/NodeList)，这意味着您必须这样做：

```
var ele = document.getElementsByTagName('img');
ele[0].src = 'images/dog.png'; 
```

有时使用以下方法获取元素可能会更好`id`：

```
var ele = document.getElementById('image');
ele.src = 'images/dog.png'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T03:39:10.753

这将返回一个`HTMLCollection`，因此您必须遍历它并为每个`src`属性分配该值。

# php - SQL：如何选择日期字段是特定月份的位置？

> ID：14971875
> 
> 赞同：0
> 
> 时间：2013-02-20T03:39:02.350
> 
> 标签：php, mysql, sql, date

我正在尝试选择在特定月份输入的所有发票。

数据库中的“entry_datetime”字段的格式为“2013-02-19 14:47:42”。

我正在使用 MySQL。

这是我到目前为止所拥有的：

```
SELECT
    id
FROM
    invoices
WHERE
    entry_datetime > 2012/12/31 AND entry_datetime < 2013/02/01 
```

不幸的是，它没有返回任何结果，但我可以通过 phpMyAdmin 看到合格的发票。

请问你能告诉我where子句有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-20T05:07:49.717

另一种方法：

```
SELECT
    id
FROM
   invoices
WHERE
    entry_datetime between '2012/12/31' AND '2013/02/01'; 
```

如果您想获得特定月份的结果，请使用以下函数：month() as：

```
SELECT
    id
FROM
   invoices
WHERE
   MONTH(entry_datetime)=12; 
```

其中 12 是月份数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T03:40:55.970

试试这个 ：

```
SELECT
    id
FROM
    invoices
WHERE
    entry_datetime > '2012/12/31' AND entry_datetime < '2013/02/01' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T03:46:13.183

由于 where 子句中的日期没有用引号括起来，MySQL 假定它是一个数学公式/方程式。因此，它将 2012/12/31 评估为类似于 5.4086。

# android - 应用程序与 Nexus 7 不兼容

> ID：14971876
> 
> 赞同：0
> 
> 时间：2013-02-20T03:39:05.943
> 
> 标签：android, android-emulator, android-compatibility, nexus-7

我在清单文件中有以下配置：

```
<supports-screens
    android:anyDensity="true"
    android:largeScreens="true"
    android:normalScreens="true"
    android:smallScreens="true"
    android:xlargeScreens="true" />

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.CALL_PHONE" />
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
<uses-permission android:name="android.permission.SEND_SMS" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

我试图在 Nexus 7 模拟器中运行我的应用程序，但它没有在其中运行。但它会打开另一个模拟器。如何在 Nexus 7 中运行我的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T03:50:27.380

某些权限意味着在[此处](https://developer.android.com/guide/topics/manifest/uses-feature-element.html#permissions-features)`<uses-feature>`查看元素以查看您需要添加的可选功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-24T04:53:12.043

我认为问题可能在于应用程序请求对 Nexus 7 Tab 上不存在的事物的许可。
您的清单中的此权限隐式声明了“android.hardware.telephony”功能。
参考文档：http: [//developer.android.com/guide/topics/manifest/uses-feature-element.html#market-feature-filtering](http://developer.android.com/guide/topics/manifest/uses-feature-element.html#market-feature-filtering)

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

试试这个，保留权限，但将“电话”功能声明为假。

```
<uses-feature android:name="android.hardware.telephony" android:required="false"></uses-feature> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T03:44:41.463

即使您的所有 AVD 都可能兼容，它也会选择与应用程序最兼容的 AVD。但是您可以选择要使用的 AVD 并强制您的应用程序在特定的 AVD 上运行。

如果您使用的是 Eclipse，那么：

1.  右键单击-> 运行方式-> 运行配置
2.  在“目标”选项卡中，您可以选择在所有活动的 AVD 或特定的 AVD 上运行。

# javascript - 使用嵌套资源

> ID：14971877
> 
> 赞同：1
> 
> 时间：2013-02-20T03:39:07.060
> 
> 标签：javascript, ember.js

我想拥有嵌套资源，例如。类别，帖子，帖子。

网址看起来像 mysite.com/#/1/posts 或 mysite.com/#/1/posts/123

1 是类别 ID，尽管我有兴趣将其更改为友好的 slug。

我的初始代码是这样的：

```
App.Router.map(function(){
    this.resource('category', {path:'/:category_id'}, function(){
        this.resource('posts',{path:'/posts'}, function(){
            this.resource('post', {path:'/:post_id'});
        });
    });
});

App.PostsRoute = Ember.Route.extend({
   model: function(params){
       return Post.find({category:params.category_id});
   }
}) 
```

现在我想知道这些 :model_id 标记在路由器中是否是可选的，因此 /posts 实际上会给出 category_id == 'posts'。我还想知道如果我只是将类别用作更简单的 url 查询以及它如何适合 ember 它将如何工作。

# keyword - 元标记关键字

> ID：14971879
> 
> 赞同：0
> 
> 时间：2013-02-20T03:39:12.067
> 
> 标签：keyword, meta-tags, meta

如果我有关键字“法式吐司”，法式吐司会自动成为应用于我网站的关键字吗？还是需要特别说明。“法式吐司，法式吐司”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T08:23:08.403

[根据 HTML5 规范](http://www.w3.org/TR/html5/document-metadata.html#meta-keywords)，值“必须是一组逗号分隔的标记，每个标记都是与页面相关的关键字”。

在示例中，您可以看到标记可以包含空格（在“ `type face`”中）：

> ```
> <meta name="keywords" content="british,type face,font,fonts,highway,highways"> 
> ```

因此，对于此示例，算法会将以下项目添加到*关键字*列表中：

*   英国的
*   字体
*   字体
*   字体
*   高速公路
*   高速公路

严格来说，这些不是关键字：

*   字体高速公路
*   英式脸
*   脸
*   …</li>

所以是的，您必须明确说明关键字的组合（如果它们有意义的话）。“堆栈”和“溢出”不等同于“堆栈溢出”。

**但是**，根据消费用户代理的实现，这可能不是必需的，因为一些用户代理可能会将所有关键字都扔进一个篮子。

# xcode - (iOS) kbViewRecoverNormalState 是什么意思？

> ID：14971884
> 
> 赞同：1
> 
> 时间：2013-02-20T03:39:36.077
> 
> 标签：xcode, ios6, callstack, ipa, symbolicatecrash

我们在具有这种日志的应用程序中发生了这种崩溃。

```
"date= 2013-02-03 07:12:17 +0000;
buildVersion = 1.0.0;
model = iPhone;
systemName = iPhone OS;
systemVersion = 5.1.1;
timeSpent = 1008.14;
uid = 63743f3790afda4d3bffc7beb8877fa9cfbfedfe;
reason = -[__NSCFType kbViewRecoverNormalState]: unrecognized selector sent to instance 0xdd1dfe0;
stackTrace = 
(
    0 CoreFoundation 0x371288a7 __exceptionPreprocess + 186
    1 libobjc.A.dylib 0x34e2d259 objc_exception_throw + 32
    2 CoreFoundation 0x3712ba9b -[NSObject doesNotRecognizeSelector:] + 174
    3 CoreFoundation 0x3712a915 ___forwarding___ + 300
    4 CoreFoundation 0x37085650 _CF_forwarding_prep_0 + 48
    5 SogouInputIPhone4.dylib 0x01a1982b -[AppStateMonitor exitSogouInputMethod] + 190
    6 SogouInputIPhone4.dylib 0x01a196e5 -[AppStateMonitor didEnterBackground] + 20
    7 Foundation 0x3798d4ff __57 -[NSNotificationCenteraddObserver:selector:name:object:] _block_invoke_0 + 18
    8 CoreFoundation 0x370f4547 ___CFXNotificationPost_block_invoke_0 + 70
    9 CoreFoundation 0x37080097 _CFXNotificationPost + 1406
    10 Foundation 0x379013eb -[NSNotificationCenterpostNotificationName:object:userInfo:] + 66
    11 UIKit 0x30e6c255 -[UIApplication _handleApplicationSuspend:eventInfo:] +792
    12 UIKit 0x30dfceff -[UIApplication handleEvent:withNewEvent:] + 2094
    13 UIKit 0x30dfc567 -[UIApplication sendEvent:] + 54
    14 UIKit 0x30dfbf3b _UIApplicationHandleEvent + 5826
    15 GraphicsServices 0x3383e22b PurpleEventCallback + 882
    16 CoreFoundation 0x370fc523 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__+ 38
    17 CoreFoundation 0x370fc4c5 __CFRunLoopDoSource1 + 140
    18 CoreFoundation 0x370fb313 __CFRunLoopRun + 1370
    19 CoreFoundation 0x3707e4a5 CFRunLoopRunSpecific + 300
    20 CoreFoundation 0x3707e36d CFRunLoopRunInMode + 104
    21 GraphicsServices 0x3383d439 GSEventRunModal + 136
    22 UIKit 0x30e2acd5 UIApplicationMain + 1080
    23 MyApp 0x0014506f _mh_execute_header + 295023
    24 MyApp 0x000ff058 _mh_execute_header + 8280
);" 
```

那是我们迁移到 Xcode 4.5 时没有符号化的自定义崩溃日志。

我的问题是，什么是`kbViewRecoverNormalState`手段？什么类调用这个选择器？由于我们无法清楚地读取堆栈跟踪，因此我们对此一无所知。

对于这个无信息的调用堆栈有什么可能的解决方案吗？如果它连接到 Xcode（调试/发布），它正在设备上工作。但是当在 iTunes 上发布和/或创建`IPA`文件时，它不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T01:55:55.720

似乎您正在越狱设备中测试您的应用程序。

`SogouInputIPhone4.dylib 0x01a1982b -[AppStateMonitor exitSogouInputMethod]`

导致崩溃的SogouInputIPhone4

# c++ - 矢量.push_back

> ID：14971890
> 
> 赞同：3
> 
> 时间：2013-02-20T03:40:00.247
> 
> 标签：c++, vector, push-back

我正在编写一个从给定格式的数据文件中读取的应用程序。在文件中，我动态地创建了一个指向向量对象的二维指针数组。基本上，它通读文件，当它找到给定的字符串模式时，它会停止并读取

```
while(getline(inputFile,tempTestString)){
        // first for ACCEL
        if(string::npos != tempTestString.find(ACCEL)){
            sstream.str(tempTestString);
            sstream >> pushBack;
            cout << "position 1" << endl;
            array[tempDim1][tempDim2].vectorName->push_back(pushBack);
            cout << "position 2" << endl;
            break;
        }
} 
```

现在，pushBack 是一个很大的数字，可能高达 20000，但它因文件而异。

这段代码的问题是我没有收到任何运行时错误，甚至没有抛出任何异常，我试图捕捉它们。程序简单结束！可以肯定的是，我添加了`cout << "position1" << endl;`and`cout << "position2" << endl;`行和后面的打印。

如果你没有猜到：

`tempTestString`和`ACCEL`- 字符串对象

`sstream`- 字符串流对象

`array`- 动态内存中的二维结构数组

`vectorName`- 指向向量对象的指针，指向的结构成员`array`

**附录：**

因此，作为对一些评论的回应，这里是代码的另一部分，其中创建了所有变量：

大批

```
array = new structName* [tempDim1];
for(int i = 0; i < tempDim2; i++){
    array[i] = new structName [tempDim2];
} 
```

结构名称

```
struct structName{
    vector<double>* vectorName;
    vector<double>* vectorName1;
    vector<double>* vectorName2;
 }; 
```

tempDim1 和 tempDim2 分别`const ints`为 2 和 3。pushBack 的值最大为 20000

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T04:00:40.270

尝试纠正这一点：

```
array = new structName* [tempDim1];
for(int i = 0; i < tempDim2; i++){
    array[i] = new structName [tempDim2];
} 
```

=>

```
array = new structName* [tempDim1];
for(int i = 0; i < tempDim1; i++){
    array[i] = new structName [tempDim2];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:06:36.680

您在初始化中使用了错误数量的元素。

```
array = new structName* [tempDim1];
for(int i = 0; i < tempDim2; i++){
    array[i] = new structName [tempDim2];
} 
```

`i < tempDim2`是错的; 该数组具有 tempDim1 元素。

我不知道这是否*是*问题，但这是*一个*问题。如果 tempDim1 > tempDim2 则 array[] 的某些元素将未初始化。（如果反过来，你正在破坏内存。）唯一可行的方法是如果 tempDim1 和 tempDim2 巧合相同。

# asp.net-mvc-3 - 使用 PrecompiledMvc Engine FindView 抛出 InvalidOperationException 并查找 View cshtml 文件

> ID：14971895
> 
> 赞同：0
> 
> 时间：2013-02-20T03:40:25.657
> 
> 标签：asp.net-mvc-3, precompile, razorgenerator

当MVC`InvalidOperationException`控制器尝试`FindView`使用`PrecompiledMvcEngine`.

在具有 VS2012、MVC4 并部署到 IIS 的机器上使用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:43:42.003

在查看`ControllerBase.FindView`to `ViewEngineCollection.FindView`to [VirtualPathProviderViewEngine](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/b2ed65aea577#src/System.Web.Mvc/VirtualPathProviderViewEngine.cs) to [PrecompiledMvc](http://razorgenerator.codeplex.com/SourceControl/changeset/view/15452bd849f1#RazorGenerator.Mvc/PrecompiledMvcEngine.cs) ​​Engine 的源代码后，发现`_mappings`PrecompiledMvc​​Engine 中的计数为 0。（Tx to Reflection and Open source。）

原因是我项目的 DLL 中没有可分配给 WebPageRenderingBase 的类型。在反编译我的 dll 时，它实际上具有已编译的视图，以及从 WebPageRenderingBase 扩展的视图。

在编写了一个单元测试来做与 PrecompiledMvc​​Engine 加载视图相同的事情后，发现它们使用的是不同版本的 WebPageRenderingBase 类。RazorGenerator.Mvc 使用 System.Web.WebPages v1.0.0.0 在构建时进行预编译。PrecompiledMvc​​Engine 在从已编译的程序集中加载类型时使用 System.Web.WebPages v2.0.0.0。通过更改我的 MVC csproject 以在运行时加载 v1.0.0.0 来解决此问题。

改变了

```
 <Reference Include="System.Web.WebPages" /> 
```

拿起 2.0.0.0 到

```
 <Reference Include="System.Web.WebPages, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL" /> 
```

强制它总是选择 1.0.0.0。如果您将预编译视图部署到安装了 VS2012 和 MVC4 的机器上，而没有在 csproj 文件中指定正确的版本，则经常会遇到此问题

# github-api - Github API 返回空存储库语言

> ID：14971896
> 
> 赞同：1
> 
> 时间：2013-02-20T03:40:39.120
> 
> 标签：github-api

出于某种原因，github API作为**我**`null`所有存储库的语言返回，而我分叉的存储库很好。它在 github 网站上检测语言就好了。

 **任何人都知道为什么会这样？

这是我的请求位置：[https ://api.github.com/users/igorpan/repos](https://api.github.com/users/igorpan/repos)

如您所见，无论在哪里`'fork': true`，都提供语言。但只要 fork 是假的，它就是`null`。

这是我的个人资料：[https](https://github.com/igorpan?tab=repositories) ://github.com/igorpan?tab=repositories 。语言在存储库列表中被很好地识别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T12:01:04.093

我已经向他们的支持部门发送了一封电子邮件，他们回复了。这是他们最终的缓存问题，他们手动使我的存储库的缓存无效，所以现在一切都很好。**

# vb.net - 如何使此删除按钮起作用？

> ID：14971899
> 
> 赞同：0
> 
> 时间：2013-02-20T03:41:07.113
> 
> 标签：vb.net, winforms, button

如何使此删除按钮起作用？公共类 Form1 Dim inc As Integer Dim MaxRows As Integer Dim dbProvider As String Dim dbSource As String Dim con As New OleDb.OleDbConnection Dim ds As New DataSet Dim da As OleDb.OleDbDataAdapter Dim sql As String

```
Private Sub GroupBox1_Enter(sender As System.Object, e As System.EventArgs) Handles GroupBox1.Enter

    dbProvider = "PROVIDER=Microsoft.Jet.OLEDB.4.0;"
    dbSource = "Data Source = C:Desktop\AddressBook\AddressBook.mdb"

    con.ConnectionString = dbProvider & dbSource

    con.Open() 

    sql = "SELECT * From Master_Details"
    da = New OleDb.OleDbDataAdapter(sql, con)
    da.Fill(ds, "Master_Details")

    MaxRows = ds.Tables("Master_Details").Rows.Count
    inc = -1

    MsgBox("Database is now open")
    con.Close()
    MsgBox("Database is now closed")

    txtcode.Text = ds.Tables("Master_Details").Rows(0).Item(0)
    txtdprt.Text = ds.Tables("Master_Details").Rows(0).Item(1)
    txtgroup.Text = ds.Tables("Master_Details").Rows(0).Item(2)
    txtepf.Text = ds.Tables("Master_Details").Rows(0).Item(3)
    txtdesignation.Text = ds.Tables("Master_Details").Rows(0).Item(4)
    txtename.Text = ds.Tables("Master_Details").Rows(0).Item(5)
    txtjdate.Text = ds.Tables("Master_Details").Rows(0).Item(6)
    txtdob.Text = ds.Tables("Master_Details").Rows(0).Item(7)
    txtnicn.Text = ds.Tables("Master_Details").Rows(0).Item(8)
    txtgender.Text = ds.Tables("Master_Details").Rows(0).Item(9)
    txttcodes.Text = ds.Tables("Master_Details").Rows(0).Item(10)
    Return
End Sub

Private Sub btndelete_Click(sender As System.Object, e As System.EventArgs) Handles btndelete.Click
    If MessageBox.Show("Do you really want to Delete this Record?", "Delete", MessageBoxButtons.YesNo, MessageBoxIcon.Warning) = DialogResult.No 
        MsgBox("Operation Cancelled")
        Exit Sub
    End If

    Dim cb As New OleDb.OleDbCommandBuilder(da)

    ds.Tables("Master_Details").Rows(ds.Tables("Master_Details").Rows.Count).Delete()
    MaxRows = MaxRows - 1
    inc = 0
    da.Update(ds, "Master_Details")
    NavigateRecords()
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:56:38.190

您没有正确指定要删除的行 - 它始终是 row `ds.Tables("Master_Details").Rows.Count`，它是最后一行之后的一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:53:41.017

用例语句...将所有这些放在您的删除按钮单击事件中...

```
 Select Case MsgBox("Do you really want to delete this record?", MsgBoxStyle.Exclamation + MsgBoxStyle.YesNo, "CONFIRM DELETE")
        Case MsgBoxResult.Yes
            'NOT SURE IF THIS IS RIGHT, BUT THE SELECT IS IN WHICH YOU WANT...'
            Dim cb As New OleDb.OleDbCommandBuilder(da)
            ds.Tables("Master_Details").Rows(ds.Tables("Master_Details").Rows.Count - 1).Delete()
            MaxRows = MaxRows - 1
            inc = 0
            da.Update(ds, "Master_Details")
            NavigateRecords()
        Case MsgBoxResult.No
             MsgBox ("Operation Cancelled")
           Exit Sub
    End Select 
```

如果消息框结果为“是”，请在第一行设置一个断点并单步执行您的代码，这将显示正在发生的事情......

谢谢！

# php - 使用 5 个表的限制提取单个数据涉及

> ID：14971900
> 
> 赞同：0
> 
> 时间：2013-02-20T03:41:20.480
> 
> 标签：php, sql, sql-server, select, limit

所以我有 5 个表，其中它与外键互连

![5桌](../Images/1f2e0cb97f312e971cd1329ed6ba84a5.png)

这是表 3 的示例输出

![表3输出](../Images/4306f2571e127407b6462f2fefbac3c3.png)

我想在表 3 中做的是提取用户 ID 为 10 的用户的 SubdeptID，但在这种情况下它有 2 个用户 ID10，所以它打印两者。我要打印的只是带有后一个 TransferID 的那个。我的选择语句是这样的

```
$sql_exp = "SELECT  a.UserID, b.Employeename, c.TransferID, e.Department
FROM    dbo.FA_Laptop a
        INNER JOIN dbo.users b
        on a.UserID = b.UserID
        INNER JOIN dbo.SubDeptTransfer c
            ON a.UserID = c.UserID  
        INNER JOIN dbo.SubDept d
            ON c.SudDeptID = d.SubDeptID
        INNER JOIN dbo.departments e
            ON d.DeptID = e.DeptID
WHERE  a.FAID = '$faidf' ORDER by c.TransferID DESC LIMIT 1"; 
```

我的 php 代码是

```
$rs = $conn->Execute($sql_exp);      
    if ($rs->EOF) {
    echo "<tr><td>Please check for the Employee Name or the Department</td>";
} else {
    while (!$rs->EOF){ 
    echo "<tr><td>".$rs->Fields("Department")." / ".$rs->Fields("EmployeeName")."</td>";
    $rs->movenext();
    }
       $rs->Close();  
} 
```

我在“限制”查询中有错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:48:42.177

MSSQL 没有 LIMIT 关键字。

使用[TOP](http://msdn.microsoft.com/en-us/library/ms189463.aspx)代替 LIMIT。

```
$sql_exp = "SELECT TOP 1 a.UserID, b.Employeename, c.TransferID, e.Department
FROM    dbo.FA_Laptop a
        INNER JOIN dbo.users b
        on a.UserID = b.UserID
        INNER JOIN dbo.SubDeptTransfer c
            ON a.UserID = c.UserID  
        INNER JOIN dbo.SubDept d
            ON c.SudDeptID = d.SubDeptID
        INNER JOIN dbo.departments e
            ON d.DeptID = e.DeptID
WHERE  a.FAID = '$faidf' ORDER by c.TransferID DESC"; 
```

# string - Scala将字符串拆分为元组

> ID：14971901
> 
> 赞同：15
> 
> 时间：2013-02-20T03:41:21.083
> 
> 标签：string, list, scala, split, tuples

我想在具有 4 个元素的空格上拆分一个字符串：

```
1 1 4.57 0.83 
```

我正在尝试转换为 List[(String,String,Point)] 以便前两个拆分是列表中的前两个元素，后两个是 Point。我正在执行以下操作，但似乎不起作用：

```
Source.fromFile(filename).getLines.map(string => { 
            val split = string.split(" ")
            (split(0), split(1), split(2))
        }).map{t => List(t._1, t._2, t._3)}.toIterator 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-20T04:52:09.077

这个怎么样：

```
scala> case class Point(x: Double, y: Double)
defined class Point

scala> s43.split("\\s+") match { case Array(i, j, x, y) => (i.toInt, j.toInt, Point(x.toDouble, y.toDouble)) }
res00: (Int, Int, Point) = (1,1,Point(4.57,0.83)) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-20T04:39:03.810

您可以使用模式匹配从数组中提取您需要的内容：

```
 case class Point(pts: Seq[Double])
    val lines = List("1 1 4.34 2.34")

    val coords = lines.collect(_.split("\\s+") match {
      case Array(s1, s2, points @ _*) => (s1, s2, Point(points.map(_.toDouble)))
    }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-12T00:56:00.717

```
case class Point(pts: Seq[Double])
val lines = "1 1 4.34 2.34"

val splitLines = lines.split("\\s+") match {
  case Array(s1, s2, points @ _*) => (s1, s2, Point(points.map(_.toDouble)))
} 
```

出于好奇，模式匹配中的 @ 将变量绑定到模式，因此`points @ _*`将变量点绑定到模式 *_ 并且 *_ 匹配数组的其余部分，因此 points 最终成为 Seq[String]。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T03:51:07.553

您没有将第三个和第四个标记转换为 a `Point`，也没有将行转换为 a `List`。此外，您不是将每个元素呈现为`Tuple3`，而是呈现为`List`.

以下内容应该更符合您的要求。

```
case class Point(x: Double, y: Double) // Simple point class
Source.fromFile(filename).getLines.map(line => { 
    val tokens = line.split("""\s+""") // Use a regex to avoid empty tokens
    (tokens(0), tokens(1), Point(tokens(2).toDouble, tokens(3).toDouble))
}).toList // Convert from an Iterator to List 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-20T06:16:54.817

有多种方法可以将元组转换为列表或序列，一种方法是

```
scala> (1,2,3).productIterator.toList
res12: List[Any] = List(1, 2, 3) 
```

但正如您所看到的，返回类型是**Any**而不是**INTEGER**

为了转换成不同的类型，你使用 [https://github.com/milessabin/shapeless的 Hlist](https://github.com/milessabin/shapeless)

# sql - 使用 SQL Query 连接两个表时计算右表的行数

> ID：14971907
> 
> 赞同：0
> 
> 时间：2013-02-20T03:41:46.590
> 
> 标签：sql

我有一个关于 SQL 查询的问题。让我举个例子来说明我的问题：我有两个这样的表：

**角色表**

```
ID 角色 角色描述
1 管理员 管理员委员会中的某人
2 用户 拥有账户的人
3 猜猜只是浏览网站的人

```

**用户表**

```
ID 用户名 RoleID
1 特林德08 1
2 特林德09 1
3 特林德 10 1
4 泡菜 2
5 林芝 2
6比01 2
7比02 3
8 基曼 3
9 利曼 3

```

我的问题是我想查看所有角色并计算解决它们的用户。

**运行查询后的结果表**可能如下所示：

```
ID 角色 角色 描述 用户数量
1 管理员 管理员委员会中的某个人 3
2 用户 拥有帐户的人 3
3 猜猜只是浏览网站的人 3

```

我第一次尝试创建这样的 SQL 查询：

```
select rol.*, usrCout as 'Count of User' from Roles rol
left join (select count(*) from Users where RoleID == rol.ID) usrCout; 
```

但是我的查询运行不成功，我无法得到我想要的结果。请帮助我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:10:01.327

```
SELECT 
ID
,ROLE
,Role Description
,(SELECT COUNT(*) FROM Users where RoleID = rol.ID) AS UserCount
FROM Roles rol 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T03:48:02.340

试试这个查询

`Select count(*) as 'Count of User', r.RoleID, Role, Role Description from role r, Users u where u.RoleId = r.Id group by r.RoleID,Role, Role Description;`

[小提琴](http://sqlfiddle.com/#!2/d3f49/1)

希望这可以帮助

# linux - 如何获得 pthread_setschedparam 的权限

> ID：14971910
> 
> 赞同：1
> 
> 时间：2013-02-20T03:42:00.847
> 
> 标签：linux, real-time, beagleboard

我需要在具有 Angstrom Linux 版本 3.2.18 的 BeagleBone 上以实时优先级运行 C++ 程序。该程序调用 pthread_setschedparam 以尝试提升其优先级。以 root 身份登录时，我收到“不允许操作”错误。但是，如果我首先在 shell 提示符下提升为超级用户“su”，那么对 pthread_setschedparam 的调用就会成功。

如何在不先运行“su”的情况下获得相同的结果？我需要将此程序作为在启动时自动启动的服务运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T03:50:47.317

在（我假设这就是您的意思）的[联机帮助页](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_setschedparam.3.html)中，它在注释下声明：`pthread_setschedparam`

> 有关更改线程调度策略和优先级所需的权限和效果的描述，以及每个调度策略中优先级允许范围的详细信息，请参阅 sched_setscheduler(2)。

在[该手册页](http://www.kernel.org/doc/man-pages/online/pages/man2/sched_setscheduler.2.html)中，详细说明`Privileges and resource limits`如下：

> 在 2.6.12 之前的 Linux 内核中，只有特权（CAP_SYS_NICE）进程才能设置非零静态优先级（即设置实时调度策略）。非特权进程唯一可以做的改变是设置 SCHED_OTHER 策略，并且只有当 sched_setscheduler() 调用者的有效用户 ID 与目标进程的真实或有效用户 ID 匹配时才能做到这一点（即进程由 pid 指定），其策略正在更改。
> 
> 从 Linux 2.6.12 开始，RLIMIT_RTPRIO 资源限制为 SCHED_RR 和 SCHED_FIFO 策略定义了非特权进程的静态优先级上限。更改调度策略和优先级的规则如下：
> 
> *   如果非特权进程具有非零 RLIMIT_RTPRIO 软限制，则它可以更改其调度策略和优先级，但受限于优先级不能设置为高于其当前优先级的最大值及其 RLIMIT_RTPRIO 软限制的值。
>     
>     
> *   如果 RLIMIT_RTPRIO 软限制为 0，则唯一允许的更改是降低优先级或切换到非实时策略。
>     
>     
> *   遵循相同的规则，另一个非特权进程也可以进行这些更改，只要进行更改的进程的有效用户 ID 与目标进程的真实或有效用户 ID 匹配。
>     
>     
> *   特殊规则适用于 SCHED_IDLE：在此策略下运行的非特权进程不能更改其策略，无论其 RLIMIT_RTPRIO 资源限制的值如何。
>     
>     
> 
> 特权 (CAP_SYS_NICE) 进程忽略 RLIMIT_RTPRIO 限制；与旧内核一样，它们可以对调度策略和优先级进行任意更改。有关 RLIMIT_RTPRIO 的更多信息，请参见 getrlimit(2)。

# php - 测试 Foreach 是否成功

> ID：14971912
> 
> 赞同：0
> 
> 时间：2013-02-20T03:42:09.607
> 
> 标签：php

我需要一种方法来检测“ **foreach** ”是否*不成功*。如果*不成功*，则重复当前“ **else ”中***的相同错误消息*。

 **```
<?php

    if(file_exists('redirects.xml')) {
        $xml = simplexml_load_file('redirects.xml');
        if(isset($_GET['r']) && $_GET['r'] != '' && !is_array($_GET['r'])) {
            foreach($xml->short as $shorts) {
                if($shorts->name == $_GET['r']) {
                    header('Location: '.$shorts->url);
                    break;
                }
            }
        }
        else {
            header("refresh:2;url=http://www.wlatw.co/");
            echo '<div align="center" style="font-weight: bolder; font-size: 24px;">Malformed URL</div><div align="center" style="font-weight: bolder; font-size: 16px;">Redirecting...</div>';
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T03:47:41.763

在开始循环之前创建一个标志；失败时设置为不成功。

```
<?php

    if(file_exists('redirects.xml')) {
        $xml = simplexml_load_file('redirects.xml');
        if(isset($_GET['r']) && $_GET['r'] != '' && !is_array($_GET['r'])) {
            $success = false; // set the flag
            foreach($xml->short as $shorts) {
                if($shorts->name == $_GET['r']) {
                    header('Location: '.$shorts->url);
                    $success = true;
                    break;
                }
            }

            if ($success) { // do what you want when not success ful.
                header("refresh:2;url=http://www.wlatw.co/");
                echo '<div align="center" style="font-weight: bolder; font-size: 24px;">Malformed URL</div><div align="center" style="font-weight: bolder; font-size: 16px;">Redirecting...</div>';
            }
        }
        else {
            header("refresh:2;url=http://www.wlatw.co/");
            echo '<div align="center" style="font-weight: bolder; font-size: 24px;">Malformed URL</div><div align="center" style="font-weight: bolder; font-size: 16px;">Redirecting...</div>';
        }
    }
?> 
```

但是查看您的代码，您可以在设置标题后退出：

```
foreach($xml->short as $shorts) {
    if($shorts->name == $_GET['r']) {
        header('Location: '.$shorts->url);
        exit;
        break;
    }
} 
```

**注意：**正如@Sverri M. Olsen 所说，您应该始终在设置 Location 标头后停止脚本，无论是使用 die、exit 还是您拥有的任何其他机制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T03:48:59.917

您需要添加一个变量来跟踪循环的状态。

```
<?php

if(file_exists('redirects.xml')) {
    $xml = simplexml_load_file('redirects.xml');
    if(isset($_GET['r']) && $_GET['r'] != '' && !is_array($_GET['r'])) {
        $url_is_malformed = false;
        foreach($xml->short as $shorts) {
            if($shorts->name == $_GET['r']) {
                header('Location: '.$shorts->url);
                break;
            }
        }
        $url_is_malformed = true;
    }
    else {
        $file_doesnt_exist = true;
    }

    if( $file_doesnt_exist || $url_is_malformed )
    {
        header("refresh:2;url=http://www.wlatw.co/");
        echo '<div align="center" style="font-weight: bolder; font-size: 24px;">Malformed URL</div><div align="center" style="font-weight: bolder; font-size: 16px;">Redirecting...</div>';
    }
} 
```

?>**

# c - 为什么我的程序没有使用 printf 输出任何内容？

> ID：14971913
> 
> 赞同：1
> 
> 时间：2013-02-20T03:42:13.100
> 
> 标签：c, network-programming

我是网络编程课的学生，我正在编写一个连接到三台服务器以进行文件传输的 UDP 客户端。到目前为止，我已经让客户端与前 2 台服务器进行通信，但是服务器的第 3 份副本无法正常工作。它甚至没有打印出我输入的 printf 调试语句。这是怎么回事？Unix有什么问题吗？前两台服务器与这台服务器完全相同，只是端口/IP地址发生了变化，它们工作得很好。

```
#include <stdlib.h>
#include <arpa/inet.h>
#include <netinet/in.h>
#include <stdio.h>
#include <errno.h>
#include <sys/socket.h>
#include <sys/types.h>
#include <strings.h>

int main(int argc, char**argv)
{
   printf("i will destroy you");
   int o = 1;
   int sockfd,n;
   struct sockaddr_in servaddr,cliaddr;
   socklen_t len;
   char mesg[1000];

   printf("im confused");
   sockfd=socket(AF_INET,SOCK_DGRAM,0);

   bzero(&servaddr,sizeof(servaddr));
   servaddr.sin_family = AF_INET;
   servaddr.sin_addr.s_addr=inet_addr("127.0.0.1");
   servaddr.sin_port=htons(3454);
   bind(sockfd,(struct sockaddr *)&servaddr,sizeof(servaddr));
   printf("yo wtf");

   if (setsockopt(sockfd, SOL_SOCKET, SO_REUSEADDR, &o, sizeof(o)) < 0){
      perror("setsockopt failed");
      exit(0);
   }
   printf("here1");
   while(1)
   {
      len = sizeof(cliaddr);
      printf("here");
      n = recvfrom(sockfd,mesg,1000,0,(struct sockaddr *)&cliaddr,&len);
      sendto(sockfd,mesg,n,0,(struct sockaddr *)&cliaddr,sizeof(cliaddr));
      printf("-------------------------------------------------------\n");
      mesg[n] = 0;
      printf("Received the following:\n");
      printf("%s",mesg);
      printf("-------------------------------------------------------\n");
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:45:32.620

您可能需要将例如更改`printf("i will destroy you")`为`printf("i will destroy you\n")`. 或见`setbuf()`。或使用`fflush(stdout)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T03:45:24.477

你没有脸红`stdout`。

或者，使用`stderr`如

```
fprintf(stderr,"My message\n"); 
```

# liferay - Liferay：ServiceBuilder finder 在 LocalServiceUtil 中可用，直到我重新启动机器

> ID：14971916
> 
> 赞同：0
> 
> 时间：2013-02-20T03:42:27.157
> 
> 标签：liferay

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:57:36.383

要使用“查找器”，我将使用`LocalService`.

为了扩展您的示例，

而不是`SampleUtil.findByCity(city)`，做`samplePersistence.findByCity(city)`。

`samplePersistence`将由`SampleLocalServiceImpl.java`.

# c++ - 是否有在 C++ 项目中复制 Resharper 的待办事项资源管理器的 Visual Studio 2010 扩展？

> ID：14971917
> 
> 赞同：1
> 
> 时间：2013-02-20T03:42:31.560
> 
> 标签：c++, visual-studio-2010, resharper

我喜欢在 C# 项目中使用 Resharper 的待办事项浏览器。我正在为 Visual Studio 2010 中的 C++ 项目寻找具有类似功能的东西。具体来说，我喜欢定义不同类型的待办事项标签以及能够在 Visual Studio 中过滤和排序待办事项的能力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T03:58:12.397

您可以在选项窗口中定义您的标记`Tools->Options->Environment-> Task List`。一些代币，例如*TODO，HACK*已经存在。

打开*任务列表*视图，您可以在其中浏览和管理您的任务。

您可能需要确保将`Tools->Options->Text Editor->C/C++->Formatting->Enumerate Comment Tasks`其设置为 TRUE。

[MSDN](http://msdn.microsoft.com/en-us/library/170k1bbs%28v=vs.100%29.aspx)中的任务列表

# javascript - Javascript 翻转图像链接

> ID：14971920
> 
> 赞同：1
> 
> 时间：2013-02-20T03:43:06.913
> 
> 标签：javascript, image, swap, rollover

我真的希望你们中的一位 JS 大师能够阐明这个问题。

目前我正在开发一个在第一列中有 5 个文本行的小表格的网页。以及第二列中的图像。

客户要求以下内容：

1.  打开页面，“默认图片”应该会显示
2.  滚动文本，“临时图像”应显示
3.  滚出文本，“默认图像”应该显示
4.  单击文本，该临时图像应成为“默认图像”

我能够实现目标#1、#2 和#3。然而，为了能够实现#4，客户端的旧代码只是制作了相同的页面，每个页面都有不同的“默认图像”。并分配每个链接指向该页面。

是否可以在不重复页面的情况下实现目标 4？也许，可能有一个javascript代码刷新页面，并根据点击的链接（文本）更改默认图像？

我还有什么意义吗？抱歉，我几乎没用过论坛。我不确定我是否在这里使用了正确的礼仪。

这是我正在使用的代码：

```
<script type="text/javascript">
function changeIt(imageName,objName)
{
var obj = document.getElementById(objName);
var imgTag = "<img src=' "+imageName+" ' border='0' height='207' width='400'/>";
obj.innerHTML = imgTag;
return;
}
</script>
<table cellpadding="6" cellspacing="6">
        <tbody>
            <tr>
                <td width="33%" valign="top" nowrap><span style="font-size: 12pt;"> <a id="one" href="#"
                OnMouseOver="changeIt('/images/stories/article/compressor_experience.jpg','image1');"
                onClick="changeIt('/images/stories/article/compressor_experience.jpg','image1');" 
                OnMouseOut="changeIt('/images/stories/article/composite_experience.jpg','image1');" 
                style="text-decoration: none;"><strong>Compressor Stations</strong></a></span></td>
                <td valign="top" nowrap><strong>4,000,000 hp</strong> </td><td rowspan="5" valign="top">&nbsp;</td>
                <td rowspan="5" valign="top">
                    <div id="image1"><img src="images/stories/article/composite_experience.jpg" alt="one" border="0" height="207" width="400" /></div></td>
            </tr>
            <tr>
                <td width="33%" valign="top" nowrap style="border-top:1px solid #bbb;"><span style="font-size: 12pt;"><a id="two" href="#" 
                OnMouseOver="changeIt('/images/stories/article/export_experience.jpg','image1');" 
                onClick="changeIt('/images/stories/article/export_experience.jpg','image1');" 
                OnMouseOut="changeIt('/images/stories/article/composite_experience.jpg','image1');" 
                style="text-decoration: none;"><strong>Export, Storage, and<br />Loading Systems</strong></a></span> </td>
                <td valign="top" nowrap style="border-top:1px solid #bbb;"><strong>1,000,000,000 bbls</strong> </td>
            </tr>
            <tr>
                <td width="33%" valign="top" nowrap style="border-top:1px solid #bbb;"><span style="font-size: 12pt;"><a id="three" href="#" 
                OnMouseOver="changeIt('/images/stories/article/pipeline_experience.jpg','image1');"  
                onClick="changeIt('/images/stories/article/pipeline_experience.jpg','image1');" 
                OnMouseOut="changeIt('/images/stories/article/composite_experience.jpg','image1');" 
                style="text-decoration: none;"><strong>Pipeline Systems</strong></a></span> </td>
                <td valign="top" nowrap style="border-top:1px solid #bbb;"><strong>100,000 miles</strong> </td>
            </tr>
            <tr>
                <td width="33%" valign="top" nowrap style="border-top:1px solid #bbb;"><span style="font-size: 12pt;"><a id="four" href="#" 
                OnMouseOver="changeIt('/images/stories/article/production_experience.jpg','image1');"
                OnMouseOut="changeIt('/images/stories/article/composite_experience.jpg','image1');"                 
                onClick="changeIt('/images/stories/article/production_experience.jpg','image1');" 
                style="text-decoration: none;"><strong>Production and<br />Processing Facilities</strong></a></span> </td>
                <td valign="top" nowrap style="border-top:1px solid #bbb;"><strong>2,000,000 bpd</strong> </td>
            </tr>
            <tr>
                <td width="33%" valign="top" nowrap style="border-top:1px solid #bbb;"><span style="font-size: 12pt;"><a id="five" href="#" 
                OnMouseOver="changeIt('/images/stories/article/pump_experience.jpg','image1');"  
                onClick="changeIt('/images/stories/article/pump_experience.jpg','image1');"
                OnMouseOut="changeIt('/images/stories/article/composite_experience.jpg','image1');" 
                style="text-decoration: none;"><strong>Pump Stations</strong></a></span> </td>
                <td valign="top" nowrap style="border-top:1px solid #bbb;"><strong>300,000 hp</strong> </td>
            </tr>
        </tbody>
    </table> 
```

谢谢大家。

# rpmbuild - rpmbuild %pre 不起作用

> ID：14971925
> 
> 赞同：0
> 
> 时间：2013-02-20T03:44:02.070
> 
> 标签：rpmbuild, pre, specifications

“%pre – 这是在安装脚本运行之前运行代码的位置。”

本节不适用于我。我从“<a href="http://repo.andrewfarley.com/centos/specs/zabbix.spec" rel="nofollow">http://repo.andrewfarley.com/centos/specs/ 得到一个规范文件zabbix.spec”。一切正常，但rpm包无法创建“zabbix”用户。

任何答复表示赞赏。谢谢。

操作系统：CentOS 5.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:04:49.603

那个`spec`文件坏了。他们将在 %postun 升级期间删除用户。%postun 应该检查它的参数，如果给定则只删除用户`0`，即“当这个事务完成时，将安装零个这个名字的包”。

你是在安装还是升级？

# java - 从 JComboBox 在 JTextField 中显示数据

> ID：14971926
> 
> 赞同：0
> 
> 时间：2013-02-20T03:44:04.227
> 
> 标签：java, swing, jtextfield, jcombobox

我想要从 JComboBox 获取值并将其显示在 JTextField 中的 swing 代码，并通过检查 JCheckBox 将焦点设置为 JTextField。最初 JTextField 应该是空的。检查JCheckBox是否在JCobox中的jTextfield中的所选项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:07:52.690

示例代码：

```
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JCheckBox;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class Sample {

    public static void main(String[] args) {
        JFrame frame = new JFrame( "ComboBox Example" );
        frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        JCheckBox checkBox = new JCheckBox( "Display Selecte Item" );
        final JTextField text = new JTextField( "" );
        text.setEditable( false );
        final JComboBox combo = new JComboBox( new String[] { "Item 1", "Item 2", "Item 3", "Item 4" } );
        checkBox.addActionListener( new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                JCheckBox check = ( JCheckBox ) e.getSource();
                if( check.isSelected() ) {
                    Object obj = combo.getSelectedItem();
                    text.setEditable( true );
                    text.requestFocus();
                    text.setText(  obj == null ? "No Item Selected" : obj.toString() );
                }
            }
        } );

        JPanel panel = new JPanel();
        panel.setLayout( new GridLayout( 3,2 ) );
        panel.add( new JLabel( " Select Item:" ) );
        panel.add( combo );
        panel.add( checkBox );
        panel.add( new JLabel( "" ) );
        panel.add( new JLabel( "Selected Item" ) );
        panel.add( text );

        frame.add( panel );
        frame.pack();;
        frame.setVisible( true);
    }

} 
```

# ios - 带有 ARC 错误的 Cocoa Touch 项目：[__NSCFString deviceOrientationDidChange:]：无法识别的选择器

> ID：14971928
> 
> 赞同：0
> 
> 时间：2013-02-20T03:44:15.727
> 
> 标签：ios, cocoa-touch, automatic-ref-counting, device-orientation

我有 ARC 的 Cocoa Touch 项目，有时会出现这个错误。你能解释一下这个错误的类型以及解决这个问题的方法吗？

```
-[__NSCFString deviceOrientationDidChange:]: unrecognized selector sent to instance 0x1ddf81a0

*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString deviceOrientationDidChange:]: unrecognized selector sent to instance 0x1ddf81a0'
*** First throw call stack:
(0x313132a3 0x38fad97f 0x31316e07 0x31315531 0x3126cf68 0x31264037 0x31b7a599 0x33121c65 0x3311c3db 0x3311b6cd 0x3311b11b 0x34e1c5a3 0x34e1c1d3 0x312e8173 0x312e8117 0x312e6f99 0x31259ebd 0x31259d49 0x34e1b2eb 0x3316f301 0x14b61 0x14ae8)
libc++abi.dylib: terminate called throwing an exception 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:34:07.023

你有一个僵尸问题。如果您可以在模拟器上重现此内容，请在 Zombies 仪器下运行它。如果您只能在设备上重现它，请编辑您的方案，转到“诊断”选项卡，然后打开“僵尸”复选框。（不幸的是，仪器不提供设备上的僵尸检测。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T05:17:37.833

您看到的崩溃与 ARC*无关*`deviceOrientationDidChange:`，而与正在接收虚假“ ”消息的对象（似乎是 NSCFString 对象）有关。

我的建议是在“ `deviceOrientationDidChange`”上设置一个符号断点并捕获正在发送的消息，然后你就会知道哪一行代码被破坏了。

# css - 为什么页脚不是从左到右一直走？

> ID：14971930
> 
> 赞同：0
> 
> 时间：2013-02-20T03:44:25.353
> 
> 标签：css, background, footer, background-repeat

我的 css 类页脚的背景不会跨越浏览器的整个宽度，具体取决于我保持浏览器的宽度。它使页面看起来很奇怪，因为页脚在主要内容结束之前就结束了。该网站位于 avidest.com，因此您可以看到我所指的内容。这是CSS：

```
.Footer { width: 100%; padding:10px 0; margin:0px 0 0 0; text-align:center; border-top:1px solid #b3b3b3; background:#d9d9d9; background-repeat: top-repeat-x;} 
```

该 css 最初是：

```
.Footer { width: 100%; padding:10px 0; margin:0px 0 0 0; text-align:center; border-top:1px solid #b3b3b3; background:#d9d9d9;} 
```

但这也没有用。如何使页脚从浏览器的左侧一直到右侧？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T04:27:01.793

使用 chrome 检查器查看您的网页，此错误似乎与浮动所有列和标题有关。

当您浮动一个元素时，该元素会“脱离”文档流。这意味着在布局时不会考虑这个元素的实际大小。

我通常不希望在浮动元素上出现这种行为，因此避免这种情况的一种方法是`overflow: auto`在父容器中设置。

此外，您的标题布局看起来很奇怪。当我有一个明确的解决方案时，我会更新这个。

**第一次更新：** 我已经`overflow: auto`用浮动元素向每个父母添加了说，现在它对我有用。请将该规则添加到以下元素：

```
.Header
.Logo
.body 
```

请注意，通过这些更改，您的页面看起来会很混乱（特别是周围会有很多滚动条）。

这是因为您对事物大小的设置过于严格了。相反，我会让事情更自然地流动。例如：

*   设置徽标大小不应该是必需的。
*   Header 上的项目符号点高度太低。我也会删除它。

我要做的另一件事是将背景图像分成 3 个（或至少 2 个，标题和内容）。这样，事情就会更加解耦并且更容易改变。尝试将每个“逻辑”块（页眉、页脚、侧边栏、登录表单）视为一个独立的模块，不应与其他模块（图像、类等）共享内容。

很抱歉，所有这些都无法在评论中解释，但请不要犹豫，问我任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T03:49:04.667

您是否尝试过 0 的左右像素？

```
.Footer { left:0px; right:0px; padding-bottom:10px 0; margin:0px 0 0 0; text-align:center; border-top:1px solid #b3b3b3; background:#d9d9d9; background-repeat: top-repeat-x;} 
```

我认为它可能是它所在的容器

# javascript - 用 jquery/javascript 替换数字和符号

> ID：14971931
> 
> 赞同：3
> 
> 时间：2013-02-20T03:44:30.903
> 
> 标签：javascript, jquery, regex

有谁知道如何替换数字和符号（不包括破折号和单引号）？

示例：如果我有一个字符串 "ABDHN'S-J34H@#$"; 如何将数字和符号替换为空并返回值 "ABDHN'S-JH" ？

我有以下代码可以将所有字符和符号重播为空，并且只返回我的数字

```
$(".test").keyup(function (e) {
    orgValue = $(".test").val();
    if (e.which != 37 && e.which != 39 && e.which != 8 && e.which != 46) {
        newValue = orgValue.replace(/[^\d.]/g, "");
        $(".test").val(newValue);
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:53:16.150

您可以使用此正则表达式：

```
string.replace(/^[a-zA-Z'-]+$/, '') 
```

字符类 [] 中的插入符号 ^ 将否定匹配。此正则表达式会将除`a-z`、`A-Z`和`single quote`和之外的所有字符转换`hyphen`为空

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T04:02:00.307

您可以通过键盘上的键码值跳过它们来替换符号。

普通键盘的键码值链接：http: [//www.w3.org/2002/09/tests/keys.html](http://www.w3.org/2002/09/tests/keys.html)

```
 $("#your control").bind("keydown keyup", doItPlease);

function doItPlease(e)
 {
// First 2 Ifs are for numbers for num pad and alpha pad numbers
 if (e.which < 106 && e.which > 95)
 {
    return false; // replace your values or return false
 } 
 else if (e.which < 58 && e.which > 47) 
{
    // replace your values or return false
} else {
    var mycharacters = [8, 9, 33, 34, 35 // get your coders from above link];
    for (var i = 0; i < mycharacters.length; i++) {
        if (e.which == mycharacters[i]) {
             // replace your characters or just
             // return false; will cancel the key down and wont even allow it
        }
      e.preventDefault(); 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T03:46:59.547

您应该只允许使用字母、破折号和单引号，如下所示：

```
newValue = orgValue.replace(/[^a-zA-Z'-]/g, ""); 
```

其他任何内容都将替换为“”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T04:12:11.500

```
"ABDHN'S-J34H@#$".replace(/[^\-'\w]/g, '') 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-02-20T03:51:08.253

```
"ABDHN'S-J34H@#$".replace(/[0-9]|[\'@#$]/g, ""); 
```

# apache - 如何在 Apache Server 中配置多个 LDAP 域认证？

> ID：14971940
> 
> 赞同：0
> 
> 时间：2013-02-20T03:45:47.610
> 
> 标签：apache, svn, ldap

在使用 LDAP 身份验证配置 SVN 时，我是这样做的：

```
<Location /svn>
   DAV svn
   SVNParentPath /svn
   SVNListParentPath off
   AuthType Basic
   AuthBasicProvider file ldap
   AuthLDAPURL "ldap://123.456.789.10:389/DC=org,dc=huahsin?sAMAccountName?sub"
   ...
   require valid-user
</Location> 
```

我可以知道如何对来自 2 个不同服务器的 2 个不同域的用户进行身份验证吗？这可以做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T05:13:42.583

是的，使用[mod_authn_alias](http://httpd.apache.org/docs/2.2/mod/mod_authn_alias.html)。在 severfault.com 上的另一个问题中有一个这样的设置示例： [https ://serverfault.com/questions/140858/authenticating-apache-httpd-against-multiple-ldap-servers-with-expired-accounts](https://serverfault.com/questions/140858/authenticating-apache-httpd-against-multiple-ldap-servers-with-expired-accounts)

# c# - RegisterHotKey 不返回系统键挂钩 c#

> ID：14971947
> 
> 赞同：1
> 
> 时间：2013-02-20T03:46:33.343
> 
> 标签：c#

我通过 RegisterHotKey 函数注册热键。

我有以下问题：我使用语言工具输入我的语言（unicode）。但是在我使用 RegisterHotKey 来挂钩 Ctrl + Alt + Q 之后，我的语言工具无法在我的应用程序中处理richtextbox 或文本框。

我认为 RegisterHotKey 函数会钩住所有键并且不会返回到我的语言工具。我该怎么做才能解决这个问题。

我的代码：

```
public sealed class KeyboardHook : IDisposable
{
    // Registers a hot key with Windows.
    [DllImport("user32.dll")]
    public static extern bool RegisterHotKey(IntPtr hWnd, int id, uint fsModifiers, uint vk);
    // Unregisters the hot key with Windows.
    [DllImport("user32.dll")]
    public static extern bool UnregisterHotKey(IntPtr hWnd, int id);
    /// <summary>
    /// Represents the window that is used internally to get the messages.
    /// </summary>
    private class Window : NativeWindow, IDisposable
    {
        private static int WM_HOTKEY = 0x0312;

        public Window()
        {
            // create the handle for the window.
            this.CreateHandle(new CreateParams());
        }

        /// <summary>
        /// Overridden to get the notifications.
        /// </summary>
        /// <param name="m"></param>
        protected override void WndProc(ref Message m)
        {
            base.WndProc(ref m);

            // check if we got a hot key pressed.
            if (m.Msg == WM_HOTKEY)
            {
                // get the keys.
                Keys key = (Keys)(((int)m.LParam >> 16) & 0xFFFF);
                ModifierSSKeys modifier = (ModifierSSKeys)((int)m.LParam & 0xFFFF);

                // invoke the event to notify the parent.
                if (KeyPressed != null)
                    KeyPressed(this, new KeyPressedEventArgs(modifier, key));
            }
        }

        public event EventHandler<KeyPressedEventArgs> KeyPressed;

        #region IDisposable Members

        public void Dispose()
        {
            this.DestroyHandle();
        }

        #endregion
    }

    private Window _window = new Window();
    private int _currentId;

    public KeyboardHook()
    {
        // register the event of the inner native window.
        _window.KeyPressed += delegate(object sender, KeyPressedEventArgs args)
        {
            if (KeyPressed != null)
                KeyPressed(this, args);
        };
    }

    /// <summary>
    /// Registers a hot key in the system.
    /// </summary>
    /// <param name="modifier">The modifiers that are associated with the hot key.</param>
    /// <param name="key">The key itself that is associated with the hot key.</param>
    public void RegisterHotKey(ModifierSSKeys modifier, Keys key)
    {
        // increment the counter.
        _currentId = _currentId + 1;

        // register the hot key.
        if (!RegisterHotKey(_window.Handle, _currentId, (uint)modifier, (uint)key))
            throw new InvalidOperationException("Couldn’t register the hot key.");
    }

    /// <summary>
    /// A hot key has been pressed.
    /// </summary>
    public event EventHandler<KeyPressedEventArgs> KeyPressed;

    #region IDisposable Members

    public void Dispose()
    {
        // unregister all the registered hot keys.
        for (int i = _currentId; i > 0; i--)
        {
            UnregisterHotKey(_window.Handle, i);
        }

        // dispose the inner native window.
        _window.Dispose();
    }

    #endregion
}

[Flags]
public enum ModifierSSKeys : uint
{
    None = 0,
    Alt = 1,
    Control = 2,
    Shift = 4,
    Win = 8
}

/// <summary>
/// Event Args for the event that is fired after the hot key has been pressed.
/// </summary>
public class KeyPressedEventArgs : EventArgs
{
    private ModifierSSKeys _modifier;
    private Keys _key;

    internal KeyPressedEventArgs(ModifierSSKeys modifier, Keys key)
    {
        _modifier = modifier;
        _key = key;
    }

    public ModifierSSKeys Modifier
    {
        get { return _modifier; }
    }

    public Keys Key
    {
        get { return _key; }
    }
} 
```

# c++ - 如何使用 Qt 创建一个基本的 GUI（在列表中存储名称和地址）？

> ID：14971948
> 
> 赞同：0
> 
> 时间：2013-02-20T03:46:34.943
> 
> 标签：c++, qt, user-interface

[http://www.youtube.com/watch?v=r57rO3p1Bcs&feature=youtu.be](http://www.youtube.com/watch?v=r57rO3p1Bcs&feature=youtu.be)

所以我想做的是在发布的视频中重新创建 gui。我创建了主窗口和对话框窗口。我是 Qt 的新手，我一直在学习所有基础知识的教程。我找不到太多关于如何将“新学生”对话框窗口中的三个值存储到列表中以及如何显示名字和姓氏的信息。我也不太确定如何使值可编辑。

这不是任何类别的作业。我正在努力为自己的目的而学习。任何关于如何将对话框窗口中的值链接到列表以及从列表到主窗口行编辑的策略对我都非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T08:46:26.910

[Qt 的模型/视图介绍](http://qt-project.org/doc/qt-4.8/model-view-programming.html)是一个很好的起点。

LE: 一个简单的方法开始看[QListWidget](http://doc.qt.digia.com/stable/qlistwidget.html)类

# google-maps - 有一些限制的旅行推销员

> ID：14971951
> 
> 赞同：5
> 
> 时间：2013-02-20T03:47:05.630
> 
> 标签：google-maps, graph-algorithm, traveling-salesman, driving-directions

我正在尝试找到通过 A、B、C 和 D 点的最佳驾驶方式

有一些额外的限制 - 某些点必须在其他点之前达到。说 D 必须在 B 之前到达。换句话说，为某些点排序。

如果没有额外的限制，Google Maps apis 可以帮助解决这个问题。是否有其他服务可以帮助解决此问题？有没有办法用我错过的谷歌地图 api 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:08:30.747

你说谷歌有一个 API 函数让我们命名它`bestWay(point a, point b)`：

您有`{A,B,C,D}`积分，您必须按以下顺序访问它们：

```
A,C,D,B 
```

找到 (A,C) 的最佳方式，然后从 (C,D) 和 (D,B) 中找到最佳方式，然后构建自己的方式。

如果在您可能必须检查所有排列`C`之前只有这样的约束：`D`

```
A->C->B->D
A->B->C->D
...
B->A->C->D 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T22:34:01.770

旅行商问题可以表述为[整数规划问题](http://en.wikipedia.org/wiki/Travelling_salesman_problem#ILP_Formulation)（此链接给出了一个公式）或[约束规划问题](http://en.wikipedia.org/wiki/Constraint_programming)，因此您可以使用任何 MIP 或 CP 求解器（例如[CBC](https://projects.coin-or.org/Cbc)或[Gecode）](http://www.gecode.org/)来求解带有任何额外约束的 TSP 问题想要加上。但是，如果您需要在 Google Maps 上绘制结果，则必须使用 Google Maps API 手动完成。

如果您更喜欢基于 Web 的解决方案，那么您可以使用[NEOS 服务器进行优化，它通过](http://www.neos-server.org/neos/)[XML-RPC API](http://www.neos-server.org/neos/NEOS-API.html)提供对各种求解器的访问。作为一个额外的优势，这种方法允许使用高级建模语言（例如[AMPL](http://en.wikipedia.org/wiki/AMPL) ）提交问题，而不是直接处理低级求解器 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T23:03:34.757

这是 Javascript 中的精确求解器：[http](http://www.iaindunning.com/?page_id=39) ://www.iaindunning.com/?page_id=39 。它使用像这里[http://www.tsp.gatech.edu/methods/dfj/index.html](http://www.tsp.gatech.edu/methods/dfj/index.html)这样的线性规划和切割平面方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-07T13:34:02.353

[在http://www.openopt.org/TSP](http://www.openopt.org/TSP)上有一个旅行商问题的开源实现——不过它是用 Python 编写的。

我已将上述 OpenOpt TSP 和 Google 方向合并在一起，以提供一个可以满足您要求的网站（除了订购限制），可在[http://www.speedyroute.co.uk/获得](http://www.speedyroute.co.uk/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-04T08:03:46.197

看看这个[http://xsolve.info/TSP.html](http://xsolve.info/TSP.html) 这是一个 JAVA 程序。你可以修改它来添加你自己的约束

# javascript - plupload 文件名更改

> ID：14971960
> 
> 赞同：0
> 
> 时间：2013-02-20T03:47:51.037
> 
> 标签：javascript

该插件应该有一个内置的唯一名称更改器，但似乎不起作用。不确定问题是什么。

```
<div class="upload-form" id="uploader">

    <!-- Form Heading -->
    <h1 class="replace-text">Upload Form</h1>
    <a href="#" class="close" title="Close Window"><img src="img/close-button.png" alt="Close"></a>

    <!-- Select & Upload Button -->
    <div>
        <a class="button" id="pickfiles" href="#">Select</a>
        <a class="button" id="uploadfiles" href="#">Upload</a>
    </div>

    <!-- File List -->
    <div id="filelist" class="cb"></div>

    <!-- Progress Bar -->
    <div id="progressbar"></div>

    <!-- Close After Upload -->
    <div id="closeAfter">
        <span class="checkbox">
            <input type="checkbox" name="checkbox" id="checkbox">
            <label for="checkbox">Close window after upload</label>
        </span>
    </div>

</div><!-- close uploader --> 
```

那是我的迷你文件上传器，下面是处理信息到 S3 存储桶的脚本。

```
<script>
// Upload Form
        $(function() {
            // Settings ////////////////////////////////////////////////
            var uploader = new plupload.Uploader({
                runtimes : 'html5,flash,silverlight', // Set runtimes, here it will use HTML5, if not supported will use flash, etc.
                unique_names: true,
                browse_button : 'pickfiles', // The id on the select files button
                multi_selection: true, // Allow to select one file each time
                container : 'uploader', // The id of the upload form container
                max_file_size : '800kb', // Maximum file size allowed
                url : 'http://<?php echo $bucket; ?>.s3.amazonaws.com/',
                multipart: true,
                multipart_params: {
                    'key': '<?=$slug?>/${filename}', // use filename as a key
                    'Filename': '${filename}', // adding this to keep consistency across the runtimes
                    'acl': 'public-read',
                    'Content-Type': 'image/jpeg',
                    'success_action_status': '201',
                    'AWSAccessKeyId' : '<?php echo $accessKeyId; ?>',       
                    'policy': '<?php echo $policy; ?>',
                    'signature': '<?php echo $signature; ?>'
                },
                flash_swf_url : '<?php echo get_stylesheet_directory_uri(); ?>/js/plupload.flash.swf', // The url to thye flash file
                silverlight_xap_url : '<?php echo get_stylesheet_directory_uri(); ?>/js/plupload.silverlight.xap', // The url to the silverlight file

                filters : [ {title : "Image files", extensions : "jpg,gif,png"} ] // Filter the files that will be showed on the select files window
            });

            // RUNTIME
            uploader.bind('Init', function(up, params) {
                $('#runtime').text(params.runtime);
            });

            // Start Upload ////////////////////////////////////////////
            // When the button with the id "#uploadfiles" is clicked the upload will start
            $('#uploadfiles').click(function(e) {
                uploader.start();
                e.preventDefault();
            });

            uploader.init(); // Initializes the Uploader instance and adds internal event listeners.

            // Selected Files //////////////////////////////////////////
            // When the user select a file it wiil append one div with the class "addedFile" and a unique id to the "#filelist" div.
            // This appended div will contain the file name and a remove button
            uploader.bind('FilesAdded', function(up, files) {
                $.each(files, function(i, file) {
                    $('#filelist').append('<div class="addedFile" id="' + file.id + '">' + file.name + '<a href="#" id="' + file.id + '" class="removeFile"></a>' + '</div>');
                });
                up.refresh(); // Reposition Flash/Silverlight
            });

            // Error Alert /////////////////////////////////////////////
            // If an error occurs an alert window will popup with the error code and error message.
            // Ex: when a user adds a file with now allowed extension
            uploader.bind('Error', function(up, err) {
                alert("Error: " + err.code + ", Message: " + err.message + (err.file ? ", File: " + err.file.name : "") + "");
                up.refresh(); // Reposition Flash/Silverlight
            });

            // Remove file button //////////////////////////////////////
            // On click remove the file from the queue
            $('a.removeFile').live('click', function(e) {
                uploader.removeFile(uploader.getFile(this.id));
                $('#'+this.id).remove();
                e.preventDefault();
            });

            // Progress bar ////////////////////////////////////////////
            // Add the progress bar when the upload starts
            // Append the tooltip with the current percentage
            uploader.bind('UploadProgress', function(up, file) {
                var progressBarValue = up.total.percent;
                $('#progressbar').fadeIn().progressbar({
                    value: progressBarValue
                });
                $('#progressbar .ui-progressbar-value').html('<span class="progressTooltip">' + up.total.percent + '%</span>');
            });

            // Close window after upload ///////////////////////////////
            // If checkbox is checked when the upload is complete it will close the window
            uploader.bind('UploadComplete', function() {
                if ($('.upload-form #checkbox').attr('checked')) {
                    $('.upload-form').fadeOut('slow');
                }
            });

            // Close window ////////////////////////////////////////////
            // When the close button is clicked close the window
            $('.upload-form .close').on('click', function(e) {
                $('.upload-form').fadeOut('slow');
                e.preventDefault();
            });

        }); // end of the upload form configuration

        // Check Box Styling
        $(document).ready(function() {

            var checkbox = $('.upload-form span.checkbox');

            // Check if JavaScript is enabled
            $('body').addClass('js');

            // Make the checkbox checked on load
            checkbox.addClass('checked').children('input').attr('checked', true);

            // Click function
            checkbox.on('click', function() {

                if ($(this).children('input').attr('checked')) {
                    $(this).children('input').attr('checked', false);
                    $(this).removeClass('checked');
                }

                else {
                    $(this).children('input').attr('checked', true);
                    $(this).addClass('checked');
                }

            });

        });
        </script> 
```

如您所见，我确实将唯一名称设置为 true，但文件名保持不变。有什么办法让我自己独一无二？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:24:23.783

使用这个[http://phpjs.org/functions/uniqid/](http://phpjs.org/functions/uniqid/)根据页面 slugs 创建新的 id。

```
$(function() {
            var filen = uniqid('<?=$slug?>', true);
            // Settings ////////////////////////////////////////////////
            var uploader = new plupload.Uploader({

                runtimes : 'html5,flash,silverlight', // Set runtimes, here it will use HTML5, if not supported will use flash, etc.
                browse_button : 'pickfiles', // The id on the select files button
                multi_selection: true, // Allow to select one file each time
                container : 'uploader', // The id of the upload form container
                max_file_size : '800kb', // Maximum file size allowed
                url : 'http://<?php echo $bucket; ?>.s3.amazonaws.com/',
                multipart: true,
                multipart_params: {
                    'key': '<?=$slug?>/'+ filen +'${filename}', // use filename as a key
                    'Filename': filen+'${filename}', // adding this to keep consistency across the runtimes
                    'acl': 'public-read',
                    'Content-Type': 'image/jpeg',
                    'success_action_status': '201',
                    'AWSAccessKeyId' : '<?php echo $accessKeyId; ?>',       
                    'policy': '<?php echo $policy; ?>',
                    'signature': '<?php echo $signature; ?>'
                },
                flash_swf_url : '<?php echo get_stylesheet_directory_uri(); ?>/js/plupload.flash.swf', // The url to thye flash file
                silverlight_xap_url : '<?php echo get_stylesheet_directory_uri(); ?>/js/plupload.silverlight.xap', // The url to the silverlight file

                filters : [ {title : "Image files", extensions : "jpg,gif,png"} ] // Filter the files that will be showed on the select files window
            }); 
```

# ios - 当文本字段在滚动视图中时，如何使键盘具有类似于默认应用程序中的行为？

> ID：14971963
> 
> 赞同：2
> 
> 时间：2013-02-20T03:47:59.493
> 
> 标签：ios, ios5, ios6

我在情节提要简单的应用程序（只有一个控制器）中创建，我将滚动视图和滚动视图内的 UITextFileds 放在一起。在控制器内部，我添加了类似的功能

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    [self.name resignFirstResponder];
    [self.number resignFirstResponder];

    // I have tried with and without this line but doesn't work
    [self.scrollView resignFirstResponder];
} 
```

（名称、编号为 UITextField 的 Outlets，scrollView 为 UIScrollView 的 Outlet）。当我单击任何这些文本字段时，键盘会弹出，但是当我完成输入时，我无法隐藏键盘。（在以前的版本中，当我点击文本字段时，我没有滚动视图和键盘隐藏）。如何使键盘具有默认应用程序中的行为，如何隐藏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T03:57:11.907

我假设您只想能够轻按键盘并将其关闭，对吗？只需这样做：

```
 UITapGestureRecognizer *myTapz = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(userTapped)];
    myTapz.numberOfTapsRequired=1;
    myTapz.cancelsTouchesInView=NO;
    [self.view addGestureRecognizer:myTapz];//or do self.WhateverYourOtherViewIsCalled..tableview? scrollView?
    [myTapz release]; 
```

然后在您的选择器中：

```
-(IBAction)userTapped
{
  [whateverYourTextFieldIsCalled resignFirstResponder];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T03:50:46.007

在您的视图控制器中：

```
[self.view endEditing:YES]; 
```

无论哪个字段是第一响应者，这都会关闭键盘。我认为有一些例外，但是对于您正在做的事情，它应该可以正常工作。

也是`touchesBegan`UIView 方法，而不是 UIViewController 方法。如果你把它放在你的 UIScrollView 中，滚动视图的 panGestureRecognizer 将阻止 touchesBegan 被调用。此外，当覆盖 touchesBegan 或其他触摸方法时，您通常也希望调用 super。

ttarules 关于创建手势识别器的建议是检测触摸的最佳方式。您可以在视图中使用 touchesBegan，只要知道其他手势识别器可以阻止它被调用（参见[Session 121 - Advanced Gesture Recognition from WWDC 2010](https://developer.apple.com/videos/archive/)）。

`endEditing`是关闭键盘的最佳方式，因为即使在您添加其他字段后它仍然有效。

# performance - 我如何通过归纳证明这两种算法中的第二种更快？

> ID：14971965
> 
> 赞同：0
> 
> 时间：2013-02-20T03:48:04.937
> 
> 标签：performance, algorithm, proof, induction

我有两种算法。

```
A. Solves problem in 2^n seconds.

B. Solves problem in n^2 + 1,000,000 seconds. 
```

我如何**归纳证明**B 比 A 快。

有人告诉我 2^n > 2n+1 for n>2 可能对这个问题有用。我一直在绞尽脑汁，无法解决这个问题。谢谢。

“n”相当于程序的大小。

编辑：**对于所有 n > 19。**

解决方案：

前提：n^2 + 1,000,000 < 2^n

基础：
n = 20
1000400 < 1048576 真

就职：

```
(n+1)^2 + 1000000 > 2^(n+1)
n^2 +2n +1 +1000000 > 2^(n+1)
Apply 2^n > 2n + 1
n^2 + 1000000 > 2^(n+1) 
```

最后一行暗示 B 总是大于 A。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T03:57:36.270

只有当 n > 19.9321 时，B 才会更快。如果您不需要实际工作，那么[这](http://www.wolframalpha.com/input/?i=2%5En%20%3E%20n%5E2%20%2b%201000000)就是我得到答案的地方。

对于任何小于 19.9321 的数字，A 会更快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T04:03:48.070

正如您所说，基本情况已得到证明。IE`k^2<2^k for k>=5`

对于归纳，让我们假设

```
k^2<2^k 
```

我们需要证明

```
(k+1)^2<2^(k+1)

(k+1)^2 = k^2 + 2k + 1 < 2^k + 2k + 1 
```

我们知道`(k-1)^2>=0.`因此`k^2>=2k-1`

```
2^k + 2k + 1 = 2^k + 2k -1 + 2 <= 2^k + k^2 + 2 < 2^k + 2^k +2= 2^(k+1) + 2 
```

啊，我觉得我快到了。有什么帮助吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T03:57:56.507

Python作为计算器：

```
>>> n = 20
>>>
>>> 2**n
1048576
>>> n**2 + 1000000
1000400
>>> 
```

# java - 使用连接到客户端的 ObjectInputStream 和 ObjectOutputStream 从客户端读取数据

> ID：14971967
> 
> 赞同：0
> 
> 时间：2013-02-20T03:48:11.397
> 
> 标签：java, sockets, networking, objectoutputstream, objectinputstream

我的代码类似于下面的代码。我遇到的问题是，当 ObjectInputStream （输入变量）尝试读取一个对象（这只会在建立连接后发生）时，它会崩溃并给我一个错误：

java.net.SocketException：连接重置

并指的是：

message = (String) input.readObject();

只有当客户端断开连接时它才应该进入 ex 异常循环（据我所知）。

```
 @Override
    public void run() {

        String message = "";

        do{
            try{
                message = (String) input.readObject();
            }catch(ClassNotFoundException cnfException){
                System.err.println("Unable to read client data.");
            }catch(Exception ex){ // Will get called if the client is no longer in communication with the server.
                continueTalking = false; // If the client disconnects, the server will shut down its communication with the client.
                ex.printStackTrace();
                break; // Breaks out of the do...while loop.
            }

            if(message.equals("DISCONNECT")){
                continueTalking = false;
                System.out.println(connection.getLocalAddress() + " disconnected from the session.");
            }
            else{
                //TODO Send the message off to be processed.
            }
        }while(continueTalking); // Continues waiting for a message until continueTalking = false

        closeStreams();
    } 
```

谢谢！

更新：我想通了。我最初尝试过 EOFException，但由于某种原因从未调用过。我最终发现这是我的客户端的一个问题，它实际上并没有发送任何数据并且一运行就自行断开连接。对于与我遇到相同问题的任何人，这是我的固定代码：

```
 /** This should handle the connection **/
    @Override
    public void run() {

        /** The message that the client has sent to the server. **/
        String message = "";

        do{
            try{
                message = (String) input.readObject(); // Waits for the client to send a message to the server.
            }catch(ClassNotFoundException cnfException){
                System.err.println("Unable to read client data. Continuing on with my life.");
            }catch(Exception noConnectionToSocketFound){ // Will get called if the client is no longer in communication with the server.
                System.out.printf("User with handle: %s disconnected.\n", clientIP);
                continueTalking = false; // If the client disconnects, the server will shut down its communication with the client.
                break; // Breaks out of the do...while loop that is constantly waiting for the client to send a message to.
            }

            /** If the client sends the message "DISCONNECT", then the server will shut down all communications with said client. **/
            if(message.equals("DISCONNECT")){
                System.out.println(connection.getLocalAddress() + " disconnected from the session properly.");
                continueTalking = false; // If the client wants to disconnect, then the server will stop trying to communication with said client.
                break; // Breaks out of the do...while loop that is constantly waiting for the client to send a message to.
            }
            else if(message != ""){
                System.out.printf("Got message from %s:\n%s\n", clientIP, message);
                message = ""; // Is needed so that this loop doesn't get called every time after the first message has been sent. Without it, after the word "cheeseburger" is sent, it would continually think that "cheeseburger" is being repeatedly sent (this might not actually happen anymore).
                //TODO Send the message off to be processed.
            }

        }while(continueTalking); // Continues waiting for a message until continueTalking = false

        closeStreams(); // Just some clean up 
```

这

```
continueTalking = false;
break; 
```

可能有点多余和不必要（我只需要其中一个），但知道有两件事可以依靠，我感觉更好。

希望这可以帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:55:10.137

“连接重置”有许多可能的原因，但最常见的原因是您写入了已被对等方关闭的连接：换句话说，应用程序协议错误。

您的循环应该`EOFException`单独捕获并将其视为有序关闭。

# sql - 在 VB 中使用 ADO.NET 命令向 SQL 表添加列

> ID：14971973
> 
> 赞同：0
> 
> 时间：2013-02-20T03:49:02.397
> 
> 标签：sql, sql-server, vb.net, ado.net

我对一组最少的指令感兴趣，这些指令允许我使用 ado.net 组件将列添加到 Visual Basic 中的现有表中。我的数据库是用 sql server 制作的。我将非常感谢对代码的实用评论，因为这对我最有效

编辑 1

```
Imports System.Data.Sql
Imports System.Data.SqlClient

Public Class Form1
    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        Dim connString As String = "Data Source=THE_SHOGUNATE\SQLEXPRESS;Initial Catalog=le_database;Integrated Security=True"
        Dim conn As New SqlConnection(connString)
        conn.Open()
        Dim comm As New SqlCommand("SELECT denumire FROM Reparatii", conn)
        Dim reader As SqlDataReader = comm.ExecuteReader
        Dim dt As New DataTable
        dt.Load(reader)
        ListBox1.DataSource = dt
        ListBox1.DisplayMember = "denumire"
        conn.Close()

        conn.Open()
        Dim comm As New SqlCommand("ALTER TABLE reparatii ADD durata_executie INT", conn)

        conn.Close()
    End Sub
End Class 
```

这是一组用于测试目的的说明和一些如意的编码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T03:57:46.540

```
conn.Open()
Dim comm As New SqlCommand("ALTER TABLE reparatii ADD durata_executie INT", conn)

comm.ExecuteNonQuery() 
```

我还建议使用`using`语句来自动处理对象。

# c# - 从 c# 页面调用 javascript 函数

> ID：14971975
> 
> 赞同：-1
> 
> 时间：2013-02-20T03:49:15.050
> 
> 标签：c#, javascript, asp.net, c#-4.0

我正在使用下面的代码从 aspx 页面加载中调用 javascript 函数。但它不起作用。

```
protected void Page_Load(object sender, EventArgs e)
{    
   btn_add_more_pack.Attributes.Add("OnClick", "openform()");
} 
```

的JavaScript：

```
function openform() 
{
   try {
       alert('enter');
   }
   catch (ex) {
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T04:51:22.150

我已经复制了您的代码并在我的系统中进行了尝试。一切正常。但是，这里有一个问题：

我正在使用 VS-2010 处理您的项目。

你在哪里添加了你的javascript函数？它是在 .aspx 页头部分还是单独的文件中？

如果您在 .aspx 页头部分中添加了上述 Javascript 函数，则无需更改任何内容。一切正常。

但是，如果您已将上述 Javascript 函数添加到单独的 .js 文件中，则应记住在 .aspx 头部部分添加引用，如下所示

```
<script src="pathToJavascriptFile.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:44:51.820

我认为问题可能是`OnClick`它应该是`onclick`虽然没关系（不区分大小写）但你可以尝试如下。
所以在页面加载它应该如下

```
 protected void Page_Load(object sender, EventArgs e)
   {    
        btn_add_more_pack.Attributes.Add("onclick", "openform()");
   } 
```

# regex - _@[^@]*@ 在 bash

> ID：14971976
> 
> 赞同：4
> 
> 时间：2013-02-20T03:49:17.207
> 
> 标签：regex, bash, shell

每个人，我都对**shell 脚本**中的这个表达式有疑问：

```
expr "$VERSION" : "_@[^@]*@" 
```

谁能告诉我这里的“@”代表什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:53:13.747

这只是一个字面意思`@`。正`@`则表达式中没有特殊含义，尽管它可能在`$VERSION`.

匹配“下划线后跟@，后跟零个或多个非@ 字符，后跟@”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T03:55:40.557

来自`man expr`：

```
 expr1 : expr2
         The ``:'' operator matches expr1 against expr2, which must be a
         regular expression.  The regular expression is anchored to the
         beginning of  the string with an implicit ``^''.  expr expects
         "basic" regular expressions, see re_format(7) for more informa-
         tion on regular expressions. 
```

`@`is just `@`，因为它在正则表达式中没有特殊含义。因此，

```
expr _@foo@ : "_@[^@]*@" 
```

将成功，并输出`6`（它是匹配字符的数量）；尽管

```
expr _x@foo@ : "_@[^@]*@" 
```

将在 中输出`0`并返回失败代码`$?`，因为它无法匹配任何内容。

如果您不熟悉正则表达式，则示例中给出的意思是：下划线 ( `_`) 后跟两个 at 符号 ( `@`)，中间夹着任意数量的非 at 符号字符。

# r - R ff 包 ffsave 'zip' 未找到

> ID：14971977
> 
> 赞同：7
> 
> 时间：2013-02-20T03:49:33.463
> 
> 标签：r, bigdata, ffbase

可重现的例子：

```
library("ff")
m <- matrix(1:12, 3, 4, dimnames=list(c("r1","r2","r3"), c("m1","m2","m3","m4")))
v <- 1:3    
ffm <- as.ff(m)    
ffv <- as.ff(v)        
d <- data.frame(m, v)

ffd <- ffdf(ffm, v=ffv, row.names=row.names(ffm))

 ffsave(ffd,file="C:\\Users\\R.wd\\ff\\ffd")
 ## Error in system(cmd, input = filelist, intern = TRUE) : 'zip' not found 
```

系统：Windows 7 64 位，R 15.2 64 位

已安装 Rtools

zip 300xn-x64 和 unzip 600xn 文件夹已设置为 windows 路径

cmd 行工作，键入 zip 或解压缩它显示功能信息

需要帮忙！任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-24T17:09:06.577

文档中给出的一些链接和下载似乎已经过时。以下是已知可在 64 位 Windows 7 上运行的步骤： 为了使 ffsave 和 ffload 正常工作：

```
# Download zip 3.x and unzip 5.x. The correct URLs are:
# http://gnuwin32.sourceforge.net/packages/zip.htm
# http://gnuwin32.sourceforge.net/packages/unzip.htm
# Install both (they default to the same GnuWin32 directory). 
# Put the installation's \bin folder on the system PATH
# Restart R studio. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-06T12:04:57.287

似乎您的路径未设置为 Zip，请在环境变量中设置路径。如果您不想为所有进程设置路径，您可以通过`SET` 命令为单个命令行会话执行此操作，但您必须在同一会话中启动您的 R。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-25T00:48:38.373

'zip' not found 问题不是 ff 包独有的问题。这是一个简单的解决方案。

1.  下载 Rtools [https://cran.r-project.org/bin/windows/Rtools/](https://cran.r-project.org/bin/windows/Rtools/)
2.  打开 Rtools 并导航到 bin 文件夹。Rtools > 垃圾箱
3.  在单独的窗口中，打开您的 r 路径。例如，我的是 C:\Program Files\R\R-2.15.2\bin\x64 （[CRAN R for windows FAQ 的更多详细信息](https://cran.r-project.org/bin/windows/base/rw-FAQ.html#Rcmd-is-not-found-in-my-PATH_0021)）
4.  将 Rtools 应用程序“zip”（来自 2）复制到 r 路径文件夹（来自 3）

现在您应该可以保存文件了。如果要加载文件，还需要将 unzip 复制到 r 路径文件夹中。

# c++ - 当我尝试输入 C++ 范围解析运算符 :: 时，为什么 XCode 会插入方括号？

> ID：14971978
> 
> 赞同：1
> 
> 时间：2013-02-20T03:50:01.637
> 
> 标签：c++, xcode, editor, code-completion

给定以下正在进行的 C++ 代码：

```
if (true)
    std 
```

，只要我输入`:`范围解析运算符 ( ) 的第一个冒号 ( `::`)，XCode 就会奇怪地插入一些方括号，我的代码如下所示：

```
if [(true)
    std:] 
```

这真的很烦人，它无法弄清楚它为什么会这样做。目前它在某些文件中执行此操作，但在其他文件中没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T03:57:53.020

看起来它正在尝试帮助您使用 Objective C 语法。

猜测一下，它试图做的文件有一个扩展名，表明你正在编写的是Objective C。它没有做的文件是那些有一个扩展名表明它们包含C++的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T03:55:52.600

它试图变得更好并完成 Obj-C 语法。

```
object method 
```

接下来添加一个冒号变成

```
[object methodWithParameter:(parameter) ] 
```

# objective-c - 在 xcode 4.2 上动画标签和显示数据

> ID：14971982
> 
> 赞同：0
> 
> 时间：2013-02-20T03:50:31.597
> 
> 标签：objective-c, ios5, storyboard

我是制作 ios 应用程序的新手。

我现在在使用标签和数据时遇到了一些问题。我想在我的主屏幕上放置一个标签（文本），当人们按下它时，一些数据（文本、图片或其他内容）将出现在该标签下。而当人们再次推送时，数据就会消失。

我在谷歌上搜索过，但很抱歉我没有得到它。

如果你们没有时间为我解释清楚，只要给我涵盖这些问题的书籍（哪一页或哪一章）我会在上面找到。

非常感谢你，祝你有美好的一天。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:57:25.267

不要为此使用标签，使用 UIButton 并将形状更改为自定义。然后它看起来像一个没有按钮形状的标签。在按钮按下事件中做任何你想做的事情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T04:30:18.553

设置`UITapGesture`为`UILable`& 处理点击事件。

```
UITapGestureRecognizer *tapGestureRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapGesture:)];
tapGestureRecognizer.numberOfTapsRequired = 1;
[myLabel addGestureRecognizer:tapGestureRecognizer];
myLabel.userInteractionEnabled = YES;
[tapGestureRecognizer release];

-(void)handleTapGesture:(UIGestureRecognizer*)recognizer
{
    //do whatever you want.
} 
```

如果您只想设置文本，则使用`UILable`else 使用 custom `UIButton`。

# php - 在sql中使用concat语句检索记录

> ID：14971990
> 
> 赞同：0
> 
> 时间：2013-02-20T03:51:16.687
> 
> 标签：php, mysql, phpmyadmin

我有这个查询，我想连接学生的名字。我应该把 concat 语句放在哪里？

> “连接（文本，LPAD（id，4，'0'））”

这里的文本和 id 来自学生表。这是查询：

```
"SELECT p.*, s.* FROM students s, payments p  
 where s.id=p.id and level='Grade 3' and amount>='1500'" 
```

桌子

-学生桌-

```
create table students(
    text char(5)NOT NULL,
    id int(11)NOT NULL AUTO_INCREMENT,
    name varchar(250),
    address varchar(250)
    PRIMARY KEY(id)
) 
```

-付款-

```
create table payments(
    p_id int(11)NOT NULL AUTO_INCREMENT,
    amount varchar(250),
    id int,
    PRIMARY KEY(p_id)
    FOREIGN KEY(id) REFERENCES students(id);
) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:56:15.203

尝试这个 ：

```
 SELECT p.*, s.*, concat(s.text,LPAD(s.id,4,'0')) as student_names 
 FROM students s, payments p  
 where s.id=p.id and level='Grade 3' and amount>='1500' 
```

# javascript - JavaScript：意外的 typeof 结果

> ID：14971996
> 
> 赞同：7
> 
> 时间：2013-02-20T03:51:47.300
> 
> 标签：javascript, this, typeof

我有一个数组迭代器函数：

```
function applyCall(arr, fn) {
  fn.call(arr[0], 0, arr[0]);
} 
```

和一些代码

```
var arr1 = ['blah'];
applyCall(arr1, function (i, val) {
  alert(typeof this); // object    WHY??
  alert(typeof val); // string
  alert(typeof(this === val)) // alerts false, expecting true
}); 
```

为什么`typeof this`在 inline 函数内`object`而不是`string`？

jsfiddle[在这里](http://jsfiddle.net/polshgiant/TYTkb/5/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T04:00:10.380

在 JavaScript 中调用方法时，它在内部设置`this`为调用对象：[https ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)

> ...和原始值将被装箱。

通过“装箱”，它们意味着原语被包装在一个对象中。请注意，这仅适用于`apply`/的第一个参数`call`。其他参数成为未“装箱”的函数参数。