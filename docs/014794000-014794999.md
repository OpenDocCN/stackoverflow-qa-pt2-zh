# StackOverflow 问答 14794000-14794999

# image - 在 Wxpython 中，如何将图像插入 Ultimatelistctrl 列？

> ID：14794001
> 
> 赞同：0
> 
> 时间：2013-02-10T02:17:58.727
> 
> 标签：image, list, insert, wxpython, controls

我很好奇如何将特定目录中的图像插入 Ultimatelistctrl 中的特定行/列

```
MainFrame.ultimatelist = ULC.UltimateListCtrl( self.panel , agwStyle = wx.LC_REPORT | wx.LC_VRULES | wx.LC_HRULES , pos = (10,100) , size = (1240 , 520) )
    #-------------------------------------------------------------
    MainFrame.FirstColumn = ULC.UltimateListItem()
    MainFrame.FirstColumn._mask = wx.LIST_MASK_TEXT | wx.LIST_MASK_IMAGE | wx.LIST_MASK_FORMAT | ULC.ULC_MASK_CHECK
    MainFrame.FirstColumn._image = []
    MainFrame.FirstColumn._format = 1
    MainFrame.FirstColumn._kind = 1
    MainFrame.FirstColumn._text = ""
    MainFrame.ultimatelist.InsertColumnInfo( 1 , MainFrame.FirstColumn)
    MainFrame.arrowicon = wx.Image( "arrow.jpg" , wx.BITMAP_TYPE_ANY).ConvertToBitmap()

    MainFrame.ultimatelist.SetImage( 0 , MainFrame.arrowicon ) 
```

干杯，这真的很困扰我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T15:44:16.027

所有的魔法都在 wxPython 演示中。您需要创建一个 UltimateListCtrl.PyImageList。然后向其中添加 wx.Bitmap 实例。接下来，您需要告诉 UltimateListItem() 对象使用图像列表中的项目。在演示中，查找“info._image”以查看它是如何完成的。您可以从 wxPython 网站下载 wxPython 演示。

# java - 如何从子类中获取超类数据成员

> ID：14794004
> 
> 赞同：1
> 
> 时间：2013-02-10T02:18:32.167
> 
> 标签：java, inheritance, super

我无法从它的子类访问超类数据成员。

所以我有一个像这样的超类商店

```
public class Store {
    protected ArrayList<Audiobooks> ab;

    public Store(ArrayList<Audiobooks> ab)
    {
        this.ab = ab;
    }
    ...
} 
```

ab 被初始化，一切，然后我们有一个像这样的子类

```
public class Customer extends Store {

    ...
    public Customer(String id, String name, String address)
{
    this.id = id;
    this.name = name;
    this.address = address;
    }
    public void printAb(){
        for(int i = 0; i<ab.size(); i++){
            System.out.println(ab.get(i).toString());
        }
    }
} 
```

我最终得到一个空指针异常错误。当函数放在 store 类中时它工作正常，但是当它在子类 Customer 中时会发生空指针异常。

我试图通过使用 super.ab.... 来获得它，但没有成功。

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T02:43:15.120

您的`Customer`构造函数不会调用您`Store`的构造函数，因此该`ab`列表永远不会被实例化。

要解决这个问题，您需要让客户构造函数调用商店构造函数：

```
public Customer(String id, String name, String address) {
    super(new ArrayList<Audiobooks>());
    this.id = id;
    this.name = name;
    this.address = address;
} 
```

或者让您的客户构造函数实例化列表。对于 store 类，您还必须有多个构造函数，否则编译器会强制您调用正在显示的构造函数。如果它没有将类置于有效状态，您可能需要考虑摆脱您显然在 store 类上拥有的空构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T02:21:22.027

您可以正确访问该`ab`属性（否则您会遇到编译器错误）。

很可能您没有在任何地方创建对象，请尝试执行

```
 protected ArrayList<Audiobooks> ab = new ArrayList<Audiobooks>(); 
```

另外，如果您使用最通用的接口会更好`List`

```
 protected List<Audiobooks> ab = new ArrayList<Audiobooks>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T02:53:22.217

尝试这样做。

```
public class Customer extends Store {

    ...
    public Customer(ArrayList<Audiobooks> a,String id, String name, String address)
{
    super(a);
    this.id = id;
    this.name = name;
    this.address = address;
    }
    public void printAb(){
        for(int i = 0; i<ab.size(); i++){
            System.out.println(ab.get(i).toString());
        }
    }
} 
```

或者这样做

```
public class Customer extends Store {

        ...
        public Customer(String id, String name, String address)
    {
        a=new ArrayList<Audiobooks>(/*initial size*/);
        this.id = id;
        this.name = name;
        this.address = address;
        }
        public void printAb(){
            for(int i = 0; i<ab.size(); i++){
                System.out.println(ab.get(i).toString());
            }
        }
    } 
```

# ruby-on-rails - 通过不同的对象更新属性

> ID：14794006
> 
> 赞同：0
> 
> 时间：2013-02-10T02:18:49.190
> 
> 标签：ruby-on-rails

我很难弄清楚如何做到这一点。我整天都在做这件事。

我有一个 Account 类和一个 Transaction 类。帐户是使用余额创建的，我希望交易金额根据其类型从余额中增加或减少。

我希望能够在每次创建交易时更新账户余额。这是个人理财应用程序。截至目前，当我创建新交易时，账户余额没有任何变化。

### account_controller.rb

```
class AccountsController < ApplicationController
  def index
    @accounts = Account.all
  end

  def show
    @account = Account.find(params[:id])
  end

  def new
    @account = Account.new
  end

  def edit
    @account = Account.find(params[:id])
  end

  def create
    @account = Account.new(params[:account])

    respond_to do |format|
      if @account.save
        format.html { redirect_to @account, notice: 'Account was successfully created.' }
        format.json { render json: @account, status: :created, location: @account }
      else
        format.html { render action: "new" }
        format.json { render json: @account.errors, status: :unprocessable_entity }
      end
    end
  end

  def update
    @account = Account.find(params[:id])

    respond_to do |format|
      if @account.update_attributes(params[:account])
        format.html { redirect_to @account, notice: 'Account was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @account.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /accounts/1
  # DELETE /accounts/1.json
  def destroy
  @account = Account.find(params[:id])
  @account.destroy

  respond_to do |format|
    format.html { redirect_to accounts_url }
    format.json { head :no_content }
  end
  end

  def update_balance
  @a = Account.find(params[:id])
  @a.transactions.each do |t| 
    @update_balance = t.t_type + @a.balance
    @a.update_attributes(:balance => @update_balance)
  end
  end
end 
```

### 交易控制器.rb

```
class TransactionsController < ApplicationController
  def create
    @account = Account.find(params[:account_id])
    @transaction = @account.transactions.create(params[:transaction])
    redirect_to account_path(@account)
  end
end 
```

### 事务.rb

```
class Transaction < ActiveRecord::Base
  belongs_to :account
  attr_accessible :amount, :category, :t_type
end 
```

### 帐号.rb

```
class Account < ActiveRecord::Base
  attr_accessible :balance, :name
  has_many :transactions
end 
```

如果有人知道我做错了什么，或者可以为我指出一个好的彻底解释的方向，那就太好了。在这一点上我很迷茫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T02:45:11.160

试试这个。

```
class Account < ActiveRecord::Base
  attr_accessible :balance, :name
  has_many :transactions

  def update_with_transaction(transaction)
    return unless self.transactions.include? transaction
    if transaction.t_type.eql? SOME_TYPE
      self.balance += transaction.ammount
    else 
      self.balance -= transaction.ammount
    end
    save
  end
end

class TransactionsController < ApplicationController
  def create
    account = Account.find(params[:account_id])
    @transaction = account.transactions.create(params[:transaction])
    account.update_with_transaction(@transaction)
    redirect_to account_path(account)
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:47:35.730

它不会更新，因为你没有告诉它。为此创建一个[`after_create`回调](http://guides.rubyonrails.org/active_record_validations_callbacks.html#callbacks-overview)：

```
class Transaction < ActiveRecord::Base
  # ...
  after_create :update_account_balance

  private

  def update_account_balance
    account.balance += amount
    account.save
  end
end 
```

根据需要进行调整。请注意，这不会处理交易金额的更新，这留给读者练习。

# wpf - WPF - 在 SimpleMVVM 消息总线执行的代码中捕获异常

> ID：14794007
> 
> 赞同：2
> 
> 时间：2013-02-10T02:18:52.583
> 
> 标签：wpf, exception-handling, simple-mvvm

我正在使用[SimpleMVVM 框架](http://simplemvvmtoolkit.codeplex.com/)构建 WPF 应用程序，但无法捕获异常。我使用 SimpleMVVM 的 MessageBus 将消息发送到另一个视图模型。这一切都很好，但我注意到消息总线执行的代码中引发的异常被抑制了。这是我到目前为止所得到的：

My包含一个在 MainWindowViewModel 上`MainWindow`触发 a 的按钮。`TempCommand`该命令依次调用`Test`方法（如下所示），该方法使用 SimpleMVVM 的 MessageBus 发送通知消息。

```
private void Temp()
{
    SendMessage("Temp", new NotificationEventArgs());
} 
```

我的`MainWindow`还包含一个`Frame`内容。此内容的 ViewModel`CustomerViewModel`已在其构造函数中注册以接收这些通知：

```
public CustomerDetailsViewModel(ICustomerServiceAgent agent)
{
    RegisterToReceiveMessages("Temp", Temp);
} 
```

该`Temp`方法只是抛出异常的地方：

```
private void Temp(object sender, NotificationEventArgs args)
{
    throw new NotImplementedException("Somewhere, something horrible happened");
} 
```

当我调试应用程序时，我清楚地看到`Temp`正在调用的方法和引发的异常。但由于某种原因，仅此而已。应用程序不受影响，我的异常捕获代码不知道该异常。

我以两种方式捕获异常。首先是通过处理以下事件`Dispatcher`：

```
<Application x:Class="MyApp"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml"
             DispatcherUnhandledException="App_DispatcherUnhandledException"> 
```

代码隐藏的地方如下：

```
private void App_DispatcherUnhandledException(object sender, DispatcherUnhandledExceptionEventArgs e)
{
    Log("Exception: " + e.Exception.Message);
    e.Handled = true;
}
public static void Log(string message)
{
    File.AppendAllText(@"D:\Temp\log.txt", "[" + DateTime.Now.ToString("F") + "] [" + System.Threading.Thread.CurrentThread.ManagedThreadId.ToString() + "] " + message + Environment.NewLine);
} 
```

此代码捕获一些异常，但不是全部。我发现 WPF 默认情况下会抑制数据绑定异常。因为我的 ViewModel 是通过`DataContext`我的视图上的属性来限制的，所以我认为这就是问题所在。我找到[了这篇文章](http://tech.pro/tutorial/940/wpf-snippet-detecting-binding-errors)，它定义了一个`TraceListener`使用`PresentationTraceSources`该类的。数据绑定异常现在被捕获，但是......不是通过 MessageBus 执行的代码中抛出的异常。

我创建了一个演示此行为的解决方案，可以在[此处](http://sdrv.ms/11xXVPe)下载。

这就是我卡住的地方。我错过了什么？我如何捕捉这些异常？

提前非常感谢。

J.P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T13:27:41.650

我认为这是在 SimpleMVVM中实现[MessageBus](http://simplemvvmtoolkit.codeplex.com/SourceControl/changeset/view/23821#313594)的错误或问题。

由于多个订阅者可以订阅一个令牌，当前的实现确保每个订阅的方法都被调用，即使一个注册的方法抛出异常。在这种情况下，异常会被捕获并写入控制台。

负责调用订阅方法的方法是 SafeNotify

```
private void SafeNotify(Action method, bool post) {
  try {
    // Fire the event on the UI thread
    if (post){
      if (Dispatcher.CheckAccess()){
        method();
      }
      else{
        Dispatcher.BeginInvoke(method);
      }
    }
    // Fire event on a ThreadPool thread
    else{
      ThreadPool.QueueUserWorkItem(o => method(), null);
    }
  }
  catch (Exception ex){
    // If there's an exception write it to the Output window
    Debug.WriteLine(ex.ToString());
  }
} 
```

当方法调用在 ThreadPool 中排队时，您没有机会处理抛出的异常。另请参阅[此帖子](https://stackoverflow.com/questions/753841/how-to-catch-exceptions-from-a-threadpool-queueuserworkitem)以获取更多信息。

您唯一的选择是确保您自己注册的方法的代码始终被 try-catch-block 包围。

# c# - 创建具有可变字段的匿名类型？

> ID：14794010
> 
> 赞同：4
> 
> 时间：2013-02-10T02:19:32.807
> 
> 标签：c#, anonymous-types

我可以使用以下内容轻松创建一个匿名类。但是我不能写信给它。有没有办法可以写给某种未命名的类？

```
var test = new { a = 5, b = "sz" };
test.a++; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T02:26:07.780

这对于匿名类型是不可能的，因为匿名类的属性是只读的。至于为什么，你可以在这里阅读：

[为什么 C# 中匿名类型的属性是只读的？](https://stackoverflow.com/questions/1089406/why-are-the-properties-of-anonymous-types-in-c-sharp-read-only)

# mysql - 为什么查询一旦放入存储过程会给出不同的结果？

> ID：14794011
> 
> 赞同：1
> 
> 时间：2013-02-10T02:19:34.853
> 
> 标签：mysql, sql

我已阅读下面列出的几篇文章，试图找到我的问题的答案。他们似乎都有同样的问题。

我看到了[这个，](https://stackoverflow.com/questions/3153873/sql-query-and-stored-procedure-not-producing-desired-results)但我在 MySQL 文档中读到，默认情况下所有过程都是非确定性的。

[这](https://stackoverflow.com/questions/4502416/why-does-this-query-return-different-results-when-in-a-stored-procedure)与我的问题没有任何关系，因为它的 SQL Server（不是 MySQL）。

这是我用来创建程序的查询：

```
CREATE PROCEDURE getcusbyzip(zipcode VARCHAR(30),radius VARCHAR(30))
SELECT C.CustomerName, C.MenuId
FROM Customers C
INNER JOIN (

SELECT ZIPCODE, ( 3959 * ACOS( COS( RADIANS( (

SELECT Z.LAT
FROM ZipCodes Z
WHERE Z.ZIPCODE =zipcode
LIMIT 0 , 1
) ) ) * COS( RADIANS( LAT ) ) * COS( RADIANS( LNG ) - RADIANS( (

SELECT Z.LNG
FROM ZipCodes Z
WHERE Z.ZIPCODE =zipcode
LIMIT 0 , 1
) ) ) + SIN( RADIANS( (

SELECT Z.LAT
FROM ZipCodes Z
WHERE Z.ZIPCODE =zipcode
LIMIT 0 , 1
) ) ) * SIN( RADIANS( LAT ) ) ) ) AS distance
FROM ZipCodes
HAVING distance <radius
ORDER BY distance
LIMIT 0 , 20
) AS RelevantCodes ON ( C.ZIPCODE = RelevantCodes.ZIPCODE ) 
```

现在，如果我在该查询之后运行此查询：

```
CALL getcusbyzip(08360,50) 
```

我得到零行返回。但是，如果我在过程中运行完全相同的语句作为查询并将参数放入如下：

```
SELECT C.CustomerName, C.MenuId
FROM Customers C
INNER JOIN (

SELECT ZIPCODE, ( 3959 * ACOS( COS( RADIANS( (

SELECT Z.LAT
FROM ZipCodes Z
WHERE Z.ZIPCODE =08360
LIMIT 0 , 1
) ) ) * COS( RADIANS( LAT ) ) * COS( RADIANS( LNG ) - RADIANS( (

SELECT Z.LNG
FROM ZipCodes Z
WHERE Z.ZIPCODE =08360
LIMIT 0 , 1
) ) ) + SIN( RADIANS( (

SELECT Z.LAT
FROM ZipCodes Z
WHERE Z.ZIPCODE =08360
LIMIT 0 , 1
) ) ) * SIN( RADIANS( LAT ) ) ) ) AS distance
FROM ZipCodes
HAVING distance <50
ORDER BY distance
LIMIT 0 , 20
) AS RelevantCodes ON ( C.ZIPCODE = RelevantCodes.ZIPCODE ) 
```

我得到了我想要的。答案应该只有一排，但为什么结果会在不在程序中时出现在我面前，但是当我将其放入其中时，它不会给我这一排。

我想可能是因为我没有 BEGIN 和 END，但是当我将它放在创建行之后和最后一行之后，它无法生成过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:57:39.750

您的示例代码和存储过程代码彼此相差太大。

为了确定您的问题，您需要执行以下操作

**在示例代码的顶部（不是 SP）**

*   声明一个名为 zipcode 的变量，类型为 varchar(30)
*   声明一个类型为 varchar(30) 的名为 radius 的变量

然后，将示例代码的其余部分修改为与存储过程完全相同。

您将能够使用此方法确定确切的问题。

正如评论中提到的，这可能是由于滥用 varchars 被转换为数字。

**概括**

在示例代码的顶部声明并设置变量，以便示例的其余部分与您的存储过程完全相同。然后你就可以开始识别问题了。

# java - 使用意图启动音乐播放器

> ID：14794016
> 
> 赞同：0
> 
> 时间：2013-02-10T02:20:25.273
> 
> 标签：java, android, android-intent

我试图启动音乐播放器，但它不起作用。

```
Intent intent = new Intent(MediaStore.INTENT_ACTION_MUSIC_PLAYER);
startActivity(intent); 
```

该应用程序崩溃了，它应该很简单，但我不知道为什么它不起作用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T03:22:25.193

它可能会引发 ActivityNotFoundException。正确的？

API 级别 15 (ICS MR1) 中已弃用该意图。

而且我猜你的手机制造商在音乐应用程序中错过了这个意图。

请改用[http://developer.android.com/reference/android/content/Intent.html#CATEGORY_APP_MUSIC](http://developer.android.com/reference/android/content/Intent.html#CATEGORY_APP_MUSIC)。

# javascript - jQuery单击处理程序不起作用

> ID：14794018
> 
> 赞同：0
> 
> 时间：2013-02-10T02:20:42.293
> 
> 标签：javascript, jquery, html, onclick

我无法使用以下功能。

单击 .image 类时，将替换 3 个 div（图库文本、图像和缩略图集）中的内容。我一直在努力让它工作好几天，但我无法弄清楚我做错了什么。

我的代码：

```
 // Init load 
  $(document).ready(function() {
        var $doc = $(document.body);

        var text = $('#gallerytext1').html();  //blank divs are filled with content on page load 
        $('#gallerytext').html(text);
        var thumbset = $('#thumbset1').html();
        $('#thumbset').html(thumbset);  
        $('#image').html('<img src="images/edwards1.jpg" border="0"/>');

    //click handler
       $doc.on("click",".image",function(){

        var image=$(".image").attr("rel"); 
        var imid=$(".image").attr("data");
        var text=$('#gallerytext'+imid).html();
        var thumbset=('#thumbset'+imid).html();

        $('#debug').html(imid);

        $('#gallerytext').fadeIn('slow');
        $('#gallerytext').html(text);
        $('#thumbset').fadeIn('slow');
        $('#thumbset').html(thumbset);
        $('#image').hide();                 
        $('#image').fadeIn('slow');
        $('#image').html('<img src="' + image + '"/>');
        return false;

      });
  }); 
```

初始内容加载得很好，但我无法让点击处理程序工作。具有 .image 类的对象的格式如下：

```
<a href="#" rel="images/edwards2.jpg" data="1" class="image image2"><img src="images/edwardsthumb2.jpg" class="thumb" border="0"/></a> 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T02:23:53.693

这些可能是您有问题的行：

```
var image=$(".image").attr("rel"); 
var imid=$(".image").attr("data"); 
```

`$(".image")`选择*所有*具有 . 类的元素`image`。你只想要被点击的那个，所以用`this`它来引用它：

```
var image = $(this).attr("rel"); 
var imid = $(this).attr("data"); 
```

另外，不要组成自定义属性，例如`data`. HTML5 引入了`data-`用于存储自定义数据类型的属性，因此请使用它们：

```
data-number="1" 
```

您可以使用以下`.data()`方法访问它：

```
var imid = $(this).data('number'); 
```

# c# - 检查动态对象是否具有 Foo 的基础

> ID：14794021
> 
> 赞同：1
> 
> 时间：2013-02-10T02:21:19.623
> 
> 标签：c#, reflection

我们有这两个类

```
class Foo{
    public Foo(){}
}

class FooBar : Foo{
    public FooBar : base() {}
} 
```

我知道您可以查看动态对象的类型是否类似于

```
dynamic bar = new FooBar();
bool isType = bar is FooBar; 
```

但是如何检查 bar 是否为 foo 类型？

如在

```
dynamic bar = new FooBar();
//This would need to check the base as well
bool isType = bar is Foo; 
```

或者这已经奏效了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T02:27:36.133

是的，那已经可以了。`is`只需检查对象是否可以转换为给定类型。[在此处](http://msdn.microsoft.com/en-us/library/scekt9xw%28v=vs.71%29.aspx)查看有关它的文档。

# sql - 从第二个表中存在匹配项的表中删除行

> ID：14794028
> 
> 赞同：23
> 
> 时间：2013-02-10T02:22:11.947
> 
> 标签：sql, sqlite

我有具有以下值的表 A：

```

+------+------+
| ID1 | ID2 |
+------+------+
| 1689 | 1709 |
| 1709 | 1689 |
| 1782 | 1709 |
| 1911 | 第1247章
| 第1247章 1468 |
| 1641 | 1468 |
| 1316 | 第1304章
| 1501 | 1934 |
| 1934 | 1501 |
| 1025 | 1101 |
+------+------+

```

以及具有以下值的另一个关系（表 B）：

```
+------+------+
| ID1 | ID2 |
+------+------+
| 1641 | 1468 |
| 1911 | 第1247章
+------+------+

```

我想删除表 A 中出现在表 B 中的所有行（与 ID1 和 ID2 完全匹配）。理论上看起来很简单，但我对 EXISTS 语句或其他方法并不满意。我正在使用 SQLite。

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-02-10T02:27:55.820

怎么样：（不太确定这是否适用于 SQLite）

```
DELETE FROM TableA
WHERE EXISTS (SELECT *
              FROM TableB
              WHERE TableB.ID1 = TableA.ID1
                AND TableB.ID2 = TableA.ID2) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-02T04:55:05.250

```
DELETE a FROM TableA a INNER JOIN TableB b ON a.ID1=b.ID1 AND a.ID2=b.ID2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-01T16:40:14.663

在 MSSQL 中，您可以这样做：（最有效）

从 a.ID1 = b.ID1 和 a.ID2 = b.ID2 的连接 b 中删除 a

# scheme - 键入球拍中的本地定义用法

> ID：14794031
> 
> 赞同：1
> 
> 时间：2013-02-10T02:22:22.350
> 
> 标签：scheme, racket, typed-racket

我很难弄清楚如何在 Typed Racket 中使用本地表单。

这有什么问题：

```
(: make-random-emetype-list (Range -> (Listof EmeType)))
(define (make-random-emetype-list range )
 (local ([define how-many-types (random-integer (Range-lower range) (Range-upper range))]
         [define: (bld-lst  lst remaining)  : ((Listof EmeType) Integer -> (Listof EmeType))
           (cond [(< remaining 1) lst]
                 [else (bld-lst (cons (new-emetype) lst) (- remaining 1))])])          
(bld-lst '() how-many-types))) 
```

我确定问题在于我没有完全遵循 ts-reference 中的语法规范，但是在类型化的球拍中有一两个本地定义的函数的示例会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T04:09:28.400

答案是，使用 letrec:。嗯，现在我知道了。

```
(: make-random-emetype-list (Range -> (Listof EmeType)))
(define (make-random-emetype-list range )
  (letrec: ([lower : Integer (Range-lower range)]
        [upper : Integer (Range-upper range)]
        [how-many : Integer (random-integer lower upper)]
        [bld-lst : (Integer (Listof EmeType) -> (Listof EmeType)) (lambda: ([remaining : Integer] [lst : (Listof EmeType)]) 
                                                                    (cond [(< remaining 1 ) lst]
                                                                          [else (bld-lst (- remaining 1) (cons (new-emetype) lst))]))])
    (bld-lst how-many '()))) 
```

# php - 如果 url 中没有变量，有什么方法可以重定向 php 页面？

> ID：14794036
> 
> 赞同：1
> 
> 时间：2013-02-10T02:23:08.613
> 
> 标签：php

我正在尝试做一些非常简单的事情，但我想不出办法。基本上我有一个 PHP 页面，它被称为

```
file.php?details=100 
```

或者

```
file.php?details=100&page=2 
```

等等

问题是......我希望页面在被调用时被重定向到 index.php：

```
file.php 
```

我该怎么做？基本上如果请求中没有变量，它应该重定向到 index.php。如果请求中有任何变量，它应该正常加载。

谢谢你的任何建议:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T02:29:40.020

考虑`$page`是重定向页面：

```
if (empty($_GET)) { header('Location: '.$page); exit; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T02:29:45.957

在 file.php 的开头有：

```
<?php
if (!isset($GET_[`details`]))
{
   header("Location: index.php");
   exit(0);
}

... rest of code here 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T02:30:50.417

您可以像这样在 PHP 文件中执行此操作：

```
if(count($_GET) < 1) {
    location('Header: index.php');
} 
```

或者在一个`.htaccess`文件中做这样的事情：

```
RewriteCond %{QUERY_STRING} ^$
RewriteRule page\.php index.php 
```

I'm writing the above from memory, I can't guarantee that it works literally. Play around with it. I'd recommend the `.htaccess` solution for performance reasons - it doesn't have to execute any PHP code to redirect.

# php - $.ajax 问题 - 未捕获的类型错误：非法调用

> ID：14794037
> 
> 赞同：1
> 
> 时间：2013-02-10T02:23:11.850
> 
> 标签：php, jquery

嘿伙计们，我有以下几点：

```
function sendUserfNotes()
    {
        $.ajax({
        type: "POST",
        url: '/pcg/popups/grabnotes.php',
        data:
        {
            'nameNotes': notes_name,
        },
        success: function() {

             }
    });
    } 
```

我正在尝试将值 - notes_name 发送到 .php 文件，以便我可以使用 GET[''] 但我收到一个奇怪的错误 -`Uncaught TypeError: Illegal invocation`

notes_name 根据是否单击链接在脚本底部定义

代码：

```
$(document).ready(function () {
    $(".NotesAccessor").click(function () {
        notes_name = $(this).parent().parent().find(".user_table");
      run();
    });
    }); 
```

run() 在 Jquery ui 中触发一个对话框，并在我收到错误的地方运行这个函数。

我不知道为什么我会得到这个？

大卫

更新：

我认为这是将 JavaScript 值定义为“nameNotes”：notes_name 是在此代码之后定义的，但这无关紧要。那么如何将 JavaScript 变量分配给它呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T02:30:32.530

这是因为您将 jQuery 对象分配给`notes_name`，而不是字符串（或其他一些基本类型，如 int）。这会导致`$.ajax`调用失败。根据`.user_table`元素包含的内容，使用`.value()`或`.text()`（或类似的东西）来提取所需的字符串，而不是使用 jQuery 对象。

# php - PHP 或简单 HTML 中的 DropTile

> ID：14794044
> 
> 赞同：1
> 
> 时间：2013-02-10T02:24:44.613
> 
> 标签：php, jquery, asp.net, html, .net

像窗口 8 磁贴这样的功能现在非常流行。Drop 磁贴允许使用这样的功能。无论如何，有没有 PHP 或 HTML 中的 droptiles.com 之类的网站。Idid 很多谷歌搜索但徒劳无功。任何人以前用过这样的东西

**我怎样才能得到这个网站的onclick JS？** 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T02:34:44.510

你的问题有点宽泛，有很多方法可以实现这一点。但是，PHP 不是与此相关的语言，因为 PHP 只是服务器端，不能用于更改客户端发生的事情。要实现这一点，您需要使用 JavaScript。如果您不了解 JavaScript，[http:](http://codecademy.com) //codecademy.com 将是一个学习它的好地方，或者您可以只搜索 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T11:28:31.853

回答**如何获得该站点的 onclick JS？**

获得他们的代码将非常困难，因为他们是用自己的概念制作的。即使您能够编写他们的 js 代码，也很难根据您的需要编写代码。所以最好尝试用您自己的想象力。尝试学习高级javascript或尝试jquery（与js相比会容易）。

祝你好运！！！

# java - 即使使用同步关键字，线程输出也不一致

> ID：14794052
> 
> 赞同：0
> 
> 时间：2013-02-10T02:25:41.240
> 
> 标签：java, multithreading, synchronization, thread-safety

我对线程很陌生。我写了一个代码，并期望我的输出始终为 20000。但事实并非如此。请在下面找到代码：

```
class Runner4 implements Runnable {

    static int count = 0;

    public synchronized void increase() {
        count++;
    }

    @Override
    public void run() {
        for (int i = 0; i < 10000; i++) {
            increase();
        }
    }
}

public class threading4 {

    public static void main(String[] args) {

        Thread t1 = new Thread(new Runner4());
        t1.start();
        Thread t2 = new Thread(new Runner4());
        t2.start();
        try {
            t1.join();
            t2.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        System.out.println(Runner4.count);
    }
} 
```

有什么解释吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:36:24.590

您正在同步代码中的两个不同对象（对应于您创建的两个对象）。因此，没有对共享静态变量的保护，并且您会得到不可预测的结果。基本上，您的程序中没有进行有效的同步。您可以通过简单的修改来解决此问题。

改变：

```
public synchronized void increase(){
    count++;
} 
```

至：

```
public void increase(){
    synchronized(Runner4.class) {
        count++;
    }
} 
```

请注意，我并不是说这是完成这种同步的最佳方式 - 但重要的一点是，如果您正在修改类级别的变量，您也需要类级别的同步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:35:55.840

`count`如果不是，您的代码将起作用`static`。

```
public synchronized void increase() {
    // method body
} 
```

相当于

```
public void increase() {
    synchronized(this) {
        // method body
    }
} 
```

由于`count`is `static`，`t1`和`t2`都使用不同的锁访问它，从而导致不确定的行为。要么`Runner4.increase`在一个普通锁上同步（`Runner4.class`或者一个`private static`锁对象可以正常工作），要么`count`是非静态的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T02:42:44.367

你试图实现你想要的方式并不是最好的方式。更好的方法是定义一个名为 Counter 的类，如下所示：

```
public class Counter 
{
    int count;
    public Counter()
    {
        count = 0;
    }
    public synchronized void increase() {
        count++;
    }

    public int getCount()
    {
        return count;
    }

} 
```

该类具有增加和获取计数器的方法。您现在需要做的是让两个调用 increase() 方法的线程共享一个 Counter 对象。所以你的线程类看起来像这样：

```
class Runner4 extends Thread {

    Counter count;
    public Runner4(Counter c)
    {
        count = c;
    }

    @Override
    public void run() {
        for (int i = 0; i < 10000; i++) {
            count.increase();
        }

    }
} 
```

请注意，该类接受一个 Counter 对象并调用 increase 方法。该类还扩展了 Thread 而不是实现 Runnable。真的没有太大区别，只是现在你的Runner4可以使用Thread类的方法了。

从您的 main 定义一个 Counter 对象和两个 Runner4 线程，然后将 Counter 对象传递给它们中的每一个：

```
public static void main(String[] args) {

        Counter count = new Counter();
        Thread t1 = new Runner4(count);
        t1.start();
        Thread t2 = new Runner4(count);
        t2.start();
        try {
            t1.join();
            t2.join();
        } catch (InterruptedException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        System.out.println(count.getCount());
    } 
```

# graph - 在D3中力导向布局图的节点上放置饼图

> ID：14794055
> 
> 赞同：6
> 
> 时间：2013-02-10T02:26:16.603
> 
> 标签：graph, d3.js, pie-chart, force-layout

我想使用 D3.js 在 D3 强制定向布局图的节点上放置饼图。这是种群遗传学中​​常见的可视化，例如参见[http://mathildasanthropologyblog.files.wordpress.com/2008/06/as3.jpg](http://mathildasanthropologyblog.files.wordpress.com/2008/06/as3.jpg)

![在此处输入图像描述](../Images/eb433f368d08263267b111cfb7fccef2.png)

我从一个非常基本的图表开始：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <script type="text/javascript" src="d3/d3.v3.js"></script>
    </head>
    <body>
        <script type="text/javascript">

graph = { "nodes":[{"proportions": [{"group": 1, "value": 1}, 
                                    {"group": 2, "value": 2}, 
                                    {"group": 3, "value": 3}]},
                   {"proportions": [{"group": 1, "value": 2}, 
                                    {"group": 2, "value": 2}, 
                                    {"group": 3, "value": 2}]}],
          "links":[{"source": 0, "target": 1, "length": 500, "width": 1}]
        }

var width = 960,
    height = 500,
    radius = 10,
    color = d3.scale.category20c();

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

var force = d3.layout.force()
    .charge(-120)
    .size([width, height]);

force
    .nodes(graph.nodes)
    .links(graph.links)
    .start();

var link = svg.selectAll(".link")
    .data(graph.links)
  .enter().append("line")
    .attr("class", "link");

var node = svg.selectAll(".node")
    .data(graph.nodes)
  .enter().append("circle")
    .attr("class", "node")
    .attr("r", radius)
    .call(force.drag);

force.on("tick", function() {
  link.attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });

  node.attr("cx", function(d) { return d.x; })
      .attr("cy", function(d) { return d.y; });
});
        </script>
    </body>
</html> 
```

但是当我尝试用饼图替换圆形节点时，饼图最终都堆积在图的角落。

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <script type="text/javascript" src="d3/d3.v3.js"></script>
    </head>
    <body>
        <script type="text/javascript">

graph = { "nodes":[{"proportions": [{"group": 1, "value": 1}, 
                                    {"group": 2, "value": 2}, 
                                    {"group": 3, "value": 3}]},
                   {"proportions": [{"group": 1, "value": 2}, 
                                    {"group": 2, "value": 2}, 
                                    {"group": 3, "value": 2}]}],
          "links":[{"source": 0, "target": 1, "length": 500, "width": 1}]
        }

var width = 960,
    height = 500,
    radius = 10,
    color = d3.scale.category20c();

var pie = d3.layout.pie()
    .sort(null)
    .value(function(d) { return d.value; });

var arc = d3.svg.arc()
    .outerRadius(radius)
    .innerRadius(0);

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

var force = d3.layout.force()
    .charge(-120)
    .size([width, height]);

force
    .nodes(graph.nodes)
    .links(graph.links)
    .start();

var link = svg.selectAll(".link")
    .data(graph.links)
  .enter().append("line")
    .attr("class", "link");

var node = svg.selectAll(".node")
    .data(graph.nodes)
  .enter().append("g")
   .attr("class", "node");

node.selectAll("path")
  .data(function(d) {return pie(d.proportions); })
 .enter().append("svg:path")
  .attr("d", arc)
  .style("fill", function(d) { return color(d.group); });;

force.on("tick", function() {
  link.attr("x1", function(d) { return d.source.x; })
      .attr("y1", function(d) { return d.source.y; })
      .attr("x2", function(d) { return d.target.x; })
      .attr("y2", function(d) { return d.target.y; });

  node.attr("x", function(d) { return d.x; })
      .attr("y", function(d) { return d.y; });
});
        </script>
    </body>
</html> 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T03:24:29.420

问题似乎是您的 force-on-tick 回调中的最后一条语句：

```
node.attr("x", function(d) { return d.x; })
    .attr("y", function(d) { return d.y; }); 
```

SVG 路径没有这样的 x/y 属性。尝试转换路径：

```
node.attr('transform', function(d) { return 'translate(' + d.x + ',' + d.y + ')'; }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-11T20:38:56.213

上面的代码不起作用，下面的代码片段在正确的位置显示两个饼图，边缘可见，饼图颜色：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>

    <style>

        .node {
            stroke: #fff;
            stroke-width: 1.5px;
        }

        .link {
            stroke: #808080;
            stroke-opacity: .6;
        }

    </style>
</head>
<body>

<script type="text/javascript">

    graph = { "nodes":[
                    {"proportions": [{"group": 1, "value": 1},
                                     {"group": 2, "value": 2},
                                     {"group": 3, "value": 3}]},
                    {"proportions": [{"group": 1, "value": 2},
                                     {"group": 2, "value": 2},
                                     {"group": 3, "value": 2}]}],
              "links":[{"source": 0, "target": 1, "length": 500, "width": 1}]
    }

    var width = 960,
    height = 500,
    radius = 25,
    color = d3.scale.category10();

    var pie = d3.layout.pie()
        .sort(null)
        .value(function(d) { return d.value; });

    var arc = d3.svg.arc()
        .outerRadius(radius)
        .innerRadius(0);

    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height);

    var force = d3.layout.force()
        .charge(-120)
        .linkDistance(4 * radius)
        .size([width, height]);

    force.nodes(graph.nodes)
         .links(graph.links)
         .start();

    var link = svg.selectAll(".link")
        .data(graph.links)
        .enter().append("line")
        .attr("class", "link");

    var node = svg.selectAll(".node")
        .data(graph.nodes)
        .enter().append("g")
        .attr("class", "node");

    node.selectAll("path")
        .data(function(d, i) {return pie(d.proportions); })
        .enter()
        .append("svg:path")
        .attr("d", arc)
        .attr("fill", function(d, i) { return color(d.data.group); });;

    force.on("tick", function() {
        link.attr("x1", function(d) { return d.source.x; })
        .attr("y1", function(d) { return d.source.y; })
        .attr("x2", function(d) { return d.target.x; })
        .attr("y2", function(d) { return d.target.y; });

        node.attr("x", function(d) { return d.x; })
            .attr("y", function(d) { return d.y; })
            .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"});
    });
</script>
</body>
</html> 
```

# mysql - 编写一个将时间戳转换为日期并添加小时数的查询

> ID：14794057
> 
> 赞同：2
> 
> 时间：2013-02-10T02:26:59.463
> 
> 标签：mysql, time, timezone, timestamp

我希望有人可以帮助我。我的 sql 和编程知识非常初级。

我写了一个看起来像这样的查询。

```
SELECT FROM_UNIXTIME(EventStartDate)                     
FROM mytable 
```

这可以满足我的需要 - 将时间戳转换为可读日期，但时间是 5 小时。我想我的时间戳是格林威治标准时间，我在 -5:00。有没有办法写这个增加 5 小时以及转换为可读日期？

我很感激我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:42:03.690

尝试这个：

```
SELECT DATE_FORMAT(CAST(EventStartDate AS datetime), '%Y %M %D')  AS Date FROM mytable;

SELECT DATE_FORMAT(CAST(EventStartDate AS datetime), '%Y %m %d') AS Date FROM mytable;

SELECT DATE_FORMAT(CONVERT_TZ(EventStartDate,'+00:00','-05:00'),'%Y %m %d') AS Date FROM mytable;

SELECT DATE_FORMAT(CONVERT_TZ(EventStartDate,'+00:00','-05:00'),'%Y %M %D') AS Date FROM mytable;

-- with time

SELECT DATE_FORMAT(CAST(EventStartDate AS datetime), '%Y %M %D %h:%i:%s') AS Date_time FROM mytable;

SELECT DATE_FORMAT(CAST(EventStartDate AS datetime), '%Y-%m-%d %h:%i:%s') AS Date_time FROM mytable;

SELECT DATE_FORMAT(CONVERT_TZ(EventStartDate,'+00:00','-05:00'),'%Y-%m-%d %h:%i:%s') AS Date_time FROM mytable;

SELECT DATE_FORMAT(CONVERT_TZ(EventStartDate,'+00:00','-05:00'),'%Y %M %D %h:%i:%s') AS Date_time FROM mytable; 
```

可读格式有些不具体，所以我尝试了一些您可能喜欢的格式。你甚至可能使用不同的语言，所以这很难回答。例如，您可以使用`SET lc_time_names = 'es_ES';SELECT DATE_FORMAT(CONVERT_TZ(EventStartDate,'+00:00','-05:00'),'%Y %M %D') FROM mytable;`西班牙语获取您的日期（[PHP/MySQLi: SET lc_time_names and DATE_FORMAT() into a mysqli query?](https://stackoverflow.com/questions/769060/php-mysqli-set-lc-time-names-and-date-format-into-a-mysqli-query)）。或者，如果您使用 PHP，您可以使用它以您自己的语言重新格式化。

[SQL 小提琴演示](http://www.sqlfiddle.com/#!2/d3762/50)

在您的标题中，您说您需要将时间戳转换为日期。但是，您使用 from_unixtime 所以我的印象是您可能使用 VARCHAR 或 INT 作为列类型。在这种情况下，你应该试试这个：

```
SELECT CONVERT_TZ(FROM_UNIXTIME(EventStartDate_INT),'+00:00','-05:00') AS Date_time FROM mytable;

SELECT CONVERT_TZ(FROM_UNIXTIME(EventStartDate_VARCHAR),'+00:00','-05:00') AS Date_time FROM mytable;

SELECT date_format(CONVERT_TZ(FROM_UNIXTIME(EventStartDate_INT),'+00:00','-05:00'),'%Y-%m-%d %h:%i:%s') AS Date_time FROM mytable;

SELECT date_format(CONVERT_TZ(FROM_UNIXTIME(EventStartDate_VARCHAR),'+00:00','-05:00'), '%Y-%m-%d %h:%i:%s') AS Date_time FROM mytable; 
```

[SQL 小提琴演示](http://www.sqlfiddle.com/#!2/23e04/19)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:45:28.080

根据[此页面](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-add "MySQL 日期和时间函数")，您应该能够将 5 小时添加到日期，如下所示：

```
SELECT FROM_UNIXTIME(EventStartDate) + INTERVAL 5 HOUR FROM mytable ; 
```

或者

```
SELECT DATE_ADD(FROM_UNIXTIME(EventStartDate), INTERVAL 5 HOUR) FROM mytable ; 
```

# javascript - jQuery：在事件之后包含外部脚本

> ID：14794059
> 
> 赞同：1
> 
> 时间：2013-02-10T02:27:11.847
> 
> 标签：javascript, jquery

我希望能够仅在某个 jQuery 事件之后包含外部 jQuery 脚本，例如，在淡入之后，如下所示：

```
<script type="text/javascript">
$(window).load(function() {
      $('body').fadeIn(300, function() {

          // Include http://www.mydomain.com/js/myscript.js

});
}); 
</script> 
```

这样的事情可能吗？或者，如果没有，也许有一种方法可以激活已经包含但保持“休眠”的脚本？

我会感谢专家的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T02:29:01.240

jQuery 有一个 AJAX 方法`$.getScript`

[http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

```
$.getScript('http://www.mydomain.com/js/myscript.js',function(){
    /* new script has already run, can call additional code here if needed*/
}) 
```

# java - 使用 Java Mail API 从 eml 文件中读取附件时出错

> ID：14794067
> 
> 赞同：0
> 
> 时间：2013-02-10T02:28:23.557
> 
> 标签：java, email, base64, jakarta-mail, eml

将 .eml 文件转换为 MimeMessages 并将附件和内联图像保存到文件的代码：

```
 // fileList contains paths to eml files    
           for (File file : fileList) {
                MimeMessage mail = Utility.mailFromFile(file);
                if (mail == null) {
                    os.println("Error: " + file.getAbsolutePath()
                            + " has an unsupported format.");
                    continue;
                }
                try {
                    MimeBodyPart bPart = (MimeBodyPart) content.getBodyPart(i);
                    for (int i = 0; i < content.getCount(); i++) {
                        BodyPart bPart = content.getBodyPart(i);
                                        // sort out messages but include inline images
                        if (bPart.getFileName() == null) {
                            continue;
                        }
                                        String savePath = outputDirectory.getAbsolutePath() + "\\" + bPart.getFileName();
                        File f = new File(savePath);
                                            // generate new file name in case file already exists
                        f = Utility.getSaveFile(f);
                        bPart.saveFile(f);
                    }
                } catch (Exception ex) {
                    os.println("Error: " + ex.getMessage());
                    continue;
                }
            } 
```

这适用于大多数 eml 文件，但有时我会遇到以下异常：

```
Error: BASE64Decoder: Error in encoded stream: needed 4 valid base64 characters but only got 2 before EOF, the 10 most recent characters were: "GJMIX5FF\r\n" 
```

并且保存的文件是空的。eml 文件由 Mozilla Thunderbird 生成。如何防止发生此异常？附件肯定存在并且有效的电影/图像文件。

编辑：现在使用 saveFile 方法。

编辑：似乎文件确实缺少某些部分。所以发送或下载邮件时出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T08:40:02.810

我需要查看整个消息以查看是否真的存在 base64 编码错误。

您使用的是什么版本的 JavaMail？在旧版本中，这方面存在一些错误。

您的代码中有一个严重错误，可能与您看到的错误有关，也可能无关。如[Part.getSize 方法的 javadocs 中所述](http://javamail.kenai.com/nonav/javadocs/javax/mail/Part.html#getSize%28%29)，它可能不会返回部件的确切大小。您应该从 InputStream 中读取数据，直到 EOF。或者更好的是，使用[MimeBodyPart.saveFile 方法](http://javamail.kenai.com/nonav/javadocs/javax/mail/internet/MimeBodyPart.html#saveFile%28java.io.File%29)。

# php - 从当前日期起的特定天数内从 sql db 检索条目的函数

> ID：14794068
> 
> 赞同：-1
> 
> 时间：2013-02-10T02:28:32.330
> 
> 标签：php, sql

我正在编写一个函数，该函数检索从当前日期开始的指定日期范围内的四个特定列之一中的所有条目。IE。这些列包含到期日期，我希望能够显示从当前日期起 30、60、90 天内到期的条目。我在正确处理它时遇到了一些麻烦，您可以提供任何帮助，我将不胜感激。另外请不要给我准备好的语句和 PDO 讲座，我很清楚它和它的必要性，但这不是用于外部消耗，所以 sql 注入不是问题，过度复杂化对我来说会适得其反.

这是我到目前为止所拥有的。

```
// list_entries_set function lists all entries expiring in the next $days
function list_entries($days) {
    if(!$days) $days = "365";

    $today = date('Y-m-d');
    $end_day = strtotime(date("Y-m-d", strtotime($end_day)) . " + '.$days.'day");

    db_connect();

    $orderby = $_GET["orderby"];
    $sql = mysql_query("SELECT * FROM table WHERE column BETWEEN ".$today." AND ".$end_day."  ORDER BY ".$orderby);

    while($row = mysql_fetch_array($sql)) {
        echo "table outputs : purged because it's irrelevant and lengthy";
    }

    echo "</table>";
    db_disconnect();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:00:34.687

```
SELECT * FROM table WHERE column BETWEEN NOW() AND NOW() + INTERVAL :duration DAY LIMIT ORDER BY :order; 
```

使用准备好的支持语句的引擎来解析占位符。`ext/mysql`不再是一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T03:57:10.107

从当前日期起 30、60 或 90 天内过期的条目的 sql 将是这样的；

```
select item
, case when datediff(expiry_date, current_date) <= 30 then 'within 30'
when datediff(expiry_date, current_date) <= 60 then 'within 60'
else 'within 90'
end whatever_you_want_to_call_this
from your_tables_joining_if_necessary
where expiry_date >= current_date
and expiry_date < date_add(current_date, 91, days) 
```

mysql 的语法可能不正确。我不使用它，只是在看手册。

# macos - dispatch_once 每个应用程序加载或应用程序生命周期？

> ID：14794070
> 
> 赞同：1
> 
> 时间：2013-02-10T02:28:52.083
> 
> 标签：macos

我读过它`dispatch_once`在应用程序的整个生命周期内只执行一次。这是否意味着当您关闭应用程序并重新启动时，该功能将不会再次执行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T04:40:54.903

这意味着每个进程一次。如果您退出应用程序并重新启动它并调用它的代码`dispatch_once()`，则执行该块。

# jpeg - 如何编写 JFIF 文件？

> ID：14794071
> 
> 赞同：3
> 
> 时间：2013-02-10T02:28:54.593
> 
> 标签：jpeg

我正在开发一个 C++ 项目，在该项目中我必须以 JPEG 格式压缩位图数据，并将普通图像查看器可以打开的 .jpg 文件作为输出写入。我不能使用任何类型的库。

所有的 JPEG 压缩都完成了，我唯一缺少的是如何正确地在文件中写入内容。

我已经查看了 JFIF 格式文件规范，并搜索了很多，但无法弄清楚如何去做。

更详细地说，我应该在文件中正确放置所有标题，我真正想念的是，在我准备好编写 3 个颜色组件之后，我该怎么做？（按什么顺序编写组件，如何处理子采样组件（还有其他东西吗？））

编辑：

链接到示例输出图像（从随机生成的 8x8 RGB 位图开始）。

[https://dl.dropbox.com/u/46024798/out.jpg](https://dl.dropbox.com/u/46024798/out.jpg)

图像的标题（应该）指定这是一个 JPEG 8x8px，具有 3 个颜色分量，子采样率为 4:4:4。

更详细地说，我所做的是：

*   生成 3 个随机 8x8 块，值在 [0..255] 范围内
*   所有元素减去 128（现在在 [-128..127] 范围内）
*   将离散余烯变换应用于 3 个块
*   量化结果
*   将量化结果以之字形排列
*   在霍夫曼表中查找要写入文件的值（带有块结束标记之类的东西）

对于JPEG压缩，应该没问题。

然后我写文件：

*   首先，我编写 SOI 标头、APP0 标记、“魔术字符串”JFIF、版本、单位、密度和缩略图信息
*   那么量化表
*   然后是开始帧标记，具有图像精度、尺寸、组件数量、二次采样信息、DC Huffman 表和 AC Huffman 表
*   然后是 Start Of Scan 标题（可能是我搞砸的地方），在其中我指向 Huffman 表的 ID 以用于每个组件和其他我不知道确切含义的东西（光谱选择？？，逐次逼近??)
*   最后，我按以下顺序编写霍夫曼编码值：
    *   所有 Y 块
    *   所有 Cb 块
    *   所有 Cr 块
*   和结束图像

# php - 如何为 PHP DOMDocument 创建属性？

> ID：14794075
> 
> 赞同：-1
> 
> 时间：2013-02-10T02:29:24.573
> 
> 标签：php, xml, domdocument

两天来，我一直在努力思考如何让 PHP对我想要的 XML进行**编码。**我尝试了 SimpleXML，发现存在严重的限制，所以现在我使用 DOMDocument 来满足我的需求。我的问题很基本，正确的语法是什么？

我正在从数据库中检索代码，然后将其呈现为 xml。XML 结构必须与我要发布的格式完全相同。问题在于属性。输出具有三个属性，需要以不同的值重复十二次。我的问题是试图弄清楚如何呈现属性，什么代码是必要的。

这是 XML：

```
 <inits>
<version>18.05.04_EP1</version>
<source>Live</source>
<lowid>265067</lowid>
<highid>265068</highid>
<ql>300</ql>
<name>Ofab Shark Mk 1</name>
<inits slider="DEF&gt;===========][&lt;AGG" percent="100" init="430" />
<inits slider="DEF&gt;==========][=&lt;AGG" percent="90" init="530" />
<inits slider="DEF&gt;=========][==&lt;AGG" percent="81" init="630" />
<inits slider="DEF&gt;========][===&lt;AGG" percent="72" init="730" />
<inits slider="DEF&gt;=======][====&lt;AGG" percent="63" init="830" />
<inits slider="DEF&gt;======][=====&lt;AGG" percent="54" init="930" />
<inits slider="DEF&gt;=====][======&lt;AGG" percent="45" init="1030" />
<inits slider="DEF&gt;====][=======&lt;AGG" percent="36" init="1130" />
<inits slider="DEF&gt;===][========&lt;AGG" percent="27" init="1290" />
<inits slider="DEF&gt;==][=========&lt;AGG" percent="18" init="1590" />
<inits slider="DEF&gt;=][==========&lt;AGG" percent="9" init="1890" />
<inits slider="DEF&gt;][===========&lt;AGG" percent="0" init="2190" />

</inits> 
```

请注意，Inits 包含属性、百分比和 init。在本例中将显示 12 次，这是从数据和 php 计算得出的。这是我目前使用的代码。注意：我正在跳过数据和计算功能并手动填写数据。

```
 $root = $doc->createElement('inits');
$root = $doc->appendChild($root);

$version = $doc->createElement('version');
$version = $root->appendChild($version);
$versiontext = $doc->createTextNode($patchNum);
$versiontext = $version->appendChild($versiontext);

$source = $doc->createElement('source');
$source = $root->appendChild($source);
$sourcetext = $doc->createTextNode('live');
$sourcetext = $source->appendChild($sourcetext);

$xlowid = $doc->createElement('lowid');
$xlowid = $root->appendChild($xlowid);
$xlowidtext = $doc->createTextNode($lowid);
$xlowidtext = $xlowid->appendChild($xlowidtext);

$xhighid = $doc->createElement('highid');
$xhighid = $root->appendChild($xhighid);
$xhighidtext = $doc->createTextNode($highid);
$xhighidtext = $xhighid->appendChild($xhighidtext);

$xql = $doc->createElement('ql');
$xql = $root->appendChild($xql);
$xqltext = $doc->createTextNode($ql);
$xqltext = $xql->appendChild($xqltext); 
```

我从这里去哪里才能让这 3 个属性起作用，就像上面的 XML 示例一样。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T02:40:56.650

要设置属性，请使用[`$some_node->setAttribute("name","value")`](http://www.php.net/manual/en/domelement.setattribute.php). 根据需要对所有属性重复。

另外，请注意，您可以链接函数调用：

```
$root = $doc->appendChild($doc->createElement('inits'));
$root->appendChild($doc->createElement('version',$patchNum));
$root->appendChild($doc->createElement('source',$sourcetext));
$root->appendChild($doc->createElement('lowid',$lowid));
$root->appendChild($doc->createElement('highid',$highid));
$root->appendChild($doc->createElement('ql',$ql));
for($i=11;$i>=0;$i--) {
    $node = $root->appendChild($doc->createElement('inits'));
    $node->setAttribute("slider","DEF>".str_repeat("=",$i)."][".str_repeat("=",11-$i)."<AGG");
    $node->setAttribute("percent",floor($i/11*100));
    $node->setAttribute("init",$i>3 ? 430+(11-$i)*100 : 1290+(3-$i)*300);
} 
```

# c++ - strtol 的基础知识？

> ID：14794079
> 
> 赞同：8
> 
> 时间：2013-02-10T02:30:14.510
> 
> 标签：c++, string, int, strtol

我真的很困惑。我必须遗漏一些相当简单的东西，但我所读到的关于 strtol() 的内容没有任何意义。有人可以以非常基本的方式为我拼写出来，并举例说明我如何使以下内容起作用吗？

```
string input = getUserInput;
int numberinput = strtol(input,?,?); 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-10T02:41:16.020

第一个参数是字符串。它必须作为 C 字符串传入，所以如果你有`std::string`使用的话`.c_str()`。

第二个参数是可选的，它指定 a`char *`来存储指向数字末尾字符的指针。这在转换包含多个整数的字符串时很有用，但如果您不需要它，只需将此参数设置为 NULL。

第三个参数是要转换的基数（基数）。[`strtol`](http://en.cppreference.com/w/cpp/string/byte/strtol)可以做任何事情，从二进制（基数 2）到基数 36。如果要`strtol`根据前缀自动选择基数，请传入 0。

所以，最简单的用法是

```
long l = strtol(input.c_str(), NULL, 0); 
```

如果你知道你得到十进制数：

```
long l = strtol(input.c_str(), NULL, 10); 
```

`strtol`如果字符串开头没有可转换的字符，则返回 0。如果要检查是否`strtol`成功，请使用中间参数：

```
const char *s = input.c_str();
char *t;
long l = strtol(s, &t, 10);
if(s == t) {
    /* strtol failed */
} 
```

* * *

如果您使用的是 C++11，请[`stol`](http://en.cppreference.com/w/cpp/string/basic_string/stol)改用：

```
long l = stol(input); 
```

或者，您可以只使用 a `stringstream`，它的优点是能够轻松阅读许多项目，例如`cin`：

```
stringstream ss(input);
long l;
ss >> l; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-10T02:41:40.627

假设给你一个字符串`char const * str`。现在像这样转换它：

```
#include <cstdlib>
#include <cerrno>

char * e;
errno = 0;

long n = std::strtol(str, &e, 0); 
```

最后一个参数`0`确定您要应用的数字基数；`0`意思是“自动检测”。其他合理的值是`8`,`10`或`16`。

接下来您需要检查结束指针`e`。这指向消费输入之后的字符。因此，如果所有输入都被消耗，它指向空终止符。

```
if (*e != '\0') { /* error, die */ } 
```

也可以使用 允许部分输入消耗`e`，但当你真正需要它时，你会明白这种东西。

最后，您应该检查错误，如果输入不适合目标类型，则基本上只能是溢出错误：

```
if (errno != 0) { /* error, die */ } 
```

* * *

在 C++ 中，最好使用`std::stol`，尽管在这种情况下您不能选择数字基数：

```
#include <string>

try { long n = std::stol(str); }
catch (std::invalid_argument const & e) { /* error */ }
catch (std::out_of_range const & e)     { /* error */ } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T02:38:41.807

我总是简单地使用`strol(str,0,0)`- 它返回长值。0 表示基数（最后一个参数）意味着从输入字符串中自动检测它，因此可以在输入字符串中使用`0x10`十六进制和十进制。`10`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T02:34:28.030

引用[C++ 参考](http://www.cplusplus.com/reference/cstdlib/strtol/)：

```
long int strtol ( const char * str, char ** endptr, int base ); 
```

将字符串转换为长整数

解析 C 字符串 str ，将其内容解释为指定基数的整数，该基数作为 long int 值返回。如果 endptr 不是空指针，该函数还将 endptr 的值设置为指向数字后的第一个字符。

所以尝试类似的东西

```
long l = strtol(pointerToStartOfString, NULL, 0) 
```

# vb.net - Webbrowser1 更改页面后立即打开网页？

> ID：14794083
> 
> 赞同：0
> 
> 时间：2013-02-10T02:30:33.650
> 
> 标签：vb.net, hyperlink, webpage

我开始编码，我在创建的 VB.NET 应用程序中遇到了问题。

当加载一个新网页时，`Webbrowser1`我希望我的代码打开一个链接以在您自己的网络浏览器中执行，即 chrome、Firefox。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T04:11:21.263

```
Public Class Form1
    Dim FirstRun As Boolean = True
    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        WebBrowser1.Navigate("http://stackoverflow.com")
    End Sub
    Private Sub WebBrowser1_DocumentCompleted(ByVal sender As System.Object, ByVal e As System.Windows.Forms.WebBrowserDocumentCompletedEventArgs) Handles WebBrowser1.DocumentCompleted
        If Not FirstRun Then Process.Start("http://stackoverflow.com")
        FirstRun = False
    End Sub
End Class 
```

# windows - 批处理文件中的 IP 地址

> ID：14794087
> 
> 赞同：1
> 
> 时间：2013-02-10T02:31:04.183
> 
> 标签：windows, batch-file, windows-xp, ip-address, command-prompt

我需要弄清楚如何为我的批处理文件单独显示计算机的 IP 地址。我不想要它显示的那个`IP Address ................."%IP Address%`

我需要它说类似的话。

```
set time=&time/t
set computername=%computername%
set IP=%IP Address%
echo.
echo.
echo.
%time% %computername% %IP Address% 
```

所以如果我的时间是`9:13PM`我的计算机名`tracckkk1`和我的 IP 地址，`14.14.14.14`那么它会说

`9:13PM tracckkk1 14.14.14.14`

并不是

`21:13:51 tracckkk1 IP Address.. ...............14.14.14.14`

感谢任何回答这个问题的人！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T20:41:18.967

以下将起作用

```
 @echo off
    setlocal enabledelayedexpansion
    set /p hostname=Enter hostname: 
    for /f "tokens=3" %%a in ('ping -4 %hostname% ^| find "Pinging"') do (
    set ip=%%a
    set ip=!ip:[=!
    set ip=!ip:]=!
    echo %date% %computername% !ip! 
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-14T03:07:09.670

下面将在名为 的环境变量中捕获计算机的 IP 地址`IP_ADDRESS`。

（**注意：**的值`IP_ADDRESS`会有一个前导空格。）

```
for /f "usebackq delims=: tokens=2" %%i in (`ipconfig ^| findstr Address`) do (
set IP_ADDRESS=%%i
) 
```

这是[`For`关键字](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/batch.mspx?mfr=true)的文档。

**更新：**这种方法可能存在问题。看到[这个问题](https://stackoverflow.com/q/20570227/1497596)。

# objective-c - Xcode 4.5.2 - OS X 应用程序 - 将 webview 链接到代码，加载手动编码的主页

> ID：14794091
> 
> 赞同：2
> 
> 时间：2013-02-10T02:32:17.523
> 
> 标签：objective-c, xcode, macos, webview

我正在使用 Xcode 4.5.2。

*   我创建了一个新项目（OS X > 应用程序 > Cocoa 应用程序）。
*   在链接的框架和库下，我添加了 Webkit.framework。
*   在 MainMenu.xib 下，我向 Window 添加了一个 Web View 对象
*   在 MainMenu.xib 下，我添加了 2 个按钮并将它们命名为 Back 和 Forward。
*   我控制单击按钮并将它们链接到 Web 视图并选择 goBack: 和 goForward:
*   在 MainMenu.xib 我添加了一个 Text Field 对象
*   我控制单击文本字段并将其链接到 Web 视图并选择 takeStringURLFrom：

所有这些都奏效了。我可以在文本字段中输入网址，然后按回车并使用后退和前进按钮。

我想手动编写一个默认网站 ( [http://www.google.com/](http://www.google.com/) ) 来加载，但我无法确定从这里做什么？

我将我的网络视图链接到什么（当我控制点击它时）？

当应用程序打开时，我需要向我的 AppDelgate.h 和 AppDelgate.m 文件添加什么以将 Google 加载到 Web 视图中？

我做了一些研究并做到了这一点。我能够找到一个可行的示例，但我试图逐步了解它是如何工作的，并被困在这一步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T03:08:49.277

如果您希望您的代理在应用程序启动后加载 Google 主页，您只需将以下内容添加到您的`applicationDidFinishLaunching:`:

```
NSURL*        url     = [NSURL URLWithString:@"http://google.com"];
NSURLRequest* request = [NSURLRequest requestWithURL:url];
[[self.webView mainFrame] loadRequest:request]; 
```

这假设您的 中有以下内容`AppDelegate.h`：

```
@property (weak) IBOutlet WebView *webView; 
```

您通过 CTRL 将其从`WebView`Interface Builder 中的控件拖动到您的`AppDelegate.h`.

最终代码：

`AppDelegate.h`

```
#import <Cocoa/Cocoa.h>
#import <WebKit/WebKit.h>

@interface AppDelegate : NSObject <NSApplicationDelegate>

@property (assign) IBOutlet NSWindow *window;
@property (weak) IBOutlet WebView *webView;

@end 
```

`AppDelegate.m`

```
#import "AppDelegate.h"

@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {

  NSURL*        url     = [NSURL URLWithString:@"http://google.com"];
  NSURLRequest* request = [NSURLRequest requestWithURL:url];
  [[self.webView mainFrame] loadRequest:request];

}

@end 
```

# macos - Objective C 或 C /qt 设置 OSX 桌面壁纸？

> ID：14794092
> 
> 赞同：0
> 
> 时间：2013-02-10T02:32:28.703
> 
> 标签：macos, background, set, wallpaper

我真的很想要一段代码，它可以获取文件的字符串位置并使其成为桌面背景。

它可以在 c++ 或 Objective C 中，但我在这里没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T02:34:28.460

请参阅以[编程方式更改桌面图像](https://stackoverflow.com/questions/5468074/programmatically-changing-desktop-image)，尤其是

```
setDesktopImageURL:forScreen:options:error: 
```

# php - 通过 php 编辑文件

> ID：14794100
> 
> 赞同：0
> 
> 时间：2013-02-10T02:34:23.233
> 
> 标签：php

我环顾四周，还没有发现任何东西。所以我要问一个问题，对不起，如果这是“nooby”

我想做的是：有一个带有表单的页面，即：Form.php
，我想允许自己编辑另一个页面，即：index.php
有点像一个真正的 BASIC 两页 CMS，编辑它在 form.php 页面上，然后它保存在 index.php 上并不会覆盖，而是将其保存在已经存在的当前帖子下。

抱歉这个“含糊”的问题，但是想快速做到这一点：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:41:08.667

与其使用 PHP 文件编辑 HTML 或 PHP，不如创建一个数据库，在其中存储您想要动态的内容，并在动态页面的 PHP 执行时从数据库中检索。去阅读 SQL :)

（重新发布，以便可以选择它作为选定的答案，如果你愿意！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T02:57:05.567

您可以按照 Patashu 所说的使用数据库的方式进行操作，但如果您只想编辑一个页面，您可以使用[http://php.net/manual/en/function.fopen.php](http://php.net/manual/en/function.fopen.php)进行操作。

在 Form.php 上`index.php`使用 PHP 打开它，然后有一个 textarea 字段回显 index.php，然后使用 Fopen 函数保存`index.php`。确保使用密码或什至使用数据库来保护 Form.php。这还取决于您将拥有什么编程语言`index.php`

# django - 可以在 Django 中做有条件的 ForeignKey.on_delete 吗？

> ID：14794103
> 
> 赞同：9
> 
> 时间：2013-02-10T02:34:31.837
> 
> 标签：django

通过[on_delete 选项，Django 提供了各种替代方法](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ForeignKey.on_delete)来处理具有要删除的对象的外键的对象。

我想知道是否有一种方法可以做类似的事情，但有条件。这是场景。我正在使用 Django 1.5 的新自定义用户模型，并且我的所有用户都有一个外键到站点。像这样：

```
class TenantSiteUser(AbstractUser):
  site = models.ForeignKey(Site, null=True) 
```

如果一个站点被删除，那么我宁愿删除所有链接到该站点的非超级用户（即类似 KASKADE 的行为），因为它们的存在现在毫无意义。但是，如果它是超级用户，我宁愿将用户的站点设置为 null（即 SET_NULL）并让它们保持存在，因为这可能是我或与我一起工作的人，我们往往不想无意中删除自己。

有什么我可以覆盖的东西来手动检查并实现这种类型的 on_delete 行为吗？

编辑：这是最终为我工作的代码，基于@Kevin的回答和对现有处理程序如何工作的一些研究：

```
def NULLIFY_SUPERUSERS_ELSE_CASCADE(collector, field, sub_objs, using):
    superusers = []
    for user in sub_objs:
        if user.is_superuser:
            sub_objs = list(sub_objs)
            sub_objs.remove(user)
            superusers.append(user)

    CASCADE(collector, field, sub_objs, using)
    if len(superusers):
        collector.add_field_update(field, None, superusers)

class TenantSiteUser(AbstractUser):
    site = models.ForeignKey(Site, null=True, on_delete=NULLIFY_SUPERUSERS_ELSE_CASCADE) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T03:24:19.447

Django 提供的选项（`CASCADE`等`PROTECT`）都是函数——[这里是它们](https://github.com/django/django/blob/stable/1.5.x/django/db/models/deletion.py)为 1.5 定义的地方。

我还没有测试过，但应该可以编写自己的`NULL_OR_CASCADE`函数并将其作为字段的 on_delete 参数传入。

# android - 如何将相机拍摄的照片保存到本地应用程序文件夹？

> ID：14794105
> 
> 赞同：0
> 
> 时间：2013-02-10T02:34:55.213
> 
> 标签：android, image, android-intent, android-activity, camera

我将如何将图像保存到应用程序内的文件夹中？我希望最终允许用户拍照和上传，并允许其他人“评价它”。我是android新手，所以如果这是非常基本的，我很抱歉。这就是我到目前为止所拥有的。

public void onClick(View v) { // TODO 自动生成的方法存根

```
 Intent picture = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            //MainActivity.this.startActivity(picture);

             startActivityForResult(picture, 1);
             onActivityResult(1, 1, picture){

             }

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T02:39:49.200

您是否尝试将其保存在其他地方，然后尝试移动它？

您可以编写一个文件，将其保存到其原始目录，然后自动移动到您希望执行的目录中。

您显然已经有足够的技能在该可执行文件中重新定位文件。

抱歉，如果我对整个 stackoverflow 社区的帮助不大，我是全新的。

希望我对你有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:50:40.860

阅读本教程： http: [//developer.android.com/training/camera/photobasics.html](http://developer.android.com/training/camera/photobasics.html) 希望这会对你有所帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T06:16:32.793

使用这段代码。解释在代码之后

```
Intent getCameraImage = new Intent("android.media.action.IMAGE_CAPTURE");

File cameraFolder;

if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
    cameraFolder = new File(android.os.Environment.getExternalStorageDirectory(),"YOUR_FOLDER_NAME/");
else
    cameraFolder= StatusUpdate.this.getCacheDir();
if(!cameraFolder.exists())
    cameraFolder.mkdirs();

SimpleDateFormat dateFormat = new SimpleDateFormat("yyyyMMdd'T'HHmmss");
String timeStamp = dateFormat.format(new Date());
String imageFileName = "picture_" + timeStamp + ".jpg";

File photo = new File(Environment.getExternalStorageDirectory(), "YOUR_FOLDER_NAME/" + imageFileName);
getCameraImage.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));
initialURI = Uri.fromFile(photo);

startActivityForResult(getCameraImage, 1); 
```

这段代码的本质是：

*   使用提供的名称创建一个文件夹，它的名称为 **YOUR_FOLDER_NAME**（为方便起见更改此名称）
*   这`picture_" + timeStamp + ".jpg`可确保将多个图像存储在您选择的文件夹中，每个图像都有一个新的时间戳。自然，时间戳将是当前时间。
*   是全局定义的`initialURI`，以帮助您处理稍后拍摄的图像。例如，将其显示在`ImageView`

# android - 物理体通过每个

> ID：14794106
> 
> 赞同：2
> 
> 时间：2013-02-10T02:34:59.803
> 
> 标签：android, box2d, andengine

我正在使用 Andengine+Box2D 做一个小项目。我有一个玩家角色和一个地面。地面是静态体，plyaer 是动态体。我想要一个人在地上行走的效果。

问题是，当我移动播放器时，它正在下沉。我该如何解决？我必须用图片来解释它。

![这是应该的](../Images/7e0b5a9f3429b79a1ffb03b79dff87bf.png)

![这就是正在发生的事情](../Images/cbd57c1f35dedf125d98dda596c46394.png)

这是我的代码：

```
import org.andengine.engine.camera.Camera;
import org.andengine.engine.options.EngineOptions;
import org.andengine.engine.options.ScreenOrientation;
import org.andengine.engine.options.resolutionpolicy.FillResolutionPolicy;
import org.andengine.entity.scene.Scene;
import org.andengine.entity.sprite.Sprite;
import org.andengine.entity.util.FPSLogger;
import org.andengine.extension.physics.box2d.PhysicsConnector;
import org.andengine.extension.physics.box2d.PhysicsFactory;
import org.andengine.extension.physics.box2d.PhysicsWorld;
import org.andengine.input.touch.TouchEvent;
import org.andengine.opengl.texture.TextureOptions;
import org.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlas;
import     org.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlasTextureRegionFactory;
import org.andengine.opengl.texture.region.TextureRegion;
import org.andengine.ui.activity.SimpleBaseGameActivity;

import com.badlogic.gdx.math.Vector2;
import com.badlogic.gdx.physics.box2d.Body;
import com.badlogic.gdx.physics.box2d.FixtureDef;
import com.badlogic.gdx.physics.box2d.MassData;
import com.badlogic.gdx.physics.box2d.BodyDef.BodyType;

import android.hardware.SensorManager;
import android.os.Bundle;
import android.app.Activity;
import android.view.Gravity;
import android.view.Menu;

public class BlokKirmaActivity extends SimpleBaseGameActivity {

private EngineOptions engineOptions;
private Camera camera;
private Scene oyunSahne;
private static final int CAMERA_HEIGHT = 480;
private static final int CAMERA_WIDTH = 800; 
private PhysicsWorld physicsWorld= new PhysicsWorld(new Vector2(0,SensorManager.GRAVITY_EARTH),false);
private FixtureDef fixDef = PhysicsFactory.createFixtureDef(1.0f, 0.0f, 1.0f);
private BitmapTextureAtlas texYer,texKamil,texSol,texSag,texZipla;
private TextureRegion texRegYer,texRegKamil,texRegSol,texRegSag,texRegZipla;
private Sprite spriteYer,spriteKamil,spriteSol,spriteSag,spriteZipla;
private Body bodyYer,bodyKamil;
private boolean solBasilimi=false,sagBasilimi=false,ziplaBasilimi=false;

public EngineOptions onCreateEngineOptions() {
    camera = new Camera(0,0,CAMERA_WIDTH,CAMERA_HEIGHT);
    engineOptions = new EngineOptions(true,ScreenOrientation.LANDSCAPE_FIXED, new FillResolutionPolicy(),camera);

    engineOptions.getTouchOptions().setNeedsMultiTouch(true);
    engineOptions.getAudioOptions().setNeedsSound(true);

    return this.engineOptions;

}

@Override
protected void onCreateResources() {

    texYer = new BitmapTextureAtlas(this.getTextureManager(),1024,256,TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    texKamil = new BitmapTextureAtlas(this.getTextureManager(),64,128,TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    texSol = new BitmapTextureAtlas(this.getTextureManager(),128,128,TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    texSag = new BitmapTextureAtlas(this.getTextureManager(),128,128,TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    texZipla = new BitmapTextureAtlas(this.getTextureManager(),128,128,TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    texYer.load();
    texKamil.load();
    texSol.load();
    texSag.load();
    texZipla.load();

    texRegYer = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.texYer, this, "gfx/oyunyer.png",0,0);
    texRegKamil = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.texKamil, this, "gfx/kamil.png",0,0);
    texRegSol = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.texSol, this, "gfx/sol.png",0,0);
    texRegSag = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.texSag, this, "gfx/sag.png",0,0);
    texRegZipla = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.texZipla, this, "gfx/zipla.png",0,0);

}

@Override
protected Scene onCreateScene() {
    this.mEngine.registerUpdateHandler(new FPSLogger());
    this.oyunSahne = new Scene();
    this.oyunSahne.registerUpdateHandler(physicsWorld);

    spriteYer = new Sprite(0,355,texRegYer,getVertexBufferObjectManager());
    spriteKamil = new Sprite(220,50,texRegKamil,getVertexBufferObjectManager()){

        protected void onManagedUpdate(float pSecondsElapsed){
            if(solBasilimi==true){
                bodyKamil.setLinearVelocity(-10, 0);
            }
            if(sagBasilimi==true){
                bodyKamil.setLinearVelocity(10, 0);
            }

        }

    };

    spriteSol = new Sprite(100,50,texRegSol,getVertexBufferObjectManager()){

        public boolean onAreaTouched(TouchEvent pSceneTouchEvent, float pTouchAreaLocalX, float pTouchAreaLocalY) {

            if(pSceneTouchEvent.isActionDown()){
                solBasilimi=true;
            }
            if(pSceneTouchEvent.isActionUp()){
                solBasilimi=false;
            }

            return true;
        }
    };

    spriteSag = new Sprite(300,50,texRegSag,getVertexBufferObjectManager()){

        public boolean onAreaTouched(TouchEvent pSceneTouchEvent,float pTouchAreaLocalX, float pTouchAreaLocalY) {

            if(pSceneTouchEvent.isActionDown()){
                sagBasilimi=true;
            }
            if(pSceneTouchEvent.isActionUp()){
                sagBasilimi=false;
            }
            return true;

        }
    };

    spriteZipla = new Sprite(600,50,texRegZipla,getVertexBufferObjectManager()){

        public boolean onAreaTouched(TouchEvent pSceneTouchEvent, float pTouchAreaLocalX, float pTouchAreaLocalY) {

            if(pSceneTouchEvent.isActionDown()){
                bodyKamil.setLinearVelocity(0,-20);

            }
            if(pSceneTouchEvent.isActionUp()){
                bodyKamil.setLinearVelocity(0,0);
            }
            return true;
        }
    };

    bodyYer = PhysicsFactory.createBoxBody(physicsWorld, spriteYer, BodyType.StaticBody, fixDef);
    this.physicsWorld.registerPhysicsConnector(new PhysicsConnector(spriteYer, bodyYer,true,false)); 
    bodyKamil = PhysicsFactory.createBoxBody(physicsWorld, spriteKamil, BodyType.DynamicBody, fixDef);
    this.physicsWorld.registerPhysicsConnector(new PhysicsConnector(spriteKamil, bodyKamil,true,false)); 

    MassData massData1 = bodyKamil.getMassData();
    massData1.mass= 75;
    bodyKamil.setMassData(massData1);

    this.oyunSahne.attachChild(spriteYer);
    this.oyunSahne.attachChild(spriteKamil);
    this.oyunSahne.attachChild(spriteSol);
    this.oyunSahne.attachChild(spriteSag);
    this.oyunSahne.attachChild(spriteZipla);

    this.oyunSahne.registerTouchArea(spriteSol);
    this.oyunSahne.registerTouchArea(spriteSag);
    this.oyunSahne.registerTouchArea(spriteZipla);

    return this.oyunSahne;
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T04:00:44.463

这很可能是由于您的物理实体的大小或形状与您的精灵不同。我不知道有什么简单的方法可以修改它。也许你必须为精灵创建自己的形状。但是这里有一个很好的工具 box2d 调试渲染器，使用它可以获得物理体的轮廓。 [链接在这里](http://pastebin.com/nut2xBsG)

它使用起来非常简单，只需将项目作为库包含，然后只需添加一行代码

```
mScene.attachChild(new Box2dDebugRenderer(mPhysicsWorld)); 
```

现在你所有的物理体都会显示一个轮廓，记住这个会减少你的 FPS，但对调试很有帮助。

# html - 影响父级的子级不透明度

> ID：14794114
> 
> 赞同：0
> 
> 时间：2013-02-10T02:35:42.887
> 
> 标签：html, css, opacity

如果这是重复的，我很抱歉。我浏览了相关帖子，找不到与我正在处理的内容相似的任何内容。

我有一个图像，当悬停在上面时，不透明度会降低。我在包含图像的 DIV 上方的 DIV 中有文本，这受图像的不透明度设置的影响。文本应该保持实心，而图像变得透明。不幸的是，这两个元素在悬停时都变得透明。我认为既然文本被认为是父元素，它应该不受图像的不透明度设置的影响。

html:

```
<div class="album large">
    <div class="writing">
        <h1>blah</h1>
    </div>
    <div class="opac">
        <img src="background/runaways.jpg">
    </div>
</div> 
```

CSS：

```
.album img
    {
    display:block;
    margin: auto;
    }

.album.large
    {
    background-image: url('background/bigblack.jpg');
    background-repeat: no-repeat;
    background-position: center;
    margin-bottom: 50px;
    }

.writing
    {
    position: absolute;
    color:red;
    left: 50%;
    margin-left: -270px;
    }

.opac img:hover
    {
    opacity: .4;
    filter:alpha(opacity=40);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T06:01:01.080

**解决父div的不透明度问题**

使用伪元素我们可以摆脱这种情况，查看下面给出的[链接](http://sakhatech.com/blog/2013/07/24/pseudo-element-in-css3-and-html5/)以获取更多详细信息。

# c++ - 在 std::locale 析构函数中退出时崩溃

> ID：14794117
> 
> 赞同：1
> 
> 时间：2013-02-10T02:36:45.093
> 
> 标签：c++, c, winapi

我正在使用 Visual Studio 2010 在 C++ 中开发 Win32 应用程序。在调试模式下运行时，应用程序运行良好并在退出时正确关闭。然而，在发布时，程序运行良好，但在应用程序关闭时出现未处理的异常：Application.exe 中 0x009C19F5 处的未处理异常：0xC0000005：访问冲突读取位置 0x00297628。

然后调试器在 std::local 的析构函数中中断 xlocale：

```
~locale() _THROW0()
{  // destroy the object
if (_Ptr != 0)
    _DELETE_CRT(_Ptr->_Decref()); // breaks here with unhandled exception
} 
```

我相信，在我的 main 函数返回并在某处调用 exit(0) 之后，上面的代码正在运行。这是我崩溃时的调用堆栈：

```
Application.exe!std::locale::~locale() Line 411 C++
Application.exe!doexit(int code, int quick, int retcaller) Line 567 C
Application.exe!exit(int code) Line 393 C
Application.exe!__tmainCRTStartup() Line 284    C
kernel32.dll!@BaseThreadInitThunk@12()  Unknown
ntdll.dll!___RtlUserThreadStart@8() Unknown
ntdll.dll!__RtlUserThreadStart@8()  Unknown 
```

我正在使用 Microsoft 的应用程序验证程序，并且正在运行 _CrtCheckMemory( ); 经常检查堆损坏，我没有看到在调试或发布模式下检测到任何东西。在我的任何来源中，我也根本没有弄乱 std::locale 。

我最近将解决方案的设置切换为默认使用 unicode 而不是 256 个一字节大小的字符。但是，现在在 unicode 和多字节设置之间来回切换似乎不会影响发布时退出时的崩溃。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T04:39:40.057

我找到了解决方案。有一些全局变量调用 new 并且我有 new 重载。当第一次调用 new 时，会构建自定义内存管理器。这很好，但是在程序关闭时，一些对象会在内存管理器之后销毁。破坏顺序是造成问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-05T12:55:14.100

具有相同症状的崩溃的另一个可能原因是由[以下*微妙注释*](https://en.cppreference.com/w/cpp/locale/locale/locale#Notes)描述的行为引起的：

> 重载 7 *（即`locale(const locale& other, Facet* f)`）*通常用它的第二个参数 调用，`f`直接从一个新表达式获得：语言环境负责`delete`从它自己的析构函数调用匹配。

这似乎暗示语言环境只有在它来自时才会删除构面`new`，但实际上它不会。换句话说，一个语言环境是从一个*不是*由 构建的构面构造的`new`，或者是之前被删除的，从而导致语言环境析构函数的崩溃`delete`。

这可以通过给区域设置适当的刻面绝对所有权来解决，即不手动删除刻面或让任何智能指针自动执行（以及确保它实际上是通过 构造的`new`），或者，如果修改刻面是可能，超载`delete`。

# css - 菜单切换效果和子菜单悬停区域

> ID：14794119
> 
> 赞同：-1
> 
> 时间：2013-02-10T02:37:05.187
> 
> 标签：css, drop-down-menu, padding

我在[此处](http://bit.ly/UQM7Ff)设置顶部下拉菜单的样式时遇到了一些麻烦，以便创建切换效果。我正在使用填充来划定悬停区域，但是我没有机会将鼠标悬停在子菜单上。

```
#topmenu {
background-color: rgba(0,0,0,1);
box-shadow: 0px 5px 15px 0px rgba(0, 0, 0, 0.5);
font-family: 'Roboto Condensed', sans-serif;
text-align: center;
font-size: 20pt;
position: fixed;
width: 100%;
top: 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T02:49:34.470

使填充和边距为0；并提供代码，以便我可以理解任何其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T03:19:16.053

添加`z-index: larger-number`到`#topmenu`以确保菜单始终位于顶层，因此可以将其悬停。

css 转换将更改 z-index 顺序。你在`h2`. 它涵盖了子菜单。

实际上，什么都不做，而是向下滚动页面。你会发现菜单上的悬停问题消失了。

### **旋转元素**覆盖**绝对元素**的演示：

[http://jsfiddle.net/rainthinks/xswrg/](http://jsfiddle.net/rainthinks/xswrg/)

修复：http: [//jsfiddle.net/rainthinks/xswrg/1/](http://jsfiddle.net/rainthinks/xswrg/1/)

一些参考：

*   [http://daneden.me/2012/04/css-transforms-and-z-index/](http://daneden.me/2012/04/css-transforms-and-z-index/)
*   [http://www.w3.org/TR/css3-2d-transforms/](http://www.w3.org/TR/css3-2d-transforms/)

# ios - 旋转 UIbutton，同时旋转它们所在的父视图

> ID：14794122
> 
> 赞同：0
> 
> 时间：2013-02-10T02:38:39.503
> 
> 标签：ios, xcode

我有一个 UIView，当方向改变时我手动旋转，这个 UIView 承载了许多按钮，我也想根据方向的改变来旋转它们。

我正在这样做：

```
 CGAffineTransform rotation = CGAffineTransformMakeRotation(M_PI / -4);

    [UIView animateWithDuration:0.25 animations:^
    {

        self.parentView.firstButton.transform =   CGAffineTransformConcat(self.parentView.firstButton.transform, rotation);
        self.parentView.secondButton.transform = CGAffineTransformConcat(self.parentView.secondButton.transform, rotation);
        self.parentView.thirdButton.transform = CGAffineTransformConcat(self.parentView.thirdButton.transform, rotation);
        self.parentView.transform = CGAffineTransformConcat(self.parentView.transform, rotation);
    }
        completion:^(BOOL finished)
    {
    }]; 
```

parentView 确实可以正确旋转，但其他按钮没有！我需要在另一个电话中执行轮换吗？因为我不能在同一个块中旋转按钮及其父视图？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T10:32:58.673

旋转父视图应该足够了。确保您`self.parentView.transform`先分配。尝试直接分配适当的变换，`CGAffineTransformMakeRotation()`而不依赖于变换属性的当前状态（如使用`CGAffineTransformConcat()`）。不要忘记确保子视图确实是 parentView 的子视图 - a`[self.parentView addSubview:...]`应该出现在某个地方。如果您使用 IB 设置子视图，这可能会很棘手；检查IB的视图层次树！

# text - 如何从标签文本中删除 1 行

> ID：14794124
> 
> 赞同：0
> 
> 时间：2013-02-10T02:39:02.210
> 
> 标签：text, label, line, erase

我正在编写一个程序，在其中使用 += 向标签添加一行，并使用 environment.newline 写到下一行。我需要知道的是，是否有一种方法可以取消放置的最后一条线。我正在尝试计算数量并重写该行以调整数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T02:51:17.213

据我所知，这里有一些想法给你。

*   只需用新数量重写整个文本，而不是尝试返回并修改旧数量。使用单独的变量来存储文本的第一部分和数量。

*   您可以使用两个标签。一个下一个，只需更改第二个标签即可更新数量。

# python - Python：在引发异常且未处理后，线程会被杀死吗？

> ID：14794128
> 
> 赞同：1
> 
> 时间：2013-02-10T02:39:44.730
> 
> 标签：python, multithreading, queue

[这里](http://docs.python.org/3/library/queue.html)的官方文档给出了以下示例：

```
def worker():
    while True:
        item = q.get()
        do_work(item)
        q.task_done()

q = Queue()
for i in range(num_worker_threads):
    t = Thread(target=worker)
    t.daemon = True
    t.start()

for item in source():
    q.put(item)

q.join()       # block until all tasks are done 
```

我想确保在我的主线程继续之前，此时所有线程都被杀死。我想在队列中的所有任务都被处理之后， q.get() 方法会引发一个异常，这应该会杀死线程。那是对的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T02:41:27.057

否。如果队列中没有项目，`get`默认情况下会等待项目被放入队列。如果您希望它在没有更多项目时引发异常，请传递它`block=False`或使用`get_nowait`.

一旦你使用了 non-blocking `get`，它应该都可以工作，但是你的线程因为在正常情况下引发的异常而死是相当不雅的。我建议用一个`try`块包围它，如果由于队列为空而引发异常，请干净地停止线程：

```
try:
    item = q.get(block=False)
except queue.Empty:
    return 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T09:02:21.523

如果任何`do_work()`'s 调用引发异常，则运行它的线程将退出。您的主线程将*永远阻塞*，`q.join()` 因为在这种情况下`q.get()`没有被跟随。`q.task_done()`

您可以使用线程池重写示例：

```
from multiprocessing.dummy import Pool # use threads

p = Pool(num_worker_threads)    
for _ in p.imap_unordered(do_work, source()):
    pass
p.close()
p.join() # no threads after this point 
```

在这种情况下，如果`do_work()`引发异常；它被传播到主线程并退出（池线程是守护进程，因此它们不会保持程序运行）。

基于 - 的解决方案的另一种替代`Queue`方法是将标记值放入队列（每个线程一个值）并`worker()`在遇到标记时退出，[例如](https://stackoverflow.com/a/9874484/4279)：

```
STOP = object()

def worker(queue):
    for item in iter(queue.get, STOP): # until STOP is encountered
        do_work(item)

# instead of `q.join()`
for _ in threads: q.put(STOP)
for t in threads: t.join() # no threads after this point 
```

# ruby-on-rails - 将 CSV 文件导入 Sqlite3 - 处理 created_at、updated_at 列的最简单方法？

> ID：14794129
> 
> 赞同：0
> 
> 时间：2013-02-10T02:39:48.237
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sqlite

我有一个 CSV 文件，我正在尝试使用 .import 命令导入 Sqlite3。db 表有 updated_at 和 created_at 列，但我的 CSV 文件没有，所以当我运行导入时，我收到一条错误消息：“预期 18 列，仅找到 16”

导入此文件的最简单方法是什么？

我尝试将 created_at、updated_at 列添加到 CSV 文件，但出现错误。

几个论坛建议使用 FasterCSV，但我不清楚如何使用 gem 来专门解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T05:02:41.103

在这里，威廉，试试这个代码。将 CSV 导入数据库是 Ruby 代码，忽略 created_at 和 updated_at。

要运行它：

1.  将代码粘贴到新文件中。我们称之为 import.rb
2.  编辑文件。将单词“mytablename”更改为`self.table_name = "mytablename"`您要导入的表的实际名称。
3.  在文件末尾附近，将 mydb.db 替换为 Sqlite3 文件的实际名称。它应该是文件的相对路径（相对于 import.rb）。
4.  在命令行上，键入：

    ```
    gem install active_record sqlite3
    ruby import.rb path/to/csvfile.csv 
    ```

（如果您使用的是 Mac，请使用“sudo gem install”而不是“gem install”。）

好的，代码如下：

* * *

```
require 'rubygems'
require 'csv'
require 'active_record'
require 'sqlite3'

ActiveRecord::Base.configurations = YAML::load(DATA)
ActiveRecord::Base.establish_connection('development')

class Record < ActiveRecord::Base
  self.table_name = "mytablename" # <=== REPLACE THIS with your table name
end

CSV.foreach ARGV[0], :headers => true do |row|
  print "."
  hash = Hash[row]
  hash.delete("updated_at")
  hash.delete("created_at")
  Record.create! hash
end

puts "\nDone."

__END__
development:
  adapter: sqlite3
  database: mydb.db  # <=== REPLACE THIS with a relative path to your sqlite3 DB
  pool: 5
  timeout: 5000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T04:22:06.927

`created_at`如果和的值`updated_at`在 CSV 中添加如下，`.import xyz.csv xyz`则应正确导入数据。

```
... | "2013-02-10 15:17:17" | "2013-02-10 15:17:17" 
```

以这种方式导入时遇到什么错误？

当您使用库导入数据时，导入通过 ActiveRecord 接口进行，该接口自动添加`created_at`和`updated_at`字段，就像您从 GUI 添加记录时一样。

查看[Ruby on Rails - Import Data from a CSV file](https://stackoverflow.com/questions/4410794/ruby-on-rails-import-data-from-a-csv-file)的答案以获取代码示例。

有关使用该库的信息，请参阅[Ruby 的 csv 标准库（以前是 FasterCSV）](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/csv/rdoc/index.html)。

# php - 无法回显位于同一页面但不同文件的变量

> ID：14794131
> 
> 赞同：0
> 
> 时间：2013-02-10T02:39:58.390
> 
> 标签：php, html, variables

我在同一页面上包含了 header.php 和 index.php。

可以在`header.php`文件中找到以下内容：

```
<?php 
    $pageName="home";
    if(is_page('47')){
       $pageName="services";}
    printVar($pageName);
?>

function printVar($v){ //on functions.php
    echo $v;
} 
```

它会在 if 语句之后和 header.php 的任何位置立即打印出 var，但是当我转到`index.php`它时不会打印。

```
<ul class="<?php printVar($pageName); //does not print out ?>">  
    <li class="home"><a href="/">Home</a></li>
    <li class="services"><a href="/">Services</a></li>
    <li class="seminar"><a href="#">Seminar</a></li>
    <li class="contact last"><a href="#">Contact</a></li>
</ul> 
```

如何在不将所有内容移动到的情况下打印此变量`index.php`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T02:59:47.343

你需要有

```
<?php get_header(); ?> 
```

在你的 index.php 文件中

在 wordpress 函数参考上阅读有关[get_header()的更多信息。](http://codex.wordpress.org/Function_Reference/get_header)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T02:43:16.460

尝试添加：

```
include("header.php");
include("functions.php"); 
```

到你的 index.php

添加：

```
include("header.php"); 
```

在functions.php中

并添加：

```
include("functions.php"); 
```

在 header.php 中

# javascript - 在 d3.js 中更新 layout.pack

> ID：14794133
> 
> 赞同：10
> 
> 时间：2013-02-10T02:40:49.213
> 
> 标签：javascript, data-binding, d3.js, transition, circle-pack

我正试图围绕 d3 的包布局（[http://bl.ocks.org/4063530](http://bl.ocks.org/4063530)）。

我有基本的布局，但我想用新数据更新它。即收集新数据，将其绑定到当前 layout.pack 并相应更新（更新/退出/进入）。

我的尝试在这里（[http://jsfiddle.net/emepyc/n4xk8/14/](http://jsfiddle.net/emepyc/n4xk8/14/)）：

```
var bPack = function(vis) {
    var pack = d3.layout.pack()
    .size([400,400])
    .value(function(d) {return d.time});

    var node = vis.data([data])
    .selectAll("g.node")
    .data(pack.nodes)
    .enter()
    .append("g")
    .attr("class", function(d) { return d.children ? "node" : "leaf node"; })
    .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

node.append("circle")
    .attr("r", function(d) { return d.r });

    node.filter(function(d) { return !d.children; }).append("text")
    .attr("text-anchor", "middle")
    .attr("dy", ".3em")
    .text(function(d) { return d.analysis_id });

    bPack.update = function(new_data) {
        console.log("UPDATE");

        node
        .data([new_data])
        .selectAll("g.node")
        .data(pack.nodes);

        node
        .transition()
        .duration(1000)
        .attr("class", function(d) { return d.children ? "node" : "leaf node" })
    .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")" });

        node.selectAll("circle")
        .data(new_data)
        .transition()
    .duration(1000)
    .attr("r", function(d) { return d.r; });

    }; 
```

具体问题...

如何绑定数据？（因为数据不是复杂的结构，也不是数据数组）

如何将新节点/叶子添加到布局中？旧的被删除了？

指向一个工作示例的指针将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-12-29T12:21:08.023

工作示例在[这里](http://jsfiddle.net/VividD/WDCpq/8/)。

基本上，有用于初始加载的代码，其中所有圆圈、工具提示等都被创建并定位在初始位置。同样，布局（包）被创建。

然后，在每次按下按钮时，都会将新数据加载到包中，并重新计算包。关键代码在这里：

在这里，您现在将数据绑定（加载）到包布局中：（在我的示例中，它的随机数据，当然您将获得来自 json 或代码或类似的数据）：

```
pack.value(function(d) { return 1 +
             Math.floor(Math.random()*501); }); 
```

这里计算了新的布局：

```
pack.nodes(data); 
```

之后，元素被转换到新的位置，并且它的属性会随着你的决定而改变。

我只是想强调一下，我不使用进入/更新/退出模式或转换（您可能会在其他解决方案中看到），因为我相信这会为此类示例引入不必要的复杂性。

以下是一些带有过渡效果的图片：

开始：

![开始](../Images/9bb1c4176bb2493d4b64c4ab7076f5ca.png)

过渡：

![过渡](../Images/5d81dfa5a8bdbee045185a0915d7f9c5.png)

结尾：

![结尾](../Images/80ce744ae85e4b4e1d9b4886c843e08b.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-05T17:07:45.660

我最近遇到了同样的问题，并且也遇到了通用更新模式教程。这些没有达到我的目的。我在一个图表（ForceLayout）中有几百个 DOM 元素，我正在接收带有每个单独节点属性的 REST 数据。正如您在回应 mg1075 的建议时所说，通过重新绑定数据进行刷新会导致整个图的重建。在我的例子中，完成更新 DOM 需要几分钟。

我最终为以后需要更新的元素分配了唯一的 ID，然后我用 JQuery 挑选了它们。我的整个图表设置使用 D3，但我的更新没有。这感觉很糟糕，但它工作得很好。与其花费几分钟来销毁和重新创建我的大部分 DOM，不如花费大约 3 秒（排除 REST 调用的时间）。我看不出在 D3 中无法进行属性更新之类的事情的原因。

也许如果 Mike Bostock 在 enter() 选择中添加了 remove() 或适当的子选择函数，我们可以遵循纯 D3 模式进行更新。在弄清楚这一点时，我试图绑定数据子集，添加了新属性的数据，然后进行子选择以获取需要更新的元素，但由于输入的有限和特定性质，它不起作用() 选择。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-10T08:34:18.733

相关的，如果您尚未查看：
[http](http://bl.ocks.org/3808218) ://bl.ocks.org/3808218 - 一般更新模式，I
[http://bl.ocks.org/3808221](http://bl.ocks.org/3808221) - 一般更新模式，II
[http://bl。 ocks.org/3808234](http://bl.ocks.org/3808234) - 一般更新模式，III

这个示例小提琴没有转换，但这里至少有一种更新数据的方法。

[http://jsfiddle.net/jmKH6/](http://jsfiddle.net/jmKH6/)

```
//  VISUALIZATION
var svg = d3.select("#kk")
    .append("svg")
    .attr("width", 500)
    .attr("height", 600)
    .attr("class", "pack"); 

var g = svg.append("g")
    .attr("transform", "translate(2,2)");

var pack = d3.layout.pack()
        .size([400,400])
        .value(function(d) {return d.time});

function update(data) {

    var nodeStringLenth = d3.selectAll("g.node").toString().length; 
    if ( nodeStringLenth > 0) {
        d3.selectAll("g.node")
            .remove();
    }

    var node = g.data([data]).selectAll("g.node")
            .data(pack.nodes);

        node.enter()
          .append("g")
            .attr("class", function(d) { return d.children ? "node" : "leaf node"; })
            .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });

        node.append("circle")
            .attr("r", function(d) { return d.r });

        node.filter(function(d) { return !d.children; }).append("text")
            .attr("text-anchor", "middle")
            .attr("dy", ".3em")
            .text(function(d) { return d.analysis_id });

       node
            .exit()
            .remove();
}

var myData = [data1, data2, data3];
update(data1); 
setInterval(function() {
    update( myData[Math.floor(Math.random() * myData.length)] );  // http://stackoverflow.com/questions/4550505/getting-random-value-from-an-array?lq=1
}, 1500); 
```

# c# - 检查列表是否包含字符串中的所有单词

> ID：14794146
> 
> 赞同：2
> 
> 时间：2013-02-10T02:42:29.883
> 
> 标签：c#

好吧，我正在阅读[检查字符串是否包含列表中的所有输入](https://stackoverflow.com/questions/14728294/check-if-the-string-contains-all-inputs-on-the-list) 并尝试过，但是当我遇到诸如“谁发现了澳大利亚”之类的基本问题并且如果我将答案中的关键词作为“船长，厨师”时它会说我的问题错了。

知道我做错了什么；我使用的代码：

```
 GivenAnswer = textBox1.Text;
            String invariantText = textBox1.Text.ToUpperInvariant();
            bool matches = KeyWords.All(kw => invariantText.Contains(kw.ToUpperInvariant()));
                if (matches)
                {
                    correct++;
                    if (InstantResult) { MessageBox.Show("Questions Answered Correctly", "Answer Results", MessageBoxButtons.OK, MessageBoxIcon.Information); }
                }
                else
                {
                    incorrect++;
                    if (InstantResult) { MessageBox.Show("Question Answered Wrong, sorry!", "Answer Result", MessageBoxButtons.OK, MessageBoxIcon.Asterisk); }
                }
            Study_Helper.Form1.QuestionResults.Add(Question + "|" + (matches ? "true" : "false") + "|" + (Exact? "N/A" : KeyWords_Found()) + "|" + (Hint_Used ? "true" : "false") + "|" + GivenAnswer.ToLowerInvariant());
            LoadUp();
            textBox1.Clear();
            textBox1.Focus(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:23:26.060

出于调试目的，请确认`KeyWords`并`invariantText`包含预期值。使用调试器或`Console.WriteLine().`

这就是单元测试变得有价值的地方。NUnit 或 MSTest 可用于 C#/VS 开发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T03:18:30.660

感谢对我的问题的第一条评论。我认为我从未真正清除过数组列表，请确保在执行此检查后清除数组列表，以免在关键字列表中获得更多的值然后想要。

```
KeyWords.Clear(); 
```

# jquery - 设置 $("#x").innerHTML 不会改变元素

> ID：14794147
> 
> 赞同：0
> 
> 时间：2013-02-10T02:42:32.380
> 
> 标签：jquery, html

我正在尝试设置 H2 元素的值，但该值永远不会改变。当我点击网页上的字母（a、b、c 等）时，我会尝试更新 H2 值，如下所示：

```
function GetEntries(firstLetter) {
    $('#letterChosen').innerHTML = firstLetter;
} 
```

这是H2元素。

```
<h2 id="letterChosen" class="results">Results</h2> 
```

我已经尝试了一些东西，innerHTML 属性是我最后一次尝试。知道我做错了什么吗？注意，参数 firstLetter 实际上有一个值，所以这不是问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T02:44:51.497

试试这个：

```
document.getElementById('letterChosen').innerHTML = firstLetter; 
```

或者更好：

```
document.getElementById('letterChosen').firstChild.nodeValue = firstLetter; 
```

* * *

通过使用 jQuery's `$('#letterChosen')`，您将获得一个 jQuery 对象，而不是元素本身。`[0]`您可以通过在末尾添加 (so )来访问该元素，`$('#letterChosen')[0]`但在这种情况下，当有一个非常好的本机方法时使用 jQuery 实际上有点愚蠢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T02:45:00.507

因为`innerHTML`不是 jQuery 方法。它实际上是原生的。尝试`.html()`

```
$('#letterChosen').html(firstLetter); 
```

# html - 404 页面上链接中的路径更改

> ID：14794155
> 
> 赞同：0
> 
> 时间：2013-02-10T02:43:20.893
> 
> 标签：html, .htaccess, http-status-code-404

*基本设置：在我的 PC 上本地*运行的 WAMP 服务器（在 localhost 上运行 apache 2.2.22） 站点位于 /libelle 目录下 .htaccess 位于该目录中，它仅包含一行

```
ErrorDocument 404 /libelle/pages/404.html 
```

404.html文件放在/libelle/pages目录下

这是发生了什么：

404 页面具有与原始站点相同的布局和菜单，具有指向站点页面的相同导航菜单：

../index.html

我们做什么.html

投资组合.html

联系人.html

最后三个文件与 404 页面位于同一目录中，因此没有指向它们的路径。

这是我所做的：

a）我访问以下 URL - /libelle/pages/what-we-do.html 并按我应该的方式访问该页面（论坛不允许与 localhost 的链接，因此我将其替换为 webroot）

b）我将 url 更改为**/libelle/pages/what-we-SOMEWORDSdo.html**并按我应该的方式进入 404 页面。这里没问题。

一切看起来都很好。如果不是像上面的链接那样更改 html 文件名，而是更改 URL 中的目录，就会发生奇怪的事情。所以，就这样吧……

a）我访问以下 URL - /libelle/pages/what-we-do.html 并按我应该的方式访问该页面

b) 我将 url（这次是目录名称）更改为 / **libeSOMEWORDSlle** /pages/what-we-do.html 并按我应该的方式进入 404 页面。

c) 奇怪的事情来了....现在，当我将光标放在我的 404 页面上的导航菜单中时，它假设返回到我的正常站点链接，它显示：/ **libeSOMEWORDSlle** /pages/what-we-do.html

换句话说 - 它在链接中显示更改的目录名称。我不知道如何解决这个问题，总体上对这种行为感到困惑。关于为什么会发生这种情况以及如何解决它的任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T03:11:27.567

您的 HTML 中的链接可能是使用相对路径而不是绝对路径编写的。您应该使用绝对路径，`/libelle/pages/what-we-do.html`而不是相对路径，例如`../what-we-do.html`. 使用相对路径时，浏览器会构建*相*对于当前路径的链接。因此，如果您输入一个时髦的目录名称，即使它不正确，也将使用该目录名称构建路径。绝对路径*总是*正确的。

# actionscript-3 - 动作脚本 3 的恢复音乐按钮

> ID：14794156
> 
> 赞同：0
> 
> 时间：2013-02-10T02:43:30.783
> 
> 标签：actionscript-3, flash

我有 2 个按钮：1 个恢复（onBtn）和 1 个暂停（offBtn），用于控制动画的声音。暂停按钮工作正常，但当我再次播放时......它从头开始重新播放歌曲而不是打开假设 resumeTime ......这是我的代码......

* * *

```
import flash.events.Event;
import flash.events.MouseEvent;

onBtn.addEventListener(MouseEvent.CLICK, startMove);
offBtn.addEventListener(MouseEvent.CLICK, stopMove);

var resumeTime:Number = 0;
var isPlaying:Boolean;
var mySound:Sound = new MySong();
var channel1:SoundChannel = new SoundChannel();

onBtn.visible=false;
isPlaying=true;
channel1=mySound.play();

function stopMove(event:MouseEvent):void {

    resumeTime=channel1.position;
    channel1.stop();
    onBtn.visible =true;
    offBtn.visible=false;
    isPlaying=false;
    stop();

}

function startMove(event:MouseEvent):void {
    channel1=mySound.play(resumeTime);
    onBtn.visible=false;
    offBtn.visible=true;
    isPlaying=true;
    play();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T04:10:56.883

将您的动画放在单独的`MovieClip`then on中`stopMove()`，然后`startMove()`调用 that 的`play()`and`stop()`函数`MovieClip`。

这是一个工作示例：[http ://www.swfcabin.com/open/1360494138](http://www.swfcabin.com/open/1360494138)

以及代码中的更改：

```
import flash.events.Event;
import flash.events.MouseEvent;

stop(); ////

onBtn.addEventListener(MouseEvent.CLICK, startMove);
offBtn.addEventListener(MouseEvent.CLICK, stopMove);

var resumeTime:Number = 0;
var isPlaying:Boolean;
var mySound:Sound = new MySong();
var channel1:SoundChannel = new SoundChannel();

onBtn.visible=false;
isPlaying=true;
channel1=mySound.play(0);

function stopMove(event:MouseEvent):void {
    resumeTime=channel1.position;
    channel1.stop();
    onBtn.visible =true;
    offBtn.visible=false;
    isPlaying=false;
    movieClip.stop(); //// Animation moved to movieClip
}

function startMove(event:MouseEvent):void {
    if(resumeTime >= mySound.length) {
    //// Go back to start when sound has finished playing
    resumeTime = 0;
    }
    channel1=mySound.play(resumeTime);
    onBtn.visible=false;
    offBtn.visible=true;
    isPlaying=true;
    movieClip.play(); //// Animation moved to movieClip
} 
```

# php - PHP GET 动态密钥

> ID：14794157
> 
> 赞同：0
> 
> 时间：2013-02-10T02:43:44.667
> 
> 标签：php, get

`$_GET`是否可以在不指定名称的情况下获得第一个键？

我想做类似的事情，调用这个 php 文件，如：`index.php?foo=something`或`index.php?bar=something`

```
// $_GET[dynamic] stays for something to get the key.. that can be foo or bar in this example

switch($_GET[dynamic]){
    case 'foo':
        switch(@$_GET['foo']){
            //cases depending on $_GET['foo'] value
        }
    break;
    case 'bar':
        switch(@$_GET['bar']){
            //cases depending on $_GET['bar'] value
        }
    break;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:45:19.457

```
$a = key($_GET); 
```

将返回查询字符串中的第一个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:47:49.957

不要让它变得复杂并提醒您应该避免深度嵌套。

```
if (isset($_GET['foo']) {
  $value = $_GET['foo'];
} else if (isset($_GET['bar'])) {
  $value = $_GET['bar'];
}
switch ($value) {
  // and so on
} 
```

哦，尽量避免使用全动态密钥，因为这使得它们很难保持有效和安全:)

# html - 小图标拉伸到不需要的大小

> ID：14794158
> 
> 赞同：2
> 
> 时间：2013-02-10T02:43:51.363
> 
> 标签：html, css, image, stretch

将 53x49 的小图像图标拉伸到大尺寸时出现问题。

这个：http: [//imageshack.us/photo/my-images/837/arrowsj.png/](http://imageshack.us/photo/my-images/837/arrowsj.png/)

应该是这个大小：http: [//imageshack.us/photo/my-images/32/resetw.png/](http://imageshack.us/photo/my-images/32/resetw.png/)

有谁知道什么会导致这种情况发生？或者要寻找什么来预防它？或者输入什么来修复它？

尝试过：使用背景图片，使用 div。

谢谢！

图片代码：

```
<a href='getestimate.php'><img id='fixed' src='css/images/reset.png' alt='Reset' title='Reset'></a> 
```

代码：

```
* { padding:0; margin:0; outline:0; }
body {
background:#fff;
font-family: Arial, sans-serif;
font-size:12px;
line-height:18px;
color:#6d6d6d;
}
input, textarea, select { font-family: Arial, sans-serif; font-size:12px;color:#6d6d6d;     }

a img { border:0; display: block;}

a { color:#0184c4; text-decoration: underline; cursor:pointer; }
a:hover { color:#1c6183; text-decoration: none; }
#fixed {width:53px; height:49px;}

.notext { font-size:0; line-height:0; text-indent: -4000px; display:block; }

.left, .alignleft { float:left; display:inline; }
.right, .alignright { float:right; display:inline; }

.cl { font-size:0; line-height:0; clear:both; display:block; height:0; }

.al { text-align: left; }
.ar { text-align: right; }
.ac { text-align: center; }

h2 { font-size:23px; line-height:26px; color:#0188c9; }
h3 { font-size:16px; line-height:20px; color:#000; }

h2, h3 { font-family: "Trebuchet MS", Arial, sans-serif;}

h1#logo { font-size:0; line-height:0; width:245px; height:74px; float:left; }
h1#logo a{ display:block; height:74px; text-indent: -4000px;     background:url(images/logo.gif); }

.shell { width:980px; margin:0 auto; }

#header { height:74px; background:url(images/header.gif);}

#navigation { float:right; height:30px;}
#navigation ul{ float:left; height:30px; list-style-type:none; padding-top:27px;}
#navigation ul li{ float:left; display:inline; margin-left:10px;}
#navigation ul li a{ float:left; width:110px; height:30px; text-align: center; background:url(images/nav.gif) no-repeat 0 0; line-height:30px; text-decoration: none; color:#7b7b7b; }

#navigation ul li a:hover,
#navigation ul li a.active { background-position:right 0; color:#fff;}

#slider { height:390px; background:url(images/slider.gif);}

.slider-holder { height:390px; position:relative; overflow:hidden; z-index:100}
.slides { width:894px; height:315px; position:relative; overflow:hidden; top:59px; left:43px;}
.slides .jcarousel-clip{ width:894px; height:315px; position:relative; overflow:hidden; }
.slides ul{ width:758px; height:315px; position:relative; overflow:hidden; list-style-type: none;}
.slides ul li{ float:left; display:inline; width:758px; height:315px; position:relative; overflow:hidden; margin:0 0 0 136px; left:-68px;}

.slide-shadow { position:absolute; bottom:0; height:26px; width:771px; background:url(images/slide-shadow.png); left:-6px;}
.slide-bg { width:758px; height:267px; position:relative; overflow:hidden; background:url(images/slide-bg.gif); padding:5px; }
.slide-image{ float:left; width:271px; }
.slide-info{ float:left; width:440px; padding:30px 0 0 15px; }
.slide-info p{ padding:13px 0 20px;}

.slider-nav { font-size:0; line-height:0; }
.slider-nav a{ width:43px; height:46px; text-indent: -4000px; position:absolute; top:165px; }
.slider-nav a.prev{ left:0; background:url(images/prev.gif); }
.slider-nav a.next{ left:937px; background:url(images/next.gif); }

.learn-button { width:165px; height:37px; background:url(images/learn-button.gif); }

#main { width:100%; background:url(images/main.gif) repeat-x 0 0; padding:45px 0 40px 0;}

.col { float:left; display:inline; width:280px; margin-right:70px; padding:10px 0;}
.col-last { margin-right:0;}

.col h3 { padding-bottom:12px; }
.col p { padding-bottom:12px; }

.three-cols { background:url(images/three-cols.gif) repeat-y center 0; width:100%;}

.ico { background-repeat:no-repeat; background-position:0 1px; padding-left:26px; }
.ico1 { background-image:url(images/ico1.gif)}
.ico2 { background-image:url(images/ico2.gif)}
.ico3 { background-image:url(images/ico3.gif)}

p.more { font-size:11px; }
p.more a{ background:url(images/more.gif) no-repeat 0 center; padding-left:11px;}

#footer { height:57px; background:url(images/footer.gif); line-height:56px; white-space:nowrap; color:#5c5c5c;}
#footer span{ color:#cfcfcf; padding:0 5px;}
#footer a{ color:#5c5c5c; text-decoration: none;}
#footer a:hover{ color:#0184c4;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:33:30.903

`width`尝试设置图像的和`height`值，而不是使用 CSS 进行格式化。在此之前删除 CSS 类。
像这样...

```
<img src='css/images/reset.png' alt='Reset' title='Reset' width='53' height='49'></a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T02:53:10.577

更改notetext {字体大小：0；行高：0；文本缩进：-4000px；显示：块；{字体大小：0；行高：0；文本缩进：-400px；显示：块；

ge{显示：块；行高：0；宽度：245px；高度：100px；浮动：左到ge{显示：块；行高：0；宽度：150px；高度：75px；向左飘浮

那真的是你可以做的唯一调整来改变尺寸。

对不起，如果我对你帮助不大。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T02:51:35.947

[http://jsfiddle.net/persianturtle/JhNmp/](http://jsfiddle.net/persianturtle/JhNmp/) - 已修复

使用此 CSS ID

```
#fixed {
    width:53px; 
    height:49px;
} 
```

并在 html 中包含 ID，如下所示：

```
<img id="fixed"  etc etc etc> 
```

试试这个来增加特异性：

```
 <div id="derp">
     <img id="fixed"  etc etc etc>
 </div> 
```

和CSS：

```
#derp #fixed {
    width:53px; 
    height:49px;
} 
```

# c# - 为什么我在 datagridView 中得到 0 个结果？

> ID：14794160
> 
> 赞同：0
> 
> 时间：2013-02-10T02:44:20.720
> 
> 标签：c#, sql-server, winforms, datatable

C#代码：

```
command = new SqlCommand(null, connection);
command = createSQLQuery(command); // returns a valid SQL Query that returns results in SQL Management Studio 2012
//dataGridView1.DataSource = GetData(command);
connection.Open();
SqlDataReader reader = command.ExecuteReader();
connection.Close();
dataGridView1.DataSource = GetData(command);
debugMySQL();

public DataTable GetData(SqlCommand cmd) {
    //SqlConnection con = new SqlConnection(connString);
    //SqlCommand cmd = new SqlCommand(sqlcmdString, cn);

    SqlDataAdapter da = new SqlDataAdapter(cmd);
    connection.Open();
    DataTable dt = new DataTable();
    da.Fill(dt);
    connection.Close();
    return dt;
} 
```

我正在使用 C# 和 WinForm 并使用 Visual Studio 2012 进行开发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T03:28:51.923

你的问题比较模糊，但我会尽量回答。

`SqlCommand`我认为，通常情况下，您需要在执行该命令之前定义要传递给 , 的命令类型。

`command.Commandtype = CommandType.StoredProcedure;`
（或者）
`command.CommandText = CommandType.Text;`

之后，您可以将 SQL 查询设置为字符串值。
`command.CommandText = ""; // your SQL query, or the name of the stored procedure` 

此外，您不需要设置`DataSource`网格的两次。您只需要在获得 SQL 查询执行结果返回后进行设置。
但是，您收到的结果是您的选择。但是，您似乎使用`GetData()`方法和`command.ExecuteReader()`方法执行了两次命令。而且，您也设置了`DataSource`两次网格。

我认为即使您设法正确设置命令对象，由于您的双重执行，数据可能会在它们之间以某种方式丢失。

顺便说一下，从`createSQLQuery()`方法返回什么数据类型。您说它返回了一个有效的 SQL 查询，但是它返回了一个有效的 sql 查询值`string`，还是您的自定义命令对象解析到`SqlCommand`?

我将包含我所知道的从 SQL 数据库读取数据并将该数据绑定到网格控件中的最佳可操作过程。

```
// I suppose you get the connection object as 'con'
SqlCommand cmd = new SqlCommand();
cmd.Connection = con;
cmd.CommandType = CommandType.Text;
cmd.CommandText = "...";   // You desired SQL query goes here, or if you want to execute a stored procedure, set the command type as 'StoredProcedure' and text as sp name.

SqlDataAdapter dap = new SqlDataAdapter();
dap.SelectCommand = cmd;
DataTable tbl = new DataTable();
dap.Fill(tbl);
<br>
if (tbl.Rows.Count > 0)
{
    grid.DataSource = tbl;
    grid.DataBind();
} 
```

我建议您接收结果，`DataTable`而不是`SqlDataReader`. 原因`DataTable`更加灵活和多才多艺。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T03:29:47.723

```
 var command = new SqlCommand();
        command.CommandText = createSQLQuery(command);
        command.Connection = connection;
        dataGridView1.DataSource = GetData(command);

        debugMySQL();

    }

    public DataTable GetData(SqlCommand cmd)
    {
        //SqlConnection con = new SqlConnection(connString);
        //SqlCommand cmd = new SqlCommand(sqlcmdString, cn);
        SqlDataAdapter da = new SqlDataAdapter(cmd);
        DataTable dt = new DataTable();
        da.Fill(dt);
        return dt;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T04:36:46.043

在你之前`return dt;`，尝试添加这个：

```
if(dt.row.count > 0)
{
    var something =dt[0][0];
} 
```

然后，在语句中放置一个断点，`if`看看是否有任何返回。

# php - 收音机没有用 serializeArray 序列化

> ID：14794166
> 
> 赞同：5
> 
> 时间：2013-02-10T02:44:57.413
> 
> 标签：php, jquery, html, serialization

索引.php：

```
<form id = "regform" action = "registration.php" method = "POST">
    <label id = "namelabel">Username: </label> <input type = "text" name = "username" class = "username" maxlength = "40" placeholder = "Enter a Username"><br>
    <label id = "namelabel">Password: </label> <input type = "password" class = "password" name = "password" placeholder = "Enter Password"><br>
    <label id = "namelabel">Gender: </label>
    <input type="radio" name="gender" value = "Male"> Male
    <input type="radio" name="gender" value = "Female"> Female
    <label id = "namelabel">Email: </label> <input type = "text" name = "email" class = "email" placeholder = "Enter your Email"><br>
    <a href="#" title="Register" id = "register" style = "margin-left:25px;">Register</a>
</form>

$("#register").click(function () {
    $.post($('#regform').attr("action"), $('#regform').serializeArray(), function (data) {
        if (data == 'checkradio') {
            $('#regmsg').html('Please choose a gender.');
        }
    });
}); 
```

服务器端：

```
$required_fields = array('username','password','gender','email');
foreach($_POST as $key =>$value) {
    if(empty($value) && in_array($key, $required_fields) === true){
        echo 'checkradio';
    }
} 
```

它序列化除单选按钮之外的所有内容。问题是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T03:09:54.820

正如@undefined 告诉你的那样，未选中的复选框和无线电不会发送。

如果您不想要性别字段的默认选中状态，请在单选之前添加一个具有相同名称和空值的隐藏输入字段：

```
<input type="hidden" name="gender" value="" /> 
```

表单是按顺序处理的，因此如果选中单选，其值将覆盖隐藏的输入值

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-09T01:04:09.470

```
<input type="radio" name="gender" value="" style="display:none;" checked> 
```

像这样添加一个额外的单选选项，该值将是空的，并且不会向用户显示。

更新为按照@Larzan 的建议添加“已检查”。谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T03:42:37.990

除非您将类型更改为隐藏，否则永远不会发布未选中的选择控件和未选中的复选框或单选按钮控件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-07T11:01:22.747

令我惊讶的是，还没有人提到这样做的正确方法。如果您使用表单，那么您应该使用`submit`事件，然后您可以轻松使用该`serializeArray`功能。

这是一个例子：

```
$( "#magic-form" ).submit(function( event ) {
    console.log($(this).serializeArray());
    event.preventDefault();
}); 
```

这为您提供了一个包含所有值的漂亮数组，包括单选框。

示例输出

```
{
    {name: "company", value: "asd"}
    {name: "name", value: "asd"}
    {name: "email", value: "sad@web.de"}
    {name: "phone", value: ""}
    {name: "radio-group", value: "value3"}
    {name: "terms", value: "on"}
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-07T11:10:50.363

在您的情况下，需要将“已检查”属性添加到一个单选按钮以预先选择一个作为默认值。此信息来自 jQuery 文档[链接 1] 和 HTML 规范（链接自 jQuery 文档）[链接 2]。

链接：1\. [https://api.jquery.com/serializeArray/](https://api.jquery.com/serializeArray/) 2\. [https://www.w3.org/TR/html401/interact/forms.html#h-17.13.2](https://www.w3.org/TR/html401/interact/forms.html#h-17.13.2)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-07T17:20:04.433

在您的情况下，需要将“已检查”属性添加到一个单选按钮以预先选择一个作为默认值。此信息来自 jQuery 文档[链接 1] 和 HTML 规范（链接自 jQuery 文档）[链接 2]。

链接：1\. [https://api.jquery.com/serializeArray/](https://api.jquery.com/serializeArray/) 2\. [https://www.w3.org/TR/html401/interact/forms.html#h-17.13.2](https://www.w3.org/TR/html401/interact/forms.html#h-17.13.2)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-02-10T03:30:31.950

这是您的问题的解决方案：

```
$("#register").click(function(event){
  if($("#regform").find("input[name='gender']").is(':checked')){
    $("#regform").submit()
  } else {
    alert("Choose the gender!");
  }

  event.preventDefault();
}) 
```

享受 ：）

# excel - 使用 VBA 将未修改的 Excel 工作簿签入到 SharePoint 时 Excel 崩溃

> ID：14794174
> 
> 赞同：5
> 
> 时间：2013-02-10T02:45:27.710
> 
> 标签：vba项目：, excel, sharepoint, vba, crash, checkin

我正在开发一个基本上如下所示的[vba项目：](/questions/tagged/vba "显示标记为“vba”的问题")

```
if workbooks.canCheckOut(filename) = true then    
  workbooks.CheckOut(filename)
  set workbookVariable = workboooks.Open(filename)
else    
   ' Pesudocode: Display error message
   '             Quit
end if

' Pseudocode: Do some stuff with workbookVariable.    
If workbookVariable.saved = false then     
    workbookVariable.save
end if

If workbookVariable.canCheckIn then    
    workbookVariable.checkIn
    Set workbookVariable = Nothing
else    
    msgbox "Error message goes here", vbCritical
end if    
' Pseudocode: quit 
```

（编辑：我有“If workbookVariable.Saved = True”；这是不正确的。如果文件已经保存，则保存文件没有意义......所以现在更新以反映我真正拥有的内容。）

如果工作簿被修改并被保存，一切运行正常。它保存，重新签入 SharePoint，程序正常结束。

但是，如果工作簿没有被修改，当它进入程序部分的检查时，excel 崩溃，我收到一条错误消息：“自动化错误”。

我什至尝试在命令之后输入等待命令`checkIn`，但没有运气......

这里发生了什么？有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:25:02.653

如果未进行任何更改 ( `workbookVariable.saved = true`)，请使用`workbookVariable.CheckIn(False)`. 您不希望进行`CheckIn`与原始版本完全相同的修订。至少浪费空间。这应该丢弃您的“CheckOut”。请参阅[MSDN](http://msdn.microsoft.com/en-us/library/office/ff841145%28v=office.14%29.aspx)。

感谢[此页面](http://www.tech-archive.net/Archive/Office/microsoft.public.powerpoint/2009-03/msg01401.html)指出应该显而易见的内容。

最后一点好奇：当您可能不会更改工作簿时，为什么还要查看它？

# javascript - 使用jquery单击一次后禁用链接？

> ID：14794176
> 
> 赞同：1
> 
> 时间：2013-02-10T02:45:29.740
> 
> 标签：javascript, hyperlink

嗨，有人可以帮忙吗，我试图找到一种在每个用户会话单击一次链接后禁用链接的方法，我可以在 jquery 中执行此操作吗？

我是 javasript 和 jquery 的新手，所以有人可以告诉我需要做什么，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T02:50:55.243

绑定 event.preventDefault() 以防止默认浏览器事件跟随链接。仅在后续单击时执行（以便在第一次单击时允许它 - 这就是您想要的）。

```
$(".oncelink").one('click',function(e){
    $(this).on('click',function(ev){
      ev.preventDefault();
    });  
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T02:53:42.797

您还必须在服务器端进行一些检查才能使这种逻辑起作用。但是在客户端使用 jQuery 你可以做类似的事情

```
$('a').on('click', function()
{
    var me = $(this);
    //You can also set some attribute value if you do not want to use class
    if(me.hasClass('disabled'))
    {
        return false;
    }
    else
    {
        me.addClass('disabled');
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T03:11:07.760

在 HTTP 连接之间保持状态的一种方法是使用 cookie。您真的应该使用服务器端语言进行 cookie 设置/获取，因为客户端 cookie 设置/获取可能会变得混乱，更不用说不安全且易于利用。此外，如果用户在他们的浏览器中关闭了 JS，这甚至都不起作用，使您的努力变得毫无价值。但是，它看起来像这样：

```
// on dom ready

var onceButton = document.getElementById('once');
function disableButton () {
    onceButton.disabled = 'disabled';
    document.cookie="disable_button=1";

    // prevent listening on future clicks
    onceButton.removeEventListener('click', disableButton, false); 
}

if (document.cookie.indexOf('disable_button=1;') === -1) { 
    // if no cookie set, wait until click happens to disable button
    onceButton.addEventListener('click', disableButton, false);
} else {
    // cookie set, disable immediately
    disableButton();
} 
```

# ruby-on-rails - railstutorial.org，第 9 章练习，9

> ID：14794181
> 
> 赞同：2
> 
> 时间：2013-02-10T02:45:53.850
> 
> 标签：ruby-on-rails

这个想法是为了让管理员用户不会破坏自己。我写了以下测试：

```
describe "as admin user" do
  let(:admin) { FactoryGirl.create(:admin) }
  before { valid_signin admin }

  describe "should not be able to delete himself by submitting a DELETE request to the Users#destroy action" do
    specify do
      expect { delete user_path(admin) }.not_to change(User, :count).by(-1)
    end
  end
end 
```

并修改了销毁动作：

```
def destroy
  @user = User.find(params[:id])
  unless current_user?(@user)
    User.find(params[:id]).destroy
    flash[:success] = "User destroyed."
    redirect_to users_url
  end
end 
```

（如果您是管理员用户，则只能访问销毁操作）。

测试现在应该通过，但它没有。我收到以下错误消息：

```
Failure/Error: expect { delete user_path(admin) }.not_to change(User, :count).by(-1)
     ActionView::MissingTemplate:
       Missing template users/destroy, application/destroy with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee]}. 
```

我不明白缺少模板的错误消息，我不明白为什么测试没有通过。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T03:34:44.007

尝试将您的`destroy`操作更改为类似这样，看看您的测试是否通过：

```
def destroy
  user = User.find(params[:id])
  unless current_user?(user)
    user.destroy
    flash[:success] = "User destroyed."
  else
    flash[:error] = "You can't destroy yourself."
  end
  redirect_to users_url
end 
```

我认为问题在于`users_url`如果您成功销毁用户，您只会重定向到。如果你不这样做（即管理员试图销毁自己），那么就没有重定向，Rails 将开始寻找一个名为**destroy.html.erb**的视图，在任何地方都找不到，并引发异常。这也是方法中的用户变量从`@user`变为 的原因`user`：局部变量将代替实例变量，因为它不需要在视图中使用。

如果这不是问题，请编辑您的问题以包含指向 Github 存储库的链接以及您当前的代码。

# javascript - 从 localhost 和 WAMP 调用外部 javascript

> ID：14794182
> 
> 赞同：0
> 
> 时间：2013-02-10T02:45:54.910
> 
> 标签：javascript, localhost, wamp

我正在学习如何构建网页并一直在练习使用 WAMP。我遇到了一个我不明白的问题。如果我从我的浏览器尝试这个例子（直接从地址栏去那里）[http://www.w3schools.com/js/tryit.asp?filename=tryjs_externalexample](http://www.w3schools.com/js/tryit.asp?filename=tryjs_externalexample) 它工作正常。

但是，如果我将示例源代码剪切并粘贴到我计算机上的一个文件中并尝试通过 localhost 访问它，则没有任何反应。

我错过了什么或做错了什么？- 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:46:54.650

您需要同一文件夹中的“myscript.js”文件才能使用该脚本。将其复制到本地文件或链接到完整的 url ( [http://www.w3schools.com/js/myScript.js](http://www.w3schools.com/js/myScript.js) )

顺便说一句，您通常可以使用 Firebug 或 Chrome 开发人员工具诊断此类问题，它们应该在控制台中发出有关丢失/404 请求的警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:49:47.993

您缺少 js 文件。您需要在同一文件夹中获取 js 文件并编写 a `<script src="/myscript.js" type="text/javascript"></script>`，然后再次尝试使用您的页面。

# pdf - OCR 如何在 Google Drive 中工作？

> ID：14794185
> 
> 赞同：3
> 
> 时间：2013-02-10T02:46:14.330
> 
> 标签：pdf, ocr, google-docs, tesseract

我[注意到](http://www.extremetech.com/computing/132077-google-drive-on-ios-image-recognition)Google Drive 可以识别 PDF（以及其他文件，如图像和文本文档）中的文本。出于好奇，我想知道他们做了什么来显示可选择和可搜索的 img 标签。例如，当我在 Chrome 开发人员工具中检查 Google Drive 文档时，每个页面都是一个图像，但它不像图像，因为文本是可选择的。另一方面，当我放大时，似乎加载了另一个分辨率更高的图像。我认为这与 scribd 使用的技巧相同。

我还读到 Google 一直在改进[tesseract-ocr](http://code.google.com/p/tesseract-ocr/)，并且 Google Books 团队帮助 Google Drive 中的 OCR 实施，但我不确定以他们的方式生成 img 标签的过程是什么。

幕后发生了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T07:37:46.117

我不能确定到底发生了什么，但我会把我的发现告诉你。如果您查看驱动器中文件的 pdf 视图的 HTML 代码，您会发现类似这样的内容。

```
<div id="page-pane" class="">
   <div id=":2h.page.0" class="page-element goog-inline-block" style="width: 820px;">
      <div>
         <div class="highlight-pane"></div>
         <div class="highlight-pane">
            <div class="highlight selection-highlight" style="left: 154px; top: 142px; width: 268px; height: 13px;"></div>
            <div class="highlight selection-highlight" style="left: 105px; top: 164px; width: 73px; height: 14px;"></div>
            <div class="highlight selection-highlight" style="left: 154px; top: 181px; width: 128px; height: 13px;"></div>
         </div>
         <div class="highlight-pane"></div>
         <div class="highlight-pane"></div>
         <img class="page-image" style="width: 800px; height: 1131px; display: none;" src="https://docs.google.com/file/d/0BzxfQAgMGNM6VGg4RFlBZkdoOWM/image?pagenumber=1&amp;w=138" /><img class="page-image" style="width: 800px;" src="https://docs.google.com/file/d/0BzxfQAgMGNM6VGg4RFlBZkdoOWM/image?pagenumber=1&amp;w=800" />
         <p id=":2h.a11y.0" class="accessibility-text" tabindex="-1"></p>
      </div>
   </div> 
```

（pdf的第0页）中有四个`highlight-pane`div和一个`img`div 。div 显示您谈论的图像`2h.page.0`。`img`这只是一个简单的图像，这里没有 OCR。您提到的选定文本来自第二个`highlight-pane`，当您在图像上拖动一个框时，它会动态添加 div。第二个中的三个 div`highlight-pane`代表选定的文本（对应于三行选定的文本）。

当您访问页面时会发生以下情况。

*   从存储在驱动器中的 pdf 查看页面图像。
*   您在页面上选择了一些东西。您创建一个拖动框。
*   选择触发在 pdf 上运行 OCR 的 javascript（可能已经计算了 OCR 输出）。
*   OCR的输出添加到div里面的`highlight-pane`div

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T02:47:44.650

> OCR 有两种基本方法：矩阵匹配和特征提取。在识别字符的两种方式中，矩阵匹配是更简单、更常见的一种。
> 
> 矩阵匹配将 OCR 扫描仪视为字符的内容与字符矩阵或模板库进行比较。当图像在给定的相似度范围内与这些规定的点矩阵之一匹配时，计算机将该图像标记为相应的 ASCII 字符。
> 
> 特征提取是没有严格匹配规定模板的 OCR。也称为智能字符识别 (ICR) 或拓扑特征分析，此方法因制造商应用了多少“计算机智能”而异。计算机寻找一般特征，例如开放区域、封闭形状、对角线、线交叉点等。这种方法比矩阵匹配更通用。当 OCR 遇到有限的类型样式库时，矩阵匹配效果最好，每种样式几乎没有变化。在字符难以预测的情况下，特征或地形分析更胜一筹。

如果您想了解更多信息，请访问：[http ://www.dataid.com/aboutocr.htm](http://www.dataid.com/aboutocr.htm)

# php - 在 Imagemagick 和 PHP 中使用 Unicode 字符

> ID：14794186
> 
> 赞同：0
> 
> 时间：2013-02-10T02:46:23.263
> 
> 标签：php, regex, imagemagick

我正在尝试为 imagemagick 提供文本，它给了我一个曲线球：

```
Bần chỉ là một anh nghèo 
```

根据[http://www.imagemagick.org/Usage/text/#unicode](http://www.imagemagick.org/Usage/text/#unicode)，我需要做的就是将扩展字符包装在 \x{} 中。使用 json_encode，我可以轻松接近：

```
print json_encode("Bần chỉ là một anh nghèo");  // Output is "B\u1ea7n ch\u1ec9 l\u00e0 m\u1ed9t anh ngh\u00e8o" 
```

现在，我需要做的就是把它从`"B\u1ea7n ch\u1ec9 l\u00e0 m\u1ed9t anh ngh\u00e8o"`到`"B\x{1ea7}n ch\x{1ec9} l\x{00e0} m\x{1ed9}t anh ngh\x{00e8o}"`

关于 PHP 中的正则表达式有什么建议吗？

编辑：根据 icktoofay 的反馈，我认为 RegEx 不是正确的解决方案。我想我需要以不同的方式执行我的命令。我的代码基本上是在做：

```
$cmd = "convert -fill black -font Oswald -pointsize 72 label:'" . addslashes($text) . "' logo.png"
exec($cmd); 
```

也可以在这里打开任何可能的安全漏洞。我认为addlashes会做到这一点，但是......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T02:54:37.053

我认为你误解了这个例子。ImageMagick 采用 UTF-8 输入。这`\x{236A}`是输出到 ImageMagick 的嵌入式 Perl 脚本的一部分。真的，你要做的只是给 ImageMagick 一些 UTF-8 文本。

* * *

仔细研究一下，我猜你的问题是 PHP 没有以理智的方式处理 UTF-8 命令行参数。我检查了是否有另一种方式（比如，[`execv`](https://bugs.php.net/bug.php?id=10937)），不幸的是，没有。一种解决方法可能是写入临时文件并使用 ImageMagick 的`@`语法：

```
$temp_file_name = tempnam(sys_get_temp_dir(), "txt");
file_put_contents($temp_file_name, $text);
$cmd = "convert ... label:@" . escapeshellarg($temp_file_name) . "...";
exec($cmd);
unlink($temp_file_name); 
```

# c# - 如何像在 VB.NET 中一样使用 C# 在 lambda 表达式中创建匿名方法？

> ID：14794188
> 
> 赞同：-1
> 
> 时间：2013-02-10T02:46:55.493
> 
> 标签：c#, .net, lambda, anonymous-methods

在 VB.NET 中，我可以这样做：

```
MyArray.Select(Function(a)
                   Dim x as string
                   x = a
                   Return x
               End Function) 
```

我怎样才能在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T02:49:00.610

```
myArray.Select(a => {
    ...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T02:50:15.063

看起来 VB.Net 只是在 c# 中选择 MyArray 中的每个元素

```
MyArray.Select(a => (string) a); 
```

要使其成为一种方法，请使用大括号：

```
MyArray.Select(a =>
 {
   ...
   return ...;
 }); 
```

# java - 在Java中创建类似结构的数据结构

> ID：14794196
> 
> 赞同：12
> 
> 时间：2013-02-10T02:48:18.020
> 
> 标签：java, c, data-structures

我是 Java 新手，我正在尝试找到一种方法来存储信息，例如 C 中的结构。例如，我想让一个程序雇用员工。它将从用户那里获取名字、姓氏和身份证号码并将其存储起来。然后，用户可以根据条件查看该信息（例如，如果数据库有超过 1 名员工）。任何人都可以建议这样做的最佳方法吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-10T03:02:06.333

C 中的 struct 就像 Java 中的类一样，而且功能更强大，因为 Java 中的类可以包含方法，而 C++ 可以。您创建一个新类。例如 ：

```
 class Employee {
       private String name;
       private int code;

   // constructor
   public Employee(String name, int code) {
      this.name = name;
      this.code = code;
   }

       // getter
       public String getName() { return name; }
       public int getCode() { return code; }
       // setter

       public void setName(String name) { this.name = name; }
       public void setCode(int code) { this.code = code; }
    } 
```

当你想创建多个员工时，就像在 C 中一样创建数组：

```
Employee[] arr = new Employee[100];  // new stands for create an array object
arr[0] = new Employee("Peter", 100); // new stands for create an employee object
arr[1] = new Employee("Mary", 90); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-13T15:51:36.413

我将创建一个带有公共字段和默认构造函数的公共类，如下所示：

```
 public class Employee {
       public String name, last_name;

   // constructor
   public Employee() {
      this.name = "";
      this.last_name= "";
   }

    }

  ....
  //when using it
  Employee e = new Employee();
  e.name ="Joe";
  e.last_name = "Doe"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-04-22T08:15:55.227

在 Java 16 中有`Records`（[JDK 增强提案 395](https://openjdk.java.net/jeps/395)）：

```
public record Employee(String firstName, String lastName, String id) {
} 
```

这带有一个规范的构造函数、字段访问器`hashCode()`和`equals()`实现`toString()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-01T06:40:50.577

我对 Java 不支持的结构有一个大问题。我正在编写一个 Android 应用程序，它通过蓝牙从基于嵌入式 ARM 的设备（用“C”编写）接收数据。接收到的数据是一个打包的字节数组，其中包含我的嵌入式设备的 EEPROM 的内容。

在“C”、C++ 或“C#”中，我可以简单地将这个字节流“转换”为表示嵌入式设备上 EEPROM 的结构，并通过引用它们以编程方式使用该结构的成员。在 Java 中，我没有这个选项，也没有好办法，因为 Java（除了支持打包类的晦涩的 IBM 版本）不允许您拥有“打包”类，其中类成员被打包每个班级成员的页眉和页脚。

# jscript - 如何通过 TestComplete 脚本启动浏览器？

> ID：14794216
> 
> 赞同：0
> 
> 时间：2013-02-10T02:51:44.683
> 
> 标签：jscript, testcomplete

我刚刚安装了 TestComplete 9，由于某种我无法弄清楚的原因，我的 JScript 脚本不会启动我的浏览器。我已将完整的浏览器路径添加到 TestedApps。我是 TC 的新手，但我认为由于脚本是项目的一部分，它应该继承 TestedApps？

用 IE、Chrome 和 Firefox 试过这个。

任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T19:01:28.503

试试这个 JScript 代码：

```
Browsers.Item(btIExplorer).Run("http://www.google.com"); 
```

# c - 是否可以连接两个管道/套接字？

> ID：14794218
> 
> 赞同：0
> 
> 时间：2013-02-10T02:51:46.930
> 
> 标签：c, sockets, unix, pipe, file-descriptor

我想知道是否可以连接两个管道或套接字。让我们假设有两个管道/套接字对。第一个有两个文件描述符A和B，第二个有两个文件描述符C和D。是否可以将B连接到C以便能够写入A并从D读取数据？除了在用户空间中读取表单 B 并写入 C 之外？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T02:59:47.063

如果您只是想从一个套接字读取并写入另一个套接字而不将数据复制到用户空间，请查看[http://linux.die.net/man/2/sendfile](http://linux.die.net/man/2/sendfile)。你需要一个相当新的 Linux。

# sass - 使用数组值作为变量

> ID：14794220
> 
> 赞同：1
> 
> 时间：2013-02-10T02:52:28.727
> 
> 标签：sass

假设我有这些颜色：

```
$everlastingGreeN: #232553;
$vividRed: #3435454;
// and many more
//and define those:
$colors: (everlastingGreeN, vividRed); 
```

如何迭代这些值，以便可以使用颜色名称作为类名，然后使用值作为背景颜色？

```
@each $colors in $colors{
    &.#{$colors} {
        background: {color value};
        &:hover {
            background: darken({color value}, 10%);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T03:48:55.930

您正在寻找的是列表列表。

```
$everlastingGreeN: #232553;
$vividRed: #343545;
// and many more
//and define those:
$colors: everlastingGreeN $everlastingGreeN, vividRed $vividRed;

@each $color in $colors {
    &.#{nth($color, 1)} {
        background: nth($color, 2);
        &:hover {
            background: darken(nth($color, 2), 10%);
        }
    }
} 
```

# tfs - 新手队城市问题

> ID：14794223
> 
> 赞同：0
> 
> 时间：2013-02-10T02:53:04.443
> 
> 标签：tfs, continuous-integration, teamcity

我正在与团队城市一起为 CI 工作，对此非常满意。我用它从 Tfs 构建并构建我的代码。作为一个新手，我有一些问题。

1.  我有我的应用程序用于版本号的版本信息。如何在每次构建时增加它？
2.  我对我的代码运行代码分析和风格警察分析。这些设置文件位于解决方案之外，因为它们在多个解决方案之间共享。构建时如何最好地引用这些？可以将它们所在的目录与要构建的源代码一起拉出吗？
3.  从 tfs 签入中提取每个构建后，有什么方法可以生成发行说明文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:00:19.440

1.  您可以使用 TeamCity 执行此操作，这是相关问题：[Assembly Versioning with TeamCity](https://stackoverflow.com/questions/1223245/assembly-versioning-with-teamcity)

2.  由于没有使用过 TFS，我无法确定如何执行此操作，但是从外观上看，本指南关于“工作场所映射”的部分似乎与我们将此类文件拉入 TeamCity 构建项目的方式相匹配: [http://tfsguide.codeplex.com/wikipage?title=Chapter%206%20-%20Managing%20Source%20Control%20Dependencies%20in%20Visual%20Studio%20Team%20System&ProjectName=tfsguide](http://tfsguide.codeplex.com/wikipage?title=Chapter%206%20-%20Managing%20Source%20Control%20Dependencies%20in%20Visual%20Studio%20Team%20System&ProjectName=tfsguide)

3.  不是开箱即用，您必须自己使用您喜欢的任何脚本（MSBuild、命令行等）并在 TFS 上调用相关命令：http: [//msdn.microsoft.com/en-us/library/z51z7zy0 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/z51z7zy0%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T19:49:24.063

1.  您可以使用“[在构建配置中定义和使用构建参数](http://confluence.jetbrains.com/display/TCD7/Defining+and+Using+Build+Parameters+in+Build+Configuration)”来定义环境变量当前构建 ID。检查[预定义的构建参数](http://confluence.jetbrains.com/display/TCD7/Predefined+Build+Parameters)中的可用值。
2.  您可以使用多个[VCS Roots](http://confluence.jetbrains.com/display/TCD7/Configuring+VCS+Roots)，并从共享根目录检出配置。
3.  仅使用您的脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T15:07:25.913

回答问题 2。

您可以创建一个构建配置，将设置文件发布为人工制品。然后，需要这些设置文件的每个配置都可以对该项目具有快照依赖项和人工制品依赖项。设置工件依赖项时，您要选择“来自同一构建链”。

有关依赖项的更多信息，请参阅 [http://blogs.jetbrains.com/teamcity/2012/04/24/teamcity-build-dependencies-2/中的“同时使用工件和快照依赖项”部分](http://blogs.jetbrains.com/teamcity/2012/04/24/teamcity-build-dependencies-2/)

# objective-c - 目标c中的按钮崩溃程序

> ID：14794224
> 
> 赞同：0
> 
> 时间：2013-02-10T02:53:05.570
> 
> 标签：objective-c, uibutton

我正在尝试在目标 c 中创建一个简单的按钮、文本字段、标签程序，但我遇到了按钮问题。

在文件`viewController.m`中，我有以下代码：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button addTarget:self action:@selector(buttonPressed) forControlEvents:UIControlEventTouchDown];

[button setTitle:@"Look up" forState:UIControlStateNormal];
button.frame = CGRectMake(20,108,97,37);
[self.view addSubview:button]; 
```

和

```
- (IBAction) buttonPressed:(id) sender  {
[_textField resignFirstResponder];
_label.text = textField.text;
} 
```

据我了解，该按钮应该在我单击此按钮后获取我的文本框中的内容并将其放入标签中。但取而代之的是，按下按钮将我带到`main.m`返回线上。它说程序已暂停。如果我再次尝试使用该程序，它就不起作用了。我已经在网上与其他代码交叉检查了这个按钮片段，但不能完全弄清楚为什么我的失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:39:22.973

您在这一行漏掉了一个冒号

```
[button addTarget:self action:@selector(buttonPressed) forControlEvents:UIControlEventTouchDown]; 
```

您的按钮正在调用一个不存在的方法，这就是它崩溃的原因。

应该

```
[button addTarget:self action:@selector(buttonPressed:) forControlEvents:UIControlEventTouchDown]; 
```

或...更改您的 buttonPressed 方法的签名

```
- (IBAction) buttonPressed:(id) sender; 
```

到

```
 - (IBAction) buttonPressed; 
```

您应该在日志中看到一条消息，例如

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[ViewController buttonPressed]: unrecognized selector sent to instance 
```

# asp.net - 我如何在用户离开某个 aspx 站点之前更新我的数据库

> ID：14794226
> 
> 赞同：1
> 
> 时间：2013-02-10T02:53:16.260
> 
> 标签：asp.net, ajax, wcf

我目前正在尝试通过启用 AJAX 的 WCF 通过数据库进行更新，但是我似乎无法触发服务中的约定功能。有没有人有想法？我已经放置了脚本管理器和对服务器的引用，并且我已经在同一页面中应用了相同的理论，并且其他功能完美运行，但是这个似乎不起作用。

这是我的代码

```
 window.onbeforeunload = function () {

        alert("alerting server");
        var service = new ServiceNameSpace.Service();
        service.Function(document.getElementById("info2").value, 
                         document.getElementById("Info1").value, Recieves, 
                         FailsRecievesLogout, null);
    }

    [OperationContract]
    public void DoWork(string info2, string info1)
    {
        //code
    } 
```

标记：

```
 <asp:ScriptManager ID="ScriptManager1" EnablePageMethods="true" runat="server">
        <Services>
            <asp:ServiceReference Path="~/ServiceName.svc" />
        </Services>
 </asp:ScriptManager> 
```

# audio - 有关 C/C++ API/库的信息，可在按下键盘键时实现高效的声音输出

> ID：14794228
> 
> 赞同：0
> 
> 时间：2013-02-10T02:53:32.000
> 
> 标签：audio, background-process

我想创建一个 Windows 应用程序（使用 C/C++）供个人使用，它在后台运行，当我按下键盘上的键时它会播放声音。以下是我要制作的应用程序类型的示例：

[http://www.softpedia.com/get/Desktop-Enhancements/Shell-Replacements/Tiper.shtml](http://www.softpedia.com/get/Desktop-Enhancements/Shell-Replacements/Tiper.shtml)

我对创建自己的版本感兴趣的原因是我想让它比我发现的当前示例更具可扩展性。例如，我上面提到的 Tiper 应用程序允许为以下设置声音：

*   输入字母和数字的声音（每个字母和数字的声音相同）
*   输入“Enter”键的声音
*   键入“退格”键的声音
*   键入“空格”键的声音
*   键入“Tab”、“Home”、“PgUp”等键的声音

还行吧。但是，我想创建这种类型的应用程序的版本，它允许：

*   为键盘的每个键设置不同的声音。也就是说，“A”的声音不同，“B”的声音不同，等等。
*   为按键组合设置不同的声音。例如，在按下 Ctrl+S 时设置独特的声音。

**我对有关哪些 Windows C/C++ API、库、函数等的信息感兴趣，这将为我提供最佳的声音播放性能。**也就是说，按下键盘键和听到声音之间的延迟最小。这些是最终解决方案的属性需要考虑的因素：

*   该应用程序将有很多声音文件加载到 ram 中；假设每个键和所需的组合键都有一个。所以它可能是大约 150 个不同的声音文件。我将使用的计算机至少有 8GB 内存。
*   该应用程序只需要在 Windows 7 及更高版本中运行。
*   我每分钟打字大约 60 个字，所以声音应该可以叠加。也就是说，如果我按“A”，然后快速按“D”，“A”的声音应该会继续播放，而不是因为“D”正在播放而被切断。我认为同时播放大约 5 个声音就足够了。
*   假设我还应该考虑读取键盘“keydown”事件的速度。不过，我认为使用 Windows API 获取此类信息的标准方法应该足够好。

谢谢

# python - Python - 带有气泡排序模块的小字符串连接/语法错误

> ID：14794234
> 
> 赞同：0
> 
> 时间：2013-02-10T02:54:52.843
> 
> 标签：python, string, variables, concatenation

我正在开发一个程序，对用户输入的一系列数字进行冒泡排序。我似乎有一个小的语法错误。这就是我所拥有的：

```
my_list = '[' + input('Please enter 5 numbers, separated by commas. ') + ']'
length = len(my_list)
for i in range(length):
    for j in range(length-1):
        if my_list[j] > my_list[j+1]:
            my_list[j], my_list[j+1] = my_list[j+1], my_list[j]
        print(my_list) 
```

这给我带来了：

```
File "C:/Users/Luke/Dropbox/Programming/SDD real.py", line 19, in <module>
my_list[j], my_list[j+1] = my_list[j+1], my_list[j] 
```

TypeError：“str”对象不支持项目分配

如果我将 my_list 设置为预定义的数字列表，例如：[1,5,2,3,4]，则冒泡排序会按预期运行。我只需要弄清楚如何正确地将用户输入的数字存储在数组中。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T02:59:47.133

代替：

```
my_list = '[' + input('Please enter 5 numbers, separated by commas. ') + ']' 
```

和：

```
my_list = list(map(int, input('Please enter 5 numbers, separated by commas. ').strip().split(','))) 
```

或者：

```
my_list = [int(i) for i in input('Please enter 5 numbers, separated by commas. ').strip().split(',')] 
```

在您的代码中，`my_list`不是列表，而是字符串。使用`str.strip`删除空格的`str.split`方法和拆分字符串并返回结果列表的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T02:59:53.320

这不是您应该创建列表的方式。相反，请执行以下操作：

```
>>> my_list = list(input('Please enter 5 numbers, separated by commas. '))
Please enter 5 numbers, separated by commas. 1, 2, 3, 4, 5
>>> print my_list
[1, 2, 3, 4, 5] 
```

# ios - 在 iOS 中解析 JSON 时遇到一些错误？

> ID：14794235
> 
> 赞同：0
> 
> 时间：2013-02-10T02:55:45.790
> 
> 标签：ios, xcode, json, nsstring, nsarray

这是我的解析代码：

```
 - (void)connectionDidFinishLoading:(NSURLConnection *)connection{
NSError *myError = nil;
NSDictionary *flighttrackjson = [NSJSONSerialization JSONObjectWithData:jsonresponse options:NSJSONReadingMutableLeaves  error:&myError];
NSArray *FlightStatus =  [flighttrackjson objectForKey:@"flightStatuses"];
NSString *FlightID = [FlightStatus valueForKey:@"flightId"];
NSString *DepartACode = [FlightStatus valueForKey:@"departureAirportFsCode"];
NSString *ArivalACode = [FlightStatus valueForKey:@"arrivalAirportFsCode"];
NSArray *DepartATime = [FlightStatus valueForKey:@"departureDate"];
NSArray *AriveATime = [FlightStatus valueForKey:@"arrivalDate"];
NSString *DepartTimeString = [DepartATime valueForKey:@"dateLocal"];
NSString *ArriveTimeString = [AriveATime valueForKey:@"dateUtc"];
NSArray *Delays = [FlightStatus valueForKey:@"delays"];
NSString *DepartDelayMinutes = [Delays valueForKey:@"departureGateDelayMinutes"];
NSString *ArriveDelayMinutes = [Delays valueForKey:@"arrivalGateDelayMinutes"];
NSArray *AirportInfo = [FlightStatus valueForKey:@"airportResources"];
NSString *DepartTerminal = [AirportInfo valueForKey:@"departureTerminal"];
NSString *DepartAGate = [AirportInfo valueForKey:@"departureGate"];
NSString *ArriveTerminal = [AirportInfo valueForKey:@"arrivalTerminal"];
NSString *ArriveAGate = [AirportInfo valueForKey:@"arrivalGate"];
NSString *BaggageClaim = [AirportInfo valueForKey:@"baggage"];
flightID.text=FlightID;
DepartCode.text=DepartACode;
ArrivalCode.text=ArivalACode;
DepartTime.text=DepartTimeString;
ArriveTime.text=ArriveTimeString;
DepartDelay.text=DepartDelayMinutes;
ArriveDelay.text=ArriveDelayMinutes;
DepartTerm.text=DepartTerminal;
DepartGate.text=DepartAGate;
ArriveTerm.text=ArriveTerminal;
ArriveGate.text=ArriveAGate;
Baggage.text=BaggageClaim; 
} 
```

当我运行它时，它给了我这个：

2013-02-09 21:51:40.262 Places[7083:c07] -[__NSArrayI isEqualToString:]：无法识别的选择器发送到实例 0x8262b50 2013-02-09 21:51:40.263 Places[7083:c07] ***由于应用程序终止未捕获的异常“NSInvalidArgumentException”，原因：“-[__NSArrayI isEqualToString:]：无法识别的选择器发送到实例 0x8262b50”

并强调这一点：

返回 UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));

我的代码看起来很糟糕还是有人至少可以解释这个错误可能意味着什么？

这是我正在使用的。[http://pastebin.com/vv8ScBfZ](http://pastebin.com/vv8ScBfZ)

对不起，我对这一切都很陌生。

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T05:42:51.657

看起来 FlightStatus 是一个带有一个对象的数组（带有一堆键的字典）。由于它是一个数组，因此您必须先获取该对象，然后才能在其包含的字典上使用 valueForKey:。修复它的最简单方法是更改​​它：

```
NSArray *FlightStatus =  [flighttrackjson objectForKey:@"flightStatuses"]; 
```

对此：

```
NSDictionary *FlightStatus =  [[flighttrackjson objectForKey:@"flightStatuses"] lastObject]; 
```

# php - 从变量中创建自定义日期

> ID：14794238
> 
> 赞同：-2
> 
> 时间：2013-02-10T02:56:11.660
> 
> 标签：php, date

我正在使用 PHP 并且有一个可变数字，它是动态的，我想代表它创建一个日期。

```
$number = 4; 
```

我可以创建一天后的日期

`echo date('c', strtotime('+1 day'));`

如果我想在特定天数（即`$number`天数）之后创建一个日期怎么办。

如何代表`$number`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T03:03:13.813

如果我理解正确，那么您可以执行以下操作：

```
$number = 4;
$days = "+".$number." day";
echo date('c', strtotime($days)); 
```

如果这不是您想要做的，那么请澄清您的问题

# jquery - 在 jquery 选择器中包含多个类

> ID：14794242
> 
> 赞同：2
> 
> 时间：2013-02-10T02:56:32.873
> 
> 标签：jquery

```
<ul class="bjqs video"> 
```

什么是能够将两个类从 html 包含并选择到下面的 jquery 中的正确方法，因为目前它只包含一个类：

```
jQuery(document).ready(function($) {
  $('#banner-video_<?php echo $key; ?>').bjqs({
    animtype:'slide'
  });  
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T02:58:28.487

jQuery 选择器的工作方式类似于 CSS 选择器：

```
$('.bjqs.video') 
```

[http://api.jquery.com/class-selector/](http://api.jquery.com/class-selector/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T02:57:36.960

如果你想使用多个选择器，在选择器之间使用逗号作为一个字符串，它会起作用。

例子：

```
$(".classone , .classtwo").method(); 
```

请注意，这将匹配匹配第一个选择器或第二个选择器（或两者）的所有元素；它不会强制匹配的元素同时匹配两者。如果您想强制匹配具有 BOTH 类的元素，请改为执行以下操作：

例子：

```
$(".classone.classtwo").method(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T03:04:58.373

我将按如下方式重写它以针对特定的 ul 和分配给它的类。

```
$('ul.bjqs.video'); 
```

# android - 在 Android 2 中隐藏状态栏，但在 Android 3/4 中保留操作栏

> ID：14794245
> 
> 赞同：2
> 
> 时间：2013-02-10T02:57:29.670
> 
> 标签：android, hide, android-actionbar, statusbar, android-theme

我一直在尝试各种方法，但没有成功。我正在为孩子们做一个全屏绘画应用程序。但是如果没有 Manifest.xml 中的以下行，它就无法全屏显示：

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

但是这种说法会在 Android 3/4 手机/平板电脑中引起很多行为问题。要么操作栏消失了，要么我全屏无法访问菜单。

删除该行并使用以下代码：

```
requestWindowFeature(Window.FEATURE_NO_TITLE);        
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

适用于 Android 3/4 手机，但在 Android 2 上会有状态栏！

如何删除 Android 2 上的状态栏但仍支持 Android 3/4？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T03:22:09.647

您可以使用 values-v11 文件夹来执行此操作。

在您的清单中：

```
android:theme="@style/MyTheme" 
```

值/样式.xml：

```
<style name="MyTheme" parent="android:Theme.NoTitleBar.Fullscreen">
</style> 
```

值-v11/styles.xml：

```
<style name="MyTheme" parent="android:Theme.Holo">
</style> 
```

# jquery - 一个返回两个值的滑块

> ID：14794256
> 
> 赞同：1
> 
> 时间：2013-02-10T02:59:28.533
> 
> 标签：jquery, uislider

我想使用 jQuery 创建一个允许选择两个不同值的滑块。老实说，我不知道从哪里开始。

我希望它在两边都显示正值，但返回两个值。

例如：

500---------0----------500

如果滑块向左侧移动，则返回“amount1”。如果它向右移动，则返回“amount2”。这两个数字都是正数。我已经玩了几个小时了，但无济于事。

这是我正在使用的示例代码。这可能吗？

```
<link rel="stylesheet" href="http://code.jquery.com/ui/1.10.0/themes/base/jquery-ui.css" />
<script src="http://code.jquery.com/jquery-1.8.3.js"></script>
<script src="http://code.jquery.com/ui/1.10.0/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css" />
<script>
$(function() {
$( "#slider" ).slider({
  value:0,
  min: 500,
  max: 500,
  slide: function( event, ui ) {
    $( "#amount" ).val( "$" + ui.value );
  }
});
$( "#amount1" ).val( "$" + $( "#slider" ).slider( "value" ) );
});
</script>
</head>
<body>

<p>
<label for="amount">Amount</label>
<input type="text" id="amount1" style="border: 0; color: #f6931f; font-weight: bold;" />
<input type="text" id="amount2" style="border: 0; color: #f6931f; font-weight: bold;" />
</p> 
```

感谢您的任何意见！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T03:10:12.090

我会这样做：

```
$(function() {
    $( "#slider" ).slider({
      value:0,
      min: -500,
      max: 500,
      slide: function( event, ui ) {
          if (ui.value > 0){
             $( "#amount1" ).val( "$" + ui.value );
          }else{
               //multiply by -1 to make positive
             $( "#amount2" ).val( "$" + parseInt(ui.value * -1));
          }
      }
    });
}); 
```

演示：http: [//jsfiddle.net/TrgJR/](http://jsfiddle.net/TrgJR/)

希望这会有所帮助，如果您有任何问题，请告诉我！

* * *

编辑：

这是一个清理后的版本。

谢谢您，mrtsherman & Doorknob 的贡献！

```
$(function () {
    $("#slider").slider({
        value: 0,
        min: -500,
        max: 500,
        step: 10,
        slide: function (event, ui) {
            if (ui.value > 0) {
                $("#amount2").val("$" + ui.value);
                $("#amount1").val("");
            } else {
                //multiply by -1 to make positive
                $("#amount1").val("$" + parseInt(ui.value * -1));
                $("#amount2").val("");
            }
        }
    });
}); 
```

演示：http: [//jsfiddle.net/PXDJb/1/](http://jsfiddle.net/PXDJb/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T03:14:03.797

如果你想要一个类似的，你可以在这里找到它[http://egorkhmelev.github.com/jslider/](http://egorkhmelev.github.com/jslider/)

（或者）

这是另一种方法：**[DEMO](http://jsfiddle.net/TYyfZ/)**

```
$(function() {
    $( "#slider-range" ).slider({
        range: true,
        min: 0,
        max: 1000,
        values: [ 75, 300, ],
        slide: function( event, ui ) {
            $( "#amount" ).val( "$" + ui.values[ 0 ] + " - $" + ui.values[ 1 ] );
        }
    });
    $( "#amount" ).val( "$" + $( "#slider-range" ).slider( "values", 0 ) +
        " - $" + $( "#slider-range" ).slider( "values", 1 ) );
}); 
```

# c++ - 实现与头文件

> ID：14794263
> 
> 赞同：0
> 
> 时间：2013-02-10T03:00:00.050
> 
> 标签：c++

我已经编写了我的程序，当我将所有内容都保存在头文件中时，它就可以工作了，然后有了我的主文件。我现在将它们拆分为实现文件，但 Eclipse 不断给我错误。它在构造函数和函数的每个左大括号处都给我错误。它对所有这些都说“重新定义（构造函数或方法的名称），以前在这里声明过。” 我做错了什么，因为它在头文件中工作？

```
#include "KeyValuePair.h"

template<typename Key,typename Value>
KeyValuePair<Key,Value>::KeyValuePair()
{ // error here
}

template<typename Key,typename Value>
void KeyValuePair<Key,Value>::setPair(Key key, Value value)
{ // error here
    pairKey = key;
    pairValue = value;
}

template<typename Key,typename Value>
Key KeyValuePair<Key,Value>::getKey() const
{ // error here
    return pairKey;
}

template<typename Key,typename Value>
Value KeyValuePair<Key,Value>::getValue() const
{ // error here
    return pairValue;
} 
```

头文件：

```
#ifndef _KEYVALUEPAIR_H_
#define _KEYVALUEPAIR_H_

template<typename Key,typename Value>
class KeyValuePair
{
    private:
        Key pairKey;
        Value pairValue;

    public:
        KeyValuePair();
        void setPair(Key key,Value value);
        Key getKey() const;
        Value getValue() const;
};

#include "KeyValuePair.cpp"
#endif 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T03:11:29.700

就目前而言，您的 KeyValuePair.h 文件`#include KeyValuePair.cpp`的底部有一个。KeyValuePair.cpp 也#includes 头文件。头文件具有通常的“保护”（#ifndef _KEYVALUEPAIR_H_）以防止被多次包含，但您的 CPP 文件没有。因此，当您尝试编译 CPP 文件时，它会拉入 H 文件，这会再次拉入 CPP 文件。因此，多重定义错误。

对您来说最*简单*但不一定最正确的解决方案是`#include "KeyValuePair.h"`从 KeyValueHeader.cpp 文件的顶部删除该行。

我怀疑您正在尝试在 Makefile 中实际编译 KeyValuePair.cpp，而您不需要（也不应该）这样做。您只需要拥有需要模板类的源文件即可`#include "KeyValuePair.h"`。

模板的标准做法是将声明和实现保留在同一个头文件中——这隐含地避免了这类问题。在模板类声明中内联模板类方法的实现并且全部包含在单个头文件中的情况并不少见。破坏了你学到的关于接口与实现分离的一切，但更容易使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T03:08:24.443

您需要将模板的所有代码放入头文件中，因为它们是按需编译的。

请参阅[模板](http://www.cplusplus.com/doc/tutorial/templates/)文档。

# .htaccess - 使用 htaccess RewriteRule 进行链接重定向

> ID：14794266
> 
> 赞同：0
> 
> 时间：2013-02-10T03:01:35.740
> 
> 标签：.htaccess, mod-rewrite, redirect, url-rewriting, rewrite

我的网站上有这些链接：

www.example.org/folder/files.php?file=folder/document.pdf

www.example.org/folder/files.php?force&file=2009.pdf

* * *

我想重定向到：

www.example.org/files/folder/document.pdf

www.example.org/files/2009.pdf

我试过 ：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteRule ^files/(.*)$ /files.php?file=$1 [R=301,L]  
</IfModule> 
```

但不起作用！有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T17:51:41.953

`RewriteRule ^files/(.*)$ /files.php?file=$1 [R=301,L]`

这条规则有两个问题......首先，您匹配的内容需要首先出现在规则中，然后您要重写的内容出现在第二个 - 你有倒退。

但是，一旦你扭转了这一点，你就会遇到第二个问题——你不能在 RewriteRule 中匹配查询字符串，你需要在 RewriteCond 中匹配它们：

要匹配`www.example.org/folder/files.php?force&file=2009.pdf`并将其重定向给`www.example.org/files/2009.pdf`您，请执行以下操作：

```
RewriteCond %{QUERY_STRING} ^force&file=(.*)$ [NC]
RewriteRule ^folder/files.php$ /files/%1 [R=301, L] 
```

`%1`匹配 RewriteCond 括号中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T03:16:02.973

先在谷歌上搜索。google 上显示的 htaccess 的第一件事是 htaccess 重定向。我认为 `Redirect /olddirectory/oldfile.html http://example.com/newdirectory/newfile.html`（与空格相同的行）应该可以。转到[http://kb.mediatemple.net/questions/242/How+do+I+redirect+my+site+using+a+.htaccess+file%3F](http://kb.mediatemple.net/questions/242/How+do+I+redirect+my+site+using+a+.htaccess+file%3F)。PHP 也将完成这项工作。在问他们之前，只需谷歌搜索。

# c# - 如何在 C# 中检查字符串的最后一个字符？

> ID：14794267
> 
> 赞同：41
> 
> 时间：2013-02-10T03:01:39.917
> 
> 标签：c#

我想找到一个字符串的最后一个字符，然后输入一个`if`说明，如果最后一个字符等于“A”、“B”或“C”，那么就执行某个操作。我如何获得最后一个字符？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-02-10T03:07:57.740

使用`endswith`字符串的方法：

```
if (string.EndsWith("A") || string.EndsWith("B"))
{
    //do stuff here
} 
```

下面是解释此方法的 MSDN 文章：

[http://msdn.microsoft.com/en-us/library/system.string.endswith(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.string.endswith(v=vs.71).aspx)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-10T03:03:53.517

我假设您实际上并不想要最后一个字符*位置*（应该是`yourString.Length - 1`），而是最后一个字符*本身*。您可以通过使用最后一个字符位置索引字符串来找到它：

```
yourString[yourString.Length - 1] 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-02-10T03:05:39.460

`string`是一个`zero based`数组`char`。

```
char last_char = mystring[mystring.Length - 1]; 
```

关于问题的第二部分，如果 char 是`A`, `B`,`C`

使用`if statement`

```
char last_char = mystring[mystring.Length - 1];
if (last_char == 'A' || last_char == 'B' || last_char == 'C')
{
    //perform action here
} 
```

使用`switch statement`

```
switch (last_char)
{
case 'A':
case 'B':
case 'C':
    // perform action here
    break
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2021-02-17T14:58:37.680

有一个**index-from-end 运算符**，如下所示：`^n`.

```
var list = new List<int>();

list[^1]  // this is the last element
list[^2]  // the second-to-last element
list[^n]  // etc. 
```

关于索引和范围的[官方文档](https://docs.microsoft.com/en-us/dotnet/csharp/tutorials/ranges-indexes)描述了这个操作符。需要注意的一件事是：如果列表 ( `System.ArgumentOutOfRangeException`) 中没有足够的元素，则此运算符可能会在运行时失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-29T19:17:54.007

您还可以通过使用 LINQ 来获取最后一个字符`myString.Last()`，尽管这可能比其他答案慢，并且它给您一个`char`，而不是`string`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-06T23:56:57.897

从**C# 8.0**开始，您可以使用新的语法形式来处理 a 中的特定字符，从而`System.Index`变得微不足道。您的场景示例：`System.Range``string`

```
var lastChar = aString[^1..]; // aString[Range.StartAt(new Index(1, fromEnd: true))

if (lastChar == "A" || lastChar == "B" || lastChar == "C")
    // perform action here 
```

此处的完整说明：[范围](https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/proposals/csharp-8.0/ranges)(Microsoft Docs)

# apache-karaf - Apache Karaf 的真实介绍

> ID：14794269
> 
> 赞同：2
> 
> 时间：2013-02-10T03:02:07.147
> 
> 标签：apache-karaf

我们正在寻找使用 Karaf，但他们的介绍/快速入门（主要的 Karaf 网站）几乎没有关于将应用程序部署到容器的内容 - 我知道，令人惊叹但真实。有人知道对卡拉夫完全陌生的人有用的介绍吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T14:23:15.683

我猜您看错了地方，因为用户和开发人员文档告诉您，您可以通过放入部署文件夹、使用 osgi:install url 安装、添加/安装功能等等来部署您的人工制品。我真的推荐 RTFM，它就在那里。如果您仍然没有找到您要查找的内容，请询问用户邮件列表。

在此[站点上](http://karaf.apache.org/manual/latest-2.3.x/index.html)，您将找到 Karaf 在线文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T12:32:21.897

以下是一些有用的链接：

*   如何使用 Karaf 控制台：[http ://karaf.apache.org/manual/latest/users-guide/console.html](http://karaf.apache.org/manual/latest/users-guide/console.html)
*   Christian Schneider 也有一些有用的教程：[http ://www.liquid-reality.de/display/liquid/Karaf+Tutorials](http://www.liquid-reality.de/display/liquid/Karaf+Tutorials)
*   Jean-Baptiste Onofre 博客（在 Google 上搜索）

请注意，Karaf 3 的 shell 命令略有不同，因此请确保您指向正确的 Karaf，或者学习如何将 Karaf 2.x 命令转换为 Karaf 3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-07T18:29:55.837

谷歌搜索关键字：**java、osgi bundle、activator**

将出现如何为 Karaf 编码的示例。例如：[http ://www.javaworld.com/javaworld/jw-03-2008/jw-03-osgi1.html?page=2](http://www.javaworld.com/javaworld/jw-03-2008/jw-03-osgi1.html?page=2)

此外，在学习了关键字（OSGI 和 bungle）之后，我注意到 netbeans 的项目类型为“OSGi Bundle”。多好。

# google-chrome - 如何使用 Firefox 或 Chrome 编辑缓存文件的数据大小？

> ID：14794270
> 
> 赞同：2
> 
> 时间：2013-02-10T03:02:10.447
> 
> 标签：google-chrome, firefox, caching, size

重现问题的步骤：

*   **第 1 步：**假设您已清理浏览器 (firefox) 上的缓存历史记录。

*   **第 2 步：**您在浏览器上键入 www.stackoverflow.com 以获取缓存文件夹中的一些新数据。

*   **第 3 步：**在浏览器中输入“cache:about”

*   **第 4 步：**单击“磁盘缓存设备/列出缓存条目”

*   **第 5 步：**我搜索一些已下载到我的缓存文件夹的“.png”文件。并注意到数据大小实际上是 16425 字节。

*   **第 6 步：**复制图像在计算机上的存储路径。

*   **第 7 步：**在继续处理有问题的问题之前，我通过单击此链接快速查看图像的外观。

*   **第 8 步：**检查图像

*   **第9步：**开始/运行/并粘贴我们最近复制的路径，图像已存储在您的系统上。

*   **第10步：**这是图像！但是我们必须手动输入“.png”

*   **第11步：**我看看它的样子：

*   **第 12 步：**我编辑图像我想更改文件的大小，并具有与浏览器缓存的真实大小不同的大小。所以我把图像变小并保存它。

*   **第 13 步：**我检查文件的大小是否真的发生了变化。以前是 17kb 现在是 3kb。

*   **第 14 步：**我删除了添加到文件名中的“.png”文本，以便浏览器可以读取它

*   **第 15 步：**现在我在浏览器上按重新加载，文件不会被读取！

预期结果： - 在示例中，为了便于理解，我使用了“.png”，但您没有得到相同的结果。在我的真正问题上，amb 试图让缓存读取一个 FLASH .swf 文件，我已经主动更改了它的原始数据大小。有什么想法吗？链接？我无法在互联网上找到有关如何让浏览器再次读取已下载文件的信息，即使大小已更改！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:05:12.597

关键是客户端将永远不会再次检查服务器是否已缓存，直到（并且如果）该元素的缓存已过期。将 HTTP 标头的最大期限设置为 10 分钟，如果自上次下载以来已超过 10 分钟，客户端将重新下载它。你不能仅仅因为大小改变而更新。除非您有 JS 或 ajax 或其他东西会根据客户端检查服务器以查看最近是否有更改时检索到的某些结果来更新客户端缓存，否则这是不可能的。

因此，如果您必须拥有它，您将必须根据服务器上的现有数据跟踪服务器是否发生变化。例如，服务器跟踪初始大小。如果您更改图像大小（或假设您的 Web 应用程序中的某些内容更改了它），服务器将知道这已在服务器上更改（因为它总是会在服务器上获取当前图像大小）。因此，您还需要在下载图像时使用 cookie 或 html5 localStorage 跟踪客户端上的图像大小。

因此，脚本的客户端部分在页面加载时请求服务器（也发送存储在 cookie 或 localStorage 中的图像大小），然后服务器脚本会将当前图像的大小与客户端发送的大小进行比较。如果不同，它会显式地使客户端缓存过期，这意味着客户端必须显式地重新下载图像。否则它什么也不做，只使用缓存的图像。

所以基本上，如果你想要这种功能，你需要像对待登录 cookiet 一样对待你的图像（服务器显式跟踪它、使其过期、设置新的、过期等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-11T00:25:58.353

我遇到了同样的问题，终于得到了解决，感谢这个线程。

这仅适用于火狐。转到 about:config 将变量“browser.cache.check_doc_frequency”（默认 3）编辑为 2（[http://kb.mozillazine.org/Browser.cache.check_doc_frequency](http://kb.mozillazine.org/Browser.cache.check_doc_frequency)）

编辑缓存目录中的文件。（不管新大小是否不同！）无需更改 chache_001 中的文件大小条目。

希望这可以帮助你。

编辑：只要确保文件大小小于 swf 文件的原始大小即可。

原因：我真的不知道，但是当我尝试为在线游戏编辑 swf 时，游戏无法再加载新的缓存文件（如 firefox 为该事物保留 x 内存字节，x 由服务器指定。 .但文件大于x字节，因此不会加载整个文件，也不会加载flash电影）。

我将 swf 中的一些图像编辑为相同大小的空白图像，重新编译并重新压缩以得到比原始 swf 更低的文件大小，并且成功了！

# c# - 使用继承作为包装器进行 Api 调用

> ID：14794279
> 
> 赞同：0
> 
> 时间：2013-02-10T03:04:40.470
> 
> 标签：c#, api, inheritance

我正在尝试构建一个应用程序来处理对 2 或 3 个相关 API 的大量 API 请求。我的一般策略是拥有一个基类`ApiRequest`：

```
List<Parameter> Parameters
Uri CombinedUri
string Results
string _Host 
```

和方法：

```
CombineUri() //combines the _Host and parameters into full Uri
MakeRequest() //makes the request and stores Results 
```

然后我会将该基类继承到许多不同的 Api 调用中，并在特定于该 Api 调用的那些函数中实现函数。

我遇到的问题是我调用`CombineUri()`了我的基类构造函数，但它需要`_Host`已经设置。但是，我想`_Host`成为每个子类中的常量，因为它特定于每个不同的 Api 调用。我不想记住`CombineUri`从每个派生类的构造函数中调用。

任何解决该问题的想法将不胜感激。此外，如果您有完全不同的设计理念来实现 Api 调用的基础，我会全力以赴。我不确定我的方法是最好的。

谢谢。

**我的解决方案：**

我实现了 John 和 Colin Pear 的想法。我把基`ApiRequest`改成抽象类，把`CombineUri()`方法移到`MakeRequest()`方法里。

我还更进一步，改成`ApiRequest`了泛型类，改成`_Host`了`static string`. 这样，每个子类都带有 subclass `ApiRequest<*subclassname*>`。由于泛型的属性，特定子类的每个对象都将共享一个 static `_Host`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T03:33:21.257

如何将 CombineUri() 设为私有，然后在 MakeRequest() 的实现中调用它。

这个类的用户不必知道他们需要调用两个方法，而且他们必须在调用 MakeRequest 之前调用 CombineUri。这是属于 MakeRequest 的实现细节。

可能我不完全理解这些类，但如果我理解了，那么我会将 CombineUri 设为私有并始终将其称为 MakeRequest 的第一部分。

# macos - bash：意外标记“换行符”附近的语法错误

> ID：14794282
> 
> 赞同：1
> 
> 时间：2013-02-10T03:05:22.917
> 
> 标签：macos, syntax, terminal, passwords

我正在尝试在我自己的计算机上测试 OS X Lion 中所谓的缺陷，即密码不受保护的程度（来自[这篇](http://null-byte.wonderhowto.com/how-to/hack-mac-os-x-lion-passwords-0130036)文章）。但是当我输入代码时，应该提取密码哈希的终端：

```
$ dscl localhost -read /Search/Users/<root user> 
```

我明白了：

```
-bash: syntax error near unexpected token `newline' 
```

有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T03:09:20.143

当您`<xxx>`在命令行命令中看到时，它通常表示“在此处替换某些内容”。例如，

```
$ ls <file> 
```

并不意味着`ls <file>`在终端中直接输入，而是在输入`ls`后跟一些文件名。

在这种情况下，他们希望您将根用户的名称替换为`<root user>`. 对于大多数机器来说，这很简单`root`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-15T15:14:31.560

在 Azure bash shell 中，如果您的方案是这样的：

$ az webapp 停止\

> ```
> --resource-group learn-f69ca399-f99b-4950-84a6-bda8206c6ba0 \
> --name <apiyoachola> 
> ```

bash：意外标记“换行符”附近的语法错误

这应该解决它

$ az webapp 停止\

> ```
> --resource-group learn-f69ca399-f99b-4950-84a6-bda8206c6ba0 \
> --name apiyoachola 
> ```

# iphone - 理解 Core Data 中的嵌套上下文

> ID：14794289
> 
> 赞同：4
> 
> 时间：2013-02-10T03:06:08.677
> 
> 标签：iphone, ios, objective-c, core-data

我有以下结构

持久存储 <-> 父上下文 <-> MOC（在主线程上）<-> 后台线程 MOC（MOC = 托管对象上下文）

所以我在后台做一些工作

```
// Create a background context.
NSManagedObjectContext* context = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
context.parentContext = self.document.managedObjectContext;
// Start using it, but in its own thread!
[context performBlock:^
{... 
```

我从表中获取一些对象并在上下文中删除其中一些对象。

```
NSFetchRequest* request = [NSFetchRequest fetchRequestWithEntityName:@"User"];
NSArray* userQueryResults = [context executeFetchRequest:request error:&error];
for (int i = 0; i < userQueryResults.count; i++)
{
   if(someCondition)
   [context deleteObject:[userQueryResults objectAtIndex:bla];
} 
```

现在，假设我只想将剩余的用户重新提取到一个数组中......

它会重新获取最初存在的所有用户还是仅重新获取未删除的用户？

如果我要保存我的“上下文”，会有什么不同吗？

基本上我试图理解使用嵌套上下文获取和保存之间的区别......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T10:37:38.660

您可以通过设置 -[NSFetchRequest setIncludesPendingChanges] 属性以两种方式重新获取用户。默认值为是。如果值为 NO，则获取请求将跳过检查未保存的更改，并且仅返回与持久存储中的谓词匹配的对象。

如果您保存子上下文，它只会将您的更改推送到父上下文中。最后，要查看持久存储中的更改，您需要保存父上下文。为此，您可以使用以下代码片段：

```
[context performBlock:^{
    NSError* error = nil;
    [context save:&error];
    [self.document.managedObjectContext performBlock:^{
        NSError* parentError = nil;
        [self.document.managedObjectContext save:&parentError];
    }];
}]; 
```

# asp.net - 水印图片位置[asp.net]

> ID：14794290
> 
> 赞同：-2
> 
> 时间：2013-02-10T03:06:10.217
> 
> 标签：asp.net, image, position, watermark

我正在尝试遵循这篇[文章](http://www.codeproject.com/Articles/2927/Creating-a-Watermarked-Photograph-with-GDI-for-NET)，它很容易实现**`text over image`**，现在我的问题是在上面提到的文章中，图像水印被放置在**距离左边 10 个像素的位置，**所以我如何将图像放置在**右上角，中上，左中，中心，右中，与底部相似**。

这是它被放置在右上角的方式：

```
int xPosOfWm = ((phWidth - wmWidth)-10);
int yPosOfWm = 10;

grWatermark.DrawImage(
  imgWatermark,
  new Rectangle(
    xPosOfWm, yPosOfWm,
    wmWidth, wmHeight
  ),
  0, 0,
  wmWidth, wmHeight,
  GraphicsUnit.Pixel,
  imageAttributes
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T03:35:01.967

问题是您必须先计算图像的高度和宽度

计算原始图像的高度和宽度

```
Image oImage="path";
var oheight=oImage.Height;
var oWidth=oImage.width; 
```

现在计算要放置在它上面的图像

```
var WmImage="path";
var wWheight=WmImage.Height;
var wWidth=WmoImage.width; 
```

右上

```
var left=oWidth-wWidth-10;
var top=oheight-10;
//draw the wate mark image on thse point
oImage.DrawImage(imgWatermark,new Rectangle(left,top,wmWidth,
wmHeight),0,0,wmWidth,wmHeight,GraphicsUnit.Pixel,imageAttributes); 
```

同样，您可以计算其他图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T03:35:04.617

当前代码没有将水印放在左上角，而是放在右上角。

要将其放置在左上角，请使用：

```
int xPosOfWm = 10;
int yPosOfWm = 10; 
```

要将水印水平定位在左侧、中间和右侧：

```
int xPosOfWm = 10;

int xPosOfWm = (phWidth - wmWidth) / 2;

int xPosOfWm = (phWidth - wmWidth) - 10; 
```

要将水印垂直定位在顶部、中间和底部：

```
int yPosOfWm = 10;

int yPosOfWm = (phHeight - wmHeight) / 2;

int yPosOfWm = (phHeight - wmHeight) - 10; 
```

只需将一种水平与一种垂直组合即可获得您想要的任何组合。

# c++ - 如何编写递归下降解析器？

> ID：14794293
> 
> 赞同：1
> 
> 时间：2013-02-10T03:06:41.050
> 
> 标签：c++, parsing, compiler-construction

**C++** 我不知道如何为以下语法编写递归下降解析器：

```
<Datalog Program>     ->  Schemes : <Scheme List>     
                         Facts   : <Fact List>
                         Rules   : <Rule List>
                         Queries : <Query List>
                         <EOF>
<Scheme List>         ->  <Scheme> <Scheme List Tail>
<Scheme List Tail>    ->  <Scheme List> | ε
<Scheme>              ->  <Identifier> ( <Identifier List> )
<Identifier List>     ->  <Identifier> <Identifier List Tail>
<Identifier List Tail>->  , <Identifier List> | ε
<Fact List>           ->  <Fact> <Fact List> | ε
<Fact>                ->  <Identifier> ( <Constant List> ) .
<Constant List>       ->  <String> <Constant List Tail>
<Constant List Tail>  ->  , <Constant List> | ε
<Rule List>           ->  <Rule> <Rule List> | ε
<Rule>                ->  <Head Predicate> :- <Predicate List> .
<Head Predicate>      ->  <Identifier> ( <Identifier List> )
<Predicate List>      ->  <Predicate> <Predicate List Tail>
<Predicate List Tail> ->  , <Predicate List> | ε
<Predicate>           ->  <Identifier> ( <Parameter List> )
<Parameter List>      ->  <Parameter> <Parameter List Tail>
<Parameter List Tail> ->  , <Parameter List> | ε
<Parameter>           ->  <String> | <Identifier> | <Expression>
<Expression>          -> ( <Parameter> <Operator> <Parameter> )
<Operator>            -> + | *
<Query List>          ->  <Query> <Query List Tail>
<Query List Tail>     ->  <Query List> | ε
<Query>               ->  <Predicate> ? 
```

这是一个简单的类似数据记录的语法。我在尝试编写解析器时完全迷失了。我已经编写了一个词法分析器，它输出一个带有所有标记的向量。我知道我需要为每个产品编写方法，但我不知道如何将标记连接到解析树中（因此我可以在树完成后运行 toString() 函数）。我需要指出正确的方向。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T04:29:43.920

鉴于你已经写过，它主要是从 EBNF 到 C++ 源代码的机械翻译，所以（例如），像这样的规则：

```
<Scheme>              ->  <Identifier> ( <Identifier List> ) 
<Identifier List>     ->  <Identifier> <Identifier List Tail>
<Identifier List Tail>->  , <Identifier List> | ε 
```

翻译成这个一般顺序的东西（虽然要小心——我只是在脑海中输入这个，所以它根本没有经过测试；把它更多地想象成类似于 C 的伪代码而不是任何东西按原样编译）。

```
bool scheme() { 
    return identifier()        &&
           check_input('(')    &&
           identifier_list()   &&
           check_input(')');
}

bool identifier_list() { 
    if (identifier()) {
        if (check_input(','))
            return identifier_list();
        else
            return true;
    }
    return false;
}

bool identifier() { 
    // you haven't said what's a legal identifier, so for the moment I'm assuming
    // rules roughly like C's.
    int ch;
    std::string id;

    if (!((ch=getinput()) == '_' || isalapha(ch))
        return false;

    do { 
        id += ch;
        ch = getinput();
    } while (isalpha(ch) || isdigit(ch) || ch == '_');
    putback(ch);
    return true;
} 
```

一旦你让它正确识别输入（并构建标识符等，就像我在上面所做的那样，即使我什么也没做），你就可以开始构建一个解析树（或其他任何东西）向树中添加东西当你认出它们时。如果你在 C 中这样做，你通常使用联合。在 C++ 中，您可能希望使用类层次结构来代替（尽管它会是一个非常短而复杂的层次结构——事实上，很容易成为直接从基类派生的所有其他层次结构）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T04:54:49.180

至少如果一个人不知道 Datalog 或任何一种语言，就很难看到你的语法发生了什么。

如果您对终端和制作使用了不同的标记，这会容易得多 - 不仅可以为不知情的人阅读，还可以为您自己阅读。通过寻找和向后寻找肯定可以弄清楚哪个是哪个，但这似乎让我有点头晕。

看看你的语法，你似乎不会得到一个相当复杂的树。因为所有物品都是订购的。

我的建议是根据您的语法对树进行建模，即数据结构：DatalogProgram Schmema Fact Rule and Query 以及 Expression HeadPredicate 和 Predicate

这样，您必须做的所有事情才能使您的 Parser 工作看起来像

```
DatalogProgram parse_datalog_progrem (pos){
   DatalogProgram program = new

   while ( Scheme s = parse_scheme () )
       program.append_scheme (s);

   while ( Fact f = parse_fact () )
       program.append_scheme (f);

   while ( Rule r = parse_rule () )
       program.append_rule (r);

   while ( Query q = parse_query () )
       program.append_query (q);

   return program; 
}

Scheme parse_scheme () {
   Scheme s = new ...
   s.id = parse_identifier ();

   parse ('(')

   while (Identifier i = parse_identifier) {
     s.append_id_list (i);
     if (lookahead != ',')
        break;
     parse (',');
   }
   parse (')');
   return s;
}

.... 
```

... 等等。我认为你说对了。

似乎仍有一件事或另一件事需要解决，但我认为这是最好的方法。例如，您可能想考虑在数据结构中使用联合，例如

```
struct Parameter {
  enum ParamType type;
  union {
     String  str;
     Identifier id;
     Expression expr;
  }
} 
```

离这里还有很长的路要走，但我希望你喜欢这个方向。

..哦和DatalogProgram之类的：

```
struct DatalogProgram {
  struct Scheme *schemes;
  struct Fact *facts;
  struct Rule *rules;
  struct Query *queries;
} 
```

为您的解析树的根。

# mongodb - 如何设计 nosql 模式以将用户与实际上是其他用户的“朋友”联系起来？

> ID：14794295
> 
> 赞同：2
> 
> 时间：2013-02-10T03:06:44.437
> 
> 标签：mongodb, scaling, relation, nosql

```
User {
    _id: "my_user",
    name: "john smith",
    email: "blah@test.com,
    friends: [
      *More Users*
    ]
} 
```

我会重写朋友的用户数据吗？每次我“添加朋友”时，我是再次输入数据还是“关联”到另一个用户 _id 字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T09:08:03.413

您的文档结构应该基于您的数据访问模式，即您的程序访问数据的方式。在您上面给出的示例中，您正在处理一对多的关系，因为许多朋友只会有一个“John Smith”。“John Smith”的朋友可以成为彼此的朋友，您可以通过使用 Friends '_id' 来处理这些朋友，并在您这样做时放置在一个数组中。这将降低修改数据时出现异常的风险。

```
User1 {
  _id: "my_user1",
  name: "john smith",
  email: "blah@test.com,
  friends: [
    "my_user2",
    "my_user3",
    "my_user4",
  ]
}

User2 {
  _id: "my_user1",
  name: "john smith",
  email: "blah@test.com,
  friends: [
    "my_user1",
    "my_user3",
    "my_user4",
  ]
} 
```

另一种选择是嵌入数据，但这可能导致重复和修改异常，因此应避免，除非出于性能原因需要这样做。

# python - Python：调用函数真的很慢吗？

> ID：14794296
> 
> 赞同：1
> 
> 时间：2013-02-10T03:06:46.877
> 
> 标签：python, function, time, call

我有一个`Element`具有一些功能的类，如下所示：

```
def clean(self):
    self.dirty = False 
```

我有 1024 个元素，我正在循环调用`clean`它们中的每一个。`while 1:`

如果我停止调用该`clean`方法，游戏帧率会从 76 fps 上升到 250 fps。

这很令人不安。我真的必须如此小心，以免完全落后于我的代码吗？

***编辑（这是完整的代码）***：

250 fps 代码

```
for layer in self.layers:
            elements = self.layers[layer]
            for element in elements:
                if element.getDirty():
                    element.update()
                    self.renderImage(element.getImage(), element.getRenderPos())

                    element.clean() 
```

76fps代码

```
for layer in self.layers:
            elements = self.layers[layer]
            for element in elements:
                if element.getDirty():
                    element.update()
                    self.renderImage(element.getImage(), element.getRenderPos())

                element.clean() 
```

2编辑（这是分析结果）：

```
Sat Feb  9 22:39:58 2013    stats.dat

         23060170 function calls (23049668 primitive calls) in 27.845 seconds

   Ordered by: internal time
   List reduced from 613 to 20 due to restriction <20>

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
  3720076    5.971    0.000   12.048    0.000 element.py:47(clean)
      909    4.869    0.005   17.918    0.020 chipengine.py:30(updateElements)
  3742947    4.094    0.000    5.443    0.000 copy.py:67(copy)
     4101    3.972    0.001    3.972    0.001 engine.py:152(killScheduledElements)
    11773    1.321    0.000    1.321    0.000 {method 'blit' of 'pygame.Surface' objects}
        4    1.210    0.302    1.295    0.324 resourceloader.py:14(__init__)
  3720076    0.918    0.000    0.918    0.000 element.py:55(getDirty)
     1387    0.712    0.001    0.712    0.001 {built-in method flip}
  3742947    0.705    0.000    0.705    0.000 copy.py:102(_copy_immutable)
  3728284    0.683    0.000    0.683    0.000 {method 'copy' of 'pygame.Rect' objects}
  3743140    0.645    0.000    0.645    0.000 {method 'get' of 'dict' objects}
     5494    0.566    0.000    0.637    0.000 element.py:89(isBeclouded)
     2296    0.291    0.000    0.291    0.000 {built-in method get}
        1    0.267    0.267    0.267    0.267 {built-in method init}
     1387    0.244    0.000   25.714    0.019 engine.py:67(updateElements)
     2295    0.143    0.000    0.143    0.000 {method 'tick' of 'Clock' objects}
    11764    0.095    0.000    0.169    0.000 element.py:30(update)
  8214/17    0.062    0.000    4.455    0.262 engine.py:121(createElement)
       40    0.052    0.001    0.052    0.001 {built-in method load_extended}
    36656    0.046    0.000    0.067    0.000 element.py:117(isCollidingWith) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:51:42.923

分析表明，在分析期间调用 clean 方法大约需要 28 秒中的 6 秒。在此期间，它也被调用了 370 万次。

这意味着您显示的循环必须是软件的主循环。该主循环也只做以下事情：

1.  检查元素是否脏。
2.  如果是，它会绘制它。
3.  然后清洗它。

由于大多数元素不是脏的（update() 只被调用了这 370 万个循环中的 11000 个），最终结果是你的主循环现在只做一件事：检查元素是否脏，然后调用 .clean( ） 在上面。

通过仅在元素脏时调用 clean，您有效地将主循环减半。

> 我真的必须如此小心，以免完全落后于我的代码吗？

是的。如果你有一个非常紧的循环，大部分时间什么都不做，那么你必须确保这个循环实际上是紧的。

> 这很令人不安。

不，这是一个基本的计算事实。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T07:45:39.170

（评论，但我的统计数据低到“评论”）

如果你调用 element.getDirty() 370 万次，它只脏了 11000 次，你应该保留一个脏列表，而不是每次都轮询。

也就是说，不设置脏标志，而是将脏元素添加到脏元素列表中。看起来您可能需要为每一层创建一个脏列表。

# python - socket编程中conn和channel有什么区别

> ID：14794303
> 
> 赞同：0
> 
> 时间：2013-02-10T03:08:46.163
> 
> 标签：python, sockets

我目前正在编写我的第一个基本套接字服务器，我偶然发现了服务器与客户端通信的两种不同形式 - 线程（我*认为*`conn`在 python 中使用）和`channels`，我不太了解 - 但它们看起来像客户端和服务器之间通信的另一种方式。两者之间有什么区别以及如何最好地使用它们？

这是要求的代码-请原谅我的N00biness :)

**连接/线程**

```
def clientthread(conn):

    #Sending message to connected client
    #This only takes strings (words)
    conn.send("Welcome to the server. Type something and hit enter\n")

    #loop so that function does not terminate and the thread does not end
    while True:

        #Receiving from client
        data = conn.recv(1024)
        if not data:
            break
        conn.sendall(data)
        print data

    #To close the connection
    conn.close()

while True:

    #Wait to accept a connection - blocking call
    conn, addr = s.accept()
    #display client information (IP address)
    print 'Connected with ' + addr[0] + ':' + str(addr[1])

    #Start new thread takees 1st argument as a function name to be run, second
    #is the tuple of arguments to the function

    start_new_thread(clientthread ,(conn,)) 
```

**频道**

```
while True:

    #Wait to accept a connection - blocking call
    channel, details = s.accept()
    #display client information (IP address)
    print 'Connected with ', details

    #Start new thread takees 1st argument as a function name to be run, second
    #is the tuple of arguments to the function

    #Sending message to connected client
    #This only takes strings (words)
    intro = "Welcome to the server. Type something and hit enter"
    print channel.recv(len(intro))

    channel.send(intro)

    #loop so that function does not terminate and the thread does not end
    while True:

        #Receiving from client
        data = channel.recv(1024)
        if not data:
            break
        channel.sendall(data)
        print data 
```

`channel`除了一种用途和另一种用途之外，它们做的事情完全相同`conn`。

# c# - 将 LabVIEW 中的数据矩阵导入 C# .NET

> ID：14794307
> 
> 赞同：0
> 
> 时间：2013-02-10T03:09:31.550
> 
> 标签：c#, .net, activex, labview, data-acquisition

我正在同时运行数据采集和硬件控制。数据采集​​使用 NI-DAQmx 设备。硬件控件已经用 C#.NET 编写，我们希望将我们的采集与控件同步，即等待控件事件 -> 收集数据 -> 停止收集 -> 继续控制。我知道有 NI Measurement Studio 可以为数据采集提供 .NET 控件，但我认为我的老板不想为许可证支付 350 美元以上，而且 45 天的评估还不够。所以后来我发现您可以通过 ActiveX 控件与 LabVIEW（我们的计算机上已经安装）进行通信，这似乎是要采取的路线。我[在 zone.ni 上找到了一个例子](http://zone.ni.com/devzone/cda/epd/p/id/3838?)打开LabVIEW vi，从Windows窗体获取输入，在vi中进行计算并返回一个值。首先，我一点也不了解LabVIEW，也看不到输入参数在其框图上实际进入vi的位置，以及它如何知道将输出发送回输出参数回Windows窗体。除此之外，为了我们的目的，我们需要从 LabVIEW vi 中收集数据矩阵（3-4 大列），我们可以在其上运行采集。有谁知道我是否/如何使用输出参数来做到这一点，或者我在哪里可以找到方法？另外，如果有人能解释LabVIEW在调用vi时如何处理输入引用参数，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T10:39:20.000

我没有使用 .NET 的实际经验，但 VI 只是从 C DLL 调用函数。我认为应该可以自己从 C# 调用相同的函数并完全避免使用 LV，如果你不知道它可能对你更好。如果你有 Labwindows/CVI，我假设你应该已经有如何做到这一点的例子。如果没有，我认为 DAQmx 安装程序允许您安装此类示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T03:25:55.490

你有没有想过序列化数据并将其导入 LabView？我知道它可以解析一些简单的格式，甚至包括 CSV。如果您需要 DAQ 和 LabView 之间的回调，这还不够，但在数据导入/导出的情况下，这种方法相当有效。我不是 LabView 专家，但我已经做了很多数据采集和系统集成。

# itunes - 通过自定义播放器/应用程序 (iTunes) 在您的网站上播放音乐

> ID：14794313
> 
> 赞同：0
> 
> 时间：2013-02-10T03:10:32.607
> 
> 标签：itunes

我正在做一些研究，以找出可以让我合法地在我的网站上播放音乐的方法。我遇到了 iTunes 合作伙伴计划，它允许通过他们的嵌入式播放器在网站上播放音乐。我想知道是否可以通过您自己的自定义播放器流式传输 iTunes 音乐？如果通过 iTunes 无法做到这一点，那么还有哪些其他方法可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T08:06:48.603

你可以使用像 Icecast 这样的服务器软件来做到这一点，这里有一些很好的设置教程：http: [//www.icecast.org/docs.php](http://www.icecast.org/docs.php)

根据您想要支持的浏览器数量，您可能需要设置两个流，一个在 MP3/OGG​​ 中，一个在 Flash 中的“备份”流。然后添加一些关于浏览器支持的检测并显示正确的流（即：使用 HTML5`<audio>`标签播放 MP3/OGG​​ 到支持它的浏览器，其余使用您的 Flash 流）

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-11T03:21:25.620

他们允许在 iTunes Store 中播放音乐的程序可能仅适用于那些打算出售音乐的人，如果不提供商业业务，您将违反他们的合作伙伴计划 T&C。

# ember.js - 使用旧路由器升级到 pre4 时查找“加载”状态时出错

> ID：14794314
> 
> 赞同：0
> 
> 时间：2013-02-10T03:10:59.037
> 
> 标签：ember.js, ember-data

# 问题

升级到最新的 ember.js 后，我收到此错误：

`Uncaught Error: assertion failed: Could not find state for path: "loading"`

查看框架代码，ember 似乎希望路由到“加载”路线，直到 ember 数据承诺返回。我没有看到任何关于“加载”路线的文档，所以只是尝试添加一个这样的：

```
loading: Ember.Route.extend({
}), 
```

这导致错误：

`Uncaught Error: assertion failed: Loading state should not be a route`

# 线索

*   从 master 运行构建（提交`693c8185fbda70df523bb60d21f3dc6d9d94b018`）
*   使用旧的路由器构建（`ember-old-router.js`），这样我就可以在不重写路由器的情况下升级
*   仅当我直接导航到 URL 时才会发生错误。当我从兄弟路由路由时不会发生这种情况。

# 问题

我应该在某处定义装载路线吗？如果是这样，语法是什么？如果没有，我该如何防止这个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T13:07:39.897

这是一个奇怪的问题，因为我认为`Ember.StateManager`/`Ember.State`不再被使用，但似乎你在某处使用它们。

*为什么是这样？*

尽管如此，通过声明`loading`为`Ember.State`，它至少应该可以解决您的问题，但除非我严重错误，否则您应该远离`Ember.State`支持新路由器。

`loading: Ember.State.extend();`

# html - 绑定标题缩进到段落

> ID：14794316
> 
> 赞同：0
> 
> 时间：2013-02-10T03:11:13.033
> 
> 标签：html, css

有没有办法使用 CSS 解决这个问题，或者我必须通过添加换行符来修复每篇文章？我有文章结构：

```
<div>
    <img style="float: left" src="image_src.jpg">
    <h3>Heading #1</h3>
    <p>Paragraph 1....</p>
    <h3>Heading #2</h3>
    <p>Paragraph 2....</p>
</div> 
```

现在，问题是标题经常“捕捉”图像并且必须在它的段落出现在它下方时缩进。这是一个例子：

![在此处输入图像描述](../Images/8f2d44b9af7b53840aae21a3d31c7395.png)

有没有办法可以强制标题转到图像下方，跟随它的段落，或者每当我遇到这样的问题时我必须手动添加换行符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T03:25:48.517

当然，您可以使用 CSS`nth-of-type`选择器清除除第一个 h3 元素之外的所有元素上的浮动。

```
h3:nth-of-type(n+2){
    clear:left;
} 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/BTFyg/)**

# cuda - 理解 cudaMemcpyFromSymbol() 的符号参数

> ID：14794319
> 
> 赞同：8
> 
> 时间：2013-02-10T03:11:49.837
> 
> 标签：cuda

下面，我包含了一个自包含的示例，用于`cudaMemcpyFromSymbol()`从内核中检索结果。该示例将符号参数（调用中的第二个参数）作为常规变量传递。但是，据我了解 CUDA 文档，将参数作为字符串传递，即：

```
cudaMemcpyFromSymbol(&out, "out_d", sizeof(out_d), 0, cudaMemcpyDeviceToHost); 
```

（在符号名称周围加上引号），也应该有效。这对我不起作用。

符号名称何时起作用，符号名称作为字符串何时起作用？

```
#include "cuda_runtime.h"
#include <stdio.h>

__device__ int out_d;

__global__ void test() {
  out_d = 123;
}

int main() {
  test<<<1,1>>>();
  int out;
  cudaMemcpyFromSymbol(&out, out_d, sizeof(out_d), 0, cudaMemcpyDeviceToHost);
  printf("%d\n", out);
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T04:15:06.673

在 CUDA 4.2 中不推荐将符号名称作为字符串参数传递，并且在 cuda 5.0 中消除了该语法。原因与启用单独的设备代码链接器功能有关，该功能出现在 CUDA 5 中。对于 cuda 5 工具包，此更改记录在[发行说明中](http://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html)：

> *   不再支持使用字符串来指示设备符号，这在某些 API 函数中是可能的。相反，应直接使用该符号。

# algorithm - 检查单词是否可以快速由给定的字母组成

> ID：14794320
> 
> 赞同：1
> 
> 时间：2013-02-10T03:11:50.297
> 
> 标签：algorithm, data-structures, dictionary

我有一些字母和频率计数。我有一个很长的单词列表（1M 说）。

假设我有`A-1, B-1, D-1`（“最多一个`A`，最多一个`B`，最多一个`D`”），那么我可以制作`"BAD"`，但不能`"RAD"`

我可以知道哪些单词可以由这些字母组成，在*对数*时间内，或者类似的时间，而不是遍历所有单词并查看单词中每个字母的计数？

这些词可以使用什么数据结构？试试吧？我不知道他们。如果我可以用它存储每个单词所需的字母，那也很棒。请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T03:47:20.190

这是数据结构的（字面）草图。

```
 [root]
         ----- | -----
       A1      A2     B1 ...
  ----/-    ---|---    -\----
 B1 C1 [a]  B1 B2 C1  C1 C2 D2 ... 
```

它是一棵树，其中叶节点是单词列表中的单词。叶节点上的单词完全由字母袋组成，字母袋包含从根到该节点的路径。非叶节点用字母和计数标记。一个节点的子节点必须要么是叶子（一个词），要么在字母表中严格地有一个字母。所以，要找到“猫”，你要走这条路`A1,C1,T1`，并且`cat`（和`act`）将成为 T1 的孩子。在每个节点，您遍历 count ≤ 您的输入计数的子节点（因此对于 bag `A3, C1, T2`，您将遍历标记为 A1、A2、A3、C1、T1 或 T2 的任何节点）。

在最坏的情况下（每个单词都匹配），遍历需要 O(n) 时间，但平均而言需要更少的时间。对于一个小的输入包，它只会遍历几个节点。对于一个大的输入包，它会遍历很多节点，但也会找到很多单词。

树*在词表中每个字母最多*包含一个节点，因此它的大小最多与词表的长度成正比。

这是一种节省时间和空间的结构，可以相对容易地计算和存储——它不会比你的单词表占用更多的空间，而且查询速度非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T03:23:27.280

如果您需要包含*所有*字母的单词，我以前做过类似的事情（我的填字游戏作弊程序，我很惭愧地说）。

我拿了一个字典文件并对其进行了预处理，因此每一行都对字母进行了排序，然后是单词本身，例如：

```
aaadkrrv:aardvark 
```

然后，如果您有字母`ardvkraa`，请对其进行排序，然后在冒号之前查找包含该字符串的行。我使用`grep`O(n) 已经足够好，但是您可以轻松地将所有行放入平衡的二叉树中，从而为您提供 O(log n) 复杂度。

*如果您要查找仅使用某些*字母的单词，那将无济于事，但尚不清楚这是否是您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T04:01:15.707

我不能说我可以从您的描述中 100% 掌握您提出的问题，但据我所知，您可以执行以下操作：

你索引你的单词列表。例如，“B1”是一个索引，它将包含一个条目列表，其中包含不超过一个字母 B，或者满足您正在解决的问题的要求。您还可以使用“复合”索引，例如“A1B1”。鉴于您可以负担索引的时间预算，您可以创建非常深的哈希值。如果您使用 26 个字母的字母表并想要对 4 个字母组合进行散列，则只有 14,950 个索引，如果是 3 个字母，则只有 2,600 个。可以在列表的一次迭代中构建索引，因此它们的创建是线性的。一旦你过了这个阶段，你的大部分查找将是对数的。在我的示例中，您的 4 个字母单词查找将是一次提取。当然，

# search - 从链接启动谷歌搜索

> ID：14794321
> 
> 赞同：0
> 
> 时间：2013-02-10T03:12:21.147
> 
> 标签：search, hyperlink

我在大型主机运行的服务器上运行基于 php 的网站。我的目标很简单。在我的网站上包含指向谷歌搜索的链接，我在其中动态给出搜索词。

从出现在地址栏中的 url 开始，我将语法缩小到

```
http://www.google.com/search?q=test 
```

当我在地址栏中输入它时，这有效。但是，当我从服务器启动时，它会重定向到：

```
www.google.com/webhp...lots of characters 
```

网络上有关于 webhp 与病毒有关的引用，但我很确定我的主机在其服务器上没有任何病毒。

有谁知道从链接启动简单谷歌搜索的正确方法？禁止直接链接吗？如有必要，我愿意使用 JS 将链接推送到客户端（由于使用限制，我在谷歌的推荐下将其用于谷歌地图），但希望让事情尽可能简单。这个链接只是为了让人们点击几下。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T03:16:50.163

只需使用[urlencode 方法](http://php.net/manual/en/function.urlencode.php)

```
<?php
echo '<a href="http://www.google.com/search?q=', urlencode($userinput), '">';
?> 
```

如果你想用 Javascript 来做，答案在这里：[Encode URL in JavaScript?](https://stackoverflow.com/questions/332872/how-to-encode-a-url-in-javascript)

* * *

尝试追踪“Url Rewriting”，我认为它是您需要删除的病毒：[http ://www.ehow.com/how_8728291_rid-webhp.html](http://www.ehow.com/how_8728291_rid-webhp.html)

> WebHP 是一种计算机病毒，它会自动将您的主页设置为虚假的 Google 站点，即 Google.com/WebHP。该病毒还会随机打开窗口或选项卡以加载该网站，并生成弹出窗口和虚假错误。与此病毒一起安装的还有一个 rootkit，它可以禁用您 PC 的防火墙和其他安全方法。如果不加以处理，WebHP 病毒会允许黑客远程访问您的计算机并窃取个人信息，例如信用卡号和电子邮件密码。

# objective-c - 在 Xcode 4.5 中限制输出的小数位数

> ID：14794329
> 
> 赞同：0
> 
> 时间：2013-02-10T03:14:24.737
> 
> 标签：objective-c, ios6, xcode4.5, ibaction

我在 xcode 中有一些操作，其中输出值中的小数位数需要限制为 3 个小数位。我需要在我的代码中添加什么来完成这项任务？

这是我的一项操作的示例：

```
- (IBAction)calculateMolarity:(id)sender {
float ourValue = [[_calcTextFieldNumOne text] floatValue]   /[ [_calcTextFieldTwo text]      floatValue];

NSNumber *ourNum =[NSNumber numberWithFloat:ourValue];

[_outputOfMolarity setText:[ourNum stringValue]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:20:36.047

```
NSString* formattedNumber = [NSString stringWithFormat:@"%.03f", ourNum]; 
```

> 这里`%.03f`告诉格式化程序您将格式化一个浮点数 (%f)，并且应该四舍五入到三个位置，并且应该用 0 填充。

但是你可以像这样直接使用你的 float ourValue

```
 NSString* formattedNumber = [NSString stringWithFormat:@"%.03f", ourValue]; 
```

无需将您的浮点值转换为 NSNumber

您可以使用`"%.3f"`or `"%.03f"`，无论两者都给出相同的 fromat

```
@"%.3f"  = 1234.567
@"%.03f" = 1234.567 // which is equal to @"%.3f" 
```

# python - 如何快速将元组中的每个项目减半？

> ID：14794331
> 
> 赞同：0
> 
> 时间：2013-02-09T20:09:11.940
> 
> 标签：python, pygame, colors

我正在使用 Python 3.3。Pygame 使用元组作为颜色。我需要将元组中的每个值减半以使颜色更深，但每秒多次。我可以使用我写的这个函数：

```
def halfTuple(oldTuple):
    newList = []
    for item in oldTuple:
        newList.append(item * .5)
    return tuple(newList) 
```

但它可能很慢。有没有更快的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-09T20:16:10.140

从头开始创建新元组而不是从数组转换可能会有所帮助：

```
def halfTuple(oldTuple):
    return tuple(x * 0.5 for x in oldTuple) 
```

# php - 从 $.ajax 接收 GET 的问题

> ID：14794339
> 
> 赞同：0
> 
> 时间：2013-02-10T03:17:34.223
> 
> 标签：php, jquery, ajax

嘿伙计们，我正在尝试接收以下内容

```
function sendUserfNotes() {
    $.ajax({
        type: "GET",
        url: '/pcg/popups/grabnotes.php',
        data: {
            'nameNotes': notes_name.text(),
        },
        success: function () {
            alert(notes_name.text());
        }
    });
} 
```

在接收者端，我有以下内容：

```
<?php 
    $test = $_GET['nameNotes'];
    echo $test;
?> 
```

不过这里什么也没有发生。它通过但我无法获得发送的 GET 值？我不知道 JQuery UI 对话框是否打开了它正在发送的位置。需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:28:00.810

在您的成功回调中：

```
success: function () {
    alert(notes_name.text());
} 
```

您没有从请求中检索数据。来自 jQuery 文档：

> 类型：Function(Object data, String textStatus, jqXHR jqXHR) 请求成功时调用的函数。该函数获得三个参数： 从服务器返回的数据，根据 dataType 参数格式化；描述状态的字符串；

你应该使用：

```
success: function (data) {
    alert(data);
} 
```

# ios - xcode 4.5 iOS Storyboard 和 UITableView 委托混淆

> ID：14794348
> 
> 赞同：2
> 
> 时间：2013-02-10T03:19:20.460
> 
> 标签：ios, uitableview, delegates, datasource

我正在尝试制作一个简单的 iOS 应用程序，它使用 UINavigationController 两个 ViewController 和一个 UITableView 来显示列表。问题是该表拒绝显示来自 NSArray 的数据。正如您在图片中看到的那样，所有代表都已设置好。

![在此处输入图像描述](../Images/e45958f0679b9ad8bd79cb7e9e8d9916.png)

![在此处输入图像描述](../Images/f9a45d9178e8c5c465d4f6e6684bc6be.png)

如果我为 ViewController 创建一个 xib 文件，每件事都有效，但如果我可以在 Storyboard 中再拖动一个 ViewController 并将它的类链接到我的 ItemListViewController，我不需要一个 xib 文件，如您在第一张图片中看到的那样。

**项目列表视图控制器.h**

```
＃进口

@interface ItemListViewController : UIViewController{
    NSMutableArray *tblDataSource;
    IBOutlet UITableView *tblSimpleTable;
}

@property (assign) NSMutableArray *tblDataSource;
@property（保留）IBOutlet UITableView *tblSimpleTable;

@结尾

```

**项目列表视图控制器.m**

```
#import "ItemListViewController.h"

@interface 项目列表视图控制器 ()

@结尾

@implementation ItemListViewController

@synthesize tblDataSource,tblSimpleTable;

- (id)initWithNibName:(NSString *)nibNameOrNil 包:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    如果（自我）{
        // 自定义初始化
    }
    回归自我；
}

- (void)viewDidLoad
{
    [超级视图DidLoad];
    // 加载视图后做任何额外的设置。
    UIColor *background = [[UIColor alloc] initWithPatternImage:[UIImage imageNamed:@"bg.png"]];
    self.tblSimpleTable.backgroundColor = 背景；
    [背景发布]；

    NSArray * data = [NSArray arrayWithObjects:@"Egg Benedict", @"Mushroom Risotto", @"Full Breakfast", @"Hamburger", @"Ham and Egg Sandwich", @"Creme Brelee", @"White Chocolate Donut ”，@“星巴克咖啡”，@“蔬菜咖喱”，@“鸡蛋方便面”，@“叉烧面”，@“日本猪肉面”，@“绿茶”，@“泰式虾饼” ，@“愤怒的小鸟蛋糕”，@“火腿芝士帕尼尼”，无]；
    [tblDataSource setArray：数据]；
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // 处理所有可以重新创建的资源。
}

#pragma mark - 表格视图数据源

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // 返回部分的数量。
    返回0；
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // 返回节中的行数。
    NSLog(@"@%d",[tblDataSource 计数]);
    返回 [tblDataSource 计数]；
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    静态 NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    如果（细胞 == 零）{
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    // 配置单元格...
    UIImage *placeholder = [UIImage imageNamed:@"icon.png"];
    [cell.imageView setImage:placeholder];
    cell.textLabel.text = [tblDataSource objectAtIndex:indexPath.row];
    返回单元格；
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    NSLog(@"点击行@%d",indexPath.row);
}

@结尾

```

如果有人能指出我正确的方向，我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T03:23:10.713

在`numberOfSectionsInTableView`您返回 0 时，表示没有要生成的部分（因此也没有行）。您可能想返回 1。

此外，您要确保保留您的`NSMutableArray`，所以您真的想做：

```
@property (nonatomic, retain) NSMutableArray *tblDataSource; 
```

# stata - 将格式化的数字显示并连接为字符串

> ID：14794349
> 
> 赞同：2
> 
> 时间：2013-02-10T03:19:26.483
> 
> 标签：stata

我想要一些漂亮的输出，它结合了几个已格式化并放入一行的本地宏

我尝试了多种不同的配置，但这基本上是我想要的

```
loc number1 = 12.20645161
loc number2 = 52.81451247
di "something here" 
```

期望的输出：“数字 1 是 12.2065，数字 2 是 52.8145”

我可以格式化单个本地宏：

```
di %12.4f `number1' 
```

我可以连接两个未格式化的宏：

```
di "number 1 is `number1' and number 2 is `number1'" 
```

但似乎不能同时做到这两点。有没有办法尽早格式化宏或进行一些内联​​格式化或将格式化的字符串相互附加？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T11:25:10.310

你已经走了很多路，但这里也有一些误解。

从可以为本地宏分配格式的意义上说，您不能格式化本地宏。您正在做的是告诉`display`使用一种格式来显示该宏的值，但宏本身不受影响并且格式不会粘住。事实上，宏和格式在任何严格意义上都没有关联。这完全是`display`命令将您的指令放在一起，显示什么以及如何显示它的问题。

这与许多其他语言中的类似命令没有根本区别。

一种解决方案是

```
loc number1 12.20645161
loc number2  52.81451247
di "number 1 is " %5.4f `number1' "and number 2 is " %5.4f `number2' 
```

请注意，省略 = 符号会将数字分配为字符串等价物；没有以这种方式转换为二进制并返回十进制。在此示例中，差异不会产生影响。

进一步说明：

1.  `round()`像瘟疫一样避开这里。格式化问题的解决方案是格式化，而不是数字运算。它会在很多时候起作用，但不能保证。它不能保证你总是想要什么，因为几乎所有的十进制数字都不能完全保存为二进制，而且有时会咬人。

2.  你可以这样做

    ```
    local nice1 : di %5.4f `number1' 
    local nice2 : di %5.4f `number2' 
    di "number 1 is `nice1' and number 2 is `nice2'" 
    ```

这也没有指定格式，但它是您寻求的字符串操作。

考虑它的方式是：宏保存字符串。当您想将字符串作为字符串进行操作时，请仅使用字符串操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T04:57:11.353

好的，所以我发现编辑宏的唯一方法是提前进行一些格式化。因此，您可以在变量上调用 round() 到 .01 小数点并保存它，而不是将格式 %4.2f 应用于行中的宏。然后它将作为显示的一部分正确显示。但是，您可以内联格式化变量元素，但不需要任何连接符号（+ 或 &）来执行此操作。

```
sysuse auto
// get price difference
loc p_inc = (price[2] - price[1]) / price[2] * 100
// preformat local macro
loc p_inc = round(`p_inc',.01)
// format variables inline
di "price of car 2 (" %-5.0fc price[2] ") is `p_inc '% bigger than price of car 1 (" %-5.0fc price[1] ")" 
```

输出：汽车 2 的价格（4,749）比汽车 1 的价格（4,099）高 13.69%

# driver - 如何在上传页面尝试 5 秒后强制驱动程序刷新（或抛出 timeoutException）？

> ID：14794356
> 
> 赞同：0
> 
> 时间：2013-02-10T03:21:28.877
> 
> 标签：driver, wait

我正在使用 Selenium Web 驱动程序编写测试用例。我需要设置隐式等待 Chrome 驱动程序。我不需要明确的 - 它太长了！有什么方法可以强制 Google Chrome 驱动程序`TimeOutException`在尝试上传页面 5 秒后抛出一个或（刷新页面也可以）。

我试过：`driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);`

这没用。这是简短的源代码：

```
.......
driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS);
.......
.......
element.click();
....... 
```

`TimeOutException`现在，如果页面在 5 秒内未加载，我需要驱动程序抛出一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:25:10.410

还有另一种等待：`pageLoadTimeout`. 以下是你如何使用它：

```
driver.manage().timeouts().pageLoadTimeout(5, TimeUnit.SECONDS); 
```

有关详细信息，请参阅[“接口 WebDriver.Timeouts”](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/WebDriver.Timeouts.html#pageLoadTimeout%28long,%20java.util.concurrent.TimeUnit%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:20:25.843

有一种更简单的方法...您不必使用 WebDriverTimeouts 等使代码过于复杂...您只需在浏览器上安装 Chrome Auto Refresh Plus 并选择它以在 5 秒后自动刷新。对于每个循环或您拥有的任何内容，浏览器将为您提供 5 秒的时间来完成它，否则它将根据您的需要刷新页面。只需安装自动刷新：[https ://chrome.google.com/webstore/detail/auto-refresh-plus/oilipfekkmncanaajkapbpancpelijih?hl=en](https://chrome.google.com/webstore/detail/auto-refresh-plus/oilipfekkmncanaajkapbpancpelijih?hl=en)

PC：Chrome 的隐式等待效果不佳：http://www.google.com/url?sa=t&rct=j&q=implicit+waits+issue+Chrome&source=web&cd=1&cad=rja&ved=0CC8QFjAA&url= [http %3A%2F %2Fcode.google.com%2Fp%2Fchromedriver%2Fissues%2Fdetail%3Fid%3D24&ei=vz5HUY6mIYS_rQH3zYFI&usg=AFQjCNFar_7Cz3E5nJiYiGRg_ftXCLVuaQ&sig2=Jl7N0OH0usXBTXEjOvzBUw&bvm=bv.43828504](http://www.google.com/url?sa=t&rct=j&q=implicit+waits+issue+Chrome&source=web&cd=1&cad=rja&ved=0CC8QFjAA&url=http%3A%2F%2Fcode.google.com%2Fp%2Fchromedriver%2Fissues%2Fdetail%3Fid%3D24&ei=vz5HUY6mIYS_rQH3zYFI&usg=AFQjCNFar_7Cz3E5nJiYiGRg_ftXCLVuaQ&sig2=Jl7N0OH0usXBTXEjOvzBUw&bvm=bv.43828540,d.aWM)

# python - 如何配置 Django 在本地使用 Heroku Dev Postgre？

> ID：14794362
> 
> 赞同：3
> 
> 时间：2013-02-10T03:23:02.490
> 
> 标签：python, django, heroku

我正在尝试使用 Heroku、Django 和 virtualenv 配置本地开发环境。当推送到 Heroku 托管时，一切似乎都在工作，但在本地，我似乎无法连接到 Heroku 提供的开发 Postgre DB。

根据说明，我在settings.py中添加了以下内容：

```
import dj_database_url
DATABASES['default'] =  dj_database_url.config() 
```

但这似乎并没有在本地运行时被调用。得到以下异常：

```
django.core.exceptions.ImproperlyConfigured: settings.DATABASES is improperly configured. Please supply the ENGINE value. Check settings documentation for more details. 
```

是否可以从本地 Django 实例连接到 Heroku 托管的开发 Postgre？如果是，我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T03:47:21.237

结果证明这是相对简单的......

dj_database_url.cofig() 采用默认参数。关于heroku的数据库信息可以在这里找到： [https ://postgres.heroku.com/databases/](https://postgres.heroku.com/databases/)

如果您的数据库信息和凭据如下：主机 somehost.amazonaws.com 数据库 somedb 用户 foo 端口 5432 密码栏

然后 settings.py 条目应如下所示：

```
import dj_database_url
DATABASES['default'] =  dj_database_url.config(default='postgres://foo:bar@somehost.amazonaws.com:5432/somedb') 
```

如果您也使用本地 Postgre 设置，则相同的步骤也有效。

# html - 在一行中浮动 DIV，没有固定宽度

> ID：14794363
> 
> 赞同：0
> 
> 时间：2013-02-10T03:23:03.827
> 
> 标签：html, css-float, css

```
<div style="background: green; float: right;">
  <div style="background: yellow;">
    <img style="float: left; width: 80px;" src="image.png" />
    <div style="background: red; float: left;">
      <p>Text 1</p>
      <p>Text 2</p>
      <p>Text 3</p>
    </div>
  </div>
</div> 
```

红色 div 一直显示在图像下方。我希望红色 div 段落中文本的宽度决定其宽度。我需要并排放置图像和红色 div，但我不想为黄色和红色 div 提供固定宽度。我需要黄色 div 的自动动态宽度以将图像和红色 div 放在一行中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:29:58.783

嗯......你的代码正在按照你想要的方式工作。我只是在段落中添加了更多内容，以便您可以看到红色 div 扩展以容纳内容。图像与段落并排显示。

```
<div style="background: green; float: right;">
  <div style="background: yellow;">
    <img style="float: left; width: 80px;" src="http://www.google.com/doodle4google/images/carousel-winner2012.jpg" />
    <div style="background: red; float: left;">
      <p>Text 1234567910</p>
      <p>Text 23456789101111111</p>
      <p>Text 3</p>
    </div>
  </div>
</div> 
```

这是 JS Bin 的演示：http: [//jsbin.com/atozim/1](http://jsbin.com/atozim/1)

只需确保您没有任何其他 CSS 规则干扰您的 HTML 结构的显示方式。

# postgresql - PostgreSQL 热备在删除 WAL 文件后不会启动

> ID：14794370
> 
> 赞同：0
> 
> 时间：2013-02-10T03:24:01.077
> 
> 标签：postgresql, postgresql-9.1

我有一个 PostgreSQL 9.1 热备用服务器。WAL 文件最终占据了整个 HD，所以我最终删除了所有 WAP 文件。我想如何恢复服务器所以我跑了：

```
/usr/local/pgsql/bin/pg_ctl start  -D /usr/local/pgsql/data 
```

问题是服务器永远不会完全启动。我看到这之后是不停丢失的 WAL 文件日志输出：

```
server starting
sh-4.1$ LOG:  database system was shut down in recovery at 2013-02-10 03:17:06 UTC
LOG:  entering standby mode
cp: cannot stat `/usr/local/pgsql/wals/0000000100000035000000A4': No such file or directory
LOG:  redo starts at 35/A4943928
LOG:  consistent recovery state reached at 35/A4AE8EB8
LOG:  database system is ready to accept read only connections
LOG:  invalid record length at 35/A4AE8EB8
cp: cannot stat `/usr/local/pgsql/wals/0000000100000035000000A4': No such file or directory
LOG:  streaming replication successfully connected to primary
FATAL:  could not receive data from WAL stream: FATAL:  requested WAL segment 0000000100000035000000A4 has already been removed 
```

我怎样才能让服务器回来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T09:07:44.133

您需要从转储（或文件系统副本）重新创建热备用服务器。

有关如何执行此操作的详细信息，您可以在本手册中找到：[高可用性、负载平衡和复制](http://www.postgresql.org/docs/current/static/high-availability.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T12:58:18.490

在将slave连接到主要主机以流式传输模式之前，请检查所需的wal是否位于您要从中恢复以进行初始恢复的位置...由于您要从中恢复以进行初始恢复的位置上的wal段不可用，可能会发生上述问题。 ..如果这种情况没问题，请检查 recovery.conf 中的 restore_command。

# c - 如何在 C 中打开外部 EXE 文件？

> ID：14794378
> 
> 赞同：1
> 
> 时间：2013-02-10T03:25:36.940
> 
> 标签：c, windows, exe

如何从 C 内部打开外部 EXE 文件？我正在尝试编写一个打开记事本和其他一些应用程序的 C 程序，但我被卡住了。感谢您忍受我的 C 菜鸟水平；p

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T03:33:35.650

请尝试`system("notepad");`打开记事本可执行文件。请注意，可执行文件的路径应该是`PATH`变量的一部分，或者需要将完整路径提供给`system`调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T04:11:27.360

CreateProcess 或 ShellExecute 是 Windows 启动另一个进程的方式。你需要#include 来查看它们的定义

```
#include <windows.h>

int main()
{
   STARTUPINFOW siStartupInfo; 
   PROCESS_INFORMATION piProcessInfo; 
   memset(&siStartupInfo, 0, sizeof(siStartupInfo)); 
   memset(&piProcessInfo, 0, sizeof(piProcessInfo)); 
   siStartupInfo.cb = sizeof(siStartupInfo); 

   if (CreateProcessW(L"C:\\Windows\\system32\\notepad.exe"), 
                        NULL, NULL, NULL, FALSE, 
                        0, NULL, NULL, 
                        &siStartupInfo, &piProcessInfo)) 
   { 
        /* This line waits for the process to finish. */ 
        /* You can omit it to keep going whilst the other process runs */ 
       dwExitCode = WaitForSingleObject(piProcessInfo.hProcess, (SecondsToWait * 1000)); 
   } 
   else 
   { 
       /* CreateProcess failed */ 
       iReturnVal = GetLastError(); 
   } 
   return 0;
} 
```

# javascript - 检测按钮是否单击真实用户或由脚本触发

> ID：14794380
> 
> 赞同：14
> 
> 时间：2013-02-10T03:25:44.570
> 
> 标签：javascript, events, onclick

是否有任何方法可以让我检测按钮单击是否由真实用户执行，而不是用户已加载到其浏览器开发人员控制台或其他浏览器开发人员工具上的某种自动化方法 (javascript)？

我尝试了各种 stackoverflow 帖子中建议的以下方法，但它们似乎都不起作用。REF：[如何检测 click() 是鼠标单击还是由某些代码触发？](https://stackoverflow.com/questions/7635274/how-to-detect-if-a-click-is-a-mouse-click-or-triggered-by-some-code)

脚本检测方法尝试并失败：

```
mybutton.click(function (e) {
    if (!e.which) {
        //Triggered by code NOT Actually clicked
        alert(' e.which - not a real button click')
    } else if ('isTrusted' in e && !e.isTrsuted) {
        //Triggered by code NOT Actually clicked
        alert(' e.isTrusted - not a real button click')
    } else if (e.originalEvent === undefined) {
        //Triggered by code NOT Actually clicked
        alert(' e.originalEvent - not a realbutton click')
    }
    //                  else if (!e.focus) {
    //                      //triggered  // does not detect e.focus on a real btn click
    //                      alert(' e.focus - not a realbutton click')
    //                  }
    else {
        // Button hopefully clicked by a real user and not a script
    }
}) 
```

如果我运行以下脚本来触发来自 Chrome 浏览器控制台的按钮单击，则上述方法都不会将其捕获为由脚本触发。

```
var button = document.getElementById("btnSubmit");
button.click(); 
```

==================================================== =========================

感谢您的所有回复，并感谢 stackoverflow 提供了如此出色的网站，促进了如此多的知识共享，并为我们的技术人员节省了无数小时。

看来我还是没有可靠的方法。所有 3 种浏览器（FF、IE 和 Chrome）都为用户提供了一个开发人员/控制台界面，以便在我的网页上运行/注入 javascript。似乎每种浏览器风格捕获的一些事件属性值略有不同。例如：Chrome 使用 e.screenX 捕获脚本激活 cick 和真实用户之间的差异，但在 IE 中：e.screenX 对于脚本单击（合成）和用户按钮单击具有相同的值

以下检测方法要么根本不起作用，要么在不同浏览器之间不一致： e.which e.isTrsuted e.originalEvent (event.source != window) (e.distance != null)

mousedown 事件似乎仅由真正的用户按钮单击触发，但我必须假设除了按钮单击事件之外还有一些脚本方法可以模拟 mousedown

```
$(me.container + ' .mybutton').mousedown(function (e) { 
    alert('mouseisdown real button click'); 
} 
```

如果有人能找到一种可靠的方法，可以跨多个浏览器工作，检测合成（脚本）按钮单击和用户单击按钮之间的区别，那么您将获得超级英雄的地位。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-10T03:56:23.210

当通过鼠标单击按钮时，事件 e 通常会记录鼠标指针位置。尝试类似：

```
 if(e.screenX && e.screenX != 0 && e.screenY && e.screenY != 0){
     alert("real button click");
   } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-10T04:38:49.600

不，不可能在所有情况下。

正如提到的其他答案，您可以查找鼠标坐标（clientX/Y 和 screenX/Y），如果它们不存在，您可以假设它*可能*不是人为生成的操作。

但是，如果用户在按钮上制表并使用空格键单击它，或者不使用鼠标单击它，则坐标也将为零，并且此方法将错误地确定它是脚本单击。

此外，如果脚本使用`dispatchEvent`而不是`click`，则可以为事件提供坐标。在这种情况下，此方法会错误地将其识别为用户生成的点击。

```
// This will produce what appears to be a user-generated click.
function simulateClick(element) {
  var evt = document.createEvent("MouseEvents");
  evt.initMouseEvent("click", true, true, window,
    0, 110, 111, 10, 11, false, false, false, false, 0, null);
  element.dispatchEvent(evt);
} 
```

[http://jsfiddle.net/bYq7m/](http://jsfiddle.net/bYq7m/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-10T03:42:52.350

出于安全考虑，当您使用 javascript 触发事件时，它的注册方式与用户触发事件时不同。控制台记录`ev`对象，您将看到两种情况之间的显着差异。

```
mybutton.click(function(ev) {
  console.log(ev);
}); 
```

以下是这两种情况的一些示例输出：

```
jQuery.Event
currentTarget: button
data: null
delegateTarget: button
handleObj: Object
isTrigger: true
jQuery191011352501437067986: true
namespace: ""
namespace_re: null
result: undefined
target: button
timeStamp: 1360472753601
type: "mousedown"
__proto__: Object

jQuery.Event {originalEvent: MouseEvent, type: "mousedown", isDefaultPrevented:     function, timeStamp: 1360472840714, jQuery191011352501437067986: true…}
altKey: false
bubbles: true
button: 0
buttons: undefined
cancelable: true
clientX: 39
clientY: 13
ctrlKey: false
currentTarget: button
data: null
delegateTarget: button
eventPhase: 2
fromElement: null
handleObj: Object
isDefaultPrevented: function returnFalse() {
jQuery191011352501437067986: true
metaKey: false
offsetX: 37
offsetY: 11
originalEvent: MouseEvent
pageX: 39
pageY: 13
relatedTarget: null
screenX: 1354
screenY: 286
shiftKey: false
target: button
timeStamp: 1360472840714
toElement: button
type: "mousedown"
view: Window
which: 1
__proto__: Object 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T03:44:07.603

[小提琴](http://jsfiddle.net/332AA/)在这里。

```
$("button").mousedown( function(e) {
    if(e.which) {
        alert(1);
    }
});
$("button").trigger("mousedown"); 
```

或 Javascript：

```
document.getElementsByTagName('button')[0].onmousedown = function(e) {
 if(e.which) {
    alert(1); // original click
 }
}
document.getElementsByTagName('button')[0].onmousedown(); 
```

您可以在小提琴中看到，它不会让触发函数调用，但只有当鼠标按下按钮时才会调用。如果在按钮上触发了自动单击，则`e.which`未定义，很容易被捕获。

**更新：** [Javascript的小提琴](http://jsfiddle.net/332AA/3/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-04T06:09:52.850

Use "event.isTrusted" to know event is triggered from Javascript or User click.

Sample Code:

```
<!DOCTYPE html>
<html>
<head>
  <title>Page Title</title>
</head>
<body>

  <input type="text" id="myInput">
  <button id="myBtn" onclick="callFunction(event)">Click Me</button>

  <script>
    function callFunction(event) {
      console.log(event.isTrusted); // true only when user clicks 'Click Me' button
    }
    window.onload = function () {
      let event = new Event("click");
      callFunction(event); // false
    }
    var input = document.getElementById("myInput");
    // Execute a function when the user releases a key on the keyboard
    input.addEventListener("keyup", function (event) {
      if (event.keyCode === 13) {
        event.preventDefault();
        document.getElementById("myBtn").click(); // false
      }
    });
  </script>

</body>

</html> 
```

# sql - 什么会导致链接服务器返回有限数量的数据？

> ID：14794381
> 
> 赞同：5
> 
> 时间：2013-02-10T03:25:47.940
> 
> 标签：sql, sql-server, tsql, sql-server-2012

我们链接到 sql server 2012 实例的服务器出现问题。

我们通过 odbc 或 oledb 连接链接的服务器是 Pervasive SQL。

**只要结果集很小，就可以通过这种方式从链接服务器中进行选择：**

```
select * from linked_server.database..mytable 
```

如果结果集超过**2mb**左右（可能略多或少），那么我们会收到以下错误：

```
Msg 7399, Level 16, State 1, Line 1
The OLE DB provider "MSDASQL" for linked server "KSLAP208" reported an error. The provider reported an unexpected catastrophic failure.
Msg 7330, Level 16, State 2, Line 1
Cannot fetch a row from OLE DB provider "MSDASQL" for linked server "KSLAP208". 
```

然而，愚蠢的是，例如 SSMS 2012 会显示所有需要返回的列，然后立即出错。

**什么会导致 SSMS 2012 在太大的结果集上产生错误？（超过 1-2mb）？？**

这是我在 odbc 管理员中看到的：

![在此处输入图像描述](../Images/29e7521923c525e21f438f15247b3d7a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T03:31:11.137

# 选项 1，禁用预取

有时，禁用预取会解决这样的问题。

> 您可以通过在创建 DSN 时清除“性能”选项卡中的“为查询启用数据预取”复选框或在创建无 DSN 连接时将“PREFETCH=0”添加到连接字符串来禁用预取。

更多关于这个：

> 在服务器上的 ODBC 数据源管理器面板中，从系统 DSN 配置您的链接服务器。在“性能”选项卡下，取消选中“为查询启用数据预取”框。好的好的。在 SQL Management Studio 中删除并重新创建链接服务器。

[来源](http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/f9ddbb1e-b276-47e7-a85a-475c1e8c6793/)

# 选项 2，允许进程内

*   转到链接服务器
*   提供者
*   MSOLAP（或类似）
*   特性
*   确保启用“允许进程内”。即使是，也请关闭它。节省。然后重新打开它。有时重置它会有所帮助。

# java - 如何制作 String int 终止符？

> ID：14794382
> 
> 赞同：0
> 
> 时间：2013-02-10T03:25:48.390
> 
> 标签：java

所以我制作了每个人的有趣游戏“Rock, Paper, Scissors”，我让一切正常，除了在停止之前让 while 循环重复 3 次。好吧，它确实重复了 3 次并停止，但第 2 次和第 3 次重复变量不会改变。看看代码，告诉我我做错了什么。**更新：现在我已经完成了所有工作，如何让这个“Q”字符串终止循环？

```
import java.util.Scanner;
import java.util.Random;

public class RockPaperScissors
{

    /**
     * (Insert a brief description that describes the purpose of this method)
     * 
     * @param args
     */
    public static void main(String[] args)
    {
        int compint;
        String usermove = "";
        String compmove = "";
        String winner = "";
        int count = 0;

        Scanner in = new Scanner(System.in);
        Random gen = new Random();

        System.out.println("Enter Rock(1), Paper(2), Scissors(3) {Q to quit]: ");
        int input = in.nextInt();       

        while (count < 3)
        {
            compint = gen.nextInt(3) + 1;

            if (input == 1)
            {
                usermove = "Rock";
            }
            else if (input == 2)
            {
                usermove = "Paper";
            }
            else if (input == 3)
            {
                usermove = "Scissors";
            }

            if (compint == 1)
            {
                compmove = "Rock";
            }
            else if (compint == 2)
            {
                compmove = "Paper";
            }
            else if (compint == 3)
            {
                compmove = "Scissors";
            }

            if (compint == input)
            {
                winner = "TIE";
            }
            else if (compint == 1 && input == 3)
            {
                winner = "COMPUTER";
            }
            else if (compint == 2 && input == 1)
            {
                winner = "COMPUTER";
            }
            else if (compint == 3 && input == 2)
            {
                winner = "COMPUTER";
            }
            else
            {
                winner = "USER";
            }

            System.out.print("Computer: " + compmove + " | ");
            System.out.print("You: " + usermove + " | ");
            System.out.println("Winner: " + winner);
            System.out.println();
            System.out.println("Enter Rock(1), Paper(2), Scissors(3) {Q to quit]: ");
            input = in.nextInt();
            count++;

        }
    }
} 
```

输出：

```
Enter Rock(1), Paper(2), Scissors(3) {Q to quit]: 
1
Computer: Scissors | You: Rock | Winner: USER

Enter Rock(1), Paper(2), Scissors(3) {Q to quit]: 
2
Computer: Rock | You: Paper | Winner: USER

Enter Rock(1), Paper(2), Scissors(3) {Q to quit]: 
Q
Exception in thread "main" java.util.InputMismatchException
    at java.util.Scanner.throwFor(Unknown Source)
    at java.util.Scanner.next(Unknown Source)
    at java.util.Scanner.nextInt(Unknown Source)
    at java.util.Scanner.nextInt(Unknown Source)
    at RockPaperScissors.main(RockPaperScissors.java:102) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T03:28:19.120

实际上对输入*做*任何事情的逻辑——所有这些`if`语句——都在循环之外。通过外观的每次迭代，没有一个逻辑没有实际执行。这一切都是先发生的。试试这个：

```
for (int count=0; count < 3; count++)
{
    int input = in.nextInt();
    int compint = gen.nextInt(3) + 1;

    // all the if statements and printing here
} 
```

* * *

> **更新：现在我已经完成了所有工作，如何让这个“Q”字符串终止循环？

您在[`InputMismatchException`](http://docs.oracle.com/javase/7/docs/api/java/util/InputMismatchException.html)键入时得到一个，`Q`但代码调用`Scanner#nextInt()`. 文档非常清楚问题是什么：

> 由 a 抛出`Scanner`以指示检索到的令牌与预期类型的​​模式不匹配，或者该令牌超出预期类型的​​范围。

这基本上是`Scanner`'s 告诉你“你要求一个`int`但下一个令牌不是一个”的方式。`nextInt()`您可以在调用之前添加一个额外的检查，使用[`Scanner#hasNextInt()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#hasNextInt%28%29), 来验证下一个令牌实际上*是*一个 int。如果它不是 int，那么您可以计划将其解析为字符串。

所以代替这个：

```
input = in.nextInt(); 
```

做这样的事情：

```
if (in.hasNextInt())
{
    input = in.nextInt();
} else if (in.hasNext("Q")) {
    // quit
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T03:35:21.187

看来您想使用`do - while loop` 它会起作用：

```
do{
       compint = gen.nextInt(3) + 1;

        System.out.println("Enter Rock(1), Paper(2), Scissors(3) {Q to quit]: ");
        int input = in.nextInt();

        if (input == 1)
        {
            usermove = "Rock";
        }
        else if (input == 2)
        {
            usermove = "Paper";
        }
        else if (input == 3)
        {
            usermove = "Scissors";
        }

        if (compint == 1)
        {
            compmove = "Rock";
        }
        else if (compint == 2)
        {
            compmove = "Paper";
        }
        else if (compint == 3)
        {
            compmove = "Scissors";
        }

        if (compint == input)
        {
            winner = "TIE";
        }
        else if (compint == 1 && input == 3)
        {
            winner = "COMPUTER";
        }
        else if (compint == 2 && input == 1)
        {
            winner = "COMPUTER";
        }
        else if (compint == 3 && input == 2)
        {
            winner = "COMPUTER";
        }
        else
        {
            winner = "USER";
        }

            System.out.print("Computer: " + compmove + " | ");
            System.out.print("You: " + usermove + " | ");
            System.out.println("Winner: " + winner);
            System.out.println("Enter Rock(1), Paper(2), Scissors(3) {Q to quit]: ");
            input = in.nextInt();
            count++;

        }while (count < 3); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T03:33:24.993

特别是，您的“while”循环除了打印它之外不会对获胜者做任何事情，因此无论输入如何，整个游戏的获胜者都保持不变。这可能是开始“调试”的好地方。

# wordpress - （Wordpress）如果管理员在线则执行插件

> ID：14794390
> 
> 赞同：0
> 
> 时间：2013-02-10T03:27:05.493
> 
> 标签：wordpress, plugins, login, admin

## 问题

我有一个用于 wordpress 的聊天插件，我希望它仅在管理员（更准确地说是**EDITOR**）在线时才处于活动状态。当管理员离线时，在网站上聊天是没有用的，它只会占用空间。

## 可能的解决方案

我对 PHP/Wordpress 编程知之甚少，但我几乎可以肯定 Functions.php 中的某种代码可能会解决问题，**比如 admin_init**，但它也必须在管理员注销时禁用。

## 结论

激活插件所需的管理角色：**编辑**

插件名称：**在线聊天**（online-chat/online-chat.php）

WordPress 版本：**3.4.2**

*多谢你们！！我会在附近，试着让它在这里工作*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T18:19:32.153

我假设您可以对此进行操作：[http](http://wordpress.org/support/topic/display-info-if-admin-otherwise-hide) ://wordpress.org/support/topic/display-info-if-admin-otherwise-hide where if Any user is an admin, then load a template part or trigger一个动作挂钩等，但我自己没有测试过。

还要检查一下：[http ://wordpress.org/support/topic/checking-if-the-user-is-admin](http://wordpress.org/support/topic/checking-if-the-user-is-admin)

# objective-c - 如何专门捕获修饰键？

> ID：14794392
> 
> 赞同：2
> 
> 时间：2013-02-10T03:27:24.600
> 
> 标签：objective-c, cocoa, nsevent

当使用 NSEvent flagsChanged 并使用各种 KeyMask 对标志进行 AND 运算时，您如何以独家方式测试它们？目前，在模式中使用一系列 if else 条件：

```
if ((flags & someKeyMask) && (flags someOtherKeyMask)) 
```

即使第三个修饰键被按下，这也会匹配。在 if else 条件句中较早地放置较长系列的关键掩码会使行为按预期工作，但不知何故感觉不完整。是说“只有这些修饰键，而不是其他任何键”的好方法吗？

这是一个更具体的示例，其中第一个在其他之前匹配。我想知道是否有一种方法可以为每个说“只有这些修饰键”的逻辑添加一些逻辑。

```
if ((flags & (NSCommandKeyMask|NSControlKeyMask))) {
                                               NSLog(@"one");
                                           }else if (((flags & NSCommandKeyMask) && (flags & NSAlternateKeyMask)) && (flags & NSControlKeyMask)) {
                                               NSLog(@"Command+Option+Control ");
                                           } else if ((flags & NSCommandKeyMask) && (flags & NSShiftKeyMask)) {
                                               NSLog(@"Command+Shift ");
                                           } else if ((flags & NSCommandKeyMask) && (flags & NSControlKeyMask)) {
                                               NSLog(@"Command+Control");
                                           } else if ((flags & NSCommandKeyMask) && (flags & NSAlternateKeyMask)) {
                                               NSLog(@"Command+Option ");
                                           } 
```

因此，由 Ken Thomases 提供的我正在寻找的正确模式是： `flags &= (<one or more masks bitwise OR'd together);` `if (flags == (<one or more masks bitwise OR'd together)) { // do something }`

这给出了排他匹配。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T04:37:45.827

首先，您需要知道从返回的值`-modifierFlags`包含一些与键不完全对应的标志。您应该构建一个掩码，其中包含您关心的所有标志（无论您关心它们是否被按下）。通过该掩码传递标志值，然后将结果与您想要的组合进行比较。

例如，如果您关心 Command、Option、Shift 和 Control，并且您想知道 Command 和 Shift 是否完全关闭，而其他没有，您可以使用：

```
if ((flags & (NSShiftKeyMask|NSControlKeyMask|NSAlternateKeyMask|NSCommandKeyMask)) == (NSShiftKeyMask|NSCommandKeyMask))
    // do something 
```

**更新：**以下是检查各种组合的方法：

```
flags &= NSShiftKeyMask|NSControlKeyMask|NSAlternateKeyMask|NSCommandKeyMask;
if (flags == (NSControlKeyMask|NSAlternateKeyMask|NSCommandKeyMask))
    NSLogs(@"Command+Option+Control");
else if (flags == (NSShiftKeyMask|NSCommandKeyMask))
    NSLog(@"Command+Shift ");
else if (flags == (NSControlKeyMask|NSCommandKeyMask))
    NSLog(@"Command+Control");
else if (flags == (NSAlternateKeyMask|NSCommandKeyMask))
   NSLog(@"Command+Option "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-24T20:15:24.080

为了抓住按下的组合，您需要使用 switch/break 结构：

```
switch (flags) {
            case (NSControlKeyMask|NSAlternateKeyMask|NSCommandKeyMask):
                [keystrokes appendString:@"cmd-alt-ctrl-"];
                break;
            case (NSShiftKeyMask|NSCommandKeyMask):
                [keystrokes appendString:@"cmd-shift-"];
                break;
            case (NSControlKeyMask|NSCommandKeyMask):
                [keystrokes appendString:@"cmd-ctrl-"];
                break;
            case (NSAlternateKeyMask|NSCommandKeyMask):
                [keystrokes appendString:@"cmd-alt-"];
                break;
            default:
                break;
        } 
```

# c# - 使用 C# winform 的 zeromq pub/sub 示例

> ID：14794393
> 
> 赞同：9
> 
> 时间：2013-02-10T03:27:34.680
> 
> 标签：c#, .net, winforms, zeromq

我正在尝试在发布/订阅模型中创建一个使用 ZeroMQ（通过 nuget 的 clrzmq .net 绑定（x86））的 C# Winform 应用程序。

经过大量搜索，我只能找到代码使用 while 语句无限期地处理新消息的独立 C# 示例。当我尝试使用这些示例时，我不知道将代码放在哪里，它只会阻止 gui 和其他所有内容。

我不知道不使用另一个线程是否不可能，但我的印象是 ZeroMQ 的异步行为可以在不编写额外线程的情况下工作。也许我只是不知道将 zeromq 代码放在哪里，或者我真的需要另一个线程。

如果有人可以提供一个简单的 pub/sub 示例，说明将代码实际插入到默认 C# winform 应用程序的位置，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T11:56:09.340

我假设您在项目中使用[clrzmq ZeroMq 包装器](https://github.com/zeromq/clrzmq)。据我所知，不可能使用 clrzmq 在简单的循环中接收非阻塞消息，它会无限期地阻塞一段特定的时间（通过向接收方法提供超时）或直到您收到一条消息.

但是，设置一个线程来定期轮询套接字并将传入消息推送到`Queue`. 然后，您可以使用例如一个简单的 WinForms`Timer`定期将任何未决消息从该 (shared) 中取出`Queue`。这是一个线程订阅者的工作示例：

```
public class ZeroMqSubscriber
{
    private readonly ZmqContext _zmqContext;
    private readonly ZmqSocket _zmqSocket;
    private readonly Thread _workerThread;
    private readonly ManualResetEvent _stopEvent = new ManualResetEvent(false);
    private readonly object _locker = new object();
    private readonly Queue<string> _queue = new Queue<string>();

    public ZeroMqSubscriber(string endPoint)
    {
        _zmqContext = ZmqContext.Create();
        _zmqSocket = _zmqContext.CreateSocket(SocketType.SUB);
        _zmqSocket.Connect(endPoint);
        _zmqSocket.SubscribeAll();

        _workerThread = new Thread(ReceiveData);
        _workerThread.Start();
    }

    public string[] GetMessages()
    {
        lock (_locker)
        {
            var messages = _queue.ToArray();
            _queue.Clear();
            return messages;
        }
    }

    public void Stop()
    {
        _stopEvent.Set();
        _workerThread.Join();
    }

    private void ReceiveData()
    {
         try
         {
             while (!_stopEvent.WaitOne(0))
             {
                 var message = _zmqSocket.Receive(Encoding.UTF8, 
                               new TimeSpan(0, 0, 0, 1));
                 if (string.IsNullOrEmpty(message))
                     continue;

                 lock (_locker)
                     _queue.Enqueue(message);
             }
         }
         finally
         {
             _zmqSocket.Dispose();
             _zmqContext.Dispose();
         }
    }
} 
```

从`Form`您只需定期轮询队列（此示例使用 a`Forms Timer`并将消息数据附加到 a `Textbox`）：

```
private readonly ZeroMqSubscriber _zeroMqSubscriber = 
        new ZeroMqSubscriber("tcp://127.0.0.1:5000");

void ReceiveTimerTick(object sender, EventArgs e)
{
    var messages = _zeroMqSubscriber.GetMessages();
    foreach (var message in messages)
        _textbox.AppendText(message + Environment.NewLine);
} 
```

# magento - 我应该遵循什么规则来创建一个块（对于块名称、类型等）？

> ID：14794394
> 
> 赞同：0
> 
> 时间：2013-02-10T03:27:39.263
> 
> 标签：magento, block

我在创建块或调用块时感到困惑。在 phtml 文件中假设在 footer.phtml 文件中如果我想调用一个静态块然后我写

```
<?php echo $this->getLayout()->createBlock('cms/block')->setBlockId('static_block_name')->toHtml(); ?> 
```

和时事通讯（在我的主题文件夹中的模板文件夹中）

```
<?php echo $this->getLayout()->createBlock('newsletter/subscribe')->setTemplate('newsletter/subscribe.phtml')->toHtml(); ?> 
```

那么我应该在 footer.phtml 中写什么来调用内置块（位于基本文件夹中），如日历、验证码等？请告诉我如何在 phtml 文件和 xml 文件中调用它们。

请告诉我

```
1\. <?php echo $this->getLayout()->createBlock('**?**')->setTemplate('**?**')->toHtml(); ?>
2\. xml block code and where to put the code
3\. rules to write block type and name. 
```

-谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T06:38:04.330

您提到的两个块之间的唯一区别是类型。cms/block 类型是一种内置方式，可让您创建任意文本块，其中包含对附加内容的可选引用（通过链接或对其他块的调用等小部件的 Magento 原生附加信息）。

您列出的第二个块是表示特定块的块，该块用于输出具有特定模板的特定模型。如果你深入研究 Magento 的结构，你会发现作为 Magento 核心的代码存在于 app/code/core/Mage 文件夹中。在其中，您会找到诸如目录/类别、目录/产品、时事通讯/订阅等项目。此外，根据 MVC，您将需要一种方法通过视图或 Magento 条款的模板向用户呈现该模型. 模型视图将存在于 app/design/frontend/{package}/{theme}/template/ 文件夹中。您应该会在两组文件夹之间找到一些连续性，并将到达一组可用于输出块的视图。在这种产品的情况下，

希望这将使您更好地了解 Magento 的野兽。正如 Alan Storm 所描述的，Magento[不是您父亲的 PHP](http://commercebug.pulsestorm.net/No_Frills_Magento_Layout_Sample.pdf)。

# java - m2eclipse 依赖版本不是最新的

> ID：14794395
> 
> 赞同：0
> 
> 时间：2013-02-10T03:27:51.593
> 
> 标签：java, eclipse, spring, maven, m2eclipse

我正在使用**m2eclipse**插件在 eclipse 中开发 maven 项目。在编辑**pom.xml**文件时，我使用 pom.xml 编辑器中的**Dependencies**选项卡来选择所需的依赖项。最近我注意到搜索时可用的依赖项不是最新的。

例如。m2eclipse 中用于**spring-aop**的可用版本是 3.1.3.RELEASE 但是快速谷歌搜索给了我来自[mvnrepository.com的](http://mvnrepository.com/artifact/org.springframework/spring-aop/3.2.1.RELEASE)[3.2.1.RELEASE](http://mvnrepository.com/)版本。同样**，spring-asm**也不是最新的。

我正在使用许多依赖项，我不想手动检查最新的依赖项。

m2eclipse 中的存储库如何保持最新，可以与 mvnrepository.com 同步？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T05:41:00.797

选择`Window`、`Show View`、`Other...`、`Maven`，`Maven Repositories`然后单击确定。这将打开`Maven Repositories`视图。选择`Global Repositories`并右键单击`central (http://repo.maven.apache.org/maven2)`，选择`Rebuild Index`或`Update Index`。这将使您的索引保持最新。

# modx - 如何使用特定电视在 modx 中显示资源

> ID：14794397
> 
> 赞同：0
> 
> 时间：2013-02-10T03:28:03.143
> 
> 标签：modx, modx-revolution, modx-resources

我正在尝试使用 getResources 仅显示具有某种类型模板变量的资源。我知道我做错了 b/c 页面显示所有模板变量：

```
[[!getResources? 
&parent=`[[*id]]` 
&showHidden=`1` 
&limit=`0` 
&tpl=`Dining Section` 
&includeContent=`1` 
&includeTVs=`1` 
&processTVs=`1` 
&tvPrefix=`` 
&tvFilters=`Dining Section Title != ''`]] 
```

在最后一个论点中，我试图仅显示带有电视“Dining Section Title”的资源。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T09:05:08.327

您的语法缺少选项值周围的反引号，并且您不能在块或电视名称中包含空格。检查实际的 TV 和 Chunk 名称是什么，然后像这样重新格式化您的代码段调用：

```
[[!getResources? 
   &parent=`[[*id]]` 
   &showHidden=`1` 
   &limit=`0` 
   &tpl=`DiningSection` 
   &includeContent=`1` 
   &includeTVs=`1` 
   &processTVs=`1` 
   &tvPrefix=`` 
   &tvFilters=`DiningSectionTitle!=''`
   ]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T00:24:08.313

我解决了。我需要从 tvFilters 值中删除单引号。

```
[[!getResources? 
  &parent=`[[*id]]` 
  &showHidden=`1` 
  &limit=`0` 
  &tpl=`Dining Section` 
  &includeContent=`1` 
  &includeTVs=`1` 
  &processTVs=`1` 
  &tvPrefix=`` 
  &tvFilters=`Dining Section Title!=`
]] 
```

感谢 okyanet 的帮助。

# file - 在不让最终用户将文件存储到他们的 PC 的情况下共享文件

> ID：14794398
> 
> 赞同：0
> 
> 时间：2013-02-10T03:28:18.353
> 
> 标签：file, share

我们得到了只允许在办公室查看的 PDF 文件。一些用户将这些文件保存在闪存驱动器磁盘中并将它们带回家或发送到他们的电子邮件。防止这种情况的最佳方法是什么。仍然启用屏幕截图。

> 网络：100 Mbps 基于 LAN
> 查看文件的并发用户数：一次大约 50 个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T03:58:21.133

如果用户可以读取文件，他就可以复制它。你肯定需要一个软件来充当中间人。有一些软件解决方案使用 DRM 加密来保护您的 PDF 文件。一些人声称也可以防止屏幕截图。

在您的情况下，您可能希望 DRM 软件在您的网络上检查许可证证书服务器，以确保他们在办公室中，然后再让他们打开文件。这将允许他们仍然使用带回家的拇指驱动器和笔记本电脑来完成工作。

尝试搜索“PDF DRM”并查看您找到的内容。

# c# - 使应用程序在启动时运行

> ID：14794400
> 
> 赞同：1
> 
> 时间：2013-02-10T03:28:41.980
> 
> 标签：c#, winforms, events, startup

我一直试图让我的应用程序在启动时运行。我添加了一个上下文菜单，可以打开和关闭此功能。上下文菜单的左侧启用了“检查”功能（选中时会出现复选标记）。

```
 // 
    // menu_startup
    // 
    this.menu_startup.Name = "menu_startup";
    this.menu_startup.ShortcutKeyDisplayString = "";
    this.menu_startup.Size = new System.Drawing.Size(201, 22);
    this.menu_startup.Text = "Run on startup";
    this.menu_startup.Click += new System.EventHandler(this.menu_startup_Click); 
```

这就是我在 Form1.cs 中所做的

```
public string regKey = "IMGit";

        public Form1()
        {
            InitializeComponent();
            notifyIcon1.ContextMenuStrip = contextMenuStrip1;

            RegistryKey rkApp = Registry.CurrentUser.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", true);

            if (rkApp.GetValue(this.regKey) == null)
            {
                this.menu_startup.Checked = false;
            }
            else
            {
                this.menu_startup.Checked = true;
            }

            this.menu_about.Click += menu_about_Click; // Ignore
            this.menu_exit.Click += menu_exit_Click; // Ignore
            this.menu_startup.Click += menu_startup_Click;
        }    

            private void menu_startup_Click(object sender, EventArgs e)
            {
                RegistryKey rkApp = Registry.CurrentUser.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", true);

                if (rkApp.GetValue(this.regKey) == null)
                {
                    rkApp.SetValue(this.regKey, Application.ExecutablePath.ToString());
                }
                else
                {
                    rkApp.DeleteValue(this.regKey, false);
                }
            } 
```

我看不出我在这里做错了什么。这应该为我的应用程序设置一个新的注册表项。

如果我在构造函数中添加代码行来创建注册表项，它将很好地创建该条目。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:39:43.973

如果您希望在应用程序启动时创建注册表项，则需要`menu_startup_Click`从构造函数中调用该方法。

```
public Form1()
        {
            InitializeComponent();
            notifyIcon1.ContextMenuStrip = contextMenuStrip1;

            //Make the call to add the registry key here (plus Check or Uncheck the menu)
            menu_startup_Click(null,null); 

            this.menu_startup.Click += menu_startup_Click;                
        }    

 private void menu_startup_Click(object sender, EventArgs e)
        {
            RegistryKey rkApp = Registry.CurrentUser.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", true);

            //Check or Uncheck the menu
            this.menu_startup.Checked = (rkApp.GetValue(this.regKey) == null)

            if (rkApp.GetValue(this.regKey) == null)
            {
                rkApp.SetValue(this.regKey, Application.ExecutablePath.ToString());
            }
            else
            {
                rkApp.DeleteValue(this.regKey, false);
            }               
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T09:08:41.433

在构造函数中创建一个 lambda 函数解决了这个问题。

```
 this.menu_startup.Click += (s, ea) =>
    {
        RegistryKey rkApp = Registry.CurrentUser.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", true);
        string appPath = Application.ExecutablePath.ToString();

        this.menu_startup.Checked = (rkApp.GetValue(this.regKey) == null);

        if (rkApp.GetValue(this.regKey) == null)
        {
            rkApp.SetValue(this.regKey, appPath);
        }
        else
        {
            rkApp.DeleteValue(this.regKey, false);
        } 
    }; 
```

# java - Java (Android) - 同步队列和发送数据

> ID：14794407
> 
> 赞同：0
> 
> 时间：2013-02-10T03:30:59.533
> 
> 标签：java, android, queue, synchronized

我有两个线程。一个用于生成数据，第二个用于将它们发送到服务器。这是典型的生产者-消费者情况吗？为此，我构建了用于管理同步队列的简单代码 - 我希望：我做的或多或少是正确的？请问有人可以回答我吗？我的代码在下面：

```
public ArrayList<String> Packets;

public synchronized void add_to_Queue (String data) {
    Packets.add(data);
}

public synchronized void del_from_Queue (int position) {
    Packets.remove(position);
}

public synchronized String read_from_ Queue(int position) {
    return Packets.get(position);
}

public synchronized int number_of_element_of_Queue() {
    return Packets.size();
} 
```

第一个线程通过使用简单的命令添加新数据：

```
add_to_Queue("XYZ); 
```

第二个循环发送数据：

```
while (OK)
{
    try
    {
        while (number_of_element_of_Queue()>0)
        {
            out.write(read_from_Queue(0)+"\n");
            out.flush;
            del_from_Queue(0); // if no error delete just sent element
        }
    }
    catch (IOException e1)
    {
      reconnect();
    }
} 
```

我认为有些问题是因为发送静态数据（简单的静态文本而不是从我的“队列”中读取它）不会导致重新连接（即在 catch (IOException e1) 之后）。但是当我使用提供的代码时，它经常发生，尤其是在重新连接之后。它做了几次（发送一些数据，重新连接，发送更多数据，再次重新连接等等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:40:13.727

是的，如果队列是空的会发生什么？你似乎没有检查或处理它。但这不是您没有考虑的唯一条件。

更一般地说，显示的实现不是队列的工作方式。队列是先进先出的，不需要位置参数。没有“读取”然后“删除”的概念，这些操作通常通过“获取”是原子的。最好使用现有的`BlockingQueue`实现而不是编写自己的实现。

# c - Socket多线程实现C

> ID：14794409
> 
> 赞同：0
> 
> 时间：2013-02-10T03:31:29.527
> 
> 标签：c, multithreading, sockets, pthreads, client-server

我正在用 C 实现一个多线程多客户端单服务器套接字。但是，无论出于何种原因，当前程序，当使用 pthread_create() 创建一个新线程时，它不会超过那行代码。我已经在这行代码之前和之后放置了打印行，并且在手动打印之前的所有打印行都可以正常打印，但在打印之后都没有。这让我相信 pthread_create() 在某种程度上是错误的。奇怪的是，我可以让 1 个客户端连接并成功地从服务器发送/接收数据，但是由于 listen() 命令所在的循环没有推进，我无法接受其他客户端。感谢您在这件事上的帮助。

服务器代码

```
#include <stdio.h>
#include <stdlib.h> //for IOs
#include <string.h>
#include <unistd.h>
#include <sys/types.h> //for system calls
#include <sys/socket.h> //for sockets
#include <netinet/in.h> //for internet
#include <pthread.h>

void error(const char *msg)
{
    perror(msg);
    exit(1);
}
void *threadFunc(int mySockFd)
{
    int n;
    char buffer[256];
    do
    {
        bzero(buffer,256);
        n = read(mySockFd,buffer,255);
        if (n < 0) 
        {
            error("ERROR reading from socket");
        }
        else if(strcmp(buffer, "EXIT\n") == 0)
    {
        printf("Exit by user\n");
        pthread_exit(NULL);
    }
    else
    {
        printf("Here is the message: %s\n",buffer);
            n = write(mySockFd,"I got your message",18);            
            if (n < 0) 
            {
                error("ERROR writing to socket");
            }
        }
    }while(n >= 0);

}    

int main(int argc, char *argv[])
{
    int sockfd;
    int newsockfd;
    int portno;
    pthread_t pth;
    int n; /*n is the return value for the read() and write() calls; i.e. it contains     the number of characters read or written.*/
    int i = 0;
    printf("after var decl");
socklen_t clilen; /*clilen stores the size of the address of the client. This is     needed for the accept system call.*/
    char buffer[256]; /*The server reads characters from the socket connection into     this buffer.*/
    struct sockaddr_in serv_addr;
    struct sockaddr_in cli_addr;
if (argc < 2) 
    {
        fprintf(stderr,"ERROR, no port provided\n");
        exit(1);
    }
sockfd = socket(AF_INET, SOCK_STREAM, 0);
if (sockfd < 0)
    {
        error("ERROR opening socket");
    }
bzero((char *) &serv_addr, sizeof(serv_addr));
portno = atoi(argv[1]);
serv_addr.sin_family = AF_INET;
serv_addr.sin_addr.s_addr = INADDR_ANY;
serv_addr.sin_port = htons(portno);
if (bind(sockfd, (struct sockaddr *) &serv_addr, sizeof(serv_addr)) < 0)
    {
        error("ERROR on binding");
    }
do
    {       
        printf("before listen");
        listen(sockfd,5);
        printf("after listen");
                clilen = sizeof(cli_addr);
        printf("before accept");
        newsockfd = accept(sockfd,(struct sockaddr *) &cli_addr,&clilen);
        printf("after accept");
        pthread_create(&pth,NULL,threadFunc(newsockfd),(void*) &i);
        printf("after pthread create");
        if (newsockfd < 0)
        {
            error("ERROR on accept");
        }
    }while(1 == 1);
bzero(buffer,256);
    n = read(newsockfd,buffer,255);
    if (n < 0) 
    {
        error("ERROR reading from socket");
    }
    printf("Here is the message: %s\n",buffer);
if (n < 0) error("ERROR writing to socket");
close(newsockfd);
    close(sockfd);
    return 0; 
```

这是客户代码

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h> /*The file netdb.h defines the structure hostent, which will be     used below.*/
void error(const char *msg)
{
    perror(msg);
    exit(0);
}

int main(int argc, char *argv[])
{
int sockfd;
int portno;
int n;
struct sockaddr_in serv_addr;
struct hostent *server;
char buffer[256];
if (argc < 3) 
{
    fprintf(stderr,"usage %s hostname port\n", argv[0]);
    exit(0);
}
    portno = atoi(argv[2]);
    sockfd = socket(AF_INET, SOCK_STREAM, 0);
if (sockfd < 0)
{
    error("ERROR opening socket");  
}
server = gethostbyname(argv[1]);
if (server == NULL) 
{
    fprintf(stderr,"ERROR, no such host\n");
    exit(0);
}
bzero((char *) &serv_addr, sizeof(serv_addr));
serv_addr.sin_family = AF_INET;
bcopy((char *)server->h_addr,
(char *)&serv_addr.sin_addr.s_addr,
server->h_length);
serv_addr.sin_port = htons(portno);
if (connect(sockfd,(struct sockaddr *) &serv_addr,sizeof(serv_addr)) < 0)
{
    error("ERROR connecting");
}
do
{
    printf("Please enter the message: ");
    bzero(buffer,256);
    fgets(buffer,255,stdin);
    n = write(sockfd,buffer,strlen(buffer));
    if(strcmp(buffer,"EXIT\n") == 0)
    {
        printf("Connection Terminated\n");
        break;
    }
    if (n < 0)
    {
        error("ERROR writing to socket");
    }
    bzero(buffer,256);
    n = read(sockfd,buffer,255);
    printf("%s\n",buffer);
    if (n < 0)
    {
    error("ERROR reading from socket");
    printf("%s\n",buffer);
    }

}while(1 == 1);
close(sockfd);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T17:30:11.980

两个错误：

1.  你投的太多了，这里唯一的地方应该是 inaddr 的东西。
2.  你没有听你的编译器，提高警告级别。

现在，问题（或者可能只是一个？）实际上是这样的：

```
pthread_create(&pth,NULL,threadFunc(newsockfd),(void*) &i); 
```

这将调用`threadFunc(newsockfd)`并将结果传递给 pthread_create。但是，第二部分永远不会发生，因为该函数调用 pthread_exit 或从末尾落下而没有返回任何内容，这可能会导致任何事情发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T12:30:24.113

您的服务器代码没有可靠地显示 printf 语句是因为您没有以“\n”结束传递给 printf 的字符串。

更改所有 printf 语句以包含尾随 \n 以便立即“刷新”输出。例如

代替：

```
printf("after pthread create"); 
```

做这个：

```
printf("after pthread create\n"); 
```

**对所有**printf 语句重复该修复。然后，当客户端连接到它时，程序流将更容易看到。

您的代码中可能还有大约 5 或 6 个其他错误。我要说的主要是因为客户端发送了 4 个字节的“EXIT”，这并不意味着 TCP 流不会在两个单独的读取调用中将其分段为“EX”和“IT”，具体取决于管间状态。始终编​​写您的协议代码，就好像 read/recv 一次只返回一个字符一样。**或者**只是将 MSG_WAITALL 与 recv() 一起使用，以便您始终读取块大小。

# c# - 如何在 Windows 8 应用程序中使用 xaml 矢量图像作为图像源

> ID：14794412
> 
> 赞同：10
> 
> 时间：2013-02-10T03:31:55.460
> 
> 标签：c#, xaml, windows-8, vector-graphics, inkscape

我在inkscape 中创建了一些资产，并希望将它们用作Windows 8 应用程序中的图标。我读过一些书，发现虽然 .Net 4.5 支持 SVG，[但现代 ui 配置文件不](https://stackoverflow.com/questions/10752316/display-svg-in-metro-app-with-c-sharp-and-xaml)支持. [我使用此工具](http://www.graphspe.com/svg-to-xaml-converter#/Converter)将 svg 转换为 xaml 。

我得到以下 xaml。

```
<Canvas xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" x:Name="svg2997" Width="744.09448" Height="1052.3622" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation">
  <Canvas x:Name="layer1">
    <Path Fill="#FFCCCCCC" Stroke="#FF000000" StrokeThickness="1.34377062" StrokeMiterLimit="4" x:Name="path3007" Data="M372.58272,134.72445C167.96301,134.72445 2.06820310000001,300.58818 2.06820310000001,505.20789 2.06820310000001,709.8276 167.96301,875.72241 372.58272,875.72241 577.20243,875.72241 743.06616,709.8276 743.06616,505.20789 743.06616,300.58818 577.20243,134.72445 372.58272,134.72445z M280.73888,251.77484L455.94149,251.77484 455.94149,413.70594 628.16035,413.70594 628.16035,588.97071 455.94149,588.97071 455.94149,773.71514 280.73888,773.71514 280.73888,588.97071 106.22005,588.97071 106.22005,413.70594 280.73888,413.70594 280.73888,251.77484z" />
  </Canvas>
</Canvas> 
```

如果我将它直接添加到我的应用程序 xaml 中，它会呈现，但是比例很差。

如果可能，我想将其用作图像对象的图像源。

```
<Image HorizontalAlignment="Left" Height="100" Margin="127,37,0,0" VerticalAlignment="Top" Width="100" Source="Assets/plus_circle.xaml"/> 
```

这可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-11T22:53:59.680

大多数 AppBar 按钮都基于 StandardStyles 中包含的一种样式，称为 AppBarButtonStyle。

要自定义设置**AutomationProperties.Name**附加属性的按钮文本，自定义设置*Content*属性的按钮中的图标，并且出于可访问性原因设置**AutomationProperties.AutomationId**附加属性也是一个好主意。

以下是使用此方法自定义的按钮示例：

```
<Style x:Key="FolderButtonStyle" TargetType="ButtonBase" BasedOn="{StaticResource AppBarButtonStyle}">
    <Setter Property="AutomationProperties.AutomationId" Value="FolderAppBarButton"/>
    <Setter Property="AutomationProperties.Name" Value="Folder"/>
    <Setter Property="Content" Value="&#xE188;"/>
</Style> 
```

如上所述，要自定义图标，您需要设置**Content**属性。挑战在于您如何设置内容以显示您的自定义矢量艺术。

事实证明，您可以将任何路径 Xaml（甚至是您的路径）放入**Viewbox**以更改其比例。这是我的第一种方法，但它不起作用。事实上，似乎任何时候使用 Xaml 扩展表示法来设置按钮的**Content**属性都不起作用。

```
<Style x:Key="SquareButtonStyle" TargetType="ButtonBase" BasedOn="{StaticResource AppBarButtonStyle}">
<Setter Property="AutomationProperties.AutomationId" Value="SquareAppBarButton"/>
<Setter Property="AutomationProperties.Name" Value="Square"/>
<Setter Property="Content">
    <Setter.Value>
        <!-- This square will never show -->
        <Rectangle Fill="Blue" Width="20" Height="20" />
    </Setter.Value>
</Setter> 
```

我实际上认为这是一个错误，但幸运的是有一个解决方法。

Tim Heuer 写了一篇*出色*的文章，介绍了使用 Xaml**路径**作为按钮图稿的最简单方法。那篇文章在这里：

[http://timheuer.com/blog/archive/2012/09/03/using-vectors-as-appbar-button-icons.aspx](http://timheuer.com/blog/archive/2012/09/03/using-vectors-as-appbar-button-icons.aspx)

简而言之，您需要定义一个正确设置所有绑定的样式：

```
<Style x:Key="PathAppBarButtonStyle" BasedOn="{StaticResource AppBarButtonStyle}" TargetType="ButtonBase">
<Setter Property="ContentTemplate">
    <Setter.Value>
        <DataTemplate>
            <Path Width="20" Height="20" 
                Stretch="Uniform" 
                Fill="{Binding Path=Foreground, RelativeSource={RelativeSource Mode=TemplatedParent}}" 
                Data="{Binding Path=Content, RelativeSource={RelativeSource Mode=TemplatedParent}}"/>
        </DataTemplate>
    </Setter.Value>
</Setter> 
```

然后，您创建一个继承自该样式的样式并粘贴到您的路径中。这是您上面列出的艺术品的风格：

```
<Style x:Key="CrossButtonStyle" TargetType="ButtonBase" BasedOn="{StaticResource PathAppBarButtonStyle}">
    <Setter Property="AutomationProperties.AutomationId" Value="CrossAppBarButton"/>
    <Setter Property="AutomationProperties.Name" Value="Cross"/>
    <Setter Property="Content" Value="M372.58272,134.72445C167.96301,134.72445 2.06820310000001,300.58818 2.06820310000001,505.20789 2.06820310000001,709.8276 167.96301,875.72241 372.58272,875.72241 577.20243,875.72241 743.06616,709.8276 743.06616,505.20789 743.06616,300.58818 577.20243,134.72445 372.58272,134.72445z M280.73888,251.77484L455.94149,251.77484 455.94149,413.70594 628.16035,413.70594 628.16035,588.97071 455.94149,588.97071 455.94149,773.71514 280.73888,773.71514 280.73888,588.97071 106.22005,588.97071 106.22005,413.70594 280.73888,413.70594 280.73888,251.77484z"/>
</Style> 
```

最后，您可以像这样在 AppBar 中使用它：

```
<Button Style="{StaticResource CrossButtonStyle}" /> 
```

开发支持、设计支持和更多的好处：http: [//bit.ly/winappsupport](http://bit.ly/winappsupport)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T06:29:44.827

我很肯定你不能只注入`Path` `Data`到一个`Image` `Source`并期望它神奇地工作，除非它通过一个[绘图](http://msdn.microsoft.com/en-us/library/system.windows.media.drawingimage.aspx)对象作为[Source](http://msdn.microsoft.com/en-us/library/ms753308.aspx)。但是，您可以做的是以相同的方式将您`Path`的`ContentControl`用于重用，而不必`Drawing`为每个实例都经历对象的麻烦。

所以代替;

```
<Image Source="..."/> 
```

只需做这样的事情并将其放入您的`Object.Resources`or `ResourceDictionary`;

```
 <Style x:Key="YourThingy" TargetType="ContentControl">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="ContentControl">
                   <Path Fill="#FFCCCCCC" Stroke="#FF000000" StrokeThickness="1.34377062" StrokeMiterLimit="4" x:Name="path3007" Data="M372.58272,134.72445C167.96301,134.72445 2.06820310000001,300.58818 2.06820310000001,505.20789 2.06820310000001,709.8276 167.96301,875.72241 372.58272,875.72241 577.20243,875.72241 743.06616,709.8276 743.06616,505.20789 743.06616,300.58818 577.20243,134.72445 372.58272,134.72445z M280.73888,251.77484L455.94149,251.77484 455.94149,413.70594 628.16035,413.70594 628.16035,588.97071 455.94149,588.97071 455.94149,773.71514 280.73888,773.71514 280.73888,588.97071 106.22005,588.97071 106.22005,413.70594 280.73888,413.70594 280.73888,251.77484z" />
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

然后随心所欲地把它放在你的视野中；

```
 <ContentControl Style="{StaticResource YourThingy}"/> 
```

但是，您将希望使用您的路径。它似乎设置了一个大尺寸，但希望这为您的情况提供了一个很好的选择。干杯!

# wpf - WPF Combobox，绑定一个集合 哪里 item 有一个 bool 属性 isSelected？

> ID：14794415
> 
> 赞同：1
> 
> 时间：2013-02-10T03:32:24.370
> 
> 标签：wpf, binding, combobox, selecteditem

我有一个列表<版本>，其中版本等具有属性版本UUID、标签、SKU 和 IsSelected。我想将它绑定到一个 Combobox 并让所选项目只选择 IsSelected 标志（未选择任何先前设置的标志）。

注意：组合框在模板中，在数据网格单元格内使用，所以我不能只将 SelectedItem 绑定到模型！

到目前为止我正在工作，数据网格按预期更新数据库，但是初始值未设置 onLoad。如果一个版本已经有 IsSelected=true，我希望它显示在 Combobox 中，但它始终为空，除非我从列表中选择一个。

```
 <DataTemplate x:Key="dtDatagridVersionSelector">
        <ComboBox Margin="0" Width="90"  Style="{StaticResource DatagridComboBox}"
                  ItemsSource="{Binding Path=Versions, Mode=OneTime}">
            <ComboBox.ItemTemplate >
                <DataTemplate >
                    <RadioButton Focusable="false"  IsEnabled="true" 
                                  GroupName="{Binding VersionUUID}" 
                                  IsChecked="{Binding IsSelected, Mode=TwoWay}">
                        <StackPanel Orientation="Horizontal" >
                            <TextBlock Margin="3,0,0,0"  Text="{Binding Label}"/>
                            <TextBlock Foreground="Red" Margin="3,0,0,0" 
                                       Text="{Binding SKU}"/>
                        </StackPanel>
                    </RadioButton>
                </DataTemplate>
            </ComboBox.ItemTemplate>
            <ComboBox.ItemContainerStyle>
                <Style TargetType="ComboBoxItem">
                    <Setter Property="IsSelected" 
                        Value="{Binding IsSelected, Mode=OneWay}" />
                </Style>
            </ComboBox.ItemContainerStyle>
        </ComboBox>
    </DataTemplate> 
```

另外，Radiobox的使用也不是一成不变的，如果有更好的解决方案来实现这一点所以只有一个项目被选中，我都愿意接受

感谢任何指针安德烈亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T06:06:36.490

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication1"
    Title="MainWindow" Height="350" Width="525">
<Window.Resources>
    <local:SelectedItemConverter x:Key="selectedItemConverter"/>
</Window.Resources>
<Grid>
    <ComboBox ItemsSource="{Binding Students}" SelectedItem="{Binding Students, Converter={StaticResource selectedItemConverter}}" DisplayMemberPath="Name"/>
</Grid> 
```

```
 public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        Students = new ObservableCollection<Student>();
        Students.Add(new Student() { Name = "HArish", RollNo = 1, IsSelected = false });
        Students.Add(new Student() { Name = "Arev", RollNo = 2, IsSelected = false });
        Students.Add(new Student() { Name = "Pankaj", RollNo = 3, IsSelected = true });
        Students.Add(new Student() { Name = "Deepak", RollNo = 4, IsSelected = false });
        DataContext = this;
    }
    public ObservableCollection<Student> Students { get; set; }
}
public class Student
{
    public string Name { get; set; }
    public int RollNo { get; set; }
    public bool IsSelected { get; set; }
}

public class SelectedItemConverter : IValueConverter
{

    #region IValueConverter Members

    public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        if (value != null && value is IEnumerable<Student>)
            return ((IEnumerable<Student>)value).Where(s => s.IsSelected).FirstOrDefault();
        return null;
    }

    public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
    {
        throw new NotImplementedException();
    }

    #endregion
} 
```

我希望这将有所帮助。

# java - 以编程方式构造 Java 代码？

> ID：14794418
> 
> 赞同：0
> 
> 时间：2013-02-10T03:33:07.333
> 
> 标签：java

我正在开发一个模块，我必须将一组逻辑表示和其他数据转换为 Java 源代码。

我希望能够首先将它们转换为 Java 元素（类、方法等）的中间表示，然后将此中间表示转换为实际的字符串/文本文件。

例如，我希望能够构造这样的元素：

```
JavaClass myClass = new JavaClass("MyClass", "MyParent", new String[] {"MyInterface", "MySecondInterface"}); 
```

然后让 myClass 的 toString() 方法输出类似：

```
class MyClass extends MyParent implements MyInterface, MySecondInterface { } 
```

等等变量，方法，语句等 - 最好是格式化。只是为了演示，这个例子被过度简化了——实际上我更喜欢至少类似于抽象语法树的表示。

我查看了 com.sun.org.apache.bcel.* 包，但由于它是用于字节码的，因此在这里没有多大帮助。转换框架（例如 Recoder）似乎也不是我想要的。

谁能推荐一个我可以使用的框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:46:03.063

您应该查看[Javassist](http://www.csg.is.titech.ac.jp/~chiba/javassist/)。它有一个非常简单的 API 用于动态创建类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T07:51:14.663

您可以使用[freemarker 之](http://freemarker.sourceforge.net/)类的模板引擎。编写一个“类”模板并使用 freemarker 放入您的数据。使用起来真的很简单。Freemarker 支持您需要的一切，例如交互、条件、...

# c++ - 尝试访问文件时程序崩溃，fstream --C++

> ID：14794424
> 
> 赞同：0
> 
> 时间：2013-02-10T03:33:30.933
> 
> 标签：c++, fstream, crash-reports

我正在制作一个用户数据库。当我尝试打开`"dataBase.txt"`包含所有用户和密码的控制台时，控制台会弹出（这应该会发生，因为它是控制台应用程序）但它说程序已经完成。当我关闭它时，我的电脑告诉我程序已经崩溃。该函数保存在一个类中。

经过一些调试后，代码似乎崩溃了`ifstream fin("dataBase.txt");`

**编译器没有返回错误。**

**调用函数的代码是：**

```
void User_Psw::UserCheck()
{
    // read from the database
    ifstream fin("dataBase.txt");

    while (!fin.eof())
    {
        fin >> Usernames[sizeOfDatabase] >> Password[sizeOfDatabase];
        sizeOfDatabase++; //The Number of lines in .txt
    }

    // rest of the program
    cout << "Username: ";
    cin >> username;

    getNameIndex();

    cout << "Password: ";
    cin >> password;

    if(!PasswordMatches())
    {
        cout << "Access denied";
    }
} 
```

**如果被问到，我可以添加更多代码片段。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:50:39.427

[不要`fin.eof()`用来控制循环](https://stackoverflow.com/questions/5605125/why-is-iostreameof-inside-a-loop-condition-considered-wrong)。该功能仅在读取失败后才有用。

但是，崩溃的一个可能原因是您分配给`Usernames[sizeOfDatabase]`，这可能超出`Usernames.capacity()`. 将和项目附加到 a 的规范方法[**`std::vector`**](http://en.cppreference.com/w/cpp/container/vector)是调用[**`push_back()`**](http://en.cppreference.com/w/cpp/container/vector/push_back).

由于您的容器是`std::vector<std::string>`，这是一个更好的方法......

```
std::string username, password;
while (fin >> username >> password)
{
    Usernames.push_back(username);
    Passwords.push_back(password);
    ++sizeOfDatabase;
} 
```

当然，如果你想知道文件被读取后的用户名或密码的数量，你可以调用`Usernames.size()`（应该和 一样`Passwords.size()`）；这可能避免需要保留`sizeOfDatabase`.

[就个人而言，我会为用户名和（加盐、散列的）密码](http://www.codinghorror.com/blog/2007/09/youre-probably-storing-passwords-incorrectly.html)使用一个容器，而不是两个单独的容器；要么[`std::map<std::string, std::string>`](http://en.cppreference.com/w/cpp/container/map)或也许[`std::unordered_map<std::string, std::string>`](http://en.cppreference.com/w/cpp/container/unordered_map)，使每个用户名的密码查找变得又快又好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T03:40:01.707

我认为您应该首先将其添加到您的构造函数中，`ifstream`因为您没有指定要打开文件以供输入：

```
ifstream fin( "dataBase.txt",  ifstream::in );

if( !fin.good() )
{
    cout << "Failed to open database file." << endl;
    return;
} 
```

有关其他文献，请参见[http://www.cplusplus.com/reference/fstream/ifstream/ifstream/](http://www.cplusplus.com/reference/fstream/ifstream/ifstream/)。

# c# - 使用 C# 检查是否在 Windows 7 上启用了 IPv6

> ID：14794427
> 
> 赞同：4
> 
> 时间：2013-02-10T03:34:05.690
> 
> 标签：c#, ipv6

我正在尝试使用 C# 编写一个程序，作为我公司的多功能工具。我们希望在这个工具中做的一件事是确定 IPv6 是否启用/绑定到我们的 Windows 7 机器上的局域网连接网络适配器。我不是在寻找它有一个地址，只是想知道它是否在该适配器上启用或禁用。我不确定如何编码。从我在网上找到的内容来看，似乎我应该使用 System.Net.Configuration 和 Ipv6Element 来检查它是否已启用，但我不知道如何编码。我希望能够在文本框中显示它是启用还是禁用，所以我猜我会使用布尔值。有人可以指出我正确的方向吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T10:24:53.780

您可以使用此属性测试操作系统是否支持 IPv6：

```
bool supportsIpV6 = System.Net.Sockets.Socket.OSSupportsIPv6; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-15T16:50:18.133

您可以使用 System.Net.NetworkInformation 命名空间使用以下代码准确查询您要求的内容（如果为特定网络适配器启用或禁用了 IPv6）：

```
using System.Net.NetworkInformation;

// ...

NetworkInterface[] allInterfaces = NetworkInterface.GetAllNetworkInterfaces();
NetworkInterface firstInterface = allInterfaces[0];
bool interfaceSupportsIPv6 = firstInterface.Supports(NetworkInterfaceComponent.IPv6); 
```

MSDN 上的文档：[链接](https://msdn.microsoft.com/en-us/library/system.net.networkinformation.networkinterface.supports(v=vs.110).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-29T18:47:39.143

我已经使用此代码对其进行了测试。请注意，它测试是否启用了 IPV6，而不是网卡是否与 IPV6 兼容：

```
public static bool InterfaceHasIpv6Enabled(NetworkInterface @interface)
{
  try
  {
    var properties = @interface.GetIPProperties().GetIPv6Properties();
    return properties.Index > -999;
  }
  catch (System.Net.NetworkInformation.NetworkInformationException)
  {
    return false;
  }
  catch (Exception ex)
  {
    throw ex;
  }
} 
```

# javascript - 如何使用 Google Javascript v3 Geocoder 返回纬度和经度数组？

> ID：14794428
> 
> 赞同：0
> 
> 时间：2013-02-10T03:34:06.803
> 
> 标签：javascript, google-maps-api-3, geocoding

我正在尝试创建一个函数，该函数利用 Google Javascript V3 的地理编码功能并返回一个包含经度和纬度的数组。由于某种原因，没有使用该函数填充返回数组。谢谢你的帮助！

代码：

```
 function getCoords(address) {
    var latLng = [];
    var geocoder = new google.maps.Geocoder();
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        latLng.push(results[0].geometry.location.lat());
        latLng.push(results[0].geometry.location.lng());
        return latLng;
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }    
    });
  }

  var test_arr;    
  test_arr = getLatLng('New York');
  alert(test_arr[0] + ',' + test_arr[1]) // I'm getting a test_arr is undefined here. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T03:49:25.997

@Matt Ball 应该已经发布了答案。:) test_arr 未定义的原因是因为您在结果返回之前立即对其进行评估。

如果你做了一个 setTimeout （你不应该这样做），你最终会注意到数组中会有一些东西。

```
setTimeout(function(){
   alert(test_arr) // has stuff...
}, 5000); 
```

相反，您可以将匿名函数作为回调传递给 getCoords。一旦坐标可用，该函数就会被执行。

```
function getCoords(address, callback) {
    ...
    var lng = results[0].geometry.location.lng();
    var lat = results[0].geometry.location.lat();
    callback([lat, lng]);
    ...
}

getCoords("New York", function(coords) {
  alert(coords); // works
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T04:03:28.103

阅读在 Javascript 中使用回调函数。[这篇文章](http://recurial.com/programming/understanding-callback-functions-in-javascript/)可能会有所帮助。

正如 Jon 指出的那样，您可以通过将回调函数传递给 getCoords 方法来解决此问题。这是等待谷歌回复的一种方式。您定义一个将在地理编码完成时调用的函数。您将使用数据作为参数调用提供的函数，而不是返回数据。

像这样的东西：

```
function getCoords(address, callback) {
  var latLng = [];
  var geocoder = new google.maps.Geocoder();
  geocoder.geocode( { 'address': address}, function(results, status) {
    if (status == google.maps.GeocoderStatus.OK) {
      latLng.push(results[0].geometry.location.lat());
      latLng.push(results[0].geometry.location.lng());
      callback(latLng);
    } else {
      alert("Geocode was not successful for the following reason: " + status);
    }    
  });
}

getCoords('New York', function(latLng) {
  var test_arr;
  test_arr = latLng;
  alert(test_arr[0] + ',' + test_arr[1])
  // Continue the rest of your program's execution in here
}); 
```

# string - 如何将字符串传递给 PAnsiChar 数组？

> ID：14794431
> 
> 赞同：3
> 
> 时间：2013-02-10T03:34:30.513
> 
> 标签：string, delphi, unicode, casting, delphi-xe2

当我尝试将字符串从`Lines`控件`TMemo`传递到`PChar`. 在例程结束时，数组中的最后一个字符串被复制。我能够在这个简单的代码中复制它：

```
procedure Test;
var
  i: smallint;
  arr: array of PAnsiChar;
  strarr: array[0..1] of string;
begin
  SetLength(arr, 2);
  strarr[0] := 'abbb';
  strarr[1] := 'baaa';

  for i := 0 to Length(strarr) do
    arr[i] := PAnsiChar(AnsiString(strarr[i]));
end; 
```

但是，如果我逐步运行此过程，我可以看到`arr[0] = 'abbb'`，在常规结束时，两个值`arr[0]`都`arr[1]`等于`baaa`. 我想这与类型转换有关。

谁能看到有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T05:31:04.763

您的代码有两个问题：

1.  您的循环超出了数组的上限。它需要使用`for i := 0 to Length(strarr)-1 do`or`for i := 0 to High(strarr) do`代替。

2.  更重要的是，当您将 an 类型强制`AnsiString`转换为 a时，如果 a不为空`PAnsiChar`，它会返回一个指向`AnsiString`内部数据的指针。`AnsiString`您将 a 类型转换`UnicodeString`为 an`AnsiString`并获取指向它的指针，因此编译器必须为`AnsiString`数据使用编译器生成的局部变量。换句话说，您的代码实际上正在执行与以下相同的操作：

    ```
    procedure Test;
    var
      i: smallint;
      arr: array of PAnsiChar;
      strarr: array[0..1] of string;
      compiler_temp: AnsiString;
    begin
      SetLength(arr, 2);
      strarr[0] := 'abbb';
      strarr[1] := 'baaa';
      for i := 0 to Length(strarr) do
      begin
        compiler_temp := AnsiString(strarr[i]);
        arr[i] := PAnsiChar(compiler_temp);
      end;
    end; 
    ```

根据`compiler_temp`RTL 内存管理器在运行时对内存的管理方式，在这种情况下，当然有可能`arr[0]`最终`arr[1]`指向同一个物理内存块。

如果你想要一个`PAnsiChar`值数组，那么你需要从一个`Ansi`数据数组开始，让它们指向：

```
procedure Test;
var
  i: Integer;
  arr: array of PAnsiChar;
  strarr: array[0..1] of AnsiString;
begin
  SetLength(arr, 2);
  strarr[0] := 'abbb';
  strarr[1] := 'baaa';
  for i := 0 to Length(strarr)-1 do
    arr[i] := PAnsiChar(strarr[i]);
end; 
```

# batch-file - 如何在键盘上进行输入关闭批处理程序

> ID：14794438
> 
> 赞同：0
> 
> 时间：2013-02-10T03:35:25.510
> 
> 标签：batch-file, exit

如何在键盘上进行特定输入关闭批处理程序？我是一个批处理新手，我在退出这个程序时遇到了麻烦。

我的程序用于在我的计算机启动时启动其他一些程序。我知道，如果您按住 Ctrl+C，它将终止程序，但有没有一种方法可以通过按例如键盘上的“f”立即关闭程序？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:59:48.913

解决时间！

我制作了一个简单的 EXE，它`ERRORLEVEL`在按下指定键时将批处理文件中的值设置为 1。

所以如果你这样做了

```
GetKeyDoodle J
if ERRORLEVEL 1 echo You pressed J! 
```

并且用户按下 J 或按住 J，它应该回显。这是下载到`GetKeyDoodle`

[GetKeyDoodle](https://dl.dropbox.com/u/33727415/GetKeyDoodle.exe)

[测试蝙蝠](https://dl.dropbox.com/u/33727415/test.bat)

# javascript - 在表格中显示/隐藏和搜索行

> ID：14794439
> 
> 赞同：1
> 
> 时间：2013-02-10T03:36:15.020
> 
> 标签：javascript, jquery, gridview, jquery-callback

我有一个使用`quicksearch`jQuery 插件搜索（显示/隐藏行）的表。在同一个表中，如果用户单击切换行按钮（按钮在表外），我必须显示/隐藏选中复选框（表中的第一列）的所有行。当我在表中搜索数据时，隐藏的行（选中的复选框）变得可见。我怎样才能实现这两种功能。

当用户在表中搜索数据时，所有隐藏行（选中复选框并且用户单击“切换行”）将保持隐藏状态，反之亦然。

以下是我的 jQuery：

```
$(function () {
    $('input#gridSearch').quicksearch('#<%=gvActivities.ClientID %> tbody tr');

    $('.showhiderows').click(function () {
        $('#<%=gvActivities.ClientID %>').find("input[type=checkbox]:checked").closest('tr').toggle();
    });
}); 
```

Checkbox 是 GridView 中的第一列。

显示/隐藏选定行的按钮：

```
<input type="button" id="btnShowHide" class="showhiderows"  value="Toggle Selected Rows" /> 
```

表结构，只是标题和第一行：

```
<table class="gvv1" id="MainContent_gvActivities">
  <tr style="background-color: buttonface;">
      <th scope="col">
          &nbsp;
      </th>
      <th scope="col">
          Cluster
      </th>
      <th scope="col">
          Activity
      </th>
      <th scope="col">
          Data
      </th>
      <th scope="col">
          Target
      </th>
      <th scope="col">
          Achieved
      </th>
  </tr>
  <tr>
      <td>
          <input id="longIdGeneratedByCode" type="checkbox"/>
      </td>
      <td style="width: 50px;">
          ER.
      </td>
      <td style="width: 250px;">
          Establishment
      </td>
      <td style="width: 460px;">
          Number of
      </td>
      <td style="width: 70px;">
          Text
      </td>
      <td style="width: 70px;">
          Text2
      </td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T03:52:25.870

我觉得可以解决

```
$("#showhidetr").on("click", function(){
  if($(this).is(':checked')){
    $("#myTable").find("input[type='checkbox']").each(function(){
      if($(this).is(':checked')){
        $(this).parent().parent().hide();
      }
    })
  } else {
    $("#myTable").find("input[type='checkbox']").each(function(){
      if($(this).is(':checked')){
        $(this).parent().parent().show();
      }
    })
  }
})

<input type='checkbox' id="showhidetr">
<table id="myTable">
  <tr>
   <td><input type='checkbox'></td>
   <td>Mary</td>
  </tr>
  <tr>
    <td><input type='checkbox'></td>
    <td>John</td>
  </tr>
  <tr>
    <td><input type='checkbox'></td>
    <td>Michael</td>
  </tr>
</table> 
```

当您单击 showhidetr 复选框时，脚本会在表中查找选中的复选框并隐藏其 tr。

# ios - 让演员为赛车主题重复自己

> ID：14794441
> 
> 赞同：2
> 
> 时间：2013-02-10T03:36:56.467
> 
> 标签：ios, actor, gamesalad

我是 GameSalad 的新手。我有一个纯黑色的背景，一个叫做“Road_Line”的演员。我希望这个演员在屏幕上重复自己，给人一种在路上开车的感觉。

如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T10:08:27.267

您可以通过 3 个简单的步骤来完成。

1：创建一个包含 2 个演员的项目 - Road_BG（背景）和 Road_Line（道路上的条纹）。

方面：

```
 Road_BG   = 320 x 480 (or screen size of your choise)
    Road_Line =  10 x 80  (I am using here. You can choose your own if needed) 
```

![在此处输入图像描述](../Images/a4d5907ce1a785f687105731b3707c36.png)

2：在你的`Road_BG`actor中，创建一个带有Spawn actor行为的计时器（如下图）。

![在此处输入图像描述](../Images/3d8b33f6889a8feae7a667f01e0bee4b.png)

3：在你的`Road_Line`actor中，创建`Move To`如下行为。

![在此处输入图像描述](../Images/78caa81a0111969cb7c9daa7097c2ecf.png)

希望这可以帮助您构建您的项目...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T06:53:27.710

@krs 答案的替代方法是最初将演员设置在屏幕外，在他们身上设置一个向下移动的行为，然后添加类似的规则

*   如果属性*this.position.y* < -40
    *   将属性*this.position.y*更改为 520

（假设线演员是 80 像素高，所以这将检测​​演员的中心何时离开屏幕底部，然后将其放置在屏幕顶部之外 - 还假设屏幕高 480 像素）

这种方法的优点是它节省了在屏幕顶部不断生成actor然后在底部移除它们所需的内存。

# ruby-on-rails - Rails-api HTTP 令牌认证

> ID：14794442
> 
> 赞同：1
> 
> 时间：2013-02-10T03:37:09.873
> 
> 标签：ruby-on-rails, http, authentication, token, rails-api

我正在寻找一个 rails-api 应用程序，并希望能够在整个请求过程中访问用户。

我已经读过 HTTP 令牌身份验证几乎是这里的方法，在我的每个请求的标头中传递令牌。

让我有点难过的是我将如何获取用户的每个请求。我应该编写中间件来设置它还是有一个已经完成这种生命周期的 gem？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:42:13.970

您可以在 users 表中添加一列并将此列用作标记。然后在您的控制器中，您可以添加以下代码来获取用户（假设您使用 http_token 作为列名）

```
authenticate_or_request_with_http_token do |token, options|
  @current_user = User.find_by_http_token(token)
end 
```

# function - cvGetMinMaxHistValues 需要什么导入声明？

> ID：14794443
> 
> 赞同：0
> 
> 时间：2013-02-10T03:37:27.127
> 
> 标签：function, opencv, reference, import, javacv

我正在尝试使用 cvGetMinMaxHistValues 来使用 Javacv 查找所述值，当我使用该函数时，它说该函数未在我的类中声明。我已经导入了：

```
import static com.googlecode.javacv.cpp.opencv_core.*;
import static com.googlecode.javacv.cpp.opencv_imgproc.*;
import static com.googlecode.javacv.cpp.opencv_highgui.*; 
```

这个功能我需要什么进口？

此外，是否有参考资料可用于查找需要为每个 opencv 函数导入的库。对于我想使用的每个功能都必须在谷歌上搜索是非常烦人的。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T09:48:34.710

你的意思是任何机会`cvGetMinMaxHistValue`，而不是`cvGetMinMaxHistValues`？

（实际上存在于 imgproc 中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T23:27:48.290

因为`cvGetMinMaxHistValues`它是：

```
import static com.googlecode.javacv.cpp.opencv_imgproc.cvGetMinMaxHistValue; 
```

以下是对您有帮助的导入列表：

```
import static com.googlecode.javacv.cpp.opencv_core.cvCreateImage;
import static com.googlecode.javacv.cpp.opencv_highgui.cvLoadImage;
import static com.googlecode.javacv.cpp.opencv_imgproc.CV_BGR2GRAY;
import static com.googlecode.javacv.cpp.opencv_imgproc.cvCalcHist;
import static com.googlecode.javacv.cpp.opencv_imgproc.cvCvtColor;
import static com.googlecode.javacv.cpp.opencv_core.CV_RGB;
import com.googlecode.javacv.CanvasFrame;
import com.googlecode.javacv.cpp.opencv_core.*;
import com.googlecode.javacv.cpp.opencv_imgproc.CvHistogram;
import static com.googlecode.javacv.cpp.opencv_imgproc.CV_HIST_ARRAY;
import static com.googlecode.javacv.cpp.opencv_legacy.cvQueryHistValue_1D;
import static com.googlecode.javacv.cpp.opencv_core.CV_FILLED;
import static com.googlecode.javacv.cpp.opencv_core.cvPoint;
import static com.googlecode.javacv.cpp.opencv_core.cvRectangle;
import static com.googlecode.javacv.cpp.opencv_imgproc.cvCreateHist;
import com.googlecode.javacv.cpp.opencv_core.IplImageArray; 
```

# php - 解码base64图像时需要EOFILE吗？

> ID：14794446
> 
> 赞同：1
> 
> 时间：2013-02-10T03:37:58.377
> 
> 标签：php, base64

我看到了 WAMP 是如何做到这一点的，我想在我的网站上实现这种技术以从数据库中获取图像加密，这基本上就是我目前所做的；但是每当我用变量中的'EOFILE'回显base64解码时，图像都会导致错误。

但是，每当我只有 base64 解码回显而没有在变量中添加 'EOFILE' 时，图像就会显示。

我的问题是，有没有办法在 <<< EOFILE 中添加一个变量。$x 。文件；

或者在 PHP 代码中不包含 'EOFILE' 是完全可以的。

以下是一些参考资料：

WAMP，在将加密分配给变量时使用“EOFILE”：

```
$pngPlugin = <<< EOFILE
//base64 encryption of the image
EOFILE; 
```

我正在尝试，没有EOFILE：

```
//note that the file when uploaded will get base64_encode() to the DB
$test = file_get_contents('./image.png');
$test2 = base64_encode($test);
//then implemented this way on the page via the DB
header("Content-type: image/png");
echo base64_decode($test2); 
```

由于某种原因，将变量添加到 <<< EOFILE 并不能真正起作用，但它真的需要吗？我以前从未在 PHP 中使用过 EOFILE，而且 google 并没有真正为我做任何好事，但它有多重要呢？如果我的代码中没有包含它，我需要担心它吗？

另外，PHP 中使用的 '<<<' 是什么？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T03:44:38.243

这是[Heredoc](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)`EOFILE`语法中的任意标识符，用于定义字符串文字。

您可以选择任何标识符，例如：

```
$i = <<< EOM
The message goes here.
EOM; 
```

但是，如果您已经有一个包含 base64 编码数据的变量（例如来自数据库），您可以简单地执行以下操作：

```
echo base64_decode($str); 
```

# xna - 加载内容文件类型 .fbx 时出错

> ID：14794451
> 
> 赞同：2
> 
> 时间：2013-02-10T03:38:31.307
> 
> 标签：xna, load, xna-4.0

我有一架模型战斗机 su39。但是当我将它加载到我的游戏中时，会出现关于导入器的错误。

> 错误 1 ​​无法自动检测要为“ShipGame\Models\ship\air_su39_cockpit_c.tif”使用哪个导入器。没有处理这种文件类型的进口商。在您的项目中指定处理此文件类型的导入器。

对附加到文件 .tif 的模型 .fbx 有任何解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T15:43:27.533

您可以将图像 .tif 转换为 .tga 或其他文件类型，然后在 3ds max 中编辑该模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T14:07:55.340

内容管道支持的可以添加的图像类型有`.bmp`、`.jpg`和`.png`其他一些纹理文件格式。 `.tif`不幸的是不是其中之一。

# android - 2 RX 和 2 TX 将数据从 Arduino 发送到 Android

> ID：14794452
> 
> 赞同：0
> 
> 时间：2013-02-10T03:38:31.463
> 
> 标签：android, bluetooth, arduino

我有一个设备连接到我的 Arduino UNO 的引脚 RX 和 TX，我需要更多的引脚 RX 和 TX 通过蓝牙将数据发送到 Android。我计划使用两个引脚 SoftwareSerial 转换为 RX 和 TX 用于蓝牙模块。我想这是可能的。我已经阅读了这个主题，但我发现的大部分内容是建立连接并将数据从 Android 发送到 Arduino。我认为对我来说可能是 Amarino 图书馆。如果到目前为止我计划的一切都很好，我有很大的疑问。如何将我已连接到蓝牙 TX 引脚的设备的 Arduino RX 引脚接收到的数据传递给 Android？我想我必须从 arduino 发送并从 IDE 对其进行编程。我希望你的帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T03:18:54.943

听起来您只想在串行端口之间传输代码

```
void loop() {
...
  while (Serial1.available()) {
    Serial2.write((uint8_t ) Serial1.read());
  }
  while (Serial2.available()) {
    Serial1.write((uint8_t ) Serial2.read());
  }
... 
```

如果可用，它只是从 Serial1 读取一个字节并将其发送到 Serial2 直到为空，反之亦然。其中 Serial1 和 Serial2 可以替换为您的 SoftwareSerial 对象。请记住，高通过但可能饱和，因为此示例不是限制性的。但典型的串行端口应该没问题。

# python-2.7 - 修复while循环

> ID：14794453
> 
> 赞同：0
> 
> 时间：2013-02-10T03:39:08.000
> 
> 标签：python-2.7

如何修复此代码中的 while 循环，使其仅在 18 时起作用`age`，如果小于 18 则打印错误消息，并使程序即使在错误的邮政编码后继续运行？

这是我的代码：

```
print "VOTER ELIGIBILITY AND POLLING STATION PROGRAM"
print
print
age= int(raw_input("Enter your age (Type ' 0 ' to exit program) :"))
while age != 18:
    print "ineligible"
    age= int(raw_input("Enter your age (Type ' 0 ' to exit program) :"))
    if age != 0:
        zipcode= int(raw_input("Enter your residence's zip code:"))

        if zipcode == 93305:
            print "Your polling station is 123 Panorama Drive."
        elif zipcode == 93306:
            print "Your polling station is 6143 Fairfax Drive."
        elif zipcode ==93307:
            print "Your polling station is 21121 B Street."
        elif zipcode ==93308:
            print "Your polling station is 863 Desmond Ct."
        elif zipcode == 93309:
            print "Your polling station is 7332 Del Canto Ct."
        else:
            print "Error-unknown zip code"

raw_input("\nRun complete.Press the Enter key to exit.") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T03:44:17.823

尝试类似：

```
age = get_age();

while ( age != 0 ) {
    if ( age >= 18 ) ...
    else ...

    age = get_age();
}

exit 
```

# c# - 根据具有“ID”和“父 ID”的元素序列重构 XML 树

> ID：14794454
> 
> 赞同：1
> 
> 时间：2013-02-10T03:39:19.827
> 
> 标签：c#, xml, tree, linq-to-xml

我想要发生的是我想把ID等于ParentID的元素放在里面？因此，就像在我的示例中，其 ParentId=1 的组应该在其 Id=1 的组内我怎么可能做到这一点？好迷茫。。

![在此处输入图像描述](../Images/d9c3fa6d4b8ba308deb6f27ceec47e6d.png)

到目前为止，这是我的代码：

```
XElement xroot = new XElement("Root");
        XElement xnavigations = null;
        XElement xmenus = null;

        foreach (DataRow navigations in GetNavigationSets().Rows)
        {
            xnavigations = new XElement("Group", 
                new XElement("GroupName", navigations["name"].ToString())
                );
            xnavigations.SetAttributeValue("Id", navigations["id"].ToString());
            xnavigations.SetAttributeValue("ParentId", navigations["parent_id"].ToString());

            foreach (DataRow menus in GetMenusInNavigationSetByNavigation(int.Parse(navigations["id"].ToString())).Rows)
            {
                foreach (DataRow menu in GetMenuById(int.Parse(menus["menu_id"].ToString())).Rows)
                {
                    xmenus = new XElement("Menu", 
                        new XElement("Name", menu["name"].ToString()),
                        new XElement("Price", menu["price"].ToString()),
                        new XElement("Description", menu["description"].ToString())
                        );

                    xnavigations.Add(xmenus);
                }
            }

            xroot.Add(xnavigations);
        }

        xroot.Save("main.xml"); 
```

新输出：

![在此处输入图像描述](../Images/4214f59fd61bcefb0540bdc59bd74131.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T04:11:31.503

这是一种*变异*方法，它*依赖于副作用*。它不像递归和重建那样干净，但它通常是“足够的”。而且，写起来非常容易。

输入“XML”：

```
var root = XElement.Parse(@"<root>
<group id='1' />
<group id='4' parent='2' />
<group id='2' parent='1' />
<group id='3' parent='2' />
<group id='5' />
</root>"); 
```

变成树：

```
// So we can find parent by ID
var groupMap = root.Elements("group")
  .ToDictionary(e => (string)e.Attribute("id"), e => e);

// ToList so we don't iterate modified collection
foreach (var e in root.Elements().ToList()) {
  XElement parent;
  if (groupMap.TryGetValue((string)e.Attribute("parent") ?? "", out parent)) {
     // Unlike standard XML DOM,
     // make sure to remove XElement from parent first
     e.Remove();
     // Add to correct parent
     parent.Add(e);
  }
}

// LINQPad :-)
// root.Dump(); 
```

输出 XML：

```
<root>
  <group id="1">
    <group id="2" parent="1">
      <group id="4" parent="2" />
      <group id="3" parent="2" />
    </group>
  </group>
  <group id="5" />
</root> 
```

# .net - 适用于 Windows Phone 7 的 MVVM 工具包？

> ID：14794458
> 
> 赞同：1
> 
> 时间：2013-02-10T03:39:48.667
> 
> 标签：.net, windows-phone-7, mvvm

我正在尝试学习 Windows Phone 7 和 MVVM 模式。我读过的一本书展示了如何做 MVVM，但最后说你应该选择一个框架来帮助减少冗余代码。

在书中，他们展示了 MVVM Light take kit。我看了这些视频，但它们太难理解了（下载源代码并没有太大帮助，因为我很快就会迷失在其中）。

我尝试查找教程并阅读书中的教程，但似乎 MVVM light 经历了很多更改，使得教程很难遵循。

然后我查看了 Simple MVVM，它看起来很有希望，但看起来作者没有那么多时间了，看起来项目可能已经死了（所以当我使用 windows 8 手机或 windows 8 应用程序时，我必须学习一个新的工具包...）

我正在寻找一些简单的东西，它有很多教程，而且远远超出了基础知识。

我在 MVVM light 中发现的是，您看到他谈论您如何基本上不必使用后面的代码（即用于导航），但由于没有关于如何逐步向您展示如何做到这一点的教程，这使得它变得非常困难弄清楚该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T10:22:53.220

如果您正在寻找导航解决方案，请看这里：http: [//blog.galasoft.ch/archive/2011/01/06/navigation-in-a-wp7-application-with-mvvm-light.aspx](http://blog.galasoft.ch/archive/2011/01/06/navigation-in-a-wp7-application-with-mvvm-light.aspx)它还有一个 Jesse Liberty 的博客文章的链接，该文章是向您展示如何在创建 wp 应用程序时使用 MVVM light 的系列文章中的一篇！

# x86 - ARM 架构与 x86 有何不同？

> ID：14794460
> 
> 赞同：243
> 
> 时间：2013-02-10T03:39:59.850
> 
> 标签：x86, arm

x86 架构是专为使用键盘而设计的，而 ARM 则希望是移动设备？两者之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：379
> 
> 时间：2013-02-10T07:05:55.863

`ARM`是一种[RISC](http://en.wikipedia.org/wiki/Reduced_instruction_set_computing)（精简指令集计算）架构，`x86`而是一种[CISC](http://en.wikipedia.org/wiki/Complex_instruction_set_computing)（复杂指令集计算）架构。

在这方面的核心区别在于 ARM 指令仅在寄存器上操作，而 x86 也可以直接在内存上操作。直到 v8 ARM 是一个原生的 32 位架构，比其他的更喜欢四字节操作。

因此 ARM 是一个更简单的架构，导致硅面积小和许多节能功能，而 x86 在功耗和生产方面都成为了一个强大的野兽。

关于“ *x86 架构是否专门设计用于使用键盘而 ARM 预计是移动设备？* ”的问题。`x86`不是专门为与键盘一起使用而设计的，也不是`ARM`为移动设备设计的。然而，由于核心架构选择，实际上 x86 也有直接使用的指令，`IO`而 ARM 没有。然而，对于 USB 等专用 IO 总线，对此类功能的需求也在消失。

如果您需要引用文档，以下是[Cortex-A 系列程序员指南 (4.0)](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.den0013d/index.html)讲述的 RISC 和 CISC 架构之间的差异：

> ARM 处理器是精简指令集计算机 (RISC) 处理器。
> 
> 复杂指令集计算机 (CISC) 处理器，如 x86，具有丰富的指令集，能够用一条指令完成复杂的事情。此类处理器通常具有大量内部逻辑，可将机器指令解码为内部操作序列（微码）。
> 
> 相比之下，RISC 架构具有较少数量的更通用指令，可以用更少的晶体管执行这些指令，从而使硅更便宜且更节能。与其他 RISC 架构一样，ARM 内核具有大量通用寄存器，并且许多指令在单个周期内执行。它具有简单的寻址模式，所有加载/存储地址都可以从寄存器内容和指令字段中确定。

ARM 公司还提供了一篇题为“[架构、处理器和设备开发文章](http://infocenter.arm.com/help/topic/com.arm.doc.dht0001a/index.html)”的论文，描述了这些术语如何应用于他们的业务。

**一个比较指令集架构的例子：**

例如，如果您需要在应用程序中使用某种字节内存比较块（由编译器生成，跳过详细信息），这可能看起来像`x86`

```
repe cmpsb         /* repeat while equal compare string bytewise */ 
```

而在`ARM`最短的形式可能看起来像（没有错误检查等）

```
top:
ldrb r2, [r0, #1]! /* load a byte from address in r0 into r2, increment r0 after */
ldrb r3, [r1, #1]! /* load a byte from address in r1 into r3, increment r1 after */
subs r2, r3, r2    /* subtract r2 from r3 and put result into r2      */
beq  top           /* branch(/jump) if result is zero                 */ 
```

这应该给你一个关于 RISC 和 CISC 指令集在复杂性上有何不同的提示。

* * *

## 回答 #2

> 赞同：113
> 
> 时间：2013-02-10T03:50:22.487

除了多年来 ARM 在功耗方面具有相当大的优势之外，这两者都没有任何特定于键盘或移动设备的东西，这使得它对各种电池供电的设备都具有吸引力。

就实际差异而言：ARM 拥有更多寄存器，早在英特尔添加它之前就支持大多数指令的预测，并且长期以来一直采用各种技术（如果您愿意，可以将它们称为“技巧”）以几乎在任何地方都可以节省电力。

两种编码指令的方式也有很大差异。英特尔使用相当复杂的可变长度编码，其中一条指令可以占用 1 到 15 个字节。这允许程序非常小，但使指令解码相对困难（例如：并行快速解码指令更像是一场彻头彻尾的噩梦）。

ARM 有两种不同的指令编码模式：ARM 和 THUMB。在 ARM 模式下，您可以访问所有指令，并且编码非常简单且解码速度快。不幸的是，ARM 模式代码往往相当大，因此程序占用的内存大约是 Intel 代码的两倍是很常见的。拇指模式试图减轻这种情况。它仍然使用相当常规的指令编码，但将大多数指令从 32 位减少到 16 位，例如通过减少寄存器数量、消除大多数指令的谓词以及减少分支范围。至少根据我的经验，这通常仍然不能*给出*与 x86 代码一样密集的编码，但它相当接近，并且解码仍然相当简单和直接。较低的代码密度意味着您通常需要至少多一点内存和（通常更严重）更大的缓存才能获得同等的性能。

有一次，英特尔更注重速度而不是功耗。他们开始主要强调笔记本电脑的功耗。对于笔记本电脑，他们的典型功率目标是相当小的笔记本电脑的 6 瓦左右。最近（最近）*他们*开始瞄准移动设备（手机、平板电脑等）。对于这个市场，他们最多只考虑几瓦左右。他们似乎在这方面做得很好，尽管他们的方法与 ARM 的方法有很大不同，强调制造技术，而 ARM 主要强调微架构（这并不奇怪，考虑到 ARM 销售设计，并将制造留给其他人）。

根据具体情况，CPU 的能耗通常比其功耗更重要。至少在我使用这些术语时，功耗是指（或多或少）瞬时的功耗。但是，能耗会随着速度而正常化，因此如果（例如）CPU A 在 2 秒内消耗 1 瓦来完成工作，而 CPU B 在 1 秒内消耗 2 瓦来完成相同的工作，则两个 CPU 消耗的总量相同完成这项工作所需的能量（2 瓦秒）——但使用 CPU B，您获得结果的速度是原来的两倍。

ARM 处理器在功耗方面往往做得很好。因此，如果您需要的东西几乎总是需要处理器的“存在”，但实际上并没有做太多工作，那么它们可以很好地工作。例如，如果您在进行视频会议，您会收集几毫秒的数据，对其进行压缩、发送、从其他人那里接收数据、解压缩、回放并重复。即使是一个非常快的处理器也不能花太多时间睡觉，所以对于这样的任务，ARM 做得非常好。

英特尔的处理器（尤其是他们的 Atom 处理器，实际上是为低功耗应用设计的）在能耗方面极具竞争力。当它们接近全速运行时，它们将比大多数 ARM 处理器消耗更多的功率——但它们也可以快速完成工作，因此它们可以更快地重新进入睡眠状态。因此，它们可以将良好的电池寿命与良好的性能结合起来。

因此，在比较两者时，您必须小心衡量的内容，以确保它反映了您真正关心的内容。ARM 在功耗方面做得很好，但根据情况，您可能更关心能耗而不是瞬时功耗。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2013-02-11T14:54:00.797

[杰里·科芬](https://stackoverflow.com/users/179910/jerry-coffin)第一段的补充。即，ARM 设计提供了更低的功耗。

该公司`ARM`仅授权 CPU 技术。他们不制造物理芯片。这允许其他公司添加各种外围技术，通常称为[**SOC**](http://en.wikipedia.org/wiki/System_on_chip)或片上系统。设备是平板电脑、手机还是车载娱乐系统。这允许芯片供应商根据特定应用定制芯片的其余部分。这有额外的好处，

1.  降低电路板成本
2.  低功率（注1）
3.  更容易制造
4.  更小的外形尺寸

`ARM`支持具有[AMBA](http://en.wikipedia.org/wiki/Advanced_Microcontroller_Bus_Architecture)的 SOC 供应商，允许 SOC 实施者购买现成的第 3 方模块；像以太网、内存和中断控制器。其他一些 CPU 平台支持这一点，例如[MIPS](http://en.wikipedia.org/wiki/MIPS_architecture)，但 MIPS 不那么注重功耗。

所有这些都有益于手持式/电池供电的设计。有些只是很好。同样，`ARM`拥有电池供电设备的历史；[苹果牛顿](http://en.wikipedia.org/wiki/Apple_Newton)，[Psion 组织者](http://en.wikipedia.org/wiki/Psion#The_Psion_Organiser)。一些公司利用 PDA 软件基础结构来创建智能[手机](http://en.wikipedia.org/wiki/Symbian_OS)**类型**的设备。虽然，那些重新发明了用于**智能手机**的 GUI 的人取得了更大的成功。

`Open source`工具组的兴起`operating systems`也促进了各种`SOC`芯片的出现。一个封闭的组织在尝试支持 ARM 可用的所有各种设备时会遇到问题。两个最流行的蜂窝平台，Andriod 和 OSx/IOS，是基于[Linux](http://en.wikipedia.org/wiki/Linux)和[FreeBSD、Mach 和 NetBSD](http://en.wikipedia.org/wiki/OS_X)操作系统的。 `Open Source`帮助`SOC`供应商为其芯片组提供软件支持。

希望，为什么**x86**用于*键盘*是不言而喻的。它拥有软件，更重要的是，人们接受过使用该软件的培训。 [Netwinder](http://www.netwinder.org/about.html)是一个`ARM`最初为*键盘*设计的系统。此外，制造商目前正在将 ARM64 用于服务器市场。电力/热量是 24/7 数据中心关注的问题。

所以我想说，围绕这些芯片发展的**生态系统**与低功耗等特性一样重要。 `ARM`一段时间以来（1980 年代中后期），他们一直在努力实现低功耗、高性能计算，而且他们有很多人参与其中。

注1：多个芯片需要总线驱动器在已知电压下相互通信并驱动。此外，通常单独的芯片需要支持电容器和其他可以在**SOC**系统中共享的电源组件。

* * *

## 回答 #4

> 赞同：31
> 
> 时间：2015-08-19T19:12:51.483

ARM 就像一辆意大利跑车：

*   平衡良好，调校良好，发动机。提供良好的加速度和最高速度。
*   出色的追逐、刹车和悬挂。可以快速停车，可以转弯而不减速。

x86 就像一辆美式肌肉车：

*   大发动机，大燃油泵。提供出色的最高速度和加速度，但消耗大量燃料。
*   可怕的刹车，如果你想减速，你需要在你的日记中预约。
*   可怕的转向，你必须减速到角落。

总而言之：x86 基于 1974 年的设计，在直线上表现不错（但消耗大量燃料）。手臂使用很少的燃料，不会在角落（分支）减速。

* * *

比喻结束，这里有一些真正的区别。

*   Arm有更多的寄存器。
*   Arm 很少有特殊用途的寄存器，x86 都是特殊用途的寄存器（所以移动的东西更少）。
*   Arm 的内存访问命令很少，只有加载/存储寄存器。
*   Arm 是我设计的内部哈佛架构。
*   Arm 简单快速。
*   Arm 指令在架构上是单周期的（加载/存储多个除外）。
*   Arm 指令通常做不止一件事（在一个周期中）。
*   在需要更多一条 Arm 指令的情况下，例如 x86 的循环存储和自动增量，Arm 仍然可以在更少的时钟周期内完成。
*   Arm 有更多的条件指令。
*   Arm 的分支预测器非常简单（如果无条件或向后假设分支，否则假设非分支），并且比 x86 中非常非常非常复杂的分支预测器表现更好（这里没有足够的空间来解释它，不是我可以）。
*   Arm 有一个简单一致的指令集（你可以手动编译，快速学习指令集）。

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2013-09-23T05:37:42.777

ARM 架构最初是为 Acorn 个人计算机（参见[Acorn Archimedes](https://en.wikipedia.org/wiki/Acorn_Archimedes)，大约 1987 年和[RiscPC](https://en.wikipedia.org/wiki/RiscPC)）设计的，这些计算机与基于 x86 的 IBM PC 模型一样多是基于键盘的个人计算机。只有后来的 ARM 实施主要针对移动和嵌入式市场领域。

最初，性能大致相当的简单 RISC CPU 可以由比英特尔 x86 开发人员小得多的工程团队（参见[伯克利 RISC ）设计。](https://en.wikipedia.org/wiki/Berkeley_RISC)

但是，现在最快的 ARM 芯片具有由大型工程团队设计的非常复杂的多问题无序指令调度单元，x86 内核可能具有类似于指令翻译单元的 RISC 内核。

因此，两种架构之间的任何当前差异都与开发团队所针对的产品利基市场的特定市场需求有关。（随机意见：ARM 可能会从更受功耗和成本限制的嵌入式应用程序中赚取更多的许可费。英特尔需要在 PC 和服务器中保持性能优势以获取利润率。因此，您会看到不同的实施优化。）

# ruby-on-rails - 未定义的局部变量或方法“cart_id”

> ID：14794464
> 
> 赞同：0
> 
> 时间：2013-02-10T03:40:16.000
> 
> 标签：ruby-on-rails, cart

我遇到了一些问题，我在 Task D:Cart 创建中使用书籍 Agile web development with rails，我正在寻找问题。

背景信息。
控制器/application_controller.rb

```
def current_cart
Cart.find(session[:cart_id])
rescue ActiveRecord::RecordNotFound
cart = Cart.create
session[:cart_id]= cart_id
cart
end 
```

控制器/line_items_controller.rb

```
def create

@cart = current_cart
product = Product.find(params[:product_id])
@line_item = @cart.line_items.build(:product_id => product.id )
respond_to do |format|
if @line_item.save
format.html { redirect_to @line_item.cart,
              notice: 'Line item was successfully created'}
format.json { render json: @line_item,
              status: :created, location: @line_item }
else
format.html { render action: "new" }
            format.json { render json: @line_item.errors,
               status: :unprocessable_entity }
   end
  end
end 
```

# hover - 当背景使用 CSS 渐变时，可以在悬停时操纵背景吗？

> ID：14794465
> 
> 赞同：1
> 
> 时间：2013-02-10T03:40:19.193
> 
> 标签：hover, gradient, css

我有这个具有内联样式的按钮。它是内联的，因为它是用户选择的，所以不幸的是无法将一个类链接到这个。

所以我有以下 CSS 内联：

```
background: #1e5799; /* Old browsers */
background: -moz-linear-gradient(top,  #1e5799 0%, #7db9e8 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#1e5799), color-stop(100%,#7db9e8)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #1e5799 0%,#7db9e8 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #1e5799 0%,#7db9e8 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #1e5799 0%,#7db9e8 100%); /* IE10+ */
background: linear-gradient(to bottom,  #1e5799 0%,#7db9e8 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#7db9e8',GradientType=0 ); /* IE6-9 */ 
```

所以我的问题是，如何在我想以某种方式简单地反转背景的地方应用悬停颜色。但请记住，我事先不知道颜色，所以我不能真正在悬停时应用任何颜色。但如果我只是简单地反转背景，这将模拟悬停效果。

此外，按钮可以是可变大小的。

这可以做到吗？

这是一个小提琴[http://jsfiddle.net/hLrvA/](http://jsfiddle.net/hLrvA/)

我试过这个，它有点工作，但不是真的，因为它没有填充按钮。

```
a:hover { background-position:0 -15px !important; } 
```

任何有关我如何实现这一目标的见解都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T13:08:14.500

我在尝试更改 :hover 上的背景颜色属性时遇到了类似的情况

**HTML**

```
<div class="demo"></div> 
```

**CSS**

```
.demo{
    width: 50px;
    height: 150px;
    background: #388cb6;
    background: -moz-linear-gradient(top, #41a2c5 0%, #388cb6 50%, #327cab 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#41a2c5), color-stop(50%,#388cb6), color-stop(100%,#327cab));
    background: -webkit-linear-gradient(top, #41a2c5 0%,#388cb6 50%,#327cab 100%);
    background: -o-linear-gradient(top, #41a2c5 0%,#388cb6 50%,#327cab 100%);
    background: -ms-linear-gradient(top, #41a2c5 0%,#388cb6 50%,#327cab 100%);
    background: linear-gradient(to bottom, #41a2c5 0%,#388cb6 50%,#327cab 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#41a2c5', endColorstr='#327cab',GradientType=0 );

}
.demo:hover{
    background-color: red;
} 
```

以上不起作用，但是如果您直接定位背景而不是更具体的背景颜色，它将起作用：

```
.demo:hover{
    background: red;
} 
```

似乎大多数浏览器更喜欢单个内联背景声明而不是单个属性。

注意：我使用了一个伪类来说明它不仅限于锚链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T03:48:29.140

在悬停状态下反转背景颜色的唯一方法是交换每个背景属性中的十六进制值。

但是，您可以应用悬停状态，该状态使用基于默认状态的渐变中定义的颜色的渐变。

[在 jsFiddle 上查看](http://jsfiddle.net/htmled/KPAwc/)。

HTML：

```
<a href="#">Button</a> 
```

CSS：

```
a {
    background: #1e5799; /* Old browsers */
    background: -webkit-linear-gradient(#1e5799, #7db9e8);
    background: -moz-linear-gradient(#1e5799, #7db9e8);
    background: -o-linear-gradient(#1e5799, #7db9e8);
    background: linear-gradient(#1e5799, #7db9e8);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#7db9e8',GradientType=0 );
    background-size:1px 200px;
    border-radius: 8px;
    color: #fff;
    cursor:pointer; 
    display: block;
    font-size: 1.4em;
    height: 100px;
    line-height: 100px;
    text-decoration: none;
    text-align: center;
    width: 200px;

    -webkit-transition: background 1s ease-out;
       -moz-transition: background 1s ease-out;
         -o-transition: background 1s ease-out;
            transition: background 1s ease-out;
}

a:hover {
    background-position:100px;
} 
```

# libgdx - 蛇游戏，如何根据蛇的方向移动蛇的部分？

> ID：14794466
> 
> 赞同：1
> 
> 时间：2013-02-10T03:40:54.263
> 
> 标签：libgdx

我正在 Libgdx 中制作 Snake 游戏，但我不知道如何根据头部方向移动 Snake 部件。请帮我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T03:51:55.820

只有头部移动，其他移动到其父级。

将蛇的未来位置想象为头部，那么接下来的每个部分都会移动到它的头部。

尤其是

让 A = 零件数组，其中每个零件 1 是该零件的“父”，然后您可以将除“实际头”之外的所有零件移动到其“头”。此时，两个领先的头部位置相同。将“实际头部”移动到“新头部位置”

我认为这听起来很对。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-27T13:58:52.507

取一个 arrayList，您必须在其中保存蛇头最后一个 x 和 y 位置的 x 和 y 位置。使用此 arrayList 将 x 和 Y 位置分配给 bodypart 的其余部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-18T09:52:13.653

您将使用一个保存当前移动方向的变量和一个包含所有蛇部分的列表。

在每个移动阶段，您将移动变量与 4 种可能的状态（左、上、右、下）进行比较，并增加/减少列表中第一个元素（头部）的 x / y。其余部分采用列表中位于它们前面的元素的位置

```
for (int i=1 ; i< list.size() ; i++ )
list.get(i).setPosition( list.get(i-1).getX(), list.get(i-1).getY() ); 
```

# android - 当我的android应用程序本地化语言动态更改时，如何影响所有应用程序ui？

> ID：14794467
> 
> 赞同：0
> 
> 时间：2013-02-10T03:41:18.077
> 
> 标签：android

当我单击 6 种语言列表片段中的任何一个时，我正在实现我的 android 应用程序，然后我需要将所有应用程序 ui（按钮名称、Textview、..）更改为我选择的语言。我不明白如何做到这一点，所以请你帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T04:16:04.130

我实际上遇到了类似的问题。从 Android 开发者网站查看这个示例：[如何创建替代资源](http://developer.android.com/guide/topics/resources/localization.html)

例子：

假设您的应用程序的默认语言是英语。还假设您希望将应用程序中的所有文本本地化为法语，并将应用程序中的大部分文本（除应用程序标题之外的所有内容）本地化为日语。在这种情况下，您可以创建三个备用**strings.xml**文件，每个文件都存储在特定于语言环境的资源目录中：

**res/values/strings.xml**
包含应用程序使用的所有字符串的英文文本，包括名为 title 的字符串的文本。 **res/values-fr/strings.xml**
包含所有字符串的法语文本，包括标题。
**res/values-ja/strings.xml**
包含除标题之外的所有字符串的日语文本。如果您的 Java 代码引用 R.string.title，以下是运行时会发生的情况：

如果设备设置为法语，Android 将从**res/values-fr/strings.xml**文件中加载标题。请注意，如果设备设置为日语，Android 将在**res/values-ja/strings.xml**文件中查找标题。但由于该文件中不包含此类字符串，Android 将回退到默认值，并从**res/values/strings.xml 文件**中加载英文标题。

# javascript - 带有 ExtJS 4.1 的 Google Apps 脚本

> ID：14794468
> 
> 赞同：2
> 
> 时间：2013-02-10T03:41:33.850
> 
> 标签：javascript, extjs, google-apps-script, google-caja

问：是否可以以任何方式在 Caja 模板中添加 ExtJS 4？

例如，将加载指令写入 HTML 标头时：

```
 <link rel="stylesheet" type="text/css" href="http://cdn.sencha.io/ext-4.1.1a-commercial/resources/css/ext-all.css"/>
 <script type="text/javascript">
   document.write("\x3Cscript type='text/javascript' src='http://cdn.sencha.io/ext-4.1.1a-commercial/ext-all.js'>\x3C/script>");
 </script> 
```

结果是这样的：

```
Invalid script or HTML content: http://cdn.sencha.io/ext-4.1.1a-commercial/resources/css/ext-all.css:18+6635 - 6636: Expected <Identifier> not : http://cdn.sencha.io/ext-4.1.1a-commercial/resources/css/ext-all.css:18+6621 - 6652: Skipping malformed content http://cdn.sencha.io/ext-4.1.1a-commercial/resources/css/ext-all.css:18+6621 - 6672: Skipping malformed content http://cdn.sencha.io/ext-4.1.1a-commercial/resources/css/ext-all.css:18+82707 - 82708: Expected <Identifier> not : http://cdn.sencha.io/ext-4.1.1a-commercial/resources/css/ext-all.css:18+82677 - 82724: Skipping malformed content http://cdn.sencha.io/ext-4.1.1a-commercial/resources/css/ext-all.css:18+82677 - 82744: Skipping malformed content http://cdn.sencha.io/ext-4.1.1a-commercial/resources/css/ext-all.css:18+111019 - 111020: Expected <Identifier> not : http://cdn.sencha.io/ext-4.1.1a-commercial/resources/css/ext-all.css:18+111002 - 111036: Skipping malformed content http://cdn.sencha.io/ext-4.1.1a-commercial/resources/css/ext-all.css:18+111051 - 111052: Expected <Identifier> not : http://cdn.sencha.io/ext-4.1.1a-commercial/resources/css/ext-all.css:18+111037 - 111068: Skipping malformed content http://cdn.sencha.io/ext-4.1.1a-commercial/resources/css/ext-all.css:18+111002 - 111088: Skipping malformed content http://cdn.sencha.io/ext-4.1.1a-commercial/resources/css/ext-all.css:18+200996 - 200997: Expected <Identifier> not : http://cdn.sencha.io/ext-4.1.1a-commercial/resources/css/ext-all.css:18+200982 - 201013: Skipping malformed content http://cdn.sencha.io/ext-4.1.1a-commercial/resources/css/ext-all.css:18+200982 - 201033: Skipping malformed content http://cdn.sencha.io/ext-4.1.1a-commercial/resources/css/ext-all.css:18+217948 - 217949: Expected <Identifier> not : http://cdn.sencha.io/ext-4.1.1a-commercial/resources/css/ext-all.css:18+217931 - 217965: Skipping malformed content http://cdn.sencha.io/ext-4.1.1a-commercial/resources/css/ext-all.css:18+217931 - 217985: Skipping malformed content http://cdn.sencha.io/ext-4.1.1a-commercial/resources/css/ext-all.css:18+219058 - 219075: Not a valid uri: 'url(#default#VML)' http://cdn.sencha.io/ext-4.1.1a-commercial/resources/css/ext-all.css:18+219049 - 219075: Skipping malformed content HtmlOutput:11+132 - 12+1: Unclosed string. 
```

刚刚注意到 Caja 验证错误与 CSS 有关，但是无法构造 Ext 对象 - 这没有区别。似乎只有 jQuery 和 jQueryUI 作为 precajoles 可用：[Google Code](http://code.google.com/p/google-caja/source/browse/trunk/third_party/?r=5046#third_party/precajole)。如果 jqGrid 至少可以工作，这可能是一个替代方案（但由于我打算使用 ExtJS，我宁愿将环境切换到更兼容的东西）。

那个 Maestro HTML 应用程序只是说：“加载 ext-all.js 失败”。没有尝试在驱动器上“本地”包含 lib - 但我猜想可能会应用同样的 JS 阉割。

嵌入第 3 方脚本的安全性通常不是坏主意 -

但是，如果安全功能不能被覆盖——它就会阻碍创新。

可能应该假设它不受支持并继续前进；对这种专有解决方案一无所有——他们可能会建立自己的互联网，但没有我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T18:31:56.120

我在 Caja 工作。我没有特别关注 ExtJS，但是对于一个新的 JS 框架来说，通常会出现问题的原因是 Caja 没有准确地实现一些小功能或极端情况。Web 平台非常庞大，我们必须优先考虑人们期望使用的功能，因为说“在继续之前实现一切”是不切实际的。

我建议您[提交增强请求](http://code.google.com/p/google-caja/issues/entry)以支持 ExtJS。如果您要检查 ExtJS 的 CSS 并确定 Caja 拒绝它的哪一部分（例如，通过将错误与未缩小版本中的行号进行比较，或者如果有必要，删除部分直到它不被拒绝），这将特别有用，所以我们可以专注于添加必要的功能。

* * *

请注意，您不应期望`document.write`ing`<script>`元素起作用；动态定义的脚本通常在 Google Apps 脚本中 Caja 的当前部署中不可用。请改用 HTML 中的文字`<script>`元素。这可能就是为什么您只看到与 CSS 相关的错误，而 ExtJS 本身既没有成功也没有错误的原因。（我刚刚记录了[在这种情况下我们应该给出错误消息](http://code.google.com/p/google-caja/issues/detail?id=1652)。）

# c# - 在 Windows 窗体中将 Datatable 数据绑定到 Gridview

> ID：14794470
> 
> 赞同：2
> 
> 时间：2013-02-10T03:41:41.427
> 
> 标签：c#, winforms, vsto

我在整个 stackoverflow 上进行了搜索，但找不到适合我的问题的答案。我想将数据表值绑定到 windows 窗体中的 datagridview。特别是一个类中的数据表和单独文件中的 Gridview。

这是我的代码。

```
namespace MyProj
{
  public partial class ThisAddIn
{
  public string GetDetails()
    {
      // Some Codes here
      DataTable dt = new DataTable();
        dt.Columns.Add("id");
        dt.Columns.Add("uid");
        dt.Columns.Add("email");

        //Some codes here.I just only give a data table part only.

         DataRow row = dt.NewRow();

           row["id"] = sid;
           sid++;

           row["uid"] = uid;
           row["email"] = e;
           dt.Rows.Add(row);
    }
}
} 
```

我刚刚尝试添加 Gridview，这是该代码。首先我添加 Add -> NewItem -> WindowsForm & add as form1.cs

然后我从工具箱中将 Gridview 添加到这个 form1.cs 类中。然后双击 gridview。

这是我的 form1.cs 编码

```
private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
    {
        //ThisAddIn th = new ThisAddIn();
        this.dataGridView1.Visible = true;
        dataGridView1.AutoGenerateColumns = false;
        dataGridView1.DataSource =dt; // here show dt does not contain the current context. 
```

}

这两个文件都在同一个命名空间下。当我尝试从一个类（ThisAddIn th = new ThisAddIn();）创建一个对象时，它会显示，

> > ThisAddIn.ThisAddIn(Microsoft.Office.tools.Outlook Factory factory,IsServiceProvider serviceProvider)
> > 
> > 此插件不包含采用 0 个参数的构造函数

我是 c# 的新手，请帮我解决这个问题，如果你能给我一个带有解释的解决方案，那就太好了..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T03:52:39.697

1）GetDetails方法必须返回一个DataTable，所以我改为`string`并`DataTable`返回`dt;`

```
public partial class ThisAddIn
{
public DataTable GetDetails()
  {
  // Some Codes here
    DataTable dt = new DataTable();
    dt.Columns.Add("id");
    dt.Columns.Add("uid");
    dt.Columns.Add("email");
    DataRow row = dt.NewRow();    
     row["id"] = sid;
     sid++;    
     row["uid"] = uid;
     row["email"] = e;
     dt.Rows.Add(row);
     return dt;
  }
} 
```

2) 请注意我如何实例化 ThisAddIn 类，然后调用 GetDetails 方法 - 将结果返回到范围在上下文中的 DataTable。

```
private void dataGridView1_CellContentClick(object sender, DataGridViewCellEventArgs e)
{
    ThisAddIn th = new ThisAddIn();
    //Declare a DataTable and call to GetDetails
    DataTable dt =  th.GetDetails();
    this.dataGridView1.Visible = true;
    dataGridView1.AutoGenerateColumns = false;
    dataGridView1.DataSource = dt;
} 
```

3）当你实例化`ThisAddIn th = new ThisAddIn();`你得到错误：

> 此插件不包含采用 0 个参数的构造函数

要解决此问题，您需要在实例化类时提供一些值（参数中的参数）：

```
ThisAddIn th = new ThisAddIn(value1, value2, etc) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-02T06:55:50.547

```
 private void BindProductsGrid()
        {
            dataGridView1.Rows.Clear();
            DataTable dt = new DataTable();
            dt = bl.BindProducts();
            if (dt.Rows.Count > 0)
            {
                for (int i = 0; i < dt.Rows.Count; i++)
                {
                    dataGridView1.Rows.Add();
                    dataGridView1.AllowUserToAddRows = false;
                    dataGridView1.Rows[i].Cells[1].Value = dt.Rows[i]["Product_id"].ToString();
                    dataGridView1.Rows[i].Cells[2].Value = dt.Rows[i]["Product_name"].ToString();
                    dataGridView1.Rows[i].Cells[3].Value = dt.Rows[i]["Quantity"].ToString();
                }
            }
        } 
```

# php - 使用 jquery 代码使用 jquery 文件调用 php

> ID：14794471
> 
> 赞同：-5
> 
> 时间：2013-02-10T03:41:51.967
> 
> 标签：php, javascript, jquery

编辑：我正在尝试遵循这个[分页教程](http://web.enavu.com/demos/paginate/)。我已经让它工作了。但是，当我尝试通过调用 php 文件（分页）来加载它时，教程中的 jquery 不起作用。你知道为什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T15:06:43.647

```
<script>
function ajax_loadpage(loadUrl,output_container)
    {
        $.post
        (
            loadUrl,
            {language: "php", version: 5},function(responseText){$(output_container).html(responseText);},"html"
        );
    }

ajax_loadpage("url1.php","#div_wrapper_or_container");
</script> 
```

# vbscript - 为什么不存在的注册表值返回为“1”而不是 null？

> ID：14794473
> 
> 赞同：0
> 
> 时间：2013-02-10T03:42:02.280
> 
> 标签：vbscript

我不想承认我浪费了大量时间来尝试调整返回已安装程序列表的 VB 脚本，并且我试图了解我哪里出错了。

我遇到的问题是，我在网上找到的每个“List Programs”类型脚本都会使用具有“DisplayName”字段的每个键填充一个文本文件。尽管进行了大量查找，但我找不到仅返回填充 add/remove 或 appwiz.cpl 的列表的列表。这是我发现的“Grab Everything”类型脚本的示例：

```
Const HKLM = &H80000002 'HKEY_LOCAL_MACHINE
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set oShell = CreateObject( "WScript.Shell" )
temp=oShell.ExpandEnvironmentStrings("%temp%")
Set objTextFile = objFSO.CreateTextFile(temp & "\software.txt", True)
strComputer = "."
strKey = "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\"
strKey2 = "SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\"
strEntry1a = "DisplayName"
strEntry1b = "QuietDisplayName"
Set objReg = GetObject("winmgmts://" & strComputer & _
 "/root/default:StdRegProv")
objReg.EnumKey HKLM, strKey, arrSubkeys
For Each strSubkey In arrSubkeys
  intRet1 = objReg.GetStringValue(HKLM, strKey & strSubkey, _
   strEntry1a, strValue1)
  If intRet1 <> 0 Then
    objReg.GetStringValue HKLM, strKey & strSubkey, _
     strEntry1b, strValue1
  End If
  If strValue1 <> "" Then
  objTextFile.WriteLine strValue1
  End If
Next
objtextfile.close
Set objTextFile = objFSO.CreateTextFile(temp & "\software.txt", True)
objReg.EnumKey HKLM, strKey2, arrSubkeys
For Each strSubkey In arrSubkeys
  intRet1 = objReg.GetStringValue(HKLM, strKey2 & strSubkey, _
   strEntry1a, strValue1)
  If intRet1 <> 0 Then
    objReg.GetStringValue HKLM, strKey & strSubkey, _
     strEntry1b, strValue1
  End If
  If strValue1 <> "" Then
  objTextFile.WriteLine strValue1
  End If
Next
objtextfile.close 
```

因为找不到，所以决定自己做。查找 Windows 用来排除条目的字段非常容易。如果注册表中的 Uninstall 项中列出的所有项包含字段“ParentDisplayName”或“SystemComponent”，则它们将被排除。我所要做的就是引入一种方法来筛选包含上述字段的键，这样它们就不会添加到 ObjTextFile.WriteLine 中。

我的问题是应该为 null 的值会返回为“1”吗？我真的很想知道出了什么问题，所以我避免在未来浪费太多时间。

我终于开始工作的脚本在这里：

（请注意，提交给文本文件的“SystemComponent”和“ParentDisplayName”必须同时具有“1”才能被排除。但我不知道为什么它是“1”而不是 Null。

```
Const HKLM = &H80000002 'HKEY_LOCAL_MACHINE
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set oShell = CreateObject( "WScript.Shell" )       
System=oShell.ExpandEnvironmentStrings("%systemroot%")    
Set objTextFile = objFSO.CreateTextFile("installed.txt", True)
strComputer = "."
strKey = "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\"
strKey2 = "SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\"
strEntry1a = "DisplayName"
strEntry1b = "QuietDisplayName"
strEntry1c = "SystemComponent"
strEntry1d = "ParentDisplayName"
Set objReg = GetObject("winmgmts://" & strComputer & _
 "/root/default:StdRegProv")
objReg.EnumKey HKLM, strKey, arrSubkeys
For Each strSubkey In arrSubkeys
  Check1 = objReg.GetDWORDValue(HKLM, strKey & strSubkey, _
   strEntry1c)
  Check2 = objReg.GetStringValue(HKLM, strKey & strSubkey, _
   strEntry1d)
  intRet1 = objReg.GetStringValue(HKLM, strKey & strSubkey, _
   strEntry1a, strValue1)
  If intRet1 <> 0 Then
    objReg.GetStringValue HKLM, strKey & strSubkey, _
     strEntry1b, strValue1
  End If
  If strValue1 <> "" and check1 = 1 and check2 = 1 Then
  objTextFile.WriteLine strValue1
  End If
Next

If objfso.folderexists (system & "\syswow64\") then
objReg.EnumKey HKLM, strKey2, arrSubkeys
For Each strSubkey In arrSubkeys
  Check1 = objReg.GetDWORDValue(HKLM, strKey2 & strSubkey, _
   strEntry1c)
  Check2 = objReg.GetStringValue(HKLM, strKey2 & strSubkey, _
   strEntry1d)
  intRet1 = objReg.GetStringValue(HKLM, strKey2 & strSubkey, _
   strEntry1a, strValue1)
  If intRet1 <> 0 Then
    objReg.GetStringValue HKLM, strKey & strSubkey, _
     strEntry1b, strValue1
  End If
  If strValue1 <> "" and check1 = 1 and check2 = 1 then
  objTextFile.WriteLine strValue1
  End If
Next
objtextfile.close
else
end if 
```

这就是我被抓住的地方；尝试无穷无尽的变化：

```
 strEntry1c = "SystemComponent"
    Check = objReg.GetDWORDValue(HKLM, strKey & strSubkey, _
       strEntry1c)
    IF isNull(Check) Then
      intRet1 = objReg.GetStringValue(HKLM, strKey & strSubkey, _
       strEntry1a, strValue1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T12:31:41.477

It's not quite clear to me what your question is here. Which value do you expect to be `Null` (or `Not Null`)? The value read from the registry or the return value of the function you use to read the registry value? Those two values have entirely different meanings.

Besides, the function call in your last code snippet isn't quite right (although it will work).

```
strEntry1c = "SystemComponent"
Check = objReg.GetDWORDValue(HKLM, strKey & strSubkey, strEntry1c) 
```

You're calling the function [`GetDWORDValue`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390445%28v=vs.85%29.aspx) with the parameters `hDefKey`, `sSubkeyName` and `sValueName`, but omit the out parameter for the actual value (`uValue`).The return value of the function, however, is not the data of the registry value `SystemComponent`, but an integer status code indicating if the operation was successful or not. The data read from the registry value would normally be stored in the function's 4^(th) parameter. Since this parameter is missing, it defaults to `Null`, i.e. the runtime environment expands the function call to this:

```
Check = objReg.GetDWORDValue(HKLM, strKey & strSubkey, strEntry1c, Null) 
```

Depending on whether `strKey & strSubkey` and/or `strEntry1c` do or don't exist, the value of `Check` will be either 0 (value successfully read), 1 (value doesn't exist), or 2 (key doesn't exist). Whatever is read from the registry will be dropped, though, because there's no variable to hold the data (4^(th) parameter is `Null`). Because of this the condition `IsNull(Check)` always evaluates to `False` and `GetStringValue` is never called.

If you add an actual variable as the 4^(th) parameter to the function call:

```
Check = objReg.GetDWORDValue(HKLM, strKey & strSubkey, strEntry1c, val) 
```

the value of that variable will be either the value read from the registry (`Check = 0`) or `Null` if the value can't be read (`Check <> 0`).

You also have to change the condition from `IsNull(Check)` to either `Check <> 0` or `IsNull(val)` if you want to call `GetStringValue` when the DWORD value was not present.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T13:42:19.523

因为

1.  @Ansgar 给出了很好的解释（+1）
2.  user1691832 仍在试验 Null 检查
3.  文档倾向于避免谈论返回值和可能的错误

一些代码表明**您**应该检查数值返回值以及**如何**执行此操作：

```
Option Explicit

Const HKLM = &H80000002 ' HKEY_LOCAL_MACHINE
Const BAD  = &H80000010 ' BAD HIVE

Dim oReg   : Set oReg = GetObject("winmgmts://./root/default:StdRegProv")
Dim aParms : aParms   = Array( _
      Array(HKLM, "SYSTEM\CurrentControlSet\Control\CrashControl", "AutoReboot") _
    , Array(HKLM, "SYSTEM\CurrentControlSet\Control\CrashControl", "YYYYYYYYYY") _
    , Array(HKLM, "SYSTEM\CurrentControlSet\Control\XXXXXXXXXXXX", "AutoReboot") _
    , Array(HKLM, "SYSTEM\CurrentControlSet\Control\XXXXXXXXXXXX", "YYYYYYYYYY") _
    , Array(HKLM, "SYSTEM\CurrentControlSet\Control\CrashControl", "AutoReboot") _
    , Array(BAD , "SYSTEM\CurrentControlSet\Control\CrashControl", "AutoReboot") _
)
Dim lValue ' 'dwValue' is type prefix fraud
Dim aParm
For Each aParm In aParms
    WScript.Echo "try to get long Value from:", Join(aParm, "\")
    Dim iRet : iRet = oReg.GetDWORDValue(aParm(0), aParm(1), aParm(2), lValue)
    If 0 = iRet Then
       WScript.Echo "       got:", iRet, TypeName(lValue), lValue
    Else
       WScript.Echo "       got:", iRet, "won't try to display", TypeName(lValue)
    End If
Next 
```

输出：

```
cscript 14794473.vbs
try to get long Value from: -2147483646\SYSTEM\CurrentControlSet\Control\CrashControl\AutoReboot
       got: 0 Long 1
try to get long Value from: -2147483646\SYSTEM\CurrentControlSet\Control\CrashControl\YYYYYYYYYY
       got: 1 won't try to display Null
try to get long Value from: -2147483646\SYSTEM\CurrentControlSet\Control\XXXXXXXXXXXX\AutoReboot
       got: 2 won't try to display Null
try to get long Value from: -2147483646\SYSTEM\CurrentControlSet\Control\XXXXXXXXXXXX\YYYYYYYYYY
       got: 2 won't try to display Null
try to get long Value from: -2147483646\SYSTEM\CurrentControlSet\Control\CrashControl\AutoReboot
       got: 0 Long 1
try to get long Value from: -2147483632\SYSTEM\CurrentControlSet\Control\CrashControl\AutoReboot
       got: 6 won't try to display Null 
```

# php - tagthe.net API 无法连接到主机错误

> ID：14794481
> 
> 赞同：1
> 
> 时间：2013-02-10T03:43:08.213
> 
> 标签：php, api, tags

我正在使用以下代码成功访问 tagthe.net API，但现在不起作用：

```
$content = "some content";
// Build the URL
$url = "http://tagthe.net/api/?text=".urlencode($content)."&view=json";
$result = json_decode(request_get($url));
$seeds = @$result->memes[0]->dimensions->topic; 
```

我提出请求的功能是：

```
function request_get($url) {
            $headers[] = 'Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'; 
            $headers[] = 'Connection: Keep-Alive'; 
            $headers[] = 'Content-type: application/x-www-form-urlencoded;charset=UTF-8'; 
            $user_agent = 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.0.3705; .NET CLR 1.1.4322; Media Center PC 4.0)';
            $referer = 'http://domain/'.rand(1,100000);

            $process = curl_init($url); 
            curl_setopt($process, CURLOPT_HTTPHEADER, $headers); 
            curl_setopt($process, CURLOPT_HEADER, 0); 
            curl_setopt($process, CURLOPT_USERAGENT, $user_agent); 
            curl_setopt($process, CURLOPT_ENCODING , 'gzip'); 
            curl_setopt($process, CURLOPT_TIMEOUT, 30);  
            curl_setopt($process, CURLOPT_RETURNTRANSFER, 1); 
            curl_setopt($process, CURLOPT_FOLLOWLOCATION, 1);
            $return = curl_exec($process);

            // Check for possible errors
            if ($return === false) {
                log_error(curl_error($process) . ', Url: ' . $url);
            }

            curl_close($process); 
            return $return;
        } 
```

当我执行代码以获取建议的标签时，我得到空结果和以下 cURL 错误：

> 无法连接到主机，网址： [http ://tagthe.net/api/?text=some+content&view=json](http://tagthe.net/api/?text=some+content&view=json)

在此问题之前，我已成功访问并获取标签列表。我做错了什么？任何建议或想法将不胜感激。也许服务改变了？我搜索但没有发现任何关于它的通知。

# php - 如何在 php 中正确打印此标记

> ID：14794482
> 
> 赞同：2
> 
> 时间：2013-02-10T03:43:26.093
> 
> 标签：php, html

如何在 php 中打印此标记？

```
<a href="javascript:AddItem('$node->title')" class="showmessage"
OnClick="show_alert()"><img class="atwatw" src="/files/button.gif" border="0" /></a> 
```

我试过这个，但纳达....

```
<?php print '<a href="javascript:AddItem(\'' . $node->title') . '" class="showmessage"
OnClick="show_alert()">' . '<img class="atwatw" src="/files/button.gif" border="0" /></a>' ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T03:48:05.680

如果您必须将其包含在 php 标签中：

```
<?php print '<a href="javascript:AddItem(\'' . $node->title  . '\')" class="showmessage" OnClick="show_alert()"><img class="atwatw" src="/files/button.gif" border="0" /></a>' ?> 
```

如果不：

```
<a href="javascript:AddItem('<?=$node->title?>')" class="showmessage" OnClick="show_alert()"><img class="atwatw" src="/files/button.gif" border="0" /></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T03:50:19.263

```
<?php echo '<a href="javascript:AddItem(\'' . $node->title .'\')" class="showmessage"
OnClick="show_alert()"><img class="atwatw" src="/files/button.gif" border="0" /></a>'; ?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T04:12:57.303

您可以从 PHP 源代码中获取 HTML 代码，例如

```
//PHP code
?>

<a href="javascript:AddItem('<?php $node->title; ?>')" class="showmessage"
OnClick="show_alert()"><img class="atwatw" src="/files/button.gif" border="0" /></a>

<?php
//Continue with your PHP here 
```

现在，如果您只想在 PHP 中使用它，那么可以使用 printf

```
printf("<a href=\"javascript:AddItem('%s')\" class=\"showmessage\"
OnClick=\"show_alert()\"><img class=\"atwatw\" src=\"/files/button.gif\" border=\"0\" /></a>",$node->title); 
```

更多的是一个较少转义的字符版本：

```
printf('<a href="javascript:AddItem(\'%s\')" class="showmessage"
OnClick="show_alert()"><img class="atwatw" src="/files/button.gif" border="0" /></a>',$node->title); 
```

# javascript - JQuery：仅淡入特定元素（IE 和 Opera）

> ID：14794483
> 
> 赞同：1
> 
> 时间：2013-02-10T03:43:59.567
> 
> 标签：javascript, jquery, internet-explorer, opera

我面临着一个 jQuery 难题，我很感激有人帮我解决它。

在加载完所有文本和图像后，我想使用 jQuery 淡入网页。所以我将正文样式内联设置为“display：none”，然后使用这个基本片段淡入正文：

```
<script type="text/javascript">
$(window).load(function() {
      $('body').fadeIn(300);
}); 
</script> 
```

这正是我在 Firefox、Safari 和 Chrome 中想要的。然而，Internet Explorer 和 Opera 提出了一个挑战：当正文淡入时，页面中包含的所有 JQuery 库元素同时出现，而不是像在“普通”浏览器中那样旋转。

我在这里发布整个画廊脚本：

```
 /* Gallery */
jQuery.fn.gallery = function(_options){
    // defaults options 
    var _options = jQuery.extend({
        duration: 600,
        autoSlide: false,
        slideElement: 1,
        effect: false,
        fadeEl: 'ul',
        switcher: 'ul > li',
        disableBtn: false,
        next: 'a.link-next, a.btn-next, a.next',
        prev: 'a.link-prev, a.btn-prev, a.prev',
        circle: true
    },_options);

    return this.each(function(){
        var _hold = $(this);
        if (!_options.effect) var _speed = _options.duration;
        else var _speed = $.browser.msie ? 0 : _options.duration;
        var _timer = _options.autoSlide;
        var _sliderEl = _options.slideElement;
        var _wrap = _hold.find(_options.fadeEl);
        var _el = _hold.find(_options.switcher);
        var _next = _hold.find(_options.next);
        var _prev = _hold.find(_options.prev);
        var _count = _el.index(_el.filter(':last'));
        var _w = _el.outerWidth(true);
        var _wrapHolderW = Math.ceil(_wrap.parent().width()/_w);
        if (((_wrapHolderW-1)*_w + _w/2) > _wrap.parent().width()) _wrapHolderW--;
        if (_timer) var _t;
        var _active = _el.index(_el.filter('.active:eq(0)'));
        if (_active < 0) _active = 0;
        var _last = _active;
        if (!_options.effect) var rew = _count - _wrapHolderW + 1;
        else var rew = _count;

        if (!_options.effect) _wrap.css({marginLeft: -(_w * _active)});
        else {
            _wrap.css({opacity: 0}).removeClass('active').eq(_active).addClass('active').css({opacity: 1}).css('opacity', 'auto');
            _el.removeClass('active').eq(_active).addClass('active');
        }
        if (_options.disableBtn) {
            if (_count < _wrapHolderW) _next.addClass(_options.disableBtn);
            _prev.addClass(_options.disableBtn);
        }

        function fadeElement(){
            _wrap.eq(_last).animate({opacity:0}, {queue:false, duration: _speed});
            _wrap.removeClass('active').eq(_active).addClass('active').animate({
                opacity:1
            }, {queue:false, duration: _speed, complete: function(){
                $(this).css('opacity','auto');
            }});
            _el.removeClass('active').eq(_active).addClass('active');
            _last = _active;
        }
        function scrollEl(){
            _wrap.animate({marginLeft: -(_w * _active)}, {queue:false, duration: _speed});
        }
        function toPrepare(){
            if ((_active == rew) && _options.circle) _active = -_sliderEl;
            for (var i = 0; i < _sliderEl; i++){
                _active++;
                if (_active > rew) {
                    _active--;
                    if (_options.disableBtn &&(_count > _wrapHolderW)) _next.addClass(_options.disableBtn);
                }
            };
            if (_active == rew) if (_options.disableBtn &&(_count > _wrapHolderW)) _next.addClass(_options.disableBtn);
            if (!_options.effect) scrollEl();
            else fadeElement();
        }
        function runTimer(){
            _t = setInterval(function(){
                toPrepare();
            }, _timer);
        }
        _next.click(function(){
            if(_t) clearTimeout(_t);
            if (_options.disableBtn &&(_count > _wrapHolderW)) _prev.removeClass(_options.disableBtn);
            toPrepare();
            return false;
        });
        _prev.click(function(){
            if(_t) clearTimeout(_t);
            if (_options.disableBtn &&(_count > _wrapHolderW)) _next.removeClass(_options.disableBtn);
            if ((_active == 0) && _options.circle) _active = rew + _sliderEl;
            for (var i = 0; i < _sliderEl; i++){
                _active--;
                if (_active < 0) {
                    _active++;
                    if (_options.disableBtn &&(_count > _wrapHolderW)) _prev.addClass(_options.disableBtn);
                }
            };
            if (_active == 0) if (_options.disableBtn &&(_count > _wrapHolderW)) _prev.addClass(_options.disableBtn);
            if (!_options.effect) scrollEl();
            else fadeElement();
            return false;
        });
        if (_options.effect) _el.click(function(){
            _active = _el.index($(this));
            if(_t) clearTimeout(_t);
            fadeElement();
            return false;
        });
        if (_timer) runTimer();
    });
}

$(document).ready(function(){
    $('div#gallery').gallery({
        duration: 2000,
        effect: 'fade',
        fadeEl: 'ul.gall-inner > li',
        next: 'a#next-btn',
        prev: 'a#prev-btn',
        autoSlide: 6000,
        switcher: '.brands-list ul > li'
    });
}); 
```

一些知识渊博的人可以帮助我找到解决方案或解决方法吗？我将不胜感激！

# html - 顶部栏不会拥抱顶部，文本不会居中，并且不会填满整个屏幕？

> ID：14794485
> 
> 赞同：0
> 
> 时间：2013-02-10T03:44:12.330
> 
> 标签：html, css, center, padding

这就是我所拥有的

[http://jsfiddle.net/ftKw5/](http://jsfiddle.net/ftKw5/)

```
/* CSS element classes */
 @font-face {
    font-family:'myriad-webfont';
    src: url('webfont/myriad-webfont.ttf') format('truetype'), url('webfont/myriad-webfont.svg#myriad_webfont') format('svg');
    font-weight: normal;
    font-style: normal;
}
body {
    font-family: myriad-webfont;
    color: #000000;
    background: url('img/silk_pat@2x.png');
    letter-spacing: 2px;
}
h2 {
    ;
    font-size: 3;
}
::-webkit-input-placeholder {
    color:#222222;
    opacity:0.1;
}
/* CSS element IDs */
 #outer-wrapper {
    width: 50em;
    margin: 1em auto;
    background-position:inherit;
    border: 2px solid #dcdcdc;
    border-radius: 1.5em;
    position:relative;
    background-color: #ffffff;
}
#surtitle {
    border-bottom: 1px solid #dcdcdc;
    text-align: center;
    opacity: 0.3;
    font-size:15px;
    letter-spacing: 7px;
}
#topnavbar {
    padding-top: 10px;
    padding-bottom: 10px;
    text-align: center;
    opacity: 0.5
}
/* Dropdown */
 .nav {
    padding-top:-10;
    height:36px;
    background:#aaa;
    color:#fff;
    text-shadow:1px 1px #888;
    z-index:400
}
.menu a {
    float:right;
    color:#eee;
    text-decoration:none;
    width:120px;
    height:28px;
    padding-top:8px
}
.menu span {
    float:right;
    color:#eee;
    text-decoration:none;
    width:120px;
    height:28px;
    padding-top:8px
}
.menu a:hover {
    color:#fff
}
.menu {
    list-style:none;
    font:10px;
    text-align:center;
    width:600px;
    margin:0;
}
.menu li {
    position:relative;
    float: right;
    width:120px;
    z-index:400
}
.menu ul {
    margin:0;
    padding:0;
    outline:0;
    display:none;
    position:absolute;
    font:10px;
    top:36px;
    left:0;
    background:#aaa;
    display:none;
    list-style:none
}
.menu ul li {
    float:none;
    border-top:1px solid #ccc;
    width:120px
}
.menu ul li a, li.menuhover li a, li.menuhover li.menuhover li a {
    float:none;
    display:block;
    background:none;
    height:22px;
    padding-top:5px
}
.menu ul li a:hover, li.menuhover li a:hover, li.menuhover li.menuhover li a:hover {
    background:#999;
    color:#fff
}
.menu ul li span, li.menuhover li span, li.menuhover li.menuhover li span {
    float:none;
    display:block;
    background:none;
    height:22px;
    padding-top:5px
}
.menu ul ul {
    left:120px;
    top:0
}
.menu li.submenu {
}
.menu li.noborder {
    border-top:none
}
li.menuhover a, li.menuhover li.menuhover a {
    color:#fff;
    background:#999
}
li.menuhover span, li.menuhover li.menuhover span {
    color:#fff;
    background:#999
} 
```

出于某种原因，当我运行它时，它不会拥抱顶部等。我添加了 jsfiddle 以便它更好地阅读，并且您可以看到与它一起使用的 html。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T03:58:18.457

如果我理解您的问题正确，则以下 CSS 将对您有所帮助。

**CSS：**

```
body {
    font-family: myriad-webfont;
    color: #000000;
    background: url('img/silk_pat@2x.png');
    letter-spacing: 2px;
    padding:0; // it will remove padding from body tag
    margin:0; // it will remove margin from body tag
} 
```

评论中新要求的答案（菜单应位于顶部栏的中心）：

```
.menu {
    list-style: none outside none;
    margin: 0 auto;
    overflow: hidden;
    padding: 0;
    text-align: center;
    width: 368px;
}

.menu li {
    float: left;
    width: 120px;
    z-index: 400;
} 
```

# eclipse - 使用 eclipse 作为 svn 客户端

> ID：14794489
> 
> 赞同：2
> 
> 时间：2013-02-10T03:45:40.190
> 
> 标签：eclipse, svn, subclipse

运行 OSX。

作为一名 Java 开发人员，我多年来一直使用 eclipse。我现在正在使用各种新技术，但仍然发现自己在使用 svn（不要问这不是我的决定）。无论如何，我不太喜欢 SVN 命令行，因为我发现几乎不可能对合并冲突进行排序。

因此，每当我需要做 SVN 类型的事情时，我都在考虑使用 eclipse（带 subclipse 插件）作为我的 SVN 客户端。我发现的一个问题是 eclipse 喜欢创建一个 .project 文件。我永远不想检查这个，因为没有其他人使用 Eclipse。我知道我可以将它添加到 svn:ignore，但实际上也必须将该忽略提交给 SVN，我也不想这样做。

无论如何要创建没有 .project 文件的 eclipse 项目。我知道这听起来很愚蠢，因为我确信 eclipse 的所有项目都需要 .project 文件。仅仅创建一个 SVN 项目（不是 Java 项目）并让 eclipse 摆脱任何其他废话就很好了。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T20:39:56.717

没有`.project`文件就无法创建 Eclipse 项目（至少据我所知没有），但您也可以告诉 Eclipse 忽略哪些文件。

只需转到*Preferences -> Team -> Ignored Resources*并添加模式`.project`。

此设置纯粹是 Eclipse 内部的，既不会影响您的全局 svn-ignores（定义在 中`~/.subversion/config`），也不会将任何文件添加到存储库中。

此外，当使用 Eclipse 从 SVN 签出文件夹时，请确保创建一个*General Project*，而不是*Java Project*，因此该`.project`文件是 Eclipse 创建的唯一文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T07:52:42.727

`.project`实际上不是将生成的唯一文件 - 取决于您添加到项目的“项目性质”。要将项目与源文件夹真正分开，您必须在单独的文件夹中创建项目 - 比如说工作区 - 删除原始源文件夹并将**源文件夹添加为外部链接**- 请参阅：项目设置/Java构建路径/来源。

# c++ - c++ std::array 警告

> ID：14794490
> 
> 赞同：3
> 
> 时间：2013-02-10T03:45:46.167
> 
> 标签：c++, arrays, stl

在下面的代码上

```
std::array<int,3> myarray = {10,20,30}; 
```

我收到以下编译器警告

```
warning: missing braces around initializer for ‘std::array<int, 3u>::value_type [3] {aka int [3]}’ [-Wmissing-braces] 
```

为什么 ？

工具链：（编辑）

```
g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T03:49:59.613

试试这个：

`std::array<int,3> = {{10, 20, 30}}`

我认为这是他们在 > 4.6 版本中修复的错误

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-10T03:51:57.273

正如 Tyler 所指出的，`std::array`它是一个 POD，因此它没有构造函数，并且包含一个数组。要使用大括号语法对其进行初始化，请先初始化变量，然后使用嵌套的大括号初始化变量内的数组。

```
{ { 10, 20, 30 } }
  ^ For the array member variable inside the std::array object
^ For the std::array object 
```

实际上这是您的编译器中的一个错误，因为聚合初始化允许您在`=`. 所以这两个是合法的：

```
std::array<int,3> x = {10, 20, 30};
std::array<int,3> y  {{10, 20, 30}}; 
```

但不是

```
std::array<int,3> z {10, 20, 30}; 
```

最后一个在 GCC 上编译，但它是一个非标准扩展，你应该得到一个警告。

# eclipse - Eclipse 中的 Code Igniter 2.1 自动完成/智能感知

> ID：14794491
> 
> 赞同：8
> 
> 时间：2013-02-10T03:45:47.777
> 
> 标签：eclipse, codeigniter, codeigniter-2, eclipse-pdt

我正在使用 Eclipse PDT 使用 PHP Code Igniter 进行编码。我想让自动完成工作。有谁知道我怎么能做到这一点？我找到了一些在线教程，但没有成功。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-10T20:06:29.250

你可以试试这个方法

1.  选择“项目”->“属性”或“窗口”->“首选项”->“PHP”（全局使用）
2.  选择“PHP 包含路径”</li>
3.  单击“添加外部源文件夹”并指向下面的文件
4.  重启日食

指向下面这个文件的路径

**ciautocomplete.php**

```
<?php

/**
* @property CI_DB_active_record $db
* @property CI_DB_forge $dbforge
* @property CI_Benchmark $benchmark
* @property CI_Calendar $calendar
* @property CI_Cart $cart
* @property CI_Config $config
* @property CI_Controller $controller
* @property CI_Email $email
* @property CI_Encrypt $encrypt
* @property CI_Exceptions $exceptions
* @property CI_Form_validation $form_validation
* @property CI_Ftp $ftp
* @property CI_Hooks $hooks
* @property CI_Image_lib $image_lib
* @property CI_Input $input
* @property CI_Language $language
* @property CI_Loader $load
* @property CI_Log $log
* @property CI_Model $model
* @property CI_Output $output
* @property CI_Pagination $pagination
* @property CI_Parser $parser
* @property CI_Profiler $profiler
* @property CI_Router $router
* @property CI_Session $session
* @property CI_Sha1 $sha1
* @property CI_Table $table
* @property CI_Trackback $trackback
* @property CI_Typography $typography
* @property CI_Unit_test $unit_test
* @property CI_Upload $upload
* @property CI_URI $uri
* @property CI_User_agent $user_agent
* @property CI_Validation $validation
* @property CI_Xmlrpc $xmlrpc
* @property CI_Xmlrpcs $xmlrpcs
* @property CI_Zip $zip
*/

class CI_Controller {};
class MY_Controller {};
/**
* @property CI_DB_active_record $db
* @property CI_DB_forge $dbforge
* @property CI_Config $config
* @property CI_Loader $load
* @property CI_Session $session
*/

class CI_Model {}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-17T23:07:16.147

对于 Eclipse PDT：在根 CodeIgniter ciautocomplete.php 中制作上面的粘贴代码（1 个答案）。就是这个。你会很高兴，它是如何工作的:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-20T20:15:50.150

在控制器中自动完成您自己的模型：

```
$this->load->model('my_model');

$this->my_model = new My_model(); 
```

……

```
typing: $this->my_model-> 
```

Eclipse 使用模型的属性和方法自动完成

# ruby-on-rails - “计数”或“长度”哪个更快？

> ID：14794492
> 
> 赞同：3
> 
> 时间：2013-02-10T03:45:56.093
> 
> 标签：ruby-on-rails, ruby-on-rails-3

假设有 2 个模型调用`User`和`Post`

“Plan A”或“Plan B”哪个性能更好（更快）？

“A计划”

**控制器**

```
@users = User.find_all_by_country(params[:country])
@posts = Post.find_all_by_category(params[:category]) 
```

**看法**

```
<%= @users.count.to_s %>
<%= @posts.count.to_s %> 
```

“B计划”

**控制器**

```
@users = User.find_all_by_country(params[:country])
@posts = Post.find_all_by_category(params[:category]) 
```

**看法**

```
<%= @users.length.to_s %>
<%= @posts.length.to_s %> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-10T04:33:09.930

在 ruby​​ 中`count`，`length`和`size`所有关于数组的事情几乎相同。请参阅[此处](https://stackoverflow.com/questions/4550770/count-size-length-too-many-choices-in-ruby)了解更多信息。

然而，当使用**ActiveRecord 对象**时，`count`它比 更好`length`，`size`甚至更好。

`find_all_by_country`返回一个哑数组，因此您不应该使用该方法（因为它总是返回一个数组）。相反，使用`where(country: params[:country])`.

我会让[Code School](http://www.codeschool.com/)的[Rails Best Practices](http://www.codeschool.com/courses/rails-best-practices)幻灯片 nº 93 说明一切（希望他们不会因为我在这里复制它而生气）。

![在此处输入图像描述](../Images/b2ec1b97238ce71ec0a4836aacde2fdc.png)

以防万一图像被删除，基本上：

1.  `length`总是提取所有记录，然后在数组上调用 .length - 不好

2.  `count`总是做一个计数查询 - 好

3.  `size`如果您有缓存计数器，则查看缓存，否则进行计数查询 - 最好

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T03:50:16.930

两者都是相同的，`count`没有参数，`length`并且与您在 Ruby 数组（由魔术方法返回）上调用它们时相同`find_*`，而不是 ActiveRecord 对象。

也就是说，如果您只是对匹配记录的数量感兴趣，这两种方法都是*最糟糕的方法。*

与其实例化整个结果集只是为了找到它的长度，`.count`不如在实际的 ActiveRecord 关系上使用：

```
@num_users = User.where(country: params[:country]).count
@num_posts = Post.where(category: params[:category]).count 
```

这实际上将作为`select count(*) from`而不是 full执行`select * from`，这将根据结果的数量而更快。

# jquery - bxslider 和 jQuery - getCurrentSlide

> ID：14794495
> 
> 赞同：0
> 
> 时间：2013-02-10T03:46:28.093
> 
> 标签：jquery, bxslider

我是 jQuery 和 javascript 的新手，无法解决以下 bxslider 问题。

我希望能够根据滑块位置更改各种元素的 css 属性。

我查看了 bxslider 文档中的 getCurrentSlide 方法，但使用以下方法我总是得到 var current == 0。

```
slider = $('.bxslider').bxSlider();
var current = slider.getCurrentSlide(); 
```

我应该怎么做才能使当前变量等于当前幻灯片的索引值并且每次幻灯片位置更改时索引值都更新？我的 bxslider 包含 4 张幻灯片。

- 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:58:49.483

我猜你正在把`getCurrentSlide()`方法放在`document.ready`调用中。加载时，当前幻灯片将始终为 0，因为它是一个以 0 为索引的数组。如果您查看[回调 api](http://bxslider.com/examples/callback-api)，您可以使用该`onSlideAfter`方法来更新`current`变量。一个简单的实现如下所示：

```
var current = 0;
$('.bxslider').bxSlider({
  onSliderLoad: function(){
    // do funky JS stuff here
    alert('Slider has finished loading. Click OK to continue!');
  },
  onSlideAfter: function(){
    // increment current by 1 each time this method is called
    current += 1;
  }
}); 
```

# javascript - 为 Accordion 类型栏设置动画的最佳方式？

> ID：14794503
> 
> 赞同：1
> 
> 时间：2013-02-10T03:48:17.023
> 
> 标签：javascript, html, css

首先在这里查看现场演示：http: [//khill.mhostiuckproductions.com/siteLSSBoilerPlate/](http://khill.mhostiuckproductions.com/siteLSSBoilerPlate/)

单击顶部栏中间的按钮，展开包含内容的部分。就目前而言，这个扩展没有动画。

给定下面的代码和 jsfiddle，最好的动画方法是什么？我更喜欢使用 CSS 过渡。我不担心手机，因为我的手机版本这个按钮是隐藏的，不能点击。

**jsFiddle：http:** [//jsfiddle.net/HXVxs/](http://jsfiddle.net/HXVxs/)

**Javascript：**

```
<script language="javascript"> 
    function toggle() {
        var ele = document.getElementById("toggleText");
        var text = document.getElementById("displayText");
        if(ele.style.display == "block") {
                ele.style.display = "none";
            text.innerHTML = "BUTTON";
        }
        else {
            ele.style.display = "block";
            text.innerHTML = "BUTTON";
        }
    } 
    </script> 
```

**HTML：**

```
<!-- BUTTON PLACED IN MY TOP BAR -->
<div class="topbar">
<div class="company-list top-border"><a id="displayText" href="javascript:toggle();">Click here to display customer list.</a></div>
</div>

<!-- TOP WIDGET (different from top-bar, placed above top-bar in my HTML structure) -->

<div class="top-widget">
<div class="company-list-toggle bottom-border" id="toggleText" style="display: none">

    <p>Sample text here...</p>

<div class="company-list top-border"><a id="displayText" href="javascript:toggle();">Click here to display customer list.</a></div>

</div>
</div> 
```

**CSS：**

```
.top-widget { /* tried CSS3 transitions here and did not work */
    position: absolute;
    z-index: 100;
    background: #2b332a;
} 
```

谢谢！

编辑：快速说明...标准手风琴不能解决我的问题。这样做的原因是标准手风琴在单击包含的 div 元素时显示其内容。在我的情况下，单击时显示内容 div 的 BUTTON 与内容 div 本身是分开的。改编普通的手风琴不适用于这种情况，或者我会从一开始就这样做。

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T04:40:45.033

使用`height`（在 0 和 之间切换`scrollHeight`）和 CSS 过渡：[小提琴](http://jsfiddle.net/HXVxs/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T04:30:45.637

这是一个风格和动画都很好的手风琴[http://jqueryui.com/accordion/](http://jqueryui.com/accordion/)。检查页面侧面的示例。您可以单击页面底部的“查看源代码”查看源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T04:08:58.980

作为一个随机示例，请查看：http: [//viralpatel.net/blogs/create-accordion-menu-jquery/](http://viralpatel.net/blogs/create-accordion-menu-jquery/)

jQuery 解决方案并不意味着您失去了 CSS 控制，恰恰相反。我经常使用“手风琴”，它们在 jQuery 中工作得很好。浏览器兼容性也很好。

# android - 无法在 android 4.0.4 上获取互联网数据

> ID：14794504
> 
> 赞同：0
> 
> 时间：2013-02-10T03:48:25.483
> 
> 标签：android, json, nullpointerexception, android-4.0-ice-cream-sandwich, null-pointer

我为 Android 开发的应用程序有问题。
我试图通过 JSON Parser 从 Google Translate API 获取数据。
该应用程序在 Emulator (v 2.1) 和 T-Mobile Move Balance (v 2.3.5) 上完美运行该问题发生在 Android 4.0.4（设备 ZTE BLADE III）上。当我尝试获取数据时，它返回*空指针*（ NullPointerException 被 try-catch 块包围）。

清单上有应用程序权限

```
 <uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/> 
```

我认为是设备上的清单或设置配置错误（已检查互联网连接并与其他应用程序一起使用。浏览器也可以），因为该应用程序在旧版本中运行良好。
任何帮助，将不胜感激。提前致谢。

我认为不需要
这是带有一个按钮和两个微调器的 Activity，按钮上有监听器

```
 public class OptionsActivity extends Activity {

private String mSourceLanguage, mDestinationLanguage;
private Spinner sourceSpinner, destinationSpinner;
private  static ArrayList<Language> languages;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_options);

    sourceSpinner = (Spinner)findViewById(R.id.spinner1);
    destinationSpinner = (Spinner)findViewById(R.id.spinner2);
    updateSpinners();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_options, menu);
    return true;
}

// isprakjanje na informacii na jazicite do ManuaInputActivity
public void submitLanguages(View v){
    mSourceLanguage = sourceSpinner.getSelectedItem().toString();
    mDestinationLanguage = destinationSpinner.getSelectedItem().toString();

    String sourceCode = "", destCode = "";
    sourceCode = getCode(mSourceLanguage);
    destCode = getCode(mDestinationLanguage);

    Intent intent = new Intent(this, ManualInputActivity.class);

    Bundle spinnerBundle = new Bundle();
    spinnerBundle.putString("sourceLanguage", mSourceLanguage + " ["+ sourceCode + "]");
    spinnerBundle.putString("sourceCode", sourceCode);
    spinnerBundle.putString("destinationLanguage", mDestinationLanguage + " [" + destCode + "]");
    spinnerBundle.putString("destinationCode", getCode(mDestinationLanguage));

    intent.putExtras(spinnerBundle);

    setResult(RESULT_OK, intent);
    super.finish();
}

// moze da mi treba pokasno za polnenje na spinner-ite
private ArrayAdapter<String> initializeSpinner(ArrayList<Language> lang){
    ArrayList<String> entries = new ArrayList<String>();

    for(Language l: lang){
        entries.add(l.getLanguageName());
    }
    ArrayAdapter<String> spinnerAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_spinner_item,entries);
    spinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    return spinnerAdapter;
}

private void updateSpinners(){
    GoogleRequest gr = new GoogleRequest();
    try {
        String result = gr.requestLanguages("en");
        languages = gr.getLanguagesFromJSONObject(result);
        sourceSpinner.setAdapter(initializeSpinner(languages));
        destinationSpinner.setAdapter(initializeSpinner(languages));
    } catch (NullPointerException e) {
        // TODO: handle exception
        Toast.makeText(this, "Empty spinners.. NO DATA...", Toast.LENGTH_SHORT).show();
    }
}

private String getCode(String s){
    String ss="xx";
    for (Language l : languages){
        if(l.getLanguageName().toString()==s)
            ss = l.getLanguageCode().toString();
    }
    return ss;
} 
```

}

和 GoogleRequest 类...

```
public class GoogleRequest {

private final String requestURL = "https://www.googleapis.com/language/translate/v2?key=";
private final String requestURLLang = "https://www.googleapis.com/language/translate/v2/languages?key=";
private final String requestKey = "**************";
private final String requestSrc = "&source=";
private final String requestDst = "&target=";
private final String requestTxt = "&q=";

public String requestLanguages(String target){
    String request = requestURLLang + requestKey + requestDst + target;
    try {
        URL url = new URL(request);
        URLConnection connection = url.openConnection();
        connection.connect();
        InputStreamReader inputStreamReader = new InputStreamReader( connection.getInputStream(), "UTF-8" );
        BufferedReader in =  new BufferedReader( inputStreamReader, 512 );
        StringBuffer sb = new StringBuffer();
        String line;
        while ( ( line = in.readLine() ) != null ) {
            sb.append( line );
        }
        in.close();
        return sb.toString();
    } 
    catch ( Exception e ) {
        e.printStackTrace();
    }
    return null;
}

public String requestTranslation( String txt, String src, String dst ) {

    String request = requestURL + requestKey + requestSrc + src + requestDst + dst + requestTxt;   
    try {
        request += URLEncoder.encode( txt, "UTF-8" );
        URL url = new URL(request);
        URLConnection connection = url.openConnection();
        connection.connect();
        InputStreamReader inputStreamReader = new InputStreamReader( connection.getInputStream(), "UTF-8" );
        BufferedReader in =  new BufferedReader( inputStreamReader, 512 );
        StringBuffer sb = new StringBuffer();
        String line;
        while ( ( line = in.readLine() ) != null ) {
            sb.append( line );
        }
        in.close();
        return sb.toString();
    } 
    catch ( Exception e ) {
        e.printStackTrace();
    }
    return null;
}

public String getTextFromJSONObject(String text){

    try{
        JSONObject mainObj = new JSONObject(text);
        JSONObject data = mainObj.getJSONObject("data");
        JSONArray translations = data.getJSONArray("translations");

        String result = "";
        for(int i=0; i <translations.length(); i++){
            JSONObject translatedText = translations.getJSONObject(i);
            result += translatedText.getString("translatedText");
        }

        return result;
    }catch (JSONException e) {
        // TODO: handle exception
        Toast.makeText(null, "Parsing error!", Toast.LENGTH_SHORT).show();
        return null;
    }
}

public ArrayList<Language> getLanguagesFromJSONObject(String text){
    ArrayList<Language> googleLanguages = new ArrayList<Language>();

    try {
        JSONObject mainObj = new JSONObject(text);
        JSONObject data = mainObj.getJSONObject("data");
        JSONArray languages = data.getJSONArray("languages");

        for(int i=0; i<languages.length(); i++){
            Language l = new Language();
            JSONObject language = languages.getJSONObject(i);
            l.setLanuguageCode(language.getString("language"));
            l.setLanuguageName(language.getString("name"));

            googleLanguages.add(l);
        }

        return googleLanguages;
    } catch (JSONException e) {
        Toast.makeText(null, "Parsing error!", Toast.LENGTH_SHORT).show();
        return null;
    }
}

public String printLista(ArrayList<Language> l){
    String s="";
    for(Language la: l){
        s+= la.getLanguageName().toString() + " [" + la.getLanguageCode().toString() + "]";
    }
    return s;
}} 
```

选项布局...

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/LinearLayout1"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
tools:context=".OptionsActivity" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="0dip"
    android:layout_weight="0.98"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/label_choose_source"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="match_parent"
        android:prompt="@string/label_choose_source"
        android:entries="@array/spinner1_entries"
        android:layout_height="wrap_content" />

    <android.support.v7.widget.Space
        android:id="@+id/space1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="@string/label_choose_destination"
        android:textAppearance="?android:attr/textAppearanceSmall" />

    <Spinner
        android:id="@+id/spinner2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:entries="@array/spinner1_entries"
        android:prompt="@string/label_choose_destination" />
</LinearLayout>

<Button
    android:id="@+id/button1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:onClick="submitLanguages"
    android:text="@string/button_submit_languages" /> 
```

和 LogCat：

```
 02-10 06:01:49.941: E/AndroidRuntime(10653): FATAL EXCEPTION: main
02-10 06:01:49.941: E/AndroidRuntime(10653): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.textshottranslator/com.example.textshottranslator.OptionsActivity}: java.lang.NullPointerException
02-10 06:01:49.941: E/AndroidRuntime(10653):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1976)
02-10 06:01:49.941: E/AndroidRuntime(10653):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2001)
02-10 06:01:49.941: E/AndroidRuntime(10653):    at android.app.ActivityThread.access$600(ActivityThread.java:130)
02-10 06:01:49.941: E/AndroidRuntime(10653):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1163)
02-10 06:01:49.941: E/AndroidRuntime(10653):    at android.os.Handler.dispatchMessage(Handler.java:99)
02-10 06:01:49.941: E/AndroidRuntime(10653):    at android.os.Looper.loop(Looper.java:137)
02-10 06:01:49.941: E/AndroidRuntime(10653):    at android.app.ActivityThread.main(ActivityThread.java:4444)
02-10 06:01:49.941: E/AndroidRuntime(10653):    at java.lang.reflect.Method.invokeNative(Native Method)
02-10 06:01:49.941: E/AndroidRuntime(10653):    at java.lang.reflect.Method.invoke(Method.java:511)
02-10 06:01:49.941: E/AndroidRuntime(10653):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
02-10 06:01:49.941: E/AndroidRuntime(10653):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
02-10 06:01:49.941: E/AndroidRuntime(10653):    at dalvik.system.NativeStart.main(Native Method)
02-10 06:01:49.941: E/AndroidRuntime(10653): Caused by: java.lang.NullPointerException
02-10 06:01:49.941: E/AndroidRuntime(10653):    at org.json.JSONTokener.nextCleanInternal(JSONTokener.java:116)
02-10 06:01:49.941: E/AndroidRuntime(10653):    at org.json.JSONTokener.nextValue(JSONTokener.java:94)
02-10 06:01:49.941: E/AndroidRuntime(10653):    at org.json.JSONObject.(JSONObject.java:154)
02-10 06:01:49.941: E/AndroidRuntime(10653):    at org.json.JSONObject.(JSONObject.java:171)
02-10 06:01:49.941: E/AndroidRuntime(10653):    at com.example.textshottranslator.GoogleRequest.getLanguagesFromJSONObject(GoogleRequest.java:99)
02-10 06:01:49.941: E/AndroidRuntime(10653):    at com.example.textshottranslator.OptionsActivity.updateSpinners(OptionsActivity.java:76)
02-10 06:01:49.941: E/AndroidRuntime(10653):    at com.example.textshottranslator.OptionsActivity.onCreate(OptionsActivity.java:27)
02-10 06:01:49.941: E/AndroidRuntime(10653):    at android.app.Activity.performCreate(Activity.java:4494)
02-10 06:01:49.941: E/AndroidRuntime(10653):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
02-10 06:01:49.941: E/AndroidRuntime(10653):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1940)
02-10 06:01:49.941: E/AndroidRuntime(10653):    ... 11 more 
```

当 updateSpinners() 方法被修改为这样时，LogCat 看起来像这样：

```
private void updateSpinners(){
    GoogleRequest gr = new GoogleRequest();
    String result = gr.requestLanguages("en");
    languages = gr.getLanguagesFromJSONObject(result);
    sourceSpinner.setAdapter(initializeSpinner(languages));
    destinationSpinner.setAdapter(initializeSpinner(languages));
    try {

    } catch (NullPointerException e) {
        // TODO: handle exception
        Toast.makeText(this, "THIS IS IRRELEVANT NOW ...", Toast.LENGTH_SHORT).show();
    }   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T04:30:53.133

也许您的问题是因为您没有使用 a`AsyncTask`来获取该数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T06:16:34.043

使用 AsyncTask 这里有一个链接[http://steveliles.github.com/android_s_asynctask.html](http://steveliles.github.com/android_s_asynctask.html)可能这可以帮助你解决你的问题

# json - play+scala中的数据聚合和for循环

> ID：14794511
> 
> 赞同：0
> 
> 时间：2013-02-10T03:49:13.820
> 
> 标签：json, scala, playframework, playframework-2.0

我很新玩！和 scala，我正在尝试解析由 json 对象组成的数组。我需要遍历数组，计算每个对象中特定出现的次数，将它们相加并将它们传递给 html 索引。这是我的控制器粗略的样子：

```
object Application extends Controller {

def stringArray=<array of strings, each a JSValue>

    var counter=0

for(i<-0 to stringArray.length){
    counter+=(((Json.parse(stringArray(i))\"some_element").toString()).count(y=>y=="some_keyword"))
}

def index = Action {
    Ok(views.html.index(counter))
}
} 
```

但实际上没有办法在应用程序控制器中实现 for 循环。我试图将数组传递给索引，但其他 scala 函数（如 Json.parse 和 count）似乎无法被 html 模板识别。什么是可能的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:29:20.230

那这个呢？

```
object Application extends Controller {

    val stringArray=<array of strings, each a JSValue>

    def index = Action {
        var counter = 0
        for(s<-stringArray){
            counter+=(((Json.parse(s)\"some_element").toString()).count(y=>y=="some_keyword"))
        }
        Ok(views.html.index(counter))
    }
} 
```

我还没有检查循环的内部部分，但您似乎对放置循环的位置感到困惑。也许这也可以重写为 fold 以获得更好的代码（据我所知，for 循环在 Scala 中通常被认为不好；））。要使用模板中的功能，您可能需要先导入它们。在模板的第一行之后，您声明模板函数头，您可以轻松导入诸如：`@import java.util.Date`. 只要确保你导入了正确的类，你也应该能够在模板中使用这些函数。

最后一点：`1 to 3`给`{1, 2, 3}`，所以你通常想要`1 until array.length`，因为`1 until 3`给`{1, 2}`。通常您可以使用`for (element <- array)`更容易查看的符号。

# java - 为 querydsl-maven-plugin 设置命名策略

> ID：14794513
> 
> 赞同：1
> 
> 时间：2013-02-10T03:49:29.300
> 
> 标签：java, mysql, maven, querydsl

我正在使用`querydsl-maven-plugin`为 Maven 中的一堆 MySQL 表生成实体和 bean。

有没有办法告诉插件生成，比如说，`OriginalNamingStrategy`而不是`DefaultNamingStrategy`？

当前的评论似乎表明只有以下选项。我似乎无法在源代码中找到任何设置 a`NamingStrategy`但如果可能的话将不胜感激。

```
<!--
    optional elements :      
    * jdbcUser = connection user
    * jdbcPassword = connection password
    * namePrefix = name prefix for generated query classes (default: Q)
    * schemaPattern = ant style pattern to restrict code generation to certain schemas (default: null)
    * tableNamePattern = ant style pattern to restrict code generation to certain tables (default: null)
    * exportBeans = set to true to generate beans as well, see section 2.14.13 (default: false)
    * innerClassesForKeys = set to true to generate inner classes for keys (default: false)
    * validationAnnotations = set to false to disable serialization of validation annotations (default: true)
--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T04:09:29.150

在检查了这段代码之后，我意识到你可以只设置`namingStrategyClass`属性（它没有记录。）

[https://github.com/mysema/querydsl/blob/master/querydsl-maven-plugin/src/main/java/com/mysema/query/maven/AbstractMetaDataExportMojo.java](https://github.com/mysema/querydsl/blob/master/querydsl-maven-plugin/src/main/java/com/mysema/query/maven/AbstractMetaDataExportMojo.java)

# objective-c - 点击 UIScrollView 时 UIImageView 自动调整大小

> ID：14794515
> 
> 赞同：1
> 
> 时间：2013-02-10T03:49:38.903
> 
> 标签：objective-c, uiscrollview, uiimageview

好的，所以我在 UIScrollView 中有一个 UIImageView。我将图像动态加载到 UIImageView 中，然后手动调整它的大小。到目前为止，一切都很好。但是，如果我触摸 UIScroll 滚动视图（包含调整大小的元素），一切都会调整回原始大小。以防万一，这是调整图像大小的代码：

```
 /**
* Proportionally resize and position doodle
*/
- (void)resizeDoodle:(CGFloat)height {

self.doodleImageView.frame = CGRectMake(0, 0, self.view.bounds.size.width, height);
[self.scrollView setContentSize:self.doodleImageView.frame.size];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T04:16:47.943

```
self.Imageview.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight; 
```

这条线保持图像适合

```
self.Imageview.contentMode = UIViewContentModeScaleAspectFit; 
```

编写上面的代码以限制您的问题。

**另一种方式：**

**对特定的高度**和**宽度**（*您想要*的）使用以下方法和**图像**

```
+ (UIImage*)resizeImage:(UIImage*)image withWidth:(int)width withHeight:(int)height
{
    CGSize newSize = CGSizeMake(width, height);
    float widthRatio = newSize.width/image.size.width;
    float heightRatio = newSize.height/image.size.height;

    if(widthRatio > heightRatio)
    {
        newSize=CGSizeMake(image.size.width*heightRatio,image.size.height*heightRatio);
    }
    else
    {
        newSize=CGSizeMake(image.size.width*widthRatio,image.size.height*widthRatio);
    }

    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
} 
```

此方法返回**NewImage**，具有您指定的特定大小:)
此代码可能对您有帮助:)

# ios - 将 id 从 Parse 表视图传递到详细视图

> ID：14794522
> 
> 赞同：1
> 
> 时间：2013-02-10T03:50:43.813
> 
> 标签：ios, objective-c

（我知道以前有人问过这个问题，不幸的是，我在试图解决这个问题时查看并尝试过的所有相关 StackOverflow 答案都没有对我有用。任何帮助将不胜感激。）

我正在构建一个简单的新闻应用程序。打开屏幕使用 Parse 的 API 抓取最新的新闻条目。

![第一个屏幕](../Images/a818492bd7bf3e7eefb34576b302ce6d.png)

当你点击菜单按钮时，你会得到过去新闻日的 UITableView：

![滑动菜单](../Images/8e94484c730c1962d2c18ad5186f2892.png)

我希望能够将所选 Parse 表格单元格中的 id 传递回主视图。

我将 ECSlidingViewController 用于滑动菜单，将 Storyboard 用于各种屏幕：

![故事板](../Images/7ab628acb648394d2accefb04ea2cbe1.png)

但是由于我使用 ECSlidingViewController 的方式，我无法弄清楚如何通过 segues 传递数据，因为我本来可以这样做，所以我试图通过带有自定义 init 的视图控制器传递它。

这是我的 MainViewController.h 代码：

```
@interface MainViewController : UIViewController

@property (nonatomic) NSString *detailId;

- (id)initWithDetailId:(NSString*)theId;

@end 
```

这是我`didSelectRowAtIndexPath`在 MenuViewController.m 中的代码：

```
MainViewController *mainVC = [[MainViewController alloc] initWithDetailId:@"test"];
[self.navigationController pushViewController:mainVC animated:YES]; 
```

这是 MainViewController.m 的`initWithDetailId`：

```
- (id)initWithDetailId:(NSString*)theId
{
    NSLog(@"initWithDetailId");
    self = [super initWithNibName:nil bundle:nil];
    if (self) {
        detailId = theId;
    }
    return self;
} 
```

这是 MainViewController.m 的`viewDidLoad`：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"detailId equals: %@", self.detailId);
} 
```

但是我从 NSLog 得到的只是“detailId 等于：（null）”。我在这里做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T06:24:16.750

你忘了放在`self.`前面`detailId = theId;`

```
self.detailId = theId; 
```

那是

```
- (id)initWithDetailId:(NSString*)theId
{
    NSLog(@"initWithDetailId");
    self = [super initWithNibName:nil bundle:nil];
    if (self) {
    self.detailId = theId;
    }
    return self;
} 
```

还有另一种方法可以做到这一点：

```
MainViewController *mainVC = [self.storyBoard instantiateViewControllerWithIdentifier:@"yourIdentifier"];
mainVc.detailId=@"test";
[self.navigationController pushViewController:mainVC animated:YES]; 
```

# java - 编译器警告“使用了增量值（bar++）的值”——这是否意味着行为发生了变化？

> ID：14794523
> 
> 赞同：4
> 
> 时间：2013-02-10T03:50:58.427
> 
> 标签：java, postfix-operator

当我编译以下代码时，我收到了来自编译器的警告，提示“使用了增量值 (bar++) 的值”

```
int foo = 1, bar = 2;
return foo + bar++; // foo and bar are ints 
```

所以这意味着返回的值将是`4`，而不是`3`，这令人惊讶，因为我期待`3`

它对所有java编译器都是通用的吗？或者只是我使用的（NetBeans）做一些不同的事情？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T03:52:51.713

那段代码说“ `return foo + bar`”，然后是“ `increment bar`”。所以， " `foo + bar`" 是`3`，然后 bar 递增，但函数已经返回，所以没用。

`variable++`用于后增量，意思是“在此表达式中使用完变量后递增变量。

如果您希望变量在使用前递增，请使用预递增运算符`++variable`.

据我所知，所有实现前/后增量运算符的语言都是这样做的（尽管有些语言在处理更复杂的表达式方面存在一些歧义）。

```
% cat Test.java
public class Test {
  public static void main(String[] args) {
    System.out.println("The result is: " + runTest() + "\n");
  }
  public static int runTest() {
    int foo = 1, bar = 2;
    return foo + bar++;
  }
}
% javac Test.java
% java Test
The result is: 3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T03:59:31.227

1) 所有 Java 编译器都会为您的代码生成相同的字节码，结果将是 3。只需测试它。

2) 至于警告，它的意思是`return foo + bar++`；`return foo + bar`与;相同

# objective-c - NSSecureTextField stringValue 始终为“（空）”

> ID：14794524
> 
> 赞同：1
> 
> 时间：2013-02-10T03:51:25.260
> 
> 标签：objective-c, cocoa, nstextfield

我有一个带有属性的 User 类，`myUsername`并且`myPassword`我希望 UI 中的文本字段将字符串值传递给调用的 AppDelegate 方法`link`，该方法执行一些后台 NSTask 的操作，并传递给`setUserCredentials`用户对象的方法。

但是，使用 NSSecureTextField 检索密码，然后将其传递给 NSLog 以验证始终打印（空）到屏幕？NSTextField 工作正常。

```
[self.activeUser setMyUsername:self.myUsernameTextField.stringValue];
[self.activeUser setMyPassword:self.myPasswordSecureTextField.stringValue];
NSLog(@"Username: %@", self.activeUser.myUsername);
NSLog(@"Password: %@", self.activeUser.myPassword); 
```

印刷：

```
2013-02-09 23:34:58.491 LabSync[25215:303] Username: jon
2013-02-09 23:34:58.491 LabSync[25215:303] Password: (null) 
```

对 Obj-C、Cocoa 和 XCode 来说是全新的。在文档中找不到任何内容或对此进行搜索。安全字段应该与常规字段相同，只是它可以防止复制、剪切和粘贴以及查看字符串（或者我读过）。

如何获取密码值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T13:16:59.113

Interface Builder 中存在一个问题，有时插座无法正确连接，通常会导致您的插座为零。如果您要在 nil 对象上调用 stringValue，它只会返回 nil（在控制台中显示为 (null)）。

您可能需要首先检查插座是否在应用程序中注册，您可以通过以下方式进行：

```
NSLog(@"password field = %@", self.myPasswordSecureTextField); 
```

将其放置在视图完成加载后将执行的某个位置。如果它显示为 null，则确保您已将文本字段实际连接到您的插座。如果你有，然后尝试建立一个新的插座，或重命名现有的插座，看看会发生什么。

我很欣赏最后一个建议可能看起来有点奇怪，如果是正确的奇怪的话，但我已经多次看到这个问题，并且之前已经修复过。

希望有些帮助。

# python - OpenCV：无法获得正确的欧拉角以校准单个相机

> ID：14794531
> 
> 赞同：0
> 
> 时间：2013-02-10T03:52:18.963
> 
> 标签：python, opencv, camera-calibration

几周前我发布了因为我在校准相机时无法使用 python 在 opencv 中获得正确的平移向量（[Python Opencv SolvePnP 产生错误的平移向量](https://stackoverflow.com/questions/14515200/python-opencv-solvepnp-yields-wrong-translation-vector)）虽然，这已经解决了，但我没有遇到正确的旋转问题对于我的相机。奇怪的是平移向量是正确的。是否需要对 solvepnp 的 rvecs 输出做一些事情来获得相机在全局坐标中的旋转？我尝试使用 cv2.rodrigues 将 rvecs 转换为旋转矩阵，然后使用 cv2.decomposeProjectionMatrix 将其转换为欧拉角。

再次非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T22:58:01.353

我相信 Blender 中相机的默认旋转与 opencv 不同，这会导致问题。我解决了这个问题，它似乎工作

# jquery - jQuery移动嵌套可折叠

> ID：14794533
> 
> 赞同：0
> 
> 时间：2013-02-10T03:52:36.613
> 
> 标签：jquery, mobile

我正在向可折叠的 div 添加动态内容。添加时，div被折叠，但添加的内容在div之外。在 chrome 中使用 javascript 控制台，我看到 div 在添加新内容之前已关闭。代码如下：'

```
<div data-role="collapsible" id="sendmessTMlist" data-collapsed="true">
        <h3>Select A Message</h3>
                <div data-role="collapsible" id="mymessages">
                <h3>My Messages</h3>
                <div data-role="content">My Message1<BR>
                <input data-inline="true" data-role="button" id="messageid" type="button" value="Insert" class="buttlink" />
                </div>
                </cfoutput>
           </div> 
```

这是我用来添加内容的 jquery 代码：

```
$("#mymessages").append('<div data-role="content">'+data.message+'<BR><input data-inline="true" data-role="button" id="'+data.message+'" type="button" value="Insert" class="buttlink" /></div>').trigger("create"); 
```

`$("Selector").find('div[data-role=collapsible]').collapsible();`

我尝试了许多不同的代码组合，以上是最后一关剩下的内容。

我的 javascript 中缺少什么以将其放入可折叠文件中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T05:46:01.967

简而言之，问题是您将内容附加到正确的容器之外。

事实上，jQM 在增强标记的过程中插入了一个`div`带有`ui-collapsible-content`放置内容的类的类。

鉴于您有这个初始标记

```
<div data-role="collapsible" id="mymessages" data-collapsed="false" data-theme="c" data-content-theme="c">
    <h3>My Messages</h3>
</div> 
```

在 jQM 增强之后，它看起来就是这样。

```
<div data-role="collapsible" id="mymessages" data-collapsed="false" data-theme="c" data-content-theme="c" class="ui-collapsible ui-collapsible-inset">
    <h3 class="ui-collapsible-heading">
    <a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-up-c ui-fullsize ui-btn-icon-left ui-corner-top" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-icon="plus" data-iconpos="left" data-theme="c" data-mini="false"><span class="ui-btn-inner ui-corner-top"><span class="ui-btn-text">My Messages<span class="ui-collapsible-heading-status"> click to collapse contents</span></span><span class="ui-icon ui-icon-shadow ui-icon-minus">&nbsp;</span></span></a>
    </h3>
    <div class="ui-collapsible-content ui-body-c ui-corner-bottom" aria-hidden="false">
    </div>
</div> 
```

看到新添加的了`div`吗？

话虽如此，您需要像这样添加和刷新您的内容：

```
$("#mymessages div.ui-collapsible-content").append(html);
$("#mymessages").trigger("create"); 
```

这是为您工作的[jsFiddle](http://jsfiddle.net/pmatseykanets/a5Fyk/)。

*是的，您在提供的标记中有错字。你应该有* `</div>`* 而不是 * `</cfoutput>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-31T17:07:19.773

您需要将它插入到最后一个 div 子元素（由 JQM 动态添加的那个）中，而不是附加它，如下所示：

```
var data = '<div data-role="content">'+data.message+'<BR><input data-inline="true" data-role="button" id="'+data.message+'" type="button" value="Insert" class="buttlink" /></div>';
$('#sendmessTMlist div:last-child').html(data).trigger("create"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T05:37:41.110

可能是`<BR>`动态添加的消息之后的标签导致它。结束标签`</cfoutput>`看起来也有点不合适。

# c - C在函数中传递一个int？

> ID：14794537
> 
> 赞同：-3
> 
> 时间：2013-02-10T03:53:08.203
> 
> 标签：c

在函数中传递 int 时，我得到不正确的结果：

```
int recruit(int var1, int re_unit, char *char_buffer, int var2) {
 int run = 1;
 int int_buffer = 0;
 printf("Test1 %d\n", var1);
 printf("Test2 %d\n", var2);
 ...
}
void some_other_function(structs, struct1[]) {
 int var1 = 0;
 int var2 = 0;
 int re_unit = 0;
 char char_buffer[] = "What ever";

 //strucs[1].first = 50 this is done in a other section

 var1 = strucs1[1].first;
 var2 = strucs1[1].first;

 recruit(var1, re_unit, char_buffer, var2);
  // Ind the full verstion of the program this function is called 2 times:
  // The first time nothing is worng, how ever the second time, the result
  // is as explaned below

  //strucs[2].first = 50 // this is done in a other section
  var1 = struct1[2].first;
  var2 = struct1[2].first;

 recruit(var1, re_unit, char_buffer, var2);

}

int main(void) {
 ...
} 
```

现在结果是第一次Test1打印：2684032，Test2打印：50

第二次测试 1 打印：2684032 和测试 2 打印：50；

他们都应该打印 50。

我已经测试了 struct1[1].first 的值是 50，然后才用于函数招募。

有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T03:58:20.697

C 函数中未初始化的值不是 0，它们只是那个特定时刻内存的垃圾。

```
#include <stdio.h>
int main()
{
    int a;
    printf("%i\n", a);
    return 0;
} 
```

那应该证明这个想法......

希望我正确地解释了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T04:03:11.127

请将此声明更改`int recruit(int lvl, int re_unit, char *char_buffer, int u_lvl, int lvl2)`为`int recruit(int lvl, int re_unit, char *char_buffer, int lvl, int lvl2)`. 由于未初始化的变量，您正在观察不正确的值。

# nhibernate - Nhibernate：如果在没有开始事务的情况下调用 Save() 是否有可能引发异常

> ID：14794538
> 
> 赞同：2
> 
> 时间：2013-02-10T03:53:27.973
> 
> 标签：nhibernate

我想知道如果一段代码试图在不开始事务的情况下将对象保存到数据库中，我们是否可以扩展 NIBerate 以引发异常？由于开始事务是调用 Save() 正常工作的必要条件，因此我看不到程序员在不首先开始事务的情况下调用 Save()。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T04:34:06.560

解决方案不在异常抛出中。这是为了让我们（项目的开发人员）知道我们在做*什么*和*在哪里*做

1）**项目共享方法**。首先，向团队解释应用程序的架构是如何工作的。现在，所有团队成员都应该使用[Unit of Work](http://msdn.microsoft.com/en-us/magazine/dd882510.aspx)或[Session per Request](http://nhforge.org/blogs/nhibernate/archive/2011/03/03/effective-nhibernate-session-management-for-web-apps.aspx)模式。

2)**冲洗模式**。其次，解释一下Session对象的概念。`ISession. Save()`or`Update()`远离 SQL 执行`INSERT`or `UPDATE`。什么是[ISession.Flush()](http://nhforge.org/doc/nh/en/index.html#manipulatingdata-flushing)。并且（基于第一步）我们可以决定*Flush()*何时发生。

我建议将 FlushMode 设置为 on`Commit`或`None`（使用显式调用）。然后，如果团队成员想要执行任何**写入**命令 - 一个标准的地方，一种常见的方式（用于项目）将指导 hin/她。

调用`Session.Flush()`应该/将/必须包含在`transaction`.

# android - 在 Android 媒体播放器中流式传输

> ID：14794539
> 
> 赞同：0
> 
> 时间：2013-02-10T03:53:40.937
> 
> 标签：android, android-mediaplayer, media

我正在尝试开发一个 Android 应用程序来从 URL 流式传输视频。但我收到以下错误。

```
@Override
public void onClick(View v) {

    Log.d("TAG", "on Click");
    System.out.println("on Click");
    // TODO Auto-generated method stub
    if(v==play)
    {
         if( mp.isPlaying()==false && mp!=null)
         {

                  mp.start();
         }
    }
    if(v==stop)
    {
        mp.stop();
        mp.release();
        mp=null;
    }
    if(v==sd)
    {
        Log.d("TAG", "Loading the video file");
        //path="C:\\Users\\Public\\Videos\\Sample Videos\\Wildlife.wmv";
        //path="http://10.17.68.18:8080/stream";
        path = "http://www.youtube.com/watch?v=wBGIoxvEakw";

        try{

            mp=new MediaPlayer();
            mp.reset();
            mp.setDataSource(URLEncoder.encode(path,"UTF-8"));
            mp.prepareAsync();
            mp.setOnPreparedListener(new OnPreparedListener(){
                public void onPrepared(MediaPlayer mp) {
                    Log.d("TAG", "Playing the video file");
                    mp.start();
                }
            });

            //mp.start();
        }
        catch( Exception e)
        {
            System.out.println(e);
            Toast.makeText(this,e.toString(),Toast.LENGTH_LONG)
            .show();
        }
    }

} 
```

错误日志：

```
02-09 20:44:11.746: W/MediaPlayer(2807): info/warning (1, 26)
02-09 20:44:11.746: E/MediaPlayer(2807): error (-4, -4)
02-09 20:44:11.777: I/MediaPlayer(2807): Info (1,26)
02-09 20:44:11.785: E/MediaPlayer(2807): Error (-4,-4)
02-09 20:49:50.815: W/KeyCharacterMap(2807): No keyboard for id 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T04:06:48.293

鉴于 Youtube URL 不提供媒体流，仅提供 youtube 网页。

如果您想在 Android 平台播放 youtube 内容，请考虑使用 Youtube Android API。

[https://developers.google.com/youtube/android/player/](https://developers.google.com/youtube/android/player/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T02:24:51.020

据我所知，setDataSource(String) 将导致流式 URL 异常。它仅适用于本地文件。

您应该使用 setDataSource(Context , Uri) 流式传输 url。

# iphone - 以特定顺序排序 NSArray 的 NSString

> ID：14794545
> 
> 赞同：3
> 
> 时间：2013-02-10T03:56:52.907
> 
> 标签：iphone, ios, objective-c, ipad

我在 NSArray 中有一个 NSString，我想根据它的重要性来排序这个字符串/字段。所以说字符串是B，H，A，Q，Z，L，M，O。

我希望它始终按 A、Q、Z、B、H、O、L、M 排序。这是一组预定义的规则。我该怎么做呢？这可以使用 NSSortDescriptor 完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T04:03:10.070

简短的回答： **是的！**

这就是如何...

由于您需要了解有关您的值的两条信息（重要性和值本身），因此您应该使用这两条重要信息创建一个对象，然后将其存储在一个类似于存储字符串的方式的数组中。如果您想在一段时间后轻松更改“重要性”，这将变得很简单：

```
@interface MyObject : NSObject
@property (nonatomic, readwrite) NSInteger sortOrder;
@property (nonatomic, retain) NSString *value;
@end

@implementation MyObject
@synthesize sortOrder;
@synthesize value;
-(NSString *)description
{
   //...so I can see the values in console should I NSLog() it
   return [NSString stringWithFormat:@"sortOrder=%i, value=%@", self.sortOrder, self.value];
}
-(void)dealloc
{
    self.value = nil;
    [super dealloc];
}
@end 
```

将您的对象添加到数组中。然后排序：

```
NSMutableArray *myArrayOfObjects = [NSMutableArray array];

//Add your objects
MyObject *obj = [[[MyObject alloc] init] autorelease];
obj.sortOrder = 1;
obj.value = @"A";
[myArrayOfObjects addObject:obj];

obj = [[[MyObject alloc] init] autorelease];
obj.sortOrder = 2;
obj.value = @"Q";
[myArrayOfObjects addObject:obj];

//Sort the objects according to importance (sortOrder in this case)
NSSortDescriptor *sortDescriptor = [[[NSSortDescriptor alloc] initWithKey:@"sortOrder" ascending:YES] autorelease];
NSArray *sortedArray = [myArrayOfObjects sortedArrayUsingDescriptors:[NSArray arrayWithObject:sortDescriptor]];
NSLog(sortedArray);  //<--See for yourself that they are sorted 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T04:01:59.873

NSArray 有几个排序函数。您可能会考虑的三个是：

`- (NSArray *)sortedArrayUsingComparator:(NSComparator)cmptr`

`- (NSArray *)sortedArrayUsingSelector:(SEL)comparator`

`- (NSArray *)sortedArrayUsingFunction:(NSInteger (*)(id, id, void *))comparator context:(void *)context`

我想你可能会发现第二个基于选择器的比较器最容易上手。请参阅此处的文档：

[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/sortedArrayUsingSelector](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/sortedArrayUsingSelector)：

编辑：

我认为使用 NSSortDescriptor 可能有点矫枉过正，但这里有一篇描述它的好帖子：

[如何使用 sortedArrayUsingDescriptors 对 NSMutableArray 进行排序？](https://stackoverflow.com/questions/1844031/how-to-sort-nsmutablearray-using-sortedarrayusingdescriptors)

# r - 从函数返回是否会创建额外的副本？

> ID：14794546
> 
> 赞同：4
> 
> 时间：2013-02-10T03:56:56.710
> 
> 标签：r

在下面的函数中：

```
DownloadRawData <- function(fileurl, filename)
{
    download.file(fileurl, destfile=filename)
    dataset = read.csv(filename)
    return(dataset)
}
myDataSet <- downloadRawData(myurl, myname) 
```

我们是要在函数返回时在内存中分配 2 个数据集副本，还是通过引用分配。

这个线程[R, deep vs. shallow copies, pass by reference](https://stackoverflow.com/questions/10655287/r-deep-vs-shallow-copies-pass-by-reference)给出了一些关于它的提示，但对我来说并不是那么清楚。

另一个类似的例子是：

```
f <- function(n)
{
    v <- c(1:n)
    v <- sample(v,n)
    return(v)
}
myV <- f(10000) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T08:49:50.327

您可以通过查看R 源代码中的[src/main/eval.c](http://svn.r-project.org/R/trunk/src/main/eval.c)`return()`来了解内部实现的方式。它是函数，它也调用. 只有 SEXP 被传递，这些[是指针](http://cran.r-project.org/doc/manuals/R-ints.html#SEXPs)。`do_return()``eval()`

所以答案是，不会创建返回值的额外副本。它基本上被优化了。

# c++ - main() 函数无法识别

> ID：14794547
> 
> 赞同：0
> 
> 时间：2013-02-10T03:56:58.897
> 
> 标签：c++, compiler-errors, main, language-lawyer, entry-point

我正在为我正在上课的课程编写代码。我无法在不将项目分数归零的情况下发布所有代码，但这里是我的驱动程序的缩写代码：

```
 #pragma once
    #include <iostream>
    #include <fstream>
    #include <string>
    #include "Stack.h"

    using namespace std;

    namespace jack
    {
        int high(char a)
        {
            // My Code
        };

        bool isSameOrHigher(char top, char cur)
        {
            // My Code
        };

        int main()
        {
            // My Code
        };
    }; 
```

由于某种原因，当我编译此代码时我无法弄清楚我收到以下错误：

链接：致命错误 LNK1561：必须定义入口点

现在，据我所知，只有当我没有 main 函数时才会发生此错误，您可以看到我确实有。我尝试将代码从该文件复制到另一个项目中，我尝试将我的主要功能单独分离到另一个 cpp 文件中（这导致更多错误并且没有修复入口点错误），我尝试重新- 安装 Visual C++ express 并完全从头开始。我和我的老师在 main() 之前检查了这个文件中的所有代码（以及我编写和包含的 Stack.h 文件中的所有代码），并且没有丢失任何括号、分号或任何其他标点符号。我什至不知道还能尝试什么。想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T03:58:57.510

您需要移出`main`任何命名空间。

对于任何关心标准内容的人（§3.6.1/1）：

> 一个程序应包含一个名为 的**全局**函数`main`，它是程序的指定开始。

编辑：对于那些还想知道“全局”含义的人（C++03 中的第 3.3.5/3 节，C++11 中几乎相同的措辞的第 3.3.6/3 节）：

> 翻译单元的最外层声明区域也是一个命名空间，称为*全局命名空间*。在全局命名空间中声明的名称具有*全局命名空间范围*（也称为*全局范围*）。[...] 具有全局命名空间范围的名称被称为*global*。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-10T03:59:27.380

把你的名字带`main`出命名空间

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-10T03:59:02.647

将`main`函数移到命名空间之外。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-10T03:59:04.567

将您的`main`函数从命名空间中取出。从技术上讲，您`main`实际上`jack::main`是在名称空间内。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-10T04:04:07.880

您应该`main()`只在 中定义`global namespace`，而不是在任何其他`namespace`s 中。

# java - Tess4J：如何使用 ResultIterator？

> ID：14794551
> 
> 赞同：2
> 
> 时间：2013-02-10T03:57:41.993
> 
> 标签：java, ocr, tesseract

我正在将我的 OCR 应用程序从 c++ 转换为 java。使用 Tess4J 我想获得每个单词的边界框。但是，显然 TessResultIterator 没有提供任何方法。所以我想是否有可能以某种方式获取这些数据？

这是我当前的代码：

```
TessBaseAPI api = TessAPI1.TessBaseAPICreate();
TessAPI1.TessBaseAPIInit3(api, path, lang);
TessAPI1.TessBaseAPISetPageSegMode(api, TessAPI1.TessPageSegMode.PSM_AUTO);
TessAPI1.TessBaseAPISetImage(api, img, w, h, bpp, bpp*w);
TessAPI1.TessBaseAPIGetUTF8Text(api);
TessResultIterator it = TessAPI1.TessBaseAPIGetIterator(api); 
```

在 c++ 中，我可以这样继续：

```
char* text = it->GetUTF8Text(tesseract::RIL_WORD); 
int left, top, right, bttm;
it->BoundingBox(tesseract::RIL_WORD, &left, &top, &right, &bttm); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T23:58:03.517

你可以试试下面的代码片段吗？我并没有真正彻底地测试它。

```
TessResultIterator ri = TessAPI1.TessBaseAPIGetIterator(api);
TessPageIterator pi = TessAPI1.TessResultIteratorGetPageIterator(ri);
String str = TessAPI1.TessResultIteratorGetUTF8Text(ri, TessPageIteratorLevel.RIL_WORD);
IntBuffer leftB = IntBuffer.allocate(1);
IntBuffer topB = IntBuffer.allocate(1);
IntBuffer rightB = IntBuffer.allocate(1);
IntBuffer bottomB = IntBuffer.allocate(1);
TessAPI1.TessPageIteratorBoundingBox(pi, TessPageIteratorLevel.RIL_WORD, leftB, topB, rightB, bottomB);
int left = leftB.get();
int top = topB.get();
int right = rightB.get();
int bottom = bottomB.get(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-14T11:45:03.410

以下方法取自[Tess4J 的 GitHub 页面](https://github.com/nguyenq/tess4j/blob/master/src/test/java/net/sourceforge/tess4j/TessAPI1Test.java)，它显示了如何迭代输入文档中每个匹配单词的边界框。调整此代码以满足您自己的需要应该很容易，例如，通过使用您自己的 Tesseract 数据目录路径以及您自己的图像文件的路径。

```
public void testResultIterator() throws Exception {
    File tiff = new File(this.testResourcesDataPath, "eurotext.tif");
    BufferedImage image = ImageIO.read(new FileInputStream(tiff));
    ByteBuffer buf = ImageIOHelper.convertImageData(image);
    int bpp = image.getColorModel().getPixelSize();
    int bytespp = bpp / 8;
    int bytespl = (int) Math.ceil(image.getWidth() * bpp / 8.0);
    TessAPI1.TessBaseAPIInit3(handle, datapath, language);
    TessAPI1.TessBaseAPISetPageSegMode(handle, TessPageSegMode.PSM_AUTO);
    TessAPI1.TessBaseAPISetImage(handle, buf, image.getWidth(), image.getHeight(), bytespp, bytespl);
    ETEXT_DESC monitor = new ETEXT_DESC();
    ITessAPI.TimeVal timeout = new ITessAPI.TimeVal();
    timeout.tv_sec = new NativeLong(0L); // time > 0 causes blank ouput
    monitor.end_time = timeout;
    TessAPI1.TessBaseAPIRecognize(handle, monitor);
    TessResultIterator ri = TessAPI1.TessBaseAPIGetIterator(handle);
    TessPageIterator pi = TessAPI1.TessResultIteratorGetPageIterator(ri);
    TessAPI1.TessPageIteratorBegin(pi);
    int level = TessPageIteratorLevel.RIL_WORD;

    do {
        Pointer ptr = TessAPI1.TessResultIteratorGetUTF8Text(ri, level);
        String word = ptr.getString(0);
        TessAPI1.TessDeleteText(ptr);
        float confidence = TessAPI1.TessResultIteratorConfidence(ri, level);
        IntBuffer leftB = IntBuffer.allocate(1);
        IntBuffer topB = IntBuffer.allocate(1);
        IntBuffer rightB = IntBuffer.allocate(1);
        IntBuffer bottomB = IntBuffer.allocate(1);
        TessAPI1.TessPageIteratorBoundingBox(pi, level, leftB, topB, rightB, bottomB);
        int left = leftB.get();
        int top = topB.get();
        int right = rightB.get();
        int bottom = bottomB.get();
        System.out.print(String.format("%s %d %d %d %d %f", word, left, top, right, bottom, confidence));

        IntBuffer boldB = IntBuffer.allocate(1);
        IntBuffer italicB = IntBuffer.allocate(1);
        IntBuffer underlinedB = IntBuffer.allocate(1);
        IntBuffer monospaceB = IntBuffer.allocate(1);
        IntBuffer serifB = IntBuffer.allocate(1);
        IntBuffer smallcapsB = IntBuffer.allocate(1);
        IntBuffer pointSizeB = IntBuffer.allocate(1);
        IntBuffer fontIdB = IntBuffer.allocate(1);
        String fontName = TessAPI1.TessResultIteratorWordFontAttributes(ri, boldB, italicB, underlinedB,
                monospaceB, serifB, smallcapsB, pointSizeB, fontIdB);
        boolean bold = boldB.get() == TRUE;
        boolean italic = italicB.get() == TRUE;
        boolean underlined = underlinedB.get() == TRUE;
        boolean monospace = monospaceB.get() == TRUE;
        boolean serif = serifB.get() == TRUE;
        boolean smallcaps = smallcapsB.get() == TRUE;
        int pointSize = pointSizeB.get();
        int fontId = fontIdB.get();
        System.out.println(String.format("  font: %s, size: %d, font id: %d, bold: %b,"
                + " italic: %b, underlined: %b, monospace: %b, serif: %b, smallcap: %b", fontName, pointSize,
                fontId, bold, italic, underlined, monospace, serif, smallcaps));
    } while (TessAPI1.TessPageIteratorNext(pi, level) == TRUE);
} 
```

上述脚本的输出将是一些行数，每个匹配的单词一行，看起来像这样：

> SOME_WORD 65 60 120 83 96.072098 字体：null，大小：32，字体 id：-1，粗体：false，斜体：false，下划线：false，等宽：false，衬线：false，smallcap：false

匹配单词之后的前四个数字`SOME_WORD`是左、上、右和下坐标。接下来是置信度，以百分比形式给出。然后，还有一些关于文本本身的元数据，包括字体样式信息。

# arrays - Excel VBA - 将一行单元格值传递给数组，然后将该数组粘贴到单元格的相对引用中

> ID：14794556
> 
> 赞同：10
> 
> 时间：2013-02-10T03:58:29.990
> 
> 标签：arrays, excel, vba

使用 Excel (2010) VBA，我试图将恒定范围的单元格（其值重新计算）复制（传递）到数组中。然后我试图将该数组传递给一个新的单元格范围，就在它的正下方。完成此操作后，我想再次将常量范围的新值复制（传递）到数组，并将这些新值传递到直接低于我之前传递的范围的范围。

我知道这段代码很糟糕（我对 VBA 中的数组不熟悉）。

```
Sub ARRAYER()

Dim anARRAY(5) As Variant

Number_of_Sims = 10

For i = 1 To Number_of_Sims
   anARRAY = Range("C4:G4")
   Range("C4").Select
   ActiveCell.Offset(Number_of_Sims, 0).Select
   ActiveCell = anARRAY
   Range("C4").Select
Next

End Sub 
```

我非常感谢您的帮助！

谢谢你。

尊敬，

乔纳森

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-10T04:14:13.037

您在这里的一些事情上略有偏差，因此希望以下内容有所帮助。

首先，您不需要选择范围来访问它们的属性，您只需指定它们的地址等。其次，除非您正在操作范围内的值，否则您实际上不需要将它们设置为变体。如果您确实想操作这些值，则可以省略数组的边界，因为它会在您定义范围时设置。

`Option Explicit`在模块顶部使用强制变量声明也是一种很好的做法。

以下将做你所追求的：

```
Sub ARRAYER()
    Dim Number_of_Sims As Integer, i As Integer

    Number_of_Sims = 10

    For i = 1 To Number_of_Sims
       'Do your calculation here to update C4 to G4
       Range(Cells(4 + i, "C"), Cells(4 + i, "G")).Value = Range("C4:G4").Value
    Next
End Sub 
```

如果您确实想操作数组中的值，请执行以下操作：

```
Sub ARRAYER()
    Dim Number_of_Sims As Integer, i As Integer
    Dim anARRAY as Variant

    Number_of_Sims = 10

    For i = 1 To Number_of_Sims
       'Do your calculation here to update C4 to G4
       anARRAY= Range("C4:G4").Value

       'You can loop through the array and manipulate it here

       Range(Cells(4 + i, "C"), Cells(4 + i, "G")).Value = anARRAY
    Next
End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T04:17:03.923

不需要数组。只需使用这样的东西：

```
Sub ARRAYER()

    Dim Rng As Range
    Dim Number_of_Sims As Long
    Dim i As Long
    Number_of_Sims = 10

    Set Rng = Range("C4:G4")
    For i = 1 To Number_of_Sims
       Rng.Offset(i, 0).Value = Rng.Value
       Worksheets("Sheetname").Calculate   'replacing Sheetname with name of your sheet
    Next

End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T09:00:57.130

由于您将相同的数据复制到所有行，因此您实际上根本不需要循环。试试这个：

```
Sub ARRAYER()
    Dim Number_of_Sims As Long
    Dim rng As Range

    Application.Calculation = xlCalculationManual
    Application.ScreenUpdating = False
    Number_of_Sims = 100000

    Set rng = Range("C4:G4")
    rng.Offset(1, 0).Resize(Number_of_Sims) = rng.Value

    Application.Calculation = xlCalculationAutomatic
    Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-01T11:40:48.007

当我尝试您的代码时，当我想填充数组时出现错误。

您可以尝试像这样填充数组。

```
Sub Testing_Data()
Dim k As Long, S2 As Worksheet, VArray

Application.ScreenUpdating = False
Set S2 = ThisWorkbook.Sheets("Sheet1")
With S2
    VArray = .Range("A1:A" & .Cells(Rows.Count, "A").End(xlUp).Row)
End With
For k = 2 To UBound(VArray, 1)
    S2.Cells(k, "B") = VArray(k, 1) / 100
    S2.Cells(k, "C") = VArray(k, 1) * S2.Cells(k, "B")
Next

End Sub 
```

# assembly - x86 yasm，cmpsb 上的段错误；cmpsb的正确使用？

> ID：14794563
> 
> 赞同：0
> 
> 时间：2013-02-10T03:59:22.957
> 
> 标签：assembly, x86, yasm

作为练习，我正在用 yasm 编写冒泡排序的开头。但是我每次都在下面的最后一条指令中出现段错误，我不明白为什么。

```
 segment .data

arr     db      5,6,2,3,8,1

    segment .text
    global  main 
main:   
    xor ecx, ecx                ; counter
    mov rdx, 6                  ; sizeof(arr)
    cld

_Do:    xor eax, eax            ; set swapped = false

for:
    movzx esi, byte [arr+ecx]
    movzx edi, byte [arr+ecx+1]
    cmpsb                       ; is a[i]>a[i+1]? <--- segfault here every time
    ;jump to swap next, if I could get there 
```

我的理解是 cmpsb 比较 si 和 di 中的字节。为什么要发生段错误？这对我来说一定是非常简单的错误，但我没有看到。通常 cmpsb 用于重复的上下文中，但我认为它也可以在这里工作。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T04:07:32.560

`CMPSB`不比较两个寄存器的内容——这就是正常`CMP`的。相反，它将寄存器视为地址并比较它们指向的两个值。尝试类似：

```
lea esi, byte [arr + ecx]
lea edi, byte [arr + ecx + 1]
cmpsb 
```

# r - 使用 R 测试时间序列中的显着性

> ID：14794568
> 
> 赞同：0
> 
> 时间：2013-02-10T03:59:44.807
> 
> 标签：r, statistics, time-series, anova

给定一个按年查看人口的简化示例时间序列

```
Year<-c(2001,2002,2003,2004,2005,2006)
Pop<-c(1,4,7,9,20,21)
DF<-data.frame(Year,Pop) 
```

就年份之间的变化/哪些年份彼此显着不同而言，测试显着性的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T04:39:11.020

正如@joran 提到的，这实际上是一个统计问题，而不是一个编程问题。[您可以尝试在http://stats.stackexchange.com](http://stats.stackexchange.com)上询问以获得更多的统计专业知识。

然而，简而言之，两种方法立即浮现在脑海中：

1.  如果您将回归线拟合到人口与年份并具有统计上显着的斜率，则表明多年来人口存在总体趋势，即`lm()`在 R 中使用，就像这样`lmPop <- lm(Pop ~ Year,data=DF)`。
2.  您可以将时间段划分为多个块（例如前三年和最后三年），并假设每个块中年份的人口数据都是该块年份平均人口的估计值。这将为您提供每个年份的总体平均值和标准差，这将使您可以进行 t 检验，如下所示`t.test(Pop[1:3],Pop[4:6])`：

这两种方法都存在一些潜在的困难，每种方法的有效性都取决于您正在检查的数据的性质。然而，对于样本数据，第一种方法表明在 95% 的置信水平（斜率系数 p = 0.00214）似乎存在随时间变化的趋势，而第二种方法表明零假设，即在 95% 置信水平上没有差异在 95% 的置信水平下，均值不能被伪造（p = 0.06332）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-10T09:12:43.450

它们彼此之间都有很大的不同。1 与 4 显着不同，4 与 7 显着不同，依此类推。

等等，这不是你的意思吗？嗯，这就是你给我们的所有信息。作为一名统计学家，我不能再做任何事情了。

所以现在你告诉我们一些别的事情。“是否有任何值与直线显着不同，其中 Pop 值的变化是独立的、均值为 0 且方差相同的正态分布值？” 或者其他的东西。

简单地说，只是一堆数字不能成为统计分析的主题。与统计学家合作，您需要就数据模型达成一致，然后统计方法可以回答有关重要性和不确定性的问题。

我认为这通常是非统计学家无法理解的。他们说“这是我的数字，这很重要吗？” - 这通常意味着将它们输入 SPSS 并得到一个 p 值。

[已将此 Q 标记为转移到它所属的 stats.stackexchange.com]

# php - 什么是 javascript 或 jQuery 等价于 Flash/AS3 loadVariablesNum()？

> ID：14794569
> 
> 赞同：0
> 
> 时间：2013-02-10T03:59:48.137
> 
> 标签：php, javascript, html, actionscript-3, flash

我正在将网站上的一些 Flash 转换为 Javascript/HTML——有些部分在服务器上调用 PHP，然后使用 loadVariablesNum() 处理返回的结果——

```
loadVariablesNum("../flash_loadtext.php?id="+_root.curId,0); 
```

服务器返回文本，例如

```
%27Rizzo+Residence%27+by+Desai%2FChia+Architecture%3B+two+Marc+Jacobs%27+fashion+stores+in+London+and+Atlanta+by+Stephan+Jaklitsch+Design%3B+and+th 
```

如何在 javascript (jQuery?) 中处理它以使其对 HTML/CSS 有用？也就是说，什么是等效于 loadVariablesNum() 的 Javascript（jQuery？）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T05:00:04.967

您必须将其“翻译”成 jQuery.ajax() 语法。

看起来从服务器返回的响应以某种方式进行了 URI 编码，因此在成功回调中，您必须对其进行解码才能在页面中使用它。

在 jQuery 中，你的调用会变成这样（非常简化）：

```
$.ajax({
   url : "../flash_loadtext.php?id="+_root.curId,
   dataType : html,
   success : function(data) {
    // do your magic with the returned value here..
   }
}); 
```

# jasper-reports - 如何以这样的格式创建报告？

> ID：14794572
> 
> 赞同：0
> 
> 时间：2013-02-10T04:00:50.047
> 
> 标签：jasper-reports

我在网上搜索了一段时间，但找不到解决方案。

我想将*JasperReports*用于如下格式：

```
--------------------------
Name:
Address:
Phone #
-------------------------
Domain       Total   Price 
www.a.com      100    7500
www.b.com      150    1500
--------------------------
Type         Total   Price
Hosting        350    3500
Surfing        175    2200
-------------------------- 
```

就像如果我需要多个*详细信息*波段，我可以创建多个*详细信息*波段，但我遇到的问题是，我只想显示一次列标题，所以在 (Domain, Total, Price) 的情况下我可以做到通过将它们放在*列标题*带中，但我找不到其他*详细信息*带（类型、总计、价格）的任何运气

任何帮助将不胜感激。

**更新**：数据集以这种方式呈现：

```
 Type    Domain    Total   Count 
 null    www.a.com 200     30 
 null    www.b.com 100     95 
 Hosting null      300     65 
 Surfing null      100     25 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T10:36:24.230

鉴于评论中发布的数据集的结构：

*   基于此表达式创建报表组`$F{domain} == null ? "Type" : "Domain"`
*   在组标题中添加一个带有表达式的文本字段，以及*Total*和*Price*`$F{domain} == null ? "Type" : "Domain"`的 2 个静态文本。
***   在详细信息带中添加这些带有表达式的文本字段：
    *   字段 1：`$F{domain}==null ? $F{type} :$F{domain}`
    *   字段 2：`$F{total}`
    *   字段 3：`$F{count} * $F{total}`*   在组页脚中添加该行**

 **完毕。

假设有 2 个结果集：

*   为每个结果集添加一个子数据集（即`datasetDomains`, `datesetTypes`）
*   添加（*假*）报告组（即带有组表达式`null`）
*   在组标题中添加 3 个*静态文本*字段，其中包含*Domain*、*Total*、*Price*
*   在这些字段下方添加一个*列表*项，其中包含 的字段`datasetDomains`。
*   在列表下方添加一行，使用*Position Type* `Fix Relative To Bottom`对其进行配置。
*   在组页脚中添加 3 个*静态文本*字段，其中包含*Type*、*Total*、*Price*
*   在这些字段下方添加一个*列表*项，其中包含 的字段`datesetTypes`。
*   在列表下方添加一行，使用*Position Type* `Fix Relative To Bottom`对其进行配置。

![在此处输入图像描述](../Images/437bac16b826713075fbcf7205bf7a23.png)

如果您的结果集的结构如下所示，那么事情将是最简单的：

```
Type     Detail         Total  Price
----     ------         -----  -----
Domain   www.a.com      100    7500
Domain   www.b.com      150    1500
Type     Hosting        350    3500
Type     Surfing        175    2200 
```

您可以执行以下操作：

*   根据创建组`type`
*   将组标题带用于标签（而不是列标题带）。**

# python - 在没有管理员权限的情况下安装 rpy2

> ID：14794573
> 
> 赞同：5
> 
> 时间：2013-02-10T04:01:10.070
> 
> 标签：python, r, gcc, rpy2

我在安装 Python 包[rpy2](http://rpy.sourceforge.net/rpy2.html)时遇到问题。我已经将 R 编译为共享库，但我没有管理员权限，所以我尝试安装 rpy2：

```
pip install -user rpy2 
```

但是，我收到以下错误：

> ./rpy/rinterface/_rinterface.c:86:31：致命错误：readline/readline.h：没有这样的文件或目录
> 
> 编译终止。
> 
> 错误：命令“gcc”失败，退出状态为 1

我已经下载`readline`到：

```
/some/path/readline-6.2/ 
```

我可以看到的地方`readline.h`（我也编译`readline`了以防万一）

### 我的问题：

如何使`rpy2`（或 pip）知道此位置`readline.h`以避免标头编译错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T01:44:17.787

您需要实际安装 readline，而不仅仅是下载它，然后使用and指向`rpy2`它。`CFLAGS``LDFLAGS`

试试这个方法。它几乎对我有用 - 我有同样的问题，除了 rpy2 似乎链接到系统 R 而不是我的 homedir 安装的额外皱纹。

首先，我将 readline 下载到`~/src/readline-6.2`，并使用`./configure --prefix=$HOME && make && make install`. （您需要将它安装在某个地方，而不仅仅是下载源代码。）

然后我用

```
CPPFLAGS="-I/usr/local/include -I$HOME/include/" \
LDFLAGS="-L/usr/local/lib64 -L/usr/local/lib -L$HOME/lib64 -L$HOME/lib" \
./configure --prefix=$HOME --enable-BLAS-shlib --enable-R-shlib
make
make install 
```

R 肯定现在正在使用该 readline：

```
$ ldd ~/lib64/R/lib/libR.so | grep readline
libreadline.so.6 => /home/dsutherl/lib/libreadline.so.6 (0x00007f8104207000) 
```

我在家里安装的 Python 也是如此（3.2.3，因为 h5py 还不适用于 3.3）：

```
CFLAGS="-I/usr/local/include -I$HOME/include/" \
LDFLAGS="-L/usr/local/lib64 -L/usr/local/lib -L$HOME/lib64 -L$HOME/lib" \
./configure --prefix=$HOME
make
make install 
```

然后再次：

```
$ ldd ~/lib/python3.2/lib-dynload/readline.cpython-32m.so | grep readline
libreadline.so.6 => /home/dsutherl/lib/libreadline.so.6 (0x00007fbfff5c2000) 
```

然后我下载了 rpy2 源代码并构建了它：

```
CFLAGS="-I/usr/local/include -I$HOME/include/" \
LDFLAGS="-L/usr/local/lib64 -L/usr/local/lib -L$HOME/lib64 -L$HOME/lib" \
python3 setup.py build --r-home $HOME/lib64/R install 
```

这似乎是成功的，并且`ldd`将`.so`s`site-packages/rpy2`链接到右侧`libreadline`……但指向系统`R`，而不是我的，尽管有明确的`--r-home`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-04T11:39:33.503

更简单 ：

```
yum install readline-devel.x86_64 
```

在centos 7上为我运行

对于 debian/ubuntu

```
apt-get install libreadline-dev 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-10T05:06:49.333

这是另一种选择，但您也需要 root 权限... sudo apt-get install libreadline-dev

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-10T04:52:08.390

有时在 linux 中需要 sudo apt-get 升级，以获取新闻库，可能有效

# c# - 确保相同的列表输出不会出现两次

> ID：14794576
> 
> 赞同：-1
> 
> 时间：2013-02-10T04:01:45.367
> 
> 标签：c#

我正在做一种自我测验，您可以在其中添加问题然后自我测验。

我希望能够向您提出所有问题（如果可能，随机提出）。我已经让它有点工作，但它偶尔会错过一些问题或重复它们。

```
public void LoadUp() {
    if(TimeLimit) {
        timer2.Start();
    }

    KeyWords.Clear();
    Hint_Used=false;
    int QuestionCount=correct+incorrect;
    int AnswerCount=Study_Helper.Form1.QuizList.Count;
    Random random=new Random();
    int randomNumber=random.Next(0, Study_Helper.Form1.QuizList.Count);

    if(!Study_Helper.Form1.PreviousQuestions.Contains(randomNumber)) {
        Study_Helper.Form1.PreviousQuestions.Add(randomNumber);
        String raw=Study_Helper.Form1.QuizList[randomNumber].ToString();
        String[] Split=raw.Split(new char[] { '|' });
        Question=Split[0];
        richTextBox1.Text=Question;
        Answer=Split[1];
        Hint=Split[2];
        String[] NewSplit=Split[3].Split(new char[] { ',' });
        int TotalKeywords=0;

        foreach(string s in NewSplit) {
            TotalKeywords++;
        }

        for(int size=0; size<TotalKeywords-1; size++) {
            String KeyWord=NewSplit[size].ToString();
            KeyWords.Add(KeyWord);
        }
    }
    else if(QuestionCount>=AnswerCount) {
        int Total=correct-incorrect;

        if(Total<0) {
            Total=0;
        }

        timer2.Stop();
        Counter=Study_Helper.Form4.Counter;
        Form6 form6=new Form6();
        form6.Show();
        TimeLimit=false;
        MessageBox.Show("Study Questions over! you got "+Total+" in total, that's "+correct+" correct answers!", "Results", MessageBoxButtons.OK, MessageBoxIcon.Information);
        correct=0;
        incorrect=0;
        this.Close();
    }
} 
```

它所做的是将随机数添加到保存它的列表中，并检查是否已经包含它。我觉得我遗漏了一些明显的东西来流畅地完成这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T05:04:44.897

我认为使用`PreviousQuestions`跟踪所有指数会让你自己复杂化。我建议在开始时对索引进行洗牌，所以一旦你用这个方法初始化了一个堆栈，你只需要调用`randomNumbers.Pop()`来获取一个新的随机数。

```
Stack<int> ShuffleNumbers(int count)
{
    IEnumerable<int> range = Enumerable.Range(0, count);
    Random rnd = new Random();
    return new Stack<int>(range.OrderBy(x => rnd.Next()));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T04:55:17.043

最简单的方法是将列表随机化，然后按顺序开始处理。

```
var randomizedList = Study_Helper.Form1.QuizList.OrderBy(a => Guid.NewGuid());

foreach(var question in randomizedList)
{
    //Handle displaying the question.
} 
```

这样做是对列表进行“排序”，但是因为我们每次都给排序器一个新的随机^(1 ，所以它会随机化列表。) `Guid`然后，我们可以将这个加扰的测验用于其余代码。

^(1.这不是一种“安全”的随机方式，因为有人可以对输出进行密码分析以预测问题的顺序，但您并不是在尝试加密安全，您只是在尝试打乱测验问题和这个解决方案已经足够了。有关更多信息，请参阅有关洗牌的[SO question 。](https://stackoverflow.com/questions/14765845/using-random-numbers-to-select-a-item-in-one-list-and-move-it-to-another-list/14765967#14765967))

# asp.net-mvc-3 - viewModel 中的 ICollection 在 Controller (MVC4) 中显示为 Null 而不是 Empty

> ID：14794577
> 
> 赞同：1
> 
> 时间：2013-02-10T04:01:51.027
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

我有以下视图模型：

```
namespace Flashcard.Models
{
    public class CreateCardViewModel
    {
        [HiddenInput(DisplayValue = false)]
        public int SetId { get; set; }

        [Required]
        public ICollection<Side> Sides { get; set; }

    }
} 
```

我对卡控制器使用这个 ViewModel：

```
public class CardController : Controller
    {
        //
        // GET: /Card/

        public ActionResult Create(int setId)
        {
            var model = new CreateCardViewModel();

            var side = new Side() {Content = "Blank Side"};

            model.SetId = setId;
            model.Sides.Add(side);
            return View(model);
        }

    } 
```

但是，当我调用 Create 操作时，我得到一个 nullReferenceException，因为 model.Sides 为 null，这似乎与空不同。我相信我在 ViewModel 中创建了一个空的 ICollection Sides - 为什么它在控制器中为空？

在某些情况下 - 一张卡片可以有一个或多个面。每当创建卡片时，我都会尝试添加一面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T04:05:07.353

您需要启动 a`Collection`并将其分配给对象的属性，如下所示：

```
public class CardController : Controller
{
    //
    // GET: /Card/

    public ActionResult Create(int setId)
    {
        var model = new CreateCardViewModel();

        var side = new Side() {Content = "Blank Side"};

        model.SetId = setId;

        model.Sides = new List<Side>();

        model.Sides.Add(side);
        return View(model);
    }

} 
```

您的收藏为空。制作一个并分配给您的道具。

# flyway - Flyway：从清洁中排除类型

> ID：14794578
> 
> 赞同：1
> 
> 时间：2013-02-10T04:01:59.543
> 
> 标签：flyway

我正在使用带有 PostgreSQL 9.1 数据库的 Flyway API (flyway-core 2.0.3)。应用程序使用的数据库安装了[is 扩展](http://www.postgresql.org/docs/current/static/isn.html)，其中包括多种类型，例如`ean13`. 不幸的是，安装此扩展需要超级用户权限，并且由管理员运行，这导致它创建的类型的所有权属于安装扩展的超级用户。

因为 Flyway 是使用非超级用户帐户运行的（尽管该帐户是数据库所有者），所以在运行期间会产生以下错误`clean`：

```
com.googlecode.flyway.core.api.FlywayException: Error executing statement at line 29: DROP TYPE IF EXISTS "public"."ean13" CASCADE 
```

所以，我的问题是：有没有办法在具有不可修改类型的数据库中使用 Flyway.clean？也许通过从 clean 操作中排除所有类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T09:38:12.513

这是一个已知问题：[https ://github.com/flyway/flyway/issues/100](https://github.com/flyway/flyway/issues/100)

请参与讨论。

# html - 格式化 HTML 表头

> ID：14794580
> 
> 赞同：0
> 
> 时间：2013-02-10T04:02:04.110
> 
> 标签：html, html-table

我正在尝试将表格格式化为如下所示...

基本上我希望“日期”行里面有两列（往返）它们都是日期宽度的 50%……但是当我尝试格式化它时。“To”取所有日期，“From”取所有 Name。他们没有锁定在“日期”下

任何帮助将不胜感激...谢谢![在此处输入图像描述](../Images/391e81ae7ad41355bec1f2985d48e955.png)

```
 <th width="100%">Dates</th><th>Name</th><th>Age</th>
         <tr>
  <tr>
    <td width="50%">To</td>
    <td width="50%">From</td>
  </tr>

</tr> 
```

改变

```
 <table border="1">
                      <tr class="heading"> <td colspan="6">Information</td> </tr >
                   <th width ="15" colspan="2">Dates</th><th> Name</th><th>Age</th>
         <tr>
  <tr>
    <td width="2">From</td>
    <td width="2">To</td>
    <td></td>
    <td></td>  
  </tr>
  <tr>
  <td width="5">
  <input type="text" class="input" name="1fdate" /></td>
     <td width="2">
  <input type="text" class="input" name="1fdate" /></td>

  </tr>

</tr>

                    </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T04:06:32.723

改变

```
<th width="100%">Dates</th> 
```

`colspan`有价值。喜欢

```
<th colspan="2">Dates</th> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T04:20:48.310

我希望这是你需要的。您使用`colspan`and`rowspan`来合并单元格。当您`colspan`在日期单元格中设置为“2”时，它将跨越具有两个单元格（或列）的行。并且您还将`rowspan`日期旁边的单元格设置为“2”，以便它们跨越整个日期部分所采用的行。

```
<table width="600" border="0">
  <tr>
    <th width="200" colspan="2" scope="col">Date</th>
    <th width="200" rowspan="2" scope="col">Name</th>
    <th width="200" rowspan="2" scope="col">Age</th>
  </tr>
  <tr>
    <th width="100">To</th>
    <th width="100">From</th>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T04:06:09.870

用下面替换第一行

```
 <th width="100%" colspan="2">Dates</th><th>Name</th><th>Age</th> 
```

# java - 如何从微调器的项目中调用活动

> ID：14794583
> 
> 赞同：0
> 
> 时间：2013-02-10T04:02:58.937
> 
> 标签：java, android, android-spinner

我有一个由微调器和提交按钮组成的页面。我想要实现的是当用户在列表中选择一个项目并单击提交时，它应该将他带到另一个具有 web 视图的布局。微调器中的每个项目都应在布局中打开不同的 .html 页面。

我现在所拥有的是正在从微调器中选择该项目，但我不确定如何对其执行 onclick 侦听器...

主要activity.java的代码是：

```
 public class beef extends Activity {

private Spinner spinner1;
private ImageButton btnSubmit;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.beef);

    addListenerOnButton();
    addListenerOnSpinnerItemSelection();

}

public void addListenerOnSpinnerItemSelection(){

    spinner1 = (Spinner) findViewById(R.id.spinner1);
    spinner1.setOnItemSelectedListener(new CustomOnItemSelectedListener());
}

//get the selected dropdown list value
public void addListenerOnButton() {

    spinner1 = (Spinner) findViewById(R.id.spinner1);

    btnSubmit = (ImageButton) findViewById(R.id.imageButton1);

    btnSubmit.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            if(v.getId() == btnSubmit.getId())
            {
                Intent intent = new Intent(beef.this,display.class);
                intent.putExtra("urlpath", "animalbites.html");
                startActivity(intent);
            }
        }

    });

} 
```

}

CustomOnItemSelectedListener.java 的代码是：

```
@Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        // TODO Auto-generated method stub
         if (arg2 == 0) // First item selected
    {
    //Here I need to give an id for the .html file  

    }
    else if (arg2 == 1) // Second
    {
            //Here I need to give an id for the .html file  
    }

    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    } 
```

display.java 是：

```
public class display extends Activity implements OnClickListener {
    private WebView webView;

     @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.webview);

            Intent intent=getIntent();
            String mUrl=intent.getStringExtra("urlpath");
            webView = (WebView) findViewById(R.id.webview);
            webView.getSettings().setJavaScriptEnabled(true);
            webView.loadUrl("file:///android_asset/www/"+mUrl);

     }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T05:33:45.890

我不完全明白你的问题，但我会根据我得到的答案：

您为什么担心将 onClickListener 添加到微调器？

只需将 onClickListener 添加到按钮，然后单击该按钮即可：

```
 String selecteditemName=(String)spinner1.getSelectedItem();
    //spinner1 having items : "file1" , "file2"

    Intent i=new Intent(this, yournewActivity.class);
    i.putExtra("selected_item", selecteditemName);
    startActivity(i); 
```

现在在包含 webview 的活动 (yournewActivity) 中，在 onCreate() 方法中使用此代码：

```
 String item;
    Intent i=getIntent();
    item = i.getStringExtra("selected_item"); 
```

现在您在字符串“项目”中选择了微调器，您现在可以做任何您想做的事情：

我的观点是：您应该使用您的微调器选择作为填充 web 视图的 ID。

如果您仍想使用除微调器中存在的 ID 之外的任何 ID，请创建一个额外的 java 类 Idgetter，

```
 class idgetter
{
    public static String getID(String name)
    {
        if(name.equals("file1"))
            return "requiredfile1.html";

        else if(name.equals("file2"))
            return "requiredfile2.html";
    }
} 
```

现在，完全按照上面的代码进行操作，在变量 item 中选择微调器后，使用：

```
 String id=idgetter.getID(item);   //in younewActivity 
```

你终于完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T04:27:43.317

通过使用 Intent 的 putExtra 方法。

```
Intent mIntent = new Intent(this, display.class);
mIntent.putExtra("urlpath", "put value in here");
startActivity(mIntent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T04:35:39.410

使用 html 页面数填充微调器，并在 addListenerOnButton() 方法中使用 spinner.getSelectedItem().toString()。通过这样做，您将获得选定的 html 页面并使用意图将其传递给下一个布局。

代码：

> `公共类牛肉扩展活动{
> 
> 私人微调微调器1；私人 ImageButton btnSubmit;
> 
> int 最终网站A = 1; int 最终网站B = 2; int 最终网站C = 3;
> 
> 字符串 selectedHtmlPage = "";

```
.........
.........
.........

@Override
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
        long arg3) 
{
    switch(arg2)
    {
        case websiteA :
            selectedHtmlPage = "websiteA.html";
            break;
        case websiteB :
            selectedHtmlPage = "websiteB.html";
            break;
        case websiteC :
            selectedHtmlPage = "websiteC.html";
            break;
    }
}

public void addListenerOnButton()
{
    btnSubmit = (ImageButton) findViewById(R.id.imageButton1);

    btnSubmit.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) 
        {
            if(v.getId() == btnSubmit.getId())
            {
                Intent intent = new Intent(beef.this,display.class);
                intent.putExtra("urlpath", selectedHtmlPage);
                startActivity(intent);
            }
        }

    });

} 
```

}`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T06:37:53.123

解决了，很简单。这是我所做的：

```
public void addListenerOnSpinnerItemSelection(){

        spinner1 = (Spinner) findViewById(R.id.spinner1);
        spinner1.setOnItemSelectedListener(this);
    }
   - - - 

@Override
            public void onClick(View v) {

                if(v.getId() == btnSubmit.getId())
                {
                    Intent intent = new Intent(beef.this,display.class);
                    intent.putExtra("urlpath", mLink);
                    startActivity(intent);

                }
            }

        });

    }

    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
        // TODO Auto-generated method stub
        if(arg2==0){
            mLink="Beef html/BBQ_Meatballs_Recipes.html";
        }
}

@Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    } 
```

# javascript - 做什么 ？和：在javascript中的意思

> ID：14794588
> 
> 赞同：1
> 
> 时间：2013-02-10T04:04:12.663
> 
> 标签：javascript

我试图了解这个 [http://www.queness.com/post/12078/create-jquery-pinterest-pin-it-plugin](http://www.queness.com/post/12078/create-jquery-pinterest-pin-it-plugin)插件中的 Javascript/jQuery。第 20 和 22 行让我很困惑，代码是：

```
pi_media = e.data('media') ? e.data('media') : e[0].src,

pi_desc = e.attr('title') ? e.attr('title') : e.attr('alt'), 
```

谁能帮助我了解这些行在 Javascript 中的含义

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T04:05:54.230

It's the JavaScript [ternary operator](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Conditional_Operator).

```
x = condition ? a : b 
```

is equivalent to

```
if(condition)
    x = a;
else
    x = b; 
```

Note that an assignment is not necessary. As an expression, it simply evaluates and produces `a` or `b` depending on the truth value of `condition`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T04:06:41.163

它被称为[三元运算符](http://en.wikipedia.org/wiki/?%3a)。它的意思是：

*   计算左边的表达式`?`
*   如果表达式计算为`true`，则运行第一段代码（在`?`和之间`:`）
*   如果表达式计算为`false`，则运行第二段代码（在 之后`:`）

这是许多 C 风格语言共有的结构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T04:07:38.923

这些是三元运算符的一部分。

基本上，如果 之前的条件`?`被评估为真，那么紧跟在后面的表达式`?`就是被评估的那个，否则后面的表达式`:`被评估。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T04:09:23.707

以代码为例：
`var result=condition?arg1:arg2;`
首先评估条件。
如果评估结果为`true`，则`arg1`返回并分配给`result`
如果评估结果为`false`，则`arg2`返回并分配给`result`

# r - 如何更改ggplot中的线宽？

> ID：14794599
> 
> 赞同：155
> 
> 时间：2013-02-10T04:07:03.970
> 
> 标签：r, ggplot2, line-plot

数据链路： [使用的数据](https://www.dropbox.com/s/yt4l10nel5bwxoq/GTAP_ConsIndex.csv)

我的代码：

```
ccfsisims <- read.csv(file = "F:/Purdue University/RA_Position/PhD_ResearchandDissert/PhD_Draft/GTAP-CGE/GTAP_NewAggDatabase/NewFiles/GTAP_ConsIndex.csv", header=TRUE, sep=",", na.string="NA", dec=".", strip.white=TRUE)
ccfsirsts <- as.data.frame(ccfsisims)
ccfsirsts[6:24] <- sapply(ccfsirsts[6:24],as.numeric)
ccfsirsts <- droplevels(ccfsirsts)
ccfsirsts <- transform(ccfsirsts,sres=factor(sres,levels=unique(sres)))

library(ggplot2)

#------------------------------------------------------------------------------------------
#### Plot of food security index for Morocco and Turkey by sector
#------------------------------------------------------------------------------------------

#_Code_Begin...

datamortur <- melt(ccfsirsts[ccfsirsts$region %in% c("TUR","MAR"), ]) # Selecting regions of interest
datamortur1 <- datamortur[datamortur$variable %in% c("pFSI2"), ] # Selecting the food security index of interest
datamortur2 <- datamortur1[datamortur1$sector %in% c("wht","gro","VegtFrut","osd","OthCrop","VegtOil","XPrFood"), ] # Selecting food sectors of interest
datamortur3 <- subset(datamortur2, tradlib !="BASEDATA") # Eliminating the "BASEDATA" scenario results  

allfsi.f <- datamortur3
fsi.wht <- allfsi.f[allfsi.f$sector %in% c("wht"), ]

Figure29 <- ggplot(data=fsi.wht, aes(x=factor(sres),y=value,colour=factor(tradlib)))
Figure29 + geom_line(aes(group=factor(tradlib),size=2)) + facet_grid(regionsFull~., scales="free_y", labeller=reg_labeller) + scale_colour_brewer(type = "div") +
theme(axis.text.x = element_text(colour = 'black', angle = 90, size = 13, hjust = 0.5, vjust = 0.5),axis.title.x=element_blank()) + 
ylab("FSI (%Change)") + theme(axis.text.y = element_text(colour = 'black', size = 12), axis.title.y = element_text(size = 12, hjust = 0.5, vjust = 0.2)) + 
theme(strip.text.y = element_text(size = 11, hjust = 0.5, vjust = 0.5, face = 'bold')) 
```

我的结果： ![Result_Figure](../Images/d0b02583f0e09a7aa8bf5c26afee22f3.png)

带有 aes(size=2) 的新结果： ![新结果图](../Images/0cb86fae1a6f07eab62e257351d30bf7.png)

我的问题：有没有办法更精确地控制线宽以避免第二个图中的结果？我特别发现它对文档不友好，更重要的是为了发布目的，包括带有新定义的线宽的图。

最好的，伊斯梅尔

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2013-02-11T00:39:16.803

虽然@Didzis 有[正确答案](https://stackoverflow.com/a/14796845/1385941)，但我将扩展几点

美学可以在 ggplot 调用中设置或映射。

*   从数据映射 aes(...) 中定义的美学，并创建图例。

*   通过在 aes() 之外定义美学，也可以将其设置为单个值。

据我所知，您想要的是*将*大小设置为单个值，而不是在调用中*映射*到`aes()`

当你调用`aes(size = 2)`它时，它会创建一个名为的变量``2``并使用它来创建大小，将它从一个常量值映射到调用中`aes`（因此它出现在你的图例中）。

使用 size = 1 （没有`reg_labeller`它可能在脚本中的某处定义）

```
Figure29 +
    geom_line(aes(group=factor(tradlib)),size=1) +
    facet_grid(regionsFull~., scales="free_y") +
    scale_colour_brewer(type = "div") +
    theme(axis.text.x = element_text(
          colour = 'black', angle = 90, size = 13,
          hjust = 0.5, vjust = 0.5),axis.title.x=element_blank()) +
    ylab("FSI (%Change)") +
    theme(axis.text.y = element_text(colour = 'black', size = 12), 
          axis.title.y = element_text(size = 12, 
          hjust = 0.5, vjust = 0.2)) + 
    theme(strip.text.y = element_text(size = 11, hjust = 0.5,
          vjust =    0.5, face = 'bold')) 
```

![在此处输入图像描述](../Images/f92ab4e0e8b68c9b34d9a588e0c1c11a.png)

并且大小 = 2

```
 Figure29 + 
     geom_line(aes(group=factor(tradlib)),size=2) +
     facet_grid(regionsFull~., scales="free_y") + 
     scale_colour_brewer(type = "div") +
     theme(axis.text.x = element_text(colour = 'black', angle = 90,
          size = 13, hjust = 0.5, vjust = 
          0.5),axis.title.x=element_blank()) + 
     ylab("FSI (%Change)") +
     theme(axis.text.y = element_text(colour = 'black', size = 12),
          axis.title.y = element_text(size = 12,
          hjust = 0.5, vjust = 0.2)) + 
      theme(strip.text.y = element_text(size = 11, hjust = 0.5,
          vjust = 0.5, face = 'bold')) 
```

![在此处输入图像描述](../Images/a15a8fe83c41f0a5c836120cd98c44fe.png)

您现在可以定义尺寸以与最终图像尺寸和设备类型一起正常工作。

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2013-02-10T10:39:25.763

`ggplot2`可以使用`size=`in参数更改线宽`geom_line()`。

```
#sample data
df<-data.frame(x=rnorm(100),y=rnorm(100))
ggplot(df,aes(x=x,y=y))+geom_line(size=2) 
```

![在此处输入图像描述](../Images/45cfa9887685fcb85f78a9ebb89001ff.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2020-02-26T13:03:21.910

`ggplot2`可以使用`lwd=`in参数更改线宽`geom_line()`。

```
geom_line(aes(x=..., y=..., color=...), lwd=1.5) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-06-04T02:44:50.430

如果您只是将`size`参数放在该`geom_line()`部分中，但如果没有`aes()`它，它看起来也会适当地缩放。至少它是这样工作的`geom_density`，我遇到了同样的问题。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2019-03-08T18:08:48.550

如果要灵活修改线宽，可以使用“scale_size_manual”，这与拾取颜色、填充、alpha 等的过程相同。

```
library(ggplot2)
library(tidyr)

x = seq(0,10,0.05)

df <- data.frame(A = 2 * x + 10,
                 B = x**2 - x*6,
                 C = 30 - x**1.5,
                 X = x)

df = gather(df,A,B,C,key="Model",value="Y")

ggplot( df, aes (x=X, y=Y, size=Model, colour=Model ))+
  geom_line()+
  scale_size_manual( values = c(4,2,1) ) +
  scale_color_manual( values = c("orange","red","navy") ) 
```

# r - 选择列表的多个部分

> ID：14794602
> 
> 赞同：2
> 
> 时间：2013-02-10T04:07:15.380
> 
> 标签：r, indexing

我有一个包含 100 个条目的数据框，我想获取条目子集的字段值。具体来说，我想要每隔 10 个条目（即索引 1-10,21-30,41-50,61-70，...）

我能够做到这一点的唯一方法是通过： c(data$field[1:10],data$field[21:30],...)

但这似乎是一个可怕的解决方案，尤其是在数据框的大小发生变化的情况下。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T04:17:49.080

你可以做

```
data$field[rep(c(TRUE, FALSE), each = 10)] 
```

where`rep`创建一个 10`TRUE`后跟 10的向量，`FALSE`并在用于索引时根据需要回收。

# ruby-on-rails-3 - 使用 Rails 设计的 Facebook 登录不会返回真实的电子邮件

> ID：14794603
> 
> 赞同：1
> 
> 时间：2013-02-10T04:07:25.220
> 
> 标签：ruby-on-rails-3, facebook, devise, omniauth

我[在设计时遵循了 wiki 上的教程，以](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)使用 omniauth-facebook gem 启用 facebook 登录。它可以工作并使用户登录，甚至创建一个帐户，但是这里有一个问题。facebook 登录返回的电子邮件地址有点像：

```
email="app+5qhaf12fo9.2qucvl4nju.1fcb0eaa3df4187d46d0394cf11d664e@proxymail.facebook.com" 
```

我不认为这是它应该如何工作的 - 为什么它不在这里返回正确的电子邮件地址？请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T01:48:35.707

我今天遇到了同样的问题，但在那之前我的应用程序运行良好。所以，我不确定这是否是 Facebook API 或其他东西的变化。

看起来 Facebook 为用户提供了向第三方隐藏电子邮件的选择（[http://www.ampercent.com/avoid-sharing-email-address-facebook-games-apps/9685/](http://www.ampercent.com/avoid-sharing-email-address-facebook-games-apps/9685/)），但这很奇怪因为我没有使用那个选项，我仍然有这种行为。

**编辑：**使用另一个 facebook 帐户进行测试，它似乎按预期工作，返回 facebook 用户的电子邮件。

# matlab - 使用补丁函数删除 3D MATLAB 图中的内部边缘

> ID：14794604
> 
> 赞同：1
> 
> 时间：2013-02-10T04:07:28.267
> 
> 标签：matlab, plot

我正在 MATLAB 中绘制一个 3D 对象，比如一个立方体。

```
Node = [0 0 0; 1 0 0; 1 1 0; 0 1 0; 0 0 1; 1 0 1; 1 1 1; 0 1 1];
Elem = cell(1); Elem{1} = 1:8;
figure
for elm = 1:size(Elem,1)    
    X = Node(Elem{elm},:); K = convhulln(X); hold on;    
    patch('Faces',K,'Vertices',X,'FaceColor',rand(1,3),'FaceAlpha',1.0);
end
view(3); grid off; axis equal; cameramenu; axis off; 
```

在情节中，如何删除内部对角线？该图应该只显示立方体的边缘。我正在寻找适用于任何多面体的通用解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T04:24:00.773

的输出`K=convhulln(X);`导致了这种情况，因为凸包将具有三角形面......（这是默认设置）。如果相反，您将定义`K`为：

```
K= [1 2 3 4; ...
    2 6 7 3; ...
    4 3 7 8; ...
    1 5 8 4; ...
    1 2 6 5; ...
    5 6 7 8]; 
```

你会做对的。

另一种选择是使用FEX 中的[geom3D](http://www.mathworks.com/matlabcentral/fileexchange/24484-geom3d)。

# lisp - 在 lisp 中切换大小写

> ID：14794609
> 
> 赞同：1
> 
> 时间：2013-02-10T04:08:09.243
> 
> 标签：lisp

我有一个应该在cnf中转换wff的函数，该函数的一部分不想工作，我设法查明了问题，这是代码

```
(defun skole-gay (fbf &optional (var-for nil) (var-ex nil))
(if (consp fbf)
    (case (car fbf)
        (forall ;nel caso di forall salvo il prossimo elemento assieme a possibile altri elementi di altri forall
            (skole-gay (third fbf) (cons (second fbf) var-for) var-ex))
        (exist  ;nel caso di exist salvo il suo elemento 
            (skole-gay (third fbf) var-for (cons (second fbf) var-ex)))
        ((car var-ex)   ;nel caso che trovo l'elemento salvato della exist faccio dei contrllo per vedere cosa devo fare
            (cond
                ((eql (car var-for) nil)    ;se sub-for e' vuoto vuol dire che non ci sn stati forall indi devo solo inserire la const
                    (cons (skolem-variable)
                    (skole-gay (cdr fbf) nil var-ex))) ;dopo la costante metter il resto della fbf
                ((not(eql (car var-for) nil))   ;ci sono stati forall
                    (cons (skolem-function var-for)
                    (cons (car var-for) (skole-gay (cdr fbf) nil var-ex))))))
        ((and or) ;se trovo and or not semplicemente li riscrivo e continuo con la ricorsione
            (list (car fbf) (skole-gay (second fbf) var-for var-ex) (skole-gay (third fbf) var-for var-ex)))
        ((not) ;se trovo and or not semplicemente li riscrivo e continuo con la ricorsione
            (list (car fbf) (skole-gay (second fbf) var-for var-ex)))

        (otherwise
        ;; e' solo 1 proposizione, la ritorno
            fbf))
fbf)) 
```

有一次我在做 (case (car fbf) ; 其中 fbf = ?x 的汽车，其中一种情况是 ((car var-ex) ; 那时他们的程序也是 ?x 但它不运行那部分程序，我不知道为什么，

忽略代码中的注释，因为它们是意大利语

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T08:18:26.917

表单中的子句`case`必须在编译时可用。这些子句不被评估，将完全按照它们在代码中编写的方式使用。

在您的示例中，该子句指定`(car var-ex)`哪个是两个符号的列表：`car`和`var-ex`。如果值是其中任何一个，则将调用该子句。我怀疑情况是否如此，这就是为什么它似乎被忽略了。

# computer-vision - 对姿态估计方法的困惑

> ID：14794612
> 
> 赞同：3
> 
> 时间：2013-02-10T04:09:08.343
> 
> 标签：computer-vision, marker, homography, pose-estimation

我正在尝试从具有 4 个角 = 4 个共面点的平面标记进行姿势估计（实际上 [Edit: **3DOF** ] 旋转是我所需要的）。
直到今天，我读到的所有内容都给我留下了深刻的印象，即您将始终计算单应性（例如使用 DLT）并使用各种可用的方法分解该矩阵（Faugeras，Zhang，该分析方法也在[这篇文章中描述stackexchange](https://dsp.stackexchange.com/questions/2736/step-by-step-camera-pose-estimation-for-visual-tracking-and-planar-markers%20) ) 并在必要时使用非线性优化对其进行优化。

第一个小问题：如果这是一种分析方法（简单地从矩阵中取出两列并从中创建一个正交矩阵，从而得到所需的旋转矩阵），有什么可以优化的？我在 Matlab 中尝试过，结果抖动得很厉害，所以我可以清楚地看到结果并不完美甚至不够，但我也不明白为什么要使用 Faugeras 和 Zhang 使用的相当昂贵和复杂的 SVD如果这个简单的方法已经产生了结果。

然后是迭代姿态估计方法，如 Lu 等人的正交迭代 (OI) 算法。或者 Schweighofer 和 Pinz 的鲁棒姿态估计算法，其中甚至没有提到“单应性”这个词。他们所需要的只是一个初始姿态估计，然后对其进行优化（例如，Schweighofer 在 Matlab 中的参考实现使用了 OI 算法，该算法本身使用了一些基于 SVD 的方法）。

我的问题是：到目前为止我读到的所有内容都是'4 分？单应性，单应性，单应性。分解？好吧，棘手的，一般不是唯一的，几种方法。现在这个迭代的世界打开了，我只是无法在脑海中连接这两个世界，我不完全理解它们的关系。我什至无法正确地表达我的问题是什么，我只是希望有人能理解我在哪里。

我会非常感谢一两个提示。

**编辑**：是否正确地说：平面上的 4 个点及其图像通过单应性相关，即 8 个参数。可以通过使用 Faugeras、Zhang 或直接解决方案计算和分解单应矩阵来找到标记姿势的参数，每种方法都有其缺点。它也可以使用像 OI 或 Schweighofer 算法这样的迭代方法来完成，这些方法在任何时候都不会计算单应矩阵，而只是使用相应的点并且需要初始估计（可以使用来自单应性分解的初始猜测）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T17:13:51.123

只有四个点，您的解决方案通常对其位置的小误差非常敏感，特别是当矩形几乎与光轴正交时（这是因为消失点是不可观察的 - 它们在图像之外并且远离测量 - 并且姿势由从四边形中心到消失点的向量的叉积给出）。

您的图案是否可以以亚像素精度自信地定位角落？我建议对角使用“棋盘式”模式，这允许使用良好且简单的迭代细化算法来实现亚像素精度（查找“迭代鞍点算法”，或查找 OpenCV 中的文档）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T11:18:48.507

我不会为您提供完整的答案，但看起来至少需要澄清的一点是：

**单应性**是从 P^2（齐次 3 向量）到自身的可逆映射，它总是可以用可逆的 3x3 矩阵表示。话虽如此，请注意，如果您的 3d 点是共面的，您将始终能够使用单应性将世界点与图像点相关联。

通常，3 空间中的点在齐次坐标中表示为 4 向量。作用在 P^3 上的投影变换由非奇异 4x4 矩阵表示（15 个自由度，16 个元素减去 1 个整体尺度）。

因此，底线是，如果您的模型是平面的，您将能够摆脱单应性（8 DOF）和适当的算法，而在一般情况下，您需要估计 4x4 矩阵并且需要不同的算法那。

希望这可以帮助，

亚历克斯

# java - Java 线程：在 start() 之后在 Thread 对象上调用 run() 方法

> ID：14794613
> 
> 赞同：1
> 
> 时间：2013-02-10T04:09:15.063
> 
> 标签：java

我看到了有趣的行为。我正在运行这段代码

```
public class ThreadsTest {

    public static void main(String[] args) {
        Runnable mr = new MyRunnable();
        Thread t1 = new Thread(mr);
        Thread t2 = new Thread(mr);
        t1.setName("first");
        t2.setName("second");
        t1.start();
        t2.start();
        t1.run();
    } 
} 

class MyRunnable implements Runnable {
    public void run() {
    for (int i=0; i < 2; i++) {
        System.out.println("Running: " + Thread.currentThread().getName());
    }
    }
} 
```

我得到的输出是：

```
Running: first
Running: first
Running: second
Running: second 
```

我期待看到类似的东西：

```
Running: first
Running: first
Running: second
Running: second
Running: main
Running: main 
```

有谁知道为什么我`Running: main`在输出中看不到某处。谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T04:23:12.210

解释有点微妙。

该`Thread.run()`方法的默认行为被描述为运行提供的`Runnable`如果它存在，否则什么也不做。

微妙之处在于，当 Thread 退出时，该`exit()`方法“积极地”清空引用字段以防止存储泄漏。（这里是[源代码](http://www.docjar.com/html/api/java/lang/Thread.java.html)......第 720 行以后。）看来，当您调用`t1.run()`时`main`，线程已经退出，因此调用是无操作的。

自然，输出取决于线程是否`main`在子线程退出之前再次运行......这取决于您的平台；例如，JVM 和操作系统级别的线程调度程序做什么以及有多少内核可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T04:23:38.253

我刚刚在我的机器上运行了你的代码，我在输出中看到了“正在运行：main”。

# backbone.js - bone.js - 覆盖的 parse() 不设置模型属性

> ID：14794619
> 
> 赞同：2
> 
> 时间：2013-02-10T04:10:28.427
> 
> 标签：backbone.js

我有一个模型链接到两个子模型，如下所示：

```
var SubModel = Backbone.Model.extend({
    defaults: {
        headline: null,
        image_url: null,
        url: null
    }
});

var MainModel = Backbone.Model.extend({
    defaults: {
        subModelA: null,
        subModelB: null,
        title: null
    },

    urlRoot: function() {
        if (this.isNew()) {
            return '/mainmodel/new';
        }
        return '/mainmodel';
    },

    initialize: function() {
        this.fetch();
    },

    parse: function(data) {
        var response = {};
        response.subModelA = new SubModel(data.subModelA);
        response.subModelB = new SubModel(data.subModelB);
        response.title = data.title;
        return response;
    }
}); 
```

我目前遇到的问题是调用`var mainModelInstance = new MainModel()`确实正确地从中获取`/mainmodel/new`但`mainModelInstance.attributes`始终是一个空白对象`{}`。

```
var mainModelInstance = new MainModel();
mainModelInstance.attributes; // Returns {} 
```

以下是服务器响应的示例`/mainmodel/new`：

```
{
    "title": "Politics",
    "subModelA": {
        "headline": "Investigators: Iran tried to smuggle suicide belts, missiles by boat into Yemen",
        "url": "http://dailycaller.com/2013/02/09/yemen-minister-says-weapons-came-from-iran/",
        "image_url": "http://cdn01.dailycaller.com/wp-content/uploads/2013/02/54c7d52e1a384db489ab9ea568afddb0-e1360455589316.jpg"
    },
    "subModelB": {
        "headline": "Review: Who needs Windows RT? Acer's Iconia W510 runs the real thing",
        "url": "http://arstechnica.com/gadgets/2013/02/review-who-needs-windows-rt-acers-iconia-w510-runs-the-real-thing/",
        "image_url": "http://cdn.arstechnica.net/wp-content/uploads/2013/02/w510-main-640x388.jpg"
    }
} 
```

似乎模型的属性没有通过`parse`. 为什么没有更新模型的属性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T07:22:46.577

您的代码也可以正常工作，但您没有正确测试它

您正在调用您的`this.fetch`初始化方法。调用`model.fetch`是异步调用，当您尝试评估`mainModelInstance.attributes`时，http 请求调用尚未完成。

您应该使用以下方法进行测试：

```
var mainModelInstance = new MainModel();
mainModelInstance.on('change', function() {
  console.log(mainModelInstance.toJSON());
}); 
```

甚至更好，不要自动获取`initialize`（无论如何这不是最佳实践）并使用 jQuery 承诺模式：

```
var mainModelInstance = new MainModel();
mainModelInstance.fetch().done(function () {
  console.log(mainModelInstance.toJSON());
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T05:56:54.987

这只是一个正在进行的答案，请随时在评论中讨论。

我会`MainModel`像这样更改您的定义：

```
subModelA: new SubModelA(),
subModelB: new SubModelB(),
parse: function(data){
   this.subModelA.set(data.subModelA);
   this.subModelB.set(data.subModelB);
   return data;  // we keep two copies of the data, in mainModel and submodels.
} 
```

因此，假设您的服务器响应与您的答案完全相同

```
var model = new MainModel();
model.get('title'); // Politics
model.subModelA.get('headline'); // Investigators: Iran tr... 
```

然后，您可能必须根据您希望如何将内容持久化回服务器来覆盖 save 方法 - 这可能会起作用。

```
save: function(key, val, options) {
  this.set({
    subModelA: this.subModelA.toJSON(),
    subModelB: this.subModelB.toJSON()
  });
  Backbone.Model.prototype.save.apply(this, arguments);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T04:54:35.610

首先，必须将默认属性值放入`defaults`选项中，如下所示：

```
var SubModel = Backbone.Model.extend({
  defaults: {
    headline: null,
    image_url: null,
    url: null
  }
}); 
```

然后，您将在创建新实例时将值保存到服务器。这也会填满你的`mainModelInstance.attributes`哈希值。

对于解析问题，您是否已将 ( `console.log`) 记录在从服务器返回的内容中？

# php - 登录或注销时在 HTTPS 和 HTTP 之间切换

> ID：14794622
> 
> 赞同：1
> 
> 时间：2013-02-10T04:10:48.263
> 
> 标签：php, security, session

我将会话配置为仅使用 cookie，并为加密连接使用单独的 cookie：

```
// only allow cookie based sessions
ini_set('session.use_only_cookies', TRUE);

// use a separate cookie for secure sessions
if(isset($_SERVER['HTTPS'])) {
    ini_set('session.cookie_secure', TRUE);
} else {
    ini_set('session.cookie_secure', FALSE);
}
$sess_prefix = ini_get('session.cookie_secure') ? 'SSL_' : '';
session_name($sess_prefix . 'PHPSESSID');

// start session
session_start(); 
```

我网站上的所有链接都使用相对路径。我的问题是，在用户登录后，如何强制所有链接使用 HTTPS，然后在他们注销后返回允许 HTTP？

我知道我可以在必填页面上强制使用它，例如：

```
if(!isset($_SERVER['HTTPS'])) {
    header('Location: https://' . $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI']);
} 
```

但是我将如何处理条件页面？当他们登录时，我根本不想允许使用 HTTP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T04:15:14.770

如果您有非 HTTPS-only 的授权 cookie，那么当它们通过`http`您将它们重定向到您的服务器时`https`，它们可能已经被 MITM 破坏，因此您可以存储在 HTTP 版本的唯一 cookie该域暗示该站点的 HTTPS 版本存在有效的登录 cookie。

由于您无法使用未出现的凭据对 http 请求进行身份验证，因此只需在用户似乎已登录时将您的凭据检查代码重定向到 https。

要创建指向from和 to from`http`页面的链接，只需离开协议即可。`http``https``https`

```
<a href="//example.com/foo.html"> 
```

是具有*协议相关*URL 的完全有效链接，如果它出现在`http`页面中，则协议将设置为`http`，如果它出现在`https`页面中，则协议将设置为`https`.

[定义 URL 引用和相对 URL 解析的RFC 3986](http://www.ietf.org/rfc/rfc3986.txt)有以下示例：

> 在具有明确定义的基本 URI 的表示中
> 
> ```
>  http://a/b/c/d;p?q 
> ```
> 
> 一个相对引用被转换为它的目标 URI，如下所示。
> 
> ```
> ...
> "//g"           =  "http://g"
> ... 
> ```

# python - 如何通过这个转换后的 numpy 数组加快迭代速度？

> ID：14794624
> 
> 赞同：2
> 
> 时间：2013-02-10T04:11:08.160
> 
> 标签：python, performance, numpy, nested-loops

下面是要使用 pyglet 渲染的 2D 等距图块地图的部分类定义。

```
class Map(object):

    origin = 0
    drytile = tile.dry
    wettile = tile.wet

    def __init__(self, left=8, right=8):
        self.grid = np.array(([None] * left, [None] * right), dtype=object)
        self._setup_grid()

    def __iter__(self):
        """return tiles in the order in which they should be rendered"""
        # get number of diagonals
        ndiags = (np.max(self.grid.shape) * 2) -\
                 (1 + (np.max(self.grid.shape) - np.min(self.grid.shape)))

        # get iterator to go through diagonals in back-to-front order
        offsets = xrange(-(ndiags / 2), ndiags / 2 + 1)

        # iterate in render order
        for off in offsets:
            for tile in np.flipud(self.grid).diagonal(off)[::-1]:
                yield tile 
```

这些图块需要从后到前渲染，如下图所示：

![平铺渲染顺序。 原点在上角](../Images/2ba17e41cb20e33353657036b4f24dfa.png)

在我的类定义中，原点是指最上面的瓦片（tile `a`），因此`left`类中定义的维度是向量沿`[a b d g]`， `right`维度是向量沿`[a c f j]`。

这是我的应用程序中对速度至关重要的部分，因为我打算渲染大量图块。有没有更快的方法以指定的顺序遍历图块？可能消除嵌套循环有帮助吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T04:14:57.123

我会先订购数据结构。如果您订购向量，那么迭代会更快。

一般来说，使用有序数据结构对这类事情有好处。

如果您出于某种原因操作结构，则需要执行“有序插入”或删除，这会比较慢。使用有序数据结构的权衡在于插入和删除，并且由于板不应该发生太大变化，因此看起来您只能使用有序数据结构。

# javascript - 添加新数组项时，带有外部模板的重复 angularjs 指令无法正确呈现。

> ID：14794626
> 
> 赞同：11
> 
> 时间：2013-02-10T04:11:19.783
> 
> 标签：javascript, angularjs

下面的小提琴呈现了 3 列递增的数字，表示具有不同模板的指令：一列内联，一列预加载，另一列来自外部模板。当您选择“添加”按钮时，列会增加。当添加按钮将新项目推送到现有数组时，表示具有外部模板的指令的列似乎创建了一个新数组，然后抛出以下错误：

TypeError：无法调用 null 的方法“insertBefore”

有什么想法吗？

[http://jsfiddle.net/jwanga/EaRHD/](http://jsfiddle.net/jwanga/EaRHD/)

```
angular.module('app',[]).controller('controller', function($scope){

    $scope.items = [1,2,3,4,5,6,7,8,9];
    $scope.add = function(){

        $scope.items.push($scope.items[$scope.items.length - 1]+1);

    }

}).directive('item1', function(){
    return{
        restrict:'E',
        replace:true,
        scope: {
            data: '=data'
        },
        template:'<li>{{data}}</li>'
    }
}).directive('item2', function(){
    return{
        restrict:'E',
        replace:true,
        scope: {
            data: '=data'
        },
        templateUrl:'item.html'
    }
}).directive('item3', function(){
    return{
        restrict:'E',
        replace:true,
        scope: {
            data: '=data'
        },
        templateUrl:'https://s3.amazonaws.com/thedigitalself-public/jsfiddle-EaRHD-template.html'
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T06:18:02.263

我通过将指令包装在父元素中并将 ng-repeat 移动到父元素来解决了这个问题。任何关于为什么这会有所作为的见解仍然会受到赞赏。

[http://jsfiddle.net/jwanga/EaRHD/13/](http://jsfiddle.net/jwanga/EaRHD/13/)

```
<li ng-repeat="item in items"><item-3  data="item"></item-3></li> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T12:18:46.317

当我尝试使用富文本编辑器的 html 内容更新 div 时，我收到了相同的消息。但不像你的情况，我的 ng-repeat 已经是父元素！

好吧，问题是因为我需要使用的元素（在 ng-repeat 内部）还不存在。只需添加一个简单的超时功能就可以解决这个问题：

```
setTimeout(function() {
    $(mySelector).html(htmlContent);
},1); 
```

希望它可以帮助别人，干杯！

# c - 打印符号位

> ID：14794632
> 
> 赞同：0
> 
> 时间：2013-02-10T04:11:42.060
> 
> 标签：c, bit, sign

我觉得我的这项任务即将结束，但不明白为什么它只能每隔一段时间才能正常工作。如果我输入“FFFFFFFF”，我的程序会打印出来：

0xFFFFFFFF

符号位 1，expBits 255，fractBits 0x007FFFFF

QNaN

但是如果我再次输入“FFFFFFFF”，我的程序会打印出来：

0xFFFFFFFF

我的程序不会每次都打印出正确的输出，而是每隔一次打印出正确的输出。有没有人可以帮助我确定我的代码中出现错误的位置？任何帮助是极大的赞赏！

谢谢！

```
// do not change this code except in the following ways:
//   * write code for the following functions:
//      * bigOrSmallEndian()
//      * getNextHexInt()
//      * printLinesForNumber()
//   * change studentName by changing "I. Forgot" to your actual name

#include <stdio.h>
#include <stdlib.h>

static char *studentName = "Tenzin Shakya";

// report whether machine is big or small endian
void bigOrSmallEndian()
{
    int num = 1;
    if(*(char *)&num == 1)
    {
      printf("\nbyte order: little-endian\n\n");
   }
   else
  {
      printf("\nbyte order: big-endian\n\n");
  } 
}

// get next int (entered in hex) using scanf()
// returns 1 (success) or 0 (failure)
// if call succeeded, return int value via i pointer
int getNextHexInt(int *i)
{
    // replace this code with the call to scanf()
    //*i = 0;
    //return 1;
    scanf ("%x", i);
    return 1;
} 

// print requested data for the given number
void printNumberData(int i)
{
    //printf("%x %0#10x\n",i,*(int *)&i);
    int tru_exp =0;
    //int stored_exp;
    int negative;
    int exponent;
    int mantissa;

    printf("\n>");
    scanf("%x", &i);
    printf("\n0x%08X",i);

    negative = !!(i & 0x80000000);
    exponent = (i & 0x7f800000) >> 23;
    mantissa = (i & 0x007FFFFF);

    printf("\nsignBit %d, ", negative);
    printf("expbits %d, ", exponent);
    printf("fractbits 0x%08X", mantissa);
    // "%#010x, ", mantissa);

    if(exponent == 0)
    {
        if(mantissa != 0)
        {
            printf("\ndenormalized ");
        }
    }
    else{
        printf("\nnormalized: ");
        tru_exp = exponent - 127;
    printf("exp = %d", tru_exp);
    }

    if(exponent == 0 && mantissa == 0 && negative == 1)
    {

    printf("\n-zero");

    }

    if(exponent ==0 && mantissa == 0 && negative == 0)
    {
    printf("\n+zero");
    }

    if(exponent == 255 && mantissa != 0 && negative == 1)
    {

    printf("\nQNaN");

    }

    if(exponent == 255 && mantissa != 0 && negative == 0)
    {

    printf("\nSNaN");

    }

    if(exponent == 0xff && mantissa == 0 && negative == 1)
    {
    printf("\n-infinity");
    }

    if(exponent == 0xff && mantissa == 0 && negative == 0)
    {
    printf("\n+infinity");
    }

    printf("\n");
    while(i != 0)
    break;
}

// do not change this function in any way
int main(int argc, char **argv)
{
    int     i;                              // number currently being analyzed
    int     nValues;                        // number of values successfully parsed by       scanf

    printf("CS201 - A01p - %s\n\n", studentName);
    bigOrSmallEndian();
    for (;;) {
        if (argc == 1)                      // allow grading script to control ...
            printf("> ");                   // ... whether prompt character is printed
        nValues = getNextHexInt(&i);
        printf("0x%08X\n", i);
        if (! nValues) {                    // encountered bad input
            printf("bad input\n");
            while (getchar() != '\n') ;     // flush bad line from input buffer
            continue;
            }
        printNumberData(i);
        if (i == 0)
            break;
        }
    printf("\n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T04:24:34.090

您在 中输入用户的号码`getNextHexInt`，但`printNumberData`用另一个 再次要求输入`scanf`。您不需要第二个`scanf`，因为输入`i`已经设置为来自`getNextHexInt`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T04:20:03.487

这是执行此操作的代码

```
float myFloat;
int myInt;
memcpy(&myInt, &myFloat, 4);
int signBit = ((1 << 31) & myInt) >> 31;
printf("%i\n", signBit) 
```

我匆忙输入了它，希望它有效，我过会检查它

这是一个程序，但由于某种原因它显示-1

```
#include <string.h>
#include <stdio.h>

int main()
{
    float a = 1337;
    int* b = (int*)&a;

    int signbit = ((1 << 31) & *b) >> 31;
    printf("%i\n", signbit);
    a *= -1;
    signbit = ((1 << 31) & *b) >> 31;
    printf("%i\n", signbit);    

    return 0;
} 
```

# html - 不悬停时悬停动画不会消失

> ID：14794635
> 
> 赞同：1
> 
> 时间：2013-02-10T04:12:05.347
> 
> 标签：html, css, animation

我有一个悬停动画的 div。但是，当我不悬停时，div 不会消失

这就是整个事情的样子：http: [//jsfiddle.net/Vbxtc/](http://jsfiddle.net/Vbxtc/)

这是html：

```
 <nav>
       <div id="controls">
            <button id="playButton">Play</button>      
            <div id="defaultBar">
                <div id="progressBar"></div>
            </div>
            <button id="vol" onclick="level()">Vol</button>
            <button id="mute">Mute</button>
            <button id="full" onclick="toggleFullScreen()">Full</button>
        </div> 
       <div id="playlist" class="animated fadeInRight">
            <div>cats</div>
            <div>cats</div>
            <div>cats</div>
        </div>
    </nav> 
```

这是我制作的 CSS：

```
#playlist{
    position:absolute;
    display:block;
    border:1px solid red;
    height: 82%;
    width: 25%;
    top: 20px;
    right: 0px;
    z-index: 2;
    float:right;
    padding: 0px;
    margin: 0px; 
    color:white;
    background-color:#999999;
    opacity: 0;
}
#playlist:hover {
    opacity: 1;
} 
```

这是我正在尝试的动画

```
.animated:hover {
    -webkit-animation-fill-mode: both;
    -moz-animation-fill-mode: both;
    -ms-animation-fill-mode: both;
    -o-animation-fill-mode: both;
    animation-fill-mode: both;
    -webkit-animation-duration: 1s;
    -moz-animation-duration: 1s;
    -ms-animation-duration: 1s;
    -o-animation-duration: 1s;
    animation-duration: 1s;
}

.fadeInRight {
    -webkit-animation-name: fadeInRight;
    -moz-animation-name: fadeInRight;
    -o-animation-name: fadeInRight;
    animation-name: fadeInRight;
}
@-webkit-keyframes fadeOutRight {
    0% {
        opacity: 1;
        -webkit-transform: translateX(0);
    }

    100% {
        opacity: 0;
        -webkit-transform: translateX(20px);
    }
}
@-webkit-keyframes fadeInRight {
    0% {
        opacity: 0;
        -webkit-transform: translateX(20px);
    }

    100% {
        opacity: 1;
        -webkit-transform: translateX(0);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T17:30:17.163

在悬停状态下使用元素位置并不是一个好主意。即使你能正确地编程（这并不容易），大多数时候用户也不会理解发生了什么。

你可以得到闪烁的场景，在没有用户移动光标的情况下，你的 div 离开光标位置，取消悬停，div 重新进入光标，悬停触发，等等。

我建议在另一个 div 上触发悬停，该 div 覆盖移动 div 所在的整个区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T04:23:20.843

我注意到，当您将鼠标准确计时（悬停约 1 秒并将鼠标向上移动）时，它确实会很好地淡出。

另一件事是，如果您按如下方式添加类 fadeOutRight：

```
<div id="playlist" class="animated fadeInRight fadeOutRight"> 
```

它消失得太快了。

我知道我没有多大帮助，但答案在于时机。

此外，如果您在侧边栏上设置了 fadeOutRight 类，它会很好地工作！

```
<aside id="sidebar" class="fadeOutRight"> 
```

也许，除了fadeInRight div 之外，将fadeOutRight 类放在所有内容上。

# c# - 提高分割文件的速度

> ID：14794640
> 
> 赞同：11
> 
> 时间：2013-02-10T04:13:03.270
> 
> 标签：c#, filestream, file-copying

我正在使用此代码从文件中提取一个块

```
// info is FileInfo object pointing to file
var percentSplit = info.Length * 50 / 100; // extract 50% of file
var bytes = new byte[percentSplit];
var fileStream = File.OpenRead(fileName);
fileStream.Read(bytes, 0, bytes.Length);
fileStream.Dispose();
File.WriteAllBytes(splitName, bytes); 
```

有什么方法可以加快这个过程吗？

目前，对于 530 MB 的文件，大约需要 4 - 5 秒。这个时间可以改善吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T11:56:01.460

您有几个问题的案例，但**没有一个与语言相关**。

以下是需要关注的问题

*   源/目标文件的文件系统是什么？
*   您要保留原始源文件吗？
*   它们位于同一个驱动器上吗？

在 C# 中，您几乎没有一种方法可以比内部`File.Copy`调用更快。但是，由于百分比是 50，因此下面的代码**可能不会更快**。它复制整个文件，然后设置目标文件的长度`CopyFile``WINAPI`

 **```
var info=new FileInfo(fileName);
var percentSplit=info.Length*50/100; // extract 50% of file

File.Copy(info.FullName, splitName);
using(var outStream=File.OpenWrite(splitName))
    outStream.SetLength(percentSplit); 
```

此外，如果

1.  文件拆分后您不保留原始源
2.  目标驱动器与源驱动器相同
3.  您没有使用启用加密/压缩的文件系统

那么，你能做的最好的事情就是**不要复制文件**。例如，如果您的源文件位于`FAT`或`FAT32`文件系统上，您可以做的是

1.  为文件的新拆分部分创建新的目录条目（条目）
2.  让条目（条目）指向目标部分的集群
3.  为每个条目设置正确的文件大小
4.  检查交叉链接并避免这种情况

如果您的文件系统是`NTFS`，您可能需要花费很长时间来研究规范。

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T18:27:57.967

```
var percentSplit = (int)(info.Length * 50 / 100); // extract 50% of file
var buffer = new byte[8192];
using (Stream input = File.OpenRead(info.FullName))
using (Stream output = File.OpenWrite(splitName))
{
    int bytesRead = 1;
    while (percentSplit > 0 && bytesRead > 0)
    {
        bytesRead = input.Read(buffer, 0, Math.Min(percentSplit, buffer.Length));
        output.Write(buffer, 0, bytesRead);
        percentSplit -= bytesRead;
    }
    output.Flush();
} 
```

可能不需要刷新，但它不会造成伤害，这很有趣，将循环更改为*do-while*而不是*while*对性能有很大影响。我想IL没有那么快。我的电脑在 4-6 秒内运行原始代码，附加代码似乎在 1 秒左右运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T12:21:13.760

当读取/写入几兆字节的块时，我会得到更好的结果。性能也会根据块的大小而变化。

```
FileInfo info = new FileInfo(@"C:\source.bin");
FileStream f = File.OpenRead(info.FullName);
BinaryReader br = new BinaryReader(f);

FileStream t = File.OpenWrite(@"C:\split.bin");
BinaryWriter bw = new BinaryWriter(t);

long count = 0;
long split = info.Length * 50 / 100;
long chunk = 8000000;

DateTime start = DateTime.Now;

while (count < split)
{
    if (count + chunk > split)
    {
        chunk = split - count;
    }

    bw.Write(br.ReadBytes((int)chunk));
    count += chunk;
}

Console.WriteLine(DateTime.Now - start); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-10T04:16:28.343

我认为解决这个问题的最快方法是通过二进制缓冲文件输入。

我在 C# 中不是很熟悉，但是您可以研究一些缓冲技术来转到文件的特定部分，并从该部分进行缓冲输入。

您还可以使用带有 Windows API 的 C++ 来实现本机缓冲技术，或者查找具有快速缓冲方法的库。

我不能提出太多其他建议，希望这会有所帮助。**

# c++ - C++：semget：返回 ENOENT

> ID：14794643
> 
> 赞同：0
> 
> 时间：2013-02-10T04:13:32.370
> 
> 标签：c++, semaphore

```
 #include <sys/sem.h>
 #include <sys/stat.h>
#include <cerrno>
#include <iostream>
using namespace std;

main () {
    string key = "/m/lb1/activity.log";
    int sem_key = ftok (key.c_str (), 1);
    if (access (key.c_str (), R_OK) == 0)
        printf ("keypath is accessible \n");
    printf("sem_getid : %d", sem_key);
    errno = 0;
    int sem_id = semget (sem_key, 0, 0655);
    printf( " sem get val :%d :%s\n", sem_id, strerror(errno));
}
$ ./a.out
keypath is accessible
sem_getid : 16850172 sem get val :-1 :No such file or directory

ls -l /m/lb1/activity.log
-rw-r--r-- 1 apple g6 0 Feb 9 19:08 /m/lb1/activity.log 
```

“访问”调用返回 0；所以键路径被打印出来。但是，semget 正在返回一个 ENOENT（没有这样的文件或目录）

sem_getid：16850172 sem get val：-1：没有这样的文件或目录

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T04:22:16.087

`semget`除非您在第三个参数中指定或，否则获取*现有的信号量集。*来自：`IPC_CREAT``IPC_PRIVATE``man semget`

> ```
> ENOENT
>     No semaphore set exists for key and semflg did not specify IPC_CREAT. 
> ```

在这种情况下，`ENOENT`意味着信号量集不存在，而不是意味着路径不存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T04:31:29.003

您传递给 semget的`sem_key`不是文件名或路径，它只是一个任意的 32 位整数。可能的信号量键的命名空间与文件名空间没有任何关系。

因此，您需要选择一些（整数）键值来使用，并且您需要在使用它之前实际创建键，首先使用 IPC_CREAT 调用 semget。

# python - 我应该选择哪个函数使用 scipy 查找根？

> ID：14794646
> 
> 赞同：1
> 
> 时间：2013-02-10T04:14:24.067
> 
> 标签：python, scipy

在`scipy.optimise`模块中，有许多不同的函数可以找到函数的根（brentq、brenth、ridder、bisect、newton）。但是，我没有提供有关每种方法的特征的详细信息。如何确定哪一种更适合我的需求？我应该选择哪一个？

换句话说，每个函数更擅长哪种优化？

# javascript - 计时器未正确计数

> ID：14794647
> 
> 赞同：0
> 
> 时间：2013-02-10T04:14:25.067
> 
> 标签：javascript, jquery

[http://jsfiddle.net/zAFND/640/](http://jsfiddle.net/zAFND/640/)

在我的 jsfiddle 中，我遇到的问题是响应时间。它上升了 2 秒而不是 1 秒。我相信这个问题是因为我有 2 个问题，所以它计算每个响应时间文本输入中两个问题的秒数，因此每次增加 2 秒。但我的问题是如何解决这个问题，以便计时器正常计数：

响应时间代码：

` var response = "00:00:00", responseparts = response.split(':'), responsehours = +responseparts[0], responseminutes = +responseparts[1], responseseconds = +responseparts[2];

```
 function correctResponse(responsenum) {
         return (responsenum < 10) ? ("0" + responsenum) : responsenum;
     }

 var responsetimer = [];
 $('.queWrap').each(function(index, element) {
 var wrap=$(this),   
 input = wrap.find('.responseTime'),
 checkbox=wrap.find('#ck-button').find('input'),
 clickInput=wrap.find('.mouseClick');

     responsetimer[index] = setInterval(function () {
     responseseconds++;
     if (responseseconds == 60) {
         responseseconds = 00;
         responseminutes++;

         if (responseminutes == 60) {
             responseminutes = 00;
             responsehours++;

             if (responsehours <= 24) {
                 clearInterval(responsetimer);
                 return;
             }

         }
     }
     input.val(correctResponse(responsehours) + ":" + correctResponse(responseminutes) + ":" + correctResponse(responseseconds));
 }, 1000); 
```

`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T04:23:46.947

移动 var 声明

```
response = "00:00:00",
responseparts = response.split(':'),
responsehours = +responseparts[0],
responseminutes = +responseparts[1],
responseseconds = +responseparts[2]; 
```

在每个回调中

[http://jsfiddle.net/h8srH/1/](http://jsfiddle.net/h8srH/1/)

此外，将您的 ck-button id 更改为 classes。ID 是唯一的。

# facebook - Facebook Open Graph 中的 og:image 错误

> ID：14794654
> 
> 赞同：0
> 
> 时间：2013-02-10T04:15:57.297
> 
> 标签：facebook, wordpress, facebook-opengraph

我在我的网站上做了 Open Graph，一切都很完美。

但是，对于主页（front_page），facebook 拍摄了 FOOTER 的图像（？！）

在调试中是好的。如何强制 facebook 将 OG: IMAGE 作为第一张图片？

编码：

```
<?php if (have_posts()):while(have_posts()):the_post(); endwhile; endif;?>
<!-- the default values -->
<meta property="fb:app_id" content="MY ID" />

<!-- if page is home -->
<?php if (is_front_page()) { ?>
<meta property="og:title" content="name" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://www.com/"/>
<meta property="og:image" content="http://www.com/wp-content/uploads/2013/02/thumbface.jpg" /> <?php } ?>

<!-- if page is content page -->
<?php if (is_single()) { ?>
<meta property="og:title" content="<?php single_post_title(''); ?>" />
<meta property="og:type" content="article" />
<meta property="og:url" content="<?php the_permalink() ?>"/>
<meta property="og:description" content="<?php echo strip_tags(get_the_content($post->ID)); ?>" />
<meta property="og:image" content="<?php $fbthumb = wp_get_attachment_image_src( get_post_thumbnail_id( $post->ID ), 'facebook-thumb' ); echo $fbthumb[0]; ?>" />

<!-- if page is others -->
<?php } else { ?>
<meta property="og:site_name" content="<?php bloginfo('name'); ?>" />
<meta property="og:description" content="<?php bloginfo('description'); ?>" />
<meta property="og:image" content="http://www.com/wp-content/uploads/2013/02/thumbface.jpg" /> <?php } ?> 
```

对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T14:17:52.353

[在Facebook 的 Debug Tool](https://developers.facebook.com/tools/debug)上调试 URL 。即使图片是正确的，您的 URL 也有可能已被 Facebook 缓存。使用 Linter 将删除缓存，并使用页面上当前可用的标签。

# .net - 如何更改存储在 XML 或 TXT 中的 ListView 中的数据？

> ID：14794657
> 
> 赞同：0
> 
> 时间：2013-02-10T04:16:07.170
> 
> 标签：.net, vb.net, listview, visual-studio-2012

我目前正在尝试为自己编写一个管理应用程序。我一直在阅读有关如何通过 ListView 写入和读取文本文档的大量内容。到目前为止，我已经能够将数据写入文本文件，但是，我希望能够更改该数据。例如，我有一个 ListView 显示：

对象 = 苹果 - 数量 = 5

而不是添加一个全新的项目，我想增加一个苹果。这样做的原因是我可以从另一个表单（在同一个应用程序中）调用相同的数据。就像我的初始 ListView 显示 Apples 和 Number of Apples，但随后能够通过单独的 Options 表单更改该数字。我可能听说过 XML，但我不知道如何将 IO.stream 与 XML 一起使用（或者您甚至如何组织它来编辑某些项目）

有什么想法或指导吗？我完全被难住了。。

编辑：也许使用数组？没有把握..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T05:22:24.250

首先，您需要将 DataGridView 添加到窗体。然后给它命名，在这个例子中我的是 dgvInvoice。一旦您在表单上获得了控件，您需要将列添加到该 DataGridView。您可以通过单击控件并在右上角单击黑色播放按钮并单击“添加列”或类似的东西来做到这一点。当您在屏幕右侧添加列时，请确保给它们一个设计名称；这是对您的专栏的引用。完成此操作后，您可以开始保存到 XML...

这是一个小示例，可帮助您入门...

首先在您想要的任何地方创建一个空的 XML 文件...文件中不需要只有一个空的 XML 文件。然后按照下面...

```
 Imports System.IO
 Imports System.Xml
 Imports System.Text

 Public filePath As String = "PUT YOUR PATH TO XML HERE" - 'YOUR FILE PATH TO YOUR XML FILE GOES HERE'

 Private Sub btnSaveGrid_Click(sender As System.Object, e As System.EventArgs) Handles btnSaveGrid.Click
      CompileGrid() 'Using another sub to actually do the saving...
 End Sub

 *************************************************************************** 
```

下一个子......

```
 Private Sub CompileGrid()

    'Get the XML from the table!'
    Dim dt As New DataTable("invoices") 'YOU CAN ADD WHATEVER NAME YOU WANT HERE'

    'THIS WILL ADD YOUR COLUMN NAMES TO THE TABLE'

    For i As Integer = 0 To dgvInvoice.ColumnCount - 1
        dt.Columns.Add(dgvInvoice.Columns(i).Name, GetType(System.String))
    Next

    'THIS WILL ADD YOUR ROWS DATA TO THE TABLE'        

    Dim myrow As DataRow
    Dim icols As Integer = dgvInvoice.Columns.Count
    For Each drow As DataGridViewRow In Me.dgvInvoice.Rows
        myrow = dt.NewRow()
        For i As Integer = 0 To icols - 1
            myrow(i) = drow.Cells(i).Value
        Next
        dt.Rows.Add(myrow)
    Next

    'NEXT LETS WRITE THE DATA TO AN XML FILE'

    dt.WriteXml(filePath)

End Sub 
```

现在，如果您在记事本或任何您想使用的文件中打开该文件，您将在该文件中看到您的数据。现在不要修改它，因为你可以在每次这样做时自动覆盖它。

# php - 在 PHP 上进行多次 INSERT 的最简单方法

> ID：14794665
> 
> 赞同：0
> 
> 时间：2013-02-10T04:17:20.133
> 
> 标签：php, mysql

我有这个代码。

```
elseif ($numerodeprocesos == 4) {
    $upd2= "INSERT INTO juan (ciudadh)
    VALUES ('$ciudadh')";
    $upd3= "INSERT INTO juan (ciudadh)
   VALUES ('$ciudadh')";
    $upd4= "INSERT INTO juan (ciudadh)
   VALUES ('$ciudadh')";
   $upd5= "INSERT INTO juan (ciudadh)
    VALUES ('$ciudadh')";
   $upd6= "INSERT INTO juan (ciudadh)
   VALUES ('$ciudadh')";
mysql_query($upd2)or die( mysql_error() );
mysql_query($upd3)or die( mysql_error() );
    mysql_query($upd4)or die( mysql_error() );
        mysql_query($upd5)or die( mysql_error() );
            mysql_query($upd6)or die( mysql_error() );

} 
```

但是，最简单的方法是什么？我的意思是可以在一个 mysql_query 中完成它吗？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T04:19:38.003

这将是一个插入多行的单个插入语句：

```
INSERT INTO juan (ciudadh)
    VALUES ('$ciudadh'), ('$ciudadh'), ('$ciudadh'), ('$ciudadh'); 
```

也可以看看：[`INSERT Syntax`](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

# android - Android 开发者工具：XML 无法正确显示

> ID：14794668
> 
> 赞同：0
> 
> 时间：2013-02-10T04:18:10.253
> 
> 标签：android, xml, eclipse, android-layout, adt

我最近安装了最新的 Android 开发者工具，它与 Eclipse Juno（带有紫色图标）几乎相同，只是现在是绿色的，而且模拟器似乎更具体地针对设备。

我的问题是，当我将项目重新导入这个新 IDE 时，XML 布局无法正确呈现。微调器将屏幕的整个长度拉伸，而之前它们是所需的尺寸。但更奇怪的是，当我在模拟器中运行程序时，它看起来就像我最初想要的那样。

我怎样才能让一些订单回到图形布局中？目前它似乎是多余的，因为它没有以图形方式反映我的代码告诉它的内容，并且它让我很难设计我的应用程序，因为我必须在运行它时不断检查它。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T04:46:26.090

也许很简单：XML 查看器中的默认布局大小现在已更改。

# graphics - 创建自己的栅格引擎意味着什么？

> ID：14794672
> 
> 赞同：1
> 
> 时间：2013-02-10T04:19:01.223
> 
> 标签：graphics, render, raster

我在某处读到有人要创建一个类似于 opengl 的光栅引擎来完全理解 opengl 的作用。

我的理解是你不能这样做，因为你的显卡上有opengl/directx，你不能使用其他任何东西作为你的图形核心。

我认为我的观点是不正确的，有人可以纠正它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T05:01:20.630

OpenGL 是处理图形的标准方式。它不仅仅作为独立的软件存在于显卡上。如果您的显卡具有 OpenGL 硬件加速，这意味着您的计算机可以将一些 OpenGL 命令发送到显卡并卸载 CPU 本来必须处理的工作——但这​​只是因为该卡已经预先设计用于OpenGL 标准。

如果您的卡上没有 OpenGL 硬件支持，那么所有内容都必须通过您的主处理器发送，而且通常不是最佳的。

OpenGL的实现其实有很多。有些是由 ATI 和 NVidia 等公司注入的硬件，它们提供自己的 opengl 实现，用于将 opengl 处理转发到卡。其他是基于软件的，例如开源 MESA。如果您运行的是不匹配的卡和游戏，例如 DirectX 卡和 OpenGL 游戏，那么您可能不得不使用纯软件实现进行渲染。

所以是的，纯软件实现是可能的，但不是最优的。但是，有时如果您需要动态访问和操作较低级别的图形信息，则需要软件实现。知道如何做到这一点是一项很棒的技能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T04:21:26.817

您仍然可以在某些情况下访问视频内存，并且可以执行 blitting，这是光栅实现的核心。编写自己的图形引擎作为学习工具是合理的，我什至会说它相当普遍。在计算机科学课程中，我们也编写编译器作为学习练习，即使知道它们与商业实现不匹配。

# python - 这些 Haskell 高阶函数的 Python 等价物是什么？

> ID：14794676
> 
> 赞同：5
> 
> 时间：2013-02-10T04:19:49.843
> 
> 标签：python, haskell

[《 Learn You a Haskell For Great Good](http://learnyouahaskell.com/)》一书中关于偏函数的章节包含以下代码：

```
multThree :: (Num a) => a -> a -> a -> a
multThree x y z = x * y * z

ghci> let multTwoWithNine = multThree 9
ghci> multTwoWithNine 2 3
54
ghci> let multWithEighteen = multTwoWithNine 2
ghci> multWithEighteen 10
180 
```

我目前正在使用 Python 中的 functools 库，并设法使用它来复制这些函数的行为。

```
from functools import partial

def multThree(x,y,z):
  return x * y * z

>>> multTwoWithNine = partial(multThree,9)
>>> multTwoWithNine(2,3)
>>> multWithEighteen = partial(multTwoWithNine,2)
>>> multWithEighteen(10)
180 
```

我现在想做的一件事是看看我是否可以从同一本书的章节中复制一些更有趣的高阶函数，例如：

```
zipWith' :: (a -> b -> c) -> [a] -> [b] -> [c]
zipWith' _ [] _ = []
zipWith' _ _ [] = []
zipWith' f (x:xs) (y:ys) = f x y : zipWith' f xs ys 
```

但是，我不确定如何执行此操作，或者`partial()`这里是否有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T04:34:36.727

Python 的内置`map`函数的行为类似于 Haskell 的`zipWith`：

```
>>> def add(x,y): return x + y
... 
>>> map(add,[1,2,3],[10,20,30])
[11, 22, 33] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T04:35:12.893

```
def add(a, b):
    return a + b

x = [1, 2, 3, 4]
y = [5, 6, 7, 8]

>> map(add, x, y)
[6, 8, 10, 12] 
```

另外，请查看 Python 内置`itertools`模块：[http ://docs.python.org/2/library/itertools.html](http://docs.python.org/2/library/itertools.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T07:33:43.350

此 Python 代码的行为类似于`zipWith'`您提供的函数：

```
def zip_with(f, l1, l2):
    if len(l1) == 0 or len(l2) == 0:
        return []
    else:
        return [f(l1[0], l2[0])] + zip_with(f, l1[1:], l2[1:]) 
```

但是，与 Haskell 函数相比，此函数有几个缺点。首先是它看起来不太好，因为 Python 没有模式匹配语法；我们必须使用`len`, `[0]`, and`[1:]`来代替。第二个是 Python 函数不以任何方式使用惰性求值，因此`zip_with`将始终遍历整个列表，即使它可以提前停止。第三个是这个函数对结果列表的每个元素调用一次，Python 的递归限制大约（或者确切地说？）1,000，所以如果输出列表的长度超过大约 1,000 个元素，这个函数将引发异常.

第二个和第三个问题可以使用生成器来解决。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T09:30:50.007

这是使用内置[zip](http://docs.python.org/2/library/functions.html#zip)功能和列表理解的好选择：

```
>>> zip_with = lambda fn, la, lb: [fn(a, b) for (a, b) in zip(la, lb)]

>>> add2 = lambda x,y: x+y
>>> zip_with(add2, range(10), range(1,11))
[1, 3, 5, 7, 9, 11, 13, 15, 17, 19] 
```

# python - “str”对象没有属性“_meta”

> ID：14794677
> 
> 赞同：12
> 
> 时间：2013-02-10T04:19:50.507
> 
> 标签：python

```
def participant_specific(request, participant):
    helper = RelayFunctions()
    info = helper.participant_specific_donation(participant)
    info1 = helper.participant_specific_milestone(participant)

    data = { 'participant_specific_donation' : info , 'participant_specific_milestone' : info1 }
    json_serializer = serializers.get_serializer("json")()
    response = json_serializer.serialize(data, ensure_ascii=False)
    return HttpResponse(response, mimetype="application/json") 

Traceback:
 File "/home/vtrelayc/lib/python2.6/site-packages/django/core/handlers/base.py" in get_response
   111\.                         response = callback(request, *callback_args, **callback_kwargs)
 File "/home/vtrelayc/projects/relay/relayapp/views.py" in participant_specific
   192\.     response = json_serializer.serialize(data, ensure_ascii=False)
 File "/home/vtrelayc/lib/python2.6/site-packages/django/core/serializers/base.py" in serialize
   46\.             concrete_model = obj._meta.concrete_model

 Exception Type: AttributeError at /participants/specific/1/
 Exception Value: 'str' object has no attribute '_meta' 
```

错误：“str”对象没有属性“_meta”

我们正在尝试解析字典，但它说它是一个字符串？是因为一本字典中有多个对象吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-10T04:38:27.223

json_serializer.serialize 应该与查询集一起使用。更多信息[在这里](https://docs.djangoproject.com/en/1.0/topics/serialization/#id2)。

您应该能够通过以下方式实现相同的目的：

```
import json
data = json.dumps({ 'participant_specific_donation' : info , 'participant_specific_milestone' : info1 }) 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-10T04:24:11.357

Django 的序列化程序仅用于序列化`QuerySet`s，但您将其传递给`dict`. 如果你想序列化一个`dict`，也许你正在寻找[Python 的内置`json`模块](http://docs.python.org/2/library/json.html)。

# android - 当 ontext 改变时 float.parsefloat numberformatexception

> ID：14794679
> 
> 赞同：0
> 
> 时间：2013-02-10T04:20:46.870
> 
> 标签：android, android-edittext, numberformatexception

这是我的一段代码，我在其中动态检查edittext输入。

```
al_e.addTextChangedListener(new TextWatcher() {

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            // TODO Auto-generated method stub

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
            // TODO Auto-generated method stub

        }

        @Override
        public void afterTextChanged(Editable s) {
            // TODO Auto-generated method stub
            String al_s=s.toString().trim();
            if((Float.parseFloat(al_s)<15)|(Float.parseFloat(al_s)>50)|al_s.equals("")){
                invalid=1;
                al_s="";
                //Toast.makeText(getApplicationContext(),"Please enter a valid input\nRange [15mm,50mm]", Toast.LENGTH_SHORT).show();
                al_e.setError("Please enter a valid input\nRange [15mm,50mm]");
            }else{
                al=Float.parseFloat(al_s);
            }
        }
    }); 
```

* * *

但是当我在edittext中输入文本并使用退格键清除数字时，我得到以下异常

```
02-10 09:43:37.186: E/AndroidRuntime(434): FATAL EXCEPTION: main
02-10 09:43:37.186: E/AndroidRuntime(434): java.lang.NumberFormatException: 
02-10 09:43:37.186: E/AndroidRuntime(434):  at org.apache.harmony.luni.util.FloatingPointParser.parseFloat(FloatingPointParser.java:305)
02-10 09:43:37.186: E/AndroidRuntime(434):  at java.lang.Float.parseFloat(Float.java:323)
02-10 09:43:37.186: E/AndroidRuntime(434):  at com.example.iolcalci.Second$4.onTextChanged(Second.java:208) 
```

* * *

在论坛搜索了类似的问题，但没有找到它。有关此的任何帮助。我是 android 开发的初学者

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T05:33:59.213

您不能在空字符串上使用 parseFloat。这就是您收到 NumberFormatException 的原因。

改为执行以下操作。

```
try {
    float num = Float.parseFloat(al_s);
    if (num < 15 || num > 50) {
        // set invalid...
    } else {
        al = num;
    }
} catch (NumberFormatException e) {
    // set invalid...
} 
```

另请注意，即使您正在`al_s.equals("")`检查空字符串，它也需要是条件的第一个测试而不是最后一个。否则字符串将在测试之前被解析，导致`NumberFormatException`.

# android - Listener 和 Receiver (Android) 有什么区别？

> ID：14794684
> 
> 赞同：23
> 
> 时间：2013-02-10T04:21:47.060
> 
> 标签：android, broadcastreceiver, listener

例如，我需要一个 BroadcastReceiver 来获取这些事件：

重启或关机

屏幕开启或关闭

电池状态（电压、插入、温度）

物理按钮按下（相机、媒体等）

但我需要 Listener 来获取这些事件：

用于传感器事件（加速度、磁场、方向、接近度、温度、光照水平等）的 EventListener

位置事件的 LocationListener（网络位置、GPS）

似乎接收器和侦听器都存在，以便我可以接收事件。除了明显的语义差异外，两者之间有什么区别？有没有我可以做的事情，但不能做其他事情，尤其是在屏幕关闭时我可以占用和运行多少 CPU？为什么有两种完全不同的构造用于接收事件？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-10T04:33:58.873

这两者之间有很多差异，他们对某事的反应是唯一的相似之处之一。

差异：

*   BroadcastReceivers 接收 Intent，而 Listener 基本上可以做任何事情，因为它没有明确的目的，它只是一个命名约定。例如，在开发网站上搜索[“BroadcastReceiver”](https://developer.android.com/index.html#q=Broadcastreceiver)，然后搜索[“Listener”](https://developer.android.com/index.html#q=Listener)

*   BroadcastReceivers 只接收一个非直接的 Intent Broadcast，Listeners 被显式调用。

*   [BroadcastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)是它自己定义的类，因为它有明确的目的（接收 Intent），而 Listeners 可以是任何东西——它们通常是一个`interface`并且提供它们以便可以从一个类到另一个类进行回调。

*   广播接收器通常用于全局、系统范围的事件，侦听器用于特定事件（即位置传感器不应该每秒更新位置，除非它有一些东西，例如要发布到的侦听器。与屏幕关闭意图相反 -这很重要，它会影响一切，因此应该向所有感兴趣的接收者广播）

*   BroadcastReceiver 拾取的事件*通常*是非连续事件（一次），而 Listener，取决于它们的工作，**可**用于不断更新（连续）。

*   如果在清单中声明了广播接收器，则系统可以对其进行实例化，侦听器仅是动态生成的（因此通过代码）。

*   CPU/Power 的使用取决于两者的实现，特别是如前所述，Listeners 可以是**任何东西**。

> 有没有我可以做的事情，但不能做其他事情，尤其是在屏幕关闭时我可以占用和运行多少 CPU？

BroadcastReceivers 只有[10 秒的保证执行时间](https://developer.android.com/reference/android/content/BroadcastReceiver.html#onReceive(android.content.Context,%20android.content.Intent))。听众，因为他们不服务于特定目的，没有这个限制。

广播接收器绝对不能做的事情：

> 特别是，您可能不会在 BroadcastReceiver 中显示对话框或绑定到服务。

可能还有更多——这就是我想出的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-07-15T10:43:53.007

广播接收器就像西格玛，事件监听器就像数学中的积分都是求和......

*   Sigma：当我们需要在离散间井中求和时使用它......
*   Integral：当我们需要连续求和时使用它...

同样，Broad Cast Receiver 和 Event Listener 都用于事件侦听。但 Broad Cast 接收器用于侦听非常重要的事件，例如 BATTERY_CHANGED、BATTERY_LOW、BOOT_COMPLETED、CALL ETC 和事件列表器更新事件中的连续变化，例如 LOCATION CHANGED , 获得焦点等。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-10T05:30:16.140

侦听器和接收器都充当触发器处理程序，但是，将它们分开的是这些触发器的起源和特征。

（广播）接收器由 Intent 触发。这些 Intent 的来源可能来自您自己的应用程序的上下文之外。因此，它是应用程序实现进程间通信的一种方式。

此外，应用程序无需运行即可接收 Intent。Intent 可以充当闹钟，在事件被触发时唤醒应用程序。这样可以节省电池和 CPU。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T04:56:40.167

主要区别在于：

事件侦听器具有更连续的形式，即与传感器或按钮点击相关的事件更频繁。

但是接收器具有不连续的性质，即这里的事件不是连续的，例如，开机/关机、消息等

# javascript - 缩放的 div 不能拖动到所有父 div

> ID：14794690
> 
> 赞同：4
> 
> 时间：2013-02-10T04:23:04.207
> 
> 标签：javascript, jquery, css, jquery-ui

我目前正在使用`jquery-ui`一个包含多个孩子的大型 div 的项目。这个想法是，这些子 div 将由用户先前创建，然后按比例缩小（到其原始大小的 20% 左右）并放置在大 div 中，用户可以在其中按照他们喜欢的方式排列它们。

我的问题是缩放后，我无法将子 div 拖到父级中的所有位置。相反，即使没有对父级应用缩放转换，它们似乎也受限于父级的缩小版本。

这个小提琴说明了问题： http: [//jsfiddle.net/yRNqu/](http://jsfiddle.net/yRNqu/)（尝试将蓝色框拖到最右边或最底部）

有没有其他人遇到过这个问题？我真的很感激一两个指针。

谢谢

**HTML：**

```
<html>
    <div class="container">
        <div class="box"></div>
    </div>
</html> 
```

**CSS：**

```
.container{
    height:500px;
    width: 500px;  
    background-color: red;

}
.box{
    height:100px;
    width: 100px;
    background-color: blue;
    -webkit-transform-origin: top left;
    -moz-transform-origin: top left;
    -webkit-transform: scale(0.5);
    -moz-transform: scale(0.5);
} 
```

**jQ 1.9 + jQ 用户界面：**

```
$(function() {
    $('.box').draggable({
        containment: 'parent'
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T04:26:55.570

JQuery UI 不够智能，无法使用 CSS 缩放和旋转，因为它依赖于报告的边界框，在这种情况下变得毫无意义。

这是另一个 SO 问题，有很多解决方法可以尝试：[Dragging & Resizing CSS Transformed Elements](https://stackoverflow.com/questions/12007971/dragging-resizing-css-transformed-elements)

几个答案下来，您可以找到一个声称可以直接解决此问题的插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T04:32:42.410

[这已在 jQuery bug tracker 中归档](http://bugs.jqueryui.com/ticket/6844)，但由于大约 3 个月前无法修复而关闭：

> 我们在会议上讨论了这个问题，并且**CSS 转换不是我们计划在可预测的特性中随时支持的东西**[原文如此]，因此将其关闭为不会修复。

# .net - 用于将 HTML 文档打印到网络打印机的 .NET Web 服务

> ID：14794692
> 
> 赞同：0
> 
> 时间：2013-02-10T04:23:15.650
> 
> 标签：.net, web-services, printing

我需要构建一个可以接收 HTML 文档并将其发送到打印机的 Web 服务。该服务必须接收 HTML 作为输入，然后将其发送到网络上的打印机。我已经阅读了很多关于 PrintDocument 的内容，但它似乎不是一个可行的解决方案，可以将预先格式化的文档（在这种情况下为 HTML）或文件发送到打印机。相反，它希望您的代码协调每个页面的内容和布局，使用单独的命令来打印文本行、图形等。在我的例子中，HTML 本身应该定义页面布局。我只需要以与桌面浏览器相同的方式盲目打印 HTML 文档，但以编程方式作为服务，无需任何用户输入。

背景：我们有需要打印 HTML 页面的 iOS 设备（iPad、iPod 等），但由于各种原因我们不能使用 AirPrint 技术。首先，AirPrint要求iOS设备和打印机在同一个网段，不会这样。我们必须能够使用公司网络上的任何打印机。其次，我们使用的打印机不兼容 AirPrint。

建议的解决方案：在 .NET 中构建一个 Web 服务（REST 或 SOAP），该服务将在配置了网络打印机并安装了驱动程序的 Windows Server 上运行。让 iOS 应用程序将 HTML 文档发送到 Web 服务。Web 服务将以某种方式将其接收到的 HTML 发送到在托管 Web 服务的 Windows Server 上本地配置的远程网络打印机...

关于如何打印内存中 HTML 文档的任何想法，类似于浏览器的方式，但是来自 Web 服务，没有任何 UI？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T05:20:45.550

听起来[PhantomJS](http://phantomjs.org/)可以满足您的需要。它允许您将 HTML 文件转换为 PDF（以及其他格式），然后您可以将其发送到打印机。

您可能需要查看适合您情况的“[光栅化](https://github.com/ariya/phantomjs/blob/master/examples/rasterize.js)”示例。

# ios - 实现 Facebook 的 News Feed UITableView 滚动动作

> ID：14794701
> 
> 赞同：1
> 
> 时间：2013-02-10T04:24:58.700
> 
> 标签：ios, objective-c, uitableview, uiscrollview

如何实现 Facebook 的新闻提要标题之类的东西？

当 UITableView 向下滚动时，UITableView 上方的视图会随着滚动而消失，但是当向上滚动（而不是在顶部）时，视图会向下弹回，以便用户可以选择“新状态”、“发布照片”和很快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T09:30:45.397

我最终得到了这个问题的答案：[How to embed a UITableView in a UIScrollview](https://stackoverflow.com/questions/10508524/how-to-embed-a-uitableview-in-a-uiscrollview)

TLDR：为您的 UITableView 使用 setTableHeaderView 方法（这将滚动），并将节标题（这将粘贴）作为弹出窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T04:55:42.380

我会做的方式（这不一定是最好的方式）是使用在 UIScrollViewDelegate 中调用的函数。UiTableViewDelegate 实现了这些功能。使您的视图控制器成为表视图的代表，然后使用此处记录的那些滚动小说：http: [//developer.apple.com/library/ios/documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html](http://developer.apple.com/library/ios/documentation/uikit/reference/uiscrollviewdelegate_protocol/Reference/UIScrollViewDelegate.html) 找出用户的多少滚动以及它们是否在顶部滚动并相应地调整上 uiview 的框架。

# c++ - (c++) 有什么方法可以优化这个循环？不能在类中使用函数指针

> ID：14794703
> 
> 赞同：1
> 
> 时间：2013-02-10T04:25:02.130
> 
> 标签：c++, pointer-to-member, loop-unrolling

试图优化`fun_a1()`功能。变量`j`在范围内不变`fun_a1()`。因此，为每个“i”迭代检查 j==1 或 2 或 3 显然是对 CPU 周期的浪费。但是如果我试图将条件评估带到循环之外，我必须为每个条件编写冗余循环。在 C 语言中，我可以通过使用函数指针轻松解决这个问题。但是，C++ 不允许指向非静态函数的指针。我发现了一些描述神秘的“指向成员”的链接。（[示例 1](https://stackoverflow.com/questions/130322/how-do-you-pass-a-member-function-pointe)，[示例 2](http://www.codeproject.com/Articles/7150/Member-Function-Pointers-and-the-Fastest-)）但是仍然不清楚如何从对象本身内部使用它，例如从 fun_a() 内部？还是可以通过其他方式进行优化？

```
class A{
    void fun_b(int i);

    void fun_c(int i);

    void fun_d(int i);

    void fun_f(int i);

    void fun_a1(int j){

        for(int i=0; i<1000; i++){

                 if(j==1) fun_b(i);
            else if(j==2) fun_c(i);
            else if(j==3) fun_d(i);

            fun_f(i);           
        }

    }

    void fun_a2(int j){

        if(j==1){           
            for(int i=0; i<1000; i++) { 
                fun_b(i); 
                fun_f(i); 
            }
        }
        else if(j==2){          
            for(int i=0; i<1000; i++) { 
                fun_c(i);
                fun_f(i);
            }            
        }
        else if(j==3){
            for(int i=0; i<1000; i++) { 
                fun_d(i);           
                fun_f(i);
            }           
        }       
    }   
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T04:32:08.653

以下是如何使用指向成员函数的指针：

```
void (A::*fun)(int);
if(j == 1) fun = &A::fun_b;
else if(j == 2) fun = &A::fun_c;
else if(j == 3) fun = &A::fun_d;

for(int i=0; i<1000; i++) {
    (this->*fun)(i);
    fun_f(i);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T06:22:29.490

使用函数指针，如果编译器不删除它们，会严重影响性能。

未更改的局部变量上的原始 if 可能会在循环外进行优化：这不是一个非常花哨的优化。

但是，如果你想明确这一点，答案不是函数或方法指针。它是 lambdas 和仿函数。

```
template<typename Functor>
void fun_a2_internal(Functor f) {
  for(int i = 0; i < 1000; ++i) {
    f(i);
  }
}

void fun_a2(int j) {
  if (j==1)
    fun_a2_internal([&](int i){ fun_b(i); fun_f(i); });
  else if (j==2)
    fun_a2_internal([&](int i){ fun_c(i); fun_f(i); });
  else if (j==3)
    fun_a2_internal([&](int i){ fun_d(i); fun_f(i); });
} 
```

这里我们写一个`fun_a2_internal`它的工作是做一个循环，并在循环中做一些任务。

我们`fun_a2`通过 lambda 将该任务作为函子传递。

这具有编译器在编译循环时了解循环体的细节的效果，因为函子`operator()`是非虚拟的，因此对于每个实例都是相同的。

一般来说，如果您对优化问题的回答是“使用函数指针”（或成员指针），那么您的回答就错了。

这种技术是 C++`std::sort`比 C 更快的原因`qsort`。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-10T04:32:25.800

“优化”含糊不清，除非

*   1，有一个特定的问题被问到，说教授基于效率的概念

*   2、有一个特定的优化要做。

你要问的是优化这个“switch”语句

是的，switch 语句在这种情况下更干净，但更有效的方法是创建一个函数指针数组，指向包含这些循环的 void 函数，然后执行

```
doFunction[j](); 
```

例如

```
typedef void (*myfunc)(void);

myfunc options[10];

main()
{
    options[0] = (void*)loop1;
    options[1] = (void*)loop2;
    options[2] = (void*)loop3;
    options[3] = (void*)loop4;  
} 
```

PS：除非经过编译器优化，否则 i++ 比 ++i 慢。

# android - 打开街道地图离线工作android

> ID：14794705
> 
> 赞同：12
> 
> 时间：2013-02-10T04:26:11.670
> 
> 标签：android, android-maps, osmdroid, openstreetmap, android-maps-v2

我是开放街道地图的新手。我做了一些研究，发现我们可以下载地图并将其存储到一个文件夹中。但我没有找到任何提供离线开放街道地图的教程或示例。有人可以提供分步教程，请提供实现离线开放街道地图的指南。我正在关注这个例子[http://android-coding.blogspot.com/2012/06/example-of-implementing-openstreetmap.html](http://android-coding.blogspot.com/2012/06/example-of-implementing-openstreetmap.html)但现在我想让它在没有连接时可用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T09:24:24.203

就像在您提到的教程中一样，您可以使用 osmdroid 库： [https ://code.google.com/p/osmdroid/](https://code.google.com/p/osmdroid/)

这里有一个很好的解释 osmdroid 如何与离线地图一起工作： [https ://stackoverflow.com/a/8286276/891479](https://stackoverflow.com/a/8286276/891479)

在您的应用程序中使用 MapTileProviderBasic。这里的一些例子： [http ://www.androidadb.com/class/ma/MapTileProviderBasic.html](http://www.androidadb.com/class/ma/MapTileProviderBasic.html)

要生成 osmdroid 格式的离线地图，请使用 Mobile Atlas Creator： [http ://mobac.sourceforge.net/](http://mobac.sourceforge.net/)

您可以选择地图的来源和输出格式。生成后，将您的地图集以 zip 格式放入“/osmdroid/map”目录。

希望它会有所帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-23T06:33:37.847

我发现本[教程](http://www.haakseth.com/?p=30)逐步解释了您需要的所有内容。

简单来说：

1- 您必须使用[Mobile Atlas Creator](http://mobac.sourceforge.net/)下载地图图块。我已经解释了[这里的步骤](https://stackoverflow.com/a/32164040/2101822)

2- 将生成的 zip 文件移动到设备上的 /mnt/sdcard/osmdroid/。

3-将[osmdroid-android-XXX.jar](https://code.google.com/p/osmdroid/wiki/Downloads)和[slf4j-android-1.5.8.jar 添加](http://www.slf4j.org/android/)到项目的构建路径中

4- 添加 MapView：您可以将 MapView 添加到您的 xml 布局

```
<org.osmdroid.views.MapView
    android:id="@+id/mapview"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tilesource="Mapnik"
    /> 
```

或以编程方式创建 MapView：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
{
    mResourceProxy = new ResourceProxyImpl(inflater.getContext().getApplicationContext());
    mMapView = new MapView(inflater.getContext(), 256, mResourceProxy);
    return mMapView;
} 
```

希望能帮助到你 ;）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-10T13:36:16.923

MOBAC（Mobile Atlas Creator）现在被阻止使用 OSM 你可以[在这里看到](http://wiki.openstreetmap.org/wiki/Blocked_applications)

# java - 如何将十六进制字符串直接转换为字节数组？

> ID：14794708
> 
> 赞同：1
> 
> 时间：2013-02-10T04:26:31.970
> 
> 标签：java, hex, bytearray

我想将字符串转换为十六进制，然后转换为字节数组。到目前为止，这是我的代码：

```
public static void findKey(){

    Cipher cipher;
    SecretKeySpec key;
    byte [] keyBytes;
    byte [] pt;
    byte [] ct;

    String plaintext = "Plaintxt";
    ct = new byte [] {(byte)0x4A, (byte)0xC4, (byte)0x55, (byte)0x3D, (byte)0xB3, (byte)0x37, (byte)0xCA, (byte)0xB3};
    String ptHex = asciiToHex(plaintext);
    System.out.println(ptHex);
    pt = ptHex.getBytes();
    printByteArray(pt);
} 
```

我转换为十六进制的方法工作正常，但是当我使用 时`getBytes`，它显然将其转换为 16 字节，这不是我想要的。那只是一种尝试。这是仅打印我的字符串以确保其正常工作然后打印不正确的字节数组的输出：

```
506c61696e747874
[  35  30  36  63  36  31  36  39  36  65  37  34  37  38  37  34  ]
-------------Key  Found------------- 
```

我想将 50、6c、61 等放入一个字节数组中，就像我对 ct 所做的那样，例如 0x50、0x6c 等等。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T04:32:18.687

它可能会帮助你

```
Byte.parseByte(string, 16); 
```

检查[API](http://docs.oracle.com/javase/6/docs/api/java/lang/Byte.html#parseByte%28java.lang.String,%20int%29)

也检查这个[讨论](https://stackoverflow.com/questions/140131/convert-a-string-representation-of-a-hex-dump-to-a-byte-array-using-java)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T04:42:58.917

尝试

```
byte[] getBytes(String s) {
    byte[] a = new byte[s.length() / 2];
    for (int i = 0; i < a.length; i++) {
        a[i] = Byte.parseByte(s.substring(i * 2, i * 2 + 2), 16);
    }
    return a;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T14:05:59.777

使用这个单线，它采用 JDK 的 API：

```
byte[] array = ByteBuffer.allocate(8).putLong(Long.parseLong(chars, 16)).array(); 
```

* * *

这是一个测试：

```
import java.nio.ByteBuffer;

public static void main(String[] args) throws Exception {
    String chars= "506c61696e747874";
    byte[] array = ByteBuffer.allocate(8).putLong(Long.parseLong(chars, 16)).array();
    System.out.println(Arrays.toString(array));
} 
```

输出：

```
[80, 108, 97, 105, 110, 116, 120, 116] 
```

当然这里的输出是十进制的，但是值是正确的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-28T12:23:52.963

将十六进制转换为字节数组的简单java方法：

```
byte[] byteArray= new BigInteger(hexvalue, 2).toByteArray(); 
```

# visual-studio-2010 - 如何修复 Visual Studio 安装程序项目中的警告 1910 错误？

> ID：14794710
> 
> 赞同：7
> 
> 时间：2013-02-10T04:26:44.760
> 
> 标签：visual-studio-2010, installation, windows-installer

我有一个安装程序项目（Visual Studio 安装项目），它有一个桌面和指向项目输出的开始菜单链接。这两个快捷方式都链接到同一个输出程序集。

![Visual Studio 安装项目](../Images/2aeae7ff6bae0ca69d10e3cfc9d3c63e.png)

当我尝试执行卸载时，出现以下错误：

![警告 1910](../Images/fbbc44273a91b2658b58b48b96494270.png)

> *警告 1910。无法删除快捷方式 Bing Background.lnk。验证快捷方式文件是否存在并且您可以访问它。*

知道是什么原因造成的以及如何解决吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T08:22:45.857

事实上，只读属性似乎不断地重现这个问题（在 Win Vista 和 7 上执行了多个测试）。对于那些感兴趣的人，我制作了一个小 DLL 来检查属性，如果存在则将其删除。您可以[在此主题帖子（第 2 页）](http://www.advancedinstaller.com/forums/viewtopic.php?f=2&t=22387&start=15#p59626)中找到它。[您可以在使用您拥有的任何工具](http://en.wikipedia.org/wiki/Windows_Installer#Tools)创建的包中使用 DLL ，只要它构建基于 MSI 的设置即可。

我猜想，不能肯定地说，Windows Installer 会修改这个 INI 文件，例如，如果删除的快捷方式是在安装后由用户自定义的。

我做了一些测试，创建了一个安装桌面快捷方式并运行它的包，在卸载和安装过程中，我可以看到 msiexec.exe 不断访问“desktop.ini”。然后我从包中删除了快捷方式并从[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)中清除了日志，然后是新的安装和卸载过程。我再也找不到任何 msiexec.exe 访问 desktop.ini 的痕迹。

我没有太多时间搜索有关 Windows Installer 访问此文件的原因的文档，但是在搜索时我找不到任何东西。考虑到这个文件的属性必须保持不变，我们的微软朋友很可能没有对此发表任何官方声明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T01:20:56.237

请参阅此线程：[警告删除 Windows 8 中的快捷方式](http://social.msdn.microsoft.com/Forums/en-US/winformssetup/thread/09f72e05-f43f-4e7e-81b6-f81c1b60dc6c?prof=required)

> 调查仍在进行中，但我想分享一些信息。似乎具有设置了只读属性的 desktop.ini 的复制机器会导致出现卸载消息。如果只读属性被删除，消息将不会出现。对于每台机器安装的包，感兴趣的 desktop.ini 将位于此处：:\Users\Public\Public Desktop。随时分享您对此的反馈，我将再次发布，因为我有信息要分享。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-20T15:40:01.047

请注意，桌面文件夹中可能有两个名为“desktop.ini”的文件，因此请确保检查每个文件的属性。

而且它们不会按名称排序，因此它们并排显示，因此很容易错过有两个文件。

这解释了为什么有两个“desktop.ini”文件： http: [//www.howtogeek.com/198704/why-are-there-two-desktop.ini-files-on-windows-desktops/](http://www.howtogeek.com/198704/why-are-there-two-desktop.ini-files-on-windows-desktops/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-13T23:07:08.660

这是由于 desktop.ini 文件上的只读设置而发生的。详情请看[这里](http://kirandhappuri.wordpress.com/2014/10/13/wix-creation-of-desktop-and-start-menu-shortcuts-using-wix/)。

# mysql - 如何扩展 SQL 计算查询以提供多个父行的结果

> ID：14794715
> 
> 赞同：0
> 
> 时间：2013-02-10T04:27:58.387
> 
> 标签：mysql, sql

以下查询（针对教育应用程序）计算用户在特定练习中的得分。它适用于四个表 - 用户、钻头、问题和答案。每个问题都属于一个演练，每个答案都属于一个问题和一个用户（一个答案对于一个用户和一个问题来说是唯一的）。问题是多项选择，如果 answer.selectedChoice = 1，则答案是正确的。用户的演练分数基于该演练的最近五个答案，分配给正确答案的权重根据回答的速度进行调整。

我正在尝试弄清楚如何扩展此查询，以便不仅获取用户对特定练习的分数，还可以获得用户对他们至少回答了一个问题的每个练习的分数。我一直在研究将其重写为相关子查询，但到目前为止我的努力还不够。任何帮助将不胜感激。

```
SELECT data.*,
    SUM(data.isCorrect * (IF(rawScore < 0, 0, IF(rawScore > 1, 1, rawScore)))) / 5 AS score
FROM
    (SELECT 
        answer.id,
        IF(answer.selectedChoice = 1, 1, 0) AS isCorrect,  
        (1 - (answer.timeElapsed - question.baseTime) / (4 * question.baseTime)) as rawScore
     FROM
        answer,
        question
     WHERE
        answer.questionID = question.id AND
        question.drillID = :drillID AND
        answer.userID = :userID
     ORDER BY
        answer.created DESC
     LIMIT 
        5) as data 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T06:32:04.940

下面试试。假设您使用 answer.created 列的“他们已经回答了至少一个问题”的情况。这个想法是为一个用户获取所有问题并计算 isCorrect、rawScore、score(if case) 任何您需要的数据并按 question.drillID、answer.userID（用户每次训练的分数）分组，然后使用 HAVING 子句仅获取至少回答了一个问题（他们至少回答了一个问题）的用户。

下面的查询可能会给您带来错误的结果 - 请发布表结构和示例数据，我可以为您创建一个演示。

```
SELECT 
   answer.id,
   IF(answer.selectedChoice = 1, 1, 0) AS isCorrect,  
   (1 - (answer.timeElapsed - question.baseTime) / (4 * question.baseTime)) as rawScore
-- SUM(data.isCorrect * (IF(rawScore < 0, 0, IF(rawScore > 1, 1, rawScore)))) / 5 AS score
-- SUM(IF(answer.selectedChoice = 1, 1, 0) * (IF(1 - (answer.timeElapsed - question.baseTime) / (4 * question.baseTime)) < 0, 0, IF((1 - (answer.timeElapsed - question.baseTime) / (4 * question.baseTime)) > 1, 1, (1 - (answer.timeElapsed - question.baseTime) / (4 * question.baseTime)))))) / 5 AS score
FROM answer a 
INNER JOIN question q ON answer.questionID = question.id
GROUP BY 
   question.drillID, answer.userID
WHERE 
   answer.userID = :userID 
HAVING 
   COUNT(answer.created) >= 1; 
```

# wordpress - Facebook Like 对多个 Wordpress 帖子的计数相同

> ID：14794718
> 
> 赞同：0
> 
> 时间：2013-02-10T04:28:49.630
> 
> 标签：wordpress, facebook, plugins, facebook-like

我有一个在 wordpress 上运行的网站...

它使用 Facebook Wordpress 插件在每个帖子的底部生成点赞按钮和计数。

问题是许多帖子的点赞数相同——快速浏览主页会显示多个帖子的点数相同，均为 2780——这是仅在线一天后根本不可能的数字。其他一些帖子的计数正确（少于 10 个），但无法弄清楚为什么这个非常高的计数会附加到多个帖子。

任何想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:50:22.243

[在Facebook Debugger](https://developers.facebook.com/tools/debug)中查看您网站的一些页面，并查看多个页面是否返回相同的“规范 url”。

如果他们这样做，Facebook 会认为这些是同一个页面，并将汇总他们的喜欢和其他数据。检查这些页面的来源，确保只有一个唯一`og:url`标签，如果有`<link rel="canonical">`标签，它指向该内容的唯一永久链接，而不是您的主页。

如今，许多 WordPress 插件都添加了开放图形元标签，其中包括一些您意想不到的标签。

# c++ - C ++错误未声明的标识符

> ID：14794720
> 
> 赞同：1
> 
> 时间：2013-02-10T04:29:35.760
> 
> 标签：c++

我无法解决它...请帮助

项目\intento2\intento2\as.cpp(128)：错误 C2065：“生成”：未声明的标识符

```
 mov ecx,[ebp+32]
    mov edx,[ebp+28]
    PUSHAD;

 if (Generate)
{
 GenerateTexture(pDevice, &texGreen , D3DCOLOR_ARGB(255,0,255,0));
 Generate = false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T04:36:39.663

显然，编译器抱怨`Generate`在您尝试使用它的地方不存在符号。

它可以是任意数量的东西，例如：

*   名称拼写错误；
*   将其声明在 inactive 中`#ifdef`；
*   不包括声明它的头文件；或者
*   十几种其他可能性。

我们实际上无法从您发布的代码中看出您是如何（或是否）定义它的，因此您必须先去找到它。一旦您找到并发布它（或者如果您忽略了这样做，则创建它），我们应该能够提供进一步的帮助。

# php - 将数据从 PHP 导入 D3.JS

> ID：14794722
> 
> 赞同：5
> 
> 时间：2013-02-10T04:29:47.033
> 
> 标签：php, javascript, variables, d3.js

我有这个：

```
<script type="text/javascript">
var dataset = [ 5, 10, 15, 20, 25 ];

        d3.select("body").selectAll("p")
            .data(dataset)
            .enter()
            .append("p")
            .text("New paragraph!");
</script> 
```

有用。然后我一直在学习 MySQL/PHP，并在一个小型数据库中保存了一些数据。

```
<?php
if ( $results ) {
foreach($results as $row) {
    echo $row->eventName . "<br>";
}
} else {
echo 'No rows found.';
}
?> 
```

这与它的其余部分一起工作，并显示一些随机事件名称，如电影、购物、工作。

我找到了关于如何将 PHP 变量引入 Javascript 的[本教程](http://www.roseindia.net/tutorial/php/php-variables-javascript.html "本教程")，但无法弄清楚。为了简化而不是试图找出数组，我什至切换到只是试图找出数据本身，但甚至无法得到它。这是我最后一次尝试是：

```
 <?php
$php_var = 1;
?>

<script type="text/javascript">
var dataset = <?php echo $php_var; ?>

        d3.select("body").selectAll("p")
            .data(dataset)
            .enter()
            .append("p")
            .text("New paragraph!");
</script> 
```

然后我想也许一个数组会起作用，所以尝试了这个

```
<?php
$php_var = array(
    5, 10, 15, 20, 25);
?>

<script type="text/javascript">
var dataset = $php_var

        d3.select("body").selectAll("p")
            .data(dataset)
            .enter()
            .append("p")
            .text("New paragraph!");
</script> 
```

但也没有运气。谁能给我一些建议或指导我如何将数据从 PHP 获取到 Javascript 的教程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T04:34:01.190

尝试使用[PHP 的`json_encode`函数](http://www.php.net/json_encode)，然后嵌入数据：

```
<?php
    $dataset = array(5, 10, 15, 20, 25);
?>
<script>
    var dataset = <?php echo json_encode($dataset); ?>;
    // ...
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-01-22T03:50:52.497

我意识到这对聚会来说有点晚了，但是除非您的服务器设置为这样做，否则您不能在 .html 文件中包含 php 并成功解析它。

您需要将以下片段之一添加到您的 .htaccess 中：

```
RemoveHandler .html .htm
AddType application/x-httpd-php .php .htm .html 
```

或者

```
<FilesMatch "\.html$">
ForceType application/x-httpd-php
</FilesMatch> 
```

# python - 使用 Python 进行 iOS 编程

> ID：14794724
> 
> 赞同：9
> 
> 时间：2013-02-10T04:30:10.767
> 
> 标签：python, ios, objective-c, xcode, numpy

我正在开发 iOS 应用程序，想知道是否可以在 Xcode 中使用 python 脚本来开发我的应用程序。

我对 Objective C 很满意，我的目标不是使用 python 创建我的整个应用程序。大多数代码仍将在 Objective-C 中。我使用的算法计算量很大；所以我认为使用 python（以及 numpy 和 scipy）会加快速度。

我听说 PyObjC“可能”有用，但我发现 stackoverflow 上的线程表明 PyObjC 与 XCode 4 不兼容。

此外，还有其他更适合的替代方案来在 iOS 中执行计算繁重的任务。

谢谢你的回答，提前。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T14:36:01.573

我尝试安装 PyObjC，在阅读了五个小时的 stackoverflow 和文档后，我终于让它运行起来了。对我来说，这个链接就像一个魅力：[https](https://github.com/gregneagle/Xcode4CocoaPythonTemplates) ://github.com/gregneagle/Xcode4CocoaPythonTemplates （没有 GUI，也看到[这个](https://stackoverflow.com/a/5860455/1987798)答案）。有关在 iOS 中使用 PyObjC 的示例，请参阅[此链接。](http://www.saurik.com/id/5)

# url - 如何在 url 中执行没有 id 的数据库查询？

> ID：14794733
> 
> 赞同：1
> 
> 时间：2013-02-10T04:31:53.007
> 
> 标签：url, web

我看到了这样的链接：[http](http://www.quora.com/Web-Design) ://www.quora.com/Web-Design 。该链接列出了网页设计主题中的所有问题。

我只是好奇他们如何执行数据库查询。我不认为他们使用网页设计作为获取数据的关键。原因' 我经常看到类似的链接：[http://www.myweb.com/Web-Design-1234](http://www.myweb.com/Web-Design-1234)，其中 1234 是主题 ID。

你知道他们是怎么做的吗？或者他们只是使用主题名称（网页设计）作为检索数据的关键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T08:04:12.310

我不确定，因为它是网站的内部结构，但如果你看到链接，这些想法可以实现这个 AFAIK，你可以理解他们使用

[http://www.quora.com/Typography/What-are-some-free-tools-to-lay-out-text-beautifully](http://www.quora.com/Typography/What-are-some-free-tools-to-lay-out-text-beautifully)

```
 ^                ^
              first key tag      second key tag 
```

和问题的名称作为关键。

# php - php在mac上不显示

> ID：14794735
> 
> 赞同：0
> 
> 时间：2013-02-10T04:32:14.940
> 
> 标签：php, mysql, macos

我正在使用 php 访问 mysql 数据库并让 Safari 呈现 php 代码。我在运行 Mountain Lion 的 Mac 上完成了所有设置。phpinfo() 完美呈现。如果我使用 textmate 并在 phpmate 中运行 php 代码，我可以访问数据库并获取我需要的信息。但是当我在 Safari 中访问它时，它会显示 php 代码，而不是连接到 sql 服务器并显示数据库。

想法/想法？我有 apache 工作，我有 mysql 工作。使用命令行查询 mysql 也可以。它只是不呈现 php 代码的 Safari。谢谢。

```
<HTML>
 <HEAD>
  <TITLE> Our List of Link </TITLE>
  <HEAD>
   <BODY>
 <?php

  $dbcnx = $link = mysql_connect("localhost",'root','root');

  if (!$dbcnx) {
die(mysql_error());
  echo( "<P>Unable to connect to the " .
      "database server at this time.</P>" );
}

 if (! @mysql_select_db("UrlList") ) {
 echo( "<P>Unable to locate the  " .
      "database at this time.</P>" );
  exit();
}

 ?>
</BLOCKQUOTE>
</BODY>
 </HTML 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T04:42:06.830

在我看来，您需要设置 apache 目录。当您在 safari 中打开 php 文件时，您只是双击该文件，还是转到 localhost/myfile.php？绝对是 apache 的设置来处理目录/文件，因为目前不是，safari 正在直接读取文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T06:28:41.863

必须将文件重命名为 .php 并且它有效。再次感谢。

# c++ - 使用 fstream 逐个字符读取并将 fstream 传递给函数以供进一步阅读？

> ID：14794740
> 
> 赞同：0
> 
> 时间：2013-02-10T04:32:44.393
> 
> 标签：c++

好的，所以我正在尝试打开一个文件进行读取，并且我只想读取第一个字符，这取决于那个字符是什么，我将它发送到给定的函数。例如，如果它是一个数字，我将它发送到一个继续读取的函数，以查看它是一个 int 还是一个 float。我似乎无法弄清楚如何做到这一点

```
void dummy(char dum, std::ifstream& fin){
    char test = dum;
    fin>>test;
    string simple = simple + test;
    simple = simple + test;
    ofstream outFile;
    outFile.open("output.txt");
    outFile<<simple<<"\n";
    return;
}

int main(int argc, char *argv[]){
    char c;
    //ifstream readFile;
    /*if(argc >= 1){
    readFile.open(argv[1]);
    }*/
    ifstream readFile;
    readFile.open("input.txt");
    readFile.unsetf(ios_base::skipws);
    readFile>>c;
    while(!readFile.eof())
    {   
        switch(c){
        case 'a':
            dummy(a,readFile);
        }
    }
} 
```

它不断抛出此错误：Microsoft C++ 异常：std::bad_alloc 在内存位置（位置）。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-03T19:27:42.787

你可以打开你的txt文件并通过下面的代码给出第一个字符！第一个字符在变量 s 中。

```
#include <fstream>
#include <iostream>
#include <conio.h>
using namespace std;

void main (void)
{
char *s=NULL;
char str1;
ifstream file_txt("file_name.txt");
if (!file_txt)
{
cout << "sorry I cannot find txt file! ";
getch();
exit(0);
 }
file_txt >> str1;
s= &str1;
file_txt.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T04:57:38.663

错误是由这一行引起的：

```
string simple = simple + test; 
```

以前从未见过这种情况，但我猜你正在连接一个尚未初始化的字符串。改用这个：

```
void dummy(char dum, std::ifstream& fin)
{
    char test = dum;
    fin>>test;
    string simple;
    simple = simple + test;
    ofstream outFile;
    outFile.open("output.txt");
    outFile<<simple<<"\n";
    return;
} 
```

**编辑**：要从文本文件中读取一定数量的字符，请使用[istream::read](http://www.cplusplus.com/reference/istream/istream/read/)方法：

```
char test = '\0';
fin.read( &test, 1 ); // read one character into buffer 
```

# iphone - NSURLConnection - 使用另一个类作为委托时获取响应数据，并且当存在身份验证挑战时

> ID：14794743
> 
> 赞同：1
> 
> 时间：2013-02-10T04:33:10.837
> 
> 标签：iphone, ios, objective-c, ios6, nsurlconnection

我正在使用我的内部 api 从我的服务器检索数据。我正在使用基本身份验证来实现这一点。由于 API 的性质，我没有在我的服务器代码上实现任何会话或任何其他内容，所以我将用户名和密码与我的所有请求一起发送。

因此，我不想为我正在使用的每个视图控制器实现 NSURLConnection 委托。因此，我创建了一个扩展 NSObject 的辅助类，并将其设置为 NSURLConnectionDelegate。

```
@interface HandlerClass : NSObject <NSURLConnectionDelegate> 
```

我实现了我需要的每一个方法，我这样称呼它：

```
NSURL *URL = [NSURL URLWithString:@"https://url/ifuser/"];
NSLog(@"Connection ");

NSURLRequest *request = [NSURLRequest requestWithURL:URL
                                         cachePolicy:NSURLRequestReloadIgnoringCacheData
                                     timeoutInterval:30.0];

NSHTTPURLResponse *response;

HandlerClass *cc = [[HandlerClass alloc] init];

cc.username = self.username.text;
cc.password = self.password.text;

NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:cc]; 
```

但是无论我尝试什么，我都无法从该代表那里获得数据响应数据。

我真的试图阅读互联网上的每一篇文章，包括 stackoverflow 和其他网站。每个解决方案都不需要身份验证。

但我只需要身份验证的解决方案。

谢谢。

~~~~~~~~~~~~~~~~~~~~~~~~~

编辑：我知道我犯了几个多余的错误。但我可以弄清楚做错了什么。我只需要使用 NSRunLoop 来实现我的目标。谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T16:21:36.123

这就是我所做的。我参考了这篇文章：[Basic Authentication with a NSURLRequest in Cocoa Touch](http://www.chrisumbel.com/article/basic_authentication_iphone_cocoa_touch)，它使用同步请求。这里异步用于请求。

ConnectionHandler.h

```
#import <Foundation/Foundation.h>

@interface ConnectionHandler : NSObject<NSURLConnectionDataDelegate>

@property(nonatomic, retain) NSString *username;
@property(nonatomic, retain) NSString *password;

- (void)start;

@end 
```

在 ConnectionHandler.m

```
#import "ConnectionHandler.h"
#import "Base64.h"
@interface ConnectionHandler()
{
    NSMutableData *receivedData;
    NSURLConnection *connection;
}
@end
@implementation ConnectionHandler

- (id)init
{
    self = [super init];
    if (self) {
        receivedData = [[NSMutableData alloc] init];
    }
    return self;
}

- (void)start
{
    NSURL *url = [NSURL URLWithString:@"http://192.168.1.103/~will/"];

    NSError *myError = nil;

    // create a plaintext string in the format username:password
    NSMutableString *loginString = (NSMutableString*)[@"" stringByAppendingFormat:@"%@:%@", self.username, self.password];

    // employ the Base64 encoding above to encode the authentication tokens
    NSString *encodedLoginData = [Base64 encode:[loginString dataUsingEncoding:NSUTF8StringEncoding]];

    // create the contents of the header
    NSString *authHeader = [@"Basic " stringByAppendingFormat:@"%@", encodedLoginData];

    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL: url
                                                       cachePolicy: NSURLRequestReloadIgnoringCacheData
                                                   timeoutInterval: 3];

    // add the header to the request.  Here's the $$$!!!
    [request addValue:authHeader forHTTPHeaderField:@"Authorization"];

    // perform the reqeust
    NSURLResponse *response;

    connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
    [connection start];

}

//a simple request may receive several response, when a new response receive, the previous received should be reset.
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [receivedData setLength:0];
}
//a connection may receive data several time, append the received data to existing data
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [receivedData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    connection = nil;
    receivedData = nil;

    NSLog(@"Connection failed! Error - %@ %@",
      [error localizedDescription],
      [[error userInfo] objectForKey:NSErrorFailingURLStringKey]);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{

    NSLog(@"succeeded  %d byte received",[receivedData length]);
    receivedData = nil;
    connection = nil;
}
@end 
```

Base64.m

```
#import "Base64.h"

static char *alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";

@implementation Base64

+(NSString *)encode:(NSData *)plainText {
    int encodedLength = (4 * (([plainText length] / 3) + (1 - (3 - ([plainText length] % 3)) / 3))) + 1;
    unsigned char *outputBuffer = malloc(encodedLength);
    unsigned char *inputBuffer = (unsigned char *)[plainText bytes];

    NSInteger i;
    NSInteger j = 0;
    int remain;

    for(i = 0; i < [plainText length]; i += 3) {
        remain = [plainText length] - i;

        outputBuffer[j++] = alphabet[(inputBuffer[i] & 0xFC) >> 2];
        outputBuffer[j++] = alphabet[((inputBuffer[i] & 0x03) << 4) |
                                 ((remain > 1) ? ((inputBuffer[i + 1] & 0xF0) >> 4): 0)];

        if(remain > 1)
            outputBuffer[j++] = alphabet[((inputBuffer[i + 1] & 0x0F) << 2)
                                     | ((remain > 2) ? ((inputBuffer[i + 2] & 0xC0) >> 6) : 0)];
        else
            outputBuffer[j++] = '=';

        if(remain > 2)
            outputBuffer[j++] = alphabet[inputBuffer[i + 2] & 0x3F];
        else
            outputBuffer[j++] = '=';
    }

    outputBuffer[j] = 0;

    NSString *result = [NSString stringWithCString:outputBuffer length:strlen(outputBuffer)];
    free(outputBuffer);

    return result;
}

@end 
```

在视图控制器中

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    ConnectionHandler *connectionHandler = [[ConnectionHandler alloc] init];
    connectionHandler.username = @"username";
    connectionHandler.password = @"password";
    [connectionHandler start];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-15T07:25:30.920

我经历了类似的要求，请查看发布到此[问题的解决方案](https://stackoverflow.com/questions/23056775/get-nsurlconnection-response-from-a-helper-class-inside-method-of-a-different)

该解决方案使用完成块，并且可以很好地从另一个（处理程序）类中实现的委托方法中检索信息。

# java - 检查某些东西是否等于不同的东西java

> ID：14794744
> 
> 赞同：0
> 
> 时间：2013-02-10T04:33:13.543
> 
> 标签：java

例如：

```
if(!UserInputSplit[i].equalsIgnoreCase("the" || "an") 
```

产生一个语法错误。这有什么办法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T04:34:49.127

您需要明确地与每个字符串进行比较。

例子：

```
if(!UserInputSplit[i].equalsIgnoreCase("the") || !UserInputSplit[i].equalsIgnoreCase("an")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T04:59:31.223

使用一系列 || 如果您有一小部分要比较的项目，那很好，如较早的答案中所述：

```
if (!UserInputSplit[i].equalsIgnoreCase("the") || !!UserInputSplit[i].equalsIgnoreCase("the")) {
  // Do something when neither are equal to the array element
} 
```

但是，如果您有比一小组项目更大的东西，您可以考虑改用地图或一组：

```
// Key = animal, Value = my thoughts on said animal
Map<String, String> animals = new HashMap<String, String>();
animals.put("dog", "Fun to pet!");
animals.put("cat", "I fear for my life.");
animals.put("turtle", "I find them condescending.");

String[] userInputSplit = "I have one dog, a cat, and this turtle has a monocle.".split(" "); 

for (String word : UserInputSplit) {
  word = word.toLowerCase(); // Some words may be upper case. This only works if the cases match.
  String thought = animals.get(word);
  if (thought != null) {
    System.out.println(word + ": " + thought);
  }
} 
```

如果您采用这种方法，您当然希望将其放入自己的类中，或者以某种方式将其加载一次，因为您不希望每次都设置一个巨大的地图。

# java - Icon 类的错误，它只在 web 上而不是 aplet-viewer 上播种

> ID：14794746
> 
> 赞同：0
> 
> 时间：2013-02-10T04:33:21.547
> 
> 标签：java, image, swing, applet

我有一个加载图标数组的类，我的小程序使用 2 个这样的数组，一个用于图像，一个用于缩略图。我有一个动画线程，它通过缩略图数组旋转一组 6 个缩略图，以及一个允许滚动缩略图的滑块。

当我使用 applet-viewer 时，程序工作正常，但是如果我打包 applet 并在浏览器上查看它，或者如果我将未打包的 applet 上传到网站上，则缩略图，而不是使用相同类加载的图像不会显示在屏幕上，缩略图附带的功能变得滞后。

我不能保证该网站不会改变，但您可以尝试自己在[http://tokweweb.uphero.com/上查看错误](http://tokweweb.uphero.com/)

这是给我问题的类的代码：

谢谢

```
 public class IconArray {
    private ImageIcon[] Icons;
    private int Count;
    private String Filepath;

    IconArray(String filepath, int count){
        Count = count;
        Icons = new ImageIcon[Count];
        Filepath = filepath;
    }

    IconArray(String filepath, int count, boolean Autoload){
        Count = count;
        Icons = new ImageIcon[Count];
        Filepath = filepath;
        if(Autoload){
            for(int i = 0; i<Count; i++){
                Icons[i] = new ImageIcon(getClass().getResource(Filepath+i+".jpg"));
            }
        }
    }

    public Icon GetIcon(final int i) throws InterruptedException{
        if(Icons[i]!=null){
          return Icons[i];
          }else{
            Integer temp = new Integer(i);
            Icons[i] = new javax.swing.ImageIcon(getClass().getResource(Filepath+temp.toString()+".jpg"));
            return Icons[i];
        }    
    }

    public int GetCount(){
        return Count;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T04:59:57.020

您的小程序似乎由一个类文件组成。您可能希望将图像与您的类捆绑在一个 JAR 文件中，如在[*Swing Applet 中使用图像中*](http://docs.oracle.com/javase/tutorial/uiswing/components/applet.html#images)所示。

# iphone - 如何将 ALAsset 对象存储为 NSManagedObject 的属性

> ID：14794753
> 
> 赞同：0
> 
> 时间：2013-02-10T04:34:48.280
> 
> 标签：iphone, objective-c, core-data, ios6, nsmanagedobject

我的应用程序允许用户从相机胶卷上传照片。由于我使用 NSManagedObject 来管理上传的照片，所以我想将 ALAsset 对象存储为 NSManagedObject 的属性。我试图将属性类型设置为“Transformable”并将可转换名称设置为“NSUnarchiveFromDataTransformerName”。但是，我的应用程序在存储 ALAsset 时崩溃了。有人可以分享如何将 ALAsset 对象存储为 NSManagedObject 的属性。非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-11T08:32:29.320

您可以存储该资产的 url，而不是存储 ALAsset 对象。

您可以获取资产对象的 url：

```
 [asset.defaultRepresentation.url absoluteString] 
```

从 url 中，您可以在需要时获取资产对象。

通过调用此方法：

```
 [assetslibrary assetForURL:assetURL resultBlock:assetResultBlock failureBlock:failureBlock]; 
```

# android - 从 Google Maps Android 单击标记时如何显示对话框

> ID：14794758
> 
> 赞同：2
> 
> 时间：2013-02-10T04:35:44.237
> 
> 标签：android, google-maps, google-maps-markers, google-maps-api-2, google-maps-android-api-2

单击地图中的自定义标记后，我试图通过 Google Maps Android API v2 显示来自 Google Maps 的自定义对话框。自定义标记将显示其放置位置的当前交通状况。自定义对话框包含地点的名称、当前道路的南北行交通状况、一些建议（如道路正在建设中等）以及交通更新的时间。所有这些数据都来自一个 XML 文件并存储在 sqlite 数据库中。我现在的问题是，当我单击任何标记时，它只显示查询中第一个数据的对话框。我知道我的查询是正确的，因为标记包含有关交通状况的正确图标。我想问题只出在循环过程上。我也尝试使用 for 循环，但生成了相同的输出。谁能帮助我实现我的目标？任何帮助或建议将不胜感激。提前致谢。

```
import java.sql.Date;
import java.text.SimpleDateFormat;

import android.app.Dialog;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.TextView;
import android.widget.Toast;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMap.OnMarkerClickListener;
import com.google.android.gms.maps.SupportMapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;

public class MapViewActivity extends android.support.v4.app.FragmentActivity {

    public static final LatLng CITYHALL = new LatLng(07.0644444, 125.6077778);
    private GoogleMap mMap;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.layout_mapview);

        setUpMapIfNeeded();
    }

    private void setUpMapIfNeeded() {

        if (mMap == null) {
            mMap = ((SupportMapFragment) getSupportFragmentManager()
                    .findFragmentById(R.id.map)).getMap();
            if (mMap != null) {
                setUpMap();
            }
        }
    }

    private Boolean isOnline() {
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo ni = cm.getActiveNetworkInfo();
        if (ni != null && ni.isConnected())
            return true;

        return false;
    }

    private void setUpMap() {

        if (isOnline()) {

            String query = "SELECT * FROM TrafficCondition";
            SQLiteDatabase db = openOrCreateDatabase("_dds", MODE_PRIVATE, null);
            final Cursor c = db.rawQuery(query, null);

            final Dialog d = new Dialog(MapViewActivity.this);
            d.setContentView(R.layout.mapview_marker_dialog);
            d.setTitle("Traffic Information");

            if (c.moveToFirst()) {
                do {
                    final int id = c.getInt(c.getColumnIndex("id"));
                    final String name = c.getString(c.getColumnIndex("name"));
                    final double lat = c.getDouble(c.getColumnIndex("lat"));
                    final double lng = c.getDouble(c.getColumnIndex("lng"));
                    final int north_condition = c.getInt(c
                            .getColumnIndex("north_condition"));
                    final int south_condition = c.getInt(c
                            .getColumnIndex("south_condition"));
                    final String north_advisory = c.getString(c
                            .getColumnIndex("north_advisory"));
                    final String south_advisory = c.getString(c
                            .getColumnIndex("south_advisory"));
                    final String icon = c.getString(c.getColumnIndex("icon"));
                    final String traffic_last_updated = c.getString(c
                            .getColumnIndex("traffic_last_updated"));

                    final SimpleDateFormat dateFormat = new SimpleDateFormat(
                            "EEE, dd MMM yyyy kk:mm:ss Z");
                    final Date app_last_updated = new Date(c.getLong(c
                            .getColumnIndex("app_last_updated")));
                    final String appLastUpdated = dateFormat
                            .format(app_last_updated);

                    mMap = ((SupportMapFragment) getSupportFragmentManager()
                            .findFragmentById(R.id.map)).getMap();

                    mMap.addMarker(new MarkerOptions()
                            .position(new LatLng(lat, lng))
                            .icon(BitmapDescriptorFactory.fromAsset(new String(
                                    icon + ".png"))));

                    mMap.moveCamera(CameraUpdateFactory.newLatLngZoom(CITYHALL,
                            12));

                    mMap.setOnMarkerClickListener(new OnMarkerClickListener() {

                        @Override
                        public boolean onMarkerClick(Marker marker) {
                            // TODO Auto-generated method stub

                            String nNoData = "NorthBound: No Data";
                            String nLightCon = "NorthBound: Light";
                            String nModerateCon = "NorthBound: Moderate";
                            String nHeavyCon = "NorthBound: Heavy";

                            String sNoData = "SouthBound: No Data";
                            String sLightCon = "SouthBound: Light";
                            String sModerateCon = "SouthBound: Moderate";
                            String sHeavyCon = "SouthBound: Heavy";

                            TextView title = (TextView) d
                                    .findViewById(R.id.traffic_con_node_title);
                            title.setText(name);

                            TextView nTrafficCon = (TextView) d
                                    .findViewById(R.id.n_traffic_con);
                            TextView sTrafficCon = (TextView) d
                                    .findViewById(R.id.s_traffic_con);

                            TextView nAdvisoryTitle = (TextView) d
                                    .findViewById(R.id.n_traffic_con_ad_title);
                            TextView sAdvisoryTitle = (TextView) d
                                    .findViewById(R.id.s_traffic_con_ad_title);

                            TextView nTrafficConAd = (TextView) d
                                    .findViewById(R.id.n_traffic_con_ad_content);
                            TextView sTrafficConAd = (TextView) d
                                    .findViewById(R.id.s_traffic_con_ad_content);

                            TextView TrafficLastUpdated = (TextView) d
                                    .findViewById(R.id.traffic_con_last_updated);

                            if (north_condition == 0) {
                                nTrafficCon
                                        .setBackgroundResource(R.drawable.n_bg_nodata);
                                nTrafficCon.setText(nNoData);
                            } else if (north_condition == 1) {
                                nTrafficCon
                                        .setBackgroundResource(R.drawable.n_bg_light);
                                nTrafficCon.setText(nLightCon);
                            } else if (north_condition == 2) {
                                nTrafficCon
                                        .setBackgroundResource(R.drawable.n_bg_moderate);
                                nTrafficCon.setText(nModerateCon);
                            } else if (north_condition == 3) {
                                nTrafficCon
                                        .setBackgroundResource(R.drawable.n_bg_heavy);
                                nTrafficCon.setText(nHeavyCon);
                            }

                            if (south_condition == 0) {
                                sTrafficCon
                                        .setBackgroundResource(R.drawable.s_bg_nodata);
                                sTrafficCon.setText(sNoData);
                            } else if (south_condition == 1) {
                                sTrafficCon
                                        .setBackgroundResource(R.drawable.s_bg_light);
                                sTrafficCon.setText(sLightCon);
                            } else if (south_condition == 2) {
                                sTrafficCon
                                        .setBackgroundResource(R.drawable.s_bg_moderate);
                                sTrafficCon.setText(sModerateCon);
                            } else if (south_condition == 3) {
                                sTrafficCon
                                        .setBackgroundResource(R.drawable.s_bg_heavy);
                                sTrafficCon.setText(sHeavyCon);
                            }

                            String empty = "null";

                            if ((north_advisory.trim().length() > 0)
                                    && (!north_advisory.equals(empty))) {
                                nAdvisoryTitle.setVisibility(View.VISIBLE);
                                nTrafficConAd.setVisibility(View.VISIBLE);
                                nTrafficConAd.setText(north_advisory);
                            } else if (nAdvisoryTitle.equals(null)) {
                                nAdvisoryTitle.setVisibility(View.GONE);
                                nTrafficConAd.setVisibility(View.GONE);
                            }

                            if ((south_advisory.trim().length() > 0)
                                    && (!south_advisory.equals(empty))) {
                                sAdvisoryTitle.setVisibility(View.VISIBLE);
                                sTrafficConAd.setVisibility(View.VISIBLE);
                                sTrafficConAd.setText(south_advisory);
                            } else {
                                sAdvisoryTitle.setVisibility(View.GONE);
                                sTrafficConAd.setVisibility(View.GONE);
                            }

                            TrafficLastUpdated.setText("Updated "
                                    + traffic_last_updated + ".");

                            d.show();
                            return false;
                        }
                    });
                } while (c.moveToNext());
            }
        } else {
            Toast.makeText(MapViewActivity.this, "No connection..",
                    Toast.LENGTH_LONG).show();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-23T21:16:18.917

您为每个数据元素调用一次 mMap.setOnMarkerClickListener。你应该只调用一次。您应该将数据库中的数据存储在由标记 ID 索引的 Map 中。然后，当用户点击标记时，您可以检索它并显示适当的信息。

# php - 从 json 对象附加的重复条目

> ID：14794759
> 
> 赞同：0
> 
> 时间：2013-02-10T04:35:50.750
> 
> 标签：php, jquery, json

我从stackoverflow中搜索并实现了以下jquery代码，这是从php获取json对象并将其附加为li标签，但它附加了一个值的3个实例。 **示例代码是：**

```
 var $childs = $('.childs');

            $.getJSON('common/db/fetchUniversity.php', function(data) {
            $(data).each(function() {
                var $element = $childs.clone().removeClass('childs').appendTo('#colleges');
                $element.attr('id', this.id+"u");
                $element.html("<a href='#' class='img'><strong><img alt='image' src='images/mit.jpg' style='height:40px; width:40px;' /></strong></a><div style='padding-right: 30px;'><h4 style='display:inline; margin:1px;'>"+this.name+"</h4><p style='display:inline;'>"+this.description+"</p></div><p style='margin:2px;'><a href='#' style='text-decoration: none;'><span class='ui-icon ui-icon-circle-plus' style='display:inline-block; vertical-align:middle;'></span>Follow</a></p><ul class='actions'><li class='remove'><a href='javascript:RemoveMe('#"+this.id+"u')'><span class='ui-icon ui-icon-closethick'>close</span></a></li></ul>");
                });
            });

            $.getJSON('common/db/fetchPeople.php', function(data1) {
                $(data1).each(function() {
                    var $element = $childs.clone().removeClass('childs').appendTo('#people');
                    $element.attr('id', this.id+"p");
                    $element.html("<a href='#' class='img'><strong><img alt='image' src='"+btoa(this.pic)+"' style='height:40px; width:40px;' /></strong></a><div style='padding-right: 30px;'><h4 style='display:inline; margin:1px;'>"+this.name+"</h4><p style='display:inline;'>"+this.job_desc+","+this.location+"</p></div><p style='margin:2px;'><a href='#' style='text-decoration: none;'><span class='ui-icon ui-icon-circle-plus' style='display:inline-block; vertical-align:middle;'></span>Follow</a></p><ul class='actions'><li class='remove'><a href='javascript:RemoveMe('#"+this.id+"p')'><span class='ui-icon ui-icon-closethick'>close</span></a></li></ul>");
                    });
                });

            $.getJSON('common/db/fetchGroups.php', function(data) {
                $(data2).each(function() {
                    var $element = $childs.clone().removeClass('childs').appendTo('#groups');
                    $element.attr('id', this.id+"g");
                    $element.html("<a href='#' class='img'><strong><img alt='image' src='images/groups/hbr.jpg' style='height:40px; width:40px;' /></strong></a><div style='padding-right: 30px;'><h4 style='display:inline; margin:1px;'>"+this.name+"</h4><p style='display:inline;'>"+this.job_desc+","+this.location+"</p></div><p style='margin:2px;'><a href='#' style='text-decoration: none;'><span class='ui-icon ui-icon-circle-plus' style='display:inline-block; vertical-align:middle;'></span>Follow</a></p><ul class='actions'><li class='remove'><a href='javascript:RemoveMe('#"+this.id+"g')'><span class='ui-icon ui-icon-closethick'>close</span></a></li></ul>");
                    });
                }); 
```

上面的代码正在获取 3 个 json 对象，并将其附加到 li 标签，但以上所有代码都添加了 3 个单值实例。li 标签位于 jquery 手风琴内。

当我点击 json php 文件时，它返回正确，我猜 jquery 代码对我做错了什么。请让我知道我哪里出错了。

**json 对象，当在浏览器中输入时：-**

```
[{"id":1,"name":"Stanford university","description":"One of the best university in the world"},{"id":2,"name":"Princeton University","description":"One of the best university in the world"},{"id":3,"name":"Yale University","description":"One of the best university in the world"},{"id":4,"name":"California University","description":"One of the best university in the world"},{"id":5,"name":"Yale University","description":"One of the best university in the world"},{"id":6,"name":"California University","description":"One of the best university in the world"},{"id":7,"name":"Princeton University","description":"One of the best university in the world"},{"id":8,"name":"Stanford university","description":"One of the best university in the world"},{"id":9,"name":"California University","description":"One of the best university in the world"},{"id":10,"name":"Princeton University","description":"One of the best university in the world"},{"id":11,"name":"Yale University","description":"One of the best university in the world"}] 
```

上面的 id:1 值附加了 3 次，所有值都发生了这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T00:49:55.393

**也许**在你的 DOM中有不止一个具有类子元素的元素。

# c++ - 在 C++ 中使用变量作为数组的维度？

> ID：14794760
> 
> 赞同：3
> 
> 时间：2013-02-10T04:35:55.283
> 
> 标签：c++, arrays, c++11, dimension

我只是想知道为什么这在 Clang 4.0 中有效：

```
unsigned cnt = 42;
int k[cnt]; 
```

但这不会：

```
unsigned cnt = 42;
string bad[cnt]; 
```

我刚刚检查了 C++ 入门第 5 版。它说：

> 维度必须在编译时已知，这意味着维度必须是常量表达式

如果这是真的，为什么会`int k[cnt];`起作用？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-10T04:39:14.217

这两个片段都不能在 C++ 中工作。

但是，在 C 中，可以使用非常量表达式作为数组大小。一些编译器（例如，没有`-pedantic`选项的 GCC）支持 C++ 代码中的 C 功能。

至于元素类型之间的区别，它是特定于编译器的。GCC 编译两者。在这种情况下，clang++ 禁止非 POD 类型（例如`std::string`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T19:57:06.770

clang 4.0 实际上是苹果 xcode clang 吗？我认为这实际上是 3.1 版。clang 本身提供了一个很好的解释：

```
warning: variable length arrays are a C99 feature
      [-Wvla-extension]
    int k[cnt]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T04:42:40.847

您使用的是什么编译器，我使用的是 gcc，并且 const 和 nonconst 都可以正常工作。

这不是 c 的问题，数组不是通过变量定义的，只有宏和 const 表达式。

这是编译器的解释问题，我怀疑它与标准有关。

# objective-c - NSFetchRequest求和、分组和排序

> ID：14794761
> 
> 赞同：5
> 
> 时间：2013-02-10T04:35:59.327
> 
> 标签：objective-c, sorting, core-data, group-by, nsfetchrequest

在我的应用程序中，我试图列出四种最受欢迎​​的产品。
产品受欢迎程度由订单总量决定。

下面的查询是为了说明我正在尝试做的事情：

```
SELECT     TOP 4  SUM(quantity) as sumQuantity, Product
FROM       [Order]
GROUP BY   Product
ORDER BY   1 DESC 
```

下面的代码是我在针对我的核心数据模型的 fetch 请求中获取它的方法：

```
// Create an expression to sum the order quantity
NSExpressionDescription *sumExpression = [[NSExpressionDescription alloc] init];
sumExpression.name = @"sumQuantity";
sumExpression.expression = [NSExpression expressionWithFormat:@"@sum.%K", OrderAttributes.quantity];
sumExpression.expressionResultType = NSInteger32AttributeType;

// Create the fetch request
NSFetchRequest *request = [Order createFetchRequest];
request.resultType = NSDictionaryResultType;
request.propertiesToFetch = @[OrderRelationships.product, sumExpression];
request.propertiesToGroupBy = @[OrderRelationships.product];
request.sortDescriptors = @[[NSSortDescriptor sortDescriptorWithKey:sumExpression.name ascending:NO]];
request.fetchLimit = 4; 
```

我的问题是 sortDescriptor，它似乎只允许 Order 的直接属性（应用程序异常）。
排序非常重要，因为它决定了将返回哪四条记录。

*注意：我使用的是 MagicalRecord 和 Mogenerator。我已经删除了类前缀。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T04:54:45.267

不幸的是，`NSSortDescriptor`想要一个实际的属性来排序，而不是动态计算的字段。根据您的情况，您可能希望在模型本身上保存所需的计数器并按其排序，或者获取整个图形并在内存中对其进行排序。

# php - Facebook API - 返回好友列表（PHP 数组）

> ID：14794762
> 
> 赞同：1
> 
> 时间：2013-02-10T04:36:32.250
> 
> 标签：php, facebook, facebook-graph-api

我试图在不使用 PHP SDK 的情况下使用 Facebook 应用程序返回用户的朋友列表。我设法在不使用身份验证码的情况下返回用户姓名、性别等。我现在试图返回一个用户朋友的姓名列表，到目前为止我所做的只是打印数组，我似乎不能只打印名称，因为它的布局与用户姓名、性别等不同我设法通过这样做来回应：

```
$user->name 
```

但是当我为朋友列表尝试它时它不起作用并且根本没有回应任何东西，我只是想知道是否有人知道我是如何做到这一点的？

使用 print_r 我得到以下信息：

```
Array(
[0] => Array ( [name] => Friend's name [id] => x )
[1] => Array ( [name] => Friend's name [id] => x )
[2] =>....) 
```

直到所有的朋友都被列出来。

* * *

```
 { "name": "Name", 
    "hometown": {
      "id": "Hometown_id", 
      "name": "Hometown"
    }, 
    "id": "Friend_id" } 
```

以上是每个数组的结构，我认为一个潜在的问题是不是每个人都有家乡集，这可能是我收到 forEach 错误的原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T05:26:04.170

鉴于该数组结构，获得您想要的东西非常简单（在 php 中）。我建议阅读 php 的[数组](http://us3.php.net/manual/en/book.array.php)手册。

试试这样的事情：

```
foreach ($array as $inner_array) {
    echo $inner_array['name'] . "<br />";
} 
```

除此之外，这将是...

```
echo $your_array[0]['name'];
echo $your_array[1]['name']; 
```

等等等等第四个..

**更新：**

你现在看到的不是一个数组，而是一个 javascript 对象。它被称为**JSON**：Javascript 对象表示法。

您需要一个特殊的解析器将其解释为一个数组：[`json_decode()`](http://us3.php.net/manual/en/function.json-decode.php)，它随 php 大于或等于 5.2.0 一起提供。要使数组具有关联性，您必须传递第二个参数，一个布尔值，`true`. 它默认为`false`其他。使用示例：

```
$json = '{ "name": "Name", 
    "hometown": {
      "id": "Hometown_id", 
      "name": "Hometown"
    }, 
    "id": "Friend_id" }';

$json_arr = json_decode($json,true);

foreach ($json_arr as $key => $var) {
    if (!is_array($var)) {
        if ($key == 'name') {
            echo $var . "<br />";
        }
    }
} 
```

**更新 2：**

```
foreach ($json_arr as $key => $var) {
    if (!is_array($var)) {
        if ($key == 'name') {
            echo "Name: " . $var . "<br />";
        }
    }
    else {
        if ($key == 'hometown') {
            echo "Hometown: " . $var['name'] . "<br />";
        }
    }
} 
```

以上应该做你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T05:13:40.327

从 Facebook 查询特定数据的最佳方式是 FQL。查看[https://developers.facebook.com/docs/technical-guides/fql/](https://developers.facebook.com/docs/technical-guides/fql/)并告诉我您是否正在寻找。

我提供的链接上的示例将抓取所有活跃用户的朋友。如果您使用示例作为启动器（已为您的应用程序填写了所有正确的信息以及有效的访问令牌），然后转到它所说的区域`// run fql query`并更改`uid2`为`name`以下行：

```
fql?q=SELECT+uid2+FROM+friend+WHERE+uid1=me() 
```

然后将以下内容添加到脚本的末尾会将所有朋友的姓名填充到名为的数组中`$names`

```
$r = $fql_multiquery_obj['data'][0]['fql_result_set'];
foreach ($r as $u)
{
    $name[count($name)] = $u['name'];
} 
```

这能帮助你做你想做的事吗？让我知道 ：）

# c# - 为什么匿名代表比普通代表出现得更快？

> ID：14794766
> 
> 赞同：-2
> 
> 时间：2013-02-10T04:37:22.927
> 
> 标签：c#, performance, delegates, anonymous-delegates

有人能告诉我为什么匿名代表比普通代表跑得快很多吗？我在 for 循环中看到了用类进行诊断的结果，`Stopwatch`并且差异很大。如果您在普通委托中运行以下代码，它的运行速度会慢很多。我在视频上看到了这个比较，基本上我被建议在有情况的情况下使用匿名代表而不是普通代表来提高性能。

```
class Program {
    delegate int PointtoAddFunction(int num1, int num2);

    static void Main(int argNum1, int argNum2) {
        Stopwatch objWatch=new Stopwatch();

        for(int y=0; y>10; y++) {
            objWatch.Reset();
            objWatch.Start();

            for(int i=0; i>1000; i++) {
                PointtoAddFunction pobjAdd=
                    delegate(int num1, int num2) {
                        return num1+num1;
                    };

                Console.WriteLine(pobjAdd.Invoke(2, 2).ToString());
            }

            objWatch.Stop();
            Console.WriteLine(objWatch.EleapsedTickes.ToString());
        }
    }

    static int Add(int num1, int num2) {
        return num1+num2;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T05:17:01.350

函数是否有名称根本不会影响它的速度。编译器会给它一个名字，它不是你可以在代码中引用的名字。这个问题本身是有缺陷的。匿名方法本质上并不比命名方法快。

如果您有一个基准测试表明这些方法实际上并没有做同样的事情，或者基准测试代码有缺陷并且不能准确地测量一种或两种方法的性能。在像 C# 这样的语言中准确测量方法的性能*非常困难，因此有缺陷的性能测试**非常*普遍，即使对于有经验的程序员也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T05:07:33.777

这不是实际使用委托的方式。您应该将委托传递给单独的函数；这是代表的典型场景。

您还需要超过 1000 次迭代。否则，即使在测试期间发生的单个中断也会影响结果。

# php - 值未插入 mysql 且未将枚举值更新为 1？

> ID：14794770
> 
> 赞同：0
> 
> 时间：2013-02-10T04:37:49.093
> 
> 标签：php, mysql

有人可以帮帮我吗。我正在尝试通过将值插入 mysql 并自动增加“likes”列的更新次数来创建一个基本的类似系统。

基本上，脚本将插入当前没有任何记录的位置，如果有记录则更新。

我也试图将“user_id”作为一个值插入，但只有 like_id 被插入到表中。'likes' 列正在按应有的方式自动增加，但我需要找出如何插入 user_id，它是用户会话 id aswel 而这没有被放入。我也在尝试更新列' user_id_has_liked' 从枚举值 0 到 1 作为最终结果。

有人可以告诉我哪里出错了。谢谢

```
<?php

    require_once('includes/session.php');
    require_once('includes/functions.php');
    require('includes/_config/connection.php');

    session_start();

        confirm_logged_in();

        if (isset ($_GET['to'])) {
        $user_to_id = $_GET['to'];

    }

    if (!isset($_GET['to']))
        exit('No user specified.');

    $user_id = $_GET['to'];

    $result = mysql_query("SELECT * FROM ptb_likes WHERE liked_id ='".$user_to_id."' ");

    if( mysql_num_rows($result) > 0) {
    mysql_query("UPDATE ptb_likes SET likes = likes +1 WHERE liked_id = '".$user_to_id."' ");

        $user_to_id = mysql_query("ALTER TABLE likes AUTO_INCREMENT = $id");
    }
    else
    {
        mysql_query("INSERT INTO ptb_likes (user_id,liked_id) VALUES ('".$_SESSION['user_id'].",".$user_to_id."') ");

    }

    $result1 = mysql_query("UPDATE ptb_likes SET user_id_has_liked='1' WHERE user_id=".$_SESSION['user_id']."") 
    or die(mysql_error());

    if($result) 
    { 

    header("Location: {$_SERVER['HTTP_REFERER']}");

    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T05:08:25.197

正如其他人所说， mysql_* 语句已被贬低，请使用 mysqli_* 语句......

第一个问题是用户 ID 插入语句中的代码缺少一些引号，它应该如下所示：

```
 mysql_query("INSERT INTO ptb_likes (user_id,liked_id) VALUES ('".$_SESSION['user_id']."','".$user_to_id."') "); 
```

user_id_has_liked 查询问题可能是由于枚举变量是 mysql 中的整数引起的。您还可以尝试将查询保存到查询变量并将变量传递给查询函数以提高可读性...

```
 $query = "UPDATE ptb_likes SET user_id_has_liked='1' WHERE user_id=".$_SESSION['user_id'];
            $result1 = mysql_query($query) or die(mysql_error()); 
```

# tomcat - servlet 中的 hello world 不工作

> ID：14794776
> 
> 赞同：0
> 
> 时间：2013-02-10T04:39:13.467
> 
> 标签：tomcat, servlets

我现在尝试了几个小时在 Eclipse 中运行一个简单的 hello world 程序，使用 servlet 但无法正常工作，看了一些教程但没有运气，如果有人可以请查看

我的错误和项目浏览器

![我的错误和项目浏览器](../Images/23626a893706b0f3a49a8c785305db8b.png)

我的 servlet 类

```
 /**
    * Servlet implementation class HelloWorldServlet
         */
   public class HelloWorldServlet extends HttpServlet {
private static final long serialVersionUID = 1L;

/**
 * @see HttpServlet#HttpServlet()
 */
public HelloWorldServlet() {
    super();
    // TODO Auto-generated constructor stub
}

/**
 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
 */
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    PrintWriter out = response.getWriter();
    out.println("Hello World");
}

/**
 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
 */
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // TODO Auto-generated method stub
} 
```

![](../Images/4805385da4e67d924c02a32b6f0f589a.png) 我的 web.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
        <web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"       xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-   app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee               http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
         <display-name>FirstServlet</display-name>
       <welcome-file-list>
       <welcome-file>index.html</welcome-file>
      <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
      <welcome-file>default.html</welcome-file>
     <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
    </welcome-file-list>
     <servlet>
      <description></description>
     <display-name>HelloWorldServlet</display-name>
     <servlet-name>HelloWorldServlet</servlet-name>
    <servlet-class>com.theopentutorials.servlets.HelloWorldServlet</servlet-class>
    </servlet>
   <servlet-mapping>
      <servlet-name>HelloWorldServlet</servlet-name>
    <url-pattern>/HelloWorldServlet</url-pattern>
     </servlet-mapping>
    </web-app> 
```

![](../Images/a11a139782d539b6269c519d9d5ab3e5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T13:58:45.020

Delete your bin directory and Re-Compile your project. Also check if the newly generated classes are placed in bin

# android - Android：快速 HTTP 请求

> ID：14794778
> 
> 赞同：0
> 
> 时间：2013-02-10T04:39:22.883
> 
> 标签：android, http, android-asynctask

在我的 android 应用程序中，我有这段代码：

```
 while(testCase){
            for(HttpPut put : httpPut){
                try {
                    httpclient.execute(put, responseHandler);
                } catch (ClientProtocolException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                } catch (IOException e1) {
                    // TODO Auto-generated catch block
                    e1.printStackTrace();
                }

                try {
                    Thread.sleep(150);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        } 
```

我的目标是让一个预先构建的 HTTPPut 请求列表（在本例中为“httpPut”）按顺序每 150 毫秒发送一次，同时在一个永远循环中，直到被告知中断（被“testCase”布尔值中断）。它在技术上有效，但在实际执行中有时会有很多滞后。在每个请求的接收端，它在接收另一个 HTTPPut 之前可能会延迟 3-5 秒。而手机屏幕关闭的情况更糟。我在扩展的 AsyncTask 类中运行此代码。

我的问题是，我怎样才能使我的代码更有效地执行此代码以更精确地触发；尽可能准确地接近每 150 毫秒？谢谢阅读！

**编辑：** 作为建议在另一个线程中运行，我尝试添加此代码：

```
...
                performOnBackgroundThread(new Runnable(){

                    @SuppressWarnings("unchecked")
                    @Override
                    public void run() {
                        try {
                            final DefaultHttpClient httpclient = new DefaultHttpClient();
                            final ResponseHandler responseHandler = new BasicResponseHandler();

                            httpclient.execute(put, responseHandler);
                        } catch (ClientProtocolException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        } catch (IOException e1) {
                            // TODO Auto-generated catch block
                            e1.printStackTrace();
                        }
                    }

                });
...

public static Thread performOnBackgroundThread(final Runnable runnable) {
    final Thread t = new Thread() {
        @Override
        public void run() {
            try {
                runnable.run();
            } finally {

            }
        }
    };
    t.start();
    return t;
} 
```

但是我的应用程序很快因“I/Process(18762): Sending signal.PID: 18762 SIG: 9”而崩溃，而且我也遇到了一堆这样的错误。

```
02-10 00:14:58.639: W/SingleClientConnManager(18762): Invalid use of SingleClientConnManager: connection still allocated.
02-10 00:14:58.639: W/SingleClientConnManager(18762): Make sure to release the connection before allocating another one.
02-10 00:14:58.639: W/SingleClientConnManager(18762): Invalid use of SingleClientConnManager: connection still allocated.
02-10 00:14:58.639: W/SingleClientConnManager(18762): Make sure to release the connection before allocating another one.
02-10 00:14:58.647: W/System.err(18762): java.net.SocketException: Socket closed
02-10 00:14:58.647: W/System.err(18762):    at libcore.io.Posix.recvfromBytes(Native Method)
02-10 00:14:58.647: W/System.err(18762):    at libcore.io.Posix.recvfrom(Posix.java:131)
02-10 00:14:58.647: W/System.err(18762):    at libcore.io.BlockGuardOs.recvfrom(BlockGuardOs.java:164)
02-10 00:14:58.647: W/System.err(18762):    at libcore.io.IoBridge.recvfrom(IoBridge.java:513)
02-10 00:14:58.647: W/System.err(18762):    at java.net.PlainSocketImpl.read(PlainSocketImpl.java:488)
02-10 00:14:58.647: W/System.err(18762):    at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
02-10 00:14:58.647: W/System.err(18762):    at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)
02-10 00:14:58.647: W/System.err(18762):    at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:103)
02-10 00:14:58.655: W/System.err(18762):    at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:191)
02-10 00:14:58.655: W/System.err(18762):    at org.apache.http.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:82)
02-10 00:14:58.655: W/System.err(18762):    at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:174)
02-10 00:14:58.655: W/System.err(18762):    at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:180)
02-10 00:14:58.655: W/System.err(18762):    at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:235)
02-10 00:14:58.663: W/System.err(18762):    at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:259)
02-10 00:14:58.663: W/System.err(18762):    at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:279)
02-10 00:14:58.663: W/System.err(18762):    at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:121)
02-10 00:14:58.663: W/System.err(18762):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:428)
02-10 00:14:58.663: W/System.err(18762):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
02-10 00:14:58.663: W/System.err(18762):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:653)
02-10 00:14:58.663: W/System.err(18762):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:627)
02-10 00:14:58.663: W/System.err(18762):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:616)
02-10 00:14:58.663: W/System.err(18762):    at com.<takenout>.<takenout>.<takenout>.run(MyFile.java:79)
02-10 00:14:58.663: W/System.err(18762):    at com.<takenout>.<takenout>.<takenout>.run(MyFile.java:116)
02-10 00:14:58.671: W/System.err(18762): java.net.SocketTimeoutException
02-10 00:14:58.671: W/System.err(18762):    at java.net.PlainSocketImpl.read(PlainSocketImpl.java:491)
02-10 00:14:58.671: W/System.err(18762):    at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
02-10 00:14:58.671: W/dalvikvm(18762): threadid=17: thread exiting with uncaught exception (group=0x40d03300) 
```

**编辑#2：**

```
02-10 00:38:08.639: W/System.err(20100): java.net.SocketException: recvfrom failed: ECONNRESET (Connection reset by peer)
02-10 00:38:08.639: W/System.err(20100):    at libcore.io.IoBridge.maybeThrowAfterRecvfrom(IoBridge.java:552)
02-10 00:38:08.639: W/System.err(20100):    at libcore.io.IoBridge.recvfrom(IoBridge.java:516)
02-10 00:38:08.639: W/System.err(20100):    at java.net.PlainSocketImpl.read(PlainSocketImpl.java:488)
02-10 00:38:08.647: W/System.err(20100):    at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
02-10 00:38:08.647: W/System.err(20100):    at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)
02-10 00:38:08.647: W/System.err(20100):    at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:103)
02-10 00:38:08.647: W/System.err(20100):    at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:191)
02-10 00:38:08.647: W/System.err(20100):    at org.apache.http.impl.conn.DefaultResponseParser.parseHead(DefaultResponseParser.java:82)
02-10 00:38:08.647: W/System.err(20100):    at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:174)
02-10 00:38:08.647: W/System.err(20100):    at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:180)
02-10 00:38:08.647: W/System.err(20100):    at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:235)
02-10 00:38:08.647: W/System.err(20100):    at org.apache.http.impl.conn.AbstractClientConnAdapter.receiveResponseHeader(AbstractClientConnAdapter.java:259)
02-10 00:38:08.647: W/System.err(20100):    at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:279)
02-10 00:38:08.647: W/System.err(20100):    at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:121)
02-10 00:38:08.647: W/System.err(20100):    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:428)
02-10 00:38:08.647: W/System.err(20100):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
02-10 00:38:08.647: W/System.err(20100):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:653)
02-10 00:38:08.647: W/System.err(20100):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:627)
02-10 00:38:08.647: W/System.err(20100):    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:616)
02-10 00:38:08.647: W/System.err(20100):    at com.<takenout>.<takenout>.<takenout>.run(MyFile.java:79)
02-10 00:38:08.647: W/System.err(20100):    at com.<takenout>.<takenout>.<takenout>.run(MyFile.java:116)
02-10 00:38:08.647: W/System.err(20100): Caused by: libcore.io.ErrnoException: recvfrom failed: ECONNRESET (Connection reset by peer)
02-10 00:38:08.647: W/System.err(20100):    at libcore.io.Posix.recvfromBytes(Native Method)
02-10 00:38:08.647: W/System.err(20100):    at libcore.io.Posix.recvfrom(Posix.java:131)
02-10 00:38:08.647: W/System.err(20100):    at libcore.io.BlockGuardOs.recvfrom(BlockGuardOs.java:164)
02-10 00:38:08.647: W/System.err(20100):    at libcore.io.IoBridge.recvfrom(IoBridge.java:513)
02-10 00:38:08.647: W/System.err(20100):    ... 19 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T05:46:35.853

由于网络指标的差异，您真的不能 100% 保证您的服务器每 150 毫秒就会看到一次更新。您最好的选择是尝试比您想要的更快的东西，例如每 100 毫秒发送一个新请求，并希望服务器至少每 100 毫秒接收一次更新。此外，如果您发送请求的速度如此之快，请考虑使用 UDP over TCP。根据我的经验，由于确保传递数据包的开销，TCP 请求花费的时间要长得多，但是如果你丢失一两个，如果你的平均案例性能好得多，例如 90% 的时间你看到更新，这对你来说并不是什么大问题每 100 毫秒。

您目前可能会在服务器上看到延迟，因为您遇到了较早的请求，例如，如果 req1 需要 200 毫秒，req2 需要 350 毫秒，而 req3 需要 120 毫秒，那么在服务器上您不会每 150 毫秒看到一次请求。对于前几个请求尤其如此，其中网络性能可能比 5-10 个请求后的网络性能更差（例如 1-2 秒）。

我建议创建第二个 AsyncTask 类，您可以从第一个 AsyncTask 中快速生成该类（请参阅[此](http://code.google.com/p/vtnetapps/source/browse/trunk/assignments/Alex_Corvin/HttpUtility/src/org/vt/http/utility/AsyncHttpRequest.java)以获得一些潜在的指导）。但是，如果您如此快速地生成新的请求对象，这可能只会让您最终遇到一些线程限制。

最大的问题是你确定你在做正确的事吗？您根本不会让网络芯片组在请求之间有 150 毫秒的间隙（可能需要超过 150 毫秒才能完成执行！），所以为什么还要为许多单独的请求而烦恼呢？为什么不使用保持打开状态的套接字之类的东西（例如，谷歌 http 长轮询）？

# c# - 即使在使用 Form.KeyPreview 时，编辑模式下的 DataGridViewTextBoxCell 也会从 Form 中窃取击键

> ID：14794780
> 
> 赞同：1
> 
> 时间：2013-02-10T04:40:04.967
> 
> 标签：c#, .net, user-interface, keyboard-events

我有：

```
this.KeyPreview = true; 
```

在我的表单中设置，即使子元素具有焦点，我通常也可以接收 KeyDown 事件。但是，我有一个包含 DataGridViewTextBoxCell 的 DataGridView，当我单击它们时，我进入了单元格的“编辑模式”，并且这以某种方式具有对键盘的独占访问权限，以至于我不再能够接收这些按键。只要我的整个表单中的任何内容都具有焦点，我就希望我的键盘功能能够真正起作用。

有谁知道获取这些 KeyDown 事件的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T08:09:06.130

尝试处理`KeyUp`事件而不是`KeyDown`

# html - 带有提示点的 HTML 5 视频

> ID：14794781
> 
> 赞同：2
> 
> 时间：2013-02-10T04:40:07.120
> 
> 标签：html, flash, video

寻找支持元数据（提示点）的开源 HTML 5 视频播放器的推荐。

我们正在使用 Flash 视频，它使用提示点和 ExternalInterface 在主机页面中触发 JavaScript，但 HTML 5 的时机已经到来。

我渴望建立自己的，但时间有限。我们希望扩展一些能让我们大部分时间到达那里的东西。已经签出[video.js——](https://github.com/zencoder/video-js/blob/master/docs/tracks.md)不支持元数据。

我们为 Vimeo 的 FroogaLoop 工具包创建了一个，但我们需要一些不依赖于提供者的东西，也不能依赖于框架，即 JQuery。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T05:06:06.417

听起来[Leanback Player](http://www.leanbackplayer.com/)可以很好地满足您的要求。

# c - 调用 execve ( man, args, env ) 时出现 execve 错误

> ID：14794783
> 
> 赞同：1
> 
> 时间：2013-02-10T04:40:51.530
> 
> 标签：c, linux

我在使用此`execve`命令时遇到问题。我可以使用它在我的程序中很好地运行大多数其他命令，但是如果我尝试做类似的`man ls`事情或其他事情，我会收到此错误。

```
man: can't execute pager: No such file or directory
man: command exited with status 255: LESS=-ix8RmPm Manual page ls(1) ?ltline     %lt?L/%L.:byte %bB?s/%s..?e (END):?pB %pB\%.. (press h for help or q to quit)$PM Manual page   ls(1) ?ltline %lt?L/%L.:byte %bB?s/%s..?e (END):?pB %pB\%.. (press h for help or q to quit)$ MAN_PN=ls(1) pager -s 
```

我是这样称呼它的：

```
execve( cmdPath, args, env ); 
```

路径在哪里`cmdPath`（在这种情况下`/usr/bin/man`） `args`是`char*`哪里`args[0] = man`，`args[1] = ls` `env`是我`env*[]`从 main 传递的。

任何帮助将非常感激。我要死在这里了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T05:59:40.433

Null 终止您传递给 execve 的参数。就像是

```
char *args[3];
// other args..
args[2] = (char*) 0; 
```

否则它是未定义的行为，这可能就是为什么它在过去有时会起作用，而这次你不走运。

这有效：

```
int main(int argc, char *argv[], char *env[])
{
    char *args[3];

    args[0] = "man";
    args[1] = "ls";
    args[2] = (char*) 0;

    execve("/usr/bin/man", args, env);
} 
```

# ruby-on-rails - 耙中止！操作：“获得更多”

> ID：14794785
> 
> 赞同：0
> 
> 时间：2013-02-10T04:41:02.603
> 
> 标签：ruby-on-rails, ruby, mongodb, rake, moped

运行 rake 任务时出现以下错误。谁能帮我？

错误

```
rake aborted!
The operation: "GET MORE"
failed with error "cursor 178700246530 not found"
C:/Ruby193/lib/ruby/gems/1.9.1/gems/moped-1.3.2/lib/moped/node.rb:210:in `get_more' 
```

我的佣金代码

```
MyCollection.where(:name => "abc").each do |comp|   
 l =     open(comp.logo_url)
 comp.logo = l
 comp.save!
end 
```

提前致谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-02-10T08:40:18.293

尝试将[find_in_batches](http://api.rubyonrails.org/classes/ActiveRecord/Batches.html)与您的收藏一起使用。

# arrays - AnnoyingCritter GridWorld 案例研究

> ID：14794794
> 
> 赞同：0
> 
> 时间：2013-02-10T04:45:49.820
> 
> 标签：arrays, location, case, actor, gridworld

我在 APCS 中，我必须扩展 critter 类，这将使 critter 随机选择网格中的任何演员，然后移动到它的位置；从而“跟随”它。我的老师给了我们开始的类和方法名，不能改变。这是无法更改的跑步者。

```
import java.awt.Color;

import info.gridworld.actor.Rock;
import info.gridworld.actor.Actor;
import info.gridworld.actor.Flower;
import info.gridworld.actor.Bug;
import info.gridworld.grid.Location;
import info.gridworld.grid.BoundedGrid;
import info.gridworld.actor.ActorWorld;

public class AnnoyingCritterRunner
{
 public static void main(String[] args)
 {
  ActorWorld world = new ActorWorld(new BoundedGrid<Actor>(8,8));
  world.add(new Location(1, 1), new AnnoyingCritter());
  world.add(new Location(3, 1), new Rock());
  world.add(new Location(5, 2), new Actor());
  world.add(new Location(7, 6), new Flower());
  world.add(new Location(6, 6), new Actor());
  world.add(new Location(0, 5), new Actor());
  world.add(new Location(2, 6), new Bug(Color.GREEN));
  world.add(new Location(3, 5), new Actor());
  world.show();
 }
} 
```

AnnoyingCritter 类必须包含小动物找到其“最好的朋友”和“关注它”所需的所有方法。

```
import info.gridworld.actor.Actor;
import info.gridworld.actor.Critter;
import info.gridworld.grid.Location;
import java.awt.Color;

import java.util.ArrayList;

public class AnnoyingCritter extends Critter
{
 /* instance variables will be needed
  * one for the bFF and one to set whether this Critter has a bFF (a boolean)
  */

  public AnnoyingCritter()
  {
    /* make an AnnoyingCritter constructor that sets a color and starts with the 
  * boolean variable above being "false"
  */
    Critter AnnoyingCritter = new Critter();
    AnnoyingCritter.setColor(Color.green);

  }

  private void pickBFF()
 {
    /* you'll need the grid, occupied locations, and some randomness to pick a friend
    */

 }

 public void processActors( ArrayList<Actor> actors)
 {
   /* this can be simple or complicated.  the idea is to pick a BFF if 
    * one is needed
    */
  if( !hasFriend )
  {

  }
//and it eats flowers and rocks
  for( Actor dude : actors )
  {

  }
 }

 public Location selectMoveLocation( ArrayList<Location> locs )
 {
  //you need a Grid

   //you need a location

  //you need to know where to go and if it's clear to move and then go there

 }
} 
```

AnnoyingCritter 必须移动到它随机选择的演员的位置并吃掉挡路的鲜花和岩石。它还需要一次一个空间地移动到演员的位置。我不知道如何让烦人的小动物找到演员的位置，然后随机找到一个。进口也不能改变。

请帮忙，因为我已经坚持了几个小时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T01:19:34.743

Location 类有一些强大的方法。尝试这个：

```
int direction=getLocation().getDirectionToward(BFF.getLocation);
moveTo(getLocation().getAdjacentLocation(direction)); 
```

这应该一次将您移向 BFF 一个空间。

要找到 BFF：

```
Grid<Actor> grid=getGrid();
ArrayList<Location> locList=grid.getOccupiedLocations();
BFF=grid.get(locList.get(0)); 
```

只要确保 locList(0) 不是你自己的生物。

尝试阅读快速参考指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T12:10:56.103

我很确定您必须使用 getLocation() 来查找演员的位置。或者...您可以使用循环并为列和行选择随机数，直到找到演员。开枪，这听起来是个好主意。我要试试。

# c# - 我们如何在 C# 中显示整数类型数组的元素

> ID：14794795
> 
> 赞同：0
> 
> 时间：2013-02-10T04:46:00.007
> 
> 标签：c#

我声明了一个 int 类型数组并尝试打印它的所有元素，但它只打印最后一个元素.....给我正确的代码......

```
namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        int[] arr;
        int range;

        public Form1()
        {
            InitializeComponent();
        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {
            range = Convert.ToInt32(textBox1.Text);
            arr = new int[range];

        }

        private void textBox2_TextChanged(object sender, EventArgs e)
        {
            for (int i = 0; i < range; i++)
            {
                arr[i] = Convert.ToInt32(textBox2.Text);
            }

        }

        private void button1_Click(object sender, EventArgs e)
        {
            for(int i =0;i<range;i++)
            {
                textBox3.Text = textBox3.Text + arr[i].ToString();

            }
        }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T04:51:23.660

这一行：`arr[i] = Convert.ToInt32(textBox2.Text);` 将数组中的每个元素设置为 textbox2 中的值。这是你的意图吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T04:48:48.857

Int 数组很常见。它们存储许多整数值。这些值可以以多种方式使用。这个介绍性材料涵盖了 int 数组，展示了声明、赋值、元素、循环和方法。请看[这里](http://www.dotnetperls.com/int-array)

此代码是工作数组 int 的简单示例

```
using System;

class Program
{
    static void Main()
    {
    int[] arr1 = new int[] { 3, 4, 5 }; // Declare int array
    int[] arr2 = { 3, 4, 5 };           // Another
    var arr3 = new int[] { 3, 4, 5 };   // Another

    int[] arr4 = new int[3];            // Declare int array of zeros
    arr4[0] = 3;
    arr4[1] = 4;
    arr4[2] = 5;

    if (arr1[0] == arr2[0] &&
        arr1[0] == arr3[0] &&
        arr1[0] == arr4[0])
    {
        Console.WriteLine("First elements are the same");
    }
    }
}

using System;

class Program
{
    static void Main()
    {
    // Loop over array of integers.
    foreach (int id in GetEmployeeIds())
    {
        Console.WriteLine(id);
    }
    // Loop over array of integers.
    int[] employees = GetEmployeeIds();
    for (int i = 0; i < employees.Length; i++)
    {
        Console.WriteLine(employees[i]);
    }
    }

    /// <summary>
    /// Returns an array of integers.
    /// </summary>
    static int[] GetEmployeeIds()
    {
    int[] employees = new int[5];
    employees[0] = 1;
    employees[1] = 3;
    employees[2] = 5;
    employees[3] = 7;
    employees[4] = 8;
    return employees;
    }
}

Output

1
3
5
7
8
1
3
5
7
8 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T04:50:31.443

textBox2.Text 是一个数字还是一个数字序列？例如，如果是 1,2,3，那么您必须`Split`打开字符串`,`，然后将`String[]`您返回的每个条目转换为整数，并将它们存储在数组中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T04:52:11.853

我不确定您要做什么。

似乎您正在从文本框中读取输入，只要它被更改并将数组重新创建为该文本框中指示的大小。

每当第二个文本框更改为第二个文本框接受的任何输入时，第二个文本框都会填充数组（这根本没有意义）。

button1 将数组显示为字符串，这可能没问题。

您可能希望将第二个文本框更改为填充数组的按钮。

否则，重新考虑第二个文本框的意图，这是没有意义的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-10T04:55:04.550

你在哪里清除 textBox3.Text ？

您正在此文本框中累积。当你这样做时，输入溢出，你只会看到最后添加的东西。也许这就是问题所在。我可能会调整：

```
private void button1_Click(object sender, EventArgs e)
{
    textBox3.Text = "";

    for(int i =0;i<range;i++)
    {
        textBox3.Text = textBox3.Text + arr[i].ToString();

    }
} 
```

# c - 在 bash 脚本上调用 execve bash 找不到参数

> ID：14794797
> 
> 赞同：0
> 
> 时间：2013-02-10T04:46:23.150
> 
> 标签：c, linux, bash

我有两个（Ubuntu Linux）bash 脚本，它们接受输入参数。它们需要同时运行。我尝试`execve`了论据，例如

`char *argv[10] = { "/mnt/hgfs/F/working/script.sh", "file1", "file2", NULL };`

`execve(argv[0], argv, NULL)`

但 bash 脚本似乎无法在例如`$0`, `$1`,找到任何参数`$2`。

```
printf "gcc -c ./%s.c -o ./%s.o\n" $1 $1;
gcc -c ./$1.c -o ./$1.o -g
exit 0; 
```

输出是`gcc -c ./main.c -o ./main.o` ，然后是很多错误，比如`/usr/include/libio.h:53:21: error: stdarg.h: No such file or directory`

少了什么东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T04:53:19.737

您的脚本是否以 hashbang 行开头？我认为这是必须的，例如：

```
#!/bin/bash 
```

例如，请参见以下 C 程序：

```
#include <stdio.h>
#include <unistd.h>

char *argv[10] = { "./qq.sh", "file1", NULL };
int main (void) {
    int rc = execve (argv[0], argv, NULL);
    printf ("rc = %d\n", rc);
   return 0;
} 
```

当它使用以下`qq.sh`文件编译并运行时，它输出`rc = -1`：

```
echo $1 
```

当您将文件更改为：

```
#!/bin/bash
echo $1 
```

它输出：

```
file1 
```

正如预期的那样。

* * *

您需要注意的另一件事是使用这些 VMWare 共享文件夹，由`/mnt/hgfs`. 如果该文件是使用 Windows 类型的编辑器创建的，它的“DOS”行结尾可能是`carriage-return/line-feed`- 这很可能会导致脚本执行出现问题。

您可以通过运行来检查这一点：

```
od -xcb /mnt/hgfs/F/working/script.sh 
```

并查看是否`\r`出现任何字符。

例如，如果我使用带有 hashbang 行的 shell 脚本（但在该行后面加上一个回车符），我*也会*得到`rc = -1`输出，这意味着它找不到 shell。

* * *

而且，现在，根据您的编辑，您的脚本完全可以*毫无问题*地解释这些参数。它输出的事实：

```
gcc -c ./main.c -o ./main.o 
```

证明这一点是肯定的，因为它看起来`$1`像`main`.

您实际遇到的问题是编译器*正在*工作，但它无法`strdarg.h`从您的文件中找到包含- 这与是否可以看到这些参数`libio.h`无关。`bash`

我的建议是尝试使用该命令手动编译它，看看是否遇到相同的错误。如果是这样，那是您尝试编译的问题，而不是`bash`or`exec`问题。

如果编译没问题，*可能*是因为你`execve`调用的环境变量被破坏了。

# vim - 如何在 Vim 中高效地交错多组行？

> ID：14794800
> 
> 赞同：6
> 
> 时间：2013-02-10T04:46:49.700
> 
> 标签：vim

我正在尝试交错三组文本行。例如，以下文本：

```
a
a
a
b
b
b
c
c
c 
```

将被转化为：

```
a
b
c
a
b
c
a
b
c 
```

有没有一种有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-11T00:37:41.590

`~/.vim`在我的文件深处的某个地方，我有一个`:Interleave`命令（附在下面）。没有任何参数`:Interleave`将像往常一样交错。使用 2 个参数，它将如何指定要组合在一起的数量。例如`:Interleave 2 1`，将从顶部取 2 行，然后从底部与 1 行交错。

现在来解决你的问题

```
:1,/c/-1Interleave
:Interleave 2 1 
```

*   `1,/c/-1`范围从第一行开始，到匹配字母的第一行上方 1 行结束`c`。
*   `:1,/c/-1Interleave`基本上交错`a`'s 和`b`'s的组
*   `:Interleave 2 1`这次的范围是整个文件。
*   `:Interleave 2 1``a`将混合's 和`b`'s 组与s组交错`c`。混合比例为 2 比 1。

`:Interleave`代码如下。

```
command! -bar -nargs=* -range=% Interleave :<line1>,<line2>call Interleave(<f-args>)
fun! Interleave(...) range
  if a:0 == 0
    let x = 1
    let y = 1
  elseif a:0 == 1
    let x = a:1
    let y = a:1
  elseif a:0 == 2
    let x = a:1
    let y = a:2
  elseif a:0 > 2
    echohl WarningMsg
    echo "Argument Error: can have at most 2 arguments"
    echohl None
    return
  endif
  let i = a:firstline + x - 1
  let total = a:lastline - a:firstline + 1
  let j = total / (x + y) * x + a:firstline
  while j < a:lastline
    let range = y > 1 ? j . ',' . (j+y) : j
    silent exe range . 'move ' . i
    let i += y + x
    let j += y
  endwhile
endfun 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T14:55:56.403

这是一个“oneliner”（几乎），但是您必须为每个唯一的行负 1 重做它，在您的示例中为 2 次。也许没有用，但我认为这是一个很好的练习，可以更多地了解 VIM 中的模式。只要整行是唯一的（例如`mno`，并且`mnp`是两条唯一的行），它就可以处理所有类型的行。

首先确保这一点（并且**没有**`/`映射到任何东西，或者该行中的任何其他东西）：

```
:set nowrapscan 
```

然后映射例如这些（**应该**是递归的，**而不是** `nnoremap`）：
`<C-R>`并且`<CR>`应该按**字面意思**输入。
`\v`in patterns 表示“非常神奇”，`@!`负前瞻。`\2`使用第二个括号中的内容。

```
:nmap ,. "xy$/\v^<C-R>x$<CR>:/\v^(<C-R>x)@!(.*)$\n(\2)$/m-<CR>j,.
:nmap ,, gg,. 
```

然后`,,`尽可能多地做，在你的例子中是2次。一个用于所有`b`s，一个用于所有`c`s。

* * *

编辑：**映射的解释**。我将使用问题中的示例，就好像它已经使用此映射运行了一次。
一次运行后：

```
1\. a
2\. b
3\. a
4\. b
5\. a
6\. b
7\. c
8\. c
9\. c 
```

然后光标在最后`a`（第 5 行），当输入 时`,,`，它首先回到第一行，然后运行映射`,.`，该映射正在执行此操作：

```
"xy$             # yanks current line (line 1) to reg. "x" ("a")  "
/\v^<C-R>x$<CR>  # finds next line matching reg. "x" ("a" at line 3)
:/\v^(<C-R>x)@!(.*)$\n(\2)$/m-<CR>
# finds next line that have a copy under it ("c" in line 7) and moves that line
# to current line (to line 3, if no "-" #after "m" it's pasted after current line)
# Parts in the pattern:
- ^(<C-R>x)@!(.*)$  # matches next line that don't start with what's in reg. "x"
- \n(\2)$           # ...and followed by newline and same line again ("c\nc")
- m-<CR>            # inserts found line at current line (line 3)
j                # down one line (to line 4, where second "a" now is)
,.               # does all again (recursive), this time finding "c" in line 8
...
,.               # gives error since there are no more repeated lines,
                 # and the "looping" breaks. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-26T05:07:35.383

我今晚刚刚独立遇到了这个问题。我的没有一些答案那么优雅，但我认为它更容易理解。它做了很多假设，所以它有点像黑客：

*   A）它假设任何行中都不存在一些唯一字符（或任意字符串） - 我假设`@`如下。
*   B) 它假定您不希望在任何 a、b 或 c 部分中出现前导或尾随空格。
*   C）它假设您可以轻松识别最大行长度，然后将所有行填充为该长度（例如，可能使用 %! 进入 awk 等，使用 printf）

    1.  用空格填充所有行到相同的最大长度。
    2.  Visual 只选择 a 和 b 部分，然后`%s/$/@`
    3.  块复制并过去 b 部分以位于 c 部分之前。
    4.  阻止将 a 部分复制并粘贴到 bc 部分之前。
    5.  `%s/@/\r`
    6.  `%s/^ *//g`
    7.  `%s/ *$//g`
    8.  删除 a 和 b 部分所在的行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-04T21:32:51.817

如果你有`xclip`，你可以剪断线条并`paste`用来交错：

1.  视觉选择一组线
2.  键入`"+d`以将它们剪切到剪贴板
3.  视觉选择另一组线
4.  类型`!paste -d '\n' /dev/stdin <(xclip -o -selection clipboard)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-21T20:10:03.827

将以下内容`interleave.awk`放在您的路径中，使其可执行。

```
#!/usr/bin/awk -f
BEGIN { C = 2; if (ARGC > 1) C = ARGV[1]; ARGV[1]="" }
{ g = (NR - 1) % C; if (!g) print $0; else O[g] = O[g] $0 "\n" }
END { for (i = 1; i < C; i++) printf O[i] } 
```

然后从`vim`在可视模式下突出显示行，然后调用`:'<,'>!interleave.awk 3`，或将 3 替换为要交错的多个组（或留空 2）。

您要求一种有效的方法。除了解释语言，这可能是交错任意行的最有效算法 - 第一组立即打印，节省了一些 RAM。如果 RAM 非常宝贵（例如，大量行或太多行），您可以改为将偏移存储到每行的开头，并且如果行具有一致的明确定义的长度（至少在组内），您不会甚至需要存储偏移量。然而，这种方式文件只被扫描一次（允许使用标准输入），并且 CPU 可以快速复制数据块，而文件指针操作可能每个都需要上下文切换，因为它们通常必须触发系统调用。

也许最重要的是，代码简单而简短——阅读和执行的效率通常是最重要的。

编辑：看起来其他人已经找到了相同的解决方案 - 刚刚在搜索引擎中重新构建问题以查看我是否遗漏了一些明显的东西时发现了[https://stackoverflow.com/a/16088069/118153 。](https://stackoverflow.com/a/16088069/118153)

# url-rewriting - Global.aspx 文件中的 ASP.NET 4.0 重写规则 重写问题

> ID：14794804
> 
> 赞同：0
> 
> 时间：2013-02-10T04:47:58.197
> 
> 标签：url-rewriting

我在 IIS7 上的 ASP.NET 4.0 中使用了一个重写规则：

```
<system.webServer>
<rewrite>
  <rules>
    <rule name="Rewrite default to aspx" stopProcessing="true">
      <match url="^$" ignoreCase="false" />
      <action type="Rewrite" url="home.aspx" />
    </rule>
  </rules>
</rewrite>
<defaultDocument>
  <files>
    <add value="home.aspx" />
  </files>
</defaultDocument>
</system.webServer> 
```

此规则采用： (http:/example.com/aboutus.aspx) 并从 URL 的末尾删除 .aspx。我在子域（http://www.example.com/blog）上安装 wordpress 时遇到问题，由于我的重写规则，我收到以下错误：

> 说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> 
> 请求的 URL：/blog/.aspx

有谁知道我可以如何修复 URL 重写规则，以便它安全地到达（[http://www.example.com/blog/](http://www.example.com/blog/)）而不是在末尾添加 .aspx ？

是否有某种语法可以搜索博客子目录以忽略目录'/blog/'？

非常感激！谢谢！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:45:25.957

如果您希望您的规则适用于除`/blog/*`那些之外的每个 url，那么您可以使用 negate 选项：

```
<rule name="Rewrite default to aspx" stopProcessing="true">
  <match url="^blog/" ignoreCase="false" negate="true" />
  <action type="Rewrite" url="home.aspx" />
</rule> 
```

[http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-configuration-reference#Rule_pattern_properties](http://www.iis.net/learn/extensions/url-rewrite-module/url-rewrite-module-configuration-reference#Rule_pattern_properties)

# c++ - 关于指针对齐，有没有办法使指针与某个给定的内存边界对齐？

> ID：14794811
> 
> 赞同：0
> 
> 时间：2013-02-10T04:50:10.680
> 
> 标签：c++, c, pointers, alignment

我想要做的**不是**初始化与给定边界对齐的指针，而是像一些函数可以将指针（及其指向的内容）的物理地址转换/复制回对齐的内存地址来回，就像`alignedPtr()`在下面的代码中：

```
void func(double * x, int len)
{

//Change x's physical address to an aligned boundary and shift its data accordingly.
alignedPtr(x, len);

//do something...
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T04:58:50.013

假设分配的缓冲区的大小足够大，即`len`需要 + 对齐，则实现将需要 2 个步骤。

1.  `newPtr = ((orgPtr + (ALIGNMENT - 1)) & ALIGN_MASK);`- 这将生成新的指针

2.  由于预期的设计是进行就地计算，因此从`newPtr + len`向后复制以避免覆盖数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T04:59:09.483

在 C++11 中，您可以使用稍微令人困惑的[`std::align`](http://en.cppreference.com/w/cpp/memory/align).

```
void* new_ptr = original_ptr;
std::size_t space_left = existing_space;
if(!std::align(desired_alignment, size_of_data, new_ptr, space_left)) {
    // not enough space; deal with it
}
// now new_ptr is properly aligned
// and space_left is the amount of space left after aligning

// ensure we have enough space left
assert(space_left >= size_of_data);

// now copy from original_ptr to new_ptr
// taking care for the overlapping ranges
std::memove(new_ptr, original_ptr, size_of_data); 
```

# ajax - 随机获取 AJAX 状态 0

> ID：14794817
> 
> 赞同：0
> 
> 时间：2013-02-10T04:52:07.060
> 
> 标签：ajax, cordova

我有一个 PhoneGap 项目，最近我遇到了很多随机的“状态 0”结果。我可以连续尝试相同的端点 10 次，传递相同的 post 参数，状态将在 200 和 0 之间翻转。在这两种情况下，结果几乎立即返回 - 这不是超时问题。

如果平台是一个因素，我在 iOS 中使用 PhoneGap。有人对从哪里开始寻找有任何想法吗？

仅供参考 - 我[在 ios 中使用 PhoneGap 实现了 Ajax https 调用的提示不起作用？](https://stackoverflow.com/questions/9276643/ajax-https-call-in-ios-using-phonegap-not-working/9843315#9843315). 起初我认为它有帮助，但也许这只是运气好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T15:32:45.693

通过 AJAX 请求 URL 时，状态为 0 是完全正常的。由于某些浏览器会在 CORS 请求上返回 0，但由于您是从 file:// 协议执行请求，因此 CORS 不适用。当我执行 AJAX 请求时，我将 200 和 0 视为成功。

# android - Android - 为突出显示的文本调用 TextWatcher

> ID：14794822
> 
> 赞同：0
> 
> 时间：2013-02-10T04:52:44.767
> 
> 标签：android, android-edittext

所以我是 Android 开发的新手，我目前正在研究 TextWatcher。

我正在尝试做的是将我的 TextWatcher 侦听器附加到 EditText 小部件，在用户输入一些文本后，说“Hello”，他突出显示“llo”并输入 r，我在 TextView 小部件中显示更改。对于上面的示例，它将显示“llo --> r”。

现在从我阅读和尝试的内容来看，由于每次用户输入内容时都会调用 textchangelistener，所以当我在手机上运行它时，我的代码最终崩溃了。

有没有办法仅在更改突出显示的文本时调用侦听器，以避免每次我只是在 EditText 小部件中输入内容时调用它？我希望我的问题是有道理的，在发帖之前我已经尝试过环顾四周，但我找不到任何东西。

不寻找代码，只是一些指针，所以我可以弄清楚如何做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T05:11:42.463

您最好的选择是使用 OnEditorActionListener 而不是我直到现在才知道存在的 textwatcher。当文本视图发生更改时会调用它，并且由于编辑文本是文本视图，因此它将完美地工作。

[以下是有关侦听器的一些信息](http://developer.android.com/reference/android/widget/TextView.OnEditorActionListener.html)

顺便说一句，欢迎来到 android 平台，我想你会发现它是一门丰富的语言，绝对值得学习。如果你真的想要一些指针，你的主要参考点应该是[这个链接](http://d.android.com)，它在开发选项卡中有许多指南和指针。祝你好运

# c - 没有printf的C语言中的“Hello world”？

> ID：14794823
> 
> 赞同：5
> 
> 时间：2013-02-10T04:53:01.947
> 
> 标签：c

是否可以在不使用 printf 函数的情况下用 C 语言编写“hello world”程序？（同时仍然保持程序相对在几行）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-10T04:57:30.613

这应该有效：

```
int main (void)
{
    puts("Hello, World!");
    return 0;
} 
```

你为什么不想使用`printf`？我想不出任何理由不这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-10T06:41:01.057

好吧，如果我们要包括愚蠢的例子（是的，我在看着你，科技龙），我会选择：

```
#include <stdio.h>

void makeItSo (char *str) {
    if (*str == '\0') return;
    makeItSo (str + 1);
    putchar (*str);
}

int main (void) {
    makeItSo ("\ndlrow olleH");
    return 0;
} 
```

只是不要对非常长的字符串执行此操作，否则您会发现 Stack Overflow 的*真正*含义:-)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-10T04:58:01.430

```
write(STDOUT_FILENO, "hello world", strlen("hello world")); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-10T05:46:41.060

这是一个荒谬的选择，而不是仅仅使用`puts("hello world\n");`

```
#include <stdio.h>
int main(void){
  char *s="hello world\n";
  while (*s) putchar(*s++);
} 
```

# windows-8 - 监控 Windows 8 应用程序连接

> ID：14794824
> 
> 赞同：0
> 
> 时间：2013-02-10T04:53:05.127
> 
> 标签：windows-8

案例：我有一台 Windows 8 平板电脑，上面运行着一个应用程序。我正在寻找的是一个程序或机制，通过它我可以监控我正在监控的应用程序所做的所有传入和传出 http/https 连接。我可以在 android 和 ios 平板电脑上做到这一点，但不知道如何在 windows 8 平板电脑上做到这一点。

我可以在平板电脑上安装任何东西（如应用程序或日志程序）来监控连接吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T19:55:08.420

您可以使用[Wireshark](http://www.wireshark.org/)或[NetMon](http://www.microsoft.com/en-us/download/details.aspx?id=4865)查看网络上的流量。两者都不会直接在 Windows RT 上运行，但这不是必需的。只要您与要监控的平板电脑在同一网络上运行，您就可以捕获所有您想要的流量。

# regex - htaccess 正则表达式重写

> ID：14794829
> 
> 赞同：2
> 
> 时间：2013-02-10T04:53:36.390
> 
> 标签：regex, .htaccess, mod-rewrite

我正在尝试改变这一点：

> /news/index.php?id=101&title=this-is-a-very-long-title

对此：

> /新闻/这是一个非常长的标题/

使用 htaccess 重写规则。知道怎么做吗？

我试过了：

```
Options +FollowSymLinks
RewriteEngine On 
RewriteCond %{SCRIPT_FILENAME} !-d 
RewriteCond %{SCRIPT_FILENAME} !-f 
RewriteRule ^.+/news/index.php?title=$1 [NC,L,R] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T05:58:00.397

我认为这是你需要的：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_URI}  !index\.php   [NC]
RewriteRule ^.*/([^/]+)/?   news/index.php?id=101&title=$1  [L,NC] 
```

静默地图

`http://example.com/news/this-is-a-very-long-title/`带或不带斜杠

到：

`http://example.com/news/index.php?id=101&title=this-is-a-very-long-title`

在您的规则`id=101&`中，替换 URL 中不存在字符串，因此如果不需要，请将其从重写规则中删除。

对于永久且可见的重定向，请替换`[L,NC]`为`[R=301,L,NC]`.

# matlab - Matlab中带箭头的线

> ID：14794832
> 
> 赞同：1
> 
> 时间：2013-02-10T04:54:04.047
> 
> 标签：matlab, line

我使用 ARROW.m 脚本 ( [http://www.mathworks.com/matlabcentral/fileexchange/278-arrow-m](http://www.mathworks.com/matlabcentral/fileexchange/278-arrow-m) ) 在 3D 中绘制了一条带箭头的线，如下所示：

```
figure(1)
clf
hold on;
scatter3(X,Y,Z,'ko')
Z1 = 500;
arrow([max(X) max(Y) Z1],[min(X) min(Y) Z1],15,'BaseAngle',60, 'FaceColor',[0 1 0]) 
```

但是，我想在 XZ 平面上进行输出（必须包含线和箭头）；即视图（[180 0]），而不是 3D，这仅对可视化有好处。不幸的是，虽然这条线是可见的，但当我进入 2D 视图时看不到箭头。我尝试按照脚本作者的建议包含 'CrossDir',[0 0 1] ，但没有帮助。有什么建议吗？

提前致谢。

# c++ - C++ 函数运行超出预期

> ID：14794837
> 
> 赞同：0
> 
> 时间：2013-02-10T04:55:02.440
> 
> 标签：c++, function

当我运行我的程序时，用户可以登录，但是如果输入错误的用户名，它会再次运行检查用户名循环，说他们没有输入有效的用户名。除了一件事之外，这项工作非常好。假设他们尝试登录三次，第三次尝试正确，并提示输入密码。一旦他们输入它，它就会要求输入第二个密码，然后再输入第三个密码。似乎它正在完成其他尝试的功能。我想不出一种方法来检查这一点。有任何想法吗。

***`UserCheck`如果您查看它，您会看到我正在调用`getNameIndex`. 我几乎肯定这是发生错误的地方。***

**检查用户的功能：**

```
void User_Psw::UserCheck()
{
    // read from the database
    ifstream fin("dataBase.txt", ios::in);

    if( !fin.good() )
    {
        cout << "Failed to open database file." << endl;
        return;
    }

    while (fin >> username >> password)
    {
        Usernames.push_back(username);
        Password.push_back(password);
        ++sizeOfDatabase; // This may or may not be needed elsewhere.
    }

    // rest of the program
    cout << "Username: ";
    cin >> username;

    getNameIndex();

    cout << "Password: ";
    cin >> password;

    if(!PasswordMatches())
    {
        cout << "Access denied";
    }
    else
    {
        cout << "Success! You have logged in.";
    }
} 
```

**这是用户名检查功能**

```
void User_Psw::getNameIndex()
{
    userThere = false;

    for(int i=0; i < sizeOfDatabase; i++)
    {
        if (Usernames[i] == username)
        {
            index = i;
            userThere = true;
        }
    }
    if (userThere == false)
    {
        cout << "\nThat user name does not exsist. \n";
        cout << "Please try again. \n\n";
        UserCheck();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T04:58:54.780

您的程序结构错误。

Instead of getNameIndex calling UserCheck() again, you should have getNameIndex return a bool - true on success, false on failure. Run it inside of a loop, something like this:

```
bool success = false;

while (!success)
{
 cout << "Username: ";
 cin >> username;

 success = getNameIndex();
} 
```

Also, instead of having global variables, you should pass them to the function. Something like:

`success = getNameIndex(username);`

and `getNameIndex()` shouldn't do any I/O - the function that calls `getNameIndex()` should also be responsible for printing the error message. Imagine if you used `getNameIndex()` in a different context, such as when when the program is being run by another program or in an automated way - then printing to the console would be meaningless.

# php - 使用 php 从 url 获取特定行

> ID：14794840
> 
> 赞同：1
> 
> 时间：2013-02-10T04:55:18.230
> 
> 标签：php, preg-match, preg-match-all

嗨，我想从给定的 url 中获取特定的行...例如从[这个](http://openexchangerates.org/api/latest.json?app_id=ae2f63619e8d4cc4bd0beaf9fd73839e)url，我想获取行“GBP”：0.632956。我想我必须使用 preg 函数，但任何人都可以给我一个例子如何得到它..

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T04:59:55.587

这是一个 JSON 响应，因此您不需要任何正则表达式：

```
$response = file_get_contents('http://openexchangerates.org/api/latest.json?app_id=ae2f63619e8d4cc4bd0beaf9fd73839e');
$data = json_decode($response);
echo $data->rates->GBP; 
```

[**演示**](http://codepad.viper-7.com/v17F11)

也可以看看：[`json_decode()`](http://www.php.net/json_decode)

# mvvm - 有谁知道 ReactiveUI 的 ReactiveCommand 的一个很好的例子？

> ID：14794841
> 
> 赞同：7
> 
> 时间：2013-02-10T04:55:28.293
> 
> 标签：mvvm, windows-phone-8, windows-phone, reactiveui

我没有经验，尤其是在 MVVM 上，但是尝试使用 ReactiveUI，而且我不理解我发现的演示 ReactiveCommand 的示例。我以前使用过 ICommand / DelegateCommand 一次，但这次有所不同，我没有得到它。

我想做的很简单。单击视图中的一个按钮，并让它在视图模型中执行一个方法。我发现的示例都涉及 IObservable<>，但我不明白，因为它们没有针对我这样的菜鸟进行解释。

基本上，我正在尝试将此作为一种学习体验，而我最理想的做法是将 xaml 中按钮的 Command 属性绑定到一个命令（但它有效，我不知道），这会导致一种方法执行。没有集合，我只是传递一个 int 变量。

谢谢您的帮助。对此，我真的非常感激。

**编辑**- 下面出现使用 Paul Betts 建议的代码：

C＃

```
public ReactiveCommand AddToDailyUsed { get; protected set; }

public MainPageVM()
{
    Initialize();
    AddToDailyUsed = new ReactiveCommand();
    AddToDailyUsed.Subscribe(AddToTodayUsedAction => this.AddToDailyUsedExecuted());
}

private object AddToDailyUsedExecuted()
{
    MessageBox.Show("AddToDailyUsedAction");
    return null;
}

private void AddToDailyUsedAction(object obj)
{
    MessageBox.Show("AddToDailyUsedAction");
} 
```

XAML

```
<Button Content="{Binding Strings.add, Source={StaticResource LocalStrings}}"
        Command="{Binding AddToTodayUsed}"
        Margin="-5,-10, -10,-10"
        Grid.Row="3"
        Grid.Column="2" /> 
```

显然我错过了一些东西。我在 AddToDailyUsedExecuted 和 AddToDailyUsedAction 方法处插入了断点，但它们从未到达。

**编辑**视图后面代码的构造函数：

```
MainPageVM mainPageVM = new MainPageVM();

public MainPage()
{
    InitializeComponent();
    Speech.Initialize();
    DataContext = mainPageVM;
    ApplicationBar = new ApplicationBar();
    TaskRegistration.RegisterScheduledTask();

    this.Loaded += new RoutedEventHandler(MainPage_Loaded);

    //Shows the rate reminder message, according to the settings of the RateReminder.
    (App.Current as App).rateReminder.Notify();
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-10T23:04:20.283

因此，ReactiveCommand 本身就是一个`IObservable<object>`- 在这种情况下，您可以将 IObservable 概念化为一个事件 - 该事件在调用命令时（即按下按钮时）触发。因此，在您的构造函数中，您可以编写：

```
MyCommand = new ReactiveCommand();
MyCommand.Subscribe(param => this.MyCommandHasExecuted()); 
```

然而，对于常规事件而言，IObservable 的巧妙之处在于您可以在它们上使用 LINQ：

```
// Now, MyCommandHasExecuted only gets run when the UserName isn't null
MyCommand.Where(param => this.UserName != null)
    .Subscribe(param => this.MyCommandHasExecuted()); 
```

**更新：**您的 Xaml 绑定到`AddToTodayUsed`但您的 ViewModel 命令被调用`AddToDailyUsed`。会是这样吗？

# javascript - html表动态编辑行

> ID：14794843
> 
> 赞同：0
> 
> 时间：2013-02-10T04:55:50.573
> 
> 标签：javascript, html

我有一个 html 表格，我想通过单击按钮来编辑表格的内容。

我的 HTML 代码：

```
 <form name="myform">
<table id="tblFollow" >
    {% for key, value in result.iteritems() %}
<tr>
    <td > {{ key }}</td>
    <td> <div id="editableText" > {{ value }} </div></td>

</tr>
    {%  endfor %}
</tbody>
   </table>
<h>  {{  passvalue }} </h> <br>
<input type="button" onclick="changeContent()" value="Change content">
 </form> 
```

我的javascript是

```
 function changeContent(){
        var newstate = !editableText.isContentEditable
        editableText.contentEditable = newstate
        editableText.className = (newstate)
    } 
```

但问题是当我点击按钮时，只有桌子上的第一排显示可编辑。除此之外，所有行都是不可变的。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T05:26:26.940

您应该使用`class`代替`id`。[Id 是唯一的](https://developer.mozilla.org/en-US/docs/CSS/Common_CSS_Questions#What_is_the_difference_between_id_and_class.3F)。

```
<div class="editableText" > {{ value }} </div> 
```

然后在您的 javascript 中，您需要遍历所选元素：

```
function changeContent(){
  var editables = document.getElementsByClassName('editableText');
  for (var i = 0; i < editables.length; i++) {
    var newstate = !editables[i].isContentEditable;
    editables[i].contentEditable = newstate;
  }
} 
```

# c++ - 删除数组指针

> ID：14794844
> 
> 赞同：0
> 
> 时间：2013-02-10T04:55:59.400
> 
> 标签：c++, pointers, reference

所以，

我遇到了一个我无法弄清楚的错误（除非我的理解不正确）。

我有以下代码：

```
 int doubleSize=size*2;
    int *newArr = new int[doubleSize];
    for(int i=0; i<size; i ++) {
        newArr[i]=jon[i];
    }
    size*=2;

    display(newArr);
    jon=newArr;
    display(jon);
    delete[] newArr;
    display(jon); 
```

在第一次和第二次电话之后，我得到了我想要/期望的东西。在第三次显示调用中，0 和 1 索引是内存地址，索引中的其余值与前 2 次调用匹配。这可能是什么原因造成的？

我还有另一个后续问题，使用我拥有的代码，删除 jon[] 会不会导致“旧”jon[] 留在内存中？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T04:58:54.920

你有未定义的行为，所以任何事情都可能发生。

```
int *newArr = new int[size*2];
// now newArr is a pointer to a memory area
jon=newArr;
// now jon is a pointer to the same area, whatever jon pointed to before is leaked
delete[] newArr;
// now the memory area no longer exists
display(jon);
// using jon is now illegal, it has the address of a deleted memory area 
```

可能正确的解决方案是：

```
int *newArr = new int[doubleSize]; // allocate a new area
for( int i=0; i<size; ++i ) {       // fill it in
    newArr[i] = jon[i];
}
delete [] jon; // get rid of the old area we don't need anymore
jon = newArr;  // now jon is linked to our brand new data in a brand new area 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T05:00:06.683

当您 时`delete[] newArr`，您正在取消分配地址处的内存`newArr`。由于`jon`也指向相同的内存（因为您设置`jon = newArr`了 ），因此内存正在被其他一些值覆盖（可能在您的`display`函数中）。您需要做的是使用一些复制功能（如[`memcpy`](http://www.cplusplus.com/reference/cstring/memcpy/)）将数据复制到新分配的块中`jon`，而不仅仅是指向`jon`与`newArr`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T04:59:54.633

最后一个`display`电话试图显示与您刚刚删除`jon`的内容相同的内容！`newArr`因此行为将是未定义的。

# algorithm - 将叶约束 MST p‌r‌o‌b‌l‌e‌m 减少到哈密顿路径 p‌r‌o‌b‌l‌e‌m

> ID：14794848
> 
> 赞同：2
> 
> 时间：2013-02-10T04:57:05.403
> 
> 标签：algorithm, graph-theory, graph-algorithm, minimum-spanning-tree, np-complete

众所周知，计算具有最小可能叶数的生成树是 NP 完全的。但是我无法弄清楚这个问题的多项式时间减少到哈密顿路径问题。

我的指数减少：

```
if(hamiltonian path exists for whole graph) 
    min leaves = 1;
    return;
else
    for each vertex of the graph
        if(hamiltonian path exists for this graph after removing the vertex and its incident edges)
            min leaves = 2;
            return;
    continue similarly for the graph deleting 2 vertices, 3 vertices, 4vertices,... until you get a minimum spanning tree with some minimum number of leaves. 
```

所以，在最坏的情况下，这个算法总共会产生

```
(N choose 1) + (N choose 2) + (N choose 3) + ....(N choose N) = 2^N 
```

调用哈密顿路径问题。因此减少是指数的。

请为此问题提出多项式时间缩减建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T09:15:28.427

减少算法的想法是，如果您可以证明可以使用约束 MST 问题（通过多项式时间减少）来解决哈密顿路径问题，那么 MST 问题的任何多项式时间解决方案都将允许您解决哈密顿量多项式时间内的路径问题。由于这是不可能的，这将证明约束 MST 问题不能在多项式时间内解决。

您尝试做的是相反的事情 - 证明哈密顿路径问题至少与受约束的 MST 问题一样难。

请注意，您在评论中说您的任务是减少**哈密顿**路径问题，并且在问题中您说您试图减少**哈密顿**路径问题。

您可以使用约束 MST 问题轻松解决哈密顿路径问题，因为哈密顿路径将始终是具有 2 个（或哈密顿循环为 0）叶的生成树。

# c# - 如何在运行时设置控件的修饰符？

> ID：14794850
> 
> 赞同：0
> 
> 时间：2013-02-10T04:57:17.767
> 
> 标签：c#, winforms, access-modifiers, design-time

```
private void referenceDesk_DoubleClick(object sender, EventArgs e)
{
    tabControl1.TabPages.Add(new TabPage("Donkey Kong"));
} 
```

没有tabControl1.Modifier类型的命令可以用，也不能用

```
new public TabPage(""); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T05:09:26.273

设计时属性控制您正在修改的对象的`Modifiers`成员创建。这不是您以后可以更改的。如果您想将选项卡页添加到选项卡控件并且希望以后能够更改它们，请为它们定义类成员并为它们分配适当的访问修饰符：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private List<TabPage> tabPages;

    private void referenceDesk_DoubleClick(object sender, EventArgs e)
    {
        tabPages = new List<TabPage>();
        tabPages.Add(new TabPage("First"));
        tabPages.Add(new TabPage("Second"));
        foreach (var tab in tabPages)
            tabControl1.TabPages.Add(tab);
    }

    ....
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T05:02:23.067

设计器代码不应该被用户修改，因为每次您在设计器中更改表单时，Visual Studio 都会重新编写它（正如您所发现的那样）。

一种将控件声明和初始化移动到非设计器代码文件的方法。但是，这意味着您的控件将不再出现在设计器中。

# login - 登录弹出框在 Firefox 中不起作用，但在 Chrome 中可以

> ID：14794854
> 
> 赞同：0
> 
> 时间：2013-02-10T04:57:43.970
> 
> 标签：login, popup

我已阅读有关发布问题的建议，该问题应尽可能精确并使用高级搜索工具，因此我希望我的问题以前没有被涵盖。

**注意：**我不是程序员，只能在代码中找到自己的方法（在我的站点的 cpanel 中）。

我的网站的登录弹出框在 Firefox 中不起作用——尽管它在 3 年前就这样做了，直到几周前，所以最近的 FF 更新可能存在问题）。然而，它在 Chrome 中工作正常。

将鼠标悬停在登录/注册文本上会显示`alt`标签“单击以显示弹出登录表单”，但单击时没有任何反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T05:17:19.683

您能否提供一个 URL 供其他人查看您所指的内容？

我相信 Firefox 刚刚更新到第 18 版。我会尝试降级到 17 以确认这是 FF 的问题。如果是这样，我会打开 mozilla 的问题（[https://bugzilla.mozilla.org/](https://bugzilla.mozilla.org/)）。也在那里搜索你的问题。

# wxpython - Windows 中的 WxPython 2.9：按钮不会 Enable()

> ID：14794862
> 
> 赞同：1
> 
> 时间：2013-02-10T04:59:32.267
> 
> 标签：wxpython

谁能告诉我在什么情况下这会失败？

```
self.next_button.Enable( self.__next_enabled )
assert( self.next_button.Enabled == self.__next_enabled ) 
```

我知道这不是类型问题——`print self.next_button`给出`<wx._controls.Button; proxy of <Swig Object of type 'wxButton *' at 0x90ea9c0>`. 插入`self.next_button.Refresh()`没有帮助。也没有`wx.Yield()`。我还检查了按钮是否被冻结（以防万一），但事实并非如此。

WxPython 版本在 Windows 7 上是 2.9.4.0。我在 Ubuntu 或 Mac 上似乎没有这个问题。

实际上，它甚至比这更奇怪：当我`wx.ProgressBar`在不同的函数调用中打开 a 时，该按钮似乎神奇地禁用了自身。这里的代码试图重新启用按钮作为解决方法。同样，Ubuntu 和 Mac 上的相同代码永远不会禁用该按钮。

### 更新

我像这样解决了这个问题：

```
def reset_button_states( self ):
    self.next_button.Enable( self.__next_enabled )
    if self.next_button.Enabled != self.__next_enabled:
        from threading import Timer
        Timer( 0.1, self.reset_button_states ).start() 
```

我不确定为什么它`wx.Yield`不起作用，但我暂时会接受它。我仍然想知道为什么`Enable`呼叫可能会静默失败，以及为什么按钮首先会被如此强烈地禁用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T14:28:03.267

我猜你的 self.__next_enabled 变量有时设置为 False 或 0（零）。如果是这样，那么当您使用 False 调用按钮的 Enable 函数时，它会禁用该按钮。如果您包含一个小的可运行示例，这将有所帮助。

# nosql - 谁在键值存储 nosql 数据库中分配一个键？

> ID：14794871
> 
> 赞同：0
> 
> 时间：2013-02-10T05:01:26.880
> 
> 标签：nosql, key-value-store

在我读过的许多白皮书中，都指出在键值存储（哈希表实现）中，键由系统分配给键值对。然而，在其他情况下，它是由用户分配的。

我的问题：

*   如果系统分配它，用户如何知道密钥是什么？
*   用户如何引用一对？

# nsis - 在 NSIS 中使用节定义之前的节索引或首先安装最后一个节

> ID：14794872
> 
> 赞同：0
> 
> 时间：2013-02-10T05:01:34.873
> 
> 标签：nsis

我正在编写一个 NSIS 安装程序脚本来安装一些网络打印机。我希望每台打印机都安装为可选的`Section`，但我不想多次重新启动打印后台处理程序。因此，我创建了一个隐藏部分来检查是否选择了每个打印机部分，如果是，则它包含注册表设置以创建该打印机的端口。然后它重新启动打印后台处理程序。问题是我需要先完成这个隐藏部分，但我还需要使用打印机部分的部分索引。

有谁知道在定义部分之前如何引用部分索引？我想到的另一种方法是将隐藏部分移到最后，但是我需要一种方法来确保首先安装它。任何帮助或想法将不胜感激。

```
Section "-"
    ${IfThen} ${SectionIsSelected} ${Sec01} ${|} !include "10.0.0.8.nsh" ${|}
    ${IfThen} ${SectionIsSelected} ${Sec02} ${|} !include "10.0.0.11.nsh" ${|}
    nsExec::Exec 'net stop spooler'
    nsExec::Exec 'net start spooler'
SectionEnd

Section "My Printer" Sec01
    ExecWait 'rundll32 printui.dll,PrintUIEntry /if /b "My Printer" /f "$EXEDIR\oj8000\hpoj800z.inf" /r "10.0.0.8" /m "HP Officejet Pro 8000 A809 Series" /z'
SectionEnd

Section "Copier" Sec02
    ExecWait 'rundll32 printui.dll,PrintUIEntry /if /b "Copier" /f "$EXEDIR\copier\oemsetup.inf" /r "10.0.0.11" /m "RICOH Aficio MP C4000 PCL 6" /z'        
SectionEnd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T05:48:16.343

```
Section -
...
call doSectionChecks
SectionEnd

Section "My Printer" Sec01
...
SectionEnd

Function doSectionChecks
... ${Sec01}
FunctionEnd 
```

# java - 如何合并字符串数组和布尔数组

> ID：14794875
> 
> 赞同：-1
> 
> 时间：2013-02-10T05:02:01.890
> 
> 标签：java, arrays

我有两个这样的数组

```
String[][] name=new String[4][10];
boolean[] accun=new boolean[10];
name[0][0]="ali";
name[0][1]="max";
name[0][2]="ahmad";
etc.....
name[1][0]="9999";
name[1][1]="9999";
name[1][2]="9999";
etc...
and name[2][..] ,name[3][..] like that. 
```

现在我怎样才能将这两个数组合并在一起？像这样。

```
name [5][0]=true;
name [0][0]="alex"; 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T05:06:57.760

数组的类型对于数组的所有元素都是相同的。这对您有用的唯一方法是使用`Object[][]`因为`Object`是`String`和的超类型`Boolean`。但是，您可能应该做的是创建一个具有当前由数组的不同索引表示的成员的类。例如：

```
class Foo {
  String name;
  int count;
  boolean isFoo;
}

Foo[] foos = new Foo[10];
foo[0] = new Foo();
foo[0].name = "aaaa";
foo[0].count = 9999;
foo[0].isFoo = true; 
```

然后，您还应该研究构造函数和访问器方法，以使代码更符合 Java 的习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T05:45:14.673

您的问题有点模棱两可。我的假设是您试图询问如何在数组中使用不同类型的对象。这里你应该去

```
 Object[][] name = new Object[4][10]; 
```

现在您可以将 int 和 string 对象存储在 name 数组下。

# c - 转换换行符

> ID：14794881
> 
> 赞同：1
> 
> 时间：2013-02-10T05:02:52.240
> 
> 标签：c

我正在尝试将换行符 \n 转换为 dos 样式，即 \r\n ，而不使用 libc。

这是我的尝试，我做错了什么？

```
 for(i = 0; str[i]!='\0'; ++i)
{
   if ('\r' == str[i] && '\n'==str[i+1]) 
       ++count;
}

strPtr = malloc(i + 1 + count);

for(i = j = 0; str[i]!='\0'; ++i)
{
   if ('\r' == str[i]) 
   strPtr[j++] = "";
}

strPtr[j] = 0; 
```

输出现在应该是“嗨\r\n，你好吗\r\n，你还好吗\r\n”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T05:09:34.880

这里有很多问题。首先，您正在使用原始缓冲区修改*字符串*。但是，原始缓冲区没有足够的空间来存储额外的`\r`字符。您需要分配更大的缓冲区。

其次，UNIX 风格的回车符不存储为两个单独的`\`和`n`字符。它是一个值为 的 ASCII 字符`0xA`，可以使用转义序列来表示`\n`。所以要检查你当前的字符是否是换行符，你想说`strPtr[i] == '\n'`

最后，当您*说*`strPtr[i-1] = '\r'`. 这将替换 ,*之前*的字符`\n`（例如`i`in `Hi`）。

基本上，您要做的是为输出创建第二个缓冲区，并将字符串逐个字符复制到输出缓冲区。当您遇到一个`\n`字符时，您不会将单个字符复制`\n`到新缓冲区，而是复制`\r\n`.

输出缓冲区的大小需要是输入缓冲区大小的两倍，以处理每个字符都是 的输入字符串`\n`，再加上 1 表示 NULL 终止符。`\n`但是，您可以通过预先计算原始字符串中的字符数来计算输出缓冲区的最佳大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T05:32:24.563

C语言中所有的转义序列字符都是一个字符，只存储在一个字节的内存中，不要认为它是两个。

`\n`因此，您可以在检查时直接检查字节`\0`。

如果你想用（2个字符）替换`\n`（1`\r\n`个字符）意味着`str`应该有额外的内存，但在你的程序中它没有额外的内存。

```
char *a = "\n"; //This is one byte
char *b = "\\\n"; //This is two byte, 1st byte for '\' and 2nd byte for new line
char *c = "\\\r\n"; //Similarly this is three byte
char *c = "\r\n"; //Similarly this is two byte 
```

以下所有转义序列字符都是 C 语言中的单字节字符。

```
\n – New line
\r – Carriage return
\t – Horizontal tab
\\ – Backslash
\' – Single quotation mark
\" – Double quotation mark 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T05:14:11.653

您不能就地执行此操作。您正在为每个 '\n' 添加一个新字符 ('\r')，这意味着字符串必须扩展。最坏的情况是每个字符都是'\n'，这意味着我们会将字符串的大小加倍。因此，让我们创建一个两倍于原始字符串大小的缓冲区。

```
strtmp = malloc(strlen(str) * 2 + 1); /* +1 for null */
strcpy(strtmp, str);
strptr = strtmp;

for (i = 0; str[i] != 0; i++)
{
    if ((str[i] == '\\') && (str[i+1] == 'n'))
    {
        *strptr++ = '\\';
        *strptr++ = 'r';
    }

    *strptr++ = str[i];
}

printf(strtmp);
free(strtmp); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T05:14:49.260

您的`\n`字符串中的 是一个转义序列，由一个字符表示。

你的代码应该是这样的：

```
int main(void)
{
    char str[] = "Hi\n, How are you \n, are you okay\n";
    char *strPtr = str;

    int i, j;
    int count=0;

    for(i = 0; str[i]!='\0'; ++i)
    {
       if (`\n` == str[i]) ++count;
    }
    strPtr = malloc(i + 1 + count);
    for(i = j = 0; str[i]!='\0'; ++i)
    {
       if ('\n' == str[i]) strPtr[j++] = `\r`;
       strPtr[j++] = str[i];
    }
    strPtr[j] = 0;

    printf("This many times we changed it", count);
} 
```

**编辑**

当您决定更改问题时（顺便说一句 - 只需添加问题以进行澄清，而不是删除原始 OP 的大量内容，因为答案对未来的访问者没有任何意义） - 这是代码：

```
int main(void)
{
    char str[] = "Hi\r\n, How are you \r\n, are you okay\r\n";

    int i, j;
    for (i = j = 0; 0 != str[i]; ++i)
    {
       if ('\r' == str[i] && '\n' == str[i + 1])
       {
          ++count;
       }
       else
       {
          str[j++] = str[i];
       }
    }
    str[j] = 0;

    .. etc - str is without \r\n but \n, count is the number of lines. 
```

# python - 无法在 API 模式下使用 Xbee 发送/接收（python）

> ID：14794883
> 
> 赞同：4
> 
> 时间：2013-02-10T05:03:27.627
> 
> 标签：python, api, raspberry-pi, xbee

我有两个 Xbee Pro 900，每个都连接到一个 Raspberry Pi。两者都更新到版本 1061 并设置为 API Enable with escapes。它们还具有相同的 7FFF 调制解调器 VID。两个 Pi 都安装了 PySerial 和 python-xbee 库。

Xbee 1(Receiver) 的序列号为 0013A200409A1BB8
Xbee 2(Sender) 的序列号为 0013A200709A1BE9

我在下面包含了我的代码，这只是我在网上找到的示例代码。我的问题是我在适当的 Xbee 上没有收到任何东西。我完全不知道出了什么问题，我已经三次检查了目标地址，以及 Xbee 的两个配置设置。

Xbee 2 代码（发件人）：

```
#! /usr/bin/python

import time

from xbee import XBee
import serial

PORT = '/dev/ttyUSB0'
BAUD_RATE = 9600

# Open serial port
ser = serial.Serial(PORT, BAUD_RATE)

# Create API object
xbee = XBee(ser,escaped=True)
import pprint
pprint.pprint(xbee.api_commands)

DEST_ADDR_LONG = "\x00\x13\xA2\x00\x40\x9A\x1B\xB8"

# Continuously read and print packets
while True:
    try:
        print "send data"
        xbee.tx_long_addr(frame='0x1', dest_addr=DEST_ADDR_LONG, data='AB')
        time.sleep(1)
    except KeyboardInterrupt:
        break

ser.close() 
```

Xbee 1 代码（接收器）：

```
#! /usr/bin/python

from xbee import XBee
import serial

PORT = '/dev/ttyUSB0'
BAUD_RATE = 9600

# Open serial port
ser = serial.Serial(PORT, BAUD_RATE)

# Create API object
xbee = XBee(ser,escaped=True)

# Continuously read and print packets
while True:
    try:
        print "waiting"
        response = xbee.wait_read_frame()
        print response
    except KeyboardInterrupt:
        break

ser.close() 
```

当两个程序都在运行时，发送 Xbee 上的 Tx 灯闪烁，但接收 Xbee 上没有收到任何信息。有什么我想念的吗？谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-28T14:12:16.450

您使用的是 XBee 还是 XBeePro？我有同样的问题，[这篇文章](http://matteo.luccalug.it/2011/11/python-xbee/)对我帮助很大。

尝试通过以下方式修改接收方代码：

```
import config
import serial
import time
from xbee import ZigBee

def toHex(s):
    lst = []
    for ch in s:
        hv = hex(ord(ch)).replace('0x', '')
        if len(hv) == 1:
            hv = '0'+hv
        hv = '0x' + hv
        lst.append(hv)

def decodeReceivedFrame(data):
            source_addr_long = toHex(data['source_addr_long'])
            source_addr = toHex(data['source_addr'])
            id = data['id']
            samples = data['samples']
            options = toHex(data['options'])
            return [source_addr_long, source_addr, id, samples]

PORT = '/dev/ttyUSB0'
BAUD_RATE = 9600

# Open serial port
ser = serial.Serial(PORT, BAUD_RATE)

zb = ZigBee(ser, escaped = True)

while True:
    try:
        data = zb.wait_read_frame()
        decodedData = decodeReceivedFrame(data)
        print decodedData

    except KeyboardInterrupt:
        break 
```

在我的情况下，上面的代码输出以下内容：

```
[['0x00', '0x13', '0xa2', '0x00', '0x40', '0x9b', '0xaf', '0x4e'], ['0x68', '0x3f'], 'rx_io_data_long_addr', [{'adc-0': 524}]] 
```

[这里](http://efshare.com/?s=VS9P2P)我分享了Controller Node的配置设置（兼容X-CTU）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-11T00:49:16.030

您确定 XBee 模块处于转义 API 模式 ( `ATAP=2`) 吗？和 9600 波特？

你可以在 python-xbee 中启用一个模式来转储所有字符吗？

~~您确认串行接线正确吗？~~ *（我看到您使用的是 USB，所以这不是问题。）*

如果您没有连接硬件流控制，请确保 XBee 模块具有`ATD6=0`并`ATD7=0`设置（禁用 RTS 和 CTS）并且 python-xbee 不期待握手。

如果您确实在 XBee 上配置了硬件流控制，请确保您已告诉 python-xbee 使用它。

您可以在 RaspPi 上使用 minicom 或其他串行终端来确认串行是否正常工作？在接收端使用 minicom 来查看您是否收到任何信息？

您可以尝试使用连接到 PC 而不是 Pi 的无线电发送和接收吗？从 PC 发送到 Pi，反之亦然？

# eclipse - 无法访问 Eclipse 市场

> ID：14794885
> 
> 赞同：33
> 
> 时间：2013-02-10T05:03:35.877
> 
> 标签：eclipse, eclipse-marketplace

我似乎无法访问 Eclipse 市场。我正在使用朱诺 4.2。我尝试删除 eclipse 并删除所有插件，删除我的 .metadata 并删除 eclipse 应用程序数据。

我尝试将我的默认浏览器从 firefox 切换到 chrome，我尝试打开并完全关闭 Windows 防火墙。我在家。

不过，我能够获得日食更新。当我尝试为市场报告错误时，我得到了一个不同的错误。

当我尝试连接时，我收到了很多错误。

第一个是警告：

```
Connection to http://marketplace.eclipse.org/catalogs/api/p failed on Connection reset. Retry attempt 0 started 
```

其次是错误：

```
Cannot install remote marketplace locations.: 
```

第三是另一个错误：

```
Unexpected exception 
```

以下是按接收顺序排列的堆栈跟踪：

```
java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:189)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:254)
    at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)
    at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106)
    at org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116)
    at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.readLine(MultiThreadedHttpConnectionManager.java:1413)
    at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1973)
    at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)
    at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)
    at org.eclipse.ecf.provider.filetransfer.httpclient.HttpClientRetrieveFileTransfer$GzipGetMethod.execute(HttpClientRetrieveFileTransfer.java:120)
    at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:346)
    at org.eclipse.ecf.provider.filetransfer.httpclient.HttpClientRetrieveFileTransfer.performConnect(HttpClientRetrieveFileTransfer.java:1129)
    at org.eclipse.ecf.provider.filetransfer.httpclient.HttpClientRetrieveFileTransfer.openStreams(HttpClientRetrieveFileTransfer.java:699)
    at org.eclipse.ecf.provider.filetransfer.retrieve.AbstractRetrieveFileTransfer.sendRetrieveRequest(AbstractRetrieveFileTransfer.java:879)
    at org.eclipse.ecf.provider.filetransfer.retrieve.AbstractRetrieveFileTransfer.sendRetrieveRequest(AbstractRetrieveFileTransfer.java:570)
    at org.eclipse.ecf.provider.filetransfer.retrieve.MultiProtocolRetrieveAdapter.sendRetrieveRequest(MultiProtocolRetrieveAdapter.java:106)
    at org.eclipse.equinox.internal.p2.transport.ecf.FileReader.sendRetrieveRequest(FileReader.java:422)
    at org.eclipse.equinox.internal.p2.transport.ecf.FileReader.read(FileReader.java:273)
    at org.eclipse.equinox.internal.p2.transport.ecf.RepositoryTransport.stream(RepositoryTransport.java:172)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.epp.internal.mpc.core.util.AbstractP2TransportFactory.invokeStream(AbstractP2TransportFactory.java:35)
    at org.eclipse.epp.internal.mpc.core.util.TransportFactory$1.stream(TransportFactory.java:69)
    at org.eclipse.epp.internal.mpc.core.service.RemoteMarketplaceService.processRequest(RemoteMarketplaceService.java:141)
    at org.eclipse.epp.internal.mpc.core.service.RemoteMarketplaceService.processRequest(RemoteMarketplaceService.java:80)
    at org.eclipse.epp.internal.mpc.core.service.DefaultCatalogService.listCatalogs(DefaultCatalogService.java:36)
    at org.eclipse.epp.internal.mpc.ui.commands.MarketplaceWizardCommand$3.run(MarketplaceWizardCommand.java:200)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)

java.lang.reflect.InvocationTargetException
    at org.eclipse.epp.internal.mpc.ui.commands.MarketplaceWizardCommand$3.run(MarketplaceWizardCommand.java:203)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: org.eclipse.core.runtime.CoreException: Unable to read repository at http://marketplace.eclipse.org/catalogs/api/p.
    at org.eclipse.equinox.internal.p2.transport.ecf.RepositoryTransport.stream(RepositoryTransport.java:181)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.epp.internal.mpc.core.util.AbstractP2TransportFactory.invokeStream(AbstractP2TransportFactory.java:35)
    at org.eclipse.epp.internal.mpc.core.util.TransportFactory$1.stream(TransportFactory.java:69)
    at org.eclipse.epp.internal.mpc.core.service.RemoteMarketplaceService.processRequest(RemoteMarketplaceService.java:141)
    at org.eclipse.epp.internal.mpc.core.service.RemoteMarketplaceService.processRequest(RemoteMarketplaceService.java:80)
    at org.eclipse.epp.internal.mpc.core.service.DefaultCatalogService.listCatalogs(DefaultCatalogService.java:36)
    at org.eclipse.epp.internal.mpc.ui.commands.MarketplaceWizardCommand$3.run(MarketplaceWizardCommand.java:200)
    ... 1 more
Caused by: java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:189)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at java.io.BufferedInputStream.fill(BufferedInputStream.java:235)
    at java.io.BufferedInputStream.read(BufferedInputStream.java:254)
    at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)
    at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106)
    at org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116)
    at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.readLine(MultiThreadedHttpConnectionManager.java:1413)
    at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1973)
    at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)
    at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)
    at org.eclipse.ecf.provider.filetransfer.httpclient.HttpClientRetrieveFileTransfer$GzipGetMethod.execute(HttpClientRetrieveFileTransfer.java:120)
    at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
    at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
    at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:346)
    at org.eclipse.ecf.provider.filetransfer.httpclient.HttpClientRetrieveFileTransfer.performConnect(HttpClientRetrieveFileTransfer.java:1129)
    at org.eclipse.ecf.provider.filetransfer.httpclient.HttpClientRetrieveFileTransfer.openStreams(HttpClientRetrieveFileTransfer.java:699)
    at org.eclipse.ecf.provider.filetransfer.retrieve.AbstractRetrieveFileTransfer.sendRetrieveRequest(AbstractRetrieveFileTransfer.java:879)
    at org.eclipse.ecf.provider.filetransfer.retrieve.AbstractRetrieveFileTransfer.sendRetrieveRequest(AbstractRetrieveFileTransfer.java:570)
    at org.eclipse.ecf.provider.filetransfer.retrieve.MultiProtocolRetrieveAdapter.sendRetrieveRequest(MultiProtocolRetrieveAdapter.java:106)
    at org.eclipse.equinox.internal.p2.transport.ecf.FileReader.sendRetrieveRequest(FileReader.java:422)
    at org.eclipse.equinox.internal.p2.transport.ecf.FileReader.read(FileReader.java:273)
    at org.eclipse.equinox.internal.p2.transport.ecf.RepositoryTransport.stream(RepositoryTransport.java:172)
    ... 11 more

java.lang.reflect.InvocationTargetException
    at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:421)
    at org.eclipse.jface.wizard.WizardDialog.run(WizardDialog.java:1028)
    at org.eclipse.equinox.internal.p2.ui.discovery.wizards.CatalogViewer.updateCatalog(CatalogViewer.java:563)
    at org.eclipse.epp.internal.mpc.ui.wizards.MarketplaceViewer.updateCatalog(MarketplaceViewer.java:453)
    at org.eclipse.epp.internal.mpc.ui.wizards.MarketplacePage$6.run(MarketplacePage.java:332)
    at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
    at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135)
    at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4144)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3761)
    at org.eclipse.jface.window.Window.runEventLoop(Window.java:825)
    at org.eclipse.jface.window.Window.open(Window.java:801)
    at org.eclipse.epp.internal.mpc.ui.commands.MarketplaceWizardCommand.execute(MarketplaceWizardCommand.java:171)
    at org.eclipse.ui.internal.handlers.HandlerProxy.execute(HandlerProxy.java:290)
    at org.eclipse.ui.internal.handlers.E4HandlerProxy.execute(E4HandlerProxy.java:76)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56)
    at org.eclipse.e4.core.internal.di.InjectorImpl.invokeUsingClass(InjectorImpl.java:229)
    at org.eclipse.e4.core.internal.di.InjectorImpl.invoke(InjectorImpl.java:210)
    at org.eclipse.e4.core.contexts.ContextInjectionFactory.invoke(ContextInjectionFactory.java:131)
    at org.eclipse.e4.core.commands.internal.HandlerServiceImpl.executeHandler(HandlerServiceImpl.java:171)
    at org.eclipse.e4.ui.workbench.renderers.swt.HandledContributionItem.executeItem(HandledContributionItem.java:814)
    at org.eclipse.e4.ui.workbench.renderers.swt.HandledContributionItem.handleWidgetSelection(HandledContributionItem.java:707)
    at org.eclipse.e4.ui.workbench.renderers.swt.HandledContributionItem.access$7(HandledContributionItem.java:691)
    at org.eclipse.e4.ui.workbench.renderers.swt.HandledContributionItem$4.handleEvent(HandledContributionItem.java:630)
    at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
    at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1053)
    at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:4169)
    at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3758)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1029)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
    at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
    at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
    at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
    at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
    at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
    at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
    at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
Caused by: java.lang.IllegalStateException
    at org.eclipse.equinox.internal.p2.discovery.Catalog.performDiscovery(Catalog.java:64)
    at org.eclipse.epp.internal.mpc.ui.catalog.MarketplaceCatalog.performDiscovery(MarketplaceCatalog.java:255)
    at org.eclipse.equinox.internal.p2.ui.discovery.wizards.CatalogViewer$6.run(CatalogViewer.java:569)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121) 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2014-08-16T06:09:23.643

**这是解决方案，**

*如果您由于各种原因（大学、家庭、工作场所等）像我一样经常更换代理，那么您很可能会因为 eclipse IDE 中的连接设置配置不当而收到此错误。您所要做的就是使用当前设置并使其进入工作状态。就是这样，，*

**1\. 前往**

窗口-> 首选项-> 常规-> 网络连接。

**2.更改设置**

Active Provider-> Manual-> 并检查---> HTTP, HTTPS and SOCKS

如果您的活动提供程序已设置为手动，请尝试恢复默认（本机）

* * *

> 就是这样，重新启动 Eclipse 就可以了！

* * *

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-02-10T05:40:44.027

考虑到这是一个*一般*的编程问题，一些可能的原因是：

*   该服务可能会暂时中断

*   您的防火墙可能有问题。这些可以是本地的，也可以由您的 ISP 实施。

*   您的代理 HTTP 设置（如果需要）可能不正确。 [这个答案](https://stackoverflow.com/a/25337453/139985)解释了如何调整 Eclipse 内部代理设置......如果这是问题所在。

*   过度活跃的防病毒软件可能会阻止您的访问。

*   该服务可能已将某些网络范围列入黑名单，并且您的主机 IP 地址是“附带损害”。

尝试使用 Web 浏览器连接到该 URL，以尝试查看是否只是 Eclipse 受到影响……还是更广泛的问题。

* * *

在 Eclipse Marketplace 服务的上下文中考虑这一点，首先解决任何本地代理/防火墙/AV 问题（如果适用）。如果这没有帮助，你能做的最好的事情就是耐心等待。

*   已经观察到 Eclipse Marketplace 服务有时会出现故障**。**它不会经常发生，当它发生时，问题确实会相对较快地得到解决。（几小时，而不是几天……）

*   我找不到 Eclipse 服务的“服务状态”页面或提要或类似内容。（如果您知道其中一个，请将其添加为下面的评论。）

*   Eclipse 首页上可能有“中断”通知。检查一下。

*   尝试使用 Web 浏览器和/或从其他位置连接到服务 URL（请参阅异常消息！）。如果你成功了，真正的问题可能是你的网络问题。

*   如果您觉得需要投诉 Eclipse 的服务，*请不要在这里投诉！！* （这是题外话。）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-11-24T05:01:05.570

解决方案是将代理设置为“本机”，如下所示

转到“Window-> Preferences -> General -> Network Connection”并更改设置“Active Provider-> Native”。它对我有用。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-02-19T15:33:30.683

如果您能够从 Eclipses 内部 Web 浏览器成功加载页面（通过转到“Window”=>“Show View”=>“Other”=>“Internal Web Browser”并尝试打开页面）**但**安装软件从 Eclipse 市场和“帮助”=>“安装新软件”窗口无法正常工作，那么这个修复可能会帮助你（在 Windows 7 机器上为我工作）：

1.  转到“Window”=>“Preferences”=>“General”=>“Network Connections”并将 Active Provider 设置为“Native”。
2.  进入 Windows 控制面板并搜索防火墙。然后选择“允许程序通过 Windows 防火墙”并单击“允许其他程序...”并添加您的 Eclipse 安装。

[![在此处输入图像描述](../Images/13707d8b2f45f48dfd7d675b81a5af94.png)](https://i.stack.imgur.com/3sf2R.png) [![在此处输入图像描述](../Images/334388602c5fe71b3c86071b5b822cd4.png)](https://i.stack.imgur.com/l0zlA.png)

3.  重新启动 Eclipse 并尝试在“帮助”=>“安装新软件”窗口中刷新存储库。它能够成功地为我抓住它。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2017-09-05T02:25:43.980

进入安装eclipse的文件夹

```
open eclipse.ini file
look for the line -vmargs
put -Djava.net.preferIPv4Stack=true below the -vmargs line and restart eclipse 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-06T05:29:20.697

我遇到了同样的问题，在这里找到了有用的步骤，这节省了我很多时间。希望下面的图片对您有很大帮助-

**窗口-> 首选项-> 常规-> 网络连接**

如果使用快照中提到的步骤未解决问题，请将 Active Provider Native 更改为 Manual。确保应该检查 HTTP/HTTPS，如果您的代理设置需要任何 IP，那么您也应该在主机和端口号中提供代理 IP。 [![在此处输入图像描述](../Images/b313c50c671f934b9c18048cb8af9ea6.png)](https://i.stack.imgur.com/GvaYV.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-14T13:38:17.520

就我而言：我有一台新电脑，我必须下载并安装一个全新的 Eclipse。默认情况下，代理设置为本机。起初我遇到了这个错误。然后我将其更改为活动。但它仍然没有用。然后我把它放回“本机”并且它起作用了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-07T06:58:23.227

在我的情况下，解决方案是将代理设置为“本机”，我已经在 linux 下使用 cntlm 和 Firefox 配置了代理（也用作 eclipse 浏览器。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-16T09:03:32.557

还要检查你的杀毒软件，如果我是它的avast，它会阻止我访问市场，所以我禁用了它几分钟并尝试从eclipse访问市场，它成功了！！！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-08-17T14:10:41.633

我的情况是，我将默认浏览器从谷歌浏览器更改为 Internet Explorer，问题得到解决。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-09-03T10:57:28.463

我知道它有点旧，但我今天遇到了同样的问题。我想用 xubuntu 在我的 vm 上安装 eclipse。因为我在使用 Oxygen 的最新 Eclipse 版本 2019-06 时遇到了问题。所以我去了 eclipse.org 并下载了氧气。运行氧气时，会出现无法访问 merketplace 的问题。所以我下载了eclipse安装程序没有立即氧气。之后我可以使用 eclipse 作为 expectet （所有版本）

# mysql - 动态选择 MySQL 更新

> ID：14794886
> 
> 赞同：1
> 
> 时间：2013-02-10T05:03:42.963
> 
> 标签：mysql

这更像是一个理论问题。我有一个包含各种文本字段、下拉框等的页面。每个用户都有他/她的“自己的页面”，可以通过我所指的这个更新页面进行更新。他根据自己的选择更新字段。它将大约 30 个变量（如果输入了每个字段）传递到“预览页面”。如果人们喜欢预览页面，那么他们点击预览页面底部的“更新”按钮，所有各种变量都会更新到相应的 MySQL 表中，并且其他人看到的“自己的页面”会动态更新。（如果这个解释不清楚，请告诉我）。

第一次插入此信息很容易。但是，当用户以后只想更新他的页面的几个字段时，这就是我感到困惑的地方。如何使 MySQL 更新查询动态化以仅识别对用户想要更新的页面上的字段的更新（而他将其他字段留空，从而使这些列的旧信息保持不变，并且它们在更新查询）。

让我知道我的要求是否没有意义，我会再试一次。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T09:23:59.193

最简单的方法是

```
UPDATE MyTable m SET m.f1 = COALESCE(input1,m.f1), m.f2 = COALESCE(input2,m.f2), ....
WHERE m.id = key; 
```

将`COALESCE`返回第一个非空值（或者`null`如果所有值都为空）。

请注意，如果要强制使用默认值，可以在现有字段值之后插入默认值。
像这样：

```
UPDATE MyTable m SET m.f1 = COALESCE(input1,m.f1,default1), m.f2 = COALESCE(input2,m.f2,default2), ....
WHERE m.id = key; 
```

请参阅：[MySQL：如何使用 COALESCE](https://stackoverflow.com/questions/5608740/mysql-how-to-use-coalesce)
[http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)

# iphone - 奇怪的 iPhone 4 模拟器行为 - UITextViews 堆叠在一起

> ID：14794889
> 
> 赞同：0
> 
> 时间：2013-02-10T05:05:06.857
> 
> 标签：iphone, objective-c, uitextview, simulator

我刚刚完成了**基于故事板的 iPhone 应用程序**（我正在**iPhone 5**上开发）。就在将其提交到 Appstore 之前，我想确保在 iPhone 4 上一切正常。所以我在**模拟器**中使用**iPhone 4**启动我的应用程序。

**而我所看到的让我感到困惑**。基本上*每一个视图对象*，尤其是文本视图，都是**堆叠在一起的**。基本上所有可滚动的东西都**搞砸了**。甚至在某些文本视图中，*初始滚动位置*已设置为 100px，这意味着文本视图在文本视图中显示内容的中间，并且无法滚动到顶部。

每次我调整情节提要视图以适应 iPhone 4 时，**iPhone 5 上的视图反而看起来很奇怪**。大多数情况下，iPhone 4 模拟器上的堆叠对象*甚至无法 unstacked*。

**我是唯一遇到这种情况的人**吗？我找不到任何关于它的帖子。会不会是我的模拟器出了问题？**我错过了什么设置**？我现在能想到的唯一解决方案是**为 iP4 和 iP5 设置一个单独的 SB**，但我真的不想经历这样做的痛苦。非常感谢任何评论或想法。

## 它看起来如何

![在此处输入图像描述](../Images/330accc543b2083a2f68fa7e4d4356bd.png)

![在此处输入图像描述](../Images/cc79d9c3bacdbbf15357ef00817555a7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T05:13:18.953

您需要确保正确设置自动调整大小的支柱和弹簧。

![Size Inspector 的自动调整区域大小](../Images/5ca4e5915794959111f14dfef98b650e.png)

视图需要停靠在顶部或底部，并且您要拉伸的视图应该具有灵活的垂直设置。

# c# - 使用事件来集中信息

> ID：14794891
> 
> 赞同：1
> 
> 时间：2013-02-10T05:05:20.387
> 
> 标签：c#, events, interface

这是我要实现的目标的解释：

我有一个文本框，用作表单上的“调试”或“信息”窗口。我想做的是让我创建的任何类在它有信息发布到调试窗口时抛出一个事件，然后让文本窗口订阅所述事件，并在每次有新内容时发布。我试图做到这一点，以便我的课程不需要文本框的知识，但仍然有能力将所有信息传递到文本框。

是否可以在类之间有一个“共享”事件（可能使用接口），这样我只需要订阅一个事件，它就会从所有引发事件的类中提取？

对于视觉效果，它基本上看起来像这样：

```
Public delegate void DebugInfo(string content)

Class foo1
{
   event DebugInfo DebugContentPending

   public void bar()
   {
      DebugContentPending("send this info to the debug window")
   }
}

Class foo2
{
   event DebugInfo DebugContentPending

   public void bar()
   {
      DebugContentPending("send this info to the debug window")
   }
}

Class SomeClass
{
    public void SomeMethod()
    {
       DebugContentPending += new DebugInfo(HandleContent);  //gets events from foo1 and foo2
    }

    public void HandleContent(string content)
    {
       //handle messages
    }
} 
```

这是可能的还是我不在我的摇杆上？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-10T05:10:40.263

很可能您不需要事件。

```
class DebugLogger
{
    public DebugLogger(TextBox textBox)
    {
        this.TextBox = textBox;
    }

    public TextBox TextBox { get; private set; }

    public static DebugLogger Instance { get; set; }

    public void Write(string text)
    {
        this.TextBox.Text += text;
    }
} 
```

初始化：

```
DebugLogger.Instance = new DebugLogger(textBox1); 
```

用法：

```
DebugLogger.Instance.Write("foo"); 
```

请注意，代码不是线程安全的。有关更多信息，请参阅[自动化 InvokeRequired 代码模式](https://stackoverflow.com/questions/2367718/c-automating-the-invokerequired-code-pattern)和相关信息。

# .htaccess - .htaccess & .htpasswd 不接受登录数据

> ID：14794892
> 
> 赞同：1
> 
> 时间：2013-02-10T05:05:50.500
> 
> 标签：.htaccess, .htpasswd

我正在尝试用密码保护我的网站： http: [//www.massmindmanipulation.com](http://www.massmindmanipulation.com)

我创建了一个 .htacces 和一个 .htpasswd 文件，当我访问该网站时会弹出登录框。

但是当我输入登录信息时，该框很快消失并重新出现。没有其他事情发生。

这是我的 .htaccess 文件：

```
AuthName "Members Only"
AuthType Basic
AuthUserFile /home/mass/public_html/.htpasswd
AuthGroupFile /dev/null
require valid-user 
```

这是我的 .htpasswd 文件：

```
1:2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T05:09:21.513

您有`index.html`Apache 可以查找的文件吗？如果没有，请尝试制作一个，放入一些简单的东西，然后再试一次。

# c - c程序不接受输入高达100000

> ID：14794893
> 
> 赞同：0
> 
> 时间：2013-02-10T05:05:52.797
> 
> 标签：c

我在 c 中编写了一个程序，它应该从 1 到 100000 接受输入，但是当我运行程序时，我只接受高达 12773 的输入，但是我使用 long long unsigned int 作为数组保存输入。

如果我输入的输入少于 12774，则程序会显示正确的行为，但不会超过该输入。我制作的程序是[http://ideone.com/iXM1M0](http://ideone.com/iXM1M0) 我不明白c的这种奇怪行为。

```
#include<stdio.h>
#include<stdlib.h>

unsigned long long int inversion_count(unsigned long long int *arr, unsigned long long int start, unsigned long long int end)
{
    unsigned long long int left_count, right_count, split_count = 0, i, left_arrend, j, no_ele;
    no_ele = end - start;
    unsigned long long int temp_arr[no_ele], k=0;
    if(no_ele == 1)        // this means that only one element is passed
        return 0;
    else
    {
        left_arrend = start + (no_ele/2);
        left_count = inversion_count(arr, start, left_arrend);
        right_count = inversion_count(arr, left_arrend, end);
        i = start;
        j = left_arrend;
        while((i< left_arrend) && (j < end))
        {
            if(arr[i] <= arr[j])
            {
                temp_arr[k] = arr[i];
                i++;
                k++;
            }
            else
            {
                split_count += left_arrend - i;
                temp_arr[k] = arr[j];
                j++;
                k++;
            }
        }
        while(i < left_arrend)
        {
            temp_arr[k] = arr[i];
            k++;
            i++;
        }
        while(j < end)
        {
            temp_arr[k] = arr[j];
            j++;
            k++;
        }

        for(i=start; i<end; i++)
            arr[i] = temp_arr[i-start];
        return left_count + right_count + split_count;
    }
}

int main()
{
    unsigned long long int num, n = 100000, i, result;
    unsigned long long int sum = 0;
    //    scanf("%lld", &n);
    unsigned long long int arr[n];
    for(i=0; i<n; i++)
    {
        scanf("%llu", &arr[i]);
        sum += arr[i];
    }

    result = inversion_count(arr, 0, n);
    //        for(i=0; i<n; i++)
    //            printf("%lld\n", arr[i]);
    printf("%llu\n", result);
    printf("sum = %llu\n", sum);
    printf("n = %llu\n", n);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T05:16:49.587

我认为您的问题很可能是您的堆栈空间不足。在您的`inversion_count()`函数中，您有一个 VLA：

```
unsigned long long int temp_arr[no_ele], k=0; 
```

而且我怀疑在您忙于递归时使用了太多空间。我不确定使用递归来计算数组中的反转次数有什么好处；我希望使用单个线性通道。实际上，如果您只需要计算反转，则不清楚您是否需要在内存中保留多于最后一行和当前行的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T05:14:19.463

这是 ideone.com 的问题，而不是 C。ideone.com 对输入文本框有限制（最大大小），而您的输入超出了这些限制。

要么在本地计算机上安装编译器并在那里完成你的工作，要么重写你的程序：由于你的输入只是连续的整数，你可以在你的程序中生成它们而不是从输入中读取它们。

# android - 如何在android中将参数传递给服务器

> ID：14794894
> 
> 赞同：-1
> 
> 时间：2013-02-10T05:05:53.183
> 
> 标签：android, json, webserver

我有一个这种格式的 URL `"http://testserver.com/Test/login!checkUser.cc?email=testemail123@gmail.com"`。我想把它发送到服务器，然后我会得到 Json 格式的响应`"[{"status":"0"}]"`。如何在android中实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T05:39:15.243

您将使用 an`HttpClient`和其他`Http*`类。

```
HttpClient client = new DefaultHttpClient();
HttpGet request = new HttpGet("http://testserver.com/Test/login!checkUser.cc?email=testemail123@gmail.com");
HttpResponse response = client.execute(request);

// Check if server response is valid
StatusLine status = response.getStatusLine();
if (status.getStatusCode() != 200) {
   throw new IOException("Invalid response from server [" + status.toString() + "]");
                    }

// Pull content stream from response
HttpEntity entity = response.getEntity();
InputStream inputStream = entity.getContent();

StringBuilder builder = new StringBuilder();
BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));
String line;
while ((line = reader.readLine()) != null) {
   builder.append(line);
                    }

//return result from buffered stream
String dataAsString = builder.toString();
JSONObject jsonObject = new JSONObject(dataAsString); 
```

# iphone - 无法更改 UITableView 的高度

> ID：14794901
> 
> 赞同：12
> 
> 时间：2013-02-10T05:07:33.103
> 
> 标签：iphone, uitableview, ios6

在 Apple iPhone 时钟应用程序中，当用户添加新闹钟时，会弹出一个模式视图。我正在尝试创建一个类似的 UI。

我目前有一个 UITableViewController 作为 UINavigationController 的根视图控制器。

我还添加了一个 UIDatePicker 作为 UINavigationController 的子视图：

```
[self.navigationController.view addSubview:mydatePicker]; 
```

但是，我的 UITableview（UITableViewController 的）中有大约 10 多行，一旦添加了 UIDatePicker，我就无法滚动查看所有单元格。

我意识到 UITableView 的大小与添加 UIDatePicker 之前的大小相同，因此我需要更改它的大小才能滚动查看所有表格单元格。

我尝试了几件事来改变它的大小，但都无济于事。在下面的代码中，我任意选择了 50 作为新高度。

首先，尝试更改边界高度：

```
CGRect bounds = [self.tableView bounds];
[self.tableView setBounds:CGRectMake(bounds.origin.x,
                                     bounds.origin.y,
                                     bounds.size.width,
                                     50)]; 
```

然后尝试改变框架高度：

```
CGRect tvframe = [self.tableView frame];
[self.tableView setFrame:CGRectMake(tvframe.origin.x,
                                    tvframe.origin.y,
                                    tvframe.size.width,
                                    50)]; 
```

然后在谷歌搜索了一些之后，我尝试更改 contentSize 高度：

```
CGSize thesize = self.tableView.contentSize;
thesize.height = 50;
self.tableView.contentSize = thesize; 
```

这些似乎都对 UITableView 的大小没有任何影响。我仍然无法滚动查看所有单元格。

后来我尝试了一些与上面相同的方法，但在 UINavigationController 而不是 UITableView 上。我也没有太多运气。

作为最后的手段，我尝试在 Storyboard 编辑器中更改 UITableView 的大小。我也想不通。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-10T05:45:43.663

从`UITableViewController` [类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewController_Class/Reference/Reference.html)，它：

> 创建具有正确尺寸和自动调整大小掩码的未配置 UITableView 对象

[以及来自iOS](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/TableViewAndDataModel/TableViewAndDataModel.html#//apple_ref/doc/uid/TP40007451-CH5-SW1)的 Table View Programming Guide 的引用，专门解决了这种行为：

> **注意：**如果要管理的视图由多个子视图组成，其中只有一个是表视图，则应使用`UIViewController`子类而不是子类`UITableViewController`来管理表视图。该类的默认行为`UITableViewController`是使表格视图充满导航栏和选项卡栏（如果存在）之间的屏幕。

如果您不希望表格视图控制器设置您的表格视图的大小，那么您需要使用 a`UIViewController`来代替。请参阅我在上面发布的 iOS 表视图编程指南的链接，了解在走这条路线时要考虑的其他事项。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-29T13:26:55.347

我遇到了和你提到的一样的问题。我无法更改 UITableViewController 的 tableView 的高度。我尝试改变 self.view 和 self.tableview 的框架和中心。但是失败了。然后我通过一个技巧解决了它，改变了tableview的contentInset。

```
self.tableView.contentInset = UIEdgeInsetsMake(0, 0, 44.0f, 0); // here you can replace 44.0f with your height 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T05:22:28.087

您需要使 UITableView 成为主视图的子视图，以便可靠地更改其大小。

进行此更改后，框架是要更改的正确值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-10T05:51:40.090

我不知道你真正的问题是什么。但是为了改变你的高度，将在编写以下代码`UITableView`时显示所有行。`UITableView`

```
self.tblView.frame = CGRectMake(0, 0, 320, 50); 
```

请尝试一下。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-15T20:08:17.103

您正在使用 uitableview 控制器，而不是使用 uiviewcontroller 添加 uitabelview。现在你可以调整uitableview的大小了。

# wordpress - Wordpress：将内容添加到 edit.php

> ID：14794910
> 
> 赞同：4
> 
> 时间：2013-02-10T05:09:28.167
> 
> 标签：wordpress

![在此处输入图像描述](../Images/76a59773f45234426a7d49657eae1c07.png)我试图找出我可以使用什么动作钩子/过滤器在管理员“edit.php”页面上插入内容（我想在“帖子”表上方放置一些链接）？我找到了“edit_form_after_title”和“edit_form_after_editor”（它们完全符合我的要求，但它们适用于posts.php，而不是edit.php）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-10-01T19:24:00.057

在这个答案的帮助下：[How do you create a custom edit.php / edit pages page](https://wordpress.stackexchange.com/a/115164/59816)

我想出了这个：

```
<?php
# Called only in /wp-admin/edit.php pages
add_action( 'load-edit.php', function() {
  add_filter( 'views_edit-talk', 'talk_tabs' ); // talk is my custom post type
});

# echo the tabs
function talk_tabs() {
 echo '
  <h2 class="nav-tab-wrapper">
    <a class="nav-tab" href="admin.php?page=guests">Profiles</a>
    <a class="nav-tab nav-tab-active" href="edit.php?post_type=talk">Talks</a>
    <a class="nav-tab" href="edit.php?post_type=offer">Offers</a>
  </h2>
 ';
}
?> 
```

它看起来像这样：

![](../Images/442376ace1bc0fd72fac09c12eb570ae.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-10T05:38:17.727

如果您只想添加到帖子标题链接，您可以执行以下操作

```
if (is_admin()) {
    add_filter('the_title', function($title) {
        return $before_title . $title . $after_title;
    });
} 
```

但是，听起来您不想在标题链接中添加文本。

要在标题之后和操作链接之前添加 html，您可以这样做

```
if (is_admin()) {
    add_filter('post_row_actions', function($args) {
        // echo your custom content here
        return $args; // and dont forget to return the actions
    });
} 
```

还有`page_row_actions`页面编辑屏幕（`post_row_actions`仅适用于帖子）

至于在标题之前添加东西，我没有看到一个钩子/过滤器来做到这一点。如果您想自己寻找，请参阅`wp-admin/class-wp-posts-list-table.php`第 463 行。`function single_row`

# mysql - 查询整个文件，但按单独的数据，按每个唯一的列元素分组

> ID：14794913
> 
> 赞同：1
> 
> 时间：2013-02-10T05:10:05.727
> 
> 标签：mysql, sql, group-by, average

给定一个类似于以下的数据集：

```
╔═════════╦════════╦════════╗
║ FIELD1  ║ FIELD2 ║ FIELD3 ║
╠═════════╬════════╬════════╣
║ 11-1.01 ║ Jacob  ║      3 ║
║ 11-1.02 ║ Jacob  ║      4 ║
║ 12-2.01 ║ Jacob  ║      3 ║
║ 13-3.01 ║ Jacob  ║      4 ║
║ 13-3.02 ║ Jacob  ║      3 ║
║ 13-3.03 ║ Jacob  ║      2 ║
║ 11-1.01 ║ Chris  ║      3 ║
║ 11-1.02 ║ Chris  ║      4 ║
║ 12-2.01 ║ Chris  ║      2 ║
║ 13-3.01 ║ Chris  ║      4 ║
║ 13-3.02 ║ Chris  ║      3 ║
║ 13-3.03 ║ Chris  ║      2 ║
║ 11-1.01 ║ Mike   ║      4 ║
║ 11-1.02 ║ Mike   ║      3 ║
╚═════════╩════════╩════════╝ 
```

对于每个唯一的 Field2 元素，我需要找到 Field1 的重复小数点前值的 Field3 值的平均值（小数点后的值并不重要）。Field1 值定义为 CHAR 类型，长度为 7 位（包括连字符和小数）。

我目前能够通过使用 WHERE 子句找到一个特定 Field2 元素的平均值，例如：

```
SELECT prefix, COUNT(prefix), Field2, FORMAT(AVG(suffix),2)
FROM
(
  SELECT LEFT(Field1,4) AS prefix, Field3 AS suffix, Field2
  FROM mytable WHERE Field2 = 'Jacob'
)x
GROUP BY prefix; 
```

但是，我的目标是遍历整个文件并找到每个不同 Field2 元素的平均值，因此我不需要像唯一的 Field2 名称那样多次运行程序。我觉得这应该是对我当前代码的一个相当容易的更改，但不知道该怎么做。可能有一种更好的方法可以在表格中构造这些数据，尽管这是我收到它并且必须使用它的方式（我对此了解不多）。

**更新 1**

期望的结果

```
╔════════╦═════════════╦════════╦═════════╗
║ PREFIX ║ PREFIXCOUNT ║ FIELD2 ║ AVERAGE ║
╠════════╬═════════════╬════════╬═════════╣
║ 11-1   ║           2 ║ Chris  ║ 3.50    ║
║ 12-2   ║           1 ║ Chris  ║ 2.00    ║
║ 13-3   ║           3 ║ Chris  ║ 3.00    ║
║ 11-1   ║           2 ║ Jacob  ║ 3.50    ║
║ 12-2   ║           1 ║ Jacob  ║ 3.00    ║
║ 13-3   ║           3 ║ Jacob  ║ 3.00    ║
║ 11-1   ║           2 ║ Mike   ║ 3.50    ║
╚════════╩═════════════╩════════╩═════════╝ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T05:23:42.433

删除`where`子查询上的子句并按 and 对它们进行`prefix`分组`Field2`。

```
SELECT  prefix, 
        COUNT(prefix) PrefixCount, 
        Field2, 
        FORMAT(AVG(suffix),2) Average
FROM
        (
          SELECT    LEFT(Field1,4) AS prefix, 
                    Field3 AS suffix, 
                    Field2
          FROM      TableName 
        )   x
GROUP   BY prefix, Field2
ORDER   BY Field2, prefix 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/92685/12)

输出，

```
+--------+-------------+--------+---------+
| PREFIX | PREFIXCOUNT | FIELD2 | AVERAGE |
+--------+-------------+--------+---------+
| 11-1   |           2 | Chris  | 3.50    |
| 12-2   |           1 | Chris  | 2.00    |
| 13-3   |           3 | Chris  | 3.00    |
| 11-1   |           2 | Jacob  | 3.50    |
| 12-2   |           1 | Jacob  | 3.00    |
| 13-3   |           3 | Jacob  | 3.00    |
| 11-1   |           2 | Mike   | 3.50    |
+--------+-------------+--------+---------+ 
```

# codeigniter - codeigniter 模板头

> ID：14794914
> 
> 赞同：1
> 
> 时间：2013-02-10T05:10:12.560
> 
> 标签：codeigniter

它可能是一个多余的问题。

我尝试使用 codeigniter。我想要我自己的模板，每个页面上都使用一个标题。标题填充了登录等小部件。

我正在互联网上寻找更好的方法来做到这一点。无需在每个控制器构造函数上调用我的标头。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:30:59.357

我使用 CodeIgniter 模板。

在这里你有： [http ://williamsconcepts.com/ci/codeigniter/libraries/template/reference.html](http://williamsconcepts.com/ci/codeigniter/libraries/template/reference.html)

您可以下载、阅读文档，它可以完美运行。

您可以按照自己想要的方式轻松适应您的模板，所以我建议使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T05:41:12.430

观看这个 nettuts 视频：“[使用 CodeIgniter 创建您的第一个模板](http://www.youtube.com/watch?v=gvGymDhY49E)”。该视频向您展示了如何按照您的要求进行操作。

**更新：** 您可以从控制器添加您需要的任何数据。设置类似：

```
$data['header_info'] = 'your data';
$data['load_view'] = 'the_view'; 
```

只需将 $data 传递给模板并将 $header_info 传递给标题。以下是新模板的外观：

```
$this->load->view('my_header.php', $header_info);
$this->load->view($load_view); 
$this->load->view('my_footer.php'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T06:43:07.367

只需像这样首先在视图文件夹下创建文件夹结构 ![在此处输入图像描述](../Images/e03209cfb4a35469c115874e47670d8e.png)

在 layout.php 文件中设置页眉、页脚文件。

```
<?php $this->load->view('includes/header');
    //print_r($this->load->view());?>

<?php $this->load->view($main_content); ?>

<?php $this->load->view('includes/footer'); ?> 
```

现在在包含文件夹中设置页眉和页脚文件 ![在此处输入图像描述](../Images/efdf976df285bcb714d240f260534d32.png)

现在在任何控制器中，您只需像这样将新内容传递给数组

```
$data['main_content']='home/welcome'; // welcome is in your new view view/home/welcome.php
$this->load->view('layout',$data);//in the controller you load which layout you want 
```

现在您不需要从控制器调用页眉和页脚。您已经在 layout.php 中设置了它们，并且只将新内容传递给它。您可以为管理员面板执行相同的操作，在这种情况下为管理员界面创建布局。然后，您可以为管理员界面单独设置页眉和页脚。

# assembly - 如何将半字节转换为 6502 程序集中的值？

> ID：14794918
> 
> 赞同：2
> 
> 时间：2013-02-10T05:11:12.383
> 
> 标签：assembly, 6502

我正在研究一种二进制格式的解压缩算法，它为我的 NES 项目存储屏幕文件。NES 屏幕分辨率为 260x240。我正在创建 2x2 像素格式的元图块。压缩格式将指定哪些 2x2 文件应写入屏幕。

我选择的格式将写为

```
0000xxxx: right nibble = value of tile 1 - 16
xxxx0000; left nibble  = number of times a tile is written on that row 1 - 16 
```

在上面的示例中，**11110001**将告诉导入例程写入 tile 1，16 次。

我还没有弄清楚的部分是如何取左半字节并将其转换为十六进制。我遇到的同样问题是取正确的半字节并将其也用作值。

我不确定是否有办法使用按位运算来做到这一点。我需要一种有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-18T14:13:36.053

鉴于您在 .A 中的“压缩”（尽管“打包”是一个更好的术语）数据，您应该这样做：

（假设`tile_id_to_write`和`write_it_this_many_times`是您想要解压到的零页面位置。）

```
lda packed_data,X             ;or however you're iterating through the packed data
and #%00001111                ;strip off top 4 bits; this is what AND dones
sta tile_id_to_write          ;store that somewhere
lda packed_data,X             ;get the original packed data again
lsr                           ;shift right 4 times
lsr 
lsr 
lsr
sta write_it_this_many_times 
```

根据您读取打包数据的方式，您可能会做一些不同于`lda packed_data,X`. 我很确定`lsr`将 0 放在最重要的位上。请记住，旋转指令将进位旋转到最高有效位，因此您通常想要执行`asl`或`lsr`移位或乘以/除以 2。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T07:03:22.800

刚刚想通了：

这样做的方法是执行以下操作：

```
val = %11110001
LDA #val
AND #%00001111 ; mask left nibble
STA rightn
LDA #val
AND #%11110000 ; mask right nibble
ROR
ROR
ROR
ROR ; rotate high bits 4 times
STA rightn 
```

# javascript - CasperJS在NodeList中返回空元素

> ID：14794919
> 
> 赞同：2
> 
> 时间：2013-02-10T05:11:27.440
> 
> 标签：javascript, document, casperjs, nodelist

这是我正在运行的脚本：

```
//Require CasperJS
var casper = require('casper').create();

//Scraping Courserank
var base = "https://www.courserank.com";
var home = base + "/w/home";
var schools = base + "/w/schools?switchSchool=1";

//First, navigate to homepage and login
casper.start(home, function() {
    console.log('Logging in...');
    //Fill in the login form
    this.fill(
            'form[action="login"]', 
            { username : 'hatboysam@gmail.com', password : "****" },
            true
            );
});

function getSchools() {
    var arr = document.querySelectorAll('div.link');
    return arr;
}

//Go to the schools page
casper.then(function() {
    console.log(this.getCurrentUrl());
    //Open the school choice page
    casper.open(schools).then(function() {
        console.log(this.getCurrentUrl());
        //Get all school links
        var schools_arr = this.evaluate(getSchools);
        console.log(schools_arr.length);
        Array.prototype.map.call(schools_arr, function(elem) {
            console.log(elem.innerHTML);
        });
    });
});

casper.run(); 
```

一切都很好，直到 map 调用的内部循环，特别是`console.log(elem.innerHTML)`. 中的许多元素`schools_arr`为空。如果我`if(elem != null) { ... }`在声明周围添加一个，`console.log`那一切都很好，但这违背了这一点。当我`document.querySelectorAll`在页面上的 Chrome 控制台中运行相同时，NodeList 中的 513 个元素都不是空的。CasperJS 也报告了 513 个元素，但它显示许多为空。这里发生了什么？页面没有完全加载吗？我以前从未使用过 CasperJS，如果这是一个新手错误，我很抱歉。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-10T08:27:23.413

您不能使用`evaluate()`;从页面上下文返回本机节点元素 您必须`Array#map`使用`JSON.parse`.

所以你的`getSchools()`功能应该是这样的：

```
function getSchools() {
    var arr = document.querySelectorAll('div.link');
    return Array.prototype.map.call(arr, function(elem) {
        return elem.innerHTML;
    });
} 
```

虽然我不知道你可以用节点 innerHTML 字符串内容做什么......所以通常最好将元素映射到你需要的确切属性：

```
function getSchools() {
    var arr = document.querySelectorAll('div.link a');
    return Array.prototype.map.call(arr, function(elem) {
        return elem.getAttribute('href');
    });
} 
```

**编辑：**根据评论中的要求，获取所有链接的内部文本：

```
function getSchools() {
    var arr = document.querySelectorAll('div.link a');
    return Array.prototype.map.call(arr, function(elem) {
        return elem.textContent;
    });
} 
```

# c# - 哪个代码是 MSIL？代码是由 ILDASM MSIL 生成的吗？

> ID：14794921
> 
> 赞同：0
> 
> 时间：2013-02-10T05:12:03.480
> 
> 标签：c#, compiler-construction, .net-assembly

我仍然对哪个代码被称为 MSIL 感到困惑。

在其他编译器中，C# 生成程序集。ILASM 还生成一个程序集。那些程序集包含 MSIL？

将程序集作为输入时，ILDASM 生成的代码如何？生成的代码叫MSIL吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T05:17:36.173

MSIL = 微软中间语言

MSIL 是所有 .NET 编译器的输出。它可以表示为 MSIL 程序集代码或二进制形式 - 后者是您在已编译程序集中找到的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T05:18:30.230

MSIL 是 C# 将代码编译成的“类似机器代码”的语言。

CLR 是 MSIL 运行的“机器”。

运行 MSIL 时，CLR 使用 JIT 将您的代码转换为*真正的*机器代码。

真正的机器代码在您计算机的实际 CPU 上运行。

[MSIL 汇编程序](http://msdn.microsoft.com/en-us/library/496e4ekx%28v=vs.80%29.aspx)(Ilasm.exe) 从 Microsoft 中间语言( MSIL) 生成可移植可执行 (PE) 文件。ILDASM 是反汇编程序。

PE 格式用于 EXE、DLL、SYS（设备驱动程序）和其他文件类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-10T05:18:38.267

C# 编译器生成一个程序集。程序集包含元数据和 MSIL。VB.NET（现在简称为 VB）生成同样的东西。C/C++ 编译器也可以创建 MSIL。IL Assembler (ILASM) 可以获取 IL 并生成一个程序集。

ILDASM 是一个反汇编程序。[您可以在此处](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes_fields.aspx)找到记录 IL (MSIL) 的详细信息。

# macros - Lisp 评估在未绑定的变量上中止

> ID：14794923
> 
> 赞同：0
> 
> 时间：2013-02-10T05:12:16.520
> 
> 标签：macros, lambda, elisp, sbcl

在[Practical Common Lisp](http://www.gigamonkeys.com/book/)的第一个示例（数据库示例）中，作者使用了一个宏和几个支持函数来替换一个更大的函数，名为`where`. 当`where`是函数时，代码工作正常，但宏设置返回“未定义变量”和“未绑定变量”错误。（请注意，我注释掉了原始函数，重新启动了 Emacs 并在添加`where`宏后重新编译了我的文件。）

根据示例，REPL 中捕获的样式警告对我来说是最可疑的，因为宏应该使用`ROW`而不是评估。`CD`为什么`ROW`不用？如何解决此警告？

这打印在 REPL 中：

```
; in: SELECT (WHERE :TITLE "Animals" :RIPPED T)
;     (WHERE :TITLE "Animals" :RIPPED T)
; ==>
;   #'(LAMBDA (ROW)
;       (AND (EQUAL (GETF CD :TITLE) "Animals") (EQUAL (GETF CD :RIPPED) T)))
; 
; caught STYLE-WARNING:
;   The variable ROW is defined but never used.

; in: SELECT (WHERE :TITLE "Animals" :RIPPED T)
;     (WHERE :TITLE "Animals" :RIPPED T)
; --> FUNCTION AND IF EQUAL 
; ==>
;   (GETF CD :TITLE)
; 
; caught WARNING:
;   undefined variable: CD
; 
; compilation unit finished
;   Undefined variable:
;     CD
;   caught 1 WARNING condition
;   caught 1 STYLE-WARNING condition 
```

这打印在调试空间中：

```
The variable CD is unbound.
   [Condition of type UNBOUND-VARIABLE] 
```

以下是我的 .lisp 文件中的支持函数和宏：

```
; this function is used in both implementations. *db* is a (global) database
(defun select (selector-fn)
  (remove-if-not selector-fn *db*))

(defun make-comparison-expr (field value)
  `(equal (getf cd ,field) ,value))

(defun make-comparisons-list (fields)
  (loop while fields
       collecting (make-comparison-expr (pop fields) (pop fields))))

(defmacro where (&rest clauses)
  `#'(lambda (row) (and ,@(make-comparisons-list clauses)))) 
```

我正在使用 SBCL、Emacs 和 Slime。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T05:12:16.520

我发现这是我正在使用的 Practical Common Lisp 版本中的错误。我在向我的问题添加本书链接时发现了这一点。[网络版在这里](http://www.gigamonkeys.com/book/practical-a-simple-database.html)有正确的例子。

事实证明，宏应该定义如下。它读`cd`作与`row`：

```
(defmacro where (&rest clauses)
  `#'(lambda (cd) (and ,@(make-comparisons-list clauses)))) 
```

我没有意识到 lambda 函数和它调用的函数必须共享变量名（`cd`在这种情况下）。

（*我不确定这是否被认为过于本地化，但经过所有这些努力，我想在某个地方记录它，所以现在就在这里。*）

# shiro - 如何为 Apache Shiro 过多的登录尝试失败配置阈值？

> ID：14794926
> 
> 赞同：4
> 
> 时间：2013-02-10T05:12:42.427
> 
> 标签：shiro

Apache Shiro 文档暗示了一些捕获连续失败登录尝试（以及其他）所需的功能，但是，我找不到具体的文档。目前我可以执行 currentUser.login(token); 使用无效 pw 无限次，并且不会捕获并抛出此错误。我正在努力寻找它在源代码中的实现位置。

这真的有效吗？shiro.ini 中是否配置了阈值？谁能指出我的文档（或确认它不存在）？

谢谢

环境细节：Shiro core 1.2.1 和 jdbc realm

开始文档 第 3 步：处理成功或失败 如果登录方法安静地返回，就是这样 - 我们完成了！主题已通过身份验证。应用程序线程可以不间断地继续，对 SecurityUtils.getSubject() 的所有进一步调用都将返回经过身份验证的 Subject 实例，对 subject.isAuthenticated() 的任何调用都将返回 true。

但是如果登录尝试失败会发生什么？例如，如果最终用户提供的密码不正确，或者访问系统次数过多，可能他们的帐户被锁定了怎么办？

Shiro 具有丰富的运行时 AuthenticationException 层次结构，可以准确指示尝试失败的原因。您可以将登录包装在 try/catch 块中并捕获您希望的任何异常并相应地对它们做出反应。例如：

```
try {
    currentUser.login(token);
} catch ( UnknownAccountException uae ) { ...
} catch ( IncorrectCredentialsException ice ) { ...
} catch ( LockedAccountException lae ) { ...
} catch ( **ExcessiveAttemptsException** eae ) { ...
} ... catch your own ...
} catch ( AuthenticationException ae ) {
    //unexpected error?
}

//No problems, continue on as expected... 
```

如果现有异常类之一不能满足您的需求，可以创建自定义 AuthenticationExceptions 来表示特定的失败场景 //没有问题，按预期继续... End Documentaion

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-11T21:13:11.590

如果您只是在 Google 上搜索 ExcessiveAttemptsException，在[第二个链接](http://shiro-user.582556.n2.nabble.com/ExcessiveAttemptsException-How-to-configure-td4534742.html)中 您会从 shiro 的作者 Les Hazlewood 那里找到答案：

> 无论如何，该异常存在，但 Shiro 在任何时候都不会抛出/管理它。它是为了方便您使用，因此如果您不想创建自己的异常类，则不必创建自己的异常类。您需要在适当的时候实例化并将其放入您的领域的 doGetAuthenticationInfo 方法中。Shiro 无法自动执行此操作的原因是这种类型的逻辑（在特定分钟内特定次数后锁定帐户）通常完全取决于您的应用程序的用户数据模型。

# mysql - 数据库中的语言环境支持

> ID：14794928
> 
> 赞同：0
> 
> 时间：2013-02-10T05:13:30.143
> 
> 标签：mysql, sql, join

在我的 MySQL 数据库中，我将英文数据存储在表`s_p`(id, name, prod_id) 中，并在另一个表`s_p_l`(id,prod_id,name,locale) 中另外存储产品的本地化名称（如果有）。

目前我使用

```
SELECT name FROM s_p_l WHERE prod_id=2 AND locale="de_DE"; 
```

首先检查我是否有产品 #2 的本地化名称，然后如果它没有返回任何行，

```
SELECT name FROM s_p WHERE prod_id=2; 
```

获取英文名称。

现在，我如何在一个查询中获取产品 ID 和语言环境、本地化产品名称以及英文名称作为后备？

（是的，我使用准备好的语句来避免 SQL 注入）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T05:18:52.283

听起来像是左外连接的工作。从您的`s_p`表中选择（因为您知道该值将存在），但对您的`s_p_l`表进行左外连接。如果没有`s_p_l`记录，你只会得到`s_p_l`列的空值，但你仍然会从`s_p`.

```
SELECT
  s_p_l.name AS localizedName,
  s_p.name as fallbackName
FROM
  s_p
  LEFT OUTER JOIN s_p_l ON
    s_p_l.prod_id = s_p.prod_id AND
    s_p_l.locale = "de_DE"
WHERE s_p.prod_id = 2 
```

您甚至可以将 SELECT 更改为仅返回一列：`SELECT ISNULL(s_p_l.name, s_p.name)`. （我的背景是 SQL Server，但我认为这是应该适用于 mySQL 的标准 SQL。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T05:27:08.333

你也可以考虑使用`UNION`。

```
SELECT name FROM s_p_l WHERE prod_id=2 AND locale="de_DE"
union
SELECT name FROM s_p WHERE prod_id=2; 
```

**[SQLFIDDLE 演示](http://www.sqlfiddle.com/#!2/bb9b5/1/0)**

* * *

编辑

如果您不希望以当地语言 ( `s_p_l`) 显示英文值，请使用以下查询

```
SELECT * FROM 
(
   SELECT name FROM s_p_l WHERE prod_id=2 AND locale="de_DE"
   UNION
   SELECT name FROM s_p WHERE prod_id=2) b
LIMIT 1
; 
```

**[SQLFIDDLE 演示](http://www.sqlfiddle.com/#!2/f2b66/1/0)**

# java - 为什么打印Java数组会显示内存位置

> ID：14794930
> 
> 赞同：7
> 
> 时间：2013-02-10T05:13:42.117
> 
> 标签：java, arrays

```
int[] answer= new int[map.size()];  
HashMap<String, Integer> map = new HashMap<String, Integer>();  

for (int j=0; j<answer.length;j++){  
    int x=map.get(keys.get(j));  
    answer[j]=x;  
}  

return answer 
```

当我在循环中`x`使用打印`System.out.println(x)`时，我得到的值`1, 2, 3`但是当我返回答案并打印它时，我得到`[I@9826ac5`. 知道为什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-10T05:16:56.820

`I[`是整数数组的“类类型”。打印出这个数组本身将打印类类型`@`，然后是一个短的十六进制字符串，因为那是数组的哈希码。这和你可能见过的一样`Object@0b1ac20`。这是默认[`toString()`实现的`Object`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Object.html#toString%28%29)。

也许您想返回数组的特定元素或使用 for 循环打印整个数组？

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-10T05:18:16.580

长话短说，你不能轻易地在 java 中打印一个数组。做这个：

```
System.out.println( Arrays.toString(answer) ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T05:15:56.373

因为数组的`toString()`方法就是这样实现的

# database - 编写一个 postgresql 查询，返回一个以 'sa' 开头并以 's' 结尾的名称列表

> ID：14794934
> 
> 赞同：1
> 
> 时间：2013-02-10T05:15:09.057
> 
> 标签：database, postgresql, where

问题是：

如果城市名称以字母“Sa”开头并以“s”结尾，请列出所有城市及其地区和国家名称。按城市名称排序。

我不知道该怎么做的部分是“城市名称以字母'Sa'开头并以's'结尾。”

这就是我所拥有的：

```
SELECT ci.name AS city, ci. district, c.name AS country
FROM lab2.city ci INNER JOIN lab2.country c                    
ON (ci.country_code = c.country_code)
WHERE ci.name ~^ 'Sa' <----------------------This is the problem line. 
ORDER BY ci.name ASC; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T05:17:48.867

这个问题听起来像是在寻找一种模式。在这种情况下，您可以使用`LIKE`.

```
SELECT   ci.name AS city, 
         ci.district, 
         c.name AS country
FROM     lab2.city ci 
         INNER JOIN lab2.country c
            ON ci.country_code = c.country_code
WHERE    ci.name LIKE 'Sa%s' 
ORDER    BY ci.name ASC; 
```

# javascript - jQuery 事件处理程序在 Chrome popup.js 中不起作用

> ID：14794936
> 
> 赞同：0
> 
> 时间：2013-02-10T05:15:42.173
> 
> 标签：javascript, jquery, javascript-events, google-chrome-extension, event-handling

我有一个 popup.html，它先加载 jquery，然后再加载 popup.js。当我将鼠标悬停在具有某个类的 div 上时，我试图更改光标，但这并没有发生。

popup.html

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    <link type="text/css" rel="stylesheet" href="css/fbh-ui.css" />
    <script type="text/javascript" src="js/jq.js"></script>
    <script type="text/javascript" src="js/popup.js"></script>
</head>

<body style="width: 200px">
    <div id="fbh-main">
        <div class="fbh-popup-menu-item" id="fbh-popup-enabled"></div>
    </div>
</body> 
```

popup.js

```
$(document).ready(function() {
    $('.fbh-popup-menu-item').mouseenter(function() {
        this.css('cursor', 'pointer');
    });

    $('.fbh-popup-menu-item').mouseleave(function() {
        this.css('cursor', 'default');
    });
}); 
```

这段代码应该可以工作。DOM 元素已经存在，所以没有理由不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T05:20:11.627

你写`this`函数的方式是错误的，它必须是这样的`$(this)`：

以下是更新后的代码：

```
 $(document).ready(function() {
        $('.fbh-popup-menu-item').mouseenter(function() {
            $(this).css('cursor', 'pointer');
        });

        $('.fbh-popup-menu-item').mouseout(function() {
            $(this).css('cursor', 'default');
        });
    }); 
```

# php - 减少自动增量列？

> ID：14794943
> 
> 赞同：0
> 
> 时间：2013-02-10T05:16:36.177
> 
> 标签：php, mysql

好的，所以我有这个脚本，它可以更新或将值插入 mysql，还可以自动增加一列并将枚举值从 0 设置为 1。

现在我试图弄清楚我可能会如何反转它，以便将枚举值设置回 0（我认为我知道该怎么做）我还需要弄清楚我可以如何递减或与递增相反的任何内容，是否可以在自动增量列中为 -1？

只要我可以减少自动增量列并将枚举值从 1 更改为 0，就不一定需要删除这些值。

谁能告诉我我该怎么做？谢谢。

```
<?php

    require_once('includes/session.php');
    require_once('includes/functions.php');
    require('includes/_config/connection.php');

    session_start();

        confirm_logged_in();

        if (isset ($_GET['to'])) {
        $user_to_id = $_GET['to'];

    }

    if (!isset($_GET['to']))
        exit('No user specified.');

    $user_id = $_GET['to'];

    $result = mysql_query("SELECT * FROM ptb_likes WHERE liked_id ='".$user_to_id."' ");

    if( mysql_num_rows($result) > 0) {
    mysql_query("UPDATE ptb_likes SET likes = likes +1 WHERE liked_id = '".$user_to_id."' ");

        $user_to_id = mysql_query("ALTER TABLE likes AUTO_INCREMENT = $id");
    }
    else
    {
        mysql_query("INSERT INTO ptb_likes (user_id, liked_id) VALUES (".$_SESSION['user_id'].", ".$user_to_id.")"); 

    }

    if($result) 
    { 
    mysql_query("UPDATE ptb_likes SET user_id_has_liked='1' WHERE user_id=".$_SESSION['user_id']."") 
    or die(mysql_error());

    header("Location: {$_SERVER['HTTP_REFERER']}");

    }
    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T08:50:06.443

正如其他地方所建议的那样

```
create table b
(
id int not null auto_increment primary key,
foo boolean not null
);

 insert into b (foo) values (true), (false), (false),  (true), (true);

update b set
foo = not foo; 
```

# javascript - 如何找到距给定点给定距离的可能点的坐标？

> ID：14794947
> 
> 赞同：1
> 
> 时间：2013-02-10T05:17:05.043
> 
> 标签：javascript, math, distance

我正在设计一个 HTML5 画布测试，该测试需要两个圆圈相隔固定距离，但每次完成测试时位置都是随机的。我的计划是将其中一个圆圈保留在预设位置，并为另一个圆圈找​​到随机位置。

我想找到距给定点给定距离的点列表，作为另一个圆心的可能位置。基本上是以给定点为中心，以给定距离为半径的圆圆周上的点。是否有任何 jquery 或 javascript 数学函数已经这样做了，还是我必须想办法解决下面的距离公式方程？

![距离公式](../Images/fac94b1e39457e9acab001189919672e.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T21:32:36.387

给定一个固定圆的中心 (x [0] ,y [0] )，一个与 (x [0] ,y [0 ) 距离为]*r*的均匀分布的随机圆中心的公式很简单：

(x [0] + *r* * cosθ,y [0] + *r* * sinθ)

其中 θ 均匀分布在 [0,2π) 上。这需要一行代码来创建随机角度，并且需要一行代码来执行这些计算。那是惊人的两行代码......当然你会立即意识到这个公式不需要 (x [0] ,y [0] ) 来固定，所以你可以很容易地添加第三行代码随机化它的位置每次迭代，然后计算随机点。

当推广到更高维度（N 球上的一个均匀点）时，极坐标不再很有用。有一些简单的方法只需 5 行代码即可实现，请参见[http://mathworld.wolfram.com/SpherePointPicking.html](http://mathworld.wolfram.com/SpherePointPicking.html)。

# iphone - 在ios中更改视图的背景图像

> ID：14794956
> 
> 赞同：0
> 
> 时间：2013-02-10T05:17:44.053
> 
> 标签：iphone, ios, objective-c, uiimage

我有这样一类键盘：

```
@implementation Testkeyboard 

 -(void)drawRect:(CGRect)rect
 {

    UIImage *image = [UIImage imageNamed: @"FrameLetters2.png"];
    [image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];  
 } 
```

我想创建一些方法来像这样更改背景*图像

```
 -(void) changeImage1

  -(void) changeImage2 
```

如何实施？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-10T05:22:46.087

使用`colorWithPatternImage`这样的方法

```
-(void) changeImage1
{
self.view.backgroundColor=[UIcolor colorWithPatternImage:[UIImage imageNamed:@"image1"]];
}
-(void) changeImage2
{
self.view.backgroundColor=[UIcolor colorWithPatternImage:[UIImage imageNamed:@"image2"]];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T07:27:57.757

我有过类似的情况，我认为最简单的方法是向视图添加 UIImageView 并使其填充整个视图区域。

# java - GUI Java 中的 BMI 计算器；

> ID：14794957
> 
> 赞同：-2
> 
> 时间：2013-02-10T05:17:47.257
> 
> 标签：java, swing, user-interface, layout

我想在 Java 中使用 GUI 创建一个 BMI 计算器。我对 GUI 甚至 Java 都很陌生。计算器应该显示带有建议甚至时间和日期的 BMI。但是，只有 BMI 显示，而其余的则不能。我一直在网上搜索如何在网上显示 if else 条件的结果，但无济于事。这是我的代码；

```
public class BMI extends JFrame implements ActionListener {

    private static final JButton JButton = null;
    private JFrame frame;
    private JPanel panel;
    private JLabel heightLabel, weightLabel, BMILabel;
    private JTextField height, weight, result;
    private JButton calculate;
    String Height, Weight;
    double number1, number2, BMI;
    static String output = "Results";
    static int jopIcon = JOptionPane.QUESTION_MESSAGE;
    boolean bFlag = true; //state, true means no exception

    public BMI() {

        frame = new JFrame("BMI Calculator");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
//create labels for the height and weight textfields 
        heightLabel = new JLabel("Your height in meters:");
        weightLabel = new JLabel("Your weight in kilograms: ");
//create a "this is your BMI" label
        BMILabel = new JLabel("Your BMI is ");
//create a result label to hold the BMI value
        result = new JTextField("");
//create a JTextField to hold the person's height in kilograms
        height = new JTextField(1);
//create a JTextField to hold the person's weight in metres
        weight = new JTextField(1);

        calculate = new JButton("Calculate BMI");

//set up the JPanel to go on the JFrame 
        panel = new JPanel();

        panel.add(heightLabel);
        panel.add(height);
//add the weight label and weight textfield to the panel
        panel.add(weightLabel);
        panel.add(weight);
//add the button to the panel

        panel.add(BMILabel);
//add the label that holds the result to the panel
        panel.add(result);
//add the panel to the frame 
        panel.add(calculate);
//add the BMI label to the panel

        frame.getContentPane().add(panel);

        JPanel p1 = new JPanel();
        panel.setLayout(new GridLayout(4, 1));
        add(p1, BorderLayout.SOUTH);

        calculate.addActionListener(this);

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(400, 400);
        frame.setVisible(true);//important must HAVE@! if not GUI will not be display

    }

    public String getDateTime() {
        DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
        Date date = new Date();
        return dateFormat.format(date);
    }

    public void calculateBMI(double number1, double number2) {
        try {
            BMI = number2 / ((number1) * 2);

        } catch (NumberFormatException nfe) {
            output += "\n\n Whoa! Input error: must enter valid integers";//if exception comes    out, prepare error message
            jopIcon = JOptionPane.ERROR_MESSAGE;
        }
    }

    public void calculate() {
        Height = height.getText();
        Weight = weight.getText();//declare the Height string with Jtext height

        try {
            number1 = Double.parseDouble(Height);
            number2 = Double.parseDouble(Weight);//exception may come out

            calculateBMI(number1, number2);

        } finally {

            if (BMI >= 27.5) {

                output += "\n\n You're in the High Risk zone(UnHealthy). Please start losing weight! It's a MUST!";

            } else if (BMI <= 23 || BMI < 27.4) {

                output += "\n\n You're in the Moderate Risk zone. Please start going on diet and lose some weight";

            } else if (BMI <= 18.5 || BMI < 22.9) {
                output += " You're in the Low Risk zone(Healthy). Hopefully you can maintain this way! ^^";

            } else if (BMI < 18.4) {
                output += "\n\n You really need to start eating more. Too skinny and unhealthy for your body";

            }
        }

    }

    public static void main(String[] args) {

        BMI bmi = new BMI();

    }

    @Override
    public void actionPerformed(ActionEvent e) {
//call the calculate

        this.calculate();

        result.setText("" + BMI);

// TODO Auto-generated method stub

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T05:37:23.157

我会这样做：

```
@Override
public void actionPerformed(ActionEvent arg0) {
    calculate();
    result.setText(output);
} 
```

结果应该是 JTextArea 类型，但是应该设置换行：

```
result = new JTextArea();
result.setLineWrap(true); 
```

您应该考虑在匿名类中实现 ActionListener，而不是直接在框架类中实现（尤其是当您想添加一些其他按钮或复选框时）

```
calculate.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent ev) {
        calculate();
        result.setText(output);
    }
}); 
```

# android - 只有 1 个滑块的颜色选择器

> ID：14794958
> 
> 赞同：0
> 
> 时间：2013-02-10T05:17:47.557
> 
> 标签：android

我正在尝试创建一个仅使用一个滑块的颜色选择器。我知道这不会允许所有颜色，我将无法调整 alpha、色调和饱和度。那里有很多颜色选择器的例子。一种常见的颜色选择器涉及使用方形和线性光谱。正方形允许您更改色调和饱和度。我只想要线性光谱值。我很想用一些算法来做到这一点，但我想不出如何开始。最坏的情况是，我可以使用一个包含颜色的数组，只使用进度条的值作为索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T07:43:58.717

我想出了以下代码，它与我想做的事情相匹配。可以对其进行修改以提供更大范围的值。该代码非常粗糙，但我认为您明白了。

```
public int getColorFromProgress(int progress)
{
    int color1 = 0, color2 = 0, color = 0;
    float p = (float)progress;
    if(progress <= 10) /* black to red */
    {
        color1 = 0;
        color2 = 0xff0000;  
        p = progress / 10.0f;
    }
    else if(progress <= 25) /* red to yellow */
    {
        color1 = 0xff0000;
        color2 = 0xffff00;  
        p = (progress - 10) / 15.0f;
    }
    else if(progress <= 40) /* yellow to lime green */
    {
        color1 = 0xffff00;
        color2 = 0x00ff00;  
        p = (progress - 25) / 15.0f;
    }
    else if(progress <= 55) /* lime green to aqua */
    {
        color1 = 0x00ff00;
        color2 = 0x00ffff;  
        p = (progress - 40) / 15.0f;
    }
    else if(progress <= 70) /* aqua to blue */
    {
        color1 = 0x00ffff;
        color2 = 0x0000ff;  
        p = (progress - 55) / 15.0f;
    }
    else if(progress <= 90) /* blue to fuchsia */
    {
        color1 = 0x0000ff;
        color2 = 0x00ff00;  
        p = (progress - 70) / 20.0f;
    }
    else if(progress <= 98) /* fuchsia to white */
    {
        color1 = 0x00ff00;
        color2 = 0xff00ff;  
        p = (progress - 90) / 8.0f;
    }
    else
    {
        color1 = 0xffffff;
        color2 = 0xffffff;
        p = 1.0f;
    }

    int r1 = (color1 >> 16) & 0xff;
    int r2 = (color2 >> 16) & 0xff;
    int g1 = (color1 >> 8) & 0xff;
    int g2 = (color2 >> 8) & 0xff;
    int b1 = (color1) & 0xff;
    int b2 = (color2) & 0xff;

    int r3 = (int) ((r2 * p) + (r1 * (1.0f-p)));
    int g3 = (int) (g2 * p + g1 * (1.0f-p));
    int b3 = (int) (b2 * p + b1 * (1.0f-p));

    color = r3 << 16 | g3 << 8 | b3;

    return color;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T05:23:35.820

我不确定，但我认为你可以这样想。

要用一个值表示所有颜色，蓝色需要 1 个字节，红色需要 1 个字节，绿色需要 1 个字节。

所以你可以这样做。

让滑块为 0 到 0xFFFFFF

然后通过以下方式过滤掉值：

```
#include <stdio.h>

int main()
{
    int color = 0x0aFF0b;

    int r = ((0xff << 4) & color) >> 4;
    int g = ((0xff << 2) & color) >> 2;
    int b = ((0xff) & color);

    printf("r: %x\n", r);
    printf("r: %x\n", g);
    printf("r: %x\n", b);

    return 0;
} 
```

然后只需将这些值插入颜色中，然后使用它。

# codeigniter - 代码点火器和浏览器兼容性

> ID：14794962
> 
> 赞同：0
> 
> 时间：2013-02-10T05:18:07.523
> 
> 标签：codeigniter, jquery-plugins

这可能是在这里问的不恰当的问题。我被这些问题困扰了很长时间。我已经构建了具有不同 Jquery 插件的 CI 项目。该项目在 Firefox 和 Chrome 中正常运行，但即使在最新版本中，它在 IE 中也显得一团糟。我已经测试了 Jquery 插件而没有集成到 CI 中，它在 IE 中正确显示。但是当我在 Code Igniter 中使用该 Jquery 插件时，它无法正确显示。Slider Jquery 插件无法在 IE 中正确显示。

我的问题是 Code Igniter 在不同的浏览器中显示页面是否也会有所不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T06:18:39.920

简单的问题在于 jquery 集成到 Codeigniter 框架中。该框架采用MVC设计模式。框架是纯PHP。因此，如果它在您的网站中不起作用 jquery，那么将 jquery 集成到 CI 中就会出现问题。

很可能，您可能没有`base_url()`在框架中正确使用，或者可能没有为 jquery 库设置正确的路径，或者没有在 web.xml 中包含相关文件。请检查上面，如果它不起作用，请发布设置 jquery 的代码。

# hadoop - 在没有 Hadoop Eclipse 插件的情况下工作

> ID：14794965
> 
> 赞同：0
> 
> 时间：2013-02-10T05:18:30.407
> 
> 标签：hadoop, eclipse-plugin

我只是有一个小小的疑问。我正在使用 Hadoop 和 map reduce 。我使用 yahoo-vm 机器制作了带有 eclipse 插件的 map-reduce 应用程序。但是当我自己尝试在我的计算机上单独安装 hadoop 时，即使经过多次尝试，我也无法建立 eclipse 和 HDFS 之间的链接。我想知道构建这些应用程序是否需要 Eclipse？因为我只发现它在向 HDFS 提交输入和接收输出时很有用。甚至可以通过 map redcue 的 fs api 实现自动化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T13:20:26.923

MapReduce 程序与任何其他 Java 程序一样，可以在记事本、vi 或任何喜欢的编辑器中开发。NetBeans 和 Eclipse 等 IDE 使 Java 程序的开发更加容易。

[这](http://www.thecloudavenue.com/2012/10/debugging-hadoop-mapreduce-program-in.html)是一篇关于在不使用 Hadoop 插件的情况下在 Eclipse 中开发/调试 Hadoop MapReduce 程序的博客文章。在 Eclipse 中开发/调试程序后，必须创建一个 jar 文件，然后使用该`hadoop jar .....`命令将其提交到 Hadoop 集群。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T13:20:55.237

您当然不需要 eclipse 或任何插件来开发在 Hadoop 上运行的 MapReduce 作业。您可以启动 Hadoop 守护程序，将输入数据复制到集群并从控制台提交 MR 作业。各种插件将帮助您创建、执行和调试 MR 作业。

在最小设置中，Eclipse（或任何其他 IDE）可用于编写代码并将最终项目导出到 JAR。您只需要在项目的类路径中引用 hadoop jar。

# c# - 旋转视图后获取旋转角度

> ID：14794976
> 
> 赞同：0
> 
> 时间：2013-02-10T05:21:24.037
> 
> 标签：c#, xamarin.ios, rotation, cgaffinetransform

假设我使用以下方法旋转视图：

```
 CGAffineTransform t = CGAffineTransform.MakeIdentity();
            t.Rotate (angle);
            CGAffineTransform transforms = t;
            view.Transform = transforms; 
```

当我最初执行 CGAffineTransform 时，如何在不跟踪角度变量中放入的内容的情况下获取此视图的当前旋转角度？它与 view.transform.xx/view.transform.xy 值有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-10T08:44:14.930

不确定这些`xx`和`xy`所有其他类似成员的确切含义，但我的**猜测***是您将无法仅使用这些值来追溯应用的转换（这就像`1+2+3+4`只知道您从`1`和结束了`10`-**我认为***）。

在这种情况下，我的建议是派生`CGAffineTransform`并存储所需的值，但由于它是一个结构你不能这样做，所以在我看来你最好的选择是编写一个包装类，如下所示：

```
class MyTransform
{
    //wrapped transform structure
    private CGAffineTransform transform;

    //stored info about rotation
    public float Rotation { get; private set; }

    public MyTransform()
    {
        transform = CGAffineTransform.MakeIdentity();
        Rotation = 0;
    }

    public void Rotate(float angle)
    {
        //rotate the actual transform
        transform.Rotate(angle);
        //store the info about rotation
        Rotation += angle;
    }

    //lets You expose the wrapped transform more conveniently
    public static implicit operator CGAffineTransform(MyTransform mt)
    {
        return mt.transform;
    }
} 
```

现在定义的运算符让您可以像这样使用这个类：

```
//do Your stuff
MyTransform t = new MyTransform();
t.Rotate(angle);
view.Transform = t;
//get the rotation
float r = t.Rotation;

//unfortunately You won't be able to do this:
float r2 = view.Transform.Rotation; 
```

正如您所看到的，这种方法有其局限性，但您始终可以只使用一个实例`MyTransform`来应用各种转换并将该实例存储在某处（或者，可能是此类转换的集合）。

您可能还想在课堂上存储/公开其他转换，例如*缩放*或*翻译*`MyTransform`，但我相信您会知道从这里去哪里。

**如果我错了，请随时纠正我*

# scala - 终止仅生成消息的Scala Actor的正确方法

> ID：14794977
> 
> 赞同：0
> 
> 时间：2013-02-10T05:21:31.480
> 
> 标签：scala, actor

我对此完全陌生，但这里有一个 Scala 演员，它是用我的班级创建的，只为其他演员生成消息。我希望它每秒都醒来，收集一些指标，将它们发送给其他参与者，然后重新入睡。终止应用程序时，我需要向该参与者发送消息以退出

```
class Node() {
  println("A new Node is being constructed")
  val load_monitor: Actor = actor {
    val s: Sigar = new Sigar
    while (true) {
      Thread.sleep(1000);

      // Will be replaced with something like 
      // load_manager | s.getCpuSystem
      println(s.getCpuPerc)

      self.receiveWithin(100) { 
        case "EXIT" => exit() 
        case TIMEOUT => {}
      } 
    }
  }

  // Other Node code below...
} 
```

这似乎有效，但我不相信它是正确的。调用 Thread.sleep 聪明吗？如果这是一个完整的线程，我现在有一个睡眠线程。如果这是一个事件，我现在是否阻止了一些事件处理队列？我可以使用接收/反应的东西更正确地做到这一点吗？我无法理解接收/反应是否有效地停止了演员的执行，这意味着我无法每秒醒来检查指标。下面的代码我也考虑过，不知道是不是比上面的代码好！

```
class Node() {
  println("A new Node is being constructed")
  val load_monitor: Actor = actor {
    val s: Sigar = new Sigar
    while (true) {
      self.receiveWithin(1000) { 
        case "EXIT" => exit() 
        // Will be replaced with something like 
        // load_manager | s.getCpuSystem
        case TIMEOUT => println(s.getCpuPerc)
      } 
    }
  }

  // Other Node code below...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T08:44:19.313

首先，我强烈推荐使用[Akka](http://akka.io/)，从 Scala 2.10 开始，它已经取代了 Scala Actors。Akka 是 Actor 范式的独立实现，并非基于 Scala Actors。

话虽这么说，我将根据 Akka 2.x 来回答，既因为我最熟悉 Akka 2.x，也因为它可能对你更有用，因为 Akka 现在是事实上的 Actor Scala（也许是整个 JVM）的实现。

Actor 范式很容易理解——它基于两个主要思想：封装的可变性和消息传递。每个 Actor 都封装了它自己的状态，除了 Actor 本身之外，其他任何东西都不应触及 Actor 的内部状态。参与者通过消息进行通信。如果某个 Actor A 想要改变封装在 Actor B 内的变量（例如，也许 A 代表一个客户，B 代表客户的银行账户），A 将向 B 发送一条消息，表明这一点 - 请注意，B 可以随意忽略该消息。

Actor 不会一直占用线程，他们只会在邮件在他们的邮箱中等待他们时“醒来”。因此，调用 to`Thread.sleep`不仅没有必要，而且不推荐。

在Akka 中，消息是松散类型`Any`的（`receive`

您可以为每个 Actor 创建一个调度程序，每 x 秒向自己发送一条消息（Akka 有工具可以让这变得非常简单）。此消息将触发 Actor 唤醒，读取邮箱中的消息（可能是指示它应该收集统计信息的消息），并对其采取行动。

要将消息广播给其他几个 Actor，有很多方法可以做到这一点。一种简单的方法是在度量收集 Actor 中保留某种`ActorRef`（Akka 特定的）集合，并且每次 Actor 醒来收集统计数据时，它只是向`Actor`与该集合对应的每个对象发送一条消息。还有很多其他方法可以做到这一点。

如果您真的对在 Scala（或一般的 JVM）中使用 Actors 感兴趣，我强烈推荐 Derek Wyatt 的书[Akka Concurrency](http://www.artima.com/shop/akka_concurrency)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-10T08:27:33.253

在演员中使用`while(true)`and`Thread.sleep`不是一个好主意。你不想阻止。我会定期向演员发送一条消息，然后它会对此做出反应。

例子：

```
import scala.actors.Actor

import java.util.Timer
import java.util.TimerTask

case object DoSomething

class MyActor extends Actor {
  def act() {
    loop {
      react {
        case DoSomething =>
          // do measurement
          println(Runtime.getRuntime.freeMemory + " bytes free")

        case 'kill =>
          exit()
      }
    }
  }
}

val actor = new MyActor
actor.start

val timer = new Timer(true)

timer.schedule(new TimerTask {
  def run {
    actor ! DoSomething
  }
}, 1000, 1000) 
```

我还建议您改用akka。使用 akka，同样的事情看起来像这样（未经测试）：

```
import akka.actor._
import scala.concurrent.duration._

case object DoSomething

class MyActor extends Actor {

  context.scheduler.schedule(1 second, 1 second) {
    self ! DoSomething
  }

  def receive = {
    case DoSomething =>
      // do measurement
      println(Runtime.getRuntime.freeMemory + " bytes free")
  }
}

val system = new ActorSystem("MySystem")

system.actorOf(Props[MyActor]) 
```

要杀死一个 akka 演员，您可以随时向它发送`akka.actor.PoisonPill`，这将在处理完队列中的所有剩余消息后杀死该演员。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-10T08:27:23.850

> 我对此完全陌生

在这种情况下，正如 adlbertc 所说，你真的应该从 Akka 演员开始，除非你坚持使用 Scala 演员来维护遗留应用程序的要求（因为 Scala 演员在当前的 Scala 版本中已被弃用，并将在下一个版本中删除） .

> 调用 Thread.sleep 聪明吗？如果这是一个完整的线程，我现在有一个睡眠线程。

不，如果你打电话，`Thread.sleep`你*总是*有一个睡眠线程。Actor 不会以某种方式改变现有方法的含义！

您的第二个选项更好，但`receiveWithin`意味着该演员将在自己的线程中运行，更好地使用`reactWithin`并查看[此答案](https://stackoverflow.com/a/8047026/9204)。

使用 Akka 演员，您可以只使用[Scheduler](http://doc.akka.io/docs/akka/2.1.0/scala/scheduler.html)。

# .net - 在 .NET Windows 应用程序中使用 Windows/IE 代理设置

> ID：14794979
> 
> 赞同：0
> 
> 时间：2013-02-10T05:21:56.447
> 
> 标签：.net, security, proxy

如何让 Windows .NET 应用程序使用 Internet 设置中配置的代理设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T05:21:56.447

虽然在其他地方发布了 HttpWebRequest 默认使用 Windows/IE 代理设置，但没有发布的是，如果代理需要身份验证，则默认情况下不使用身份验证。这可以通过将以下内容添加到 app.config 来纠正：

```
<system.net>
    <defaultProxy enabled="true" useDefaultCredentials="true" />
</system.net> 
```

至少对我来说，解决问题的一点配置。

# objective-c - 可以调用自重载初始化程序吗？

> ID：14794987
> 
> 赞同：1
> 
> 时间：2013-02-10T05:23:10.913
> 
> 标签：objective-c

在下面的重载初始化程序中可以调用 [self initWith..] 吗？因为当 [super init] 还没有发生时，我正在调用“self”上的东西？

当我测试这一切都很好。这是否意味着甚至可以在 [super init] 调用之前调用“self”上的方法？谁能帮我理解这一点？

```
-(id)initWithObjectA:(id)objectA{
    if (self = [super init]) {
        //Do other initializations
        //Use ObjectA
    }
    return self;
}

-(id)initWithObjectA:(id)objectA andWithObjectB:(id)objectB{

    if (self = [self initWithObjectA:objectA]) {
        //Use ObjectB
    }
    return self;
}

//More overloading initializers 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T05:51:00.667

根据[Apple 的文档](https://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/Initialization/Initialization.html)，给定类的指定初始化程序应该执行所有实际初始化；其他初始化程序应直接或间接调用指定的初始化程序。因此，您认为一个初始化程序应该调用另一个初始化程序是正确的，但是您提供的示例是向后执行的。考虑重写方法如下：

```
- (id)initWithObjectA:(id)objectA
{
    return [self initWithObjectA:objectA objectB:nil];
}

- (id)initWithObjectA:(id)objectA objectB:(id)objectB
{
    if (self = [super init])
    {
        // Perform custom initialization...
    }

    return self;
} 
```

**编辑**

关于`self`在对象完全初始化之前发送消息，当然没关系。如果您考虑一下，它`self`是一个在对象接收到消息时初始化的指针。（`self`实际上是作为隐藏参数传递到方法中的，但那是另一回事了。）鉴于有问题的对象已经收到了一条消息，它没有理由不能向自己发送额外的消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T05:30:54.153

是的，它工作正常。我经常这样做是为了用默认值初始化私有变量。这有助于您编写更少的代码并显示构造函数层次结构。

`self`这里的工作方式与您编写的方式相同`super`。所以它只是调用其他构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-10T05:35:03.267

是的，你可以这样做。这就像从其他一些方法调用的简单方法。这里没什么不好。根据您的对象数量，您可以调用您的特定初始化程序。

这不是一个好方法，它总是最好的方法

# linux - 输入/读取终端

> ID：14794992
> 
> 赞同：-1
> 
> 时间：2013-02-10T05:24:12.677
> 
> 标签：linux, bash, terminal

假设我想运行一个 bash 脚本，终端中是否有一个命令来指定我的脚本要求的值而不是使用读取？

例如，在我键入 bash script1.sh 时，我可以以某种方式键入要传递给脚本的值还是必须首先执行它。

像 bash script1.sh 3 4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T05:27:04.527

要访问 bash 脚本的命令行参数，您可以使用`$@`数组以及`$0`, `$1`, ...,`$N`值。

例如：

```
#!/usr/bin/bash

echo "First argument is $1"
echo "Second argument is $2" 
```

# android - 在 android 客户端和安全 Web 服务中做的最好方法

> ID：14794994
> 
> 赞同：0
> 
> 时间：2013-02-10T05:24:35.490
> 
> 标签：android, service, web, https

所以我遇到了未经授权使用我的 c# web 服务的问题，所以就这样吧

问题：我有一个 android 客户端应用程序，它从 c# web 服务获取数据。现在我的问题是我不希望其他人/应用程序使用这些服务。所以我只想限制对我的应用程序的使用。

解决方案（我目前拥有）：1.创建一个用户名/密码并将其存储（加密形式）在android客户端应用程序中。2.我的安卓应用程序会将解密的用户名/密码发送到网络服务。3.由于用户名/密码在访问网络服务的过程中被解密，因此人们可以查看信息是不安全的。所以我的计划是建立一个 HTTPS 连接来保护数据。4.当用户名/密码到达网络服务时，它会执行必要的操作。

我不确定这是否是正确的方法，但如果这个问题与网站无关，请分享您的观点，但我非常需要这个主题的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-10T05:38:34.353

如果 https 是一个选项，只需使用它，并让应用程序使用基本身份验证进行身份验证。由于即使是基于 https 的基本身份验证也是加密的，所以您在那里相当安全——而且更好的是，您的网络服务器将充当门卫，永远不会访问应用程序服务器。

如果您只能使用 http，请考虑一个简单的质询-响应协议：Ping 服务器并接收访问令牌。然后客户端修改和加密此令牌，并生成一个新令牌，客户端将其与每个请求一起发送。由于客户端和服务器都知道响应的算法，服务器可以快速验证消费者是否被授权访问服务。

# django - pip install dj-database-url 给出了 Permission Denied 错误

> ID：14794996
> 
> 赞同：1
> 
> 时间：2013-02-10T05:25:10.607
> 
> 标签：django, postgresql

执行“pip install dj-database-url”会出现以下错误：

```
Downloading/unpacking dj-database-url Exception: Traceback (most recent call last):   File "/usr/lib/python2.7/dist-packages/pip/basecommand.py", line 126, in main
    self.run(options, args)   File "/usr/lib/python2.7/dist-packages/pip/commands/install.py", line 223, in run
    requirement_set.prepare_files(finder, force_root_egg_info=self.bundle, bundle=self.bundle)   File "/usr/lib/python2.7/dist-packages/pip/req.py", line 942, in prepare_files
    location = req_to_install.build_location(self.build_dir, not self.is_download)   File "/usr/lib/python2.7/dist-packages/pip/req.py", line 144, in build_location
    _make_build_dir(build_dir)   File "/usr/lib/python2.7/dist-packages/pip/req.py", line 1185, in
_make_build_dir
    os.makedirs(build_dir)   File "/usr/lib/python2.7/os.py", line 157, in makedirs
    mkdir(name, mode) OSError: [Errno 13] Permission denied: '/vagrant/django_projects/microblog/build'

Storing complete log in /var/lib/postgresql/.pip/pip.log 
```

我不知道我做错了什么。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-10T07:26:39.577

1.  设置 virtualenv 并启动它。

2.  pip install Django psycopg2 南 dj-database-url

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-10T05:54:14.903

使用[`virtualenv`](http://www.virtualenv.org/en/latest/)或运行您的命令`sudo`。

# php - 开发验证

> ID：14794998
> 
> 赞同：0
> 
> 时间：2013-02-10T05:25:51.437
> 
> 标签：php, validation

我正在创建一个验证类，但我没有找到可以帮助我的一致参考。
规则是用字符串设置的，并且类将项目传递给数组。
我不想必须使用 foreach 循环来没有很多，所以我想到了使用`**str_replace**`to use `**parse_str**`。

```
//code
// 'TYPE=string&REQUIRED=true&MIN=8
$rule    = 'TYPE=string | REQUIRED=true | MIN=8';
$newrule = str_replace( " | " , "&", $rule );
parse_str( $newrule , $parserule );

//output
array(
  [TYPE] => string
  [REQUIRED] => true
  [MIN] => 8
) 
```

这是一个非常简单的解释，但它是一个真实的案例，因为我开始考虑如何最好地进行验证。
然后我将实施适当的方法。

感谢任何能提供帮助的人