# StackOverflow 问答 15356000-15356999

# meteor - 我可以使用哪些 Mongo GUI 工具连接到我部署的 Meteor 应用程序？

> ID：15356000
> 
> 赞同：2
> 
> 时间：2013-03-12T08:00:19.650
> 
> 标签：meteor

MongoLab远程连接和RockMongo等工具需要一个永久的URL，所以“meteor mongo --url”生成的只有1分钟有效的URL不能长时间工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:50:21.887

如果您使用的是 Mac，我会建议您使用 MongoHub 的 fononauts 构建，普通的 Mongohub 有很多错误，在 Windows 上使用 MongoVue，这可能是我用过的最好的一个。

# oracle - 无法使用 VB 脚本连接到 Oracle 数据库

> ID：15356008
> 
> 赞同：0
> 
> 时间：2013-03-12T08:00:34.590
> 
> 标签：oracle, vbscript, connection, odbc, adodb

嗨，请帮我解决以下问题。我使用下面的 VB 代码将文本文件上传到我的 oracle 数据库。当我运行我的脚本时，我收到错误消息“类未定义 ADODB”

```
Set Obj_DBConn = New ADODB.Connection
Set cat = New ADOX.Catalog

Obj_DBConn.ConnectionString ="Driver={Microsoft ODBC for Oracle}; " & _
                             "CONNECTSTRING=(DESCRIPTION=" & _
                             "(ADDRESS=(PROTOCOL=TCP)" & _
                             "(HOST=##test##)(PORT=##test##))" & _
                             "(CONNECT_DATA=(SERVICE_NAME=##test##))); " & _
                             "uid=test;pwd=test;"

Obj_DBConn.Open Database_Path

Const ForReading = 1, ForWriting = 2, ForAppending = 8
Dim fso, f
Set fso = CreateObject("Scripting.FileSystemObject")

Set f = Nothing

Set f = fso.OpenTextFile("C:\Documents and Settings\test.txt", ForReading, True)

For i = 1 To 10000

v_Line_String = f.ReadLine

v_Output_Each_part = Split(v_Line_String,";",-1,1)

v_Col_A = v_Output_Each_part(0)
v_Col_B = v_Output_Each_part(1)
v_Col_C = v_Output_Each_part(2)

Obj_DBConn.Execute "INSERT INTO  test_me (ID_Q, NAME, ROLLNO) VALUES ('"       & v_Output_Each_part(0) & "','" & v_Output_Each_part(1) & "','" & v_Output_Each_part(2) & "')"

Next 
```

请提供您的见解提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:11:03.630

您的

```
Set Obj_DBConn = New ADODB.Connection 
```

是 VBA，而不是 VBScript。利用

```
Set Obj_DBConn = CreateObject("ADODB.Connection") 
```

让这条线通过解释器。

如果您承诺删除邪恶的“On Error Resume Next”，您可能会从[这里](http://social.technet.microsoft.com/Forums/en-US/ITCG/thread/9212a04b-ae1d-4a7f-87ba-cfa336898565)获得进一步的启发。

**更新：**

如果你在谷歌上搜索“80004005 odbc oracle”之类的东西，你会发现[这个故障排除](http://support.microsoft.com/kb/255084/en-us)程序有详细的分步说明来处理连接问题。下一站可能应该是[connectionstrings.com](http://www.connectionstrings.com/oracle)。

# java - Java/android 无法在活动之间传输字节数组

> ID：15356014
> 
> 赞同：3
> 
> 时间：2013-03-12T08:01:13.843
> 
> 标签：java, android-camera-intent

我正在尝试制作拍照应用程序。

主要活动上有surfaceview作为预览和“拍照”按钮。在第二个活动中，有一些图片信息的 textView 和显示图片的 imageView；

我试图通过 putExtra() 方法传输数据。

关于 mainActivity 中的代码

```
public void onPictureTaken(byte[] data, Camera camera) 
{
    // TODO Auto-generated method stub

    RecognizedActivity = new Intent(MainActivity.this, recognized.class);

    RecognizedActivity.putExtra("score", rFace.score);

    //RecognizedActivity.putExtra("leyex", rFace.leftEye.x);
    //RecognizedActivity.putExtra("leyex", rFace.leftEye.x);
    /*RecognizedActivity.putExtra("leye_y", rFace.leftEye.y);
    RecognizedActivity.putExtra("reye_x", rFace.rightEye.x);
    RecognizedActivity.putExtra("reye_y", rFace.rightEye.y);

    RecognizedActivity.putExtra("mouth_x", rFace.mouth.x);
    RecognizedActivity.putExtra("mouth_y", rFace.mouth.y);
    */
    RecognizedActivity.putExtra("rect_bottom"   , rFace.rect.bottom);
    RecognizedActivity.putExtra("rect_right"    , rFace.rect.right);
    RecognizedActivity.putExtra("rect_left"     , rFace.rect.left);
    RecognizedActivity.putExtra("rect_top"      , rFace.rect.top);

    //RecognizedActivity.putExtra("picture", data);
    RecognizedActivity.putExtra("pic", data);

    startActivity(RecognizedActivity);

    cam.startPreview();
} 
```

关于接收活动

```
public class recognized extends Activity 
{
int score;
int leye_x, leye_y;
int reye_x, reye_y;

int mouth_x, mouth_y;

int r_bottom, r_top, r_left, r_right;

byte[] picture;
TextView tvFaceInfo;
ImageView ivFaceDisplay;
@Override
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.recognized);

    Intent i = getIntent();
    tvFaceInfo = (TextView) findViewById(R.id.tvFaceInfo);
    ivFaceDisplay = (ImageView) findViewById(R.id.ivFacePicture);

    score       = i.getIntExtra("score", -1);

    r_bottom    = i.getIntExtra("rect_bottom"   , -1);
    r_right     = i.getIntExtra("rect_right"    , -1);
    r_left      = i.getIntExtra("rect_left"     , -1);
    r_top       = i.getIntExtra("rect_top"      , -1);

    picture     = i.getByteArrayExtra("pic");// getByteArrayExtra("picture");

    Bitmap bm = BitmapFactory.decodeByteArray(picture, 0, 1280*960);        
    //bm.copyPixelsFromBuffer(picture);
    ivFaceDisplay.setImageBitmap(bm);
    tvFaceInfo.setText("score: " + score + "\n"
                        + "rect " + r_bottom + " " + r_right + " " + r_left + " " + r_top);
}
} 
```

当调试器上图片时 = i.getByteArrayExtra("pic"); 抛出异常

“找不到来源”

怎么了 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:07:37.847

您可以在进程之间传递有限数量的数据（在您的情况下为活动）。与其传递字节数组本身，不如将字节数组（图像）另存为文件，并改为传递该文件的路径（`ContentProvider`例如 URI）。

# html - 使用 wget 获取包含 # 的地址

> ID：15356030
> 
> 赞同：2
> 
> 时间：2013-03-12T08:02:31.347
> 
> 标签：html, wget

我尝试使用此命令下载 html 文件：

```
wget -r --page-requisites  dowload.html https://www.mysite.com/docs//#!Mydocs;location=page1 
```

这给了我下一个错误：

```
-bash: !MyDocs: event not found 
```

如何使用 wget 获取包含 # 的地址？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T08:10:45.207

用单引号将 URL 括起来。这会阻止 shell 解析内容。

```
 wget -r --page-requisites  'dowload.html https://www.mysite.com/docs//#!Mydocs;location=page1' 
```

# codeigniter - 会话值不会更新

> ID：15356033
> 
> 赞同：0
> 
> 时间：2013-03-12T08:02:50.573
> 
> 标签：codeigniter, session

我的 codeigniter 项目的控制器中有一个函数，在该函数中，会话值会根据已发布的内容进行更新！

在控制器中：

```
function inquire_cdrcounts(){
    $this->session->unset_userdata('r_type');
    if($this->input->post('criteria')=="m"){
        $this->session->set_userdata('r_type','Months');
    }
    if($this->input->post('criteria')=="d"){
        $this->session->set_userdata('r_type','Days');
    }
....
....
} 
```

在视图中：

```
if($this->session->userdata('r_type','Days'))
    echo substr($key->date_time,8,2);
elseif($this->session->userdata('r_type','Months'))
    echo substr($key->date_time,5,2); 
```

它会打印两种条件的结果！怎么这两个条件都是真的？？！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:17:27.020

我认为你应该像这样检查，

```
if($this->session->userdata('r_type') == 'Days')
    echo substr($key->date_time,8,2);
elseif($this->session->userdata('r_type') == 'Months')
    echo substr($key->date_time,5,2); 
```

# c++ - 更改窗口中的标签

> ID：15356034
> 
> 赞同：0
> 
> 时间：2013-03-12T08:03:02.513
> 
> 标签：c++, winapi, visual-c++

我想在 vc++ 窗口中更改标签。标签显示每 100 毫秒更新一次的实时数据。那么我怎么能在vc++窗口中做到这一点呢？任何人请帮助

```
LRESULT CALLBACK WndProc(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam)
{
    HWND hRPMEx,hAvgTimeEx;
    int wmId, wmEvent;
    PAINTSTRUCT ps;
    HDC hdc;

    switch(message)
    {
    case WM_TIMER:
        break;

    case WM_CREATE:
        hRPMEx  = CreateWindowA("Static","",WS_CHILD | WS_VISIBLE | SS_LEFT,
            20,100,220,25,
            hWnd, (HMENU)IDC_RPM_EX, hInstance, NULL);  

        hAvgTimeEx  = CreateWindowA("Static","",WS_CHILD | WS_VISIBLE | SS_LEFT, 
            20,150,220,25,
            hWnd, (HMENU)IDC_AVGTIME_EX, hInstance, NULL);  
        break;

    case WM_COMMAND:
        wmId    = LOWORD(wParam);
        wmEvent = HIWORD(wParam);
        // Parse the menu selections:

        switch (wmId)
        {
        case IDC_BTN_CONNECT:
            break;

        case IDC_RPM_EX:
            break;

        case IDC_BTN_DISCONNECT:
            break;

        case IDM_ABOUT:
            DialogBox(hInst, MAKEINTRESOURCE(IDD_ABOUTBOX), hWnd, About);
            break;

        case IDM_OPEN:
            break;

        case IDM_EXIT:
            break;

        default:
            return DefWindowProc(hWnd, message, wParam, lParam);
        }

        break;

    case WM_PAINT:
        hdc = BeginPaint(hWnd, &ps);
        EndPaint(hWnd, &ps);
        break;

    case WM_DESTROY:
        PostQuitMessage(0);
        break;

    default:
        return DefWindowProc(hWnd, message, wParam, lParam);
    }

return 0;
} 
```

我应该在哪里调用更新标签的函数（静态文本）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:24:33.500

两件事情 ：

1.  要定期更新某些内容，您可以使用计时器。一个例子 ：

    ```
     // To set the timer
        SetTimer(hwnd,             // handle to main window 
        IDT_TIMER1,            // timer identifier 
        10000,                 // 10-second interval 
        (TIMERPROC) NULL);     // no timer callback 

        // In you WindProc Callback :
        case WM_TIMER:
        {
            if ( wParam == IDT_TIMER1)
            {
                  // put your code here
            } 

        } 
    ```

此处的示例：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms644901 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644901(v=vs.85).aspx)

1.  要更改窗口的标签：

    ```
    BOOL WINAPI SetWindowText(
      _In_      HWND hWnd,
      _In_opt_  LPCTSTR lpString
    ); 
    ```

此处的示例：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms633546 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633546(v=vs.85).aspx)

# c# - C#在多个值上过滤excel列

> ID：15356038
> 
> 赞同：7
> 
> 时间：2013-03-12T08:03:16.577
> 
> 标签：c#, .net, winforms, export-to-excel

我正在使用 C# 在基于 Windows 窗体的应用程序中将数据表导出到 excel 中。FilterList 具有以下值

```
string[] FilterList = new string[] {"Red", "Blue"}; 
```

但我只得到由“蓝色”过滤的值。下面是我在其中一个列上应用过滤器的部分代码。我尝试过滤的列中有 7 个不同的值，我只想从中选择 2 个。

```
Microsoft.Office.Interop.Excel.Application app = new
Microsoft.Office.Interop.Excel.Application();   
        app.Visible = false;

        Workbook wb = app.Workbooks.Add(XlWBATemplate.xlWBATWorksheet);   
        Worksheet ws = (Worksheet)wb.ActiveSheet;

       // Some business logic to fill the excel.............

        Range firstRow = (Excel.Range)ws.Rows[1];
        firstRow.Activate();
        firstRow.Select();
        firstRow.AutoFilter(5, FilterList.Count > 0 ? FilterList :
        Type.Missing,Excel.XlAutoFilterOperator.xlAnd, Type.Missing, true); 
```

我在这里做错了什么，任何帮助

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-12T09:00:03.950

好的，你去：

Range 的 Autofilter 方法的第三个参数接受 XlAutoFilterOperator，我将其更改为，`xlFilterValues`而不是`xlAnd`因为我使用单个条件对象但具有多个条件。下面是我为让过滤器选择 2 个值所做的代码更改。

```
Range.AutoFilter(5, FilterList.Count > 0 ? FilterList.ToArray() : Type.Missing,
Excel.XlAutoFilterOperator.xlFilterValues, Type.Missing, true); 
```

来源：[SocialMSDN](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/45d43ed9-cbfd-4843-a8d6-2918705ec992/)

希望它可以帮助其他 SO 用户。

# android - 获取android类中常量的值，Android

> ID：15356039
> 
> 赞同：0
> 
> 时间：2013-03-12T08:03:46.807
> 
> 标签：android, class, view, visible, invisible

我在我的类中遇到了一个编译器错误，我试图在以下示例中使用该常量“VISIBLE”

```
 if((enterIP.getVisibility()).equals(VISIBLE)){ 
```

编译器错误是，“VISIBLE 无法解析为变量”

来自 Android 文档

公共 int getVisibility()

在 API 级别 1 中添加 返回此视图的可见性状态。

相关 XML 属性 android:visibility 返回 VISIBLE、INVISIBLE 或 GONE 之一。

如何获得 VISIBLE 的数值或如何在我展示的示例中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:04:27.943

采用

```
if((enterIP.getVisibility()).equals(View.VISIBLE)) {

} 
```

代替

```
if((enterIP.getVisibility()).equals(VISIBLE)){

} 
```

因为`VISIBLE`在类中是常量，`View`或者您可以使用任何视图（如 Button、TextView）来访问视图类中的常量，例如`enterIP.VISIBLE`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:05:55.853

VISIBLE、INVISIBLE 和 GONE 是 enterIP 视图的属性，因此您可以像这样使用它：

```
 if((enterIP.getVisibility()).equals(enterIP.VISIBLE)){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:07:02.637

你必须使用

```
View.VISIBLE 
```

那么也许你可以解决这个错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T08:11:33.643

单独可见是什么，所以你得到`VISIBLE cannot be resolved to a variable`。

只需使用`View.VISIBLE`将其解析为该类型。

**可见的：**

```
int android.view.View.VISIBLE = 0 [0x0]

public static final int VISIBLE 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T08:23:45.487

我已经评论了您面临编译时错误的原因。但是，如果您仍然想做同样的事情，您正在尝试做我们可以执行以下操作。

全局声明变量

```
public static final int INVISIBLE=View.INVISIBLE;
public static final int VISIBLE=View.VISIBLE;
public static final int GONE=View.GONE; 
```

然后使用你的代码

```
if((enterIP.getVisibility()).equals(VISIBLE)){ 
```

现在错误似乎消失了。

**注意**：这样做可以避免每次都调用“View”类。

希望这对您有所帮助。

# node.js - 在 Node.js + PostgreSQL 的记录中查找公共字段

> ID：15356045
> 
> 赞同：1
> 
> 时间：2013-03-12T08:04:23.980
> 
> 标签：node.js, postgresql

我有一个 Postgres 表，它记录了哪些用户现在在哪个聊天室中。

它有两列 - “chatRoomId”和“userId”。

所以假设我有这样的记录：

```
chatRoomX, A
chatRoomX, B
chatRoomY, B
chatRoomY, C
chatRoomY, D 
```

（这意味着 chatRoomX 中的用户 A、B。chatRoomY 中的用户 B、C、D）

现在，给定一个 ["A","B"] 数组，我需要一个 SQL 查询来确定他们现在所在的聊天室——查询应该以“chatRoomX”响应。

到目前为止，这就是我所得到的：

```
client.query('SELECT chatRoomId FROM tableName WHERE 
 userId = $1 INTERSECT SELECT chatRoomId FROM tableName WHERE
 userId = $2', ["A","B"], function(err, results, done) { ... } 
```

这个查询可以成功地用“chatRoomX”回复我。但是正如您所看到的，这个查询是硬编码的，因此我需要一个更好的 SQL，它应该适用于具有可变长度的用户 id 的输入数组。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:44:21.553

您可以使用 PostgreSQL 数组逻辑来检查数组 [A,B] 是否包含在给定聊天室中所有人形成的数组中。

例子：

```
SELECT ARRAY['A','B'] <@
       ARRAY(SELECT userId FROM tableName WHERE chatRoomId='chatRoomX') 
```

这将返回一个布尔结果（`t`或`f`），如果两个人在聊天室中，则返回 true，否则返回 false。

`<@`表示数组的“被包含”。请参阅postgres 文档中的[数组函数和运算符。](http://www.postgresql.org/docs/current/static/functions-array.html)

编辑：假设查询应该检索`chatRoomId`同时存在 A 和 B 的所有内容，这可以写成：

```
 SELECT chatRoomId FROM
   (SELECT chatRoomId, array_agg(userId) AS a
     FROM tableName 
     GROUP BY userId) s
   WHERE ARRAY['A','B'] <@ s.a; 
```

# html - html中表格和div内容之间的对齐方式

> ID：15356052
> 
> 赞同：0
> 
> 时间：2013-03-12T08:04:38.227
> 
> 标签：html, css

我有一个这样的html代码：

```
<html>
<head>
    <title>Title</title>
</head>
<body style="max-width: 1680px;">

    <div style="float:left; width:100%">
        <div style="overflow: auto">
            <table style="width: 100%" border="1">
                <thead>
                    <tr>
                        <th>Col 1</th>
                        <th>Col 2</th>
                        <th>Col 3</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Elem11-------------------------------------------------</td>
                        <td>Elem12-------------------------------------------------</td>
                        <td>Elem13-------------------------------------------------</td>
                    </tr>
                    <tr>
                        <td>Elem21</td>
                        <td>Elem22</td>
                        <td>Elem23</td>
                    </tr>
                    <tr>
                        <td>Elem31</td>
                        <td>Elem32</td>
                        <td>Elem33</td>
                    </tr>

                </tbody>
            </table>
            <div id="footer" style="width: 100%; overflow: auto;">
                <span style="width: 300px; float: left">Some footer</span>
                <span style="width: 300px">Some footer2</span>
                <span style="width: 300px; float: right;">Some footer3---------------------------------------</span>
            </div>

        </div>
    </div>
</body>
</html> 
```

问题是出现滚动时div#footer没有正确显示，所以div#footer没有与表格的右边框对齐，但应该是（见下图）。如何使 div#footer 表现得好像它是表格的最后一行？如果答案只包含 CSS 命令，那就太好了。

![不需要的空间](../Images/06a49919b91594ffb5f7f82919da8aae.png)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:06:30.447

添加`text-align:right`

```
<span style="width: 300px; float: right; text-align:right">Some footer3-------------------------</span> 
```

**[演示](http://jsfiddle.net/77zus/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:50:44.083

您将单元格的宽度设置为百分比。设置页脚宽度时使用百分比。将百分比除以 3。33% 不等于 300px。或者，您可以拥有另一个与第一个具有相同格式的无边框表格。

# matlab - 如何使用matlab在图像上绘制矩形？

> ID：15356054
> 
> 赞同：-1
> 
> 时间：2013-03-12T08:04:49.000
> 
> 标签：matlab

我想在图像上绘制 8*8 像素的矩形。所以最终输出是具有 8*8 像素窗口网格的图像。

我想看看如何在图像上绘制矩形。即我想看到绘制的第一个矩形，然后是第二个，然后是第三个等。如何使用 Matlab 实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:16:50.900

在同一个图中绘制所有内容：

```
hold on
imshow(your_im) 
```

地块

```
plot([1 1],[1 8],'g')
plot([1 8],[8 8],'g')
plot([8 8],[8 1],'g')
plot([8 1],[1 1],'g') 
```

暂停程序`sec`几秒钟

```
pause(sec); 
```

继续画另一个正方形

```
plot([4 4],[4 12],'r')
plot([4 12],[12 12],'r')
plot([12 12],[12 4],'r')
plot([12 4],[4 4],'r') 
```

. . .

```
hold off 
```

如果您想暂停绘图过程，直到用户按下回车键，请`pause()`改用

# regex - 从as3中的html标签中提取字符串

> ID：15356057
> 
> 赞同：1
> 
> 时间：2013-03-12T08:05:07.427
> 
> 标签：regex, actionscript-3

我有文字

```
<p>Some text to extract</p> 
```

有没有一种方法可以让我获取 as3 中标签之间的文本。那只是“要提取的一些文本”。

我试过使用正则表达式

```
string.match(/<p>(.*?)<\/p>/g) 
```

但它返回`<p>`标签。

同样需要从中提取文本：

```
<caption><![CDATA[<p>Some text to extract.<span> -- Span text</span></p>]]></caption> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:35:06.340

这应该这样做:)

```
var reg:RegExp = /<p>(.*?)<\/p>/gi;

var str:String = "<p>Some text to extract</p>";

var raw:String = str.replace(reg, "$1");

trace("str", str);//str <p>Some text to extract</p>
trace("raw", raw);//raw Some text to extract 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:38:35.083

如果您的标签是正确的，您可以尝试将其解析为 xml。这将适用于您给定的示例：

```
var input:String = "<p>Some text to extract</p>";
var xml:XML = new XML(input);
trace(xml.text().toString()); // traces "Some text to extract" 
```

* * *

## 编辑

以下不是一个真正干净的答案......直到我花了一些时间弄乱它，我才能得到它。您可能不想接受这个作为答案，但我正在发布它，因为我确实设法得到了结果......也许其他人可以让它更干净。

我从来没有真正遇到过我感兴趣的节点（

本例中的节点）具有文本内容和一个子节点（与我的 xml 中的 CDATA 相同）。下面的代码是经过一些随机猜测和检查 api。每天学些新东西。=b

```
var inputString:String = "<caption><![CDATA[<p>Some text to extract.<span> -- Span text</span></p>]]></caption>";

var xml:XML = new XML(inputString);

// oddly this seems to filter out the caption and CDATA tag...but the resulting output is all in 1 element still
trace(xml); // traces out: <p>Some text to extract.<span> -- Span text</span></p>

xml = new XML(xml.toString()); // turn this into xml again

trace(xml); // this looks better now...traces out the expected xml

trace("{"+ xml.p +"}"); // traces out blank for some reason...
trace(xml.span); // traces out the expected span tag contents: "-- Span text"

trace(xml.descendants()[0]); // traces out "Some text to extract." -got it!
trace(xml.descendants()[1]); // traces out "-- Span text" 
```

# javascript - 如何删除emberjs中的键？

> ID：15356058
> 
> 赞同：3
> 
> 时间：2013-03-12T08:05:16.813
> 
> 标签：javascript, ember.js

我们都知道我们在ember中有`get`and `set`，但是如何`delete`在一个emberjs对象中设置key呢？

假设一个对象看起来像这样

```
Ember.Object.create({
    conf: {
        name: 'John',
        age: 16
    }
}); 
```

在数据传输期间，我需要从 中删除一个密钥`conf`，比如说`age`。您如何做到这一点才能正确删除密钥`conf`？我已经尝试过`set('conf.age', null)`，或者`undefined`似乎根本不工作。

**编辑**

一点背景。当我说它不适用于将其设置为 undefined 或 null 时，这意味着它不适合我的需要。我的课程会自动将`conf`数据保存到 Mongo 集合中。因此，假设现在您有一个未使用的密钥并且您想摆脱它，您如何删除它？

请注意，有一个更大的类来管理保存过程/数据验证，因此扩展控制器只是为了进行删除不太合适（丑陋）。扩展类可以使用这个`beforeSave`动作来清理未使用的键，但问题是如何删除这个键？

在 ember 中似乎不存在这样一个简单的动作，可能是为了处理各种绑定/观察者..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2017-01-11T02:22:07.697

如果您在 ember 对象上设置属性：

```
this.set('myObject.keyA', [1,2,3]); 
```

它现在将跟踪该密钥

```
Ember.keys('myObject'); // will show ['keyA']; 
```

您不能通过将密钥设置为 null 来删除它

```
this.set('myObject.keyA', null); 
```

自从

```
Ember.keys('myObject'); // will STILL show ['keyA']; 
```

而是简单地将其作为 javascript 对象删除

```
delete this.get('myObject').keyA; 
```

然后确认钥匙不见了

```
Ember.keys('myObject'); // will show [] an empty array; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:04:47.417

事实上你可以定义你自己的函数来处理这个像

```
Ember.Object.create({
    conf: {
        name: 'John',
        age: 16
    },
    deleteProp:function(key)
    {
       delete this.conf[key]
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:13:59.010

您是否尝试过简单地“删除”密钥（[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete)）？假设您的 Ember 对象被命名为 obj，我会这样做

```
delete obj.conf.age; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-02T12:50:07.917

只需添加到@mihai 答案：

如果你想删除嵌套的属性，你可以这样做：

```
function deleteKeyFromPath([object, path]) {
  let propertyPathArray = path.split('.');

  if (propertyPathArray.length > 1) {
    let keyToDelete = propertyPathArray.pop();
    let parentPropertyPath = propertyPathArray.join('.');
    delete get(object, parentPropertyPath)[keyToDelete];
  } else {
    delete object[path];
  }
}

let user = {
email: 'johbdoe@gmail.com',
personalInfo: {
    name: 'Jack',
    address: {
        line1: 'westwish st',
        line2: 'washmasher',
        city: 'wallas',
        state: 'WX'
       }
   }
} 
```

要删除“名称”，`call deleteKeyFromPath([user, 'personalInfo.name'])`

# jquery - 通过 $.ajax 发出请求时从 C# 服务器代码中获取错误

> ID：15356060
> 
> 赞同：1
> 
> 时间：2013-03-12T08:05:38.047
> 
> 标签：jquery, asp.net, ajax

我正在使用`$.ajax`向 Asp.Net 中的 C# 代码发送请求。每次我在响应中收到错误（在 Firebug 中检查），例如：

```
{"Message":"Invalid JSON primitive: EmailAddress.","StackTrace":"   at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializePrimitiveObject()\r\n   at System.Web.Script.Serialization.JavaScriptObjectDeserializer.DeserializeInternal(Int32 depth)\r\n   at System.Web.Script.Serialization.JavaScriptObjectDeserializer.BasicDeserialize(String input, Int32 depthLimit, JavaScriptSerializer serializer)\r\n   at System.Web.Script.Serialization.JavaScriptSerializer.Deserialize(JavaScriptSerializer serializer, String input, Type type, Int32 depthLimit)\r\n   at System.Web.Script.Serialization.JavaScriptSerializer.Deserialize[T](String input)\r\n   at System.Web.Script.Services.RestHandler.GetRawParamsFromPostRequest(HttpContext context, JavaScriptSerializer serializer)\r\n   at System.Web.Script.Services.RestHandler.GetRawParams(WebServiceMethodData methodData, HttpContext context)\r\n   at System.Web.Script.Services.RestHandler.ExecuteWebServiceCall(HttpContext context, WebServiceMethodData methodData)","ExceptionType":"System.ArgumentException"} 
```

如果我从中删除`data:{}`参数，`$.ajax`那很好。我认为我将数据发送到服务器的方式存在一些问题。

我的客户端代码是：function send_req() {

```
 $.ajax({
            url: "Demo.aspx/Demo_Method",
            contentType: "application/json; charset=UTF-8",
            type: "POST",
            data: {"EmailAddress": "abc@testmail.com"},
            success: function (response) {
                alert('Success' + response);
            }
        });
    } 
```

而Demo.aspx.cs页面代码为：

```
public partial class Demo : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }
    [WebMethod()]
    public static void Demo_Method(string EmailAddress)
    {
        //Some code....

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:09:11.590

删除参数周围的引号`EmailAddress`：

```
$.ajax({
   url: "Demo.aspx/Demo_Method",
   contentType: "application/json; charset=UTF-8",
   type: "POST",
   data: {EmailAddress: "abc@testmail.com"},
          ^^^^^^^^^^^^

   success: function (response) {
         alert('Success' + response);
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:15:38.473

尝试将数据作为字符串而不是对象传递。

例子：

```
$.ajax({
        url: "Demo.aspx/Demo_Method",
        contentType: "application/json; charset=UTF-8",
        type: "POST",
        data:  '{"EmailAddress": "abc@testmail.com"}',
        success: function (response) {
            alert('Success' + response);
        }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:11:24.837

在我的调用中，我指定`dataType: "json"`，并将整个`data`参数括在引号中。

例如

```
 $.ajax({
        url: "Demo.aspx/Demo_Method",
        contentType: "application/json; charset=UTF-8",
        type: "POST",
        dataType: "json",
        data: "{'EmailAddress':'abc@testmail.com'}",
        success: function (response) {
            alert('Success' + response);
        }
    }); 
```

# c# - 包含多个网络路径的拆分字符串

> ID：15356070
> 
> 赞同：0
> 
> 时间：2013-03-12T08:06:01.710
> 
> 标签：c#, regex, path

我有一个包含多个网络路径位置的字符串。它可以是 2、3 或任何数字。我想分成多条路径。我正在使用正则表达式，但没有得到想要的结果。

```
string samplePath = "\\Computer1\Folder\Folder \\Computer2\Folder\New Folder \\Computer\New Folder" 
```

我不能通过使用空格作为分隔符来拆分它，因为文件夹名称中可以包含空格。这是我用来获得所需结果的正则表达式。

```
var pattern = @"^\\{2}[\w-]+(\\{1}(([\w-][\w-\s]*[\w-]+[$$]?)|([\w-][$$]?$)))+";
var matches = Regex.Matches(samplePath, pattern, RegexOptions.IgnoreCase);
foreach (var match in matches)
    myCollectionList.Add(match.ToString()); 
```

之后发生的事情是我只得到一个结果（第一条路径）。匹配数为 1。问题出在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:17:50.043

利用`Regex.Split`

```
string source = @"\\Computer1\Folder\Folder \\Computer2\Folder\New Folder \\Computer\New Folder";

string[] result = Regex.Split(source, @" (?=\\\\)");

    foreach (string a in result) {
    Console.WriteLine(a);
} 
```

这将打印

```
\\Computer1\Folder\Folder  
\\Computer2\Folder\New Folder  
\\Computer\New Folder 
```

`@" (?=\\\\)"`是一个正则表达式，仅当空格后跟两个反斜杠时才会匹配。`(?=\\\\)`是一个[积极的前瞻断言](http://www.regular-expressions.info/lookaround.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:11:11.670

你可以用这个正则表达式**拆分它**

```
\s*(?=\\) 
```

* * *

所以，就像

```
Regex.Split(input,yourRegex); 
```

# objective-c - 为什么我们使用“自我”。在调用一个值之前？

> ID：15356072
> 
> 赞同：0
> 
> 时间：2013-03-12T08:06:06.843
> 
> 标签：objective-c, xcode

我是一个愚蠢的 iOS xcode 初学者。当我学习objective-C'self'时。主要用于在 Internet 上搜索其他人的示例代码。但是，当我们已经综合了值时，是否有“自我”是一样的。与否，对吧？

我想知道自我何时用于特定情况。请帮我澄清:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T08:09:27.077

using`self.myProperty`是`[self myProperty]`. 所以它使用访问器方法来检索值。

直接访问 ivar（省略`self.`）是不一样的。例如，子类可以覆盖该`myProperty`方法，更改返回值。另一种常见情况是延迟初始化：属性 getter 在第一次访问时设置值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:18:37.010

`property`和`instance variable`（或`ivar`）有区别。

使用`self.myVariable`你正在使用***属性***，使用`myVariable`你正在使用***ivar***。这里要记住的规则是：**“`ivar`除了 init 方法的情况外，永远不要在你的应用程序中使用”。**如果您是初学者，只需`self`在代码中的任何地方使用，就可以了。

# c# - 异步委托操作说明？

> ID：15356074
> 
> 赞同：2
> 
> 时间：2013-03-12T08:06:16.220
> 
> 标签：c#, asynchronous, .net-4.0

*我正在阅读汉斯的[**这个问题**](https://stackoverflow.com/questions/3172773/net-threadpool-worker-threads-and-asynchronous-io-threads)和答案，但我仍然需要澄清。*

AFAIK ，

> 异步**方法**的目的是让许多任务在少数线程上运行；而异步**委托**的目的是与调用者并行执行任务。

但是关于这两个异步操作：

如果*立即*`BeginInvoke`返回给调用者（*并且它使用异步委托*），那么必须有其他线程实际完成工作并在完成时发出信号。

 ***那么使用该*线程与常规线程池线程有什么区别？我回答：只有那些线程池线程已经存在并等待运行的事实？

但是，当`BeginInvoke`运行并立即返回时，其他*人*实际上已经完成了肮脏的工作（并且代码必须在正在处理的线程下运行。）所以*必须在*某个地方创建线程（在 beginXXX 之后运行）称呼）

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:20:11.287

`Delegate.BeginInvoke`使用线程池线程，就像`QueueUserWorkItem`. 不同之处在于它实现了 APM 模式，允许调用者使用 a`WaitHandle`等待调用完成，并提供回调。

Begin/End 方法对（AKA 异步编程模型）可以在很多地方找到，完全由实现者决定调用“begin”时会发生什么。很多情况下都会用到一个IO完成端口，这是一种非常高效的等待IO完成的方式。当 IO 完成时，线程池线程用于执行回调，但它取自线程池的不同部分（这就是为什么 Set{Min,Max}Threads 有两个数字。）

附带说明一下，在 .NET 4.5（甚至 4.0）中，使用 Tasks 进行异步要容易得多。许多类都增加了诸如“XXXTaskAsyc”之类的返回`Task`对象的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:13:43.980

看来您自己已经得到了答案：`BeginInvoke`使用`Threadpool`-thread 来完成工作。最后，这似乎与自己将工作项排队到线程池没有任何不同。唯一的事情是你所面临的更高层次的抽象。您实际上并不关心在代码中显式地排队和提供回调。
这已经看过了。请参阅[此处](https://stackoverflow.com/questions/2772597/difference-between-delegate-begininvoke-and-thread-start)了解一个想法。**

# c# - Ajax 请求不适用于动态控件追加

> ID：15356075
> 
> 赞同：0
> 
> 时间：2013-03-12T08:06:20.013
> 
> 标签：c#, jquery, ajax, asp.net-mvc-2

我参考了[Steven Sanderson 的博客](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)，并尝试在链接的点击事件上实现动态插入控件。现在就我而言，它不起作用。我不知道它有什么问题。删除 Div（包括控件）工作正常。但附加控件不起作用。当我点击“添加更多”链接时，它会在新页面上打开。不在同一页面上呈现添加控件。

我的主视图代码：

```
<div id="Div1">
  <% Html.RenderAction("_EditServices", "CRM", new { id = Model.Id });%>
</div>
<div id="editorRows">
  <% Html.RenderAction("_EditInsertServices", "CRM"); %>
</div>
<%= Html.ActionLink("+ Add More Service(s)", "EditAdd", null , new { id = "addItem" })%> 
```

我的 _EditInsertServices 的 PartiaView：

```
<div class="editorRow">
<% using (Html.BeginCollectionItem("services"))
  { %>
  NOS:<%:Html.DropDownListFor(model=>model.Id,(SelectList)ViewData["crmServiceType"] as SelectList,"---")%>
  Comment:<%=Html.TextBoxFor(model => model.Comment, new { size = "20" })%>
  <a class="deleteInsertRow">delete</a>
  <% } %>
</div> 
```

我的控制器代码：

```
public ActionResult EditAdd()
{
  ViewData["crmServiceType"] = new SelectList(CRMRequestDL.GetCRM_Service_TypeList().ToArray(), "Id", "ServiceName");
  return View("_EditInsertServices", new CommentedService());
}
public ActionResult _EditInsertServices()
{
  ViewData["crmServiceType"] = new SelectList(CRMRequestDL.GetCRM_Service_TypeList().ToArray(), "Id", "ServiceName");
  return PartialView();
} 
```

脚本：

```
<script type="text/javascript">
    $("#addItem").click(function () {
        $.ajax({
            url: this.href,
            cache: false,
            success: function (html) { $("#editorRows").append(html); }
        });
        return false;
    });
    $("a.deleteInsertRow").live("click", function () {
        $(this).parents("div.editorRow:first").remove();
        return false;
    });
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:11:33.890

live() 已被弃用并在 jQuery 1.9 中被删除

利用`on`

```
 $('#editorRows').on("click", "a.deleteInsertRow",function () {
    $(this).parents("div.editorRow:first").remove();
    return false;
}); 
```

如果您想[了解](http://jq4you.blogspot.com/2013/02/jquery-direct-and-delegate-on-event.html)有关活动的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:30:04.573

我解决了。其实我把 $("#addItem").click(function (){}); 函数转换为 $(document).ready(function () {}); 功能，它工作正常。因此，每当我使用 $("any class/id") 时，我都应该将该方法放在**$(document).ready()**函数中。

这是解决方案：

```
<script type="text/javascript">
$(document).ready(function () {
  $("#addItem").click(function () {
    $.ajax({
    url: this.href,
    cache: false,
    success: function (html) { $("#editorRows").append(html); }});
    return false;
  });
});
</script> 
```

# php - 根据分页页码循环显示帖子

> ID：15356080
> 
> 赞同：0
> 
> 时间：2013-03-12T08:06:36.797
> 
> 标签：php, wordpress, pagination

我正在为 wordpress 帖子创建一个分页系统，以每页 8 个帖子的顺序显示，而忽略每页中的第一个结果。为此，我制作了这段代码

```
<?php $offset_wordp=mysql_escape_string($_GET['page']); ?>
    <? query_posts ('cat=-103&posts_per_page=8&offset='.$offset_wordp.'') ?>

 <? while (have_posts ()) { the_post ();  ?>

    <div class="reu-sec">

        <h2><a href="<? the_permalink() ?>"><? the_title (); ?><span class="sbttlmn">&nbsp<?= get_post_meta (get_the_ID(), 'sub-title', true); ?></span></a></h2>

       <div style="clear: both"></div>

    </div>

    <? } ?>
</div> 
```

在上面的代码中，我使用该代码`offset`来过滤该数量的帖子之后的结果。我正在尝试的是获取`page number`然后相应地过滤偏移量，例如。如果页码为 1，则`offset=1`，如果页码为 2，则偏移量为 8，依此类推。因此，该帖子会根据页码自动过滤。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:11:37.073

第一页的偏移量将为 0。从第二页开始，偏移量将增加 8，使用以下公式计算偏移量。

```
$offset = ($page_num == 1)? 1 : ($page_num - 1) * 8; 
```

# php - 从数据库中获取图像大小时，将其设置为

> ID：15356083
> 
> 赞同：2
> 
> 时间：2013-03-12T08:06:58.510
> 
> 标签：php, html, css, image

我有一个“回声”，它正在从我的数据库中获取图像，但是，当我上传它时，它会自动将大小更改为 200x113px。我不希望图片被缩放那么多，我希望它像：

我想要一个大约 500x500px 的“盒子”，例如当我上传一张超过 500px 的图片时，它会缩小到只有 500px 宽，但要保持比例。

摘要：我想为图片设置一个最大尺寸，当我用代码将它放到屏幕上时。它应该适合那个尺寸并保持它的比例。

这是我获取图像的代码：

```
{echo "<tr><td colspan='2'><img src='http://xxxx.se/ok/eventbilder/"   . $row['photo'] .  "'></td></tr>";} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:08:58.900

使用这个 CSS：

```
img {
  max-width: 500px;
} 
```

或`width`在您的 td 上设置 a 并使图像宽度为 100%。确保只设置高度或宽度，否则图像不会（自动）保持其比例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:13:33.197

```
{echo "<tr><td colspan='2' style='width:500px;height:500px;'><img src='http://xxxx.se/ok/eventbilder/"   . $row['photo'] .  "'></td></tr>";} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:16:54.477

您需要自适应缩放：此函数获取您的图像路径并返回相应缩放的 $x 和 $y。这里我们假设一个容器框宽度为 $w 像素，高度为 $h 像素

```
 // get size
   $size = getimagesize($your_image_file_path);
   $x = $size[0];
   $y = $size[1];

   // container box
   $w = 500;
   $h = 500;

   $ratio = $x / $y;    

   // resize image
   if($x > $w)
   {
      $x = $w;
      $y = floor($x / $ratio); 
   }

   if($y > $h)
   {
      $y = $h;
      $x = floor($y * $ratio); 
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T08:24:33.487

你也可以给`<img>`喜欢的课`<img class="dbimg" src="from database"></img>`

并为该课程提供所有样式

```
.dbimg{
width:auto;
max-width:500px; //by only define width it will automatically takes up height as per its proportions 
//other styling  
} 
```

使用这种方法的好处是

1.你可以用一个类来做任何img，不需要每次都写代码

和

2.如果您有更多这样的图像以不同的尺寸显示，您可以进行多种组合

# pinterest - 在需要时加载 pinterest 脚本

> ID：15356085
> 
> 赞同：2
> 
> 时间：2013-03-12T08:07:01.437
> 
> 标签：pinterest

我有一个索引页面，其中 Pinterest 按钮对于不同的项目将多次可见。我想确保页面加载速度很快，并且 Pinterest 按钮不会减慢页面速度。

然而，由于 pinterest JS 解析 DOM 并替换 pinit 按钮中的代码，如果按钮数量很多，这对我来说会变得很昂贵。

我能以某种方式改进这个过程吗？如何仅在需要时调用 pinterest 脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:41:13.410

以下是我们为希望异步加载 Pinterest 脚本的网站运营商推荐的内容：

```
<script type="text/javascript">
(function(d){
  var f = d.getElementsByTagName('SCRIPT')[0], p = d.createElement('SCRIPT');
  p.type = 'text/javascript';
  p.async = true;
  p.src = '//assets.pinterest.com/js/pinit.js';
  f.parentNode.insertBefore(p, f);
}(document));
</script> 
```

这不应阻止页面的加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:46:09.600

我尝试了各种选择和方法：

1.  使用 $.getScript 方法动态加载文件。
2.  使用 $.live 方法进行实时事件绑定。
3.  不加载 PINTEREST 脚本并使用 javascript 在单击时处理弹出窗口。

第三种方法最适合我。它让我可以控制弹出窗口的位置，并且不会调用任何不必要的 Pinterest 脚本调用。

# java - 动态更改 ListView 大小并加载图像

> ID：15356099
> 
> 赞同：1
> 
> 时间：2013-03-12T08:07:59.387
> 
> 标签：java, android

我想在每一行中创建一个带有图像和文本的 ListView，动态改变他的大小（例如，在开始时，listView 什么都不显示，然后我可以向 listView 添加条目），我也希望 listView 可以加载位图图像列表，而不是可绘制的图像。

我创建了此代码，但是该代码仅从可绘制对象加载图像并创建一次（意味着我无法动态更改列表-添加或删除 listView 条目）

```
String[] text = { "One", "Two", "Three", "Four", "Five", "Six", "Seven",
       "Eight", "Nine", "Ten" };

     int[] image = { R.drawable.logo, R.drawable.logo, R.drawable.logo,
       R.drawable.logo, R.drawable.logo, R.drawable.logo, R.drawable.logo,
       R.drawable.logo, R.drawable.logo, R.drawable.logo };

    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
 lv.setAdapter(new MyCustomAdapter(text, listImages));
          edittext= (EditText) findViewById(R.id.EditText01);

          edittext.addTextChangedListener(new TextWatcher()
          {

           public void afterTextChanged(Editable s)
           {

           }

           public void beforeTextChanged(CharSequence s, int start,
            int count, int after)
           {

           }

           public void onTextChanged(CharSequence s, int start,
            int before, int count)
           {

            textlength = edittext.getText().length();
            text_sort.clear();
            image_sort.clear();

            for (int i = 0; i < text.length; i++)
            {
             if (textlength <= text[i].length())
             {
              if (edittext.getText().toString().
           equalsIgnoreCase((String) text[i].subSequence(0, textlength)))
              {
               text_sort.add(text[i]);
              // image_sort.add(image[i]);
              }
             }
            }

            lv.setAdapter(new MyCustomAdapter
             (text_sort, image_sort));

           }
          });
         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:50:49.893

检查此列表视图的实现 [http://www.java2s.com/Code/Android/UI/Demonstratestheusingalistviewintranscriptmode.htm](http://www.java2s.com/Code/Android/UI/Demonstratestheusingalistviewintranscriptmode.htm)

查看本教程以使用自定义列表视图项[http://www.framentos.com/en/android-tutorial/2012/07/16/listview-in-android-using-custom-listadapter-and-viewcache/](http://www.framentos.com/en/android-tutorial/2012/07/16/listview-in-android-using-custom-listadapter-and-viewcache/)

Eidt：使用这个适配器类：

```
  MyCustomAdapter 类扩展 BaseAdapter{
      公共静态 ArrayList text_array = new ArrayList();
      公共静态 ArrayList image_array = new ArrayList();
      公共 int getCount(){
           返回 text_array..size();
      }
      public long getItemId(int position){
           返回位置；
      }
      公共字符串getItem（int位置）{
           返回空值；
      }
      public View getView(final int position, View convertView, ViewGroup parent) {
        LayoutInflater 膨胀 = getLayoutInflater();
        视图 v = inflate.inflate(R.layout.listview, parent, false);
        最终 ImageView 图像 = (ImageView) v.findViewById(R.id.ImageView01);

         如果（listImages.get（位置）！= null）{
                     image.setImageBitmap(image_array.get(position));
                     image.setVisibility(View.VISIBLE);
          } 别的 {
                     image.setVisibility(View.GONE);
                     image.setImageBitmap(null);
                      image.setVisibility(View.VISIBLE);
      }
     返回 v;

    }
     公共无效addObject（字符串文本，位图位图）{
    text_array.add(文本);
        image_array.add(位图);
        notifyDataSetChanged();
     }
}

```

从您的活动类调用 addObject 函数以在列表视图中添加新项目

# javascript - 如果在模态对话框之外进行单击，如何禁用用户进行的所有单击

> ID：15356102
> 
> 赞同：3
> 
> 时间：2013-03-12T08:08:19.563
> 
> 标签：javascript, asp.net, modal-dialog

在我当前的项目中，我正在打开一个模态对话框，该对话框在单击按钮时打开，现在如果用户单击模态对话框之外的任何位置，则浏览器应忽略单击并且模态对话框应获得焦点，如何实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T08:22:14.333

显示模式对话框时禁用背景点击的标准方法是创建一个（半）透明 div（带有背景图像）并使用它来拦截所有点击。

你的对话框被放置在这个透明的 div 上。

像 jQuery 这样的框架会为你做这件事，所以你不必担心 js 是否正确。

看看[jQuery 模态对话框](http://jqueryui.com/dialog/#modal)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:11:45.690

签出模式对话框和相关技术。假设您使用 jQuery UI 进行对话框，该选项是内置的。如果没有，您可以检查他们的实现。

这是一个没有依赖关系的简单实现： [http ://raventools.com/blog/create-a-modal-dialog-using-css-and-javascript/](http://raventools.com/blog/create-a-modal-dialog-using-css-and-javascript/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:23:49.637

有一个名为 onblur 的文档或窗口的事件，基本上你想设置一个函数，如果用户点击其他窗口，它将把窗口的焦点带回你的弹出窗口。

伪代码如下：

```
 <script>
function bringBackFocus()
{
window.focus();
}
</script>
    <body onBlur="bringBackFocus()">
    </body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T08:44:23.160

在 jqueryui 对话框中有一个名为 Modal 的属性，将其设置为 true 它将禁用除对话框之外的所有内容 [Jquery Ui 对话框模态属性](http://api.jqueryui.com/dialog/#option-modal)

或其他方法是

```
$("*:not('#dialog')").on("click",function(){
// do focusing on button or anything you want...
return false;
}) 
```

# .htaccess - 带有预定义规则的查询字符串的 301 重定向的 htacess 规则

> ID：15356103
> 
> 赞同：0
> 
> 时间：2013-03-12T08:08:23.783
> 
> 标签：.htaccess

这是我的网址的格式

www.mysite.com/display/search/?cat=1&type=band&city=%20cityname

我想将它重定向到

www.mysite.com/display/search/?cat=1&type=band&city=cityname

即仅从城市中移除空间。请注意 /display/search 已经参考了 modules/display/search.php 的规则

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:37:49.630

试试这个（注意这个规则必须在从`search`to重写之后`search.php`）：

```
RewriteCond %{QUERY_STRING} city=%20([^&]+)
RewriteRule ^display/search\.php$ $0?city=%1 [R] 
```

# java - 由字符串数组填充的JComboBox（使用for循环）未出现

> ID：15356105
> 
> 赞同：0
> 
> 时间：2013-03-12T08:08:32.913
> 
> 标签：java, swing, jcombobox, arrays, comboboxmodel

我正在尝试用数字 25 到 50 填充我的 JComboBox，这就是我所做的，

```
--at the variable declarations--

String[] val = new String[25];
JComboBox box1 = new JComboBox();

--and in the "main"--

for(int i=0; i==val.length; i++){
   val[i] = Integer.toString(i+25);
}

box1.setModel(new DefaultComboBoxModel(val)); 
```

但最后，JComboBox 只显示空白 25 个空格，但不显示应保存在数字 25 - 50 的字符串数组中的数字。请帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T08:10:23.830

尝试改变

```
for(int i=0; i==val.length; i++){ 
```

至

```
for(int i=0; i<val.length; i++){ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T08:27:24.670

```
val[i] = Integer.toString(i+25); 
```

*   为 JComboBox 使用正确的数据类型，为 ComboBoxModel 使用 Integer

*   例如（在模拟 ComboBoxModel 的相同代码的 API 中实现的代码中使用 Vector）

![在此处输入图像描述](../Images/4abf29c4ee63ef972786f390cf64d947.png)

```
import java.awt.GridLayout;
import java.util.Vector;
import javax.swing.Icon;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;

public class ComboBoxIntegerModel {

    private JComboBox comboBoxDouble;
    private JComboBox comboBoxInteger;
    private JComboBox comboBoxBoolean;
    private JComboBox comboBoxIcon;
    private Vector<Double> doubleVector = new Vector<Double>();
    private Vector<Integer> integerVector = new Vector<Integer>();
    private Vector<Boolean> booleanVector = new Vector<Boolean>();
    private Vector<Icon> iconVector = new Vector<Icon>();
    private Icon icon1 = ((UIManager.getIcon("OptionPane.errorIcon")));
    private Icon icon2 = (UIManager.getIcon("OptionPane.informationIcon"));
    private Icon icon3 = (UIManager.getIcon("OptionPane.warningIcon"));
    private Icon icon4 = (UIManager.getIcon("OptionPane.questionIcon"));

    public ComboBoxIntegerModel() {
        doubleVector.addElement(1.001);
        doubleVector.addElement(10.00);
        doubleVector.addElement(0.95);
        doubleVector.addElement(4.2);
        comboBoxDouble = new JComboBox(doubleVector);
        integerVector.addElement(1);
        integerVector.addElement(2);
        integerVector.addElement(3);
        integerVector.addElement(4);
        comboBoxInteger = new JComboBox(integerVector);
        booleanVector.add(Boolean.TRUE);
        booleanVector.add(Boolean.FALSE);
        comboBoxBoolean = new JComboBox(booleanVector);
        iconVector.addElement(icon1);
        iconVector.addElement(icon2);
        iconVector.addElement(icon3);
        iconVector.addElement(icon4);
        comboBoxIcon = new JComboBox(iconVector);
        JFrame frame = new JFrame("");
        frame.setLayout(new GridLayout(2,2,5,5));
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(comboBoxDouble);
        frame.add(comboBoxInteger);
        frame.add(comboBoxBoolean);
        frame.add(comboBoxIcon);
        frame.setLocationRelativeTo(null);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                ComboBoxIntegerModel comboBoxModel = new ComboBoxIntegerModel();
            }
        });
    }
} 
```

# vb.net - 使用字符串作为变量名

> ID：15356108
> 
> 赞同：3
> 
> 时间：2013-03-12T08:08:57.770
> 
> 标签：vb.net

是否可以使用字符串作为变量的名称？例如..
我将 x 声明为私有双精度

```
 Private TextBox1Store,TextBox2Store,TextBox3Store As Double 
```

我将使用它作为存储值的变量。

此函数将标签和文本框中的数字相乘并返回一个产品。

```
 Private Function mqtyCalc(ByVal y As Integer, ByVal z As Integer) As Integer
    Dim w As Integer
    w = y * z
    Return w
 End Function 
```

这部分处理三个文本框事件。

```
 Private Sub TextBox1_TextChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles TextBox1.TextChanged, TextBox2.TextChanged, TextBox3.TextChanged
    Dim tb As TextBox = sender
    Dim tempObjNm As String
    tempObjNm =    tb.Name + "Strore"
    tempObjNm = mqtyCalc(someVariable.Text, Label1.Text)
End Sub 
```

这就是我要解决的部分。

```
 tempObjNm = someVariable.Name + "Strore"
 tempObjNm = mqtyCalc(tb.Text, Label1.Text) 
```

“tempObjNm”在这个 sub 中被声明为字符串。
每次我在文本框中输入一个值时，这个 sub 将获取已插入值的文本框的名称，并且名称将在其末尾添加“存储”，以模仿上面声明的变量名称。例子，

temObjNm = TextBox1Store（模仿私有 TextBox1Store）
temObjNm 当前是一个由

```
 Dim tempObjNm As String 
```

作为一个字符串

这部分是sub的存储部分

```
 tempObjNm = mqtyCalc(tb.Text, 4) 
```

（注意 tempObjNm = "TextBox1Store" 的值

当我打印 TextBox1Store 时，它​​打印 0

那个怎么样？难道不能使用字符串来模仿变量只是为了在其中存储值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:17:42.810

只需这样做：

```
Dim tb As TextBox = CType(sender, TextBox)
Me.Controls(tb.Name & "Store") = mqtyCalc(CInt(someVariable.Text), CInt(Label1.Text)) 
```

我强烈建议你做几件事。首先，在您的项目属性中启用`Option Strict On`，因为它将改进您的编程实践。而且，正如您在我的代码中看到的那样，在 VB.NET 中使用`&`而不是连接字符串。`+`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T16:49:09.927

你能用一个`Dictionary(Of String, Double)`吗？

```
Private values As New Dictionary(Of String, Double)

Private Sub TextBox1_TextChanged(sender As Object, e As EventArgs) Handles TextBox1.TextChanged
    setValue(sender)
End Sub

Private Sub setValue(sender As Object)
    Dim tb As TextBox = CType(sender, TextBox)
    Dim tbName As String = tb.Name & "Strore"
    If Not values.ContainsKey(tbName) Then
        values.Add(tbName, tb.Text)
    Else
        values(tbName) = tb.Text
    End If
End Sub

Private Function getValue(sender As Object) As Double
    Dim tbName As String = CType(sender, TextBox).Name & "Strore"
    If Not values.ContainsKey(tbName) Then
        Return Double.NaN
    Else
        Return values(tbName)
    End If
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-04T07:20:30.670

我想分享我正在使用的代码。希望这有助于这个问题的未来观众。

```
Dim tb As TextBox = sender
Dim tempObjNm As String
tempObjNm =    tb.Name + "Strore"
Me.GetType.GetField(tempObjNm).SetValue(Me, CType(mqtyCalc(someVariable.Text, Label1.Text), Double)) 
```

# javascript - 如何选择 in JavaScript

[问问题](https://stackoverflow.com/questions/ask)问问题 2013-03-12T08:09:03.957378 次This question shows research effort; it is useful and clear-2This question does not show any research effort; it is unclear or not usefulBookmark this question.Show activity on this post.

I would need to select the style element in the head of an html page and remove it from the dom, without using jquery.

Any idea how to do it?

* * *

```
<html>
 <head>
 <style type="text/css">
 p {
 color:blue;
 }
 </style>
 </head>
 <body>
 <p>A paragraph.</p>
 </body>
</html> 
```

I am trying this code with no success:

```
var styleSheetList = document.styleSheets;
document.styleSheets.length = 0;
console.log('+++ styleSheetList ELEMENT' + styleSheetList); 
```

[javascript](/tags/javascript "show questions tagged 'javascript'")[html](/tags/html "show questions tagged 'html'")4

## 2 回答 2

This answer is useful1

You can use `document.getElementsByTagName()` like this:

```
var els = document.getElementsByTagName( 'style' );
for( var i=els.length; i--; ) {
 els[i].parentNode.removeChild( els[i] );
} 
```

Note, however, that removing the `<style>` element will *not* remove the styles it introduced!

于 2013-03-12T08:11:57.107 回答This answer is useful0

Get the hold of the `<style>` tag and then you need to select the parent to remove it from DOM. *(Assuming, Style tag is the second tag in HEAD after TITLE)*

```
var styleTag = document.getElementsByTagName("style");
var headTag = styleTag[0].parentNode;
headTag.removeChild(headTag.childNodes[1]); 
```

The below code is generic, irrespective of the position of STYLE

```
var styleTag = document.getElementsByTagName("style");
var headTag = styleTag[0].parentNode;

for(var i=0; i<headTag.childNodes.length; i++)
{
 if(headTag.childNodes[i].nodeName === "STYLE")
 headTag.removeChild(headTag.childNodes[i]);
} 
```

于 2013-03-12T08:31:23.823 回答

#### Related

[6](/questions/16400099 "Question score (upvotes - downvotes)")[ruby - 在 Ruby 中搜索大文件的更简单方法？](/questions/16400099)[2](/questions/16400102 "Question score (upvotes - downvotes)")[javascript - 如何为数组/对象创建方法/函数](/questions/16400102)[2](/questions/16400105 "Question score (upvotes - downvotes)")[php - 统计所有 html、css、js 和 php 文件的目录中的所有行](/questions/16400105)[2](/questions/16400106 "Question score (upvotes - downvotes)")[c++ - 在黑莓 10 级联上创建 http 通信](/questions/16400106)[4](/questions/16400107 "Question score (upvotes - downvotes)")[jquery - 在鼠标悬停时显示隐藏元素](/questions/16400107)[1](/questions/16400108 "Question score (upvotes - downvotes)")[c# - DotNetBar DataGridView（Win Form）中如何从右到左滚动条 - C#](/questions/16400108)[1](/questions/16400109 "Question score (upvotes - downvotes)")[android - 在android中可见并消失的片段](/questions/16400109)[1](/questions/16400110 "Question score (upvotes - downvotes)")[xml - 修复 xslt 错误以进行验证](/questions/16400110)[1](/questions/16400114 "Question score (upvotes - downvotes)")[c++ - 在 CRTP 中的类内引用结构定义](/questions/16400114)[1](/questions/16400117 "Question score (upvotes - downvotes)")[android - 如何在 Android 中安排后台任务？](/questions/16400117)

#### Reference

[php](https://php.github.net.cn) × 1429865[c/c++](https://c-cpp.com) × 756500[nginx](https://nginx.github.net.cn) × 49975[mongodb](https://mongodb.net.cn) × 159057[mybatis](https://mybatis.net.cn) × 3233[anaconda](https://anaconda.org.cn) × 13410[pycharm](https://pycharm.net.cn) × 14671[python](https://python.github.net.cn) × 1902243[vscode](https://vscode.github.net.cn) × 56040[docker](https://dockerdocs.cn) × 110988[github](https://github.net.cn) × 49000[flask](https://flask.github.net.cn) × 49129[ffmpeg](https://ffmpeg.github.net.cn) × 24037[jmeter](https://jmeter.net) × 16910[matplotlib](https://matplotlib.net) × 63493[bootstrap](https://getbootstrap.net) × 54641[](https://stackoverflow.com)

##### [Stack Overflow 中文网](https://stackoverflow.org.cn)

遵从 CC BY-SA 知识共享许可协议。

> ID：15356110
> 
> 赞同：
> 
> 时间：
> 
> 标签：

None

# php - 如何修改我页面上的雅虎天气外观？

> ID：15356112
> 
> 赞同：1
> 
> 时间：2013-03-12T08:09:10.273
> 
> 标签：php, jquery, html, yahoo-weather-api

我刚刚在我的页面上获得了基本的雅虎天气提要......

以下代码呈现如下图像：

```
$ipaddress = $_SERVER['REMOTE_ADDR'];

// API username and key masked as sensitive and irrelevant to this question
$locationstr = "http://api.locatorhq.com/?user=MYAPIUSER&key=MYAPIKEY&ip=".$ipaddress."&format=xml";

$xml = simplexml_load_file($locationstr);

$city = $xml->city;

// We'll only be accounting for certain cities to start off with...
switch ($city)
{
    case "Pretoria":
        $loccode = "SFXX0044";

        $weatherfeed = file_get_contents("http://weather.yahooapis.com/forecastrss?p=".$loccode."&u=c");
        if (!$weatherfeed) die("weather check failed, check feed URL");
        $weather = simplexml_load_string($weatherfeed);

        readWeather($loccode);
        break;
}

function readWeather($loccode)
{
    $doc = new DOMDocument();
    $doc->load("http://weather.yahooapis.com/forecastrss?p=".$loccode."&u=c");

    $channel = $doc->getElementsByTagName("channel");

    foreach($channel as $ch)
    {
        $item = $ch->getElementsByTagName("item");

        foreach($item as $rcvd)
        {
            $desc = $rcvd->getElementsByTagName("description");

            // Save the weather data to a session variable for placement on the page
            $_SESSION["weather"] = $desc->item(0)->nodeValue;
        }
    }
} 
```

![我的雅虎天气数据](../Images/b1e02e9b4a1cd5116e21f93983e303fe.png)

在我看来，它看起来很糟糕，所以我想改变这里的整体设计以适应我网站的其他部分。

我有一个关于用 jquery 重写呈现的 html 的想法，但我没有得到任何地方。

这是我目前正在渲染的代码：

```
<div id="weather-feed">
    <img src="http://l.yimg.com/a/i/us/we/52/34.gif"/>
    <b>Current Conditions:</b>
    Partly Cloudy, 17 C
    <b>Forecast:</b>
    Tue - PM Thunderstorms. High: 26 Low: 16
    Wed - Mostly Sunny. High: 27 Low: 16

    <a href="http://us.rd.yahoo.com/dailynews/rss/weather/Pretoria__SF/*http://weather.yahoo.com/forecast/SFXX0044_c.html">Full Forecast at Yahoo! Weather</a>
    (provided by <a href="http://www.weather.com" >The Weather Channel</a>)
</div> 
```

基本上，我要做的就是修改这个呈现的代码，如下所示：

```
<div id="weather-feed">
    <div class="weather-icon">
        <img src="http://l.yimg.com/a/i/us/we/52/34.gif"/>
    </div>
    <div class="conditions">
        Partly Cloudy, 17 C
    </div>
    <div class="forecast">
        <b>Forecast:</b>
        Tue - PM Thunderstorms. High: 26 Low: 16
        Wed - Mostly Sunny. High: 27 Low: 16

        <a href="http://us.rd.yahoo.com/dailynews/rss/weather/Pretoria__SF/*http://weather.yahoo.com/forecast/SFXX0044_c.html">Full Forecast at Yahoo! Weather</a></div>
    <div class="credit">
        provided by <a href="http://www.weather.com" >The Weather Channel</a>
    </div>
</div> 
```

我没有任何运气找到任何可以指导我如何做到这一点的东西。

我可以利用任何 api 调用来获得我请求的数据的不同呈现方式吗？

如果没有，谁能建议我如何成功地重写这段代码？也许举个小例子......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:25:33.423

抓取你得到的结果 html 块，然后使用 jquery 修改它的废话。幸运的是，主 div 有一个不错的 id。您应该能够从主 html 块中获取单个块，例如

`<img ..../>`，并将其转储到第二个 html 块中，在其中添加`<div>`带有附加类的 s。类似的东西`alert($('div#weather-feed').html())`，例如这将打印整个块。跳过：`alert($('div#weather-feed img').attr("src"))`将为您提供 img 的 src。玩转，使用 html 并重建它。

续：假设您知道或可以弄清楚 jquery 的工作原理以及 document.ready() 是什么。Jquery 将成为您的朋友。我正在发布示例打击。看这个。它到处都有提示。 [如何弄乱一些html](http://jsfiddle.net/U5qDc/1/)

# r - 如何使用 R 识别时间序列数据中的病毒式增长率？

> ID：15356121
> 
> 赞同：-3
> 
> 时间：2013-03-12T08:09:58.983
> 
> 标签：r

我有两年的时间序列数据

```
12376 167827  3454596 9676112 342102 1232103 546102  5645696 96767110 23423119 
4577140  45435158 56767138 635435167 35443160 34534166 3213133 2132148 2342130 
7656127 43234117 56545130  5645138 56455149 
```

我想确定病毒式传播的增长率，然后绘制增长率图表。没有什么能像发送的邀请数量和转换为邀请的百分比一样。我想知道如何实现这一点，R 中是否有任何可用的软件包。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T08:49:46.823

虽然如果你不让你的问题更清楚，这个问题很可能会在接下来的几个小时内关闭，但这至少可以让你开始：

```
mydf <- scan(textConnection("12376 167827  3454596 9676112 342102 1232103 546102  5645696 96767110 23423119  4577140  45435158 56767138 635435167 35443160 34534166 3213133 2132148 2342130 7656127 43234117 56545130  5645138 56455149"), )
plot(mydf, log="y", type="l")  # Gives you an overview of your time serie (with log axis)
gr <- diff(mydf)/mydf[-length(mydf)] # Gives you a growth rate between each of your values.
par(new=TRUE)
plot((1:(length(mydf)-1))+0.5, gr, type="l",   # Plots your growth rate
      col="red", axes=FALSE, xaxt="n", yaxt="n")
axis(4) 
```

# jsp - 如何在jsp和servlet中显示文件上传进度条并实现了多部分过滤器？

> ID：15356128
> 
> 赞同：1
> 
> 时间：2013-03-12T08:10:24.987
> 
> 标签：jsp, servlets, file-upload, servlet-filters, multipartform-data

我正在使用 jsp 和 servlet 处理文件上传任务。我在 stackoverflow 上阅读了很多关于这个主题的问题和答案。我在stckoverflow上遇到了这个问题

[如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-to-server-using-jsp-servlet)

Balusc 对这个问题给出了一个很好的描述性答案。他还参考了他关于多部分过滤器的博客，这是一个完整的信息教程，带有完整的工作示例代码。链接在这里[http://balusc.blogspot.in/2007/11/multipartfilter.html](http://balusc.blogspot.in/2007/11/multipartfilter.html) 感谢 Stackoverflow 和 Balusc Sir 很好地解释了有关此任务的解决方案。

根据我对文件上传应用程序的要求，我已经在给定的示例中实现了相同的多部分过滤器代码和其他代码，并进行了少量修改。我的应用程序运行良好。

现在增强部分进入图片。我想用这个应用程序添加一个文件上传进度条，显示文件上传进度。我在网上搜索了这个问题，我找到了很多答案，但都是一团糟。任何人都可以通过上面博客中给出的示例正确解释如何添加进度条。我需要在哪里对上面博客中给出的代码进行更改以显示文件上传进度条。

我在 Windows 上使用 Apache Tomcat 服务器 6.0 Apache 文件上传库 commons-fileupload-1.2.2.jar 和 commons-io-2.4.jar Java 1.6，在 Linux 上使用 OpenJDk 7

请朋友们指导我解决这个问题。

感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-11T15:26:26.440

我刚刚尝试了使用与您使用的库版本完全相同的单个文件上传的进度条，请参阅[fileupload_progressbar.jsp](https://github.com/benbai123/JSP_Servlet_Practice/blob/master/Practice/Tools/FileUpload/WebContent/fileupload_progressbar.jsp)和[UploadProgressServlet.java](https://github.com/benbai123/JSP_Servlet_Practice/blob/master/Practice/Tools/FileUpload/src/test/UploadProgressServlet.java)。

为servlet添加一个进度监听器，将进度值保存在某个地方，然后您可以通过ajax获取进度值并根据需要更新客户端进度条的状态。

希望这可以帮助。

# eclipse - 无法在 Eclipse 上添加 tomcat

> ID：15356131
> 
> 赞同：0
> 
> 时间：2013-03-12T08:10:43.693
> 
> 标签：eclipse, tomcat7

我尝试在eclipse上添加tomcat我做了窗口--->首选项--->服务器----->运行时环境然后我点击添加。但是我在服务器列表中找不到tomcat。我得到像在图片中。当我进行一些研究时，我发现我应该使用大于 3.7 的 eclipse 版本。我使用 eclipse 3.8 和 apache-tomcat-7.0.34。任何人都可以帮助我可能是什么问题或有另一种配置？![在此处输入图像描述](../Images/5bb146bff14907e7b262f4475cc2c511.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T14:24:09.510

当我安装 Eclipse Helios 时，我可以获得服务器列表。问题已经解决了

# haml - 崇高文本2中的haml评论

> ID：15356134
> 
> 赞同：1
> 
> 时间：2013-03-12T08:10:48.463
> 
> 标签：haml, sublimetext2, sublimetext, textmatebundles

我在 Sublime Text 2 中下载了用于 haml 的 Textmate 包并执行了此操作（将评论从更改`/`为正确`-#`）：

[http://www.sublimetext.com/forum/viewtopic.php?f=4&t=3995](http://www.sublimetext.com/forum/viewtopic.php?f=4&t=3995)

好吧，现在**Ctrl+/**总是会给出`-#`哪个好。但我还想要另一个快捷键，`/`例如**Ctrl-#**。我如何在 Sublime Text 2 中做到这一点？基本上我想要快捷键`/`和`-#`评论。

谢谢大家！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:25:57.600

我自己没有做过这么多，但我相信你会想要编辑适当的键盘映射文件来创建一个新的快捷方式。

Sublime 在这里有一些关于此的文档：http: [//sublimetext.info/docs/en/reference/key_bindings.html](http://sublimetext.info/docs/en/reference/key_bindings.html)

# php - PHP脚本突然停止而没有任何错误

> ID：15356138
> 
> 赞同：0
> 
> 时间：2013-03-12T08:11:18.343
> 
> 标签：php, curl

我有一个 PHP 脚本，可以从我拥有的远程服务器下载带有直接链接的文件。有时是大文件 (~500-600 MB)，有时是小文件 (~50-100 MB)。

脚本中的一些代码：

```
$links[0]="file_1";
$links[0]="file_2";
$links[0]="file_3";

for($i=0;$i<count($links);$i++){

    $file_link=download_file($links[$i]); //this function downloads the file with curl and returns the path to the downloaded file in local server
    echo "Download complete";
    rename($file_link,"some other_path/..."); //this moves the downloaded file to some other location
    echo "Downloaded file moved";
    echo "Download complete";

} 
```

我的问题是，如果我下载大文件并从 Web 浏览器运行脚本，最多需要 5-10 分钟才能完成，并且脚本会回显到“下载完成”，然后它会完全死掉。我总是发现在脚本终止之前正在下载的文件是 100% 下载的。

另一方面，如果我从 Web 浏览器下载 50-100MB 之类的小文件或从命令 shell 运行脚本，则根本不会出现此问题并且脚本完全完成。

我为此使用自己的 VPS，并且在服务器中没有任何时间限制。没有致命错误或内存过载问题。

我也曾经`ssh2_sftp`从远程服务器复制文件。但是当我从网络浏览器运行时同样的问题。它总是下载文件，执行下一行然后死掉！很奇怪！

我应该怎么做才能克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:14:39.910

为确保您可以下载更大的文件，您必须确保有：

1.  足够的内存可用于 php
2.  最大执行时间限制设置得足够高。

从您所说的关于 ssh2_sftp （我假设您是通过 php 运行它）来看，您的问题是第二个问题。检查你的错误（-logs），看看这是否真的是你的错误。如果是这样，您只需在 settings/php.ini 中增加最大执行时间，这应该可以解决它。

注意：我建议您不要让 PHP 处理这些大文件。调用一些程序（通过`system()`或`exec()`）为您下载，因为 PHP 仍然存在垃圾收集问题。

# php - 以一对多关系连接codeigniter中的三个表

> ID：15356139
> 
> 赞同：3
> 
> 时间：2013-03-12T08:11:19.637
> 
> 标签：php, codeigniter, join

我正在codeigniter中做一个项目。这里我想加入三个表

客户（id、姓名、电子邮件、adminId、campaignId、dateAdded、is_deleted）

活动（id，名称，adminId）和

订单（id、名称、成本、添加日期、clientId）。

从这些表中，我想选择（在两个日期之间）添加的客户数量、活动名称和客户的总订单成本。当我加入两个表（客户和活动）时，它返回正确的结果。

我使用的查询是

```
$this->db->select('clients.id AS my_client,
    clients.name AS client_name,
    campaign.name AS campaign_name,
    DATE(clients.dateAdded) as client_date,
    COUNT(clients.id) AS num_rows');

$this->db->from('clients');
$this->db->where('clients.adminId', $adminId);
$this->db->where('DATE(clients.dateAdded) >=', $from_date);
$this->db->where('DATE(clients.dateAdded) <=', $to_date);
$this->db->join('campaign', 'campaign.id = clients.campaignId', 'left');
$this->db->group_by('campaign_name');
$query = $this->db->get();
return $query->result(); 
```

但是当我加入三个表（客户、活动、订单）时，它没有返回正确的结果。客户和订单之间的关系是一对多的。即一个客户可以有多个订单。所以它不会给出正确的总计值在两个日期之间添加的客户数量。我用来连接三个表的连接查询是

```
$this->db->select('clients.id AS my_client,
    clients.name AS client_name,
    campaign.name AS campaign_name,
    DATE(clients.dateAdded) AS client_date,
    SUM(order.cost) AS order_cost,
    COUNT(clients.id) AS num_rows');

$this->db->from('clients');
$this->db->where('clients.adminId', $adminId);
$this->db->where('clients.is_deleted', 0);
$this->db->where('DATE(clients.dateAdded) >=', $from_date);
$this->db->where('DATE(clients.dateAdded) <=', $to_date);
$this->db->join('campaign', 'campaign.id = clients.campaignId', 'left');
$this->db->join('order', 'order.clientId = clients.id', 'left');
$this->db->group_by('campaign_name');
$query = $this->db->get();
return $query->result(); 
```

任何人都可以有一些想法来做到这一点。在此先感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T04:15:33.237

我通过计算添加的客户数量的不同 client.id (COUNT(DISTINCT(clients.id))) 得到了预期的结果，

```
$this->db->select('clients.id AS my_client,
    clients.name AS client_name,
    campaign.name AS campaign_name,
    DATE(clients.dateAdded) AS client_date,
    SUM(order.cost) AS order_cost,
    COUNT(DISTINCT(clients.id)) AS num_rows'); //changed the code here from COUNT(clients.id) AS num_rows

$this->db->from('clients');
$this->db->where('clients.adminId', $adminId);
$this->db->where('clients.is_deleted', 0);
$this->db->where('DATE(clients.dateAdded) >=', $from_date);
$this->db->where('DATE(clients.dateAdded) <=', $to_date);
$this->db->join('campaign', 'campaign.id = clients.campaignId', 'left');
$this->db->join('order', 'order.clientId = clients.id', 'left');
$this->db->group_by('campaign_name');
$query = $this->db->get();
return $query->result(); 
```

我认为这不是正确的方法。有没有更好的方法可以做到这一点。感谢您的支持。

# java - 解析 JSON 数组时出错，DOCTYPE

> ID：15356142
> 
> 赞同：2
> 
> 时间：2013-03-12T08:11:29.537
> 
> 标签：java, android, json, eclipse, parsing

我有一个工作列表视图，它从我的数据库接收 JSON。但是当我尝试使用此链接时：我收到“解析数据时出错 org.json.JSONException：值

JSON 输出很干净，应该可以工作！我的活动

```
package com.spxc.ssa.streaming;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ProgressDialog;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;

import com.actionbarsherlock.app.SherlockListActivity;
import com.actionbarsherlock.view.MenuItem;
import com.spxc.ssa.streaming.task.JsonAsync;
import com.spxc.ssa.streaming.task.JsonAsync.JsonListener;

public class ListShowsController extends SherlockListActivity implements
        OnClickListener {

    private ProgressDialog mDialog;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // getWindow().setFormat(PixelFormat.TRANSLUCENT);
        setContentView(R.layout.dblist);
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        getSupportActionBar().setTitle("Shows");

        JsonAsync asyncTask = new JsonAsync();
        // Using an anonymous interface to listen for objects when task
        // completes.
        asyncTask.setJsonListener(new JsonListener() {
            @Override
            public void onObjectReturn(JSONObject object) {
                handleJsonObject(object);
            }
        });
        // Show progress loader while accessing network, and start async task.
        mDialog = ProgressDialog.show(this, getSupportActionBar().getTitle(),
                getString(R.string.loading), true);
        asyncTask.execute("");

    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            finish();
            break;
        }
        return false;
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

    private void handleJsonObject(JSONObject object) {
        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        try {

            JSONArray shows = object.getJSONArray("items");

            for (int i = 0; i < shows.length(); i++) {
                HashMap<String, String> map = new HashMap<String, String>();
                JSONObject e = shows.getJSONObject(i);

                map.put("video_id", String.valueOf(i));
                map.put("video_title", "" + e.getString("video_title"));
                //map.put("season", "Season: " + e.getString("season"));
                map.put("video_location", "" + e.getString("video_location"));
                mylist.add(map);
            }
        } catch (JSONException e) {
            Log.e("log_tag", "Error parsing data " + e.toString());
        }

        ListAdapter adapter = new SimpleAdapter(this, mylist, R.layout.dbitems,
                new String[] { "video_title", "video_location" }, new int[] { R.id.item_title,
                        R.id.item_subtitle });

        setListAdapter(adapter);

        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);
        lv.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                @SuppressWarnings("unchecked")
                HashMap<String, String> o = (HashMap<String, String>) lv
                        .getItemAtPosition(position);

                Intent myIntent = new Intent(ListShowsController.this,
                        ShowsController.class);
                myIntent.putExtra("video_title", o.get("video_title"));
                //myIntent.putExtra("season", o.get("season"));
                myIntent.putExtra("video_location", o.get("video_location"));
                startActivity(myIntent);
            }
        });

        if (mDialog != null && mDialog.isShowing()) {
            mDialog.dismiss();
        }
    }

} 
```

异步任务

```
package com.spxc.ssa.streaming.task;

import org.json.JSONObject;

import android.os.AsyncTask;
import android.util.Log;

public class JsonAsync extends AsyncTask<String, Void, JSONObject> {

    public interface JsonListener {
        public void onObjectReturn(JSONObject object);
    }

    public void setJsonListener(JsonListener jsonListener) {
        mListener = jsonListener;
    }

    private JsonListener mListener;
    public static final String TAG = JsonAsync.class.getSimpleName();

    @Override
    protected JSONObject doInBackground(String... params) {
        // The argument passed into tasks are arrays. So you can pass 0 or more
        // arguments, when calling from activity, it's really up to you. They
        // just have to be separated by commas. Like this :
        // new JsonAsync.execute("thisUrl", "thatUrl", "anotherUrl");
        // Although I am only grabbing the first item in the array, by calling
        // params[0] below.

        JSONObject object = null;

        if (params != null && params.length > 0) {
            object = JSONfunctions.getJSONfromURL(params[0]);
        } else {
            Log.e(TAG, "Task needs an argument to be able to retrieve data.");
        }

        // I return the item out of this method, because it is happening of the
        // UI thread, so it can;t update items on the screen. You can work with
        // a database from this method. That is actually recommended.
        return object;
    }

    @Override
    protected void onPostExecute(JSONObject result) {
        // This method can touch UI components without throwing an error.
        if (result != null && mListener != null) {
            mListener.onObjectReturn(result);
        }
        super.onPostExecute(result);
    }
} 
```

我以前从未见过这个错误！问题是什么？

任何帮助深表感谢 ！谢谢

编辑：我的其他活动有效：

```
package com.spxc.ssa.streaming;

import java.util.ArrayList;
import java.util.HashMap;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.ProgressDialog;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;

import com.actionbarsherlock.app.SherlockListActivity;
import com.actionbarsherlock.view.MenuItem;
import com.spxc.ssa.streaming.task.JsonAsync;
import com.spxc.ssa.streaming.task.JsonAsync.JsonListener;

public class ListMoviesController extends SherlockListActivity implements
        OnClickListener {

    private ProgressDialog mDialog;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        // getWindow().setFormat(PixelFormat.TRANSLUCENT);
        setContentView(R.layout.dblist);
        getSupportActionBar().setDisplayHomeAsUpEnabled(true);
        getSupportActionBar().setTitle("Movies");

        JsonAsync asyncTask = new JsonAsync();
        // Using an anonymous interface to listen for objects when task
        // completes.
        asyncTask.setJsonListener(new JsonListener() {
            @Override
            public void onObjectReturn(JSONObject object) {
                handleJsonObject(object);
            }
        });
        // Show progress loader while accessing network, and start async task.
        mDialog = ProgressDialog.show(this, getSupportActionBar().getTitle(),
                getString(R.string.loading), true);
        asyncTask.execute("http://strongpixel.com/java/movies.php");

    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case android.R.id.home:
            finish();
            break;
        }
        return false;
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

    private void handleJsonObject(JSONObject object) {
        ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

        try {

            JSONArray shows = object.getJSONArray("items");

            for (int i = 0; i < shows.length(); i++) {
                HashMap<String, String> map = new HashMap<String, String>();
                JSONObject e = shows.getJSONObject(i);

                map.put("id", String.valueOf(i));
                map.put("name", "" + e.getString("name"));
                //map.put("date", "Released: " + e.getString("date"));
                map.put("path", "" + e.getString("path"));
                mylist.add(map);
            }
        } catch (JSONException e) {
            Log.e("log_tag", "Error parsing data " + e.toString());
        }

        ListAdapter adapter = new SimpleAdapter(this, mylist, R.layout.dbitems,
                new String[] { "name", "path" }, new int[] { R.id.item_title,
                        R.id.item_subtitle });

        setListAdapter(adapter);

        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);
        lv.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> parent, View view,
                    int position, long id) {
                @SuppressWarnings("unchecked")
                HashMap<String, String> o = (HashMap<String, String>) lv
                        .getItemAtPosition(position);

                Intent myIntent = new Intent(ListMoviesController.this,
                        MoviesController.class);
                myIntent.putExtra("name", o.get("name"));
                myIntent.putExtra("season", o.get("season"));
                myIntent.putExtra("path", o.get("path"));
                startActivity(myIntent);
            }
        });

        if (mDialog != null && mDialog.isShowing()) {
            mDialog.dismiss();
        }
    }

} 
```

日志猫：

```
03-12 08:35:18.722: E/log_tag(25208): Error parsing data org.json.JSONException: Value <!DOCTYPE of type java.lang.String cannot be converted to JSONObject
03-12 09:06:52.877: V/CustomViewAbove(26397): Received ACTION_DOWN
03-12 09:06:52.920: V/CustomViewAbove(26397): onInterceptTouch moved to:(30.26232, 662.0), diff:(29.26232, 1.0), mLastMotionX:1.0
03-12 09:06:52.936: V/CustomViewAbove(26397): onInterceptTouch moved to:(73.95948, 663.08905), diff:(72.95948, 0.08905029), mLastMotionX:1.0
03-12 09:06:52.940: V/CustomViewAbove(26397): this slide allowed true dx: 72.95948
03-12 09:06:52.940: V/CustomViewAbove(26397): Starting drag! from onInterceptTouch
03-12 09:06:52.993: V/SlidingMenu(26397): changing layerType. hardware? true
03-12 09:06:53.229: V/SlidingMenu(26397): changing layerType. hardware? false
03-12 09:06:54.214: V/CustomViewAbove(26397): Received ACTION_DOWN
03-12 09:06:54.450: D/dalvikvm(26397): GC_CONCURRENT freed 73K, 7% free 4495K/4812K, paused 3ms+6ms, total 24ms
03-12 09:06:55.025: E/log_tag(26397): Error parsing data org.json.JSONException: Value <!DOCTYPE of type java.lang.String cannot be converted to JSONObject 
```

编辑：我尝试了相同的 JSON，但只是在一个 txt 文件 strongpixel.com/java/JSON.txt 中，这没有任何问题，加载需要一些时间，但它可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:51:07.750

您无法使其正常工作，因为您的代码无法加载正确的 JSON 字符串。只有一个地方可以下载：

```
JSONfunctions.getJSONfromURL(params[0]) 
```

您会得到明显的错误：JSON 对象不能从字符串创建，例如`<!doctype html>`. 这意味着您下载的是 HTML 数据而不是 JSON。对于简单的测试，您可以尝试下一个代码，您将得到相同的错误：

```
JSONObject object = new JSONObject("<!DOCTYPE html>"); 
```

您可能会从多种原因得到这个错误的响应：如果您不指定 User-Agent 标头或不执行授权，错误的请求、您的防火墙、代理甚至服务器都可能返回错误的结果。我确实建议使用一些 Web 调试工具来帮助您处理此类情况并确保您的应用程序接收到有效数据。如果您使用的是 Windows，我建议您使用 Fiddler，它是免费的。以下是如何为您的测试设备设置提琴手的示例：http: [//www.cantoni.org/2011/06/28/debug-http-android-fiddler](http://www.cantoni.org/2011/06/28/debug-http-android-fiddler) 无论如何，其他操作系统都有替代工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:27:29.353

我让它工作了！这是一个简单而愚蠢的错误。我连接的服务器不允许 POST 所以在适配器中我将 Httppost 更改为 Httpget

# java - 上传日文和中文的文件名编码问题

> ID：15356147
> 
> 赞同：8
> 
> 时间：2013-03-12T08:11:44.403
> 
> 标签：java, file-upload, encoding, character-encoding

我目前正在使用[jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)。我可能上传了一些文件名是日文或中文的文件，在浏览器的调试模式下我可以看到文件名是例如“お疲れ様です.txt”或“测试文档.txt”，但在后端（Java） ，它们变成“ã�Šç–²ã‚Œæ§～ã�§ã�™.txt”和“æµ‹è¯•æ–‡æ¡£.txt”。
我曾经尝试将*formAcceptCharset*设置为**UTF-8**，但它不起作用。
问题：
解析MultipartFormData时如何在Java端获取正确的文件名？

提前致谢。

顺便说一句，以下是我的数据

```
-----------------------------25382434931419
Content-Disposition: form-data; name="file"; filename="ã?Šç–²ã‚Œæ§˜ã?§ã?™.txt"
Content-Type: text/plain
.... 
```

***添加Java代码***
实际上我目前在Java方面什么都没做，

```
@POST
@Consumes(MediaType.MULTIPART_FORM_DATA)
public String upload(InMultiPart inMP) {
    while (inMP.hasNext()) {
        InPart part = inMP.next();
        MultivaluedMap<String, String> headers = part.getHeaders();
        String fileName = null;
        if (!headers.containsKey("Content-Disposition")) {
            continue;
        } else {
            // get the file name here
            fileName = parseFileName(headers.getFirst("Content-Disposition"));
        }
        //.....
    }
    //......
}

private String parseFileName(String disposition) {
    int fileNameIndex = disposition.indexOf("filename=");
    if (fileNameIndex < 0) {
        return null;
    }
    int start = disposition.indexOf("\"", fileNameIndex) + 1;
    int end = disposition.indexOf("\"", start);
    return  disposition.substring(start, end);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-27T14:17:08.153

正如斯蒂芬 C 所说，可以使用过滤器来获得正确的编码。我们在 JBOSS 7.1.1 上遇到了这个问题并实现了一个过滤器。

在网页 xml 中

```
<filter>
    <display-name>set character encoding</display-name>
    <filter-name>RequestEncodingFilter</filter-name>
    <filter-class>com.myapp.RequestEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
</filter>
<filter-mapping>
    <filter-name>RequestEncodingFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

过滤器类：

```
public class RequestEncodingFilter implements Filter {

private static final String ENCODING = "encoding";
private String configuredEncoding;

@Override
public void init(FilterConfig filterConfig) throws ServletException {
    configuredEncoding = filterConfig.getInitParameter(ENCODING);
}

@Override
public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {
    servletRequest.setCharacterEncoding(configuredEncoding);
    filterChain.doFilter(servletRequest, servletResponse);
}

@Override
public void destroy() {
} 
```

}

# sitecore - Sitecore - 未定义根项目

> ID：15356149
> 
> 赞同：7
> 
> 时间：2013-03-12T08:11:53.863
> 
> 标签：sitecore

我在尝试使用 TDS 进行部署时遇到了以下错误。我不相信有任何自定义索引。我查看了以下链接并清除了我的 \Data\Indexes 文件夹。

[Sitecore 索引错误 - 未定义根项目](https://stackoverflow.com/questions/14319983/sitecore-index-error-root-item-not-defined)

什么会导致此错误？

这也是我收到错误的网址：`http://<hostname>/sitecore`

完整的堆栈跟踪：

```
[InvalidOperationException: Root item is not defined]
   Sitecore.Diagnostics.Assert.IsNotNull(Object value, String message) +59
   Sitecore.Search.Crawlers.DatabaseCrawler.Initialize(Index index) +106
   Sitecore.Search.Index.AddCrawler(ICrawler crawler) +36

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   System.RuntimeMethodHandle._InvokeMethodFast(Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeTypeHandle typeOwner) +0
   System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks) +1255
   System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture) +38
   Sitecore.Reflection.ReflectionUtil.InvokeMethod(MethodInfo method, Object[] parameters, Object obj) +91
   Sitecore.Configuration.Factory.AssignProperties(Object obj, Object[] properties) +760
   Sitecore.Configuration.Factory.AssignProperties(XmlNode configNode, String[] parameters, Object obj, Boolean assert, Boolean deferred, IFactoryHelper helper) +943
   Sitecore.Configuration.Factory.CreateObject(XmlNode configNode, String[] parameters, Boolean assert, IFactoryHelper helper) +305
   Sitecore.Configuration.Factory.GetInnerObject(XmlNode paramNode, String[] parameters, Boolean assert) +858
   Sitecore.Configuration.Factory.AssignProperties(XmlNode configNode, String[] parameters, Object obj, Boolean assert, Boolean deferred, IFactoryHelper helper) +795
   Sitecore.Configuration.Factory.CreateObject(XmlNode configNode, String[] parameters, Boolean assert, IFactoryHelper helper) +305
   Sitecore.Configuration.Factory.CreateObject(String configPath, String[] parameters, Boolean assert) +395
   Sitecore.Search.SearchManager.get_SearchConfig() +71
   Sitecore.Search.SearchManager.GetIndex(String id) +43
   Sitecore.Shell.Applications.ShellForm.OnLoad(EventArgs e) +1331

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   System.RuntimeMethodHandle._InvokeMethodFast(Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeTypeHandle typeOwner) +0
   System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks) +1255
   System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture) +38
   Sitecore.Reflection.ReflectionUtil.InvokeMethod(MethodInfo method, Object[] parameters, Object obj) +91
   Sitecore.Web.UI.Sheer.ClientPage.OnLoad(EventArgs e) +332
   System.Web.UI.Control.LoadRecursive() +66
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2428 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T09:50:48.110

如果您浏览到此页面 http://[yourhostname]/sitecore/admin/showconfig.aspx

搜索**索引**元素的任何实例并检查`<Root>path here</Root>`内容树中实际存在的节点路径

有关示例，请参见默认索引

```
<index id="system" type="Sitecore.Search.Index, Sitecore.Kernel">
<param desc="name">$(id)</param>
<param desc="folder">__system</param>
<Analyzer ref="search/analyzer"/>
<locations hint="list:AddCrawler">
<core type="Sitecore.Search.Crawlers.DatabaseCrawler,Sitecore.Kernel">
<Database>core</Database>
<Root>/sitecore/content</Root>
<include hint="list:IncludeTemplate">
<application>{EB06CEC0-5E2D-4DC4-875B-01ADCC577D13}</application>
</include>
<Tags>application</Tags>
<Boost>2.0</Boost>
</core>
<core-controlpanel type="Sitecore.Search.Crawlers.DatabaseCrawler,Sitecore.Kernel">
<Database>core</Database>
<Root>/sitecore/content/applications/control panel</Root>
<include hint="list:IncludeTemplate">
<taskoption>{BDB6FA46-2F76-4BDE-8138-52B56C2FC47E}</taskoption>
</include>
<Tags>taskoption</Tags>
<Boost>1.9</Boost>
</core-controlpanel>
<master type="Sitecore.Search.Crawlers.DatabaseCrawler,Sitecore.Kernel">
<Database>master</Database>
<Tags>master content</Tags>
</master>
</locations>
</index> 
```

更正任何无效的 Root 值后，该站点应再次运行。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-18T01:43:55.830

## 问题原因

This problem usually occurs when an **Sitecore lucene index** has been **declared** but the `<Root>` it refers to is **not in the database**.

Note: If the database the index targets is web this may be cause you haven't `published` the items.

## Issue fix

Because you can't get to the Sitecore desktop you'll have to comment out the index causing the issue. If you don't know which one it is you have to use plain old trial and error because sitecore won't tell you.

To see all indexes you have declared in your system go to `http://[yourhostname]/sitecore/admin/showconfig.aspx` and search for `<index`. This is the combination of all configuration declared in App_Config.

An index will look like this:

```
<index id="MyIndexId" type="Sitecore.Search.Index, Sitecore.Kernel"> 
```

Once you find the culprit comment it out then create or deploy the missing root item in Sitecore. Once that's done add the index back in.

# youtube-api - Youtube API - 没有开发者密钥的限制

> ID：15356151
> 
> 赞同：3
> 
> 时间：2013-03-12T08:12:00.583
> 
> 标签：youtube-api, quota

对于我们的客户，我们使用 Youtube API v2 来获取带有特定标签的最新视频。我们在没有开发人员密钥的情况下获取了 URL 的响应。直到几天前，这一切都很好。突然，我们没有得到任何结果。我们没有得到错误，而是得到了 0 个结果。

经过一番困惑，我们发现这是因为我们可能超出了请求的限制。这是基于以下事实得出的结论：当我们使用 3G 移动设备访问与连接 WiFi 的笔记本电脑相同的 URL 时，我们得到了结果。

我的问题是这样的：

1.  如果我们超出限制，是否有可能在我们的请求中出现错误？
2.  不使用开发人员密钥时的限制究竟是什么？
3.  是否有高级帐户可用于获取更多请求？

提前致谢！

**[编辑]** 当我们请求 URL [https://gdata.youtube.com/feeds/api/users/AEGON/uploads?category=2012Q4&alt=json](https://gdata.youtube.com/feeds/api/users/AEGON/uploads?category=2012Q4&alt=json)时，我们得到以下 JSON 响应：

（由于 Stack Overflow 上的声誉，我删除了一些链接）

```
{
    "version": "1.0",  
    "encoding": "UTF-8",  
    "feed": {  
        "xmlns": "",  
        "xmlns$openSearch": "",  
        "id": {  
            "$t": ""  
        },  
        "updated": {  
            "$t": "2013-03-12T08:35:47.226Z"  
        },  
        "category": [{  
            "scheme": "",  
            "term": ""  
        }],  
        "title": {  
            "$t": "Uploads by AEGON",  
            "type": "text"  
        },  
        "logo": {  
            "$t": ""  
        },  
        "link": [{  
            "rel": "related",  
            "type": "application/atom+xml",  
            "href": ""  
        },  
        {  
            "rel": "alternate",  
            "type": "text/html",  
            "href": ""  
        },  
        {  
            "rel": "",  
            "type": "application/atom+xml",  
            "href": ""  
        },  
        {  
            "rel": "",  
            "type": "application/atom+xml",  
            "href": ""  
        },  
        {  
            "rel": "self",  
            "type": "application/atom+xml",  
            "href": "https://gdata.youtube.com/feeds/api/users/AEGON  /uploads?alt=json&start-index=1&max-results=25&category=%7Bhttp://gdata.youtube.com/schemas/2007/keywords.cat%7D2012Q4"  
        }],  
        "author": [{  
            "name": {  
                "$t": "AEGON"  
            },  
            "uri": {  
                "$t": ""  
            }  
        }],  
        "generator": {  
            "$t": "YouTube data API",  
            "version": "2.1",  
            "uri": ""  
        },  
        "openSearch$totalResults": {  
            "$t": 0  
        },  
        "openSearch$startIndex": {  
            "$t": 1  
        },  
        "openSearch$itemsPerPage": {  
            "$t": 25  
        }  
    }  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:39:12.773

回答你的问题，

1.  您将收到一个代码为 403 的 HTTP 响应和一个响应正文，其中包括

    ```
     [<errors><error><domain>yt:quota</domain><code>too_many_recent_calls</code></error></errors>] 
    ```

    过度要求。

2.  没有这个限制，您需要停止请求 10 到 15 分钟。收到错误后。

3.  对此没有任何想法。

参考：[http ://apiblog.youtube.com/2010/02/best-practices-for-avoiding-quota.html](http://apiblog.youtube.com/2010/02/best-practices-for-avoiding-quota.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:35:35.620

根据 youtube 文档，您将收到一条错误消息，告知您已超出配额。

检查[操作限制](https://developers.google.com/youtube/faq#operation_limits)

# ios5 - AIR SDK升级到3.6后iOS项目无法运行

> ID：15356152
> 
> 赞同：1
> 
> 时间：2013-03-12T08:12:02.053
> 
> 标签：ios5, air

那是一个非常简单的 flash iOS 项目，带有`FB 4.7`,`AIR SDK 3.6`和`iPad2(5.1.1)`.

当我使用默认值进行调试时`AIR SDK 3.4`，`FB 4.7`项目运行正常。但是，当我根据[Adob​​e](http://helpx.adobe.com/flash-builder/kb/overlay-air-sdk-flash-builder.html)`AIR SDK`的帮助升级到. 调试器无法连接到正在运行的进程，并且“hello world”也没有显示。`3.6``FB 4.7`

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T04:04:50.270

我知道问题出在哪里。

[关键是 Adob​​e AIR SDK 升级帮助](http://helpx.adobe.com/flash-builder/kb/overlay-air-sdk-flash-builder.html)中的第 4 步。

将 AIR SDK 备份的 aot 文件夹 (AIRSDK_back_up\lib\aot) 中的内容复制到新创建的 AIR SDK (AIRSDK\lib\aot) 的 aot 文件夹中。

不要从 aot 文件夹中复制所有内容，只需将**条带**从 lib\aot\bin 复制到新创建的 AIR SDK 3.6 (AIRSDK\lib\aot\bin) 的 aot bin 文件夹中。

然后，我重新启动 FB 4.7，“hello world！” 也显示。

# image - 卷积矩阵是如何工作的？

> ID：15356153
> 
> 赞同：2
> 
> 时间：2013-03-12T08:12:04.763
> 
> 标签：image, image-processing, convolution

这些矩阵是如何工作的？我是否需要对每个像素进行多个处理？没有周围像素的左上、右上、左下和左下像素怎么样？矩阵是从左到右，从上到下，还是先从上到下，然后从左到右？

为什么这个内核（边缘增强）：http: [//i.stack.imgur.com/d755G.png](http://i.stack.imgur.com/d755G.png) 变成这个图像：http: [//i.stack.imgur.com/NRdkK.jpg](http://i.stack.imgur.com/NRdkK.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T19:08:43.643

卷积过滤器应用于每个像素。

在边缘，您可以做一些事情（都留下一种边框或缩小图像）：

1.  跳过边缘并从图像边缘裁剪 1 个像素
2.  将 0 或 255 替换为图像超出范围的任何像素
3.  使用介于 0（或 255）和图像边缘像素值之间的三次样条（或其他插值方法）来得出替代值。

应用卷积的顺序无关紧要（从右上到左下最常见），无论顺序如何，您都应该得到相同的结果。

但是，应用卷积矩阵时的一个常见错误是用新值覆盖您正在检查的当前像素。这将影响您为当前像素旁边的像素得出的值。更好的方法是创建一个缓冲区来保存计算值，以便卷积滤波器的先前应用不会影响矩阵的当前应用。

从您的示例图像中，很难说出为什么应用的过滤器会在没有看到原始图像的情况下创建黑白版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-30T01:29:25.950

Below is a step by step example of applying a convolution kernel to an image (1D for simplicity).

![Step by step convolution example](../Images/5f5c42b14727003d98be5444ccfdb957.png)

As for the edge enhancement kernel in your post, notice the +1 next to the -1\. Think about what that will do. If the region is constant the two pixel under the +/-1 will add to zero (black). If the two pixels are different they will have a non-zero value. So what you are seeing is that pixels next to each other that are different get highlighted, while ones that are the same get set to black. The bigger the difference the brighter (more white) the pixel in the filtered image.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-12T12:23:58.553

是的，您将每个像素与该矩阵相乘。传统的方法是找到相对于被卷积的像素的相关像素，乘以因子，然后将其平均。所以 3x3 模糊：

```
1, 1, 1,
1, 1, 1,
1, 1, 1 
```

该矩阵意味着您获取各种组件的相关值并将它们相乘。然后除以元素的数量。所以你会得到 3 乘 3 的框，将所有红色值相加然后除以 9。你会得到 3 乘 3 框，将所有绿色值相加然后除以 9。你会得到 3 乘 3框，将所有蓝色值相加，然后除以 9。

[![http://intellabs.github.io/RiverTrail/tutorial/ 卷积图像。](../Images/32f132e3e5d0cf9c7992760d5ed1d2f8.png)](https://i.stack.imgur.com/6zX2c.png)

这意味着几件事。首先，您需要第二块巨大的内存来执行此操作。你尽你所能。

但是，这仅适用于传统方法，而传统方法实际上是不必要的复杂化（明白吗？）。如果您在角落返回结果。您实际上不需要任何额外的内存，并且始终在您开始使用的内存占用空间内完成整个操作。

```
public static void convolve(int[] pixels, int offset, int stride, int x, int y, int width, int height, int[][] matrix, int parts) {
    int index = offset + x + (y*stride);
    for (int j = 0; j < height; j++, index += stride) {
        for (int k = 0; k < width; k++) {
            int pos = index + k;
            pixels[pos] = convolve(pixels,stride,pos, matrix, parts);
        }
    }
}

private static int crimp(int color) {
    return (color >= 0xFF) ? 0xFF : (color < 0) ? 0 : color;
}

private static int convolve(int[] pixels, int stride, int index, int[][] matrix, int parts) {
    int redSum = 0;
    int greenSum = 0;
    int blueSum = 0;

    int pixel, factor;

    for (int j = 0, m = matrix.length; j < m; j++, index+=stride) {
        for (int k = 0, n = matrix[j].length; k < n; k++) {
            pixel = pixels[index + k];
            factor = matrix[j][k];

            redSum += factor * ((pixel >> 16) & 0xFF);
            greenSum += factor * ((pixel >> 8) & 0xFF);
            blueSum += factor * ((pixel) & 0xFF);
        }
    }
    return 0xFF000000 | ((crimp(redSum / parts) << 16) | (crimp(greenSum / parts) << 8) | (crimp(blueSum / parts)));
} 
```

内核传统上将值返回到最中心的像素。这允许图像在边缘周围模糊，但或多或​​少地保留在它开始的位置。这似乎是个好主意，但实际上是有问题的。正确的做法是将结果像素放在左上角。然后，您可以简单地，无需额外内存，只需使用扫描线迭代整个图像，一次移动一个像素并返回值，而不会导致错误。大部分颜色权重向上和向左移动一个像素。但是，它是一个像素，如果你用右下角的结果像素向后迭代，你可以将它向下和向左移动。虽然这可能是缓存命中的麻烦。

然而，现在很多现代架构都有 GPU，所以整个图像可以同时完成。使它成为一种有争议的观点。但是，奇怪的是，图形中最重要的算法之一在要求这个时很奇怪，因为这使得最简单的操作方法变得不可能，并且会占用内存。

所以像马特这样的人在这个问题上会说“但是，应用卷积矩阵时的一个常见错误是用新值覆盖您正在检查的当前像素。” - 真的这是正确的方法，错误是将结果像素写入中心而不是左上角。因为与左上角不同，您将再次需要中心像素。您将不再需要左上角（假设您正在迭代左->右，上->下），因此将值存储在那里是安全的。

“这将影响您为当前像素旁边的像素得出的值。” -- 如果您在将其作为扫描处理时将其写入左上角，您将覆盖您不再需要的数据。使用一堆额外的内存并不是一个更好的解决方案。

因此，这可能是您见过的最快的 Java 模糊。

```
private static void applyBlur(int[] pixels, int stride) {
    int v0, v1, v2, r, g, b;
    int pos;
    pos = 0;
    try {
        while (true) {
            v0 = pixels[pos];
            v1 = pixels[pos+1];
            v2 = pixels[pos+2];

            r = ((v0 >> 16) & 0xFF) + ((v1 >> 16) & 0xFF) + ((v2 >> 16) & 0xFF);
            g = ((v0 >> 8 ) & 0xFF) + ((v1 >>  8) & 0xFF) + ((v2 >>  8) & 0xFF);
            b = ((v0      ) & 0xFF) + ((v1      ) & 0xFF) + ((v2      ) & 0xFF);
            r/=3;
            g/=3;
            b/=3;
            pixels[pos++] = r << 16 | g << 8 | b;
        }
    }
    catch (ArrayIndexOutOfBoundsException e) { }
    pos = 0;
    try {
    while (true) {
            v0 = pixels[pos];
            v1 = pixels[pos+stride];
            v2 = pixels[pos+stride+stride];

            r = ((v0 >> 16) & 0xFF) + ((v1 >> 16) & 0xFF) + ((v2 >> 16) & 0xFF);
            g = ((v0 >> 8 ) & 0xFF) + ((v1 >>  8) & 0xFF) + ((v2 >>  8) & 0xFF);
            b = ((v0      ) & 0xFF) + ((v1      ) & 0xFF) + ((v2      ) & 0xFF);
            r/=3;
            g/=3;
            b/=3;
            pixels[pos++] = r << 16 | g << 8 | b;
        }
    }
    catch (ArrayIndexOutOfBoundsException e) { }
} 
```

# sql-server - 文件流与本地保存在sql server中？

> ID：15356154
> 
> 赞同：11
> 
> 时间：2013-03-12T08:12:09.323
> 
> 标签：sql-server, database, security, filestream

我的应用程序在该用户注册后播放视频文件。（文件大于 100 MB）。

1.  **将它们存储在硬盘上**并将文件路径保存在数据库中 会更好吗？**还是** 我作为文件流类型存储在数据库中？

2.  当数据存储在数据库中时，与存储在硬盘中相比，防止操纵更安全吗？

3.  如何提供针对操纵的数据安全性？

谢谢 。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-12T09:03:14.767

Microsoft Research 有一篇非常好的论文，名为[To Blob 或 Not To Blob](http://research.microsoft.com/apps/pubs/default.aspx?id=64525)。

他们经过大量的性能测试和分析后得出的结论是：

*   如果您的图片或文档的大小通常低于 256K，则将它们存储在数据库的 VARBINARY 列中会更有效

*   如果您的图片或文档的大小通常超过 1 MB，则将它们存储在文件系统中会更有效（并且使用 SQL Server 2008 的`FILESTREAM`属性，它们仍处于事务控制之下并且是数据库的一部分）

*   在这两者之间，根据您的使用情况，这有点折腾

如果您决定将图片放入 SQL Server 表中，我强烈建议您使用单独的表来存储这些图片 - 不要将员工照片存储在员工表中 - 将它们保存在单独的表中。这样一来，`Employee`表格可以保持精简、平均且非常高效，假设您并不总是需要选择员工照片作为查询的一部分。

对于文件组，请查看[文件和文件组架构](http://msdn.microsoft.com/en-us/library/ms179316.aspx)以获得介绍。基本上，您可以从一开始就为大型数据结构创建带有单独文件组的数据库，或者稍后添加一个额外的文件组。让我们称之为`LARGE_DATA`。

现在，每当您要创建需要存储`VARCHAR(MAX)`或`VARBINARY(MAX)`列的新表时，您都可以为大数据指定此文件组：

```
 CREATE TABLE dbo.YourTable
     (....... define the fields here ......)
     ON Data                   -- the basic "Data" filegroup for the regular data
     TEXTIMAGE_ON LARGE_DATA   -- the filegroup for large chunks of data 
```

查看有关文件组的 MSDN 介绍，并尝试使用它！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T08:33:07.333

1 - 取决于您如何定义“更好”。一般来说，我更喜欢将二进制资产存储在数据库中，以便将它们与相关数据一起备份，但将它们缓存在文件系统中。从 SQL Server 流式传输二进制数据以进行页面请求是一种真正的性能消耗，而且它并不能真正扩展。

1.  如果攻击者可以进入您的硬盘驱动器，您的整个系统就会受到威胁 - 将内容存储在数据库中不会提供显着的额外安全性。

3 - 这本身就是一个完整的问题。对于堆栈溢出来说太宽了...

# shell - ssh 到另一个具有不同用户名的服务器

> ID：15356155
> 
> 赞同：3
> 
> 时间：2013-03-12T08:12:10.757
> 
> 标签：shell, unix, ssh, expect

我必须编写一个 shell 脚本，该脚本使用其他用户名 ssh 到另一台服务器，而实际上不要求用户输入密码？由于限制，我不能使用基于密钥的身份验证。let, 源服务器 -- abc.efg.com 源用户名 -- tom 源密码 -- tom123

目标服务器 -- xyz.efc.com 目标用户名 -- bob 目标密码 -- bob123

我必须将 bash 脚本放在源服务器中。请让我知道是否可以使用期望工具和/或 sshpass 完成某些事情。

我可以在 bash 脚本中硬编码目标服务器的密码，但我无法忍受交互式会话，只是当我运行他的脚本时，我想看到目标服务器使用另一个用户名登录。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T08:45:38.463

您想使用密钥验证[http://ornellas.apanela.com/dokuwiki/pub:ssh_key_auth](http://ornellas.apanela.com/dokuwiki/pub:ssh_key_auth)

1.  生成您的密钥**`ssh-keygen`**
2.  将密钥复制到新盒子**`ssh-copy-id -i ~/.ssh/id_rsa.pub me@otherhost.com`**
3.  ssh 到其他没有密码的主机**`ssh me@otherhost.com`**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T09:50:10.757

你可以使用expect来封装ssh，但是它很忙，并且在出现网络错误时很容易失败，所以好好测试一下或者使用专门为封装ssh密码而设计的脚本。基于密钥的身份验证更好。

您可以通过从空设备重定向标准输入来阻止交互式会话，即。

```
ssh me@destination destination-command < /dev/null 
```

关于将脚本放置在源服务器中，如果您正在运行的脚本是本地的，而不是远程的，那么您可以通过标准输入而不是命令行来传递脚本：

```
cat bashscript.sh | ssh me@destination 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T13:06:56.220

您可以安装该`sshpass`程序，它可以让您编写类似的脚本

```
#!/bin/bash

sshpass -p bob123 ssh UserName@xyz.efc.com 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T08:15:13.703

答案是您不能像 OpenSSH 那样主动阻止基于无头密码的身份验证。使用基于密钥的身份验证。

您也许可以分叉 OpenSSH 客户端代码并对其进行修补，但我认为这有点过分。

# sugarcrm - 如何删除登录页面 SugarCRM

> ID：15356158
> 
> 赞同：0
> 
> 时间：2013-03-12T08:12:22.033
> 
> 标签：sugarcrm, login-page

我正在做一个项目，我的任务是删除糖登录页面，以使网站看起来每个人都可以访问。我正在使用 SugarCE-6.5.11。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:16:06.763

您是否正在寻找 SSO 类型的解决方案？Sugar 原生支持 SAML 和 LDAP，因此您应该能够通过它们进行身份验证，而无需使用传统的登录屏幕。

[http://support.sugarcrm.com/02_Documentation/01_Sugar_Editions/05_Sugar_Community_Edition/Sugar_Community_Edition_6.4/Sugar_Community_Edition_Administration_Guide_6.4.0/03_Users#LDAP_Support](http://support.sugarcrm.com/02_Documentation/01_Sugar_Editions/05_Sugar_Community_Edition/Sugar_Community_Edition_6.4/Sugar_Community_Edition_Administration_Guide_6.4.0/03_Users#LDAP_Support)

或者，您可以做一些类似于我们为免费试用环境所做的事情，并覆盖登录屏幕以将登录信息嵌入到屏幕上的按钮中，在请求中传递用户名/密码。

# android - 具有不同重力和高度的单个文本视图中的两种不同样式

> ID：15356162
> 
> 赞同：8
> 
> 时间：2013-03-12T08:12:33.950
> 
> 标签：android, textview, android-styles

我正在寻找一个看起来像![在此处输入图像描述](../Images/4d0a9702b2c8864b76e47e3ba74696e1.png). 我已经使用下面的代码来实现这个..

```
SpannableString text;
    text = new SpannableString(bal_dollars.getText());
    int index = bal_dollars.getText().toString().indexOf(".");
    text.setSpan(new TextAppearanceSpan(getApplicationContext(),
            R.style.HeroGraphicBalanceSmallFont), index, bal_dollars
            .getText().toString().length(),
            Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
    bal_dollars.setText(text, TextView.BufferType.SPANNABLE); 
```

这是跨度中使用的样式..

```
<style name="HeroGraphicBalanceSmallFont" parent="@android:style/TextAppearance.Medium">
    <item name="android:layout_width">wrap_content</item>
    <item name="android:textSize">50sp</item>
    <item name="android:singleLine">true</item>
    <item name="android:layout_height">match_parent</item>
    <item name="android:layout_gravity">top|right</item>
    <item name="android:paddingBottom">30dp</item>
    <item name="android:gravity">top|right</item>
    <item name="android:textColor">@color/status_text</item>
    <item name="customFont">fonts/HeroicCondensedMedium.ttf</item>
</style> 
```

一切看起来都很好，除了目标文本范围的间距，即小数部分重力![在此处输入图像描述](../Images/ee0ddff0f02e96e245cbe5a196d63bbf.png)...... 我尝试了所有的 xml 属性。请帮忙

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T10:40:46.880

我破解了它。我发布此内容可能对其他人有所帮助，并感谢@kcoppock 的提示。我有扩展`MetricAffectingSpan`类，它以改变字符宽度或高度的方式影响字符级文本格式，扩展了这个类。

```
public class CustomCharacterSpan extends MetricAffectingSpan {
double ratio = 0.5;

public CustomCharacterSpan() {
}

public CustomCharacterSpan(double ratio) {
    this.ratio = ratio;
}

@Override
public void updateDrawState(TextPaint paint) {
    paint.baselineShift += (int) (paint.ascent() * ratio);
}

@Override
public void updateMeasureState(TextPaint paint) {
    paint.baselineShift += (int) (paint.ascent() * ratio);
}} 
```

使用它来更新视图中的文本..

```
String string = tv.getText().toString();
    SpannableString text = new SpannableString(tv.getText());
    int index = tv.getText().toString().indexOf(".");
    text.setSpan(new CustomCharacterSpan(), index, string.length(),
            SpannableString.SPAN_EXCLUSIVE_EXCLUSIVE);//u can use ur own ratio using another constructor
    tv.setText(text, TextView.BufferType.SPANNABLE); 
```

# gwt - GWT 中的 LazyPanel (Uibinder)

> ID：15356164
> 
> 赞同：2
> 
> 时间：2013-03-12T08:12:45.870
> 
> 标签：gwt, lazy-loading, uibinder

我想学习GWT的lazypanel的实用性。我想使用 Uibinder 来使用它。我已经编写了如下代码。我想将惰性面板用于 tablayoutpanel。

XML 文件

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">

<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
    xmlns:g="urn:import:com.google.gwt.user.client.ui" xmlns:d="urn:import:com.google.gwt.dom.client"
    xmlns:lazy="urn:import:abc.client">

<g:HTMLPanel>
    <lazy:Lazy1></lazy:Lazy1>
</g:HTMLPanel>

</ui:UiBinder> 
```

这是关联的 java 文件。Lazy1.java

```
package abc.client;

import com.google.gwt.user.client.ui.Label;
import com.google.gwt.user.client.ui.LazyPanel;
import com.google.gwt.user.client.ui.Widget;

public class Lazy1 extends LazyPanel{

    Label label = new Label("Mani");

    @Override
    protected Widget createWidget() {
        return label;
    }
} 
```

我收到如下异常和错误：-

```
13:00:08.222 [ERROR] [abc] Generator 'com.google.gwt.uibinder.rebind.UiBinderGenerator' threw an exception while rebinding 'abc.client.AbcUI.abcUIUiBinder'

java.lang.NullPointerException: null
    at com.google.gwt.uibinder.elementparsers.LazyPanelParser.parse(LazyPanelParser.java:40)
    at com.google.gwt.uibinder.rebind.UiBinderWriter.parseElementToField(UiBinderWriter.java:934)
    at com.google.gwt.uibinder.elementparsers.WidgetInterpreter.interpretElement(WidgetInterpreter.java:88)
    at com.google.gwt.uibinder.elementparsers.WidgetInterpreter.interpretElement(WidgetInterpreter.java:34)
    at com.google.gwt.uibinder.elementparsers.InterpreterPipe.interpretElement(InterpreterPipe.java:58)
    at com.google.gwt.uibinder.rebind.GetInnerHtmlVisitor.visitElement(GetInnerHtmlVisitor.java:45)
    at com.google.gwt.uibinder.rebind.ChildWalker.accept(ChildWalker.java:48)
    at com.google.gwt.uibinder.rebind.GetInnerHtmlVisitor.getEscapedInnerHtml(GetInnerHtmlVisitor.java:33)
    at com.google.gwt.uibinder.rebind.XMLElement.consumeInnerHtml(XMLElement.java:391)
    at com.google.gwt.uibinder.rebind.XMLElement.consumeInnerHtml(XMLElement.java:403)
    at com.google.gwt.uibinder.elementparsers.HTMLPanelParser.parse(HTMLPanelParser.java:57)
    at com.google.gwt.uibinder.rebind.UiBinderWriter.parseElementToField(UiBinderWriter.java:934)
    at com.google.gwt.uibinder.rebind.UiBinderParser.parse(UiBinderParser.java:146)
    at com.google.gwt.uibinder.rebind.UiBinderWriter.parseDocumentElement(UiBinderWriter.java:1368)
    at com.google.gwt.uibinder.rebind.UiBinderWriter.parseDocument(UiBinderWriter.java:1073)
    at com.google.gwt.uibinder.rebind.UiBinderGenerator.generateOnce(UiBinderGenerator.java:177)
    at com.google.gwt.uibinder.rebind.UiBinderGenerator.generate(UiBinderGenerator.java:129)
    at com.google.gwt.core.ext.IncrementalGenerator.generateNonIncrementally(IncrementalGenerator.java:40)
    at com.google.gwt.dev.javac.StandardGeneratorContext.runGeneratorIncrementally(StandardGeneratorContext.java:657)
    at com.google.gwt.dev.cfg.RuleGenerateWith.realize(RuleGenerateWith.java:41)
    at com.google.gwt.dev.shell.StandardRebindOracle$Rebinder.rebind(StandardRebindOracle.java:79)
    at com.google.gwt.dev.shell.StandardRebindOracle.rebind(StandardRebindOracle.java:276)
    at com.google.gwt.dev.shell.ShellModuleSpaceHost.rebind(ShellModuleSpaceHost.java:141)
    at com.google.gwt.dev.shell.ModuleSpace.rebind(ModuleSpace.java:595)
    at com.google.gwt.dev.shell.ModuleSpace.rebindAndCreate(ModuleSpace.java:465)
    at com.google.gwt.dev.shell.GWTBridgeImpl.create(GWTBridgeImpl.java:49)
    at com.google.gwt.core.shared.GWT.create(GWT.java:57)
    at com.google.gwt.core.client.GWT.create(GWT.java:85)
    at abc.client.AbcUI.&lt;clinit&gt;(AbcUI.java:12)
    at abc.client.ABC.onModuleLoad(ABC.java:10)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.google.gwt.dev.shell.ModuleSpace.onLoad(ModuleSpace.java:406)
    at com.google.gwt.dev.shell.OophmSessionHandler.loadModule(OophmSessionHandler.java:200)
    at com.google.gwt.dev.shell.BrowserChannelServer.processConnection(BrowserChannelServer.java:526)
    at com.google.gwt.dev.shell.BrowserChannelServer.run(BrowserChannelServer.java:364)
    at java.lang.Thread.run(Thread.java:662) 
```

ABC.java

```
package abc.client;

import com.google.gwt.core.client.EntryPoint;
import com.google.gwt.user.client.ui.RootPanel;

public class ABC implements EntryPoint {

    public void onModuleLoad() {
        RootPanel.get().add(new AbcUI());
    }
} 
```

AbcUi.java

```
package abc.client;

import com.google.gwt.core.client.GWT;
import com.google.gwt.uibinder.client.UiBinder;
import com.google.gwt.user.client.ui.Composite;
import com.google.gwt.user.client.ui.HTMLPanel;
import com.google.gwt.user.client.ui.LazyPanel;

public class AbcUI extends Composite {

    interface abcUIUiBinder extends UiBinder<HTMLPanel, AbcUI> {}
    private static abcUIUiBinder uiBinder = GWT.create(abcUIUiBinder.class);

    public AbcUI() {
        initWidget(uiBinder.createAndBindUi(this));
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T12:44:34.883

据此，[如果](https://groups.google.com/d/msg/google-web-toolkit/oVx2rHk4eF8/0_Av9-VQn8sJ)您没有 LazyPanel 的 @UiField 注释，则会出现此错误。所以我会尝试以下方法：

**对于 UiBinder XML 文件：**

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">

<ui:UiBinder xmlns:ui="urn:ui:com.google.gwt.uibinder"
    xmlns:g="urn:import:com.google.gwt.user.client.ui"
    xmlns:d="urn:import:com.google.gwt.dom.client"
    xmlns:lazy="urn:import:abc.client">

    <g:HTMLPanel>
        <lazy:Lazy1 ui:field="myLazy1"/>
    </g:HTMLPanel>

</ui:UiBinder> 
```

**对于您的 AbcUi.java 文件：**

```
package abc.client;

import com.google.gwt.core.client.GWT;
import com.google.gwt.uibinder.client.UiBinder;
import com.google.gwt.user.client.ui.Composite;
import com.google.gwt.user.client.ui.HTMLPanel;
import com.google.gwt.user.client.ui.LazyPanel;

public class AbcUI extends Composite {

    interface abcUIUiBinder extends UiBinder<HTMLPanel, AbcUI> {}
    private static abcUIUiBinder uiBinder = GWT.create(abcUIUiBinder.class);

    @UiField
    Lazy1 myLazy1;

    public AbcUI() {
        initWidget(uiBinder.createAndBindUi(this));
    }
} 
```

# php - Linux：通过 httpd 获取总 CPU 使用率

> ID：15356168
> 
> 赞同：0
> 
> 时间：2013-03-12T08:13:07.077
> 
> 标签：php, linux, unix, ps

我需要在 php 报告中显示服务器上 httpd 进程使用的 CPU 总百分比。

我从 exec 调用以下内容：

```
ps -e -o %mem,%cpu,cmd | grep httpd | awk ' {memory+=$1;cpu+=$2} END {printf("%05.2f ",memory);printf("%05.2f\n",cpu)}' 
```

但上述命令报告的 CPU 使用率与 top 命令报告的 CPU 使用率不匹配。

我需要报告 --> 如果 CPU 忙于 40%、10% 的 httpd 进程、20% 的 mysqld 进程、10% 的 perl 进程，那么我需要报告 10% 的 httpd。（假设没有其他进程）。

我看到了这个：[get apache total cpu usage in (linux)](https://stackoverflow.com/questions/11935910/get-apache-total-cpu-usage-in-linux)

但我知道 ps 命令返回进程消耗的 CPU 占 CPU 消耗总百分比的百分比。我知道它越来越乱，所以下面的例子应该会有所帮助。

如果 httpd 消耗了 10% 的 CPU，而 CPU 的忙碌率为 60%，那么 httpd 对 CPU 忙碌的实际贡献为 ((100/60)*10) = 16.66 %。它是否正确？还有什么是让一组同名进程使用cpu的最佳方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-28T17:53:36.660

在 ssh 中试试这个

```
ps aux | grep "httpd"  | awk '{sum1 +=$3}; END {print sum1}' 
```

输出是：

```
10.5 
```

这是内存的总和

```
ps aux | grep "httpd"  | awk '{sum1 +=$4}; END {print sum1}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:30:51.123

我不是 100% 确定你在问什么，但如果我是对的，这个答案可能会对你有所帮助：

```
<?php
    exec('ps -aux', $processes);
    foreach($processes as $process){
        $cols = split(' ', ereg_replace(' +', ' ', $process));
        if (strpos($cols[2], '.') > -1){
            $cpuUsage += floatval($cols[2]);
        }
    }
    print($cpuUsage);
?> 
```

在搜索了许多表格后，还找到了另一种方式：

在论坛上搜索并尝试了很多方法但我没有尝试过：

```
$stat1 = file('/proc/stat'); 
sleep(1); 
$stat2 = file('/proc/stat'); 
$info1 = explode(" ", preg_replace("!cpu +!", "", $stat1[0])); 
$info2 = explode(" ", preg_replace("!cpu +!", "", $stat2[0])); 
$dif = array(); 
$dif['user'] = $info2[0] - $info1[0]; 
$dif['nice'] = $info2[1] - $info1[1]; 
$dif['sys'] = $info2[2] - $info1[2]; 
$dif['idle'] = $info2[3] - $info1[3]; 
$total = array_sum($dif); 
$cpu = array(); 
foreach($dif as $x=>$y) $cpu[$x] = round($y / $total * 100, 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:10:54.350

这适用于我在 OSX 上：

```
<?php
    exec('ps -e -o %mem,%cpu,command | grep httpd', $output);

    $proc_data = [];

    foreach($output as $key => $value) {
        // Make sure it's only path httpd and not the grep included
        if (strstr($value, '/httpd')) {
            $info = explode(' ', trim($value), 5);
            unset($info[1]);
            unset($info[2]);
            $proc_data[] = array_merge($info);
        }
    }

    echo '<pre>';
    print_r($proc_data);
    echo '</pre>';

    // Caclulate total CPU percentages
    $total_cpu = 0;

    foreach ($proc_data as $key => $value) {
        $total_cpu += $value[1];
    }

    echo $total_cpu;
?> 
```

这是 bash 的终端输出：

```
MacBook-Pro:~ user$ ps -e -o %mem,%cpu,command | grep httpd
 0,2   0,0 /Applications/MAMP/Library/bin/httpd -k start
 0,0   0,0 /Applications/MAMP/Library/bin/httpd -k start
 0,1   0,0 /Applications/MAMP/Library/bin/httpd -k start
 0,0   0,0 /Applications/MAMP/Library/bin/httpd -k start
 0,1   0,0 /Applications/MAMP/Library/bin/httpd -k start
 0,0   0,0 /Applications/MAMP/Library/bin/httpd -k start
 0,0   0,0 /Applications/MAMP/Library/bin/httpd -k start
 0,0   0,0 /Applications/MAMP/Library/bin/httpd -k start
 0,0   0,0 /Applications/MAMP/Library/bin/httpd -k start
 0,0   0,0 /Applications/MAMP/Library/bin/httpd -k start
 0,0   0,0 /Applications/MAMP/Library/bin/httpd -k start
 0,0   9,0 /Applications/MAMP/Library/bin/httpd -k start
 0,0   0,0 grep httpd 
```

我注意到`ps -e -o %mem,%cpu,cmd`必须是`command`，但它可能是仅 OSX 的东西。希望你能用这个工作。

祝你好运！

# javascript - 从具有 HTML 输出的变量中获取特定数据

> ID：15356171
> 
> 赞同：0
> 
> 时间：2013-03-12T08:13:17.247
> 
> 标签：javascript, jquery, json, handlebars.js

使用 Handlebars.js 从 json 和模板渲染 html 输出。

HTML 输出存储在一个变量中，现在我需要通过 ID 获取 HTML 的一部分。

我怎样才能获得所需的数据。？

例如：分配给变量的 HTML 内容

```
<ol id="maincontent">
        <li>test</li>
        <li>test1</li>
        <li>test2</li>
    </ol>
<ol id="content">
        <li>test</li>
        <li>test1</li>
        <li>test2</li>
    </ol> 
```

现在我只需要 id="content" 数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:54:50.040

（假设您可以使用 jQuery）也许您正在寻找以下内容：

```
var myVar = '<ol id="maincontent">\
  <li>test</li>\
  <li>test1</li>\
  <li>test2</li>\
  </ol>\
  <ol id="content">\
  <li>test3</li>\
  <li>test4</li>\
  <li>test5</li>\
  </ol>';
alert($("<div>" + myVar + "</div>").children("#content").html()); 
```

最后一行使用 HTML 字符串调用 $（即 jQuery）来创建 DOM 对象（参见[http://api.jquery.com/jQuery/#jQuery2](http://api.jquery.com/jQuery/#jQuery2)），并根据您要查找的 id 过滤其子对象.

# javascript - 无法理解为什么此验证未按预期工作

> ID：15356172
> 
> 赞同：1
> 
> 时间：2013-03-12T08:13:20.080
> 
> 标签：javascript, jquery

我的问题是我想以 javascript 面向对象的方式验证我的表单，但我无法使其工作。

### [这是小提琴](http://jsfiddle.net/mNu2a/)

### HTML:------------------------------------------------ -------------------------------------------------- ----

```
<form id="contact-form" action="#" method="get">
    <ul>
       <li><input type="text" id='fname' name='fname' class='required' placeholder="Firstname"/></li>
       <li><input type="text" id='lname' name='lname' class='required' placeholder="Lastname"/></li>
       <li><input type="password" id='pwd' name='pwd' class='required' placeholder="Password"/></li>
       <li><input type="password" id='confPwd' name='confPwd' class='required' placeholder="Confirm password"/></li>
       <li><input type="text" id='email' name='email' class='required' placeholder="Email"/></li>
       <li><input type="text" id='website' name='website' class='required' placeholder="Website"/></li>
       <li>
           <input type="submit" id='submit' value="Submit" />
       </li>
    </ul>
</form> 
```

### JS & JQUERY：---------------------------------- -----------------------------------------------------------

```
 var formValidate = {
      validate: function(elem) {
          var frm = elem.attr('id');
           $('.required', '#' + frm).each(function() {
                if ($(this).val() === '') {
                     alert($(this).attr('id') + ' is a required field.'); //<---gets here
                     $(this).focus();
                     return false; // <--not returning false
                }
           });
      }
 };
 $(function() {
     $('form').submit(function() {
           formValidate.validate($('form'));
     });
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T08:20:54.053

[http://jsfiddle.net/mNu2a/3/](http://jsfiddle.net/mNu2a/3/)

`submit`您需要在处理程序中返回您的验证标志。

```
$(function () {
    $('form').submit(function () {
        return formValidate.validate($('form'));
    });
}); 
```

此外，您的 return 语句只是中断`each`函数，而不是从`validate`方法返回。

```
validate: function (elem) {
    var isValid = true;
    var frm = elem.attr('id');
    $('.required', '#' + frm).each(function () {
        if ($(this).val() === '' && isValid) {
            alert($(this).attr('id') + ' is a required field.');
            $(this).focus();
            isValid = false;
            return false;
        }
    });
    return isValid;
} 
```

您可以稍微简化验证功能：

[http://jsfiddle.net/mNu2a/4/](http://jsfiddle.net/mNu2a/4/)

```
validate: function (elem) {
    var isValid = true;
    $('.required', elem).each(function () {
        var $this = $(this);
        if ($this.val() === '' && isValid) {
            alert($this.attr('placeholder') + ' is a required field.');
            $this.focus();
            isValid = false;
            return false;
        }
    });
    return isValid;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:16:35.180

采用`e.preventDefault()`

```
$(function () {
    $('form').submit(function (e) {
        e.preventDefault();
        formValidate.validate($('form'));
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T08:20:49.247

```
 var formValidate = {
      validate: function(elem) {
          var frm = elem.attr('id');
           $('.required', '#' + frm).each(function() {
                if ($(this).val() === '') {
                     alert($(this).attr('id') + ' is a required field.');
                     $(this).focus();
                     return false; // <- affects "each" scope, not function scope
                }
           });
      }
 }; 
```

将其更改为：

```
 var formValidate = {
      validate: function(elem) {
          var frm = elem.attr('id');

          var invalid = 0;
           $('.required', '#' + frm).each(function() {
                if ($(this).val() === '') {
                     alert($(this).attr('id') + ' is a required field.');
                     $(this).focus();

                     invalid++;

                     return false; // <- affects "each", therefore stopping the loop
                }
           });

          // add these, to also return value from function
          if (invalid > 0) return false;

          return true;
      }
 }; 
```

对于您的提交处理程序：

```
 $(function() {
     $('form').submit(function() {
           return formValidate.validate( $(this) ); // you must pass the returned value to your submit callback
     });
 }); 
```

一个工作示例：http: [//jsfiddle.net/psyketom/QnbKU/](http://jsfiddle.net/psycketom/QnbKU/)

# android - 向应用发送文本（不是特定的电话号码）

> ID：15356177
> 
> 赞同：1
> 
> 时间：2013-03-12T08:14:03.003
> 
> 标签：android, sms, broadcastreceiver, sendmessage

我不知道这是否可能，在互联网上找不到任何有用的东西。

我想制作一个应用程序，我和我的一些朋友可以通过“我的应用程序”发送消息，并且拥有该应用程序的每个人都可以接收消息，而无需使用电话号码。

所以基本上，与 WhatsApp GroupConversation 相同，但不使用电话号码。这甚至可能吗？

如果可能的话，你能不能把我放在正确的轨道上。

希望我足够清楚，如果没有，请告诉我:)

**编辑：**
这只是突然出现在我的脑海中（还没有在互联网上查看），但我想要的是一种喊话框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:25:31.127

通过实现服务器-客户端架构是可能的。您的应用将为所有用户使用一个通用数据库。每当用户安装您的应用程序时，他都会获得一个唯一的用户 ID。如果有人卸载它，他的身份将被销毁。您可以从数据库中的这些 ID 跟踪用户。你不需要电话号码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:26:57.537

这是可能的，事实上 WhatsApp 根本不会使用您的电话号码。您只需提供您的电话号码以确保一个唯一的 ID，并通过验证短信证明您确实拥有此电话。

从那时起，您的电话号码甚至不再使用。

你可以用这两种方式;

1.  创建一个带有数据库的简单 Web 服务，您只需在该数据库上保存和请求消息。也许在获取全部或获取最新消息之间有所不同。任何加入该组的人都可以获取相同的数据。使用 GCM 推送通知，您可以立即完成。

2.  使用 XMPP，这是所有聊天都使用的聊天协议。Whatsapp、Google talk、FB messenger...这将为您提供即时消息，就像您知道的任何其他聊天应用程序或程序一样。

选项 2 是迄今为止最好的最终功能，但请注意 XMPP 非常复杂且容易出错。您可以查看适用于 Android 的 asmack 和 asmackx 库，它们可以轻松地为您提供基本功能。再深入一点，您将不得不深入研究协议并真正了解它。

附言。对于这两种情况，您都需要自己的服务器，但是使用 asmack(x)，您还可以免费使用 Google 的 Talk 服务器。通信将通过您的 Gmail 帐户进行。基本上，您只需制作自己的 Google Talk 版本。

# c++ - 尽管创建了默认构造函数，但没有适当的默认构造函数可用？

> ID：15356185
> 
> 赞同：1
> 
> 时间：2013-03-12T08:14:25.027
> 
> 标签：c++, class, map, constructor, compiler-errors

尝试制作我自己的 Map 结构来存储我自己创建的“字符串”，大约 8 小时后，终于把它归结为只有几个编译器错误（其中六个）。我花了最后一小时四十分钟在网上搜索答案，结果发现人们忘记了默认构造函数，并尝试在我自己的程序中混合使用。由于我不确定问题出在哪里，所以我很抱歉发布所有这些代码......我把我认为最相关的文件放在第一位；我认为只有前三个是必要的。错误是

```
"SubdomainPart' : No appropriate default constructor available" for lines 12 and 20 of the Map.h file. 
```

**地图.h**

```
// Map.h - Map template class declaration
// Written by -----

#pragma once

template<typename KEY_TYPE, typename VALUE_TYPE>
struct Map
{
public:
    // Default / initial constructor hybrid
    Map(int initialCapacity = 10)
    {
        Size = 0;
        Capacity = initialCapacity;
        Key;
        MappedValue;

        //Allocate the C-Array elements using HEAP
        Data = new VALUE_TYPE[Capacity];
    }

    struct iterator
    {
        KEY_TYPE * current;
        KEY_TYPE * prev;
        KEY_TYPE * next;

        iterator operator ++ ()
        {
            iterator it = this;
            iterator itNext = it.next;

            it.next = itNext.next; // pushes iterator forward.
            it.prev = it.current;
            it.current = it.next;
        }
        iterator operator -- ()
        {
            iterator it = this;
            iterator itPrev = it.prev;

            it.prev = itPrev.prev; // pushes iterator backward.
            it.next = it.current;
            it.current = it.prev;
        }
    };

    Map(const Map& copyFrom)
    {
    // Necessary to prevent the delete[] Data; statement in the assignment operator from 
    // freezing because Data has some garbage address in it.
        Data = NULL;

        *this = copyFrom; //'this' points to the current instance of the object. (in this case, 'Map')
    }

    // Destructor: MUST HAVE because we allocate memory
    ~Map()
    {
        delete[] Data;
    }

    Map& operator = (const Map& copyFrom)
    {
        // 0) delete the old one!
        delete[] Data;
        // 1) copy Size and Capacity
        Size = copyFrom.Size;
        Capacity = copyFrom.Capacity;

        // 2) Allocate Memory
        Map* Data = new Map[Capacity];

        // 3) Copy the Map Elements
        for(int i = 0; i<Size; i++)
            Data[i] = copyFrom.Data[i];

        return *this;
    }

    // Index Operator
    VALUE_TYPE& operator[] (KEY_TYPE key) const
    {
        return Data[key];
    }

    // Accessor functions: read-only access to Size and Capacity
    int GetSize() const //const does not modify ANY data members of the class (size, capacity, or data)
    {
        return Size;
    }
    int GetCapacity() const
    {
        return Capacity;
    }

    void PushBack(const VALUE_TYPE& newElement) //adds value to end of Map as default
    {
        if(Size >= Capacity)
            increaseCapacity(2 * Capacity);

        Data[Size] = newElement;
        Size++; // increases size of the array so it can be used later.
    }

    // Overloaded Add function, inserts a value at specified index, calls in "Insert" to do so.
    void Add(const VALUE_TYPE& newElement, int index)
    {
        if( (index<0) || (index > Size))
        {
            throw ("Index to insert is out of range");
        }

        //Make sure there's space!
        if (Size >= Capacity)
            increaseCapacity(2*Capacity); //increase size of array if too small!

        Insert(index, newElement);  
    }

    void Remove(int index) // index = index to be removed.
    {
        // Make sure it's inside the bounds
        if( (index<0) || (index > Size))
        {
            throw ("Index to Remove is out of range.");
        }

        // it's going to remove the unneeded space by having its capacity one above the Size. 

        Map* new_Data = new Map[Size];

        //Copy data onto new pointer section.
        for(int x = 0; x<Size; x++)
            new_Data[x] = Data[x];

        delete[] Data; //deallocates old memory and uneeded capacity slots.

        for(int x = index; x < (Size - 1); x++) //removes the value at index 'index.' Now Data has a capacity of the amount of slots used and one more for a NULL value.
            new_Data[x] = new_Data[x+1];

        Data = new_Data;
        Data[Size-1] = NULL;
        Size--;
    }

    void increaseCapacity(int new_capacity)
    {
        if(new_capacity>Capacity) 
        {
            if(new_capacity> 2* Capacity)
                Capacity = new_capacity;
        else
            Capacity *= 2;

        //create Map with a new capacity!
        Map* new_Map = new Map[Capacity];

        for(int x = 0; x<Size; x++)
        {
            new_Map[x] = Data[x];
        }

        //clear out old memory
        delete[] Data;

        //set data pointer to the new Map
        Data = new_Map;
        }
    }
    KEY_TYPE * Key; // Used to identify mapped values.
    VALUE_TYPE MappedValue; // The value actually contained.
private:
    int Size; // The count of actual C-Array elements used
    int Capacity; // The count of C-array elements allocated

    // The encapsulated C-array
    VALUE_TYPE * Data; // pointer of type 'DATA_TYPE' called data (will be name of our array).

    void Insert(const int index, const VALUE_TYPE& insertValue)
    {
        if( (index<0) || (index > Size))
        {
            throw out_of_range ("Index to insert is out of range");
        }

    //Time to shuffle the array down!

    for(int x = Size; x>index; x--)
    {
        Data[x] = Data[x-1];
    }

    //Insert the new item at index 'Index!'

    Data[index] = insertValue;
    Size++;
    }

}; 
```

**子域部分.h**

```
// SubdomainPart.h - SubdomainPart validation class declaration
// Written by -------

#pragma once

#include "String.h"
using namespace std;

class SubdomainPart
{
public:
    // Takes the address and stores into the Address data member
    SubdomainPart(const String& address);

    // Returns true when the Address is valid or false otherwise
    virtual bool IsValid();

private:
    String Address;
}; 
```

**子域部分.cpp**

```
// SubdomainPart.cpp - Subdomain validation class implementation
// Written by ---------

#pragma once

#include "SubdomainPart.h"

// Takes the address and stores into the Address data member
SubdomainPart::SubdomainPart(const String& address)
{
    Address = address;
}

// Returns true when the Address is valid or false otherwise
bool SubdomainPart::IsValid()
{
    int currentDotIndex = 0;
    int nextDotIndex = 0;
    int found = 0; // first index of a found invalid character
    int hyphenIndex = 0; // used to check hyphen rule

    // 1\. Check the size, 255 total characters
    if(Address.GetLength() < 1 || Address.GetLength() > 255)
        return false;

    // Checks for valid amount of 1-63 characters between dots

    currentDotIndex = Address.FindFirstOf('.');

    if(currentDotIndex == 0 || currentDotIndex == Address.GetLength()-1)
        return false;
    else if(currentDotIndex!=(-1))
        nextDotIndex = Address.Find('.', currentDotIndex+1);
    else
        nextDotIndex = (-1); // if no '.' is found, ensures the following loop doesn't run.

    while(nextDotIndex!=(-1))
    {
        if((nextDotIndex-currentDotIndex) == 1 || (nextDotIndex-currentDotIndex) > 63)
            return false;

        currentDotIndex = nextDotIndex;
        nextDotIndex = Address.Find('.', currentDotIndex+1);
    }   

    // 2\. Check for valid characters

    found = Address.FindFirstNotOf("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz1234567890-.");

    if(found!=(-1)) // if a character not listed above is found.
        return false;

    // 3\. Check for dash rule

    // Making sure hyphens aren't located at the first or last index of a subdomain.

    hyphenIndex = Address.FindFirstOf('-');

    if(hyphenIndex == 0)
        return false;

    hyphenIndex = Address.FindLastOf('-');

    if(hyphenIndex == Address.GetLength()-1)
        return false;

    // Makes sure two hyphens aren't in a row.
    for(int x = 1; x<Address.GetLength(); x++)
        if(Address[x] == '-' && Address[x] == Address[x-1])
            return false;

    return true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:17:28.357

您没有**默认**构造函数，因为`SubdomainPart`您只提供了一个复制构造函数。默认构造函数不带参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:17:43.477

我在这个类中没有看到默认构造函数：

```
class SubdomainPart
{
public:
    // Takes the address and stores into the Address data member
    SubdomainPart(const String& address);

    // Returns true when the Address is valid or false otherwise
    virtual bool IsValid();

private:
    String Address;
}; 
```

请记住，此映射构造函数默认构造每个成员，而不是初始化它们：

```
Map(int initialCapacity = 10)
{
    Size = 0;
    Capacity = initialCapacity;
    Key;
    MappedValue;

    //Allocate the C-Array elements using HEAP
    Data = new VALUE_TYPE[Capacity];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T08:20:55.160

编译器抱怨`SubdomainPart`没有默认构造函数，实际上没有。这是必需的，因为您`Map`包含一个类型的对象`VALUE_TYPE`：

```
VALUE_TYPE MappedValue; 
```

此外，您的`Map`构造函数包含非常奇怪的代码。我假设您实际上想要使用初始化列表：

```
Map(int initialCapacity = 10)
  : Key()
  , MappedValue()
  , Size(0)
  , Capacity(initialCapacity)
  , Data(new VALUE_TYPE[Capacity])
{} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T08:23:46.173

问题在于`Data = new VALUE_TYPE[Capacity];`部分。编译器生成代码以分配数组并通过调用 VALUE_TYPE 的无参数构造函数来实例化每个元素。由于 SubdomainPart 没有（因为您已经定义了自定义的），编译器会引发错误。

编译器在 map.h 中报错的原因是它正是调用构造函数的地方。它没有在 SubdomainPart 代码中使用，它只是在那里定义的。

# python - 从数字中过滤列表的最pythonic方法是什么？

> ID：15356186
> 
> 赞同：2
> 
> 时间：2013-03-12T08:14:30.700
> 
> 标签：python, list

我有这个 ：

```
['SPRD', '60', 'p25'] 
```

我想生成：

```
['SPRD', 'p'] 
```

最pythonic的方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T08:19:32.350

```
digits_stripped = (s.translate(None, '0123456789') for s in input_list)
without_blanks = [s for s in digits_stripped if s] 
```

（请注意，如果您碰巧使用的 Python 版本早于 2.6，则需要使用`string.maketrans('', '')`而不是`None`作为 . 的第一个参数`translate()`。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T08:31:12.813

```
In [25]: l = ['SPRD', '60', 'p25']

In [26]: filter(None,(s.translate(None,'1234567890') for s in l))
Out[26]: ['SPRD', 'p'] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T08:19:39.480

```
In [37]: l = []

In [38]: p = "[a-zA-Z]*"

In [39]: p1 = re.compile(p)

In [40]: for i in  ['SPRD', '60', 'p25']:
   ....:     if p1.match(i):
   ....:         l.append(p1.match(i).group())
   ....:

In [41]: [x for x in l if x]
Out[41]: ['SPRD', 'p'] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T08:20:42.697

```
import re
filter(None, [re.sub("\d+", "", f) for f in input_list]) 
```

我相信这是非常pythonic，尽管它确实需要正则表达式并且不如其他答案那么有效。首先，从单词中删除所有数字，然后从列表中删除任何空字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T08:24:18.877

使用生成表达式、正则表达式、列表推导：

```
import re
[s for s in (re.sub("[0-9]*", "", s) for s in l) if s] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T08:28:13.417

如果您的列表仅包含字符串并且您只想过滤掉数字，那么这可能也很笨拙：

```
def filter_text(x):
    try:
        int(x)
        return ''
    except ValueError:
        return x

l = ['SPRD', '60', 'p25']
newlist = []
for x in l:
     newlist.append(''.join([filter_text(y) for y in x]))
newlist = [x for x in newlist if x != ''] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T09:45:00.190

根据[之前的回答](https://stackoverflow.com/questions/354038/how-do-i-check-if-a-string-is-a-number-in-python)，强制转换应该比正则表达式或字符串操作更快、更“漂亮”。

那么最好的方法应该是这样的：

```
def is_number(s):
    try:
        float(s)
        return True
    except ValueError:
        return False

#with list comprehension
def filter_number(seq):
    return [item for item in seq if not is_number(item)]

#with a generator
def filter_number_generator(seq):
    for item in seq:
        if not is_number(item): yeld item 
```

如果您的目标是在内存中拥有列表的副本，则应使用列表理解方法。现在，如果您想有效地迭代列表中的每个非数字项，生成器允许您执行以下操作：

```
for non_number in filter_number_generator(l) 
```

# php - 从多个线程创建目录

> ID：15356189
> 
> 赞同：4
> 
> 时间：2013-03-12T08:14:43.367
> 
> 标签：php

如果多个线程执行以下操作：

```
if ( !is_dir($dir) )
    mkdir($dir, 0, true); 
```

如果两个线程“同时”检测到该目录不存在，然后他们都尝试创建它，会发生什么？

是否`mkdir`同步以防止发生坏事，或者有没有办法`flock`确保只有一个线程创建目录和/或文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-07T11:39:26.343

我知道这是一个老问题，但这样的事情非常有效，假设您有一个将错误转换为异常的错误处理程序（无论如何这是一个好主意）：

```
 /**
     * Create a folder in a thread safe way
     * Between 'is_dir' and 'mkdir' another thread could have created a folder. 
     * This can cause the system to raise an unwarrented error
     * 
     * Returns TRUE if folder was created, NULL if folder already exists
     * 
     * Throws exception on any other error
     *
     * @param  array   $array
     * @param  string  $key
     * @param  mixed   $value
     * @return array
     */
    function mkdir_thread_safe($dir, $permissions = 0777, $recursive = false)
    {   
        if(is_dir($dir)) return;

        try {
             mkdir($dir, $permissions, $recursive);
        }
        catch (\ErrorException $e){

            if(is_dir($dir)) return;

            throw $e;
        }

        return true;
    } 
```

这是异常转换处理程序的错误 - 无论如何这确实是一个很好的做法，应该在任何应用程序入口点的开头添加。一些现代框架，如 laravel，默认情况下会处理这个问题，所以如果你使用 laravel，你的错误已经被转换为异常。

```
set_error_handler(function ($level, $message, $file, $line, $context)
{
    if (error_reporting() & $level)
    {
        throw new ErrorException($message, $level, 0, $file, $line);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T08:56:02.307

只有其中一个会设法创建目录，另一个`mkdir`会返回`false`并发出警告

您也可以查看 php 中的这个[错误](https://bugs.php.net/bug.php?id=35326)，它与您的问题不完全一样，但它是相关的

# android - AutoCompleteTextView 检测何时从用户编辑的列表中选择条目

> ID：15356193
> 
> 赞同：16
> 
> 时间：2013-03-12T08:15:02.700
> 
> 标签：android, list, autocompletetextview, onitemclicklistener, onkeydown

我有一个`AutoCompleteTextView`我用来从长列表中选择一个项目。用户应该只能从列表中选择一个预定的项目。他们不应该能够输入自己的项目。

我检查以确保他们仅提交列表中的一个项目的方式是用于`setOnItemClickListener`触发布尔标志。问题是布尔标志设置为 true 后，他们仍然可以编辑项目的选定文本。我需要检测到这一点并将布尔标志再次设置为 false。我该怎么做呢。我看到了一个使用的建议`onKeyDown`，但我不确定如何实现它。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-12T08:22:09.267

您可以添加文本更改侦听器：

```
autoCompleteTextView.addTextChangedListener(new TextWatcher() {

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {

    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {                

    }

    @Override
    public void afterTextChanged(Editable s) {

    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:18:19.577

实现 a `TextWatcher`，它将为您提供 3 种方法，当有人更改文本时，这些方法将不断得到回调。如果字符串增长，您的用户将再次自己键入。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-02-06T21:53:44.383

采用

```
AutoCompleteTextView#setOnItemSelectedListener() 
```

- 奇迹般有效。

# php - 如何从会话中显示部分数组？

> ID：15356199
> 
> 赞同：-1
> 
> 时间：2013-03-12T08:15:25.697
> 
> 标签：php, arrays, session

我试图弄清楚如何显示数组中的某个部分。我需要向用户展示这一点。例如：

```
Array ( [id] => 11 [login] => 1 [myusername] => lepel100) 
```

是什么`print_r`显示。我只想显示登录。

这可能吗？如果是这样，谁能告诉我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T08:16:14.933

是的，只需使用：

```
echo $arrayName['login'] 
```

或者如果它是一个`$_SESSION`变量：

```
echo $_SESSION['login'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:17:03.197

嗨，如果您在会话中有它，您可以通过 $_SESSION["id"] （如果那是您的密钥）或 $_SESSION["myusername"] 访问它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:13:09.577

这是另一个解决方案：

```
extract($_SESSION);
echo $login; 
```

# c# - 在 C# 中获取与 javascript 日期函数相同的日期格式

> ID：15356202
> 
> 赞同：3
> 
> 时间：2013-03-12T08:15:49.013
> 
> 标签：c#, javascript

我将日期分配给javascript中的变量。

```
var myDate = new Date(y, m, 1) 
```

所以我把日期`myDate`写成：`Fri Mar 01 2013 00:00:00 GMT+0530 (India Standard Time)`

我需要以相同的方式在 C 语言中格式化日期字符串。

我试过这样的事情：

```
string.Format("{0:yyyy-MM-dd hh:mm:ss} GMT {1}", dt.ToLocalTime(), dt.ToLocalTime().ToString("%K")) 
```

它给了我：`"2013-03-12 01:31:49 GMT +05:30"`

所以这不是我想要的确切格式。任何帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:32:54.123

这应该工作

```
System.DateTime.Now.ToString("ddd MMM dd yyyy HH:mm:ss \"GMT\"K") 
```

返回“2013 年 3 月 12 日星期二 14:01:38 GMT+05:30”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:18:59.623

可能有一种更合适的方法，但在这种情况下，格式字符串的初始部分刚刚关闭：

```
ddd MMM dd yyyy

string.Format("{0:ddd MMM dd yyyy hh:mm:ss} GMT {1}", dt.ToLocalTime(), dt.ToLocalTime().ToString("%K")) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T08:20:03.587

```
string.Format("{0:ddd MMM dd yyyy hh:mm:ss} GMT {1}", dt.ToLocalTime(), dt.ToLocalTime().ToString("%K")) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T08:23:04.690

您想要的是以下内容，它将为您提供与 JavaScript 完全相同的内容！

`string.Format("{0:ddd MMM dd yyyy hh:mm:ss \"GMT\"K} ({1})", dt.ToLocalTime(), TimeZoneInfo.Local.StandardName)`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T08:23:17.910

你的格式字符串是错误的。应该是这样的：

```
"{0:ddd MMM dd yyyy hh:mm:ss} GMT{1}" 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-12T08:29:04.203

为什么不直接使用

```
dt.ToString("ddd MMM dd yyyy HH':'mm':'ss 'GMT'K"); 
```

应该给你

```
Fri Mar 01 2013 00:00:00 GMT+0530 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T08:19:15.177

试试这个代码>>

```
DateTime dt = DateTime.Now;

String.Format("{0:dd-MM-yyyy}", dt); 
```

# java - 如何在 Joda Time 中正确比较 DateTime 或 MutableDateTime 对象？

> ID：15356205
> 
> 赞同：2
> 
> 时间：2013-03-12T08:16:05.123
> 
> 标签：java, jodatime

我的代码的输出是 0,0,0。我期待的是 0, -1 , 1 。代码中有什么问题？为什么我不能从 DateTime 中添加或减去秒？

```
public static void main(String[]args){

    DateTime dt1 = new DateTime();    
    DateTime dt2 = new DateTime(dt1); // dt2 = dt1
    DateTime dt3 = new DateTime(dt1); // dt3 < dt1
    DateTime dt4 = new DateTime(dt1); // dt4 > dt1

    dt3.minusSeconds(10);
    dt4.plusSeconds(10);

    int result1 = dt1.compareTo(dt2);
    int result2 = dt1.compareTo(dt3);
    int result3 = dt1.compareTo(dt4);

    System.out.println("Results " + result1 + " , " + result2 + " , " + result3);

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T08:17:47.250

[`minusSeconds()`](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html#minusSeconds%28int%29)返回您的 DateTime 对象的副本。

你可以试试这个：

```
public static void main(String[]args){

    DateTime dt1 = new DateTime();    
    DateTime dt2 = new DateTime(dt1); // dt2 = dt1
    DateTime dt3 = new DateTime(dt1).minusSeconds(10); // dt3 < dt1
    DateTime dt4 = new DateTime(dt1).plusSeconds(10); // dt4 > dt1

    int result1 = dt1.compareTo(dt2);
    int result2 = dt1.compareTo(dt3);
    int result3 = dt1.compareTo(dt4);

    System.out.println("Results " + result1 + " , " + result2 + " , " + result3);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:18:31.327

`minusSeconds`并返回[DateTime](http://joda-time.sourceforge.net/apidocs/org/joda/time/DateTime.html)`plusSeconds`的副本。

您需要重新分配变量：

```
dt3 = dt3.minusSeconds(10);
dt4 = dt4.plusSeconds(10); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T08:19:05.647

`DateTime`是**不可变**的。当你这样做时，引用`dt3.minusSeconds(10);`的`DateTime`对象不会被修改；`dt3`相反，它返回一个新`DateTime`对象。将您的代码更改为：

```
dt3 = dt3.minusSeconds(10);
dt4 = dt4.plusSeconds(10); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T08:35:30.100

编辑了我的问题中的代码以考虑数年而不是秒数（见下文）。这很容易让我们看看当我们做 addYears( - Some big int ) 时是否有 -ve 时间。我们得到一个负值，这在数学上是可以的，但在现实生活中没有使用。

```
public static void main(String[]args){

    DateTime dt1 = new DateTime();    
    DateTime dt2 = new DateTime(dt1); // dt2 = dt1
    DateTime dt3 = new DateTime(dt1); // dt3 < dt1
    DateTime dt4 = new DateTime(dt1); // dt4 > dt1
    MutableDateTime mdt1 = new MutableDateTime(dt1); // mdt1 = dt1
    mdt1.addYears(-10);

    dt3 = dt3.minusYears(10);
    dt4 = dt4.plusYears(10);

    int result1 = dt1.compareTo(dt2);
    int result2 = dt1.compareTo(dt3);
    int result3 = dt1.compareTo(dt4);

    System.out.println("Results " + result1 + " , " + result2 + " , " + result3);
    System.out.println("IMmutable is " + dt1);
    System.out.println("mutable is " + mdt1);

    mdt1.addYears(-10000);
    System.out.println("mutable is " + mdt1);

} 
```

# java - 如何识别 jms 主题中的回复与响应？

> ID：15356206
> 
> 赞同：2
> 
> 时间：2013-03-12T08:16:11.110
> 
> 标签：java, jms

假设回复和请求都被发送到同一个主题，现在我订阅了它。我如何识别它们中的哪一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T11:21:55.130

还有一个简单的方法：请求首先出现，所以我可以检查比响应更小的时间步长。这会将其识别为请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T11:16:03.710

尝试在您发布到主题的消息上设置消息属性。您为每条消息设置一个字符串属性，例如 message_type=”request” 或 message_type=”response”。当您在侦听器上使用消息时，您可以读取属性以确定消息是请求还是响应。

另一种方法是使用消息选择器属性启动两个侦听器。一个只会使用 message_type 属性作为“请求”的消息，另一个只会使用 message_type 属性作为“响应”的消息。

# javascript - 更多提交按钮在点击 Jquery 时禁用，不起作用

> ID：15356207
> 
> 赞同：-1
> 
> 时间：2013-03-12T08:16:12.137
> 
> 标签：javascript, jquery, forms, get

我在[这里](https://stackoverflow.com/questions/3186523/onclick-disable-submit-button)得到了这个代码：

就禁用和替换提交按钮而言，它工作正常，但它不会提交表单。我的表单使用“get”方法并将数据提交到另一个页面。

```
 <script type="text/JavaScript">
    $('.button').click(function() {
        $('.button').remove();
        $('.holder').append("DONT DOUBLE CLICK ANYTHING IN A BROWSER");
        $('.form').submit();
    });
    </script> 
```

我已经尝试了大多数事情，包括将 .form 更改为我的表单的 id，仍然没有任何乐趣，任何想法都会有所帮助。

HTML 代码

```
<form action="liftingConfirm.asp" method="get" id="frmArchiveConfirm">
<input name="con_id" type="hidden" id="con_id" value="<%=request.querystring("con_id")%>" />
<input name="sub_id" type="hidden" id="sub_id" value="1" />
<input name="liftingDate" type="hidden" id="liftingDate" value="<%=Session("currentUSDate")%>" />
<div class="holder"><input name="btnConfirm" type="submit" class="button" id="btnConfirm" value="Start New Lifting Gear Examination"  /></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:20:50.073

您使用了错误的选择器，`.form`正在寻找`<form>`具有`form`. 此外，您应该使用以下[`on()`](http://api.jquery.com/on/)语法：

```
$('form').on('click', '.button', function() {
    $('.holder').append("DONT DOUBLE CLICK ANYTHING IN A BROWSER");
    $('#frmArchiveConfirm').submit();
    $('.button').remove();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:23:18.997

为了让您的 jQuery 代码正常工作，您应该在`frmArchiveConfirm`jQuery 代码中包含如下。

替换`$('.form').submit();`为`$('#frmArchiveConfirm').submit();`

否则，如果您在页面中只有一个表单，只需使用`$('form').submit();`

*当您遇到此类错误时，请不要忘记使用 firebug 或浏览器开发工具。您可以轻松找出代码中的错误和错误。*

# phantomjs - 将变量传递到 page.evaluate - PhantomJS

> ID：15356219
> 
> 赞同：22
> 
> 时间：2013-03-12T08:17:00.120
> 
> 标签：phantomjs

在下面的情况下，是否可以在 page.evaluate 中传递变量？

```
function myFunction(webpage, arg1, arg2){

var page = require('webpage').create();

page.viewportSize = { width: 1920, height: 1080 };

page.open(webpage, function (status){

    if (status == 'success') {

            page.includeJs("http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js", function(){

                page.evaluate(function(){

                    arg = arg1 + arg2;
                    console.log(arg);

                });

            });

    } 

    else { phantom.exit(); }

});

} 
```

我尝试了在互联网上找到的几种方法，但实际上没有什么是不可能得到它的变量的。

预先感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2013-03-12T08:48:32.693

像往常一样，答案在函数[文档](http://phantomjs.org/api/webpage/method/evaluate.html)中明确说明`evaluate`：

> 从 PhantomJS 1.6 开始，可以将 JSON 可序列化参数传递给函数。在以下示例中，提取了 DOM 元素的文本值。以下示例实现了与前一个示例相同的最终目标，但元素是基于传递给评估调用的选择器选择的：

下面的示例演示了用法：

```
var title = page.evaluate(function(s) {
    return document.querySelector(s).innerText;
}, 'title');
console.log(title); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-17T13:40:33.847

我有 phantomjs 1.5.0，所以我没有编译 1.6 或更高版本，而是选择了另一种解决方案：

所以我将参数保存到 selectors.js 文件

```
-------------selectors.js starts----------------
var selectors = "div.nice"
-------------selectors.js   ends---------------- 
```

然后将它们注入页面：

```
page.injectJs("selectors.js"); 
```

更多细节可以在这里找到：http: [//phantomjs.org/api/webpage/method/inject-js.html](http://phantomjs.org/api/webpage/method/inject-js.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-06T07:09:25.137

我使用 phantom 4.0.4，以下适用于我，[https://www.npmjs.com/package/phantom](https://www.npmjs.com/package/phantom)

```
var arg = 'test'
page.evaluate(function(arg) {
    console.log(arg)
}, arg); 
```

# ruby-on-rails - 迁移数据库时 rake 中止错误

> ID：15356220
> 
> 赞同：0
> 
> 时间：2013-03-12T08:17:00.110
> 
> 标签：ruby-on-rails, netbeans-6.9

耙中止！驱动程序遇到错误：com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: Unknown database 'dbapp_development'

应该做什么？

我已经使用创建了数据库`rake db:create`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:43:44.930

尽管您通过做`rake db:create`创建了数据库，但数据库的创建却默默地失败了。

在这种情况下，您需要手动创建数据库，就像我进入 mysqlyog 或 mysql 工作台或您所得到的一样。这是已知的错误，在知识库中进行了讨论。

# .net - 什么时候可以用标准收集代替并发收集？

> ID：15356237
> 
> 赞同：0
> 
> 时间：2013-03-12T08:18:19.203
> 
> 标签：.net, .net-4.0, concurrency

当我有多个线程需要与一个集合同时工作时，我通常使用`System.Collections.Concurrent`.
但是，与非并发集合相比，这些集合更昂贵。我想知道在某些情况下我是否可以用非并发集合安全地替换它们。

例如，假设我有一个字典，我首先用数据填充它，然后我生成了几个线程（或任务），它们只从它*读取*，或者只检查一个键是否存在，但从不写入或更改它。

在这种情况下，使用它是否安全`Dictionary<TKey, TValue>`，还是我仍然必须使用`ConcurrentDictionary<TKey, TValue>`？

在一般情况下，只要不修改集合，我是否可以假设所有标准集合都支持多个阅读器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:19:54.693

> 例如，假设我有一个字典，我首先用数据填充它，然后我生成了几个线程（或任务），它们只从它读取，或者只检查一个键是否存在，但从不写入或更改它。

是的，从多个线程中读取是安全的*，*`Dictionary<,>`只要*没有*作者。您应该确保在最后一次写入和第一次读取之间存在内存屏障 - 但如果您在填充字典*后*生成线程，那应该不是问题。

从[文档](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)中：

> A`Dictionary<TKey, TValue>`可以同时支持多个读取器，只要不修改集合即可。

# qt - QGraphicsItem 插入排序设置

> ID：15356242
> 
> 赞同：1
> 
> 时间：2013-03-12T08:18:33.553
> 
> 标签：qt, pyqt, pyside

有谁知道如何使 Qt 遵循 Qgraphicsitem 的插入顺序，而 parentItem 应该在顶部！

注意：我不想通过 zValue 来做，我需要它来做另一份工作。也不想因为其他原因制作 QGraphicsItemGroup 。

`>`stackBefore 应该是解决方案，但不管有没有，它都会在底部绘制父级。

# mod-rewrite - 使用 RewriteRule 缩短 URL：完全删除内容根目录？

> ID：15356244
> 
> 赞同：0
> 
> 时间：2013-03-12T08:18:40.733
> 
> 标签：mod-rewrite, websphere-commerce

我试图缩短这样的 URL：

```
www.mystore.com/webapp/wcs/stores/servlet/CategoryDisplay?langId=-1& storeId=10001&catalogId=10001&categoryId=10006 
```

...对此：

```
www.mystore.com/CategoryDisplay?langId=-1&storeId=10001&catalogId=10001& categoryId=10006 
```

使用 IBM 的示例，我只需在 Apache 配置中执行以下操作即可轻松删除大部分 URL：

```
RewriteRule ^shop/(.*) /webapp/wcs/stores/servlet/$1 
```

然后将其添加到 wc-server.xml 文件中：

```
<context-root-rewrite value=“/shop” /> 
```

是否有可能完全摆脱 /shop/ 前缀？似乎 Apache（又名 IIS）中没有任何东西可以防止这种情况发生，但 Websphere Commerce 会因此而窒息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-17T17:52:43.507

就放

**httpd.conf：**

```
 RewriteRule ^/(?!wcsstore)(.*) /webapp/wcs/stores/servlet/$1 [PT,L] 
```

**wc-server.xml：**

```
 <SEOConfiguration defaultUrl=""
                    dynamicUrl="true"
                    enable="true">
      <context-root-rewrite value="/" />
  </SEOConfiguration> 
```

重启 server1 和 http 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:40:38.547

答：因为在这种情况下，我们只是重新路由 servlet 的请求。如果有任何其他内容，就会造成混乱。我们基本上是将一个子分支移动为根的一个子分支，但还有其他子分支。

# iphone - Cocos2d-x 项目的第二次重建后出现错误“Xcode cannor run using selected device”

> ID：15356255
> 
> 赞同：1
> 
> 时间：2013-03-12T08:19:25.237
> 
> 标签：iphone, ios, xcode, build, cocos2d-x

使用 Xcode 构建的新 cocos2d-x 项目在 iOS 模拟器/设备上正常运行，但是在对 cpp 源文件进行更改后，重建失败并出现错误-

> Xcode 不能使用选定的设备运行。选择具有受支持架构的目标，以便在此设备上运行。

使其工作的唯一方法是删除构建二进制文件（即删除 XCode>Derived Data 文件夹），并在重新启动 Xcode 后重新构建。

有人可以帮我解决这个问题吗？

额外细节：

1.  此错误与不匹配的设备架构和 armv6 armv7 标志有关。但是第一次构建工作正常，并且在第二次构建之后停止工作，这意味着这不是一个可能的问题。
2.  如果项目没有使用 cocos2d-x（即普通的 Objective-C 项目），那么在第二次构建之后就不会出现这样的错误。
3.  选择的编译器：Apple LLVM Compiler 4.2

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:46:11.130

将有效架构更改为 armv7 和 armv7s。删除 armv6。有关更多信息，请参见图像。

![在此处输入图像描述](../Images/3f47488791fd51317053663166d58bde.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T11:36:53.213

按照我的评论，您应该确保使用最新的模板来创建 cocos2d 项目。某些模板仅适用于特定的 Xcode 版本，因此请确保为您的 xcode 版本使用正确的模板（有一些适用于 xcode 3.x，另一些适用于 xcode 4.x）

# database - 如何连接dbml和数据库？

> ID：15356256
> 
> 赞同：1
> 
> 时间：2013-03-12T08:19:31.510
> 
> 标签：database, linq-to-sql, visual-studio-2012, sdf

嗨，我是数据库概念和数据库相关编程的新手。现在我想在我的应用程序中创建一个本地数据库。我将 Visual Studio 2012 用于简单的基于桌面的应用程序。我`PersonDatabase.sdf`也在服务器资源管理器中创建了一个本地数据库“”及其显示。现在做一些谷歌我知道我需要在我的解决方案资源管理器中创建一个`.dbml`文件`PersonDatabase.dbml`。

我确实添加了 -> 新项目 -> LINQ to SQL 类，它也显示在解决方案资源管理器中。但是在对象关系设计器中，我不能拖放已经可用的数据库。它显示`"the selected object(s) use an unsupported data provider "`.

我在 Google 上发现我需要使用带有 VS 2012 的 Windows 8 Pro`sqlClient.exe`中的工具中的可用 工具手动创建它`C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\bin\NETFX 4.0`。当我在文件夹中时，`"NETFX 4.0"`我运行以下命令“sqlMetal.exe PersonDatabase.sdf /dbml:PersonDatabase.dbml”。但是在命令提示符中它说 PersonDatabse.sdf 不存在。然后我给出了整个路径，但由于“Visual Studio”中的空间问题，它没有执行。最后我确实喜欢这个

`C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\bin\NETFX 4.0 Tools>SqlMetal .exe @"C:\Users\kumar\Docs\Visual Studio 2012\Projects\Junk\DBMLDatabaseConn ection\DBMLDatabaseConnection\PersonDatabase.sdf" /dbml:@"C:\Users\kumar\Docs\Visual Studio 2012\Projects\Junk\DBMLDatabaseConnection\DBMLDatabaseConnection\PersonDatabase.dbml"`

但它说 PersonDatabase.sdf 不存在。但它存在于该目录中。我浏览了几个网站，他们也说了同样的程序。难道我做错了什么？这可以做到吗？另一个问题是 dbml 在这里连接到 sdf 的作用是什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T13:04:39.993

执行相同操作的语法略有不同 使用以下语法：

```
SqlMetal /dbml:PersonDatabase.sdf PersonDatabase.dbml 
```

# javascript - 将值传递给 javascript onClick()

> ID：15356257
> 
> 赞同：8
> 
> 时间：2013-03-12T08:19:31.603
> 
> 标签：javascript, jquery, html

我有一个带有一些链接的网站。当用户点击每个链接时，它应该传递不同的整数值，我可以在 .js 文件中使用这些值。我必须根据这些整数值进行一些操作。请帮忙！！！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T08:24:54.383

虽然这个问题很可能会被关闭。您可以调用函数并将整数作为参数传递。

试试这个

```
 <a href="#"  onclick="yourFunction('1')">click1</a>
 <a href="#"  onclick="yourFunction('2')">click2</a> 
```

javascript

```
 function yourFunction(intValue){
   alert(intValue);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-28T18:50:18.577

```
<!DOCTYPE html>
<html>
<head>
    <title>Functions</title>
</head>
<body>
<script type="text/javascript">

function add(firstnum,secondnum) {
     document.write(firstnum+secondnum);
}

</script>
<h1>onclick Function called</h1>
<input type="button" value="Sum Me" onclick="add(2,3)" />
</body>
</html> 
```

## 输出：

5

# awk - 选择性印刷

> ID：15356263
> 
> 赞同：2
> 
> 时间：2013-03-12T08:19:51.870
> 
> 标签：awk

我有大文件，我想做一些选择打印。我想根据模式匹配找到一行并打印该行以及所有后续行，直到文件末尾。我会使用 sed，但是，匹配仅基于第一列和第二列。

```
awk '{if($1=="XYZ" && $2=="GT") print $0}' in.file > out.file 
```

如何更改以上内容以打印匹配后的所有行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T08:23:49.963

使用打印标志：

```
awk '$1=="XYZ" && $2=="GT" { f = 1 } f' in.file > out.file 
```

当`f`满足这两个条件时，设置为 1。`f`脚本末尾的孤单在`{ print $0 }`1 时调用默认块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:14:22.093

或者尝试使用范围模式：

```
awk '$1=="XYZ" && $2=="GT",end' file 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T10:46:02.023

对我来说，你的`sed`方法很好。如果分隔符是`;`：

```
sed -n -e '/^XYZ;GT;/,$p' your_file 
```

# nhibernate - 运行 NServicebus 服务时出现死锁导致连接损坏

> ID：15356264
> 
> 赞同：5
> 
> 时间：2013-03-12T08:19:53.537
> 
> 标签：nhibernate, deadlock, nservicebus

我们正在为 Web 应用程序运行 NServiceBus，以处理用户执行“类似批处理”操作的情况。就像发射一个影响 1000 个实体的命令..

它运行良好，但是在中等负载期间我们会遇到一些死锁，这不是问题，只需重试消息.. 对吗？:)

当下一条消息到达并尝试打开连接时，就会出现问题。然后连接是“损坏的”。

我们收到以下错误： System.Data.SqlClient.SqlException (0x80131904): New request is not allowed to start 因为它应该带有有效的事务描述符

我在网上搜索过，我认为我们的问题是报告的[NH“错误”](https://nhibernate.jira.com/browse/NH-3023)：

解决方法应该是禁用连接池。但我不喜欢那样，因为性能会降低..

我们正在运行 NServiceBus 2.6、NHibernate 3.3。

有人对这个有经验么？升级 NServiceBus 有帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:49:16.140

我过去见过这种情况，如果您的设计允许，请尝试将事务分成两部分，如果您将消息事务一直流向数据库操作，任何失败都会产生级联效应并且会影响（理想情况下应该't) 任何后续消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T09:00:33.043

除了更新命令中的 1000 个实体之外，您还可以发布一个事件来表示命令已完成，然后让多个订阅者对该事件进行操作以更新效果实体。在我看来，更新 1000 个实体的命令应该拆分为多个较小的命令。看看 sagas，看看如何处理长期运行的业务流程。例如，您可能有类似流程已启动、步骤 1 已完成、步骤 2 已完成、流程已完成等...

# c# - 字典类的内容消失，可能的线程问题？

> ID：15356266
> 
> 赞同：0
> 
> 时间：2013-03-12T08:19:54.937
> 
> 标签：c#, multithreading, visual-studio-2010, dictionary

请原谅我，但我不太确定我的代码哪里出了问题！我正在创建一个多线程 tcp 服务器，并尝试使用字典存储字符串。代码如下所示：

```
class Echo : Iprotocol
{
    public Dictionary<string, string> dictionary = new Dictionary<string, string>();
    private const int BUFFSIZE = 32; //buffer size

    private Socket client_sock; //Socket
    private Ilogger logger; // logger

    public Echo(Socket sock, Ilogger log)
    {
        this.client_sock = sock;
        this.logger = log;
    }
    public string handlewhois(string inname)
    {
        ArrayList entry = new ArrayList();
        string name = inname;
        string message = null;
        if (dictionary.ContainsKey(name) == true)
        {
            entry.Add(System.DateTime.Now + "Dictionary reference found at thread: " + Thread.CurrentThread.GetHashCode());
            message = dictionary[name];
        }
        else
        {
            entry.Add(System.DateTime.Now + "Dictionary reference not found at thread:  " + Thread.CurrentThread.GetHashCode());
            message = "ERROR: no entries found";
        }
        logger.writeEntry(entry);
        return message;
    }
    public string handlewhois(string inname, string inlocation)
    {
        ArrayList entry = new ArrayList();
        string name = inname;
        string location = inlocation;
        string message = null;
        entry.Add(System.DateTime.Now + "Dictionary reference created or updated at thread: " + Thread.CurrentThread.GetHashCode());
        dictionary.Add(name, location);
        message = "OK";
        logger.writeEntry(entry);
        return message;
    }
} 
```

它运行得非常好，但是当我在调试中逐步完成它时，我看到了创建的字典条目，但是当它到达该行时： logger.writeEntry(entry);

它突然消失了，字典不包含任何值。

我认为这可能与多线程有关，但老实说我不知道​​！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:38:47.913

字典不是线程安全的 - 请考虑改用[ConcurrentDictionary](http://msdn.microsoft.com/en-us/library/dd287191.aspx)。

从[字典文档](http://msdn.microsoft.com/en-gb/library/xfhwa508.aspx)：

> 只要不修改集合，字典就可以同时支持多个阅读器。即便如此，通过集合枚举本质上不是线程安全的过程。在枚举与写访问竞争的极少数情况下，必须在整个枚举期间锁定集合。要允许集合被多个线程访问以进行读写，您必须实现自己的同步。
> 
> 有关线程安全的替代方案，请参阅 ConcurrentDictionary。
> 
> 此类型的公共静态（在 Visual Basic 中为 Shared）成员是线程安全的。

有关更多信息，请参阅[此 SO 问题和答案](https://stackoverflow.com/q/7246005/1220971)。

# c# - “Win32Exception：目录名称无效”模拟和 UAC

> ID：15356267
> 
> 赞同：2
> 
> 时间：2013-03-12T08:19:55.703
> 
> 标签：c#, windows-7, process, uac, impersonation

我编写了一个程序，需要提升运行才能调用 WMI 对象的两种方法。如果由管理员组中的用户在“提升模式”下运行，它就像一个魅力。但现在的问题是它需要由每个人运行，而不是每个人都在他们工作的机器上拥有管理权限。所以我决定让程序重新启动自己，模拟“域管理员”组中的用户。

我的代码如下：

```
 ProcessStartInfo proc = new ProcessStartInfo();
 proc.WorkingDirectory = Environment.CurrentDirectory;
 proc.FileName = System.Windows.Forms.Application.ExecutablePath; ;
 proc.UserName = "USERNAME";
 SecureString secure = new SecureString();
 foreach (var item in "PASSWORD")
 {
     secure.AppendChar(item);
 }
 proc.Password = secure;
 proc.Domain = "DOMAIN";
 proc.UseShellExecute = false;
 proc.Verb = "runas";
 Process.Start(proc); 
```

启用 UAC 时有两个问题。首先，如果我没有明确地将应该被模拟的用户添加到程序的 installfolder 的 ACL 中（用户已经在管理员组中，该组对文件夹和其中包含的所有文件具有完全访问权限）它会抛出一个`System.ComponentModel.Win32Exception: The directory name is invalid`. 我仔细检查了目录路径，它实际上是有效的（当用户明确地在 ACL 中时有效）。

现在，如果明确添加了用户并且没有例外，则程序以用户身份运行但没有提升的权限，因此调用不起作用。

我究竟做错了什么？谢谢你的帮助。

我知道已经有一些关于类似问题的问题，但没有一个解决方案/答案解决了我的问题，或者它们不够详细并且太长时间处于非活动状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-13T15:00:06.393

我遇到了同样的问题，我无法同时提升和提供凭据。为了使用“runas”动词，您必须设置 UseShellExecute=true，但为了提供凭据，您必须将其设置为 false。我最终做的是测试管理员权限，如果它们不存在，则以具有本地管理员权限的单独用户身份重新启动我的应用程序。然后，我将使用“runas”动词运行 process.start，而无需提供凭据。此时，您的用户将收到 UAC 提示，选择“是”后，该进程将运行提升。我在 VB 中编写了我的，但想法是一样的，这是我的代码，IsUserAdminGroup 的使用来自：

[UAC自提升](http://code.msdn.microsoft.com/windowsdesktop/VBUACSelfElevation-39b7606f/sourcecode?fileId=52933&pathId=1873630815)

* * *

```
 Try
    'check if user is administrator
    Dim fInAdminGroup As Boolean = Me.IsUserInAdminGroup
    If (Me.IsUserInAdminGroup = False) Then
    'check if process is running under user you want to elevate
        If Not (System.Environment.UserName = "") Then
    'this process restarts the app as the desired admin user
            Dim path As String = Environment.CurrentDirectory
            Dim filename As String = Application.ExecutablePath
    'create secure string password
            Dim passwordPre As String = ""
            Dim passwordChars As Char() = passwordPre.ToCharArray()
            Dim password As New SecureString()
            For Each c As Char In passwordChars
                password.AppendChar(c)
            Next
            Dim procInfo As New System.Diagnostics.Process
            procInfo.StartInfo.FileName = filename
            procInfo.StartInfo.UserName = ""
            procInfo.StartInfo.Domain = ""
            procInfo.StartInfo.Password = password
            procInfo.StartInfo.UseShellExecute = False
    'load user profile was needed for a legacy application I used that failed without the user hive loaded
            'procInfo.StartInfo.LoadUserProfile = True
            procInfo.StartInfo.CreateNoWindow = True
            procInfo.StartInfo.WorkingDirectory = path
            procInfo.Start()
            Application.Exit()
        Else
            MsgBox("Unable to open, call support.", MsgBoxStyle.Critical, "Run Failed")
            Application.Exit()
        End If
    ElseIf (System.Environment.UserName = "") Then
        Me.Visible = False
        Me.Hide()
    'this process starts the desired app elevated
        Dim procInfo As New System.Diagnostics.Process
        procInfo.StartInfo.FileName = "ptpublisher.exe"
        procInfo.StartInfo.Verb = "runas"
        procInfo.StartInfo.UseShellExecute = True
        procInfo.StartInfo.CreateNoWindow = True
        procInfo.StartInfo.WorkingDirectory = "C:\Program Files (x86)\Primera Technology\PTPublisher"
        procInfo.StartInfo.Arguments = ""
        procInfo.Start()
        Application.Exit()
    End If
Catch ex As Exception
    MsgBox(ex.Message, MsgBoxStyle.Critical, "Run Failed")
    Application.Exit()
End Try 
```

# wpf - WPF 将线性渐变属性与 Button 绑定

> ID：15356269
> 
> 赞同：2
> 
> 时间：2013-03-12T08:20:09.320
> 
> 标签：wpf, wpf-4.0

我想将渐变属性绑定到按钮。我正在使用下面的代码。我能够绑定样式。你能建议我应该如何绑定 linergradientbrush 属性吗？

```
 <Window.Resources>
    <ResourceDictionary>
        <LinearGradientBrush x:Key="buttonStyleGradient"  EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="White" Offset="0" />
            <GradientStop Color="#FFACC3F5" Offset="1" />
        </LinearGradientBrush>
       <Style x:Key="buttonStyle" TargetType="Button">
           <Setter Property="FontFamily" Value="Vrinda"/>
          <Setter Property="FontSize" Value="24"/>
          <Setter Property="Padding" Value="8,4" />
          <Setter Property="Margin" Value="0" />
       </Style>
    </ResourceDictionary>
</Window.Resources><Button  Style="{StaticResource buttonStyle}" >                  
                <Label>Home</Label>
            </Button> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T08:27:31.490

只需将其添加为`buttonStyleGradient`属性：`buttonStyle``Background`

```
<Style x:Key="buttonStyle" TargetType="Button">
  <Setter Property="FontFamily" Value="Vrinda"/>
  <Setter Property="FontSize" Value="24"/>
  <Setter Property="Padding" Value="8,4" />
  <Setter Property="Margin" Value="0" />
  <Setter Property="Background" Value="{StaticResource buttonStyleGradient}" />
</Style> 
```

如果您不想将其添加到样式中，则可以像这样手动放入按钮：

```
<Button  Style="{StaticResource buttonStyle}" Background="{StaticResource buttonStyleGradient}" > 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T08:27:10.037

您需要一个属性来应用渐变，尝试背景：

```
<Setter Property="Background" Value="{StaticResource buttonStyleGradient}"/> 
```

# ruby-on-rails - 我将如何遍历集合的子项并按类别对它们进行分组？

> ID：15356270
> 
> 赞同：0
> 
> 时间：2013-03-12T08:20:10.323
> 
> 标签：ruby-on-rails

我有一个用户锻炼的集合。锻炼包含一系列练习。每个练习都有一个类别。

我想遍历锻炼集合并按锻炼类别对它们进行分组。

让我失望的是它`exercise_workouts`是一个连接模型。例如：

`#<ExerciseWorkout id: 50, exercise_id: 14, workout_id: 42, description: nil, created_at: "2013-03-12 08:15:17", updated_at: "2013-03-12 08:15:17", user_id: nil>`

```
.exercises
  %h1.exercise-type-title Lifting Exercises
  = render @workout.exercise_workouts 
```

我想`@workout.exercise_workouts`通过练习按可用类别呈现部件组。所以我会看到类似的东西

```
.exercises
  %h1.exercise-type-title Lifting Exercises
  = render @workout.exercise_workouts (lifting)
  %h1.exercise-type-title Running Exercises
  = render @workout.exercise_workouts (running) 
```

不知道该怎么做？并且也不希望对每个类别进行硬编码，而只列出通过智能迭代器可用的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:28:41.730

你能试试下面的（我不确定我是否有基于类的部分正确的名称`exercise_workouts`）

```
@workout.exercise_workouts.group_by(&:category).each do |category, exercises|
  = render partial: '/exercise_workouts/exercise_workout', collection: exercises, locals: { category: category } 
```

更新：访问类别`exercise`

您可以将循环更改为

```
@workout.exercise_workouts.group_by { |ew| ew.exercise.category }.each do |category, exercises|
  = render partial: '/exercise_workouts/exercise_workout', collection: exercises, locals: { category: category } 
```

或者您可以将类别属性委托给在 exercise_workout 模型上锻炼

```
#exercise_workout.rb
delegate :category, to: :exercise 
```

并且仍然使用第一个版本。就个人而言，我更喜欢第二种解决方案。

# iphone - 如何在 iphone 中使用 Aspx.net 获取 Xml 或 Json 格式的数据

> ID：15356272
> 
> 赞同：0
> 
> 时间：2013-03-12T08:20:14.907
> 
> 标签：iphone, objective-c

我是电话编程的新手。我有一个网站链接，使用用户名和密码可以登录服务器，在那里我可以获得一些数据。现在该网址是 Aspx.net 格式。通过使用下面的代码我可以登录到服务器。

```
-(IBAction)buttonClick:(id)sender
{
    TransactionController *t=[[TransactionController alloc]init];
    [self presentModalViewController:t animated:YES];
    NSString* username = nameInput.text;
    NSString* pass = passInput.text;

    if([nameInput.text isEqualToString:@"" ]|| [passInput.text isEqualToString:@""])
    {

        greeting.text = @"Input Your Value";
        [nameInput resignFirstResponder];
        [passInput resignFirstResponder];
        return;
    }

    NSString *post =
    [[NSString alloc] initWithFormat:@"uname=%@&pwd=%@",username,pass];

    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];
       NSLog(@"%@",postLength);
    NSURL *url = [NSURL URLWithString:@"http://www.gjhouse.com/login43.aspx"];
      NSLog(@"%@",url);
    NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
     NSLog(@"This Aslam");
          NSLog(@"%@",theRequest);
    [theRequest setHTTPMethod:@"POST"];
    //[theRequest setValue:postLength forHTTPHeaderField:@"Content-Type"];
    [theRequest setValue:@"text/xml; charset=UTF-8" forHTTPHeaderField:@"Content-type"];
    [theRequest setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [theRequest setHTTPBody:postData];
    NSLog(@"This Aslam");
    NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

    if( theConnection )
    {
        webData = [NSMutableData data];
    }
    else
    {

    }

    [nameInput resignFirstResponder];
    [passInput resignFirstResponder];
    nameInput.text = nil;
    passInput.text = nil;

}

-(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [webData setLength: 0];
}
-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{

    [webData appendData:data];
    NSLog(@"%@",webData);
}
-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{

    //[connection release];
   // [webData release];
}
-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{

    NSString *loginStatus = [[NSString alloc] initWithBytes: [webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding];
   // NSLog(loginStatus);
       NSLog(@"%@",webData);
    NSLog(@"Hai ");
    greeting.text = loginStatus;
   // [loginStatus release];

    //[connection release];
   // [webData release];
} 
```

登录后，我将在控制台中获取数据，如下所示

```
2013-03-12 13:32:19.616 Cafezee[366:11303] 23
2013-03-12 13:32:19.621 Cafezee[366:11303] http://www.gjhouse.com/login43.aspx
2013-03-12 13:32:19.624 Cafezee[366:11303] This Aslam
2013-03-12 13:32:19.625 Cafezee[366:11303] <NSMutableURLRequest http://www.gjhouse.com/login43.aspx>
2013-03-12 13:32:19.627 Cafezee[366:11303] This Aslam
2013-03-12 13:32:20.792 Cafezee[366:11303] <0d0a3c21 444f4354 59504520 68746d6c 20505542 4c494320 222d2f2f 5733432f 2f445444 20584854 4d4c2031 2e302054 72616e73 6974696f 6e616c2f 2f454e22 20226874 74703a2f 2f777777 2e77332e 6f72672f 54522f78 68746d6c 312f4454 442f7868 746d6c31 2d747261 6e736974 696f6e61 6c2e6474 64223e0d 0a0d0a3c 68746d6c 20786d6c 6e733d22 68747470 3a2f2f77 77772e77 332e6f72 672f3139 39392f78 68746d6c 223e0d0a 3c686561 64206964 3d224865 61643122 3e3c6c69 6e6b2068 7265663d 22417070 5f546865 6d65732f 44656661 756c742f 674a486f 75736553 74796c65 2e637373 22207479 70653d22 74657874 2f637373 22207265 6c3d2273 74796c65 73686565 7422202f 3e3c7469 746c653e 0d0a094c 6f67696e 20506167 650d0a3c 2f746974 6c653e3c 6c696e6b 2072656c 3d225374 796c6573 68656574 22206872 65663d22 2e2e2f41 70705f54 68656d65 732f4465 6661756c 742f674a 486f7573 65537479 6c652e63 73732220 2f3e3c2f 68656164 3e0d0a0d 0a3c626f 64793e0d 0a202020 203c666f 726d206e 616d653d 22666f72 6d312220 6d657468 6f643d22 706f7374 22206163 74696f6e 3d226c6f 67696e34 332e6173 70782220 69643d22 666f726d 31223e0d 0a3c696e 70757420 74797065 3d226869 6464656e 22206e61 6d653d22 5f5f5649 45575354 41544522 2069643d 225f5f56 49455753 54415445 22207661 6c75653d 222f7745 50447755 4b4c546b 784e6a51 794e7a51 354d4752 6b45776c 66735766 31477a75 7450665a 784b4136 2f776333 5078646f 3d22202f 3e0d0a0d 0a202020 203c6469 763e0d0a 20202020 3c646976 2069643d 2250616e 656c4372 6564656e 7469616c 73223e0d 0a090d0a 20202020 20202020 3c627220 2f3e0d0a 20202020 20202020 3c627220 2f3e0d0a 20202020 20202020 3c627220 2f3e0d0a 20202020 20202020 3c746162 6c652061 6c69676e 3d226365 6e746572 22207769 6474683d 22343130 22206365 6c6c7370 6163696e 673d2230 22206365 6c6c7061 6464696e 673d2230 2220626f 72646572 3d223022 3e0d0a20 20202020 20202020 2020203c 74723e0d 0a202020 20202020 20202020 20202020 203c7464 20636c61 73733d22 70616765 5f486561 64657222 20636f6c 7370616e 3d223322 3e0d0a20 20202020 20202020 20202020 20202020 2020203c 7370616e 2069643d 224c626c 48656164 6572223e 506c6561 73652065 6e746572 20796f75 72206c6f 67696e20 64657461 696c7320 20202020 3c2f7370 616e3e0d 0a202020 20202020 20202020 20202020 203c2f74 643e0d0a 20202020 20202020 20202020 3c2f7472 3e0d0a20 20202020 20202020 2020203c 74723e0d 0a202020 20202020 20202020 20202020 203c7464 20737479 6c653d22 68656967 68743a20 35707822 3e0d0a20 20202020 20202020 20202020 2020203c 2f74643e 0d0a2020 20202020 20202020 20203c2f 74723e20 200d0a20 20202020 20202020 2020203c 74723e0d 0a202020 20202020 20202020 20202020 203c7464 20737479 6c653d22 77696474 683a3130 3070783b 2220636c 6173733d 226c6162 656c5f73 74796c65 31222061 6c69676e 3d227269 67687422 3e0d0a20 20202020 20202020 20202020 20202020 2020203c 7370616e 2069643d 224c626c 55736572 4e616d65 2220636c 6173733d 226c6162 656c5f73 74796c65 31223e55 73657220 4e616d65 203ac2a0 3c2f7370 616e3e0d 0a202020 20202020 20202020 20202020 203c2f74 643e0d0a 20202020 20202020 20202020 20202020 3c746420 7374796c 653d2277 69647468 3a333030 70783b22 20616c69 676e3d22 6c656674 223e0d0a 20202020 20202020 20202020 20202020 20202020 3c696e70 7574206e 616d653d 22547874 55736572 4e616d65 22207479 70653d22 74657874 22206d61 786c656e 6774683d 22363022 2069643d 22547874 55736572 4e616d65 2220636c 6173733d 22746578 745f7374 796c6531 22202f3e 0d0a2020 20202020 20202020 20202020 20203c2f 74643e0d 0a202020 20202020 20202020 20202020 203c7464 20737479 6c653d22 77696474 683a3130 70783b22 20616c69 676e3d22 6c656674 2220636c 6173733d 22657272 6d657373 6167655f 74657874 223e0d0a 20202020 20202020 20202020 20202020 20202020 266e6273 703b0d0a 20202020 20202020 20202020 20202020 3c2f7464 3e202020 20202020 20202020 20202020 0d0a2020 20202020 20202020 20203c2f 74723e0d 0a202020 20202020 20202020 203c7472 3e0d0a20 20202020 20202020 20202020 2020203c 74642073 74796c65 3d226865 69676874 3a203570 78223e0d 0a202020 20202020 20202020 20202020 203c2f74 643e0d0a 20202020 20202020 20202020 3c2f7472 3e20200d 0a202020 20202020 20202020 203c7472 3e0d0a20 20202020 20202020 20202020 2020203c 74642073 74796c65 3d227769 6474683a 31303070 783b2220 616c6967 6e3d2272 69676874 223e0d0a 20202020 20202020 20202020 20202020 20202020 3c737061 6e206964 3d224c62 6c506173 73776f72 64222063 6c617373 3d226c61 62656c5f 7374796c 6531223e 50617373 776f7264 203ac2a0 3c2f7370 616e3e0d 0a202020 20202020 20202020 20202020 203c2f74 643e0d0a 20202020 20202020 20202020 20202020 3c746420 7374796c 653d2277 69647468 3a333030 70783b22 20616c69 676e3d22 6c656674 223e0d0a 20202020 20202020 20202020 20202020 20202020 3c696e70 7574206e 616d653d 22547874 50617373 776f7264 22207479 70653d22 70617373 776f7264 22206d61 786c656e 6774683d 22323022 2069643d 22547874 50617373 776f7264 2220636c 6173733d 22746578 745f7374 796c6531 22202f3e 0d0a2020 20202020 20202020 20202020 20203c2f 74643e0d 0a202020 20202020 20202020 20202020 203c7464 20737479 6c653d22 77696474 683a3130 70783b22 20616c69 676e3d22 6c656674 2220636c 6173733d 22657272 6d657373 6167655f 74657874 223e0d0a 20202020 20202020 20202020 20202020 20202020 266e6273 703b0d0a 20202020 20202020 20202020 20202020 3c2f7464 3e0d0a20 20202020 20202020 2020203c 2f74723e 0d0a2020 20202020 20202020 20203c74 723e0d0a 20202020 20202020 20202020 20202020 3c746420 7374796c 653d2268 65696768 743a2035 7078223e 0d0a2020 20202020 20202020 20202020 20203c2f 74643e0d 0a202020 20202020 20202020 203c2f74 723e2020 0d0a2020 20202020 20202020 20203c74 723e0d0a 20202020 20202020 20202020 20202020 3c746420 616c6967 6e3d2263 656e7465 72222063 6f6c7370 616e3d22 33223e0d 0a202020 20202020 20202020 20202020 20202020 203c696e 70757420 74797065 3d227375 626d6974 22206e61 6d653d22 42746e53 75626d69 74222076 616c7565 3d225375 626d6974 22206f6e 636c6963 6b3d226a 61766173 63726970 743a5765 62466f72 6d5f446f 506f7374 4261636b 57697468 4f707469 6f6e7328 6e657720 57656246 6f726d5f 506f7374 4261636b 4f707469 6f6e7328 2671756f 743b4274 6e537562 6d697426 71756f74 3b2c2026 71756f74 3b267175 6f>
2013-03-12 13:32:21.099 Cafezee[366:11303] <0d0a3c21 444f4354 59504520 68746d6c 20505542 4c494320 222d2f2f 5733432f 2f445444 20584854 4d4c2031 2e302054 72616e73 6974696f 6e616c2f 2f454e22 20226874 74703a2f 2f777777 2e77332e 6f72672f 54522f78 68746d6c 312f4454 442f7868 746d6c31 2d747261 6e736974 696f6e61 6c2e6474 64223e0d 0a0d0a3c 68746d6c 20786d6c 6e733d22 68747470 3a2f2f77 77772e77 332e6f72 672f3139 39392f78 68746d6c 223e0d0a 3c686561 64206964 3d224865 61643122 3e3c6c69 6e6b2068 7265663d 22417070 5f546865 6d65732f 44656661 756c742f 674a486f 75736553 74796c65 2e637373 22207479 70653d22 74657874 2f637373 22207265 6c3d2273 74796c65 73686565 7422202f 3e3c7469 746c653e 0d0a094c 6f67696e 20506167 650d0a3c 2f746974 6c653e3c 6c696e6b 2072656c 3d225374 796c6573 68656574 22206872 65663d22 2e2e2f41 70705f54 68656d65 732f4465 6661756c 742f674a 486f7573 65537479 6c652e63 73732220 2f3e3c2f 68656164 3e0d0a0d 0a3c626f 64793e0d 0a202020 203c666f 726d206e 616d653d 22666f72 6d312220 6d657468 6f643d22 706f7374 22206163 74696f6e 3d226c6f 67696e34 332e6173 70782220 69643d22 666f726d 31223e0d 0a3c696e 70757420 74797065 3d226869 6464656e 22206e61 6d653d22 5f5f5649 45575354 41544522 2069643d 225f5f56 49455753 54415445 22207661 6c75653d 222f7745 50447755 4b4c546b 784e6a51 794e7a51 354d4752 6b45776c 66735766 31477a75 7450665a 784b4136 2f776333 5078646f 3d22202f 3e0d0a0d 0a202020 203c6469 763e0d0a 20202020 3c646976 2069643d 2250616e 656c4372 6564656e 7469616c 73223e0d 0a090d0a 20202020 20202020 3c627220 2f3e0d0a 20202020 20202020 3c627220 2f3e0d0a 20202020 20202020 3c627220 2f3e0d0a 20202020 20202020 3c746162 6c652061 6c69676e 3d226365 6e746572 22207769 6474683d 22343130 22206365 6c6c7370 6163696e 673d2230 22206365 6c6c7061 6464696e 673d2230 2220626f 72646572 3d223022 3e0d0a20 20202020 20202020 2020203c 74723e0d 0a202020 20202020 20202020 20202020 203c7464 20636c61 73733d22 70616765 5f486561 64657222 20636f6c 7370616e 3d223322 3e0d0a20 20202020 20202020 20202020 20202020 2020203c 7370616e 2069643d 224c626c 48656164 6572223e 506c6561 73652065 6e746572 20796f75 72206c6f 67696e20 64657461 696c7320 20202020 3c2f7370 616e3e0d 0a202020 20202020 20202020 20202020 203c2f74 643e0d0a 20202020 20202020 20202020 3c2f7472 3e0d0a20 20202020 20202020 2020203c 74723e0d 0a202020 20202020 20202020 20202020 203c7464 20737479 6c653d22 68656967 68743a20 35707822 3e0d0a20 20202020 20202020 20202020 2020203c 2f74643e 0d0a2020 20202020 20202020 20203c2f 74723e20 200d0a20 20202020 20202020 2020203c 74723e0d 0a202020 20202020 20202020 20202020 203c7464 20737479 6c653d22 77696474 683a3130 3070783b 2220636c 6173733d 226c6162 656c5f73 74796c65 31222061 6c69676e 3d227269 67687422 3e0d0a20 20202020 20202020 20202020 20202020 2020203c 7370616e 2069643d 224c626c 55736572 4e616d65 2220636c 6173733d 226c6162 656c5f73 74796c65 31223e55 73657220 4e616d65 203ac2a0 3c2f7370 616e3e0d 0a202020 20202020 20202020 20202020 203c2f74 643e0d0a 20202020 20202020 20202020 20202020 3c746420 7374796c 653d2277 69647468 3a333030 70783b22 20616c69 676e3d22 6c656674 223e0d0a 20202020 20202020 20202020 20202020 20202020 3c696e70 7574206e 616d653d 22547874 55736572 4e616d65 22207479 70653d22 74657874 22206d61 786c656e 6774683d 22363022 2069643d 22547874 55736572 4e616d65 2220636c 6173733d 22746578 745f7374 796c6531 22202f3e 0d0a2020 20202020 20202020 20202020 20203c2f 74643e0d 0a202020 20202020 20202020 20202020 203c7464 20737479 6c653d22 77696474 683a3130 70783b22 20616c69 676e3d22 6c656674 2220636c 6173733d 22657272 6d657373 6167655f 74657874 223e0d0a 20202020 20202020 20202020 20202020 20202020 266e6273 703b0d0a 20202020 20202020 20202020 20202020 3c2f7464 3e202020 20202020 20202020 20202020 0d0a2020 20202020 20202020 20203c2f 74723e0d 0a202020 20202020 20202020 203c7472 3e0d0a20 20202020 20202020 20202020 2020203c 74642073 74796c65 3d226865 69676874 3a203570 78223e0d 0a202020 20202020 20202020 20202020 203c2f74 643e0d0a 20202020 20202020 20202020 3c2f7472 3e20200d 0a202020 20202020 20202020 203c7472 3e0d0a20 20202020 20202020 20202020 2020203c 74642073 74796c65 3d227769 6474683a 31303070 783b2220 616c6967 6e3d2272 69676874 223e0d0a 20202020 20202020 20202020 20202020 20202020 3c737061 6e206964 3d224c62 6c506173 73776f72 64222063 6c617373 3d226c61 62656c5f 7374796c 6531223e 50617373 776f7264 203ac2a0 3c2f7370 616e3e0d 0a202020 20202020 20202020 20202020 203c2f74 643e0d0a 20202020 20202020 20202020 20202020 3c746420 7374796c 653d2277 69647468 3a333030 70783b22 20616c69 676e3d22 6c656674 223e0d0a 20202020 20202020 20202020 20202020 20202020 3c696e70 7574206e 616d653d 22547874 50617373 776f7264 22207479 70653d22 70617373 776f7264 22206d61 786c656e 6774683d 22323022 2069643d 22547874 50617373 776f7264 2220636c 6173733d 22746578 745f7374 796c6531 22202f3e 0d0a2020 20202020 20202020 20202020 20203c2f 74643e0d 0a202020 20202020 20202020 20202020 203c7464 20737479 6c653d22 77696474 683a3130 70783b22 20616c69 676e3d22 6c656674 2220636c 6173733d 22657272 6d657373 6167655f 74657874 223e0d0a 20202020 20202020 20202020 20202020 20202020 266e6273 703b0d0a 20202020 20202020 20202020 20202020 3c2f7464 3e0d0a20 20202020 20202020 2020203c 2f74723e 0d0a2020 20202020 20202020 20203c74 723e0d0a 20202020 20202020 20202020 20202020 3c746420 7374796c 653d2268 65696768 743a2035 7078223e 0d0a2020 20202020 20202020 20202020 20203c2f 74643e0d 0a202020 20202020 20202020 203c2f74 723e2020 0d0a2020 20202020 20202020 20203c74 723e0d0a 20202020 20202020 20202020 20202020 3c746420 616c6967 6e3d2263 656e7465 72222063 6f6c7370 616e3d22 33223e0d 0a202020 20202020 20202020 20202020 20202020 203c696e 70757420 74797065 3d227375 626d6974 22206e61 6d653d22 42746e53 75626d69 74222076 616c7565 3d225375 626d6974 22206f6e 636c6963 6b3d226a 61766173 63726970 743a5765 62466f72 6d5f446f 506f7374 4261636b 57697468 4f707469 6f6e7328 6e657720 57656246 6f726d5f 506f7374 4261636b 4f707469 6f6e7328 2671756f 743b4274 6e537562 6d697426 71756f74 3b2c2026 71756f74 3b267175 6f743b2c 20747275 652c2026 71756f74 3b267175 6f743b2c 20267175 6f743b26 71756f74 3b2c2066 616c7365 2c206661 6c736529 29222069 643d2242 746e5375 626d6974 2220636c 6173733d 2262746e 5f737479 6c653122 202f3e0d 0a202020 20202020 20202020 20202020 20202020 203c696e 70757420 74797065 3d227375 626d6974 22206e61 6d653d22 42746e43 616e6365 6c222076 616c7565 3d224361 6e63656c 22206f6e 636c6963 6b3d226a 61766173 63726970 743a5765 62466f72 6d5f446f 506f7374 4261636b 57697468 4f707469 6f6e7328 6e657720 57656246 6f726d5f 506f7374 4261636b 4f707469 6f6e7328 2671756f 743b4274 6e43616e 63656c26 71756f74 3b2c2026 71756f74 3b267175 6f743b2c 20747275 652c2026 71756f74 3b267175 6f743b2c 20267175 6f743b26 71756f74 3b2c2066 616c7365 2c206661 6c736529 29222069 643d2242 746e4361 6e63656c 2220636c 6173733d 2262746e 5f737479 6c653122 202f3e0d 0a202020 20202020 20202020 20202020 203c2f74 643e0d0a 20202020 20202020 20202020 3c2f7472 3e0d0a20 20202020 20202020 2020203c 74723e0d 0a202020 20202020 20202020 20202020 203c7464 20737479 6c653d22 68656967 68743a20 35707822 3e0d0a20 20202020 20202020 20202020 2020203c 2f74643e 0d0a2020 20202020 20202020 20203c2f 74723e20 200d0a20 20202020 20202020 2020203c 74723e0d 0a202020 20202020 20202020 20202020 20203c74 64207374 796c653d 22776964 74683a32 36307078 3b222061 6c69676e 3d226c65 66742220 636f6c73 70616e3d 22332220 636c6173 733d2265 72726d65 73736167 655f7465 7874223e 0d0a2020 20202020 20202020 20202020 20202020 2020266e 6273703b 3c627220 2f3e0d0a 20202020 20202020 20202020 20202020 20202020 266e6273 703b3c62 72202f3e 0d0a2020 20202020 20202020 20202020 20202020 2020266e 6273703b 20202020 0d0a2020 20202020 20202020 20202020 20203c2f 74643e0d 0a202020 20202020 20202020 203c2f74 723e0d0a 20202020 20202020 20202020 3c74723e 0d0a2020 20202020 20202020 20202020 20203c74 6420636f 6c737061 6e3d2233 2220616c 69676e3d 2263656e 74657222 3e0d0a20 20202020 20202020 20202020 20202020 2020203c 7370616e 2069643d 224c626c 4d657373 61676522 20636c61 73733d22 6572726d 65737361 67655f74 65787422 3e3c2f73 70616e3e 0d0a2020 20202020 20202020 20202020 20203c2f 74643e0d 0a202020 20202020 20202020 203c2f74 723e0d0a 20202020 20202020 3c2f7461 626c653e 0d0a2020 20200d0a 3c2f6469 763e0d0a 20202020 3c2f6469 763e0d0a 20202020 3c2f666f 726d3e0d 0a3c2f62 6f64793e 0d0a3c2f 68746d6c 3e0d0a0d 0a>
2013-03-12 13:32:21.102 Cafezee[366:11303] <0d0a3c21 444f4354 59504520 68746d6c 20505542 4c494320 222d2f2f 5733432f 2f445444 20584854 4d4c2031 2e302054 72616e73 6974696f 6e616c2f 2f454e22 20226874 74703a2f 2f777777 2e77332e 6f72672f 54522f78 68746d6c 312f4454 442f7868 746d6c31 2d747261 6e736974 696f6e61 6c2e6474 64223e0d 0a0d0a3c 68746d6c 20786d6c 6e733d22 68747470 3a2f2f77 77772e77 332e6f72 672f3139 39392f78 68746d6c 223e0d0a 3c686561 64206964 3d224865 61643122 3e3c6c69 6e6b2068 7265663d 22417070 5f546865 6d65732f 44656661 756c742f 674a486f 75736553 74796c65 2e637373 22207479 70653d22 74657874 2f637373 22207265 6c3d2273 74796c65 73686565 7422202f 3e3c7469 746c653e 0d0a094c 6f67696e 20506167 650d0a3c 2f746974 6c653e3c 6c696e6b 2072656c 3d225374 796c6573 68656574 22206872 65663d22 2e2e2f41 70705f54 68656d65 732f4465 6661756c 742f674a 486f7573 65537479 6c652e63 73732220 2f3e3c2f 68656164 3e0d0a0d 0a3c626f 64793e0d 0a202020 203c666f 726d206e 616d653d 22666f72 6d312220 6d657468 6f643d22 706f7374 22206163 74696f6e 3d226c6f 67696e34 332e6173 70782220 69643d22 666f726d 31223e0d 0a3c696e 70757420 74797065 3d226869 6464656e 22206e61 6d653d22 5f5f5649 45575354 41544522 2069643d 225f5f56 49455753 54415445 22207661 6c75653d 222f7745 50447755 4b4c546b 784e6a51 794e7a51 354d4752 6b45776c 66735766 31477a75 7450665a 784b4136 2f776333 5078646f 3d22202f 3e0d0a0d 0a202020 203c6469 763e0d0a 20202020 3c646976 2069643d 2250616e 656c4372 6564656e 7469616c 73223e0d 0a090d0a 20202020 20202020 3c627220 2f3e0d0a 20202020 20202020 3c627220 2f3e0d0a 20202020 20202020 3c627220 2f3e0d0a 20202020 20202020 3c746162 6c652061 6c69676e 3d226365 6e746572 22207769 6474683d 22343130 22206365 6c6c7370 6163696e 673d2230 22206365 6c6c7061 6464696e 673d2230 2220626f 72646572 3d223022 3e0d0a20 20202020 20202020 2020203c 74723e0d 0a202020 20202020 20202020 20202020 203c7464 20636c61 73733d22 70616765 5f486561 64657222 20636f6c 7370616e 3d223322 3e0d0a20 20202020 20202020 20202020 20202020 2020203c 7370616e 2069643d 224c626c 48656164 6572223e 506c6561 73652065 6e746572 20796f75 72206c6f 67696e20 64657461 696c7320 20202020 3c2f7370 616e3e0d 0a202020 20202020 20202020 20202020 203c2f74 643e0d0a 20202020 20202020 20202020 3c2f7472 3e0d0a20 20202020 20202020 2020203c 74723e0d 0a202020 20202020 20202020 20202020 203c7464 20737479 6c653d22 68656967 68743a20 35707822 3e0d0a20 20202020 20202020 20202020 2020203c 2f74643e 0d0a2020 20202020 20202020 20203c2f 74723e20 200d0a20 20202020 20202020 2020203c 74723e0d 0a202020 20202020 20202020 20202020 203c7464 20737479 6c653d22 77696474 683a3130 3070783b 2220636c 6173733d 226c6162 656c5f73 74796c65 31222061 6c69676e 3d227269 67687422 3e0d0a20 20202020 20202020 20202020 20202020 2020203c 7370616e 2069643d 224c626c 55736572 4e616d65 2220636c 6173733d 226c6162 656c5f73 74796c65 31223e55 73657220 4e616d65 203ac2a0 3c2f7370 616e3e0d 0a202020 20202020 20202020 20202020 203c2f74 643e0d0a 20202020 20202020 20202020 20202020 3c746420 7374796c 653d2277 69647468 3a333030 70783b22 20616c69 676e3d22 6c656674 223e0d0a 20202020 20202020 20202020 20202020 20202020 3c696e70 7574206e 616d653d 22547874 55736572 4e616d65 22207479 70653d22 74657874 22206d61 786c656e 6774683d 22363022 2069643d 22547874 55736572 4e616d65 2220636c 6173733d 22746578 745f7374 796c6531 22202f3e 0d0a2020 20202020 20202020 20202020 20203c2f 74643e0d 0a202020 20202020 20202020 20202020 203c7464 20737479 6c653d22 77696474 683a3130 70783b22 20616c69 676e3d22 6c656674 2220636c 6173733d 22657272 6d657373 6167655f 74657874 223e0d0a 20202020 20202020 20202020 20202020 20202020 266e6273 703b0d0a 20202020 20202020 20202020 20202020 3c2f7464 3e202020 20202020 20202020 20202020 0d0a2020 20202020 20202020 20203c2f 74723e0d 0a202020 20202020 20202020 203c7472 3e0d0a20 20202020 20202020 20202020 2020203c 74642073 74796c65 3d226865 69676874 3a203570 78223e0d 0a202020 20202020 20202020 20202020 203c2f74 643e0d0a 20202020 20202020 20202020 3c2f7472 3e20200d 0a202020 20202020 20202020 203c7472 3e0d0a20 20202020 20202020 20202020 2020203c 74642073 74796c65 3d227769 6474683a 31303070 783b2220 616c6967 6e3d2272 69676874 223e0d0a 20202020 20202020 20202020 20202020 20202020 3c737061 6e206964 3d224c62 6c506173 73776f72 64222063 6c617373 3d226c61 62656c5f 7374796c 6531223e 50617373 776f7264 203ac2a0 3c2f7370 616e3e0d 0a202020 20202020 20202020 20202020 203c2f74 643e0d0a 20202020 20202020 20202020 20202020 3c746420 7374796c 653d2277 69647468 3a333030 70783b22 20616c69 676e3d22 6c656674 223e0d0a 20202020 20202020 20202020 20202020 20202020 3c696e70 7574206e 616d653d 22547874 50617373 776f7264 22207479 70653d22 70617373 776f7264 22206d61 786c656e 6774683d 22323022 2069643d 22547874 50617373 776f7264 2220636c 6173733d 22746578 745f7374 796c6531 22202f3e 0d0a2020 20202020 20202020 20202020 20203c2f 74643e0d 0a202020 20202020 20202020 20202020 203c7464 20737479 6c653d22 77696474 683a3130 70783b22 20616c69 676e3d22 6c656674 2220636c 6173733d 22657272 6d657373 6167655f 74657874 223e0d0a 20202020 20202020 20202020 20202020 20202020 266e6273 703b0d0a 20202020 20202020 20202020 20202020 3c2f7464 3e0d0a20 20202020 20202020 2020203c 2f74723e 0d0a2020 20202020 20202020 20203c74 723e0d0a 20202020 20202020 20202020 20202020 3c746420 7374796c 653d2268 65696768 743a2035 7078223e 0d0a2020 20202020 20202020 20202020 20203c2f 74643e0d 0a202020 20202020 20202020 203c2f74 723e2020 0d0a2020 20202020 20202020 20203c74 723e0d0a 20202020 20202020 20202020 20202020 3c746420 616c6967 6e3d2263 656e7465 72222063 6f6c7370 616e3d22 33223e0d 0a202020 20202020 20202020 20202020 20202020 203c696e 70757420 74797065 3d227375 626d6974 22206e61 6d653d22 42746e53 75626d69 74222076 616c7565 3d225375 626d6974 22206f6e 636c6963 6b3d226a 61766173 63726970 743a5765 62466f72 6d5f446f 506f7374 4261636b 57697468 4f707469 6f6e7328 6e657720 57656246 6f726d5f 506f7374 4261636b 4f707469 6f6e7328 2671756f 743b4274 6e537562 6d697426 71756f74 3b2c2026 71756f74 3b267175 6f743b2c 20747275 652c2026 71756f74 3b267175 6f743b2c 20267175 6f743b26 71756f74 3b2c2066 616c7365 2c206661 6c736529 29222069 643d2242 746e5375 626d6974 2220636c 6173733d 2262746e 5f737479 6c653122 202f3e0d 0a202020 20202020 20202020 20202020 20202020 203c696e 70757420 74797065 3d227375 626d6974 22206e61 6d653d22 42746e43 616e6365 6c222076 616c7565 3d224361 6e63656c 22206f6e 636c6963 6b3d226a 61766173 63726970 743a5765 62466f72 6d5f446f 506f7374 4261636b 57697468 4f707469 6f6e7328 6e657720 57656246 6f726d5f 506f7374 4261636b 4f707469 6f6e7328 2671756f 743b4274 6e43616e 63656c26 71756f74 3b2c2026 71756f74 3b267175 6f743b2c 20747275 652c2026 71756f74 3b267175 6f743b2c 20267175 6f743b26 71756f74 3b2c2066 616c7365 2c206661 6c736529 29222069 643d2242 746e4361 6e63656c 2220636c 6173733d 2262746e 5f737479 6c653122 202f3e0d 0a202020 20202020 20202020 20202020 203c2f74 643e0d0a 20202020 20202020 20202020 3c2f7472 3e0d0a20 20202020 20202020 2020203c 74723e0d 0a202020 20202020 20202020 20202020 203c7464 20737479 6c653d22 68656967 68743a20 35707822 3e0d0a20 20202020 20202020 20202020 2020203c 2f74643e 0d0a2020 20202020 20202020 20203c2f 74723e20 200d0a20 20202020 20202020 2020203c 74723e0d 0a202020 20202020 20202020 20202020 20203c74 64207374 796c653d 22776964 74683a32 36307078 3b222061 6c69676e 3d226c65 66742220 636f6c73 70616e3d 22332220 636c6173 733d2265 72726d65 73736167 655f7465 7874223e 0d0a2020 20202020 20202020 20202020 20202020 2020266e 6273703b 3c627220 2f3e0d0a 20202020 20202020 20202020 20202020 20202020 266e6273 703b3c62 72202f3e 0d0a2020 20202020 20202020 20202020 20202020 2020266e 6273703b 20202020 0d0a2020 20202020 20202020 20202020 20203c2f 74643e0d 0a202020 20202020 20202020 203c2f74 723e0d0a 20202020 20202020 20202020 3c74723e 0d0a2020 20202020 20202020 20202020 20203c74 6420636f 6c737061 6e3d2233 2220616c 69676e3d 2263656e 74657222 3e0d0a20 20202020 20202020 20202020 20202020 2020203c 7370616e 2069643d 224c626c 4d657373 61676522 20636c61 73733d22 6572726d 65737361 67655f74 65787422 3e3c2f73 70616e3e 0d0a2020 20202020 20202020 20202020 20203c2f 74643e0d 0a202020 20202020 20202020 203c2f74 723e0d0a 20202020 20202020 3c2f7461 626c653e 0d0a2020 20200d0a 3c2f6469 763e0d0a 20202020 3c2f6469 763e0d0a 20202020 3c2f666f 726d3e0d 0a3c2f62 6f64793e 0d0a3c2f 68746d6c 3e0d0a0d 0a> 
```

现在我想要的意思是，我想要 JSON 或 XML 格式的数据。通过使用它，我可以在 tableview 中显示数据。任何人都可以告诉我如何使用此代码获取 Json 或 Xml 数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:29:21.613

你已经完成了。

您正在从服务器获取数据并将其保存在 NSMutableData 对象中，您正在打印数据。

您需要将数据转换为字符串。

您正在这样做`connectionDidFinishLoading`：

```
NSString *loginStatus = [[NSString alloc] initWithBytes: [webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding];
NSlog(@"Data : %@",loginStatus); 
```

如果您的服务器以 JSON 或 XML 格式提供数据，`loginStatus`则将包含相应格式的数据。

# c# - C#更改背景颜色特定行

> ID：15356273
> 
> 赞同：11
> 
> 时间：2013-03-12T08:20:22.293
> 
> 标签：c#, wpf, silverlight, xaml

我从 Grid App (XAML) 模板（C# Windows Store）创建了一个新项目。到目前为止，我没有更改模板中的任何内容，但我想更改网格中特定行的背景颜色。

```
<!--
    This grid acts as a root panel for the page that defines two rows:
    * Row 0 contains the back button and page title
    * Row 1 contains the rest of the page layout
-->
<Grid Style="{StaticResource LayoutRootStyle}">
    <Grid.RowDefinitions>
        <RowDefinition Height="140"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions> 
```

我想从第 0 行（包含页面标题）更改背景颜色。有任何想法吗？？提前致谢！

这一行包括：

```
 <!-- Back button and page title -->
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <Button x:Name="backButton" Click="GoBack" IsEnabled="{Binding Frame.CanGoBack, ElementName=pageRoot}" Style="{StaticResource BackButtonStyle}"/>
        <TextBlock x:Name="pageTitle" Text="{StaticResource AppName}" Grid.Column="1" IsHitTestVisible="false" Style="{StaticResource PageHeaderTextStyle}"/>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-12T08:21:49.623

您不能在 Grid.Row 本身上设置背景颜色，而是在占据该行的任何内容上设置 Background 属性。

例如

```
<Grid Style="{StaticResource LayoutRootStyle}">
  <Grid.RowDefinitions>
    <RowDefinition Height="140"/>
    <RowDefinition Height="*"/>
  </Grid.RowDefinitions>
  <Grid Background="Red" Grid.Row="0">
    <TextBlock>Test</TextBlock>
  </Grid>
</Grid> 
```

编辑：为 Silverlight 更新；TextBlock 没有背景，因此您必须将控件放在另一个具有背景的边框或网格容器中。更新代码以反映这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-11T17:52:40.597

在需要的地方插入边框怎么样

```
<Grid Style="{StaticResource LayoutRootStyle}">
  <Grid.RowDefinitions>
    <RowDefinition Height="140"/>
    <RowDefinition Height="*"/>
  </Grid.RowDefinitions>
    <Border Background="Red" Grid.ColumnSpan="1"></Border>
    <TextBlock>Test</TextBlock>
    <Border Background="blue" Grid.Row="1" Grid.ColumnSpan="1"></Border>
    <TextBlock Grid.Row="1">Test2</TextBlock>
 </Grid> 
```

请注意，如果包含更多列，您可以指定列跨度

# android - android中如何实现静音功能？

> ID：15356274
> 
> 赞同：1
> 
> 时间：2013-03-12T08:20:30.933
> 
> 标签：android, mute

我想在手机没有root的情况下实现静音效果。

```
private AudioManager myAudioManager = null;

        myAudioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);

        int ringerMode  = myAudioManager.getRingerMode();       
        myAudioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT);

        myAudioManager.setRingerMode(ringerMode); 
```

我测试了上面的方法。它对某些手机有影响。和其他手机没有效果。为什么？

除了这个还有什么静音的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:48:56.153

可能存在版本 sdk 问题。顺便说一句，Android 中有多个流，您要静音哪一个？试试这个代码：

```
 AudioManager audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
    audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, 0, 0); // mute music stream
    audioManager.setStreamVolume(AudioManager.STREAM_RING, 0, 0); // mute ring stream
    if (Build.VERSION.SDK_INT >= 8) {
        audioManager.requestAudioFocus(null, AudioManager.STREAM_MUSIC, AudioManager.AUDIOFOCUS_GAIN);
        audioManager.requestAudioFocus(null, AudioManager.STREAM_RING, AudioManager.AUDIOFOCUS_GAIN);
    } 
```

# c - 如何在单个 CPU 的多个 cpu 内核上而不是在多个 CPU 上设置亲和力？

> ID：15356286
> 
> 赞同：2
> 
> 时间：2013-03-12T08:21:28.187
> 
> 标签：c, linux, multithreading, multicore

我目前在具有多个六核 CPU 的服务器上使用 C 多线程。我想将我的一些线程的亲和性设置为单个 CPU 的各个内核。我已经使用了 pthread_setaffinity_np() 和 sched_setaffinity() 但我猜是 cpus 上的设置亲和力而不是核心。我对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:27:08.917

`pthread_setaffinity_np()`等人根据逻辑 CPU（即内核）而不是物理 CPU（即 CPU 插槽）进行操作。

# python - pandas join/merge '重新索引仅对唯一值索引有效'

> ID：15356287
> 
> 赞同：3
> 
> 时间：2013-03-12T08:21:37.327
> 
> 标签：python, pandas, join

我在连接操作中遇到了一个非常严重的错误。我也尝试了合并（left_index，right_index），结果相同。

索引是相同的（按设计），由两个索引上的 index.is_unique (TRUE) 和 index.get_duplicates() (EMPTY) 检查。

基础版：

```
df1.join(series)
merge(df1, series_as_df, 
```

* * *

```
print tempres.index 
```

<class 'pandas.tseries.index.DatetimeIndex'> [2013-01-14 17:04:45, ..., 2013-01-14 16:53:05] 长度：89，频率：无，时区：无

* * *

奇怪的是打印值： print tempres.index.values [1970-01-16 121:04:45 1970-01-16 121:04:35 1970-01-16 121:04:25 1970-01-16 121:04:15 1970-01-16 121:04:05 1970-01-16 121:03:55 1970-01-16 121:03:45 1970-01-16 121:03:35 1970-01-16 121:03:25 1970-01-16 121:03:15 1970-01-16 121:03:05 1970-01-16 121:02:55 1970-01-16 121:02:45 1970-01-16 121:02:35 1970-01-16 121:02:25 1970-01-16 121:02:15 1970-01-16 121:02:05 1970-01-16 121:01:55 1970-01-16 121:01:45 1970-01-16 121:01:35 1970-01-16 121:01:25 ...]

如有必要，我可以添加腌制系列和 df...

使用最新的熊猫版本 0.10.x

谢谢，

卢克

我的代码（从较大的代码中截取）

```
XYTparams (existing dataframe)
prep_functions[funcname] = [list of values, same length as XYTparams]

iSeries = Series(prep_functions[funcname], index = XYTparams.index, name = funcname)
XYTparams = XYTparams.join(iSeries) 
```

审查我的问题：

我在基本 DataFrame 上使用合并和连续连接。在尝试下一次合并/加入时，我开始遇到错误。我无法在简单的测试中重现这一点，但我在问题开始之前保存了数据帧。

我找不到什么问题。

```
base_df = load('SPOparams.pic')
lookup_df = load('lookup.pic')

print base_df
print lookup_df

print base_df.count()

print base_df['VKCSKEY1']
print lookup_df['traf_key']

# reset index does not change a thing
base_df = base_df.reset_index(drop=True)

print base_df.index
print base_df.index.get_duplicates()
print lookup_df.index
print lookup_df.index.get_duplicates()

# checking value matches
for k in lookup_df['traf_key']:
    print k, k in  base_df['VKCSKEY1'].values

# why does this merge is unsuccesfull ???
# in any combination of the parameters
df_result =merge(base_df, lookup_df, 
             how='left', 
             #how = 'outer',
             left_on ='VKCSKEY1', 
             right_on ='traf_key',
             #left_index=True, 
             #right_index = True,
             #sort=True, 
             #suffixes=('', '.m'), copy=True
             )
print df_result 
```

输出：

```
1.6.1
0.10.1
<class 'pandas.core.frame.DataFrame'>
Int64Index: 89 entries, 0 to 88
Data columns:
T                        89  non-null values
X                        89  non-null values
Y                        89  non-null values
precip_quantity_1hour    89  non-null values
pressure                 89  non-null values
rel_humidity             89  non-null values
temp                     89  non-null values
temp_max                 0  non-null values
temp_min                 0  non-null values
wind_direction           89  non-null values
wind_speed               89  non-null values
BC_TRAF                  89  non-null values
closest                  89  non-null values
closest.m                89  non-null values
AGGP.P50_ID              89  non-null values
AGGP.FUNC_CLASS          89  non-null values
AGGP.SPEED_CAT           89  non-null values
LINK_ID                  89  non-null values
FUNC_CLASS               89  non-null values
SPEED_CAT                89  non-null values
AR_AUTO                  89  non-null values
AR_BUS                   89  non-null values
AR_TAXIS                 89  non-null values
AR_CARPOOL               89  non-null values
AR_PEDEST                89  non-null values
AR_TRUCKS                89  non-null values
STCA20_PCT               89  non-null values
VKC_LINKNR               89  non-null values
TRVIC150R1               89  non-null values
closest.m                89  non-null values
closest.m.m              89  non-null values
VKCP.LINK_ID             89  non-null values
VKCP.FUNC_CLASS          89  non-null values
VKCP.SPEED               89  non-null values
VKCP.LINKNR              89  non-null values
VKCP.TWIN_ID             89  non-null values
VKCSKEY1                 89  non-null values
dtypes: datetime64[ns](1), float64(13), int64(9), object(14)
<class 'pandas.core.frame.DataFrame'>
Index: 30 entries, (60744, 0) to (58314, 0)
Data columns:
traf_key      30  non-null values
weekday_nr    30  non-null values
linknr        30  non-null values
 weekday      30  non-null values
vr0           30  non-null values
vr1           30  non-null values
vr2           30  non-null values
vr3           30  non-null values
vr4           30  non-null values
vr5           30  non-null values
vr6           30  non-null values
vr7           30  non-null values
vr8           30  non-null values
vr9           30  non-null values
vr10          30  non-null values
vr11          30  non-null values
vr12          30  non-null values
vr13          30  non-null values
vr14          30  non-null values
vr15          30  non-null values
vr16          30  non-null values
vr17          30  non-null values
vr18          30  non-null values
vr19          30  non-null values
vr20          30  non-null values
vr21          30  non-null values
vr22          30  non-null values
vr23          30  non-null values
au0           30  non-null values
au1           30  non-null values
au2           30  non-null values
au3           30  non-null values
au4           30  non-null values
au5           30  non-null values
au6           30  non-null values
au7           30  non-null values
au8           30  non-null values
au9           30  non-null values
au10          30  non-null values
au11          30  non-null values
au12          30  non-null values
au13          30  non-null values
au14          30  non-null values
au15          30  non-null values
au16          30  non-null values
au17          30  non-null values
au18          30  non-null values
au19          30  non-null values
au20          30  non-null values
au21          30  non-null values
au22          30  non-null values
au23          30  non-null values
sn0           30  non-null values
sn1           30  non-null values
sn2           30  non-null values
sn3           30  non-null values
sn4           30  non-null values
sn5           30  non-null values
sn6           30  non-null values
sn7           30  non-null values
sn8           30  non-null values
sn9           30  non-null values
sn10          30  non-null values
sn11          30  non-null values
sn12          30  non-null values
sn13          30  non-null values
sn14          30  non-null values
sn15          30  non-null values
sn16          30  non-null values
sn17          30  non-null values
sn18          30  non-null values
sn19          30  non-null values
sn20          30  non-null values
sn21          30  non-null values
sn22          30  non-null values
sn23          30  non-null values
dtypes: float64(24), int64(50), object(2)
T                        89
X                        89
Y                        89
precip_quantity_1hour    89
pressure                 89
rel_humidity             89
temp                     89
temp_max                  0
temp_min                  0
wind_direction           89
wind_speed               89
BC_TRAF                  89
closest                  89
closest.m                89
AGGP.P50_ID              89
AGGP.FUNC_CLASS          89
AGGP.SPEED_CAT           89
LINK_ID                  89
FUNC_CLASS               89
SPEED_CAT                89
AR_AUTO                  89
AR_BUS                   89
AR_TAXIS                 89
AR_CARPOOL               89
AR_PEDEST                89
AR_TRUCKS                89
STCA20_PCT               89
VKC_LINKNR               89
TRVIC150R1               89
closest.m                89
closest.m.m              89
VKCP.LINK_ID             89
VKCP.FUNC_CLASS          89
VKCP.SPEED               89
VKCP.LINKNR              89
VKCP.TWIN_ID             89
VKCSKEY1                 89
0     (60744, 0)
1     (60744, 0)
2     (60744, 0)
3     (60750, 0)
4     (60768, 0)
5     (60768, 0)
6     (60758, 0)
7     (60758, 0)
8     (69223, 0)
9     (69223, 0)
10    (69223, 0)
11    (64265, 0)
12    (64265, 0)
13    (64265, 0)
14    (64265, 0)
15    (64265, 0)
16    (64265, 0)
17    (64265, 0)
18    (64265, 0)
19    (64265, 0)
20    (64216, 0)
21    (64216, 0)
22    (64216, 0)
23    (64216, 0)
24    (64216, 0)
25    (64216, 0)
26    (64216, 0)
27    (64216, 0)
28    (64216, 0)
29    (57085, 0)
30    (57085, 0)
31    (57085, 0)
32    (57085, 0)
33    (57085, 0)
34    (57085, 0)
35    (57014, 0)
36    (57033, 0)
37    (57033, 0)
38    (64065, 0)
39    (64065, 0)
40    (64065, 0)
41    (64065, 0)
42    (64065, 0)
43    (57070, 0)
44    (64062, 0)
45    (64062, 0)
46    (64062, 0)
47    (64062, 0)
48    (57070, 0)
49    (64061, 0)
50    (64061, 0)
51    (64061, 0)
52    (64061, 0)
53    (59849, 0)
54    (59415, 0)
55    (58487, 0)
56    (58054, 0)
57    (58054, 0)
58    (58054, 0)
59    (52551, 0)
60    (58054, 0)
61    (58054, 0)
62    (58054, 0)
63    (58054, 0)
64    (52551, 0)
65    (58054, 0)
66    (58488, 0)
67    (58488, 0)
68    (58028, 0)
69    (58464, 0)
70    (58028, 0)
71    (57989, 0)
72    (58595, 0)
73    (58027, 0)
74    (57989, 0)
75    (58595, 0)
76    (58595, 0)
77    (58019, 0)
78    (58595, 0)
79    (58595, 0)
80    (58019, 0)
81    (58595, 0)
82    (58595, 0)
83    (66715, 0)
84    (58595, 0)
85    (59295, 0)
86    (67614, 0)
87    (58314, 0)
88    (58314, 0)
Name: VKCSKEY1, Length: 89
VKCSKEY1
(60744, 0)    (60744, 0)
(60750, 0)    (60750, 0)
(60768, 0)    (60768, 0)
(60758, 0)    (60758, 0)
(69223, 0)    (69223, 0)
(64265, 0)    (64265, 0)
(64216, 0)    (64216, 0)
(57085, 0)    (57085, 0)
(57014, 0)    (57014, 0)
(57033, 0)    (57033, 0)
(64065, 0)    (64065, 0)
(57070, 0)    (57070, 0)
(64062, 0)    (64062, 0)
(64061, 0)    (64061, 0)
(59849, 0)    (59849, 0)
(59415, 0)    (59415, 0)
(58487, 0)    (58487, 0)
(58054, 0)    (58054, 0)
(52551, 0)    (52551, 0)
(58488, 0)    (58488, 0)
(58028, 0)    (58028, 0)
(58464, 0)    (58464, 0)
(57989, 0)    (57989, 0)
(58595, 0)    (58595, 0)
(58027, 0)    (58027, 0)
(58019, 0)    (58019, 0)
(66715, 0)    (66715, 0)
(59295, 0)    (59295, 0)
(67614, 0)    (67614, 0)
(58314, 0)    (58314, 0)
Name: traf_key
Int64Index([0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88], dtype=int64)
[]
Index([(60744, 0), (60750, 0), (60768, 0), (60758, 0), (69223, 0), (64265, 0), (64216, 0), (57085, 0), (57014, 0), (57033, 0), (64065, 0), (57070, 0), (64062, 0), (64061, 0), (59849, 0), (59415, 0), (58487, 0), (58054, 0), (52551, 0), (58488, 0), (58028, 0), (58464, 0), (57989, 0), (58595, 0), (58027, 0), (58019, 0), (66715, 0), (59295, 0), (67614, 0), (58314, 0)], dtype=object)
[]
(60744, 0) True
(60750, 0) True
(60768, 0) True
(60758, 0) True
(69223, 0) True
(64265, 0) True
(64216, 0) True
(57085, 0) True
(57014, 0) True
(57033, 0) True
(64065, 0) True
(57070, 0) True
(64062, 0) True
(64061, 0) True
(59849, 0) True
(59415, 0) True
(58487, 0) True
(58054, 0) True
(52551, 0) True
(58488, 0) True
(58028, 0) True
(58464, 0) True
(57989, 0) True
(58595, 0) True
(58027, 0) True
(58019, 0) True
(66715, 0) True
(59295, 0) True
(67614, 0) True
(58314, 0) True
Traceback (most recent call last):
  File "L:\temp\pandas_join_bug.py", line 43, in <module>
    right_on ='traf_key',
  File "C:\Python27\lib\site-packages\pandas\tools\merge.py", line 36, in merge
    return op.get_result()
  File "C:\Python27\lib\site-packages\pandas\tools\merge.py", line 185, in get_result
    ldata, rdata = self._get_merge_data()
  File "C:\Python27\lib\site-packages\pandas\tools\merge.py", line 277, in _get_merge_data
    copydata=False)
  File "C:\Python27\lib\site-packages\pandas\core\internals.py", line 1194, in _maybe_rename_join
    to_rename = self.items.intersection(other.items)
  File "C:\Python27\lib\site-packages\pandas\core\index.py", line 666, in intersection
    indexer = self.get_indexer(other.values)
  File "C:\Python27\lib\site-packages\pandas\core\index.py", line 812, in get_indexer
    raise Exception('Reindexing only valid with uniquely valued Index '
Exception: Reindexing only valid with uniquely valued Index objects 
```

一旦发生错误，我就无法获得任何成功的合并或连接语句。起初我没有看到错误与重复的合并/加入操作有关。最新集合的任何单个合并/加入现在都可以使用。一旦我需要另一个合并/加入，我就会得到同样的错误。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-08-29T20:11:48.220

重复的列名会导致这个错误，尝试消除重复的列名

# java - HADOOP HTTPFS：通过 Http 访问应用程序时出现错误“用户：ubuntu 不允许模拟 ubuntu”

> ID：15356288
> 
> 赞同：4
> 
> 时间：2013-03-12T08:21:37.643
> 
> 标签：java, ubuntu, hadoop, hdfs, bigdata

我已经在我的集群上安装了 hadoop 1.0.4，有 1 个主节点和 3 个从节点，现在我正在安装 HTTPFS(hadoop-hdfs-httpfs-0.20.2-cdh3u5-SNAPSHOT) 以使用 http 协议访问 HDFS 内容，

我可以通过它访问正常页面

```
curl -i "http://myhost:14000" 
```

它的工作正常:)

但是如果我尝试访问 HDFS，那么它会给我错误（ubantu 是我的用户）:(

```
curl -i "http://myhost:14000/webhdfs/v1?user.name=ubantu&op=OPEN" 
```

错误：

```
 {"RemoteException":{"message":"User: ubantu is not allowed to impersonate ubantu",
"exception":"RemoteException","javaClassName":"org.apache.hadoop.ipc.RemoteException"}} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-22T15:41:14.087

您是否按照此处所述配置了 core-site.xml：http: [//hadoop.apache.org/docs/current/hadoop-hdfs-httpfs/ServerSetup.html](http://hadoop.apache.org/docs/current/hadoop-hdfs-httpfs/ServerSetup.html)

#HTTPFSUSER# 是启动 httpfs 守护进程的用户在哪里？（大概是“ubantu”）？

完成此操作后，重新启动 HDFS 守护程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T15:10:52.947

解决了这个问题，因为我还没有将我的用户 ubantu 添加到 hadoop 用户组中。将用户 ubantu 添加到 hadoop 组中，并将 core-site.xml 中的属性更新为

```
 <property>
        <name>hadoop.proxyuser.myhttpfsuser.hosts</name>
        <value>httpfs-host.foo.com</value>
     </property>
     <property>
        <name>hadoop.proxyuser.myhttpfsuser.groups</name>
        <value>hadoop</value>
     </property> 
```

现在它工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T20:11:19.580

简单的谷歌搜索显示其他人有相同的错误，没有反弹服务器以获取配置更改。

[https://groups.google.com/a/cloudera.org/forum/?fromgroups=#!topic/cdh-user/dSJP-a_Lcqo](https://groups.google.com/a/cloudera.org/forum/?fromgroups=#!topic/cdh-user/dSJP-a_Lcqo)

# javascript - Selenium（含苏打水）getEval 返回 [object Object]

> ID：15356289
> 
> 赞同：1
> 
> 时间：2013-03-12T08:21:42.617
> 
> 标签：javascript, testing, selenium, selenium-rc, soda

我正在使用苏打水（[https://github.com/LearnBoost/soda](https://github.com/LearnBoost/soda)）来帮助我编写几个硒测试。但是，我遇到了 getEval 的问题。

我定义了这些助手：

```
soda.prototype.two = function() {
  return this.getEval('this.browserbot.getCurrentWindow().document.getElementsByTagName("body").length == 1;');                               
}

soda.prototype.one = function() {
  var x = this.two();
  return this.assertValue(x, true);
} 
```

在测试中，我有：

```
browser                                                                                                                                       
  .chain                                                                                                                                      
  .session()                                                                                                                                  
  .open('/g/48hLQZPRj')
  .one()    
  ... 
```

但是，这是测试结果日志：

```
open: /g/48hLQZPRj
getEval: this.browserbot.getCurrentWindow().document.getElementsByTagName("body").length == 1;
assertValue: [object Object], S
testComplete: 
[Error: assertValue([object Object], S): Element  not found] 
```

为什么 getEval 返回一个对象？为什么它没有像我期望的那样返回布尔值？我错过了什么？谢谢！

# jquery - 使用 jquery 动画切换 2 个浮动 div

> ID：15356290
> 
> 赞同：3
> 
> 时间：2013-03-12T08:21:43.400
> 
> 标签：jquery, html, css, jquery-animate, css-float

嗨，我已经更新了代码以拥有 2 个不同大小的 div。他们需要使用 css 浮点数通过动画切换位置。

请查看到目前为止的代码 - [http://jsfiddle.net/jz5VW/](http://jsfiddle.net/jz5VW/)

```
jQuery(function () {
    jQuery('#switch').click(function () {
        jQuery('#one').animate({
            left: jQuery("#two").offset().left - jQuery("#featured-top").offset().left
        });
        jQuery('#two').animate({
            right: jQuery("#two").offset().left - jQuery("#featured-top").offset().left
        });
    });
}); 
```

有没有办法让他们在包装纸的左右浮动？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:34:39.547

这将起到一个作用：

```
$("#switch").on("click", function () {
    $(".square").each(function () {
        var floatEl = ($(this).css("float") == "left") ? "right" : "left";
        $(this).css("float", floatEl);
    });
}); 
```

[例子](http://jsfiddle.net/U6ADe/2/)

[动画示例](http://jsfiddle.net/U6ADe/10/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T08:45:25.810

对于带有过渡动画的开关，您可以使用以下代码：

```
$(function() {
   $('#switch').click(function() {
      $('#one').animate({left:$("#two").offset().left}); 
      $('#two').animate({right:$("#two").offset().left});
   });
}); 
```

[杰菲德尔](http://jsfiddle.net/U6ADe/9/)

你只需要记住填充和边距选项......

带包装：

```
$(function () {
   $('#switch').click(function () {
       $('#one').animate({
           left: $("#two").offset().left-$("#wrapper").offset().left
       });
       $('#two').animate({
           right: $("#two").offset().left-$("#wrapper").offset().left
       });
   });
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:36:01.550

**切换浮点值：** 可以有多种方法来做到这一点。检查 JQuery `removeClass(...)`，[JQuery 网站](http://api.jquery.com)`addClass(...)`上的文档

您还可以查看`css(...,...)`同一网站上的方法文档来实现此目的。

要为 div 设置动画，请在[此处查看答案](https://stackoverflow.com/questions/7440112/jquery-how-do-i-make-a-div-slide-left-100px-everytime-i-click-a-link)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T08:56:48.567

看一下 jquery .animate() 这不是很漂亮，您需要使用动态值进行班次。 [简单的虚拟动画](http://jsfiddle.net/U6ADe/12/)

```
$('#switch').on("click", function ()  { 
    $('#one').animate({
        right: '-=500',
      }, 5000, function() {})
    $('#two').animate({
        right: '+=500',
      }, 5000, function() {})
}); 
```

# php - 当我使用多项选择下拉列表从国家表中选择国家时，如何从国家表中获取国家/地区列表？

> ID：15356291
> 
> 赞同：0
> 
> 时间：2013-03-12T08:21:46.207
> 
> 标签：php, javascript, html, mysql, drop-down-menu

当我使用多项选择下拉列表从国家/地区表中选择国家/地区时，如何从国家/地区表中获取国家/地区列表？这是我的编码。

## mysql表

```
CREATE TABLE `countries` (
  `countryID` varchar(3) NOT NULL default '',
  `countryName` varchar(52) NOT NULL default '',
  `localName` varchar(45) NOT NULL,
  `webCode` varchar(2) NOT NULL,
  `region` varchar(26) NOT NULL,
  `continent` enum('Asia','Europe','North America','Africa','Oceania','Antarctica','South America') NOT NULL,
  `latitude` double NOT NULL default '0',
  `longitude` double NOT NULL default '0',
  `surfaceArea` float(10,2) NOT NULL default '0.00',
  `population` int(11) NOT NULL default '0',
  PRIMARY KEY  (`countryID`),
  UNIQUE KEY `webCode` (`webCode`),
  UNIQUE KEY `countryName` (`countryName`),
  KEY `region` (`region`),
  KEY `continent` (`continent`),
  KEY `surfaceArea` (`surfaceArea`),
  KEY `population` (`population`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

# 表结构`states`：

```
CREATE TABLE `states` (
  `stateID` smallint(5) unsigned NOT NULL auto_increment,
  `stateName` varchar(50) NOT NULL default '',
  `countryID` varchar(3) NOT NULL,
  `latitude` double NOT NULL default '0',
  `longitude` double NOT NULL default '0',
  PRIMARY KEY  (`stateID`),
  KEY `stateName` (`stateName`),
  KEY `countryID` (`countryID`),
  KEY `unq` (`countryID`,`stateName`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

# 表的数据`countries`(LIMIT 0,500)

```
INSERT INTO `countries` (`countryID`, `countryName`, `localName`, `webCode`, `region`, `continent`, `latitude`, `longitude`, `surfaceArea`, `population`) VALUES 
  ('BRA','Brazil','Brasil','BR','South America','South America',-10,-55,8547403.00,170115000),
  ('CHN','China','Zhongquo','CN','Eastern Asia','Asia',35,105,9572900.00,1277558000),
  ('FRA','France','France','FR','Western Europe','Europe',47,2,551500.00,59225700),
  ('IND','India','Bharat/India','IN','Southern and Central Asia','Asia',28.47,77.03,3287263.00,1013662000),
   ('USA','USA','United States','US','North America','North America',38,-97,9363520.00,278357000);
COMMIT; 
```

# 表的数据`states`(LIMIT 0,500)

```
INSERT INTO `states` (`stateID`, `stateName`, `countryID`, `latitude`, `longitude`) VALUES 
  (5,'California','USA',37.42,-122.06),
  (6,'Beijing','CHN',39.93,116.39),
  (9,'Iowa','USA',43.03,-96.09),
  (10,'New York','USA',40.76,-73.97),
  (12,'... ....','CHN',32.06,118.78);
COMMIT; 
```

## 国家下拉菜单

```
<? $Type_sql="SELECT countryName FROM countries ORDER by countryName ASC";
                                $Type_result=mysql_query($Type_sql);
                                while($Type_rows=mysql_fetch_array($Type_result)){
                                echo "<option value='"; 
                                echo $Type_rows['countryName']; 
                                echo "'>";
                                echo $Type_rows['countryName'];
                                echo "</option>";
                                } ?>
            </select> 
```

## 状态下拉列表

```
<? $Type_sql="SELECT stateName FROM countries c, states s where c.countryID = s.countryID ORDER by stateName ASC";
                                $Type_result=mysql_query($Type_sql);
                                while($Type_rows=mysql_fetch_array($Type_result)){
                                echo "<option value='"; 
                                echo $Type_rows['stateName']; 
                                echo "'>";
                                echo $Type_rows['stateName'];
                                echo "</option>";
                                } ?>
            </select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:57:00.417

这可以通过将状态下拉列表的代码放入单独的 php 处理程序中来完成，稍作修改：

```
<select name="state">
<?php 
    $countryID= mysql_real_escape_string($_GET['countryID']);
    $Type_sql="SELECT stateName FROM states s where s.countryID = '$countryID' ORDER by stateName ASC";
                $Type_result=mysql_query($Type_sql);
                while($Type_rows=mysql_fetch_array($Type_result)){
                    echo "<option value='";
                    echo $Type_rows['stateName'];
                    echo "'>";
                    echo $Type_rows['stateName'];
                    echo "</option>";
                } 
?>
</select> 
```

每当国家/地区选择列表中有 onChange 事件时，此脚本将由 javascript 使用 Ajax 调用。请参考 ajax 文档，例如[http://www.javascriptkit.com/dhtmltutors/ajaxgetpost.shtml](http://www.javascriptkit.com/dhtmltutors/ajaxgetpost.shtml)或使用 jQuery： http: [//api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/)

现在也可以像您的计划一样修改状态选择的内容，但是您需要两个选择列表，一个隐藏列表来存储您删除的条目或全部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:59:23.300

这是一个完整的工作代码。只需将此代码放在 php 页面中，并将 onChange 参数中的表单名称更改为您的页面名称。此外，更改**mysql_select_db**中的数据库名称。

我的页面名称是*form1.php*

```
<html>
<body>
<form name="form1">
<?php

if(isset($_REQUEST['stateId']))
{
    $stateId = $_REQUEST['stateId'];
}
else
{
    $stateId = "";
}
$conn = mysql_connect("localhost","root","");
$dbSelect = mysql_select_db("test");
$Type_sql="SELECT countryID,countryName FROM countries ORDER by countryName ASC";
                                $Type_result=mysql_query($Type_sql);
                                echo"Countries:<select onChange=\"window.location='form1.php?stateId='+this.value\">";
                                while($Type_rows=mysql_fetch_array($Type_result)){
                                    if($Type_rows['countryID']==$_REQUEST['stateId'])
                                    {
                                        echo "<option value='".$Type_rows['countryID']."' selected>";
                                        echo $Type_rows['countryName'];
                                        echo "</option>";
                                    }
                                    else
                                    {
                                        echo "<option value='".$Type_rows['countryID']."'>";
                                        echo $Type_rows['countryName'];
                                        echo "</option>";
                                    }
                                } 
                                echo"</select>";

 $Type_sql="SELECT stateName FROM  states where countryID = '$stateId' ORDER by stateName ASC";
                                $Type_result=mysql_query($Type_sql);
                    echo"States:<select><option value=''>--select--</option>";
                                while($Type_rows=mysql_fetch_array($Type_result)){
                                echo "<option value='"; 
                                echo $Type_rows['stateName']; 
                                echo "'>";
                                echo $Type_rows['stateName'];
                                echo "</option>";
                                } 
                    echo"</select>";

?>
</form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T06:05:29.257

**嗨艾哈迈德，**

*请看下面的代码。我重新编写了代码并修改了多项选择* 无论如何我都忽略了javascript验证。请继续努力，这个页面的名称是**form3.php**

```
<html>
<head>
<script type="text/javascript">
    function viewstates()
    { 
        jQuery('#langucountry').change(function () { });
    }
    $(function() {
        $('#basicmultiselect').multiSelect({select_all_min: 3});
        $('#langucountry').multiSelect({
            select_all_min: 3, no_selection: "Please select!", selected_text: " clicked" });
        $('#methods').multiSelect(); });
</script>
</head>
<body>
<form name="form3" action="form3.php" method="post">
<?php
/****** connection string *******/
/* start */
    $conn = mysql_connect("localhost","root","");
    $dbSelect = mysql_select_db("test");
/* end */

/*----checks whether form is submited -------*/
if(isset($_POST['cbocountry']))
{
    $lstStates = array();
        foreach($_POST['cbocountry'] as $countryCode)
        {
            $fetch_states="SELECT stateName FROM  states where countryID = '$countryCode' ORDER by stateName ASC";
            $Type_result=mysql_query($fetch_states);
            while($Type_rows=mysql_fetch_array($Type_result)){

                        if(!in_array($Type_rows['stateName'],$lstStates))
                            array_push($lstStates,$Type_rows['stateName']);
             } 
        }

}

                                $Type_sql="SELECT countryID,countryName FROM countries ORDER by countryName ASC";
                                $Type_result=mysql_query($Type_sql);
                                echo"Countries:<select  id=\"langucountry\" name=\"cbocountry[]\" class=\"arc90_multiselect\" multiple=\"multiple\" title=\"Languages\"\>";
                                while($Type_rows=mysql_fetch_array($Type_result)){

                                        echo "<option value='".$Type_rows['countryID']."'>";
                                        echo $Type_rows['countryName'];
                                        echo "</option>";
                                } 
                                echo"</select>";

                    echo"States:<select><option value=''>--select--</option>";
                            if(count($lstStates) > 0)
                            {
                                foreach($lstStates as $item)
                                {
                                    echo "<option value='"; 
                                    echo $item; 
                                    echo "'>";
                                    echo $item;
                                    echo "</option>";
                                } 
                            }
                    echo"</select>";

                    echo"<input type=\"submit\" value=\"submit\" text=\"submit\"/>";

?>
</form>
</body>
</html> 
```

**享受！！！！**

# android - Eclipse Timestamp 编译时间 Android

> ID：15356292
> 
> 赞同：0
> 
> 时间：2013-03-12T08:21:49.043
> 
> 标签：android, eclipse, date, time, compile-time

我在 Linux 上使用 Eclipse for Android SDK，并寻找一种将编译的日期和开始时间添加到其中一个 xml 文件的方法。我喜欢在设备上查看我正在使用的*构建版本，而无需在每个编译步骤之前手动更新此信息。*

到目前为止，通过搜索网络，我只找到了“使用蚂蚁”之类的提示。

我想我必须使用 /proc/driver/rtc 这是由 linux 内核提供的动态“文件”，其中包含实时更新的行，其中包含冒号分隔的文本，例如“rtc_date”和“rtc_time”。包括它并使用设备上的应用程序来获取提取的信息。

有没有更好的办法？就像通过了解时间或从*proc*中剥离信息并将其放在 xml 文件中的编译时间来获得 Eclipse？

这是我第一次使用 eclipse，所以如果我问了一些明显或不可能的问题，请原谅。

问候 ct

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:57:35.737

我正在使用此代码来获取应用程序构建时间。我知道这不会输出到 XML，但是如果您试图获取应用程序的构建时间，这应该可以。

```
private long getAppBuildTime() {
    if(cachedAppBuildTime == null) {
        try{
            ApplicationInfo ai = appContext.getPackageManager().getApplicationInfo(appContext.getPackageName(), 0);
            ZipFile zf = new ZipFile(ai.sourceDir);
            ZipEntry ze = zf.getEntry("classes.dex");
            cachedAppBuildTime = ze.getTime();
            log("app build time " + cachedAppBuildTime);
        }catch(Throwable t){
            return 1;
        }
    }
    return cachedAppBuildTime;
} 
```

代码中的`appContext`变量是通过`context.getApplicationContext()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-02T02:13:39.000

我使用与 yigit 相同的策略，只是我更喜欢 MANIFEST.MF 文件。即使修改了布局，也会重新生成这个（classes.dex 不是这种情况）。

它导致以下代码：

```
private long mAppBuildTime = -1;

public long getAppBuildTime() {
  if (mAppBuildTime == -1) {
    try{
      ApplicationInfo ai = getPackageManager().getApplicationInfo(getPackageName(), 0);
      ZipFile zf = new ZipFile(ai.sourceDir);
      ZipEntry ze = zf.getEntry("META-INF/MANIFEST.MF");
      mAppBuildTime = ze.getTime();
      zf.close();
    }catch(Exception e){
    }
  }
  return mAppBuildTime;
} 
```

# php - 此 json 代码未显示任何结果

> ID：15356297
> 
> 赞同：0
> 
> 时间：2013-03-12T08:21:55.140
> 
> 标签：php, json

我正在返回一个 json 数组并尝试在控制器中接收它，但它没有显示任何结果这是我的模型：

```
if ((!empty($_FILES["FlMediaImage"])) &&($_FILES["FlMediaImage"]["error"] == 0)) {
        $mdImgName = $_FILES["FlMediaImage"]["name"];
            $ext = substr($mdImgName, strpos($mdImgName, '.') + 1);
            $mdImgName = 'adsmind_media_' . md5(uniqid(time(), true)) . '.' . $ext;
            move_uploaded_file($_FILES["FlMediaImage"]["tmp_name"], ROOT . "/images/temp/" . $mdImgName);
        }
        $jsonArry = array(
            "image_id" => 0,
            "image_name" => $result->$mdImgName
        );
        return json_encode(array('result' => $jsonArry)); 
```

我的控制器是：

```
$imageJSON = json_decode($modObj->saveMediaImage());
$imageID = $imageJSON->result->image_id;
$imageName = $imageJSON->result->image_name; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:30:48.337

您的结果在两个 vars 中都是 null .. $imageID 和 $imageName... 更改一些值，例如

```
$jsonArry = array("image_id" => '0', "image_name" => 'some_name'); 
```

你会看到结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:34:08.783

它的工作

```
$arr= json_decode( '{"result":{"image_id":0,"image_name":null}}',FALSE);
echo $arr->result->image_id; 
```

你能试试吗

```
$imageJSON = json_decode($modObj->saveMediaImage());
$imageID = $imageJSON->result->image_id;
$imageName = (isset($imageJSON->result->image_name) && !empty($imageJSON->result->image_name))?$imageJSON->result->image_name:''; 
```

# jquery - div内的Jquery复选框一次检查一个

> ID：15356300
> 
> 赞同：3
> 
> 时间：2013-03-12T08:22:08.977
> 
> 标签：jquery, checkbox, checked

所以我有一个自动生成的 div，里面有 3 个具有不同 ID 和名称的复选框，默认情况下没有一个被选中！如果碰巧检查了一个，那么我需要其他两个未检查！

所以一次只能检查一个...

所以所有未检查或只有一个检查！

```
<div class="configoptions">
    <table class="configtable" cellpadding="0" cellspacing="0" width="100%">
        <tbody>
            <tr>
                <td class="fieldlabel">Include:</td>
                <td class="fieldarea">
                    <label><input name="configoption[10]" id="co30" value="1" onclick="recalc()" type="checkbox">green</label>
                </td>
            </tr>
            <tr>
                <td class="fieldlabel">Include:</td>
                <td class="fieldarea">
                    <label><input name="configoption[9]" id="co27" value="1" onclick="recalc()" type="checkbox">blue</label>
                </td>
            </tr>
            <tr>
                <td class="fieldlabel">Include:</td>
                <td class="fieldarea">
                    <label><input name="configoption[11]" id="co31" value="1" onclick="recalc()" type="checkbox">white</label>
                </td>
            </tr>
        </tbody>
    </table>
</div> 
```

这是我用来取消选中页面准备好的所有 div 的内容.. 因为最初我需要取消选中它们.. 效果很好......现在我需要制作它，所以如果它被选中，一次只检查一个！有人可以帮我一下吗？提前谢谢！

```
$(document).ready(function() {
    $('input[type=checkbox]').each(function() {
        this.checked = false;
    });
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T08:23:55.330

使用该`prop`函数更改复选框和单选按钮的选中属性

```
$(function(){
    $('input:checkbox').prop('checked', false)
    $('input:checkbox').click(function(){
        if($(this).is(':checked')){
            $('input:checkbox').not(this).prop('checked', false);        
        }
    });
}) 
```

演示：[小提琴](http://jsfiddle.net/arunpjohny/Pm73S/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T19:25:07.403

我有一个类似的问题并像这样解决了它（使用 Arun P Johny 的部分答案 - 我想与你们中可能遇到这个问题的人分享。）

```
(function($checkbox,options){                               
            $($checkbox).on('change', function() {                  
                $("input[type='checkbox']").not(this).prop('checked', false);               
            });             
        }); 
```

# google-analytics - Google Analytics（分析）中 ISP 与自定义变量的报告

> ID：15356309
> 
> 赞同：1
> 
> 时间：2013-03-12T08:22:54.193
> 
> 标签：google-analytics, visitor-statistic

我像这样推送一个自定义变量：

```
_gaq.push(['_setCustomVar', 1, 'userName', '', 1]); 
```

我可以从 Google Analytics 菜单中看到他们的列表：受众/自定义/自定义变量。我可以添加城市/国家/浏览器等作为次要维度。但我需要知道哪个用户来自哪个 ISP。是否可以为此创建报告。喜欢：

```
Custom Variable ------ ISP -------- Visits
Michael ----------- Aa Telecom ------ 12
Daniel ----------- Aa Telecom --------- 3
John -------------  Bb Communication --- 25 
```

# json - 将 Servlet 输出传递给 JSON 变量

> ID：15356310
> 
> 赞同：1
> 
> 时间：2013-03-12T08:22:55.320
> 
> 标签：json, jsp, servlets, extjs

有人帮助..如何使用 JSON 将我的 Servlet 输出的字符串值传递给我的 ExtJS ..

我的 Servlet 有这样的输出；

```
[{"Name":"No Top Specified"},
{"Name":"No Bottom Specified"},
{"Name":"13KG F/B HAPPY PREMIUM TOP"},
{"Name":"13KG F/B SHARB B TOP"},
{"Name":"13KG F/B TROPIX TOP"},
{"Name":"13KG F/B BOTTOM 351.00"},
{"Name":"13KG F/B SHARBATLY BOTTOM"},
{"Name":"13KG F/B TROPIX BOTTOM"},
{"Name":"14KG F/B ORGANIC TOP"},
{"Name":"14KG F/B BOTTOM"}] 
```

这些数据来自我的数据库。我想知道我的 ExtJS 的语法是什么，以使这些数据成为我的 ExtJS 驱动的组合框的数据。谢谢。：）

这是我的服务方式..

```
JSONArray jsonarray = new JSONArray();
ResultSetMetaData rsmd = rs.getMetaData();

int y = 1;
while(rs.next()){
int numColumns = rsmd.getColumnCount();
JSONObject obj = new JSONObject();

for (int i=1; i<numColumns+1; i++) {
String column_value = rs.getString(i);
obj.put("Name", column_value);
response.setContentType("application/jsons");
response.setCharacterEncoding("UTF-8");

}

jsonarray.put(obj).toString();      

y++;
}   
System.out.println(jsonarray);
response.getWriter().println(jsonarray);
rs.close();                                                              
pst.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T15:41:22.937

您只需要从您的 servlet 返回一个正确的 JSON，然后在某个地方使用 ExtJS 处理它。

小服务程序方法：

```
public void doGet(HttpServletRequest req, HttpServletResponse res)throws ServletException, IOException { 
    List<Data> data = ...;//populate data from your database in key-value pairs
    String json = new Gson().toJson(data);//or generate JSON the other way
    response.setContentType("application/json");
    response.setCharacterEncoding("UTF-8");
    response.getWriter().write(json);
} 
```

数据类：

```
public class Data {
    private String label;//getter+setter
    private String value;//getter+setter
} 
```

使用例如以下 javascript 处理 jsp 中的数据：

```
Ext.onReady(function() {
    Ext.Ajax.request({
        url: '/servleturl',
        success: function(response){
            var states = Ext.decode(response.responseText);
            var values = Ext.create('Ext.data.Store', {
                fields: ['label', 'value'],
                data : states
            });
            var combo = Ext.create('Ext.form.ComboBox', {
                fieldLabel: 'Choose your shape: ',
                store: values,
                displayField: 'value',
                valueField: 'label',
                queryMode: 'local',
                renderTo: 'wrapper'
            });
        }
    });
}); 
```

以及`div`您的jsp中的以下内容：

```
<div id="wrapper"></div> 
```

或者，您可以“一次”填充您的组合框，当您最初呈现您的视图时，通过使用`request.setAttribute(data)`并稍后在您的 jsp 中处理它，而不是通过对另一个 servlet 的 AJAX 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:07:57.610

你在寻找这样的东西吗？

```
var servlet = Ext.create('Ext.data.Store', {
    fields: ['Name'],
    data : [
        {"Name":"No Top Specified"},
        {"Name":"No Bottom Specified"},
        {"Name":"13KG F/B HAPPY PREMIUM TOP"},
        {"Name":"13KG F/B SHARB B TOP"},
        {"Name":"13KG F/B TROPIX TOP"},
        {"Name":"13KG F/B BOTTOM 351.00"},
        {"Name":"13KG F/B SHARBATLY BOTTOM"},
        {"Name":"13KG F/B TROPIX BOTTOM"},
        {"Name":"14KG F/B ORGANIC TOP"},
        {"Name":"14KG F/B BOTTOM"}
    ]
});

Ext.create('Ext.form.ComboBox', {
    fieldLabel: 'Choose State',
    store: servlet,
    queryMode: 'local',
    displayField: 'Name',
    valueField: 'Name',
    renderTo: Ext.getBody()
}); 
```

# microsoft-test-manager - MTM：有没有办法使用命令行实用程序 tcm.exe 查找测试运行完成状态

> ID：15356314
> 
> 赞同：3
> 
> 时间：2013-03-12T08:23:09.207
> 
> 标签：microsoft-test-manager, tcm

我使用 MTM（Microsoft 测试管理器）来运行我的自动化测试用例。

我使用`tcm /create`命令（从 powershell 脚本触发）安排测试运行，一旦测试运行完成，我需要`trx`在本地计算机上复制（结果）文件。所以我想等到测试运行在某种轮询机制中完成。

因此，我需要一个命令来使用 test runid 获取当前的测试运行状态。有没有办法以这种方式获取 MTM 测试运行状态？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T09:13:29.450

我不认为这是可能的。可供选择的开关`run`有：

*   删除
*   中止
*   出口
*   列表
*   创造
*   发布

您可以`runs`使用的唯一数据`/list`是

*   ID
*   标题
*   所有者
*   完成日期

你可以通过运行看到这一点：

```
tcm run /list /planid:<plainId> /collection:<CollectionUrl> /teamproject:<TeamProject> 
```

此外，`runId`即使有获得完成状态的选项，您还没有，在您的情况下，这并不容易。

所以，我认为你应该开始寻找另一种解决方案。也许[TFS Api](http://msdn.microsoft.com/en-us/library/bb130146%28v=vs.100%29.aspx)是您所需要的。检查这些链接：

1.  [使用 tfs api 创建自动化测试运行](http://social.msdn.microsoft.com/Forums/en-US/vsmantest/thread/45d06e51-9cbe-4f3e-81c4-e5b8b955da7c/)
2.  [TFS 2010 API - 获取测试运行的结果](http://social.technet.microsoft.com/wiki/contents/articles/3279.tfs-2010-api-get-results-of-a-test-run.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-11T12:02:28.057

您实际上可以获得测试 ID - 它是由于 tcm.exe run /create 命令在 powershell 中打印出来的，它会是这样的：

```
$testRunSubmitResult = .$tcmPath run /create ......

$testID = $testRunSubmitResult -match "[0-9]{1,1000}"

(i excluded the error handling logic which needs to be present in order to verify that the run was submitted)

after that you can do the following thing - you can export the test run with the used id, and if the test didnt finish yet, you will get and error.

do

{

    Start-Sleep -s 60

    $testResults = .$tcmPath run /export /id:$testID /resultsfile:$args /collection ....

    if(Test-Path $args[0])

    {

        break

    }

    if($testResults.GetType() -eq @("1").GetType())

    {

        if($testResults[1].Contains("Completed export"))

        {

            break

        }

    }

    if ($testResults.Contains("Completed export"))

    {

        break
    }
}
while ($True) 
```

这并不完美，因为它可能会在带有大附件（例如由视频数据收集器生成的附件）的测试运行中失败，但它可能是你们中的一些人的解决方案

或者，您也可以使用 powerscript 像这样使用 TFS API：

```
Add-Type -AssemblyName "Microsoft.TeamFoundation.Client, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a",

                       "Microsoft.TeamFoundation.Common, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a",

                       "Microsoft.TeamFoundation.TestManagement.Client, Version=10.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a"

$tfs = [Microsoft.TeamFoundation.Client.TfsTeamProjectCollectionFactory]::GetTeamProjectCollection("http://tfs:8080/tfs/Collection")
$tfs.EnsureAuthenticated()
$testManagementService = $tfs.GetService([Microsoft.TeamFoundation.TestManagement.Client.ITestManagementService])
$testManagementTeamProject = $testManagementService.GetTeamProject('Project');

do
{
    Start-Sleep -s 60
    $testRun = $testManagementTeamProject.TestRuns.Find($testId);
    if($testRun.State -eq 'Completed')
    {
        break
    }
    if($testRun.State -eq 'NeedsInvestigation')
    {
        break
    }
    if($testRun.State -eq 'Aborted')
    {
        break
    }
} 
```

# android - 如何在 Android 中提供带有 ACRA 错误报告的完整堆栈跟踪？

> ID：15356322
> 
> 赞同：0
> 
> 时间：2013-03-12T08:23:39.090
> 
> 标签：android, acra

我有一个应用程序，我在其中使用 ACRA 进行错误报告。

我最近决定使用 ErrorReporter 发送一个捕获的异常，它可以工作，尽管没有任何类型的堆栈跟踪。我得到的只是通常的系统转储信息，我真的需要来自用户的堆栈跟踪。

所以，我的问题是，我如何让应用程序发送完整的详细信息？

（注意：当应用程序完全崩溃时，ACRA 发送的错误报告确实包含堆栈跟踪。）

这是一个屏幕截图：[screenshot](http://i.troll.ws/2861d874.png)

**编辑**

我一直在深入研究报告，事实证明，ACRA 只是将堆栈跟踪报告给另一个以前从未真正使用过的列：标签。所以，也许只是 ACRA 中的一个错误或其他东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:32:19.270

您应该遵循 ACRA 教程和完整的说明指南页面。您只需要在 google docs 帐户中创建一个 from 即可。创建表单后，将生成一个密钥，您必须将其保存并应用到您的 android 应用程序项目的应用程序 java 文件中。通过清单和应用程序 java 文件的微小更改，您可以成功集成 ACRA。

按照给定的链接。 [https://github.com/ACRA/acra/wiki/BasicSetup](https://github.com/ACRA/acra/wiki/BasicSetup)

它将出现在您表单的 STACK_TRACE 列中，如下所示

![在此处输入图像描述](../Images/70b817dee4d8a191bd4bfd2f6770496a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T08:48:07.220

ACRA.getErrorReporter().handleException(caughtException);

请参阅[https://github.com/ACRA/acra/wiki/AdvancedUsage#wiki-Sending_reports_for_caught_exceptions](https://github.com/ACRA/acra/wiki/AdvancedUsage#wiki-Sending_reports_for_caught_exceptions)

# objective-c - 从 json 数组设置 cell.textlabel.text

> ID：15356331
> 
> 赞同：2
> 
> 时间：2013-03-12T08:23:58.517
> 
> 标签：objective-c, json, uitableview, ios6, nsarray

您好我正在尝试从 json 解析数据并获取要在单元格中显示的值。

这是我的 ViewController.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
{
    IBOutlet UITableView *mainTableView;
    NSMutableData *data;
}
@property (nonatomic, strong) NSArray *category;
@property (nonatomic, strong) NSArray *coursesArray;
@property (nonatomic, strong) NSDictionary *parsedData;

@end 
```

这就是我在 ViewController.m 中所拥有的

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    [UIApplication sharedApplication].networkActivityIndicatorVisible = NO;
    parsedData = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:nil];
    coursesArray = [parsedData valueForKey:@"courses"];
    NSLog(@"coursesArray: %@", coursesArray);
    category = [coursesArray valueForKey:@"category"];
    NSLog(@"%@", category);
}
-(int)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(int)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 1;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MainCell"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault
                                      reuseIdentifier:@"MainCell"];
    }

    cell.textLabel.text = [NSString stringWithFormat:@"%@", [category objectAtIndex:indexPath.row]];
    NSLog(@"%@", category);
    return cell;
} 
```

在 connectionDidFinishLoading 我在日志中看到了正确的值，但是当我尝试在创建单元格之前检查它们时，我得到空值。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:35:29.150

称呼

```
 [mainTableView reloadData]; 
```

在你的`-connectionDidFinishLoading:`方法里面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:32:59.030

确保您的类别数组未释放/自动释放。

# java - 是否有一种通用的格式/方法可以在 windows 和 linux 中定位配置文件？

> ID：15356333
> 
> 赞同：4
> 
> 时间：2013-03-12T08:24:05.203
> 
> 标签：java, jakarta-ee

在我的应用程序中，我有一个配置文件 (ABC.xml)，其中我们有数据库属性、log4j.xml 路径和其他。log4j.xml 路径在 ABC.xml 中作为 ( `D:\log4j.xml`) 给出，对于 linux 作为 ( `.\\..\\..\\log4j.xml\\`)。

我们正在使用 apache tomcat 服务器，并且我们在服务器上下文中有 ABC.xml。

有什么方法可以让我对 windows 和 linux 的 log4j 路径有相同的表示，但它会根据服务器类型进行相应的解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:41:24.573

A common approach is to use paths relative to a system property. This allows you to specify the root folder in the OS specific format (`C:\...` or `/opt/`) and attach the relative part later.

Note that Java can handle Windows and Unix relative paths, so `new File( "C:\\app", "conf/log4j.xml" )` will actually try to open `C:\app\conf\log4j.xml`.

In your case, you could use this code:

```
File confFolder = new File( System.getProperty( "confDir" ) );
File log4j = new File( confFolder, "log4j.xml" ); 
```

Another option is to replace variable names in config files. That way you can have

```
<logConfDir>${appRoot}/conf</logConfDir>
<log4j>${logConfDir}/log4j.xml</log4j> 
```

If there is a System property `logConfDir`, it should overwrite the config option. That will allow customers to do whatever they think necessary.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:33:55.667

好吧，如果您使用的是 servlet 并且文件在项目中，那么在 servlet 中您可以：

```
InputStream is = getServletContext().getResourceAsStream("/log4j.xml"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T08:55:40.840

java 文件处理也可以`/`在 windows 操作系统上作为分隔符处理，因此您可以在 ABC.xml`./../../log4j.xml`中为 linux 和 windows 编写（路径必须是相对的，并且不应包含驱动器号）。

因此，当您编写代码时

```
File f = new File("./../../log4j.xml"); 
```

windows的参数`"./../../log4j.xml"`将在内部转换为`".\\..\\..\\log4j.xml"`和

```
f.getAbsolutePath(); 
```

将在windows上返回字符串`"C:\\some\\dir\\.\\..\\..\\log4j.xml"`witch打印为witch的相对目录`C:\some\dir\.\..\..\log4j.xml`在哪里。`C:\some\dir``.\..\..\log4j.xml`

# c# - 用c#模拟在excel中双击一个单元格

> ID：15356343
> 
> 赞同：2
> 
> 时间：2013-03-12T08:24:42.397
> 
> 标签：c#, excel-2007, double-click

有没有办法用c#模拟双击excel中的单元格？因此 ActiveWorkbook_sheetBeforeDoubleClick 事件处理程序将运行。

我使用了以下代码：

```
myActiveSheet.Application.DoubleClick(); 
```

但它不起作用。

# android - 如何在 Android 2.3.3 中停止垃圾收集

> ID：15356344
> 
> 赞同：2
> 
> 时间：2013-03-12T08:24:54.373
> 
> 标签：android, performance, garbage-collection, calendarview

我有android应用程序2.3.3在按下按钮=>显示对话框时使用calendarView（包含calendarView）

我的 logcat 显示：

```
D/dalvikvm(15292): GC_CONCURRENT freed 1988K, 10% free 20024K/22087K, paused 4ms+3ms
D/dalvikvm(15292): GC_CONCURRENT freed 1995K, 10% free 20022K/22087K, paused 4ms+3ms
D/dalvikvm(15292): GC_CONCURRENT freed 1986K, 10% free 20029K/22087K, paused 4ms+3ms
D/dalvikvm(15292): GC_CONCURRENT freed 2005K, 10% free 20023K/22087K, paused 4ms+3ms
D/dalvikvm(15292): GC_CONCURRENT freed 1995K, 10% free 20016K/22087K, paused 4ms+3ms
D/dalvikvm(15292): GC_CONCURRENT freed 1997K, 10% free 20022K/22087K, paused 3ms+4ms 
```

它减慢了我的应用程序...我认为垃圾收集暂停了我的应用程序请帮助我快速显示它！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:34:30.533

垃圾收集器是一个守护线程。你既不能阻止它，也不能调用它。您可以向垃圾收集器发出请求，例如 System.gc()。

另外，**垃圾收集器有助于提高性能**。

如果您不想让 GC 收集您的对象，那么只需**保留引用。**

如果您的对象被过早收集，则表明您的应用程序设计中有错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:46:34.430

在实现应用程序（如游戏等）时，`avoid garbage collection`由于每次垃圾收集器执行时都会引入小暂停，

`All you can do is avoid to keep on creating objects and try to reuse as much as possible the objects instances you already have.`

这可以通过不同的方式完成[**看看这个**](http://www.devahead.com/blog/2011/12/coding-for-performance-and-avoiding-garbage-collection-in-android/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-28T00:22:31.233

在使用 CalendarView 时，我注意到一件非常令人惊讶的事情。当我将日历高度设置为数字时，例如。android:layout_height="400dp" 垃圾收集器未运行，但是当我将其设置为 match_parent 时，每次切换方向时都会运行垃圾收集器。也许这就是答案？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-20T01:44:01.690

我解决了我的问题。因为我的对话框有RelativeLayout 来包含calendarView。我将 RelativeLayout 更改为 LinearLayout => 垃圾收集未启动

谢谢！

# xml-parsing - Informatica XML 读取错误

> ID：15356349
> 
> 赞同：0
> 
> 时间：2013-03-12T08:25:18.480
> 
> 标签：xml-parsing, informatica

在我的映射中，我们使用 xml 文件作为源。我们的问题是，在尝试使用大型 xml 文件（即大于 300 MB 的文件）执行映射时，我们遇到了错误。错误消息是 **“解析时发生错误 [无效文档结构] :[FATAL:Error at line1,char1 ”]** 我们已经成功地使用较小的文件（大小 < 300 MB）执行了映射。

是否有任何设置可以更改以处理如此大的文件。如果没有，是否有任何解决方法可以解决？

# html - 链接不可点击

> ID：15356350
> 
> 赞同：0
> 
> 时间：2013-03-12T08:25:24.627
> 
> 标签：html, hyperlink

我在这里制作一个网络应用程序[http://repinzle.herokuapp.com](http://repinzle.herokuapp.com)

由于某种原因无法单击链接，这非常令人沮丧和困惑。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T08:28:48.290

`gallery`id为 -10 的元素`z-index`，将其放在其容器下方`main`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:29:04.210

没有定义源：

![在此处输入图像描述](../Images/6b9b09c269137aed28b44a179c037d5a.png)

在 href 后面加上一个 url。

```
href="http://www.TheUrl.com" 
```

[这是一个完整的例子。](http://www.w3schools.com/tags/att_a_href.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T08:30:43.283

我刚刚给了这个div：

```
<div id="gallery" style="z-index: -10; position: relative; display: block;z-index: 1;"> 
```

z 索引：1。我无法解释这个问题，但这也许可以解决它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T08:31:42.540

检查代码：

```
<div id="gallery" style=" position: relative; display: block;"> 
```

有一个Z-index的样式：-10，去掉它就可以了

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T08:32:31.830

请确保您的 url(/salon/tickle-me) 是正确的

href 属性指定链接的目的地：

```
<a href="http://www.URL.com">TicKle me</a> 
```

# python - python spyne服务-base64字符串转义

> ID：15356357
> 
> 赞同：0
> 
> 时间：2013-03-12T08:25:34.870
> 
> 标签：python, base64, spyne

我有一个简单的 spyne 服务：

```
class JiraAdapter(ServiceBase):
    @srpc(Unicode, String, Unicode, _returns=Status)
    def CreateJiraIssueWithBase64Attachment(summary, base64attachment, attachment_filename):
        status = Status
        try:
            newkey = jira_client.createWithBase64Attachment(summary, base64attachment, attachment_filename)
            status.Code = StatusCodes.IssueCreated
            status.Message = unicode(newkey)
        except Exception as e:
            status.Code = StatusCodes.InternalError
            status.Message = u'Internal Exception: %s' % e.message
        return status 
```

问题是一些程序会在每 60 个字符左右插入 '\n' 到生成的 base64string 中，并且它会进入服务的方法，转义（'\\n'）导致事情表现得很奇怪。有没有设置或什么可以避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T10:50:07.513

首先，关于您发布的代码的一些评论：

1.  您必须实例化您的类型（即`status = Status()`，而不是`status = Status`）。实际上，您正在为类设置类属性`Status`。这不仅是*错误*的，而且您还通过在没有适当锁定的情况下更改全局状态来创建竞争条件。

2.  Jira 是否有办法使用二进制数据创建问题？您可以使用`ByteArray`它为您处理 base64 编码/解码。请注意，它`ByteArray`被反序列化为字符串序列。

3.  您可以定义自定义 base64 类型：

    ```
    Base64String = String(pattern='[0-9a-zA-Z/+=]+') 
    ```

    ...并使用它而不是简单`String`的验证来轻松拒绝无效输入。

4.  我不会返回“状态”对象，而是在需要时引发异常（或者您可以让原始异常冒泡）。异常也像普通对象一样被序列化。但这是您的决定，因为这取决于您希望如何使用您的 API。

现在对于您的原始问题：

你会同意在这里做的正确的事情是将任何转义的 '\n'（即 0x0a）修复为 r"\n"（即 0x5c 0x6e）。

如果你想处理它，我猜你评论中的解决方案（即`base64attachment = base64attachment.decode('string-escape')`是最好的解决方案。

我希望这会有所帮助。

最好的祝福，

# ios - nsarray 的所有元素是否存在于 nsstring 中

> ID：15356358
> 
> 赞同：2
> 
> 时间：2013-03-12T08:25:36.270
> 
> 标签：ios, nsstring, nsarray

我想扫描 NSString （不区分大小写）以检查数组的所有元素是否包含在该字符串中？

例如。

```
 NSString *string1 = @"Java is pass by value : lets see how?";
    NSString *string2 = @"Java is OOP Language";

    NSArray *array = [[NSArray alloc] initWithObjects:@"Java",@"Pass",@"value", nil]; 
```

在这种情况下，string1 通过了测试，因为它包含数组中的所有关键字（即 Java、Pass、Value）。

那么，我怎样才能实现这个功能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:29:16.233

```
BOOL containsAll = YES;
for (NSString *test in array) {
    if ([string1 rangeOfString:test].location == NSNotFound) {
        containsAll = NO;
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:48:33.563

我没有测试它的速度，它会在区分大小写的字符串上失败，但这是另一种解决方案（以防万一）

```
NSArray *components = [string1 componentsSeparatedByString:@" "];
NSSet *textSet = [NSSet setWithArray:components];
NSSet *keywordsSet = [NSSet setWithArray:array];
BOOL result = [keywordsSet isSubsetOfSet:textSet]; 
```

请记住，这`componentsSeparatedByString`将非常愚蠢地标记化，例如“如何？” 而不是你需要的“如何”。

# git - 将提交推送到 repo，但服务器上的 repo 不包含文件

> ID：15356360
> 
> 赞同：1
> 
> 时间：2013-03-12T08:25:44.320
> 
> 标签：git, unix, version-control

迄今为止，我对 git 的使用主要是通过 IDE 进行的，而我对我认为很容易的事情感到有些噩梦。

在远程服务器上，我运行了 gitolite，它似乎工作正常，我的本地计算机可以连接到服务器并执行简单的任务。

我在服务器上有一个与本地存储库同名的存储库，但是本地存储库是在服务器版本之前很长时间创建的。

在大量阅读 SO 之后，建议克隆远程然后推送到服务器。所以：

```
$ git clone ***server***:***repo***
Cloning into ***repo***...
warning: You appear to have cloned an empty repository. 
```

当我这样做时，我收到了一条令人鼓舞的信息：

```
$ git push origin master
Counting objects: 4070, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (3737/3737), done.
Writing objects: 100% (4070/4070), 15.16 MiB | 588 KiB/s, done.
Total 4070 (delta 867), reused 0 (delta 0)
To ***server***:***repo***.git
 * [new branch]      master -> master
$ 
```

一切看起来都很好......**但是文件不在服务器上？**

我应该合并吗，rebase 怎么样...这是我的知识完全崩溃的地方。我已经尝试阅读[git-scm](http://git-scm.com/documentation)文档，但我必须说实话.. 它超出了我的想象，这似乎应该是一件很简单的事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T08:57:49.270

服务器只包含一个*裸*存储库，即**没有**检出。文件仅存储在`objetcs/`目录和`pack`您提到的文件中。您可以做些什么来验证文件确实存在，例如，从本地计算机上的服务器创建一个新克隆。或者，在服务器上，您可以执行

```
git ls-tree -r master 
```

它应该为您提供所有文件的列表以及它们的模式和哈希值。

**EDIT**: You'll want to read the chapter about [Git on the server in the Pro Git](http://git-scm.com/book/en/Git-on-the-Server) book.

# r - 从数据框中删除某些行以及接下来的两行

> ID：15356361
> 
> 赞同：-3
> 
> 时间：2013-03-12T08:25:45.450
> 
> 标签：r

我无法弄清楚删除数据框中具有特定值的行以及它们下面的两行的语法是什么。任何人都可以帮忙吗？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:32:28.773

这是一种（不是很优雅）的方法：

```
# Sample data
df <- data.frame(x=c(1:5,1:5),y=rnorm(10))
# Computing selection
select <- rep(TRUE, nrow(df))
index <- which(df$x==3)
select[unique(c(index,index+1,index+2))] <- FALSE
# Rows selection
df[select,] 
```

这使 ：

```
 x          y
1 1 -0.2438523
2 2 -0.8004811
6 1  0.5970947
7 2  1.8124529 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T10:40:52.657

只是另一种方式。您可以创建一个微小的效用函数，循环移动您的向量，并将它们与您希望从匹配位置删除的值的数量一样多次。

```
cyclic_or_shift <- function(x, times) {
    for (i in 1:times)
        x <- x | c(FALSE, head(x, -1))
    x   
}

set.seed(45)
df <- data.frame(x=c(10,20,3,40,50,3,60,70,80), y=rnorm(9))
df[!(cyclic_or_shift(df$x == 3, 2)),]

#    x          y
# 1 10  0.3407997
# 2 20 -0.7033403
# 9 80  1.8090374 
```

优点：您可以使用它来删除任意数量的连续行：

```
set.seed(45)
df <- data.frame(x=c(1,2,3,4,5,6,7,3,8,9,10,3,11,12,13,3))
df$y <- rnorm(nrow(df))
# > df
#     x          y
# 1   1  0.3407997
# 2   2 -0.7033403
# 3   3 -0.3795377
# 4   4 -0.7460474
# 5   5 -0.8981073
# 6   6 -0.3347941
# 7   7 -0.5013782
# 8   3 -0.1745357
# 9   8  1.8090374
# 10  9 -0.2301050
# 11 10 -1.1304182
# 12  3  0.2159889
# 13 11  1.2322373
# 14 12  1.6093587
# 15 13  0.4015506
# 16  3 -0.2729840

# remove the next 3 elements as well from every matching index
df[!(cyclic_or_shift(df$x == 3, 3)),]
#   x          y
# 1 1  0.3407997
# 2 2 -0.7033403
# 7 7 -0.5013782 
```

# php - 如何在一个 CGridView 中显示两个模型

> ID：15356364
> 
> 赞同：0
> 
> 时间：2013-03-12T08:25:54.013
> 
> 标签：php, yii, cgridview

我有两张桌子，`1\. Students` `2.SrkParents.`

学生模型中的关系是，

```
'srkParents' => array(self::HAS_MANY, 'SrkParents', 'studentID'), 
```

SrkParents 模型中的关系是，

```
'student' => array(self::BELONGS_TO, 'Students', 'studentID'), 
```

观点是，

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
'id'=>'students-grid',
'dataProvider'=>$dataProvider,
'filter'=>$model,
'columns'=>array('studentID','status','del',

array('name'=>'SrkParents.fathers_name',
'value'=>'$data->Students->fathers_name',
'type'=>'raw'),
array('class'=>'CButtonColumn',),),)); 
```

我不知道我在哪里做错了..我得到如下所示的错误，

```
Property "Students.Students" is not defined. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:37:40.677

修改后的答案：只需将关系 has_one 从 has_many 更改

```
'srkParents' => array(self::HAS_ONE, 'SrkParents', 'studentID'), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:50:29.017

你的关系`srkParents`是一种`HAS_MANY`关系。因此`$data->srkParents`是一个**数组**而`SrkParents`不是一个对象。这是有道理的，因为您的学生有好几个家长。

我对你的模型属性知之甚少，所以我只能猜测：解决这个问题的一种方法是`get`在你的模型中添加一个 er，`Students`它会循环`$this->srkParents`查找父对象并从那里返回名称：

```
public function getFatherName()
{
    foreach($this->srkParents as $parent)
        if($parent->sex=='m' /* just guessing */)
            return $parent->name;
} 
```

然后你可以`$data->fatherName`在你的网格视图中使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T14:56:48.050

您的关系名称是学生，这是区分大小写的。

尝试更改`$data->Students->fathers_name`为`$data->student->fathers_name`.

属性`Students.Students`未定义。

> 我究竟做错了什么？

*   您试图从未定义`Students`的模型中获取字段。`Students`

# php - 如何在分页期间收集单选按钮值？

> ID：15356370
> 
> 赞同：1
> 
> 时间：2013-03-12T08:26:26.700
> 
> 标签：php, mysql, radio-button

我最近一直在做一个涉及问答的小项目。所以基本上这是一个测验/测试，不管你怎么称呼这个页面。我根据所有问题和答案存储的要求制作了一个数据库。所以是的，输出来自数据库。现在，我需要在一个页面中一次输出 5 个问题，所以使用分页来完成。

```
$outputList = '';

while($row = mysql_fetch_array($sql2)){

  $question = $row['questions'];
  $opta = $row['optA'];
  $optb = $row['optB'];
  $optc = $row['optC'];
  $optd = $row['optD'];
  $id = $row['ctrlNo'];
  $outputList .="            
                <p>$id. $question</p>

                <div>

                    <input type='radio' name='question-$id-' id='question-$id-answers-A' value='A' />
                    <label for='question-$id-answers-A'>A) $opta </label>
                </div>

                <div>
                    <input type='radio' name='question-$id-' id='question-$id-answers-B' value='B' />
                    <label for='question-$id-answers-B'>B) $optb </label>
                </div>

                <div>
                    <input type='radio' name='question-$id-' id='question-$id-answers-C' value='C' />
                    <label for='question-$id-answers-C'>C) $optc </label>
                </div>

                <div>
                    <input type='radio' name='question-$id-' id='question-$id-answers-D' value='D' />
                    <label for='question-$id-answers-D'>D) $optd </label>
                </div>
            ";

} 
```

好的，所以我有 4 个单选按钮来选择每个问题，它们都运行良好。我想不通的是在分页期间收集它们的值。我的意思是，当我在第 1 页并提交我的答案时，它正在工作，但是当我进入第 2 页并提交我的答案时，它没有传递从第 1 页收集的值。现在我已经没有想法了做。谁能指导我如何首先从第 1 页到用户的当前页面收集所选单选按钮的所有值并将其传递给我的 php 页面，以验证答案？这是我的html中的代码。

```
 <form id="form1" name="form1" action="testpage5.php" method="POST" >

 <?php print "$outputList"; ?>

 <p><div style="margin-left:58px; margin-right:58px; padding:6px; background-     color:#FFF; ">
 <?php echo $paginationDisplay; ?>
 </div></p>

 <input type="submit" value="Submit Quiz"></input>
 </form>` 
```

`testpage5.php`是我验证答案的页面，将 的值`$_POST`与数据库中的正确答案进行比较。我曾经`$_POST`收集单选按钮的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:33:52.897

看看`$_SESSION`。它是一个超级全局数组，用于存储浏览器会话的值。

另一种方法是创建隐藏的表单元素，其中包含先前提交的页面的值。

# macos - OSX 10.6 在 0x0000000000000000 处提供 EXC_BAD_ACCESS、KERN_INVALID_ADDRESS

> ID：15356377
> 
> 赞同：2
> 
> 时间：2013-03-12T08:26:41.037
> 
> 标签：macos, cocoa, osx-snow-leopard, xcode4.6

我开发了一个在 Xcode 4.6 中构建的应用程序，其中基本 SDK 设置为 10.8，部署目标设置为 10.6。我所有的 xib 文件都有部署目标 10.6，我的依赖项是为 10.6 构建和配置的。

该应用程序在 10.8 和 10.7 中运行得很好，但是当我在 10.6 上安装它时它立即崩溃（它从未出现在扩展坞中）并且我收到以下错误。

```
Process:         My App [9397]
Path:            /Applications/My App.app/Contents/MacOS/My App
Identifier:      com.mycompany.myapp
Version:         0.4.b (0.4.b)
Code Type:       X86-64 (Native)
Parent Process:  launchd [161]

Date/Time:       2013-03-11 13:57:31.613 +0100
OS Version:      Mac OS X Server 10.6.8 (10K549)
Report Version:  6

Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x0000000000000000
Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Thread 0 Crashed:  Dispatch queue: com.apple.main-thread
0   ???                             000000000000000000 0 + 0
1   com.apple.AppKit                0x00007fff84a2922e -[NSCustomObject nibInstantiate] + 416
2   com.apple.AppKit                0x00007fff84a2901b -[NSIBObjectData instantiateObject:] + 259
3   com.apple.AppKit                0x00007fff84a28406 -[NSIBObjectData nibInstantiateWithOwner:topLevelObjects:] + 336
4   com.apple.AppKit                0x00007fff84a26a91 loadNib + 226
5   com.apple.AppKit                0x00007fff84a25fa1 +[NSBundle(NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:] + 248
6   com.apple.AppKit                0x00007fff84a25dd9 +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 326
7   com.apple.AppKit                0x00007fff84a2335b NSApplicationMain + 279
8   com.mycompany.myapp             0x00000001000018b4 0x100000000 + 6324

Thread 1:  Dispatch queue: com.apple.libdispatch-manager
0   libSystem.B.dylib               0x00007fff82964c0a kevent + 10
1   libSystem.B.dylib               0x00007fff82966add _dispatch_mgr_invoke + 154
2   libSystem.B.dylib               0x00007fff829667b4 _dispatch_queue_invoke + 185
3   libSystem.B.dylib               0x00007fff829662de _dispatch_worker_thread2 + 252
4   libSystem.B.dylib               0x00007fff82965c08 _pthread_wqthread + 353
5   libSystem.B.dylib               0x00007fff82965aa5 start_wqthread + 13

Thread 2:
0   libSystem.B.dylib               0x00007fff82965a2a __workq_kernreturn + 10
1   libSystem.B.dylib               0x00007fff82965e3c _pthread_wqthread + 917
2   libSystem.B.dylib               0x00007fff82965aa5 start_wqthread + 13

Thread 0 crashed with X86 Thread State (64-bit):
  rax: 0x0000000100208c90  rbx: 0x0000000100208c90  rcx: 0x000003ffffffffff  rdx: 0x00000000ffffffff
  rdi: 0x0000000100208c90  rsi: 0x000000010023afd0  rbp: 0x00007fff5fbff4f0  rsp: 0x00007fff5fbff488
   r8: 0x00007fff709272a0   r9: 0x0000000000000000  r10: 0x000000010020cac0  r11: 0x00007fff5fbff3a0
  r12: 0x0000000000000010  r13: 0x0000000100230940  r14: 0x00000001000567a8  r15: 0x00007fff70929630
  rip: 0x0000000000000000  rfl: 0x0000000000010206  cr2: 0x0000000000000000

Binary Images:
       0x100000000 -        0x100049ff7 +com.mycompany.myapp 0.4.b (0.4.b) <5B23E41F-0260-3387-A857-886B17CD2D77> /Applications/My App.app/Contents/MacOS/My App
       0x100076000 -        0x1000b2ff7 +com.github.ReactiveCocoa 1.0 (1) <7334C51B-6581-37CD-8DD1-AE63BE1D5714> /Applications/My App.app/Contents/Frameworks/ReactiveCocoa.framework/Versions/A/ReactiveCocoa
       0x1000e2000 -        0x100100ff7 +org.andymatuschak.Sparkle 1.5 Beta (git) (1.5) <1AEF9BA1-399F-37D5-B71C-E2B4BEF9B3AD> /Applications/My App.app/Contents/Frameworks/Sparkle.framework/Versions/A/Sparkle
       0x10011b000 -        0x100121ff7 +com.septicus.SSCrypto 1.0 (1.1.2) <AE8B1882-A395-3F4A-B97C-77A2CE3973D9> /Applications/My App.app/Contents/Frameworks/SSCrypto.framework/Versions/A/SSCrypto
    0x7fff5fc00000 -     0x7fff5fc3be0f  dyld 132.1 (???) <29DECB19-0193-2575-D838-CF743F0400B2> /usr/lib/dyld
    0x7fff80003000 -     0x7fff80009ff7  IOSurface ??? (???) <8E302BB2-0704-C6AB-BD2F-C2A6C6A2E2C3> /System/Library/Frameworks/IOSurface.framework/Versions/A/IOSurface
    0x7fff80182000 -     0x7fff801d1fef  libTIFF.dylib ??? (???) <1E2593D1-A7F6-84C6-DF8F-0B46AE445926> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libTIFF.dylib
    0x7fff801d2000 -     0x7fff801e7ff7  com.apple.LangAnalysis 1.6.6 (1.6.6) <1AE1FE8F-2204-4410-C94E-0E93B003BEDA> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/LangAnalysis.framework/Versions/A/LangAnalysis
    0x7fff801e8000 -     0x7fff80307fe7  libcrypto.0.9.8.dylib 0.9.8 (compatibility 0.9.8) <14115D29-432B-CF02-6B24-A60CC533A09E> /usr/lib/libcrypto.0.9.8.dylib
    0x7fff80308000 -     0x7fff804c6ff7  com.apple.ImageIO.framework 3.0.4 (3.0.4) <0A4F51A1-4502-767B-8A4E-F14C6214EF88> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/ImageIO
    0x7fff80521000 -     0x7fff808befe7  com.apple.QuartzCore 1.6.3 (227.37) <16DFF6CD-EA58-CE62-A1D7-5F6CE3D066DD> /System/Library/Frameworks/QuartzCore.framework/Versions/A/QuartzCore
    0x7fff808bf000 -     0x7fff808cefff  com.apple.NetFS 3.2.2 (3.2.2) <7CCBD70E-BF31-A7A7-DB98-230687773145> /System/Library/Frameworks/NetFS.framework/Versions/A/NetFS
    0x7fff80c74000 -     0x7fff80c74ff7  com.apple.Carbon 150 (152) <23704665-E9F4-6B43-1115-2E69F161FC45> /System/Library/Frameworks/Carbon.framework/Versions/A/Carbon
    0x7fff80ca5000 -     0x7fff80d66fef  com.apple.ColorSync 4.6.6 (4.6.6) <BB2C5813-C61D-3CBA-A8F7-0E59E46EBEE8> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ColorSync.framework/Versions/A/ColorSync
    0x7fff80dc8000 -     0x7fff810c6fff  com.apple.HIToolbox 1.6.5 (???) <AD1C18F6-51CB-7E39-35DD-F16B1EB978A8> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HIToolbox.framework/Versions/A/HIToolbox
    0x7fff81121000 -     0x7fff81123fff  com.apple.print.framework.Print 6.1 (237.1) <CA8564FB-B366-7413-B12E-9892DA3C6157> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Print.framework/Versions/A/Print
    0x7fff81124000 -     0x7fff81127ff7  libCoreVMClient.dylib ??? (???) <E03D7C81-A3DA-D44A-A88A-DDBB98AF910B> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCoreVMClient.dylib
    0x7fff811c4000 -     0x7fff811c9ff7  com.apple.CommonPanels 1.2.4 (91) <4D84803B-BD06-D80E-15AE-EFBE43F93605> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/CommonPanels.framework/Versions/A/CommonPanels
    0x7fff811ca000 -     0x7fff8124fff7  com.apple.print.framework.PrintCore 6.3 (312.7) <CDFE82DD-D811-A091-179F-6E76069B432D> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/PrintCore.framework/Versions/A/PrintCore
    0x7fff81373000 -     0x7fff8138cfff  com.apple.CFOpenDirectory 10.6 (10.6) <401557B1-C6D1-7E1A-0D7E-941715C37BFA> /System/Library/Frameworks/OpenDirectory.framework/Versions/A/Frameworks/CFOpenDirectory.framework/Versions/A/CFOpenDirectory
    0x7fff8138d000 -     0x7fff813caff7  libssl.0.9.8.dylib 0.9.8 (compatibility 0.9.8) <F743389F-F25A-A77D-4FCA-D6B01AF2EE6D> /usr/lib/libssl.0.9.8.dylib
    0x7fff813d5000 -     0x7fff813d8ff7  com.apple.securityhi 4.0 (36638) <AEF55AF1-54D3-DB8D-27A7-E16192E0045A> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/SecurityHI.framework/Versions/A/SecurityHI
    0x7fff813d9000 -     0x7fff81489fff  edu.mit.Kerberos 6.5.11 (6.5.11) <085D80F5-C9DC-E252-C21B-03295E660C91> /System/Library/Frameworks/Kerberos.framework/Versions/A/Kerberos
    0x7fff8148a000 -     0x7fff81499fef  com.apple.opengl 1.6.13 (1.6.13) <516098B3-4517-8A55-64BB-195CDAA5334D> /System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL
    0x7fff8149a000 -     0x7fff814e2ff7  libvDSP.dylib 268.0.1 (compatibility 1.0.0) <98FC4457-F405-0262-00F7-56119CA107B6> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvDSP.dylib
    0x7fff81651000 -     0x7fff8168bfff  libcups.2.dylib 2.8.0 (compatibility 2.0.0) <539EBFDD-96D6-FB07-B128-40232C408757> /usr/lib/libcups.2.dylib
    0x7fff816ad000 -     0x7fff816b2fff  libGFXShared.dylib ??? (???) <1D0D3531-9561-632C-D620-1A8652BEF5BC> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGFXShared.dylib
    0x7fff816b3000 -     0x7fff816e4fff  libGLImage.dylib ??? (???) <7F102A07-E4FB-9F52-B2F6-4E2D2383CA13> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLImage.dylib
    0x7fff816e5000 -     0x7fff816e5ff7  com.apple.ApplicationServices 38 (38) <10A0B9E9-4988-03D4-FC56-DDE231A02C63> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/ApplicationServices
    0x7fff817fd000 -     0x7fff817feff7  com.apple.TrustEvaluationAgent 1.1 (1) <5952A9FA-BC2B-16EF-91A7-43902A5C07B6> /System/Library/PrivateFrameworks/TrustEvaluationAgent.framework/Versions/A/TrustEvaluationAgent
    0x7fff817ff000 -     0x7fff8197dff7  com.apple.WebKit 6533.21 (6533.21.1) <C89E93DE-3BFD-2E7A-2A49-356885FA1CDE> /System/Library/Frameworks/WebKit.framework/Versions/A/WebKit
    0x7fff8197e000 -     0x7fff81dc1fef  libLAPACK.dylib 219.0.0 (compatibility 1.0.0) <0CC61C98-FF51-67B3-F3D8-C5E430C201A9> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libLAPACK.dylib
    0x7fff81dc2000 -     0x7fff81dd8fef  libbsm.0.dylib ??? (???) <42D3023A-A1F7-4121-6417-FCC6B51B3E90> /usr/lib/libbsm.0.dylib
    0x7fff81dd9000 -     0x7fff81ddefff  libGIF.dylib ??? (???) <201B8077-B5CC-11AA-E1B0-1D057ABE416A> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libGIF.dylib
    0x7fff81de0000 -     0x7fff81ef7fef  libxml2.2.dylib 10.3.0 (compatibility 10.0.0) <1B27AFDD-DF87-2009-170E-C129E1572E8B> /usr/lib/libxml2.2.dylib
    0x7fff81ef8000 -     0x7fff81f07fff  libxar.1.dylib ??? (???) <CBAF862A-3C77-6446-56C2-9C4461631AAF> /usr/lib/libxar.1.dylib
    0x7fff81f3d000 -     0x7fff81f3dff7  com.apple.Accelerate.vecLib 3.6 (vecLib 3.6) <4CCE5D69-F1B3-8FD3-1483-E0271DB2CCF3> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/vecLib
    0x7fff81f3e000 -     0x7fff81f87fef  libGLU.dylib ??? (???) <1C050088-4AB2-2BC2-62E6-C969F925A945> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLU.dylib
    0x7fff8202e000 -     0x7fff82049ff7  com.apple.openscripting 1.3.1 (???) <9D50701D-54AC-405B-CC65-026FCB28258B> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/OpenScripting.framework/Versions/A/OpenScripting
    0x7fff8204a000 -     0x7fff8204aff7  com.apple.Cocoa 6.6 (???) <68B0BE46-6E24-C96F-B341-054CF9E8F3B6> /System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa
    0x7fff8205d000 -     0x7fff82131fe7  com.apple.CFNetwork 454.12.4 (454.12.4) <C83E2BA1-1818-B3E8-5334-860AD21D1C80> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CFNetwork.framework/Versions/A/CFNetwork
    0x7fff82132000 -     0x7fff8293cfe7  libBLAS.dylib 219.0.0 (compatibility 1.0.0) <FC941ECB-71D0-FAE3-DCBF-C5A619E594B8> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
    0x7fff8294b000 -     0x7fff82b0cfef  libSystem.B.dylib 125.2.11 (compatibility 1.0.0) <9AB4F1D1-89DC-0E8A-DC8E-A4FE4D69DB69> /usr/lib/libSystem.B.dylib
    0x7fff82b23000 -     0x7fff82b2afff  com.apple.OpenDirectory 10.6 (10.6) <4FF6AD25-0916-B21C-9E88-2CC42D90EAC7> /System/Library/Frameworks/OpenDirectory.framework/Versions/A/OpenDirectory
    0x7fff82b2b000 -     0x7fff82b3dfe7  libsasl2.2.dylib 3.15.0 (compatibility 3.0.0) <76B83C8D-8EFE-4467-0F75-275648AFED97> /usr/lib/libsasl2.2.dylib
    0x7fff82e98000 -     0x7fff82ebfff7  libJPEG.dylib ??? (???) <46A413EA-4FD1-A050-2EF0-6279F3EAD581> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libJPEG.dylib
    0x7fff82ec0000 -     0x7fff831f4fef  com.apple.CoreServices.CarbonCore 861.39 (861.39) <1386A24D-DD15-5903-057E-4A224FAF580B> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore
    0x7fff833a4000 -     0x7fff83421fef  libstdc++.6.dylib 7.9.0 (compatibility 7.0.0) <35ECA411-2C08-FD7D-11B1-1B7A04921A5C> /usr/lib/libstdc++.6.dylib
    0x7fff83485000 -     0x7fff83485ff7  com.apple.CoreServices 44 (44) <DC7400FB-851E-7B8A-5BF6-6F50094302FB> /System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices
    0x7fff83486000 -     0x7fff83516fff  com.apple.SearchKit 1.3.0 (1.3.0) <4175DC31-1506-228A-08FD-C704AC9DF642> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/SearchKit.framework/Versions/A/SearchKit
    0x7fff83517000 -     0x7fff8352dfe7  com.apple.MultitouchSupport.framework 207.11 (207.11) <8233CE71-6F8D-8B3C-A0E1-E123F6406163> /System/Library/PrivateFrameworks/MultitouchSupport.framework/Versions/A/MultitouchSupport
    0x7fff8352e000 -     0x7fff83542ff7  com.apple.speech.synthesis.framework 3.10.35 (3.10.35) <621B7415-A0B9-07A7-F313-36BEEDD7B132> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/SpeechSynthesis.framework/Versions/A/SpeechSynthesis
    0x7fff83543000 -     0x7fff8365dfef  libGLProgrammability.dylib ??? (???) <8A4B86E3-0FA7-8684-2EF2-C5F8079428DB> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLProgrammability.dylib
    0x7fff836a2000 -     0x7fff83860fff  libicucore.A.dylib 40.0.0 (compatibility 1.0.0) <4274FC73-A257-3A56-4293-5968F3428854> /usr/lib/libicucore.A.dylib
    0x7fff83da3000 -     0x7fff83dc6fff  com.apple.opencl 12.3.6 (12.3.6) <42FA5783-EB80-1168-4015-B8C68F55842F> /System/Library/Frameworks/OpenCL.framework/Versions/A/OpenCL
    0x7fff83de3000 -     0x7fff83e20ff7  libFontRegistry.dylib ??? (???) <4C3293E2-851B-55CE-3BE3-29C425DD5DFF> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontRegistry.dylib
    0x7fff83e2d000 -     0x7fff83f12fef  com.apple.DesktopServices 1.5.11 (1.5.11) <39FAA3D2-6863-B5AB-AED9-92D878EA2438> /System/Library/PrivateFrameworks/DesktopServicesPriv.framework/Versions/A/DesktopServicesPriv
    0x7fff840cb000 -     0x7fff84209fff  com.apple.CoreData 102.1 (251) <9DFE798D-AA52-6A9A-924A-DA73CB94D81A> /System/Library/Frameworks/CoreData.framework/Versions/A/CoreData
    0x7fff8420a000 -     0x7fff84906ff7  com.apple.CoreGraphics 1.545.0 (???) <58D597B1-EB3B-710E-0B8C-EC114D54E11B> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics
    0x7fff84a21000 -     0x7fff8541bff7  com.apple.AppKit 6.6.8 (1038.36) <4CFBE04C-8FB3-B0EA-8DDB-7E7D10E9D251> /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit
    0x7fff8541c000 -     0x7fff85593fe7  com.apple.CoreFoundation 6.6.5 (550.43) <31A1C118-AD96-0A11-8BDF-BD55B9940EDC> /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation
    0x7fff855b7000 -     0x7fff855b8fff  liblangid.dylib ??? (???) <EA4D1607-2BD5-2EE2-2A3B-632EEE5A444D> /usr/lib/liblangid.dylib
    0x7fff855c8000 -     0x7fff855d9ff7  libz.1.dylib 1.2.3 (compatibility 1.0.0) <97019C74-161A-3488-41EC-A6CA8738418C> /usr/lib/libz.1.dylib
    0x7fff85643000 -     0x7fff85643ff7  com.apple.Accelerate 1.6 (Accelerate 1.6) <15DF8B4A-96B2-CB4E-368D-DEC7DF6B62BB> /System/Library/Frameworks/Accelerate.framework/Versions/A/Accelerate
    0x7fff85644000 -     0x7fff85699ff7  com.apple.framework.familycontrols 2.0.2 (2020) <8807EB96-D12D-8601-2E74-25784A0DE4FF> /System/Library/PrivateFrameworks/FamilyControls.framework/Versions/A/FamilyControls
    0x7fff85710000 -     0x7fff8638bfef  com.apple.WebCore 6533.21 (6533.21.1) <15CE3700-C6DC-7F94-5394-4CF78040A40D> /System/Library/Frameworks/WebKit.framework/Versions/A/Frameworks/WebCore.framework/Versions/A/WebCore
    0x7fff86465000 -     0x7fff864acff7  com.apple.coreui 2 (114) <923E33CC-83FC-7D35-5603-FB8F348EE34B> /System/Library/PrivateFrameworks/CoreUI.framework/Versions/A/CoreUI
    0x7fff868f5000 -     0x7fff8693fff7  com.apple.Metadata 10.6.3 (507.15) <2EF19055-D7AE-4D77-E589-7B71B0BC1E59> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/Metadata.framework/Versions/A/Metadata
    0x7fff86ab1000 -     0x7fff86ab5ff7  libmathCommon.A.dylib 315.0.0 (compatibility 1.0.0) <95718673-FEEE-B6ED-B127-BCDBDB60D4E5> /usr/lib/system/libmathCommon.A.dylib
    0x7fff86ab6000 -     0x7fff86ad6ff7  com.apple.DirectoryService.Framework 3.6 (621.12) <A4685F06-5881-35F5-764D-C380304C1CE8> /System/Library/Frameworks/DirectoryService.framework/Versions/A/DirectoryService
    0x7fff86db6000 -     0x7fff86db8fff  libRadiance.dylib ??? (???) <A9DB4D5D-4072-971B-DEF6-DDE645F415EA> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libRadiance.dylib
    0x7fff86e22000 -     0x7fff86edffff  com.apple.CoreServices.OSServices 359.2 (359.2) <BBB8888E-18DE-5D09-3C3A-F4C029EC7886> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/OSServices.framework/Versions/A/OSServices
    0x7fff86ee7000 -     0x7fff86ef3fff  libbz2.1.0.dylib 1.0.5 (compatibility 1.0.0) <9AB864FA-9197-5D48-A0EC-EC8330D475FC> /usr/lib/libbz2.1.0.dylib
    0x7fff86ef4000 -     0x7fff870e4fef  com.apple.JavaScriptCore 6533.20 (6533.20.20) <5626170D-00AE-33B1-03FF-256E9794150D> /System/Library/Frameworks/JavaScriptCore.framework/Versions/A/JavaScriptCore
    0x7fff874d4000 -     0x7fff87534fe7  com.apple.framework.IOKit 2.0 (???) <4F071EF0-8260-01E9-C641-830E582FA416> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
    0x7fff87535000 -     0x7fff8753bff7  com.apple.DiskArbitration 2.3 (2.3) <857F6E43-1EF4-7D53-351B-10DE0A8F992A> /System/Library/Frameworks/DiskArbitration.framework/Versions/A/DiskArbitration
    0x7fff8753c000 -     0x7fff8757dfff  com.apple.SystemConfiguration 1.10.8 (1.10.2) <78D48D27-A9C4-62CA-2803-D0BBED82855A> /System/Library/Frameworks/SystemConfiguration.framework/Versions/A/SystemConfiguration
    0x7fff8757e000 -     0x7fff8763ffff  libFontParser.dylib ??? (???) <A00BB0A7-E46C-1D07-1391-194745566C7E> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontParser.dylib
    0x7fff87640000 -     0x7fff87693ff7  com.apple.HIServices 1.8.3 (???) <F6E0C7A7-C11D-0096-4DDA-2C77793AA6CD> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/HIServices.framework/Versions/A/HIServices
    0x7fff87edf000 -     0x7fff87f5efe7  com.apple.audio.CoreAudio 3.2.6 (3.2.6) <79E256EB-43F1-C7AA-6436-124A4FFB02D0> /System/Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio
    0x7fff87f5f000 -     0x7fff87f7cff7  libPng.dylib ??? (???) <6D8E515B-E0A2-2BA1-9CAC-8CB8A8B35879> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libPng.dylib
    0x7fff87f7d000 -     0x7fff87f7eff7  com.apple.audio.units.AudioUnit 1.6.7 (1.6.7) <53299948-2554-0F8F-7501-04B34E49F6CF> /System/Library/Frameworks/AudioUnit.framework/Versions/A/AudioUnit
    0x7fff8824f000 -     0x7fff88384fff  com.apple.audio.toolbox.AudioToolbox 1.6.7 (1.6.7) <E5D7DBDB-6DDF-E6F9-C71C-86F4520EE5A3> /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox
    0x7fff88385000 -     0x7fff88388fff  com.apple.help 1.3.2 (41.1) <BD1B0A22-1CB8-263E-FF85-5BBFDE3660B9> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Help.framework/Versions/A/Help
    0x7fff88414000 -     0x7fff884b4fff  com.apple.LaunchServices 362.3 (362.3) <B90B7C31-FEF8-3C26-BFB3-D8A48BD2C0DA> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/LaunchServices
    0x7fff884b5000 -     0x7fff88541fef  SecurityFoundation ??? (???) <3F1F2727-C508-3630-E2C1-38361841FCE4> /System/Library/Frameworks/SecurityFoundation.framework/Versions/A/SecurityFoundation
    0x7fff887a2000 -     0x7fff88820ff7  com.apple.CoreText 151.10 (???) <54961997-55D8-DC0F-2634-674E452D5A8E> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreText.framework/Versions/A/CoreText
    0x7fff8885f000 -     0x7fff8886aff7  com.apple.speech.recognition.framework 3.11.1 (3.11.1) <3D65E89B-FFC6-4AAF-D5CC-104F967C8131> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/SpeechRecognition.framework/Versions/A/SpeechRecognition
    0x7fff8886b000 -     0x7fff88905fe7  com.apple.ApplicationServices.ATS 275.16 (???) <4B70A2FC-1902-5F27-5C3B-5C78C283C6EA> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/ATS
    0x7fff88906000 -     0x7fff889bcff7  libobjc.A.dylib 227.0.0 (compatibility 1.0.0) <03140531-3B2D-1EBA-DA7F-E12CC8F63969> /usr/lib/libobjc.A.dylib
    0x7fff889bd000 -     0x7fff88a72fe7  com.apple.ink.framework 1.3.3 (107) <8C36373C-5473-3A6A-4972-BC29D504250F> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Ink.framework/Versions/A/Ink
    0x7fff88a7b000 -     0x7fff88d04ff7  com.apple.security 6.1.2 (55002) <4419AFFC-DAE7-873E-6A7D-5C9A5A4497A6> /System/Library/Frameworks/Security.framework/Versions/A/Security
    0x7fff88d05000 -     0x7fff88d51fff  libauto.dylib ??? (???) <F7221B46-DC4F-3153-CE61-7F52C8C293CF> /usr/lib/libauto.dylib
    0x7fff88d52000 -     0x7fff88d7afff  com.apple.DictionaryServices 1.1.2 (1.1.2) <E9269069-93FA-2B71-F9BA-FDDD23C4A65E> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/DictionaryServices.framework/Versions/A/DictionaryServices
    0x7fff88e07000 -     0x7fff88e14fe7  libCSync.A.dylib 545.0.0 (compatibility 64.0.0) <1C35FA50-9C70-48DC-9E8D-2054F7A266B1> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/Resources/libCSync.A.dylib
    0x7fff88e15000 -     0x7fff88e15ff7  com.apple.vecLib 3.6 (vecLib 3.6) <96FB6BAD-5568-C4E0-6FA7-02791A58B584> /System/Library/Frameworks/vecLib.framework/Versions/A/vecLib
    0x7fff88e88000 -     0x7fff88e9cfff  libGL.dylib ??? (???) <2ECE3B0F-39E1-3938-BF27-7205C6D0358B> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib
    0x7fff88e9d000 -     0x7fff88f56fff  libsqlite3.dylib 9.6.0 (compatibility 9.0.0) <2C5ED312-E646-9ADE-73A9-6199A2A43150> /usr/lib/libsqlite3.dylib
    0x7fff88f7f000 -     0x7fff88fceff7  com.apple.DirectoryService.PasswordServerFramework 6.1 (6.1) <0731C40D-71EF-B417-C83B-54C3527A36EA> /System/Library/PrivateFrameworks/PasswordServer.framework/Versions/A/PasswordServer
    0x7fff88fdb000 -     0x7fff890b8fff  com.apple.vImage 4.1 (4.1) <C3F44AA9-6F71-0684-2686-D3BBC903F020> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vImage.framework/Versions/A/vImage
    0x7fff890b9000 -     0x7fff890dafff  libresolv.9.dylib 41.0.0 (compatibility 1.0.0) <9F322F47-0584-CB7D-5B73-9EBD670851CD> /usr/lib/libresolv.9.dylib
    0x7fff8918a000 -     0x7fff891b5ff7  libxslt.1.dylib 3.24.0 (compatibility 3.0.0) <8AB4CA9E-435A-33DA-7041-904BA7FA11D5> /usr/lib/libxslt.1.dylib
    0x7fff891b6000 -     0x7fff891c4ff7  libkxld.dylib ??? (???) <8145A534-95CC-9F3C-B78B-AC9898F38C6F> /usr/lib/system/libkxld.dylib
    0x7fff891c5000 -     0x7fff89200fff  com.apple.AE 496.5 (496.5) <208DF391-4DE6-81ED-C697-14A2930D1BC6> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/AE.framework/Versions/A/AE
    0x7fff89201000 -     0x7fff89242fef  com.apple.QD 3.36 (???) <5DC41E81-32C9-65B2-5528-B33E934D5BB4> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/QD.framework/Versions/A/QD
    0x7fff89243000 -     0x7fff89268ff7  com.apple.CoreVideo 1.6.2 (45.6) <E138C8E7-3CB6-55A9-0A2C-B73FE63EA288> /System/Library/Frameworks/CoreVideo.framework/Versions/A/CoreVideo
    0x7fff8945f000 -     0x7fff89465ff7  com.apple.CommerceCore 1.0 (9.1) <3691E9BA-BCF4-98C7-EFEC-78DA6825004E> /System/Library/PrivateFrameworks/CommerceKit.framework/Versions/A/Frameworks/CommerceCore.framework/Versions/A/CommerceCore
    0x7fff89466000 -     0x7fff896e8fe7  com.apple.Foundation 6.6.7 (751.62) <6F2A5BBF-6990-D561-2928-AD61E94036D9> /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation
    0x7fff897f0000 -     0x7fff8985afe7  libvMisc.dylib 268.0.1 (compatibility 1.0.0) <AF0EA96D-000F-8C12-B952-CB7E00566E08> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvMisc.dylib
    0x7fff8985b000 -     0x7fff89872fff  com.apple.ImageCapture 6.1 (6.1) <79AB2131-2A6C-F351-38A9-ED58B25534FD> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ImageCapture.framework/Versions/A/ImageCapture
    0x7fffffe00000 -     0x7fffffe01fff  libSystem.B.dylib ??? (???) <9AB4F1D1-89DC-0E8A-DC8E-A4FE4D69DB69> /usr/lib/libSystem.B.dylib 
```

我通过 atos 运行第 8 行（线程 0）的地址并得到了`start`，所以我假设崩溃发生在我自己的任何代码运行之前......

昨天一整天都在研究错误，但我不走运。

你有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:03:26.553

[我终于在 Cocoabuilder.com](http://www.cocoabuilder.com/archive/xcode/325585-xcode-4-6-breaks-arc-on-snow-leopard.html)的这个线程的帮助下解决了这个问题。

您必须`GCC_OPTIMIZATION_LEVEL = 0;`在项目设置中进行设置，否则它将无法在 10.6 上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:35:31.740

根据苹果开发者论坛上的[这篇文章：](https://devforums.apple.com/message/779846#779846)

> 这是我们在 4.6 中跟踪的一个已知问题。我们的目标是在短期 4.6.1 版本中修复它，但目前没有详细信息。我很抱歉这种回归。

# javascript - 如果按下另一个键，则放弃挂起/运行的键控功能

> ID：15356380
> 
> 赞同：1
> 
> 时间：2013-03-12T08:26:44.827
> 
> 标签：javascript, jquery, input

我有一个搜索框，可以隐藏列表中不包含输入文本的所有行。

在列表长到 10,000 行之前，这很有效。一次击键很好，但如果用户键入几个字母的单词，则每次按键都会迭代该函数。

如果按下新键，我想要做的是放弃以前执行的功能。

函数很简单，如下：

```
 $("#search").keyup(function(e) {
       goSearch();
    });

function goSearch()
{
var searchString = $("#search").val().toLowerCase();
$(".lplist").each(function(index, element) {
    var row = "#row-" + element.id.substr(5);
        if ($(element).text().toLowerCase().indexOf(searchString,0) != -1)
    $(row).show();
    else
    $(row).hide();
});
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:19:49.120

您可以使用全局变量来保存搜索字符串并在搜索字符串更改时停止执行。

**重要提示**：您必须在每次迭代中设置超时，以便暂停函数执行并更新全局变量，因为 JavaScript 是单线程的。

您的代码如下所示：

```
var searchString;

$("#search").keyup(function(e) {
    // Update search string
    searchString = $("#search").val().toLowerCase();

    // Get items to be searched
    var items = $(".lplist");

    // Start searching!
    goSearch(items, searchString, 0);
});

function goSearch(items, filter, iterator)
{
    // Exit if search changed
    if (searchString != filter) {
        return;
    }

    // Exit if there are no items left
    if (iterator >= items.length) {
        return;
    }

    // Main logic goes here
    var element = items[iterator];
    var row = "#row-" + element.id.substr(5);
    if ($(element).text().toLowerCase().indexOf(filter, 0) != -1)
        $(row).show();
    else
        $(row).hide();

    // Schedule next iteration in 5 ms (tune time for better performance)
    setTimeout(function() {
        goSearch(items, filter, iterator + 1);
    }, 5);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:48:20.023

你不能直接。Javascript 不是多线程的，因此您的函数将运行并阻止任何按键，直到它完成。

从用户体验的角度来看，可以容忍的方式是不要在关键事件上立即触发函数，而是等待一小段时间然后触发事件。

当用户打字时，超时函数会不断地设置和重置，因此不会调用 gosearch 函数，因此用户的打字不会被打断。

当用户暂停输入时，超时将倒计时至零并调用搜索功能，该功能将运行并阻止输入直到完成。但这没关系（只要它在一秒钟左右完成），因为用户当前可能没有尝试输入。

您还可以通过将 gosearch 函数分解为块来执行您实际要求的操作，其中每次调用该函数： * 读取到目前为止已处理的行数的计数器，然后再处理 500 行并增加计数器。* 使用 setTimeout 调用另一个 gosearch，时间值为零。这会向其他“线程”产生事件，并允许快速更改搜索项。

```
var goSearchTimeout = null;
var linesSearched = 0;

function keySearch(e){
    if(goSearchTimeout != null){
        clearTimeout(goSearchTimeout);
        linesSearched = 0;
    }
    goSearchTimeout = setTimeout(goSearch, 500);
}

$("#search").keyup(keySearch);

function highLight(index, element) {

    if(index >= linesSearched){
        var row = "#row-" + element.id.substr(5);
        if ($(element).text().toLowerCase().indexOf(searchString,0) != -1){
        $(row).show();
    else{
        $(row).hide();
    }
    if(index > linesSearched + 500){
        linesSearched = index;
        goSearchTimeout = setTimeout(goSearch);
        return;
    }
}

function goSearch(){
    goSearchTimeout = null;
    var searchString = $("#search").val().toLowerCase();
    $(".lplist").each(highLight);
} 
```

如果您要使用这样的超时回调，我强烈建议您将代码包装到 jQuery 小部件中，以便您可以使用对象上的变量来存储变量 goSearchTimeout 等，而不是让它们作为全局变量浮动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:34:02.107

引入一个`var keypressCount`由您的按键事件处理程序增加的计数器。在开始`goSearch()`将其值写入缓冲区。然后在每次运行时`$(".lplist").each()`询问电流`keypressCount`是否与缓冲的相同；如果没有，你就回来。我建议你使用 a`for()`虽然 ，因为它`break;`比`$.each()`.

更新：您必须确保有时间触发/接收新的按键事件，因此将 $.each() 的匿名函数包装在超时内。

参考：[http ://www.garrickcheung.com/javascript/what-i-learned-about-multi-threading-in-javascript/](http://www.garrickcheung.com/javascript/what-i-learned-about-multi-threading-in-javascript/)

# android - 实施蓝牙拨号网络 (DUN) 配置文件，以便移动设备可以用作无线拨号调制解调器以访问 Internet？

> ID：15356382
> 
> 赞同：3
> 
> 时间：2013-03-12T08:26:49.377
> 
> 标签：android, bluetooth, dial-up

我正在尝试编写一个应用程序，它将在 Android 上提供 DUN 服务，以便它可以用于 PC 或笔记本电脑上的 Internet 访问。此页面[蓝牙 DUN](https://www.bluetooth.org/Building/HowTechnologyWorks/ProfilesAndProtocols/DUN.htm)说“应用程序”将扮演 DUN-GW（网关）的角色。

我想，DUN-GW服务的职责是从Android（由数据终端发起）获取数据请求，下载数据并将其提供给Android进行转发。此外，它必须向 Android 设备提供的蓝牙服务添加一个条目，拨号网络（但如何？）......其他一切都将由操作系统处理。

我的查询是：

1.  如何告诉 Android 我的应用程序提供了蓝牙 DUN-GW 服务/配置文件？
2.  应用程序如何收到数据终端 (PC) 正在尝试通过 DUN-GW 服务连接到互联网的通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-01-25T13:55:33.667

这已在较新的手机中得到解决。

# android - 如何在 Mono for android 中设置 ListView 的高度？

> ID：15356385
> 
> 赞同：-1
> 
> 时间：2013-03-12T08:26:56.647
> 
> 标签：android, android-listview, height, xamarin.android

像这里的一些或许多一样，我想知道如何以编程方式设置 ListView 的高度，但似乎没有人对单声道有这个问题。我已经看到了一些适用于普通 Android、Java 的解决方案，但到目前为止还没有看到适用于 C# 的解决方案。其中一些是[>this<](https://stackoverflow.com/questions/13711018/set-listview-row-height-in-code-solved)或[>this<](https://stackoverflow.com/questions/11465833/set-height-of-listview-at-run-time-in-android)之一。在 Android 的 Mono 中，没有什么像 ListView 的 getLayoutParams() 或听起来像的东西。那么如何以编程方式设置它的高度属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:35:46.793

尝试这个

```
ListView listAccounts = FindViewById<ListView>(Resource.Id.listAccounts);
listAccounts.LayoutParameters.Height = 200; 
```

# c++ - 访问 C++ 地图

> ID：15356390
> 
> 赞同：0
> 
> 时间：2013-03-12T08:27:11.770
> 
> 标签：c++, map

我试图为作业创建一个地图，我在标题中声明了它，我试图访问它，但我不断收到错误。我不确定代码有什么问题。我在加载函数中实现了代码，但如果你能帮忙，我似乎无法让它在 get 函数中工作谢谢

这是头文件

```
class Movies {
    // data is private by default
    Movie *movies;
    int movieCnt;
    map<string,**string> Mymap;

public:
    Movies(string);
    int getMovieCount() const;
    const Movie * getMovie(string) const;
    ~Movies();

 private:
    void loadMovies(string);
    int getMovieHash(string) const;
}; 
```

这是代码

```
const Movie * Movies::getMovie(string mc) const {
    if(mc.length()==0)
        return NULL; // not found
    else
        return &(Mymap.find(mc));
}

Movies::~Movies() {delete[] movies; movies = NULL;}

void Movies::loadMovies(string fn) {
    ifstream iS(fn);  // technically should be c_str
    string s;
    getline(iS, s); // skip heading
    getline(iS, s);
    movieCnt=0;
    while(!iS.eof()) {
        Movie* m = new Movie(s);
        Mymap[(m->getTitle())] = *m;
        movieCnt++;
        getline(iS, s);
    }
    iS.close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:29:47.260

您将指针星号放在错误的位置。它应该是这样的：

```
 map<string,string**> Mymap; 
```

甚至更像 C++

```
 map<std::string, std::vector<std::vector<std::string>>> Mymap; 
```

您的`getMovie(string f)`功能可以通过以下方式改进：

```
const Movie Movies::getMovie(string mc) const 
{
   if(mc.length() > 0)
   {
      auto it = Mymap.find(mc);
      if (it != Mymap.end())
         return *it; //by value
   }
   else
       throw std::runtime_error;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:31:11.503

你的地图的价值应该是一个`Movie`对象。

```
map<string, Movie> Mymap; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:31:12.127

请更具体地说明您的错误。怎么了？同时看看这个：

```
const Movie * Movies::getMovie(string mc) const {
if(mc.length()==0)
    return NULL; // not found
else
    return &(Mymap.find(mc));
} 
```

在`return &(Mymap.find(mc));`您返回指向临时对象的指针时，这不太可能起作用。尝试返回对象本身，

```
const Movie Movies::getMovie(string mc) const {
if(mc.length()==0)
    return NULL; // not found
else
     std::map<string, string**>::const_iterator it = Mymap.find(mc);
     Movie m = it*;
     return m;
} 
```

或条目的索引并使用索引从地图中获取它。

# vim - Vim：不同列的不同制表位

> ID：15356391
> 
> 赞同：2
> 
> 时间：2013-03-12T08:27:17.647
> 
> 标签：vim, tabular

我有一些包含数据（如 cvs）并使用制表符格式化的文本文件，但列的大小并不完全相同。

vim 中的默认格式为：

```
int1    longvalue1       string1
int2    anotherlongvalue2       string2 
```

vim 可以对不同的列使用不同的制表位吗？显示将是

```
int1  longvalue1         string1
int2  anotherlongvalue2  string2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T09:35:17.763

此功能（由编辑器自动完成）通常称为[*Elastic tabstop*](http://en.wikipedia.org/wiki/Elastic_tabstop)。此类补丁已被提出包含在 Vim 中（例如，请参见[此处](http://groups.google.com/group/vim_dev/browse_thread/thread/6b1db9723c62d157/309196dca2836eb5)），但它们还远未包含在 Vim 中（并且几乎没有进展）。

作为解决方法，您可以`:set ts`设置一个较大的值（尽管会导致巨大的差距），或者使用像[Align 这样的插件 - 帮助人们对齐文本、eqns、声明、表格等](http://www.vim.org/script.php?script_id=294)或[Tabular - 用于文本过滤和对齐](http://www.vim.org/scripts/script.php?script_id=3464)转换的 Vim 脚本将制表符转换为适当数量的空白（可能是暂时的；重新转换为`:write`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T10:21:35.820

谢谢 Ingo，插件 Align 是我需要的。我想替换`<tab>`符号并且插件不替换这些边界（典型的边界是`=`并且不应该被替换）。

因此，我创建了一个函数来替换它们：

```
" :DoAlign command to format the text as an array by replacing the <tabs>.
" Requires the Align-plugin
fun! DoAlignFunction()
 %s#\t#==motiv==#g
 %Align
 %s#==motiv==##g
endfunction

command! DoAlign call DoAlignFunction() 
```

所以我可以（不选择任何文本）用`:DoAlign`

# php - PHPExcel - 插入形状或复选框

> ID：15356393
> 
> 赞同：3
> 
> 时间：2013-03-12T08:27:22.097
> 
> 标签：php, phpexcel, xlsx

如何使用 PHPExcel 在单元格中插入形状或复选框之类的东西？

我想创建这样的东西：

![在此处输入图像描述](../Images/9e55d418a59113f79c59e198f5c29d4e.png)

问题也是我必须动态检查或填写复选框。

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T08:48:37.023

PHPExcel 不支持复选框等表单元素，因此无法执行此操作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-31T09:27:40.320

实际上有一种方法可以做到这一点，使用包含复选框字符的字体。

```
$objRichText = new PHPExcel_RichText(); 

// checked checkbox
$checkbox = $objRichText->createTextRun('R');
$checkbox->getFont()->setName('Wingdings 2');

// empty checkbox
$checkbox = $objRichText->createTextRun('0');
$checkbox->getFont()->setName('Wingdings 2');

$objPHPExcel->getActiveSheet()->setCellValue($cellPosition, $checkbox); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-12T07:40:20.850

我找到了一种使用 unicode 字符（不可点击）呈现静态复选框的方法。这些字符适用于大多数操作系统，与 windows 字体的wingdings 不同。

```
$objRichText = new PHPExcel_RichText();

$checkbox = $objRichText->createTextRun('☑'); //checked
$checkbox->getFont()->setSize(18);

$checkbox = $objRichText->createTextRun('☐');// empty
$checkbox->getFont()->setSize(18);

// add some extra spacing to the cell to make it fit better
$necessarySpacing = str_repeat(' ', floor(count($value) * 2));
$objRichText->createTextRun($necessarySpacing);

$doc->getActiveSheet()->setCellValue('A1', $objRichText); 
```

# javascript - 用于填充字符串的正则表达式

> ID：15356394
> 
> 赞同：1
> 
> 时间：2013-03-12T08:27:22.223
> 
> 标签：javascript, regex, extendscript

我有以下输入：

```
123456_r.xyz
12345_32423_131.xyz
1235.xyz
237213_21_mmm.xyz 
```

现在我需要将第一个连接的数字填充为 8 个以 0 开头的数字：

```
00123456_r.xyz
00012345_32423_131.xyz
00001235.xyz
00237213_21_mmm.xyz 
```

我的尝试是拆分一个点，然后在下划线拆分（如果存在）并获取第一个数字并填充它们。

但我认为只有一个函数的正则表达式替换函数会有一种更有效的方法，对吧？这会是什么样子？

TIA 马特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T08:35:05.710

我会使用正则表达式，但仅用于拆分：

```
 var input = "12345_32423_131.xyz";
 var output = "00000000".slice(input.split(/_|\./)[0].length)+input; 
```

结果 ：`"00012345_32423_131.xyz"`

**编辑 ：**

我在评论中给出的快速、不拆分但不使用正则表达式的解决方案：

```
"00000000".slice(Math.min(input.indexOf('_'), input.indexOf('.'))+1)+input 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T08:41:01.633

我根本不会拆分，只需替换：

```
"123456_r.xyz\n12345_32423_131.xyz\n1235.xyz\n237213_21_mmm.xyz".replace(/^[0-9]+/mg, function(a) {return '00000000'.slice(0, 8-a.length)+a}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T08:44:14.930

有一个简单的正则表达式可以找到您想要替换的字符串部分，但您需要使用[替换函数](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_function_as_a_parameter)来执行您想要的操作。

```
// The array with your strings
var strings = [
    '123456_r.xyz',
    '12345_32423_131.xyz',
    '1235.xyz',
    '237213_21_mmm.xyz'
];

// A function that takes a string and a desired length
function addLeadingZeros(string, desiredLength){
    // ...and, while the length of the string is less than desired..
    while(string.length < desiredLength){
        // ...replaces is it with '0' plus itself
        string = '0' + string;
    }

    // And returns that string
    return string;
}

// So for each items in 'strings'...
for(var i = 0; i < strings.length; ++i){
    // ...replace any instance of the regex (1 or more (+) integers (\d) at the start (^))...
    strings[i] = strings[i].replace(/^\d+/, function replace(capturedIntegers){
        // ...with the function defined above, specifying 8 as our desired length.
        return addLeadingZeros(capturedIntegers, 8);
    });
};

// Output to screen!
document.write(JSON.toString(strings)); 
```

# c# - 无法使 WPF 声音可视化库正常工作

> ID：15356398
> 
> 赞同：2
> 
> 时间：2013-03-12T08:27:58.817
> 
> 标签：c#, .net, wpf

我最近开始使用 C#.NET 开发一个音频应用程序。我已经开始了我打算在整个项目中使用的 NAudio 库的一些基本实现。在查看 NAudio 在 CodePlex 上的文档时，我发现了[WPF 声音可视化库](http://wpfsvl.codeplex.com/)的链接，我被它的一个特性所吸引，特别是我知道我的应用程序需要它。所以我下载了它并将其添加到我的项目参考中。我已经复制了它在窗口的 XAML 文档中的引用方式，如下所示：

```
xmlns:svl="clr-namespace:WPFSoundVisualizationLib;assembly=WPFSoundVisualizationLib" 
```

然后尝试使用以下方法在库中添加控件：

```
<svl:WaveformTimeline x:Name="testWaveformTimeline"/> 
```

问题是设计器/XMAL 编辑器声称：命名空间“clr-namespace:WPFSoundVisualizationLib;assembly=WPFSoundVisualizationLib”中不存在“svl:WaveformTimeline”。

现在我知道它确实存在。我可以在类文件中引用 WaveformTimeline 对象，该对象显示在 Visual Studio 的对象浏览器中。

我完全不确定为什么会这样。如果有人知道任何可能的解决方案，或者我应该检查任何帮助的事情，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-05T12:25:37.663

我遇到了同样的问题，我刚刚找到了解决方案：通过右键单击 WPFSoundVisualizationLib .dll，我必须“取消阻止”被 Windows 标记为“不安全”的文件，因为该文件来自网站。很奇怪，但这显然是我不能在我的项目中使用 WaveformTimeLine 的原因。有点晚了，但也许仍然值得发布。

更多信息：[https ://msdn.microsoft.com/en-us/library/dd409252(VS.100).aspx](https://msdn.microsoft.com/en-us/library/dd409252(VS.100).aspx)

# android - 在片段中显示从 url 到 gridview 的图像

> ID：15356399
> 
> 赞同：0
> 
> 时间：2013-03-12T08:28:06.550
> 
> 标签：android, actionbarsherlock, universal-image-loader

```
extends SherlockFragment{ 
```

我正在使用夏洛克片段和滑动菜单开发应用程序。在我的第一个框架布局中，我必须使用来自 url 的图像显示网格视图。我决定使用[Universal Image Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

我可以获取 json 和所有值。但是在 ImageAdapter 类中将适配器设置为网格视图时，我得到了 NULL 指针异常。

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    final View v = inflater.inflate(R.layout.videos_layout, container,
            false);
    this.setRetainInstance(true);
    gridView = (GridView) v.findViewById(R.id.gridview);
     imageLoader = ImageLoader.getInstance();
    return v;

}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

int i = 0;
    for (HashMap<String, String> map : VideoItems) {
        imageUrls[i] = map.get(TAG_THUMNAIL);
        System.out.println(imageUrls[i]);
        i++;

    }
    defaultOptions = new DisplayImageOptions.Builder().cacheInMemory()
            .cacheOnDisc().build();

    config = new ImageLoaderConfiguration.Builder(getActivity()
            .getApplicationContext()).defaultDisplayImageOptions(
            defaultOptions).build();
     imageLoader.init(config);
    gridView.setAdapter(new ImageAdapter(getActivity()));
    gridView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
        }
    });
    this.gridView.setOnScrollListener(new PauseOnScrollListener(
            imageLoader, true, true));
}

public class ImageAdapter extends BaseAdapter {

    private Context mContext;
    public ImageAdapter(Context ctx){
        mContext=ctx;
    }
    @Override
    public int getCount() {
        return imageUrls.length;
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }
    public class ViewHolder{
        ImageView imageView;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder=new ViewHolder();
        Log.v("hi", "hhdsjf");
        if (convertView == null) {
               convertView = LayoutInflater.from(mContext).inflate(
                        R.layout.video_layout_item, parent, false);
            holder.imageView= (ImageView) convertView
                        .findViewById(R.id.image);

            convertView.setTag(holder);

            } else {
                holder = (ViewHolder) convertView.getTag();
            }
        try {
            imageLoader.displayImage(imageUrls[position], holder.imageView, defaultOptions);

            } catch (Exception e) {
                e.printStackTrace();
            }

            return convertView;
    }
} 
```

> 日志猫错误：

```
03-12 15:37:47.164: E/AndroidRuntime(9671): java.lang.NullPointerException 
```

03-12 15:37:47.164: E/AndroidRuntime(9671): 在 com.slidingmenu.example.fragments.VideosFragment.onActivityCreated(VideosFragment.java:112) 03-12 15:37:47.164: E/AndroidRuntime(9671) : 在 android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:891) 03-12 15:37:47.164: E/AndroidRuntime(9671): 在 android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager .java:1080) 03-12 15:37:47.164: E/AndroidRuntime(9671): 在 android.support.v4.app.BackStackRecord.run(BackStackRecord.java:622) 03-12 15:37:47.164: E /AndroidRuntime(9671): 在 android.support.v4.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1416) 03-12 15:37:47.164: E/AndroidRuntime(9671): 在 android.support.v4.app。 FragmentManagerImpl$1.run(FragmentManager.java:420) 03-12 15:37:47.164: E/AndroidRuntime(9671): 在 android.os。Handler.handleCallback(Handler.java:587) 03-12 15:37:47.164: E/AndroidRuntime(9671): 在 android.os.Handler.dispatchMessage(Handler.java:92) 03-12 15:37:47.164: E/AndroidRuntime(9671): 在 android.os.Looper.loop(Looper.java:130) 03-12 15:37:47.164: E/AndroidRuntime(9671): 在 android.app.ActivityThread.main(ActivityThread.java :3687) 03-12 15:37:47.164: E/AndroidRuntime(9671): at java.lang.reflect.Method.invokeNative(Native Method) 03-12 15:37:47.164: E/AndroidRuntime(9671): at java.lang.reflect.Method.invoke(Method.java:507) 03-12 15:37:47.164: E/AndroidRuntime(9671): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java :867) 03-12 15:37:47.164: E/AndroidRuntime(9671): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625) 03-12 15:37:47.164: E/AndroidRuntime (9671)：在 dalvik.system。NativeStart.main（本机方法）

> 我找不到我错过初始化某些东西的地方。，在此先感谢。，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:47:45.200

试试这个..

1.默认情况下不启用缓存。如果您希望加载的图像将缓存在内存和/或磁盘上，那么您应该以这种方式在 DisplayImageOptions 中启用缓存：

```
DisplayImageOptions defaultOptions = new DisplayImageOptions.Builder()
    .cacheInMemory()
    .cacheOnDisc()
    .build();

ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(getApplicationContext())
         .defaultDisplayImageOptions(defaultOptions)
         .build();
ImageLoader.getInstance().init(config); 
```

在您的适配器中更改它..

```
public class ImageAdapter extends BaseAdapter {
private Context mContext;

public ImageAdapter(Context ctx) {
    mContext = ctx;
}

@Override
public int getCount() {
    return imageUrls.length;
}

@Override
public Object getItem(int position) {
    return null;
}

@Override
public long getItemId(int position) {
    return position;
}
public class ViewHolder {

    ImageView imageView;

}

if (convertView == null) {
   convertView = LayoutInflater.from(mContext).inflate(
            R.layout.video_layout_item, parent, false);
holder.imageView= (ImageView) convertView
            .findViewById(R.id.imageViewid);

convertView.setTag(holder);

} else {
    holder = (ViewHolder) convertView.getTag();
}

  try {
imageLoader.displayImage(imageUrls[position], holder.imageView, defaultOptions);

} catch (Exception e) {
    e.printStackTrace();
}

return convertView; 
```

试试这个来设置适配器

```
ImageAdapter adapter = new ImageAdapter(this);
            gridView.setAdapter(adapter); 
```

# wpf - 将可调整大小的 wpf DataGrid 停靠在窗口底部

> ID：15356400
> 
> 赞同：2
> 
> 时间：2013-03-12T08:28:08.227
> 
> 标签：wpf, wpfdatagrid

在 WPF 项目中，我想将 DataGrid 停靠在窗口底部，以便在调整窗口大小时，我将能够利用更多的 DataGrid。像这样：

![在此处输入图像描述](../Images/7345caf05c5670b34d776e0374b3d610.png)

我怎么做？我所有的 DockPanel 尝试都失败了。

当前的尝试在这里：

```
<Window x:Class="Foo.SQLDialog"
   xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
   xmlns:c="clr-namespace:Foo.Controls"
   Title="test" ResizeMode="CanResize" Width="400" Height="400">
  <StackPanel Orientation="Vertical" Height="Auto" Width="Auto">
    <StackPanel Orientation="Vertical">
      <Label Content="SQL" HorizontalAlignment="Left"/>
      <TextBox Width="377" Height="100" Name="txtSQL"/>
      <Button Content="Run SQL" Click="Button_Click_1" />
    </StackPanel>
    <Label Content="Result" HorizontalAlignment="Left"/>
    <ScrollViewer Width="Auto" Height="180" DockPanel.Dock="Right,Bottom"
        ScrollViewer.CanContentScroll="True" 
        ScrollViewer.VerticalScrollBarVisibility="Auto"
        ScrollViewer.HorizontalScrollBarVisibility="Auto">
      <DataGrid x:Name="dataResult" />
    </ScrollViewer>
  </StackPanel>
</Window> 
```

但是，scrollviewer+datagrid 的高度不会适应。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T08:50:18.067

首先，在`DockPanel.Dock`没有 DockPanel 作为父级的情况下使用并没有多大作用......

在我的示例中，我将您的根更改`StackPanel`为 a `DockPanel`，以便它可以按您的意愿工作。
我还使用了**[DockPanel.LastChildFill](http://msdn.microsoft.com/en-us/library/system.windows.controls.dockpanel.lastchildfill.aspx)**属性，它确保 DockPanel 的最后一个孩子将获得所有剩余空间：

```
<DockPanel LastChildFill="True">
    <StackPanel Orientation="Vertical" DockPanel.Dock="Top">
        <Label Content="SQL" HorizontalAlignment="Left"/>
        <TextBox Width="377" Height="100" Name="txtSQL"/>
        <Button Content="Run SQL" Click="Button_Click_1" />
    </StackPanel>
    <Label Content="Result" HorizontalAlignment="Left" DockPanel.Dock="Top"/>
    <ScrollViewer DockPanel.Dock="Bottom,Right"
    ScrollViewer.CanContentScroll="True" 
    ScrollViewer.VerticalScrollBarVisibility="Auto"
    ScrollViewer.HorizontalScrollBarVisibility="Auto">
        <DataGrid x:Name="dataResult"  />
    </ScrollViewer>
</DockPanel> 
```

最后，为了让它真正伸展到所有剩余空间，我删除了`Height`你设置的属性，因为这阻止了它伸展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:32:54.883

不确定是否有用，或者我是否理解您的问题，但您是否尝试过：

```
<DataGrid DockPanel.Dock="Right, Bottom" VerticalAlignment="Bottom" HorizontalAlignment="Right" ></DataGrid> 
```

# sql - ORA-01722: 将数据插入表时出现“无效数字”错误

> ID：15356401
> 
> 赞同：0
> 
> 时间：2013-03-12T08:28:12.217
> 
> 标签：sql, constraints

给我的场景如下。创建具有以下列的员工；

```
·         EmpId
·         EmpName
·         EmpEmail
·         EmpDate 
```

在 OLTP 中，我需要一次输入一条记录，并且要在后端完成以下验证；

```
·         EmpId should have a sequence generator
·         No numeric values allowed in EmpName
·         EmpDate should be in format mm/dd/yyyy
·         Email Id should have following validations
o   Should contain ‘@’ sign and it should be only one
o   Should end with ‘.com’
o   Email id should have more than 3 characters 
```

* * *

为此，我创建了一个像这样的表和序列

```
create table emp_316599
  (EmpId number(6),
  EmpName varchar2(15)CONSTRAINT chk_EmpName 
     check(regexp_like(EmpName,'![0-9]+')),
  EmpEmail varchar2(15) CONSTRAINT chk_EmpEmail
    check((length(EmpEmail)>3) and
      substr(EmpEmail,-4)='.com' and
            instr(EmpEmail,'@',1,2)=0),
  EmpDate varchar2(15) 
  CONSTRAINT chek_EmpDate
    check(EmpDate=to_char(EmpDate,'mm-dd-yyyy')));

  Table created.       

 create sequence Emp_SEQ
 increment by 1
 start with 1
 maxvalue 1000
 cache 20
sequence created. 
```

* * *

问题来了。当我尝试使用以下命令插入时，它给了我错误。

```
insert into emp_316599 values(Emp_SEQ.NEXTVAL,'&EmpName','&EmpEmail','&EmpDate'); 
```

**ORA-01722无效号码**

请帮帮我。

工作环境如下 DB：Oracle 11g，工具：plsql developer

谢谢库马尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:32:41.750

我得到一个类似的错误，我在执行更新之前使用这个定义修复了：

```
set define off; 
```

# java - 在java（Eclipse）中接收多个JSON对象（数组）

> ID：15356403
> 
> 赞同：1
> 
> 时间：2013-03-12T08:28:18.013
> 
> 标签：java, php, android, json, eclipse

我尝试从 php 获取这个 json 编码输出

```
$response["success"] = $id;
echo json_encode($response);
echo json_encode($eventid); 
```

而 $response 只在 ["success] 处包含一个整数，而 $eventid 包含一个 id 数组(例如 ["1","3"])。所以 php 文件输出例如是这样的：

```
{"success":"3"}["1","3","7"] 
```

现在我尝试同时获得成功和 eventid。我得到了成功

```
int id = json.getInt("success"); 
```

它有效，问题是获取eventids数组。我找到了这篇文章：[stackoverflow](https://stackoverflow.com/questions/4244879/reading-a-json-array-in-android)，但它对我没有帮助，因为我没有为数组中的每个元素设置标签。所以问题是我是否必须为每个元素添加标签，或者我可以使用另一种语法？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T08:30:46.483

提供的 JSON 无效。您需要将其修改为如下所示：

```
{
    "success": "3",
    "elements": [
        "1",
        "3",
        "7"
    ]
} 
```

如果你这样做，你将能够做到这一点：

```
JSONArray array = json.getJSONArray ("elements");
for (int counter = 0; counter < array.length (); counter ++)
   Log.d ("element", array.getInt (counter)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T08:31:34.497

我会像你一样`$eventid`在里面编码`$response``$success`

```
$response["success"] = $id;
$response["eventid"] = $eventid;
echo json_encode($response); 
```

产量：

```
{"success":3,"eventid":[ 1, 3, 7]} 
```

# windows-phone-7 - windows phone 中的增强现实使用phonegap

> ID：15356404
> 
> 赞同：0
> 
> 时间：2013-03-12T08:28:23.203
> 
> 标签：windows-phone-7, cordova, plugins, augmented-reality, native-code

我想使用增强现实！但是phonegap插件不存在（我还没有找到。）！=（还有其他人有这个问题吗？可能因为可以在应用程序中的项目之间切换（使用phonegap代码到本机代码）？

我知道存在 iOS 和 Android 插件！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T00:26:24.237

查看[SLAR 工具包](http://slartoolkit.codeplex.com/)。如果 PhoneGap 由于缺少插件而无法解决问题，您始终可以在没有它的情况下设计应用程序（在 Visual Studio 中也称为标准 Windows Phone 应用程序项目）。

# java - 如何从java程序在终端运行命令？

> ID：15356405
> 
> 赞同：32
> 
> 时间：2013-03-12T08:28:32.627
> 
> 标签：java, linux, terminal

我需要从 JAVA 程序在 Fedora 16 的终端上运行命令。我尝试使用

```
Runtime.getRuntime().exec("xterm"); 
```

但这只是打开终端，我无法执行任何命令。

我也试过这个：

```
OutputStream out = null;
Process proc = new ProcessBuilder("xterm").start();
out = proc.getOutputStream();  
out.write("any command".getBytes());  
out.flush(); 
```

但我仍然只能打开终端，但无法运行命令。关于如何做的任何想法？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-12T08:31:10.397

您需要使用`bash`这样的可执行文件运行它：

```
Runtime.getRuntime().exec("/bin/bash -c your_command"); 
```

**更新：** 正如[xav](https://stackoverflow.com/questions/15356405/how-to-run-a-command-at-terminal-from-java-program/15356451?noredirect=1#comment54151315_15356451)所建议的，建议使用[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)代替：

```
String[] args = new String[] {"/bin/bash", "-c", "your_command", "with", "args"};
Process proc = new ProcessBuilder(args).start(); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-04-07T05:50:27.680

我投票支持 Karthik T 的回答。您无需打开终端即可运行命令。

例如，

```
// file: RunShellCommandFromJava.java
import java.io.BufferedReader;
import java.io.InputStreamReader;

public class RunShellCommandFromJava {

    public static void main(String[] args) {

        String command = "ping -c 3 www.google.com";

        Process proc = Runtime.getRuntime().exec(command);

        // Read the output

        BufferedReader reader =  
              new BufferedReader(new InputStreamReader(proc.getInputStream()));

        String line = "";
        while((line = reader.readLine()) != null) {
            System.out.print(line + "\n");
        }

        proc.waitFor();   

    }
} 
```

输出：

```
$ javac RunShellCommandFromJava.java
$ java RunShellCommandFromJava
PING http://google.com (123.125.81.12): 56 data bytes
64 bytes from 123.125.81.12: icmp_seq=0 ttl=59 time=108.771 ms
64 bytes from 123.125.81.12: icmp_seq=1 ttl=59 time=119.601 ms
64 bytes from 123.125.81.12: icmp_seq=2 ttl=59 time=11.004 ms

--- http://google.com ping statistics ---
3 packets transmitted, 3 packets received, 0.0% packet loss
round-trip min/avg/max/stddev = 11.004/79.792/119.601/48.841 ms 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-03-12T08:36:54.643

您实际上不需要从 xterm 会话运行命令，您可以直接运行它：

```
String[] arguments = new String[] {"/path/to/executable", "arg0", "arg1", "etc"};
Process proc = new ProcessBuilder(arguments).start(); 
```

如果进程以交互方式响应输入流，并且您想要注入值，则执行您之前所做的操作：

```
OutputStream out = proc.getOutputStream();  
out.write("command\n");  
out.flush(); 
```

不要忘记末尾的“\n”，因为大多数应用程序会使用它来识别单个命令输入的结尾。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-03-12T08:54:23.790

正如其他人所说，您可以在没有 xterm 的情况下运行您的外部程序。但是，如果您想在终端窗口中运行它，例如让用户与之交互，xterm 允许您指定程序作为参数运行。

```
xterm -e any command 
```

在 Java 代码中，这变为：

```
String[] command = { "xterm", "-e", "my", "command", "with", "parameters" };
Runtime.getRuntime().exec(command); 
```

或者，使用 ProcessBuilder：

```
String[] command = { "xterm", "-e", "my", "command", "with", "parameters" };
Process proc = new ProcessBuilder(command).start(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-09-07T02:56:59.540

我知道这个问题已经很老了，但这里有一个封装 ProcessBuilder api 的[库](https://github.com/mhashim6/Simple-Commander)。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-01-27T14:13:56.547

我不知道为什么，但由于某种原因，“/bin/bash”版本对我不起作用。相反，按照[Oracle Docs 中给出的示例，更简单的版本起作用了。](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)

```
String[] args = new String[] {"ping", "www.google.com"};
Process proc = new ProcessBuilder(args).start(); 
```

# json - 如何使用实体框架查询创建嵌套 JSON 响应

> ID：15356411
> 
> 赞同：1
> 
> 时间：2013-03-12T08:28:51.317
> 
> 标签：json, entity-framework

我想用我的 EF 查询得到一个嵌套的 JSON 回复，但不知道该怎么做。我已将我的模型声明如下：

```
 [Serializable]
    public class StockReturnMethod
    {
        public int WarehouseID { get; set; }
        public int ProductSKUID { get; set; }
        public int LotID { get; set; }
        public string LotName { get; set; }
        public int AreaID { get; set; }
        public string AreaName { get; set; }
        public int BinID { get; set; }
        public string BinName { get; set; }
        public List<AvailibleStock> Stock { get; set; }
    }

  [Serializable]
    public class AvailibleStock
    {
        public int WarehouseID { get; set; }
        public int ProductSKUID { get; set; }
        public string ProductSKUName { get; set; }
        public string WarehouseName { get; set; }
        public string Status { get; set; }
        public int QtyUnassigned { get; set; }
    } 
```

这是我到目前为止的 EF 查询。

```
 {
       return (from WH in SCMENT.Warehouses 
               join WL in SCMENT.WarehouseLots on WH.WarehouseID equals WL.WarehouseID
               join WA in SCMENT.WarehouseAreas on WL.WarehouseLotID equals WA.WarehouseLotID
               join WB in SCMENT.WarehouseBins on WA.WarehouseAreaID equals WB.WarehouseAreaID
               join SLI in SCMENT.StockLineItems on WH.WarehouseID equals SLI.WarehouseID
               join PSKU in SCMENT.ProductSKUs on SLI.ProductSKUID equals PSKU.ProductSKUID
               where SLI.SystemAreaID == 1

               select new StockReturnMethod() 
               {
                WarehouseID = WH.WarehouseID,
                LotID = WL.WarehouseLotID,
                LotName = WL.WarehouseLotName,
                AreaID = WA.WarehouseAreaID,
                AreaName = WA.WarehouseAreaName,
                BinID = WB.WarehouseBinID,
                BinName = WB.WarehouseBinName,
                ProductSKUID = PSKU.ProductSKUID,
                Stock = (Will I create a sub query here?)

               }

    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:46:38.703

```
public List<AvailibleStock> Stock { get; set; } 
```

将其更改为：

```
public IList<AvailibleStock> Stock { get; set; } 
```

编辑：这是我的一个项目的工作示例，您可以将其用作参考：

```
public class StatisticsModel
{
    public int Id { get; set; }
    public int ClientId { get; set; }
    public int Opened { get; set; }
    public IEnumerable<LocationsModel> Locations { get; set; }
}

public class LocationModel
{
    public int Id { get; set; }
    public string Name { get; set; }
    public int OpenCount { get; set; }
}

return dbSet.Select(x => new StatisticsModel
{
    Id = x.Id,
    ClientId = x.ClientId,
    Opened = x.OpenCount,
    Locations = x.Locations.Select(z => new LocationsModel{
        Id = z.Id,
        Name = z.Store.Name,
        OpenCount = z.OpenCount
    })
}) 
```

# php - 安装 Wampserver2 后，在打开 phpmyadmin 时出现错误 Firefox 无法在 localhost 建立与服务器的连接

> ID：15356416
> 
> 赞同：1
> 
> 时间：2013-03-12T08:29:11.893
> 
> 标签：php, phpmyadmin, localhost, wampserver

安装 Wampserver2 后，

1.  打开 phpmyadmin 时出现错误“无法连接 **Firefox 无法在 localhost 建立与服务器的连接。** 该站点可能暂时不可用或太忙。请稍后再试。如果您无法加载任何页面，请检查您计算机的网络连接。如果您的计算机或网络受到防火墙或代理的保护，请确保允许 Firefox 访问 Web。
2.  Apache > Service > Test port 80 ：**您的端口 80 并未实际使用。** 还尝试了 Apache > Service > install service ：但是 Apache > Service > Start/resume service 仍然被禁用。

    C:\WINDOWS\system32\drivers\etc\host 文件有语句 127.0.0.1 localhost

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T13:46:17.600

请确保您拥有这两个 Microsoft C++ Redistributable 运行时库的最新版本。

wampmanager 使用 2008 Redist Apache 使用 2010 Redist

适用于 WAMP 32 位 Microsoft Visual C++ 2008 SP1 可再发行包 (x86) Microsoft Visual C++ 2010 SP1 可再发行包 (x86)

适用于 WAMP 64 位 Microsoft Visual C++ 2008 可再发行包 (x64) Microsoft Visual C++ 2010 SP1 可再发行包 (x64)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:33:23.010

确保没有其他程序与 Wamp 冲突，例如 IIS、Microsoft Web Deploy、SQL、Skype、Zonealarm、防火墙/防病毒、NOD32、Eset、任何与 Web 相关的程序，包括远程桌面、Teamviewer 或 Apache、MySQL、Wamp 文件夹之外的 PHP（即。在 Program Files 或 System32 文件夹中）...

IIS 和 Apache/Wamp 都是 Web 服务器，可能会以某种方式发生冲突，因此您必须禁用 IIS 才能使 Wamp 工作

在 Vista/W7 中禁用 IIS：

控制面板，卸载程序，打开或关闭 Widows 功能，取消选中 Internet 信息服务

在 XP 中禁用 IIS：

控制面板，添加/删除程序，添加/删除 Windows 组件，取消选中 Internet 信息服务 (IIS)

重新启动计算机，然后重新启动 Wamp

此外，在文件夹 C:\WINDOWS\System32\drivers\etc 中，打开文件主机并删除此文件中的任何内容，并且下面只有这一行，没有其他内容

127.0.0.1 本地主机

如果使用 Skype，请打开 Skype > 工具 > 选项 > 高级 > 连接，然后取消选中“使用端口 80...”重新启动 Wamp，然后重新启动 Skype

你也可以试试

> 我进入 Skype 并取消选中“使用端口 80 和 443 作为传入连接的替代方案”。然后我回到 httpd.conf 文件，将“Listen 8080”改回原来的“Listen 80”。

[阅读更多](https://stackoverflow.com/questions/7974388/cant-access-localhost-or-phpmyadmin-with-wamp)

# php - 为 RSS Feed 制作 slug

> ID：15356422
> 
> 赞同：0
> 
> 时间：2013-03-12T08:29:24.403
> 
> 标签：php, rss, slug

我想创建指向 RSS 帖子的链接，但我需要一个“slug”。我想用“-”替换空格，这样我就可以将链接重定向到我的 wordpress 网站上的帖子。我的RSS：

```
<?php

include("connect.inc.php");

$items = mysql_query("select * from dailynewsitems where actief = '1' and pubDate <=      NOW() order by id DESC limit 15");

echo "<?xml version=\"1.0\" encoding=\"iso-8859-1\" ?>
<rss version=\"2.0\"  xmlns:atom=\"http://www.w3.org/2005/Atom\">
<channel>
<title>Nieuwsfeed WebGiants Financieel</title>
<description>Nieuwsfeed WebGiants</description>
<link>http://modules.publiceer.net/nieuwsfeed_webgiants2012.php</link>
<language>nl</language>";

while ($item = mysql_fetch_object($items)) {
    $id = $item->id;
    $title = $item->title;
    $description = $item->description;
    $longdesc = $item->longdesc;

    list($d, $m, $y) = explode("-", $item->pubDate); 

    echo '<item>'; 
    echo '<guid>' . $item->id . '</guid>';
    echo '<title>' . htmlspecialchars($title) . '</title>';
    echo 'DATUM<pubDate>' . date("D", mktime(0, 0, 0, $m, $d, $y)) . ', ' . $d . ' ' . date("M", strtotime($item->pubDate)) . ' ' . $y . ' 00:00:00 CST</pubDate>';
    echo '<description>' . htmlspecialchars($description) . '</description>';
    echo '<longdesc>' . htmlspecialchars($longdesc) . '</longdesc>';
    echo "<link>http://www.webgiants.nl/geen-categorie/".$item->title."</link>";
    echo '</item>'; 
} 

echo "</channel>";
echo "</rss>"; 
```

我做了一些研究，知道你可以这样做： $title = preg_replace("/[\s-]+/", "-", $title);

所以我想用'-'而不是空格创建一个标题。

但我不知道如何在我的代码中实现这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:33:13.747

只需使用 str_replace 函数。[http://php.net/manual/en/function.str-replace.php](http://php.net/manual/en/function.str-replace.php)

```
echo "<link>http://www.webgiants.nl/geen-categorie/".str_replace(" ", "-", $item->title)."</link>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:33:27.677

我将首先将 mysql 函数更改为 mysqli 函数，因为不推荐使用 mysql ！

# c++ - 是否自动包含 Lex

> ID：15356423
> 
> 赞同：0
> 
> 时间：2013-03-12T08:29:33.313
> 
> 标签：c++, lex

我想知道[Lex](http://en.wikipedia.org/wiki/Lex_%28software%29)是否包含在 C++ 中，或者您必须从某个地方下载并导入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:31:43.000

不，[`lex`](http://en.wikipedia.org/wiki/Lex_%28software%29)不是“包含在 C++ 中”。它不是 C++ 标准的一部分，我不知道有任何 C++ 编译器会开箱即用地包含它（作为非标准扩展）。

您必须单独下载。

一个流行的实现是[`flex`](http://westes.github.io/flex/manual/).

# vb6 - 更改单元格背景颜色而不更改焦点

> ID：15356430
> 
> 赞同：1
> 
> 时间：2013-03-12T08:30:01.753
> 
> 标签：vb6, cell, msflexgrid

在一个表单上，我有 4 个 MSFlexGrids。

顶部网格包含不时更新的动态数据。用户可以在其他 3 个网格的单元格中输入数据。

用于填充顶部网格的数据通过 Winsock 控件接收、处理，然后使用以下命令将结果写入适当的单元格`.TextMatrix(intRow, intCol) = strData`

这工作正常。数据更新完美，用户可以毫无问题地将他的数据输入到其他 3 个网格中。

当我想更改顶部网格中某些单元格的背景颜色时，就会出现问题。在极少数情况下接收到的数据非常重要，相应单元格的背景颜色应该改变颜色。

我使用以下代码更改单元格的颜色：

```
With grd
  For lngRow = 1 To .Rows - 1
    'default background color
    lngBack = vbWhite
    'check for important values
    If Val(.TextMatrix(lngRow, 1)) >= lngMax Then
      'important color
      lngBack = &H3040FF
    End If
    'select whole row
    .Row = lngRow
    .Col = 0
    .RowSel = lngRow
    .ColSel = .Cols - 1
    'set the background color of the selected row
    .CellBackColor = lngBack
  Next lngRow
End With 'grd 
```

这样做的问题是，当用户在其他 3 个网格中输入数据时，顶部网格中一行的背景颜色发生了变化，然后焦点移动到顶部网格，用户必须重新输入他的数据在他工作的网格中。

是否可以在不将焦点移动到该网格的情况下更改 MSFlexGrid 中单元格或整行的背景颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T06:36:27.043

到目前为止，我找不到问题本身的解决方案。

我创建了一个解决方法：

我为每个网格创建了一个包含一个值的枚举：

```
Public Enum ActiveGrid
  enuSystem = 0
  enuTel = 1
  enuRLN = 2
  enuRood = 3
  enuData = 4
  enuCircuit = 5
End Enum 
```

每当网格获得焦点时，我将相应的枚举值保存在表单级别变量中。在第一个网格中为所需的单元格着色后，我将焦点返回到最后一个网格。

用户不是在网格本身中进行编辑，而是在位于单元格上方的文本框中进行编辑，因此网格失去焦点并没有真正的问题。

当您仔细观察时，尽管您会看到焦点离开并迅速返回。

现在我将接受这项工作，以及它的小故障。

也许将来我可以提出更好的解决方案，或者其他人有更好的建议？

# pandas - 如何从字符串列生成分类的熊猫 DataFrame 列？

> ID：15356433
> 
> 赞同：8
> 
> 时间：2013-03-12T08:30:09.037
> 
> 标签：pandas, categorical-data

我可以将熊猫字符串列转换为分类，但是当我尝试将其作为新的 DataFrame 列插入时，它似乎立即转换回 str 系列：

```
train['LocationNFactor'] = pd.Categorical.from_array(train['LocationNormalized'])

>>> type(pd.Categorical.from_array(train['LocationNormalized']))
<class 'pandas.core.categorical.Categorical'>
# however it got converted back to...
>>> type(train['LocationNFactor'][2])
<type 'str'>
>>> train['LocationNFactor'][2]
'Hampshire' 
```

猜测这是因为 Categorical 没有映射到任何 numpy dtype；那么我是否必须将其转换为某种 int 类型，从而失去因子标签<->级别关联？存储级别<->标签关联并保留转换回来的能力的最优雅的解决方法是什么？[（只需像这里](https://stackoverflow.com/questions/13978682/change-categorical-variable-levels-to-what-i-provide-combine-levels-two-categori)一样存储为 dict ，并在需要时手动转换？）我认为[Categorical 仍然不是 DataFrame 的一流数据类型](https://stackoverflow.com/questions/15124439/closest-equivalent-of-a-factor-variable-in-python-pandas)，与 R 不同。

（使用 pandas 0.10.1、numpy 1.6.2、python 2.7.3 - 一切的最新 macports 版本）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-04T06:19:42.563

**我发现的 pandas pre-0.15**的唯一解决方法如下：

*   列必须转换为分类器的分类，但 numpy 会立即将级别强制转换回 int，从而丢失因子信息
*   所以将因子存储在数据框外的全局变量中

.

```
train_LocationNFactor = pd.Categorical.from_array(train['LocationNormalized']) # default order: alphabetical

train['LocationNFactor'] = train_LocationNFactor.labels # insert in dataframe 
```

[更新：pandas [0.15+ 增加了对分类的支持](http://pandas.pydata.org/pandas-docs/stable/categorical.html)]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:49:15.903

标签<->级别存储在索引对象中。

*   将整数数组转换为字符串数组：index[integer_array]
*   将字符串数组转换为整数数组： index.get_indexer(string_array)

这是一些例子：

```
In [56]:

c = pd.Categorical.from_array(['a', 'b', 'c', 'd', 'e'])

idx = c.levels

In [57]:

idx[[1,2,1,2,3]]

Out[57]:

Index([b, c, b, c, d], dtype=object)

In [58]:

idx.get_indexer(["a","c","d","e","a"])

Out[58]:

array([0, 2, 3, 4, 0]) 
```

# c++ - 有序数组。调整大小不允许有序元素

> ID：15356436
> 
> 赞同：2
> 
> 时间：2013-03-12T08:30:20.007
> 
> 标签：c++, arraylist, resize, push

我正在制作一个有序数组。元素在哪里。示例 1、2、3、4、5、6、77、89、100、201。我要求用户输入数组的大小。这很好，推送功能会将元素排序。但是当 arrayList 调整大小时，元素不再以有序的方式分配。

这是我的代码：

```
//-------------------------------------------------------
//  Name:           Array::Resize
//  Description:    Resize the array to a new size.
//  Arguments:      p_size.  The new size of the Array.
//-------------------------------------------------------
    void Resize(int p_size)//resizes the array to the size of p_size
    {
        cout << "Did i get this far ";
        if(p_size < 0)//checks if new size is less than 0
        {
            cout << "ERROR! Size of an array can not be less than 0!" << endl;
        }
        else//else its ok to continue
        {
            Datatype* newArray = new Datatype[p_size];//creates a pointer newArray that points at a new array
            if(newArray == 0)
            {
                return;
            }
            cout << "Did i get this far ";
            int min;

            if(p_size < size)//checks the if the new array is smaller than the old one
                min = p_size;
            else//else its going to be bigger
                min = size;
            cout << "Did i get this far ";
            int index;
            int temp = num_elements;//puts num_elements into a temporary variable called temp
            num_elements = 0;//num_elements is set to 0
            for(index = 0; index < min; index++)
            {
                newArray[index] = m_array[index];//places everything from the old array into the new array that will fit.
                if(num_elements < temp)//if the num_elements is less than temp(the original num_elements)
                {
                    num_elements++;//increment num_elements. This will keep incrementing to create the new num_elements based the number of elements cut off in the resize
                }
            }
            size = p_size;//sets the old size to be equal to the new size
            cout << "Did i get this far ";
            if(m_array != 0)
            cout << "\nI am just about to delete ";
            //delete[] m_array;//deletes the old array
            m_array = newArray;//makes m_array point at the new array
            newArray = 0;//makes newArray a null pointer
        }
    }

//---------------------------------------------------------------------------------------
// Name:             Push
// Description:      
//---------------------------------------------------------------------------------------
void push(Datatype p_item)
{
    if(num_elements == size)//checks if the array is full and needs to be resized
    {
        Resize(size + g_size);//calls the resize function
    }

    int pos = num_elements;
    for(int x=0;x<num_elements;x++)
    {
        if(p_item < m_array[x])
        {
        pos=x;
        }
    }

    //loops through the array from high to low moving all values to the right
    //to make space for the passed in value until it gets to the right place
    for(int index = num_elements; index >= pos; index--)
    {
        m_array[index] = m_array[index-1];//moves the values to the right
    }
        m_array[pos] = p_item;//the passed in value is positioned into its ordered position
        num_elements++;

    cout<< "Num Elements " << num_elements;
    cout<< "Size " <<size;
}

//--------------------------------------------------------------------------------------------
//  Name:           template <class Datatype>   
//  Description:        

    //-------------------------------- 
```

* * *

```
template <class Datatype>
//--------------------------------------------------------------------------------------------
//  Class: OrderedArray.            
//--------------------------------------------------------------------------------------------
class OrderedArray
{
//--------------------------------------------------------------------------------------------
//  Member Variables.           
//--------------------------------------------------------------------------------------------
private:
Datatype* m_array;
int size;
int g_size;
int num_elements;   //Counter for the number of elements in the Array.
//--------------------------------------------------------------------------------------------
//  Name:           Constructor.
//  Description:    Constructs the Array.
//--------------------------------------------------------------------------------------------
OrderedArray(int p_size)
{
    //Sets the Array size.
    m_array = new Datatype[p_size]; 
    size = p_size;
    grow_size = 1;  
    //How many elements are in the Array.
    num_elements = 0;               
} 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T07:56:15.937

我建议使用 m 的最后一个元素的副本作为新元素，而不是默认构造的实例。所以最后的元素将大于或等于数组的所有前面的元素。

# ada - Ada 中的未定义包

> ID：15356437
> 
> 赞同：0
> 
> 时间：2013-03-12T08:30:21.517
> 
> 标签：ada

当我尝试导入包时 GNAT 一直告诉我有一个未定义的错误时，我真的很困惑。

这是源代码中出现错误的地方：

```
with Ada.Strings.Unbounded; use Ada.Strings.Unbounded;

procedure WordCount is

package ASU renames Ada.Strings.Unbounded;
use ASU;
package StringStack is new ProtectedStack(100, ASU.Unbounded_String); 
```

它一直告诉我 ProtectedStack 是未定义的。由于提供了 ProtectedStack，所以我不得不假设这个错误是由我引起的......我刚开始与 Ada 合作。谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T08:56:35.610

您可能需要添加`with ProtectedStack;`.

# asp.net - 经典 Asp .asp 扩展页面的处理程序映射在 IIS 集成管道模式下给出错误

> ID：15356441
> 
> 赞同：5
> 
> 时间：2013-03-12T08:30:42.013
> 
> 标签：asp.net, asp-classic, iis-7.5

我正在尝试在 IIS 7**集成**管道模式下运行经典的 Asp 页面。因此，我在 Web.Config 中添加了以下 Handler 映射。

```
add name="ASPClassic" 
path="*.asp" 
verb="GET,HEAD,POST" 
modules="IsapiModule" 
scriptProcessor="C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll" 
requireAccess="Script"
resourceType="Unspecified" 
```

但是，当请求 .asp 页面时，会引发**Server Application Unavailable**错误，并且详细的应用程序事件日志显示：

在以集成 .NET 模式运行的应用程序池中发出了映射到 aspnet_isapi.dll 的请求。Aspnet_isapi.dll 只能在经典 .NET 模式下运行时使用。请在处理程序映射上指定 preCondition="ISAPImode" 以使其仅在以经典 .NET 模式运行的应用程序池中运行，或将应用程序移动到以经典 .NET 模式运行的另一个应用程序池以使用此处理程序映射。

我哪里做错了？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T01:08:24.583

Classic ASP 的脚本处理器不是：

> `C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet_isapi.dll`

但：

> `%windir%\system32\inetsrv\asp.dll`

`applicationHost.config`这是安装经典 ASP 时IIS7 文件中正确的处理程序映射条目：

```
<add name="ASPClassic" 
     path="*.asp" 
     verb="GET,HEAD,POST" 
     modules="IsapiModule" 
     scriptProcessor="%windir%\system32\inetsrv\asp.dll" 
     resourceType="File" /> 
```

听起来您还没有在服务器或工作站上安装 Classic ASP。

在 Windows 7 上，您需要转到*控制面板 -> 程序和功能，*然后单击“打开或关闭 Windows 功能”。你会得到一个看起来像这样的窗口，确保勾选“ASP”：

![在此处输入图像描述](../Images/15608b0a028cac522c401baf242a96ec.png)

在 Windows 2008R2 上，转到*控制面板 -> 管理工具 -> 服务器管理器*。单击左侧面板中的“角色”，然后向下滚动到“Web 服务器 (IIS)”。应该有一个这样的“角色服务”列表（我突出显示了安装在我截取此屏幕截图的服务器上的 ASP）：

![在此处输入图像描述](../Images/025a3bac63792408e63a42124eaabd51.png)

如果未安装 ASP，则单击“添加角色服务”并勾选*Web 服务器 -> 应用程序开发*下的 ASP 复选框，然后单击下一步完成安装。

如果一切顺利，您应该会在 IIS 管理器中看到处理程序映射：

![在此处输入图像描述](../Images/dc1d82b37e24726feebf5c4b4fd77cd0.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:55:52.563

难道是为了在 IIS 7 中运行经典的 asp 页面，您还需要安装它吗？（在 IIS 7 上默认不安装它。）

请参阅此处如何添加 asp 模块，具体取决于您在 windows7 或 windows server 2008 上：[http ://www.iis.net/configreference/system.webserver/asp](http://www.iis.net/configreference/system.webserver/asp)

*顺便说一句：您正在尝试做的确实是经典管道模式下的脚本映射。*
另见：[http ://www.iis.net/learn/application-frameworks/building-and-running-aspnet-applications/wildcard-script-mapping-and-iis-integrated-pipeline_](http://www.iis.net/learn/application-frameworks/building-and-running-aspnet-applications/wildcard-script-mapping-and-iis-integrated-pipeline_)

# ios6 - 在 iOS 6 中创建具有缩放功能的图像滑块

> ID：15356443
> 
> 赞同：0
> 
> 时间：2013-03-12T08:30:44.373
> 
> 标签：ios6, uiscrollview, uiimageview

我有一个带有缩放功能的图像滑块项目，其部署目标是 iOS 5.1，它工作正常。但是当我升级到 iOS 6 时，图像滑动正常但不能缩放。因此，当我捏缩放时，图像会离开屏幕。如何在 iOS 6 中创建图像滑块？

# c++ - 需要中断while循环

> ID：15356455
> 
> 赞同：0
> 
> 时间：2013-03-12T08:31:14.160
> 
> 标签：c++, loops, if-statement

我正在编写一个循环，如果队列不为空，则循环将运行，我只是想知道是否需要`break`在循环末尾包含 a 。基本上每个循环都应该针对队列中的每个元素运行，直到队列为空。

那么它应该是以下哪一个 - 我只是不知道是否有*正确*的事情要做。

```
while (1)
{

    /*process message from incoming queue*/
    if (!msgs_inc.empty())
    {
        /*categorise incoming message into global map of outgoing messages*/
        msgInfo current_msg = incMsgClassification(msgs_inc.front());
        msgs_inc.pop();

        clients_msg[current_msg.destID][current_msg.priorityLevel].push(current_msg);
    }
} 
```

或者

```
while (1)
{
    //Sleep(50000);
    //cout << "success" << endl;

    /*process message from incoming queue*/
    if (!msgs_inc.empty())
    {
        /*categorise incoming message into global map of outgoing messages*/
        msgInfo current_msg = incMsgClassification(msgs_inc.front());
        msgs_inc.pop();

        clients_msg[current_msg.destID][current_msg.priorityLevel].push(current_msg);
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T08:33:42.153

你想要做的是更干净地写成..

```
while (!msgs_inc.empty()) // loop as long as queue still has elements
{    
    /*process message from incoming queue*/
    /*categorise incoming message into global map of outgoing messages*/
    msgInfo current_msg = incMsgClassification(msgs_inc.front());
    msgs_inc.pop();

    clients_msg[current_msg.destID][current_msg.priorityLevel].push(current_msg);
} 
```

也许

```
while(1) {//infinite loop
    while (!msgs_inc.empty()) // loop as long as queue still has elements
    {    
        /*process message from incoming queue*/
        /*categorise incoming message into global map of outgoing messages*/
        msgInfo current_msg = incMsgClassification(msgs_inc.front());
        msgs_inc.pop();

        clients_msg[current_msg.destID][current_msg.priorityLevel].push(current_msg);
    }
} 
```

如果此函数在单独的线程上运行，这更相关，并且是在该线程上运行的唯一一段代码。

# jsf - 无法在 jsf 2.0 中使用 primefaces

> ID：15356456
> 
> 赞同：1
> 
> 时间：2013-03-12T08:31:19.160
> 
> 标签：jsf, jsf-2, primefaces

首先，我**使用 Mojarra 2.0.3-FCS**项目创建了一个 JSF2.0，并且我能够运行它。它工作正常.. 然后我下载了 primefaces-3.3.jar 并添加到 WEB-INF\lib 文件夹中.. 之后当我运行项目时，我面临以下问题。

```
Mar 12, 2013 1:46:39 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/JSF2.0] threw exception [null source] with root cause
java.lang.IllegalArgumentException: null source
    at java.util.EventObject.<init>(Unknown Source)
    at javax.faces.event.SystemEvent.<init>(SystemEvent.java:67)
    at javax.faces.event.ComponentSystemEvent.<init>(ComponentSystemEvent.java:69)
    at javax.faces.event.PostRestoreStateEvent.<init>(PostRestoreStateEvent.java:69)
    at com.sun.faces.lifecycle.RestoreViewPhase.deliverPostRestoreStateEvent(RestoreViewPhase.java:256)
    at com.sun.faces.lifecycle.RestoreViewPhase.execute(RestoreViewPhase.java:245)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.RestoreViewPhase.doPhase(RestoreViewPhase.java:107)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:308)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
  <display-name>JSF2.0</display-name>

  <servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.faces</url-pattern>
  </servlet-mapping>
  <context-param>
    <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
  </context-param>
  <context-param>
    <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
    <param-value>resources.application</param-value>
  </context-param>
  <listener>
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
  </listener>
</web-app> 
```

请检查附加的屏幕截图...

![在此处输入图像描述](../Images/b1402c898948699e4c70e2519be1bbf7.png)

请帮我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:01:01.303

将我的 Mojarra 版本从 2.0.3 更新到 2.1.6 后，问题自行解决了。谢谢您的帮助。

# android - 在 AsyncTask.doInBackground() 方法中获取联系人时出错

> ID：15356458
> 
> 赞同：0
> 
> 时间：2013-03-12T08:31:25.503
> 
> 标签：android, android-asynctask, android-contacts

我正在尝试使用`AsyncTask`类获取用户联系人。这是我为此编写的代码，但这不起作用：

```
protected Void doInBackground(Void... params) {
    ContentResolver cr = getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
            null, null, null);

    if (cur.getCount() > 0) {
        while (cur.moveToNext()) {
            String id = cur.getString(cur
                    .getColumnIndex(ContactsContract.Contacts._ID));
            String name = cur
                    .getString(cur
                            .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
            if (Integer
                    .parseInt(cur.getString(cur
                            .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                System.out.println("name : " + name + ", ID : " + id);
                // Result=Result+ "Name: "+name;
                // get the phone number
                Cursor pCur = cr.query(
                        ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                        null,
                        ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                + " = ?", new String[] { id }, null);
                while (pCur.moveToNext()) {
                    String phone = pCur
                            .getString(pCur
                                    .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                    publishProgress("Name:" + name + ",Number:" + phone
                            + "\n");
                }
                pCur.close();
            }
        }
    }
    return null;
} 
```

这是错误日志：

```
03-12 08:57:40.281: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:40.291: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:40.511: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:40.511: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:41.201: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:41.201: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:41.221: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:41.281: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:41.391: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:41.401: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:41.411: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:41.541: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:41.541: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:41.551: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:41.561: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:41.561: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:41.571: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:41.611: D/gralloc_goldfish(862): Emulator without GPU emulation detected.
03-12 08:57:41.691: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:41.781: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:42.571: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:42.581: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:42.581: W/dalvikvm(862): threadid=11: thread exiting with uncaught exception (group=0x40a70930)
03-12 08:57:42.631: E/AndroidRuntime(862): FATAL EXCEPTION: AsyncTask #1
03-12 08:57:42.631: E/AndroidRuntime(862): java.lang.RuntimeException: An error occured while executing doInBackground()
03-12 08:57:42.631: E/AndroidRuntime(862):  at android.os.AsyncTask$3.done(AsyncTask.java:299)
03-12 08:57:42.631: E/AndroidRuntime(862):  at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
03-12 08:57:42.631: E/AndroidRuntime(862):  at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
03-12 08:57:42.631: E/AndroidRuntime(862):  at java.util.concurrent.FutureTask.run(FutureTask.java:239)
03-12 08:57:42.631: E/AndroidRuntime(862):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
03-12 08:57:42.631: E/AndroidRuntime(862):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
03-12 08:57:42.631: E/AndroidRuntime(862):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
03-12 08:57:42.631: E/AndroidRuntime(862):  at java.lang.Thread.run(Thread.java:856)
03-12 08:57:42.631: E/AndroidRuntime(862): Caused by: java.lang.SecurityException: Permission Denial: reading com.android.providers.contacts.ContactsProvider2 uri content://com.android.contacts/contacts from pid=862, uid=10058 requires android.permission.READ_CONTACTS, or grantUriPermission()
03-12 08:57:42.631: E/AndroidRuntime(862):  at android.os.Parcel.readException(Parcel.java:1425)
03-12 08:57:42.631: E/AndroidRuntime(862):  at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:185)
03-12 08:57:42.631: E/AndroidRuntime(862):  at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:137)
03-12 08:57:42.631: E/AndroidRuntime(862):  at android.content.ContentProviderProxy.query(ContentProviderNative.java:366)
03-12 08:57:42.631: E/AndroidRuntime(862):  at android.content.ContentResolver.query(ContentResolver.java:372)
03-12 08:57:42.631: E/AndroidRuntime(862):  at android.content.ContentResolver.query(ContentResolver.java:315)
03-12 08:57:42.631: E/AndroidRuntime(862):  at in.wptrafficanalyzer.asynctaskdemo.MainActivity$CountDownTask.doInBackground(MainActivity.java:45)
03-12 08:57:42.631: E/AndroidRuntime(862):  at in.wptrafficanalyzer.asynctaskdemo.MainActivity$CountDownTask.doInBackground(MainActivity.java:1)
03-12 08:57:42.631: E/AndroidRuntime(862):  at android.os.AsyncTask$2.call(AsyncTask.java:287)
03-12 08:57:42.631: E/AndroidRuntime(862):  at java.util.concurrent.FutureTask.run(FutureTask.java:234)
03-12 08:57:42.631: E/AndroidRuntime(862):  ... 4 more
03-12 08:57:43.121: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:43.201: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:46.261: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:46.301: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:47.161: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:47.161: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:47.171: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:47.281: W/Trace(862): Unexpected value from nativeGetEnabledTags: 0
03-12 08:57:47.281: I/Choreographer(862): Skipped 72 frames!  The application may be doing too much work on its main thread.
03-12 08:57:56.445: I/Process(862): Sending signal. PID: 862 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:06:31.763

您需要在 Manifest 中添加以下权限：

```
<uses-permission android:name="android.permission.READ_CONTACTS" /> 
```

这清楚地显示在您的错误日志中......

除此之外，您的代码效率很低。可以通过少得多的查询来获得您想要的信息：

```
Cursor cursor = getContentResolver ().query (
        ContactsContract.Data.CONTENT_URI, 
        new String [] {
                ContactsContract.CommonDataKinds.Email.DATA,
                ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME},
                Data.MIMETYPE + " = ?",
                new String [] {ContactsContract.CommonDataKinds.Identity.CONTENT_ITEM_TYPE},
                ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME
            );

if (cursor.isAfterLast()) {
    cursor.close ();
    return null;
}

while (cursor.moveToNext ()) {
    String email = cursor.getString (cursor.getColumnIndex (ContactsContract.Contacts._ID));
    String name = cursor.getString (cursor.getColumnIndex (ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:09:51.953

魔术线是：

```
Caused by: java.lang.SecurityException: Permission Denial: reading com.android.providers.contacts.ContactsProvider2 uri content://com.android.contacts/contacts from pid=862, uid=10058 requires android.permission.READ_CONTACTS, or grantUriPermission() 
```

在您的清单中添加：

```
<uses-permission android:name="android.permission.READ_CONTACTS" /> 
```

# ios - 如何在顶部中心设置标签

> ID：15356460
> 
> 赞同：2
> 
> 时间：2013-03-12T08:31:33.990
> 
> 标签：ios, objective-c

我想在视图的顶部中心设置一个标签，我已经尝试过了

```
 UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(self.myView.center.x, 25, 92, 46)]; 
```

但它不像我想要的那样在中心，这是它的样子：![http://i49.tinypic.com/e17mty.png](../Images/c48cf37e1e4c6c36c0d1f53acf932deb.png)

我想要标签的中间，在 x 中心，而不是标签的开头在中心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:36:42.663

最简单的方法是使标签的框架宽度等于视图的框架宽度，并将标签的对齐方式设置为中心。

希望这可以帮助 ！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:39:53.053

像这样试试

```
UILabel *lbl=[[UILabel alloc]initWithFrame:CGRectMake(0, 0, 320, 30)];
    lbl.textAlignment=UITextAlignmentCenter; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:35:43.727

尝试将正确的 x 位置设置为`view.center.x - (labelwidth/2)`. 还将 设置`textAlignment`为`center`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T08:37:41.010

像这样使用`CGPointMake`标签的设置中心。

```
lblAppTitle.center= CGPointMake(self.view.bounds.size.width / 2, 25);
[lblAppTitle setTextAlignment:NSTextAlignmentCenter]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T08:42:26.770

设置它的中心而不是设置矩形

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 25, 92, 46)];
label.center = self.myView.center;
//Also if your frame is bigger than text then you can set this also
label.textAlignment = UITextAlignmentCenter; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T08:43:05.200

试试这个

```
int x=(self.myView.frame.size.width-92)/2;
UILabel *lbl=[[UILabel alloc]initWithFrame:CGRectMake(x, 25, 92, 46)];
lbl.textAlignment=UITextAlignmentCenter; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T08:46:43.520

试试这个：

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 92, 46)];
label.center = CGPointMake(label.bounds.size.width / 2, 25); 
```

或这个：

```
 UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(self.myView.center.x - 46, 25, 92, 46)]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-12T08:48:53.123

它完全按照您的程序进行。不幸的是，在 UI 编程中总是涉及到一些基本的数学。

一种可能的解决方案：使用任何位置但大小合适的框架对其进行初始化。然后相应地设置标签视图的中心属性。

```
[label setCenter:CGPointMake(self.myView.center.x, 25)]; 
```

或者只是以某种方式设置框架，它占用了 myView 从左到右的所有空间，并将文本对齐设置为 NSTextAlignmentCenter。

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(0, 25, self.myView.frame.size.width, 46)];
label.textAlignment = NSTextAlignmentCenter; 
```

或者相应地计算左上角并在初始化时设置框架。使用中心位置并减去一半的宽度。或者使用 myView 的完整 with，减去 with 然后除以 2。

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(self.myView.center.x-92/2, 25, 92, 46)]; 
```

或者

```
UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake((self.myView.frame.width-92)/2, 25, 92, 46)]; 
```

# php - 使用 mongodb 的购物网站

> ID：15356467
> 
> 赞同：0
> 
> 时间：2013-03-12T08:31:43.113
> 
> 标签：php, mysql, mongodb

我现在正在编写一个购物网站，但是我脑子里有些事情我无法解决，

产品至少有5张图片，我需要将它们放在文件夹中，在mysql中，带有产品的主键，文件夹结构是这样的，

```
for example the product id is, 756234,

so the path to the picture would be,

image.example.com/75/62/34/product.jpg 
```

问题是，现在我正在使用 mongodb，而 Mongodb 的 objectid 非常不同，而且它们每次都在变化，我怎样才能制作这样的文件夹结构？任何解决方案？谢谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:40:36.627

你真的不需要文件夹结构，你可以在 image.example.com 上使用 PHP 路由器。例如使用代码点火器。

制作一个带有函数索引的控制器，将 75, 62, 34, product.jpg 放入函数的参数中，分别为 $p1, $p2 , $p3 , $name

在根目录上上传文件为：

```
756234product.jpg 
```

像这样生成图像 URL：

```
'http://image.example.com' . '/'. $p1 . $p2 . $p3 . $name; 
```

像这样访问它：

```
http://image.example.com/75/62/34/product.jpg 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:42:23.273

mongodb ids 比您的 id 稍长（如 507f1f77bcf86cd799439011），但对于每个集合来说都是独一无二的。您可以将其用作文件夹名称而不会出现任何问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T08:51:19.580

您可以做的是维护另一个属性并使其成为唯一索引，并在另一个集合中维护 autoincement 值，以便可以使用它来插入新文档。这样，您仍将坚持使用旧的自动增量键，而无需担心您的 URL 结构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T10:27:30.567

Mongo 中没有任何东西可以阻止您分配自己的 id。Mongo 将尊重您传递给它的任何独特价值。另一种方法是折叠长id。例如，将它们取模 1000000，这将为您提供图像的六位数密钥。

为什么你认为 MongoBD 的 id 会发生变化？据我所知不是。

# c - 我正在用 C 语言制作 linux 命令程序。我想知道代码有什么问题？

> ID：15356470
> 
> 赞同：-3
> 
> 时间：2013-03-12T08:31:54.567
> 
> 标签：c, linux, exec, strdup

我想问一下如何用C编写exec进程编程。现在，我输入了这些代码，我使用了strtok和strdup。

我的代码错误地从输入中赋值，所以你能看到我的代码吗？你能告诉我代码中有什么问题吗？

```
#include <stdio.h>
#include <sys/types.h>
#include <unistd.h>
#include <stdlib.h>
#include <sys/wait.h>
#include <string.h>

int main(){

  int pid;
  int status, i = 0;
  char input[256], path[30];
  const char* a[10];
  char* token;
  char* split = " ";

  while(input != "exit"){
    printf("Please type your command:\n");
    fgets(input, 256, stdin); /* emxape: ls -alf    argv[0] = "ls" argv[1] = -alf*/
    printf("Input: %s", input);
    i = 0;
    token = strdup(strtok(input,split));

while(token != NULL){
  a[i] = token;
  token = strdup(strtok(NULL,split));
  printf("a%d is %s\n", i, a[i]);
  i++;
}

int j = 0;
while( j < sizeof(a))
  {
    printf("%s", a[j]);
    j++;
  }

//free(copy);

if(strcmp(a[0],"cd")== 0 )/*for compare pointer*/
{
  if (chdir((a[1])) == 0) {
    printf("Sucess change Directory.\n");
    return 0;
  }
  else {
    printf("Fault change Directroy\n");
    perror("");
  }

  if (a[1] == NULL)
    {
      if(chdir(getenv("HOME"))<<0)
        perror("cd");
      return 0;
    }
  else
    {
      if(chdir(a[1]) <0)
        perror("cd");
    }

}

sprintf(path,"%s",a[0]);

pid = fork();

/*Child process*/
if(pid == 0){
   //execl(path,a[0],a[1],NULL);
   execl(a[0],a[1],a[2],NULL);
   printf("Wrong child process: %s",path);
   exit(0);
  }

  /*Parents Process*/
   else {
    wait(&status);
   }
  }//while
   printf("Thank you.");
 }/*main*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:40:42.393

至少有2个问题

1.  第 26 行： `token = strdup(strtok(NULL,split));` 应该是`token = strdup(strtok(input,split));`

2.  第一次修改后，第24行的循环就可以运行了。但仍然无法正常运行。似乎`strtok()`, 并`strdup()`没有正确运行。

# c - 设置调试和发布模式时的编译器标志

> ID：15356472
> 
> 赞同：2
> 
> 时间：2013-03-12T08:31:59.487
> 
> 标签：c, build

gcc (GCC) 4.7.2 cmake 版本 2.8.10.2 c89

我使用 cmake 作为我的构建系统。我想相应地设置标志以进行调试或发布。

用调试编译

```
 SET(CMAKE_C_FLAGS_DEBUG "-Wall -Wextra -Wunreachable-code -g -m32 -D_DEBUG -O0 -D_LARGEFILE64_SOURCE -D_REETRANT -D_THREAD_SAFE") 
```

编译发布

```
 SET(CMAKE_C_FLAGS_RELEASE "-Wall -Wextra -Wunreachable-code -m32 -DNDEBUG -O2 -D_LARGEFILE64_SOURCE -D_REETRANT -D_THREAD_SAFE") 
```

对于调试，我已包含标志`-g`并将优化设置为 0 级。

对于该版本，我删除了标志`-g`并添加了`N`for `-DNDEBUG`、`-DNREETRANT`和`-DNTHREAD_SAFE`，并将优化设置为 2 级。

我说的对`N`吗`NO DEBUG`？

这就是我需要做的所有事情来区分调试和发布版本吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T08:50:18.480

以下是基于您的 CMake 标志的一些建议：

1.  调试模式`-g -O0`和发布模式`-O2 -g`。`-g`如果代码大小不重要，即使是 O2 释放模式也最好添加标志。使用`-g`, 包含代码的一些符号信息，它只会增加整个二进制大小大约 10%~20%，但用户可以帮助给你一个堆栈转储，这对调试很有帮助。
2.  使用`-UDEBUG -UREETRANT`而不是`-DNDEBUG -DNREETRANT`. `-DMACRO`标志就像在你的代码中添加一样，`#define MACOR`如果你有类似`#ifdef MACRO SOME_DEBUG_CODE #endif`的代码区域，预处理器会将代码保留在那里，而`-UDEBUG`标志就像`#undefine MACRO`，预处理器将删除`SOME_DEBUG_CODE`. 如果你只是添加`-DNDEBUG -DNREETRANT`，就像`#define NDEBUG #defin NREETRANT`在你的代码中添加一样，这是没有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:38:53.313

*   `-D_DEBUG`如果您也可以检查是否*缺少*，您需要什么`NDEBUG`？（当然，除非您想要单独控制`assert`和其他调试`#ifdef`。我从来没有这种需要。）

*   为什么要为可重入性和线程安全设置不同的设置？

最重要的是，您想要调试和发布代码之间的不同之处完全取决于您。我希望我的调试代码包含覆盖信息，并且我的发布代码为`-O3`. 您的里程显然会有所不同。这两种方式都不是“正确”或“错误”。

您可能还需要注意：

*   CMake 会自动设置类似的东西`-g -O0`，`-O2`因此添加所需的警告和附加标志就足够了。

*   在设置编译器标志之前，您可能需要关注可移植性并检查`if ( CMAKE_COMPILER_IS_GNUC )`（或检查 C++）。`..._GNUCC`

*   正如凌坤所说，你`-g`甚至可以在 Release 代码中保留。至少在开发过程中它是有用的，并且您可以`strip`在安装过程中将 CMake 命令用于可执行文件。（就个人而言，我力求不必让我的客户提取事后堆栈/核心转储。;-)）

# java - 在循环内动态创建 ImageView

> ID：15356473
> 
> 赞同：14
> 
> 时间：2013-03-12T08:32:00.160
> 
> 标签：java, android, imageview

我已经编写了将图像加载到 ImageView 小部件中的代码：

```
 protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gallery);
    i = (ImageView)findViewById(R.id.imageView1);

    new get_image("https://www.google.com/images/srpr/logo4w.png") {
        ImageView imageView1 = new ImageView(GalleryActivity.this);

        ProgressDialog dialog = ProgressDialog.show(GalleryActivity.this, "", "Loading. Please wait...", true);

        protected void onPreExecute(){
             super.onPreExecute();
        }

         protected void onPostExecute(Boolean result) {
             i.setImageBitmap(bitmap); 
         dialog.dismiss();
         }
    }.execute();

} 
```

bu 现在，我想加载几张图片。为此，我需要动态创建图像视图，但我不知道如何...

我想在 for 循环中运行我的代码：

```
for(int i;i<range;i++){
   //LOAD SEVERAL IMAGES. READ URL FROM AN ARRAY
} 
```

我的主要问题是在循环内动态创建几个 ImageView

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-12T08:52:14.650

您可以根据您的要求修改布局、图像资源和图像数量（也可以是动态的）...

```
LinearLayout layout = (LinearLayout)findViewById(R.id.imageLayout);
for(int i=0;i<10;i++)
{
    ImageView image = new ImageView(this);
    image.setLayoutParams(new android.view.ViewGroup.LayoutParams(80,60));
    image.setMaxHeight(20);
    image.setMaxWidth(20);

    // Adds the view to the layout
    layout.addView(image);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:41:08.443

您可以使用此代码创建 ImageViews

```
ImageView image = new ImageView(this);
LinearLayout.LayoutParams vp = new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
image.setLayoutParams(vp);
image.setMaxHeight(50);
image.setMaxWidth(50);
// other image settings
image.setImageDrawable(drawable);
theLayout.addView(image); 
```

其中 theLayout 是您要添加图像视图的布局。

如需更多定制，请查看[开发](http://developer.android.com/reference/android/widget/ImageView.html)页面，其中列出了所有可能的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:36:00.583

如果您的要求显示在列表或网格视图中，那么您应该选择延迟加载列表或网格。

请通过以下链接。

[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)

[https://github.com/abscondment/lazy-gallery](https://github.com/abscondment/lazy-gallery)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-08T20:35:22.893

试试这个

```
 rootLayout = (LinearLayout) view1.findViewById(R.id.linearLayout1);

    LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);
    params.gravity = Gravity.CENTER_VERTICAL;

    params.setMargins(0, 0, 60, 0);

    for(int x=0;x<2;x++) {
        ImageView image = new ImageView(getActivity());

        image.setBackgroundResource(R.drawable.ic_swimming);
        rootLayout.addView(image);
    } 
```

# objective-c - 无法使用 nskeyedArchiver 保存多个对象

> ID：15356481
> 
> 赞同：0
> 
> 时间：2013-03-12T08:32:35.400
> 
> 标签：objective-c

我正在尝试使用`NsKeyedArchiever`保存包含型号、品牌、年份、颜色、vin 的汽车详细信息。代码如下：

```
void CarData()
{
    Car *myCar = [[Car alloc] init];
    myCar.model = [carTempArray objectAtIndex:0];//Temporary array contains value
    myCar.make = [carTempArray objectAtIndex:1];
    myCar.color = [carTempArray objectAtIndex:2];
    myCar.year = [carTempArray objectAtIndex:3];
    myCar.vin = [NSNumber numberWithInt:check];
    NSString *docspath = [NSHomeDirectory() stringByAppendingPathComponent:@"documents"];
    BOOL saved =[NSKeyedArchiver archiveRootObject: myCar toFile:docspath];
    NSLog(@"did save state %d",saved);
    [myCar release];
    [NSKeyedArchiver release];
} 
```

之后使用`NSkeyedUnarcheiver`如下：

```
void ShowData()
{
    NSString *docspath = [NSHomeDirectory() stringByAppendingPathComponent:@"documents"]; 

        Car * retrieveCar = [NSKeyedUnarchiver unarchiveObjectWithFile:docspath];
       // for(int i=0 ; i<studentList.count;i++)
        {
          //  Car * retrieveCar =[studentList objectAtIndex:0];

    NSString * first  = retrieveCar.model;
    NSString * first1 = retrieveCar.make;
    NSString * first2 = retrieveCar.color;
    NSString * first3 = retrieveCar.year;
    NSLog(@"%@",first );
    NSLog(@"%@",first1 );

    NSLog(@"%@",first2 );
    NSLog(@"%@",first3 );
} 
```

但这只取一个值并使用一个值。我想将`NSKeyedArchiever`对象保存在一个数组中，以便多辆汽车可以使用相同的代码成为它的一部分。并且加载与上面相同。请纠正问题。我想运行多辆汽车的代码，我能够在汽车阵列中执行以下任务，例如搜索汽车、删除汽车记录和添加汽车。

# python - 如何在python（unicode类型）中逐行操作文本段落？

> ID：15356483
> 
> 赞同：-2
> 
> 时间：2013-03-12T08:32:50.067
> 
> 标签：python, string, beautifulsoup

我有一个变量（unicode 类型），其中包含一些文本。我从另一个类型为“bs4.element.Tag”（美丽的汤）的变量中获取此文本。

此变量中的文本示例如下：

1234 个单词

1234 字1 字2

我要做的是逐行操作此文本，因此我将每一行分为两部分：一个包含前四个字符，即 1234，另一部分仅包含文本。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:49:50.480

您可能正在寻找像 'split()' 或 'splitline()' 之类的方法（取决于您的变量）。

这将是这样的：

```
 var.split() # if you want to split using the space
    # or
    var[:4] # if you are sure that you need the first 4 characters. 
```

# excel - 如何提取特定字符串

> ID：15356486
> 
> 赞同：1
> 
> 时间：2013-03-12T08:32:56.593
> 
> 标签：excel, excel-2010, extract

我想提取`"eirnan"`加上其他数字，然后是它。我找不到任何匹配的解决方案。

例子

```
Please indicate/  the correct salesman id (Should be _Eirnan413431 _)
Please indicateEirnan3659 /  the correct salesman id (Should be __)
Please indicate / Eirnan84215; the correct salesman id (Should be __)
Eirnan421/Please indicate /  the correct salesman id (Should be __)
Please indicate/  the correct salesman id Eirnan4752151 /(Should be __) 
```

请帮忙

我正在使用 EXCEL 2010

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:04:41.487

你能在 B1 中尝试这个公式并复制下来吗？

```
=MID(A1,FIND("Eirnan",A1,1),MAX(INDEX(ISNUMBER(--MID(A1,ROW(INDIRECT("1:"&LEN(A1))),1))*ROW(INDIRECT("1:"&LEN(A1))),0))-FIND("Eirnan",A1,1)+1) 
```

![在此处输入图像描述](../Images/6e6bdb85391360e0e4f7cb5370ca9cd3.png)

`Right click`在图像上并`open in new tab`以全尺寸查看。

基于 MVP Ron Coderre 在[MrExcel](http://www.mrexcel.com/forum/excel-questions/367606-last-numeric-character-position-string.html)上的代码。

# windows - 如何在没有事件的情况下控制表单大小的扩展

> ID：15356490
> 
> 赞同：0
> 
> 时间：2013-03-12T08:33:13.127
> 
> 标签：windows, c#-4.0

我有一个带有 6 的 windows 窗体`textboxes`。在表单加载时，默认情况下，只会`textbox`显示一个并缩小表单大小。一旦我将文本输入到 中`textbox`，我的表单大小应该会增加，并且应该显示第二个`textbox`，而无需单击任何按钮或`textbox events`. 其背后的意图是用户不会为单击按钮付出任何额外的努力，因为它应该是用户友好的。有什么可能的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:04:41.297

不，没有事件是不可能的，但是没有按钮点击是可能的（实际上是产生应该处理的事件）

因此，您可以做的对用户最友好的事情就是使用事件，而没有理由避免它们。要实现您的功能，您必须

a) 将`Autosize`表单的属性设置为`true`

b）`TextChanged`使用以下代码处理您唯一的文本框的事件：

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    if(((TextBox)sender).Text.Length > 0)
    {
        TextBox tb = new TextBox();
        tb.TextChanged += new EventHandler(textBox1_TextChanged);
        this.Controls.Add(tb);
    }
} 
```

# ios - 如何在 iOS 的子视图中停止滚动

> ID：15356509
> 
> 赞同：1
> 
> 时间：2013-03-12T08:34:12.450
> 
> 标签：ios, xcode, uiscrollview

我在其中`viewControllers`添加了两个`scrollView`，以便在第二个 viewController 中我有一个`subView`滚动图像的位置。我想`viewController`在滚动图像时停止滚动`subView`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:22:17.640

您`UIScrollViewDelegate`在此函数中实现 and ：

```
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView{
     if(scrollView == imagesScrollView){
           mainScrollView.scrollEnables = NO;
        }
} 
```

并在拖动后再次启用它：

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
   {
        mainScrollView.scrollEnabled = YES;
  } 
```

# javascript - 如何使用 javascript 创建以下类型的 json 数组？

> ID：15356510
> 
> 赞同：6
> 
> 时间：2013-03-12T08:34:21.677
> 
> 标签：javascript, json

如何使用 javascript 创建以下类型的 json 数组？

```
xAxis: {
    categories: [
        'Jan',
        'Feb',
        'Mar',
        'Apr',
        'May',
        'Jun',
        'Jul',
        'Aug',
        'Sep',
        'Oct',
        'Nov',
        'Dec'
    ]
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T08:38:51.867

好吧，你有两个选择：

1.  创建数组，然后对其进行字符串化：

    ```
    var categories = [
                'Jan',
                'Feb',
                'Mar',
                'Apr',
                'May',
                'Jun',
                'Jul',
                'Aug',
                'Sep',
                'Oct',
                'Nov',
                'Dec'
            ];
    var json = JSON.stringify(categories); 
    ```

    `JSON.stringify`存在于大多数现代浏览器中，您可以对其进行填充。（有几个可用的垫片，尤其是来自[Crockford 的 github 页面](https://github.com/douglascrockford/JSON-js/)——Crockford 是定义 JSON 的人。）

2.  或者直接创建 JSON 字符串：

    ```
    var json = '["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]'; 
    ```

* * *

重新编辑：这不再是“数组”，它是一个包含数组的对象（或一个包含对象的对象，其中包含一个数组*）*。但是，它并没有从根本上改变答案：

```
var xAxis = { categories: [ 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ] };
var json = JSON.stringify(xAxis); 
```

或者

```
var json = '{"categories": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]}'; 
```

我不确定你是否想要`xAxis`那里的图层。如果是这样，它只是上面的另一层，例如：

```
var obj = { xAxis: { categories: [ 'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec' ] } };
var json = JSON.stringify(obj); 
```

或者

```
var json = '{"xAxis": {"categories": ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]}}'; 
```

[JSON 主页上](http://json.org)有关 JSON 的更多信息。从根本上说，所有字符串都必须用双引号（而不是单引号），并且所有属性名称都必须用双引号。

# android - JSON和XML之间的混淆

> ID：15356512
> 
> 赞同：-1
> 
> 时间：2013-03-12T08:34:25.510
> 
> 标签：android, xml, json, codeigniter

我正在使用 PHP 处理少量数据，我可以在 JSON 和 XML 之间进行选择。但我不知道该选择什么，我在我的 codeigniter 应用程序中使用过 PHP。现在我想为 android 应用程序操作一个 Web 服务。我的php开发者朋友说JSON更适合Web应用程序而android开发者的朋友说XML更适合移动应用程序因为JSON可能是应用程序崩溃的原因，我很困惑请帮助选择

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T08:38:26.120

我认为你的正确答案不存在。这取决于您将选择什么、应用程序的特性以及您喜欢使用哪种数据格式。还可以从其他 Android 开发人员那里获得经验。

我正在使用两者，因为出于某种原因是更好的选择`JSON`，对于另一个`XML`。

[这是关于 XML 和 JSON 的优缺点的](https://stackoverflow.com/questions/3536893/what-are-the-pros-and-cons-of-xml-and-json)好帖子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T08:38:00.307

我会选择 JSON，因为它比 XML 更小，处理速度更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:38:29.800

JSON Web 服务是轻量级的，而 XML 和 SOAP Web 服务是重量级的。Json 应该是第一要务。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T08:40:39.923

JSON 非常容易解析。我也在开发应用程序，我也对 XML 和 JSON 感到困惑。我现在正在使用 JSON，它运行良好，没有任何崩溃。你只需要用 try/catch 块包围你的代码，如果有的话，你可以很容易地捕获 JSONException。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T08:36:43.650

根据我的经验，在 Android 上解析 XML 比解析 JSON 更麻烦。但是，这比其他任何事情都更重要。询问您的 Android 开发人员她喜欢什么，然后就这样做。

# visual-studio-2010 - 使用 argv[] 的 opencv 示例代码运行时错误

> ID：15356513
> 
> 赞同：0
> 
> 时间：2013-03-12T08:34:29.457
> 
> 标签：visual-studio-2010, opencv, argv

我运行这个示例代码，我得到运行时异常

```
#include "stdafx.h"
#include <iostream>
using namespace std;

#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"

using namespace cv;

int _tmain(int argc, char** argv)
{
  //IplImage* img = cvLoadImage( "Walk1001.jpg" ,1 );

  IplImage* img =cvLoadImage( argv[1] );
  if(!img)
     cout <<  "Could not open or find the image" << endl ;

  cvNamedWindow( "Example1", 1 );
  cvShowImage( "Example1", img );

  cvWaitKey(0);
  cvReleaseImage( &img );
  cvDestroyWindow( "Example1" );
  return 0;
} 
```

当我使用`IplImage* img = cvLoadImage( "Walk1001.jpg" ,1 );`而不是这个 `IplImage* img =cvLoadImage( argv[1] );`程序时运行良好。但否则我会出错。

有什么关系`argv`。我遇到了许多通过一些`argv[]`语法加载图像的程序！如何使用这个数组（`argv[]`）或其他什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:05:50.800

要使用 argv 数组，您必须为程序提供参数（来自 cmdline 或类似的）

```
prog.exe Walk1001.jpg 19 
```

现在 argv 包含 3 个元素，[“prog.exe”、“Walk1001.jpg”、“19”] 和 argc==3

在您的程序中，执行以下操作：

```
char * imgPath="Walk1001.jpg"; // having defaults is a good idea
if ( argc > 1 )                // CHECK if there's actual arguments !
{
    imgPath = argv[1];         // argv[0] holds the program-name
}

int number = 24;
if ( argc > 2 )                // CHECK again, if there's enough arguments
{
    number = atoi(argv[2]);    // you get the picture..
} 
```

旁注：你似乎是一个初学者（这没有错！），opencv api多年来发生了变化，请*不要*使用`IplImage*`cv*Functions（1.0 api），使用 cv::Mat 和来自 cv 的函数： : 命名空间。

```
using namespace cv;
int main(int argc, char** argv)
{
    char * imgPath="Walk1001.jpg"; 
    if ( argc > 1 )                
    {
        imgPath = argv[1];         
    }

    Mat img = imread( imgPath );
    if ( img.empty() )
    {
        cout <<  "Could not open or find the image" << endl ;
        return 1;
    }

    namedWindow( "Example1", 1 );
    imshow( "Example1", img );

    waitKey(0);

    // no, you don't have to release Mat !
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T05:43:18.597

我得到运行时异常。错误是array.cpp 中的第 2482 行未知函数？`imshow`我想我在调试后收到了这条消息。我正在使用`Mat img=imread("walk100.jpg");`但`img.total()`返回 NULL。为什么`imread`返回NULL。`cvload`工作正常。

我解决了这个问题，在我了解的网络上`***d.dll`。在添加 dll 文件时，我省略了**d**，即发布模式而不是调试模式。所以我只是放置“d”，`opencv_core244d.dll`而不是`opencv_core244.dll`

感谢大家的贡献

# ruby-on-rails - ElasticSearch/Tire：如何正确设置部分单词搜索

> ID：15356516
> 
> 赞同：1
> 
> 时间：2013-03-12T08:34:31.213
> 
> 标签：ruby-on-rails, elasticsearch, tire

尽管我看到很多关于它的说法都提到这一点相对简单，但我还没有看到它正常工作。假设我有这个：

```
class Car < ActiveRecord::Base
  settings analysis: {
    filter: {
      ngram_filter: { type: "nGram", min_gram: 3, max_gram: 12 }
    },
    analyzer: {
      partial_analyzer: {
        type: "snowball",
        tokenizer: "standard",
        filter: ["standard", "lowercase", "ngram_filter"]
      }
    }
  } do
    mapping do
      indexes :name,                    index_analyzer: "partial_analyzer"
    end
  end
end 
```

假设我有一辆名为“福特”的汽车，我更新了我的索引。现在，如果我搜索“福特”：

```
Car.tire.search { query { string "Ford" } } 
```

我的车在我的结果中。现在，如果我寻找“For”：

```
Car.tire.search { query { string "For" } } 
```

我的车已经找不到了。我以为 nGram 过滤器会自动为我处理好它，但显然不是。作为临时解决方案，我使用通配符 (*) 进行此类搜索，但这绝对不是最佳方法，因为它是我搜索中的 min_gram 和 max_gram 定义关键元素。谁能告诉我他们是如何解决这个问题的？

我正在使用 Rails 3.2.12 和 ruby​​ 1.9.3 。ElasticSearch 版本是 0.20.5。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T09:44:44.777

您想使用自定义分析器而不是雪球分析器：[Elasticsearch 自定义分析器](http://www.elasticsearch.org/guide/reference/index-modules/analysis/custom-analyzer.html)

基本上，其他分析器带有一组预定义的过滤器和标记器。

您可能还想使用 Edge-Ngram 过滤器：[Edge-Ngram filter](http://www.elasticsearch.org/guide/reference/index-modules/analysis/edgengram-tokenizer.html)

Edge-NGram 和 NGram 的区别基本上是 Edge-Ngram 基本上只坚持一个术语的“边缘”。所以它从前面或后面开始。福特 -> [For] 而不是 -> [For, ord]

关于自动完成主题的一些更高级的链接：

[具有模糊性的自动补全（纯弹性搜索，没有轮胎，但非常好读）](http://euphonious-intuition.com/2012/08/more-complicated-mapping-in-elasticsearch/#.UT751tEvBk4)

[提供链接的另一个有用问题](https://stackoverflow.com/questions/14120127/elasticsearch-with-tire-edgengram-with-multiple-words)

**编辑**

基本上，我的设置与您的设置非常相似。但是对于标题和多字段的另一个分析器。由于多语言支持，这里是一个名称数组，而不仅仅是一个名称。

我还指定了 search_analyzer 并使用字符串键而不是符号。这就是我实际拥有的：

```
settings "analysis" => {
    "filter" => {
        "name_ngrams"  => {
            "side"     => "front",
            "max_gram" => 20,
            "min_gram" => 2,
            "type"     => "edgeNGram"
        }
    },
    "analyzer" => {
        "full_name"     => {
            "filter"    => %w(standard lowercase asciifolding),
            "type"      => "custom",
            "tokenizer" => "letter"
        },
        "partial_name"        => {
            "filter"    => %w(standard lowercase asciifolding name_ngrams),
            "type"      => "custom",
            "tokenizer" => "standard"
        }
    }
} do
  mapping do
    indexes :names do
      mapping do
        indexes :name, :type => 'multi_field',
                :fields => {
                    "partial"           => {
                        "search_analyzer" => "full_name",
                        "index_analyzer"  => "partial_name",
                        "type"            => "string"
                    },
                    "title"      => {
                        "type"     => "string",
                        "analyzer" => "full_name"
                    }
                }
      end
    end
  end
end 
```

# android - 在 MyEclipse9.1 中安装 android 后，在 Window Menu 中找不到 Android SDK 和 AVD Manager

> ID：15356518
> 
> 赞同：0
> 
> 时间：2013-03-12T08:34:40.933
> 
> 标签：android, myeclipse

在 MyEclipse9.1 中安装 android 后，在 Window Menu 中找不到 Android SDK 和 AVD Manager。

在 Window->Preference 中，我可以看到左侧列中列出的 Android。然后我相应地设置 SDK 位置。

当我想设置 AVD 时，在窗口菜单中找不到 AVD 管理器。如何设置 AVD 管理器？

有什么我可能错过的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:10:05.743

你需要eclipse的**“ADT”**插件。你最好参考[Android ADT](http://developer.android.com/sdk/installing/index.html)

安装 ADT 后，您尝试创建一些示例 android 应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:37:31.283

如果您使用的是 windows，为什么不从开始菜单中打开 SDK 和 AVD Manager。您是否下载了 android sdk 套件？如果是，您会找到它们。

# java - JSF重置按钮不重置几列

> ID：15356520
> 
> 赞同：0
> 
> 时间：2013-03-12T08:34:51.640
> 
> 标签：java, jsf, jsf-2

我在 JSF 页面中有以下内容，当我按下重置按钮时，所有值都会重置，除了`employeenumber(empnumber)`and `phone(phoneno)`，甚至`autoComplete(empname)`会重置。这可能是什么原因？

```
 <p:panelGrid   columns="6"> 

    <h:outputLabel value="Employee Name"  />
    <p:autoComplete value="#{myMB.employee}"  id="empname"      
    completeMethod="#{myMB.complete}" converter="myConverter"
    var="p" itemLabel="#{p.employeeName}" itemValue="#{p}"               
    forceSelection="true" >                           
    <p:ajax event="itemSelect" listener="#{myMB.handleSelect}" 
    update ="empnumber phoneno" /> 
    <p:column>#{p.employeeName} - #{p.employeeNumber}</p:column>
    </p:autoComplete>   

   <p:message id="badgeMessage" for="empname" />                      

   <h:outputLabel  value="Employee Number"  />
   <p:inputText id="empnumber" value="#{myMB.employeeDetail.employeeNumber}" >
   </p:inputText>
   <p:message id="empnumMessage" for="empnumber" />

   <h:outputLabel value="Phone #" for="phoneno" />
   <p:inputText id="phoneno" value="#{myMB.employeeDetail.phoneNo}">
   </p:inputText>
   <p:message id="phoneMessage" for="phoneno" />

   </p:panelGrid>
   <p:separator />
  <p:panelGrid >
  <h:outputLabel value="Department" for="department" /> 
  <h:selectOneMenu id="department" value="#{myMB.department}"
  converter="departmentConverter"> 
  <f:selectItems value="#{myMB.departmentItems}" var="dept"
  itemLabel="#{dept.departmentName}" itemValue="#{dept.departmentCode}"/>
  <p:ajax listener="#{myMB.loadDepartments}" />
  </h:selectOneMenu>
 <p:message id="categoryMessage" for=  "department" />

 <p:commandButton type="reset" value="Cancel" icon="ui-icon-close"                     
 onclick="myDialog.hide()" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:56:50.620

如果您实际使用 Primefaces，则可以使用其[`<p:resetInput>`](http://www.primefaces.org/showcase/ui/resetInput.jsf)专门设计用于在验证失败时处理数据重置的组件。从官方文档可以看出：

> 当验证失败时，输入组件将其本地值保持在状态。ResetInput 用于从状态中清除缓存的值，以便组件从支持 bean 模型中检索它们的值。

如果验证失败，组件的工作方式如下，当附加标签时，组件的值（其 id 在`target`属性中指定）将重新填充初始值。可以附加到动作源组件，如.`<p:resetInput>``<p:resetInput>``<p:commandButton>`

为了简化它的使用，您可以选择将要重置的所有组件分组到一个容器中，例如`<p:panel id="panel">`，正如您从展示示例中看到的那样。

在这种情况下，您的视图可以重组为：

```
<h:form>
    <p:panel id="panel">
        <p:panelGrid   columns="6"> 
            <h:outputLabel value="Employee Name"  />
            <p:autoComplete value="#{myMB.employee}"  id="empname"      
                            completeMethod="#{myMB.complete}" converter="myConverter"
                            var="p" itemLabel="#{p.employeeName}" itemValue="#{p}"               
                            forceSelection="true" >                           
                <p:ajax event="itemSelect" listener="#{myMB.handleSelect}" 
                        update ="empnumber phoneno" /> 
                <p:column>#{p.employeeName} - #{p.employeeNumber}</p:column>
            </p:autoComplete>   
            <p:message id="badgeMessage" for="empname" />                      
            <h:outputLabel  value="Employee Number"  />
            <p:inputText id="empnumber" value="#{myMB.employeeDetail.employeeNumber}" >
            </p:inputText>
            <p:message id="empnumMessage" for="empnumber" />
            <h:outputLabel value="Phone #" for="phoneno" />
            <p:inputText id="phoneno" value="#{myMB.employeeDetail.phoneNo}">
            </p:inputText>
            <p:message id="phoneMessage" for="phoneno" />
        </p:panelGrid>
        <p:separator />
        <h:outputLabel value="Department" for="department" /> 
        <h:selectOneMenu id="department" value="#{myMB.department}"
                         converter="departmentConverter"> 
            <f:selectItems value="#{myMB.departmentItems}" var="dept"
                           itemLabel="#{dept.departmentName}" itemValue="#{dept.departmentCode}"/>
            <p:ajax listener="#{myMB.loadDepartments}" />
        </h:selectOneMenu>
        <p:message id="categoryMessage" for=  "department" />
    </p:panel>

    <p:commandButton value="Reset input values" update="panel" process="@this" onclick="myDialog.hide()" icon="ui-icon-close">
        <p:resetInput target="panel"/>
    </p:commandButton>
</h:form> 
```

# asp.net-mvc - MVC 视图中的访问字典

> ID：15356530
> 
> 赞同：0
> 
> 时间：2013-03-12T08:35:31.423
> 
> 标签：asp.net-mvc, asp.net-mvc-4, dictionary

这是我的控制器代码，我在其中添加了脚本运行的详细信息并将其传递给我的视图。如何在我的视图中访问它并将其转换为字典中的表格形式？我尝试了几件事，但看起来并不乐观，所以我没有发布代码以供查看。任何通用解决方案都可以。

```
public ActionResult tab()
    { 

//Febuary runs

        ScriptRun run1 = new ScriptRun("IE","Tech2",DateTime.Now.AddMonths(-1));
        ScriptRun run2 = new ScriptRun("IE","Tech2",DateTime.Now.AddMonths(-1));

        //January runs
        ScriptRun run3 = new ScriptRun("IE","Tech2",DateTime.Now.AddMonths(-2));
        ScriptRun run4 = new ScriptRun("IE","Tech2",DateTime.Now.AddMonths(-2));

        //
        ScriptRun run5 = new ScriptRun("IE","Tech2",DateTime.Now.AddMonths(-1));
        ScriptRun run6 = new ScriptRun("IE","Tech2",DateTime.Now.AddMonths(-1));
        ScriptRun run7 = new ScriptRun("IE","Tech2",DateTime.Now.AddMonths(-1));
        ScriptRun run8 = new ScriptRun("IE","Tech2",DateTime.Now.AddMonths(-1));

        List<ScriptRun> janRuns = new List<ScriptRun>();
        janRuns.Add(run3);
        janRuns.Add(run4);

        Dictionary<string,List<ScriptRun>> runs = new Dictionary<string,List<ScriptRun>>();
        runs.Add("Jan",janRuns);

        return View(runs);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:45:10.710

将您的模型定义为：

```
@model Dictionary<string, List<string>> 
```

然后像这样遍历您的模型（您可以将 HTML 更改为表格格式）：

```
@foreach (KeyValuePair<string, List<ScriptRun>> item in this.Model)
{
    <h1>@item.Key</h1>
    <ul>
        @foreach (ScriptRun scriptRun in item.Value)
        {
         <li>@scriptRun.SomePropertyFromScriptRun</li>
        }
    </ul>
} 
```

# java - 何时应用操作随机访问列表的算法？

> ID：15356535
> 
> 赞同：5
> 
> 时间：2013-03-12T08:35:52.303
> 
> 标签：java, algorithm, collections, synchronize

在 RandomAccess 标记接口描述中它是这样写的：

```
 * <p>The best algorithms for manipulating random access lists (such as
 * <tt>ArrayList</tt>) can produce quadratic behavior when applied to
 * sequential access lists (such as <tt>LinkedList</tt>).  Generic list
 * algorithms are encouraged to check whether the given list is an
 * <tt>instanceof</tt> this interface before applying an algorithm that would
 * provide poor performance if it were applied to a sequential access list,
 * and to alter their behavior if necessary to guarantee acceptable
 * performance. 
```

在集合类 synchronisedList 方法中，检查 RandomAccess 并且如果成功创建 SynchronizedRandomAccessList 对象，但它们也没有关于算法的详细信息。

```
public static <T> List<T> synchronizedList(List<T> list) {
    return (list instanceof RandomAccess ?
                new SynchronizedRandomAccessList<T>(list) :
                new SynchronizedList<T>(list));
    } 
```

该算法何时应用以及在哪里应用（它是本机代码）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T08:45:41.447

其中一个例子是`Collections.binarySearch`：

```
public static <T> int binarySearch(List<? extends Comparable<? super T>> list, T key) {
    if (list instanceof RandomAccess || list.size()<BINARYSEARCH_THRESHOLD)
        return Collections.indexedBinarySearch(list, key);
    else
        return Collections.iteratorBinarySearch(list, key);
} 
```

这里不同的二进制搜索算法实现用于随机访问和顺序访问列表。代码是一个实现细节，但在这里区分列表是合理的。

正如[Collections.binarySearch](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#binarySearch%28java.util.List,%20T%29)的文档中指定的那样：

> 此方法在 log(n) 时间内针对“随机访问”列表（提供接近恒定时间的位置访问）运行。如果指定的列表没有实现 RandomAccess 接口并且很大，则此方法将执行基于迭代器的二进制搜索，执行 O(n) 链接遍历和 O(log n) 元素比较。

# xml - 需要使用 XSLT 添加四级组

> ID：15356539
> 
> 赞同：1
> 
> 时间：2013-03-12T08:36:23.363
> 
> 标签：xml, xslt, crystal-reports

我的 XSLT 为这个大学目录创建了三个级别的分组。我需要再添加一个级别来识别可选类并将它们组合在一起。

第一级组在第二级`<ACPGAREAOFSTUDY1>`组上`<ACPGDEGREE1>`和第三级组上`<ICCB1>`

第四级基于四个要素：`<COURSEORAND1>` `<GROUPORAND1>` `<ACADREQMTBLOCKSID1>`和`<GROUPLABEL1>`

这是最终分组的逻辑

当 COURSEORAND1 说“或”时，GROUPORAND1 为空。-这意味着有两个或多个课程可供选择，它会输出“OR”</p>

当 COURSEORAND1 说“OR”时，GROUPORAND1 说“AND”。- 这意味着它将为组中的 2 门课程输出“或”。这也意味着它将为组输出“AND”。

课程可以按元素 ACADREQMTBLOCKSID1 分组，这些组可以按 GROUPLABEL1 分组。

这是当前的 XSLT：

```
<?xml version="1.0"?>
<!-- DWXMLSource="STX049-2-21-13-parsed.xml" -->
<!DOCTYPE xsl:stylesheet>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="no"/>
  <xsl:variable name="allSections" select="/CrystalReport/Group/Group/Group/Details/Section" />

  <xsl:key name="kArea" match="Section" use="ACPGAREAOFSTUDY1"/>
  <xsl:key name="kDegree" match="Section" use="concat(ACPGAREAOFSTUDY1, '+', ACPGDEGREE1)" />
  <xsl:key name="kDepartment" match="Section" use="concat(ACPGAREAOFSTUDY1, '+', ACPGDEGREE1, '+', ICCB1)" />

  <xsl:variable name="degreeFirsts" select="$allSections[generate-id() = generate-id(key('kDegree', concat(ACPGAREAOFSTUDY1, '+', ACPGDEGREE1))[1])]" />
  <xsl:variable name="deptFirsts" select="$allSections[generate-id() = generate-id(key('kDepartment', concat(ACPGAREAOFSTUDY1, '+', ACPGDEGREE1, '+', ICCB1))[1])]" />

  <xsl:template match="/">
    <CrystalReport>
      <Degrees>
        <xsl:apply-templates select="$allSections[generate-id() = generate-id(key('kArea', ACPGAREAOFSTUDY1)[1])]" mode="group"/>
      </Degrees>
    </CrystalReport>
  </xsl:template>

  <xsl:template match="Section" mode="group">
    <xsl:variable name="area" select="ACPGAREAOFSTUDY1" />
    <xsl:text>&#xA;</xsl:text>
    <areaofstudy>
      <xsl:value-of select="$area"/>
    </areaofstudy>
    <xsl:apply-templates select="$degreeFirsts[ACPGAREAOFSTUDY1 = $area]" mode="degree"/>
  </xsl:template>

  <xsl:template match="Section" mode="degree">
    <xsl:variable name="area" select="ACPGAREAOFSTUDY1" />
    <xsl:variable name="degree" select="ACPGDEGREE1" />
    <Degree>
      <xsl:apply-templates select="$deptFirsts[ACPGAREAOFSTUDY1 = $area and ACPGDEGREE1 = $degree]" mode="department">
        <xsl:sort select="ACADPROGRAMSID1" />
      </xsl:apply-templates>
    </Degree>
  </xsl:template>

  <xsl:template match="Section" mode="department">
    <department>
      <xsl:text>&#xA;</xsl:text>
      <Degreetitle>
        <xsl:apply-templates select="ACPGDEGREE1" />
      </Degreetitle>
      <Certtitle>
        <xsl:apply-templates select="CCD11" />
      </Certtitle>
      <xsl:text>&#xA;</xsl:text>
      <DegreeDesc>
        <xsl:apply-templates select="ACPGCOMMENTS1" />
      </DegreeDesc>
      <xsl:text>&#xA;ICCB Code </xsl:text>
      <ICCBcode>
        <xsl:apply-templates select="ICCB1" />
      </ICCBcode>
      <xsl:text> | Field of Study Code: </xsl:text>
      <ProgramID>
        <xsl:apply-templates select="ACADPROGRAMSID1" />
      </ProgramID>

      <xsl:variable name="courses" select="key('kDepartment', concat(ACPGAREAOFSTUDY1, '+', ACPGDEGREE1, '+', ICCB1))" />

      <xsl:call-template name="CourseGroup">
        <xsl:with-param name="courses" select="$courses[FlagElectives1 = 'N']" />
        <xsl:with-param name="title" select="'Program Requirements'" />
        <xsl:with-param name="requiredCourses" select="true()" />
      </xsl:call-template>

      <xsl:call-template name="CourseGroup">
        <xsl:with-param name="courses" select="$courses[FlagElectives1 = 'Y']" />
        <xsl:with-param name="title" select="'Program Electives'" />
      </xsl:call-template>
      <xsl:apply-templates select="ACPGHOMELANGNOTREQDRSN1" />
    </department>
  </xsl:template>

  <xsl:template name="CourseGroup">
    <xsl:param name="courses" />
    <xsl:param name="title" />
    <xsl:param name="requiredCourses" select="false()" />

    <xsl:if test="$courses">
      <xsl:text>&#xA;</xsl:text>
      <req-electitle>
        <xsl:value-of select="$title" />
      </req-electitle>
      <xsl:apply-templates select="$courses">
        <xsl:sort select="FlagElectives1" order="ascending" />
        <xsl:sort select="CRSSUBJECT1" />
        <xsl:sort select="CRSNO1" />
      </xsl:apply-templates>
      <xsl:if test="$requiredCourses">
        <xsl:text>&#xA;</xsl:text>
        <credit-sum>
          <xsl:value-of select='format-number(sum($courses/CRSMINCRED1),"##")'/>
        </credit-sum>
      </xsl:if>
    </xsl:if>
  </xsl:template>

  <xsl:template match="Section">
    <xsl:text>&#xA;</xsl:text>
    <Details>
      <xsl:apply-templates select="COURSEORAND1" />
      <class>
        <deptname>
          <xsl:apply-templates select="CRSSUBJECT1" />
        </deptname>
        <xsl:text>  </xsl:text>
        <courseno>
          <xsl:apply-templates select="CRSNO1" />
        </courseno>
        <xsl:text>  </xsl:text>
        <classname>
          <xsl:apply-templates select="CRSTITLE1" />
        </classname>
        <xsl:text>  </xsl:text>
        <classcredit>
          <xsl:apply-templates select="CRSMINCRED1" />
        </classcredit>
        <xsl:apply-templates select="CRSMAXCRED1" />
      </class>
    </Details>
  </xsl:template>

  <xsl:template match="COURSEORAND1[string-length() != 0]">
    <courseorand1>
      <xsl:value-of select="." />
    </courseorand1>
    <xsl:text>&#xA;</xsl:text>
  </xsl:template>

  <xsl:template match="ACPGHOMELANGNOTREQDRSN1[string-length() != 0]">
    <xsl:text>&#xA;</xsl:text>
    <totalcredits>
      <xsl:value-of select="normalize-space(.)" />
    </totalcredits>
  </xsl:template>

  <xsl:template match="CRSMAXCRED1[string-length() != 0]">
    <xsl:text> to </xsl:text>
    <maxcredits>
      <xsl:value-of select="normalize-space(.)" />
    </maxcredits>
  </xsl:template>

  <xsl:template match="ACPGDEGREE1/text()">
    <xsl:value-of select="concat(., ' DEGREE')"/>
  </xsl:template>

  <xsl:template match="CCD11/text()">
    <xsl:value-of select="('CERTIFICATE')" />
  </xsl:template>

</xsl:stylesheet> 
```

预期的输出如下所示：

```
 ACCOUNTING
 ...
 CERTIFICATES
 The Accounting certificate requires a minimum of 32 credits in the courses listed below.
 ICCB Code 4207 | Field of Study Code: ACCOU.CER.
 Accou 1140 Financial Accounting............................................4
 Accou 1150 Managerial Accounting...........................................4
 Accou 1175 Microcomputer Accounting .......................................2
 Accou 2205 Federal Taxation I .............................................3
 OR
 Accou 2251 Cost Accounting.................................................3
 OR
 Accou 2200 Income Tax Return Preparation ..................................3
 Busin 1100 Introduction to Business .......................................3
 Cis 1150 Introduction to Computer Information Systems .....................3
 OR
 Cis 1110 Using Computers: An Introduction..................................2
 Cis 1221 Introduction to Spreadsheets .....................................3
 Engli 1101 English Composition 1...........................................3
 Math 1100 Business Mathematics.............................................3
 Ofti 1100 Introduction to Computer Keyboarding ............................2
 Ofti 1210 Word Processing I................................................3 
```

以下是包含 OR 和 AND 元素的 XML 示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<CrystalReport>
  <Group Level="1">
    <Group Level="2">
      <Group Level="3">
        <Details Level="4">
          <Section SectionNumber="0">
            <ACPGDEGREE1/>
            <CCD11>ACAC</CCD11>
            <ACPGCOMMENTS1>The Accounting certificate requires a minimum 32 credits in the courses listed below.</ACPGCOMMENTS1>
            <ICCB1>4207</ICCB1>
            <ACADPROGRAMSID1>ACCOU.CER</ACADPROGRAMSID1>
            <CRSNO1>1110</CRSNO1>
            <ACPGHOMELANGNOTREQDRSN1/>
            <CRSMINCRED1>2</CRSMINCRED1>
            <ACPGAREAOFSTUDY1>Accounting</ACPGAREAOFSTUDY1>
            <CRSTITLE1>Using Computers: An Introduction</CRSTITLE1>
            <DEPARTMENT11>ACCOU</DEPARTMENT11>
            <ACRBLABEL1>ADDL REQD COURSES</ACRBLABEL1>
            <CRSMAXCRED1/>
            <FlagElectives1>N</FlagElectives1>
            <CRSSUBJECT1>CIS</CRSSUBJECT1>
            <COURSEORAND1>OR</COURSEORAND1>
            <GROUPORAND1>AND</GROUPORAND1>
            <ACADREQMTBLOCKSID1>16324</ACADREQMTBLOCKSID1>
            <GROUPLABEL1>Group 2</GROUPLABEL1>
          </Section>
        </Details>
        <Details Level="4">
          <Section SectionNumber="0">
            <ACPGDEGREE1/>
            <CCD11>ACAC</CCD11>
            <ACPGCOMMENTS1>The Accounting certificate requires a minimum 32 credits in the courses listed below.</ACPGCOMMENTS1>
            <ICCB1>4207</ICCB1>
            <ACADPROGRAMSID1>ACCOU.CER</ACADPROGRAMSID1>
            <CRSNO1>1150</CRSNO1>
            <ACPGHOMELANGNOTREQDRSN1/>
            <CRSMINCRED1>3</CRSMINCRED1>
            <ACPGAREAOFSTUDY1>Accounting</ACPGAREAOFSTUDY1>
            <CRSTITLE1>Intro to Computer Information Systems</CRSTITLE1>
            <DEPARTMENT11>ACCOU</DEPARTMENT11>
            <ACRBLABEL1>ADDL REQD COURSES</ACRBLABEL1>
            <CRSMAXCRED1/>
            <FlagElectives1>N</FlagElectives1>
            <CRSSUBJECT1>CIS</CRSSUBJECT1>
            <COURSEORAND1>OR</COURSEORAND1>
            <GROUPORAND1>AND</GROUPORAND1>
            <ACADREQMTBLOCKSID1>16324</ACADREQMTBLOCKSID1>
            <GROUPLABEL1>Group 2</GROUPLABEL1>
          </Section>
        </Details>
        <Details Level="4">
          <Section SectionNumber="0">
            <ACPGDEGREE1/>
            <CCD11>ACAC</CCD11>
            <ACPGCOMMENTS1>The Accounting certificate requires a minimum 32 credits in the courses listed below.</ACPGCOMMENTS1>
            <ICCB1>4207</ICCB1>
            <ACADPROGRAMSID1>ACCOU.CER</ACADPROGRAMSID1>
            <CRSNO1>2200</CRSNO1>
            <ACPGHOMELANGNOTREQDRSN1/>
            <CRSMINCRED1>3</CRSMINCRED1>
            <ACPGAREAOFSTUDY1>Accounting</ACPGAREAOFSTUDY1>
            <CRSTITLE1>Income Tax Return Preparation</CRSTITLE1>
            <DEPARTMENT11>ACCOU</DEPARTMENT11>
            <ACRBLABEL1>ADDL REQD COURSES</ACRBLABEL1>
            <CRSMAXCRED1/>
            <FlagElectives1>N</FlagElectives1>
            <CRSSUBJECT1>ACCOU</CRSSUBJECT1>
            <COURSEORAND1>OR</COURSEORAND1>
            <GROUPORAND1>AND</GROUPORAND1>
            <ACADREQMTBLOCKSID1>16324</ACADREQMTBLOCKSID1>
            <GROUPLABEL1>Group 1</GROUPLABEL1>
          </Section>
        </Details>
        <Details Level="4">
          <Section SectionNumber="0">
            <ACPGDEGREE1/>
            <CCD11>ACAC</CCD11>
            <ACPGCOMMENTS1>The Accounting certificate requires a minimum 32 credits in the courses listed below.</ACPGCOMMENTS1>
            <ICCB1>4207</ICCB1>
            <ACADPROGRAMSID1>ACCOU.CER</ACADPROGRAMSID1>
            <CRSNO1>2205</CRSNO1>
            <ACPGHOMELANGNOTREQDRSN1/>
            <CRSMINCRED1>3</CRSMINCRED1>
            <ACPGAREAOFSTUDY1>Accounting</ACPGAREAOFSTUDY1>
            <CRSTITLE1>Federal Taxation I</CRSTITLE1>
            <DEPARTMENT11>ACCOU</DEPARTMENT11>
            <ACRBLABEL1>ADDL REQD COURSES</ACRBLABEL1>
            <CRSMAXCRED1/>
            <FlagElectives1>N</FlagElectives1>
            <CRSSUBJECT1>ACCOU</CRSSUBJECT1>
            <COURSEORAND1>OR</COURSEORAND1>
            <GROUPORAND1>AND</GROUPORAND1>
            <ACADREQMTBLOCKSID1>16324</ACADREQMTBLOCKSID1>
            <GROUPLABEL1>Group 1</GROUPLABEL1>
          </Section>
        </Details>
        <Details Level="4">
          <Section SectionNumber="0">
            <ACPGDEGREE1/>
            <CCD11>ACAC</CCD11>
            <ACPGCOMMENTS1>The Accounting certificate requires a minimum 32 credits in the courses listed below.</ACPGCOMMENTS1>
            <ICCB1>4207</ICCB1>
            <ACADPROGRAMSID1>ACCOU.CER</ACADPROGRAMSID1>
            <CRSNO1>2251</CRSNO1>
            <ACPGHOMELANGNOTREQDRSN1/>
            <CRSMINCRED1>3</CRSMINCRED1>
            <ACPGAREAOFSTUDY1>Accounting</ACPGAREAOFSTUDY1>
            <CRSTITLE1>Cost Accounting</CRSTITLE1>
            <DEPARTMENT11>ACCOU</DEPARTMENT11>
            <ACRBLABEL1>ADDL REQD COURSES</ACRBLABEL1>
            <CRSMAXCRED1/>
            <FlagElectives1>N</FlagElectives1>
            <CRSSUBJECT1>ACCOU</CRSSUBJECT1>
            <COURSEORAND1>OR</COURSEORAND1>
            <GROUPORAND1>AND</GROUPORAND1>
            <ACADREQMTBLOCKSID1>16324</ACADREQMTBLOCKSID1>
            <GROUPLABEL1>Group 1</GROUPLABEL1>
          </Section>
        </Details>
      </Group>
      <Group Level="3">
        <Details Level="4">
          <Section SectionNumber="0">
            <ACPGDEGREE1/>
            <CCD11>ACAC</CCD11>
            <ACPGCOMMENTS1>The Accounting certificate requires a minimum 32 credits in the courses listed below.</ACPGCOMMENTS1>
            <ICCB1>4207</ICCB1>
            <ACADPROGRAMSID1>ACCOU.CER</ACADPROGRAMSID1>
            <CRSNO1>1101</CRSNO1>
            <ACPGHOMELANGNOTREQDRSN1/>
            <CRSMINCRED1>3</CRSMINCRED1>
            <ACPGAREAOFSTUDY1>Accounting</ACPGAREAOFSTUDY1>
            <CRSTITLE1>English Composition 1</CRSTITLE1>
            <DEPARTMENT11>ACCOU</DEPARTMENT11>
            <ACRBLABEL1>ENGLISH COMPOSITION</ACRBLABEL1>
            <CRSMAXCRED1/>
            <FlagElectives1>N</FlagElectives1>
            <CRSSUBJECT1>ENGLI</CRSSUBJECT1>
            <COURSEORAND1>OR</COURSEORAND1>
            <GROUPORAND1/>
            <ACADREQMTBLOCKSID1>21697</ACADREQMTBLOCKSID1>
            <GROUPLABEL1>Group 1</GROUPLABEL1>
          </Section>
        </Details>
      </Group>
      <Group Level="3">
        <Details Level="4">
          <Section SectionNumber="0">
            <ACPGDEGREE1/>
            <CCD11>ACAC</CCD11>
            <ACPGCOMMENTS1>The Accounting certificate requires a minimum 32 credits in the courses listed below.</ACPGCOMMENTS1>
            <ICCB1>4207</ICCB1>
            <ACADPROGRAMSID1>ACCOU.CER</ACADPROGRAMSID1>
            <CRSNO1>1221</CRSNO1>
            <ACPGHOMELANGNOTREQDRSN1/>
            <CRSMINCRED1>3</CRSMINCRED1>
            <ACPGAREAOFSTUDY1>Accounting</ACPGAREAOFSTUDY1>
            <CRSTITLE1>Introduction to Spreadsheets</CRSTITLE1>
            <DEPARTMENT11>ACCOU</DEPARTMENT11>
            <ACRBLABEL1>PROGRAM REQUIREMENTS</ACRBLABEL1>
            <CRSMAXCRED1/>
            <FlagElectives1>N</FlagElectives1>
            <CRSSUBJECT1>CIS</CRSSUBJECT1>
            <COURSEORAND1/>
            <GROUPORAND1/>
            <ACADREQMTBLOCKSID1>23217</ACADREQMTBLOCKSID1>
            <GROUPLABEL1>Group 1</GROUPLABEL1>
          </Section>
        </Details>
        <Details Level="4">
          <Section SectionNumber="0">
            <ACPGDEGREE1/>
            <CCD11>ACAC</CCD11>
            <ACPGCOMMENTS1>The Accounting certificate requires a minimum 32 credits in the courses listed below.</ACPGCOMMENTS1>
            <ICCB1>4207</ICCB1>
            <ACADPROGRAMSID1>ACCOU.CER</ACADPROGRAMSID1>
            <CRSNO1>1175</CRSNO1>
            <ACPGHOMELANGNOTREQDRSN1/>
            <CRSMINCRED1>2</CRSMINCRED1>
            <ACPGAREAOFSTUDY1>Accounting</ACPGAREAOFSTUDY1>
            <CRSTITLE1>Microcomputer Accounting</CRSTITLE1>
            <DEPARTMENT11>ACCOU</DEPARTMENT11>
            <ACRBLABEL1>PROGRAM REQUIREMENTS</ACRBLABEL1>
            <CRSMAXCRED1/>
            <FlagElectives1>N</FlagElectives1>
            <CRSSUBJECT1>ACCOU</CRSSUBJECT1>
            <COURSEORAND1/>
            <GROUPORAND1/>
            <ACADREQMTBLOCKSID1>23217</ACADREQMTBLOCKSID1>
            <GROUPLABEL1>Group 1</GROUPLABEL1>
          </Section>
        </Details>
        <Details Level="4">
          <Section SectionNumber="0">
            <ACPGDEGREE1/>
            <CCD11>ACAC</CCD11>
            <ACPGCOMMENTS1>The Accounting certificate requires a minimum 32 credits in the courses listed below.</ACPGCOMMENTS1>
            <ICCB1>4207</ICCB1>
            <ACADPROGRAMSID1>ACCOU.CER</ACADPROGRAMSID1>
            <CRSNO1>1140</CRSNO1>
            <ACPGHOMELANGNOTREQDRSN1/>
            <CRSMINCRED1>4</CRSMINCRED1>
            <ACPGAREAOFSTUDY1>Accounting</ACPGAREAOFSTUDY1>
            <CRSTITLE1>Financial Accounting</CRSTITLE1>
            <DEPARTMENT11>ACCOU</DEPARTMENT11>
            <ACRBLABEL1>PROGRAM REQUIREMENTS</ACRBLABEL1>
            <CRSMAXCRED1/>
            <FlagElectives1>N</FlagElectives1>
            <CRSSUBJECT1>ACCOU</CRSSUBJECT1>
            <COURSEORAND1/>
            <GROUPORAND1/>
            <ACADREQMTBLOCKSID1>23217</ACADREQMTBLOCKSID1>
            <GROUPLABEL1>Group 1</GROUPLABEL1>
          </Section>
        </Details>
        <Details Level="4">
          <Section SectionNumber="0">
            <ACPGDEGREE1/>
            <CCD11>ACAC</CCD11>
            <ACPGCOMMENTS1>The Accounting certificate requires a minimum 32 credits in the courses listed below.</ACPGCOMMENTS1>
            <ICCB1>4207</ICCB1>
            <ACADPROGRAMSID1>ACCOU.CER</ACADPROGRAMSID1>
            <CRSNO1>1210</CRSNO1>
            <ACPGHOMELANGNOTREQDRSN1/>
            <CRSMINCRED1>3</CRSMINCRED1>
            <ACPGAREAOFSTUDY1>Accounting</ACPGAREAOFSTUDY1>
            <CRSTITLE1>Word Processing I</CRSTITLE1>
            <DEPARTMENT11>ACCOU</DEPARTMENT11>
            <ACRBLABEL1>PROGRAM REQUIREMENTS</ACRBLABEL1>
            <CRSMAXCRED1/>
            <FlagElectives1>N</FlagElectives1>
            <CRSSUBJECT1>OFTI</CRSSUBJECT1>
            <COURSEORAND1/>
            <GROUPORAND1/>
            <ACADREQMTBLOCKSID1>23217</ACADREQMTBLOCKSID1>
            <GROUPLABEL1>Group 1</GROUPLABEL1>
          </Section>
        </Details>
        <Details Level="4">
          <Section SectionNumber="0">
            <ACPGDEGREE1/>
            <CCD11>ACAC</CCD11>
            <ACPGCOMMENTS1>The Accounting certificate requires a minimum 32 credits in the courses listed below.</ACPGCOMMENTS1>
            <ICCB1>4207</ICCB1>
            <ACADPROGRAMSID1>ACCOU.CER</ACADPROGRAMSID1>
            <CRSNO1>1100</CRSNO1>
            <ACPGHOMELANGNOTREQDRSN1/>
            <CRSMINCRED1>3</CRSMINCRED1>
            <ACPGAREAOFSTUDY1>Accounting</ACPGAREAOFSTUDY1>
            <CRSTITLE1>Business Mathematics</CRSTITLE1>
            <DEPARTMENT11>ACCOU</DEPARTMENT11>
            <ACRBLABEL1>PROGRAM REQUIREMENTS</ACRBLABEL1>
            <CRSMAXCRED1/>
            <FlagElectives1>N</FlagElectives1>
            <CRSSUBJECT1>MATH</CRSSUBJECT1>
            <COURSEORAND1/>
            <GROUPORAND1/>
            <ACADREQMTBLOCKSID1>23217</ACADREQMTBLOCKSID1>
            <GROUPLABEL1>Group 1</GROUPLABEL1>
          </Section>
        </Details>
      </Group>
    </Group>
  </Group>
</CrystalReport> 
```

# android - TextView drawableStart的显示bug怎么解释？

> ID：15356541
> 
> 赞同：1
> 
> 时间：2013-03-12T08:36:37.973
> 
> 标签：android, android-layout, android-widget, textview

**更新：**此处创建和呈现更简单的代码，完整的布局 XML 定义。

`drawableStart`当试图用 XML 布局中元素的新属性用左侧的图标替换行布局时`TextView`，我可以观察到以下错误显示的最后一项（在 Nexus 7 上捕获）： ![只注意第 3 项的一半。](../Images/ba30f66b58a64d0ecc8bc5f1d25202fe.png)

相关代码是——MainActivity：

```
package cz.skil.android.tut.testtextviewdrawablestart;

import android.os.Bundle;
import android.app.Activity;
import android.widget.ListView;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_list);

        ListView listView = (ListView) findViewById(R.id.mylist);
        String[] values = new String[] {"item 1", "item 2", "item 3"};

        MyAdapter adapter = new MyAdapter(this, values);

        listView.setAdapter(adapter);         
    }
} 
```

我的适配器

```
package cz.skil.android.tut.testtextviewdrawablestart;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.TextView;

public class MyAdapter extends ArrayAdapter<String> {
    private final Context context;
    private final String[] values;

    public MyAdapter(Context context, String[] values) {
        super(context, R.layout.row, values);
        this.context = context;
        this.values = values;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View rowView = inflater.inflate(R.layout.row, parent, false);
        TextView textView = (TextView) rowView.findViewById(R.id.mylabel);
        textView.setText(values[position]);
        return rowView;
    }
} 
```

`main_list.xml`布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@+id/mylist"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" > <!-- Update: here is the bug -->
    </ListView>

</LinearLayout> 
```

最后是`row.xml`布局：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"

    android:id="@+id/mylabel"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="8dp"
    android:layout_marginBottom="8dp"

    android:layout_marginLeft="4dp"
    android:drawablePadding="8dp"
    android:drawableStart="@drawable/reminder"       

    android:lines="1"
    android:textSize="24sp" >

</TextView> 
```

我猜原因是显示项目的区域的高度是根据为文本声明的尺寸计算的；但是，该图标可能会强制列表项的高度更大。

你能确认这种行为吗？如果是，为什么它会这样？我是安卓新手。很可能我做错了。

（这个问题与这个问题松散相关：[Android layout: on TextView and android:drawableStart -- setting size of the icon?](https://stackoverflow.com/q/15340146/1346705)）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-09T13:43:00.000

`android:layout_height="wrap_content"`为 ListView设置总是错误的。它按预期工作`android:layout_height="fill_parent"`。更详细的解释可以在这里找到[ListView 的世界](http://www.youtube.com/watch?v=wDBM6wVEO70&feature=player_detailpage&t=2445 "ListView 的世界")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-22T14:49:57.897

虽然我不知道这是预期的行为还是错误，但当您使用 drawableStart 时会发生这种情况。将其更改为drawableLeft，它将正确绘制布局。

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"

    android:id="@+id/mylabel"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="8dp"
    android:layout_marginBottom="8dp"

    android:layout_marginLeft="4dp"
    android:drawablePadding="8dp"
    android:drawableLeft="@drawable/reminder"       

    android:lines="1"
    android:textSize="24sp" >

</TextView> 
```

# oracle-apex - 页面区域不显示整个页面宽度

> ID：15356546
> 
> 赞同：0
> 
> 时间：2013-03-12T08:36:50.267
> 
> 标签：oracle-apex

这对我来说很奇怪，因为它是在我们迁移到 Apex 4.2 后才开始发生的。为了解决这个问题，我必须复制和粘贴应用程序中已有的区域，而不是简单地创建一个新区域。

当我创建一个新应用程序并尝试在页面上创建一个区域时，附件总是会发生。如果我在 Apex 4.2 升级之前已经存在的当前应用程序中创建新页面，也会发生这种情况。甚至与升级有关吗？

我认为它在共享组件下的模板或主题中有些东西，但我看不到任何突出的东西。

我想我会尝试一个 HTML5 模板，看看是否有任何不同，但同样的情况发生，请参阅屏幕截图。

![在此处输入图像描述](../Images/51c96bdf346c8d80f4c367d92ce99ec6.png)

有没有答案为什么会发生这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:52:57.397

这看起来真的是一个模板“问题”。您需要检查您的页面模板：它的名称是什么？

例如，在 Theme 23 中有几个页面模板，其中包括左侧、右侧或两个侧边栏。当您的页面使用带有此侧边栏的模板时，侧边栏将始终占用屏幕的一部分。
如果您没有指定模板而是使用“应用程序默认值”，则转到“共享组件 > 模板”并查看在“默认”列中选中的模板的页面模板部分。很可能它是一个包含侧边栏的模板。

除此之外，您还可以随时使用工具来检查 HTML 和 CSS。例如，使用 Firefox 中的 Firebug，您可以右键单击您所在区域左侧的空白区域并选择“使用 firebug 检查元素”。它可能是一个 TD 元素。它可能是一个固定宽度的 div。它可能是自定义 css 推动的事情。

# standards - 理解 NCPDP D.0 的参考

> ID：15356549
> 
> 赞同：-2
> 
> 时间：2013-03-12T08:36:54.673
> 
> 标签：standards

我正在从事一个医疗保健项目并且遇到了 NCPDP D.0 标准，尽管我已经在 wiki 和其他网站上搜索并找到了一些基本信息，但我正在寻找任何允许药房的简单参考或开源软件示例NCPDP D.0 格式的交易。

社区中是否有人为此工作/工作，如果他们可以分享一些信息，那将是 gr8 的帮助。

谢谢，高铁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T11:54:43.520

我认为您将很难找到任何遵循此标准的公共文档或开源软件。我自己无法找到它，并且要访问该标准，我的理解是您需要成为[NCPDP](http://www.ncpdp.org/membership_signup.aspx)的成员。这是 675 美元的费用，您不得在组织之外共享该标准。[标准采购](http://www.ncpdp.org/standards_purchase.aspx)。

此外，您还需要 X12 5010 标准。在[X12 商店](http://store.x12.org/store/healthcare-5010-consolidated-guides)中，这可能会让您损失几千美元。

无论如何，[NCPDP.ORG](http://www.ncpdp.org/)网站上的文档虽然不完整，但还是不错的，您应该检查一下。

# c# - 为什么使用 C++ 而不是 C# 进行驱动程序级编程（系统级编程）

> ID：15356552
> 
> 赞同：-1
> 
> 时间：2013-03-12T08:37:20.893
> 
> 标签：c#, c++, c, operating-system

我必须开发一个测试应用程序来测试图形驱动程序的一些功能。通过利用微软公开的标准，如 DXVAHD.h、DXVA2Api.h (Directshow) 和其他微软 API。由于与 C++ 相比，C# 中的编码非常容易，为什么我们不能使用 C# 来代替。是不是因为我们不能在 C# 中使用头文件（因为有包的概念）？

任何人都可以告诉我为什么在系统级编程方面更喜欢 C、C++ 而不是 C#。? 任何链接或学习材料 WRT 这些将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T10:11:34.747

当您编写系统软件或驱动程序时，您希望严格控制您的环境：内存使用、时间限制等。

使用 C# 是不可能的。即使您忽略了在虚拟机上运行会带来大量开销的事实，您仍然无法控制内存分配/释放策略，您永远无法确定 GC 线程何时会启动并阻塞您的工作线程等。

除此之外，还有许多您无法在 C# 中执行的低级操作：从读取/写入设备寄存器的值或直接访问内存开始，然后转到更具体的任务。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T10:17:07.913

除了某些 API 是 C++ API 之外，没有任何理由不能在 C# 中执行此操作。与某些人在评论中所说的不同，您不是在创建驱动程序，而是在创建（引用）“*用于测试图形驱动程序某些功能的测试应用程序*”。（除非他们是硬件制造商，否则为什么会有人创建驱动程序？）

DirectShow 等流行的 API 具有 C# 绑定。对于那些不这样做的人，您可以通过将 API 包装在 C# 代码引用的 C++/CLI 程序集中轻松创建自己的 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:46:59.283

C 被称为中级语言，因为它实际上是绑定了机器级语言和更传统的高级语言之间的差距。用户可以使用c语言进行系统编程（用于编写操作系统）以及应用程序编程（用于生成菜单驱动的客户计费系统）。因此它被称为中级语言。

高级 - **Java** - Ada、Modula-2、Pascal、COBOL、FORTRAN、BASIC

中级 - **Java**（通过 C 接口）、C++、C、FORTH、Macro-assemble

低级 - 汇编程序

# vagrant - 睡眠/关机后流浪盒坏了

> ID：15356555
> 
> 赞同：7
> 
> 时间：2013-03-12T08:37:26.877
> 
> 标签：vagrant

这已经发生了好几次了，场景如下：我用木偶创建/提供了一个流浪盒子。我工作了一段时间，几天，有时一周。一天结束时，我要么合上 MacBook 的盖子（让它进入睡眠状态），要么关闭它。在某一点，`vagrant up`给出一个错误：

```
[default] Mounting shared folders...
[default] -- v-root: /vagrant
The following SSH command responded with a non-zero exit status.
Vagrant assumes that this means the command failed!

mkdir -p /vagrant 
```

此时，配置、重新加载、停止/启动都不起作用。我必须再次破坏并重新构建盒子，这会花费一些时间并且变得非常烦人。

我发现[这篇文章](https://groups.google.com/forum/#!msg/vagrant-up/aSZkYyoC8sY/dWF1JoP65pcJ)描述了这个问题，并指出 ntp 服务应该解决它。因此，我已将其添加到我的 puppet 配置中，但问题仍然存在。

[我还在Github 上](https://github.com/mitchellh/vagrant/issues/672)发现了一个类似的问题，该问题已修复，但我运行的操作系统与那里描述的不同，所以这不是同一个问题。我确实在那里发布了我的问题，到目前为止没有回应。

调试日志保存为要点：[https ://gist.github.com/pkruithof/5116426](https://gist.github.com/pkruithof/5116426)

有谁知道这个问题可能是什么，我该如何解决？

**更新** 我认为这是在 Vagrant 的某个地方修复的，因为我现在大约 6 个月没有遇到这个问题了。因此，我要结束这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-25T12:03:00.143

sudo vim /etc/NetworkManager/NetworkManager.conf 添加以下行：

> [密钥文件]
> 
> 非托管设备=接口名称：vboxnet0

做vargrant重新加载

# javascript - setTimeout 有或没有匿名函数？有什么不同？

> ID：15356557
> 
> 赞同：7
> 
> 时间：2013-03-12T08:37:33.117
> 
> 标签：javascript, settimeout

我使用了这段代码（后面是填充“tcap”文本区域的 xmlhttprequest）：

```
st=setTimeout(checkme(),4000) 
```

哪里`checkme()`是：

```
function checkme() {
    if (typeof (st) != 'undefined') clearTimeout(st)
    if (document.getElementById("tcap").innerHTML.length > 0) {
        document.getElementById('waitmsg').style.display = 'none'
    } else {
        st = setTimeout(checkme(), 1000)
    }
} 
```

如果我运行它，它会**冻结 Firefox 19**而没有错误消息。但是，如果我将第一个参数（在代码和 checkme() 函数中）替换为：

```
st=setTimeout(function(){checkme()},4000) 
```

它工作正常。所以我的问题是：`checkme()`使用或不使用 anon 函数调用函数有什么区别？为什么在第一种情况下它会冻结 Firefox？

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T08:42:51.410

您需要删除括号

```
st=setTimeout(checkme(),4000) 
```

所以与其：

```
st=setTimeout(checkme,4000) 
```

否则，立即调用该函数。

由于您在 checkme 函数中有相同的错误，它可能会由于无限递归而杀死您的浏览器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T08:47:11.580

`setTimeout`接受一个函数作为参数，并且将函数作为参数传递的正确方法是将其定义为匿名函数，或者仅提供函数名称。如果您使用括号（括号），您实际上并没有传递函数：您正在执行函数并将函数的结果传递给 setTimeout。

因此，当在 setTimeout 中指定函数时，以及需要将函数作为参数传递的任何其他位置时，不应使用括号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T08:49:41.657

如果您正在使用`setTimeout(checkme(),4000)`，则您正在传递 checkme(); 的返回值；但是，如果您想将其作为函数传递，则需要通过以下方式进行

```
setTimeout(function(){checkme()},4000) 
```

或者

```
st=setTimeout(checkme,4000) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T08:43:49.967

您不应该在 setTimeout 函数中使用括号。您应该只传递对该方法的引用。您正在做的是调用该方法并将返回值传递给 set timeout 方法。

# sql-server - 如何将存储过程的输出作为输入传递给 ssis 中的文件系统任务以移动文件

> ID：15356562
> 
> 赞同：0
> 
> 时间：2013-03-12T08:37:41.963
> 
> 标签：sql-server, file, ssis, task

我需要将文件 abcd.txt ， ijk.txt 从 C:\files 移动到它们各自的文件夹 C:\moved_files\abcd\abcd.txt 和 C:\moved_files\ijk\ijk.txt ，其中文件名和目标文件夹名称应该相同，文件夹已经存在；

我在 sql server 数据库中有以下存储过程，当提供文件名作为输入时，它返回文件夹名称，

我已将此存储过程放在 SSIS 的执行 sql 任务中，我现在希望此存储过程的输出，即文件夹名称，应被文件系统任务作为目标变量，以将文件移动到相应的文件夹。

```
alter PROCEDURE [dbo].[FOLDER]
( 
@CSVFILENAME AS VARCHAR(600)
)
AS
BEGIN
DECLARE @Index AS INT
DECLARE @FOLDER AS VARCHAR(50)
DECLARE @CSVFILE AS VARCHAR(500)

SET @CSVFILENAME = REPLACE(UPPER(@CSVFILENAME),'\\dm2nas1\U\sql_data\in\','')
SET @CSVFILE = @CSVFILENAME

SET @CSVFILENAME = REPLACE(UPPER(@CSVFILENAME),'.csv','')
SET @Index = CHARINDEX('_',@CSVFILENAME)

IF @CSVFILENAME LIKE '%TRACKER%'
SET @FOLDER = 'TRACKER'
ELSE
SET @FOLDER = SUBSTRING(@CSVFILENAME,@Index + 1,LEN(@CSVFILENAME))
SELECT @FOLDER
END 
```

对于每个循环容器，我都有执行 sql 任务和文件系统任务，以及两个变量 user::filename 和 user::destfolder。我希望存储过程的输出，即文件夹名称存储在变量 user::destfolder 中，然后可以在文件系统任务中的目标变量值中给出
有人可以帮助我进行变量映射，以便移动文件根据存储过程的输出到目标文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:26:00.533

一般的想法是您将存储过程的结果（通过`SQL Execute Task`）粘贴到（ADO？）对象变量中。这将充当 DataTable 或 DataSet（取决于您从 中返回的内容`Execute SQL task`），如果您使用 Foreach 循环容器，则返回的列可以映射到变量。

## 这里是一步一步的说明

您需要修改您的存储过程，使其返回您想要的文件名和目标文件夹的两个值。还要记住列顺序，即`SELECT @CSVFILE, @FOLDER`

1.  创建一个对象变量 (User::objResults)。
2.  创建一个`Execute SQL Task`
    *   在常规选项卡中
        1.  添加存储过程的名称
        2.  设置结果集（单行或完整结果集）
    *   在结果集选项卡中
        1.  添加新项目 ResultName 为 0
        2.  将变量名设置为 User::objResults
3.  将您附加`Foreach Loop Container`到末尾``Execute SQL Task`并将枚举器设置为 ADO 枚举器。

# batch-file - 在包含某些特定文本的文件夹中递归批量删除文件

> ID：15356564
> 
> 赞同：0
> 
> 时间：2013-03-12T08:37:45.637
> 
> 标签：batch-file

我想递归地遍历一组文件夹并删除这些文件夹中的所有文件，这些文件的名称中包含“OUT”。在下面的示例中，仅应删除文件夹 folder1out 和 folder3out 中的文件。例如：

```
root
    folder1
    folder1out
        file1
        file2
    folder2
        folder3
            file1
        folder3out
            file1
            file2 
```

这就是我现在所拥有的：

```
cd root
FOR /f %%f in ('dir /ad /b /s') do (
    %%f|findstr /i OUT > nul:
    IF %errorlevel% == 0 (
        cd %%f
        del .
    )
) 
```

但这给了我错误 'nameofthefolderin%%f' 不是内部或外部命令、可运行程序或批处理文件。

有人可以告诉我哪里出错了，或者是否有更好的方法来做到这一点？感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:38:52.630

好吧，前两行似乎没问题。

问题在于其余部分。

```
%%f|findstr /i OUT > nul: 
```

嗯，不，您需要`ECHO`输入文件名，并且应该引用`FINDSTR` 目标字符串，并且后面的冒号不是必需的或通常的 - 但无害。`"OUT"``NUL`

```
ECHO %%f|findstr /i "OUT" > nul 
```

* * *

```
IF %errorlevel% == 0 ( 
```

常见错误。当**LOGICAL**命令被解析时（这意味着从`FOR`6 行到右括号），任何 %var% 都被替换为 %var% 的当前值，然后在结果上执行命令。因此，%ERRORLEVEL% 将被 PARSE-TIME 的 ERRORLEVEL 值替换。

您需要使用原始`IF ERRORLEVEL`表单，`"IF ERRORLEVEL n"`即*“如果错误级别为 n 或大于 n”*此表单检查 ERRORLEVEL 的 CURRENT（即 RUN-TIME）值。

```
IF NOT ERRORLEVEL 1 ( 
```

（即，如果 errorlevel 不是（1 或大于 1））

* * *

```
 cd %%f 
```

是的，这会奏效。问题是您会将 %%f 设置为当前目录。可能看起来是你想要的，但是...

```
 del . 
```

呃，不 - 这将尝试删除当前目录中的所有文件并需要响应。

你正在寻找

```
RD . 
```

但是您不能删除当前目录。

那么该怎么办？

简单的

```
RD %%f /S /Q 
```

应该删除目录 %%f 及其子目录 (/s) 并且不提示权限 (/Q)

**`BUT PLEASE INSERT AN ECHO BEFORE THIS COMMAND FOR TESTING`**以便显示建议的删除而不是执行（如果出现错误......）

```
ECHO RD %%f /S /Q 
```

* * *

所以你修改后的批次变成了

```
cd root
FOR /f %%f in ('dir /ad /b /s') do (
 ECHO %%f|findstr /i "OUT" > nul
 IF NOT ERRORLEVEL 1 (
 ECHO RD %%f /S /Q
 )
) 
```

这可以通过使用更简单地完成

```
cd root
FOR /f %%f in ('dir /ad /b /s *OUT*') do (
 ECHO RD %%f /S /Q
) 
```

最后一个问题可能是您可能希望删除一个`*OUT*`本身包含子目录的`*OUT*`子目录。由于 FOR 的工作方式，您可能会发现，当您来到 lower-down 目录时，higher-down 目录已经被删除，因此 lower 目录将不存在，并且您会收到一条丑陋的错误消息。

附加`2>NUL`到 RD 命令应该抑制该错误消息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:09:16.503

随着`%%f|findstr /i OUT > nul:`您尝试执行命令 %%f （这是来自 FOR 循环的文件夹名称），因此它表示它未被识别为命令。因为它不是。

您需要一种正确的方法来检测目录名称中的“out”。您可以使用这种语法获取变量的最后 3 个字符：
`%%f:~-3%`
所以尝试：
`if /i "%%f:~-3%"=="out" ...`

# java - 较新版本的 Hibernate 中的 Criterion#ignoreCase

> ID：15356572
> 
> 赞同：3
> 
> 时间：2013-03-12T08:38:18.407
> 
> 标签：java, hibernate

我刚刚升级到 Hibernate 4.1.10.Final （在第一次升级到 4.1.8.Final 之后），但现在这不能编译：

`Restrictions.eq("loginName", loginName).ignoreCase();`

这是由于 Criterion 类中不再存在 ignoreCase() 方法。但是，我找不到任何关于此的文档，我是否需要用某些东西替换它，或者它是否因为总是忽略大小写而变得不必要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T10:33:31.583

改为使用

```
criteria.add(Restrictions.ilike('prop', '%value%'); 
```

或者

```
 criteria.add(Restrictions.ilike('prop', 'value', MatchMode.ANYWHERE); 
```

# sql - 如何通过调用其他过程进行外部连接

> ID：15356574
> 
> 赞同：1
> 
> 时间：2013-03-12T08:38:22.807
> 
> 标签：sql, database, stored-procedures, informix

我有一个存储过程：

> 程序 qr_get_dep_boss(...,...)

接受两个 params( `year`, `main_code`) 并返回一个记录 the`boss_num`和 his name 。

我想创建另一个过程并在上一个过程调用上进行循环，并`outer join`使用另一个查询的结果

```
SELECT 
  year,
  main_code,
  name,
  CASE 
    WHEN father_code in(-1)  THEN NULL
    ELSE father_code 
  END AS father_code,main_code || '_' || year AS main_id, 
  (SELECT COUNT(*) 
   FROM sm_r_build 
   WHERE father_code = sc.main_code 
     AND year = (SELECT MAX(year)
                 FROM st_quit_info)) childcount,
   main_code||'_'|| father_code AS serial 
FROM sm_r_build sc 
WHERE year=(SELECT MAX(year)FROM st_quit_info) 
```

所以我想要结果：

```
year,main_code,name,father_code,main_id,childcount,serial,boss_num,boss_name 
```

* * *

我试试这个：

```
create procedure new_get_alldepwithboss()
returning int as year , int as main_code ,nvarchar(100) as name,int as father_code,nvarchar(255) as main_id,int as childcount,int as ll_boss_num,nvarchar(100) as ll_boss_name 

define ll_year int;
define ll_main_code int;
define ll_name nvarchar(100);
define ll_father_code int;
define ll_main_id nvarchar(255) ;
define ll_childcount int;
define ll_boss_num int;
define ll_boss_name nvarchar(100);

foreach 
SELECT year,main_code,name,CASE WHEN father_code in(-1)  THEN NULL ELSE father_code END AS father_code,main_code || '_' || year AS main_id, (SELECT COUNT(*) 
FROM sm_r_build 
WHERE father_code=sc.main_code AND year= (SELECT MAX(year)
FROM st_quit_info)) childcount ,a.emp_num,a.emp_name
INTO ll_year ,ll_main_code,ll_name  ,ll_father_code ,ll_main_id ,ll_childcount ,ll_boss_num,ll_boss_name
FROM sm_r_build  sc , TABLE(FUNCTION qr_get_dep_boss(ll_main_code, ll_year))AS a(emp_num,emp_name)  
WHERE year=(SELECT MAX(year)FROM st_quit_info)

return ll_year , ll_main_code, ll_name,ll_father_code,ll_main_id, ll_childcount ,  ll_boss_num,ll_boss_name with resume;

end foreach

end procedure 
```

但徒劳！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:02:34.437

在 SQL 服务器的情况下，我建议使用而不是函数而不是存储过程。函数的标题应该是：

```
CREATE FUNCTION qr_get_dep_boss( @year DATE, @main_code INT)
RETURN @t TABLE ( boss_num INT, boss_name VARCHAR(50))
AS
... ( here boss_num and boss_name  should be set ) 
```

在您的主要查询中，您可以通过以下方式使用此功能：

```
SELECT year, main_code, ... , t.bos_num , t.boss_name 
FROM ...
CROSS APPLY
qr_get_dep_boss(year, main_code) t 
```

但我不确定在 Informix 中是否可行，以防万一你总是可以定义两个返回单个值的函数。GL！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T16:04:41.207

如果我理解正确，您不需要第二个程序。

您需要做的是使用`RETURN xxx WITH RESUME`程序 qr_get_dep_boss()

从[手册](http://publib.boulder.ibm.com/infocenter/idshelp/v117/topic/com.ibm.sqls.doc/ids_sqs_0063.htm)中复制的示例。

```
CREATE FUNCTION series (limit INT, backwards INT) RETURNING INT;
   DEFINE i INT;
   FOR i IN (1 TO limit)
      RETURN i WITH RESUME;
   END FOR;
   IF backwards = 0 THEN
      RETURN;
   END IF;
   FOR i IN (limit TO 1 STEP -1)
      RETURN i WITH RESUME;
   END FOR;
END FUNCTION; -- series 
```

# jsp - 无需 IP 地址的移动运营商检测

> ID：15356581
> 
> 赞同：0
> 
> 时间：2013-03-12T08:38:48.027
> 
> 标签：jsp, mobile, ip, carrier

是否可以使用 JSP 或任何其他服务器端语言读取移动设备的运营商信息？使用 IP 地址检测移动运营商不是一种选择，因为我也想针对使用 wi-fi 的用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T09:57:04.587

这是不可能的。也许它可能存在一些特殊的运营商 API，虽然我不知道 WIFI 用户。

对于 GSM 连接，您可以使用 IP 或查看 HTTP 标头。有时操作员会注入[特定的](http://certificateerror.blogspot.com.es/search?q=operators%20http) [值](http://mobiforge.com/developing/blog/useful-x-headers)。

# grails - 如何通过命令“create-unit-test”更改 Grails 用于生成单元测试的模板？

> ID：15356585
> 
> 赞同：2
> 
> 时间：2013-03-12T08:38:52.087
> 
> 标签：grails, scripting

如何更改 Grails 用于通过命令生成单元测试的模板`create-unit-test`？我想例如用制表符替换空格、修改导入、删除 javadoc 指令等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T08:46:42.220

运行`grails install-templates`将创建默认模板的副本`src/templates`（脚手架模板将进入`src/templates/scaffolding`，其他模板将进入`src/templates/artifacts`），然后您可以自由修改。生成和创建脚本以及运行时动态脚手架将优先使用您应用的模板而不是默认模板。

# c++ - 如何通过 c_str() 库 API 使用 C++ 流。

> ID：15356590
> 
> 赞同：1
> 
> 时间：2013-03-12T08:39:12.360
> 
> 标签：c++, c, printf, cout, keil

嗨，这是我的代码片段：

```
RIT128x96x4StringDraw(HWREGBITW(&g_ulFlags, 0) ? "1" : "0", 48, 32, 15); 
```

这仅用于在屏幕上打印一些字符串。我想要一个函数或方法来打印可以递增的数字，就像我们在 c++ 中所做的那样

```
for(;;)
{ 
    cout<<i++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:29:03.500

从您的另一个问题[Arm Cortex Display](https://stackoverflow.com/questions/15377573/arm-cortex-m3-display)中，我们看到了函数的原型。

```
void RIT128x96x4StringDraw(char *str, ulong x, ulong y, unsigned char level); 
```

以下是参数，

*   `x`并且`y`是屏幕上的位置。它们是*字符位置*，因此此函数绘制文本，如 a`printf()`或`cout`。
*   `level`参数是强度；我猜你有一个灰度 LCD，这就是文本的**白色**或**黑色。**
*   `str`是您要打印的*C 字符串。*

这是一个以传统*C*模式打印数字的示例。

```
#include <stdio.h>
#include <stdlib.h>
void print_number(int i)
{
    char buffer[36];
    itoa (i,buffer,10);
    RIT128x96x4StringDraw(&buffer[0], 0, 0, 15);
} 
```

这使用[`itoa()`](http://www.cplusplus.com/reference/cstdlib/itoa/)函数将数字转换为*C 字符串*。如果你更喜欢[C++ 语法](https://stackoverflow.com/questions/2872543/printf-vs-cout-in-c)，下面的代码可能更可取，

```
void print_number(int i)
{
  std::ostringstream oss;
  oss << i++;
  /* What ever else you wish to do... */
  RIT128x96x4StringDraw(oss.str().c_str(), 0, 0, 15);
} 
```

这段代码并不意味着是防弹生产代码，甚至可能无法编译。它是为了展示一个概念。

如果您的目标是资源受限的，这是一个[实现。`itoa()`](http://en.wikibooks.org/wiki/C_Programming/C_Reference/stdlib.h/itoa)

# geolocation - HTML5 Bing 地图和地理位置

> ID：15356595
> 
> 赞同：0
> 
> 时间：2013-03-12T08:39:18.537
> 
> 标签：geolocation, bing-maps

我正在使用 html5 开发 Windows 8 应用程序，现在我被地图困住了，该地图将找到用户位置更多的工作，我有这个项目的最后期限

地图.html

```
 <!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>BingMapsJSIntro</title>

    <script src="http://dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0" type="text/javascript"></script>

    <!-- WinJS references -->
    <link href="//Microsoft.WinJS.1.0/css/ui-dark.css" rel="stylesheet" />
    <script src="//Microsoft.WinJS.1.0/js/base.js"></script>
    <script src="//Microsoft.WinJS.1.0/js/ui.js"></script>

    <!-- BingMapsJSIntro references -->
    <link href="/css/default.css" rel="stylesheet" />
    <script src="/js/default.js"></script>

    <!-- Bing Maps references -->
    <script type="text/javascript"
            src="ms-appx:///Bing.Maps.JavaScript//js/veapicore.js"></script>

    <!-- Our Bing Maps JavaScript Code -->
    <script src="/js/bing.js"></script>
</head>
<body>
     <div id="myMap"></div>

</body>
</html> 
```

bing.js

```
 var map;

function showMap(position) {
    var latitude = position.coords.latitude;
    var longitude = position.coords.longitude;

    var map = new Microsoft.Maps.Map($("mymap")[0],
    {
        credentials: "MYBINGMAPCODE",
        center: new Microsoft.Maps.Location(latitude, longitude),
        mapTypeId: Microsoft.Maps.MapTypeId.road,
        zoom: 10
    });

    var center = map.getCenter();
    var pin = new Microsoft.Maps.Pushpin(center, { width: 50, height: 50, draggable: false });
    map.entities.push(pin);
}

//Initialization logic for loading the map control
(function () {
    function initialize() {
        Microsoft.Maps.loadModule('Microsoft.Maps.Map', { callback: GetMap });
    }

    document.addEventListener("DOMContentLoaded", initialize, false);
})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T05:53:02.420

您提供的代码中不存在您的模块回调方法“ *GetMap ”。*

```
Microsoft.Maps.loadModule('Microsoft.Maps.Map', { callback: GetMap }); 
```

你需要类似...

```
function GetMap ()
{
   var mapOptions = { credentials:"<Insert Your Bing Maps Key Here>" }
   var map = new Microsoft.Maps.Map(document.getElementById("myMap"), mapOptions );
} 
```

# iphone - MFMailComposeViewController 在图像附件前面产生空行

> ID：15356600
> 
> 赞同：2
> 
> 时间：2013-03-12T08:39:37.827
> 
> 标签：iphone, outlook, email-attachments, mfmailcomposeviewcontroller

我使用 MFMailComposeViewController 在 iPhone 上创建电子邮件。这些邮件包括文本、文本附件和一些图像附件。

```
if ([MFMailComposeViewController canSendMail]) {

    mailController = [[MFMailComposeViewController alloc] init];
    [mailController setToRecipients:recipients];
    if ([ccRecipients count] > 0) [mailController setCcRecipients:ccRecipients];
    [mailController setSubject:project];
    [mailController setMessageBody:message isHTML:NO];

    if (csv) {
        [mailController addAttachmentData:csvData mimeType:@"text/csv" fileName:csvFileName]; 
    }

    QEMailAddPicturesOperation * operation = [[QEMailAddPicturesOperation alloc] init];
    operation.delegate = self;
    NSOperationQueue *queue = [[NSOperationQueue alloc] init];
    [queue addOperation:operation];
}

@implementation QEMailAddPicturesOperation

- (void) main {
    ....
    for (NSString * fileName in listOfPictures) {
        NSString * path = [directory stringByAppendingPathComponent:fileName];
        NSData * imageData = UIImageJPEGRepresentation([UIImage imageWithContentsOfFile:path], PIC_COMPRESSION_RATE );
        [mailController addAttachmentData:imageData mimeType:@"image/jpg" fileName:fileName];
    }
} 
```

一切正常，我可以发送邮件。但结果是：

```
Content-Type: multipart/mixed; boundary=Apple-Mail-256A861D-10BB-4031-8DFB-0E8FDA8F9337

....

Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (1.0)
X-Mailer: iPhone Mail (9A405)

....

--Apple-Mail-256A861D-10BB-4031-8DFB-0E8FDA8F9337
Content-Transfer-Encoding: 7BIT
Content-Type: TEXT/plain;
charset=us-ascii

--Apple-Mail-256A861D-10BB-4031-8DFB-0E8FDA8F9337
Content-Disposition: inline;
filename=MFA_001.JPG
Content-Type: IMAGE/jpg;

.... 
```

您会看到：邮件编写器在附加的（和 base64 编码的）图像之间放置了几行文本。

Outlook 2010 将这些行解释为附件 (ATT......)。例如，发送 8 张图像会在 Outlook 中创建 8 个额外但为空的附件。Outlook 还将 iPhone-Mail 的签名显示为附件。Mac 上的 Outlook 2011 可以正常工作。

如何避免在 iPhone 上创建空行或在 Outlook（2007、2010）中创建附件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-11-02T16:08:43.300

我在这里重新发布了这个问题 - [MFMailComposeViewController 将签名附加为 .txt 文件](https://stackoverflow.com/questions/47043596/mfmailcomposeviewcontroller-attaches-signature-as-txt-file)，因为没有答案。

经过一番深入研究，这是 Exchange 服务器的问题，而不是 Swift/iOS/ 等的问题。这与 Exchange 期望订购电子邮件内容的方式有关。关于新版本的 Exchange 是否解决了这个问题，我还没有找到明确的答案。麻省理工学院的链接特别提到了 Exchange Server 2007 和 2010。此外，我能够确认问题出在 Exchange 发送邮件时，没有收到。

[http://kb.mit.edu/confluence/pages/viewpage.action?pageId=4981187](http://kb.mit.edu/confluence/pages/viewpage.action?pageId=4981187)

[https://support.microsoft.com/en-us/help/969854/the-body-of-a-message-is-shown-incorrectly-as-an-attachment-if-you-try](https://support.microsoft.com/en-us/help/969854/the-body-of-a-message-is-shown-incorrectly-as-an-attachment-if-you-try)

# python - 将文件句柄传递给 cython 函数

> ID：15356606
> 
> 赞同：4
> 
> 时间：2013-03-12T08:39:56.850
> 
> 标签：python, function, cython, filehandle

我想用 cython 编译一个 python 函数，用于读取跳过一些记录的二进制文件（不读取整个文件然后切片，因为我会用完内存）。我可以想出这样的东西：

```
 def FromFileSkip(fid, count=1, skip=0):            
        if skip>=0:
            data = numpy.zeros(count)
            k = 0
            while k<count:
                try:
                    data[k] = numpy.fromfile(fid, count=1, dtype=dtype)
                    fid.seek(skip, 1)
                    k +=1
                except ValueError:
                    data = data[:k]
                    break
            return data 
```

然后我可以使用这样的功能：

```
 f = open(filename)
 data = FromFileSkip(f,... 
```

但是，为了使用 cython 编译函数“FromFileSkip”，我想定义函数中涉及的所有类型，所以“fid”以及文件处理程序。我如何在 cython 中定义它的类型，因为它不是“标准”类型，例如整数。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T22:35:36.510

定义类型`fid`无济于事，因为调用 python 函数仍然很昂贵。尝试使用“-a”标志编译您的示例以了解我的意思。但是，您可以使用低级 C 函数进行文件处理，以避免循环中的 python 开销。为了举例，我假设数据从文件的开头开始，并且它的类型是`double`

```
from libc.stdio cimport *                                                                

cdef extern from "stdio.h":
    FILE *fdopen(int, const char *)

import numpy as np
cimport numpy as np

DTYPE = np.double # or whatever your type is
ctypedef np.double_t DTYPE_t # or whatever your type is

def FromFileSkip(fid, int count=1, int skip=0):
    cdef int k
    cdef FILE* cfile
    cdef np.ndarray[DTYPE_t, ndim=1] data
    cdef DTYPE_t* data_ptr

    cfile = fdopen(fid.fileno(), 'rb') # attach the stream
    data = np.zeros(count).astype(DTYPE)
    data_ptr = <DTYPE_t*>data.data

    # maybe skip some header bytes here
    # ...

    for k in range(count):
        if fread(<void*>(data_ptr + k), sizeof(DTYPE_t), 1, cfile) < 0:
            break
        if fseek(cfile, skip, SEEK_CUR):
            break

    return data 
```

请注意，`cython -a example.pyx`循环内没有显示 python 开销的输出。

# android - ListView 滚动不流畅

> ID：15356618
> 
> 赞同：0
> 
> 时间：2013-03-12T08:40:52.733
> 
> 标签：android, listview, scroll

使用滚动列表视图似乎真的有问题。我有一个 listview 适配器，我在其上准备所有数据（以及所有网络调用），然后填充 listview 适配器。

滚动只是不流畅，如果我在 ScrollView 中实现 ListView，大部分时间都不起作用

```
<ScrollView
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <ListView
        android:id="@+id/rideList"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/customersTitle"
        android:background="@drawable/roundcornersgreyback"
        android:scrollbarSize="3dp"
        android:scrollbarStyle="outsideOverlay"
        android:scrollbars="vertical"
        android:scrollingCache="true"
        android:smoothScrollbar="true"
        android:visibility="visible" />
</ScrollView> 
```

当我在没有 ScrollView 的情况下滚动时，只需使用 ListView 本身的属性，列表就会滚动，但是在我的布局底部丢失了一部分。页脚被隐藏。

```
<ListView
    android:id="@+id/rideList"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/customersTitle"
    android:background="@drawable/roundcornersgreyback"
    android:scrollbarSize="3dp"
    android:scrollbarStyle="outsideOverlay"
    android:scrollbars="vertical"
    android:scrollingCache="true"
    android:smoothScrollbar="true"
    android:visibility="visible" /> 
```

如果我将 ScrollView 放到布局的根目录，则列表视图根本无法滚动。

我究竟做错了什么 ？需要滚动列表和视图有那么疯狂吗？

编辑：代码按照 viewHolder 布局。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T08:47:44.607

据我了解，至少有两个问题使您的实施滞后：

首先，您在 ScrollView 中使用 ListView，这不是一个好主意。[来自ScrollView](http://developer.android.com/reference/android/widget/ScrollView.html)的 API 文档：

> 永远不要将 ScrollView 与 ListView 一起使用，因为 ListView 负责自己的垂直滚动。最重要的是，这样做会破坏 ListView 中处理大型列表的所有重要优化，因为它有效地强制 ListView 显示其整个项目列表以填充 ScrollView 提供的无限容器。

其次，如果你真的想让你的 ListView 平滑滚动，你应该使用一个实现 ViewHolder 模式的适配器来回收视图，而不是为每个列表元素创建一个新的。那里有很多很好的示例，只需搜索“ListView ViewHolder”之类的内容，您就会得到一些很棒的教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T08:47:51.940

> Listview 页脚用作您的页脚布局

```
 View footerView =  ((LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.footer_layout, null, false);
        list.addFooterView(footerView); 
```

[http://developer.android.com/reference/android/widget/ListView.html](http://developer.android.com/reference/android/widget/ListView.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T09:11:48.570

[谷歌开发者的列表视图世界](http://www.youtube.com/watch?v=wDBM6wVEO70)。看看链接。解释使用 viewholder 及其提高性能的原因。在自定义列表适配器中使用 ViewHolder。回收视图将有助于平滑滚动。那些在屏幕上可见的视图是无法回收的。

您每次都在调用 findViewById() 。因此，随着列表的增加，性能会降低。所以回收视图是提高列表视图性能的方法。

此链接[http://www.vogella.com/articles/AndroidListView/article.html](http://www.vogella.com/articles/AndroidListView/article.html)有教程，可帮助您在标题 VIEWHOLDER PATTERN 下了解 ViewHolder。

```
static class ViewHolder {
TextView text;
}

ViewHolder holder = new ViewHolder();
if(convertView==null)
{
 holder.text = (TextView) convertView.findViewById(R.id.listitem_text);
 convertView.setTag(viewHolder);
}
holder = (ViewHolder) rowView.getTag();
holder.text.setText("hello); 
```

# git - 如何从 VisualStudio.com 的 Git 分支自动部署到 Azure？

> ID：15356620
> 
> 赞同：4
> 
> 时间：2013-03-12T08:40:54.907
> 
> 标签：git, azure, tfs, web-deployment

LS,

我很高兴使用新的 VisualStudio.com 服务来托管我的存储库。现在我想从它部署到支持 TFS 和 Git 的 Azure（不确定它是否同时支持）。

我假设现在不可能从 VS.com 自动执行，因为当我授权我的 VS.com 帐户时，它告诉我它找不到任何项目。

很想听到更多关于这样做的可能性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:52:26.810

目前（2013 年 3 月上旬），visualstudio.com 不支持自动 git 推送到 Windows Azure 网站。

当您检查“[使用 Git 发布网站](http://www.windowsazure.com/en-us/develop/net/common-tasks/publishing-with-git/)”页面时，您会看到（当前）支持部署到 Windows Azure 网站

*   '本地文件'，又名'git push azure master'，
*   CodePlex
*   GitHub
*   比特桶

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:37:25.260

您始终可以使用远程信息在 azure 上设置您的存储库。然后从云端手动调用`git pull`以获取最新的提交。

（*不确定这个答案*）如果你可以从 Visual Studio 执行 shell 命令，你可以在你的 git repo 中添加一个钩子，以在 azure 上 ping 一个脚本，该脚本将自动执行拉取。我将此方法与 github 和 php 一起使用。nettuts+ 有一个很棒的视频解释它[http://net.tutsplus.com/tutorials/other/the-perfect-workflow-with-git-github-and-ssh/](http://net.tutsplus.com/tutorials/other/the-perfect-workflow-with-git-github-and-ssh/)

这里有一些关于 git hooks 的信息[http://git-scm.com/book/ch7-3.html](http://git-scm.com/book/ch7-3.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-23T17:30:09.787

我刚刚检查了一下，现在可以使用 VisualStudio.com 和 Git 进行部署。

# cuda - 有人知道 Nvidia 的 GPU 是大端还是小端？

> ID：15356622
> 
> 赞同：9
> 
> 时间：2013-03-12T08:40:59.890
> 
> 标签：cuda, nvidia

我需要在 GPU 上进行大量按位运算，但找不到有关 Nvidia 硬件是大端还是小端的任何信息。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-12T09:23:48.427

请参阅：[https ://devtalk.nvidia.com/default/topic/366773/cuda-programming-and-performance/endian-mode-of-the-device/post/2630674/#2630674](https://devtalk.nvidia.com/default/topic/366773/cuda-programming-and-performance/endian-mode-of-the-device/post/2630674/#2630674)

> 所有受支持的 CUDA 平台都使用 little-endian CPU，并且 cudaMemcpy() 可以在不知道数据格式的情况下将数据结构复制到设备，所以我假设 GPU 也是 little-endian。GPU 可能同时支持大端和小端执行（因为一些 CPU 也这样做）作为对未来 CUDA 平台大端的对冲。
> 
> 我的猜测是答案必须是“小端”或“两者”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2020-07-14T14:35:01.517

根据[CUDA 指南的硬件实现部分](https://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#hardware-implementation)，little-endian。

# android - 什么是蓝牙文件接收位置

> ID：15356625
> 
> 赞同：0
> 
> 时间：2013-03-12T08:41:03.373
> 
> 标签：android, bluetooth, file-transfer

我有两个应用程序。一个将传输一组文件，另一个将通过蓝牙接收。本次转账成功。我可以通过文件资源管理器查看文件。
现在，我想通过我的应用阅读它们。我已经看到根据您的设备收到的位置更改。它并不总是下载\蓝牙。
所以，

*   我如何知道接收文件的路径？

*   我可以更改特定发件人应用程序或整体的默认路径吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:58:38.093

您需要自己管理蓝牙连接。遵循[http://developer.android.com/guide/topics/connectivity/bluetooth.html中给出的指南](http://developer.android.com/guide/topics/connectivity/bluetooth.html)

至于更改默认蓝牙应用程序的路径并不容易。一些 OEM 可能会暴露这一点，而其他 OEM 可能不会。因此，让您的应用程序在所有设备上运行的最佳方法是获取您自己的字节流并将其写入您的位置。

# c# - 在 Visual Studio 中使用 NLog 设置具有多个项目的 C# 解决方案

> ID：15356626
> 
> 赞同：12
> 
> 时间：2013-03-12T08:41:08.077
> 
> 标签：c#, visual-studio-2012, dll, project, nlog

我在 Visual Studio 2012 中的解决方案目前包含两个项目：

*   动态链接库
*   WPF 应用程序（需要 DLL 的方法）

DLL 和 WPF 应用程序都`NLog`用于日志记录。目前，每个项目都包含`NLog`DLL 本身。

这是我不明白的：

1.  我似乎没有必要`NLog`在每个项目中包含相同的 DLL。
2.  然而，DLL 应该可以在其他解决方案中重复使用，即，`NLog`DLL 必须以某种方式包含在 DLL 项目中。

设置 Visual Studio 解决方案和/或项目的适当方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T08:45:21.293

好吧，您在使用它的所有项目中都需要该 DLL，并且您肯定需要将它与可执行文件的二进制文件（在您的情况下为 WPF 应用程序）一起部署，以便可以在运行时找到和使用它。

我在所有项目中倾向于做的是围绕日志引擎创建一个包装器，这样我就不需要引用和依赖特定的第三方日志 API，如 Log4Net 或 NLog，所以我在任何地方都使用我的包装器日志记录类，然后我仅在包装类的项目和可执行项目中引用日志记录程序集，以将程序集部署到 bin 文件夹。

希望这可以帮助 ;-）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-16T06:04:08.573

如果您的 DLL 只是您计划在各个项目之间共享的核心库，则将 NLog 引用和包装器代码添加到该库可能是明智之举，然后确保任何消费者应用程序（例如您的 WPF 项目）具有 NLog .config 文件与之关联。

由于您使用的是 VS2012，我假设您也很可能使用 .NET 4.5，它允许您利用新的调用者信息属性。我为基本的 NLog 包装器编写了以下代码，并相信它在效率（不使用 StackTrace）和可用性之间取得了完美的平衡。

```
using System;
using System.Runtime.CompilerServices;
using NLog;

namespace ProjectName.Core.Utilities
{
    /// <summary>
    /// Generic NLog wrapper.
    /// </summary>
    public static class Logger
    {
        /// <summary>
        /// Gets or sets the enabled status of the logger.
        /// </summary>
        public static bool Enabled
        {
            get { return LogManager.IsLoggingEnabled(); }
            set
            {
                if (value)
                {                    
                    while (!Enabled) LogManager.EnableLogging();
                }
                else
                {
                    while (Enabled) LogManager.DisableLogging();
                }
            }
        }

        /// <summary>
        /// Writes the diagnostic message at the Trace level.
        /// </summary>
        /// <param name="message"></param>
        /// <param name="exception"></param>
        /// <param name="callerPath"></param>
        /// <param name="callerMember"></param>
        /// <param name="callerLine"></param>
        public static void Trace(string message, Exception exception = null,
            [CallerFilePath] string callerPath = "",
            [CallerMemberName] string callerMember = "",
            [CallerLineNumber] int callerLine = 0)
        {
            Log(LogLevel.Trace, message, exception, callerPath, callerMember, callerLine);
        }

        /// <summary>
        /// Writes the diagnostic message at the Debug level.
        /// </summary>
        /// <param name="message"></param>
        /// <param name="exception"></param>
        /// <param name="callerPath"></param>
        /// <param name="callerMember"></param>
        /// <param name="callerLine"></param>
        public static void Debug(string message, Exception exception = null,
            [CallerFilePathAttribute] string callerPath = "",
            [CallerMemberName] string callerMember = "",
            [CallerLineNumber] int callerLine = 0)
        {
            Log(LogLevel.Debug, message, exception, callerPath, callerMember, callerLine);
        }

        /// <summary>
        /// Writes the diagnostic message at the Info level.
        /// </summary>
        /// <param name="message"></param>
        /// <param name="exception"></param>
        /// <param name="callerPath"></param>
        /// <param name="callerMember"></param>
        /// <param name="callerLine"></param>
        public static void Info(string message, Exception exception = null,
            [CallerFilePathAttribute] string callerPath = "",
            [CallerMemberName] string callerMember = "",
            [CallerLineNumber] int callerLine = 0)
        {
            Log(LogLevel.Info, message, exception, callerPath, callerMember, callerLine);
        }

        /// <summary>
        /// Writes the diagnostic message at the Warn level.
        /// </summary>
        /// <param name="message"></param>
        /// <param name="exception"></param>
        /// <param name="callerPath"></param>
        /// <param name="callerMember"></param>
        /// <param name="callerLine"></param>
        public static void Warn(string message, Exception exception = null,
            [CallerFilePathAttribute] string callerPath = "",
            [CallerMemberName] string callerMember = "",
            [CallerLineNumber] int callerLine = 0)
        {
            Log(LogLevel.Warn, message, exception, callerPath, callerMember, callerLine);
        }

        /// <summary>
        /// Writes the diagnostic message at the Error level.
        /// </summary>
        /// <param name="message"></param>
        /// <param name="exception"></param>
        /// <param name="callerPath"></param>
        /// <param name="callerMember"></param>
        /// <param name="callerLine"></param>
        public static void Error(string message, Exception exception = null,
            [CallerFilePathAttribute] string callerPath = "",
            [CallerMemberName] string callerMember = "",
            [CallerLineNumber] int callerLine = 0)
        {
            Log(LogLevel.Error, message, exception, callerPath, callerMember, callerLine);
        }

        /// <summary>
        /// Writes the diagnostic message at the Fatal level.
        /// </summary>
        /// <param name="message"></param>
        /// <param name="exception"></param>
        /// <param name="callerPath"></param>
        /// <param name="callerMember"></param>
        /// <param name="callerLine"></param>
        public static void Fatal(string message, Exception exception = null,
            [CallerFilePathAttribute] string callerPath = "",
            [CallerMemberName] string callerMember = "",
            [CallerLineNumber] int callerLine = 0)
        {            
            Log(LogLevel.Fatal, message, exception, callerPath, callerMember, callerLine);
        }

        /// <summary>
        /// Writes the specified diagnostic message.
        /// </summary>
        /// <param name="level"></param>
        /// <param name="message"></param>
        /// <param name="exception"></param>
        /// <param name="callerPath"></param>
        /// <param name="callerMember"></param>
        /// <param name="callerLine"></param>
        private static void Log(LogLevel level, string message, Exception exception = null, string callerPath = "", string callerMember = "", int callerLine = 0)
        {
            // get the source-file-specific logger
            var logger = LogManager.GetLogger(callerPath);

            // quit processing any further if not enabled for the requested logging level
            if (!logger.IsEnabled(level)) return;

            // log the event with caller information bound to it
            var logEvent = new LogEventInfo(level, callerPath, message) {Exception = exception};
            logEvent.Properties.Add("callerpath", callerPath);
            logEvent.Properties.Add("callermember", callerMember);
            logEvent.Properties.Add("callerline", callerLine);
            logger.Log(logEvent);
        }
    }
} 
```

然后尝试将其放入 NLog.config 中目标之一的布局字段中，以获取详细的调用者信息。

```
${event-context:item=callerpath}:${event-context:item=callermember}(${event-context:item=callerline}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T09:06:12.940

你最好抽象出你的日志机制的使用。我在[这篇博](http://ludwigstuyck.wordpress.com/2013/03/04/avoiding-the-use-of-static-variables-when-using-log4net/)文中对此进行了描述，它是关于 log4net 的，但无论您使用什么框架，它的原理都是一样的。在任何情况下，您在使用它的每个项目中都需要日志程序集，但是通过抽象它很容易用其他东西替换它（例如在测试时）。日志记录是基础设施，因此您可以将接口和具体实现放在基础设施项目中，并从您要记录的项目中引用该接口和具体实现。

# android - 如何创建一个舞台惊险插件

> ID：15356629
> 
> 赞同：4
> 
> 时间：2013-03-12T08:41:11.543
> 
> 标签：android, android-ndk, android-mediaplayer, android-framework, stagefright

我的任务涉及将视频解码器集成到`Stagefright`（Android 的多媒体框架）中。我搜索并发现以下有关为以下内容创建新插件的信息`Stagefright`：

**要添加对新格式的支持，您需要：**

*   如果容器还不支持，开发一个新的 Extractor 类。

*   开发一个新的解码器类，实现`StageFright`核心读取数据所需的接口。

*   将要读取的文件的 mime 类型与数组中`OMXCodec.cpp`文件中的新解码器相关联。`kDecoderInfo`

```
 static const CodecInfo kDecoderInfo[] = {  
        {MEDIA_MIMETYPE_AUDIO_AAC, "OMX.TI.AAC.decode"},
        {MEDIA_MIMETYPE_AUDIO_AAC, "AACDecoder"},
    }; 
```

以上数据都是我在网上能查到的。现在我有一个简单的应用程序，它将一个文件作为输入，并使用 android 中的本机 API 将其呈现在屏幕上。谁能告诉我如何进一步进行。所有这些和其他内容从哪里`OMXCodec.cpp`出现，我应该将它们放在我的项目的哪个目录中。请提供有关相同的解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T13:39:59.710

从您的问题来看，您似乎正在查看特定于`Ice-Cream Sandwich`Android 或更早版本的推荐。首先你应该清楚的是android ie 的版本`Ice-Cream Sandwich`或之前或`JellyBean`之后的版本。编解码器的集成在不同版本的 Android 中**是不同的。**

我已经评论了您的其他特定于`JellyBean`和以后的问题（参考：[Android：如何将解码器集成到多媒体框架](https://stackoverflow.com/questions/15334509/android-how-to-integrate-a-decoder-to-multimedia-framework)）

如果您想在`Ice-Cream Sandwich`其中或之前集成您的编解码器，您的问题中已经提供了这些步骤。除了将解码器添加到`kDecoderInfo`列表中之外，您可能还想设置某些怪癖，如此[处所示](http://androidxref.com/4.0.4/xref/frameworks/base/media/libstagefright/OMXCodec.cpp#322)。

关于 的问题，您可以在in case of和in case of 中`OMXCodec.cpp`找到该文件 。`frameworks/base/media/libstagefright/``Ice-Cream Sandwich``frameworks/av/media/libstagefright/``JellyBean`

如果您已按照所有步骤将视频解码器集成到`Stagefright`框架中，那么最简单的测试将是执行以下操作：

1.  将媒体文件复制到 SD 卡中

2.  在`OMXCodec.cpp`中，通过删除此语句中的注释来启用日志`//#define LOG_NDEBUG 0`并在目录中运行 a `mm`。将重建复制`libstagefright.so`到`/system/lib`您的设备上。

3.  启用`logcat`并开始捕获日志。

4.  转到图库，选择您的文件并允许标准播放器播放您的文件。

5.  如果播放器`OMX`通过搜索您的组件名称选择了您的组件，请检查您的日志文件。如果找到，则您的编解码器集成`Stagefright`成功。否则，您将不得不调试并找出问题所在。

**后记：**

1.  根据您的查询，我认为您不熟悉 Android 资源。请参阅[androidxref](http://androidxref.com/)站点以熟悉`AOSP`发行版。

2.  除非您计划支持新的媒体文件格式，否则您不需要支持`Extractor`类。`MediaExtractor`抽象文件格式解析器并帮助解复用媒体文件中的不同轨道。

我希望有了这些信息，您应该能够在 Android 中集成和运行您的编解码器。

# iphone - 如何在延迟加载中加载更多图像

> ID：15356637
> 
> 赞同：0
> 
> 时间：2013-03-12T08:42:11.330
> 
> 标签：iphone, ios, lazy-loading

在 mu UITable 视图中，我正在显示来自服务器的图像..为此我正在使用延迟加载。当行在屏幕上时，我可以加载图像。如何增加加载的图像数量。

喜欢-第一次可以看到 3 个表格单元格，并且这些单元格上的图像会延迟 2 秒加载。如何同时加载接下来 3 行的图像？

我正在使用下面的函数来加载图像

```
- (void)loadImagesForOnscreenRows
  {
    if ([imageArray count] > 0)
    {
    NSArray *visiblePaths = [tableView indexPathsForVisibleRows];
    for (NSIndexPath *indexPath in visiblePaths)
    {
        AppRecord *appRecord = [dataArray objectAtIndex:indexPath.row];

        if (!appRecord.appIcon) // avoiding the imagen download if already has an image
        {
            [self startIconDownload:appRecord forIndexPath:indexPath];
          }
        }
      }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-09T12:39:36.380

# 你做事的方式

您可以通过在后台下载图像来做到这一点，当它们完成时，您可以发布`NSNotification`一个方法来重新加载`tableView`。但是在下载图像时，您必须向用户显示加载视图或其他内容，以告诉他正在下载图像。

# 建议

我不建议你这样做，最好的方法是在后台独立下载它们，`SDWebImage`并让你的`tableView`. 下载图像时，您会显示默认图像（占位符），下载图像后，此功能会将其设置在需要的位置：

*   [SDWebImage](https://github.com/rs/SDWebImage)

您只需要到`#import <SDWebImage/UIImageView+WebCache.h>`您的项目，您还可以在下载图像时使用以下代码定义占位符：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
        static NSString *CellIdentifier;
        CustomCell *cell = [tableview dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

        MyObject *object = (MyObject *)[self.list.array objectAtIndex:indexPath.row];

        //Here is where you set your image URL and it's placeholder
        [cell.imageView setImageWithURL:[NSURL URLWithString:@"http://www.domain.com/path/to/image.jpg"]
                       placeholderImage:[UIImage imageNamed:@"placeholder.png"]];

        return cell;
} 
```

它还缓存下载的图像并为您提供出色的性能。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-12T09:04:19.870

为什么要使用此代码，您只需将其更改为低于键值，它就可以完美地处理不受限制的图像。

```
kIDStr     = @"id";  
kNameStr   = @"im:name";  
kImageStr  = @"im:image";  
kArtistStr = @"im:artist";  
kEntryStr  = @"entry"; 
```

# cakephp - Cake 网站在将其移动到我的本地主机后找不到图像或 CSS 文件？

> ID：15356640
> 
> 赞同：3
> 
> 时间：2013-03-12T08:42:19.267
> 
> 标签：cakephp, cakephp-1.3

我正在使用 cake1.3.5

我最近将一个实时工作站点移到了我的本地主机中：

![在此处输入图像描述](../Images/1e52d45bf7baaa23365c95ede6bd25b9.png)

我将 config.php 设置为我的本地数据库，但是当我进入该站点时，我看到了这个：

![在此处输入图像描述](../Images/2919d4d0fec3a6258672a47dc5442514.png)

我是否缺少任何其他步骤（关于文件路径或其他内容）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T09:49:04.677

Cake 将其所有调用定向到 webroot 文件夹（默认情况下称为 URL 重写）。这是通过文档根目录中的 .htaccess 文件实现的，该文件必须具有（用于 URL 重写工作）

```
<IfModule mod_rewrite.c>
    RewriteEngine on
    RewriteRule    ^$    webroot/    [L]
    RewriteRule    (.*) webroot/$1    [L]
</IfModule> 
```

webroot 文件夹中的 .htaccess 文件应包含

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d   // this line traps requests for directory
    RewriteCond %{REQUEST_FILENAME} !-f   // this line traps requests for file names
    RewriteRule ^(.*)$ index.php?/$1 [QSA,L]
</IfModule> 
```

这两行`RewriteCond %{REQUEST_FILENAME} !-d`&`RewriteCond %{REQUEST_FILENAME} !-f`在解析目录和文件名的请求时是必不可少的。

该行`RewriteRule ^(.*)$ index.php?/$1 [QSA,L]`处理任何不是文件或目录的东西。

1.  检查 mod_rewrite 是否启用。
2.  必须有两个 .htaccess 文件，一个在根文件夹中，另一个在 webroot 文件夹中。这两个 .htaccess 文件的内容必须不同。

您可能想查看[URL 重写](http://book.cakephp.org/2.0/en/installation/url-rewriting.html)

您可以[从核心配置中关闭 URL 重写](http://book.cakephp.org/2.0/en/development/configuration.html#core-configuration-baseurl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-05T21:17:07.547

经历了同样的场景，事实证明 localhost 无法识别短样式标签只有在服务器上的 php.ini 配置文件中启用它们时才可用。

当我将标签更改为所有页面时，所有页面都正常显示。

# python - 如何使用 xml.etree.ElementTree 编写 XML 声明

> ID：15356641
> 
> 赞同：85
> 
> 时间：2013-03-12T08:42:21.720
> 
> 标签：python, xml, elementtree

我正在使用 Python 在 Python 中生成 XML 文档[`ElementTree`](https://docs.python.org/2/library/xml.etree.elementtree.html)，但是在转换为纯文本时，该`tostring`函数不包含[XML 声明。](http://xmlwriter.net/xml_guide/xml_declaration.shtml)

```
from xml.etree.ElementTree import Element, tostring

document = Element('outer')
node = SubElement(document, 'inner')
node.NewValue = 1
print tostring(document)  # Outputs "<outer><inner /></outer>" 
```

我需要我的字符串包含以下 XML 声明：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?> 
```

但是，似乎没有任何记录在案的方法可以做到这一点。

是否有适当的方法来呈现 XML 声明`ElementTree`？

* * *

## 回答 #1

> 赞同：131
> 
> 时间：2013-03-12T09:36:37.797

我惊讶地发现似乎没有办法使用`ElementTree.tostring()`. 但是，您可以使用`ElementTree.ElementTree.write()`将 XML 文档写入假文件：

```
from io import BytesIO
from xml.etree import ElementTree as ET

document = ET.Element('outer')
node = ET.SubElement(document, 'inner')
et = ET.ElementTree(document)

f = BytesIO()
et.write(f, encoding='utf-8', xml_declaration=True) 
print(f.getvalue())  # your XML file, encoded as UTF-8 
```

看到[这个问题](https://stackoverflow.com/questions/4997848/emitting-namespace-specifications-with-elementtree-in-python)。即使那样，我认为如果不自己编写前缀，您也无法获得“独立”属性。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-03-12T08:50:45.607

我会使用 lxml（见[http://lxml.de/api.html](http://lxml.de/api.html)）。

那么你就可以：

```
from lxml import etree
document = etree.Element('outer')
node = etree.SubElement(document, 'inner')
print(etree.tostring(document, xml_declaration=True)) 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2017-02-27T21:25:42.440

[如果包含`encoding='utf8'`，您将获得一个 XML 标头](https://bugs.launchpad.net/lxml/+bug/1470809)：

> xml.etree.ElementTree.tostring 使用 encoding='utf8' 编写 XML 编码声明

示例 Python 代码（适用于 Python 2 和 3）：

```
import xml.etree.ElementTree as ElementTree

tree = ElementTree.ElementTree(
    ElementTree.fromstring('<xml><test>123</test></xml>')
)
root = tree.getroot()

print('without:')
print(ElementTree.tostring(root, method='xml'))
print('')
print('with:')
print(ElementTree.tostring(root, encoding='utf8', method='xml')) 
```

Python 2 输出：

```
$ python2 example.py
without:
<xml><test>123</test></xml>

with:
<?xml version='1.0' encoding='utf8'?>
<xml><test>123</test></xml> 
```

在 Python 3 中，您会注意到返回指示字节文字[的`b`前缀](https://stackoverflow.com/questions/6269765/what-does-the-b-character-do-in-front-of-a-string-literal)（就像 Python 2 一样）：

```
$ python3 example.py
without:
b'<xml><test>123</test></xml>'

with:
b"<?xml version='1.0' encoding='utf8'?>\n<xml><test>123</test></xml>" 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2020-10-16T19:49:47.870

## xml_declaration 参数

> 是否有在 ElementTree 中呈现 XML 声明的正确方法？

是的，并且不需要使用`.tostring`函数。根据[ElementTree Documentation](https://docs.python.org/3.2/library/xml.etree.elementtree.html#module-xml.etree.ElementTree)，您应该**创建一个 ElementTree 对象**，创建元素和子元素，**设置树的根**，最后`xml_declaration`在函数中使用参数`.write`，因此声明行包含在输出文件中。

你可以这样做：

```
import xml.etree.ElementTree as ET

tree = ET.ElementTree("tree")

document = ET.Element("outer")
node1 = ET.SubElement(document, "inner")
node1.text = "text"

tree._setroot(document)
tree.write("./output.xml", encoding = "UTF-8", xml_declaration = True) 
```

输出文件是：

```
<?xml version='1.0' encoding='UTF-8'?>
<outer><inner>text</inner></outer> 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-01-29T06:22:05.867

我最近遇到这个问题，经过一些代码挖掘，我发现下面的代码片段是函数的定义`ElementTree.write`

```
def write(self, file, encoding="us-ascii"):
    assert self._root is not None
    if not hasattr(file, "write"):
        file = open(file, "wb")
    if not encoding:
        encoding = "us-ascii"
    elif encoding != "utf-8" and encoding != "us-ascii":
        file.write("<?xml version='1.0' encoding='%s'?>\n" % 
     encoding)
    self._write(file, self._root, encoding, {}) 
```

所以答案是，如果您需要将 XML 标头写入文件，请设置除or以外的`encoding`参数，例如`utf-8``us-ascii``UTF-8`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-23T05:35:40.123

使用包的最小工作示例`ElementTree`：

```
import xml.etree.ElementTree as ET

document = ET.Element('outer')
node = ET.SubElement(document, 'inner')
node.text = '1'
res = ET.tostring(document, encoding='utf8', method='xml').decode()
print(res) 
```

输出是：

```
<?xml version='1.0' encoding='utf8'?>
<outer><inner>1</inner></outer> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-10-16T08:50:08.067

**简单的**

Python 2 和 3 的示例（**编码**参数必须为**utf8**）：

```
import xml.etree.ElementTree as ElementTree

tree = ElementTree.ElementTree(ElementTree.fromstring('<xml><test>123</test></xml>'))
root = tree.getroot()
print(ElementTree.tostring(root, encoding='utf8', method='xml')) 
```

从 Python 3.8 开始，这些东西有**xml_declaration**参数：

> 3.8 版中的新功能： xml_declaration 和 default_namespace 参数。

> xml.etree.ElementTree.tostring(element, encoding="us-ascii", method="xml", *, xml_declaration=None, default_namespace=None, short_empty_elements=True) 生成 XML 元素的字符串表示，包括所有子元素. element 是一个 Element 实例。encoding 1 是输出编码（默认为 US-ASCII）。使用 encoding="unicode" 生成 Unicode 字符串（否则生成字节串）。方法是“xml”、“html”或“text”（默认为“xml”）。xml_declaration、default_namespace 和 short_empty_elements 与 ElementTree.write() 中的含义相同。返回包含 XML 数据的（可选）编码字符串。

Python 3.8 及更高版本的示例：

```
import xml.etree.ElementTree as ElementTree

tree = ElementTree.ElementTree(ElementTree.fromstring('<xml><test>123</test></xml>'))
root = tree.getroot()
print(ElementTree.tostring(root, encoding='unicode', method='xml', xml_declaration=True)) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-02-06T13:54:31.443

另一个非常简单的选项是将所需的标头连接到 xml 字符串，如下所示：

```
xml = (bytes('<?xml version="1.0" encoding="UTF-8"?>\n', encoding='utf-8') + ET.tostring(root))
xml = xml.decode('utf-8')
with open('invoice.xml', 'w+') as f:
    f.write(xml) 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-23T11:01:04.267

我会使用[ET](https://docs.python.org/2/library/xml.etree.elementtree.html)：

```
try:
    from lxml import etree
    print("running with lxml.etree")
except ImportError:
    try:
        # Python 2.5
        import xml.etree.cElementTree as etree
        print("running with cElementTree on Python 2.5+")
    except ImportError:
        try:
            # Python 2.5
            import xml.etree.ElementTree as etree
            print("running with ElementTree on Python 2.5+")
        except ImportError:
            try:
                # normal cElementTree install
                import cElementTree as etree
                print("running with cElementTree")
            except ImportError:
               try:
                   # normal ElementTree install
                   import elementtree.ElementTree as etree
                   print("running with ElementTree")
               except ImportError:
                   print("Failed to import ElementTree from any known place")

document = etree.Element('outer')
node = etree.SubElement(document, 'inner')
print(etree.tostring(document, encoding='UTF-8', xml_declaration=True)) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-03-09T15:36:11.330

如果您只想打印，则此方法有效。当我尝试将其发送到文件时出现错误...

```
import xml.dom.minidom as minidom
import xml.etree.ElementTree as ET
from xml.etree.ElementTree import Element, SubElement, Comment, tostring

def prettify(elem):
    rough_string = ET.tostring(elem, 'utf-8')
    reparsed = minidom.parseString(rough_string)
    return reparsed.toprettyxml(indent="  ") 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-11-09T15:04:28.837

# 在声明中包含“独立”

我没有找到`standalone`在文档中添加参数的任何替代方法，因此我调整了`ET.tosting`函数以将其作为参数。

```
from xml.etree import ElementTree as ET

# Sample
document = ET.Element('outer')
node = ET.SubElement(document, 'inner')
et = ET.ElementTree(document)

 # Function that you need   
 def tostring(element, declaration, encoding=None, method=None,):
     class dummy:
         pass
     data = []
     data.append(declaration+"\n")
     file = dummy()
     file.write = data.append
     ET.ElementTree(element).write(file, encoding, method=method)
     return "".join(data)
# Working example
xdec = """<?xml version="1.0" encoding="UTF-8" standalone="no" ?>"""    
xml = tostring(document, encoding='utf-8', declaration=xdec) 
```

# c# - 初始化动态类型的类

> ID：15356645
> 
> 赞同：0
> 
> 时间：2013-03-12T08:42:40.740
> 
> 标签：c#, c#-4.0, dynamic, reflection, activator

我有一个方法，我需要根据用户设置动态更改使用的类，如下所示，类 dEnvelope 也需要初始化其属性以填充所有子类并以相同的方式使用，所有这些不同的 Year 类具有确切的结构但是业务逻辑在内部方法上有所不同

```
 dynamic dEnvelope;

    if (UserYear==2013)
        dEnvelope = new Years.Y2013.DataEnvelope();
    else
        dEnvelope = new Years.Y2012.DataEnvelope();

    dEnvelope.InnerClass= Activator.CreateInstance(Type.GetType(dEnvelope.InnerClass)); 
```

但是，执行 Activator.CreateInstance 行时收到错误消息

> {"值不能为空。\r\n参数名称: typeName"}

我是否遗漏了有关动态类型使用的一些信息？有没有更好的方法来动态选择要在运行时使用的正确类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:49:53.420

我认为您应该首先通过构造函数初始化“年”类的变量，然后您应该尝试访问该方法。IE `dEnvelope = new Years().Y2013.DataEnvelope();`

并且请显示您的代码片段以便更好地理解。

# c# - 找不到 Asp.net MVC 4 Url 资源

> ID：15356646
> 
> 赞同：1
> 
> 时间：2013-03-12T08:42:46.770
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4

在我的索引页面中，我正在使用以下内容生成 url

```
@foreach(var c in ViewBag.cities)
{
   <li>@Html.ActionLink((string)c.CityName,"somepage",new{city=c.CityName, id=c.Id})</li>
} 
```

它为每个城市生成以下格式的网址

```
localhost:55055/1/city1
localhost:55055/2/city2
... 
```

其中 1,2 是 Id 和 city1, city2 是 CityName

我已将路线配置为

```
routes.MapRoute(
            name: "CityRoute",
            url: "{id}/{city}",
            defaults: new { controller = "Home", action = "somepage", id = UrlParameter.Optional, city = UrlParameter.Optional }
            ); 
```

Home Controller中的`somepage`action方法：

```
public string somepage(int id, string city)
{
  return city + " " + id;
} 
```

即使我试过这个

```
public string somepage()
{
   return "Hello";
} 
```

但它导致`Resource cannot be found`

我尝试在其中放置`sompage`永远不会被击中的断点。

任何建议

**更新**

正如@KD 在下面的评论中指出的那样，我更改了路线顺序并将上述规则置于所有规则之上。我也改变了方法

```
 public ActionResult somepage(int id=0, string city="")
 {
    return Content(city + " " + id);
 } 
```

现在行为改变了，默认规则

```
routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        ); 
```

不用于普通索引页。相反，使用这种用法是因为方法中的断点`somepage`被命中，如果我把它放在`http://localhost:55055/2/cityname`浏览器中，页面会显示 id 和 cityname。但是现在默认路由不用于应用程序主页`http://localhost:55055/`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T09:18:22.117

您的新路线的模式和默认路线的模式几乎相同，因此它总是会产生冲突以匹配这些路线..将您的路线更改为跟随

```
routes.MapRoute(
            name: "CityRoute",
            url: "CitySearch/{id}/{city}",
            defaults: new { controller = "Home", action = "somepage", id = UrlParameter.Optional, city = UrlParameter.Optional }
            ); 
```

即为您的模式添加一些前缀，以便它可以轻松识别..比如“CitySearch”，然后在为其提供操作链接的同时提及您的路线名称..

或者，如果您不想为其添加前缀，请执行以下操作，它会像魅力一样工作..

为您的 CityRoute 添加一个 Route Constraint for Id，它将检查 ID 字段是否为整数。对于普通 URL，它将返回 false，因此您的默认路由将被评估......试试这个......

```
routes.MapRoute(
            name: "CityRoute",
            url: "{id}/{city}",
            defaults: new { controller = "Home", action = "somepage", id = UrlParameter.Optional, city = UrlParameter.Optional },
            constraints: new {id = @"\d+"}
            ); 
```

这是正则表达式约束。把这条路线放在顶部并检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:46:01.783

由于您尚未定义 Action 它不会被调用，因此错误即将到来

尝试这个，

```
public ActionResult somepage(int id, string city)
    {
        return Content(city + " " + id);
    } 
```

# php - Twig 和 Xajax 实现

> ID：15356647
> 
> 赞同：0
> 
> 时间：2013-03-12T08:42:49.673
> 
> 标签：php, twig, xajax

我有麻烦了。我需要用 Twig 重新制作一个网站。但我无法实现我的 xajax 库工作。在 Twig 之前它工作得很好，但现在我认为我调用 xajax 变量不正确。所以我会展示一些代码。我正在做登录页面。

php头文件：

```
global $command;
global $xajax; 
<!DOCTYPE html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>site name :: </title>
$xajax->printJavascript("/library/xajax"); 
```

树枝头（header.tpl）：

```
{{command}} //this should be global variable
{{xajax}}   //this should be global variable
<html>
  <head>   

        <script type="text/javascript" src="/library/jquery/jquery-1.7.1.min.js"></script>   

        {{ xajax.printJavascript("/library/xajax") }} //this should be something like this in php header -> $xajax->printJavascript("/library/xajax");

        <title> :: {{pageName}} :: Marius page</title>          
         <link rel="stylesheet" type="text/css" href="/includes/ui/default/css/styles.css"> 

  </head>
  <body> 
```

那是我的页面控制器：

```
try {
  // specify where to look for templates
  $loader = new Twig_Loader_Filesystem('includes/ui/default/');

  // initialize Twig environment
  $twig = new Twig_Environment($loader);  

  $twig->addGlobal('xajax', $xajax);

  // load template
  $template = $twig->loadTemplate('login.tpl');

  if (!isset($_SESSION['currentuser'])) {
    if ($_SERVER['REQUEST_URI'] != '/login') {
        header("Location: /login"); 
    } 
}

  $app = $_SERVER['REQUEST_URI'];
  echo $template->render(array(      
    'url' => $app ,
    'pageName' => 'Login',
  ));

} catch (Exception $e) {
  die ('ERROR: ' . $e->getMessage());
} 
```

这是登录视图文件，和php和Twig一样，只是php括号里调用了两个全局变量，这个在login.tpl

```
{{command}} //this should be global variable global $command
{{xajax}}   //this should be global variable global $xajax

{% include 'include/header.tpl' %}

    <header>

        <h1>Wellcome,</h1>
        <h3>this is Marius <em>Twig</em> page!</h3>

    </header>
  {% include 'include/navigation.tpl' %}
  <h2>Login</h2>

  <form action="" id="loginform">

                    <p>Please enter your login information.</p>

                    <!-- TEXTBOXES -->
                    <label>Username</label><br />
                    <input name="username" type="text" class="text large required" id="username" />
                    <br />

                    <div class="clearfix">&nbsp;</div

                    ><label>Password</label><br />
                    <input name="password" type="password" class="text large required" id="password" />
                     <br />

                     <div class="clearfix">&nbsp;</div>

                <p>
                    <input name="btnLogin" type="button" class="submit" id="btnLogin" value="LOGIN" onclick=" xajax_login(xajax.getFormValues('loginform'));" />

                    <input type="checkbox" class="checkbox" id="cbdemo2" />
                  <label for="cbdemo2">Remember Me</label>
                  <div id="loginresult" style="text-align:center; color:#000; text-shadow: #FFF 1px 1px 1px"></div>

              </p>
            </form>

  </body>
</html> 
```

现在，当我单击登录按钮时，浏览器控制台给了我一个错误：

```
ReferenceError: xajax_login is not defined
xajax_login(xajax.getFormValues('loginform')); 
```

所以我认为调用 xajax 库有问题，我对这个模板引擎（TWIG）感到困惑..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T15:12:32.893

在您的页面控制器中

$twig->addGlobal('xajaxjs', $xajax->printJavascript("/library/xajax"));

在你的标题模板中

{{xajaxjs}}

# python - Python 的字符串 .format() 可以对不受信任的格式字符串安全吗？

> ID：15356649
> 
> 赞同：25
> 
> 时间：2013-03-12T08:42:55.100
> 
> 标签：python, security

我正在开发一个网络应用程序，用户将能够提供服务器然后将变量替换为的字符串。

最好我想使用[PEP 3101](https://www.python.org/dev/peps/pep-3101/) `format()`语法，并且我正在研究覆盖方法的可行性，`Formatter`以使其对不受信任的输入安全。

以下是我可以看到的风险`.format()`：

*   填充可让您指定任意长度，因此`'{:>9999999999}'.format(..)`可能会使服务器内存不足并成为 DOS。我需要禁用它。
*   Format 允许您访问对象内部的字段，这很有用，但令人毛骨悚然的是您可以访问 dunder 变量并开始钻研标准库的一些内容。不知道哪里可能`getattr()`有副作用或返回一些秘密。我会通过覆盖将属性/索引访问列入白名单`get_field()`。
*   自然，我需要捕获一些异常。

我的假设是：

*   传统的 C 格式字符串漏洞都不适用于 Python，因为指定参数是对集合的边界检查访问，而不是直接从线程的堆栈中弹出。
*   我正在使用的 Web 框架转义了替换到页面模板中的每个变量，只要它是输出前的最后一站，我就可以安全地避免因反转义而出现的跨站点脚本攻击。

你觉得呢？你有没有什么想法？可能的？不可能的？只是不明智？

* * *

编辑：如果您不过滤掉 dunder 变量访问，Armin Ronacher 概述了一个令人讨厌的信息泄漏，但似乎认为安全`format()`是可行的：

```
{local_foo.__init__.__globals__[secret_global]} 
```

[小心 Python 的新型字符串格式 阿明·罗纳赫的思想和著作](http://lucumr.pocoo.org/2016/12/29/careful-with-str-format/)

*就个人而言，我实际上并没有`format()`在我的产品中走不受信任的路线，而是为了完整性而进行更新*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-13T16:14:56.607

好本能。是的，能够提供任意格式字符串的攻击者是 python 下的一个漏洞。

*   拒绝服务可能是最容易解决的问题。在这种情况下，限制字符串的大小或字符串中的运算符数量将缓解此问题。应该有一个设置，即没有合理的用户需要生成一个具有比 X 更多变量的字符串，并且这个计算量没有被 DoS 攻击利用的风险。
*   能够访问对象内的属性可能很危险。但是，我认为`Object`父类没有任何有用的信息。提供给格式的对象必须包含一些敏感的东西。在任何情况下，这种类型的符号都可以用**正则表达式**来限制。
*   如果格式字符串是用户提供的，那么用户可能需要知道错误消息以进行调试。但是，错误消息可能包含敏感信息，例如本地路径或类名。确保限制攻击者可以获得的信息。

查看[python 格式字符串规范](http://docs.python.org/2/library/string.html#formatspec)并禁止您不希望用户使用正则表达式的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-04T11:36:33.187

这个简单的格式化程序覆盖阻止用户访问属性。它仍然允许格式化和转换类型。

```
from string import Formatter
class SafeFormatter(Formatter):
        def get_field(self, field_name, args, kwargs):
            if '.' in field_name or '[' in field_name:
                raise Exception('Invalid format string.')
            return super().get_field(field_name,args,kwargs)

form = SafeFormatter()
fname = form.format(format,num=1,id='hello') 
```

# javascript - 在 Osclass 中，无法调用 JavaScript 函数

> ID：15356651
> 
> 赞同：0
> 
> 时间：2013-03-12T08:42:56.927
> 
> 标签：javascript, osclass

在 OsClass 中，这是我的代码，来自 footer.php

```
<div id="footer">
    <div class="footer">
        <div id="footer_1" class="col">
            <h1>location</h1>
            <ul>
                <form action="<?php echo osc_base_url(true); ?>" method="get" class="search" name="locat">
                    <input type="hidden" name="page" value="search" />
                    <input type="hidden" id="sCity" name="sCity" value="" />
                    <li id="1" onclick="locat();"> mysore</li>
                    <li id="2" onclick="locat();">bhfgh</li>
                </form>
            </ul>
        </div>
    </div>
</div> 
```

JavaScript 是，（放置在同一页面中）

```
<script type="text/javascript">
    function locat()
    {
        var city = $(this).attr('id');
        alert(city);
    }   
</script> 
```

在这里，JS 功能不起作用。它给

```
Uncaught TypeError: object is not a function 
    onclick 
```

问题出在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:45:31.387

改变：

```
<li id="1" onclick="locat(this);"> mysore</li> 
```

和JS：

```
function locat(obj) {
    var city = $(obj).attr('id');
    alert(city);
} 
```

否则，您将`locat`在错误的上下文中执行（`window`而不是单击元素）。

但无论如何，这不是绑定事件的正确方法，因为您使用的是 jQuery。它可能是：

```
 <li class="city" id="1">mysore</li>
 <li class="city" id="2">bhfgh</li> 
```

和这个结构的 jQuery 代码：

```
$('.city').click(function() {
    var city = $(this).attr('id');
    alert(city);
}); 
```

会更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:45:38.790

从 onclick 属性运行的代码不会在其所在节点的上下文中触发，因此“this”在 locat 函数中未定义。

要修复它，您可以替换它：

```
<li id="1" onclick="locat();"> mysore</li> 
```

有了这个：

```
<li id="1" onclick="locat.call(this);"> mysore</li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:07:54.497

似乎您的`form`对象正在覆盖您的`locat`函数（至少就像在 Mac 上的 Safari 中那样） - 最后您尝试调用元素而不是您的函数。只需更改您的函数名称，它应该可以工作，除了其他一些事情。首先`this`不会是你想像的元素，它将是`window`对象，因为 onclick 中的函数在默认范围内被调用，而不是元素的上下文。第二件事是一个小建议——你不应该`{`从隐式分号插入的新行开始。

# python - Python Tkinter：文本字段输入命令

> ID：15356653
> 
> 赞同：2
> 
> 时间：2013-03-12T08:43:00.030
> 
> 标签：python, triggers, tkinter, enter

如果用户在文本字段中按 Enter，我如何像 FireonPress() 一样触发 FireonEnter()？

```
from Tkinter import *

class Application(Frame):
    def FireonEnter(self):
        echo 'Enter pressed';

    def FireonPress(self):
        echo 'Button pressed';

    def createWidgets(self):
        self.Select = Button(self)
        self.Select["text"] = "OK",
        self.Select["width"] = "10",
        self.Select["command"] = self.FireonPress           
        self.Select.grid() 

        self.outputbox = Text(self) 
        self.outputbox["width"] = "20",
        self.outputbox["height"] = "1",           
        self.outputbox.grid() 

    [...] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T09:15:47.090

你可以使用

```
 self.outputbox.bind('<Return>', self.FireonEnter) 
```

* * *

```
import Tkinter as tk

class Application(tk.Frame):
    def __init__(self, master=None):
        tk.Frame.__init__(self, master)
        self.createWidgets()

    def createWidgets(self):
        self.outputbox = tk.Text()
        self.outputbox["width"] = 20
        self.outputbox["height"] = 1
        self.outputbox.grid()
        self.outputbox.bind('<Return>', self.FireonEnter)

    def FireonEnter(self, event):
        print('Enter pressed')

root = tk.Tk()
app = Application(root)
root.mainloop() 
```

# jquery - 在 IE9 中使用 jquery-file-upload 时出现 415 错误（空媒体类型）

> ID：15356655
> 
> 赞同：0
> 
> 时间：2013-03-12T08:43:07.577
> 
> 标签：jquery, jsp

我在我的项目中使用 jquery-file-upload，它在 chrome 中运行良好。但在 IE 中，它返回 (415 - Unsupported Media Type)（信息：系统在 ...OwnFileAPI 类中找不到任何使用**空媒体类型**的方法。验证是否存在使用指定媒体类型的方法。）

这是代码片段：

查询：

```
$('#file-upload-form').fileupload({
  sequentialUploads : true,
  add : function(e, data) {
    ...
    data.submit();
  },
  submit : function(e, data) {
   ...
  },
  progress : function(e, data) {
    ...
  },
  fail : function(e, data) {
    ...
  },
  done : function(e, data) {
    ...
  }
}); 
```

JSP：

```
<form class="row-fluid" id="file-upload-form" method="post" enctype="multipart/form-data" action="<c:url value="/resources/api/user/files/own/csrfToken/"></c:url><wm:csrfToken/>" target="files-upload-target">
    <span class="btn fileinput-button" id="file-upload-btn">
        <strong><fmt:message key="files.action.upload"/></strong>
        <input type="file" id="file-uploader" name="ownFile" tabIndex="-1">
    </span>

</form> 
```

爪哇：

```
@CSRF
@Path(PathConst.OWN_FILE_API_CSRFTOKEN)
@POST
@Consumes(MediaType.MULTIPART_FORM_DATA)
@Produces(MediaType.TEXT_HTML)
public String upload(@PathParam("csrfToken") String csrfToken, InMultiPart inMP) {
    ......
} 
```

请提供一些解决此问题的指示... THX！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:13:38.557

如果我的假设是正确的，那么您可以在 ajax 请求的帮助下提交文件。通过 ajax 请求提交文件时，您必须分配请求标头，例如 content-type 和 content-disposition 标头，并且您还必须将文件的内容作为边界分隔值发送，就像普通表单提交的工作方式一样。

也可以参考[jQuery Ajax 文件上传](https://stackoverflow.com/questions/2320069/jquery-ajax-file-upload)

# html - ID和类之间的区别

> ID：15356660
> 
> 赞同：2
> 
> 时间：2013-03-12T08:43:30.023
> 
> 标签：html, css

我正在浏览[CSS :Class 和 ID](http://www.w3schools.com/css/css_id_class.asp)。当我尝试他们给出的例子时，我不会觉得他们之间有任何区别。

```
<!DOCTYPE html>
<html>
<head>
<style>
#para1
{
text-align:center;
color:red;
} 
</style>
</head>

<body>
<h1 id ="para1">Hai</h1>
<p id="para1">Hello World!</p>
<p>This paragraph is not affected by the style.</p>
</body>
</html> 
```

给我我希望的输出，其中说*id 选择器用于为单个唯一元素指定样式。*

我是否以错误的角度看待这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T08:44:30.913

一个*唯一标识*，另一个*分类*。

在第一种情况下，将两个事物称为同一事物是无稽之谈。

在第二种情况下，通常希望赋予一组事物相同的外观和感觉。

在 CSS 的上下文中，您应该只依赖类。CSS 的验证器应该避免使用 id 来应用样式。您仍然可以定义仅由一个不同元素使用的独特样式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T08:51:37.270

首先，[w3schools 是一个可怕的资源](http://w3fools.com/)。它写得不好，杂乱无章，没有重点，而且经常误导。您应该改用[Mozilla 开发者网络中的这组更好的资源](https://developer.mozilla.org/en-US/docs/CSS/Writing_Efficient_CSS)（它旨在实现相同的目标）。

您的示例根本不使用类。您有 CSS 调用一个 ID，以及 2 个具有该 ID 的 HTML 元素（您不应该这样做 - ID 应该是唯一的！）。两者的主要区别：

1.  ID 引用唯一元素。任何 1 个 ID 应该只有 1 个实例。类可以应用于很多元素，一个元素可以有多个`class`es
2.  如果它们都尝试分配相同的属性，则使用 ID 的 CSS 规则将覆盖具有类的 CSS 规则。
3.  ID 用于各种原生应用程序：锚引用、表单、iframe，而类纯粹用于 CSS 样式。

[我修改了您的代码作为这些要点的示例](http://jsfiddle.net/barney/ThQLB/)。以下是一些使用类的代码供参考：

```
.paragraph {
    font-style: italic;
    color: green;
} 
```

和 HTML：

```
<p id="para1" class="paragraph">Blah blah blah</p> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T08:45:24.920

您可以使用两者来设置元素的样式，但几乎没有区别：

*   只能有一个具有给定 id 的元素，但许多具有给定类
*   id 选择器在 CSS 优先级计算期间被计为 100，当类选择器只有 10 时

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-05T07:42:23.827

这里有详细的**[解释](http://css-tricks.com/the-difference-between-id-and-class/)**。

当您希望在整个页面/站点中一致地设置多个元素的样式时，请使用**类。**当页面上有一个将采用该样式的元素时，请使用**ID 。****class**是项目的一种类型，**id**是项目的唯一名称。

## 编辑：

**CSS 不在乎**

关于`CSS`，`ID`你不能用 a 做任何事情，`Class`反之亦然。我记得当我第一次学习`CSS`并且遇到问题时，有时我会尝试通过切换这些值来解决问题。没有。`CSS`不在乎。

**Javascript 关心**

`JavaScript``classes`人们可能已经更熟悉和之间的差异了`ID's`。JavaScript 依赖于只有一个页面元素具有任何特定性，否则常用的`getElementById`功能将不可靠。对于熟悉 的人来说，您知道向页面元素`jQuery`添加和删除是多么容易。`classes`它是原生的和内置的`jQuery`. 请注意如何不存在这样的函数`ID's`。操纵这些值不是我们的责任`JavaScript`，它会导致比其价值更多的问题。

[文档](http://www.w3.org/TR/html401/struct/global.html#h-7.5.2)清楚地表明 HTML 要求**ID**属性在页面中是唯一的：

> 此属性为元素分配名称。此名称在文档中必须是唯一的。如果您有多个具有相同**ID**的元素，则您的**HTML**无效。

所以在`JavaScript`,`getElementById()`应该只返回一个元素。你不能让它返回多个元素。

好吧，您可以拥有多个具有相同 ID 的元素，但您不应该这样做 - 因为由于浏览器之间的差异，这样做的后果是不可预测的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-22T02:32:12.513

你拥有区分一个人和另一个人的 ID 的方式与它在 CSS 中的工作方式相同，就像你给一个项目一个特殊的标记，这样你就不会将它与另一个项目混淆，这就是 ID 在 CSS 中的工作方式，不止一个项目不能共享同一个 ID

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-22T00:29:14.043

在 CSS 中，类选择器是一个以句号 (“.”) 开头的名称，而 ID 选择器是一个以井号 (“#”) 开头的名称。ID 和类之间的区别在于，ID 可用于标识一个元素，而类可用于标识多个元素。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-22T01:14:53.703

类选择器是一个以句号 (“.”) 开头的名称，而 ID 选择器是一个以哈希字符 (“#”) 开头的名称。ID 和类之间的区别在于，ID 可用于标识一个元素，而类可用于标识多个元素。

虽然 css 可能并不真正关心 ID 的唯一性，但 JavaScript 会，这就是为什么当你在 JavaScript 中处理 Document Object Model 时，如果你想选择一个 html ID，你使用 document.getElementByID()，注意“元素”，而对于类，您使用 document.getElementsByClassName() 这个有“元素”。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-09-22T02:40:56.560

一个元素的 ID 是唯一的，一个元素只能有 1 个 ID。类可以应用于许多元素，一个元素可以同时有多个类

# php - 如何通过包含在php中获取和传递数据库值

> ID：15356661
> 
> 赞同：-4
> 
> 时间：2013-03-12T08:43:31.207
> 
> 标签：php, mysql

我有问题。这是我的代码。

```
$_GET['id']=2;
include 'operation/visual_console/render_view.php'; 
```

这段代码没问题。它给出了正确的页面，带有`id=2`. 但我想要的是，从数据库中获取该 id 值。不是通过硬编码它。

谢谢你。

**编辑**

抱歉编码不好。我的数据库连接没问题。我会做对的。但问题是这是我的第一篇文章，我犯了一些错误。再次抱歉。我的问题在这里由我自己解决是新代码和上面缺失的部分。

```
 <?php
    function map()
    {
    $con=mysql_connect("localhost","root","abc123@#");
    mysql_select_db("pandora", $con);

    // Check connection
    if (mysqli_connect_errno($con))
    {
    echo "Failed to connect to MySQL: " . mysqli_connect_error();
    }

    $idAgent = (int)get_parameter('id_agente', 0);
    $lidAgent = db_get_value('id_layout', 'tlayout_data', 'id_agent', $idAgent);
    $_GET['id']=$lidAgent;

    include 'operation/visual_console/render_view.php';

    }
    mysqli_close($con);
    ?> 
```

所以现在没关系。谢谢你打扰我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:55:25.647

mysql_connect(主机、用户名、密码、数据库名);

$result=mysql_query($con,"select * from pages where ...");

$result 包含您的 ID 值......

# android - mylib.h：没有这样的文件或目录编译终止。在链接到 android ndk 中的共享库（.so）时

> ID：15356663
> 
> 赞同：1
> 
> 时间：2013-03-12T08:43:32.790
> 
> 标签：android, android-ndk

我是android ndk的初学者。我正在尝试加载我的共享库，该库是根据 ndk-r8d 提供的“TwoLibs”示例构建的。在我的 android 项目中加载一个简单的共享库时出现以下错误

*“编译拇指：jbmc <= jbmc.c jni/jbmc.c:1:19：致命错误：mylib.h：没有此类文件或目录编译终止。make：** * [obj/local/armeabi/objs/jbmc/ jbmc.o] 错误 1*

我正在使用以下代码：

# 安卓.mk

```
LOCAL_PATH:= $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE    := mylib
LOCAL_SRC_FILES := libmylib.so
LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH)
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE    := jbmc
LOCAL_SRC_FILES := jbmc.c
LOCAL_SHARED_LIBRARIES := mylib
include $(BUILD_SHARED_LIBRARY) 
```

使用本机 C 源代码在我的本机中使用库函数。

# jbmc.c

```
#include "mylib.h"
#include <jni.h>

JNIEXPORT jstring JNICALL Java_com_example_test1_TestActivity_myfunct(JNIEnv* env, jobject thiz, jstring str)
{
    str = myf(str);
    return (*env)->NewStringUTF(env, str);
} 
```

这里库函数接受任何字符串并返回另一个字符串。

我对 jni 有以下层次结构。

## /jni

*   安卓.mk
*   jbmc.c
*   libmylib.so

在我的测试活动中，我正在使用：

```
public native String myfunct(String abc);
static{ 
    System.loadLibrary("jbmc");
    System.loadLibrary("mylib");
} 
```

我认为我的标题无法加载或找到。虽然我已经使用 LOCAL_EXPORT_C_INCLUDES := $(LOCAL_PATH) 将我的标题导出到本地路径。

我引用的文档位于： **[NDK Prebuilt library support](http://www.kandroid.org/ndk/docs/PREBUILTS.html)**

# jquery - 如何从查看者的角度将项目放在画布上？

> ID：15356665
> 
> 赞同：0
> 
> 时间：2013-03-12T08:43:39.003
> 
> 标签：jquery, html5-canvas

我在哪里可以找到在画布上放置项目的示例？这个想法是从观众的角度来看，污渍/水滴落在画布上。我怎样才能做到这一点？请提供任何帮助。

从哪儿开始？我发现的唯一想法是： [http](http://threedubmedia.com/code/event/drop) ://threedubmedia.com/code/event/drop然后是 live 选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T22:20:18.600

**以下是如何在画布上添加几个咖啡渍的示例：**

![在此处输入图像描述](../Images/9b7d0a4cef635f34a6acf33f1697b6e0.png)

这是咖啡渍和小提琴的代码：http: [//jsfiddle.net/m1erickson/jkK7L/](http://jsfiddle.net/m1erickson/jkK7L/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    // get hold of the canvas
    var canvas=document.getElementById("canvas");
    // get hold of the canvas's context, which we use to draw with
    var context=canvas.getContext("2d");

    // ask for a new image
    var img=new Image();
    // wait for the image to load 
    img.onload=function(){
      // draw the coffee stains on the canvas using the context
      context.drawImage(img,0,0,img.width,img.height,50,50,100,100);
    }
    // tell the new image we asked for above where to find the image file
    // note: strangely, this must come after img.onload
    img.src="http://dl.dropbox.com/u/139992952/coffee-stain.png";

}); // end $(function(){});
</script>

</head>

<body>
    <canvas id="canvas" width=300 height=300></canvas>
</body>
</html> 
```

**这是画布上水波纹的巧妙模拟：**

点击画布查看涟漪效果：[http ://www.script-tutorials.com/demos/97/index.html](http://www.script-tutorials.com/demos/97/index.html)

**这是一个 splat 动画的例子**

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/r8Grf/](http://jsfiddle.net/m1erickson/r8Grf/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
    $(function(){

        var canvas=document.getElementById("canvas");
        var ctx=canvas.getContext("2d");

        window.requestAnimFrame = (function(callback) {
          return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame ||
          function(callback) {
            window.setTimeout(callback, 1000 / 60);
          };
        })();

        $("go").html("Loading...");

        var count=80;
        var win=new Image();
        var splash;
        win.onload=function(){
            splash=new Image();
            splash.onload=function(){
              ctx.drawImage(win,0,0);
            }
            splash.src="http://dl.dropbox.com/u/139992952/splash2.svg";
        }
        win.src="http://dl.dropbox.com/u/139992952/window.png";

        $("#go").click(function(){ alert("go"); count=80; animate(); });

        function animate() {
          // drawings
          if(--count>1){
              ctx.clearRect(0, 0, canvas.width, canvas.height);
              ctx.save();
              ctx.drawImage(win,0,0);
              ctx.globalCompositeOperation = 'destination-over';
              ctx.drawImage(splash,0,0,splash.width,splash.height,25,25,splash.width/count,splash.height/count);
              ctx.restore();
          }

          // request new frame
          requestAnimFrame(function() {
              animate();
          });
        }

    }); // end $(function(){});
</script>

</head>

<body>
    <br/><button id="go">Splash!</button><br/><br/>
    <canvas id="canvas" width=326 height=237></canvas>
</body>
</html> 
```

# jquery - 如何防止一个列表中的项目被放入另一个可排序的嵌套 ul jquery 中？

> ID：15356667
> 
> 赞同：1
> 
> 时间：2013-03-12T08:43:43.213
> 
> 标签：jquery, css, html

我有嵌套列表，每个列表都有一个唯一的 ID。我想知道如何防止父-父列表项掉入已经包含自己的列表的`<div>`内部部分。此外，占位符也出现在那里。我想知道是否有一种方法可以强制属于第一个列表的项目保留在那里，即使它们移动到另一个嵌套列表上方，并且在主全局列表中有一个项目。`<li> <div>``<ul> <li>`

提前致谢。

**jQuery：**

```
 $(document).ready(function () {
             $('ul#main-sections').sortable({
                 connectWith: 'ul#main-sections', 
                 items: 'li:not(:last-child)',
                 placeholder: 'placeholder',
                 forcePlaceholderSize: true,
                 start: function (e, ui) {
                     var elementHeight = ui.item.height();
                     ui.placeholder.height(elementHeight);
                 }
             });
         }); 
```

**这是我的[http://jsfiddle.net/wt4N8/1/](http://jsfiddle.net/wt4N8/1/)** <--将摘要拖到书籍部分，你会看到

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:47:50.643

像这样澄清你的 jQuery 选择器：

```
items: '>li:not(:last-child)', 
```

它将仅选择第一级子元素

[http://jsfiddle.net/wt4N8/2/](http://jsfiddle.net/wt4N8/2/)

是你要找的吗？

PS 这里是如何安排书籍和摘要部分：http: [//jsfiddle.net/wt4N8/3/](http://jsfiddle.net/wt4N8/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T10:00:58.810

使所有嵌套列表和父列表可排序然后设置

```
items: '>li' 
```

这将解决问题。它对我有用。

# entity-framework - GetModifiedProperties 不适用于 EF4.1 DbContext

> ID：15356674
> 
> 赞同：4
> 
> 时间：2013-03-12T08:43:58.837
> 
> 标签：entity-framework

使用 ObjectContext：

```
var objContext = new ObjContextEntities();
var accountType = objContext.AccountTypes.FirstOrDefault(x => x.Id == 0);
accountType.Name = "ABC";
var stateEntry = objContext.ObjectStateManager.GetObjectStateEntry(accountType);
Console.WriteLine(stateEntry.GetModifiedProperties().Count());  //--------> Outputs 1 as expected 
```

使用 DbContext：

```
var dbContext = new DbContextEntities();
var accountType = dbContext.DBAccountTypes.FirstOrDefault(x => x.Id == 0);
accountType.Name = "XYZ";
var dbObjContext = ((IObjectContextAdapter)dbContext).ObjectContext;
var stateEntry = dbObjContext.ObjectStateManager.GetObjectStateEntry(accountType);
Console.WriteLine(stateEntry.GetModifiedProperties().Count());    //--------> Outputs 0 
```

我想迁移到使用 DbContext，但我有依赖此功能的代码。这是一个已知的错误？任何人都可以提出另一种方法吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-14T14:55:53.487

好的，这似乎可以解决问题：

```
var dbContext = new DbContextEntities();
var accountType = dbContext.DBAccountTypes.FirstOrDefault(x => x.Id == 0);
accountType.Name = "XYZ";
var entry = dbContext.Entry(accountType);
var modifiedProperties = entry.CurrentValues.PropertyNames.Where(propertyName => entry.Property(propertyName).IsModified).ToList();
Console.WriteLine(modifiedProperties.Count());    //--------> Outputs 1 
```

更多有用的信息在这里：http: [//msdn.microsoft.com/en-US/data/jj592677](http://msdn.microsoft.com/en-US/data/jj592677)

# java - 与 JSF 页面中的验证器一起使用时 valueChangeListener 中的 oldValue 和 newValue 错误

> ID：15356681
> 
> 赞同：2
> 
> 时间：2013-03-12T08:44:26.107
> 
> 标签：java, jsf, validation, valuechangelistener

我在这样的 ah:inputText 字段中使用 vlaidator 和 valuechangeListener。

```
<h:inputText id="quantityInput" required="true"
validator="#{CartController.validateQuantity}"
value="#{cartLine.quantity}" size="6" maxlength="15"
styleClass="numeric"
onchange='updateAndSubmit("#{CartController.rowIndex +1}", "tabs_root:updatedRow")'
onkeyup='checkEnter(event,"#{CartController.rowIndex +1}", "tabs_root:updatedRow")'
style="margin-right:0.4em"
tabindex="#{CartController.tabIndex}"
valueChangeListener="#{CartController.quantityListener}">
<rd:convertNumber
    maxFractionDigits="#{CartController.noOfQuantityDecimals}"
    minFractionDigits="#{CartController.noOfQuantityDecimals}" />
</h:inputText> 
```

当我更改 inputText 框时，我在 valuechangeListener 中获得了相同的 oldValue 和 newvalue。当我删除验证器时，这个问题就消失了，当我删除验证器时，我在 valuechangeListener 中获得了正确的 oldValue 和新值。

这是怎么回事，你知道吗？

这是验证器方法

```
 public void validateQuantity(FacesContext facesContext,
        UIComponent component, Object value) throws ValidatorException,
        Exception {

    try {
        if (isCurrentRowItem()) {
            int quantityValidationResult = quantityControl(value,
                    getCurrentGoods());
            if (quantityValidationResult != QUANTITY_OK) {

                setViewErrorColumn(true);
                FacesMessage msg = new FacesMessage();
                if (quantityValidationResult == QUANTITY_TO_LOW) {
                    String felTextMiQuant = Text.get(
                            TextProperties.ANGIVENKVANTITETMINDREBESTKVANT,
                            getApUserData().getUser().getCultureSetting());
                    msg.setSummary(felTextMiQuant + " " + minQuantity);
                    getActiveCartAndTemplateTab().getErrorList().put(
                            new Integer(getRowIndex()), msg.getDetail());
                } else {
                    String felTextMuQuant = Text
                            .get(TextProperties.ANGIVENKVANTITETEJTILLATENMULTIPEL,
                                    getApUserData().getUser()
                                            .getCultureSetting());
                    msg.setSummary(felTextMuQuant + " " + multipleQuantity);
                    getActiveCartAndTemplateTab().getErrorList().put(
                            new Integer(getRowIndex()), msg.getDetail());
                }
                // Activate the previous tab, the one containing the errors,
                // in case the user tries to activate another
                if (cartAndTemplateController != null)
                    cartAndTemplateController
                            .setActiveTab(cartAndTemplateController
                                    .getActiveTab());
                throw new ValidatorException(msg);
            } else {

                // if we don't set here it will be impossible to correct more then one error
                double valueAsDouble;
                Line line = (Line) getCartEntity()
                        .getLines(getApUserData()).get(validatorCounter);

                if (value instanceof Long) {
                    valueAsDouble = ((Long) value).doubleValue();
                }

                else if (value instanceof String){
                    valueAsDouble = Double.parseDouble((String) value);
                }

                else {
                    valueAsDouble = (Double) value;
                }
                    line.setQuantity(getApUserData(), valueAsDouble);
            }
            validatorCounter++;
        }
    } catch (IllegalArgumentException e) {

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:57:58.870

我设法解决了这个问题:)，这是故事：

实际上在到达 valueChangeListener 之前，目标组件仍然有它的 oldValue。运行 valueChangeListener 后，组件的值将更改为新输入的值。

由于验证器在 valueChangeListener 之前运行，因此验证器方法中组件值的任何更改都会影响 Listener 方法中的 oldValue。

在我的验证器中，我使用新输入的值（来自验证器类的“对象值”参数）设置组件的值，因此它会导致在侦听器中获得相同的 oldvalue 和 newValue。

# javascript - HP Vugen 中的 JavaScript：web_submit_data

> ID：15356682
> 
> 赞同：1
> 
> 时间：2013-03-12T08:44:27.203
> 
> 标签：javascript, http, load-testing, loadrunner

我在 loadrunner 中有一些用 js 编写的脚本。昨天我需要一个函数“web_submit_data”。在 C 上，它的语法如下所示：

`int web_submit_data(const char *StepName, const char *Action, <List of Attributes>, ITEMDATA, <List of data>, [EXTRARES, <List of Resource Attributes>,] LAST);`

要设置“数据列表”，我需要**ENDITEM**常量，但在 JS Vuser 中找不到它。我尝试**了 ENDITEM**、**web.ENDITEM**、**"ENDITEM"**，但都不起作用。所以，现在我对这个函数的调用看起来像：

```
web.submit_data("bsi.dll_14",
  "Action=http://someaddr.org/a/b/c",
  new Array(
    "Method=POST",
    "EncType=multipart/form-data",
    "TargetFrame=",
    "RecContentType=text\html"
    "Referer=http://some.ref.link.org/"
    "Snapshot=t70.inf",
    "Mode=HTML"),
  new Array(
    new String("Name=exName1"), new String("Value=val1"),
    new String("Name=exName2"), new String("Value=val2"))); 
```

我没有收到任何错误，但是发送的 HTTP 包不包含我试图发送的数据。
那么，有人可以帮我完成这个疯狂的功能吗？我应该如何在**Javascript vuser中使用****web.submit_data**？ 提前致谢。

 *** * *

*PS对不起我的英语不好。我试着写得通俗易懂。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T18:32:46.610

我不熟悉 JavaScript Vuser 类型，但我知道 web.submit_data 从将 JAVA 编码到 VUgen 中。如果这相同，那么我认为您的代码应如下所示：

```
web.submit_data("bsi.dll_14",
  "Action=http://someaddr.org/a/b/c",
  new String[]{                      // options[]
    "Method=POST",
    "EncType=multipart/form-data",
    "TargetFrame=",
    "RecContentType=text\html"
    "Referer=http://some.ref.link.org/"
    "Snapshot=t70.inf",
    "Mode=HTML"
  },
  new String[]{                     // data name/value pairs
    "Name=exName1", "Value=val1", web.ENDITEM,
    "Name=exName2", "Value=val2", web.ENDITEM,
    web.LAST
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T16:43:50.593

从文档中：

```
Web Vuser Functions (WEB)
Web Vusers perform tests that communicate with the servers using the HTTP protocol. The                 Web protocol is generally used to test Internet sites.

The default language for the Web protocol is C. Recording sessions create tests in C.  

Java and Visual Basic syntax are supported for a sub-set of the Web functions. C++ can      be used when writing tests with external programming tools.

Web Vuser scripts are supported in three syntaxes:

Web Vuser Functions: C Language (WEB) 

Web Vuser Functions: Java Language (web.) 

Web Vuser Functions: VB (web.) 
```

所以我猜不支持JS。**

# javascript - 如何从谷歌图表工具切换到 D3.JS？

> ID：15356683
> 
> 赞同：2
> 
> 时间：2013-03-12T08:44:27.773
> 
> 标签：javascript, d3.js, visualization, google-visualization

我曾经`Google Charts`用来可视化匹配数据，但我想`D3.JS`从现在开始使用它，因为它拥有庞大的社区和丰富的图形工具。我为[Google Chart](http://en.wikipedia.org/wiki/Google_Chart_API)编写了一个代码，它从数据库中提取数据，用[JSON](http://en.wikipedia.org/wiki/JSON)格式解析它，并通过一个基本的条形图进行可视化。我想将我的基本条形图更改为[堆积条形图](http://bl.ocks.org/mbostock/3886208)。

*   这是我的[脚本](http://pastebin.com/eJMGqe3t)。

*   [我的谷歌图表](http://imgur.com/xvlkykZ)

我环顾四周寻找解决方案，但找不到我真正需要的东西。

我怎样才能把它切换到`D3.JS`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-10T00:06:48.650

vida.io 是可重用 d3js 模板的另一种选择。您可以实时编辑 javascript 和样式表。此外，vida.io 提供 GUI 编辑器用于基本属性，数据上传供您上传 csv 文件。

查看演示部分以获取更多示例：

[https://vida.io/explore](https://vida.io/explore)

免责声明：我的团队运行 vida.io。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T02:20:57.553

# d3.js 的 NVD3 可重用图表

> 这个项目试图为 d3.js 构建可重用的图表和图表组件，而不会剥夺 d3.js 为您提供的功能。这是一个非常年轻的组件集合，目标是保持这些组件非常可定制，远离标准的千篇一律的解决方案。

试试这个，它可能是你要找的东西：http: [//nvd3.org/ghpages/multiBarHorizo​​ntal.html](http://nvd3.org/ghpages/multiBarHorizontal.html)

让我们知道它是否能完成这项工作。

# html - 不管用

> ID：15356695
> 
> 赞同：1
> 
> 时间：2013-03-12T08:45:26.340
> 
> 标签：html, css, jsp

我在 css 文件夹下有 css 文件，在 jsp 文件夹下有 jsp 文件，这两个文件夹都在 WEB-INF 文件夹内。那么如何在jsp中获取css文件呢？

```
 <link rel="stylesheet" href="../css/style.css> 
```

我已经给出了这样的路径。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-12T08:50:18.100

尝试使用这个：

```
<link rel="stylesheet" type="text/css" href="css/style.css" > 
```

代替

```
href="../css/style.css 
```

在这里，您缺少右撇号。另请检查[BalusC 答案](https://stackoverflow.com/questions/10355292/how-can-i-connect-my-css-to-my-jsp-files-stored-in-the-web-inf-folder-websphere)将解决您的问题。

## 笔记：

我还建议您在与**WEB-INF**相同的级别上创建**资源**文件夹，然后在资源文件夹中创建**css**文件夹，然后将 css 文件引用为：

 ****```
WEB-INF
resources
  --css
    --styles.css
  --js
    --scripts.js 
```

以及如何将 css 与页面连接：

```
<link rel="stylesheet" type="text/css" href="resources/css/styles.css" /> 
```

我正在使用这种方法是我的网络项目，一切正常。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-17T08:35:20.090

[@import](https://developer.mozilla.org/en-US/docs/Web/CSS/@import)规则是加载 CSS 文件的另一种方式：

```
<style>
    @import url('/css/styles.css');
</style> 
```

您可以使用此技巧同时导入所有样式，例如：-

```
@import url('/css/header.css') screen;
@import url('/css/content.css') screen;
@import url('/css/sidebar.css') screen;
@import url('/css/print.css') print; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-01-27T21:32:57.750

在以前的 HTML 版本中，要引用另一个文件夹中的外部 css 文件，href 属性需要实际的文件路径，例如 href="./CSS/filename.css" 使用 HTML5，我将 css 文件放在子目录中-folder 令我惊讶的是，上述方法不起作用，我无法理解。我在开始时删除了点，那没有用。然后我删除了斜杠（/），它再次不起作用。似乎 HTML5 只需要实际的 css 文件名即可工作。因此，即使使用子文件夹中的 css 文件 href="filename.css" 也可以！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-16T10:07:39.573

如果上述答案没有解决您的问题。您可以通过提及其完整地址来访问该文件。添加完整的文件路径总是更好，而不是使用正斜杠。

```
<link rel="stylesheet"  href="C:\bacon\WD3.5 Bacon Fansite Start Here\styles.css" > 
```

这是访问外部文件的最简单方法。只需将外部文件的完整地址路径复制到主文件中即可。但请确保两个文件应位于同一文件夹中。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2013-03-12T08:50:11.537

```
 <%@ page language="java" contentType="text/html; charset=ISO-8859-1"
        pageEncoding="ISO-8859-1"%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
      <title>Login Form</title>
      <link rel="stylesheet" type="text/css" href="css/style.css">
    </head>
 </html> 
```****

# c# - 如何构建软件框架

> ID：15356696
> 
> 赞同：3
> 
> 时间：2013-03-12T08:45:30.403
> 
> 标签：c#, java, c, web, frameworks

我正在考虑为我的论文开发一个软件框架。我仍然必须决定软件框架将解决哪些问题。

我在互联网上搜索了有关如何构建软件框架的信息，但似乎找不到任何信息。任何人都可以将我引导到解释构建框架的基本步骤的网站或任何其他资源吗？

目前，任何框架的步骤都可以。谢谢你。

编辑：

我到现在才发现这个网站：

[http://blog.robustsoftware.co.uk/2009/09/bdd-from-scratch-build-your-own.html](http://blog.robustsoftware.co.uk/2009/09/bdd-from-scratch-build-your-own.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T08:48:34.187

查看[构建 PHP 5 框架的 net tuts 指南](http://net.tutsplus.com/tutorials/php/creating-a-php5-framework-part-1/)。

这包括：

*   创建身份验证处理程序、数据库抽象层和模板管理器
*   将这些对象放在一起
*   使用框架来管理内容，并为我们的网站提供动力
*   创建出色的前端设计。
*   通过故事板设计登录过程
*   如何扩展和扩展框架

# load-testing - 用于负载测试的多个 CasperJS/phantomJS 实例

> ID：15356706
> 
> 赞同：3
> 
> 时间：2013-03-12T08:45:51.167
> 
> 标签：load-testing, phantomjs, casperjs, multiple-users

是否有可能使用 casperJS/phantomJS 执行负载测试？我对此一无所知。我的确切情况是我应该在我的公司测试一个 Web 项目。是否有可能模拟许多用户同时使用 casperJS/phantomJS 访问该站点？

谢谢你和问候，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:16:47.603

在我看来，casper 和 phantom 并不是真正用于负载测试 - 它们是用于测试您的前端代码，确保在您按下按钮时发生正确的事情等。

对于负载测试，我建议使用专用的基准测试工具，例如 apache bench（随您的 apache 安装提供，因此如果您安装了 wamp，那么您已经拥有它）。它测量每个页面的加载时间，并为您提供有关请求的各种统计信息，例如最快、最慢、正态分布等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-22T17:33:38.907

查看[https://loadbooster.com/](https://loadbooster.com/)

您可以使用 CapserJS 和 phantomJS 来分发测试。

# c++ - 如何区分函数的声明和使用？

> ID：15356707
> 
> 赞同：0
> 
> 时间：2013-03-12T08:45:55.850
> 
> 标签：c++, syntax, function-calls, function-declaration

我在代码中有以下结构：

```
while (x > 0) {
     something;
     aaa::bbb::ccc some_name(
        x,
        y
     );
} 
```

我无法理解什么`aaa::bbb::ccc some_name(`。如果是函数调用，为什么要指定它的时间`aaa::bbb::ccc`。如果它是一个函数的声明，为什么它在while循环中完成，为什么没有指定参数的类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T08:48:12.040

您没有在函数调用中指定返回类型，因此这不可能是函数调用。

正如 Pubby 所指出的，它很可能是一个对象定义。您定义了一个名为`some_name`type的对象并将其`aaa::bbb::ccc`传递给构造函数。`x``y`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T08:53:06.490

在这种特殊情况下，它可能通过使用参数和调用其双参数构造函数来构造一个`some_name`类型的对象。`aaa::bbb::ccc``x``y`

它在循环中完成的原因可能是对象在其构造函数和/或析构函数中做了一些有用的工作（例如，它可能是某种形式的范围保护）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:53:00.733

我不太确定你在做什么，但是

```
:: 
```

在 C++ 中称为`scope-operator`and 用于访问`namespaces`或`variables in namespaces`类`static`成员。

通常**函数**声明和定义出现在函数和方法之外。所以你的代码没有任何意义。

有关范围运算符，请参见[此处。](http://msdn.microsoft.com/en-us/library/b451xz31%28v=vs.110%29.aspx)这里是声明与定义[。](http://www.cprogramming.com/declare_vs_define.html)

# c# - 即使是大文件，文件下载也具有低内存

> ID：15356709
> 
> 赞同：2
> 
> 时间：2013-03-12T08:45:59.390
> 
> 标签：c#, asp.net, filestream, generic-handler

我需要授予用户访问受限文件的权限。正在考虑使用通用 webhandler 进行此操作。

这些文件可以变得相当大，至少 1.5GB。

我们需要尽可能少地使用 RAM/内存来提供这些文件。

目前，我们正在将此视为解决方案：

```
request.ContentType = "text/plain";
request.ContentLength = byteArray.Length;
Stream dataStream = request.GetRequestStream();
int buffersize = 65536;
byte[] buffer = new byte[buffersize];
using (StreamReader reader = new StreamReader(filename))
{
   int count = 0;
   while (true)
   {
        int count = reader.Read(buffer, 0, buffersize);
        dataStream.Write(buffer, 0, count);
        if (count < buffersize) break;
   }
} 
```

这对我们有用吗？

有更好的解决方案吗？

我们需要注意什么？

不能直接通过 IIS 共享文件。处理程序需要控制谁可以访问，谁不能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T08:50:37.273

你需要使用[`HttpResponse.TransmitFile`](http://msdn.microsoft.com/en-us/library/12s31dhy%28v=vs.110%29.aspx)方法。这不会在内存中缓冲文件，但您仍然可以获得所需的所有控件。

# java - 如何在java中将unicode字符串转换为ASCII

> ID：15356716
> 
> 赞同：10
> 
> 时间：2013-03-12T08:46:23.480
> 
> 标签：java, android, unicode, ascii

我现在正在尝试将 unicode 字体转换为 android 中的 ascii。我编写了以下编码以将 unicode 字体转换为 ascii，但它失败了。因为结果转换后无法正常显示。

unicode 字体 = 'နေကောင်းပါသလား' 类似于 '\u100F\u1039\u100D'

```
public static String toJAVA (String zawgyi) {
    String output = "";
    char[] charArray = zawgyi.toCharArray();

    for (int i = 0; i < charArray.length; i++) {
        char a = charArray[i];
        if ((int) a > 255) {
            output += "\\u" + Integer.toHexString((int) a) + "--";
        } else {
            output += a;
        }
    }       
    return output;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T08:50:37.943

使用 java.text.Normalizer 类从 unicode 转换为 ascii。这是来自答案[https://stackoverflow.com/a/2097224/931982的示例代码](https://stackoverflow.com/a/2097224/931982)

```
String s = "口水雞 hello Ä";

String s1 = Normalizer.normalize(s, Normalizer.Form.NFKD);
String regex = Pattern.quote("[\\p{InCombiningDiacriticalMarks}\\p{IsLm}\\p{IsSk}]+");

String s2 = new String(s1.replaceAll(regex, "").getBytes("ascii"), "ascii");

System.out.println(s2);
System.out.println(s.length() == s2.length()); 
```

# html - 使用 css 更改 html 标记的 href

> ID：15356717
> 
> 赞同：15
> 
> 时间：2013-03-12T08:46:24.077
> 
> 标签：html, css, href

我需要将这个 A 标签从

```
<a href="contact.html" >Contact</a> 
```

至

```
<a href="tel:+13174562564" >Contact</a> 
```

如果可能或像这样，只有 Css

```
<a href="tel:+13174562564" >+13174562564</a> 
```

我有很多页面，我不想编辑所有页面，这将花费我一生的时间，这就是为什么我需要在 CSS 中进行，并且我没有链接到它们的 JS

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-03-12T08:49:37.523

CSS 仅用于显示，您不能使用它修改文档对象模型。抱歉，这无法完成。我希望我有一个更好的答案，但“做不到”是唯一的答案。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-03-12T08:50:02.767

CSS 用于**演示**，不能用于以您想要的方式修改 HTML 标记。为此，您需要 JavaScript。

它应该是一个**[相当短的脚本。](https://stackoverflow.com/a/4365272/759019)**

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-11-28T05:59:36.817

一种解决方案是隐藏标签并放置另一个

```
<div id="tag1">
<a href="#tag1">link1</a>
<a href="#tag2">link2</a>
</div> 
```

CSS：

```
a[href="#tag1"] {
display:block;
}

a[href="#tag2"] {
display:none;
}

#tag1:target  a[href="#tag1"]{
 display:none;
}

#tag1:target  a[href="#tag2"]{
 display:block;
} 
```

我使用这种方法来响应菜单栏的“按钮”

# html - 无论窗口的宽度如何，如何根据表格的内容调整表格的宽度？

> ID：15356718
> 
> 赞同：1
> 
> 时间：2013-03-12T08:46:29.217
> 
> 标签：html, css, html-table

通常，表格会根据其内容调整其大小。但是当表格的适当宽度大于窗口的宽度时。表格似乎开始根据窗口的宽度调整其宽度。

该表可以根据其内容调整其宽度：

```
<table border="1">
    <tr>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
    </tr>
</table> 
```

并且这个表格可以根据窗口的宽度来调整它的宽度，一个单元格的内容可以分成三行：

```
<table border="1">
    <tr>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
        <td>Blah blah blah.</td>
    </tr>
</table> 
```

我想将表格包含在 a`<div>`中，并将`<div>`'s设置`overflow`为`scroll`，如果表格太大而无法显示，我可以滚动查看表格。那么如何让表格忽略窗口的大小，只根据它的内容调整它的大小呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T08:56:13.337

您可以`white-space: nowrap;`在表格单元格内容上使用。这将防止它们被分解。

这是一个 jsfiddle 示例，说明如何将其放入具有可滚动溢出的 div 中：

[http://jsfiddle.net/VE4sU/17/](http://jsfiddle.net/VE4sU/17/)

# javascript - 偏移 x 到图像

> ID：15356722
> 
> 赞同：1
> 
> 时间：2013-03-12T08:46:41.347
> 
> 标签：javascript, jquery, offset

我如何才能将此字符绑定为仅在 x 方向上流动。它现在自由地向各个方向移动。我希望火柴人角色位于底部（站在边界上），并且除了 x 方向之外不要向任何方向移动。

它也应该在 y 方向上跳跃。

我正在尝试向它添加偏移 x 方向。

这是我的小提琴-

[小提琴](http://jsfiddle.net/stackmanoz/n52bK/)

我正在尝试的代码-

```
function key(e) {
    console.log(e.keyCode);
    e.offsetx;
    var $key = e.keyCode; 
```

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:21:56.550

只需删除 css `box.css("top","-=10");`，它就应该在 x 方向上移动。

对于跳跃，您可以像这样在启动时保存偏移量：

```
var xPos=box.offset().top;

//in your interval
if(spaceBar)
{
    box.stop(true,false).animate({top:xPos-50},100, function(){
       box.animate({top:xPos},100);
    });
} 
```

看到这个[小提琴](http://jsfiddle.net/n52bK/4/)

# sql-server - 使用 Ado.Net 连接器 SqlServer-Teradata 的 VarChar、VarByte 或 VARGRAPHIC 的数据长度无效

> ID：15356725
> 
> 赞同：1
> 
> 时间：2013-03-12T08:46:43.740
> 
> 标签：sql-server, ado.net, teradata

我必须使用 SSIS 包将一些数据从 SQL Server 插入到 Teradata Server。对于 SQL Server，我使用 OleDb Source（按变量）来检索数据，对于 Teradata，我使用 Ado.Net 连接器将数据写入 Teradata 表。

但是对于一张桌子我有错误

> VarChar、VarByte 或 VARGRAPHIC 的数据长度无效

启动数据流时。

如果我从 OleDb 源预览值，将它们复制到 Teradata SQL 助手并编写插入查询，它可以工作，但是当 SSIS 包尝试插入数据时，它给了我

> VarChar、VarByte 或 VARGRAPHIC 的数据长度无效

错误并停止。

我检查了网络，但找不到任何有效的方法，我检查了 SQL 语句没有任何 Null 值（使用 -1 作为 Null）。

有什么提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-27T00:27:59.930

我发现通过在 (n)varchar 值的前后添加 2 个空格来解决此问题。我不需要原始子句的 ISNULL 语句。我得到了提示： http: [//go4answers.webhost4life.com/Example/teradata-invalid-data-length-varchar-44224.aspx](http://go4answers.webhost4life.com/Example/teradata-invalid-data-length-varchar-44224.aspx)

# php - php mysql 自定义ecomm - 产品搜索，包括类别名称？

> ID：15356728
> 
> 赞同：1
> 
> 时间：2013-03-12T08:46:56.137
> 
> 标签：php, mysql, web-applications, e-commerce

我正在使用 php 和 mysql 做一个自定义电子商务网络应用程序。我遇到了与产品搜索相关的问题。

用户输入关键字来搜索产品。搜索查询应查看其所属的产品名称和描述、类别名称和制造商名称。

表架构如下：

Products：id、name、description（及其他字段） 制造商：id、name、description（及其他字段） Category：id、name、description（及其他字段） Product_Manu：id、prod_id、manu_id Product_Cat：id、prod_id、cat_id

你能帮我处理一下 SQL 查询吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:51:10.773

大多数人倾向于使用这种方法来实现这一点：

添加/修改每个产品的数据时，您将要搜索的所有相关字段连接到一个字段（“搜索”）中，然后`Full Text Search`在该字段上允许 MySQL。

执行搜索时，您执行以下操作：

```
SELECT * FROM Products WHERE search LIKE '%$query%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:14:19.833

除了@haim770 建议的直接方法之外，我是否还建议看一下搜索框架？它们不仅可以很好地适应不断变化的搜索需求，而且当今有知识的应用程序设计人员认为 Web 应用程序的搜索功能是应用程序的制作或破坏问题。如今，仅在整个名称和描述中寻找文字文本可能还不够。

[像Apache Solr](http://lucene.apache.org/solr/)或[Elasticsearch](http://www.elasticsearch.org/)这样的搜索框架可以很容易地整合到现有架构中，可以通过多种方式（HTTP POST、数据库索引）提供，甚至可以在发布搜索之前通过 AJAX 获取其他功能，例如搜索建议.

# c# - Checkbox OnChecked 事件在嵌套中继器中不起作用

> ID：15356731
> 
> 赞同：0
> 
> 时间：2013-03-12T08:46:59.920
> 
> 标签：c#, asp.net, checkbox, repeater

我有一个表格，其中一些`checkboxes`嵌套在转发器中，它位于 a`tabcontainer`中，位于 another 中`repeater`。

```
<asp:Repeater ID="rptProjectList" OnItemDataBound="rptProjects_ItemDataBound" runat="server">
        <ItemTemplate>
                <ajaxToolkit:TabContainer ID="projTabContainer" runat="server" CssClass="ajax__tab_red-theme">
                    <ajaxToolkit:TabPanel ID="tasksTab" runat="server" HeaderText="Tasks">
                        <ContentTemplate>
                            <asp:Repeater ID="rptOutstandingProjectTasks" runat="server">
                                <ItemTemplate>
                                     <asp:CheckBox ID='cbComplete' OnCheckedChanged="cbComplete_CheckedChanged" ClientIDMode="Static" AutoPostBack="true" Checked='false' runat='server' />
                                </ItemTemplate>
                            </asp:Repeater>
                        </ContentTemplate>
                    </ajaxToolkit:TabPanel>
                </ajaxToolkit:TabContainer>
        </ItemTemplate>
    </asp:Repeater> 
```

使用一个非常简单的 onCheckedChanged 事件（用于测试）：

```
protected void cbComplete_CheckedChanged(object sender, EventArgs e)
        {
               Response.Redirect(Request.RawUrl.Split('?')[0] + "?project=" + projCode.Value);
        } 
```

由于某种原因，嵌套的`OnCheckedChanged`事件`checkbox`不会触发。（它似乎只是因为 . 而刷新了页面`postback`。）如果我将其`checkbox`拉出`repeater`并放在页面的主体中，它会很好地触发。

# javascript - console.log 在 jQuery 中不起作用

> ID：15356734
> 
> 赞同：2
> 
> 时间：2013-03-12T08:47:17.290
> 
> 标签：javascript, jquery

我的 JavaScript 文件中有这段代码：

```
jQuery(document).ready( function() {
  jQuery('body').click( function() {
    console.log( 'test console' );
    alert( 'test alert' );
  });
}); 
```

我有警报显示，但在 chrome 或 firefox 中，“测试控制台”不会在控制台中打印。我不知道为什么。有人遇到过这个吗？

**编辑**
我发现了问题所在。事实证明这是 Magento 1.5 的特定问题。在文档“准备好”之前，js/varien/js.js 脚本运行并且禁用了默认控制台。这确实非常令人困惑，我很高兴 Magento 在未来的版本中放弃了这个（至少它在 Magento 1.7 中被注释掉了）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:52:26.740

你在使用 OpenLayer 吗？OpenLayer 可能会劫持控制台变量。

```
<script type="text/javascript">
  console.firebug=true;
</script> 
```

# facebook - 获取最大照片的实际分辨率

> ID：15356735
> 
> 赞同：2
> 
> 时间：2013-03-12T08:47:27.137
> 
> 标签：facebook, api, facebook-graph-api, facebook-fql

有什么方法可以从图形 api 或 FQL 中检索最大版本的 facebook 照片的实际分辨率，而无需将图像下载到浏览器/服务器？

看起来使用图形 api 应该很容易，但是当您仔细检查 JSON 时，实际上并非如此。图 api 返回宽度和高度的方式似乎没有意义。在下面的示例中，如果您查看 2048 像素的照片，您可以看到它实际上只有 731 像素宽。720px 的“源”宽度和高度也不准确。720px 与 731 并没有什么不同，但是对于其他更大的图像，它们仍然被列为 720px。

就 fql 而言，您可以检索 src_big,src_big_height,src_big_width 但这似乎只返回 720px 版本的照片，即使 facebook 实际上可能会保存更大的版本（它说最多 960px 但我已经看到了完整的 2048 )

我假设 facebook 有这样做的理由，但出于我的目的（我相信其他人的目的），获取图像的实际宽度和高度会很有用。

```
{
  "id": "10151509108346729", 
  "picture": "http://photos-a.ak.fbcdn.net/hphotos-ak-prn1/68051_10151509108346729_1731694342_s.png", 
  "source": "http://sphotos-a.ak.fbcdn.net/hphotos-ak-prn1/s720x720/68051_10151509108346729_1731694342_n.png", 
  "height": 720, 
  "width": 720, 
  "images": [
    {
      "height": 2048, 
      "width": 2048, 
      "source": "http://sphotos-a.ak.fbcdn.net/hphotos-ak-prn1/s2048x2048/68051_10151509108346729_1731694342_n.png"
... 
```

# visual-studio-2010 - 替换 Resharper 的 Alt+Enter 以在您的代码或 xaml 中包含引用

> ID：15356736
> 
> 赞同：0
> 
> 时间：2013-03-12T08:47:27.933
> 
> 标签：visual-studio-2010, resharper

我一直使用 Resharper 并且喜欢按 Alt+Enter 键，Resharper 会将我所需的 dll 包含在我的代码文件或 Xaml 中的命名空间中。

现在由于 VB.net 中的性能问题，我不再允许使用 Resharper，因此我正在寻找此功能的替代工具。

我不需要来自 resharper 的所有其他额外内容，但这对我来说非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:47:41.550

一种替代产品是[CodeRush](http://www.devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/)，它的性能可能比 ReSharper 更好。我不能肯定地说，因为我从未使用过它。

虽然不想听起来轻率，但您是否最好尝试通过升级计算机硬件或重新安装 Windows 来解决性能问题？

# mysql - 使用 Perl DBD-mysql 连接到远程 MySQL 服务器时访问被拒绝错误

> ID：15356741
> 
> 赞同：0
> 
> 时间：2013-03-12T08:47:46.177
> 
> 标签：mysql, perl, dbi

我尝试使用 Perl DBD-mysql 模块连接到远程 MySQL 服务器。客户端在Windows下，所以在连接Perl之前，我用Windos cmd line做了一些测试：

```
mysql -h xx.xx.xx.xx -u root -p database -P 3306 
```

它回来了`ERROR 1045 (28000): Access denied for user 'root'@'my-pc-name'`。我在互联网上做了一些研究，发现`grant all privileges on *.* to root@"%" identified by "password"`在服务器端运行可以解决这个问题。然后我成功连接到服务器。

但是，使用 Perl DBD-mysql 模块连接时仍然存在这样的访问问题。这是我的代码：

```
#!/usr/bin/perl
use strict;
use warnings;
use DBI;

my $dbh = DBI->connect('DBI:mysql:database@xx.xx.xx.xx', 'root', 'password'
                   ) || die "Could not connect to database: $DBI::errstr"; 
```

据报道：

```
DBI connect('database@xx.xx.xx.xx','root',...) failed: Access denied for user 'root'@'localhost' (using password: YES) 
```

你能给一些提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:01:49.847

在[DBI CPAN 文档页面上](http://search.cpan.org/~timb/DBI-1.623/DBI.pm)，我找到了 for 的两个替代`$data_source`方案`DBI->connect`。与我的第一次尝试相比，更详细的可以成功连接到 MySQL 服务器。它说：

```
Examples of $data_source values are:

  dbi:DriverName:database_name
  dbi:DriverName:database_name@hostname:port
  dbi:DriverName:database=database_name;host=hostname;port=port 
```

虽然第二个似乎不适合我，但我转向第三个，即

```
my $dbh = DBI->connect('dbi:mysql:dbname=database;host=xx.xx.xx.xx','root', 'password'
                   ) || die "Could not connect to database: $DBI::errstr"; 
```

这就像一个魅力。

# php - 如何在模板文件中渲染块

> ID：15356743
> 
> 赞同：0
> 
> 时间：2013-03-12T08:47:46.993
> 
> 标签：php, drupal

我对drupal相当陌生。我已经看过这个关于创建带有块的模块的示例。我的问题是我们可以将 $content 从 customblock_block_view 发送到另一个模板文件，可以通过添加一些额外的 HTML 来呈现它吗？如果有怎么办？

```
/**
 * Implements hook_block_info().
 */
function customblock_block_info() {
  $blocks = array();

  $blocks['list_modules'] = array(
    'info' => t('A listing of all of the enabled modules.'),
    'cache' => DRUPAL_NO_CACHE,
  );

  return $blocks;
}

/**
 * Implements hook_block_view().
 */
function customblock_block_view($block_name = '') {
  if ($block_name == 'list_modules') {
    $list = module_list();

    $theme_args = array('items' => $list, 'type' => 'ol');
    $content = theme('item_list', $theme_args);

    $block = array(
      'subject' => t('Enabled Modules'),
      'content' => $content,
    );

    return $block;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:05:29.940

使用该[`theme($hook, $variables)`](http://api.drupal.org/api/drupal/includes!theme.inc/function/theme/7)函数呈现项目。使用[Theme 开发者](http://drupal.org/project/devel_themer)模块找出要传递的内容为`$hook`. 对于块，它是`block`.

[主题开发者](http://drupal.org/project/devel_themer)模块还告诉您项目是通过函数还是模板呈现。在第一种情况下，查找函数`theme_block`。在第二种情况下，查找文件`block.tpl.php`. 该项目的文档告诉您，`$variables`数组应该是什么样子。

构造`$variables`数组并调用`theme('block', $variables)`.

请注意，对于模板文件，一些变量来自[`theme()`](http://api.drupal.org/api/drupal/includes!theme.inc/function/theme/7)文档中描述的预处理函数。此类变量不需要由[`theme($hook, $variables)`](http://api.drupal.org/api/drupal/includes!theme.inc/function/theme/7). 相关的预处理函数应在模板文件中列出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T20:46:00.813

您可以创建自己的模板文件，您只需要使用以下方式注册它[`hook_theme`](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_theme/7)：

```
function customblock_theme() {
    return array(
        'myblock' => array(
        'template' => 'mytpl',
        'variables' => array('variable' => NULL),
        ),
    );
} 
```

下一步是创建 tpl 文件；就像主题中的 mytpl.tpl.php 一样。然后，使用[`theme()`](http://api.drupal.org/api/drupal/includes!theme.inc/function/theme/7)

```
theme('myblock',$theme_args); 
```

现在，在您可以`$theme_args`使用的模板中`$variable`

# internet-explorer - 在流行的浏览器中自定义下载栏

> ID：15356747
> 
> 赞同：0
> 
> 时间：2013-03-12T08:47:53.460
> 
> 标签：internet-explorer, firefox

当有人尝试下载文件时，浏览器会在屏幕底部显示一个带有文本 RUN 或 SAVE 的小栏。对于某些用户来说，这可能很难注意到。

有什么方法可以通过使用 html/css 使其更明显？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T19:27:07.763

当然，您不能修改该栏，但您可以在单击下载链接时在屏幕上添加（例如）深色半透明覆盖层。下载栏将保持在顶部，给它一种“突出显示”的效果。然后设置一个超时时间让覆盖消失。

标准的解决方案是将用户带到一个解释该做什么的页面。见这里：[http ://www.mozilla.org/en-US/firefox/new/#download-fx](http://www.mozilla.org/en-US/firefox/new/#download-fx)

# haskell - 如何模拟haskell状态？

> ID：15356749
> 
> 赞同：5
> 
> 时间：2013-03-12T08:48:01.120
> 
> 标签：haskell, state

我写了一些haskell代码来切换树莓派上的一个引脚，这取决于我从树莓派上的另一个引脚获得的中断。在不知道先前的切换状态的情况下，我根本不知道如何切换引脚的状态。该程序本身非常简单。

```
 import Control.Concurrent
 import Data.IORef
 import HasberryPi

 main = do wiringPiSetup
           pinMode 0 output
           pinMode 7 input 
           pullUpDnControl 7 pull_down
           wiringPiISR 7 edge_both onoff
           threadDelay (15*(10^6))

 onoff s = do a <- readIORef s                               -- This is wrong
              digitalWrite 0 (if b then pinhigh else pinlow) -- This is wrong 
```

所以基本上这里发生的是引脚 7 被注册为中断。只要引脚 7 从高电平变为低电平或从低电平变为高电平，就会触发中断。每当触发中断时，它都会调用`onoff`切换引脚 0 状态的函数。

`main`功能是正确的。它的`onoff`功能就是问题所在。该`onoff`函数的预期行为是在引脚为低电平时使引脚 0 为高电平，并在引脚为高电平时将引脚切换为低电平。但要做到这一点，我需要在上一次调用`onoff`.

我尝试了状态单子。但问题是状态单子基于初始状态值传递状态。但在随后的调用中`onoff`，似乎不可能更改初始状态值。我想到了 IORef ，似乎没有什么不同。看起来它正在做状态正在做的事情..但仅限于 IO 内部。

我可以清楚地看到我非常缺少将状态存储在全局变量中的能力。而且我很高兴我无法做到这一点，因为我知道还有其他一些惯用的方法可以实现相同的目标。

非常感谢任何在正确方向上的帮助。

欢呼和问候。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T09:07:08.880

`State`monad 实际上是对在函数的额外参数中传递状态的概念的抽象——它仍然是纯粹的，它只是为你提供了很多语法帮助。`IORef`另一方面，它是实际可变值的实际更新，这就是它必须存在于`IO`monad 中的原因。这通常被认为是不可取的，除非出于性能原因需要，因为您失去了使用纯代码获得的所有关于惰性、执行顺序和并发性的承诺。

使用`State`and `IO`together 是通过使用 StateT monad 转换器来实现的，这可能被认为是将 State monad 包裹在 IO monad 周围。Haskell wiki 上有一些示例：[http](http://www.haskell.org/haskellwiki/Simple_StateT_use) ://www.haskell.org/haskellwiki/Simple_StateT_use显示了在使用 I/O 时如何维护状态，以及如何使用`lift`IO monad 函数在其中运行`StateT`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T17:58:49.467

这是一个小例子。我不确定它是否是惯用的 Haskell，但它应该足以让你走上正轨。而不是实际切换一个引脚（我没有要测试的 Raspberry Pi），它只是打印状态。他们都是 IO () 虽然所以它应该匹配。

你的真实状态大概是一个记录/列表/管脚数组。然后，您将索引传递给 togglePin，它的类型类似于

```
togglePin :: Int -> PStateT 
```

无论如何 - 这是示例，它在这里编译并运行良好。

```
import Control.Monad.State

-- Presumably you've got something like this defined in a library
data Pin = PinHigh | PinLow
    deriving (Eq,Show)

-- A simple state would be
-- type PState = State Pin
-- We want to wrap our state around IO () so need a transformer
type PStateT = StateT Pin IO ()

-- Simple print function
printPinState :: String -> Pin -> IO ()
printPinState msg pin = putStrLn $ msg ++ (show pin)

-- Toggles the state, real function would set the pin's level too rather than 
-- just print it's new state
togglePin :: PStateT
togglePin = do
    curr_p <- get
    lift $ printPinState "toggle before: " curr_p
    let new_p = if curr_p == PinHigh then PinLow else PinHigh
    lift $ printPinState "toggle after:  " new_p
    put new_p
    return ()

-- Initialise our state, then run our toggle function using the state
-- as its environment.
main = do
    let env = PinLow
    printPinState "main before:   " env
    (_, env') <- runStateT (togglePin) env
    printPinState "main after:    " env'
    -- And again for luck...
    (_, env'') <- runStateT (togglePin) env'
    return () 
```

# regex - 相互定义正则表达式

> ID：15356752
> 
> 赞同：0
> 
> 时间：2013-03-12T08:48:17.797
> 
> 标签：regex, recursion, context-free-grammar

在 JavaScript 中，是否可以根据其他正则表达式来定义正则表达式，从而递归地定义每个正则表达式？

例如，我想使用这些正则表达式（相互定义）来表示 JavaScript 编程语言语法的一小部分：

```
<functionDefinition> = function <functionName>(<parameterList>){statementList}
<statementList> = (<functionDefinition>| ... other valid statements go here ... ) //a series of JavaScript statements or function definitions

//each of these regular expressions are defined in terms of the others, allowing them to be infinitely nested 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:59:43.127

> 在 JavaScript 中，是否可以根据其他正则表达式来定义正则表达式，从而递归地定义每个正则表达式？

不，使用 JavaScript 的正则表达式实现是不可能的。

为此，您需要一个解析器（生成器）。可能的 JS 选项是：

*   吉森：http: [//zaach.github.com/jison/](http://zaach.github.com/jison/)
*   PEG.js：[http ://pegjs.majda.cz/](http://pegjs.majda.cz/)

# php - 如何仅使用 PHP 将文件从特定目录备份到 Dropbox？

> ID：15356766
> 
> 赞同：2
> 
> 时间：2013-03-12T08:49:09.577
> 
> 标签：php, dropbox, dropbox-php

我想创建一个 PHP 脚本来将文件从我网站上的特定目录备份到我的 Dropbox 帐户。

我试图搜索示例以及如何解决它，但我只找到了备份数据库或购买现成解决方案的代码。

这是我试过的代码

```
<?php
  $passw = "jason"; //change this to a password of your choice.
  if ($_POST) {
    require 'DropboxUploader.php';

    try {
        // Rename uploaded file to reflect original name
        if ($_FILES['file']['error'] !== UPLOAD_ERR_OK)
            throw new Exception('File was not successfully uploaded from your computer.');

        $tmpDir = uniqid('/tmpCapes/');
        if (!mkdir($tmpDir))
            throw new Exception('Cannot create temporary directory!');

        if ($_FILES['file']['name'] === "")
            throw new Exception('File name not supplied by the browser.');

        $tmpFile = $tmpDir.'/'.str_replace("/\0", '_', $_FILES['file']['name']);
        if (!move_uploaded_file($_FILES['file']['tmp_name'], $tmpFile))
            throw new Exception('Cannot rename uploaded file!');

    if ($_POST['txtPassword'] != $passw)
            throw new Exception('Wrong Password');

        // Upload
    $uploader = new DropboxUploader('user@example.com', 'password');// enter dropbox credentials
        $uploader->upload($tmpFile, $_POST['dest']);

        echo '<span style="color: green;font-weight:bold;margin-left:393px;">File successfully uploaded to my Dropbox!</span>';
    } catch(Exception $e) {
        echo '<span style="color: red;font-weight:bold;margin-left:393px;">Error: ' . htmlspecialchars($e->getMessage()) . '</span>';
    }

    // Clean up
    if (isset($tmpFile) && file_exists($tmpFile))
        unlink($tmpFile);

    if (isset($tmpDir) && file_exists($tmpDir))
        rmdir($tmpDir);
}
?> 
```

但不是通过我的网站将图像从我的 PC 上传到 Dropbox。我想修改上面的代码，将我网站上特定目录中的文件复制到 Dropbox。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T01:46:00.387

你需要递归代码。

编写一个以 dir 作为参数的函数。

让它通过目录循环查看每个文件。对于每个文件，它会检查它是否是一个目录，如果不是，它会复制它。

如果它是一个目录，则该函数会调用自身。

例如

```
// your code
require 'DropboxUploader.php';

$dirtocopy = './example_directory/';
$dropboxdir = 'backupdir/';
$uploader = new DropboxUploader('sample-email@gmail.com', 'password');// enter dropbox credentials

$errors = array(); // to store errors.

// function definition
function copyDirRecursive($dir) {
  global $uploader; // makes the "$uploader" below the one from outside the function
  if(is_dir($dir)) { // added if/else to check if is dir, and create handle for while loop
    $handle = opendir($dir); 
    if($handle === false) { // add if statements like this wherever you want to check for an error
      $errors[] = $php_errormsg; // http://php.net/manual/en/reserved.variables.phperrormsg.php
    }
  } else {
    return false;
  }
  while(false !== ($file = readdir($handle))) { // changed foreach to while loop
    if(!isdir($file)) {
      // copy the file
      // cp $dir . '/' . $file to $dropbox . '/' . $dir . '/' . $file; // pseudocode
      // below is actual code that hopefully will work
      $uploader->upload($dir.$file,$dropboxdir.$file);
    } else {
      if(!is_link($file)) { // probably best not to follow symlinks, so we check that with is_link()
        copyDirRecursive($dir . '/' . $file); // recursion time
      }
    }

  }
}

// CALL THE FUNCTION
copyDirRecursive($dirtocopy); // you have to call a function for it to do anything

print_r($errors); // use this or var_dump($errors) to see what errors came up 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:02:43.347

根据您拥有的代码，您想要一些类似的东西

```
require 'DropboxUploader.php';

$dirtocopy = './example_directory/';
$dropboxdir = '/backupdir/';
$uploader = new DropboxUploader('email@gmail.com', 'Password');// enter dropbox credentials

if ($handle = opendir($dirtocopy)) {
    while (false !== ($entry = readdir($handle))) {
        if ($entry != "." && $entry != "..") {

            $uploader->upload($dirtocopy.$entry, $dropboxdir.$entry);

        }
    }
    closedir($handle);
} 
```

我不是 100% 确定保管箱目录代码，因为我刚刚将它从您的示例中提取出来，您可能希望将第一个`/`放入`$dropboxdir`. 但我相信你能弄清楚。

作为参考，循环目录的代码是来自[http://php.net/manual/en/function.readdir.php的示例 #2](http://php.net/manual/en/function.readdir.php)

用于递归目录复制

```
require 'DropboxUploader.php';

function uploaddirtodropbox($dirtocopy, $dropboxdir, $uploader){
    if ($handle = opendir($dirtocopy)) {
        while (false !== ($entry = readdir($handle))) {
            if ($entry != "." && $entry != "..") {

                if(is_dir($entry)){
                    uploaddirtodropbox($dirtocopy.$entry.'/', $dropboxdir.$entry.'/', $uploader);
                } else {
                    $uploader->upload($dirtocopy.$entry, $dropboxdir.$entry);
                }

            }
        }
        closedir($handle);
    }
}

$dirtocopy = './example_directory/';
$dropboxdir = '/backupdir/';
$uploader = new DropboxUploader('email@gmail.com', 'Password');// enter dropbox credentials

uploaddirtodropbox($dirtocopy, $dropboxdir, $uploader); 
```

在您要求帮助使用此[https://github.com/jakajancar/DropboxUploader/](https://github.com/jakajancar/DropboxUploader/)的问题中，我已经给了您这样做的代码，但是如果您阅读了 github 页面，它会说

> 它的开发是在 Dropbox 发布他们的 API 之前开始的，为了工作，它会抓取他们的网站。所以你现在可以并且可能应该使用他们的 API。

因此，寻找替代方案可能是一个好主意。

# google-maps - 谷歌地图设置边界缩放级别

> ID：15356767
> 
> 赞同：0
> 
> 时间：2013-03-12T08:49:09.793
> 
> 标签：google-maps, google-maps-api-3

我有一张显示用户位置并自动放大的地图。我想知道如何将此缩放级别设置为“缩放”而“最大缩放”不起作用。经过一番谷歌搜索后，我似乎需要设置界限，但不知道从哪里开始。我希望让它放大到 12 左右。

以下是部分代码：

```
jQuery('#map_canvas').gmap('getCurrentPosition', function(position, status) {
    if ( status === 'OK' ) {
        var clientPosition = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
        jQuery('#map_canvas').gmap('addMarker', {'position': clientPosition, 'bounds': true});
        jQuery('#map_canvas').gmap('addShape', 'Circle', { 
            'strokeWeight': 0, 
            'fillColor': "#008595", 
            'fillOpacity': 0.25, 
            'center': clientPosition, 
            'radius': 15, 
            'clickable': false 
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:38:42.300

添加标记**后**，使用 -instance的 setZoom-method`google.maps.Map`应用自定义缩放

 **```
jQuery('#map_canvas').gmap('get','map').setZoom(12); 
```**

# javascript - 可以添加到网页的播放器小部件的数量是否有上限？

> ID：15356768
> 
> 赞同：0
> 
> 时间：2013-03-12T08:49:13.647
> 
> 标签：javascript, soundcloud

我正在开发一个项目，以根据搜索结果将 Soundcloud 播放器小部件添加到页面（请参阅[此问题](https://stackoverflow.com/questions/15355384/cannot-call-method-oembed-of-null-when-embedding-soundcloud-player-in-dynami)）。我能够成功添加播放器，但如果我在页面中添加超过 3 个播放器，它们就无法“播放”——我无法单击播放按钮并播放音乐。允许我添加到页面的工作小部件的数量是否有上限？

代码如下：

```
<html>
<head>
<script src="http://connect.soundcloud.com/sdk.js"></script>

<script>
function makeDivsFromTracks(tracks)
{
 var track;
 var permUrl;
 var newDiv;

 for(var ctr=0;ctr<tracks.length;ctr++)
 {
   track=tracks[ctr];

   if(track["downloadable"])
   {
   newDiv=document.createElement("div");
   newDiv.id="track"+ctr
   SC.oEmbed(track.permalink_url,{color:"ff0066"},newDiv);
   document.body.appendChild(newDiv);
   }
 }
}
</script>

</head>
<body>

<script>
SC.initialize({
    client_id: '9a81d4ed26119b89bc329700efef5ff2'
});
SC.get('/tracks',{duration:{from:180000,to:900000},tags:'hard trance'},function(tracks){makeDivsFromTracks(tracks);});
</script>

</body>
</html> 
```

在 JSFiddle 中添加了一个示例：http: [//jsfiddle.net/ZyvbD/1/](http://jsfiddle.net/ZyvbD/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:42:13.943

为了回答您的问题，我们对您页面上的小部件数量没有限制。但是请注意，许多小部件可能会减慢您的页面速度——它们是内容丰富的 iframe。

# c++ - 使用 typedef 和 std 编译错误

> ID：15356771
> 
> 赞同：0
> 
> 时间：2013-03-12T08:49:19.420
> 
> 标签：c++, visual-studio-2010, visual-studio, visual-c++

我正在使用 Visual Studio C++ 2010。

我有一个头文件，GNode.h，下面是一个片段：

```
#ifndef GNODE_H
#define GNODE_H
#include <vector>

typedef vector<int> ADJNODE_LIST; 
```

我会`Error: vector is not a template`在第 2 行得到一个错误`vector`

但是，当我这样添加`std::`时`vector`：

```
typedef std::vector<int> ADJNODE_LIST; 
```

没有编译错误。

似乎找不到`<vector>`图书馆。

谁能解释为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T08:50:55.213

因为向量存在于`std`命名空间中。

您可以将其视为已定义为：

```
namespace std {
    template<typename T, ...>
    class vector {
        ...
    };
} 
```

您包含的文件称为`vector`，但是要访问您需要使用其名称空间限定它的类型，因此`std::vector<int>`，`::`范围运算符在哪里。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-03-12T08:54:51.183

它可以，但它被称为命名空间的东西包围。

在命名空间之外（例如您的程序），您无权访问命名空间内的元素

您可以使用

```
using namespace std; 
```

或在 std 命名空间中添加所有内容`std::`

# python - 更新根证书失败：cacert.pem

> ID：15356773
> 
> 赞同：1
> 
> 时间：2013-03-12T08:49:30.347
> 
> 标签：python, cloud, cluster-computing, openstack, openstack-nova

我现在使用 devstack 安装 openstack，但不幸的是，我遇到了一个问题：

```
/home/my/devstack/tools/create_userrc.sh -PA --target-dir /home/my/devstack/accrc
ERROR: The server has either erred or is incapable of performing the requested operation. (HTTP 500)
Failed to update the root certificate: /home/my/devstack/accrc/cacert.pem 
```

你能告诉我如何修复它吗？

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-08T01:01:23.820

这可能意味着 nova-cert 服务没有运行。您可以在 devstack 屏幕列表中找到它的屏幕`n-crt`。在那里寻找错误。

如果它崩溃了`"Table 'nova.services' doesn't exist"`，那可能是由于降级后额外的 db 迁移 *.pyc 文件造成的。停止 devstack，删除所有`/opt/stack/nova/nova/db/sqlalchemy/migrate_repo/versions/*.pyc`文件并重新启动 devstack。

# mysql - MySQL存储过程变量问题

> ID：15356774
> 
> 赞同：0
> 
> 时间：2013-03-12T08:49:32.600
> 
> 标签：mysql, variables, stored-procedures

变量从未通过查询更新，并且始终具有默认值

```
BEGIN
    DECLARE sP INT DEFAULT 1;
    DECLARE cBB INT DEFAULT 0;

    SELECT sprice, cb INTO  sP, cBB FROM item WHERE id = 2;
END 
```

这里需要一些指导来了解它有什么问题（MySQL 5.5.20 版）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:18:40.937

将变量重命名`cb`为另一个 -

```
BEGIN
    DECLARE sP INT DEFAULT 1;
    DECLARE cB_var INT DEFAULT 0;

    SELECT sprice, cb INTO  sP, cB_var FROM item WHERE id = 2;
END 
```

变量名称应与字段名称不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T05:44:13.213

以下两种方法效果很好，不需要 DECLARE 变量

```
BEGIN
     SELECT @sP := sprice, @cBB := cb FROM item WHERE id = 2;
END 
```

`INTO`或者如果我们想用子句来做

```
BEGIN
     SELECT sprice, cb INTO  @sP, @cBB FROM item WHERE id = 2;
END 
```

不同之处在于，在第一个语句中，您可以拥有不需要存储在变量中的列，而在第二个语句中，`... INTO ...`每个列出的列都必须存储在变量中。

# shell - 如何从 shell 脚本中停止 SQL*Plus？

> ID：15356775
> 
> 赞同：0
> 
> 时间：2013-03-12T08:49:33.273
> 
> 标签：shell, unix, sqlplus

在我的 shell 脚本中，我有一个命令，它从数据库中获取值并将其存储在一个变量中：

```
seq_day=`$ORACLE_HOME/bin/sqlplus -s username/password @$SQL_FILES_DIR/myScript.sql` 
```

该脚本运行良好，我能够在`seq_day`.

当用户名或密码不正确时，真正的问题就出现了。脚本永远不会停止。

有什么办法可以退出脚本吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:08:02.260

看起来您需要以下选项（强调我的）：

> 登录选项
> 
> `-L[OGON]`
> 
> 指定如果初始连接不成功，则不重新提示输入用户名或密码。**这在必须成功或失败的操作系统脚本中很有用，并且**如果数据库服务器未运行，您不希望再次提示您提供连接详细信息。此选项不适用于 Windows 图形用户界面 SQL*Plus 可执行文件。

**来源：** [SQLPLUS 命令](http://docs.oracle.com/cd/B10500_01/server.920/a90842/ch4.htm#1005759)

# sharepoint-2010 - 当我获取站点主题默认值（无主题）时，我无法获取主题 url（空主题 url）

> ID：15356781
> 
> 赞同：0
> 
> 时间：2013-03-12T08:49:47.173
> 
> 标签：sharepoint-2010

目前，我使用的是sharepoint 2010，我使用下面的代码来获取站点主题的颜色，但是当我获得默认（无主题）时它会发生异常（空主题url）。请帮我获得默认颜色（无主题）。

```
using (SPSite site = new SPSite(this.Context.Request.Url.ToString()))
{
  using (SPWeb web = site.OpenWeb())
  {
     string urlTheme = ThmxTheme.GetThemeUrlForWeb(web);                   
     using (ThmxTheme thmxTheme = ThmxTheme.Open(web.Site, urlTheme))
     {
        dark2 = thmxTheme.DarkColor2.DefaultColor.Name;                           
     }
  }
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T09:03:21.473

你不能做这个。因为在 SharePoint 主题文件夹中没有默认名称的主题。

谢谢

阮

# windows-phone-7 - 使用windws phone 8从webBrowser内的网站在文本框中键入文本

> ID：15356789
> 
> 赞同：0
> 
> 时间：2013-03-12T08:50:02.000
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone

试图在我从 webBrowser 加载的 certin 网站上的文本框中输入文本。

尝试使用 HTMLElement，但无法识别，因为它来自 system.windows.FORMS。

关于我如何解决这个问题的任何想法？

例子：

```
browser.Navigate(new URI("http://www.google.com"));
// Here get the textbox that we all type our text to search (the search textbox)
//type text inside it. 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:33:35.320

你必须调用一些javascript。例如获得标题：

[如何在 WebBrowser 控件中获取页面标题？](https://stackoverflow.com/questions/7699381/how-can-i-get-the-page-title-in-webbrowser-control)

所以，browser.InvokeScript("eval", "document.getElementById('inputbox').text = 'INPUT'");

（JavaScript 未测试）。

# php - PHP bcdiv() 在大数上除以零

> ID：15356799
> 
> 赞同：1
> 
> 时间：2013-03-12T08:50:27.587
> 
> 标签：php, bcmath

以下代码给出“警告：bcdiv() [function.bcdiv]：除以零...”

```
$a = 20000000000000002;
$b = 20000000000000004;
echo bcdiv($a, $b); 
```

为什么会这样？

如果我将值放在“”中，那么它不会发出警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:55:51.533

你把你的数字写成整数，在 PHP 中这些数字太高了，被截断为最大可能的整数值。BCMath 适用于字符串。如果您使用的数字很高，请始终确保将它们放在引号中以确保它们确实是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:15:42.180

您将它们包装起来是正确的，`""`因为 bcdiv 想要将输入作为字符串

```
string bcdiv ( string $left_operand , string $right_operand [, int $scale ] ) 
```

左操作数

> 左操作数，作为字符串。

右操作数

> 右操作数，作为字符串。

规模

> 此可选参数用于设置结果中小数点后的位数。您还可以使用 bcscale() 为所有函数设置全局默认比例。

来自[http://php.net/manual/en/function.bcdiv.php](http://php.net/manual/en/function.bcdiv.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:55:23.570

```
string bcdiv ( string $left_operand , string $right_operand [, int $scale ] ) 
```

参考 - [http://www.php.net/manual/en/function.bcdiv.php](http://www.php.net/manual/en/function.bcdiv.php)

看看`parameters`和`type`-

左操作数

> 左操作数，作为字符串。

右操作数

> 右操作数，作为字符串。

规模

> 此可选参数用于设置结果中小数点后的位数。您还可以使用 bcscale() 为所有函数设置全局默认比例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T08:55:35.083

根据[文档](http://www.php.net/manual/en/function.bcdiv.php)，`bcdiv`接受字符串：

```
string bcdiv ( string $left_operand , string $right_operand [, int $scale ] ) 
```

显然，您提供的整数值对于标准 PHP 整数来说太大而无法容纳该值。`bcmath`适用于字符串（这实际上并不奇怪）：

> 对于任意精度的数学，PHP 提供了二进制计算器，它支持任何大小和精度的数字，以字符串表示。

（来自[bcmath 介绍](http://www.php.net/manual/en/intro.bc.php)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T08:55:37.233

BCMath 函数都接受字符串作为参数，因此将它们放在引号中是您想要做的。

BCMath 文档可在以下位置找到：[http ://www.php.net/manual/en/book.bc.php](http://www.php.net/manual/en/book.bc.php)

# ruby-on-rails - 必须始终运行 rake assets:precompile 在启动服务器之前

> ID：15356800
> 
> 赞同：1
> 
> 时间：2013-03-12T08:50:30.627
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我不确定我改变了什么，但在运行我的 Rails 应用程序之前，我总是必须执行：`rake assets:precompile`

否则，我的咖啡脚本文件不会更新。如何让 Rails 自动为我运行它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:57:59.257

在开发模式下不需要运行`$ rake assets:precompile`。每次向应用发送请求时都会编译它们。只需删除整个`public/assets`目录，然后您就可以在实时应用程序上更新您的 CSS 和 JS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:02:10.213

尝试：

**配置/环境/development.rb**

```
config.serve_static_assets = false 
```

这样做，

不会提供文件`public`夹中的任何文件。

另一种方法是您必须删除已编译的文件作为第二个选项。在开发模式下，您不需要那样编译。它发生在应用程序部署期间。

# canvas - 画布图像和 S3（CORS 策略）

> ID：15356801
> 
> 赞同：0
> 
> 时间：2013-03-12T08:50:32.343
> 
> 标签：canvas, amazon-s3, coffeescript, cors

目前我在画布画廊工作，我一直被 CORS 问题困扰。所以我真的不知道我应该从哪一刻开始，我只是试着描述我已经完成的步骤并描述我的麻烦。

**介绍：**

我使用 CoffeeScript、jQuery 和我存储在 Amazon S3 上的所有图像。

**问题**

所以，我的存储桶的第一个 CORS 配置很像这样：

```
<?xml version="1.0" encoding="UTF-8"?>
<CORSConfiguration xmlns="http://s3.amazonaws.com/doc/2006-03-01/">
    <CORSRule>
        <AllowedOrigin>https://level.travel</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
        <AllowedMethod>POST</AllowedMethod>
        <AllowedMethod>PUT</AllowedMethod>
        <MaxAgeSeconds>3000</MaxAgeSeconds>
        <AllowedHeader>Content-*</AllowedHeader>
        <AllowedHeader>Host</AllowedHeader>
        <AllowedHeader>Origin</AllowedHeader>
    </CORSRule>
    <CORSRule>
        <AllowedOrigin>https://*.level.travel</AllowedOrigin>
        <AllowedMethod>GET</AllowedMethod>
        <AllowedMethod>POST</AllowedMethod>
        <AllowedMethod>PUT</AllowedMethod>
        <MaxAgeSeconds>3000</MaxAgeSeconds>
        <AllowedHeader>Content-*</AllowedHeader>
        <AllowedHeader>Host</AllowedHeader>
        <AllowedHeader>Origin</AllowedHeader>
    </CORSRule>
</CORSConfiguration> 
```

以及开发环境的类似规则（当然是不同的域）。

在画廊初始化时，我只收集图像的 URL，然后收集一些关于它们的信息。此功能由这部分代码提供：

```
images_array.each (i, image)=>
    console.log "Loading image #{i}"
    canvas_image                = new Image
    canvas                      = document.createElement('canvas')
    canvas_context              = canvas.getContext("2d")
    canvas_image.crossOrigin    = 'anonymous'
    image_index                 = i

    canvas_image.onload         = =>
        canvas.width        = canvas_image.naturalWidth
        canvas.height       = canvas_image.naturalHeight
        canvas_context.drawImage(canvas_image, 0, 0)
        localStorage.setItem(@storage_ns(i), canvas.toDataURL('image/jpeg'))
        @full_images[i]     = $(image).data("fullImage")
        @hidden_area.append(canvas)
        @progress_event(canvas, image_index)

    canvas_image.onerror        = => @error_event(image_index)

    if canvas_image.complete || canvas_image.complete is undefined
        canvas_image.src    = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==";
        canvas_image.src    = $(image).data("thumbImage") 
```

这是针对我的需要扩展的[MDN 解决方案。](https://developer.mozilla.org/en-US/docs/HTML/CORS_Enabled_Image)

方法`@progress_event`将每个图像放入数组中（如内存缓存），并提供一些附加信息。这个数组看起来像这样：

```
[
    {
        image   : canvas    // the canvas element which will be drawed on main Canvas
        small   : { ... }   // information about small images (eg. size, position)
        large   : { ... }   // similar to small
    }
] 
```

然后是最有趣的部分和（我想）我的问题：

图库由两个磁带组成（大图像和小图像在彼此的顶部）。要绘制两个磁带，我需要运行`@render_gallery_tape`两次。这些函数在无限循环中执行（`setTimeout`45 FPS）并在`requestAnimationFrame`.

这就是我所说的`@render_gallery_tape`：

```
@render_gallery_tape('large')
@render_gallery_tape('small') 
```

`@render_gallery_tape`是异步的，两个函数同时工作。

在`@render_gallery_tape`我有这个：

```
// pane is an item of array described above
// @cache_context is a context of off-screen Canvas
@cache_context.drawImage(pane.image,
                         Math.ceil(current_offset),
                         Math.ceil(margin_top),
                         Math.ceil(size.width),
                         Math.ceil(size.height)) 
```

因此，有时当我的画廊尝试渲染小（底部）磁带时，我会收到安全错误（CORS 策略）。浏览器认为我的来源有误。

我知道我可以代理这些图像（例如使用 nginx），但我们使用 EC2，我不想增加应用程序服务器上的流量。所以我被迫使用S3。

提前致谢。

**PS**如果需要，我可以提供任何其他信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T06:56:56.560

可能不是您的问题，但请确保在您`crossorigin="use-credentials"`的`<video>`标签中。

“该元素会跟踪其中的数据来自何处，并且如果它知道您从另一个网站获得了某些东西（例如，如果您在画布上绘制的元素指向一个跨域文件），它”会“污染”画布。”

# cpu - 如何将多核cpu转换为单核系统

> ID：15356806
> 
> 赞同：0
> 
> 时间：2013-03-12T08:50:48.557
> 
> 标签：cpu, core

在问这个问题之前，我在网上搜索“将多核 cpu 转换为单核”在我的应用程序中，我只想分配单核。由于进程有更多的 cpu 使用率，所以我想分配一个多核的单核来增加处理能力。

是否有可能将多核视为单核。有什么技巧或软件可以帮助我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:59:34.037

首先，使用多核与多线程有关。如果您可以重写应用程序，您可以尝试将线程减少到单个。如果你可以使用一些虚拟环境来运行这个应用程序，你可以选择你想要使用的核心数量。关于这个主题的讨论可以在[assign program single core](http://www.tomshardware.co.uk/forum/244402-28-assign-programs-single-core)上找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T10:33:25.957

默认情况下，您的程序将使用单核，通常人们开发算法软件，作为单线程，很可能您的 CPU 具有多核能力，因此您可以增强您的程序以并发并行工作，具体取决于在您使用的编程语言中，您可能有一些替代方法可以做到这一点。请记住，编程需要练习，并不是所有的程序都能从中受益匪浅。我希望这可以帮助你。干杯。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-19T17:00:00.083

在只有一个内核**的虚拟机**中运行您的程序。

例如 VirtualBox、VMware

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-14T19:30:39.157

您可以使用 linux 命令“ **taskset** ”将您的进程仅绑定到特定核心（即，您的进程和所有子进程将仅使用该单一核心资源）。

**例如，要仅在 oncore 0**上运行 'ls' ，请使用以下命令

```
taskset -c 0 /bin/ls 
```

使用“ **taskset -h** ”来了解更多关于如何使用该命令的信息，但它非常简单！

# c++ - 通过使用 OpenCV 单击图像中的点来访问像素值

> ID：15356812
> 
> 赞同：1
> 
> 时间：2013-03-12T08:51:18.287
> 
> 标签：c++, qt, opencv

有没有办法在打开的 CV 上单击显示图像的指定点，以便稍后在其值上打印？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T08:58:24.457

简单的谷歌搜索给出了这个[http://www.cs.iit.edu/~agam/cs512/lect-notes/opencv-intro/](http://www.cs.iit.edu/~agam/cs512/lect-notes/opencv-intro/) - 查看该`Input handling`部分，它定义了如何进行鼠标输入处理程序回调，你会得到鼠标坐标，您可以在图像矩阵上使用。应该解决问题。

**从上面的链接：**

插入此函数定义：

```
void mouseHandler(int event, int x, int y, int flags, void* param)
{
    switch(event){
    case CV_EVENT_LBUTTONDOWN:
        if(flags & CV_EVENT_FLAG_CTRLKEY) 
            printf("Left button down with CTRL pressed\n");
        break;
    case CV_EVENT_LBUTTONUP:
        printf("Left button up\n");
        break;
    }
} 
```

在主循环或事件循环或您进行初始化等的任何地方，

```
int mouseParam= CV_EVENT_FLAG_LBUTTON;
cvSetMouseCallback("win1",mouseHandler,&mouseParam); 
```

其中“win1”应替换为您的窗口名称。更多细节`cvSetMouseCallback`可以在[http://opencv.willowgarage.com/documentation/user_interface.html中找到](http://opencv.willowgarage.com/documentation/user_interface.html)

# java - 我应该如何将值插入到动态创建的数组列表中？

> ID：15356816
> 
> 赞同：-1
> 
> 时间：2013-03-12T08:51:45.697
> 
> 标签：java

Makoto[回答](https://stackoverflow.com/a/15354784/451518)了我发布的问题。这是他对我创建动态数组列表问题的回答。

```
public List<ArrayList<Object>> dynamicSizedLists(final int size) {
    List<ArrayList<Object>> retVal = new LinkedList<ArrayList<Object>>();
    final int MAX_SIZE = 1000;
    int iterations = size / MAX_SIZE;
    for(; iterations > 0; iterations--) {
        retVal.add(new ArrayList<Object>(MAX_SIZE));
    }
    retVal.add(new ArrayList<Object>(size % MAX_SIZE));

    return retVal;
} 
```

我应该如何将值插入到创建的数组列表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:57:04.130

只需使用 foreach 通过 retVal

```
for(ArrayList<Object> list : retval){
   list.add(object);
} 
```

或者您可以使用简单的 for 运算符来完成

```
for(int i = 0; i < retVal.size(); i++){
   retVal.get(i).add(object);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T08:55:35.127

*从列表列表中*获取一个列表，并添加一个元素：

```
List<ArrayList<Object>> lists = dynamicSizedLists(3);

lists.get(0).add("Hello World");
lists.get(1).add("Foo");
lists.get(1).add("Bar");

ArrayList<Object> list = lists.get(2);
list.add(new Integer(2));
System.out.println(lists); 
```

顺便说一句，它应该`List<List<Object>>`（或者可能`<T> List<List<T>>`）在`dynamicSizedLists`. 使用集合类而不是接口是不好的风格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T08:55:50.590

做这个：

```
for(; iterations > 0; iterations--) 
{ 
    //create the array list first,
    ArrayList<Object> obj = new ArrayList<Object>(MAX_SIZE)
    //populate the contents of the above array list 
    obj.add(WhatEverThatIsToBeAdded);
    //finally add the above arraylist to your retVal list
    retVal.add(obj);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T08:56:14.850

据我所知，您可以通过 get() 从数组列表列表中获取单个数组列表，然后您可以添加所需的值。

# android - 播放视频后无法返回上一个（传感器）活动

> ID：15356817
> 
> 赞同：-1
> 
> 时间：2013-03-12T08:51:46.830
> 
> 标签：android, video, media-player

我只是 Android 编程的新手。我的应用程序有问题。这个应用程序使用传感器，当它达到某个阈值时。它将打开另一个活动并播放视频。传感器活动实际上正在工作，它会在达到阈值时播放视频。我的问题是：当视频结束时，它崩溃并且 logcat 说

> < E/AndroidRuntime(4418): java.lang.RuntimeException: 无法暂停活动 {...}: java.lang.NullPointerException。

我希望我的应用程序在播放视频后返回到主要活动，即传感器活动。

希望你能帮助我。谢谢。

下面是我的清单文件的片段：

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.hahndroid.myapp.SensorActivity"
        android:label="@string/app_name" 
        android:configChanges="orientation|screenSize">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name="com.hahndroid.myapp.PlayVideoActivity"
        android:label="@string/app_name"
        android:configChanges="orientation|screenSize" >
    </activity>
</application> 
```

* * *

下面是我的第一个活动的片段，它是一个传感器活动，它工作正常：

包 com.hahndroid.myapp;

```
...

public class MainActivity extends Activity implements SensorEventListener {

        private SensorManager mySensorManager;

// some variables and computations

    }

private void executeShakeAction() {

    Intent Intent = new Intent(this, PlayVideoActivity.class);
            startActivityForResult(Intent, 0);

         // it plays the Video from raw folder of PlayVideoActivity.class 
} 
```

下面是我命名为 PlayVideoActivity.class 的第二个活动的 java 代码：

包 com.hahndroid.myapp;

...

```
public class PlayVideoActivity extends Activity {

    VideoView videoView;
    Intent intent;
    MediaPlayer mp;

    @Override
    public void onDestroy() {
            super.onDestroy();

            mp.stop();
            mp.release();
            mp=null;
        }

    @Override
    public void onPause() {
        super.onPause();

        mp.stop();
        mp.release();
        mp=null;
    }  

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_play_video);

        VideoView videoView = (VideoView) findViewById(R.id.myvideoview); 
        Uri pathToVideo = Uri.parse("android.resource://com.hahndroid.myapp/" + R.raw.mp4_file`enter code here`);  
        videoView.setVideoURI(pathToVideo);
        videoView.requestFocus(); 
        videoView.start();

        videoView.setOnCompletionListener(new OnCompletionListener() {
            @Override
            public void onCompletion(MediaPlayer mp) {

                Intent intent = new Intent();
                setResult(RESULT_OK, intent);
                finish();

        }
        });

    }

} 
```

以下是 Logcat 日志：

> 03-12 16:47:54.809: D/AndroidRuntime(4418): 关闭 VM 03-12 16:47:54.809: W/dalvikvm(4418): threadid=1: 线程退出未捕获异常 (group=0x2b542210) 03 -12 16：47：54.819：E/AndroidRuntime（4418）：致命异常：主要 03-12 16：47：54.819：E/AndroidRuntime（4418）：java.lang.RuntimeException：无法暂停活动 {com.hahndroid。 Creepyguard/com.hahndroid.myapp.PlayVideoActivity}: java.lang.NullPointerException 03-12 16:47:54.819: E/AndroidRuntime(4418): at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2726) 03-12 16:47:54.819: E/AndroidRuntime(4418): 在 android.app.ActivityThread.performPauseActivity(ActivityThread.java:2682) 03-12 16:47:54.819: E/AndroidRuntime(4418): 在 android.app.ActivityThread .handlePauseActivity(ActivityThread.java:2660)

我试图像这样编辑我的第二个活动（PlayVideoActivity）：

包 com.hahndroid.myapp;

```
public class PlayVideoActivity extends Activity {
private MediaPlayer mp;
VideoView videoView;
Intent intent;

@Override
public void onDestroy() {
        super.onDestroy();

        mp.stop();
        mp.release();
        mp=null;
    }

@Override
public void onPause() {
    super.onPause();

    mp.stop();
    mp.release();
    mp=null;
}  

@Override
protected void onCreate(Bundle savedInstanceState) {
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_play_video);

    VideoView videoView = (VideoView) findViewById(R.id.myvideoview); 
    Uri pathToVideo = Uri.parse("android.resource://com.hahndroid.myapp/" + R.raw.mp4_file`enter code here`);  
    videoView.setVideoURI(pathToVideo);
    videoView.requestFocus(); 
    videoView.start();

    videoView.setOnCompletionListener(new OnCompletionListener() {
        @Override
        public void onCompletion(MediaPlayer mp) {

            Intent intent = new Intent();
            setResult(RESULT_OK, intent);
            finish();

    }
    });

} 
```

}

但是在logcat中仍然有同样的错误，Eclipse在暂停活动时遇到了麻烦......

所以我尝试删除onPause（）和onDestroy，发生的事情是：在第二个活动上播放视频后，它返回到第一个活动（传感器活动）但看起来它卡住了，它不再有感觉了，但是， logcat 中的错误消失了……但我知道它仍然是错误的……

我的应用程序活动应该来回运行（第一个活动应该感应到某个阈值然后播放视频，然后在播放视频后，它应该回到第一个活动并再次感应）。

请帮我生成正确的代码。再次提前感谢。

哈恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:12:57.327

您没有提供完整的堆栈跟踪。堆栈跟踪继续揭示根本原因，即`mp`null in `onPause()`; 您从未为变量赋值。（请注意，它也在 中引用`onDestroy()`。）

如果您（正确地）指定`mp`为`private`，Eclipse 会警告您这一点。如果您在调试模式下运行代码，它也会向您显示，因为调试器将停止在未捕获异常的行上。

# android - 如果我再次卸载并安装应用程序，如何实施恢复

> ID：15356819
> 
> 赞同：4
> 
> 时间：2013-03-12T08:52:03.533
> 
> 标签：android, in-app-purchase, google-play

我在 Google Play 的应用程序购买中实施。我有*DungeonsRedux*示例。这里

```
restoreTransactions(); 
```

我知道有一种方法可以恢复交易。但是如果我卸载我的应用程序并重新安装它，“我怎么知道我是否已经购买了一个项目？” 我已经为亚马逊实现了应用内购买和恢复，但在亚马逊我得到了亚马逊 SDK，它存储了测试账户的购买交易记录。我如何在 Google Play 中实现这一点（恢复能力）

是否需要在 Google Play 上创建帐户才能获得恢复响应？如果是，那么我尝试在 Google Play 上创建一个测试帐户。他们要钱。如果没有，那么是否有任何 SDK 提供响应。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T06:24:26.667

我建议您先使用示例应用程序对其进行测试。这是您可以测试它的方法。正确查看以下示例应用程序后，这将解决您的恢复问题

**步骤 1.**安装示例应用程序 - [TrivialDrive](http://developer.android.com/training/in-app-billing/preparing-iab-app.html#GetSample)

**第 2 步。**现在使用静态响应进行测试：Mainactivity 上有 4 个按钮，将按钮项目代码替换为这些保留的产品 ID。

*   android.test.purchased
*   android.test.取消
*   android.test.refunded
*   android.test.item_unavailable

要使用这些保留的产品 ID，您不必在开发人员控制台应用程序中添加项目这是用于测试您的应用程序的[链接](http://developer.android.com/google/play/billing/billing_testing.html#billing-testing-static)

使用上述方法进行测试后，您就可以使用自己的产品进行测试了，这是 [使用您自己的产品 ID 测试应用内购买的详细教程链接](http://developer.android.com/google/play/billing/billing_testing.html#billing-testing-real)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-25T11:47:07.323

我不是专家，但我会尽力在这里提供帮助。我相信要恢复您购买的商品，您将需要购买商品的 SKU。要进行测试，您必须为您的应用创建实际的 SKU。您可以通过将已签名的 apk 添加到 Beta 测试并将详细信息添加到商品列表来做到这一点。之后，您可以在应用内产品部分添加有关可购买项目的详细信息。通过这样做，您可以为应用程序中的每个可购买项目分配标题、描述、成本和 SKU（产品 ID）。现在，要恢复您的商品，您需要拥有已购买商品的 SKU，仅此而已。

您可以通过以下步骤来做到这一点：

1.  请按照以下步骤完成操作，但您需要签名的 apk 来测试功能（您将上传到开发者控制台的内容相同）。
2.  在 IabHelper 类中创建您自己的方法，我们称之为 getPurchasesDetail()。在此方法中，使用以下代码行：

```
 ```
Bundle ownedItems=mService.getPurchases(3, mContext.getPackageName(), "inapp", null);
ArrayList<String> ownedSkus=new ArrayList<String>();
int response = ownedItems.getInt("RESPONSE_CODE");
if (response == 0) 
{
     ownedSkus = ownedItems.getStringArrayList("INAPP_PURCHASE_ITEM_LIST");
} 
``` 现在，以上几行将在 arraylist 中为您提供已购买 SKU 的列表，为您的方法输入一个返回类型，并在您需要恢复购买的类中获取它。

1.  在您要恢复购买的班级中，执行以下操作：

```
 ```
iabHelper=new IabHelper(this, "you public here");
iabHelper.startSetup(new OnIabSetupFinishedListener() 
{
    @Override
    public void onIabSetupFinished(IabResult result) 
    {
    if(result.isSuccess())
    {
        try 
        {
             ownedSkus=iabHelper.getPurchasesDetail();//get purchase list
             //Now you have the purchased SKU list in an arraylist, you can use SharedPreferences or something else for the further process.
        }
        catch (RemoteException e) {
        e.printStackTrace();
        }
       }
      }
    }); 
``` 
4\. 现在，将带有此代码和公钥的签名 apk 上传到开发人员控制台（处于 Beta 测试阶段），并使用相同的 apk 检查到目前为止已完成的实施。但是，请在恢复之前购买物品，不要忘记这样做。我希望这有帮助。谢谢。

```

```

# servicestack - 如何更改详细堆栈错误 (UnauthorizedAccessException)

> ID：15356826
> 
> 赞同：1
> 
> 时间：2013-03-12T08:52:39.367
> 
> 标签：servicestack

当我使用`[Restrict]`属性时，我收到了消息：

```
Could not execute service '', The following restrictions were not met: '\n -[External, Secure, HttpHead, HttpGet, HttpPut, HttpDelete, HttpOther, OneWay, Soap11, Soap12, Xml, Jsv, ProtoBuf, Csv, Html, Yaml, MsgPack, FormatOther, AnyEndpoint]'\n Unauthorized call was made from: Localhost, InSecure, HttpPost, Reply, Json 
```

我可以改变它吗？

谢谢。

# qt - 创建一个简单的加法计算器

> ID：15356833
> 
> 赞同：0
> 
> 时间：2013-03-12T08:53:06.183
> 
> 标签：qt, qlineedit

```
void FindCrap::on_BtnAdd_clicked()
{
QString fnum = ui->TxtFnum->text();
QString snum = ui->TxtSnum->text();
ui->TxtAns->setText(QString(fnum.toInt() + snum.toInt()));
} 
```

当我运行这段代码时什么都没有发生.. 甚至没有错误。BtnAdd 不起作用似乎是问题所在..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:09:34.563

首先确保您的插槽被正确调用。在插槽的第一个使用 a`qDebug()<<"something";`并查看是否会显示某些内容`output window`。或者简单地在插槽的第一个设置断点并对其进行调试。
其次，更改最后一行：

```
ui->TxtAns->setText(QString(fnum.toInt() + snum.toInt())); 
```

至

```
ui->TxtAns->setText(QString::number(fnum.toInt() + snum.toInt())); 
```

我的意思是使用`QString::number`函数将数字转换为 QString

# ios - 静态库在 iOS 模拟器上给出错误并在 iOS 设备上工作

> ID：15356837
> 
> 赞同：6
> 
> 时间：2013-03-12T08:53:12.870
> 
> 标签：ios, ios-simulator, static-libraries

目前我正在开发一个 iOS 应用程序（iOS 6），我需要在其中实现一个静态库。

[我使用本教程](http://www.icodeblog.com/2011/04/07/creating-static-libraries-for-ios/)成功实现了静态库。我成功地将静态库添加到其他项目并将应用程序安装到 iPhone ！它工作成功。

但是我的问题是，当我尝试在模拟器上运行它时，出现了一些错误：

```
 "_OBJC_CLASS_$_MMPAlert", referenced from:
      objc-class-ref in ViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

![Xcode 错误控制台](../Images/dd589d0f8a02361a37c68eb44ddf3d7c.png)

我添加了目标架构，例如：

![目标设置](../Images/611a826e1dfc95694d9713f036e8611b.png)

我搜索了很多但找不到解决方案，为什么我的库在设备上工作并在模拟器上出错。

请帮助我，提前谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T09:33:42.457

您已经正确地为设备架构构建了您的库。iOS Simulator 不是模拟器，这意味着代码需要能够在您的 Mac 架构上运行，这显然与您设备的架构不同。

由于库是预编译的（针对特定架构），一旦您在项目中使用它，它所包含的代码就不会为您当前的目标再次编译。这就是为什么首先需要为这两种架构构建库的原因。

[这个 SO Answer](https://stackoverflow.com/a/2996304/416600)解释了如何将两个库构建捆绑到一个方便的“胖文件”中。

# c# - Windows Phone 8 C# 加载和绘制 PNG

> ID：15356838
> 
> 赞同：-1
> 
> 时间：2013-03-12T08:53:19.170
> 
> 标签：c#, image, load, windows-phone-8, draw

我正在用 C# 和 XAML 制作一个音乐理论游戏，其中一个音符出现在五线谱上，你按下相应的按钮，然后它在一个新的位置产生一个新的音符，游戏从那里“循环”直到你用完生活……等等

但是我找不到任何可以告诉我如何为 Windows Phone 8 加载和绘制 .png 文件的内容。主要问题是位置发生了变化，我要做的就是让便笺图像出现在其中一个制作新音符时定义的位置。

它应该很简单：

定义位置->加载图像->|：根据随机数选择随机位置->在选定位置绘制图像->如果正确，删除图像：| ...ETC

不应该吗？（它与 XNA 一起使用，但遗憾的是微软已经停止了它）

看了教程，已有问题和MSDN参考文档，但是没有Bitmap Class，System.Drawing好像也不存在。在 XNA 中，这些东西非常简单，但它似乎不必要地复杂（或者可能太明显而无法指出）。我尝试过使用 Image 类，但找不到与加载或绘图有关的任何内容。

我只是想加载一个存储在本地的图像。我已将所有笔记坐标存储在 Point 值中，但它正在加载和绘制图像，这是绊脚石。：/

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:07:16.253

有一个[`Image`](http://msdn.microsoft.com/en-us/library/system.windows.controls.image%28v=vs.95%29.aspx)显示图片的控件。您可以将其放入 Canvas 容器中，这样您就可以设置其位置（以像素为单位）。

```
<Canvas>
    <Image Source="/YourPicture.png" Canvas.Top="50" Canvas.Left="30" />
</Canvas> 
```

您也可以以编程方式执行此操作：

```
var image = new Image();
image.Source = new BitmapImage(uri);
canvas.Children.Add(image);
Canvas.SetTop(image, 50);
Canvas.SetLeft(image, 30); 
```

# ruby-on-rails - 我添加了我的模型关联 belongs_to 但没有将列添加到合适的表中

> ID：15356843
> 
> 赞同：0
> 
> 时间：2013-03-12T08:53:49.317
> 
> 标签：ruby-on-rails

我有 2 个名为 class1 和 student 的模型，创建它们后，我添加了关联。然后我的模型是：

```
class Student < ActiveRecord::Base
  attr_accessible :address, :birthdate, :name
  belongs_to :class1
end

class Class1 < ActiveRecord::Base
  attr_accessible :name
  has_many :students
end 
```

我尝试通过 rails 控制台为模型创建实例：

```
2.0.0-p0 :001 > c=Class1.new(:name=>"A")
 => #<Class1 id: nil, name: "A", created_at: nil, updated_at: nil> 
2.0.0-p0 :002 > c.save
   (0.1ms)  BEGIN
  SQL (0.2ms)  INSERT INTO `class1s` (`created_at`, `name`, `updated_at`) VALUES ('2013-03-12 08:40:03', 'A', '2013-03-12 08:40:03')
   (40.7ms)  COMMIT
 => true 
```

但是当我尝试为班级添加学生时，我收到了一个错误：

```
2.0.0-p0 :003 > s=c.students.build:name=>"Moshe"
ActiveRecord::UnknownAttributeError: unknown attribute: class1_id 
```

列 class_id 确实在数据库中不存在 - 为什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:00:19.603

您有责任为该关联添加适当的迁移。

在控制台中：

```
rails g migration add_class1_references_to_students class1:references 
```

接着：

```
rake db:migrate 
```

# jquery - 在 jQuery Mobile li 中删除图像

> ID：15356844
> 
> 赞同：1
> 
> 时间：2013-03-12T08:53:51.933
> 
> 标签：jquery, image, listview, jquery-mobile

每次用户单击一行时，我希望在 jQuery 列表视图中切换一个图标。

[这是完整的源代码](http://jsfiddle.net/Maxbester/KkRK4/1/)。

以下代码似乎不起作用：

```
$(this).remove('img'); 
```

我也试过：

```
$(this).remove('icon'); 
```

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:56:27.427

尝试以下操作：

```
$(this).find('img').remove(); 
```

[这是更新的 Fiddle](http://jsfiddle.net/N7tXz/)。

# c# - 在重构具有多个产量的 IEnumerator 方法时遇到问题

> ID：15356851
> 
> 赞同：5
> 
> 时间：2013-03-12T08:54:03.640
> 
> 标签：c#, unity3d, yield-return, ienumerator

我的代码要点如下：

```
// Play the first beat
audio.PlayOneShot(beat);

// Show 1st heartbeat border flash
TweenAlpha.Begin(heartbeatPanel.gameObject, 0.1f, currentStress);
yield return new WaitForSeconds(0.1f);
TweenAlpha.Begin(heartbeatPanel.gameObject, 0.5f, 0);

yield return new WaitForSeconds(interval);

// Play the second beat
audio.PlayOneShot(beat);

// Show 2nd heartbeat border flash
TweenAlpha.Begin(heartbeatPanel.gameObject, 0.1f, currentStress);
yield return new WaitForSeconds(0.1f);
TweenAlpha.Begin(heartbeatPanel.gameObject, 0.5f, 0);

yield return new WaitForSeconds(interval * 2); 
```

* * *

现在我想将上面的代码拆分成一个带有 2 个调用的 IEnumerator 方法。

这就是我想出的：

```
StartCoroutine(PlayBeat(currentStress, interval));
StartCoroutine(PlayBeat(currentStress, interval * 2));

// ...

IEnumerator PlayBeat(float currentStress, float interval)
{
     audio.PlayOneShot(beat);

     TweenAlpha.Begin(heartbeatPanel.gameObject, 0.1f, currentStress);
     yield return new WaitForSeconds(0.1f);
     TweenAlpha.Begin(heartbeatPanel.gameObject, 0.5f, 0);

     yield return new WaitForSeconds(interval);
} 
```

这样做的问题是，不是节拍以正确的间隔发声，而是两个节拍同时响起，因为我在无限循环中进行了这些调用，Unity 崩溃了，因为没有考虑间隔。

**将上面的两个重复代码块提取到单个 IEnumerator 方法中的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T09:06:58.237

Unity3d 的协程可以嵌套。要等待嵌套协程，您需要让出它。所以你的功能`PlayBeat`很好；您只需要以 unity3d 理解为“等到完成”的方式启动它。您的示例将如下所示：

```
yield return StartCoroutine(PlayBeat(currentStress, interval));
yield return StartCoroutine(PlayBeat(currentStress, interval * 2)); 
```

It's uncanny how similar that looks to C# 5's async/await. At some level this is unsurprising since they're both compiler-transformed "coroutine" statemachines - but it's still neat to see the similarity.

# watir - 无法在文本区域中设置文本

> ID：15356852
> 
> 赞同：2
> 
> 时间：2013-03-12T08:54:04.497
> 
> 标签：watir

我无法使用`browser.text_field(:id,"area").set "1=1"`. 当我手动输入时，我注意到我输入的文本（“1 = 1”）跨跨度存储，如下所示。

```
<pre>
<span class="number">1</span> # the text 1 is stored here and followed by "=1" in next spans
<span class="operator">=</span>
<span class="number">1</span>
</pre> 
```

有没有其他方法可以将文本设置到文本区域？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T12:25:33.077

这对我有用：

```
require "watir-webdriver"
browser = Watir::Browser.new
browser.goto "ideone.com"
browser.div(:id => "file_div").textarea.set "1=1" 
```

您确定需要在 textarea 中设置文本吗？如果您正在处理所见即所得的编辑器，您可能需要使用`send_keys`：

```
browser.pre.send_keys "1=1" 
```

更多信息：[http ://watirwebdriver.com/wysiwyg-editors/](http://watirwebdriver.com/wysiwyg-editors/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-28T19:09:12.580

在适当的元素上发送密钥很重要。就我而言，经过一些实验，那是：

`<div class="redactor_text redactor_optional redactor_redactor redactor_editor" contenteditable="true" dir="ltr" style="min-height: 120px;"></div>`

编辑器是用这个 html 定义的：

`<div class="redactor_box"><ul class="redactor_toolbar" id="redactor_toolbar_0"><li><a href="javascript:;" title="Bold" tabindex="-1" class="re-icon re-bold"></a></li><li><a href="javascript:;" title="Italic" tabindex="-1" class="re-icon re-italic"></a></li><li><a href="javascript:;" title="Underline" tabindex="-1" class="re-icon re-underline"></a></li><li><a href="javascript:;" title="Link" tabindex="-1" class="re-icon re-link"></a></li><li><a href="javascript:;" title="Superscript" tabindex="-1" class="re-icon re-superscript fa-redactor-btn"><i class="fa icon-superscript"></i></a></li><li><a href="javascript:;" title="Subscript" tabindex="-1" class="re-icon re-subscript fa-redactor-btn"><i class="fa icon-subscript"></i></a></li></ul><div class="redactor_text redactor_optional redactor_redactor redactor_editor" contenteditable="true" dir="ltr" style="min-height: 120px;"></div><textarea class="text optional redactor" data-limit="450" data-persist="garlic" data-min-height="120" name="lesson[intro]" id="lesson_intro" dir="ltr" style="display: none;"></textarea></div>`

# java - 在 Android 上每 30 秒自动生成随机数

> ID：15356853
> 
> 赞同：0
> 
> 时间：2013-03-12T08:54:07.817
> 
> 标签：java, android, random

当我点击生成按钮时，我希望我的程序每 30 秒自动生成一次随机数，问题是如何在我的代码中执行此操作？

```
public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final Random myRandom = new Random();

        Button buttonGenerate = (Button)findViewById(R.id.generateme);
        final TextView textGenerateNumber = (TextView)findViewById(R.id.generatenumber);

        buttonGenerate.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {
                ArrayList<Object> Arry1 = new ArrayList<Object>();
                for(int i=0;i<1;i++){
                    ArrayList<Integer> Arry = new ArrayList<Integer>();
                    for(int k=0;k<7;k++){
                        Arry.add(myRandom.nextInt(10));
                    }
                    Arry1.add(Arry);
                }
                textGenerateNumber.setText(String.valueOf(Arry1));
            }
        });  
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:08:13.977

设置一个 Timer 并为其提供您自己的 TimerTask 扩展。当你按下按钮时激活定时器，你应该很好。

[http://enos.itcollege.ee/~jpoial/docs/tutorial/essential/threads/timer.html](http://enos.itcollege.ee/~jpoial/docs/tutorial/essential/threads/timer.html)

[http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html](http://docs.oracle.com/javase/6/docs/api/java/util/Timer.html)

这是一个基于您的代码的示例，可帮助您入门。请注意，它会因为活动生命周期而崩溃：

```
package com.example.tmp;

import java.util.ArrayList;
import java.util.Random;
import java.util.Timer;
import java.util.TimerTask;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {
    Timer timeoutTimer;
    final Random myRandom = new Random();
    GenerateTask genTask = new GenerateTask();
    final ArrayList<Object> arry1 = new ArrayList<Object>();

    class GenerateTask extends TimerTask {
        boolean started = false;
        @Override
        public void run() {
            if (started) {
                System.out.println("generating");
                final TextView textGenerateNumber = (TextView)findViewById(R.id.generatenumber);
                arry1.clear();
                for(int i=0;i<1;i++){
                    ArrayList<Integer> Arry = new ArrayList<Integer>();
                    for(int k=0;k<7;k++){
                        Arry.add(myRandom.nextInt(10));
                    }
                    arry1.add(Arry);
                }
                runOnUiThread(new Runnable() {

                    @Override
                    public void run() {
                        textGenerateNumber.setText(String.valueOf(arry1));
                    }
                });
            }
        }
    }

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);        
        Button buttonGenerate = (Button)findViewById(R.id.generateme);

        buttonGenerate.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View v) {
                System.out.println("click");
                if (!genTask.started) {
                    genTask.started=true;
                    timeoutTimer = new Timer();
                    timeoutTimer.scheduleAtFixedRate(genTask, 0, 30000);
                } else {
                    genTask.started=false;
                    timeoutTimer.cancel();
                }
            }
        });  
    }
} 
```

# java - 如何检测java中最后运行的线程

> ID：15356859
> 
> 赞同：2
> 
> 时间：2013-03-12T08:54:45.283
> 
> 标签：java, multithreading

我正在使用 100 个并发线程运行一个函数，并且我想检测该函数的最后一个运行线程，那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:05:28.003

在您的主线程中使用`Thread.join()`每个线程来完成。

在每个加入的线程完成之前，主线程不会退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:05:49.330

使用 JConsole 并监视线程。

它很可能与您的 JDK 一起使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:19:01.933

这是使用 JDK 提供的 CountDownLatch 的解决方案。我在这里假设您的函数创建线程，并且您可以将锁存器传递给每个线程，并让它们在退出时调用锁存器上的方法。如果不是这种情况，那么您将不得不轮询一组线程。

此代码是 JDK 文档中示例的调整版本：http: [//docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html)

```
class Driver { 
  static int numThreads = 10;

  public static void main( String[] args ) throws InterruptedException {
    CountDownLatch latch = new CountDownLatch(numThreads);

    for (int i=0; i < numThreads; ++i) {
      new Worker(latch).start();
    }

    latch.await(); // blocks until all of the threads complete
  }
}

class Worker extends Thread {
 private final CountDownLatch latch;

 Worker(CountDownLatch latch) {
    this.latch = latch;
 }

 public void run() {
    try {
      System.out.println("do your work here");
    } finally {
      latch.countDown();
    }
 }
} 
```

# maven - Maven：webstart、buildnumber 和 finalName 冲突？

> ID：15356862
> 
> 赞同：0
> 
> 时间：2013-03-12T08:54:58.257
> 
> 标签：maven, netbeans, buildnumber-maven-plugin, maven-webstart-plugin

我使用 POM 文件的这一部分生成一个内部版本号：

```
 <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>buildnumber-maven-plugin</artifactId>
        <version>1.2</version>
        <configuration>
            <buildNumberPropertyName>project.build.number</buildNumberPropertyName>
            <timestampPropertyName>project.build.time</timestampPropertyName>
            <format>{0,date,yyyyMMddHHmmss}</format>
            <items>
                <item>timestamp</item>
            </items>
            <doCheck>false</doCheck>
            <doUpdate>false</doUpdate>
        </configuration>
        <executions>
            <execution>
                <phase>validate</phase>
                <goals>
                    <goal>create</goal>
                </goals>
            </execution>
        </executions>
    </plugin> 
```

之后，我将 finalName 设置为：

```
 <finalName>
        ${project.artifactId}-${project.version}.${project.build.number}
    </finalName> 
```

我还使用 webstart-maven-plugin 将项目生成为 webstart-app。webstart-plugin 生成一个 zip 文件。这一切都很好，除了一个小细节：

在构建时有以下输出：

```
[buildnumber:create]
Storing buildNumber: 20130312133207 at timestamp: 1363091527664
Building jar: D:\projects\myProject\target\myProject-1.0.20130312133207.jar
Building jar: D:\projects\myProject\target\myProject-1.0.20130312133207-sources.jar
Building jar: D:\projects\myProject\target\myProject-1.0.20130312133207-javadoc.jar
Building zip: D:\projects\myProject\target\myProject-1.0.${project.build.number}.zip 
```

为什么 ${project.build.number} 没有在 zip 文件中替换？是因为它是zip而不是jar吗？那为什么要换版本呢？我如何告诉 POM 替换 zip 文件中的 buildNumber？

我已经尝试使用默认的 $buildNumber 而不是 $project.build.number，这也不起作用。

编辑：我已经为这两个插件尝试了不同的阶段，但到目前为止还没有组合。

Edit2：如果你感兴趣的话，Webstart-Plugin-part 的样子，这里是代码：

```
 <plugin>
            <groupId>org.codehaus.mojo</groupId>
            <artifactId>webstart-maven-plugin</artifactId>
            <version>1.0-beta-3</version>
            <executions>
                <execution>
                    <phase>install</phase>
                    <goals>
                        <goal>jnlp</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>

                <!-- JNLP generation -->
                <jnlp>
                    <!-- default values -->
                    <inputTemplateResourcePath>${project.basedir}</inputTemplateResourcePath>
                    <inputTemplate>src/main/jnlp/app.vm</inputTemplate> <!-- relative to inputTemplateResourcePath -->
                    <outputFile>app.jnlp</outputFile> <!-- defaults to launch.jnlp -->

                    <!-- used to automatically identify the jar containing the main class. -->
                    <!-- this is perhaps going to change -->
                    <mainClass>com.mycompany.myproject.App</mainClass>
                </jnlp>
                <sign>
                    <keystore>${basedir}/keystore</keystore>
                    <keypass>password</keypass>  <!-- we need to override passwords easily from the command line. ${keypass} -->
                    <storepass>password</storepass> <!-- ${storepass} -->
                    <!--storetype>fillme</storetype-->
                    <alias>MyProjectWebstart</alias>

                    <!--validity>fillme</validity-->

                    <!-- only required for generating the keystore -->
                    <dnameCn>MyProjectWebstart</dnameCn>
                    <dnameOu>MyName</dnameOu>
                    <dnameO>MyCompany</dnameO>
                    <dnameL>MyTown</dnameL>
                    <dnameSt>MyState</dnameSt>
                    <dnameC>MyCountry</dnameC>

                    <verify>true</verify> <!-- verify that the signing operation succeeded -->

                    <!-- KEYSTORE MANAGEMENT -->
                    <keystoreConfig>
                        <delete>true</delete> <!-- delete the keystore -->
                        <gen>true</gen>       <!-- optional shortcut to generate the store. -->
                    </keystoreConfig>
                </sign>
            </configuration>
        </plugin> 
```

我在那里使用了示例中的代码：[寻找 Webstart Maven 插件示例应用程序](https://stackoverflow.com/questions/5195545/looking-for-webstart-maven-plugin-sample-application)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:52:35.770

不要将你的 buildNumberPropertyName 参数设置为 project.build.ANYTHING.. 以 ${project.XXX} 开头的表达式基于 MavenProject 对象解析，所以你在 ${project.build.date} 中说有一个 getter getBuild()返回具有不正确的 getter getDate() 的对象。

只需以不同的方式命名 buildNumberPropertyName 和 timestampPropertyName 参数，例如。myBuildNumber 和 myTimestamp 并相应地更改 pom 的其余部分

# c# - LINQ .ToArray 在添加行之前做一些额外的计算

> ID：15356869
> 
> 赞同：0
> 
> 时间：2013-03-12T08:55:27.643
> 
> 标签：c#, linq

我有以下 linq 查询

```
 foreach (var row in nodes.
      Select(tr => tr.Elements("td")
       .Select(td => td.InnerText.TrimEnd())
       .ToArray()))
{
   mydatatable.Rows.Add(row);
} 
```

我可以根据其他数组索引的值将元素添加到数组中，例如 linq 语法中的算术计算，而不必再次循环吗？

例如，结果数组看起来像`["xx","9.4",1.4"]`，我正在尝试添加另一个元素，例如第二个元素乘以第三个元素，所以它看起来像`["xx","9.4","2","18.8"]`并且肯定它是字符串格式，所以需要转换为 double 然后相乘再次串起来

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:06:39.957

在这种情况下，您不需要数组。考虑并在性能、可读性和访问`IList<T>`之外进行这些计算。`LINQ`

```
IList<int> rows = nodes.Select(tr => tr.Elements("td")).Select(td => Convert.ToInt32( td.InnerText.TrimEnd())).ToList();
rows.Add(rows[1] * rows[2]); 
```

注意：我知道您可能没有整数，出于我投射的示例代码的目的，否则您无法相乘。

```
IList<string> strs = nodes.Select(tr => tr.Elements("td")).Select(td => td.InnerText.TrimEnd()).ToList();
var ints = strs.Select(str => str.TryGetInt()).Where(i => i.HasValue).Select(i => i.Value);
strs.Add((ints[0] * [ints[1]).ToString());

public static class Extensions
{
  public static int? TryGetInt(this string item)
  {
    int i;
    bool success = int.TryParse(item, out i);
    return success ? (int?)i : (int?)null;
  }
} 
```

# android - 从另一个 Activity 恢复时无法在片段中隐藏 Mapview

> ID：15356870
> 
> 赞同：2
> 
> 时间：2013-03-12T08:55:28.343
> 
> 标签：android, google-maps-api-2

我在片段中以编程方式创建了一个 Mapview（它不是 a ），并且我在适当的地方`MapFragment`调用了`Mapview'`s 方法`onResume()`，例如。`onPause()`

当我留在这个片段中时，我可以`MapView`通过正常调用来隐藏。`mv.setVisibility(View.Gone)`

当我按 HOME 或导航到另一个活动时，在恢复后，`Mapview`它永远不会被设置为消失，它作为前视图保持在那里，覆盖了我应该在它上面的所有视图。

问题是什么 ？顺便说一句，我使用的是谷歌地图 api v2。

# c++ - Boost ASIO scatter-gather I/O 导致神秘的内存错误

> ID：15356874
> 
> 赞同：5
> 
> 时间：2013-03-12T08:55:35.680
> 
> 标签：c++, boost, boost-asio

我想通过 TCP 发送多个字符串，而不是先将它们组合成一个大字符串，据我了解，ASIO 的 scatter-gather I/O 接口可以做到这一点。但是，我一定做错了什么，因为我的实现不断遇到内存错误。下面的代码片段（可编译和可运行）在 I 时返回一个乱码字符串`telnet localhost 11211`：

```
#include <vector>
#include <string>
#include <boost/asio.hpp>

using namespace std;
using namespace boost::asio;
using namespace boost::asio::ip;

int main() {
    io_service service;
    tcp::acceptor acceptor(service, tcp::endpoint(tcp::v4(), 11211));
    tcp::socket sock(service);
    acceptor.accept(sock);
    if (!acceptor.is_open()) return 1;
    string s = "this is a really long string";
    vector<const_buffer> vec;
    vec.push_back(buffer(s));
    write(sock, buffer(vec));
} 
```

但是，当我这样做时它工作正常`write(sock, buffer("this is a really long string"))`。我在这里想念什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T09:36:00.340

最后一行应该是：

```
write(sock, vec); 
```

否则它不是“scatter-gather”，因为`buffer`自由函数总是返回`mutable_buffers_1`，即*单个*缓冲区。在您的情况下，`buffer`将调用以下重载：

```
template <typename PodType, typename Allocator>
inline mutable_buffers_1 buffer(std::vector<PodType, Allocator>& data)
{
  return mutable_buffers_1(mutable_buffer(data.size() ? &data[0] : 0, data.size() * sizeof(PodType)));
} 
```

由于您的向量不是“POD 向量”，因此处理不正确。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T09:35:02.527

在这种情况下，您不需要传递缓冲区来写入。如果您将示例的最后一个字符串重写为

```
write(sock, vec); 
```

问题很可能会得到解决。

# sql-server - 如何将当前时间添加到表中

> ID：15356875
> 
> 赞同：-1
> 
> 时间：2013-03-12T08:55:35.953
> 
> 标签：sql-server, sql-server-2008

嗨，我是一名学生，在 sql server 2008 中需要帮助，试图将当前时间添加到表中

我已经研究过，只能找到如何显示当前时间

```
create table howto
(
    TimeDifference varchar(20) not null,
    StartTime DateTime,
    EndTime DateTime -- this is the current time 
)
go

declare @Etime datetime
select GETDATE()
set @Etime = getdate()
go 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:59:37.157

您可以将相应列的“默认值或绑定”属性设置为 getdate()

```
alter table howto add constraint EndTimeConstraint default getdate() for EndTime; 
```

如果您不打算再次修改该行，您可以使用创建类型为 的列`timestamp`。

# java - 显示在整个执行过程中命中了哪些代码行的 Eclipse 工具？

> ID：15356878
> 
> 赞同：4
> 
> 时间：2013-03-12T08:55:38.643
> 
> 标签：java, eclipse, eclipse-plugin, profiling, code-coverage

我有一个庞大的程序，我想执行一个用例（需要用户输入），它不是 JUnit 测试，杀死程序，看看哪些代码行被命中。这个简单的用例将经历数千行代码，因此在每一行添加跟踪注释以查看我的位置将永远存在。

有这样的吗？如果它能够以类似于[http://www.eclemma.org/](http://www.eclemma.org/)的方式显示覆盖的代码，那就太棒了！

感谢您提供任何帮助/信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T08:59:52.643

我们的[Java 测试覆盖率](http://www.semanticdesigns.com/Products/TestCoverage/JavaTestCoverage.html)工具使用其内置显示显示叠加在源代码上的执行行（和部分行）。它不是专门基于 Eclipse 的，但 OP 的问题似乎在于规模和交互性，而不是 Eclipse。

正如大多数基于探针的测试覆盖工具所做的那样，它无法提供关于在中间抛出异常的无条件代码块的精确覆盖信息；如果只执行了一部分，它会将整个块记录为“已执行”，并且它将捕获任何相关异常处理程序的执行。但是，与大多数二进制检测器不同的是，如果它在一行代码中遇到多个条件，它将正确捕获该行的哪一部分被执行。

它可以从任何类型的测试中收集执行信息，包括手动执行代码。它还可以配置为在程序执行期间的任何时间点收集测试覆盖率数据，因此它对于收集长时间运行的服务器程序的覆盖率很有用，或者如果您需要在某个任意点中止执行。

# javascript - 无法在页面加载时隐藏内容。显示/隐藏切换

> ID：15356880
> 
> 赞同：-6
> 
> 时间：2013-03-12T08:55:45.063
> 
> 标签：javascript

如何更改下面的代码以隐藏页面加载时的内容。

```
<SCRIPT type=text/javascript>
    for (var i= document.links.length; i-->0;) {
        var link= document.links[i];

        if (link.className=='showhide') {
            var div= document.getElementById(link.hash.substring(1));
            Toggler(link, div, true);
        }
    }

    function Toggler(toggler, togglee, state) {
        toggler.onclick= function() {
            state= !state;
            togglee.style.display= state? 'block' : 'none';
            return false;
        }
    }
</SCRIPT> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:01:49.753

代码：

CSS：

```
#mango {display: none;} 
```

HTML：

```
<body>
  <div id="mango">
    page content.... 
  </div>
</body> 
```

Javascript：

```
document.getElementById("mango").style.display = "block"; 
```

请参考以下链接：

[在页面加载时隐藏文档正文](https://stackoverflow.com/questions/6919236/hide-document-body-on-page-load)

# c# - JSON 反序列化到对象失败

> ID：15356881
> 
> 赞同：2
> 
> 时间：2013-03-12T08:55:46.990
> 
> 标签：c#, .net, asp.net-mvc, json

```
return jsSerializer.Deserialize<MamDataResponseHolder>(stringJson); 
```

抛出异常：

> *数组的反序列化不支持类型“System.String”。*

但我没有看到问题。

```
 public class MamDataResponseHolder
    {
        public MamDataResponsePair[] configuration { get; set; }
        public string Status { get; set; }
    }

  public class MamDataResponsePair
    {
        public string id { get; set; }
        public MamDataResponsecriteria[] criterias { get; set; }
    }

 public class MamDataResponsecriteria
    {
        public Guid criteriaId { get; set; }
        public string[] domains { get; set; }
        public string domainsException { get; set; }
    } 
```

这是json：

```
 {
        "configuration": [{
            "id": "Coupon Body",
            "criterias": [{
                "criteriaId": "c7150fc2-72b9-4628-a199-dd5c0bdeef1b",
                "domains": [""],
                "domainsException": [""]
            }]
        }],
        "Status": "succeeded"
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T08:59:05.667

您的模型和您的 Json 不匹配。看看`domainsException`。在您的 Json 中，它显然是一个字符串数组，但在您的模型中，它只是一个字符串。

除此之外：你确定要`[""]`在你的 Json 中吗？这样，您将获得一个带有空字符串而不是空数组的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:02:22.850

您的课程应如下所示：

```
public class Criteria
{
    public string criteriaId { get; set; }
    public List<string> domains { get; set; }
    public List<string> domainsException { get; set; }
}

public class Configuration
{
    public string id { get; set; }
    public List<Criteria> criterias { get; set; }
}

public class RootObject
{
    public List<Configuration> configuration { get; set; }
    public string Status { get; set; }
} 
```

# java - 如何在java中将对象添加到ArrayList中

> ID：15356889
> 
> 赞同：4
> 
> 时间：2013-03-12T08:56:14.423
> 
> 标签：java, oop, arraylist

这里有两个类，查询语句和stackov。一个arraylist用于存储查询语句类的对象。但是最近添加的对象覆盖了之前的对象。如何添加对象使其不被覆盖？

**查询语句.java**

```
public class QuerySentence {

    public static String query;
    public static String label;
    public QuerySentence(){

    }
    public QuerySentence(String query,String label){
        this.query = query;
        this.label = label;
    }
} 
```

**Stackov.java**

```
package QueryClassifier;

import java.util.ArrayList;

public class stackov {

    public static void main(String args[])
    {
        QuerySentence qs1 = new QuerySentence("What state produces the best lobster to eat","LOCATION");
        QuerySentence qs2 = new QuerySentence("What is Dick Clark's birthday","DATE");
        ArrayList<Object> doclist = new ArrayList<Object>();

            doclist.add(0,qs1);
            doclist.add(1,qs2);

            int size = doclist.size();
               while(size>0)
               {
                    QuerySentence qs3 = (QuerySentence) doclist.get(size-1);
                    System.out.println("\nin loop : " + qs3.label + qs3.query);
                    size--;
                }

    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T08:57:52.697

问题**不是来自你的循环**，而是来自你的 class `QuerySentence`。您正在创建静态对象，这意味着您不会为类的不同实例创建不同的字段，但该类将只有它们的唯一副本。所以这里发生了什么，你将这些值分配给你的类`QuerySentence`：

```
QuerySentence qs1 = new QuerySentence("What state produces the best lobster to eat","LOCATION"); 
```

然后用这个擦除它：

```
QuerySentence qs2 = new QuerySentence("What is Dick Clark's birthday","DATE"); 
```

当您将两个对象添加到您`ArrayList`的 中时，当然在您的循环中您将打印两个结果。但只有qs2中的结果。从您的字段声明中删除`static`，它将正常工作：

```
public String query;
public String label; 
```

添加时不需要索引查询语句。

```
doclist.add(qs1);
doclist.add(qs2); 
```

你也可以改进你的循环。你可以这样做：

```
ArrayList<QuerySentence> doclist = new ArrayList<QuerySentence>();

// some code...

for(QuerySentence q : doclist)
{
    System.out.println("In loop : " + q.label + q.query);
} 
```

还请记住 Java 约定：您的类应该以大写字母 ( ) 开头`Stackov`。如果您还从事封装工作，最好声明您的字段并为它们`private`创建`getters`和`setters`。有了这个，你`for-statement`应该看起来像这样：

```
for(QuerySentence q : doclist)
{
    System.out.println("In loop : " + q.getLabel() + q.getQuery());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T08:57:40.030

```
doclist.add(qs1);
doclist.add(qs2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:00:50.973

```
 public static void main(String args[])
        {
            QuerySentence qs1 = new QuerySentence("What state produces the best lobster to eat","LOCATION");
            QuerySentence qs2 = new QuerySentence("What is Dick Clark's birthday","DATE");
            ArrayList<QuerySentence> doclist = new ArrayList<QuerySentence>();

                doclist.add(qs1);
                doclist.add(qs2);

                for(QuerySentence sent: docList)
                {
                   System.out.println("\nin loop : " + sent.label + sent.query);
                }

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T09:00:22.380

不需要索引像这样添加

```
doclist.add(qs1);
doclist.add(qs2); 
```

# php - Facebook Graph API 分页没有给出确切的结果？

> ID：15356891
> 
> 赞同：1
> 
> 时间：2013-03-12T08:56:20.343
> 
> 标签：php, facebook, facebook-graph-api, pagination, facebook-php-sdk

我正在使用 Graph API 来获取特定查询的数据。

```
function getFeed($access_token,$until)
{
  $result = $this->facebook->api(
    '/me/home', 
    'GET', 
    array(
      'access_token' => $access_token,
      'limit' => 5,
      'until' => $until
    )
  );
  return $result;
} 
```

我通过 jQuery 调用这个函数并在每次调用中获取 5 个帖子。但在两三个电话之后，它并没有给出确切的结果。比它在两三天前（例如 1 天前到 4 天前，例如今天是星期二，所以它会提供星期二的提要，而不是跳过星期一并直接跳到星期日的提要）。然后它将停止提供数据并给出空结果。

如果我将限制从 5 增加到 25，那么它会给出一些准确的结果，但它只会给我最后 5 天的帖子，而不是更多，然后它会给出空的结果

1.  那么，我们有时可以使用图形 API 获取多少数据有什么限制吗？

2.  一次通话获取更多帖子是否很好？（例如从 5 到 25 或更多）有什么区别吗？

3.  在 Graph API 中分页的最佳做法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-14T12:45:24.673

关于第一个和第二个问题，

它不在文档中，但我个人已经为我的项目测试了以下内容。

Facebook`limit`仅限于 500 个帖子。无论您设置高于 500 的限制，它最多只能获取 500 个结果。尝试 500（或更多），您将获得最多的帖子。

您不会每次都收到 500 个帖子，但通常会收到超过 490 个帖子。一些帖子因各种原因被过滤（如隐私、被屏蔽的用户、不适合特定区域等）

有关更多详细信息，请查看[Facebook Open Graph API：获取分页用户新闻提要时参数限制的奇怪行为](https://stackoverflow.com/questions/10553510/facebook-open-graph-api-weird-behavior-of-parameter-limit-while-getting-a-pagin/10575022#10575022)

关于第三个问题，

[http://developers.facebook.com/blog/post/478/](http://developers.facebook.com/blog/post/478/)

想要增加您对图形 API 结帐的知识[用于 facebook 应用程序开发的图形 API 示例](http://getnewideas.blogspot.in/2012/06/graph-api-examples-for-facebook.html)

这可以帮助你。

# android - 生成的渲染脚本文件导致“无效的 unicode”错误

> ID：15356894
> 
> 赞同：1
> 
> 时间：2013-03-12T08:56:39.737
> 
> 标签：android, unicode, compiler-errors, renderscript

我正在尝试一些 Renderscript 示例（目前我正在尝试[轮播示例](http://code.google.com/p/android-ui-utils/downloads/detail?name=CarouselExample.zip&can=1&q=)）。

我在 gen 文件夹中不断收到一个奇怪的错误，它只是说 "Invalid Unicode" ，并在每个生成的文件中指向 "\u"，例如（忽略 "..."）：

```
 * This file is auto-generated. DO NOT MODIFY!
 * The source Renderscript file: C:\Users\user\Desktop\... 
```

所以对于 "\user" ，它说它的 "\u" 部分是一个无效的 unicode。但我不是产生它的人。

我该如何解决这个奇怪的问题？

说到轮播示例，是否有此示例的替代方案，甚至可以避免使用 Renderscript 做同样的事情，但甚至可以在旧的 Android API 上工作？也许是使用 OpenGL 的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T22:16:37.887

这是我们的编译器 (llvm-rs-cc) 中的一个错误。我在 Android 代码库内部对此进行了修复，但可能需要一段时间才能公开发布（下一个 AOSP/SDK 工具版本）。我现在同意上面的解决方法（路径中没有 \u）。您还可以在创建生成的源文件后随时修改它，因为它只在注释块中（而不是在实际运行的代码中）。

# git - 使用 composer 和 git Symfony2 Bundle 维护自己的供应商

> ID：15356895
> 
> 赞同：3
> 
> 时间：2013-03-12T08:56:40.620
> 
> 标签：git, symfony, bundle, composer-php, vendor

我在 git 存储库中创建了一个供应商库（Symfony2 Bundle）。向其中添加了 composer.json。

在多个项目中，我将其用作供应商（composer.json 中的 vcs）。除非我想修改原始捆绑包/供应商，否则一切正常。

我不能直接从使用捆绑包的项目推送到它。我必须在新目录中克隆 bundle 的 repo，在那里更改并推送。这并不方便，因为 bundle 本身不能工作，所以提交有点尝试和看看会发生什么。

维护我自己的供应商回购的最佳做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:33:44.283

如果您的供应商是从源代码安装的，您可以修改和推送它。要强制从源安装，请使用以下`--prefer-source`选项：

```
composer install/update --prefer-source 
```

然后`cd`到你的供应商目录，你会看到它是一个单独的 git repo。您可以在那里拉取最新版本，进行更改并将其推回。

这同样适用于 3rd 方捆绑包。在这种情况下，你只需要在你的 fork 中添加一个 git 远程来推送它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:47:51.117

当我编写这样的 Bundle 时，我有一个模拟项目（工作，但没有目的）。
在这里面我有 Bundle 的克隆主副本，所以我可以编辑、测试、然后提交更改和推送等。

您唯一需要确保首先工作的是作曲家的安装。

如果您需要有关此的更多详细信息，请告诉我，我会为您补充一点。

# android - 更改代码中的文本时如何保持 Button 位置？

> ID：15356896
> 
> 赞同：0
> 
> 时间：2013-03-12T08:56:44.460
> 
> 标签：android, android-layout, android-button

我的布局中有一个带有 ID`btnsignIn_Master`和文本*"Sign In/Sign Up"*的按钮。在单击事件中，我更改了按钮的文本，然后按钮的对齐方式发生了变化。即使在文本更改后如何保持对齐？

下面是我的布局：

```
<RelativeLayout
android:id="@+id/LoginLayout"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_below="@+id/relLayoutMenu"
android:layout_marginBottom="10dp"
android:layout_marginTop="10dp">

<TextView
    android:id="@+id/txtLoginName"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     android:gravity="left|center_horizontal"
    android:singleLine="true"
    android:text="Welcome"
    android:textColor="#E68A00"
    android:textSize="12sp"
    android:textStyle="bold" 
    android:layout_marginLeft="1dp">
</TextView>

<Button
    android:id="@+id/btnsignIn_Master"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="30dp"
    android:layout_toRightOf="@+id/txtLoginName"
    android:background="@null"
    android:gravity="right|center_horizontal"
    android:onClick="btnSignIn_onclick"
    android:text="Sign In/Sign Up"
    android:textColor="#8b8989"    
    android:textSize="12dp" >
</Button>

<ImageButton
    android:id="@+id/iv_Arrow"
    android:layout_width="30dp"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_gravity="right|center_horizontal"
    android:layout_toRightOf="@+id/btnsignIn_Master"
    android:background="@null"
    android:onClick="btnSignIn_onclick"
    android:layout_marginRight="10dp"
    android:src="@drawable/arrow1" /> 
```

这是Java代码：

```
Button ButtonSignInM= (Button) findViewById(R.id.btnsignIn_Master);
ButtonSignInM.setText("Your Account"); 
```

我做错什么了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:04:38.800

看来您已经`android:layout_width="wrap_content"`在 xml 中使用了它。删除包装内容并在其中指定一些值，例如：`android:layout_width="20dp"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:00:23.257

您可能已将按钮的宽度属性设置为 wrap_content。在这种情况下，按钮的对齐方式可能会改变。使用固定宽度的按钮，以防止它。

# database-design - 分成多个表还是将它们全部放在一个表中？

> ID：15356909
> 
> 赞同：0
> 
> 时间：2013-03-12T08:57:19.443
> 
> 标签：database-design

出于自学目的，我正在尝试创建一个简单的 Web 应用程序，该应用程序创建一个 TODO 列表，其中每个列表都有一个唯一的 URL。我目前使用以下数据库设计。该`onlinelist.list`表存储每个列表的 URL 和密码。`onlinelist.item`存储存储在每个列表中的项目。

```
onlinelist.list                   onlinelist.item
+----+-----+-------------+        +----+---------+-----+
| ID | URL |  Password   |        | ID | Content | URL |
+----+-----+-------------+        +----+---------+-----+
|  1 | abc | rfk49gh34   |        |  1 | apple   | abc |
|  2 | pqr | 12345       |        |  2 | banana  | xyz |
|  3 | xyz | password123 |        |  3 | milk    | pqr |
+----+-----+-------------+        |  4 | beef    | abc |
                                  |  5 | egg     | abc |
                                  |  6 | pasta   | xyz |
                                  |  7 | lemon   | pqr |
                                  |  8 | carrot  | xyz |
                                  +----+---------+-----+ 
```

`onlinelist.item`看到表格中重复的一些 URL 让我很担心。要获取存储在“abc”中的列表的所有列表项，它需要遍历表的所有元素并找到 URL 等于“abc”的那些元素。（我假设这是 SELECT 语句的工作方式。）删除列表项也需要执行此搜索。

如果我为每个列表（即`onlinelist.abc`, `onlinelist.pqr`, ）创建一个单独的表`onlinelist.xyZ`，这样搜索就不需要查看不相关的条目，难道不是更有效吗？但是，我认为将表称为`onlinelist.abc`or并没有什么意义`onlinelist.xyz`。我已经有一个好的设计了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:12:41.197

在设计对象时，您应该查看它们的关系。从您的示例中，我看到两个对象：

带有属性的 TODO 列表：

*   ID
*   网址
*   密码

具有属性的 TODO 项：

*   ID
*   内容

您的项目的 URL 属性似乎没有绑定到项目，而是绑定到项目所属的列表。

如果从关系的角度来看，您可以说 TODO 项“属于”一个 TODO 列表，或者更确切地说，一个 TODO 列表中包含一个 TODO 项的集合。

为此，您在列表和项目实体之间具有 1:N 映射（1 个列表有 N 个项目，1 个项目属于 1 个列表）。

要记录这种关系，您可以通过以下方式修改 TODO 项目表：

```
onlinelist.list                   onlinelist.item
+----+-----+-------------+        +----+---------+--------+
| ID | URL |  Password   |        | ID | Content | ListId |
+----+-----+-------------+        +----+---------+--------+
|  1 | abc | rfk49gh34   |        |  1 | apple   |   1    |
|  2 | pqr | 12345       |        |  2 | banana  |   3    |
|  3 | xyz | password123 |        |  3 | milk    |   2    |
+----+-----+-------------+        |  4 | beef    |   1    |
                                  |  5 | egg     |   1    |
                                  |  6 | pasta   |   3    |
                                  |  7 | lemon   |   2    |
                                  |  8 | carrot  |   3    |
                                  +----+---------+--------+ 
```

如果您想在多个列表上共享一个项目，您不能再仅使用两个表来执行此操作，但您必须创建一个映射表。

在这种情况下，您将从 onlinelist.item 表中保留 ListId 并创建一个新的

```
onlinelist.mapping         
+----+--------+----------+ 
| ID | ListId |  ItemId  | 
+----+--------+----------+ 
|  1 |    1   |     1    | 
|  2 |    1   |     2    | 
|  3 |    2   |     1    | (with more mapping going on)
+----+--------+----------+ 
```

# ruby - 为什么字符串索引返回一个整数值而不是一个字符？

> ID：15356910
> 
> 赞同：3
> 
> 时间：2013-03-12T08:57:22.197
> 
> 标签：ruby, bash, executable

似乎当将 Ruby 代码放入可执行脚本时，String 的索引的行为与在 IRB 中或直接运行 Ruby 代码时的行为不同。例如：

```
$ cat > test
#!/usr/bin/ruby -w
puts 'hello'[0]
$ chmod +x test
$ ./test
104
$ ruby -e "puts 'hello'[0]"
h 
```

为什么是这样？而且，如何使可执行脚本的行为与“普通”Ruby 代码相同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T11:30:49.623

在 1.9 之前，Ruby 返回单个字符的 ASCII 字符代码。1.9+ 切换到返回角色本身：

```
irb(main):001:0> RUBY_VERSION
=>“1.8.7”
irb(main):002:0> 'foo'[0]
=> 102

```

```
irb(main):001:0> RUBY_VERSION
=>“1.9.3”
irb(main):002:0> 'foo'[0]
=> "f"

```

使用常量`RUBY_VERSION`是快速调试此类问题的好方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T09:04:32.783

打字时`ruby`，你确定你在用`/usr/bin/ruby`吗？您的 $PATH 中可能有不同版本的 ruby​​ 优先于这个。

我不太确定这一点，但如果`String#[]`您使用 ruby​​ 1.8 或 1.9 有不同的回报，我不会感到惊讶

# flyway - 在目录中使用命名约定而不是文件名

> ID：15356911
> 
> 赞同：-1
> 
> 时间：2013-03-12T08:57:23.557
> 
> 标签：flyway

1.  我们可以使用命名约定作为目录的一部分而不是文件名吗？

    例如

    ```
     /R1/1.0.1.0/
          user1_install.sql
          user2_install.sql
     /R1/1.0.2.0/
          user1_install.sql
          user2_install.sql 
    ```

    1.  对于每个版本，在继续部署下一个版本之前，是否可以使用两个不同的用户执行脚本，例如 user1 执行 user1_install.sql 和 user2 执行 user2_install.sql？

注册，

拉克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:12:44.163

目前不支持此功能。版本号必须嵌入文件名中（如果您愿意，可以在目录中重复它）。

Flyway 的一个实例也与数据源及其特定用户相关联。但是，如果您愿意，您可以运行多个 Flyway 实例（每个都有自己的用户）。

# diagram - 系统上下文图有层次吗？

> ID：15356914
> 
> 赞同：0
> 
> 时间：2013-03-12T08:57:28.657
> 
> 标签：diagram, er-diagrams

我听说上下文分析图有不同的层次。是真的吗……？我在网上找不到。我已经看到 DFD 有不同的级别。就像上下文图有任何层次一样。？

如果是，请提出一些例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T15:06:33.830

上下文图实际上是一级数据流图，纯粹是系统和与之交互的外部实体的图，以及从系统传递到外部实体并返回的数据的名称。

将其分解为更详细的实际上是下一个数据流图，DFD 级别 2。

# sql - Django sql 查询，'__startswith 日期和时间'

> ID：15356918
> 
> 赞同：0
> 
> 时间：2013-03-12T08:57:39.467
> 
> 标签：sql, django, django-models, django-forms, django-views

这是我的 Django sql 查询

```
Mpool.objects.filter(From__startswith=From,To__startswith=To) 
```

同样，我需要为SQL 表中`date`的`time`字段执行此操作，我的日期是这种格式`2017-02-07`，我的时间是在`01:00:00`有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:05:03.187

您需要将文本转换为日期对象，然后使用 django 的[范围](https://docs.djangoproject.com/en/1.5/ref/models/querysets/#range)过滤器。

使用 python 的[strptime()](http://docs.python.org/2/library/time.html#time.strptime)函数从字符串中获取日期。

就像是 -

```
import datetime

start_date = datetime.strptime(start_date_string, "%d-%m-%Y %H:%M:%S")
end_date = datetime.strptime(end_date_string, "%d-%m-%Y %H:%M:%S")

Mpool.objects.filter(your_date__range=(start_date, end_date)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:07:08.263

```
Mpool.objects.filter(date__gte=start_date, date__lte=end_date) 
```

# java - 如何在不使用 FFmpeg 的情况下将视频裁剪成方形？

> ID：15356920
> 
> 赞同：1
> 
> 时间：2013-03-12T08:57:40.960
> 
> 标签：java, android, ffmpeg, video-processing

我想拍摄一个视频文件并裁剪它以输出方形视频。

用例：以横向拍摄视频，裁剪中心部分并将方形视频输出保存在文件中。

我知道你可以使用 NDK + FFmpeg 来做到这一点，但我想知道是否还有其他使用纯 Java 的替代方案。任何人？

# java - ActionBar — 活动之间的共享按钮

> ID：15356927
> 
> 赞同：3
> 
> 时间：2013-03-12T08:58:16.150
> 
> 标签：java, android, android-actionbar, android-event

我有一个按钮放在一个`ActionBar`. 如何制作一个在不同布局之间共享的按钮侦听器，包括`ActionBar`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T09:00:47.357

创建一个 'BaseActivity' 或 'ParentActivity' 或任何你想调用它的东西，它扩展了 Activity。这只是完成了您在每个活动中所做的所有事情。

然后你所有的其他活动，扩展这个 ParentActivity，而不是正常的 Activity。

实现您的操作栏创建和始终在其中的按钮，以及它们在此 ParentActivity 中的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T09:56:25.453

您可以使用这样的类：

```
public class Actionbar_BtnHandler extends Activity {
    Context context;
    public  Actionbar_BtnHandler (Context context)
    {
        this.context=context;
    }
    public void btn_handler (Button btn_mic,Button btn_post)
    {
        btn_mic.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Toast.makeText(context,"MIKE",Toast.LENGTH_LONG).show();
            }
        });

        btn_post.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

            }
        });
    } 
```

# php - 如何在单个页面中使用两个自动提示（ajax、PHP、Mysql）

> ID：15356928
> 
> 赞同：0
> 
> 时间：2013-03-12T08:58:16.333
> 
> 标签：php, jquery, mysql, ajax

我在我的一个页面中使用了一个自动建议脚本（使用 jquery、ajax、php 和 mysql）并且效果很好。

但是当我尝试在同一页面上为另一个表单（文本输入）添加自动建议时，我遇到了很多错误，它显示了正确的信息，但是当我单击它们填充第一个输入时，我尝试修改一些变量，但现在它第二个输入根本不起作用。我对 JS、Jquery、Ajax 真的很陌生（以前从未使用过）。

这是包含输入 (Test.html) 的页面的代码。

```
<html>
<head>
<title>Test</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js">
</script>
<script>
function suggest(inputString){
    if(inputString.length == 0) {
        $('#suggestions').fadeOut();
    } else {
    $('#country').addClass('load');
        $.post("autosuggest.php", {queryString: ""+inputString+""}, function(data){
            if(data.length >0) {
                $('#suggestions').fadeIn();
                $('#suggestionsList').html(data);
                $('#country').removeClass('load');
            }
        });
    }
}

function fill(thisValue) {
    $('#country').val(thisValue);
    setTimeout("$('#suggestions').fadeOut();", 600);
} 
```

```
#result {
height:20px;
font-size:16px;
font-family:Arial, Helvetica, sans-serif;
color:#333;
padding:5px;
margin-bottom:10px;
background-color:#FFFF99;
}
#country{
padding:3px;
border:1px #CCC solid;
font-size:17px;
}
.suggestionsBox {
position: absolute;
left: 0px;
top:40px;
margin: 26px 0px 0px 0px;
width: 200px;
padding:0px;
background-color: #000;
border-top: 3px solid #000;
color: #fff;
}
.suggestionList {
margin: 0px;
padding: 0px;
}
.suggestionList ul li {
list-style:none;
margin: 0px;
padding: 6px;
border-bottom:1px dotted #666;
cursor: pointer;
}
.suggestionList ul li:hover {
background-color: #FC3;
color:#000;
}
ul {
font-family:Arial, Helvetica, sans-serif;
font-size:11px;
color:#FFF;
padding:0;
margin:0;
}

.load{
background-image:url(loader.gif);
background-position:right;
 background-repeat:no-repeat;
}

#suggest {
position:relative;
}

</style>
</head>
<body>

<form id="form" action="#">
<div id="suggest">type a country: <br />
  <input type="text" size="25" value="" id="country" onkeyup="suggest(this.value);"    onblur="fill();" class="" />

  <div class="suggestionsBox" id="suggestions" style="display: none;"> <img   src="arrow.png" style="position: relative; top: -12px; left: 30px;" alt="upArrow" />
    <div class="suggestionList" id="suggestionsList"> &nbsp; </div>
  </div>
</div>
<div id="suggestcity">type a city: <br />
  <input type="text" size="25" value="" id="city" class="" />
</div>
</form>
</body>
</html> 
```

我的 autosuggest.php 的代码是

```
<?php
$db_host = '';
$db_username = '';
$db_password = '';
$db_name = '';

$db = new mysqli($db_host, $db_username ,$db_password, $db_name);

if(!$db) {
       $db->set_charset("utf8");
    echo 'Could not connect to the database.';
} else {

    if(isset($_POST['queryString'])) {
        $queryString = $db->real_escape_string($_POST['queryString']);

        if(strlen($queryString) >0) {
            $db->set_charset("utf8");
            $query = $db->query("SELECT Ville FROM Villes WHERE Ville LIKE '$queryString%' LIMIT 10");
            if($query) {
            echo '<ul>';
                while ($result = $query ->fetch_object()) {
                    echo '<li onClick="fill(\''.addslashes($result->Ville).'\');">'.$result->Ville.'</li>';
                }
            echo '</ul>';

            } else {
                echo 'OOPS we had a problem :(';
            }
        } else {
            // do nothing
        }
    } else {
        echo 'There should be no direct access to this script!';
    }
}
?> 
```

所以我的问题是，我应该在两个页面中更改什么（变量和函数等...），以便我可以在第二个输入上使用自动建议，其中 id="city" 来自同一数据库上的另一个表。

如果您能提供帮助，那就太好了，在过去的几天里，我一直在尝试修改代码上的任何内容，但没有任何效果。非常感谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:00:18.450

使用自动建议，这将使您的生活更轻松。[http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

# meteor - 如何有效地改变多个元素的样式

> ID：15356932
> 
> 赞同：0
> 
> 时间：2013-03-12T08:58:37.813
> 
> 标签：meteor

我有一个简单的图像列表和一个按钮，每当单击它时，我都会使用它来更改这些图像的大小。我以多种方式实现了这种行为，并且存在显着的性能和行为（模板重新渲染）差异。我的问题是在 Meteor 中实现这一点的首选方法是什么？

这是一个最小的工作示例。实际上，可以更好地识别图像，并且可以从不同的事件触发尺寸变化。

解决方案1（演示方式=慢/重新渲染）：

```
Template.controls.events = {
    "click #change_size": function() {
        Session.set("height", "20px");
    }
};

<template name="image">
    <img src="img.jpg" style="height: {{height}}"/>
</template>

Template.image.height = function() {
    return Session.get("height");
}; 
```

解决方案 2（jQuery + 状态）：

```
Template.controls.events = {
    "click #change_size": function() {
        Session.set("height", "20px");
    }
};

<template name="image">
    <img src="img.jpg"/>
</template>

Meteor.autorun(function() {
    $("img").css({height: Session.get("height")});
}) 
```

解决方案 3（jQuery）：

```
Template.controls.events = {
    "click #change_size": function() {
        $("img").css({height: "20px"});
    }
};

<template name="image">
    <img src="img.jpg"/>
</template> 
```

解决方案 4（反应式父级）：

```
Template.controls.events = {
    "click #change_size": function() {
        Session.set("height", "20px");
    }
};

<template name="image_set">
    {{#each image_set}}
    <img src="img.jpg" style="height: {{../height}}"/>
    {{/each}}
</template>

Template.image_set.height = function() {
    return Session.get("height");
}; 
```

解决方案5：？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:00:58.950

我会选择 #1 或 #3，具体取决于应用程序需要的灵活性，或者我是否要从基于 jQuery 的应用程序移植到 Meteor 等。`Meteor.autorun`如果我有一个已经使用内置的替代方案，我宁愿避免反应变量 like `Session`，感觉更干净，更有意。您的第四个解决方案实际上解决了一个不同的问题：它一次设置多个图像的高度。那可能不是你想要的。

总的来说，我认为 #1 是最流星的，因为它在文档中并且它使用 Session 与 Template 合作的默认反应性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T22:47:03.137

#1 和 #2 混合使用 jQuery dom 操作和会话。出于性能和连贯性的原因，我会避免使用它们。如果 #3 和 #4 具有可比的性能，则 #4 是要走的路，因为该 Session 允许您在需要时轻松“插入”其他事件处理程序。

如果可能，我宁愿建议操作包装器的类并使用 css 规则设置图像高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-25T22:15:00.040

解决方案#5：

我不知道它是否被认为是一个很好的流星实践，或者是否有流星最佳实践之类的东西。解决方案是使用模板化的嵌入式 css 规则。以下几行似乎可以解决问题：

```
Template.controls.events = {
    "click #change_size": function() {
        Session.set("height", "20px");
    }
};

<img src="img1.jpg" class="my_class" />
...
<img src="img1000.jpg" class="my_class" />

<template name="css">
<style media="screen" type="text/css">
img.my_class {
  height: {{height}};
}    
</template>

Template.css.height = function() {
    return Session.get("height");
}; 
```

优点：

*   没有 jQuery
*   单模板渲染
*   所有样式均由优化的浏览器代码完成

缺点？

# sql - MS-SQL：SQL“组”创建重复项？

> ID：15356934
> 
> 赞同：0
> 
> 时间：2013-03-12T08:58:54.327
> 
> 标签：sql, group-by

当我对行进行计数时（代码 #1） - 我得到了大约 880 行的正确计数。

当我按日期对计数进行分组时 - 它突然增长了大约 100（代码 #2）。

如果有人可以帮助我理解我的问题，我将不胜感激！

提前致谢！

这是表结构：

```
tblApplicants:

applicantID (index)   |     ApplyingForYear (nvarchar) 
------------------------------------------------------
1                           2013/14
11                          2013/14
13                          2013/14
12                          2013/14
15                          2013/14
21                          2012/13

tblApplicantSchools_shadow: 

id (index)   |    applicantID    |    updated (datetime)   |   statusID (int)   |   schoolID (int)
-----------------------------------------------------------------------------------------------------
1                   11                  2012-09-24 00:00:00.000     3                   2
1                   13                  2012-10-24 00:00:00.000     4                   2
2                   15                  2012-11-24 00:00:00.000     3                   4
3                   13                  2012-03-24 00:00:00.000     4                   3
4                   12                  2012-09-24 00:00:00.000     4                   1
5                   21                  2012-11-03 00:00:00.000     5                   2
6                   11                  2012-09-04 00:00:00.000     4                   4 
```

代码#1（正确计数）：

```
select count(DISTINCT [tblApplicantSchools_shadow].applicantID) as TotalAppsPerWeek FROM tblApplicants  
INNER JOIN tblApplicantSchools_shadow ON tblApplicantS.ApplicantID =   tblApplicantSchools_shadow.applicantID
WHERE ApplyingForYear = '2013/14' and [tblApplicantSchools_shadow].statusID = 4 
```

代码#2（组，计数不正确）：

```
select DATEADD(ww,(DATEDIFF(ww,0,[tblApplicantSchools_shadow].updated)),0) AS Datesubmitted ,count(DISTINCT [tblApplicantSchools_shadow].applicantID) as TotalAppsPerWeek FROM tblApplicants  
INNER JOIN tblApplicantSchools_shadow ON tblApplicantS.ApplicantID =   tblApplicantSchools_shadow.applicantID
WHERE ApplyingForYear = '2013/14' and [tblApplicantSchools_shadow].statusID = 4
group by DATEADD(ww,(DATEDIFF(ww,0,[tblApplicantSchools_shadow].updated)),0)
order by DATEADD(ww,(DATEDIFF(ww,0,[tblApplicantSchools_shadow].updated)),0) 
```

期望的结果：

```
 Datesubmitted              TotalAppsPerWeek
    -------------------------------------------------------
    2011-11-14 00:00:00.000    1
    2012-09-24 00:00:00.000    1
    2012-10-08 00:00:00.000    3
    2012-10-22 00:00:00.000    2
    2012-10-29 00:00:00.000    2
    2012-11-05 00:00:00.000    2
    2012-11-12 00:00:00.000    5
    2012-11-19 00:00:00.000   26
    2012-11-26 00:00:00.000   106
    2012-12-03 00:00:00.000   353
    2012-12-10 00:00:00.000   298 
```

**[小提琴代码： http](http://sqlfiddle.com/#!3/3aa61/10) ://sqlfiddle.com/#!3/3aa61/10**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:12:46.190

您正在使用`DISTINCT`并且`GROUP BY`两者都做同样的事情。你应该使用其中之一

如果你想使用`GROUP BY`

然后试试这个

```
 GROUP BY tblApplicantSchools_shadow.applicantID 
```

在你的第一个查询中它已经分组了`tblApplicantSchools_shadow.applicantID`所以我不知道你为什么在第二个查询中再次分组

编辑：

> MySQL 扩展了 GROUP BY 的使用，以便您可以使用 SELECT 列表中未出现在 GROUP BY 子句中的非聚合列或计算。您可以使用此功能通过避免不必要的列排序和分组来获得更好的性能。例如，您不需要在以下查询中对 tblApplicantSchools_shadow.applicantID 进行分组

```
In standard SQL, you would have to add tblApplicantSchools_shadow.applicantID to the GROUP BY clause. In MySQL, the name is redundant. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T09:05:56.070

我认为这是因为`distinct`在第二个查询中适用于一个组，因此`tblApplicantSchools_shadow.applicantID`，在第一个查询中具有明显的`[tblApplicantSchools_shadow].updated`折叠并计为一个，但在第二个查询中它们没有，因为它们位于不同的组中。

# c - C中的竞争条件

> ID：15356935
> 
> 赞同：14
> 
> 时间：2013-03-12T08:58:56.993
> 
> 标签：c, operating-system, race-condition

我无法分析过去操作系统考试中的问题。如下：

描述以下程序的输出。是否存在竞争条件？

```
int count=0;
int main(void)
{   
    pid_t pid;      
    if( (pid = fork()) < 0)     
    {       
        perror("Fork error");       
        exit(1);    
    }   
    else if( pid == 0)  
    {       
        charatatime("Output 1\n");  
    }       
    else    
    {       
        charatatime("Output 2\n");  
    }   

    printf(“Count = %d”,count);
    exit(0); 
}  

static void charatatime(char * str)
{
    char * ptr;     
    int c;  
    for(ptr = str; c = *ptr++; )
    {
        count++;        
        putc(c, stdout); 
    }
} 
```

我对 C 和竞态条件还不是很好，所以我的回答主要是猜测。但是如果我在考试中看到这个，我会说“程序将进程拆分为父进程和子进程；子进程打印'Output1'，父进程打印'Output2'，一次一个字符。然后总数字母的数量在程序结束时打印；但是，这个变量“计数”可能不准确，因为孩子和父母之间存在竞争条件。任何一方都可以随时访问和更新计数，这可能导致不准确。

据我了解，当两个或多个线程或进程尝试访问或设置相同的共享变量时，就会出现竞争条件，而我在这个程序中唯一能看到的事件是“计数”。我是否接近正确，如果不正确，可以在该程序中添加什么来创建竞争条件（当然是假设的；我知道这不是我们想要做的）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-12T09:02:45.327

就`count`目前而言，没有种族：两个进程中的每一个都有自己独立的`count`.

`"Output 1"`至于和的字符`"Output 2"`出现的顺序，`stdout`确实存在竞争：两个输出最终可以任意交错。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T09:25:39.490

[https://github.com/madan-ram/race-Condition/blob/master/race_condition.c](https://github.com/madan-ram/race-Condition/blob/master/race_condition.c)这会帮助你..

如您所见，stdout 打印内容的顺序发生了变化，因为我们不知道父项和子项以什么顺序执行 printf 语句。

# javascript - 面向对象的Javascript：事件处理

> ID：15356936
> 
> 赞同：9
> 
> 时间：2013-03-12T08:59:01.340
> 
> 标签：javascript, oop, dom-events

我正在尝试为对象创建一个事件以使其监听它。考虑以下示例：

```
var moon;

moon = document.createEvent("Event");
moon.initEvent("Event",true,true);

var Dog = function (name) {
  this.name = name;

  document.addEventListener("Event",this.bark,false);
};
dog.prototype.bark = function() {
  console.log(this.name + ': Awooooooof Woof!');
};

var spot = new Dog("Spot");
var dot = new Dog("Dot");

//invoke
document.dispatchEvent(moon); 
```

我期待收到如下输出：

> 现场：呜呜呜呜呜！
> 
> 点：呜呜呜呜呜！

但我得到的是：

> 未定义：呜呜呜呜呜！

我的例子有什么问题？如何注册每个 Dog 实例都有的侦听器？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T09:36:36.323

在这一行

```
document.addEventListener("Event",this.bark,false); 
```

您不绑定`this.bark`to的范围`this`。在 JavaScript 中， 的值`this`不取决于函数在哪里定义，而是从哪里调用。这意味着当您传递`this.bark`给`addEventListener`您时，将其与当前对象分离。

在prototype.js 和JQuery 等框架中，有绑定的快捷方式`this`，使用vanilla JavaScript 你可以这样做：

```
function bind(scope, fn) {
   return function() {
      return fn.apply(scope, arguments);
   }
} 
```

接着：

```
document.addEventListener("Event",bind(this, this.bark),false); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T09:31:44.367

您遇到的问题是`this`函数内部没有引用您要操作的对象。

`bark`在函数定义中添加函数怎么样？

```
var Dog = function (name) {
    this.name = name;    
    this.bark = function() {
        console.log(name + ': Awooooooof Woof!');
    };
    document.addEventListener("Event", this.bark, false);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-21T19:55:12.820

**问题**

`this`关键字 inside`Dog.prototype.bark()`指向调用该方法的对象。例如，当`spot.bark()`被调用时，`this.name`计算结果为`spot.name`，如下所示：

```
Dog.prototype.bark = function () {
    console.log(spot.name + ': Awooooooof Woof!');
}; 
```

当事件侦听器被添加到 Dog 的构造函数中时，`document`对象被告知侦听该事件，并`Dog.prototype.bark()`在它听到该事件时被告知调用。此设置正确完成，`document`对象在听到该事件时将调用正确的函数，

当`document`对象实际调用 bark 函数时，问题就会发生。现在，`this`指向`document`对象，并`this.name`计算为`document.name`，如下所示：

```
Dog.prototype.bark = function () {
    console.log(document.name + ': Awooooooof Woof!');
}; 
```

`document.name`不存在，这就是为什么输出是：`undefined: Awooooooof Woof!`

**修复**

使用[Function.prototype.bind()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind)将提供的值绑定到函数的`this`关键字，如下所示：

```
document.addEventListener("Moon", this.bark.bind(this), false); 
```

# postgresql - Heroku 上的 em_postgresql

> ID：15356940
> 
> 赞同：1
> 
> 时间：2013-03-12T08:59:26.680
> 
> 标签：postgresql, heroku, eventmachine

我在瘦服务器上运行一个 Rails 应用程序。我正在使用基于 eventmachine[的 postgres 驱动程序](https://github.com/leftbee/em-postgresql-adapter) ，它可以在我的本地机器上完美运行。

当我尝试在 heroku 上部署时，`em_postgres`驱动程序不起作用，应用程序无法连接到数据库。在本地，我将`config/database.yml`文件中的适配器设置为`em_postgresql`而不是 postgres。由于 Heroku 覆盖了您的`database.yml`文件，我尝试更改`DATABASE_URL`环境变量中的适配器，但没有奏效，它似乎仍在尝试使用标准的 postgres 驱动程序。

有谁知道如何在 Heroku 中正确配置数据库适配器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T00:42:41.993

Heroku 生成 database.yml 文件并始终将适配器放入“postgresql”

要覆盖它，您可以覆盖 database_configuration 方法

在您的 config/application.rb 文件中，您可以添加以下内容以在 activerecord 加载之前更新配置

```
def config.database_configuration
  parsed = super
  parsed[Rails.env]['adapter'] = "em_postgresql"
  parsed[Rails.env]['pool'] = 20
  parsed
end 
```

# java - 如何使用 XML 实体映射 (orm.xml) 持久化 java.util.Properties

> ID：15356947
> 
> 赞同：2
> 
> 时间：2013-03-12T09:00:01.537
> 
> 标签：java, hibernate, orm

我有一个这样的实体：

```
public class MyEntity implements Serializable {
  private static final long serialVersionUID = 1L;

  // some fields such as Long, String etc.

  private java.util.Properties properties;

  // getters, setters, equals, hashCode, toString ...
} 
```

和 XML 实体映射

```
<?xml version="1.0" encoding="UTF-8"?>
<entity-mappings version="2.0"
  xmlns="http://java.sun.com/xml/ns/persistence/orm"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_2_0.xsd">

  <persistence-unit-metadata>
    <persistence-unit-defaults>
      <access>FIELD</access>
    </persistence-unit-defaults>
  </persistence-unit-metadata>

  <entity class="com.package.of.my.MyEntity">
    <table name="my_entity">
      <unique-constraint name="uniquefield">
        <column-name>uniquefield</column-name>
      </unique-constraint>
    </table>

    <!-- some named queries -->

    <attributes>
      <id name="id"><generated-value/></id>

      <!-- some <basic name="..."> columns -->

      <!-- What to put here for mapping the properties field? -->

      <!-- other mappings (one-to-one, one-to-many, many-to-many) -->
    </attributes>
  </entity>

  <!-- other entity mappings -->
</entity-mappings> 
```

我怎样才能理想地映射`java.util.Properties`对象？

使用`<basic name="properties"/>`导致错误：无法解析属性。但是，它确实将 BLOB 列添加到数据库表中。

`Properties`与`String`键和值一起使用，但实际上是扩展`Hashtable<Object,Object>`（实现`Map<Object,Object>`）。这看起来像一对多。但`Object`它不是一个实体，所以它也不起作用。

# html - 当 img 不是块元素时，包装器的额外高度？

> ID：15356950
> 
> 赞同：9
> 
> 时间：2013-03-12T09:00:08.107
> 
> 标签：html, css

我以为我了解内联元素和块元素是如何工作的，但这让我很困惑。我找到了解决这个问题的方法，但**我不知道它为什么会起作用**。

出于某种原因，如果你有一个`img`内部 a `div`，那么 div 就像`3.5px`比图像高。但是，如果您将图像设置为块元素，这个额外的高度就会消失。

基本 HTML：

```
<div id="wrapper">
        <img src="http://www.basini.com/wp-content/uploads/2013/02/seeing-in-the-dark.jpg" width="300" height="230"  />
</div> 
```

和CSS：

```
#wrapper {
    background: orange;
}
#wrapper img {
    /* display: block; this will remove the extra height */
} 
```

我设置了一个[jsfiddle来演示效果](http://jsfiddle.net/kQS34/1/)

**为什么会发生这种情况，为什么将“img”作为块元素来解决它？还有其他解决方案吗？**

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T09:05:05.633

默认情况下，图像是内联渲染的，就像一个字母。

它与 a、b、c 和 d 位于同一条线上。

该行下方有空间用于您在 j、p 和 q 等字母上找到的下行字母。

您可以调整图像的垂直对齐以将其定位到其他位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T09:11:27.393

这是由于标签`line-height`的包装。`div``img`

要修复它，您可以设置`line-height:0`为 div、`float`img 或`display:block`img。

更好的解释：[How to control line height in <p> styled as inline](https://stackoverflow.com/questions/8001891/how-to-control-line-height-in-p-styled-as-inline)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:06:09.970

您是否尝试过[重置所有样式](http://meyerweb.com/eric/tools/css/reset/)？在应用新样式之前？

# haskell - 为什么 Haskell 中没有元组的“通用”访问器函数？

> ID：15356953
> 
> 赞同：11
> 
> 时间：2013-03-12T09:00:14.643
> 
> 标签：haskell, typeclass

我知道有`fst`and `snd`，但是为什么没有使用类型类的访问器函数的“通用”定义？我会建议像

```
class Get1 p a | p -> a where
  get1 :: p -> a 

instance Get1 (a,b) a where
  get1 (x,_) = x 

instance Get1 (a,b,c) a where
  get1 (x,_,_) = x 

class Get2 p a | p -> a where
  get2 :: p -> a 

instance Get2 (a,b) b where
  get2 (_,x) = x 

instance Get2 (a,b,c) b where
  get2 (_,x,_) = x 
```

当然，你需要一些语言扩展，但这不是*更*方便吗？特别是您可以为自己的类型添加实例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T12:28:28.127

需要注意的一件事是，`fst`仅`snd`允许一个查看 2 元组。将它们推广到其他领域和操作很快就会变得很痛苦。例如，如果您还想映射元组的第一个元素，则必须引入另一个组合子（据记录，该组合子存在于 2 元组中`Control.Arrow.first`）。这很快导致高元组的组合器数量激增。

话虽如此，`lens`提供了一些很好的工具来处理元组。[`Control.Lens.Tuple`](http://hackage.haskell.org/packages/archive/lens/3.8.7.3/doc/html/Control-Lens-Tuple.html)提供了几个索引透镜`_1`,`_2`等，它们允许访问元组的第一个、第二个等元素，直到 arity 9.

例如，

```
>>> import Control.Lens
>>> let t = (1,2,3,5,6,7,2)
>>> t ^._1
1
>>> t & _1 .~ 'a'
('a',2,3,5,6,7,2)
>>> t & _1 +~ 41
(42,2,3,5,6,7,2)
>>> over _1 (+1) t
(2,2,3,5,6,7,2) 
```

您可能还对 中的元组实例感兴趣[`Control.Lens.At`](http://hackage.haskell.org/packages/archive/lens/3.8.7.3/doc/html/Control-Lens-At.html)。此外，该`tuple-lenses` [软件包](http://hackage.haskell.org/package/tuple-lenses)还提供了一些更通用的镜头，用于一次检查多个元组条目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T10:14:58.993

这样的类型类只提供编码（语法）便利，我看不到如何在它们之上构建泛化的元组类型工具。如果您正在寻找元组泛化，请查看Reddit 上[关于异构向量的讨论。](http://www.reddit.com/r/haskell/comments/19pspd/i_just_put_together_a_package_for_heterogenous/)

另请注意，对于普通结构，最好定义自己的 ADT 并为 getter 提供合理的名称，然后使用高元组。

编辑：但是，正如 is7s 在评论中指出的那样，hackage 上有许多包为任意长度的元组提供索引功能。

# android - AES 128 位加密不起作用

> ID：15356954
> 
> 赞同：2
> 
> 时间：2013-03-12T09:00:15.840
> 
> 标签：android, encryption, aes

我正在尝试为 android 实现 AES 128 位加密。在 cipher.doFinal 进程停止。它也不会进入 catch 块。已附上代码。

```
public class MainActivity extends Activity {

  EditText encryptText;
  Button encryptButton;
  String key = "16bitkey";
  String requestData;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    initViews();
  }

  public void initViews(){

    encryptText = (EditText) findViewById(R.id.encryptText);
    encryptButton = (Button) findViewById(R.id.encryptButton);
    encryptButton.setOnClickListener(new OnClickListener() {

      @Override
      public void onClick(View arg0) {
        // TODO Auto-generated method stub
        new event_background().execute();
      }
    });
  }

  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
  }

  public void performSocketRequest(){
    try{
      requestData = encryptText.getText().toString();
      byte[] keyInBytes = convertToByteArray(key);
      byte[] requestInBytes = convertToByteArray(requestData);
      byte[] aesEncryptedData = aesEncryption(keyInBytes, requestInBytes);
    }
    catch(Exception e){
    }
  }

  public byte[] convertToByteArray(String data){

    byte[] bytes = null;
    try{
      bytes = data.getBytes("UTF8");
    }catch(Exception e){

    }
    return bytes;
  }

  public byte[] aesEncryption(byte[] raw, byte[] clear) throws Exception{

    try{

      KeyGenerator kgen = KeyGenerator.getInstance("AES");
      SecureRandom sr = SecureRandom.getInstance("SHA1PRNG");
      sr.setSeed(raw);
      kgen.init(128, sr);
      SecretKey skey = kgen.generateKey();
      byte[] keyTemp = skey.getEncoded(); 
      byte[] iv = { 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 };
      IvParameterSpec ivspec = new IvParameterSpec(iv);

      SecretKeySpec skeySpec = new SecretKeySpec(keyTemp, "AES");
      Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
      cipher.init(Cipher.ENCRYPT_MODE, skeySpec, ivspec);
      return cipher.doFinal(clear);

    }catch(IllegalBlockSizeException e){
      Log.e("*********** IllegalBlockSizeException error **************", e.getMessage());
    }catch(BadPaddingException e){          
      Log.e("*********** BadPaddingException error **************", e.getMessage());          
    }catch(Exception e){          
      Log.e("*********** error **************", e.getMessage());
    }

    return null;
  }

  class event_background extends AsyncTask<Void, String, Void> {

    @Override
    protected void onPreExecute() {
      super.onPreExecute();
    }

    @Override
    protected void onPostExecute(Void unused) {
    }

    @Override
    protected Void doInBackground(Void... params) {
      // TODO Auto-generated method stub
      performSocketRequest();
      return null;
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:22:56.253

存档加密/解密的另一种方法：

*用法*

加密：

```
 MCrypt mcrypt = new MCrypt();
 String encrypted = MCrypt.bytesToHex(mcrypt.encrypt("Text to Encrypt")); 
```

解密：

```
MCrypt mcrypt = new MCrypt();
String decrypted = new String(mcrypt.decrypt(encrypted)); 
```

*类代码：（*在 2.1+ 设备上测试和工作。未在 4+ 测试，但应该可以工作）

```
import java.security.NoSuchAlgorithmException;

import javax.crypto.Cipher;
import javax.crypto.NoSuchPaddingException;
import javax.crypto.spec.IvParameterSpec;
import javax.crypto.spec.SecretKeySpec;
public class MCrypt {

    private String iv = "fedcba9876543210";//Dummy iv (CHANGE IT!)
    private IvParameterSpec ivspec;
    private SecretKeySpec keyspec;
    private Cipher cipher;
    private String SecretKey = "0123456789abcdef";//Dummy secretKey (CHANGE IT!)

    public MCrypt() {
        ivspec = new IvParameterSpec(iv.getBytes());

        keyspec = new SecretKeySpec(SecretKey.getBytes(), "AES");

        try {
            cipher = Cipher.getInstance("AES/CBC/NoPadding");
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
        } catch (NoSuchPaddingException e) {
            e.printStackTrace();
        }
    }

    public byte[] encrypt(String text) throws Exception {
        if (text == null || text.length() == 0) throw new Exception("Empty string");

        byte[] encrypted = null;

        cipher.init(Cipher.ENCRYPT_MODE, keyspec, ivspec);

        encrypted = cipher.doFinal(padString(text).getBytes());
        try { //  for OS version 2.2+
            encrypted = android.util.Base64.encode(encrypted, android.util.Base64.NO_PADDING);
        } catch (NoClassDefFoundError e) {
            encrypted = org.apache.commons.codec.binary.Base64.encodeBase64(encrypted);
        }

        return encrypted;
    }

    public byte[] decrypt(String code) throws Exception {
        if (code == null || code.length() == 0) throw new Exception("Empty string");

        byte[] decrypted = null;

        cipher.init(Cipher.DECRYPT_MODE, keyspec, ivspec);

        try { // for OS version 2.2+
            decrypted = cipher.doFinal(android.util.Base64.decode(code, android.util.Base64.NO_PADDING));
        } catch (NoClassDefFoundError e) {
            decrypted = cipher.doFinal(org.apache.commons.codec.binary.Base64.decodeBase64(code.getBytes("UTF-8")));
        }
        return decrypted;
    }

    private static String padString(String source) {
        char paddingChar = ' ';
        int size = 16;
        int x = source.length() % size;
        int padLength = size - x;

        for (int i = 0; i < padLength; i++) {
            source += paddingChar;
        }

        return source;
    }
} 
```

相关链接：[http ://www.androidsnippets.com/encrypt-decrypt-between-android-and-php](http://www.androidsnippets.com/encrypt-decrypt-between-android-and-php)

# google-app-engine - DynamoDB vs GAE Datastore：json 键值存储哪个更便宜？

> ID：15356956
> 
> 赞同：2
> 
> 时间：2013-03-12T09:00:17.623
> 
> 标签：google-app-engine, google-cloud-datastore, amazon-dynamodb

我需要将许多 sha1 键控 json 对象存储到数据库中

我不想管理数据库，所以我正在考虑 DynamoDB 或 GAE 数据存储或类似的东西。

假设性能或其他因素可以忽略。

哪个（DynamoDB 或 GAE 数据存储）会更便宜？

我已阅读此[http://aws.typepad.com/aws/2013/03/dynamodb-price-reduction-and-new-reserved-capacity-model.html](http://aws.typepad.com/aws/2013/03/dynamodb-price-reduction-and-new-reserved-capacity-model.html)

但 GAE 和 AWS 的定价过于复杂，难以比较。

谁有使用这两种方法的经验？

请与我们分享。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-12T16:35:41.223

两种服务都有一个免费套餐，然后您需要付费。他们都计量存储和操作。但是，它们以不同的方式计量操作。使用 DynamoDB，您可以每秒配置容量单位并按小时计量。Google 按操作次数收费（每月？）。您需要查看 (1) 您计划存储多少数据，以及 (2) 您认为每秒要执行多少操作。

# html - mathML 根本不渲染

> ID：15356957
> 
> 赞同：0
> 
> 时间：2013-03-12T09:00:18.107
> 
> 标签：html, xhtml, mathml

我用 MathML 写了这个数学方程。我已经尝试过使用`.html`和`.xhtml`。他们都没有满足我的愿望。它以 html 格式显示`x y x y`，以 .xhtml 格式显示代码。那么我该如何让它工作呢？

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <title></title>
  </head>
  <body>
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML" mode="display">
  <mfrac>
    <mi>x</mi>
    <mi>y</mi>
  </mfrac>
    </math>
    <math display="block" xmlns="http://www.w3.org/1998/Math/MathML" mode="inline">
  <mfrac>
    <mi>x</mi>
    <mi>y</mi>
      </mfrac>
    </math>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:41:02.627

`mathjax`从解决我的问题导入javascript ：

```
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script> 
```

复杂代码如下所示：

```
<!DOCTYPE html>
<html>
<head>
<title>MathJax MathML Test Page</title>
<script type="text/javascript"
  src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</head>
<body>

<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML" mode="display">
  <mfrac>
    <mi>x</mi>
    <mi>y</mi>
  </mfrac>
    </math>
    <math display="block" xmlns="http://www.w3.org/1998/Math/MathML" mode="inline">
  <mfrac>
    <mi>x</mi>
    <mi>y</mi>
      </mfrac>
    </math>

</body>
</html> 
```

# android - NFC：在应用程序启动时读取

> ID：15356967
> 
> 赞同：1
> 
> 时间：2013-03-12T09:00:53.517
> 
> 标签：android, nfc

我正在使用**Mifare NFC**标签，并且成功地读取和写入标签。我的标签只包含一个包名，这意味着它启动一个应用程序或在未安装应用程序的情况下进入*Play 商店。*

但我在以下用例中苦苦挣扎：

我想在应用程序第一次启动时读取标签。不幸的是，用于启动我的应用程序的*Intent*操作来自 MAIN 类型，并且不包含任何 NFC 信息。在应用程序运行时将标签第二次靠近设备，将触发`TECH_DISCOVERED Intent`其中包含我需要的信息。

简而言之：当应用程序第一次使用标签启动时，是否可以从标签中获取内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T00:10:22.920

如果标签上的 NDEF 消息仅包含 Android 应用程序记录 (AAR)，您将无法在意图中获得标签的句柄。如果您有一个与 NDEF 消息的第一条记录匹配的意图过滤器，您会得到它。但是，Android 对 AAR 的处理方式有所不同：它的意图过滤器被忽略，而是启动了请求的应用程序。

您应该创建一个 NDEF 消息，其中包含例如 URL 记录，然后是 AAR，而不是仅包含包名称的 AAR。如果您随后使用操作 NDEF_DISCOVERED 为 URL 添加意图过滤器，您将获得带有标签句柄的意图。

# javascript - 方法重写无法正常工作

> ID：15356970
> 
> 赞同：1
> 
> 时间：2013-03-12T09:01:13.520
> 
> 标签：javascript, backbone.js

我正在尝试使用以下代码动态重写该方法。

```
"use strict";

define(function (require) {
    var Backbone = require('backbone');

    var TestView = Backbone.View.extend({

        initialize: function () {
            var that = this;
            that.model.on("change", this.render, this);
        },

        render: function () {
            this.initialRender();
            this.$el.html("Work to do everytime");

            this.render = function () {
                this.$el.html("Work to do everytime");
            }
        },
        initialRender: function () {
            console.log("Work to do once only");
        }

    });

    var model = new Backbone.Model();
    var view = new TestView({
        model: model
    });

    view.render();
    view.render();

    view.model.set("testdata", "data");
}); 
```

我想要这个输出：

```
Work to do once only 
```

但我得到这个输出：

```
Work to do once only
Work to do once only 
```

谁能解释一下到底发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:19:15.557

问题是您的事件处理程序已经绑定到渲染函数的原始版本。替换 this.render 引用并不会改变这一事实。

Derick Bailey 写了[一篇博客文章](http://lostechies.com/derickbailey/2013/03/08/method-rewriting-running-with-a-lit-stick-of-dynamite/)来描述这个问题。

# plot - 绘制虚线

> ID：15356973
> 
> 赞同：2
> 
> 时间：2013-03-12T09:01:36.317
> 
> 标签：plot, line, gnuplot

如何`dashed`使用 gnuplot 绘制灰线？`set style line 1 lt 2 lc rgb "grey" lw 1`

我试过：

```
plot "-" using 1:2, \
     "-" using 1:2, \
     "-" using 1:2 ls 1,\
     "-" using 1:2 ls 1
1.5 17
1.7 16
e
1.5 10
1.7 8
e
1.5 0
1.5 20
e
7 0
7 20
e 
```

应该有两条垂直的灰色虚线，但实际上只有点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T09:25:51.413

要使 plot 命令默认为`with lines`，您需要`set style data lines`. 您必须指定`termoption dashed`获得虚线，但这也意味着`linetype 2`和向上是虚线或虚线。我认为定义适当的线条样式是最好的方法：

```
set termoption dashed

set style data lines
set style line 1 lt 2 lc rgb "grey" lw 1
set style line 2 lt 1 lc 1 lw 1
set style line 3 lt 1 lc 2 lw 1

plot "-" using 1:2 ls 2, \
     "-" using 1:2 ls 3, \
     "-" using 1:2 ls 1, \
     "-" using 1:2 ls 1
1.5 17
1.7 16
e
1.5 10
1.7 8
e
1.5 0
1.5 20
e
7 0
7 20
e 
```

# java - 如何从字符串数组中查找重复的字符串

> ID：15356974
> 
> 赞同：6
> 
> 时间：2013-03-12T09:01:37.060
> 
> 标签：java

我有一个字符串数组，其中包含字符串列表。我想弄清楚这个列表中是否有任何重复的条目。基本上我有一个用户列表，应该没有重复的条目。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T09:13:07.987

您可以将字符串数组添加到 HashSet

```
Set<String> h = new HashSet<String>(Arrays.asList(new String[] { "a", "b" })); 
```

这将为您提供唯一的字符串值。如有必要，将 HashSet 转换回数组

```
String[] uniqueValues = h.toArray(new String[0]); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-12T09:16:35.377

如果您需要独特的东西，那么我们在 java 中有 Set

```
 String[] users = "User1,User2,User1,User,User".split(",");

        Set<String> uniquUsers = new HashSet<String>();

        for (int i = 0; i < users.length; i++) {
            if (!uniquUsers.add(users[i]))
                users[i] = "Duplicate"; // here I am assigning Duplicate instead if find duplicate
                                        // you can assign as null or whatever you want to do with duplicates.
        }
        System.out.println(Arrays.toString(users)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T09:06:50.597

将它们全部添加到集合中，您将获得唯一用户。然后将其转换回数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T09:03:43.983

按字母顺序排序。如果任何两个相邻条目相同，则您找到了重复项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T09:06:39.873

如果您想检查添加新用户，您只需遍历数组并`username.equals(*)`在每个现有用户上使用。

如果您有一个包含重复条目的数组，只需为您拥有的每个用户运行此算法。

这些都是粗略的方法，对于这个问题有很多优化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T09:14:28.090

正如您所提到的，不应该有重复的条目，所以最好在添加新用户之前迭代整个数组，而不是添加然后检查重复项。前一个解决方案将在 O(N) 中解决它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T09:28:57.727

**Patashu 的**想法似乎是最简单的。您可以使用`Arrays.sort()`轻松有效地对数组进行排序。

如果你真的想搜索，你可能会使用其中一种`Arrays.binarysearch()`方法。但它们也需要排序数组....对于数组中的每个元素（例如在索引*n*处），搜索部分 0...( *n* -1) 并搜索部分 ( *n* +1)...(length -1) 但如果您只能与与*n*相邻的一个元素进行比较，那将是非常浪费的。所以又回到了之前的建议。

如果您想稍微减少编码，可能会以牺牲速度为代价，您可以使用以下`contains()`实现类之一的方法`AbstractCollection`- 可能`ArrayList`（可以包含重复项）、`TreeSet`（已排序，包含唯一值）或`HashSet`（未排序，包含唯一值）。您可以使用参数调用这些集合的构造函数，`Arrays.asList(yourArray)`这样您就不需要一个一个地填充。

正如**ay89**正确提到的，拥有一个具有唯一值的数组（换句话说，一个集合）更简单，然后在尝试添加它之前检查您的值是否已经包含。让事情变得简单多了。但你可能并不总是对你所得到的东西感到如此奢侈。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-12T09:29:26.897

创建一个数组 news_data 并在其中添加字符串。

```
for (int i = 0; i < news_data.length; i++) {
                for (int j = i+1; j < news_data.length; j++) {
                    if(news_data[i].equals(news_data[j])){
                        news_data = removeElement(news_data, j);
                    }
                }
            }
   public static String[] removeElement(String[] original, int element){
        String[] n = new String[original.length - 1];
        System.arraycopy(original, 0, n, 0, element );
        System.arraycopy(original, element+1, n, element, original.length - element-1);
        return n;
    } 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2013-03-12T09:04:01.347

很简单，使用 LINQ 查找列表中的重复项。

# c++ - Profiler for Windows C++（基于控制台的网络应用程序）

> ID：15356977
> 
> 赞同：1
> 
> 时间：2013-03-12T09:01:46.617
> 
> 标签：c++, windows, networking, console-application, profiler

我们开发了一个基于 Windows C++ 控制台的网络密集型应用程序，它在数据通信期间似乎很慢。

代码库很大，所以我正在寻找一个分析器工具，它可以指向特定的函数/代码行，这些函数/代码行是整体性能的瓶颈。

我尝试使用 VS 2010 中提供的“性能工具”，但在我运行以分析应用程序时它崩溃了。

```
Error Message: Injection of Runtime library failed. 
```

另外，我尝试使用非常困，但我看不到我的函数，可能是因为它无法指向源代码（但不确定，可能是我可能没有正确使用它）

有人可以为基于 Windows C++ 控制台的应用程序推荐一些好的免费分析器吗？

根据评估，我们也将继续进行分析器的商业版本。

提前谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T09:07:40.527

如果您使用的是基于 Intel 的机器，我会使用 VTune。如果它在 AMD 机器上，CodeAnalyst 就是类似的产品。

我相信 VTune 可以通过试用许可证获得。CodeAnalyst 是免费提供的。

这些工具不是基于控制台的，但它们可以用于分析基于控制台的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:47:49.640

可能有几个“问题”，或者让它更快的方法。我不会称它们为“瓶颈”，因为它们通常没有本地化。通常它们是非常好的代码——只是从来没有想过它们会在“关键路径”上。

假设问题在解决后会节省这些百分比：

![在此处输入图像描述](../Images/abb707942f5ab9d8847c9fcfd253267a.png)

只需找到其中一个即可为您提供一定程度的加速。就像你只找到 A 一样，这会给你 1/(1-0.3) = 1.43 或 43% 的加速。如果你这样做了，你就可以像大多数人一样开心并停下来。但是，如果您继续并找到 B，您的总加速将是 1/(1-0.51) = 2.04 或 104%。这比 43% 多得多，尽管 B 比 A 小。固定 C 可以让您快 2.92 倍，而 D 可以让您快 4.2 倍。

什么？解决较小的问题有更高的回报？他们可以，因为加速因素复合。按该顺序固定 A 和 B 得到 1.43 * 1.43 = 2.04。如果你碰巧以相反的顺序修复它们，你会得到 1.27 * 1.61 = 2.04

每次你修复某个问题时，其他问题就会变得更大，按百分比计算并且更容易找到，并且加速累积就像高收益投资一样。当你修复 A、B、C、D 和 E 时，剩下的就是 F，不是 5%，而是 30%。修复所有问题，现在您的速度提高了 8.5 倍！但是，如果你错过了一个，比如 D，因为你的分析工具没有暴露它，你的速度只有 4.5 倍。

*这就是你没有发现问题所付出的代价。*

这就是我依赖[*手动技术*](https://stackoverflow.com/a/378024/23771)的原因，因为相对于分析器，它会发现他们发现的所有问题，并且会发现他们没有发现的问题。Profiler 经常关心外围问题，例如测量的准确性，这无助于发现问题。如果你想知道为什么，[*这里是数学*](https://scicomp.stackexchange.com/a/2719/1262)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:29:59.907

我们的[C++ Profiler](http://www.semanticdesigns.com/Products/Profilers/CppProfiler.html)工具应该可以工作。

它不关心您的应用程序如何进行 I/O（例如，“基于控制台”）。它处理庞大的文件系统。它还处理 C++ 的 GNU 和 MS 方言，以及 C++11。

商业的。（我怀疑你会找到适用于 MS Visual C++ 的免费分析器）。

# javascript - 在javascript中“退出”的最佳方式

> ID：15356978
> 
> 赞同：5
> 
> 时间：2013-03-12T09:01:49.230
> 
> 标签：javascript, browser, window.location

我的目标是：

```
if(error){
    window.location.href = "error.htm";
    //end of every thing
} 
```

更重要的是，`return false`不会有帮助，因为函数内部可能有函数。我目前的解决办法是`throw`，但我觉得不舒服

有更好的主意|| 解决方案 ？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T09:04:36.390

如果你不想离开一个函数，我想你会尝试打破循环。

然后你可以使用[break](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/break)：

```
function testBreak(x) {
   var i = 0;

   while (i < 6) {
      if (i == 3) {
         break;
      }
      i += 1;
   }
   return i * x;
} 
```

*（MDN 示例）*

如果您尝试从多个函数退出，通过多个堆栈调用级别，那么想到的唯一“有效”用例是“异常”错误，可以使用 try/catch/throw 处理锯。但是滥用异常会导致代码难以维护并且经常隐藏错误。如果您需要它，您的代码可能看起来并不像 javascript-esque。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-26T10:54:37.403

我使用 throw 退出 JS

```
throw new Error("my error message"); 
```

如 ;

[JavaScript 相当于 PHP 的死](https://stackoverflow.com/questions/1361437/javascript-equivalent-of-phps-die)

# android - Android Maps V2 应用程序崩溃

> ID：15356981
> 
> 赞同：2
> 
> 时间：2013-03-12T09:01:54.877
> 
> 标签：android, google-maps-android-api-2

我制作了一个使用 Google Android Maps API V2 的应用程序，并且我遵循了 Google 提供的指南中的每一步，但不幸的是它不能正常工作，每次我尝试启动它时它都会崩溃。所以我想知道是什么问题？

**MainActivity.java**

```
package com.android.maptest;

import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }
} 
```

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
          android:id="@+id/map"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:name="com.google.android.gms.maps.MapFragment"/> 
```

**Maptest Manifest.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.maptest"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="16"
        android:targetSdkVersion="16" />
    <permission
        android:name="com.android.maptest.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <uses-permission android:name="com.android.maptest.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" 
        android:debuggable="true" >
        <activity
            android:name="com.android.maptest.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="api_key" />
    </application>

</manifest> 
```

**日志猫**

```
03-12 09:46:13.150: D/AndroidRuntime(1547): Shutting down VM

03-12 09:46:13.150: W/dalvikvm(1547): threadid=1: thread exiting with uncaught exception (group=0x410e22a0)

03-12 09:46:13.155: E/AndroidRuntime(1547): FATAL EXCEPTION: main

03-12 09:46:13.155: E/AndroidRuntime(1547): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.maptest/com.android.maptest.MainActivity}: android.view.InflateException: Binary XML file line #2: Error inflating class fragment

03-12 09:46:13.155: E/AndroidRuntime(1547):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2100)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2125)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at 
```

android.app.ActivityThread.access$600(ActivityThread.java:140)

```
03-12 09:46:13.155: E/AndroidRuntime(1547):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1227)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at android.os.Handler.dispatchMessage(Handler.java:99)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at android.os.Looper.loop(Looper.java:137)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at android.app.ActivityThread.main(ActivityThread.java:4898)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at java.lang.reflect.Method.invokeNative(Native Method)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at java.lang.reflect.Method.invoke(Method.java:511)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at dalvik.system.NativeStart.main(Native Method)

03-12 09:46:13.155: E/AndroidRuntime(1547): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class fragment

03-12 09:46:13.155: E/AndroidRuntime(1547):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at android.view.LayoutInflater.inflate(LayoutInflater.java:466)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:308)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at android.app.Activity.setContentView(Activity.java:1924)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at com.android.maptest.MainActivity.onCreate(MainActivity.java:11)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at android.app.Activity.performCreate(Activity.java:5206)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1083)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2064)

03-12 09:46:13.155: E/AndroidRuntime(1547):     ... 11 more

03-12 09:46:13.155: E/AndroidRuntime(1547): Caused by: android.app.Fragment$InstantiationException: Unable to instantiate fragment com.google.android.gms.maps.MapFragment: make sure class name exists, is public, and has an empty constructor that is public

03-12 09:46:13.155: E/AndroidRuntime(1547):     at android.app.Fragment.instantiate(Fragment.java:584)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at android.app.Fragment.instantiate(Fragment.java:552)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at android.app.Activity.onCreateView(Activity.java:4849)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)

03-12 09:46:13.155: E/AndroidRuntime(1547):     ... 20 more

03-12 09:46:13.155: E/AndroidRuntime(1547): Caused by: java.lang.ClassNotFoundException: com.google.android.gms.maps.MapFragment

03-12 09:46:13.155: E/AndroidRuntime(1547):     at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at java.lang.ClassLoader.loadClass(ClassLoader.java:501)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at java.lang.ClassLoader.loadClass(ClassLoader.java:461)

03-12 09:46:13.155: E/AndroidRuntime(1547):     at android.app.Fragment.instantiate(Fragment.java:574)

03-12 09:46:13.155: E/AndroidRuntime(1547):     ... 23 more

03-12 09:51:21.560: I/Process(1547): Sending signal. PID: 1547 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T11:11:33.953

对我来说添加：

```
import com.google.android.gms.maps.SupportMapFragment; 
```

并将xml更改为

```
 <fragment
    android:name="com.google.android.gms.maps.SupportMapFragment"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_below="@+id/header"  /> 
```

解决了这个问题。希望你也解决！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T10:07:49.693

我假设您已经获得[`Google Maps Android API v2`](https://code.google.com/apis/console/)key 并且拥有`Google Play services`. 如果您尚未安装，请按照以下步骤解决此问题_

*   第 1 步。您可以在-Google Play 服务安装它的勾选复选框`Android SDK Manager`下找到它，完成安装后，重新启动 Eclipse。`Extras`

*   步骤 2\. 将您的 Android SDK 设置文件夹`google-play-services_lib`下的库 named_ 添加到您的 Android 项目_`extras`

google服务库路径_

```
{Your_Android_SDK_direct}\extras\google\google_play_services\libproject\google-play-services_lib 

Ex. Location of this lib on My system_ 
C:\Program Files\Android\android-sdk\extras\google\google_play_services\libproject\google-play-services_lib 
```

我希望这能解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T09:13:44.223

看起来您没有将 Google Play 服务库添加到您的项目中。

它位于`{Android SDK}\extras\google\google_play_services`

将其作为 Android 库项目添加到 Eclipse，然后将其添加到您的项目中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T09:16:28.780

这是我写的关于如何将 Google 地图集成到您的应用程序中的博客文章：

[创建谷歌地图应用程序](https://blog-emildesign.rhcloud.com/?p=435)

从您的错误来看，您似乎没有正确执行博客指南的步骤 2-3，将 Google Play 服务库添加到您的应用程序中。

如果您仔细按照指南中所写的步骤进行操作，您将获得最终结果，您可以在帖子末尾看到。

# libgdx - TileMap 未生成；添加到舞台？

> ID：15356982
> 
> 赞同：0
> 
> 时间：2013-03-12T09:01:54.977
> 
> 标签：libgdx

我对 LibGDX 很陌生，我遇到了问题。我正在构建一个经典风格的 RPG/冒险游戏，其中我使用 TiledMap(-Renderer) 创建地图。我遵循了不同的教程，但无法使其正常工作。（最后一个是 DPG 的：完整工作示例[链接](http://dpk.net/2011/05/01/libgdx-box2d-tiled-maps-full-working-example-part-1/#p2)）

我需要的是屏幕右侧的一列按钮（通过 ImageButtons 实现）。其中一个按钮通向设置类型的屏幕，另一个应通向游戏地图。在按钮的 ClickListener 下，我添加了 DPK 的代码

```
 MapHelper map = new MapHelper();

    map.setPackerDirectory("data/packer");

    map.loadMap("data/world/level1/level.tmx");

    map.prepareCamera((int)stage.getWidth(), (int)stage.getHeight());

    map.getCamera().update();

    map.render(); 
```

MapHelper 类是 dpk 的精确副本，唯一的变化是相机的宽度和高度的设置。有什么建议我在这里做错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T05:15:01.410

我认为您不想`map.render()`在`ClickListener`回调中调用。这意味着地图仅在您单击时渲染，然后不会重新渲染（通常在每次刷新屏幕时都会重新渲染所有内容）。

我认为您需要`map`在应用程序类中跟踪 ，并且在 ClickListener 回调中，您需要设置一个标志或以某种方式“启用”地图（可能将其设置为 以外的其他内容`null`）。然后在应用程序的 render() 方法中，您可以检查是否应该渲染地图，如果是则渲染它。

具体来说，将调用移至`prepareCamera`，移出。`getCamera``render``ClickListener`

# ajax - Joomla 2.5 Ajax 将数据保存到 db 字符编码

> ID：15356984
> 
> 赞同：0
> 
> 时间：2013-03-12T09:02:04.127
> 
> 标签：ajax, joomla, character-encoding

我尝试通过 ajax 将日期时间（ 2013-03-12 09:43:09 ）字符串从表单发送到数据库。我使用了以下 JS

```
$.ajax({
    type: "POST",
    contentType: "application/x-www-form-urlencoded; charset=utf-8",
    data: { 
    end: $('#endtime').val()
    },
    url: 'index.php?option=com_sprojectfree&view=checkin&task=saveSlot&format=raw',
    success: function(data) {
        console.log(data);
    }
}); 
```

url 指向我的 controller.php 中的方法 saveSlot

```
public function saveSlot ()
{
    $input = JFactory::getApplication()->input;
    $data = new stdClass();
    $data->end = $input->get('end');
    db = JFactory::getDBO();
    $result = $db->insertObject( '#__spf_chunks', $data, 'id' );
...
} 
```

数据对象如下所示：

```
stdClass Object
(
    [end] => 2013-03-12095730
) 
```

和这样的 POST 源：

```
end=2013-03-12+09%3A57%3A30 
```

我在 JS 中尝试了字符集、urldecode() 和 encodeURIComponent() 的所有组合，但没有给我正确的字符串 : back 以将其保存在数据库中。我能做什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T09:10:11.887

尝试这个

```
echo urldecode("2013-03-12+09%3A57%3A30"); 
```

php端的解码。

通常，当您调用 ajax 时，无需提及内容类型。

您可以像这样传递数据，而不是将数据作为对象传递

```
var data = "end="+$('#endtime').val();
data: encodeURIComponent (data) 
```

在控制器中，您可以通过`JRequest::getVar('end');`

希望能帮助到你

# csv - 从 JXTable 导出到 excel (.csv) 文件时，制表符转义序列不起作用

> ID：15356988
> 
> 赞同：0
> 
> 时间：2013-03-12T09:02:15.373
> 
> 标签：csv, escaping, jxtable

我正在尝试将数据从 JXTable 导出到 .csv 文件（excel）。我为此使用以下代码：

```
public void exportToExcel(NGAFStandardTable table, File file){
        int i = 0;
        int j = 0;
        try{

            TableModel model = table.getModel();
            FileWriter excel = new FileWriter(file);

            for (i = 0; i < model.getColumnCount(); i++) {
                excel.write(model.getColumnName(i) + "\t");
            }

            excel.write("\n");

            for (i = 0; i < model.getRowCount(); i++){
                for (j = 0; j < (model.getColumnCount()); j++){
                    if(model.getValueAt(i,j) == null){
                        excel.write("" + "\t");
                    }
                    else { 
                        excel.write(model.getValueAt(i,j).toString() + "\t");
                    }
                }
                excel.write("\n");
            }

            excel.close();
        }
        catch(IOException e) {
            System.out.println(e);
        }
    } 
```

结果是我得到了一个 csv 文件，其中包含表中的所有值，但每一行的值都在一个单元格中（例如，A1、A2、A3）。即，row1 的所有值都在 A1 单元格中，依此类推...我正在使用制表符转义序列（“\ t”），因此数据移动到下一列，但没有发生。请建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:46:48.327

当我使用“，”代替“\ t”作为分隔符时，它起作用了： `excel.write(model.getValueAt(i, j).toString() + ",");`