# StackOverflow 问答 16104000-16104999

# drupal - 如何拆分 $left 的内容，它在 drupal 中显示导航链接

> ID：16104000
> 
> 赞同：-1
> 
> 时间：2013-04-19T11:52:46.750
> 
> 标签：drupal, drupal-6, drupal-theming

我正在将自定义主题集成到我的项目中，但我遇到了这个问题。变量 $left 打印侧边栏上的导航链接。实际上，当我打印 $left 时，我得到了如下所示的自动生成的代码......但我需要只有 <ul> 内容...有人可以帮我解决一下吗.....

```
< div>< class="clear-block block block-user" id="block-user-1">

 < div>< class="content">

  < ul class="menu">

      < li class="leaf first">< a href="/?q=Test">My Account< /a>< /li>

      < li class="leaf">< a href="/?q=Test2">My Books< /a>< /li>

 </ul>

< /div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T04:54:44.933

好的，这就是我发现的...我不知道是否还有其他方法。有一个**block.tpl.php**文件用于主题中的每个块。我在 block.tpl.php 中找到了这段代码

```
<div id="block- <?php print $block->module .'-'. $block->delta; ?>" class="clear-block block block-<?php print $block->module ?>">

<?php if (!empty($block->subject)): ?>
<h2>< ?php print $block->subject ?></h2>
<?php endif;?>
<div class="content"><?php print $block->content ?>< /div>
</div> 
```

对于逐个区域的自定义布局，您只需要使用以下标准为该区域创建一个 tpl 文件： block ***-regionname.tpl.php*****。因此***，如果该区域是“**自定义**”，那么您将创建一个名为**block的文件-custom.tpl.php**在您的主题文件夹中并粘贴为您提供块内容的代码。*

 *```
<?php print $block->content ?> 
```

然后你就走了.... :)*

# php - 使用 Jquery 上传图片

> ID：16104004
> 
> 赞同：0
> 
> 时间：2013-04-19T11:53:03.610
> 
> 标签：php, jquery, image-uploading

我有这个 Html 代码，我尝试将我的记录保存在数据库中

```
<div> 
     <p> Item Name : 
      <input type = 'text' id = 'ItemName' />  
     </p>
     <p> select Image : 
      <input type = 'file' id = 'Image' />
      </p>
     <input type='button' id ='btnSaveItem'>Save </input> 

 </div> 
```

如何使用 Jquery 和 PHP 上传图片并保存？我一直无法找到上传图片的 Jquery 方法，但我需要在没有页面刷新的情况下进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:57:00.543

通常你不能通过 Ajax 上传图片，你需要一些变通方法。

我使用这个 jquery 插件，它很容易使用，你几乎不需要编写任何代码：http: [//malsup.com/jquery/form/](http://malsup.com/jquery/form/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T11:57:06.963

不确定这是否可能，但在我看来，就像其他所有 jquery post-without-refresh 一样 :) 将名称放在所需的字段中，而不仅仅是 id。然后通过 jquery 将所需数据发布到特定的 .php 页面，并在那里制作上传逻辑。对应将在您的 jquery 和 .php 页面之间，因此不会进行刷新。您可以使用 php 中的 $_POST 超级数组获取文本字段，以及使用 $_FILE 获取的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T11:57:58.240

这可以在不刷新的情况下使用uploadify上传，参考[http://www.uploadify.com/demos/](http://www.uploadify.com/demos/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-22T09:33:47.360

我最近添加了一个类似问题的答案。请看一下：

[使用jquery上传图片](https://stackoverflow.com/questions/29791355/upload-image-using-jquery/29792182#29792182)

它用于`$.ajax`上传文件。

# c++ - 如何在按钮顶部显示图像小部件

> ID：16104010
> 
> 赞同：1
> 
> 时间：2013-04-19T11:53:10.237
> 
> 标签：c++, gtkmm

```
 refBuilder->get_widget("image1", image);

    if(image){
        pButton1->set_image(*image);
        //Glib::PropertyProxy<bool> prop;
        Gtk::Settings::property_gtk_button_images() = true;
    } 
```

我知道最后一行写得不对，我不知道如何使用 PropertyProxy。我只想将属性设置为true。这可能无法解决我想要实现的目标，但它可能更接近一步。类参考没有指定如何正确使用它们。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T10:22:30.647

我不确定您在寻找什么，但如果您想在按钮上放置图像，那么这里是代码。基本上，您需要定义一个图像并将该图像设置为给定的按钮。

```
Gtk::Button *btn=Gtk::manage(new Gtk::Button("DummyButton"));    
Gtk::Image  *ImageIcon=Gtk::manage(new Gtk::Image(Gtk::IconTheme::get_default()->load_icon("ButtonImage",128)));
btn->set_image(*ImageIcon);
btn->set_image_position(Gtk::POS_TOP); 
```

# ruby-on-rails - Rails Paperclip 图像未在生产中显示

> ID：16104011
> 
> 赞同：0
> 
> 时间：2013-04-19T11:53:12.767
> 
> 标签：ruby-on-rails, ruby-on-rails-3, paperclip

我用回形针附加的图像在开发环境中显示正常，但在生产环境中显示损坏，我检查了图像的 url 在两者中是相同的：

```
<img alt="Badminton" class="img-rounded" src="/system/sports/images/000/000/012/small/badminton.jpg?1365944689" /> 
```

我正在使用 Paperclip 3.0.4 并在开发中使用 SQLite，在生产中使用 PostgreSQL，我做错了什么？

好的，我再次检查过，开发中的图像与生产中的图像的 url 不同。在开发中，我的形象是：

```
src="/system/sports/images/000/000/012/small/badminton.jpg?1365944689" 
```

在生产中是：

```
src="/system/sports/images/000/000/012/small/badminton.jpg?1366328860" 
```

在生产中，如果我尝试使用开发 url 访问图像，它会正确显示。

这里发生了什么？为什么将图像 url 末尾的数字从开发更改为生产？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:24:03.750

你得到相同的网址！最后的那个数字不是图像路径的一部分，它用于缓存......忽略它（关于这个问题）。

您的生产 url 正在您的系统上寻找图像。那不可能。

你的主人是谁？许多主机（包括 Heroku，如果您正在使用的话）不提供上传图片资源的功能。您必须使用单独的服务，例如 Amazon S3 存储。它既简单又便宜。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-23T20:11:36.777

我在使用 Rails 4.2.4 时遇到了同样的问题。默认情况下，Rails 不会读取*public*文件夹。此信息出现在 上`config/environments/production.rb`。因为 Apache 或 NGINX 已经处理了这个。

为了解决这个问题，你可以改变那条线`config.serve_static_files = ENV['RAILS_SERVE_STATIC_FILES'].present?`，到

`config.serve_static_files = true`. 如果您使用的是以前的版本 rails ，它可能会写成`config.serve_static_assets = true`

# iphone - UITableView 中的可重用单元格

> ID：16104013
> 
> 赞同：1
> 
> 时间：2013-04-19T11:53:16.653
> 
> 标签：iphone, ios, uitableview, reuseidentifier

我正在使用一个`UITableView`和一个自定义单元格`checkbox`。我有超过 1 个部分。当在第一部分中检查一个复选框时，例如，ROW = 0和部分= 0的单元格时，我保存数据并起作用。但也检查了 row = 0 和 section = 1 中的单元格！我怎样才能使这些部分之间有所不同？

太感谢了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:59:19.940

以下示例代码将帮助您解决您的情况。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    CustomCell *cell = (CustomCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
       cell = (CustomCell *) [[[NSBundle mainBundle] loadNibNamed:@"CustomCell" owner:self options:nil] objectAtIndex:0];
       cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }
    cell.checkBox = [self fillCheckBoxStatus:indexPath];//This method will say about check box whether going to SET or NOTSET. 
    //...
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-19T11:57:44.013

习惯`dequeueReusableCellWithIdentifier`喜欢`nil`下面...

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:nil];
    if (cell == nil) {

    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:nil] autorelease];
      ////you another code..
   }
  return cell;
} 
```

# javascript - setInterval() 如何影响性能？

> ID：16104014
> 
> 赞同：2
> 
> 时间：2013-04-19T11:53:17.620
> 
> 标签：javascript, jquery, performance, web-applications

我们正在使用 Twitter Bootstrap 作为框架构建一个 Web 应用程序，并且在显示/隐藏工具提示时遇到了问题。除了试图找到实际问题的解决方案之外，我还有一个关于我们同时使用的解决方法的问题：

性能方面，使用 setInterval() 通常是个坏主意吗？

我如何衡量由此造成的性能影响？

有没有更好的方法来不断检查元素的存在并删除它们？

```
// temporary workaround to remove unclosed tooltips
setInterval(function() {
    if ( $('.tooltip.in').length > 1 ) {
        $('.tooltip').remove();
    }
}, 1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:27:49.893

如果您真的*非常*担心性能，使用实时节点列表可能会更快：

```
var tooltipInNodes = document.getElementsByClassName("tooltip in");
var tooltipNodes = document.getElementsByClassName("tooltip");

setInterval(function() {
    if ( tooltipInNodes.length > 1 ) {
        $(tooltipNodes).remove();
    }
}, 1000); 
```

不过，这不太可能有太大的不同，正如已经提到的，使用长间隔的 setInterval（一秒大，4ms 小）不太可能产生任何重大影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:03:54.103

最好避免这种技术，但在找到真正的解决方案之前，您可以优化此解决方法。

创建一个非匿名函数并调用它，您将避免每秒“创建上下文函数”。

您还可以通过缓存和指定标签名称来优化 jQuery 选择器。

```
setInterval(tmp_workaround, 1000);

function tmp_workaround() {
  var $selectors = $('[TAG IF ALWAYS THE SAME].tooltip.in');

  if ( $selectors.length > 1 ) {
    $selectors.remove();
  }
} 
```

# sql - Oracle SQL Group 按自制列？

> ID：16104018
> 
> 赞同：0
> 
> 时间：2013-04-19T11:53:23.120
> 
> 标签：sql, oracle, group-by

我有这个声明：

```
SELECT CASE
          WHEN teile LIKE 'S%' THEN
           'vent'
          ELSE
           teile
       END AS teile,
       SUM(amount) 
.
 GROUP BY bereich, teile 
```

结果是这样的

```
D1    10070
ER    6278
MO    6278
vent  20140
vent  20140
vent  20140 
```

现在我想总结每个“发泄”的数量，并再次将其分组到“发泄”，如下所示：

```
D1   10070     
ER   6278     
MO   6278
vent 60420 
```

用不同的东西试了好几次，但我就是不明白..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T12:32:30.930

另外的另一种方式：

```
SELECT teile, SUM(amount) AS total_amt FROM
(
 SELECT (CASE WHEN teile LIKE 'S%' THEN 'vent' ELSE teile END) AS teile
       , amount 
FROM your_table
)
GROUP BY teile
/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T11:58:01.390

将子句中的`CASE`表达式`SELECT`放在您的`GROUP BY`子句中：

```
SELECT CASE
          WHEN teile LIKE 'S%' THEN
           'vent'
          ELSE
           teile
       END AS teile,
       SUM(amount) 
...
 GROUP BY 
       CASE
          WHEN teile LIKE 'S%' THEN
           'vent'
          ELSE
           teile
       END; 
```

# mysql - 在 MySQL 中保存排名

> ID：16104025
> 
> 赞同：0
> 
> 时间：2013-04-19T11:53:45.520
> 
> 标签：mysql, sql, ranking

我计划每天计算一次区域和全球排名。会有多个排名，每个排名都基于评级或统计数据。

保存这些玩家排名的最佳方法是什么？为每个单独的统计数据创建一个表格，每行包含 playerID、区域排名和全球排名，还是创建一个包含很多列的单个排名表会更好吗？第二个选项将导致某些行具有空列，因为玩家可能没有该特定统计数据。

此外，保存每日排名以创建显示玩家进度的图表的最有效方法是什么？如果我决定不创建图表，我将在创建新表之前删除表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:35:09.700

或者，您可以创建两个表： 1- Ranking table (player_id,date,rank_id,rank) 2- Ranking_type (rank_id,description)

与上一个答案基本相同，但您可以添加或删除排名类型而无需更改排名表，这取决于您的应用程序的动态程度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:33:20.127

问题集中在如何使用数据和性能要求上。

如果您遇到几乎所有玩家都拥有几乎所有统计数据的情况，并且您的应用程序同时使用所有统计数据，那么从性能角度来看，这是不费吹灰之力的。您希望将它们存储在一个表中，这样您就不会产生每个统计数据的额外“playerid”开销，以及将数据组合在一起所需的连接。

在另一个极端，如果大多数统计信息都是空的，并且应用程序一次只使用一个统计信息，那么带有“playerid”、“statid”、“value”的单个表是一个好方法。

第二种方法是实体属性值 (EAV) 模型的示例，当您需要添加新的统计数据时也非常有用。但是，您希望每天重新创建一次所有值，并且没有提及历史要求。在您的情况下，这种好处并不明显。

您将单独的值存储在单独的表中的选项可能不是最好的方法，特别是如果所有统计数据都具有相同的表示（即一个数字）。增殖表通常是一个坏主意。一个例外与访问控制有关。如果您对每个统计数据都有单独的安全要求，那么将它们存储在单独的表中可能会使安全性更容易实现。

根据你所说的，我会采用去特征化的、每名球员一排、有很多统计数据的方法。你可能想看看球员长什么样，数据就在那里，没有额外的处理，除非你有很多很多的球员或很多很多的统计数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:00:51.077

只需在 playerId 和 date 上创建一个具有主键的表，并为每个统计数据添加一列。然后，您可以轻松分析该表上的任何内容。

# jquery - 响应式灯箱库不在屏幕中央

> ID：16104028
> 
> 赞同：0
> 
> 时间：2013-04-19T11:53:48.063
> 
> 标签：jquery, css, lightbox

我正在尝试在我的网站上实现[flare](http://pixelentity.com/previews/components/flare/)（构建它）。

加载画廊时，实现代码似乎很好，但问题是它们没有在屏幕上居中。

我检查了 Lightbox 中图像的 css 值，我可以看到 translate3d 值是错误的，但我无法找出原因。

```
<img class="singleImage fill" src="http://chiquititos.co.il/wp-content/uploads/house_size1.png" 
 style="-webkit-transform-origin: 0px 0px; -webkit-transform: translate3d(262px, 276px, 0px) scale(1); "> 
```

这是页面（建设中）[网站](http://chiquititos.co.il/?product=kitchen)的链接。

知道这可能是什么原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T18:53:46.590

尝试在您的 CSS 中添加这一行：

```
.singleImage {display:block !important; margin:0 auto !important;} 
```

# oop - 设计系统、流程图或 UML 的最佳方式是什么？

> ID：16104029
> 
> 赞同：1
> 
> 时间：2013-04-19T11:53:48.373
> 
> 标签：oop, uml, system, flowchart

我被分配了一项任务来设计一个系统，他们更喜欢流程图。但从我的研究来看，最好使用 UML 概念进行设计。现在我有点困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:55:46.830

首先使用**用例**图，然后是**序列**图。他们很容易开始。

# google-cloud-storage - 谷歌云存储：应用平台

> ID：16104030
> 
> 赞同：1
> 
> 时间：2013-04-19T11:53:51.407
> 
> 标签：google-cloud-storage

我们计划在谷歌云存储上托管我们的应用程序，我只是想确认我可以在谷歌的基础设施上托管什么样的应用程序。我们有大约 40-45 个应用程序，包括 .net、SAP、filenet 系统等。我可以将它们托管在 Google Cloud Storage 上吗？

我研究过使用 RESTful API 部署应用程序的工作，但其他平台应用程序怎么样。

谢谢， 维尼特

# sql - 可以将表的单个列分组并连接到 SQL Server 中的单个单元格中吗？

> ID：16104035
> 
> 赞同：2
> 
> 时间：2013-04-19T11:54:13.283
> 
> 标签：sql, sql-server

我正在加入 SQL Server 中的许多表，并且我需要返回所有可能的经理的电子邮件地址以获取设施。可能的经理由设施所在的国家/地区决定。

理想情况下，我只想为每个设施返回一行，并将所有经理的电子邮件地址放在一个单元格中，用分号分隔。

我已经尝试过 Pivot 和 COALESCE 但我无法产生预期的结果，有谁知道如何做到这一点？还是我以完全错误的方式解决这个问题？

表

```
CREATE TABLE Facility(  
    [FacilityId] [int] NOT NULL,
    [Address] [varchar](256)
    [CountryCode] [char](2) NOT NULL,
)

CREATE TABLE ManagementDivision(    
    [ManagementDivisionId] [int] NOT NULL,
    [Name] [varchar](256)
    [CountryCode] [char](2) NOT NULL,
)

CREATE TABLE Manager(
    [ManagerID] [numeric](8, 0) NULL,
    [ManagementDivisionId] [int] NOT NULL
)

CREATE TABLE Employee(
    [EmployeeId] [numeric](8, 0) NOT NULL,
    [mail] [varchar](1000) NULL
) 
```

示例数据

```
insert into Facility (FacilityId, Address, CountryCode) values(1, '123 Fake St' 'US')
insert into Facility (FacilityId, Address, CountryCode) values(2, '789 Forgery Rd' 'US')
insert into Facility (FacilityId, Address, CountryCode) values(3, '567 Bogus Bld' 'AU')

insert into ManagementDivision (ManagementDivisionId, Name, CountryCode) values(1, 'East Coast USA' 'US')
insert into ManagementDivision (ManagementDivisionId, Name, CountryCode) values(2, 'West Coast USA' 'US')
insert into ManagementDivision (ManagementDivisionId, Name, CountryCode) values(3, 'Central USA' 'US')
insert into ManagementDivision (ManagementDivisionId, Name, CountryCode) values(4, 'Australia' 'AU')

insert into Manager (ManagerId, ManagementDivisionId) values(1, 1)
insert into Manager (ManagerId, ManagementDivisionId) values(1, 2)
insert into Manager (ManagerId, ManagementDivisionId) values(2, 3)
insert into Manager (ManagerId, ManagementDivisionId) values(3, 4)

insert into Employee (EmployeeId, mail) values(1, 'manager1@somedomain.com')
insert into Employee (EmployeeId, mail) values(2, 'manager2@somedomain.com')
insert into Employee (EmployeeId, mail) values(3, 'manager3@somedomain.com') 
```

期望的结果

```
FacilityId  Address         CountryCode ManagerEmail
1           123 Fake St     US          manager1@somedomain.com; manager2@somedomain.com;
2           789 Forgery Rd  US          manager1@somedomain.com; manager2@somedomain.com;
3           567 Bogus Bld   AU          manager3@somedomain.com; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T11:57:21.120

此操作在 MySQL 中称为 group_concat。这是关于如何在 SQL Server 中执行此操作的 SO 项目。

[在 Microsoft SQL Server 2005 中模拟 group_concat MySQL 函数？](https://stackoverflow.com/questions/451415/simulating-group-concat-mysql-function-in-microsoft-sql-server-2005)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:19:45.290

你可以使用**[东西](http://msdn.microsoft.com/en-in/library/ms188043(v=sql.100).aspx)**

```
select 
F.FacilityId,
F.[Address],
F.CountryCode,
STUFF(
(SELECT Distinct ', '+E.mail
from Facility F1
inner join ManagementDivision MD on F1.CountryCode=MD.CountryCode
inner join Manager M on MD.ManagementDivisionId=M.ManagementDivisionId
INNER JOIN Employee E ON M.ManagerID=E.EmployeeId
WHERE F1.Address=F.Address
AND F1.CountryCode=F.CountryCode
AND F1.FacilityId=F.FacilityId
FOR XML PATH (''))
  ,1,2,'') AS Email
from Facility F 
```

![在此处输入图像描述](https://i.stack.imgur.com/l9K03.png)

**[SQL小提琴](http://www.sqlfiddle.com/#!3/5d8157/1)**

# android - 如何在运行时在 TextView 中组合文本和图像

> ID：16104038
> 
> 赞同：0
> 
> 时间：2013-04-19T11:54:18.147
> 
> 标签：android, android-imageview, textview, spannablestring

目前我有一个应用程序，它在 和 的帮助下显示文本`TextView`页面。`ViewPager``Fragments`

是否可以在运行时执行的文本视图中包含带有文本的图像？

我最初的想法是使用`SpannableString`and `ImageSpan`，但是如果图像大于一行文本，其余的文本会环绕它还是越过它？

可以`ImageView`在运行时创建一个特定位置并且文本环绕它吗？

任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:08:42.420

我确实可以在 textview 中显示图像

```
public static Spannable getSmiledText(Context context, String text) {
    SpannableStringBuilder builder = new SpannableStringBuilder(text);
    int index;
    for (index = 0; index < builder.length(); index++) {
        for (Entry<String, Integer> entry : emoticons.entrySet()) {
            int length = entry.getKey().length();
            if (index + length > builder.length())
                continue;
            if (builder.subSequence(index, index + length).toString().equals(entry.getKey())) {
                builder.setSpan(new ImageSpan(context, entry.getValue()), index, index + length,
                        Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                index += length - 1;
                break;
            }
        }
    }
    return builder;
}

public static final HashMap<String, Integer> emoticons = new HashMap<String, Integer>();
static {
    // emoticons.put("cup:", R.drawable.cup);
    emoticons.put("glass", R.drawable.glasses);
    emoticons.put("bike", R.drawable.bike);
    emoticons.put("bottle", R.drawable.bottle);

} 
```

然后将文本设置为

```
textView.setText(getSmiledText(context,"I love to ride bike with glass.")); 
```

它直接在TextView上设置自行车（R.drawable.bike）和眼镜（R.drawable.glasses）的图像

# android - 如何在 youtube 播放器的列表视图中显示视频？

> ID：16104041
> 
> 赞同：1
> 
> 时间：2013-04-19T11:54:29.443
> 
> 标签：android, android-listview, youtube-api

我是安卓新手。。

我正在使用 youtube 播放器来显示视频。我已将视频存储在数据库中并检索所有视频并保存在数组字符串中。在我的阵列中，第一个视频链接工作正常。但是我想在播放器的列表视图中显示我的视频数组，建议视频将在播放器中我需要显示我的视频数组的地方出现。

如何实施？任何帮助我。提前非常感谢..

代码..

> ```
>  vid=new ArrayList<String>(new ArrayList<String>(vid));
>     videoUrl=parsing.parse(videoUrl);
>     runOnUiThread(new Runnable() {
>     public void run() {
>     startActivity(new Intent(Intent.ACTION_VIEW,Uri.parse("url"+videoUrl)));
>     }
>      }); 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T11:58:16.350

用于`VideoView`显示来自 url 的视频

像这样 [http://www.coderzheaven.com/2010/09/19/play-video-using-videoview-in-android/](http://www.coderzheaven.com/2010/09/19/play-video-using-videoview-in-android/)

并编写一个`custom adapter`自定义 UI`ListView`

# facebook-graph-api - 如何将 Facebook 的发送对话框限制为仅一位收件人？

> ID：16104045
> 
> 赞同：0
> 
> 时间：2013-04-19T11:54:38.133
> 
> 标签：facebook-graph-api, facebook-javascript-sdk

> 各位专家，

我创建了一个用于向用户朋友的收件箱发送私人消息的 fb 应用程序。我们希望用户能够通过我们的网站向他们的朋友发送消息，但一次只能发送给一个收件人（他们将从列表中选择他们的朋友该站点，我们将在该站点上预先填充消息）。

但是当对话框出现在用户端时，用户可以编辑和添加多个收件人。我需要限制用户在对话框上添加和编辑。有没有办法做到这一点，请给我一个建议。

这是 ss [http://screencast.com/t/wvbPe06zAi](http://screencast.com/t/wvbPe06zAi)

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:46:59.497

我在下面的示例中使用了此页面[Mutli Friend Selector](https://developers.facebook.com/docs/howtos/multi-friend-selector/)中的代码，但我将复选框输入替换为 Radio 输入以将选择限制为一个朋友。

您可以构建一个简单的 UI（Java 脚本）以允许用户使用如下单选按钮选择他的一个朋友：

```
function renderMFS() {
FB.api('/me/friends', function(response) {
var container = document.getElementById('mfs');
var mfsForm = document.createElement('form');
mfsForm.id = 'mfsForm';

for(var i = 0; i < Math.min(response.data.length, 10); i++) {
 var friendItem = document.createElement('div');
 friendItem.id = 'friend_' + response.data[i].id;
 friendItem.innerHTML = '<input type="radio" name="friends" value="'
   + response.data[i].id
   + '" />' + response.data[i].name;
   mfsForm.appendChild(friendItem);
 }
 container.appendChild(mfsForm);

 // Create a button to send the Request(s)
 var sendButton = document.createElement('input');
 sendButton.type = 'button';
 sendButton.value = 'Send Request';
 sendButton.onclick = sendRequest;
 mfsForm.appendChild(sendButton);
});
} 
```

选择朋友后，用户将单击上面脚本生成的发送按钮。单击发送按钮后，将执行下面的函数。

```
function sendRequest() {
// Get the list of selected friends
var sendUIDs = '';
var mfsForm = document.getElementById('mfsForm');
 for(var i = 0; i < mfsForm.friends.length; i++) {
   if(mfsForm.friends[i].checked) {
     sendUIDs += mfsForm.friends[i].value + ',';
   }
 }

FB.ui({method: 'send',
 to: sendUIDs,
 name: 'My Great Invite',
 message: 'Check out this!!!',
}, callback);
}

function callback(response) {
console.log(response);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:08:57.603

使用该`send`对话框，您将无法限制收件人用户。

强制限制只有一个用户的唯一另一种方法是将消息发布到他们的提要。您一次只能发布到一个用户的供稿。然而，这不是私人的，只是发布在他们的个人资料上。

为此，您需要`to`在启动`FB.ui()`对话时指定一个参数。这是一个简单的例子：

```
var obj = {
  method: 'feed',
  link: 'https://your.cool.site.com',
  picture: 'http://your.cool.site.com/foo.jpg',
  name: 'My Cool Site',
  to: USER_FBID
};
FB.ui(obj); 
```

# c++ - 从函数返回任意类型

> ID：16104051
> 
> 赞同：0
> 
> 时间：2013-04-19T11:54:58.503
> 
> 标签：c++, templates, boost, boost-fusion, boost-mpi

我想从函数返回任意类型。返回类型动态地取决于多态函数调用。例如，以下从具有不同列数的 CSV 文件中读取值，

```
struct File 
{
    virtual SOMETHING getTuple();
};

struct File1 : File
{
    SOMETHING getTuple()
    {   
        return std::tuple<int, double, string>();
    }    
};

struct File2 : File
{
    SOMETHING getTuple()
    {   
        return std::tuple<string, string>();
    }    
};

int main() 
{
    std::ifstream fs("file.csv");
      File2 f;
    BOOST_AUTO(tuple, f.getTuple())
    BOOST_AUTO(row, read(fs,tuple));
    BOOST_FOREACH(BOOST_TYPEOF(tuple) element , row )
    {
        for_each(element,print());
        std::cout << std::endl;
    }
}; 
```

我如何编写`getTuple()`签名以根据调用的对象返回不同的类型？

## 解决方案：

```
class File1
{
    std::ifstream ifs;
public:
    typedef boost::fusion::vector<int, double, std::string> tuple; 
    File1() : ifs("file1.csv") {}

    std::ifstream& getfs()
    {
        return ifs;
    }
};

class File2
{
    std::ifstream ifs;
public:
    typedef boost::fusion::vector<std::string, std::string> tuple; 
    File2() : ifs("file2.csv") {}

    std::ifstream& getfs()
    {
        return ifs;
    }
};

int main()
{
    File2 f;
    typedef File2::tuple tuple;

    BOOST_AUTO(x, read(f.getfs(),tuple()));
    BOOST_FOREACH(tuple e , x )
    {
        for_each(e,print());
        std::cout << std::endl;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:03:35.747

你无法做到这一点。函数签名需要在编译时确定，因此它不能依赖于对象的动态类型。

您可以做的最接近的是将[CRTP](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern "奇怪重复的模板模式")用于静态多态性。也就是说，执行以下操作：

```
template<class Derived>
struct FileBase 
{
    typename Derived::TupleType getTuple()
    {
        return typename Derived::TupleType();
    }
};

struct File1 : FileBase<File1>
{
   typedef std::tuple<int, double, string> TupleType;
};

struct File2 : FileBase<File2>
{
    typedef std::tuple<string, string>() TupleType; 
}; 
```

这将给出您在给定示例中想要的行为，但它不会通过运行时多态性工作。

# xml - XSLT 编码问题

> ID：16104055
> 
> 赞同：0
> 
> 时间：2013-04-19T11:55:17.683
> 
> 标签：xml, xslt, encoding, utf-8, saxon

我有以下 XML：

```
<item>
    <description><![CDATA[Euro sign: €]]></description>
</item> 
```

当我针对这个 XSL 运行它时：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:xdt="http://www.w3.org/2005/xpath-datatypes">

    <xsl:output method="xml" name="xml" version="1.0" encoding="UTF-8" indent="yes" omit-xml-declaration="yes" />

    <xsl:template match="item">
        <xsl:result-document href="test.xml" format="xml">        
            <feed>
                <xsl:value-of select="description" />
            </feed>
        </xsl:result-document>
    </xsl:template>
</xsl:stylesheet> 
```

“test.xml”等于：

```
<feed>
    <description>Euro sign: €&lt;/description>
</feed> 
```

这是完美的。但是，当`<xsl:result-document>`删除时，如下所示：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:fo="http://www.w3.org/1999/XSL/Format" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:xdt="http://www.w3.org/2005/xpath-datatypes">

    <xsl:output method="xml" name="xml" version="1.0" encoding="UTF-8" indent="yes" omit-xml-declaration="yes" />

    <xsl:template match="item">
        <feed>
            <xsl:value-of select="description" />
        </feed>
    </xsl:template>     
</xsl:stylesheet> 
```

输出等于：

```
<feed>
    <description>Euro sign: â‚¬&lt;/description>
</feed> 
```

这是不正确的，因为欧元符号似乎已被转义。

使用普通输出时，有什么方法可以保持欧元符号不变？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T09:09:46.640

我们在 Eclipse 的控制台窗口中显示数据，该窗口不是为 UTF-8 设置的。一旦我们将控制台的设置更改为以 UTF-8 输出，输出就被修复了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T12:16:36.737

尝试从 xsl:output 元素中删除 name 属性：

```
<xsl:output method="xml" version="1.0" encoding="UTF-8"
        indent="yes" omit-xml-declaration="yes" /> 
```

通过使其成为未命名的 xsl:output 元素，它应该适用于当前运行。

# java - 使用特殊字符 XML 解析

> ID：16104056
> 
> 赞同：1
> 
> 时间：2013-04-19T11:55:30.170
> 
> 标签：java, android, xml, xml-parsing, special-characters

我在获取我的提要 xml 时遇到了问题。问题是当标签不包含像“内容”这样的特殊字符时，我没有问题。但是当我的标签中有“:”时，比如“d:content”，我的解析器就不起作用了。

我的问题是：我该怎么做才能让它发挥作用？

我发现那个链接：[android sax not parsing "dc:creator"?](https://stackoverflow.com/questions/7755859/android-sax-not-parsing-dccreator) 这是一个类似的问题，但我不太了解文档

谢谢

[我的 xml 的网址](http://wcf.tourinsoft.com/Syndication/cdt43/69e53dfc-1433-4a15-ba1a-38a3d838c3d2/Objects?$top=2)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:01:23.950

它是一个 XML 命名空间。您的解析器可能抱怨它不知道 'd:' 映射到什么。如果您不关心的话，您还可以告诉您的 XML 解析器忽略名称空间。如果我的建议对您不起作用，您能否发布您的完整 XML 以使事情更加清晰？

# c++ - noexcept 会提高性能吗？

> ID：16104057
> 
> 赞同：34
> 
> 时间：2013-04-19T11:55:32.447
> 
> 标签：c++, boost, c++11

函数说明符是否`noexcept`旨在提高性能，因为生成的对象中可能没有记录异常的代码，因此应尽可能将其添加到函数声明和定义中？我首先想到的是可调用对象的包装器`noexcept`，尽管检查表达式可能会使源代码“膨胀”，但它可能会产生一些影响。这值得吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-19T16:43:48.400

从理论上讲，`noexcept`会提高性能。但另一方面，它也可能会导致一些问题。

在大多数情况下，**不应指定它，**因为专业人士太少而无法考虑，并且可能会使您的代码升级变得痛苦。[这篇](http://akrzemi1.wordpress.com/2011/06/10/using-noexcept/)由 Andrzej 撰写的帖子详细介绍了原因。

如果它太长，只需接受我从中得出的这些建议：

1.  `noexcept`用if 注释函数
    *   他们已经注释了`throw()`，
    *   或者他们是很好的候选人（在帖子中列出）并且永远不会确定，
    *   或者它们是移动构造函数，移动赋值，其`noexcept`注释不能被编译器正确推断，它们的实例应该被放入一些 STL 容器中。
2.  不要用`noexcept`if 注释函数
    *   你真的很担心性能下降，
    *   或关于打电话的风险`std::terminate`，
    *   或者您只是不确定新功能，
    *   或者你怀疑你是否应该做你的功能`noexcept`。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-19T12:45:55.847

顶级编译器生成已经优化的代码，就像不能抛出的代码一样，然后发生异常的情况由异常处理机制通过查看有关功能。不过，我认为在已知不需要时省略它对代码大小有一些好处。

在某些情况下， nothrow 规范确实允许进行一些特定的优化：

```
int main() {
    int i = 0;
    try {
        ++i;
        thing_that_cannot_throw();
        ++i;
        thing_that_can_throw();
        ++i;
    } catch (...) {}
    std::cout << i << "\n";
} 
```

这里第二个 ++i 理论上可以在调用之前重新排序`thing_that_cannot_throw`（并且`i`刚刚初始化为`2`）。但是，是否在实践中是另一回事，因为保证调试器中或函数调用上方堆栈中变量状态的实现会希望在该调用期间`i`具有值`1`，即使它是不可观察的局部变量通过任何*标准*方式。

我怀疑 nothrow 保证对程序员比对编译器更有价值。如果您正在编写提供强异常保证的代码，那么您通常会执行某些关键操作，您需要提供 nothrow 保证（交换、移动和析构函数是常见的候选者）。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2020-12-17T18:52:09.267

我偶然发现了一个“真实世界”的例子，其中 noexcept 有所作为。我想在这里分享它，因为它可能有助于其他人形成意见。

首先是一点背景知识：标准库容器试图做到“异常安全”。这意味着在引发（并捕获）异常后，它们会为您提供有关容器状态的某些保证。一个很好的例子是 std::vector::emplace_back。如果由于某种原因插入失败， emplace_back 保证向量看起来没有改变。请参阅 上的[cppreference](https://en.cppreference.com/w/cpp/container/vector/emplace)`emplace_back`。然而，当向量需要重新定位以响应 emplace 时，这会变得很有趣。重新定位预先存在的向量项的（希望）最快的方法是将`move`它们转移到新的扩大缓冲区。不幸的是，`move`-construction 可能引发异常，所以如果值类型的`move`-ctor 不是异常安全的，`emplace_back`需要求助于复制操作。但是，由于可以在编译时探测一个类型的[move-noexept'ness](https://en.cppreference.com/w/cpp/types/is_move_constructible)`std::vector` ，如果证明是合法的，那么仍然会采用更快的方法。

我将以下谷歌基准放在一起在本地进行测量：

```
#include "benchmark/benchmark.h"

#include <vector>

// This type really benefits from being moved instead of being copied
struct SlowCopy {
  SlowCopy(const size_t theSize) {
    for (int i = 0; i < theSize; ++i)
      itsData.emplace_back(i);
  }
  SlowCopy(const SlowCopy &) = default;
  SlowCopy(SlowCopy &&) noexcept = default;

  std::vector<int> itsData;
};

// The template parameter specifies whether the move constructor is noexcept or not
template<bool YesNo>
struct MovableNoexcept {
  MovableNoexcept(const size_t theSize) : itsData{theSize} {}
  MovableNoexcept(const MovableNoexcept &) = default;
  MovableNoexcept(MovableNoexcept &&) noexcept(YesNo) = default;
  MovableNoexcept& operator=(const MovableNoexcept &)  = default;
  MovableNoexcept& operator=(MovableNoexcept &&) noexcept(false) = default;
  SlowCopy itsData;
};

// This benchmark takes 2 arguments:
// 1\. How many items do we push into a vector
// 2\. How big are the items that are in the vector
template<bool IsNoexcept>
static void BM_MoveRelocateNoexcept(benchmark::State& state) {
  std::vector<MovableNoexcept<IsNoexcept>> aExcepts;
  for (auto _ : state) {
    for (int i = 0; i < state.range(0); ++i)
      aExcepts.emplace_back(state.range(1));
    benchmark::ClobberMemory();
  }
}

// Test 1k elements @ 64*sizeof(int) kb
BENCHMARK_TEMPLATE(BM_MoveRelocateNoexcept, false)->Args({1000, 1 << 16})->Repetitions(20);
BENCHMARK_TEMPLATE(BM_MoveRelocateNoexcept, true)->Args({1000, 1 << 16})->Repetitions(20);

// Test 100 elements @ 512*sizeof(int) kb
BENCHMARK_TEMPLATE(BM_MoveRelocateNoexcept, false)->Args({100, 1 << 19})->Repetitions(20);
BENCHMARK_TEMPLATE(BM_MoveRelocateNoexcept, true)->Args({100, 1 << 19})->Repetitions(20);

// Run the benchmark
BENCHMARK_MAIN(); 
```

在我的本地系统上，我在运行基准测试时测量了以下结果：

```
Running ./noexcept_bench
Run on (8 X 4400 MHz CPU s)
CPU Caches:
  L1 Data 32 KiB (x4)
  L1 Instruction 32 KiB (x4)
  L2 Unified 256 KiB (x4)
  L3 Unified 8192 KiB (x1)
Load Average: 0.58, 0.70, 0.69
------------------------------------------------------------------------------------------------------
Benchmark                                                            Time             CPU   Iterations
------------------------------------------------------------------------------------------------------
BM_MoveRelocateNoexcept<false>/1000/65536/repeats:20_mean    157793886 ns    157556651 ns           20
BM_MoveRelocateNoexcept<false>/1000/65536/repeats:20_median  157752118 ns    157511285 ns           20
BM_MoveRelocateNoexcept<false>/1000/65536/repeats:20_stddev     294024 ns       292420 ns           20
BM_MoveRelocateNoexcept<true>/1000/65536/repeats:20_mean     119320642 ns    119235176 ns           20
BM_MoveRelocateNoexcept<true>/1000/65536/repeats:20_median   119256119 ns    119187012 ns           20
BM_MoveRelocateNoexcept<true>/1000/65536/repeats:20_stddev      190923 ns       180183 ns           20
BM_MoveRelocateNoexcept<false>/100/524288/repeats:20_mean    127031806 ns    126834505 ns           20
BM_MoveRelocateNoexcept<false>/100/524288/repeats:20_median  126939978 ns    126741072 ns           20
BM_MoveRelocateNoexcept<false>/100/524288/repeats:20_stddev     381682 ns       380187 ns           20
BM_MoveRelocateNoexcept<true>/100/524288/repeats:20_mean      95281309 ns     95175234 ns           20
BM_MoveRelocateNoexcept<true>/100/524288/repeats:20_median    95267762 ns     95152072 ns           20
BM_MoveRelocateNoexcept<true>/100/524288/repeats:20_stddev      176838 ns       176834 ns           20 
```

从这些结果来看，在两个基准测试中，可以使用 noexcept-move 的测试相对于它们的 non-noexcept-movable 对应物的**速度提高了约 1.3 。**

# c++ - 不确定我在使用 Dekkers 算法时做错了什么

> ID：16104060
> 
> 赞同：2
> 
> 时间：2013-04-19T11:55:39.303
> 
> 标签：c++, algorithm, multiprocessing

所以，我正在为家庭作业编写代码，必须使用 Dekkers 算法来实现互斥。

```
#include <signal.h>
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/shm.h>
#include <stdlib.h>
#include <unistd.h>
#include <iostream>
using namespace std;

int Id; /* Segment Id */
int *TURN;
int *FLAG_I;
int *FLAG_J;

void get_out_of_critical(int i)
{
   if(i=0){
      *TURN=1;
      *FLAG_I=0;
   }
   else{
      *TURN=0;
      *FLAG_J=0;
   }

}

void get_in_critical(int i)
{
   if(i=0){
      *FLAG_I=1;
      while(*FLAG_J!=0){
         if(*TURN==1){
            *FLAG_I = 0;
            while(*TURN==1){}
         *FLAG_I=1;
         }
      }
   }
   if(i=1){
   *FLAG_J=1;
   while (*FLAG_I!=0){
         if(*TURN==0){
            *FLAG_J = 0;
            while(*TURN==0){}
         *FLAG_J=1;
         }
      }
   }

}

void process(int i)
{
   for(int k=1;k<=5;k++){
       cout<<"Process - "<<i<<endl;
       get_in_critical(i);
       for(int m=1;m<=5;m++){
           cout<<"Process: "<<i+1<<", K.O. num: "<<k<<" ("<<m<<"/5)"<<endl;
      }
      get_out_of_critical(i);
   }
}

void del(int sig)
{
   /* free shared memory */
   (void) shmdt((char *) TURN);
   (void) shmdt((char *) FLAG_I);
   (void) shmdt((char *) FLAG_J);
   (void) shmctl(Id, IPC_RMID, NULL);
   exit(0);
}

int main()
{
   /* allocating shared memory */
   Id = shmget(IPC_PRIVATE, sizeof(int)*100, 0600);

   if (Id == -1)
      exit(1);

   TURN = (int *) shmat(Id, NULL, 0);
   *TURN = 0;
   FLAG_I = (int*) shmat(Id, NULL, 0);
   FLAG_J = (int*) shmat(Id, NULL, 0);
   *FLAG_I = 0;
   *FLAG_J = 0;
   sigset(SIGINT, del);// in case of signal interrupt, delete shared memory

   /* starting paralel processes */
   if (fork() == 0) {
      process(0);
      exit(0);
   }
   if (fork() == 0) {
      process(1);
      exit(0);
   }
   wait();
   wait();
   del(0);

   return 0;
} 
```

我做了这个，不知道为什么它不起作用。两个进程都启动了函数“进程”，但没有更进一步。知道我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:14:35.853

哦，天哪，我只花了 1-2 小时调试这个，发现我用`if(i=0)`的是`if(i==0)`..

# ios - 当视图改变时做一些事情

> ID：16104067
> 
> 赞同：1
> 
> 时间：2013-04-19T11:55:55.033
> 
> 标签：ios, objective-c, xcode, cocoa-touch

我正在开发一个带有选项卡视图控制器和两个互补视图的 iOS 应用程序。其中之一使用 CoreLocation API 来获取当前速度，因此，它使用大量电池。

我知道：

```
[locationManager stopUpdatingLocation]; 
```

我可以停止速度更新，但我想在用户更改视图时执行此操作。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:07:23.330

将此添加到您要更新位置的选项卡项的 ViewController

```
- (void)viewWillAppear:(BOOL)animated {    

    // Start location manager
    [locationManager startUpdatingLocation];

    [super viewWillAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated {

    // Stop location manager
    [locationManager stopUpdatingLocation];

    [super viewWillDisappear:animated];
} 
```

**当您的 ViewController 出现时，位置管理器会在消失时启动和停止。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:02:05.963

只需添加这个`[locationManager stopUpdatingLocation];`，当执行更改页面的操作时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:10:27.860

您需要实现`UITabbarController`. 然后你得到：

`- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController;`

你可以返回 YES 并停止 locationManager

* * *

```
- (void)applicationDidFinishLaunching:(UIApplication *)application
{
    tabBarController.delegate = self; //you need an iboutlet to get the tabbar
    [window addSubview:tabBarController.view];
}

- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController 
{
    if([viewController respondsToSelector:@selector(locationManager)])
        [[viewController locationManager] stopUpdatingLocation]; //your viewController needs to expose the locationManager as a property
    return YES;
} 
```

# c++ - 剪裁平面与几何相交处的曲面

> ID：16104068
> 
> 赞同：0
> 
> 时间：2013-04-19T11:55:56.880
> 
> 标签：c++, opengl, surface, geometry-shader

我有一个几何图形，我正在使用几何着色器与 vbo 结合显示。我还有两个剪裁平面，用于显示我想要的对象部分。

现在我想显示一个表面以覆盖由剪裁平面引起的几何图形中的开口（我使用几何着色器渲染一个空心封闭表面）。

我通过两次渲染几何图形来尝试使用模板缓冲区方法。但速度非常慢。

建议一种让它更快的方法。

# ios - UITableView 单元格模糊读取项

> ID：16104069
> 
> 赞同：3
> 
> 时间：2013-04-19T11:56:10.163
> 
> 标签：ios, objective-c, xcode, uitableview

我有一个我一直在研究的简单的 iOS 应用程序项目。表格视图显示从 Web 服务（rss 提要）获取的条目，并点击其中一个进入 Web 视图。

使用以下内容，我正在检查项目是否已被读取，如果是，则使用 setAccessoryType 打一个复选标记以指示该项目已被读取：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{

    ItemFeed *entry = [[channel items] objectAtIndex:[indexPath row]];

    [[MyFeedStore sharedStore] markItemAsRead:entry];
    [[[self tableView] cellForRowAtIndexPath:indexPath] setAccessoryType:UITableViewCellAccessoryCheckmark];

} 
```

上面的代码导致以下结果：

![在此处输入图像描述](https://i.stack.imgur.com/Xhj2G.png)

我想要的是模糊单元格以表明它已被读取。我将 TechCrunch iPhone 应用程序中的以下图片作为我想要的示例：

![在此处输入图像描述](https://i.stack.imgur.com/N8G18.png)

提前致谢。

**更新：** 我尝试更改 didSelectRowAtIndexPath 中的文本颜色，但没有成功：

```
ItemsViewCell *cell = (ItemsViewCell *)[tableView dequeueReusableCellWithIdentifier:@"ItemsCell"];
cell.titleLabel.textColor = [UIColor redColor]; //Red color is just for checking right now 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T12:33:30.463

尝试添加以下代码。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath  {
    ItemsViewCell *cell = (ItemsViewCell*)[tableView cellForRowAtIndexPath:indexPath];
    cell.titleLabel.textColor = [UIColor redColor]; //Red color is just for checking right now
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:09:24.387

看起来您需要将单元格中标签的 textColor 属性更改为类似于 Tech Crunch 应用程序的 textColor 的颜色。

# android - Wifi扫描应用程序不断崩溃而不显示主要活动

> ID：16104070
> 
> 赞同：0
> 
> 时间：2013-04-19T11:56:10.607
> 
> 标签：android, android-wifi

我正在编写一个应用程序来扫描可用的无线网络，但是，当我运行我的应用程序时，它甚至在显示主要活动之前就崩溃了。我也在寻找如何使用扫描结果，但我不确定我使用它的方式是否正确。我阅读了有关广播接收器的信息，但没有找到任何有关如何使用它的示例。这是我的代码，非常感谢任何帮助

```
package com.example.wizer2;

import java.util.List;

import android.net.wifi.ScanResult;
import android.net.wifi.WifiInfo;
import android.net.wifi.WifiManager;
import android.os.Bundle;
import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class Wizer extends Activity {

WifiManager Wifi;
BroadcastReceiver receiver;
List<ScanResult> results;

Button bt1; //Current status
TextView t1; //for current status result

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_wizer);

    //GUI

    bt1=(Button)findViewById(R.id.b1);
    t1=(TextView)findViewById(R.id.t1);

     // to enable wifi service
    Wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);

    bt1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {

            WifiInfo info = Wifi.getConnectionInfo();
            if (info.getBSSID()==null)
            {
                t1.setText("You are currently not connected to any wireless network.\n");
            }
            else
            {
                t1.append("Current Status:\n");
                t1.append("Network Name :"+info.getSSID().toString()+"\n");
                t1.append("RSSI :"+info.getRssi()+"\n");

            }

        }
    });
    Wifi.startScan();
    // Register Broadcast Receiver
    if (receiver == null)
        receiver = new BroadcastReceiver() {

            @Override
            public void onReceive(Context context, Intent intent) {
                results =Wifi.getScanResults();
//              Intent I1 =new Intent();

            }
        };
        registerReceiver(receiver, new IntentFilter( WifiManager.SCAN_RESULTS_AVAILABLE_ACTION));
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_wizer, menu);
    return true;
}
public void onStop() {
    unregisterReceiver(receiver);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:10:31.400

除了在清单文件中添加权限外，我只使用了您的代码而没有更改任何内容。它为我工作检查代码

```
public class MainActivity extends Activity {  WifiManager Wifi;
BroadcastReceiver receiver;
List<ScanResult> results; @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    //GUI
    bt1=(Button)findViewById(R.id.btn1);
    t1=(TextView)findViewById(R.id.txt1);
     // to enable wifi service
    Wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);
    bt1.setOnClickListener(new View.OnClickListener() {   public void onClick(View arg0) {
            WifiInfo info = Wifi.getConnectionInfo();
            if (info.getBSSID()==null)
            {
                t1.setText("You are currently not connected to any wireless network.\n");
            }
            else
            {
                t1.append("Current Status:\n");
                t1.append("Network Name :"+info.getSSID().toString()+"\n");
                t1.append("RSSI :"+info.getRssi()+"\n");

            }
        }
    });  Wifi.startScan();
    // Register Broadcast Receiver
    if (receiver == null)
        receiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                results =Wifi.getScanResults();
    //                Intent I1 =new Intent();
            }
        };
        registerReceiver(receiver, new IntentFilter( WifiManager.SCAN_RESULTS_AVAILABLE_ACTION));
}
/*@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_wizer, menu);
    return true;
}*/
public void onStop() {
    unregisterReceiver(receiver);
} } 
```

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>  <manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.textoverlay"
android:versionCode="1"
android:versionName="1.0" >  <uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE"/>
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >  <activity
        android:name="com.example.textoverlay.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>  </application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:25:37.830

确保您已添加

使用权限 android:name="android.permission.CHANGE_WIFI_STATE" 使用权限 android:name="android.permission.ACCESS_WIFI_STATE"

清单 xml 文件中的权限。

# javascript - 将数组附加到 FormData 并通过 AJAX 发送

> ID：16104078
> 
> 赞同：156
> 
> 时间：2013-04-19T11:56:54.470
> 
> 标签：javascript, ajax, arrays, form-data

我正在使用 ajax 提交包含数组、文本字段和文件的多部分表单。

我将每个 VAR 附加到主数据中

```
var attachments = document.getElementById('files'); 
var data= new FormData();

for (i=0; i< attachments.files.length; i++){
    data.append('file', attachments.files[i]);
    console.log(attachments.files[i]);

    data.append ('headline', headline);
    data.append ('article', article);
    data.append ('arr', arr);
    data.append ('tag', tag); 
```

然后我使用 ajax 函数将其发送到 PHP 文件以存储在 sql DB 中。

```
$.ajax({    
    type: "post",
    url: 'php/submittionform.php',
    cache: false,
    processData: false,
    contentType: false,
    data: data,
    success: function(request) {$('#box').html(request); }
}) 
```

但在 PHP 端，`arr`作为数组的变量显示为字符串。

当我不使用 ajax 将它作为表单数据发送但使用简单`$.POST`选项时，我确实将它作为 PHP 端的数组获取，但是我也无法发送文件。

任何解决方案？

* * *

## 回答 #1

> 赞同：334
> 
> 时间：2015-02-10T14:59:16.603

你也可以通过`FormData`这种方式发送一个数组：

```
var formData = new FormData;
var arr = ['this', 'is', 'an', 'array'];

for (var i = 0; i < arr.length; i++) {
  formData.append('arr[]', arr[i]);
}

console.log(...formData);
```

`arr[]`因此，您可以像使用简单的 HTML 表单一样编写代码。如果是 PHP，它应该可以工作。

您可能会发现这篇文章很有用：[如何在查询字符串中传递数组？](https://stackoverflow.com/questions/6243051/how-to-pass-an-array-within-a-query-string)

* * *

## 回答 #2

> 赞同：135
> 
> 时间：2013-04-19T11:59:51.100

你有几个选择：

## 将其转换为 JSON 字符串，然后在 PHP 中解析（推荐）

**JS**

```
var json_arr = JSON.stringify(arr); 
```

**PHP**

```
$arr = json_decode($_POST['arr']); 
```

* * *

### 或者使用[@Curios 的方法](https://stackoverflow.com/a/28434829/1062281)

通过 发送数组`FormData`。

* * *

## 不推荐：使用序列化数据，然后在 PHP 中反序列化

**JS**

```
// Use <#> or any other delimiter you want
var serial_arr = arr.join("<#>"); 
```

**PHP**

```
$arr = explode("<#>", $_POST['arr']); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-03-20T05:25:53.763

打字稿版本：

```
export class Utility {      
    public static convertModelToFormData(model: any, form: FormData = null, namespace = ''): FormData {
        let formData = form || new FormData();
        let formKey;

        for (let propertyName in model) {
            if (!model.hasOwnProperty(propertyName) || !model[propertyName]) continue;
            let formKey = namespace ? `${namespace}[${propertyName}]` : propertyName;
            if (model[propertyName] instanceof Date)
                formData.append(formKey, model[propertyName].toISOString());
            else if (model[propertyName] instanceof Array) {
                model[propertyName].forEach((element, index) => {
                    const tempFormKey = `${formKey}[${index}]`;
                    this.convertModelToFormData(element, formData, tempFormKey);
                });
            }
            else if (typeof model[propertyName] === 'object' && !(model[propertyName] instanceof File))
                this.convertModelToFormData(model[propertyName], formData, formKey);
            else
                formData.append(formKey, model[propertyName].toString());
        }
        return formData;
    }
} 
```

使用：

```
let formData = Utility.convertModelToFormData(model); 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-03-29T18:54:45.537

这是一个老问题，但我最近在发布对象和文件时遇到了这个问题。我需要能够发布一个对象，其子属性也是对象和数组。

下面的函数将遍历一个对象并创建正确的 formData 对象。

```
// formData - instance of FormData object
// data - object to post
function getFormData(formData, data, previousKey) {
  if (data instanceof Object) {
    Object.keys(data).forEach(key => {
      const value = data[key];
      if (value instanceof Object && !Array.isArray(value)) {
        return this.getFormData(formData, value, key);
      }
      if (previousKey) {
        key = `${previousKey}[${key}]`;
      }
      if (Array.isArray(value)) {
        value.forEach(val => {
          formData.append(`${key}[]`, val);
        });
      } else {
        formData.append(key, value);
      }
    });
  }
} 
```

这将转换以下 json -

```
{
  name: 'starwars',
  year: 1977,
  characters: {
    good: ['luke', 'leia'],
    bad: ['vader'],
  },
} 
```

进入以下FormData

```
 name, starwars
 year, 1977
 characters[good][], luke
 characters[good][], leia
 characters[bad][], vader 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-10-25T09:01:08.677

将所有类型输入添加到 FormData

```
const formData = new FormData();
for (let key in form) {
    Array.isArray(form[key])
        ? form[key].forEach(value => formData.append(key + '[]', value))
        : formData.append(key, form[key]) ;
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-09-11T03:23:18.480

这是另一个版本，`convertModelToFormData`因为我需要它也能够发送文件。

实用程序.js

```
const Utility = {
  convertModelToFormData(val, formData = new FormData, namespace = '') {
    if ((typeof val !== 'undefined') && val !== null) {
      if (val instanceof Date) {
        formData.append(namespace, val.toISOString());
      } else if (val instanceof Array) {
        for (let i = 0; i < val.length; i++) {
          this.convertModelToFormData(val[i], formData, namespace + '[' + i + ']');
        }
      } else if (typeof val === 'object' && !(val instanceof File)) {
        for (let propertyName in val) {
          if (val.hasOwnProperty(propertyName)) {
            this.convertModelToFormData(val[propertyName], formData, namespace ? `${namespace}[${propertyName}]` : propertyName);
          }
        }
      } else if (val instanceof File) {
        formData.append(namespace, val);
      } else {
        formData.append(namespace, val.toString());
      }
    }
    return formData;
  }
}
export default Utility; 
```

我的客户端代码.js

```
import Utility from './utility'
...
someFunction(form_object) {
  ...
  let formData = Utility.convertModelToFormData(form_object);
  ...
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-02-20T14:44:16.647

如果您有嵌套对象和数组，则填充 FormData 对象的最佳方法是使用递归。

```
function createFormData(formData, data, key) {
    if ( ( typeof data === 'object' && data !== null ) || Array.isArray(data) ) {
        for ( let i in data ) {
            if ( ( typeof data[i] === 'object' && data[i] !== null ) || Array.isArray(data[i]) ) {
                createFormData(formData, data[i], key + '[' + i + ']');
            } else {
                formData.append(key + '[' + i + ']', data[i]);
            }
        }
    } else {
        formData.append(key, data);
    }
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-07-21T01:47:31.130

基于@YackY 回答较短的递归版本：

```
function createFormData(formData, key, data) {
    if (data === Object(data) || Array.isArray(data)) {
        for (var i in data) {
            createFormData(formData, key + '[' + i + ']', data[i]);
        }
    } else {
        formData.append(key, data);
    }
} 
```

使用示例：

```
var data = {a: '1', b: 2, c: {d: '3'}};
var formData = new FormData();
createFormData(formData, 'data', data); 
```

发送数据：

```
data[a]=1&
data[b]=2&
data[c][d]=3 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-06-21T15:29:41.013

下一个版本适用于包含一系列简单值的模型：

```
function convertModelToFormData(val, formData = new FormData(), namespace = '') {
    if((typeof val !== 'undefined') && (val !== null)) {
        if(val instanceof Date) {
            formData.append(namespace, val.toISOString());
        } else if(val instanceof Array) {
            for(let element of val) {
                convertModelToFormData(element, formData, namespace + '[]');
            }
        } else if(typeof val === 'object' && !(val instanceof File)) {
            for (let propertyName in val) {
                if(val.hasOwnProperty(propertyName)) {
                    convertModelToFormData(val[propertyName], formData, namespace ? namespace + '[' + propertyName + ']' : propertyName);
                }
            }
        } else {
            formData.append(namespace, val.toString());
        }
    }
    return formData;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-01-13T18:30:30.837

**将三种格式的 Data 转换为 FormData**：

**1\. 单个值，如字符串、数字或布尔值**

```
 let sampleData = {
  activityName: "Hunting3",
  activityTypeID: 2,
  seasonAssociated: true, 
}; 
```

**2\. 数组是对象数组**

```
let sampleData = {
   activitySeason: [
    { clientId: 2000, seasonId: 57 },
    { clientId: 2000, seasonId: 57 },
  ],
}; 
```

**3\. 持有键值对的对象**

```
let sampleData = {
    preview: { title: "Amazing World", description: "Here is description" },
}; 
```

使我们的生活变得轻松的那些：

```
function transformInToFormObject(data) {
  let formData = new FormData();
  for (let key in data) {
    if (Array.isArray(data[key])) {
      data[key].forEach((obj, index) => {
        let keyList = Object.keys(obj);
        keyList.forEach((keyItem) => {
          let keyName = [key, "[", index, "]", ".", keyItem].join("");
          formData.append(keyName, obj[keyItem]);
        });
      });
    } else if (typeof data[key] === "object") { 
      for (let innerKey in data[key]) {
        formData.append(`${key}.${innerKey}`, data[key][innerKey]);
      }
    } else {
      formData.append(key, data[key]);
    }
  }
  return formData;
} 
```

**示例**：输入数据

```
let sampleData = {
  activityName: "Hunting3",
  activityTypeID: 2,
  seasonAssociated: true,
  activitySeason: [
    { clientId: 2000, seasonId: 57 },
    { clientId: 2000, seasonId: 57 },
  ],
  preview: { title: "Amazing World", description: "Here is description" },
}; 
```

**输出表格数据：**

```
activityName: Hunting3
activityTypeID: 2
seasonAssociated: true
activitySeason[0].clientId: 2000
activitySeason[0].seasonId: 57
activitySeason[1].clientId: 2000
activitySeason[1].seasonId: 57
preview.title: Amazing World
preview.description: Here is description 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-01-27T22:34:34.827

我已经修复了打字稿版本。对于 javascript，只需删除类型定义。

```
 _getFormDataKey(key0: any, key1: any): string {
    return !key0 ? key1 : `${key0}[${key1}]`;
  }
  _convertModelToFormData(model: any, key: string, frmData?: FormData): FormData {
    let formData = frmData || new FormData();

    if (!model) return formData;

    if (model instanceof Date) {
      formData.append(key, model.toISOString());
    } else if (model instanceof Array) {
      model.forEach((element: any, i: number) => {
        this._convertModelToFormData(element, this._getFormDataKey(key, i), formData);
      });
    } else if (typeof model === 'object' && !(model instanceof File)) {
      for (let propertyName in model) {
        if (!model.hasOwnProperty(propertyName) || !model[propertyName]) continue;
        this._convertModelToFormData(model[propertyName], this._getFormDataKey(key, propertyName), formData);
      }
    } else {
      formData.append(key, model);
    }

    return formData;
  } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-02-01T12:38:11.603

就我而言，我得到了

```
{
    "category": [
        "Incorrect type. Expected pk value, received str."
    ]
} 
```

错误所以

对于谁使用 React（前端）和 Django **DRF**（后端）：

```
 const category = [1,2,3,4,5]
formData.append("category", JSON.stringify(category)); 
```

```
import json
from .serializers import ArticleSerializer
from rest_framework.response import Response

class ArticleListCreateView(ListCreateAPIView):
    permission_classes = (
        IsSuperuserOrReadOnly,
        IsAutherOrReadOnly,
    )
    serializer_class = ArticleSerializer
    model = Article
    queryset = Article.objects.filter(article_honor='a', status='p')

    def create(self, request, *args, **kwargs):
        data = request.data
        article = Article('set all argumenst')

        image = request.data['image']
        # save image in local

        article.save()
        categorys = json.loads(data['category'])
        for catID in categorys:
            cat = Category.objects.get(id=catID)
            article.category.add(cat)

        article.save()

        return Response(ArticleSerializer(article).data) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-11-24T14:27:34.557

JavaScript 代码：

```
var formData = new FormData();
let arr = [1,2,3,4];
formData.append('arr', arr); 
```

php上的输出：

```
$arr = $_POST['arr']; ===>  '1,2,3,4' 
```

解决方案php代码：

```
$arr = explode(",", $_POST['arr']); ===> [1,2,3,4] 
```

# c# - 此代码不会在文本文件中写入任何内容？？C＃

> ID：16104088
> 
> 赞同：0
> 
> 时间：2013-04-19T11:57:19.690
> 
> 标签：c#, file

这是 "C:\grades" 的比赛：

```
Khaled
80
90
70
Ammar
100
99
100
Wael
43
56
79 
```

这是我使用的代码：

```
StreamReader sr = new StreamReader("C:\\grades.txt");
StreamWriter sw = new StreamWriter("C:\\ava.txt");
string line;
float sum=0;
float avg=0;

while ((line = sr.ReadLine()) != null)
{
    if ((line[0] >= 65 && line[0] <= 90) || (line[0] >= 97 && line[0] <= 122))
    {
        avg = sum / 3;
        if (avg != 0)
            sw.WriteLine(avg.ToString());
        sum = 0;
        avg = 0;
        sw.WriteLine(line);
    }
    else
    {
        sw.WriteLine(line);
        sum += float.Parse(line);
    }
} 
```

此代码是创建一个文本文件，如下所示：

```
Khaled
80
90
70
80
Ammar
100
99
100
99.66
Wael
43
56
79
59.33 
```

其中添加的数字是平均值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T11:58:51.570

您需要正确处理写入器，否则它不会刷新输出。

```
string line;
float sum=0;
float avg=0;

using(StreamReader sr = new StreamReader("C:\\grades.txt"))
using(StreamWriter sw = new StreamWriter("C:\\ava.txt"))
{
    while ((line = sr.ReadLine()) != null)
    {
        if ((line[0] >= 65 && line[0] <= 90) || (line[0] >= 97 && line[0] <= 122))
        {
            avg = sum / 3;
            if (avg != 0)
                sw.WriteLine(avg.ToString());
            sum = 0;
            avg = 0;
            sw.WriteLine(line);
        }
        else
        {
            sw.WriteLine(line);
            sum += float.Parse(line);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:17:01.970

也许这可以简化您的任务。它显示了如何将字符串解析为数字（我已经使用过`Decimal`），用于`Enumerable.Average`获取平均值并`Math.Round`对其进行舍入：

```
var userGrades = new Dictionary<string, List<decimal>>();
string currentUserName = null;
foreach (string line in File.ReadLines(sourcePath))
{ 
    decimal grade;
    if (decimal.TryParse(line.Trim(), out grade))
    {
        // line with a grade
        List<decimal> grades;
        userGrades.TryGetValue(currentUserName, out grades);
        if (grades != null) grades.Add(grade);
    }
    else
    {
        // line with the name
        currentUserName = line.Trim();
        if (!userGrades.ContainsKey(currentUserName))
            userGrades.Add(currentUserName, new List<decimal>());
    }
}

using (var writer = new StreamWriter(destPath))
{
    foreach (var ug in userGrades)
    {
        writer.WriteLine(ug.Key);
        foreach(decimal d in ug.Value)
            writer.WriteLine(d);
        decimal roundedAverage = Math.Round(ug.Value.Average(), 2);
        writer.WriteLine(roundedAverage);
    }
} 
```

请注意，`using`周围的`StreamWriter`确保它被关闭/处理也将它的输出刷新到文件中。我假设你错过了这个。

# jquery - 移动后如何重新添加我的ID“...”以拖放图像？

> ID：16104091
> 
> 赞同：0
> 
> 时间：2013-04-19T11:57:25.990
> 
> 标签：jquery, class, addclass

jQuery代码

```
function itemInSpot(drag_item,spot)
{
var oldSpotItem = $(spot).find('img');
if(oldSpotItem.length>100) {
    oldSpotItem.appendTo('#itembox4').draggable({ revert: 'invalid' });
}
var item = $('<img />');
item.attr('src',drag_item.attr('src')).attr('class',drag_item.attr('class')).appendTo(spot).draggable({ revert: 'invalid' });
drag_item.remove(); // remove the old object
}

 $(document).ready(function() {
$("img").draggable({ revert: 'invalid'});
$("img").addClass(classname,function(index,currentclass))
$("#itembox4").droppable()
$("#pricebox").droppable({ accept: '#price'});
$('#pricebox').droppable({ accept: '#price'});
$('#pricebox,#pricebox,#itembox4').bind('drop', function(ev,ui) {  itemInSpot(ui.draggable,this); });
 $('#itembox4 img').hide();

$('#clone_button').click(function() {
    $('#clone_wrapper div:#pricebox')
        .clone()
        .append('')
        .appendTo($('#clone_wrapper'));
})
});
$(function() {
$('#filter').change(function(){
    $('#itembox4 img').hide();
    $('.'+$(this).val()).show();});
}); 
```

我已经添加了，`$("img").addClass(classname,function(index,currentclass))`但是一旦我移动我的图像，它就会丢失它的**id**，当我将它拖回它的盒子时，它不会让我重新拖出它。

**我想达到什么目的？**
可移动的图像要么不会丢失其**id** ，要么在拖放后自动重新添加。

[http://jsfiddle.net/NHbpX/](http://jsfiddle.net/NHbpX/)

*图像都死了，但它们仍然可以与 jquery 一起使用。*

**我尝试过**
将项目改回`class="price"`而不是`id="price"`

# c# - 在工作线程上更新数据表之前取消绑定 dataGridView

> ID：16104092
> 
> 赞同：1
> 
> 时间：2013-04-19T11:57:31.507
> 
> 标签：c#, multithreading, datagridview, datatable

[我有一个与此处](https://stackoverflow.com/questions/14165159/datagridview-causes-program-not-responding-when-data-displayed-fills-view-and)提出的问题非常相似的问题。我有来自串行端口的数据流。串行接收事件更新数据表（同一类中的公共属性）。当端口接收到数据时，我取消绑定一个dataGridView；通过添加一行来更新数据表；然后使用 delagate 更新 dataGridView。调试（或在 VS2010 中创建版本）时一切正常。但是，如果我从创建目录（调试或发布）或安装运行程序，当 dataGridView 到达需要滚动的行数时，程序会锁定并超时？从 VS2010 内部运行时不会发生这种情况 - 但在“外部”开发环境中会发生吗？？？

我正在尝试使用从`dataRowChanged`.

这是代码：

```
 void dtData_RowChanged(object sender, DataRowChangeEventArgs e)
    {
        SetGridView(dataGridView1);
    } 
```

和代表：

```
delegate void SetGridViewCallBack(DataGridView dgv);
private void SetGridView(DataGridView dgv)
{
    // InvokeRequired required compares the thread ID of the
    // calling thread to the thread ID of the creating thread.
    // If these threads are different, it returns true.
    if (this.dataGridView1.InvokeRequired)
    {
        SetGridViewCallBack d = new SetGridViewCallBack(SetGridView);
        this.Invoke(d, new object[] { dgv });
    }
    else
    {
        this.dataGridView1.DataSource = dtData;
        this.dataGridView1.ScrollBars = ScrollBars.None;
        this.dataGridView1.Refresh();
        this.dataGridView1.ScrollBars = ScrollBars.Vertical;
        this.dataGridView1.Refresh();

        // if scolled, focus on the last row
        if (dataGridView1.Rows.Count > 3)
        {
            this.dataGridView1.CurrentCell = dataGridView1[0, dataGridView1.Rows.Count - 1];
        }
    } 
```

好的-所以a）为什么会在IDE“外部”崩溃？？？b）我做错了什么？？？

提前感谢您的帮助

# php - 从搜索或主页或目录页面加载产品之前或之后的 magento 事件

> ID：16104095
> 
> 赞同：4
> 
> 时间：2013-04-19T11:57:35.303
> 
> 标签：php, magento, events

我需要一个在产品加载之前/之后调用的 magento 事件/观察者。我想由该观察者更改/附加产品名称。

我使用**了 catalog_product_load_after 事件**，

但它不起作用，当您从搜索加载产品时，它也不会调用主页上的产品，如畅销产品等。

基本上是一个函数/观察者/事件，每次在magento前端加载产品时都会调用它，无论它是加载在主页还是搜索页面上。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T14:06:12.087

该`catalog_product_load_after`事件有效，每次加载产品时都会触发。如果当您认为产品未加载或事件已被您的商店的自定义更改更改时，它没有触发。

重要的是，请注意，如果您正在加载产品集合，则**不会**`catalog_product_load_after`触发该事件（因为在这种情况下，您当然不是在加载产品，而是在加载包含产品的集合）。类别和搜索结果页面不会单独加载每个产品，而是加载过滤后的产品集合，这就是您没有看到事件触发的原因。您可以考虑使用允许您拉取集合并从观察者方法内部遍历它的事件。**`catalog_product_collection_load_after`**

 **```
<?php
class NameSpace_Module_Model_Observer
{
    public function observerMethod($observer)
    {
        foreach ($observer->getCollection() as $product):
            ...
        endforeach;
    }
} 
```**

# java - 使用 JUnit 测试 void 方法

> ID：16104097
> 
> 赞同：1
> 
> 时间：2013-04-19T11:57:37.200
> 
> 标签：java, netbeans, junit

我正在尝试在 NetBeans 中使用 JUnit 测试 void 方法，我的方法是更改​​双精度变量的值，然后将新变量的值打印到 TextField 中，这是我的方法：

```
private void calcul(){

        if(operateur.equals("+")){
            chiffre1 = chiffre1 + Double.valueOf(ecran.getText()).doubleValue();
            ecran.setText(String.valueOf(chiffre1));
        }
        if(operateur.equals("-")){
            chiffre1 = chiffre1 - Double.valueOf(ecran.getText()).doubleValue();
            ecran.setText(String.valueOf(chiffre1));
        }          
        if(operateur.equals("*")){
            chiffre1 = chiffre1 * Double.valueOf(ecran.getText()).doubleValue();
            ecran.setText(String.valueOf(chiffre1));
        }     
        if(operateur.equals("/")){
            try{
                chiffre1 = chiffre1 / Double.valueOf(ecran.getText()).doubleValue();
                ecran.setText(String.valueOf(chiffre1));
            } catch(DivisionSurZeroException e) {
                ecran.setText("0");
            }
        }
    } 
```

我在 Google 上搜索了如何测试 void 方法，但我能找到的只是改变集合大小的 void 方法。

所以请你能给我一些想法吗？我真的不知道从什么开始。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T12:02:32.350

您必须创建测试类的新实体，然后调用测试函数。稍后断言值已按您的意愿更改。

```
TestedClass tested = new TestedClass();
tested.calcul();

assertEquals("val", tested.getVal()); 
```

但是，在您的示例方法中是私有的。要对其进行测试，您可以尝试使用[PowerMock](https://code.google.com/p/powermock/wiki/MockitoUsage13)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:06:26.057

1.  您可以将您的方法拆分为几个较小的方法 - 每个运算符一个 - 并独立测试它们。

2.  测试`void`方法与返回值的测试方法没有太大区别：

    1.  设置先决条件
    2.  运行你的方法
    3.  检查后置条件

在你的情况下：

```
yourClass.setOperateur("+");
yourClass.setChiffre1(5);
yourClass.setEcran("7");

yourClass.calcul();

assertEquals("12", yourClass.getEcran()); 
```

# android - FlurryAgent.getAd 总是返回 false

> ID：16104098
> 
> 赞同：0
> 
> 时间：2013-04-19T11:57:40.507
> 
> 标签：android, flurry

我正在尝试在我的 android 应用中实现乱舞广告。我有个问题 -`FlurryAgent.getAd always returns false`

我有横幅“FrameLayout”，我正在尝试投放这些广告。

```
@Override
    protected void onStart() {
        super.onStart();
        FlurryAgent.initializeAds(this); 
        boolean result = FlurryAgent.getAd(this, "ingame", (ViewGroup)findViewById(R.id.bannerframe), FlurryAdSize.BANNER_BOTTOM, 1000);
        Log.d("FlurryAgent", "FlurryAgent getAd " + result);
    } 
```

日志中的结果是（这是我的日志，不是本机乱舞）：

```
04-19 14:44:38.367: E/FlurryAgent(13675): FlurryAgent setFlurryKey ---------
04-19 14:44:38.460: E/FlurryAgent(13675): FlurryAgent onStartSession
04-19 14:44:39.484: D/FlurryAgent(13675): FlurryAgent getAd false 
```

我试过 setTestAds(true) - 没有区别。

# html - CSS 元素选择器比 HTML 属性更具体？

> ID：16104100
> 
> 赞同：5
> 
> 时间：2013-04-19T11:57:49.060
> 
> 标签：html, css

好的，这是一个简单的[**测试用例**](http://jsfiddle.net/daMGg/)

我正在尝试的是，如果我们使用属性来设置元素的样式（我知道这是一个非常非常糟糕的主意，但我这样做是为了实验）

所以问题是 CSS 基本元素选择器样式是否比 HTML 属性更具体？

有点`CSS - 1 / HTML - 0 <!-- Specificity -->`

如果`CSS not used, HTML - 1 <!-- Specificity -->`

测试用例 HTML

```
<table border="1">
    <tr>
        <td>Hello 1</td>
        <td>Hello 2</td>
        <td>Hello 3</td>
    </tr>
</table> 
```

CSS

```
table, table td {
    border: 0;
} 
```

所以整体 CSS 比 HTML 的样式更具体？或者有什么我们可以用除了属性之外的`style`属性覆盖 CSS 的东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T12:12:31.723

来自[CSS 2.1 规范](http://www.w3.org/TR/CSS21/cascade.html#preshint)：

> UA 可以选择尊重 HTML 源文档中的表示属性。如果是这样，这些属性将被转换为特定性等于 0 的相应 CSS 规则，并被视为插入到作者样式表的开头。因此，它们可能会被后续样式表规则覆盖。在过渡阶段，此策略将使样式属性更容易与样式表共存。

[CSS Cascading and Inheritance Level 3](http://www.w3.org/TR/css3-cascade/#preshint)中存在类似的语言

* * *

> 所以整体 CSS 比 HTML 的样式更具体？

是的。不要使用 HTML 进行样式设置。我们现在有 CSS。

> 或者有什么我们可以用除了 style 属性之外的属性覆盖 CSS

没有。style 属性只是将 CSS 应用于元素的一种方式。（就像使用 JavaScript 修改由 style 属性生成的 DOM 属性一样。）

# android - 如何将带有选项卡和自定义视图的 FrameLayout 子级放在顶部

> ID：16104108
> 
> 赞同：0
> 
> 时间：2013-04-19T11:58:13.277
> 
> 标签：android, android-framelayout

Framelayout 包含选项卡（来自 ActionBarSherlock）和一个自定义视图 - ArcMenu（类似于“路径”应用程序的菜单）。我想将 ArcMenu 放在选项卡内容之上，但不知何故它隐藏在选项卡内容之下。

我尝试在父视图上设置 BringChildToFront()。这是代码。

```
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.worklist_activity);
        context = getApplicationContext();

        ActionBar actionbar = getSupportActionBar();
        actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        Tab tab1 = actionbar.newTab().setText("My Requests");
        Tab tab2 = actionbar.newTab().setText("Approved Requests");

        tab1.setTabListener(new TabListener<MyRequestsFragment>(
                this, "tab1", MyRequestsFragment.class));

        tab2.setTabListener(new TabListener<ApprovedRequestsFragment>(
                this, "tab2", ApprovedRequestsFragment.class));

        actionbar.addTab(tab1);
        actionbar.addTab(tab2);

        com.capricorn.ArcMenu arcMenu = (com.capricorn.ArcMenu) findViewById(R.id.arc_menu);

        int[] ITEM_DRAWABLES = { R.drawable.temp_1, R.drawable.temp_2,
                R.drawable.temp_3 };
        final int itemCount = ITEM_DRAWABLES.length;
        for (int i = 0; i < itemCount; i++) {
            ImageView item = new ImageView(this);
            item.setImageResource(ITEM_DRAWABLES[i]);

            final int position = i;
            arcMenu.addItem(item, new OnClickListener() {

                @Override
                public void onClick(View v) {
                    Toast.makeText(context, "pos " + position,
                            Toast.LENGTH_SHORT).show();
                }
            });
        }

        ViewParent parent = arcMenu.getParent();
        ViewGroup vg = (ViewGroup) parent;
        System.out.println(((ViewGroup) parent).getChildCount());
        System.out.println(vg.getChildAt(0).toString() + "\n"
                + vg.getChildAt(1).toString());

    } 
```

这是我的xml文件

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linear_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/app_background_color"
    android:orientation="vertical"
    android:tag="tagtag" >

    <TabHost
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@android:id/tabhost"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:foregroundGravity="bottom" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" >

            <TabWidget
                android:id="@+id/tabs"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" />

            <FrameLayout
                android:foregroundGravity="bottom"
                android:id="@+id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" />
        </LinearLayout>
    </TabHost>

 <com.capricorn.ArcMenu
        android:id="@+id/arc_menu"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
         />
</FrameLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:23:38.660

您可以通过调用 setVisibility(View.Gone) 来隐藏 TabHost 视图 您可以通过在 ArcMenu 视图上调用 bringToFront() 来重新排序 z-index

# c# - 从 consol C# 添加列表项

> ID：16104109
> 
> 赞同：1
> 
> 时间：2013-04-19T11:58:15.457
> 
> 标签：c#, list

我正在制作一个非常简单的 Hangman 游戏并使用 2 个文件。Program.cs 和 WordList.cs。

菜单是：

1.  添加单词

2.  显示单词列表

3.  玩

4.  出口

我想知道如何让控制台中写入的单词进入单词列表。因此，如果我选择菜单项 1，我应该最多可以输入 5 个单词并让它们进入单词列表。真的希望有人可以提供帮助，因为我有点失落。需要我说 C# 的初学者:) 我还没有弄清楚程序如何搜索每个字母，但首先处理这个问题......

这是program.cs中的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

class Hangman
{
    static void Main()
    {
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Title = "C# Hangman";
        Console.WriteLine("Welcome To C# Hangman!");

        //MENU

        char MenuChoice;       

        Console.Write("\n\t1) Add words");
        Console.Write("\n\t2) Show list of words");
        Console.Write("\n\t3) Play");
        Console.Write("\n\t4) Quit\n\n");

        Console.Write("\n\tChoose 1-4: ");        //Choose meny item
        MenuChoice = Convert.ToChar(Console.ReadLine());

            switch (MenuChoice)
            {
                case '1':

                    break;
                case '2':
                    WordList showing = new WordList();
                    showing.ListOfWords();
                    Console.Write("\n\tList of words\n\n");

                    break;

                case '3':   //Running game

                    int guesses;
                    Console.Write("\n\tHow many faults can you have: ");
                    guesses = Convert.ToInt32(Console.ReadLine());
                    Console.Write("\n\tAwesome, let´s play!\n");

                    String input;
                    bool wrong;
                    int NumberOfTries = 0;

                    do
                    {
                        Console.WriteLine("\n\n\tWrong guesses: " + NumberOfTries + " / " + guesses + "\n");
                        Console.WriteLine("\n\tGuessed letters:\n");
                        Console.WriteLine("\n\tWord:\n");
                        Console.Write("\n\n\tGuess letter: ");
                        input = Console.ReadLine();
                        Console.Write("\n\n\t ");

                        wrong = !input.Equals("t") &&
                              !input.Equals("e") &&
                              !input.Equals("s") &&
                              !input.Equals("t"); 
                        if (wrong)
                        {
                            NumberOfTries++;
                            Console.WriteLine("\n\tWrong letter " + "Try again!");
                        }
                        if (wrong && (NumberOfTries > guesses - 1))
                        {
                            Console.WriteLine("\n\tYou have failed " + guesses + ". End of game!\n");
                            break;
                        }

                    } while (wrong);
                    if (!wrong)
                        Console.WriteLine("\n\tWhohoo!");

                    break;

                case '4':

                    Console.WriteLine("\n\tEnd game?\n\n");
                    break;
            }

    }

} 
```

这是 WordList.cs 中的代码

```
using System;
using System.Collections.Generic;

class WordList
{
    public void ListOfWords()
    {

        List<string> words = new List<string>(); // List

        words.Add("test");         // Contains: test
        words.Add("dog");          // Contains: test, dog
        words.Insert(1, "shit"); // Contains: test, shit, dog

        words.Sort();
        foreach (string word in words) // Display for verification
        {
            Console.WriteLine(word);

        }

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:01:25.013

你可以使用`Console.ReadLine()`

```
 string word = "";
        while (word != null && !word.Equals("DONE"))
        {
            word = Console.ReadLine();
            wordList.Add(word);
        } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T12:05:56.990

像这样扩展您的应用程序，将您的显示声明移到您的开关之外

```
var showing = new WordList();
switch (MenuChoice)
        {
            case '1':
                showing.AddWord(Console.ReadLine())
                break;
            case '2':
                showing = new WordList();
                showing.ListOfWords();
                Console.Write("\n\tList of words\n\n"); 
```

并扩展您的 Wordlist 以保留您的单词并添加添加新单词的方法

```
class WordList
{
   private words = new List<string>();
   'keep the constructor but move declaration

   public void AddWord(string word)
   {

    words.Add(word);
   } 
```

事实上，通过一些重构，您可以继续删除类单词列表，并将列表保留在 Program.cs 中，但它确实可以使用更多作为重构

我会尝试修改你的代码（现在没有编译器，所以不要责怪任何小的语法问题（通常使用 VB.net）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

class Hangman
{
    static void Main()
    {
        Console.ForegroundColor = ConsoleColor.Red;
        Console.Title = "C# Hangman";
        Console.WriteLine("Welcome To C# Hangman!");

        //MENU

        char MenuChoice;       

        Console.Write("\n\t1) Add words");
        Console.Write("\n\t2) Show list of words");
        Console.Write("\n\t3) Play");
        Console.Write("\n\t4) Quit\n\n");

        Console.Write("\n\tChoose 1-4: ");        //Choose meny item
        MenuChoice = Convert.ToChar(Console.ReadLine());
        WordList showing = new WordList();
            switch (MenuChoice)
            {
                case '1':
                    var input = Console.ReadLine();
                    showing.AddWord(input);
                    break;
                case '2':

                    showing.ListOfWords();
                    Console.Write("\n\tList of words\n\n");

                    break;

                case '3':   //Running game

                    int guesses;
                    Console.Write("\n\tHow many faults can you have: ");
                    guesses = Convert.ToInt32(Console.ReadLine());
                    Console.Write("\n\tAwesome, let´s play!\n");

                    String input;
                    bool wrong;
                    int NumberOfTries = 0;

                    do
                    {
                        Console.WriteLine("\n\n\tWrong guesses: " + NumberOfTries + " / " + guesses + "\n");
                        Console.WriteLine("\n\tGuessed letters:\n");
                        Console.WriteLine("\n\tWord:\n");
                        Console.Write("\n\n\tGuess letter: ");
                        input = Console.ReadLine();
                        Console.Write("\n\n\t ");

                        wrong = !input.Equals("t") &&
                              !input.Equals("e") &&
                              !input.Equals("s") &&
                              !input.Equals("t"); 
                        if (wrong)
                        {
                            NumberOfTries++;
                            Console.WriteLine("\n\tWrong letter " + "Try again!");
                        }
                        if (wrong && (NumberOfTries > guesses - 1))
                        {
                            Console.WriteLine("\n\tYou have failed " + guesses + ". End of game!\n");
                            break;
                        }

                    } while (wrong);
                    if (!wrong)
                        Console.WriteLine("\n\tWhohoo!");

                    break;

                case '4':

                    Console.WriteLine("\n\tEnd game?\n\n");
                    break;
            }

    }

} 
```

这是 WordList.cs 中的代码

```
using System;
using System.Collections.Generic;

class WordList
{
    private List<string> words = new List<string>();

    public void ListOfWords()
    {
        words.Add("test");         // Contains: test
        words.Add("dog");          // Contains: test, dog
        words.Insert(1, "shit"); // Contains: test, shit, dog

        words.Sort();
        foreach (string word in words) // Display for verification
        {
            Console.WriteLine(word);

        }

    }

    public void AddWord(string value){
        words.Add(value);
      }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T12:08:15.577

你有一个单词集合。

```
List<string> myList = new List<string>(); 
```

你从控制台读到这个词

```
var inputString = Console.ReadLine(); 
```

如果你喜欢，你可以修剪它

```
inputString = inputString.Trim();  // that'll remove the spaces on the front/back of the string 
```

然后您可以将其添加到列表中

```
myList.Add(inputString); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T12:12:19.890

由于单词由空格分隔，因此您可以让用户输入他们的单词列表，如下所示：
`these are four words`，您可以轻松阅读

```
string input = Console.ReadLine();
// input == "these are four words" 
```

创建列表现在非常简单

```
string[] words1 = input.Split(new char[] { ' ' }, // Splits the words by space
                             StringSplitOptions.RemoveEmptyEntries);
// words1 = { "these", "are", "four", "words" } 
```

如果你绝对需要 a `List<string>`，你只需要`.ToList()`在最后添加：

```
List<string> words2 = input.Split(new char[] { ' ' },
                                 StringSplitOptions.RemoveEmptyEntries).ToList(); 
```

# iisnode - 如何在 iisnode 上运行 Etherpad Lite

> ID：16104112
> 
> 赞同：1
> 
> 时间：2013-04-19T11:58:22.787
> 
> 标签：iisnode, etherpad

如何使用 iisnode 在 IIS 上运行 Etherpad Lite？

*（经过更多调查后于 2013-04-23 更新）*

**我的步骤（第一次尝试）**

1.  安装 Etherpad Lite`c:\eplite`并确保它在与 start.bat 一起运行时工作。
2.  为 IIS 安装 URL 重写模块（iisnode 需要）。
3.  安装 iisnode。
4.  授予 IIS_IUSRS 对整体`c:\eplite`的完全控制权（有点矫枉过正，但要确保没有访问问题）。
5.  配置指向`c:\eplite`.
6.  移至。`c:\eplite\node_modules\ep_etherpad-lite\Web.config`_`c:\eplite`

打开 IE，我可以看到“类似”etherpad 的东西，但它不起作用。在主页上没有文本（只有字段和按钮），尝试打开 pad 会导致 pad 界面无法正常工作：

```
An error occured while loading the pad
Invalid argument. in http://localhost/static/js/l10n.js (line 1) 
```

**我的步骤（第二次尝试，在[这里](http://github.com/tjanczuk/iisnode/issues/237)阅读讨论后）**

`7.`编辑 settings.json：删除`port`.

`8.`创建 c:\eplite\start_iisnode.bat：

```
cd c:\eplite
node "c:\Program Files\iisnode\interceptor.js" "c:\eplite\node_modules\ep_etherpad-lite\node\server.js" 
```

`9.`将以下行添加到 Web.Config：

<iisnode nodeProcessCommandLine="c:\eplite\start_iisnode.bat" />

打开IE，这次可以看到正确的起始页了。打开焊盘会导致带文本的焊盘界面失效：

```
An error occured while loading the pad
The module at "ep_etherpad-lite/static/js/rjquery" does not exist. in http://localhost/static/js/require-kernel.js (line 1) 
```

根据进程监视器，它尝试在以下路径中找到此模块：

```
C:\eplite\node_modules\ep_etherpad-lite\static\pipe\fb92fd16-78e4-4f00-bac4-6a4935ebd0d4\static\plugins\ep_etherpad-lite\static\js\rjquery.js 
```

**我还尝试过什么**

1.  步骤 1-4 + 配置指向 c:\eplite\node_modules\ep_etherpad-lite（Web.config 位置）的 IIS 网站 +`node_modules\ep_etherpad-lite`从 Web.Config 中的任何位置删除路径。结果与原始步骤 1-6 相同。

2.  步骤 1-4,7-9 + 配置指向 c:\eplite\node_modules\ep_etherpad-lite（Web.config 位置）的 IIS 网站 +`node_modules\ep_etherpad-lite`从 Web.Config 中的任何位置删除路径。结果与原始步骤 1-9 相同。

**版本信息**

来自“master”代码分支（最新版本是 1.2.10）的 Etherpad Lite，使用 installOnWindows.bat 构建。

节点版本 0.8.4 x64，iisnode 版本 0.2.4 x64。

在 Windows 8 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-15T21:57:16.223

[在您提到的讨论](https://github.com/tjanczuk/iisnode/issues/237)中阅读您和其他人的回复后，我使它工作，虽然它不是一个完美的解决方案，并且有一些硬编码选项。

前六个步骤与您的相同。

对于第 7 步，请勿删除 settings.json 中的端口，因为这将在后续步骤中使用。

第 8 步和第 9 步不是必需的，但您可以将 web.config 的内容更改为此，如[@ghost 的](https://github.com/ghost)帖子所示：

```
<configuration>
  <system.webServer>
    <handlers>
      <add name="iisnode" path="server.js" verb="*" modules="iisnode" />
    </handlers>
    <rewrite>
      <rules>
        <rule name="LogFile" patternSyntax="ECMAScript" stopProcessing="true">
          <match url="iisnode" />
          <action type="Rewrite" url="node_modules/ep_etherpad-lite/node/iisnode" />
        </rule>
        <rule name="NodeInspector" patternSyntax="ECMAScript" stopProcessing="true">
          <match url="^server.js\/debug[\/]?" />
        </rule>
        <rule name="StaticContent">
          <action type="Rewrite" url="public{{REQUEST_URI}}" />
        </rule>
        <rule name="DynamicContent">
          <conditions>
            <add input="{{REQUEST_FILENAME}}" matchType="IsFile" negate="True" />
          </conditions>
          <action type="Rewrite" url="server.js" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer>
</configuration> 
```

之后，从 etherpad 的根路径（例如 c:\eplite）创建一个符号链接到实际的 server.js 文件（C:\eplite\node_modules\ep_etherpad-lite\node\server.js）。这可以通过使用**MKLINK**来完成。在此示例中，您可以在 cmd 中键入：

```
mklink c:\eplite\server.js C:\eplite\node_modules\ep_etherpad-lite\node\server.js 
```

“这解决了 Node 遇到的一些奇怪的路径/模块未找到问题。” 然后我们需要将 http-proxy 模块添加到 etherpad-lite。在 cmd 中设置当前文档为 C:\eplite\node_modules\ep_etherpad-lite 并运行**npm update & npm install http-proxy**最后将这些代码放在 server.js 的开头：

```
var http = require('http'),
    httpProxy = require('http-proxy');

httpProxy.createProxyServer({target:'http://localhost:9001'}).listen(process.env.PORT); 
```

请注意，目标路径中的端口应与 setting.json 中的端口相同，否则您无法从 IIS 中绑定的路径访问 etherpad 站点。

我试图通过将它们替换为 settings.port 来删除硬代码或目标路径，但这不起作用并且会出现**错误：**如果我将它放在 asyncs.waterfall 部分之前，则需要 npm.load() 。如果我将代理创建代码放在 asyncs.waterfall 内的任何回调函数中，将会出现**错误：连接 EADDRNOTAVAIL**。我想知道是否还有其他更好的集成 IIS 和 etherpad 的解决方案。谢谢！。

我的环境是开发分支的 Win7 + Node.Js 0.10 + IIS7 + iisnode v0.2.16 + etherpad Lite（最新版本是 1.4.10）

# java - 无论操作系统如何，如何在 Java 中获得干净的绝对文件路径？

> ID：16104118
> 
> 赞同：23
> 
> 时间：2013-04-19T11:58:48.423
> 
> 标签：java, path, filepath

这就是问题所在。经过一些连接后，我可能碰巧有一个这样的字符串

```
"C:/shared_resources/samples\\import_packages\\catalog.zip" 
```

甚至这个

```
"C:/shared_resources/samples/subfolder/..\\import_packages\\catalog.zip" 
```

我想要一些代码将此类字符串转换为具有统一分隔符的路径。

想到的第一个解决方案是使用`new File(srcPath).getCanonicalPath()`，但这是棘手的部分。此方法依赖于调用测试的系统。但是我需要将字符串传递给远程机器（Selenium Grid 节点，那里有浏览器），这里和那里的系统分别是 Linux 和 Windows。因此，尝试这样做会`new File("C:/shared_resources/samples\\import_packages\\catalog.zip").getCanonicalPath()`导致类似`"/home/username/ourproject/C:/shared_resources/samples/import_packages/catalog.zip"`. 并且使用钝的正则表达式替换似乎也不是一个很好的解决方案。

有没有办法只是修剪路径并使分隔符统一（并可能解析`..`'s）而不试图隐含地绝对化它？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-19T18:04:33.910

试试这个：

```
import java.io.IOException;
import java.nio.file.Path;
import java.nio.file.Paths;

public class Main {
    public static void main(String[] args) throws IOException {
        Path path = Paths.get("myFile.txt");
        Path absolutePath = path.toAbsolutePath();

        System.out.println(absolutePath.toString());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-09T10:26:34.260

您可以使用：

```
Path absolutePath = path.toAbsolutePath().normalize(); 
```

...至少要消除多余的相关部分。正如 normalize() 的文档所提到的，如果路径的消除节点实际上是一个链接，那么解析的文件可能不同，或者不再是可解析的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-07T19:44:20.387

[`FilenameUtils.normalize()`](http://commons.apache.org/proper/commons-io/javadocs/api-1.4/org/apache/commons/io/FilenameUtils.html)从 Apache [commons-io](http://commons.apache.org/proper/commons-io/)尝试

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-04-19T14:55:42.113

例如，这是您的路径：

```
String jarName = "C:/shared_resources/samples\\import_packages\\catalog.zip"
jarName.replaceAll("/", "\\");
jarName.replaceAll("..", "/"); 
```

# actionscript-3 - MOUSE_DOWN 上的滚动列表显示“x”图标到单击项目的一侧

> ID：16104126
> 
> 赞同：0
> 
> 时间：2013-04-19T11:59:10.127
> 
> 标签：actionscript-3, flash-cs6

我有一个滚动列表，当用户单击（MOUSE_DOWN）一个项目时，我希望该项目的右侧出现一个“删除”图标。

我的滚动列表的代码是这样的：

```
private function dataLoaded(event:Event):void {
            // this holds the loaded xml data //
            data = new XML(event.target.data);
            //items properties call - add other calls to master properties later on//
            items = data.item;
            // parsing of each ingredient//
            for (var i = 0; i < items.length(); i++) {
                // instantiation of mcItem (the stage for each item)
                _item = new Item();
                // sets //over// layer to invisible / transparent //
                _item.item_btn_over.alpha = 0;
                // creates the var itemTextField //
                _itemTextField = new TextField();
                // _itemTextField visual attributes //
                _itemTextField.x = _textFieldXPosition + _textFieldPaddingLeft;
                _itemTextField.y = _textFieldYPosition;
                _itemTextField.selectable = true;
                _itemTextField.wordWrap = true;
                _itemTextField.width = _textFieldWidth;
                _itemTextField.height = _textFieldHeight;
                _itemTextField.embedFonts = true;
                _defaultFormat.color = 0x111112;
                _defaultFormat.font = _arialRounded.fontName;
                _defaultFormat.size = 18;
                _itemTextField.defaultTextFormat = _defaultFormat;
                _itemTextField.text = items[i].toString();
                //adds textfield to displaylist//
                _item.addChild(_itemTextField);
                //vertical positioning//
                _item.y = i * _itemPosition;
                _item.buttonMode = true;
                _item.mouseChildren = false;
                //adds items to container displaylist//
                _container.addChild(_item);
                _item.addEventListener(MouseEvent.MOUSE_DOWN, itemClicked);
            }

                // Input Mask//
                _mask = new Shape();
                _mask.graphics.beginFill(0xFF0000);
                _mask.graphics.drawRect(0, 0, _maskWidth, _maskHeight);
                _mask.graphics.endFill();
                // Positioning of input mask//
                // horizontal centering of input mask//
                _mask.x = stage.stageWidth / 2 - _container.width / 2;
                _mask.y = _paddingTop;
                // adds the mask onto the stage//
                addChild(_mask);
                // assigns the above mask to the container //
                _container.mask = _mask;
                // Positioning of container with the mask//
                // horizontal centering of container //
                _container.x = stage.stageWidth / 2 - _container.width / 2;
                // vertical position of container //
                _container.y = _paddingTop;

                //Container background stylings//
                _background = new Shape();
                _background.graphics.beginFill(0xFFFFFF);
                _background.graphics.drawRect(0, 0, _container.width, _container.height);
                _background.graphics.endFill();
                _container.addChildAt(_background, 0);
                //End of container background stylings//

                _container.addEventListener(MouseEvent.MOUSE_OVER, movingOver);
                _container.addEventListener(MouseEvent.MOUSE_OUT, movingOut);
            } 
```

我有一个单独的监听器函数来监听 MOUSE_DOWN 事件，我需要帮助。我需要知道如何评估已单击的项目，然后显示一个其 AS3 链接名称为 DeleteItem 的 SimpleButton，并将其相对于该特定项目定位：

```
function itemClicked(event:MouseEvent):void {
    _itemTextField = new TextField();
    trace(_itemTextField.text);
    _editItem = new DeleteItem();
    addChild(_editItem);
    _editItem.x = ?????;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:34:22.037

使用 event.tagret - 它引用了该事件已调度的对象（在您的情况下单击了项目）

```
var item:Item = event.target as Item; 
```

如果要删除某些内容，请删除对其的所有引用。如果它在舞台上使用 parent.removeChild(this)。如果您只想隐藏显示对象，请考虑使用 visible=false。

```
item.getChildAt(INDEX); 
```

# actionscript-3 - 如何从 Flex 4.5 中的 XML 节点检索值

> ID：16104131
> 
> 赞同：-1
> 
> 时间：2013-04-19T11:59:20.807
> 
> 标签：actionscript-3, apache-flex, flex4.5

我的节点是：

```
<node Dep_MandMARA_SATNR="H_H_H" Dep_MandMARCSTDPD="H_H_H" MARA_SATNR="" MARCSTDPD="" MATL_GROUP="001" MATL_TYPE="ZCNI" rendReq="no" sno=""/> 
```

它存储在 item:Object 中

我必须从中检索 MATL_GROUP。

请给我解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:16:08.733

您应该使用 XML 类来高效地使用 xml-nodes。

在这种情况下，您可以这样做：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
           xmlns:s="library://ns.adobe.com/flex/spark" 
           xmlns:mx="library://ns.adobe.com/flex/mx" 
           minWidth="955" minHeight="600" creationComplete="init()">
<fx:Script>
    <![CDATA[
        import mx.controls.Alert;

        private var xml:XML = new XML(
            <node Dep_MandMARA_SATNR="H_H_H" Dep_MandMARCSTDPD="H_H_H" MARA_SATNR="" MARCSTDPD="" MATL_GROUP="001" MATL_TYPE="ZCNI" rendReq="no" sno="513314681"/>
        );

        protected function init():void
        {
            var matlGroup:String = xml.@MATL_GROUP;
            Alert.show(matlGroup);
        }

    ]]>
</fx:Script>
</s:Application> 
```

如果您希望能够动态使用任何属性名称，请这样做：

```
 protected function init():void
        {
            var attrName:String = "MATL_TYPE";
            var matlGroup:String = xml.@[attrName];
            Alert.show(matlGroup);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T06:34:09.133

xml.@[attrName] 不工作.... xml["@"+attrName];

# android - 片段：从给出 ActivityNotFoundException 的片段打开活动：

> ID：16104133
> 
> 赞同：0
> 
> 时间：2013-04-19T11:59:26.197
> 
> 标签：android, android-fragments, activitynotfoundexception

我正在尝试`activity`从`Listfragment` 以下打开一个

```
@Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        ((MenuActivity)getActivity()).getSlideoutHelper().close();
        Intent myIntent = new Intent(getActivity(), TravellerTimer.class);
        getActivity().startActivity(myIntent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY));

    } 
```

`TimeTraveller`我在清单文件中注册了活动，但仍然给予`ActivityNotFoundException`

以下是我的日志跟踪

```
04-19 17:14:00.030: E/AndroidRuntime(12188): FATAL EXCEPTION: main
04-19 17:14:00.030: E/AndroidRuntime(12188): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.example.vpiabstest/com.example.activity.TravellerTimer}; have you declared this activity in your AndroidManifest.xml?
04-19 17:14:00.030: E/AndroidRuntime(12188):    at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1556)
04-19 17:14:00.030: E/AndroidRuntime(12188):    at android.app.Instrumentation.execStartActivity(Instrumentation.java:1431)
04-19 17:14:00.030: E/AndroidRuntime(12188):    at android.app.Activity.startActivityForResult(Activity.java:3446)
04-19 17:14:00.030: E/AndroidRuntime(12188):    at android.app.Activity.startActivityForResult(Activity.java:3407)
04-19 17:14:00.030: E/AndroidRuntime(12188):    at android.support.v4.app.FragmentActivity.startActivityForResult(FragmentActivity.java:674)
04-19 17:14:00.030: E/AndroidRuntime(12188):    at android.app.Activity.startActivity(Activity.java:3617) 
```

下面是我的清单文件

```
< application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >

    <receiver android:name=".service.ActivityService" />
    <receiver
        android:name=".service.StartupService"
        android:enabled="true"
        android:exported="false" >
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
        </intent-filter>
    </receiver>

    <activity android:name="SampleActivity" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".MenuActivity"
        android:label="@string/app_name"
        android:theme="@style/MenuTheme" >
    </activity>
    <activity
        android:name=".VpiAbsTestActivity"
        android:theme="@style/Theme.VPI" />
    <activity
        android:name="com.example.activity.CreateTimer"
        android:configChanges="keyboardHidden|orientation|screenSize" />
    <activity
        android:name="com.example.activity.EditTimer"
        android:configChanges="keyboardHidden|orientation|screenSize" />
    <activity
        android:name="com.example.activity.FakeCall"
        android:configChanges="keyboardHidden|orientation|screenSize" />
    <activity
        android:name="com.example.activity.ContactList"
        android:configChanges="keyboardHidden|orientation|screenSize" />
    <activity
        android:name="com.example.activity.TravellerTimer"
        android:configChanges="keyboardHidden|orientation|screenSize" />
    <activity
        android:name="com.example.activity.TimerPrefrence"
        android:configChanges="keyboardHidden|orientation|screenSize" />

< /application> 
```

任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:00:28.137

确保您已在清单中使用完整正确的包名称注册 Activity

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:37:28.567

尝试使用“this”关键字在意图参数中调用您的活动的当前类对象。

```
Intent myIntent = new Intent(this.Urcurrentactivity, TravellerTimer.class);      this.Urcurrentactivity.startActivity(myIntent.addFlags(Intent.FLAG_ACTIVITY_NO_HISTORY)); 
```

您的代码也应该可以工作，但是仅通过看到此引号，我无法确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:15:47.887

通过在 PasteBin 中查看您的代码：

```
ArrayList<ActiveTimer> timerLists = new ArrayList<ActiveTimer>();
timerLists = ((TimerPrefrence) getApplication()).viewTimer(); 
```

您正在尝试将 TimerPrefence 转换为 ActiveTimer ArrayList。这就是你得到 Class cast 异常的原因。

# sql - 为什么记录集返回是空的，而它不是

> ID：16104134
> 
> 赞同：0
> 
> 时间：2013-04-19T11:59:27.800
> 
> 标签：sql, sqlite, nested

`piyasa_kontrol`表和中有数据`ilaclar`。并且在 ilac_id 和 id 上存在耦合`LEFT JOIN`。但是查询运行时没有返回记录。

```
SELECT ilaclar.ilac_adi AS ilAdi
FROM (SELECT *
      FROM piyasa_kontrol
      WHERE pk_yil=2013
      AND pk_ay IN (4, 5, 6)) AS pik
LEFT JOIN ilaclar ON pik.ilac_id = ilaclar.id 
```

这里有什么问题？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:03:15.193

这就是您解决此类问题的方法。步骤1。

```
select count(*)
from piyasa_kontrol 
```

如果这给你超过 0，第 2 步

```
select count(*)
from piyasa_kontrol 
pk_yil=2013 
```

继续，直到您的查询返回 0。然后您就会知道是什么导致了这种情况发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:09:01.580

该`ilacc_adi`字段具有空值的原因是因为您使用的是`left outer join`.

有没有匹配记录的情况。如果您使用 an `inner join`，则根本看不到该行。使用 a`left outer join`你会得到一个 NULL 值。

要对此进行调试，但在连接 ID 中查看 mon 匹配发生的位置：

```
SELECT pik.ilac_id,  ilaclar.ilac_adi AS ilAdi
FROM (SELECT *
      FROM piyasa_kontrol
      WHERE pk_yil=2013
      AND pk_ay IN (4, 5, 6)) AS pik
LEFT JOIN ilaclar ON pik.ilac_id = ilaclar.id 
```

# html - 删除表格中边框之间的空格

> ID：16104135
> 
> 赞同：3
> 
> 时间：2013-04-19T11:59:32.743
> 
> 标签：html, css

我在表格的边框之间有一些空格。而且我不知道为什么，一直在尝试使用负边距，以便它们相互重叠，但边距不起作用。`td`因为它是一张桌子，所以我在和上都有一个左边框`th`。但我在侧边框和顶部/底部边框之间也有一个空间。

[这](http://jsfiddle.net/pHVhg/1/)是我创建的小提琴。

一些表格CSS

```
.profile-table {
  height: 100%;
}

.profile-table td { 
  text-align:   center;
  border-right: 1px solid #ccc;
  font-size:    1.2em;
}

.profile-table th { 
  text-align:   center;
  border-right: 1px solid #ccc;
  width:        100px;
}

.profile-table tr{ 
}

.profile-table *:last-child{
  border: none;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T12:02:20.013

用于`border-collapse:collapse`合并边框

看到这个[小提琴](http://jsfiddle.net/pHVhg/2/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T12:01:37.403

添加`border-collapse: collapse;`到您的表中（参见[MDN 参考](https://developer.mozilla.org/en-US/docs/CSS/border-collapse)）

JsFiddle：http: [//jsfiddle.net/sWC9t/](http://jsfiddle.net/sWC9t/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T12:02:19.713

用这个

```
<table class="profile-table" cellpadding="0" cellspacing="0">
</table> 
```

**在这里演示**

[http://jsfiddle.net/pHVhg/3/](http://jsfiddle.net/pHVhg/3/)

# extjs - 在视口中放置一个模态窗口

> ID：16104140
> 
> 赞同：2
> 
> 时间：2013-04-19T11:59:55.347
> 
> 标签：extjs, window, modal-dialog, viewport

我刚开始使用 ExtJS，所以我在这里问的问题可能很简单。我刚刚完成了Sencha 网站上的[汽车教程](http://docs.sencha.com/architect/2/#!/guide/first_desktop_app)，现在正在尝试创建一些东西。我添加了一个`Viewport` 作为初始视图，并在其中放置了一个`Panel`包含我所有小部件的：

```
Ext.define('MyApp.view.MyViewport', {
    extend: 'Ext.container.Viewport',

    layout: {
        type: 'fit'
    },
    ...
}); 
```

我还创建了一个`Window`可以通过单击按钮打开的：

```
Ext.define('MyApp.view.MyWindow', {
    extend: 'Ext.window.Window',

    height: 185,
    renderTo: 'MyApp.view.MyViewport',
    width: 334,
    layout: {
        type: 'absolute'
    },
    title: 'My Window',

    initComponent: function() {
      ...
    }
}); 
```

onclick 处理程序是这样的：

```
var wind = new MyApp.view.MyWindow();
wind.modal = true;
wind.show(); 
```

问题是，当我打开窗口时，它会在所有面板下的 中呈现`Viewport`，而不是浮动在浏览器的视口中。我该如何解决？

**更新**

我`Window`使用 Sencha Architect 创建了一个新的并以相同的方式打开它。它按预期工作。在查看 and 的单独文件`.js`时，我发现没有真正的区别。`MyWindow``MyWindow1`

我的窗口：http : [//pastebin.com/yE9V1twc](http://pastebin.com/yE9V1twc)

MyWindow1： http: [//pastebin.com/ZznUVZni](http://pastebin.com/ZznUVZni)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:51:25.070

`renderTo: 'MyApp.view.MyViewport',`从你的`MyWindow`班级中删除。这将为您的 Window 定义生成以下代码：

```
Ext.define('MyApp.view.MyWindow', {
    extend: 'Ext.window.Window',

    height: 185,
    width: 334,
    layout: {
        type: 'absolute'
    },
    title: 'My Window',

    initComponent: function() {
      ...
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T17:27:33.687

如果要在视口区域（或任何容器）内显示窗口，则需要将 Ext.Window 的属性“约束”设置为 true 并将其呈现在容器 dom 元素上。例如：

```
// your window
Ext.define('MyApp.view.MyWindow', {
    extend: 'Ext.window.Window',
    ...
    constrain: true,
    ...
});

//your viewport
Ext.define('MyApp.view.MyViewport', {
extend: 'Ext.container.Viewport',

...

initComponent: function() {
    var me = this;
    this.callParent();
    me.on({
        afterrender: function() { <-- or do it in the handler of the button
            Ext.create('MyApp.view.MyWindow', {
                renderTo: me.getComponent('vp-center').getEl()// <-- see itemId of center region
            }).show();
        }
    });
},

items: [{
    region: 'center',
    title: 'Center region',
    itemId: 'vp-center'
}]

... 
```

请参阅 jsfiddle 上的完整示例：http: [//jsfiddle.net/MNFJn/](http://jsfiddle.net/MNFJn/)

您也可以将窗口添加为视口区域的一项。请参阅 sencha 示例中的来源： [http ://docs.sencha.com/extjs/4.2.0/extjs-build/examples/layout/border.html?theme=gray](http://docs.sencha.com/extjs/4.2.0/extjs-build/examples/layout/border.html?theme=gray)

# excel - 将前两个单词保留在excel单元格中的公式是什么？

> ID：16104143
> 
> 赞同：4
> 
> 时间：2013-04-19T12:00:14.413
> 
> 标签：excel

我的 D1 单元格包含的名称就像`John Smith Rangpur Bangladesh 5400...`我想保留前两个单词一样`John Smith`并从单元格中删除其余部分。这样做的公式是什么？

我在 C1 上使用了这个公式，`=LEFT(D1,FIND(" ",D1)-1)`但它只返回第一个单词 (John)。如何获得第一个和第二个单词`John Smith`？我的话是分开的`space.`

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T12:03:59.423

您需要使用[FIND](http://office.microsoft.com/en-us/excel-help/find-findb-functions-HP010342526.aspx)函数的第三个参数。它是查找操作开始的位置。如果你在第一个空格之后给它字符，那么你会找到第二个空格，这就是你需要的。

```
=LEFT(D1, FIND(" ", D1, FIND(" ", D1) + 1) - 1) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-19T12:47:24.973

这是一个更具扩展性的公式：

```
 C1 = LEFT(D1,FIND("|",SUBSTITUTE(D1," ","|",2))-1) 
```

字符串/字符分隔符是“”（空格），它的实例编号决定了一切。

Substitute 函数允许用户替换给定实例编号的字符串，这使得为每种情况具有不同的实例编号（短语的前两个单词，短语的前五个单词等）变得简单。我们用新的分隔符“|”替换给定实例的分隔符（在本例中为第二个）从左侧找到它的位置以确定所需的输出。

在上述在同一个函数中有多个查找函数的答案中，如果用户想要前 5 个单词而不是 2 个单词，那么在同一个函数中使用多个查找函数会使函数变得非常复杂。

在这种情况下，用户只需将替换函数（表示实例编号）中的“2”替换为 5。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T12:03:24.993

```
C1 =LEFT(D1,FIND(" ",D1, FIND(" ",D1)+1)-1) 
```

使用选项[start position](http://www.techonthenet.com/excel/formulas/find.php)参数仅开始查找您发现使用的第一个空间，`find`就像您已经完成的一样

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-18T16:39:29.907

万一你的名单上有一个词。

```
=IFERROR(LEFT(H4,FIND(" ",H4,FIND(" ",H4)+1)-1),H4) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-20T05:38:39.307

使用下面的代码来获得所需的结果：

```
=TRIM(LEFT(D1, FIND("~",SUBSTITUTE(D1, " ", "~",2)&"~"))) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-16T18:46:25.090

在 A2 中，您应该执行以下操作：

```
=IF(A1="","",IFERROR(LEFT(A1,FIND(" ",A1,FIND(" ",A1)+1)-1),A1))

=TRIM(LEFT(A1, FIND("~",SUBSTITUTE(A1, " ", "~",2)&"~"))) 
```

# postgresql - 如何在路径名中插入分隔符？[postgresql]

> ID：16104145
> 
> 赞同：1
> 
> 时间：2013-04-19T12:00:16.483
> 
> 标签：postgresql

我需要上传格式为 File_[currentDate]_[currentMonth]_name.tsv 的 *.tsv 文件。我尝试了很多方法，可悲的是徒劳无功，我必须要求分隔符，否则正确执行此操作的方法：

```
SELECT CURRENT_DATE AS today;
SELECT EXTRACT(MONTH FROM TIMESTAMP 'today') AS MONTH;
SELECT EXTRACT(DAY FROM TIMESTAMP 'today') AS DAY;

COPY table_name FROM 'D:\File_**<DAY>**_**<MONTH>**_name.tsv' DELIMITER '   ' CSV header; 
```

我期望输入文件名是 File_19_04_name.tsv（今天）。我究竟做错了什么？有什么办法可以做对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:26:45.640

在 plpgsql 函数中动态构建和执行`COPY`命令：

```
create or replace function cp()
returns text language plpgsql as $function$
begin
    execute $$
        COPY t
        FROM '$1'
        DELIMITER '   '
        CSV header
    $$ using 'D:\File_' || to_char(current_date, 'DD_MM') || '_name.tsv';
end;
$function$; 
```

`$1`将被传递的参数替换`using`

# php - 运行脚本时出错

> ID：16104149
> 
> 赞同：0
> 
> 时间：2013-04-19T12:00:31.247
> 
> 标签：php, mysql

请在执行此脚本时收到此错误代码警告：mysql_fetch_assoc()：提供的参数不是第 47 行 /home/a777gqka/public_html/testserver/index.php 中的有效 MySQL 结果资源

```
$query = mysql_query("SELECT
e.id,
ts.name AS stage_name,
DATE_FORMAT(e.startdate, '2013-05-15') AS startdate,
DATE_FORMAT(e.startdate, 'H:i') AS starttime,
MIN(if( ep.number = 1, p.name, NULL)) AS home_team,
if(e.status_type = \"notstarted\", \"-\",(MIN(if(ep.number = 1, r.value, NULL))))  AS home_score,
if(e.status_type = \"notstarted\", \"-\",(MIN(if(ep.number = 2, r.value, NULL)))) AS away_score,
MIN(if(ep.number = 2, p.name, NULL)) AS away_team,
es.name AS status_text
FROM
tournament_template AS tt INNER JOIN
tournament AS t ON t.tournament_templateFK = tt.id INNER JOIN
tournament_stage AS ts ON t.id = ts.tournamentFK INNER JOIN
event AS e ON ts.id = e.tournament_stageFK INNER JOIN
event_participants AS ep ON e.id = ep.eventFK LEFT JOIN
status_desc AS es ON e.status_descFK = es.id LEFT JOIN
participant AS p ON ep.participantFK = p.id LEFT JOIN
result AS r ON ep.id = r.event_participantsFK AND r.result_code = \"runningscore\" LEFT JOIN
property AS prop ON e.id = prop.objectFK AND prop.object =\"event\" AND prop.name = \"Live\"
WHERE
tt.sportFK = ".$sportFK."  AND
e.startdate BETWEEN ".$TODAY_FROM." AND ".$TODAY_TO." AND
prop.value = \"yes\"
GROUP BY
e.id
ORDER BY 
ts.id, e.startdate, e.id");
while($row = mysql_fetch_assoc($query)){
// Do something
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:57:58.643

```
$query = mysql_query("SELECT...") or die(mysql_error());
if ($query){
while($row = mysql_fetch_assoc($query)){
// Do something
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:03:30.020

```
 $query = "SELECT .... ";
 if($result = mysql_query($query)){
     while($row = mysql_fetch_assoc($result)){
          //...
     }
 } else {
     echo mysql_error();
 } 
```

除了你应该输出你的错误，你应该至少使用 mysqli。mysql_* 函数已弃用，将在 PHP 5.5 中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:04:39.043

您没有执行查询。

在while循环之前添加并将`$result = mysql_query($query)`循环测试更改为`$row = mysql_fetch_assoc($result)`

此外，不推荐使用 mysql_* 函数，并将在未来的 PHP 更新中删除。切换到 mysqli_* 或 PDO。

我个人建议PDO。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-19T12:02:10.893

请试试这个

```
if(mysql_num_rows($query) > 0){

   while($row = mysql_fetch_assoc($query)){
   // Do something
   }
}
else{
    echo "No record found";
} 
```

# php - 使用 PHP SSH2 重新启动远程应用程序

> ID：16104152
> 
> 赞同：1
> 
> 时间：2013-04-19T12:00:49.610
> 
> 标签：php, ssh, restart

如果使用 PHP-SSH2 的远程 SSH 服务器中存在目录“xyz”，我如何重新启动？

```
 <?php
 function fsmoke_ping($command_name1, $menu_name1, $title_name1, $host_ip1)
 {
    $connection = ssh2_connect('http://xxxx.com', 22);
    ssh2_auth_password($connection, 'username', 'password');     

    $sftp = ssh2_sftp($connection);
    $handle = file_exists('ssh2.sftp://' . $sftp . '/etc/xyz/devices/$menu_name1', 'w+')  or die('Cannot open file:  '.$menu_name1);

    $data = "++$menu_name1\nprobe = $command_name1\n menu = $menu_name1\n title = $title_name1\n host = $host_ip1";
    fwrite($handle, $data);
    fclose($handle);

    exec(`sudo /etc/init.d/xyz reload`);

}
?> 
```

在这，

```
 exec(`sudo /etc/init.d/xyz reload`); 
```

不工作。所以我怎么能在这里重新启动它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:03:44.810

显然[ssh2_exec](http://php.net/manual/en/function.ssh2-exec.php)。`exec`将在您的本地机器上执行语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:18:48.037

```
$connection = ssh2_connect('http://xxxx.com', 22); 
```

为什么你有 http:// 那里？

此外，还有一些 sudo 的问题无法通过 PECL ssh2 扩展轻松解决。我建议改用[phpseclib，一个纯 PHP SSH2 库](http://phpseclib.sourceforge.net/)。他们的网站上有一个关于如何使用 sudo 的具体示例：

[http://phpseclib.sourceforge.net/ssh/examples.html#sudo](http://phpseclib.sourceforge.net/ssh/examples.html#sudo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:06:46.800

在 newfile中使用`/etc/init.d/xyz reload`（通过 chmod 755）并附加 并使用`newfile nobody nobody``/etc/sudoers``exec(sudo newfile reload);`

# javascript - 在 Highcharts 中，如何获得 IE、Chrome 和 Fixefox 中点的一致坐标

> ID：16104155
> 
> 赞同：0
> 
> 时间：2013-04-19T12:00:59.197
> 
> 标签：javascript, internet-explorer, google-chrome, firefox, highcharts

K-K-K-Kode 断路器！

我正在尝试为 Highcharts 创建自定义工具提示。问题是点击事件触发了不同浏览器的不同坐标类型。（Chrome、IE、着火的狐狸）

我尝试了以下代码：

```
// create the chart
function onClick(e) {
  $('#report').text('x: ' + e.offsetX + ', y: ' + e.offsetY).css({
     'position': 'absolute',
        'left': e.offsetX,
        'top': e.offsetY
  })
}

var chart = new Highcharts.Chart({
  chart: {
     renderTo: 'container'
  },
  xAxis: {},
  tooltip: {
     enabled: false
  },
  series: [{
     data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4],
     events: {
        click: onClick
     }

  }]
}); 
```

小提琴可以在这里找到：

[http://jsfiddle.net/6JxWz/](http://jsfiddle.net/6JxWz/)

该代码在 Chrome 中工作，在 IE 中具有不同的值，在 Firefox 中根本不起作用。我怎样才能始终如一地获得点击点的正确坐标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:06:10.610

不确定我是否完全了解您要执行的操作，但是您是否尝试过使用 e.pageX 和 e.pageY 而不是偏移量？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:39:37.630

您是否尝试过在 jquery 中使用 position() 或 offset() 函数？

# c++ - 类型转换为基类后无法调用方法

> ID：16104157
> 
> 赞同：0
> 
> 时间：2013-04-19T12:01:07.503
> 
> 标签：c++, inheritance, casting, box2d, cocos2d-x

我有从类`Ball`派生的`PhysicsObject`类。在以下方法中，我从指针获取`Ball`实例并检查其是否为 type 。当我调用该方法时，它不会在类对象中被调用。我在这里做错了什么？`void``PhysicsObject``collidingWith``Ball`

**更新** 我在底部添加了一个[sscce 。](http://sscce.org/)请参考。

**代码**

```
void Levels::BeginContact(b2Contact *contact) {
    b2Fixture *fixtureA = contact->GetFixtureA();
    b2Fixture *fixtureB = contact->GetFixtureB();
    void *objA = fixtureA->GetUserData();
    void *objB = fixtureB->GetUserData();

    PhysicsObject* physicsObjA = reinterpret_cast<PhysicsObject*>(objA);
    PhysicsObject* physicsObjB = reinterpret_cast<PhysicsObject*>(objB);
    if ((physicsObjA != 0) && (physicsObjB != 0)) {
        physicsObjA->collidingWith(physicsObjB);    //not working
        physicsObjB->collidingWith(physicsObjA);
    }
} 
```

**物理对象**

```
#ifndef PHYSICSOBJECT_H_
#define PHYSICSOBJECT_H_

class PhysicsObject {
public:
    PhysicsObject();
    virtual ~PhysicsObject();

    virtual void collidingWith(PhysicsObject *obj) = 0;
};

#endif /* PHYSICSOBJECT_H_ */ 
```

**球.h**

```
#ifndef BALL_H_
#define BALL_H_

#include "Box2D/Box2d.h"
#include "cocos2d.h"
#include "PhysicsObject.h"

class Ball : public PhysicsObject {
public:
    //other methods
    void collidingWith(PhysicsObject *obj);
};

#endif /* BALL_H_ */ 
```

**球.cpp**

```
void Ball::collidingWith(PhysicsObject *obj) {
    CCLOG("Ball::collidingWith"); //this method is not being called
}
 //other methods

Ball::Ball() {
    //other code
    b2FixtureDef ballShapeDef;
    ballShapeDef.userData = this;
    //other code
} 
```

**更新** 我有 3-4 个其他类，它们是从`PhysicsObject`类似`Ball`的，我在这里没有提到的，但公共代码是相同的。

**UPDATE **SSCCE**
In出现错误`main.cpp``foo()``baseObjA->collidingWith(baseObjA);`**

 ****基类**

```
class Base
{
public:
    Base(void);
    virtual ~Base(void);
    virtual void collidingWith(Base *obj) = 0;
}; 
```

**另一个基类**

```
class AnotherBase
{
public:
    AnotherBase(void);
    ~AnotherBase(void);
    virtual void foo();
}; 
```

**派生类头**

```
#include "Base.h"
#include "AnotherBase.h"
class Derived :
    public AnotherBase, Base
{
public:
    Derived(void);
    ~Derived(void);
    void collidingWith(Base *obj);
}; 
```

**派生类实现**

```
#include "Derived.h"

void Derived::collidingWith(Base *obj) {
    printf("Ball::collidingWith");
} 
```

**主文件**

```
#include "Derived.h"

void myFoo(void* userData);
int _tmain(int argc, _TCHAR* argv[])
{
    Derived *derived = new Derived();
    void* userData = derived;
    myFoo(userData);
    return 0;
}

void myFoo(void* userData) 
{
    Base* baseObjA = reinterpret_cast<Base*>(userData); 
    if (baseObjA != 0) {
        baseObjA->collidingWith(baseObjA);// Error here
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-12T17:31:50.273

从 box2d 中的 void* 进行投射也给了我非常相似的问题。

似乎是`reinterpret_cast`导致错误的原因，`collidingWith`虚拟方法也是如此。（如果该方法不是虚拟的，您应该可以毫无问题地调用它）。

我已经解决了这个问题：

```
void* data; // You know it's type is Base

Base* base = static_cast<Base*>(data);
Derived* derived = dynamic_cast<Derived*>(base);

derived->collidingWith(); 
```**

# android - android-xmlns:myapp在xml布局文件中的作用是什么

> ID：16104159
> 
> 赞同：1
> 
> 时间：2013-04-19T12:01:18.803
> 
> 标签：android, android-layout

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
 xmlns:myapp="http://schemas.android.com/apk/res/***.****"
 xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
android:id="@id/RelativeLayout1"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="#ffffffff" > 
```

我想知道 xmlns:myapp="http://schemas.android.com/apk/res/my-app-name" 的作用是什么......这有什么需要，它是如何工作的，请帮忙.. …………

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:03:46.353

这意味着 xml 命名空间。

基本上，xml 中的每个元素（或属性）都属于一个命名空间，这是一种“限定”元素名称的方式。

更多信息 访问[此](https://stackoverflow.com/questions/1181888/what-does-xmlns-in-xml-mean)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:12:34.167

基本上，如果您不使用 xmlns(ns: 名称空间) ，则在另一个 xml 文件中使用的标签之间可能存在冲突。例如：

**文件1：**

```
<table>
  <name>jad</name>
</table> 
```

**文件2：**

```
<table>
  <tr>
    <td>google</td>
  </tr>
</table> 
```

如果将这些 XML 片段加在一起，就会发生名称冲突。两者都包含一个元素，但元素具有不同的内容和含义。

出于这个主要原因，使用了**限定名称空间**。还有其他几种用途。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:58:04.313

如果您对视图使用自己的属性，则需要使用命名空间。

这在您创建自己（或使用其他人）自定义视图时最常用。

例如，如果您创建自己的自定义 textView 支持使用 assets 文件夹中的自定义字体，您可能需要添加以下内容：

```
<...MyTextView app:fontFile="fonts/myFont.ttf" .../> 
```

# ios - UITextView 忽略 Retina 中的 AttributedText

> ID：16104164
> 
> 赞同：3
> 
> 时间：2013-04-19T12:01:29.153
> 
> 标签：ios, objective-c, cocoa, uitextview, nsattributedstring

我现在断断续续地研究一个错误（因为它让我发疯）已经有几个星期了，但我似乎无法深入了解它，所以我正在伸出援手，希望有人能为我阐明这一点...

我`UITextView`在 XIB 文件中进行了基本设置，并使用包含的字体设置了字体，但不是默认字体（在本例中为“Avenir”），然后我使用几行代码来更改行高通过使用属性文本属性。我还应该提到我正在使用ARC。

输出在 iPad mini（或模拟器上的普通 iPad）上看起来很完美，但在 iPad 视网膜（或视网膜模拟器）上，输出被敲回系统默认字体 - Helvetica，尽管它保持行距。

我尝试以`UITextView`编程方式而不是在 XIB 中创建，但仍然没有运气。这是我用来设置属性文本的代码：

```
NSString *string = theTextView.text;

NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc] init];
paragraphStyle.minimumLineHeight = 48.f;

NSMutableAttributedString *aStr = [[NSMutableAttributedString alloc] initWithString:string];
[aStr addAttribute:NSParagraphStyleAttributeName value:paragraphStyle range:NSMakeRange(0,[string length])];

theTextView.attributedText = aStr; 
```

据我所知，在视网膜设备上，出于某种原因，它`UITextView`似乎持有一组双属性字符串。当我打印

```
NSLog(@"Font Attributes: %@", theTextView.attributedText); 
```

这是我得到的输出：

**非视网膜**

```
Font Attributes: Lorem ipsum dolor sit er elit lamet, consectetaur cillium adipisicing pecu, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Nam liber te conscient to factor tum poen legum odioque civiuda.
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x714c930> font-family: \"Avenir-Roman\"; font-weight: normal; font-style: normal; font-size: 24px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 48/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
} 
```

**视网膜**

```
Font Attributes: Lorem ipsum dolor sit er elit lamet, consectetaur cillium adipisicing pecu, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Nam liber te conscient to factor tum poen legum odioque civiuda.
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x71ed950> font-family: \"Helvetica\"; font-weight: normal; font-style: normal; font-size: 12px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 48/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}
{
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x71e67d0> font-family: \"Avenir-Roman\"; font-weight: normal; font-style: normal; font-size: 24px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 48/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
} 
```

我也在 GitHub 上创建了一个简单的问题示例项目 -

[https://github.com/mpatteson/UITextViewBug](https://github.com/mpatteson/UITextViewBug)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T16:07:08.800

我遇到了同样的问题。对于非视网膜设备和模拟器，它可以工作，但是当我切换到视网膜设备或模拟器时，字体是标准的 helvetica，输出与你的输出相同。对我来说，当我直接在代码中指定字体时（在 Interface Builder 中正确设置），它就起作用了。所以添加这样的一行：

```
UIFont *font = [UIFont fontWithName:@"Avenir-Roman" size:24.0];
[aStr addAttribute:NSFontAttributeName value:font range:NSMakeRange(0,[string length])]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:21:05.973

您可以尝试调整比例的最小行高吗？

```
NSMutableParagraphStyle *paragraphStyle = [[NSMutableParagraphStyle alloc] init];
paragraphStyle.minimumLineHeight = 48.0 * [UIScreen mainScreen] scale]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-02T15:17:00.933

对于可能偶然发现此问题的任何其他人，在没有得到我需要的东西之后，我使用我的一张专门的 Apple 支持票与他们的一位工程师就该问题展开讨论。

他确认这确实是 iOS 中的一个无法修复的错误 - 您可以设置字体，在这种情况下，行高和间距将被忽略，或者相反，在这种情况下，字体将重置为系统默认值。他确实说过快速测试似乎表明它已在 iOS 7 Beta 2 中得到修复，幸好但仍然不是很好。

出于我的目的，我已将 替换为`UITextView`a`UIWebView`以便我可以使用 CSS 控制内容

# smartfoxserver - Smartfox 服务器 - 当我选择区域监视器选项时，会话被删除

> ID：16104165
> 
> 赞同：4
> 
> 时间：2013-04-19T12:01:31.153
> 
> 标签：smartfoxserver

我在 SFS 中给出的基本示例中遇到了这个问题，在另一种情况下，当我尝试登录管理员时，它再次创建一个新会话并单独使用区域配置正常工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T05:20:18.540

该`Session`对象代表系统中连接的客户端。通常，在成功执行操作`Session`之前，a 无法与服务器交互。`Login`完成此操作后，`Session`将被提升为`User`并允许交互。你只能`Users`在里面看到`ZoneMonitor`

# java - 使同一台机器上的客户端在不同的线程上运行

> ID：16104170
> 
> 赞同：2
> 
> 时间：2013-04-19T12:01:55.517
> 
> 标签：java, multithreading

我读过一个客户端-服务器应用程序，客户端通过服务器交互。所以，为此，我想在不同的线程上创建客户端。（如果没有，它们通常会被 IO 阻塞）。

这是我的客户代码：

```
public class Client {

   //some client code here

   public static void main(String[] args) {
        new Thread() {
            @Override
            public void run() {
                long threadId = Thread.currentThread().getId();
                System.out.println("Client creator thread id: " + threadId);
                                Client c = new Client();
                                // some code to run client
            }

        }.start();
   }
} 
```

我多次运行这个类文件（通过直接在 IDE 中运行，或创建 bat 文件）。而且我注意到它们都在同一个线程上（相同的线程ID）。我无法解释为什么。

我认为我遇到的问题是：我不在同一个类中创建多个线程，而是多次运行这个类。虽然我认为这会产生奇怪的问题，但仍然无法解释原因。

请为我解释一下以及如何纠正这个问题。

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:08:31.840

可能是因为您每次都运行一个线程，并且在它结束后您`main()`再次运行该方法，这会创建另一个具有相同 ID 的线程。根据`getID()`方法中的文档，预计 id 的相似性，即*“当线程终止时，此线程 ID 可能会被重用”。* [阅读此处](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#getId%28%29)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:12:09.527

如果您在这样的 for 循环中生成线程：

```
 public class Client {

    public static void main(String[] args) {

        for (int i = 0; i < 10; i++) {

             new Thread() {
                 @Override
                 public void run() {
                     long threadId = Thread.currentThread().getId();
                     System.out.println("Client creator thread id: " + threadId);
                                     Client c = new Client();
                                     // some code to run client
                 }

             }.start();
        }
    }
 } 
```

您会在一个进程中发现许多具有不同 ID 的线程。如果你只是继续运行 main()，你只是在创建另一个只有一个线程的进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:55:30.643

如果您真的想测试/模拟多个客户端，那么您应该启动多个**进程**。因此，您也不必为创建线程而烦恼。实际上，客户端永远不会在同一个进程中运行（甚至不在同一台机器上？）。那不会让你理解这件事，但我会让你更接近现实。

# asp.net-mvc-3 - 在 Asp.Net / MVC 中引用缩小的内容

> ID：16104171
> 
> 赞同：1
> 
> 时间：2013-04-19T12:01:55.850
> 
> 标签：asp.net-mvc-3, visual-studio-2010, minify

我们的网页 (MVC) 中引用了数十个脚本。

如果我将所有脚本缩小并合并到一个文件中，要优化网站，我是否需要用新的组合文件更新每个网页中的那十几个引用？

如果是这样，是否有一种工具可以使用新文件自动执行所有网页中的脚本引用，或者必须手动执行？

这方面的任何参考都会有所帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:25:27.997

你可以试试**捆绑**

[http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

虽然这是 MVC 4 的特性，但您也可以在 MVC 3 中使用它。

*更多参考：*

[MSDN](http://msdn.microsoft.com/en-us/vs11trainingcourse_aspnetandvisualstudio_topic5.aspx)

[Nuget 路径](http://nuget.org/packages/Microsoft.AspNet.Web.Optimization/1.0.0)

# java - Spring Security - 不是通过 IP 而是通过域/子域进行身份验证？

> ID：16104172
> 
> 赞同：4
> 
> 时间：2013-04-19T12:02:03.997
> 
> 标签：java, spring, spring-security

我有一个基于 Spring 的 Web 服务，我想提供 Spring 安全性。它可以工作并且可以通过 USER 和 ADMIN 角色进行身份验证。但是，我有一个新要求，即我需要验证不是 USER 和 ADMIN 角色的请求，而是使用请求来自的子域。

通常，通过 IP 进行身份验证：

```
 <http use-expressions="true">
    <intercept-url pattern="/admin*"
        access="hasRole('admin') and hasIpAddress('192.168.1.0/24')"/>
    ...
  </http> 
```

但是，我的情况完全不同，我需要根据请求来自的域和子域进行身份验证。

喜欢：

```
jim.foo.com 
tim.foo.com 
```

其中 jim.foo.com 和 tim.foo.com 具有相同的 IP 地址。每个子域都单独进行身份验证。

可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-11-30T21:12:01.030

正如@franz-ebner 在对@zayagi 的回答的评论中所要求的，我可以在这里给出一个具体的完整示例。@zayagi 的答案是一个完美的答案 - 这只是为了帮助其他人处理特定的用例。

此示例是在 Spring Boot 1.1.6 和 Spring 4.0.x 时用 Java 8 编写的（Spring Boot 现在是 1.3.0 和 Spring 4.2，其中包含 Web 配置改进）。这是在 2014 年底写的，可能需要刷新，但按原样提供，因为它是被请求的，并且可能能够帮助其他人。我无法提供测试，因为它们中有我不想分享的特定 IP 地址；-)

第一个类定义了 spring 安全表达式（例如 isCompanyInternal()）并包括对 x-forwarded-for 标头的支持。使用此标头，您不应在所有情况下都信任它，因为任何人都可以添加它并且可能构成安全威胁。出于这个原因，只有某些内部 IP 范围受此标头信任。

```
 package org.mycompany.spring.security.web.acccess.expression;

    import org.springframework.security.core.Authentication;
    import org.springframework.security.web.FilterInvocation;
    import org.springframework.security.web.access.expression.WebSecurityExpressionRoot;
    import org.springframework.security.web.util.matcher.IpAddressMatcher;
    import org.springframework.util.Assert;

    import java.util.Optional;
    import java.util.stream.Stream;

    public class MyCompanyWebSecurityExpressionRoot extends WebSecurityExpressionRoot {
        public static final String LOCALHOST = "127.0.0.1";

        public static final String COMPANY_DESKTOPS = "-suppressed for example-";
        public static final String COMPANY_INTERNET_1 = "-suppressed for example-";
        public static final String COMPANY_INTERNET_2 = "-suppressed for example-";

        /**
         * See http://en.wikipedia.org/wiki/Private_network#Private_IPv4_address_spaces
         */
        public static final String RFC_1918_INTERNAL_A = "10.0.0.0/8";
        /**
         * See http://en.wikipedia.org/wiki/Private_network#Private_IPv4_address_spaces
         */
        public static final String RFC_1918_INTERNAL_B = "172.16.0.0/12";
        /**
         * See http://en.wikipedia.org/wiki/Private_network#Private_IPv4_address_spaces
         */
        public static final String RFC_1918_INTERNAL_C = "192.168.0.0/16";

        private IpAddressMatcher[] internalIpMatchers;
        private IpAddressMatcher trustedProxyMatcher;

        public MyCompanyWebSecurityExpressionRoot(Authentication a, FilterInvocation fi) {
            super(a, fi);
            setInternalIpRanges(RFC_1918_INTERNAL_A,
                    COMPANY_INTERNET_1,
                    COMPANY_INTERNET_2,
                    COMPANY_DESKTOPS,
                    RFC_1918_INTERNAL_B,
                    RFC_1918_INTERNAL_C,
                    LOCALHOST);
            setTrustedProxyIpRange(RFC_1918_INTERNAL_A);
        }

        public boolean hasAnyIpAddress(String... ipAddresses) {
            return Stream.of(ipAddresses)
                    .anyMatch(ipAddress -> new IpAddressMatcher(ipAddress).matches(request));
        }

        public boolean hasAnyIpAddressBehindProxy(String trustedProxyRange, String... ipAddresses) {
            String remoteIpAddress = getForwardedIp(trustedProxyRange).orElseGet(request::getRemoteAddr);
            return Stream.of(ipAddresses)
                            .anyMatch(ipAddress -> new IpAddressMatcher(ipAddress).matches(remoteIpAddress));
        }

        public boolean isCompanyInternal() {
            String remoteIpAddress = getForwardedIp(trustedProxyMatcher).orElseGet(request::getRemoteAddr);
            return Stream.of(internalIpMatchers)
                    .anyMatch(matcher -> matcher.matches(remoteIpAddress));
        }

        /**
         * <p>This specifies one or more IP addresses/ranges that indicate the remote client is from the company network.</p>
         *
         * <p>If not set, this will default to all of the following values:</p>
         *     <ul>
         *         <li>{@code RFC_1918_INTERNAL_A}</li>
         *         <li>{@code RFC_1918_INTERNAL_B}</li>
         *         <li>{@code RFC_1918_INTERNAL_C}</li>
         *         <li>{@code COMPANY_INTERNET_1}</li>
         *         <li>{@code COMPANY_INTERNET_2}</li>
         *         <li>{@code COMPANY_DESKTOPS}</li>
         *         <li>{@code LOCALHOST}</li>
         *     </ul>
         *
         * @param  internalIpRanges ip addresses or ranges. Must not be empty.
         *
         */
        public void setInternalIpRanges(String... internalIpRanges) {
            Assert.notEmpty(internalIpRanges, "At least one IP address/range is required");
            this.internalIpMatchers = Stream.of(internalIpRanges)
                    .map(IpAddressMatcher::new)
                    .toArray(IpAddressMatcher[]::new);
        }

        /**
         * <p>When checking for the <code>x-forwarded-for</code> header in the incoming request we will only use
         * that value from a trusted proxy as it can be spoofed by anyone. This value represents the IP address
         * or IP range that we will trust.</p>
         *
         * <p>The default value if this is not set is {@code RFC_1918_INTERNAL_A}.</p>
         *
         * @param  trustedProxyIpRange ip address or range. Must not be null.
         *
         */
        public void setTrustedProxyIpRange(String trustedProxyIpRange) {
            Assert.notNull(trustedProxyIpRange, "A non-null value is for trusted proxy IP address/range");
            this.trustedProxyMatcher = new IpAddressMatcher(trustedProxyIpRange);
        }

        private Optional<String> getForwardedIp(String trustedProxyRange) {
            return getForwardedIp(new IpAddressMatcher(trustedProxyRange));
        }

        private Optional<String> getForwardedIp(IpAddressMatcher trustedProxyMatcher) {
            String proxiedIp = request.getHeader("x-forwarded-for");
            if (proxiedIp != null && trustedProxyMatcher.matches(request.getRemoteAddr())) {
                return Optional.of(proxiedIp);
            }
            return Optional.empty();
        }

    } 
```

第二个类定义了您在配置安全性时注入的表达式处理程序。

```
 package org.mycompany.spring.security.web.acccess.expression;

    import org.springframework.security.access.expression.SecurityExpressionOperations;
    import org.springframework.security.authentication.AuthenticationTrustResolver;
    import org.springframework.security.authentication.AuthenticationTrustResolverImpl;
    import org.springframework.security.core.Authentication;
    import org.springframework.security.web.FilterInvocation;
    import org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler;

    public class MyCompanyWebSecurityExpressionHandler extends DefaultWebSecurityExpressionHandler {
        private static final AuthenticationTrustResolver TRUST_RESOLVER = new AuthenticationTrustResolverImpl();

        private String[] customInternalIpRanges;
        private String customTrustedProxyIpRange;

        @Override
        protected SecurityExpressionOperations createSecurityExpressionRoot(Authentication authentication, FilterInvocation fi) {
            MyCompanyWebSecurityExpressionRoot root = new MyCompanyWebSecurityExpressionRoot(authentication, fi);
            root.setPermissionEvaluator(getPermissionEvaluator());
            root.setTrustResolver(TRUST_RESOLVER);
            root.setRoleHierarchy(getRoleHierarchy());

            if (customInternalIpRanges != null) {
                root.setInternalIpRanges(customInternalIpRanges);
            }
            if (customTrustedProxyIpRange != null) {
                root.setTrustedProxyIpRange(customTrustedProxyIpRange);
            }

            return root;
        }

        /**
         * <p>Only set this if you want to override the default internal IP ranges defined within
         * {@link MyCompanyWebSecurityExpressionRoot}.</p>
         *
         * <p>See {@link MyCompanyWebSecurityExpressionRoot#setInternalIpRanges(String...)}</p>
         *
         * @param customInternalIpRanges ip address or ranges
         */
        public void setCustomInternalIpRanges(String... customInternalIpRanges) {
            this.customInternalIpRanges = customInternalIpRanges;
        }

        /**
         * Only set this if you want to override the default trusted proxy IP range set in
         * {@link MyCompanyWebSecurityExpressionRoot}.
         *
         * @param customTrustedProxyIpRange ip address or range
         */
        public void setCustomTrustedProxyIpRange(String customTrustedProxyIpRange) {
            this.customTrustedProxyIpRange = customTrustedProxyIpRange;
        }
    } 
```

最后，这是一起使用它们的示例：@Configuration public static class WebInternalSecurityConfig extends WebSecurityConfigurerAdapter {

```
 @Override
        public void configure(WebSecurity web) throws Exception {
            web.ignoring()
                    .antMatchers("/favicon.ico", "/robots.txt");
        }

        @Override
        protected void configure(HttpSecurity http) throws Exception {
            http
                .csrf().disable()
                .authorizeRequests()
                .expressionHandler(new MyCompanyWebSecurityExpressionHandler())
                    .anyRequest().access("isCompanyInternal()");
        }
    } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T12:21:04.050

除了定义在中的内置函数`SecurityExpressionRoot`及其子类之外，您还可以定义自己的函数`WebSecurityExpressionRoot`。您只需要扩展后者，添加您自己的函数，`request`以您喜欢的方式查看对象，然后将 Spring Security 配置为使用它而不是默认的 ( `WebSecurityExpressionRoot`)。方法如下：

1.  在一个子类中覆盖`DefaultWebSecurityExpressionHandler.createSecurityExpressionRoot()`，该子类构造您自己的`SecurityExpressionRoot`包含您的自定义函数的实现。
2.  创建此自定义处理程序的 bean，并`<expression-handler ref="yourCustomSecurityExpressionRootHandler">`在`<http>`config 元素中对其进行引用。

# magento - 无法在后端保存属性产品值？

> ID：16104178
> 
> 赞同：0
> 
> 时间：2013-04-19T12:02:27.057
> 
> 标签：magento, attributes

我有一个以编程方式为我创建属性的函数，如下所示：

```
 function createAttribute($code, $label, $attribute_type, $product_type,$attributeSetId)
    {
    $_attribute_data = array(
    'attribute_code' => $code,
    'is_global' => '1',
    'frontend_input' => $attribute_type, 
    'default_value_text' => '',
    'default_value_yesno' => '0',
    'default_value_date' => '',
    'default_value_textarea' => '',
    'is_unique' => '0',
    'is_required' => '0',
    'apply_to' => array($product_type), 
    'is_configurable' => '0',
    'is_searchable' => '0',
    'is_visible_in_advanced_search' => '0',
    'is_comparable' => '0',
    'is_used_for_price_rules' => '0',
    'is_wysiwyg_enabled' => '0',
    'is_html_allowed_on_front' => '1',
    'is_visible_on_front' => '1',
    'used_in_product_listing' => '0',
    'used_for_sort_by' => '0',
    'is_filterable' => '1',
    'frontend_label' => $label,

);
$model = Mage::getModel('catalog/resource_eav_attribute');
if (!isset($_attribute_data['is_configurable'])) {
    $_attribute_data['is_configurable'] = 0;
}
if (!isset($_attribute_data['is_filterable'])) {
    $_attribute_data['is_filterable'] = 0;
}
if (!isset($_attribute_data['is_filterable_in_search'])) {
    $_attribute_data['is_filterable_in_search'] = 0;
}
if (is_null($model->getIsUserDefined()) || $model->getIsUserDefined() != 0) {
    $_attribute_data['backend_type'] = $model->getBackendTypeByInput($_attribute_data['frontend_input']);
}

$model2=Mage::getModel('eav/entity_setup','core_setup');
$attributeGroupId = '';
if($attributeSetId)
{
     $attributeGroup=$model2->getAttributeGroup('catalog_product',$attributeSetId,'Noutati');

if(array_key_exists('attribute_group_id',$attributeGroup))
{
    $attributeGroupId = $attributeGroup['attribute_group_id'];
    $model->setAttributeGroupId($attributeGroupId);
}   
    $model->setAttributeSetId($attributeSetId);
}   

$model->addData($_attribute_data);
$model->setEntityTypeId(Mage::getModel('eav/entity')->setType('catalog_product')->getTypeId());
$model->setIsUserDefined(1);

try {
    $model->save();

    $attribute = Mage::getModel('eav/entity_attribute')->loadByCode('catalog_product',$code);
    $attributeId = $attribute->getId();
    assignAttributeToGroup($attributeId,$attributeGroupId,$attributeSetId);

} catch (Exception $e) { echo '<p>Sorry, error occured while trying to save the attribute. Error: '.$e->getMessage().'</p>'; }

 } 
```

以上功能取自本网站。我在我的脚本上调用这个函数如下：

```
 createAttribute('test', 'Label Test', "multiselect", "simple",'77'); 
```

现在您可以看到，我想为我的 magento 商店创建的所有属性都是多选下拉菜单，因此我使用以下函数为新创建的属性添加属性值：

```
 function addAttributeValue($arg_attribute, $arg_value)
{
    $attribute_model        = Mage::getModel('eav/entity_attribute');

    $attribute_code         = $attribute_model->getIdByCode('catalog_product', $arg_attribute);
    $attribute              = $attribute_model->load($attribute_code);

    if(!attributeValueExists($arg_attribute, $arg_value))
    {
        $value['option'] = array($arg_value,$arg_value);
        $result = array('value' => $value);
        $attribute->setData('option',$result);
        $attribute->save();
    }

    $attribute_options_model= Mage::getModel('eav/entity_attribute_source_table') ;
    $attribute_table        = $attribute_options_model->setAttribute($attribute);
    $options                = $attribute_options_model->getAllOptions(false);

    foreach($options as $option)
    {
        if ($option['label'] == $arg_value)
        {
            return $option['value'];
        }
    }

return false;
} 
```

我必须这样做，因为当我创建属性时，我不知道究竟会有什么值

这两个功能都可以完美运行，创建属性，将其添加到正确的属性集中，还正确添加了我想要的属性值，但我面临以下情况：

我创建了一个产品，将其添加到我使用上述函数添加新创建的属性的集合中，然后该属性出现在产品编辑页面的后端，但是每当我尝试为它保存一些东西时，它都不会保存。页面刷新，来自会话的消息已保存产品，但该产品不存在所选的属性值。实际上，我无法从产品后端编辑页面保存此属性的值

我在脚本运行后刷新了所有索引管理，但问题仍然存在。另外我需要提到的是，我以这种方式创建了超过 1000 个属性，每个属性至少有 4-5 个值，所以数据量很大......所以我需要让它以编程方式工作。如果有人可以给我一个提示，说明为什么上述功能无法正常运行，我将不胜感激。

非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:34:11.487

在不知道具体出了什么问题的情况下，我相信您的问题将通过使用负责处理目录 EAV 的类来解决，即[`Mage_Catalog_Model_Resource_Setup`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Catalog/Model/Resource/Setup.php#L35)- 以前称为`Mage_Catalog_Model_Resource_Eav_Mysql4_Setup`. 此类及其父类[`Mage_Eav_Model_Entity_Setup`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Eav/Model/Entity/Setup.php#L35)具有 CRUD 属性和任何枚举值所需的一切。

```
$setup = Mage::getResourceModel('catalog/setup','catalog_setup');
$setup->addAttribute(
    'catalog_product',
    'your_attr_code',
    array(
        'type'  => 'text',
        'label' => 'Test'
    )
); 
```

使用这个类的好处是它有一个`_prepareValues()`方法可以设置特定于目录实体属性（参考`catalog_eav_attribute`表）的默认参数以及所有 EAV 属性共有的参数（参考`eav_attribute`表和父`_prepareValues()`方法）。

了解**和示例的最佳来源是查看***Mage/Catalog/sql/*和*Mage/Catalog/data/*中的设置脚本。

# php - 仅按键的数字顺序排列值

> ID：16104186
> 
> 赞同：0
> 
> 时间：2013-04-19T12:03:02.627
> 
> 标签：php

我有一个这样的数组：

```
8:16, 9:8, 10:11, 11:5, 12:5, 13:13, 14:42 
```

我希望它是：

```
0:16, 1:8, 2:11 .... 
```

在 PHP 中。

我知道我可以做一个自己的功能。但我认为它应该是内置的。

我试过了：array_values

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:04:50.967

这个函数应该可以解决问题：

```
$array = array_values($array); 
```

见： http: [//php.net/array_values](http://php.net/array_values)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:13:43.207

请试试这个，我认为它是您的确切要求。

```
$arr = array('8:16', '9:8','10:11');

$i=0;
foreach($arr as $val){

    $arr1 = explode(':',$val);
    $arr2[] = $i.":".$arr1[1];
    $i++;
}
print_r($arr2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:22:41.653

利用

```
array_values($yourArray); 
```

我认为它应该可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T12:05:36.517

您可以使用`natsort()`

[文档](http://php.net/manual/en/function.natsort.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T12:36:49.117

我认为@Praveenkalal 怀疑你的意思，但我只会添加另一种选择：

```
$i = 0;
array_walk($array, function(&$v) use(&$i) {
  $v = preg_replace('/\d+:(\d+)/', ($i++).':$1', $v);
}); 
```

[运行代码](http://ideone.com/qaOIah)

或者，如果您的数组已经是零索引，就像我们假设的那样，这将起作用：

```
foreach($array as $key => &$val)
  $val = preg_replace('/\d+:(\d+)/', $key.':$1', $val); 
```

[运行代码](http://ideone.com/kSjAA6)

* * *

数组...有趣有趣有趣

只是为了澄清一下-没有内置函数，因为您所做的事情太具体了-如果您的数组值是键：值对，那么通常您会将它们映射到这样的数组-这就是我们都认为的[`array_values`](http://php.net/manual/en/function.array-values.php)原因充足的。

例如，如果您的数据采用以下格式：

```
$array = array(
  8  => 16, 
  9  => 8, 
  10 => 11,
 ...
); 
```

您将拥有完整的 php 内部功能。

# imagemagick - 使用 ImageMagick 从现有图像生成一堆类似宝丽来的照片

> ID：16104187
> 
> 赞同：1
> 
> 时间：2013-04-19T12:03:11.183
> 
> 标签：imagemagick

我希望能够拍摄 5 张 JPG 图像并使用 ImageMagick 对其进行处理，以创建一种将照片显示为类似宝丽来的照片的效果。

假设所有照片的纵横比相同，则需要将它们调整为相同大小，应用 10 像素的宝丽来边框，然后全部轻微旋转和偏移，以使顶部下方的图像在边缘部分可见。

旋转/偏移不需要是随机的 - 如果它比真正随机更容易，它可以为堆栈中的每个图像手动编码？

这是我想要达到的效果的一个例子：![一堆类似宝丽来的照片](https://i.stack.imgur.com/SHw3O.png)

有人可以帮助使用正确的参数吗 - 我假设我们想要使用转换？

编辑：我已经知道 ImageMagick 页面上包含的示例，但它并没有专门满足我的要求 - 他们克隆原始图像，他们不使用多个单独的图像。他们也没有很好地在每个示例中准确解释每个选项的作用 - 他们假设您已经花费数小时（或数天！）试验了数百万个可用选项。对于从未使用过该工具而无需大量工作的人来说，这有点困难。

```
convert thumbnail.gif \
    -bordercolor white  -border 6 \
    -bordercolor grey60 -border 1 \
    -bordercolor none  -background  none \
    \( -clone 0 -rotate `convert null: -format '%[fx:rand()*30-15]' info:` \) \
    \( -clone 0 -rotate `convert null: -format '%[fx:rand()*30-15]' info:` \) \
    \( -clone 0 -rotate `convert null: -format '%[fx:rand()*30-15]' info:` \) \
    \( -clone 0 -rotate `convert null: -format '%[fx:rand()*30-15]' info:` \) \
    -delete 0  -border 100x80  -gravity center \
    -crop 200x160+0+0  +repage  -flatten  -trim +repage \
    -background black \( +clone -shadow 60x4+4+4 \) +swap \
    -background none  -flatten \
    poloroid_stack.png 
```

...如果有人可以扩展此示例并向我展示如何修改它以达到我想要的结果，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T11:44:35.803

这是我发现的命令，它可以为我需要的东西提供一个很好的结果——感谢@Jim Lindstrom 让我走上了正确的轨道。

```
convert \
    img-5.jpg -thumbnail 300x200 -bordercolor white -border 10 \
    -bordercolor grey60 -border 1 -bordercolor none \
    -background none -rotate -4 \
    \
    \( img-2.jpg -thumbnail 300x200 -bordercolor white -border 10 \
       -bordercolor grey60 -border 1 -bordercolor none \
       -background none -rotate 6 \
    \) \
    \
    \( img-3.jpg -thumbnail 300x200 -bordercolor white -border 10 \
       -bordercolor grey60 -border 1 -bordercolor none \
       -background none -rotate -2 \
    \) \
    \
    \( img-1.jpg -thumbnail 300x200 -bordercolor white -border 10 \
       -bordercolor grey60 -border 1 -bordercolor none \
       -background none -rotate -4 \
    \) \
    \
    \( img-4.jpg -thumbnail 300x200 -bordercolor white -border 10 \
       -bordercolor grey60 -border 1 -bordercolor none \
       -background none -rotate 4 \
    \) \
    \
    -border 100x80 -gravity center +repage -flatten -trim +repage \
    -background black \( +clone -shadow 60x4+4+4 \) +swap -background none \
    -flatten stack.png 
```

这是我使用上述命令从图像中获得的输出：

![宝丽来堆栈](https://i.stack.imgur.com/yuNwP.png)

它还不完美，我还有一些我想做的调整，我将在一个单独的问题中询问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T15:30:07.703

“转换”的文档几乎完全显示了如何。[在http://www.imagemagick.org/Usage/thumbnails/#polaroid](http://www.imagemagick.org/Usage/thumbnails/#polaroid)上搜索“好看的一堆照片”

这是另一种方法，希望可以更清楚地说明如何在自己的照片中添加内容：

```
# create four images we want to use as our polaroid stack (I'm using the same one for all
# one, but you don't have to)
curl -O http://www.imagemagick.org/Usage/thumbnails/thumbnail.gif
cp thumbnail.gif thumbnail1.gif
cp thumbnail.gif thumbnail2.gif
cp thumbnail.gif thumbnail3.gif
cp thumbnail.gif thumbnail4.gif
rm thumbnail.gif

# You can easily see the recurring portion of this command. You could build 
# it up programmatically and then execute it, for however many images you want.
# I've also simplified the example in their docs by hard-coding some rotation
# angles. Feel free to get fancy, or just hard code an array of them and keep
# grabbing the next one.
convert \
   thumbnail1.gif \
   -bordercolor white  -border 6 \
   -bordercolor grey60 -border 1 \
   -bordercolor none  -background  none \
   -rotate 20  \
   -trim +repage \
   \
   \( \
   thumbnail2.gif \
   -bordercolor white  -border 6 \
   -bordercolor grey60 -border 1 \
   -bordercolor none  -background  none \
   -rotate -8 \
   -trim +repage \
   \) \
   -gravity center \
   -composite \
   \
   \( \
   thumbnail3.gif \
   -bordercolor white  -border 6 \
   -bordercolor grey60 -border 1 \
   -bordercolor none  -background  none \
   -rotate 3 \
   -trim +repage \
   \) \
   -gravity center \
   -composite \
   \
   \( \
   thumbnail4.gif \
   -bordercolor white  -border 6 \
   -bordercolor grey60 -border 1 \
   -bordercolor none  -background  none \
   -rotate -17 \
   -trim +repage \
   \) \
   -gravity center \
   -composite \
   \
   -crop 200x160+0+0  +repage  -flatten  -trim +repage \
   -background black \( +clone -shadow 60x4+4+4 \) +swap \
   -background none  -flatten \
   \
   poloroid_stack.png 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-13T19:58:28.457

我使用 Simpon Hampel 代码，对此进行了一些更改：

[如何在imagemagick中使用阴影边缘图像？](https://stackoverflow.com/questions/26340280/how-margin-image-with-shadow-in-imagemagick/26347849)

请检查一下..

# ios - 在 Phonegap iOS 中使用全屏的外部链接

> ID：16104191
> 
> 赞同：0
> 
> 时间：2013-04-19T12:03:20.927
> 
> 标签：ios, facebook, cordova, inappbrowser

我试图在我的 iOS Phonegap 应用程序中打开指向 facebook 的外部链接，但它不会占据整个页面。理想情况下，我希望它是一种 iFrame，导航将保留。

目前我有一个分享按钮，可以使用应用内浏览器打开 Facebook。这是代码：

```
 function shareonfb()
    {
        photoid = sessionStorage.PhotoId;
        filename = sessionStorage.PhotoFilename;

        postUrl  = "http://mysitelink.com/page.php?photoid="+photoid;

        imageUrl = "http://mysitelink.com/pages/"+filename;

        var sSiteUrl="http://www.facebook.com/sharer.php?s=100&u="+postUrl; 

        var ref = window.open(sSiteUrl, '_self', 'location=yes,');

    }

<input id="btnshare" type="button" value="Share" data-icon="arrow-r"
                data-inline="true" onclick="javascript:{shareonfb();};" /> 
```

我的问题是 Facebook 接管，无法返回应用程序。有更好的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T07:15:02.957

您将需要设置一个退出事件来侦听来自应用内浏览器的 window.close 。

这些是来自 phonegap doco 的事件

*   loadstart - InAppBrowser 开始加载 URL 时触发的事件
*   loadstop - InAppBrowser 完成加载 URL 时触发的事件
*   loaderror - 当 InAppBrowser 在加载 URL 时遇到错误时触发的事件

*   ** exit - InAppBrowser 窗口关闭时触发的事件**

所以像 .

```
ref.addEventListener('exit', function() { ref.close(); }); 
```

应该做的伎俩。

# qt - foreach 不在 QPair 列表上工作

> ID：16104192
> 
> 赞同：9
> 
> 时间：2013-04-19T12:03:22.090
> 
> 标签：qt

使用 Qt，我希望这段代码能够工作：

```
QList<QPair<QString, QString>> list;
foreach (QPair<QString, QString> pair, list)
{
} 
```

相反，我得到了错误：

> 'pair' : 未声明的标识符

使用 a`typedef`我可以让它工作，但这不是我想要的（除非这是唯一有效的东西）：

```
typedef QPair<QString, QString> MyPair;
QList<MyPair> list;
foreach (MyPair pair, list)
{
} 
```

谁能解释为什么第一个 foreach 不能编译？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-19T12:27:27.690

这不是 foreach 错误。是声明错误。你声明了这样的列表：

```
QList<QPair<QString, QString>> list; 
```

虽然它应该这样：

```
QList<QPair<QString, QString> > list; 
```

只需在循环外声明 QPair ：

```
QPair<QString,QString> pair;
foreach(pair,list){

} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-19T12:39:53.317

不能在包含多个模板参数的 qt foreach 语句中使用模板类，因为逗号分隔符与宏中的逗号分隔符冲突。

```
#define add( a, b ) (a + b)

template < typename T1, typename T2 >
struct DATA
{
  static const T1 val1 = 1;
  static const T2 val2 = 2;
};

// Usage
const int c = add( 1, 2 ); // OK
const int d = add( DATA< int, int >::val1 , DATA< int, int >::val2 ); // FAIL 
```

因为宏 add 会将“DATA< int”解释为第一个参数，将“int >::val1”解释为第二个参数，依此类推。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T17:13:16.280

以上答案的一些解释......如果你的编译器接受

```
 QList<QPair<QString, QString>> list; 
```

在这样的声明中没有给出错误，主题施法者错误的原因是不同的，并且确实与声明必须在 foreach() 循环之外完成的事实有关。这在 QT 文档中有解释。

关于 >> 和 >>... 这是老故事，最新的 GCC（所以 linux/mac）认为这是一个语法错误，因为它不符合标准。>> 在 GCC 方式中被视为具有所有后续错误的操作员..

# unit-testing - 在 Grails 2 中使用 build-test-data 插件

> ID：16104195
> 
> 赞同：2
> 
> 时间：2013-04-19T12:03:25.473
> 
> 标签：unit-testing, grails, groovy, grails-plugin

我正在尝试使用[build-test-data 插件](http://grails.org/plugin/build-test-data)（v. 2.0.4）在 Grails 2.1.4 应用程序的单元测试中构建测试数据。

该应用程序具有以下域类

```
class Brochure {

  static constraints = {}

  static hasMany = [pageTags: PageTag]    
}

class PageTag {

    static constraints = {
    }

    static belongsTo = [brochure: Brochure]
} 
```

然后在我的单元测试中，我尝试构建一个`PageTag`with

```
@Build([Brochure, PageTag])
class BrochureTests {

    void testSomething() {
       PageTag pageTag = PageTag.build()
    }
} 
```

但它失败并出现错误

> groovy.lang.MissingMethodException：没有方法签名：btd.bug.Brochure.addToPageTags() 适用于参数类型：(btd.bug.PageTag) 值：[btd.bug.PageTag : (unsaved)] 可能的解决方案：getPageTags ()

[我的示例看起来与插件文档](https://bitbucket.org/tednaleid/grails-test-data/wiki/UnitTestSupport)中显示的完全相同，所以我不知道为什么这不起作用。[此处](https://bitbucket.org/tednaleid/grails-test-data/issue-attachment/69/tednaleid/grails-test-data/1366373541.27/69/btd-bug.zip)提供了演示该问题的示例应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T01:03:08.293

## 已在 2.0.5 版中修复

我评论了链接的 github 问题，但这是因为grails注释如何工作的[性能“修复” 。](http://jira.grails.org/browse/GRAILS-9637)`@Mock`

此更改几乎删除了使 BTD 可以在单元测试中工作的所有链接代码。

目前唯一的解决方法是`@Mock`为构建有效对象所需的域图部分中的所有域对象添加显式注释。

更改后测试代码会更快，这很好，但是在他们的测试中了解和维护这些关系给开发人员带来了更大的负担（这是 BTD 试图避免的 :)。

# titanium - fedora 13 上安装tideSDK developer 1.4.2 时出错

> ID：16104201
> 
> 赞同：2
> 
> 时间：2013-04-19T12:03:44.743
> 
> 标签：titanium, tidesdk

我已经在我的机器上安装了tideSDK 1.3.1-beta 文件路径是“user/.tidesdk”.. 然后尝试安装tideSDK developer 1.4.2 我收到以下错误消息。

**无法加载文件：/home/mareeswari/TideSDK-Developer-1.4.2-linux-x86/runtime/1.3.1-beta/libtide.so，错误：/usr/lib/libstdc++.so.6：版本`未找到 GLIBCXX_3.4.15'（/home/mareeswari/TideSDK-Developer-1.4.2-linux-x86/runtime/1.3.1-beta/libtide.so 需要）**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:34:09.353

这是一个有效的崩溃。这是因为 TideSDK 还不支持 fedora / redhat 系列。底层二进制文件是为 Ubuntu 编译的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-20T06:08:20.330

我已经成功让 Tide Developer 在 Fedora 18 上工作。

我遇到了类似的问题，但是它抱怨 libpng12，所以安装了 libpng12 和 libpng12-devel，它工作正常。

希望这可以帮助某人

# lua - 电晕sdk得分？

> ID：16104207
> 
> 赞同：0
> 
> 时间：2013-04-19T12:03:54.733
> 
> 标签：lua, coronasdk

我正在尝试制作一个评分系统，显示每个场景的所有时间得分，当用户完成一个场景时，该场景的得分被添加到所有时间得分中。

我在编译器中遇到 1 个错误：尝试对字段“分数”执行“算术”

来自主 lua 的代码：不包含错误，但不确定是否正确。 `-- 1 Clue 1 Word`

 ````
display.setStatusBar (display.HiddenStatusBar)

local storyboard = require ( "storyboard" )
storyboard.gotoScene("menu") 

storyboard.state = {}
storyboard.state.score = 0
storyboard.state.score = display.newText(storyboard.state.score, 250, 20, "ARIAL", 16)

<code> 
```

The error appears in the line: storyboard.state.score = storyboard.state.score + 1` 

```
<code>
if(correct == #L1) then
    --alert()
    print ("CORRECT "..#L1)
    line.isVisible = false
    storyboard.gotoScene( "scene2", "slideLeft", 500)
    storyboard.state.score = storyboard.state.score + 1
    storyboard.removeScene( "scene1" )
end

end 
```

结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:09:52.060

为什么要`storyboard.state.score`分配两次？

```
storyboard.state.score = 0
storyboard.state.score = display.newText(storyboard.state.score, 250, 20, "ARIAL", 16) 
```

* * *

**更新：**

```
storyboard.state = {score = 0}
score = display.newText(storyboard.state.score, 250, 20, "ARIAL", 16) 

storyboard.gotoScene( "scene2", "slideLeft", 500) 
storyboard.state.score = storyboard.state.score + 1 
storyboard.removeScene( "scene1" ) 
```

# iphone - 应用内购买产品

> ID：16104209
> 
> 赞同：0
> 
> 时间：2013-04-19T12:03:57.353
> 
> 标签：iphone, app-store, in-app-purchase, app-store-connect

我正在处理客户项目。我需要测试我的产品以进行应用内购买。我通过我的帐户在 iTunes Connect 中创建了应用程序详细信息。我使用了我的客户端应用程序名称、图标等所有内容。但如果最后我从客户帐户上传应用程序，应用程序名称、图标、可用日期等是否会出现任何错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T10:21:30.440

iTunesConnect 中的应用程序名称类似于域名：一旦一个名称在一个帐户上“注册”（即用于应用程序），其他人就无法在 iTunesConnect 上创建具有相同名称的应用程序。您没有提供有关您看到的错误的详细信息，所以我想这可能是您的问题。

要为您的客户使用相同的应用程序名称，您需要从您的 iTunesConnect 帐户中删除该应用程序。一段时间后——不知道多久——该应用程序名称将再次可供其他人使用。然后，您可以将其用于客户的应用程序。

底线：永远不要在 iTunesConnect 中使用真实姓名，即客户给应用程序的真实姓名！

# android - 返回上一页的按钮

> ID：16104214
> 
> 赞同：1
> 
> 时间：2013-04-19T12:04:15.853
> 
> 标签：android, button, back

我想制作一个按钮，允许用户在单击时返回上一页。就像 android 设备上的物理后退按钮一样工作。我应该在 java 文件中添加什么？

这是代码（xml）：

```
<Button
        android:id="@+id/button00"
        android:layout_width="80dp"
        android:layout_height="40dp"
        android:layout_marginTop="5dp"
        android:layout_marginBottom="5dp"
        android:layout_marginLeft="10dp"
        android:text="@string/st_pp"
        android:textColor="#01646d"
        android:background="#fef200"/> 
```

这是代码（java）：

```
bn00.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent it1 = new Intent(getApplicationContext(), Main.class);
                startActivity(it1);
            }

        }); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T12:08:57.143

回到以前的活动使用`finish()`方法。但请注意，`finish()`在您调用当前活动时，以前的活动不包含。

代码 ：

```
bn00.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View arg0) {

                finish();
            }

        }); 
```

使用上面的代码，你可以去你以前的活动。您也可以调用类似`finish()`的`onKeyDown()`方法..

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
       finish();
        return true;
    }

    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:06:39.663

你想要的是`finish()`在你当前的`Activity`. 它将`Activity`从堆栈中删除当前，显示前一个，因此它将用作后退按钮。

```
bn00.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View arg0) {
        finish();
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T12:07:06.247

您可以只调用当前活动的完成（），它应该回到上一个活动。

有关更多信息，请参阅[javadoc](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T12:16:07.723

该`finish();`方法将结束当前活动并显示上一个活动。

但是该`onBackPressed();`方法将按下后退按钮。但是默认实现（没有 Override）`finish();`无论如何都会调用该方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T12:05:57.973

```
bn00.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                //Intent it1 = new Intent(getApplicationContext(), Main.class);
                //startActivity(it1);

                finish(); //just add this
            }

        }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T13:29:00.977

而不是“bn00”在您的代码中写“button00”，因为您已将“button00”设置为您的 xml 中的按钮 ID。正如其他人所说，调用`finish()`内部`onClick()`方法。这将结束您当前的活动并加载您之前尚未完成的活动。

```
buttonn00.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View arg0) {

            finish();
        }

    }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-19T12:07:32.453

Android有一个硬件后退按钮可以完成这项工作。所以我建议不要有一个做同样的按钮。当按下硬件后退按钮时，后退堆栈中的当前活动被弹出、销毁，并且后退堆栈中的前一个活动获得焦点。

您在单击按钮时调用finish()，如下所示

```
 bn00.setOnClickListener(new OnClickListener(){

        @Override
        public void onClick(View arg0) {
           finish();
        }

    }); 
```

# c# - 我在现有 WCF 服务中实现了一个接口，我无法为其添加引用

> ID：16104215
> 
> 赞同：4
> 
> 时间：2013-04-19T12:04:19.507
> 
> 标签：c#, asp.net, wcf

我有`ASDService.svc`：

```
 namespace StatusSimulator
 {
      [ServiceContract]
      public class ASDService
      {
           [OperationContract]
           public void DoWork()
      }

      [ServiceContract]
      public interface IScheduleTables
      {
            [OperatonContract]
            string getTable(string l, int r, int c)
            [OperatonContract]
            string getTable(string test)
            [OperatonContract]
            string createTable(List<string> lst, int r, int bal)
      }

      public class ScheduleTables:IScheduleTables
      {
               //Interface Implementation
      }
 } 
```

`web.config`：

```
 <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="NewBehavior0">
          <serviceMetadata httpGetEnabled="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <bindings>
      <basicHttpBinding>
        <binding name="NewBinding0" />
      </basicHttpBinding>
    </bindings>
    <services>
      <service behaviorConfiguration="NewBehavior0" name="StatusSimulator.ASDService">
        <endpoint address="http://localhost:2405/ASDService.svc" binding="basicHttpBinding"
          bindingConfiguration="NewBinding0" name="ASDEndpoint" contract="StatusSimulator.ASDService" />
        <endpoint address="http://localhost:2405/ASDService.svc" binding ="basicHttpBinding"
          bindingConfiguration="NewBinding0" name="ScheduleTableEndPoint" contract="StatusSimulator.IScheduleTables" />
      </service>
    </services>
  </system.serviceModel> 
```

我尝试过的绝对不会将接口暴露给服务。我唯一能看到的是`ASDService.DoWork`。如何在预先存在的服务中实现其他类或接口？

我在配置中尝试了两个服务，多个端点。我尝试将接口嵌套在 ASDService 中。我在这里阅读的教程和帖子比我想说的要多。当它坐下来时，我收到了错误

> 在服务“ASDService”实施的合同列表中找不到合同名称“StatusSimulator.IScheduleTables”。

我很困惑，没有想法，如果这种情况继续下去，我将需要专业的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T12:11:26.707

您不应该将服务合同（在具体类上定义`ADsService`）与另一个服务合同 ( `IScheduleTables`) 的实现混为一谈。

我建议你有**两个不同的服务契约**作为接口（`IASDService`和`IScheduleTables`），然后**是一个实现这两个接口的具体类**——像这样：

```
namespace StatusSimulator
{
      [ServiceContract]
      public interface IASDService
      {
           [OperationContract]
           public void DoWork()
      }

      [ServiceContract]
      public interface IScheduleTables
      {
            [OperatonContract]
            string getTable(string l, int r, int c)
            [OperatonContract]
            string getTable(string test)
            [OperatonContract]
            string createTable(List<string> lst, int r, int bal)
      }

      public class ServiceImplementation : IADSService, IScheduleTables
      {
         // implement both interfaces here...
      }
 } 
```

至于资源：我会用这些作为初学者：

*   [这是关于 WCF 的完整 MSDN 文档](http://msdn.microsoft.com/en-us/library/dd456779.aspx)

然后是几本好书——最著名的是Michele Leroux Bustamante 的《 [Learning WCF 》。](https://rads.stackoverflow.com/amzn/click/com/0596101627)她涵盖了所有必要的主题，并且以一种非常容易理解和平易近人的方式。这将教您编写高质量、有用的 WCF 服务所需的一切——基础知识、中间主题、安全性、事务控制等等。

# jquery - jQuery UI Accordion 在加载时“跳跃”

> ID：16104216
> 
> 赞同：2
> 
> 时间：2013-04-19T12:04:25.070
> 
> 标签：jquery, user-interface, accordion

我刚刚完成了一个大学网页设计/平面设计课程的作品集网站，我正在使用 jQuery UI 手风琴作为我的导航部分。[我的网站已经上线，你可以点击这里查看。](http://www.brookecbenson.com)

如果您单击“工作”，手风琴就会折叠起来，但您会注意到它会稍微“跳跃”到位。我似乎无法弄清楚出了什么问题。我尝试在 java 脚本中将 autoHeight 更改为 false，但它什么也没做。

这是我的 HTML 和 CSS 的一个小提琴，但我注意到它以与我的实时站点不同的方式呈现跳转.. [http://jsfiddle.net/jNYAc/](http://jsfiddle.net/jNYAc/)

我目前拥有的 jQuery 代码非常简单：

```
$(function () {
    $(".accordion").accordion({
        active: false,
        collapsible: true
    });
}); 
```

如果有人有任何建议，我将不胜感激！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:45:37.507

我不确定为什么会这样，但是如果我添加`overflow: hidden`到容器 div ( `<div class="nav">`)，那么跳转就消失了。我还删除了`height`声明。

我的猜测是，当手风琴打开时 div 会改变宽度，这会强制“跳跃” - 通过添加`overflow:hidden`，宽度并不重要，因为 UI 只是忽略了`<ul>`它内部的宽度。

注意：我直接在 devtools 中的页面上执行此操作，而不是 jsfiddle。

# php - 有人可以帮我简化这些回声语句吗？

> ID：16104217
> 
> 赞同：0
> 
> 时间：2013-04-19T12:04:25.123
> 
> 标签：php, echo

```
 echo $User->FirstName; 
 echo T(' '); 
 echo $User->Surname; 
 echo T(' '); 
 echo T('(');
 echo UserAnchor($User); 
 echo T(')');  
 echo T(' ');
 echo $User->Company; 
```

我意识到这是一团糟，肯定不是做几个回声语句的方法。但它给出了我想要的布局。

有没有更好的写法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:09:12.890

你可以像下面这样只用一个回声语句..

```
echo "$User->FirstName  $User->Surname (".UserAnchor($User).")  $User->Company"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:06:24.373

您可以像这样连接单独的调用：

```
echo $User->FirstName . T(' ') . $User->Surname . T(' ') . T('(') . 
UserAnchor($User) . T(')') . T(' ') . $User->Company 
```

`T`如果是有效的函数调用，您只能执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:08:07.227

```
echo $User->FirstName. T(' '). $User->Surname T(' '). T('('). 
UserAnchor($User). T(')'). T(' '). $User->Company; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T12:08:16.940

```
echo $User->FirstName.T(' ').$User->Surname; echo T(' ').T('(').UserAnchor($User).T(')'); echo T(' ').$User->Company; 
```

# c# - 在 C# 中执行参数化查询时出现 ORA-01745 错误

> ID：16104218
> 
> 赞同：15
> 
> 时间：2013-04-19T12:04:28.740
> 
> 标签：c#, .net, oracle

我正在做类似的事情

```
...
OracleCommand oCommand = new OracleCommand();
oConnection.Open();
oCommand.Connection = oConnection;
oCommand.CommandText = "SELECT * FROM employees WHERE user = :User";
oCommand.Parameters.AddWithValue(":Name", "Employee1");

DbDataReader dbRdr = oCommand.ExecuteReader(); 
```

那么这会引发一个异常：

> ORA-01745: 无效的主机/绑定变量名

编辑：连接字符串如下所示：

```
"Data Source=orcl;Persist Security Info=True;User ID=user_id;Password=pwd;Unicode=True" 
```

之后没有错误，`oConnection.Open();`所以我认为我的连接字符串是正确的。

我在哪一部分犯了错误？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-19T12:09:13.753

> **ORA-01745** : 无效的主机/绑定变量名
> 
> **原因**：绑定变量或 INTO 规范中的冒号后跟不适当的名称，可能是保留字。
> 
> **行动**：更改变量名称并重试操作。

从[这里](http://ora-01745.ora-code.com/)

要检查什么是保留字，请单击[此处](http://docs.oracle.com/cd/B19306_01/em.102/b40103/app_oracle_reserved_words.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:14:21.453

环绕一个 oracle 连接`using`块并提供正确的连接字符串。

```
using (OracleConnection con = new OracleConnection(connectionString)) {
    OracleCommand oCommand = new OracleCommand(queryString, connection);
    ....
} 
```

# iphone - MPMoviePlayerController 没有播放视频

> ID：16104223
> 
> 赞同：0
> 
> 时间：2013-04-19T12:04:46.657
> 
> 标签：iphone, ios, objective-c, xcode

我正在使用图像匹配器 sdk`MPMoviePlayerController`来在匹配后播放视频。

在`NSLog`视频中是过程但不是播放。

这里 .m 文件`

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
@synthesize moviePlayer;
- (void)viewDidLoad
{
    [super viewDidLoad];
   _cvView = [[ImageMatcher alloc] initWithAppKey:@"apikey" useDefaultCamera:TRUE];
    _cvView.matcherDelegate = self;
    [_cvView start];
    [_cvView setEnableMedianFilter:YES];
    [_cvView setImagePoolMinimumRating:0];
    [_cvView setMatchMode:matcher_mode_All];
    bool value = [_cvView addImage:[UIImage imageNamed:@"pic2.jpeg"] withUniqeID:[NSNumber numberWithInt:20]];   
}
-(void) viewDidAppear:(BOOL)animated
{
   [self presentViewController:_cvView animated:YES completion:nil];
}
-(void) imageRecognitionResult:(int)uId
{
    if (uId == 20) {
        [self startPlayingVideo2:nil];
        NSLog(@"ID = %d",uId);
    }
}
- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}
-(void) startPlayingVideo1:(id)paramSender{
    NSLog(@"function startPlayingVideo make");
    NSBundle *mainBundle = [NSBundle mainBundle];
    NSString *urlAsString = [mainBundle pathForResource:@"test1" ofType:@"mp4"];
    NSURL *url = [NSURL fileURLWithPath:urlAsString];
    if(self.moviePlayer != nil){
        NSLog(@"if 1 make");
        [self stopPlayingVideo:nil];
    }
    self.moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
    if(self.moviePlayer != nil){
        NSLog(@"if 2 make");
        [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(videoHasFinishedPlaying:) name:MPMoviePlayerPlaybackDidFinishNotification object:self.moviePlayer];
        moviePlayer.view.frame = CGRectMake(0, 0, 1024, 760);
        [self.view addSubview:self.moviePlayer.view];
        [self.moviePlayer setFullscreen:YES animated:YES];
        [self.moviePlayer play];
    }else{
        NSLog(@"fail");
    }
}
-(void) startPlayingVideo2:(id)paramSender{
    NSLog(@"function startPlayingVideo make");
    NSBundle *mainBundle = [NSBundle mainBundle];
    NSString *urlAsString = [mainBundle pathForResource:@"sample_mpeg4" ofType:@"mp4"];
    NSURL *url = [NSURL fileURLWithPath:urlAsString];
    if(self.moviePlayer != nil){
        NSLog(@"if 1 make");
        [self stopPlayingVideo:nil];
    }
    self.moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
    if(self.moviePlayer != nil){
        NSLog(@"if 2 make");
        [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(videoHasFinishedPlaying:) name:MPMoviePlayerPlaybackDidFinishNotification object:self.moviePlayer];
        moviePlayer.view.frame = CGRectMake(0, 0, 1024, 760);
        [self.view addSubview:self.moviePlayer.view];
        [self.moviePlayer setFullscreen:YES animated:YES];
        [self.moviePlayer play];
    }else{
        NSLog(@"fail");
    }
}
-(void) stopPlayingVideo:(id)paramSender{
    if (self.moviePlayer != nil) {
        NSLog(@"stopPlayingVideo on");
        [[NSNotificationCenter defaultCenter]removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:self.moviePlayer];
        [self.moviePlayer stop];
        if([self.moviePlayer.view.superview isEqual:self.view]){
            [self.moviePlayer.view removeFromSuperview];
        }
    }
}
-(void) videoHasFinishedPlaying:(NSNotification *)paramNotification{
    NSNumber *reason = [paramNotification.userInfo valueForKey:MPMoviePlayerPlaybackDidFinishReasonUserInfoKey];
    if (reason != nil) {
        NSInteger reasonAsInteger = [reason integerValue];
        switch (reasonAsInteger){
            case MPMovieFinishReasonPlaybackEnded:{
                NSLog(@"MPMovieFinishReasonPlaybackEnded");
                break;
            }
            case MPMovieFinishReasonPlaybackError:{
                NSLog(@"MPMovieFinishReasonPlaybackError");
                break;
            }
            case MPMovieFinishReasonUserExited:{
                NSLog(@"MPMovieFinishReasonUserExited");
                break;
            }
        }
        NSLog(@"finish reason = %ld", (long)reasonAsInteger);
         [self stopPlayingVideo:nil];
    }
}
@end
` 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:09:33.117

添加`prepareToPlay`您的代码（准备播放电影播放器​​。（必需））'

```
[self.moviePlayer prepareToPlay];
[self.moviePlayer play]; 
```

> 要为播放准备新的电影播放器​​，请调用 MPMediaPlayback 协议参考中描述的 prepareToPlay 方法。

# java - 当登录页面除了用户名和密码之外还有更多字段时，如何实现 Spring 安全性？

> ID：16104228
> 
> 赞同：8
> 
> 时间：2013-04-19T12:05:02.437
> 
> 标签：java, spring, spring-mvc, spring-security

我有一个登录页面，用户需要输入以下信息 VIN 号码、电子邮件、邮政编码和 accessCode，他们将从不同的应用程序中获得这些信息。

因此，要验证用户，我需要自定义`UserDetailsService`类中的所有信息，然后调用一个过程来验证用户。

但是我看到当我实现`UserDetailsService`下面的类似

```
@Component
 public class LoginService implements UserDetailsService {
@Autowired
LoginStoredProcedureDao loginStoredProcedureDao;

public Map<String, Object> verifyLogin(LoginDetails details) {
    return loginStoredProcedureDao.verifyLogin(details);

}
@Override
public UserDetails loadUserByUsername(String username)
        throws UsernameNotFoundException {
    // TODO Auto-generated method stub
      //verifyLogin();
    return null;
}

} 
```

loginDetails 对象如下所示

```
public class LoginDetails {
String vin;
String email;
String zipcode;
String accessCode;
} 
```

在上述情况下如何使用spring security。在这里，用户需要提供所有信息来验证他自己。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-22T20:02:44.907

[`UserDetailsService`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/core/userdetails/UserDetailsService.html)验证[`Authentication`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/core/Authentication.html)令牌不是责任。这就是 an[`AuthenticationProvider`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/authentication/AuthenticationProvider.html)所做的。

所以首先让你的实现[`UserDetailsService`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/core/userdetails/UserDetailsService.html)从数据库中加载用户的所有数据的单一责任`login`：

```
@Component
public class UserDetailsServiceImpl implements UserDetailsService {

    private final UserRepository userRepository;

    @Autowired
    public UserDetailsServiceImpl(UserRepository userRepository) {
        this.userRepository = userRepository;
    }

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        User user = null;
        try {
            user = userRepository.findByUsername(username);
        } catch (NotFoundException e) {
            throw new UsernameNotFoundException(String.format("No user found for username %s!", username);
        }
        retrun new UserDetailsImpl(user);
    }
} 
```

而不是从您需要实现的登录表单中截取其他参数[`AuthenticationDetailsSource`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/authentication/AuthenticationDetailsSource.html)。扩展可能是个好主意[`WebAuthenticationDetails`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/authentication/WebAuthenticationDetails.html)，但您可以只使用[`AuthenticationDetailsSource`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/authentication/AuthenticationDetailsSource.html).

```
@Component
public class WebAuthenticationDetailsSourceImpl implements AuthenticationDetailsSource<HttpServletRequest, MyWebAuthenticationDetails> {

    @Override
    public MyWebAuthenticationDetails buildDetails(HttpServletRequest context) {
        // the constructor of MyWebAuthenticationDetails can retrieve
        // all extra parameters given on a login form from the request
        // MyWebAuthenticationDetails is your LoginDetails class
        return new MyWebAuthenticationDetails(context);
    }
} 
```

[`AuthenticationProvider`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/authentication/AuthenticationProvider.html)并通过实现接口本身或扩展[`AbstractUserDetailsAuthenticationProvider`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/authentication/dao/AbstractUserDetailsAuthenticationProvider.html)或来实现您自己的验证[`DaoAuthenticationProvider`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/authentication/dao/DaoAuthenticationProvider.html)：

```
@Component
public class UserDetailsAuthenticationProviderImpl extends AbstractUserDetailsAuthenticationProvider {

    @Override
    public Authentication authenticate(Authentication authentication) throws AuthenticationException {
        MyWebAuthenticationDetails detais = (MyWebAuthenticationDetails) authentication.getDetails();
        // verify the authentication details here !!!
        // and return proper authentication token (see DaoAuthenticationProvider for example)
    }
} 
```

比你只需要将你的实现传递给[`AuthenticationManager`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/authentication/AuthenticationManager.html)and [`UsernamePasswordAuthenticationFilter`](http://static.springsource.org/spring-security/site/docs/3.1.x/apidocs/org/springframework/security/web/authentication/UsernamePasswordAuthenticationFilter.html)。

```
<util:list id="authenticationProviders">
    <ref bean="userDetailsAuthenticationProviderImpl" />
</util:list>

<!-- 
    This bean MUST have this exact ID to be the default authenticationManager!
    This is required prior Spring 3.1, as authentication-manager-ref is not
    present in sec:http element before!
 -->
<bean id="org.springframework.security.authenticationManager"
    name="authenticationManager"
    class="org.springframework.security.authentication.ProviderManager"
    c:providers-ref="authenticationProviders" />

<bean id="usernamePasswordAuthenticationFilter"
    class="org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter"
    p:authenticationManager-ref="authenticationManager"
    p:authenticationDetailsSource-ref="webAuthenticationDetailsSourceImpl" />

<sec:http authentication-manager-ref="authenticationManager">
    <sec:custom-filter position="FORM_LOGIN_FILTER" ref="usernamePasswordAuthenticationFilter" />
</sec:http> 
```

希望这可以帮助！

PS考虑构造函数注入而不是字段注入！它更具可测试性，并且更好地说明了类的合同。请参阅[此讨论](https://twitter.com/olivergierke/status/320135513560465410)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-22T09:26:17.177

首先，我会以不同的方式解决您的问题。我会做一个多步骤的身份验证。第一种是传统的用户名/密码登录，使用 Spring Security 的默认模型。第二步是显示另一个必须由用户填写的表单，以提供您的应用程序想要强制执行的身份验证的其他详细信息。

无论如何，如果您想继续自定义 Spring 安全模型以在一个步骤中询问有关登录的更多详细信息。按照@Petr 上一个答案中的步骤参考。然后要访问 UserDetailsS​​ervice 类中的会话属性，请使用Spring 提供的[http://static.springsource.org/spring/docs/2.0.8/api/org/springframework/web/context/request/RequestContextHolder.html](http://static.springsource.org/spring/docs/2.0.8/api/org/springframework/web/context/request/RequestContextHolder.html)类.

您可以访问`currentRequestAttributes()`，它返回一个`RequestAttributes`对象。您可以查询 RequestAttributes 对象以从所需范围获取所需属性。

注意：这是一个静态方法，这意味着它对单元测试不友好。

`ServletRequestAttributes`如果您想访问底层，您还可以将 RequestAttributes 向下转换为`HttpServletRequest`

希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T12:10:38.507

[这](https://stackoverflow.com/questions/10074308/how-to-pass-an-additional-parameter-with-spring-security-login-page)是您的答案，您需要实现自己的过滤器并覆盖默认过滤器，以便将参数添加到登录表单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-08T09:09:30.233

谢谢。我创建了一个自定义过滤器类，用于基于三个参数（用户名、密码和帐户 ID）对用户进行身份验证。我将它自动装配为 SecurityConfig 类中的 bean：

```
@Bean
public AccountCredentialsAuthenticationFilter accountCredentialsAuthenticationFilter()
        throws Exception {
    AccountCredentialsAuthenticationFilter accountCredentialsAuthenticationFilter = new AccountCredentialsAuthenticationFilter();
    accountCredentialsAuthenticationFilter
            .setAuthenticationManager(authenticationManagerBean());
    return accountCredentialsAuthenticationFilter;
} 
```

因此，通过调用身份验证所需的适当服务方法并为登录用户设置权限，我能够使用三个字段（用户名、密码和帐户 ID）执行身份验证，而不仅仅是传统的用户名和密码字段：

```
public class AccountCredentialsAuthenticationFilter extends UsernamePasswordAuthenticationFilter {

@Autowired
private UserService userService;

@Qualifier("authenticationManager")
protected AuthenticationManager authenticationManager;

@Override
public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response)
        throws AuthenticationException {

    String account = request.getParameter("account");
    final String userName = request.getParameter("userName");
    final String password = request.getParameter("password");

    boolean isFound = userService.checkLogin(userName, password, account);

    if (isFound == true) {
        boolean selectedAccount = false;
        UserDetails userDetails = userService.loadUserByUsername(userName);

        User user = (User) userDetails;
        Set<Account> accounts = user.getAccounts();
        String acctSelect = null;
        // user has multiple accounts
        for (Account acct : accounts) {
            acctSelect = acct.getAccountId().toString();
            if (acctSelect.equals(account)) {
                // confirm which account user has logged in with
                selectedAccount = true;

                account = acctSelect;
                request.getSession().setAttribute("account", account);

                break;
            }
        }

        if (selectedAccount) {

            Set<? extends GrantedAuthority> authorities = (HashSet<? extends GrantedAuthority>) userDetails
                    .getAuthorities();

            UsernamePasswordAuthenticationToken token = new UsernamePasswordAuthenticationToken(userName, password,
                    authorities);

            token.setDetails(new WebAuthenticationDetails(request));

            super.setDetails(request, token);

            Authentication auth = this.getAuthenticationManager().authenticate(token);
            SecurityContext securityContext = SecurityContextHolder.getContext();
            securityContext.setAuthentication(auth);
            // Create a new session and add the security context.
            HttpSession session = request.getSession(true);
            session.setAttribute("SPRING_SECURITY_CONTEXT", securityContext);

            return auth;

        } else {

            SecurityContextHolder.getContext().setAuthentication(null);
            request.getSession().setAttribute("SPRING_SECURITY_CONTEXT", null);

            throw new UsernameNotFoundException("Please input correct credentials");
        }

    } else {

        SecurityContextHolder.getContext().setAuthentication(null);
        request.getSession().setAttribute("SPRING_SECURITY_CONTEXT", null);

        throw new UsernameNotFoundException("Please input correct credentials");
    }

} 
```

我覆盖了 UsernamePasswordAuthenticationFilter 类的以下方法，以便在身份验证和授权后进行适当的重定向：

```
@Override
protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain,
        Authentication authResult) throws IOException, ServletException {
    RedirectStrategy redirectStrategy = new DefaultRedirectStrategy();
    redirectStrategy.sendRedirect(request, response, "/home");

}

@Override
protected void unsuccessfulAuthentication(HttpServletRequest request, HttpServletResponse response,
        AuthenticationException failed) throws IOException, ServletException {
    RedirectStrategy redirectStrategy = new DefaultRedirectStrategy();

    redirectStrategy.sendRedirect(request, response, "/login?error=true");

} 
```

我还修改了 SecurityConfig 类中的 configure 方法来执行自定义过滤器：

```
 @Override
protected void configure(HttpSecurity http) throws Exception {  

    http.addFilterBefore(accountCredentialsAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class)  
    .authorizeRequests()....rest of the code....} 
```

对于 Spring Security 中的自定义身份验证，方法

```
 @Override
public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response){---- call service methods here ----} 
```

在这个过滤器类 (AccountCredentialsAuthenticationFilter) 中，控制器类中的以下方法是多余的：

```
 @RequestMapping(value = { "/login" }, method = RequestMethod.POST)

   public String loginPage(@Valid @ModelAttribute("user") User user, BindingResult result, ModelMap model, HttpServletRequest request){---- call ervice methods here ----} 
```

# javascript - 之后如何弹出网页元素而不删除它？

> ID：16104229
> 
> 赞同：0
> 
> 时间：2013-04-19T12:05:03.613
> 
> 标签：javascript, jquery, css

我有弹出窗口的问题。我找到了弹出网页元素的库。它做得很好，但是在它弹出元素之后，它也会从我的网页中删除它（我不想要）。[这是我使用的库](https://raw.github.com/dinbror/bpopup/master/jquery.bpopup.min.js)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:10:40.970

从我在代码中可以看到它没有被删除，而只是被隐藏了。

```
default:
        open();
        $('<div class="b-ajax-wrapper"></div>')
            .load(o.loadUrl, o.loadData, function(){
                triggerCall(o.loadCallback);
                recenter($(this));
            }).hide().appendTo(o.contentContainer); 
```

因此，请尝试`hide()`从您正在使用的脚本中删除 。或者在克隆元素上使用弹出库，因此无论如何在页面上都不可见。

# design-patterns - 使用 sed 或 awk 在文件中查找和附加具有相同 ID 的行

> ID：16104234
> 
> 赞同：2
> 
> 时间：2013-04-19T12:05:30.690
> 
> 标签：design-patterns, sed, awk

我有一些格式为 { *ID Type Size Nodes* } 的文件，例如：

```
1234 P 1 56
2212 P 2 45-46
1234 F 
2567 P 3 90,99,101
2212 F
2567 F 
```

其中每个 P 型线只有一个匹配的 F 型线具有相同的 ID，并且每对的 ID 不同。

我希望能够在文件中搜索 P 类型的每一行，找到具有相同 ID 的匹配 F 类型行，然后从 P 类型行附加“大小”和“节点”值。

这可能吗？我可以想出一种使用关联数组在 bash 中执行此操作的方法，但我希望 sed/awk 可能对这样的事情有一些漂亮的小技巧，但我没有合适的词来搜索它/查看它向上。我知道您可以保存模式，我的主要问题是找出搜索不同 ID 的最佳方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:14:00.737

如果您不介意更改线路顺序，最简单的方法是：

```
$ awk '$2=="P"{print;$2="F";print}' file
1234 P 1 56
1234 F 1 56
2212 P 2 45-46
2212 F 2 45-46
2567 P 3 90,99,101
2567 F 3 90,99,101 
```

即`F`行发生后要打印的`P`行的顺序发生变化（行的顺序不变`P`）。

如果您不希望更改订单但保证该`P`行首先出现，则：

```
$ awk '$2=="P"{a[$1]=$3FS$4}{print $1,$2,a[$1]}' file
1234 P 1 56
2212 P 2 45-46
1234 F 1 56
2567 P 3 90,99,101
2212 F 2 45-46
2567 F 3 90,99,101 
```

否则，您有两种方法，缓冲或传递文件两次，这里是传递两次解决方案：

```
$ awk '$2=="P"{a[$1]=$3FS$4}FNR!=NR{print $1,$2,a[$1]}' file file
1234 P 1 56
2212 P 2 45-46
1234 F 1 56
2567 P 3 90,99,101
2212 F 2 45-46
2567 F 3 90,99,101 
```

除非您的实际文件非常大，否则这会很好，在这种情况下，缓冲方法会更好：

```
$ awk '$2=="P"{a[$1]=$3FS$4}{b[NR]=$0;k[NR]=$1}END{for(i=1;i<=NR;i++)print b[i],a[k[i]]}' file
1234 P 1 56
2212 P 2 45-46
1234 F 1 56
2567 P 3 90,99,101
2212 F 2 45-46
2567 F 3 90,99,101 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:17:32.120

用法`awk -f app.awk file.dat file.dat`

**应用程序.awk：**

```
FNR==NR && $2 == "P" {
    id=$1
    $1=$2=""
    aux[id]=$0
}

FNR!=NR && $2 == "F" {
    $0 = $0 aux[$1]
    $1=$1
}

FNR!=NR {
    print
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:31:03.093

```
awk '$2=="F"{$3=s[$1];$4=n[$1]}{s[$1]=$3}n[$1]=$4' file 
```

这将保留顺序，前提`P`是行在行之前`F`。感谢 sudo_O +

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T12:14:54.097

如果顺序无关紧要，并且每个 P 都有匹配的 F 行，则可以：

```
grep ' P ' file; grep ' P ' file | sed 's/ P / F /' 
```

# javascript - 检查字符串是否在开头包含特定单词应该删除-JavaScript/jQuery

> ID：16104236
> 
> 赞同：-1
> 
> 时间：2013-04-19T12:05:34.657
> 
> 标签：javascript, jquery, asp.net

我想删除以 M#- 或 L#- 开头的任何标签，此规则应在 jquery/javascript 中，任何以 M#- 或 L#- 开头的标签都应返回错误标签示例：

```
Live
M1- My Choice, 
Stage
M2- Site, 
KFC
L1- 1KFC, 
L2- New Choice 
```

结果：

```
Live    
Stage
KFC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:18:39.643

使用正则表达式

[http://jsfiddle.net/4GXeW/](http://jsfiddle.net/4GXeW/)

```
var string = "M1-";

if(string.match('[a-zA-Z0-9]-')){
alert("false");
    //return false
} 
```

字符串可以有任何标签值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:21:30.153

最简单的方法是使用正则表达式。

```
var regex = /[ML][0-9]-.*/;
var pattern = new RegExp(regex);

var arr = [
  "Live",
  "M1- My Choice, ",
  "Stage",
  "M2- Site, ",
  "KFC",
  "L1- 1KFC, ",
  "L2- New Choice"
]

for (var x=0; x<arr.length; x++){
  if(arr[x].match(pattern)!==null){
    arr.splice(x, 1);
    x--;
  }
} 
```

这将从 arr 数组中删除所有 L1 等标记的列。

```
arr = ["Live", "Stage", "KFC"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:20:08.793

现场示例：http: [//jsfiddle.net/GqGLt/1](http://jsfiddle.net/GqGLt/1)

```
var reg = new RegExp('^[ML][0-9]');

var array = ["Live", "M1- My Choice", "Stage", "M2- Site", "KFC", "L1- 1KFC", "L2- New Choice"];

$.each(array, function(idx, val){
   console.log(val, !reg.test(val)); 
}); 
```

# asp.net - 图片未显示在网页上

> ID：16104237
> 
> 赞同：0
> 
> 时间：2013-04-19T12:05:35.667
> 
> 标签：asp.net, vb.net

```
<asp:Image ID="Image11"  runat="server" Height="100px" Width="100px" /> 
```

VB.net 代码在这里

```
 logo_path = Server.MapPath(Request.ApplicationPath & "/" & "Logo" & "/" & img_name)

    da.Dispose()

    dr.Close()

    Image11.ImageUrl = logo_path

    Session("curr_page_path") = logo_path 
```

在调试期间，全局变量 logo_path 显示带有图像名称的图像的完整路径，但在网页上没有图像......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:11:07.500

`Request.ApplicationPath`会是这样的`C:\Inetpub\wwwroot`。这*不是*您在浏览器中想要的。浏览器需要一个类似`http://www.example.com/Logo/image1.jpg`. 或者当浏览器知道它在哪个网站上时，就可以了`Logo/image1.jpg`。

所有你需要的是

```
Image11.ImageUrl = "Logo/" & img_name 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T12:09:52.740

嗨，请更改您的代码如下

```
 logo_path = Server.MapPath("/Logo") & "/" & img_name 
```

# java - Java 网络服务：基于 FTP 的 SOAP

> ID：16104241
> 
> 赞同：2
> 
> 时间：2013-04-19T12:05:48.777
> 
> 标签：java, web-services

在许多 Java 规范中，我发现 SOAP 支持/运行不同的协议，如 HTTP、HTTPS、FTP、SMTP 等。
我在谷歌上搜索但没有找到任何示例或实现。
那么这里的任何人都可以通过示例帮助我理解这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:09:43.537

我还没有这样做，但我的假设是它只是关于有效负载格式，即 Soap 格式。您的 Web 服务客户端将使用来自 ftp 位置的有效负载并像 http 一样进行处理。

# cluster-computing - 是否可以使用 DRMAA 列出正在运行的作业？

> ID：16104248
> 
> 赞同：2
> 
> 时间：2013-04-19T12:05:59.770
> 
> 标签：cluster-computing, hpc, drmaa

我想知道是否可以使用 DRMAA 库在资源管理器中列出所有正在运行的作业，而不仅仅是通过 DRMAA 本身启动的那些？

也就是说，获取类似于[SLURM 资源管理器](https://computing.llnl.gov/linux/slurm)的[squeue 命令](https://computing.llnl.gov/linux/slurm/squeue.html)输出的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T10:24:49.547

据我所知，是的，但仅适用于实现列表和工作持久性的 DRMAAv2：

[https://github.com/troeger/drmaav2-mock/blob/master/drmaa2-list.c](https://github.com/troeger/drmaav2-mock/blob/master/drmaa2-list.c)

python-drmaa 模块还没有实现 DRMAAv2，但我们可能很快就会开始研究它：

[https://github.com/drmaa-python](https://github.com/drmaa-python)

如果你想跳进去，非常欢迎！;)

# java - 某些设备中的蓝牙 SDP 失败

> ID：16104250
> 
> 赞同：3
> 
> 时间：2013-04-19T12:06:06.020
> 
> 标签：java, android, bluetooth, bluetooth-lowenergy

我正在尝试使用蓝牙示例，该示例应使用“rtspp”协议将 Android 客户端应用程序连接到在 PC 中运行的蓝牙服务器应用程序（Java 应用程序，使用 Bluecove 库）。

作为开发的第一阶段，我实现了一个运行模型，并且该示例应用程序可以在所有经过测试的三星设备上顺利运行，但不能在 HTC 设备上运行。

在尝试使用 HTC 设备时，它在连接时显示 SDP failed IO Exception。

这是我的服务器应用程序代码，它作为 java 桌面应用程序运行；

```
String url = "btspp://localhost:" + uuid.toString() + ";name=MyAppSDPName";
StreamConnectionNotifier notifier = (StreamConnectionNotifier)Connector.open(url);
StreamConnection connection = notifier.acceptAndOpen();
... 
```

此服务器应用程序正在成功运行并等待传入​​连接...

这是我作为 Android 应用程序运行的客户端代码；

```
BluetoothDevice mmDevice = BluetoothAdapter.getDefaultAdapter().getRemoteDevice(deviceAddress);
BluetoothSocket mmSocket = mmDevice.createRfcommSocketToServiceRecord(uuid);
mmSocket.connect(); 
```

在三星设备上运行此应用程序时没有问题。但是当它来自 hts 设备时，它会抛出`IOException`哪个状态`SDP failed`

任何人都可以对 HTC 设备的这个问题有所了解吗？使用 Android 2.2 和 4.0 操作系统的 HTC 设备进行测试

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T09:46:57.310

与某些制造商一样，HTC 的蓝牙堆栈实现略有不同，因此这可能是 SDP 无法正常工作的原因。

# ios - 当键盘存在时向上移动对话框，除非 ipad 转身

> ID：16104251
> 
> 赞同：1
> 
> 时间：2013-04-19T12:06:06.770
> 
> 标签：ios, objective-c, ipad, orientation, modal-dialog

模式对话框在键盘出现时向上移动，在键盘消失时向下移动。

一切都很好，直到我旋转 iPad。在除标准之外的任何其他方向上它都不起作用。当 iPad 转动时，模式对话框在键盘出现而不是向上移动时向下移动，当键盘消失而不是向下移动时向上移动。

这是我用来在键盘出现/消失时定位模式对话框的代码。

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {

        self.view.superview.frame = CGRectMake(self.view.superview.frame.origin.x, 140, self.view.superview.frame.size.width, self.view.superview.frame.size.height);

        }      
    }];

}

-(void)textFieldDidEndEditing:(UITextField *)textField {

    [UIView animateWithDuration:0.4 animations:^ {

        self.view.superview.frame = CGRectMake(self.view.superview.frame.origin.x, 212, self.view.superview.frame.size.width, self.view.superview.frame.size.height);
        }
    }];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:17:48.443

不用设置框架，而是使用 CGAffineTransformTranslate，例如像这样：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {
    self.view.superview.transform = CGAffineTransformTranslate(self.view.superview.transform,0,72);
    }      
}];
}

-(void)textFieldDidEndEditing:(UITextField *)textField {
[UIView animateWithDuration:0.4 animations:^ {
    self.view.superview.transform = CGAffineTransformTranslate(self.view.superview.transform,0,-72);
    }
}];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:04:52.363

您应该尝试使用键盘通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWasShown:) name:UIKeyboardDidShowNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillBeDismissed:) name:UIKeyboardWillHideNotification object:nil]; 
```

然后在选择器中调整框架。不在 textFieldDidBeginEditing/textFieldDidEndEditing 中。

```
- (void)keyboardWasShown:(NSNotification *) notification {
    NSDictionary *info = [notification userInfo];
    NSValue *aValue = [info objectForKey:UIKeyboardFrameEndUserInfoKey];
    CGSize keyboardSize = [aValue CGRectValue].size;
    keyboardHeight = MIN(keyboardSize.height, keyboardSize.width);
    // set new frame based on keyboard size 

- (void)keyboardWillBeDismissed: (NSNotification *) notification{
    [UIView animateWithDuration:0.4 animations:^{
    // original frame 
    }];
} 
```

# xpath - 这个 xpath 有什么问题，还是 Marklogic 行为不端？

> ID：16104254
> 
> 赞同：0
> 
> 时间：2013-04-19T12:06:14.723
> 
> 标签：xpath, xquery, marklogic

当我确定数据存在于 Marklogic 中时，我遇到了一个奇怪的问题，即什么应该是简单的 xpath 不返回数据。我可以通过更通用的 xpath 看到有问题的数据，但没有具体得到它。

有效的xpath：

```
/log:record[log:changes/log:change/@field = "moduleCodes"]
=> a long sequence of log:record elements with "moduleCodes" field changes 
```

xpath 不：

```
/log:record/log:changes/log:change[@field = "moduleCodes"]
=> empty sequence 
```

（我已经省略了`log`命名空间定义的简洁性。）

为了弄清楚发生了什么，我从第一个工作的 xpath 开始，并以此为基础：

```
/log:record[log:changes/log:change/@field = "moduleCodes"]/log:changes/log:change
=> sequence of log:change elements including some with @field = "moduleCodes"
/log:record[log:changes/log:change/@field = "moduleCodes"]/log:changes/log:change[@field]
=> sequence of log:change elements including some with @field = "moduleCodes"
/log:record[log:changes/log:change/@field = "moduleCodes"]/log:changes/log:change[@field = "moduleCodes"]
=> empty sequence 
```

我误解了一些基本的东西吗？`log:change`当其他一切都按我预期的那样工作时，我看不出为什么将谓词放在 上的 xpath会返回一个空序列。这让我感觉 Marklogic 不知何故感到困惑，但我想确保在我开始这样说话之前，不仅仅是我错过了 xpath 的微妙之处。

我只是尝试了具有不同字段名称的路径。它可以像我期望的那样与（至少一些）其他值一起工作。

我刚刚重启了 ML 集群；没变。

* * *

**编辑：**

上面的所有 xpath 在 Oxygen 中都可以正常工作，所以似乎只有 ML 表现得像这样。我尝试添加`fn:doc()`到所有路径的前面，以防万一，但这没有任何区别。

这是我认为应该匹配所有 xpath 的（匿名）记录：

```
<log:record id="00000001" date="2013-04-14T01:42:02.922+01:00" type="change" xmlns:log="some/namespace/definition">
  <log:head>
     <some-header-info/>
  </log:head>
  <log:changes>
    <log:change field="dateModified">
      <log:old-value>2012-11-06T00:00:00.0000000</log:old-value>
      <log:new-value>2013-03-20T00:00:00.0000000</log:new-value>
    </log:change>
    <log:change field="moduleCodes">
      <log:old-value>
        <log:moduleCodes>
          <log:moduleCodes-value code="AAA"/>
        </log:moduleCodes>
      </log:old-value>
      <log:new-value>
        <log:moduleCodes>
          <log:moduleCodes-value code="AAA"/>
          <log:moduleCodes-value code="BBB"/>
        </log:moduleCodes>
      </log:new-value>
    </log:change>
  </log:changes>
</log:record> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T16:52:55.053

As best I can recreate your test with 6.0-2.3, this works for me.

When debugging database queries, one useful technique is to move things in memory. If it still doesn't work, this throws suspicion on the database query. When I try that using 6.0-2.3, the results seem to be correct.

```
declare namespace log="some/namespace/definition" ;
document {
<log:record id="00000001" date="2013-04-14T01:42:02.922+01:00" type="change" xmlns:log="some/namespace/definition">
  <log:head>
     <some-header-info/>
  </log:head>
  <log:changes>
    <log:change field="dateModified">
      <log:old-value>2012-11-06T00:00:00.0000000</log:old-value>
      <log:new-value>2013-03-20T00:00:00.0000000</log:new-value>
    </log:change>
    <log:change field="moduleCodes">
      <log:old-value>
        <log:moduleCodes>
          <log:moduleCodes-value code="AAA"/>
        </log:moduleCodes>
      </log:old-value>
      <log:new-value>
        <log:moduleCodes>
          <log:moduleCodes-value code="AAA"/>
          <log:moduleCodes-value code="BBB"/>
        </log:moduleCodes>
      </log:new-value>
    </log:change>
  </log:changes>
</log:record> }
/log:record[log:changes/log:change/@field = "moduleCodes"]/xdmp:path(.)
=>
/log:record

declare namespace log="some/namespace/definition" ;
document {
<log:record id="00000001" date="2013-04-14T01:42:02.922+01:00" type="change" xmlns:log="some/namespace/definition">
  <log:head>
     <some-header-info/>
  </log:head>
  <log:changes>
    <log:change field="dateModified">
      <log:old-value>2012-11-06T00:00:00.0000000</log:old-value>
      <log:new-value>2013-03-20T00:00:00.0000000</log:new-value>
    </log:change>
    <log:change field="moduleCodes">
      <log:old-value>
        <log:moduleCodes>
          <log:moduleCodes-value code="AAA"/>
        </log:moduleCodes>
      </log:old-value>
      <log:new-value>
        <log:moduleCodes>
          <log:moduleCodes-value code="AAA"/>
          <log:moduleCodes-value code="BBB"/>
        </log:moduleCodes>
      </log:new-value>
    </log:change>
  </log:changes>
</log:record> }
/log:record/log:changes/log:change[@field = "moduleCodes"]/xdmp:path(.)
=>
/log:record/log:changes/log:change[2] 
```

So the implication is that the problem is in the index or the way the index is queried. You can try to debug that using `xdmp:query-trace(true())` at the start of your query. For example:

```
declare namespace log="some/namespace/definition" ;
xdmp:query-trace(true()),
/log:record[log:changes/log:change/@field = "moduleCodes"]/xdmp:describe(.),
/log:record/log:changes/log:change[@field = "moduleCodes"]/xdmp:describe(.) 
```

With 6.0-2.3 these both return the expected results for me.

```
fn:doc("test")/log:record
fn:doc("test")/log:record/log:changes/log:change[2] 
```

Here are the traces, from the ErrorLog.txt file:

```
Analyzing path: fn:collection()/log:record[log:changes/log:change/@field = "moduleCodes"]/xdmp:describe(.)
Step 1 is searchable: fn:collection()
Step 2 is searchable: log:record[log:changes/log:change/@field = "moduleCodes"]
Step 3 is unsearchable: xdmp:describe(.)
First 2 steps of path are searchable: fn:collection()/log:record[log:changes/log:change/@field = "moduleCodes"]
Gathering constraints.
 Comparison contributed hash value constraint: log:change/@field = "moduleCodes"
Step 2 predicate 1 contributed 3 constraints: log:changes/log:change/@field = "moduleCodes"
 Comparison contributed hash value constraint: log:change/@field = "moduleCodes"
Step 2 predicate 1 contributed 1 constraint: log:changes/log:change/@field = "moduleCodes"
Step 2 contributed 4 constraints: log:record[log:changes/log:change/@field = "moduleCodes"]
Executing search.
Selected 1 fragment to filter
 xdmp:eval("declare namespace log=&quot;some/namespace/definition&quot; ;&#1...", (), <options xmlns="xdmp:eval"><database>598453498912235799</database><root>/tmp</root><isolati...</options>)
 Analyzing path: fn:collection()/log:record/log:changes/log:change[@field = "moduleCodes"]/xdmp:describe(.)
 Step 1 is searchable: fn:collection()
 Step 2 is searchable: log:record
 Step 3 is searchable: log:changes
 Step 4 is searchable: log:change[@field = "moduleCodes"]
 Step 5 is unsearchable: xdmp:describe(.)
 First 4 steps of path are searchable: fn:collection()/log:record/log:changes/log:change[@field = "moduleCodes"]
 Gathering constraints.
Step 2 contributed 1 constraint: log:record
 Comparison contributed hash value constraint: log:change/@field = "moduleCodes"
 Step 4 predicate 1 contributed 1 constraint: @field = "moduleCodes"
 Step 4 contributed 1 constraint: log:change[@field = "moduleCodes"]
 Comparison contributed hash value constraint: log:change/@field = "moduleCodes"
 Step 4 predicate 1 contributed 1 constraint: @field = "moduleCodes"
 Comparison contributed hash value constraint: log:change/@field = "moduleCodes"
 Step 4 predicate 1 contributed 1 constraint: @field = "moduleCodes"
 Step 4 contributed 1 constraint: log:change[@field = "moduleCodes"]
 Step 3 contributed 1 constraint: log:changes
 Executing search.
 Selected 1 fragment to filter 
```

# c# - 如何为 DevExpress BandedGridView 正确设置具有动态带和列数的 DataSource

> ID：16104260
> 
> 赞同：3
> 
> 时间：2013-04-19T12:06:39.913
> 
> 标签：c#, gridview, devexpress

我正在为 WinForms 使用 BandedGridView。而且我只在运行时获得有关 BandedGridView 结构（带和列的数量）的信息。所以我必须手动填写。我可以正确地创建完整的结构，但我不明白如何用数据填充它。我尝试以两种方式做到这一点：

1.使用 GridControl.DataSource 属性。但是在这里我有问题，因为我有动态的列数，所以我无法创建代表 GridViewRow 的静态类，其中类属性将代表列字段。我只有这种形式的数据：List（代表每一行），在 OuterClass 里面我有 List 类型的属性（代表 GridView 中的每一列）。我尝试创建代表整行的动态对象并将其设置为 GridControl.DataSource 属性 BindingList，但这次它在绑定时触发 NullReferenceException。堆栈跟踪的顶部是：

> DevExpress.XtraGrid.Views.Grid.GridView.GetRowCellRepositoryItem(Int32 rowHandle, GridColumn column) 中的 DevExpress.XtraGrid.Views.Grid.GridView.GetRowCellRepositoryItem(Int32 rowHandle, GridColumn column) 中的 DevExpress.XtraGrid.Columns.GridColumn.get_ColumnType() .Views.Grid.ViewInfo.GridViewInfo.CreateCellInfo(GridDataRowInfo ri, GridColumnInfoArgs columnInfo) 在 DevExpress.XtraGrid.Views.Grid.ViewInfo.GridViewInfo.CalcRowCellsDrawInfo(GridDataRowInfo ri, GridColumnsInfo columnsInfo) 在 DevExpress.XtraGrid.Views.Grid.ViewInfo.GridViewInfo .CalcDataRow(GridDataRowInfo ri, GridRow row, GridRow nextRow) 在 DevExpress.XtraGrid.Views.Grid.ViewInfo.GridViewInfo.CalcRowsDrawInfo() 在 DevExpress.XtraGrid.Views.Grid.ViewInfo.GridViewInfo.CalcGridInfo()

但我默认保留所有列类型，并用 typeof(string) 的值填充列。我检查每列的 FieldName 并检查我的动态对象的相同属性名称 - 它等于。

2.所以我尝试另一种方式。尝试使用 AddNewRow() 和 SetRowCellValue() 方法手动填充我的网格视图。但是现在当我不填充 GridControl.DataSource 属性，而只是调用 AddNewRow() - 我的网格视图没有任何变化。我看不到网格中的行。当我检查 GridView.FocusedRowHandle 时，它​​返回负值，因此我了解新行没有添加到我的视图中。

所以我需要帮助，如何在我的情况下填充 BandedGridView？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T07:47:40.047

我找到了解决方案。我在手动生成波段和列时犯了一个错误。我已将列附加到bands 列集合，但没有将其附加到bandedgridview 列集合。因此，当我修复此问题时，数据源已成功填充。

# asp.net - 为 ASP .net 中的每个转发器项目分配单独的链接

> ID：16104263
> 
> 赞同：1
> 
> 时间：2013-04-19T12:06:55.847
> 
> 标签：asp.net, hyperlink, repeater

我正在尝试开发一个论坛网站（试图模仿它的一些功能）并且我正在使用实体框架来获取我的数据。我必须使用中继器，因为我的教练要求我这样做。

我会使用转发器从 2 个单独的数据库表中获取“论坛类别”和“子类别”的数据来获得类似的东西：

*   论坛类别 1

    *   子类别 1

    *   子类别 2

*   论坛类别 2

    *   子类别 1

    *   子类别 2

现在，我想，当单击那些子类别列表时，使用查询字符串将其定向到他们自己的页面，而这正是我目前无法弄清楚的。当我为这些子列表分配链接时，因为它们是自动生成的，所以它们都指向我最初分配的页面。我想知道是否有办法为这种情况动态分配链接。我正在考虑使用 ENUM，但我又该如何在那里运行 for 循环。

我的转发器代码如下：

```
<asp:Repeater ID="categoryRepeater" runat="server" OnItemDataBound="RepeaterDataBinding">
            <ItemTemplate>
              <asp:Label ID="categoryLabel" Text='<%#Eval("CatName") %>' runat ="server" 
                  style="font-weight:bold;font-size:large" />
                <br />
                <asp:Repeater ID="forumRepeater" runat="server">
                    <ItemTemplate>
                        <a href="DesktopForum1.aspx?ForumID=<%#Eval("ForumID") %>"><%#Eval("ForumName")%></a><br/>
                       <%-- right up there. Instead of hardcoding "DesktopForum1.aspx?ForumID=" which makes all the links
                           to point to that page, I am trying to achieve a way to assign links to specific pages for each sub-list...
                           --%>
                    </ItemTemplate>
                </asp:Repeater>
            </ItemTemplate>
        </asp:Repeater> 
```

我确实尝试搜索论坛，但无法遇到与我的情况类似的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:29:53.130

如果您能够使用填充 forumRepeater 的查询获取子列表页面 URL，则应该可以：

```
<a href='<%#Eval("ForumUrl")%>'><%#Eval("ForumName")%></a><br/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:10:55.787

您想为每个项目添加一些锚点吗？

它看起来像这样：

```
<a name="someAnchor"></a> 
```

链接如下：www.mywebsite.com/blog/posts#someAnchor

更多详情： http: [//www.echocho.com/htmllinks08.htm](http://www.echoecho.com/htmllinks08.htm)

如果还是不行，需要用Javascript处理查询字符串值

# java - GAE+JPA：事务在生产中不起作用

> ID：16104265
> 
> 赞同：0
> 
> 时间：2013-04-19T12:07:02.910
> 
> 标签：java, google-app-engine, jpa, google-cloud-datastore

我在这里遇到了奇怪的事情。我在数据存储区 Google App Engine 中将 JPA 用于 CRUD 流程。我使用事务来编辑和删除某些实体，但它在我的开发机器上运行良好，但它在生产中不起作用，甚至在我的生产日志中没有显示任何错误。这是我的一段代码：

```
public boolean removeBalance(long id) {
    EntityManager em = EMFService.get().createEntityManager();
    try {
        Balance balance = em.find(Balance.class, id);
        if (balance!= null) {
            em.getTransaction().begin();
            em.remove(balance);
            List<Balance> listBalance=listBalance(balance.getUrut());
            for(int i=0;i<listBalance.size();i++){
                //update some entity            
            }
            em.getTransaction().commit();
            return true;
        } else {
            return false;
        }
    } catch (Exception e) {
        em.getTransaction().rollback();
        e.printStackTrace();
        return false;
    } finally {
        em.close();
    }
} 
```

日志只显示：

```
2013-04-19 23:33:56.980 (link here) 200 259ms 20kb Mozilla/5.0 (Windows NT 6.1)     AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.64 Safari/537.31
139.0.82.222 - - [19/Apr/2013:09:33:56 -0700] "POST 
```

我在我的代码中犯了错误吗？

更新 ：

如果它在事务中更新超过 5 条记录，它就无法正常工作，感谢@DataNucleus 通知我这是来自 Google App Engine 的限制。

# python - 表单加载时OpenERP将字段设置为只读

> ID：16104267
> 
> 赞同：0
> 
> 时间：2013-04-19T12:07:21.333
> 
> 标签：python, xml, openerp

请告诉我如何在表单加载时将表单的字段设置为只读。我需要从 python 函数（不是在 view.xml 中使用 attr 不可见选项）。

表单 onload 如果用户基于公司则需要公司只读，如果用户部门基于则需要公司和部门只读

请帮我实现这个

或将其包含在以下功能中

```
def _default_company(self, cr, uid, context=None):
    user = self.pool.get('res.users').browse(cr, uid, uid, context=context)
    if user.company_id:
        [here add code to set department field readonly]
        return user.company_id.id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T07:47:33.273

您不能从 _default 设置更改字段的“视觉”参数。您可以覆盖`fields_view_get`方法以动态覆盖字段的属性。如果需要，您还可以通过检查视图的 id 或名称或类型来基于每个视图执行此操作。查看手册并`grep`进入插件文件夹以查找真实示例。

# php - 使用php将数据插入mysql数据库

> ID：16104271
> 
> 赞同：1
> 
> 时间：2013-04-19T12:07:30.453
> 
> 标签：php, html, mysql

我有一个名为（order.php）的php订单表格，当用户单击（提交按钮“下一步”）时，它会将他带到另一个名为（confirm-order.php）的页面

(confirm-order.php) 显示用户使用 $_POST[] 从 (order.php) 提交的信息，并将这些信息中的每一个分配给一个变量。

显示在 (confirm-order.php) 纯文本上的数据，例如：

```
$itemName = $_POST['itemName'];
<?php echo $itemName; ?> 
```

在页面末尾有一个表单只包含一个元素（提交按钮）

如何仅将 $itemName 数据插入 mysql 数据库（单击提交按钮并且表单操作将我带到确认页面后）？

我知道如何将数据插入 mysql，但它不适用于 isset() 函数

我必须先在表单中编写 isset 函数吗？在它下面是mysql数据库代码？

order.php 页面：

```
<form class="form-horizontal well" action="confirm-order.php" method="POST">
    <fieldset>
      <legend>Personal Shopper Order Form</legend>
      <div class="control-group">
        <label class="control-label" for="select01">Choose a plan</label>
        <div class="controls">
          <select id="select01" name="plan">
            <option>Lite Plan $0 per order</option>
          </select>
        </div>
      </div>

      <div class="control-group">
        <label class="control-label" for="itemName">Item Name</label>
        <div class="controls">
          <input type="text" class="input-xlarge" id="itemName" name="itemName">
          <p class="help-block">Item name exapmle: iPad3 White 32GB wifi & 3G.</p>
        </div>
      </div>
       <div class="control-group">
        <label class="control-label" for="itemID">Item ID</label>
        <div class="controls">
          <input type="text" class="input-xlarge" id="itemID" name="itemID">
          <p class="help-block">example: Ebay Item ID, Amazon Item ID.</p>
        </div><br>
        <div class="control-group">
        <label class="control-label" for="itemURL">Item URL</label>
        <div class="controls">
          <input type="text" class="input-xxlarge" id="itemURL" name="itemURL">
          <p class="help-block">Direct web link to the item.</p>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="textarea">Item Details</label>
        <div class="controls">
          <textarea class="input-xlarge" id="textarea" name="itemDetails" rows="6"></textarea>
          <p class="help-block">Item details (name, color, specifications etc...)</p>
        </div>
      </div>
      <li id="li_3" data-pricefield="money_simple" data-pricevalue="0">
       <div class="input-prepend input-append">
        <label class="control-label" for="element_3_1">Item Price</label>
        <div class="controls">
        <span class="add-on">$</span>
          <input id="element_3_1" data-price-value="10.00"  name="element_3" type="text" class="element text large">
          <p class="help-block">Item exact price on the US online store.</p>
        </div>
      </div>
     </li>
     <li id="li_7" data-pricefield="money_simple" data-pricevalue="0">
       <div class="input-prepend input-append">
        <label class="control-label" for="element_7_1">Local Shipping Cost</label>
        <div class="controls">
        <span class="add-on">$</span>
          <input id="element_7_1" data-price-value="10.00"  name="element_7" type="text" class="element text large">
        </div>
        <p class="help-block">Local shipping fee from the US Store to Sky2ship (if applicable).</p>
      </div>
     </li>
     <li id="li_8" data-pricefield="radio" data-pricevalue="0">
     <div class="control-group">
      <div class="controls">
      <p class="help-block">Order Processing Service Fee.</p>
        <label class="radio">($0) Standard 2-3 days
        <input id="element_8_1" data-pricedef="00.00" name="element_8" class="element radio" type="radio" value="$0 Standard 2-3 Day">
        </label>
        <label class="radio">($10) Express 1 day
        <input id="element_8_2" data-pricedef="10.00" name="element_8" class="element radio" type="radio" value="$10 Express Same Day">

        </label>
      </div>
      </div>
      </li>
      <legend>Personal Information & Shipping Address</legend>
     <div class="control-group">
        <label class="control-label" for="input04">Full Name</label>
        <div class="controls">
          <input type="text" class="input-medium" id="fullName" name="fullName">
          <p class="help-block">First & last name.</p>
        </div>
      </div>
      <div class="control-group">
      <div class="controls">
        <label class="radio">Male
        <input type="radio" name="optionsRadios" id="optionsRadios1" value="option1" checked>
        </label>
        <label class="radio">
        <input type="radio" name="optionsRadios" id="optionsRadios2" value="option2">Female

        </label>
      </div>
      </div>
      <div class="input-prepend">
        <label class="control-label" for="prependedInput">Email Address</label>
        <div class="controls">
        <span class="add-on">@</span>
          <input type="text" class="span2" id="prependedInput" name="Email">
          <p class="help-block">Your email address.</p>
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="input06">Address</label>
        <div class="controls">
          <input type="text" class="input-xxlarge" id="input06" name="streetAddress" placeholder="Street Address">
          <p class="help-block">Your shipping address.</p>
        </div>
      </div>
       <div class="control-group">
        <div class="controls controls-row">
          <input type="text" class="span2" id="City" name="City" placeholder="City">
          <input type="text" class="span3" id="State" name="State" placeholder="State / Province">

        </div>
      </div>
      <div class="control-group">
        <div class="controls controls-row">
          <input type="text" class="span2" id="PostalCode" name="PostalCode" placeholder="Postal Code">
          <input type="text" class="span3" id="Phone" name="Phone" placeholder="Phone Number">
        </div>
      </div>

      <div class="control-group">
        <label class="control-label" for="select01">Country</label>
        <div class="controls">
          <select id="select02" name="Country">
            <option>IRAQ</option>
            <option>JORDON</option>
          </select>
        </div>
      </div>
       <li class="total_payment" align="right" data-basetotal="0">

            <span>

                <h3 class="alert-success">&#36;<var>0</var></h3>

                <h5>Total</h5>

            </span>

        </li>   
      <div class="control-group">
        <label class="control-label" for="optionsCheckbox">Read & Agree</label>
        <div class="controls">
          <label class="checkbox">
            <input type="checkbox" id="optionsCheckbox" value="option1">
            <a href="#">I agree to the site's Terms of Service & Privacy Policy.</a>
          </label>
        </div>
      </div>

      <div class="form-actions">
        <button type="submit" class="btn btn-primary">Confirm Order</button>
        <button type="reset" class="btn">Cancel Order</button>
      </div>
    </fieldset>
  </form> 
```

确认-order.php 页面：

```
 <?php

$itemName = $_POST['itemName'];
$plan = $_POST['plan'];
$itemID = $_POST['itemID'];
$itemPrice = $_POST['element_3'];
$processService = $_POST['element_8'];
$itemDetails = $_POST['itemDetails'];
$streetAddress = $_POST['streetAddress'];
$City = $_POST['City'];
$State = $_POST['State'];
$PostalCode = $_POST['PostalCode'];
$Phone = $_POST['Phone'];
$Country = $_POST['Country'];
$fullName = $_POST['fullName'];
$Email = $_POST['Email'];
$itemURL = $_POST['itemURL'];
$itemLocalShipCost = $_POST['element_7'];

?>

 <?php
$db_host = "localhost";
$db_user = "root";
$db_pass = "000000";
$db_name = "dbname";
    if (isset($_POST['submit'])) {
  $db_connect = mysqli_connect($db_host,$db_user,$db_pass,$db_name);
  // Check connection
         if (mysqli_connect_errno())
  {
         echo "Failed to connect to MySQL: " . mysqli_connect_error();
  }

  $sql ="INSERT INTO lite_order (lite_plan, lite_item_name)
        VALUES
  ('$plan','$item')";

          if (!mysqli_query($db_connect,$sql))
  {
          die('Error: ' . mysqli_error($db_connect));
  }
          echo "1 record added";
    }

?>
<address>
              <strong>Shipping Address.</strong><br>
              <?php echo $streetAddress; ?><br>
              <?php echo $City; ?>, <?php echo $State; ?>, <?php echo $PostalCode; ?><br><?php echo $Country; ?><br>
              <abbr title="Phone">P:</abbr><?php echo $Phone; ?>
            </address>
            <address>
              <strong><?php echo $fullName; ?></strong><br>
              <a href="mailto:#"><?php echo $Email; ?></a>
            </address>

            <table class="table">
              <thead>
                <tr>
                  <th>Plan</th>
                  <th>Item Name</th>
                  <th>Item ID</th>
                  <th>Local Shipping Cost</th>
                  <th>Item Price</th>
                  <th>Order Processing Fee</th>
                </tr>
              </thead>
              <tbody>
                <tr class="success">
                  <td><?php echo $plan; ?></td>
                  <td><?php echo $itemName; ?></td>
                  <td><?php echo $itemID; ?></td>
                  <td><?php echo "$" . $itemLocalShipCost; ?></td>
                  <td><?php echo "$" . $itemPrice; ?></td>
                  <td><?php echo $processService; ?></td
                ></tr>
              </tbody>
            </table>
            <strong>Item URL</strong><p class="alert alert-info"><?php echo $itemURL; ?></p>
            <pre class="pre-scrollable"><?php echo $itemDetails; ?></pre>
            <p>Your Total <h3 class="question"><?php echo "$" . $orderTotal; ?></h3></p>
                         <div class="form-actions"><form action="pending-order.php" method="post" name="confirmed-order">
                          <button type="submit" name="submit" class="btn btn-primary">Submit Order</button>
                          <button type="button" class="btn">Previous</button></form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div> 
```

单击提交按钮后在哪里插入mysql数据库代码以将所有变量插入数据库？在哪里放置 isset() 函数？我试过了，它没有在我的表中插入任何数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:41:32.073

我可以贡献两件具体的事情。

首先，`isset`测试 null... 与空不同。如果您有一个提交为**空**的表单字段，则将一个局部变量设置为该发布的值，然后使用`isset`;对其进行测试 `isset`将返回`true`，因为**存在**的值与根本没有在页面加载中注册的变量不同。

其次...***任何东西***都可以发布到您的表单中（想想邪恶的自主韩国黑客机器人）。此外，有很多方法可以在没有激活提交按钮本身的情况下提交表单，因此无法保证您甚至会在vars中看到**提交键。**`$_POST`您需要在处理脚本中定义的是“默认操作”。我的意思是这是一种非常基本且***安全***的行为（例如重定向到“出现问题”页面），默认情况下会启动，因此解决它的唯一方法是提交**正确设置所有预期值**的正确表单。

如果您这样做，您可以忽略提交按钮本身的值，而是专注于 POST 的内容。我收到了我希望收到的所有东西吗？都是正确的格式吗？用户的身份验证是否正确？只有在对所有这些问题进行了满意的测试后，您才会从默认行为切换到表单处理行为，在这种行为中，发布的数据可以插入到您的数据库中。

使用您的 3 页结构的示例：参考： [filter vars](http://www.php.net/manual/en/function.filter-input-array.php/ "过滤变量")

**第 1 页：**

```
<form action=./page2 method=POST>
<input type=text value=1234 name=numericValue />
<input type=text value="dummytext" name=stringValue />
<input type=submit value=submit name=submit />
</form> 
```

**第2页：**

```
<?php
$args = array('numericValue' => FILTER_VALIDATE_INT
             ,'stringValue' => FILTER_SANITIZE_STRING);

$clean_data = filter_input_array(INPUT_POST,$args);

if (is_array($clean_data))
{
  $_SESSION["saved_clean_data"] = $clean_data;
}
else 
{
  Header(<something wrong page>);
  die();
}
?>
<form action=./page3 method=POST>
<input type=submit name=submit value=No />
<input type=submit name=submit value=Yes />
</form> 
```

**第 3 页：**

```
<?php
if ($_POST["submit"] === "Yes")
{
   $cleanNum = $_SESSION["saved_clean_data"]["numericValue"];
   $cleanStr = $_SESSION["saved_clean_data"]["stringValue"];
   // DB insert Query, use advice from michi about PDO
   // parameterize your queries to help prevent sql injection
}
else
{
  Header(<somewhere for declined submits>);
  die();
}
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T12:28:06.867

**编辑：一个简单的例子**

做`<form>`，验证和插入**一个**文件，说`form.php`：

```
<? // check if FORM has been posted

$posted = isset($_POST['submit']);

 if ($posted) { // form has been posted...

    // validate input

    if (!isset($_POST['item']) || strlen(trim($_POST['item'])) == 0)
        $error['item'] = "please insert an item-name!";

    if (!isset($_POST['price']) || !is_numeric($_POST['price']))
        $error['price'] = "please enter a valid price!";

    // ready for input?

    if (!isset($error)) { // no $error --> go insert!

        // I'll do the db-operation with PDO and a prepared statement.
        // this is cool, easy and safe. LEARN IT!

        $sql = "INSERT INTO table (item,price) VALUES (:item,:price)";

        $insert = $db->prepare($sql);
        $insert->execute(array(
            ':item' => $_POST['item'], 
            ':price' => $_POST['price']
            ));
    } // $error
 } // submit
?> 
```

现在，在`<body>`同一**页面**中...

```
<? // check whether to display confirmation or form...

if ($posted && !isset($error)) { 

    // form was sent AND no error --> confirm
?>
<h1>Confirmed!</h1>
<p>Your data has been sent, thank you very much!</p>
<a href="somepage.php">go to somepage</a>
<?

} else {

    // form not sent or errors --> display form
?>

<h1>Please enter data</h1>

<? // display error-message, if there's one:
if (isset($error)) {
    $output = "";
    foreach ($error as $field => $msg) 
        $output .= (strlen($output) > 0?', ':'') . "[$field]: $msg";
    echo "<p>There were errors: $output</p>";
} // $error
?>

<form method="post">
    <!-- if the form has been sent, bring back the field's value from $_POST -->
    <p>item-name: <input type="text" name="item" 
        value="<?=($posted?$_POST['item']:'')?>" /></p>
    <p>price: <input type="text" name="price" 
        value="<?=($posted?$_POST['price']:'')?>" /></p>
    <p><input type="submit" name="submit" value="submit" /></p>
</form>

<?
} // submit & $error
?> 
```

请参阅使用 a`ternary-operator`设置 -elements 的`value`-attribute `<input>`：

```
(<condition>?<what to do if true>:<what to do if false>) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:05:38.127

创建一个表单并将变量存储在隐藏字段中，然后在表单中创建此提交按钮

因此，单击此表单将存储信息。请参阅此处的示例

```
<form class="form-horizontal well" action="confirm-order.php" method="POST">
   <input type="hidden" value="<?php echo $itemName; ?>" />
   <input type="submit" value="Confirm Order" />
</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T12:43:27.697

那么我们可以通过以下方式做到这一点

1.  您将所有数据存储在会话中，并在确认页面中使用，然后在数据插入页面中使用。如果用户更新或取消订单，请记住更新或删除它。

2.  您可以使用 javascript 和 HTML 动态创建确认订单页面，当用户单击确认按钮时，只有我们将其发布到 PHP 页面。这也将减少服务器调用。

3.  另一种方法是再次发送收集的发布值并将其作为隐藏字段保留在确认页面中，并在单击确认时发布。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T12:43:58.227

尝试

```
<button type="submit" class="btn btn-primary" NAME="submit">Confirm Order</button> 
```

并使用

```
IF (isset($_POST['submit]) {
$itemName = $_POST['itemName'];
$plan = $_POST['plan'];
$itemID = $_POST['itemID'];
$itemPrice = $_POST['element_3'];
$processService = $_POST['element_8'];
$itemDetails = $_POST['itemDetails'];
$streetAddress = $_POST['streetAddress'];
$City = $_POST['City'];
$State = $_POST['State'];
$PostalCode = $_POST['PostalCode'];
$Phone = $_POST['Phone'];
$Country = $_POST['Country'];
$fullName = $_POST['fullName'];
$Email = $_POST['Email'];
$itemURL = $_POST['itemURL'];
$itemLocalShipCost = $_POST['element_7']; 
```

// 你的 mysql 在此处插入代码

```
} 
```

编辑 1：更改`<button type="submit" class="btn btn-primary">Confirm Order</button>` 为`<input type="submit" class="btn btn-primary" value="Confirm Order">`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T12:26:06.917

那么有几种方法可以做到这一点：

1.  存储上一页的所有数据，即变量`order.php`中的数据： 说明**：**在会话中设置它将使您能够从站点的任何位置访问相同的变量，直到用户的会话。意味着在会话中存储它之后，您可以在页面中访问它。**怎么做：**在这个页面的顶部，而不是在顶部设置变量，写以下内容：`$SESSION[]`
    **`pending-order.php`** 

     ****`$SESSION['itemName'] = $_POST['itemName']`

    然后使用：

    `echo $SESSION['itemName']`

    然后在`pending-order.php`你可以像这样为变量赋值：

    `$itemName = $SESSION['itemName']`

    现在您可以将变量存储在数据库中。**** 
*****   将隐藏字段放入`confirm-order.php`页面表单中： 说明：
    **在**表单中创建隐藏输入字段`confirm-order.php`并设置变量中的值。这样，当您单击提交按钮时，您可以`pending-order.php`像在 上一样访问它们`confirm-order.php`。
    **怎么做：**只需将变量放在隐藏输入的 value 属性中，如下所示：

    `<form action="pending-order.php" method="post" name="confirmed-order">`
    `<input type="hidden" value="<?php $itemID ?>" id="someID">`
    `</form>`**** 

 ***** * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-01-01T19:06:35.880

isset() 函数在输入字段类型为 submit.like 时工作

```
<input type="submit" value="Confirm Order" /> 
```

所以更新代码表格

```
<div class="form-actions">
   <button type="submit" class="btn btn-primary">Confirm Order</button>
   <button type="reset" class="btn">Cancel Order</button>
</div> 
```

至

```
 <div class="form-actions">
   <input type="submit" class="btn btn-primary" value="Confirm Order" />
   <input class="btn" type="reset" value="Cancel Order" />
 </div> 
```****

# c# - 错误：DropdownList 返回“System.Data.DataRowView”作为所选项目的文本值

> ID：16104276
> 
> 赞同：2
> 
> 时间：2013-04-19T12:07:38.227
> 
> 标签：c#, winforms, drop-down-menu, datagridview

我有一个下拉列表，其中包含所有银行名称。我想在数据网格视图中显示信用额度。但下拉列表返回“System.Data.DataRowView”作为选定项的值。

这是代码：

```
private void cbxBank_SelectedIndexChanged(object sender, EventArgs e)
{
    int i = cbxBank.SelectedIndex;
    string bank = cbxBank.Text;
    if (i != -1)
    {
        // this Function Returns the Table of CreditLimit According to Bank Name
        DataTable CreditLimit = AM.ReturnAvailableCreditLimit(bank);

        //this function just displays the table in Datat Grid View
        DataGridViewDisplayDetails(CreditLimit);
    }
} 
```

在 DropdownList 中添加数据的代码

```
 Bank = DbRdRw.SqlDbRead("Select BankName from BankMaster", "BankMaster");
        cbxBank.DataSource = Bank;
        cbxBank.ValueMember = "BankName";
        cbxBank.DisplayMember = "BankName";
        //ends 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T12:11:20.517

您需要指定

对于 WinForm，您需要在定义如下属性后指定 DataSource：

```
Bank = DbRdRw.SqlDbRead("Select BankName from BankMaster", "BankMaster");
cbxBank.ValueMember = "BankName";
cbxBank.DisplayMember = "BankName";
cbxBank.DataSource = Bank; //here 
```

对于 ASP.Net

```
cbxBank.DataSource = ....;//specify your datasource
cbxBank.DataValueField = "BankID";
cbxBank.DataTextField = "BankName";
cbxBank.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:10:21.613

您有 2 个选项。

*   覆盖对象的 .ToString() 方法，显示您需要的内容
*   使用下拉列表的 DisplayMemberPath（或等效）属性，显示所需的属性

# java-me - 如何在 j2me 中处理大小超过 1 mb 的图像

> ID：16104279
> 
> 赞同：1
> 
> 时间：2013-04-19T12:07:55.777
> 
> 标签：java-me

我正在开发一个应用程序，用于将图像从 j2me mobile 上传到服务器。在 j2me 手机中，我们只分配了 1 mb 的堆大小，因此当我尝试上传超过 1 mb 的图像时，它会抛出**OutOfMemory**异常。有没有办法在 j2me 手机中处理这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:36:45.397

看起来您正在尝试`byte[]`在上传之前将整个图像加载到内存中（使用 a ）。如果是这种情况，您应该避免这样做。你最好使用流。
首先`InputStream`为文件和`OutputStream`服务器获取一个。然后使用缓冲区将所有文件内容从一个复制到另一个：

```
public static final void copy(InputStream from, OutputStream to)
    throws IOException
{
    byte [] buffer = new byte[1024];
    int count = from.read(buffer);

    while (count > 0) {
        to.write(buffer, 0, count);
        count = from.read(buffer);
    }

    to.flush();
} 
```

# string - Windows tool to count occurences of a string in a large file?

> ID：16104289
> 
> 赞同：-1
> 
> 时间：2013-04-19T12:08:20.920
> 
> 标签：string, count

I need a tool which counts occurences of a certain string in a large (~ 2GB) text file. Whats a good and fast tool?

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:13:43.577

Install [Cygwin](http://www.cygwin.com/) and do `grep -o string file | wc -w`:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:16:06.400

**Edit**: Works only on text files and only when the string occur once on each line

A simple python script:

```
input_file  = open( source_path , encoding="utf8" , mode='r' )
for line in input_file:
    if line.find("###") >= 0:
         Counter=Counter+1 
```

yet `grep` shuld do the work better.

# yii - 如何使用部分单词在 Sphinx 结果中搜索？

> ID：16104290
> 
> 赞同：1
> 
> 时间：2013-04-19T12:08:25.980
> 
> 标签：yii, sphinx

我有一个表格，当我输入一个值时，我想在提交时获得结果；

如果我搜索`fish`并且我有一个`fishing`值，我想获取包含该`fish`值的所有数据；

`fishing`在我的代码中，只有输入完整的单词才能得到我需要的结果；

我正在搜索完整的表达式以及表达式中的每个单词；

```
$sphinx_search = Yii::app()->search;
        $sphinx_search->setSelect('*');

        $sphinx_search_final = '';

        $sphinx_search_query = trim($this->q);
        if (strlen($sphinx_search_query) > 0) {
            $sphinx_search_query = str_replace('-', ' ', $sphinx_search_query);
            $keys = explode(' ', $sphinx_search_query);
            foreach ($keys as $k => $key) {
                if ($key) {
                    $keys[$k] = $key;
                } else {
                    unset($keys[$k]);
                }
            }
            if (count($keys) > 0) {
                $sphinx_search_final = ' @(position_name,employer_name,employer_first_name,employer_last_name,employer_position) ' . $sphinx_search_query .
                        ' @(position_name,employer_name,employer_first_name,employer_last_name,employer_position) ' . implode('|', $keys);
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:44:52.780

启用[`min_prefix_len`](http://sphinxsearch.com/docs/current.html#conf-min-prefix-len)或[`min_infix_len`](http://sphinxsearch.com/docs/current.html#conf-min-infix-len) 获取显式子字符串匹配功能。

还要检查[`enable_star`](http://sphinxsearch.com/docs/current.html#conf-enable-star)它会改变它的行为方式。

* * *

或者，也许词干是你要找的？通过启用[`morphology`](http://sphinxsearch.com/docs/current.html#conf-morphology)

# angularjs - Angular.js 和 Amazon S3 - 如何上传文件？

> ID：16104297
> 
> 赞同：5
> 
> 时间：2013-04-19T12:08:54.050
> 
> 标签：angularjs, amazon-s3, angularjs-directive

我在 Angular.js 中有一个应用程序。事实上，我在旧网站上进行了更新，为 Angular 进行了更改。

在旧版本中，我使用 Uploadfy jquery 组件在 Amazon S3 中进行上传。但是现在，有了 Angular，我就不能使用它了。

我想使用指令“ngUpload”。但我不知道该怎么做。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-08T14:16:37.250

如果您在 POST 数据中包含有效的 S3 参数，则可以从 HTML 表单直接上传到 S3 存储桶。这些被称为预授权的 HTML POST 表单。

有效参数值是通过对 AWS API 的 API 调用在您自己的托管服务器上生成的。然后这些值将作为隐藏输入字段添加到您的上传表单中。

以下是它们在您的表单中的样子：

```
 <input type="hidden" name="AWSAccessKeyId" value="YOUR_AWS_ACCESS_KEY"> 
  <input type="hidden" name="acl" value="private"> 
  <input type="hidden" name="success_action_redirect" value="http://yourdomain/">
  <input type="hidden" name="policy" value="YOUR_POLICY_DOCUMENT_BASE64_ENCODED">
  <input type="hidden" name="signature" value="YOUR_CALCULATED_SIGNATURE"> 
```

Amazon 提供了 Java、Python 和 Ruby 的示例代码。

[http://aws.amazon.com/articles/1434](http://aws.amazon.com/articles/1434)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-28T22:38:59.743

您可以使用[angular-file-upload](http://github.com/danialfarid/angular-file-upload/)一个轻量级的 Angular 指令，它支持文件进度和文件删除。

您可以在此处关注 Amazon S3 问题，其中包含如何将所有这些数据与文件上传一起发送的示例代码： [https ://github.com/danialfarid/angular-file-upload/issues/23](https://github.com/danialfarid/angular-file-upload/issues/23)

S3 上传应该适用于以上版本 1.1.1。

另一个相关问题：[https ://github.com/danialfarid/angular-file-upload/issues/23](https://github.com/danialfarid/angular-file-upload/issues/23)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-15T20:30:10.137

如果您想在上传后处理文件并将它们移动到其他位置，您可以使用 AWS JS SDK 的“公共”IAM 账户和 API 密钥来执行此操作。例如，处理和存储上传的文件。

使用 Angular、AWS S3 JS SDK、CORS 和 IAM 账户。需要进行一些设置才能将其锁定，因此它不会被滥用。

我在这里记录了设置过程：http: [//www.cheynewallace.com/uploading-to-s3-with-angularjs/](http://www.cheynewallace.com/uploading-to-s3-with-angularjs/)

# neo4j - NEO4J：是否可以在使用 Cypher 的关系类型中使用正则表达式？

> ID：16104303
> 
> 赞同：0
> 
> 时间：2013-04-19T12:09:15.977
> 
> 标签：neo4j, cypher, graph-databases

是否可以在关系类型中使用正则表达式。在某些情况下，我的应用程序会动态生成 RelTyps。因此，在执行 cyhper 查询时，应用程序只知道关系类型的特定部分。因此，我想在关系的其余部分使用正则表达式。这是一个可能的动态关系类型的示例：

```
(node)-[:`http://www.examplerelation.com/type/number/test[1]`]->(otherNode) 
```

我想`text[]`用正则表达式替换“”中的数字。另一个问题是，将这个数字保存为关系中的属性会更好吗？

谢谢你的帮助！问候马克斯:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:15:52.070

您不应滥用关系类型来存储数据。这也可能导致严重的性能问题。将数据存储在关系的属性中。

您还将遇到 32k 关系类型限制（[链接](http://docs.neo4j.org/chunked/snapshot/capabilities-capacity.html#capabilities-data)）的问题。

# javascript - 在 NodeJS 中获取数组值时出现问题

> ID：16104304
> 
> 赞同：2
> 
> 时间：2013-04-19T12:09:17.153
> 
> 标签：javascript, node.js, express, mongoose

我正在使用 NodeJS 来计算不同部分的员工人数。我使用 Mongoose 作为 ODM 和 MongoDB 作为数据库。这是我的代码（非常简单用于测试目的）。

```
 exports.list= function( req, res){
    var array = ['sectionA', 'sectionB'];
    var i;
    for(i = 0; i<array.length; i++){
        Issue.count({ 'section.name': array[i]}, function (err, count) {
          console.log('Section name is: ' + array[i] + ' number of employees: ' + count );
        )};
     }
    } 
```

但是`array[i`] 的值在内部是未定义的`Issue.count({ 'section.name': array[i]}, function (err, count) {});`。但是count的值是绝对正确的。我想要一个像这样的输出：

```
Section name is: sectionA number of employees: 50
Section name is: sectionB number of employees: 100 
```

但我目前的输出是

```
 Section name is: undefined number of employees: 50
 Section name is: undefined number of employees: 100 
```

这是因为`i`inside`Issue.count({ 'section.name': array[i]}, function (err, count) {});`的值始终为 2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:37:44.213

Issue.count 函数是否可能是异步的？所以你的循环在回调之前完成：

```
function (err, count) {
  console.log('Section name is: ' + array[i] + ' number of employees: ' + count );
} 
```

被执行。执行回调时，结果 i 的值未定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T12:55:51.563

@eshortie 是正确的：`Issue.count`是异步的，这就是问题所在。

这是一个解决方案：

```
for (i = 0; i<array.length; i++) {
  Issue.count({ 'section.name': array[i]}, function(sectionName, err, count) {
    console.log('Section name is: ' + sectionName + ' number of employees: ' + count );
  }.bind(null, array[i]));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T14:49:40.283

不要尝试使用常规`for`循环执行异步函数。它是在问问题。使用`async.eachSeries`或`async.each`代替[https://github.com/caolan/async#eachseriesarr-iterator-callback](https://github.com/caolan/async#eachseriesarr-iterator-callback)

```
var async = require('async')
var Issue = {} // mongoose isue model here
var elements = ['foo', 'bar']
async.eachSeries(
  elements,
  function(name, cb) {
    var query = {
      'section.name': name
    } 
    Issue.count(query, function(err, count) {
      if (err) { return cb(err) }
      console.dir(name, count)
    })
  },
  function(err) {
    if (err) {
      console.dir(err)
    }
    console.log('done getting all counts')
  }
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-28T08:51:41.497

> 使用 Q 库

```
 var Q = require('q')
    var i = 0;

    function hello (item){

       var defer = Q.defer();

        Issue.count({'section.name': student}, function (err, count) {
               if(err){

                 defer.reject(err);

                }else{

                 var result = 'Section name is: ' + item + ' number of employees: ' + count ;
                 defer.resolve(result)

                 }

            });

    })
           return defer.promise;
      }

      function recall(){
        hello(checkItems[i]).then((val)=>{
          console.log(val)
          if(i < checkItems.length - 1){
            i++
            recall();
          }
        })
      }
    recall() 
```

# sql-server - 想要多次调用一个过程并将查询中的值作为参数发送

> ID：16104310
> 
> 赞同：0
> 
> 时间：2013-04-19T12:09:24.110
> 
> 标签：sql-server

伙计们，我想多次调用一个过程，并输出多个行值作为过程的参数。我的查询是这样的：

```
select RoomID from tbWalkInRooms where WID =@ID 
```

现在这个查询返回了多个 roomid，我每次都必须将一个不同的 roomid 作为参数发送给一个过程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:18:59.053

据我了解您的问题，您可以通过 ysing 光标来实现：

```
declare @room_id int

declare room_id_cursor cursor for select RoomID from tbWalkInRooms where WID =@ID
open room_id_cursor
fetch next from room_id_cursor into @room_id
while @@fetch_status = 0
begin
  exec your_procedure @room_id
  fetch next from room_id_cursor into @room_id
end
close room_id_cursor
deallocate room_id_cursor 
```

# javascript - jqGrid 移动是否使用常规 jqGrid 响应式设计创建。或 jqGrid 移动与 jqGrid 分开？

> ID：16104313
> 
> 赞同：2
> 
> 时间：2013-04-19T12:09:39.113
> 
> 标签：javascript, html, jqgrid, responsive-design, mobile-website

[jqGrid 移动](http://www.trirand.com/blog/jqgrid/mobile/)是否 使用常规[jqGrid](http://www.trirand.com/blog/) 响应式设计创建。或 jqGrid 移动与 jqGrid 分开？

问题的更多解释：

我有使用 jqGrid 的大型旧应用程序，我需要使这个 Web 应用程序与移动设备兼容，如果 jqGrid 移动设备使用 jqGrid 响应式设计创建，我可以轻松地使用它，如果 jqGrid 移动设备不是，那么我需要重写并添加很多代码。

# android - Android：AccountManager 类方法 getAccountsByTypeAndFeatures 示例

> ID：16104317
> 
> 赞同：3
> 
> 时间：2013-04-19T12:09:44.017
> 
> 标签：android, accountmanager

我已经阅读了有关 AccountManager 及其方法的 android 文档。我可以理解 getAccounts() 和 getAccountsByType()。但我无法理解**getAccountsByTypeAndFeatures()..**这个 fn 是否有任何示例或教程。

提前致谢

# drupal - 如何在 unbercart 目录中显示网格视图

> ID：16104318
> 
> 赞同：0
> 
> 时间：2013-04-19T12:09:48.283
> 
> 标签：drupal, gridview, drupal-7, grid, ubercart

我是新手`Drupal`，`ubercart`实际上是在`Drupal CMS`.

我正在 ubercart 的帮助下开发在线商店。我很难在目录的网格视图中显示产品。

只要我理解正确，我们可以从 **Texonomy->add term创建产品类别**

例如，当我打开 url 时，http://[Website_URL]?q=[catalog_term_name]

我最终得到了以列表形式而不是网格形式列出产品的页面。

我正在使用最新版本[前两天刚下载] `drupal 7`，`ubercarts's`只要我知道 ubercart 支持网格视图但如何显示它....我不知道。

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:47:02.223

转到管理 > 结构 > 视图（对于 Drupal 7.x）并自定义目录视图。

# php - 搜索带有学号的姓名列表，仅输入姓名的一部分

> ID：16104322
> 
> 赞同：0
> 
> 时间：2013-04-19T12:10:08.167
> 
> 标签：php

我正在制作一个网页，其中包含学生编号或学生姓名的一部分，然后搜索学生列表，然后返回学生编号和全名。当用户输入学号时，我已经完成了。*我现在唯一的问题是用户输入名称时。*我正在考虑使用`strpos()`，但我不知道下一步该怎么做。

这是我到目前为止得到的：

```
function search_name_list($file, $info)
{
    // get name list array
    $students = get_name_list($file)['students'];
    if (!$students)
    {
        return false;
    }

    // the user searched for the student number
    if (ctype_digit($info))
    {
        // return the name corresponding to the student number if found
        if (array_search($info, $students['snum']))
        {
            return $students['name'][$info];
        }
    }

    // the user searched for the name
    else
    {
        // convert array into string
        $content = implode('|', $students);

        // TODO...
    }

    return false;
} 
```

我希望代码中的注释足够清晰，可以帮助大家理解问题。此外，如果您有关于使功能整体更好的建议，那么您也可以说出来。

编辑：我想我需要一个例子。

例如：数组包含 ["20111122953", "Acosta, Arbyn", "20111112345", "Mayer, Patrick"]。但是用户只输入了“Arbyn”或“Acosta”，然后我需要用我拥有的那个子字符串来搜索数组。然后返回我的名字对应的姓名和学号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:19:55.413

您可以遍历您的结果：

```
 foreach($students AS $value){
     if(stripos($value, $search) !== false){
         echo 'got '.$value
         break;
     }
 } 
```

# eclipse - JAX-WS：Eclipse Web 服务向导生成错误的存根

> ID：16104323
> 
> 赞同：0
> 
> 时间：2013-04-19T12:10:17.480
> 
> 标签：eclipse, jax-ws, stub

我有一个带有 JAX-WS 的 SOAP Web 服务。我有一个方法`createTransaction(String, String, String, int, String[][])`。

`createTransaction(String, int)`当我使用 Eclipse 创建一个新的 Web 服务客户端时，它会使用旧版本中定义服务的方法生成存根。在查看 WSDL 时，create 方法实际上应该期望 5 个参数而不是 2 个：

```
<message name="createTransaction"> <part name="arg0" type="xsd:string"/> 
  <part name="arg1" type="xsd:string"/> 
  <part name="arg2" type="xsd:string"/>
  <part name="arg3" type="xsd:int"/>
  <part name="arg4" type="ns1:stringArrayArray" xmlns:ns1="http://jaxb.dev.java.net/array"/>
</message> 
```

那么，Eclipse 是如何生成一个只有 2 个参数的存根呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:14:53.803

听起来您的工作区中的某些内容尚未针对您的新方法签名进行更新。您可以尝试对项目进行干净构建，删除任何生成的 WSDL 或 XSD 文件并重新构建客户端。关闭和重新打开项目之前也对我有所帮助。

我怀疑 Eclipse 工具中是否存在如此明显的缺陷，所以我建议尝试确保旧方法签名没有保存任何内容。

作为最后的手段，您可以创建一个新项目并仅移动您自己的文件（Eclipse 不生成任何文件）并重试。

# java - 在 jsp 中使用 imap 从 gmail 中读取电子邮件

> ID：16104327
> 
> 赞同：0
> 
> 时间：2013-04-19T12:10:25.433
> 
> 标签：java, jsp, email

我想使用带有 servlet 和 jsp 的 imap 阅读来自 gmail 的电子邮件。但我不能这样做。我进入了简单的 Java 类。但是，当我尝试将此代码放入 jsp 和 servlet 时，都会出现错误。我使用了以下代码。

> 尝试{
> java.util.Properties 属性 = System.getProperties();
> properties.setProperty("mail.store.protocol", "imaps");
> javax.mail.Session s = javax.mail.Session.getDefaultInstance(properties, null);
> //创建会话实例
> System.out.println("Connected");
> javax.mail.Store store = s.getStore("imaps");//创建存储实例
> store.connect("pop.gmail.com", "studentusecmp@gmail.com", "######## ##");
> //设置你的用户名和密码
> System.out.println(store);
> 文件夹收件箱 = store.getFolder("inbox");
> //设置你想要阅读邮件
> 收件箱的文件夹。
> Message messages[] = inbox.getMessages();// 获取收件箱消息
> for (int i = 0; i System.out.println("From : " + messages[i].getFrom()[0]); //打印发件人的电子邮件 ID System.out.println("Sub : " + messages[i].getSubject()); //打印电子邮件的主题
> System.out.println("Receive Date:"+messages[i].getReceivedDate ());
> System.out.println("Description:"+messages[i].getDescription());
> }catch(Exception e) { e.printStackTrace(); }

和错误

> Stacktrace：在 org.apache.jasper.compiler.ErrorDispatcher.javacError(ErrorDispatcher.java:330) 在 org.apache.jasper.compiler.JDTCompiler 的 org.apache.jasper.compiler.DefaultErrorHandler.javacError(DefaultErrorHandler.java:97) .generateClass(JDTCompiler.java:457) 在 org.apache.jasper.compiler.Compiler.compile(Compiler.java:374) 在 org.apache.jasper.compiler.Compiler.compile(Compiler.java:352) 在 org. apache.jasper.compiler.Compiler.compile(Compiler.java:339) at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:594) at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java: 344) 在 org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390) 在 org.apache.jasper.servlet.JspServlet.service(JspServlet.java:333) 在 javax.servlet.http.HttpServlet。service(HttpServlet.java:722) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210) at org.apache .catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240) 在 org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164) 在 org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java :462) 在 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100) 在 org.apache.catalina.valves 的 org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)。 AccessLogValve.invoke(AccessLogValve.java:563) 在 org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118) 在 org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399) 在 org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:317) 在 org.apache.coyote.http11 .Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:204) at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:182) at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run (JIoEndpoint.java:311) 在 java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) 在 java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) 在 java.lang.Thread.run(Unknown Source)org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:182) 在 org.apache.tomcat.util.net 上的 apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:204)。 JioEndpoint$SocketProcessor.run(JIoEndpoint.java:311) at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run （来源不明）org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:182) 在 org.apache.tomcat.util.net 上的 apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:204)。 JioEndpoint$SocketProcessor.run(JIoEndpoint.java:311) at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run （来源不明）concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source)concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source)

我做错了什么？请帮助我。
谢谢。
-金丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:05:41.067

好的。经过一番谷歌搜索，我得到了答案。并逐步检查代码。它在 /WebContent/lib/ 文件夹中找不到 jar 文件。我手动放的。它工作正常。

# mercurial - 用于 pretag 的 Mercurial 钩子

> ID：16104332
> 
> 赞同：1
> 
> 时间：2013-04-19T12:10:44.063
> 
> 标签：mercurial

我想在将代码提交到 mercurial 时对标签名称强制执行策略（基于正则表达式）。经过大量搜索后，我找到了以下示例。

```
version_re = r'(ver-\d+\.\d+\.\d+|tip)$'
def invalidtag(ui, repo, hooktype, node, **kwargs):
assert(hooktype == 'pretag')

....

if not re_.match(tag):
    ui.warn('Invalid tag name "%s".\n' % tag)
    return True
return False 
```

我的问题是，如何从正在提交的 repo 中获取标签名称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T09:27:18.723

根据[此文档](http://hgbook.red-bean.com/read/handling-repository-events-with-hooks.html#sec%3ahook%3apretag)，标签名称与钩子一起传递，因此我认为将钩子定义更改为此可能有效：

```
def invalidtag(ui, repo, hooktype, node, tag, **kwargs): 
```

# jquery - 为什么在 jQuery 触发后 dojo.connect 不会被触发？

> ID：16104337
> 
> 赞同：0
> 
> 时间：2013-04-19T12:11:05.973
> 
> 标签：jquery, dojo

我有两个系统，一个是使用 Dojo，另一个是 jQuery。我必须在它们之间建立一些联系，但我遇到了问题。

jQuery 事件监听器在 jQuery 触发器后被触发。Dojo 事件侦听器不会被触发。为什么会这样？

我从当前的问题中创建了一个最小的环境：http: [//jsfiddle.net/vEkt6/](http://jsfiddle.net/vEkt6/)

HTML：

```
<input type="text" value="0" name="a" id="a" /> 
```

JS：

```
var el = dojo.byId('a');
dojo.connect(el, 'change', function(){
    console.log('dojo');   
});

jQuery(el).on('change', function(){
     console.log('jquery');   
});

jQuery(el).val(1).trigger('change'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:39:13.017

jQuery 绑定事件很复杂，基本上它将它与`addEventListener`（或类似的）绑定，并将附加信息附加到元素的数据容器。所以以后不能通过纯js​​使用。触发器以类似的方式工作 - 它不会触发由 dojo 绑定的事件。Dojo 也做了一些技巧。总而言之，两个框架都使用 dom 级别 2 来附加事件，所以不能只调用 el.onchange()，它将为 null。但是，有一段广为人知的纯代码可以解决问题：

```
var el = dojo.byId('a');
dojo.connect(el, 'change', function(){
    console.log('dojo');   
});

jQuery(el).on('change', function(){
     console.log('jquery');   
});

jQuery(el).val(1);

if ("fireEvent" in el) {
    el.fireEvent("onchange");
} else {
    var evt = document.createEvent("HTMLEvents");
    evt.initEvent("change", false, true);
    el.dispatchEvent(evt);
}; 
```

[您修改后的演示](http://jsfiddle.net/vEkt6/1/)

# node.js - 具有嵌套集合的主干获取父模型

> ID：16104339
> 
> 赞同：0
> 
> 时间：2013-04-19T12:11:23.203
> 
> 标签：node.js, backbone.js, model, nested, fetch

我的应用程序具有以下结构：

```
Project (model)
     -> tracks (collection)
           -> track (model)
                 -> clips (collection)
                         clip (model) 
```

我只需要获取父项目模型。它将导致所有数据结构的变化。我得到 JSON

```
{ "_id" : "123",
  "name" : "name",
  "tracks" : [ { "clips" : [ { "audioName" : "audio name",
              "audioPath" : "audio/path.wav",
              "duration" : 123,
              "id" : "track0-1"
            } ],
        "mute" : false,
        "name" : "track0",
        "selected" : false,
        "volume" : 100
      },
      { "clips" : [  ],
        "mute" : false,
        "name" : "track1",
        "selected" : false,
        "volume" : 100
      }
   ]
} 
```

我有解析方法：

```
 parse: function (data) { 
        this.get('tracks').reset(data.tracks);
        delete data.tracks;
        return data;
    } 
```

我无法解析剪辑。在模型跟踪中，属性剪辑的行为类似于 javascript 数组而不是骨干模型。

如何解析剪辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:29:00.803

`parse`仅用于解析来自服务器的响应。因此，您将无法使用它来创建您的`clips`收藏。
所以你可能想改变你这样做的方式（也许看看 Backbone-relational，我认为它处理这种东西）。这是一个可能的解决方案（放入您的模型中）：

```
initialize: function() {
  this.listenTo(this, 'change:clips', this.onChangeClips);
  // the rest of your stuff
},
onChangeClips: function() {
  var clips = this.get('clips');
  if(Object.prototype.toString.call(clips) === '[object Array]')
    this.set('clips', new Clips(clips), {silent: true});
} 
```

测试是否数组的来源：[检查对象是否为数组？](https://stackoverflow.com/questions/4775722/javascript-check-if-object-is-array)

注意：这将删除对现有集合（您似乎拥有）的任何引用，因此您可能希望在模型中保留对您的集合的引用（如在`_clips`属性中）以使用新`clips`数组重置它。

# java - 如何在java中的servlet中获取和传递值？

> ID：16104342
> 
> 赞同：1
> 
> 时间：2013-04-19T12:11:50.880
> 
> 标签：java, javascript, jsp, servlets

我有这样的Java代码，包my.ebill.pro.db；

```
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.ResultSet;
import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;
import java.util.List;
import newt.com.properties.*;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.text.ParseException;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.ListIterator;

@WebServlet("/BG_Form")
public class BG_Form extends MyDbConn {

    /**
     * 
     */
    private static final long serialVersionUID = -2319984741700546377L;
    static Statement st,st1;

    public BG_Form() throws Exception {
        super();
        st=con.createStatement();
        st1=con.createStatement();
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)throws ServletException, IOException {

    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();

    String poNumberBas=request.getParameter("poNo");
    String fromPoBas=request.getParameter("toAddress");
    String toPoBas=request.getParameter("toWhomname");
    String[] productsBas = request.getParameterValues("product");
    String[] pricesBas= request.getParameterValues("price");
    String[] qtysBas= request.getParameterValues("qty");
    String[] linetotalsBas = request.getParameterValues("linetotal");
         System.out.println("Product"+productsBas);
    /*out.println( poNumber + fromPo+toPo+products+prices+qtys+linetotals+"Adress");*/
    PoGet poget=new PoGet();
    poget.setFromPo(fromPoBas);
    poget.setToPo(toPoBas);
    poget.setProducts(productsBas);
    poget.setPrices(pricesBas);
    poget.setPoNumber(poNumberBas);
    poget.setQtys(qtysBas);
    poget.setLinetotals(linetotalsBas);

    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

} 
```

> 这里是 getter 和 setter；

```
public class PoGet {

    private String poNumber;
    private String fromPo;
    private String toPo;
    private String[] products;
    private String[] prices;
    private String[] qtys;
    private String[] linetotals;
} 
```

而jsp代码是

```
<html>
<head>
<%@include file="includes/headscript.jsp" %> 
 <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>
</head>
<body>
<form id="validationform" name="validationform" method="get" action="BG_Form">
<input type="text" style="border-right-width: 2px; margin-right: 0px; margin-left: 33px; margin-top: -15px;" id="F_Date" class="dateRagePicker leftPick1 hasDatepicker" maxlength="20" size="20">
<table class="order-list" style="margin-left: 228px;">
    <thead>
        <tr><td>Product</td><td>Price</td><td>Qty</td><td>Total</td></tr>
    </thead>

    <tbody>
        <tr>
            <td><input type="text" name="product"></td>
            <td><input type="text" name="price">
            </td><td><input type="text" name="qty"></td>
            <td><input type="text" readonly="readonly" name="linetotal"></td>
            <td><a class="deleteRow"> x </a></td>
        </tr>
    </tbody>

    <tfoot>
        <tr>
            <td style="text-align: center;" colspan="5">
                <input type="button" value="Add Product" name="addrow" id="addrow">

            </td>
        </tr>

        <tr>
            <td colspan="5">
                Grand Total: Rs<span id="grandtotal"></span>
            </td>
        </tr>
        <tr>
        <td>
        In Words <span id="inworDs" ></span>

        </tr>
        <tr>
                <td>
                <input type="submit"/>

        </tr>
    </tfoot>
</table>

</form>

<script>
    $("#addrow").click(function(){
      var newRow = $("<tr>");
              var cols = "";
              cols += '<td><input type="text" name="product"/></td>';
              cols += '<td><input type="text" name="price"/></td>';
              cols += '<td><input type="text" name="qty"/></td>';
              cols += '<td><input type="text" name="linetotal" readonly="readonly"/></td>';
              cols += '<td><a class="deleteRow"> x </a></td>';
              newRow.append(cols);
        $("table.order-list").append(newRow);
    });
    $("table.order-list").on("change", 'input[name^="price"], input[name^="qty"]', function (event) {
        calculateRow($(this).closest("tr"));
        calculateGrandTotal();
    });

    $("table.order-list").on("click", "a.deleteRow", function (event) {
        $(this).closest("tr").remove();
        calculateGrandTotal();
    });

function calculateRow(row) {
    var price = +row.find('input[name^="price"]').val();
    var qty = +row.find('input[name^="qty"]').val();
    row.find('input[name^="linetotal"]').val((price * qty).toFixed(2));
}

function calculateGrandTotal(f) {
    var grandTotal = 0;
    $("table.order-list").find('input[name^="linetotal"]').each(function () {
        grandTotal += +$(this).val();
            });
    $("#grandtotal").text(grandTotal.toFixed(2));

}
</script>
</body>
</html> 
```

从jsp我得到多个值字符串数组，

谁能告诉我如何检索和设置我从 javascript 发送的值。

我需要获取值必须将其传递给数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:54:30.433

```
String[] productsBas = request.getParameterValues("product");
String[] pricesBas= request.getParameterValues("price");
 String[] qtysBas= request.getParameterValues("qty"); 

for(int i=0;i<productsBas.length;i++){

 get values here using

  productsBas[i]  & pricesBas[i] and qtysBas[i] then save it
} 
```

# java - 删除原文件失败

> ID：16104343
> 
> 赞同：1
> 
> 时间：2013-04-19T12:11:51.253
> 
> 标签：java, apache-commons-io

我们正在使用批处理文件作为窗口服务运行 jar，并将 xml 文件放在`c:/processed` 目录中；

如果 xml 格式错误，则将其移至错误文件夹；我们正在使用下面的方法将文件移动到错误文件夹但低于异常。

我认为当进程运行时，它无法将文件移动到错误文件夹。

```
FileUtils.moveToDirectory("a.xml", "c:/processed/error", false); 
```

> moveErrorFolder 中的异常：复制到“c:/processed/error/a.xml”后无法删除原始文件“c:/processed/a.xml”

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T12:58:53.617

1.  java进程无权删除文件，但如果你可以在上面写，你就可以删除它。
2.  该文件被另一个进程锁定。这通常发生在您编写使用 Excel 打开的 csv 时。
3.  该文件被java进程自身锁定，在移动文件之前关闭（）文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-22T20:34:45.330

在 reader.close() 之后放入 Thread.sleep() - 它就像魅力一样

```
reader.close();
// Thread is Explicitly made to Sleep as Threads were shared and files were not getting Moved.

Thread.sleep(10000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:13:16.753

另一个提供更多细节的异常可能嵌套在异常中，由原因属性持有

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-11T20:06:05.647

1）确保您没有在编辑器/查看器中打开 xml 或被其他进程使用。
2）在移动文件之前确保你 .close() 。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-04T05:02:47.583

你能从 apache 试试这个方法吗：

```
void org.apache.commons.io.FileUtils.moveFileToDirectory(File srcFile, File destDir, boolean createDestDir) 
```

例如

使用此导入

```
 import org.apache.commons.io.FileUtils; 
```

你的代码会是这样的：

```
 FileUtils.moveFileToDirectory(new File("c:/processed/a.xml"), new File("c:/processed/error"), false); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-04T04:17:35.603

`.close();`检查您是否在目录中打开了文件进行读取或写入，并且在尝试删除父目录之前没有调用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-02T07:58:08.990

自过去 24 小时以来，我一直在努力解决这个错误。上面的答案都不适合我。我的操作系统是 Windows 7 64 位，我使用的是 JDK 6。我尝试了 FileUtils.moveToDirectory 和 file.delete 方法。

我怀疑它与Java有关。我卸载并重新安装了 JDK 6（为了确定，我以管理员身份运行了安装程序）并重新启动了我的机器和 Eureka，错误消失了，一切都开始工作了。

现在不要问我为什么2017年我还在用JDK 6（一些企业软件****）

# java - 下载 JavaHelp 库

> ID：16104344
> 
> 赞同：0
> 
> 时间：2013-04-19T12:12:00.973
> 
> 标签：java, swing, netbeans, javahelp

我正在使用 NetBeans 中的 java swing 开发桌面应用程序，我想通过将 javahelp 库集成到系统中来在应用程序中包含在线帮助。

帮助集的元数据已创建。

但看起来我找不到下载 javahelp 库二进制分发的链接。我使用了以下链接[https://javahelp.dev.java.net/#binary](https://javahelp.dev.java.net/#binary)

但仍然无法下载。

谁能给我一个更合适的下载链接。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:18:43.937

该`JavaHelp`项目不再处于活动状态。[您可以在此处](http://download.java.net/javadesktop/javahelp/javahelp2_0_05.zip)找到二进制文件的先前版本

# jquery - IE8 上的工具提示不清晰

> ID：16104345
> 
> 赞同：1
> 
> 时间：2013-04-19T12:12:06.130
> 
> 标签：jquery, highcharts

我正在使用 Highcharts 构建应用程序，并且需要为大型企业客户支持 IE8。

这是我看到的问题。每当我将鼠标悬停在某个点上时，工具提示都会按预期显示。但是，当我将鼠标移开时，工具提示的边框仍然存在。这发生在每个点上，所以我最终在图表上得到了几个部分工具提示。如果我再次将鼠标悬停在同一点上，我会得到另一个工具提示。请参阅图片以获取示例。（我会做一个小提琴，但 jsfiddle 不支持 IE8）。

我试过分组工具提示，但这似乎没有帮助。我已经删除了任何工具提示格式化程序，但这似乎也无济于事。我很想支持 IE8 上的工具提示。任何想法发生了什么以及如何解决它？

![在此处输入图像描述](https://i.stack.imgur.com/23PvC.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T16:50:42.957

找到了！我没有指定 a `doctype`，所以页面以 IE8 Quirks 模式呈现。我添加`<!doctype html>`了更改为标准模式，这解决了问题。

# android - Videoplayer 不在 splah 屏幕中播放视频

> ID：16104348
> 
> 赞同：0
> 
> 时间：2013-04-19T12:12:15.853
> 
> 标签：android, video, splash-screen, android-video-player

我的应用程序中有一个 splahs 屏幕，我正在播放有关该活动的视频。但在某些 Android 版本（我的意思是旧版本）中，视频无法播放。我不知道该怎么办..

这是我的一些代码

```
 public void PlayVideo(){
    try{             
            videoPlayer.setDataSource(getApplicationContext(), Uri.parse("android.resource://" + getPackageName() + "/" + R.raw.afad_splash_ip4));
            videoPlayer.prepare();
        }
        catch (Exception e){

        }
    try {
          AssetFileDescriptor descriptor = getAssets().openFd("splash.mp4");             
          videoPlayer.reset();           
          videoPlayer.setDataSource(descriptor.getFileDescriptor());              
          videoPlayer.prepare();          
          }
          catch (Exception ex)
            {
              try
              {                   
               Log.v("video ", "catch");
               videoPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
               videoPlayer.setVolume(0f, 0f);
               videoPlayer.start();
               videoPlayer.setLooping(false);                   
               videoPlayer.setOnCompletionListener(new OnCompletionListener() {
                public  void onCompletion(MediaPlayer mp) {
                    Intent i = new Intent(VideoSplash.this,ListActivity.class);
                    i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);
                    overridePendingTransition(R.anim.slide_in_top,R.anim.slide_out_bottom);
                    finish();
                    }
                });
              }
              catch (Exception e)
                 {      //TODO
                     //Burada Video yerine resim koymalısın
                     //Kimi cihazlarda video oynamayabilir
                  Log.v("resim", "catch");
                  //Thats where i want to put a pic as a backgroun to my SurfaceView. and make it wait 10 secs
                 // videoSurface.setBackgroundDrawable(getResources().getDrawable(R.drawable.son_frame));
                  }
                //TODO
            //Burada Video yerine resim koymalısın
            //Kimi cihazlarda video oynamayabilir               

            }                      

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:35:32.537

试试这个代码会帮助你

```
public class VideoPlayerActivity extends Activity implements OnErrorListener,
OnPreparedListener {

LoadAsyncTask video_async_task;

private VideoView  mVideoView

public void onCreate(Bundle icicle) {

super.onCreate(icicle); 
setContentView(R.layout.video);
mVideoView = (VideoView) findViewById(R.id.mysurfaceview);
mVideoView.setMediaController(myctrl);

mVideoView.requestFocus();

video_async_task = new LoadAsyncTask();
video_async_task.execute();

}

private class LoadAsyncTask extends AsyncTask<Void, Void, Void> {

protected Void doInBackground(Void... params) { 

mVideoView.setVideoURI(Uri.parse(path));

}

} 
```

# matlab - 使用 MATLAB 中计算的 SIFT 关键点将图像 A 转换为图像 B

> ID：16104351
> 
> 赞同：0
> 
> 时间：2013-04-19T12:12:22.863
> 
> 标签：matlab, image-processing, sift

是否有可能使用计算的 SIFT 变换将图像 A 转换为图像 B？我正在寻找的是一个像“transform_using_sift”这样的函数，它的工作原理如下：

```
[fa, da] = vl_sift (A);
[fb, db] = vl_sift (B);
B_from_A = transform_using_sift(A, fa, da, fb, db); 
```

其中 B_from_A 是使用 B 的筛选对 B 的预测。

# google-chrome - 仅使用 chrome 控制台运行 selenium 命令

> ID：16104358
> 
> 赞同：3
> 
> 时间：2013-04-19T12:12:38.150
> 
> 标签：google-chrome, xpath, selenium, console, google-chrome-devtools

我想知道（如果可能的话），在使用 selenium 测试 UI 时，是否可以通过类似于运行/测试 xpath 的 chrome 控制台（开发人员控制台）运行 selenium 命令，例如使用`$x("//input[@name='inputname']")`which 将给出指定的输入/标签姓名。

这里的 selenium 命令，我的意思是例如查找一个文本框并在其中键入 [type ( locator,value )] 一个文本数据（值），仅使用 chrome 控制台而不是通过运行测试用例/脚本？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T18:00:31.167

使用`innerText`、`wholeText`或`value`属性。`$x`返回一个数组，因此必须指定一个索引。这里有些例子：

```
$x("//body")[0].innerText = 'hi'
$x("//input")[0].value = 'foo'
$x('//*[@id]')[3].firstChild.wholeText 
```

**参考**

*   [DOM Level 3 Xpath：接口 XPathResult](https://www.w3.org/TR/DOM-Level-3-XPath/xpath.html#XPathResult)

*   [MDN：text.wholeText](https://developer.mozilla.org/en-US/docs/Web/API/Text/wholeText)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-08-11T13:42:26.470

我尝试了类似 $x("//input[@name='inputname']").click

# sql - 如何编写具有相同编号的程序。Oracle & SQL Server 中的参数？

> ID：16104359
> 
> 赞同：0
> 
> 时间：2013-04-19T12:12:40.230
> 
> 标签：sql, sql-server, oracle, stored-procedures

SQL Server 存储过程：

```
CREATE PROC proc1
AS
SELECT ename FROM employee 
```

Oracle 服务器存储过程：

```
CREATE OR REPLACE PROCEDURE proc1
(
cv_1 IN OUT SYS_REFCURSOR
)
AS
BEGIN
OPEN cv_1 FOR
SELECT ename
FROM employee ;
END; 
```

是否可以在 Oracle 和 SQL Server 中使用相同数量的参数和相同的支持数据类型编写此过程？

如果可能怎么办？那么如何从 oracle 和 SQL Server 调用呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:52:37.757

我们一直这样做，而且效果很好，但是我们的系统基于 ODBC，使用 ODBC“调用”语法来调用过程。我相信此功能已添加到 Oracle 10 左右的 Oracle 驱动程序中。

例如：

{CALL proc1} 或者如果 proc1 有非引用游标参数 {CALL proc1(parm1,parm2,parm3)}

Oracle 驱动程序自动执行将引用游标转换为结果集所需的操作。我相信存在/存在排序依赖性，因为游标参数需要放在任何正常输入参数之后的最后，而不是您可以使用相同的代码返回结果集（使用完全相同的查询字符串来调用 SQL 之间的过程服务器和甲骨文）

# c++ - c++程序中的段错误；难以理解的 valgrind 输出

> ID：16104364
> 
> 赞同：0
> 
> 时间：2013-04-19T12:13:11.160
> 
> 标签：c++, gdb, segmentation-fault, valgrind, kdevelop

我目前正在编写我的第一个大型 c++ 项目，但在运行程序时遇到了分段错误。我已经尝试使用 valgrind 对其进行调试，但到目前为止还没有成功。由于程序很大，我将只显示发生错误的相关函数：

```
void RigidBody::RotateAroundAxis(   dReal Angle,
                                    dRealVector3 Axis,
                                    dRealVector3 Anchor)
{   
    std::cout<<"RotateAroundAxis BodyID: " << this->GetBodyId()<<std::endl;
    dRealMatrix3 RotationMatrix=HelperFunctions::RotateAroundAxis(Angle, Axis);
    dRealMatrix3 CurrentRotation=this->GetRotation();
    dRealVector3 Position=this->GetPosition();
    dRealMatrix3 newRotationMatrix=boost::numeric::ublas::prod(RotationMatrix,CurrentRotation);
    std::cout<<"RotateAroundAxis (Debug0) BodyID: " << this->GetBodyId()<<std::endl;    
    SetRotation(newRotationMatrix);
    std::cout<<"RotateAroundAxis Debug"<<std::endl;// This is the last line that is processed without an error.
    std::cout<<"RotateAroundAxis (Debug1) BodyID: " << this->GetBodyId()<<std::endl; // This line probably causes the error.
    //  object is now rotated but needs to be translated
    boost::numeric::ublas::bounded_vector<dReal,3> PosRelToAnchor;
    std::cout<<"RotateAroundAxis (Debug2) BodyID: " << this->GetBodyId()<<std::endl;
    for(unsigned int i=0;i<3;i++){PosRelToAnchor[i]=Position[i]-Anchor[i];};
    PosRelToAnchor=boost::numeric::ublas::prod(RotationMatrix,PosRelToAnchor);
    for(unsigned int i=0;i<3;i++){Position[i]=PosRelToAnchor(i)+Anchor[i];};
    SetPosition(Position);
} 
```

我在函数中放入了一些消息，以便追踪错误发生的位置。终端中的输出是：

```
SetRotation BodyID: 0x854de60
SetPosition0
SetPositionBodyID0x854de60
SetPosition1
SetPositionEnd
SetRotation (Debug1) BodyID: 0x854de60
SetRotationEnd
RotateAroundAxis Debug
*** Program received signal SIGSEGV (Segmentation fault) *** 
```

对“this->GetBodyId()”的函数调用之前执行没有任何问题，然后它突然产生段错误，我不知道为什么会这样。使用 valgrind，我得到以下输出：

```
==10910== Invalid read of size 8
==10910==    at 0x409AF5: RigidBody::RotateAroundAxis(double, boost::array<double, 3ul>, boost::array<double, 3ul>) (RigidBody.cpp:353)
==10910==    by 0x40FFF7: Joints::Hinge::Hinge(dxWorld*, std::string, boost::array<double, 3ul>, boost::array<double, 3ul>, boost::shared_ptr<RigidBody>, boost::shared_ptr<RigidBody>, double) (Joints.cpp:55)
==10910==    by 0x410563: BioFlexRotatory::BioFlexRotatory(dxWorld*, unsigned char, boost::array<double, 3ul>, boost::array<double, 3ul>, boost::shared_ptr<RigidBody>, boost::shared_ptr<RigidBody>, double, double, double) (BioFlexRotatory.cpp:30)
==10910==    by 0x40BE9B: Universe::AddBioFlexRotatory(unsigned char, boost::array<double, 3ul>, boost::array<double, 3ul>, boost::shared_ptr<RigidBody>, boost::shared_ptr<RigidBody>, double, double, double) (Universe.cpp:186)
==10910==    by 0x406CFE: main (main.cpp:75)
==10910==  Address 0x0 is not stack'd, malloc'd or (recently) free'd
==10910== 
==10910== 
==10910== Process terminating with default action of signal 11 (SIGSEGV): dumping core
==10910==  Access not within mapped region at address 0x0
==10910==    at 0x409AF5: RigidBody::RotateAroundAxis(double, boost::array<double, 3ul>, boost::array<double, 3ul>) (RigidBody.cpp:353)
==10910==    by 0x40FFF7: Joints::Hinge::Hinge(dxWorld*, std::string, boost::array<double, 3ul>, boost::array<double, 3ul>, boost::shared_ptr<RigidBody>, boost::shared_ptr<RigidBody>, double) (Joints.cpp:55)
==10910==    by 0x410563: BioFlexRotatory::BioFlexRotatory(dxWorld*, unsigned char, boost::array<double, 3ul>, boost::array<double, 3ul>, boost::shared_ptr<RigidBody>, boost::shared_ptr<RigidBody>, double, double, double) (BioFlexRotatory.cpp:30)
==10910==    by 0x40BE9B: Universe::AddBioFlexRotatory(unsigned char, boost::array<double, 3ul>, boost::array<double, 3ul>, boost::shared_ptr<RigidBody>, boost::shared_ptr<RigidBody>, double, double, double) (Universe.cpp:186)
==10910==    by 0x406CFE: main (main.cpp:75)
==10910==  If you believe this happened as a result of a stack
==10910==  overflow in your program's main thread (unlikely but
==10910==  possible), you can try to increase the size of the
==10910==  main thread stack using the --main-stacksize= flag.
==10910==  The main thread stack size used in this run was 8388608.
==10910== 
==10910== FILE DESCRIPTORS: 3 open at exit.
==10910== Open file descriptor 2: /dev/pts/6
==10910==    <inherited from parent>
==10910== 
==10910== Open file descriptor 1: /dev/pts/6
==10910==    <inherited from parent>
==10910== 
==10910== Open file descriptor 0: /dev/pts/6
==10910==    <inherited from parent>
==10910== 
==10910== 
==10910== HEAP SUMMARY:
==10910==     in use at exit: 5,521 bytes in 36 blocks
==10910==   total heap usage: 39 allocs, 3 frees, 5,803 bytes allocated
==10910== 
==10910== 24 bytes in 1 blocks are still reachable in loss record 1 of 36
==10910==    at 0x4C286E7: operator new(unsigned long) (vg_replace_malloc.c:287)
==10910==    by 0x40C990: Universe::AddRigidBody(std::string, dMass, boost::array<double, 3ul>, boost::numeric::ublas::c_matrix<double, 3ul, 3ul>, boost::array<double, 3ul>, std::string) (shared_count.hpp:91)
==10910==    by 0x4068AE: main (main.cpp:52)
==10910== 
==10910== 24 bytes in 1 blocks are still reachable in loss record 2 of 36
==10910==    at 0x4C286E7: operator new(unsigned long) (vg_replace_malloc.c:287)
==10910==    by 0x40C990: Universe::AddRigidBody(std::string, dMass, boost::array<double, 3ul>, boost::numeric::ublas::c_matrix<double, 3ul, 3ul>, boost::array<double, 3ul>, std::string) (shared_count.hpp:91)
==10910==    by 0x406A0E: main (main.cpp:56)
==10910== 
```

（这持续了很长一段时间。如果有帮助，我可以发布完整的输出。）

但是，这对我一点帮助都没有，因为我不知道它试图告诉我什么。搜索“valgrind Invalid read of size”也没有给我任何关于从哪里开始的提示。

那么，有关如何解决此错误的任何想法？

更新：

在此板条目之前，我尝试使用 gdb 调试错误。因为这是我第一次遇到这样的错误，所以我更喜欢 GUI 版本（KDevelop 4）。我设置了一个断点，然后跨过这些线。但是，根据调试器，this 指针指向的地址始终是恒定的（并且正确的）。一切看起来都很好，直到程序崩溃的那一行。并且崩溃报告没有告诉我任何有价值的信息（取决于我通过 this 指针调用的函数，它向我表明错误的来源在一个标准库中，例如“libstdc++.so.6”，我认为这不太可能。）。然后我尝试了 valgrind，一个专门处理这种内存访问错误的调试器（根据其他论坛条目）。

在我阅读了答案之后，我给了调试另一个机会的菜鸟方式，我插入了行 'std::cout<<"The this pointer points to" << this << std:: endl;' 在不同的位置。事实证明，在调用函数“SetRotation”后，指针确实指向 null。在这个函数内部，我写入了一个具有十二个元素的数组的第 [12] 个元素（但从零开始 - 因此在元素 [11] 处结束）。对于大多数时间使用 Matlab 的人来说，这是一个经典错误。我解决了这个问题，程序运行没有任何错误。然后我再次插入错误并使用 gdb 再次查看。但它仍然说 this 指针指向正确的位置。我不知道调试器有什么问题。不管是不更新还是什么，

因此，gdb 或 gdb 的 KDevelop GUI 都有一个错误，它掩盖了我自己的错误。

非常感谢您帮助我修复错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T12:19:04.180

> 大小为 8 的无效读取

意味着程序试图从无效的内存位置读取 8 个字节。

> 地址 0x0 没有被堆栈、malloc 或（最近）释放

意味着地址为零 - 因此您正在尝试读取空指针。

> 在 0x409AF5: RigidBody::RotateAroundAxis(double, boost::array, boost::array) (RigidBody.cpp:353)

意味着尝试执行此操作的代码位于 的第 353 行`RigidBody.cpp`，位于名为 的函数中`RotateAroundAxis`。我建议你看看那条线；如果没有明显的问题，那么也许你可以在你的代码示例中标记它，以便我们看一下。在调试器中运行代码可能也是值得的；它应该在分段错误处停止并允许您检查相关变量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T12:44:50.617

在我看来，您正在`RigidBody`通过`RigidBody*`设置为`0`.

或者，您有一个错误，`SetRotation`它使您的记忆变得面目全非。

您需要使用调试器。

# xslt - XPath Axes 与 XSLT/Xpath 中的位置路径表达式相比，性能更好

> ID：16104365
> 
> 赞同：1
> 
> 时间：2013-04-19T12:13:19.553
> 
> 标签：xslt, xpath, xslt-1.0, xslt-2.0

当我们使用 XSLT 处理 XML 时，哪一个能提供更好的性能

**XPath 轴**（即 parent、attribute、child .....）或**位置路径表达式**（即 ./..、./@attribute 、./childnode、...）

请帮助我哪一个具有更高的性能和安全的使用..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:30:55.487

它们是相同的。大多数轴只能使用完整形式来选择，但是对于最常见的轴有缩写，可以使 XPath 表达式更简洁。

*   `child::`可以省略

*   `//`==`descendant-or-self::node()`

*   `@`==`attribute::`

*   `.`==`self:node()`

*   `..`==`parent::node()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T16:31:04.270

鲍罗丁的回答几乎是正确的。

**虽然给定的表达式具有相同的效率，但它们在使用它们的语法规则上有一些细微的差别**。

例如：

```
.[someCondition]

..[someCondition] 
```

**是无效的 XPath 1.0 表达式**，并且任何兼容的 XSLT 1.0 处理器都会引发编译时错误。这些在 XPath 2.0 中是合法的。

**在 Xpath 1.0 中，应该使用这些语法上合法的表达式：**

```
self::node()[someCondition]

parent::node()[someCondition] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:55:09.750

我不确定，但如果你有性能问题（这不仅仅是一个理论问题），你应该看看`<xsl:key..`and `select="key..`. 根据需求和复杂性，这可以大大加快转换速度。

# javascript - cookie 是否被视为 DOM 树的一部分？

> ID：16104366
> 
> 赞同：2
> 
> 时间：2013-04-19T12:13:20.910
> 
> 标签：javascript, html, cookies, document-ready

我正在编写一些 Javascript，并且我知道我必须准备好任何会修改 DOM 树的文档。我还需要对 cookie 进行一些工作。这些是否被视为 DOM 树的一部分（这意味着我必须为它们准备文档）？我不相信，但我不确定。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T12:18:16.960

Cookie 不是 DOM 的一部分，它们是 HTTP 请求的请求/响应标头的一部分。

Cookies 实际上是 HTTP 请求（或 Web 应用程序）状态管理的一部分。DOM 只是数据的表示。您也可以使用带有 JSON 或 XML 有效负载的 cookie。

# android - Android viewpager weight - 全屏主题

> ID：16104369
> 
> 赞同：3
> 
> 时间：2013-04-19T12:13:38.240
> 
> 标签：android, android-viewpager

我需要查看器的帮助。

我有两个线性布局，它们将我的主视图分成 2 行。我想将 viewpager 添加到第一行，但是当主题全屏时它会覆盖整个页面。

等待您的帮助。谢谢

```
<LinearLayout
    android:id="@+id/top"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="10"
    android:orientation="vertical" >
    <widgets.Header
        android:id="@+id/headerWidget"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="2" >
    </widgets.Header>

    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="fill_parent"
        android:layout_height="0dp"
        android:layout_weight="8" >
    </android.support.v4.view.ViewPager>
</LinearLayout>
<LinearLayout
    android:id="@+id/bottom"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="10"
    android:orientation="vertical" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:15:41.147

改变你的xml代码如下

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".HomePage" >
    <Widgets.Header
        android:id="@+id/headerWidget"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.2" >
    </Widgets.Header>
    <android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:layout_weight="0.8" >
    </android.support.v4.view.ViewPager>
    <LinearLayout
        android:id="@+id/bottom"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:orientation="vertical" >
    </LinearLayout>
</LinearLayout> 
```

**笔记 ：**

我不知道为什么设置`layout_height`为全屏主题不能正确`0dp`呈现。当of设置为某些（例如 1dp）但不是或效果很好时。`ViewPager``layout_weight``layout_height``ViewPager``dp``match_parent``wrap_content`

# r - 从一列到另一列获取信息

> ID：16104372
> 
> 赞同：0
> 
> 时间：2013-04-19T12:13:48.417
> 
> 标签：r, vector, character, match

我最近开始使用 R，我正在尝试为以下问题找到解决方案：

我有`data.frame`几列。其中之一包含文件名以及所需的所有信息。示例：“13_07_26_SpeciesA_Genotype22_Column1Row2”

我想使用名称中的信息创建新列。例如基因型列带有“22”，行列带有“2”等等。

我可以单独执行此操作，`grepl`如下`gsub`所示：

```
 files <- c("13_12_26_Species_Genotype22_Column1Row2", 
       "15_12_26_Species_Genotype01_Column2Row5")  
weights <- c(20,40)           
spreadsheet <- data.frame(files,weights)  
GT22 <- grepl("Genotype22", spreadsheet$files)    
spreadsheet$GT <- gsub("TRUE","22",GT22) 
```

但是我必须检查来自不同日期等的许多文件中的> 1000个基因型。所以我试图将一个向量与所有可能的基因型进行比较，例如

```
 gt.list <- paste("Genotype",01:1000,sep="") 
```

使用电子表格$files 列，使用类似`match()`or的函数`apply()`。但我无法让它运行。基因型不按顺序排列，因此我想将“文件”列的每个单元格与我的向量中的所有条目进行比较，然后将所有匹配项写入新列（...22,01，...）。我可以针对不同的信息重写这个函数。

如果有任何帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:46:41.843

```
DF <- data.frame(
  do.call(rbind,strsplit(files,'_',fixed=T)),
  weights,
  stringsAsFactors=FALSE)
DF$GT <- substr(DF[,5],9,nchar(DF[,5]))
DF$Row <- do.call(rbind,strsplit(DF[,6],'Row',fixed=T))[,2]

#   X1 X2 X3      X4         X5          X6 weights GT Row
# 1 13 12 26 Species Genotype22 Column1Row2      20 22   2
# 2 15 12 26 Species Genotype01 Column2Row5      40 01   5 
```

我不是正则表达式奇才。

# xml - WordPress 导入器插件

> ID：16104373
> 
> 赞同：0
> 
> 时间：2013-04-19T12:13:49.233
> 
> 标签：xml, wordpress, import

我正在尝试将 .xml 备份从旧 WordPress 导入另一个 WordPress 安装。我使用了 WordPress Imported 插件来导入我的备份 .xml 文件。它向我展示了允许我匹配作者等的屏幕，然后在我单击导入后，它说存在系统错误。文件不存在。

我最近在博客上遇到了一些问题，所以我想最好将版本一起重新安装到 3.5.1。在此过程中，我还更新了 WordPress Importer 0.6.1 版本。

尝试再次导入我的备份 .xml，但现在我只得到一个空页面，什么都没有发生。

我可以确认我已经编辑了最大文件大小和内存大小，所以这不是问题。

任何帮助，请！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-22T05:40:22.290

我在**4.7.2**`ec2`和`rds`.

## 我是如何发现问题的

我将此添加到我的`wp-config.php`文件中：

```
define('WP_DEBUG', true);
/**
 * Just a convenient check so you can leave the next few lines unchanged
 * for next time you need debugging, and just switch true/false above.
 */
if (WP_DEBUG) {
    //Handle all errors regardless of error level
    ini_set('error_reporting', -1);
    //Display errors directly in the browser
    ini_set('display_errors', 'On');
} 
```

上面的设置为我启用了调试模式，以找到 OP 得到的错误。

## 我做了什么来解决这个问题

然后我查看了另一个 WordPress 问题跟踪器，发现我需要运行：

```
sudo yum install php-xml 
```

此命令安装`php xml`库，以便 WordPress 可以实际读取`xml`文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:47:43.077

@Rikesh 在您的评论中的方法应该可以工作，但是如果您在使用 WordPress 导入器时仍然遇到问题，我很幸运地使用了[WP Migrate DB 插件](http://wordpress.org/extend/plugins/wp-migrate-db/)，用于串联使用的数据库，只需将文件通过 FTP 传输到新服务器。

# python - 无法拆分看似编码的字符串

> ID：16104374
> 
> 赞同：2
> 
> 时间：2013-04-19T12:13:59.803
> 
> 标签：python, unicode, encoding, latin1

在解析来自网络请求的数据时，我遇到了以下字符串 -

```
dateRange = 'September\xa04,\xa01978 – September 1980' 
```

提取字符串的编码似乎是 Latin-1（基于`\xa0`）。我通过用空格替换代码来摆脱它。

```
dateRange = dateRange.replace(u'\xa0', u' ') 
```

撇开这一点不谈，我不能在连字符 (-) 上拆分字符串。

当我按如下方式调用 split() 时：

```
print(dateRange.split('-')) 
```

输出如下：

```
['September\xa04,\xa01978 – September 1980'] 
```

就好像字符串中没有连字符一样。我觉得它与编码有关，但我似乎无法完全理解这个问题。

那么，如何解决这个问题呢？

编辑：

我已经尝试了以下无济于事：

```
dateRange.split('\-') 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T12:19:05.887

那不是[连字符](http://www.fileformat.info/info/unicode/char/2d/index.htm)。那是[U+2013 ᴇɴ ᴅᴀsʜ](http://www.fileformat.info/info/unicode/char/2013/index.htm)。

只需将其复制并粘贴到您的拆分呼叫中：

```
dateRange.split('–') 
```

或者，您可以将其替换为实际的连字符。确保将破折号复制并粘贴到替换调用中:)

# ios - 视图未屏蔽到父视图

> ID：16104378
> 
> 赞同：0
> 
> 时间：2013-04-19T12:14:18.163
> 
> 标签：ios, objective-c, ipad, cocoa-touch, ipad-2

![请参考此屏幕截图](https://i.stack.imgur.com/9KjSC.png)

我已将线视图添加到一个内容视图，同时添加内容视图，我设置`UIViewAutoResizingMask`了，但我的视图正在切换到父视图几分钟。

```
lineView.autoresizingMask = UIViewAutoresizingFlexibleWidth|UIViewAutoresizingFlexibleLeftMargin|UIViewAutoresizingFlexibleRightMargin; 
```

# jquery - tinymce 删除文本空格和换行符

> ID：16104384
> 
> 赞同：2
> 
> 时间：2013-04-19T12:14:35.187
> 
> 标签：jquery, tinymce

我已经像这样初始化了 tinyMCE：

```
 $('#description').tinymce({
        // Location of TinyMCE script
        script_url : 'tinymce/jscripts/tiny_mce/tiny_mce.js',
        // General options
        width : "830",
        height: "300",
        theme : "advanced",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_toolbar_location : "top",
        theme_advanced_buttons1 : "bold,italic,underline,strikethrough,bullist,numlist,",
        theme_advanced_buttons2 : "",
        theme_advanced_buttons3 : "",
        theme_advanced_buttons4 : "",
        force_br_newlines : true,
        force_p_newlines : false,
        gecko_spellcheck : true,  
        forced_root_block : '', // Needed for 3.x

        plugins : "paste"

    }); 
```

我有一些文本的文本区域。当我运行它时，它会删除所有空格和换行符并在一行中显示文本这是我的文本

“全新！！！

位于迪拜码头奥拉塔的超大三卧室公寓出租

位于高楼层，可俯瞰滨海壮丽景色"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:32:16.053

您可以通过添加另一个参数来管理它 remove_linebreaks

```
$('#description').tinymce({
// Location of TinyMCE script
    script_url : 'tinymce/jscripts/tiny_mce/tiny_mce.js',
    // General options
    width : "830",
    height: "300",
    theme : "advanced",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    theme_advanced_toolbar_location : "top",
    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,bullist,numlist,",
    theme_advanced_buttons2 : "",
    theme_advanced_buttons3 : "",
    theme_advanced_buttons4 : "",
    force_br_newlines : true,
    force_p_newlines : false,
    gecko_spellcheck : true,  
    forced_root_block : '', // Needed for 3.x

    remove_linebreaks : false,

    plugins : "paste"}); 
```

但这取决于您使用的 tinyMCE 版本。因为在下面的站点中，他们说该属性在某些版本中不可用。 [http://www.tinymce.com/wiki.php/Configuration3x:remove_linebreaks](http://www.tinymce.com/wiki.php/Configuration3x:remove_linebreaks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-09T15:38:56.893

万一将来有人遇到这种情况，我们会遇到换行符被剥离的问题，并且尝试了我们能找到的几乎所有建议，但没有运气。

我在这里遇到了这个解决方案：http: [//community.tinymce.com/forum/viewtopic.php](http://community.tinymce.com/forum/viewtopic.php?id=5636) ?id=5636 ，它完美地做到了。

在 tinyMCE.init() 函数中添加以下两行，默认情况下它们似乎设置为 false。

```
force_p_newlines : true,
force_br_newlines : true 
```

# c++ - 使用 MinGW 编译的 DLL 在使用 Visual Studio 编译器编译的 C++ 代码中不起作用

> ID：16104388
> 
> 赞同：2
> 
> 时间：2013-04-19T12:14:45.213
> 
> 标签：c++, c, dll, mingw

我用MinGW编译了一个dll。为此，我使用了以下命令：

```
gcc -shared -o MathsDll.dll MathsDll.c -Wl,--output-def,MathsDll.def,--out-implib,libMathsDll.a

lib /machine:i386 /def:MathsDll.def 
```

然后我尝试从 C 代码中使用该 dll。我的编译命令如下：

```
cl mainCode.c MathsDll.lib 
```

它适用于这种情况，但是当我将 mainCode.c 文件更改为 mainCode.cpp 时出现错误：

mainCode.obj：错误 LNK2019：未解析的外部符号“__declspec(dllimport) int _ *cdecl add(int,int)”（* _imp_?add@@YAHHH@Z）在函数 _main mainCode.exe 中引用：致命错误 LNK1120：1 个未解析的外部

为什么那个 dll 在 C 代码而不是 C++ 中工作？

顺便说一句，我使用了 MinGW 的网站作为参考。 [http://www.mingw.org/wiki/MSVC_and_MinGW_DLLs](http://www.mingw.org/wiki/MSVC_and_MinGW_DLLs)

主代码.cpp：

```
#include <stdio.h>
#include "MathsDll.h"

int main()
{
printf("%d",add(3,4));
} 
```

MathsDll.h：

```
#ifdef MATHDLL_EXPORTS
#define MATHDLL_API extern "C" __declspec(dllexport) 
#else
#define MATHDLL_API __declspec(dllimport) 
#endif

MATHDLL_API int add(int,int);
MATHDLL_API int multiply(int,int); 
```

MathsDll.c / MathsDll.cpp：

```
#include "MathsDll.h"

int add(int a,int b)
{
    return a+b;
}

int multiply(int a,int b)
{
    return a*b;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:25:10.350

> 如果您在用 C 语言或 C++ 语言模块访问的用 C 语言编写的 DLL 中的函数，您应该使用 __cplusplus 预处理器宏来确定正在编译的语言，然后使用 C 链接声明这些函数（如果正在使用）来自 C++ 语言模块。

[http://msdn.microsoft.com/en-us/library/ys435b3s.aspx](http://msdn.microsoft.com/en-us/library/ys435b3s.aspx)

# spring - 如何将资源包添加到 Spring-JSF 应用程序

> ID：16104390
> 
> 赞同：1
> 
> 时间：2013-04-19T12:14:50.470
> 
> 标签：spring, jsf, spring-mvc, internationalization

我有一个 spring-jsf 集成应用程序。当我尝试从 faces-config.xml 的资源包中获取消息时，它运行没有问题。但我想将此资源包移动到 spring applicationContext.xml 但问题是，它找不到我的资源包。这是我的面孔配置；

```
 <faces-config xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">
    <application>
        <el-resolver>org.springframework.web.jsf.el.SpringBeanFacesELResolver</el-resolver>

         <resource-bundle>
                  <base-name>/resources/locale/messages</base-name>
                   <var>msg</var>
         </resource-bundle>
         <locale-config>
                   <default-locale>es</default-locale>
                   <supported-locale>en</supported-locale>
                   <supported-locale>fr</supported-locale>
          </locale-config>

    </application>
</faces-config> 
```

和我的 applicationContext.xml

```
 <bean id="localeResolver" class="org.springframework.web.servlet.i18n.SessionLocaleResolver">
        <property name="defaultLocale" value="es" />
    </bean>

<bean id="msg"
      class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
    <property name="basename" value="classpath:messages" />
    <property name="useCodeAsDefaultMessage" value="true" />
    <property name="defaultEncoding" value="UTF-8"/>
    <property name="cacheSeconds" value="1" />
</bean> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:10:11.460

看起来`<base-name>`元素不正确。

```
<resource-bundle>
  <base-name>Messages</base-name>
  <var>msgs</var>
</resource-bundle>
<locale-config>
  <default-locale>en_US</default-locale>
  <supported-locale>nl</supported-locale>
  <supported-locale>es</supported-locale>
</locale-config> 
```

资源包的基本名称是属性文件的前缀。JSF 足够聪明，可以确定语言环境并从类路径中为属性文件派生正确的文件名。

例如。

> Messages_en_US.properties
> 
> Messages_es.properties

上面的摘录显示了默认语言环境设置为英语以及下面列出的其他支持的语言环境。当具有此首选语言环境的访问者请求您的 JSF 页面时，它将足够聪明地从适当名称的资源包中检索属性值。

*[摘自 BalusC 的资源包教程](http://jdevelopment.nl/internationalization-jsf-utf8-encoded-properties-files/)*

```
<application>
    <locale-config>
        <default-locale>en_US</default-locale>
        <supported-locale>nl</supported-locale>
        <supported-locale>es</supported-locale>
    </locale-config>
    <resource-bundle>
        <base-name>com.example.faces.i18n.Text</base-name>
        <var>text</var>
    </resource-bundle>
</application> 
```

可以做到这一点的另一种方法是实现您自己的 ResourceBundle 类。

```
public class Text extends ResourceBundle { 
```

链接教程中列出了有关如何执行此操作的详细说明。

实现自己的资源包的额外好处是，您可以将其声明为具有 Application Scope 的 Spring bean，并且可以通过 DI 将其推送到整个应用程序中的其他代码，以防您需要访问代码中的各种资源包属性。

# winjs - 如何实现 WinJS 滚动视图缩放不起作用

> ID：16104393
> 
> 赞同：0
> 
> 时间：2013-04-19T12:14:58.343
> 
> 标签：winjs

WinJS 滚动视图缩放不起作用ac

如何在 winjs 应用程序中使用 scrollviewer 实现图像缩放功能？我已经尝试过来自 MSDN 的示例，但这不起作用..任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:31:43.330

您需要使用一些 CSS 属性来实现图像缩放。我在 codeSHOW 的缩放演示中完成了此操作 - [http://codeshow.codeplex.com](http://codeshow.codeplex.com)（源代码）和[http://aka.ms/codeshowapp（Windows](http://aka.ms/codeshowapp) 8 应用程序）。

它看起来像这样：

```
#container {
    width:1000px;
    height:600px;
    overflow:scroll;
    -ms-content-zooming:zoom;
    -ms-content-zoom-limit-max:1000%;
    -ms-content-zoom-limit-min:20%;
} 
```

# c# - 如何使用 string.Format() 函数在 C# 中对齐字符串？

> ID：16104394
> 
> 赞同：5
> 
> 时间：2013-04-19T12:15:03.753
> 
> 标签：c#, .net, string

输出到word文档（docx）。

我想使用 C# 4.0 string.Format 制作这样的输出：

```
string1: stringValue1,  string2:stringValue2
string4: stringValue4,  string5:stringValue5
string6: stringValue6,  string7:stringValue7
string8: stringValue8,  string9:stringValue9 
```

我正在使用`string.Format("{0,-10} {1,-10}",string1,string2)`，但它什么也没做。有没有办法使用 string.Format() 对齐字符串？我看到了 '\t' 解决方案，但如何将它添加到 string.Format() 中？

这是我的代码和输出：

```
string titel = HttpUtility.HtmlEncode(docItem.Title);
                    string href = docItem.FullURL;
                    string title = string.Format("{0}", titel);
                    string author = docItem.Author;
                    string date = docItem.ChangedDate.Date.ToShortDateString();
                    CreateTextBoxConentParagraph(doc, string.Format("Title: <a href='{0}'>{1}</a> Author: {2} Geändert an: {3}",href,title.PadRight(20),author.PadRight(20), date),string.Format("chunkId_{0}", i++)); 
```

输出：标题：作者：aaa Geändert an：19.04.2013

标题：第二作者：aaa Geändert an：18.04.2013

标题：slika 作者：aaa Geändert an：18.04.2013

标题：dm 作者：aaa Geändert an：18.04.2013

标题：Mathias 作者：aaa Geändert an：19.04.2013

标题：QQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQQ作者：aaa Geändert an：19.04.2013

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T12:17:20.197

尝试使用`PadLeft`和`PadRight`方法。例如：

```
string.Format("{0} {1}",string1.PadRight(25),string2.PadRight(25)) 
```

您也可以使用字符来填充空格。来自[MSDN](http://msdn.microsoft.com/en-us/library/36f2hz3a.aspx)：

```
string str = "forty-two";
char pad = '.';
Console.WriteLine(str.PadRight(15, pad));    // Displays "forty-two......".
Console.WriteLine(str.PadRight(2,  pad));    // Displays "forty-two". 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T12:29:29.027

像这样格式化值可以正常工作，但是您需要指定一个比字符串值更长的长度，否则它不会添加任何空格。

但是，如果您想在值后面加逗号并在其后添加填充，则需要将逗号放在值中，然后对其进行格式化。

例子：

```
string string1 = "asdf";
string string2 = "ffs";
string string3 = "What about me?";
string string4 = "gahah";
string string5 = "kjshdfkjh";
string string6 = "fg";
string string7 = "kkkdd";
string string8 = "asdasdf";
string string9 = "jjfjj";

Console.WriteLine(String.Format("string1: {0,-10} string2: {1,-10}", string1 + ",", string2));
Console.WriteLine(String.Format("string4: {0,-10} string5: {1,-10}", string4 + ",", string5));
Console.WriteLine(String.Format("string6: {0,-10} string7: {1,-10}", string6 + ",", string7));
Console.WriteLine(String.Format("string8: {0,-10} string9: {1,-10}", string8 + ",", string9)); 
```

输出：

```
string1: asdf,      string2: ffs
string4: gahah,     string5: kjshdfkjh
string6: fg,        string7: kkkdd
string8: asdasdf,   string9: jjfjj 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T12:19:15.143

以下示例的导入部分是

```
String.Format("{0,-12}{1,8}{2,12}{1,8}{2,12}{3,14}\n",
                                      "City", "Year", "Population", "Change (%)") 
```

请看下面的 MSDN 示例

```
public static void Main()
    {
        // Create array of 5-tuples with population data for three U.S. cities, 1940-1950.
        Tuple<string, DateTime, int, DateTime, int>[] cities = 
      { Tuple.Create("Los Angeles", new DateTime(1940, 1, 1), 1504277, 
                     new DateTime(1950, 1, 1), 1970358),
        Tuple.Create("New York", new DateTime(1940, 1, 1), 7454995, 
                     new DateTime(1950, 1, 1), 7891957),  
        Tuple.Create("Chicago", new DateTime(1940, 1, 1), 3396808, 
                     new DateTime(1950, 1, 1), 3620962),  
        Tuple.Create("Detroit", new DateTime(1940, 1, 1), 1623452, 
                     new DateTime(1950, 1, 1), 1849568) };

        // Display header 
        string header = String.Format("{0,-12}{1,8}{2,12}{1,8}{2,12}{3,14}\n",
                                      "City", "Year", "Population", "Change (%)");
        Console.WriteLine(header);
        string output;
        foreach (var city in cities)
        {
            output = String.Format("{0,-12}{1,8:yyyy}{2,12:N0}{3,8:yyyy}{4,12:N0}{5,14:P1}",
                                   city.Item1, city.Item2, city.Item3, city.Item4, city.Item5,
                                   (city.Item5 - city.Item3) / (double)city.Item3);
            Console.WriteLine(output);
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T13:34:45.190

如果您正在写入 DOCX 格式，则应该使用[Office Open XML 格式](http://en.wikipedia.org/wiki/Office_Open_XML)。（[有关更多详细信息，请参见此处](http://msdn.microsoft.com/en-us/library/office/bb448854.aspx)。）

然后要以表格格式对齐数据，您应该在文档中插入一个表格，并用您想要的数据填充表格。

[下面是一些示例代码](http://msdn.microsoft.com/en-us/library/office/cc850841.aspx)，演示了如何以编程方式将表插入 DOCX 文件。

您应该能够隐藏表格的边框，以便您只剩下表格单元格中的文本可见。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T12:18:20.153

您可以看到第二个代码示例[http://msdn.microsoft.com/en-us/library/system.string.format.aspx](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)。

我也曾经使用 padLeft 和 padRight 方法

# sql - 将 Access 行迁移到现有 SQL 表的方法

> ID：16104395
> 
> 赞同：0
> 
> 时间：2013-04-19T12:15:06.153
> 
> 标签：sql, ms-access, migration

我使用 SSMA 5.2 将 Access 2010 数据库迁移到 SQL 2005 (SP3)。SQL 数据库是 ASP.NET 应用程序的一部分，目前正在生产中。但是，用户也一直在将新记录插入原始 Access 文件的表中，现在我需要将这些新行插入 SQL 表中。大约有 100 多张桌子。

不幸的是，如果我再次尝试运行 SSMA，它需要我覆盖 SQL 表。如果我这样做，我将在系统上线后将已添加的新行释放到 SQL 表中。我只需要插入 Access 中的新行。

是否有其他可用的工具可供我使用？

感谢是否有人可以帮助我解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:30:02.027

为什么不使用 SSMA 将 Access DB 迁移到第二个 SQL2005，使用完全相同的过程。之后，您可以编写一个脚本来合并每个数据库中的每个表。

# java - Java 图形库支持 DOT 格式

> ID：16104396
> 
> 赞同：2
> 
> 时间：2013-04-19T12:15:12.547
> 
> 标签：java, graph, dot

我正在寻找一个类似于 JUNG ( [http://jung.sourceforge.net/](http://jung.sourceforge.net/) ) 的 java 库，但支持 DOT 语言。建立在 GraphViz 之上的 Grappa 支持 DOT，但它需要 GraphViz 二进制文件。纯 java 库更容易分发我的程序。

# struts2 - struts2.0.14版本隐藏action类的扩展

> ID：16104400
> 
> 赞同：0
> 
> 时间：2013-04-19T12:15:27.263
> 
> 标签：struts2, struts, action

我需要在 Struts2.0.14 版本中隐藏动作扩展。

通过配置以下内容，它在 Struts2.1.8 版本中运行良好。但它在 2.0.14 版本中不起作用，我遇到了这些错误（我提到了下面的错误）

在`web.xml`我将过滤器代码更新为

```
<filter>
    <filter-name>struts2</filter-name>
    <filter-class>
        org.apache.struts2.dispatcher.FilterDispatcher
    </filter-class>
</filter>
<filter-mapping>
    <filter-name>struts2</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

然后在 struts.xml 我像这样更新

```
<constant name="struts.action.extension" value=""/> 
```

像这样更新的结果是：

> 我可以通过 [http://ip.com:8080/project/actionName](http://ip.com:8080/project/actionName)访问操作文件。但是没有加载 javascript、css 和图像文件。所以我尝试使用struts.action.excludePattern，但它不适用于2.0.14版本

然后在 struts.xml 我像这样更新

```
<constant name="struts.action.extension" value=","/> 
```

像这样更新的结果是：

> 我可以通过 [http://ip.com:8080/project/actionName](http://ip.com:8080/project/actionName)访问操作文件。如果最后没有给出点，它就不起作用。给出 value=",,action" 或 value=",action" 时会出现相同的结果

谁能告诉我，我们是否可以删除struts2.0.14版本中的扩展。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:17:02.823

```
<struts>

  <constant name="struts.action.extension" value=""/> 

  <package name="default" namespace="/" extends="struts-default">
    <action name="SayStruts2">
        <result>pages/printStruts2.jsp</result>
    </action>
  </package>

</struts> 
```

[看这里](http://www.mkyong.com/struts2/how-to-remove-the-action-suffix-extension-in-struts-2/)

# node.js - 在nodejs中使用Writable Stream指定写入文件的位置

> ID：16104406
> 
> 赞同：4
> 
> 时间：2013-04-19T12:15:52.520
> 
> 标签：node.js, streamwriter

我想使用 nodejs 中的 Writable Stream 多次写入文件。问题是我也想指定这个作者的位置。

这是一些背景 - 我想创建一个多线程下载器。作为响应的数据需要保存到磁盘。数据块的顺序可以是随机的，这就是为什么我需要将位置参数也传递给可写流。

我使用可写流而不是 fs.write 因为文档是这样说的-

> 请注意，在同一个文件上多次使用 fs.write 而不等待回调是不安全的。对于这种情况，强烈建议使用 fs.createWriteStream。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T14:07:53.987

您可以使用 start 选项执行此操作，但是，它要求文件存在并且大小 >= offset + chunkToWrite.length。这将使您重新使用 fs.writeFile 和一些虚拟内容，其大小 >= 要下载的文件的大小，并且需要等待初始写入的回调。例如：

```
var buffer = new Buffer (fileSize);
buffer.fill('0');

fs.writeFile('./file', buffer, function() {
  var writeStream = fs.createWriteStream('./file',{flags: 'r+', mode: 0777, start: 10});
  writeStream.write('HELLO AFTER 10');
}); 
```

# ruby-on-rails - 如何使用 HAML 获取变量值？

> ID：16104407
> 
> 赞同：1
> 
> 时间：2013-04-19T12:15:54.347
> 
> 标签：ruby-on-rails, haml

我有一点检入模型：

```
class Customers < ActiveRecord::Base
  def check_user_name(name, email)
    name = Customers.where(:name => name)
    email = Customers.where(:email => email)
    if name && email    
      @answer = 'Question was send to us. Thank you.'
    else 
      @answer = 'ERROR, no such name or email.'    
    end
  end 
end 
```

并查看（haml 文件）：

```
=@answer 
```

但是页面上没有文字......空......请解释我为什么？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:27:41.433

尝试这个：

```
class Customers < ActiveRecord::Base #why this model plural?
  def check_user_name(name, email)
    result = {}
    result[:name] = where(:name => name)
    result[:email] = where(:email => email)
  end
end

class CustomersController < ApplicationController
  result = Customers.check_user_name(name, email)
  if result[:name].present? && result[:email].present?
      @answer = 'Question was send to us. Thank you.'
    else 
      @answer = 'ERROR, no such name or email.'    
    end
end

 =@answer 
```

控制器中的所有实例变量都传递到视图中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:18:37.853

您的模型中的实例变量无法从您的视图中访问。

*控制器*中的实例变量是您将数据传递到视图的方式。

尝试从模型方法中返回字符串，然后将其分配给`@answer`控制器中的变量。例如。`@answer = cust.check_user_name(params[:name], params[:email])`

# vb6 - 对于 vb 6 的 Crystal 报表 9，在导出报表期间，我只想限制用户在导出组合中只能看到 pdf，有没有办法做到这一点？

> ID：16104408
> 
> 赞同：-1
> 
> 时间：2013-04-19T12:15:55.503
> 
> 标签：vb6, crystal-reports

对于 Visual Basic 6 的 Crystal 报表 9，您可以将报表导出为各种文件格式，例如 pdf、excel、word、rpt 等。如果我只是想限制用户在导出选择的组合中只能看到 pdf，有没有办法做吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-05-10T10:23:12.160

```
Sleep 1000
Dim crapp As CRAXDRT.Application
Dim oRpt As CRAXDRT.Report

Set crapp = New CRAXDRT.Application
Set oRpt = crapp.OpenReport("E:\Income Tax\Reports\RptTotalCustomers.rpt", 1)
oRpt.ExportOptions.DestinationType = crEDTDiskFile
oRpt.ExportOptions.DiskFileName = "E:\Income Tax\dummy.xls"

oRpt.ExportOptions.FormatType = crEFTExcel80

oRpt.ExportOptions.ExcelUseConstantColumnWidth = True
oRpt.Export False 
```

# windows - Robocopy 是否完全克隆 C 盘（操作系统盘）

> ID：16104409
> 
> 赞同：0
> 
> 时间：2013-04-19T12:15:58.610
> 
> 标签：windows, clone, windows-server-2008-r2, robocopy, vhd

我正在尝试使用 Robocopy 创建 Window server 2008 的 C 驱动器的镜像（副本）。命令是

C:>Robocopy V:\ M:\ /MIR /R:1 /W:1

我的“C:\”驱动器由操作系统组成，并包含一些与网络/其他用户共享的文件夹。“C:\”驱动器的大小约为 24 Gb，但使用上述 robocopy 命令它仅复制 23 GB。当我尝试将该新驱动器用作 VM 的引导驱动器时。虚拟机无法启动并显示启动失败消息。

上述命令同样适用于不包含操作系统的其他数据驱动器“D:\”。请注意，在这两种情况下，我都手动关闭了在运行上述命令之前使用“C:\”和“D:\”驱动器且未使用的虚拟机。

现在我的问题是

1.  Robocopy 在复制操作系统驱动器“C:\”时是否有问题？

2.  它是否留下了一些引导文件或分区文件或引导操作系统所需的任何其他文件。

3.  Robocopy 是否有任何与权限相关的问题

4.  另一种选择是什么，比如我们可以使用 Xcopy。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-21T12:30:13.500

1.  不是靠它自己，而是 robocopy 对它的功能有一些限制。例如，系统锁定以供读取的文件将不会被复制。

2.  可能会留下一些系统文件（我从未测试过），但我认为系统需要知道文件被复制到磁盘上的哪个位置，而 robocopy 不会出现这种情况。

3.  robocopy 将具有与执行它的用户相同的权限。某些系统特权文件可能无法访问。

4.  xcopy 在这方面不会比 robocopy 好。正如 Pradeep 所说，使用 Norton Ghost 或其他[磁盘克隆系统](http://en.wikipedia.org/wiki/List_of_disk_cloning_software)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:02:52.970

Robocopy 并非旨在克隆系统驱动器，因此您无法从此类备份启动。您必须使用其他一些实用程序，例如[Norton Ghost](http://us.norton.com/ghost/)。

# jquery - 在处理请求时使用 jquery 阻止 UI

> ID：16104411
> 
> 赞同：-1
> 
> 时间：2013-04-19T12:15:57.363
> 
> 标签：jquery, jquery-ui

我的要求是在请求处理过程中阻止 ui，并在处理完成时解除阻止 ui。我为此使用 jQuery blockui 插件。我不知道如何使用它，以便只有在请求正在进行时才会阻止 ui。我不希望用户点击屏幕来解锁 UI。UI 应该在页面开始加载时被阻止，并且在页面完全加载时应该被解除阻止。请求不是 ajax 请求。请给一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:21:43.050

我通常在 ui 部分/整个屏幕上放一个 leyer，部分透明和一条消息

```
function camoOn(){
    $("#camoflager").show();
}

function camoOff(){
        $("#camoflager").hide(); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:22:00.310

尝试使用这个

```
 <script>

$(document).load(function(){
   $.blockUI();
});

$(document).ready(function(){
      $.unblockUI();

});
</script> 
```

# image-processing - Image Magick / 检测图像中包含的颜色

> ID：16104420
> 
> 赞同：9
> 
> 时间：2013-04-19T12:16:28.757
> 
> 标签：image-processing, colors, imagemagick, pixel

给出图像中包含的颜色数组的简单过程是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T15:24:21.253

ImageMagick 的“转换”命令可以生成直方图。

```
$ convert image.png -define histogram:unique-colors=true -format %c histogram:info:-

19557: (  0,  0,  0) #000000 gray(0,0,0)
 1727: (  1,  1,  1) #010101 gray(1,1,1)
 2868: (  2,  2,  2) #020202 gray(2,2,2)
 2066: (  3,  3,  3) #030303 gray(3,3,3)
 1525: (  4,  4,  4) #040404 gray(4,4,4)
   .
   .
   . 
```

根据您选择的语言以及您希望如何表示颜色，您可以从这里开始很多方向。这是一个快速的 Ruby 示例：

```
out = `convert /tmp/lbp_desert1.png \
               -define histogram:unique-colors=true \
               -format %c histogram:info:- \
       | sed -e 's/.*: (//' \
       | sed -e 's/).*//'`

out.split("\n")
    .map{ |row| row.split(",").map(&:to_i) }

# => [[0, 0, 0], [1, 1, 1], [2, 2, 2], [3, 3, 3], [4, 4, 4] ..... 
```

# bash - 使用 -execdir 查找不执行命令

> ID：16104421
> 
> 赞同：0
> 
> 时间：2013-04-19T12:16:33.743
> 
> 标签：bash, gcc, find

我正在尝试编写一个脚本来读取源文件列表并`gcc`使用以下命令编译它们：`find $source -name '*.c' -or -name '*.cpp' -execdir gcc {} -o $output \;`我能够找到源文件，但它们不是用`gcc`. 我必须做什么才能真正编译它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T18:54:54.370

该`-execdir`操作作为表达式的一部分进行评估。`-a`优先于`-o`，因此`find`表达式如下：

```
find $source \( -name '*.c' \) -or \( -name '*.cpp' -execdir gcc {} -o $output \; \) 
```

您需要在表达式中添加括号以强制`find`按照您的意愿行事：

```
find $source \( -name '*.c' -or -name '*.cpp' \) -execdir gcc {} -o $output \; 
```

一些更简单的例子：

```
# touch a b
# find . -name a -o -name b -print
./b
# find . -name a -print -o -name b
./a
# find . \( -name a -o -name b \) -print
./b
./a 
```

# c# - EF 5 TPT 继承抽象类问题

> ID：16104422
> 
> 赞同：2
> 
> 时间：2013-04-19T12:16:34.023
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-5

在我的项目中，我有一个应该映射到数据库的基类：

```
public abstract class EntityBase
{
    protected EntityBase()
    {
        UniqueId = Guid.NewGuid();
        CreationDate = DateTime.Now;
        LastModified = DateTime.Now;

    }

    #region Properties
    public Int64 Id { get; set; }
    public Guid UniqueId { get; set; }
    public byte[] Version { get; set; }
    public DateTime CreationDate { get; set; }
    public DateTime LastModified { get; set; }
    #endregion

    #region Navigation Properties
    public virtual long CreatedBy { get; set; }
    public virtual long UpdatedBy { get; set; }
    #endregion

} 
```

并且一些实体具有共享属性，因此我为那些不应该映射的实体创建了另一个基础，甚至共享的属性也应该映射到它自己的实体中：

```
[Serializable]
public abstract class ApplicationEntityBase : EntityBase
{

    #region Properties
    public string Title { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public string Icon { get; set; }
    #endregion

} 
```

现在的问题是当我尝试创建数据库时，Entity Framework 为 Entity Base 创建了大约 20 个表！

映射是：

```
 public class EntityMapping : EntityTypeConfiguration<EntityBase>
{
    public EntityMapping()
    {

        ToTable("Entity");

        HasKey(e => e.Id);
        Property(e => e.Id).HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);
        Property(e => e.UniqueId).IsRequired();
        Property(e => e.Version).IsRequired().IsRowVersion();
        Property(e => e.CreationDate).IsRequired();
        Property(e => e.LastModified).IsRequired();
        Property(e => e.Order);
        Property(e => e.CreatedById).IsRequired();
        Property(e => e.UpdatedById).IsRequired();

    }
} 
```

应用程序实体映射的示例是：

```
 public abstract class ApplicationMappingBase<TEntity> : EntityTypeConfiguration<TEntity>
   where TEntity : ApplicationEntityBase
{
    protected ApplicationMappingBase()
    {
        //Map(m => m.ToTable(typeof(TEntity).Name));

        Property(e => e.Title).IsRequired();
        Property(e => e.Name).IsRequired();
        Property(e => e.Description);
        Property(e => e.Icon);
    }
}

public class ActionMapping : ApplicationMappingBase<Entities.Core.Security.Action>
{
    public ActionMapping()
        : base()
    {
        Map(m => m.ToTable("Action"));

        Property(e => e.IsGeneral).IsRequired();
        Property(e => e.OnBefore).IsOptional();
        Property(e => e.OnAfter).IsOptional();
        Property(e => e.DoneMessage).IsOptional();
        HasMany(d => d.Activities).WithRequired(t => t.Action);
    }
} 
```

你能告诉我我的代码有什么问题吗？难道我做错了什么？我阅读了很多文章，包括[http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table- per-hierarchy-tph.aspx](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)但没有发现与我的情况相同的情况

# matlab - 数字类的大小

> ID：16104423
> 
> 赞同：1
> 
> 时间：2013-04-19T12:16:35.210
> 
> 标签：matlab

*[如何知道 MATLAB 中变量的大小](https://stackoverflow.com/q/4845561/974555)*问题解决了如何判断内存中变量的大小。但是有没有办法根据数字类来判断大小？我正在寻找的是一个实现简单映射表的内置函数：

*   `double`-> 8
*   `single`-> 4
*   `int32`-> 4
*   `byte`-> 1

...ETC。有什么函数可以计算这个，还是我需要自己实现一个小表？

请注意，这*不是*`whos`我要找的。虽然显示现有对象的内存使用情况，但我想估计我还没有的数据的内存使用情况。*`whos`*

 *在`numpy`中，我可以使用以下`itemsize`属性实现此目的`dtype`：

```
In [6]: dt = dtype([("A", float32, (5,))])

In [7]: M = empty(5, dtype=dt)

In [8]: M.dtype.itemsize
Out[8]: 20 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T13:11:55.720

不知道你为什么不想使用`whos`，因为这正是你实现这样一个功能的方式：

```
function numBytes = sizeOf(dataClass)

    % create temporary variable of data type specified
    eval(['var = ' dataClass '(0);']); 

    % Use the functional form of whos, and get the number of bytes   
    W = whos('var');
    numBytes = W.bytes;

end 
```

像这样使用：

```
>> a = 4;
>> sizeOf(class(a))
ans = 
    8 
```

或者，根据您在评论中描述数据的方式，

```
>>  your_data_cell = { 
        uint32(5)   int8(4)
        single(5)   char(4)
    };
>> cellfun(@(x) sizeOf(class(x)), your_data_cell)
ans =
     4     1
     4     2 
```

我认为`sizeOf()`比直接映射到内部数据类型更可取，因为它同样适用于用户定义的数据类型，这些数据类型可以通过将“0”传递给构造函数来构建。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T15:15:45.173

如果您只需要一个简单的字符串单元数组（类名）比较并映射回该类的单个元素的大小（以字节为单位），那么我将采用硬编码的解决方案：

```
function out = class2byte(in)
numclass = {'double'; 'single'; 'int8'; 'int16'; 'int32'; 'int64'; 'uint8'; 'uint16'; 'uint32'; 'uint64'};
numbytes = [NaN;8;4;1;2;4;8;1;2;4;8];

[~,loc]  = ismember(in(:),numclass);
out      = zeros(size(in));
out(:)   = numbytes(loc+1);
end 
```

一个例子：

```
>> class2byte({'single','singol','char','int64';'double','double','int32','uint8'}')
ans =
     4     8
   NaN     8
   NaN     4
     8     1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-07T21:29:03.987

```
...
x = zeros(1,1,dataType);
numBytes = sizeof(x);
...

function b = sizeof(x)
   w = whos('x');
   b = w.bytes;
end 
```*

# java - 使用 context.getSystemService 找不到 NsdManager

> ID：16104430
> 
> 赞同：2
> 
> 时间：2013-04-19T12:17:03.743
> 
> 标签：java, android, network-service

我在使用 context.getSystemService(Context.NSD_SERVICE) 时遇到问题。它只是崩溃。代码如下：

我的网络服务发现助手：

```
public NetworkServiceDiscoveryHelper(Context context)
{
    mContext = context;
    mNetworkDiscoveryManager = (NsdManager) context.getSystemService(Context.NSD_SERVICE);
} 
```

我的活动课：

```
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mNsdHelper = new NetworkServiceDiscoveryHelper(this);
    mNsdHelper.initializeNsd();

} 
```

我一直在关注来自[http://developer.android.com/training/connect-devices-wireless/nsd.html](http://developer.android.com/training/connect-devices-wirelessly/nsd.html)的示例代码，它们的活动构造函数略有不同：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    mStatusView = (TextView) findViewById(R.id.status);

    mUpdateHandler = new Handler() {
            @Override
        public void handleMessage(Message msg) {
            String chatLine = msg.getData().getString("msg");
            addChatLine(chatLine);
        }
    };

    mConnection = new ChatConnection(mUpdateHandler);

    mNsdHelper = new NsdHelper(this);
    mNsdHelper.initializeNsd();

} 
```

有人可以向我解释一下，为什么我的实现不起作用，我需要额外的功能吗？我基本上只是试图通过创建服务然后使用同一部手机再次找到该服务来设置测试此功能。到目前为止，我只实现了一个网络服务助手和活动。我是否需要设置任何其他功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:29:52.883

为了使用 Wi-Fi Direct，请将 CHANGE_WIFI_STATE、ACCESS_WIFI_STATE 和 INTERNET 权限添加到您的清单中。

```
<uses-permission
        android:required="true"
        android:name="android.permission.ACCESS_WIFI_STATE"/>
    <uses-permission
        android:required="true"
        android:name="android.permission.CHANGE_WIFI_STATE"/>
    <uses-permission
        android:required="true"
        android:name="android.permission.INTERNET"/> 
```

# excel - 如何编辑 Excel 2011 VBA 按钮而不是单击它们

> ID：16104433
> 
> 赞同：3
> 
> 时间：2013-04-19T12:17:18.043
> 
> 标签：excel, vba, macos

当我单击 Excel 2007 中的 VBA 按钮时，我进入了编辑模式。但是当我试图在 Excel 2011 中修改它们时 - 我点击它，它点击了！但是如何切换命令模式和编辑模式呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T14:04:22.117

Excel 2011 不支持 ActiveX 控件。它只支持表单控件。要访问代码区域，您可以按照以下任何步骤操作

1.  右键单击表单按钮，然后单击`Assign Macro`。在下一个对话框中，单击`New`

2.  按`fn`+ `ALT`+`F11`访问 VBA 编辑器。在模块中创建一个子，然后使用`Assign Macro`如上所述将其链接到表单按钮

3.  单击 Apple 图标旁边的 Excel 菜单，然后单击首选项。单击`Ribbon`in`Sharing and Privacy`然后选择 Developer 复选框。

**截图**：

![在此处输入图像描述](https://i.stack.imgur.com/L1zty.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T12:22:27.093

您需要首先确保已将开发人员工具添加到功能区：选择文件、选项，然后选择自定义功能区并确保选择了“开发人员”选项卡。单击确定。然后您可以转到“开发人员”功能区选项卡并选择“设计模式”这将允许您编辑内容并更改按钮行为，以便双击将打开相关代码。

# javascript - 使用 javascript 获取可靠的可用宽度和高度

> ID：16104434
> 
> 赞同：5
> 
> 时间：2013-04-19T12:17:18.677
> 
> 标签：javascript, android, android-webview

**背景**

我无法使用 JavaScript 获得可靠的视口大小。我已通读本[指南](http://developer.android.com/guide/webapps/webview.html)以设置应用程序，并阅读[本指南](http://developer.android.com/guide/webapps/targeting.html)以了解针对特定设备分辨率的信息。

这是`<meta>`页面上的标签：

```
<!DOCTYPE html>
...
<meta name="viewport" content="target-densitydpi=device-dpi" /> 
```

这使我可以使用最清晰的图像来绘制界面。为了测试分辨率，我编写了这段代码：

```
window.addEventListener('orientationchange', function() {
    console.log(screen.availWidth + ' x ' + screen.availHeight)
}
// 1080 x 1920 or 1920 x 1080 
```

**问题 1**

我曾希望实际可用像素可以这样计算：

```
width := screen.availWidth / devicePixelRatio
height := screen.availHeight / devicePixelRatio 
```

但是`devicePixelRatio`固定为`3`，与目标 dpi 无关；那么如何确定我可以使用的实际像素呢？

**问题 2**

以上`screen.availHeight`是不准确的，因为它没有考虑到`WebView`组件的实际高度。

我已经尝试过这些替代方案：

```
console.log(document.documentElement.offsetHeight);
// 1920
console.log(window.innerHeight);
// 240 
```

这些值几乎没有用，更糟糕的是，它们不会在屏幕旋转时改变，也不依赖于目标 dpi。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T09:44:44.290

自从我上次使用 android SDK 和 web 视图以来已经有一段时间了，*但是*你不能简单地从 java 端公开信息，在那里你可以可靠地确定它吗？所以任何时候你的方向改变+最初你打电话

```
webview.loadUrl("javascript:setResolution(x,y,orientation)"); 
```

并在您的 javascript 中将尺寸写入合乎逻辑的位置。

顺便说一句，这在 javascript 中是不可能的，*但是*任何时候我需要按照你想要做的事情远程做任何事情，需要大量的试验和错误才能得到跨设备支持，所以我个人会建议你利用您拥有 webview 的事实来发挥自己的优势。（如果你有机会使用像cordova这样的webview框架，你甚至可以相对简单地用它制作一个javascript插件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:35:03.117

您可以使用 CSS 媒体查询来定位您想要定位的内容吗？

[如果是这样，也许您可​​以使用matchMedia.js](https://github.com/paulirish/matchMedia.js/)解决您的问题——一个用于在 JavaScript 中测试媒体查询的跨浏览器解决方案。有什么要考虑的，对吧？因为除了尺寸查询之外，`-webkit-device-pixel-ratio`您还可以随意使用（在您链接到的指南中提到）？

# ios - 如何在 iOS 的 UITableViewCell 上禁用特定方向的滑动？

> ID：16104439
> 
> 赞同：0
> 
> 时间：2013-04-19T12:17:41.340
> 
> 标签：ios, uitableview, direction, uiswipegesturerecognizer

我通过添加以下两种方法在表格视图中实现了滑动删除选项：

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete)
    {
        //Action to delete
    }
} 
```

这工作得很好，每当我在单元格上滑动（从左到右和从右到左）时，一个红色的删除按钮就会很好地出现。

但我只想在用户从右到左方向滑动时才显示删除按钮。当用户从左到右滑动时，我想执行一些其他操作。有可能在这里找到方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:42:55.393

只需将滑动手势识别器添加到您想要忽略的方向的表格视图中。

```
UISwipeGestureRecognizer *swipe = [[UISwipeGestureRecognizer alloc]initWithTarget:self action:@selector(emptyMethod:)];
swipe.direction = UISwipeGestureRecognizerDirectionLeft;
[self.tableView addGestureRecognizer:swipe]; 
```

然后实现emptyMethod..这个方法不会做任何事情。

```
- (void)emptyMethod {} 
```

每次您向左滑动时，都会调用空方法并且不会执行任何操作。

# android - 动画不工作

> ID：16104443
> 
> 赞同：0
> 
> 时间：2013-04-19T12:18:00.360
> 
> 标签：android

谁能告诉我为什么动画不适用于下面的代码。并且还告诉我如何让滑出。我正在尝试我的水平，以便尽可能让我如何做到这一点。我在下面的代码中使用映射概念的另一件事。如果需要任何澄清，请告诉我

```
public class Erispage2Activity extends Activity 
{
    ErisImageMap ErisImageMap;
    MediaPlayer audioStory;
    Button play;
    Button stop;
    TextView txtPage1;
    private SeekBar volumeSeekbar = null;
    private AudioManager audioManager = null; 
    Animation animation;

    public void onCreate(Bundle savedInstanceState) 
    {
         super.onCreate(savedInstanceState);
         //overridePendingTransition(R.anim.fadein, R.anim.fadeout);
         setContentView(R.layout.page1);

         audioStory = new MediaPlayer();
         audioStory = MediaPlayer.create(Erispage2Activity.this, R.raw.november_titanic);

         play=(Button) findViewById(R.id.erispage2play);
         stop=(Button)  findViewById(R.id.erispage2stop);

         txtPage1=(TextView) findViewById(R.id.textPage);

         ErisImageMap = (ErisImageMap)findViewById(R.id.map);
         ErisImageMap.setImageResource(R.drawable.learningui);

         volumeSeekbar = (SeekBar)findViewById(R.id.seekBar1);

//         volumeSeekbar.setBackgroundResource(R.drawable.seekbg);

         setVolumeControlStream(AudioManager.STREAM_MUSIC);
         initControls();

         txtPage1.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                audioStory.start();
            }
        });

        ErisImageMap.addOnImageMapClickedHandler(new ErisImageMap.OnImageMapClickedHandler() 
        {
             public void onImageMapClicked(int id) 
             {
                try
                {
                    if(id==R.id.erispage2next)
                     {  

                        Intent i=new Intent(Erispage2Activity.this,Erispage3Activity.class);
                        startActivity(i);
                        ErisImageMap.bit.recycle();
                        System.gc();
                        finish();
                        audioStory.stop();
                    }
                    if(id==R.id.erispage2play)
                    {
                        startAnimationPopOut();
                        audioStory.start();
//                      play.setBackgroundColor(Color.RED);
                        play.setVisibility(View.INVISIBLE);
//                      play.c
                    }
                    if(id==R.id.erispage2stop)
                    {
                        audioStory.pause();
                        play.setVisibility(View.VISIBLE);
                        setVolumeControlStream(AudioManager.STREAM_MUSIC);
                        stop.setVisibility(View.INVISIBLE);
                    }

                }
                catch (Exception e) 
                {
                    e.printStackTrace();
                }
                finally{
//                  ErisImageMap.bit.recycle();
                }
             }
             public void onBubbleClicked(int id) 
             {

             }
          });
        }

    private void startAnimationPopOut() 
    {         

        ErisImageMap = (ErisImageMap)findViewById(R.id.map);

        animation = AnimationUtils.loadAnimation(Erispage2Activity.this,R.anim.fadeout);

         animation.setAnimationListener(new AnimationListener() 
         {

            public void onAnimationStart(Animation animation)
            {
                // TODO Auto-generated method stub
//              overridePendingTransition(R.anim.grid_entry,R.anim.grid_exit);              
            }

            public void onAnimationRepeat(Animation animation) {
                // TODO Auto-generated method stub

//              overridePendingTransition(R.anim.fadein,R.anim.fadeout);
            }

            public void onAnimationEnd(Animation animation) 
            {
                // TODO Auto-generated method stub
//              overridePendingTransition(R.anim.grid_entry,R.anim.grid_exit);
                overridePendingTransition( R.anim.slide_in_left, R.anim.slide_out_left );

            }
        });
         ErisImageMap.clearAnimation();
         ErisImageMap.startAnimation(animation);
       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:25:27.190

试试这个代码

```
android.view.animation.Animation anim = AnimationUtils
                            .loadAnimation(Context, R.anim.slide_up); 
yourLayout.startAnimation(anim); 
```

并且您在动画结束时使用了 overridePendingTransition() ......但它会在活动之间工作。

# diff - bash vs sh 不能使用未命名的流差异 <(doSomething) <(doSomethingElse)

> ID：16104446
> 
> 赞同：0
> 
> 时间：2013-04-19T12:18:11.913
> 
> 标签：diff, sh

我想比较两个流。我在 bash 中编写了以下代码：

```
#!/bin/bash    
diff <({
#premier commentaire
cat test_similar1
}) <({
#second commentaire
cat test_similar2
}) 
```

有效。相反，sh中的以下代码

```
#!/bin/sh    
diff <({
#premier commentaire
cat test_similar1
}) <({
#second commentaire
cat test_similar2
}) 
```

不：它给出了以下错误。

```
test.sh: 2: test.sh: Syntax error: "(" unexpected 
```

如何在我的 RHEL 服务器上使用 sh 而不是 bash？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:23:51.083

`sh`不支持`<(command)`“进程替换”语法。您需要使用一些临时文件或命名管道来保存命令输出。当然，正确的临时文件管理是*困难*的。

一件事：如果您只是`cat`在进程替换中使用单个文件，则不需要替换。只需给出`diff`文件名。

# c++ - 防止局部变量被破坏两次，如何？堆损坏

> ID：16104447
> 
> 赞同：0
> 
> 时间：2013-04-19T12:18:14.850
> 
> 标签：c++, visual-studio-2010, memory

我的作业一直有问题，关于制作多项式类和重载一些运算符以根据类工作。我已经完成了大部分工作，但我的析构函数或函数似乎有问题。

问题是，根据我的调试（如果我做对了，我认为我做到了），当与我的复制构造函数一起使用时，我的 + 运算符函数 get 的返回值被破坏了两次，如下所示：

```
//polynomials p1 and p2 are declared and given values beforehand
Polynomial p5=Polynomial();
p5=p1+p2; 
```

这会导致堆损坏错误。

这是我的标题代码：

```
#ifndef POLYNOMIAL_H_
#define POLYNOMIAL_H_
#include <iostream>

using namespace std;

class Polynomial
{
public:
    Polynomial();
    Polynomial(int);
    ~Polynomial();
    Polynomial(const Polynomial &);
    int getOrder() const; 
    double getCoefficient(int) const; 
    void setOrder(int);
    void setCoefficient(int,double);
    const Polynomial &operator=(const Polynomial &);
    const bool &operator==(const Polynomial &);
    const double &operator()(double &);
    const bool &operator!=(const Polynomial &);

    friend Polynomial operator+(const Polynomial &poly1, const Polynomial &poly2);
    friend Polynomial &operator+=(Polynomial &poly1,const  Polynomial &poly2);
    friend Polynomial operator-(const Polynomial &poly1, const Polynomial &poly2);
    friend Polynomial &operator-=( Polynomial &poly1,const  Polynomial &poly2);
    friend Polynomial operator*(Polynomial poly1,double num);
private:
    int order;
    double *coefficient;
};

#endif 
```

这是我的重载 + 函数，它不漂亮，但我的问题不是计算，而是内存。我在课堂上将它声明为友元函数，根据我的作业规则，我需要在 main.cpp 文件中将它作为自由函数而不是成员函数来实现。

```
 Polynomial operator+(const Polynomial &poly1, const Polynomial &poly2) //the overloaded +operator. makes the order of the result the bigger order and adds the coefficients for all the orders. returns the result. 
{
    Polynomial result;

    if(poly1.order >= poly2.order)
    {
        result.setOrder(poly1.order);
        for(int i=poly1.order;i>poly2.order;i--)
        {
            result.setCoefficient(poly1.order-i, poly1.coefficient[poly1.order-i]);
        }
        for (int i =poly2.getOrder(); i>=0;i--)
        {
            result.setCoefficient(poly1.order-i,poly1.coefficient[poly1.order-i]+poly2.coefficient[poly2.order-i]);
        }
    }
    else 
    {
        result.setOrder(poly2.order);

        for(int i=poly2.order;i>poly1.order;i--)
        {
            result.setCoefficient(poly2.order-i, poly2.coefficient[poly2.order-i]);
        }
        for (int i =poly1.order; i>=0;i--)
        {
            result.setCoefficient(poly2.order-i,poly1.coefficient[poly1.order-i]+poly2.coefficient[poly2.order-i]);
        }
    }
    return result;
} 
```

我们还需要重载 = 运算符，如果需要，这就是该函数。

```
 const Polynomial &Polynomial::operator=(const Polynomial &poly)
{
    if(this!=&poly)
    {
        if(order==poly.order)
        {
            for(int i=0;i<=order;i++)
            {
                coefficient[i]=poly.coefficient[i];
            }
        }
        else 
        {
            coefficient=new double[poly.order];
            order=poly.order;
            for(int i=0;i<=order;i++)
            {
                coefficient[i]=poly.coefficient[i];
            }
        }
    }
    return *this;
} 
```

请记住，我真的是编码和 C++ 的初学者，感谢您提供的任何帮助。

编辑：添加深拷贝构造函数。

```
 Polynomial::Polynomial(const Polynomial &copy) //deep copy constructor
{
    order=copy.order;
    coefficient=new double[copy.order];
    for (int i=0;i<=order;i++)
    {
        coefficient[i]=copy.coefficient[i];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:23:11.497

您为双打分配内存`poly.order`，但在您的 for 循环中，最后一个索引将是`poly.order`它应该`poly.order-1`将 <= 更改为 < 将解决该问题。

```
 coefficient=new double[poly.order];//This is memory leak previous coefficient needs to be deleted
    order=poly.order;
    for(int i=0;i<=order;i++)//<= will lead to overflow and heap corruption
    {
        coefficient[i]=poly.coefficient[i];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:26:36.607

在您的复制构造函数和重载中，您在复制数组`operator=`时会额外迭代一次：`cofficient`

```
 coefficient=new double[copy.order];
  for (int i=0;i<=order;i++)
                ^^ 
```

那应该是`<`，您已经分配了`order`空间，但是您正在迭代`order+1`时间。您还需要调用`delete []`旧`coefficient`数组。通常，执行此操作的安全方法是首先分配给临时对象并对其进行修改，如果所有这些潜在的不安全操作都成功，那么您可以`delete`将临时对象分配给`coefficient`. 您可以在上查看此 SO 帖子，以获得有关使用and[`Rule of Three`](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)时需要做什么的可靠解释。`copy constructor``assignment`

# plugins - CRM 2011 Plugin for CREATE（post-operal）：为什么 post entity image 和 target 中“baseamount”的值为零？

> ID：16104448
> 
> 赞同：2
> 
> 时间：2013-04-19T12:18:16.850
> 
> 标签：plugins, dynamics-crm-2011, crm

# 重新制定的问题（4 月 24 日）：

我正在使用 VS2012 的 CRM 开发人员工具包来创建 CRM2011 插件。该插件为`CREATE`“发票产品”实体的消息注册。Pipeline-Stage 是后期操作，执行是同步的。我注册了一个包含`baseamount`.

该工具包创建一个如下所示的执行函数：

```
protected void ExecutePostInvoiceProductCreate(LocalPluginContext localContext)
{
    if (localContext == null)
    {
        throw new ArgumentNullException("localContext");
    }

    IPluginExecutionContext context = localContext.PluginExecutionContext;

    Entity postImageEntity = (context.PostEntityImages != null && context.PostEntityImages.Contains(this.postImageAlias)) ? context.PostEntityImages[this.postImageAlias] : null;
} 
```

既然我们处于后期运算阶段，那么`baseamount`in的值`postImageEntity`应该已经从用户输入中计算出来了，对吧？但是，`baseamount`in 的`postImageEntity`值为零。`baseamount`我使用以下代码获得的目标实体中的值也是如此：

```
Entity targetEntity = (context.InputParameters != null && context.InputParameters.Contains("Target")) ? (Entity)context.InputParameters["Target"] : null; 
```

使用如下所示的检索请求，我得到了正确的值`baseamount`：

```
Entity newlyCreated = service.Retrieve("invoicedetail", targetEntity.Id, new ColumnSet(true));
decimal baseAmount = newlyCreated.GetAttributeValue<Money>("baseamount").Value; 
```

该问题不会出现在更新事件的后期运行阶段。

我很高兴听到你关于为什么会这样的想法/解释/建议......

（更多信息：远程调试，无隔离模式，插件存储在数据库中）

# 原始问题：

我正在为 CRM 2011 开发一个插件，该插件应该在创建发票详细信息时计算要支付的税额。为此，我试图在后期操作阶段从后期实体图像中获取`baseamount`新创建的实体。`invoicedetail`据我了解，发布实体图像是创建新发票详细信息后数据库中实体的快照。因此它应该包含新创建的发票明细的所有属性。

我得到了 IPluginExecutionContext 的“postentityimages”属性，其中包含一个具有我注册的别名（“postImage”）的实体。这个“postImage”实体包含一个“baseamount”的键，但它的值为0。谁能帮我理解为什么会这样以及我能做些什么？

（我还注意到 postImage 不包含我注册的所有实体，而只包含我注册的实体的一个子集。）

代码如下所示：

```
 protected void ExecutePostInvoiceProductCreate(LocalPluginContext localContext)
  {
        if (localContext == null)
        {
            throw new ArgumentNullException("localContext");
        }

        // Get PluginExecutionContext to obtain PostEntityImages
        IPluginExecutionContext context = localContext.PluginExecutionContext;

        // This works: I get a postImage that is not null.
        Entity postImage = (context.PostEntityImages != null && context.PostEntityImages.Contains(this.postImageAlias)) ? context.PostEntityImages[this.postImageAlias] : null;

        // Here is the problem: There is a "baseamount" key in the postImage 
        // but its value is zero!
        decimal baseAmount = ((Money)postImage["baseamount"]).Value;

  } 
```

添加：用于后期操作更新的前后图像包含基数的非零值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:53:53.330

需要注意三件事，一件有望解决您的问题，另外两件是最佳实践。

1.  帖子图像属性只会填充您在注册时指定要填充的值，因此请检查您是否已指定`baseamount`应包含在您的帖子图像中。（如果用户对该字段没有权限，您也可能会遇到安全问题，但由于它是 0 而不是 null，我认为这不是问题）
2.  使用 GetAttributeValue，而不是仅仅访问实体的索引。如果字符串键不在实体 Attribute 集合中，则会抛出错误：

    十进制 baseAmount = e.GetAttributeValue("baseamount").Value;

3.  由于这是在创建发票详细信息时运行的，因此目标应包含创建期间填充的所有数据，这将消除对后期图像的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-14T08:40:30.483

只是为了关闭这个问题：最后，我在服务器上重新安装了 CRM 实例，问题就消失了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-29T09:51:17.010

您可以使用以下代码创建一个简单的插件.. 参考[这里](http://programmers.bhoomijunction.com/Article/creating-plugin-in-crm-dynamics-and-accessing-attributes-values-of-entity-account-32)

```
public void Execute(IServiceProvider serviceProvider)
    {
        // Obtain the execution context from the service provider.
        ITracingService tracingService = (ITracingService)serviceProvider.GetService(typeof(ITracingService));

        // Obtain the execution context from the service provider.
        IPluginExecutionContext context = (IPluginExecutionContext)
            serviceProvider.GetService(typeof(IPluginExecutionContext));

        IOrganizationServiceFactory serviceFactory = (IOrganizationServiceFactory)serviceProvider.GetService(typeof(IOrganizationServiceFactory));
        IOrganizationService service = serviceFactory.CreateOrganizationService(context.UserId);

        // The InputParameters collection contains all the data passed in the message request.
        if (context.InputParameters.Contains("Target") &&
            context.InputParameters["Target"] is Entity)
        {
            Entity entity = (Entity)context.InputParameters["Target"];

            // Verify that the target entity represents an account.
            // If not, this plug-in was not registered correctly.
            if (entity.LogicalName != "account")
                return;

            try
            {

                     //Access / get data of entity
                     string country = entity.Attributes.ContainsKey("address1_county") ? entity.Attributes["address1_county"].ToString() : "";
                     //Update existing values in entity (Account)
                     entity.Attributes["name"] = "My Name"

            }

            catch (Exception ex)
            {
                throw new InvalidPluginExecutionException(ex.Message + ", Stack trace : " +  ex.StackTrace);
            }

        }
    } 
```

# java - 爪哇 | 按键监听器 | 基本的

> ID：16104459
> 
> 赞同：0
> 
> 时间：2013-04-19T12:18:45.063
> 
> 标签：java, swing, jframe, jtextfield, keylistener

如何更改或隐藏该 JTextField 以不向用户显示并仍然获得用户键入的键？我尝试使用“KeyCodeT.setVisible(false);”，但它没有用。

这就是我所说的：http: [//oi46.tinypic.com/35hobbn.jpg](http://oi46.tinypic.com/35hobbn.jpg)

完整代码在这里： http: [//pastebin.com/8t3cTLKX](http://pastebin.com/8t3cTLKX)

```
JTextField KeyCodeT = new JTextField("Key Code:");

public KeyProgram() {
    KeyCodeT.addKeyListener(this);
    KeyCodeT.setEditable(false);
    add(KeyCodeT);
    setSize(300, 300);      
}

public void keyPressed(KeyEvent e) {
    System.out.println("Key Pressed!!!");

    if (e.getKeyCode() == 27) {
        JOptionPane.showMessageDialog(null, "Good  Bye");
        System.exit(0);
    }

}

public void keyReleased(KeyEvent e) {
    System.out.println("Key Released!!!");
    KeyCodeT.setText("Key Code:" + e.getKeyCode());

}

public void keyTyped(KeyEvent e) {
}

public static void main(String[] args) {
   KeyProgram key = new KeyProgram();
   key.setVisible(true);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:39:46.847

```
if (e.getKeyCode() == 27) 
```

不要使用幻数。阅读您的代码的人不知道那是什么。而是使用：

```
KeyEvent.VK_ESCAPE 
```

但是，您甚至不应该为此使用 KeyListener。相反，您应该使用[Key Bindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:25:55.697

您可以尝试以下方法：

```
JTextField textField= new JTextField();
textField.setBackground(UIManager.getColor("Panel.background")); // set the text box background color to color of component behind
textField.setBorder(null); // remove the text box border 
```

如下所示：

![透明/不可见文本框示例](https://i.stack.imgur.com/XpZbc.png)

注意：*这可能不是满足此要求的最佳方法，但这确实有效。*

# javascript - 如何打开发送 POST 数据的网页

> ID：16104469
> 
> 赞同：0
> 
> 时间：2013-04-19T12:19:23.573
> 
> 标签：javascript, jquery, html, redirect, post

我有一个包含一些 html 代码的 php 页面。这是注册到该站点的用户的确认页面，因此，我只想在有效注册的情况下显示它（无法从外部访问它）。为此，我将这个条件放在了 Confirmation.php 的开头

```
if (empty($_POST))
{header('location: registration.php');} 
```

该文件的其余部分是：

```
<div id="logo"> <img src=my_logo_small_grey.png  height="60"/> </div>
<div id="msgConfirm">Thank You</div> 
```

（顺便说一句，这是一个很好的解决方案？）

但是从registration.php开始，如何启动/重定向到confirmation.php发送POST参数？其实我用过AJAX：

```
url = "confirmation.php";
params = "ok"
ajaxReq.setRequestHeader("Content-length", params.length);
ajaxReq.open("POST", url, true); 
```

但似乎只执行脚本（思想），没有有效的重定向..为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:34:03.093

抱歉，我不完全理解这个问题，但我会尽力提供帮助。

首先，如果文件的其余部分很小，那么您可以将其放入 if 循环中。

```
<?php
if(isset($_POST['yourpost']))
{
?>

<div id="logo"> <img src=my_logo_small_grey.png  height="60"/> </div>
<div id="msgConfirm">Thank You</div>

<?php
}
?> 
```

您还可以通过编写如下 Javascript 来创建重定向：

```
<?php
echo "<script>location.href='".$redirecturl."'</script>";    
?> 
```

发布数据通常被发送到处理它的不同页面，然后您被带到另一个显示确认的页面。可以通过再次从数据库中获取该数据来检索此数据。（如果您正在这样做）

如果您确实想将检索到的 POST 数据传递到另一个页面，那么您可以将其作为 GET 变量添加到链接中，例如 www.url.com/index.php?get=something

您还可以将会话变量存储为 $_SESSION['var']="something"; 记得启动 session_start(); 在使用会话的 php 页面的开头。

抱歉，我不是那么有经验，所以也许其他人会提供更好的帮助，希望这对现在有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:25:22.837

利用`jQuery`

`$.post()`将是实施您的解决方案的关键。

* * *

但更一般地看你的问题，通常情况下，工作流程如下

1.  填写表格
2.  发送电子邮件
3.  用户点击电子邮件链接
4.  确认页面打开
5.  检查哈希，验证用户
6.  登录并重定向到成功页面

如果您真的需要隐藏对成功页面的访问权限，请创建一次性可用的令牌。

拥有`(!empty($_POST))`不是限制访问该站点的“强大”方式。

# php - 如何使用 jquery 或 javascript 在 php 中打开表单提交的弹出窗口

> ID：16104475
> 
> 赞同：1
> 
> 时间：2013-04-19T12:19:58.327
> 
> 标签：php, javascript, jquery, popup

我正在尝试在下面的联系表单的提交按钮上打开一个弹出窗口是代码

```
<form id="contact" name="contact" method="post" action="mail2.php" onsubmit="return valid();">
            <label>Name :</label>
                <input name="name" type="text" id="name" class="contact-input-box" />

            <label>Contact No. :</label>
                <input name="telephone" type="text" id="telephone" class="contact-input-box" />

            <label>Email :</label>
                <input name="email" type="text" id="email" class="contact-input-box" /><br class="clearBoth" />  

            <label>Gender :</label>
            <span>Mail</span> <input type="radio" name="gender" value="male">
            <span>Femail</span> <input type="radio" name="gender" value="female" /> <br class="clearBoth" />

            <label>product :</label>
            <select name="product" class="dropdown" id="product">
                      <option>Product</option>
                      <option value="cd">CD</option>
                      <option value="dvd">DVD</option>
            </select> <br class="clearBoth" />

            <label>Comment :</label>
                <textarea name="comment"  id="comment" class="contact-input-box1"></textarea><br class="clearBoth" />
                <p id="button1"></p>

            <label>&nbsp;</label>
                <input name="button" type="submit" id="button" title="Submit" value="Submit" onclick="myFunction()" /> 
        </form> 
```

但我无法打开弹出窗口。表格工作正常。目前它在thankyou.html页面上。我需要在弹出框中打开感谢信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:23:36.560

如果您的意思是 javascript 弹出窗口，`alert("message");`请在您的`myFunction()`.

如果您指的是新窗口/标签，请将其放入您的表单中`target="_blank"`，如下所示：

```
<form id="contact" name="contact" method="post" action="mail2.php" target="_blank" onsubmit="return valid();"> 
```

* * *

提交表单时，您还做了两件事：

*   你的表格有`onsubmit="return valid();"`
*   你的`submit`按钮有`onclick="myFunction();"`

您应该将验证和`myFunction()`函数的内容放在`submit`-function 中，如下所示：

```
$("#contact").on("submit", function()
{
    alert("Testmessage");

    // Validation
    // if validation fails:
        return false;

    // Then whatever you do in `myFunction();`
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T13:00:16.757

试试 JqueryUi 对话框。这样您就可以在可自定义的弹出窗口中显示 dethankyou.html。

这是解决您的问题的简单方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T12:39:27.307

您可以使用 jquery ui 对话框。为此，在您的 html 中创建一个 div 并将内容放入要在弹出窗口中显示的 div 中。

```
<div id="my-popup-div"> this content will be shown inside popup </div> 
```

现在使用 jquery 对话框启动器。

```
$(document).ready(function(){    
        $("#my-popup-div").dialog({});
    }) 
```

现在在你的功能中

```
function myFunction()
{
   $("#my-popup-div").dialog("open");
} 
```

更多定制请按照 ui 教程[jquery ui 对话框](http://jqueryui.com/dialog/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T12:58:11.273

如果您想要一个弹出窗口询问用户是否提交表单，那么您可以挂钩表单 onsumbit 事件：

```
function beforeSubmit() {
    if (confirm("Are you sure, you want to submit form?")) {
        return true;
    } 
    return false;
} 
```

[示例演示](http://jsfiddle.net/7584F/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T12:26:09.700

尝试

```
 $('#button').submit(function() {
      alert('Handler for .submit() called.'); //you can call myFunction()  here
      return false  //will stop the form submission.

    }); 
```

如果您不想停止表单提交，则无需显示任何警报，因为页面已经提交。

或者您可以尝试`setTimeout`一段时间显示谢谢您的弹出窗口，然后提交表格

# python - 如何将 CSS 存储在 Django 类中？

> ID：16104476
> 
> 赞同：0
> 
> 时间：2013-04-19T12:20:08.257
> 
> 标签：python, css, django, django-templates

我正处于编写 Django 应用程序以输出 html5 幻灯片演示的头脑风暴阶段。我希望能够为每个幻灯片对象定义一个样式（也可能是演示对象的默认值），这只是定义颜色、大小的 css。等等。最终，我想要做的是创建将演示文稿输出到任意演示框架的函数，例如，deck.js 或 fathom.js。

我刚刚打出了我的应用模型的一个非常粗略的草稿：

```
from django.db import models
from ckeditor.fields import RichTextField

class Presentation(models.Model):
    title = models.CharField()

class Slide(models.Model):
    title = models.Charfield()
    header = RichTextField()
    footer = RichTextField()
    presentation = models.ForeignKey(Presentation)
    slide_number = models.IntegerField() 
    audio = models.FileField(null=True, blank=True)
    style = models.ForeignKey(SlideStyle)

class SlideSegment(models.Model):
    slide = models.ForeignKey(Slide)
    duration = models.IntegerField() # duration of slide segment in ms
    position = models.SmallIntegerField() # to order segments
    content = RichTextField()

    class Meta:
        ordering = ['position']

class SlideStyle(models.Model):
    name = Charfield()
    css = ??? 
```

我的第一个想法是创建一个 TextField 或 UrlField 来存储一些 CSS，但我立即开始发现这个问题。

利用 Django 的模板系统似乎是 Django 的方法，将数据与表示分离等等。但是，那么我将如何管理这些样式，以便使用 django 管理界面的管理员可以创建/删除样式并在创建幻灯片时选择样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:58:24.960

“样式”通常需要的不仅仅是一个 css 文件——多个 css 文件、背景图像、最终字体等。

如果要上传“样式”，那么一个可能的解决方案可能是使用接受 zip 的 FileField，至少需要包含“style.css”文件作为入口点。然后在上传时，文件将被解压缩到 /styles/ 中，SlideStyle 模型会生成一个“style_url”属性，返回适当的 url...

我的 2 美分。

# android - 向正在侦听来自网络的数据的线程发送消息

> ID：16104481
> 
> 赞同：0
> 
> 时间：2013-04-19T12:20:25.663
> 
> 标签：android, service, irc

我有一个具有以下关键组件的 Android 应用程序

管理连接线程的服务 连接到 IRC 并侦听来自绑定服务的连接 A ui 的消息的连接线程。

我在 UI 上有一个按钮，单击该按钮时我需要向 irc 服务器发送一条消息。我的想法是在连接线程上生成一个处理程序，在我的服务中获取它的句柄，然后将消息从 UI 发送到服务并从那里发送到线程。

当我在线程的类级别创建一个处理程序时，我得到一个 networkonuiexception。我将处理程序的实例化移动到 run() 方法，并被告知使用 Looper.prepare()。我觉得我处理错了，我正在寻找如何最好地管理这个问题的建议。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:26:33.690

当我开始学习 android 时，我编写了这个示例代码来处理线程中的消息，方法是`looper`：

```
public class MainActivity extends Activity {

    Handler mHandler,childHandler;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        mHandler = new Handler(){
            public void handleMessage(Message msg) {
                TextView tv = (TextView) findViewById(R.id.displayMessage);
                tv.setText(msg.obj.toString());
            }
            };
        new LooperThread().start();
    }

    public void onSend(View v){
        Message msg = childHandler.obtainMessage();
        TextView tv = (TextView) findViewById(R.id.messageText);
        msg.obj = tv.getText().toString();

        childHandler.sendMessage(msg);
    }
    @Override
    protected void onStart() {
        super.onStart();
        LooperThread ttTest = new LooperThread();
        ttTest.start();
    }

    class LooperThread extends Thread {

        final int MESSAGE_SEND = 1;

        public void run() {
            Looper.prepare();
            childHandler = new Handler() {
                public void handleMessage(Message msg) {
                      Message childMsg =  mHandler.obtainMessage();
                      childMsg.obj = "child is sending "+(String)msg.obj;
                      mHandler.sendMessage(childMsg);
                }
            };
            Looper.loop();
        }
    }
} 
```

它是一个示例代码，用于在按下按钮时向线程发送消息，然后线程通过向主活动添加一些字符串再次发送消息。您可以根据需要操作此代码。

Activity默认有looper，所以不需要为activity编写looper。

线程默认没有looper，所以我们需要写looper，它是一种存储消息的队列。

更新：

XML 代码

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

   <EditText
        android:id="@+id/messageText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:hint="Input message">
         <requestFocus />
    </EditText>
    <TextView
        android:id="@+id/displayMessage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        >

    </TextView>

    <Button
        android:id="@+id/buttonSend"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:onClick="onSend"
        android:text="Send" />

</LinearLayout> 
```

# c# - 如何从 C# Metro 应用程序中的资产中检索特定语言的图像

> ID：16104489
> 
> 赞同：0
> 
> 时间：2013-04-19T12:20:53.923
> 
> 标签：c#, microsoft-metro

我有 c# metro 应用程序，其中存储了资产中的本地化图像。

```
Assets
  cs-CZ
    Car1.jpg
    Car2.jpg
    Car3.jpg
    Car4.jpg
  en-US
    Car1.jpg
    Car2.jpg
    Car3.jpg
    Car4.jpg
    Car5.jpg
    Car6.jpg
    Car7.jpg 
```

我想将所有 CarXX.jpg 语言特定图像加载到列表中并检查图像是否存在（代码应该是动态的，因此如果有人添加新图像，它将加载新图像而不更改应用程序中的任何参数）。我不知道如何检查指定语言的图像是否存在。如果应用程序在 cs-CZ 中运行，它必须返回 4 个图像，如果应用程序在 en-US 中运行，它必须返回 7 个图像。

我有这个代码：

```
/// ...
int index = 1;
while (true)
{
    string carPictureName = String.Format("Car{0}.jpg", index++);

    // TODO: CHECK IF FILE EXISTS IN THE ASSET FOR SPECIFIED LANGUAGE
    bool fileExists = CheckIfFileExists(carPictureName);

    if (fileExists)
    {
        pictures.Add(carPictureName);
    }
    else
    {
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:36:17.707

通常，您在 XAML 中引用“逻辑”位图，加载的资源将检测当前区域性并加载正确的图像。拥有非特定文化通常也是一个好主意（例如“en”和“cs”，以防您处于像 en-CA 这样的文化但仍想显示特定于语言的资源。

有关执行此操作的示例应用程序，请参阅[http://code.msdn.microsoft.com/windowsapps/Application-resources-and-cd0c6eaa](http://code.msdn.microsoft.com/windowsapps/Application-resources-and-cd0c6eaa)（它还包括覆盖区域性）。

# php - mysql_connect 没有与正确的主机对话

> ID：16104492
> 
> 赞同：0
> 
> 时间：2013-04-19T12:21:01.637
> 
> 标签：php, mysql

我有以下问题。我们将 mysql-server 移动到另一台机器上，因此 ip 发生了变化，但不知何故 syslog 机器上的脚本不会与新服务器通信。我将其剥离为以下代码以模拟问题

我的脚本

```
$link = mysql_connect("mysql.domain.tld", "<user>", "<pass>");
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
echo 'Connected successfully'; 
```

然后当我执行我的脚本时它返回

```
me@syslog:~# php test.php
Could not connect: Access denied for user '<user>'@'10.254.237.42' (using password: YES) 
```

但是当我做一个 ping

```
me@syslog:~# ping -c 1 mysql.domain.tld
PING mysql.domain.tld (10.254.235.31) 56(84) bytes of data. 
```

它解析为完全不同的 ip（但正确的 ip）

所以我目前处于“等待 - WHUT !!!” 模式，因为我不知道为什么它连接到错误的机器。所以我的问题是有没有办法让 mysql_connect 始终连接到 php.ini 或其他东西中的固定 IP/主机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:24:05.570

您尝试登录的用户没有从该主机连接的权限，在这种情况下`10.254.237.42`。您需要将其添加为 user 的有效主机`<user>`。

修改它并在 mySQL 机器上执行：

```
GRANT ALL PRIVILEGES ON *.* TO  ‘USERNAME’@‘IP’  IDENTIFIED  BY  ‘PASSWORD’; 
```

也就是说，您可能不想授予用户所有权限。将其限制为特定数据库上的 SELECT、INSERT、UPDATE、DELETE 等...

可能是您可以省略该`IDENTIFIED BY`部分。

完成此命令后，您需要`FLUSH PRIVILEGES`在登录时运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:24:23.617

如果您看到此错误，最常见的原因是您分配了`<user>@localhost`不再正确的权限，并且您必须将相同的权限授予`<user>@10.254.237.42`.

# mongodb - Mongo：查找没有点符号的子文档

> ID：16104499
> 
> 赞同：8
> 
> 时间：2013-04-19T12:21:22.153
> 
> 标签：mongodb

例如我们有收藏

```
{field: {subfield: 'name'}}
{field: {subfield: 'phone'}} 
```

我可以找到没有点符号的文档吗？像这样

```
db.test.find({field: {subfield: /regex/}}) 
```

或者像这样

```
db.test.find({field: {$someOperator: {subfield: /regex/}}}) 
```

我只是不想建立点符号

```
db.test.find({"field.subfield": /regex/}) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T13:11:35.793

问题是：

```
db.test.find({field: {$someOperator: {subfield: /regex/}}}) 
```

实际上是在 MongoDB 中使用对象 euqality 来搜索子文档的另一种查询方式。

所以不，您必须使用点表示法，除非您正在搜索一个对象与另一个对象完全相等的位置。

话虽如此，您可以将文档包装在`$elemMatch`：[http](http://docs.mongodb.org/manual/reference/operator/elemMatch/) ://docs.mongodb.org/manual/reference/operator/elemMatch/中

### 编辑

考虑到您的收藏结构`$elemMatch`实际上不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-22T13:35:56.167

是的，这可以使用聚合管道。

首先，使用 $replaceRoot 将根文档移动到子文档。此外，将根文档 ($$ROOT) 保留在字段中，以便稍后输出。

```
$replaceRoot: {
    newRoot: {
        $mergeObjects: [{
                _root: "$$ROOT"
            },
            "$field"
        ]
    }
} 
```

接下来，使用 $match 对子文档执行查询。

```
$match: {
    subfield: /regex/
} 
```

最后，使用 $replaceRoot 将根设置回整个文档。

```
$replaceRoot: {
    newRoot: "$_root"
} 
```

我不认为这会非常高效，但它确实有效。

# installation - 无法获取产品的主要版本号？

> ID：16104502
> 
> 赞同：0
> 
> 时间：2013-04-19T12:21:34.323
> 
> 标签：installation, windows-installer, installshield, installscript, installscript-msi

我有代码来检索产品的主要版本。将属性声明为`PRODVER_MAJOR = 2` Code 如下：

```
function myfunction(hMSI)
    string svmajorversion;
    number nsize;
begin
    nsize = 256;
    MsiGetProperty (ISMSI_HANDLE, "PRODVER_MAJOR", svmajorversion, nsize);
    MessageBox ("MajorVersion:" +svmajorversion, INFORMATION);
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:34:28.547

行为取决于动作的调度。如果这是从延迟的自定义操作中调用的，它不能直接访问大多数属性，而是必须通过属性检索数据，而该属性`CustomActionData`又必须在调用操作之前设置。

在任何一种情况下，我都建议将使用`ISMSI_HANDLE`（主要在事件期间有用的通用全局句柄）替换为`hMSI`（专门传递给此自定义操作的句柄）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:20:22.527

[实际检查MsiGetProperty 函数](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370134%28v=vs.85%29.aspx)的返回值可能会有所帮助。

> 返回值 ERROR_INVALID_HANDLE 提供了无效或非活动句柄。
> 
> ERROR_INVALID_PARAMETER
> 传递给函数的参数无效。
> 
> ERROR_MORE_DATA
> 提供的缓冲区太小，无法容纳整个值。
> 
> ERROR_SUCCESS
> 函数成功。

# vb.net - 以字典为数据源的分层列表框

> ID：16104505
> 
> 赞同：0
> 
> 时间：2013-04-19T12:21:38.810
> 
> 标签：vb.net, dictionary, hierarchical

我有一个具有以下设置的字典： Dictionary(of String, List(of MyObject)

我已经覆盖了 MyObject.toString 以显示一些不错的东西。

我想创建两个列表框（仅用于显示目的，因此不需要更改字典）。一个包含键，另一个包含所选键的 MyObjects（值）列表。

我尝试了以下方法，但这给了我两次相同的东西：

```
Dim bs As BindingSource = New BindingSource(dict,Nothing)
    ListBox1.DataSource = bs
    ListBox1.DisplayMember = "Key"
    ListBox2.DataSource = bs
    ListBox2.DisplayMember = "Value" 
```

任何人都知道我该如何解决这个问题？

非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:57:44.220

您需要为第一个列表框定义一个事件处理程序（可能是“SelectedIndexChanged”）

例如：

```
 Private Sub ListBox1_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles ListBox1.SelectedIndexChanged
    ListBox2.DataSource = New BindingSource(CType(ListBox1.SelectedItem, KeyValuePair(Of String, myObject())).Value, Nothing)
End Sub 
```

我在测试时将通用列表更改为数组，这是我用来测试的代码：

```
Dim dict As New Dictionary(Of String, Object())

Private Sub ListBox1_SelectedIndexChanged(sender As System.Object, e As System.EventArgs) Handles ListBox1.SelectedIndexChanged
    ListBox2.DataSource = New BindingSource(CType(ListBox1.SelectedItem, KeyValuePair(Of String, Object())).Value, Nothing)
End Sub

Private Sub Form1_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    For j As Integer = 1 To 5
        Dim MyList As New List(Of Object)
        For i As Integer = 1 To 5
            MyList.Add(New With {.Index = i, .Pretty = String.Format("Collection {0} DisplayValue {1} ", j, i)})
        Next
        dict.Add(CStr(j), MyList.ToArray)
    Next

    Dim bs As BindingSource = New BindingSource(dict, Nothing)
    ListBox1.DataSource = bs
    ListBox1.DisplayMember = "Key"

End Sub 
```

# maven - Maven 快照和项目聚合。

> ID：16104512
> 
> 赞同：0
> 
> 时间：2013-04-19T12:22:25.767
> 
> 标签：maven

我有 2 个 maven 模块，它们都是快照构建，因为它们正在积极开发中。为了便于讨论，这两个模块是通用的，& web. 网络依赖于共同点。我正在使用项目聚合来定义各个模块。如果我执行一个目标，让我们说在包含模块 common 和 web 的父 pom.xml 上的 mvn test 两个模块上的测试目标都按预期运行。如果我仅在 web 模块上运行测试，则无法找到 common 的依赖项。换句话说，它无法找到常见的快照 jar。由于它是一个快照，因此它不会被部署到存储库中，所以这是有道理的。我的问题是，当我运行父 pom（项目聚合）时，它如何找到该依赖项？该公共模块工件在哪里部署，以便 Web 模块可以访问它并解决其依赖关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T15:04:51.787

如果您希望能够在任何地方运行它，您可以将快照库部署到本地存储库中：在您的情况下，使用以下命令将 common 部署到 web 中：

****mvn deploy:deploy-file -Durl=file:///your/web-project/root/dir -Dfile=your-common.jar -DgroupId= -DartifactId= -Dpackaging=jar -Dversion=xx-SNAPSHOT****

**这将生成一个本地 repo 目录结构，其中包含您的 jar。然后修改你的 web 的 pom.xml：**

 **```
<repositories>
    <repository>
        <id>project.local</id>
        <name>project</name>
        <url>file:${project.basedir}/repo</url>
   </repository>
</repositories> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-24T07:41:06.593

正如 Franz Ebner 在他的评论中建议的那样，首先运行：

```
# for the core pom:
mvn install 
```

它将核心工件放入您的本地机器 maven 2 存储库中，当您构建/测试/任何 Web 工件时可以从中获取它。**

# c# - 设置 SOAP 时是否需要在 URL 中添加 ?wsdl？

> ID：16104515
> 
> 赞同：-1
> 
> 时间：2013-04-19T12:22:36.920
> 
> 标签：c#, soap

我继承了一个 NUnit 测试项目，并且代码中没有 SOAP URL，`?wsdl`因此 URL 以 `../soap.svc`. Authenticate 也丢失了`?wsdl`，所以 URL 以`../WebServices/Authentication/Service.asmx`

建立连接时是否`?wsdl`默认添加？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:27:06.807

`wsdl`当您想要获取服务的实际 WSDL 定义文件时使用该参数，而不是当您真正想要对服务进行服务调用时使用。例如：

```
// GET or POST requests to call service functions.
http://localhost/Service/Service.asmx 

// GET the WSDL XML file for this service
http://localhost/Service/Service.asmx?wsdl 
```

一般来说`?wsdl`，如果您希望与服务本身进行交互，您可能不应该在 URL 的末尾添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:26:35.350

Service.asmx - 它是你的端点

Service.asmx?wsdl - 是您的服务的文档。

如果您使用“创建 Web 引用”或“创建服务引用”在 .NET 上实现客户端，它会访问 wsdl 以收集有关服务的必要信息并生成类。

# highcharts - 解释 Highcharts 不同的实例化

> ID：16104516
> 
> 赞同：0
> 
> 时间：2013-04-19T12:22:40.230
> 
> 标签：highcharts

我有一个非常好的 Highcharts 示例，它是从代码开始的：

```
$(function () {
    $('#container').highcharts({
        chart: {
            type: 'line'
        }, 
```

当我用以下代码替换它时，它不起作用。

```
$(document).ready(function() {
var chart1 = new Highcharts.Chart({
        chart: {
       renderTo: '#container1,
            type: 'line'
        }, 
```

有人可以解释其中的区别，为什么它不起作用？正如我所说，所有其他代码都是完全相同的，并且适用于第一个示例

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:26:02.307

您缺少`renderTo`选项中的结束引号。

```
renderTo: '#container1', 
```

此外，您的容器 ID 不同（`container`vs `container1`）。不确定这是否是故意的。

# c# - Windows 应用认证工具包：崩溃和挂起测试失败

> ID：16104518
> 
> 赞同：0
> 
> 时间：2013-04-19T12:22:43.327
> 
> 标签：c#, .net, windows-8, microsoft-metro, windows-store-apps

我即将完成我的第一个 Windows 应用商店应用程序，过去两天我在使用 Windows 应用程序认证工具包进行应用程序测试期间遇到了问题。

测试在“崩溃和挂起”测试中失败，我收到以下消息：

```
Crashes and hangs
Error Found: The crashes and hangs test detected the following errors:
Application ....................0.0.12_x86__jarrs3vj594qe was detected by Windows Error Reporting and experienced a crash or hang.
Impact if not fixed: An app that stops responding or crashes can cause data loss and is a poor user experience.
How to fix: Investigate, debug the executable(s) in question to identify and fix the problem, then rebuild and re-test the app. 
```

在调试模式下使用暂停和关闭进行一些测试后，我发现我的应用程序在以下情况下崩溃：运行 i 调试 => 暂停和关闭 => 再次在调试中运行。并且错误说 SuspensionManager 失败：weather.Common.SuspensionManager.RestoreAsync();

我认为这个问题与我的“扩展启动画面”有关，没有“扩展启动画面”我没有收到这个错误，并且应用程序通过了“崩溃和挂起”测试。这是 App.xaml.cs 和扩展启动画面的代码：

```
sealed partial class App : Application
{
    // Defining gloabal variables used across the App
    public string[] NavigateData { get; set; }
    public NavigationCacheMode NavigationCacheMode { get; set; }
    public parameterItem max1DayAgo = new parameterItem();
    public parameterItem min1DayAgo = new parameterItem();
    public parameterItem max1WeekAgo = new parameterItem();
    public parameterItem min1WeekAgo = new parameterItem();

    public parameterItem max1MonthAgo = new parameterItem();
    public parameterItem min1MonthAgo = new parameterItem();

public List<NameValueItem> tempTrends24Hours = new List<NameValueItem>();
    public List<NameValueItem> tempTrends30Days = new List<NameValueItem>();

    public List<NameValueItem> windSpeedTrends24Hours = new List<NameValueItem>();
    public List<NameValueItem> windSpeedTrends30Days = new List<NameValueItem>();

    public List<NameValueItem> windDirectionTrends24Hours = new List<NameValueItem>();
    public List<NameValueItem> windDirectionTrends30Days = new List<NameValueItem>();

    public List<NameValueItem> windChillTrends24Hours = new List<NameValueItem>();
    public List<NameValueItem> windChillTrends30Days = new List<NameValueItem>();

    public List<NameValueItem> humidityTrends24Hours = new List<NameValueItem>();
    public List<NameValueItem> humidityTrends30Days = new List<NameValueItem>();
    public string appBackgGround;

    public App()
    {
        this.InitializeComponent();
        this.Suspending += OnSuspending;       
    }

    protected async override void OnLaunched(LaunchActivatedEventArgs args)
    {

        //
        if (args.PreviousExecutionState == ApplicationExecutionState.Running)
        {
            Window.Current.Activate();
            return;
        }

        Frame rootFrame = Window.Current.Content as Frame;

        //Getting live tile data
        var uris = new List<Uri> 
                {
                    new Uri("..........WebService.asmx/GetFirstTile"),
                    new Uri("............./GetSecondTile"),
                    new Uri("................./GetStatisticTile"),
                    new Uri(".............../GetNewsTile1"),
                    new Uri("............../GetNewsTile2"),                
                };

        TileUpdater LiveTileUpdater = TileUpdateManager.CreateTileUpdaterForApplication();
        LiveTileUpdater.EnableNotificationQueue(true);  // Enable notifications
        LiveTileUpdater.Clear();  // Clear the current set of updates
        LiveTileUpdater.StartPeriodicUpdateBatch(uris, PeriodicUpdateRecurrence.HalfHour);

        //getting bacground image
        try
        {
            ServiceReference.WebServiceSoapClient webServiceObj = new ServiceReference.WebServiceSoapClient();
            appBackgGround = await webServiceObj.GetBackgroundImageAsync();// Get the name of the Background picture
        }
        catch
        {
         appBackgGround = "backgroundImageBlueSky.jpg";

        }

        // Do not repeat app initialization when the Window already has content,
        // just ensure that the window is active
        if (rootFrame == null)
        {
            // Create a Frame to act as the navigation context and navigate to the first page
            rootFrame = new Frame();
            weather.Common.SuspensionManager.RegisterFrame(rootFrame, "appFrame");

            // Her we set the application background Image for all pages  "backgroundImageBlueSky.jpg"
            rootFrame.Background = new ImageBrush
            {
                Stretch = Windows.UI.Xaml.Media.Stretch.UniformToFill,
                ImageSource = new BitmapImage { UriSource = new Uri("ms-appx:///Assets/" + appBackgGround) }

            };

            if (args.PreviousExecutionState == ApplicationExecutionState.Terminated)
            {
                    //TODO: Load state from previously suspended application
                    await weather.Common.SuspensionManager.RestoreAsync();

            }
            // Place the frame in the current Window
            Window.Current.Content = rootFrame;
        }

        if (rootFrame.Content == null)
        {
           // Navigating to the extended splash screen
            if (!rootFrame.Navigate(typeof(ExtendedSplashScreen), rootFrame.GetNavigationState()))
            {
                throw new Exception("Failed to create initial page");
            }
        }
        // About page
        var _Helper = new Flyouts.SettingsHelper();

        _Helper.AddCommand<Flyouts.About>("About");
        Window.Current.Activate();
    }      
    private async void OnSuspending(object sender, SuspendingEventArgs e)
    {
        var deferral = e.SuspendingOperation.GetDeferral();
        //TODO: Save application state and stop any background activity
        await weather.Common.SuspensionManager.SaveAsync();
        deferral.Complete();
    }
} 
```

扩展启动画面的代码：这里我做了一些 web 服务调用，以便为第一页加载数据。

```
public sealed partial class ExtendedSplashScreen : Page
    {

        public ExtendedSplashScreen()
        {
            this.InitializeComponent();
        }

        protected override async void OnNavigatedTo(NavigationEventArgs e)
        {
            /*
             * ........
             * ..........
             * ...........
             * ...........
             * ............
             * Here i do some webservice calls to get data for the first page(Mainpage
             * 
             */

            (App.Current as App).NavigateData = startupData;// save the data for the Mainpage to the Global variables

            this.Frame.SetNavigationState(e.Parameter as string);         
            this.Frame.Navigate(typeof(MainPage));// Finally navigate to the Mainpage
        }       
    }
} 
```

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T18:44:57.620

您是否将您的 Visual Studio 2012 更新为更新 2？如果没有，请这样做并重试。无论如何，请确保启动时间不超过 5 秒，否则您将无法通过认证。

# c# - 我可以假设一个方法的所有执行都将在 C# 中的同一个线程上吗？

> ID：16104523
> 
> 赞同：1
> 
> 时间：2013-04-19T12:23:06.547
> 
> 标签：c#

考虑以下方法

```
public void DoSomething()
{
    Thread initialThread = Thread.CurrentThread;
    //Do something 
    Thread endingThread = Thread.CurrentThread;
    Debug.Assert(object.ReferenceEquals(initialThread, endingThread));
} 
```

假设代码已编译并且不是迭代器，断言是否总是在 C# 中传递？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T12:25:00.243

如果您添加“而不是异步方法”，那么我认为这是一个合理的假设，是的。

基本上迭代器块和异步方法从根本上改变了执行流程——其他一切都是“在一个线程上从上到下执行”。当然，您的方法可以包含在其他地方执行的匿名函数，但我假设您不包括在内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:26:30.607

如果您不在网络环境中，那么除了您在两者之间做一些非常有趣的事情之外，那将是正确的。

但是，如果您在 Web 环境中，则 IIS 基础结构可能会在操作需要一段时间的情况下将执行交换到另一个线程，在这种情况下，这种假设有时会是错误的。

如果您正在处理 Web 环境，那么我建议不要使用 ThreadStatic，而是将其存储在 HttpContext.Current.Items 中 - 如果它不是 Web 环境，那么 ThreadStatic 就可以了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:26:33.997

我认为在所有当前的实现中，是的，但我认为不能保证。的文档`CurrentThread`说：

> **A** `Thread`表示当前正在运行的线程。

**我的重点**

（我也打算提到 async ，但鉴于我们接受该方法被声明为`void`，我决定排除这种情况）

* * *

从您的评论中：

> 该线程不会在执行中途用于其他方法

我不认为这*是*有保证的。当然，如果您`Wait()`在一个或多个任务上有任何明显的代码，则当前线程*可能*用于为其中的一些提供服务`Task`。

也可能有不太明显的方式可以使用线程。

* * *

要注意的另一项是异常过滤器的存在（不能在 C# 中实现，但奇怪的是在 VB 中可用） - 其中调用堆栈中较高的代码可能导致一些（任意）代码在抛出异常和您的异常之间执行`catch`或`finally`处理程序执行，如果抛出异常。

# ruby-on-rails - 将某些功能插入现有 ruby 方法的最佳方法

> ID：16104531
> 
> 赞同：0
> 
> 时间：2013-04-19T12:23:34.033
> 
> 标签：ruby-on-rails, ruby, design-patterns

我正在使用一种遗留方法，该方法过滤掉一些数据并返回一个元素数组。

简化版如下所示：

```
def filtering_rules
  items = []
  items = apply_rule_one
  return items if items == 3

  items = apply_rule_two
  return items if items == 3

  items = apply_rule_three  
  return items if items == 3
end 
```

我需要在运行 apply_rule 三之前添加一个记录器，所以我这样做了：

```
 def filtering_rules
  items = []
  items = apply_rule_one
  return items if items == 3

  items = apply_rule_two
  return items if items == 3

  Rails.logger("Rule 1 and 2 failed to return data moving to rule 3") if items.empty?  
  items = apply_rule_three  
  return items if items == 3
end 
```

我的测试通过了，一切正常。但是代码不是 DRY 并且规则过滤器中的记录器很丑陋。关于模式或最佳实践的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:12:05.717

这个怎么样？

```
RULES = [:rule_one, :rule_two, :rule_three]

def filtering_rules
 RULES.each do |rule|
   items = self.send("apply_#{rule}".to_sym)
   return items if items == 3
 end
end 
```

并将您的记录器放入最后一条规则。现在，这值得吗？我的猜测是，只有当您期望规则可以加班时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:12:52.517

好吧，我们对 apply_rule_x 函数和更广泛的上下文知之甚少 - 但你可以这样写：

```
items = [] # assuming it's an array originaly
[:apply_rule_one,:apply_rule_two, :apply_rule_three].each do |rule|
     Rails.logger("Rule 1 and 2 failed to return data moving to rule 3") if items.empty? and rule == :apply_rule_three
    items = send(rule)
    return items if items == 3
end 
```

但是，如果您只有 3 条规则并且数量不会增加 - 完全可以保留代码原样。

# ssl - 我们如何避免来自 herokuapp 的额外中间证书

> ID：16104532
> 
> 赞同：2
> 
> 时间：2013-04-19T12:23:36.347
> 
> 标签：ssl, heroku, ssl-certificate

经过几个小时的搜索，我终于发布了一个问题。

我使用 SSL 插件将我的 ssl 证书上传到 heroku。一切正常，证书没有问题。

但是，当我访问[http://www.digicert.com/help/index.htm?host=mydomain.com](http://www.digicert.com/help/index.htm?host=mydomain.com)时，我看到了另外 2 个我从未上传到 heroku 的证书。我怀疑它们是在 heroku.com 上找到的默认证书。后来我从服务器上删除了我的证书，以检查它们是否真的是默认证书，令我惊讶的是，我是对的。

现在，问题是如何从 heroku 中删除额外的证书？

有没有人遇到过这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T15:27:13.737

您可以从本地系统上传正确的链并绕过 Heroku 客户端的链完成：

```
$ heroku certs:update crt-file key-file --bypass 
```

（或者`certs:add`用于新端点。）

诀窍是`--bypass`国旗。

**更新：**这已在 Heroku 结束时修复。`--bypass`通常不再需要。

# c# - Paradox DB：查询中的西里尔字母，C#

> ID：16104534
> 
> 赞同：3
> 
> 时间：2013-04-19T12:23:42.787
> 
> 标签：c#, .net, database, encoding, paradox

我需要对 Paradox 数据库执行查询。有一个表，其中包含带有西里尔字母的数据，我正在尝试在这样的查询中使用西里尔字母参数：

```
select * 
from AccessZone zn
where zn.Name= 'Территория' 
```

在 AccessZone 表中，我有名称为“Территория”的记录，但此查询返回 0 行。

我将此查询编码为 windows-1252 编码，但结果相同。

当我得到一个包含西里尔值的查询结果时，我已经破坏了像'??????'这样的符号，所以，我从 windows-1252 解码它们，然后得到正确的值。我决定在使用西里尔符号执行查询时使用这个技巧，但它不影响结果，我仍然有 0 行。

我正在使用 c# 进行编码，如下所示：

```
private static string DecodeTo1252(string source)
{
    Encoding srcEncodingFormat = Encoding.Unicode;
    Encoding dstEncodingFormat = Encoding.GetEncoding("windows-1252");
    try
    {
        byte[] output = Encoding.Convert(srcEncodingFormat, 
                                         dstEncodingFormat, 
                                         srcEncodingFormat.GetBytes(source));

        return dstEncodingFormat.GetString(output);
    }
    catch (Exception)
    {

    }
    return string.Empty;
} 
```

那么，我必须如何构建查询，或对其进行编码以查询 paradox DB？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-16T12:56:50.617

Paradox 在 DOS 和 Windows 产品中有多个版本。但是大多数或所有这些都在该系统中使用带有“代码页”的 ascii 编码。您可能会得到正确的记录。但我不确定如何以 Unicode 显示它。我认为 Unicode 在显示获得的数据时出现问题。我认为您必须了解最初存储数据时使用的代码页。Paradox 可能将此称为排序顺序，至少在某些版本中，它是由 Paradox.sor 表定义的。

# algorithm - Prolog中信息检索的性能优化

> ID：16104540
> 
> 赞同：0
> 
> 时间：2013-04-19T12:24:15.820
> 
> 标签：algorithm, data-structures, prolog, information-retrieval, inverted-index

我想用 Prolog 做一些信息检索任务。目前，我有一组（大量）不同的 Prolog 理论，它们表示句子中的依赖关系（顺便说一下，我将这些 Prolog 代码存储在一个文本文件中）——我只想找到那些与用户定义的目标子句匹配的理论。

例如，我有这样的 Prolog 代码：

```
rel("nsubjpass","seen","It",S):-S is 1.
rel("aux","seen","can",S):-S is 1.
rel("auxpass","seen","be",S):-S is 1.
...
rel("prep", X, Y, S):-rel("dobj", Z, X, SCORE1), rel("prep", Z, Y, SCORE2), S is SCORE1*SCORE2.
...
rel(_,_,_, S):-S is 0.0001. 
```

我想搜索这样的目标子句：

```
?- rel("nsubj", WRONG, "Russell", SCORE1), 
   rel("nsubj", WRONG, "Russell", SCORE2), 
   ... , 
   rel("dobj",DOING,SOMETHING, SCORE9). 
```

如果我对理论进行简单的类似`foreach`循环，搜索时间会随着理论数量的增加而变慢，所以我必须引入一些优化。

我的想法是创建一个倒排索引，我可以在其中维护每个术语的频率，以及它们发生的理论的 ID。然后在搜索时，我会首先过滤掉那些不会包含在结果中的不必要的理论。

信息检索领域有没有其他行之有效的方法或好的模式和算法可以很好地处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T07:39:31.627

我将其写为答案而不是评论，只是因为评论非常有限。

首先，如果你确实打算使用 Prolog，那么做一些研究是值得的

1.  语言本身：
    *   它的优点和缺点是什么？
    *   我可以在惯用的 Prolog 中实现我的目标吗（已经解决了类似的问题）
2.  不同的实现：
    *   特定实现比其他实现提供什么
    *   将实现与其他语言接口起来有多容易

在开始的短暂挣扎之后，我一直在专门使用 SWI-Prolog，所以我有偏见。但是 SWI 提供了一个非常完整、通用、相当高效的实现、优秀的文档，并且是完全开源的。

继续前进，您似乎正在使用 Prolog 事实来表示您的数据。Prolog 事实的形式：

```
foo(a,b,1).
foo(a,d,10).
... 
```

建立*Prolog 数据库*。大多数实现都提供了某种事实索引，因此像“给我 'foo's 和 'a' 作为第一个参数”这样的查询：

```
?- foo(a,B,X).
B = b, X = 3;
B = d, X = 10. 
```

通过所有可用的事实进行非常有效的搜索并返回与您的查询匹配的事实。您绝对不需要使用 for 循环搜索事实，或编写事实搜索算法。但是请注意，事实索引可能因实现而异。

此外，根据您的用例，将字符串表示为 Prolog 原子可能是最佳解决方案，高效且易于实现。看[这里](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.21%27,swi%28%27/doc/Manual/manipatom.html%27%29%29)，特别是接近尾声的时候，一些非常有用的关于原子的“字符串操作”谓词。

继续前进，在 Prolog 中编写自上而下、从左到右的解析器是该语言的一个特性，使用 DCG（定句语法）。

最后，如果您对 Java 很熟悉并且只需要添加一个高效的（动态）数据存储，那么 Java + SQL 可能是更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:00:59.540

从 Prolog 开发人员的角度来看，我认为 Boris 的回答是合理的，但我不想花太多时间来研究如何从 Prolog 调用 Java 函数，反之亦然，更不用说从Prolog 脚本，这对我来说是必需的。

所以我有点固执，我试图实现我最初的想法，即从 Prolog 术语创建倒排索引，它完美地工作。所以现在当我想搜索某个 Prolog 目标时，第一步我可以过滤相关理论的“数据库”：我计算术语出现的交集，然后只使用这些理论运行 Prolog 引擎. 另一个大的性能优化是在各个搜索之间共享一个单例 TuProlog 引擎，它还减少了内存开销。哦，我也重构了规则，例如现在我写这个：

```
rel(nsubjpass, "seen","It", 1). 
```

而不是这个：

```
rel("nsubjpass","seen","It",S):-S is 1. 
```

我没有注意到这种变化对性能有任何显着提升，但至少它并没有变慢 :)

有了这些改动，现在可以看出真正的性能瓶颈不是运行 Prolog 引擎，而是使用 NLP 库……但这是另一个问题。:)

# mercurial - 如何为 mercurial 子存 储库指定默认推送？

> ID：16104544
> 
> 赞同：1
> 
> 时间：2013-04-19T12:24:31.970
> 
> 标签：mercurial, subrepos, mercurial-subrepos

当您使用添加 mercurial 子存​​储库时，`.hgsub`您可以使用 HTTPS 或 SSH 指定它们，但这是一个大问题：

*   如果您指定 HTTPS，您将无法推送，因为它需要您登录。
*   如果您指定 SSH，您将能够推送，但其他人甚至无法签出您的存储库。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:16:30.487

当然，这两种类型的 URL 都可以正常工作，正确配置以避免它们的方法在[PublishingRepositories](http://mercurial.selenic.com/wiki/PublishingRepositories)页面上。

对于 HTTPS 情况，您使用[hgrc 的 auth 部分](http://www.selenic.com/mercurial/hgrc.5.html#auth)来提供密码。

对于 SSH 情况，您只需要使用良好的旧 unix 权限来确保该 ssh 用户在远程主机上创建和写入的文件具有类似“dev”的组，并且该组中的任何其他用户都可以写入。像这样在服务器端作为 root 应该这样做：

```
chgrp -R developers /path/to/repo
chmod -R g+rwX /path/to/repo
find /path/to/repo -type d | xargs chmod g+s 
```

你只需要这样做一次，但它更像是一个 ServerFault 类型的主题。

# iphone - iphone 如何以曲线形状示例代码裁剪或剪切 UIView

> ID：16104545
> 
> 赞同：1
> 
> 时间：2013-04-19T12:24:44.890
> 
> 标签：iphone, objective-c, uiview, calayer

如何裁剪或切割成`UIView`弯曲的形状？我想`UIView`在角落上绘制边框和弯曲效果。我试过了，`CALayers`但角落看起来很模糊，有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:30:58.580

如果您只想在任何视图或控件的角落添加曲线，您可以使用

```
self.view.layer.cornerRadius = 5.0;
self.view.layer.masksToBounds = YES; 
```

// 只需要根据你的要求改变cornerRadius的大小。您只需要包含 Quartzcore 框架并在您想要获得弯曲效果时导入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:07:55.893

您只需要包含 Quartzcore 框架并导入

**曲线效果**

```
myView.layer.cornerRadius = 10.0;
myView.layer.masksToBounds = YES; 
```

**边框颜色**

```
myView.layer.borderColor = [[UIColor redColor]CGColor];
myView.layer.borderWidth = 2.0f; 
```

# c# - 对覆盖和新功能 C# 感到困惑

> ID：16104548
> 
> 赞同：1
> 
> 时间：2013-04-19T12:25:02.593
> 
> 标签：c#, .net, oop, .net-4.5

[在“抽象与虚函数](https://stackoverflow.com/questions/391483/what-is-the-difference-between-an-abstract-function-and-a-virtual-function)的区别”中了解抽象与虚方法之间的区别。

我有一个与`virtual`和有关的疑问`new`

让我们考虑如下示例代码

```
 class MainClass
 {
   public static void Main()
   {         
       DerivedClass _derived = new DerivedClass();          
       _derived.SayHello();          
       _derived.SayGoodbye();
       Console.ReadLine();
   }      
 }

public abstract class AbstractClass
{
   public void SayHello()
   {
       Console.WriteLine("Hello - abstract member\n");
   }

   public virtual void SayGoodbye()
   {
       Console.WriteLine("Goodbye- abstract member \n");
   }
   //public abstract void SayGoodbye();
}

public class DerivedClass : AbstractClass
{
   public new void SayHello()
   {
       Console.WriteLine("Hi There - Hiding base class member");
   }

   //public override void SayGoodbye()
   //{
   //    Console.WriteLine("See you later - In derived class OVERRIDE function");
   //}

   public new void SayGoodbye()
   {
       Console.WriteLine("See you later - In derived class I'm in  NEW  member");
   }           
} 
```

**我的问题：** 在派生类中，如果我调用函数，如何`override`执行`new`相同的`SayGoodbye`功能？我什么时候需要去选择/喜欢它们？在哪些实时场景中我需要更喜欢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:31:52.587

*   当您将类成员标记为`virtual`可以在子类中覆盖时。
*   如果要更改子类中的方法（在基类中声明为 virtual），可以同时使用`new`and`override`关键字，但它们之间存在差异

    . **使用 new 时**：如果将子类的对象转换为基类，然后调用该方法，将运行基类实现

    . **使用 override 时**：如果将子类的对象转换为基类，然后调用该方法，子类实现将运行。

这是代码

```
AbstractClass instance = new DerivedClass();
instance.SayGoodbye();  //See you later - In derived class I'm in  NEW  member 
```

但是如果你使用`override`

```
AbstractClass instance = new DerivedClass();
instance.SayGoodbye();  //Goodbye- abstract member \n 
```

# matplotlib - xy 坐标的对数坐标变换

> ID：16104553
> 
> 赞同：0
> 
> 时间：2013-04-19T12:25:21.833
> 
> 标签：matplotlib, transform

这是我想做的一件简单的事情

```
newcoords = ax.transLimits.transform( np.array(oldcoords)) ) 
```

为了将坐标从数据坐标`oldcoords`转换为绘图轴坐标`newcoords`。我的情节有一个线性比例的轴，另一个是对数比例的。对应于线性刻度的分量（例如`x`）被正确转换，但对应于对数刻度的分量（例如`y`）不是。

我试过这个，但它不起作用，我该怎么做？

```
transInstance = ax.transLimits + ax.transScale
newcoords = transInstance.transform( oldcoords ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-05-12T10:05:04.623

我可能会迟到，但经过大量谷歌搜索后我很难找到答案，所以我认为这可能仍然对其他人有所帮助。

坐标变换必须以稍微不同的方式发生；必须交换转换或必须嵌套两个转换。请注意，如果轴是线性的而不是对数的，这似乎是不必要的。

例如采取这个情节：

```
fig, ax = plt.subplots(1, 1)
ax.set_xlim(0, 10)
ax.set_ylim(0, 10)
ax.set_yscale('log') 
```

那么如果要变换 [10, 10] 点的坐标，则必须嵌套两个变换：

```
>>> ax.transLimits.transform(ax.transScale.transform([10, 10]))
array([1\.        , 0.99800598]) 
```

或对变换求和，但顺序相反：

```
>>> newTransform = ax.transScale + ax.transLimits
>>> newTransform.transform([10, 10])
array([1., 1.]) 
```

在其他答案中可能会找到更多见解：[Annotate point offset by a fixed fraction of the Axes size](https://stackoverflow.com/questions/43655568/annotate-point-offset-by-a-fixed-fraction-of-the-axes-size)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T15:41:27.043

您需要清楚您正在对数据进行哪些转换。我是否正确假设您在旧坐标 x,y 中有数据。然后你转换到一些新的坐标 x' 和 y' 并根据 log(y') 绘制 x'？

如果是这种情况，那么在找到最小值时，您将在 x'-log(y') 空间中有一个点，然后您需要在这些坐标中绘制一个矩形。

如果我误解了，我深表歉意，但我建议您完整地写下您所做的转换，并记住顺序很重要！

# java - Java OutputStream 和 InputStream 初始化

> ID：16104555
> 
> 赞同：1
> 
> 时间：2013-04-19T12:25:24.923
> 
> 标签：java, sockets

我有以下代码：

```
 private Socket mSenderSocket = null;

    private DataInputStream in = null;
    private DataOutputStream out = null;

    ...

        try 
        {
            mSenderSocket = new Socket(java.net.InetAddress.getByName(TCP_SERVER_IP), 12345);
            out = new DataOutputStream(mSenderSocket.getOutputStream());
            in = new DataInputStream(mSenderSocket.getInputStream());
        } 
        catch (UnknownHostException ex) 
        {
           System.err.println("Don't know about host.");
        }
        catch(IOException ex)
        {
            System.err.println("Couldn't get I/O");
        } 
```

我对以下场景感兴趣：

在聊天会话期间，如果发生 I/O 异常，那么我必须执行以下操作：

```
mSenderSocket = new Socket(java.net.InetAddress.getByName(TCP_SERVER_IP); 
```

现在`DataInputStream`和会发生什么`DataOutputStream`？

我应该再次初始化这些对象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:42:05.403

几乎可以肯定，在发生错误的情况下，您想丢弃整个对象并重新开始，或者甚至一开始就不要构造该对象。

（您可能还希望 a `finally`on that 关闭`Socket`。碰巧，调用`close`任一流或 on`Socket`将完全关闭所有三个对象。）

# c++ - 使用 rapidjson 设置浮点精度

> ID：16104558
> 
> 赞同：3
> 
> 时间：2013-04-19T12:25:35.367
> 
> 标签：c++, json, rapidjson

有没有办法控制使用 rapidjson 生成的 JSON 的输出精度？

例如：

```
writer.String("length");
writer.Double(1.0 / 3.0); 
```

这会产生类似的东西：

```
{ length: 0.33333333 } 
```

我发送了很多值，几个值只需要两位小数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T12:33:43.970

从来源

```
Writer& Double(double d)
{ 
   Prefix(kNumberType);
   WriteDouble(d);
   return *this; 
}

//! \todo Optimization with custom double-to-string converter.
void WriteDouble(double d) {
        char buffer[100];
#if _MSC_VER
    int ret = sprintf_s(buffer, sizeof(buffer), "%g", d);
#else
    int ret = snprintf(buffer, sizeof(buffer), "%g", d);
#endif
    RAPIDJSON_ASSERT(ret >= 1);
    for (int i = 0; i < ret; i++)
         stream_.Put(buffer[i]);
} 
```

> 对于`g`转换样式，将执行带有样式`e`或样式的转换。`f`
> 
> `f`：精度指定小数点字符后出现的最小位数。默认精度为`6`.

[从这里](http://en.cppreference.com/w/cpp/io/c/fprintf)引用

有变体，编写新`Writer`类并编写自己的`Double`功能实现。

最后一种情况的简单示例

```
template<typename Stream>
class Writer : public rapidjson::Writer<Stream>
{
public:
   Writer(Stream& stream) : rapidjson::Writer<Stream>(stream)
   {
   }
   Writer& Double(double d)
   {
      this->Prefix(rapidjson::kNumberType);
      char buffer[100];
      int ret = snprintf(buffer, sizeof(buffer), "%.2f", d);
      RAPIDJSON_ASSERT(ret >= 1);
      for (int i = 0; i < ret; ++i)
         this->stream_.Put(buffer[i]);
      return *this;
   }
}; 
```

用法如

```
int main()
{
   const std::string json =
      "{"
      "\"string\": 0.3221"
      "}";
   rapidjson::Document doc;
   doc.Parse<0>(json.c_str());

   rapidjson::FileStream fs(stdout);
   Writer<rapidjson::FileStream> writer(fs);
   doc.Accept(writer);
} 
```

结果：{“字符串”：0.32}

当然，如果您`Writer`手动使用，您可以`Double`使用精度参数编写函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-07-26T08:10:26.430

对于偶然发现此案例的任何人，此方法已于 2016 年 2 月 11 日添加到 rapidjson 中：

[`rapidjson::Writer::SetMaxDecimalPlaces(int maxDecimalPlaces)`](https://github.com/Tencent/rapidjson/blob/48fbd8cd202ca54031fe799db2ad44ffa8e77c13/include/rapidjson/writer.h#L173)

提供的默认 Writer 类比此处的其他答案更完整，除非您有非常特殊的需求，否则应始终使用。

# tfs - 是否可以使用 TFS 集成平台手动设置迁移基线？

> ID：16104562
> 
> 赞同：0
> 
> 时间：2013-04-19T12:25:54.213
> 
> 标签：tfs, tfsintegrationplatform

我之前使用[TFS 集成平台](http://visualstudiogallery.msdn.microsoft.com/eb77e739-c98c-4e36-9ead-fa115b27fefe)在我们参与的开源项目和使用开源 API 的客户的私有 TFS 服务器之间设置了同步。不幸的是，运行此同步的硬件在设置备份之前失败了。

我已经设置了新硬件，并安装了所有东西，但是我怎么能假装它认为头部版本一方面是 v100，另一方面是 v18384？如果没有 UI 选项，这可以通过直接在 Tfs_IntegrationPlatform 数据库中四处浏览来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T11:30:49.870

似乎使用当前版本的工具执行此操作的唯一选择是通过 Microsoft 支持记录问题 - 他们明确表示不建议这样做。就我而言，我能够让硬盘挂载并存活足够长的时间来恢复数据库并恢复它。

# c# - 如何手动触发回发事件以在项目 Asp.net mvc4 的服务器端激活 selectedIndexChanged 事件

> ID：16104575
> 
> 赞同：-1
> 
> 时间：2013-04-19T12:26:16.883
> 
> 标签：c#, javascript, asp.net-mvc-4, postback, autopostback

这是我的问题，我有一个带有`dropdownlist`控件（服务器端）的 mvc 项目，我在运行时填充了数据，我设置`autopostback`为 true 并启用`viewstate`；这个下拉列表有一个`selectedIndexChanged`事件处理程序，它应该在用户选择某些东西时触发。

但是，当页面加载时，`Page.IsPostBack`始终为 false，因此数据列表会重新填充，因此不会发生任何更改来触发事件处理程序。我在[这篇](http://www.mikesdotnetting.com/Article/128/Get-The-Drop-On-ASP.NET-MVC-DropDownLists)文章中读到，虽然 ASP Web 表单会自动处理回发，但在 MVC 上，我必须手动编写 javascript 代码来触发回发。

你们知道我有什么方法可以做到这一点，以便它进入`selectedIndexChanged`EventHandler 并且不再重新填充`dropdown list`吗？

编辑：我已经尝试过

```
<script type="text/javascript">
     function OnIndexChanged() {
         var databaseList = document.getElementById("FeaturedContent_DatabaseList");

         __doPostBack(FeaturedContent_DatabaseList, '');
         //window.location.href("http://localhost:49729/home/schemas?dbName=SchoolDB");//+ document.getElementById("DatabaseLists").selectedIndex;
         //postMessage("h", "http://localhost:49729/home/schemas?dbName=SchoolDB");
         //__doPost(
     }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:39:50.090

如我所见，您正在尝试使用 MVC。所以忘记回发的想法，你不会每次都重新加载页面。您可能会对服务器执行 ajax 异步请求。这里有一些代码来获取您的事件：

```
 $("#state").change(function(){
       //on-change code goes in here.
       //variable "this" references the state dropdown element
 }); 
```

它的jQuery。*#state*是您的下拉列表的 ID。

# php - 获取列的众数值

> ID：16104585
> 
> 赞同：1
> 
> 时间：2013-04-19T12:26:56.783
> 
> 标签：php, mysql, mode

我有一个表格（下面的示例），其中包含电话投票的结果

```
Number  Voted 
 97867  Dog
 97868  Cat
 97869  Dog
 97870  Dog
 97871  Cat
 97872  Donkey 
```

我使用查询数据

```
 $stmt =   $pdo->query( "SELECT * from data_mobile_api  " )  ;
  $voting = $stmt->fetch(PDO::FETCH_ASSOC); 
```

我想要做的是为特定动物获得最多的选票（获胜者是等），但是我需要动态地执行此操作，因为来自文本的响应可能是任何东西。到目前为止，我已将所有数据拉入一个数组

```
 $animal = $voting['Voted']
  $votes[$animal] += 1 
```

我所拥有的是一系列 $votes 但我不知道如何才能获得反应最高的动物，

任何人都可以提供一种方法来做到这一点或任何更好的解决方案吗？希望这一切都有意义，谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T12:32:07.770

让 mysql 完成这项工作：

```
$sql = "SELECT Voted, COUNT(Number) FROM table GROUP BY Voted"; 
```

# performance - 设计 - 遇到异常还是避免它？

> ID：16104589
> 
> 赞同：1
> 
> 时间：2013-04-19T12:27:04.733
> 
> 标签：performance, exception

我有一个简短的设计问题要问大家。我有一个必须尽快执行的方法，但它还必须提供有关异常发生的错误的信息。

可能会在一个循环中调用函数一千次，但很少会发生异常（<1% 的值会导致错误）。该函数仅计算非常简单的数学运算，不调用任何方法，使用 LINQ 或其他方法。

好的，到目前为止的情况，下面描述了我必须解决这个方法的两个场景。

我自己的解决方案是最常用的方法，在计算前检查每个参数（防止在ramaining方法中出现异常）：

```
int FastMethod(int number)
{
    if (number <= 0)
    {
        throw new ArgumentOutOfRangeException();
    }
    // (...) more parameter validations

    // do some operations with the number here
} 
```

向我推荐的另一个解决方案是，遇到错误并且只重新抛出捕获的异常：

```
int FastMethod(int number)
{
    try
    {
        // do some operations with the number here
    }
    catch (Exception ex)
    {
        throw (ex);
    }
} 
```

那么你会推荐什么？

第二种情况不需要调用所有这些可能会提高性能的 if 语句，但在我看来，它的设计看起来很糟糕。愿你能教我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:16:25.260

如果我正确理解您的问题，您是在问：我应该（1）允许发生异常，还是（2）我应该积极主动地测试输入变量（想想：防御性驾驶）？

**我的想法**

1.  如果可能，您应该尝试尽快检测错误数据。调用链中的第一个方法应该处理该问题。
2.  如果*FastMethod*方法是面向外的（例如公共 API 上的方法），那么我肯定会测试输入参数（*即*数字）
3.  [项目符号不相关]
4.  不要陷入过早优化的陷阱。性能*真的*是个问题吗？
5.  正如 michaelb958 指出的那样，您的第二个示例没有做任何事情。更糟糕的是，您只需捕获并重新抛出异常，就会不必要地增加额外的时钟周期。

如果没有更多信息，我会说： - 使用场景 1：测试输入参数以确保它在范围内

**附加阅读**

*   [MSDN：异常和异常处理](http://msdn.microsoft.com/en-ca/library/ms173160.aspx "MSDN：异常和异常处理")
*   [异常成本：何时抛出，何时不抛出](http://blogs.msdn.com/b/ricom/archive/2003/12/19/44697.aspx "异常成本：何时抛出，何时不抛出")
*   [.NET 中异常的性能影响](http://www.codeproject.com/Articles/11265/Performance-implications-of-Exceptions-in-NET ".NET 中异常的性能影响")

**更新 1**`LibFoo::WiggleBar()`正如 MSalters 在他的评论 中正确指出的那样：*参数检查应该放在调用链的最低级别*。一般来说，我会以这种方式实现我的代码。感谢 MSalters 让我直截了当。

我最初的想法是：第 1 条是：如果性能确实是一个问题，那么获得回时钟周期的一种方法是避免不必要地添加到调用堆栈中。

@Tim Krüger：除非您 100% 确定性能将成为一个问题......我会专注于编写可维护 + 易于阅读 + 无错误的代码。

**更新 2** 删除了项目符号 3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:48:22.363

另一种选择是将 catch 块移动到调用者的一个级别之上，因此不会为每次迭代再次设置 try/catch 块。当然，只有当您不想在异常后继续循环时才有效。

一般性能建议：将所有内容移出并非绝对需要的循环。可能与尽早发现错误的规则相冲突，但这是权衡。

# c# - ASP .Net 视频播放器 (AVI)

> ID：16104590
> 
> 赞同：0
> 
> 时间：2013-04-19T12:27:06.280
> 
> 标签：c#, asp.net

我正在寻找一种通过网络播放视频文件的方法。本质上，我有一些将在服务器上的 AVI 文件，这些文件将在某些控件上动态加载。它们是演示文稿和帮助文件，可帮助人们了解他们所做的选择，并将出现在表格的 div 部分中。

这是 2008 服务器/IIS 7/ASP .Net 4.0

如果可能的话，我试图避免使用 flash/silverlight/active x（基本上任何会让用户做任何额外事情的东西）。有人有任何来源或相关链接吗？页面在 VB 中，但我熟悉 c#，所以两者都可以。

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:17:00.573

可以尝试在纯 HTML 中执行此操作，如果可以选择 HTML，则使用视频标签。

我在我正在处理的项目中播放 avi 文件，方法是`<object>`在它们不起作用时使用带有后备的标签。请注意，这对 HTML5 没有任何作用，因为这对我来说不是一个选项，您可以在下面的代码之前添加它。

```
'<object data="' + fileUri + '" type="video/x-ms-wmv" class="preview-container" classid="clsid:E23FE9C6-778E-49D4-B537-38FCDE4887D8" width="' + width + '" height="' + height + '"> 
       <param name="src" value="' + fileUri + '" > 
       <param name="loop" value="true" > 
       <param name="controller" value="true" > 
       <param name="autoplay" value="true">
       <object type="video/x-ms-wmv" data="' + fileUri + '" width="' + width + '" height="' + height + '"> 
               <param name="controller" value="true" > 
               <param name="loop" value="true" > 
               <param name="autoplay" value="true"> 
               <a href="' + fileUri + '">Download</a> 
        </object> 
 </object>' 
```

本质上，我处理这个问题的方式是通过 javascript 动态更改 fileUri 参数以检索不同的视频。这将尝试播放视频，如果两种方法都失败，则会显示下载链接。第一个`<object>`标签用于 IE，第二个用于其他浏览器。IE 要求您为正在使用的播放器提供一个 classid。这里的classid 用于VLC，但可以更改为您想使用的任何内容，例如Windows Media Player。

编辑：由于您的评论，如果您的链接是静态的，那么您可以硬编码 URI：

```
<object data="PUT-YOUR-URI-HERE" type="video/x-ms-wmv" classid="clsid:E23FE9C6-778E-49D4-B537-38FCDE4887D8"> 
       <param name="src" value="PUT-YOUR-URI-HERE" > 
       <param name="loop" value="true" > 
       <param name="controller" value="true" > 
       <param name="autoplay" value="true">
       <object type="video/x-ms-wmv" data="PUT-YOUR-URI-HERE"> 
               <param name="controller" value="true" > 
               <param name="loop" value="true" > 
               <param name="autoplay" value="true"> 
               <a href="PUT-YOUR-URI-HERE">Download</a> 
        </object> 
 </object> 
```

# android - Android 上的 Phonegap LocalFileSystem 使用外部存储而不是内部存储

> ID：16104592
> 
> 赞同：2
> 
> 时间：2013-04-19T12:27:09.907
> 
> 标签：android, cordova, storage, external, internal

在我们的应用程序中，用户可以下载 PDF 并通过 iOS 上的 InAppBrowser 或 Android 上的本地 PDF 阅读器打开它。为了存储文件，我们使用 Phonegap 的 LocalFileSystem 选项。它运作良好，但问题是，文件存储在 Android 的外部存储中。这会导致一些问题。首先，用户可以访问文件，其次，当我删除应用程序时，文件仍然是持久的。我不明白为什么 Phonegap 不使用内部存储来使其类似于 iOS。

所以这是我的问题：有没有办法使用 Phonegap 将文件存储在内部存储中，我是否遗漏了一些明显的东西，或者我是否必须编写自己的插件来将文件存储在内部存储中？

笔记：

*   请不要像我可以使用 localStorage 那样的答案。我想使用内部存储。
*   我使用Phonegap：2.6，可能会降级到2.5.0（您可能已经注意到，本地存储目前在Android 2.6.0 上也无法正常工作-.-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T10:01:49.540

Phonegap 文档通常并没有真正详细介绍。以下是我想添加到 LocalFileSystem 文档中的一些信息：http: [//docs.phonegap.com/en/2.6.0/cordova_file_file.md.html#LocalFileSystem](http://docs.phonegap.com/en/2.6.0/cordova_file_file.md.html#LocalFileSystem)

**LocalFileSystem.Persistant：**

*   Android：使用外部存储。保存到外部存储的文件是世界可读的，并且可以由用户修改或删除。在删除应用程序时，文件仍然是持久的。来源：http: [//developer.android.com/guide/topics/data/data-storage.html#filesExternal](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)
*   iOS：LocalFileSystem.Persistant 使用特定于应用程序的内部存储。用户不能修改或删除文件。

**LocalFileSystem.Temporary：**

*   Android：使用外部缓存目录。保存到外部存储的文件是世界可读的，并且可以由用户修改或删除。**如果用户卸载您的应用程序，这些文件将被自动删除。
*   iOS：与 Persistant 相同的行为。

**摘要：** 我仍然不知道为什么Phonegap 不使用内部存储来使其类似于iOS。但是，由于我没有注意到 IOS 上的 Persistant 和 Temporary 之间有任何区别，并且在 Android 上卸载应用程序时文件被删除，我建议始终使用 LocalFileSystem.Temporary。

**更新：**在iOS中，如果你不使用持久化，你的数据可以在内存不足的情况下被操作系统删除

你同意吗？

感谢和抱歉我的英语不好:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T12:48:51.060

在 Android 上，该方法

`window.requestFileSystem`

将检查设备上是否有可用的 SD 卡。如果有，您的根目录将是 SD 卡。如果没有，它将使用

`/data/data/{app package name}`

我认为您需要在 Android 上指定根目录，以便默认情况下不使用 SD 卡。

[这个博客](http://simonmacdonald.blogspot.nl/2012/01/on-eleventh-day-of-phonegapping.html)可能对你有用。

# javascript - (jQuery) 是什么意思？

> ID：16104598
> 
> 赞同：-3
> 
> 时间：2013-04-19T12:27:42.643
> 
> 标签：javascript, jquery

我最近在一个 JavaScript 中注意到，**`(jQuery)`**脚本末尾包含了一个。它是什么意思，它有什么作用？

```
(function($) {
    //  code here
    ................
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T12:28:37.007

它看起来像这样：

```
(function($){
  //your code here
})(jQuery) 
```

这是为了确保美元符号 ( `$`) 指的是`jQuery`对象。有时其他库可能会更改它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:29:39.373

如果你问 jQuery 本身是什么：

[http://jquery.com/](http://jquery.com/)

> jQuery 是一个快速、小型且功能丰富的 JavaScript 库。它使 HTML 文档遍历和操作、事件处理、动画和 Ajax 之类的事情变得更加简单，它具有易于使用的 API，可在多种浏览器中工作。jQuery 结合了多功能性和可扩展性，改变了数百万人编写 JavaScript 的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:29:47.637

大概你见过这样的——

```
(function(anArgument) {
    // lots of code
    ................
})(jQuery); 
```

它所做的是，它创建一个带有一个参数的匿名函数，然后立即以`jQuery`对象作为参数调用它。

[如果你去这篇文章](https://stackoverflow.com/questions/8475578/what-is-the-reason-for-this-javascript-immediate-invocation-pattern)，你会了解更多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T12:30:38.967

JQuery 对象:)

来自 JQuery 文档：

默认情况下，jQuery 使用“$”作为“jQuery”的快捷方式

所以，使用 $("#id") 或 jQuery("#id") 是一样的

# c# - LogonUser 调用 - 用户是否需要该机器的登录权限？

> ID：16104602
> 
> 赞同：2
> 
> 时间：2013-04-19T12:27:50.377
> 
> 标签：c#, window, webserver, pinvoke

我很难找到有关这种方法的大量信息，所以我想我会在这里问一下，看看你们这些优秀的人是否可以提供帮助。

我们基本上拥有的是这个......

```
[DllImport("advapi32.dll", SetLastError = true)]
private static extern bool LogonUser(string lpszUsername, string lpszDomain, string lpszPassword, int dwLogonType, int dwLogonProvider, out IntPtr phToken);

if (LogonUser(AdminDevUser,
              AdminDevDomain, 
              AdminDevPassword,
              8, // LOGON32_LOGON_NETWORK_CLEARTEXT    
              0, // LOGON32_PROVIDER_DEFAULT    
              out token))
{
    wi = new WindowsIdentity(token);
    WindowsImpersonationContext wic = wi.Impersonate();
    blnFileExists = File.Exists(strFileName);
    wic.Undo();
    CloseHandle(token);
    return blnFileExists;
}
else
{
    throw new Exception(Marshal.GetLastWin32Error().ToString());
    //Console.WriteLine("LogonUser() failed with error code " + Marshal.GetLastWin32Error());
} 
```

写这篇文章的人已经不在了，所以我试图弄清楚需要什么来完成这项工作。我的假设是 loginUser 方法只是模拟从该 Web 服务器登录到网络的给定登录信息......然后在 Impersonate 之后完成的任何后续调用都将完成，就好像该用户正在执行它们而不是登录到网络的任何人一样服务器。正确的？

我们从 throw 行中得到一个错误，如下所示：

> 87 说明：在执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。异常详细信息：System.Exception：87

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:57:45.980

简短回答：您是对的，您需要 WRM/WSM 在远程计算机上执行与上述代码相同的操作。

有关您尝试在上面使用的 API 的更多详细信息：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa378184%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378184%28v=vs.85%29.aspx)

“...您不能使用 LogonUser 登录到远程计算机...”和“如果（...）成功，您将收到代表已登录用户的令牌的句柄。然后您可以使用此令牌处理冒充（...）”

* * *

要测试远程系统上是否存在文件（可能稍后再读取它？），我建议共享该文件或其包含文件夹，或使用服务器-客户端连接（例如套接字）。

解决问题的复杂方法是​​使用 Windows 远程管理。您可以在这里找到一个很好的起点：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa384423%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384423%28v=vs.85%29.aspx)

希望这可以帮助！

# soap - 覆盖数组内容中的命名空间

> ID：16104603
> 
> 赞同：0
> 
> 时间：2013-04-19T12:27:52.313
> 
> 标签：soap, python-2.7, lxml, django-1.5, spyne

我有以下内容：

```
from spyne.service import ServiceBase
from spyne.util import xml
from spyne.model import complex, primitive

class ComplexModel(complex.ComplexModelBase):
    __namespace__ = 'http://xml.candyshop.com/ns/candies/'
    __metaclass__ = complex.ComplexModelMeta

class CandyModel(ComplexModel):
    __type_name__ = 'candy'
    flavor = complex.XmlAttribute(primitive.Unicode)

class BagModel(ComplexModel):
    __type_name__ = 'bag'
    candies = complex.Array(CandyModel)

class CandyShop(ServiceBase):
    __tns__ = 'http://xml.candyshop.com/ns/shop/'

    @rpc(_returns=primitive.AnyXml)
    def get_my_bag(ctx):
        bag = BagModel()
        bag.candies = [CandyModel(flavor='choco')]
        return xml.get_object_as_xml(
            bag,
            cls=BagModel,
            root_tag_name='bag',
        )

    @classmethod
    def dispatch(cls):
        from django.views.decorators.csrf import csrf_exempt
        from spyne.application import Application
        from spyne.server.django import DjangoApplication

        application = Application([cls],
            tns=cls.__tns__,
            in_protocol=Soap11(validator='lxml'),
            out_protocol=Soap11(cleanup_namespaces=True)
        )
        return csrf_exempt(DjangoApplication(application))

shop_service = CandyShop.dispatch() 
```

结果`get_my_bag`如下：

```
<tns:get_my_bagResult xmlns:tns="http://xml.candyshop.com/ns/shop/">
    <ns0:bag xmlns:ns0="http://xml.candyshop.com/ns/candies/">
        <ns0:candies>
            <ns1:candy xmlns:ns1="None" flavor="choco"/>
        </ns0:candies>
    </ns0:bag>
</tns:get_my_bagResult> 
```

但我想要以下：

```
<tns:get_my_bagResult xmlns:tns="http://xml.candyshop.com/ns/shop/">
    <ns0:bag xmlns:ns0="http://xml.candyshop.com/ns/candies/">
        <ns0:candies>
            <ns0:specialCandy flavor="choco"/>
        </ns0:candies>
    </ns0:bag>
</tns:get_my_bagResult> 
```

那么，如何在不定义新子类的情况下自定义数组内容的类型名称呢？我试过了 `complex.Array(CandyModel.customize(type_name='specialCandy'))`

但这不起作用。使用静态`alias`方法给出了一个空的`<ns0:candies/>`，也许我仍然把`CandyModel`实例放到`candies`列表中，但这是我的目标。

其次，为什么存在`xmlns:ns1="None"`以及如何解决它`ns0`？

顺便提一句。有没有办法自定义命名空间前缀？

* * *

## 编辑

```
class Candies(complex.Array):
    __namespace__ = 'http://xml.candyshop.com/ns/candies/' 
```

和

```
candies = Candies(CandyModel) 
```

解决了命名空间的问题，但它是一种解决方法而不是解决方案。我更喜欢内联自定义或一些带有我的命名空间的 mixin `ComplexModel`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T22:22:07.613

为什么要返回 AnyXml 而不是返回正确的对象？

下面是重构代码以返回所需的 XML 文档：

```
import logging
logging.basicConfig(level=logging.DEBUG)
logging.getLogger('spyne.protocol.xml').setLevel(logging.DEBUG)

from spyne.decorator import rpc
from spyne.service import ServiceBase
from spyne.util import xml
from spyne.model import complex, primitive
from spyne.application import Application
from spyne.protocol.soap import Soap11
from spyne.server.wsgi import WsgiApplication
from lxml import etree

class ComplexModel(complex.ComplexModelBase):
    __namespace__ = 'http://xml.candyshop.com/ns/candies/'
    __metaclass__ = complex.ComplexModelMeta

class CandyModel(ComplexModel):
    __type_name__ = 'candy'
    flavor = complex.XmlAttribute(primitive.Unicode)

class BagModel(ComplexModel):
    __type_name__ = 'bag'
    candies = complex.Array(CandyModel)

class Bag(ComplexModel):
    bag = BagModel

class CandyShop(ServiceBase):
    __tns__ = 'http://xml.candyshop.com/ns/shop/'

    @rpc(_returns=Bag)
    def get_my_bag(ctx):
        bag = BagModel()
        bag.candies = [CandyModel(flavor='choco')]
        return Bag(bag=bag)

    @classmethod
    def dispatch(cls):
        application = Application([cls],
            tns=cls.__tns__,
            in_protocol=Soap11(validator='lxml'),
            out_protocol=Soap11(cleanup_namespaces=True)
        )
        return application

# In case you need to extract parts of your response, you can use hooks:

def _on_method_return_document(ctx):
    ns = ctx.app.interface.nsmap
    elt = ctx.out_document.xpath('//s0:bag',namespaces=ns)[0]
    output = etree.tostring(elt, pretty_print=True)

    print output # do what you want with it.

CandyShop.event_manager.add_listener('method_return_document',
                                                _on_method_return_document)

if __name__ == '__main__':
    from wsgiref.simple_server import make_server

    service_app = CandyShop.dispatch()

    application = WsgiApplication(service_app)

    server = make_server('0.0.0.0', 8080, application)
    server.serve_forever() 
```

这是输出：

```
<?xml version='1.0' encoding='ASCII'?>
<senv:Envelope xmlns:tns="http://xml.candyshop.com/ns/shop/" 
               xmlns:s0="http://xml.candyshop.com/ns/candies/" 
               xmlns:senv="http://schemas.xmlsoap.org/soap/envelope/">
  <senv:Body>
    <tns:get_my_bagResponse>
      <tns:get_my_bagResult>
        <s0:bag>
          <s0:candies>
            <s0:candy flavor="choco"/>
          </s0:candies>
        </s0:bag>
      </tns:get_my_bagResult>
    </tns:get_my_bagResponse>
  </senv:Body>
</senv:Envelope> 
```

**编辑：**

如果您需要提取部分响应，您可以使用钩子。我已经更新了代码。这里也有很多事件示例：[https ://github.com/arskom/spyne/blob/master/examples/events.py](https://github.com/arskom/spyne/blob/master/examples/events.py)

# java - 动态加载 Jar 并实例化已加载类的对象

> ID：16104605
> 
> 赞同：2
> 
> 时间：2013-04-19T12:28:06.827
> 
> 标签：java, web-services, dynamic, client, classloader

我尝试将 jar 动态加载到我的 Java 项目中。

这是类加载器的代码：

```
public class ClassLoad {

public static void main(String[] args) {

    String filePath = new String("C:/Users/Mehdi/Desktop/JavaClassLoader/jarred.jar");

    URL myJarFile = null;
    try {
        myJarFile = new URL("file://"+filePath);
    } catch (MalformedURLException e1) {
        System.out.println("1");
        e1.printStackTrace();
    }

    URLClassLoader cl = URLClassLoader.newInstance(new URL[]{myJarFile});

    Class Jarred = null;
    try {
        Jarred = cl.loadClass("com.jarred.exp.Jarred");
    } catch (ClassNotFoundException e) {
        System.out.println("2");
        e.printStackTrace();
    }

    Method simpleWrite = null;
    try {
        simpleWrite = Jarred.getMethod("simpleWrite", new Class[] {String.class});
    } catch (SecurityException e) {
        System.out.println("3");
        e.printStackTrace();
    } catch (NoSuchMethodException e) {
        System.out.println("4");
        e.printStackTrace();
    }

    Object JarredObj = null;
    try {
        JarredObj = Jarred.newInstance();
    } catch (InstantiationException e) {
        System.out.println("5");
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        System.out.println("6");
        e.printStackTrace();
    }

    try {
        Object response = simpleWrite.invoke(JarredObj, "\nHello Mehdi ! It works hamdoulillah :D");
    } catch (IllegalArgumentException e) {
        e.printStackTrace();
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    } catch (InvocationTargetException e) {
        e.printStackTrace();
    }
}
} 
```

以及包含在 Jar 中的类：

```
package com.jarred.exp;

public class Jarred {

public void simpleWrite(String str) {
    System.out.println(str);
} 
```

}

它给了我：

```
2
java.lang.ClassNotFoundException: com.jarred.exp.Jarred
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.net.FactoryURLClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at ClassLoad.main(ClassLoad.java:25)
Exception in thread "main" java.lang.NullPointerException
at ClassLoad.main(ClassLoad.java:32) 
```

你对此有什么想法吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T20:46:43.243

您的文件 URL 似乎无效。

[“Windows 中的文件 URI”](http://blogs.msdn.com/b/ie/archive/2006/12/06/file-uris-in-windows.aspx)说

> 对于本地 Windows 文件路径
> 
> `C:\Documents and Settings\davris\FileSchemeURIs.doc`
> 
> Windows 中对应的有效文件 URI 为：
> 
> `file:///C:/Documents%20and%20Settings/davris/FileSchemeURIs.doc`

这表明冒号后需要*三个斜杠*，但是您正在计算的 URL

```
String filePath = new String("C:/Users/Mehdi/Desktop/JavaClassLoader/jarred.jar");

URL myJarFile = null;
try {
    myJarFile = new URL("file://"+filePath); 
```

之后只有*两个斜杠*`file:`。也许

```
 myJarFile = new URL("file://"+filePath); 
```

应该

```
 myJarFile = new URL("file:///"+filePath); 
```

或者你可以[`java.io.File.toURI`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#toURI%28%29)这样使用

```
File myJarFile = new File("C:\\Users\\Mehdi\\Desktop\\JavaClassLoader\\jarred.jar");
if (!myJarFile.isFile()) {
  throw new FileNotFoundException("Missing required JAR: " + myJarFile.toString());
}
URL myJarUrl = myJarFile.toURI().toURL(); 
```

具有适当的异常处理。

# visual-studio-2012 - Team Foundation Service，发布到登台/生产

> ID：16104613
> 
> 赞同：1
> 
> 时间：2013-04-19T12:28:45.537
> 
> 标签：visual-studio-2012, web-deployment, azure-devops

我一直在寻找来自 Visual Studio 2012 的 TFS 发布解决方案，并且我正在尝试找到执行这项工作的最理想方式。

最初我是通过 FTP 完成此操作并发布包，但这可能会因上传时间过长而受到影响，具体取决于项目的大小。我之前还在其中一台登台服务器上安装了 VS2012，通过执行获取最新版本，然后从服务器本身进行本地发布通常非常快，但我不喜欢在服务器上安装它。

一个理想的解决方案是只上传与最新发布的差异，这将缩短上传时间，几乎就像远程“获取最新”一样。这是可能的，还是有可能对我有用的替代方法？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:18:46.530

如果您已经通过构建定义从 TFS 发布，则 Web 部署具有多个用于同步内容的设置，以便仅部署最新的更改，而不是每次都复制所有内容。

[如果需要，这里有一个指南，可帮助您从 Vishal Joshi 开始使用 Web Deploy](http://vishaljoshi.blogspot.com/2010/11/team-build-web-deployment-web-deploy-vs.html#!/2010/11/team-build-web-deployment-web-deploy-vs.html)

[这是 Web Deploy 操作设置的链接。](http://technet.microsoft.com/en-us/library/dd569089%28WS.10%29.aspx) 特别是，'sync' 动词和 'dest' 和 'UseCheckSum' 设置可以允许所需的控制级别。

如果我正确理解了您的问题，我很难衡量，希望这会有所帮助。

# java - 使用 BufferedReader 读取文本文件

> ID：16104616
> 
> 赞同：33
> 
> 时间：2013-04-19T12:28:56.553
> 
> 标签：java, file, text

我在使用 BufferedReader 时遇到问题

我想打印一个文本文件的 6 行：

```
public class Reader {

public static void main(String[]args) throws IOException{

    FileReader in = new FileReader("C:/test.txt");
    BufferedReader br = new BufferedReader(in);

    while (br.readLine() != null) {
        System.out.println(br.readLine());
    }
    in.close();

} 
```

现在从我每次调用 readLine() 方法时可以收集到的信息，它会自动前进到下一行。

所以我不能使用条件 br.readLine() != null 因为它已经将它推进了一行并且我得到了输出：

```
Line 2
Line 4
Line 6 
```

我使用什么条件来检查文本字段中是否还有新行。

提前致谢！

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-04-19T12:31:04.967

这就是问题：

```
while (br.readLine() != null) {
    System.out.println(br.readLine());
} 
```

你有两个调用`readLine`- 第一个*只*检查是否有一行（但读取它并将其丢弃），第二个读取*下一*行。你要：

```
String line;
while ((line = br.readLine()) != null) {
    System.out.println(line);
} 
```

现在我们每次循环迭代只调用`readLine()` *一次*，并使用我们读过的那一行来表示“我们完成了吗？” 和“打印出线”部分。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-19T12:31:13.093

您阅读循环并`line` 通过`while`循环阅读下一行，因此只需在 while 循环中阅读

```
 String s;
 while ((s=br.readLine()) != null) {
     System.out.println(s);
  } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-19T12:31:20.423

您可以将结果分配给`br.readLine()`变量并将其用于处理和检查，如下所示：

```
String line = br.readLine();
while (line != null) { // You might also want to check for empty?
    System.out.println(line);
    line = br.readLine();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-06-09T16:21:25.853

使用资源尝试。这将自动关闭资源。

```
try (BufferedReader br = new BufferedReader(new FileReader("C:/test.txt"))) {
    String line;
    while ((line = br.readLine()) != null) {
        System.out.println(line);
    }
} catch (Exception e) {

} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-09T13:14:55.890

```
private void readFile() throws Exception {
      AsynchronousFileChannel input=AsynchronousFileChannel.open(Paths.get("E:/dicom_server_storage/abc.txt"),StandardOpenOption.READ);
      ByteBuffer buffer=ByteBuffer.allocate(1024);
      input.read(buffer,0,null,new CompletionHandler<Integer,Void>(){
        @Override public void completed(    Integer result,    Void attachment){
          System.out.println("Done reading the file.");
        }
        @Override public void failed(    Throwable exc,    Void attachment){
          System.err.println("An error occured:" + exc.getMessage());
        }
      }
    );
      System.out.println("This thread keeps on running");
      Thread.sleep(100);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T12:31:43.473

也许你的意思是：

```
public class Reader {

public static void main(String[]args) throws IOException{

    FileReader in = new FileReader("C:/test.txt");
    BufferedReader br = new BufferedReader(in);
    String line = br.readLine();
    while (line!=null) {
        System.out.println(line);
        line = br.readLine();
    }
    in.close();

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-19T12:31:52.557

尝试：

```
String text= br.readLine();
while (text != null) 
{
  System.out.println(text);
  text=br.readLine();
}
in.close(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-03T21:19:20.750

或者

```
public String getFileStream(final String inputFile) {
        String result = "";
        Scanner s = null;

        try {
            s = new Scanner(new BufferedReader(new FileReader(inputFile)));
            while (s.hasNext()) {
                result = result + s.nextLine();
            }
        } catch (final IOException ex) {
            ex.printStackTrace();
        } finally {
            if (s != null) {
                s.close();
            }
        }
        return result;
} 
```

这也是第一行。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-07T07:09:31.223

你可以将它存储在数组中，然后使用你想要的任何一行。这是我用来从文件中读取行并将其存储在字符串数组中的代码片段，希望这对你有用:)

```
public class user {
 public static void main(String x[]) throws IOException{
  BufferedReader b=new BufferedReader(new FileReader("<path to file>"));
  String[] user=new String[30];
  String line="";
  while ((line = b.readLine()) != null) {
   user[i]=line; 
   System.out.println(user[1]);
   i++;  
   }

 }
} 
```

# php - 在进行 INSERT 之前，您的 MySQL 是在 JSON 编码之前还是在 JSON 编码之后真正转义数据？

> ID：16104618
> 
> 赞同：3
> 
> 时间：2013-04-19T12:29:05.743
> 
> 标签：php, mysql, json, mysql-real-escape-string

在 MySQL 中插入 JSON 编码的数据之前，是先对数据进行 JSON 编码，然后在插入前转义，还是先对数据进行转义，然后再进行 JSON 编码，然后再插入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:31:33.580

首先 JSON 对其进行编码，然后在插入数据库之前对其进行转义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T15:04:33.217

不要使用 mysql_real_escape_string - 它已被弃用。[http://php.net/manual/en/function.mysql-real-escape-string.php](http://php.net/manual/en/function.mysql-real-escape-string.php)如果您使用诸如 PDO 之类的 DB 库之一，那么它将为您完成工作。查看[真正的转义字符串和 PDO](https://stackoverflow.com/questions/3716373/real-escape-string-and-pdo)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-19T12:44:31.353

问题的陈述是错误的。

1.  不要将 JSON 存储在数据库中。
2.  正如您的问题所暗示的那样，真正的逃生并不能使您的数据安全。
3.  mysql-real-escape-string 属于 mysql - 所以，答案很明显。

# wpf - wpf线程池实现

> ID：16104619
> 
> 赞同：1
> 
> 时间：2013-04-19T12:29:07.480
> 
> 标签：wpf, threadpool, implementation

我必须在我的项目中对数据表进行验证，但它应该在不同的后台线程上运行，而不是在主 UI 线程上运行。一旦完成，它应该在屏幕上显示错误列表。此验证从不同的地方运行，有 6 到 7 个地方可能会导致数据表错误。我编写了以下函数，可以从这 6 到 7 个地方调用它来执行验证：

```
Thread validationThread = null;

    public void RunDataTableValidation()
        {      
                validationThread = new Thread(new ThreadStart(() => validationHandler()));
                validationThread.Name = "DataGridValidationThread";
                validationThread.IsBackground = true;
                validationThread.Start();
            }
        }

    public void validationHandler(Label FakeLabel)
        {

         try { //all validation code}

         finally
            {
                System.Windows.Application.Current.Dispatcher.BeginInvoke(new Action(() => ProcessingDone()));
            }
        }

      void ProcessingDone()
        {          
            if (validationThread != null && validationThread.ThreadState ==   ThreadState.Stopped)
           {
                validationThread.Abort();
            }           
        } 
```

我的问题是：每次当它完成工作时我都会中止线程。但是如果当前线程仍在运行并且其他一些代码调用此函数并启动新线程，我也想中止线程。我知道我可以使用 ThreadPool 但请帮助我 - 如何在上面的代码中实现线程池？所以它会在启动新线程之前自动杀死线程池中所有正在运行的线程

**编辑：**

```
 public void RunDataTableValidation()
        {
           ThreadPool.QueueUserWorkItem(o =>
            {
                try
                {
                    validationHandler();

                }
                catch (NotSupportedException) { }
            });
      }

      public void validationHandler(Label FakeLabel)
      {

        try
        {
            foreach (DataRow drRow in this.CurrentDataTable.Rows)
            {

            }     
            Thread.Sleep(7000); ( i put sleep right now for testing becoz this code takes few secs becoz of 500+ rows of datagrid         
        }
        finally
        {
            System.Windows.Application.Current.Dispatcher.BeginInvoke(new Action(() => ProcessingDone()));
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:14:38.880

从不打电话`Thread.Abort()`。例如，请参见[此处](https://stackoverflow.com/a/6384859/1136211)以获取解释。在您的示例代码中甚至没有必要，因为 Thread 从您传递给其构造函数的方法返回时会自动终止。

无论如何，只需通过以下方式在 ThreadPool 线程中运行您的验证方法[`QueueUserWorkItem`](http://msdn.microsoft.com/en-us/library/kbf0f1ct.aspx)：

```
private bool terminate;

public void TerminateThread()
{
    terminate = true;
}

public void RunDataTableValidation()
{    
    ThreadPool.QueueUserWorkItem(
        o =>
        {
            try
            {
                while (!terminate)
                {
                    // all validation code
                }
            }
            finally
            {
                Dispatcher.BeginInvoke((Action)ProcessingDone);
            }
            terminate = false;
        });
}

private void ProcessingDone()
{
    // update the UI here
} 
```

# php - 使配置 ['base_url'] 动态

> ID：16104629
> 
> 赞同：-4
> 
> 时间：2013-04-19T12:29:35.357
> 
> 标签：php, codeigniter, url

我需要`$config['base_url']`在 config.php 中动态分配，因为我的网站在不同的域上运行，因此需要相应地更改它。

[我读了这个问题](https://stackoverflow.com/questions/12650346/need-to-assign-dynamically-configbase-url-in-codeigniter)，但没有得到有效的答案，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:32:54.680

检查这个 [http://www.php.net/manual/en/reserved.variables.server.php](http://www.php.net/manual/en/reserved.variables.server.php)

```
<?php
echo $_SERVER['SERVER_NAME'];
?> 
```

输出：www.example.com

所以

```
$config['base_url'] = $_SERVER['SERVER_NAME']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:10:13.663

我用这个。。

$config['base_url'] = 'http://'。$_SERVER['HTTP_HOST'].'/';

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:44:54.123

Akash，请在以后的问题中更加清楚。在阅读了对 Dorgladir 回答的评论后，我才弄清楚你在问什么。您在问题中没有提到管理面板或后端。

创建一个在其他库之前加载的库。例如，我使用自动加载的 Init/Startup 库在其他库和控制器加载之前执行常见操作。

使用该库的构造函数从数据库（或您存储它的任何位置）检索存储的 base_url，然后使用 config->set_item 设置它。

例子：

```
$CI =& get_instance();
/* code here to retrieve url from database and set it to $stored_base_url */
$CI->config->set_item('base_url', $stored_base_url); 
```

在该类之后加载的任何内容都将使用新的 base_url。

# spring - bean 名称用户的绑定和普通目标对象都不能用作请求属性

> ID：16104632
> 
> 赞同：-1
> 
> 时间：2013-04-19T12:29:45.547
> 
> 标签：spring, spring-mvc

我想我已经在这个主题下引用了谷歌中的几乎所有链接，并且已经在这个网站上发布了两个关于这个错误的问题，但仍然找不到解决这个问题的方法……我正在尝试一些春季样品，但我被困住了一个示例程序如下

我的 POJO 类如下

用户.java

```
package project2;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name="user")
public class User {

    private Long id;
    private String name;
    private String password;
    private String gender;
    private String country;

    @Id
    @GeneratedValue
    @Column(name="USER_ID")
    public Long getId() {
         return id;
    }
    public void setId(Long id) {
        this.id = id;
    }

    @Column(name="USER_NAME")
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }

    @Column(name="USER_PASSWORD")
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }

    @Column(name="USER_GENDER")
    public String getGender() {
        return gender;
    }
    public void setGender(String gender) {
        this.gender = gender;
    }

    @Column(name="USER_COUNTRY")
    public String getCountry() {
        return country;
    }
    public void setCountry(String country) {
        this.country = country;
    }

   } 
```

我的 UserDAO 接口类如下

用户DAO.java

```
package project2;
import project2.User;
import java.util.List;

public interface UserDAO {

    public void saveUser(User user) ;
    public List<User> listUser() ;
    public void deleteUser(User user) ;
    public List<User> findUser(User user);
    public void updateUser(User user);
} 
```

我正在使用休眠模板。

UserDAOImpl.java

```
package project2;
import project2.User;
import java.util.List;
import org.hibernate.Query;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.springframework.orm.hibernate3.HibernateTemplate;

public class UserDAOImpl implements UserDAO {

    private HibernateTemplate hibernateTemplate;

    public void setSessionFactory(SessionFactory sessionFactory) {
        this.hibernateTemplate = new HibernateTemplate(sessionFactory);
    }

    @Override
    public void saveUser(User user) {
        hibernateTemplate.saveOrUpdate(user);
    }

    @Override
    @SuppressWarnings("unchecked")
    public List<User> listUser() {
        return hibernateTemplate.find("from user");
    }

    @Override
    public void deleteUser(User user) {
         hibernateTemplate.delete(user);
    }

    @Override
    public void updateUser(User user) {
        hibernateTemplate.update(user);

    }
} 
```

我的控制器类如下

用户控制器2.java

```
package project2;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.stereotype.Controller;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.multiaction.MultiActionController;

@Controller
public class UserController2{

    private UserDAO userDAO;

    public void setUserDAO(UserDAO userDAO) {
        this.userDAO = userDAO;
    }
    @RequestMapping(params = "add", method = RequestMethod.POST)
    public ModelAndView add(HttpServletRequest request,
           HttpServletResponse response, User user) throws Exception {
        userDAO.saveUser(user);
        return new ModelAndView("redirect:list.htm");
          //i tried with ModelAndView("redirect:user.htm") as well
    }
    @RequestMapping(params = "delete", method = RequestMethod.POST)
    @Transactional
    public ModelAndView delete(HttpServletRequest request,
        HttpServletResponse response, User user) throws Exception {
        userDAO.deleteUser(user);
        return new ModelAndView("redirect:list.htm");
    }

    public ModelAndView list(HttpServletRequest request,
         HttpServletResponse response) throws Exception {
        ModelMap modelMap = new ModelMap();
        modelMap.addAttribute("userList", userDAO.listUser());
        modelMap.addAttribute("user", new User());
        return new ModelAndView("userForm", modelMap);
    }
 } 
```

我的jsp页面如下

用户窗体.jsp

```
<body>
 <center> WELCOME TO CUSTOMER ACCESS SITE.PLEASE ENTER THE FOLLOWING 
  INFORMATION</center>
<form:form method="POST" action="add.htm"  modelAttribute="user">
   <table>
   <tr>
    <td><form:label path="name">Name</form:label></td>
    <td><form:input path="name" /></td>
</tr>

<tr>
    <td><form:label path="id">id</form:label></td>
    <td><form:input path="id" /></td>
</tr>

<tr>
    <td><form:label path="password">password</form:label></td>
    <td><form:input path="password" /></td>
</tr>
<tr>
    <td><form:label path="gender">Gender</form:label></td>
    <td><form:input path="gender" /></td>
</tr>
<tr>
    <td><form:label path="country">Country</form:label></td>
    <td><form:input path="country" /></td>
</tr>
<tr>
    <td colspan="2">
        <input type="submit" value="Submit"/>
    </td>
</tr>
 </table>  
</form:form>

</body> 
```

我的 list.jsp 文件如下

```
<body>
<form:form method="POST"   modelAttribute="list">
  // i tried without the form tag as well
<table border="1">
 <tr>
   <th>Id: </th><td>${list.id}</td>
 </tr>
 <tr>
   <th>Name: </th><td>${list.name}</td>
       //i tried with ${user.name} as well
 </tr>
 <tr>
    <th>Age: </th><td>${list.age}</td>
 </tr>
 <tr>
    <th>Password: </th><td>${list.password}</td>
 </tr>
 <tr>
   <th>Gender</th><td>${list.gender}</td>  
 </tr>     
 <tr>
    <th>Country</th><td>${list.country}</td>  
 </tr>       

</table>
</form:form>
</body> 
```

我已经在jsp中添加了所需的spring taglib

和spring xml文件如下

UserController2-servlet.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xsi:schemaLocation="http://www.springframework.org/schema/beans  
    http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
   http://www.springframework.org/schema/aop http://www.springframework.org/schema 
    /aop/spring-aop-2.5.xsd
   http://www.springframework.org/schema/tx http://www.springframework.org/schema 
    /tx/spring-tx-2.5.xsd">
<bean   
class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/>

<bean id="urlMapping"  
  class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="mappings">
        <props>
            <prop key="index.htm">indexController</prop>
        </props>
    </property>
</bean>

<bean id="viewResolver"
      class="org.springframework.web.servlet.view.InternalResourceViewResolver"
      p:prefix="/WEB-INF/jsp/"
      p:suffix=".jsp" />

<bean id="myDataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy- 
method="close">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost:3306/indi"/>
    <property name="username" value="admin"/>
    <property name="password" value=""/>
</bean>

<bean id="mySessionFactory"   
class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="myDataSource" />
    <property name="annotatedClasses">
        <list>
            <value>Spring.project2.User</value>

        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
       </props>
    </property>
 </bean>

<bean id="myUserDAO" class="project2.UserDAOImpl">
     <property name="sessionFactory" ref="mySessionFactory"/>
</bean>

 <bean name="/user/*.htm" class="project2.UserController2" >
    <property name="userDAO" ref="myUserDAO" />
</bean>

 <bean name="indexController" lass="org.springframework.web.servlet.mvc.Parameterizab  
      leViewController" p:viewName="userForm" />

</beans> 
```

而web.xml文件如下

```
<listener>
<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<servlet>
    <servlet-name>UserController2</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>2</load-on-startup>
 </servlet>
<servlet-mapping>
     <servlet-name>UserController2</servlet-name>
     <url-pattern>*.htm</url-pattern>
</servlet-mapping> 
```

我的错误如下

```
org.apache.jasper.JasperException: java.lang.IllegalStateException: Neither  
BindingResult nor plain target object for bean name 'user' available as request 
attribute 
```

我还对此链接中指定的控制器类进行了一些修改

[不断得到： Bean 名称“索引”的 BindingResult 和普通目标对象都不能用作请求属性](https://stackoverflow.com/questions/12585790/keep-getting-neither-bindingresult-nor-plain-target-object-for-bean-name-index?rq=1)

修改后的控制器类如下

用户控制器2.java

```
@Controller
@RequestMapping(value="/user")
     //also tried with @RequestMapping("user") and @RequestMapping("user.htm")

public class UserController2{

    private UserDAO userDAO;

    public void setUserDAO(UserDAO userDAO) {
        this.userDAO = userDAO;
    }

        @RequestMapping(params = "add", method = RequestMethod.POST)
    public ModelAndView add( @ModelAttribute("add") User user,HttpServletRequest  
          request,HttpServletResponse response) throws Exception {
        userDAO.saveUser(user);
        System.out.println("hai");
        return new ModelAndView("redirect:list.htm");
    }

        @RequestMapping(params = "delete", method = RequestMethod.POST)
        @Transactional
        public ModelAndView delete(@ModelAttribute("delete") User  
             user,HttpServletRequest request,HttpServletResponse response) throws  
                  Exception {
                       userDAO.deleteUser(user);
                       return new ModelAndView("redirect:list.htm");
              }

        @RequestMapping(params = "find", method = RequestMethod.POST)
        @Transactional
    public ModelAndView find(@ModelAttribute("find") User user,HttpServletRequest  
           request,HttpServletResponse response) throws Exception {  
                     userDAO.findUser(user);
                        return new ModelAndView("redirect:list.htm");
                }

    @RequestMapping(params = "update", method = RequestMethod.POST)
    @Transactional
    public ModelAndView update(@ModelAttribute("update") User user,HttpServletRequest  
           request,HttpServletResponse response) throws Exception {  
                     userDAO.updateUser(user);
                        return new ModelAndView("redirect:list.htm");
              }

    public ModelAndView list(HttpServletRequest request,
            HttpServletResponse response) throws Exception {

        ModelMap modelMap = new ModelMap();
        modelMap.addAttribute("userList", userDAO.listUser());
        modelMap.addAttribute("user", new User());
        return new ModelAndView("userForm", modelMap);
    }

} 
```

我尝试按照上一篇文章的建议添加一个虚拟用户，但仍然相同，我尝试在 jsp 页面中使用 commandName 而不是 modelAttribute，但错误仍然存​​在。modelAttribute 和注释参数值完全相同。

老实说，我不知道我要去哪里错了。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:46:04.877

在每个 @ModelAttribute 参数之后，Spring 在下一个参数位置查找 BindingResult（顺序很重要）。所以这可能有效。

```
public ModelAndView find(@ModelAttribute("find") User user,BindingResult bindingResult, HttpServletRequest  
       request,HttpServletResponse response) throws Exception {  
                 userDAO.findUser(user);
                    return new ModelAndView("redirect:list.htm");
            } 
```

# android - Inputstream 传递意外消息

> ID：16104637
> 
> 赞同：0
> 
> 时间：2013-04-19T12:30:07.340
> 
> 标签：android, inputstream

我正在尝试编写一个 Android 应用程序来发送和接收串行消息。一切正常，没有任何错误，但我的 InputStream 只传递奇怪的消息。它们总是看起来像：“B@410d2530”或“B@410a5f58”。所以看起来有一些 hexa 正在计数，尽管我什至没有向我的 android 设备发送一些东西，但我不知道这些消息可能是什么。即使我通过 hterm 向我的设备发送串行消息，这些消息也会被忽略，并且只显示“B@xxxxxxx”消息

```
 InputStream in = new InputStream() {

    @Override
    public int read() throws IOException {
        return 0;
        // TODO Auto-generated method stub

    }

};

int BUFFER_SIZE = 32;
ByteArrayOutputStream bao = new ByteArrayOutputStream();
int byteshelp = 0;
String bla;
BufferedInputStream bis = new BufferedInputStream(in, BUFFER_SIZE);
private void readData() {
    byte[] bufferhelp = new byte[BUFFER_SIZE];
    try {

        byteshelp = bis.read(bufferhelp, 0, BUFFER_SIZE);

        bao.write(bufferhelp, 0, byteshelp);
        byte temp[] = bao.toByteArray();
        Log.v("BLA", "Thats in Temp: " + temp);

        bao.reset();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

} 
```

我使用 Android NDK，我的 InputStream 连接到 FileInputStream 以使用 SerialPort 处理数据。read 方法是线程化的，因此它可以不间断地传递数据。

所以我的主要问题是：任何人都知道这个“B@410d2530”消息可能意味着什么？

我很高兴得到我的问题的答案和反馈，因为我对 stackoverflow-community 还是新手。

问候， Seb

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:37:30.803

```
Log.v("BLA", "Thats in Temp: " + temp); 
```

当你记录一个字节数组对象时，默认会调用`Object`类`toString()`方法将其转换为字符串。

该`toString()`方法返回一个字符串，即ObjectClassName@HashCode。

在**B@410d2530**中，**B** - 字节，**@** - 字符和**410d2530** - hasCode 该特定实例。

**解决方案 ：**

如果你想转换你的`byte[]`to `String`，你可以使用[String(byte[] bytes)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#String%28byte%5B%5D,%20java.lang.String%29)构造函数。IE，

```
String s = new String(temp);
Log.v("BLA", "Thats in Temp: " + s); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:45:14.167

```
Log.v("BLA", "Thats in Temp: " + temp); 
```

`temp`是一个数组，你在类中调用`toString()`方法。`Object`

```
public String toString() {
     return getClass().getName() + "@" + Integer.toHexString(hashCode());
} 
```

可以看官方文档。 [http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#toString())

# python - 带有Q和多个类别的django查询

> ID：16104642
> 
> 赞同：1
> 
> 时间：2013-04-19T12:30:49.487
> 
> 标签：python, django, django-orm, django-q

我有以下模型结构：

```
class Pizza(models.Model):
    name = models.CharField(max_length=50)
    shop = models.CharField(max_length=50)

class Topping(models.Model):
    name = models.CharField(max_length=50)
    pizza = models.ManyToManyField(Pizza) 
```

我想找到所有带有火腿或奶酪或两者的披萨，这是标准的 django 方式吗？： from django.db.models import Q

```
Pizza.objects.filter(Q(topping__name='ham') | Q(topping__name='cheese')) 
```

如果我有一个浇头列表，我如何以编程方式进行操作，例如？：

```
['ham','cheese'] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T12:34:35.733

你可以用 dicts 和 **kwargs 来做，但没有必要：更容易使用`__in`：

```
topping_list = ['ham', 'cheese']
Pizza.objects.filter(topping__name__in=topping_list) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:49:41.483

我肯定会将多对多关系交换为从 Pizza 到 Topping。为什么要先查询所有配料对象以获取列表，然后将其与比萨饼进行比较？我相信您主要想展示一个带有配料的比萨饼，而不是显示具有特定配料的比萨饼列表。我猜会更容易（除非你的应用程序主要是关于浇头）......

# perl - OTRS：为客户部分创建新模块

> ID：16104644
> 
> 赞同：4
> 
> 时间：2013-04-19T12:30:55.393
> 
> 标签：perl, otrs

我一直在尝试在`OTRS`我遵循为开发人员提供的[文档](http://doc.otrs.org/developer/3.1/en/html/how-to-extend-otrs.html#writing-new-otrs-frontend-module)`OTRS`中添加一个菜单选项，并设法为代理创建一个新的 Hello World 菜单（模块）。我也想为客户部分做类似的事情。我尝试了自己，但没有成功，如果有人能指导我如何做到这一点，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-08T11:17:31.760

如果您想注册客户模块，只需通过.../Kernel/Config/Files/yourConfigName.xml 中的 XML 文件注册它，如下所示：

```
<ConfigItem Name="CustomerFrontend::Module###MyCustomModule" Required="0" Valid="1">
        <Description Translatable="1">Frontend module registration for the customer interface.</Description>
        <Group>Ticket</Group>
        <SubGroup>Frontend::Customer::ModuleRegistration</SubGroup>
        <Setting>
            <FrontendModuleReg>
                <Description>My Module Desc</Description>
                <NavBarName>Ticket</NavBarName>
                <Title>My Module</Title>
                <NavBar>
                    <Description Translatable="1">My Module desc</Description>
                    <Name Translatable="1">My Module</Name>
                    <Block></Block>
                    <Type>Submenu</Type>
                    <NavBar>Ticket</NavBar>
                    <Link>Action=MyCustomModule</Link>
                    <LinkOption></LinkOption>
                    <Prio>600</Prio>
                </NavBar>
            </FrontendModuleReg>
        </Setting>
    </ConfigItem> 
```

不要忘记相应地命名模块“MyCustomModule.pm”并在模块本身中更改自动加载模块的名称

# node.js - 带有 Unix 可执行文件的 Nodejs 子进程

> ID：16104647
> 
> 赞同：1
> 
> 时间：2013-04-19T12:31:02.187
> 
> 标签：node.js, executable

我遇到了“child_process”模块和可执行程序的问题。我想将标准输出从可执行文件传输到我的节点进程。

我可以毫无问题地使用“cat”和“ls”等简单命令，但不能使用我的可执行文件。我正在使用下面的代码。

我的可执行文件在独立运行时将数据记录到终端，所以我不确定为什么这不起作用。节点脚本和可执行文件位于同一目录中并在 MacOS X 上运行。

编辑：可执行文件一旦启动就会永久运行。

```
var cp = require('child_process');

var cat = cp.spawn('cat', ['udpServer.js']);
cat.stdout.on('data', function(m) {
  // This will log just fine!
  console.log('cat');
  console.log(m);
});

var tracker = cp.spawn('./MyExecutable', []);
tracker.stdout.on('data', function(data){
  // This is never logged
  console.log('MyExecutable');
  console.log(data);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:27:09.453

确保您的可执行命令具有正确的路径。为了确保我喜欢在生成不在节点进程`$PATH`变量中的命令时指定绝对路径

```
var inspect = require('eyespect').inspector();
var path = require('path')
var spawn = require('child_process').spawn
var cmd = path.join(__dirname, 'MyExecutable')
inspect(cmd, 'command to spawn')
var args = []
var tracker = spawn(cmd, args)
tracker.stdout.setEncoding('utf8')
tracker.stderr.setEncoding('utf8')
tracker.stdout.on('data', function (data) {
  inspect('stdout data')
  console.log(data)
})
tracker.stderr.on('data', function (data) {
  inspect('stderr data')
  console.log(data)
}) 
```

# jquery - $.grep 检查对象是否存在于数组中

> ID：16104649
> 
> 赞同：0
> 
> 时间：2013-04-19T12:31:05.030
> 
> 标签：jquery, arrays, object

我正在尝试构建一个对象数组，然后根据对象是否不存在更新对象或创建一个新对象。这是我第一次尝试使用 $.grep 函数，我不确定我做错了什么。有什么建议吗？

以下是对象：

```
function Phase(phase, html, count) {
        this.phase = phase;
        this.html = html;
        this.count = count;
        this.porfolios = [];
    }

    function Portfolio(portfolio, html, count) {
        this.portfolio = portfolio;
        this.html = html;
        this.count = count;
    } 
```

这是有问题的代码....

```
var phases = [];
//Check Array of Phases 
result = $.grep(phases, function (e) { return e.phase == item.Phase; });

if (result.length == 0) 
{
     var newphase = Phase(item.Phase, itemhtml, 1)
     phases.push(newphase);
} 
else if (result.length == 1) 
{
 // update existing phase
 result[0].count ++;
 result[0].html += itemhtml;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:36:36.303

```
var newphase = Phase(item.Phase, itemhtml, 1) 
```

应该

```
var newphase = new Phase(item.Phase, itemhtml, 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:37:04.300

您需要使用`new`关键字来创建对象：

```
var newphase = new Phase(item.Phase, itemhtml, 1); 
```

# eclipse - 在 Eclipse 上使用 Subclipse 可视化提交活动统计信息？

> ID：16104651
> 
> 赞同：2
> 
> 时间：2013-04-19T12:31:10.970
> 
> 标签：eclipse, svn, subclipse

是否有任何 Eclipse 插件可以根据随时间添加/修改的行显示[Subclipse的提交活动？](http://subclipse.tigris.org/)

举个例子，有一个像 GitHub 或 BitBucket 提供的图形可视化效果会非常好。

![在此处输入图像描述](https://i.stack.imgur.com/Ru6dp.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:55:10.863

You really could not do this well from an Eclipse plugin as the information is not readily available. The only way to get information like this is to get the history of the entire repository, and then produce a diff for each revision that you run through diffstats. So realistically, this needs to be done by a backend service on the server that is doing this from a post-commit hook as each change is made.

Here is one tool that can do some of this:

[https://code.google.com/p/svnplot/](https://code.google.com/p/svnplot/)

It can do that initial expensive build of the data. You would probably need to build in some kind of process to keep it maintained as new activity comes in as you would not want to constantly repeat the process from scratch every time you want to see the info.

# azure - 从 Azure 获取一个 IAsset 的详细信息

> ID：16104656
> 
> 赞同：0
> 
> 时间：2013-04-19T12:31:26.223
> 
> 标签：azure, azure-media-services

我开始掌握 Azure，特别是媒体服务。

我想收集我在媒体服务中上传和编码的一个媒体项目的详细信息，而无需从 Azure 下载整个 AssetBaseCollection。

当我有 1000 个资产时，我担心这不是最好的方法，但目前这是我可以访问任何资产详细信息的唯一方法，如下所示。

```
var assetList = _context.Assets.ToList(); 
```

如果我尝试直接查询 _context.Assets（单个、第一个或默认），我会得到一个不受支持的异常。

如何从 _context.Assets 仅收集一项资产 (IAsset) 而无需拉取整个集合并在列表上执行查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:44:19.493

您可以查询资产，但您必须先使用`.Where(predicate bool)`，然后使用`.FirstOrDefault`。

以下代码只会让您获得一项资产，而不会将所有资产都放入列表中：

```
 public IAsset GetAssetById(string assetId)
        {
            var asset = _context.Assets.Where(x => x.Id.Equals(assetId)).FirstOrDefault();

            if (null == asset)
            {
                return null;
            }
            return asset;
        } 
```

您可以在[WaMediaWeb 项目](https://github.com/astaykov/WaMediaWeb)中查看我的其余代码，我在 Web 应用程序中封装了几乎所有您可以使用媒体服务执行的操作。

# asp.net - 如何将 linq 查询的结果转换并分配给数据表？

> ID：16104661
> 
> 赞同：1
> 
> 时间：2013-04-19T12:31:45.740
> 
> 标签：asp.net, linq, datatable

这是我的代码

```
 var s = from p in db.tblTotalFees
                where p.Class == ClassDropDownList.SelectedItem.Value && p.StudentID == Convert.ToInt32(StudentNameDropDownList.SelectedValue)
                select p;
        DataTable dt = new DataTable(); 
```

如何将 p 转换为数据表并将其存储在 dt 中？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:37:16.603

您可以使用MSDN [How to: Implement CopyToDataTable Where the Generic Type T Is Not a DataRow](http://msdn.microsoft.com/en-us/library/bb669096.aspx)`CopyToDataTable()`中描述的扩展方法。用法：

```
var selectedClass = ClassDropDownList.SelectedItem.Value;
int id = Convert.ToInt32(StudentNameDropDownList.SelectedValue);

var query = from p in db.tblTotalFees
            where p.Class ==  && selectedClass
                  p.StudentID == id
            select p;

DataTable dt = query.CopyToDataTable(); // here 
```

[或者您可以使用纯 ADO.NET - 创建 SqlCommand 并使用SqlDataAdapter](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldataadapter%28v=vs.71%29.aspx)填充表。

# java - Java GUI - 删除所有组件并重绘

> ID：16104663
> 
> 赞同：0
> 
> 时间：2013-04-19T12:31:51.720
> 
> 标签：java, swing, user-interface, jpanel, grid-layout

我有一个网格布局 JPanel，上面绘制了许多图标。我需要在玩家移动后更改图标，因为地图会发生变化。这是我想出的方法：

```
public void initGridIcons(JPanel pnl, String map) {
    pnl.removeAll();
    char[] tiles = map.toCharArray();
    for (char ch : tiles) {
        JLabel label = new JLabel("");
        String icon = "";
        switch (ch) { // lots of cases irrelevant to problem
        }
        label.setIcon(new ImageIcon(ClientGUI.class
                .getResource("/resources/" + icon)));
        pnl.add(label);
    }
} 
```

这最初是有效的，因为它确实正确地绘制了玩家和地图。然而，它不会在每回合后改变。

我已经尝试将此方法与迭代器计数器（偶数更改）一起使用，以确保它不是任何其他代码，并且它不起作用，所以我确定是这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:38:26.437

这可能在应用程序的容器`JFrame`可见之前开始工作，但是在运行时调用`revalidate`和`repaint`是必要的`JPanel`。

```
for (char ch : tiles) {
   ...
   pnl.add(label);
}

pnl.revalidate();
pnl.repaint(); 
```

如果`Icons`要设置的数量是固定的，那么`JLabel#setIcon`可以简单的调用来改变图标。

# jquery - jqGrid：searchoptions 中的 dataUrl 不适用于 jqGrid4.4.5

> ID：16104664
> 
> 赞同：1
> 
> 时间：2013-04-19T12:31:51.767
> 
> 标签：jquery, jqgrid

我有点坚持 jqgrid 中的 searchoptions 属性。当我点击网格中的搜索图标并使用“下拉菜单”遍历该字段时，我会在 Firefox 和 IE8 中看到以下错误

FF : **TypeError: g is undefined** in *jquery.jqGrid.min.js (line 239)*

IE：**消息：“postData”为空或不是对象行：238**

下面是代码片段，

```
 {name:'City', index:'City', width:80, align:'right', 
   editable: true,search:true,edittype: 'select',stype:'select',
   searchoptions: {
     ajaxSelectOptions: {type: "GET",datatype:"text"},
     dataUrl:  '/TESTAPP/Test',          
     dataEvents: [
             {  type: 'change',
                fn: function(e) {
                  alert(this.value)
              }
             } 
          ]} 
```

我什至没有看到请求到达服务器，这很奇怪。

**PS**：同样适用于**编辑选项**

版本：

jqGrid：4.4.5

jQuery：1.9.1

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T20:33:37.723

**ajaxSelectOptions**应该包含在 jqGrid 中，用于单个搜索和高级搜索，以便为 colModel 中的任何列启用“选择”选项。

```
 var grid = $("#list");
 grid.jqGrid({
     ajaxSelectOptions: {type: "GET"},
     colModel: [ 
            {name:'City', index:'City', width:80, align:'right', 
             editable:  true,
             search:true, 
             edittype: 'select',
             stype:'select',
             searchoptions: {
                 dataUrl: '/TESTAPP/Test',
                 buildSelect: function(resp) {
                     var sel= '<select>';
                     var obj = $.parseJSON(resp);
                     $.each(obj, function() {
                         sel += '<option value="'+this['value']+ '">'+this['label'] + "</option>"; // label and value are returned from Java layer
                     });
                     sel += '</select>';
                     return sel;
                 },          
                 dataEvents: [{  
                     type: 'change',
                     fn: function(e) {
                         alert(this.value)
                     }
                 }]
             }
      }]
 }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-18T16:12:01.977

我在 Chrome 中遇到了同样的问题。我收到以下错误

```
Uncaught TypeError: Cannot read property 'postData' of undefined jquery.jqGrid.min.js:239 
```

添加

```
ajaxSelectOptions: {type: "GET"} 
```

解决它。谢谢

# java - Java - 类的变量标识符

> ID：16104668
> 
> 赞同：-3
> 
> 时间：2013-04-19T12:31:57.910
> 
> 标签：java

所以我有以下代码：

```
public static String currentLevel = "Level_1_1";
public boolean isCollingWithBlock(Point pt1, Point pt2){
    for(int x=(int)(this.x/Tile.tileSize);x<(int)(this.x/Tile.tileSize + 3);x++){
        for(int y=(int) (this.y/Tile.tileSize);y<(int)(this.y/Tile.tileSize + 3);y++){
            if(x >= 0 && y >= 0 && x < Component.Level_1_1.block.length && y < Component.Level_1_1.block[0].length){

                // blocks
                if(Component.Level_1_1.block[x][y].id != Tile.air && Component.Level_1_1.block[x][y].id != Tile.death && Component.Level_1_1.block[x][y].id != Tile.win){
                    if(Component.Level_1_1.block[x][y].contains(pt1) || Component.Level_1_1.block[x][y].contains(pt2)){
                        return true;
                    }
                }

                if(Component.Level_1_1.block[x][y].id == Tile.death){
                    if(Component.Level_1_1.block[x][y].contains(pt1) || Component.Level_1_1.block[x][y].contains(pt2)){
                        alive = false;
                        deathText = true;
                        return true;
                    }
                }

                if(Component.Level_1_1.block[x][y].id == Tile.win){
                    if(Component.Level_1_1.block[x][y].contains(pt1) || Component.Level_1_1.block[x][y].contains(pt2)){
                        win = true;
                        return true;
                    }
                }
            }
        }
    }
    return false;   
} 
```

这是在我的 Character 类上查看是否与级别类中的块发生碰撞（在本例中为级别 1_1）

所以因为我不只想要 1 级，我想要 1 级以上，所以我希望：

```
Component.Level_1_1 
```

成为一个变量：

我目前的水平解释如下：

```
public static String currentLevel = "Level_1_1"; 
```

在字符类。我尝试执行以下操作：

```
Component.(currentLevel) 
```

但它没有用。我能做些什么来完成以下工作？

编辑：好的，有些人不明白我想做什么。我想要的是在 isCollingWithBlock 中，使 Component.Level_1_1.block 成为一个变量。因为我将有以下级别：Component.Level_1_2.block、Component.Level_1_3.block 等。这应该由我决定：public static String currentLevel = "Level_1_1";

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:52:39.417

正如 Jon Skeet 在评论中所说，您不应该按级别进行分类。相反，使用代表一个级别的单个类`Level`，并逐级创建该类的一个实例。

# javascript - 解析json数据的异常

> ID：16104674
> 
> 赞同：0
> 
> 时间：2013-04-19T12:32:17.307
> 
> 标签：javascript, json, cookies

![在此处输入图像描述](https://i.stack.imgur.com/Ffxxg.png)我将 json 数据存储到 cookie 中并从 cookie 中获取。

我正在将数据添加到 json 对象中

```
x[grapObj.toString()]=graphic; 
```

我将 timebeing 的第一个值作为 x[0] ，它给出了前一个值。*图形*将包含几个对象的集合。存入 cookie

```
$.cookie('Grap0',JSON.stringify(x[0]),1); 
```

从 cookie 中获取数据

```
var json123=$.cookie('Grap0'); 
```

完成后，对象被视为 [object object] 现在我尝试解析但它抛出异常

解析json

```
var obj12 = JSON.parse(json123);
var obj12 = $.parseJSON(json123); 
```

我尝试了两种方法但没有任何效果

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:35:55.197

Cookie 将内容存储在字符串中。如果返回的插件`json123`是一个`[object Object]`，那么它可能已经被解析了！您可能[忘记了将其设置为这样做](https://github.com/carhartl/jquery-cookie#json)。

# ios - NSCondition：等待指定的时间

> ID：16104678
> 
> 赞同：0
> 
> 时间：2013-04-19T12:32:25.220
> 
> 标签：ios, objective-c, synchronization

我正在使用最新的 SDK 开发 iOS 5.0+ 应用程序。

此应用是从 Android 应用迁移而来。

在 Android 应用程序上，我有以下代码：

```
private Object uploadWorkerLock = new Object();
private static final int UPLOAD_WORKER_SLEEP_TIME = 30000;

[ ... ]

synchronized (ServerManager.this.uploadWorkerLock) {
    try {
        ServerManager.this.uploadWorkerLock.wait(UPLOAD_WORKER_SLEEP_TIME);
    } catch (InterruptedException e) {
        return;
    }
} 
```

我有问题`void java.lang.Object.wait(long millis)`。我可以通过这种方式迁移该代码：

NSCondition* uploadWorkerLock；

```
[ ... ]
[uploadWorkerLock lock];
[uploadWorkerLock wait];
[uploadWorkerLock unlock]; 
```

[在阅读有关wait(long)](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#wait%28long%29)的Java 文档时，我已经阅读了以下内容：

*导致当前线程等待，直到另一个线程为此对象调用 notify() 方法或 notifyAll() 方法，或者经过了指定的时间量。*

我知道我可以调用`[uploadWorkerLock invoke]`，但**我如何模拟*指定的时间已经过去。*?**

顺便说一句，这段代码在一个`NSThread selector`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:55:48.583

如果您想简单地做到这一点，使用类似于 Java 的语法只是为了不感到困惑，那就是如何做到这一点：

```
@synchronized(uploadWorkerLock)
{
    usleep(UPLOAD_WORKER_SLEEP_TIME*1000);
} 
```

但这不是唯一的方法，*@synchronized*指令不如自旋锁或*NSLock*快。另一种方式是[GCD](http://cocoasamurai.blogspot.it/2009/09/guide-to-blocks-grand-central-dispatch.html)，它允许您同时（虚拟地）执行一些代码块。它比使用单独的线程更快，因为它会尝试优化事物，并且它可以在同一个线程中运行两个单独的代码块，只是模拟多线程，因此避免了昂贵的上下文交换。

同样，使用 GCD 也不难做到，但它需要一些关于块的额外知识以及对于刚开始使用 Objective-C 的人来说可能有点混乱的事情。此外，GCD 不能替代多线程，当您有一个复杂的应用程序并且每个线程不只是执行单个代码块时，普通的多线程会更合适。

# c++ - VS2010 中缺少 ws2_32.lib。怎么办？

> ID：16104679
> 
> 赞同：8
> 
> 时间：2013-04-19T12:32:26.770
> 
> 标签：c++, visual-studio-2010, sockets, network-programming

我正在尝试着手进行 Windows 套接字编程。我知道你必须`#include winsock2.h` 然后链接到`ws2_32.lib`. 问题是我`ws2_32.lib`的 Visual Studio 2010 终极版中没有。

我应该怎么做才能让它运行起来？

其次，我在 VS 2010 中集成了很多新的 API。我一直忘记要包含什么、要链接什么以及包含哪些文件和链接了哪些文件。如果您能指出一个教程，该教程提供了在 VS 2010 中处理包含和 lib 文件的一般过程，同时集成了一个新的 API。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T12:39:55.823

很可能你确实有这个库，但它必须通过 Project->Poperties->Linker->Input->additional Dependencies 添加。在那里输入：

```
Ws2_32.lib 
```

或以编程方式：

```
#include <winsock2.h>
#include <ws2tcpip.h>
#include <stdio.h>

#pragma comment(lib, "Ws2_32.lib")

int main() {
  return 0;
} 
```

# css - 在 100% 宽度的背景中居中并为内容提供固定宽度的最佳方法是什么？

> ID：16104680
> 
> 赞同：2
> 
> 时间：2013-04-19T12:32:29.727
> 
> 标签：css, centering

在 100% 宽度的背景中居中并为内容提供固定宽度的最佳方法是什么？我不太确定我的观点是否清楚，所以这里是代码[http://jsfiddle.net/xJ8Qy/](http://jsfiddle.net/xJ8Qy/)

```
.something-wrapper {
    width:100%;
    background:#fff000;
}
.something {
    background:#fffddd;
    color:fff;
    width:400px;
    margin:0 auto;
}

<div class="something-wrapper">
    <div class="something">
        Lorem ipsum dolor sit amet, consectetur adip Seat eros ornare pharetra orci at eros orn are nec nec conse.
    </div>
</div> 
```

这工作得很好，但是它是正确的还是有更好的方法来实现这个结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:41:22.027

使元素居中的一种很好且非常常见的方法是使用固定宽度，`margin: auto`就像您一样

```
.something {
    width: 400px;
    margin: auto;
} 
```

* * *

另一种方法是`text-align: center`在父元素上使用，但子元素需要是`inline-block`或类似的。[演示](http://jsfiddle.net/xJ8Qy/1/)

```
.something-wrapper {
    text-align: center;
}
.something {
    display: inline-block;
    text-align: left;
} 
```

# java - 将多个类型的数组传递给 Java 中的 Oracle 过程

> ID：16104681
> 
> 赞同：0
> 
> 时间：2013-04-19T12:32:30.853
> 
> 标签：java, database, oracle, jdbc

有没有办法将java中各种类型的数组传递给oracle程序？

例如：我必须调用 oracle 过程 SYS.PACK_DID3530 传递以下参数：（在下面的链接中）

以下链接包含结构的图像。由于我是新用户，我无法在此帖子中发布图片。 [https://fbcdn-sphotos-aa.akamaihd.net/hphotos-ak-prn1/563630_585790028112205_1641543883_n.jpg](https://fbcdn-sphotos-a-a.akamaihd.net/hphotos-ak-prn1/563630_585790028112205_1641543883_n.jpg)

我查看了一些使用特定类型数组的示例。

# javascript - JsUnit 抛出一个 Exception 'bout undefined function

> ID：16104687
> 
> 赞同：0
> 
> 时间：2013-04-19T12:32:59.920
> 
> 标签：javascript, maven, jsunit

我遇到了 jsunit-maven2-plugin 的问题。

```
<configuration>
    <sourceDirectory>.</sourceDirectory>
    <sources>
        <source>src/test/resources/javascript/test.js</source>
    </sources>
    <testSuites>
        <testSuite>
            <name>Simple</name>
        </testSuite>
    </testSuites>
</configuration> 
```

这是我的 test.js：

```
function SimpleTest_test() { }
function SimpleTest() { }
SimpleTest.prototype = new TestSuite();
SimpleTest.prototype.test = SimpleTest_test;
TestSuite.call(SimpleTest); 
```

我只有一个我无法理解的例外：

```
 at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:225)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: org.apache.maven.plugin.PluginExecutionException: Execution test of goal de.berlios.jsunit:jsunit-maven2-plugin:1.3:jsunit-test failed: undefined is not a function.
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:110)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
        ... 19 more
Caused by: TypeError: undefined is not a function. (JsUnit; line 1810)
        at org.mozilla.javascript.NativeGlobal.constructError(NativeGlobal.java:597)
        at org.mozilla.javascript.NativeGlobal.constructError(NativeGlobal.java:557)
        at org.mozilla.javascript.NativeGlobal.typeError1(NativeGlobal.java:567)
        at org.mozilla.javascript.ScriptRuntime.call(ScriptRuntime.java:1182)
        at org.mozilla.javascript.gen.c112.call(JsUnit:1810)
        at org.mozilla.javascript.ScriptRuntime.call(ScriptRuntime.java:1191)
        at org.mozilla.javascript.BaseFunction.applyOrCall(BaseFunction.java:431)
        at org.mozilla.javascript.BaseFunction.execMethod(BaseFunction.java:179)
        at org.mozilla.javascript.IdFunction.call(IdFunction.java:78)
        at org.mozilla.javascript.ScriptRuntime.call(ScriptRuntime.java:1191)
        at org.mozilla.javascript.gen.c245.call(test.js:5)
        at org.mozilla.javascript.gen.c245.exec(test.js)
        at org.mozilla.javascript.Context.evaluateReader(Context.java:820)
        at de.berlios.jsunit.JsUnitRhinoRunner.load(JsUnitRhinoRunner.java:109)
        at de.berlios.jsunit.maven2.JsUnitMojo.execute(JsUnitMojo.java:192)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:101)
        ... 20 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T13:56:07.200

好的，这个效果很好：

```
function Case() {
};
Case.prototype = TestCase.prototype;

function MathTest(name) {
    TestCase.call(this, name);
}
MathTest.prototype = new Case();

MathTest.prototype.testAddition = function() {
    this.assertEquals(1 + 1, 2);
} 
```

注意：如果测试失败，maven print `Tests run: 0, Failures: 0, Errors: 0, Skipped: 0`,

但构建状态以`BUILD FAILURE`.

# java - 配置一个maven搭建的java spring项目

> ID：16104692
> 
> 赞同：0
> 
> 时间：2013-04-19T12:33:21.667
> 
> 标签：java, spring, maven, configuration

我有一个 Java Spring Web 项目。它分为几个maven模块和项目。目前，每个工件都有一个 application-context.xml 和一个 default.properties（因此每个项目都可以独立运行。）我基本上使用基于注释的 bean 创建和属性的 @Value 注释。

聚合 webapp 项目（当然）具有每个构建目标的 pom 和属性文件。

我现在的问题是：感觉有点混乱。pom 有多个配置文件，每个构建服务器一个，并包含 maven 在构建时需要的属性（目标服务器 url）或必须在配置文件中替换的属性（log4j smtp 主机）。然后，我有每个构建系统的属性文件，我在其中使用 ${maven.variables} 并覆盖包含的工件（如数据库、电子邮件配置等）中的默认变量。

这些属性随着时间的推移而增长，因为实时服务器和测试服务器之间的许多方面都不同。项目中的新开发人员很难设置他们的项目，尽管基本上他们应该只使用某种 dev-default + 你的数据库凭据。

您如何处理构建/运行时的属性？

编辑：让我烦恼的另一件事：目前无法验证属性（如果存在，查找拼写错误是一项耗时的任务......）。也许有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T17:55:27.397

Vinh Ta 的方法可行，但出现的一个问题是您需要为每个排列（开发、测试、生产等）构建一个新的工件。您可以将所有属性文件放在 src/main/resources 目录中（资源插件会自动选择它们）。然后，您可以使用环境变量控制在 Java 中使用的属性文件的版本。

```
/Project  
-/src/main/
--/resources/
---filter.dev.properties
---/filter.test.properties
pom.xml 
```

然后，您可以通过在每台服务器上设置环境变量来构建一个工件并部署到多台服务器。这也可以通过在命令行上设置的 java 属性来完成。

```
String resource = "filter"+System.getenv("ENV")+".properties";
this.getClass().getResourceAsStream(resource); 
```

上述方法（和 Vinh Ta 的）的一个问题是，如果您需要更改这些文件，则必须重新构建或编辑工件。如果这是一个问题，也许最好将这些属性文件留在工件之外，并将它们提供给外部的应用程序服务器。请参阅[此答案](https://stackoverflow.com/questions/1634458/can-i-use-a-single-war-file-in-multiple-environments-should-i)以获取解决方案。

至于验证属性。是的，这是一个问题。我见过的最接近的是[enforcer plugin](http://maven.apache.org/enforcer/enforcer-rules/requireProperty.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T01:06:20.277

不确定如何为构建环境设置 maven 项目，但我对大多数项目使用 maven 资源插件。

项目结构（标准maven结构）

```
/Project
-/src
--/filters
---/filter.dev.properties
---/filter.test.properties
--/java
--/resources
---/config.properties
pom.xml 
```

应用程序代码使用 config.properties（或其他应用程序配置文件）来配置自身。我有每个环境的过滤器文件，这些文件只保存特定于环境的值，这些将替换 config.properties 中的占位符

我的 POM 文件

```
<build>
    <plugins>
        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
    <filters>
        <filter>src/main/filters/filter.${env}.properties</filter>
    </filters>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
            <includes>
                <include>**/*.properties</include>
            </includes>
        </resource>
    </resources>
</build>
<profiles>
    <profile>
        <id>dev</id>
        <activation>
            <activeByDefault>true</activeByDefault>
        </activation>
        <properties>
            <env>dev</env>
        </properties>
    </profile>
    <profile>
        <id>test</id>
        <properties>
            <env>test</env>
        </properties>
    </profile>
</profiles> 
```

默认情况下，当我在本地构建时，我不向 maven 提供配置文件，它将使用 filter.dev.properties 来构建测试环境，在我的 Jenkins 工作中，我使用测试配置文件。

# sql - 甲骨文 SQL。如何一一执行查询

> ID：16104693
> 
> 赞同：1
> 
> 时间：2013-04-19T12:33:24.107
> 
> 标签：sql, oracle, oracle-sqldeveloper

您能帮我吗，**如何在 Oracle SQL Developer 中一一执行查询？**

当有一个查询系统正常工作时。

但是当我写 2 或更多并按“ctrl”+“enter”时，系统会标记所有查询并尝试执行所有查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:43:20.377

用分号分隔每个查询，然后 SQL Developer 一个接一个地执行它们。

# javascript - JavaScript OOP：我是否遗漏了一些关于变量作用域和匿名函数的内容？

> ID：16104696
> 
> 赞同：0
> 
> 时间：2013-04-19T12:33:32.213
> 
> 标签：javascript, oop, events, event-handling, observer-pattern

当我尝试对我的 JavaScript 游戏进行一些事件处理时，我遇到了一些奇怪的行为。我不是 JavaScript 专家，我觉得我错过了一些重要的东西，但我不知道出了什么问题。

我做了这个**EventManager** “类”：

```
function EventManager(events) {

    var _events;

    this.addEventCallback = function(eventName, callback) {
        _events[eventName].push(callback);
    }

    this.fireEvent = function(eventName) {
        for (var i = 0; i < _events[eventName].length; i++) {
            _events[eventName][i]();
        }
    }

    // constructor

    __construct = function(that) {
        _events = [];
        for (key in events) {
            _events[events[key]] = new Array();
        }
    }(this)

} 
```

在我**的 GameObject**类中，我像这样使用 EventManager：

```
function GameObject() {

    // define event ids
    var _events = {
        MOVE_START: 0,
        MOVE_STOP: 1
    }

    var _eventManager;

    // how i fire the event:

    this.moveLeft = function() {
        if (!_isMoving()) {
                _eventManager.fireEvent(_events.MOVE_START);
                _velocity = new Vector(-1, 0);
        }
    }

    // event registration "interface"

    this.onMoveStart = function(fn) {
        _eventManager.addEventCallback(_events.MOVE_START, fn);
    }

    this.onMoveStop = function(fn) {
        _eventManager.addEventCallback(_events.MOVE_STOP, fn);
    }

    // constructor

    __construct = function(that) {
        _eventManager = new EventManager(_events);
    }(this);

} 
```

然后我测试一下：

```
 for (var i = 0; i < _gameObjects.length; i++) {
        console.log("event handler to object number " + i);
        _gameObjects[i].onMoveStart(function() {
            console.log("object number " + i + " started moving");
        });
    } 
```

当我移动第一个对象时，我希望输出是“对象编号 0 开始移动”，而当我移动第二个对象时输出是“对象编号 1 开始移动”，依此类推。

输出总是：**"object number 3 started moving"**。无论我移动哪个对象，它总是说对象编号 3。对我来说最奇怪的部分是，我的`_gameObjects`-Array 中只有 3 个对象，所以我至少希望它会说“第 2 个对象开始移动”。

我试过这样做：

```
 for (var i = 0; i < _gameObjects.length; i++) {
        var num = i;
        console.log("event handler to object number " + num);
        _gameObjects[i].onMoveStart(function() {
            console.log("object number " + num + " started moving");
        });
    } 
```

然后，她的输出总是：**“object number 2 started moving”**。

我确信这些对象并不完全相同，因为我可以移动我想要的对象。

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:44:14.300

您的问题的答案是“是”，即您确实错过了一些关于 JS 匿名函数中的变量范围的内容。我推荐阅读 Javascript Closures for Dummies，这里全文引用了一篇文章：[JavaScript 闭包如何工作？](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work).

要使您的测试代码正常工作，您可以这样做：

```
function notifyStart(i) {
    return function() {
        console.log("object number " + i + " started moving");
    }
}

for (var i = 0; i < _gameObjects.length; i++) {
    _gameObjects[i].onMoveStart( notifyStart(i) );
} 
```

# javascript - 调整 iframe 高度

> ID：16104697
> 
> 赞同：0
> 
> 时间：2013-04-19T12:33:37.977
> 
> 标签：javascript, jquery, html, iframe

是否有任何方法可用于动态调整 iframe（加载外部站点）的高度？

或者

有什么方法可以检查 iframe 是否存在滚动条？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:42:56.850

尝试这个：

```
// Get the iFrame jQuery Object
var $MyFrame = $("#iframeid");

// You need to wait for the iFrame content to load first
// So, that the click events work properly
$MyFrame.load(function () {
    var frameBody = $MyFrame.contents().find('body');

    // Set the iFrame height
    $MyFrame.css({
        height: frameBody.outerHeight()
    });
}); 
```

# c++ - 如何在 msvc 2010 上运行 C 项目

> ID：16104703
> 
> 赞同：1
> 
> 时间：2013-04-19T12:33:49.450
> 
> 标签：c++, c, visual-c++, project, visual-studio-debugging

我熟悉在 MSVC 上运行 CPP 项目并且在那里调试很舒服。相同的功能是否适用于 C 项目？

谁能告诉我如何开始在 MSVC 上运行 C 项目

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:36:28.007

只需以通常的方式创建一个项目并添加带有`*.c`扩展名的文件。默认情况下，MSVC 查看扩展名并运行`cpp`-compiler 或`c`one

# ios - 如何使用 SLRequest 获取 Twitter 时间线

> ID：16104704
> 
> 赞同：4
> 
> 时间：2013-04-19T12:33:49.830
> 
> 标签：ios, twitter

我正在尝试将 Twitter 时间线添加到我的 iOS 应用程序中。Twitter在这里给出了官方的示例代码： [https](https://dev.twitter.com/docs/ios/making-api-requests-slrequest)
://dev.twitter.com/docs/ios/making-api-requests-slrequest 我的问题是：在第70行

```
if (timelineData) {
    NSLog(@"Timeline Response: %@\n", timelineData);
} 
```

时间线数据成功打印到控制台。我试图添加

```
self.dict = timelineDate; 
```

和

```
return self.dict; 
```

在函数的末尾，但实际上它返回一个空字典。我注意到该过程是在另一个线程中完成的，所以我尝试了

```
dispatch_async(dispatch_get_main_queue(), ^{
    self.dict = timelineDate;
}; 
```

但它仍然无法正常工作。这可能很容易解决，但我真的无法从 Apple 或 Twitter 中找到任何资源。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:47:15.410

我使用此功能在我的应用程序中加载推文（与 twitter api v1.1 兼容，但需要在设备中同步 twitter 帐户。）我正在使用 TWRequest 执行此操作，您也可以使用 SLRequest 执行相同操作。

```
//include twitter.framework 
#import <Twitter/Twitter.h>

+ (void)getTweetsFortwitterID:(NSString *)twitterID

{
    if(twitterID.length >0)
    {
    NSString * finalURL = [NSString stringWithFormat:@"https://api.twitter.com/1.1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=%@&count=10", twitterID];

    TWRequest *postRequest = [[TWRequest alloc] initWithURL:[NSURL URLWithString:finalURL] parameters:nil requestMethod:TWRequestMethodGET];

    ACAccountStore *accountStore = [[ACAccountStore alloc] init] ;

    ACAccountType *accountType =  [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

        // Request access from the user to use their Twitter accounts.
        [accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error)
         {
             if(granted)
             {
                 NSArray *twitterAccounts = [accountStore accountsWithAccountType:accountType];

                 if([twitterAccounts count] >0
                    )
                 {
                 ACAccount *twitterAccount = [twitterAccounts objectAtIndex:0];
                 [postRequest setAccount:twitterAccount];

                 NSLog(@"request.account:%@",postRequest.account);

                 // Perform the request created above and create a handler block to handle the response.
                 NSMutableArray *tweetsArray=[[NSMutableArray alloc]init];

                 [postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {

                     // Parse the responseData, which we asked to be in JSON format for this request, into an NSDictionary using NSJSONSerialization.
                     NSArray *publicTimeline = nil;
                     NSError *jsonParsingError = nil;
                     if (responseData)
                     {
                         publicTimeline = [NSJSONSerialization JSONObjectWithData:responseData options:0 error:&jsonParsingError];
                         NSLog(@"publicTimeline : %@", publicTimeline);
                     }

                     if ([publicTimeline isKindOfClass:[NSArray class]])
                     {

                         for (int i =0; i<[publicTimeline count]; i++)
                         {
                             NSMutableDictionary *twitterDict=[[NSMutableDictionary alloc]init];

                             if ([[publicTimeline objectAtIndex:i] objectForKey:@"text"])
                             {
                                 NSLog(@"ID: %@", [[publicTimeline objectAtIndex:i] objectForKey:@"text"]);
                                 [twitterDict setObject:[[publicTimeline objectAtIndex:i] objectForKey:@"text"] forKey:@"text"];
                             }
                             if ([[publicTimeline objectAtIndex:i] objectForKey:@"created_at"])
                             {
                                 NSLog(@"ID: %@", [[publicTimeline objectAtIndex:i] objectForKey:@"created_at"]);
                                 [twitterDict setObject:[[publicTimeline objectAtIndex:i] objectForKey:@"created_at"]
                                                 forKey:@"created_at"];
                             }

                             if ([[publicTimeline objectAtIndex:i] objectForKey:@"user"])
                             {
                                 NSLog(@"ID: %@", [[publicTimeline objectAtIndex:i] objectForKey:@"created_at"]);
                                 [twitterDict setObject:[[[publicTimeline objectAtIndex:i] objectForKey:@"user"]objectForKey:@"profile_image_url"]
                                                 forKey:@"profile_image_url"];
                             }

                             [tweetsArray addObject:twitterDict];
                             NSLog(@"tweets:%@", tweetsArray);

                         }
                     }

                     if([tweetsArray count]>0)
                         [[NSNotificationCenter defaultCenter] postNotificationName:@"tweetsLoaded" object:tweetsArray];

                 }];
                 }

             }

         }];
    }

} 
```

希望它是有用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T20:47:40.087

Brainray 提供了一种解决方案。一个更简单的方法是，如果您在调用`[self.tableView reloadData]`后`dispatch_async`调用 TableViewController 内的推文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T15:22:17.637

问题是对 api 的调用是异步的。这意味着当您重新运行数组时，它还没有被填满。satheeshwaran 的答案是解决此问题的一种方法：下载完成后发送通知。另一种方法是创建一个在下载后调用的委托方法。这是一种经常出现的模式。

# c# - Soap 调用在 C# 中给出 500（内部服务器错误）

> ID：16104707
> 
> 赞同：6
> 
> 时间：2013-04-19T12:33:57.213
> 
> 标签：c#, soap

我有一个附属帐户，我需要`soap`拨打电话以获取数据。我从一个站点获得了准备好的代码，并尝试应用它，但我得到了`500(internal server error)`. 我的代码如下。

```
public void getdata()
{
    var _url = "http://secure.directtrack.com/api/soap_affiliate.php";
    var _action = "http://secure.directtrack.com/api/soap_affiliate.php/dailyStatsInfo";

    XmlDocument soapEnvelopeXml = CreateSoapEnvelope();
    HttpWebRequest webRequest = CreateWebRequest(_url, _action);
    InsertSoapEnvelopeIntoWebRequest(soapEnvelopeXml, webRequest);

    // begin async call to web request.
    IAsyncResult asyncResult = webRequest.BeginGetResponse(null, null);

    // suspend this thread until call is complete. You might want to
    // do something usefull here like update your UI.
    asyncResult.AsyncWaitHandle.WaitOne();

    // get the response from the completed web request.
    string soapResult;
    using (WebResponse webResponse = webRequest.EndGetResponse(asyncResult))
    using (StreamReader rd = new StreamReader(webResponse.GetResponseStream()))
    {
        soapResult = rd.ReadToEnd();
    }
    Console.Write(soapResult);

}

private static HttpWebRequest CreateWebRequest(string url, string action)
{
    HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create(url);
    webRequest.Headers.Add("SOAPAction", action);
    webRequest.ContentType = "text/xml;charset=\"utf-8\"";
    webRequest.Accept = "text/xml";
    webRequest.Method = "POST";
    return webRequest;
}

private static XmlDocument CreateSoapEnvelope()
{
    XmlDocument soapEnvelop = new XmlDocument();

    soapEnvelop.LoadXml(@"<SOAP-ENV:Envelope xmlns:SOAP-ENV=""http://schemas.xmlsoap.org/soap/envelope/"" xmlns:xsi=""http://www.w3.org/1999/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/1999/XMLSchema""><SOAP-ENV:Body  xmlns=""http://soapinterop.org//"" SOAP-ENV:encodingStyle=""http://schemas.xmlsoap.org/soap/encoding/""> <q1:Execute xmlns:q1=""http://secure.directtrack.com/api/soap_affiliate.php/dailyStatsInfo""><client xsi:type=""xsd:string"">MyClientNAme</client><add_code xsi:type=""xsd:string"">MyCode</add_code><password xsi:type=""xsd:string"">MyPassword</password><program_id xsi:type=""xsd:int"">161</program_id></q1:Execute></SOAP-ENV:Body></SOAP-ENV:Envelope>");

    return soapEnvelop;
}

private static void InsertSoapEnvelopeIntoWebRequest(XmlDocument soapEnvelopeXml, HttpWebRequest webRequest)
{
    using (Stream stream = webRequest.GetRequestStream())
    {
        soapEnvelopeXml.Save(stream);
    }
} 
```

问题是什么？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T14:07:01.370

内部服务器错误意味着错误在服务器端。您的代码可能完全正确地调用了服务，或者您可能传递了服务器不知道如何处理的参数（但服务器代码不够聪明，无法告诉您）。

如果不了解有关服务器及其期望的更多信息，就无法诊断问题。

也就是说，您的肥皂信封可能是问题所在。您确定您输入了正确的客户端名称、添加代码、密码、程序 ID 等吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-07T14:43:19.190

我也经历过这个，我什至可以告诉你从哪里得到这个代码:)

所以检查一下

```
webRequest.Headers.Add("SOAPAction", action); 
```

是问题

只需使用

```
webRequest.Headers.Add("SOAP:Action"); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-19T12:47:04.127

您真的应该尝试将代码包装在一个或多个 try-catch 块中，因为内部服务器错误可能是未处理异常的结果。

如果soap xml 格式不正确，则此行将引发XmlException：

```
soapEnvelop.LoadXml(@"<SOAP-ENV:Envelope xmlns:SOAP-ENV=""http://schemas.xmlsoap.org/soap/envelope/"" xmlns:xsi=""http://www.w3.org/1999/XMLSchema-instance"" xmlns:xsd=""http://www.w3.org/1999/XMLSchema""><SOAP-ENV:Body  xmlns=""http://soapinterop.org//"" SOAP-ENV:encodingStyle=""http://schemas.xmlsoap.org/soap/encoding/""> <q1:Execute xmlns:q1=""http://secure.directtrack.com/api/soap_affiliate.php/dailyStatsInfo""><client xsi:type=""xsd:string"">MyClientNAme</client><add_code xsi:type=""xsd:string"">MyCode</add_code><password xsi:type=""xsd:string"">MyPassword</password><program_id xsi:type=""xsd:int"">161</program_id></q1:Execute></SOAP-ENV:Body></SOAP-ENV:Envelope>"); 
```

这可能会产生 IOExceptions：

```
soapEnvelopeXml.Save(stream); 
```

可能还有更多，但这应该会给你一个正确的方向......

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-19T13:42:46.670

您应该尝试使用反射来将数据发送到 Web 服务。尝试使用这样的东西：

```
 Uri mexAddress = new Uri(URL);
        // For MEX endpoints use a MEX address and a 
        // mexMode of .MetadataExchange
        MetadataExchangeClientMode mexMode = MetadataExchangeClientMode.HttpGet;
        var binding = new WSHttpBinding(SecurityMode.None);
        binding.MaxReceivedMessageSize = Int32.MaxValue;
        XmlDictionaryReaderQuotas readerQuotas = new XmlDictionaryReaderQuotas();
        readerQuotas.MaxNameTableCharCount = Int32.MaxValue;
        binding.ReaderQuotas = readerQuotas;

        //SS Get Service Type and set this type to either Galba and Powersale
        string contractName = "";

         string operationName = "RegisterMerchant";
        object[] operationParameters;// = new object[] { 1, 2 };

        // Get the metadata file from the service.
        //MetadataExchangeClient mexClient = new MetadataExchangeClient(mexAddress, mexMode);
        MetadataExchangeClient mexClient = new MetadataExchangeClient(binding);
        mexClient.ResolveMetadataReferences = true;

        MetadataSet metaSet = mexClient.GetMetadata(mexAddress, mexMode);

        // Import all contracts and endpoints
        WsdlImporter importer = new WsdlImporter(metaSet);
        Collection<ContractDescription> contracts = importer.ImportAllContracts();
        ServiceEndpointCollection allEndpoints = importer.ImportAllEndpoints();

        // Generate type information for each contract
        ServiceContractGenerator generator = new ServiceContractGenerator();
        var endpointsForContracts = new Dictionary<string, IEnumerable<ServiceEndpoint>>();

        foreach (ContractDescription contract in contracts)
        {
            generator.GenerateServiceContractType(contract);
            // Keep a list of each contract's endpoints
            endpointsForContracts[contract.Name] = allEndpoints.Where(se => se.Contract.Name == contract.Name).ToList();
        }

        if (generator.Errors.Count != 0) { throw new Exception("There were errors during code compilation."); }

        // Generate a code file for the contracts 
        CodeGeneratorOptions options = new CodeGeneratorOptions();
        options.BracingStyle = "C";
        CodeDomProvider codeDomProvider = CodeDomProvider.CreateProvider("C#");

        // Compile the code file to an in-memory assembly
        // Don't forget to add all WCF-related assemblies as references
        CompilerParameters compilerParameters = new CompilerParameters(
            new string[] { "System.dll", "System.ServiceModel.dll", "System.Runtime.Serialization.dll" });
        compilerParameters.GenerateInMemory = true;

        CompilerResults results = codeDomProvider.CompileAssemblyFromDom(compilerParameters, generator.TargetCompileUnit);

        if (results.Errors.Count > 0)
        {
            throw new Exception("There were errors during generated code compilation");
        }
        else
        {
            // Find the proxy type that was generated for the specified contract
            // (identified by a class that implements 
            // the contract and ICommunicationbject)
            Type[] types = results.CompiledAssembly.GetTypes();

            Type clientProxyType = types
                .First(t => t.IsClass && t.GetInterface(contractName) != null && t.GetInterface(typeof(ICommunicationObject).Name) != null);

            // Get the first service endpoint for the contract
            ServiceEndpoint se = endpointsForContracts[contractName].First();

            // Create an instance of the proxy
            // Pass the endpoint's binding and address as parameters
            // to the ctor
            object instance = results.CompiledAssembly.CreateInstance(
                clientProxyType.Name,
                false,
                System.Reflection.BindingFlags.CreateInstance,
                null,
                new object[] { se.Binding, se.Address },
                CultureInfo.CurrentCulture, null);

                Type parameterType = types.First(t => t.IsClass && t.Name=="Method()");
                Object o = Activator.CreateInstance(parameterType);

                FieldInfo[] props = parameterType.GetFields();
                FieldInfo fi = parameterType.GetField("NewMerchantDetail");
                //PropertyInfo pi = parameterType.GetProperty("NewMerchantDetail");

                Type p1Type = fi.FieldType;

                //Pass in the values here!!!
                Object o1 = Activator.CreateInstance(p1Type);
                PropertyInfo pi1 = p1Type.GetProperty("MerchantID");//7
                pi1.SetValue(o1, vendingClient.VendingClientID, null);

                pi1 = p1Type.GetProperty("FirstName");// John  
                pi1.SetValue(o1, vendingClient.DescriptiveName, null);

                fi.SetValue(o, o1, BindingFlags.Default, null, null);
                operationParameters = new object[] { o1 };

                // Get the operation's method, invoke it, and get the return value
                object retVal = instance.GetType().GetMethod(operationName).
                    Invoke(instance, operationParameters); 
```

我使用此代码来分发数据，而不必插入到每个单独的数据库中。

希望能帮助到你！

# jquery - 需要在每个jquery中放置一个变量

> ID：16104709
> 
> 赞同：0
> 
> 时间：2013-04-19T12:34:03.357
> 
> 标签：jquery, each

我有这样的功能

```
var json = "location.cities"; 

$(<--here-->).each(function() {
 .....
}); 
```

所以

我需要将变量“json”放在括号内并触发函数。那么有没有办法做到这一点？请有人帮我解决这个问题吗？我真的被困在这里了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:36:32.663

你可以试试下面的

你一直喜欢`"location.cities"` 。它现在变成了字符串

```
$(location.cities).each(function() { ..... }); 
```

或者

var json = location.cities;

```
$(json).each(function() {
  .....
 }); 
```

# matlab - 计算文件夹中文本文件的行数，并使用 MATLAB 计算总行数

> ID：16104711
> 
> 赞同：-1
> 
> 时间：2013-04-19T12:34:12.533
> 
> 标签：matlab, text, file-io, count

我想阅读 MATLAB 中一个文件夹中的一些文本文件，计算每个文件中的行数，最后总结这些数字。如果有人指导我如何在 MATLAB 中进行操作，我将不胜感激？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:37:22.713

要获取所有文本文件名，请使用`dir(*.txt)` [http://www.mathworks.com/help/matlab/ref/dir.html](http://www.mathworks.com/help/matlab/ref/dir.html)

要计算所有行，请参阅此答案：[Matlab 中有没有一种方法可以确定文件中的行数，而无需遍历每一行？](https://stackoverflow.com/questions/12176519/is-there-a-way-in-matlab-to-determine-the-number-of-lines-in-a-file-without-loop)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T13:51:43.853

Matlab 真的不适合那个。底层操作系统通常在这方面要好得多，因此，使用系统调用。

[从这个问题](https://stackoverflow.com/questions/12176519/)改写我原来的答案（从那时起我学到了一些新技巧：）

```
if (isunix) %# Linux, mac    
    [~, result] = system('wc -l *');    
    numLines = cellfun(@str2double, regexp(result, '([0-9]+) total', 'tokens'))

elseif (ispc) %# Windows       
    [~, result] = system('find /v /c "&*fake&*" *.*');    
    numLines = sum(str2double( regexp(result, '[0-9]+', 'match') ))

else %# Some smaller OS
    error('Unsupported operating system.');

end 
```

请注意，这将正常工作，除了

*   如果您在 Linux/max 上并且`total`在当前目录中有一个名为的文件:)
*   Windows 版本有时会误算一些文件 1 或 2 行，我不知道为什么...

我很确定有一个更简洁的单行解决方案来解析 linux 结果字符串；当前的混乱是由于`regexp(..., 'tokens')`返回了一个*单元格，这对于当前上下文来说**非常*不方便（老实说，我还没有找到很多方便的上下文），所以这必须通过`cellfun`.

但是哦，好吧，它认为在大多数情况下它应该可以解决问题。

# php - PHP - 在分隔符后返回所有内容

> ID：16104713
> 
> 赞同：5
> 
> 时间：2013-04-19T12:34:26.203
> 
> 标签：php, string

SO中有[类似的](https://stackoverflow.com/questions/5329866/remove-everything-before-the-first-in-a-string) [问题](https://stackoverflow.com/questions/2588666/remove-all-after-delimiter-php)，但我找不到任何与此完全相同的问题。我需要删除直到（包括）特定分隔符的所有内容。例如，给定字符串`File:MyFile.jpg`，我需要删除直到 的所有内容`:`，这样我就只剩下 了`MyFile.jpg`。提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T12:36:55.743

使用这个 preg_replace 调用：

```
$str = 'File:MyFile.jpg';
$repl = preg_replace('/^[^:]*:/', '', $str); // MyFile.jpg 
```

或者避免使用正则表达式并像这样使用explode：

```
$repl = explode(':', $str)[1]; // MyFile.jpg 
```

**编辑：**使用这种方式来避免正则表达式（如果字符串中可以有多个 : ）：

```
$arr = explode(':', 'File:MyFile.jpg:foo:bar');
unset($arr[0]);
$repl = implode(':', $arr); // MyFile.jpg:foo:bar 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T12:37:04.597

编辑：这个工作正常。

```
$str = "File:MyFile.jpg";
$str = substr( $str, ( $pos = strpos( $str, ':' ) ) === false ? 0 : $pos + 1 ); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-02-19T13:15:10.923

更短的代码：

要在字符第***一次*****出现之前**返回所有内容，请使用. 例子：*`strtok`*

 **   `strtok(16#/en/go, '#')`将返回`16`

要在第***一次***出现字符**后**返回所有内容，请使用. 例子：*`strstr`*

 **   `strstr(16#/en/go, '#')`将返回`#/en/go`（包括搜索字符“#”）
*   `substr(strstr(16#/en/go, '#'), 1)`将返回`/en/go`

要在***最后***一次出现字符**后**返回所有内容，请使用. 例子：*`strrchr`*

 **   `strrchr(16#/en/go, '/')`将返回`/go`（包括搜索字符“/”）
*   `substr(strrchr(16#/en/go/, '/'), 1)`将返回`go`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T12:37:27.187

你可以`explode`这样做：[链接](http://www.php.net/manual/en/function.explode.php)。

就像是：

```
$string = "File:MyFile.jpg";
list($protocol,$content) = explode(":", $string);
echo $content; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T14:28:26.207

```
 $str = "File:MyFile.jpg";

    $position = strpos($str, ':');//get position of ':'

    $filename= substr($str, $position+1);//get substring after this position 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T12:37:29.747

两种简单的方法：

```
$filename = str_replace('File:', '', 'File:MyFile.jpg'); 
```

或者

```
$filename = explode(':', 'File:MyFile.jpg');
$filename = $filename[1]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-30T15:24:40.210

示例字符串：

```
$string = 'value:90|custom:hey I am custom message|subtitute:array'; 
```

将字符串转换为数组

```
$var = explode('|', $string); 
```

检查结果：

```
Array(
[0] => value:90
[1] => custom:hey I am custom message
[2] => subtitute:array) 
```

声明一个数组变量

```
$pipe = array(); 
```

循环遍历字符串数组 $var

```
foreach( $var as $key => $value ) {
  // get position of colon
  $position = strrpos( $value, ':' );
  // get the key
  $key = substr( $value, 0, $position );
  //get the value
  $value = substr( $value, $position + 1 );
  $pipe[$key] = $value; } 
```

最后结果：

```
Array(
[value] => 90
[custom] => hey I am custom message
[subtitute] => array) 
```***

# jsf - JSF中inputTextarea组件的大小调整选项是什么

> ID：16104720
> 
> 赞同：17
> 
> 时间：2013-04-19T12:34:42.180
> 
> 标签：jsf, primefaces, textarea, resizable

我正在使用 JSF2.0，并且我有一个 inputTextArea 组件并希望阻止最终用户调整它的大小。我该怎么做。我尝试了 resize="false" 但它不接受。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-19T12:36:39.737

`resize`这是使用需要设置为的 CSS 属性来实现的`none`。

例如

```
<h:inputTextarea ... style="resize: none" /> 
```

或更好，

```
<h:inputTextarea ... styleClass="unresizable" /> 
```

在一个完整的 CSS 文件中

```
.unresizable {
    resize: none;
} 
```

同样的故事也适用于 PrimeFaces 等价物`<p:inputTextarea>`。您并不清楚您使用的是哪一个。您的问题标题和正文暗示了标准 JSF，但您标记了 PrimeFaces。

# c - 将字符串分配给指针

> ID：16104721
> 
> 赞同：-2
> 
> 时间：2013-04-19T12:34:44.500
> 
> 标签：c

根据定义，在 C 中，字符串是字符数组

```
int main() {
 char *name="David Bolton"; 
 printf("My name is %s\r\n",name) ;

 return 0;
 } 
```

该行将`char * name="David Bolton";`name 定义为指向字符串中第一个字符的指针，即'D'。所以，指针名称应该包含地址，但它打印 'David Bolton' 为什么？原因是什么？既然它只包含 D 的地址，为什么它是打印整个字符串吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T12:37:16.837

因为你使用`%s`，C 会知道你要打印一个字符串，所以，它会一个字符一个字符地打印到屏幕上，直到遇到 symbol `\0`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T12:37:00.183

`%s`格式说明符指示将`printf`指向的数据视为以空（零）字节终止的字符数组。`%p`如果您想打印指针地址，请使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T12:52:46.503

C语言中的String是用来判断一个0结尾的。

“大卫·博尔顿”

memory image : David Bolton\0 所以可以通过地址指向显示一个指向地址区域中 0 位置的指南。

例如）

```
void print_string(char *string){
    while('\0'!=*string){
        putchar(*string++);
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-19T12:36:59.743

在`printf`格式字符串中，说明`%s`符假定相应的参数是指向字符数据的指针。这正是`name`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T12:44:42.323

[`printf`](http://pubs.opengroup.org/onlinepubs/009695399/functions/fprintf.html)从给它的地址打印。因为`%s`用于打印字符串，所以它从 获取起始地址`name`并打印到`\0`. 如果你这样做`printf("%p",name)`，它会给你存储在`name`ie 中的地址`D`。

请参阅[this](http://boredzo.org/pointers/)以了解指针和[this](http://pw1.netcom.com/~tjensen/ptr/pointers.htm)用于数组

# iphone - 我想根据表格视图中选定的国家/地区检索州 ID

> ID：16104724
> 
> 赞同：-1
> 
> 时间：2013-04-19T12:35:14.620
> 
> 标签：iphone, ios, uitableview, nsdictionary

我的数据库是这样的。

国家表

```
{"country_id":"88","country_name":"India","country_code":"in","continent_code":"AS"} 
```

状态表

```
{"state_id":"1379","country_id":"88","state_name":"Sikkim","state_html_name":"Sikkim"} 
```

我写了这段代码。

```
for(NSDictionary *cid in wholeJsonArray)
    {

        NSNumber *number = [cid objectForKey:@"country_id"];
        [idcountry addObject:number];

    } 
```

我得到了正确的国家身份证。但是当我根据所选国家/地区为州 ID 编写此代码时，它可以显示 0 个对象。

```
for(NSDictionary *cid in statearray)
    {

        NSNumber *statenumber = [cid objectForKey:@"state_id"];
        [idstate addObject:statenumber];

      } 
```

表格视图中的此代码`didSelectRowAtIndexPath`

```
NSString *statename=[stateArray objectAtIndex:indexPath.row];
        stateid=[idstate objectAtIndex:indexPath.row];
        [stateButton setTitle:statename forState:UIControlStateNormal]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:45:59.717

问题出在这条**线上：**

```
[idstate addObject:number]; 
```

您应该添加`statenumber`而不是`number`. **像这样 ：**

```
[idstate addObject:statenumber]; 
```

# java - 无冗余复制数组

> ID：16104726
> 
> 赞同：0
> 
> 时间：2013-04-19T12:35:17.450
> 
> 标签：java

我的程序中有两个数组。一个是满的（里面有多余的项目）。我想将所有项目复制到第二个空数组而没有冗余。我唯一的问题是“如何声明第二个数组的大小？” 因为我不确定第一个数组中有多少冗余项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T12:40:23.950

我会使用`Set`它，这将从您的数组中删除重复项，然后您转换回数组或您需要的另一个集合。

```
Set<Item> withoutDups = new HashSet<Item>(Arrays.asList(yourArray));
//now you have it without duplicates and do whatevet you want with it:-)
Item[] arrayWithoutDups = new Item[withoutDups.size()];
withoutDups.toArray(arrayWithoutDups); // fill the array 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T12:44:56.437

将字符串数组转换为列表。使用 LinkedHashSet 消除重复项。LinkedHashSet 保持插入顺序和唯一性。

编辑：我已经删除了列表，因为它是多余的。

```
 String[] words = {"ace", "ace","boom", "crew", "dog", "eon"}; 
    Set<String> hs = new LinkedHashSet<String>(Arrays.asList(words));
    String[]  mywords=hs.toArray(new String[hs.size()]);
    for(int i=0;i<mywords.length;i++)
    {
        System.out.println("..."+mywords[i]);
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T12:38:40.767

`Arrays`是固定大小的。你应该`ArrayList`在这种情况下使用。

但是，如果您必须使用数组，那么您应该分配第二个数组的大小等于第一个数组的大小，因为它可能根本不包含冗余元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T12:39:35.573

使用`ArrayList`哪个大小可以小于原始数组，然后根据需要从它创建数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T12:40:15.077

所以有什么问题 ？遍历源数组中的值，查找冗余项的数量。然后分配第二个数组并在下一个循环中复制值。

这种方法的复杂性是`2n=O(n)`

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-19T12:46:26.737

由于您不知道哪个项目是多余的，因此您需要遍历数组。我建议您在循环期间使用临时 List uniqueItemsList 添加项目。该列表将根据需要增长。

然后你可以得到一个包含这样代码的数组（用你的类型替换 String）：

```
String uniqueItems[] = new String[uniqueItemsList.size()]; 
uniqueItems = uniqueItemsList.toArray(uniqueItems); 
```

# c# - LINQ 按日期降序排列对象集合

> ID：16104727
> 
> 赞同：5
> 
> 时间：2013-04-19T12:35:25.147
> 
> 标签：c#, linq, entity-framework

我有一堆对象（产品），我想先按创建日期降序排列它们，然后只显示前 10 条记录。创建日期（DateTime）的格式如下。

```
4/4/2007 12:00:00 AM 
```

这是我尝试过的。

如何按日期降序排列前 10 名？

```
var productLatestReleases = (from p in visualsProduct
                                 from pf in p.DomainObjectFields
                                 select p).Distinct().OrderByDescending(d => d.DateCreated).Take(10); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T12:54:56.233

由于您正在描述日期的格式，我想该`DateCreated`属性的数据类型是`string`. 如果是，那么你可以这样做：

```
.OrderByDescending(d => Convert.ToDateTime(d.DateCreated)).Take(10) 
```

此外，`Distinct()`如果您不指定自己的相等性进行比较，则不会产生太大影响。

# java - 从枚举返回计算值

> ID：16104728
> 
> 赞同：6
> 
> 时间：2013-04-19T12:35:27.193
> 
> 标签：java, enums

请问我的问题是两个，非常简单

1.  按原样误解枚举

2.  这个想法在我的代码中缺少一些重要的抽象

代码示例，其中`oprt.calc(x, y)`不可编译，带有警告 `cannot find symbol`

```
public enum Operation {

    PLUS {
        public double calc(double x, double y) {
            return x + y;
        }
    },
    MINUS {
        public double calc(double x, double y) {
            return x - y;
        }
    },
    MULTILPLE {
        public double calc(double x, double y) {
            return x * y;
        }
    },
    DIVIDED_BY {
        public double calc(double x, double y) {
            return x / y;
        }
    };

    public static void main(String args[]) {
        double x = 15.25;
        double y = 24.50;
        for (Operation oprt : Operation.values()) {
            System.out.println(x + " " + oprt + " " 
                    + y + " = " + oprt.calc(x, y));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T12:39:59.317

你错过的是 calc() 方法的抽象声明：

```
enum Operation {

  PLUS {
      public double calc(double x, double y) {
          return x + y;
      }
  },
  MINUS {
      public double calc(double x, double y) {
          return x - y;
      }
  },
  MULTILPLE {
      public double calc(double x, double y) {
          return x * y;
      }
  },
  DIVIDED_BY {
      public double calc(double x, double y) {
          return x / y;
      }
  };

  **public abstract double calc(double x, double y);**

  public static void main(String args[]) {
      double x = 15.25;
      double y = 24.50;
      for (Operation oprt : Operation.values()) {
          System.out.println(x + " " + oprt + " " 
                  + y + " = " + oprt.calc(x, y));
      }
  }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-19T12:38:13.910

您需要`double calc(double x, double y)`直接在枚举中声明一个抽象方法，并在每个枚举成员中覆盖它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T12:40:41.937

你是压倒一切的`calc()`，而你没有原始`calc()`方法。要么声明一个抽象方法：

```
public abstract double calc(double x, double y); 
```

或声明一个具有默认实现的具体方法：

```
public double calc(double x, double y)
{
    // ...
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-19T12:45:33.860

使用枚举方法的正确语法是：

```
private enum Operation {
    PLUS, MINUS, MULTILPLE, DIVIDED_BY;

    public double calc(double x, double y) {
        switch (this) {
        case PLUS:
            return x + y;
        case MINUS:
            return x - y;
        case MULTILPLE:
            return x * y;
        case DIVIDED_BY:
            return x / y;
        }
        return 0;
    }
}

public static void main(String args[]) throws IOException {

    double x = 15.25;
    double y = 24.50;
    for (Operation oprt : Operation.values()) {
        System.out.println(x + " " + oprt + " " + y + " = "
                + oprt.calc(x, y));
    }

} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-19T12:44:55.603

```
public double calc(double x, double y){} 
```

和

```
private double calc(double x,double y){} 
```

除非您将`calc()`方法添加到枚举中`Operation`。根据 JLS：

```
Instance methods declared in these class bodies are may be invoked outside 
the enclosing enum type only if they override accessible methods in 
the enclosing enum type. 
```

所以基本上，`oprt`is`Operation`和 as的类型`Operation`没有任何方法被`double calc(double x,double y)`调用的声明，你不能调用方法 using `oprt`。简而言之，类主体中定义的方法应该是被覆盖的方法，以便它们可以在外部访问。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-19T12:44:00.550

它不会编译，因为目前，该`calc`方法仅存在于您的每个可能值中`enum`- 但它不存在于*类型* `Operation`本身。这就是为什么您的编译器（和我的）不接受它的原因。

因此，您需要在*type*中定义方法。也许是这样的：

```
public abstract double calc(double x, double y); 
```

您的枚举值 ( , 和`PLUS`每个`MINUS`都实现该方法。`MULTIPLE``DIVIDED_BY`

# uitableview - 如何将数据从 NSDictionary 对象加载到表格单元格

> ID：16104729
> 
> 赞同：1
> 
> 时间：2013-04-19T12:35:30.500
> 
> 标签：uitableview, core-data, ios6

```
I Want to load the Table data from a NSDictionary object. This is how i did below function to fetch numberofRows. how to set the value for the cell from NSDictionary object ? 
```

请给我解决方案，我是Objective C编程的初学者

以下是我从 coredata 获取的 NSDictionary 对象“obj”。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    NSEntityDescription *entity = [NSEntityDescription  entityForName:@"Pictures" inManagedObjectContext:managedObjectContext];

    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entity];
    [request setResultType:NSDictionaryResultType];
    [request setReturnsDistinctResults:YES];
    [request setPropertiesToFetch:@[@"title"]];

    // Execute the fetch.
    NSError *error;

  objects = [managedObjectContext executeFetchRequest:request error:&error];
    if (objects == nil) {
        // Handle the error.
    }
    for( obj in objects ) {
        NSLog(@"Title: %@", [obj objectForKey:@"title"]);
    }

    return [objects count];
} 
```

在单元格中，我想添加 NSdictionary 对象中的标题。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }     

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:53:44.153

你可以这样做可能是它的工作是我的朋友：-

```
- (void)viewWillAppear:(BOOL)animated
{
[self getdata];
[yourtable reloadData];

 [super viewWillAppear:animated];

}

-(void)getdata
{

 NSEntityDescription *entity = [NSEntityDescription  entityForName:@"Pictures" inManagedObjectContext:managedObjectContext];

    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entity];
    [request setResultType:NSDictionaryResultType];
    [request setReturnsDistinctResults:YES];
    [request setPropertiesToFetch:@[@"title"]];

    // Execute the fetch.
    NSError *error;

  objects = [managedObjectContext executeFetchRequest:request error:&error];
    if (objects == nil) {
        // Handle the error.
    }
    for( obj in objects ) {
        NSLog(@"Title: %@", [obj objectForKey:@"title"]);
    }

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return [objects count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

      cell.textlabel.text = [[objects objectatindex:indexpath.row] valueforkey@"title"];
    }     

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:54:58.167

把它放在 cellForRowAtIndexPath 方法中。

```
cell.textLabel.text = [[objects objectAtIndex:indexPath.row] valueForKey:@"title"]; 
```

# c - C中的文字数组

> ID：16104734
> 
> 赞同：16
> 
> 时间：2013-04-19T12:35:50.200
> 
> 标签：c

我对什么是文字数组的定义可能是错误的。我将以下内容称为一个：

```
{0x00, 0x01, 0x03} 
```

我有一个接受数组的函数，如下所示：

```
void mote(char arry[]){} 
```

当我调用此函数时，我希望能够执行以下操作：

```
mote({0x00, 0x01, 0x03}) 
```

但是我的编译器（C30）抱怨以下错误：

```
error: syntax error before '{' token 
```

我也用这些括号-> []尝试了上面的方法，但我仍然得到同样的错误。

**我的问题**

1）是否可以将文字数组传递给函数？

2）如果是，如何？

谢谢大家

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-19T12:39:06.620

这种语法称为*数组初始*值设定项。因此，它只能在定义数组时使用。

> ### C11 (n1570)，第 6.7.9 节初始化
> 
> ```
> initializer:
>     assignment-expression
>     { initializer-list }
>     { initializer-list , } 
> ```

但是，在 C99 中，可以使用*复合文字*：

```
mote((char[]){0x00, 0x01, 0x03}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-19T12:45:20.727

如果不支持 C99，试试这个：

```
char cp[] = {0x01, 0x02, 0x03};
mote (cp); 
```

# exception - HTTPS 上的 SignalR

> ID：16104737
> 
> 赞同：1
> 
> 时间：2013-04-19T12:35:57.577
> 
> 标签：exception, https, signalr

我正在尝试在 HTTPS 服务器上使用 SignalR 客户端库。它在普通服务器上工作正常，但在 HTTPS 服务器上，它会引发异常。

尝试

{ ... hubConnection = new HubConnection(signalUrl);

代理 = hubConnection.CreateHubProxy("SignalRConnect");

hubConnection.Start().Wait(); // 在这一行抛出异常

... }

捕捉（异常前）{

我收到异常 - “根据验证程序，远程证书无效。”

}

有人知道如何配置客户端 SignalR 吗？

提前谢谢你。

美达

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T10:37:53.213

问题已解决。我从控制器中删除了创建代理的代码并在客户端添加代码并从控制器代码中获取集线器的上下文。

var hubContext = GlobalHost.ConnectionManager.GetHubContext();

并使用 hubContext 进行客户端通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:37:49.473

如果您的服务器需要自定义客户端证书，那么您可以在发出请求之前使用 SignalR 1.1 beta 向连接添加 x509certificate。

# tableview - 关闭 uitableview 并重新加载另一个 uitableview

> ID：16104740
> 
> 赞同：0
> 
> 时间：2013-04-19T12:36:17.323
> 
> 标签：tableview, reload, segue

我有问题。

我有 CityViewController.m

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
  UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
  TheatreController *tmpTheatreController = [storyboard instantiateViewControllerWithIdentifier:@"TheatreController"];
  NSString *cityView = [[self.arrayCity objectAtIndex:indexPath.row] valueForKey:@"idCity"];
  tmpTheatreController.cityView = cityView;

  //[self.navigationController pushViewController:tmpTheatreController animated:YES];
  [tmpTheatreController.tableView reloadData];
  [self.delegate citiesViewControllerCancel:self];    
} 
```

当我正确选择城市时，在 TheatreController.m 中传递“idCity”

```
...
-(void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
   if([segue.identifier isEqualToString:@"SelectCity"])
   {
      UINavigationController *nc = segue.destinationViewController;
      CityViewController *mvc = [[nc viewControllers] objectAtIndex:0];
      mvc.delegate = self;
   }
}
...
- (void)viewDidLoad
{
  [super viewDidLoad];

  NSString *webUrl = @"http://localhost:3000/theatres?city=";
  webUrl = [webUrl stringByAppendingFormat:@"%@", cityView];
  dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSData* data = [NSData dataWithContentsOfURL:[NSURL URLWithString:webUrl]];
    [self performSelectorOnMainThread:@selector(fetchedData:)
                           withObject:data waitUntilDone:YES]; });
    }
- (void)fetchedData:(NSData *)responseData {
   NSArray* json = [NSJSONSerialization
                 JSONObjectWithData:responseData
                 options:kNilOptions error:nil];
   NSMutableArray *theatreTMP = [[NSMutableArray alloc] initWithCapacity:[json count]];

   int i = 0;
   for (id object in [json valueForKeyPath:@"response.name"]) {
     Theatres *t = [[Theatres alloc] init];
     NSLog(@"JSON: %@", [[json valueForKeyPath:@"response.name"] objectAtIndex:i]);
     t.theatre = [[json valueForKeyPath:@"response.name"] objectAtIndex:i];
     t.idTheatre = [[json valueForKeyPath:@"response.id"] objectAtIndex:i];

     [theatreTMP addObject:t];
     i++;
  }
 self.arrayTheatre = [theatreTMP copy];
 [self.tableView reloadData];
} 
```

我有正确的服务器响应并且所有参数都是正确的，但是我在 tableView main 的 reloadData 上遇到了问题！[在此处输入图像描述][1]。我没有看到更新表。

帮帮我谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T07:04:34.860

我已经用这个解决方案解决了在 CityViewController.m

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cityView = [[self.arrayCity objectAtIndex:indexPath.row] valueForKey:@"idCity"];
    [self.delegate performSelector:@selector(reloadTable:) withObject:cityView];
    [self.delegate citiesViewControllerCancel:self];
} 
```

在 TheatreTableView.m 中

```
 - (void) callServer:(NSString *)idCity {
    NSString *webUrl = @"http://localhost:3000/theatres?city=";
    webUrl = [webUrl stringByAppendingFormat:@"%@", idCity];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:webUrl]];
            [self performSelectorOnMainThread:@selector(fetchedData:) withObject:data waitUntilDone:YES];});
}
....
- (void) reloadTable:(id)idCity
{
    [self callServer:idCity];
} 
```

谢谢

# android - 如何从 Android 相机中找到框架的轮廓并将其转换为 box2d 主体？

> ID：16104744
> 
> 赞同：7
> 
> 时间：2013-04-19T12:36:32.773
> 
> 标签：android, opencv, computer-vision, jbox2d

使用 OpenFrameworks、OpenCV 和 Box2D，我能够以良好的帧速率实现它。使用 Android 似乎是一项复杂得多的任务（部分原因是我是 JAVA 新手）。

我是这样开始的：

1.  使用“OpenCV 示例 - 图像操作”并删除除“canny”效果之外的所有内容，该效果会生成漂亮的黑白图像，非常适合查找轮廓。

    ```
    public Mat onCameraFrame(CvCameraViewFrame inputFrame)
    {
        mRgba = inputFrame.rgba();
        Imgproc.Canny(mRgbaInnerWindow, mIntermediateMat, 50, 100);
        Imgproc.cvtColor(mIntermediateMat, mRgbaInnerWindow, Imgproc.COLOR_GRAY2BGRA, 4);

        return mRgba;
    } 
    ```

2.  从“OpenCV Sample - color-blob-detection”中，我抓住了在 Mat 中找到轮廓的逻辑：

    ```
    // These two lines are actually in the function onCameraViewStarted
    mHierarchy = new Mat();
    CONTOUR_COLOR = new Scalar(255,0,0,255);

    // These lines are in function onCameraFrame
    List<MatOfPoint> contours = new ArrayList<MatOfPoint>();        
    Imgproc.findContours(mRgbaInnerWindow, contours, mHierarchy, Imgproc.RETR_EXTERNAL,     
    Imgproc.CHAIN_APPROX_SIMPLE);
    Imgproc.drawContours(mIntermediateMat, contours, -1, CONTOUR_COLOR); 
    ```

    所以，我当前的功能看起来像这样，它不起作用：

    ```
    public Mat onCameraFrame(CvCameraViewFrame inputFrame)
    {
        mRgba = inputFrame.rgba();

        if ((mRgbaInnerWindow == null) || (mGrayInnerWindow == null) || (mRgba.cols() != mSizeRgba.width) || (mRgba.height() != mSizeRgba.height))
            CreateAuxiliaryMats();

        Imgproc.Canny(mRgbaInnerWindow, mIntermediateMat, 50, 100);
        //Imgproc.cvtColor(mIntermediateMat, mRgbaInnerWindow, Imgproc.COLOR_GRAY2BGRA, 4);

        List<MatOfPoint> contours = new ArrayList<MatOfPoint>();

        Imgproc.findContours(mRgbaInnerWindow, contours, mHierarchy, Imgproc.RETR_EXTERNAL, Imgproc.CHAIN_APPROX_SIMPLE);
        //Imgproc.drawContours(mIntermediateMat, contours, -1, CONTOUR_COLOR);

        return mRgba;
    } 
    ```

3.  现在，这就是我卡住的地方。我不断收到异常，我认为我没有使用正确的尺寸或将 Mat 转换为正确的色彩空间。这篇文章有一些见解，但我不知道它是否正确：[Android findContours 上的 OpenCV throws Exception](https://stackoverflow.com/questions/12457477/opencv-on-android-findcontours-throws-exception)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T10:56:14.560

嗨，我也是 openCV 的新手，但是这段代码可能会有所帮助，

```
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.SurfaceView;
import org.opencv.android.*;
import org.opencv.core.*;
import org.opencv.imgproc.Imgproc;

import java.util.ArrayList;
import java.util.List;

public class MainActivity extends Activity implements CvCameraViewListener2{

private static final String TAG = MainActivity.class.getCanonicalName();

private CameraBridgeViewBase mOpenCvCameraView;

private Mat                    mRgba;
private Mat                    mIntermediateMat;
private Mat                    mGray;
Mat hierarchy;

List<MatOfPoint> contours;

private BaseLoaderCallback mLoaderCallback = new BaseLoaderCallback(this) {
    @Override
    public void onManagerConnected(int status) {
        switch (status) {
            case LoaderCallbackInterface.SUCCESS:
            {
                Log.i(TAG, "OpenCV loaded successfully");
                mOpenCvCameraView.enableView();
            } break;
            default:
            {
                super.onManagerConnected(status);
            } break;
        }
    }
};

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    mOpenCvCameraView = (CameraBridgeViewBase) findViewById(R.id.java_surface_view);
    mOpenCvCameraView.setVisibility(SurfaceView.VISIBLE);

    mOpenCvCameraView.setCvCameraViewListener(this);

}

@Override
public void onResume() {
    super.onResume();
    OpenCVLoader.initAsync(OpenCVLoader.OPENCV_VERSION_2_4_3, this,
            mLoaderCallback);
}

@Override
public void onPause() {
    super.onPause();
    if (mOpenCvCameraView != null)
        mOpenCvCameraView.disableView();
}

@Override
public void onCameraViewStarted(int width, int height) {
    mRgba = new Mat(height, width, CvType.CV_8UC4);
    mIntermediateMat = new Mat(height, width, CvType.CV_8UC4);
    mGray = new Mat(height, width, CvType.CV_8UC1);
    hierarchy = new Mat();
}

@Override
public void onCameraViewStopped() {
    mRgba.release();
    mGray.release();
    mIntermediateMat.release();
    hierarchy.release();
}

@Override
public Mat onCameraFrame(CvCameraViewFrame inputFrame) {
     mRgba = inputFrame.gray();
        contours = new ArrayList<MatOfPoint>();
        hierarchy = new Mat();

     Imgproc.Canny(mRgba, mIntermediateMat, 80, 100);
     Imgproc.findContours(mIntermediateMat, contours, hierarchy, Imgproc.RETR_TREE, Imgproc.CHAIN_APPROX_SIMPLE, new Point(0, 0));
    /* Mat drawing = Mat.zeros( mIntermediateMat.size(), CvType.CV_8UC3 );
     for( int i = 0; i< contours.size(); i++ )
     {
    Scalar color =new Scalar(Math.random()*255, Math.random()*255, Math.random()*255);
     Imgproc.drawContours( drawing, contours, i, color, 2, 8, hierarchy, 0, new Point() );
     }*/
     hierarchy.release();
     Imgproc.drawContours(mRgba, contours, -1, new Scalar(Math.random()*255, Math.random()*255, Math.random()*255));//, 2, 8, hierarchy, 0, new Point());
    // Imgproc.cvtColor(mIntermediateMat, mRgba, Imgproc.COLOR_GRAY2RGBA, 4);
    return mRgba;
}

} 
```

我知道这可能不是实现这一目标的最佳方法，但我们都在这里学习新方法:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-25T20:46:25.480

简短回答：您必须使用 的结果`Canny`作为 的输入（第一个参数）`findContours`，即

```
Imgproc.findContours(mIntermediateMat, ...); 
```

# ms-access - 使用从 VBA 代码派生的值填充表中的字段

> ID：16104750
> 
> 赞同：1
> 
> 时间：2013-04-19T12:36:41.587
> 
> 标签：ms-access, ms-access-2007, vba, ms-access-2010

我找到了一些[简洁的代码](http://access.mvps.org/access/api/api0008.htm)（实际上是通过[这里](https://stackoverflow.com/questions/168659/how-can-i-get-the-currently-logged-in-windows-user-in-access-vba/168682)）来获取当前登录到 Windows 的用户的用户名。

假设我有一张名为`AdminEntry`. 我希望将`AdminEntry`表设置为表单的记录源，因此用户将通过表单在该表上进行数据输入。他们创建并完成数据输入的任何记录也将在该记录上标记他们的用户名，以便我们可以跟踪属于谁的内容。

不知道我将如何将该用户名字符串推入表中，或者最好的方法。

也许如果该`AdminEntry`表具有以下字段：

```
| UserName | Field1 | Field2 |
|          |        |        | 
```

用户可以只使用表单在`Field1`和上进行数据输入`Field2`：

```
| UserName | Field1 | Field2 |
|          |  data  |  data  | 
```

然后**保存**按钮上的事件可能会在`UserName`将完整记录保存到`AdminEntry`表中之前将用户名字符串拉到字段中：

```
| UserName | Field1 | Field2 |
|   data   |  data  |  data  | 
```

虽然不知道如何通过该用户名字符串，所以会喜欢一些帮助/指针！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:18:11.117

将文本框 , 添加`txtUserName`到表单并将其绑定到`UserName`字段。您可以将文本框的`.Visible`属性设置为`No`。

然后将该`fOSUserName()`函数的值分配给`txtUserName`表单的更新前事件。注意更新前也与表单插入一起发生，因此当您添加新记录和修改现有记录时，此方法将存储当前用户名。

```
Private Sub Form_BeforeUpdate(Cancel As Integer)
    ' Me.txtUserName = CreateObject("WScript.Network").UserName
    Me.txtUserName = fOSUserName
End Sub 
```

# orbeon - Orbeon Runner - 计算值

> ID：16104751
> 
> 赞同：0
> 
> 时间：2013-04-19T12:36:44.740
> 
> 标签：orbeon

我用一些文本输出控件制作了一个表单，这些控件也由其他一些具有计算值的控件计算了值。问题是，在测试模式下（来自构建器），这些控件正常工作。在 runner 中，这些控件始终为 0（空）。保存文档并再次打开后，值正确，但不刷新。

这是我的例子：

```
<xforms:instance id="fr-form-instance">
    <form>
        <section-1>
            <first>
                <first_amount/>
                <first_percent/>
                <first_total/>
            </first>
            <second>
                <second_amount/>
                <second_percent/>
                <second_total/>
            </second>
            <third>
                <third_amount/>
                <third_percent/>
                <third_total/>
            </third>
            <total/>
            <average/>
        </section-1>
    </form>
</xforms:instance> 
```

还有我的绑定：

```
<xforms:bind xmlns:dataModel="java:org.orbeon.oxf.fb.DataModel" id="fr-form-binds"
             nodeset="instance('fr-form-instance')">
    <xforms:bind id="section-1-bind" name="section-1" ref="section-1">
        <xf:bind name="first" id="first-bind" ref="first">
            <xf:bind name="first_amount" id="first_amount-bind" ref="first_amount"
                     type="xf:decimal"/>
            <xf:bind xmlns:fb="http://orbeon.org/oxf/xml/form-builder" name="first_percent"
                     id="first_percent-bind"
                     ref="first_percent"
                     type="xf:decimal"
                     constraint="./text()&gt;=0 or string-length(./text())=0"/>
            <xf:bind xmlns:fb="http://orbeon.org/oxf/xml/form-builder" name="first_total"
                     id="first_total-bind"
                     ref="first_total"
                     calculate="(../first_amount/text() * ../first_percent/text()) div 100"
                     type="xf:decimal"/>
        </xf:bind>
        <xf:bind name="second" id="second-bind" ref="second">
            <xf:bind name="second_amount" id="second_amount-bind" ref="second_amount"
                     type="xf:decimal"/>
            <xf:bind xmlns:fb="http://orbeon.org/oxf/xml/form-builder" name="second_percent"
                     id="second_percent-bind"
                     ref="second_percent"
                     type="xf:decimal"
                     constraint="./text()&gt;=0 or string-length(./text())=0"/>
            <xf:bind xmlns:fb="http://orbeon.org/oxf/xml/form-builder" name="second_total"
                     id="second_total-bind"
                     ref="second_total"
                     calculate="(../second_amount/text() * ../second_percent/text()) div 100"
                     type="xf:decimal"/>
        </xf:bind>
        <xf:bind name="third" id="third-bind" ref="third">
            <xf:bind name="third_amount" id="third_amount-bind" ref="third_amount"
                     type="xf:decimal"/>
            <xf:bind xmlns:fb="http://orbeon.org/oxf/xml/form-builder" name="third_percent"
                     id="third_percent-bind"
                     ref="third_percent"
                     type="xf:decimal"
                     constraint="./text()&gt;=0 or string-length(./text())=0"/>
            <xf:bind xmlns:fb="http://orbeon.org/oxf/xml/form-builder" name="third_total"
                     id="third_total-bind"
                     ref="third_total"
                     calculate="(../third_amount/text() * ../third_percent/text()) div 100"
                     type="xf:decimal"/>
        </xf:bind>
        <xf:bind xmlns:fb="http://orbeon.org/oxf/xml/form-builder" name="total"
                 id="total-bind"
                 ref="total"
                 calculate="sum(instance('fr-form-instance')/section-1/first/first_total/text()) + sum(instance('fr-form-instance')/section-1/second/second_total/text()) + sum(instance('fr-form-instance')/section-1/third/third_total/text())"
                 type="xf:decimal"/>
        <xf:bind xmlns:fb="http://orbeon.org/oxf/xml/form-builder" name="average"
                 id="average-bind"
                 ref="average"
                 type="xf:decimal"
                 calculate="instance('fr-form-instance')/section-1/total/text() div (count(instance('fr-form-instance')/section-1/first) + count(instance('fr-form-instance')/section-1/second) + count(instance('fr-form-instance')/section-1/third))"/>
    </xforms:bind>
</xforms:bind> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T07:31:27.923

这似乎适用于我提供的表单，无论是在测试模式下还是在部署表单时（参见屏幕截图）。我正在使用 Orbeon Forms 4.1。

这并不重要，但这里有一些关于 XPath 表达式的评论：

*   `text()`在 XPath 中几乎不需要，您可以删除`/text()`表达式中出现的所有此类
*   代替`&gt;=`，您可以使用`ge`操作符，它更具可读性

![截屏](https://i.stack.imgur.com/DaJp8.png).

# asp.net - 与 EntityObject 派生类中的自定义属性绑定的 GridView 在 ASP.NET 中失败

> ID：16104755
> 
> 赞同：1
> 
> 时间：2013-04-19T12:36:56.440
> 
> 标签：asp.net, entity-framework, c#-4.0

我有一个实体框架层，并从该层扩展了一个类。代码如下：

```
public partial class FeatureMaster : EntityObject
{
    public string ParentFeatureName
    {
        get
        {
            return (from r in Global.dc.FeatureMasters
                    where r.FeatureId == FeatureParentId
                    select r).SingleOrDefault().FeatureName;
        }
        set
        {
            FeatureParentId = (from r in Global.dc.FeatureMasters
                               where r.FeatureName == value
                               select r).SingleOrDefault().FeatureId;
            ReportPropertyChanged(("ParentFeatureName"));
            ReportPropertyChanged(("FeatureParentId"));
        }
    }
} 
```

现在我希望在我的 ASP.NET 页面中使用它。我的 ASP.NET 页面的代码是：

```
 <%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true"
    CodeBehind="ListFeatureMaster.aspx.cs" Inherits="Backend.ListFeatureMaster" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="cpMain" runat="server">
    <asp:GridView ID="grdRecords" runat="server" AllowPaging="True" AllowSorting="True"
        AutoGenerateColumns="False" DataKeyNames="FeatureId" DataSourceID="EntityDataSource1">
        <Columns>
            <asp:CommandField ShowDeleteButton="True" ShowEditButton="True" />
            <asp:BoundField DataField="FeatureId" HeaderText="FeatureId" ReadOnly="True" SortExpression="FeatureId" />
            <asp:BoundField DataField="FeatureName" HeaderText="FeatureName" SortExpression="FeatureName" />
            <asp:BoundField DataField="FeatureParentId" HeaderText="FeatureParentId" SortExpression="FeatureParentId" />
            <asp:BoundField DataField="FeatureDescription" HeaderText="FeatureDescription" SortExpression="FeatureDescription" />
            <asp:TemplateField HeaderText="ParentFeatureName" SortExpression="ParentFeatureName">
                <EditItemTemplate>
                    <asp:DropDownList ID="DropDownList1" runat="server" DataSourceID="EntityDataSource1"
                        AppendDataBoundItems="true" DataTextField="ParentFeatureName" DataValueField="ParentFeatureName"
                        SelectedValue='<%# Bind("ParentFeatureName") %>'>
                    </asp:DropDownList>
                </EditItemTemplate>
                <ItemTemplate>
                    <asp:Label ID="Label1" runat="server" Text='<%# Eval("ParentFeatureName") %>'></asp:Label>
                </ItemTemplate>
            </asp:TemplateField>
        </Columns>
    </asp:GridView>
    <asp:EntityDataSource ID="EntityDataSource1" runat="server" ConnectionString="name=BackendEntities"
        DefaultContainerName="BackendEntities" EnableFlattening="False" EntitySetName="FeatureMasters"
        EntityTypeFilter="FeatureMaster" EnableDelete="True" EnableUpdate="True">
    </asp:EntityDataSource>
        <asp:EntityDataSource ID="EntityDataSource2" runat="server" ConnectionString="name=BackendEntities"
        DefaultContainerName="BackendEntities" EnableFlattening="False" EntitySetName="FeatureMasters"
        EntityTypeFilter="FeatureMaster" EnableDelete="True" EnableUpdate="True">
    </asp:EntityDataSource>
</asp:Content> 
```

问题是当我执行这段代码时，它在第一次加载和导航时运行良好，但是当我尝试更新记录时，我得到了错误。请帮我解决同样的问题。

错误信息说：

```
A property named 'ParentFeatureName' was not found on the entity during an insert, update, or delete operation. Check to ensure that properties specified as binding expressions are available to the data source. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:15:39.077

我认为问题在于您没有将自定义属性附加到您的实体，然后保存它。您可以看看[将客户属性添加到实体类](https://stackoverflow.com/questions/1187419/adding-custom-property-to-client-side-entity-class)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:18:07.950

我得到了解决方案。

我更改了 GridView 的定义并向其中添加了 OnRowUpdating 事件。ASPX 页面代码现在看起来像：

```
<asp:GridView ID="grdRecords" runat="server" AllowPaging="True" AllowSorting="True"
    AutoGenerateColumns="False" DataKeyNames="FeatureId" DataSourceID="EntityDataSource1" OnRowUpdating="grdRecords_RowUpdating"> 
```

在我的 .aspx.cs 文件中，我添加了事件处理程序的代码。相同的代码如下所示：

```
 protected void grdRecords_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        int primaryKey = Convert.ToInt32(grdRecords.DataKeys[e.RowIndex].Value);

        FeatureMaster existingRecord = Global.dc.FeatureMasters.First(r => r.FeatureId == primaryKey);
        existingRecord.FeatureName = e.NewValues["FeatureName"].ToString();
        existingRecord.ParentFeatureName = ((DropDownList)(grdRecords.Rows[e.RowIndex].FindControl("DropDownList1"))).SelectedValue.ToString();
        existingRecord.FeatureDescription = e.NewValues["FeatureDescription"].ToString();

        Global.dc.SaveChanges();

        grdRecords.EditIndex = -1;

        e.Cancel = true;
    } 
```

# javascript - tinymce 文本编辑器中未显示工具栏

> ID：16104762
> 
> 赞同：0
> 
> 时间：2013-04-19T12:37:08.893
> 
> 标签：javascript, tinymce, text-editor

我第一次使用tinymce。我正在按照他们给出的示例进行操作，但它似乎不起作用。我只能看到一个带有圆角的文本框，没有工具栏和按钮。

我应该添加什么才能使其正常工作？这是代码：-

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org /TR/xhtml11            /DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">

<head>
<script type="text/javascript" src="/js/tinymce/tinymce.min.js" ></script >
<script type="text/javascript">
tinyMCE.init({
    mode : "textareas",
    theme : "advanced",
    plugins : "emotions,spellchecker,advhr,insertdatetime,preview", 

    // Theme options - button# indicated the row# only
    theme_advanced_buttons1 : "newdocument,|,bold,italic,underline,|,justifyleft,justifycenter,justifyright,fontselect,fontsizeselect,formatselect",
    theme_advanced_buttons2 : "cut,copy,paste,|,bullist,numlist,|,outdent,indent,|,undo,redo,|,link,unlink,anchor,image,|,code,preview,|,forecolor,backcolor",
    theme_advanced_buttons3 : "insertdate,inserttime,|,spellchecker,advhr,,removeformat,|,sub,sup,|,charmap,emotions",      
    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    theme_advanced_resizing : true
});
</script>

</head>

<body>
    <form>  
    <textarea name="content" cols="50" rows="15" > 
    This is some content that will be editable with TinyMCE.
    </textarea>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:57:10.963

主页上当前下载的是版本 4，仍处于测试阶段。您问题中的文档和语法适用于版本 3.x。版本 4 是一次重大改写，许多旧语法将不再有效。

你有三个选择：

*   下载 3.58 版以与文档一起使用。
    [http://download.moxiecode.com/tinymce/3.5.8/tinymce_3.5.8.zip](http://download.moxiecode.com/tinymce/3.5.8/tinymce_3.5.8.zip)

*   从演示、论坛和他们的小提琴中自己找出新版本。
    [http://fiddle.tinymce.com/](http://fiddle.tinymce.com/)

*   等待版本 4 的稳定版本，因为到那时文档可能会修复。

开始使用第 4 版所需的只是选择器：

```
tinymce.init({
    selector: "textarea"
}); 
```

这将为您提供没有插件的默认选项。如果你看看小提琴，你可以看到一些你可以做的事情。

# jquery - 选择所有孩子并分配随机背景颜色

> ID：16104765
> 
> 赞同：2
> 
> 时间：2013-04-19T12:37:21.677
> 
> 标签：jquery

我正在尝试选择子节点并随机更改每个 div 的背景颜色，以便我可以快速查看页面是如何分解的。我找到了一个不错的小脚本来生成十六进制，但正在努力将其应用于选定的 divs 。

这将返回十六进制值：

```
function random_color() {
var letters = '0123456789ABCDEF'.split('');
var color = '#';
for (var i = 0; i < 6; i++ ) {
    color += letters[Math.round(Math.random() * 15)];
}
return color;
}; 
```

这不是循环遍历孩子并分配随机值。

```
function loop(){
children = $("#container").children();
$(children).each(function(){
    $(this).css("background-color", random_color());
   }    
};

loop(); 
```

只是想我会把这个扔出去。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:40:45.773

你不需要`$`，`children`因为它已经是一个 jquery 对象

```
children.each(function(){
  $(this).css("background-color", random_color());
 });
//^^---here    
}; 
```

**`)`并注意到您在每个...中都错过了一个右括号**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:40:31.317

`children`已经包含所有子元素..

所以使用：

```
function loop(){
children = $("#container").children();
children.each(function(){                  //<----  children instead of $(children)
   $(this).css("background-color", random_color());
 });    
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:40:23.257

试试这个

```
$("#container").children().each(function() {      

     var letters = '0123456789ABCDEF'.split('');
     var color = '#';
      for (var i = 0; i < 6; i++ ) 
       color += letters[Math.round(Math.random() * 15)];
        $(this).css("background-color", color);

}); 
```

或者

```
$("#container").children().each(function() { 
        $(this).css("background-color", random_color());   
}); 
```

或者

```
 children.each(function(){
 $(this).css("background-color", random_color());
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T12:41:18.027

`.children()`已经返回一个 jquery 对象，因此请替换以下行：

```
$(children).each(function(){ 
```

对于这个：

```
children.each(function(){ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T12:42:45.930

首先...您可以只使用 children.each 而无需包装 $()。其次...你的 div 样式了吗？我的意思是，他们有 with's 和 height's 吗？

# php - 将 laravel 上传到虚拟主机

> ID：16104767
> 
> 赞同：0
> 
> 时间：2013-04-19T12:37:24.410
> 
> 标签：php, laravel, laravel-3

当我想使用框架 laravel 上传所有应用程序时，我感到很困惑。在我想直接访问的主机中：

> www.mydomain.com

（没有/public）请帮助我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:41:47.283

根据[安装说明](http://laravel.com/docs/install#installation)，您必须将虚拟主机指向公用文件夹，例如：

```
<VirtualHost *:80>
    DocumentRoot /Users/JonSnow/Sites/MySite/public
    ServerName mysite.dev
</VirtualHost> 
```

如果您不使用虚拟主机并且只是指定`DocumentRoot`您将执行以下操作：

```
DocumentRoot "/var/www/public" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:41:50.927

你在使用共享主机吗？一些主机只允许您访问 Web 根目录（从不理想）。

如果是这样，一个 hacky 解决方法是使用 .htaccess 文件将 web-root 重定向到 web-root/public，但这不是放置框架的好地方。

未经测试，但这样的事情应该可以工作：

```
# Send user to /public/
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^(.*)$ /public/$1 [NC] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T18:03:32.167

共享主机的另一种选择是将所有内容放在“public_html”文件夹之外，然后将“public”的内容放入“public_html”。然后，您只需要更新`$paths['public'] = 'public';`到`$paths['public'] = 'public_html';`根目录下的 paths.php 文件中。

# json - 将数据从控制器传递到视图以构建绘图

> ID：16104775
> 
> 赞同：1
> 
> 时间：2013-04-19T12:37:38.137
> 
> 标签：json, asp.net-mvc-4, morris.js

我对 web 应用程序和 javascript、jquery、json、knout 等世界有点陌生。我试图做一些真正简单但没有开始工作的事情。我想将数据从控制器传递到视图以使用 morris.js 构建绘图。

我谷歌它并尝试了几次尝试，没有成功。

视图收到类似这样的信息来构建图形：

```
<script>
    new Morris.Line({
    // ID of the element in which to draw the chart.
    element: 'myfirstchart',
    // Chart data records -- each entry in this array corresponds to a point on
    // the chart.
    data: [
    { year: '2008', value: 20 },
    { year: '2009', value: 10 },
    { year: '2010', value: 5 },
    { year: '2011', value: 5 },
    { year: '2012', value: 20 }
    ],
    // The name of the data record attribute that contains x-values.
    xkey: 'year',
    // A list of names of data record attributes that contain y-values.
    ykeys: ['value'],
    // Labels for the ykeys -- will be displayed when you hover over the
    // chart.
    labels: ['Value']
});
</script> 
```

现在我想使用 viewbag 或其他东西从控制器发送数据。对于我理解的 JSON 是最正确的方法，只是不知道如何使用它。

你能告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T12:51:37.333

您可以拥有一个代表您的数据的视图模型，然后在您的控制器中构建它的集合。然后，您可以通过 ajax 调用它并将其作为 json 对象返回。

视图模型

```
public class YearlyStat {
    public int Year {get;set;}
    public int Value {get;set;}
} 
```

像这样在控制器中构建数据：

```
public ActionResult Statistics() {
    // most probably the values will come from a database
    // this is just a sample to show you 
    // that you can return an IEnumerable object
    // and it will be serialized properly
    var stats = new List<YearlyStat> {
        new YearlyStat { Year=2008, Value=20},
        new YearlyStat { Year=2009, Value=10},
    }
    return Json(stats,JsonRequestBehavior.AllowGet);
} 
```

然后像这样消费它：

```
$.get('@Url.Action("Statistics")', function(result){
    new Morris.Line({
        data: result,
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:50:06.983

您可以使用 .ajax 从控制器中检索数据，并在脚本中使用它。您不能在客户端的 javascripts 中使用 ViewBag。

您可以使用 jquery 从客户端获取请求：

```
<script>
   $(function() {
     $.get('@Url.Action("GetDataForPlot")', function(response) {
       // put your code for drawing plot
       // response is your data from controller to use in plot
     });
   });
</script> 
```

和控制器

```
public ActionResult GetDataForPlot() {
    var data= new List<Stats> {
        new Stats{ Year=2010, Value=50},
        new Stats{ Year=2011, Value=100},
        new Stats{ Year=2012, Value=150},
    }
    return Json(data, JsonRequestBehavior.AllowGet);
} 
```

# iphone - 子类 UITableViewCell 中的 UIProgressview 需要在其他 UIViewController 中使用

> ID：16104777
> 
> 赞同：2
> 
> 时间：2013-04-19T12:37:41.043
> 
> 标签：iphone, ios, ios6, uitableview

我有一个子类 custom `UITableViewCell`，我在其中插入了一个进度视图。

方法如下：

```
-(void)layoutSubviews {
    applicationDelegate = [[UIApplication sharedApplication] delegate];
    [super layoutSubviews];
    self.imageView.frame = CGRectMake(0, 0, self.frame.size.height, self.frame.size.height);

        self.textLabel.frame = CGRectMake( self.imageView.frame.size.width + 20, self.textLabel.frame.origin.y, self.textLabel.frame.size.width, self.textLabel.frame.size.height);
        progressView = [[UIProgressView alloc] initWithProgressViewStyle:UIProgressViewStyleDefault];
        progressView.frame = CGRectMake(self.textLabel.frame.origin.x, 50, 150, 100);
        progressView.progress = 0.0f;
        progressView.trackTintColor = [UIColor clearColor];
        progressView.progressTintColor = [UIColor redColor];
        progressView.tag = 101;
        [progressView setHidden:YES];
        [self.contentView addSubview:progressView];
} 
```

现在，当在其他视图控制器中我只想在第一个单元格中显示这些元素时，我试图将这些元素隐藏在其他单元格中。这是我尝试在方法中执行此操作的`cellForRowAtIndexPath:`方法：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString * cellIdentifier = @"cellId";

    CustomCell * cell = [self.tableview dequeueReusableHeaderFooterViewWithIdentifier:cellIdentifier];

    if (cell == Nil) {

        cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
    }

if (indexPath.row == 0) {

            imageData = UIImageJPEGRepresentation(cell.imageView.image, 100);
            filename = cell.textLabel.text;

            [(UIProgressView*)[cell.contentView viewWithTag:101] setHidden:NO];<==Not Working
}

    return cell;
} 
```

如何在我的 ViewController 的自定义 UITableView 子类中使用这个 UIElements？我没有使用 xib 文件，一切都是以编程方式完成的。我已经在这附近玩了一整天了，有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:50:14.950

如果只有第一行需要显示进度视图，为什么不只对行使用自定义单元格`0`，然后`UITableViewCell`对行使用标准`>1`？

我还建议在方法中添加`progressView`to而不是在. 旨在定位您已经拥有的视图（而不是添加新视图），因为它可以在单元格的生命周期内多次调用。`self.contentView``init``layoutSubviews``layoutSubviews`

* * *

我会在自定义单元格中添加一个 BOOL 属性，以确定是否应该显示进度指示器（并在设置为 NO 时将其删除）。在 cellForRowAtIndexPath: 中，您可以为给定的行适当地设置它。

在`CustomCell.h`：

```
@property(nonatomic, assign) BOOL shouldShowProgressView; 
```

在`CustomCell.m`：

```
- (void)setShouldShowProgressView:shouldShowProgressView {
     _shouldShowProgressView = shouldShowProgressView;

     if (shouldShowProgressView) {
           if (self.someProgressView == nil) {
                // add your progress view from scratch
           }

           [self.contentView addSubview:self.someProgressView];

     } else {
           [self.someProgressView removeFromSuperview];
     }
} 
```

在您的表控制器中：

```
- (UITableViewCell*)tableView:(UITableView*)tableView cellForRowAtIndexPath:(NSIndexPath*)indexPath {
    static NSString *cellIdentifier = @"cellId";
    CustomCell *cell = [self.tableview dequeueReusableHeaderFooterViewWithIdentifier:cellIdentifier];

    if (cell == Nil) {
        cell = [[CustomCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:cellIdentifier];
    }

    if (indexPath.row == 0) {
         cell.shouldShowProgressView = YES;

    } else {
         cell.shouldShowProgressView = NO;
    }

    return cell;
} 
```

# cakephp - CakePHP：在 AppController beforeFilter 中取消设置请求（发布）数据

> ID：16104778
> 
> 赞同：0
> 
> 时间：2013-04-19T12:37:42.740
> 
> 标签：cakephp, cakephp-2.0

我通过 POST 表单将特定值发布到我的 CakePHP 应用程序。在 AppController 中我处理这个特定的 POST 数据，然后我取消设置 $this->request->data，例如

```
 if(!empty($this->request->data['Keyboard'])) {
        $this->Session->write('Keyboard.active', $this->request->data['Keyboard']['active']);
        unset($this->request->data);
    } 
```

之后我希望所有请求数据都被取消设置（因此`$this->request->data`）。在我的子控制器中，我调用`parent::beforefilter();`其各自`beforeFilter`函数中的第一行代码，确保启动`beforeFilter`my `appController`。但是，在我的 childController 中，以下代码行仍将评估为 true：

```
if($this-request->is('post')) 
```

如何“取消” is('post') 调用？我也在上面尝试过`$this->request->is('post') = false`，`if-statement`但是没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:44:44.657

The "problem" with `$this->request->is($anything)` (in your case at least) is that it is just a function to compare variables, not a setter.

Here's the [API code](http://api.cakephp.org/2.0/source-class-CakeRequest.html#427-457) in case you want to check it out.

So, basically, this code compares the variable `env('REQUEST_METHOD')` to `POST` (that's in the [detectors](http://api.cakephp.org/2.0/source-class-CakeRequest.html#88-112) part of the code).

There's no way a `$this->request->is('post') = false` is going to work. Something like

```
$_ENV["REQUEST_METHOD"] = null;
//or
unset($_ENV["REQUEST_METHOD"]); 
```

after you unset the request data might work, but I don't guarantee anything because I haven't tried it.

I feel this approach is very dirty, I don't like to mess with those variables at all if there's no function already available for it, but I expect you to have considered all possible choices to avoid messing with the `request` already and see this as the only solution. Otherwise you should post another question addressing this subject and see if better approaches come up.

Hopes it helps in your case.

# trigger.io - 每日签到 Trigger.io 移动应用程序

> ID：16104782
> 
> 赞同：1
> 
> 时间：2013-04-19T12:37:55.313
> 
> 标签：trigger.io

我想在我的应用程序中编写一个功能，每天检查本地数据（在指定时间，例如下午 12:00），并在需要时发出警报。真的，我想要类似Node.js中的[setTimeout()的东西。](http://nodejs.org/api/timers.html#timers_settimeout_callback_delay_arg)

Trigger.io 的 API 是否为我提供了一种“背景”小检查或在特定时间触发事件的方法？通过操作系统的东西，这样应用程序就不必一直运行？

我已经搜索了 API，但可能使用了错误的术语（作为非移动开发人员）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T14:38:17.167

目前不支持此功能，主要是因为它难以在 Android 和 iOS 之间提供一致的体验。

此类问题的常见解决方案是在远程服务器上执行检查，然后在需要时使用推送通知通知用户。（见[http://docs.trigger.io/en/v1.4/partners/parse.html#partner-parse](http://docs.trigger.io/en/v1.4/partners/parse.html#partner-parse)）

在设备上执行此操作很困难的原因是，在 iOS 上，您不能只在后台运行代码，可以在特定时间向用户发送通知，但必须提前设置此通知。

# java - Java的ServiceLoader和测试资源

> ID：16104786
> 
> 赞同：7
> 
> 时间：2013-04-19T12:38:02.873
> 
> 标签：java, hibernate, jpa, service, serviceloader

我有一个 Web 应用程序，它将 Hibernate Integrator 定义为 Java ServiceLoader 规范的一部分，如下所示：

**src/main/resources/META-INF/services/org.hibernate.integrator.spi.Integrator**

```
 # Define integrators that should be instantiated by the ServiceLoader
  org.emmerich.MyIntegrator 
```

这是根据[此处](http://docs.jboss.org/hibernate/orm/4.0/devguide/en-US/html/ch07.html#services-IntegratorService)的 Hibernate 指南完成的。

我的问题是，当我尝试执行单元测试时，主 Integrator 描述符仍然被解析和实例化。这意味着，因为我在单元测试中模拟了大部分应用程序，所以当集成器尝试运行它时会遇到导致我的测试失败的错误。

我在测试资源中定义了相同的文件：

**src/test/resources/META-INF/services/org.hibernate.integrator.spi.Integrator**

```
 # Empty file to try and overwrite the main deployment description. 
```

但相反，我发现测试和主集成器文件都被解析了。

我预计测试资源会覆盖主要资源，从而使主要资源过时，但事实并非如此。由于这两个文件都在类路径上（我通过 Maven 使用 surefire-plugin 运行测试，该插件将两者都`test-classes`放在`classes`类路径上）。类似的事情发生在`persistence.xml`.

在我的单元测试环境中，我不希望实例化任何 Integrator，因为我想尽可能手动地控制这些 bean 的构造。假设我正在测试执行单元，我不希望出现其他可能影响测试运行的 bean，例如 Integrator。我认为这是单元测试期间完全合法的要求。但是，虽然主要资源仍由 解析`ServiceLoader`，但这是不可能的。

我来做的解决方案是基于`persistence.xml`这里发布的解决方案：

[如何配置 JPA 以在 Maven 中进行测试](https://stackoverflow.com/questions/385532/how-to-configure-jpa-for-testing-in-maven)

我的问题是，在单元测试期间是否有比强制重命名更好的方法来排除主要资源的处理，尤其是在`ServiceLoader`文件的上下文中？

尝试更好地总结一下：

当您在类路径上有两个文件都以相同的服务接口命名时会发生什么？对我来说，似乎两个文件中的所有服务都被实例化了。似乎没有覆盖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T16:11:02.480

对于那些感兴趣的人，更多的调查会导致这实际上并不是 Hibernate 的问题，而是更多的`ServiceLoader`文件加载方式。从[API](http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html)：

> 如果一个特定的具体提供者类在多个配置文件中被命名，或者在同一个配置文件中被命名不止一次，那么重复的将被忽略。

不幸的是，这只适用于具体的类。因此，如果我在表单中指定同一文件的两个副本：

**org.emmerich.MyServiceInterface**

```
 org.emmerich.MyServiceImpl 
```

then`MyServiceImpl`只实例化一次。但是，如果我用两个不同的实现类指定两个文件，那么这两个实现都会被实例化。

这对于您希望更好地控制服务的实例化位置的单元测试来说并不是很好。我对它背后的设计决策知之甚少，但是 Hibernate 对它的使用使得单元测试变得更加困难。

无论如何，我想出的解决方案是将主要资源的覆盖委托给我可以控制的文件，比如`properties`文件。在服务内部，我现在检查该属性文件中的标志是真还是假。在我的主要资源中，这是真的。在我的测试中，这是错误的。因为查找属性会命中类路径上的第一个文件，所以我知道它将获得测试资源。我的结构如下所示：

```
src
  main
    resources
      META-INF
        services
          org.hibernate.integrator.spi.Integrator # has line MyIntegrator
    application.properties     # shouldIntegrate=true 
  test
    resources
      application.properties   # shouldIntegrate=false 
```

并在`MyIntegrator`：

```
public class MyIntegrator implements Integrator {

  @Override
  public void integrate(Configuration configuration, SessionFactoryImplementor sessionFactory, SessionFactoryServiceRegistry serviceRegistry) {
    if(shouldIntegrate()) {
      // do integration
    }
  }

  private boolean shouldIntegrate() {
    // read Properties file from classpath
    // getClass().getClassLoader().getResourceAsStream("application.properties")
    // return value of "shouldIntegrate"
  } 
```

当我在测试环境中运行时，属性文件查找指向测试资源。在测试环境之外，它指向主要资源。

# macos - Codesign (OSX)：如何修复“未知错误 -1009”？

> ID：16104790
> 
> 赞同：0
> 
> 时间：2013-04-19T12:38:13.327
> 
> 标签：macos, codesign

我已经工作的命令行调用`codesign`：

```
codesign -s <user> /path/to/app 
```

突然停止工作并输出：

```
<app>: unknown error -1009=fffffffffffffc0f 
```

什么可能导致这种情况以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:39:50.817

DNS 服务器配置不正确，因为机器已移动到另一个位置。修复网络设置后，它又开始工作了。

# office-2013 - 无法添加对 Word 2013 互操作程序集的引用

> ID：16104792
> 
> 赞同：1
> 
> 时间：2013-04-19T12:38:17.433
> 
> 标签：office-2013, office-pia

我有一个现有的 .Net 应用程序，它可以完成一些 Word 互操作工作。在我安装了 Word 2010 的一台机器上，我可以毫无问题地引用 Word PIA (Microsoft.Office.Interop.Word)，编译、运行 - 一切都很好。现在，我正在尝试针对 Word 2013 进行测试，以确保我的应用程序与其兼容。所以在另一台只安装了 Office 2013（没有其他 Office 实例）的机器上，我尝试构建相同的源代码，但由于 VS2010 找不到 Word PIA，所以出现编译错误。我尝试更新 PIA 的引用，但它没有显示在可用程序集列表中。

我检查了我的 Office 安装 - 每个可用组件都已安装，包括 Word 的 .Net Programmability Support。我在 Windows 资源管理器中查看了 GAC，程序集似乎在那里。我尝试重新启动多次。

我的应用程序以 .Net Framework 3.5 为目标（但我也尝试将其更改为 4.0）。我正在使用 VS2010 Professional，并且我在盒子上安装了 Office Professional Plus 2013。我能错过什么？

谢谢。

# shell - 如何使用 shell 脚本将目录中的文件复制到另一个目录

> ID：16104800
> 
> 赞同：0
> 
> 时间：2013-04-19T12:38:51.287
> 
> 标签：shell, unix

我有很多目录，例如 Tmp/a-1,a-2...直到 a-1000。
每个 TMP 目录都包含名为 log 的文件。
因此我必须进入每个目录并将名为 log 的文件更改为 log_orig。
如何通过脚本做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:44:33.397

`find -name log -type f -exec mv {} {}_orig \;`会做（只要您`log`在其他目录中没有您不想触摸的文件）

# iphone - Facebook 和 Twitter iOS 5 和 6 的简单帖子

> ID：16104805
> 
> 赞同：6
> 
> 时间：2013-04-19T12:39:08.127
> 
> 标签：iphone, ios, objective-c, facebook, twitter

我目前正在实现一个发布到社交网站的简单按钮（让我的应用有点曝光，你知道的练习）。然而，我对所有这些社交网络的东西有点困惑。一方面，我知道 iOS 6 为 FB 和 Twitter ( `Social.framework`) 提供了一个非常好的框架，但对于 iOS 5，它有点不同。iOS 6，我想我已经想通了……然而，当我们进入 iOS 5 时，我发现它有点奇怪。据我了解，Twitter 已经集成到 iOS 5 中，可以使用`Twitter.framework`和`Account.framework`框架访问。我没有得到的是为了支持 Twitter 的 5 和 6，我必须使用`Social.framework`，`Twitter.framework`并`Account.framework`支持一切吗？即两种不同的方法取决于 iOS 版本。或者，如果我使用最新的 SDK，iOS 5 twitter 是否可以使用`Social.framework`? 那个推特涵盖了。

现在对于 Facebook，我如何在 iOS 5 中发帖？即使我使用最新的 SDK 构建应用程序，我也很确定`Social.framework`它不会在 iOS 5 中工作。因此，我认为不可避免地我将不得不根据安装的 iOS 版本运行两种不同的方法。那是对的吗？如果是这样，我该如何将 FB 集成到 iOS 5 中？我必须使用 Facebook 提供的 SDK 吗？

所以总结一下我的问题，如果这一切有点罗嗦。

1) 我可以将 Twitter 发布合并到我的应用程序中，仅使用`Social.framework`iOS 5 和 6，还是我必须使用`Social.framework`（iOS 6）的一种方法，然后使用`Twitter.framework`和`Account.framework`（iOS 5）的另一种方法？

2) 我可以`Social.framework`在 iOS 6 中使用 Facebook，但不能在 iOS 5 中使用，因此，我必须执行两种单独的方法，一种使用`Social.framework`(iOS 6)，另一种使用 FB SDK (iOS 5)，对吗？

在此先感谢，
问候，
迈克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T13:33:32.180

1)`Social.Framework`仅在 iOS6+ 上可用，因此您必须在两个框架之间进行拆分（或者`Twitter.Framework`即使某些方法在 iOS6 上已弃用，您也只能使用）

2）您可以在 iOS5 和 iOS6 上使用 Facebook SDK（我写这个答案时 iOS 的最新版本是[3.5](https://developers.facebook.com/docs/reference/ios/3.5)）。Facebook SDK 已经负责在 iOS6 上使用用户的 Facebook 帐户或在手机中尚未配置帐户时依赖 iOS5 或 iOS6 上的 Facebook 应用程序

# gwt - 使用 Elemental 的 GWT Websockets

> ID：16104821
> 
> 赞同：1
> 
> 时间：2013-04-19T12:39:52.290
> 
> 标签：gwt, websocket, gwt-elemental

我想在 GWT Web 应用程序中使用 websockets 技术。

我知道有一些使用 Commet 和 Atmospere 的实现，但我想避免它们，因为它们实际上是对服务器的长期 HTTP 请求。

我有自己的 Web 套接字实现，我想知道是否有人知道客户端库或我可以实现在客户端/服务器与 Web 套接字之间进行通信的方式。更具体地说，我听说 GWT **Elemental**包提供了这种功能。我对此进行了研究（谷歌搜索），但找不到任何具体内容。

有人能指出我正确的方向吗？**除了GWT Elemental**之外的任何建议都受到欢迎。

编辑：我发现了下面的链接，它是 GWT-Elemental 界面。我可以看到它是 ReleaseCandidate 版本，但我愿意尝试使用该功能。因此，如果有人在我想知道他/她的评论/建议之前使用过它。

[http://grepcode.com/file/repo1.maven.org/maven2/com.google.gwt/gwt-elemental/2.5.1-rc1/elemental/html/WebSocket.java?av=f](http://grepcode.com/file/repo1.maven.org/maven2/com.google.gwt/gwt-elemental/2.5.1-rc1/elemental/html/WebSocket.java?av=f)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T08:47:57.297

好吧，我还没有使用`Websockets`过API，但它运行良好`Elemental`。 但是，您必须考虑到这是高度实验性的。由于库是自动生成的，因此 Webkit 的 IDL 中的一些规范已更改，因此无法正常工作。 因此，您可能需要找到解决方法等。 `FileReader`
`Elemental``Elemental`

使用`Elemental`非常简单。您通常使用`Browser`或`Window`从包中获取要使用的类的实例。像这样的东西：

```
Window window = Browser.getWindow();
WebSocket webSocket =  window.newWebSocket(URL);
webSocket.setOnmessage(new EventListener() ....);
websocket.send(); 
```

# ruby-on-rails - 如何使用基于语言的视图和模板？

> ID：16104825
> 
> 赞同：1
> 
> 时间：2013-04-19T12:39:57.357
> 
> 标签：ruby-on-rails, ruby, localization, internationalization, high-voltage

我正在使用[`high_voltage`](https://github.com/thoughtbot/high_voltage)创建多个登录页面。

**结构**

```
app
  views
    pages
      home.html.erb
      about.html.erb 
```

我希望能够以简单的方式根据不同的视图模板使用`session[:locale]`

我想到了这样的结构：

```
app
  views
    pages
      en
        home.html.erb
      es
        home.html.erb 
```

但是如何在 PagesController 中呈现正确的模板呢？

我不想为此使用 Rails 国际化（I18n）gem。

我正在`I18n.locale`使用`set_language_controller`. 来源： http: [//xyzpub.com/en/ruby-on-rails/3.2/i18n_mehrspra​​chige_rails_applikation.html](http://xyzpub.com/en/ruby-on-rails/3.2/i18n_mehrsprachige_rails_applikation.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T13:07:53.543

只需将文件命名为：

```
app
  views
    pages
      home.html.en.erb
      home.html.es.erb
      about.html.en.erb
      about.html.es.erb 
```

# java - 字体更改在android中重新启动应用程序

> ID：16104830
> 
> 赞同：3
> 
> 时间：2013-04-19T12:40:06.793
> 
> 标签：java, android

当我在 android 设备上更改系统字体时，我的应用程序正在重新启动（不仅仅是当前活动）。我确信这一点，因为 pid 本身是不同的。

有什么方法可以防止应用程序重启？

这个问题与： [Handle runtime activity configuration when font change](https://stackoverflow.com/questions/5894126/handle-runtime-activity-configuration-when-font-change)

如那里所述，没有可用于处理系统字体更改的 configChanges 属性（fontScale 仅适用于字体大小更改）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T12:44:15.773

您应该在您的`manifest`. 但是您必须自己处理配置更改。`android:configChanges="fontScale"`

[处理运行时更改](http://developer.android.com/guide/topics/resources/runtime-changes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:43:13.283

我认为这与更改手机方向时相同。活动重新开始。您可以根据需要通过覆盖`protected void onSaveInstanceState(Bundle savedInstanceState)`和来存储信息`protected void onRestoreInstanceState(Bundle savedInstanceState)`。

更多信息和示例可以在本指南中找到：http: [//developer.android.com/training/basics/activity-lifecycle/recreating.html](http://developer.android.com/training/basics/activity-lifecycle/recreating.html)

# jquery - jQuery 查找 id=myid 的位置

> ID：16104834
> 
> 赞同：0
> 
> 时间：2013-04-19T12:40:19.097
> 
> 标签：jquery, search, if-statement, find

需要检查元素是否`myid` 存在。

这是一些伪代码：

```
if (myid exists)
{ 
    //do something.
}
else
{
    //do something else.
} 
```

我将如何在 jquery 中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:41:55.737

只需使用 jQuery ID 选择器和`.length`属性：

```
if( $( '#myId' ).length > 0 ) {
  // id exists
} else {
  // id does not exist
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:43:07.420

你可以这样做

```
if( $('#myid').length) ){ // element exists } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:42:10.843

您可以使用`length`：

```
if($("#myid").length) {
    //true
    do something.  
} else {
    //false
    do something else.  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T12:42:14.157

尝试这个...

```
if ($("#" + myid).length) {
    // exists
} else {
    // doesn't exist
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T12:42:28.010

```
if($("#" + id).length > 0) {
} else {
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T12:42:35.620

```
if($("#myid").length == 0) {
   do something else //does not exist
} else {
   do something
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-19T12:42:58.840

```
if ($("#" + myid).length > 0) {

} 
```

或者干脆

```
if($("#" + myid).length) {

 } 
```

# jsf - 默认情况下，如何按字母顺序对 Primefaces 中的选项列表进行排序？

> ID：16104839
> 
> 赞同：-2
> 
> 时间：2013-04-19T12:40:32.030
> 
> 标签：jsf, sorting, primefaces

默认情况下，我需要按字母顺序对选项列表中的选择进行排序。

如何在我的 JSF 中完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:12:14.767

Primefaces Picklist 组件没有“order”属性，因此您无法在 View（您的 jsf 页面）中完成此操作。

但是，您可以在托管 bean 端对列表进行排序。这是来自[陈列室](http://www.primefaces.org/showcase/ui/picklist.jsf)

```
<p:pickList id="pickList" value="#{pickListBean.cities}" var="city" itemLabel="#{city}" itemValue="#{city}" /> 
```

以下来自豆类

```
List<String> citiesSource = new ArrayList<String>();  
List<String> citiesTarget = new ArrayList<String>();  

citiesSource.add("Istanbul");  
citiesSource.add("Ankara");  
citiesSource.add("Izmir");  
citiesSource.add("Antalya");  
citiesSource.add("Bursa");  

cities = new DualListModel<String>(citiesSource, citiesTarget); 
```

如果在初始化 DualListModel 之前对“源”进行排序，则可以在选项列表组件上看到排序列表

```
List<String> sortedCities = Collections.sort(citiesSource);
cities = new DualListModel<String>(sortedCities , citiesTarget); 
```

# java - Eclipse，更改编译器命令（用于 JOMP）

> ID：16104841
> 
> 赞同：3
> 
> 时间：2013-04-19T12:40:40.407
> 
> 标签：java, eclipse, openmp

我想使用 JOMP API（相当于 C 中的 OpenMP），但遇到了一些问题：

这是我要运行的代码：

```
import jomp.runtime.*;
public class Hello
{
    public static void main (String argv[])
    {
        int myid;
        //omp parallel private(myid)
        {
            myid = OMP.getThreadNum();
            System.out.println("Hello from " + myid);
        }
    }
} 
```

这只是一个问候世界，但我的编译器有问题。请快速浏览此页面以了解： [http ://www2.epcc.ed.ac.uk/computing/research_activities/jomp/download.html](http://www2.epcc.ed.ac.uk/computing/research_activities/jomp/download.html)

但我不能，我不明白它是如何工作的......我只能用eclipse默认编译器（我猜）编译它，然后我只有一个线程！

我知道我必须使用 java jomp.compiler.Jomp MyFile 编译此代码（在 .jomp 文件中），然后正常编译，但我不能在终端中的 ecplise 中执行此操作（我不知道如何安装此编译器！）

ps：我在 Intel® Core™ i7-3610QM CPU @ 2.30GHz × 8 上使用 Ubuntu 12.04。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:02:17.283

您只需将 JOMP 参数添加到启动配置中，此示例可以帮助您：

[JOMP 日食解决方法](http://www.lst.inf.ethz.ch/teaching/lectures/ss10/24/assignments/assignment_10/eclipse.txt)

# java - 从数据表链接到查看记录，渲染视图页面时数据丢失

> ID：16104845
> 
> 赞同：0
> 
> 时间：2013-04-19T12:40:56.087
> 
> 标签：java, jsf-2, richfaces

我有一个用例，其中我有一个使用数据表显示的用户列表。

我已经针对每条记录生成了编辑和查看链接。

我想要做的是，一旦我点击查看链接，一个单独的页面应该包含用户的详细信息。

```
<h:commandLink action="#{profile.goToViewPage(profileVar.profileId)}" value="view" /> 
```

因此这些值会正确传递给 Bean。

```
@Named("profile")
@Scope("view")
public class ProfileDTO {

    private String firstName;
    private String lastName;
    private Date dob;

    //Getters and Setters

    private void getUser(String selectedProfile) {
        this.setDob(new Date());
        this.setFirstName("Tested from Page First");
        this.setLastName("Test from Page Last");
    }

public String goToViewPage(String selectedProfile) {
        LOG.debug("Goto View Page called for user id : {}", selectedProfile);
        getUser(selectedProfile);
        return "pretty:viewprofile";    //Using prettyfaces
    }
} 
```

viewPage xhtml 类似于：

```
<rich:collapsiblePanel header="Basic Details" switchType="client" expanded="true">
<h:panelGroup styleClass="align-table-center-horizontal" layout='block'>
    <h:column>
    <h:panelGrid columns="2" style="width:100%;" columnClasses="right-column half-width,left-column half-width">
            <h:column>
            <h:outputText styleClass="headerText" value="First Name" />
        </h:column>
        <h:column>
            <h:inputText value="#{profile.firstName}" />
        </h:column>
        <h:column>
            <h:outputText styleClass="headerText" value="Last Name" />
        </h:column>
        <h:column>
            <h:inputText value="#{profile.lastName}" />
        </h:column>
</h:panelGrid>
</h:column>
</h:panelGroup>
</rich:collapsiblePanel> 
```

我用来显示列表的 bean 在会话范围内。

问题：方法获取“goToViewPage”被调用并设置了虚拟数据，但后来再次调用构造函数并且所有数据都丢失了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T15:54:34.740

好的，我发现了问题。更少的 jsf 和更多的漂亮面孔。问题已解决，使用查询参数并重新构建对象以供显示。

```
<url-mapping id="viewprofile">
    <pattern value="/a" />
    <view-id value="/a/b.jsf" />
    <query-param name="id">#{bean.id}</query-param>
    <action>#{bean.loadViewPageData}</action>
</url-mapping> 
```

使用漂亮的面孔配置，设置将在请求重定向后调用的操作方法。

# c++ - OpenGL _ Front 对象被 Back 对象覆盖。所以看不到

> ID：16104846
> 
> 赞同：4
> 
> 时间：2013-04-19T12:40:59.963
> 
> 标签：c++, opengl

[![在此处输入图像描述](https://i.stack.imgur.com/eNguf.png)](https://i.stack.imgur.com/eNguf.png)

问题是，“桌子上的东西被桌板盖住了，所以看不见。”

（我使用openGL 3.7 beta。我安装的文件是：http: [//ihoo1836.dothome.co.kr/opengl_vs2010+glutdlls37beta.zip](http://ihoo1836.dothome.co.kr/opengl_vs2010+glutdlls37beta.zip) ）

所有代码如下。

```
#include<glut.h>
#include<stdio.h>
#include<stdlib.h>
#include<time.h>

float TableX = 5.0; //Table's X size
float TableY = 8.0; //Table's Y size
float TableHeight = 2.0;//Table's Height

int width=400, height=400;  //Window Size

int ViewX = width/2;        //for Change Viewpoint by Mouse position 
int ViewY = height/2;
int ViewZ = 9;

GLUquadricObj* cyl;

void InitLight( ){
    glEnable(GL_DEPTH_TEST);    //for opaque
    glEnable(GL_NORMALIZE);     //normalize
    glEnable(GL_SMOOTH);        //for smooth color
    glEnable(GL_LIGHTING);  //light setting
    glDepthMask(GL_TRUE);

    GLfloat ambientLight[] = {0.3f, 0.3f, 0.3f, 1.0f};
    GLfloat diffuseLight[] = {0.7f, 0.7f, 0.7f, 1.0f};
    GLfloat specular[] = {1.0f, 1.0f, 1.0f, 1.0f};
    GLfloat specref[] = {1.0f, 1.0f, 1.0f, 1.0f};
    GLfloat position[]={400.0, 300.0, -700.0, 1.0};

    glLightfv(GL_LIGHT0, GL_AMBIENT, ambientLight);
    glLightfv(GL_LIGHT0, GL_DIFFUSE, diffuseLight);
    glLightfv(GL_LIGHT0, GL_SPECULAR, specular);
    glLightfv(GL_LIGHT0, GL_POSITION, position);

    glEnable(GL_LIGHT0);
    glEnable(GL_COLOR_MATERIAL);

    glColorMaterial(GL_FRONT, GL_AMBIENT_AND_DIFFUSE);
    glMateriali(GL_FRONT, GL_SHININESS, 128);
}

//Get Mouse Position to Change ViewPoint
void MyMouseMove(int button, int state, GLint X, GLint Y)
{
    //Get Mouse Position X, Y
    ViewX = X;
    ViewY = Y;

    glutPostRedisplay();
}

//Get Mouse Position to Change ViewPoint
void MyMotion(GLint X, GLint Y)
{
    //Get Mouse Position X, Y
    ViewX = X;
    ViewY = Y;

    glutPostRedisplay();
}

//Draw Table
void DrawTable(){
    glPushMatrix();
    glTranslatef(0.0,0.0,1.0);
    glColor3f(0.5, 0.25, 0.0);
    cyl = gluNewQuadric();
    glRotatef(-90,1.0,0.0,0.0);
    gluCylinder(cyl, 0.2, 0.2, TableHeight, 10, 20); //Leg of Table 1
        glPushMatrix();
        cyl = gluNewQuadric();
        glTranslatef(TableX,0.0,0.0);
        gluCylinder(cyl, 0.2, 0.2, TableHeight, 10, 20); //Leg of Table 2
            glPushMatrix();
            cyl = gluNewQuadric();
            glTranslatef(0.0, TableY, 0.0);
            gluCylinder(cyl, 0.2, 0.2, TableHeight, 10, 20); //Leg of Table 3
                glPushMatrix();
                cyl = gluNewQuadric();
                glTranslatef(-TableX,0.0,0.0);
                gluCylinder(cyl, 0.2, 0.2, TableHeight, 10, 20); //Leg of Table 4
                    glPushMatrix();
                    glTranslatef(TableX/2.0, -TableY/2, TableHeight);
                    glScalef(TableX+0.5, TableY+0.5, 0.5);
                    glutSolidCube(1);                           //Board of Table
                    glPopMatrix();

                    glPushMatrix();                         //triangular1 (Beside of Net)
                    glTranslatef(0, -TableY/2, TableHeight);
                    glBegin(GL_TRIANGLES);
                        glVertex3f(TableY/16.0, 0, TableY/8.0);//1
                        glVertex3f(0, TableY/8.0, 0);
                        glVertex3f(0, -TableY/8.0, 0);
                        glVertex3f(TableY/16.0, 0, TableY/8.0);//2
                        glVertex3f(0, -TableY/8.0, 0);
                        glVertex3f(TableY/16.0, -TableY/8.0, 0);
                        glVertex3f(TableY/16.0, 0, TableY/8.0);//3
                        glVertex3f(TableY/16.0, -TableY/8.0, 0);
                        glVertex3f(TableY/16.0, TableY/8.0, 0);
                        glVertex3f(TableY/16.0, 0, TableY/8.0);//4
                        glVertex3f(TableY/16.0, TableY/8.0, 0);
                        glVertex3f(0, TableY/8.0, 0);
                    glEnd();
                        glPushMatrix();                     //triangular2 (Beside of Net)
                        glTranslatef(TableX - TableY/8.0, 0 , 0);
                        glBegin(GL_TRIANGLES);
                            glColor3f(1.0, 0.0, 0.0);
                            glVertex3f(TableY/16.0, 0, TableY/8.0);//1
                            glColor3f(0.0, 1.0, 0.0);
                            glVertex3f(TableY/16.0, TableY/8.0, 0);                         
                            glColor3f(0.0, 0.0, 1.0);
                            glVertex3f(TableY/16.0, -TableY/8.0, 0);
                            glColor3f(1.0, 0.0, 0.0);
                            glVertex3f(TableY/16.0, 0, TableY/8.0);//2
                            glColor3f(0.0, 1.0, 0.0);
                            glVertex3f(TableY/16.0, -TableY/8.0, 0);
                            glColor3f(0.0, 0.0, 1.0);
                            glVertex3f(TableY/8.0, -TableY/8.0, 0);
                            glColor3f(1.0, 0.0, 0.0);
                            glVertex3f(TableY/16.0, 0, TableY/8.0);//3
                            glColor3f(0.0, 1.0, 0.0);
                            glVertex3f(TableY/8.0, -TableY/8.0, 0);
                            glColor3f(0.0, 0.0, 1.0);
                            glVertex3f(TableY/8.0, TableY/8.0, 0);
                            glColor3f(1.0, 0.0, 0.0);
                            glVertex3f(TableY/16.0, 0, TableY/8.0);//4
                            glColor3f(0.0, 1.0, 0.0);
                            glVertex3f(TableY/8.0, TableY/8.0, 0);
                            glColor3f(0.0, 0.0, 1.0);
                            glVertex3f(TableY/16.0, TableY/8.0, 0);
                        glEnd();
                        glPopMatrix();

                        glPushMatrix();                     //Net
                        glBegin(GL_POLYGON);
                            glColor3f(1.0, 1.0, 1.0);
                            glVertex3f(TableY/16.0, 0.0, TableY/8.0);
                            glVertex3f((TableX - TableY/16.0), 0, TableY/8.0);
                            glVertex3f((TableX - TableY/16.0), 0, 0);
                            glVertex3f(TableY/16.0, 0.0, 0.0);
                        glEnd();

                        glPopMatrix();
                    glPopMatrix();
                glPopMatrix();
            glPopMatrix();
        glPopMatrix();
    glPopMatrix();
}

//Display Callback Function
void MyDisplay( ){
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity( );
    gluPerspective(60.0, (GLfloat)width/height, 0.0, 10.0);

    //Change Viewpoint by Mouse Position
    gluLookAt((float)(ViewX - width/2)/width*20 + 2.5, (float)(height/2 - ViewY)/height*20  + 2.5, ViewZ, TableX/2, TableY/2, TableHeight, 0.0, 1.0, 0.0);

    printf("eyex = %f , eyey = %f , eyez = %f \n",(float)(ViewX - width/2.0)/width*10, (float)(height/2 - ViewY)/height*10, (float)ViewZ);

    DrawTable();    //Draw Table

    glutSwapBuffers();  //for 'Double Buffering'
}

//for Reshape Window
void MyReshape (int w, int h){
    width = w;
    height = h;

    printf("width = %d, height = %d \n", width, height);

    glViewport (0, 0, (GLsizei) w, (GLsizei) h);
    glMatrixMode (GL_PROJECTION);
    glLoadIdentity( );
    glOrtho (-1.0, 1.0, -1.0, 1.0, -1.0, 1.0);
}

//Main Function
int main(int argc, char** argv){
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_SINGLE | GLUT_RGBA | GLUT_DEPTH | GLUT_DOUBLE);
    glutInitWindowSize(width, height);
    glutInitWindowPosition(200, 200);
    glutCreateWindow("OpenGL Sample Drawing");
    glClearColor(0.4, 0.4, 0.4, 1.0);
    InitLight();            //set Light Setting

    glutDisplayFunc(MyDisplay);
    glutMouseFunc(MyMouseMove); //get Mouse Position, to Change Viewpoint
    glutMotionFunc(MyMotion);   //get Mouse Position, to Change Viewpoint
    glutReshapeFunc(MyReshape);
    glutMainLoop( );
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T14:22:16.430

第三个参数`gluPerspective()`应该是非零的，正的，并且小于第四个参数：

```
#include <GL/glut.h>
#include <stdio.h>

float TableX = 5.0; //Table's X size
float TableY = 8.0; //Table's Y size
float TableHeight = 2.0;//Table's Height

int ViewX = 400/2;        //for Change Viewpoint by Mouse position 
int ViewY = 400/2;
int ViewZ = 9;

GLUquadricObj* cyl;

void InitLight( ){
    glEnable(GL_DEPTH_TEST);    //for opaque
    glEnable(GL_NORMALIZE);     //normalize
    glEnable(GL_SMOOTH);        //for smooth color
    glEnable(GL_LIGHTING);  //light setting
    glDepthMask(GL_TRUE);

    GLfloat ambientLight[] = {0.3f, 0.3f, 0.3f, 1.0f};
    GLfloat diffuseLight[] = {0.7f, 0.7f, 0.7f, 1.0f};
    GLfloat specular[] = {1.0f, 1.0f, 1.0f, 1.0f};
    GLfloat specref[] = {1.0f, 1.0f, 1.0f, 1.0f};
    GLfloat position[]={400.0, 300.0, -700.0, 1.0};

    glLightfv(GL_LIGHT0, GL_AMBIENT, ambientLight);
    glLightfv(GL_LIGHT0, GL_DIFFUSE, diffuseLight);
    glLightfv(GL_LIGHT0, GL_SPECULAR, specular);
    glLightfv(GL_LIGHT0, GL_POSITION, position);

    glEnable(GL_LIGHT0);
    glEnable(GL_COLOR_MATERIAL);

    glColorMaterial(GL_FRONT, GL_AMBIENT_AND_DIFFUSE);
    glMateriali(GL_FRONT, GL_SHININESS, 128);
}

//Get Mouse Position to Change ViewPoint
void MyMouseMove(int button, int state, GLint X, GLint Y)
{
    //Get Mouse Position X, Y
    ViewX = X;
    ViewY = Y;

    glutPostRedisplay();
}

//Get Mouse Position to Change ViewPoint
void MyMotion(GLint X, GLint Y)
{
    //Get Mouse Position X, Y
    ViewX = X;
    ViewY = Y;

    glutPostRedisplay();
}

//Draw Table
void DrawTable(){
    glPushMatrix();
    glTranslatef(0.0,0.0,1.0);
    glColor3f(0.5, 0.25, 0.0);
    cyl = gluNewQuadric();
    glRotatef(-90,1.0,0.0,0.0);
    gluCylinder(cyl, 0.2, 0.2, TableHeight, 10, 20); //Leg of Table 1
    glPushMatrix();
    cyl = gluNewQuadric();
    glTranslatef(TableX,0.0,0.0);
    gluCylinder(cyl, 0.2, 0.2, TableHeight, 10, 20); //Leg of Table 2
    glPushMatrix();
    cyl = gluNewQuadric();
    glTranslatef(0.0, TableY, 0.0);
    gluCylinder(cyl, 0.2, 0.2, TableHeight, 10, 20); //Leg of Table 3
    glPushMatrix();
    cyl = gluNewQuadric();
    glTranslatef(-TableX,0.0,0.0);
    gluCylinder(cyl, 0.2, 0.2, TableHeight, 10, 20); //Leg of Table 4
    glPushMatrix();
    glTranslatef(TableX/2.0, -TableY/2, TableHeight);
    glScalef(TableX+0.5, TableY+0.5, 0.5);
    glutSolidCube(1);                           //Board of Table
    glPopMatrix();

    glPushMatrix();                         //triangular1 (Beside of Net)
    glTranslatef(0, -TableY/2, TableHeight);
    glBegin(GL_TRIANGLES);
    glVertex3f(TableY/16.0, 0, TableY/8.0);//1
    glVertex3f(0, TableY/8.0, 0);
    glVertex3f(0, -TableY/8.0, 0);
    glVertex3f(TableY/16.0, 0, TableY/8.0);//2
    glVertex3f(0, -TableY/8.0, 0);
    glVertex3f(TableY/16.0, -TableY/8.0, 0);
    glVertex3f(TableY/16.0, 0, TableY/8.0);//3
    glVertex3f(TableY/16.0, -TableY/8.0, 0);
    glVertex3f(TableY/16.0, TableY/8.0, 0);
    glVertex3f(TableY/16.0, 0, TableY/8.0);//4
    glVertex3f(TableY/16.0, TableY/8.0, 0);
    glVertex3f(0, TableY/8.0, 0);
    glEnd();
    glPushMatrix();                     //triangular2 (Beside of Net)
    glTranslatef(TableX - TableY/8.0, 0 , 0);
    glBegin(GL_TRIANGLES);
    glColor3f(1.0, 0.0, 0.0);
    glVertex3f(TableY/16.0, 0, TableY/8.0);//1
    glColor3f(0.0, 1.0, 0.0);
    glVertex3f(TableY/16.0, TableY/8.0, 0);                         
    glColor3f(0.0, 0.0, 1.0);
    glVertex3f(TableY/16.0, -TableY/8.0, 0);
    glColor3f(1.0, 0.0, 0.0);
    glVertex3f(TableY/16.0, 0, TableY/8.0);//2
    glColor3f(0.0, 1.0, 0.0);
    glVertex3f(TableY/16.0, -TableY/8.0, 0);
    glColor3f(0.0, 0.0, 1.0);
    glVertex3f(TableY/8.0, -TableY/8.0, 0);
    glColor3f(1.0, 0.0, 0.0);
    glVertex3f(TableY/16.0, 0, TableY/8.0);//3
    glColor3f(0.0, 1.0, 0.0);
    glVertex3f(TableY/8.0, -TableY/8.0, 0);
    glColor3f(0.0, 0.0, 1.0);
    glVertex3f(TableY/8.0, TableY/8.0, 0);
    glColor3f(1.0, 0.0, 0.0);
    glVertex3f(TableY/16.0, 0, TableY/8.0);//4
    glColor3f(0.0, 1.0, 0.0);
    glVertex3f(TableY/8.0, TableY/8.0, 0);
    glColor3f(0.0, 0.0, 1.0);
    glVertex3f(TableY/16.0, TableY/8.0, 0);
    glEnd();
    glPopMatrix();

    glPushMatrix();                     //Net
    glBegin(GL_POLYGON);
    glColor3f(1.0, 1.0, 1.0);
    glVertex3f(TableY/16.0, 0.0, TableY/8.0);
    glVertex3f((TableX - TableY/16.0), 0, TableY/8.0);
    glVertex3f((TableX - TableY/16.0), 0, 0);
    glVertex3f(TableY/16.0, 0.0, 0.0);
    glEnd();

    glPopMatrix();
    glPopMatrix();
    glPopMatrix();
    glPopMatrix();
    glPopMatrix();
    glPopMatrix();
}

//Display Callback Function
void MyDisplay( ){
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    glMatrixMode (GL_PROJECTION);
    glLoadIdentity( );
    double width = glutGet( GLUT_WINDOW_WIDTH );
    double height = glutGet( GLUT_WINDOW_HEIGHT );
    gluPerspective(60.0, (GLfloat)width/height, 0.01, 100.0);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity( );

    //Change Viewpoint by Mouse Position
    gluLookAt((float)(ViewX - width/2)/width*20 + 2.5, (float)(height/2 - ViewY)/height*20  + 2.5, ViewZ, TableX/2, TableY/2, TableHeight, 0.0, 1.0, 0.0);

    printf("eyex = %f , eyey = %f , eyez = %f \n",(float)(ViewX - width/2.0)/width*10, (float)(height/2 - ViewY)/height*10, (float)ViewZ);

    DrawTable();    //Draw Table

    glutSwapBuffers();  //for 'Double Buffering'
}

//Main Function
int main(int argc, char** argv){
    glutInit(&argc, argv);
    glutInitDisplayMode(GLUT_RGBA | GLUT_DEPTH | GLUT_DOUBLE);
    glutInitWindowSize(400, 400);
    glutInitWindowPosition(200, 200);
    glutCreateWindow("OpenGL Sample Drawing");
    glClearColor(0.4, 0.4, 0.4, 1.0);
    InitLight();            //set Light Setting
    glEnable( GL_DEPTH_TEST );

    glutDisplayFunc(MyDisplay);
    glutMouseFunc(MyMouseMove); //get Mouse Position, to Change Viewpoint
    glutMotionFunc(MyMotion);   //get Mouse Position, to Change Viewpoint
    glutMainLoop( );
} 
```

# ios - 关于 UICollectionView 的查询

> ID：16104847
> 
> 赞同：0
> 
> 时间：2013-04-19T12:41:02.960
> 
> 标签：ios, xcode, indexing, uicollectionview, uicollectionviewcell

首先，很抱歉这个愚蠢的问题，但我是collectionview的新手，也有点困惑。

我正在努力`UICollectionView`。我正在从我的`plist`文件中将图像传递给它。我有 6 到 8 项数组，每个数组都有 6 项（NSString）。我正在使用此代码..

```
static NSString *identifier = @"Cell";
CollectionViewCell *cell = (CollectionViewCell *)[collectionView dequeueReusableCellWithReuseIdentifier:identifier forIndexPath:indexPath];

NSArray *temp = [list objectAtIndex:indexPath.item];

UIImage *cellImage;
cellImage = [UIImage imageNamed:[temp objectAtIndex:2]];
cell.imageView.image = cellImage; 
```

现在，我想将索引更改为`objectAtIndex:5`当我得到标志 1 或 0 时，它应该用于特定项目。

```
UIImage *cellImage;

if (myInt == 1) {

    cellImage = [UIImage imageNamed:[temp objectAtIndex:2]];
}
else{
    cellImage = [UIImage imageNamed:[temp objectAtIndex:5]];
}

cell.imageView.image = cellImage; 
```

如果我这样做，那么我要么得到，`index 2`要么得到`index 5`每个项目。是否可以根据标志获得`index 2`某些项目和某些项目？`index 5`或者还有其他方法吗？

任何建议将不胜感激。谢谢你。

编辑：
我的收藏视图连续有 3 个图像（项目）。如果我点击任何图标，它将重定向到新视图以阅读一些文档。栏上的那个视图中有一个完成按钮，它给出一个标志值（0/1）。现在，如果我得到标志 1，那么我只想为这种情况更改 collectionview 图标。但是在这里，通过这个给定的代码，所有图标都替换为`index 5`，但我只想要来自 的第一个图标和来自 的`index 5`其他 2 个图标`index 2`。就像只是为了区分第一个文档是经过审查的。

对不起，如果它混淆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:43:49.780

我认为您不想在这种情况下以这种方式使用 myInt 。相反，你想在你的集合视图控制器中创建一个数组来跟踪任何被选中的项目。因此，如果您有一个名为 reviewDocs 的属性（指向 NSMutableArray），您将添加所选单元格的 indexPath。

```
- (void)collectionView:(UICollectionView *)collectionView didSelectItemAtIndexPath:(NSIndexPath *)indexPath {
    [self.reviewedDocs addObject:indexPath];
} 
```

然后，在您的 cellForItemAtIndexPath: 方法中，您将根据当前 indexPath 是否与 reviewDocs 数组中的一个匹配来选择图像。

```
UIImage *cellImage;

if ([self.reviewedDocs containsObject:indexPath]) {

    cellImage = [UIImage imageNamed:[temp objectAtIndex:5]];
}
else{
    cellImage = [UIImage imageNamed:[temp objectAtIndex:2]];
} 
```

在您返回集合视图控制器并重新加载数据之前，图像不会改变。我不确定您使用 myInt 标志的目的是什么，但例如，如果您有一个完成按钮和一个取消按钮，您可能会分别为这两个操作返回 1 或 0。在您的集合视图控制器的 viewDidAppear 方法中，如果 myInt 为 0，则您可以从 reviewDocs 中删除最后一个对象，这表明用户只是取消而不是查看文档（然后在集合视图上调用 reloadData）。

# c# - C# 脚本在不应该运行时运行执行行

> ID：16104855
> 
> 赞同：1
> 
> 时间：2013-04-19T12:41:23.370
> 
> 标签：c#, plsql

我是 C# 编程新手。我编写了一个查询 oracle dB 的脚本，如果行数 > 0，它应该运行一个 bat 文件，但如果不是，它应该结束。

这是我到目前为止编写的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Oracle.DataAccess.Client; // ODP.NET Oracle managed provider
using Oracle.DataAccess.Types;

namespace trigOra
{
    class Program
    {
        static void Main(string[] args)
        {
            string oradb = "Data Source=OMP1;User Id=user;Password=pwd;";

            OracleConnection conn = new OracleConnection(oradb); // C#

            conn.Open();

            OracleCommand cmd = new OracleCommand();
            cmd.Connection = conn;
            cmd.CommandText = "SELECT cast(Count(*) as varchar(20)) as trig FROM DMSN.DS3R_1XRTT_VOICE_TRIGGER";
            //cmd.CommandType = CommandType.Text;

            OracleDataReader dr = cmd.ExecuteReader();
            dr.Read();

            int cnt;
            if (int.TryParse(dr.GetString(0), out cnt))
            {
                if (cnt > 0)
                {
                    System.Diagnostics.Process.Start(@"C:\AutoBatch\backup\trigger.bat");
                    cmd.CommandText = "TRUNCATE TABLE DMSN.DS3R_1XRTT_VOICE_TRIGGER";
                    cmd.ExecuteNonQuery();
                }
            }
            conn.Dispose();

        }
    }
} 
```

该代码有效，只是它似乎总是执行这部分：

```
if (cnt > 0)
{
    System.Diagnostics.Process.Start(@"C:\AutoBatch\backup\trigger.bat");
    cmd.CommandText = "TRUNCATE TABLE DMSN.DS3R_1XRTT_VOICE_TRIGGER";
    cmd.ExecuteNonQuery(); 
```

即使返回的行数为 0。嗯...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T11:28:18.390

您的 bat 文件必须使用 WaitForExit() 函数运行：

```
int exitCode = RunProcessForExitCode(filename, arguments);

    private static int RunProcessForExitCode(string processFilename, string processArguments)
    {
        //make process output possible to machine-reading
        Process process = new Process
        {
            StartInfo = new ProcessStartInfo
            {
                FileName = processFilename,
                Arguments = processArguments,
                UseShellExecute = false,
                RedirectStandardOutput = true,
                CreateNoWindow = true
            }
        };
        process.Start();
        Console.Write(process.StandardOutput.ReadToEnd());
        process.WaitForExit();
        return process.ExitCode;
    } 
```

# nhibernate - 在 NHibernate 中强制版本增量而不锁定表

> ID：16104861
> 
> 赞同：0
> 
> 时间：2013-04-19T12:41:43.420
> 
> 标签：nhibernate

NHibernate 可以在不锁定表的情况下以某种方式强制版本号递增吗？

我知道我可以这样做来强制增加版本号：

```
session.Lock(myEntity, LockMode.Force); 
```

但问题是这也会在表行上获得一个物理锁，这会导致我的应用程序出现很大的并发问题。

在 Java Hibernate 世界中，这似乎是可能的：

```
session.lock(myEntity, LockMode.OPTIMISTIC_FORCE_INCREMENT); 
```

NHibernate's`LockMode.Force`似乎等同于 Hibernate's `LockMode.PESSIMISTIC_FORCE_INCREMENT`，但不等同于`LockMode.OPTIMISTIC_FORCE_INCREMENT`.

比较 Java 和 .NET 版本的文档，NHibernate 中似乎缺少几个在 Hibernate 中存在的 LockMode。任何想法如何处理该限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T18:47:49.600

如果您使用数字版本属性，您可以将其分配给 0，NHibernate 会自动为您增加它。

# r - 如何在 R 语言中对矩阵的对角线元素施加条件

> ID：16104868
> 
> 赞同：1
> 
> 时间：2013-04-19T12:42:07.663
> 
> 标签：r, matrix

我正在使用 R 语言工作。我想施加条件，如果矩阵的任何上对角线元素大于 0.5，那么它将在输出中打印出来。

我正在使用以下代码，但它打印的不是不需要的对角线元素。

```
for(i in 1:ncol(X))

for (j in i+1:ncol(X)-i){
if(mat(X)[i,j]>0.5)

#upper.tri(cor(X),diag=F)

cat(i,",",j," th element", " > 50%","\n")
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T13:09:23.823

1）请注意，`i+1:ncol(X)-i`无论`1:ncol(X)`（`i`作为`i`取消的两个实例）这不太可能是您想要的。

2）还要注意，这可以在没有循环的情况下完成：

```
# create test matrix
set.seed(123)
m <- matrix(runif(25), 5)

# ix selects large elements
ix <- m > .5 & upper.tri(m)
s <- sprintf("\nm[%d, %d] = %f > 0.5", row(m)[ix], col(m)[ix], m[ix]) 
```

显示如下：

```
> cat(s, "\n")

m[1, 3] = 0.956833 > 0.5 
m[1, 4] = 0.899825 > 0.5 
m[1, 5] = 0.889539 > 0.5 
m[2, 5] = 0.692803 > 0.5 
m[3, 5] = 0.640507 > 0.5 
m[4, 5] = 0.994270 > 0.5 
```

上面使用的矩阵`m`是：

```
> m
          [,1]      [,2]      [,3]       [,4]      [,5]
[1,] 0.2875775 0.0455565 0.9568333 0.89982497 0.8895393
[2,] 0.7883051 0.5281055 0.4533342 0.24608773 0.6928034
[3,] 0.4089769 0.8924190 0.6775706 0.04205953 0.6405068
[4,] 0.8830174 0.5514350 0.5726334 0.32792072 0.9942698
[5,] 0.9404673 0.4566147 0.1029247 0.95450365 0.6557058 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T13:03:35.440

`which()`应该可以在这里为您工作，使用`arr.ind`参数返回矩阵索引。您可以`upper.tri`按照您的想法使用，并使用附加的逻辑选择标准 (> 0.5) 来查找符合您描述的那些元素：

```
set.seed(3234)
m <- matrix(runif(16),nrow=4)

m
#          [,1]       [,2]      [,3]       [,4]
#[1,] 0.24903346 0.06965592 0.8715103 0.92297359
#[2,] 0.81593852 0.99991663 0.3717652 0.67191551
#[3,] 0.85413490 0.13877853 0.7990082 0.04143296
#[4,] 0.01439058 0.27303603 0.5246000 0.08486883

which(m > 0.5 & upper.tri(m) , arr.ind = TRUE )
#    row col
#[1,]   1   3
#[2,]   1   4
#[3,]   2   4 
```

请注意，默认情况下这不包括对角线，如果要包括对角线，请使用这样的`diag=TRUE`参数`which(m > 0.5 & upper.tri(m , diag = TRUE) , arr.ind = TRUE )`

# php - 如何捕获点击的 div 的 id - jquery

> ID：16104872
> 
> 赞同：0
> 
> 时间：2013-04-19T12:42:25.183
> 
> 标签：php, jquery

我发布这个问题是因为[前一个](https://stackoverflow.com/questions/16103610/how-to-get-id-of-clicked-div-jquery)问题太长了（如果我在其中切割部分可能会造成混乱）。我在这篇文章中使问题更简单:)。

jQuery代码： -

```
function op_prof(id) {
    var attr_u_search = $(".u_search").attr('id');
    var dataString = 'u_search=' + attr_u_search;
    alert(dataString);

    $.ajax({
    type: "POST",
    url: '/script/profile.php',
    data: dataString,
    cache: false,
    success: function(data) {
          $('#ui_profile').show();
          $('#ui_profile').html(data);
          location.hash = 'profile' + 'id=' + dataString;
          $(".searchbox").val('');
          $("#usr_suggest").hide();

    }
  });
}; 
```

PHP:-

```
echo "<tr id='" . $id . "' class='u_search' height='40px' onclick='javascript:op_prof(1)'><td width='40px'><img class='avatar' src='$avater' /></td><td>" . $fname_ . " " . $lname_ . "</td></tr>";
}} 
```

我无法检索`ID`每个`div`（每个都有一个唯一的`ID`）。似乎 jQuery 捕获了`ID`顶部`div`（第一个`div`）的 s 而不是捕获`ID`所有`divs`.

屏幕截图：-
[http://prntscr.com/118dhv](http://prntscr.com/118dhv)
[http://prntscr.com/118dus](http://prntscr.com/118dus)

PS：我 100% 确定 jQuery 中有错误：-> prntscr.com/118eb5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T12:46:23.847

尝试修改`on-click`属性`tr`

由此：

```
onclick='javascript:op_prof(1) 
```

对此：

```
onclick='javascript:op_prof(this)' 
```

而js对此：

```
function op_prof(obj) {
    var attr_u_search = obj.id;
    .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:50:59.427

由于您已经在使用 jQuery，这里有一个完整的 jQuery 解决方案：

```
$("tr.u_search").on("click", function() {
    var attr_u_search = $(this).attr('id');
    var dataString = 'u_search=' + attr_u_search;
    alert(dataString);

    $.ajax({
        type: "POST",
        url: '/script/profile.php',
        data: dataString,
        cache: false,
        success: function(data) {
            $('#ui_profile').show();
            // $('#ui_profile').html(data);
            location.hash = 'profile' + 'id=' + dataString;
            $(".searchbox").val('');
            $("#usr_suggest").hide();
        }
    });
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:46:36.093

'ob_prof' 的第一个参数总是 = 1 吗？

```
javascript:op_prof(1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T12:48:55.790

attr() 方法设置或返回所选元素的属性和值。

该方法用于返回属性值时，返回第一个匹配元素的值。

使用 $.each()

api.jquery.com/jQuery.each/

# clojure - 在 Clojure Server 中嵌入 NREPL 的最佳实践方法

> ID：16104877
> 
> 赞同：11
> 
> 时间：2013-04-19T12:42:32.620
> 
> 标签：clojure, nrepl

我刚刚开始在 Clojure 中开发服务。我对如何处理服务器关闭有点迷茫。

我正在使用 Clojure 1.5.1。对于日志记录，我使用的是 Timbre 1.5.3。我想将 NREPL 嵌入到我的服务器中以进行热代码部署。

这是我的 core.clj 文件。核心是我的主要，我正在使用“lein new app”生成的应用程序外壳。

```
(ns extenium.core
  (:require [taoensso.timbre :as t]
            [clojure.tools.nrepl.server :as nrs])
  (:gen-class))

(def nrepl-server)

(defn start-nrepl-server []
  (t/info "Starting nrepl server on port 8628")
  (alter-var-root #'nrepl-server
                  (constantly
                   (nrs/start-server :port 8628)))
  (t/info "Started nrepl server"))

(defn stop-nrepl-server []
  (t/info "Stopping nrepl server")
  (nrs/stop-server nrepl-server)
  (t/info "Stopped nrepl server"))

(defn start []
  (alter-var-root #'*read-eval*
                  (constantly
                   false))
  (start-nrepl-server))

(defn stop []
  (stop-nrepl-server))

(defn -main [& args]
  (start)) 
```

当我“lein run”时，nrepl-server 按预期启动，信息消息将发送到终端。然后我从 Emacs 连接“nrepl”。没问题。从 Emacs 我执行“（extenium.core/stop）”。那时，我在 Emacs 上收到“Stopping nrepl server”消息（意味着 stdout 被重定向到客户端）。连接关闭（如预期的那样），我从未看到“已停止的 nrepl 服务器”消息。美好的。

我查看终端，但没有看到“Stopping...”或“Stopped...”消息。相反，我得到以下异常：

```
Exception in thread "nREPL-worker-0" java.lang.Error: java.net.SocketException: Socket closed 
```

理想情况下，我想要以下内容：

1.  能够从 NREPL 客户端启动关闭。优雅地关闭所有 NREPL 客户端连接，无一例外。将日志消息定向到终端（或最终，循环日志文件）关闭。
2.  在 NREPL 连接期间，将日志记录输出克隆到服务器（终端或日志）和 NREPL 输出。
3.  捕获有关传入 NREPL 连接的信息，为其命名，并记录连接和断开连接活动。
4.  最终，验证传入的 NREPL 连接。
5.  甚至稍后，授权他们执行他们的操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T09:59:48.037

免责声明：我没有这样做，但它似乎很有趣。

根据[自述](https://github.com/clojure/tools.nrepl/blob/master/README.md)文件，特别是“为什么选择 nREPL？”部分 您应该能够通过实现自己的自定义传输来实现 2 - 4，也许只是扩展开箱即用的传输之一。

优雅地停止服务器可能需要扩展套接字传输。您所描述的“正常关机”听起来像是“注销”协议的实现。

授权他们执行的操作似乎不那么简单。看起来您需要实现一个自定义处理程序，也许再次`default-handler`用授权代码包装。

祝你好运！

# php - 会话变量值不能显示在电子邮件中？

> ID：16104883
> 
> 赞同：1
> 
> 时间：2013-04-19T12:42:51.250
> 
> 标签：php, email, session, variables, sendmail

需要帮助解决消息功能中显示会话变量值的问题是`sessions variable values`当用户收到电子邮件时无法在消息上显示？

在消息邮件功能中它只显示变量名称而不显示变量值？

```
session_start();
if(is_array($_SESSION['product1'])){
$max=count($_SESSION['product1']);  
for($i=0; $i<$max; $i++){
$new_product=$_SESSION['product1'][$i];
$new_itemcode=$_SESSION['itemcode3'][$i];
$new_image=$_SESSION['image12'][$i];
$new_sizes=$_SESSION['sizes12'][$i];    
$new_price=$_SESSION['price12'][$i];    

$message .='<tr>
<td>'.implode ($new_itemcode).'</td>
<td>'.implode ($new_product).'</td>
<td><img src="http://demo.com/admin/'.implode ($new_image).'" 
width="150" height="150" /></td>
<td>'.implode ($new_sizes).'</td>
<td>'.implode ($new_price).';$total=$total+implode ($new_price).</td>
<td>'.$total.'</td>
</tr>';

}}

$headers .= 'MIME-Version: 1.0' . "\r\n";  
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";  
$headers .= "From: Demo.Com<$your_email>\r\n" .  
//"Reply-To: $from \r\n" .  
"X-Mailer: PHP/" . phpversion(); 
mail($to, $subject, $message, $headers); 
```

**电子邮件演示图片**

![在此处输入图像描述](https://i.stack.imgur.com/QkcHN.png)

# android - IllegalStateException：内容已被使用（在第一次 getContent() 上）

> ID：16104884
> 
> 赞同：2
> 
> 时间：2013-04-19T12:42:54.040
> 
> 标签：android, android-asynctask, http-get

```
private HttpResponse doResponse(String url) {
    HttpClient httpclient = new DefaultHttpClient(getHttpParams());
    HttpResponse response = null;

    try {
        HttpGet httpget = new HttpGet(url);
        response = httpclient.execute(httpget);
    } catch (Exception e) {
        Log.e(TAG, e.getLocalizedMessage(), e);
    }

    return response;
}

@Override
protected String doInBackground(String... urls) {
    // TODO: attempt authentication against a network service.
    String url = urls[0];
    String result ="";

    try {
        HttpResponse response=doResponse(url);
        result = inputStreamToString(response.getEntity().getContent());
        //throws IllegalStateException: Content has been consumed
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        Log.e(TAG, e.getLocalizedMessage(), e);
    } 

    return result;
} 
```

线

```
result = inputStreamToString(response.getEntity().getContent()); 
```

投掷

```
IllegalStateException: Content has been consumed 
```

即使我之前没有得到内容。

我想知道我的部分代码之前正在使用内容

```
response.getEntity().getContent(); 
```

我在
运行 Android 4.1.1的三星 Galaxy Tab 2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:48:26.593

确保您只调用`getContent()`一次。验证在您的`inputStreamToString()`方法中您没有调用它。`getContent()`返回一个输入流，每个连接只能返回一个输入流。

[文档](http://developer.android.com/reference/org/apache/http/HttpEntity.html#getContent%28%29)：

> **获取内容（）**
> 
> 创建实体的新 InputStream 对象。***多次返回相同的 InputStream 对象是编程错误***。如果多次调用此方法，不可重复的实体将抛出异常。

# java - 使用 xmloutputter 将 XML UTF-8 转换为 ANSI

> ID：16104886
> 
> 赞同：0
> 
> 时间：2013-04-19T12:42:56.563
> 
> 标签：java, xml, character-encoding, jdom

我使用 xmloutputter 在 java 中编写了一个 xml 文件。标准格式是 UTF-8。现在我想将其更改为 ANSI .. 我该怎么做？

我的代码：

```
XMLOutputter xmlOutput = new XMLOutputter(Format.getPrettyFormat());

xmlOutput.output(doc, new FileOutputStream(new File(Fileoutputpfad))); 
```

为什么我不能只更改`Format.getPrettyFormat()`into `Format.setEncoding()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:10:02.113

因为`Format.setEncoding()`不是静态方法。

你可以这样做：

```
XMLOutputter xmlOutput = new XMLOutputter(Format.getPrettyFormat().setEncoding("ISO-8859-1")); 
```

# haskell - 如何阅读类型系统的语法？

> ID：16104889
> 
> 赞同：2
> 
> 时间：2013-04-19T12:43:01.610
> 
> 标签：haskell, semantics, type-systems

我有以下类型的函数：

```
Quad = square · square
Square :: Integer -> Integer (So this function takes an integer as an input and outputs an integer)

The operator · is used in the definition of quad with type:

(·) :: (Integer -> Integer) -> (Integer -> Integer) -> Integer -> Integer 
```

我不确定上述内容是如何解读的，以及其背后的含义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T09:35:23.003

双重`::`表明这是 Haskell，但所有受 ML 启发的语言的一般原则都是相同的（大多数和类型理论约定是使用单一的`:`）。

该`::`符号表示其左侧具有其右侧的类型。所以

```
1 :: Integer 
```

构造`->`函数类型。

```
timesTwo :: Integer -> Integer 
```

此外，`->`是右结合。

```
plus :: Integer -> Integer -> Integer 
```

表示该函数`plus`接受一个整数并返回一个*函数*，该函数接受一个整数并返回一个整数。这相当于取两个整数，但在技术上有所不同（从某种意义上说，更简单）。它被称为柯里化。

```
square :: Integer -> Integer 
```

表示 square 接受一个整数并返回一个整数。

通常，在类型论和函数式编程语言中，我们使用类型变量，所以

```
id :: forall a. a -> a
id x = x 
```

表示*对于任何类型`a`*id 都是从该类型的*值到相同类型的另一个值的*函数。当使用变量给它一个*更通用*的类型时，你的`.`运算符更有意义

 *```
(·) :: (b -> c) -> (a -> b) -> a -> c
f . g x = f (g (x)) 
```

是函数组合函数。它是一个高阶函数，将两个函数作为参数。更正式地说，对于任何类型`a`,`b`和`c`,`(.)`是从函数 from `b`to`c` *到函数*from `a`to到函数from to`b` *的函数*。最终函数只是两个参数函数的[组合](http://en.wikipedia.org/wiki/Function_composition)。`a``c`

您专门从事`.`整数工作。但是，想法是一样的。您从`Integer -> Integer`和中获取两个函数`Integer`，应用第一个函数，然后将第二个函数应用于结果。

`(.)`或者`(+)`只是 Haskell，因为“这是一个中缀运算符，但我现在想以前缀形式讨论它。”

因此，`Quad`它只是一个函数，`Integer -> Integer`它在其参数上调用 square，然后在结果上再次调用 square。这将与

```
quad x = square (square x) 
```

（haskell 区分大小写，函数必须以小写字母开头）*

# android - 使用 glGetProgramiv 时“检测到堆栈损坏”

> ID：16104896
> 
> 赞同：1
> 
> 时间：2013-04-19T12:43:24.977
> 
> 标签：android, opengl-es, android-ndk, opengl-es-2.0

我正在编写本机 Android OpenGLES 2 代码。

加载着色器时（着色器加载代码与 NDK 示例“hello-gl2”非常相似），我的程序没有链接（着色器本身编译没有错误）。

这段代码：

```
GLint linkStatus = GL_FALSE;
GLCALL(glGetProgramiv(programId, GL_LINK_STATUS, &linkStatus));
if (linkStatus != GL_TRUE) { 
```

返回false，所以我继续调用

```
LOGE("Could not link program, gathering log...");
GLint bufLength = 0;
GLCALL(glGetProgramiv(programId, GL_INFO_LOG_LENGTH, &bufLength)); 
```

它永远不会返回并使我的应用程序崩溃。LogCat 显示为红色：

```
04-19 15:24:55.369: A/<unknown>(29293): stack corruption detected: aborted
04-19 15:24:55.379: I/ActivityManager(101): Process x.x.x (pid 29293) has died. 
```

我可以假设日志检索函数内部出现问题，因为我向它传递了一个普通的 GLint 引用，这与 Google 示例中的代码相同......

我试过跳过长度查询，直接查询日志，但它会产生同样的错误。

我可以在这里发布整个 GLSL 着色器代码，但让日志功能正常工作会更有价值，这样我就可以自己调试它......

完整的着色器加载代码：

```
GLuint OpenGLESHelper::loadShader(GLenum shaderType, const char* pSource) {
    GLuint shader;
    GLCALL(shader = glCreateShader(shaderType));
    if (shader) {
        GLCALL(glShaderSource(shader, 1, &pSource, NULL));
        GLCALL(glCompileShader(shader));
        GLint compiled = 0;
        GLCALL(glGetShaderiv(shader, GL_COMPILE_STATUS, &compiled));
        if (!compiled) {
            LOGE("Could not compile shader, retrieving log...");
            GLint infoLen = 0;
            GLCALL(glGetShaderiv(shader, GL_INFO_LOG_LENGTH, &infoLen));

            // Workaround
            if (infoLen == 0)
                infoLen = 4096;

            if (infoLen) {
                char* buf = (char*) malloc(infoLen);
                if (buf) {
                    GLCALL(glGetShaderInfoLog(shader, infoLen, NULL, buf));
                    LOGE("Could not compile shader %d:\n%s\n", shaderType, buf);
                    free(buf);
                }
                GLCALL(glDeleteShader(shader));
                shader = 0;
            }
        }
    }
    return shader;
}

ShaderProgram* OpenGLESHelper::createProgram(const char* pVertexSource,
        const char* pFragmentSource) {
    GLuint vertexShader = loadShader(GL_VERTEX_SHADER, pVertexSource);
    if (!vertexShader) {
        return 0;
    }

    GLuint pixelShader = loadShader(GL_FRAGMENT_SHADER, pFragmentSource);
    if (!pixelShader) {
        return 0;
    }

    GLuint programId;
    GLCALL(programId = glCreateProgram());
    if (programId) {
        GLCALL(glAttachShader(programId, vertexShader));
        GLCALL(glAttachShader(programId, pixelShader));
        GLCALL(glLinkProgram(programId));
        GLint linkStatus = GL_FALSE;
        GLCALL(glGetProgramiv(programId, GL_LINK_STATUS, &linkStatus));
        if (linkStatus != GL_TRUE) {
            LOGE("Could not link program, gathering log...");
            GLint bufLength = 0;
            GLCALL(glGetProgramiv(programId, GL_INFO_LOG_LENGTH, &bufLength));

            if (bufLength) {
                char* buf = (char*) malloc(bufLength);
                if (buf) {
                    GLCALL(glGetProgramInfoLog(programId, bufLength, NULL, buf));
                    LOGE("Could not link program:\n%s\n", buf);
                    free(buf);
                }
            }
            GLCALL(glDeleteProgram(programId));
            programId = 0;
        }
    }

    ShaderProgram* program = new ShaderProgram;
    program->mProgramHandle = programId;

    GLCALL(
            program->mPositionAttributeHandle = glGetAttribLocation(programId, "vPosition"));
    GLCALL(
            program->mTexCoordAttributeHandle = glGetAttribLocation(programId, "a_TexCoordinate"));
    GLCALL(
            program->mTextureUniformHandle = glGetUniformLocation(programId, "rubyTexture"));
    GLCALL(
            program->mTextureSizeUniformHandle = glGetUniformLocation(programId, "rubyTextureSize"));

    return program;
} 
```

使用的预处理器宏：

```
 #ifdef ANDROID_DEBUG_GL_CALLS
#define GLCALLLOG(x, before) \
    do { \
        if (before) \
            LOGD("calling '%s' (%s:%d)", x, __FILE__, __LINE__); \
        else \
            LOGD("returned from '%s' (%s:%d)", x, __FILE__, __LINE__); \
    } while (false)
#else
#define GLCALLLOG(x, before) do {  } while (false)
#endif

#define GLCALL(x) \
    do { \
        GLCALLLOG(#x, true); \
        (x); \
        GLCALLLOG(#x, false); \
        checkGlError(#x, __FILE__, __LINE__); \
    } while (false)

#define GLTHREADCHECK \
    do { \
        assert(pthread_self() == _main_thread); \
    } while (false)

#else
#define GLCALL(x) do { (x); } while (false)
#define GLTHREADCHECK do {  } while (false)
#endif 
```

**更新**

有一个特殊的着色器对产生了这种奇怪的行为。

我发现了另外 2 个正确编译的着色器对，但是当链接时，生成一个只有“链接失败”的日志。- 除此之外没有任何信息。

然后我在带有 GPU 仿真的 Jelly Bean AVD 上尝试了这两个着色器对（完全相同的 APK），它们完美地链接在一起，我的游戏在那里运行。

这里非常非常非常不一致的东西......我的HTC Desire有问题吗？检查我的着色器是否良好的参考设备是什么？

# github - 如何按时获取我的 jekyll 网站的页面链接

> ID：16104898
> 
> 赞同：0
> 
> 时间：2013-04-19T12:43:28.873
> 
> 标签：github, markdown, jekyll, github-pages

如果您通过以下网址访问我的 jekyll 网站

```
http://xxxx.com 
```

您将在时间类别、页面、标签、存档上看到，我也想找到一个将指向我的简历页面的链接放在顶部的内容。

我正在使用 github、jekyll 和 holign 主题。请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T00:23:54.887

Jekyll Bootstrap 使用`site.pages`并循环通过它们来创建*Top Nav*。

因此，要将您的**简历**添加到该列表中，您需要执行以下操作：

假设您的简历在这里：`Jekyll Bootstrap Root Directory -> /resume/index.md`.

在您的 YAML Front Matter 之后`/resume/index.md`添加这一行：`group: navigation``title`

```
---
layout: page
title: Resume
group: navigation
--- 
```

请参阅 JB 中的此文件，其中解释了： [https ://github.com/plusjade/jekyll-bootstrap/blob/master/_includes/JB/pages_list](https://github.com/plusjade/jekyll-bootstrap/blob/master/_includes/JB/pages_list)

**编辑**：哦，我看到你正在使用`/resume.md`和`/resume/index.md`相同的内容。因此，将该`group: navigation`行添加到主导航中您想要的行，但不能同时添加。

# javascript - 资源解释为 Document，但使用 MIME 类型 image/svg+xml 传输：

> ID：16104899
> 
> 赞同：3
> 
> 时间：2013-04-19T12:43:30.837
> 
> 标签：javascript, html, svg

当我有一张带有 JavaScript chrome 的 SVG 图片时，显示“资源解释为文档，但使用 MIME 类型 image/svg+xml 传输”。我可以将它包含在 iframe 中或嵌入 TAG 相同的结果。但是，当我将 mime 类型更改为其他类型时，浏览器无法呈现它。所以我猜“image/svg+xml”是正确的？

SVG

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg version="1.1" baseProfile="full" id="draw" 
xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
viewBox="0 0 480 480"> 
<defs>
<style type="text/css">
<![CDATA[
]]>
</style>
</defs>
<rect x="0" y="0" width="480" height="480" rx="0" ry="0" fill="rgb(255, 255, 255)" />

</g>
<script type="text/ecmascript"><![CDATA[
(function () { 

//Some code here

}());
]]>
</script>
</svg> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T13:37:49.643

是的，`image/svg+xml`是 SVG 内容的正确 Internet 媒体类型，请参阅[IANA](http://www.iana.org/assignments/media-types/image)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-06-24T17:05:28.647

我有这个问题很长一段时间，但似乎 application/svg-xml 是正确的 mime。

有关更多详细信息，请参阅此[https://github.com/w3c/svgwg/issues/266](https://github.com/w3c/svgwg/issues/266)。mime/svg-xml 也可能容易受到攻击。

# sql - 如何在 SQL 数据库中的记录之间建立关系？

> ID：16104900
> 
> 赞同：2
> 
> 时间：2013-04-19T12:43:32.120
> 
> 标签：sql, database, relationship

假设我们有一个“人”表：

```
ID  Name      Surname   Age
1   Thorvald  Benjamin  32
2   Addison   Impi      40 
```

我们有一个“兼容性”表：

```
Person1_ID  Compatibility  Person2_ID
1           89             2 
```

如何在 Person1_ID 的值和 People 表中的记录之间建立关系？Person2_ID 也是一样的吗？

当您从数据库中获取数据时，编写 SQL 查询以获取有关 Person1、Person2 及其兼容性的信息的好方法是什么？

我对数据库了解不多，这可能是一个非常简单的问题。请多多包涵。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:35:40.057

类似的东西：

```
SELECT
    A.Person1_ID, A.Compatibility, A.Person2_ID,
    B.Name AS Person1_name, B.Surname AS Person1_surname, B.Age AS Person1_age,
    C.Name AS Person2_name, C.Surname AS Person2_surname, C.Age AS Person2_age
FROM table_compatibility as A
LEFT JOIN table_people AS B
    ON A.person1_ID = B.ID
LEFT JOIN table_people AS C
    ON A.person2_ID = C.ID
WHERE A.Person1_ID = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T15:32:18.967

这是一个工作示例。

```
drop table person_example cascade constraints;
drop table compatibility_example cascade constraints;

create table person_example (person_id number primary key, name varchar2(50),age number);

create table compatibility_example (compat_id number,person_id1 number, person_id2 number);
alter table compatibility_example add 
(
constraint fk_comp_per1 foreign key (person_id1) references person_example(person_id),
constraint fk_comp_per2 foreign key (person_id2) references person_example(person_id)
);

insert into person_example (person_id,name,age) values(1,'John',23);
insert into person_example (person_id,name,age) values(2,'Josh',24);

select * from person_example;

 PERSON_ID NAME                                                      AGE
---------- -------------------------------------------------- ----------
         1 John                                                       23
         2 Josh                                                       24

2 rows selected.

insert into compatibility_example (compat_id,person_id1,person_id2 ) values(1,1,2);

select * from compatibility_example;

 COMPAT_ID PERSON_ID1 PERSON_ID2
---------- ---------- ----------
         1          1          2
1 row selected.

set linesize 750
select compat_id,person_id1,person_id2,
p1.name person_1, p1.age age1, p2.name person_2, p2.age age2
 from 
compatibility_example ce 
left outer join person_example p1
on ce. person_id1=p1.person_id
left outer join person_example p2
on ce. person_id2=p2.person_id;

 COMPAT_ID PERSON_ID1 PERSON_ID2 PERSON_1                                                 AGE1 PERSON_2                                                 AGE2
---------- ---------- ---------- -------------------------------------------------- ---------- -------------------------------------------------- ----------
         1          1          2 John                                                       23 Josh                                                       24
1 row selected. 
```

# delphi - Delphi7 如何更改按钮及其标题的颜色？

> ID：16104908
> 
> 赞同：1
> 
> 时间：2013-04-19T12:44:02.650
> 
> 标签：delphi, delphi-7

我想更改按钮的颜色，例如将其设置为灰色 --> 黄色。你知道这是否可能吗？我在按钮的属性中没有看到任何颜色选项，但必须有办法改变它的颜色。

如果不可能，请告诉我是否以及如何更改按钮标题的颜色。我选择了不同的颜色，但它仍然没有改变，它仍然是黑色的，也许我做错了什么。

我正在使用delphi7顺便说一句

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-10-22T04:58:19.810

要更改按钮的字体颜色，请在项目->选项->应用程序->外观中为项目使用自定义样式，然后在按钮样式元素属性中禁用 sefont

# excel - 按下按钮时的Excel 2010，突出显示行

> ID：16104914
> 
> 赞同：0
> 
> 时间：2013-04-19T12:44:19.460
> 
> 标签：excel, vba

我必须建立一个邮件地址数据库。

烦人的事情是密切关注您已经填写的内容。我想添加一个按钮来突出显示整行。我怎样才能做到这一点？

我用谷歌搜索，但我找不到任何真正有用的东西。

我可以自己突出显示它们，但我希望它们只需单击一下即可突出显示，而不是先选择行然后选择颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:27:20.887

基本上它是这样的：

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)
Cells.Interior.Pattern = xlNone
Rows(Target.Row).Interior.Color = 65535
End Sub 
```

# sql - 将一列值与另一列中包含的单词进行比较的最佳方法

> ID：16104920
> 
> 赞同：1
> 
> 时间：2013-04-19T12:44:38.853
> 
> 标签：sql, sql-server, sql-server-2008, full-text-search

我的表结构如下所示。

```
Products { product_name, brand, model} 
```

都是 varchar 字段（还有更多字段，但与我的问题无关。此表中有近 5000000 个。

现在我需要做的是，我想遍历所有产品并检查 product_name 是否包含任何其他产品品牌和型号（不是单词的一部分而是完整的单词，所以产品名称应该包含一个单词的型号和一个单词的品牌），如果所以把这些是相同的产品存放在某个地方。

我已经用共同相关的子查询方法研究了全文索引，但后来知道 CONTAINS 函数不接受列名作为第二个单词，我也不知道如果以某种方式实现它会有多快。

任何做同样事情的建议都会对我很有帮助。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:21:51.837

`like`使用and是不可能的`exists`吗？

```
select * from Products p
where exists(select * from Products 
             where p.product_name != product_name 
             and (' ' + p.product_name + ' ' like '% ' + brand + ' % ' + model + ' %'
                or ' ' + p.product_name + ' ' like '% ' + model + ' % ' + brand + ' %')) 
```

# c# - 我怎么得到？！正则表达式运算符正常工作？

> ID：16104922
> 
> 赞同：0
> 
> 时间：2013-04-19T12:44:42.787
> 
> 标签：c#, .net, regex

我有一个搜索字符串并使用正则表达式来查找不等于它的所有内容。

即像这样

```
string searchStr = SearchStr;
searchStr = System.Text.RegularExpressions.Regex.Escape(searchStr).
    Replace(@"\*", ".+").
    Replace(@"\?", ".");
//if (searchStr.StartsWith("!"))//(?!hede).)
//    searchStr = "?!" + searchStr.Substring(1); 
```

然后我做 Regex.isMatch 但我无法`?!`做到不遵循以下模式，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T13:01:57.763

如果我理解正确，你不能只是追加？！一开始，您需要创建一个否定的前瞻组，并根据您搜索的内容/方式来锚定它。像这样的事情可能会根据你在做什么工作：

```
searchStr = "^(?!" + searchStr.Substring(1) + "$).*"; 
```

不过，否定正则表达式结果可能会更容易：

```
Regex r = new Regex(..);
Match m = r.Match(someText);
if (m.Success != searchStr.StartsWith("!")) {
  // matches!
} 
```

当为**false**时，您希望正则表达式成功（返回**true**），反之亦然。`.StartsWith("!")`

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:59:06.657

如果要搜索不等于 的单词`something`，请尝试：

```
\b(?!something\b)\w+\b 
```

并以编程方式构建它：

```
String.Format(@"\b(?!{0}\b)\w+\b", Regex.Escape(negativeSearchStr)) 
```

解释：

```
\b\w+\b 
```

是单词的模式

```
(?!something) 
```

是单词不以 开头的负前瞻`something`。最后：

```
(?!something\b) 
```

是单词不等于 的负前瞻`something`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T13:04:17.263

如果您希望避免不以术语开头的字符串，您将使用lookbehind。Lookbehinds 和lookaheads 应该用括号括起来。现在，如果您不添加括号，您似乎只是在进行文字搜索，因为您正在搜索实际上包含问号和感叹号的字符串。

因此，假设我们有字符串“abc”和“bbc”，我们想要找到不以 a 开头的字符串。您的后向正则表达式将如下所示。

```
(?<!a)b 
```**

# asp.net - 从转发器控件触发更新面板的异步回发

> ID：16104924
> 
> 赞同：0
> 
> 时间：2013-04-19T12:44:48.460
> 
> 标签：asp.net

我`Repeater`在`UpdatePanel`. `ImageButton`单击（`Repeater`模板内部）时，我需要更新另一个控件。问题是我无法触发它。

面板`upPanelRotator`已刷新...我**不**想要...我只想回调服务器以更新另一个面板 - 我将从服务器控制。

有任何想法吗？

```
<asp:UpdatePanel ID="upPanelRotator" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <asp:Repeater ID="rptRotator" runat="server" OnItemCommand="rptRotator_ItemCommand">
            <ItemTemplate>
                <asp:ImageButton ID='imgBtn' runat="server" />
        </asp:Repeater>
    </ContentTemplate>
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="imgBtn" EventName="ItemCommand" />
    </Triggers>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T07:32:04.483

我现在有类似的情况，我这样做是为了将控件包装在另一个**UpdatePanel中的****Repeater**中，并设置该控件的**AutoPostBack="true"**并注册

 ******<asp:AsyncPostBackTrigger ControlID="imgBtn" EventName="Click"/>**

我对此的唯一考虑是这么多的 UpdatePanel 将如何反映性能。我有一个数据库条目很少的小项目，但对于大量数据，我会在这种干预之前和之后测试性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T15:30:07.207

您应该能够将异步回发触发器添加到要更新的更新面板。将中继器的控件id和“ItemCommand”事件设置为事件名称……像这样：

```
<asp:UpdatePanel ID="updatePanel2" runat="server" ChildrenAsTriggers="false" UpdateMode="Conditional">
    <Triggers>
        <asp:AsyncPostBackTrigger ControlID="repeaterId" EventName="ItemCommand" />
    </Triggers>
    <ContentTemplate> 
```

...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T14:56:55.213

如果 PanelA 具有触发按钮，并且您想要更新 PanelB，则需要在 PanelB 周围的 UpdatePanel 上设置异步回发触发器。问题是，您需要提供按钮的实际 ID，像上面那样指定 imgButton 是行不通的（因为中继器中可能有很多，并且异步触发器需要一个无法引用的引用寻找）。为了使这非常简单，请将所有内容都包含在 UpdatePanel 中，这将使您的生活更轻松。否则，您必须从我相信的代码中添加异步回发触发器。****

# java - Richfaces modalPanel 滚动

> ID：16104925
> 
> 赞同：1
> 
> 时间：2013-04-19T12:44:48.780
> 
> 标签：java, richfaces

我正在使用 Richfaces 3.3。

我打开模式面板（里面有 scrollableDataTable）。当我向上/向下滚动时，我希望模式面板中的 scrollableDataTable 将被滚动。但是父窗口是滚动的。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T20:19:34.510

```
.rich-mpnl-panel {
    overflow: hidden;
} 
```

如果一个人还不够，那就试试吧。像这样：

```
<rich:scrollableDataTable> 
    <div class="scrollable"/>
<rich:scrollableDataTable> 
```

并应用这个类：

```
.scrollable {
    overflow: scroll;
    width:100%;
    height:100%;
} 
```

# ios - 将图像设置为 tableview 背景

> ID：16104929
> 
> 赞同：0
> 
> 时间：2013-04-19T12:44:56.227
> 
> 标签：ios, uitableview, background, uiimage, layer

我在 tableview 上添加了一个 imageview。我需要将其设置为 tableview 的背面，而不将其设置为 tableview 的背景。

`sendSubviewToBack:bgView`也不起作用。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:47:34.243

试试这样

```
if objects are in xib ,then take imageview infront of tableview in xib, 
```

（或者）

```
if you are adding in programatically then add imageview before adding the tableview 
```

（或者）

```
table.backgroundColor=[UIColor colorWithPatternImage:[UIImage imageNamed:@""]]; 
```

（或者）

```
[table bringSubviewToFront:yourImageview]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:48:36.667

尝试这个

```
 self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"table_bg_image.png"]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:48:51.510

没有得到你想要的。另一种来自 XIB 的方法，只需将其添加到 table View 后面的 xib 中，并将 tableView 的背景颜色设置为 clearcolor，这样你就可以看到 tableview 后面的图像。

# jquery - 在第二次迭代中获取 JSON 数据会引发错误

> ID：16104933
> 
> 赞同：0
> 
> 时间：2013-04-19T12:45:14.073
> 
> 标签：jquery, json

有两行 JSON 数据存储为字符串

```
First Row - {"content":[{"title":"Test1","desc":"Team1","image":"http://team.jpg"}],"leftnav":[{"navtitle":"Nav One","navdesc":"One Link","navimage":"http://plan.jpg"}]} 

Second Row - {"content":[{"title":"Test2","desc":"Team2","image":"http://group.jpg"}],"leftnav":[{"navtitle":"Nav Two","navdesc":"Two Link","navimage":"http://graph.jpg"}]} 
```

使用每个函数，我正在遍历每一行并尝试访问数据，如下所示

其中“resultRegionArr”是对象的对象

```
$(resultRegionArr).each(function(x){

var str = resultRegionArr[x].testdata;// str is assigned each row at a time
var finalobj = JSON.parse(str); // String is been converted to objects
alert(finalobj.leftnav[x].navtitle);

} 
```

对于第一次迭代，即 finalobj.leftnav[0].navtitle 我能够得到正确的结果 - Nav One

第二次迭代，即 finalobj.leftnav[1].navtitle 我得到一个错误 finalobj.leftnav[x] 没有定义。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:49:46.000

那是因为没有 leftNav[1]。您的数组仅包含一个对象：

```
"leftnav":[{"navtitle":"Nav Two","navdesc":"Two Link","navimage":"http://graph.jpg"}] 
```

改变这个：

```
alert(finalobj.leftnav[x].navtitle); 
```

对此：

```
alert(finalobj.leftnav[0].navtitle); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:51:03.260

这段代码没有意义。使用 foreach 应该将值作为回调函数中的第一个参数返回。您可以使用该值来做事。其次，在最后一行中使用 x 值似乎很奇怪，因为它用于在解析的 JSON 中检索某些内容，而您还使用它从初始数组中检索数据。我认为你首先需要重新考虑你的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T12:54:19.567

```
var str = resultRegionArr[x].testdata;// str is assigned each row at a time
var finalobj = JSON.parse(str); // String is been converted to objects
alert(finalobj.leftnav[0].navtitle); 
```

尝试这个。

# android - 如何从另一个应用程序启动应用程序？

> ID：16104942
> 
> 赞同：1
> 
> 时间：2013-04-19T12:45:46.040
> 
> 标签：android, system, installed-applications

我想从我的应用程序中启动所有已安装的应用程序。在这里我获取所有已安装的应用程序

```
List<ApplicationInfo> applicationInfoList = packageManager.getInstalledApplications(PackageManager.GET_ACTIVITIES | PackageManager.GET_META_DATA);
if(applicationInfoList != null && !applicationInfoList.isEmpty()){
    Collections.sort(applicationInfoList, new ApplicationInfo.DisplayNameComparator(
            packageManager));
    for (ApplicationInfo applicationInfo : applicationInfoList) {
        Intent intent = packageManager.getLaunchIntentForPackage(applicationInfo.packageName);
        if(intent != null){
            ComponentName componentName = intent.getComponent();
            //add componenet to a list
        }

    }
} 
```

但我无法启动一些应用程序，如联系人和电话。这些应用程序的类名称是“ResolverActivity”。我如何从我的应用程序启动这些应用程序？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:54:22.107

这是因为联系人和电话是同一个应用程序，地图和纵横也是。他们碰巧有多个可启动的活动。

所以，你有两个选择：

1.  坚持您要“启动所有已安装的应用程序”的声明，在这种情况下，您现有的代码是正确的（用户将选择是否显示联系人或电话），或者

2.  做主屏幕启动器所做的事情，即“启动所有可启动的活动”，在这种情况下你做错了

对于后者，使用`queryIntentActivities()`/ `MAIN`，`LAUNCHER` `Intent`并使用结果来构建您的列表。[这是一个示例应用程序](https://github.com/commonsguy/cw-omnibus/tree/master/Introspection/Launchalot)来演示这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:57:02.743

要启动一个应用程序，你可以试试这个：

```
 // start the app by invoking its launch intent
        Intent i = getPackageManager().getLaunchIntentForPackage(applicationInfo.packageName);
        try {
           if (i != null) {
              startActivity(i);
           } else {
              i = new Intent(applicationInfo.packageName);
              startActivity(i);
           }
        } catch (ActivityNotFoundException err) {
           Toast.makeText(ListInstalledApps.this, "Error launching app", Toast.LENGTH_SHORT).show();
        } 
```

参考这个：[tutorial1](http://codebucket.co.in/android-get-list-of-all-installed-apps/)，[tutorial2](http://qtcstation.com/2011/02/how-to-launch-another-app-from-your-app/)，[thread stackoverflow](https://stackoverflow.com/questions/2695746/how-to-get-a-list-of-installed-android-applications-and-pick-one-to-run)

# sql - 如果 3rd 没有主键，如何在 3 个表中应用联接？

> ID：16104944
> 
> 赞同：1
> 
> 时间：2013-04-19T12:45:49.420
> 
> 标签：sql, sql-server, join

如何在三个表之间连接，例如我有三个表 productoption、productsize 和 price 并且 t3 没有主键，但问题是 productsize tbl 没有主键

产品选项 内连接 产品大小 内连接 价格

```
select * from Prices
select * from Product
select * from ProductOption
select * from ProductSize

select PriceFor, SourceID, MainPrice 
from Prices 
where PriceFor = 2 
  and SourceID in (select ProductOptionID from ProductOption where ProductId=7)
select * from Product
select ProductID, ProductName +' - '+ Convert(varchar(5),ProductID) as C
from Product

need inner join btw productoption > productsize and productoption > price 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T12:56:53.960

缺少主键并不会阻止您进行联接。联接可以是您选择的任何列。以下语法将连接 3 个表

```
SELECT A.*, B.*, C.*
FROM
   A
   INNER JOIN
   B
   INNER JOIN
   C
   ON B.Col1 = C.Col2
   ON A.Co3 = B.Col4 
```

但是，如果您没有涵盖连接中使用的列的索引，则性能可能不好。我想你的问题是如何加入 3 张桌子？请注意，“ON”的顺序是嵌套的，从内到外。表的顺序（在 ON 条件下）与它们在初始部分连接语句中出现的顺序相同。可能会令人困惑

# c# - 如何使用 Visual Studio 单元测试比较两个 XML 文件

> ID：16104951
> 
> 赞同：4
> 
> 时间：2013-04-19T12:46:22.673
> 
> 标签：c#, visual-studio, unit-testing, visual-studio-2012, mstest

我需要编写一个单元测试来确认当我修改一个 XML 文件时，我得到了一个特定的结果。我可以简单地将输入和输出作为字符串进行比较，但如果元素之间的空白等小东西不同，我不想失败。

有没有一种简单的方法来比较 Visual Studio 单元测试中的整个 XML 文件？

（如果重要的话，我使用的是 2012 年）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T13:06:51.447

你可以试试[XNode.DeepEquals](http://msdn.microsoft.com/en-us/library/system.xml.linq.xnode.deepequals.aspx)。请注意，对于 Microsoft 的 LINQ to XML 实现，该元素`<foo></foo>`与`<foo/>`.

如果您不介意第三方库，您可以使用[Saxon](http://saxon.sourceforge.net/)和[Altova XML Tools](http://www.altova.com/altovaxml.html)。

此外，可能是相关的：[C# 中的 Xml 比较](https://stackoverflow.com/questions/794331/xml-comparison-in-c-sharp)。

# c# - 在 Nancy 中测试自定义引导程序

> ID：16104958
> 
> 赞同：1
> 
> 时间：2013-04-19T12:46:54.140
> 
> 标签：c#, testing, mstest, bootstrapper, nancy

所以我有一个`CustomBootstrapper`，它做了很多应用程序初始化，包括 IoC 注册和 Quartz 调度程序设置。这些模块还严重依赖`SuperSimpleViewEngine`.

现在我需要对此进行测试，当然使用 MSTest，而且每个人现在可能都知道这行不通。南希的家伙很早就发现了这一点，并提供了这个解决方法：[https](https://github.com/NancyFx/Nancy/wiki/Nancy-Testing-View-Location) ://github.com/NancyFx/Nancy/wiki/Nancy-Testing-View-Location我认为它有效，因为当我在我的测试用例中尝试创建我的引导程序的一个实例惨遭失败，因为有多个 RootPathProviders。

因此，解决方案似乎是使用 ConfigurableBootStrapper。所以我想唯一的问题是，我如何确保 ConfigurableBootStrapper 的设置方式与我的一样`CustomBootStraper`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-06T01:16:20.033

```
 var browser = new Browser(cfg =>
        {
            cfg.RootPathProvider<YourRootPathProvider>();
            cfg.Module<YourModule>();
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T12:13:00.707

在您的测试中，创建一个测试引导程序，它继承自您的自定义引导程序，然后仅覆盖中断的功能。假设您的覆盖很小，请使用该测试引导程序进行测试。

# angularjs - 正确格式化 AngularJS 的 ASP.NET MVC 日期

> ID：16104960
> 
> 赞同：5
> 
> 时间：2013-04-19T12:46:58.727
> 
> 标签：angularjs, asp.net-mvc

我正在使用 AngularJS 从 ASP.NET 服务器应用程序获取数据并将其显示在客户端。这是我得到的：

```
ProjectID │ CreatedOn
══════════╪══════════════════════
13241     │ /Date(1338364250000)/   
13411     │ /Date(1338370907000)/ 
```

如您所见，日期显示不正确。我想将日期格式化为`YYYY-MM-DD HH:MM:SS`. 我怎样才能做到这一点？

* * *

HTML 视图：

```
<div ng-app ng-controller="FirstCtrl">
    <table>
        <thead>
            <tr>
                <td>
                    ProjectID
                </td>
                <td>
                    CreatedOn
                </td>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="team in teams" class="thumbnail">
                <td>
                    {{team.ProjectID}}
                </td>
                <td>
                    {{team.CreatedOn}}
                </td>
            </tr>
        </tbody>
    </table>
</div> 
```

动作方法：

```
public JsonResult GetUser()
{
   return Json(new { data = ProjectService.GetPrefixUsedCount(1).ToArray() });
} 
```

返回的 JSON 结果：

```
{"data":[{"ProjectID":13241,"CreatedOn":"\/Date(1338364250000)\/"},
{"ProjectID":13411,"CreatedOn":"\/Date(1338370907000)\/"}] 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-08-14T16:41:53.130

## 快速修复

如果无法更改 MVC 中的格式，您可以这样做：

```
{{ team.CreatedOn.slice(6, -2) | date: 'yyyy-MM-dd HH:mm:ss' }} 
```

关键是`.slice(6, -2)`——它去掉了所有多余的垃圾，只剩下纪元时间。

* * *

## 想要过滤器？

如果您经常使用它，您可能更喜欢自定义过滤器。这个包装[了现有的`date`过滤器](https://docs.angularjs.org/api/ng/filter/date)：

```
.filter('mvcDate', ['$filter', $filter =>
  (date, format, timezone) =>
    date && $filter('date')(date.slice(6, -2), format, timezone)
]); 
```

现在只需`date`用我们的自定义过滤器替换过滤器：

```
{{ team.CreatedOn | mvcDate: 'yyyy-MM-dd HH:mm:ss' }} 
```

这是一个[关于 JSFiddle 的工作示例](https://jsfiddle.net/Jordan/Lg3zesy0/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-23T17:34:09.950

创建自定义过滤器，如下所示：

```
app.filter("dateFilter", function () {
    return function (item) {
        if (item != null) {
            return new Date(parseInt(item.substr(6)));
        }
        return "";
    };
}); 
```

然后，您可以在 HTML 中应用过滤器

```
<tr ng-repeat="team in teams" class="thumbnail">
<td>{{team.CreatedOn | dateFilter | date:"dd-MM-yyyy"}}</td> 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T12:50:39.093

你可能应该看看

[http://docs.angularjs.org/api/ng.filter:date](http://docs.angularjs.org/api/ng.filter:date)

它为您提供了以所需格式修改和显示日期的所有必要工具。

**编辑 ：**

您能否修改您的服务器以不将日期发送为 Date(****) 但只是 **** 很好...如果您将日期发送为 Date(****)，那么您将剩下 2两个选项都不好。

1.  评估日期。NO eval .. 这对您的健康不利。
2.  使用正则表达式的组合去除日期。再次，它可能..但不推荐。

为什么要把它寄进来剥掉？为什么不把它从服务器端本身拿出来呢？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-13T08:38:28.107

在您的 ASP.NET MVC 域模型中，有一个额外的属性可以呈现 angular 预期的格式。

```
 public string CreatedOnJson
         {
             get
             {
                 return JsonConvert.SerializeObject(CreatedOn, new JavaScriptDateTimeConverter()).Replace("new Date(","").Replace(")","");

             }
         } 
```

这样您就可以使用角度日期过滤器以您喜欢的方式显示：

```
 {{team.CreatedOn | date:'yyyy-MM' }} 
```

# php - 组合包含重复值的数组，其中 array_combine 不适用

> ID：16104963
> 
> 赞同：0
> 
> 时间：2013-04-19T12:47:04.607
> 
> 标签：php

我有这个数组：

```
Array ( [0] => Post Slider [1] => Post Slider Wide [2] => Post Slider ) 
```

而这第二个数组：

```
Array ( [0] => Tools Sliders [1] => Tools Sliders [2] => modules-test ) 
```

当我使用 PHP 函数 array_combine 时，它​​不包含重复项，如下所示：

```
Array ( [Post Slider] => modules-test [Post Slider Wide] => Tool Sliders ) 
```

我很困惑如何获得这样的预期结果（不删除重复项，完成一对一的关系）：

```
Array ( [Post Slider] => Tools Sliders [Post Slider Wide] => Tools Sliders [Post Slider] => modules-test) 
```

我将不胜感激任何帮助和提示..

问候， 法典

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:51:22.003

无论你做什么，你的输出数组中都不会有重复的键。键总是唯一的。

唯一的解决方案是为键分配一个具有例如两个值的数组。

```
$keys   = array ( 'Post Slider', 'Post Slider Wide', 'Post Slider' );
$values = array ( 'Tools Sliders', 'Tools Sliders', 'modules-test' );
$output = array();

$size = sizeof($keys);
for ( $i = 0; $i < $size; $i++ ) {
    if ( !isset($output[$keys[$i]]) ) {
        $output[$keys[$i]] = array();
    }
    $output[$keys[$i]][] = $values[$i];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T12:56:38.903

```
$count1 = count($array1);
$count2 = count($array2);
$array = array();

if($count1==$count2){
    foreach($array1 as $i=>$val){
        $array[]=array($val,$array2[$i]);
    }
} 
```

你会得到：

```
Array (
 [0] => Array(
         [0] => Post Slider
         [1] => Tools Sliders
       )
 ............
) 
```

# ios - 如何确定地图上的某个点是否在用户在 iOS 上当前位置的半径范围内？

> ID：16104968
> 
> 赞同：1
> 
> 时间：2013-04-19T12:47:32.597
> 
> 标签：ios, google-maps, cllocationmanager, cllocationdistance

我是 iOS 新手，我必须制作一个应用程序，用户将在其中知道其当前位置，并以公里为单位输入一个值，我必须找出另一对给定的纬度和经度（在map) 在给定范围内。请建议我们是否有任何功能可以用来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T12:51:39.683

[您可以通过CLLocationManager](https://developer.apple.com/library/mac/#documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html)或通过 MapView 的 userLocation获取用户位置。然后你可以创建一个`CLRegion`并使用它的`– containsCoordinate:`方法，比如：

```
CLRegion* region = [[CLRegion alloc] initCircularRegionWithCenter:centerCoord radius:radius identifier:@""];
BOOL isInside = [region containsCoordinate:yourCoord] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T12:52:23.693

```
- (CLLocationDistance)distanceFromLocation:(const CLLocation *)location 
```

*CLLocationDistance*是双精度类型定义（以米为单位）

将其转换为公里并将其与给定值进行比较。

# c# - 从文件中的特定位开始读取一个字节 - C#

> ID：16104971
> 
> 赞同：1
> 
> 时间：2013-04-19T12:47:40.130
> 
> 标签：c#, byte, bit-shift, bits

我需要从 .bin 中读取一个字节，但从特定位开始，例如：

如果我有这两个字节：

```
01010111 10101100 
```

该程序应该能够从任何位读取，假设从第 3 位（或索引 2）开始：

```
01[010111 10]101100 
```

结果应该是 01011110

我可以从任何位开始读取一个字节，除非起始位是字节末尾的那个：0101011[1 ...] //返回不同的东西..

我的代码是：

```
byte readByte(int indexInBits, byte[] bytes)
    {
        int actualByte = (indexInBits+1)/8;
        int indexInByte = (indexInBits)%8;
        int b1 = bytes[actualByte] << indexInByte;
        int b2 = bytes[actualByte+1] >> 8 - indexInByte;
        return (byte)(b1 + b2);
    } 
```

它有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:03:44.293

```
byte ReadByte(int index, byte[] bytes)
{
    int bytePos = index / 8;
    int bitPos = index % 8;
    int byte1 = bytes[bytePos] << bitPos;
    int byte2 = bytes[bytePos + 1] >> 8 - bitPos;
    return (byte)(byte1 + byte2);
} 
```

我现在无法验证这一点，但这应该可以按预期工作。

# maven - Grails Fixtures: grails run-app 有效，但 mvn grails:run-app 无效

> ID：16104974
> 
> 赞同：0
> 
> 时间：2013-04-19T12:47:45.800
> 
> 标签：maven, grails, fixtures

我已经安装了 Grails Fixtures 插件 ( [http://www.grails.org/plugin/fixtures](http://www.grails.org/plugin/fixtures) ) 用于将一些初始数据加载到我的数据库中以用于开发和测试环境。我还将 Grails 与 Maven 集成一起使用。

我已将数据加载代码添加到 BootStrap.groovy：

```
import grails.util.Environment

class BootStrap {
    def fixtureLoader

    def init = { servletContext ->

        if (Environment.current == Environment.DEVELOPMENT || Environment.current == Environment.TEST) {
            //def fixtureLoader = new FixtureLoader(grailsApplication)
            fixtureLoader.load("init")
        }
    }

} 
```

当我使用“grail run-app”运行我的 Grails 应用程序时，它运行良好，但如果我使用 Maven Grails 命令“mvn grails:run-app -Dgrails.env=development”，那么它就不起作用了。它抛出以下错误：

```
Error executing bootstraps; nested exception is java.lang.NullPointerException: Cannot invoke method load() on null object 
```

如果我使用 Maven Grails 命令“mvn grails:run-app”，似乎“fixtureLoader”bean 未正确初始化。

你有什么主意吗？或者它可能是一个错误......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T13:25:29.153

将其添加为`dependency`in`pom.xml`而不是`BuildConfig.groovy`. Maven 查看 pom 以解决依赖关系（在本例中为插件）。

```
<dependency>
  <groupId>org.grails.plugins</groupId>
  <artifactId>fixtures</artifactId>
  <version>1.0.7</version>
  <scope>runtime</scope>
  <type>zip</type>
</dependency> 
```

注意：范围`runtime`使工件在`test`范围内也可用。

# xslt - XSLT 命名空间错误无法解析 qname

> ID：16104975
> 
> 赞同：0
> 
> 时间：2013-04-19T12:47:47.083
> 
> 标签：xslt, qnames

stackoverflow 的好人...我正在尝试创建一个 XSLT 转换，它将生成一个 Turtle 文件（与 RDF 相关）。其中一部分涉及前缀命名空间的输出，如下所示：

```
<xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:sap="http://www.sap.com/sapxsl"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
    xmlns:sap_coda="http://www.sapmantics.com/sap_coda#"
    version="1.0">

  <xsl:strip-space elements="*"/>

  <xsl:template match="/">
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>' .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix dc: <http://purl.org/dc/elements/1.1/> .
... 
```

当我尝试应用转换时，我得到：

```
$ xsltproc zcoda_ttl_v02x.xslt zcoda_data_v02.xml > zcoda_data_v02x.ttl | x.txt
zcoda_ttl_v02x.xslt:10: namespace error : Failed to parse QName 'http:'
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>' .
                    ^
zcoda_ttl_v02x.xslt:10: parser error : error parsing attribute name
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>' .
                    ^
zcoda_ttl_v02x.xslt:10: parser error : attributes construct error
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>' .
                    ^
zcoda_ttl_v02x.xslt:10: parser error : Couldn't find end of Start Tag http: line 10
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>' . 
```

所以，我在这里不知所措。我寻求的 Turtle 输出包含许多这样的情况。有什么方法可以停止处理器并仅将 http... 视为纯数据（如 xml 中的 CDATA 选项）？谢谢，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:55:58.920

您可以将 http 内容包含在 xsl:text 我猜：

```
 <xsl:transform xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
                xmlns:sap="http://www.sap.com/sapxsl" 
                xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" 
                xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#" 
                xmlns:sap_coda="http://www.sapmantics.com/sap_coda#" 
                version="1.0">

  <xsl:strip-space elements="*"/>

  <xsl:template match="/">
@prefix rdfs: <xsl:text><![CDATA[<http://www.w3.org/2000/01/rdf-schema#>]]></xsl:text> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T13:00:41.587

使用*实体*：

```
@prefix rdfs: &lt;http://www.w3.org/2000/01/rdf-schema#&gt;' .
@prefix owl: &lt;http://www.w3.org/2002/07/owl#&gt; .
@prefix dc: &lt;http://purl.org/dc/elements/1.1/&gt; . 
```

# twitter-bootstrap - Bootstrap 在响应式布局中停止响应

> ID：16104978
> 
> 赞同：0
> 
> 时间：2013-04-19T12:47:49.160
> 
> 标签：twitter-bootstrap, responsive-design

我目前正在使用 twitter bootstrap 进行第一次测试，并且已经遇到了一些问题。

我正在做一个基本的一列布局，如下所示：

![大屏布局](https://i.stack.imgur.com/Jo3N6.png)

我希望这在所有屏幕尺寸上都相同，问题是当我调整窗口大小时，我会得到类似的东西

![中屏布局](https://i.stack.imgur.com/WLLN4.png)

最后：

![小屏幕布局](https://i.stack.imgur.com/UDZsJ.png)

这是我使用的 html 代码：

```
 <div class="container">
                $page = get_page( 21, $output = OBJECT, $filter = 'raw' );
                ?>
                    <div class="span3 center">
                        <div class="icons-logoblue">
                        </div>
                        <div class="text-justify">
                            <?php echo $page->post_content; ?>
                        </div>
                    </div>
                <?php
            }
        ?>
    </div> 
```

我希望它总是像第一张图片一样。

有人可以帮我吗？

编辑 ：

这是生成的html代码：

```
<div id="main">
     <div class="container">
                <div class="span12 center">
                <div class="span3 center">
                    <div class="icons-logoblue">
                    </div>
                    <div class="text-justify">
                        Partenaire de la stratégie immobilière des entreprises, Foncière des Régions conçoit à leurs côtés des solutions immobilières durables et innovantes selon un double objectif : valoriser le patrimoine urbain existant et concevoir l’immobilier de demain. L’entreprise détient et gère un patrimoine de 9,3 Md€, loué principalement à des Grands Comptes leaders de leur secteur. Cette culture du partenariat responsable repose sur des valeurs et des savoir-faire clés : vision, partenariat et expertise.                      
                                            </div>

                </div>
            </div>
        </div>

</div><!-- #main --> 
```

# java - Spring 的 DeferredResult setResult 与超时的交互

> ID：16104980
> 
> 赞同：4
> 
> 时间：2013-04-19T12:47:55.990
> 
> 标签：java, spring, tomcat, comet, spring-3

我正在`DeferredResult`Tomcat上试验Spring，我得到了疯狂的结果。是我做错了什么，还是 Spring 或 Tomcat 中存在一些错误？我的代码很简单。

```
@Controller
public class Test {
    private DeferredResult<String> deferred;

    static class DoSomethingUseful implements Runnable {
        public void run() {
            try { Thread.sleep(2000); } catch (InterruptedException e) { }
        }
    }

    @RequestMapping(value="/test/start")
    @ResponseBody
    public synchronized DeferredResult<String> start() {
        deferred = new DeferredResult<>(4000L, "timeout\n");
        deferred.onTimeout(new DoSomethingUseful());
        return deferred;
    }

    @RequestMapping(value="/test/stop")
    @ResponseBody
    public synchronized String stop() {
        deferred.setResult("stopped\n");
        return "ok\n";
    }
} 
```

所以。该`start`请求创建一个`DeferredResult`4 秒超时。该`stop`请求将在`DeferredResult`. 如果您`stop`在延迟结果超时之前或之后发送，一切正常。

但是，如果您`stop`在超时的同时发送`start`，事情就会变得疯狂。我添加了一个`onTimeout`操作以使其易于重现，但这不是问题发生所必需的。使用 APR 连接器，它只会死锁。使用 NIO 连接器，它有时可以工作，但有时它会错误地将“超时”消息发送给`stop`客户端，并且永远不会回答`start`客户端。

要对此进行测试：

```
curl http://localhost/test/start & sleep 5; curl http://localhost/test/stop 
```

我不认为我做错了什么。Spring 文档似乎说可以随时调用`setResult`，即使在请求已经过期之后，也可以从任何线程调用（“应用程序可以从它选择的线程产生结果”）。

使用的版本：Linux 上的 Tomcat 7.0.39，Spring 3.2.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-31T17:54:40.780

这是一个很好的错误发现！
只需添加有关该错误（[已修复](https://jira.springsource.org/browse/SPR-10485)）的更多信息，以便更好地理解。

setResult() 中有一个同步块，它一直延伸到提交调度的部分。如果同时发生超时，这可能会导致死锁，因为 Tomcat 超时线程有自己的锁定，只允许一个线程进行超时或分派处理。

**详细解释：**

当您在请求“超时”的同时调用“停止”时，两个线程正在尝试锁定 DeferredResult 对象“延迟”。

1.  执行“onTimeout”处理程序的线程这是 Spring 文档的摘录：

    > 当异步请求在 DeferredResult 设置之前超时时，从容器线程调用此 onTimeout 方法。它可以调用**setResult**或 setErrorResult 来恢复处理。

2.  另一个执行“停止”服务的线程。

如果在 stop() 服务期间调用的调度处理获得了“延迟”锁，它将等待一个 tomcat 锁（比如 TomcatLock）来完成调度。
并且如果执行超时处理的其他线程已经获得了 TomcatLock，则该线程等待在“延迟”上获得锁以完成 setResult()！

所以，我们最终陷入了典型的僵局！

# asp.net-mvc - 如何从 MVC3/Razor 中的操作中获取响应“流”？

> ID：16104984
> 
> 赞同：6
> 
> 时间：2013-04-19T12:48:29.163
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在使用 MVC3、.NET4、C#。

我需要使用 Razor 视图创建一些 XHTML。我通过一个动作来做到这一点。

```
 public ActionResult RenderDoc(int ReportId)
    {
        //A new document is created.

        return View();
    } 
```

然后我需要从中获取输出并将其转换为 Word Doc。我正在使用第 3 方组件来执行此操作，它需要读取用于转换为 DOC 的 XHTML 源的“流”或“文件”，如下所示：

```
document.Open(MyXhtmlStream,FormatType.Html,XHTMLValidationType.Transitional); 
```

**我的问题：**

什么是调用“RenderDoc”操作并将结果作为流输入“MyXhtmlStream”的好方法。

非常感谢。

**编辑：我有另一个想法！**

1）在动作中渲染视图以创建一个字符串（XHTMLString）。我已经看到了一种在 SO 上执行此操作的方法。

2) 创建一个 MemoryStream 并将这个字符串放入其中。

```
Stream MyStream = New MemoryStream("XHTMLString and encoding method"); 
```

**EDIT2：基于达林的回答**

我需要进一步分类，我希望通过调整达林的代码来达到我的目的。

```
 public class XmlDocumentResult : ActionResult
 {
  private readonly string strXhtmlDocument;
  public XmlDocumentResult(string strXhtmlDocument)
  {
    this.strXhtmlDocument = strXhtmlDocument;
  }

  public override void ExecuteResult(ControllerContext context)
  {
    WordDocument myWordDocument = new WordDocument();
    var response = context.HttpContext.Response;
    response.ContentType = "text/xml";
    myWordDocument.Open(response.OutputStream, FormatType.Html, XHTMLValidationType.Transitional);
  }
 } 
```

以上更接近我的需要。请注意第 3 方 WordDocument 类型。所以仍然存在如何将“strXhtmlDocument”放入“Response.OutputStream”的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T13:20:44.407

我只想写一个自定义的 ActionResult 来处理它：

```
public class XmlDocumentResult : ActionResult
{
    private readonly Document document;
    public XmlDocumentResult(Document document)
    {
        this.document = document;
    }

    public override void ExecuteResult(ControllerContext context)
    {
        var response = context.HttpContext.Response;
        response.ContentType = "text/xml";
        document.Open(response.OutputStream, FormatType.Html, XHTMLValidationType.Transitional);
    }
} 
```

如果需要，您当然可以调整响应`Content-Type`，如果需要，还可以附加`Content-Disposition`标题。

然后只需让我的控制器操作返回此自定义操作结果：

```
public ActionResult RenderDoc(int reportId)
{
    Document document = repository.GetDocument(reportId);
    return new XmlDocumentResult(document);
} 
```

现在控制器动作不再需要处理管道代码了。控制器操作执行典型控制器操作应该执行的操作：

1.  查询模型
2.  将此模型传递给 ActionResult

在您的情况下，模型是此类`Document`或其他名称。

# javascript - 这是什么语法？; （函数（$，未定义）

> ID：16104993
> 
> 赞同：9
> 
> 时间：2013-04-19T12:48:41.590
> 
> 标签：javascript, jquery

```
; (function ($, undefined)
{

    // all the variables and functions of the js document

})(jQuery); 
```

我已经在 jquery/javascript 文件中看到过两次缩放脚本。我不明白这到底是什么。我似乎无法用谷歌搜索它，我不记得最近在学习 jquery 和 js 时在 tizag 或 w3schools 上遇到过这个。

这段代码之前或之后没有任何内容（除了一些注释）。所以我完全不知道`(function())(jQuery);`是什么或做什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T12:50:43.313

```
(function ($, undefined)
{

    // all the variables and functions of the js document

})(jQuery); 
```

调用一个代码块，确保里面

*   $ 可以用来指代`jQuery`
*   `undefined`是`undefined`（编辑：这很有用，因为`undefined`当时可以在最旧的浏览器中重新定义，现在没用了）

并且任何缩小器都可以更改`undefined`为更短的标签。

初始`;`确保您可以将此文件与另一个文件连接：没有这个，如果之前的文件类似于

```
(function (){

})() 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T12:50:18.017

这是一种确保`$`确实是`jQuery`对象并确保任何局部变量和方法都是私有作用域的方法，即不污染全局命名空间。

它是一个自调用的匿名函数，传递的参数是jQuery，意味着`$`将是`jQuery`对象。

在函数内部声明意味着内部变量和方法在函数外部不可见。

# linux - 将 DB2 表数据从一个远程 DB 服务器复制/替换到另一个

> ID：16104997
> 
> 赞同：0
> 
> 时间：2013-04-19T12:48:45.870
> 
> 标签：linux, db2, ibm-data-studio

我在不同的远程位置有两台 IBM DB2 服务器。

我需要将数据从第一台服务器上的一个数据库上的多个表复制到第二台服务器上的另一个数据库。

以前，我使用 IBM 数据工作室工具将数据导出`Load Replace`到第二台服务器的另一个表中。

我需要一种方法来自动化它。可能通过命令行shell脚本。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:48:50.843

您始终可以使用 DB2 中包含的“数据移动”工具。在一侧（源服务器）使用**EXPORT ，然后在另一侧（目标服务器）使用 IMPORT 或 LOAD。**但是，您必须注意运输。我的意思是，您必须将数据从一台服务器复制到另一台服务器（通过 SCP、FTP 等），您可以自动完成所有这些操作。

此外，您可以使用一个名为**INGEST**的新工具。它是一个客户端工具，这个工具会将数据放在远程服务器的目标表中。这意味着源服务器将是远程服务器的客户端（您可以在数据库服务器中编目远程数据库）。

最后，您可以在两个服务器之间创建一个**联合（这是我最喜欢的）。**这意味着在数据库中（例如在目标服务器中），您呈现另一个（源）服务器的表。这允许您在本地和远程表之间进行查询，这也将允许您从引用远程服务器中表的 SELECT 的 CURSOR 创建本地表的 LOAD。

最后一个选项听起来可能很复杂，但事实并非如此。您只需要定义远程元素（昵称、包装器等）就可以了。一旦配置完毕，您就不必担心文件传输、状态等。此选项是免费的，因为两个服务器都是 DB2（您可以使用其他 RDBS 来做到这一点）

了解更多信息：

*   摄取：http: [//publib.boulder.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.dm.doc/doc/c0057237.html](http://publib.boulder.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.dm.doc/doc/c0057237.html)
*   加载、导入和导出并在上一个链接的同一级别（数据库管理 > 数据移动实用程序和参考）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T16:20:33.850

有多个选项（使用脚本或 DB2 复制）：

1.  在一台服务器上导出数据的脚本，最终 tar/gz 并将其发送到每个 SSH/SCP 的第二台服务器。在第二台服务器上，另一个脚本提取并加载数据。

2.  DB2 hat 内置了复制支持。

检查 DB2 infocenter@IBM 或 Google。这是一项简单且非常常见的任务。