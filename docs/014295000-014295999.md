# StackOverflow 问答 14295000-14295999

# android - 我的 android 应用程序有一个可以运行但未显示在服务列表中的意图服务

> ID：14295003
> 
> 赞同：1
> 
> 时间：2013-01-12T15:53:12.853
> 
> 标签：android, android-intent, intentservice

我的应用程序中有一个意图服务。当我的应用程序启动时，它成功运行服务类并且运行良好（将从蓝牙获得的数据存储在`sqlite`数据库中）。意图服务仅适用于我的应用程序，不会被其他应用程序使用。

但是，当应用程序长时间处于非活动状态时，服务有时会停止运行。我希望我的服务能够可靠地运行——这就是我创建服务的原因。我还希望该服务在手机启动时自行启动（它不会这样做）。

当我去`settings -> applications -> running services`我的服务没有列出那里。

这是我的清单文件的相关部分：

```
 <service android:enabled="true" android:name=".MyHxMService" android:exported="false">
        <intent-filter>
        <action
        android:name="org.xxxxx.MyHxMService" />
        </intent-filter>
    </service>
    <receiver android:name="MyStartupIntentReceiver">
        <intent-filter>
        <action
        android:name="android.intent.action.BOOT_COMPLETED" />
        <category android:name="android.intent.category.HOME" />
        </intent-filter>
    </receiver>
</application> 
```

这是我的意图服务类声明：

```
public class MyHxMService extends IntentService { 
```

这是我的**MyStartupIntentReceiver**：

```
package com.NewApp;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class MyStartupIntentReceiver extends BroadcastReceiver{
@Override
public void onReceive(Context context, Intent intent) {
    Intent serviceIntent = new Intent();
    serviceIntent.setAction("org.xxxxx.MyHxMService");
    context.startService(serviceIntent);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:54:58.533

启动 `MyHxMService`服务为

```
@Override
public void onReceive(Context context, Intent intent) {

    Intent serviceIntent = new Intent(context,org.xxxxx.MyHxMService.class);
    context.startService(serviceIntent);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T16:21:27.540

1.  Termination of service :`IntentService`被设计成类似`AsyncTask`，一旦工作完成就停止。如果您需要其他行为，请考虑扩展`Service`类本身。此外，`START_STICKY`从 类`onStartCommand()`中返回`Service`告诉 android 保持活动状态，除非明确停止。

2.  启动时启动：您已经设置了 BOOT_COMPLETED IntentReciever，只需使用适当的上下文和组件类创建 Intent，如其他答案所示。

# ruby-on-rails - 网站死了。“需要采取行动：Rails 安全漏洞”

> ID：14295007
> 
> 赞同：1
> 
> 时间：2013-01-12T15:53:25.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3, git, github, refinerycms

我的网站目前已死，因此我无法解释这对我来说有多紧迫。

情况：几天前，我收到 Heroku 的一封电子邮件“需要采取行动：Rails 安全漏洞”，建议我将 rails 更新到版本 '3.2.11'。在我按照电子邮件中的所有步骤进行操作后，我尝试打开我的网站。当我看到我无法打开我的网站时，我感到非常惊讶。我的网站是用`RefineryCMS`.

是否有可能使用 git 将我的网站恢复到之前一切正常的时间点？

当我在本地运行该站点时，出现以下错误：

> ActiveRecord::RecordNotFound in Refinery::PagesController#home
> 
> 找不到 id=torte-za-rodendan 的 Refinery::Page

...

> app/views/stranice/naslovnica/_favourite_products.html.erb:7:in `_app_views_stranice_naslovnica__favourite_products_html_erb__4156700835010289094_66485000'
> 
> app/views/refinery/pages/home.html.erb:16:in `_app_views_refinery_pages_home_html_erb___2482419061129865361_67

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T16:10:42.927

是的，我们都收到了 Heroku 发来的电子邮件。

[由于您的网站之前使用 git 进行版本控制，您可以按照以下步骤](https://stackoverflow.com/questions/927358/undo-last-git-commit)撤消上次提交。

但是，我不确定您是否真的需要执行上述操作。您只需要确保您的 heroku 应用程序在 rails 3.2.11 上运行 - 这是一个非常严重的安全问题，也许 heroku 甚至会阻止升级速度不够快的网站。

跟着这些步骤：

*   运行测试并确保一切正常
*   `git checkout -b new_rails`通过 git ( )开辟一个新的分支
*   在 Gemfile 中更改 Rails 3.2.11
*   Change RAILS_GEM_VERSION to '3.2.11' in environment.rb
*   Run `bundle update rails`
*   Run the tests and see if everything still works
*   If not, reverse back to the old branch by doing `git checkout master`; optionally delete the new branch by doing `git branch -D new_rails`

Doing it only on the new branch ensures nothing breaks.

If you still get errors afterwards, please tell us what's in heroku's log.

# multithreading - 多线程访问数据

> ID：14295013
> 
> 赞同：3
> 
> 时间：2013-01-12T15:53:57.710
> 
> 标签：multithreading, delphi, delphi-xe3

我有一个我写的应用程序，我有三个线程。线程 1、2 和 3。

还有两个数字 1 和 2 的列表。

1 号线程将数据插入到 1 号列表中。

2 号线程从列表 1 中获取数据。

2 号线程将数据插入到 2 号列表中。

3 号线程从列表 2 中获取数据。

如果线程同时运行会占用大量CPU。可以在列表中输入数据，不需要第二和第三运行线程。

如何通知线程列表中的新数据被插入并且他们需要开始对新数据进行处理呢？

联系您的技术和有效方式？

非常感谢，非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T22:08:52.190

这是一个示例，它从您的三个线程中添加 list1 和 list2 中的值。

每次将值放入列表时，`Event`都会触发 an 并且处理此事件的线程会拉出列表中的最后一个值并清除事件标志。

在清除事件标志之前，不能将新值放入列表中。

中间线程对新值进行中间存储，而不是停止第一个线程。

所有事件都是可等待的，因此可以让 cpu 放心。

列表是线程安全的。

```
program Project62;

{$APPTYPE CONSOLE}

uses
  System.SysUtils,
  System.Classes,
  System.SyncObjs,
  System.Generics.Collections;

Type
  TMyThread1 = Class(TThread)
    private
      fMySyncAddList : TSimpleEvent;
      fMyList : TThreadList<Integer>;
      fAddVal : Integer;
    public
      Constructor Create(ASyncAddList: TSimpleEvent; AList: TThreadList<Integer>);
      procedure Execute; override;
  End;
  TMyThread2 = Class(TThread)
    private
      fMySyncAddList1,fMySyncAddList2 : TSimpleEvent;
      fMyList1,fMyList2 : TThreadList<Integer>;
      fAddVal : Integer;
    public
      Constructor Create(ASyncAddList1,ASyncAddList2: TSimpleEvent; AList1,AList2 : TThreadList<Integer>);
      procedure Execute; override;
  End;
  TMyThread3 = Class(TThread)
    private
      fMySyncAddList2 : TSimpleEvent;
      fMyList2 : TThreadList<Integer>;
      fAddVal : Integer;
    public
      Constructor Create(ASyncAddList2: TSimpleEvent; AList2 : TThreadList<Integer>);
      procedure Execute; override;
  End;

{ TMyThread1 }

constructor TMyThread1.Create( ASyncAddList : TSimpleEvent; AList: TThreadList<Integer>);
begin
  Inherited Create(false);
  fMySyncAddList := AsyncAddList;
  fMyList := AList;

end;

procedure TMyThread1.Execute;
var
  stateAcknowledged : boolean;
begin
  stateAcknowledged := true;
  while (not Terminated) do
  begin
    if stateAcknowledged then
    begin // Do some work and adda a value to list1
      fAddVal := Random(100);
      fMyList.Add(fAddVal);
      fMySyncAddList.SetEvent; // Signal a new addition
      stateAcknowledged := false;
      //ShowVal;
      Sleep(1000);
    end
    else begin
      stateAcknowledged := (fMySyncAddList.WaitFor(100) <> wrSignaled);
    end;
  end;
end;

{ TMyThread2 }

constructor TMyThread2.Create(ASyncAddList1, ASyncAddList2: TSimpleEvent;
  AList1, AList2: TThreadList<Integer>);
begin
  Inherited Create(false);
  fMySyncAddList1 := AsyncAddList1;
  fMySyncAddList2 := AsyncAddList2;
  fMyList1 := AList1;
  fMyList2 := AList2;    
end;

procedure TMyThread2.Execute;
var
  wr : TWaitResult;
  list : TList<Integer>;
  pulled : Boolean;
begin
  pulled := false;
  while (not Terminated) do
  begin
    if pulled then // Add a value to list2
    begin
      wr := fMySyncAddList2.WaitFor(0);
      if (wr <> wrSignaled) then
      begin
        fMyList2.Add(fAddVal);
        fMySyncAddList2.SetEvent; // Signal a new addition
        pulled := false;
      end
      else Sleep(100);
    end
    else begin // Wait for a new value in list1
      wr := fMySyncAddList1.WaitFor(INFINITE);
      if Terminated then
        Exit;
      if (wr = wrSignaled) then
      begin
        // Pull out the value
        list := fMyList1.LockList;
        try
          fAddVal := list.Last;
        finally
          fMyList1.UnlockList;
        end;
        // All clear
        pulled := true;
        fMySyncAddList1.ResetEvent;
        //ShowVal;
      end;
    end;
  end;
end;

{ TMyThread3 }

constructor TMyThread3.Create(ASyncAddList2: TSimpleEvent;
  AList2: TThreadList<Integer>);
begin
  Inherited Create(false);
  fMySyncAddList2 := AsyncAddList2;
  fMyList2 := AList2;
end;

procedure TMyThread3.Execute;
var
  wr : TWaitResult;
  list : TList<Integer>;
begin
  while not Terminated do
  begin
    wr := fMySyncAddList2.WaitFor(INFINITE);
    if Terminated then
      Exit;
    if (wr = wrSignaled)  then // Wait for signal
    begin
      // Pull out the value
      list := fMyList2.LockList;
      try
        fAddVal := list.Last;
        //ShowVal;
      finally
        fMyList2.UnlockList;
      end;
      // Clear event
      fMySyncAddList2.ResetEvent;
    end;
  end;
end;

var
  list1,list2 : TThreadList<Integer>;
  syncList1,syncList2 : TSimpleEvent;
  thread1 : TMyThread1;
  thread2 : TMyThread2;
  thread3 : TMyThread3;
begin
  list1 := TThreadList<Integer>.Create;
  list2 := TThreadList<Integer>.Create;
  syncList1 := TSimpleEvent.Create(Nil,True,False,'',false);
  syncList2 := TSimpleEvent.Create(Nil,True,False,'',false);
  thread3 := TMyThread3.Create(syncList2,list2);
  thread2 := TMyThread2.Create(syncList1,syncList2,list1,list2);
  thread1 := TMyThread1.Create(syncList1,list1);
  Try
    WriteLn('Press [Enter] key to stop.');
    ReadLn;

  Finally
    thread3.Terminate;
    syncList2.SetEvent; // Wake up call
    thread3.Free;
    thread2.Terminate;
    syncList1.SetEvent; // Wake up call
    thread2.Free;
    thread1.Free;
    syncList1.Free;
    syncList2.Free;
    list1.Free;
    list2.Free;
  End;
end. 
```

* * *

添加了两个`TThreadedQueue`在线程之间传输信息的示例。线程改为保留整数的内部列表。正如@DavidHeffernan 指出的那样，代码要简单得多。

```
program Project63;

{$APPTYPE CONSOLE}

uses
  System.SysUtils,
  System.Classes,
  System.SyncObjs,
  System.Generics.Collections;

Type
  TMyThread1 = Class(TThread)
    private
      fMyList : TList<Integer>;
      fMyQueue : TThreadedQueue<Integer>;
      fAddVal : Integer;
    public
      Constructor Create(AQueue : TThreadedQueue<Integer>);
      procedure Execute; override;
  End;
  TMyThread2 = Class(TThread)
    private
      fMyList1,fMyList2 : TList<Integer>;
      fMyQueue1,fMyQueue2 : TThreadedQueue<Integer>;
      fAddVal : Integer;
    public
      Constructor Create(AQueue1,AQueue2: TThreadedQueue<Integer>);
      procedure Execute; override;
  End;
  TMyThread3 = Class(TThread)
    private
      fMyList : TList<Integer>;
      fMyQueue : TThreadedQueue<Integer>;
      fAddVal : Integer;
    public
      Constructor Create(AQueue : TThreadedQueue<Integer>);
      procedure Execute; override;
  End;

constructor TMyThread1.Create( AQueue : TThreadedQueue<Integer>);
begin
  Inherited Create(false);
  fMyQueue:= AQueue;
  fMyList := TList<Integer>.Create;
end;

procedure TMyThread1.Execute;
begin
  while (not Terminated) do
  begin
    Sleep(1000); // Simulate some work
    fAddVal := Random(100);
    fMyList.Add(fAddVal);
    fMyQueue.PushItem(fAddVal); // Signal a new addition
  end;
  fMyList.Free;
end;

constructor TMyThread2.Create(AQueue1,AQueue2: TThreadedQueue<Integer>);
begin
  Inherited Create(false);
  fMyQueue1 := AQueue1;
  fMyQueue2 := AQueue2;
  fMyList1 := TList<Integer>.Create;
  fMyList2 := TList<Integer>.Create;
end;

procedure TMyThread2.Execute;
var
  queueSize : Integer;
begin
  while (not Terminated) do
  begin
    if (fMyQueue1.PopItem(queueSize,fAddVal) = wrSignaled) and 
       (not Terminated) then
    begin
      fMyList1.Add(fAddVal);
      // Do some work and send a new value to next thread
      fMyQueue2.PushItem(fAddVal);
      fMyList2.Add(fAddVal);

    end;
  end;
  fMyList1.Free;
  fMyList2.Free;
end;

constructor TMyThread3.Create(AQueue : TThreadedQueue<Integer>);
begin
  Inherited Create(false);
  fMyQueue := AQueue;
  fMyList := TList<Integer>.Create;
end;

procedure TMyThread3.Execute;
var
  queueSize : Integer;
begin
  while not Terminated do
  begin
    if (fMyQueue.PopItem(queueSize,fAddVal) = wrSignaled) and 
       (not Terminated) then
    begin
      fMyList.Add(fAddVal);
      // Do some work on list

    end;
  end;
  fMyList.Free;
end;

var
  queue1,queue2 : TThreadedQueue<Integer>;
  thread1 : TMyThread1;
  thread2 : TMyThread2;
  thread3 : TMyThread3;
begin
  queue1 := TThreadedQueue<Integer>.Create;
  queue2 := TThreadedQueue<Integer>.Create;
  thread3 := TMyThread3.Create(queue2);
  thread2 := TMyThread2.Create(queue1,queue2);
  thread1 := TMyThread1.Create(queue1);
  Try
    WriteLn('Press [Enter] key to stop.');
    ReadLn;

  Finally
    thread3.Terminate;
    queue2.PushItem(0); // Wake up call
    thread3.Free;
    thread2.Terminate;
    queue1.PushItem(0); // Wake up call
    thread2.Free;
    thread1.Free;
    queue1.Free;
    queue2.Free;
  End;
end. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T16:08:20.990

首先想到的是信号量。信号量是一种内部带有计数器的同步原语：一个线程尝试递减计数器，如果它为零，则线程阻塞（即没有调度并且不占用 CPU，只是无害地等待）。另一个线程增加计数器，导致阻塞线程继续。

您可能对每个列表都有一个信号量，因此消费线程在读取之前递减信号量，而生产者线程在写入后递增它。

还有一件事需要注意：是否允许一个线程从列表中获取数据，而另一个线程正在修改它？这取决于列表（或一般的集合）的实现方式，因此请尝试在文档中查找有关列表的“线程安全”的内容。也许您需要另一个同步 primite：互斥锁。互斥锁被线程“获取”然后“释放”，当多个线程试图锁定一个互斥锁时，其中一个必须等​​待。每个列表一个互斥锁，在此互斥锁上进行修改和读取，在这里可能是合适的。

# mysqli - MySQLi 已安装但未启用

> ID：14295017
> 
> 赞同：0
> 
> 时间：2013-01-12T15:54:17.837
> 
> 标签：mysqli

伙计们

我已经从源头安装了 mysqli.so：

```
[root@li460-123 no-debug-non-zts-20090626]# pwd
/usr/lib64/extensions/no-debug-non-zts-20090626
[root@li460-123 no-debug-non-zts-20090626]# ls
mysqli.so  pdo_mysql.so
[root@li460-123 no-debug-non-zts-20090626]# 
```

然后我在 /php-install-2/etc/php.ini （我的 php 安装位置）中启用它：

```
extension=/usr/lib64/extensions/no-debug-non-zts-20090626/mysqli.so 
```

然后我重新启动我的 nginx 服务器，但 phpinfo 没有显示 MySQLi。

```
[http://sobugou.com/phpinfo.php][1] 
```

我的 php 安装在

```
[root@li460-123 php-install-2]# pwd
/disk1/php-install-2
[root@li460-123 php-install-2]# ls
bin  etc  include  lib  man  sbin  share  var
[root@li460-123 php-install-2]# cd etc/
[root@li460-123 etc]# ls
php-fpm.conf  php-fpm.conf.default  php.ini
[root@li460-123 etc]# 
```

有人可以帮忙吗？谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:23:39.593

当您查看[http://sobugou.com/phpinfo.php](http://sobugou.com/phpinfo.php)时，您可以看到`Loaded Configuration File`设置为`(none)`. 这意味着您的 php.ini 配置文件没有被使用。可以`--with-config-file-path=PATH`在 PHP 编译期间使用标志修复问题。

查看更多：[php.ini 是不存在的已加载配置文件（无）](https://stackoverflow.com/questions/10711698/php-ini-is-nonexistent-loaded-configuration-file-none)

# sql - sql数据顺序

> ID：14295019
> 
> 赞同：-1
> 
> 时间：2013-01-12T15:54:25.680
> 
> 标签：sql, sql-order-by, insertion-order

我有以下问题。在我的服务器上，我必须按特定顺序维护数据（按照特定的插入顺序）。它必须存储在一个文件中。我目前正在使用 SQLite 来执行此操作，但是假设 SQL db 将保持插入顺序是否安全，或者我应该使用其他东西（在这种情况下，请给我提示该怎么做）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T15:56:22.007

表中的行不按任何特定顺序存储。你只能用一个`order by`子句来保证顺序。

要通过插入对行进行排序，您通常会使用[自动增量](http://www.sqlite.org/autoinc.html)列。这会为稍后插入的行分配更高的值。然后，您可以`order by autoinc_col`按插入的顺序检索行。

# android - 如何为 Cordova2.3 创建自定义插件 - Android

> ID：14295020
> 
> 赞同：2
> 
> 时间：2013-01-12T15:54:25.350
> 
> 标签：android, cordova, plugins, phonegap-plugins

我正在尝试为 Cordova - android 创建一个自定义插件。该插件的目的是在点击 HTML5 屏幕上的按钮时引发原生 android 活动的意图。所以最初，我会在一个带有按钮的 HTML5 屏幕上。单击按钮后，我应该被重定向到本机 android 活动屏幕。

这是我已经完成的一些代码，

customplugin.js

```
function CustomPlugin(){};

CustomPlugin.prototype.launchActivity = function(startClass) 
{
alert("@@@ Starting plugin to launch native activity.");
cordova.exec(null, null, 'CustomPlugin', 'launchActivity', [startClass]);
};

if(!window.plugins) {
window.plugins = {};
}
if (!window.plugins.customplugin) {
   window.plugins.customplugin = new CustomPlugin();
} 
```

但是，在此代码中，我收到“未捕获的类型错误：无法调用未定义的方法“launchActivity”。请帮助我提供一些示例代码示例。提前致谢。

自定义插件.java

```
package org.apache.cordova.example;

import org.apache.cordova.api.CallbackContext;
import org.apache.cordova.api.CordovaPlugin;
import org.apache.cordova.api.Plugin;
import org.apache.cordova.api.PluginResult;
import org.json.JSONArray;
import org.json.JSONException;

import android.util.Log;

public class CustomPlugin extends CordovaPlugin 
{
@Override
    public boolean execute(String action, final JSONArray args, CallbackContext callbackContext) throws JSONException 
    {
        if ("launchActivity".equals(action)) 
        { 
              String goClass = null; if(args.length() > 0) goClass = args.getString(0);

              Log.i("NATIVE", "Launch class : " + goClass); 
              return true;
          } 
          else 
          { 
              return false;
          }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T16:30:42.887

在您的代码片段中，我看不到您实际执行的位置`launchActivity()`。最好将其添加到问题中，因为似乎存在问题。

首先，确保您的页面中加载了**cordova.js 。**然后你使用`cordova.exec`（这是一个使用[require.js](http://requirejs.org/)的例子，但这不是必须的，你也可以使用`cordova.exec()`）

```
define(['cordova'], function (cordova) {
    'use strict';

    var exec = cordova.require('cordova/exec');

    return {
        changeBackground : function (color) {
            exec(function () {}, function () {}, 'Navbar', 'changeBackground', [color]);
        }
    };

}); 
```

**确保在res/xml/plugins.xml**中添加插件：

```
<plugin name="Navbar" value="my.package.NavbarPlugin"/> 
```

要创建插件，您只需扩展`org.apache.cordova.api.CordovaPlugin`.

```
public class NavbarPlugin extends CordovaPlugin {

    @Override
    public boolean execute(String action, final JSONArray args, CallbackContext callbackContext) throws JSONException {
        if ("changeBackground".equals(action)) { ... }
    }

} 
```

**编辑：**

它不起作用的问题是因为您正在执行`window.customplugin.launchActivity(...)`. `window.customplugin`不存在，因此你得到你不能调用`launchActivity`.`undefined`

你需要打电话`window.plugins.customplugin.launchActivity(...)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-29T06:53:13.840

请找到下面的代码片段，为 android 创建原生 Cordova 插件以及调用所需的配置并从 Web 端获取响应。

**示例：**使用 Cordova 原生插件的 android 设备的当前位置纬度和经度。

**安卓代码：**

```
 package com.sample.activity;

 import android.app.Activity;
 import android.content.Context
 import android.location.Criteria;
 import android.location.Location;
 import android.location.LocationListener;
 import android.location.LocationManager;
 import android.os.Bundle;
 import android.util.Log;

public class LocationTrackPlugin extends CordovaPlugin implements LocationListener {
public static final String ACTION_START = "GetLocation";
public static CallbackContext callbackContext;
public static Activity activity;

@Override
public boolean execute(String action, final JSONArray jArray,
                       final CallbackContext callbackContext) throws JSONException {
    activity = this.cordova.getActivity();
    boolean result = false;
    if (ACTION_START.equalsIgnoreCase(action)) {
        LocationTrackPlugin.callbackContext = callbackContext;
        LocationManager locationManager = (LocationManager) activity
                .getSystemService(activity.LOCATION_SERVICE);

        if (!locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER)) {
            PluginResult pluginResult = new PluginResult(
                    PluginResult.Status.OK, "false");
            pluginResult.setKeepCallback(true);
            try {
                callbackContext.sendPluginResult(pluginResult);
            } catch (Exception e) {
                e.printStackTrace();
            }
        } else {

            result = true;
            Location location = getCurrentDeviceLocation(activity);
            String my_location = location.getLatitude() + ":" + location.getLongitude();
            PluginResult pluginResult = new PluginResult(
                    PluginResult.Status.OK, my_location);
            pluginResult.setKeepCallback(true);
            try {
                callbackContext.sendPluginResult(pluginResult);
            } catch (Exception e) {
                e.printStackTrace();
            }

        }

    }

    return result;

}

public Location getCurrentDeviceLocation(Context contxt) {
    LocationManager locationManager;
    String provider;
    Location location = null;
    locationManager = (LocationManager) contxt
            .getSystemService(Context.LOCATION_SERVICE);
    Criteria criteria = new Criteria();
    provider = locationManager.getBestProvider(criteria, false);

    if (provider != null && !provider.equals("")) {
        location = getCurrentLocation(provider, locationManager);
        if (location != null) {
            locationManager.removeUpdates(this);
            return location;

        } else {
            location = getCurrentLocation(LocationManager.NETWORK_PROVIDER,
                    locationManager);
            if (location != null) {
                locationManager.removeUpdates(this);
                return location;
            } else {
                locationManager.removeUpdates(this);
            }
        }
    } else
        Log.d("Location", "No Provider Found");
    return location;
}

public Location getCurrentLocation(String provider,
                                   LocationManager locationManager) {
    Location newlocation = null;
    if (locationManager.isProviderEnabled(provider)) {
        locationManager.requestLocationUpdates(provider, 1000, 1, this);
        if (locationManager != null) {
            newlocation = locationManager.getLastKnownLocation(provider);
            return newlocation;
        }
    }
    return newlocation;
}

@Override
public void onLocationChanged(Location location) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}
} 
```

**清单文件.xml**

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

**Config.xml**（文件位于 appname/cordova/Config.xml）

```
 <feature name="LocationTrackPlugin">
    <param name="android-package"   value=com.sample.activity.LocationTrackPlugin" />
</feature> 
```

**ShowLocation.js**

```
 callGetlocationPlugin: function() {
    if (Ext.os.is('Android')) {
        cordova.exec(
                function(result) {
                    console.log("Native call success", result);
                                      },
                function() {
                    console.log('Native call failed');
                },
                'LocationTrackPlugin', 'GetLocation', null);
    }
} 
```

# javascript - 在 ASP.NET MVC 中使用 JavaScript XMLHttpRequest()

> ID：14295022
> 
> 赞同：0
> 
> 时间：2013-01-12T15:54:33.040
> 
> 标签：javascript, asp.net-mvc, xmlhttprequest

我正在尝试`XMLHttpRequest()`在 ASP.NET MVC 应用程序中使用 JavaScript 对象进行测试。我已经编写了以下测试代码，并将其放入视图中-

```
<script type="text/javascript">
var request;

function getAJAX() {
    request = new XMLHttpRequest();
    request.open("GET", "test.txt");
    request.onreadystatechange = checkData();
    request.send(null);
}

function checkData() {
    if (request.readyState == 4) { 
        if (request.status == 200) { 
            alert(request.responseText);                
        }
    }
}
</script>

<form action="">
    <p>
        <button type="button" onclick="getAJAX()">DO IT!</button>
    </p>
</form> 
```

当我点击“DO IT！” 按钮，脚本函数被调用，但`"request.onreadystatechange"`永远不会改变。我对此有几个问题-

1.  有没有一种简单的方法来跟踪呼叫发生的情况`request.open()`？
2.  该`XMLHttpRequest()`对象甚至可以在 ASP.NET MVC 应用程序中工作吗？
3.  我是否必须对 Global.asax 文件进行更改（或其他更改）才能使其正常工作？
4.  我`"test.txt"`在`"base"`目录中（与 Global.asax 文件的位置相同）是 request.open 调用的位置吗？

（**注意**：我试图在没有 jQuery 的情况下做到这一点）

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:06:26.390

您将回调设置为执行`onreadystatechange`的*结果*`checkData`。改为设置`onreadystatechange`等于`checkData`，你应该很高兴：

```
function getAJAX() {
    request = new XMLHttpRequest();
    request.open("GET", "test.txt");
    request.onreadystatechange = checkData; // Don't execute checkData
    request.send(null);
} 
```

至于你的其他问题：

> 有没有一种简单的方法来跟踪 request.open() 调用发生了什么？

使用 Firebug 或您选择的开发工具来检查 AJAX 请求。

> XMLHttpRequest() 对象甚至可以在 ASP.NET MVC 应用程序中工作吗？

是的，它会正常工作。

> 我是否必须对 Global.asax 文件进行更改（或其他更改）才能使其正常工作？

不是我知道的。

> 我在“base”目录中有“test.txt”（与 Global.asax 文件相同的位置）是 request.open 调用的位置吗？

也许？这实际上取决于您的路由规则以及您如何配置 IIS。

# jquery - 是否可以使用 ON/OFF 按钮控制刷新网页？

> ID：14295025
> 
> 赞同：1
> 
> 时间：2013-01-12T15:54:39.643
> 
> 标签：jquery, ajax, refresh

我的页面中有一个自动刷新按钮。当我单击 Auto Refresh ON 时，页面应重新加载，而选择 Auto Refresh OFF 则不应重新加载。这可能吗？

这是我的自动刷新按钮功能：

```
$('#refresh').click(function(){
   if($('#refresh').attr('class') == 'refresh-off'){
      $('#refresh').addClass('refresh-on');
   }
    else{
      $('#refresh').removeClass('refresh-on');
   }
   });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T15:59:29.813

是的，应该可以这样做。由于您将自己控制刷新，也许您可​​以通过`GET`在 URL 中添加一个参数来指示自动刷新在起作用。这意味着当您重新加载网页时，您的脚本应该检查是否有一个`GET`参数被调用`refresh`并对其进行操作。

```
http://www.yourdomain.com/?refresh[=auto] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T16:01:02.220

尝试设置一个计时器，然后检查#refresh 的类。如果设置，则刷新页面。

这个[小提琴](http://jsfiddle.net/5fALW/show/)显示它以 10 秒的间隔工作。

```
var int=self.setInterval(function(){refreshPage()},10000);

$(document).ready(function() {

  var hashTag = window.location.href.split('#');
  if (hashTag[1] == 'reload') {
     $('#refresh').addClass('refresh-on').html('Refresh On');  
  }

  $('#refresh').on('click', function() { 
    $(this).toggleClass('refresh-on'); 
    if ($(this).hasClass('refresh-on'))
      $(this).html('Refresh On');
    else 
      $(this).html('Refresh Off');
  });

});

function refreshPage() {
  if ($('#refresh').hasClass('refresh-on')) {
    location.hash = 'reload';
    window.location.reload();
  } else
      location.hash = '';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T16:02:03.260

设置定时器刷新：

```
var timerId;
$(document).ready(function() {
    timerId = setInterval("location.reload(true)", 300000);
}); 
```

比清除刷新命令

```
clearInterval(timerId); 
```

完整代码：

```
var timerId;
$('#refresh').click(function(){
   if($('#refresh').attr('class') == 'refresh-off'){
      $('#refresh').addClass('refresh-on');
      timerId = setInterval("location.reload(true)", 300000);
   }
    else{
      $('#refresh').removeClass('refresh-on');
      clearInterval(timerId);
   }
   });
}); 
```

# android - 如何在android中插入视频

> ID：14295026
> 
> 赞同：0
> 
> 时间：2013-01-12T15:54:40.130
> 
> 标签：android, eclipse

```
VideoView v =(VideoView) findViewById(R.id.videoView1);
String baseDir = Environment.getExternalStorageDirectory().getAbsolutePath();
v.setVideoPath(baseDir+"/ss.mp4");
v.setMediaController(new MediaController(play.this));
v.start();
v.requestFocus(); 
```

我有一个 VideoView，这是我插入视频的代码，但它没有播放，“无法播放此视频”，模拟器说。我该如何解决这个问题？你有其他代码插入视频吗？

```
I need a code of inserting a video on android.. 
```

这是 Logcat：

```
01-12 20:35:07.451: D/dalvikvm(336): GC_EXTERNAL_ALLOC freed 51K, 53% free 2560K/5379K, external 410K/517K, paused 114ms
01-12 20:35:12.480: D/dalvikvm(336): GC_EXTERNAL_ALLOC freed 12K, 52% free 2587K/5379K, external 831K/1306K, paused 145ms
01-12 20:35:29.080: W/KeyCharacterMap(336): No keyboard for id 0
01-12 20:35:29.101: W/KeyCharacterMap(336): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
01-12 20:35:34.831: D/dalvikvm(336): GC_EXTERNAL_ALLOC freed 26K, 53% free 2581K/5379K, external 911K/1552K, paused 488ms
01-12 20:35:38.681: D/dalvikvm(336): GC_EXTERNAL_ALLOC freed 22K, 52% free 2601K/5379K, external 919K/1386K, paused 72ms
01-12 20:35:43.340: E/MediaPlayer(336): error (1, -2147483648)
01-12 20:35:43.840: D/dalvikvm(336): GC_EXTERNAL_ALLOC freed 25K, 51% free 2677K/5379K, external 957K/1432K, paused 63ms
01-12 20:35:44.560: E/MediaPlayer(336): Error (1,-2147483648)
01-12 20:35:44.560: D/VideoView(336): Error: 1,-2147483648
01-12 20:37:37.191: D/dalvikvm(374): GC_EXTERNAL_ALLOC freed 53K, 53% free 2560K/5379K, external 410K/517K, paused 81ms
01-12 20:45:07.301: D/dalvikvm(374): GC_EXTERNAL_ALLOC freed 15K, 52% free 2596K/5379K, external 839K/1306K, paused 141ms
01-12 20:45:08.501: E/MediaPlayer(374): error (1, -2147483648)
01-12 20:45:09.040: E/MediaPlayer(374): Error (1,-2147483648)
01-12 20:45:09.050: D/VideoView(374): Error: 1,-2147483648
01-12 20:45:50.560: W/KeyCharacterMap(374): No keyboard for id 0
01-12 20:45:50.560: W/KeyCharacterMap(374): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
01-12 20:56:15.991: E/MediaPlayer(374): error (1, -2147483648)
01-12 20:56:16.351: E/MediaPlayer(374): Error (1,-2147483648)
01-12 20:56:16.351: D/VideoView(374): Error: 1,-2147483648
01-12 21:29:38.470: D/dalvikvm(410): GC_EXTERNAL_ALLOC freed 54K, 53% free 2560K/5379K, external 410K/517K, paused 92ms
01-12 21:41:11.070: D/dalvikvm(410): GC_EXTERNAL_ALLOC freed 14K, 52% free 2590K/5379K, external 831K/1306K, paused 111ms
01-12 21:44:57.890: W/KeyCharacterMap(410): No keyboard for id 0
01-12 21:44:57.900: W/KeyCharacterMap(410): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
01-12 21:45:01.270: D/dalvikvm(410): GC_EXTERNAL_ALLOC freed 16K, 52% free 2623K/5379K, external 1211K/1714K, paused 85ms
01-12 21:45:02.370: E/MediaPlayer(410): error (1, -2147483648)
01-12 21:45:02.860: E/MediaPlayer(410): Error (1,-2147483648)
01-12 21:45:02.860: D/VideoView(410): Error: 1,-2147483648
01-12 21:45:06.531: W/KeyCharacterMap(410): No keyboard for id 0
01-12 21:45:06.531: W/KeyCharacterMap(410): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
01-12 21:45:08.041: D/dalvikvm(410): GC_EXTERNAL_ALLOC freed 86K, 51% free 2674K/5379K, external 1054K/1432K, paused 74ms
01-12 22:28:36.910: W/KeyCharacterMap(410): No keyboard for id 0
01-12 22:28:36.910: W/KeyCharacterMap(410): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
01-12 22:28:39.100: D/dalvikvm(410): GC_EXTERNAL_ALLOC freed 74K, 51% free 2642K/5379K, external 1211K/1723K, paused 86ms
01-12 22:28:40.040: E/MediaPlayer(410): error (1, -2147483648)
01-12 22:28:40.450: E/MediaPlayer(410): Error (1,-2147483648)
01-12 22:28:40.450: D/VideoView(410): Error: 1,-2147483648
01-12 23:15:26.885: D/dalvikvm(477): GC_EXTERNAL_ALLOC freed 55K, 53% free 2560K/5379K, external 410K/517K, paused 105ms
01-12 23:56:35.670: D/dalvikvm(477): GC_EXTERNAL_ALLOC freed 15K, 52% free 2596K/5379K, external 839K/1306K, paused 83ms
01-12 23:56:37.713: E/MediaPlayer(477): error (1, -2147483648)
01-12 23:56:38.410: E/MediaPlayer(477): Error (1,-2147483648)
01-12 23:56:38.410: D/VideoView(477): Error: 1,-2147483648 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:02:52.693

错误`-2147483648`意味着您的视频格式不正确。

请检查[Android 支持的媒体格式](http://developer.android.com/guide/appendix/media-formats.html)。

# java - Java：帮助我理解：如何在有界通配符字段上使用接口方法？

> ID：14295032
> 
> 赞同：0
> 
> 时间：2013-01-12T15:55:05.900
> 
> 标签：java, generics, wildcard, bounded-wildcard

我无法理解为什么我可以使用这样的有界通配符，如果我不能（似乎）做任何（通用类型）使用它。

如果我在一个类中有一个通配符字段，我就不能使用任何带有已实现接口的通用参数的方法（除非我`null`作为参数提供）。

```
class SomeClass {}

class DerivedClass extends SomeClass {}

interface IInterf<T extends SomeClass> {
    T returnsT();
    void paramT(T parm);
    T paramAndReturnT(T parm);
    int nonGenericMethod(int x);
}

class Impl {
    protected IInterf<?> field; //this is bound to <extends SomeClass>
                                //- it's implied by the definition 
                                //  of IInterf which is bound
                                // but what's the point?

    public Impl(IInterf<? extends SomeClass> var){
        field = var;
    }
    public void doSmth(){

        SomeClass sc = field.returnsT();  //works

        field.paramT(new SomeClass());
          //error: method paramT in interface IInterf<T> cannot be applied to given types;
          //required: CAP#1
          //found: SomeClass
          //reason: actual argument SomeClass cannot be converted to CAP#1 by method invocation conversion
          //where T is a type-variable:
          //  T extends SomeClass declared in interface IInterf
          //where CAP#1 is a fresh type-variable:
          //  CAP#1 extends SomeClass from capture of ? 

         field.paramT(null); //works

        SomeClass sc2 = field.paramAndReturnT(new DerivedClass());
          //error: method paramAndReturnT in interface IInterf<T> cannot be applied to given types;
          // SomeClass sc2 = field.paramAndReturnT(new DerivedClass());           //required: CAP#1
          //found: DerivedClass
          //reason: actual argument DerivedClass cannot be converted to CAP#1 by method invocation conversion
          //where T is a type-variable:
          //  T extends SomeClass declared in interface IInterf
          //where CAP#1 is a fresh type-variable:
          //  CAP#1 extends SomeClass from capture of ?            
          //
        int x = field.nonGenericMethod(5);  //obviously works.
    }
} 
```

FWIW，我无法说服 C# 编译器接受类似的东西。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:03:35.033

当您声明`field`为

```
protected IInterf<?> field; 
```

代表扩展的`?`未知类`SomeClass`。不要把它想象成一个通配符，而是一个特定的类派生`SomeClass`但匿名。

如果你现在尝试打电话

```
field.paramT(new SomeClass()); 
```

这失败了，因为一个`SomeClass`实例与它所代表的不兼容`?`，即扩展的匿名类`SomeClass`。

使用没有问题`null`，这与任何类都兼容。

完全相同的情况发生

```
SomeClass sc2 = field.paramAndReturnT(new DerivedClass()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T16:15:24.997

You're trying to use generics/wildcards where they are not needed. Instead, either of the following will work:

1) Define the interface so that it accepts any class, and limit the types when using the interface:

```
interface IInterf<T> {}
protected IInterf<SomeClass> field; 
```

2) Define the interface so that it accepts classes that extend `SomeClass`, and use the interface without specifying extra type information:

```
interface IInterf<T extends SomeClass> {}
protected IInterf field; 
```

As for why the wildcard does not work: `? extends SomeClass` means an *unknown* subtype of `SomeClass`. Since we don't know what the type is, we don't know if it is a supertype of `SomeClass` (or `DerivedClass` in the second method call); it might or might not be such a supertype, so it isn't safe to pass `SomeClass` (or `DerivedClass`). (from the [Java Wildcards documentation](http://docs.oracle.com/javase/tutorial/extra/generics/wildcards.html))

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T16:03:39.320

你是对的，你不能使用这些方法。通常，您不需要这些方法（例如，您将某些内容添加`<? extends T>`到集合`<T>`中。如果您不需要更多信息，则使用它们是有意义的。如果您需要调用这些方法，则不能使用通配符。相反，您可以这样做`<T extends SomeClass>`。

# c# - 将多条表单输入保存到文件中

> ID：14295043
> 
> 赞同：2
> 
> 时间：2013-01-12T15:56:44.550
> 
> 标签：c#, winforms, file-io

将 Windows 窗体保存到带有几个收集用户输入的文本框的文件的最佳方法是什么。我现在使用这个：

```
if (saveFileDialog1.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            {
                File.WriteAllText(saveFileDialog1.FileName, tB1.Text);
                File.WriteAllText(saveFileDialog1.FileName, tB2.Text);
            } 
```

这对于保存第一个文本框中的输入很好，但是当涉及到另一个时，它不会保存输入的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T15:58:46.380

如何连接两个文本框？为了清楚起见，

```
string forSaving = tB1.Text + "\n" + tB2.Text;
File.WriteAllText(saveFileDialog1.FileName, forSaving); 
```

或者

```
File.WriteAllText(saveFileDialog1.FileName, tB1.Text + "\n" + tB2.Text); 
```

**更新 1**

```
string firstName = "FirstName: " + txtFirstName.Text;
string lastName = "LastName: " + txtLastName.Text;
string personAddress = "FirstName: " + txtAddress.Text;
string details = firstName + "\n" + lastName + "\n" + personAddress;
File.WriteAllText(saveFileDialog1.FileName, tB1.Text + "\n" + details); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T15:59:32.277

然后连接这两个texbox；

```
File.WriteAllText(saveFileDialog1.FileName, tB1.Text + Environment.NewLine + tB2.Text ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T16:00:16.293

最好的方法可能是在您的表单中创建一个方法，该方法将返回一个字符串，其中包含 TextBoxes 中的所有值到您想要的任何格式。像这样的东西会起作用：

```
File.WriteAllText(saveFileDialog1.fileName, OutputUserInfo()); 
```

然后在里面`OutputUserInfo()`你可以对你想要的数据进行任何格式化，这样你就可以理解它们输入的内容。

编辑示例`OutputUserInfo()`

```
private string OutputUserInfo() {
    return  "First Name: " + tbFirstName.Text + Environment.NewLine +
            "Surname: " + tbSurname.Text + Environment.NewLine +
            "Address" + tbAddress.Text + Environment.NewLine;
            // Just keep adding whatever you want on here.
            // Add the descriptions if you want, it will probably help
} 
```

您也可以使用不同的格式（CSV 或其他格式）。但如果你只是在做一个纯文本文件，这可能是最简单的。不过，这取决于你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T16:17:17.193

File.WriteAllText 可能不好，因为它会覆盖您的内容。

> 创建一个新文件，将指定的字符串写入文件，然后关闭文件。如果目标文件已存在，则将其覆盖。

而是选择`File.AppendAllText`哪个

> 将指定的字符串附加到文件中，如果文件不存在则创建该文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-12T16:22:39.350

如果是我，我会使用[StreamWriter](http://msdn.microsoft.com/en-us/library/system.io.streamwriter%28v=vs.110%29.aspx) / [StreamReader](http://msdn.microsoft.com/en-us/library/system.io.stringreader.aspx)类，因为它们分别具有[WriteLine](http://msdn.microsoft.com/en-us/library/ebb1kw70.aspx)和[Readline](http://msdn.microsoft.com/en-us/library/system.io.stringreader.readline.aspx)方法。

即这样的东西

```
private void button1_Click(object sender, EventArgs e)
{
    if (saveFileDialog1.ShowDialog() == System.Windows.Forms.DialogResult.OK)
    {
        using (StreamWriter sw = new StreamWriter(saveFileDialog1.FileName))
        {
            sw.WriteLine(tB1.Text);
            sw.WriteLine(tB2.Text);
            sw.WriteLine(tB3.Text);
            sw.WriteLine(tB4.Text);
            sw.Close();
        }

   }

}

private void button2_Click(object sender, EventArgs e)
{
    if(openFileDialog1.ShowDialog() == System.Windows.Forms.DialogResult.OK)
    {
        using (StreamReader sr = new StreamReader(openFileDialog1.FileName))
        {
            tB1.Text = sr.ReadLine();
            tB2.Text = sr.ReadLine();
            tB3.Text = sr.ReadLine();
            tB4.Text = sr.ReadLine();
            sr.Close();
        }
    }

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-12T16:36:32.103

好了，使用[Encoding](https://stackoverflow.com/a/6550279/1080742)附加所有的字符串。

```
 private void button1_Click(object sender, EventArgs e)
    {
        if (saveFileDialog1.ShowDialog() == DialogResult.OK)
        {
            string line = string.Format("{0},{1}"
            , textBox1.Text
            , textBox2.Text);
            File.AppendAllText(saveFileDialog1.FileName, line, Encoding.GetEncoding(1252));
        }
    } 
```

# c++ - Boost::Xpressive::sregex uri 模式匹配

> ID：14295046
> 
> 赞同：0
> 
> 时间：2013-01-12T15:56:59.090
> 
> 标签：c++, regex, boost, xpressive

我一直在搜索和测试正则表达式以匹配所有 uris，但我似乎找不到一个匹配所有或大部分的。我尝试过的很多都引发了编译错误。有人有 Xpressive::sRegex 兼容的正则表达式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-17T16:25:16.293

您可以从以下内容开始：

```
using namespace boost::xpressive;

static const sregex re = _b >> (s1 = +(~(set= ':', '/', '?', '#')))
                            >> as_xpr("://")
                            >> (s2 = *(~(set= '/', '?', '#')))
                            >> (s3 = *(~(set= '?', '#')))
                            >> !(as_xpr('?') >> (s4 = *(~(set='#'))))
                            >> !(as_xpr('#') >> (s5 = *_)) >> _b; 
```

# scala - Specs2 和 @Before/@After 类方法

> ID：14295048
> 
> 赞同：6
> 
> 时间：2013-01-12T15:57:06.703
> 
> 标签：scala, specs2

给定如下代码：

```
class RESTAcceptanceTest extends Specification {

  override def is = anonymous ^ signinOAuth

  def anonymous = "Something"       ^ givenSomething ^
                  "must happen"     ^ mustHappen 
  end

  def signinOAuth = "Signin"                ^ givenSignin ^
                    "works as expected"     ^ userExistsInDatabase 
  end

  // rest of object definitions

} 
```

如何确保在“匿名”*和*“signinOAuth”之前/之后执行相同的代码之前和之后，即使测试本身失败，“之后”方法也应该执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T01:14:30.330

如果您使用 Given/When/Then 步骤，您可以使用[Context](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Structure.html#Contexts)来控制每个示例之前和之后执行的内容：

```
import org.specs2._
import specification._

class MySpec extends Specification { def is = 
  "anonymous" ^ 
    "something" ^ something ^
    "must happen" ^ mustHappen ^ endp^
  "OAuth"^ 
    "signing" ^ signing ^
    "works ok" ^ worksOk

  lazy val something: Given[Int] = (s: String) => { s.pp; 1 } 
  lazy val mustHappen: Then[Int] = (i: Int) => (s: String)  => 
    context { s.pp; i must_== 1       }

  lazy val signing:  Given[Int] = (s: String) => { s.pp; 2 }
  lazy val worksOk: Then[Int] = (i: Int) => (s: String) => 
    context { s.pp; i must_== 2 }

  lazy val context = new BeforeAfter {
   def  before = "before".pp
   def after = "after".pp
  }
} 
```

在上面的代码`apply`中，对象的方法`context`用于包装要执行的代码`before`和`after`。此外，如果您向其中一个示例添加错误，您将看到始终执行“之后”代码。

PS：`pp`是一种实用方法，喜欢`println`在执行期间在终端中显示一些东西。优于 println 的优点是它返回其参数，因此您可以编写`1.pp must_== 1`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T16:00:08.877

看看文档：[http ://etorreborre.github.com/specs2/guide/org.specs2.guide.Structure.html#Before/After](http://etorreborre.github.com/specs2/guide/org.specs2.guide.Structure.html#Before/After)

# php - 图像上的蒙版以防止复制

> ID：14295053
> 
> 赞同：0
> 
> 时间：2013-01-12T15:57:36.150
> 
> 标签：php, image, png, block, masking

网上有。这样的脚本，在另一个图像之前“跳跃”。所以...例如，如果我找到一张图片，然后单击“另存为...”，我会得到一张 1x1 像素的图片来代替我想要保存的图片。

例如它是 [http://www.youtube.com/watch?v=9bZkp7q19f0](http://www.youtube.com/watch?v=9bZkp7q19f0) 在视图计数器 (1'167'974'545) 旁边有一个动画。但是，如果我尝试复制链接或保存它，它会将无用的图片“推”到我手中。这个脚本在我的网站上可能非常有用。怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T16:06:30.490

据我从 youtube 页面的代码中可以看出，他们使用以下几行作为该图像的 html 元素：

```
<img class="watch-dancing-psy" src="//s.ytimg.com/yts/img/pixel-vfl3z5WfW.gif"> 
```

所以通常`src`属性中引用的图像是 1x1 像素图像。

他们使用 CSS 来放置真实的图像（在定义 CSS 类时`watch-dancing-psy`）：

```
background-image: url(https://s.ytimg.com/yts/img/logo_dancing_psy-vflsJl9hC.gif); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T16:04:10.217

如果您的示例 URL`img src`是 1x1px 透明 gif 并且“实际”图像及其尺寸在 CSS 中定义为`background`,`width`和`height`属性。

# asp.net-mvc-3 - MVC 3\. 下拉框

> ID：14295062
> 
> 赞同：0
> 
> 时间：2013-01-12T15:58:43.910
> 
> 标签：asp.net-mvc-3

嗨，我是 MVC 3 的新手，只是一个初学者。我正在尝试在视图中创建一个新的下拉框，但我收到错误消息“'System.Web.Mvc.HtmlHelper' 不包含'DropDownListFor' 的定义和最佳扩展方法重载'System.Web。 Mvc.Html.SelectExtensions.DropDownListFor(System.Web.Mvc.HtmlHelper, System.Linq.Expressions.Expression>, System.Collections.Generic.IEnumerable)' 有一些无效参数”。

这是查看代码

```
<tr>
    <td>
        <label>
        Customer Name
        </label>
    </td>
    <td>
   @Html.DropDownListFor(A => A.Roles, Model.Roles);
    </td>
</tr> 
```

控制器代码

```
 public ActionResult Index()
        {
            var Model = new Customer();
            Model.Roles = getRoles();

            return View(Model);
        }

        private List<string> getRoles()
        {
            List<string> roles = new List<string> 
            {
                "Developer",
                "Tester",
                "Project Manager",
                "Team Lead",
                "QA"
            };
            return roles;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:12:15.200

我建议您为视图创建一个视图模型类：

```
public class IndexViewModel
{
    public IList<string> Roles { get; set; }

    public string SelectedRole { get; set; }
} 
```

然后像这样调用视图：

```
public ActionResult Index()
{
    List<string> roles = new List<string> 
    {
        "Developer",
        "Tester",
        "Project Manager",
        "Team Lead",
        "QA"
    };

    var viewModel = new IndexViewModel();

    viewModel.Roles = roles;

    return this.View(viewModel);
} 
```

最后，渲染下拉列表：

```
@model Mvc4.Controllers.IndexViewModel

@Html.DropDownListFor(model => model.SelectedRole, new SelectList(Model.Roles)) 
```

您需要一个变量来存储所选项目 ( `SelectedRole`)，并且您需要将角色选择包装到 a`SelectList`中，因为下拉帮助程序不能将 a`IEnumerable`用于第二个参数。

# ruby-on-rails - Sendmail 在 Linux 终端中工作，而不是在 Rails 3 中

> ID：14295065
> 
> 赞同：3
> 
> 时间：2013-01-12T15:59:08.423
> 
> 标签：ruby-on-rails, nginx, sendmail

我正在运行带有 Rails 3.2.2 的 Ubuntu 10.04。

我刚刚安装并配置了 sendmail。当邮件**通过终端发送时，它工作得很好**。

但是当我尝试**通过 Rails 调用它时，没有成功**。

虽然它看起来并不像它失败了。我没有收到任何错误，并在我的控制台中看到：

```
#<Mail::Message:40338240, Multipart: false, Headers: <From: alert@email.com>, <To: chris@email.com>, <Subject: Hi chris, a testmail too you!>, <Mime-Version: 1.0>, <Content-Type: text/html>, <importance: High>, <X-Priority: 1>> 
```

我正在开发中，我的 development.rb 中有以下设置：

```
config.action_mailer.delivery_method = :sendmail
config.action_mailer.sendmail_settings = { 
      :location => '/usr/sbin/sendmail', 
      :arguments => '-i -t' 
  } 
  config.action_mailer.perform_deliveries = true
  config.action_mailer.raise_delivery_errors = true 
```

我已经设置了一个带有相应 alert_mail.html.erb 的 actionmailer：

```
class UserMailer < ActionMailer::Base
  default from: "alert@email.com"
  def alert_mail(site)
    @site = site
    @user = site.user
    @url  = "http://example.com/login"
    mail(:to => @user.email_address, :subject => "Hi chris, a testmail too you!", :importance => "High", 'X-Priority' => '1')
  end
end 
```

这就是我所说的：

```
UserMailer.alert_mail(site) 
```

可能是有权限的东西吗？

我尝试过的事情-尝试在生产模式下运行-将 sendmail 可执行文件更改为 777-尝试删除优先级设置-使用 rails 服务器而不是 nginx 运行它

我希望有人可以帮助我，在此先感谢！（email.com 只是一个替代品，我使用的是有效域）

**编辑：** 当我尝试通过 rails 控制台执行邮件功能时，sadiqxs 的答案确实解决了问题。但是通过我的浏览器，它仍然无法正常工作。奇怪的是，这似乎只发生在 nginx 中。当我停止 nginx 并启动 rails 服务器时，它就可以工作了。但是当我使用 nginx 作为服务器时，它不会发送任何邮件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:44:22.597

我想你需要打电话

```
 UserMailer.alert_mail(site).deliver 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T10:28:42.823

sadiqxs 解决方案是我问题答案的一部分。它解决了我调用函数错误的问题。但它仍然没有为我发送电子邮件。过了一会儿，我设法让它工作。

我发现的一件事是，实际上我确实监督了另一个邮件日志：

```
/var/log/mail.log.1 
```

它向我显示了以下错误：

```
sendmail[4453]: NOQUEUE: SYSERR(nobody): can not chdir(/var/spool/mqueue-client/): Permission denied 
```

我用 ls -ld /var/spool/mqueue-client/ 看到目录受smmsp组限制：

```
drwxrws--- 2 smmsp smmsp 4096 2013-01-12 17:51 /var/spool/mqueue-client/ 
```

所以我将nobody用户（来自错误SYSERR（nobody））添加到smmsp组：

```
usermod -a -G smmsp nobody 
```

我又测试了一遍，还是不行。检查日志后，我得到了同样的错误。为了确保我重新启动了我的服务器，现在错误消息发生了一些变化：

```
NOQUEUE: SYSERR(nobody): can not write to queue directory /var/spool/mqueue-client/ (RunAsGid=65534, required=115): Permission denied 
```

在搜索并尝试了一段时间无用的东西后，我决定将 /etc/psswd 文件的主要组 nobody 更改为 115 (smmsp) 并看到以下设置：

```
nobody:x:65534:65534:nobody:/nonexistent:/bin/sh 
```

到

```
nobody:x:65534:115:nobody:/nonexistent:/bin/sh 
```

这解决了我的问题，它现在正在发送邮件。我知道这不是最好的解决方案，但我真的不知道如何让任何人访问，因为它需要特定的 GID。我希望这里的其他人会这样做。

# php - PHP mysql插入文本

> ID：14295079
> 
> 赞同：0
> 
> 时间：2013-01-12T16:00:02.313
> 
> 标签：php, mysql, text

我的代码：

```
function sendMessage($client, $owner, $topic, $message, $send, $alliance, $player, $coor, $report) {
            $time = time();
    $q = "INSERT INTO " . TB_PREFIX . "mdata values (0,$client,$owner,'$topic',\"$message\",0,0,$send,$time,0,0,$alliance,$player,$coor,$report)";
    return mysql_query($q, $this->connection);
} 
```

当我写消息时没有问题。但是如果我发送到 mysql 这个 -> ' 转换到这个 -> /'

'-> /'

我需要解决它的代码..请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:18:50.563

尝试这个

```
 function sendMessage($client, $owner, $topic, $message, $send, $alliance, $player, $coor, $report) {

   $client = mysql_real_escape_string($client);
    $owner = mysql_real_escape_string($owner);
    $topic = htmlentities($topic);
  $message = htmlentities($message);
     $send = mysql_real_escape_string($send);
 $alliance = mysql_real_escape_string($alliance);
   $player = mysql_real_escape_string($player);
     $coor = mysql_real_escape_string($coor);
   $report = mysql_real_escape_string($report);

        $time = time();

    $q = "INSERT INTO " . TB_PREFIX . "mdata values (0,'$client','$owner','$topic','$message',0,0,'$send','$time',0,0,'$alliance','$player','$coor','$report')";
   return mysql_query($q, $this->connection);
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T16:23:06.903

与其他人的评论类似，您应该使用 PDO，但仅`mysql_real_escape_string`在传递`varchar`或其他字符串类型字段时使用。

```
$q = "INSERT INTO " . TB_PREFIX . "mdata values (0,$client,$owner,
    '" . mysql_real_escape_string($topic) . "',
    '" . mysql_real_escape_string($message) . "',
    0,0,$send,$time,0,0,$alliance,
    $player,$coor,$report)"; 
```

# java - 获取标题的最大长度并提示 IP 电话？

> ID：14295083
> 
> 赞同：1
> 
> 时间：2013-01-12T16:00:36.090
> 
> 标签：java, cisco, jtapi, cisco-jtapi

我正在开发一个适用于所有型号的 ip 电话的 JTapi 应用程序，我动态显示标题和提示，我想知道如何获得标题的最大长度和 IP 电话型号的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T11:47:44.407

规范可在 CiscoIPPhone.xsd（Cisco Unified IP 电话服务 XML 架构文件）中找到，即[XML 架构 7.1.3](http://www.cisco.com/en/US/docs/voice_ip_comm/cuipph/all_models/xsi/7_1_3/xmlschema.html#wp1022188)

# java - 为什么我在 JDT API 中没有使用 getAllSuperclasses() 的超类？

> ID：14295087
> 
> 赞同：4
> 
> 时间：2013-01-12T16:01:33.610
> 
> 标签：java, eclipse, eclipse-jdt

我在 Eclipse 工作区中有 A 类和继承 A 的 B 类。

![在此处输入图像描述](../Images/ab921b1f88b4f8e98243aa79465e5112.png) ![在此处输入图像描述](../Images/5fdc810686ed5ecc3067f31de51f95b0.png)

我遇到的问题是，当我尝试使用 eclipse JDT API 获取 B 类的超级类型时，我什么也没得到。这是代码（我从 - [List all subclasses with fullqualified names](https://stackoverflow.com/questions/1426173/list-all-subclasses-with-fully-qualified-names)得到代码）：

```
IWorkspaceRoot root = ResourcesPlugin.getWorkspace().getRoot();
java.io.File workspaceDirectory = root.getLocation().toFile();

// 1\. The name of the project in the workspace
IProgressMonitor pm = new NullProgressMonitor();    
IProject orig = root.getProject(this.projectName);
orig.open(pm);
this.javaProject = JavaCore.create(orig);
orig.refreshLocal(IResource.DEPTH_INFINITE, pm);

// 2\. Find the type                
IType type = this.javaProject.findType("p.B"); <-- returns correct type info
ITypeHierarchy hier = type.newSupertypeHierarchy(new NullProgressMonitor());
IType[] types = hier.getAllSuperclasses(type);
System.out.println(types); <-- Returns [] 
```

我还添加了代码来刷新/更新包中的资源。

```
IPackageFragmentRoot[] packageFragmentRoots = this.javaProject.getPackageFragmentRoots();
for (IPackageFragmentRoot proot: packageFragmentRoots)
{
    proot.getResource().refreshLocal(IResource.DEPTH_INFINITE, null);
} 
```

除了获取分层类型信息外，一切正常。可能有什么问题？在执行 API 之前我是否错过了任何设置？

我的是一个无头 RCP 应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T01:30:20.003

这可能是一个临时解决方案，但它对我有用。

## 简答

创建一个 lib 目录，并将此[rtstubs.jar](https://dl.dropbox.com/u/10773282/2013/rtstubs.jar)复制到该目录中。您可能需要刷新 (F5) eclipse IDE 才能看到 jar 文件包含在项目中。

![在此处输入图像描述](../Images/69e8781166fff41bdbb7a99a20e28042.png)

然后，在“Java Build Path”中，您需要添加这个 jar 文件。

![在此处输入图像描述](../Images/9fcdc0ed48a53e9f5b08d217e3ecd078.png)

在包片段中包含 jar 文件后，您将获得类层次结构。

![在此处输入图像描述](../Images/9499383cc8ee558369461d2db0373746.png)

## 长答案（为什么这能解决问题）

### CompilationUnitDeclaration (org.eclipse.jdt.internal.compiler.ast) 和层次结构解析器 (org.eclipse.jdt.internal.core.hierarchy)

它有一个字段`ignoreFurtherInvestigation`，一个方法`hasErrors()`返回这个字段。

org.eclipse.jdt.internal.core.hierarchy.HierarchyResolver#resolve() 方法调用 hasError() 将类型信息添加到缓存。但是，如果不包含 jar 文件，hasError() 方法总是返回 false 以防止存储任何类层次信息。

![在此处输入图像描述](../Images/8315fe024da28d36bb09d5cee0dc6505.png)

### org.eclipse.jdt.internal.core.JavaProjectElementInfo

此类具有缓存初始化方法，例如`initializePackageNames`和`getProjectCache`。在`getProjectCache()`方法中，包片段元素根被加载并添加到缓存中。

![在此处输入图像描述](../Images/b1d50b77eaebb9b125e91ad79e5a9b55.png)

使用包片段中的 rtstubs.jar，缓存现在包含所有 Java 类层次结构。如果没有此设置，在缓存构建过程中，ignoreFurtherInvestigation 字段处于打开状态，并且 hasError() 方法返回 true 不包含类层次信息以不返回任何内容。

![在此处输入图像描述](../Images/ebe89cdd7cb400ce996daf9c5272aaaa.png)

## 添加

另一个解决方案可以使用 IRegion。

[如何在 JDT TypeHierarchy 中设置区域（= java 元素集）参数？](https://stackoverflow.com/questions/14419171/how-can-i-set-the-region-set-of-java-elements-parameter-in-jdt-typehierarchy/14421553#14421553)

# javascript - jQuery：使用 $.each 传递的字符串

> ID：14295089
> 
> 赞同：3
> 
> 时间：2013-01-12T16:01:41.927
> 
> 标签：javascript, jquery

这是我的代码：

```
<div class='a'>
  <div class='b'>Test</div>
</div> 
```

和

```
$(['.b']).each(function () {
  console.log($('.a').find(this).text()); // Expecting to print "Test"
}); 
```

我希望`console.log`print `Test`，但它没有！这是一个 jQuery 错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T16:31:26.933

这里有几个问题。

1.  当您使用数组调用 jQuery 时（就像您正在做的那样），jQuery 期望它是一个 DOM 元素数组。
2.  如果要使用`$.each`，请使用迭代通用对象或数组的[静态版本。](http://api.jquery.com/jquery.each/)

*说了这两*件事，使用`$.each`包含原始值的数组仍然存在问题。以下代码显示了您看到的相同问题：

```
$.each([".b"], function () {
    console.log($('.a').find(this).text()); // Expecting to print "Test"
}); 
```

的回调函数内部`.each`是`this`一个`String` *对象*，而不是字符串*原语*。为了理解这一点，我们需要看看在幕后`.each`做了什么：

```
for (; i < length;) {
    if (callback.apply(object[i++], args) === false) { // <----
        break;
    }
} 
```

重要的是调用`apply`. 根据 ECMAScript 规范，当将原始值传递给 时`apply`，将调用该值的`toObject`方法：

> 如果 thisArg 为 null 或未定义，则将被调用函数作为 this 值传递给全局对象。**否则，被调用函数**作为 this 值传递给 ToObject(thisArg)。

这解释了为什么您的代码不工作`.find`——需要一个字符串原语而不是一个字符串对象。

这就是为什么[文档`$.each`](http://api.jquery.com/jquery.each/)实际上提到使用`this`原始值：

> （该值也可以通过 this 关键字访问，**但 Javascript 将始终将 this 值包装为 Object，即使它是简单的字符串或数字值。**）。

因此，解决代码问题的方法是利用`element`传递给回调函数的参数：

```
$.each([".b"], function (_, item) {
    console.log($('.a').find(item).text()); // Expecting to print "Test"
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T16:12:26.487

`this`遍历数组时不要在每个内部使用。它在对象或元素集合上工作正常，但在数组上失败。

使用第二个参数`each`访问数组元素

```
$(['.b']).each(function (index, item) {
  console.log($('.a').find(item).text()); // Expecting to print "Test"
}); 
```

演示[http://jsfiddle.net/KbuZK/](http://jsfiddle.net/KbuZK/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T16:12:48.120

那是因为你处于 JavaScript 的阴暗面。

在 JavaScript 中，无论实际绑定的是什么，`this`总是被做成一个`Object`so that 。即使原始字符串绑定到上下文（您希望给出），它实际上也是一个对象并且. 这是对这种行为的更[彻底的解释](https://stackoverflow.com/a/4390690/1321716)。`typeof this === "object"``this``this``typeof this === "string"``this``String``typeof this === "object"`

当迭代非对象数组时，您应该使用回调函数的第二个参数作为值。

```
$(['.b']).each(function (index, value) {
  console.log($('.a').find(value).text()); // Expecting to print "Test"
}); 
```

# php - wordpress 博客帖子缩略图的图像灰度

> ID：14295092
> 
> 赞同：0
> 
> 时间：2013-01-12T16:02:06.057
> 
> 标签：php, jquery, css, wordpress, grayscale

在我的 wordpress 主题中，我正在尝试为图像（博客帖子缩略图）上的鼠标悬停实现图像灰度动画。我的第一个博客帖子图像有问题，它最初是淡出的，也没有着色动画正在工作仅将鼠标悬停在第一个博客文章图像上后，它仅保持灰色状态。在此之后，每个图像都以 margin-top（大约 10-20 像素）缩小。请帮助我纠正这些错误。

我的 CSS：

```
.thumbimage {
position:relative;
width:450px;
height:250px;
margin:10px 0px 0px 0px;
position:relative;
overflow:hidden;
}

.thumbimage .inner_shadow{
position:absolute;
top:0px;left:0px;z-index:22;
background:url(images/transparent-inner-shadow-frame.png)
}

.thumbimage img{
width:100%;
position:relative;
} 
```

我的 wordpress 帖子包含特色图片，即获取 wordpress 功能
“the_post_thumbnail()”

我的模板.php：

```
<div class="thumbimage">
<div class="inner_shadow"></div> 
<a class="bimage"><?php the_post_thumbnail(); ?></a>
</div> 
```

我的 jQuery：

```
<script type="text/javascript">

// On window load. This waits until images have loaded which is essential
    $(window).load(function(){

// Fade in images so there isn't a color "pop" document load and then on window load

// clone image
        $('.thumbimage a.bimage img').each(function(){
            var el = $(this);
            el.css({"position":"relative"}).wrap("<div class='thumbimage'>").clone().addClass('img_grayscale').css({"position":"absolute","z-index":"10","opacity":"0"}).insertBefore(el).queue(function(){
                var el = $(this);
                el.parent().css({"width":this.width,"height":this.height});
                el.dequeue();
            });
            this.src = grayscale(this.src);
        });

        // Fade image

        $('.thumbimage').mouseover(function(){
        $(this).find('a.bimage img').stop().animate({opacity:1}, 1000);
            $(this).find('a.bimage img:first').stop().animate({opacity:1}, 1000);
        })
        $('.thumbimage').mouseout(function(){
        $(this).find('a.bimage img:first').stop().animate({opacity:0}, 1000);
        });
    });

// Grayscale w canvas method
    function grayscale(src){
        var canvas = document.createElement('canvas');
        var ctx = canvas.getContext('2d');
        var imgObj = new Image();
        imgObj.src = src;
        canvas.width = imgObj.width;
        canvas.height = imgObj.height;
        ctx.drawImage(imgObj, 0, 0);
        var imgPixels = ctx.getImageData(0, 0, canvas.width, canvas.height);
        for(var y = 0; y < imgPixels.height; y++){
            for(var x = 0; x < imgPixels.width; x++){
                var i = (y * 4) * imgPixels.width + x * 4;
                var avg = (imgPixels.data[i] + imgPixels.data[i + 1] + imgPixels.data[i + 2]) / 3;
                imgPixels.data[i] = avg;
                imgPixels.data[i + 1] = avg;
                imgPixels.data[i + 2] = avg;
            }
        }
        ctx.putImageData(imgPixels, 0, 0, 0, 0, imgPixels.width, imgPixels.height);
        return canvas.toDataURL();
    }

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T20:19:09.547

也许这可以通过 CSS3 过渡来解决。尚未测试跨浏览器兼容性，在 Chrome OSX 中运行良好。

```
img.attachment-thumbnail {  
    -webkit-transition: -webkit-filter .5s ease-in-out;  
    -webkit-filter: grayscale(100%);  
}  
img.attachment-thumbnail:hover {  
    -webkit-filter: grayscale(0%);  
} 
```

[来自Tut+](http://net.tutsplus.com/tutorials/html-css-techniques/say-hello-to-css3-filters/)的想法。

[关于 CSS 灰度](http://www.karlhorky.com/2012/06/cross-browser-image-grayscale-with-css.html)的跨浏览器文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T16:29:12.907

我通过用以下代码替换以前的代码来解决它：

```
// clone image
    $('.thumbimage a.bimage img').each(function(){
    var el = $(this);
    el.clone().addClass('img_grayscale').css({"position":"absolute","z-index":"11","opacity":"0"}).insertBefore(el).queue(function(){
    var el = $(this);
    el.parent().css({"width":this.width,"height":this.height});
    el.dequeue();
            });
       this.src = grayscale(this.src);
        }); 
```

///////////////////////////////////////// ////////////////////////

# java - java 在按钮单击事件中将记录插入数据库

> ID：14295094
> 
> 赞同：-1
> 
> 时间：2013-01-12T16:02:11.210
> 
> 标签：java, mysql, database

我可以在按钮单击事件中获取 java mysql 数据库连接和插入记录的示例吗？这是我在 jframe 中使用的代码，但它不起作用它有一个错误。

```
 private void btnlogActionPerformed(java.awt.event.ActionEvent evt) {                                       

     user=txtuser.getText();
      char[] pass=jPasswordField1.getPassword();
             String passString=new String(pass);
            try{                
                **Connection con =createConnection();**             

java.sql.PreparedStatement statement= con.prepareStatement ("INSERT INTO login(username,Password) VALUES ('" + user + "','" + passString + "')");

statement.setString(1,user);
    statement.setString(2,passString);
statement.execute();
            }
            catch(Exception e){
                JOptionPane.showMessageDialog(null,"Exception: "+ e.toString());
            }

public static void main(String args[]) {
 try {
            Class.forName("com.mysql.jdbc.Driver");
            String connectionUrl = "jdbc:mysql://localhost/Stock?"+
                                   "user=root&password=";
            Connection con = DriverManager.getConnection(connectionUrl);
        } catch (SQLException e) {
            JOptionPane.showMessageDialog(null,"SQL Exception: "+ e.toString());
        } catch (ClassNotFoundException cE) {
            JOptionPane.showMessageDialog(null,"Class Not Found Exception: "+ cE.toString());
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:03:10.540

您应该`parameter placeholder (?)`在声明参数时使用，不要连接变量。

```
String strQuery = "INSERT INTO login(username,Password) VALUES (?,?)";
java.sql.PreparedStatement statement = con.prepareStatement(strQuery);
statement.setString(1,user);
statement.setString(2,passString); 
```

**更新 1**

```
private void btnlogActionPerformed(java.awt.event.ActionEvent evt) 
{                                       
    user=txtuser.getText();
    char[] pass=jPasswordField1.getPassword();
    String passString=new String(pass);
    try
    {                
        Connection con = createConnection();          
        String strQuery = "INSERT INTO login(username,Password) VALUES (?,?)";
        java.sql.PreparedStatement statement = con.prepareStatement(strQuery);
        statement.setString(1,user);
        statement.setString(2,passString);
        statement.executeUpdate();
    }
    catch(Exception e)
    {
        JOptionPane.showMessageDialog(null,"Exception: "+ e.toString());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T16:18:19.023

您的`Connection`变量的范围仅限于您的`try/catch`块。您需要将声明移到块外并使用：

```
con = createConnection(); 
```

在`try/catch`块本身内。

使用`PreparedStatement`占位符 ( `?`) 将构建正确的 SQL 字符串并保护您免受[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击：

```
PreparedStatement statement = 
   con.prepareStatement ("INSERT INTO login(username, Password) VALUES (?, ?)"); 
```

此外，`executeUpdate` 用于数据库写入操作。代替

```
statement.execute(); 
```

和

```
statement.executeUpdate(); 
```

# asp.net - .NET AWS SDK CreateInvalidation 不起作用

> ID：14295097
> 
> 赞同：3
> 
> 时间：2013-01-12T16:02:20.750
> 
> 标签：asp.net, amazon-web-services, amazon-cloudfront

我正在使用此代码使用 ASP.NET AWS SDK 使 CloudFront 文件无效。

```
public bool InvalidateFiles(string[] arrayofpaths)
{
    try
    {
        var client = AWSClientFactory.CreateAmazonCloudFrontClient(MY_AWS_ACCESS_KEY_ID, MY_AWS_SECRET_KEY);

        CreateInvalidationResponse r = client.CreateInvalidation(new CreateInvalidationRequest
        {
            DistributionId = ConfigurationManager.AppSettings["DistributionId"],
            InvalidationBatch = new InvalidationBatch
            {
                Paths = new Paths
                {
                    Quantity = arrayofpaths.Length,
                    Items = arrayofpaths.ToList()
                },
                CallerReference = DateTime.Now.Ticks.ToString()
            }
        });
    }
    catch
    {
        return false;
    }

    return true;
} 
```

我提供了类似“/images/1.jpg”的路径，但似乎没有发生失效。我已经等了半个小时，使用硬刷新并清除了缓存，图像是一样的。我已将图像更改为看起来不同，因此如果发生失效，我可以注意到差异。

在控制台中，我看到发生了失效，因为我有 ID 并且在状态下我看到“已完成”，但同样，图像中没有任何变化。

我的问题是如何检查失效是否发生并使其工作，似乎我遗漏了一些东西。

此外，是否有一个选项可以创建是异步的，所以我不需要从亚马逊回答。

谢谢。

# yelp - 如何用电话号码搜索。在 yelp api v2 中？

> ID：14295098
> 
> 赞同：0
> 
> 时间：2013-01-12T16:02:21.157
> 
> 标签：yelp

我正在使用 yelp api。在这里我看到使用电话号码在 yelp 2 中没有搜索选项。

我想要的是在 yelp v2 中使用我没有注意到的电话号码进行搜索的任何其他方式。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-18T19:28:52.590

据我了解（尚未完全检查），您应该使用`term`它，它会将业务与电话联系起来

```
http://api.yelp.com/v2/search?term=XXXXXXXXXX 
```

XXXXXXX = 电话号码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T16:47:31.363

在 1.0 API ( [http://www.yelp.com/developers/documentation/phone_api](http://www.yelp.com/developers/documentation/phone_api) ) 上，您可以做到这一点。
我怀疑你也可以在 2.0 上尝试一下。
这就是他们所说的：
`http://api.yelp.com/phone_search?phone=1234567890&ywsid=XXXXXXXXXXXXXXXX`
我会尝试使用 api 2.0
`http://api.yelp.com/v2/search?phone_search=XXXXXXXXXX`
或
`http://api.yelp.com/v2/search?phone=XXXXXXXXXX`
看看它是否有效。
为了使答案简短，**可以**，但只能在 1.0 API 上确定，**在**2.0 上可以

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-03T18:40:15.133

它实际上：

```
https://api.yelp.com/v2/phone_search?phone=+15555555555 
```

这是参考： [https ://www.yelp.com/developers/documentation/v2/phone_search](https://www.yelp.com/developers/documentation/v2/phone_search)

# java - 如何将多个不同的 InputStream 链接到一个 InputStream

> ID：14295099
> 
> 赞同：65
> 
> 时间：2013-01-12T16:02:23.773
> 
> 标签：java, scala, io, inputstream

我想知道是否有任何理想的方式可以将多个 InputStreams 链接到 Java（或 Scala）中的一个连续 InputStream 中。

我需要它来解析我从 FTP 服务器通过网络加载的平面文件。我想要做的是获取文件 [1..N]，打开流，然后将它们组合成一个流。所以当file1结束时，我想从file2开始读取，依此类推，直到到达fileN的末尾。

我需要以特定顺序读取这些文件，数据来自一个遗留系统，该系统在 barches 中生成文件，因此一个中的数据依赖于另一个文件中的数据，但我想将它们作为一个连续流处理以简化我的域逻辑接口.

我四处搜索并找到了 PipedInputStream，但我并不肯定这就是我所需要的。一个例子会很有帮助。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2013-01-12T16:08:04.670

它就在JDK中！引用[JavaDoc 的`SequenceInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/SequenceInputStream.html)：

> A`SequenceInputStream`表示其他输入流的逻辑串联。它从输入流的有序集合开始，从第一个读取直到到达文件末尾，然后从第二个读取，依此类推，直到最后一个包含的输入流到达文件末尾。

您想连接任意数量的`InputStream`s 而`SequenceInputStream`只​​接受两个。但是由于`SequenceInputStream`也是一个，`InputStream`您可以递归地应用它（嵌套它们）：

```
new SequenceInputStream(
    new SequenceInputStream(
        new SequenceInputStream(file1, file2),
        file3
    ),
    file4
); 
```

...你明白了。

# 也可以看看

*   [如何在 Java 中合并两个输入流？](https://stackoverflow.com/questions/760228)（重复？）

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-01-12T16:34:38.220

这是使用 SequencedInputStream 完成的，这在 Java 中很简单，正如 Tomasz Nurkiewicz 的回答所示。最近我不得不在一个项目中重复这样做，所以我通过“pimp my library”模式添加了一些 Scala 的优点。

```
object StreamUtils {
  implicit def toRichInputStream(str: InputStream) = new RichInputStream(str)

  class RichInputStream(str: InputStream) {
// a bunch of other handy Stream functionality, deleted

    def ++(str2: InputStream): InputStream = new SequenceInputStream(str, str2)
  }
} 
```

有了它，我可以按如下方式进行流排序

```
val mergedStream = stream1++stream2++stream3 
```

甚至

```
val streamList = //some arbitrary-length list of streams, non-empty
val mergedStream = streamList.reduceLeft(_++_) 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2016-07-15T15:13:15.670

另一种解决方案：首先创建输入流列表，然后创建输入流序列：

```
List<InputStream> iss = Files.list(Paths.get("/your/path"))
        .filter(Files::isRegularFile)
        .map(f -> {
            try {
                return new FileInputStream(f.toString());
            } catch (Exception e) {
                throw new RuntimeException(e);
            }
        }).collect(Collectors.toList());

new SequenceInputStream(Collections.enumeration(iss))) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-24T10:04:08.327

这是一个使用 Vector 的更优雅的解决方案，这专门针对 Android，但对任何 Java 都使用 vector

```
 AssetManager am = getAssets();
    Vector v = new Vector(Constant.PAGES);
    for (int i =  0; i < Constant.PAGES; i++) {
        String fileName = "file" + i + ".txt";
         InputStream is = am.open(fileName);
         v.add(is);
    }
    Enumeration e = v.elements();
    SequenceInputStream sis = new SequenceInputStream(e);
    InputStreamReader isr = new InputStreamReader(sis);

    Scanner scanner = new Scanner(isr);   // or use bufferedReader 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-13T09:30:40.260

这是一个简单的 Scala 版本，它连接了一个`Iterator[InputStream]`:

```
import java.io.{InputStream, SequenceInputStream}
import scala.collection.JavaConverters._

def concatInputStreams(streams: Iterator[InputStream]): InputStream =
  new SequenceInputStream(streams.asJavaEnumeration) 
```

# c++ - 使用顶点数组对象渲染三角形什么都不显示（OpenGL）

> ID：14295101
> 
> 赞同：4
> 
> 时间：2013-01-12T16:02:25.610
> 
> 标签：c++, opengl, glsl, glew, glfw

我使用 OpenGL 3.2、GLFW 和 GLEW。我尝试在 OS X (10.8.2) 上使用 VAO 和简单着色器渲染简单的三角形，但没有显示，只有白屏。着色器编译正常，GLEW 初始化正常，glGetString(GL_VERSION) 显示 3.2，试图在每一行之后加上 glGetError，它没有报告任何错误。我不知道我做错了什么。这是代码：

```
#include "include/GL/glew.h"
#include "include/GL/glfw.h"
#include <cstdlib>
#include <iostream>

GLuint program;

char *textFileRead(char *fn) {

    FILE *fp;
    char *content = NULL;

    int count=0;

    if (fn != NULL) {
        fp = fopen(fn,"rt");

        if (fp != NULL) {

      fseek(fp, 0, SEEK_END);
      count = ftell(fp);
      rewind(fp);

            if (count > 0) {
                content = (char *)malloc(sizeof(char) * (count+1));
                count = fread(content,sizeof(char),count,fp);
                content[count] = '\0';
            }
            fclose(fp);
        }
    }
    return content;
}

void checkCompilationStatus(GLuint s) {
    GLint status = 0;

    glGetShaderiv(s, GL_COMPILE_STATUS, &status);
    if (status == 0) {
        int infologLength = 0;
        int charsWritten  = 0;

        glGetShaderiv(s, GL_INFO_LOG_LENGTH, &infologLength);

        if (infologLength > 0)
        {
            GLchar* infoLog = (GLchar *)malloc(infologLength);
            if (infoLog == NULL)
            {
                printf( "ERROR: Could not allocate InfoLog buffer");
                exit(1);
            }
            glGetShaderInfoLog(s, infologLength, &charsWritten, infoLog);
            printf( "Shader InfoLog:\n%s", infoLog );
            free(infoLog);
        }
    }

}

void setShaders() {
    GLuint v, f;
    char *vs = NULL,*fs = NULL;

    v = glCreateShader(GL_VERTEX_SHADER);
    f = glCreateShader(GL_FRAGMENT_SHADER);

    vs = textFileRead("minimal.vert");
    fs = textFileRead("minimal.frag");

    const char * vv = vs;
    const char * ff = fs;

    glShaderSource(v, 1, &vv,NULL);
    glShaderSource(f, 1, &ff,NULL);

    free(vs);free(fs);

    glCompileShader(v);
    checkCompilationStatus(v);
    glCompileShader(f);
    checkCompilationStatus(f);

    program = glCreateProgram();
    glAttachShader(program,v);
    glAttachShader(program,f);

    GLuint error;
    glLinkProgram(program);
    glUseProgram(program);
}

int main(int argc, char* argv[]) {

    glfwInit();

    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MAJOR, 3);
    glfwOpenWindowHint(GLFW_OPENGL_VERSION_MINOR, 2);
    glfwOpenWindowHint(GLFW_OPENGL_FORWARD_COMPAT, GL_TRUE);
    glfwOpenWindowHint(GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE);

    glfwOpenWindow(800, 600, 8, 8, 8, 8, 24, 8, GLFW_WINDOW);
    glViewport(0, 0, 800, 600);
    glfwSetWindowTitle("Triangle");

    glewExperimental = GL_TRUE;
    GLenum result = glewInit();
    if (result != GLEW_OK) {
        std::cout << "Error: " << glewGetErrorString(result) << std::endl;
    }

    std::cout << "VENDOR: " << glGetString(GL_VENDOR) << std::endl;
    std::cout << "RENDERER: " << glGetString(GL_RENDERER) << std::endl;
    std::cout << "VERSION: " << glGetString(GL_VERSION) << std::endl;
    std::cout << "GLSL: " << glGetString(GL_SHADING_LANGUAGE_VERSION) << std::endl;

    setShaders();

    GLfloat vertices[] = {
        1.0f, 1.0f, 0.f,
        -1.f, -1.f, 0.f,
        1.f, -1.f, 0.f
    };

    GLuint VertexArrayID;
    glGenVertexArrays(1, &VertexArrayID);
    glBindVertexArray(VertexArrayID);

    GLuint vertexbuffer;

    glGenBuffers(1, &vertexbuffer);
    glBindBuffer(GL_ARRAY_BUFFER, vertexbuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);

    GLuint pos = glGetAttribLocation(program, "position");
    glEnableVertexAttribArray(pos);
    glVertexAttribPointer(pos, 3, GL_FLOAT, GL_FALSE, 0, 0);

    glClearColor(1.0, 1.0, 1.0, 1.0);

    while (glfwGetWindowParam(GLFW_OPENED)) {
        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

        glDrawArrays(GL_TRIANGLES, 0, 3);

        glfwSwapBuffers();        
        glfwSleep(0.001);

   }

} 
```

这里是着色器，顶点着色器：

```
#version 150

in vec3 position;

void main()
{   
      gl_Position = vec4(position, 0);
} 
```

片段着色器：

```
#version 150

out vec4 out_color;

void main()
{
        out_color = vec4(1.0f, 0.0f, 0.0f, 1.0f);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-12T18:43:21.110

顶点着色器中的 w 参数应设置为 1，而不是 0。

```
gl_Position = vec4(position, 1) 
```

[有关详细信息，请参阅本页](http://www.arcsynthesis.org/gltut/Basics/Intro%20Graphics%20and%20Rendering.html)“光栅化概述”下标题为“标准化坐标”的部分

> ... 每个顶点位置的 X、Y 和 Z 除以 W 以获得归一化的设备坐标...

所以你的坐标被0除。除以0的数字是未定义的。

# sdk - Windows 手机开发 - 无法通过 Internet 连接运行模拟器

> ID：14295102
> 
> 赞同：5
> 
> 时间：2013-01-12T16:02:29.677
> 
> 标签：sdk, visual-studio-2012, windows-phone, windows-phone-8-emulator

## 背景

几年前，我正在为 C#、WPF 和 Silverlight 开发，然后转向为 Android 开发。

我决定尝试一下 Windows phone，并安装最新的 Visual Studio Pro 2012 及其 Windows phone sdk，以及最新版本的 Windows - windows 8 pro。

我创建了一个新的 Windows 手机项目，希望我能从一个 hello world 项目开始学习，并且我已经启动了模拟器。

## 一些规格信息

*   操作系统是 windows 8 pro (final) 。64位处理器。
*   视觉工作室专业版 2012
*   Windows 手机 SDK 8
*   通过 USB 连接到无线 D-Link 设备 ( [DWA-140](http://www.dlink.com/us/en/home-solutions/connect/adapters/dwa-140-wireless-n-usb-adapter) )。

## 问题

刚启动模拟器，就会出现一个对话框，询问我是否要启用网络：

![在此处输入图像描述](../Images/16eefa85e056575c81bbc2b74137ce4e.png)

当我选择我想要的时，出现了一个错误：

![在此处输入图像描述](../Images/0d950ea208e8094d82240a17f6f9180d.png)

选择ok后，模拟器崩溃了。

知道如何在 Internet 上搜索解决方案，我发现了一些（如此[处](https://stackoverflow.com/questions/13149509/windows-phone-8-emulator-error-something-happened-while-creating-a-switch)和[此处](http://social.msdn.microsoft.com/Forums/en-US/wpdevelop/thread/ca2243db-92fa-448e-b168-ad8199279a2e)）建议我删除网络交换机、创建内部交换机等等。

## 问题

我不明白我做错了什么，这只是我的起点。谁能帮我解决这个错误以及如何使模拟器工作？

请告诉我需要采取的确切步骤。

* * *

编辑：卸载与 VS 和 WP 相关的任何内容后，我都重新安装了它们，但仍然出现相同的错误。

不仅如此，当尝试创建一个新的外部开关（一些网站提供）时，它向我显示了下一个错误：

![在此处输入图像描述](../Images/43cc8420dae4366d79083237992b6f6f.png)

开箱即用的模拟器的这种基本功能怎么会丢失？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T04:07:23.177

我怀疑您可能与 UAC 发生冲突。正如您所指出的，它正在尝试创建一个虚拟设备。这样做需要提升权限。如果我是你，我会以管理员身份运行 VS2012 或完全禁用 UAC，直到它全部安装和配置好，然后如果你愿意，你可以重新打开 UAC。我认为 Allen 关于手动创建具有适当网络的 VM 的评论是精明的并且是值得的实验，因为它回避了可能的 UAC 问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T15:13:26.917

你可以尝试几件事。

首先，验证“vEthernet (Internal Ethernet Port Windows Phone Emulator Internal Switch)”适配器的网络连接设置。

为此，请在控制面板中打开**“控制面板\网络和 Internet\网络连接”**。右键单击 **“vEthernet (Internal Ethernet Port Windows Phone Emulator Internal Switch)”**适配器，然后选择**“Properties”**。在**“此连接使用以下项目：”下**，确认**仅**选择了以下选项：

*   微软网络客户端
*   QoS 数据包调度程序
*   Microsoft 网络的文件和打印机共享
*   Microsoft LLDP 协议驱动程序
*   链路层拓扑发现映射器 I/O 驱动程序
*   链路层拓扑发现响应器
*   Internet 协议版本 6 (TCP/IPv6)
*   Internet 协议版本 4 (TCP/IPv4)

![在此处输入图像描述](../Images/9e480359df3aae929a2e3f381f50988e.png)

此外，您可能需要在“Hyper-V 管理器”中查看仿真器映像的网络适配器设置

验证显示的网络适配器是否有效。如果绑定到的适配器当前未在操作系统中启用，您可能会尝试禁用一些（例如连接到 WiFi 的适配器或您机器上的有线以太网适配器）。

![在此处输入图像描述](../Images/037c2bbb164c159ff8c21bfbad9d74fd.png)

让我知道这是否有帮助！

# datetime - 黑莓网络，焦点问题

> ID：14295103
> 
> 赞同：0
> 
> 时间：2013-01-12T16:02:31.183
> 
> 标签：datetime, blackberry, focus, webwork

我正在使用 BlackBerry WebWorks SDK 2.3.1.5 编译基于 jquery 的应用程序并在 Blackberry JDE7.0 模拟器上运行

以下是 datetimepicker、datepicker 和 timepicker 的 HTML 代码

```
<div data-role="fieldcontain">
            <label for="dateandtime">Date and Time </label>
            <input type="datetime" id="dateandtime" /> <!-- Use id and name values  -->
        </div>
        <div data-role="fieldcontain">
            <label for="date">Date</label>
            <input type="date" id="date" /> <!--    Use id and name values  -->
        </div>
        <div data-role="fieldcontain">
            <label for="time">Time </label>
            <input type="time" id="time" /> <!--    Use id and name values  -->
        </div> 
```

运行此代码后，会出现日期时间选择器、日期选择器和时间选择器。

当我单击 DateTime 选择器时，会出现本机 BlackBerry DateTime 选择器，并且能够选择日期和时间。然后我单击确定，该值将作为文本显示在相应的字段中。

现在，当我单击日期时间选择器并选择日期和时间而不是单击确定后，问题出现了，我单击了取消。

如果我单击取消，选择器会消失，然后当我再次单击 DateTime 选择器时，它充当文本字段而不是 DateTime 选择器，现在我单击充当文本字段的日期选择器，然后单击时间选择器并起作用作为文本字段，现在滚动后它变得正常，当我点击日期时间选择器时，日期时间选择器出现，同样其他选择器也可以工作，但如果我点击取消而不是确定，同样的问题再次发生。

滚动后出现问题，但如果我点击取消，问题又回来了。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:18:14.183

这听起来像一个操作系统错误。不幸的是，我目前不知道解决方法。你提到滚动消除了这个问题？如果你有一个用于日期字段的 onfocusout 事件监听器，并自动向上滚动页面 1px 怎么办？这会“迫使”问题消失吗？

# c# - 保留对象的历史记录（WPF、NHibernate）

> ID：14295104
> 
> 赞同：0
> 
> 时间：2013-01-12T16:02:47.727
> 
> 标签：c#, .net, wpf, nhibernate

我正在开发一个应用程序，其中员工有一个要执行的任务列表。对于每项任务，他们都会使用一些项目。例如：一名机械师正在修车，必须更换保险杠换新的，所以机械师去仓库拿了一个新物品。该特定项目具有单价。因此，当这个人拿起他的固定汽车时，他会为保险杠支付特定的价格。但是，假设价格在几周后发生了变化。所以我改变了那个项目的单价。但在这项任务的历史上，它仍然必须是旧价格。

我想知道有什么方法可以最好地保留这个历史。我正在考虑在更改价格之前复制该特定项目，然后使用旧价格的项目更新任务。之后，我将使用新价格更新商品。

或者有没有其他方法可以实现这一目标？我正在使用 Fluent NHibernate 来处理我的数据库

假设这些是我的课程（对于示例来说有点简单，足够了）

```
public class Task
{
  public virtual int Id;
  public virtual string Description;
  public virtual IList<Item> Items;
}

public class Item
{
  public virtual int Id;
  public virtual string ItemName;
  public virtual decimal UnitPrice;
} 
```

欢迎任何帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:12:38.823

In case of invoicing (which seems to be the use-case here) 'always' copy the current price to the invoice-line on creation.

Updating the prices should only be done on the actual pricelist. Saves you a lot of trouble on keeping track of prices & history.

Keeping a history on the actual pricelist is still an idea (auditing for example) but it shouldn't be used to create an invoice and asking/query the history for: [what was the actual price of the item on that particular date]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T16:05:57.387

有两种基本策略：

1.  使用历史记录，例如价格表上的[scd-2](http://en.wikipedia.org/wiki/Slowly_changing_dimension)实现。
2.  将所有字段复制`Item`到单独的表/类（例如`ItemInTask`）中，该表/类捕获创建任务时使用的确切单元数据。

# mongodb - 使用 MongoDB 的聚合框架移动平均值

> ID：14295111
> 
> 赞同：3
> 
> 时间：2013-01-12T16:03:09.637
> 
> 标签：mongodb, aggregation-framework, nosql

鉴于您有一组具有日期或期间（2013-01）属性的文档，使用 MongoDB 的聚合框架计算移动平均统计数据（例如 3-m avg.）的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T00:26:41.643

最好以合理的时间间隔运行整个聚合，并重新计算整个集合。如果您要计算 3 个月的平均值，请设置一个每天晚上运行的 cronjob 并计算平均值。

```
var minus3Months = new Date();
minus3Months.setMonth(now.getMonth()-3);
db.myCollection.aggreage([
    {"$match": {"createdAt": {"$gte": minus3Months}}},
    ......
]) 
```

# complexity-theory - 如何写大 O 符号

> ID：14295113
> 
> 赞同：0
> 
> 时间：2013-01-12T16:03:11.030
> 
> 标签：complexity-theory, big-o

我真的不知道如何用大 O 表示法表达。我已经看到几个消息来源在谈论这个，但这只会让我更加不确定。当我用 big-O 编写时，我应该忽略常量吗？

例子：

```
1\. 0.02N³
2\. 4N*log(2^N)
3\. 24Nlog(N)
4\. N²
5\. N*sqrt(N) 
```

这就是我所说的“忽略常量”：

```
1\. O(N³)
2\. O( N*log(2^N) )
3\. O( Nlog(N) )
4\. O( N² )
5\. O( N*sqrt(N) ) 
```

与其他示例相比，增长速度`O( N*log(2^N) )`和增长速度如何？`O( N*sqrt(N) )`

我非常感谢您的帮助，因此在此先感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T16:20:51.907

大 O 表示法表征函数的渐近行为。数学`f(x) = O(g(x))`上当`lim (x->inf) (f(x)/g(x)) = const`

让我们弄清楚一点。有 5 种常用符号（[Bachmann-Landau 符号](http://en.wikipedia.org/wiki/Big_O_notation#Family_of_Bachmann.E2.80.93Landau_notations)）：

```
 ω (small omega)
 Ω (big omega)
 Θ (theta)
 Ο (big o)
 ο (small o) 
```

它们像数学比较运算符一样工作：

```
 < (strictly less)
 <= (less or equals)
 = (equals)
 >= (greater or equals)
 > (strictly greater) 
```

严格来说，大 o 只是一个上限，因此您不能仅根据大 o 符号来判断哪个函数增长得更快。

例如，快速排序的最坏情况复杂度 = O(n ² )，但也可以说快速排序的最坏情况复杂度 = O(n ^(889) )。就像我们可以根据 x < 2 的知识说 x < 899。

由于限制行为，您可以忽略函数的常量和低阶加数（它们由最高阶加数“支配”）。例如，如果`f(x) = 33*n³ + n² + n + 3544`，那么说`f(x) = O(n³)` （此外，说`f(x) = Θ(n³)`哪个提供更多信息（`Θ`称为 a `tight bound`）是正确的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T16:10:49.607

Yes, you ignore the constants. Also if you have a sum ex. `5n^2 + 2n` you only take the biggest argument with highest exponent (also without the constant) -> here: `O(n^2)`
You did those examples good.

To compare the growing, I suggest you use wolframalpha or any tool drawing plots, and you will see how they change

# sql - 以非 root 身份在 Linux 上安装 Firebird

> ID：14295114
> 
> 赞同：0
> 
> 时间：2013-01-12T16:03:11.500
> 
> 标签：sql, linux, firebird

我正在尝试在我没有 root 访问权限的机器上在 Linux 下安装 firebird，但 install.sh 失败并出现错误“您需要成为 'root' 用户才能进行此更改。” 如何才能做到这一点？

**编辑** 我也尝试从源代码构建：

```
./configure.sh --prefix=/home/sergei/firebird
make 
```

这些都很好，但是'make install'给出了：

```
(cd ../gen; ./install/makeInstallImage.sh)
You must be root to build package 
```

**编辑** 要清楚，我只对在嵌入式/独立模式下运行它感兴趣（单个进程访问单个文件），作为 SQLite 的替代品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T14:25:03.067

简短的回答，你不能 Firebird 完整安装需要创建一个 Linux 用户并激活一个服务，所以它需要 root 访问

您可以尝试使用 fakeroot、chroot，或者像 Jonathan 所说的那样修改安装脚本。或者，如果出于测试目的，您可以尝试运行它，请参阅[http://www.ib-aid.com/articles/item111](http://www.ib-aid.com/articles/item111)

但你的目标是什么？

# php - 仅本地主机上的 SoapFault 异常

> ID：14295121
> 
> 赞同：0
> 
> 时间：2013-01-12T16:03:55.500
> 
> 标签：php, soap, easyphp

在搜索了与此错误相关的许多问题后，我一直无法找到答案。

当我尝试通过soap连接到一个URL时，它在Godaddy VPS上运行良好，但在我的本地服务器（EasyPHP AMP Stack）上失败了。Open SSL 和 php 的 ini 设置中的 Soap 一样启用，但有人知道我缺少什么，因为我猜这是配置问题吗？

我正在运行的代码是

```
$gdAuctionsWSURL = 'http://auctions.godaddy.com/gdAuctionsWS/GdAuctionsBiddingWS.asmx?WSDL';
$gdAuctionsWS = new SoapClient($gdAuctionsWSURL); 
```

并且仅在我的本地服务器上发生的错误是

```
Fatal error: Uncaught SoapFault exception: 
    [WSDL] SOAP-ERROR: Parsing WSDL: Couldn't load from 'http://auctions.godaddy.com/gdAuctionsWS/GdAuctionsBiddingWS.asmx?WSDL' :
    failed to load external entity "http://auctions.godaddy.com/gdAuctionsWS/GdAuctionsBiddingWS.asmx?WSDL" 
```

# sorting - 仅对 CVS 表中的单个列进行排序

> ID：14295122
> 
> 赞同：1
> 
> 时间：2013-01-12T16:04:03.900
> 
> 标签：sorting, awk

是否有使用 awk、sort 或等于对多列 CSV 表的单列进行排序或反转的单步方法，同时保持其余部分的顺序相同？

例如，我有：

```
6, 45, 9
5, 47, 6
4, 46, 7
3, 48, 4
2, 10, 5
1, 11, 1 
```

并希望拥有：

```
1, 45, 9
2, 47, 6
3, 46, 7
4, 48, 4
5, 10, 5
6, 11, 1 
```

因此，仅对第一列进行了排序，其余列按之前的顺序排列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:01:04.280

这可能对您有用：

```
paste -d, <(cut -d, -f1 file | sort) <(cut -d, -f2- file) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T19:31:27.657

awk 单行

```
awk -F, '{c[NR]=$1;l[NR]=$2", "$3}END{for(i=1;i<=NR;i++) print c[NR-i+1]", "l[i]}' file 
```

测试

```
kent$  echo "6, 45, 9
5, 47, 6
4, 46, 7
3, 48, 4
2, 10, 5
1, 11, 1"|awk -F, '{c[NR]=$1;l[NR]=$2", "$3}END{for(i=1;i<=NR;i++) print c[NR-i+1]", "l[i]}'
1,  45,  9
2,  47,  6
3,  46,  7
4,  48,  4
5,  10,  5
6,  11,  1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T19:47:36.003

If you have `GNU awk` here's a one liner:

```
$ gawk '{s[NR]=$1;c[NR]=$2 $3}END{for(i=0;++i<=asort(s);)print s[i] c[i]}' file
1,45,9
2,47,6
3,46,7
4,48,4
5,10,5
6,11,1 
```

If not, here's an `awk` script that implements a simple bubble sort:

```
{ # read col1 in sort array, read others in col array
  sort[NR] = $1
  cols[NR] = $2 $3
}
END { # sort it with bubble sort
    do {
    haschanged = 0
    for(i=1; i < NR; i++) {
      if ( sort[i] > sort[i+1] ) {
    t = sort[i]
    sort[i] = sort[i+1]
    sort[i+1] = t
    haschanged = 1
      }
    }
  } while ( haschanged == 1 )

  # print it
  for(i=1; i <= NR; i++) {
      print sort[i] cols[i]
  }
} 
```

Save it to a file `sort.awk` and do `awk -f sort.awk file`:

```
$ awk -f sort.awk file
1,45,9
2,47,6
3,46,7
4,48,4
5,10,5
6,11,1 
```

# jquery - 使用用户选择的微博提要扩展 Hartl Rails 教程

> ID：14295125
> 
> 赞同：1
> 
> 时间：2013-01-12T16:04:22.563
> 
> 标签：jquery, ruby-on-rails-3.2

我是 Web 开发和 Rails 的新手，并且已经完成了 Hartl 的教程。我正在尝试通过添加指向 home.html.erb 的链接来扩展应用程序，以允许用户在主页上选择不同的微帖子提要并在不重新加载页面的情况下显示新提要（使用 ajax 和 jquery）。这三个提要是：

社区 - 所有微博
我的朋友 - 用户和他/她的追随者的微博（与最终教程提要相同）
我的帖子 - 只是用户的帖子**** 修复了这个**

唯一正常工作的提要是“我的朋友”提要（教程中的提要），对于其他两个提要，@feed_items 为零，导致 *.erb.js 中出现以下错误

我把头发扯掉了——谢谢你的帮助！我从来没有使用过这个网站，所以如果我应该添加任何信息或者我问错了，请告诉我。

在 2013 年 1 月 12 日 06:10:12 -0500 开始 GET "/mycontributions" for 127.0.0.1 由 StaticPagesController#userfeed 作为 JS 用户负载进行处理（0.2 毫秒） SELECT "users".* FROM "users" WHERE "users" ."remember_token" = 'fHe72EwO6387WdP26K07Rw' LIMIT 1 SQL (112.2ms) UPDATE "users" SET "feed_selection" = 'My Contributions' WHERE "users"."id" = 1 Micropost Load (1.9ms) SELECT "microposts".* FROM "microposts" WHERE (user_id IN (SELECT follower_id FROM Relations WHERE follower_id = 1) OR user_id = 1) ORDER BY microposts.created_at DESC LIMIT 30 OFFSET 0 (0.4ms) SELECT COUNT(*) FROM "microposts"WHERE (user_id IN (SELECT follower_id FROM 关系 WHERE follower_id = 1) OR user_id = 1) 渲染 static_pages/userfeed.js.erb (5.8ms) 在 143ms 内完成 500 内部服务器错误

ActionView::Template::Error（未定义方法`paginate' for nil:NilClass): 1: alert ('start of userfeed.js.erb'); 2: $('#MyContributions').parent().addClass('active').siblings().removeClass('active'); 3: <% @micropost = current_user.microposts.build %> 4: <% @feed_items = current_user.userfeed.paginate(page: params[:page]) %> 5: $('.microposts').remove(); 6: $('.pagination').remove(); 7: $("#buzzFeed").append("<%= escape_javascript(render 'shared/feed') %>"); app/views/static_pages/userfeed.js.erb:4:in`_app_views_static_pages_userfeed_js_erb_774602371 *_641866188* '

home.html.erb 中的链接：

```
<li class="<%= 'active' if current_user.feed_selection == 'Community Buzz' %>">
    <%= link_to 'Community Buzz', 
        { :controller => :static_pages, :action => :communityfeed }, 
        remote: true, id: 'CommunityBuzz', class: "buzz-cat"  %> 
</li>
<li class="<%= 'active' if current_user.feed_selection == 'My Friends' %>">
    <%= link_to "My Friends", 
        { :controller => :static_pages, :action => :friendfeed }, 
        remote: true, id: "MyFriends", class: "buzz-cat" %>
</li>
<li class="<%= 'active' if current_user.feed_selection == 'My Contributions' %>">
<%= link_to "My Contributions", 
        { :controller => :static_pages, :action => :userfeed }, 
        remote: true, id: "MyContributions", class: "buzz-cat" %>
</li> 
```

static_pages_controller.rb

```
class StaticPagesController < ApplicationController
  respond_to :html, :js

  def home
    puts "StaticPagesContoller: action: home: start method"
    if signed_in?
      puts "home signed-in - feed_selection is: " + current_user.feed_selection

      if current_user.feed_selection.nil?
        puts "home signed-in - feed_selection is nil, so default it to 'Community Buzz' in the database"
        current_user.update_column(:feed_selection, "Community Buzz")
        toggle_feed(current_user.feed_selection, "Community Buzz") if !current_user.feed_selection.nil?
        end

      puts "home, signed-in - before calling toggle_feed"
      toggle_feed(current_user.feed_selection, current_user.feed_selection) if !current_user.feed_selection.nil?
      puts "home, signed-in - after  calling toggle_feed"

    end
  end

  def communityfeed
    puts "StaticPagesContoller: action: communityfeed: start method"
    if signed_in?
      puts "communityfeed, signed-in - feed_selection is: " + current_user.feed_selection
      puts "communityfeed, signed-in - before calling toggle_feed"
      toggle_feed(current_user.feed_selection, "Community Buzz") if !current_user.feed_selection.nil?
      puts "communityfeed, signed-in - after  calling toggle_feed"
    end    
  end

  def friendfeed
    puts "StaticPagesContoller: action: friendfeed: start method"
    if signed_in?
    puts "friendfeed, signed-in - feed_selection is: " + current_user.feed_selection
    puts "friendfeed, signed-in - before calling toggle_feed"
    toggle_feed(current_user.feed_selection, "My Friends") if !current_user.feed_selection.nil?
    puts "friendfeed, signed-in - after  calling toggle_feed"

    end
  end

  def userfeed
    puts "StaticPagesContoller: action: userfeed: start method"
    if signed_in?
      puts "userfeed, signed-in - feed_selection is: " + current_user.feed_selection
      toggle_feed(current_user.feed_selection, "My Contributions") if !current_user.feed_selection.nil?     

    end
  end
end 
```

toggle_feed 在 application_controller.rb

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  include SessionsHelper

 def toggle_feed(saved_feed_selection, picked_feed)    
    if saved_feed_selection != picked_feed
      puts "ApplicationController: toggle_feed: saved_feed_selection != picked_feed, saving picked_feed to database" 
      current_user.update_column(:feed_selection, picked_feed)       
      puts "ApplicationController: toggle_feed: after database save."
    end
    puts "ApplicationController: toggle_feed: before assigning @micropost"
    @micropost  = current_user.microposts.build
    puts "ApplicationController: toggle_feed: after assigning @micropost = " + @micropost.to_s

    case picked_feed
    when "Community Buzz" then
      @feed_items = current_user.communityfeed.paginate(page: params[:page])
when "My Friends" then
      @feed_items = current_user.feed.paginate(page: params[:page])
when "My Contributions" then
      @feed_items = Micropost.where("user_id = ?", current_user.id).paginate(page: params[:page])
    else
      puts "FAILED case!"
    end  
    puts "ApplicationController: toggle_feed: End"
  end 
end 
```

用户.rb

```
class User < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation
  has_secure_password #call this method to populate :password_digest field
  has_many :microposts, dependent: :destroy
  has_many :relationships, foreign_key: "follower_id", dependent: :destroy
  has_many :followed_users, through: :relationships, source: :followed
  has_many :reverse_relationships, foreign_key: "followed_id",
                                   class_name:  "Relationship",
                                   dependent:   :destroy
  has_many :followers, through: :reverse_relationships, source: :follower

#  before_save { |user| user.email = email.downcase }
  before_save { self.email.downcase! }
  before_save :create_remember_token # calls the private method (see below)

  validates :name,  presence: true, length: { maximum: 50 }
  VALID_EMAIL_REGEX = /\A[\w+\-.]+@[a-z\d\-.]+\.[a-z]+\z/i
  validates :email, presence: true, format: { with: VALID_EMAIL_REGEX },
                        uniqueness: { case_sensitive: false }
  validates :password, length: { minimum: 6 }
  validates :password_confirmation, presence: true

  def communityfeed
    puts "User.rb: communityfeed method: start"
    Micropost.all
    puts "User.rb: communityfeed method: end"
  end

  def feed # this is My Friends + the user
    Micropost.from_users_followed_by(self)
  end

  def userfeed # this is My Contributions
    puts "User.rb: userfeed method: start"
    Micropost.where("user_id = ?", id)
    puts "User.rb: userfeed method: end"
  end

  def following?(other_user)
    relationships.find_by_followed_id(other_user.id)
  end

  def follow!(other_user)
    relationships.create!(followed_id: other_user.id)
  end

  def unfollow!(other_user)
    relationships.find_by_followed_id(other_user.id).destroy
  end       

  private

    def create_remember_token
      puts "executing 'create remember token'"
      self.remember_token = SecureRandom.urlsafe_base64
    end
end 
```

这个工作friendfeed.js.erb

```
alert ('start of friendfeed.js.erb');
$('#MyFriends').parent().addClass('active').siblings().removeClass('active');
<% @micropost  = current_user.microposts.build %>
<% @feed_items = current_user.feed.paginate(page: params[:page]) %>
$('.microposts').remove();
$('.pagination').remove();
$("#buzzFeed").append("<%= escape_javascript(render 'shared/feed') %>");
alert ('end of friendfeed.js.erb'); 
```

这个不起作用 userfeed.js.erb

```
alert ('start of userfeed.js.erb');
$('#MyContributions').parent().addClass('active').siblings().removeClass('active');
<% @micropost  = current_user.microposts.build %>
<% @feed_items = Micropost.where("user_id = ?", current_user.id).paginate(page: params[:page]) %>
$('.microposts').remove();
$('.pagination').remove();
$("#buzzFeed").append("<%= escape_javascript(render 'shared/feed') %>");
alert ('end of userfeed.js.erb'); 
```

# asp.net - Css 在已发布的网站上不起作用

> ID：14295126
> 
> 赞同：0
> 
> 时间：2013-01-12T16:04:28.843
> 
> 标签：asp.net, css, c#-4.0

我最近刚刚在我的 asp.net 站点中实施了来自 ajax 的五星级评级系统。在本地调试模式下一切正常。但是。一旦我发布它，css就不会出现。我已经声明了内容页面中的所有 css，不知道这是否是原因。我对使用 css 非常缺乏经验；所以我很抱歉，如果它很简单。

我检查了图像 url 的拼写，并尝试将其实现到 site.css 中。但正如我所说，我缺乏经验；所以我不确定在这里做什么。

这是我的代码：

在内容页面顶部声明的 css：

[http://codepad.org/m1w39Hep](http://codepad.org/m1w39Hep)

我的评级控制对 css 的引用：

[http://codepad.org/Kl0BKets](http://codepad.org/Kl0BKets)

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:52:30.120

我看过你的代码。将扩展名设为“.css”而不是“.c”

我认为您不能为此使用 Codepad，因为它不支持 CSS。

如果您不使用键盘

然后，当您在服务器中部署它时，请检查 CSS 文件中存在的图像的 URL 以获得评级/。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T16:56:29.937

检查您的 css 链接是否正确以及您的 css 文件是否已成功加载

# c# - 使用 DeleteIfExists() 时，带有 azure 存储的 C# 出现异常

> ID：14295128
> 
> 赞同：1
> 
> 时间：2013-01-12T16:04:53.017
> 
> 标签：c#, azure-blob-storage

`DeleteIfExists`使用类中的方法时出现异常`CloudBlockBlob` 。

这是我的代码：

```
CloudBlobClient blobClient = this._storageAccount.CreateCloudBlobClient();

            directory = directory.ToLower();

            string containerDirectory = this.GetContainer(directory);
            string relativePathWithoutContainer = this.GetRelativePathWithoutContainer(directory);

            CloudBlobContainer container = blobClient.GetContainerReference(containerDirectory);
            container.CreateIfNotExist();
            container.SetPermissions(new BlobContainerPermissions() { PublicAccess = BlobContainerPublicAccessType.Blob });

            foreach (HttpPostedFileBase file in files)
            {
                CloudBlockBlob blob = container.GetBlockBlobReference(string.Format("{0}/{1}", relativePathWithoutContainer, file.FileName.ToLower()));
                blob.DeleteIfExists();
                blob.UploadFromStream(file.InputStream,new BlobRequestOptions());
            }

            return true; 
```

我在这条线上遇到了异常：

```
blob.DeleteIfExists(); 
```

异常详情如下：

> 服务器未能验证请求。确保 Authorization 标头的值正确形成，包括签名。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T06:33:53.273

[从这里](http://msdn.microsoft.com/en-us/library/windowsazure/ee772904.aspx)得到一个例子尝试添加这些，看看它是否有效

// 如果 blob 已经存在，则删除它，同时删除所有快照。

```
BlobRequestOptions options = new BlobRequestOptions();

options.DeleteSnapshotsOption = DeleteSnapshotsOption.IncludeSnapshots;

blob.DeleteIfExists(options); 
```

# c# - .NET DateTime 显示在 FormView 中

> ID：14295132
> 
> 赞同：0
> 
> 时间：2013-01-12T16:05:16.497
> 
> 标签：c#, .net, wcf, formview

我有一个 WCF 服务，它提供一个数据对象，其中一个属性是通过调用创建的 DateTime`new DateTime(10,1,1995)`

无论如何，当这个数据对象作为数据源链接到 FormView 时，我得到一个 DateTime 格式错误。我试图更改源中的 FormView，但我不知道如何访问该对象。

```
<ItemTemplate>
    ExtensionData:
    <asp:DynamicControl ID="ExtensionDataDynamicControl" runat="server" DataField="ExtensionData" Mode="ReadOnly" />
    <br />
    Authors:
    <asp:DynamicControl ID="AuthorsDynamicControl" runat="server" DataField="Authors" Mode="ReadOnly" />
    <br />
    Description:
    <asp:DynamicControl ID="DescriptionDynamicControl" runat="server" DataField="Description" Mode="ReadOnly" />
    <br />
    PubDate:
    <asp:DynamicControl ID="PubDateDynamicControl" runat="server" DataField="PubDate" Mode="ReadOnly" />
    <br />
    PubID:
    <asp:DynamicControl ID="PubIDDynamicControl" runat="server" DataField="PubID" Mode="ReadOnly" />
    <br />
    Publisher:
    <asp:DynamicControl ID="PublisherDynamicControl" runat="server" DataField="Publisher" Mode="ReadOnly" />
    <br />
    Title:
    <asp:DynamicControl ID="TitleDynamicControl" runat="server" DataField="Title" Mode="ReadOnly" />
    <br />

</ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:27:00.727

你已经得到了`DateTime`构造函数中参数的顺序。

它应该是：

```
new DateTime( 1995, 1, 10 ) // year, month, day 
```

# macos - Mac App - 分布式版本的帮助无法完全正常工作。链接断开

> ID：14295133
> 
> 赞同：0
> 
> 时间：2013-01-12T16:05:24.983
> 
> 标签：macos, anchor, help-viewer

Mac App - 分布式版本的帮助无法完全正常工作。开发机器：OS X 10.8.2，2008 年末 MBP，Xcode 4.5.2

该应用程序有九个 html 页面帮助系统。每个页面共享一个带有九个选项的侧边栏菜单。每个菜单选项都包含以下类型的链接：

```
<a href="help:anchor=anchor_name bookID=com.mycompany.myapp.help"> 
```

此菜单系统链接在我的开发机器上按预期工作。

当我使用以下任一方法将应用程序分发到另一台机器（OS X 10.6.8）时，帮助系统会加载标题页，但锚链接无法工作：

```
1\. Transfer a debug version of app to another machine.
2\. Use Archive to produce an install PKG file. In this 
method I deliver the PKG to a tester, using a Development Provisioning Profile
that includes the UUID of the target machine. 
```

任何人都可以建议解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T13:07:45.803

这个问题在 OS X 10.8.3 中消失了

# php - Laravel - 如何将表格从帖子连接到类别

> ID：14295137
> 
> 赞同：1
> 
> 时间：2013-01-12T16:05:47.017
> 
> 标签：php, laravel, eloquent

这是我的表格数据。

*   **类别**[id] [category_name]

*   **帖子**[id] [category_id] [post_name]

我想做的是：

我想为 echo category_name 列出帖子并加入类别表。

* * *

这是我的控制器

```
class Form_data_Controller extends Base_Controller {

    function action_index() {

        $posts = new Post();
        $list_posts = $posts->list_posts();
        $view['list_posts'] = $list_posts;

        echo '<pre>';
        print_r( $list_posts );
        echo '</pre>';

        $view['pagination'] = $list_posts->links();

        // page title
        $view['page_title'] = 'Test list data';

        // create view and end.
        return View::make( 'form-data.index_v', $view );

    }// action_index

} 
```

这是后期模型

```
class Post extends Eloquent {

    //public static $table = 'posts';

    public function categories() {
        return $this->belongs_to( 'Category' );
    }// categories

    function list_posts() {
        $query = $this
                ->order_by( 'post_name', 'asc' )
                ->paginate( '10' );

        return $query;
    }// list_posts

} 
```

这是类别模型

```
class Category extends Eloquent {

    //public static $table = 'categories';

    public function posts() {
        return $this->has_many( 'Post' );
    }// categories

} 
```

我想列出来自 post model -> list_posts() 方法的帖子，因为我希望它在 model Not 控制器中完成，但我无法**加入**categories 表来获取**category_name**。

如何加入类别表以获取**类别名称**？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:17:21.043

多个控制器方法可能需要以不同的方式“列出帖子”，因此我不会将该逻辑放入模型中。这就是我认为你应该完成你的问题的方式。否则，您可以将其设为静态方法并将其称为 $posts = Post::list_posts();

```
class Form_data_Controller extends Base_Controller {

    function action_index() {

        $posts = Post::order_by( 'post_name', 'asc' )->paginate( '10' );

        return View::make( 'form-data.index_v')
                  ->with('title', 'Test list data')
                  ->with('posts', $posts);
    }
} 
```

//应用程序/模型/Post.php

```
class Post extends Eloquent {

    //public static $table = 'posts';

    public function category() {
        return $this->belongs_to( 'Category', 'category_id' );
    }
} 
```

//application/models/Category.php

```
class Category extends Eloquent {

    //public static $table = 'categories';

    public function posts() {
        return $this->has_many( 'Post' );
    }// categories
} 
```

//application/views/form-data/index_v.blade.php

```
<html>
<head>
<title>{{ title }}</title>
</head>
<body>
 {{ $posts->links() }}
@foreach($posts as $post)
 {{ $post->category->name }}
@endforeach
</body>
</html> 
```

# c++ - 将 char 指针初始化为字符串，将其他类型指针初始化为数组

> ID：14295147
> 
> 赞同：3
> 
> 时间：2013-01-12T16:06:32.003
> 
> 标签：c++, c

我有一个关于初始化 char 指针与其他数据类型指针的问题。具体来说，我们可以按如下方式初始化 char 指针：

```
char *char_ptr = "Hello World"; 
```

据我所知，字符串唯一的特别之处在于它是一个以“0”结尾的字符数组。但是，我们不允许执行以下操作：

```
int *int_ptr = {1,2,3,4}; 
```

但我们必须这样做：

```
int int_arr[] = {1,2,3,4};
int_ptr = int_arr; 
```

为了让 int_ptr 指向 int_array 的第一个元素。

在 char 的情况下，在让 char_ptr 指向字符串之前，我们没有将字符串“Hello World”显式定义为 char 数组，而是直接使用字符串“Hello World”初始化 char_ptr。

我的问题是，为什么会出现这种情况，字符串有什么特别之处可以让我们这样做但不能对其他类型这样做？

提前致谢，

斯里拉姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T16:19:56.253

您可以在 C99 或更高版本中使用复合文字对其他类型执行相同操作：

```
#include <stdio.h>

int main(void) {
    int *ptr = (int[]){ 1, 2, 3, 4 };
    for(int i = 0; i < 4; ++i) {
        printf("%d: %d\n",i, ptr[i]);
    }
    return 0;
} 
```

复合文字`(int[]){ 1, 2, 3, 4 }`创建一个 unnamed `int[4]`，就像`"Hello"`创建一个 unnamed一样`char[6]`。

所以从 C99 开始，`char`它的特殊之处在于提供了更方便的语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T16:08:02.150

答案是：

***字符串（文字）被视为特殊的。***

相信它！接受它，并与它一起生活。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T16:09:46.713

这是因为字符串被大量使用，所以有一种更简单的方法来定义它们可用。这比每次都明确地制作一个字符数组要容易得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T16:18:38.537

`"Hello World"`是一个字符串文字。它具有“12 数组`const char`”类型和静态存储持续时间。也就是说，它会在内存中为您提供一个在程序执行期间持续存在的数组。它有 12`char`因为你正确指出的空字符。现在让我们考虑这两种情况。

您依赖于`const char *char_ptr = "Hello World";`一个事实，即数组可以转换为指向其第一个元素的指针。因此，您`char_ptr`指向文字所代表的静态数据的第一个元素。

使用`const char char_arr[] = "Hello World";`，会发生用于初始化字符数组的特殊规则。您得到的是再次`char_arr`属于“12 数组`const char`”类型，但静态字符串数据中的字符用于初始化数组中的每个元素（第 8.5.2 节）。这意味着，您的数组`char_arr`是静态字符串数据的副本。

当我们这样做时，`int *int_ptr = {1,2,3,4};`我们会得到一个错误。为什么？因为`{1, 2, 3, 4}`不像上面的字符串文字。`{1, 2, 3, 4}`是一个初始化器，根本不是文字。实际上，它是一个*初始化列表*，只能用于初始化事物。它不是字面意思。它不会创建一些包含值、、、和的静态数组，`1`然后给`2`你一个指针。它只是用来直接初始化一个数组。那你的意思是什么？该数组不存在任何它指向的地方。`3``4``int_ptr`

然而，`int int_arr[] = {1,2,3,4};`正确使用这个初始化列表是正确的。您会得到一个数组 ，`int_arr`其中每个元素都被初始化为初始化列表中的元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T16:09:23.287

当您设置 char *char_ptr = "Hello World" 时，您将字符串文字的地址设置为 char_ptr。但是，在其他数据类型的情况下，没有什么类似于字符串文字。所以，这是不允许的。

# c# - 在树视图文件资源管理器中隐藏系统和隐藏文件

> ID：14295148
> 
> 赞同：-3
> 
> 时间：2013-01-12T16:06:32.973
> 
> 标签：c#

我在 C# Winforms 应用程序中有一个树视图，它显示带有隐藏文件和系统文件的目录

```
 public TreeNode GetDirectory(TreeNode parentNode)
    {
        DirectoryInfo d = new DirectoryInfo(parentNode.FullPath);
        DirectoryInfo[] dInfo = d.GetDirectories()
                                  .Where(di => !di.Attributes.HasFlag(FileAttributes.System))
                                  .Where(di => !di.Attributes.HasFlag(FileAttributes.Hidden))
                                  .ToArray();
        parentNode.Nodes.Clear();
            if (dInfo.Length > 0)
            {
                TreeNode treeNode = new TreeNode();
                foreach (DirectoryInfo driSub in dInfo)
                {
                    treeNode = parentNode.Nodes.Add(driSub.Name);
                    treeNode.Nodes.Add("");

                }
            } 
```

错误是错误 1“System.Array”不包含“Where”的定义，并且找不到接受“System.Array”类型的第一个参数的扩展方法“Where”（您是否缺少 using 指令或程序集引用?)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:31:43.307

```
DirectoryInfo d = new DirectoryInfo(@"c:\");
DirectoryInfo[] dInfo = d.GetDirectories()
                          .Where(di => !di.Attributes.HasFlag(FileAttributes.System))
                          .Where(di => !di.Attributes.HasFlag(FileAttributes.Hidden))
                          .ToArray(); 
```

# android - 如何在无限循环中不断更新活动中的 TextView？

> ID：14295150
> 
> 赞同：7
> 
> 时间：2013-01-12T16:06:41.253
> 
> 标签：android, loops, infinite

我有一个有 TextView 的活动，我想不断更新文本..

在 Java 中，我可以创建一个无限的 while 循环，并在每次迭代时设置文本。

但是当我尝试在 Android 中执行此操作时，它会显示黑屏，甚至不会加载活动。

我在方法中放入了无限`onCreate`，也许这就是它崩溃的原因..但如果是的话，我应该把它放在哪里？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-12T16:11:21.057

使用[Handler](http://developer.android.com/reference/android/os/Handler.html)和一个单独的线程/可运行来不断更新 TextView 而不是 While 循环：

```
Handler handler=new Handler();
handler.post(new Runnable(){ 
    @Override
    public void run() {
        // upadte textView here
        handler.postDelayed(this,500); // set time here to refresh textView
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-05T14:23:33.187

**最小的工作示例**

基于[https://stackoverflow.com/a/14295193/895245](https://stackoverflow.com/a/14295193/895245)：

```
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.widget.TextView;

public class Main extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        final int i = 0;
        final TextView textView = new TextView(this);
        textView.setText(String.format("%d", i));
        setContentView(textView);
        final Handler handler = new Handler();
        class MyRunnable implements Runnable {
            private Handler handler;
            private int i;
            private TextView textView;
            public MyRunnable(Handler handler, int i, TextView textView) {
                this.handler = handler;
                this.i = i;
                this.textView = textView;
            }
            @Override
            public void run() {
                this.handler.postDelayed(this, 500);
                this.i++;
                this.textView.setText(String.format("%d", i));
            }
        }
        handler.post(new MyRunnable(handler, i, textView));
    }
} 
```

您可以将其复制粘贴到由 生成的主要活动中`android create project [...]`，您将在您的应用程序上看到一个计数器。

在安卓 22 上测试。

# sql-server-2008 - 使用相关子查询更新查询

> ID：14295152
> 
> 赞同：1
> 
> 时间：2013-01-12T16:07:22.797
> 
> 标签：sql-server-2008, tsql

我正在尝试将 Foxpro 应用程序转换为 .NET。作为该转换的一部分，我将数据从 DBF 表转换为 Sql 服务器。

我需要根据 Orders 表 FirstOrder 和 LastOrder 在 Customer 表中提出几个新字段。

我似乎无法在 TSql 中搞清楚如何做到这一点。我知道我会如何在 Foxpro 中做到这一点，如果必须的话，我实际上仍然可以在那里做到，但我知道我需要学习如何在 Sql 中做到这一点。

这里是基本结构。客户表有一个 Id，然后是我需要更新的 FirstOrder 和 LastOrder 字段。Order Table 有 OrderDate，但这里是真实的曲线。客户 ID 可以存在于订单中的 5 个不同字段中：ShipperId、PickupId、ConsigneeId、DeliveryId 或 BillingId。

所以像：

```
UPDATE customers
SET FirstOrderDate = 
(Select MIN(OrderDate)
FROM Orders o
WHERE o.ShipperId = Customers.Id or
o.PickupId = Customers.Id or
o.ConsigneeId = Customers.Id or
o.DeliveryId = Customers.Id or
o.BillingId = Customers.Id) 
```

只是似乎无法找出如何将子查询与主更新查询联系起来。

谢谢，-席德

* * *

编辑：这是根据 MarkD 的建议工作的 SELECT：

```
Select C.Id,Min(o.OrderDate) as firstorder, MAX(o.OrderDate) as lastorder
from Customers C
JOIN Orders o
on o.ShipperId = C.Id or
        o.PickupId = C.Id or
        o.ConsigneeId = C.Id or
        o.DeliveryId = C.Id or
        o.BillingId = C.Id 
GROUP BY C.Id 
```

那么现在我应该将其用作子查询或游标来回发到客户表吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T16:15:24.843

虽然我认为`JOIN`标准不太可能，但看起来你正在尝试这样做？

编辑：我已经修改了`JOIN`标准，但这就是你所追求的。 'd`Grouping By`列是奇数。`OR`

```
;WITH MinOrderDates AS
(
    SELECT   CustID 
            ,OrderDate  = MIN(OrderDate)
    FROM Orders
    GROUP BY CustID
)

UPDATE C
SET FirstOrderDate = MIN(O.OrderDate)
FROM Customers      C
JOIN MinOrderDates  O   ON C.Id = O.CustID 
```

`OR`这就是您的查询与s 的样子

```
;WITH MinOrderDates AS
(
    SELECT   ShipperId
            ,PickupId
            ,ConsigneeId
            ,DeliveryId
            .BillingId
            ,OrderDate  = MIN(OrderDate)
    FROM Orders
    GROUP BY ShipperId
            ,PickupId
            ,ConsigneeId
            ,DeliveryId
            .BillingId
)

UPDATE C
SET FirstOrderDate = MIN(O.OrderDate)
FROM Customers      C
JOIN MinOrderDates  O   ON o.ShipperId     = C.Id or
                           o.PickupId      = C.Id or
                           o.ConsigneeId   = C.Id or
                           o.DeliveryId    = C.Id or
                           o.BillingId     = C.Id 
```

编辑：虽然我很难找到你发布的语法的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-05T09:22:12.710

试试这个

```
UPDATE customers
SET FirstOrderDate = 
(Select MIN(OrderDate)
FROM Orders
WHERE ShipperId = Customers.Id or
PickupId = Customers.Id or
ConsigneeId = Customers.Id or
DeliveryId = Customers.Id or
BillingId = Customers.Id) 
```

# mysql - 更改mysql数据库地址

> ID：14295154
> 
> 赞同：0
> 
> 时间：2013-01-12T16:07:49.727
> 
> 标签：mysql

1小时前我问了这个问题：

如何将我的数据从一个数据库 (000webhosting.com) 传输到另一个数据库 (shatellhost.com)？注意：我使用 000webhosting.com 免费托管服务，但无法创建完整备份。我的数据是 phpfox 社交网络。

没有人回答，所以我这样做了：

我将 000webhosting.com 中 public-html 中的全部数据传输（下载）到我的计算机，然后将其全部上传到我在 shotellhost.com 中的新主机的 public-html，然后当我尝试打开我的站点时：www.ibiology.ir这出现：

```
Cannot connect to the database:
Can't connect to MySQL server on 'mysql5.000webhost.com' (4) 
```

如何将 MySQL 地址更改为新的 MySQL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T11:13:46.077

这个错误似乎是由于您的PHP代码的配置文件，当您更改主机时连接信息没有正确更改。

首先要做的是确保您已更改数据库。由于安全原因，大多数托管服务不允许从另一个位置连接到那里的 mysql 服务器。在那里，您连接到`mysql5.000webhost.com`另一台服务器。

其次，查看代码，找出包含数据库连接信息的文件，通常包括：`database hostname`, `database username`, `database password`, `database name`. 如果您使用 PHP 框架，请查看文档。

一般来说，这是我在将站点移动到另一台主机时通常会做的事情：

*   在我的旧主机控制面板中打开 PHPMyAdmin
*   导出当前数据库的全部数据。我通常检查`DROP TABLE/DROP VIEW`选项。
*   将导出的 sql 文件保存到我的本地驱动器
*   打开我的新主机的控制面板
*   查找 MySQL 配置选项。您可以在这里找到 MySQL 主机名，通常是`localhost`（是的，000webhost 是不使用此默认主机名时的特殊情况）。
*   如有必要，创建数据库和用户。
*   将`database hostname`, `database username`, `database password`,`database name`信息正确写入源代码的 php 配置文件中。
*   在新主机的控制面板中打开PHPMyAdmin，进入我的数据库（刚刚创建）并导入之前的sql文件。

如果一切正常，您的代码可能会正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T16:09:19.797

执行[mysqldump](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)，然后将 SQL 导入新数据库。

**备份**：#mysqldump -u root -p[root_password] [database_name] > dumpfilename.sql

**恢复**：# mysql -u root -p[root_password] [database_name] < dumpfilename.sql

# android - Android - 如何使用自定义微调器

> ID：14295160
> 
> 赞同：0
> 
> 时间：2013-01-12T16:08:26.407
> 
> 标签：android, spinner

我扩展了微调器类以对其进行自定义，但我不知道如何在我的代码中使用它。

```
public class mySpinner extends Spinner {
......
} 
```

我有一个使用微调器的现有活动，我想将其更改为使用 mySpinner 类。

起初：

```
 Spinner spinner = (Spinner) textEntryView
            .findViewById(R.id.account_spinner); 
```

和

```
 <Spinner
    android:id="@+id/account_spinner"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:prompt="@string/ADALabel1"
    android:layout_alignLeft="@+id/newassetsymbol"
    android:layout_below="@+id/assetclass_spinner" /> 
```

首先我尝试：

```
 mySpinner spinner = (Spinner) textEntryView
            .findViewById(R.id.account_spinner); 
```

编译错误（有意义）。然后我尝试了：

```
 mySpinner spinner = (mySpinner) textEntryView
            .findViewById(R.id.account_spinner); 
```

运行时转换错误。然后我用上一行更改了布局：

```
 <mySpinner
    android:id="@+id/account_spinner"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:prompt="@string/ADALabel1"
    android:layout_alignLeft="@+id/newassetsymbol"
    android:layout_below="@+id/assetclass_spinner" /> 
```

01-12 06:50:02.664: E/AndroidRuntime(597): 由: java.lang.ClassNotFoundException: android.view.mySpinner in loader dalvik.system.PathClassLoader[/data/app/org.sample.sample-1 .apk]

这似乎并不难，但我错过了一些东西。有人可以帮忙吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:10:58.237

When using custom `View` components in XML, you need to use the complete class path.

```
<com.example.appname.mySpinner /> 
```

# python - Python网络/socket编程，简单游戏

> ID：14295161
> 
> 赞同：3
> 
> 时间：2013-01-12T16:08:33.287
> 
> 标签：python

我试图制作一个简单的游戏，但无法理解如何让它工作并通过网络发送更多的东西。它第一次工作，但它应该去 10 次。它现在只发送 1 个随机数，但我希望它在游戏再次进行时发送一个新数字并想要一个新数字。

服务器

```
import socket, random               

sock = socket.socket()
host = socket.gethostname()
port = 12345
sock.bind((host, port))
sock.listen(5)

c, addr = sock.accept()

cpu = random.choice(range(0, 3))
c.send(cpu)

gameon = c.recv(int(1024)) 
```

客户

```
import socket, random

sock = socket.socket()  # Create a socket object
host = socket.gethostname()  # Get local machine name
port = 12345  # Reserve a port for your service.
sock.connect((host, port))

GAMEON = 'Rock', 'Paper', 'Scissors'
game = 0
iwin = 0
ilose = 0
tie = 0

while game < 10:

    for i in range(0, 3):
        print "%d %s" % (i + 1, GAMEON[i])

    player = int(input ("Choose from 1-3: ")) - 1
    cpu = int(sock.recv(1024))
    print cpu

    print""

    print "%s vs %s" % (GAMEON[player], GAMEON[cpu])
    print ""
    if cpu != player:
      if (player - cpu) % 3 < (cpu - player) % 3:
        print "Player wins\n"
        iwin += 1
      else:
        print "CPU wins\n"
        ilose += 1
    else:
      print "TIE!\n"
      tie += 1 
    game += 1
    sock.send(str(game))
print"Game is done"
print"you win: ", (iwin), "Times"
print"computer wins: ", (ilose), "Times"
print"tie: ", (tie), "Times" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T16:12:04.817

You need threads to do your bidding.

**Example code**

```
# Listen
s.listen(10)
print 'Socket now listening on port ' + str(PORT) + "..."

while 1:
    # wait
    conn, addr = s.accept()

    print 'Connected with ' + addr[0] + ":" + str(addr[1])

    # Let's fork a thread for each request
    processThread = threading.Thread(target=processConnection, args=(conn, addr[0]));
    processThread.start()

s.close() 
```

Your `processConnection` will look like this:

```
# Process Connection
def processConnection(conn, ip):
    print "Thread started..."
    print "-------------------------------------------------------------";

    cpu = random.choice(range(0, 3))
    conn.send(cpu)

    gameon = conn.recv(int(1024))

    conn.close() 
```

**Update 1**

If you need the server to keep talking with the client, then do this. Server will wait for the client to send back a message. If client sends anything, server will return a random number. If the client doesn't need anymore data, just close the connection and server loop will end.

```
import socket, random               

sock = socket.socket()
host = socket.gethostname()
port = 12345
sock.bind((host, port))
sock.listen(5)

c, addr = sock.accept()

white True:
    cpu = random.choice(range(0, 3))
    c.send(cpu)

    gameon = c.recv(int(1024))

    if gameon is None:
        break 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T16:15:10.843

The problem is that your server will serve one request and then stop. You need to put it in some kind of while loop.

I wrote a basic IM server/client in Python which might help you: [https://github.com/hdgarrood/PyMess/blob/master/server/basictcpserver.py#L59](https://github.com/hdgarrood/PyMess/blob/master/server/basictcpserver.py#L59)

# php - set_include_path(get_include_path() . PATH_SEPARATOR . 'phpseclib');

> ID：14295164
> 
> 赞同：12
> 
> 时间：2013-01-12T16:08:41.807
> 
> 标签：php, ftp, sftp, phpseclib

我偶然发现了两个我以前从未在 php 中使用过的函数

```
set_include_path();
get_include_path(); 
```

我目前正在寻找将 phpseclib 实现到我正在处理的项目中。因为我需要使用 SSH2 的 SFTP 类扩展，而这又需要 MathBigInteger 类。等等。

该手册说`set_include_path()`：

> "在脚本运行期间设置 include_path 配置选项。"

这对我的框架的其余部分意味着什么，它会设置“phpseclib”目录中的所有包含路径吗？

另外，我真的不明白：

```
set_include_path(get_include_path() . PATH_SEPARATOR . 'phpseclib'); 
```

我将 php sec 存储在我的文件系统中的自定义库目录中，get_include_path() 是否在我的文件系统中神奇地找到了 phpseclib 目录？

如您所见，我在这里完全迷失了……有人可以为我提供一些启示吗？

PS/我只在应用程序的一个特定点需要这个库，因此只想在需要时包含它，目前我想将它包含在我的模型类的子类中。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-12T16:32:32.233

首先，您需要了解[`include_path`](http://php.net/manual/en/ini.core.php#ini.include-path)配置设置的作用：

> 指定 require、include、fopen()、file()、readfile() 和 file_get_contents() 函数查找文件的目录列表。格式类似于系统的 PATH 环境变量：在 Unix 中用冒号分隔的目录列表，在 Windows 中用分号分隔。
> 
> 在查找要包含的文件时，PHP 会分别考虑包含路径中的每个条目。它将检查第一个路径，如果找不到，则检查下一个路径，直到找到包含的文件或返回警告或错误。您可以在运行时使用 set_include_path() 修改或设置包含路径。

构造

```
set_include_path(get_include_path() . PATH_SEPARATOR . 'phpseclib'); 
```

`phpseclib`当您请求包含具有上述功能之一的文件时，附加到搜索的目录列表中。

由于`phpseclib`是相对路径，所以效果与您指定的一样`./phpseclib`，即 PHP 将查找`phpseclib`进程当前目录内命名的子目录。它不会神奇地确定库在文件系统中的位置；把它放在可以找到的地方是你的工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-12T16:34:28.127

要更好地理解什么`include_path`是什么，什么不是，请阅读php.ini 手册的[这一部分](http://php.net/manual/en/ini.core.php#ini.include-path)。

如果您正在尝试编写特定于项目的“自动加载器”，`set_include_path`则不是最好的工具（您可能想要查看[`spl_autoload_register`](http://php.net/manual/en/function.spl-autoload-register.php)），而是回答您的问题：

`set_include_path`确实会覆盖以前`include_path`的内容。可以使用`PATH_SEPARATOR`常量作为分隔符提供多个路径，例如：

```
set_include_path($path1\. PATH_SEPARATOR . $path2 . PATH_SEPARATOR . $path3); 
```

因此您可以添加到已经存在的路径而不是像这样覆盖它：

```
set_include_path(get_include_path() . PATH_SEPARATOR . $mypath); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T16:31:01.177

set_include_path 只是为 PHP 引擎设置一个可能的位置来查找文件。例如：

```
set_include_path( WEBROOT_PRIVATE.'scripts\phpseclib' );
if(include('Net/SSH2.php')){
    echo 'pass';
} else {
    echo 'fail';
}
include WEBROOT_PRIVATE.'application/global_function_list.php'; 
```

上述工作非常好，并继续正确包含应用程序所需的其他文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-04T16:59:56.600

约翰，我认为您的第二个示例失败的原因是“phpseclib”没有指定完整路径。假设您的第一个示例有效，您需要替换

```
set_include_path(get_include_path() . PATH_SEPARATOR . 'phpseclib'); 
```

和

```
set_include_path(get_include_path() . PATH_SEPARATOR . WEBROOT_PRIVATE.'scripts\phpseclib'); 
```

在第二个例子中。要确认您的 include_path 是您认为应该的，您可以添加该行

```
echo get_include_path() . " is my include path.\n"; 
```

在 set_include_path() 调用之后。

# c - C中的前向声明

> ID：14295165
> 
> 赞同：2
> 
> 时间：2013-01-12T16:08:50.130
> 
> 标签：c

我想问一下 C 中的前向声明。它们通常如何工作。例如，如果在文件中我声明

`struct task_struct;`

并在其他文件中定义结构会起作用吗？因为据我所知编译器必须知道正在声明的变量的大小。如果确实如此，那么编译器实际上如何处理这种类型的请求？

我在 Linux 源代码中找到了上面的示例，这让我很感兴趣。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T16:10:40.090

使用前向声明后，该*类型*将变为编译器的***不完整类型***。
编译器对类型的大小或布局一无所知，因此您无法执行任何需要编译器知道这些的操作。

在 C 中，如果前向声明一个类型，则只能使用指向该类型的指针。由于指向所有结构类型的指针需要相同的大小^([Note])，编译器很高兴知道它有一个指向类型的指针。

> **如果我转发声明一个结构并在其他文件中定义它，它会起作用吗？**

只要您只使用指向前向声明结构的文件中的结构的指针，它就可以了。如果你取消引用指针，你会得到错误，因为编译器不知道 Incomplete 类型的布局。

* * *

^([注意])感谢 melpomene 和 Daniel 的澄清。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T16:46:21.580

“工作”是什么意思？无论哪种方式，它都会以自己的方式工作。

在结构类型的完整声明不可见的地方，它是一个不完整的类型，只能用作不完整的类型。

在结构类型的完整声明可见的地方，它变成了一个完整的类型，并且可以用作完整的类型。

这里的所有都是它的。

与完整结构类型相比，不完整结构类型的可用性显着降低。基本上，您只能声明指向此类类型的指针并传递它们。其他任何事情（例如声明该类型的对象）都需要完整声明。

# ubuntu - Ubuntu 西里尔文文件名

> ID：14295166
> 
> 赞同：0
> 
> 时间：2013-01-12T16:08:54.733
> 
> 标签：ubuntu, filenames

我在 Mac 上有 nginx，在 ubuntu 11.10 上有生产 nginx。在静态网站中，我有文件名中带有西里尔字母的文件。在 mac 上，它们被系统找到。在 ubuntu 上，nginx 写入日志

```
2: No such file or directory. 
```

具体来说，并非所有俄罗斯文件名都被不接受。只有那些在文件名中有“й”字符的。有任何想法吗？

这不是 Nginx 的问题。因为`No such file`当我尝试这样做时，我得到了同样的结果`cat <filename>`。任何偶数西里尔文文件名都可以通过，但带有“й”的文件名除外。也许其他一些字符也坏了，我只是没有偶然发现它们。

字符“й”是一个标准的当代字符，而不是任何一种西里尔字母扩展或任何史前字母。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-13T09:26:01.460

在文件名中使用俄语字符在生产服务器中是错误的方式。只需在使用前重命名所有文件。

或者尝试像这样使用语言环境

*   LANG=ru_UA.UTF-8
*   LANGUAGE=ru_UA:ru
*   LC_CTYPE="ru_UA.UTF-8"
*   LC_NUMERIC="ru_UA.UTF-8"
*   LC_TIME="ru_UA.UTF-8"
*   LC_COLLATE="ru_UA.UTF-8"
*   LC_MONETARY="ru_UA.UTF-8"
*   LC_MESSAGES="ru_UA.UTF-8"
*   LC_PAPER="ru_UA.UTF-8"
*   LC_NAME="ru_UA.UTF-8"
*   LC_ADDRESS="ru_UA.UTF-8"
*   LC_TELEPHONE="ru_UA.UTF-8"
*   LC_MEASUREMENT="ru_UA.UTF-8"
*   LC_IDENTIFICATION="ru_UA.UTF-8"
*   LC_ALL=ru_UA.UTF-8

# ios - SplitViewController 参考逻辑

> ID：14295169
> 
> 赞同：0
> 
> 时间：2013-01-12T16:09:06.303
> 
> 标签：ios, xcode, uisplitviewcontroller, pass-by-reference

我阅读了有关 SplitViewControllers 的分配信息，但我绕着圈子走，因为我什么都不懂。

您有一个 masterviewcontroller 和一个 popoverview 作为条形按钮项（过滤器）

假设 masterviewcontroller 是一个 tableview 并且在 popoverview 是一个 uiview 控制器

在 iphone 上，我总是分配 masterviewcontroller 并在进行一些修改后更新参考，当您点击“搜索”按钮时，它会推送一个带有新数据的新控制器（想想看，也许这不是最好的主意）现在逻辑不再工作了。

我读过你必须互相引用控制器，所以我这样做了。

在过滤器控制器中（这是弹出视图）

```
.h

@property (strong, nonatomic) MasterViewController *masterviewController;
@property (weak, nonatomic) IBOutlet UISlider *filterPrice;

- (IBAction)filterSearch:(id)sender;

.m
- (IBAction)filterSearch:(id)sender {

self.masterviewController.filterSearchPrice = [NSNumber numberWithInt:self.filterPrice.value];
[self.masterviewController performFilterSearch];
} 
```

performFilterSearch 检查字段，使用过滤器名称和 json 对象调用 url，解析并重新加载数据。

现在我希望 masterviewcontroller 显示新数据，但这并没有发生，实际上什么也没发生......

更新这是 FilterSearch：

```
-(void)performFilterSearch
{

[queue cancelAllOperations];
[[AFImageCache sharedImageCache] removeAllObjects];
[[NSURLCache sharedURLCache] removeAllCachedResponses];

isLoading =YES;
[self.tableView reloadData];

searchResults = [NSMutableArray arrayWithCapacity:10];

NSURL *url = [self urlFilterWithSearchPrice:filterSearchPrice];
NSLog(@"%@",url);

NSURLRequest *request = [NSURLRequest requestWithURL:url];
AFJSONRequestOperation *operation = [AFJSONRequestOperation
                                     JSONRequestOperationWithRequest:request
                                     success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
                                         [self parseDictionary:JSON];

                                         isLoading = NO;
                                         [self.tableView reloadData];

                                     }
                                     failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
                                         [self showNetworkError];
                                         isLoading = NO;
                                         [self.tableView reloadData];
                                     }];

operation.acceptableContentTypes = [NSSet setWithObjects:@"application/json", @"text/json", @"text/javascript",@"text/html", nil];
[queue addOperation:operation]; 
```

}

顺便说一句，当我在 filterSearch 中进行 Nslog 以检查其是否已更新时：

```
NSLog(@"%d",self.masterviewController.filterSearchPrice);
NSLog(@"%d",[self.filterTypeSegmentedControl selectedSegmentIndex]); 
```

第一个永远不会更新第二个会偏离课程更新

更新2：（我如何启动popview）：

我在具有操作的 masterviewcontrollers 导航上添加了一个条形按钮项。我从 masterviewcontroller -> filtercontroller 添加了一个popover segue

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

filterPopOver  = [(UIStoryboardPopoverSegue *)segue popoverController]; 
```

}

```
- (IBAction)filterPopButton:(id)sender {

if (filterPopOver){
    [filterPopOver dismissPopoverAnimated:YES];
}
else{
    [self performSegueWithIdentifier:@"showFilterPopover" sender:sender];
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:15:13.493

When you launch your filterController, you need to pass in a reference to the MasterViewController. You have a property for it in the filter controller, but you never assign a value to that property.

**After Edit:**

Your prepareForSegue method should look like this:

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    FilterController *fc = (FilterController *)segue.destinationViewController;
    fc.masterViewController = self;
} 
```

Make sure that you've imported MasterViewController.h into you FilterController.m

# html - 如何从 :visited 导航中的图像中删除边框？

> ID：14295172
> 
> 赞同：1
> 
> 时间：2013-01-12T16:09:19.590
> 
> 标签：html, css

访问时从我的导航图像中删除虚线边框时遇到问题。我认为以下样式之一应该这样做，但它似乎不起作用。

有什么想法吗？

HTML

```
<li class="navprint">
<a href="printcategory.html"><img src="Images/navprint.png" alt="print button"   title="print button">
 </a>
</li> 
```

CSS

```
.navprint {
width: 130px;
height: 30px;
padding: 0px 0px 0px 0px;
}

.navprint:visited {
border: none;
text-decoration: none;
list-style-image: none;
outline: none;
}

.navprint:hover {
background-color: rgb(209, 244, 239);
}

.navprint:active,  {
background-color: rgb(209, 244, 239);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T16:13:29.377

If you're talking about what I think you're talking about, this has to do with the outline of a link that has `:focus`. So you could do something like this:

```
a:focus {
  border: none;
  outline: none;
} 
```

However, note that the outline is there for a reason -- some people navigate using the keyboard or other devices, not a mouse. The `focus` outline tells them which link currently has focus. It's generally a bad idea to remove this, unless you replace it with another indicator. So you could do:

```
a:hover, a:focus {
  background-color: rgb(209, 244, 239);
  border: none;
  outline: none;
} 
```

# javascript - 如何检查选择框是否包含具有特定类的任何选项？

> ID：14295174
> 
> 赞同：0
> 
> 时间：2013-01-12T16:09:32.977
> 
> 标签：javascript, jquery, html, drop-down-menu

在 jQuery 中，如何检查选择框是否包含特定的类？例如，在下面的代码片段中，我想检查 id 为“customerIds”的选择框是否包含任何具有“C”或“D”类的选项。

```
<select id="customerIds" onchange="doOperation()">
    <option value="default"> Start..</option>
    <option value="1" class="A"> 1</option>
    <option value="2" class="B"> 2</option>
    <option value="3" class="C"> 3 </option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:12:30.630

For instance you can use `:has`.

```
var hasOption = !!$("#customerIds:has(option.C,option.D)").length; 
```

Or `.children()` as well, which may prove to be faster.

```
var hasOption = !!$("#customerIds").children("option.C,option.D").length; 
```

```
var hasOption = !!$("#customerIds > option.C,option.D").length; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T16:13:23.370

Use `hasClass()` method: [http://api.jquery.com/hasClass/](http://api.jquery.com/hasClass/)

For example:

```
$("#customerIds").find("option").hasClass("A"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T16:12:55.117

You can do:

```
if($("#customerIds option[class='C']").length > 0) {
    //do something
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T16:17:14.663

关于什么 ：

```
if ($('#customerIds > .C').length > 0 || $('#customerIds > .D').length > 0) {
    // ...
} 
```

或者更灵活/可优化的

```
var selectBox = $('#customerIds');

if (selectBox.find('.C').length > 0 || selectBox.find('.D').length > 0) {
    // ...
} 
```

# android - 服务中的网络编程

> ID：14295175
> 
> 赞同：0
> 
> 时间：2013-01-12T16:09:35.763
> 
> 标签：android, android-service, android-networking

我正在编写一个更新 AppWidget 中的 textview 的服务。它是关于阅读 RSS 并显示文本。因此，如果设备上的互联网未激活，我需要将文本设置为“没有可用的互联网”。所以在`onStart()`我提出的服务方法上

```
ConnectivityManager cm =
        (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();
if(!netInfo)
{
 try-catch block to fetch XML using XMLPULLPARSER and set the textview
}
else
 set the textview using remoteview that there is no internet 
```

但这不起作用。该服务被后台 ANR 杀死。如何查看网络状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:17:16.087

虽然`Service`是为在后台执行操作而设计的，但它仍然默认运行在 ui 线程中。如果您想在服务中执行长时间运行的操作，您必须创建一个工作线程。或者您可以使用`IntentService`为您创建它的一个。

# android - RuntimeException + ConnectException = Android 应用程序崩溃 (KSOAP2)

> ID：14295177
> 
> 赞同：1
> 
> 时间：2013-01-12T16:09:48.540
> 
> 标签：android, jax-ws, ksoap2

我应该连接到 Web 服务的 Android 客户端崩溃了。我知道我在我的主线程中连接到 HTTP，但我添加了两行来解决问题（暂时）。稍后我将添加 AsyncTask。

主要活动：

```
protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();

        StrictMode.setThreadPolicy(policy); 

        try {
            GameAndroidUtil.testGameWS();
        } catch (SoapFault e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    } 
```

GameAndroidUtil:

```
package pl.webcentral.androidclient1;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.SoapFault;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

public class GameAndroidUtil {
    private static final String NAMESPACE = "http://game.webcentral.pl/";
    private static final String SOAP_ACTION = "";
    private static final String WSDL_URL = "http://localhost:8080/ReversiGameWS/services/GameWS?wsdl";

    public static void testGameWS() throws SoapFault {

        String session1 = callGameLogin("Marcin 1");

        GameStatus gameStatus = callGameStatus(session1);
        System.out.println("Status gracza 1 " + gameStatus.getLastMove() + " " + gameStatus.isYourMove());

        String session2 = callGameLogin("Marcin 2");

        gameStatus = callGameStatus(session2);
        System.out.println("Status gracza 1 " + gameStatus.getLastMove() + " " + gameStatus.isYourMove());

        gameStatus = callGameStatus(session1);
        System.out.println("Status gracza 2 " + gameStatus.getLastMove() + " " + gameStatus.isYourMove());

        try {
            callGameAddMove(session1, 5);
        } catch (Exception e) {
            System.out.println("Złapaliśmy wyjątek zgodnie z założeniem");
        }

        callGameAddMove(session2, 5);

        gameStatus = callGameStatus(session2);
        System.out.println("Status gracza 1 " + gameStatus.getLastMove() + " " + gameStatus.isYourMove());

        gameStatus = callGameStatus(session1);
        System.out.println("Status gracza 2 " + gameStatus.getLastMove() + " " + gameStatus.isYourMove());
    }

    private static String callGameLogin(String userName) {
        String METHOD_NAME = "login";

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); 

        PropertyInfo propInfo=new PropertyInfo();
        propInfo.setName("arg0");
        propInfo.setType(PropertyInfo.STRING_CLASS);
        propInfo.setValue(userName);

        request.addProperty(propInfo);

        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(WSDL_URL);

        try {
            androidHttpTransport.call(SOAP_ACTION, envelope);

            SoapPrimitive resultsRequestSOAP = (SoapPrimitive) envelope.getResponse();

            return resultsRequestSOAP.toString();

        } catch (Exception e) {
            throw new RuntimeException("Unexpected exception", e);
        }
    }
    private static GameStatus callGameStatus(String sessionId) throws SoapFault {
        String METHOD_NAME = "getGameStatus";

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); 

        PropertyInfo propInfo=new PropertyInfo();
        propInfo.setName("arg0");
        propInfo.setType(PropertyInfo.STRING_CLASS);
        propInfo.setValue(sessionId);

        request.addProperty(propInfo);

        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(WSDL_URL);

        try {
            androidHttpTransport.call(SOAP_ACTION, envelope);
        } catch (Exception e) {
            throw new RuntimeException("Unexpected exception", e);
        }

        try {
            SoapObject response = (SoapObject)envelope.getResponse();

            GameStatus gameStatus = new GameStatus();
            if (response.hasProperty("lastMove")) {
                gameStatus.setLastMove(Integer.parseInt(response.getProperty("lastMove").toString()));
            }
            gameStatus.setYourMove(Boolean.parseBoolean(response.getProperty("yourMove").toString()));

            return gameStatus;
        } catch (SoapFault e) {
            System.out.println("Error adding move: " + e.faultstring);//można to ładnie jakoś pokazać na ekranie
            throw e;
        }
    }
    private static void callGameAddMove(String sessionId, Integer move) throws SoapFault {
        String METHOD_NAME = "addMove";

        SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME); 
        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11); 

        PropertyInfo propInfo=new PropertyInfo();
        propInfo.setName("arg0");
        propInfo.setType(PropertyInfo.STRING_CLASS);
        propInfo.setValue(sessionId);

        request.addProperty(propInfo);

        propInfo=new PropertyInfo();
        propInfo.setName("arg1");
        propInfo.setType(PropertyInfo.INTEGER_CLASS);
        propInfo.setValue(move);

        request.addProperty(propInfo);

        envelope.setOutputSoapObject(request);
        HttpTransportSE androidHttpTransport = new HttpTransportSE(WSDL_URL);

        try {
            androidHttpTransport.call(SOAP_ACTION, envelope);
        } catch (Exception e) {
            throw new RuntimeException("Unexpected exception", e);
        }

        try {
            SoapPrimitive resultsRequestSOAP = (SoapPrimitive) envelope.getResponse();
        } catch (SoapFault e) {
            System.out.println("Error adding move: " + e.faultstring);//można to ładnie jakoś pokazać na ekranie
            throw e;
        }
    }

} 
```

日志猫：

```
01-12 16:54:27.930: E/AndroidRuntime(1070): FATAL EXCEPTION: main
01-12 16:54:27.930: E/AndroidRuntime(1070): java.lang.RuntimeException: Unable to start activity ComponentInfo{pl.webcentral.androidclient1/pl.webcentral.androidclient1.MainActivity}: java.lang.RuntimeException: Unexpected exception
01-12 16:54:27.930: E/AndroidRuntime(1070):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at android.os.Looper.loop(Looper.java:137)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at android.app.ActivityThread.main(ActivityThread.java:4745)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at java.lang.reflect.Method.invokeNative(Native Method)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at java.lang.reflect.Method.invoke(Method.java:511)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at dalvik.system.NativeStart.main(Native Method)
01-12 16:54:27.930: E/AndroidRuntime(1070): Caused by: java.lang.RuntimeException: Unexpected exception
01-12 16:54:27.930: E/AndroidRuntime(1070):     at pl.webcentral.androidclient1.GameAndroidUtil.callGameLogin(GameAndroidUtil.java:76)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at pl.webcentral.androidclient1.GameAndroidUtil.testGameWS(GameAndroidUtil.java:18)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at pl.webcentral.androidclient1.MainActivity.onCreate(MainActivity.java:24)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at android.app.Activity.performCreate(Activity.java:5008)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
01-12 16:54:27.930: E/AndroidRuntime(1070):     ... 11 more
01-12 16:54:27.930: E/AndroidRuntime(1070): Caused by: java.net.ConnectException: failed to connect to localhost/127.0.0.1 (port 8080) after 20000ms: isConnected failed: ECONNREFUSED (Connection refused)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.io.IoBridge.isConnected(IoBridge.java:224)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.io.IoBridge.connectErrno(IoBridge.java:161)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.io.IoBridge.connect(IoBridge.java:112)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at java.net.Socket.connect(Socket.java:842)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:76)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:80)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.net.http.HttpURLConnectionImpl.getOutputStream(HttpURLConnectionImpl.java:188)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at org.ksoap2.transport.ServiceConnectionSE.openOutputStream(ServiceConnectionSE.java:120)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:176)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:114)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at pl.webcentral.androidclient1.GameAndroidUtil.callGameLogin(GameAndroidUtil.java:69)
01-12 16:54:27.930: E/AndroidRuntime(1070):     ... 16 more
01-12 16:54:27.930: E/AndroidRuntime(1070): Caused by: libcore.io.ErrnoException: isConnected failed: ECONNREFUSED (Connection refused)
01-12 16:54:27.930: E/AndroidRuntime(1070):     at libcore.io.IoBridge.isConnected(IoBridge.java:208)
01-12 16:54:27.930: E/AndroidRuntime(1070):     ... 36 more
01-12 16:54:32.910: I/Process(1070): Sending signal. PID: 1070 SIG: 9 
```

我真的无法弄清楚这些异常是由什么引起的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:36:30.907

我希望您在应用程序清单中添加了 Internet 权限。

```
<manifest xlmns:android...>
 ...
 <uses-permission android:name="android.permission.INTERNET"></uses-permission>
</manifest> 
```

**编辑：**`localhost:8080`您正在尝试通过指定作为托管服务的系统的地址 来连接到 Web服务。Android 模拟器在虚拟机 (QEMU) 中运行。因此，`localhost:8080`将是**仿真器自己的环回地址，而不是系统的环回地址。**

因此，您可以在 Windows 中转到 CommandPrompt 以获取系统的 IP 地址，或者只使用`http://10.0.2.2:8080/...`而不是使用`localhost`.

# ruby - 在 Rack 应用上提供存储在 S3 上的 HTML 文件

> ID：14295178
> 
> 赞同：1
> 
> 时间：2013-01-12T16:10:01.987
> 
> 标签：ruby, static, sinatra, rack

假设我有一些存储在 S3 上的 HTML 文档，如下所示：

*   [http://alan.aws-s3-bla-bla.com/posts/1.html](http://alan.aws-s3-bla-bla.com/posts/1.html)
*   [http://alan.aws-s3-bla-bla.com/posts/2.html](http://alan.aws-s3-bla-bla.com/posts/2.html)
*   [http://alan.aws-s3-bla-bla.com/posts/3.html](http://alan.aws-s3-bla-bla.com/posts/3.html)
*   [http://alan.aws-s3-bla-bla.com/posts/1/comments/1.html](http://alan.aws-s3-bla-bla.com/posts/1/comments/1.html)
*   [http://alan.aws-s3-bla-bla.com/posts/1/comments/2.html](http://alan.aws-s3-bla-bla.com/posts/1/comments/2.html)
*   [http://alan.aws-s3-bla-bla.com/posts/1/comments/3.html](http://alan.aws-s3-bla-bla.com/posts/1/comments/3.html)
*   等等等等

我想使用 Rack（最好是 Sinatra）应用程序来提供这些服务，映射以下路线：

```
get "/posts/:id" do
 render "http://alan.aws-s3-bla-bla.com/posts/#{params[:id]}.html"
end

get "/posts/:posts_id/comments/:comments_id" do
 render "http://alan.aws-s3-bla-bla.com/posts/#{params[:posts_id]}/comments/#{params[:comments_id}.html"
end 
```

这是一个好主意吗？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T20:29:35.950

当你抓取文件时显然会等待，所以你可以缓存它或设置 etags 等来帮助解决这个问题。我想这取决于您要等待多长时间以及访问它的频率、它的大小等，以及是否值得在本地或远程存储 HTML。只有你能解决这个问题。

`render`如果块中的最后一个表达式是一个将自动呈现的字符串，那么只要您将文件作为字符串打开，就不需要调用。

以下是获取外部文件并将其放入临时文件的方法：

```
require 'faraday'
require 'faraday_middleware'
#require 'faraday/adapter/typhoeus' # see https://github.com/typhoeus/typhoeus/issues/226#issuecomment-9919517 if you get a problem with the requiring
require 'typhoeus/adapters/faraday'

configure do
  Faraday.default_connection = Faraday::Connection.new( 
    :headers => { :accept =>  'text/plain', # maybe this is wrong
    :user_agent => "Sinatra via Faraday"}
  ) do |conn|
    conn.use Faraday::Adapter::Typhoeus
  end
end

helpers do
  def grab_external_html( url )
    response = Faraday.get url # you'll need to supply this variable somehow, your choice
    filename = url # perhaps change this a bit
    tempfile = Tempfile.open(filename, 'wb') { |fp| fp.write(response.body) }
  end
end

get "/posts/:whatever/" do
  tempfile = grab_external_html whatever # surely you'd do a bit more here…
  tempfile.read
end 
```

这可能会奏效。您可能还想考虑关闭该临时文件，但垃圾收集器和操作系统*应该*处理它。

# javascript - Cordova 2.3.0 简单设置 index.html eclipse android

> ID：14295180
> 
> 赞同：0
> 
> 时间：2013-01-12T16:10:18.070
> 
> 标签：javascript, cordova

我下载了 Cordova 2.3.0 以从 Cordova 1.9.0 升级。在我的 jQuery 移动页面使用以下行和一个 javascript 函数成功启动之前。

```
<body onload="onLoad();"> 
```

现在我看到他们有一个 deviceready 事件。我怎样才能让我的应用程序像以前一样工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T22:53:08.577

由于您在 PhoneGap 平台中运行 JavaScript 应用程序，您*可能*需要等到 PhoneGap 完全初始化，具体取决于您将要使用的功能。要正确等待 PhoneGap 初始化，请使用以下代码：

```
var callback = function () {
    // Initialization code goes here. If it's just onLoad(), you can 
    // remove this callback function and just use that instead. 
    onLoad();
};

$(document).ready(function () {
    document.addEventListener("deviceready", callback, false);
}; 
```

希望这可以帮助。

# r - 使用 ggplot2 进行黄土和 glm 绘图

> ID：14295183
> 
> 赞同：4
> 
> 时间：2013-01-12T16:10:26.957
> 
> 标签：r, ggplot2

我正在尝试使用来自泰坦尼克号的数据绘制来自二元选择 glm 的模型预测与经验概率。为了显示阶级和性别之间的差异，我使用了刻面，但我有两件事我不太清楚。第一个是我想将黄土曲线限制在 0 和 1 之间，但是如果我将选项添加`ylim(c(0,1))`到绘图的末尾，如果它的一侧在黄土曲线的外部边界。我想做的第二件事是从每个方面的最小 x 值（glm 的预测概率）到最大 x 值（在同一方面内）和 y = 1 之间画一条线，以便显示glm 预测概率。

![黄土-泰坦尼克号](../Images/412b9f924c44369e9c4ff8b7608db963.png)

```
#info on this data http://biostat.mc.vanderbilt.edu/wiki/pub/Main/DataSets/titanic3info.txt
load(url('http://biostat.mc.vanderbilt.edu/wiki/pub/Main/DataSets/titanic3.sav'))
titanic <- titanic3[ ,-c(3,8:14)]; rm(titanic3)
titanic <- na.omit(titanic) #probably missing completely at random
titanic$age <- as.numeric(titanic$age)
titanic$sibsp <- as.integer(titanic$sibsp)
titanic$survived <- as.integer(titanic$survived)

training.df <- titanic[sample(nrow(titanic), nrow(titanic) / 2), ]
validation.df <- titanic[!(row.names(titanic) %in% row.names(training.df)), ]

glm.fit <- glm(survived ~ sex + sibsp + age + I(age^2) + factor(pclass) + sibsp:sex,
               family = binomial(link = "probit"), data = training.df)

glm.predict <- predict(glm.fit, newdata = validation.df, se.fit = TRUE, type = "response")

plot.data <- data.frame(mean = glm.predict$fit, response = validation.df$survived,
                        class = validation.df$pclass, sex = validation.df$sex)

require(ggplot2)
ggplot(data = plot.data, aes(x = as.numeric(mean), y = as.integer(response))) + geom_point() +
       stat_smooth(method = "loess", formula = y ~ x) +
       facet_wrap( ~ class + sex, scale = "free") + ylim(c(0,1)) + 
       xlab("Predicted Probability of Survival") + ylab("Empirical Survival Rate") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T16:46:46.307

您的第一个问题的答案是使用`coord_cartesian(ylim=c(0,1))`而不是`ylim(0,1)`; 这是一个适度的常见问题解答。

对于您的第二个问题，可能有一种方法可以在 ggplot 中进行，但我更容易在外部总结数据：

```
g0 <- ggplot(data = plot.data, aes(x = mean, y = response)) + geom_point() +
             stat_smooth(method = "loess") +
             facet_wrap( ~ class + sex, scale = "free") + 
             coord_cartesian(ylim=c(0,1))+
             labs(x="Predicted Probability of Survival",
                  y="Empirical Survival Rate") 
```

（我通过消除一些默认值并使用 . 稍微缩短了您的代码`labs`。）

```
ss <- ddply(plot.data,c("class","sex"),summarise,minx=min(mean),maxx=max(mean))
g0 + geom_segment(data=ss,aes(x=minx,y=minx,xend=maxx,yend=maxx),
                  colour="red",alpha=0.5) 
```

# sql-server - 在迭代循环中连接字符串：+= 不能按预期工作

> ID：14295187
> 
> 赞同：3
> 
> 时间：2013-01-12T16:10:43.607
> 
> 标签：sql-server, tsql, temp-tables

我有必须从其值填充的本地表和字符串：

```
 DECLARE @#SomeTable  TABLE ( some columns ..)
    DECLARE @SomeString  varchar(8000) = 'init string' 
```

在迭代它时

```
 WHILE EXISTS(SELECT * FROM  @#SomeTable)
     BEGIN
        // [somecolumn] is declared temp variable
        SELECT TOP 1 @somecolumn = somecolumn FROM  @#SomeTable

        PRINT 'before ' + @SomeString // 'init string'
        PRINT [some values from SomeTable]  // this OK
        SET @SomeString += [some values from SomeTable] 
        PRINT 'after ' +  @SomeString //'init string' UPDATE NOT TAKE PLACE!!!!

        DELETE  @#SomeTable Where somecolumn = @somecolumn
     END 
```

我发现连接失败。为什么？

**编辑：**

这是一段原始代码：

```
 /*Represents [WHERE] clause for retrieving values from specifyed range*/
DECLARE @WHEREclause nchar(1000) = 'WHERE '
/*Represents [ORDER BY] clause for sorting in right order and direction {ASC|DESC}*/
DECLARE @ORDERBYclause nchar(1000) = 'ORDER BY '
/*Dynamic query that returns end result*/
DECLARE @sqlCmd varchar(8000) = 
'SELECT 
        img,
        capacity,
        price,
        Id
 FROM HDD  '
/* -a- filling table for input values*/
INSERT INTO @#SequenceTable(columnName,columnValue,comparator,isASC,columnOrder)
SELECT 
    columnName,
    columnValue,
    comparator,
    isASC,
    ROW_NUMBER() OVER (ORDER BY  outOrder) AS columnOrder
FROM
(
        SELECT 'buffer' as columnName, CAST(@buffer AS nchar(20)) as columnValue, @bufferCmp as comparator, @bufferASC as isASC, @bufferOrder as outOrder
    UNION  
        SELECT 'capacity', CAST(@capacity AS nchar(20)), @capacityCmp, @capacityASC, @capacityOrder  
    UNION  
        SELECT 'price', STR(@price,20,2),  @priceCmp, @priceASC, @priceOrder
    UNION  
        SELECT 'angle_speed', CAST(@angleSpeed AS nchar(20)), @angleSpeedCmp ,@angleSpeedASC,@angleSpeedOrder
) AS AnyName
ORDER BY columnOrder 

/*---/a-----------------------------------------------------------------------------------*/

/*variables for above fields*/
DECLARE @columnName nchar(20)
DECLARE @comparator char
DECLARE @columnValue nchar(20)
DECLARE @isASC char

WHILE EXISTS(SELECT * FROM  @#SequenceTable)
BEGIN

    SELECT TOP 1 @columnName = columnName FROM  @#SequenceTable
    SELECT TOP 1 @comparator = comparator FROM  @#SequenceTable 
    SELECT TOP 1 @columnValue = columnValue FROM  @#SequenceTable 
    SELECT TOP 1 @isASC = isASC FROM  @#SequenceTable 

    IF @WHEREclause != 'WHERE '
        BEGIN
            SET @WHEREclause += ' AND '
        END
    PRINT 'before ' + @WHEREclause
    PRINT CONCAT(RTRIM(@columnName), @comparator, @columnValue)
    SET @WHEREclause += CONCAT(RTRIM(@columnName), @comparator, @columnValue)
    PRINT 'after ' +  @WHEREclause

    IF @ORDERBYclause != 'ORDER BY '
        BEGIN
            SET @ORDERBYclause += ','
        END
    IF @isASC = '1'
       SET @ORDERBYclause += CONCAT(RTRIM(@columnName),' ASC ')
    ELSE
       SET @ORDERBYclause += CONCAT(RTRIM(@columnName),' DESC ')

    Delete  @#SequenceTable Where columnName = @columnName

END 
```

这是一段打印结果：

```
 before WHERE 
        angle_speed=7400 
        after WHERE 
```

`+=`没有按预期工作。如果我使用

```
@SomeString = 'some value' 
```

那么更新是可见的，但如果我改为使用

```
@SomeString += 'some value' 
```

更新不可见

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-13T03:14:30.300

我可以向您保证，SQL Server 中没有错误，并且`+=`完全按预期工作。我尝试了以下代码：

```
DECLARE @#SomeTable TABLE (somecolumn varchar(8000));

INSERT @#SomeTable VALUES('a'), ('bbb'), ('ccccc');

DECLARE @SomeString  varchar(8000) = 'init string',
        @somecolumn  varchar(8000);

WHILE EXISTS (SELECT * FROM  @#SomeTable)
BEGIN
    SELECT TOP 1 @somecolumn = somecolumn FROM @#SomeTable;

    SET @SomeString += @somecolumn;

    PRINT @SomeString; -- Works fine!!!

    DELETE  @#SomeTable Where somecolumn = @somecolumn;
END 
```

这是我的结果：

```
init stringa
init stringabbb
init stringabbbccccc 
```

由于无法准确说明您在代码中正在做什么（您已经混淆了最重要的部分），也许您可​​以从那里开始？当然，要么你在表中有一个 NULL 值，要么你分配不正确，或者你分配给了错误的变量。同样，无法分辨，因为您隐藏了代码的关键部分！

此外，由于您似乎不关心订单，您也可以在不循环的情况下执行此操作：

```
DECLARE @#SomeTable TABLE (somecolumn varchar(8000));

INSERT @#SomeTable VALUES('a'), ('bbb'), ('ccccc');

DECLARE @SomeString  varchar(8000) = 'init string',
        @somecolumn  varchar(8000);

SELECT @SomeString += somecolumn FROM @#SomeTable;

PRINT @SomeString; 
```

结果：

```
init stringabbbccccc 
```

如果您关心顺序，您仍然可以在不循环的情况下执行此操作 - 使用 XML 技巧按该顺序连接，然后将其附加到初始化字符串：

```
DECLARE @#SomeTable TABLE (somecolumn varchar(8000));

INSERT @#SomeTable VALUES('a'), ('bbb'), ('ccccc');

DECLARE @SomeString  varchar(8000) = 'init string',
        @somecolumn  varchar(8000) = '';

SELECT @somecolumn = (SELECT '' + somecolumn FROM @#SomeTable
ORDER BY somecolumn DESC
FOR XML PATH(''), TYPE).value(N'./text()[1]', N'varchar(max)');

PRINT @SomeString + @somecolumn; 
```

结果：

```
init stringcccccbbba 
```

在更现代的版本（SQL Server 2017+）上，您可以这样做：

```
DECLARE @#SomeTable TABLE (somecolumn varchar(8000));

INSERT @#SomeTable VALUES('a'), ('bbb'), ('ccccc');

DECLARE @SomeString  varchar(8000) = 'init string',
        @somecolumn  varchar(8000);

SELECT @somecolumn = STRING_AGG(somecolumn, '')
  WITHIN GROUP (ORDER BY somecolumn DESC)
  FROM @#SomeTable;

PRINT @SomeString + @somecolumn; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-12T16:17:00.593

SQL Server 中两个值之间的任何计算都会导致`NULL`所涉及的值之一是`NULL`。在您的情况下，`@SomeString`未初始化。这意味着它的值为`NULL`。因此`SET @SomeString =+ 'somevalue'`导致`NULL`.

要解决此问题，请`''`在开始时将变量初始化为。

另外，你有这行代码：

```
SET @somecolumn += [some values from SomeTable] 
```

但你可能打算拥有这个：

```
SET @SomeString += [some values from SomeTable] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-10T01:49:21.737

我有同样的问题，这肯定是 T-SQL 的一个已知问题。这里详细解释：[https ://marc.durdin.net/2015/07/concatenating-strings-in-sql-server-or-undefined-behaviour-by-design/](https://marc.durdin.net/2015/07/concatenating-strings-in-sql-server-or-undefined-behaviour-by-design/)

总结一下：

*带有 SELECT 语句的变量赋值是一种专有语法（仅限 T-SQL），如果产生多行，则行为未定义或依赖于计划。*

*在带有 ORDER BY 子句的查询中使用赋值操作（本示例中的连接）具有未定义的行为。由于查询计划的更改，这可能会因版本而异，甚至在特定服务器版本中也会发生变化。即使有变通方法，您也不能依赖此行为。*

*唯一保证的机制如下： 1\. 使用游标以特定顺序遍历行并连接值 2\. 使用 ORDER BY 进行 xml 查询以生成连接值 3\. 使用 CLR 聚合（这不适用于 ORDER BY 子句）*

# c# - How to import a 3D model in WPF using Helix Toolkit?

> ID：14295195
> 
> 赞同：9
> 
> 时间：2013-01-12T16:11:32.157
> 
> 标签：c#, wpf, 3d-modelling, helix-3d-toolkit

I am trying to import a 3D model using Helix Toolkit.i can't figure out how to do it. Is there any online guide about importing a 3D model using this Toolkit or if there is another easier way to import a 3D model except Helix.

Regards

This is my Code:

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;
using System;
using System.IO;
using System.Windows.Media.Media3D;

namespace WpfApplication1
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{

    public MainWindow()
    {
        InitializeComponent();
    }

    Model3DGroup group = HelixToolkit.Wpf.ModelImporter.Load(@"C:\Jack_Shephard\Jack_Shephard.obj");
     public static Model3DGroup Load(string path)
    {
        if (path == null)
        {
            return null;
        }

        Model3DGroup model = null;
        string ext = System.IO.Path.GetExtension(path).ToLower();
        switch (ext)
        {
            case ".3ds":
                {
                    var r = new HelixToolkit.Wpf.StudioReader();
                    model = r.Read(path);
                    break;
                }

            case ".lwo":
                {
                    var r = new HelixToolkit.Wpf.LwoReader();
                    model = r.Read(path);

                    break;
                }

            case ".obj":
                {
                    var r = new HelixToolkit.Wpf.ObjReader();
                    model = r.Read(path);
                    break;
                }

            case ".objz":
                {
                    var r = new HelixToolkit.Wpf.ObjReader();
                    model = r.ReadZ(path);
                    break;
                }

            case ".stl":
                {
                    var r = new HelixToolkit.Wpf.StLReader();
                    model = r.Read(path);
                    break;
                }

            case ".off":
                {
                    var r = new HelixToolkit.Wpf.OffReader();
                    model = r.Read(path);
                    break;
                }

            default:
                throw new InvalidOperationException("File format not supported.");
        }

        return model;
    }

}
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-13T01:47:32.803

他们的文档仍在构建中，但在查看他们的源代码时，您似乎需要[`ModelImporter`](http://helixtoolkit.codeplex.com/SourceControl/changeset/view/291ae628a890#Source/HelixToolkit.Wpf/Importers/ModelImporter.cs)Method。它返回 a [`Model3dGroup`](http://msdn.microsoft.com/en-us/library/ms594489%28v=vs.100%29.aspx)，它的用法将如下所示。

```
 Model3DGroup group = HelixToolkit.Wpf.ModelImporter.Load(@"Your path here"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-03T20:13:10.220

只有你需要把这个：

```
<HelixToolkit:FileModelVisual3D x:Name="model1" Source="C:\$path\test_obj.obj"/> 
```

# c# - 将 xml 字符串和变量存储到文件中

> ID：14295197
> 
> 赞同：0
> 
> 时间：2013-01-12T16:11:40.337
> 
> 标签：c#, xml, string

我有一些这种格式的字符串：

```
public static string Script(string user, string password)
{
    return @"<?xml version='1.0'?>" 
            + "<RIBCL VERSION='2.0'>"
            + "<LOGIN USER_LOGIN='" + user + "' PASSWORD='" + password + "'>"
            + "<SERVER_INFO MODE='read'><GET_HOST_DATA /></SERVER_INFO>"
            + "<RIB_INFO MODE='read'><GET_NETWORK_SETTINGS/></RIB_INFO>"
            + "</LOGIN>"
            + "</RIBCL>";
} 
```

如何将上述字符串变量放入一个如下所示的 xml 文件中：

```
<?xml version='1.0'?>"
    <RIBCL VERSION='2.0'>
        <LOGIN USER_LOGIN="user" PASSWORD="password">
            <SERVER_INFO MODE="read">
                <GET_HOST_DATA />
            </SERVER_INFO>"
            <RIB_INFO MODE="read">
                <GET_NETWORK_SETTINGS/>
            </RIB_INFO>
        </LOGIN>
</RIBCL> 
```

哪里`user`和`password`需要是实际的字符串变量。

我可以以某种方式将每个字符串存储到自己的文件中，而不是为每个字符串（很多）使用一种不同的方法吗？唯一的事情是`user`和`password`变量，每次都需要添加，所以不确定如何处理该部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T16:32:08.040

尝试像字符串格式模板一样存储您的字符串

例如，像：

```
<?xml version='1.0'?>
<RIBCL VERSION='2.0'>
    <LOGIN USER_LOGIN='{0}' PASSWORD='{1}'>
        <SERVER_INFO MODE='read'><GET_HOST_DATA /></SERVER_INFO>
        <RIB_INFO MODE='read'><GET_NETWORK_SETTINGS/></RIB_INFO>
    </LOGIN>
</RIBCL> 
```

您的脚本方法应该从某个地方加载特定的字符串，然后应该应用`String.Format`：

```
return String.Format(data, HttpUtility.HtmlEncode(user), HttpUtility.HtmlEncode(password)); 
```

如果您的每个字符串都只有`user`和`password`字段，它会起作用，应该设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T16:14:43.260

首先，永远不要使用字符串操作来构建 XML。规则不同。例如，如果`password`其中有一个对 xml 属性无效的字符怎么办？

其次，我建议使用 LINQ to XML 构建您的 XML。那样没有文件 I/O。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T16:45:01.190

我不得不创建一个类似的应用程序来从 ASP.NET 调用。我发现最好的解决方案是在资源文件夹中创建 xml 文件，然后更新 USER_LOGIN 和 PASSWORD 属性。

需要注意的另一点是，您需要在发送到 HPILO 时从顶部删除 xml 声明，因为它无法识别它。该文件应以

```
<RIBCL VERSION=2.0> 
```

# android - 移动设备上的 WebSocket 支持

> ID：14295213
> 
> 赞同：7
> 
> 时间：2013-01-12T16:13:19.473
> 
> 标签：android, websocket, multiplayer

对于 Android 多人游戏玩家之间的通信，我在客户端使用 WebSocket 服务器和[TooTallNate 的 Java 库](https://github.com/TooTallNate/Java-WebSocket)来启用 Android 应用程序中的 WebSocket 支持。因此，明确指出，移动浏览器中的 WebSocket 支持对我来说并不重要。

不幸的是，用户报告说他们遇到了连接失败或未收到消息等问题。这是移动设备上 WebSockets 的普遍问题（阻塞端口、防火墙、移动互联网连接）还是客户端代码中的缺陷？

您是否有使用上述 WebSocket 客户端库的经验？我刚刚发现[了适用于 Android 的 autobahn.ws](http://autobahn.ws/android) - 但我不知道是否值得从我当前的库中切换（见上文）。

WAMP 呢？WebSocket 技术不完全是我应该使用子协议（？）WAMP 的适当解决方案吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-10-27T21:50:44.810

由于某些移动网络上的网络套接字连接不良，出现了同样的错误。通过以下方式解决了它们：

(1) 移动端口：将 websocket 的服务器和客户端移动到 SSL 端口（端口 443）

(2) ping keep-alive：每隔 X 秒从客户端向服务器发送周期性的“ping”消息，并等待“pong”从服务器返回。如果服务器在 Y 秒内没有返回“pong”，请在客户端重新启动连接。

实施（1）将使您大部分时间到达那里。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-12T23:01:13.820

每一项新技术都伴随着一系列新问题。在 WebSocket 的情况下，它与代理服务器的兼容性在大多数公司网络中调解 HTTP 连接。WebSocket 协议使用 HTTP 升级系统（通常用于 HTTP/SSL）将 HTTP 连接“升级”为 WebSocket 连接。一些代理服务器不喜欢这样并且会断开连接。因此，即使给定的客户端使用 WebSocket 协议，也可能无法建立连接。

# c++ - 2 参数函数的重载分辨率不正确

> ID：14295217
> 
> 赞同：9
> 
> 时间：2013-01-12T16:13:32.283
> 
> 标签：c++, visual-studio-2012, overload-resolution

让我们看下面的示例程序：

```
#include <cmath>

namespace half_float
{
    template<typename T> struct half_expr {};

    struct half : half_expr<half>
    {
        operator float() const;
    };

    template<typename T> half sin(const half_expr<T>&);
    template<typename T> half atan2(const half_expr<T>&, const half_expr<T>&);
}

using namespace std;
using half_float::half;

int main()
{
    half a, b;
    half s = sin(a);
    half t = atan2(a, b);
} 
```

在*VS 2010*中，这编译得很好（暂时忽略明显的链接器错误）。但在*VS 2012*中，这给了我：

> 错误 C2440：“conversion”：无法从“float”转换为“half_float::half”

因此，重载解析似乎不是从命名空间中选择版本`half_float`（ADL 应该完成），而是从`std`使用隐式转换到`float`. 但奇怪的是，这只发生在`atan2`通话中而不是`sin`通话中。

在较大的项目中，这个错误实际上首先发生在我身上，它也发生在其他 2 参数函数（或者更确切地说具有 2 个`half`参数的函数）中，例如`fmod`，但不会发生在任何 1 参数函数中。同样，在较大的项目中，它也适用于*gcc 4.6/4.7*和*clang 3.1*，没有错误，尽管我没有在那里明确测试这个 SSCCE 版本。

所以我的问题是，这种错误行为是在*VS 2012*方面（假设它只发生在*2012 年*并且只发生在 2-argument 函数中），还是我监督了重载解决规则中的一些微妙之处（这确实可以得到一个有点棘手，我猜）？

**编辑：**如果我直接`using namespace half_float`或直接将整个东西放在全局命名空间中，也会发生这种情况。同样，如果我不是`using namespace std`，它也会发生，但这更像是将数学函数放在全局命名空间中的 VS 实现。

**编辑：**它发生在原始*VC 2012*编译器以及它的*2012 年 11 月 CTP*中。

**编辑：**虽然我不完全确定它是否真的违反了最严格意义上的标准，但我已经根据我的回答中的发现提交了一个[错误](https://connect.microsoft.com/VisualStudio/feedback/details/776471/c-math-functions-too-generic)，因为它至少与 1- 的定义不一致参数功能，值得*VS*团队进一步调查。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T23:09:19.270

我想我找到了原因。C++ 标准在第**26.8 [c.math]**节中说，对于 C 库的数学函数，

> 应有足够的额外过载以确保：
> 
> 1.  如果对应于 double 形参的任何实参的类型为 long double，则对应于 double 形参的所有实参都将有效地转换为 long double。
> 2.  否则，如果对应于 double 参数的任何实参具有 double 类型或整数类型，则对应于 double 形参的所有实参都将有效地强制转换为 double。
> 3.  否则，对应于双参数的所有参数都被有效地转换为浮点数。

这也可以在[atan2 文档](http://en.cppreference.com/w/cpp/numeric/math/atan2)中看到。

这些重载由*VS 2012*通过使用以下形式的通用函数模板提供：

```
template<typename T,typename U> common_float_type<T,U>::type atan2(T, U); 
```

所以我们有一个模板函数，其实例化将涉及隐式转换（从`half&`到`const half_expr<half>&`）和一个可以直接实例化的模板函数。因此后者是优选的。这不会发生在 1-argument 函数中，因为对于那些只需要一个用于整数参数的通用版本，*VS 2012*只为那些使用 a `std::enable_if`of 的函数提供了这个版本`std::is_integral`。

但我认为标准有点不清楚，这些*“额外的重载”*只为内置类型提供。所以最后我仍然不确定*VS 2012*是否严格违反了标准及其过于通用的功能，或者它是否是提供这些功能的可行实现选项。

**编辑：**看起来，已经有[缺陷报告 2086](http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#2086)用于标准的不清楚的措辞，并且正在修复中，将对这些额外重载的要求限制为仅算术类型。由于这似乎一直是最初的意图（并且几乎所有现有实现都实现了），而且只是措辞不清楚，我确实认为这是*VS 2012*实现中的一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:58:50.023

我刚刚尝试了你的代码，我发现它有什么问题。

由于您尚未实现`half::sin`and `half::atan2`，因此链接器无论如何都会抛出错误。因此，如果您实现方法`half::sin`and `half::atan2`，那应该可以解决它（我通过让它们返回一个空的一半来实现它们，这当然是没有意义的）。

在我采取这一步（提供两个所需方法的（毫无意义的）实现）之后，错误消息几乎神奇地消失了。

也许这不是您问题的解决方案，因为我使用的是 GCC，而不是 VS。

* * *

**编辑：**我刚刚尝试了我在 Visual Studio 中使用 G++ 的示例，这给了我一个更奇怪的错误消息。提供错误的奇怪之处，以及使用 GCC 的代码，我必须得出结论，这是 VC2012 中的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T11:09:56.250

一种解决方法是专门`_Common_float_type`用于未定义类型`half`，`half_expr`以便 SFINAE 摆脱 VS2012 版本的`atan2`.

```
namespace std {
    template<class T1, class T2>
    struct _Common_float_type<half_float::half_expr<T1>, half_float::half_expr<T2>>;
    template<class T2>
    struct _Common_float_type<half_float::half, half_float::half_expr<T2>>;
    template<class T1>
    struct _Common_float_type<half_float::half_expr<T1>, half_float::half>;
    template<>
    struct _Common_float_type<half_float::half, half_float::half>;
} 
```

请注意，您必须专门针对 and 的所有四种组合`half`，`half_expr`因为模板专门化不考虑基类。

# zend-framework2 - ZFCUser extend form

> ID：14295218
> 
> 赞同：0
> 
> 时间：2013-01-12T16:13:32.113
> 
> 标签：zend-framework2, zfcuser

I am using Zendframework 2 with ZfcUser and ZfcUserDoctrineORM. I extended the normal user with some additional information.

Now i want to adapt the registerForm. Therefor i created this form in the ZfcUser\Form folder:

```
class UserRegister extends ZfcUser\Form\Register {
  public function init(){
    $this->add(array(
        'name' => 'firstName',
        'options' => array(
            'label' => 'First Name',
        ),
        'attributes' => array(
            'type' => 'text'
        ),
    ));

    $this->add(array(
        'name' => 'name',
        'options' => array(
            'label' => 'Last Name',
        ),
        'attributes' => array(
            'type' => 'text'
        ),
    ));
  }
} 
```

In the Next step I changed adapted the getServiceConfig() function in the Module.php in the ZfcUser folder:

```
'zfcuser_register_form' => function ($sm) {
                $options = $sm->get('zfcuser_module_options');
                $form = new Form\UserRegister(null, $options);
                //$form->setCaptchaElement($sm->get('zfcuser_captcha_element'));
                $form->setInputFilter(new Form\RegisterFilter(
                    new Validator\NoRecordExists(array(
                        'mapper' => $sm->get('zfcuser_user_mapper'),
                        'key'    => 'email'
                    )),
                    new Validator\NoRecordExists(array(
                        'mapper' => $sm->get('zfcuser_user_mapper'),
                        'key'    => 'username'
                    )),
                    $options
                ));
                return $form;
            }, 
```

When calling the register url this error message is shown:

> Fatal error: Cannot redeclare class UserRegister in C:\xampp\htdocs\THWDiver\vendor\zf-commons\zfc-user\src\ZfcUser\Form\UserRegister.php on line 24

What am I making wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T03:27:42.080

意识到这是一个古老的问题，但只是偶然发现了它。您需要编辑实体模块的引导程序并在“init”处附加到“ZfcUser\Form\Register”。

我在这里有一篇博客文章详细介绍了解决方案：http: [//circlical.com/blog/2013/4/1/l5wftnf3p7oks5561bohmb9vkpasp6](http://circlical.com/blog/2013/4/1/l5wftnf3p7oks5561bohmb9vkpasp6)

希望对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-04T18:15:16.843

我认为答案是覆盖服务工厂“zfcuser_register_form”并在其中声明您自己的RegisterForm。

# php - I want to update my checkbox using php and mysql

> ID：14295219
> 
> 赞同：-1
> 
> 时间：2013-01-12T16:13:47.433
> 
> 标签：php, mysql

I have a html table with the following field: Job Completed

I would like to put a checkbox on each row of the completed column only using php amd HTML.

I want the value of yes/no to be store in my mysql database.

My MySQL table has a table called data with a row called job, I just can’t get this to work, my MySQL table has empty values as well.

//html table

```
<td width="93" bgcolor="#CCCCCC"><strong>Job Completed</strong></td> 
```

I also have my results section

```
<td><input type="checkbox" name="names[<?php echo $result['id']; ?>" value="yes"/></td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:51:48.810

您需要有关如何将作业保存到数据库的更多信息。

由于您尚未指定 mysql 数据表中的列。我只能猜测您有一个名为“isComplete”或类似的列。如果 mysql 表中没有列，则必须添加一列。

在开始保存之前要清除的另一个问题是，您没有正确选中复选框。应该使用属性“checked”而不是 value="yes"。例如，要在页面加载时选中该框，输入应该是这样的：

```
<input type="checkbox" name="names[<?php echo $result['id']; ?>]" checked /> 
```

您是发布整个表单以保存，还是只是将更改保存到复选框？如果您要发布整个表单，则处理已发布表单的页面将必须保存复选框的值。如果您只想保存复选框更改，则必须创建一个页面来更新数据库中的“isComplete”列，并在每次更改复选框值时使用 javascript 和 ajax 调用该页面。

一次，您将值保存在数据库中，您将使用 php 在基于数据库值加载页面时检查复选框。像这样的东西：

```
<td><input type="checkbox" name="names[<?php echo $result['id']; ?>]" <?php if ($result['isComplete']) {echo 'checked';} ?>/></td> 
```

希望这可以帮助。

# google-search-console - 多个谷歌域和帐户

> ID：14295220
> 
> 赞同：1
> 
> 时间：2013-01-12T16:13:51.833
> 
> 标签：google-search-console

我有多个 Google 域和登录名，我查看了用于组合分析、搜索和 Adsense 等服务的文档，但随着我阅读的更多，它变得越来越混乱。是否有或应该有一个简单的备忘单来提供帮助？我认为这会有所帮助 [https://www.google.com/webmasters/tools/](https://www.google.com/webmasters/tools/) 但不会链接我的其他帐户 单个控制面板将有很大帮助 - 我可能会做一些愚蠢的事情，但我不想为某些事情而挣扎那应该是显而易见的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T20:29:43.740

只需为所有服务使用一个 Google 帐户，即：

*   [分析](https://www.google.com/analytics)
*   [网站管理员工具](https://www.google.com/webmasters/tools/)
*   [Adsense](https://www.google.com/adsense/)

# android - R.anim 中缺少动画和 ImageSwitcher 中的 Progressbar

> ID：14295227
> 
> 赞同：4
> 
> 时间：2013-01-12T16:15:09.577
> 
> 标签：android, android-widget

我喜欢在动画中获得两张幻灯片，我认为这是缺失的。我该怎么做，任何事情都会很好

```
android.R.anim.slide_in_right
android.R.anim.slide_out_left 
```

我想在一些图片中滑入另一种方式正在工作

另一方面，是否可以在图片下方有一个进度条，显示剩余的图片数量

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T16:20:24.533

所有系统资源都位于 SDK 文件夹中。

抓取你想要的动画

> SDK_folder\platforms\android-17\data\res\anim

并将它们放在您的项目中`res/anim`

然后你可以使用它们

```
R.anim.anim_name 
```

# windows - 在 R 中用 shell() 打开文件

> ID：14295230
> 
> 赞同：0
> 
> 时间：2013-01-12T16:15:14.627
> 
> 标签：windows, r, shell, cmd

我想使用 R 在 Windows 程序中打开一个文件，但指定该程序而不是文件扩展名的默认值，以及我当前 R 会话主目录中不需要的文件（这个`getwd()`）

从查看文档来看，使用`shell()`, 应该是这样，但我似乎对 R 引用主目录的方式或我编写字符串的方式有疑问。

例如

这在 Windows 中的 cmd“运行”中可以正常工作：excel e:\test.xlsx

但是使用这个

```
route <- "e:\\test.xlsx"
shell(paste("excel " , route, sep=""), flag="") 
```

似乎到了 excel（打印了 excel 版权声明），但也打印了主目录并且没有在`route`. 谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:57:36.110

你的命令对我也一样。但是，这有效：

```
shell(paste("start", "excel", route)) 
```

# sql - 多对一 SQL 引用而不重复任何“一”条目

> ID：14295235
> 
> 赞同：0
> 
> 时间：2013-01-12T16:15:51.063
> 
> 标签：sql, join

所以我在这里闲逛了一段时间，但还没有弄清楚这一点，最终放弃了尝试猜测方法并寻求帮助。

我在数据库中有三个表。一个跟踪发票级别的详细信息（客户、发票的运费、付款等），另一个跟踪行项目详细信息（订单上的项目、成本/项目、售价/项目等），最后一个表包含有关货物的数据 EG ：跟踪号码，运输成本等。

所以我有：

```
CustomerInvoice
CustomerInvoiceDetail
Shipment 
```

我试图以一个连接这些表的选择语句结束，但在与发货表匹配时不重复任何发票详细信息。CustomerInvoice 与 CustomerInoiceDetail 和 Shipment 具有一对多的关系，因为一个订单可以有多个 lineitem 和多个发货。

到目前为止，我有：

```
SELECT     
    CustomerInvoice.InvoiceCode, CustomerInvoiceDetail.ItemCode,
    CustomerInvoiceDetail.LineNum, Shipment.SourceDocument, 
    Shipment.TrackingNumber, CustomerInvoiceDetail.ActualCost, 
    CustomerInvoiceDetail.ExtActualCost, Shipment.Freight AS FreightCost,
    CustomerInvoiceDetail.SalesPrice, CustomerInvoiceDetail.ExtPrice, 
    CustomerInvoiceDetail.SalesTaxAmount, CustomerInvoice.Freight, 
    CustomerInvoice.FreightTax

FROM         
    CustomerInvoiceDetail LEFT OUTER JOIN
                  Shipment RIGHT OUTER JOIN
                  CustomerInvoice 
    ON Shipment.SourceDocument = CustomerInvoice.SourceInvoiceCode 
    ON CustomerInvoiceDetail.InvoiceCode = CustomerInvoice.InvoiceCode
; 
```

理想情况下，我们需要结果显示一行包含发货和订单级别的详细信息，没有发票行项目详细信息，然后是下面的所有发票行项目详细信息。我在想这可以通过将发票内部连接到装运来完成，但是不知道如何进一步包含发票详细信息中的每一行，而无需将其连接到任何标准的其他数据。最后，需要避免任何订单的最终结果多次包含相同的货币数字。

作为参考，我用完整的语法重写了 Gordon Linoff 提交的查询并运行它。奇怪的是，目前只有案例陈述存在问题。这是它的样子：

```
`--REFERENCE JOIN STATEMENT          
SELECT CustomerInvoice.InvoiceCode, NULL as ItemCode,
       NULL as LineNum, Shipment.SourceDocument, 
       Shipment.TrackingNumber, NULL as ActualCost, 
       NULL as ExtActualCost, Shipment.Freight AS FreightCost,
       NULL as SalesPrice, NULL as ExtPrice, 
       NULL as SalesTaxAmount, CustomerInvoice.Freight, 
       CustomerInvoice.FreightTax
FROM Shipment RIGHT OUTER JOIN
     CustomerInvoice
    ON Shipment.SourceDocument = CustomerInvoice.SourceInvoiceCode 
union all
select CustomerInvoice.InvoiceCode, CustomerInvoiceDetail.ItemCode,
       CustomerInvoiceDetail.LineNum, NULL as SourceDocument, 
       NULL as TrackingNumber, CustomerInvoiceDetail.ActualCost, 
       CustomerInvoiceDetail.ExtActualCost, NULL AS FreightCost,
       CustomerInvoiceDetail.SalesPrice, CustomerInvoiceDetail.ExtPrice, 
       CustomerInvoiceDetail.SalesTaxAmount, CustomerInvoice.Freight, 
       CustomerInvoice.FreightTax
from CustomerInvoice join
     CustomerInvoiceDetail
     on CustomerInvoice.InvoiceCode = CustomerInvoiceDetail.InvoiceCode
order by InvoiceCode, ItemCode, (case when LineNum is null then 0 else 1 end), LineNum

_` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:00:32.157

这种类型的查询，在不同的行上有不同的信息，通常建议一个`union`. 以下是您可能想要的示例：

```
SELECT ci.InvoiceCode, ci.ItemCode,
       NULL as LineNum, S.SourceDocument, 
       s.TrackingNumber, NULL as ActualCost, 
       NULL as ExtActualCost, s.Freight AS FreightCost,
       NULL as SalesPrice, NULL as ExtPrice, 
       NULL as SalesTaxAmount, ci.Freight, 
       ci.FreightTax
FROM Shipment s RIGHT OUTER JOIN
     CustomerInvoice ci
    ON s.SourceDocument = ci.SourceInvoiceCode 
union all
select ci.InvoiceCode, ci.ItemCode,
       cid.LineNum, NULL as SourceDocument, 
       NULL as TrackingNumber, cid.ActualCost, 
       cid.ExtActualCost, NULL AS FreightCost,
       cid.SalesPrice, cid.ExtPrice, 
       cid.SalesTaxAmount, ci.Freight, 
       ci.FreightTax
from CustomerInvoice ci join
     CustomerInvoiceDetail cid
     on ci.InvoiceCode = cid.InvoiceCode
order by InvoiceCode, ItemCode, (case when lineNum is null then 0 else 1 end), LineNum 
```

中的`case`语句`order by`只是为了确保具有 NULL LineNum 的行先行。

注意：这是未经测试的 SQL，因此可能存在语法错误，尤其是别名。

# r - R中的Stata函数inlist（）的等价物是什么？

> ID：14295236
> 
> 赞同：9
> 
> 时间：2013-01-12T16:15:55.367
> 
> 标签：r, command, stata

Stata 的[inlist](http://www.stata-journal.com/sjpdf.html?articlenum=dm0026)允许我们引用变量的真实值或字符串值。我想知道是否`R`有这样的功能。

**例子：**

我想从变量中选择八个州`state`（您可以将其视为`state`任何数据框中的列，其中包含`state`50 个字符串值（美国各州））。

```
 inlist(state,"NC","AZ","TX","NY","MA","CA","NJ") 
```

我想从变量中选择九个年龄值`age`（您可以将其视为`age`任何数据框中的列，其中`age`数值从 0 到 90）。

```
 inlist(age,16, 24, 45, 54, 67,74, 78, 79, 85) 
```

问题：

```
age<-c(0:10) # for this problem age takes values from 0 to 10 only
data<-as.data.frame(age) # age is a variable of data frame data
data$m<-ifelse(c(1,7,9)%in%data$age,0,1) # generate a variable m which takes  value 0 if age is 1, 7, and 8 and 1, otherwise
Expected output: 
   age m
1    0 1
2    1 0
3    2 1
4    3 1
5    4 1
6    5 1
7    6 1
8    7 0
9    8 1
10   9 0
11  10 1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T16:30:25.573

我想你想要`%in%`：

```
statevec <- c("NC","AZ","TX","NY","MA","CA","NJ")
state <- c("AZ","VT")
state %in% statevec ## TRUE FALSE
agevec <- c(16, 24, 45, 54, 67,74, 78, 79, 85) 
age <- c(34,45)
age %in% agevec ## FALSE TRUE 
```

**编辑**：处理更新的问题。

从@NickCox 的链接复制：

```
inlist(z,a,b,...)
      Domain:       all reals or all strings
      Range:        0 or 1
      Description:  returns 1 if z is a member of the remaining arguments;
                        otherwise, returns 0\.  All arguments must be reals
                        or all must be strings.  The number of arguments is
                        between 2 and 255 for reals and between 2 and 10 for
                        strings. 
```

但是，我不太确定这与原始问题是否匹配。我不太了解Stata，无法知道是否`z`可以是向量：听起来不是这样，在这种情况下，原始问题（考虑`z=state`为向量）没有意义。如果我们认为它*可以*是一个向量，那么答案将是`as.numeric(state %in% statevec)`——我认为。

编辑：***阿南达更新***

使用您更新的数据，这是一种方法，再次使用`%in%`：

```
data <- data.frame(age=0:10)
within(data, {
    m <- as.numeric(!age %in% c(1, 7, 9))
})
   age m
1    0 1
2    1 0
3    2 1
4    3 1
5    4 1
6    5 1
7    6 1
8    7 0
9    8 1
10   9 0
11  10 1 
```

这与您的预期输出相匹配，通过使用`!`(NOT) 来反转`%in%`. 这似乎与我的想法有点倒退（通常，0== `FALSE`“不在列表中”和 1== `TRUE`“在列表中”）以及我对 Stata 定义的阅读，但如果是这样的话你要 ...

或者可以使用`ifelse`更多潜在的灵活性（即 0/1 以外的值）：`within(data, { m <- ifelse(age %in% c(1, 7, 9),0,1)})`在上面的代码中替换。

# xaml - 在 WindowsRT Store App 中加载具有不同内容的缓存页面

> ID：14295237
> 
> 赞同：1
> 
> 时间：2013-01-12T16:15:55.757
> 
> 标签：xaml, winrt-xaml, windows-store-apps

我想为单击 ListView 项时加载的页面启用缓存。因此，当用户第二次单击同一项目时，应用程序将导航到上一个缓存页面。（我正在使用 LayoutAwarePages，我怀疑如果在 OnNavigatedTo 方法中 NavigationMode 参数与 NavigationMode.New 不同，这应该是可能的）

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T06:42:11.413

您可以通过在其构造函数中设置页面的[NavigationCacheMode](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.navigation.navigationcachemode.aspx)属性来影响页面缓存。默认情况下它是禁用的，但如果启用它，每次导航到它时都会获得现有的页面实例。这意味着即使用户导航到 ListView 中的不同项目，页面的相同实例也将被重用。

我找到了一个重新实现导航框架的[库](https://mytoolkit.codeplex.com/wikipage?title=Page)，使其更像 Windows Phone 中的那个，即：

*   导航返回时使用缓存页面。
*   向前导航时，会创建一个新的页面实例。

如果我正确理解您的问题，您需要与上述两种不同的缓存行为。为了实现这一点，您可以将替代导航框架基于我链接到的库中的导航框架，或者通过仅保留每个项目的页面状态而不是实际缓存页面来模拟行为。

# windows - 在后台使用 plink 转发本地端口并在本地机器上执行命令

> ID：14295238
> 
> 赞同：1
> 
> 时间：2013-01-12T16:15:56.040
> 
> 标签：windows, batch-file, ssh, putty

我想编写一个批处理脚本，将我机器上的本地端口转发到服务器 dataexchange。我已经为服务器提供了用于身份验证的公钥，并且我想使用 PuTTY 的命令行 SSH 工具 plink 进行连接。

这就是我希望脚本执行的操作。

1.  将本地端口 3309 转发到`dataexchange:3306`.

2.  在我的本地机器上运行一个 Java 程序来查询 .mysql 数据库`dataexchange:3306`。

3.  关闭端口。

我是批量写作的新手，但这是我认为应该起作用的方法。我不确定如何在我的机器上批量运行 Java 程序，也不确定如何在 plink 运行后关闭它。

```
@ECHO OFF
plink -L 3309:dataexchange:3306 -l myUser -N &
java -jar myprog.java 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:24:11.510

在您的示例中，您有一些落后的东西：

*   您可能希望 java 程序连接到 localhost:3306，然后将其转发到远程 dataexchange:3306
*   端口转发语法为：`-L 3306:localhost:3306`
*   您需要在 plink 命令中连接到主机。在这种情况下可能是 myuser@dataexchange
*   Windows中没有任何`&`东西，该`start`命令应该可以帮助您（[Doc](http://www.computerhope.com/starthlp.htm)）
*   java程序完成后，您可以使用`taskkill /im plink.exe`终止plink隧道。（但请注意，这会杀死当前正在运行的所有 plink 进程）
*   `.java`java命令可能也是错误的，没有编译就不能运行文件。（程序是自己写的吗？然后先用 编译`javac`）

# mysql - 如何提高此查询的性能？

> ID：14295240
> 
> 赞同：2
> 
> 时间：2013-01-12T16:16:09.050
> 
> 标签：mysql, performance

```
select m.ID,m.cell_number,cm.id 
from corporate_main_member m
   , corporate_main_corporate_membership cm 
WHERE m.status = 'active' 
   AND m.ID IN (
      select cm.FK_Member_ID 
      from corporate_main_corporate_membership cm 
      WHERE cm.status = 'active' 
        AND cm.ID IN (
           select gm.FK_Corporate_Membership_ID 
           from corporate_main_group_membership gm 
           WHERE gm.status = 'active' 
             AND gm.FK_Group_id IN (168,169,170)
             Group BY gm.FK_Corporate_Membership_ID
           )
      ) 
   AND cm.fk_corporation_id = 5 
   AND cm.FK_Member_ID = m.id 
```

上：

```
1 Million records of corporate_main_member 
2 Million records of corporate_main_corporate_membership
3 Million records of corporate_main_group_membership 
```

上面的查询停止了 mysql！它一直在工作，直到前天我使用脚本将数千条记录添加到corporate_main_member 和corporate_main_corporate_membership 表中。不确定它是否相关或数据库大小超过了导致严重性能问题的某个阈值。

有什么帮助吗？我对索引或任何东西一无所知。架构很明显。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T16:24:15.343

试试这个，

```
SELECT  m.ID,
        m.cell_number,
        cm.id
FROM    corporate_main_member m
        INNER JOIN corporate_main_corporate_membership cm
            ON  cm.FK_Member_ID = m.id  AND
                cm.fk_corporation_id = 5
        INNER JOIN
        (
            SELECT  ccm.FK_Member_ID
            FROM    corporate_main_corporate_membership ccm
                    INNER JOIN corporate_main_group_membership gm
                        ON ccm.ID = gm.FK_Corporate_Membership_ID
            WHERE   ccm.STATUS = 'active' AND
                    gm.STATUS = 'active' AND
                    gm.FK_Group_id IN ( 168, 169, 170 )
            GROUP   BY ccm.FK_Member_ID
        ) s ON  m.ID = s.FK_Member_ID
WHERE   m.STATUS = 'active' 
```

# google-chrome - 动画 gif 在 Chrome 中无法正常工作

> ID：14295244
> 
> 赞同：1
> 
> 时间：2013-01-12T16:16:30.000
> 
> 标签：google-chrome, responsive-design, animated-gif, parallax

让 gif 在 Chrome 中工作似乎存在问题。它在 FireFox 和 Opera 中运行良好，但在 Chrome 中，它似乎只有在我不断滚动时才起作用。知道我正在构建一个带有 gif 的响应式视差网站可能会很有用。我找不到这方面的任何信息，只是 Chrome 有时根本不会播放 gif。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-21T20:41:33.600

不确定您是否仍需要对此进行修复，但这是当 GIF 是背景图像时我必须做的。Chrome 会缓存 GIF，因此它只播放一次。您必须使用一些 jQuery 来“强制”动画再次播放。

```
<script type="text/javascript">
$(document).ready(function () {
    $("#myContainer").css("background-image", "url(/images/myAnimation.gif?"+ Math.random() + ")" );
});
</script> 
```

几乎你在 GIF url 的末尾添加一个随机数来强制浏览器重播动画，因为它认为它是图像的新实例。我仍然会将 GIF 放在元素背景的 CSS 中，以防浏览器出现 JS 问题。

有点hacky，但它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:41:55.410

问题是 gif 被设置为 100% 的背景。当将其作为图像放入 html 中时，它又可以工作了。这并不能解释原因，但它确实提供了一种解决方法。

# javascript - 总是相同的行高？

> ID：14295248
> 
> 赞同：0
> 
> 时间：2013-01-12T16:16:43.607
> 
> 标签：javascript, html, css

有什么解决方案可以使两条线之间的高度始终相同吗？我的意思是字体大小为 14px 和字体大小为 19px 的文本具有相同的距离。在附图中，您可以看到一个示例。 ![例子](../Images/25718edf36d09f67dabf418064843730.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:18:17.870

是的，CSS `line-height`。见[MDN](https://developer.mozilla.org/en-US/docs/CSS/line-height)。

例如：

```
.big {
  font-size: 19px;
  line-height: 19px;
}

.small {
  font-size: 14px;
  line-height: 19px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:17:12.680

您可以设置`line-height`为特定值，甚至以像素为单位，例如`* { line-height: 21px }`，尽管这是非常严格的，并且迟早会导致问题。对于字体大小为 14px 和 19px 的文本，你真的应该使用不同的行高。如果您解释为什么要使用相同的行高，那么原始问题可能会有一个很好的解决方案。

设置行高不会像图像中*那样*设置一致的间距，它显示了文本基线和下一行大写顶行之间的距离。行高是文本基线之间的距离。行之间的视觉空白空间因字体和字符而异（考虑仅包含诸如 a、x、s 之类的字母的行与包含诸如 Ê、Å、g、Q 之类的大量字符的行）。大写顶行，即没有变音符号的大写字母的最大级别，因字体而异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T18:00:36.473

保持行高一致的更好解决方案是将 body 标签设置为您想要的高度。**注意，根据经验，您应该只使用 pt 和 em 来调整字体/前导的大小（前导是行高的排版术语）

```
body{
      font-size: Xem;
      line-height: Yem;
} 
```

然后，当您有某些需要不同前导值的部分时，您可以使用假设使用 CSS 之类的类来设置它们的样式。

```
.tightStory{
  font-size: Xem;
  line-height: Xem;
}
.looseStory{
  font-size: Xem;
  line-height: Zem;
} 
```

希望这可以帮助

# ios - Bonjour 客户端和服务器同时进行

> ID：14295251
> 
> 赞同：1
> 
> 时间：2013-01-12T16:17:00.640
> 
> 标签：ios, networking, bonjour

是否可以为 ios te 设置 bonjour 让设备同时成为客户端和服务器？我的意思是我希望同时（不断开连接）接收信息并将信息发送到多个设备？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:09:13.170

虽然您可以将设备设置为 Bonjour 客户端和 Bonjour 服务器，但请确保您为 Bonjour 使用不同的服务类型。否则它会发现自己。

但是，如果您“希望同时（不断开连接）接收和发送信息到多个设备”，则无需将设备设置为服务器和客户端 Bonjour。由于 Bonjour 只是一个网络发现协议。一个设备发现或被发现另一个设备，并且网络连接已经建立，您可以向/从任何连接的设备发送和接收。

# javascript - JavaScript 逻辑 - 解析文本区域

> ID：14295258
> 
> 赞同：2
> 
> 时间：2013-01-12T16:17:21.440
> 
> 标签：javascript, jquery, string, parsing, textarea

我需要一个包含有关帐户的格式化信息的文本框，然后以某种方式对其进行排序。我想知道将信息解析为二维数组是否是理想的（我试图使其尽可能高效），或者我是否应该制作将在字段中保存信息的帐户对象。

该程序仅用于格式化数据，以便无需复制/粘贴即可打印出来。

到目前为止，我已经...

```
function generateOutputfvoc()
{
    var accountLines = document.getElementById('accountLines').value;
    var accountLinesTemp = accountLines.split(/[\s]/);

    for(var i = 0; i < accountLinesTemp.length; i++)
    {
        if(accountLinesTemp[i].match(/ 
```

编辑（1-18-13）：这是一个示例输入。它基本上是从网络 CRM 工具复制的文本。请注意，这个示例输入是我随机输入的。

```
P8B000001234567     stackoverflow   Thing   12522225555     444         Active 2005-02-26   CO1000123456     
P8B000001234568     stackoverflow   Another Thing       444         Active  2005-02-26  CO1000123456     
P8B000001234569     stackoverflow   Another Thing       556         Active  2005-02-26  CO1000123456 
```

我希望我的程序获取文本并简单地输出如下文本：

```
P8B000001234567 stackoverflow Thing         12522225555 444 Active 2005-02-26 CO1000123456
P8B000001234568 stackoverflow Another Thing             444 Active 2005-02-26 CO1000123456
P8B000001234569 stackoverflow Another Thing             556 Active 2005-02-26 CO1000123456 
```

另外，我想知道我是否应该使用 jQuery 变量。我问这个是因为我一直在网上寻找很多，我发现使用如下代码的示例：

```
$check=fcompcheck();
if($check)
{
    $output=document.frm1.type.value+" / ";
    $output=$output+"Something - "+document.frm1.disco.value+" / "; 
```

注意： $output 变量。美元符号表示一个 jQuery 变量，对吗？

感谢您为我提供的任何帮助。

更新 (1-19-13)：我已经尝试过了，但进展缓慢。我习惯于编写 Java 并且我的 JavaScript 看起来太相似了，我可以说我正在犯错误。

我一步一步来。这是我现在使用的逻辑。

*   人员将文本粘贴到文本框中并按下生成按钮
*   程序获取文本框的内容并将其解析为一个大数组，仅删除空格
*   然后程序在文本中搜索模式并开始将值传递给变量

我试图让程序简单地识别模式“摘要部分折叠名称”，因为这四个词应该始终按此顺序排列。一旦识别出这一点，它将把接下来的两个数组值传递给名字和姓氏变量。这是一些代码：

```
var contactNameFirst, contactNameLast;

// Parse the input box into an array
var inputArr = document.getElementById('inputBox').value.split(/[\s]/);

for(var i = 0; i < inputArr.length; i++)
{
    if(inputArr[i] == "Summary" && inputArr[i - 1] == "section" && inputArr[i - 2] == "Collapse" && inputArr[i + 1] == "Name")
    {
        if(inputArr[i + 2] != "Details")
        {
            contactNameFirst = inputArr[i + 2];
        }
        else
        {
            contactNameFirst = "";
        }
        if(inputArr[i + 3] != "Details")
        {
            contactNameLast = inputArr[i + 3];
        }
        else
        {
            contactNameLast = "";
        }
    }
}

document.getElementById('contactNameOutput').innerHTML = contactNameFirst + " " + contactNameLast; 
```

另外，我现在应该为此创建一个新帖子，还是继续编辑这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:23:06.570

您`accountLinesTemp`是`Array`of `String`，您可以使用该`Array.sort`函数按预期对数组进行排序，然后`Array.join`在必要时使用它来获取完整的字符串。

有关更多信息，请参阅MDN 上的[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)。

# java - MainActivity 上的 onActivityResult Intent 为空

> ID：14295260
> 
> 赞同：2
> 
> 时间：2013-01-12T16:17:32.980
> 
> 标签：java, android

我的主要活动启动登录活动。如果用户成功登录，则该`ApiResponseHandler`对象调用`activity.finish()`。似乎一切都正确完成。我在传递意图时看不到任何可能导致它成为的差距`null`。

错误点在下面的评论中注明`MainActivity`

```
 public class MainActivity extends Activity {
        static final int LOGIN_INTENT_ID = 0;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            //launch login activity
            startActivityForResult(new Intent(this, LoginActivity.class), LOGIN_INTENT_ID);
        }

        protected void onActivityResult(int requestCode, int resultCode, Intent intent) {
            super.onActivityResult(requestCode, resultCode, intent);

            //handle activity response
            if (requestCode == LOGIN_INTENT_ID) {
                if (resultCode == Activity.RESULT_OK) {
//intent is null, so .getSerializableExtra() fails
                    User user = (User) intent.getSerializableExtra("User");
                    Toast.makeText(getApplicationContext(), "Logged in as: " + user.getFirstName() + " " + user.getLastName(), Toast.LENGTH_SHORT).show();
                }
            }
        }
    } 
```

我的登录活动：

```
public class LoginActivity extends Activity {
    public static final Logger logger = Logger.getLogger(LoginActivity.class.getName());

    Button      loginButton;
    EditText    loginField;
    EditText    passwordField;

    /**
     * Called when the activity is first created.
     */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);

        loginButton = (Button)findViewById(R.id.loginFormLabelButton_Login);
        loginField = (EditText)findViewById(R.id.loginFormLogin);
        passwordField = (EditText)findViewById(R.id.loginFormPassword);
    }

    /**
     * Login a user when the button is clicked
     * @param v
     */
    public void logUserIn(View v) {
        loginButton.setText(R.string.loginFormLabelButton_Login_Working);

        ApiRequest request = new ApiRequest();

        request.setLogin(loginField.getText().toString());
        request.setPassword(passwordField.getText().toString());

        if (request.getLogin().length() == 0) {
            showErrorDialog(getString(R.string.loginErrorDialog_LoginRequired));
            return;
        }
        if (request.getPassword().length() == 0) {
            showErrorDialog(getString(R.string.loginErrorDialog_PasswordRequired));
            return;
        }

        //make request and handle results
        ApiRequestHandler<User> apiHandler = new ApiRequestHandler<User>(User.class);
        apiHandler.setUrl(getString(R.string.loginFormApiUrl));
        apiHandler.setApiRequest(request);
        apiHandler.setResponseHandler(new ApiResponseHandler(this, getIntent()));
        apiHandler.execute();

        loginButton.setText(R.string.loginFormLabelButton_Login);
    }

    ....
} 
```

`new ApiResponseHandler(this, getIntent())`长相是这样的...

```
public class ApiResponseHandler implements com.Bible_Bowl_Management.Api.ApiResponseHandler<User> {
    private Activity activity;
    private Intent intent;

    public ApiResponseHandler(Activity activity, Intent intent) {
        this.activity = activity;
        this.intent = intent;
    }

    @Override
    public void ResponseSuccessful(User user) {
        intent.putExtra("User", user);
        activity.setResult(Activity.RESULT_OK);
        activity.finish();
    }

    @Override
    public void ResponseNoContent() {
        Toast.makeText(this.activity.getApplicationContext(), "No account found with these credentials", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:21:17.150

您正在传递 getIntent() 作为 Intent 返回到 Activity

您应该为此创建一个新的 Intent 对象。

例如：

```
 Intent returnIntent = new Intent();
  returnIntent.putExtra("SelectedBook",book);
  setResult(RESULT_OK,returnIntent); 
```

# ios - 大量同步动画的设计模式

> ID：14295262
> 
> 赞同：2
> 
> 时间：2013-01-12T16:17:39.080
> 
> 标签：ios, objective-c, uiview, core-animation

我有超过 150 个 UIImageViews。我需要他们表现得像一个大型芭蕾舞团。我还需要能够动态地编排它们。一些旋转，一些鸭子，一些跳跃（目前每个都是不同的 UIImageView 子类）。

我假设我需要将它们全部放入 NSDictionary，然后根据键抓取对象并说“你旋转”、“你跳”、“你鸭”。并在播放音乐时同步进行这些动作（不是真正的音乐，而是来自外部来源的数据）。而且我不知道音乐（数据）到达之前会是什么，而且以前没有人听过这首歌。我已经设置了一个`while (music){}`循环，里面有一个大的 switch 语句。

我想用手将所有芭蕾舞演员放在笔尖的视图上，以便它们与子视图正确对齐。他们都没有改变x，y。他们可能只会改变 z，并且可能会交换图像、淡化不透明度等（我称之为旋转、鸭子和跳跃）。这里没有用户交互，你只是在观众中。

我还假设我需要使用 UIView 的 beginAnimation、setAnimation、commitAnimation 方法。

我在正确的轨道上吗？实现这一目标的最佳方法是什么？我应该考虑哪些优化？
为所有类比道歉，这是解释我想要实现的目标的最简单方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:21:50.910

我建议你看看[`UICollectionView`](https://www.google.ch/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CDQQFjAA&url=http%3A%2F%2Fdeveloper.apple.com%2Flibrary%2Fios%2F%23documentation%2FUIKit%2FReference%2FUICollectionView_class%2FReference%2FReference.html&ei=44zxUNTQFcbRtAbd4YGQDA&usg=AFQjCNE17Vky3OsDv6jcESIVf1Hu6qB8aw&sig2=upmTpSlUcWhgiXOQRVlHmQ&bvm=bv.1357700187,d.Yms)。关于它有一个很棒的[WWDC 会议](https://developer.apple.com/videos/wwdc/2012/?id=205)。我不确定您要实现什么，但是`UICollectionView`您可以设置自定义布局并自动在不同布局之间设置动画。因此，如果您的图像必须同步移动，这可能是一个不错的选择。

# android - 缺少 JDBC 驱动程序 oracle 10g android 4.x

> ID：14295270
> 
> 赞同：3
> 
> 时间：2013-01-12T16:18:19.390
> 
> 标签：android, oracle, jdbc, driver

我的运行项目有一些问题，但这是最糟糕的：

```
 String url="jdbc:oracle:login/pwd@host:1521:etudom";
    Connection co = null;

    try {
        Class.forName("oracle.jdbc.driver.OracleDriver");
        co= DriverManager.getConnection(url);
        popUp("Ok");
    }
    // Driver Oracle : Should never happen
    catch (ClassNotFoundException e){
        popUp("ERROR: Oracle Driver's missing");
        //System.exit(1);
    }
    // Internet Connection Problem
    catch (SQLException e) {
        popUp("ERREOR :   " + e.getMessage());
        //System.exit(1);
    } 
```

这是 OJDBC14 的日志：

```
 01-12 22:37:14.876: D/dalvikvm(558): Not late-enabling CheckJNI (already on)
    01-12 22:37:16.867: D/gralloc_goldfish(558): Emulator without GPU emulation detected.
    01-12 22:38:01.996: E/dalvikvm(558): Could not find class 'javax.management.MBeanServer', referenced from method oracle.jdbc.driver.OracleDriver.registerMBeans
    01-12 22:38:02.006: W/dalvikvm(558): VFY: unable to resolve check-cast 706 (Ljavax/management/MBeanServer;) in Loracle/jdbc/driver/OracleDriver;
    01-12 22:38:02.006: D/dalvikvm(558): VFY: replacing opcode 0x1f at 0x002d
    01-12 22:38:02.006: I/dalvikvm(558): Could not find method java.lang.management.ManagementFactory.getPlatformMBeanServer, referenced from method oracle.jdbc.driver.OracleDriver.registerMBeans
    01-12 22:38:02.006: W/dalvikvm(558): VFY: unable to resolve static method 3503: Ljava/lang/management/ManagementFactory;.getPlatformMBeanServer ()Ljavax/management/MBeanServer;
    01-12 22:38:02.016: D/dalvikvm(558): VFY: replacing opcode 0x71 at 0x0080
    01-12 22:38:02.016: I/dalvikvm(558): Could not find method java.lang.management.ManagementFactory.getPlatformMBeanServer, referenced from method oracle.jdbc.driver.OracleDriver.registerMBeans
    01-12 22:38:02.027: W/dalvikvm(558): VFY: unable to resolve static method 3503: Ljava/lang/management/ManagementFactory;.getPlatformMBeanServer ()Ljavax/management/MBeanServer;
    01-12 22:38:02.027: D/dalvikvm(558): VFY: replacing opcode 0x71 at 0x0094
    01-12 22:38:02.036: I/dalvikvm(558): Could not find method java.lang.management.ManagementFactory.getPlatformMBeanServer, referenced from method oracle.jdbc.driver.OracleDriver.registerMBeans
    01-12 22:38:02.036: W/dalvikvm(558): VFY: unable to resolve static method 3503: Ljava/lang/management/ManagementFactory;.getPlatformMBeanServer ()Ljavax/management/MBeanServer;
    01-12 22:38:02.036: D/dalvikvm(558): VFY: replacing opcode 0x71 at 0x00a8
    01-12 22:38:02.036: I/dalvikvm(558): Could not find method java.lang.management.ManagementFactory.getPlatformMBeanServer, referenced from method oracle.jdbc.driver.OracleDriver.registerMBeans
    01-12 22:38:02.036: W/dalvikvm(558): VFY: unable to resolve static method 3503: Ljava/lang/management/ManagementFactory;.getPlatformMBeanServer ()Ljavax/management/MBeanServer;
    01-12 22:38:02.036: D/dalvikvm(558): VFY: replacing opcode 0x71 at 0x00bc
    01-12 22:38:02.046: I/dalvikvm(558): Could not find method java.lang.management.ManagementFactory.getPlatformMBeanServer, referenced from method oracle.jdbc.driver.OracleDriver.registerMBeans
    01-12 22:38:02.046: W/dalvikvm(558): VFY: unable to resolve static method 3503: Ljava/lang/management/ManagementFactory;.getPlatformMBeanServer ()Ljavax/management/MBeanServer;
    01-12 22:38:02.046: D/dalvikvm(558): VFY: replacing opcode 0x71 at 0x00d1
    01-12 22:38:02.046: W/dalvikvm(558): VFY: unable to resolve exception class 702 (Ljavax/management/JMException;)
    01-12 22:38:02.046: W/dalvikvm(558): VFY: unable to resolve exception class 702 (Ljavax/management/JMException;)
    01-12 22:38:02.046: W/dalvikvm(558): VFY: unable to resolve exception class 702 (Ljavax/management/JMException;)
    01-12 22:38:02.046: W/dalvikvm(558): VFY: unable to find exception handler at addr 0xfa
    01-12 22:38:02.046: W/dalvikvm(558): VFY:  rejected Loracle/jdbc/driver/OracleDriver;.registerMBeans ()V
    01-12 22:38:02.046: W/dalvikvm(558): VFY:  rejecting opcode 0x0d at 0x00fa
    01-12 22:38:02.046: W/dalvikvm(558): VFY:  rejected Loracle/jdbc/driver/OracleDriver;.registerMBeans ()V
    01-12 22:38:02.056: W/dalvikvm(558): Verifier rejected class Loracle/jdbc/driver/OracleDriver; 
```

而且我总是得到 ClassNotFound 异常，这让我发疯了！

我在命令行项目中使用了相同的驱动程序，它运行良好。

如果有人有任何线索，那就太好了......

在此先感谢，并为我的英语不好感到抱歉。

托马斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T16:35:21.693

较新的 Oracle 驱动程序（至少`ojdbc6.jar`，也可能是较早的驱动程序）不适用于 Android。它们需要 Java 标准版 (Java SE) 中的几个类，这些类在精简的 Android 平台上不可用。

**更新：**

错误信息很清楚：

```
Could not find class 'javax.management.MBeanServer' 
```

这是 Android 上缺少的 Java SE 类。它可能想看看问题[Android Oracle Database JDBC6](https://stackoverflow.com/questions/14183235/android-oracle-database-jdbc6)。该用户能够在 Android上使用*ojdbc14.jar 。*

可能他/她以不同的方式使用 Oracle 客户端，例如，`Class.forName("oracle.jdbc.OracleDriver");`而不是`Class.forName("oracle.jdbc.driver.OracleDriver");`. 或者他/她使用了内部使用不同类的不同连接字符串。或者它是一个较旧的驱动程序，即使它也被称为*ojdbc14.jar*。

无论如何，不​​能保证它会起作用。Oracle Java 客户端是为 Java SE 而不是为 Android Java 构建的，它只包含那些通常在移动设备上使用的类。

# c++ - 关于尾递归优化

> ID：14295276
> 
> 赞同：5
> 
> 时间：2013-01-12T16:19:06.997
> 
> 标签：c++, optimization, recursion, tail

我用下面两个函数来测试MSVC08下的Tail递归优化

```
int TailRecursively1(int i)
{
  return TailRecursively1(i);
}

int TailRecursively2(std::string str)
{
  return TailRecursively2(str);
} 
```

为什么 TailRecursively1 优化了，TailRecursively2 却导致栈溢出？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T16:20:42.740

因为在将str参数按值发送到TailReucrsively2时，会调用std::string复制构造函数和析构函数？

（我对此不是 100% 确定）

# python - 不从 Python 模块导出函数

> ID：14295277
> 
> 赞同：8
> 
> 时间：2013-01-12T16:19:31.367
> 
> 标签：python

如果我有一个`foo.py`包含以下内容的模块/文件：

```
from math import sqrt

def foo():
    pass 
```

如果我在另一个脚本中导入它，`sqrt`也是在模块中定义的`foo`。

```
import foo    
dir(foo) 
```

其中的输出是

```
[..., # other things
 'foo',
 'sqrt'] 
```

我该如何防止这种情况？即，要么指定`sqrt`不导出，要么只导出特定函数——在这种情况下，只导出用户定义的函数。我知道对于用户定义的函数，您可以在模块中通过以下划线前缀私下定义它们，但在这种情况下，它不是用户定义的函数，所以我不能用下划线前缀定义它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T16:23:46.997

你不能，但它永远不应该妨碍它，它绑定到`foo`命名空间，如`foo.sqrt`. 如果您`sqrt`从中导入`math`它将是`math.sqrt`. 这就是命名空间的全部意义所在。

如果你真的想避免导入某些名称，你可以这样做：

`from foo import foo, bar, ...`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-12T16:27:50.603

> 在这种情况下，它不是用户定义的函数，所以我不能用下划线前缀定义它。

是的你可以：

```
from math import sqrt as _sqrt 
```

另一种方法是仅在需要它们的函数范围内导入对象。

（虽然这可能会回答您的问题，但我仍然不知道您为什么要这样做。这两个选项都很麻烦，不会让您的代码库看起来更好。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T16:29:21.637

你应该使用：

```
from math import sqrt as sqrt_m
import foo 
```

所以，你可以使用

`sqrt_m()`to get the `sqrt`from`math`和 `sqrt()`to get the `sqrt`from`foo`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-09-20T16:24:38.363

`delete`如果您不想导入对象，则可以从导入的模块中导入一个对象。如果`foo.py`看起来像这样：

```
from math import sqrt
def foo():
    pass

del sqrt 
```

然后在导入时，`dir(foo)`显示

```
['__builtins__', '__cached__', '__doc__', '__file__', '__loader__',
 '__name__', '__package__', '__spec__', 'foo'] 
```

然后显然你仍然可以在`from math import sqrt`任何地方执行 import `foo`。

# java - MultivaluedMap Jersey 的 Swagger API？是否可以？

> ID：14295279
> 
> 赞同：4
> 
> 时间：2013-01-12T16:19:37.123
> 
> 标签：java, api, documentation, jersey, swagger

`MultivaluedMap`是否可以使用 Swagger 通过 Jersey 中的参数注释来制作 API 文档？

我有一小段代码是这样的：

```
/**
 * Method which serves requests of adding {@link StudentGroup} to DB
 * 
 * @param name
 * @param description
 * @return {@link Response}
 * @throws RestServiceException
 */
 @POST
 @Path("/add")
 public Response addStudentGroup(MultivaluedMap<String, String> formParams) throws 
     RestServiceException {
     String name = formParams.getFirst("name");
     String description = formParams.getFirst("description");
     String studentIds = formParams.getFirst("studentIds");

     (...)

} 
```

我想使用 Swagger 和 Swagger UI`@ApiParam`生成文档数据。`JSON`

如果我把它放在 formParams`@ApiParam`之前`MultivaluedMap<String, String>`它不起作用。Swagger 不能列出任何参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T08:53:37.447

这似乎是 Swagger 中的一个错误——我也有这种行为。使用具有两个类型参数的其他泛型类（如 @ApiParam() HashMap）可以正常工作。可能它会抛出解析器。

我在 Swagger 错误跟踪系统上为此打开了[一个](https://github.com/wordnik/swagger-core/issues)[问题](https://github.com/wordnik/swagger-core/issues/172)。

您也可以[在他们的 Google 群组](https://groups.google.com/forum/#!forum/swagger-swaggersocket)中询问他们，或者在 IRC 的 Freenode#swagger 上找到他们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-30T20:40:21.290

我可以像这样解决这个问题。我们可以利用 Swagger API 提供的 @APIImplicitParams 注解来列出 MultiValueMap 的所有表单元素，并在 MultiValueMap 本身上使用 @APIignore。尝试以下代码行中的某些内容是否有效。祝你好运。:)

```
@ApiOperation(value = "Create a new 'Student' object")
@ApiImplicitParams({
      @ApiImplicitParam(name = "X-ClientId", value = "X-ClientId", required = true, dataType = "String", paramType = "header"),
      @ApiImplicitParam(name = "id", value = "Enter an ID for the student.", dataTypeClass = String.class, paramType = "query"),
      @ApiImplicitParam(name = "name", value = "Enter a Name for the Student.", dataTypeClass = String.class, paramType = "query")
  })
  ResponseEntity addStudent(
      @NotBlank @RequestHeader(value = X_CLIENTID) String headerXclient,
      @ApiIgnore @RequestParam MultiValueMap<String, String> requestParams) {
          StudentRequest request = new StudentRequest(requestParams);

          (... Your Code Implementation ...)
      }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T15:43:58.627

目前不支持，但正如 Eyal 所说，在 github 问题中有一张票，它可能相当容易实现。

# javascript - 如何将事件处理程序存储在单独的文档中

> ID：14295280
> 
> 赞同：1
> 
> 时间：2013-01-12T16:19:51.000
> 
> 标签：javascript

我正在使用此 JavaScript 代码从[A List Apart](http://www.alistapart.com/articles/alternate/)更改样式表。

代码如下所示：

```
function setActiveStyleSheet(title) {
  var i, a, main;
  for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("rel").indexOf("style") != -1 && a.getAttribute("title")) {
      a.disabled = true;
      if(a.getAttribute("title") == title) a.disabled = false;
    }
  }
}

function getActiveStyleSheet() {
  var i, a;
  for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("rel").indexOf("style") != -1 && a.getAttribute("title") && !a.disabled) return a.getAttribute("title");
  }
  return null;
}

function getPreferredStyleSheet() {
  var i, a;
  for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("rel").indexOf("style") != -1
       && a.getAttribute("rel").indexOf("alt") == -1
       && a.getAttribute("title")
       ) return a.getAttribute("title");
  }
  return null;
}

function createCookie(name,value,days) {
  if (days) {
    var date = new Date();
    date.setTime(date.getTime()+(days*24*60*60*1000));
    var expires = "; expires="+date.toGMTString();
  }
  else expires = "";
  document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
  var nameEQ = name + "=";
  var ca = document.cookie.split(';');
  for(var i=0;i < ca.length;i++) {
    var c = ca[i];
    while (c.charAt(0)==' ') c = c.substring(1,c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
  }
  return null;
}

window.onload = function(e) {
  var cookie = readCookie("style");
  var title = cookie ? cookie : getPreferredStyleSheet();
  setActiveStyleSheet(title);
}

window.onunload = function(e) {
  var title = getActiveStyleSheet();
  createCookie("style", title, 365);
}

var cookie = readCookie("style");
var title = cookie ? cookie : getPreferredStyleSheet();
setActiveStyleSheet(title); 
```

现在，在该站点上，建议将此代码添加到您想要链接的 HTML 中：将样式更改为默认值 我尝试使用它，它工作正常。

但我想将我的事件处理程序放在一个单独的文档中，所以我改用它：

```
<head>

<link href="default.css" rel="stylesheet" type="text/css" />
<link href="theme1.css" title="theme1" rel="stylesheet" type="text/css" />
<link href="theme2.css" title="theme2" rel="stylesheet" type="text/css" />
<link href="theme3.css" title="theme3" rel="stylesheet" type="text/css" />

</head>

<body

<ul id="dropdown">
<li> Choose theme
    <ul> 
        <li id="stylesheet1" > <a href="#"> Default </a></li>
        <li id="stylesheet2" > <a href="#"> Theme 1 </a></li>
        <li id="stylesheet3" > <a href="#"> Theme 2 </a></li>
        <li id="stylesheet4" > <a href="#"> Theme 3 </a></li>
    </ul>
 </li> 

</body> 
```

将此添加到我的 javascript.js 文件中：

```
function initate()
{
var style1 = document.getElementById("stylesheet1");
var style2 = document.getElementById("stylesheet2");
var style3 = document.getElementById("stylesheet3");
var style4 = document.getElementById("stylesheet4");

style1.onclick = function () { 
    setActiveStyleSheet("default.css"); 
    return false;
    };
style2.onclick = function () { 
    setActiveStyleSheet("theme1.css"); 
    return false;
    };
style3.onclick = function () { 
    setActiveStyleSheet("theme2.css"); 
    return false
    };
style4.onclick = function () { 
    setActiveStyleSheet("theme3.css"); 
    return false
    };          
}

window.onload = initate; 
```

但由于某种原因，这不起作用，我不知道为什么。现在的方式，我的`default.css`和`theme1.css`被加载的，当我按下列表中的任何按钮时`theme1.css`被禁用，当我按下任何其他按钮时没有任何其他反应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T11:36:54.927

该函数`setActiveStyleSheet`采用`title`as 参数。

这是工作代码：

**HTML**

```
<head>

<link href="default.css" title="default" rel="stylesheet" type="text/css" />
<link href="theme1.css" title="theme1" rel="stylesheet" type="text/css" />
<link href="theme2.css" title="theme2" rel="stylesheet" type="text/css" />
<link href="theme3.css" title="theme3" rel="stylesheet" type="text/css" />

</head> 
```

**Javascript**

```
style1.onclick = function () { 
    setActiveStyleSheet("default"); 
    return false;
    };
style2.onclick = function () { 
    setActiveStyleSheet("theme1"); 
    return false;
    };
style3.onclick = function () { 
    setActiveStyleSheet("theme2"); 
    return false
    };
style4.onclick = function () { 
    setActiveStyleSheet("theme3"); 
    return false
    };          
} 
```

# python - 将 Gtk.Window 传递给一个类？

> ID：14295286
> 
> 赞同：0
> 
> 时间：2013-01-12T16:20:24.740
> 
> 标签：python, python-3.3

我正在使用 GObject 内省学习 Python 3 和 Glade 中的界面设计，但我不明白如何将另一个变量（或类？）传递给另一个类，如下所示：

```
from gi.repository import Gtk

class DemoWindow(Gtk.Window): 
```

class() 和 class 之间有什么区别 - class() 是否启动`__init__`函数，而 class 用于引用其他函数，例如`class.function()`？

是否可以将变量传递给一个类并在其他函数中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:01:46.837

该语法`class MyClassName(SomeOtherClassName):`定义了一个名为的类，该类`MyClassName`继承自（以前存在的）类`SomeOtherClassName`。所以在你的例子中`DemoWindow`继承自 class `Gtk.Window`。

> class() 和 class 有什么区别

`MyClassName(args)`创建`MyClassName`该类的新对象并使用参数调用其`__init__`方法`args`。不通过对象`MyClassName.my_function()`调用，即不会隐式传递任何参数（除非被定义为类方法）。`my_function``self``my_function`

> 是否可以将变量传递给一个类并在其他函数中使用它？

当然。只需让`__init__`函数将其作为参数，然后将其设置为`self`. 然后该类的其他方法可以通过`self`.

# php - 如何允许 Windows Server 上的 MySQL 进行外部远程访问？

> ID：14295287
> 
> 赞同：3
> 
> 时间：2013-01-12T16:20:29.330
> 
> 标签：php, mysql, windows-server-2008-r2

我已经在我的 Windows Server 2008 R2 上安装了 xampp。我在那里运行一个脚本来存储我一天的数据。现在我想通过 mysql_connect("hostname","username","pw") 连接数据库从我自己的计算机或外部检索数据。经过一些研究，我被告知我必须表扬

```
> [...]
> #bind-address = 127.0.0.1
> #skip-networking 
  [...] 
```

在 /etc/mysql/my.cnf

在 mysql 中没有找到 my.cf 文件，但在 xampp/mysql/bin/my.ini 中找到了一个。但是当我打开文件时，我发现这些行甚至被评论了所以没有改变任何东西......奇怪。

然后我被告知要创建一个主机设置为 % 的新用户。所以我做了。现在我试图在我的电脑（xampp）上访问数据库，但是当我想连接数据库时，我只是收到错误消息，即连接失败。错误在哪里？

谢谢

编辑：

这就是howi完全连接

```
$connection=mysql_connect("hostname","usrname","password")or die(mysql_error());
mysql_select_db("dbname")or die(mysql_error()); 
```

我得到的错误信息是德语，你可以翻译。

警告：mysql_connect(): Ein Verbindungsversuch ist fehlgeschlagen, da die Gegenstelle nach einer bestimmten Zeitspanne nicht Richtig reagiert hat, oder die hergestellte Verbindung war fehlerhaft, da der verbundene Host nicht reagiert hat。在第 4 行的 C:\xampp\htdocs\tickerdata\get.php

仅仅意味着连接失败，因为远程在特定时间段内没有反应或连接失败，因为主机没有反应......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T14:41:16.870

如果不能远程连接到服务器，但是可以本地连接，要么需要在防火墙中打开 3306 端口，要么从远程 IP 授予用户权限。

该端口应在 windows 防火墙以及**路由器防火墙**中打开。您的路由器需要将端口转发到 2008R2 服务器。

在 2008R2 防火墙中打开端口：

[http://www.2x.com/blog/2010/04/tech/configuring-the-windows-server-2008-r2-firewall-to-open-ports-for-2x-solutions/](http://www.2x.com/blog/2010/04/tech/configuring-the-windows-server-2008-r2-firewall-to-open-ports-for-2x-solutions/)

授予用户对 IP 的权限：

```
GRANT ALL ON foo.* TO bar@'255.255.255.255' IDENTIFIED BY 'PASSWORD'; 
```

请记住，在 MySQL 中可能有重复的用户名，如果您没有使用 UNIQUE 用户名创建新用户，那么您可能会获得被监禁到 localhost 的用户的权限

# bash - Debian 搜索可用软件包 - 未排序列表

> ID：14295289
> 
> 赞同：1
> 
> 时间：2013-01-12T16:20:51.527
> 
> 标签：bash, shell, scripting, debian, packages

有没有办法获取可用软件包的列表（可以安装），但要使输出未排序？我试过 apt-cache search，但它对输出进行排序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:48:35.137

我可能有错，因为我应该说“apt 知道的包”。答案是 apt-cache pkgnames。

# c# - WPF 中的动画序列与 BeginAnimation

> ID：14295291
> 
> 赞同：1
> 
> 时间：2013-01-12T16:20:58.117
> 
> 标签：c#, wpf, animation, graphics

我正在尝试使用 WPF 为 3D 中的一些旋转设置动画，如果我手动触发它们（点击时）一切都很好，但如果我计算应该在 Viewport3D 上进行的运动，所有动画似乎同时消失。

计算运动的代码如下：

```
for(int i=0; i<40; i++){
    foo(i);
} 
```

看起来`foo(int i)`像：

```
//compute axis, angle
AxisAngleRotation3D rotation = new AxisAngleRotation3D(axis, angle);
RotateTransform3D transform = new RotateTransform3D(rotation, new Point3D(0, 0, 0));
DoubleAnimation animation = new DoubleAnimation(0, angle, TimeSpan.FromMilliseconds(370)); 

rotation.BeginAnimation(AxisAngleRotation3D.AngleProperty, animation); 
```

`axis`和的计算`angle`不是耗时的简单属性，所以我猜问题是所有动画都会触发下一帧，因为当当前帧“结束”时计算已经完成。

如何在代码（不是 XAML）中按顺序显示这些动画，而不是一次全部显示？

PS：一切都在 C# 中，没有 XAML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:55:25.750

您可以将多个动画添加到[Storyboard](http://msdn.microsoft.com/en-us/library/ms634711.aspx)，并将每个动画的[BeginTime](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.timeline.begintime.aspx)设置为之前动画的持续时间之和：

```
var storyboard = new Storyboard();
var totalDuration = TimeSpan.Zero;

for (...)
{
    var rotation = new AxisAngleRotation3D(axis, angle);
    var transform = new RotateTransform3D(rotation, new Point3D(0, 0, 0));
    var duration = TimeSpan.FromMilliseconds(370);
    var animation = new DoubleAnimation(0, angle, duration);

    animation.BeginTime = totalDuration;
    totalDuration += duration;

    Storyboard.SetTarget(animation, rotation);
    Storyboard.SetTargetProperty(animation, new PropertyPath(AxisAngleRotation3D.AngleProperty));

    storyboard.Children.Add(animation);
}

storyboard.Begin(); 
```

请注意，我还没有测试上面的代码，所以很抱歉有任何错误。

* * *

或者您创建动画的方式是，每个动画（从第二个动画开始）都在前一个动画的[Completed处理程序中启动。](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.timeline.completed.aspx)

# ruby-on-rails - 耙中止！无法批量分配受保护的属性：authentication_token

> ID：14295292
> 
> 赞同：0
> 
> 时间：2013-01-12T16:21:12.057
> 
> 标签：ruby-on-rails

我已经发现一些人修复了这个问题，修改了 attr_accessible 但我认为这个错误可能出在 gem rake 本身？

```
rake --trace db:seed 
```

-- 日志输出开始 --

```
** Invoke db:seed (first_time)
** Execute db:seed
** Invoke db:abort_if_pending_migrations (first_time)
** Invoke environment (first_time)
** Execute environment
** Invoke db:load_config (first_time)
** Execute db:load_config
** Execute db:abort_if_pending_migrations
rake aborted!
Can't mass-assign protected attributes: authentication_token
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/activemodel-3.2.8/lib/active_model/mass_assignment_security/sanitizer.rb:48:in `process_removed_attributes'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/activemodel-3.2.8/lib/active_model/mass_assignment_security/sanitizer.rb:20:in `debug_protected_attribute_removal'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/activemodel-3.2.8/lib/active_model/mass_assignment_security/sanitizer.rb:12:in `sanitize'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/activemodel-3.2.8/lib/active_model/mass_assignment_security.rb:230:in `sanitize_for_mass_assignment'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.8/lib/active_record/attribute_assignment.rb:75:in `assign_attributes'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.8/lib/active_record/base.rb:498:in `initialize'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.8/lib/active_record/persistence.rb:44:in `new'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.8/lib/active_record/persistence.rb:44:in `create'
/Users/devx/passbook_rails_example/db/seeds.rb:1:in `<top (required)>'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `load'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `block in load'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:236:in `load_dependency'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:245:in `load'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/railties-3.2.8/lib/rails/engine.rb:520:in `load_seed'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/activerecord-3.2.8/lib/active_record/railties/databases.rake:309:in `block (2 levels) in <top (required)>'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/Users/devx/.rvm/rubies/ruby-1.9.3-p362/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/bin/rake:19:in `load'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/bin/rake:19:in `<main>'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in `eval'
/Users/devx/.rvm/gems/ruby-1.9.3-p362/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => db:seed 
```

-- 日志输出结束 --

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T16:28:23.523

正如您所说，这与 rake 完全无关，这是一个`MassAssignment`问题，可以通过修改`attr_accessible`相关模型来修复。

这里实际发生的是尝试创建模型（我猜）`seed`执行的任务，并且似乎给出的哈希参数包含一个键，它应该如下所示：`rake``User``User.create``authentication_token`

```
User.create name: 'foo', email: 'mail@bar.com', authentication_token: 'qfgsdgf' ... 
```

但是您的模型在其列表`User`中没有，所以这就是为什么它在尝试创建.`:authentication_token``attr_accessible``User`

如果您在遇到问题时只需要警告而不是异常`MassAssignment`，则可以更改配置：

在 config/environment/{development,test,production}.rb

```
config.active_record.mass_assignment_sanitizer = :strict 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T02:36:13.650

只需将 authentication_token 添加到 attr_accessible 例如：我得到的错误

```
Media1s-Mac-mini:rails_apps media1$ rake clipsfree_import RAILS_ENV=development csvfile=/Users/media1/Desktop/clips/atemp5/demotracks2/import.csv
rake aborted!
Can't mass-assign protected attributes: title
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.11/lib/active_model/mass_assignment_security/sanitizer.rb:48:in `process_removed_attributes'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.11/lib/active_model/mass_assignment_security/sanitizer.rb:20:in `debug_protected_attribute_removal'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.11/lib/active_model/mass_assignment_security/sanitizer.rb:12:in `sanitize'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/activemodel-3.2.11/lib/active_model/mass_assignment_security.rb:230:in `sanitize_for_mass_assignment'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.11/lib/active_record/attribute_assignment.rb:75:in `assign_attributes'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.2.11/lib/active_record/base.rb:497:in `initialize'
/Users/media1/Desktop/rails_apps/lib/tasks/clipsfree_import.rake:14:in `new'
/Users/media1/Desktop/rails_apps/lib/tasks/clipsfree_import.rake:14:in `block (2 levels) in <top (required)>'
/Users/media1/Desktop/rails_apps/lib/tasks/clipsfree_import.rake:5:in `each'
/Users/media1/Desktop/rails_apps/lib/tasks/clipsfree_import.rake:5:in `block in <top (required)>'
Tasks: TOP => clipsfree_import
(See full trace by running task with --trace) 
```

解决方案：在models文件夹的loopsfree.rb中为attr_accessible添加属性title

类 Loopsfree < ActiveRecord::Base attr_accessible :ISRC, **:title,** :artist, :bpm, :file_name, :genre, :id, :sub_genre end

希望这会有所帮助:) 快乐编码

# javascript - 如何删除括号并计算它们？

> ID：14295298
> 
> 赞同：1
> 
> 时间：2013-01-12T16:21:54.673
> 
> 标签：javascript, regex

我有一个这样的字符串：`(((foo)))`

我想从这样的字符串中获取一个对象：`{"text":"foo", "brackets" : 3}`

这怎么可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T16:26:05.820

它不一定是最好的解决方案，但是一个正则表达式来匹配多个`(`with `(\(+)`，然后是直到`)`with的所有内容`([^)]+)`，然后是多个`)`with`(\)+)`是非常容易的。这将允许您在构建对象之前验证括号是否平衡。

```
var s = '(((foo)))';
var parts = s.match(/^(\(+)([^)]+)(\)+)$/);
// ["(((foo)))", "(((", "foo", ")))"]

// If the start and end match, preventing something like `(((foo)` with unbalanced ()
// and the total length of the extracted array is 4
if (parts.length === 4 && parts[1].length === parts[3].length) {
  // Your result is:
  var yourResultObj = {
    "text": parts[2],
    "brackets": parts[1].length
  }
} 
```

所有这些也可以通过字符串处理来完成，但正则表达式代码可能更清晰易读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T16:27:56.087

假设你总是有相同数量的左括号和右括号，你可以这样做来计算它们：

```
var myString = '(((foo)))';
var parens = (mainStr.split("(").length - 1); // 3 
```

并删除它们：

```
var obj = {parens: parens, text: myString.substr(parens, myString.length - parens)}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T16:41:48.173

如果您假设每个左括号都在计数，那么您可以拥有这样的功能。

```
function makeStringObject(str) {
    var parts = str.split('(');
    return {
        'text': parts[parts.length-1].split(')')[0],
        'brackets': parts.length-1
    }
} 
```

# c++ - wxWidgets OpenGL着色器，绘制任何东西都麻烦

> ID：14295299
> 
> 赞同：0
> 
> 时间：2013-01-12T16:21:58.553
> 
> 标签：c++, opengl, wxwidgets

我一直在尝试将着色器和 OpenGL 合并到 wxWidgets 程序中。我使用了以下链接：

[http://nehe.gamedev.net/article/glsl_an_introduction/25007/](http://nehe.gamedev.net/article/glsl_an_introduction/25007/)

[http://www.lighthouse3d.com/tutorials/glsl-tutorial/hello-world-in-glsl/](http://www.lighthouse3d.com/tutorials/glsl-tutorial/hello-world-in-glsl/)

现在我一直在测试程序中尝试使用 lighthouse3d 教程提供的着色器并重新创建输出（一个蓝色茶壶在白色背景上缓慢旋转）。我似乎无法画出任何东西，我只能看到黑屏。到目前为止，我的代码如下，（我将首先忽略大多数着色器，因为我 99% 确定它们没问题）：

```
void BasicGLPane::render( wxPaintEvent& evt )
{
    //wxGLCanvas::SetCurrent(*m_context);
    wxPaintDC(this); 
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    //prepare2DViewport(0,0,getWidth()/2, getHeight());
    glLoadIdentity();
    gluLookAt(0.0,0.0,5.0, 
          0.0,0.0,-1.0,
          0.0f,1.0f,0.0f);

    glLightfv(GL_LIGHT0, GL_POSITION, lpos);
    //glRotatef(a,0,1,1);
    glutSolidTeapot(1);
    glFlush();
    //a+=0.1;

    SwapBuffers();
}

void BasicGLPane::InitializeGLEW()
{
    //prepare2DViewport(0,0,getWidth(), getHeight());
    // The current canvas has to be set before GLEW can be initialized.
    wxGLCanvas::SetCurrent(*m_context);
    GLenum err = glewInit();

    // If Glew doesn't initialize correctly.
    if(GLEW_OK != err)
    {
        std::cerr << "Error:" << glewGetString(err) << std::endl;
        const GLubyte* String = glewGetErrorString(err);
        wxMessageBox("GLEW is not initialized");
    }

BasicGLPane::BasicGLPane(wxFrame* parent, int* args) :
wxGLCanvas(parent, wxID_ANY, args, wxDefaultPosition, wxDefaultSize, wxFULL_REPAINT_ON_RESIZE)
{

    m_context = new wxGLContext(this);

    // To avoid flashing on MSW
    SetBackgroundStyle(wxBG_STYLE_CUSTOM);
} 
```

我已经想过为什么我没有得到任何输出。我的一个想法与 m_context 有关。在运行 GLEW 之前，我必须为 WxWidgets 设置当前上下文。**教程**中还有许多属性被初始化，我没有在我的 wxWidgets 版本中使用这些函数，我想知道我是否应该这样做。这些是：

```
glutInit(&argc, argv);
glutInitDisplayMode(GLUT_DEPTH | GLUT_DOUBLE | GLUT_RGBA);
glutInitWindowPosition(100,100);
glutInitWindowSize(320,320);
glutCreateWindow("MM 2004-05");

glutDisplayFunc(renderScene);
glutIdleFunc(renderScene);
glutReshapeFunc(changeSize);
glutKeyboardFunc(processNormalKeys);

glEnable(GL_DEPTH_TEST);
glClearColor(1.0,1.0,1.0,1.0);
glEnable(GL_CULL_FACE); 
```

但我非常热衷于避免使用过剩，并且直到现在都设法避免它。我之前添加它的唯一原因是尝试复制教程的行为。

编辑：

我要补充一点，因为我注意到一两个奇怪的行为。如果我在我的画中调用这个函数：

```
void BasicGLPane::prepare2DViewport(int topleft_x, int topleft_y, int bottomrigth_x, int bottomrigth_y)
{
    glClearColor(1.0f, 1.0f, 1.0f, 1.0f); // Black Background
    glEnable(GL_TEXTURE_2D);   // textures
    glEnable(GL_COLOR_MATERIAL);
    glEnable(GL_BLEND);
    glDisable(GL_DEPTH_TEST);
    glBlendFunc(GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA);

    glViewport(topleft_x, topleft_y, bottomrigth_x-topleft_x, bottomrigth_y-topleft_y);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    gluOrtho2D(topleft_x, bottomrigth_x, bottomrigth_y, topleft_y);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
} 
```

当我改变窗口大小时，我可以让背景改变颜色。我还应该提到，它不会刷新每一帧，它只绘制一帧，然后在我更改窗口大小之前不会再次调用渲染函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T15:50:09.980

事实证明，我的渲染中不需要 gluLookAt。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:48:53.043

到目前为止，您的代码看起来不错。您在很多教程中发现的一件事，但不好的做法是，显然发生了一些初始化。不是这种情况。OpenGL 未初始化，它是一个状态机，您应该在需要时设置状态。线条

```
glEnable(GL_DEPTH_TEST);
glClearColor(1.0,1.0,1.0,1.0);
glEnable(GL_CULL_FACE); 
```

对绘图功能非常满意。您还需要设置投影。在教程中，您经常会发现它们是在窗口调整大小处理程序中设置的。请不要养成这个坏习惯。投影和视口是绘图状态，所以在绘图函数中设置它们。

如果您使用的是 OpenGL-3（核心配置文件）或更高版本，您必须至少提供一个顶点**和**一个片段着色器。在旧版本中，每个着色器阶段都是可选的，并且有内置变量为固定功能和可编程管道之间的通信提供公共基础。但是我强烈建议不要混合操作。始终使用着色器并同时使用顶点和片段着色器。从长远来看，它们使事情变得容易得多。

# c# - 'System.Collections.Generic.List ' 不包含 'Sum' 的定义

> ID：14295301
> 
> 赞同：15
> 
> 时间：2013-01-12T16:22:03.903
> 
> 标签：c#, list, sum

我正在尝试对具有内置`Sum()`函数的浮点数列表求和，但我不断收到此错误：

> 错误 CS1061：“System.Collections.Generic.List”不包含“Sum”的定义，并且找不到接受“System.Collections.Generic.List”类型的第一个参数的扩展方法“Sum”（您是否缺少using 指令还是程序集引用？）（CS1061）

我有

```
using System.Collections;
using System.Collections.Generic; 
```

在文件的开头：

代码 ：

```
List<float> x = new List<float>();
x.add(5.0f);
//..
float f = x.Sum(); 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-01-12T16:22:50.877

您需要添加到您的`using`指令：

```
using System.Linq; 
```

此外，您的代码在语法上是错误的。这是工作版本：

```
var x = new List<float>();
x.Add(5.0f);
var f = x.Sum(); 
```

# api - CakePHP - REST API - Api id/秘密认证

> ID：14295303
> 
> 赞同：2
> 
> 时间：2013-01-12T16:22:25.130
> 
> 标签：api, rest, cakephp, cakephp-2.0

我们有一个大型高流量网站，上面有很多数据（类似于 Kickstarter），我们希望为我们的内容/项目创建者提供一种通过 API 从我们的网站提取数据的方法。

有人建议我使用 OAuth，但是我使用 OAuth 的经验仅限于设置 twitter 数据源。

**我想做的事**

*   为用户提供应用程序 ID 和“秘密”
*   允许此用户通过 api 端点连接到我们的应用程序，使用 api ID 和密钥授权自己
*   验证后，允许此用户仅从应用程序中提取他们的数据
*   用户可以提取的数据：他们投的票、他们所做的承诺、他们所做的购买、他们启动的项目/想法、关于这些项目/想法的数据（投票/购买/订单/取消等）

我的问题是：

> OAuth 是否矫枉过正？

是否有更好的方法来处理用户/用户网站以连接到我们的 API 并使用我们提供的 API 提取/验证某些数据，同时要求每个传入请求都为发起该请求的用户/站点授权。

理想情况下，我们将有一个可以通过以下方式访问的端点：

```
https://api.oursite.com/request/params 
```

对于希望实现此接口的用户，我们希望它尽可能简单。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:07:18.733

通常它是 OAuth，结合 SSL。这是标准，很可能会继续存在。之前我们还看到登录：用户名 + 密码来访问 API，但这种情况越来越少。

所以建议的方式是OAuth。目前还没有其他严肃的解决方案。为了更容易采用您的 API，您可以使用某些开发语言发布一些类，以便开发人员可以快速入门。您可以开始在例如 GitHub 上发布这些类，以提高 API 的采用率并快速访问开发人员。如果你做得好，他们甚至可能开始改进它。

# android - 带有许多活动的滑动菜单

> ID：14295304
> 
> 赞同：3
> 
> 时间：2013-01-12T16:22:29.587
> 
> 标签：android, facebook, facebook-like, android-side-navigation

有许多类似 facebook 应用程序的滑动菜单的实现，在[那个问题](https://stackoverflow.com/questions/8657894/android-facebook-style-slide)中提到了。

其中一些，我检查过的实现，正在使用一个活动来显示菜单和数据。当用户从菜单中选择项目时，不会启动新的活动。因此，一个活动用于程序的许多部分，在一个视图中显示不同的数据。

恕我直言，为所有人使用一项活动可能会很混乱。所以，我正在考虑新的计划：

*   为所有活动添加菜单；
*   当用户在菜单中选择项目时，关闭（弹出/隐藏）当前活动并启动（推送/显示）与所选项目相关的活动。

有什么想法可以实现这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:28:52.577

我懒得通读上述线程中的所有答案并检查所有提供的库。

[SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)是一个很好的与 Fragments 一起工作的滑动菜单库

您还应该查看有关活动、意图（您可以设置给它们的标志）的文档以及它们的生命周期是如何管理的，因为您似乎混淆了一些东西。

# sql - sql 函数列不适用于 where 子句

> ID：14295306
> 
> 赞同：1
> 
> 时间：2013-01-12T16:22:36.010
> 
> 标签：sql

我有一个查询：

```
SELECT ROW_NUMBER() OVER(ORDER BY LogId) AS RowNum 
FROM [Log] l
where RowNum = 1 
```

我收到以下错误：

> *列名“RowNum”无效。*

我在这里做了一些搜索，发现列别名在 WHERE 中不可用。

所以我尝试了以下方法并且它有效：

```
select * 
from 
(
     SELECT ROW_NUMBER() OVER(ORDER BY LogId) AS RowNum 
     FROM [Log] l
) as t
where t.RowNum = 1 
```

从性能的角度来看，是否有更好的方法来进行此查询？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T16:35:31.437

就是那样子。

列别名不能在定义它们的同一逻辑级别上使用。如您所见，您将不得不使用派生表（子查询）。

如果您担心性能，请不要。派生表只是语法糖，它不会使查询变慢（与您首先尝试的解决方案相比）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T16:42:01.733

此特定查询的替代方法，它不会执行任何不同但更易于编写：

```
SELECT TOP 1 <col list> FROM dbo.[Log] ORDER BY LogId; 
```

正如@a_horse 解释的那样，不要担心，因为您的第二个查询看起来像更多代码，它更昂贵。如果要衡量获得相同结果的不同查询的效率，请比较它们的执行计划，而不是代码复杂度。

# nssortdescriptor - KVC 使用 MagicalRecord 排序

> ID：14295309
> 
> 赞同：2
> 
> 时间：2013-01-12T16:22:45.327
> 
> 标签：nssortdescriptor, magicalrecord, kvc

`KVC`直到现在我都用来访问对象的属性。

在我的对象中，我有一个这样的方法：

```
-(Address *)mainAddress {
    if (self.addresses != nil) {
        return [self.addresses anyObject]; //stub method
    }
    else {
        return nil;
    }
} 
```

我可以使用这种`KVC`方法

```
mystring = [cliente valueForKeyPath:@"mainAddress.city"]; 
```

但我不能用来创建`NSFetchRequestController`（此代码使用 MagicalRecord）

```
NSFetchedResultsController *acontroller = [Customer fetchAllSortedBy:@"mainAddress.city" ascending:ascending withPredicate:companyPredicate groupBy:nil delegate:self]; 
```

这是错误：

```
 *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'keypath mainAddress.city not found in entity <NSSQLEntity Customer id=4>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T00:40:31.170

为了使用 NSFetchedResultsController 进行排序，你的 mainAddress keyPath 需要是你实体的一个属性。NSFRC 将不使用内存中的 KVC，而是使用底层数据存储对数据进行排序。底线答案：使 mainAddress 在数据模型中的实体上成为一个字段。

# google-analytics - 适用于 Dev 与 Prod 的 Google Analytics（分析）标签

> ID：14295311
> 
> 赞同：1
> 
> 时间：2013-01-12T16:23:02.267
> 
> 标签：google-analytics

我在网站上运行标准的谷歌分析跟踪代码（ga.js 异步版本）。我想知道是否有一行 js 可以添加到跟踪代码中，以便我可以隔离开发/产品数据？例如，当我拉入代码库进行开发工作时，我可以将标签设置为 DEV。重新发布到生产环境时，DEV 标签被替换为 PROD 标签。

这甚至可能吗？如果可以，我该如何实施？

我想到的一种方法是创建一个新的“属性”（这将生成一个新的 ua 编号，我可以在开发期间添加它。这将允许我单独跟踪它。）

想知道是否还有其他我应该考虑的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T04:37:52.483

迈克答案的替代方法是根据 url 或域或基于任意数量的其他内容在您的个人资料中设置过滤器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T18:26:37.763

我不担心从我的开发服务器收集数据，但我确实想确保我没有污染我的生产数据——我一直在使用以下一些变体：

```
if (!/devServer|localhost/.test(window.location.hostname))
{
    _gaq.push(['_setAccount', 'UA-11111111-1']);
} 
```

在 devserver 域（或本地主机）上，`_setAccount`不会执行，因此跟踪器默认为默认跟踪器，`UA-99999999-1`. 这使您仍然可以看到发送到分析服务器的跟踪数据（通过 ga_debug.js、chrome 开发工具、firebug、fiddler 等），但不会针对您的生产配置文件注册。

缺点——它是在客户端上运行的额外代码。

如果您确实想要从开发服务器进行分析，您可以尝试以下操作：

```
gaq.push(
    [ '_setAccount', 
      /devServer|localhost/.test(window.location.hostname) ? 'UA-11111111-1', 
    'UA-22222222-1']
); 
```

# mysql - 错误 Delphi / MySQL / 参数

> ID：14295316
> 
> 赞同：1
> 
> 时间：2013-01-12T16:23:38.930
> 
> 标签：mysql, sql, delphi, parameters

好吧，情况是：我有 1 个名为cboTipDocIden 的**TComboBox**和 1 个名为**txtDocIdenSolic**的 TEdit 。

cboTipDocIden 的值为：`"1.DNI","2.RUC"`。

该组件`TUniQuery`称为**q_DetSolicitante**。

SQL 语句目标是：

```
SELECT oper_solicitante.id_solicitante, oper_solicitante.ape_pat, oper_solicitante.ape_mat,
       oper_solicitante.nombre, oper_solicitante.direcc_idtipcalle, oper_solicitante.direcc_nombrecalle,
       oper_solicitante.direcc_nro, oper_solicitante.idvinculo_fk
FROM oper_solicitante
WHERE oper_solicitante.tipDocIden = :TipDocIden AND
      oper_solicitante.nroDocIden = :NroDocIden 
```

SQL 在**txtDocIdenSolic**`OnExit`事件上执行，代码如下：

 **```
procedure TForm1.txtDocIdenSolicExit(Sender: TObject);
var
  TipDocIden, NroDocIden:string;
begin
  if(length(txtDocIdenSolic.Text)>0) then
  begin
    TipDocIden:=chr(39)+copy(cboTipDocIden.Text,1,1)+chr(39);
    NroDocIden:=chr(39)+trim(txtDocIdenSolic.Text)+chr(39);
    q_DetSolicitante.Close;
    q_DetSolicitante.Params[0].AsString:=TipDocIden;
    q_DetSolicitante.Params[1].AsString:=NroDocIden;
    q_DetSolicitante.Open;

    if(length(q_DetSolicitante.FieldByName('id_solicitante').AsString)=0) then
    begin
      stbar.Panels[0].text:='Nuevo Solicitante...';
      txtApePat.SetFocus;
    end
    else
    begin
      stbar.Panels[0].Text:='Solicitante Reiterativo...';
      txtApePat.Text:=q_DetSolicitante.FieldByName('ape_pat').AsString;
      txtApeMat.Text:=q_DetSolicitante.FieldByName('ape_mat').AsString;
      txtNombre.Text:=q_DetSolicitante.FieldByName('nombre').AsString;
    end;
  end
  else
    msg1.Execute;
end; 
```

最后，表结构为：

```
CREATE TABLE `oper_solicitante` (
  `id_solicitante` int(11) NOT NULL,
  `tipDocIden` char(1) NOT NULL,
  `nroDocIden` varchar(11) NOT NULL,
  `ape_pat` varchar(50) NOT NULL,
  `ape_mat` varchar(50) NOT NULL,
  `nombre` varchar(50) NOT NULL,
  `direcc_idtipcalle` int(11) NOT NULL,
  `direcc_nombrecalle` varchar(80) NOT NULL,
  `direcc_nro` varchar(15) NOT NULL,
  `idvinculo_fk` int(11) NOT NULL,
  PRIMARY KEY (`id_solicitante`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

好吧，SQL 在 Delphi 中返回零行，但是当我更改文字值的参数时，SQL 可以工作。

感谢您的有用帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:12:34.817

删除`chr(39)`参数值周围的字符。Using`Params[].AsString`允许数据库驱动程序正确引用它们，并且您正在添加（加倍）它们，从而导致查询失败。

```
TipDocIden:= copy(cboTipDocIden.Text,1,1);
NroDocIden:= trim(txtDocIdenSolic.Text);
q_DetSolicitante.Close;
q_DetSolicitante.Params[0].AsString := TipDocIden;
q_DetSolicitante.Params[1].AsString := NroDocIden;
q_DetSolicitante.Open; 
```**

# java - 如何将谷歌分析数据导入 gwt 应用程序？

> ID：14295320
> 
> 赞同：0
> 
> 时间：2013-01-12T16:24:35.563
> 
> 标签：java, gwt, google-analytics, google-analytics-api

嗨，我受 Google Analytics 和我的 GWT 应用程序链接的困扰好几天了。‎ 在我的应用程序中，我需要从 Google Analytics 接收数据处理（例如访问者数量）。‎ 可能示例和库很旧（我认为）

我的问题，我如何解决接管数据？我附上我的代码，看看我是否刺伤了什么。谢谢你的回答！

```
private static void getAccounts(String accountsFeedUri) {
    System.out.println("Most fogja az acc bejegyzeseit lekerdezni");// debug

    service.getAccountFeed(accountsFeedUri, new AccountFeedCallback() {

        @Override
        public void onSuccess(AccountFeed result) {

            System.out
                    .println("Sikerült lekérdezni az account bejegyzéseit");// debug
            AccountEntry[] entries = result.getEntries();
            System.out.println("Megy a lekérdezés");// debug
            AccountEntry targetEntry = entries[0];
            queryData(targetEntry.getTableId().getValue());
            if (entries.length == 0) {
                System.out.println("Nincs ga accod");// debug
            } else {
                System.out.println("Megy a lekérdezés");// debug
                // AccountEntry targetEntry = entries[0];
                queryData(targetEntry.getTableId().getValue());
            }
        }

        @Override
        public void onFailure(CallErrorException caught) {
            // TODO Auto-generated method stub
            // caught.printStackTrace();
            System.out.println(caught.getError());
            System.out
                    .println("Nem sikerült lekérdezni az account bejegyzéseit.");// debug
        }
    });

}

/**
 * Retrieves a data feed for an Analytics account using a Query object. In
 * GData, feed URIs can contain querystring parameters. The GData query
 * objects aid in building parameterized feed URIs. Upon successfully
 * receiving the data feed, the data entries are displayed to the user via
 * the showData method. Query parameters are specified for start and end
 * dates, dimensions, metrics, sort field and direction and the IDs of the
 * account tables which should be queried.
 * 
 * @param tableId
 *            The id of the account table for which to retrieve the
 *            Analytics data.
 */
private static void queryData(String tableId) {
    System.out.println("Adatok lekérése");// debug
    DataQuery query = DataQuery
            .newInstance("https://www.googleapis.com/auth/analytics.readonly");
    query.setStartDate("2012-07-01");
    query.setEndDate("2013-01-10");
    query.setDimensions("ga:date");
    query.setMetrics("ga:visits,ga:pageviews");
    query.setSort("ga:date");
    query.setIds(tableId);
    try {
        System.out.println("AZ adatok lekérése megtörtént");// debug

        service.getDataFeed(query, new DataFeedCallback() {

            @Override
            public void onSuccess(DataFeed result) {
                System.out.println("Ezek szerint a sikerült a datafeed");// debug
                // TODO Auto-generated method stub
                result.getEntries();

                DataEntry[] bejegyzesek = result.getEntries();
                DataEntry entry = bejegyzesek[0];
                System.out.println(entry.getStringValueOf("ga:visits"));
            }

            @Override
            public void onFailure(CallErrorException caught) {

                System.out
                        .println("Sikertelen lekérdezés, de legalább sikerült elérni a ga-t.");// debug
            }
        });

    } catch (Exception e) {
        System.err.println("Elhalt");// debug

    }
}

private static void startLekerd() {
    service = AnalyticsService.newInstance("statmodv1");

    try {
        getAccounts(ANAL_SCOPE);// google auth

    } catch (Exception e) {
        System.out.println("Mégse vagy bejelentkezve");// debug

    }

}

private static void login2() { // Use the implementation of Auth intended *
                                // to be used in the GWT client // app.
    final Auth AUTH = Auth.get();

    final AuthRequest req = new AuthRequest(GOOGLE_AUTH_URL,
            GOOGLE_CLIENT_ID).withScopes(ANAL_SCOPE);

    // Calling login() will display a popup to the user the first time it is
    // called. Once the user has granted access to the application, //
    // subsequent calls to login() will not display the popup, and will
    // immediately result in the callback being given the token to use.

    AUTH.login(req, new Callback<String, Throwable>() {

        @Override
        public void onFailure(Throwable reason) { // TODO Auto-generated
                                                    // method stub
            Window.alert("Error:\n" + reason.getMessage());
        }

        @Override
        public void onSuccess(String token) {
            if (!GData.isLoaded(GDataSystemPackage.ANALYTICS)) {
                System.out
                        .println("Loading the GData Analytics package...");
                GData.loadGDataApi(GDATA_API_KEY, new Runnable() {
                    public void run() {

                        startLekerd();
                    }
                }, GDataSystemPackage.ANALYTICS);
            }
            startLekerd();
        }

    }

    );
} 
```

# python - 哪些工具可用于为 Flask 编写的 REST API 自动生成文档？

> ID：14295322
> 
> 赞同：34
> 
> 时间：2013-01-12T16:24:48.930
> 
> 标签：python, rest, documentation, flask

我正在寻找一种从我编写的 Flask REST API 自动生成 REST API 文档的快速方法。有谁知道可以做到这一点的工具以及我将如何标记代码？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-12T17:19:12.730

我会推荐你[​​ Sphinx](http://sphinx-doc.org/)，你添加你的文档，Sphinx`__doc__`的`autodoc`模块将为你生成文档（[docs.python.org](http://docs.python.org/3/)也使用 Sphinx）。标记是[reStructuredText](http://docutils.sourceforge.net/docs/user/rst/quickref.html)，类似于 Markdown （如果你更喜欢 Markdown，你可以使用[pdoc](https://pdoc3.github.io/pdoc)）。

例如：

```
@app.route('/download/<int:id>')
def download_id(id):
    '''This downloads a certain image specified by *id*'''
    return ... 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-11-17T14:55:09.723

我真的很喜欢[Swagger](https://swagger.io/tools/swagger-ui)，因为它允许通过在代码中添加一些装饰器和注释来生成 API 文档。有一个[Flask Swagger](https://github.com/rantav/flask-restful-swagger)可用。

```
from flask import Flask
from flask.ext.restful import  Api
from flask_restful_swagger import swagger

app = Flask(__name__)
api = swagger.docs(Api(app), apiVersion='1', api_spec_url="/api/v1/spec")

class Unicorn(Resource):
"Describing unicorns"
@swagger.operation(
    notes='some really good notes'
)
def get(self, todo_id):
... 
```

然后，您只需访问 /api/v1/spec 即可在 html 界面中查看您的方法和注释（它会自动提供所需的静态）。您也可以只获取 JSON 格式的所有 API 描述，然后进行解析。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-04-16T08:44:32.130

有一个 Flask 扩展：[flask-autodoc](https://github.com/acoomans/flask-autodoc)用于自动文档，专门解析端点路由规则。您可以添加`doc`装饰器来指定要记录的 API：

```
@app.route('/doc')
@auto.doc()
def documentation():
    '''
    return API documentation page
    '''
    return auto.html()

@app.route('/')
@auto.doc()
def welcome():
    '''
    Welcome API
    '''
    commit_hash = subprocess.check_output(["git", "rev-parse", "HEAD"])
    commit_msg = subprocess.check_output(["git", "log", "-1", "--format=%s"])
    date_time = subprocess.check_output(["git", "log", "-1", "--format=%cd"])
    return "Welcome to VM Service Server. <br/>" \
           "The last commit: %s<br/>Date: %s, <br>Hash: %s" % \
           (commit_msg, date_time, commit_hash), 200 
```

简单的 html 文档页面是这样的：

![在此处输入图像描述](../Images/4b7ed7a5c33a07a65145b2cef439baaa.png)

# mono - System.Security.Cryptography.Xml 在可移植类库中？

> ID：14295324
> 
> 赞同：4
> 
> 时间：2013-01-12T16:25:02.050
> 
> 标签：mono, xamarin.ios, xamarin.android, portable-class-library, signedxml

我正在使用使用签名 XML 文件作为许可证的许可工具 (Rhino.Licensing)。

由于`System.Security.Cryptography.Xml`命名空间在各种平台（如 MonoTouch 和 Mono for Android 等）上不可用，因此无法验证许可证及其签名。

有没有办法在可移植类库平台上读取和验证签名的 XML 文件？

我目前在 .NET、Mono、MonoTouch、Mono for Android、WinRT、Silverlight、MonoGame 上需要此功能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T16:54:04.040

AFAIK（PCL 2.0 中有太多配置文件）`System.Security.dll`不是任何可移植库配置文件的一部分。

*   .NET：框架的一部分
*   Mono：框架的一部分
*   MonoTouch :**不是配置文件的一部分**
*   Mono for Android :**不是配置文件的一部分**
*   WinRT：*不确定*
*   Silverlight :**不是配置文件的一部分**
*   MonoGame : 不是配置文件 - 这将取决于它使用的配置文件

**好消息**是您可以使用 Mono 的源代码构建自己的。对于 MonoTouch 和 Mono for Android 来说，这应该很容易。

我能预见的唯一问题是 Silverlight，因为它（上次我检查）不支持 RSA 并且 Mono 的 BigInteger 实现需要**不安全**的代码（在大多数情况下也是不允许的）。OTOH，再做一些工作，您可以使用 SL 的`System.Numerics.dll`.

# mysql - 我的 MySQL 查询有什么问题？

> ID：14295325
> 
> 赞同：2
> 
> 时间：2013-01-12T16:25:24.553
> 
> 标签：mysql, sql

我为 mySQL 编写了以下查询：

```
mysql> Create table R_Matrix 
       ( 
         image_name VARCHAR(25) NOT NULL REFERENCES Images(image_name), 
         Row INT, 
         Column INT, 
         Data INT, 
         PRIMARY KEY(image_name) 
       ); 
```

其中 Images 是同一个数据库中的一个表，image_name 是其中的一个列；

但是我收到以下错误：

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“Column INT, Data INT, PRIMARY KEY(image_name))”附近使用正确的语法

我找不到查询有什么问题。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T16:26:18.873

`COLUMN`是保留关键字。必须使用反引号进行转义，

```
Create table R_Matrix 
( 
    image_name VARCHAR(25) NOT NULL REFERENCES Images(image_name), 
    Row INT, 
    `Column` INT, 
    Data INT, 
    PRIMARY KEY(image_name) 
); 
```

*   [MySQL 保留关键字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-12T22:48:19.617

最好的选择是避免使用 MySQL 保留字作为标识符。由于您正在运行`CREATE TABLE`语句，因此更改列名是最佳解决方案。（选择不同的列名；或至少在标识符末尾添加下划线。）

您的陈述的问题（正如 JW 正确指出的那样）是`COLUMN`MySQL 保留字。您的语句引发错误，因为 MySQL`Column`将语句中的标记解释为保留字，而不是列名；并且，在这种情况下，该保留字是有效的语法。

防止 MySQL 将该标识符视为保留字的一种解决方法（正如 JW 也指出的那样）是将标识符括在反引号中；或者，如果 sql_mode 设置为 ANSI，则标识符可以用双引号引起来。

# c# - 如何自动选择 ListBox 中的第一项？

> ID：14295326
> 
> 赞同：3
> 
> 时间：2013-01-12T16:25:28.420
> 
> 标签：c#, winforms

我在包含列表框的表单中有一个用户控件。我想自动选择列表框中的第一个项目（假设至少有一个项目），但我无法让以下代码工作：

```
private void Lightnings_Mode_Load(object sender, EventArgs e)
        {
            this.Size = new Size(416, 506);
            this.Location = new Point(23, 258);
            listBoxIndexs();
            listBoxControl1.MyListBox.SelectedIndex = 0;
            if (this.listBoxControl1.MyListBox.Items.Count > 0)
                this.listBoxControl1.MyListBox.SelectedIndex = 0;
            listBoxControl1.MyListBox.SelectedIndexChanged += new EventHandler(listBox1_SelectedIndexChanged);
            this.listBoxControl1.ItemRemoved += new EventHandler<ItemEventArgs>(listBoxControl1_ItemRemoved);
        } 
```

这一行：listBoxControl1.MyListBox.SelectedIndex = 0; 将第一个 ListBox 项目标记为蓝色，就像它被选中一样。但这并不是真正选择项目！

所以我试图添加这个：

```
if (this.listBoxControl1.MyListBox.Items.Count > 0)
                    this.listBoxControl1.MyListBox.SelectedIndex = 0; 
```

但它也不起作用。

这是 SelectedIndex 事件：

```
private void listBox1_SelectedIndexChanged(object sender, System.EventArgs e)
        {
            item = listBoxControl1.MyListBox.SelectedItem.ToString();
            this.f1.PlayLightnings();
            f1.pdftoolsmenu();
            int indx = listBoxControl1.MyListBox.SelectedIndex;
            if (listBoxControl1.Indices.Contains(indx))
            {
                if (item != null && !pdf1.Lightnings.Contains(item.ToString()))
                {
                    pdf1.Lightnings.Add(item.ToString());
                }
            }
        } 
```

事件的名称不正确，我必须更改它，因为它是 UserControl 上的 ListBox，但它是正确的。

当我在 SelectedIndex 事件中放置一个断点并单击一个项目时，它会在断点处停止。但是，一旦我使用 UserControl 和 ListBox 显示/打开新表单，我希望它自动转到 selectedIndex 事件。

因此，如果我在 SelectedIndex 事件中放置一个断点，当我单击 Form1 中的按钮以显示/打开新表单时，它将自动停止在断点处，就像我单击第一个项目一样。

这是在 Form1 中显示新表单的代码：

```
if (toolStripComboBox2.SelectedIndex == -1 && toolStripComboBox1.SelectedIndex == -1)
            {
            }
            else
            {
                Lightnings_Extractor.Lightnings_Mode lightningsmode1 = new Lightnings_Extractor.Lightnings_Mode(this);
                lightningsmode1.Show();
            } 
```

除了自动选择第一项外，一切正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T16:45:41.753

您可能需要交换您开始收听事件的位置和实际广播它的位置。

尝试改变：

```
if (this.listBoxControl1.MyListBox.Items.Count > 0)
    this.listBoxControl1.MyListBox.SelectedIndex = 0;
listBoxControl1.MyListBox.SelectedIndexChanged += new EventHandler(listBox1_SelectedIndexChanged); 
```

对此：

```
listBoxControl1.MyListBox.SelectedIndexChanged += new EventHandler(listBox1_SelectedIndexChanged);
if (this.listBoxControl1.MyListBox.Items.Count > 0)
    this.listBoxControl1.MyListBox.SelectedIndex = 0; 
```

通常，我在表单的 OnLoad 部分订阅 EventHandlers，并调整 OnShow 部分中的任何设置以帮助避免此类事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T16:36:20.950

您必须更改项目本身的属性：

```
listBoxControl1.Focus();
listBoxControl1.Items[0].Selected = true; 
```

第一行并不是真正必要的，但我会包括它以防止一些问题。`IndexOutOfRangeException`如果列表框中没有项目，您还应该处理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T16:35:46.710

[http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.setselected(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.setselected(v=vs.90).aspx)

代替

```
if (this.listBoxControl1.MyListBox.Items.Count > 0)
                    this.listBoxControl1.MyListBox.SelectedIndex = 0; 
```

试试这个：

```
if (this.listBoxControl1.MyListBox.Items.Count > 0)
                    this.listBoxControl1.MyListBox.SetSelected(0,true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T16:36:52.337

你可以简单地试试这个：使用 0 索引。

```
listBoxControl1.Items[0].Selected = true; 
```

# node.js - 将 get 方法中的数据存储在某个对象中以供以后使用

> ID：14295328
> 
> 赞同：0
> 
> 时间：2013-01-12T16:25:35.183
> 
> 标签：node.js, express

我将 express 用于我想编写的聊天应用程序。问题是当我使用 express 的 get 方法取回数据时，我无法在我的代码的其他部分和 console.log 中的未定义 var 消息中使用它。

代码是

```
// routing
app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');
  var cookieManager = new co.cookie(req.headers.cookie);

  var client = new memcache.Client(11211, "localhost");
  client.connect();

    user = client.get("sessions/"+cookieManager.get("sec_session_id"), function(error, result){
            var session = JSON.parse(result);
            user = JSON.parse(session.name);
            user = user.username;
    });

}); 
```

我想存储用户变量并在我的代码的另一部分中使用它，所以我在这段代码之后写了 console.log(user) 但用户在 console.log 中是未定义的

任何形式的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:13:55.080

编写一个函数并像这样传递用户名：

```
// routing
app.get('/', function (req, res) {
  res.sendfile(__dirname + '/index.html');
  var cookieManager = new co.cookie(req.headers.cookie);

  var client = new memcache.Client(11211, "localhost");
  client.connect();

  client.get("sessions/"+cookieManager.get("sec_session_id"), function(error, result){
    var session = JSON.parse(result);
    // user = JSON.parse(session.name); // what are you trying to do here?
    // user = user.username;
    do_something_with_user(session.name.username);
  });
});

function do_something_with_user(username) {
  console.log(username);
} 
```

我建议您查看一些关于 javascript/node.js 的教程，例如[http://www.nodebeginner.org/](http://www.nodebeginner.org/)

# php - PHP 按进程 ID 回显内存

> ID：14295329
> 
> 赞同：0
> 
> 时间：2013-01-12T16:25:42.287
> 
> 标签：php, linux, ubuntu

我环顾四周，了解到我可以使用以下内容来获取特定 PID 的 CPU 和内存数据：

```
echo shell_exec('ps -p 22583 -o "pcpu,pmem" | tail -n +2'); 
```

我打字没有| `tail -n +2`我得到以下信息：

```
%CPU %MEM 
```

由于某种原因，它不会返回实际值..

有人可以帮我解决这个问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:27:22.043

你试过辅助结构吗？

```
ps aux | grep 'process' 
```

# android - 创建/导入许多位图以用于 maptiles 堆栈内存问题

> ID：14295330
> 
> 赞同：1
> 
> 时间：2013-01-12T16:25:55.680
> 
> 标签：android, bitmap

我对 Android 很陌生，但我想尝试制作一个基于图块的游戏，你可以在地图上一个方一个方地移动。

但是我在打开许多资源时遇到了问题，现在我只是为每个图块使用相同的图像（但将来这显然会改变）

问题是在创建大小合适的地图时，此代码：

```
mBitmap = BitmapFactory.decodeStream(new BufferedInputStream(res.openRawResource(R.drawable.tile)));
mBitmap = Bitmap.createBitmap(mBitmap, 0, 0, mBitmap.getWidth(), mBitmap.getHeight());
canvas.drawBitmap(mBitmap, mX, mY, null); 
```

模拟时导致错误...

我知道模拟器/手机的内存有限，但我认为它们足以容纳 20x20 的瓷砖？

-我希望有更大的地图，但我能想到的唯一解决方法是在它们不在视野范围内时破坏瓷砖并在它们进入视野时绘制新的瓷砖（当你移动时）

我在这里尝试过这样做：

```
if (tile.mX > 100 && tile.mX < 600){
   tile.mBitmap = null;
} else {
   //draw it with code above
} 
```

因此，上面的代码将遍历数组中的每个图块（每一帧），并且只绘制某个 X 坐标内的图块。

我只是想知道这是否是这样做的“方式”？- 移动时打开和清空位图？还是有更简单的方法？我是否错过了一个比 null 更好地破坏位图的命令，这会使我的程序更有效率？

程序在模拟器上运行非常慢，这是一个问题吗？- 或者假设在模拟器上每帧加载许多位图会很慢是安全的吗？它仍然会在手机设备上运行缓慢吗？

任何提示/帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:36:02.570

我认为您不必每次都加载/释放位图。我还编写了一个处理大量（大）位图的程序，我们遇到了很多内存问题，直到我偶然发现了 Android API 提供的[LruCache](http://developer.android.com/reference/android/util/LruCache.html)类（链接的 JavaDoc 甚至有一个关于如何将它用于位图的示例）。LRU 代表最近最少使用的，因此基本上它会保留短期使用的元素并删除长时间未使用的元素。

所以你应该做的是：你将使用 a `SurfaceView`- 这意味着你必须在每次`draw`调用该方法时绘制它。因此，在绘图时，您必须知道哪些图块是可见的，然后您只需绘制这些图块。对于每个图块，您查找 LruCache 以查看您是否已经加载了该位图，如果已加载，只需将其绘制在表面视图的正确位置。如果位图不在您加载的缓存中，请将其放入缓存中并将其绘制到表面上。

# ipad - cocos2d 2.0 不加载 ipad 图形

> ID：14295334
> 
> 赞同：0
> 
> 时间：2013-01-12T16:26:18.453
> 
> 标签：ipad, cocos2d-iphone, retina-display

我将 iPad 和 iPad 视网膜屏幕设备的后缀定义为我的通用应用程序的 ccFileUtils 的 -ipad 和 -ipadhd，并且我的所有图形都包含在正确尺寸的 iPad 和带有正确后缀的视网膜 iPad 中。 . 但是，每当我在模拟器中运行应用程序时，它都会显示没有后缀图像的标准：/ 像这样......

![像这样](../Images/537aba2bd97ee231f6e82ca46cfae7a3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T19:58:57.817

这是一个愚蠢的错误，最终与编码无关。我检查了相关图像的文件类型（Background-iPadhd.png），结果发现即使它具有扩展名 .png 它实际上是一个 .psd 文件。如果您将文件名写为 xxx.png 但在从 photoshop 保存时将格式保留为 .psd，则可能会意外保存扩展名为 .png 但为 .psd 格式的文件。

# ajax - gsp 页面，其中 select 派生自先前的 select 未封闭 GSP 表达式

> ID：14295335
> 
> 赞同：0
> 
> 时间：2013-01-12T16:26:59.643
> 
> 标签：ajax, grails, groovy, gsp

grails 上的 groovy 新手，如果总是要求解决方案，则需要为一些定制的解决方案而苦苦挣扎。

我正在尝试使用 ajax 创建两个选择，一个填充了基于另一个的信息。我正在关注的示例在这里[http://www.grails.org/AJAX-Driven+SELECTs+in+GSP](http://www.grails.org/AJAX-Driven+SELECTs+in+GSP)。我也在使用脚手架，所以我不得不使用 install-templates 命令来获取视图来操作 gsp 文件。通过对模板进行一些调整，我有一个工作创建视图，用于构建我的选择。但是按照教程中的说明输入这些选择会导致我无法解决的错误

```
Stack trace as below :
| Error 2013-01-12 16:11:46,582 [http-bio-8080-exec-3] ERROR errors.GrailsExceptionResolver  - GrailsTagException occurred when processing request: [GET] /TimeTracker2/time/create
Unclosed GSP expression. Stacktrace follows:
Message: Error initializing GroovyPageView
    Line | Method
->>  186 | doFilter  in grails.plugin.cache.web.filter.PageFragmentCachingFilter
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|     63 | doFilter  in grails.plugin.cache.web.filter.AbstractFilter
|   1110 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    603 | run       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . in java.lang.Thread
Caused by GrailsTagException: Unclosed GSP expression
->>   33 | doFilter  in \grails-app\views\time\create.gsp
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
```

我的 GSP 在下面，您可以看到所有表达式都已关闭...... 建议？

```
<head>
    <meta name="layout" content="main">
    <g:set var="entityName" value="\${domainClass.propertyName}" />
    <title>Create Time</title>
</head>
<body>
    <a href="#create-{domainClass.propertyName}" class="skip" tabindex="-1"><g:message code="default.link.skip.label" default="Skip to content&hellip;"/></a>
    <div class="nav" role="navigation">
        <ul>
            <li><a class="home" href="/TimeTracker2"><g:message code="default.home.label"/></a></li>
            <li><g:link class="list" action="list"><!--g:message code="default.list.label" args="[entityName]" /-->Time List</g:link></li>
        </ul>
    </div>
    <div id="create-{domainClass.propertyName}" class="content scaffold-create" role="main">
        <h1><!--g:message code="default.create.label" args="[entityName]" /-->Create Time</h1>
        <g:if test="${flash.message}">
        <div class="message" role="status">${flash.message}</div>
        </g:if>
        <g:hasErrors bean="\${propertyName}">
        <ul class="errors" role="alert">
            <g:eachError bean="\${propertyName}" var="error">
            <li <g:if test="\${error in org.springframework.validation.FieldError}">data-field-id="\${error.field}"</g:if>><g:message error="\${error}"/></li>
            </g:eachError>
        </ul>
        </g:hasErrors>
        <g:form action="save" method="post" enctype="multipart/form-data" >
            <fieldset class="form">
                <g:render template="form"/>
                <g:select
                    optionKey="id" optionValue="Project" name="project.name" id="project.name" from="${Project.list()}"
                    onchange="${remoteFunction(
                    controller:'project', 
                    action:'ajaxGetClassifications', 
                    params:'\\'id='\\' + escape(this.value)', 
                    onComplete:'updateClassification(e)')}"
                    ></g:select>
            </fieldset>
            <fieldset class="buttons">
                <g:submitButton name="create" class="save" value="Create" />
            </fieldset>
        </g:form>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:06:36.587

Id 将 select 的 onChange 事件的 javascript 函数放入单独的函数中，而不是 g:select 标记中的内联函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T21:22:04.703

在解决了这些问题（并且有很多问题）之后，答案是提供了我的域类的正确完整位置。

```
 <g:select optionKey="id" optionValue="name" name="project.name" id="project.name" 
from="${timetracker2.Project.list()}" onchange="${remoteFunction(controller:'project', 
                            action:'ajaxGetClassifications', 
                            params:'\'id=\' + escape(this.value)', 
                            onComplete:'updateClassification(e)')}"
                        ></g:select> 
```

我现在的问题在于如何保存信息，以及如何让第二个列表从第一个列表中获取其值。但这是另一天的另一个问题。

# python - win32gui.SetActiveWindow() 错误：找不到指定的程序

> ID：14295337
> 
> 赞同：12
> 
> 时间：2013-01-12T16:27:00.823
> 
> 标签：python, win32gui

我得到这样的活动窗口：

```
window = win32gui.GetForegroundWindow() 
```

这是一个 Int，比如 1053634。然后我尝试将前景窗口设置回指定的窗口：

```
win32gui.SetForegroundWindow(window) 
```

我得到这个错误：win32gui.SetForegroundWindow(window) 错误：(127, 'SetForegroundWindow', '找不到指定的过程。')

有时当我在解释器中执行此操作时，我会收到此错误：

```
win32gui.SetForegroundWindow(1053634)
error: (0, 'SetForegroundWindow', 'No error message is available') 
```

你认为是什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-03-19T15:29:42.127

我的程序在装有 Windows 7 的桌面上运行良好，但是当我在装有 Windows Vista 的笔记本电脑上使用时（即使 UAC 关闭），我收到错误消息：

```
pywintypes.error: (0, 'SetForegroundWindow', 'No error message is available') 
```

程序将在任务栏中闪烁，但不发送任何字符。

我什至尝试发送“记事本”SetForegroundWindow 并得到同样的错误。

这是一个解决方法的链接，它结合线程让计算机认为它们一起工作：[http ://www.shloemi.com/2012/09/solved-setforegroundwindow-win32-api-not-always-works/](http://www.shloemi.com/2012/09/solved-setforegroundwindow-win32-api-not-always-works/)

这篇文章有更多关于这个问题的信息。

更新：很抱歉链接到 C 程序。我进行了更多研究，发现如果你先发送一个 alt 键，它会让你 SetForegroundWindow。

例如：

```
import win32gui, win32com.client
shell = win32com.client.Dispatch("WScript.Shell")
shell.SendKeys('%')
win32gui.SetForegroundWindow(window) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-03-30T20:28:54.197

这也对我有用

```
import win32gui, win32com.client
shell = win32com.client.Dispatch("WScript.Shell")
shell.SendKeys('%')
win32gui.SetForegroundWindow(window.hwnd) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-27T12:09:29.140

什么对我有用...

```
import win32gui, win32com.client
shell = win32com.client.Dispatch("WScript.Shell")
input("Press Enter")
shell.SendKeys(' ') #Undocks my focus from Python IDLE
win32gui.SetForegroundWindow(window) #It works!
shell.SendKeys('%') 
```

# java - 引起：java.lang.ClassNotFoundException: com.db4o.ObjectContainer

> ID：14295341
> 
> 赞同：1
> 
> 时间：2013-01-12T16:27:24.523
> 
> 标签：java, db4o, managed-bean

> **可能重复：**
> [找不到 db4o 数据库文件](https://stackoverflow.com/questions/14295646/cant-locate-db4o-database-file)

我正在尝试使用 DB4O 和 JSF 创建一个简单的 CRUD 应用程序。在我的网络项目中，我有两个包：

1.  `com.crud.bean`包含`CRUDClient.java`
2.  `com.crud.entities`包含 DB4O 实体`Client.java`

webContent 包含一个 JSP 文件`addClient.jsp`，其中包含一个带有客户端必需字段的表单。我将在 JSP 文件中声明`CRUDClient.java`为托管 bean`faces-config.xml`以使用其功能和属性。

但是当我运行项目时，出现以下错误

```
15:44:32,444 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-4)     MSC00001:Failed to start service     jboss.deployment.unit."DB_WEB.war".POST_MODULE:org.jboss.msc.service.StartException in service jboss.deployment.unit."DB_WEB.war".POST_MODULE: Failed to process phase POST_MODULE     of deployment     "DB_WEB.war"atorg.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.java:119) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    at     org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.ja    va:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at     org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746)     [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source) [rt.jar:1.7.0_01]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) [rt.jar:1.7.0_01]
    at java.lang.Thread.run(Unknown Source) [rt.jar:1.7.0_01]
Caused by: java.lang.NoClassDefFoundError: com/db4o/ObjectContainer
    at java.lang.Class.getDeclaredConstructors0(Native Method) [rt.jar:1.7.0_01]
    at java.lang.Class.privateGetDeclaredConstructors(Unknown Source) [rt.jar:1.7.0_01]
    at java.lang.Class.getConstructor0(Unknown Source) [rt.jar:1.7.0_01]
    at java.lang.Class.getConstructor(Unknown Source) [rt.jar:1.7.0_01]
    at     org.jboss.as.web.deployment.jsf.JsfManagedBeanProcessor.deploy(JsfManagedBeanProcessor.java:108)
    at         org.jboss.as.server.deployment.DeploymentUnitPhaseService.start(DeploymentUnitPhaseService.    java:113) [jboss-as-server-7.1.1.Final.jar:7.1.1.Final]
    ... 5 more
Caused by: java.lang.ClassNotFoundException: com.db4o.ObjectContainer from [Module "deployment.DB_WEB.war:main" from Service Module Loader]
    at org.jboss.modules.ModuleClassLoader.findClass(ModuleClassLoader.java:190)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassUnchecked(ConcurrentClassLoader.java:468)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClassChecked(ConcurrentClassLoader.java:456)
    at org.jboss.modules.ConcurrentClassLoader.performLoadClass(ConcurrentClassLoader.java:398)
    at org.jboss.modules.ConcurrentClassLoader.loadClass(ConcurrentClassLoader.java:120)
    ... 11 more 
```

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T16:29:46.697

> 引起：java.lang.ClassNotFoundException: com.db4o.ObjectContainer

这只是意味着运行时类路径中缺少提到的类（或至少包含提到的类的 JAR 文件）。包名暗示它是一个 DB4O 类，通常以 JAR 文件的形式提供。

webapp 的默认运行时类路径包括 webapp 的`/WEB-INF/lib`文件夹。因此，如果您确保将 DB4O JAR 文件放入其中并重新构建/重新部署/重新启动，那么该异常应该会消失。

* * *

请注意，此问题与 JSF/JSP 无关。这只是基本的Java。异常的包名也暗示，它来自`java.lang`包，而`javax.faces`不是`javax.servlet`包，否则会使其确实是一个与 JSF/JSP(Servlet) 相关的问题。

我想说的另一个不相关的说明是，自大约 3 年前的 JSF 2.0 以来，JSP 已被弃用。也许您正在阅读过时的 JSF 1.x 目标资源？至于学习 JSF，我建议阅读最新的教程。您可以从[我们的 JSF wiki 页面](https://stackoverflow.com/tags/jsf/info)开始。

# unix - grep 误报

> ID：14295345
> 
> 赞同：-1
> 
> 时间：2013-01-12T16:27:48.963
> 
> 标签：unix, grep

我有六个 html 标签，我关心检查自闭标签是否正确完成。标签是：`<input/><br/><hr/><img/><link/><meta/>`。我也在寻找它在结束标记之前没有空格，因为页面是 xhtml。基本上我想找到那些没有自动关闭功能的，或者如果有的话，它前面有一个空间。

现在我只关注其中一个标签（输入）。它收集了一些但不是全部。例如，它会选择`<input type='submit' value='Save'>`它应该做的事情。但它不接`<input type="text" name="name" id="name"/>`。它还可以拾取正确的自闭合标签，例如`<input type='submit' value='Save' /></td></tr>`

我的 grep 是：

`grep "<input(.*[^/])>." *`

任何想法为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:39:04.737

为什么要捡起来`<input type="text" name="name" id="name"/>`？这是一个正确关闭的标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:54:08.297

我认为您当前的正则表达式不起作用，因为它与整行匹配。只是盯着它，看起来你正在匹配开始字符串 " `<input`" 然后尽可能多的字符，最后一个字符不是 a `/`，然后是结束字符`>`。

在`<input type='submit' value='Save' /></td></tr>`贪婪的情况下，它会一直运行到最后`>`一个有效的。恰好是`>`for the `td`（因为你的 grep 以 a 结束`.`）

作为一个 hack-y 替代品（我确信有一种更优雅的方式来做到这一点..）：

```
grep -P -o "<input.*?(?<=( .)|([^/]))>" test.html 
```

（如果相关，则为 grep 2.6.3/cygwin）

大致翻译为：让我以“ `<input`”开头，然后以“ `>`”结尾（懒惰地），然后回头检查是否关闭前的倒数第二个字符`>`不是空格，或者最后一个字符不是一个斜线。

如果 test.html 有（为了论证）：

```
<input type='submit' value='Save' /></td></tr>
<input type="text" name="name" id="name"/>
<input type='submit' value='Save'>
<a><input type="blah" /></a>
<input/>
<input></i> 
```

输出是：

```
<input type='submit' value='Save' />
<input type='submit' value='Save'>
<input type="blah" />
<input> 
```

更一般地说，如果您要测试是否符合 xhtml，[lxml](http://lxml.de/parsing.html)会让您的生活更轻松吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T17:55:03.743

[不建议](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)使用正则表达式解析 HTML 。

但是，如果您的 HTML 被格式化为每行只有一个标签，也许您可​​以逃脱`grep '<input' * | grep -v " />"`

# assembly - 检查两个数字是否相等并在汇编中在屏幕上显示一条文本消息

> ID：14295348
> 
> 赞同：0
> 
> 时间：2013-01-12T16:27:57.830
> 
> 标签：assembly, x86

我正在尝试从键盘读取两个数字并在它们相等时显示一条消息。

我认为我没有做正确的事情来显示消息。我得到了一些编译错误（我把它们写成内联注释）

```
 title Program1
 data segment
 mesajEgale db "equal$"
 mesajInegale db "inequal$"
  data ends

cod segment
assume cs:cod,ds:data
start :
  read:
mov ah,01h  
int 21h   //read number
mov bl,al //move first number in bl 
int 21h //read second nubmer
cmp al,bl //compare if the two numbers are equal
jnz unequal 
equal:
mov ax,data
    mov  ds,ax
    mov ds,mesajEgale // error here :Argument to operation or isntruction has illegal     size
    mov dx,offset mesajEgale
    mov ah,09h
    int 21h,4c00h
    int 21h
    //need to jump to end here

   unequal:
   mov ax,data
    mov  ds,ax
    mov ds,mesajInegale
    mov dx,offset mesajInegale
    mov ah,09h
    int 21h,4c00h
    int 21h

cod ends
end start 
```

你能告诉我我做错了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:14:15.073

First of all, I'm assuming this is going to be running under DOS? Otherwise [`int 21h`](http://spike.scu.edu.au/~barry/interrupts.html) isn't going to work.

Assuming DOS, I think the following should work (untested):

```
 mov  ax, data  ; Set segment registers right away, and leave them.
    mov  ds, ax

read:
    mov ah, 01h  
    int 21h        ; Read char from stdin to AL.

    mov bl, al

    mov ah, 01h    ; I never assume the registers won't be corrupted upon return.
    int 21h

    cmp al, bl     ; Are the read numbers equal?
    jnz unequal 
equal:
    mov dx, offset mesajEgale
    jmp print
unequal:
    mov dx, offset mesajInegale
print:
    mov ah,09h      ; Write string at ds:dx to stdout
    int 21h         ; No need to duplicate this code! 
```

# c++ - 如何在标头中使用尚未定义的数据类型？

> ID：14295349
> 
> 赞同：1
> 
> 时间：2013-01-12T16:28:13.580
> 
> 标签：c++, typedef, header-files

我正在使用 g++ 在 linux 上编程，我经常遇到需要在头文件中使用类或数据类型的问题，我稍后会在头文件或另一个头文件中定义。

例如看这个头文件：

```
class example
{
    mydatatype blabla;
};

struct mydatatype
{
   int blablainteger;
   char blablachar;
}; 
```

这将给出错误，因为 mydatatype 在定义之前使用，所以通常我会这样更改它：

```
struct mydatatype; // <-- class prototype
class example
{
    mydatatype *blabla; // <-- now a pointer to the data type
    // I will allocate the data during runtime with the new operator
};

struct mydatatype
{
   int blablainteger;
   char blablachar;
}; 
```

现在它起作用了。我通常可以只将定义放在上面，或者包含需要的标题，但我不想在标题中包含标题或玩弄定义顺序，它总是会变得混乱。

我展示的解决方案通常有效，但现在我遇到了一个新现象。这次数据类型不是类而是 typedef，我不能为 typedef 使用原型，我不想使用 typedef 包含的实际数据类型。它也很混乱。
有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-06T02:54:50.010

You could just define the class inside the other class like

```
template<class T>
class vertex {
private:
    class edge {
    public:
        vertex<T> *to;
        double weight;
        edge() {
            weight = INFINITY;
            to = NULL;
        };
    } *paths;
    T data;
    unsigned nof_paths;
public:

    vertex(T val) {
        data = val;
        paths = NULL;
        nof_paths = 0;
    }
    void addPathTo(vertex<T>*&);

    edge* getAllPaths() {
        return paths;
    };
}; 
```

Obviously this works for small classes... if your class is ENORMOUS you'll be better using separate header files like the other guys said.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T16:39:09.280

首先，您想到的解决方案（原型和指针）是不需要的，并且比没有指针的情况下实现它要慢。

对此的“正确”解决方案是为每种类型创建单独的标题，然后将它们包含在其他标题中。这样它总是会被定义！您甚至可以制作它们，使它们相互包含。

但是，如果您曾经打开过`.h`g++ 提供的文件，您很可能会在标题的开头看到：

```
#ifndef SOMETHING_H
#define SOMETHING_H

// Code

#endif /* SOMETHING_H */ 
```

这是为了解决类型重新定义自己的问题。

如果它们不存在，并且您多次包含头文件，则类型将被重新定义，并且会引发错误。这使得类型始终存在，但从不包含两次。

我希望这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T16:35:21.553

将每个类/类型放在它自己的头文件中，然后将相关的头文件包含在您需要的其他头文件中。在每个标头中使用包含保护，例如：

```
// SomeHeaderFile.h
#ifndef SOME_HEADER_FILE_H
#define SOME_HEADER_FILE_H
// code
#endif 
```

我不同意这很混乱——它允许你的项目有一个有组织的结构，它允许每个类独立于其他类运行，而不用担心顺序，无论如何将每个类放在它自己的文件中是个好主意。

# ios - 在没有核心数据的情况下使用 JSON

> ID：14295353
> 
> 赞同：0
> 
> 时间：2013-01-12T16:28:50.317
> 
> 标签：ios, ios6, xcode4.5

我可以使用这种技术，还是会让我的应用程序被 Apple 拒绝？

*   应用程序启动，下载一些 JSON 数据，并将其存储在一个数组中。
*   A`UITableView`从数组中加载数据。
*   当用户再次启动应用程序时，应用程序再次下载 JSON 数据并将其存储在数组中，然后`UITableView`再次从数组中加载数据。

这可以吗，还是我应该使用 Core Data 来存储数据？

请注意，JSON 中的某些数据可能会发生变化，因此如果我使用 Core Data 存储它，我将很难跟踪更改并将它们反映在 Core Data 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T16:31:34.203

> 或者我应该使用核心数据来存储来自 JSON 的数据。

如果您使用 JSON，我什至不知道是什么让您认为您必须使用 CoreData。这绝对不是必须的。它们是两种不同的技术，具有完全不同的目的。例如，使用 JSON 与您的服务器进行快速通信就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:21:50.950

PassKit 是对的，您应该考虑在没有 Internet 连接的情况下您希望应用程序做什么。您希望应用程序崩溃还是什么都不显示？可能更好的是，向用户显示最后已知的信息，也许向他们显示上次刷新的日期和时间和/或警告他们它可能不是最新的。

为此，您需要在成功下载 JSON 后保存它。您不需要为此使用 Core Data（事实上，这几乎可以肯定是矫枉过正），但您可能确实希望将其保存到您的`Documents`文件夹中。您可以将 JSON 对象保存到使用`writeToFile`. 然后，当它尝试在未来某个日期从服务器检索信息时，如果找不到，请在`Documents`文件夹中查找信息。

# java - JTable 计算器

> ID：14295358
> 
> 赞同：2
> 
> 时间：2013-01-12T16:29:30.020
> 
> 标签：java, swing, jtable

我想让这个功能起作用。游戏循环调用此函数以获取表中选定的行。我不明白为什么会出现以下错误消息：此行的多个标记 - 类型不匹配：无法从 int 转换为 int[] - 标记“[”上的语法错误，此标记后应为表达式

想知道是否有人可以解释我需要更改什么才能使我的函数 getRows 工作。感谢您抽出宝贵时间，希望很快能收到回复。

```
 public int[] getRows(JTable table) {    
    rows[0] = table.getSelectedRow();
    rowCount = table.getSelectedRowCount() - 1;
    rows[1] = rows[0] + rowCount;
    return rows[];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T16:33:53.373

错误很简单，解释不是。

你做错了什么：`return rows[];`。应该是`return rows;`。

说明：

当你想返回一个数组时，你不应该添加括号。如果你想返回一个数组中的一项，你应该写`return array[index];`. 在您的情况下，编译器的想法是您试图从数组中返回一个 int`rows`但忘记了索引，这是一个语法错误。类型不匹配是因为你说你会在方法头中返回一个`int[]`（并且编译器认为你试图返回一个`int`，还记得吗？）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T16:42:13.447

```
public int[] getRows(JTable table) {    
    rows[0] = table.getSelectedRow();
    rowCount = table.getSelectedRowCount() - 1;
    rows[1] = rows[0] + rowCount;
    return rows; //////////without brackets
} 
```

# android - PopUpView 或 AlertDialog，带有 ImageButton 矩阵

> ID：14295359
> 
> 赞同：0
> 
> 时间：2013-01-12T16:29:32.323
> 
> 标签：android

我需要创建一个对话框，其中包含一个简单的方形 ImageButtons（如图标）矩阵，数量未知，还有一个取消按钮。对话框应该以编程方式充气和滚动。

我真的很困惑：我应该创建一个自定义布局并将其应用于 AlertDialog 吗？我怎么能拦截点击？我应该使用 PopUpWiew 吗？我是否应该将其设为活动？

如果我创建一个新的 Activity ......我应该使用 Runnable 吗？请不要向我提供完整的来源，我只需要了解满足此需求的正确方向是什么。

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:03:18.107

您可以使用对话框并将布局文件设置为它。对话框类似于迷你活动，可以调用到实际活动并随意关闭。

让它成为自定义布局文件 - customLayout.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/bg"
tools:context=".AutoMode" >

<RelativeLayout
    android:id="@+id/relativeLayout1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="3dp"
    android:layout_above="@+id/relativeLayout2"
    android:layout_centerHorizontal="true" >

    <Button
        android:id="@+id/button1"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_margin="3dp"
        android:background="@drawable/blue_gradient"
        android:layout_alignRight="@+id/relativeLayout1"
        android:layout_alignTop="@+id/relativeLayout1"/>

    <Button
        android:id="@+id/button2"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_margin="3dp"
        android:background="@drawable/black_gradient"
        android:layout_alignTop="@+id/relativeLayout1"
        android:layout_toRightOf="@+id/button1"/>

    <Button
        android:id="@+id/button3"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_margin="3dp"
        android:layout_toRightOf="@+id/button2"
        android:background="@drawable/red_gradient" />

</RelativeLayout>

 <RelativeLayout
    android:id="@+id/relativeLayout2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="3dp"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true" >

    <Button
        android:id="@+id/button4"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_margin="3dp"
        android:background="@drawable/yellow_gradient"
        android:layout_alignRight="@+id/relativeLayout2"
        android:layout_alignTop="@+id/relativeLayout2" />

    <Button
        android:id="@+id/button5"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_margin="3dp"
        android:background="@drawable/metallic_gradient"
        android:layout_alignTop="@+id/relativeLayout2"
        android:layout_toRightOf="@+id/button4" />

    <Button
        android:id="@+id/button6"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_margin="3dp"
        android:background="@drawable/purple_gradient"
        android:layout_alignTop="@+id/relativeLayout2"
        android:layout_toRightOf="@+id/button5"/>

</RelativeLayout>

 <RelativeLayout
    android:id="@+id/relativeLayout3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="3dp"
    android:layout_below="@+id/relativeLayout2"
    android:layout_centerHorizontal="true" >

    <Button
        android:id="@+id/button7"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_margin="3dp"
        android:background="@drawable/green_gradient"
        android:layout_alignRight="@+id/relativeLayout3"
        android:layout_alignTop="@+id/relativeLayout3" />

    <Button
        android:id="@+id/button8"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_margin="3dp"
        android:background="@drawable/orange_gradient"
        android:layout_alignTop="@+id/relativeLayout3"
        android:layout_toRightOf="@+id/button7" />

    <Button
        android:id="@+id/button9"
        android:layout_width="60dp"
        android:layout_height="60dp"
        android:layout_margin="3dp"
        android:background="@drawable/violet_gradient"
        android:layout_alignTop="@+id/relativeLayout3"
        android:layout_toRightOf="@+id/button8" />

</RelativeLayout> 
```

以下是如何将此布局设置为要调用它的活动中的对话框：

```
final Dialog customDialog = new Dialog(this);
    customDialog.setTitle("Matrix");
    disclaimer.setContentView(R.layout.customLayout);
      Button b1 = (Button) customDialog.findViewById(R.id.button1);
b1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            //Do whatever you want when button1 is clicked
        }
    });
.
.//same for other buttons
.
Button b9 = (Button) customDialog.findViewById(R.id.button9)
b9.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            //Do whatever you want when button9 is clicked
        }
    });
    Button close = (Button) customDialog.findViewById(R.id.dismiss);
    customDialog.show();
    close.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            disclaimer.dismiss();
        }
    }); 
```

# c# - 图像处理（WinRT 和 C#） - 图像到视频

> ID：14295360
> 
> 赞同：0
> 
> 时间：2013-01-12T16:29:35.727
> 
> 标签：c#, image-processing, windows-runtime

有没有一种方法可以在不使用 Media Foundation API 的情况下处理来自流（或图像文件或视频文件）的帧并将帧保存在编码的视频文件中。我不熟悉 C++ 和 COM 技术，所以我问有没有办法用 C# 从一组图像中制作视频流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T01:46:45.523

使用 Media Foundation 的一些 .NET 包装器可能是可能的。也许 SharpDX 有它们。

# javascript - 扩展 JavaScript 中的 split() 方法

> ID：14295366
> 
> 赞同：2
> 
> 时间：2013-01-12T16:30:25.437
> 
> 标签：javascript, string, split

这是困扰我一段时间的事情。

假设我在一条线上这样做

```
var result = "Noble warm and pretty darm Caesar.".split(/(\warm)/);
// ["Noble ", "warm", " and pretty ", "darm", " Caesar."] 
```

是否可以扩展 split 方法以使用类似`replace`字符串的函数来操作正则表达式捕获？

伪代码：

```
var result = "Noble warm and pretty darm Caesar.".split(/(\warm)/, function (match) {
        return '<span style="color:red;">' + match + '</span>';
});
// ["Noble ", "<span style=\"color:red;\">warm</span>", " and pretty ", "<span style=\"color:red;\">darm</span>", " Caesar."] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:52:55.187

`prototype`您可以在对象的对象属性中定义自己的函数`String`。

以下函数是您可以执行的操作的示例：

```
String.prototype.splitReplace = function(pattern, fn)
{
    var array = this.split(pattern);
    for (var i = 0; i < array.length; i++)
    {
        if (i % 2 == 1)
        {
            array[i] = fn(array[i]);
        }
    }
    return array;
} 
```

如上所述，这个函数只是一个简单的例子，展示了如何将函数添加到 String 原型属性。但是您应该使用@User2121315 在评论中给我们的智能且健壮的函数声明

# java - 通过使用获取 servlet 路径 或 Spring 的 InternalResourceViewResolver 中的 ${pageContext.request}

> ID：14295384
> 
> 赞同：1
> 
> 时间：2013-01-12T16:32:10.430
> 
> 标签：java, spring-mvc

我正在使用`InternalResourceViewResolver`Spring 来呈现存在于`/WEB-INF/view`. 我也在视图中使用 JSTL。现在问题出现在更改in`<url-pattern>`之后。`DispatcherServlet``web.xml`

我试图通过它获取 servlet 路径，`${pageContext.request.servletPath}`但它返回`/WEB-INF/view/skel/welcome.jsp`的是 WEB-INF 目录的路径，而`request.getServletPath()`返回`/h2o`的是控制器 Java 代码内部。`<% out.print(request.getServletPath()); %>`也在`/WEB-INF/view/skel/welcome.jsp`视图文件 ( `/WEB-INF/view/skel/welcome.jsp`) 中返回。

它似乎来自控制器 Java 代码和 JSP 视图文件中的请求实例之间的差异。请求是`org.apache.catalina.core.ApplicationHttpRequest`JSP 视图文件中的实例，但它是`org.apache.catalina.connector.RequestFacade`控制器 Java 代码中的实例。

到目前为止，幸运的是，我们单独安装它，不需要关心`<uri-patter>`或 servlet 路径。但是这个项目需要与其他系统集成，因此从视图文件中获取 servlet 路径以映射某些菜单或表单操作目标的正确 URL。

您是否知道`/h2o`从视图文件中获取正确的 servlet 路径（）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-05-20T20:43:41.977

${requestScope['javax.servlet.forward.servlet_path']} 也应该为您工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T16:59:32.553

让控制器代码将 request.getServletPath() 的结果放入请求范围内的变量中，然后在 JSP 中使用 jstl 引用它。

# javascript - 获取网格上 div 的位置

> ID：14295388
> 
> 赞同：2
> 
> 时间：2013-01-12T16:32:45.590
> 
> 标签：javascript, jquery, jquery-ui

我正在制作棋盘游戏，我正在寻找一种更好的方法来管理棋盘上的棋子。我现在拥有的是一种将它们从坐标放置在板上的方法。这是存储玩家数据的 JSON 对象：

```
"players" : {
    "1" : {
        "id" : 1,
        "name": "ilya",
        "units" : [
            {
                "id" : 1,
                "row" : 1,
                "square" : 2
            },{
                "id" : 2,
                "row" : 2,
                "square" : 1
            },{
                "id" : 3,
                "row" : 3,
                "square" : 1
            }
        ]
    }, 
```

我只是通过创建一个 div 并将其附加到相应的板正方形 div 并使用 jquery-ui 移动它们来放置它们：

```
$('<div/>', {
    class: 'draggable player' + player + ' unit unit' + unit,
}).appendTo('.row' + row + ' .square' + square + ' .unitPosition'); 
```

`row`并且`square`是一个表并且`unitPosition`是一个助手类`square`

现在要在玩家移动后取回数据，我可以取回 row 和 square 类并提取它们的数字，但在我看来这是一种非常低效的方式。有没有更好的方法来管理这样的网格并存储每件/单元的位置数据？

应普遍要求，这是 html（示例的缩写）：

```
<div id="board">
    <div class="clearfix row row1">
        <div class="square square1">
            <div class="unitPosition"></div>
        </div>
        <div class="square square2">
            <div class="unitPosition"></div>
        </div>
        <div class="square square3">
            <div class="unitPosition"></div>
        </div>
    </div>
    <div class="clearfix row row2">
        <div class="square square1">
            <div class="unitPosition"></div>
        </div>
        <div class="square square2">
            <div class="unitPosition"></div>
        </div>
        <div class="square square3">
            <div class="unitPosition"></div>
        </div>
    </div>
</div> 
```

董事会： ![在此处输入图像描述](../Images/507801169c527660bda1230b2075496f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:20:23.433

为了更新数据对象，如果您使用每个元素`units`的 as 键更改为对象而不是数组，它会更简单一些`id`

```
"players" : {
    "1" : {
        "id" : 1,
        "name": "ilya",
        "units" : {
            1: {
                "id" : 1,
                "row" : 1,
                "square" : 2
            },
            2:{
                "id" : 2,
                "row" : 2,
                "square" : 1
            }        
    } 
```

您可以使用`index()`方法来获取行和单元格索引。为每个元素使用`data-`属性会有很大帮助。

当您读取数据时，您可以`eq()`根据数据的值`row`和`squre`数据中的值找到使用的单元格。

```
var $cell = $('tr').eq( row ).find('td').eq( square);
$('<div data-player="'+player.id+'" data-unit_id="'+unit+'"/>', {
    class: 'draggable player' + player + ' unit unit' + unit,
}).appendTo($cell); 
```

当您将单位放到一个新的方格中时：

```
/* pseudo code, not sure what your drop/append code looks like*/

var $cell= /* your logic to define the cell being placed in*/
var square= $cell.index();
var row= $cell.parent().index();
/* read player and unit from "data-" attributes of DIV*/
var unit= $(this).data('unit_id'), player= $(this).data('player'); 
```

现在使用修改后的数据结构很容易更新主对象`players`：

```
players[player].units[unit].row=row;
players[player].units[unit].square=square; 
```

简单的单元格/行索引演示：http: [//jsfiddle.net/buh4h/](http://jsfiddle.net/buh4h/)

API 参考：

[http://api.jquery.com/index/](http://api.jquery.com/index/)

[http://api.jquery.com/eq/](http://api.jquery.com/eq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T16:50:44.363

我们对您的代码了解不多，但您似乎希望有一种方法可以将数据附加到 HTML 元素，而不必依赖类，也不必从类名中提取数字。

您可以向每个表格单元格和播放器 div 添加`data-`属性以分隔数据，而不是（或除此之外）使用类。你的 HTML 会变成这样：

```
<table>
    <tr>
        <td data-row="1" data-col="1">
            <div data-player="1"></div>
        </td>
        <!-- etc -->
    </tr>
    <!-- etc -->
</table> 
```

然后，您可以通过读取这些属性或使用以下`.data()`方法使用 jQuery 检索这些值：

```
// Assuming you're inside an event handler and "this" is a td
var row = $(this).attr('data-row');
// or
var row = $(this).data('row'); 
```

# javascript - 球衣映射json数组

> ID：14295390
> 
> 赞同：0
> 
> 时间：2013-01-12T16:32:48.783
> 
> 标签：javascript, jquery, web-services, mapping, jersey

我有一个使用 json 数组并尝试将其转换为列表的 Jersey Web 服务。我收到以下错误：

**严重：未找到 Java 类 java.util.List、Java 类型 java.util.List 和 MIME 媒体类型 application/json 的消息正文阅读器。**

有人可以解释为什么吗？

我已经发布了相关的代码片段

球衣服务

```
@POST
@Consumes(MediaType.APPLICATION_JSON)
public void run(List<Person> people) {
     // do something with people
} 
```

人物类

```
@XmlRootElement
public class Person {
   String first;
   String last;

   // constructors
} 
```

json

```
{"people":[ {"first":"Bob","last":"Jones"}, {"first":"Bill","last":"Smith"} ] } 
```

jQuery发布

```
$.ajax({
    type: 'POST',
    url: 'myurl',
    data: data,
    contentType: 'application/json',
    dataType: 'application/json',
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:56:08.703

我错过了对 jersey-json 的依赖。

# python - 在 tkinter 中声明全局并导入模块

> ID：14295392
> 
> 赞同：0
> 
> 时间：2013-01-12T16:33:00.517
> 
> 标签：python, python-3.x, tkinter

```
from tkinter import *
from tkinter import ttk
import calculation_feet_metres
from calculation_feet_metres import *

root = Tk()
root.title("Feet to Metres")

'''
def calculate(*args):
    try:

        value = float(feet.get())
        metres.set((0.3048 * value * 10000.0 + 0.5)/10000.0)
    except ValueError:
        pass
'''

mainframe = ttk.Frame(root, padding="3 3 12 12")
mainframe.grid(column=0, row=0, sticky=(N,W,E,S))
mainframe.columnconfigure(0, weight=1)
mainframe.rowconfigure(0,weight=1)
feet =StringVar()
metres = StringVar()

feet_entry = ttk.Entry(mainframe, width = 7, textvariable = feet)
feet_entry.grid(column=2, row=1, sticky=(W,E))

ttk.Label(mainframe, textvariable = metres).grid(column=2, row=2, sticky=(W,E))
ttk.Button(mainframe, text="Calculate", command = calculate).grid(column=3, row=3, sticky=W)

ttk.Label(mainframe, text ='feet').grid(column=3, row=1, sticky=W)
ttk.Label(mainframe, text ='is equivalent to').grid(column=1, row=2, sticky=E)
ttk.Label(mainframe, text ='metres').grid(column=3, row=2, sticky=W)

for child in mainframe.winfo_children():
   child.grid_configure(padx=5, pady=5)

feet_entry.focus()
root.bind('<Return>', calculate)

root.mainloop() 
```

以上返回

```
 value = float(feet.get())
NameError: global name 'feet' is not defined. 
```

如果我“激活”该功能`def calculate(*arg)`并注释掉`import calculation_feet_metres`，转换器可以工作（从 Modern Tkinter 复制）。

我试图了解如何导入模块（在这种情况下，我还有一个包含相同`def calculate(*arg)`脚本的模块`calculation_feet_metres`）并从模块中调用一个函数。我不明白在哪里定义，也不知道如何在这种情况下定义全局。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T16:45:35.277

*从不同模块导入的函数在它们导入的*模块中看不到全局变量。

全局变量对于仅在其中定义函数的模块是“本地的”。

您可以将函数包装在 lambda 中：

```
ttk.Button(mainframe, text="Calculate", command = lambda: calculate(feet)).grid(column=3, row=3, sticky=W) 
```

并更改您的`calculate`函数以接受`feet`作为显式参数：

```
def calculate(feet): 
```

# ios - 哪个控件用于其中一个或值？

> ID：14295394
> 
> 赞同：1
> 
> 时间：2013-01-12T16:33:24.213
> 
> 标签：ios, objective-c, xcode

在我的 iOS 拼图应用中，用户可以选择 30 秒到 60 秒的持续时间。现在，我正在使用 UISlider 控件来实现这一点。我应该使用分段控件还是步进控件？

请指教。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T16:38:18.240

如果用户不能在 30 到 60 之间选择任何东西，那么分段控件

```
[ 30 | 60 ] 
```

是最合适的选择。

如果用户可以从连续范围中进行选择，则滑块是更好的选择。

```
48 -------------O------ 
```

如果值不连续，例如 30、35、40、45、50、55 和 60，那么步进器和标签可能更合适，尽管带有标签的滑块也可以。

```
40 [-|+] 
```

您还应该考虑控件将占用的空间量：通常，滑块需要比步进器和分段控件更多的水平空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T16:36:53.927

我个人会使用分段控件。由于它介于两个不同的选项之间，因此它可能是最好的选择。这样您就可以清楚地了解所选内容。如果您使用滑块或步进器，您可能会设置错误的期望，滑块通常可以让您选择一系列值，步进器也是如此。

# php - 有没有办法将 gd 图像资源变成文件流资源？

> ID：14295396
> 
> 赞同：2
> 
> 时间：2013-01-12T16:33:43.860
> 
> 标签：php, resources, stream, gd

> **可能重复：**
> [创建图像而不将其存储为本地文件](https://stackoverflow.com/questions/189368/creating-an-image-without-storing-it-as-a-local-file)

我需要用 gd 创建一个图像，然后用 php 中的 curl 将它上传到另一个服务器。

所以我遇到了一个问题：gd 图像资源不能用作 curl 的文件流资源。

有没有办法将 gd 图像资源变成文件流资源？

- 更新 -

本地磁盘不可写。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T17:09:24.997

您将无法将其用作资源，但这应该可以将图像的 JPEG 捕获到局部变量中。

```
ob_start();
imagejpeg($image);
$jpeg_image = ob_get_clean(); 
```

# algorithm - 计算文件中两个连续数字的顺序在 BASH 中的第二个文件中颠倒了多少次

> ID：14295399
> 
> 赞同：2
> 
> 时间：2013-01-12T16:34:15.820
> 
> 标签：algorithm, bash, awk

我遇到了以下问题：

给定 2 个包含 N 个数字的文件，例如

file1.dat: 1,2,3,4,5,6,7,8,9,0

file2.dat: 2,5,4,7,6,9,8,1,0,3

file2.dat 实际上只是第一个的改组版本。我想知道第一个文件中两个连续数字的顺序在第二个文件中改变了多少次（包含相同的数字）。例如，在文件一中我们开始寻找1和2，在第二个文件中，2在1之前，所以顺序发生了变化；在第一个文件中有 9，然后是 0，在第二个文件中，这个顺序保持不变，因为 9 在 0 之前。

我使用的实际数据大致由 26000 个数字组成，它们都是不同的。

我想到了类似的东西：

```
for(i=0; i<N-1; i++)
    for(j=0; j<N; j++)
      for(k=0 ; k<N; k++)
        if(B[j]==A[i] && B[k]==A[i+1] && k < j )
        count++

     print("The number of inversion is: %d\n",count) 
```

但我不知道如何在 awk 中编写它（我写了一个小 C 程序，但给我答案需要 5 个多小时）而且我不知道类似的东西是否可以在合理的时间内给我一个结果.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T18:04:57.923

我希望你的两个文件遵守一定的规则：

*   相同数量的不同数字，
*   两个文件都有单行

我没有做那些格式检查。看我的解决方案：

```
awk -F, 'FNR==NR{n=NF;for(i=1;i<=NF;i++)o[i]=$i;next;}
        {for(i=1;i<=NF;i++)v[$i]=i}
        END{ for(i=1;i<=n-1;i++) t+=v[o[i]]>v[o[i+1]]?1:0;
                print "inversions:",t;
        }' file1 file2 
```

测试：

```
kent$  head file1 file2
==> file1 <==
1,2,3,4,5,6,7,8,9,0

==> file2 <==
2,5,4,7,6,9,8,1,0,3

kent$  awk -F, 'FNR==NR{n=NF;for(i=1;i<=NF;i++)o[i]=$i;next;}
        {for(i=1;i<=NF;i++)v[$i]=i}
        END{ for(i=1;i<=n-1;i++) t+=v[o[i]]>v[o[i+1]]?1:0;
                print "inversions:",t;
        }' file1 file2
inversions: 5 
```

如果你想打印一些调试信息，比如打印反转对，请参见：

```
kent$  awk -F, 'FNR==NR{n=NF;for(i=1;i<=NF;i++)o[i]=$i;next;}
        {for(i=1;i<=NF;i++)v[$i]=i}
        END{ for(i=1;i<=n-1;i++) {

        if(v[o[i]]>v[o[i+1]]){
                print "inversion pair foud:"o[i],o[i+1]
                t++;
        }
        }
                print "inversions:",t;
        }' file1 file2

inversion pair foud:1 2
inversion pair foud:3 4
inversion pair foud:4 5
inversion pair foud:6 7
inversion pair foud:8 9
inversions: 5 
```

如果您想要一些其他信息，例如原始索引/顺序，更改顺序，它们也很容易添加。

希望能帮助到你。

**编辑**

如果您的数据文件是单列格式。尝试这个：

```
 awk -F, 'FNR==NR{o[NR]=$0;next;}{v[$0]=FNR;n=FNR}
        END{ for(i=1;i<=n-1;i++) t+=v[o[i]]>v[o[i+1]]?1:0;
                print "invertions:",t;
        }' file1 file2 
```

测试截屏。只是为了测试我刚刚写的录音脚本；）

![在此处输入图像描述](../Images/5c2a0469a65a99981542fd7876b6e5c6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:38:24.600

我知道您已经有了一个公认的干净答案。

只是分享：

```
sgeorge-mn:~ sgeorge$ cat stack.sh 
VALUE1=$1
VALUE2=$2
for POS in `sed 's/,/ /g' file1.dat`
do
((COUNT++))
if [[ $VALUE1 == $POS ]] ; then
    VAL1_POS=$COUNT
fi

if [[ $VALUE2 == $POS ]] ; then
        VAL2_POS=$COUNT
fi
done

for MATCH in `sed 's/,/ /g' file2.dat`
do
((COUNT2++))
if [[ $VALUE1 == $MATCH ]] ; then
        VAL1_POS2=$COUNT2
fi
if [[ $VALUE2 == $MATCH ]] ; then
        VAL2_POS2=$COUNT2
fi
done

if [[ $VAL1_POS -gt $VAL2_POS ]] ; then
    P1=1
fi
if [[ $VAL1_POS2 -gt $VAL2_POS2 ]] ; then
    P2=1
fi

if [[ $VAL1_POS -lt $VAL2_POS ]] ; then
    P1=2
fi
if [[ $VAL1_POS2 -lt $VAL2_POS2 ]] ; then
    P2=2
fi

if [[ $VAL1_POS -eq $VAL2_POS ]] ; then
    P1=3
fi
if [[ $VAL1_POS2 -eq $VAL2_POS2 ]] ; then
    P2=3
fi

if [[ $P1 == $P2 ]]; then
    echo "No order change"
else
    echo "Order changed"
fi 
```

如何执行脚本：

我假设以下：

*   两个文件具有完全相同的编号，顺序相同。
*   您不会将不存在的数字（不存在于`file*.dat`）作为脚本的输入

> ```
> sgeorge-mn:~ sgeorge$ bash stack.sh 5 7
> No order change
> sgeorge-mn:~ sgeorge$ bash stack.sh 4 5
> Order changed
> sgeorge-mn:~ sgeorge$ bash stack.sh 9 0
> No order change
> sgeorge-mn:~ sgeorge$ bash stack.sh 1 2
> Order changed 
> ```

# linux-kernel - 我的中断处理程序应该禁用中断还是 ARM 处理器自动执行它？

> ID：14295403
> 
> 赞同：3
> 
> 时间：2013-01-12T16:34:49.827
> 
> 标签：linux-kernel, arm, interrupt, interrupt-handling

我们小组正在使用自定义驱动程序来连接共享 I2C 总线上的四个 MAX3107 UART。四个 MAX3107 的中断连接到 ARM9 处理器（LPC3180 模块）上的一个 GPIO 引脚（即通过逻辑或运算共享中断）。当这些设备中的一个或多个中断时，它们会将配置为电平敏感中断的 GPIO 线拉低。我的问题涉及是否需要禁用处理程序代码中的特定中断线。（我应该补充一点，我们正在运行 Linux 2.6.10）。

根据我对中断的几个 ARM 特定应用说明的阅读，似乎当 ARM 处理器接收到中断时，它会自动禁用（屏蔽？）相应的中断线（在我们的例子中，这似乎是对应于我们选择的 GPIO 引脚）。如果这是真的，那么我们似乎不必在我们的中断处理程序代码中禁用此 GPIO 引脚的中断，因为这样做似乎是多余的（尽管它似乎工作正常）。换句话说，在我看来，如果 ARM 处理器在发生中断时自动禁用 GPIO 中断，那么如果有的话，我们的中断处理程序代码应该只需要在设备得到服务后重新启用中断。

我们使用的中断处理程序代码包括`disable_irq_nosync(irqno);`在处理程序的最开头和在处理程序`enable_irq()`末尾的相应代码。如果 ARM 处理器已经禁用了中断线（在硬件中），这些调用的效果是什么（即调用 to`disable_irq_nosync()`之后调用`enable(irq())`?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T17:08:31.693

来自 Arm 信息中心文档：

> 进入异常（中断）时：
> 
> *   对所有异常都禁用中断请求 (IRQ)
>     
>     
> *   对于 FIQ 和复位异常，禁用快速中断请求 (FIQ)。

然后它继续说：

> 处理 FIQ 会导致 IRQ 和随后的 FIQ 被禁用，从而在 FIQ 处理程序启用它们之前阻止它们被处理。这通常通过在处理程序结束时从 SPSR 恢复 CPSR 来完成。

因此，您不必担心禁用它们，但您必须担心重新启用它们。

您需要在例程结束时包含 enable_irq()，但您不需要在开始时禁用任何内容。我认为在硬件中调用 disable_irq_nosync(irqno) 之后在软件中调用它不会影响任何事情。因为硬件调用肯定是在软件调用有机会接管之前调用的。但是最好将其从代码中删除以遵循约定，而不是让下一个查看它的程序员感到困惑。

更多信息在这里：

[手臂信息中心](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0471c/BABGCFHB.html)

# django - Django失败中的CSRF

> ID：14295404
> 
> 赞同：0
> 
> 时间：2013-01-12T16:35:03.727
> 
> 标签：django, django-forms, django-templates

为什么在存在 {% csrf_token%} 我得到以下错误？

禁止 (403) CSRF 验证失败。请求中止。

这是我使用的示例视图，很长。

**视图.py**

```
def editModel(self,request, offset):
        if 'user' in request.session :
             user = request.session['user']
            if request.method == 'POST':
                if 'editModel' in request.POST:
                    offset = int(offset)
                    fields = ProfilModel.objects.filter(name=user)
                    workingModelsFiles = WorkingWithModelsFiles()
                    listModel = workingModelsFiles.getCurrentModel(user, offset)
                    modelView = self.listModels(user)[offset-1]
                    loadModels = "document.getElementById('x3dElement" + str(offset) + "').runtime.showAll();"
                    params = {'id ': offset,
                              'userName' : request.session['user'],
                              'surname' : fields[0].surname,
                              'listModel': listModel,
                              'model': modelView,
                              'bodyLoadModels': loadModels
                              }
                    params.update(csrf(request))
                    return render_to_response('editModel.html', params)

            else:
                offset = int(offset)
                fields = ProfilModel.objects.filter(name=user)
                workingModelsFiles = WorkingWithModelsFiles()
                listModel = workingModelsFiles.getCurrentModel(user, offset)
                modelView = self.listModels(user)[offset-1]
                loadModels = "document.getElementById('x3dElement" + str(offset) + "').runtime.showAll();"
                params = {'id ': offset,
                          'userName' : request.session['user'],
                          'surname' : fields[0].surname,
                          'listModel': listModel,
                          'model': modelView,
                          'bodyLoadModels': loadModels
                          }
                params.update(csrf(request))
                return render_to_response('editModel.html', params)
        else:
            return HttpResponseRedirect("/login/") 
```

它出现在模板 {% csrf_token %} 中再次给我一个 csrf 错误

**模板.html**

```
......
<div class="tab_container">
            <div id="tab1" class="tab_content">
                <table class="tablesorter" cellspacing="0"> 
                <tbody> 
                <form action="{% url 'edit_model' listModel.0.id_model  %}"  method="post" >
                {% csrf_token %}
                    {% for item in listModel %} 
                        <tr>
                            <td rowspan="3" style="width: 300px;"> {{ model | safe }} </td>
                            <td> Name Model: <i><input class="text_field" type="text" id='id_Model' name="Model" value="{{ item.modelName }}" /> </i> </td>
                        </tr>

                        <tr>
                            <td>  Author:  <i> <input class="text_field" type="text" id='id_Author' name="Author" value="{{ item.author }}" /> </i> </td>
                        </tr>
                        <tr>
                            <td> <input type="submit" name="editModel" value="Edit" /> </td>
                        </tr>
                    {% endfor %}
                </form>
                </tbody> 
                </table>
            </div><!-- end of #tab1 -->
....... 
```

设置.py

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:04:12.450

您是否尝试过使用 RequestContext 而不是 params.update(csrf(request))？喜欢：

```
params = {'id ': offset,
          'userName' : request.session['user'],
          'surname' : fields[0].surname,
          'listModel': listModel,
          'model': modelView,
          'bodyLoadModels': loadModels
          }
ctx = RequestContext(request, params)
return render_to_response('editModel.html', context_instance=ctx) 
```

# android - Android中基于SQLite查询和Join填充Activity

> ID：14295406
> 
> 赞同：1
> 
> 时间：2013-01-12T16:35:16.220
> 
> 标签：android, sqlite, mobile, android-sqlite

我应该首先指出我对 Android 开发非常陌生，如果我的问题看起来很愚蠢，我很抱歉。我正在尝试在应用程序中查询我的 SQLite 数据库以动态创建活动内容。这是我的数据库助手文件中的查询

```
 public Cursor getWhereToEatActivity (int LocationId)
{
    Cursor cursor = myDataBase.rawQuery("SELECT Location.locationId as _id,Location.title,Location.desc, location.address, location.hours, location.website, location.phone FROM " +
            "TripWhereToEat JOIN Trip ON TripWhereToEat.tripId = Trip.tripId JOIN Location ON " +
            "Location.locationId = TripWhereToEat.locationId where TripWhereToEat.tripId = ?",
            new String[] {Integer.toString(LocationId)});

    cursor.moveToFirst();
    return cursor;
} 
```

这是选择项目的位置：

```
 @Override
              public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {

                LocationListitem locationItem = (LocationListitem)lvItems.getItemAtPosition(position);

                int locationId = locationItem.getLocationId();

                // Pass the ID into the next activity
                Map<String, String> parms = new HashMap<String, String>();
                parms.put("locationId", Integer.toString(locationId));
                if (listType.equals("whattosee")) {
                    // switchActivity(WhatToSeeActivity.class, parms);
                }
                if (listType.equals("wheretostay")) {
                    // switchActivity(WhereToStayActivity.class, parms);
                }
                if (listType.equals("wheretoeat")) {
                    switchActivity(WhereToEatActivity.class, parms);
                }
              }
            }); 
```

这是活动切换到：

```
public class WhereToEatActivity extends FragmentActivityBase {

private int LocationId;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_where_to_eat);

    AndroidApplication app = (AndroidApplication)getApplication();

    DatabaseHelper myDbHelper = app.getDatabase(); // new DatabaseHelper(this);

    LocationId = Integer.valueOf(this.getParam("LocationId"));

    Cursor tripRecord = myDbHelper.getWhereToEatActivity(LocationId);

    tripRecord.moveToFirst();

    if (!tripRecord.isAfterLast()) {
        String name = tripRecord.getString(tripRecord.getColumnIndex("title"));
        String title = tripRecord.getString(tripRecord.getColumnIndex("desc"));
        String image = tripRecord.getString(tripRecord.getColumnIndex("image"));
        String address = tripRecord.getString(tripRecord.getColumnIndex("address"));

        ImageView mainImageView = (ImageView)findViewById(R.id.image);
        int resId = getResources().getIdentifier("com.integrativelogic.roadtrip:drawable/"+image, null, null); 
        Bitmap bitmap = BitmapFactory.decodeResource(getResources(),resId);
        if (bitmap != null)
            mainImageView.setImageBitmap (bitmap);    

        TextView nameView = (TextView)findViewById(R.id.name);
        nameView.setText(name);

        TextView titleView = (TextView)findViewById(R.id.title);

        titleView.setText(Html.fromHtml(title));
        titleView.setMovementMethod(LinkMovementMethod.getInstance());

        TextView addressView = (TextView)findViewById(R.id.address);
        addressView.setText(address);
    }

    tripRecord.close();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

这是我从 Logcat 得到的错误：

```
01-12 11:23:52.186: E/AndroidRuntime(15238): FATAL EXCEPTION: main
01-12 11:23:52.186: E/AndroidRuntime(15238): java.lang.RuntimeException: Unable to start  activity ComponentInfo{com.integrativelogic.roadtrip/com.integrativelogic.roadtrip.WhereToEatActivity}: java.lang.NumberFormatException: unable to parse '' as integer
01-12 11:23:52.186: E/AndroidRuntime(15238):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1821)
01-12 11:23:52.186: E/AndroidRuntime(15238):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1842)
01-12 11:23:52.186: E/AndroidRuntime(15238):    at android.app.ActivityThread.access$1500(ActivityThread.java:132)
01-12 11:23:52.186: E/AndroidRuntime(15238):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
01-12 11:23:52.186: E/AndroidRuntime(15238):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-12 11:23:52.186: E/AndroidRuntime(15238):    at android.os.Looper.loop(Looper.java:150)
01-12 11:23:52.186: E/AndroidRuntime(15238):    at android.app.ActivityThread.main(ActivityThread.java:4263)
01-12 11:23:52.186: E/AndroidRuntime(15238):    at java.lang.reflect.Method.invokeNative(Native Method)
01-12 11:23:52.186: E/AndroidRuntime(15238):    at java.lang.reflect.Method.invoke(Method.java:507)
01-12 11:23:52.186: E/AndroidRuntime(15238):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
01-12 11:23:52.186: E/AndroidRuntime(15238):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
01-12 11:23:52.186: E/AndroidRuntime(15238):    at dalvik.system.NativeStart.main(Native Method)
01-12 11:23:52.186: E/AndroidRuntime(15238): Caused by: java.lang.NumberFormatException: unable to parse '' as integer
01-12 11:23:52.186: E/AndroidRuntime(15238):    at java.lang.Integer.parseInt(Integer.java:362)
01-12 11:23:52.186: E/AndroidRuntime(15238):    at java.lang.Integer.parseInt(Integer.java:332)
01-12 11:23:52.186: E/AndroidRuntime(15238):    at java.lang.Integer.valueOf(Integer.java:506)
01-12 11:23:52.186: E/AndroidRuntime(15238):    at com.integrativelogic.roadtrip.WhereToEatActivity.onCreate(WhereToEatActivity.java:27)
01-12 11:23:52.186: E/AndroidRuntime(15238):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
01-12 11:23:52.186: E/AndroidRuntime(15238):    at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1785) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:50:05.320

由于您是新手，所以当您的应用程序突然崩溃时，我将解释一下调试过程，如下所示：

第一部分是读取 LogCat 输出的最后几行：

> > 引起：java.lang.NumberFormatException：无法将''解析为整数

所以我们知道尝试使空字符串成为整数是一个问题。您只能从包含数字的字符串创建整数。

您将看到日志中该行下方的几行

> > 在 com.integrativelogic.roadtrip.WhereToEatActivity.onCreate(WhereToEatActivity.java:27)

那么我们知道它发生在您的 WhereToEatActivity 的第 27 行，我不会计算您在此处发布的内容的行数，但我假设是这一行

```
LocationId = Integer.valueOf(this.getParam("LocationId")); 
```

所以我想可以安全地假设您遇到此错误的原因是因为没有参数“LocationId”或参数为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T16:51:55.630

你的错误就在这里：

```
Caused by: java.lang.NumberFormatException: unable to parse '' as integer 
```

我怀疑你这里有一个空的位置：

```
LocationId = Integer.valueOf(this.getParam("LocationId")); 
```

如果此处引用了该行：

```
at com.integrativelogic.roadtrip.WhereToEatActivity.onCreate(WhereToEatActivity.java:27) 
```

# javascript - 在没有 jQuery 的情况下将不同域上的网站的一部分下载到 JavaScript 中的变量？

> ID：14295409
> 
> 赞同：0
> 
> 时间：2013-01-12T16:35:21.720
> 
> 标签：javascript, xmlhttprequest

概括：

我希望将网页的前 4kB（实际上是 MP3，但不重要）从另一个域保存到 JavaScript 中的变量，最好不使用 jQuery，因为我的页面上的其他任何内容都不需要 jQuery。这是我之前在 python 应用程序中使用的，以实现相同的目标：

```
host = 'http://www.wikipedia.org/somepath/tosome/file.mp3'
req = urllib2.Request(host, headers={'User-Agent' : "Magic Browser"})
response = urllib2.urlopen(req).read(4*1024) 
```

.

背景：

我的目标是只获取几千字节的 MP3 文件（来自不同的域），这样我就可以从中剥离 ID3 信息。然而，经过大量的谷歌搜索，并弄乱了 xmlhttprequests、jsonp 和其他一些东西，我仍然找不到满足我所有要求的东西。阅读这篇文章 - [将 .ajax() 与 JSONP 结合使用的基本示例？](https://stackoverflow.com/questions/5943630/basic-example-of-using-ajax-with-jsonp) 真的很有帮助，但我似乎无法弄清楚如何限制类似的回调大小（也许限制脚本源大小？）而且我真的不想包含 jQuery 库。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:10:43.150

注意：我发布了一个包含 javascript + php 的解决方案。但是您可以使用任何其他编程语言，例如 python（只有语法更改。不是逻辑）。

. 使用 Ajax 在您的服务器中调用 php 文件

. 在您的服务器端 php 文件中：

使用 curl 读取跨域 html。

```
$url = "http://www.google.com;
$curl = curl_init($url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, TRUE);
$output = curl_exec($curl);
curl_close($curl); 
```

. 然后使用 PHP 的 DOM 对象模型来解析 HTML - ( [http://php.net/manual/en/domdocument.loadhtml.php](http://php.net/manual/en/domdocument.loadhtml.php) )。

例如：

```
$domObj = new DOMDocument;
$domObj->loadHTML( $output);
$divs = $domObj->getElementsByTagName('div'); 
```

. 将 o/p html 内容返回给客户端。

. 最后将 ajax 响应 (html) 收集到本地 javascript 变量中。

# image - 如何在silverlight Windows Phone 应用程序中添加和使用资源？

> ID：14295413
> 
> 赞同：0
> 
> 时间：2013-01-12T16:35:58.797
> 
> 标签：image, windows-phone-7, resources

我看到有一个添加资源文件（.resx）的选项。我可以创建 .resx 文件并在那里添加图像。现在我想将 image1.source（在 .cs 文件中）从资源文件更改为 image.png。我怎样才能做到这一点？我的 BuildAction 设置为“页面”，我不想更改此值...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:53:20.867

好的，我通过添加隐藏的 (Visibility=Collapse) 图像解决了这个问题： image2, image3
在 image1_Tap() 方法中我有：

```
if(image1.source==image2.source)  
image1.source=image3.source;  
else image1.source=image2.source; 
```

# css - CSS3 从左边旋转？

> ID：14295414
> 
> 赞同：1
> 
> 时间：2013-01-12T16:36:00.667
> 
> 标签：css, animation, rotation, position

我正在尝试为子菜单制作一种“折叠”效果，但我遇到了一些问题。

[请参阅此代码笔： http](http://codepen.io/anon/pen/Lotav) ://codepen.io/anon/pen/Lotav

如您所见，默认情况下，子菜单旋转 90 度。当一个菜单项悬停时，子菜单动画到 0 度，给它一种折叠的效果。问题是，当子菜单开始动画时（90 度），它在它的宽度内居中。尽管子菜单的宽度为 X 像素，但在旋转时，宽度会缩小，然后在实际宽度 (X) 内居中。为了达到想要的效果，子菜单*在旋转时必须位于左侧*。

我觉得很奇怪的第二个问题是，虽然我将子菜单的旋转设置为 90 度，但看起来并不完全如此。它有点重叠。90 度应该使它完全垂直（因此不可见），还是我错过了什么？

我只在 Chrome 24 和 Firefox 18 中测试过效果。我无法在 Firefox 中获得 3d 效果，它只是在宽度上缩小了，而在 chrome 中你实际上可以看到它旋转。我在 codepen 中打开了自动前缀选项，但我不知道它是否正常工作。

这是一个不理想效果的演示：http: [//davidwalsh.name/demo/folding-animation.php](http://davidwalsh.name/demo/folding-animation.php)

唯一的区别是我希望它从左侧而不是顶部“折叠”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T16:56:26.540

第一个问题：更改`transform-origin`子菜单的默认值。利用：

```
transform-origin: left; 
```

第二个问题是由`perspective: 1000;`- 如果您将其删除并仅在悬停时添加它，您将不会遇到此问题。

[**演示**](http://codepen.io/thebabydino/pen/AHlnz)。

# c++ - C++ cout 在 for 循环中覆盖自身

> ID：14295420
> 
> 赞同：6
> 
> 时间：2013-01-12T16:36:46.487
> 
> 标签：c++, cout

此 for 循环中的 cout 语句：

```
for (vector<Student>::iterator qw = students.begin(); qw != students.end(); ++qw){
    Student a = *qw;
    name = a.getName();
    regno = a.getRegNo();
    std::cout << "Name: "<< name << " Reg Number: " << regno << endl;
} 
```

正在创建一些奇怪的行为， cout 应该打印的内容是这样的：

> 姓名：迈克·桑德森 注册号：10101

然而，它实际上打印出来：

> 注册号：10101on

在我看来，在 cout 语句的第二部分之后，它会回到行首并覆盖自身，但为什么呢？希望你们能帮助我，如果您需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-12T16:39:22.457

这就是回车符的作用（即`\r`在字符串文字中）。我假设`name`字符串`\r`的末尾有一个。您需要弄清楚它是如何到达那里并将其删除的。

我猜你可能从一个文件中读取了名称，并且该文件是在 Windows 上创建的，默认情况下以 结尾`\r\n`。从文本文件读取时，C++ 通常会为您处理行尾之间的转换，但如果您将文件作为二进制文件读取并`\n`用作分隔符，则会遇到此问题。将`\r`被视为行的一部分。

# ms-access - 如果主报告为空，则显示子报告

> ID：14295421
> 
> 赞同：1
> 
> 时间：2013-01-12T16:36:48.710
> 
> 标签：ms-access

我有一个包含报告的 Access 2010 数据库。该报告从表单中获取两个值来过滤结果。报告由主报告和子报告组成。

然而，我遇到了一个问题，如果主报告没有返回任何记录，即使*确实*包含记录，子报告也不会显示。我已将输入变量的内容放到子报表中，因此我可以看到子报表正在获取正确的输入变量。唉，如果主报告是空白的，它什么都不显示？

如果主报告为空，是否总是显示子报告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:07:52.167

如果您报告依赖于子表单控件的链接子字段和主字段，则可以通过将链接主字段设置为控件的名称而不是字段的名称来完成此工作。例如，假设您有一个名为 的字段`AText`，它绑定到一个控件`AText`，子表单具有链接子字段和主字段：

```
 Link Master Fields: AText
  Link Child Fields:  AText 
```

这对于使用向导创建的表单是正常的。现在开始篡改。将控件重命名为`Atext`，`txtAtext`更改链接主字段：

```
 Link Master Fields: txtAText
  Link Child Fields:  AText 
```

并添加一点代码：

```
Private Sub Report_NoData(Cancel As Integer)
    Me.txtAText.ControlSource = "=""abc"""
End Sub 
```

其中值“abc”是出现在子表单的记录源中的值，因此子表单将填充所有“abc”记录。显然，您必须更改上述内容以适合您的特定数据。

# c - C sizeof char 指针

> ID：14295426
> 
> 赞同：1
> 
> 时间：2013-01-12T16:36:57.500
> 
> 标签：c, pointers, char, sizeof

为什么这个 char 变量的大小等于 1？

```
int main(){

char s1[] = "hello";

fprintf(stderr, "(*s1) : %i\n", sizeof(*s1) )    // prints out 1

} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-12T16:38:00.977

注意：最初的问题有一点改变：*为什么这个 char 指针的大小是 1*

`sizeof(*s1)`

是相同的

`sizeof(s1[0])`这是`char`对象的大小，而不是`char`指针的大小。

类型对象的大小`char`始终`1`在 C 中。

要获取`char`指针的大小，请使用以下表达式：`sizeof (&s1[0])`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-12T16:37:50.437

> **为什么这个 char 变量的大小等于 1？**

因为C 标准`char`保证 a 的大小是`1`字节。

```
*s1 == *(s1+0) == s1[0] == char 
```

如果要获取字符指针的大小，则需要将字符指针传递给`sizeof`：

```
sizeof(&s1[0]); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-12T16:38:39.673

因为您正在推迟从数组中衰减的指针，`s1`所以您获得了第一个指向元素的值，即 a`char`和`sizeof(char) == 1`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-12T16:38:31.927

`sizeof(*s1)`表示“由”指向的元素的大小`s1`。Now`s1`是一个`char`s 的数组，当被视为一个指针时（它“衰减”为一个指针），取消引用它会产生一个 type 的值`char`。

而且，永远`sizeof(char)`是**一个。**C标准要求它是这样的。

如果您想要整个数组的大小，请`sizeof(s1)`改用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-28T10:59:28.427

```
sizeof(*s1) means its denotes the size of data types which used. In C there are 1 byte used by character data type that means sizeof(*s1) it directly noticing to the character which consumed only 1 byte.

If there are any other data type used then the **sizeof(*data type)** will be changed according to type. 
```

# java - Android：语音级可视化的录音

> ID：14295427
> 
> 赞同：13
> 
> 时间：2013-01-12T16:37:11.833
> 
> 标签：java, android, audio, audio-recording

我需要创建一个 android 应用程序，用于在显示语音（声音）级别可视化的同时录制语音。

我已经创建了一个录音应用程序，但我无法添加声级可视化。我该怎么做？

请有人帮我提供建议或示例教程链接或代码。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2015-05-07T06:54:58.790

像这样创建一个 xml activity_recording.xml。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="180dp"
    android:layout_alignParentBottom="true"
    android:background="#231f20" >

    <ali.visualiser.VisualizerView
        android:id="@+id/visualizer"
        android:layout_width="220dp"
        android:layout_height="75dp"
        android:layout_centerHorizontal="true"
        android:layout_margin="5dp" />

    <TextView
        android:id="@+id/txtRecord"
        android:layout_width="wrap_content"
        android:layout_height="40dp"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="25dp"
        android:gravity="center"
        android:text="Start Recording"
        android:textColor="@android:color/white"
        android:textSize="30sp" />

</RelativeLayout> 
```

创建一个自定义的visualizerView，如下所示。

```
package ali.visualiser;

import java.util.ArrayList;
import java.util.List;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.util.AttributeSet;
import android.view.View;

public class VisualizerView extends View {
    private static final int LINE_WIDTH = 1; // width of visualizer lines
    private static final int LINE_SCALE = 75; // scales visualizer lines
    private List<Float> amplitudes; // amplitudes for line lengths
    private int width; // width of this View
    private int height; // height of this View
    private Paint linePaint; // specifies line drawing characteristics

    // constructor
    public VisualizerView(Context context, AttributeSet attrs) {
        super(context, attrs); // call superclass constructor
        linePaint = new Paint(); // create Paint for lines
        linePaint.setColor(Color.GREEN); // set color to green
        linePaint.setStrokeWidth(LINE_WIDTH); // set stroke width
    } 

    // called when the dimensions of the View change
    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        width = w; // new width of this View
        height = h; // new height of this View
        amplitudes = new ArrayList<Float>(width / LINE_WIDTH);
    } 

    // clear all amplitudes to prepare for a new visualization
    public void clear() {
        amplitudes.clear();
    } 

    // add the given amplitude to the amplitudes ArrayList
    public void addAmplitude(float amplitude) {
        amplitudes.add(amplitude); // add newest to the amplitudes ArrayList

        // if the power lines completely fill the VisualizerView
        if (amplitudes.size() * LINE_WIDTH >= width) {
            amplitudes.remove(0); // remove oldest power value
        } 
    } 

    // draw the visualizer with scaled lines representing the amplitudes
    @Override
    public void onDraw(Canvas canvas) {
        int middle = height / 2; // get the middle of the View
        float curX = 0; // start curX at zero

        // for each item in the amplitudes ArrayList
        for (float power : amplitudes) {
            float scaledHeight = power / LINE_SCALE; // scale the power
            curX += LINE_WIDTH; // increase X by LINE_WIDTH

            // draw a line representing this item in the amplitudes ArrayList
            canvas.drawLine(curX, middle + scaledHeight / 2, curX, middle
                    - scaledHeight / 2, linePaint);
        } 
    } 

} 
```

创建 RecordingActivity 类，如下所示。

包 ali.visualizer；

```
import java.io.File;
import java.io.IOException;

import android.app.Activity;
import android.media.MediaRecorder;
import android.media.MediaRecorder.OnErrorListener;
import android.media.MediaRecorder.OnInfoListener;
import android.os.Bundle;
import android.os.Environment;
import android.os.Handler;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.TextView;

public class RecordingActivity extends Activity {
    public static final String DIRECTORY_NAME_TEMP = "AudioTemp";
    public static final int REPEAT_INTERVAL = 40;
    private TextView txtRecord;

    VisualizerView visualizerView;

    private MediaRecorder recorder = null;

    File audioDirTemp;
private boolean isRecording = false;

    private Handler handler; // Handler for updating the visualizer
    // private boolean recording; // are we currently recording?

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_recording);

        visualizerView = (VisualizerView) findViewById(R.id.visualizer);

        txtRecord = (TextView) findViewById(R.id.txtRecord);
        txtRecord.setOnClickListener(recordClick);

        audioDirTemp = new File(Environment.getExternalStorageDirectory(),
                DIRECTORY_NAME_TEMP);
        if (audioDirTemp.exists()) {
            deleteFilesInDir(audioDirTemp);
        } else {
            audioDirTemp.mkdirs();
        }

        // create the Handler for visualizer update
        handler = new Handler();
    }   

    OnClickListener recordClick = new OnClickListener() {

        @Override
        public void onClick(View v) {

            if (!isRecording) {
                // isRecording = true;

                txtRecord.setText("Stop Recording");

                recorder = new MediaRecorder();

                recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
                recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
                recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
                recorder.setOutputFile(audioDirTemp + "/audio_file"
                        + ".mp3");

                OnErrorListener errorListener = null;
                recorder.setOnErrorListener(errorListener);
                OnInfoListener infoListener = null;
                recorder.setOnInfoListener(infoListener);

                try {
                    recorder.prepare();
                    recorder.start();
                    isRecording = true; // we are currently recording
                } catch (IllegalStateException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
                handler.post(updateVisualizer);

            } else {

                txtRecord.setText("Start Recording");

                releaseRecorder();
            }

        }
    };

    private void releaseRecorder() {
        if (recorder != null) {
            isRecording = false; // stop recording
            handler.removeCallbacks(updateVisualizer);
            visualizerView.clear();
            recorder.stop();
            recorder.reset();
            recorder.release();
            recorder = null;
        }
    }   

    public static boolean deleteFilesInDir(File path) {

        if( path.exists() ) {
            File[] files = path.listFiles();
            if (files == null) {
                return true;
            }
            for(int i=0; i<files.length; i++) {

                if(files[i].isDirectory()) {                

                }
                else {
                    files[i].delete();
                }
            }
        }
        return true;
    }

    @Override
    protected void onDestroy() {

        super.onDestroy();
        releaseRecorder();
    }

    // updates the visualizer every 50 milliseconds
    Runnable updateVisualizer = new Runnable() {
        @Override
        public void run() {
            if (isRecording) // if we are already recording
            {
                // get the current amplitude
                int x = recorder.getMaxAmplitude();
                visualizerView.addAmplitude(x); // update the VisualizeView
                visualizerView.invalidate(); // refresh the VisualizerView

                // update in 40 milliseconds
                handler.postDelayed(this, REPEAT_INTERVAL);
            }
        }
    };

} 
```

**结果**

这是它的外观： [https ://www.youtube.com/watch?v=BoFG6S02GH0](https://www.youtube.com/watch?v=BoFG6S02GH0)

当它到达末尾时，动画会按预期继续：擦除图形的开头。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-31T19:55:30.553

我喜欢阿里的回答，但这里有一个更简单的版本，性能要好得多。真正的速度来自于使视图类的`onDraw`方法尽可能快。首先通过在绘图循环之外进行绘图不需要的任何计算将正确的值存储在内存中，然后将完全填充的结构传递给绘图例程，以允许硬件优化绘制多条线。

我启动了我的 RecordingActivity 并将其设置为全屏，但您可以创建布局资源或在任何地方添加视图。

[![在此处输入图像描述](../Images/d799951415fd6c4c1400aba072104b34.png)](https://i.stack.imgur.com/UpqfF.jpg)

**活动：**

```
public class RecordingActivity extends Activity {
    private VisualizerView visualizerView;
    private MediaRecorder recorder = new MediaRecorder();
    private Handler handler = new Handler();
    final Runnable updater = new Runnable() {
        public void run() {
            handler.postDelayed(this, 1);
            int maxAmplitude = recorder.getMaxAmplitude();
            if (maxAmplitude != 0) {
                visualizerView.addAmplitude(maxAmplitude);
            }
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_recording);
        visualizerView = (VisualizerView) findViewById(R.id.visualizer);
        try {
            recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
            recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
            recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
            recorder.setOutputFile("/dev/null");
            recorder.prepare();
            recorder.start();
        } catch (IllegalStateException | IOException ignored) {
        }
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        handler.removeCallbacks(updater);
        recorder.stop();
        recorder.reset();
        recorder.release();
    }

    @Override
    public void onWindowFocusChanged(boolean hasFocus) {
        super.onWindowFocusChanged(hasFocus);
        handler.post(updater);
    }
} 
```

**看法：**

```
public class VisualizerView extends View {
    private static final int MAX_AMPLITUDE = 32767;

    private float[] amplitudes;
    private float[] vectors;
    private int insertIdx = 0;
    private Paint pointPaint;
    private Paint linePaint;
    private int width;
    private int height;

    public VisualizerView(Context context, AttributeSet attrs) {
        super(context, attrs);
        linePaint = new Paint();
        linePaint.setColor(Color.GREEN);
        linePaint.setStrokeWidth(1);
        pointPaint = new Paint();
        pointPaint.setColor(Color.BLUE);
        pointPaint.setStrokeWidth(1);
    }

    @Override
    protected void onSizeChanged(int width, int h, int oldw, int oldh) {
        this.width = width;
        height = h;
        amplitudes = new float[this.width * 2]; // xy for each point across the width
        vectors = new float[this.width * 4]; // xxyy for each line across the width
    }

    /**
     * modifies draw arrays. cycles back to zero when amplitude samples reach max screen size
     */
    public void addAmplitude(int amplitude) {
        invalidate();
        float scaledHeight = ((float) amplitude / MAX_AMPLITUDE) * (height - 1);
        int ampIdx = insertIdx * 2;
        amplitudes[ampIdx++] = insertIdx;   // x
        amplitudes[ampIdx] = scaledHeight;  // y
        int vectorIdx = insertIdx * 4;
        vectors[vectorIdx++] = insertIdx;   // x0
        vectors[vectorIdx++] = 0;           // y0
        vectors[vectorIdx++] = insertIdx;   // x1
        vectors[vectorIdx] = scaledHeight;  // y1
        // insert index must be shorter than screen width
        insertIdx = ++insertIdx >= width ? 0 : insertIdx;
    }

    @Override
    public void onDraw(Canvas canvas) {
        canvas.drawLines(vectors, linePaint);
        canvas.drawPoints(amplitudes, pointPaint);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T17:21:43.883

如果您使用`MediaRecorder`该类并且基于峰值幅度的可视化是可以的，您可以使用[getMaxAmplitude()](http://developer.android.com/reference/android/media/MediaRecorder.html#getMaxAmplitude%28%29)方法连续轮询“自上次调用以来采样的最大绝对幅度”。
将该幅度缩小为一个索引，该索引确定要点亮多少应用程序的图形音量条并设置好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-18T08:16:19.147

我的方法是基于 activedecay 和 Ali 的答案，并且我添加了显示 DPI 比例，因为 dp 是按屏幕密度缩放的，所以 320 dpi 中的 1 个像素不是 420 dpi 中的 1 个像素。我遇到的问题是可视化器在不同屏幕上的移动速度不同。

我也没有发现，为什么画布只从视图 API 28 的开头开始绘制。但无论如何看起来都不坏。

关于 dpi 缩放的信息： [Android 开发者/支持不同的像素密度](https://developer.android.com/training/multiscreen/screendensities)

```
package com.example.mediarecorderdemo.views;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.util.AttributeSet;
import android.util.Log;
import android.view.View;

import androidx.annotation.Nullable;

import java.util.ArrayList;

import static com.example.mediarecorderdemo.RecordingActivity.DEBUG;

public class VisualizerView extends View {
    private static final int MAX_AMPLITUDE = 32767;

    private ArrayList<Float> amplitudes;
    private Paint linePaint;
    private int width;
    private int height;
    private int density;
    private float stroke;

    public VisualizerView(Context context, @Nullable AttributeSet attrs) {
        super(context, attrs);
        density = this.getResources().getDisplayMetrics().densityDpi;   //Get the display DPI

        linePaint = new Paint();
        linePaint.setColor(Color.GREEN);
        linePaint.setAntiAlias(true);  //Add AntiAlias for displaying strokes that are less than 1
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldW, int oldH) {
        width = w;
        height = h;
        amplitudes = new ArrayList<>(width * 2);
        stroke =(width * ((float)density / 160)) / 1000; //Calculate actual pixel size for the view based on view width and dpi
        linePaint.setStrokeWidth(stroke);
    }

    /**
     * Add a new value of int to the visualizer array
     * @param amplitude Int value
     */
    public void addAmplitude(int amplitude){
        invalidate();
        float scaledHeight = ((float) amplitude / MAX_AMPLITUDE) * (height -1);
        amplitudes.add(scaledHeight);
    }

    /**
     * Clears Visualization
     */
    public void clear(){
        amplitudes.clear();
    }

    @Override
    protected void onDraw(Canvas canvas) {
        int middle = height / 2; // get the middle of the View
        float curX = 0; // start curX at zero

        // for each item in the amplitudes ArrayList
        for (float power : amplitudes) {

            // draw a line representing this item in the amplitudes ArrayList
            canvas.drawLine(curX, middle + power / 2, curX, middle
                    - power / 2, linePaint);

            curX += stroke; // increase X by line width
        }
    }
} 
```

# php - 将值传递给脚本内的 PHP 变量

> ID：14295429
> 
> 赞同：-2
> 
> 时间：2013-01-12T16:37:27.653
> 
> 标签：php, javascript, jquery

我在脚本中有一些 PHP 代码，所以我需要 JavaScript 值作为 PHP 变量，如下所示：

```
<script>
;
 var js_var = 123;
 var php_var = <?php js_var ?>;
 alert(php_var);
;
</script> 
```

使用 jQuery 将值发送到 PHP 页面将返回该值，但不会作为 PHP 变量返回：

```
$.get("page.php", {js_var_name: js_var}, function(data) {alert(data)}); 
```

我还尝试了所有 jQuery AJAX 函数：load()、post() 和 ajax() 方法，它们都没有按照上面的要求传回 PHP 的值。

是否可以用 jQuery 实现上述功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T16:42:52.853

您可能有以下语法问题：

```
var php_var = <?php js_var ?>; 
```

除非你使用`define()`了你的 php 变量，否则`$`你需要回显它以便打印到页面上

```
var php_var = <?php echo $js_var ?>; 
```

如果您假设 php 将读取先前的 javascript `js_var=123`，则它不会。Javascript 是客户端语言，php 是服务器端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T16:43:19.617

你不能简单地混合 PHP 和 JavaScript。前者在服务器上执行，后者在客户端，即在用户的浏览器中执行。为了将值从 PHP 传递到 JavaScript，您需要通过 PHP 输出 JavaScript 代码或对 PHP 脚本执行 AJAX 请求，正如您所尝试的那样。使用 AJAX 时，让 PHP 脚本返回 JSON 字符串是最简单的解决方案。使用结果调用此脚本时`$.get()`，结果将存储在 JavaScript 变量中，您可以从那里访问所有值。

花点时间深吸一口气……然后再次开始考虑你的示波器。

# java - 在 Spring 上下文文件中定义集合过滤器的最佳实践

> ID：14295434
> 
> 赞同：0
> 
> 时间：2013-01-12T16:38:22.640
> 
> 标签：java, spring, collections, guava, lambdaj

定义过滤器以应用于弹簧上下文文件中的对象集合的最佳实践是什么？

* * *

假设我有一组人员 ( `Collection<Person> people`)。每个人都有`age/name/sex/occupation/email`财产。

我需要根据一些标准和简单的谓词创建这些人的子组。示例分组可能是：

1.  `sex=Male`
2.  `sex=Female && age>30 && occupation=IT`
3.  `sex=Male && occupation=IT && email endsWith "aol.com"`

我可以看到使用 Guava Predicates 执行此操作的相对直接的路线，并`Collections2.filter()`通过在代码中定义`Predicate(s)`，将它们拉入上下文文件中的集合，并在需要时注入适当的 Predicates 集合。

`JFilter`也是一个可能的竞争者，因为您可以将过滤器定义为字符串。LambdaJ 似乎是在 Java 中过滤集合的另一个流行选项，但如何允许从 Spring 上下文驱动过滤逻辑并不明显。

* * *

有没有更好的方法来解决这个问题？

请注意，我想避免每次都调用数据库，因为我已经在内存中拥有了我关心的对象集合。

# ios - 无法在我的 iOS 应用程序中正确使用 github 库

> ID：14295437
> 
> 赞同：0
> 
> 时间：2013-01-12T16:38:45.767
> 
> 标签：ios, objective-c, github, uinavigationcontroller, interface-builder

我想实现一个基于 UINavigationController 的自定义菜单，但是标准的 Cocoa 类不能自动排队视图控制器之间的转换，所以我决定使用这个简单的 NavController 实现[https://github.com/Plasma/BufferedNavigationController](https://github.com/Plasma/BufferedNavigationController)没有这个问题。但我不能在我的项目中使用它。

在自述文件中，他们说“要使用，只需将提供的文件添加到您的项目中，并将您的 UINavigationController 类更改为从 Interface Builder 中的 BufferedNavigationController 继承。” 但我不明白如何在 Interface Builder 中更改继承。我试图在我的代码中这样做：

```
//Here is my custom NavController which is inherited BufferedNavigationController instead of UINavigationController

@interface CPNMenuController : BufferedNavigationController
   {
UITableView *menuPicker; ..... 
```

但什么也没发生 - 正如我所见，方法是从标准 UINavigationController 调用的。我明白 - 这是一个愚蠢的问题，但我是 iOS 开发的新手，可能是我没有正确理解 README 中的某些内容，或者我做错了什么。我需要帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:46:22.363

在 Storyboard 中，选择要更改的 UINavigationController。打开 Identity Inspector 面板（右侧面板的第三个）。在“自定义类”下，您应该能够在列表中看到 BufferedNavigationController（或您的子类 CPNMenuController）。选择它。

# javascript - 我可以使用 d3.js 与 geoJSON 数据交叉引用纬度/经度坐标吗？

> ID：14295439
> 
> 赞同：0
> 
> 时间：2013-01-12T16:39:04.387
> 
> 标签：javascript, d3.js, gis

假设我正在可视化[us.json](https://gist.github.com/raw/4090846/b8c888f35c42400a080ab03c31a7649e0b9bc9a8/us.json)提供的美国县数据......如果我获得了某个位置的纬度/经度坐标，我是否可以使用 d3.js 以某种方式将其与县交叉引用例如，我可以更改位置所在县的颜色吗？

# facebook - 自定义 Facebook 授权对话框？

> ID：14295440
> 
> 赞同：-1
> 
> 时间：2013-01-12T16:39:07.910
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

这是自定义 Facebook 对话框？类似的怎么办？有没有“官方方式”来做到这一点？

见： [http ://www.facebook.com/yazigi.oficial/app_352476968122012?ref=ts](http://www.facebook.com/yazigi.oficial/app_352476968122012?ref=ts)

我在文档和示例的源代码中没有发现任何类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:33:08.790

# android - 如何在 android 中更改 datepicker holotheme 日视图

> ID：14295445
> 
> 赞同：0
> 
> 时间：2013-01-12T16:39:30.540
> 
> 标签：android, android-widget, android-datepicker

如何将这一天的视图更改为正常？我的意思不是在月视图日历中显示日期，而是以月份和年份的形式显示日期？

```
 <DatePicker
            android:id="@+id/datePicker"
            android:layout_width="312dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="5dp" /> 
```

![全息主题](../Images/e8d7dd159f9aefb6966f31b190681ddf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:13:09.580

如果我正确理解您的问题，您希望隐藏日历视图但仍显示日/月/年选择器。为此，请将您的 XML 更改为以下内容：

```
<DatePicker
    android:id="@+id/datePicker"
    android:layout_width="312dp"
    android:layout_height="wrap_content"
    android:layout_marginTop="5dp"
    android:calendarViewShown="false" /> 
```

# grails - 如何删除 DbdocController？

> ID：14295446
> 
> 赞同：4
> 
> 时间：2013-01-12T16:39:31.770
> 
> 标签：grails, plugins, database-migration

我已经安装了 Grails 2.1.2 并创建了一个项目。

当我运行我的项目时，默认页面在可用控制器下列出以下内容：

```
grails.plugin.databasemigration.DbdocController 
```

不想处理这个控制器（默认情况下显然不起作用），我决定尝试摆脱它。当然，我发现的第一件事是我的项目`controllers`目录下没有这样的控制器。

读到这个控制器与数据库迁移插件有关，我立即使用`grails uninstall-plugin`命令卸载了这个插件。根据 Grails，这是成功的，但控制器仍然存在。我尝试的下一件事是从我的项目`plugins`目录中删除这个插件，但我发现我的项目中没有这样的目录。

我将如何摆脱这个虚拟控制器？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T20:58:49.340

如果您不需要数据库迁移（这不太可能），那么您可以通过从`BuildConfig.groovy`. 没有其他方法可以移除控制器。请注意，它在 prod 中默认禁用，因此无需将其删除。

# wix - 如何通过 .Net 设置或补丁技术仅交付更改

> ID：14295452
> 
> 赞同：0
> 
> 时间：2013-01-12T16:39:52.863
> 
> 标签：wix, visual-studio-2005, patch, setup-deployment

我们有我们的业务应用程序，大小为 64 MB。每次添加新功能或更改现有功能时，我们都会重建设置并交付给客户。所以这意味着每次我们向客户提供 64 MB 或更多的数据。

我们有我们的主要赢形式项目，在我们的项目解决方案中还有许多其他类库项目。我正在寻找一种简单的方法来只向我们的客户提供更改。

可能会在我们的 win 表单项目中进行更改，也可能在任何类库中进行更改。因此，无论在哪里进行更改，我都只通过设置交付更改，我希望客户端安装该设置或运行任何 exe 文件，并可以看到我们在代码中所做的更改。我使用 VS2005 设置创建选项创建设置。如何建议我创建任何客户端只需安装并获取其应用程序更改的应用程序之类的补丁的最佳选择。给我最好的想法来详细实施。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:59:44.693

当使用 Wix 为您的项目生成安装程序时，[您还可以使用它来生成一个补丁文件，该文件将仅更新更改的文件](http://wix.sourceforge.net/manual-wix2/patch_building.htm)。

Visual Studio 2005 安装项目并不真正支持补丁构建等。它是构建安装程序的基本解决方案。然而，Wix 是 Microsoft 在内部用于为 Visual Studio 2012 和其他产品构建设置体验的工具。这里有一个[非常广泛的演练](http://wix.tramontana.co.hu/tutorial)。

Wix 确实具有陡峭的学习曲线。如果您一直在使用 Visual Studio 2010 或 2012，那么您可以利用[几个模板来更轻松地为给定类型的应用程序构建设置](http://visualstudiogallery.msdn.microsoft.com/site/search?query=wix&f%5B0%5D.Value=wix&f%5B0%5D.Type=SearchText&ac=8)。我认为这些不适用于 Visual Studio 2005。

[这本书也可以指导你](https://rads.stackoverflow.com/amzn/click/com/1849513724)。

# ruby-on-rails - 在 Ruby on Rails 中显示可视化数据

> ID：14295458
> 
> 赞同：2
> 
> 时间：2013-01-12T16:41:13.883
> 
> 标签：ruby-on-rails, web-applications, responsive-design

下面的屏幕截图，从某个数据库读取数据 - 我想我可以通过我正在关注的一些 RubyOnRails 教程从数据库中读取数据 - 但是我应该如何能够以他们想要的漂亮形状表示这些数据像这样下图？

我应该快速熟悉哪些工具、框架等才能表示这样的数据？

因为我应该专注于 Rails，所以如果你的建议也能与 Rails 很好地集成，那就太好了......

![在此处输入图像描述](../Images/6773b448abf63a5fa8c6219dcbb7e2b5.png)

屏幕截图2：对于这个我“认为”我可以使用“谷歌图表”但仍然很高兴得到你的建议。

![在此处输入图像描述](../Images/cd4ffdab4cec458473bc3a25796f13d0.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T19:33:01.883

要制作图表，您使用 javascript。那里有很多图书馆。

第一张图片中的那些小图表称为迷你图。它们可以用这个 jquery 插件制作

[jQuery 迷你图](http://omnipotent.net/jquery.sparkline/#s-about)

而这个纯 JavaScript 工具

[sparklines.js](http://willarson.com/code/sparklines/sparklines.html)

对于其他图表，我认为最好的免费图表是[d3](http://d3js.org/)库，特别是[nvd3](http://nvd3.org/)库女巫是建立在 d3 库之上的。

[Raphaël—JavaScript 库](http://raphaeljs.com/)也有一些解决方案 。一个是[gRaphaël](http://g.raphaeljs.com/)。我个人不喜欢这个，但看看。

图表库通常使用 SVG（Scalable Vector Graphics。[点击此处](https://developer.mozilla.org/en-US/docs/CSS/Getting_Started/SVG_and_CSS)了解 SVG 和 CSS）来显示图表。然后你通过 JSON 提供来自 Rails 的数据。

Rails 可以从控制器渲染 JSON，您可以使用[jbuilder](https://github.com/rails/jbuilder) *“Jbuilder 为您提供了一个简单的 DSL，用于声明 JSON 结构，它胜过处理巨大的哈希结构。”*

我通常会在 lib 目录中创建一个自定义类，因为制图通常需要大量复杂的查询和处理来自数据库的数据，然后才能将其发送到图表。

你应该看到这些 railscasts。[railscasts#223](http://railscasts.com/episodes/223-charts) [railscasts#223revised](http://railscasts.com/episodes/223-charts-graphs-revised)

第一个使用 highcharts （不是免费的），最后一个使用[morris.js](http://www.oesmith.co.uk/morris.js/)。莫里斯相当简单，但在某些追逐中就足够了。最后一个是最好的，但我想你必须订阅才能看到它。

这里有很多东西要学，很有趣！

# java - “|=”是什么意思？（管道等号运算符）

> ID：14295469
> 
> 赞同：317
> 
> 时间：2013-01-12T16:43:19.730
> 
> 标签：java, android, operators

我尝试使用 Google Search 和 Stack Overflow 进行搜索，但没有显示任何结果。我在开源库代码中看到了这一点：

```
Notification notification = new Notification(icon, tickerText, when);
notification.defaults |= Notification.DEFAULT_SOUND;
notification.defaults |= Notification.DEFAULT_VIBRATE; 
```

"|=" ( `pipe equal operator`) 是什么意思？

* * *

## 回答 #1

> 赞同：399
> 
> 时间：2013-01-12T16:44:13.760

`|=`读法与`+=`.

```
notification.defaults |= Notification.DEFAULT_SOUND; 
```

是相同的

```
notification.defaults = notification.defaults | Notification.DEFAULT_SOUND; 
```

哪里`|`是按位或运算符。

[此处](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)引用了所有运算符。

使用按位运算符是因为通常这些常量使 int 能够携带标志。

如果您[查看](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.6_r2/android/app/Notification.java)这些常量，您会发现它们是 2 的幂：

```
public static final int DEFAULT_SOUND = 1;
public static final int DEFAULT_VIBRATE = 2; // is the same than 1<<1 or 10 in binary
public static final int DEFAULT_LIGHTS = 4; // is the same than 1<<2 or 100 in binary 
```

所以你可以使用按位或来添加标志

```
int myFlags = DEFAULT_SOUND | DEFAULT_VIBRATE; // same as 001 | 010, producing 011 
```

所以

```
myFlags |= DEFAULT_LIGHTS; 
```

只是意味着我们添加了一个标志。

并且对称地，我们测试一个标志设置使用`&`：

```
boolean hasVibrate = (DEFAULT_VIBRATE & myFlags) != 0; 
```

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-01-12T18:33:17.913

你的问题已经得到了足够的答案。但我的回答可能会帮助您更多地了解`|=`二元运算符。

我正在为[按位运算符](http://www.tutorialspoint.com/java/java_basic_operators.htm)编写表格：
以下是有效的：

```
----------------------------------------------------------------------------------------
Operator   Description                                   Example
----------------------------------------------------------------------------------------
|=        bitwise inclusive OR and assignment operator   C |= 2 is same as C = C | 2
^=        bitwise exclusive OR and assignment operator   C ^= 2 is same as C = C ^ 2
&=        Bitwise AND assignment operator                C &= 2 is same as C = C & 2
<<=       Left shift AND assignment operator             C <<= 2 is same as C = C << 2
>>=       Right shift AND assignment operator            C >>= 2 is same as C = C >> 2  
---------------------------------------------------------------------------------------- 
```

请注意，所有运算符都是二元运算符。

另**请注意：（** [*对于以下几点，我想添加我的答案）*]

*   `>>>`是 Java 中的按位运算符，称为**无符号移位**
    ~~但 `>>>=`不是Java中的运算符。~~ [>>>= 运算符](http://bmanolov.free.fr/javaoperators.php)

*   `~`是按位补码，`0 to 1 and 1 to 0`（一元运算符）但`~=`不是运算符。

*   此外， `!`称为逻辑非运算符，但`!=`检查两个操作数的值是否相等，如果值不相等则条件为真。例如`(A != B) is true`。其中 as`A=!B`表示 if `B`is `true`then `A`become `false`（并且 if `B`is `false`then `A`become `true`）。

[旁注：*`|`不称为管道，而是称为 OR，管道是外壳术语，将一个进程转移到下一个进程。*]

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2015-12-14T19:15:05.300

我一直在寻找有关`|=`Groovy 功能​​的答案，尽管上面的答案是正确的，但它们并没有帮助我理解我正在查看的特定代码。

特别是，当应用于布尔变量时，“|=”将在它第一次遇到右侧的真值表达式时将其设置为 TRUE，并将在所有 |= 后续调用中保持其 TRUE 值。像一个闩锁。

这是一个简化的例子：

```
groovy> boolean result  
groovy> //------------ 
groovy> println result           //<-- False by default
groovy> println result |= false 
groovy> println result |= true   //<-- set to True and latched on to it
groovy> println result |= false 
```

输出：

```
false
false
true
true 
```

*编辑*：为什么这有用？

考虑一种情况，您想知道各种对象是否发生了任何变化，如果发生了变化，请通知其中一些变化。因此，您将设置一个`hasChanges`布尔值并将其设置为 `|= diff (a,b)`然后`|= dif(b,c)`等。这是一个简短的示例：

```
groovy> boolean hasChanges, a, b, c, d 
groovy> diff = {x,y -> x!=y}  
groovy> hasChanges |= diff(a,b) 
groovy> hasChanges |= diff(b,c) 
groovy> hasChanges |= diff(true,false) 
groovy> hasChanges |= diff(c,d) 
groovy> hasChanges 

Result: true 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-01-12T16:44:34.750

这是一个缩写：

```
notification.defaults = notification.defaults | Notification.DEFAULT_SOUND; 
```

并且`|`是位或。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-01-12T16:45:44.000

`|`是[按位或](http://en.wikipedia.org/wiki/Bitwise_operation#OR)运算符，它的应用类似于`+=`.

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-06-27T22:06:11.027

注意：||= 不存在。（逻辑或）您可以使用

```
y= y || expr; // expr is NOT evaluated if y==true 
```

或者

```
y = expr ? true : y;  // expr is always evaluated. 
```

# asp.net - Asp .net 4 mvc 2 表单身份验证失败

> ID：14295471
> 
> 赞同：1
> 
> 时间：2013-01-12T16:44:06.060
> 
> 标签：asp.net, authentication, iis, asp.net-mvc-2, cookies

我正在开发一个 asp.net 4 mvc 2 Web 应用程序，它是主应用程序的子站点。例如，主网站是 www.example.com，当用户输入 voip.example.com 时，我正在处理的网站将是 voip.example.com，如果用户尚未通过身份验证，我的网站会重定向他们到登录页面所在的accounts.example.com，当他们进行身份验证时，主网站会创建一个名为ExampleAuth的cookie，
域名为.example.com，到期时间为2015年，并重定向到我的网站voip。例子.com。

我在我的网站上使用 AuthorizeAttribute 表单身份验证，并且当 AuthorizeCore 方法在我从主网站重定向的请求上运行时，AuthorizeCore 的结果应该为真。在我的带有 win7 和 IIS 7.5 的 PC 上它工作得很好但是当我将它部署在带有 IIS 7 的 windows server 2008 甚至是带有 IIS 7.5 的 windows server 2008 r2 的服务器上时，似乎我的 web 应用程序无法访问主网站设置的身份验证cookie。

![请求及其命令的图表](../Images/62a8622dd07983fd3a738df001265357.png)

我认为是 IIS 或 Windows 服务器的某种安全配置导致了这种行为，因为我使用的是 mvc 内置的表单身份验证方法，而一切都没有定制。

最近我将它上传到了一个带有 windows Server 2008 r2 和 IIS 7.5 的服务器上，它可以工作，但是在我的服务器上，具有相同版本的 iis 和 windows 它不能工作，所以我认为它应该是某种配置或....这种行为。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T19:25:00.363

似乎 asp.net mvc 身份验证存在错误，我通过安装 KB2656351 和 KB963697 微软补丁解决了它。

# java - SQlite 数据库不将双精度值存储为字符串

> ID：14295475
> 
> 赞同：0
> 
> 时间：2013-01-12T16:44:19.893
> 
> 标签：java, android, eclipse, sqlite

我正在使用以下代码

```
 public boolean addArea(AreaClass area , ArrayList<AreaMarkClass> areaArray)
     {      
         area.id =  getNextAreaId();
        Log.d("longitude", area.longitude);
        Log.d("latitude", area.latitude);

        ContentValues initialValues = new ContentValues();
        initialValues.put("_id", area.id);
        initialValues.put("name", area.name);
        initialValues.put("longitude", area.longitude);
        initialValues.put("latitude", area.latitude);
        initialValues.put("zoomLevel", area.zoomLevel);
        initialValues.put("creationDate",area.creationDate);

        try
        {
            mDb.insertOrThrow("TTArea", null, initialValues);
} 
```

`area.longitude`是一个字符串，它的值是通过`String.value`（A Double Value）获得的，现在通常是这样的`22.323434523464563456`

但是，当我尝试检索此值时

```
public AreaClass getAreaClassWithAreaId(Integer id)
{
    String queryString = "SELECT * FROM TTArea WHERE _id = ?";
    Cursor resultSet =  mDb.rawQuery(queryString, new String[]{id.toString()}); 
    AreaClass area = new AreaClass();
    while(resultSet.moveToNext())
    {
         area = new AreaClass(
                        resultSet.getInt(resultSet.getColumnIndex("_id")),
                        resultSet.getString(resultSet.getColumnIndex("name")),
                        resultSet.getString(resultSet.getColumnIndex("longitude")),
                        resultSet.getString(resultSet.getColumnIndex("latitude")),
                        resultSet.getString(resultSet.getColumnIndex("zoomLevel")),
                        resultSet.getString(resultSet.getColumnIndex("creationDate"))
                        );
    }

    resultSet.close();
    return area;
} 
```

它以某种方式将其四舍五入`22.3234`。在我的应用程序中，我需要精确的存储内容。这是什么行为，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:07:32.740

我在使用 SQLite 时使用这些方法：

```
public static Double stringToDouble (String x)
{
    if (x !=null)
        return Double.parseDouble(x);

    return null;
}

public static String doubleToString (Double y)
{
    if (y != null)
        return String.valueOf(y);

    return null;
} 
```

添加到数据库时，将双精度值转换为字符串，反之亦然，请告诉我此解决方案是否有效

编辑：解决方案在评论中：“我看到你用 STRING 字段创建了你的表。你可以尝试使用 TEXT 类型，对我有用。”

# c# - Asp MVC 加载报告失败

> ID：14295477
> 
> 赞同：1
> 
> 时间：2013-01-12T16:44:25.127
> 
> 标签：c#, asp.net-mvc, crystal-reports

我第一次尝试将水晶报告与 asp mvc 一起使用，但我在加载报告时遇到了一些问题：

```
ReportClass rptH = new ReportClass();
            rptH.FileName = Server.MapPath("Reports/TestReport.rpt");
            rptH.Load(); 
```

这是 rptH.FileName 的值

```
"rassdk://D:\\ProjectDir\\Pro\\Pro.WebUI\\Reports\\TestReport.rpt" 
```

但是`Load()`我得到了例外：

> 加载报告失败。

报告没有任何数据源，它只是带有一些文本的空白报告。
也许这很重要。我将项目设置为在**本地 IIS**上运行（不在 VS 中）。

**更新**

我稍微更改了代码，现在我得到了一些其他错误（我还在inetpub/wwwroot中复制了项目）。这是错误：

> 值不能为空。参数名称：path2

现在的路径是：

```
"C:\\inetpub\\wwwroot\\MyProject\\Pro\\Pro.WebUI\\Reports\\TestReport.rpt" 
```

新代码是：

```
ReportClass rptH = new ReportClass();
            var path = Server.MapPath("Reports/TestReport.rpt");

            rptH.Load(path); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T10:15:05.230

检查 rpt 文件是否定义了参数。如果有并且您不需要它们，则将其删除。如果您需要它们，请在代码中为它们提供值和描述。经验：

```
rep = new ReportDocument();
string reportPath = Server.MapPath("Reports/TestReport.rpt");
rep.Load(reportPath);
rep.SetParameterValue(0, "SomeValue");
crViewer.ReportSource = rep;
crViewer.ParameterFieldInfo[0].CurrentValues[0].Description = "ParameterName";
crViewer.DataBind(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T19:05:19.637

我以前用 ASP.NET 做过水晶报表。不确定你是否能够做到这一点，但它对我来说很成功。

```
 ReportDocument rptDoc = new ReportDocument();
 rptDoc.Load(Server.MapPath("TestReport.rpt");

 Response.Buffer = False
 Response.ClearContent()
 Response.ClearHeaders()

 rptDoc.ExportToDisk(ExportFormatType.PortableDocFormat, "TestReport.rpt")
 rptDoc.ExportToHttpResponse(ExportFormatType.PortableDocFormat, Response, True, "MyReport") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-04T13:14:31.067

尝试这个

```
 ReportDocument rd = new ReportDocument();
  string FileName = Server.MapPath("~/Report") + "//YourReportName.rpt";
  rd.Load(FileName);
  rd.SetDataSource(dt); 
```

# c++ - 使用 pycuda 将二维矩阵相乘。

> ID：14295478
> 
> 赞同：0
> 
> 时间：2013-01-12T16:44:27.567
> 
> 标签：c++, python, cuda, python-2.7, pycuda

如何迭代两个数组？

```
__global__ void euclidean(float *x, float *y, int dim_x, int dim_y, int ms, float *solution) {

            int idx = threadIdx.x + blockDim.x * blockIdx.x;
            int idy = threadIdx.y + blockDim.y * blockIdx.y;

            float result = 0.0;

            for (int iter = 0; iter < ms; iter++) {

                float x_e = x[idy * ms + iter];
                float y_e = y[idx * ms + iter];

                result += (x_e * y_e);
            }
} 
```

**输入：** `X = [[1,2], [3,4], [5,6], [7,8], [9,10]]`和`Y = [[0,0], [1,1]]`

**预期输出：** `[[0, 3], [0, 7], [0, 11], [0, 15]. [0, 19]]`

我怎样才能做到这一点？我的困难是在 X 和 Y 上进行迭代。

**预期的：**

> [idx: 0 idy: 0 = 0] [idx: 1 idy: 0 = 3] [idx: 2 idy: 0 = 0] [idx: 3 idy: 0 = 7] [idx: 4 idy: 0 = 0] [idx: 0 idy: 1 = 11] [idx: 1 idy: 1 = 0] [idx: 2 idy: 1 = 15] [idx: 3 idy: 1 = 0] [idx: 4 idy: 1 = 19]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:04:48.687

我会做以下乘以2个矩阵。这可以处理边界条件，因此应该适用于任何网格/块大小。

```
// Compute C = A * B
__global__ void matrixMultiply(float * A, float * B, float * C,
                   int numARows, int numAColumns,
                   int numBRows, int numBColumns,
                   int numCRows, int numCColumns) {
    float cValue = 0;
    int Row = blockIdx.y * blockDim.y + threadIdx.y;
    int Col = blockIdx.x * blockDim.x + threadIdx.x;

    if ((Row < numCRows) && (Col < numCColumns)) {
        for (int k = 0; k < numAColumns; k++) {
            cValue += A[Row*numAColumns + k] * B[k*numBColumns + Col];
        }
        C[Row*numCColumns + Col] = cValue;
    }
} 
```

如果您想要更高效的实现，您还可以使用共享内存：

```
// Compute C = A * B
__global__ void matrixMultiplyShared(float * A, float * B, float * C,
                     int numARows, int numAColumns,
                     int numBRows, int numBColumns,
                     int numCRows, int numCColumns) {
    __shared__ float ds_A[TILE_WIDTH_I][TILE_WIDTH_I];
    __shared__ float ds_B[TILE_WIDTH_I][TILE_WIDTH_I];

    int bx = blockIdx.x;
    int by = blockIdx.y;
    int tx = threadIdx.x;
    int ty = threadIdx.y;

    int Row = by * TILE_WIDTH + ty;
    int Col = bx * TILE_WIDTH + tx;
    float cValue = 0;

    for (int m = 0; m < (numAColumns/TILE_WIDTH); m++) {
        if (Row < numARows && m*TILE_WIDTH_I + tx < numAColumns) {
          ds_A[ty][tx] = A[Row*numAColumns + m*TILE_WIDTH_I + tx];
        } else {
         ds_A[ty][tx] = 0;
       }

        if (m*TILE_WIDTH_I + ty < numBRows && Col < numBColumns) {
          ds_B[ty][tx] = B[(m*TILE_WIDTH_I + ty)*numBColumns + Col];
       } else {
         ds_B[ty][tx] = 0;
       }

        __syncthreads();

        if ((Row < numCRows) && (Col < numCColumns)) {
            for (int k = 0; k < TILE_WIDTH; k++) {
                cValue += ds_A[ty][k] * ds_B[k][tx];
            }
        }

        __syncthreads();
    }

    if ((Row < numCRows) && (Col < numCColumns)) {
        C[Row*numCColumns + Col] = cValue;
    }
} 
```

# ruby-on-rails-3 - Netzke with file uploads, preferably carrierwave

> ID：14295479
> 
> 赞同：1
> 
> 时间：2013-01-12T16:44:33.817
> 
> 标签：ruby-on-rails-3, carrierwave, netzke

I have a model with a single field with carrierwave for file upload. I searched the google group but don't find a straightforward way to add file uploads to netzke component. I will be happy with doing it in a panel view with a regular browser file upload, i don't need anything fancy.

I just saw one of the demos has a file upload, the Paging form with custom layout. I think I still need guidance how to put it into the Basepack Grid

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T00:37:49.373

File upload field should first be added into `Basepack::Form` (which then can be tested independently):

```
class AttachmentForm < Netzke::Basepack::Form
  def configure(c)
    super
    c.model = "Attachment"
    c.items = [{xtype: :fileuploadfield, name: 'attachment'}]
  end
end 
```

Then your grid should be configured to use this form instead of the built-in one:

```
class AttachmentGrid < Netzke::Basepack::Grid
  def configure(c)
    super
    c.model = 'Attachment'
    c.force_fit = true
    c.columns = [:link]
    c.bbar = [:add_in_form, :del]
  end

  def preconfigure_record_window(c)
    super
    c.form_config.klass = AttachmentForm
    c.width = 600
    c.height = 150
  end
end 
```

For reference, here's also the `Attachment` model:

```
class Attachment < ActiveRecord::Base
  mount_uploader :attachment

  # this is a virtual column referred to from `AttachmentGrid`;
  # can be moved over to grid itself using `getter` in case
  # you object putting HTML into the model
  def link
    "<a href='#{attachment.url}' target='_blank'>#{attachment.file.try(:identifier)}</a>"
  end
end 
```

# actionscript-2 - 退出按钮 .swf 文件

> ID：14295481
> 
> 赞同：0
> 
> 时间：2013-01-12T16:44:39.113
> 
> 标签：actionscript-2, exit

我去过已经回答了这个问题的论坛和其他网站。他们给出了这个代码：

```
on(release) {
fscommand("quit");
} 
```

但这对我不起作用。谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:06:36.947

试着把它放在不同的层上。在图层上放一些东西，比如透明盒子，否则框架将被忽略。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-28T15:09:17.073

```
on(press)
{fscommand("quit","true");
} 
```

# c++ - 未收到来自虚拟路由器的 ICMPv6“数据包太大”消息

> ID：14295482
> 
> 赞同：1
> 
> 时间：2013-01-12T16:44:40.800
> 
> 标签：c++, linux, ubuntu, icmp

我正在运行`GNS3`（0.8.3.1）`VirtualBox 4.2.6`来宾运行`Ubuntu 12.10`，我意识到`ICMPv6`数据包有问题。

我的`PMTUD`应用程序没有收到来自虚拟 Cisco c3660 路由器的“数据包太大”消息。我在 VirtualBox 中有 2 个仅限主机的适配器，我的微型虚拟网络在`IPv4 PMTUD`. 但是当我尝试实施时`IPv6 PMTUD`，我意识到了上述情况。我没有过滤任何`ICMPv6`数据包，路由器只有基本配置，ip，ipv6 地址，没有关闭和设置 mtu。

这是我的程序中的错误，`GNS3/VirtualBox/Ubuntu`还是路由器配置错误（我没有设置任何过滤器）？如果有人可以检查他是否`ICMPv6`在类似配置上收到“数据包太大”消息，我将不胜感激，这样我们就可以解决`GNS3/VirtualBox/Ubuntu`.

感谢您的任何帮助。

# python - “ AttributeError: 'NoneType' 对象没有属性 'split' ” 安装 geopy

> ID：14295483
> 
> 赞同：0
> 
> 时间：2013-01-12T16:44:47.293
> 
> 标签：python, django, svn, pip, geopy

我正在尝试从 django 项目的需求文件中安装软件包。

问题是在安装 geopy 时出现错误 AttributeError: 'NoneType' object has no attribute 'split'。

我在带有 python 2.7.3 的 virtualenv 中运行。

确切的命令是：

```
sudo pip-python install -r requirements.pip 
```

需求文件中的问题行是：

```
-e svn+http://geopy.googlecode.com/svn/trunk@144#egg=geopy-0.94.1_pre.dev_r144-py2.7-dev_r144 
```

我有 setuptools 并分发 0.6.34（我相信 setuptools 只是分发的别名）。setuptools_subversion 是 3.1 版

我正在运行 Fedora 17。

完整的错误如下：

```
Obtaining geopy from svn+http://geopy.googlecode.com/svn/trunk@144#egg=geopy-0.94.1_pre.dev_r144-py2.7-dev_r144 (from -r requirements.pip (line 50))
  Unrecognized .svn/entries format in /home/myself/leona-integration/leona/src/geopy
Exception:
Traceback (most recent call last):
  File "/usr/lib/python2.7/site-packages/pip/basecommand.py", line 126, in main
    self.run(options, args)
  File "/usr/lib/python2.7/site-packages/pip/commands/install.py", line 223, in run
    requirement_set.prepare_files(finder, force_root_egg_info=self.bundle, bundle=self.bundle)
  File "/usr/lib/python2.7/site-packages/pip/req.py", line 936, in prepare_files
    req_to_install.update_editable(not self.is_download)
  File "/usr/lib/python2.7/site-packages/pip/req.py", line 384, in update_editable
    vcs_backend.obtain(self.source_dir)
  File "/usr/lib/python2.7/site-packages/pip/vcs/subversion.py", line 86, in obtain
    if self.check_destination(dest, url, rev_options, rev_display):
  File "/usr/lib/python2.7/site-packages/pip/vcs/__init__.py", line 184, in check_destination
    if self.compare_urls(existing_url, url):
  File "/usr/lib/python2.7/site-packages/pip/vcs/__init__.py", line 142, in compare_urls
    return (self.normalize_url(url1) == self.normalize_url(url2))
  File "/usr/lib/python2.7/site-packages/pip/vcs/__init__.py", line 136, in normalize_url
    return urllib.unquote(url).rstrip('/')
  File "/usr/lib64/python2.7/urllib.py", line 1204, in unquote
    res = s.split('%')
AttributeError: 'NoneType' object has no attribute 'split'

Storing complete log in /root/.pip/pip.log 
```

评论中已经指出，“Unrecognized .svn/entries format in...”这一行只是一个警告，而不是异常的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T19:44:10.527

我通过在需求文件中注释有问题的行并添加以下行来解决它：

```
geopy==0.94.1 
```

# linux - 使用 .sh 文件中的 cron 存储命令 ssh mysqldump 到远程 nas 存储

> ID：14295485
> 
> 赞同：0
> 
> 时间：2013-01-12T16:44:57.760
> 
> 标签：linux, ssh, mysqldump

我正在尝试使用 cron 设置 mysql 数据库备份，以便将 mysql 数据库备份到我的本地 NAS 存储。我想将命令存储在服务器上的 .sh 文件中，然后使用 cron 执行它。

到目前为止，我已经设法从远程服务器获取将数据库保存到我的 NAS (QNAP) 的命令，即：

```
mysqldump 
--add-drop-table 
--comments [database_name] 
-u [database_username] 
-p[database_password] | 
gzip -c | 
ssh [nas_user]@[nas_ip_address] 
    "cat > /share/mysqlBackup/backup-`date +%Y-%m-%d_%H-%M-%S`.sql.gz" 
```

以上工作正常，但我遇到的问题是：

1.  我不确定如何在远程服务器上创建 .sh 文件并将命令放入

2.  每次执行此命令时都会要求输入密码 - 有没有办法将其放入 .sh 文件中，以便我可以在后台执行而不提示它/或在命令中定义密码？

如何解决上述问题的示例将非常受欢迎。

我相信可以使用**expect()**对话框，但同样 - 我不熟悉它，它的文档对我来说有点混乱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:16:05.013

我猜 ssh 连接需要密码，所以你可以让你的 ssh 连接无密码。

在答案中解释了无密码 ssh 连接： [https ://serverfault.com/questions/241588/how-to-automate-ssh-login-with-password](https://serverfault.com/questions/241588/how-to-automate-ssh-login-with-password)

在远程服务器上完成此步骤后，您可以将上面给出的命令写入 .sh 文件中，这非常简单。并将其添加到 cron 以定期进行备份。

# android - 我在哪里可以找到未读邮件的确切灰色 // 邮件 // Gmail

> ID：14295487
> 
> 赞同：0
> 
> 时间：2013-01-12T16:45:22.070
> 
> 标签：android, colors, grayscale

在我的应用程序中，我将有一个包含已读和未读项目的 ListView，因此我想使用与最新 AOSP 相同的颜色。

消息应用程序的 2 种灰色色调听起来很正确，我想知道在哪里可以查看 Android 源代码以找到完全相同的灰色。（阅读=白色？）

注意：使用屏幕截图和颜色选择器是不可接受的，我不想“猜测”正确的十六进制代码。

![在此处输入图像描述](../Images/88ef1bc5bdb2a55bedbe4e93cfb4f136.png)

我完全知道我可以使用自己的颜色，但使用系统听起来更好。

Android 设计网站在颜色部分没有给我任何线索：http: [//developer.android.com/design/style/color.html](http://developer.android.com/design/style/color.html)

有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T16:47:37.210

较浅的颜色是：#FFFFFF

较深的颜色是：#EEEEEE

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T16:50:53.367

我使用[滴管 Chrome 扩展](https://chrome.google.com/webstore/detail/eye-dropper/hmdcmlfkchdmnmnmheododdhjedfccka?hl=en)程序从任何网页中找出颜色代码

# c - 以只读模式打开文件时，fork后父子文件是否共享相同的文件偏移量？

> ID：14295492
> 
> 赞同：0
> 
> 时间：2013-01-12T16:45:44.877
> 
> 标签：c, linux

我无法理解为什么以只读模式打开的文件会在父子之间共享文件偏移量。下面的程序打开一个文件（其中包含像 abcd 这样的数据）并调用下一个 fork。现在我正在尝试从子进程和父进程中的文件中读取。看起来文件偏移量没有从输出中共享？

```
# include <unistd.h>
# include <sys/types.h>
# include <stdio.h>
# include <sys/wait.h>
# include <fcntl.h>

# define CHILD 0

main(){
int fd;
char buf[4];
pid_t pid;  
int childstatus;
    pid = fork();   
fd = open("./test",O_RDONLY);
if( pid == CHILD){
    printf("Child process start ...\n");
    read(fd,buf,2);
    printf(" in child %c\n",buf[0]);
    read(fd,buf,2);
    printf(" in child %c\n",buf[0]);
    sleep(5);
           printf("Child terminating ...\n");
}
// parent
else{    
        printf("In parent  ...\n");     
    sleep(3);
    read(fd,buf,2);
    printf(" in parent %c\n",buf[0]);
    close(fd);
    sleep(5);
           printf("parent terminating ...\n");
} 
```

}

```
Output :

In parent  ...
Child process start ...
 in child a
 in child c
 in parent a
Child terminating ...
parent terminating ... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T16:51:28.700

> 下面的程序打开一个文件（其中包含像 abcd 这样的数据）并调用下一个 fork。

不，它没有。你`fork`然后*打开*文件。所以父子分别打开文件，得到单独的打开文件描述。如果您希望他们共享打开的文件描述（包含文件指针），您只需打开文件一次 - 在调用`fork`.

# php - 使用 CakePHP 设计博客

> ID：14295493
> 
> 赞同：0
> 
> 时间：2013-01-12T16:45:46.623
> 
> 标签：php, cakephp

我正在使用 CakePHP 构建一个博客（只是一个个人项目，没什么大不了的），目前我有下一个控制器：

*   PostsControllers（操作：索引、关于、归档、显示、编辑）
*   UsersControllers（操作：注册、登录、注销）

我认为像“index”、“about”和“archive”这样的操作应该放在不同的控制器（如 BlogsController）中，因为它们不是与单个帖子相关的操作。

我一直在互联网上搜索，我发现大多数人只对博客和帖子操作使用一个控制器（BlogsController 或 PostsController）。

所以我的问题是：我应该为“索引”、“关于”、“存档”等操作设置一个单独的控制器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T16:50:15.567

不，您应该为每个离散实体类型（例如，、、、）保留`Post`一个`User`控制器`Comment`。然后，您可以执行诸如`/posts/view/5`查看 ID 的博客文章之类的操作`5`。如果你想让 URL 反映博客特性，那么你可以为`/blog/5`or映射一个路由`/blog/posts/5`（参见[CakePHP 的路由文档](http://book.cakephp.org/2.0/en/development/routing.html)）。

如果您计划创建一个不仅仅是博客的站点，您还可以考虑使用 CakePHP 创建一个博客插件（再次[参见文档](http://book.cakephp.org/2.0/en/plugins.html)）。然后，您所有与博客相关的操作都将限制在一个用于组织的插件中。因此，这也使得为其他网站部署博客代码变得更加容易。

# php - OOP 新手 - 如何将变量存储在数组中？

> ID：14295494
> 
> 赞同：1
> 
> 时间：2013-01-12T16:46:10.287
> 
> 标签：php

我是 OOP 的新手（和这方面的编程，几个月前开始），所以类和对象对我来说仍然是一个陌生的概念。无论如何，我试图将字符串和变量的混合存储在一个数组中以供以后处理。见方法`drawtable()`。`drawtable()`打印`tableheaders`就好了，但`tableheaders`只是一个字符串数组。当我尝试打印我试图在其中包含变量的`tablelink`, 和`text`属性时，问题就出现了。我在这里做错了什么？注意：会话变量输出正常。

我也会感谢对下面代码的任何一般批评，因为我是新手，并试图将任何坏习惯扼杀在萌芽状态。非常感谢。

```
<?php
class table{

    function __construct($type){
        if($type == "submittals"){

            $this->tableheaders = array('Specification Section', 'Submittal #', 'Description', 'Vendor or Manufacturer', 'Date Received By GC', 'File', 'Date Submitted', 'File', 'Date Requested for Review', 'Date Returned to GC', 'File', 'Status', 'Date Returned to Subcontractor or Vendor');

            $this->query = "***SELECT Query***";

            $this->tablelink = array("/pd/upload/" . $_SESSION['current_project'] . "/s/" . $row['file'], "edit_submittal.php?submittal_id=", "edit_submittal.php?submittal_id=" . $row['submittal_id']);

            $this->text = array($row['number'] . " - " . $row['name'], $this->row['submittal_num']);            
        }
    }

    function drawtable() {
        $this->numheaders = count($this->tableheaders);

        $this->db = mysqli_connect(***db connection info***);
        $this->results = mysqli_query($this->db, $this->query);
                $this->num_results = mysqli_num_rows($this->results);

        echo "  <table border=\"1\">
                    <tr>";  
                        for ($i = 0; $i < $this->numheaders; $i++) {
                            echo "<th>" . $this->tableheaders[$i] . "</td>";
                        }
        echo "      </tr>";

        for ($j=0; $j < $this->num_results; $j++) {
            $row = mysqli_fetch_assoc($this->results);

            echo "  <tr>";

            for($k = 0; $k < $this->numheaders; $k++) {
                echo "  <td><a href=\"" . $this->tablelink[$k] . "\">" . $this->text[$k] . "xxx</a></td>";
            }

        }
        echo "      </tr>
                </table>";
    }
}
?> 
```

* * *

更新：好吧，这行得通，但我敢肯定它仍然有一种菜鸟马虎的气氛。建议？谢谢

```
<?php
class Table{

    function __construct($type){
        if($type == "submittals"){

            $this->table_headers = array('Specification Section', 'Submittal #', 'Description', 'Vendor or Manufacturer', 'Date Received By GC', 'File', 'Date Submitted', 'File', 'Date Requested for Review', 'Date Returned to GC', 'File', 'Status', 'Date Returned to Subcontractor or Vendor');

            $this->query = "***SELECT query***";    
        }
    }

    function draw_table($type) {
        $this->num_headers = count($this->table_headers);

        $this->db = mysqli_connect(***db connection***);
        $this->results = mysqli_query($this->db, $this->query);
        $this->num_results = mysqli_num_rows($this->results);

        echo "  <table border=\"1\">
                    <tr>";  
                        for ($i = 0; $i < $this->num_headers; $i++) {
                            echo "<th>" . $this->table_headers[$i] . "</td>";
                        }
        echo "      </tr>";

        for ($j=0; $j < $this->num_results; $j++) {
            $row = mysqli_fetch_assoc($this->results);

            if($type == "submittals") {
                $this->table_link = array("/pd/upload/" . $_SESSION['current_project'] . "/s/" . $row['file'], "edit_submittal.php?submittal_id=", "edit_submittal.php?submittal_id=" . $row['submittal_id']);
                $this->text = array($row['number'] . " - " . $row['name'], $row['submittal_num'], $row['description']);         
            }

            echo "  <tr>";

            for($k = 0; $k < $this->num_headers; $k++) {
                echo "  <td><a href=\"" . $this->table_link[$k] . "\">" . $this->text[$k] . "</a></td>";
            }

        }
        echo "      </tr>
                </table>";
    }

    function get_table_headers() {
        echo $this->table_headers;
    }
    function get_query() {
        echo $this->query;
    }
    function get_table_link() {
        echo $this->table_link;
    }
    function get_text() {
        echo $this->text;
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T16:51:51.867

它不像这样工作。您无法`$row`在构造函数中访问，因为那里的变量未定义。`$row['name']`当您实际使用该字符串时，您希望 PHP 意识到它应该替换 etc. 的内容。然而，又何必呢？相反，PHP 根本找不到`$row`，一切都出错了。实际上，您应该得到一个错误，告诉您`$row`未定义。

总的来说，您的代码有很多错误。很抱歉这么说，但您根本没有掌握 OOP 的一般概念。在这里解释这一点需要很长时间。显然有些事情甚至与 OOP 无关，你不知道。例如范围以及关于何时何地存在变量。

# ruby-on-rails-3 - 使用翻译提交按钮

> ID：14295495
> 
> 赞同：0
> 
> 时间：2013-01-12T16:46:19.617
> 
> 标签：ruby-on-rails-3, i18n-gem

我不想使用默认值

```
<%= f.submit %> 
```

并为其创建了一个辅助函数，该函数还嵌入了一个图标。辅助函数需要一个标签放在新创建的按钮上。

我这样称呼它：

```
<%= submit_button("icon-plus", I18n.translate("helpers.submit.create")) %> 
```

但现在这个文本出现在按钮上：

*%{模型} toevoegen*

代替：

*产品类型 toevoegen*

如果我使用正常的提交按钮，则会出现正确的文本，因此我的 yml 文件是正确的。如何获得要在帮助程序中使用的正确文本？

帮助代码：

```
def submit_button(icon, label)
  link_to "javascript:void(0)", :class => 'btn btn-primary', :onclick => "$(this).closest('form').submit()" do
  raw('<div class="') + icon + raw(' icon-white"> ') + label +raw('</div>')
  end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:57:50.507

正如[I18n 指南](http://guides.rubyonrails.org/i18n.html#passing-variables-to-translations)所说，该`translate`函数`%{}`使用其第二个参数（哈希）插入括号中传递的变量。

在您的情况下，您需要通过以下方式告诉它`model`：

```
I18n.t("helpers.submit.create", model: "Product type") 
```

[如果你想要一个适用于任何模型的通用选项，你可以通过查看GitHub 上](https://github.com/rails/rails/blob/v3.2.11/actionpack/lib/action_view/helpers/form_helper.rb#L1421-L1425)的源代码来了解 Rails 本身是如何做到的——就像

```
I18n.t("helpers.submit.create", model: f.object.class.model_name.human) 
```

顺便说一句，您不需要（并且可能不应该）`raw`在那里使用。使用内置帮助程序可以轻松完成您想要实现的目标：

```
link_to ... do
  content_tag :div, label, class: "#{icon} icon-white"
end 
```

# android - LoadLibrary 失败并出现错误 998：对内存位置的无效访问

> ID：14295498
> 
> 赞同：0
> 
> 时间：2013-01-12T16:46:30.580
> 
> 标签：android, adt, avd, loadlibrary

我正在尝试启动 android 应用程序 - 我尝试了两个位置和两种方法，结果都相同：

> LoadLibrary 失败并出现错误 998：对内存位置的无效访问

[本文](http://www.vogella.com/articles/AndroidInstallation/article.html)的第 5 步。[从这里](http://developer.android.com/training/basics/firstapp/running-app.html)运行应用程序。

我已经从[官方 SDK 站点](http://developer.android.com/sdk/index.html)安装了独立的 adt 应用程序。

请注意，我最初安装了 64 位 jdk 并安装了 64 位 adt 独立版本。我收到了同样的症状。因此，我随后安装了 32 位 jdk，然后独立安装了 32 位 adt，并遇到了同样的问题。

**广告版本信息**

Android 开发者工具版本：v21.0.1-543035

**爪哇版**

java 版本 "1.6.0_37" Java(TM) SE Runtime Environment (build 1.6.0_37-b06) Java HotSpot(TM) Client VM (build 20.12-b01, 混合模式, 共享)

**我的机器信息**

Windows 7 Home Premium Service Pack 1 Studio XPS 7100 AMD Phenom(tm) II X6 1035T 处理器 2.60 GHz 6.00 GB RAM 64 位操作系统

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T16:45:20.873

转到 android-sdk/Tools 并将 emulator-arm.exe 重命名为 emulator.exe。您可以备份当前旧的 emulator.exe

# objective-c - Objective-C KVO 不适用于 C 联合

> ID：14295505
> 
> 赞同：6
> 
> 时间：2013-01-12T16:47:14.977
> 
> 标签：objective-c, key-value-observing, unions

我需要在使用 KVO 的 Objective-C 类上观察联合类型的属性，但似乎我对此并不走运。我做了一些实验：只要我使用 C 结构，一切正常。一旦我用联合替换结构，自动 KVO 就不再起作用（`observeValueForKeyPath`没有被调用）。

这是我的小测试课：

AppDelegate.h：

```
#import <Cocoa/Cocoa.h>

typedef union {
    float data[3];
    struct {
        float x,y,z;
    };
} vec3union;

typedef struct {
    float x,y,z;
} vec3struct;

@interface AppDelegate : NSObject <NSApplicationDelegate>

@property (assign) IBOutlet NSWindow *window;

@property (assign) vec3struct vectorStructValue;

@property (assign) vec3union vectorUnionValue;

@end 
```

AppDelegate.m:

```
@implementation AppDelegate

@synthesize vectorStructValue = _vectorStructValue;
@synthesize vectorUnionValue = _vectorUnionValue;

- (void)dealloc
{
    [super dealloc];
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    [self addObserver:self forKeyPath:@"vectorStructValue" options:NSKeyValueObservingOptionNew context:nil];
    [self addObserver:self forKeyPath:@"vectorUnionValue" options:NSKeyValueObservingOptionNew context:nil];

    self.vectorStructValue = (vec3struct){1,2,3};
    self.vectorUnionValue = (vec3union){4,5,6};
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    NSLog(@"keyPath %@ did change, object: %@", keyPath, [object description]);
}

@end 
```

输出：

```
2013-01-12 17:38:26.447 KVOTest[57522:303] keyPath vectorStructValue did change, object: <AppDelegate: 0x100614200> 
```

我做错了什么，或者这是 Objective-C 运行时/KVO 实现中的错误或缺失功能？

注意：我知道我可以通过覆盖属性设置器来手动实现它，但这不是这个问题的重点。答案应该让我知道为什么自动 KVO 在这种情况下不起作用。

**更新**：为了清楚起见，这是一个简单的测试用例，将结构属性上的 KVO 观察者与联合属性上的观察者进行比较。这些属性*并不相互关联*。他们有独立的 ivars 和独立的内存后备存储。您可以删除 struct 属性并运行测试，仍然是相同的结果 - 没有针对 union 属性的 KVO 观察者事件。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T18:38:09.040

### 这些属性在 OP 的问题中不相关。

我误读了发烧引起的幻觉。

工会在 KVO/KVC 中被彻底摧毁了。留下下面的文字，因为它仍然很有趣。

* * *

KVO 不能通过观察记忆或玩任何此类棘手的恶作剧来工作。它通过动态创建子类、覆盖 setter 方法以及在调用`willChange.../didChange...`setter 时自动调用方法来工作。

因此，您实际上拥有*2 个属性*和*1 个后备*存储。但是，就 KVO 而言，它们彼此完全隔离。

你想要的是依赖键。您可以使用[`+keyPathsForValuesAffectingValueForKey:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSKeyValueObserving_Protocol/Reference/Reference.html)在两个键之间创建依赖关系，以便调用任一 setter 将触发另一个属性的更改。

我不知道它是否支持相互依赖；如果它支持有效的循环依赖。

或者，您应该能够覆盖 setter 以调用`willChange/didChange`其他属性（以及正在更改的属性）。

* * *

如果您想在*任一属性更改时为**这两个*键`willChange/didChange`触发，则将使用相关键。即，如果您对结构感到困惑，则联合实际上会发生变化，并且联合属性的观察者应该看到意志/确实变化以响应设置结构版本。

 **我刚刚测试了它。你是对的。工会有些奇怪。它完全坏了。以上所有内容仍然正确，但没有任何好处。

雷达归档：rdar://problem/13003794

* * *

哦...整洁。带工会的 KVO 根本不起作用。运行时似乎根本不承认该类有一个被调用的键`vectorUnionValue`。

我补充说：

```
+ (NSSet *)keyPathsForValuesAffectingVectorStructValue
{
    return [NSSet setWithObject:@"vectorUnionValue"];
}

+ (NSSet *)keyPathsForValuesAffectingVectorUnionValue
{
    return [NSSet setWithObject:@"vectorStructValue"];
} 
```

这导致了运行时异常：

```
2013-01-12 12:05:11.877 djkdfjkdfjkdf[51598:303] *** Terminating app due to uncaught exception 'NSUnknownKeyException', reason: '[<AppDelegate 0x10010a520> valueForUndefinedKey:]: this class is not key value coding-compliant for the key vectorUnionValue.' 
```**

# java - 在java中使用CLOB抛出异常

> ID：14295506
> 
> 赞同：1
> 
> 时间：2013-01-12T16:47:17.447
> 
> 标签：java, jdbc, clob

我正在将 clob 数据插入 mysql 数据库...这是我的代码

```
Clob cl=dbCon.createClob();
cl.setString(1,userAbout);
dbCon.setAutoCommit(false);
PreparedStatement insertClob=dbCon.prepareStatement("UPDATE user_data SET user_about=? WHERE user_id=?");
insertClob.setClob(1,cl);
insertClob.setInt(2,userId);
int count= insertClob.executeUpdate();
if(count==1){dbCon.commit();dbCon.close();out.write("success");}
else{dbCon.rollback();dbCon.close();out.print("error");} 
```

这是抛出异常

```
java.lang.AbstractMethodError: org.apache.tomcat.dbcp.dbcp.PoolingDataSource$PoolGuardConnectionWrapper.createClob()Ljava/sql/Clob; 
```

这里有什么问题？我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T16:55:22.540

`createClob()`反正你不需要。我发现使用 setCharacterStream() 更加稳定（并且得到所有 JDBC 驱动程序的更好支持）。

```
StringReader reader = new StringReader(userAbout);
PreparedStatement insertClob = dbCon.prepareStatement("UPDATE user_data SET user_about=? WHERE user_id=?");
insertClob.setCharacterStream(1, reader, userAbout.length());
insertClob.setInt(2,userId);

int count= insertClob.executeUpdate(); 
```

这也适用于`INSERT`语句。无需创建任何中间 clob（或 blob）对象。

请注意，我将错误的索引更改`8`为正确的索引`2`以匹配`UPDATE`语句中的占位符。

许多现代驱动程序也处理`setString()`CLOB 列的“简单”。值得一试 - 会进一步减少代码。

# php - 将 JSON 中的数据放入 MySQL 数据库

> ID：14295508
> 
> 赞同：1
> 
> 时间：2013-01-12T16:48:05.843
> 
> 标签：php, javascript, sql-server, database, json

我有一个关于 JSON 和 MySQL 数据库的问题。我想要的是我可以将 JSON 文件中的数据加载到我的数据库中的字段中。我的 JSON 文件如下所示：

```
{
    "wijken": {
        "11": {
            "id": "kml_1",
            "fid": "0",
            "wijziging": "Ja",
            "nieuwnr": "11",
            "naam": "Noordoost",
            "wijk": "Kanaaldorpen en -zone",
            "wijknr": "11",
            "objectid": "1",
            "area": "0",
            "len": "0"
        },
        "12": {
            "id": "kml_2",
            "fid": "1",
            "wijziging": "Ja",
            "nieuwnr": "12",
            "naam": "Noordoost",
            "wijk": "Oostakker",
            "wijknr": "12",
            "objectid": "2",
            "area": "0",
            "len": "0"
        }
    }
} 
```

我有一个带有字段的表“wijken”的数据库：

> ID / FID / WIJZIGING / NIEUWNR / NAAM / WIJK / WIJKNR / OBJECTID / AREA / LEN

现在我希望 json 文件中的所有数据都出现在该表中。(php + javascript)

有人可以帮我开始吗？（或者提供一些好的搜索词的教程）

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T18:14:06.367

First you need to load the file from the filesystem

```
$json_string = file_get_contents('some/path/to/file.json'); 
```

Then you can turn the json string into a php array using `json_decode`

```
$data = json_decode($json_string, true); 
```

At this point you will be able to access the data to go into the *wijken* table with `$data['wijken']`.

In order to insert this data into a mysql database, you will need to use one of the php mysql extensions, either [mysqli](http://php.net/manual/en/book.mysqli.php) or [PDO](http://php.net/manual/en/ref.pdo-mysql.php).

I will use mysqli for this example:

```
// first create a connection to your database
$mysqli = new mysqli('localhost', 'user', 'password', 'database_name');

// this insert query defines the table, and columns you want to update
$query = <<<SQL
INSERT INTO wijken ('ID', 'FID', 'WIJZIGING', 'NIEUWNR', 'NAAM', 'WIJK', 'WIJKNR', 'OBJECTID', 'AREA', 'LEN')
VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
SQL;

$stmt = $mysqli->prepare($query);

// for each of the 'rows' of data in the json we parsed, we will insert each value
// into it's corresponding column in the database, and we are doing this using prepared
// statements.
foreach ($data['wijken'] as $key => $value) {
    $stmt->bind_param(
        // the types of the data we are about to insert: s = string, i = int
        'sissssiiii', 
        $value['id'],
        $value['fid'],
        $value['wijziging'],
        $value['nieuwnr'],
        $value['naam'],
        $value['wijk'],
        $value['wijknr'],
        $value['objectid'],
        $value['area'],
        $value['len']
    );

    $stmt->execute();
}

$stmt->close();

// close the connection to the database
$mysqli->close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T17:09:23.053

这将输出您的 json 键和值。

```
$jsonIterator = new RecursiveIteratorIterator(
    new RecursiveArrayIterator(json_decode($json, TRUE)),
    RecursiveIteratorIterator::SELF_FIRST);

foreach ($jsonIterator as $key => $val) {
    if(is_array($val)) {
        echo "$key:\n";
    } else {
        echo "$key => $val\n";
    }
} 
```

# php - MYSQL 在 PHP 中返回空结果

> ID：14295509
> 
> 赞同：0
> 
> 时间：2013-01-12T16:48:26.670
> 
> 标签：php, mysql

我有下表国家

```
country  clicks
-------  ------
0        222
66       34 
175      1000
45       650 
```

并且我使用下面的MYSQL语句根据clicks列获取任何国家的排名（只有一个结果）

```
SELECT COUNT(*) rank 
FROM countryTable a 
JOIN countryTable b 
   ON a.clicks <= b.clicks 
WHERE a.country = 45 
```

以上将返回“2”。然后在我的 php 代码中，我尝试使用

```
$row =  mysql_fetch_array($result) or die(mysql_error()); 
echo $row['rank']; 
```

但是，如果该国家/地区排名第一，则不会返回任何结果。即a.country = 175

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:45:33.163

如果您正在寻找排名，请使用此：

```
SELECT @rownum := @rownum + 1 AS num,
    t.country, t.clicks
FROM countryTable t, 
    (SELECT @rownum := 0) r
ORDER BY t.clicks DESC 
```

**结果**

```
| 数字 | 国家 | 点击 |
--------------------------
| 1 | 175 | 1000 |
| 2 | 45 | 650 |
| 3 | 0 | 222 |
| 4 | 66 | 34 |
```

## [看到它在行动](http://sqlfiddle.com/#!2/30601/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T17:08:31.937

连接 ON 是列之间的连接，而不是比较。

**更新**

```
SELECT COUNT(*)+1 rank 
FROM countryTable
WHERE clicks > (SELECT clicks FROM countryTable WHERE country = 45) 
```

推理：搜索排名意味着搜索点击次数 > 给定点击次数的记录数。

因此，对于 175，有 0 个国家的点击率更高 => 排名 1，国家 45，1 个国家的点击率更高 => 排名 2

**PHP**

```
$result = mysql_query("....")
$row = mysql_fetch_array($result)
... 
```

通常它应该可以工作，除非您在连接到服务器时遇到问题。这就是你应该使用调试技能的地方。做一个 var_dump($result) 看它是否返回 false，如果是那么它是一个连接问题（检查 mysql_connect 或其他东西）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T17:54:31.333

@PutraKg 我认为您可以关闭这个问题，因为我在这篇文章中回答了它[MYSQL 仅在询问第一个排名时不会返回 PHP 中的结果](https://stackoverflow.com/questions/14300868/mysql-does-not-return-result-in-php-when-asked-for-the-first-ranking-only/14303343#14303343);-)

# jquery - .js.coffee 文件未在 rails 应用程序中运行

> ID：14295511
> 
> 赞同：0
> 
> 时间：2013-01-12T16:48:35.627
> 
> 标签：jquery, ruby-on-rails

我正在尝试基于#381 railscast 剧集运行一个简单的 javascript 文件。但是，当我在我的 javascript 文件中放置警报时，它不会在我加载页面时出现。我确信在查看源代码时文件本身已加载。任何想法为什么它没有加载？

应用程序.js：

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery_ujs
//= require jquery-fileupload/basic
//= require jquery-fileupload/vendor/tmpl
//= require js-routes
//= require twitter/bootstrap
//= requre_self
//= require_tree . 
```

images.js.coffee：

```
jQuery ->
  alert("hello world")
  $('#new_image').fileupload
    dataType: "script" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:36:50.040

尝试从 application.js 中删除导致 JS 错误的文件。您也可以尝试删除`require_tree .`哪些递归包含 app/assets/javascripts 中的所有文件，但如果您这样做，则必须手动添加所有需要包含的文件。

# emacs - emacs24 语义完成

> ID：14295512
> 
> 赞同：4
> 
> 时间：2013-01-12T16:48:48.737
> 
> 标签：emacs, cedet

我试图让语义完成与 emacs 24 和它附带的 cedet 版本一起工作。完成适用于我在自己的源文件中定义的类，但完成不适用于标准库或 STL 东西这是我的 emacs 配置：

```
(require 'cedet)
(require 'semantic)
(require 'semantic/ia)
(require 'semantic/bovine/gcc)
(semantic-add-system-include "/usr/include/c++/4.6.3" 'c++-mode)
(setq semantic-default-submodes
      '(global-semantic-idle-scheduler-mode
        global-semanticdb-minor-mode
        global-semantic-idle-summary-mode
        global-semantic-idle-completions-mode
        global-semantic-highlight-func-mode
        global-semantic-decoration-mode
        global-semantic-mru-bookmark-mode))
(setq semanticdb-default-save-directory "~/.semanticdb/"
  semantic-complete-inline-analyzer-idle-displayor-class 'semantic-displayor-ghost)
(semantic-mode t) 
```

在我的 ~/.semanticdb 目录中，我只看到“！usr！include！c++！4.6！x86_64-linux-gnu！bits！semantic.cache”，它甚至没有使用我在配置中指定的版本。

例如，当我在 std::list 上尝试 Mx semantic-analyze-possible-completions 时，我收到一条错误消息：“找不到 std::list 的类型”

关于如何调试或如何修复它的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-21T16:31:55.987

我今天在我的新 SSD 上安装了一个新的 Ubuntu 13.04，这是我配置 CEDET 的步骤（我检查了它是否可以完成`std::list`）。

## 基本设置

1.  获取一个新的[emacs](http://ftpmirror.gnu.org/emacs/)并从源代码构建它。这很容易

    ./configure && make && sudo make install

2.  添加到`.emacs` （语义模式 1）

这就是整个设置。

## 测试

1.  在不加载任何内容的情况下运行 emacs：

    emacs -q test.cc

2.  输入代码

    `#include <list>`

    ```
    int main() {
        std::list lst;
        lst.$
        return 0;
    } 
    ```

3.  `M-x` `semantic-mode`

4.  点在`$`,`M-x` `semantic-ia-show-variants`

## 故障排除

如果东西不起作用，则语义数据库可能已损坏。

只要找到它在哪里，对我来说它是`semanticdb-default-save-directory`="~/.emacs.d/semanticdb"，然后从那里删除所有内容。

然后，在访问源文件时，调用`semantic-force-refresh`.

# c# - 无法为多边形指定名称

> ID：14295515
> 
> 赞同：0
> 
> 时间：2013-01-12T16:48:56.710
> 
> 标签：c#, wpf, polygon

我正在尝试为多边形指定名称，但是 Visual Studio 一直给我一个例外：

```
'The invocation of the constructor on type 'Isometric_Turtle_Simulator.MainWindow' that     matches the specified binding constraints threw an exception.' Line number '3' and line    position '9'. 
```

我的代码是：

```
 for (int a = 0; a < z; a++)
        {
            for (int b = 0; b < x; b++)
            {
                for (int c = 0; c < y; c++)
                {
                    tile = getTile.genTile(worldData[a,b,c]);
                    tile.Name = a.ToString() + "," + b.ToString() + "," + c.ToString();
                    Canvas.SetTop(tile, posY);
                    Canvas.SetLeft(tile, posX);
                    mainCanvas.Children.Add(tile);
                    tile.MouseDown += (sender, e) => mouseDownEvent(sender, e);
                    posY = posY + 15;
                    posX = posX + 30;
                }
                posY = posY - 15 * (x - 1);
                posX = posX - 30 * (y + 1);
            }
            posX = posXOrigin;
            posY = posY - (35 + (15 * x));
            Height = Height + 35;
            mainCanvas.Height = Height;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T16:56:17.160

我相信您不能在 Name 属性中使用非法字符，即逗号。尝试改用下划线。

# php - 如何解决此错误？

> ID：14295516
> 
> 赞同：0
> 
> 时间：2013-01-12T16:49:02.933
> 
> 标签：php

请帮我解决这个问题：

```
if($_POST["keyword"]) {
$keyword       = $_POST["keyword"];
$keyword       = trim($keyword);
$keyword_array = explode(" ",$keyword);
$numberofwords = (integer)count($keyword_array);
require("server.php");
$link = open_koneksi();
$tbl_name      = "author";
$query         = "SELECT COUNT(*) as num FROM $tbl_name WHERE " ;
   for ($x = 0; $x<= $numberofwords; $x++) {
      $query .= "author LIKE '%$keyword_array[$x]%'";
      if ( $x <  $numberofwords ) {
         $query .= " AND ";
      }
   }
   echo("<SCRIPT>document.location.href='?p=result';</SCRIPT>"); 
```

}

如果程序段中的代码被执行，会出现如下警告：

```
Notice: Undefined offset: 1 in C:\xampp\htdocs\bijang\result.php on line 111 
```

故障位置参考这段代码：

```
$query .= "author LIKE '%$keyword_array[$x]%'"; 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T16:51:58.843

你的问题大概是这样的：

```
 for ($x = 0; $x<= $numberofwords; $x++) {
                 ## 
```

您正在计算索引`0`直到`1`，因为前一个`count()`给了您`1`。但这是索引的总数，最后一个索引仍然是`0`.

将其更改为：

```
 for ($x = 0; $x < $numberofwords; $x++) {
                  # 
```

更好的是，只需使用[`foreach`](http://php.net/foreach)：

```
 foreach ($keyword_array as $x => $kw) { 
```

`$x`这会隐式计算索引。
您可能仍然需要更改`AND`填充物的最后进入检测。（通常您首先创建一个子字符串数组，然后`implode()`使用填充符`" AND "`。）

YadaYada：还要注意未过滤的输入。对文本字符串使用数据库转义功能。不过，使用 PDO 和准备好的语句要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T16:52:35.283

因为`$keyword_array`数组没有`$x`密钥。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T06:30:06.073

事实证明，要克服，只需一个词：

```
error_reporting(0); 
```

问题是，通知是否包含在错误中？

# javascript - 查找单击行的表格行号

> ID：14295519
> 
> 赞同：0
> 
> 时间：2013-01-12T16:49:26.580
> 
> 标签：javascript, dom

如何将功能添加到下面的现有 javascript 编码中以找出单击的行号。表头应该是豁免的，数据集将从 ID 号 0 开始。

例如，如果单击表格的第二行，则会弹出一个警告框，提示“ID # is 1”

```
<!DOCTYPE html>
<html>
<head>
<style type="text/css">
#mstrTable {
     border: 1px solid black
}
#mstrTable td, th {
     border: 1px solid black
}

#mstrTable tr.normal td {
    color: black;
    background-color: white;
}
#mstrTable tr.highlighted td {
    color: white;
    background-color: gray;
}
</style>
</head>
<body>
  <table id="mstrTable">
     <thead>
      <tr> 
        <th>File Number</th>
        <th>Date1</th>
        <th>Date2</th>
        <th>Status</th>
        <th>Num.</th>
      </tr>
    </thead>
    <tbody>
      <tr> 
        <td>KABC</td>
        <td>09/12/2002</td>
        <td>09/12/2002</td>
        <td>Submitted</td>
        <td>0</td>

      </tr>
      <tr> 
        <td>KCBS</td>
        <td>09/11/2002</td>
        <td>09/11/2002</td>
        <td>Approved</td>
        <td>1&nbsp;</td>
      </tr>

      <tr> 
        <td>WFLA</td>
        <td>09/11/2002</td>
        <td>09/11/2002</td>
        <td>Submitted</td>
        <td>2</td>
      </tr>
      <tr> 
        <td>WTSP</td>
        <td>09/15/2002</td>
        <td>09/15/2002</td>
        <td>In-Progress</td>
        <td>3</td>
      </tr>
    </tbody>
  </table>

<script type="text/javascript">
(
  function( )
  {
      var trows = document.getElementById("mstrTable").rows;

      for ( var t = 1; t < trows.length; ++t )
      {
          trow = trows[t];
          trow.className = "normal";
          trow.onclick = highlightRow;
      }

      function highlightRow( )
      {
          for ( var t = 1; t < trows.length; ++t )
          {
              trow = trows[t];
              trow.className = ( trow == this && trow.className != "highlighted") ? "highlighted" : "normal";
          }
      }
  }
)();
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:02:37.087

[在此处](http://www.w3schools.com/jsref/prop_tablerow_rowindex.asp)检查 rowIndex 属性。它从 0 开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:12:27.907

只需将`data-row-no`属性添加到每个`<tr>`. 然后从 JavaScript 调用`trow.getAttribute('data-row-no')`获取当前行。

```
...
 <table id="mstrTable">
 <thead>
  <tr> 
    <th>File Number</th>
    <th>Date1</th>
    <th>Date2</th>
    <th>Status</th>
    <th>Num.</th>
  </tr>
</thead>
<tbody>
  <tr data-row-no="0"> 
    <td>KABC</td>
    <td>09/12/2002</td>
    <td>09/12/2002</td>
    <td>Submitted</td>
    <td>0</td>

  </tr>
  <tr data-row-no="1"> 
    <td>KCBS</td>
    <td>09/11/2002</td>
    <td>09/11/2002</td>
    <td>Approved</td>
    <td>1&nbsp;</td>
  </tr>

  <tr data-row-no="2"> 
    <td>WFLA</td>
    <td>09/11/2002</td>
    <td>09/11/2002</td>
    <td>Submitted</td>
    <td>2</td>
  </tr>
  <tr data-row-no="3"> 
    <td>WTSP</td>
    <td>09/15/2002</td>
    <td>09/15/2002</td>
    <td>In-Progress</td>
    <td>3</td>
  </tr>

...
(
function( )
{
  var trows = document.getElementById("mstrTable").rows;

  for ( var t = 1; t < trows.length; ++t )
  {
      trow = trows[t];
      trow.className = "normal";
      trow.onclick = highlightRow;
  }

  function highlightRow( )
  {
      for ( var t = 1; t < trows.length; ++t )
      {
          trow = trows[t];
          trow.className = ( trow == this && trow.className != "highlighted") ? "highlighted" : "normal";
          alert(trow.getAttribute('data-row-no'));
      }
  }
}
)(); 
```

# mysql - MySQL - 求和，但前提是所有条件都满足

> ID：14295527
> 
> 赞同：2
> 
> 时间：2013-01-12T16:50:40.657
> 
> 标签：mysql, sql, select

我有一张一周中有几天的桌子。一周中的每一天都有独特的属性，例如冰淇淋是否在当天成功送达：

```
ID DAY_WEEK ICE_CREAM
 1 星期一 1
 2 星期一 0
 3 星期一 1
 4 星期一 1
 5 星期二 0
 6 星期二 0
 7 星期三 0
 8 星期三 1
 9 星期三 0
 10 星期四 1
 11 星期四 1

```

目前，我正在使用每个`DISTINCT`id 的计数来汇总成功天数，`ice_cream = 1 or = 0`但无论所有天数是否成功，它都会计数。如果所有的日子都导致冰淇淋运行成功/不成功，我如何只计算一周中的哪一天？比如星期四或星期二？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T16:57:58.787

```
SELECT DAY_WEEK
FROM table
GROUP BY DAY_WEEK
HAVING COUNT(DISTINCT ICE_CREAM) = 1 
```

[您可以在SQL Fiddle](http://sqlfiddle.com/#!2/2ff5e/16)上看到结果，由**`JW`**

# python - 熊猫花式索引和合并

> ID：14295531
> 
> 赞同：4
> 
> 时间：2013-01-12T16:51:06.687
> 
> 标签：python, pandas

通过精美索引过滤后将更改合并回熊猫数据框的最简单方法是什么？

例如，定义一个数据框，有两列 x 和 y，并选择所有 x 为偶数的行，然后将 y 中的对应值设置为 0。

```
d = pd.DataFrame({'x':range(10), 'y':range(11,21)})
d[d.x % 2 == 0]['y'] = 0 
```

“花式索引”布尔查询会复制数据帧，因此更改永远不会传播回原始数据帧。执行此操作有更好的方法吗？

我目前的解决方案是定义一个临时数据框 w，基于花哨的布尔索引，将 w 中的 'y' 中的相应值设置为 0，然后使用索引将 w 合并回 d。必须有一种更有效（希望更直接）的方式来做到这一点：

```
w = d[d.x % 2 == 0]
w.y = 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T17:02:22.113

使用 DataFrame.ix[]：

```
In [21]: d
Out[21]: 
   x   y
0  0  11
1  1  12
2  2  13

In [22]: d.ix[d.x % 2 == 0, 'y'] = -5

In [23]: d
Out[23]: 
   x   y
0  0  -5
1  1  12
2  2  -5 
```

# php - 只有几个数据库列之一在 json 中变为空

> ID：14295532
> 
> 赞同：0
> 
> 时间：2013-01-12T16:51:10.193
> 
> 标签：php, mysql, json

我正在尝试复制我以前使用过的网络服务。它从 mySQL 数据库中获取数据，然后在 json 中回显。它以前工作过很多次，但现在我似乎无法让它工作。

我的数据库是这样设置的（我知道它是瑞典语的，但希望你能明白）：

```
#   Kolumn  Typ Kollationering  Attribut    Null    Förvalt
1   id  int(11)         Nej Inget   AUTO_INCREMENT     
2   desk    text    utf8_swedish_ci     Ja  NULL
3   info    varchar(4)  utf8_swedish_ci     Ja  NULL 
```

然后我的 php-page 设置如下：

```
$query = "SELECT * 
FROM  `$table`
LIMIT 100
";
$result = mysql_query($query,$conn) or die('Errant query:  '.$query);

$posts = array();
if(mysql_num_rows($result)) {
while($post = mysql_fetch_assoc($result)) {
  $posts[] = array('post'=>$post);
}
}

header('Content-type: application/json');
echo json_encode(array('posts'=>$posts)); 
```

我得到的结果很奇怪：

```
{"posts":[{"post":{"id":"1","desk":"blablabla","info":"4353"}},{"post":    {"id":"2","desk":**null**,"info":"3413"}}]} 
```

我得到一个空结果，我实际上在数据库中有一些东西，它似乎与瑞典语中的“åäö”-chars 相关，但这从来都不是问题。我实际上尝试从另一个数据库中导出一个表，在那里我尝试过同样的事情，并且在我开始输入新值之前它一直有效。

有什么想法吗？

编辑：这是数据库中的两个值。

```
desk    info
fragannanananana    4353
arhåaöafghsgjädsiahäkömgdsjnö   3413 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T15:15:01.433

我解决了。只需添加 mysql_query('SET CHARACTER SET utf8'); 它就像一个魅力！

# c++ - 添加默认参数使此构造函数成为默认构造函数

> ID：14295535
> 
> 赞同：-2
> 
> 时间：2013-01-12T16:51:42.427
> 
> 标签：c++, arguments, default

我正在尝试运行以下简单代码，但不断得到：

```
libc++abi.dylib: terminate called throwing an exception 
```

有人可以向我解释一下这是什么意思吗？

代码：

```
int main()
{
    ifstream in;
    cout << "Enter name: ";
    string s = GetLine();
    in.open(s.c_str());
    if (in.fail())
        Error("Error your file was not found");
    return 0;
} 
```

错误来自以下方面：

```
ErrorException::ErrorException(string m="unspecified custom error") 
: msg(m) {
}

ErrorException::~ErrorException() throw() {}

const char* ErrorException::what() const throw() {
return this->msg.c_str(); 
}

void Error(string str) {
    ErrorException err(str);
    throw err;
} 
```

我应该得到我指定的错误消息，但我没有；谁能明白为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:02:23.060

你抛出一个你没有捕捉到的异常。这会终止程序。您没有代码来接收错误消息、打印它或执行任何类似操作。如果要捕获异常，请使用`try`/`catch`块。在该`catch`部分中，您可以对错误消息执行任何操作。

尝试类似：

```
int main()
{
    ifstream in;
    cout << "Enter name: ";
    string s = GetLine();
    try
    {
       in.open(s.c_str());
       if (in.fail())
           Error("Error your file was not found");
    }
    catch (ErrorException& e)
    {
       cerr << e.what() << endl;
    }
    return 0;
} 
```

# ios - 创建 SystemSoundID 失败 iOS - OSStatus = 0

> ID：14295541
> 
> 赞同：0
> 
> 时间：2013-01-12T16:52:03.393
> 
> 标签：ios, audiotoolbox, system-sounds

我在这里遇到了一个非常相似的问题：[链接](https://stackoverflow.com/questions/11703923/cfurlref-requires-a-bridged-cast-error) 在 ViewController.h 文件中我添加了这个：

```
#import <UIKit/UIKit.h>
#include <AudioToolbox/AudioToolbox.h>

@interface ViewController : UIViewController
@property SystemSoundID outSystemSoundID1;
@end 
```

在 ViewController.m 中：

```
#import <ViewController.h>
@interface ViewController ()
- (IBAction)playtrack;

@end

@implementation ViewController

@synthesize outSystemSoundID1;

- (void)viewDidLoad
{
[super viewDidLoad];

NSString *path1 = [[NSBundle mainBundle] pathForResource:@"1000Hz-0-4sec" ofType:@"wav"];
NSURL *url1 = [NSURL fileURLWithPath:path1];
//CFURLRef lol = (CFURLRef)objc_unretainedPointer(url1);
//AudioServicesCreateSystemSoundID( lol, &outSystemSoundID1);
OSStatus status = AudioServicesCreateSystemSoundID((__bridge CFURLRef)url1, &outSystemSoundID1);
NSLog(@"AudioServicesCreateSystemSoundID status = %ld", status);
}

- (IBAction)playtrack {
AudioServicesPlaySystemSound (outSystemSoundID1);
}
@end 
```

我要播放的声音文件位于支持文件下。

OSStatus 说：

> AudioServicesCreateSystemSoundID 状态 = 0

我为 CFURLRef 尝试了许多不同的组合，就像您在注释掉的部分中看到的那样。

也许我的文件不被支持？在我得到解决方案后，我想用这种方式初始化 3 个 aif 格式的声音文件。

希望你能帮我！谢谢 ：）

我已激活 ARC，并且使用的是 iOS 6.0.1 (iPhone)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T17:39:45.657

`OSStatus = 0`表示“没有错误”，这意味着该函数`AudioServicesCreateSystemSoundID`确实*成功*了。

# android - 将下载文件的文件大小与服务器上的文件大小进行比较

> ID：14295542
> 
> 赞同：0
> 
> 时间：2013-01-12T16:52:04.323
> 
> 标签：android

1.  我能够从服务器很好地将数据库文件下载到 sdcard，但现在的问题是当下载中断时它不会恢复，因此下载的数据库文件不完整，从而导致我的应用程序崩溃。他们是我可以恢复下载或将下载文件的大小与原始文件大小进行比较的一种方式。
2.  我如何获取服务器日期或网络运营商日期以进行其他比较

示例代码

```
 protected String doInBackground(String... f_url) {
        int count;
        try {
            URL url = new URL(f_url[0]);
            URLConnection conection = url.openConnection();
            conection.connect();
            // getting file length
           int lenghtOfFile = conection.getContentLength();

            // input stream to read file - with 8k buffer
            InputStream input = new BufferedInputStream(url.openStream(), 8192);

            // Output stream to write file
            String baseDir = Environment.getExternalStorageDirectory().getAbsolutePath();
            File testDirectory = new File(baseDir +"/test");
             testDirectory.mkdirs();

            OutputStream output = new FileOutputStream(testDirectory + "/db");

            byte data[] = new byte[1024];

            long total = 0;

            while ((count = input.read(data)) != -1) {
                total += count;
                // publishing the progress....
                // After this onProgressUpdate will be called
                publishProgress(""+(int)((total*100)/lenghtOfFile));

                // writing data to file
                output.write(data, 0, count);
            }

            // flushing output
            output.flush();

            // closing streams
            output.close();
            input.close();

        } catch (Exception e) {
            Log.e("Error: ", e.getMessage());
        }

        return null;
    }

    /**
     * Updating progress bar
     * */
    protected void onProgressUpdate(String... progress) {
        // setting progress percentage
        pDialog.setProgress(Integer.parseInt(progress[0]));
   } 
```

我只是在调用哪里 file_url 是下载链接

```
 new DownloadFileFromURL().execute(file_url); 
```

# algorithm - 具有最小子序列长度约束的序列比对

> ID：14295544
> 
> 赞同：3
> 
> 时间：2013-01-12T16:52:17.310
> 
> 标签：algorithm, sequence-alignment

如何实现具有最小子序列长度约束的序列比对。例如，让这些输入的最小子序列长度为 3。使用 Smith-Waterman 给出如下输出。

```
ATACGGACC
||    |||
ATCATAACC 
```

但相反，我需要像下面这样。

```
---ATACGGACC
   |||   |||
ATCATA---ACC 
```

是否有一个已知的算法，或者你知道一种方法？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T05:13:29.033

看看 Smith-Waterman 是如何工作的。您有两个序列（长度为 N 的 S1，长度为 M 的 S2）并创建一个 NxM 矩阵（我们称之为 A），其中 A(i,j) 是“S1[1..i] 和 S2 的最佳分数对齐[1..j]。” 为此，您编写了一个关于如何根据最后一个元素获得 A(i,j) 的递归 - A(i,j) 是最好的

```
A(i-1, j-1) + match/mismatch score
A(i,j-1) + indel score
A(i-1,j) + indel score 
```

这是基本思想；你可能需要稍微调整一下。

要执行您的要求，您需要两个矩阵。设 A(i,j) 为“S1[1..i] 和 S2[1..j] 的最佳得分对齐以匹配结尾”，B(i,j) 为“S1[ 的最佳得分对齐” 1..i] 和 S2[1..j] 以插入缺失结尾。"

让我们从 B 开始，因为它更容易。B(i,j) 是最好的

```
A(i,j-1) + indel score
A(i-1,j) + indel score
B(i,j-1) + indel score
B(i-1,j) + indel score 
```

A(i,j) 是最好的

```
A(i-1, j-1) + match/mismatch score
B(i-3, j-3) + match/mismatch score for the three 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T17:24:18.523

该算法有效地返回所有可能子序列的二维表。您必须做额外的工作来提取实际的子序列，这显然是您正在做的。在对齐（反向）跟踪期间，您可以进行准入检查：

```
if(subsequence.length() > 2)
     results.add(subsequence); 
```

如果你不想像我提到的那样去，那么你介意展示你用来获取实际子序列的代码，那么也许我们可以告诉你在哪里编辑？

# clojure - carmine的wcar宏应该怎么用？

> ID：14295548
> 
> 赞同：10
> 
> 时间：2013-01-12T16:52:33.333
> 
> 标签：clojure, redis, carmine

我对应该如何使用胭脂红进行通话感到困惑。我发现了[胭脂红文档](https://github.com/ptaoussanis/carmine#connections)`wcar`中描述的宏：

```
(defmacro wcar [& body] `(car/with-conn pool spec-server1 ~@body)) 
```

除了redis命令之外，我真的`wcar`每次想和redis通话时都要打电话吗？或者我可以在一开始就调用一次吗？如果有怎么办？

这是 tavisrudd 的 redis 库的一些代码的样子（来自我的玩具 url 缩短器项目的测试套件）：

```
(deftest test_shorten_doesnt_exist_create_new_next 
  (redis/with-server test-server
    (redis/set "url_counter" 51)
    (shorten test-url)
    (is (= "1g" (redis/get (str "urls|" test-url))))
    (is (= test-url (redis/get "shorts|1g"))))) 
```

现在我只能通过这样写来让它与胭脂红一起使用：

```
(deftest test_shorten_doesnt_exist_create_new_next
  (wcar (car/set "url_counter" 51))
    (shorten test-url)
    (is (= "1g" (wcar (car/get (str "urls|" test-url)))))
    (is (= test-url (wcar (car/get "shorts|1g"))))) 
```

那么使用它的正确方法是什么，我没有得到什么基本概念？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T08:09:18.797

丹的解释是正确的。

`Carmine`默认情况下使用响应流水线，而`redis-clojure`需要您在需要时请求流水线（使用`pipeline`宏）。

你想要流水线的主要原因是为了性能。Redis 是如此之快，以至于使用它的瓶颈通常是请求+响应通过网络传输所需的时间。

[Clojure 解构](http://clojure.org/special_forms#Special%20Forms--Binding%20Forms%20%28Destructuring%29)提供了一种处理流水线响应的便捷方式，但它确实需要以不同的方式编写代码`redis-clojure`。我写你的例子的方式是这样的（我假设你的`shorten`fn 有副作用，需要在`GET`s 之前调用）：

```
(deftest test_shorten_doesnt_exist_create_new_next
  (wcar (car/set "url_counter" 51))
  (shorten test-url)
  (let [[response1 response2] (wcar (car/get (str "urls|" test-url))
                                    (car/get "shorts|1g"))]
    (is (= "1g" response1))
    (is (= test-url response2)))) 
```

所以我们将第一个 ( `SET`) 请求发送到 Redis 并等待回复（我不确定这是否真的有必要）。然后我们一次发送接下来的两个 ( `GET`) 请求，允许 Redis 将响应排队，然后将它们作为我们将解构的向量一次性接收。

起初，这似乎是不必要的额外工作，因为它要求您明确何时接收排队响应，但它带来了很多好处，包括性能、清晰度和[可组合的命令](https://github.com/ptaoussanis/carmine#commands-are-just-functions)。

如果您正在寻找我认为惯用`Carmine`用法的示例（只需搜索`wcar`调用），我会在 GitHub 上查看 Touchstone。（对不起，所以阻止我包含另一个链接）。

否则，如果您有任何其他问题，请给我发电子邮件（或提交 GitHub 问题）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-13T01:58:46.427

不用担心，您已经以正确的方式使用它。

Redis 请求函数（例如您在上面使用的 get 和 set）都通过另一个函数路由，该函数[`send-request!`](https://github.com/ptaoussanis/carmine/blob/66b29f5cd16532cadcab2f38d76d519acd594628/src/taoensso/carmine/protocol.clj#L100)依赖于动态绑定`*context*`来提供连接。尝试在没有该上下文的情况下调用任何这些 Redis 命令将失败并出现“无上下文”错误。[`with-conn`](https://github.com/ptaoussanis/carmine/blob/66b29f5cd16532cadcab2f38d76d519acd594628/src/taoensso/carmine.clj#L35)宏（在 中使用）`wcar`设置该上下文并提供连接。

然后，`wcar`宏只是一个瘦包装器`with-conn`，假设您将对所有 Redis 请求使用相同的连接详细信息。

到目前为止，这与 Tavis Rudd 的[redis-clojure](https://github.com/tavisrudd/redis-clojure)的工作方式非常相似。

`wcar`那么，现在的问题是，当 Redis-Clojure 只需要一个 时，为什么 Carmine 需要多个's `with-server`？

答案是，它没有。除了有时，当它发生时。Carmine`with-conn`使用 Redis 的[“流水线”](http://redis.io/topics/pipelining)以相同的连接发送多个请求，然后将响应打包在一个向量中。自述文件中的示例显示了这一点。

```
(wcar (car/ping)
      (car/set "foo" "bar")
      (car/get "foo"))
=> ["PONG" "OK" "bar"] 
```

在这里您会看到`ping`，`set`并且`get`只关心发送请求，而将接收响应留给`wcar`。这排除了 wcar 内部的断言（或任何结果访问），并导致`wcar`您拥有的请求和多个调用分离。

# jquery - 带有关闭按钮和动画的 jQuery 工具提示，可以淡入淡出

> ID：14295551
> 
> 赞同：0
> 
> 时间：2013-01-12T16:52:58.183
> 
> 标签：jquery, html, css, tooltip

我一直在寻找一个简单的工具提示。我一直在看 qTip2，但它看起来过于复杂 - 但它几乎完全符合我的要求。

可以这么说，没有“插件”就可以完成吗？

我需要的是一个工具提示，它可以位于 div、左/右和上/下的任何位置。

我需要它在页面加载时可见，带有关闭按钮，然后在 1 分钟后淡出。

我还需要动画，以便吸引用户注意，我这样做了：

[http://jsfiddle.net/dH6LS/465/](http://jsfiddle.net/dH6LS/465/)

```
var glow = $('.confirm_selection');
setInterval(function(){
glow.hasClass('glow') ? glow.removeClass('glow') : glow.addClass('glow');
}, 1000); 
```

我是 jquery 的新手，任何建议或帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T10:51:16.527

**使用这个 setTimeout，*更多请看演示***

**代码**

`jQuery(document).ready(function() {`

```
 setTimeout(function(){
         $(".confirm_selection").fadeOut("slow")
          }, 5000);
    }); 
```

[**演示**](http://jsfiddle.net/dH6LS/468/)

# java - java.util.TreeMap 的子类在调用 put(key, value) 方法时给出 NullPointerException

> ID：14295554
> 
> 赞同：5
> 
> 时间：2013-01-12T16:53:07.643
> 
> 标签：java, collections, nullpointerexception, map

我想我可能在这里遗漏了一些明显的东西，但无论如何让我们看看代码。

```
public static class FreeMap extends TreeMap<String, Integer> {
    @Override
    public Integer put(String key, Integer value) {
        out.println(super.toString());
        out.println(super.getClass().getName()+" "+key+" : "+value);
        int i = super.put(key, value);//line 227
        assert this.size() == 1;
        return i;
    }

}
public static void main(String[] args) {
    FreeMap fm = new FreeMap();
    fm.put("A", 10);
} 
```

在运行此程序时，您将获得如下输出：

```
{}
com.xxxxxxxxxxxxxxxxxxxxxxxx.Graph$FreeMap A : 10
Exception in thread "main" java.lang.NullPointerException
at com.xxxxxxxxxxxxxxxxxxxxxxxx.Graph$FreeMap.put(Graph.java:227)
at com.xxxxxxxxxxxxxxxxxxxxxxxx.Graph.main(Graph.java:212) 
```

我可以看到 super 指的是 FreeMap，而不是 TreeMap，如果它会引发我可以理解的 StackOverflow 异常。为什么是空指针异常？

提前致谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-12T16:56:30.967

是的，因为[`put`](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html#put%28K,%20V%29)返回前一个值：

> **返回：**
> 与 key 关联的前一个值，如果没有 key 映射，则返回 null。（返回 null 还可以指示映射先前将 null 与 key 关联。）

没有先前*的*值，所以它正在返回`null`，然后您将其拆箱，从而导致异常。

鉴于您的方法已经声明为 return `Integer`，修复很容易。改变这个：

```
int i = super.put(key, value); 
```

对此：

```
Integer i = super.put(key, value); 
```

或者理想情况下，为了可读性：

```
Integer oldValue = super.put(key, value); 
```

*请注意，在密钥已经*有值的情况下，这也会更有效- 拆箱和重新装箱没有任何好处。

# php - 如何开发和包含 Composer 包？

> ID：14295558
> 
> 赞同：60
> 
> 时间：2013-01-12T16:53:42.067
> 
> 标签：php, composer-php

我正在寻找用 PHP 开发一个包，但我不希望它立即在 GitHub 或其他地方可用。在我的 中包含一个 Packagist 文件很容易`composer.json`，但是如何将本地包添加到我的中`composer.json`？另外，我应该在`/vendor/foo/bar`（相对于 root `composer.json`）中构建包，还是应该把它放在其他地方？

**编辑**：我想我的问题是关于其他人如何编写他们的包。是否每个新包都被添加到 Packagist，然后当你想测试你的更改时，你提交到 GitHub（或任何地方），然后通过 Composer 将其拉回？这似乎真的很低效。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-09-28T08:07:56.087

由于这个问题有许多不同的组件/标准需要解释，我会在这里尽可能多地解释，你可以PM我或者只是谷歌它来寻找更具体的问题。

要回答您的第一个问题，“如何将本地包添加到我的`composer.json`?”中：

如果“添加本地包”是指自动加载类/包，则可以通过使用 PSR-4 或 PSR-0 或 Composer 中的 Classmap 选项来实现。

### 阅读更多

*   [PSR [petermoulding.com]](https://web.archive.org/web/20140625062725/http://petermoulding.com/php/psr)（通过[archive.org](https://archive.org/)）
*   [Composer 中的 PSR-4 自动加载支持 [seld.be]](http://seld.be/notes/psr-4-autoloading-support-in-composer)
*   [自动装弹机之战：PSR-0 与 PSR-4 [Sitepoint]](http://www.sitepoint.com/battle-autoloaders-psr-0-vs-psr-4/)
*   [如果 classmap 实际上更快，为什么要在 composer 中使用 PSR-0 或 PSR-4 自动加载？[所以]](https://stackoverflow.com/q/22803419)

如果您需要有关 PSR-0、PSR-4 和 Classmap 的更多信息，可以使用 Google 搜索。

### 例子

```
"autoload": {
   "psr-4": { "Core\\": "src/Core" }  ## "standard": { "namespace" : "path/to/dir"}
} 
```

### 或者（编辑）

如果你真的想添加一个本地包：

1.  为本地包创建一个`composer.json`，例如：

    ```
    {
       "name": "localPackage/core",
       "version": "dev-master"
    } 
    ```

    您还可以根据需要指定其他属性和/或依赖项。

2.  压缩包，将`composer.json`文件作为 . 中的根文件`archive.zip`，并将其放置在需要的位置。

3.  在要包含本地包的其他项目/包中，将本地包名称添加到所需参数，例如

    ```
    "localPackage/core": "dev-master" 
    ```

    在参数下添加以下内容`repositories`：

    ```
    "repositories" : [
        {
            "type": "artifact",
            "url": "path/to/localPackage.zip"
        }
    ] 
    ```

现在如果你在 git 上有本地包，那么就不需要存档包（基本上省略步骤 2），你只需要将上面示例中的 URL 替换为`path/to/localPackage/.git`.

*（编辑结束）*

* * *

现在回答更大的问题：“我如何开发和包含 Composer 包？”：

1.  决定目录结构。通常情况如下：

    ```
    /PackageRoot
        /src/PackageCore
        composer.json   ## this is your library’s composer.json
        LICENSE 
    ```

    并设置您的`composer.json`.

    我的一个文件的示例`composer.json`可以在[http://pastebin.com/tyHT01Xg](http://pastebin.com/tyHT01Xg)找到。

2.  上传到[Github](https://github.com/)并[标记版本](http://git-scm.com/book/en/Git-Basics-Tagging)。使用[语义版本控制](http://semver.org/)（确保`vendor`在上传到 Github 时排除/忽略目录）。

3.  [使用Packagist](https://packagist.org/)注册包（登录后）。

    如果您已将提交标记为`v1.0.0`（或类似），那么这将显示在该包的 Packagist 仪表板中。

现在，如果一切都正确，您应该能够通过将您的库添加到该项目中来将其用作其他项目中的依赖`composer.json`项。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2016-08-01T11:46:30.453

您可以告诉 composer 使用任何本地路径，而不是创建新的存储库：

[https://getcomposer.org/doc/05-repositories.md#path](https://getcomposer.org/doc/05-repositories.md#path)

例如，假设您的 PHP 项目位于`~/devel/projects`

你可能有你的主要项目`~/devel/projects/main_project`，你的“本地包”在`~/devel/projects/local_package`

为本地包定义您的作曲家配置。在`~/devel/projects/local_package/composer.json`.

```
{
    "name": "your_vendor_id/your_local_package",
    ...
} 
```

然后，您可以`~/devel/projects/main_project/composer.json`通过路径 repo 编辑并链接到您的本地包：

```
"repositories": [
    {
        "type": "path",
        "url": "../local_package",
        "options": {
            "symlink": true
        }
    }
],
"require": {
    "your_vendor_id/your_local_package": "dev-master",
    ...
} 
```

有关此链接的更多信息（不是我写的，但对此主题有很好的解释）：

[https://carlosbuenosvinos.com/working-at-the-same-time-in-a-project-and-its-dependencies-composer-and-path-type-repository/](https://carlosbuenosvinos.com/working-at-the-same-time-in-a-project-and-its-dependencies-composer-and-path-type-repository/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-09-25T00:03:52.697

似乎这个线程上的大多数答案都不是“知道的”。我自己是 Composer 的新手，但这些答案具有误导性。这个问题可以简单地表述为：“我怎样才能开发一个作曲家包”。

是的，您可以使用自定义存储库或上传未完成的包并在每次更改后更新它。这既不是正确的解决方案，也不是问题的答案。

[Composer 的官方文档](https://getcomposer.org/)没有预先说明这一点并没有帮助，但是您可以在[Libraries 文档页面](https://getcomposer.org/doc/02-libraries.md)上看到标题：

> 每个项目都是一个包

**理解这一点非常重要**

### 作曲家.json：

前面提到的页面继续说明：

> 为了使该软件包可安装，您需要为其命名。您可以通过在`composer.json`
> 
> ```
> {
>     "name": "acme/hello-world",
>     "require": {
>         "monolog/monolog": "1.0.*"
>     }
> } 
> ```

到目前为止，在这个示例中，我们有一个必需的包，现在还有一个名称。注意*`vendor/name`*格式。

所以现在自动加载我们自己的文件，这些文件记录在[基本使用](https://getcomposer.org/doc/01-basic-usage.md)页面上。

> ```
> {
>     "autoload": {
>         "psr-4": {"Acme\\": "src/"}
>     }
> } 
> ```

这将自动加载目录下的命名空间类文件`src/Acme`。

继续玩乐。

### 安装更新

使用以下命令安装或更新软件包：

```
composer update 
```

或者

```
php composer.phar update 
```

这将下载所需的包并创建 autoload.php 文件

我们的项目结构应该类似于以下内容：

```
src
    Acme
        Foo.php
vendor
    monolog
        ...
composer.json 
```

### 包含

现在来测试。

包括 autoload.php

`require_once 'path/to/project/vendor/autoload.php';`

假设 Foo.php 如下所示：

```
<?php

namespace Acme;

class Foo {
    public static function bar(){
        return 'baz';
    }
}

?> 
```

然后我们可以从我们的脚本中调用它：

```
echo Acme\Foo::bar(); // baz 
```

* * *

请更正我可能陈述的任何误导性信息。这似乎是一个流行问题的解决方案。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-04-28T21:43:40.843

这是解决方案的概述以及我自己的

1.  在包装师上发布

由于您还不想发布，因此您正在开发中，这是一个糟糕的选择。

2.  上传github

您可能不想在 github 上发布您的库源，不想为私人回购付费，或者能够使用云外部服务（由于政治或网络政策）。

3.  压缩你的图书馆

您可以在示例实现中使用 composer 存储库路径来指向本地 zip 文件作为发布。每次对库进行更改时都必须重新压缩，即使使用批处理文件来完成，这也很恶心。

4.  上传到您机器上的本地 git/svn 存储库

这已经接近了，但是每次更改库并想要测试示例实现时，您都需要进行作曲家更新。这模仿了制作，但很麻烦。我个人推荐这个解决方案，即使它不是无脑的。

5.  直接自动加载库（sortof 做你想要的）

这是一个 hack，但您可以添加：

```
{    
  "require": {
  },
  "autoload": {
    "psr-4": { 
      "yourlibnamespace": "D:\\Code\\yourlib\\src\\" 
    }
  } 
```

}

请注意，您需要将 lib 中的“require”部分复制并粘贴到您的示例实现中。将“yourlibnamespace”更改为您的库名称空间，将“D:\Code\yourlib\src\”更改为您的库源的本地路径。

这样，任何更改都会立即反映出来。但是，您根本不会使用或测试库的 composer.json 文件。如果您更改库 .json 中的要求，它根本不会通过。所以它有一些很大的缺点，但确实可以做你想做的事，那就是用尽可能少的命令立即测试你的库实现。

6.  直接在库树中添加示例实现**（推荐）**

通常您只有 src\ 和 tests\，但很多都有示例\，您可以在其中找到示例实现。在开发应用程序时，您可以为这些示例实现做出贡献。您可以在本地 git/svn 存储库中执行此操作，并且您可以自动获取 lib 的“require”以及命名空间。这是世界上最好的。我推荐这种方法。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-01-12T17:36:46.890

也许添加自定义存储库会对您有所帮助？

[https://github.com/composer/composer/blob/master/doc/05-repositories.md](https://github.com/composer/composer/blob/master/doc/05-repositories.md)

您可以非常轻松地使用您的库设置本地 git 存储库。

当然，如果您使用 composer 来管理依赖项，您应该在其他地方构建您的库并通过 composer 将其下载到供应商/因为这是我想的重点。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2015-01-14T18:15:17.253

为了提高开发效率，我只需将开发存储库符号链接到已经安装它的目录中。

例如，如果`/Code/project-1`需要一个位于 中的包`/Code/package-1`，我：

1.  提交`package-1`到 GitHub（甚至可以是私有的）。
2.  然后我告诉`project-1`使用自定义存储库安装它（有关存储库配置的链接，请参阅其他答案）。
3.  安装后，我符号链接`/Code/project-1/vendor/developer/package-1`到`/Code/package-1`.

这样，当我在 中进行更改时`/Code/package-1`，它会立即反映在`/Code/project-1`.

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2016-03-15T14:04:46.273

这就是我在本地创建和开发新 Composer 包的流程：

1.  在 GitHub 上为包创建一个新的存储库（只是一个示例）
2.  将其添加到 Composer 的数据库 (packagist.org)
3.  通过 composer require 将其添加到您的主项目中。这是您开始想知道如何快速应用修补程序的地方
4.  将它克隆到本地机器上的某个地方，这是你开发它的地方
5.  现在要测试您的本地版本，添加一个 php require() 语句，您可以在其中加载有问题的类文件。自动加载器不会加载通过作曲家下载的，而是您本地的。
6.  完成修补程序后，删除/注释掉 require 语句以恢复使用包的 composer 版本。
7.  提交所有更改，标记提交并推送到 GitHub；hook 触发更新 Composer。在你的主项目上运行 composer update，包会更新到你的本地版本。

这仍然不理想，但它可以完成中小型封装的工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-17T14:33:26.660

我的工作流程没有完全回答 OP 的问题，但可能对其他人有帮助。

1.  我喜欢在现实世界的项目中开发一个可重用的包/库，我不想在本地通过 git/composer。
2.  与生产相比，我也不喜欢在本地以不同的方式加载包（例如，通过本地要求语句或本地作曲家设置）。

所以我做的很简单：我直接在供应商目录下添加包，直接或使用符号链接。

### 缺点

1.  使用 composer update / install 时，您的包可能会被覆盖。（因此我倾向于在此期间一一更新或添加依赖项）。
2.  如果不小心，生产环境上的 composer install 可能会安装不同的版本。所以继续推送你的包和版本标签！！
3.  通过 composer update 更改包的依赖项并将其加载到父项目中，覆盖包的文件夹

# php - 为什么我的 PHP 脚本没有在网站上运行

> ID：14295564
> 
> 赞同：-2
> 
> 时间：2013-01-12T16:54:58.457
> 
> 标签：php, web, filezilla

我是 C++ 开发者和网络新手。我购买了网络空间和 DNS，当我尝试上传 HTML 更改时，它们会反映在我的网站上，但是当我修改任何 PHP 脚本并上传文件时，没有任何更改得到更新。我正在使用 FileZilla 进行 FTP。我需要遵循一些目录结构吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:16:08.663

如果服务器支持 PHP，那么您应该能够将 .php 文件放置在任何可以放置 .html 文件的地方，并且它会解析它们。

*   确保您的服务器上有 PHP 支持
*   确保将文件放置在您放置普通 html 文件的位置
*   确保文件具有您的服务器设置使用的扩展名（默认为 .php）
*   确保文件中的 PHP 包含在`<?php`和`?>`

# c++ - iOS应用程序中的C++算法

> ID：14295565
> 
> 赞同：1
> 
> 时间：2013-01-12T16:55:06.117
> 
> 标签：c++, objective-c, algorithm, ios5

我有一个 C# 中的 DSP 音频 aglo，我想将它整合到 iOS 中。一位朋友建议我转换为 C++ 而不是 Objective-C，因为它与平台无关。这是一个好习惯，有什么需要注意的陷阱吗？我的直觉是让它与 Obj-C 保持原生。如何在 iOS 中访问 C++ 函数？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T17:18:22.490

您可以自由地将 C++ 与 Objective-C 混合使用，它被称为“Objective-C++”。要让编译器知道这是您的意图，您需要将`.m`文件重命名为`.mm`.

混合这样的代码不一定是一个好主意，如果你的目标是可移植性，那也毫无意义。更好的做法是将 C++ 保存在单独的`.cpp`文件中，并创建一个简单的包装类 (obj-c++) 在您的目标 C 和 C++ 对象之间传递数据（实际上，包装是调解 obj-C 方法和 C++ 函数以发送和返回数据）。

我最近在 github- [openCVSquares](https://github.com/foundry/OpenCVSquares)和[openCVStitch](https://github.com/foundry/OpenCVStitch)上发布了几个简单的图像处理示例。值得你看一看，看看 C++ 代码是如何从 obj-C 中分离出来的。

openCV 库具有 C++ 接口，因此在项目中使用 C++ 是不可避免的。可以*将*所有代码混合到 .mm 文件中，但这是一种容易造成混乱的方法。

至于可移植性，您可以通过将 UI 代码与数据操作代码分开来实现这一点。无论如何，您都应该为 MVC 执行此操作，因此按照这些示例用 C++ 编写模型将是很少的额外工作。该*模型*是可移植的，*UI*是并且应该是特定于平台的。

*您*是否应该这样做将取决于其他因素，例如您对每种语言的流利程度、框架和库的选择以及移植的可能性。不过，音频处理将是这种方法的自然候选者。

*关于示例的一些细节*
如果你不能让代码运行不要担心（openCV 框架可能很麻烦......）主要是看代码是如何拼凑在一起的。我试图使示例保持非常简单。

C++ 代码移植自 openCV 发行版中包含的 C++ 示例：[squares.cpp](https://github.com/Itseez/opencv/blob/master/samples/cpp/squares.cpp)和[stitching.cpp](https://github.com/Itseez/opencv/blob/master/samples/cpp/stitching.cpp)。我试图尽可能少地改变这些以评估这种可移植性的想法。

粗略地说，我必须解决两个问题...
1/ 删除任何 UI 代码（所以我们只是将数据发送回 obj-C 端）。
2/ 修改 main() 函数，使其成为 obj-C 端的可调用函数。在 .cpp 头文件中，我声明了一个带有单个静态函数的简单类来促进这一点。显然还有更详细的空间，但这应该足以让您了解这个想法。

# android - 如何在 Android 上收听新的聊天消息？

> ID：14295566
> 
> 赞同：2
> 
> 时间：2013-01-12T16:55:16.223
> 
> 标签：android, multithreading, background, task, aidl

我正在为 android 编写一个小型聊天客户端。所以我想要的行为是，我的应用程序正在后台监听新消息并将它们显示在通知区域（只有我的应用程序的图标）。收听传入的消息应该是一件非常长期的事情 - 可能在关闭 ui 线程后的几天内

我的问题是：怎么做？我应该有自己的流程服务吗？我应该为监听器启动一个 AsyncTask 吗？还是有更好的方法来做到这一点？如果我使用新的服务流程，是否需要使用 AIDL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:53:46.777

> 怎么做？

让您的聊天服务器[使用 GCM](http://developer.android.com/google/gcm/index.html)将聊天消息推送到设备。

> 我应该有自己的流程服务吗？

不。

首先，它不需要在自己的过程中。

其次，这将要求您始终保持服务运行，这是许多用户不喜欢的。

第三，这将要求您始终保持设备处于开机状态，并且 WiFi 无线电始终处于开机状态，用户不会对此感到满意。例外情况：如果您在支持移动数据的设备（例如，电话）上运行，并且您非常小心，您可以在设备处于睡眠状态时保持与服务器的开放套接字连接。这很难正常工作。

> 我应该为监听器启动一个 AsyncTask 吗？

可能不是。

> 还是有更好的方法来做到这一点？

让您的聊天服务器[使用 GCM](http://developer.android.com/google/gcm/index.html)将聊天消息推送到设备。

或者，可能，将您的聊天服务器更改为在排队模型上工作，以便您可以定期轮询（在用户可配置的时间间隔内）以获取可用消息。

> 如果我使用新的服务流程，是否需要使用 AIDL？

不。

# c++ - 为什么控制台动画在 Windows 上这么慢？（有没有办法提高速度？）

> ID：14295570
> 
> 赞同：3
> 
> 时间：2013-01-12T16:55:29.457
> 
> 标签：c++, windows, winapi, console, console-application

好吧，我很无聊，所以想在控制台窗口中制作动画。

现在，当我设置第一个位时，我注意到它非常慢，整个屏幕填充字符大约需要 333 毫秒。

我想知道是否有办法至少获得〜20 fps？

这是我的代码：

```
#include <stdio.h>
#include <tchar.h>
#include <Windows.h>
#include <iostream>
#include <array>

#define WIDTH (100)
#define HEIGHT (35)

bool SetWindow(int Width, int Height) { 
    _COORD coord; 
    coord.X = Width; coord.Y = Height; 

    _SMALL_RECT Rect; 
    Rect.Left = 0;              Rect.Top = 0;  
    Rect.Bottom = Height - 1;   Rect.Right = Width - 1; 

    HANDLE Handle = GetStdHandle(STD_OUTPUT_HANDLE); 
    if (Handle == NULL)return FALSE; 
    SetConsoleScreenBufferSize(Handle, coord);
    if(!SetConsoleWindowInfo(Handle, TRUE, &Rect)) return FALSE; 
    return TRUE; 
} 

std::array<std::array<unsigned char, WIDTH+1>, HEIGHT> Screen;//WIDTH+1 = prevent cout from undefined behaviour

void Putchars(unsigned char x){
    for(int row = 0; row < HEIGHT; ++row){
        std::fill(Screen[row].begin(),Screen[row].end(),x);
        Screen[row].at(WIDTH) = 0;//here = prevent cout from undefined behaviour
    }
}

void ShowFrame(DWORD delay = 0,bool fPutchars = false, unsigned char x = 0){
    if(fPutchars)Putchars(x);
    if(delay)Sleep(delay);
    system("CLS");
    for(int row = 0; row < HEIGHT; ++row)
        std::cout << Screen[row].data() << std::flush;
}

int _tmain(int argc, _TCHAR* argv[]){//sould execute @~63 fps, yet it executes @~3-4 fps
    if(SetWindow(100,HEIGHT)){
        for(unsigned char i = 219; i != 0; --i)
        ShowFrame(16,true, i);
    }
    return 0;
} 
```

编辑：在阅读了无数答案、提示和评论后，我终于解决了，谢谢你们，这是我最终的“基础”代码：

```
#include <stdio.h>
#include <tchar.h>
#include <Windows.h>
#include <iostream>
#include <array>

#define WIDTH (100)
#define HEIGHT (34)

HANDLE current;
HANDLE buffer;

bool SetWindow(int Width, int Height) { 
    _COORD coord; 
    coord.X = Width; coord.Y = Height; 

    _SMALL_RECT Rect; 
    Rect.Left = 0;              Rect.Top = 0;  
    Rect.Bottom = Height - 1;   Rect.Right = Width - 1; 

    HANDLE Handle = GetStdHandle(STD_OUTPUT_HANDLE); 
    if (Handle == NULL)return FALSE; 
    SetConsoleScreenBufferSize(Handle, coord);
    if(!SetConsoleWindowInfo(Handle, TRUE, &Rect)) return FALSE; 
    return TRUE; 
} 

std::array<std::array<CHAR, WIDTH+1>, HEIGHT> Screen;//WIDTH+1 = prevent cout from undefined behaviour

void Putchars(CHAR x){
    for(int row = 0; row < HEIGHT; ++row){
        std::fill(Screen[row].begin(),Screen[row].end(),x);
        Screen[row].at(WIDTH) = 0;//here = prevent cout from undefined behaviour
    }
}

void ShowFrame(DWORD delay = 0, bool fPutchars = false, CHAR x = 0){
    if(fPutchars)Putchars(x);
    if(delay)Sleep(delay);
    //system("CLS");
    _COORD coord;
    coord.X = 0;
    for(int row = 0; row < HEIGHT; ++row)
    {
        coord.Y = row;
        FillConsoleOutputCharacterA(buffer,Screen[row].data()[0],100,coord,NULL);
    }
}

int _tmain(int argc, _TCHAR* argv[]){//sould execute @~63 fps, yet it executes @~3-4 fps
    SetWindow(WIDTH, HEIGHT);
    current = GetStdHandle (STD_OUTPUT_HANDLE);
    buffer = CreateConsoleScreenBuffer (
        GENERIC_WRITE,
        0,
        NULL,
        CONSOLE_TEXTMODE_BUFFER,
        NULL
    );
    SetConsoleActiveScreenBuffer (buffer);

    if(SetWindow(WIDTH,HEIGHT)){
        for(CHAR i = 219; i != 0; --i)
        ShowFrame(250,true, i);
    }
    CloseHandle (buffer); //clean up
    return 0;
} 
```

它似乎工作得非常快:)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T17:30:44.203

只需看一眼您的代码，您就会每帧生成一个单独的程序（“CLS”）。这*本身*就非常缓慢。

与一些评论相反，Windows 控制台即使使用得非常接近正确也至少能够达到*相当合理的速度（例如：您可以比任何显示器显示数据的速度更快地更新控制台）。*

仅供参考，这是为 Windows 控制台编写的 John Conway 的 Game of Life 版本。出于计时目的，它只是生成一个随机启动屏幕并运行 2000 代，然后停止。在我的机器上，它在大约 2 秒内完成 2000 代，或每秒大约 1000 帧（没用，因为典型的监视器只能在 60-120 Hz 左右更新）。在带有全屏控制台的 32 位 Windows 下，它大约可以翻倍（同样，至少在我的机器上）。我很确定只要做一点工作，这可能会加快一些速度，但我从来没有看到任何打扰的理由。

```
#define WIN32_LEAN_AND_MEAN
#include <windows.h>
#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <conio.h>
#include <io.h>

#define     ROWS        50
#define     COLS        80

// The total number of generations is really double this number.
int generations = 1000;

int civ1[ROWS+2][COLS+2], civ2[ROWS+2][COLS+2];

CHAR_INFO disp[ROWS][COLS];
HANDLE console;
COORD size = { COLS, ROWS };
COORD src = { 0, 0};
SMALL_RECT  dest = { 0, 0, COLS, ROWS };

void ClrScrn(char attrib) {
    COORD pos = { 0, 0};
    DWORD written;
    unsigned size;

    size = ROWS * COLS;

    FillConsoleOutputCharacter(console, ' ', size, pos, &written);
    FillConsoleOutputAttribute(console, attrib, size, pos, &written);
    SetConsoleCursorPosition(console, pos);
}

void fill_edges(int civ1[ROWS+2][COLS+2]) {
    int i, j;

    for (i=1; i<=ROWS; ++i) {
        civ1[i][0] = civ1[i][COLS];
        civ1[i][COLS+1] = civ1[i][1];
    }
    for (j=1; j<=COLS; ++j) {
        civ1[0][j] = civ1[ROWS][j];
        civ1[ROWS+1][j] = civ1[1][j];
    }
    civ1[0][0] = civ1[ROWS][COLS];
    civ1[ROWS+1][COLS+1] = civ1[1][1];
    civ1[0][COLS+1] = civ1[ROWS][1];
    civ1[ROWS+1][0] = civ1[1][COLS];
}

void update_generation(int old_gen[ROWS+2][COLS+2], 
                       int new_gen[ROWS+2][COLS+2])
{
    int i, j, count;

    for (i = 1; i <= ROWS; ++i)
    {
        for (j = 1; j <= COLS; ++j)
        {
            count = old_gen[i - 1][j - 1] +
                old_gen[i - 1][j] +
                old_gen[i - 1][j + 1] +
                old_gen[i][j - 1] +
                old_gen[i][j + 1] +
                old_gen[i + 1][j - 1] +
                old_gen[i + 1][j] +
                old_gen[i + 1][j + 1];

            switch(count) 
            {
            case 2:
                new_gen[i][j] = old_gen[i][j];
                break;

            case 3:
                new_gen[i][j] = 1;
                disp[i-1][j-1].Char.AsciiChar = '*';
                break;
            default:
                new_gen[i][j] = 0;
                disp[i-1][j-1].Char.AsciiChar = ' ';
                break;
            }
        }
    }
    WriteConsoleOutput(console, (CHAR_INFO *)disp, size, src, &dest);
    fill_edges(new_gen);
}

void initialize(void)
{
    int i, j;

    ClrScrn(0x71);
    srand(((unsigned int)time(NULL))|1);

    for (i = 1; i <= ROWS; ++i)
    {
        for (j = 1; j <= COLS; ++j)
        {
            civ1[i][j] = (int)(((__int64)rand()*2)/RAND_MAX);
            disp[i-1][j-1].Char.AsciiChar = civ1[i][j] ? '*' : ' ';
            disp[i-1][j-1].Attributes = 0x71;
        }
    }
    WriteConsoleOutput(console, (CHAR_INFO *)disp, size, src, &dest);
    fill_edges(civ1);
}

int main(int argc, char **argv) {

    int i;

    if ( argc != 1)
        generations = atoi(argv[1]);

    console = GetStdHandle(STD_OUTPUT_HANDLE);
    initialize();
    for (i = 0; i <generations; ++i)
    {
        update_generation(civ1, civ2);
        update_generation(civ2, civ1);
    }
    return EXIT_SUCCESS;
} 
```

如果没有别的，这有一个`ClrScrn`你可能会觉得很方便的功能。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-12T17:16:25.063

不要使用 cout 写入控制台。请改用控制台 API 中的 WriteConsole。你可以像在普通图形动画中一样使用双缓冲，使用 SetConsoleActiveScreenBuffer。 [http://msdn.microsoft.com/en-us/library/windows/desktop/ms682073.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682073.aspx)

也不要使用 system ("cls") 来清屏，FillConsoleOutputCharacter 会快很多。

# android - Android 模拟器没有为 hello word 启动

> ID：14295572
> 
> 赞同：1
> 
> 时间：2013-01-12T16:55:36.280
> 
> 标签：android, macos, android-emulator, adt

我刚开始学习android编程。我下载了 ADT 并浏览了 hello world 的手册！项目。但是当我想运行我的项目时，我在控制台中看到了这个：

```
[2013-01-12 19:34:20 - HelloWorld] ------------------------------
[2013-01-12 19:34:20 - HelloWorld] Android Launch!
[2013-01-12 19:34:20 - HelloWorld] adb is running normally.
[2013-01-12 19:34:20 - HelloWorld] Performing com.example.helloworld.MainActivity activity     launch
[2013-01-12 19:34:20 - HelloWorld] Automatic Target Mode: Preferred AVD 'Nexus7' is not     available. Launching new emulator.
[2013-01-12 19:34:20 - HelloWorld] Launching a new emulator with Virtual Device 'Nexus7'
[2013-01-12 19:34:20 - Emulator] emulator: ERROR: No initial system image for this configuration! 
```

我正在使用 MAC OSX

告诉我是否需要更多信息！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:06:51.893

在安装的 SDK 中，您的 PC 似乎缺少启动 AVD 所需的系统映像。

转到 SDK 管理器并检查组件是否已正确下载。

有关更多详细信息，请查看[此处](http://code.google.com/p/android/issues/detail?id=40824)。

# mysql - 如何删除mysql表中的会话定时用户

> ID：14295579
> 
> 赞同：0
> 
> 时间：2013-01-12T16:56:19.317
> 
> 标签：mysql

我在 mqsql 数据库中有这个表

```
create table datedemo(logintime timestamp,updatedtime timestamp); 
```

updatedtime 给出了用户最后一次活动的时间，我想执行一个查询

这样如果 updatedtime 和 now() 时间之间的差异大于某个值，例如（1000 秒）

下面的查询给出了时间戳的差异，但我想删除行，请帮忙

```
SELECT NOW(), updatedtime, NOW() - updatedtime AS diff
FROM datedemo
HAVING diff IS NOT NULL; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:22:25.273

请试试这个：

```
SELECT NOW(), updatedtime
FROM datedemo
WHERE updatedtime > NOW() - INTERVAL 1000 Second
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:30:18.003

```
DELETE FROM datedemo WHERE TIMESTAMPDIFF(SECOND, NOW(), updatedtime) > 1000 
```

但是，我认为存储过期时间而不是更新时间会更好。我的意思是在更新时您插入的不是时间戳，而是 TIMESTAMPADD(SECOND, 1000, NOW()) 。这样，您只需进行一次数学运算，然后在检查您的问题时：

```
DELETE FROM datedemo WHERE expirestime < NOW() 
```

我认为这样会更有效率。

# haskell - 为什么是 getArgs 和 getProgName IO 操作？

> ID：14295582
> 
> 赞同：21
> 
> 时间：2013-01-12T16:56:29.297
> 
> 标签：haskell, io, command-line-arguments, referential-transparency

我是一个完整的新手，目前正在尝试通过“ [Learn You a Haskell for Great Good](http://learnyouahaskell.com/) ”来学习 Haskell。我已经到[了解释如何使用命令行参数的部分](http://learnyouahaskell.com/input-and-output#command-line-arguments)，有些东西让我很烦。

根据我的理解（以及[haskell.org 的定义](http://www.haskell.org/haskellwiki/Introduction_to_Haskell_IO/Actions)），操作旨在封装副作用。命令行参数是程序给定实例的不可变输入，那么拥有`getProgName :: IO String`而不是有什么意义`getProgName :: String`呢？换一种说法：阻止纯函数调用有什么意义`getProgName`？

**更新**

到目前为止，我对这个问题有一些很好的答案。我接受[Don Stewart 的](https://stackoverflow.com/a/14296155/451980)文章是最简单和简洁的，但[Conal 的](https://stackoverflow.com/a/14296888/451980)（及其相关的[博客文章](http://conal.net/blog/posts/is-haskell-a-purely-functional-language/)）绝对值得一读。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-12T17:51:32.387

首先，`getArgs`可以在运行时更改。见[`withArgs`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/System-Environment.html#v:withArgs)。

其次，`getArgs`属于`getProgName`一类有趣的不纯计算——它们在程序运行期间被认为是常量，但是，它们在编译时不是可用的值，并且它们从一个程序运行到另一个程序运行时会发生变化。它们没有明确的外延。

参见例如较早的[讨论](http://www.haskell.org/pipermail/haskell/2005-October/016574.html)，其中讨论了 getArgs 和浮点计算。甚至可以认为 minBound/maxBound 属于此类。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-01-12T19:03:24.653

要回答这些问题，您需要一个基础：表达式`e`具有类型是什么意思`t`？您可以为 之类的原语给出任意答案`getProgName`，但您不必这样做。相反，请查看表达式和类型的*含义*。当由 表示的值（即作为数学值的含义）属于由 表示的集合时，就说表达式`e`具有类型。`t``e``e``t`

现在考虑`t == String`。我们想要`String`拥有什么意义？同样，这里有很多选择空间。然而，用最简单的数学定义选择有用的候选人有很多优点。在 Haskell`String == [Char]`中，我们真正讨论的是`[]`和的含义。`Char` 我所知道的最引人注目的简单候选词是`[]`表示列表（序列）和`Char`表示字符，因此表示字符`String`序列，即“字符串”。

选择`String`意味着字符串，现在我们可以询问是否有可能`getProgName :: String`. 如果是这样，那么 的含义`getProgName`必须是一个字符序列。但是，没有*单一*的字符序列可以捕捉到`getProgName`. （*编辑*：据推测，`getProgName`当它出现在不同名称的程序中时，您希望产生不同的字符串。）因此，我们必须选择不同的类型，例如（但不一定）`IO String`，或者我们必须选择更复杂的含义`String`. 后一条路线起初可能看起来很吸引人，直到您考虑到深层含义。纯函数式（更准确地说是“外延”）编程支持实用、严谨的推理，这要归功于使用*简单的*含义，如序列，而不是复杂的含义，如来自某种环境的函数，包括操作系统、机器执行上下文。

有关密切相关的评论和讨论，请参阅博客文章[*Haskell 中的纯度概念*](http://conal.net/blog/posts/notions-of-purity-in-haskell/)。

*编辑：*我认为 Peter Landin（Haskell 的祖父）用他对“外延式编程”（或“真正的函数式编程”）的定义表达得最好，他建议将其作为“声明式”和“函数式”编程等模糊术语的实质性替代. 有关参考、引用和简短评论，请参阅[帖子](http://conal.net/blog/posts/is-haskell-a-purely-functional-language#comment-35882)Haskell[*是纯函数式语言吗？*](http://conal.net/blog/posts/is-haskell-a-purely-functional-language/).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-12T17:58:50.450

我的理解是纯函数是纯函数，因为您可以在“代码时”对它们进行推理，而编译器可以在编译时进行推理。IO 操作取决于运行时。`getArgs`，它只在程序运行时为程序提供参数，因此是一个 IO 操作。

正如Learn you a Haskell所说：

> 您可以将 I/O 操作想象成一个带有小脚的盒子，它会进入现实世界并在那里做一些事情（比如在墙上涂鸦）并可能带回一些数据。

我们不知道小脚的盒子在代码时或编译时会带来什么。

# wordpress - Reverie body_class 在 Chrome/Windows 上导致不需要的填充

> ID：14295585
> 
> 赞同：0
> 
> 时间：2013-01-12T16:56:33.817
> 
> 标签：wordpress, zurb-foundation

我一直在使用 Wordpress 的 Reverie 主题构建我的网站，并在包含的 Foundation 版本上安装了 Foundation 3.2，并且它在我的 Macbook（和 iphone）上的 Safari/Chrome 上运行良好，但是当我在 Windows 机器上尝试它时填充成为body标签的问题。

具体来说，php`body_class('hide-extras');`是导致问题的原因。它在 body 标签上创建了一个元素样式，`padding-top:45px;`并在顶栏导航和我的全宽标题之间创建了一个中断。尝试硬编码 a`!padding-top:0px;`不会产生任何结果。

如果我摆脱它，它会在每一页上产生问题，而且我找不到任何关于 Reverie / Foundation 的正文类的文档。

参见：[zephyrusdigital.com](http://zephyrusdigital.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T22:43:46.030

那是由foundation.topbar.js引起的

在第 45 行：

```
*Fixed padding-top on body* 
if (this.settings.$topbar.parent().hasClass('fixed')) {
   $('body').css('padding-top', this.outerHeight(this.settings.$topbar)); 
```

如果需要或解决它，您可以将其删除。

# javascript - 多个 JqueryFileUpload 实例和停止文档的文件删除

> ID：14295587
> 
> 赞同：1
> 
> 时间：2013-01-12T16:57:28.473
> 
> 标签：javascript, jquery, jquery-file-upload

我已经设置了一个页面，可以通过单击按钮添加 jQuery File Upload 插件的多个实例。我遇到的问题是，当您将文件拖到其中一个实例时，它会将它们添加到所有实例中。我已经添加了开发人员建议的代码来防止这种情况发生，但它似乎没有任何效果（虽然调用了该函数，但我将它记录到控制台。）

这是我正在处理的页面：http: [//bwobst.clients.thomporter.com/upload.html](http://bwobst.clients.thomporter.com/upload.html)

这是创建上传器的 JavaScript 文件：http: [//bwobst.clients.thomporter.com/upload.js](http://bwobst.clients.thomporter.com/upload.js)

或者，如果您愿意，CoffeeScript： [http ://bwobst.clients.thomporter.com/upload.coffee](http://bwobst.clients.thomporter.com/upload.coffee)

仅供参考，这是开发人员建议使用的代码：

```
$(document).bind('drop dragover', function(e) {
  e.preventDefault();
});

```

正如我所说，我尝试向它添加一个 console.log ，当我将文件拖到窗口时它确实被调用了，但`e.preventDefault()`似乎没有任何效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:19:03.277

[如文档](https://github.com/blueimp/jQuery-File-Upload/wiki/Options)中所述，您必须指定一个 dropZone，否则它是整个文档。你应该改变这一行：

```
$('#uploader' + uploaderCount).fileupload(); 
```

到

```
$('#uploader' + uploaderCount).fileupload({dropZone:$('#uploader' + uploaderCount)}); 
```

# c - 我可以在需要 int* 的地方传递一个 NULL 吗？

> ID：14295590
> 
> 赞同：1
> 
> 时间：2013-01-12T16:57:37.627
> 
> 标签：c, pointers, null, function-prototypes

我有一个具有以下原型的函数，`void init(int *argc,char**argv);`但是在我的程序中对该函数的后续调用中，我不需要甚至不需要提供这样的参数。所以我创建了一个名为`int_null`（哦，坏名字，我知道）的变量并传递给函数`init(&int_null, NULL)`，但我想到`NULL`标准值为零，我可以使用它代替`int_null`变量（只是为了避免创建这个变量），因为跟随`init(NULL,NULL)`它工作正常。但我能有什么问题吗？一些实现定义`NULL`为`(void*)0`或`0`或`0L`，我确定这是否可能是一个问题。该函数需要理解`argc`为零。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T17:02:30.420

```
char **bla1 = (void *) 0;
char **bla2 = 0;
char **bla3 = 0L; 
```

所有这些分配（根据分配完成初始化）在 C 和等效项中都是有效的。

`NULL`如果预期参数的类型为`int *`or ，则始终可以传递`char **`。

正如[@R..](https://stackoverflow.com/users/379897/r)在他的评论中添加的那样，最后一句话是正确的，但接受可变数量参数的函数和原型（旧式）语法中定义的函数除外。在这两种情况下都需要演员表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T17:00:38.567

`NULL`应该管用; 两者`0`都`(void *)0`可以分配给 C 中的任何指针类型。

# php - 从键中删除数组值到末尾

> ID：14295591
> 
> 赞同：1
> 
> 时间：2013-01-12T16:57:39.573
> 
> 标签：php, arrays, loops, filtering

我有数组：

```
$array=array('red'=>12,'blue'=>14,'violet'=>88,'green'=>58); 
```

现在我想删除从键“紫罗兰色”开始的数组的所有值。所以我可以得到一个相当于：

```
$array=array('red'=>12,'blue'=>14); 
```

如何在不循环所有数组的情况下实现这个目标？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T17:02:20.373

[数组切片（ ）](http://php.net/manual/en/function.array-slice.php)，[数组搜索（](http://php.net/manual/en/function.array-search.php) ） ，数组键（ [）](http://php.net/manual/en/function.array-keys.php)

```
$array=array('red'=>12,'blue'=>14,'violet'=>88,'green'=>58);

$new_array = array_slice($array,0,array_search("violet",array_keys($array)));

print_r($new_array); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:06:28.223

也许这有帮助：

```
array_slice($array,0,array_search("violet",array_keys($array))); 
```

# java - 如何使字母等于Java中的索引号？

> ID：14295592
> 
> 赞同：-1
> 
> 时间：2013-01-12T16:57:40.080
> 
> 标签：java

我正在尝试将输入的字母变成数字。

例如，“A”需要等于 0，“B”需要等于 1，“C”需要等于 2，等等。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T17:00:59.213

请按照以下思路思考：

如果你减去`'A'`，`'A'`你得到`0`。如果你减去`'A'`，`'B'`你得到`1`。如果你减去`'A'`，`'C'`你得到`2`。等等。

它给你任何模式吗？您可以使用此模式创建公式。

**自己试试。发现一个公式！**

由于这似乎是家庭作业，我不会给你完整的答案。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:01:43.340

```
 String letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

    char input = 'e';

     int indexVal = letters.indexOf(Character.toUpperCase(input)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T17:04:04.507

您可以将您`char`转换为`int`, 并减去 的值`(int) 'A'`。像这样 ：

```
char z = 'Z'
int number = (int) z - (int) 'A'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T17:04:15.137

所有字符都有一个 int 值，它们的 ASCII 值。您可以将 char 转换为 int 以获取该值（并将 int 转换为 char 以反转它）。

扩展我的评论，你可以这样做。

```
int aAsciiValue = (int)'a';
char input = however you get your input;
int result = (int)input - aAsciiValue; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T17:04:38.077

可以使用[HashMap](http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html)。在它预先准备好字符之间的“关联” - 它的索引

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-12T17:10:30.000

```
public int letterToNumber(String letter) {
int letterNumber = letter.toLowerCase().toCharArray()[0] - 'a' + 1;
if (letterNumber < 1 || letterNumber > 26) {
    return 0;// Not a letter from a-z
}
return letterNumber;
} 
```

# opencv - opencv - 从图像中删除所有黄色

> ID：14295594
> 
> 赞同：1
> 
> 时间：2013-01-12T16:57:52.117
> 
> 标签：opencv

我正在尝试使用 cvInRangeS 从图像中删除某种颜色。我已经完成了本[教程](http://www.aishack.in/2010/07/tracking-colored-objects-in-opencv/)，但是我返回的掩码似乎只包含 0 个值。这是我的代码的副本：

```
-(IplImage*)removeBackgroundLinear:(IplImage*) inImg{
    IplImage *imgHSV =cvCreateImage(cvGetSize(inImg), 8, 3);
    cvCvtColor(inImg, imgHSV, CV_BGR2HSV);

    IplImage* mask = cvCreateImage(cvGetSize(inImg), 8, 1);
    cvZero(mask);

    cvInRangeS(imgHSV, cvScalar(20, 100, 100), cvScalar(30, 255, 255), mask);
    cvReleaseImage(&imgHSV);
    return mask;
} 
```

这可能是什么原因造成的？当然，我正在针对内部带有黄色对象的图像尝试我的代码。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:44:29.657

尝试改变黄色范围

尝试这个 ：

`cvScalar(25, 80, 80,80), cvScalar(34, 255, 255,255)`

你可以使用任何程序来获得你需要的颜色`colorpicker.exe`

# css - 在 SASS 中通过引用传递函数或 mixin

> ID：14295595
> 
> 赞同：3
> 
> 时间：2013-01-12T16:57:54.977
> 
> 标签：css, sass

有没有办法通过引用SASS中的另一个函数或mixin来传递一个函数或一个mixin，然后调用引用的函数或mixin？

例如：

```
@function foo($value) {
    @return $value;
}

@mixin bob($fn: null) {
    a {
        b: $fn(c); // is there a way to call a referenced function here?
    }
}

@include bob(foo); // is there any way I can pass the function "foo" here? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T19:30:07.290

函数和 mixin 在 Sass 中不是*一流*的，这意味着您不能像使用变量一样将它们作为参数传递。

# Sass 3.2 及以上版本

你能得到的最接近的是`@content`指令（Sass 3.2+）。

```
@mixin foo {
    a {
        @content;
    }
}

@include bob {
    b: foo(c); // this replaces `@content` in the foo mixin
} 
```

唯一需要注意的是，`@content`无法看到你的 mixin 里面有什么。换句话说，如果`c`只在`bob`mixin 内部定义，它本质上是不存在的，因为它没有被考虑在范围内。

# Sass 3.3 及更新版本

从 3.3 开始，您可以使用该`call()`函数，但它只能用于函数，而不是 mixins。这需要传递包含函数名称的字符串作为第一个参数。

```
@function foo($value) {
    @return $value;
}

@mixin bob($fn: null) {
    a {
        b: call($fn, c);
    }
}

@include bob('foo'); 
```

# php - 仅通过使用 codeigniter 的链接访问功能

> ID：14295599
> 
> 赞同：0
> 
> 时间：2013-01-12T16:58:31.750
> 
> 标签：php, codeigniter, codeigniter-2

我有一个小系统，其中有一个链接可以激活或停用用户..

所以我有列出用户的功能

```
function users()
{
//the code
} 
```

并且有一个函数采用第三个 uri 段，即 id 并将用户设置为激活或停用。

```
function action_settings()
{
// the code
} 
```

我想确保仅通过函数用户访问 action_settings，并且不允许任何用户直接访问该函数。

所以链接

```
localhost/motivators/action_settings/25 
```

必须只能通过以下链接访问

```
localhost/motivators/users/ 
```

是否可以在 Codeigniter 中实施此限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:09:32.790

您可以做的是`uri->uri_string`为您的函数（方法）提供作为参数`action_string`并解析它以检查它是否包含`motivators/users/`或`users`然后继续`action_string`处理。否则，不要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T17:15:07.013

尝试内部函数 action_settings()：

```
function action_settings(){

 if($_SERVER['HTTP_REFERER'] != 'http://localhost/motivators/users'){
  //wrong referer
  exit();
 }

 //activate user
} 
```

它也可能是：

```
function action_settings(){

 if($_SERVER['HTTP_REFERER'] != base_url() . 'motivators/users'){
  //wrong referer
  exit();
 }

 //activate user
} 
```

# java - Excel 文件操作

> ID：14295603
> 
> 赞同：-3
> 
> 时间：2013-01-12T16:59:27.297
> 
> 标签：java, jexcelapi

如何使用 JExcel API 将颜色格式添加到 excel 单元格。我有一个现有的 excel 文件并想要如何将颜色格式添加到所需的单元格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:45:05.227

请参阅我的[答案](https://stackoverflow.com/questions/14290238/excel-file-handling-using-java/14290357#14290357)。`modifying the excel cells using JExcel API`该答案仅供您使用:)

* * *

要向 Excel 单元格添加颜色格式，请尝试以下代码。

```
// Create cell font and format
private static WritableCellFormat getCellFormat(Colour colour, Pattern pattern) throws WriteException {
    WritableFont cellFont = new WritableFont(WritableFont.TIMES, 16);
    WritableCellFormat cellFormat = new WritableCellFormat(cellFont);
    cellFormat.setBackground(colour, pattern);
    return cellFormat;
} 
```

* * *

```
// Create the label, specifying content and format
Label label = new Label(1, 2, "ABC", getCellFormat(Colour.GREEN, Pattern.GRAY_25));
Label label2 = new Label(1, 4, "PQR", getCellFormat(Colour.BLUE, Pattern.GRAY_50));
Label label3 = new Label(1, 6, "XYZ", getCellFormat(Colour.ORANGE, Pattern.GRAY_75));

sheet.addCell(label);
sheet.addCell(label2);
sheet.addCell(label3); 
```

`sheet`上面的链接中已经提供了获取..

# graph - 将节点分组添加到 D3 力有向图

> ID：14295605
> 
> 赞同：1
> 
> 时间：2013-01-12T16:59:49.627
> 
> 标签：graph, d3.js, force-layout

我正在尝试实现与[此类](http://bl.ocks.org/4062045)似的强制定向网络。但是，我的每个节点都分配了一个组值，例如

```
Node    Group
node1   1
node2   1
node3   2
node4   3
node5   3 
```

我希望网络增长，即在一段时间后（比如 2 秒），随后的节点组将添加它们的链接。

这是可以实现的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:14:33.473

是的。诀窍是将绘制图形的部分封装在函数中。在适当的时间间隔之后将特定组添加到`graph`数据结构并调用该函数。代码大致如下所示。

```
function update(graph) {
    var link = svg.selectAll("line.link")
         .data(graph.links)
         .enter().append("line");

    var node = svg.selectAll("circle.node")
         .data(graph.nodes)
         .enter().append("circle")
         .call(force.drag);

    node.append("title")
         .text(function(d) { return d.name; });

    force.start();
} 
```

您应该能够基本上按原样重用其他所有内容。

# php - 每行只显示一个值

> ID：14295606
> 
> 赞同：2
> 
> 时间：2013-01-12T16:59:57.563
> 
> 标签：php

我在这里有一个 phpfiddle：http: [//phpfiddle.org/main/code/get-rps](http://phpfiddle.org/main/code/get-rps)

我遇到的问题是，在该`Total Marks`列中，它仅显示所有问题的所有行中最后一个问题的总分，而不是遍历所有总分并显示每个问题的正确总分。我在代码中做错了什么？

下面是代码：

```
<?php
$incorrect_ans = array(
                   array('A','C','D'),
                   array('B','C','D'),
                   array('A','B','D'),
                   array('A','B','C'));

$searchQuestionNo = array(
                   1,
                   2,
                   2,
                   3);

$totalMarks = array(
                   3,
                   5,
                   5,
                   2);

$ques_ans = array();    //to store incorrect answers against ques no.

$q_occ_count = array_count_values($searchQuestionNo);
foreach($searchQuestionNo as $key => $questionNo)
{
    if ( ! array_key_exists($questionNo, $ques_ans))
    {
        if($q_occ_count[$questionNo] === 1) //if a ques has only one correct ans
        {
            $ques_ans[$questionNo] = $incorrect_ans[$key];  //store the array of incorrect ans against the ques no as key 
        }
        else //if a ques has more than 1 correct ans
        {
            //find the intersection of incorrect_ans arrays for this ques
            $q_keys = array_keys($searchQuestionNo, $questionNo);
            $q_incorrect_ans = $incorrect_ans[$q_keys[0]];
            foreach($q_keys as $q_key) {
                $q_incorrect_ans = array_values(array_intersect($q_incorrect_ans, $incorrect_ans[$q_key]));
            }       
            $ques_ans[$questionNo] = $q_incorrect_ans;  //store the array of incorrect ans against the ques no as key
        }
    }
}
?>
<table border='1' id='penaltytbl'>
<thead>
<tr>
<th class='questionnoth'>Question No.</th>
<th class='answerth'>Incorrect Answer</th>
<th class='marksth'>Total Marks</th>
</tr>
</thead>
<tbody>
<?php

foreach($ques_ans as $questionNo => $inc_ans)
{
    $q_row_span = count($inc_ans);
    $row_count = 0;
    ?>
    <tr class="questiontd">

        <!-- Question No -->
        <td class="questionnumtd q<?php echo $questionNo?>_qnum" rowspan="<?php echo $q_row_span ?>">
                <?php echo $questionNo?><input type="hidden" name="numQuestion" value="<?php echo $questionNo?>" />
        </td>

        <!-- first incorrect ans -->
        <td class="answertd"><?php echo $inc_ans[$row_count]; ?></td>

        <!-- Marks -->
       <td class="totalmarkstd" rowspan="<?php echo$q_row_span?>"><?php echo$totalMarks[$key]?></td>
    </tr>
    <?php
        //remaining incorrect answers in separate row (if any) follows here
    if($row_count < $q_row_span - 1) 
    {
        for($i=($row_count + 1); $i<$q_row_span; $i++) { ?>     
            <tr><td class="answertd"><?php echo $inc_ans[$i]; ?></td></tr>
    <?php
        }
    }
}
?>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:12:13.823

这条线是你的问题。

`<?php echo$totalMarks[$key]?>`

$key 是从上面的循环中设置的，并且永远不会在底部循环中重置，因此它仍然具有该循环中的最后一个值。我假设它应该是`<?php echo$totalMarks[$questionNo]?>`

# plone - 一个 Plone 文件夹中可以存储多少个对象？

> ID：14295613
> 
> 赞同：1
> 
> 时间：2013-01-12T17:01:26.417
> 
> 标签：plone

例如，我可以将 100.000.000 个文档放在一个 plone 文件夹中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T17:06:54.393

在最近的 Plone 版本中，文件夹使用 BTree 支持的存储，因此您可以在其中存储任意数量的对象。

我可以在生产环境中访问的最大文件夹目前存储 25k 项。

当然，您需要在一个位置适当地处理大量物品。关于网站中真正大量内容的常见警告适用。

# android - 根据 ImageSwitcher 进度更新 Progressbar

> ID：14295615
> 
> 赞同：0
> 
> 时间：2013-01-12T17:01:40.913
> 
> 标签：android, android-progressbar, imageswitcher

我目前`ImageSwitcher`在我的应用程序中实现了一个，它可以在一组图片中滑动。现在我想`ProgressBar`在图片下方显示我们在集合中的哪个位置，以便用户了解还剩下多少图片。

这可能吗？我可以就如何实现这一点提供一些建议吗？

图片：

进展 [--|--------]

我的`ImageSwticher`：

```
package com.example.cfaslides;

import android.app.Activity;
 import android.os.Bundle;
 import android.view.View;
import android.view.View.OnTouchListener;
import android.view.ViewGroup;
import android.view.animation.Animation;
import android.view.animation.Animation.AnimationListener;
import android.view.animation.AnimationUtils;
import android.widget.ImageSwitcher;
import android.widget.ImageView;
import android.widget.ViewSwitcher.ViewFactory;
import android.util.Log;
import android.view.MotionEvent;
import android.widget.ProgressBar;
import android.widget.ViewSwitcher;
import android.widget.Gallery;
import android.widget.Gallery.LayoutParams;
import android.widget.AdapterView;
import android.widget.BaseAdapter;
import android.view.Window;
import android.content.Context;

public class l2_AltInvestActivity extends Activity implements ViewFactory {

ImageSwitcher imageSwitcher;

Integer[] imageList = {
R.drawable.av_01,
R.drawable.av_02,
R.drawable.av_03,
R.drawable.av_04,
R.drawable.av_05
};

int curIndex=0;
int maxIndex = 4; //# imageList -1
int downX, upX;

private Animation mIn1, mOut1, mIn2, mOut2;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.slider);
    final ProgressBar mProgressBar = (ProgressBar) findViewById(R.id.progressB);

mProgressBar.setProgress(0);
    mProgressBar.setMax(maxIndex);
    mProgressBar.setVisibility(View.VISIBLE);

     mIn1 =   AnimationUtils.loadAnimation(l2_AltInvestActivity.this,android.R.anim.slide_in_left);
     mOut1 = AnimationUtils.loadAnimation(l2_AltInvestActivity.this,android.R.anim.slide_out_right);
     mIn2 = AnimationUtils.loadAnimation(l2_AltInvestActivity.this,R.anim.slide_in_right);
     mOut2 = AnimationUtils.loadAnimation(l2_AltInvestActivity.this,R.anim.slide_out_left);

     AnimationListener mAnimListener = new AnimationListener() {
         public void onAnimationEnd(Animation animation) {
                // the in animation has ended so update the ProgressBar with the new 
                // progress
                mProgressBar.setProgress(curIndex); // I don't know your progress?!? 
            }   
         @Override
          public void onAnimationStart(Animation animation) {
           // TODO Auto-generated method stub

          }

          @Override
          public void onAnimationRepeat(Animation animation) {
           // TODO Auto-generated method stub

          }
             // rest of the callbacks
     };  
     //set this listener for the both of the in animations 
     mIn1.setAnimationListener(mAnimListener);  
     mIn2.setAnimationListener(mAnimListener);
     // rest of the onCreate method

    imageSwitcher = (ImageSwitcher) findViewById(R.id.switcher);
    imageSwitcher.setFactory(this);
    imageSwitcher.setInAnimation(AnimationUtils.loadAnimation(this,android.R.anim.fade_in));
    imageSwitcher.setOutAnimation(AnimationUtils.loadAnimation(this,android.R.anim.fade_out));
    imageSwitcher.setImageResource(imageList[curIndex]);
    imageSwitcher.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            if (event.getAction() == MotionEvent.ACTION_DOWN) {
                downX = (int) event.getX();
                Log.i("event.getX()", " downX " + downX);
                return true;
            }
            else if (event.getAction() == MotionEvent.ACTION_UP) {
                upX = (int) event.getX();
                Log.i("event.getX()", " upX " + downX); 

                if (upX - downX > 100) {
                    imageSwitcher.setInAnimation(AnimationUtils.loadAnimation(l2_AltInvestActivity.this,android.R.anim.slide_in_left));
                    imageSwitcher.setOutAnimation(AnimationUtils.loadAnimation(l2_AltInvestActivity.this,android.R.anim.slide_out_right));
                    //curIndex  current image index in array viewed by user
                    curIndex--;
                    if (curIndex < 0) {
                        curIndex = maxIndex; //maximum
                    }

                    //imageList :-image list array
                    imageSwitcher.setImageResource(imageList[curIndex]);
                    //GalleryActivity.this.setTitle(curIndex);
                }
                else if (downX -upX > -100) {
                    curIndex++;
                    if (curIndex > maxIndex) {
                        curIndex = 0;
                    }
                    imageSwitcher.setInAnimation(AnimationUtils.loadAnimation(l2_AltInvestActivity.this,R.anim.slide_in_right));
                    imageSwitcher.setOutAnimation(AnimationUtils.loadAnimation(l2_AltInvestActivity.this,R.anim.slide_out_left));
                    imageSwitcher.setImageResource(imageList[curIndex]);
                    //GalleryActivity.this.setTitle(curIndex);
                }
            return true;
            }
        return false;
        }
    });
} //END onCreate

@Override
public View makeView() {
    ImageView i = new ImageView(this);
    i.setScaleType(ImageView.ScaleType.FIT_CENTER);
    i.setLayoutParams(new ImageSwitcher.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));
    i.setBackgroundColor(0xFF000000);
    return i;   
} //END makeView

} // END Class 
```

滑块：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout
android:id="@+id/widget32"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
xmlns:android="http://schemas.android.com/apk/res/android">
<ProgressBar
    android:id="@+id/progressB"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

<ImageSwitcher android:id="@+id/switcher"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_alignParentTop="true"
android:layout_alignParentLeft="true"
>

</ImageSwitcher>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:39:15.720

> 现在我喜欢在图片下方有一个进度条，显示我们在集合中的哪个位置。以便有人感觉还剩下多少图片。

1.  `ProgressBar`在你的`R.layout.slider`布局文件中放置一个
2.  `Animations`将您用于`ImageSwitcher`'s 转换的四个不同字段设置为您的字段，`Activity`并`AnimationListener`为每个字段设置一个：

    ```
    //...
    private Animation mIn1, mOut1, mIn2, mOut2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.slider);
        final ProgressBar = (ProgressBar) findViewById(R.id.theIdOfTheProgressBar);
        mIn1 =   AnimationUtils.loadAnimation(l2_AltInvestActivity.this,android.R.anim.slide_in_left);
        mOut1 = AnimationUtils.loadAnimation(l2_AltInvestActivity.this,android.R.anim.slide_out_right);
        mIn2 = AnimationUtils.loadAnimation(l2_AltInvestActivity.this,R.anim.slide_in_right);
        mOut2 = AnimationUtils.loadAnimation(l2_AltInvestActivity.this,R.anim.slide_out_left);
        AnimationListener mAnimListener = new AnimationListener() {

        public void onAnimationEnd(Animation animation) {
            // the in animation has ended so update the ProgressBar with the new 
            // progress
            mProgressBar.setProgress(curIndex); // I don't know your progress?!? 
        }   
         // rest of the callbacks
        });  
        //set this listener for the both of the in animations 
        mIn1.setAnimationListener(mAnimListener);  
        mIn2.setAnimationListener(mAnimListener);
        // rest of the onCreate method 
    ```

3.  在`onTouch`方法中`ImageSwitcher`使用适当的动画更新（来自`mIn1`, `mOut1`, `mIn2`, `mOut2`）

# haskell - 是否可以通过 npm 在本地安装 Cabal 包？

> ID：14295622
> 
> 赞同：3
> 
> 时间：2013-01-12T17:02:20.580
> 
> 标签：haskell, dependency-management, cabal

在 npm 中，依赖项安装在`node_modules`相对于依赖包目录的目录中。每个包都将其依赖项存储在自身内部。

然而，对于 Cabal，安装包总是全局安装（即在 中`~/.cabal`），这是噩梦和眼泪的完美配方，因为不同版本的包会相互冲突，一切都会失败和出错。

我想*在本地*安装 Cabal 包，即在*我自己的包的子目录中*，而不是全局安装。这些包的所有依赖项都会做同样的事情。我的包的目录树示例如下所示：

```
my_package/
  dependencies/
    json/
      dependencies/
        foo/
          etc...
        bar/
          etc...
    mtl/
      etc...
  my_package.cabal
  src/
    Main.hs 
```

这可能吗，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T17:05:00.670

编辑：对于较新版本的 cabal，您应该使用[cabal sandboxes](http://coldwa.st/e/blog/2013-08-20-Cabal-sandbox.html)，现在是内置的，而不是 cabal-dev。

看看这个[`cabal-dev`](http://corp.galois.com/blog/2010/12/20/cabal-dev-sandboxed-development-builds-for-haskell.html)工具。它类似于`virtualenv`Python。

基本上，在您将使用命令的地方`cabal`，使用`cabal-dev`. 因此，要安装您正在处理的软件包，请转到该目录并执行`cabal-dev install`. 你也可以`ghc-pkg`通过`cabal-dev`，这样你就可以做类似的事情`cabal-dev ghc-pkg unregister foo-bar`。此外，您也可以从`GHCi`它开始：`cabal-dev ghci`.

默认情况下，`cabal-dev`将包安装到`cabal-dev`项目内的目录中——这就是您`dependencies`在示例中所称的。

# android - android：如何在没有OutOfMemory异常的情况下检查图像是否可以加载

> ID：14295628
> 
> 赞同：3
> 
> 时间：2013-01-12T17:02:57.490
> 
> 标签：android, memory-management

我一直在使用此答案中描述的方法： [https ://stackoverflow.com/a/6893818/457059](https://stackoverflow.com/a/6893818/457059)

这是进行检查的行：

```
if ((reqsize + allocNativeHeap + heapPad) >= Runtime.getRuntime().maxMemory()) 
```

不幸的是，有时我仍然会遇到 OutOfMemory Exceptions。所以我做了一些调试，发现在我的 Galaxy S3（冰淇淋三明治）上，应用程序当前使用的内存没有考虑到上述方法。

我的理论是，上面的答案仅针对 android 2.x 及更低版本，其中图像保存在本机堆中。

我将支票更改为以下内容：

```
public static boolean checkBitmapFitsInMemory(long bmpwidth,long bmpheight, int bmpdensity ){
    long required=bmpwidth*bmpheight*bmpdensity;
    long allocated = Runtime.getRuntime().totalMemory() + Debug.getNativeHeapAllocatedSize() + Tools.getHeapPad();

    if ((required + allocated) >= Runtime.getRuntime().maxMemory()) {
        return false;
    }

    return true;
} 
```

这在我的 S3 上效果更好，但我仍然不确定我是否做得正确。特别是那些事情我不清楚：

1.  为什么这个问题有一个stackoverflow的答案，虽然它不正确，但它被提高了8倍？
2.  我正在使用 Runtime.getRuntime().totalMemory() 来检索应用程序当前使用的内存，它在我的 S3 上运行良好，但是 totalMemory() 的 API 描述确实告诉我一些完全不同的东西：“返回总量正在运行的程序可用的内存。” 这是为什么？
3.  我的方法也适用于 Android 2.x 吗？

# sql - 选择联合查询中的列标题

> ID：14295630
> 
> 赞同：0
> 
> 时间：2013-01-12T17:03:18.810
> 
> 标签：sql, oracle

我必须像下面的例子一样选择查询：

```
Select name,
       SUM(DECODE(TO_CHAR(Datee,'MM'),'01',PRICE)) JAN_12,
       SUM(DECODE(TO_CHAR(Datee,'MM'),'02',PRICE)) FEB_12
 from price_list_LastYear

 UNION ALL

 Select name,
        SUM(DECODE(TO_CHAR(Datee,'MM'),'01',PRICE)) JAN_11,
        SUM(DECODE(TO_CHAR(Datee,'MM'),'02',PRICE)) FEB_11
  from price_list_TwoLastYear. 
```

当我执行查询时，在我的列标题中，我得到 name, `JAN_12`, `FEB_12`。我想结合我的结果，如：`JAN_11`姓名、、、、、。`JAN_12``FEB_11``FEB_12`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:10:50.263

试试这个：

```
SELECT P1.name,
       SUM(DECODE(TO_CHAR(P1.Datee,'MM'),'01',P1.PRICE)) JAN_12,
       SUM(DECODE(TO_CHAR(P1.Datee,'MM'),'02',P1.PRICE)) FEB_12,
       SUM(DECODE(TO_CHAR(P2.Datee,'MM'),'01',P2.PRICE)) JAN_11,
       SUM(DECODE(TO_CHAR(P2.Datee,'MM'),'02',P2.PRICE)) FEB_11
FROM price_list_LastYear P1
   JOIN price_list_TwoLastYear P2
     ON P1.nmae = P2.nmae
GROUP BY P1.nmae 
```

如果两个表中不存在相同的名称，请尝试以下操作：

```
SELECT N.name,
   SUM(DECODE(TO_CHAR(P1.Datee,'MM'),'01',P1.PRICE)) JAN_12,
   SUM(DECODE(TO_CHAR(P1.Datee,'MM'),'02',P1.PRICE)) FEB_12,
   SUM(DECODE(TO_CHAR(P2.Datee,'MM'),'01',P2.PRICE)) JAN_11,
   SUM(DECODE(TO_CHAR(P2.Datee,'MM'),'02',P2.PRICE)) FEB_11
FROM
(
    SELECT name FROM price_list_LastYear
    UNION 
    SELECT name FROM price_list_TwoLastYear
) N
LEFT JOIN price_list_LastYear P1
   ON N.nmae = P1.name
LEFT JOIN price_list_TwoLastYear P2
   ON N.nmae = P2.name
GROUP BY N.name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:07:44.127

试试这个

```
SELECT A.*, B,JAN_11, B.FEB_11 FROM (
Select name,
       SUM(DECODE(TO_CHAR(Datee,'MM'),'01',PRICE)) JAN_12,
       SUM(DECODE(TO_CHAR(Datee,'MM'),'02',PRICE)) FEB_12
 from price_list_LastYear
 Group By Name) A

 LEFT OUTER JOIN (

 Select name,
        SUM(DECODE(TO_CHAR(Datee,'MM'),'01',PRICE)) JAN_11,
        SUM(DECODE(TO_CHAR(Datee,'MM'),'02',PRICE)) FEB_11
  from price_list_TwoLastYear
  Group By Name) B ON A.name = B.Name 
```

或者

```
Select name,
SUM(CASE WHEN Yr = '11' THEN DECODE(Mnth,'01',PRICE) ELSE NULL END) JAN_11,
SUM(CASE WHEN Yr = '12' THEN DECODE(Mnth,'01',PRICE) ELSE NULL END) JAN_12,
SUM(CASE WHEN Yr = '11' THEN DECODE(Mnth,'02',PRICE) ELSE NULL END) FEB_11,
SUM(CASE WHEN Yr = '12' THEN DECODE(Mnth,'02',PRICE) ELSE NULL END) FEB_12
from 
(

 SELECT '12' As yr, name, TO_CHAR(Datee,'MM') Mnth, Price
 FROM price_list_LastYear
 UNION ALL
 SELECT '11' As yr, name, TO_CHAR(Datee,'MM') Mnth, Price
 FROM price_list_TwoLastYear
)
GROUP BY Name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T17:14:25.797

如果`name`两个表中都不存在 ，则可能难以使用`JOIN`. 因此，这是一个版本，使用`UNION ALL`然后应用带有`CASE`表达式的聚合函数将数据转换为列：

```
SELECT name,
  sum(case when Month = 'JAN_12' then price else 0 end) JAN_12,
  sum(case when Month = 'FEB_12' then price else 0 end) FEB_12,
  sum(case when Month = 'JAN_11' then price else 0 end) JAN_11,
  sum(case when Month = 'FEB_11' then price else 0 end) FEB_11
FROM
(
  Select name,
    PRICE,
    case 
      when TO_CHAR(Datee,'MM') = '01' Then 'JAN_12'
      when TO_CHAR(Datee,'MM') = '02' Then 'FEB_12' End Month
  from price_list_LastYear
  WHERE TO_CHAR(Datee,'MM') in ('01', '02')
  UNION ALL
  Select name,
    PRICE,
    case 
      when TO_CHAR(Datee,'MM') = '01' Then 'JAN_11'
      when TO_CHAR(Datee,'MM') = '02' Then 'FEB_11' End Month
  from price_list_TwoLastYear
  WHERE TO_CHAR(Datee,'MM') in ('01', '02')
) src
GROUP BY name 
```

# java - 无法在 JLabel 上显示图像

> ID：14295631
> 
> 赞同：0
> 
> 时间：2013-01-12T17:03:18.813
> 
> 标签：java, swing, awt, jlabel, imageicon

> **可能重复：**
> [如何将 JLabels 动态添加到 JPanel？](https://stackoverflow.com/questions/14030124/how-to-dynamically-add-jlabels-to-jpanel)

```
private void jXHyperlink1MouseClicked(java.awt.event.MouseEvent evt) {
NewClass n=new NewClass();
n.myf();
try{
    ImageIcon ic=new ImageIcon("tmp/Photo0087.jpg");
    ll=new JLabel(ic,JLabel.CENTER);
    jPanel6.add(ll);
    repaint();
}catch(Exception x){
    System.out.println(x.getMessage());
   }
    } 
```

`myf()`方法打开一个`JFileChooser`在其中按下`JFileChooser`图像文件的打开按钮被复制到临时文件夹 tmp（我复制了 Photo0087.jpg）。

我正在尝试在我编写上述代码但它不起作用的文件上显示文件**Photo0087.jpg 。**`JLabel`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:10:50.400

`JPanel`添加新的后，您需要重新验证`JLabel`：

```
jPanel6.revalidate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:43:05.087

要么像这样通过绝对图像路径`C:\\folder\\folder2\\image.jpg`

或试试这个`ImageIcon ic = new ImageIcon(getClass().getResource("image location"))`

# c# - 使用 TcpClient 在 LAN 上未完全传输数据

> ID：14295632
> 
> 赞同：2
> 
> 时间：2013-01-12T17:03:25.957
> 
> 标签：c#, tcpclient, transmission

我通过 LAN 网络发送序列化数据，但有时信息会丢失！过程如下：

**发件人：**

1.  `string mydata`正在序列化
2.  `string mydata`被转换为`byte[] bytes_of_mydata`
3.  `int size_of_mydata`是长度`byte[] bytes_of_mydata`
4.  `int size_of_mydata`本身就变成了`byte[] bytes_size_of_mydata`
5.  `byte[] bytes_of_mydata`并被`byte[] bytes_size_of_mydata`发送

**接收者：**

1.  我先收到`byte[] bytes_size_of_mydata`
2.  `int size_of_mydata`检索第二条消息的长度`byte[] bytes_size_of_mydata`
3.  然后我收到`byte[] bytes_of_mydata`，知道确切的长度！
4.  然后我转换`byte[] bytes_of_mydata`为`string mydata`
5.  反序列化`string mydata`

**这种方法通常适用于大多数情况**，但有时我的数据没有完全传输，因此无法反序列化字符串。

我已经`byte[]`在“接收器”上调试了收到的内容，这就是发生的事情：

我得到第二条消息的大小：

```
int size_of_second_message = BitConverter.ToInt32(dataByteSize, 0); // 55185 
```

我开始接收到字节数组的第二条消息：

```
Byte[] dataByte = new Byte[55185]; 
```

但是从位置 5840 开始，我开始收到 0（空值），所以“5840 - 55185”部分都是“0”：

```
byte[5836] = 53;
byte[5837] = 57;
byte[5838] = 54;
byte[5839] = 49;
byte[5840] = 0; // information ends to flow
byte[5841] = 0;
byte[5842] = 0;
byte[5843] = 0;
//....
byte[55185] = 0; 
```

上面的示例取自实际的调试器！

所以有什么问题？这就像在传输过程中失去了连接！为什么会发生这种情况，我该如何解决这个问题？它不会发生在“每次”的基础上。

**代码来了**

**发送：**

```
//text_message - my original message
//Nw - network stream
MemoryStream Fs = new MemoryStream(ASCIIEncoding.Default.GetBytes(text_message));
Byte[] buffer = Fs.ToArray(); // total 55185 bytes (as in example)
Byte[] bufferSize = BitConverter.GetBytes(Fs.Length); // 32 bytes represent size
bufferSize = GetNewByteSize(bufferSize);

Nw.Write(bufferSize, 0, bufferSize.Length); // send size
Nw.Flush();

Nw.Write(buffer, 0, buffer.Length); // send message
Nw.Flush(); 
```

**收到：**

```
//get first(SIZE) bytes:
int ReadSize = 0; int maxSize = 32; // 32 - constant!
Byte[] dataByteSize = new Byte[maxSize];
int origsize;
using (var strm = new MemoryStream())
{
    ReadSize = Nw.Read(dataByteSize, 0, maxSize);
    strm.Write(dataByteSize, 0, ReadSize);
    strm.Seek(0, SeekOrigin.Begin);
    origsize = BitConverter.ToInt32(dataByteSize, 0); // origsize = 55185
}
Nw.Flush();

//get next(MESSAGE) bytes:
string message = ""; int thisRead = 0;
int max = Convert.ToInt32(origsize); // origsize = 55185
Byte[] dataByte = new Byte[max];

using (var strm = new MemoryStream())
{
    thisRead = Nw.Read(dataByte, 0, max);
    strm.Write(dataByte, 0, thisRead);
    strm.Seek(0, SeekOrigin.Begin);
    using (StreamReader reader = new StreamReader(strm))
    {
        message = reader.ReadToEnd();
    }
}
Nw.Flush();
// message - the message that is being transmitted partly (sometimes)! 
```

我不想发布代码，但你们通常会问“告诉我们你做了什么”，所以就在这里！

## 编辑

临时修复是切换到 StreamWriter，阅读器。

**接收+发送（服务器）：**

```
NetworkStream Nw = new NetworkStream(handlerSocket.Client);
string toreceive = "";
StreamReader reader = new StreamReader(Nw);
toreceive = reader.ReadLine();
string text_message = "to send back";
StreamWriter writer = new StreamWriter(Nw);
writer.WriteLine(text_message);
writer.Flush();
Nw.Close(); 
```

**发送+接收（客户端）：**

```
NetworkStream Nw = new NetworkStream(handlerSocket.Client);
StreamWriter writer = new StreamWriter(Nw);
writer.WriteLine("to send");
writer.Flush();

string toreceive = new StreamReader(Nw).ReadLine();
writer.Close();
Nw.Close(); 
```

我正在寻找有关原始问题的解决方案，但到目前为止，由于临时修复，一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:05:54.987

TCP 是一种基于流的协议，可让您读取已收到的尽可能多的数据。仅仅因为您一步发送数据，并不能保证数据会在同一个块中收到。您必须在接收端循环，直到收到您预期的所有数据。

顺便说一句，我认为您的协议在开始时具有显式长度字段非常好，它弥补了简单的客户端代码（至少尽可能简单）。

前段时间我问了一个关于内置功能等到 X 字节数据可用的问题：[.NET 阻塞套接字读取直到 X 字节可用？](https://stackoverflow.com/questions/6793234/net-blocking-socket-read-until-x-bytes-are-availabl). 不幸的是，答案是否定的。

# twitter-bootstrap - Bootstrap 切换语言

> ID：14295636
> 
> 赞同：2
> 
> 时间：2013-01-12T17:03:52.310
> 
> 标签：twitter-bootstrap, multilingual, jquery

我有一个两种语言的博客。单击 FlagA.png 或 FlagB.png 时，我想在语言 A 和 B 之间切换。每个帖子至少包含两个标志图像。如何使用（引导）Jquery 做到这一点？（上下文，我没有数据库，为了方便多语言我想使用切换功能）

```
 <div class="post">
                    <div class="post-content">
                        <div class="post-title"><a href="#"><b>title</b</a>                </div>
                        <a href="" class="languageA">
                                <img src="img/countryA.png" alt=""
                                    style="float: right;" /></a>
                        <a href="" class="languageB">
                                <img src="img/countryB.png"  alt="" style="float: right;
                                    padding-right: 10px;" /></a>
                        </br>
                        <div class="post-description">
                        <p>
                            post in language A
                        </p>
                        </div>
                        <div class="post-description">

                        <p>
                            post in language B but now it is invisible, when pressed countryB image this becomes visible and post in language A not.
                        </p>
                        </div>
                    <p class="test"> test test test test test test test test test test test test</p>
                   </div>
                   <div class="post">
                   <!-- second post\-->
                   </div>
                   <!-- -->
                   <script type="text/jscript">
                  $(function() {
        $('.languageA').click(function () {
            $('.test').collapse({
                toggle: true
            })
        });
    });
                   });
                   </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T22:00:14.577

您可以通过以下方法执行此操作：

1.  对于您要切换的所有内容，您必须为其提供相关的语言类。在下面的示例中，我给标题、国家标志和帖子描述一个语言类。
2.  单击时使用单击功能切换每个语言类别的内容。在此示例中，我通过使用将切换限制为每个帖子，`$(this).parent`以便您可以阅读一种语言的一篇文章和另一种语言的另一篇文章。
3.  然后，您还可以在每个切换中实现一个回调，以在切换完成时显示另一种语言。

这是HTML：

```
<div class="post">
    <div class="post-content">
      <div class="post-title languageA"><a href="#"><b>Title 1 in Language A</b></a></div>
      <div class="post-title languageB"><a href="#"><b>Title 1 in Language B</b></a></div>
        <a href="#" class="languageA">
          <img src="http://flags.redpixart.com/img/united_states_of_america_preview.gif" alt=""
          style="float: right;" /></a>
        <a href="#" class="languageB">
          <img src="http://flags.redpixart.com/img/spain_preview.gif"  alt="" style="float: right;
                                    padding-right: 10px;" /></a>
      <br/>
      <div class="post-description languageA">
        <p>
          Post 1 in language A
        </p>
      </div>
      <div class="post-description languageB">
        <p>
          Post 1 in language B
        </p>
      </div>
      <p class="test"> test test test test test test test test test test test test</p>
    </div>
</div> 
```

然后下面的 JavaScript 将切换语言：

```
$(function() {
   // Hide Language B when the web page loads
   $('.languageB').hide();
   $('.languageA').click(function () {
       // find all content with .languageA under the div post-content and hide it
       $(this).parent().find('.languageA').fadeToggle('slow',function() {
             // find all content with .languageB under the div post-content and show it
             $(this).parent().find('.languageB').show();});
   });
   $('.languageB').click(function () {
       // find all content with .languageB under the div post-content and hide it
       $(this).parent().find('.languageB').fadeToggle('slow',function() {
             // find all content with .languageA under the div post-content and show it
             $(this).parent().find('.languageA').show(); });
   });
}); 
```

[JSFiddle 在这里](http://jsfiddle.net/mccannf/F2rFd/9/)。

# php - 我应该如何正确地将富文本保存为隐藏的 PHP 变量?

> ID：14295642
> 
> 赞同：3
> 
> 时间：2013-01-12T17:04:15.917
> 
> 标签：php, input, tinymce, hidden, richtext

我在 textarea 中有一个富文本编辑器（特别是tinyMCE），我将该 textarea 的 HTML 内容保存到 PHP 变量中，并将其保存在隐藏的输入字段中。我想知道如何使它既安全又实用，尤其是与我的隐藏输入冲突的撇号或引号。

我尝试过使用 htmlspecialchars 和 htmlspecialchars_decode，但它并不能完全正常工作，因为有时我会在输出中得到随机的反斜杠（因此它不能正常工作。）但是，这似乎可以防止撇号或引号与 HTML 冲突的问题隐藏的输入字段。

有完美的解决方案吗？我正在考虑 TryIt Editor，以及它如何能够毫无问题地显示 html 元素以及撇号或引号（据我所知）。我怎样才能在我的富文本编辑器中做这样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:08:09.267

我在考虑使用的正确轨道上`htmlspecialchars`，我只需要更进一步并使用`stripslashes`. 这删除了我从中得到的反斜杠`htmlspecialchars`。

所以像：

```
$content = htmlspecialchars($_POST["textarea"]); 
```

然后当我需要输出它时，是这样的：

```
$htmlcode1 = "<html> \n <body>";
$htmlcode2 = "</body> \n <html>";
$somecontent = htmlspecialchars_decode(stripslashes($htmlcode1.$content.$htmlcode2)); 
```

希望这对将来的其他人有所帮助！

# c# - App_Code 中的类无法访问

> ID：14295643
> 
> 赞同：0
> 
> 时间：2013-01-12T17:04:27.907
> 
> 标签：c#, asp.net, visual-studio-2012

我在文件夹中有一个`Config.cs`文件`App_Code`：

```
namespace C
{
public class Config
{
  ......
 }
 } 
```

在我的 default.aspx.cs 页面中，我添加了`using C;`但我无法加载该页面。它说：

`CS0246: The type or namespace name 'C' could not be found (are you missing a using directive or an assembly reference?)`

我正在使用 CodeFile 而不是 CodeBehind，并且我已经尝试将 Build Action 属性设置为，`Compile`但我在类属性页面中找不到该选项。我正在使用 VS 2012。

当我在 VS 2012 中按 F5 并在该端口下访问我的站点时，它工作正常。它仅在我尝试直接访问我的页面时显示错误，就像任何其他用户会尝试的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:23:46.517

我认为您的`App_Code`文件夹不在项目的根文件夹中。请确保您已将`App_code`文件夹放在包含文件的项目路径中`default.aspx`。不要保存`App_code`在嵌套文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:24:44.307

尝试预编译应用程序并在服务器上发布。如果未预编译，请确保类文件存在于服务器“App_Code”文件夹中。当应用程序收到第一个请求时，这个类被编译。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-14T19:37:28.230

您应该只在 Visual Studio 中编辑类文件的属性并将生成操作标记为“编译”，而不是“内容”，然后重建并重新发布您的项目。

# database - 找不到 db4o 数据库文件

> ID：14295646
> 
> 赞同：0
> 
> 时间：2013-01-12T17:04:50.063
> 
> 标签：database, file, db4o

您好，我正在编写一个使用 JSF 和 DB4O 完美运行的简单 CRUDE 应用程序。我可以正常添加和列出所有实体而不会出错。我已经使用此代码来持久化实体

```
bd = Db4oEmbedded.openFile(configuration, "db.data");
        bd.store(client);
        bd.commit(); 
```

问题是我找不到 db.data 文件。我已经在整个PC中进行了搜索，但仍然找不到。soo DB4O 将这些实体存储在哪里，这怎么可能？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:32:28.307

它必须在您的项目执行路径中。通常 db4o 文件名以扩展名`yap`. 更好的是，您可以使用数据库文件的相对路径，例如

```
String dbPath = "c:/db/project.yap"; // better read from project resource
EmbeddedObjectContainer openFile = Db4oEmbedded.openFile(dbPath); 
```

# python - 为什么基于矢量的图像文件包含损坏的字符？

> ID：14295647
> 
> 赞同：1
> 
> 时间：2013-01-12T17:04:57.803
> 
> 标签：python, matplotlib, vector-graphics

我在 OSX 10.8.2 上并使用 Python 2.7.3 和 matplotlib 1.1.1。当我将绘图导出为基于位图的格式（例如 JPEG 或 PNG）时，百分号会正确呈现，如下所示：

![正确呈现百分号](../Images/37fb4da1b567101b984ac4d8cffdde8e.png)

但是，当我将它们导出为基于矢量的格式（例如 PDF 或 PS）时，我会得到以下信息：

![错误地呈现百分号](../Images/c64fc2a097362e44d6c8b112fffb8a6d.png)

我没有测试所有字符，但可能会出现其他渲染错误。我选择哪个后端并不重要，例如`PDF`，我总是使用基于矢量的文件格式来获取这个格式错误的字符。我使用matplotlib的标准字体设置，也就是这里没有自定义。

你知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T17:32:07.177

好吧，这次我可以自己回答我的问题了。在设置文件`matplotlibrc`中，我必须更改设置`pdf.fonttype`，并从代表*Output Type 3*`ps.fonttype`的标准设置更改为代表*TrueType*。我不是字体专家，但似乎 matplotlib 使用的标准字体是 TrueType 字体。因此，必须设置正确的字体类型。`3`*`42`*

 **在 Python 中：

```
import matplotlib as mpl
mpl.rcParams['pdf.fonttype']=42 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-23T17:24:32.600

当使用字体类型 3（意味着 PDF 或 PS 的本机字体格式）时，字体被子集化。在matplotlib 1.2 左右之前的*某些*字体的字体子集代码中存在错误。

因此，虽然这是一种有效的解决方法，但它会使文件变得更大。如果可以的话，最好升级 matplotlib。**

# jquery - nextAll() 是否可以只选择一定数量的元素而不是后面的所有元素？

> ID：14295651
> 
> 赞同：1
> 
> 时间：2013-01-12T17:05:03.290
> 
> 标签：jquery, html

我想创建一个自己的下拉列表。

```
<dl>
<dt>Option 1</dt>
<dd><a href="#" /></dd>//a
<dd><a href="#" /></dd>//b
<dd><a href="#" /></dd>//c
<dt>Option 2</dt>
<dd><a href="#" /></dd>//1
<dd><a href="#" /></dd>//2
<dd><a href="#" /></dd>//3
</dl> 
```

我的jQuery：

```
<script>
$('dd').hide();
$(document).ready(function(){
$('dt').bind('click', function(){
$(this).toggleClass('open').nextAll('dd').slideToggle(2000);
});
});
</script> 
```

我想要的是，当用户单击选项 1 (dt) 时，只显示 a、b 和 c。单击选项 2 (dt)，仅显示 1、2 和 3。目前正在发生的事情是所有 dd 都被揭示（a、b、c 和 1、2、3）。我从 nextAll() 中删除了所有内容，只显示了 a 和 1。有没有办法只显示 dt 后面的信息而不显示所有 dd？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:08:43.957

您可以使用[nextUntil()](http://api.jquery.com/nextUntil/)匹配所有以下兄弟元素，直到下一个`<dt>`：

```
$("dt").on("click", function() {
    $(this).toggleClass("open").nextUntil("dt").slideToggle(2000);
}); 
```

# php - 在 php 主机上使用 php 读取文件

> ID：14295658
> 
> 赞同：0
> 
> 时间：2013-01-12T17:05:29.750
> 
> 标签：php, hosting, readfile

我正在尝试在 php 主机上读取文件（例如：pdf 文件）。

我的代码：

```
$myarray = array(); 
$path = "/home/mywebsite.com/httpdocs"; 
$open = opendir($path);

while ($x = readdir($open)) {
    if ($file != "." && $file != "..") {
        $myarray[] = $file;
    }
}

sort($myarray);
closedir($open);

echo json_encode($myarray); 
```

此代码正在运行，但如果我更改 $path 的值：“/home/mywebsite.com/mydirectory/”而不是“/home/mywebsite.com/httpdocs”，则此代码不会运行。

我想将我的文档存储在我的目录中。有什么建议么？

# racket - 我如何在球拍中编写此操作？

> ID：14295660
> 
> 赞同：0
> 
> 时间：2013-01-12T17:05:42.787
> 
> 标签：racket

我将如何在球拍中制定以下操作？

`(n^2 + 300) (13/n)`?

我完成了第一部分-

```
(define (f n)
  ( +  ( * n n ) 300)) 
```

所以如果我输入`(f 2)`我会得到`304`.

但是如何添加这个等式的第二部分`(13/n)`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T22:27:36.103

如果您只想使用直接乘法，则可以使用：

```
(define (f n)
  (* (+ (* n n) 300) (/ 13 n))) 
```

如果你要做的只是一个数字的平方，那么你也可以这样做：

```
(define (f n)
  (* (+ (sqr n) 300) (/ 13 n))) 
```

最后，如果您需要将 n 提高到某个幂，那么您还可以执行以下操作：

```
(define (f n)
  (* (+ (expt n 2) 300) (/ 13 n))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T18:24:34.393

这很简单：

```
(define (f n)
  (* (+ (* n n) 300) (/ 13 n))) 
```

# html - 转换网站宽度

> ID：14295661
> 
> 赞同：-2
> 
> 时间：2013-01-12T17:05:44.050
> 
> 标签：html, css

我正在开发一个 960 像素宽的网站。它主要面向“创意”观众，包含大量视频。我想将网站转换为 1000 像素宽，并且想知道这样做是否有任何缺点？如果是这样，它们具体是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:14:19.523

检查这个网站：[https ://webmasters.stackexchange.com/questions/7932/what-is-the-standard-width-for-a-website-in-pixels](https://webmasters.stackexchange.com/questions/7932/what-is-the-standard-width-for-a-website-in-pixels)

它可能对你有用。这详细说明了您的问题。

# google-chrome - 有没有办法制作一个独立的 chrome web 应用程序？

> ID：14295663
> 
> 赞同：0
> 
> 时间：2013-01-12T17:05:49.233
> 
> 标签：google-chrome, web-applications, frontend

我正在构建一个前端界面，我希望它作为应用程序而不是网站运行。但是，我更希望它从桌面图标运行，而不是通过打开 chrome 并启动应用程序或使用任何 chrome UI/地址栏等。

我已经阅读了 chrome 文档，看来您可以全屏显示但不能独立显示？

您能否指出我正确的方向，最好使用 chrome，但如果这是唯一的选择，我可以使用另一个基于 WebKit 的渲染器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:14:03.870

您可以查看包装 Webkit 的库之一，例如 Qt 具有[QWebView](http://qt-project.org/doc/qt-4.8/qwebview.html)小部件。一个只有这个小部件的简单 Qt 应用程序应该是您所需要的，只需要一些 C++ 行：

```
#include <QtGui/QApplication>
#include <QtWebKit/QWebView>

int main(int argc, char** argv) {
    QApplication app(argc, argv);
    QWebView view;
    view.load(QUrl("http://my.app.corp"));
    return app.exec();
} 
```

[Qt Creator](http://qt-project.org/downloads) IDE 可帮助您将其编译为应用程序二进制文件。

# php - PHP：从业务开始年计算年数？

> ID：14295664
> 
> 赞同：0
> 
> 时间：2013-01-12T17:05:51.827
> 
> 标签：php, date, date-arithmetic

从企业开始计算年数的最简单解决方案是什么。

> 我们制造了 23 年的东西。

我想用动态 PHP 变量替换“23”。该业务的开始日期是2004年。

执行此操作的最短和最优雅的版本是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T17:08:27.093

```
date("Y") - 2004; 
```

或者它的一些变体？

# controller - 如何用模糊控制器代替PID控制器，使其工作与PID完全相同

> ID：14295666
> 
> 赞同：0
> 
> 时间：2013-01-12T17:05:59.980
> 
> 标签：controller, simulink

我在 simulink 中有一个模型，如图所示![](../Images/75dd6d18bb066c02e9d5ed2b4e19d202.png)

该模型具有 PID 控制器，Kp=36 Kd=54 Ki=6。Pid 控制器将作为其输入的误差最小化为零。现在我想用模糊控制器替换它，使其与 PID 完全相同。该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T12:37:25.747

它非常简单....在 Matlab 工作区类型中*模糊*。模糊工具箱将打开。您需要在那里分配输入和输出。将错误*e*和变化中的错误*de*作为输入，将*Kp*、*Ki*和*Kd*作为输出。然后决定这些输入和输出的每个隶属函数的范围。[详情请参阅一些研究论文]

将模型另存为*Model.fis*并将此模型导出到工作区。

打开 Simulink 并像您发布的图一样将其替换为 Fuzzy Logic Controller Block 并在模块中调用*Model.fis*。并运行模拟。:)

# c# - 这种编码风格的名称是什么？

> ID：14295668
> 
> 赞同：0
> 
> 时间：2013-01-12T17:06:22.187
> 
> 标签：c#

我不记得我听说过的关于编程 c# 的术语，比如

```
var x= obj.A()
          .B()
          .C()
          .ETC() 
```

我越来越多地看到这一点，我想知道如何构建这样的代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T17:07:57.120

这种风格通常被称为“流利”

这种风格的一些背景是[http://en.m.wikipedia.org/wiki/Fluent_interface](http://en.m.wikipedia.org/wiki/Fluent_interface)

github上有几个很好的repos可以查看使用这种方法的库 - 例如流利验证 - [https://github.com/JeremySkinner/FluentValidation](https://github.com/JeremySkinner/FluentValidation)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T17:10:53.697

这被称为[`Fluent interface`](http://en.wikipedia.org/wiki/Fluent_interface)。

> 流畅的接口通常是通过使用方法链接来中继后续调用的指令上下文来实现的（但流畅的接口不仅仅需要方法链接）。一般来说，上下文是：
> 
> *   通过被调用方法的返回值定义
> *   自引用，其中新上下文等同于最后一个上下文
> *   通过返回 void 上下文而终止。

你可以从[fluent-interface](/questions/tagged/fluent-interface "显示标记为“流利界面”的问题")标签中学到很多东西。

# android - 如何制作安卓游戏加载画面

> ID：14295669
> 
> 赞同：0
> 
> 时间：2013-01-12T17:06:25.743
> 
> 标签：android, android-activity, main

当您启动 android 应用程序时，主要活动以白色背景和黑色标题开始，您的应用程序名称位于左角。像[这样](http://img585.imageshack.us/img585/7012/submenudemomainactivity.png)

如何完全删除这个（当应用程序启动时不显示这个）并在屏幕上添加自定义加载进度条或一些标志？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:15:21.697

How about creating a splash dialog with custom layout containing progress bar?

In your main activity do something like this

```
private SplashDialog mSplashDialog;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    showSplashScreen();
    setContentView(R.layout.yourmainlayout);        
}

protected void removeSplashScreen() {
    if (mSplashDialog != null) {
        mSplashDialog.dismiss();
        mSplashDialog = null;
    }
}

protected void showSplashScreen() {
    mSplashDialog = new SplashDialog(this, R.style.splash_dialog);
    mSplashDialog.setCancelable(false);
    mSplashDialog.show();
} 
```

Create custom dialog

```
public class SplashDialog extends Dialog {
    private ProgressBar mProgressBar;

    public SplashDialog(Context context, int theme) {
        super(context, theme);
        setContentView(R.layout.splash_dialog);
        mProgressBar = (ProgressBar) findViewById(R.id.splash_progress);
    }

    public void setProgress(int progress) {
        mProgressBar.setProgress(progress);
    }
} 
```

And add style to that will let dialog fill all screen.

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="splash_dialog">
        <item name="android:padding">0dp</item>
        <item name="android:windowBackground">@android:color/transparent</item>
        <item name="android:windowFrame">@null</item>
    </style>
</resources> 
```

To change dialog's progress value call `mSplashDialog.setProgress(int progress)`.

When your data is loaded call `removeSplashScreen()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-20T18:34:51.090

对我有用的（因为我在开始时没有太多负载，实际上我根本不需要启动画面）正在更改 res/values/styles.xml ：

```
<resources>
<color name="custom_theme_color">#000000</color>
<style name="AppTheme" parent="android:Theme.Light" >
<item name="android:windowNoTitle">true</item>
<item name="android:windowBackground">@color/custom_theme_color</item>
</style>
</resources> 
```

它只是从黑屏开始，当它全部加载时进入全屏（1-2 秒后）。看起来很“专业”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T15:31:58.490

我想你要找的可以在这里找到：

[如何更改启动画面](http://thenewboston.org/watch.php?cat=6&number=15)

# python - 将字符串转换为 datetime.time 对象

> ID：14295673
> 
> 赞同：92
> 
> 时间：2013-01-12T17:06:45.370
> 
> 标签：python, time, python-datetime

例如，`string`在这种格式`"HH:MM"`中，`"03:55"`表示*3 小时 55 分钟*。

我想将其转换为`datetime.time`对象以便于操作。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2013-01-12T17:09:22.290

使用[`datetime.datetime.strptime()`](http://docs.python.org/library/datetime.html#datetime.datetime.strptime)并调用[`.time()`](http://docs.python.org/library/datetime.html#datetime.datetime.time)结果：

```
>>> datetime.datetime.strptime('03:55', '%H:%M').time()
datetime.time(3, 55) 
```

第一个参数`.strptime()`是要解析的字符串，第二个参数是预期的格式。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-12T17:10:46.320

```
>>> datetime.time(*map(int, '03:55'.split(':')))
datetime.time(3, 55) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-09T09:20:59.957

未来的读者可能不太清楚，但该`*map`方法快了 10 倍以上。请参阅下文并在您的代码中做出明智的决定。如果多次调用此检查并且速度很重要，请使用生成器（“地图”）。

```
In [31]: timeit(datetime.strptime('15:00', '%H:%M').time())
7.76 µs ± 111 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)

In [28]: timeit(dtime(*map(int, SHUTDOWN_AT.split(':'))))
696 ns ± 11.5 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each) 
```

# javascript - 将html数据从div传递到php

> ID：14295675
> 
> 赞同：0
> 
> 时间：2013-01-12T17:06:51.937
> 
> 标签：javascript, jquery

我能够从 contentEditable div 中获取全部文本数据，但我想将数据传递给 PHP 文件，就像在 div 中的 HTML 元素一样。目前只有文本被去掉 html 标签的日志返回，

* * *

首先，我将它动态添加到 div

```
 var user = "<a contenteditable='false' href='#' >"+name+" </a>";
       $("#message").append(user); 
```

* * *

但是当我尝试记录内容时，我只看到返回的“a”标签中的文本

```
 var msg = $('#message').html();
         console.log(msg); 
```

* * *

这是我的 HTML

```
 <div name="message" contentEditable="true" id="message" ></div> 
```

所以我想通过的一个例子是这个

```
 "Hello world!<a href='#'>Ned</a> Fails!" 
```

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:20:26.737

该`$.html()`函数返回子元素的代码。它不返回元素本身的 HTML 代码。使用 $("#message").parent().html() 访问元素的父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:22:45.333

您正在使用 id -"message" 将数据附加到元素中...

```
$("#message").append(user); 
```

但是使用 id -“chat-message”的元素的 html

```
$('#chat-message').html(); 
```

那么您的聊天消息元素在哪里？可能是您在选择要显示 html 的元素时犯了错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T17:16:42.193

请参阅[此处](http://jsfiddle.net/ktraff/4nYYN/1/)以获取我认为您正在寻找的工作副本。看起来您只需要确保元素的 id 匹配：

```
$(function () {
  var name = "Ned";
  var user = "<a contenteditable='false' href='#' >"+name+" </a>";
  $("#message").append("Hello world!" + user + " Fails!");
   var msg = $('#message').html();
   alert(msg);
}) 
```

# html - Webkit/Firefox - 图像的绝对位置

> ID：14295677
> 
> 赞同：1
> 
> 时间：2013-01-12T17:06:54.417
> 
> 标签：html, css, positioning, css-position

H！

我对 webkit-browsers 和 firefox 中某些元素的定位有疑问。

在 Safari/Chrome 中，看起来我希望它是：

![在此处输入图像描述](../Images/a5b91815c5fb9e80805ee11b1d37d1e1.png)

但在 Firefox 中，它看起来像这样：

![在此处输入图像描述](../Images/a34adff1a2cfb3149f19258825fbf095.png)

**代码**

HTML

```
<ul>
  <li>
    <div class="img">
      <a href="#">
        <img src="#" />
        <p><span class="circle"><img src="white-circle.png" alt="" /></span></p>
      </a>
    </div>
  </li>
</ul> 
```

CSS

```
li {
  position: relative;
}

p {
  top: 0;
  width: 100%;
  height: 100%;
  position: absolute;
  text-align: center;
  background-color: black;
}

p img {
  width: 70%;
  height: 70%;
  position: absolute;
  top: 50%;
  left: 50%;
  margin-top: -35%;
  margin-left: -35%;
} 
```

知道那里发生了什么吗？Firefox 有`position: absolute`不同的解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:25:31.480

当您使用绝对定位时，firefox 似乎总是以不同的方式移动到 Chrome 和 Safari。我的意见是

```
 p img:{position: relative;} 
```

（相对位置很好，只有当我使用绝对位置时）。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:21:26.827

显然，其他一些混乱的 CSS 规则在那里起作用。作为临时修复，我使用[本指南](http://www.vanseodesign.com/css/vertical-centering/)来寻找在 Firefox 中工作的解决方案。
可能这是影响所有图像的一些规则，但我现在找不到它。

# python - 无法导入确定安装的模块

> ID：14295680
> 
> 赞同：192
> 
> 时间：2013-01-12T17:07:14.360
> 
> 标签：python, mechanize, python-module

安装[mechanize](https://pypi.org/project/mechanize/)后，我似乎无法导入它。

我已经尝试从 pip、easy_install 以及通过`python setup.py install`这个 repo 安装：[https](https://github.com/abielr/mechanize) ://github.com/abielr/mechanize 。所有这一切都无济于事，因为每次我进入我的 Python 交互时，我都会得到：

```
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import mechanize
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named mechanize
>>> 
```

我之前运行的安装报告它们已成功完成，因此我希望导入能够正常工作。什么可能导致此错误？

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2013-05-04T17:55:33.507

就我而言，这是权限问题。该软件包以某种方式仅以root rw权限安装，其他用户无法对其进行rw！

* * *

## 回答 #2

> 赞同：108
> 
> 时间：2016-01-14T19:12:47.353

我有同样的问题：脚本`import colorama`抛出和 ImportError，但`sudo pip install colorama`告诉我“包已经安装”。

**我的解决方法：在没有 sudo**的情况下运行 pip : `pip install colorama`。然后 pip 同意它需要安装，安装它，然后我的脚本运行。

我的环境是 Ubuntu 14.04 32 位；我想我在激活我的 virtualenv 之前和之后都看到了这个。

**更新**：更好的是，使用`python -m pip install <package>`. 这样做的好处是，由于您正在执行您想要包的特定版本的 python，pip 将明确地将包安装到“正确的”python 中。同样，在这种情况下*不要*使用 sudo ......然后你将包放在正确的位置，但可能具有（不需要的）root 权限。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-04-22T17:45:22.257

这是python路径问题。

就我而言，我在以下位置安装了 python：

```
/Library/Frameworks/Python.framework/Versions/2.6/bin/python, 
```

并且python2.6中没有site-packages目录。

我通过 pip 安装的包（SOAPpy）位于

```
/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/ 
```

并且站点包不在 python 路径中，我所做的只是将站点包永久添加到 PYTHONPATH 中。

1.  打开终端

2.  键入 open .bash_profile

3.  在弹出的文本文件中，在最后添加这一行：

    ```
    export PYTHONPATH=$PYTHONPATH:/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/site-packages/ 
    ```

4.  保存文件，重启终端，大功告成

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2013-01-12T17:19:35.650

Python 导入机制确实有效，所以，要么：

1.  你的 PYTHONPATH 是错误的，
2.  您的库未安装在您认为的位置
3.  您有另一个同名的库掩盖了这个库

* * *

## 回答 #5

> 赞同：17
> 
> 时间：2018-04-01T20:19:26.200

我能够用一种综合方法来纠正这个问题。首先，我听从了 Chris 的建议，打开命令行并输入 'pip show packagename' 这提供了已安装包的位置。

接下来，我打开 python 并输入“import sys”，然后输入“sys.path”来显示我的 python 搜索我导入的任何包的位置。唉，第一步中显示的位置不在列表中。

最后一步，我输入了 'sys.path.append('package_location_seen_in_step_1')。您可以选择重复第二步以查看该位置现在是否在列表中。

测试步骤，尝试再次导入包......它的工作原理。

不足之处？它是临时的，您每次都需要将其添加到列表中。

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2016-06-21T22:32:23.230

我一直在用我的头撞我的显示器，直到一个年轻的实习生告诉我秘密是**在模块目录中安装“python setup.py install”。**

出于某种原因，从那里运行设置使其正常工作。

需要明确的是，如果您的模块名称是“foo”：

```
[burnc7 (2016-06-21 15:28:49) git]# ls -l
total 1
drwxr-xr-x 7 root root  118 Jun 21 15:22 foo
[burnc7 (2016-06-21 15:28:51) git]# cd foo
[burnc7 (2016-06-21 15:28:53) foo]# ls -l
total 2
drwxr-xr-x 2 root root   93 Jun 21 15:23 foo
-rw-r--r-- 1 root root  416 May 31 12:26 setup.py
[burnc7 (2016-06-21 15:28:54) foo]# python setup.py install
<--snip--> 
```

如果您尝试通过调用任何其他目录的路径来运行 setup.py，那么您最终会得到一个无聊的安装。

不工作：

```
python /root/foo/setup.py install 
```

有效：

```
cd /root/foo
python setup.py install 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-09-04T05:56:08.280

我在尝试使用通过`sudo pip install keyring`. 正如其他答案中提到的，在我的情况下这是一个权限问题。

什么对我有用：

1.  已卸载的密钥环：

*   `sudo pip uninstall keyring`

2.  我使用了 sudo 的`-H`选项并重新安装了密钥环：

*   `sudo -H pip install keyring`

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-02-27T18:40:46.257

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-12-06T16:32:31.883

我无法让我的 PYTHONPATH 正常工作。我意识到添加`export`解决了这个问题：

（确实工作）

```
export PYTHONPATH=$PYTHONPATH:~/test/site-packages 
```

对比

（不工作）

```
PYTHONPATH=$PYTHONPATH:~/test/site-packages 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2019-08-19T21:35:37.837

对我有用的是：

```
python -m pip install -user {package name} 
```

该命令不需要 sudo。这是在 OSX Mojave 上测试的。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-04-06T14:05:07.317

就我而言，我已经运行`pip install Django==1.11`并且它不会从`python`解释器中导入。

浏览 pip 的命令，我发现`pip show`它看起来像这样：

```
> pip show Django
Name: Django
Version: 1.11
...
Location: /usr/lib/python3.4/site-packages
... 
```

请注意该位置显示“3.4”。我发现`python`-command 链接到`python2.7`

```
/usr/bin> ls -l python
lrwxrwxrwx 1 root root 9 Mar 14 15:48 python -> python2.7 
```

在旁边，我找到了一个名为的链接，`python3`所以我使用了它。您也可以将链接更改为`python3.4`. 那也可以解决它。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2019-04-26T09:26:18.177

就我而言，这是模块中缺少**init** .py 文件的问题，我想在 Python 2.7 环境中导入该文件。

**Python 3.3+ 具有隐式命名空间包，允许它在没有init** .py 文件的情况下创建包。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-11-14T14:14:03.283

另外，请确保不要`pip3`与`pip`. 我发现安装的软件包`pip`无法使用`python3`，反之亦然。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-11-21T20:39:49.913

也有这个问题..该包安装在 Python 3.8.0 上，但 VS Code 使用旧版本（3.4）运行我的脚本

在终端中修复：

py.py

确保在正确的 Python 版本上安装包

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-08-25T13:01:32.363

我通过 pip 安装了 colorama 并且收到“ImportError：没有名为 colorama 的模块”

所以我用“find”搜索，找到绝对路径并将其添加到脚本中，如下所示：

```
import sys
sys.path.append("/usr/local/lib/python3.8/dist-packages/")
import colorama 
```

它奏效了。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-11-24T05:34:35.403

此解决方案并不适用于所有人。仅适用于执行特定操作的一组特定新手（如我）。以上答案都不适合我。

**那么是什么导致了这个问题：**以前我有一个在根目录下设置 venv 的项目。后来我创建了一个新用户并决定将项目移至该用户。而不是只移动源文件并重新安装依赖项，我将整个项目连同 venv 文件夹一起移动到了新用户（因为我不知道这些问题）。之后，我安装的依赖项被添加到venv 文件夹中，`global site-packages`而不是添加到 venv 文件夹中。因此，在此环境中运行的代码无法访问这些依赖项。

**解决方案**：刚刚删除了 venv 文件夹并重新创建了它。

```
 $ deactivate
    $ rm -rf venv
    $ python3 -m venv venv
    $ source venv/bin/activate
    $ pip install -r requirements.txt 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-08-07T01:29:08.033

如果提到的其他答案对您不起作用，请尝试删除您的 pip 缓存并重新安装软件包。我的机器运行 Ubuntu14.04，它位于`~/.cache/pip`. 删除此文件夹对我有用。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2013-01-12T17:26:56.890

当您通过`easy_install`or安装时`pip`，它是否成功完成？什么是完整的输出？您使用的是哪个 python 安装？`sudo`如果您将模块安装到系统目录（如果您正在使用系统 python 安装，可能），您可能需要在安装命令之前使用。您的问题中没有很多有用的信息可供参考，但一些可能会有所帮助的工具包括：

*   `echo $PYTHONPATH`和/或`echo $PATH`：导入模块时，Python 会在这些环境变量（目录列表，`:`分隔的）之一中搜索您想要的模块。导入问题通常是由于这些列表中缺少正确的目录

*   `which python`, `which pip`, or `which easy_install`: 这些会告诉你每个可执行文件的位置。了解可能会有所帮助。

*   **使用[virtualenv](http://www.virtualenv.org/en/latest/)**，就像@JesseBriggs 建议的那样。它可以很好`pip`地帮助您隔离和管理单独 Python 项目的模块和环境。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-09-29T12:06:29.760

我已经解决了我的问题，即相同的库在一个项目（A）中运行良好，但在另一个项目（B）中导入这些相同的库导致错误。我在 Windows 操作系统中使用 Pycharm 作为 IDE。因此，在尝试了许多潜在的解决方案并未能解决问题后，我做了这两件事（删除了“Venv”文件夹，并重新配置了解释器）：

1-在项目（B）中，有一个名为（“venv”）的文件夹，位于外部库/。我删除了那个文件夹。

2-步骤 1（删除“venv”文件夹）导致 Python 解释器配置出错，屏幕顶部显示一条消息，显示“为项目选择的 Python 解释器无效”和“配置 Python 解释器”，选择该链接并将其打开一个新窗口。在“项目解释器”下拉列表中，有一条红色线显示以前的无效解释器。现在，打开这个列表并选择 Python 解释器（在我的例子中，它是 Python 3.7）。按底部的“应用”和“确定”，您就可以开始了。

注意：这可能是我的项目（B）的虚拟环境无法识别已安装和工作的库的问题。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2019-09-24T13:18:50.393

我知道这是一篇超级旧的帖子，但对我来说，我安装了 32 位 python 和 64 位 python 时遇到了问题。卸载 32 位 python 后，一切正常。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-07-04T01:56:18.810

This Works!!!

This often happens when module is installed to an older version of python or another directory, no worries as solution is simple. - import module from directory in which module is installed. You can do this by first importing the python `sys` module then importing from the path in which the module is installed

```
import sys
sys.path.append("directory in which module is installed")

import <module_name> 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2019-10-04T10:08:53.400

如果您使用的是虚拟环境，请使用`pipenv install <module name>`而不是`pip install <module name>`

为我工作。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2019-09-18T15:43:36.993

对我来说，它确保模块的版本与我使用的 Python 版本保持一致。我在一个带有 Python **3.6**的盒子上构建了图像，然后注入到恰好安装了**3.7**的 Docker 图像中，然后敲了敲我的头当 Python 告诉我模块没有安装时......

`36m`对于 Python 3.6 `bsonnumpy.cpython-36m-x86_64-linux-gnu.so`

`37m`对于 Python 3.7`bsonnumpy.cpython-37m-x86_64-linux-gnu.so`

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-08-02T16:45:14.707

解决方案中已经涵盖了大多数可能的情况，只是分享我的情况，我碰巧在一个环境（例如`X`）中安装了一个包，而我正在另一个环境（例如`Y`）中导入该包。因此，请始终确保从安装包的环境中导入包。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2017-01-10T07:09:29.103

我在系统上安装了 2.7 和 3.5 时遇到了这个问题，试图用[Python-Telegram-Bot](https://github.com/python-telegram-bot/python-telegram-bot](asd))测试电报机器人。

在使用 pip 和 pip3 安装后，无论是否使用 sudo，我都无法让它工作。我总是得到：

```
Traceback (most recent call last):
  File "telegram.py", line 2, in <module>
    from telegram.ext import Updater
  File "$USER/telegram.py", line 2, in <module>
    from telegram.ext import Updater
ImportError: No module named 'telegram.ext'; 'telegram' is not a package 
```

正确阅读错误消息告诉我 python 正在当前目录中查找`telegram.py`. 没错，我有一个名为 telegram.py 的脚本，当我调用 .py 时，它是由 python 加载的`import`。

`package.py`结论，请确保在尝试导入时您当前的工作目录中没有任何内容。（并彻底阅读错误信息）。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-12-22T13:02:24.833

正如今天一位朋友为我所做的那样，这对我有帮助（我使用的是 Windows）：

按“设置”->“项目”->“项目解释器”。在右侧的窗口中，左侧有一行标题为“Project Interpreter”。单击此行，它将打开另外几行。

现在按“全部显示”行。将打开一个窗口。在此窗口中，按右上角的小“+”号。

将打开一个新窗口。左边有 4 个选项卡，按最上面的一个，上面写着“Virtualenv Environment”。现在，在右侧的窗口中，标记“现有环境”选项。“解释器”行将变得清晰可见。按行右侧的“...”按钮。

现在，将打开一个浏览窗口。浏览到**您在其中安装 Python 本身的目录**。不是 PyCharm 的那个。当您到达那里时，选择“python.exe”文件并按 OK（窗口将消失）。

再次按 OK（此窗口也会消失）。

现在在此窗口中确保您创建的新行已标记，然后再次按 OK。

现在，所有已安装的包都应该在项目解释器中可见，并且可以被您的程序读取。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2018-05-07T06:42:49.000

我有类似的问题（在 Windows 上），我的根本原因是**防病毒**软件！它具有“自动遏制”功能，可以用某种虚拟机包装正在运行的进程。症状是：`pip install somemodule`在一个命令行窗口中工作正常，`import somemodule`当从另一个进程执行时失败并出现错误

```
ModuleNotFoundError: No module named 'somemodule' 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2022-01-09T11:43:33.163

在我的情况下（WIN10 主机上的 Ubuntu 20.04 VM），我有一个混乱的情况，安装了许多版本的 Python 和共享库的不同点（在文件系统的许多点上安装了 pip）。我指的是 3.8.10 Python 版本。经过多次测试，我发现了一个用谷歌搜索的建议（但是'对不起，我没有链接）。这是我为解决问题所做的：

1.  从 Ubuntu 20.04 VM 上的 shell 会话（在 Home 中，在我的情况下为 /home/hduser），我使用命令“jupyter notebook”启动了 Jupyter Notebook 会话。

2.  然后，当 jupyter 运行时，我打开了一个 .ipynb 文件来给出命令。

3.  首先： pip list --> 给我安装的软件包列表，并且 sympy 不存在（尽管我已经使用“sudo pip install sympy”命令安装了它。

4.  最后使用命令 !pip3 install sympy （在 jupyter notebook 会话中）我已经解决了这个问题，这里是屏幕截图： [![在此处输入图像描述](../Images/cdf9150866ff4c76d1ba6bba0ae96b59.png)](https://i.stack.imgur.com/ySY3K.png)

5.  现在，使用 !pip list 包“sympy”存在，并且正在工作： [![在此处输入图像描述](../Images/a67972a253f8684055f246c97bf3f541.png)](https://i.stack.imgur.com/PlqFB.png)

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2016-04-17T19:08:39.353

我遇到了这个确切的问题，但上面的答案都没有奏效。它让我发疯，直到我注意到 sys.path 在我从父项目导入后有所不同。原来，我使用 importlib 编写了一个小函数，以便导入不在项目层次结构中的文件。坏主意：我忘记了我做过这个。更糟糕的是，导入过程与 sys.path 混为一谈——然后就这样离开了。*非常*糟糕的主意。

解决方案是阻止它，只需将我需要导入的文件放入项目中。另一种方法是将文件放入自己的项目中，因为它需要不时重建，并且重建可能会或可能不会与主项目的重建重合。

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2019-05-09T17:41:29.407

我在使用 Django 时遇到了类似的问题。就我而言，我可以从 Django shell 导入模块，但不能从导入模块的 .py 导入。
问题是我正在从安装模块的**不同 virtualenv运行 Django 服务器（因此，执行 .py）。**

相反，shell 实例在正确的 virtualenv 中运行。因此，它为什么起作用。

* * *

## 回答 #31

> 赞同：-1
> 
> 时间：2019-09-14T18:50:36.513

就我而言，我还必须为超级用户安装模块。

```
sudo su
pip install <module> 
```

显然，在某些情况下，超级用户无法访问普通用户文件。

* * *

## 回答 #32

> 赞同：-1
> 
> 时间：2019-01-04T09:32:42.953

也许有点题外话，但我有问题`import PyYAML`。指出你需要`import yaml`。（猜猜这是经典的rtfm ...）

* * *

## 回答 #33

> 赞同：-1
> 
> 时间：2020-02-03T21:38:05.893

对我有用的最简单的解决方案，我在这个线程中没有看到：

我安装了多个版本的 Python，但试图使用 Python3.7——所以我不得不使用：

`sudo pip3.7 install <package>`

* * *

## 回答 #34

> 赞同：-16
> 
> 时间：2013-01-12T17:18:56.597

如果你学会了如何使用 virtualenv（这非常简单），你就会减少这些问题。您只需获取 virtualenv，然后您将使用本地（项目）包。

它为我解决了很多关于路径、版本等问题。

# android - 如何设置 TextView 的宽度以填充 Horizo ntalScrollView？

> ID：14295681
> 
> 赞同：1
> 
> 时间：2013-01-12T17:07:18.277
> 
> 标签：android, android-layout

我需要一个用户可以用手指水平滚动的 TextView。我创建 Horizo​​ntalScrollView 并添加 TextView。但是我不能设置TextView的宽度，让它完全填满Horizo​​ntalTextView。如何做到这一点？谢谢！

布局 .xml 代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageButton
        android:id="@+id/btnBackspace"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/buttonface_backspace" />

    <HorizontalScrollView
        android:id="@+id/horizontalScrollView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/btnBackspace"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_toLeftOf="@+id/btnBackspace" >

        <TextView
            android:id="@+id/calculatedField"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:textSize="75sp" />

    </HorizontalScrollView>

</RelativeLayout> 
```

# android - 如何在 ViewPager 的布局中传播 ListViews？

> ID：14295683
> 
> 赞同：1
> 
> 时间：2013-01-12T17:07:26.000
> 
> 标签：android, android-listview, android-viewpager

在我的 android 应用程序中，我有一个 ViewPager，其中有 2 个视图，navigation_activity 和另一个变量布局。当应用程序启动时，它会在 home_activity 上启动（这是启动的变量布局）但是如果你向左滑动到导航栏并单击一个按钮，我需要变量布局从主视图切换到另一个视图......现在我有一个这样的系统：

```
public class ViewPagerAdapter extends PagerAdapter
{
static int iFocusedActivity = R.layout.activity_home;

public int getCount()
{
    return 2;
}

public Object instantiateItem(View collection, int position) 
{            
    LayoutInflater inflater = (LayoutInflater) collection.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    int resId = 0;
    switch (position) 
    {
    case 0:
        resId = R.layout.activity_navigation;
        break;
    case 1:
        resId = iFocusedActivity;
        break;
    }
    View view = inflater.inflate(resId, null);
    ((ViewPager) collection).addView(view, 0);
    return view;
}

public boolean isViewFromObject(View arg0, Object arg1)
{
    return arg0 == ((View) arg1);
}

public static void setFocus(int iActivity)
{
    iFocusedActivity = iActivity;
}

public void destroyItem( View pager, int position, Object view )
{
    ((ViewPager)pager).removeView( (View)view );
} 
```

}

它很好地改变了视图，（调用 setFocus() 并为寻呼机提供了一个新的 adpater）问题是我有一个名为 layout_verblist 的布局，它需要在寻呼机采用布局时传播，但很简单在按钮单击上调用代码不会做任何事情......这被证明是一个巨大的问题。如何在 Viewpager 中传播布局列表？

# jqplot - Getting the color of a datapoint when in the jqplotMouseMove event

> ID：14295689
> 
> 赞同：1
> 
> 时间：2013-01-12T17:07:47.030
> 
> 标签：jqplot

I have an event handler declared as:

```
.on('jqplotMouseMove', function (e, gridpos, datapos, neighbor, plot) 
```

If neighbor is true I need to find the color of the datapoint they clicked on. Is there some method I can call that will give me that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T00:48:51.150

You can get the seriesIndex from the neighbor variable, which you can use to get the color.

```
$('#chart1').bind('jqplotMouseMove',
   function (e, gridpos, datapos, neighbor, plot) {                
     if (neighbor != null){
        alert(plot1.series[neighbor.seriesIndex].color);
     }
  }
); 
```

Fiddle [here](http://jsfiddle.net/SSRVj/3/).

# ruby-on-rails - 我将如何将 Rails 控制台集成为 Rails 应用程序中的用户界面

> ID：14295691
> 
> 赞同：1
> 
> 时间：2013-01-12T17:07:57.887
> 
> 标签：ruby-on-rails, ruby-on-rails-3, backbone-views

我正在开发一个 Rails 应用程序，该应用程序要求允许用户对后端数据库进行所描述的广告自由形式探索。我在应用程序中使用了很多范围，并且已经开始创建一个相当下降的 DSL。

我希望创建一个几乎是 irb 或 rails 控制台的视图/用户界面。这样用户就可以去城里探索表格查看 DSL 或 ruby​​/rails 方法（Users.all）。我还想对可以使用的命令/方法进行一些保护，但作为第一步，它会很高兴知道类似 IRB 的视图的概念是否可行。如果您有任何反映我正在寻找的示例或网站，我很想听听它们，或者如果您知道实现这一目标的方法/宝石会更好。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:23:06.033

以下是一些做类似事情的开源项目：

[https://github.com/jwo/ruby-fiddle-web](https://github.com/jwo/ruby-fiddle-web)

[https://github.com/charliesome/better_errors](https://github.com/charliesome/better_errors)

# c# - 集合被修改错误

> ID：14295703
> 
> 赞同：0
> 
> 时间：2013-01-12T17:08:48.600
> 
> 标签：c#, asp.net-mvc, ef-code-first, one-to-many

我在删除对象时遇到问题，因为它与其他对象有关系。我正在使用 MVC4 和 Code First 数据库方法。

这是我的模型课：

```
 public class Product
{
    public Product() { }

    public int Id { get; set; } 
    public string Name { get; set; }
    public decimal Price { get; set; }
    public bool Istaxable { get; set; }
    public string DefaultImage { get; set; }
    public IList<Feature> Features { get; set; }
    public IList<Descriptor> Descriptors { get; set; }
    public IList<Category> Categories { get; set; }
    public IList<Image> Images { get; set; }

    public Product(string name, decimal price, bool istaxable, string defaultImageFile)
    {
        Name = name;
        Price = price;
        Istaxable = istaxable;
        DefaultImage = defaultImageFile;
        Categories = new List<Category>();
        Features = new List<Feature>();
        Descriptors = new List<Descriptor>();
        Images = new List<Image>();
    }
}

 public class Image
{

    public Image() { }

    public Image(string thumb, string full) : this(thumb, full, false) { }

    public Image(string thumb, string full, bool isDefault)
    {
        Thumb = thumb;
        IsDefault = isDefault;
        Full = full;
    }

    public int Id { get; set; }
    public string Thumb { get; set; }
    public string Full { get; set; }
    public bool IsDefault { get; set; }
    public string Description { get; set; }

} 
```

这是我的产品控制器中的代码：

```
// DELETE /api/product/5
    public HttpResponseMessage Delete(int id)
    {

        var prd = Uow.Products.GetProductByIdIncludeAll(id);

        var images = prd.Images;
        if ( images.Count > 0 )
        {
            foreach(Image i in images)
            {
                Uow.Images.Delete(i);
            }
        }

        var descriptors = prd.Descriptors;
        if (descriptors.Count > 0)
        {
            foreach (Descriptor d in descriptors)
            {
                Uow.Descriptors.Delete(d);
            }
        }

        var features = prd.Features;
        if (features.Count > 0)
        {
            foreach (Feature f in features)
            {
                Uow.Features.Delete(f);
            }
        }

        Uow.Commit();

        Uow.Products.Delete(id);
        Uow.Commit();

        return new HttpResponseMessage(HttpStatusCode.NoContent);
    } 
```

Uow 是一个我的存储库类，其结构为一个工作单元。

当我尝试运行应用程序时，它会删除关系对象，但不会删除产品对象，因为它说 Collection 已被修改。

我应该如何重构此代码以使其正常工作É

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:41:17.210

使用时不能更改底层集合[`foreach`](http://msdn.microsoft.com/en-US/library/ttw7t8t6%28v=VS.100%29.aspx)，我建议您使用基本`for`语句。

从上面的 MSDN 链接：

> foreach 语句用于遍历集合以获取您想要的信息，但不能用于从源集合中添加或删除项目以避免不可预知的副作用。如果您需要从源集合中添加或删除项目，请使用 for 循环

# xcode - 如何在 Xcode 中为旧版本的 OS X 编程

> ID：14295704
> 
> 赞同：0
> 
> 时间：2013-01-12T17:09:08.640
> 
> 标签：xcode, macos, osx-lion, osx-snow-leopard

我目前在我的计算机上运行 Mac OSX 10.7.5 (Lion) 以及 Xcode 4.5.1。我已经制作了一个可以在我的计算机上运行的应用程序，并且应该也可以在 Mountain Lion 上运行，但是我认识并希望给它的每个人都拥有 OSX 10.5.8 或 10.6.8 (Snow Leopard)。有什么方法可以转换我的应用程序以使其在 Snow Leopard 上兼容？（是的，我已经尝试过更改部署目标）。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:10:57.380

您可以通过更改一些设置来设置向后兼容性

1.  将 Base SDK 设置为 Mac 的当前版本（例如 10.7）

2.  将部署 SDK 设置为旧版本（例如 1.4）

![在此处输入图像描述](../Images/ddef53457d560e19f1b0da91bc967e4f.png)

![在此处输入图像描述](../Images/caf0da2726315a0d0c8aaaabb0277be9.png)

# entity-framework-5 - Fluent API - one to many

> ID：14295705
> 
> 赞同：13
> 
> 时间：2013-01-12T17:09:08.523
> 
> 标签：entity-framework-5

I cannot seem to find a one-to-many relationship syntax in the fluent API.

As an example I have two tables as below

**User**

```
Id
Name 
```

**UserHistory**

```
Id
UserId
Date 
```

In the classes I have the following

```
public class User 
{
     public int Id { get; set; }
     public virtual ICollection<UserHistory> Histories { get; set; }
}

public class UserHistory
{
     public int Id { get; set; }
     public int UserId { get; set; }
     public DateTime Date { get; set; }
} 
```

I have tried the following but I am not sure if its actually correct.

```
modelBuilder.Entity<User>()
       .HasRequired(w => w.Histories)
       .WithMany();

modelBuilder.Entity<User>()
       .HasMany(f => f.Histories)
       .WithOptional()
       .HasForeignKey(f => f.UserId); 
```

What is the correct syntax for one-to-many relationship?

Technically I could break it down to a many-to-many by adding a new table but I didn't want to introduce another table.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-12T17:33:55.933

In your model a `User` entity **has many** `Histories` **with** each history having a **required** `User` and the relationship **has** a **foreign key** called `UserId`:

```
modelBuilder.Entity<User>()
   .HasMany(u => u.Histories)
   .WithRequired()
   .HasForeignKey(h => h.UserId); 
```

(The relationship must be required (not optional) because the foreign key property `UserId` is not nullable.)

# c# - MVC4重命名和更改_ViewStart的位置

> ID：14295708
> 
> 赞同：0
> 
> 时间：2013-01-12T17:09:16.207
> 
> 标签：c#, asp.net-mvc, single-page-application

我正在制作一个单页应用程序。不想使用 _ViewStart。我喜欢将我的起始页放在项目目录的根目录中，并将其重命名为 index.html。这似乎是可能的。但是如何？请在发布前查看这些项目。

[CodeCamper 项目](https://github.com/NicholasMurray/CodeCamper)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:33:28.780

将 web.config 中的这些行设置为 true。

```
<add key="webpages:Enabled" value="true" /> 
```

# html - 用 Sass 自动生成文本图片和对应的 CSS？

> ID：14295717
> 
> 赞同：0
> 
> 时间：2013-01-12T17:09:57.127
> 
> 标签：html, css, imagemagick, sass

tl;dr：目前 Sass 是否有任何类似的功能，获取 ImageMagick 生成的图像并将其放入图像文件夹并自动指定其宽度和高度？

```
h2.anthony {
    /* image replacement CSS here */
    @magick-image: "convert -fill blue -font Candice -pointsize 72 label:Anthony header-anthony.png";
} 
```

（ImageMagick 命令基于此示例：[http](http://www.imagemagick.org/Usage/text/#label) ://www.imagemagick.org/Usage/text/#label ）

结果 CSS：

```
h2.anthony {
    /* image replacement CSS here */
    background: url(img/header-anthony.png) no-repeat;
    width: 275px;
    height: 79px;
} 
```

我必须使用图像而不是 Web Fonts、Cufon、sIFR 等，因为该网站是中文的，而且中文字体很大。

背后故事：

我正在一个新网站上工作，许多页面中有很多文本，它们的标题文本应该以特定字体显示，并带有渐变效果。

现在，即使我使用 CSS sprites 并将所有具有所需效果的标题文本放入同一个图像中，我仍然必须测量每行的宽度并手动将其输入到我的样式表中。随着页面的添加或删除或最长文本行的长度发生变化，它变得更加麻烦。

我正在寻找自动化的方法。我已经想出了如何使用 ImageMagick 重新创建效果，这样我就可以使用一个命令生成每个标题图像，但我仍然需要自己测量图像的宽度。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:16:07.663

恰好有一个 Compass 扩展可以让您使用 ImageMagick。我从未使用过它，但它看起来很有趣。

[https://github.com/StanAngeloff/compass-magick](https://github.com/StanAngeloff/compass-magick)

# c# - 在 LinkedList 中查找类

> ID：14295718
> 
> 赞同：2
> 
> 时间：2013-01-12T17:10:07.847
> 
> 标签：c#, linked-list

我正在制作这个 2-D 游戏，我希望能够在其中构建结构。玩家必须能够从某些结构中受益。今天的比赛是这样的：

![在此处输入图像描述](../Images/a77a58008b03cd486f5847e1e56b6f71.png) （蓝点是玩家，其他点是ais）

我创建了一个名为 Structure 的类和其他三个继承自 Structure 的类。这些类或多或少是空的。游戏的瓷砖有自己的名为 Tile 的类。在这堂课中，我写了一些东西，但感兴趣的代码是这样的：

```
public LinkedList<Structure> Structures = new LinkedList<Structure>(); 
```

当我构建一个结构（例如壁炉）时，代码如下所示：

```
Bundle.map.tile[Bundle.player.X, Bundle.player.Y].Structures.
    AddFirst(new Fireplace()); 
```

我不确定的部分是如何检查列表是否包含例如壁炉（这是一个名为 Fireplace 的类）或任何其他建筑物。例如，如果玩家在瓷砖上发现壁炉，他​​/她将重新获得温暖。这不起作用。也许我对所有这一切都有错误的方法，无论哪种情况，请为我提供一个代码示例。

答案结论：

```
bool anyFireplace = Bundle.map.tile[Bundle.player.X, Bundle.player.Y].Structures.OfType<Fireplace>().Any();
if (anyFireplace)
{
    Warmth = MaxWarmth;
}
else
{
if (Warmth > 0)
{
    Warmth--;
}
else
{
    HP--;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T19:30:59.763

我建议使用`is`关键字。它用于检查变量是否具有某种类型。例如：

```
object example = "Hello World!";
bool isString = example is string; // Evaluates to true 
```

你可以在你的代码中使用它：

```
foreach (Structure s in Structures)
{
    if (s is FirePlace)
    {
        // Warmup the player
    }
} 
```

另外，我建议使用`List<T>`而不是`LinkedList<T>`，因为`List<T>`（通常）[要快得多](https://stackoverflow.com/questions/169973/when-should-i-use-a-list-vs-a-linkedlist)。

正如您可能从其他一些答案中收集到的那样，多种方式通向罗马，有多种方式。然而，根据[这个](http://gist.github.com/4520437)测试，`is`这样做的方式优于所有其他建议的方式（感谢 Hogan btw 的这个测试）：

> OfType 时间：.6702958，GetType 时间：.2268946，属性时间：.1400208，Is 时间：.1112995

这种方式`is`更清洁恕我直言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T20:03:58.003

例如，您可以使用，`Enumerable.OfType<TResult>()`如下`Enumerable.Any(TSource)`所示：

```
LinkedList<Structure> structures = new LinkedList<Structure>();

// Add Different Types of Structures

Boolean anyFireplace = structures.OfType<Fireplace>().Any(); 
```

只要确保你有：

```
using System.Linq; 
```

在源代码顶部的 using 指令和对 System.Core 程序集模块的引用中。如果您需要知道 LinkedList 中壁炉的确切数量，也可以使用 Count() 方法，否则 Any() 在 Linq 对象中更有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T17:17:14.503

您可以为此使用 LINQ to Objects：

```
LinkedList<Structure> list = ...

List<Fireplace> fireplaces = list.OfType<Fireplace>().ToList(); 
```

`fireplaces`然后是类型列表中所有元素的列表`Fireplace`- 如果不存在，则为空列表。

如果您只想知道一个是否存在，您可以将其修改为：

```
bool hasFirplace = list.OfType<Fireplace>().Any(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T17:18:49.683

也许让类名描述对象是不可取的。您将不得不使用有点慢的反射。而且你只会得到一个描述（类名）。你会想要的不止一个。您可能需要考虑这样的基础对象：

```
public abstract class MapObject
{
   public int x,y;  // object location
   public string myclass;  // object class
   public string mytype;   // object type
   // etc

   // constructor
   public MapObject(string myclass, string mytype);

} 
```

那么壁炉可能看起来像这样

```
public class FirePlace : MapObject
{
   public FirePlace() 
       : base("Builtin furniture", "Fireplace") { }
   // etc
} 
```

现在您可以遍历所有 MapObjects 的 mytype = "Fireplace"

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-12T17:16:57.187

您可以使用 Type 来了解：

```
foreach(var s in Structures)
{
  var type = s.GetType();
  if(type == typeof(FirePlace)
  {
    (your code here)
  }
} 
```

对于单一方法

```
public bool HasType<T>(IEnumerable<T> list, Type t)
{
    return list.Any(e=>e.GetType() == t);
} 
```

用法应该是这样的：

```
if(HasType(Structures,typeof(FirePlace))
{
  (code here)
} 
```

最后你可以把它变成一个扩展方法，但我把这个选项留给你；）

# c# - 每页绕过 ASP.NET 的一个 RUNAT SERVER FORM

> ID：14295720
> 
> 赞同：1
> 
> 时间：2013-01-12T17:10:14.823
> 
> 标签：c#, asp.net, forms, runatserver

ASP.NET 限制使用超过 1 个`runat="server"`表单。

我有一个**Master Page**，目前没有表格。

我还有许多其他页面，有些带有表单（Register.aspx - Login.aspx），有些没有表单。

我想在主服务器中添加一个**注销按钮**（用户登录后）。

这很正常，**注销按钮**应该始终存在。

但是要使用这个**ASP 按钮控制器**，我需要在母版页中使用一个**表单。**

意味着，我将无法访问具有表单的其他页面，因为我会收到错误消息。

我已经有其他想法可以绕过这个。

1-使用**JQuery**使用**Ajax**加载**处理**程序，清除会话。

 **2-使注销**链接**看起来像一个按钮，单击它以加载另一个**.aspx页面**，在页面加载方法中，清除会话，然后重定向，听起来像第一个......

3- 将其设为将我带到同一页面的链接 (Default.aspx?logout=1) <- 并在页面加载方法中检查此**参数**，如果存在，请清除会话。

这些是好方法吗？有没有更好的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:11:02.640

请解释为什么您的母版页中不能有该表单并使用该母版页删除这些页面中的所有表单？无论如何，这是 ASP.NET 中最常见的模式。

如果您由于某种原因不能这样做，我会选择2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:21:59.520

您不需要绕过它，只需将整个包裹在`asp:ContentPlaceHolder`里面，`form runat="server"`这样您就可以在每一页上都有表格了。

在母版页中

```
<form runat="server">
    <asp:ContentPlaceHolder id="MainBodyContent"></asp:ContentPlaceHolder>
</form> 
```**

# ruby-on-rails - 使用新的 HABTM 关系和未注册用户的 Rails 联系表

> ID：14295722
> 
> 赞同：0
> 
> 时间：2013-01-12T17:10:33.453
> 
> 标签：ruby-on-rails, has-and-belongs-to-many

我是 Rails 的新手，我正在尝试执行以下操作，但我觉得我没有安全地做到这一点：

我网站的访问者无需注册即可查看用户的个人资料页面并与他们联系。用户和访问者之间存在 has_and_belongs_to_many 关系。当访问者联系用户时，我想在我的访问者表中使用他们提交的信息创建一个新记录，并在 users_visitors 表中创建一个新关系，以便稍后向用户显示提交的信息。到目前为止我所拥有的：

**楷模：**

```
class User < ActiveRecord::Base
has_and_belongs_to_many :visitors

class Visitor < ActiveRecord::Base
has_and_belongs_to_many :users 
```

**浏览量：user/profile.html.erb**

```
#this is at example.com/user/id
<%= form_for Visitor.new, :url => contact_path, :html => { :method => :post } do |f| %>
<%= f.label :email %>
<%= f.text_field :email %>
<%= submit_tag("Submit") %>
<% end %> 
```

**路线.rb**

```
#this will just point to a confirmation page
post '/contact',  to:  'visitors#contact', :as => :contact 
```

我迷失了两个部分：我如何传递/使用创建关系所需的用户 ID，以及控制器（或模型）应该是什么样子来创建这个新关系？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:21:25.990

首先，我认为这条路线不是最好的

```
post '/contact',  to:  'visitors#contact', :as => :contact 
```

在我看来，这个`contact`动作应该放在你的`Users`控制器上，而不是你的`Visitors`控制器上；毕竟，这是**`User`**你联系的，对吧？

相反，您将受益于类似的路线*（我没有使用资源丰富的路线，因为我不知道您的其余部分是什么`config/routes.rb`样的）*

```
post '/users/:id/contact',  to:  'users#contact', :as => :contact 
```

你的`contact`方法`UsersController`可能看起来像

```
def contact
  @user = User.find(params[:id]) # this is how you get the user the visitor is contacting

  @visitor = Visitor.create(params[:visitor])
  @visitor.users << @user # this associates the User with the Visitor
end 
```

以上应该可以工作，但只是一个简化的示例*（我没有处理验证；我没有将访问者重定向到某个地方；我实际上并没有**联系**用户）* - 您需要充实此操作以满足您的需要。

# objective-c - 更换 UIViewController 的 UIView 时出现异常

> ID：14295732
> 
> 赞同：0
> 
> 时间：2013-01-12T17:11:00.623
> 
> 标签：objective-c, uiview, uiviewcontroller

所以你好我正在尝试在 UIViewController 中加载不同的 UIViews 像这样的行 `self.view=someView;`

所以这里有一些代码

```
- (void)viewDidLoad
{
    [self createMenuView];
}

- (void)createMenuView
{
    UIView *viewMenu=[[UIView alloc] initWithFrame:[UIScreen mainScreen].applicationFrame];
    viewMenu.backgroundColor=[UIColor grayColor];

    for(int i=0;i<3;i++){
        UIButton *Button=[UIButton buttonWithType:UIButtonTypeCustom];
        [Button setFrame:CGRectMake(0,0,320,80)];//creating it's frame
        [Button setCenter:CGPointMake(160,i*80+200)];//now place frame where we need
        [Button setTitle:[[NSString alloc] initWithFormat:@"%d",i] forState:UIControlStateNormal];//write k to title
        [Button setTag:[[[NSString alloc] initWithFormat:@"%d",i] intValue]];//write xy to tag
        [Button addTarget:self action:@selector(gameButtonClicked:) forControlEvents:UIControlEventTouchUpInside];//-event
        [Button setBackgroundImage:[UIImage imageNamed:@"blue.jpg"] forState:UIControlStateNormal];//set background
        [Button setAdjustsImageWhenHighlighted:FALSE];//disable tinting buttons while selected
        [viewMenu addSubview:Button];
    }
    self.view=viewMenu;
}

- (void)createGameView
{
    //here is just creation of a gameView which get's a whole lots of buttons
}

- (void)menuButtonClicked:(UIButton*)button
{
    [self createGameView];
} 
```

如果我 `[self createGameView];`在 viewDidLoad 中这样做，那没关系，但如果它来自按钮，那么我会得到异常帮助

这就是我在输出中得到的 - 不确定它是否有帮助

```
013-01-12 18:54:19.681 Barley Break[11235:c07] *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 3 beyond bounds [0 .. 2]'
*** First throw call stack:
(0x1c90012 0x10cde7e 0x1c320b4 0x4963 0x47d2 0x10e1705 0x18920 0x188b8 0xd9671 0xd9bcf 0xd8d38 0x4833f 0x48552 0x263aa 0x17cf8 0x1bebdf9 0x1bebad0 0x1c05bf5 0x1c05962 0x1c36bb6 0x1c35f44 0x1c35e1b 0x1bea7e3 0x1bea668 0x1565c 0x242d 0x2355 0x1)
libc++abi.dylib: terminate called throwing an exception
(lldb) 
```

UPD1：尝试使用`[self setView:someView];`而不是`[self.view=someView];`- 相同的异常

UPD2：这里是创建游戏视图 ps:randExcludable - 只是 arc4random()

```
- (void)createGameView
{
    UIView *viewGame=[[UIView alloc] initWithFrame:[UIScreen mainScreen].applicationFrame];
    viewGame.backgroundColor=[UIColor grayColor];

    int k=0;
    int n=4;
    int t=0,q=0;
    NSMutableArray *yEx=[[NSMutableArray alloc] initWithObjects:[[NSString alloc] initWithFormat:@"%d",5], nil],*xEx=[[NSMutableArray alloc] initWithObjects:[[NSString alloc] initWithFormat:@"%d",5], nil];

    for(int i=0;i<4;i++){
        t=[self randExclludable:n arrayToExclude:yEx];
        for(int j=0;j<4;j++){
            q=[self randExclludable:n arrayToExclude:xEx];
            UIButton *Button=[UIButton buttonWithType:UIButtonTypeCustom];//Creating button of custom type
            [Button setFrame:CGRectMake(0,0,80,80)];//creating it's frame
            [Button setCenter:CGPointMake(q*80+40,t*80+120)];//now place frame where we need
            [Button setTag:[[[NSString alloc] initWithFormat:@"%d",(t*10)+q] intValue]];//write xy to tag
            [Button setTitle:[[NSString alloc] initWithFormat:@"%d",k] forState:UIControlStateNormal];//write k to title
            [Button addTarget:self action:@selector(gameButtonClicked:) forControlEvents:UIControlEventTouchUpInside];//-event
            [Button setBackgroundImage:[UIImage imageNamed:@"blue.jpg"] forState:UIControlStateNormal];//set background
            if(i==0 && j==0){
                [Button setBackgroundImage:[UIImage imageNamed:@"gray.jpg"] forState:(UIControlStateNormal | UIControlStateDisabled)];//special background for the zero button
                [Button setEnabled:NO];//disable zero button
                [Button setTitle:@"" forState:UIControlStateNormal];//and set title of zero button to ""
            }
            [Button setAdjustsImageWhenHighlighted:FALSE];//disable tinting buttons while selected
            //[self.view addSubview:Button];//creating subview on the desired view
            //[self.buttons16 addObject:Button];//place button in array
            [viewGame addSubview:Button];
            Button=nil;
            k++;
            [xEx addObject:[[NSString alloc] initWithFormat:@"%d",q]];
        }
        [xEx removeAllObjects];
        [yEx addObject:[[NSString alloc] initWithFormat:@"%d",t]];
    }
    self.view=viewGame;
    //[self setView:viewGame];
    //[self.view addSubview:viewGame];
    viewGame=nil;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:23:07.073

用这个

```
 [Button setTitle:[NSString stringWithFormat:@"%d",i] forState:UIControlStateNormal];//write k to title
     [Button setTag:i];//write xy to tag 
```

而不是这个

```
 [Button setTitle:[[NSString alloc] initWithFormat:@"%d",i] forState:UIControlStateNormal];//write k to title
    [Button setTag:[[[NSString alloc] initWithFormat:@"%d",i] intValue]];//write xy to tag 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:38:45.943

刚才我看到这个有多愚蠢，现在用 UINavigationToolbar 做同样的事情并交换整个 UIViewController 问题是我给了菜单按钮游戏按钮功能，由于更改尚未创建的游戏视图而导致错误

# networking - 如何在 omnet++ 上模拟视频流量

> ID：14295733
> 
> 赞同：0
> 
> 时间：2013-01-12T17:11:01.363
> 
> 标签：networking, video, simulation, omnet++

我是 Omnet++ 的新手，想在 omnet++ 上模拟视频流量。
我应该使用哪个库？
我找到[了 VideoInterface](http://www.omnetpp.org/omnetpp/doc_details/2128-videointerface)，但不确定这是不是最好的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T19:45:58.050

如果您只需要模拟大致恒定的比特率，这取决于您所说的“videoTraffic”是什么意思，您可以使用带有内置 UDP 应用程序的库存 INET，这些应用程序可以很好地生成所需的流量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-31T07:52:07.260

最近的 INET Framework 中有一个名为 VideoStream 的 UDP 应用程序。您可以创建包含 UDP 应用程序模块的节点对。然后，您只需为其中一个节点分配 VideoStreamCli 应用程序，并在另一个节点中分配具有所有必要值的 VideoStreamSrv 应用程序。如果您可以提供您拥有的拓扑，也许有人可以为您提供更多帮助

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-05T12:05:01.130

我使用 OMNET++ 来模拟无线传感器网络。图形模拟很好。

请参阅 OMNET++ 文档以了解其 NED（模块）语言。您可以定义节点并轻松构建流量。

据我所知，不需要任何外部库（除非你想要它更花哨）。

希望能帮助到你 ：）

# iphone - 为什么 UIViewContentModeScaleAspectFit 在 UIScrollView 内的 UIImageView 中不起作用？见附图

> ID：14295736
> 
> 赞同：0
> 
> 时间：2013-01-12T17:11:52.400
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我无法理解......它以前用于我使用旧版 IOS 框架制作的其他应用程序中

检查下面的代码：

如果我将 contentMode 更改为 Left 它会显示图像...

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController
{
    IBOutlet UIScrollView* scrBook;
}

@property (nonatomic, retain) IBOutlet UIScrollView* scrBook;

@end

@synthesize scrBook;

- (void)viewDidLoad
{
    [super viewDidLoad];

    CGRect frame;
    frame.origin.x = 0;
    frame.origin.y = 0;
    frame.size = self.scrBook.frame.size;

    UIImageView *subview = [[UIImageView alloc] initWithFrame:frame];

    //subview.contentMode = UIViewContentModeLeft;
    subview.contentMode = UIViewContentModeScaleAspectFit;

    UIImage *currentImage = [UIImage alloc];
    currentImage = [UIImage imageNamed:@"model.jpg"];

    subview.image = currentImage;

    [self.scrBook addSubview:subview];

    self.scrBook.contentSize
    = CGSizeMake(self.scrBook.frame.size.width * 1, self.scrBook.frame.size.height);
} 
```

UIViewContentModeLeft：

![UIViewContentModeLeft](../Images/e6b18f917bd3cf7cf2ca80070793dc6d.png)

UIViewContentModeScaleAspectFit：

![UIViewContentModeScaleAspectFit](../Images/8c7a7009af841c0aa2bbae618551cf7b.png)

更新：我最后一次尝试是将 xcode 更新到 4.5.2，但它也不起作用，令人沮丧......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T08:52:15.280

不是您问题的答案，只是一些优化...

```
UIImage *currentImage = [UIImage alloc];
currentImage = [UIImage imageNamed:@"model.jpg"]; 
```

不需要第一行，只需执行以下操作：

```
UIImage *currentImage = [UIImage imageNamed:@"model.jpg"]; 
```

还，

```
self.scrBook.contentSize
= CGSizeMake(self.scrBook.frame.size.width * 1, self.scrBook.frame.size.height); 
```

只能...

```
self.scrBook.contentSize = self.srcBook.frame.size; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T00:43:55.107

我找到了解决方案，但仍然不知道原因，我将 XCode 升级到 4.5.1 到 4.5.2 仍然没有。

我使用 4.5.2 和完全相同的代码复制了一个在旧版本的 xcode（早于 4.5.1）中制作的旧项目，它运行良好....

很奇怪..我感觉很糟糕，我花了这么多小时试图找到解决方案......

# java - 如何在一个数据库中为 Android 应用程序创建和操作两个表

> ID：14295738
> 
> 赞同：1
> 
> 时间：2013-01-12T17:12:12.170
> 
> 标签：java, android, database, sqlite

我正在为 Android 开发一个简单的购物应用程序。该应用程序需要两个 SQLite 数据库表，但我没有同时创建它们（最初只为 MainActivity 创建了一个）。在网上搜索后，我了解到我们必须使用 SQLiteOpenHelper 类同时为数据库创建多个表。这种说法是真的吗？

如果不是，请检查下面的代码并为我的错误提出解决方案 -

该应用程序有两个活动，**MainActivity.java**和**ItemsActivity.java**，一个 DatabaseAdapter( **DBAdapter.java** ) 类。DatabaseAdapter 类有两个表，MainActivity 类使用名为**TABLE_NAME**的第一个表，ItemsActivity 类使用 DBAdapter 类中名为**TABLE_NAME_ITEMS**的第二个表。

ItemsActivity.java 是我将项目插入到 DBAdapter 中名为 TABLE_NAME_ITEMS 的第二个表中的类。这是**ItemsActivity.java**类

```
public class ItemsActivity extends Activity implements OnClickListener{
    DBAdapter dbAdapterItems;
    String listId;
    //Cursor cItems;
    //MyItemsAdapter adapter;
    int position;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.items_activity);

        dbAdapterItems = new DBAdapter(this);
        dbAdapterItems.openDatabase();

        Intent itemsActivity = getIntent();
        Bundle b  = itemsActivity.getExtras();
        listId = b.getString("LIST_ID");

        Button addItem = (Button) findViewById(R.id.addItemButton);
    /*  ListView itemslist = (ListView)findViewById(R.id.itemsListView);

        cItems = dbAdapter.getAllItemRecords(listId);
        adapter = new MyItemsAdapter();
        itemslist.setAdapter(adapter);

        **/
        addItem.setOnClickListener(this);

    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

        // TODO Auto-generated method stub
        final Dialog d = new Dialog(ItemsActivity.this);
        d.setTitle("Add Item");
        d.setContentView(R.layout.customdialog);
        d.show();

        final EditText itemNameEt = (EditText) d.findViewById(R.id.dialogEditText);
        Button addButton = (Button) d.findViewById(R.id.dialogAddButton);
        Button cancelButton = (Button) d.findViewById(R.id.dialogCancelButton);         

        addButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                String itemName = itemNameEt.getText().toString();
                dbAdapterItems.insertItemsRecord(itemName,listId);
                Toast.makeText(ItemsActivity.this, "Item name: "+itemName+" added", Toast.LENGTH_LONG).show();
                d.dismiss();
            }
        });
        cancelButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                d.dismiss();
                Toast.makeText(ItemsActivity.this, listId, Toast.LENGTH_LONG).show();
            }
        });

    }
/** 
    class MyItemsAdapter extends BaseAdapter{

        @Override
        public int getCount() {
            // TODO Auto-generated method stub
            return cItems.getCount();
        }

        @Override
        public Object getItem(int arg0) {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public long getItemId(int arg0) {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public View getView(int position, View view, ViewGroup parent) {
            // TODO Auto-generated method stub
            if(view==null){
                LayoutInflater inflater = getLayoutInflater();
                view = inflater.inflate(R.layout.custom_items_row, parent, false);
            }

            TextView itemsRowTv = (TextView) view.findViewById(R.id.customitemsrowTV);

            cItems.moveToPosition(position);
            String itemName = cItems.getString(1);
            itemsRowTv.setText(itemName);

            return view;
        }

    }
**/
} 
```

这是**DBAdapter.java**类

```
public class DBAdapter {

    String DATABASE_NAME = "SeenuDB";
    String TABLE_NAME = "listTable"; //First Table Name
    int DATABASE_VERSION = 1;

    String TABLE_NAME_ITEMS = "itemsTable"; //Second Table Name
    String COLUMN_ITEMS_ONE = "rowitemsid";
    String COLUMN_ITEMS_TWO = "itemname";
    String COLUMN_ITEMS_THREE = "listid";

    public static final String COLUMN_ONE = "rowid";
    public static final String COLUMN_TWO = "listname";

    SQLiteDatabase db;
    Context context;
    DBHelper dbHelper;

    String CREATE_TABLE = "create table if not exists listTable(rowid integer primary key autoincrement,listname text not null)";
    String CREATE_TABLE_ITEMS = "create table if not exists " +TABLE_NAME_ITEMS+ "(rowitemsid integer primary key autoincrement,itemname text not null,listid text not null);";

    public DBAdapter(Context c) {
        // TODO Auto-generated constructor stub
        this.context = c;
        dbHelper = new DBHelper(context);
    }

    class DBHelper extends SQLiteOpenHelper{

        public DBHelper(Context context) {
            // TODO Auto-generated constructor stub
            super(context,TABLE_NAME,null,DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            // TODO Auto-generated method stub
            db.execSQL(CREATE_TABLE);
            db.execSQL(CREATE_TABLE_ITEMS);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            db.execSQL("DROP TABLE IF EXISTS "+TABLE_NAME);
            db.execSQL("DROP TABLE IF EXISTS "+TABLE_NAME_ITEMS);
            onCreate(db);
        }

    }

    DBAdapter openDatabase(){
        db = dbHelper.getWritableDatabase();
        return this;
    }

    void closeDatabase(){
        dbHelper.close();
    }

    long insertRecord(String listname){
        ContentValues con = new ContentValues();
        con.put(COLUMN_TWO, listname);
        return db.insert(TABLE_NAME, null, con);
    }

    Cursor getAllRecords(){
        String[] columns = {COLUMN_ONE,COLUMN_TWO};
        return db.query(TABLE_NAME, columns, null, null, null, null, null); 
    }

    void deleteAllRecords(){
        db.delete(TABLE_NAME, null, null);
    }

    void deleteOneRecord(String rowid){
        db.delete(TABLE_NAME, rowid+"="+COLUMN_ONE, null);
    }

    long insertItemsRecord(String itemname,String listid){
        ContentValues con = new ContentValues();
        con.put(COLUMN_ITEMS_TWO, itemname);
        con.put(COLUMN_ITEMS_THREE, listid);
        return db.insert(TABLE_NAME_ITEMS, null, con);
    }

    Cursor getAllItemRecords(String listid){
        String[] columns = {COLUMN_ITEMS_ONE,COLUMN_ITEMS_TWO,COLUMN_ITEMS_THREE};
        return db.query(TABLE_NAME_ITEMS, columns, listid+"="+COLUMN_ITEMS_THREE, null, null, null, null);
    }
} 
```

使用第一个表我能够执行所有 CURD 操作，但是在使用第二个表执行插入操作时，我在 LogCat 中收到错误 no such tableitesTable。

希望读者理解我的问题，请为我提供解决方案..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:20:29.643

*我们必须使用 SQLiteOpenHelper 类同时为数据库创建多个表*

您可以随时更改数据库方案。只需增加`DATABASE_VERSION`触发`onUpgrade`回调，您就可以在其中执行与架构更改相关的所有事情。

在您的代码中，您可以设置`DATABASE_VERSION`为 2，它应该可以正常工作。

```
int DATABASE_VERSION = 2; 
```

但它会重新创建整个数据库，您将丢失所有现有数据。您可以以更合适的方式处理这种情况：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    if (oldVersion == 1 && newVersion == 2) {
        db.execSQL(CREATE_TABLE_ITEMS);
    }
} 
```

# php - php将用户图像转换为jpg

> ID：14295740
> 
> 赞同：0
> 
> 时间：2013-01-12T17:12:18.417
> 
> 标签：php

> **可能重复：**
> [如何在 PHP 中将所有图像转换为 JPG 格式？](https://stackoverflow.com/questions/5060835/how-to-convert-all-images-to-jpg-format-in-php)

我正在尝试将用户名传递给文件名并以 .jpg 结尾的文件所以输出将是“user-mycoolnewimage.jpg”。目前有关如何执行此操作的任何建议都是对“randnumber-mycoolnewimage.png”的更改，这不是我想要的。随机数对服务器日志没有帮助，并且图像需要以 jpg 结尾，因为它正在被转换。

```
$file = rand(0, 10000000).$_FILES['t1']['name'];
if (move_uploaded_file($_FILES['t1']['tmp_name'], $file)) {
    if($fp = fopen($file,"rb", 0)) {
        $picture = fread($fp,filesize($file));
        fclose($fp);
        $image = imagecreatefrompng($file);
        imagejpeg($image, $file, 70);
        imagedestroy($image);
        $tag1 = '<img src="'.$file.'" alt="" class="default" />';
        //unlink($file);        
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:16:34.020

我认为你正在寻找的是`basename`（记录[在这里](http://ca3.php.net/basename)）

你可以做的一件事是修改你的脚本，让你创建两个不同`$file`的变量，一个保存初始值，另一个`png`保存`jpeg`路径。您还需要`unlink`完成`png`一次：

```
$source = $username . "-" . $_FILES['t1']['name'];
$destination = $username . "-" . basename($_FILES['t1']['name']) . ".jpg";
if (move_uploaded_file($_FILES['t1']['tmp_name'], $source)) {
    if($fp = fopen($source,"rb", 0)) {
        $picture = fread($fp,filesize($source));
        fclose($fp);
        $image = imagecreatefrompng($source);
        imagejpeg($image, $destination, 70);
        imagedestroy($image);
        $tag1 = '<img src="'.$file.'" alt="" class="default" />';
        unlink($source);        
     }
} 
```

# c++ - 同一个dll中是否可以有两个不同的插件

> ID：14295745
> 
> 赞同：1
> 
> 时间：2013-01-12T17:13:01.060
> 
> 标签：c++, firebreath

是否可以在同一个 dll 中创建两个不同的插件，一个用于通信，另一个用作画布？

我知道我可以在同一个班级中做到这一点，但我希望第一个是无窗口的（每个浏览器只需要一个），另一个是窗口的（我可以在同一个浏览器中创建最多 4 个）。

我希望能够在它们之间进行选择，就像这样。

```
<object id="plugin0" type="application/x-communication" width="0" height="0">
<param name="onload1" value="pluginLoaded" />

<object id="plugin1" type="application/x-canvas" width="320" height="240">
<param name="onload2" value="pluginLoaded" /> 
```

我可以使用 FB::DOM 从通信对象动态创建画布对象并获取 JSAPIAUTO 指针以直接在它们之间传递二进制数据吗？

NpAPI 不支持字节数组，我尝试使用 base64 字符串，但速度很慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T19:28:25.377

是的，您可以拥有一个带有多个“插件”的 DLL。实际上它只是一个插件，但它可以处理多种 mimetype。如果您查看 FBTestPlugin 示例，您会发现它实际上处理了三种不同的 mimetype。这些插件可以选择共享相同的 JSAPI 接口，但它们都在相同的内存空间中，因此您可以（小心！）使用全局变量来共享信息。

假设您的“画布”对象是您自己的插件的实例，您可以使用某种标识符和全局映射将值传递给另一个插件实例，以告诉它要使用哪个内存块等。您不能通过通过 javascript 将 JSAPI 对象从一个对象传递到另一个对象并取回原始 C++ 对象（至少不是在所有情况下），但您可以传递标识符，让您找到所需的内容。

[您可以在 FBTestPlugin 项目](https://github.com/firebreath/FireBreath/blob/master/examples/FBTestPlugin/MULTIMIME_NOTES.txt)的 firebreath 存储库中找到有关如何支持多种 mimetype的说明。我也会在这里发布它们，尽管其中一些细节可能会在以后发生变化。

* * *

修改原始 FBTestPlugin 如下，以支持单个代码库中的多个 mimetype：

1.  编辑 PluginConfig.cmake，为以下条目添加多个条目：FBSTRING_MIMEType、ACTIVEX_PROGID、FBControl_GUID 和 FBSTRING_PluginDescription。确保为所有条目提供唯一值，包括 FBControl_GUID 中的 GUID。

2.  编辑 Factory.cpp，修改 PluginFactory::createPlugin() 并添加代码以检查 mimetype 并创建适当的对象。还将“mimetype”作为参数添加到“boost::make_shared(mimetype)”。新代码可以构造“标准”FBTestPlugin 插件，或者从 FBTestPlugin 或 FBTestMathPlugin C++ 对象构建新的“SimpleMath”插件。

3.  在 FBTestPlugin.h 中，修改 FBTestPlugin 构造函数以将“const std::string& mimetype”作为参数。添加“std::string m_mimetype;” 作为 FBTestPlugin 的私有变量。

4.  在 FBTestPlugin.cpp 中，修改 FBTestPlugin 构造函数以将“const std::string& mimetype”作为参数并从 mimetype 参数设置 m_mimetype。根据 mimetype 修改 createJSAPI() 以返回“boost::make_shared(m_host)”而不是“boost::make_shared(FB::ptr_cast(shared_from_this()), m_host)”。包括“SimpleMath.h”。根据 mimetype 修改绘图代码中的插件文本，以便向用户提供视觉反馈。

5.  修改 SimpleMathAPI.h 和 SimpleMathAPI.cpp 以添加“self”属性和“GetSelf()”方法，两者都返回 shared_from_this()。

6.  将 FBTestPlugin.* 复制到 FBTestMathPlugin.* 并更改对象名称。通过删除 LeakFinder 来简化 FBTestMathPlugin。修改 createJSAPI() 以仅返回 SimpleMathAPI 对象。修改绘图代码中的插件文本，以便向用户提供视觉反馈。

7.  修改 test.html 中的测试代码以测试多种 mimetype。创建三个插件，并使用这三个插件测试数学函数。

# git - 与使用 Github 的人共享一个 git repo 分支的好方法是什么？

> ID：14295751
> 
> 赞同：2
> 
> 时间：2013-01-12T17:13:23.923
> 
> 标签：git, github, repository

我们使用**master 进行开发**。我们将*稳定*的主题分支合并为 master。对于我们的客户，我们**从 master 分支**。我们需要让一些外部协作者（通常是前端开发人员）在客户的分支上进行协作。但是他们**绝不能对其他分支或主分支有任何访问权限（*读或写***） （理想情况下，甚至在客户分支分歧之前甚至不能访问项目的历史）。

我的想法是我们可以创建一个新的存储库，其中“修订 0”将是客户端分支分歧的地方，并使用拉取请求来拉取对规范存储库的更改。有没有办法做到这一点？我的意思是从其他 repo 的一些具体修订开始创建空 repo。

我认为这应该是可能的——因为内容是相同的——哈希也是如此。但是简单的复制和粘贴修订将不起作用，或者容易出错，因为新创建的请求需要与规范回购中的请求完全相同才能具有相同的哈希值。

请注意，我们**使用 Github 作为我们的 git 托管**，我们无意创建自己的 git 托管。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T21:32:38.160

如果您想对彼此和您的主服务器隐藏客户端，则每个客户端都需要一个私有存储库。您将拥有一个包含您自己的开发的内部存储库，以及每个客户的孤立分支。当你想创建一个新的客户端分支时，你会做

```
git checkout --orphan client_xx
git commit 
```

然后，您将拥有一个孤立的分支，其中包含当时您的主分支的确切内容。要创建客户端存储库，您需要使用临时分支做一些小技巧

```
mkdir -p /path/to/client_xx
cd /path/to/client_xx
git init
git fetch /path/to/internal client_xx:tmp
git checkout tmp
git branch master
git checkout master
git branch -d tmp 
```

现在客户端存储库的主分支将包含与内部存储库的客户端分支完全相同的 sha1。您可以让客户端派生客户端存储库并向您发出拉取请求。您可以通过拉到客户端分支将客户端存储库集成到您的内部存储库中。由于客户端分支是孤立的，您无法正确地将客户端分支合并到主分支（反之亦然），但您可以使用cherry-pick 进行集成。

# javascript - 触发插件事件时，如何从 Backbone.js 中的视图执行模型的功能？

> ID：14295752
> 
> 赞同：0
> 
> 时间：2013-01-12T17:13:26.057
> 
> 标签：javascript, jquery, backbone.js

我有下一个代码：

```
var Contents = Backbone.View.extend({       
    events: {
            "click #addAll": "addContent"
    },
    initialize: function() {
        _.bindAll(this); 
        this.model = new ContentCollection();
        this.model.on("add", this.contentAdded);
    },                  
    addContent: function(event) {
        this.model.add({ modelName: "all"});
        //Plugin event
        $('select').switchify().data('switch').bind('switch:slide', function(e,type){       
            //Do something

        });     
    },          
    contentAdded: function(content) {
        if (content.view == null) {
            var template_name;              
            switch(content.get("modelName")){   
                case 'all': template_name = 'home'; break;  
            }                                       
            content.view = new ContentView({
                              model: content, template: //template
                     });
            $(".box").empty(); 
            content.functionModel();    
            //render template                                               
            }       
        },              
}); 
```

单击按钮 ( `#addAll`) 时，模型会添加到集合中，然后创建视图、`functionModel`调用视图并渲染模板。我想`funtionModel()`在插件事件完成时执行，但 `content`对于调用该函数的特定模型是必需的。并且该插件在`contentAdded`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T00:00:40.923

我不是 100% 确定我是否正确理解了您的问题，但我认为您需要`Content`在方法中获取对模型的引用`addContent`。我希望这是正确的。

而不是像现在这样允许该`collection.add`方法为您创建模型：

```
this.model.add({ modelName: "all"}); 
```

分别初始化模型：

```
var content = new ContentModel( modelName: "all" });
this.model.add(content); 
```

当您有一个局部变量 ( `content`) 时，它也可以在插件事件处理程序回调的范围内访问。以下应该有效：

```
addContent: function(event) {
    var content = new ContentModel( modelName: "all" });
    this.model.add(content);
    $('select').switchify().data('switch').bind('switch:slide', function(e,type){       
        content.functionModel();
    });     
}, 
```

# algorithm - 具有 2 x 1 和 2 x 2 矩形的平铺网格

> ID：14295754
> 
> 赞同：2
> 
> 时间：2013-01-12T17:13:45.057
> 
> 标签：algorithm, dynamic-programming, tiling, recurrence

我无法将递归关系写成如下问题。

给定一个尺寸为 4 xn 的矩形网格，有多少种方法可以用 2 x 2 和 2 x 1 多米诺骨牌完全平铺网格？

在这里，对于 2 x 1 矩形，它做得很好，但我不知道矩形是否是 2 x 1 和 2 x 2： [http ://www.acmgnyr.org/year2007/hc](http://www.acmgnyr.org/year2007/h.c)

有任何想法吗？

例如对于

4x1：1 路

4x2：11 种方式

4x3：29 种方式

下面的代码使用蛮力生成所有可能性。但我想使用动态编程来做到这一点。

[https://gist.github.com/4519601](https://gist.github.com/4519601)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:05:14.243

我认为您可以通过使用动态编程算法来解决这个问题。

想象一下，不是将网格表示为 4 xn 的正方形网格，而是表示为表示每个单独列的宽度的 4 元组。每次放置瓷砖时，您都可以尝试将其放置在某个位置，使其其中一个方块接触到网格最左侧的左上角。这样做的效果是改变每列的有效宽度。例如，给定这个 4 x 3 网格：

```
. . .
. . .
. . .
. . . 
```

我们将其编码为 (3, 3, 3, 3)。如果你要在上角放置一个 2 x 2 块，你会得到：

```
X X .
X X .
. . .
. . . 
```

这将被编码为 (1, 1, 3, 3)，因为前两行现在实际上要小得多。

这表明了一种初始（低效）递归算法。作为您的基本情况，世界 (0, 0, 0, 0) 只有一个解决方案（即，什么都不做）。任何没有合法方式放置覆盖最左侧行最上面方块的瓷砖的世界都没有解决方案。否则，对于所有可能的移动，进行移动，更新世界的内部表示，并递归地添加您可以在那个较小的世界中找到的所有解决方案。

这是非常缓慢的（指数级的），但可以显着加快。特别要注意，可能的 4 元组的数量是 (n + 1) ⁴。这意味着唯一递归调用的最大数量是 O(n ⁴ )。因此，如果您记住递归调用或使用动态编程来向后计算调用，则只需进行多项式调用。记忆化应该很容易添加到现有的递归解决方案中，并且加速应该非常巨大。

如果您正在寻找一种在数学上更精确的方法来解决这个问题，请考虑尝试为这个问题编写一个生成函数并使用它来导出一个封闭形式的解决方案。一旦你有了它，直接评估它应该不会比上述解决方案更有效。但是，由于我不是生成函数的专家，因此我实际上不确定您将如何做到这一点。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:33:37.237

在`4xn`中，`n`要么是偶数，要么是奇数。如果`n`是偶数，只需使用`2x2`多米诺骨牌。否则，`2x2`最多使用`n-1`. 然后使用两个`2x1`多米诺骨牌完成`4x1`剩余的块。在回答时，我没有关注您的链接，因为我认为问题已经充分说明，并且该链接只是您对更简单问题的回答。

n = 偶数

```
use n 2x2 dominoes 
```

n = 奇数

```
use n-1 2x2 dominoes plus 2 2x1 domino 
```

*   如果 n = 10 则 4*10=40 和 (2x2)*10=40

*   如果 n = 11 则 4*11=44 和 (2x2)*10=40 和 (2x1)*2=4 总共 44

# grid - 如何通过模板在 Kendo UI Grid 列上显示行（或索引）编号？

> ID：14295755
> 
> 赞同：1
> 
> 时间：2013-01-12T17:13:45.873
> 
> 标签：grid, kendo-ui

> **可能重复：**
> [Kendo UI Grid 序列号列](https://stackoverflow.com/questions/14270959/kendo-ui-grid-serial-number-column)

我想要一个带有行索引号的 Kendo UI Grid 列。是否可以使用行模板？

# android - 我的代码在android中不起作用（http Get）

> ID：14295758
> 
> 赞同：0
> 
> 时间：2013-01-12T17:13:55.750
> 
> 标签：android, http

我想从一个站点加载一个网页并在edittext上显示其源代码，例如登录，我将登录信息发送到站点，如果站点返回“ok”，我转到下一个表单，但它不工作，它显示为空回复 ：

检查我的代码：

```
 package com.arash.rz.webtar;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;

import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.view.Menu;
import android.view.MenuItem;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;

public  class MainActivity extends Activity implements AsyncTaskCompleteListener<String> {

    public String SendReuqest(String command,String variables)
    {
        String response = null;
        String url="api.php?cmd="+command+"&varz="+variables;
        return response;
    }
    public void MessageBox(String message)
    {
        Toast.makeText(this, message, Toast.LENGTH_SHORT).show();
        }  
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        final Button btnlogin = (Button)findViewById(R.id.button1);
        final Button btnregister = (Button)findViewById(R.id.button2);
        final EditText txtemail = (EditText)findViewById(R.id.editText1);
        final EditText txtepass = (EditText)findViewById(R.id.editText2);

        btnlogin.setFilterTouchesWhenObscured(true);

        btnlogin.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                readWebpage(v);
                }
              // Perform action on click
          }
          );

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // Handle item selection
        switch (item.getItemId()) {
        case R.id.menu_settings:
            finish();
            return true;
        default:
            return super.onOptionsItemSelected(item);
        }

    }
    @Override
    public void onTaskComplete(String result) {
        // TODO Auto-generated method stub

    }

     private class DownloadWebPageTask extends AsyncTask<String, Void, String> {

         @Override

         protected String doInBackground(String... urls) {

                String response = "";

                for (String url : urls) {

                      DefaultHttpClient client = new DefaultHttpClient();

                      HttpGet httpGet = new HttpGet(url);

                      try {

                             HttpResponse execute = client.execute(httpGet);

                             InputStream content =
                                          execute.getEntity().getContent();

                             BufferedReader buffer = new BufferedReader(

                                           new InputStreamReader(content));

                             String s = "";

                             while ((s = buffer.readLine()) != null) {

                                    response += s;

                             }

                      } catch (Exception e) {

                             e.printStackTrace();

                      }

                }

                return response;

         }

         protected void onPostExecute(String result) {

                //textView.setText(result);
                MessageBox("Returned:"+result);
                EditText ed = (EditText)findViewById(R.id.editText1);
                ed.setText(result);

         }

  }

  public void readWebpage(View view) {

         DownloadWebPageTask task = new DownloadWebPageTask();

         task.execute(new String[] { "http://127.0.0.1" });

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:26:40.047

使用 Fiddler 工具跟踪网络活动。它将显示您从服务器获得的请求和响应的痕迹。通过查看提琴手，您可以确认问题出在客户端或服务器上。谢谢，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:55:27.027

您是否将以下行添加到您的`AndroidManifest.xml`?

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

# php - 从 __constructor 返回 false

> ID：14295761
> 
> 赞同：4
> 
> 时间：2013-01-12T17:14:11.960
> 
> 标签：php

您可以从构造函数返回 false 吗？

```
<?php

class ftp_stfp{

    //private vars of the class
    private $host;
    private $username;
    private $password;
    private $connection_type;
    private $connection = false;

    function __contruct( $host, $username, $password, $connection_type ){

        //setting the classes vars
        $this->host         = $host;
        $this->username     = $username;
        $this->password     = $password;
        $this->connection_type = $connection_type;

        //now set the connection into this classes connection
        $this->connection = $this->connect();

        //check the connection was set else return false
        if($this->connection === false){
            return false;   
        } 
    } ... etc etc the rest of the class 
```

调用类：

```
$ftp_sftp = new ftp_sftp( $host, $uname, $pword, $connection_type ); 
```

这实际上是否正确，即 $ftp_sftp var 是否为假或根据 __construct 方法的结果持有该类，或者这是完全错误的逻辑？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T17:15:45.450

不，构造函数没有返回值。如果您需要从构造函数中获取某种结果，您可以执行以下操作：

如果您需要返回值，请使用一种方法来完成繁重的工作（通常称为`init()`）。

```
public static function init( $host, $username, $password, $connection_type ){

    //setting the classes vars
    $this->host         = $host;
    $this->username     = $username;
    $this->password     = $password;
    $this->connection_type = $connection_type;

    //now set the connection into this classes connection
    $this->connection = $this->connect();

    //check the connection was set else return false
    if($this->connection === false){
        return false;   
    } 
}

$ftp_sftp = ftp_sftp::init(); 
```

将结果存储在成员变量中，并在调用构造函数后检查其值。

```
function __construct( $host, $username, $password, $connection_type ){

    //setting the classes vars
    $this->host         = $host;
    $this->username     = $username;
    $this->password     = $password;
    $this->connection_type = $connection_type;

    //now set the connection into this classes connection
    $this->connection = $this->connect();
}

$ftp_sftp = new ftp_sftp( $host, $uname, $pword, $connection_type );
if ($ftp_sftp->connection !== false)
{
    // do something
} 
```

您可以让您的`connect()`方法引发异常。这将立即停止执行并转到您的`catch`块：

```
private method contect()
{
    // connection failed
    throw new Exception('connection failed!');
}

try 
{
    $ftp_sftp = new ftp_sftp( $host, $uname, $pword, $connection_type );
}
catch (Exception $e)
{
    // do something
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-12T17:21:12.790

构造函数不能返回值。您可以在这种情况下抛出异常：

```
if($this->connection === false){
  throw new Exception('Connection can not be established.');  
} 
```

然后您可以在 try-catch 块中实例化变量。

```
try
{
  $ftp_sftp = new ftp_sftp( $host, $uname, $pword, $connection_type );
}
catch(Exception $e)
{
  //Do whatever you want.
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T17:21:56.333

关于为什么构造函数没有返回值有一个有趣的线程为什么构造[函数没有返回值？](https://stackoverflow.com/questions/1788312/why-a-constructor-does-not-return-a-value).

此外，通过返回“False”，您似乎想要否定对象实例化。如果是这种情况，我建议您在连接失败时抛出异常，这样对象创建将失败。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T17:40:12.930

我认为您可以在外部创建一个对象并直接使用您的 connect() 方法并在那里进行测试

```
$ftp_sftp = new ftp_sftp( $host, $uname, $pword, $connection_type );
$ftp_sftp->connect(); 
```

如果连接是公开的。

# bash - Bash 无法运行从多个变量创建的命令

> ID：14295764
> 
> 赞同：0
> 
> 时间：2013-01-12T17:14:21.960
> 
> 标签：bash, init

我从[这里](http://www.guyrutenberg.com/2008/06/04/start-trac-on-startup-initd-script-for-tracd/)下载了 tracd init.d 启动脚本，我正在尝试将它应用到我自己的服务器上。但是当我运行脚本时，我收到以下错误消息：

```
Usage: tracd [options] [projenv] ...

tracd: error: the --single-env option cannot be used with more than one enviroment 
```

所以我正在尝试修改脚本以使其正常工作。这是我的实际版本：

```
#!/bin/sh
### BEGIN INIT INFO
# Provides:          tracd
# Required-Start:    networking
# Required-Stop:     networking
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Start the tracd standalone Trac web server.
### END INIT INFO
# (C) 2008 Guy Rutenberg <http://www.guyrutenberg.com>

## Options you should probably change ##
HOSTNAME=193.17.184.23 # to which hostname should we listen
# If you only want to serve one project keep this variable
# empty and set the PROJECT_ENV variable 
ENV_PARENT_DIR=
PROJECT_ENV=/opt/trac/bds5/
PORT=8000
# add any additional options (such as authentication) here. If you only have one
# project you should probably add -s here
ADDITIONAL_OPTS='-s --basic-auth="bds5,/opt/trac/bds5/.htpasswd,Baza Doskonalenia Systemu"'

## Options you should probably not change ##
DAEMON=/usr/local/bin/tracd
NAME=tracd-bds5
DESC="web server"
PIDFILE=/var/run/$NAME.pid
SCRIPTNAME=/etc/init.d/$NAME
SSD="/sbin/start-stop-daemon"

test -x $DAEMON || exit 1

set -e

. /lib/lsb/init-functions

DAEMON_OPTS="--daemonize --pidfile=$PIDFILE --port=$PORT --hostname=$HOSTNAME $ADDITIONAL_OPTS"
if [ -n "$ENV_PARENT_DIR" ]; then
    DAEMON_OPTS="$DAEMON_OPTS --env-parent-dir=$ENV_PARENT_DIR"
else
    DAEMON_OPTS="$DAEMON_OPTS $PROJECT_ENV"
fi

case "$1" in
  start)
    log_daemon_msg "Starting $DESC" $NAME
    echo "$SSD --start --quiet --pidfile $PIDFILE --exec $DAEMON -- $DAEMON_OPTS" 
    $SSD --start --quiet --pidfile $PIDFILE --exec $DAEMON -- $DAEMON_OPTS
    if [[ -n $! ]]; then
            log_end_msg 0
    else
            log_end_msg 1
    fi
    ;;
  stop)
    log_daemon_msg "Stopping $DESC" $NAME
    if $SSD --stop --retry 30\
    --pidfile $PIDFILE ; then
        rm -f $PIDFILE
        log_end_msg 0
    else
        log_end_msg 1
    fi
    ;;
  restart|force-reload)
    $0 stop
    [ -r  $PIDFILE ] && while pidof -x $NAME |\
         grep -q `cat $PIDFILE 2>/dev/null` 2>/dev/null ; do sleep 1; done
    $0 start
    ;;
  *)
    echo "Usage: $SCRIPTNAME {start|stop|restart|force-reload}" >&2
    exit 1
    ;;
esac

exit 0 
```

这是它的输出：

```
Starting web server: tracd-bds5
/sbin/start-stop-daemon --start --quiet --pidfile /var/run/tracd-bds5.pid --exec /usr/local/bin/tracd -- --daemonize --pidfile=/var/run/tracd-bds5.pid --port=8000 --hostname=127.0.0.1 -s --basic-auth="bds5,/opt/trac/bds5/.htpasswd,Baza Doskonalenia Systemu" /opt/trac/bds5/
Usage: tracd [options] [projenv] ...

tracd: error: the --single-env option cannot be used with more than one enviroment 
```

有趣的是 - 当我从终端复制命令并运行它时，一切正常。所以我认为从脚本运行这个命令存在问题。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T18:03:44.100

简短回答：请参阅[BashFAQ #050：我正在尝试将命令放入变量中，但复杂的情况总是失败！](http://mywiki.wooledge.org/BashFAQ/050)

长答案：当 bash 解析命令行时，它会在替换变量*之前*查找（& 作用于）引号和转义。因此，当变量包含类似`-s --basic-auth="bds5,/opt/trac/bds5/.htpasswd,Baza Doskonalenia Systemu"`的内容时，当该值包含在命令行中时，其中的引号无法执行任何有用的操作为时已晚。

如果您需要将复杂的命令选项存储在变量中，最好的选择是使用数组。每个 shell 字都作为一个单独的元素存储在数组中，如果您将数组向右展开（as `"$arrayname[@]}"`），它将被保留并完整地传递给命令：

```
ADDITIONAL_OPTS=(-s --basic-auth="bds5,/opt/trac/bds5/.htpasswd,Baza Doskonalenia Systemu")
...
DAEMON_OPTS=(--daemonize --pidfile=$PIDFILE --port=$PORT --hostname=$HOSTNAME "${ADDITIONAL_OPTS[@]}")
if [ -n "$ENV_PARENT_DIR" ]; then
    DAEMON_OPTS+=(--env-parent-dir=$ENV_PARENT_DIR)
else
    DAEMON_OPTS+=($PROJECT_ENV)
fi
...
$SSD --start --quiet --pidfile $PIDFILE --exec $DAEMON -- "${DAEMON_OPTS[@]}" 
```

# c# - 列表中的标准值无法删除但可以添加到列表中

> ID：14295766
> 
> 赞同：0
> 
> 时间：2013-01-12T17:14:31.673
> 
> 标签：c#, fluent-nhibernate

对于我的应用程序，我可以为特定任务添加状态，例如“已完成、进行中、未开始”。我希望这 3 个状态对象是不可触摸的（用户不能删除或编辑它们），但用户可以添加其他状态对象并删除它们。

知道如何使用 NHibernate 实现这样的行为吗？

在我使用 NHibernate 之前，我刚刚在数据库中设置了一个布尔值，比如“fixed”，然后我检查了这是真还是假，以确定我是否可以被删除。

我是否必须对状态对象中的布尔属性使用相同的方法？

或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:30:48.583

问题是，如果您真的需要数据库中的这些标准值。我建议只在数据库中保留变量（用户定义的）值，并以编程方式将标准值添加到您的列表中，同时将它们的“固定”标志设置`true`为。这个标志不需要在数据库中，即它不会被映射。这样这些特殊值就不会被删除。

当然，这仅在您对该列没有参照完整性约束时才有效。

# c - 在双向链表中标记当前位置

> ID：14295769
> 
> 赞同：0
> 
> 时间：2013-01-12T17:14:42.287
> 
> 标签：c, linked-list, doubly-linked-list

```
typedef struct tape
{
    char symbol;
    struct tape *next;
    struct tape *prev;
}tape;

tape *pt;

void ShowCurrentCombination()
{
    tape currentNode;

    currentNode = *pt;
    while(pt->prev != NULL)
            pt=pt->prev;

    while(pt->next != NULL)
        {
            if(pt == &currentNode) //this is never true :( 
            putc("[q]",stdout); 

            putc(pt->symbol,stdout);
                pt=pt->next;
        }
    putc(pt->symbol,stdout);
} 
```

这个函数应该显示列表的内容，在它的左侧用“[q]”标记当前元素。不幸的是，只显示了普通数据。为什么？

为了完整起见，让我介绍初始化列表的函数：

```
void GenerateInputTape(int n)
{
    int i;

    pt=(tape*)malloc(sizeof(tape));

    pt->symbol='B';

    pt->prev=NULL;
    pt->next=(tape*)malloc(sizeof(tape));
    pt->next->prev = pt;
    pt=pt->next;

    for(i=0;i<2*n+1;i++)
    {   
        if(i < (2*n/2))
            pt->symbol='0';
        else
            pt->symbol='1';

        pt->next=(tape*)malloc(sizeof(tape));
        pt->next->prev = pt;
        pt=pt->next;
    }

    pt->symbol='B';
    pt->next=NULL;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:21:00.687

当您检查时，`pt == &currentNode`您检查是否`pt`指向`currentNode`. 这永远不会发生，因为`currentNode`它甚至不在列表中（列表中没有元素指向它）。

你不想`currentNode`成为一个副本，而是指针等于`pt`函数的开头。

```
tape *currentNode;
currentNode = pt;
...
if(pt == currentNode) 
```

您也不会检查最后一个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:49:49.110

注意之间的关系

```
currentNode = *pt; 
```

和

```
if(pt == &currentNode) 
```

`currentNode`首先，您已经使用指针*指向**的内容*进行了初始化。在第二个中，您正在检查的*地址*是否与列表中某些成员的地址相同（由 指向）。应该清楚为什么这永远不会是真的。 `pt` **`currentNode``pt`**

 **你需要做的是保存地址，即指针，而不是它的内容

```
tape *currentNodePointer = pt; 
```

然后

```
if(pt == currentNodePointer) 
```

（您的代码可以更好地组织，以避免总是“倒回”到列表的开头，但这也许是另一天。）**

# linux - 如何使用 tar 提取没有文件夹结构的文件

> ID：14295771
> 
> 赞同：85
> 
> 时间：2013-01-12T17:14:46.253
> 
> 标签：linux, unix, tar

我有一个具有以下结构的 tar.gz 文件：

```
folder1/img.gif
folder2/img2.gif
folder3/img3.gif 
```

我想提取没有文件夹层次结构的图像文件，因此提取的结果如下所示：

```
/img.gif
/img2.gif
/img3.gif 
```

我需要结合 Unix 和 PHP 来做到这一点。这是我到目前为止所拥有的，它可以将它们提取到指定的目录但保留文件夹层次结构：

```
exec('gtar --keep-newer-files -xzf images.tgz -C /home/user/public_html/images/',$ret); 
```

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2013-01-12T17:38:46.997

您可以使用 tar 的**--strip-components**选项。

> ```
>  --strip-components count
>          (x mode only) Remove the specified number of leading path ele-
>          ments.  Pathnames with fewer elements will be silently skipped.
>          Note that the pathname is edited after checking inclusion/exclu-
>          sion patterns but before security checks. 
> ```

我创建了一个与您的结构相似的 tar 文件：

```
$tar -tf tarfolder.tar
tarfolder/
tarfolder/file.a
tarfolder/file.b

$ls -la file.*
ls: file.*: No such file or directory 
```

然后通过执行提取：

```
$tar -xf tarfolder.tar --strip-components 1
$ls -la file.*
-rw-r--r--  1 ericgorr  wheel  0 Jan 12 12:33 file.a
-rw-r--r--  1 ericgorr  wheel  0 Jan 12 12:33 file.b 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-01-12T17:30:05.843

这*几乎*可以单独使用 tar ，使用 --transform 标志，除了据我所知无法删除剩余的目录。

这将展平整个档案：

```
tar xzf images.tgz --transform='s/.*\///' 
```

输出将是

```
folder1/
folder2/
folder3/
img.gif
img2.gif
img3.gif 
```

不幸的是，您将需要使用另一个命令删除目录。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-02-27T10:46:59.427

检查 tar 版本，例如

```
$ tar --version 
```

如果版本**>=**比 tar-1.14.90 使用`--strip-components`

```
tar xvzf web.dirs.tar.gz -C /srv/www --strip-components 2 
```

否则使用`--strip-path`

```
tar xvzf web.dirs.tar.gz -C /srv/www --strip-path 2 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-29T21:06:36.343

在 mytar.tar.gz 的任何子文件夹中找到 img*.gif 并解压到 ./

> tar -zxf mytar.tar.gz --absolute-names --no-anchored img*.gif --transform='s:.*/::'

在 mytar.tar.gz 中此特定问题中列出的 3 个文件夹中的任何一个中找到 img*.gif 并解压缩到 ./

> tar -zxf mytar.tar.gz --absolute-names --no-anchored img*.gif --transform='s:^folder[1-3]/::'

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-03T19:13:58.483

根据`@ford`的回答。这会将其解压缩到 my_dirname 文件夹。这样我们就可以在不影响当前现有文件的情况下正确清除空文件夹。

```
tar xzf images.tgz --transform='s/.*\///' -C my_dirname
find my_dirname -type d -empty -delete 
```

# css - 使用 CSS 更改修补 LESS 文件

> ID：14295772
> 
> 赞同：1
> 
> 时间：2013-01-12T17:14:48.463
> 
> 标签：css, compilation, merge, less

我的团队犯了一个经典错误，其中团队的新成员直接更改了 css，而不是我们使用的 less 文件。同时没有对less文件进行任何更改。一切都在 git 下作为特定的提交。

将css的更改合并到less中的最有效方法是什么？在 less 中很少使用 mixins，它主要只是导入引导程序然后嵌套选择器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:04:54.197

也许其他人会想出一个更好（更有创意）的答案，但我认为“最有效”的方式是最痛苦、最耗时的：隔离对 CSS 所做的更改，然后将它们编码到 LESS --手动（无论如何复制/粘贴）。

当然，这就是我假设你想通过问这个问题来避免的。我只是看不出有什么办法可以避免它。

# ruby-on-rails-3.2 - 如何获取当前查看页面的语言环境？

> ID：14295774
> 
> 赞同：1
> 
> 时间：2013-01-12T17:15:02.973
> 
> 标签：ruby-on-rails-3.2, refinerycms

我已经将 RefineryCMS 与我的 rails-devise 应用程序集成在一起，在 中`ApplicationController`，我曾经像这样设置本地：

```
class ApplicationController < ActionController::Base

before_filter :set_locale

def set_locale
    I18n.locale = extract_locale_from_tld || I18n.default_locale
end

def extract_locale_from_tld
    parsed_locale = params[:locale] || ((lang = request.env['HTTP_ACCEPT_LANGUAGE']) && lang[/^[a-z]{2}/])
    parsed_locale= 'en' if parsed_locale.nil?
    I18n.available_locales.include?(parsed_locale.to_sym) ? parsed_locale  : nil
  end 
```

因此，这将在 application.html.haml 中方便地使用语言环境变量，我将使用它来选择基于语言环境的 css

但是，当我查看 RefineryCSS 本地化页面时，`extract_locale_from_tld`上面将无法获取查看的页面区域设置，它会始终返回 en，我该如何执行以下操作：

1.  检查当前视图是否与 RefineryCSS 页面相关？
2.  获取查看的 RefineryCSS 页面的语言环境？（使用 gem 选择的语言环境`refinerycms-i18n`）

任何帮助确实值得赞赏！

# php - 使用 mod_rewrite 来回重写 url

> ID：14295780
> 
> 赞同：1
> 
> 时间：2013-01-12T17:15:36.247
> 
> 标签：php, apache, .htaccess, mod-rewrite, url-rewriting

也许这似乎是一个非常简单的问题，我的网站的网址写得很糟糕，所以我想重写它们。所以我准备激活mod_rewrite。问题如下：

假设我的 url 从 切换`site_url/index.php?page=mypage&type=mytype`到`site_url/mypage/mytype`，如果刷新页面会发生什么，是否有必要将相反的过程放入 .htaccess 文件进行重写？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:12:40.387

您需要重定向和重写的组合。URL 重写过程的大纲草案将是：

*   如果 URL 包含`.php`，则 301/302 将请求重定向到其 SEO 友好版本。这将更改浏览器地址栏中的地址。
*   如果请求了对 SEO 友好的 URL，请将其重写为其 PHP 版本。这不会更改浏览器地址栏中的地址。

这是一个*非常基本*的重写规则示例，它执行上述两个操作：

```
#
# redirect /index.php?page=somepage&type=sometype to friendly url
# 
RewriteCond %{THE_REQUEST} /index\.php
RewriteCond %{QUERY_STRING} page=(\w+)&type=(\w+)
RewriteRule ^index\.php$ /%1/%2? [R,L]

#
# rewrite /somepage/sometype to index.php
# 
RewriteRule ^(\w+)/(\w+)$ index.php?page=$1&type=$2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:48:40.693

在 .htaccess 中，您应该转发映射...

```
^/(mypage)/(mytype) to index.php?page=$1&type=$2 
```

但是应该不理会相反的情况。因此，直接请求`site_url/index.php?page=mypage&type=mytype`将简单地按原样传递。

所以，刷新不会改变任何东西。

# c# - 对象引用未设置为对象的实例（定时器数组）

> ID：14295782
> 
> 赞同：2
> 
> 时间：2013-01-12T17:15:58.390
> 
> 标签：c#, timer, object-reference

我正在使用以下代码，但出现错误

> 对象引用未设置为对象的实例”在第 2 行。

```
System.Timers.Timer[] timer = new System.Timers.Timer[10];
timer[0].Elapsed += new ElapsedEventHandler(DoJob); 
```

为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T17:17:51.137

您忘记初始化数组的项目

```
System.Timers.Timer[] timer = new System.Timers.Timer[10];
timer[0] = new System.Timers.Timer();
timer[0].Elapsed += new ElapsedEventHandler(DoJob); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T17:17:51.160

您的第一行创建了一个数组。一组 Timer 引用。一个 Timer 引用数组，*它们的值都为 null*。

# c - 在运行时设置数组大小

> ID：14295786
> 
> 赞同：2
> 
> 时间：2013-01-12T17:16:20.790
> 
> 标签：c, arrays, gcc, c99

我知道如何在函数中创建结构数组：

```
typedef struct item
{
    int test;
};

void func (void) 
{
    int arraysize = 5;
    item ar[arraysize];  
} 
```

但是当全局声明数组时，我该怎么做：

```
typedef struct item 
{
    int test; 
};

item ar[];

void func (void)
{
    int arraysize = 5;
    // What to here?
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T17:19:54.200

可变长度数组只允许在 C 中用于具有自动存储持续时间的数组。在文件范围内声明的数组具有静态存储持续时间，因此不能是可变长度数组。

您可以使用`malloc`它为编译时大小未知的数组对象动态分配内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T17:22:49.313

```
item * ar:
int count;

void foo()
{
    count = 5;
    ar = malloc(sizeof(item) * count);
    // check to make sure it is not null...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T17:21:01.217

可能你是这样的：

```
typedef struct item 
{
    int test; 
};

item *arr;

void func (void)
{
    int arraysize = 5;
    arr = calloc(arraysize,sizeof(item)); 
     // check if arr!=NULL : allocation fail!
     // do your work 

    free(arr);
} 
```

但是它的动态分配！

如果`arraysize` *在编译时知道*。那么最好创建一个这样的宏：

```
#define arraysize  5

typedef struct item 
{
    int test; 
};

item arr[arraysize]; 
```

[旁注使用大写的宏常量是一个很好的做法]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T17:25:08.517

```
typedef struct item 
{
    int test; 
};

#define ARRAYSIZE 5

item ar[ARRAYSIZE]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-12T17:18:59.200

您不能在运行时修改数组的大小。您可以执行动态内存分配并`realloc()`在需要时调用。

**编辑：**在你的情况下，我建议这样做：

```
item *ar;

    void func(void)
    {
      int arraysize = 5;
      ar = malloc(arsize);
      if(ar) {
      /* do something */
     }
     //don't forget to free(ar) when no longer needed
    } 
```

# jquery - 为什么在使用 Jquery TableSorter 时在索引页面中将 Layout 设置为 null

> ID：14295792
> 
> 赞同：0
> 
> 时间：2013-01-12T17:16:47.123
> 
> 标签：jquery, asp.net-mvc, layout, razor, tablesorter

我正在尝试使用 Jquery Tablesorter 对我的 MVC 4 razor 索引页面进行排序和分页。但是这样做我发现我必须在页面中设置 Layout=null，这是为什么呢？通过这样做，我无法保留我的主布局设计。

谢谢

比纳亚·阿查里亚

# php - 从 PHP 执行 praat 时出错：在抛出“MelderError”实例后调用终止已中止

> ID：14295793
> 
> 赞同：0
> 
> 时间：2013-01-12T17:16:49.403
> 
> 标签：php, praat

我有一个调用 exec() 来执行 C++ 程序 PRAAT 的 PHP 脚本，但是当我从浏览器调用它时它不起作用。相反，如果我使用命令行“php5 ./mypage.php”它可以工作。

这是我的 PHP 页面：

Praat 是一个分析语音的程序。该程序将脚本 FeaturesExtraction.praat 和 wav Emotion.wav 作为输入，并将输出写入目录“output”（具有所有权限）。

查看 apache 日志，这是错误：在抛出“MelderError”实例后调用终止已中止

我该如何解决这个问题？:S

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:01:56.227

### 更新

这最终在版本 5.4.15 中得到修复。问题是 Praat 试图写入其[首选项目录](http://www.fon.hum.uva.nl/praat/manual/preferences_directory.html)，该目录位于用户的`home`. `www-data`当用户通常*没有*主目录时，这当然会遇到问题。

从变更日志：

> 5.4.15（2015 年 8 月 1 日）
> 
> *   引入了几个命令行选项，可以更轻松地从 Web 服务器调用 Praat。

这些选项记录[在手册](http://www.fon.hum.uva.nl/praat/manual/Scripting_6_9__Calling_from_the_command_line.html)中，标题为“从 Web 服务器调用 Praat”。相关选项是`--no-pref-files`。

* * *

### 原始答案

前段时间，邮件列表中也出现了同样的问题：[MelderError when running as Apache](http://uk.groups.yahoo.com/group/praat-users/message/5962)。

该电子邮件的发件人报告此问题存在于版本 5.3.16 中，但不存在于 5.2.17 中。这被认为是一个可能的错误，但以下版本的[变更日志](http://www.fon.hum.uva.nl/praat/manual/What_s_new_.html)似乎没有专门解决这个问题。

你用的是什么版本？看看这是否在更新的版本中得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T10:18:21.507

我遇到了同样的问题，解决方案是使用 praat 5.1.25。您可以从此网址下载：http: [//pkgs.org/ubuntu-10.04/ubuntu-universe-amd64/praat_5.1.25-1_amd64.deb.html](http://pkgs.org/ubuntu-10.04/ubuntu-universe-amd64/praat_5.1.25-1_amd64.deb.html)

# java - Java - 如何使用 .class 文件和 .jar 文件

> ID：14295795
> 
> 赞同：1
> 
> 时间：2013-01-12T17:17:10.633
> 
> 标签：java, jar, classpath

我有一个类库，开发人员坚持分发 .class 文件（和 libJNI）而不是 .jar 文件。作为记录，它是一个 SWIG 绑定，Java 约定不是高优先级。

我还使用了一些其他以 .jar 文件形式分发的类库。

我有一些用 NetBeans 和一个 Matlab 应用程序开发的 Java 应用程序。从 NetBeans 或 Matlab 运行，我可以将类路径设置为 .class 文件。实际上，上面的文件夹包含一个与包名称匹配的文件夹。

我的问题是从命令行运行 Java 应用程序。该`-cp`选项不起作用，我得到了一个找不到类的异常。我试图使用包文件夹和类文件的路径。

我认为问题在于清单中的类路径覆盖了命令行选项。我还没有找到向清单条目添加路径的方法。

我可以通过将库打包到 .jar 中来使其工作，但我不想将其包含在我的安装说明中。

我怀疑我需要一个自定义类加载器来按原样使用它。请告诉我我错了。

**注意** 我多年来一直在使用 stackoverflow，并在网上找到了最好的答案。

提前致谢。

# c# - LibGit2Sharp 远程日志

> ID：14295805
> 
> 赞同：2
> 
> 时间：2013-01-12T17:18:19.260
> 
> 标签：c#, git, libgit2sharp

有没有办法列出已获取但未使用 LibGit2Sharp 合并的提交？

例如，我可以运行以下 git 命令：

```
C:\Users\Tom\SourceLog>git log origin
commit f3beb4960b2f4bf5641d5b512b5b8c3081512a56
Author: Tom Hunter
Date:   Wed Jan 9 22:58:51 2013 +0000

    Rollback change to icon

    Seemed to crash on windows xp for some reason..

commit d95f29a6cbfea9cb6009c3095a67d71f86d9e8bd
Author: Tom Hunter
Date:   Mon Jan 7 21:34:36 2013 +0000

    Updating Icon

commit 8785ed4ff3c46bef46ea6e2398c115b4b0203b2c
Author: Tom Hunter
Date:   Mon Jan 7 21:22:54 2013 +0000

    Fixing tests

    Moved GenerateFlowDocuments method to LogEntry class.
    Have somehow managed to greatly simplify tests..

... 
```

前两个提交尚未合并到我的本地存储库中。**即，如果我省略origin**，这就是我得到的：

```
C:\Users\Tom\SourceLog>git log
commit 8785ed4ff3c46bef46ea6e2398c115b4b0203b2c
Author: Tom Hunter
Date:   Mon Jan 7 21:22:54 2013 +0000

    Fixing tests

    Moved GenerateFlowDocuments method to LogEntry class.
    Have somehow managed to greatly simplify tests..

... 
```

下面的代码只给了我 8785ed。如何获取包含尚未合并的提交的列表？

```
using (var repo = new Repository(@"C:\Users\Tom\SourceLog"))
{
    var c = repo.Commits.First();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T07:32:24.753

您可以通过以下方式获取远程原始分支的提交：

```
repo.Branches["origin/HEAD"].Commits 
```

您可以使用`First()`默认排序获取最新提交。但是，您将获得远程分支的所有提交，而不仅仅是未合并的提交。

如果您想要收集未合并的提交，您应该使用它`QueryBy(filter)`来获取提交。[nulltoken 的 asnwer](https://stackoverflow.com/a/14296201/872395)描述了解决方案，但它包含错误。正确的用法是：

```
var filter = new Filter
{
    Since = repo.Branches["origin/HEAD"],
    Until = repo.Head
};
var notMergedCommits = repo.Commits.QueryBy(filter); 
```

因为：

*   自：指向提交对象**的指针或作为起点的指针列表。**
*   直到：指向提交对象**的指针或将被排除**（连同祖先）从枚举中的指针列表。

因此，使用上面的代码，您希望从分支中获得提交`"origin/HEAD"`并排除包含在您的分支`"HEAD"`中的提交，这意味着返回所有在获取的分支中但尚未合并到`"HEAD"`.

# java - 对单个线程的多个同时访问

> ID：14295806
> 
> 赞同：0
> 
> 时间：2013-01-12T17:18:19.047
> 
> 标签：java, multithreading, networking

我目前正在通过数据报套接字/数据包使用 UDP 用 Ja​​va 构建多线程服务器/客户端。我很难理解线程的正确使用，并希望得到一些澄清。我将首先举例说明我在做什么。

```
Thread a;
Thread b(a);

a.start
b.start

//simple enough, now inside b imagine this,
Thread c(a);
if (case)
{
    c.start //therefore I can have a lot of thread c's running at once, 
}

//now inside c imagine this
if (case)
{
    a.somefunction();
} 
```

最终我的问题很难问，但上述 sudo 是否适合使用线程？即使一次只运行一个线程，它也可以同时从多个其他地方访问。这会导致问题吗？

感谢您的任何回复。

-威廉

只需添加一个编辑以进一步澄清。

线程 a 将是我的数据包发送者，它将数据包从服务器发送到客户端。线程 b 将是我的数据包侦听器，它从客户端接收数据包，并将它们发送到线程 C，数据包解析器。（所以我可以同时解析多个数据包）。数据包解析器线程 c 可能需要将响应发送回客户端，因此它将调用 a 中的函数，该函数将数据包排队等待发送。

再次感谢，

再次编辑，

使用函数的示例线程

```
package server;

import java.io.IOException;
import java.net.DatagramPacket;
import java.net.DatagramSocket;
import java.net.InetAddress;
import java.util.Vector;

public class ServerSenderThread extends Thread
{
    DatagramSocket serverSocket;
    Vector<DatagramPacket> outGoingPackets = new Vector<DatagramPacket>();

    public ServerSenderThread(DatagramSocket serverSocket)
    {
        this.serverSocket = serverSocket;
    }

    public void run()
    {
        while (true)
        {
            if (outGoingPackets.size() == 0)
            {
                try
                {
                    Thread.sleep(50);
                }
                catch (InterruptedException e)
                {
                    e.printStackTrace();
                }
            }
            else
            {
                try
                {
                    send();
                }
                catch (IOException e)
                {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
    }

    public void addSend(DatagramPacket packet)
    {
        outGoingPackets.addElement(packet);
    }

    public void send() throws IOException
    {
        DatagramPacket packet = outGoingPackets.get(0);
        outGoingPackets.removeElementAt(0);

        InetAddress address = packet.getAddress();
        int port = packet.getPort();
        byte[] buf = new byte[256];
        String dString = "Data Only the Server Knows";
        buf = dString.getBytes();
        packet = new DatagramPacket(buf, buf.length, address, port);

        System.out.println("Sserver sending packet");   
        serverSocket.send(packet);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:41:21.780

数据包的发送和接收通常很简单，除非您的速率很高，例如 10+K/秒。这些数据包的处理可能需要一些时间，但除非这真的很昂贵（远远超过解析），否则我会考虑为所有这些功能使用一个线程。它将简化代码并使调试变得更容易。即我会让设计尽可能简单，除非你知道你需要让它更复杂。

如果您比较上面的单线程版本，您会发现它更简单，这是一个明显的好处，而在这种情况下使用多线程并不是一个明显的好处。

```
public class DataPacket {
    final DatagramSocket serverSocket;

    public DataPacket(InetAddress address, int port) throws SocketException {
        this.serverSocket = new DatagramSocket(port, address);
    }

    public void send(String message) throws IOException {
        byte[] bytes = message.getBytes(StandardCharsets.UTF_8);
        serverSocket.send(new DatagramPacket(bytes, bytes.length));
        System.out.println("Sent " + message);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:32:19.267

对于类似于您描述的多线程应用程序，最好使用[`BlockingQueue`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)线程之间的消息传递。这将是自动线程安全的，并且完全按照您使用`put(message)`和描述的方式传递消息`take()`。

例如，您的数据包侦听器线程可能在数据包解析器来自的消息上具有`BlockingQueue`它的消息。`put``take`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T17:41:47.693

我认为如果 a 有一个套接字（或另一个资源）并且来自每个线程的每个调用都使用该资源，那么您可能会遇到问题。如果每个呼叫都使用一个新的（或不同的）套接字，我想不会有问题。

处理此问题的一种方法是同步访问：

```
if (case)
{
    synchronized (a) 
    {
        a.somefunction();
    {
} 
```

或者更好地在 somefunction 定义中添加同步

```
public void synchronized somefunction() {
    ...
} 
```

另一种方法是更改​​解决方案设计，使用[生产者-消费者模式](https://en.wikipedia.org/wiki/Producer-consumer_problem)，没有人直接访问 a，但将要发送的数据包添加到由 c（消费者）监控的列表中，并将发送将出现的每个包名单。列表将被同步，但同步的侵入性会更小，因为它只会影响将元素添加到列表中，而不会影响元素的所有处理。

更新：我还向您推荐[Java Concurrency In Practice](http://www.javaconcurrencyinpractice.com/)一书，非常直接的阅读，甚至是来自博客[The Java Specialists](http://www.javaspecialists.eu/archive/Issue125.html)的这篇评论，这是我的书源。

# javascript - JavaScript 函数相互调用

> ID：14295816
> 
> 赞同：0
> 
> 时间：2013-01-12T17:19:15.423
> 
> 标签：javascript

就像在主题中一样：

```
function a()
{
     b();
}
function b()
{
     a();
} 
```

我试过这个但没有成功：

```
function b(){}

function a()
{
     b();
}
function b()
{
     a();
} 
```

任何帮助表示赞赏;]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:50:47.440

既然您说这个问题是关于您是否能够在其声明之前出现的代码中调用函数：答案是**肯定**的。在 JavaScript 中，变量和函数声明总是被提升到其封闭范围的顶部。在函数的情况下，声明和定义都被提升了，所以：

```
console.log(a); // undefined
console.log(b); // ReferenceError - there is no var b
console.log(f()); // 20;
var a = 10;
console.log(a); // 10
function f() { return 20; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:22:04.430

这是一个无限的递归循环。坏的：

```
function a()
{
     b();
}
function b()
{
     a();
};

a(); 
```

那里。玩得开心崩溃浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T17:37:23.147

简化对于调试来说很好，但让我们让它变得有用和安全（基于 Sam3k 的响应）：

```
function a(i) { 
  if (i < 10)
  {
     console.log('Running "a" iteration['+i+']');
     b(i);
  }
}

function b(i)
{    
     i++;
     console.log('Running "b" iteration['+i+']');
     a(i);
};

a(1); 
```

# python - 使用 Python 和 Flask 从 Riak 一次存储（或获取）多个值

> ID：14295818
> 
> 赞同：0
> 
> 时间：2013-01-12T17:19:18.217
> 
> 标签：python, nosql, flask, riak

我正在尝试编写一个获取访问者 IP 并存储在 Riak 数据库中的小应用程序。在其 /show 路由上，它应该列出所有访问者，即存储的 IP 和相关日期。但是，出于某种原因，我要么只存储最后一个访问者，要么只获取最后一个访问者。我在这里做错了什么？我确定它不仅是错误的代码问题，而且是错误的方式 - 我正在尝试从顽固的 sql 用户切换，但我无法理解没有'select * from ...' 可用；）

```
import riak
import json
from flask import Flask, request, render_template
from datetime import datetime

app = Flask(__name__)
riak = riak.RiakClient(host='some.domain', port=8087, transport_class=riak.RiakPbcTransport)

def date(obj):
    return obj.isoformat() if hasattr(obj, 'isoformat') else obj

@app.route('/')
@app.route('/index')
def index():
    db = riak.bucket('visitor')
    ip = request.remote_addr
    time = json.dumps(datetime.now(), default=date)
    new_visitor = db.new('log', data={
        'ip': ip,
        'time': time,
    })
    new_visitor.store()
    return ip

@app.route('/show')
def show():
    db = riak.bucket('visitor')
    visitors = db.get('log')
    return render_template("show.html", visitors=visitors.get_data())

if __name__ == '__main__':
    app.run(debug=True, host='0.0.0.0') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:23:26.567

您将所有内容存储在同一个名称**“log”**下，因此每次收到新请求时都会覆盖该值。

Riak 存储桶就像 python dict 一样，您基本上是在对每个请求执行 visitor['log'] = {...data...} 。您可能希望为此使用不同的数据结构，或者如果时间足够离散，则可能使用时间作为键。

# html - 任何网络浏览器中的非常奇怪的显示行为

> ID：14295819
> 
> 赞同：0
> 
> 时间：2013-01-12T17:19:28.190
> 
> 标签：html, css, google-maps-api-3, twitter-bootstrap, responsive-design

我正在做一个使用谷歌地图的项目。我使用 HTML5 地理定位来设置地图。如果不支持或拒绝地理定位，那么我会任意设置地图中心。

我的问题是关于两件事：

*   关于谷歌地图加载的第一个：当地理定位被接受时，地图加载异常缓慢（我现在在中国，这可能是一个原因吗？）。在 Firefox 中，它甚至从不加载......虽然没有 javascript 错误。

*   更一般地说，整个网站的显示非常错误。将地图缩小到一定程度后，您应该会看到显示的标记。没关系，但特定内容通常在地图下可见。这些内容几乎看不到，或者被一个遍布整个窗口宽度的丑陋黑色块隐藏......

我正在使用引导程序（包括响应式 CSS 文件和 javascript 插件）、awesomefont 和一些额外的 javascript 代码。

你有什么想法吗？尤其是让我抓狂的第二点……

谢谢

**编辑** 如果我不提供 URL 来检查问题，你怎么能帮助我：[它在这里](http://victorinox.pythonanywhere.com)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T19:07:46.153

[http://victorinox.pythonanywhere.com/static/js/manager_functions.js](http://victorinox.pythonanywhere.com/static/js/manager_functions.js)第143行有一个错误：

```
map.setCenter(google.maps.LatLng(loc.coords.latitude, loc.coords.longitude)); 
```

必须

```
map.setCenter(新google.maps.LatLng(loc.coords.latitude, loc.coords.longitude));
//------------^
```

**还有什么：**当用户拒绝 HTML5 地理位置的权限时，Firefox 不会触发错误回调。正因为如此，并且在其他任何地方都没有为地图设置中心，所以地图将不会加载，因为中心是必需的选项。

你可能认为 center 会在 initialize 中设置，但在 Firefox 中，当用户拒绝地理定位权限时，永远不会调用 initialize。看看这个：

```
$(function() {
     //creates the map, no center will be set in createMap()
    map = createMap();
     //in firefox there will not be set a center
     //when user denies permission, because error-callback will not execute
    geolocalize();
     // when the map 
    center = map.getCenter();
     //will never run, because when the map doesn't have a center 
     //there will no tiles load
    google.maps.event.addListenerOnce(map, 'tilesloaded', function() {
        initialize();
    });
}) 
```

**建议：** 目前你有一个闪烁的标记。您在多个事件（zoom_changed、dragend、resize）上重新加载标记，删除所有标记并根据 XHR 响应创建新标记。

相反，您应该为标记创建一个缓存（您可以在其中识别它们，例如基于 XHR 响应给出的一些 ID）。当您收到新响应时，仅当它们不在缓存内时才创建新标记，其他标记在地图上保持可见（当您删除/隐藏视口内不可见的标记时，我看不到任何好处）

此外，仅更新 bounds_changed 上的标记而不是 3 个事件就足够了。

# xcode - UIScrollView 边界不会改变

> ID：14295825
> 
> 赞同：0
> 
> 时间：2013-01-12T17:20:29.140
> 
> 标签：xcode, uiscrollview, size, bounds, cgrect

我有一个名为 pagingView 的 UIScrollView 的子类。我想为它设置动画，以便在设备旋转时（它仅针对此视图控制器，因此在 plist 中关闭了横向模式）。

我已经更改了所有的 clipsToBounds 属性和 contentResize 属性以及自动调整掩码，但似乎都没有工作。我正在使用的代码如下：

```
UIDeviceOrientation orientation = [[UIDevice currentDevice] orientation];
if (orientation == UIInterfaceOrientationLandscapeLeft)
{

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.5];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];  
 graph.frame = CGRectMake(pagingView.frame.origin.x, pagingView.frame.origin.y-200, pagingView.frame.size.width*1.5, pagingView.frame.size.height*2);
[UIView commitAnimations];

} 
```

我已经将它们更改为块，更改了所有属性，但是，当我运行代码时，它所做的只是将 pagingView 在屏幕上移动 200 像素并且边界不会改变（我也尝试过改变边界财产）。任何帮助将不胜感激，我希望这只是我缺少的一件简单的事情，但我花了几个小时寻找解决方案，而我得到的最接近的潜在答案可能与 layer 属性有关？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T19:38:45.890

我最近遇到了类似的问题，滚动视图边界在设备旋转后没有改变。我最终找到的解决方案是在情节提要中为滚动视图的所有四个边添加约束。我在模拟器模式下使用自动布局、iOS7 和 XCode5。如果没有限制，滚动视图将在 iPhone 3.5" 模拟器中保留例如 (320,480) 固定大小。当我努力诊断时非常沮丧。

# visual-studio-2010 - 是否有与 Eclipse 团队项目集文件 (.psf) 等效的 Visual Studio？

> ID：14295828
> 
> 赞同：2
> 
> 时间：2013-01-12T17:20:51.323
> 
> 标签：visual-studio-2010, tfs

我们正在使用 Visual Studio 2010，并且在 Team Foundation Server 上有许多 C# 项目，它们相互依赖（具有项目引用）。对于某些项目，我们希望能够检出它们并自动检出它们的所有依赖项。检查项目、编译并运行应用程序应该尽可能简单。但是，我们不想查看完整的源代码存储库：只查看编译特定项目所需的必要子集。

在 Eclipse 中，我们为此使用 Team Project Set 文件，但我还没有找到任何 Visual Studio 替代此功能。

这样做的动机如下：每个开发人员都应该可以轻松切换上下文并尽快开始工作。假设一个新的开发者加入了这个项目。如果他使用的是 Eclipse，我会将项目集文件发送给他，他会将其导入到他的工作区中，并立即检查出他需要的所有项目。理想情况下，如果一切顺利，编译工作区，他点击“运行”按钮，应用程序就会运行。但是在 Visual Studio 中如何实现这种场景呢？

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T22:50:57.997

我没有使用过 Eclipse 的那个特性，但听起来 Visual Studio 相当于一个*解决方案*。解决方案是项目的容器，它们可以相互依赖，以正确的顺序构建，并且可以让一组配置设置一起工作。这允许解决方案的“发布”配置导致要构建的所有项目的“发布”配置。

此外，通过从源代码管理中打开解决方案，您还将从源代码管理中获取解决方案中的所有项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:47:53.563

在 Visual Studio 中，工具 -> 选项 -> 源代码管理 -> 环境下有一个选项，名为“打开解决方案或项目时获取所有内容”。这将在加载解决方案或项目时对解决方案或项目中的所有文件运行获取。所以开发者不需要检查任何东西，只需在 Source Control Exdlorer 中双击相应的解决方案即可

请参阅[版本控制环境选项](http://msdn.microsoft.com/en-us/library/cc470669%28v=vs.100%29.aspx)

# android - 如何完整显示标题名称（不截断）以及如何将菜单元素放置在底部的操作栏中？

> ID：14295845
> 
> 赞同：1
> 
> 时间：2013-01-12T17:22:14.740
> 
> 标签：android, android-activity, action, title

我有两个问题：
1\. 活动的标题名称被截断。如何显示全名？
2\. 我有三个菜单元素，但操作栏中只显示了两个。那么，如何将操作栏放置在底部并显示所有三个元素呢？当然，标题应该保持在顶部。

如果需要一些代码或另一个xml文件，我会添加它。因为，我是新用户，我无法上传图片，所以我有一个指向我网站的链接。
[http://mladen-bojanic.de/test/android.png](http://mladen-bojanic.de/test/android.png)

提前致谢

姆拉登

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/open"
    android:icon="@drawable/ic_menu_settings"
    android:showAsAction="ifRoom|withText"
    android:title="Kurse bearbeiten">
</item>
<item
    android:id="@+id/save"
    android:icon="@drawable/ic_menu_settings"
    android:showAsAction="ifRoom|withText"
    android:title="Einstellungen">
</item>
<item
    android:id="@+id/close"
    android:icon="@drawable/ic_menu_settings"
    android:showAsAction="ifRoom|withText"
    android:title="Info">
</item>

</menu> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:48:50.367

> 活动的标题名称被截断。如何显示全名？

使用较短的名称。

或者，获得更大的设备。

或者，不要在操作栏中显示操作的标题。

或者，为操作栏中的操作使用较短的标题。

> 那么，如何将操作栏放置在底部并显示所有三个元素呢？

您不能“将操作栏放在底部”。此外，你继续说：

> 当然，标题应该保持在顶部。

这意味着您需要一个*拆分*操作栏，在狭窄的设备上，它会在顶部为您提供部分操作栏，并在底部提供部分操作栏。您可以通过`android:uiOptions="splitActionBarWhenNarrow"`在您的`<activity>`元素中启用此功能。

# c# - 在 textbox/richtextbox 元素中显示假名（汉字字符的语音读法）

> ID：14295846
> 
> 赞同：1
> 
> 时间：2013-01-12T17:22:20.063
> 
> 标签：c#, winforms, text, ruby-characters

我将如何在基于文本框的元素中在汉字字符上方显示假名？

我尝试在网络上广泛查找有关 Windows 表单元素中的假名显示的信息 - 似乎有一些 Microsoft Access 表单控件的实现，但这些似乎在非 Access 项目中无法访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T00:03:11.020

ImmGetCompositionString 是从 IME 中获取输入假名的方法（[http://www.atmarkit.co.jp/fdotnet/dotnettips/875imeyomi/imeyomi.html](http://www.atmarkit.co.jp/fdotnet/dotnettips/875imeyomi/imeyomi.html) [ja]）

如果您对从已经转换的汉字猜假名没问题，您可以使用[mecab](http://code.google.com/p/mecab/)或其他库，但在这种情况下，假名并不总是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:08:35.940

听起来您需要实施或以其他方式扩展现有的 IME - 检查此问题的解决方案：

[从日文 IME 获取更多数据](https://stackoverflow.com/questions/6095535/getting-more-data-from-the-japanese-ime)

# java - 不同屏幕尺寸的android布局问题

> ID：14295849
> 
> 赞同：0
> 
> 时间：2013-01-12T17:22:26.350
> 
> 标签：java, android

我有一个带有各种按钮和文本视图的 android 应用程序。使用 dp 的测量，按钮、文本视图和编辑文本字段在屏幕上隔开。因此，例如一个按钮将具有：'margintop from left 10dp'

问题在于高密度手机。我为更高密度的屏幕创建了一个新布局，并将它们命名为 layout-large 或 layout-sw600-sw720（因为问题出在 Galaxy s3 上）。

但是手机仍然会一直调用适合480 x 800密度屏幕的正常布局文件。

我读到s3调用了正常的布局文件。那么如果我把普通文件中的xml改成高密度的，那么低密度布局的xml该怎么办呢？我应该调用什么文件名，电话会再次调用这个文件还是普通文件？

XML 布局的提取：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/duroodscreen"
android:paddingLeft="5dp"
android:paddingRight="5dp"
android:paddingTop="5dp" >

<Button
android:id="@+id/dmute"
android:layout_width="48dp"
android:layout_height="33dp"
android:layout_alignParentLeft="true"
android:background="@drawable/soundon" />

<Button
android:id="@+id/dreset"
style="?android:attr/buttonStyleSmall"
android:layout_width="48dp"
android:layout_height="33dp" 
android:layout_alignParentRight="true"
android:background="@drawable/customresetbutton" />

<TextView
android:id="@+id/dcount"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignParentLeft="true"
android:layout_below="@+id/dmute"
android:layout_marginLeft="25dp"
android:layout_marginTop="36dp"
android:gravity="center"
android:singleLine="true"
android:text="Numbers"
android:textSize="25sp" /> 
```

清单中的参考：

```
<supports-screens 
android:resizeable="true"
android:smallScreens="true" 
android:normalScreens="true" 
android:largeScreens="true"
android:anyDensity="true" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:32:42.437

在这种情况下，尽管很痛苦，但最好只为 Galaxy S3 制作布局，而不是试图重写所有内容以纠正一个制造商的错误。

因此，您将：

[获取手机型号](https://stackoverflow.com/questions/1995439/get-android-phone-model-programmatically)

```
if "galaxy S3" 
   layout with "my_layout_galaxy_s3"
else -> layout with 
   layout with "my_layout" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T17:39:00.693

不要将屏幕尺寸与密度混淆。手机有一个正常大小的屏幕。所以你看到的没问题。另请注意，`sw600`限定符是指 600 dp 的宽度而不是像素。

要为另一个密度提供资源，请使用密度限定符（mdpi、hdpi、...）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-12T17:39:25.967

*layout-normal*表示屏幕的*大小*，不是*密度*

你必须创建`layout-normal-mdpi`和`layout-normal-hdpi`文件

用于`layout-normal-xhdpi`银河 s3

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T17:44:09.350

为什么你到处使用这么多像素值？像素值应该只用于小事情，比如在元素之间填充几个像素。这样做的原因是首先要避免这样的问题。

例如，为什么要指定按钮的宽度和高度？首先，他们没有文字，为什么不使用 ImageButton 呢？其次，只需将图像设置为您想要的大小并使用 wrap_content。与文本字段相同。android 布局的想法实际上是避免进行所有像素计算，而是相对地进行所有操作，以便设备可以根据其硬件做出自己的决定，它看起来如何最好。

如果您真的想与系统抗争，那么一直这样做可能会更容易 - 使用 AbsoluteLayout 并为所有内容指定精确的像素坐标。否则，请拥抱 Android 如何做事或为痛苦的世界做好准备。

# javascript - javascript语法和自动分号插入

> ID：14295850
> 
> 赞同：1
> 
> 时间：2013-01-12T17:22:31.183
> 
> 标签：javascript, parsing, grammar

我正在尝试实现 javascript 解析器，但遇到了问题。Javascript 有一种称为“分号插入”的技术。那么在js解析器中处理自动分号插入的常用方法是什么？

我应该重写[原始语法](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-262.pdf)以使其能够处理自动分号吗？可能吗？

或者我应该为原始语法实现解析器，然后使用一些棘手的技术来处理分号？

欢迎所有建议。

# php - 在MVC的控制器中调用模型类函数

> ID：14295854
> 
> 赞同：0
> 
> 时间：2013-01-12T17:23:01.513
> 
> 标签：php, mongodb, yii

如何`model`在类中调用类函数`controller`？就像我`$_POST`从`View`文件中有数据一样。`Mongo DB`现在我想通过`model`类将该数据插入。我正在使用`yiiframework`MVC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T03:09:38.037

嗯，您如何要求控制器顶部的模型？我在深入到 mvc 时遇到了问题，因为包含路径回到了原始调用的位置。检查您的包含路径

get_include_path()

&& 包含哪些文件

get_included_files()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:10:42.600

使用 MVC 编程模式，您需要在构建控制器时初始化模型对象。这与您对视图所做的相同。MVC 的好处是您的 $_POST 将跟随您的函数链，您不必将数组传递给每个函数。

```
controller{
  public $view = null;
  public $model = null;

  function __construct(){
    $this->view = new View();
    $this->model = new Model();
  }

  function form_submit(){
    $this->model->insertDB_func();  // whatever your func is
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T18:37:25.727

这是一个简单的例子

```
public function actionViewContact()
{
   $contact = new Contact; // you can also do Contact::model(); 
   $contact->scenario='add';
   if (isset($_POST['Contact'])) 
   {
      $contact->attributes = $_POST['Contact'];
      $contact->save(); // calling save function in contact model which is activerecord
   }
} 
```

# c# - 有没有办法在 Acer V3 中以编程方式阻止 GPU 节流

> ID：14295857
> 
> 赞同：0
> 
> 时间：2013-01-12T17:23:10.013
> 
> 标签：c#, java, c++, gpu, throttling

我在 Acer V3-571G 中遇到 GPU 节流问题。GPU 内核从 660 降至 270MHz，使专用卡无法使用。我还没有看到任何允许停止 GPU 节流的程序。是否可以通过代码（java、c#、c++）直接访问 GPU 内核？

我添加了画面，描绘了当我运行游戏 Test Drive Unlimited 2 时会发生什么......我知道我通常工作，但是嘿，我有时会支付更多费用来使用这个 GPU（一周几次）。当它没有节流时（前几个分钟）一切运行顺利，然后 FPS 下降 50%。

1.  我将 BIOS 从 1.08 更新到 1.13，但没有帮助。
2.  据我所知，在 Acer V3-571G 中，节气门温度设置为低于应有的值。

![在此处输入图像描述](../Images/75fd1f3e7eb47fcf1e3428a54616c82f.png)

***大编辑：***

我试图通过 GPU-Z 读取 GPU BIOS，然后通过 NiBiToR 更改油门温度，但 GPU-Z 无法读取它说`...Local\Temp\\nvflash.rom cannot`找到该文件的 BIOS。该文件确实存在于我的计算机上，但位于以下位置：`...Local\Temp\nvflash.rom`GPU-Z 中的双斜杠在我看来使此路径损坏。

如何解决该问题并正确读取该 rom 文件。

![在此处输入图像描述](../Images/98e11512269f20c2dce0f530907bc512.png)

# mysql - 将备份导入 phpmyadmin 时出现 SQL 错误

> ID：14295858
> 
> 赞同：0
> 
> 时间：2013-01-12T17:23:22.650
> 
> 标签：mysql, sql, import, backup

嗨，我在将备份导入 phpmyadmin 时收到以下错误。任何想法为什么我得到这个？

您的 SQL 查询中似乎有错误。下面的 MySQL 服务器错误输出，如果有的话，也可以帮助您诊断问题

```
错误：未知标点字符串@ 593 STR：/> SQL：
-- phpMyAdmin SQL 转储
-- 版本 2.11.4
-- http://www.phpmyadmin.net
--
-- 主机：本地主机
-- 生成时间：2013 年 1 月 12 日上午 11:54
-- 服务器版本：5.1.57
-- PHP版本：5.2.17

SET SQL_MODE="NO_AUTO_VALUE_ON_ZERO";# MySQL 返回空结果
设置（即零行）。

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:26:09.167

您是否在 php.ini 中的某处启用了 magic_quotes？

[http://php.net/manual/en/security.magicquotes.disabling.php](http://php.net/manual/en/security.magicquotes.disabling.php)

# c++ - 以指针为键的 QMap

> ID：14295861
> 
> 赞同：4
> 
> 时间：2013-01-12T17:23:41.283
> 
> 标签：c++, qt, map, qmap

我正在使用`QMap`并且我有指向对象的指针作为地图的键。使用`std::map`我会为指针编写一个比较器并声明我的地图如下

```
std::map<Key*, Value, ComparatorOfPointers<Key> > 
```

我与 QMap 有什么关系？我在 Qt 文档中找不到可以接受的模板参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T17:40:20.143

`QMap`（不像`std::map`）总是`operator<`用来比较键。因此，您必须将指针包装在一个类中并定义一个适合该类的指针`operator<`。

# c++ - 链接无法正常工作

> ID：14295863
> 
> 赞同：1
> 
> 时间：2013-01-12T17:23:47.170
> 
> 标签：c++, cmake, sfml

```
project (2dplatformer)
cmake_minimum_required (VERSION 2.8)

set(CMAKE_MODULE_PATH ${sfmle_SOURCE_DIR}/cmake/modules
                      ${CMAKE_MODULE_PATH})

find_package(SFML 2.0 REQUIRED audio graphics network system window)

include_directories (${SFML_INCLUDE_DIR})
link_libraries (${SFML_LIBRARIES})

add_library (Tilemap.o src/Tilemap.cpp)
add_library (State.o src/State.cpp)
add_library (TitleState.o src/TitleState.cpp)
add_library (PlayState.o src/PlayState.cpp)
add_library (Player.o src/Player.cpp)

add_executable (2dplatformer src/Game.cpp)
target_link_libraries (2dplatformer sfml-audio sfml-system sfml-graphics sfml-window Player.o PlayState.o Tilemap.o State.o TitleState.o) 
```

那是我用来构建项目的 CMakeLists.txt。

```
[ 16%] Built target TitleState.o
[ 33%] Built target Tilemap.o
[ 50%] Built target Player.o
[ 66%] Built target PlayState.o
[ 83%] Built target State.o
Linking CXX executable 2dplatformer
libPlayState.o.a(PlayState.cpp.o): In function `PlayState::PlayState(Game*)':
PlayState.cpp:(.text+0x286): undefined reference to `Player::Player(Game*, Tilemap*)'
libPlayState.o.a(PlayState.cpp.o): In function `PlayState::update()':
PlayState.cpp:(.text+0x378): undefined reference to `Player::update()'
libPlayState.o.a(PlayState.cpp.o): In function `PlayState::draw()':
PlayState.cpp:(.text+0x44f): undefined reference to `Player::draw()'
collect2: error: ld returned 1 exit status
make[2]: *** [2dplatformer] Error 1
make[1]: *** [CMakeFiles/2dplatformer.dir/all] Error 2
make: *** [all] Error 2 
```

当我使用这个写得很糟糕的 Makefile 时，我的游戏运行良好：

```
LIBS=-lsfml-graphics -lsfml-window -lsfml-system

all:
    @echo "*** Building the game"

    g++ -c "src/Tilemap.cpp"    -o "build/Tilemap.o"
    g++ -c "src/State.cpp"      -o "build/State.o"
    g++ -c "src/TitleState.cpp" -o "build/TitleState.o"
    g++ -c "src/PlayState.cpp"  -o "build/PlayState.o"
    g++ -c "src/Game.cpp"       -o "build/Game.o"
    g++ -c "src/Player.cpp"     -o "build/Player.o"
    g++ -o 2dplatformer build/Tilemap.o build/Game.o build/State.o build/Player.o build/TitleState.o build/PlayState.o $(LIBS)

map_editor:
    @echo "*** Building the level editor"

    g++ -c "src/Tilemap.cpp"   -o "build/Tilemap.o"
    g++ -c "src/Editor.cpp" -o "build/Editor.o"

    g++ -o editor build/Tilemap.o build/Editor.o $(LIBS)

clean:
    @echo "*** Removing object files and executable..."

    rm -rf build/*
    rm -f 2dplatformer 
```

我正在链接库，所以我不知道为什么找不到它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:47:39.493

```
project (2dplatformer)
cmake_minimum_required (VERSION 2.8)

set(CMAKE_MODULE_PATH ${sfmle_SOURCE_DIR}/cmake/modules
                      ${CMAKE_MODULE_PATH})

find_package(SFML 2.0 REQUIRED audio graphics network system window)

include_directories (${SFML_INCLUDE_DIR})
link_libraries (${SFML_LIBRARIES})

add_library (Tilemap.o src/Tilemap.cpp)
add_library (State.o src/State.cpp)
add_library (TitleState.o src/TitleState.cpp)
add_library (PlayState.o src/PlayState.cpp)
add_library (Player.o src/Player.cpp)

link_libraries (Player.o PlayState.o Tilemap.o State.o TitleState.o)

add_executable (2dplatformer src/Game.cpp)
target_link_libraries (2dplatformer Player.o PlayState.o Tilemap.o State.o TitleState.o) 
```

我添加了一个 link_libraries () 并修复了它。

# android - Android ACTION_VIEW 未找到处理 Intent 的 Activity

> ID：14295866
> 
> 赞同：3
> 
> 时间：2013-01-12T17:24:05.677
> 
> 标签：android

尝试使用 textview 处理 http

```
 Pattern httpMatcher = Pattern.compile("https?://.*"); 
              String httpViewURL = "myhttp";
              Linkify.addLinks(label, httpMatcher, httpViewURL); 
```

清单文件：

```
 <activity android:exported="false"
        android:name="*****.URLClickedActivity">

        <intent-filter>
            <category android:name="android.intent.category.DEFAULT"/> 
            <action android:name="android.intent.action.VIEW" /> 
            <data android:scheme="myhttp" />
        </intent-filter>
    </activity> 
```

无论如何，我明白了：

**未找到处理 Intent { act=android.intent.action.VIEW dat= 的 Activity** **（有额外的）}* **

 ** * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T18:34:09.083

方案

```
String httpViewURL = "myhttp"; 
```

应该读

```
String httpViewURL = "myhttp://"; 
```*

# installation - 无法将 java7 安装到 ubuntu 12.10

> ID：14295871
> 
> 赞同：4
> 
> 时间：2013-01-12T17:24:35.583
> 
> 标签：installation, java-7, ubuntu-12.10

我想将 java7 安装到 ubuntu 12.10。但我无法安装。我曾调用以下代码：

```
sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update 
```

他们成功了。然后：

```
sudo apt-get install oracle-java7-installer 
```

这是不成功的。给出错误：

```
sudo apt-get install oracle-java7-installer
dagli@dagli-Inspiron-N5110:~$ sudo apt-get install oracle-java7-installer
[sudo] password for dagli: 
Paket listeleri okunuyor... Bitti
Bağımlılık ağacı inşa ediliyor.       
Durum bilgisi okunuyor... Bitti       
oracle-java7-installer zaten en yeni sürümde.
Sıralanan paketler otomatik olarak kurulmuştu artık gerekli değiller:
psensor-common
Use 'apt-get autoremove' to remove it.
Yükseltilen: 0, Yeni Kurulan: 0, Kaldırılacak: 0 ve Yükseltilmeyecek: 221.
1 tam olarak kurulmadı veya kaldırılmadı.
Bu işlemden sonra 0 B ek disk alanı kullanılacak.
Devam etmek istiyor musunuz [E/h]? E
oracle-java7-installer (7u10-0~webupd8~0) kuruluyor...
/var/lib/dpkg/info/oracle-java7-installer.postinst: 89: [: unexpected operator
Removing outdated cached downloads...
Downloading Oracle Java 7...
--2013-01-12 19:20:58--  http://download.oracle.com/otn-pub/java/jdk/7u10-b18/jdk-
7u10-linux-x64.tar.gz
download.oracle.com (download.oracle.com) çözümleniyor... 23.63.99.147, 23.63.99.106
download.oracle.com (download.oracle.com)[23.63.99.147]:80 bağlanılıyor... bağlantı    
 kuruldu. 
```

HTTP isteği gönderildi, cevap bekleniyor... 302 已暂时移动：[https](https://edelivery.oracle.com/otn-pub/java/jdk/7u10-b18/jdk-7u10-linux-x64.tar.gz) : //edelivery.oracle.com/otn-pub/java/jdk/7u10-b18/jdk-7u10-linux-x64.tar.gz [izleyen] --2013-01-12 19:20:58-- [https://edelivery.oracle.com/otn-pub/java/jdk/7u10-b18/jdk-7u10-linux-x64.tar.gz](https://edelivery.oracle.com/otn-pub/java/jdk/7u10-b18/jdk-7u10-linux-x64.tar.gz) edelivery.oracle .com (edelivery.oracle.com) çözümleniyor... 2.22.26.174 edelivery.oracle.com (edelivery.oracle.com)[2.22.26.174]:443 bağlanılıyor... bağlantı kuruldu。HATA：无法验证 edelivery.oracle.com 的证书，由`/C=US/O=Akamai Technologies Inc/CN=Akamai Subordinate CA 3': Unable to locally verify the issuer's authority. edelivery.oracle.com adresine güvenliği gözardı ederek bağlanmak için`--no-check-certificate' seçeneğini kullanın。下载失败 Oracle JDK 7 未安装。dpkg: 错误处理 oracle-java7-installer (--configure): 安装后安装脚本 alt işlemi çıkış durumunda hata döndürdü : 1 Apport raporu yazılmadı çünkü zaten en yüksek rapor sayısına ulaşıldı İşlem sırasında hatalar bulundu: oracle-java7-installer E:子进程/usr/bin/dpkg返回错误码（1）dagli@dagli-Inspiron-N5110:~$

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T09:43:08.313

看看这里[Unixmen.com](http://www.unixmen.com/howto-install-oracle-java-7-jdk-jre-in-ubuntu-12-10-quantal-quetzal-ppa/)

或者，如果您愿意：

sudo add-apt-repository ppa:webupd8team/java

sudo apt-get 更新

sudo apt-get install oracle-java7-installer

就这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-12T02:10:06.540

这是一篇旧文章，但如果您目前偶然发现此问题，您可能会遇到您不在 LTS 版本中的问题。

如果你去[https://launchpad.net/~webupd8team/+archive/java/+packages](https://launchpad.net/~webupd8team/+archive/java/+packages)你会看到这些包是为哪个系列发布的，atm 它是：

*   清醒 (10.04)
*   精确 (12.04)
*   俏皮（13.10）
*   值得信赖 (14.04)
*   乌托邦 (14.10)

对于 oracle-java7-installer - 7u55-0~webupd8~1

现在检查

```
lsb_release -a 
```

你在哪个版本。对我来说，这是罕见的（13.04），正如你在上面看到的，它不再为此发布了。所以之后

```
sudo add-apt-repository ppa:webupd8team/java 
```

我去了 /etc/apt/sources.list.d/webupd8team-java-raring.list 和 /etc/apt/sources.list.d/webupd8team-java-raring.list.save 并将 raring 更改为 saucy，所以条目看起来像

```
deb http://ppa.launchpad.net/webupd8team/java/ubuntu saucy main 
```

然后我跑了

```
sudo apt-get update 
```

之后我可以安装包

```
sudo apt-get install oracle-java7-installer 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-17T08:18:19.573

它对我也不起作用。oracle java包的下载地址好像变了，或者需要登录才能下载。

这就是我解决问题的方法：

```
sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update
sudo apt-get install oracle-java7-installer 
```

这会给出“302 Moved Temporarily”和“ **sha256sum mismatch jdk-7u51-linux-x64.tar.gz** ”错误，因此请从此处手动下载软件包（您需要登录）：[http ://www.oracle.com/ technetwork/java/javase/downloads/jdk7-downloads-1880260.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html) 并用此目录/var/cache/oracle-jdk6-installer 中的下载文件覆盖

然后再次重复上一条命令，现在它可以工作了：

```
sudo apt-get install oracle-java7-installer 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T20:44:41.623

[在此页面http://www.upubuntu.com/2012/10/how-to-install-oracle-java-7-jre-7-jdk.html](http://www.upubuntu.com/2012/10/how-to-install-oracle-java-7-jre-7-jdk.html)中有一种在 Ubuntu 12.10 上安装 jdk7 的方法

我尝试安装并且我已正确安装。

# google-maps - 标记不会出现在 www.website.com 与 website.com 上的 Google 地图上

> ID：14295872
> 
> 赞同：-1
> 
> 时间：2013-01-12T17:24:37.353
> 
> 标签：google-maps, google-maps-api-3

我有一个包含谷歌地图的网站，用户可以在地图上添加标记。

如果我以这种方式访问​​该站点：

www.site.com

我看到地图上的标记。

如果我以这种方式访问​​该站点：

网站

标记不会出现在地图上。

知道为什么以及如何解决吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:33:51.497

最佳做法是使用 301 重定向来避免使用两种不同的方式访问该站点。我总是将 site.com 的所有访问权限设置为 www.site.com。它可能会对某些 API 产生影响，并且确实会使某些人感到困惑。它对搜索引擎也更好。

最简单的方法，特别是关于 Apache 中的 SEO 友好，是设置 .httaccess 以允许 301 重定向。

这是最佳实践，也应该解决您遇到的此类小问题。

```
create an .htaccess file in your main folder 
```

然后添加以下代码然后保存

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} !^site.com$ [NC]
RewriteRule ^(.*)$ http://site.com/$1 [L,R=301] 
```

此外，在将域添加到控制面板时，某些服务器主机具有此选项。它会要求将所有流量从非 www 重定向到 www。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T17:36:17.983

“www.example.com”和“example.com”实际上是两个不同的地址。“www”是一个子域或 CNAME，就像任何其他（blog.site.com、app.site.com 等）一样。代码中的某处可能有一个绝对 url，它依赖于用户从“www.example.com”查看站点。 com"

一种选择：您可以设置重定向，以便将所有裸域流量 (example.com) 重定向到 www.example.com

请参阅@donlaur 的先前答案（在我写这篇文章时刚刚弹出）以使用 .htaccess 文件进行重定向

# firefox - IE & Firefox 网页字体渲染问题

> ID：14295874
> 
> 赞同：4
> 
> 时间：2013-01-12T17:24:50.290
> 
> 标签：firefox, fonts, internet-explorer-8, webfonts, google-webfonts

有没有其他人注意到 Firefox 和 IE（至少 IE8）在渲染某些特定大小的字体时会出现问题`a`，例如，它会填充字符中的“孔”。

Chrome 和 Opera 显示它们很好。

这是一个例子：

Chrome @ 14px - Roboto Bold

![在此处输入图像描述](../Images/005b9ce305e523d30c1c91fcbf459c97.png)

Firefox @ 14px - Roboto Bold

![在此处输入图像描述](../Images/19f9264b5d839a7c7fbe20e675af34ca.png)

注意`a`角色的“洞”是如何填满的！？

看来这主要是字体大小的问题，因为使用or`14px/15px`时问题消失了；至少在 Firefox 中。`13px``16px`

它也不限于`Roboto Bold`字体；我在其他网络字体中也看到了这个问题。

有谁知道这是否有解决方案，或者这只是 Firefox/IE 中的一个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T17:30:31.700

这是一个更大问题的一部分，每个浏览器都有自己的一套算法来进行字体渲染。

这是 Smashing Magazine 的一篇文章：[http](http://www.smashingmagazine.com/2012/04/24/a-closer-look-at-font-rendering/) ://www.smashingmagazine.com/2012/04/24/a-closer-look-at-font-rendering/关于这个主题。

# node.js - 删除node.js中的几个文件

> ID：14295878
> 
> 赞同：8
> 
> 时间：2013-01-12T17:25:08.287
> 
> 标签：node.js

在 node.js 中删除多个文件的最佳方法是什么？

```
function deleteFiles(files, callback){
    ...
}

var files = ['file1.js', 'file2.jpg', 'file3.css'];
deleteFiles(files, callback); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-12T17:30:39.907

异步：

```
var fs = require('fs');

function deleteFiles(files, callback){
  var i = files.length;
  files.forEach(function(filepath){
    fs.unlink(filepath, function(err) {
      i--;
      if (err) {
        callback(err);
        return;
      } else if (i <= 0) {
        callback(null);
      }
    });
  });
}

var files = ['file1.js', 'file2.jpg', 'file3.css'];

deleteFiles(files, function(err) {
  if (err) {
    console.log(err);
  } else {
    console.log('all files removed');
  }
}); 
```

[http://nodejs.org/docs/v0.4.1/api/fs.html#file_System](http://nodejs.org/docs/v0.4.1/api/fs.html#file_System)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-10-13T04:16:15.287

这将删除数组中的文件并仅在删除所有文件后运行一次回调。

```
function deleteFiles(files, callback){
  if (files.length==0) callback();
  else {
    var f = files.pop();
    fs.unlink(f, function(err){
      if (err) callback(err);
      else {
        console.log(f + ' deleted.');
        deleteFiles(files, callback);
      }
    });
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-03T09:58:16.033

这是从 node.js 目录中删除几个文件的代码，

```
var fs = require('fs');

var removeFile= function (err) {
    if (err) {
        console.log("unlink failed", err);
    } else {
        console.log("file deleted");
    }
}

fs.unlink('filepath', removeFile); // for single file

//for multiple files...

_.map(yourArray,(files)=>{
    fs.unlink('filepath', removeFile);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-08-21T07:14:14.560

我个人喜欢**简码**（一行）

```
files.forEach(path => fs.existsSync(path) && fs.unlinkSync(path)) 
```

所以也许使用**async/await**风格更容易（完整的例子）：

```
try {
  var files = ['file1.js', 'file2.jpg', 'file3.css'];
  files.forEach(path => fs.existsSync(path) && fs.unlinkSync(path))
  // success code here
} catch (err) {
  // error handling here
  console.error(err)
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-06-12T14:59:47.210

您可以使用它来删除多个文件（适用于 linux env ES6 语法）

```
import {execSync} from "child_process";
...

...
const files = ['file1.js', 'file2.jpg', 'file3.css'];
// just example path
const rootDir = '/var/www/files/';
if (files.length > 0)
    execSync('rm -f' + files.map(o => rootDir + o.replace(/(\s+)/g, '\\$1')).join(' ')); 
```

**rm -f**如果文件丢失则忽略，如果文件名包含空格，则**替换**为转义空格，

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-01T13:02:40.460

> 克里斯回答的承诺和略微改进的版本。

```
async deleteAll(filePathsList) {
  try {
    await this.deleteFiles(filePathsList);
    logger.log('info', "Following files deleted successfully from EFS --> " + filePathsList.toString());
    return true;
  } catch (error) {
    logger.log('error', error.stack || error);
    logger.log('error', "Error occured while deleting files from EFS");
    return false;
  }
}
async deleteFiles(files) {
  return new Promise((resolve, reject) => {
    let i = files.length;
    files.forEach(function(filepath) {
      fs.unlink(filepath, function(err) {
        i--;
        if (err && err.code == 'ENOENT') {
          // file doens't exist
          logger.log('info', "Following file doesn't exist, So won't be deleted-->" + (filepath || ''));
        } else if (err) {
          // other errors, e.g. maybe we don't have enough permission
          logger.log('error', "Error occured while deleting the file  " + (filepath || '') + " due to error" + err);
          reject(err);
          return;
        } else if (i <= 0) {
          resolve();
        }
      });
    });
  })
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-19T16:08:42.100

这是我目前正在使用的并且可以享受的：

```
var files = ['file1.js', 'file2.jpg', 'file3.css'];

function deleteFiles(files){
  for (const file of files) {
    fs.unlink((file), err => {
      if (err) throw err;
    });
  };
}

deleteFiles(files); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-05-10T03:45:04.707

`unlinkSync(path)`最好的方法是使用函数（[参见文档](https://nodejs.org/api/fs.html#fs_fs_unlinksync_path)）从节点同步删除文件到循环中`v7.6.0`。

语法如下：

```
// myListOfFiles will be your list of files with paths relative to your script.
myListOfFiles.forEach(filePath => {
 fs.unlinkSync(filePath);
 return;
}); 
```

参考[这里](https://www.tutorialkart.com/nodejs/delete-a-file-in-nodejs-using-node-fs/)

# c++ - C++：新的空项目（如何创建它，添加主方法并打印“Hello，world”）？

> ID：14295884
> 
> 赞同：0
> 
> 时间：2013-01-12T17:26:11.523
> 
> 标签：c++

好吧，我的程序没有执行我想要的。一个从头开始的项目。视觉工作室 2010。

这是我的代码：

```
#include <iostream>
using namespace std;

int main()
{
    cout << "Hello, world";
    system("pause");
    return 0;
} 
```

为什么程序不打印“Hello, world”？为什么它不对断点做出反应？我该怎么做才能得到我想要的？

1.  我创建了一个新项目。
2.  我取消标记 Precompiled header 并标记 Empty [project](https://skydrive.live.com/redir?resid=8CDFFBA921B002FE!133&authkey=!AE9hR4-y4OtqC2c)。
3.  我将一个新项目添加为 cpp 文件。
4.  我输入我的主要[方法](https://skydrive.live.com/redir?resid=8CDFFBA921B002FE!136&authkey=!AFLOttZldVnfjas)。并得到一个错误。LNK1120：未解决的外部问题。据我从谷歌搜索中了解到，这意味着编译器看到我使用了 main 方法，但不知何故它不知道该方法在哪个文件中。
5.  我在我的项目上单击右键并添加我刚刚创建的文件。
6.  我退出VS。并再次启动它。它开始编译，但结果只是一闪而过的黑屏。
7.  我添加了一个新断点。就在模块的中间。该程序根本不会对此做出反应。所以，就这样结束了。

后来补充：

感谢所有试图提供帮助的人。刷新 cout 后，你好，世界工作。

但！我无法继续。

请看一下代码。我用另一段代码替换了“Hello, world”。但它开始告诉我因为';'。错误 C2059：语法错误：';' 这是编译器的奇怪行为还是我很傻？

```
#include <iostream>
using namespace std;

void menu()
{
    do
    {   
        system("cls");
        cout << "Input a point." << endl;
        cout << "id: " << endl;
        cout << "x: " << endl;
        cout << "y: " << endl<<;
        cout << "r: - Return." << endl; 

        system("pause");
    } while (true);

}

int main()
{   
    menu();
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:27:50.747

你不冲洗`cout`。[因此，当您执行system("pause")](http://www.gidnetwork.com/b-61.html)时，输出只是位于缓冲区中。尝试：

```
cout << "Hello, world" << endl; 
```

你写：

> 它开始编译，但结果只是一闪而过的黑屏。

听起来不错。现在尝试从控制台运行程序（因为它是控制台程序）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:30:44.390

一些控制台使用缓冲输出。这意味着在缓冲区已满或写入换行符之前，您看不到任何输出。将 \n 附加到字符串或`<< endl`在字符串之后添加。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T18:21:18.550

我很好奇为什么在 menu() 函数的第 4 个 cout 语句中 endl 之后有一个 << ......这可能是错误吗？

# ios - 在不删除指定部分的情况下裁剪图像的算法

> ID：14295885
> 
> 赞同：0
> 
> 时间：2013-01-12T17:26:12.977
> 
> 标签：ios, objective-c, crop, cgrect

我希望把这个写出来可能对我的问题有所帮助。我有包含面部的图像，我想重新裁剪这些图像，尊重纵横比，同时尽可能多地保留面部。

我想将图像裁剪为任意矩形，可以是高、短、正方形或任何高达 4:1 的宽高比。我想尽可能避免裁剪出我指定的面部或特征（作为图像矩形的内部矩形）。EG 我有一个 (0,0,500, 300) 的图像矩形和一个 (20, 40, 75, 75) 的特征矩形，我想将它裁剪（考虑其纵横比）为 (0,0, 320,200），同时最小限度地裁剪面部矩形。

我有一个中心裁剪的工作实现，我确定图像的较大一侧并根据相同的比例缩放另一侧，将 x 和 y 设置为缩放 w/h 的中心 - 目标 w/h。

为了清楚起见，签名看起来像这样（在 Obj-C 中）：

```
(CGRect)crop:(CGSize)sourceSize toFitSize:(CGSize)fitSize withoutCroppingRect:(CGRect)featuresRect 
```

`sourceSize`原始图像的大小在哪里，`fitSize`是我想要将图像裁剪成的形状，并且`featuresRect`是一个矩形，在`(0,0,sourceSize.width, sourceSize,height)`.

也许这应该作为以特征矩形为中心的“中心裁剪”来完成？试图理解这甚至意味着什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T17:11:07.170

试试看，我认为它可以满足您的需求，或者至少可以将您推向正确的方向。输出矩形保持与源图像矩形相同的纵横比。

示例用法：

```
 CGRect sizedRect = [self cropSize:self.inputView.image.size
                         toFitSize:self.outputView.bounds.size
               withoutCroppingRect:self.regionOfInterest.frame];

 CGImageRef cgImage = self.inputView.image.CGImage;

 CGImageRef cgCroppedImage =  CGImageCreateWithImageInRect (
                                         cgImage,
                                         sizedRect
                                         );

 self.outputView.image = [UIImage imageWithCGImage:cgCroppedImage]; 
```

您需要考虑许多问题，特别是：
- 您返回的矩形可能大于 fitSize，因为它不会裁剪 featuresRect，因此您可能需要检查这一点并在之后缩放图像应用裁剪（或适当地设置输出 imageView 的 scaleToFit）。
- 您从哪里获得 ROI 帧数据？它是相对于原始源图像，还是相对于包含源图像的 imageView。如果是后者，您需要确保源图像的大小与它的 imageView 为 1:1，因为裁剪矩形应用于图像，而不是 imageView。
- 输出 imageView 小于输入 imageView。我不确定如果它更大会做什么，但它可能会引入类似的缩放问题。
- 您将需要添加除零错误检查。

```
-     (CGRect)cropSize:(CGSize)sourceSize 
             toFitSize:(CGSize)fitSize
   withoutCroppingRect:(CGRect)featuresRect
{
    CGRect result = CGRectZero;
    BOOL fitSizeIsTaller;
    CGFloat sourceRatio = sourceSize.width / sourceSize.height;
    CGFloat fitRatio    = fitSize.width    / fitSize.height;
     if (sourceRatio > fitRatio)
            fitSizeIsTaller = YES;
     else   fitSizeIsTaller = NO;

        //size sourceRect to fitSize
    if (fitSizeIsTaller){
        result.size.width  = fitSize.width;
        result.size.height = result.size.width / sourceRatio;
    } else {
        result.size.height = fitSize.height;
        result.size.width  = result.size.height * sourceRatio;
    }
        //make sure it is at least as large as fitSize
    if (result.size.height < featuresRect.size.height) {
        result.size.height = featuresRect.size.height;
        result.size.width  = result.size.height * sourceRatio;
    }

    if (result.size.width  < featuresRect.size.width) {
        result.size.width  = featuresRect.size.width;
        result.size.height = result.size.width / sourceRatio;
    }

            //locate resultRect in center
    result.origin.x = (sourceSize.width  - result.size.width )/2;
    result.origin.y = (sourceSize.height - result.size.height)/2;

            //shift origin of result to make sure it includes ROI

    if (featuresRect.origin.x < result.origin.x )    //shift right?
              result.origin.x = featuresRect.origin.x;
    else
        if ((featuresRect.origin.x + featuresRect.size.width)  
               >  (result.origin.x + result.size.width))  //shift left?
            result.origin.x = (featuresRect.origin.x + featuresRect.size.width)
                            - result.size.width;

    if (featuresRect.origin.y < result.origin.y )    //shift up?
              result.origin.y = featuresRect.origin.y;
    else
        if ((featuresRect.origin.y + featuresRect.size.height)  
                > (result.origin.y + result.size.height))  //shift down?
            result.origin.y = (featuresRect.origin.y+featuresRect.size.height)
                            - result.size.height;
    return result;
} 
```

# objective-c - 如何仅旋转 MFMailComposeViewController

> ID：14295887
> 
> 赞同：2
> 
> 时间：2013-01-12T17:26:44.027
> 
> 标签：objective-c, cocoa-touch, rotation, mfmailcomposeviewcontroller

我有一个在 iPod Touch/iPhone 上不应该旋转的应用程序。但是，我确实有一个 MFMaiComposeViewController 供用户发送错误报告。但是，我的应用程序是如何设置的，没有任何东西可以旋转，这很好，除了这个单一的视图。我怎样才能让它旋转到横向。它在一个类中声明，如下所示：

```
//
//  LogbookSecondViewController.h
//  Logbook iDM
//
//  Created by Josiah Bruner on 9/20/12.
//  Copyright (c) 2012 Infinite Software Technologies. All rights reserved.
//

#import <UIKit/UIKit.h>
#import <MessageUI/MessageUI.h>

@interface LogbookSecondViewController : UIViewController  <MFMailComposeViewControllerDelegate>
{
        MFMailComposeViewController *email;
}

@property (nonatomic, retain) MFMailComposeViewController *email;

@end 
```

在他们中

```
- (IBAction)sendEmail:(id)sender {
    NSLog(@"ToolsController - Send Email");
    NSString *MailTO = @"infinite@qualityservice.com";
    email = [[MFMailComposeViewController alloc] init];
    email.mailComposeDelegate = self;
    NSArray *recipitants = [NSArray arrayWithObject:MailTO];
    // Subject
    [email setSubject:@"Bug/Problem/Suggestion, Logbook iDM"];

    [email setToRecipients:recipitants];

    // Present it
    [email setModalPresentationStyle:UIModalPresentationFormSheet];
    [email setModalTransitionStyle:UIModalTransitionStyleCoverVertical];
    [self presentViewController:email animated:YES completion:nil];
}

- (void) mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError *)error {
    [email dismissViewControllerAnimated:YES completion:nil];

} 
```

我怎样才能只允许这个视图旋转？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T20:30:52.687

创建您自己的`MyCustomMailComposeViewController`扩展类（或其他类）`MFMailComposeViewController`。您需要添加到此类的实现中的是：

```
// For iOS 6.0+
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskLandscape;
}

// For iOS 4.x and 5.x
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

此代码假定您只想要邮件编写器的横向。如果您想要所有方向，只需返回 YES。

然后改变：

```
email = [[MFMailComposeViewController alloc] init]; 
```

至：

```
email = [[MyCustomMailComposeViewController alloc] init]; 
```

# arrays - scala - 将地图转换为二维数组

> ID：14295891
> 
> 赞同：1
> 
> 时间：2013-01-12T17:27:09.870
> 
> 标签：arrays, scala

我试图转换我的地图：

```
private var map=Map[String,Double]() 
```

进入二维数组，但我在做这件事时遇到了麻烦。有人可以帮助我或给我和它是如何完成的例子吗？我在创建数组时也遇到了麻烦，所以如果你能帮助我，我会很高兴。

感谢您的宝贵时间，祝您有美好的一天！:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T17:32:12.067

toArray 方法看起来很有希望：

```
 res6: scala.collection.immutable.Map[java.lang.String,Double] = Map(a -> 1.1, b -> 2.2, c -> 3.0)

  scala> res6.toArray
  res7: Array[(java.lang.String, Double)] = Array((a,1.1), (b,2.2), (c,3.0)) 
```

如果你真的想要一个数组而不是元组：

```
 scala> res6.toArray.map(x => Array(x._1, x._2))
  res8: Array[Array[Any]] = Array(Array(a, 1.1), Array(b, 2.2), Array(c, 3.0)) 
```

# ruby-on-rails - 如何使用 each_with 将输出限制为仅 3 行

> ID：14295892
> 
> 赞同：0
> 
> 时间：2013-01-12T17:27:17.817
> 
> 标签：ruby-on-rails

这是许多不同数字的结果，以及如何将输出限制为仅 3 行

```
<% @user.dids.each_with_index{ |did, i| %>
<li><%= did.did %></li>
<% } %> 
```

**结果**

```
<li>number 123123123</li>
<li>number 123123123</li>
<li>number 123123123</li>
<li>number 123123123</li>
<li>number 123123123</li> 
```

但我想如果用户有超过 3 个数字：

```
<li>number 123123123</li>
<li>number 123123123</li>
<li>number 123123123</li>
<li>and more</li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:33:34.187

```
<% @user.dids.first(3).each{ |did| %> 
```

只会让你得到前三个

然后你可以做一个

```
 <% if @user.dids.count > 3 %>
   <li>and more</li>
 <% end %> 
```

# ios - 如何用 iOS 中 MediaItem 中的 Unknown 替换 NULL？

> ID：14295893
> 
> 赞同：0
> 
> 时间：2013-01-12T17:27:18.177
> 
> 标签：ios, cocoa-touch, mpmediaitem

当我从 iOS 中检索媒体信息（如`Artist`、、`Album`歌曲标题`MPMediaItem`）时，有些歌曲没有艺术家姓名和专辑。

所以我得到了 NULL 的返回值

这是我的代码

```
MPMediaItem *currentItem = self.player.nowPlayingItem;

    NSString *Artist = [currentItem valueForProperty:MPMediaItemPropertyArtist];
    NSString *Title = [currentItem valueForProperty:MPMediaItemPropertyTitle];
    NSString *Album = [currentItem valueForProperty:MPMediaItemPropertyAlbumTitle]; 
```

如果歌曲没有 Artist 和 Album name ，则返回`NULL`Value。

我想用值替换那个`NULL`值`Unknown`。

我该如何更换它？

感谢您的阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:33:57.370

```
- (NSString*)getValueFromMediaItem:(MPMediaItem*)item forKey:(NSUInteger)key
{
    NSString * value = [item valueForProperty:key];

   if([value isKindOfClass:[NSNull class]] || !value)
      return @"Unknown";

    return value;
}

//call this by:
    NSString *Artist = [self getValueFromMediaItem:currentItem forKey: MPMediaItemPropertyArtist]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T17:34:56.660

如果你想优雅，你可以添加一个类别，`MPMediaItem`如下所示：

```
@implementation MPMediaItem (Readable)

- (id)readableValueForProperty:(NSString *)prop
{
    id originalValue = [self valueForProperty:prop];

    if (originalValue == nil) {
        return @"Unknown";
    }

    return originalValue;
}

@end 
```

然后你可以这样称呼它：

```
NSString *artist = [currentItem readableValueForProperty:MPMediaItemPropertyArtist]; 
```

请注意，如果您获得的财产不是`NSString`最初的财产，这很危险。不过，如果您只使用字符串值，这应该没问题。

一种始终安全但可读性较差（且更冗余）的方法是手动检查每个返回值：

```
NSString *artist = [currentItem valueForProperty:MPMediaItemPropertyArtist];
if (artist == nil) artist = @"Unknown"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-07T06:16:29.727

```
 if (strArtist==nil)
        {
            NSString *emptystring=@" ";
            [ArrayArtist addObject:emptystring];
        }
        else
        {
            [ArrayArtist addObject:strArtist];

        } 
```

# android - 如何将按钮的背景设置回 default_holo_dark

> ID：14295894
> 
> 赞同：3
> 
> 时间：2013-01-12T17:27:20.050
> 
> 标签：android, button, background, themes

我需要帮助在运行时将按钮背景设置为默认全息黑暗。在编写布局时，可以使用 轻松设置背景`@android:drawable/btn_default_holo_dark`，但我找不到 btn_default_holo_dark 对应的可绘制 id。`android.R.drawable.btn_default_holo_dark`不存在，`android.R.drawable.btn_default`也不适合全息黑暗主题。

为了解决这个问题，我希望你能告诉我按钮默认全息黑暗风格的正确 id，或者另一种简单的方法将按钮重置为其默认主题风格（在我的情况下是全息黑暗）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-12T17:52:22.320

您不能设置它，因为该资源不是公共的。将其复制到项目的`res/drawable`文件夹中。您将在以下位置找到 xml 文件

```
<sdk>/platforms/android-<version>/data/res/drawable/btn_default_holo_dark.xml 
```

您还需要复制文件中引用的其他可绘制对象。

# intuit-partner-platform - 将付款添加到销售收据

> ID：14295895
> 
> 赞同：0
> 
> 时间：2013-01-12T17:27:21.730
> 
> 标签：intuit-partner-platform, quickbooks-online

我想将信用卡类型添加到销售收据，但是，我在 SR 上看不到信用卡信息。这是我的代码：

```
//Set Payment Detail in Header 
        Intuit.Ipp.Data.Qbo.PaymentDetail qboSalesReceiptHeaderPaymentDetail = new Intuit.Ipp.Data.Qbo.PaymentDetail();
        CreditCardPayment cc = new CreditCardPayment();
        cc.CreditChargeInfo = new CreditChargeInfo();
        //to do another credit card type
        cc.CreditChargeInfo.Type = CreditCardTypeEnum.OtherCreditCard;
        cc.CreditChargeInfo.TypeSpecified = true;
        qboSalesReceiptHeaderPaymentDetail.Item = cc;
        //qboSalesReceiptHeaderPaymentDetail.Item = new CashPayment { Desc = "Cash Payment Ref #" };
        qboSalesReceiptHeader.Detail = qboSalesReceiptHeaderPaymentDetail;

        //Set Header 
        qboSalesReceipt.Header = qboSalesReceiptHeader; 
```

![付款方式](../Images/cfa6daa187abaeab61709fb9c128470f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T22:05:48.697

If you refer to the [documentation](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/SalesReceipt) you'll find that there's a field named:

```
PaymentMethodId 
```

The PaymentMethodId should refer to an Id value from one of the [Payment Methods](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0050_Data_Services/0400_QuickBooks_Online/PaymentMethod) in QuickBooks.

e.g. it's not a "credit card type" per se, it's a "payment method" that you're looking to specify (one of which might be a specific credit card type).

# php - PHP file_get_contents('php://input') 很慢

> ID：14295901
> 
> 赞同：1
> 
> 时间：2013-01-12T17:28:29.470
> 
> 标签：php, zend-framework, file-get-contents

我有一个复杂的 PHP 应用程序，它使用使用 Zend Framework v1.x 构建的 ESB 模型。性能已经成为一个问题，现在我知道原因了：读取 php://input 流始终需要几乎正好 10 秒。

这是来自 XDebug 跟踪日志的片段：

```
0.3985    6935880    -> Zend_Controller_Request_Http->getRawBody() /var/www/vas/Adapters/Database/application/controllers/AdapterController.php:473
0.3985    6936104    -> file_get_contents() /usr/share/php/ZendFramework-1.12.0/library/Zend/Controller/Request/Http.php:961
10.4134   6936096    -> trim() /usr/share/php/ZendFramework-1.12.0/library/Zend/Controller/Request/Http.php:963 
```

我们部署了一个 ESB 模型，请求从门户到 ESB，再到数据库适配器。单独访问任何一台服务器似乎没有问题，但只要请求在服务器之间（实际上是同一台服务器上的虚拟主机），问题就会出现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T23:36:10.500

事实证明，这是 Apache httpd 或 PHP 中的一个错误，也是 Zend Framework v 1.x 中的一个错误。

当内容长度标头的值超过实际内容长度时，就会出现该错误。

例如，

```
curl http://localhost/index.php -H "Content-Length: 3" --data "12" 
```

在上面的示例中，在调用 file_get_contents('php://input') 之后必须达到 10 秒的超时，然后才能返回请求正文。

在 Zend Framework v1.x 中，设置 Zend_HTTP_Client 对象的原始主体会导致计算 Content-Length 标头并将其注入请求中。但是，除非请求是 POST、PUT 或 DELETE 请求，否则实际请求中的内容将被省略，进而触发 Apache/PHP 的无效内容长度错误。

我已经用 PHP 打开了一个 bug，还将用 Zend Framework 打开一个 bug。

# c# - 即使我将它包装在 Dispatcher.BeginInvoke 中，我也会收到错误消息

> ID：14295902
> 
> 赞同：1
> 
> 时间：2013-01-12T17:28:37.687
> 
> 标签：c#, windows-phone-7, backgroundworker, windows-phone-8

在 c# 中，我试图`Image`在我的应用程序中淡入然后淡出。它在`MainPage`. 起初它工作得很好。但是如果我导航到另一个站点，让我们说`Settings.xaml`然后回到`MainPage`Dispatcher throws*`Invalid cross-thread access.`*

任何人都有一个想法，这就是我试图在我`BackgroundWorker`的`_DoWork`函数中设置图像不透明度的方式：

```
Dispatcher.BeginInvoke(() =>
                    {
                        MyImage.Opacity = opacity;
                    }); 
```

有趣的是，它没有坏，但在上面放了一个`breakpoint`，它说一切都是*`Invalid cross-thread access.`*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T18:05:02.097

尝试使用[Animation](http://msdn.microsoft.com/ru-ru/library/cc189019%28v=vs.95%29.aspx)来实现您的淡入淡出逻辑，而不是`BackgroundWorker`. 它可能会有所帮助。

你试过这种方法吗？

[使用Windows Phone Toolkit](http://phone.codeplex.com/)的另一种方法：

[WP7 深度过渡 | 关键概念和 API](http://www.windowsphonegeek.com/articles/wp7-transitions-in-depth--key-concepts-and-api)

[WP7 深度过渡 | 自定义过渡](http://www.windowsphonegeek.com/articles/wp7-transitions-in-depth--custom-transitions)

这是旧文章，但它们可能包含有用的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T14:05:17.783

尝试这个：

```
Dispatcher.Invoke(DispatcherPriority.ContextIdle, new Action(delegate()
        {
            //your code in another thread you want to invoke in UI thread
        })); 
```

您应该从 UI 线程调用它，例如从 MainWindow。从我的项目：

```
//Event raised on ImageSource property changed while Backgroundwoker in MainWindow class:
    void binding_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        MyProject.ImageCropSize crop = MyProject.ImageCropSize.SourceCrop;

        this.Dispatcher.Invoke(DispatcherPriority.ContextIdle, new Action(delegate()
        {
            BitmapImage bmisource = image1.Source as BitmapImage;
            bmisource = null;//new BitmapImage();
            GC.Collect();

            BitmapImage bmi = MyProject.ImageData.ConvertFromBitmapToBitmapImage(((ImageBinding)sender).BitMap, crop);
            image1.Source = bmi;
            ((ImageBinding)sender).Clear();

        }));
    } 
```

# android - 我无法使用 ActivityForResult 返回上一个活动

> ID：14295906
> 
> 赞同：0
> 
> 时间：2013-01-12T17:29:53.057
> 
> 标签：android, image-capture

我有这些代码。打开相机，拍照，但是当我点击“确定”按钮时，什么也没发生。回到以前的活动的唯一方法是单击对我没有用的“x”按钮:)。问题是什么？（onActivityResult 方法尚未完成。）（我曾经将此算法与**Android.provider.MediaStore.ACTION_IMAGE_CAPTURE**意图一起使用。一切正常。我不知道为什么我现在有问题。）

```
public void onClick(View v) {

            Intent getCameraImage = new Intent("android.media.action.IMAGE_CAPTURE");
            db.open();
            Cursor cr = db.getAllRecords();
            int count = cr.getCount();

            db.close();

            File cameraFolder;

            if (android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
                cameraFolder = new File(android.os.Environment.getExternalStorageDirectory(),"TSFC");
            else
                cameraFolder= ShowMessagesPage.this.getCacheDir();
            if(!cameraFolder.exists())
                cameraFolder.mkdirs();

            File photo = new File(Environment.getExternalStorageDirectory(), "TSFC/" + (count + 1) + ".jpg");
            getCameraImage.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo));

            initialURI = Uri.fromFile(photo);

            startActivityForResult(getCameraImage, CAMERA_RESULT);
        }});}

protected void onActivityResult(int requestCode, int resultCode,
          Intent intent) {
        super.onActivityResult(requestCode, resultCode, intent);

        if (resultCode == RESULT_OK) {
            Bundle extras = intent.getExtras();
            photo = (Uri) extras.get("data");

        }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:58:36.423

好的，它众所周知的错误，

只需添加此代码行，`photo.createNewFile();`

就像是，

```
File photo = new File(Environment.getExternalStorageDirectory(), "TSFC/" + (count + 1) + ".jpg");
photo.createNewFile();
getCameraImage.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(photo)); 
```

也别忘了，

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

让我知道你的进展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:34:31.733

使用`onActivityResult(..)`方法以这种方式返回结果。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (requestCode == CAMERA_RESULT) {
        // Make sure the request was successful

            if (resultCode == RESULT_OK) {
            Bundle extras = intent.getExtras();
            photo = (Uri) extras.get("data");

        }
    }
} 
```

# ruby-on-rails - 我的 rails 嵌套模型数据如何在没有 id 的情况下保存？

> ID：14295907
> 
> 赞同：0
> 
> 时间：2013-01-12T17:30:04.947
> 
> 标签：ruby-on-rails, database, post, resources

我有一个嵌套资源：

```
 resources :users do
    resources :cust_uploads
  end 
```

上传完成后，我可以在用户索引页面下查看它们的列表：

```
 <% @user.cust_uploads.each do |up| %>
     <li><%= up.name %></li>
  <% end %> 
```

但是当我转到：/users/3/cust_uploads/1 时，我收到一条记录未找到错误：找不到 id=1 的 CustUpload。我没有正确保存到数据库吗？

知道发生了什么或我如何诊断？

架构没有 ID 列，但我认为这是自动的？

```
ActiveRecord::Schema.define(:version => 20130109001001) do

  create_table "cust_uploads", :force => true do |t|
    t.string   "name"
    t.string   "cust_file_url"
    t.datetime "created_at",    :null => false
    t.datetime "updated_at",    :null => false
    t.integer  "user_id"
  end

  create_table "users", :force => true do |t|
    t.string   "email"
    t.string   "password_digest"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:39:06.083

也许 1 不是创建模型的 ID。尝试像这样打印它们，然后单击模型：

```
<% @user.cust_uploads.each do |up| %>
   <li><%= link_to up.name, up %></li>
<% end %> 
```

# rest - ServiceStack 和 NHibernate 集成创建两个会话？

> ID：14295912
> 
> 赞同：1
> 
> 时间：2013-01-12T17:30:22.460
> 
> 标签：rest, fluent-nhibernate, servicestack

我正在尝试关注此处的博客文章：[http](http://www.philliphaydon.com/2012/06/using-nhibernate-with-servicestack/) ://www.philliphaydon.com/2012/06/using-nhibernate-with-servicestack/尽管我的代码遇到了问题。基本上，我正在像 Phillip 一样设置 SessionFactory，而且我的服务看起来与 Phillip 的相同。

我遇到的问题是当试图从数据库中获取数据而不单步执行函数时——看起来会话在被访问之前就被终止了，然后代码似乎只是简单地崩溃了：

![NHProf ServiceStack 问题](../Images/35bf2cc396e9a36a81a773554a1f9e52.png) [http://i.stack.imgur.com/hw1jW.png](https://i.stack.imgur.com/hw1jW.png)

奇怪的是，当我尝试通过单步调试函数时，我的结果很好，NHProf 同意：

![NH 教授 ServiceStack 问题2](../Images/9eb0e102d8c85c8639e01701b647e510.png) [http://i.stack.imgur.com/DfNSi.png](https://i.stack.imgur.com/DfNSi.png)

有点奇怪，如果有人对为什么会发生这种情况有任何答案，将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:48:25.547

如果您在 EndRequest 上处理会话会发生什么？这应该使您不必担心每次进行数据库调用时都会处理您的会话。

我在 web.config 中使用以下内容来允许我附加到 FluentSessionManager.cs 中的 Init 事件：

```
<httpModules>
        <add name="MyFramework.FluentSessionManager" type="MyFramework.FluentSessionManager" />
</httpModules> 
```

在位于 MyFramework 命名空间的 FluentSessionManager.cs 中：

```
public void Init(HttpApplication context)
    {
        context.EndRequest += Application_EndRequest;
    }

public static void Application_EndRequest()
    {
        // Perform the disposing of your session here.  Commit, close, etc....
    } 
```

这应该允许您在 EndRequest 事件时关闭和处置您的会话。这也可以防止您的 SQL 服务器出现内存泄漏和僵尸连接。

希望这会有所帮助。

# javascript - 在 JavaScript 中转义单引号和双引号

> ID：14295919
> 
> 赞同：-7
> 
> 时间：2013-01-12T17:30:45.810
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 字符串中的双引号](https://stackoverflow.com/questions/10055773/double-quote-in-javascript-string)

```
var array=["famous quote by Shakespear is",""to be or not to be""] 
```

如何在`"`用于分隔元素的数组的第二个元素中转义块引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:31:31.240

使用反斜杠：

```
var str = "famous quote by Shakespear is, \"to be or not to be\"";
var str = 'famous quote by Shakespear is, \'to be or not to be\''; 
```

或者只是混合引号的类型：

```
var str = "famous quote by Shakespear is, 'to be or not to be'";
var str = 'famous quote by Shakespear is, "to be or not to be"'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T17:32:32.907

您可以使用反斜杠转义或在字符串周围使用单引号：

```
var array=["famous quote by Shakespear is","\"to be or not to be\""];
var array=["famous quote by Shakespear is",'"to be or not to be"']; 
```

只要正确配对，单引号和双引号是可以互换的。

# javascript - 数据类型检查提示复选框 javascript

> ID：14295922
> 
> 赞同：0
> 
> 时间：2013-01-12T17:31:16.750
> 
> 标签：javascript, types, prompt

如果在javascript中有数字，我如何检查提示框中的输入？

```
var name=prompt("enter your name"); 
```

在这种情况下，我的名字不应该有数字我该如何检查这种情况？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:34:16.413

```
var name = prompt(...) || '';
if (name.match(/\d/))
   alert("you can't use numbers in your name"); 
```

# c# - 如何在 FormView 中显示列表内容

> ID：14295923
> 
> 赞同：1
> 
> 时间：2013-01-12T17:31:19.987
> 
> 标签：c#, .net, formview

我有`WCF Service`一个方法，它`List of strings`基本上返回作者的姓名，我想将此数据源映射到`FormView`但是我得到以下输出`System.String[]`，因为有多个作者。

我怎么知道`FormView`在字符串中取 List 和 group 元素`,`。

```
 [DataContract]
public class PublicationDetail
{
    [DataMember]
    public string PubID { get; set; }
    [DataMember]
    public string Title { get; set; }
    [DataMember]
    public List<string> Authors { get; set; }
    [DataMember]
    public string Description { get; set; }
    [DataMember]
    public string Publisher { get; set; }
    [DataMember]
    public DateTime PubDate { get; set; }
}

        <ItemTemplate>
            ExtensionData:
            <asp:Label ID="ExtensionDataLabel" runat="server" Text='<%# Bind("ExtensionData") %>' />
            <br />
            Authors:
            <asp:Label ID="AuthorsLabel" runat="server" Text='<%# Bind("Authors") %>' />
            <br />
            Description:
            <asp:Label ID="DescriptionLabel" runat="server" Text='<%# Bind("Description") %>' />
            <br />
            PubDate:
            <asp:Label ID="PubDateLabel" runat="server" Text='<%# Bind("PubDate") %>' />
            <br />
            PubID:
            <asp:Label ID="PubIDLabel" runat="server" Text='<%# Bind("PubID") %>' />
            <br />
            Publisher:
            <asp:Label ID="PublisherLabel" runat="server" Text='<%# Bind("Publisher") %>' />
            <br />
            Title:
            <asp:Label ID="TitleLabel" runat="server" Text='<%# Bind("Title") %>' />
            <br />

        </ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:41:12.400

更改您的陈述如下：

```
Authors:
<asp:Panel ID="pnAddTransition" runat="server" Visible="false">
    <asp:Label ID="AuthorsLabel" runat="server" Text='<%# String.Join( ",", ((List<string>)Eval("Authors")).ToArray()) %>' />
<br /> 
```

# asp.net-mvc - ToDataSourceResult 扩展未填充 DataSourceResult 对象

> ID：14295924
> 
> 赞同：5
> 
> 时间：2013-01-12T17:31:22.607
> 
> 标签：asp.net-mvc, kendo-ui

KendoUI 添加的扩展方法（ToDataSourceResult）似乎在 Pages > Page #1 上失败。第一次加载页面时它工作正常，但是当我尝试将它与虚拟滚动一起使用以异步获取页面 2,3,4 ... N 时，该方法会忽略我正在尝试的 IEnumerable 对象中的所有数据进行改造。

我的代码如下：

我有一个 MVC 控制器，它可以像这样获取数据：

```
Database database = Database.GenerateDatabase();
ResultSet queryResults = database.GetEvents( 
    FilterHelper.GenerateQueryCriteria((List<IFilterDescriptor>) request.Filters, request.Page, request.PageSize) 
); 
```

Database.GetEvents 返回一个对象，如下所示：

```
public class ResultSet {

    public List<ResultSetRow> Set;
    public int PageRowCount;
    public int TotalRecordCount;
} 
```

每个 ResultSetRow 是一个类的实例，该类具有 1 个字符串和 2 个整数作为属性。

此时，我设置了一个断点并检查 ResultSet.Set 的内容。数据库正在正确地使用我使用 request.PageSize 指定的记录填充列表。我已确认将返回任何和所有页码的结果。

下一阶段，一切都很糟糕：

```
DataSourceResult result = ((IEnumerable<ResultSetRow>) queryResults.Set).ToDataSourceResult(request); 
```

我检查了 DataSourceResult 对象的内容，它的数组属性“数据”为空。

**为什么我的模型 (ResultSetRow) 无法转换为 Kendo 的 DataSourceResult 对象？**

一些附加信息：

*   未使用聚合、组、排序和过滤器。
*   Database.GetEvents 返回的结果数与请求的页面大小相匹配。

感谢您的帮助 SO 社区

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-12T17:42:06.787

使用的主要原因`ToDataSourceResult()`是它在数据库服务器上运行过滤/排序/分组/分页。因此，在给定`IQueryable`尚未执行的情况下，它的效果最好。

它确实适用于`IEnumerable`，但是您必须将整个表加载到内存中，这是不可扩展的。

因为你只得到一个页面的数据，当`ToDataSourceResult`被调用时，它认为这是数据库中的所有数据，因此返回一个空列表，而不是第一个页面。

# java - 非唯一表/别名：在查询 Java 程序中

> ID：14295927
> 
> 赞同：0
> 
> 时间：2013-01-12T17:31:43.503
> 
> 标签：java, mysql

我在我的项目中遇到了 mysql 问题。我认为这里有问题

```
rs = bd.consultar(
      "SELECT mensagens.assunto as 'Assunto', mensagens.texto as 'texto', usuarios.username as 'Para', mensagens.data_hora as 'Hora Data' "
       + "FROM mensagens, usuarios"
       + "WHERE mensagens.para = usuarios.idusuarios and mensagens.de = " + Login.getUsuarioAtual().getId() + ";");

        while (rs.next()) {
        mensagemTemp = new Mensagem(rs.getString("Assunto"), rs.getString("texto"),
                Login.getUsuarioAtual().getUsername(), rs.getString("Para"), rs.getDate("Hora Data"));

        enviadas.add(mensagemTemp);
    } 
```

这是错误：

```
    com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：不唯一的表/别名：'mensagens'
    ...
    在 Banco_de_Dados.BancoDeDados.consultar(BancoDeDados.java:29)
        在 Banco_de_Dados.BancoMensagem.mensagensEnviadas(BancoMensagem.java:93)
        在 GUI.Mensagens.MensagensRecebidas.initComponents(MensagensRecebidas.java:101)
        在 GUI.Mensagens.MensagensRecebidas.(MensagensRecebidas.java:27)
        在 GUI.Login.jBentrarActionPerformed(Login.java:230)
        在 GUI.Login.access $200(Login.java:20)
        在 GUI.Login$3.actionPerformed(Login.java:171)
    ...

```

我已经在 mysql 中使用 java 代码完成了查询，它可以工作。有人能看出什么不对吗？？？

对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T11:22:42.750

哦，我只是在查询中+“FROM mensagens，usuarios”之后忘记了一个空格，抱歉打扰

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:48:48.057

```
SELECT m.Assunto 
     , m.Texto 
     , u.username Para
     , m.data_hora `Hora Data`
  FROM mensagens m
  JOIN usuarios u
    ON u.idusuarios = m.username 
 WHERE m.de = Login.getUsuarioAtual().getId(); 
```

# c - 何时/如何删除 C 中的信号量

> ID：14295928
> 
> 赞同：0
> 
> 时间：2013-01-12T17:31:57.073
> 
> 标签：c, semaphore

我正在编写一个简单的程序，它在读取或写入时使用共享内存和信号量来锁定它。程序完成后，必须删除所有共享内存和信号量。我们有自己的 sem 库，它实现了函数 seminit、semrm、semgrab、semdown、semup。我已经让程序正常工作，但我不清楚信号量删除部分。

由于最后必须删除所有信号量，而程序被多次调用，我什么时候删除它们？我的意思是，我必须确保在它们仍在使用时不会删除它们。有没有可能检查它是否仍在使用？

我不确定如何解决这个问题。

简短的问题总结：程序被多次调用，最后需要删除信号量，只有一个程序需要处理，而不是另一个正在清理的程序。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-12T17:54:23.907

如果没有关于库以及如何使用信号量的更多详细信息，我会结合使用单例模式和引用计数。

单例模式的描述可以在维基百科上找到：[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)

我会将信号量设为单例，并添加一个变量来跟踪已发出的信号量实例的数量。我会增加`getInstance()`方法中的变量。然后，我将向`releaseInstance()`信号量类添加一个递减计数器的方法。 `releaseInstance()`当程序使用信号量完成时将被调用。然后，我会添加一个`isInUse()`方法来检查引用计数是否为 0。如果是，您可以删除信号量。

因此，您的程序将具有以下内容：

```
mySemaphore.releaseInstance();
if(mySemaphore.isInUse() != true) {
    delete mySemaphore;
}
else {
    // Do nothing since it is a Singleton, and someone else is using it.
    // i.e. - We don't need to delete anything.
} 
```

# jquery - addClass 函数中的 if 语句返回错误值

> ID：14295929
> 
> 赞同：1
> 
> 时间：2013-01-12T17:31:57.783
> 
> 标签：jquery, if-statement, addclass

[小提琴](http://jsfiddle.net/BramVanroy/tKL8E/31/)。在这个小提琴中，有两个下拉菜单。第一个是“Categorieën”，第二个是“Contact”。分配给列表项的类确定悬停时的箭头是指向左侧还是指向右侧（哪个空间的左侧空间最多）。下面的代码应该解决这个问题。但是，正如您在小提琴中看到的那样，“联系人”下拉列表项指向错误的方式，它应该指向左侧。

```
$("ul.sub-menu > li:not(':last-child')").addClass(function () {
  var $this = $(this),
    offL = $this.offset().left,
    wW = $(window).width();

  if (offL > ((wW / 2) - $this.width())) {
    return "over-left";
  } else {
    return "over-right";
  }
}); 
```

我哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T19:50:07.053

**解决方案**：

```
// We need to briefly show the sub-menu to get its offset and width
$("ul.sub-menu").css({
  visibility: "hidden",
  display: 'block'});

  $("ul.sub-menu > li:not(':last-child')").each(function () {
    var $this = $(this);
    $this.addClass(function () {
      var offL = $this.offset().left,
        wW = $(window).width();
      if (offL > ((wW / 2) - $this.width())) {
        return "over-left";
      } else {
        return "over-right";
      }
    });
  });

$("ul.sub-menu").css({
  visibility: "visible",
  display: "none"
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:52:49.933

由于菜单行不显示，`$this.width()`始终等于`0`并且您的条件永远不会满足。

我`show()`在类属性循环之前添加了检索函数中使用的正确菜单宽度值。

[http://jsfiddle.net/tKL8E/33/](http://jsfiddle.net/tKL8E/33/)

```
// RELEVANT CDOE
$("ul.sub-menu > li:not(':last-child')").show().addClass(function () {
  var $this = $(this),
    offL = $this.offset().left,
    wW = $(window).width();
  console.log(offL + ' ' + (wW/2) + ' ' + $this.width())

  if (offL >= ((wW / 2) - $this.width() - 238.5)) {
    return "over-left";
  } else {
    return "over-right";
  }
});
// /END RELEVANT CODE 
```

# c - 正确处理 Lua 绑定 C 代码中的 malloc 调用

> ID：14295930
> 
> 赞同：1
> 
> 时间：2013-01-12T17:32:02.190
> 
> 标签：c, lua, malloc

我正在编写一个小型[Lua](http://www.lua.org)绑定库。目前我提供了一个非常简单的结构来保存键/值，其中 my`value`是一个`void pointer`.

```
struct kvPair {
       enum EVENT_TYPE type;
       char *key;
       void *value;
   };

typedef struct kvPair KeyValuePair;

KeyValuePair kvPairWithNumber(char *key, float number)
{
    KeyValuePair kv;
    float *aux = malloc(sizeof(float)); // <-- help
    *aux = number;
    kv.key = key;
    kv.type = NUMBER;
    kv.value = aux;
    return kv;
} 
```

我想知道这种用例......什么是处理 malloc 的好方法？我真的不想这样做：

```
if (aux == NULL) {
    exit(0);
} 
```

也许我可以预先分配一块内存，并用我自己更简单的实现覆盖 malloc 调用（使用简单堆栈的自定义内存分配器？）

想收到反馈和例子，简单是首选。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T04:23:55.043

你绝对不想退出。任何脚本或扩展都不应该使整个解释器崩溃。

基本上有两种表达错误的方法。第一种方法是使用C API 提供的[lua_error](http://www.lua.org/manual/5.1/manual.html#lua_error)或[luaL_error 。](http://www.lua.org/manual/5.1/manual.html#luaL_error)第二种方法更多的是一种策略：[返回`nil`和错误消息](http://www.lua.org/pil/8.3.html)（通常与 结合使用`assert`）。

您正在用 C 编写扩展程序，因此您基本上只能通过返回码来处理 C 风格的错误。您很可能需要更改您的函数签名以支持这一点。

```
int kvPairWithNumber(KeyValuePair * kv, char *key, float number)
{
    float *aux = malloc(sizeof(float));
    if (aux == NULL) {
        return 0;
        // note: you could instead just put lua_error here
    }
    *aux = number;
    kv->key = key;
    kv->type = NUMBER;
    kv->value = aux;
    return 1;
} 
```

然后您可以处理 Lua 函数中的错误：

```
int my_lua_function(lua_State * L)
{
    KeyValuePair kv = {0};

    // first method:
    if (!kvPairWithNumber(&kv, "asdf", 1.0)) {
        luaL_error(L, "could not create pair!");
    }

    // second method:
    if (!kvPairWithNumber(&kv, "asdf", 1.0)) {
        lua_pushnil(L);
        lua_pushstring(L, "could not create a pair!");
        return 2;
    }
} 
```

使用您的扩展的 Lua 代码如下所示：

```
-- first method:
local result = xpcall(my_lua_function, error_handler)

-- note: if you need to pass args, you will need a closure
local result = xpcall(function() my_lua_function(x, y, z) end, error_handler)

-- second method:
local result = assert(my_lua_function()) 
```

# java - Java 客户端-服务器应用程序中的 UnknownHostException

> ID：14295931
> 
> 赞同：0
> 
> 时间：2013-01-12T17:32:05.530
> 
> 标签：java, client-server

我正在设计一个共享文件的 Java 应用程序，但是在尝试激活方法接收文件和发送文件时，我得到一个异常，知道用户输入了文件的名称，服务器获取它并获取文件并发送它。

```
Exception in thread "main" java.net.UnknownHostException: Hasan.txt at 
java.net.PlainSocketImpl.connect(PlainSocketImpl.java:177) at 
java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366) at 
java.net.Socket.connect(Socket.java:529) at 
java.net.Socket.connect(Socket.java:478) at 
java.net.Socket.<init>(Socket.java:375) at 
java.net.Socket.<init>(Socket.java:189) at 
p2pfilesharingproject.ClientP2P.main(ClientP2P.java:25) Java Result: 1 
```

这是我的代码

客户代码

```
import java.io.*;
import java.net.*;
import java.util.*;

public class ClientP2P {

    public static void main(String argv[]) throws Exception {
        Scanner s = new Scanner(System.in);
        String sentence;
        String modifiedSentence;
        System.out.print("which Port  are you going to listen to ?");

        int Socket = s.nextInt();

        String host = s.next();
        BufferedReader inFromUser =
                new BufferedReader(new InputStreamReader(System.in));

        Socket clientSocket = new Socket(host, Socket);

        DataOutputStream outToServer =
                new DataOutputStream(clientSocket.getOutputStream());

        BufferedReader inFromServer =
                new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

        sentence = inFromUser.readLine();  
        RecieveFile(sentence);
        outToServer.writeBytes(sentence);

    }

    public static void RecieveFile(String Fname)
    {
        byte[] aByte = new byte[1];
        int bytesRead;

        Socket clientSocket = null;
        InputStream is = null;

        try {
            clientSocket = new Socket("127.0.0.1", 111);
            is = clientSocket.getInputStream();
        } catch (IOException ex) {
            // Do exception handling
        }
        ByteArrayOutputStream baos = new ByteArrayOutputStream();

        if (is != null) {

            FileOutputStream fos = null;
            BufferedOutputStream bos = null;
            try {
                fos = new FileOutputStream("E:\\"+Fname);
                bos = new BufferedOutputStream(fos);
                bytesRead = is.read(aByte, 0, aByte.length);

                do {
                        baos.write(aByte);
                        bytesRead = is.read(aByte);
                } while (bytesRead != -1);

                bos.write(baos.toByteArray());
                bos.flush();
                bos.close();
                clientSocket.close();
            } catch (IOException ex) {
                ex.getStackTrace();
            }
    }

}
} 
```

服务器 Cpde

```
import java.io.*;
import java.net.*;
import java.util.*;

public class ServerP2P {

    public static void listfile() {

 String path = "C:/SAVE"; 

  String files;
  File folder = new File(path);
  File[] listOfFiles = folder.listFiles(); 

  for (int i = 0; i < listOfFiles.length; i++) 
  {

   if (listOfFiles[i].isFile()) 
   {
   files = listOfFiles[i].getName();
   System.out.println(files);
      }
  }
    }

    public static void main(String argv[]) throws Exception {
        Scanner s = new Scanner(System.in);
        String clientSentence;
        String capitalizedSentence;
        System.out.print("Listen on Port Number : ");
        int Socket = s.nextInt();

        ServerSocket welcomeSocket = new ServerSocket(Socket);
        listfile();
        while (true) {

            Socket connectionSocket = welcomeSocket.accept();

            BufferedReader inFromClient =
                    new BufferedReader(new InputStreamReader(connectionSocket.getInputStream()));

            DataOutputStream outToClient =
                    new DataOutputStream(connectionSocket.getOutputStream());

            clientSentence = inFromClient.readLine();
            String fn = inFromClient.readLine();
            SendFile(fn);

        }
    }

    public static void SendFile(String FileName) {
        while (true) {
            ServerSocket welcomeSocket = null;
            Socket connectionSocket = null;
            BufferedOutputStream outToClient = null;

            try {
                welcomeSocket = new ServerSocket(111);
                connectionSocket = welcomeSocket.accept();
                outToClient = new BufferedOutputStream(connectionSocket.getOutputStream());
            } catch (IOException ex) {
                // Do exception handling
            }

            if (outToClient != null) {
                File myFile = new File("C:\\" + FileName);

                byte[] mybytearray = new byte[(int) myFile.length()];

                FileInputStream fis = null;

                try {
                    fis = new FileInputStream(myFile);
                } catch (FileNotFoundException ex) {
                    // Do exception handling
                }
                BufferedInputStream bis = new BufferedInputStream(fis);

                try {
                    bis.read(mybytearray, 0, mybytearray.length);
                    outToClient.write(mybytearray, 0, mybytearray.length);
                    outToClient.flush();
                    outToClient.close();
                    connectionSocket.close();

                    // File sent, exit the main method
                    return;
                } catch (IOException ex) {
                    ex.printStackTrace();
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T17:50:29.450

找不到名为“Hassan.txt”的服务器。确保您可以通过网络访问该套接字。IP 地址通常是数字（除非您使用“localhost”或您的主机在 DNS 中列出）；看起来您使用的是文件名而不是主机本身。

# jquery - 在 jQuery 中计算对象位置

> ID：14295934
> 
> 赞同：0
> 
> 时间：2013-01-12T17:32:15.393
> 
> 标签：jquery

我试图将一个对象放置在屏幕区域的中间高度。我认为这段代码可以用来计算我的对象的 Y 位置：

```
var y = $chart.offset().top + $chart.outerHeight()/2; 
```

但是该对象显示的距离图表顶部大约 60%，低于我想要的。以下是来自调试器的一些实际数字：

```
$chart.offset().top
367.79999923706055
$chart.outerHeight()
451
y
593.2999992370605 
```

做这样的事情的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T10:01:16.350

看来您并没有严格限制将 jQuery 用于此解决方案（评论），但您不知道任何其他替代方案。所以我提议一个。

## 替代方法 - 使用 CSS

您可以使用 CSS 代替使用 Javascript 来定位您的元素，并将您的元素定位`fixed`在屏幕中间。几个最明显的好处：

1.  您不必在客户端上执行额外的代码 = 提高性能
2.  无论文档滚动如何，元素都保持集中 - 如果您希望使用 Javascript 进行相同的操作，您应该重新计算滚动事件的位置，但是当文档快速滚动时元素仍然会*跳跃*，因为 Javascript 执行不是*那么即时（还）*

由于您正在动态添加元素，您所要做的就是为其设置特定的 CSS 类名，该类名定义了 CSS 文件中的中心位置。

如果您不知道如何在屏幕中间放置一个元素，[这个 JSFiddle](http://jsfiddle.net/3CSH9/)将向您展示如何。它只是将元素定位在视口的中间，但不会生成新元素，因为您似乎已经知道如何做到这一点。

### 必需的 CSS

```
.centralise {
  width: 200px; /* set dimension */
  height: 50px;
  position: fixed;
  top: 50%; /* move top left to screen centre */
  left: 50%;
  margin: -25px 0 0 -100px; /* offset by half element's size left and up */
  text-align: center; /* centralise text within element */
  line-height: 50px;
} 
```

如果您将元素 50% 放在顶部和左侧，则必须给它一个特定的尺寸，这样您就可以设置精确的负边距以使其处于死点。

## 不可能有固定尺寸？

如果您无法设置特定的元素尺寸，那么`margin: 25% auto;`应该对此有所帮助。但在这种情况下，它只会水平定位在死点。垂直位置通常没有那么大的问题，因为您可以将元素放在上半部分或大致中心，它仍然看起来像集中。有时它甚至可能比中心更高，这取决于您的文档内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:36:40.183

您必须设置`y`为`(height of window / 2) - (height of element / 2)`.

```
var y = $(window).height() /2 - $chart.outerHeight()/2; 
```

另外，检查CSS：

```
position:absolute; 
```

[现场演示](http://jsfiddle.net/CY38d/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T17:37:20.597

见我的[jsfiddle](http://jsfiddle.net/ktraff/yaark/)。

如果您只是在寻找父元素的中心，您可以`height()`在父容器中使用并附加您的元素：

```
var $parent = $('#parent');
var middle = $parent.height() / 2;
var $child = $(document.createElement('div'));
$child.attr("id", "child").text("hi")
   .css("position", "absolute")
   .css("top", middle - $child.height() / 2);
$parent.append($child); 
```

# javascript - 渲染到 html5 画布时，有什么东西会导致文本模糊或模糊吗？

> ID：14295936
> 
> 赞同：0
> 
> 时间：2013-01-12T17:32:19.377
> 
> 标签：javascript, html, fonts, html5-canvas

我正在将文本绘制到 html5 画布上。由于某种原因，呈现的文本模糊或有时模糊。

这里有两个例子：![在此处输入图像描述](../Images/922368b94e6d31e9ab3bab957b3f41f8.png) ![在此处输入图像描述](../Images/4082d7b098eaac25cf7a4aadb73debd5.png)。

我正在使用`fillText(text, x, y)`.

我已经放置了日志语句来计算我调用的次数`fillText`。我相当肯定`fillText`唯一的调用一次。

是否有任何其他因素可能导致 html5 画布呈现模糊或模糊的文本？

标准浏览器字体或谷歌网络字体会出现模糊。

我应该注意到我有一个 1920x1080 背景图像，在画布元素的顶部有许多 div。

# templates - Drupal 7：如何自定义用户配置文件？以及如何添加 profile2 字段？

> ID：14295939
> 
> 赞同：-1
> 
> 时间：2013-01-12T17:32:22.843
> 
> 标签：templates, drupal, profile, field

user/n 下的个人资料将仅显示个人资料图片和用户名。

我正在使用 Omega 子主题。我已经复制并粘贴了默认的 user-profile.tpl.php 文件，删除了所有内容并添加了这两行，希望其中之一可以工作：

```
print drupal_render(field_view_field('profile2', $profile['main'], 'field_nombrecompleto1'));
print $field_profile_nombre_completo['value']; 
```

第二行指的是原始核心配置文件字段，第一行指的是导入的字段（我在升级到 D7 之前使用 D6 中的 migrate 模块导入）。

没有一个字段被打印出来。我在模板顶部添加了这个：

```
print "<pre>";  
$vars = get_defined_vars();
print_r($vars);  
print "</pre>"; 
```

什么也没发生。所以我将该代码添加到我的 page.tpl 文件的顶部，它出现了整个变量列表。在最顶部打印：

```
[template_file] => sites/all/themes/liga/templates/page.tpl.php 
```

在某些时候，它实际上可以识别（核心配置文件）字段：

```
 [content] => Array
                                (
                                    [content] => Array
                                        (
                                            [system_main] => Array
                                                (
                                                    [field_profile_nombre_completo] => Array
                                                        (
                                                            [#theme] => field
                                                            [#weight] => 0
                                                            [#title] => Apellido y Nombres
                                                            [#access] => 1
                                                            [#label_display] => hidden
                                                            [#view_mode] => full
                                                            [#language] => und
                                                            [#field_name] => field_profile_nombre_completo
                                                            [#field_type] => text
... 
```

然后我删除了我的用户配置文件模板中的所有内容，只打印了 XXXXXX，但没有打印出来。它仍然打印个人资料图像和用户名。

**现在我有两个问题：如何自定义配置文件模板 (user-profile.tpl.php)，因为它无法识别我的主题文件夹中的文件，以及如何在用户配置文件中打印 profile2 字段信息。**

希望有人能给我一些见解或线索。谢谢！！！

罗莎蒙达

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T12:35:19.753

我认为默认情况下 profile2 字段呈现在用户个人资料页面上的单独选项卡式页面上。您应该能够使用功能[profile2_by_uid_load($uid, $type_name)获取用户配置文件字段](http://drupalcontrib.org/api/drupal/contributions!profile2!contrib!profile2_page.module/function/profile2_by_uid_load/7 "profile2_by_uid_load")

# c++ - 字符串的 std::map 到 boost::thread_specific_ptr

> ID：14295943
> 
> 赞同：3
> 
> 时间：2013-01-12T17:32:38.950
> 
> 标签：c++, boost, c++11, g++, std-pair

为什么这无法编译 g++4.6 和 g++4.7？我正在尝试将字符串映射到线程特定的存储。我相信我在 boost 1.48 中有类似的东西。其实和boost的版本无关，而是-std=c++0x这个标志。如果那不存在，它会编译。因此，寻找错误的解释以及如何解决它。

谢谢

```
#include <map>
#include <boost/thread/tss.hpp>
#include <boost/shared_ptr.hpp>

int main(int argc, char** argv) {
  typedef boost::thread_specific_ptr< int > Tss_int_ptr;
  typedef std::map< std::string, Tss_int_ptr > Tss_int_map_t;
  Tss_int_map_t tmap;
  return 0;
} 
```

* * *

错误消息如下。

```
g++-4.7 -g -std=c++0x -I"/home/someone/open_source/admin/install/boost_1_52_0/include" -c  ~/tmp/fail.cpp
In file included from /usr/include/c++/4.7/bits/stl_algobase.h:65:0,
             from /usr/include/c++/4.7/bits/stl_tree.h:63,
             from /usr/include/c++/4.7/map:60,
             from /home/someone/tmp/fail.cpp:1:
/usr/include/c++/4.7/bits/stl_pair.h: In instantiation of ‘struct std::pair<const std::basic_string<char>, boost::thread_specific_ptr<int> >’:
/usr/include/c++/4.7/bits/stl_tree.h:133:12:   required from ‘struct std::_Rb_tree_node<std::pair<const std::basic_string<char>, boost::thread_specific_ptr<int> > >’
/usr/include/c++/4.7/bits/stl_tree.h:1082:4:   required from ‘void std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_M_erase(std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_Link_type) [with _Key = std::basic_string<char>; _Val = std::pair<const std::basic_string<char>, boost::thread_specific_ptr<int> >; _KeyOfValue = std::_Select1st<std::pair<const std::basic_string<char>, boost::thread_specific_ptr<int> > >; _Compare = std::less<std::basic_string<char> >; _Alloc = std::allocator<std::pair<const std::basic_string<char>, boost::thread_specific_ptr<int> > >; std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_Link_type = std::_Rb_tree_node<std::pair<const std::basic_string<char>, boost::thread_specific_ptr<int> > >*]’
/usr/include/c++/4.7/bits/stl_tree.h:646:9:   required from ‘std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::~_Rb_tree() [with _Key = std::basic_string<char>; _Val = std::pair<const std::basic_string<char>, boost::thread_specific_ptr<int> >; _KeyOfValue = std::_Select1st<std::pair<const std::basic_string<char>, boost::thread_specific_ptr<int> > >; _Compare = std::less<std::basic_string<char> >; _Alloc = std::allocator<std::pair<const std::basic_string<char>, boost::thread_specific_ptr<int> > >]’
/usr/include/c++/4.7/bits/stl_map.h:90:11:   required from here
/usr/include/c++/4.7/bits/stl_pair.h:119:17: error: ‘constexpr std::pair<_T1, _T2>::pair(const std::pair<_T1, _T2>&) [with _T1 = const std::basic_string<char>; _T2 = boost::thread_specific_ptr<int>; std::pair<_T1, _T2> = std::pair<const std::basic_string<char>, boost::thread_specific_ptr<int> >]’ declared to take const reference, but implicit declaration would take non-const 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-13T20:17:03.467

`thread_specific_ptr`声明这些成员，以使类不可复制（注意非常量参数）：

```
private:
    thread_specific_ptr(thread_specific_ptr&);
    thread_specific_ptr& operator=(thread_specific_ptr&); 
```

在 C++03`std::pair`中没有声明复制构造函数，因此如果程序需要，则隐式生成一个。A`std::pair<X, thread_specific_ptr>`不可复制，因为它的一个成员不可复制，所以如果使用隐式复制构造函数，那将是一个错误。

在 C++11`std::pair`中有一个复制构造函数，它是显式默认的。它有签名：

```
pair(const pair&) = default; 
```

编译器错误告诉您隐式生成的复制构造函数将具有此签名，因为`thread_specific_ptr`复制构造函数签名采用非常量引用：

```
pair(pair&) = default; 
```

因为默认构造函数与隐式声明的签名不同，所以复制构造函数格式不正确。

因此，在这两种情况下`pair<X, thread_specific_ptr>`都是不可复制的，但在 C++11 中，即使您不尝试复制对象，也会更快地发现错误。

如果`boost::thread_specific_ptr`使用正常的 C++11 习语使类不可复制，则代码将起作用：

```
thread_specific_ptr(const thread_specific_ptr&) = delete;
thread_specific_ptr& operator=(const thread_specific_ptr&) = delete; 
```

所以我会将此作为一个错误报告给 Boost。在 C++11 模式下，应该删除复制操作。

作为一种解决方法，您可以使用删除的复制操作将类型包装在您自己的类型中，然后改用它：

```
template<typename T>
struct TSS : boost::thread_specific_ptr<T>
{
  TSS() = default;
  TSS(void (*f)(T*)) : boost::thread_specific_ptr<T>(f) { }
  TSS(const TSS&) = delete;
  TSS& operator=(const TSS&) = delete;
}; 
```

现在您可以使用它，您的代码将编译：

```
typedef TSS< int > Tss_int_ptr; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-12T20:52:27.163

`Boost::thread-specific_ptr`在某些 boost 版本中类是不可复制的，这意味着[它不能在 c++03 STL 容器中使用](https://stackoverflow.com/questions/6231336/is-is-possible-to-use-stdmap-in-c-with-a-class-without-any-copy-operator)。我想这是问题的根源，以及为什么更改 c++0x 标志可以解决它。

# java - Java JTable 在我的代码之后在构造函数中设置 AbstractTableModel

> ID：14295944
> 
> 赞同：0
> 
> 时间：2013-01-12T17:32:39.950
> 
> 标签：java, swing, jtable, abstracttablemodel

我有一个扩展类，`JTable`我想设置它`AbstractTableModel`，但我可以看到这是如何可能的唯一方法是`JTable`使用`super`.

但是，我需要在调用构造函数*之前*初始化一些变量（保存表数据） ，这似乎是不可能的（“对 super 的调用必须是构造函数中的第一个语句”）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-12T17:34:43.530

可以在构造超类（即`JTable`）后使用 方法设置模型[`setModel()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#setModel%28javax.swing.table.TableModel%29)。

# asp.net - 更改编译配置时的 .NET 组件行为差异

> ID：14295949
> 
> 赞同：0
> 
> 时间：2013-01-12T17:33:26.753
> 
> 标签：asp.net, compilation, dynamic-assemblies

我遇到了一段代码的问题，该代码的行为不同，具体取决于它是在 Visual Studio 的 Release 还是 Debug 配置中编译的。我已经手动更改了在 Release 配置中可以看到的所有项目编译设置，使其与 Debug 匹配，但问题仍然存在。

代码（如下）返回执行程序集的 Guid：

```
private static Guid GetApplicationUid() 
{ 
   Assembly assembly = Assembly.GetCallingAssembly(); 
   GuidAttribute attribute = (GuidAttribute)assembly.GetCustomAttributes(typeof(GuidAttribute), false)[0]; 
   return new Guid(attribute.Value); 
} 
```

该方法因“索引超出数组范围”而失败。在 Release 模式下编译后执行时出现异常。它在调试模式下正常工作。这是因为在此配置中，由 GetExecutingAssembly() 创建的程序集引用是临时程序集（例如，App_Web_eelfd0ff，Version=0.0.0.0，Culture=neutral，PublicKeyToken=null），而不是底层的“真实”程序集。

奇怪的是，我有另一个组件在同一个 Web 中运行，它使用相同的代码并且行为相同，无论编译模式如何。

为什么会发生这种情况以及如何预防？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T09:10:52.267

启用优化后，该函数可能被内联到不同的程序集中。尝试`MethodImplOptions.NoInlining`按照[这个答案](https://stackoverflow.com/a/5169272/15498)添加，以便该方法在您认为的程序集中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T19:07:55.030

异常意味着程序集*没有*GUID 属性。猜测一下，如果程序集未设置为 COM visible ¹ ，编译器可能会在发布模式下对其进行优化。检查您的其他工作程序集以查看它*是否已*注册用于 COM 互操作。

¹ GUID 仅用于 COM 互操作的 .NET 程序集。Visual Studio 在您创建新项目时会自动为您添加一个 GUID，以防您想要进行 COM 互操作，否则它是无用的。

# php - 在另一个网页/ IFRAME 脚本的 div 中显示内容

> ID：14295950
> 
> 赞同：1
> 
> 时间：2013-01-12T17:33:26.217
> 
> 标签：php, javascript, jquery, html

我有 10 个画廊，比如gallery1.php、gallery2.php 等。

我想制作一个导航器，每当我按下“First Gallery”或“Secont Gallery”等时。

它只会改变 div 的内容或其他内容。

画廊显示带有 for 循环的图像。基本上，我将所有照片重命名为序列号，然后使用 for 循环一个接一个地打印它们。

我尝试使用 HTML 的 IFRAME，但是当我尝试执行将其高度设置为内容高度的脚本时，我遇到了一个问题，因为该脚本不适用于所有浏览器。我用谷歌搜索了其他脚本，到现在已经尝试了大约 10 个脚本，但似乎没有一个适用于所有浏览器。

如果您有一个适用于所有浏览器的脚本，那将有所帮助。

如果不这样做，如何将 div 内容更改为来自另一个网页的内容？只需考虑我试图从其他网页中提取的内容是 For 循环的结果。

我真的不想每次选择另一个画廊时都重新加载整个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:47:06.907

您可以使用 AJAX 从服务器获取内容并插入页面，而无需重新加载整个页面。

jQuery 有许多 AJAX 方法，其中最简单的是`load()`.

为您的图库链接提供一个通用类：

```
<a class="gallery_link" href="gallery1.php">One</a> 
```

然后在 jQuery 中：

```
$(function(){    
    $('.gallery_link').click(function(){
      /* "this" inside click handler refers to link clicked*/
     var galleryUrl= this.href;
      $('#galleryDiv').load(galleryUrl, function(){
        /* new content is oaded into the DIV, can run any other code here that manages new content*/
      });
      /* prevent browser opening url in window*/
      return false;    
    })
}); 
```

API 参考：http: [//api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:43:47.143

您可以使用 AJAX 实现此目的。基本上当你选择一个新的画廊时，JavaScript（推荐使用 jQuery）会获取相关的 PHP 页面并将其放入 div 中，如下所示：

```
$.post('gallery1.php', function(data) {
  $('#the-div-id').html(data);
}); 
```

# html - 当我调整浏览器大小时，DIV 一直在移动

> ID：14295962
> 
> 赞同：0
> 
> 时间：2013-01-12T17:34:21.543
> 
> 标签：html, iframe

所以我正在编写一个布局，我正在使用一个 DIV 将我的 iframe 保持在布局的范围内。问题是每当我调整浏览器大小时，我的 DIV 都会不断移动。我四处寻找答案，但似乎没有一个能解决我遇到的问题。

这里是网站：

[http://www.buymycookies.org/index.html](http://www.buymycookies.org/index.html)

这是我的代码：

```
<div style="position:absolute; top:280; left:560"> 
<iframe src="main.html" name="main" width="240" height="240" marginwidth="0" marginheight="0" frameborder="0" scrolling="auto" scrolling=auto allowtransparency=true>
</iframe>
</div> 
```

作为旁注，我希望能够控制我的 DIV 的去向，因为它需要保持在布局的框内。

谢谢你的帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T17:45:10.617

您正在使用绝对定位，因此您的`<div>`包含`<iFrame>`始终是距页面顶部 280 像素和距左侧 560 像素。

您应该真正阅读 css 定位基础知识。几个好的起点可能是

*   [http://www.barelyfitz.com/screencast/html-training/css/positioning/](http://www.barelyfitz.com/screencast/html-training/css/positioning/)
*   [http://www.w3schools.com/css/css_positioning.asp](http://www.w3schools.com/css/css_positioning.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T17:47:29.540

定位绝对样式元素相对于整个页面的大小。因此，当页面变大时，div 会向左移动（`left:560`）。您可以改用相对位置：

```
margin-top: -530px;
position: relative; 
```

或者

```
position: relative;
top: -530px; 
```

或者

```
margin-left: -120px;(because this div has a width of 240px)
position: absolute;
left: 50%; 
```

# vb.net - 找不到适用于 VB.NET 的 Google 地图解决方案

> ID：14295972
> 
> 赞同：1
> 
> 时间：2013-01-12T17:35:57.050
> 
> 标签：vb.net, winforms, google-maps

我是编程的新手，在学习的过程中，我陷入了困境。我制作了一个 android 应用程序来将设备的 GPS 坐标发送到我的网络服务器。现在，我正在开发一个本地 Windows 应用程序，使用 Forms 从服务器获取地理位置并向用户显示地图。我成功地从服务器获取 JSON，将数据写入本地缓存（文本）文件并读取点。但是我找不到从数据中显示地图的方法！

我搜索了很多，找到了 GMap.NET 库，但没有 VB.NET 的工作示例让我明白这一点。

我知道，通过 Web 控件会更容易，但我真的需要让它不受 IE 驱动。

我很想听听你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T18:20:58.523

文档`GMap.NET`非常缺乏，但如果您花时间探索它提供的属性和方法，它似乎很容易使用。

这是一个可以帮助您入门的快速示例：

首先，在VB.NET解决方案中创建一个空Form，并添加对GMap.NET库提供的三个DLL的引用。

然后，将此代码粘贴到您的`Form1.vb`：

```
Imports GMap.NET
Imports GMap.NET.MapProviders

Public Class Form1
    Private map As GMap.NET.WindowsForms.GMapControl

    Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
        map = New WindowsForms.GMapControl()
        Me.Controls.Add(map)

        map.Dock = DockStyle.Fill

        With map
            ' Home sweet home...
            .Position = New PointLatLng(19.442288, -70.652266)

            .MapProvider = MapProviders.GoogleMapProvider.Instance
            .MinZoom = 3
            .MaxZoom = 17
            .Zoom = 16
            .Manager.Mode = AccessMode.ServerAndCache
        End With
    End Sub
End Class 
```

如需进一步的控制帮助，您应该直接联系作者：http: [//greatmaps.codeplex.com/discussions](http://greatmaps.codeplex.com/discussions)

# c - md5 参考错误

> ID：14295980
> 
> 赞同：7
> 
> 时间：2013-01-12T17:36:53.973
> 
> 标签：c, openssl, md5

我在我的 mac 上编译了一个正常工作的 md5 程序，但是当我尝试在我的 ubuntu 发行版上编译时，它错误地说：

```
 /tmp/ccKBJiV3.o: In function `str2md5':
 md5.c:(.text+0x33): undefined reference to `MD5_Init'
 md5.c:(.text+0x5b): undefined reference to `MD5_Update'
 md5.c:(.text+0x79): undefined reference to `MD5_Update'
 md5.c:(.text+0xa2): undefined reference to `MD5_Final'
 collect2: ld returned 1 exit status 
```

以下是我的主要代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "md5.h"
#include <openssl/md5.h>
#include <openssl/hmac.h>

int main(int argc, char *argv[]) 
{
char *output = str2md5(argv[1], strlen(argv[1]));
printf("%s\n", output);
free(output);
return 0;
} 
```

这是我的“md5.h”文件，它只包含 str2md5 函数：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#if defined(__APPLE__)
#  define COMMON_DIGEST_FOR_OPENSSL
#  include <CommonCrypto/CommonDigest.h>
#  define SHA1 CC_SHA1
#else
#  include <openssl/md5.h>
#endif

char *str2md5(const char *str, int length) {
int n;
MD5_CTX c;
unsigned char digest[16];
char *out = (char*)malloc(33);

MD5_Init(&c);

while (length > 0) {
    if (length > 512) {
        MD5_Update(&c, str, 512);
    } else {
        MD5_Update(&c, str, length);
    }
    length -= 512;
    str += 512;
}

MD5_Final(digest, &c);

for (n = 0; n < 16; ++n) {
    snprintf(&(out[n*2]), 16*2, "%02x", (unsigned int)digest[n]);
}

return out;
} 
```

我试图用我在互联网上找到的所有 -l 东西来编译它。例如：

```
 gcc -Wall -lcrypto -lssl md5.c -o md5 
```

任何帮助让它发挥作用都将是惊人的！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-12T17:39:53.623

OS X 使用一个古老版本的 GNU 工具链，而 Ubuntu（和一般的 Linux 发行版）使用一个较新的版本。这些较新的版本要求按照它们的符号相互依赖的顺序指定对象和库文件。这意味着为了获得最大的可移植性，**您应该始终将库链接器标志放在命令行调用的末尾，**如下所示：

```
gcc -Wall md5.c -o md5 -lcrypto -lssl 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-12T17:38:26.610

放在`-l`命令的末尾：

```
gcc -Wall md5.c -o md5 -lcrypto -lssl 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-02T08:16:43.693

要在 Eclipse 中执行此操作：

在 Eclipse 中右键单击 Project -> C/C++ Build Settings -> Tool Settings -> GCC C Linker -> Libraries 然后在右侧的 -l 部分添加“ssl”和“crypto”。

[![蚀](../Images/819b09b10c4caf27f74f5ccedda13434.png)](https://i.stack.imgur.com/PkuYv.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-20T11:01:32.740

在 ubuntu 16.04 上我遇到了问题，然后我在 14.04 上编译了它，它对我有用

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-08-12T22:34:40.397

有时，可能需要正确的符号链接：

我的初始系统文件：

```
-rwxr-xr-x. 1 root root 1408384 Jun  5  2014 libcrypto.so.0.9.8e
lrwxrwxrwx. 1 root root      19 Sep 22  2015 libcrypto.so.10 ->     libcrypto.so.1.0.1e
-rwxr-xr-x. 1 root root 1965856 Jul 23  2015 libcrypto.so.1.0.1e
lrwxrwxrwx. 1 root root      19 Sep 22  2015 libcrypto.so.6 ->    libcrypto.so.0.9.8e
lrwxrwxrwx. 1 root root      25 Sep 25  2015 libcrypt.so -> ../../lib64/libcrypt.so.1 
```

只有在我添加了符号链接之后

sudo ln -s libcrypto.so.1.0.1e libcrypto.so

我的链接开始工作

# tomcat - Tomcat：如何将 www 子域重定向到裸体

> ID：14295984
> 
> 赞同：0
> 
> 时间：2013-01-12T17:37:38.693
> 
> 标签：tomcat

我在使用 Tomcat 服务器时遇到了一些问题：我正在尝试将所有以裸域开头的请求重定向到以 www 开头的请求。谷歌搜索并使用 urlReWriteFilter 的指南给了我一些相反方向的 goos 示例（从裸域到 www）：

```
<rule>
    <note>
        Moves all annoying www requests to the naked domain
    </note>
    <name>Domain Name Check</name>
    <condition name="host" operator="notequal">www.maternal-beauty.co.il</condition>
    <from>^(.*)$</from>
    <to type="permanent-redirect">http://www.maternal-beauty.co.il$1</to>
</rule> 
```

问题是当我刚刚删除'www'前缀时，我根本没有重定向。我请求的每个地址都只是返回了 corespomding 页面，没有任何重定向。

```
<rule>
    <note>
        Moves all annoying www requests to the naked domain
    </note>
    <name>Domain Name Check</name>
    <condition name="host" operator="notequal">maternal-beauty.co.il</condition>
    <from>^(.*)$</from>
    <to type="permanent-redirect">http://maternal-beauty.co.il$1</to>
</rule> 
```

请注意，唯一的区别是我从条件元素和 to 元素中删除了“www”前缀。我无法弄清楚这里有什么问题。如果重要的话，我使用的是 Tomcat 7.0.34，当然还有 org.tukey.web.filters.urlrewrite.UrlRewriteFilter 过滤器。

感谢您的回复，

盖伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:17:04.917

这可能超出了您想要做的事情的范围，但是您不能通过您的域名提供商更轻松地处理这个问题吗？我使用的大多数允许您设置 A 记录并转发，在他们通常称为控制面板或控制台的地方。在您的情况下，这意味着拥有 www 的 A 记录。域名的版本（所有www.版本都使用给定的IP地址并显示www.域名），并将“裸域”转发给www版本。

# javascript - 将对象推入数组，然后循环生成的数据结构

> ID：14295985
> 
> 赞同：0
> 
> 时间：2013-01-12T17:37:45.220
> 
> 标签：javascript, arrays, object, for-loop, parameter-passing

```
var cartTotal = [];
var priceValue = x;
var priceID = y; 
```

定义上述空数组后，我有一个循环，其中包括以下内容：

```
cartObj = {};
cartObj.priceID = priceValue;
cartTotal.push(cartObj);
total(priceID); 
```

循环上述代码几次后，生成的 cartTotal 数组会如下所示：

```
cartTotal = [{priceID:priceValue},{priceID:priceValue}]       ? 
```

我问的原因是因为我试图将**priceID**传递给下面的总函数，以便对所有 priceValue 数字求和。为什么在总函数中，**a.price**未定义？cartTotal.length 警报表明我有一个包含许多值的数组，因此该数组在函数中被识别。

```
function total(price){
alert(cartTotal.length);
totalPrice = 0;
for(var i=0;i<cartTotal.length; i++){
a = cartTotal[i];
itemPrice = parseInt(a.price);
totalPrice += itemPrice;
} 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-12T17:41:09.563

你需要`a.priceID`. 那是`key`您存储使用的。

不需要`a`，只需使用数组本身。此外，因为它是一个价格，最好使用浮动。

代码：

```
function total(price){
    alert(cartTotal.length);
    totalPrice = 0;
    var itemPrice;

    for(var i=0; i<cartTotal.length; i++){
        itemPrice = parseFloat(carTotal[i].priceID).toFixed(2);
        totalPrice += itemPrice;
    } 
} 
```

问题：为什么要`price`作为参数传递给函数？

# node.js - ACL 最佳实践，在用户对象中存储角色，还是单独的表/集合？

> ID：14295989
> 
> 赞同：9
> 
> 时间：2013-01-12T17:38:15.287
> 
> 标签：node.js, mongodb, acl

我正在使用nodejs，过去一周一直在研究acl/authorization。我只找到了几个，但似乎没有一个具有我需要的所有功能。最接近的是[https://github.com/OptimalBits/node_acl](https://github.com/OptimalBits/node_acl)，但我认为它不支持通过 id 保护资源（例如，如果我想允许用户 12345 并且只有用户 12345 访问 user/12345/edit ）。因此，我认为我将不得不为自己制作一个自定义的 acl 解决方案。

**我的问题是，在每个用户对象下存储角色（用户、管理员、版主等），而不是创建另一个集合/表来映射每个用户及其授权规则，有哪些优点和缺点？**node_acl 使用一个单独的集合，而其他大多数依赖于用户对象中的角色数组。

顺便说一句，我目前正在使用 Mongodb。但是，我尚未研究使用关系数据库与非关系数据库进行身份验证的优缺点，所以如果您的答案取决于此，请告诉我。

*当我写这篇文章时，我想到了一件事。如果我将角色存储在单独的集合中，它会更便携。我将能够更轻松地更换 acl 系统。（我认为？）*

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-12T18:03:16.583

这里的问题似乎可以从“我应该在哪里存储我的角色”抽象为“我应该如何在 Mongo（或一般的 NoSQL）中存储相关信息”。这是一个关系与非关系建模问题。

**非关系型**

使用 Node + Mongo，将角色存储在用户上将非常容易确定用户是否有权访问该功能，因为您只需查看“角色”属性即可。权衡是你有很多重复的信息（'user_read' 可能是*每个*用户帐户上的一个角色），如果你最终更改了该属性，则需要在*每个*用户对象中更新它。

您可以将角色存储在他们自己的集合中，然后将该条目的 id 存储在 User 模型的 Roles 集合中，但是您仍然需要从集合中获取实际记录以显示它的任何信息（尽管可以说这可能是一种罕见的情况）

**关系型**

将这些存储在关系数据库中将是一种更“传统”的方法，因为您可以建立表之间的关系（通过 FK / 连接表或其他方式）。这*可能*是一个很好的解决方案，但是您将不再拥有使用 NoSQL 数据库的好处。

**概括**

如果您的应用程序的其余部分存储在 Mongo 中并且**必须**留在那里（出于性能或任何限制），那么您最好在 Mongo 中完成所有操作。我遇到的大多数建议都说不要混合和匹配数据存储，例如使用一个或另一个，但不能同时使用两者。话虽如此，我已经完成了两者的项目，它可能会变得一团糟，但有时利大于弊。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-05-03T02:32:44.437

我喜欢@DavidWelch 的回答，但我想从另一个角度解决这个问题，因为提到的库提供了完全使用不同数据存储的选项。

将角色存储在单独的数据存储中：

*   (Pro) 如果您使用更快的数据存储，可以使系统性能更高。（在分布式环境中更有利？）
*   (Con) 您必须确保两个数据存储之间的一致性。

一般注意事项：

*   [您可以在acl](https://www.npmjs.com/package/acl)中添加角色/权限，例如 'blog\123' 。您还可以根据动词（例如 put、delete、get 等）授予用户权限。
*   我认为创建一个不依赖于您的存储实现的可插拔解决方案更容易。也许这就是 acl 不将角色存储在您拥有的相同集合中的原因。
*   如果您选择将角色保留在自己的集合中，请考虑将它们添加到令牌 (JWT)。这样，您就不必为需要授权的每个请求检查您的集合。

我希望这有帮助。

# java - 创建线程后如何将信息传递给线程

> ID：14295991
> 
> 赞同：1
> 
> 时间：2013-01-12T17:38:27.017
> 
> 标签：java, multithreading, arraylist

如果您查看代码，我有两个被调用、按下和释放的 ArrayList，它们是全局的。我要做的是用要按下的键更新这些数组，然后将这些更新的数组传递给我的线程，或者更新线程..这是我对我必须做的事情有点迷茫的部分.

当前的示例（如果运行则未经测试）是我在实际程序中所拥有的基本示例。当我运行它时，它会按一次按钮，然后它会抛出错误，我不记得错误，因为我现在无法测试它，但这与我使用线程的方式有关。

***问题*** 一旦线程启动，我如何将数组传递给我的线程。

***代码示例：***

```
import oscP5.OscEventListener;
import oscP5.OscMessage;
import oscP5.OscP5;
import oscP5.OscStatus;

import java.awt.*;
import java.awt.event.KeyEvent;
import java.util.concurrent.ArrayBlockingQueue;
import java.util.concurrent.BlockingQueue;

public class Main implements OscEventListener {

protected BlockingQueue<Integer> _KeyQue = new ArrayBlockingQueue<>(1024);

Producer producer = new Producer(this._KeyQue);
Consumer consumer = new Consumer(this._KeyQue);
ThreadTest threadTest = new ThreadTest(this._KeyQue);

Thread prod;
Thread con;
Thread threadT;

OscP5 osc = new OscP5(this, 22556);

public static void main(String[] argv) {
    Main main = new Main();
    main.setup();
}

public void setup() {
    prod = new Thread(producer);
    con = new Thread(consumer);
    threadT = new Thread(threadTest);

    prod.start();
    con.start();
    threadT.start();

}

@Override
public void oscEvent(OscMessage theMessage) {
    float val = Float.parseFloat(theMessage.arguments()[0].toString());

    if (val == 1.0) {
        producer.addKey(KeyEvent.VK_W);
        producer.addKey(KeyEvent.VK_S);
    } else {
        consumer.removeKey(KeyEvent.VK_S);
    }
   threadTest.run();
}

@Override
public void oscStatus(OscStatus theStatus) {}

public class Producer implements Runnable {
    protected BlockingQueue<Integer> _KeyQue = null;

    public void addKey(int key) {
        try {
            this._KeyQue.put(key);
            System.out.println("Key " + key +" added to queue");
        } catch (InterruptedException e) {
            System.out.println(e.getMessage());
        }
    }

    public Producer(BlockingQueue<Integer> _KeyQue) {
        this._KeyQue = _KeyQue;
    }

    public void run() {

    }
}

public class Consumer implements Runnable {
    protected BlockingQueue<Integer> _KeyQue = null;

    public void removeKey(int key) {
        try {
            this._KeyQue.remove(key);
            System.out.println("key " + key + " removed from queue");
        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }

    public Consumer(BlockingQueue<Integer> _KeyQue) {
        this._KeyQue = _KeyQue;
    }

    public void run() {

    }
}

public class ThreadTest implements Runnable {

    protected BlockingQueue<Integer> _KeyQue = null;

    public ThreadTest(BlockingQueue<Integer> _KeyQue) {
        this._KeyQue = _KeyQue;
    }

    public void run() {
        try {
            Robot robot = new Robot();

            while(!this._KeyQue.isEmpty()) {
                for (Integer x : this._KeyQue) {
                    System.out.println("Keys in que: " + x);
                    Thread.sleep(500);
                }
            }

        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }
}
} 
```

***编辑：*** 好的，所以我查看了线程和 BlockingQueue，但我仍然不知道如何在不锁定程序***的情况下继续运行ThreadTest 的 run()方法。***在此示例中，它根本不运行。当我直接调用***threadTest.run()***时，它会将程序锁定在其中，并且不允许添加或删除元素。

所以我需要做的是能够在后台运行一个不断运行的线程，通过***_KeysQueue()***循环，并且在这个例子中，打印出与键关联的数字。这一切都应该发生，同时允许我添加和删除密钥。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T18:06:09.550

在你的类中有一个 setter 方法

```
public class ThreadTest implements Runnable {
    ....
    public void setPressedList(ArrayList<Integer> e) {
       this.pressed = e;
    }
    public void setReleasedList(ArrayList<Integer> f)
    {
       this.released = f
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T18:18:12.883

**ArrayList**不是**线程安全的**，因此您不应该以这种方式使用它们：它可以工作，也可以失败。

此外，您应该使用某种**同步**机制，而不是无谓地消耗资源的**忙等待。**

所以看看**BlockingQueue**集合，它会给你一个简单的线程之间的数据传递机制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T18:27:27.530

您可以有一个`BlockingQueue`和一个方法来添加将从其他线程调用的元素。您可以拥有一个静态方法`addKey`，该方法可以从其他所有线程访问，并且会寻找将新密钥添加到`BlockingQueue`.

您可以在那里[使用生产者-消费者模式](http://java.dzone.com/articles/concurrency-pattern-producer)，您可以在博客[The Java Specialists中查看](http://www.javaspecialists.eu/archive/Issue125.html)[Java Concurrency In Practice](http://www.javaconcurrencyinpractice.com/)一书或将我带到这本书的链接。这本书有所有队列、并发或同步列表的示例，实现代码做几件事的方法，所有这些都不需要停下来阅读 50 页的内容。每个问题的一个例子和几段。

# java - 点后第 16 个元素的意外舍入

> ID：14295996
> 
> 赞同：0
> 
> 时间：2013-01-12T17:39:02.850
> 
> 标签：java, decorator, rounding

> **可能重复：**
> [将小数位移动到双精度](https://stackoverflow.com/questions/4937402/moving-decimal-places-over-in-a-double)

我正在创建装饰器模式的基本实现，使用冰淇淋和补充剂作为主题。一切正常，除了弹出一些奇怪的输出行为。

在看似随机的地方，成本将在点后面的第 16 个元素处四舍五入输出，这很奇怪，因为我使用的数字是 1.00 ( `Vanilla`)、1.10 ( `Chocolate`)、0.30 ( `Sprinkles`)、0.40 ( `WhippedCream`) 和 0.35 ( `Nuts`)。

为了重新创建它，您需要以下类和接口：

```
public interface Icecream {
    public double getCost();
    public String getDescription();
}

public class Vanilla implements Icecream {
    @Override
    public double getCost() {
        return 1.00;
    }

    @Override
    public String getDescription() {
        return "Vanilla ice";
    }
}

public class Chocolate implements Icecream {
    @Override
    public double getCost() {
        return 1.10;
    }

    @Override
    public String getDescription() {
        return "Chocolate ice";
    }
}

public abstract class Decorator implements Icecream{
    protected Icecream decoratedIcecream;

    public Decorator(Icecream decoratedIcecream) {
        this.decoratedIcecream = decoratedIcecream;
    }

    public abstract double getCost();
    public abstract String getDescription();
}

public class Sprinkles extends Decorator {
    public Sprinkles(Icecream decoratedIcecream) {
        super(decoratedIcecream);
    }

    @Override
    public double getCost() {
        return decoratedIcecream.getCost() + 0.30;
    }

    @Override
    public String getDescription() {
        return decoratedIcecream.getDescription() + ", Sprinkles";
    }
}

public class WhippedCream extends Decorator {
    public WhippedCream(Icecream decoratedIcecream) {
        super(decoratedIcecream);
    }

    @Override
    public double getCost() {
        return decoratedIcecream.getCost() + 0.40;
    }

    @Override
    public String getDescription() {
        return decoratedIcecream.getDescription() + ", Whipped cream";
    }
}

public class Nuts extends Decorator {
    public Nuts(Icecream decoratedIcecream) {
        super(decoratedIcecream);
    }

    @Override
    public double getCost() {
        return decoratedIcecream.getCost() + 0.35;
    }

    @Override
    public String getDescription() {
        return decoratedIcecream.getDescription() + ", Nuts";
    }
}

public class StartUp {
    public static void main(String[] args) {
        Icecream icecream = new Vanilla();
        showDetails(icecream);

        icecream = new Sprinkles(icecream);
        showDetails(icecream);

        icecream = new WhippedCream(icecream);
        showDetails(icecream);

        Icecream icecream2 = new Nuts(new Chocolate());
        showDetails(icecream2);

        icecream2 = new Sprinkles(icecream2);
        showDetails(icecream2);

        Icecream icecream3 = new Vanilla();
        showDetails(icecream3);

        icecream3 = new Nuts(icecream3);
        showDetails(icecream3);

        icecream3 = new Sprinkles(icecream3);
        showDetails(icecream3);
    }

    private static void showDetails(Icecream icecream){
        System.out.println("Cost: " + icecream.getCost() + "\t" + "Description: " + icecream.getDescription());
    }
} 
```

这导致以下输出：

```
Cost: 1.0   Description: Vanilla ice
Cost: 1.3   Description: Vanilla ice, Sprinkles
Cost: 1.7000000000000002    Description: Vanilla ice, Sprinkles, Whipped cream
Cost: 1.4500000000000002    Description: Chocolate ice, Nuts
Cost: 1.7500000000000002    Description: Chocolate ice, Nuts, Sprinkles
Cost: 1.0   Description: Vanilla ice
Cost: 1.35  Description: Vanilla ice, Nuts
Cost: 1.6500000000000001    Description: Vanilla ice, Nuts, Sprinkles 
```

我不愿意添加这么多代码，但考虑到错误似乎是随机弹出的（当我添加生奶油时，当我创建巧克力 + 坚果时，当我添加洒水时两次）我真的无法确定我的哪些部分代码是相关的，哪些不是。

为什么它有时会舍入一个到处都声明为 double 并且点后面总是有 2 位数字的数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T17:42:04.587

这就是浮点数 (`double`和`float`) 的现实。他们使用数学公式（我不详细说明）来存储他们的数据，所以有些值并不完全符合您的预期（这就是为什么银行和其他货币系统使用`BigDecimal`而不是`double`其他类似的东西）。

因为在您的情况下，您正在处理相当小的度量单位，所以我可能会将它四舍五入到小数位。

这是要输出的一小段代码，四舍五入到小数点后两位：

```
String dblOutput = new DecimalFormat("#.##").format(icecream.getCost());
System.out.println("Cost: " + dblOutput + "\t" + "Description: " + icecream.getDescription()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T17:45:48.493

这只是浮点舍入的结果。请记住，在基数 2 中，一个很好的终止小数，比如 0.1 可能是一个无限重复的小数。当那个小数被四舍五入时，我们会得到这些奇怪的四舍五入错误。

解决方案是永远不要直接打印浮点值。在 Java.text 中使用 DecimalFormat 或获取货币实例来格式化（和四舍五入）您的输出