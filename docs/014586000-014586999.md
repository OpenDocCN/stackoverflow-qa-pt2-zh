# StackOverflow 问答 14586000-14586999

# asp.net - 将物理位置路由到重写的 url

> ID：14586000
> 
> 赞同：0
> 
> 时间：2013-01-29T15:08:11.883
> 
> 标签：asp.net, asp.net-mvc

我了解路由在 asp.net web 中的工作原理。

我想阻止用户访问像“Default.aspx”这样的网址。因此，当用户尝试访问诸如“Default.aspx”之类的 URL 时，它会重定向到“默认”。

例如我试过这个：

```
routes.MapPageRoute("", "Default.aspx", "~/Default"); 
```

但它不起作用！还有其他方法吗？

请原谅我的英语很差。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:05:23.167

网络表单还是 MVC？从您的问题和标记中不清楚....

您在您的应用程序中的何处添加了此代码？对于 WebForms 应用程序，它需要位于 global.ascx 中的 application_start() 中。

或者，您可以尝试在 web.config（在 system.webServer 中）中重写 url：

```
<rewrite>
   <rules>     
      <rule name="MyRuleName" stopProcessing="true">
         <match url="^default$" ignoreCase="true" />
         <action type="Rewrite" url="/default.aspx" />
      </rule>
   </rules>
</rewrite> 
```

# c# - 将会话变量超时设置为无限制

> ID：14586001
> 
> 赞同：1
> 
> 时间：2013-01-29T15:08:20.547
> 
> 标签：c#, asp.net, session-state

是否可以将会话变量的超时设置为以编程方式说一小时。

我该怎么做呢？

我问的原因是因为将数组列表的内容存储到会话变量中，并且这些内容需要在会话变量的当前超时之外可用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:14:11.447

不，因为超时适用于整个会话。

但是您可以为会话项设置人为的过期时间并增加会话最大空闲时间/超时。因此，您可以像这样存储对象：

```
public class SessionValue 
{
      public object Value { get;set; }
      public DateTimeOffset ExpiresOn { get;set; }
} 
```

并且每当您获得整个会话项目时，您都可以检查它是否仍然有效或是否已过期。

# c# - DataGrid.SelectedItem 未绑定到当前选定的单元格

> ID：14586006
> 
> 赞同：1
> 
> 时间：2013-01-29T15:08:50.773
> 
> 标签：c#, xaml, binding, datagrid

多次遇到这个问题。

在说右键菜单或在单元格中选择组合框时找到 SelectedItem 或选定的列。SelectedItem 将为 null 或先前选择的行。

```
private void ComboBox_GotKeyboardFocus(object sender, KeyboardFocusChangedEventArgs e) {
// Correct  
m_BeginEditString = ((ComboBox)sender).SelectedValue.ToString(); 

// Wrong. selected item is last selected row, example clicking directly on combobox will not select row, and be null.
m_BeginEditRow = (RowItem)MyDataGrid.SelectedItem; 
}   

<DataGridTemplateColumn>
   <DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
        <ComboBox SelectedItem="{Binding myItem, Mode=TwoWay, 
NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" 
ItemsSource="{Binding Source={StaticResource enum}}" 
SelectionChanged="ComboBox_Changed" 
LostKeyboardFocus="ComboBox_LostKeyboardFocus" 
GotKeyboardFocus="ComboBox_GotKeyboardFocus" />
        </DataTemplate>
   </DataGridTemplateColumn.CellTemplate>
 </DataGridTemplateColumn> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:29:21.207

您可以通过父对象访问并尝试访问您想要的任何内容，而不是直接访问选定的项目。这是替代方法。我希望这对你有帮助

```
Combobox objMyButton = null;
        if (sender is Combobox)
        {
            objMyButton = (sender as Combobox );    
        }

        //You can access the parent object which means corresponding DataGridRow and do whatever you want

        for (var vis = sender as Visual; vis != null; vis = VisualTreeHelper.GetParent(vis) as Visual)
            if (vis is DataGridRow)
            {
                var row = (DataGridRow)vis;                 
                break;
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T18:53:30.967

通过完全不同的方式解决，感谢@Ramesh Muthiah 的指导：

```
private void ComboBox_Changed(object sender, SelectionChangedEventArgs e) {
if (((ComboBox)sender).IsLoaded) { // disregard SelectionChangedEvent fired on population from binding
    if (e.RemovedItems.Count != 0) {
        for (Visual visual = (Visual)sender; visual != null; visual = (Visual)VisualTreeHelper.GetParent(visual)) { // Traverse tree to find corred selected item
            if (visual is DataGridRow) {
                DataGridRow row = (DataGridRow)visual;
                m_BeginEditRow = new MyRowItem((MyRowItem)row.Item); // Copy constructor, otherwise passed by reference
                break;
            }
        }
        MyEnum newItem = (MyEnum)e.AddedItems[0];
        MyEnum oldItem = (MyEnum)e.RemovedItems[0];
        if (m_BeginEditRow.Combo1 == newItem) {
            m_BeginEditRow.Combo1 = oldItem;
        } else {
            m_BeginEditRow.Combo2 = oldItem;
        }
        DoStuff(m_BeginEditRow, false);
    }
} 
```

}

# php - 使用 jWindowCrop 裁剪图像 - PHP

> ID：14586011
> 
> 赞同：1
> 
> 时间：2013-01-29T15:09:01.287
> 
> 标签：php, jquery, crop

我正在使用这个 jQuery 插件来裁剪图像：

[http://www.tmatthew.net/jwindowcrop](http://www.tmatthew.net/jwindowcrop)

如您所见，在 jQuery 端使用它真的很容易，但我的问题是使用 PHP/GD 裁剪真实图像。

用一些护目镜，我得到：

```
$targ_w = $targ_h = 150;
$jpeg_quality = 90;

$src = 'demo_files/flowers.jpg';
$img_r = imagecreatefromjpeg($src);
$dst_r = ImageCreateTrueColor( $targ_w, $targ_h );

imagecopyresampled($dst_r,$img_r,0,0,$_POST['x'],$_POST['y'],
    $targ_w,$targ_h,$_POST['w'],$_POST['h']);

header('Content-type: image/jpeg');
imagejpeg($dst_r, null, $jpeg_quality); 
```

但它没有处理 jQuery 插件所做的放大/缩小，我应该如何裁剪图像并使用这个插件和 PHP 保存它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T21:28:15.417

我想通了，这是我的代码，以防其他人有同样的问题，裁剪将由 Zebra 图像类完成：

[http://stefangabos.ro/php-libraries/zebra-image/#documentation](http://stefangabos.ro/php-libraries/zebra-image/#documentation)

PHP：

```
// The variables we got from the plugin in upload page:
$x = intval($_POST['x']);
$y = intval($_POST['y']);
$w = intval($_POST['w']);
$h = intval($_POST['h']);
// The img file which we want to crop
$tmp_file = 'path/to/img';
// Now include the Zebra class
include_once('path/to/Zebra_Image.php');
$image = new Zebra_Image();
$image -> preserve_aspect_ratio = true;
$image -> enlarge_smaller_images = true;
$image -> preserve_time = true;
$image -> jpeg_quality = 100;
// Now imagine that the user has selected the area which he want with the plugin, and we also want to make the image out put in a specific size(200*225):
$target_path = 'new/img/path'; // the output img path
$image -> source_path = $tmp_file;
$image -> target_path = $target_path;
$image -> crop($x, $y, $x + $w, $y + $h);
$image -> source_path = $target_path;
$image -> resize(200, 225,  ZEBRA_IMAGE_CROP_CENTER); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-05T08:12:22.000

我也在使用 jwindowcrop。当您单击 jwindowcrop 的缩放时，w 和 h 会发生变化。（见附图）

![从 jwindowcrop 获取新的 w 和 h（不是原始图像的](../Images/53e3036a94c542e928d6e7ba7fe96a44.png)

您必须确保使用 php 手册中所述的正确参数 [http://www.php.net/manual/en/function.imagecopyresampled.php](http://www.php.net/manual/en/function.imagecopyresampled.php) 在我的情况下，我使用了 imagecopyresized 并且可以正确裁剪图像，包括变焦

```
dst_image
Destination image link resource.

src_image
Source image link resource.

dst_x
x-coordinate of destination point. 
(in my case the destination image should start from upper left corner)

dst_y
y-coordinate of destination point.
(in my case the destination image should start from upper left corner)

src_x
x-coordinate of source point.
(the x-coordinate returned by the cropping function e.g. crop image from x=231, 231 pixels far from the left edge)

src_y
y-coordinate of source point.
(the x-coordinate returned by the cropping function e.g. crop image from y=706, 706 pixels far from the top edge)

dst_w
Destination width.
(in my case, my new image should have a width of 800px)

dst_h
Destination height.
(in my case, my new image should have a height of 400px)

src_w
Source width.
(when my cropping function zooms, it changes the width and height of the original image)

src_h
Source height.
(when my cropping function zooms, it changes the width and height of the original image)

imagecopyresized(dst_image, src_image, 0, 0, 231, 706, 800, 400, 521, 318); 
```

# kendo-ui - KendoDropdown 放置在fancybox popup = 不好的做法？

> ID：14586022
> 
> 赞同：0
> 
> 时间：2013-01-29T15:09:38.387
> 
> 标签：kendo-ui

当我放置 Kendo Dropdown List info Fancybox - Popup 时出现问题。有关详细信息：我有页面 A：此页面包含 Kendo 下拉列表（id = #myDropdown）。我有页面 B：我把我的 Fancybox 调用者放在这里-我的意思是我使用 Fancybox 加载页面 A（通过 ajax）

一切看起来都很好，但我在这里遇到了一个问题：你知道，当我初始化下拉列表时，Kendo-UI 将为 UI 效果创建一个“锚”标签。例如：DropdownList 的 id = #myDropdown Kendo 将再创建一个 id = #myDropdown-list 的标签。

关闭 Fancybox-popup 后，“#myDropdown”已从 DOM 中删除，但“#myDropdown-list”。它仍然在DOM超时，并且在我再次调用弹出窗口后它愿意加倍（当然如果不刷新当前页面）。

和 Kendo-DateTimePicker 一样也一样。

p/s：如果英语太糟糕了，我很抱歉：D。我希望你能得到我的问题。

我要把我的“弹出窗口”放在 iframe 中。但我不知道在这种情况下使用 iframe 是否好......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:39:21.010

是否使用 IFrame 不是导致错误的原因。我尝试使用一个容器并且没有它来通过 ajax 加载fancybox，但这并没有什么不同。

我发现有点像黑客，但它解决了问题。假设我们有一个创建弹出窗口的代码，并且弹出窗口的内容位于 href 'popupFrame' 中：

```
$.fancybox({
    'href': 'popupFrame',
    'type': 'ajax',
    beforeClose: removeKendoHelpers
}); 
```

另一部分是在关闭弹出窗口之前调用的函数：

```
function removeKendoHelpers() {
    $("#myDropdown-list").remove();
} 
```

当然，您可以将 removeKendoHelpers 创建为内联函数，如果要删除更多部分，则将该代码也放入 removeKendoHelpers 函数中。

一个有趣的评论：在 fancybox API 中，onCleanup 和 onClosed 被列为选项，但它们不起作用，而是使用 beforeClose 或 afterClose。

更新：

实际上，通过调用 kendo 小部件的 destroy() 方法可以解决很多问题。它解决了除 DateTimePicker 的三个帮助 div 之一之外的小部件的删除问题，因此关闭如下所示：

```
function removeKendoHelpers() {
    $("#myDropdown-list").data("kendoDropDownList").destroy();
    $("#datetimepicker").data("kendoDateTimePicker").destroy();
} 
```

为了解决日期时间选择器的实际问题，我认为 kendop 框架中的一个错误（我会报告这个并希望得到一些反馈）最后一个函数只需要扩展：

```
$(".k-widget.k-calendar").remove(); 
```

其他解决方案：

这个更粗糙，但对我来说就像一个魅力，即使页面有多个剑道控件，即使你从你的幻想箱中打开另一个幻想箱。

将fancybox创建包装在一个函数中，例如：

```
function openFancyBox() {
    $("body").append("<div class='fancybox-marker'></div>");

    $.fancybox({
        'href': 'popupFrame',
        'type': 'ajax',
        beforeClose: removeKendoHelpers
    });
} 
```

这将在 body 标签的最后创建一个新的 div，fancybox 结束时的函数使用这个：

```
function removeKendoHelpers() {
    $(".fancybox-marker").last().nextAll().remove();
    $(".fancybox-marker").last().remove();
} 
```

我希望这些能解决你所有的问题！

# silverlight - 如何在 Silverlight 中打印文档

> ID：14586026
> 
> 赞同：2
> 
> 时间：2013-01-29T15:09:47.480
> 
> 标签：silverlight, printing, uri, tiff, printdocument

我在 silverlight 中编写了一个应用程序网站，用于查看 Tiff 文件。我将 Tiff 文件的绝对 uri 发送到 silverlight 应用程序，它会查看/缩放或下载文件。

**我使用 PrintDocument 库打印 tiff，但发送到打印机的文件非常大（100kb 的 tiff 文件为 500Mb）。**

现在这是我的打印代码：

```
 Protected Sub pd_PrintPage(ByVal sender As Object, ByVal ev As PrintPageEventArgs)
    Try
        If (PrintPageCount = 0) Then
            PrintPageCount = ImageTiff.NumberOfDirectories
            PrintCurrPage = 0
        End If
        If (PrintCurrPage < PrintPageCount) Then
            ImageTiff.SetDirectory(PrintCurrPage)
            Dim cnv As New Canvas With
                {
                    .Width = 840,
                    .Height = 1180,
                    .Background = New ImageBrush With {
                             .ImageSource = GetWritableBmp(ImageTiff, larghezza, altezza),
                             .Stretch = Stretch.Fill
                     }
                }
            ev.PageVisual = cnv
            PrintCurrPage += 1
            ev.HasMorePages = True
        Else
            ev.HasMorePages = False
        End If
    Catch ex As Exception
        MessageBox.Show("Errore handler:" & ex.Message & vbCrLf & ex.StackTrace)
    End Try
End Sub 
```

还有我的打印按钮事件处理程序

```
 Private Sub ButtonPrint_Click(sender As System.Object, e As System.Windows.RoutedEventArgs) Handles ButtonPrint.Click
    Try
        Dim pdoc As New PrintDocument()
        AddHandler pdoc.PrintPage, AddressOf Me.pd_PrintPage
        pdoc.Print(Uri.AbsoluteUri)
    Catch ex As Exception
        MessageBox.Show("Errore:" & ex.Message)
    End Try
End Sub 
```

我想将“ [http://www.mysite.it/tifffiles/mytif.tif](http://www.mysite.it/tifffiles/mytif.tif) ”的打印直接发送到打印机，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T19:25:18.527

在 Silverlight 4 及更高版本中，Microsoft 扩展了对打印文档的支持。请参阅[http://msdn.microsoft.com/en-us/library/ee671023(v=VS.95).aspx](http://msdn.microsoft.com/en-us/library/ee671023(v=VS.95).aspx)。如果您可以将 TIFF 转换为 XAML 文档或位图，它可能会使您的过程更容易。

# grails - 将 spring-security-core 插件安装到插件中，然后将其安装在应用程序中

> ID：14586028
> 
> 赞同：1
> 
> 时间：2013-01-29T15:09:50.790
> 
> 标签：grails, spring-security

我刚刚切换到 grails 2.2 并且遇到了一个主要的插件问题。我有一个应用程序 - my-app 和一个插件 - my-plugin。我想将 spring-security-core 插件安装到 my-plugin 中，然后将 my-plugin 安装到 my-app 中。当我完成此操作并执行 s2-quickstart 后，就创建了 LoginController。我现在可以毫无问题地启动我的插件，但是当我尝试启动我的应用程序时，它抱怨它找不到任何 springsecurity 类。错误如下所示：

12：无法解析类 org.springframework.security.web.WebAttributes @ 第 12 行，第 1 列。 7：无法解析类 org.springframework.security.authentication.AccountExpiredException @ 第 7 行，第 1 列。 11：无法解析类org.springframework.security.core.context.SecurityContextHolder @ 第 11 行，第 1 列。

在我看来，就像只有 my-plugin 可以看到 spring security 插件依赖项，而 my-app 不能，所以他们甚至没有按照手册认为应该有的级联。

我还尝试通过在 BuildConfig.conf 中添加以下内容来安装 spring-security-core 插件： compile ":spring-security-core:1.2.7.3" 但它也不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:37:00.977

谢谢伯特的建议。我已经使用了它，这就是我的想法：

我创建了一个插件应用程序并在其中安装了 spring-security-core 插件（使用 DataSource.groovy，而不是安装插件）。然后我创建了一个主应用程序并安装了我的插件应用程序（再次使用 DataSource.groovy）。当我在 grails 2.1.1 中执行此操作时，一切正常 - 我可以在我的主应用程序中使用 spring-security，因此依赖关系得到了恰到好处的拉动。当我做同样的事情时，但在 grails 2.2 中，我无法在我的主应用程序中使用 spring-security，所以依赖项没有被取消。这就是为什么我认为这可能是新 grails 版本中的某种错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:23:27.443

如果你`install-plugin`在插件中使用，它只能通过在`application.properties`. 它不会作为插件的依赖项导出。这可以用于插件，例如`code-coverage`您希望在开发和测试期间使用它的地方，但不强制用户也安装它。

在旧版本的 Grails`dependsOn`中，插件描述符中的映射用于表达插件依赖关系。现在不推荐使用这有利于`plugins`在`BuildConfig.groovy`. 这既是为了保持一致性，也是为了利用依赖 DSL 支持的更细粒度的特性，包括指定范围和排除项。对于应用程序也是如此 - 不要`install-plugin`用于应用程序或插件，始终使用`BuildConfig.groovy`.

看看[spring-security-ldap 插件的 BuildConfig.groovy](https://github.com/grails-plugins/grails-spring-security-ldap/blob/master/grails-app/conf/BuildConfig.groovy)。它对核心插件有一个编译范围依赖，加上一个`hibernate`未导出的插件（因为它只是用于测试）和一个对发布插件的构建范围依赖（也没有导出，因为它只是用于发布插件） .

您可能应该在`BuildConfig.groovy`. 删除您的任何插件引用`application.properties`并转换为`BuildConfig.groovy`语法并运行，`grails clean`然后运行`grails compile`​​.

# ios - iOS6 相机覆盖不允许编辑

> ID：14586030
> 
> 赞同：0
> 
> 时间：2013-01-29T15:09:51.747
> 
> 标签：ios, ipad, ios4, ios6

在我的应用程序中，我需要一个相机叠加层来帮助用户正确排列图片以用于预期用途。此外，我需要有编辑界面让他们微调缩放和对齐这个“指南”。我已经让相机叠加层与默认的相机控件一起使用（除非您使用默认控件，否则编辑窗格甚至不会显示），但是现在在编辑屏幕上，我无法缩放/平移。触摸事件似乎发生在覆盖层上，而不是编辑屏幕上。[我知道/知道这是一个潜在问题，并已实施此处](https://stackoverflow.com/questions/10178214/cameraoverlayview-prevents-editing-with-allowsediting/10300147#10300147)提到的修复

这允许专注于相机屏幕本身，您可以在叠加层中看到触摸正在通过/忽略，但在编辑屏幕上这仍然不起作用。我还尝试了一些在[这里找到的最热门的代码](https://stackoverflow.com/questions/7719412/how-to-ignore-touch-events-and-pass-them-to-another-subviews-uicontrol-objects)

每当“UIViewController”的 No visible @interface 在超行上声明选择器“hitTest:withEvent:”时，该解决方案都会给我一个错误。

我还尝试了使用 userInteractionEnabled 属性进行的各种设置

这是我用来做覆盖的代码：

```
self.picker = [[UIImagePickerController alloc] init];
self.picker.sourceType = UIImagePickerControllerSourceTypeCamera;
self.picker.cameraCaptureMode = UIImagePickerControllerCameraCaptureModePhoto;
self.picker.cameraDevice = UIImagePickerControllerCameraDeviceRear;
self.picker.showsCameraControls = YES;
self.picker.navigationBarHidden = YES;
self.picker.toolbarHidden = YES;
self.picker.wantsFullScreenLayout = YES;
self.picker.allowsEditing = YES;
self.picker.view.userInteractionEnabled = YES;

// Insert the overlay
self.overlay = [[OverlayViewController alloc] initWithNibName:@"OverlayViewController" bundle:nil];
self.overlay.pickerReference = self.picker;

self.picker.cameraOverlayView = self.overlay.view;
[self.picker.cameraOverlayView setUserInteractionEnabled:YES];
//[self.picker.cameraOverlayView setUserInteractionEnabled:FALSE];
self.picker.delegate = self.overlay; 
```

// [self performSelector:@selector(moveOverlayViewToSublayer:) withObject:self.picker afterDelay:0.1f];

```
[self presentModalViewController:self.picker animated:NO]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T16:07:47.863

我无法使用 xib 文件让自定义叠加层正常工作，最终只是在代码中创建了叠加层视图。

有一些关于如何在网络上实现这一点的例子：

[http://www.musicalgeometry.com/?p=821](http://www.musicalgeometry.com/?p=821)

[https://developer.apple.com/library/ios/#samplecode/PhotoPicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010196](https://developer.apple.com/library/ios/#samplecode/PhotoPicker/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010196)

# html - 在 Firefox 中填充 1px 短或 IE 1px 以上

> ID：14586031
> 
> 赞同：2
> 
> 时间：2013-01-29T15:09:53.213
> 
> 标签：html, css, image

使用不同为 1px 的图像时，下面的 html 代码有问题；简称Firefox，在IE9，Chrome Opera，它只是Firefox。

我试过删除图像，一切正常。IE 和 Firefox 的截图见代码：

这是html代码：

XXX

```
 <div style="background:url(images/package_bg.gif) repeat-x; border-color: #ccc; float: left; width: 20px; padding-top: 4px; padding-bottom: 2px; padding-left: 5px; border-style: solid; border-right-color: #FFFFFF; border-width: 1px;"><img src="images/info.png" onmouseover="site.showTooltip(this,'xxx');" onmouseout="site.hideTooltip('xxx');"></div>
        <div style="background:url(images/package_bg.gif) repeat-x; border-color: #ccc; float: left; width: 173px; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; border-style: solid; border-right-color: #FFFFFF; border-width: 1px; text-align: center;">xxx</div>
        <div style="background:url(images/package_bg.gif) repeat-x; border-color: #ccc; float: left; width: 173px; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; border-style: solid; border-right-color: #FFFFFF; border-width: 1px; text-align: center;">xxx</div>
        <div style="background:url(images/package_bg.gif) repeat-x; border-color: #ccc; float: left; width: 173px; padding-top: 5px; padding-bottom: 5px; padding-left: 5px; border-style: solid; border-width: 1px; -webkit-border-top-right-radius: 10px; -webkit-border-bottom-right-radius: 10px; -moz-border-radius-topright: 10px; -moz-border-radius-bottomright: 10px; border-top-right-radius: 10px; border-bottom-right-radius: 10px; text-align: center;">xxx</div>
        <div style="clear: both; padding-bottom: 0px;"> </div> 
```

火狐： http: [//www.cbg.me.uk/html/firefox.jpg](http://www.cbg.me.uk/html/firefox.jpg)

即：http : [//www.cbg.me.uk/html/ie.jpg](http://www.cbg.me.uk/html/ie.jpg)

我不知道如何解决这个问题，好像我添加 1px Firefox 是可以的，但是 IE、Chrome 和 Opera 超过了 1px。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:51:21.973

我相信这是浏览器的边界差异。将您的 css 放入样式表并将其添加到有问题的块中：

```
If you want show like FF: 
border-collapse:collapse

If you want show like IE (not 100% on this one):
border-collapse:separate 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T22:20:21.677

请使用这个技巧。在你的 CSS 里面放这样的东西：

```
@-moz-document url-prefix() {
  .selector {
     padding-bottom: XX px;
  }
} 
```

选择器在哪里 - 在您看到差异的地方写下您的班级/ID。在那里您可以为 FireFox 设置您的新填充。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T15:44:04.843

将带有图像的行更改为 font-size: 1px; 并添加了 1px；到填充底部。

已经在 IE 6/8/9、Firefox（最新）、Chrome（最新）和 Opera（最新）中进行了测试，并且都排好了。

# android - 除了 Mono 中的默认 ClassLoader 吗？

> ID：14586036
> 
> 赞同：1
> 
> 时间：2013-01-29T15:10:10.213
> 
> 标签：android, mono, xamarin.android

我正在用 Mono for android实现[IParcelable接口，这真是太棒了。](http://androidapi.xamarin.com/?link=T:Android.OS.IParcelable)我最近的问题是读取我写入包裹的值。字符串、整数等标准类型没有问题。我可以完美地写入和读取值。但是，当我尝试从我自己定义的类的列表中读取值时`MyType`

```
List<MyType> MyTypes;
...
parcel.ReadList(MyTypes, null); 
```

我收到以下错误

```
Android.OS.BadParcelableException: ClassNotFoundException when unmarshalling: cinterface.MyType 
```

我猜这是因为默认的类加载器，它不知道列表中项目的类型。文档说明`null`用作[ReadList](http://androidapi.xamarin.com/?link=M:Android.OS.Parcel.ReadList)的第二个参数的值使用默认的类加载器。我想使用指向我的类的自定义类加载器`cinterface.MyType`，但我不知道该怎么做。非常感谢任何帮助。

我经历过的类似帖子（但没有运气）在这里：

1.  [android.os.BadParcelableException：解组时的 ClassNotFoundException：异常](https://stackoverflow.com/questions/6865688/android-os-badparcelableexception-classnotfoundexception-when-unmarshalling-ex)
2.  [BadParcelableException：解组时的 ClassNotFoundException：（空类名）](https://stackoverflow.com/questions/10552062/badparcelableexception-classnotfoundexception-when-unmarshalling-empty-classn)
3.  [BadParcelableException：解组时出现 ClassNotFoundException](https://stackoverflow.com/questions/11393751/badparcelableexception-classnotfoundexception-when-unmarshalling)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:22:01.213

在此处查看 Xamarins 官方示例：[https](https://github.com/xamarin/monodroid-samples/blob/master/ExportAttribute/ExportAttributeTest/MainActivity.cs) ://github.com/xamarin/monodroid-samples/blob/master/ExportAttribute/ExportAttributeTest/MainActivity.cs它显示了如何实现`IParcelable`。

# python - 使用 tornado 的嵌套 Web 服务调用（异步？）

> ID：14586038
> 
> 赞同：4
> 
> 时间：2013-01-29T15:10:16.910
> 
> 标签：python, web-services, asynchronous, tornado

我正在使用 tornado（和第三方 tornadows 模块）实现 SOAP Web 服务。我的服务中的一个操作需要调用另一个，所以我有链：

1.  （通过 SOAPUI）对操作 A 的外部请求
2.  操作 B 中的内部请求（通过请求模块）
3.  操作 B 的内部响应
4.  操作 A 的外部响应

因为它都在一个服务中运行，所以它在某个地方被阻止了。我不熟悉龙卷风的异步功能。

只有一种请求处理方法（post），因为所有内容都来自单个 url，然后根据 SOAPAction 请求标头值调用特定操作（执行处理的方法）。我用@tornado.web.asynchronous 修饰了我的 post 方法，最后调用了 self.finish() 但没有骰子。

龙卷风可以处理这种情况吗？如果可以，我该如何实施？

编辑（添加代码）：

```
class SoapHandler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    def post(self):
        """ Method post() to process of requests and responses SOAP messages """
        try:
            self._request = self._parseSoap(self.request.body)
            soapaction = self.request.headers['SOAPAction'].replace('"','')
            self.set_header('Content-Type','text/xml')
            for operations in dir(self):
                operation = getattr(self,operations)
                method = ''
                if callable(operation) and hasattr(operation,'_is_operation'):
                    num_methods = self._countOperations()
                    if hasattr(operation,'_operation') and soapaction.endswith(getattr(operation,'_operation')) and num_methods > 1:
                        method = getattr(operation,'_operation')
                        self._response = self._executeOperation(operation,method=method)
                        break
                    elif num_methods == 1:
                        self._response = self._executeOperation(operation,method='')
                        break
            soapmsg = self._response.getSoap().toprettyxml()
            self.write(soapmsg)
            self.finish()
        except Exception as detail:
            #traceback.print_exc(file=sys.stdout)
            wsdl_nameservice = self.request.uri.replace('/','').replace('?wsdl','').replace('?WSDL','')
            fault = soapfault('Error in web service : {fault}'.format(fault=detail), wsdl_nameservice)
            self.write(fault.getSoap().toxml())
            self.finish() 
```

这是来自请求处理程序的 post 方法。它来自我正在使用的 Web 服务模块（所以不是我的代码），但我添加了异步装饰器和 self.finish()。它基本上所做的只是调用正确的操作（如请求的 SOAPAction 中所述）。

```
class CountryService(soaphandler.SoapHandler):
    @webservice(_params=GetCurrencyRequest, _returns=GetCurrencyResponse)
    def get_currency(self, input):
        result = db_query(input.country, 'currency')
        get_currency_response = GetCurrencyResponse()
        get_currency_response.currency = result
        headers = None
        return headers, get_currency_response

    @webservice(_params=GetTempRequest, _returns=GetTempResponse)
    def get_temp(self, input):
        get_temp_response = GetTempResponse()
        curr = self.make_curr_request(input.country)
        get_temp_response.temp = curr
        headers = None
        return headers, get_temp_response

    def make_curr_request(self, country):

        soap_request = """<soapenv:Envelope xmlns:soapenv='http://schemas.xmlsoap.org/soap/envelope/' xmlns:coun='CountryService'>
   <soapenv:Header/>
   <soapenv:Body>
      <coun:GetCurrencyRequestget_currency>
         <country>{0}</country>
      </coun:GetCurrencyRequestget_currency>
   </soapenv:Body>
</soapenv:Envelope>""".format(country)

        headers = {'Content-Type': 'text/xml;charset=UTF-8', 'SOAPAction': '"http://localhost:8080/CountryService/get_currency"'}
        r = requests.post('http://localhost:8080/CountryService', data=soap_request, headers=headers)
        try:
            tree = etree.fromstring(r.content)
            currency = tree.xpath('//currency')
            message = currency[0].text
        except:
            message = "Failure"
        return message 
```

这是 Web 服务的两个操作（get_currency 和 get_temp）。因此 SOAPUI 命中 get_temp，它向 get_currency 发出 SOAP 请求（通过 make_curr_request 和 requests 模块）。然后结果应该只是链回并被发送回 SOAPUI。

服务的实际操作没有任何意义（当要求温度时返回货币）但我只是想让功能正常工作，这些是我拥有的操作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T17:31:43.180

我不认为您的肥皂模块或请求是异步的。

我相信添加 @asyncronous 装饰器只是成功的一半。现在你没有在你的函数内部发出任何异步请求（每个请求都是阻塞的，这会占用服务器直到你的方法完成）

您可以使用[tornados AsynHttpClient](http://www.tornadoweb.org/documentation/overview.html#non-blocking-asynchronous-requests)来切换它。这几乎可以用作请求的精确替代品。从[文档](http://www.tornadoweb.org/documentation/overview.html#non-blocking-asynchronous-requests)示例：

```
class MainHandler(tornado.web.RequestHandler):
    @tornado.web.asynchronous
    def get(self):
        http = tornado.httpclient.AsyncHTTPClient()
        http.fetch("http://friendfeed-api.com/v2/feed/bret",
                   callback=self.on_response)

    def on_response(self, response):
        if response.error: raise tornado.web.HTTPError(500)
        json = tornado.escape.json_decode(response.body)
        self.write("Fetched " + str(len(json["entries"])) + " entries "
                   "from the FriendFeed API")
        self.finish() 
```

他们的方法用 async 装饰，并且他们正在发出异步 http 请求。这是流程变得有点奇怪的地方。当您使用 AsyncHttpClient 时，它不会锁定事件循环（请让我这周刚开始使用龙卷风，如果我的所有术语都不正确，请放轻松）。这允许服务器自由处理传入的请求。当您的 asynchttp 请求完成时，回调方法将被执行，在这种情况下`on_response`。

在这里，您可以非常轻松地用 tornado asynchttp 客户端替换请求。但是，对于您的肥皂服务，事情可能会更复杂。您可以围绕您的肥皂客户端创建一个本地网络服务，并使用龙卷风异步 http 客户端向它发出异步请求？？？

这将创建一些可以使用[`gen`装饰器修复的复杂回调逻辑](http://www.tornadoweb.org/documentation/gen.html?highlight=tornado.gen#tornado.gen)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-29T21:56:28.043

从昨天开始，此问题已修复。

拉取请求： [https ://github.com/rancavil/tornado-webservices/pull/23](https://github.com/rancavil/tornado-webservices/pull/23)

示例：这里是一个简单的 web 服务，它不接受参数并返回版本。请注意，您应该：

*   方法声明：用`@gen.coroutine`
*   返回结果：使用`raise gen.Return(data)`

代码：

```
from tornado import gen
from tornadows.soaphandler import SoapHandler
...

class Example(SoapHandler):
    @gen.coroutine
    @webservice(_params=None, _returns=Version)
    def Version(self):
        _version = Version()
        # async stuff here, let's suppose you ask other rest service or resource for the version details.
        # ...
        # returns the result.
        raise gen.Return(_version) 
```

干杯!

# php - 在 html 下拉列表中填充默认 MYSQL 值

> ID：14586040
> 
> 赞同：0
> 
> 时间：2013-01-29T15:10:17.373
> 
> 标签：php, html, forms

我正在尝试更新`user_pref`我的 html 表单中的列。

我有一个看起来像这样的下拉列表（它工作正常）：

```
User pref: <select name="user_pref" size="1" id="user_pref">
<option value="BLUE">Blue</option>
<option value="RED">Red</option>
<option value="YELLOW">Yellow</option>
<?php echo htmlentities($user_pref, ENT_COMPAT, 'utf-8'); ?></select> 
```

我希望能够将默认值设置为用户`user_pref`在 MySQL 列中已有的值。因此，例如，如果用户 A`"Yellow"`在其 user_pref 中有，那么我想`"Yellow"`在更新该用户的首选项时显示。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:23:43.373

这是基本思想...您必须对其进行调整以适应您的需求...

```
<?php

    // assuming $user_pref is their preference...

    /*
     * create array of possible options...
     * I usually store my options in my database because
     * my applications tend to be dynamic
     * but you can just create a quick array to do the same job
     */
    $arrOptions = array(
        'val1' => 'option1',
        'val2' => 'option2',
        'val3' => 'option3'
    );

    $selected = '';

    print '<select id="user_pref_id">';

    foreach ($arrOptions as $key => $val) {
        // test for $key or $val depending on which makes sense for your application
        $selected = ($key == $user_pref) ? ' selected="selected"' : '';

        printf('<option value="%s"%s>%s</option>', $key, $selected, $val);
    }

    print '</select>';
?> 
```

# javascript - 检测浏览器历史操作

> ID：14586045
> 
> 赞同：14
> 
> 时间：2013-01-29T15:10:41.400
> 
> 标签：javascript, jquery

我正在使用推送状态构建一个 Html 5 网站，我想知道它是否可以在 javascript 或 JQuery 中检测浏览器的后退按钮是否已被按下。我想将它包含在这样的 if 语句中：

```
if (back_btn clicked){
//do stuff
}
if (forward_btn clicked){

} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-29T15:12:42.487

您正在寻找[popstate 事件](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/popstate)。

一个例子：

```
window.onpopstate = function(event) {
    alert("location: " + document.location);
} 
```

或者使用流行的 jQuery：

```
$(window).on('popstate',function(event) {
    alert("location: " + document.location);
}); 
```

每当访问历史记录时都会触发，例如后退/前进。快速说明，在 Chrome 中，这也会在页面加载时触发，因此一种快速的方法是检查事件是否为空。

```
if(event.originalEvent.state!=null){
    // do something
} 
```

另一个很好的资源是[History.js](https://github.com/balupton/History.js/) jQuery 插件，它有一个使用主题标签等的后备。它还使 popstate 事件的检测非常简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-23T01:37:17.400

对于 AngularJS

```
$window.onpopstate = function(e) {
    $window.alert("location: " + $location.path());
} 
```

# highcharts - 蜘蛛网图上的 Y 轴标签

> ID：14586048
> 
> 赞同：0
> 
> 时间：2013-01-29T15:10:50.447
> 
> 标签：highcharts

使用 'gridLineInterpolation:'polygon' 时，在蜘蛛网图的 y 轴上呈现标签似乎存在错误，标签在不使用时定位正确，并且它们似乎保持相同的位置。见[https://www.evernote.com/shard/s44/sh/f04023fb-d6ed-4b59-baad-f2181bd4de64/5d9f780d6f5511bbe7cf53a4eb94d595](https://www.evernote.com/shard/s44/sh/f04023fb-d6ed-4b59-baad-f2181bd4de64/5d9f780d6f5511bbe7cf53a4eb94d595)

相关配置：

```
yAxis:{
  gridLineInterpolation:'polygon',
  lineWidth:0,
  min:0,
  max:5,
  tickInterval: 1,
  labels: {
      enabled: true, x: 0, y: 0, step: 1
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-08T15:35:15.863

我对 Highcharts 4.1.3 也有同样的错误，但它已在 4.1.9 版本中修复

因此，最简单的做法是更新 Highcharts 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T13:33:23.307

不幸的是，不支持此选项，但您可以在此处提出您的建议：highcharts.uservoice.com

# c++ - 将 C++ 编译器添加到 Eclipse C 项目

> ID：14586050
> 
> 赞同：6
> 
> 时间：2013-01-29T15:11:03.607
> 
> 标签：c++, c, eclipse-cdt

您好我目前正在 Eclipse 中开发一个 C 应用程序，现在我需要编译一个使用 C++ 的库。有没有办法将 .cpp 处理（MinGW C++ 编译器）添加到 Eclipse CDT 中的现有 C 项目？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T15:38:28.287

根据[Eclipse 论坛上的这篇文章](http://www.eclipse.org/forums/index.php/t/154099/)，只需添加

```
<nature>org.eclipse.cdt.core.ccnature</nature> 
```

到文件的`<natures></natures>`标签`.project`。

# c++ - 如何将c++向量导出到excel？

> ID：14586052
> 
> 赞同：1
> 
> 时间：2013-01-29T15:11:05.330
> 
> 标签：c++, excel, file, vector, export

正如问题所述，如何将 C++ 脚本生成的向量导出到 Excel 工作表？我查看了与 C# 相关的答案，但我不熟悉概述的方法。这是如何在 C++ 中完成的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T15:12:32.660

我建议 CSV 格式，它是简单的文本，可以通过 excel 轻松导入。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-10-02T13:46:18.730

您可以编写 C++ 函数，其作用类似于 Excel 原生函数并接受或返回范围参数。长话短说：[Dalton 的书](https://rads.stackoverflow.com/amzn/click/com/0470027975)给出了完整的故事，并详细探讨了 Excel 与 C++ 接口的多种方法。完整且写得很好，但有 600 页，因此如果您想要快速启动并运行某些内容，可能并不理想。短篇故事：我为我的学生和同事写了一个[教程](http://linkedin.com/pulse/exporting-c-code-excel-quick-painless-tutorial-antoine-savine)，应该可以让你在一小时内将 Excel 与 C++ 接口。两者都面向金融应用，但编程适用于任何领域。我希望它有所帮助。

# java - 为多边形生成顶点

> ID：14586053
> 
> 赞同：4
> 
> 时间：2013-01-29T15:11:10.337
> 
> 标签：java, opengl-es, polygon, vector-graphics

我正在尝试为 OpenGL ES 渲染器制作一个有用/通用的 2D 多边形类。当我创建一个多边形时，我给它几个参数：

```
Polygon(Vector3 centerpoint, int numVertices, float inPolySize) 
```

然后，我尝试生成顶点。这是我遇到困难的地方。我需要确定顶点的数量，得到一个角度，找到该角度的 x/y 位置，有人考虑大小，并按位置偏移。

OpenGL 可以处理大量数据。没有什么比 Vector3 的列表更好的了。相反，它是 float[] 数组，第一个索引是 X1，第二个是 Y1，第三个是 Z1，第四个是 X2，等等......

```
final int XPOS = 0;
final int YPOS = 1;
final int ZPOS = 2;
int mvSize = 3; // (x, y, z);
float[] vertices = new float[mvSize * mNumVertices];
for (int verticeIndex = 0; verticeIndex < mNumVertices; verticeIndex++)
{
    double angle = 2 * verticeIndex * Math.PI / mNumVertices;
    vertices[mvSize * verticeIndex + XPOS] = (((float)Math.cos(angle)) * mPolygonSize) + mPosition.GetX();
    vertices[mvSize * verticeIndex + YPOS] = (((float)Math.sin(angle)) * mPolygonSize) + mPosition.GetY();
    vertices[mvSize * verticeIndex + ZPOS] = mPolygonSize + mPosition.GetZ();
} 
```

不幸的是，我的三角形从来都不是完全正确的。歪了很多，大小不合适

我想我将尺寸放入错误的公式中，有人可以帮忙吗？

编辑：这是一些示例数据 Polygon test = new Polygon( new Vector3(0, 1, 0), 3, .5f);

> 顶点[0] = -0.25
> 
> 顶点[1] = 1.4330127
> 
> 顶点[2] = 0.0
> 
> 顶点[3] = -0.25
> 
> 顶点[4] = 0.5669873
> 
> 顶点[5] = 0.0
> 
> 顶点[6] = 0.5
> 
> 顶点[7] = 1.0
> 
> 顶点[8] = 0.0
> 
> 顶点[9] = -0.25
> 
> 顶点[10] = 1.4330127
> 
> 顶点[11] = 0.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-09T06:27:37.797

我不敢相信我这么愚蠢。基本上，我的渲染窗口比我的屏幕小。如果我的屏幕是一个矩形，那么我的渲染窗口就是一个正方形。

This being the case, any triangle I draw that was up was clipped by my render window. To me, it looked like the triangle was skewed. Really, it was just clipped!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T06:50:41.770

Java 数学库将弧度作为输入，而不是度数。我没有看到您用于计算的角度，但如果您没有从度数转换为弧度，您会看到一些倾斜的形状，并会解释您的计算是正确的，但预期的结果是错误的。

# linux - 递归脚本按名称删除文件夹，除了 2

> ID：14586055
> 
> 赞同：1
> 
> 时间：2013-01-29T15:11:11.600
> 
> 标签：linux, bash, shell

我需要编写一个递归脚本来删除名为“date-2012-01-01_12_30”的子文件夹中的所有文件夹，但保留两个最新的。

/var/www/temp/updates/ 然后按“日期”和“代码”显示数百个文件夹

例如

```
/var/www/temp/updates/2012-01-01/temp1/date-2012-01-_12_30
/var/www/temp/updates/2012-01-01/temp1/date-2012-02-_13_30
/var/www/temp/updates/2012-01-01/temp1/date-2013-11-_12_30
/var/www/temp/updates/2012-01-01/temp2/date-2012-01-_12_30 
```

我正在考虑使用 find 来获取文件夹，但不确定如何知道我可以删除哪些文件夹，因为脚本必须知道该子文件夹中的日期文件夹以及哪些文件夹是最新的

嗯，有什么帮助会很好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:18:56.870

如果所有文件夹都在子目录`temp1`, `temp2`, ... 中，您可以使用`ls -tr`

```
ls -dtr /var/www/temp/updates/2012-01-01/temp*/* | head -n -2 | xargs rm -rf 
```

这列出了按时间排序的所有文件夹`ls -dtr`，除两个最新的文件夹外`head`，其余文件夹均被删除`xargs rm -rf`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:21:59.160

这应该有效：

```
find /var/www/temp/updates/ -type d -name "date-*" -printf '%T@ %p\n' | sort -n | head -n -2 | cut -f2- | xargs rm -rf 
```

`find`打印出目录路径及其最后修改时间。然后对其进行排序，除最后两个之外的所有内容都将被删除。

# php - PHP：PDO 连接 SQL 和丢失的返回数据

> ID：14586058
> 
> 赞同：1
> 
> 时间：2013-01-29T15:11:18.917
> 
> 标签：php, sql, xaml, phpmyadmin

请在下面找到一个脚本，该脚本会抓取应在我的数据库 ( SQL|PhpMyAdmin ) 中返回数据的 HTML 表。我使用（XAMPP）在浏览器中运行脚本

刮板工作正常，它可以在浏览器中显示数据或下载为 excel 文件。**我使用 [ $conn = mysql_connect** ]向 SQL 添加了一个连接字符串，但是，我读到此方法已被弃用，最好使用 [ **mysqli_connect** ] 或***PDO***。

**问题 ：**

*   如果我使用 mysqli_connect，我不会遇到连接到我的数据库的问题，但**返回的数据缺少一些行**。例如，该表有 100 行，而我只会在数据库中找到 80 行。可能是什么原因造成的？我不从脚本中思考，否则我不会在浏览器中看到完整的结果

*   我尝试了 PDO（见下面的代码），连接成功，但是我的数据库中没有输入任何数据。**有没有语法错误**？

我不介意使用**mysql_connect**、**mysqli_connect**或**PDO**，只要我的数据库中的所有行都没有丢失任何内容。

请告知要使用什么连接字符串以及为什么缺少行。该脚本运行良好，浏览器中返回的数据与抓取的 URL 相同。

**代码 1：使用 mysqli_connect 方法**+ 脚本概述

```
 $connection = mysqli_connect("localhost", "username", "password", "test");

 if (!$connection) {
printf("Connect failed: %s\n", mysqli_connect_error());
 exit();
  }

printf("Host information: %s\n", mysqli_get_host_info($connection));

$OutPut_Excel = $_GET['xls'];// 0 web page or 1 output excel
$show_Country = $_GET['show'];// 0 or 1
$urls = "
http://www.URL.com
";

 //output excel
if($OutPut_Excel == "1")
{
header("Content-Type: application/vnd.ms-execl;charset=iso-8859-1");
header("Content-Disposition: attachment; filename=data.xls");
header("Pragma: no-cache");
header("Expires: 0");
 }

set_time_limit(0);
ini_set('memory_limit', '-1');
ini_set('display_errors',true);

//output html
if($OutPut_Excel == "0")
{
?>
<html>
<head>
<title>scraper</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>
<body>
<?php
 }

 if($OutPut_Excel == "0")
{
if($show_Country)
{
    $nameCountry = '<td>Country</td>';
}
 echo "<table border='1'><tr><td>Name</td><td>Surname</td>
<td>Email</td><td>Address</td><td>City</td><td>Profession</td>        <td>Phone</td>$Country</tr>";
 }
 else 
 {
echo "Name"."\t";
echo "Surname"."\t";
echo "Email"."\t";
echo "Address"."\t";
echo "City"."\t";
echo "Profession"."\t";
echo "Phone"."\t";
if($show_Country)
{
    echo "Country"."\t";
}

echo "\t\n";
    }

   include 'dom.php';
   $arrurl = explode(';',$urls);
   foreach ($arrurl as $u)
    {
$url = trim($u);
$html = file_get_html($url);
$string = $html->find("table[width=720]",0)->find("font[size=5]",0)->plaintext;
$arr = explode(' at ',$string);
$Satellite = trim($arr[0]);
$Degree = trim($arr[1]);

$k = 0;
foreach ($html->find("table[width=720]") as $d)
{
    $text = $d->outertext;
    $arr = explode('<td',$text);
    $out = "";
    foreach ($arr as $t)
    {
        $arr1 = explode('<font',$t);
        $count_font = count($arr1);
        $arr2 = explode('</font>',$t);
        $count_end_font = count($arr2);
        $need_count = $count_font-$count_end_font;
        $str = "";
        for($j=1;$j<=$need_count;$j++)
        {
            $str=$str."</font>";
        }
        if($out == "")
        {
            $out .= str_replace('</td>',$str,$t);
        }
        else 
        {
            $out .= "<td".str_replace('</td>',$str,$t);
        }
    } 
```

**ECT...更多代码**

```
 echo "$Name"."\t";
                            echo "$Surname"."\t";
                            echo "$Email"."\t";
                            echo "$Address"."\t";
                            echo "$City"."\t";
                            echo "$Profession"."\t";
                            echo "$Phone"."\t";
                            if($show_Country)
                            {
                                echo   "$Country"."\t";

    // SQL QUERY - WORKS FINE BUT SOME ROWS MISSING         
                        }
 $connection->query("INSERT INTO Directory (Name,Surname,Email,Address,City,Profession,Phone,Country) VALUES('$Name','$Surname','$Email','$Address','$City','$Profession','$Phone','$Country')"); 
```

**代码 2 - PDO 连接 - 返回的数据未输入数据库**

```
$db = new PDO('mysql:host=localhost;dbname=test', 'username', 'password');

try{

                         $stmt = $db->prepare('INSERT INTO Directory(Name,Surname,Email,Address,City,Profession,Phone,Country) VALUES($Name, $Surname, $Email, $Address, $City, $Profession, $Phone, $Country)');
                         $stmt->execute(array('Name' => $Name, 'Surname' => $Surname, 'Email' => $Email, 'Address' => $Address, 'City' => $City, 'Profession' => $Profession, 'Phone' => $Phone, 'Country' => $Country));
                         $affected_rows = $stmt->rowCount();

                         } catch(PDOException $ex) {
                         echo "An Error occured!"; 
                         some_logging_function($ex->getMessage());
                         } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:19:46.903

在您的 mysql_query() 函数调用中，您需要提供数据库连接 $conn。

它应该是这样的：

```
$sql = mysql_query("your sql query", $conn); 
```

不是所有的行都被插入，一定是插入过程中出错。尝试像这样修改您的代码，以便打印 MySQL 错误：

```
$connection->query("your sql query") or die(mysqli_error($connection)); 
```

很可能它是您要插入的某个值中某处的撇号 ( ' )。您可能需要删除或转义它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:54:36.743

尝试

```
$stmt = $db->prepare('INSERT INTO Directory(Name,Surname,Email,Address,City,Profession,Phone,Country) VALUES($Name, $Surname, $Email, $Address, $City, $Profession, $Phone, $Country)');
                         $stmt->execute(array('Name' => $Name, 'Surname' => $Surname, 'Email' => $Email, 'Address' => $Address, 'City' => $City, 'Profession' => $Profession, 'Phone' => $Phone, 'Country' => $Country)); 
```

至

```
$stmt = $db->prepare('INSERT INTO Directory(Name,Surname,Email,Address,City,Profession,Phone,Country) VALUES(:Name, :Surname, :Email, :Address, :City, :Profession, :Phone, :Country)');
                         $stmt->execute(array(':Name' => $Name, ':Surname' => $Surname, ':Email' => $Email, ':Address' => $Address, ':City' => $City, ':Profession' => $Profession, ':Phone' => $Phone, ':Country' => $Country)); 
```

[http://www.php.net/manual/fr/pdo.prepare.php](http://www.php.net/manual/fr/pdo.prepare.php)

# c++ - 绑定一个 odeint 变量

> ID：14586059
> 
> 赞同：4
> 
> 时间：2013-01-29T15:11:18.980
> 
> 标签：c++, differential-equations, odeint

我正在使用 odeint 来模拟一个系统，其中有几个变量不应小于零。

是否有适当的方法将 odeint 中的变量绑定到特定范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:08:29.650

odeint 中没有这种可能性。而且我想没有算法可以做到这一点。您必须以某种方式对 ODE 中的界限进行编码。

如果您只想在系统演化过程中找到一个界限，请使用类似的循环

```
while( t < tmax )
{
    stepper.do_step( ode , x , t , dt );
    t += dt;
    if( check_bound( x , t ) ) break;
} 
```

两个侧节点，也许这是您的问题的情况：

1.  对于具有守恒定律的 ODE 有特殊的算法，该算法确保守恒定律成立，例如，参见辛求解器。

2.  如果您的边界已经在您的 ODE 中以某种方式编码并且无论如何达到了边界，则您必须缩短求解器的步长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-15T12:15:49.427

您需要的有时称为“饱和”约束，这是动态系统建模中的常见问题。您可以轻松地在方程式中对其进行编码：

```
void YourEquation::operator() (const state_type &x, state_type &dxdt, const time_type t)
{
    // suppose that x[0] is the variable that should always be greater/equal 0
    double x0 = x[0]; // or whatever data type you use
    dxdt[0] = .... // part of your equation here
    if (x0 <= 0 && dxdt[0] < 0)
    {
        x0 = 0;
        dxdt[0] = 0
    }
    // the rest of the system equations, use x0 instead of x[0] if necessary, actually it depends on the situation and physical interpretation
    dxdt[1] = ....
    dxdt[2] = ....
    ...
} 
```

# visual-studio-2010 - 为什么当我想使用 EF Power 工具查看我的模型时出现错误？

> ID：14586061
> 
> 赞同：3
> 
> 时间：2013-01-29T15:11:23.193
> 
> 标签：visual-studio-2010, ef-code-first, dbcontext, fluent, ef-power-tools

我首先使用 EF 代码，然后通过 vs2010 中的“EF 4.x DbContext Fluent Generator for c#”扩展生成我的模型。但是当我想通过 EF Power 工具查看我的实体模型时，我收到此错误：“序列不包含匹配元素”。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T16:30:24.693

这有点太晚了，不确定这是否会有所帮助，但出于其他原因和历史原因......

> 我遇到了同样的问题（使用 Beta 3 - 和 .NET 4/2010/EF5 等） - 解决方案相对简单。
> **我刚刚将项目从“解决方案目录”移到解决方案的根目录中**。

我从处理“迁移”和 PM 控制台中“学到”了这个技巧——如果你有一个库（实体）和你的启动/可执行文件，它就行不通了——而这两者中的任何一个都在某个解决方案目录中。

# android - 我在哪里可以找到 android pinpoint 图标

> ID：14586066
> 
> 赞同：1
> 
> 时间：2013-01-29T15:11:40.493
> 
> 标签：android, google-maps, icons, android-drawable

嗨，我不想向谷歌地图添加精确定位，我想使用类似于此图像中的标准红色或蓝色精确定位图标的东西：http://www.imapbuilder.com/images/online-builder/拇指/分类-pinpoints-with-icon.png。android.R.drawable 中有这样的图标吗？这叫什么？否则我怎么能得到它（或类似的）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:17:07.703

> android.R.drawable 中有这样的图标吗？

不，因为 Google 地图不是标准 Android SDK 的一部分。

> 否则我怎么能得到它（或类似的）？

互联网上有许多免费的剪贴画库——找到您喜欢的图像，并附上您喜欢的许可条款。或者，让图形艺术家创建一个。

请注意，Maps V2 有一个默认标记，类似于图像中的蓝色标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:19:25.680

我不相信地图插件的 V1 默认包含标记（您必须提供自己的标记），但 V2 可以。

[https://developers.google.com/maps/documentation/android/marker#add_a_marker](https://developers.google.com/maps/documentation/android/marker#add_a_marker)

如果你使用 V1，你可以在这里得到一些：[https ://github.com/jgilfelt/android-mapviewballoons/](https://github.com/jgilfelt/android-mapviewballoons/)

# c# - Silverlight 图表尝试将值绑定到集合而不是元素

> ID：14586068
> 
> 赞同：0
> 
> 时间：2013-01-29T15:11:43.910
> 
> 标签：c#, silverlight-4.0, silverlight-5.0, silverlight-toolkit

我的视图模型上有一个属性，它返回一些硬编码的测试数据：

```
public ObservableCollection<Item> Items
{
  get
  {
    return new ObservableCollection<Item> {
      new Item { Key = 0, Count = 5 },
      new Item { Key = 1, Count = 3 },
      new Item { Key = 2, Count = 2 },
      new Item { Key = 3, Count = 7 }
    }
  }
} 
```

我的图表在视图中定义为：

```
<toolkit:WrapPanel>
  <toolkit:Chart>
    <toolkit:LineSeries ItemsSource="{Binding Items}" IndependentAxis="{Binding Key}" DependentValueBinding="{Binding Count}"/>
  </toolkit:Chart>
</toolkit:WrapPanel> 
```

使用该代码，我得到以下异常：

```
System.Windows.Data Error: BindingExpression path error: 'Key' property not found on 'Test.MyViewModel' 'Test.MyViewModel' (HashCode=50157845). BindingExpression: Path='Key' DataItem='Test.MyViewModel' (HashCode=50157845); target element is 'System.Windows.Controls.DataVisualization.Charting.LineSeries' (Name=''); target property is 'IndependentAxis' (type 'System.Windows.Controls.DataVisualization.Charting.IAxis'). 
```

如果我将`DataContext`图表的 绑定到`Items`，则不会引发异常，但图表不显示任何数据。

编辑：不，它抱怨无法在集合上绑定 Key 和 Count 。

我见过的所有示例的图表都是这样设置的，那么为什么我的尝试绑定到视图模型呢？或者更确切地说，这似乎对其他人有用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:21:53.750

您可能需要使用`IndependentValueBinding="{Binding Key}"`.

`IndependentAxis`指定要使用的轴类型 - 分类、日期/时间等，而不是从何处获取轴的数据：

```
<charting:LineSeries.IndependentAxis>
   <charting:CategoryAxis Orientation="X"/>
</charting:LineSeries.IndependentAxis> 
```

# android - 将橙色样式应用于我的搜索视图

> ID：14586079
> 
> 赞同：1
> 
> 时间：2013-01-29T15:12:36.797
> 
> 标签：android

我想将橙色样式应用于我的搜索视图，它是操作栏菜单中的一个项目，我使用 [http://android-holo-colors.com/](http://android-holo-colors.com/)生成了橙色样式，并使用将样式分配给了我的搜索视图

```
 <item
        android:id="@+id/menu_search"
        style="@style/EditTextOrange"
        android:actionViewClass="android.widget.SearchView"
        android:icon="@drawable/action_search"
        android:showAsAction="always"
        android:title="search"/> 
```

我的风格

```
<?xml version="1.0" encoding="utf-8"?>

<!-- Generated with http://android-holo-colors.com -->
<resources xmlns:android="http://schemas.android.com/apk/res/android">

  <style name="EditTextOrange" parent="android:Widget.EditText">
      <item name="android:background">@drawable/edit_text_holo_light</item>
      <item name="android:textColor">#000000</item>
  </style>

</resources> 
```

如何将样式应用于我的搜索视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:25:26.027

您可以像这样更改 SearchView 可绘制对象：

```
<style name="EditTextOrange" parent="android:Theme.Holo">

    <item name="android:searchViewTextField">@drawable/mySearchView</item>

</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:15:25.893

[我使用从http://android-holo-colors.com/](http://android-holo-colors.com/)生成的 textfield_activated_holo_light 图像解决了这个问题

```
searchPlate.setBackgroundResource(R.drawable.textfield_activated_holo_light); 
```

# c# - ASP.Net / C#：替换数据绑定字段中的字符

> ID：14586086
> 
> 赞同：4
> 
> 时间：2013-01-29T15:12:59.650
> 
> 标签：c#, asp.net, ascx

在 ascx 文件中，我正在呈现来自数据绑定字段的数据，如下所示：

```
<%# Eval("Description")%> 
```

数据源是从后面的代码绑定的。

有时`Description`其中有一些我需要替换的字符。如果我能做这样的事情，我会很高兴：

```
<%# Replace(Eval("Description"), "a", "b")%> 
```

当然，这在数据绑定操作中是不允许的`(<%#)`。

我不想在后面的代码中对其进行硬编码，因为在后面的代码中提取字段会很丑陋，也许将其提取到一个变量中，然后在 ascx 页面上输出该变量。我希望有一些（可能非常简单）的方法可以直接在 ascx 页面上进行替换。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-29T15:36:08.090

您可以将值转换为字符串并像这样处理它：

```
<%# ((string)Eval("Description")).Replace("a", "b") %> 
```

或者

```
<%# ((string)DataBinder.Eval(Container.DataItem, "Description")).Replace("a", "b") %> 
```

不过要小心，因为如果`Description`是`null`，你会碰到`NullReferenceException`. 您可以执行以下操作来避免这种情况：

```
<%# ((string)Eval("Description") ?? string.Empty).Replace("a", "b") %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:39:24.883

您可以将数据绑定到包含您想要的所有信息（包括此信息）的匿名类型，该类型是从代码隐藏中填充的 - 比将其提取到变量要丑得多。

# python - 如何使 html 提交按钮在烧瓶中起作用？

> ID：14586088
> 
> 赞同：2
> 
> 时间：2013-01-29T15:13:13.897
> 
> 标签：python, html, forms, flask, submit-button

我有一个 Flask 应用程序，在我的 html 模板（即 Jinja2）中，我有一个只有一个按钮的简单表单：

```
<form name='resetLayoutForm' method='POST'>
    <input type="submit" value="Reset layout" class="submitButton"/> 
</form> 
```

现在，我想知道如何“让 Python 脚本知道”该按钮已被单击？

我试过：

```
@app.route('/localhost/some_route', methods = ['POST', 'GET'])
def function():
    .   .    .
    if request.method == 'POST':
        # code
    .   .    . 
```

但这不是一个好的解决方案，因为我在代码中有一些其他操作正在使用 POST 请求方法，并且我不希望在使用这些其他 POST 操作时激活#code。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T15:51:18.373

复制包含按钮的表单并将其操作设置为不同的 URL。然后，当按下时，只有那个不同的 URL 会接收数据。

显然，正如其他人所指出的，有 Javascript 机制可以实现这一点，但如果不需要这些......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:38:35.260

“'让 Python 脚本知道'该按钮已被单击”是什么意思？

如果您不想与服务器对话并且按钮单击仅适用于客户端，那么为什么不使用 Javascript 呢？例如，最简单的方法是使用 onclick 事件：

```
<input type="submit" value="Reset layout" class="submitButton" onclick=doSomething() /> 
```

其中 doSomething() 是您可以编写的 javascript 函数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-23T07:24:26.997

您可以检查输入的 value 属性，`request.form.values()`如下所示：

```
@app.route('/localhost/some_route', methods = ['POST', 'GET'])
def function():
    # code
    if 'Reset_layout' in request.form.values():
        # code 
```

# extjs - ExtJS CheckboxGroup 标签换行

> ID：14586089
> 
> 赞同：2
> 
> 时间：2013-01-29T15:13:15.343
> 
> 标签：extjs

我对复选框有疑问。所以这些复选框在列中，较长的标签包裹在它们的复选框下。将列宽设置为最长标签是否有任何解决方案？它必须是动态宽度。你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:49:14.050

这是您可以用来测量所有标签并将最宽标签的宽度应用于所有标签的东西[http://jsfiddle.net/Wr7Wr/1/](http://jsfiddle.net/Wr7Wr/1/)

```
Ext.define('DynamicLabelFormPanel', {
    extend: 'Ext.form.Panel',

    initComponent: function() {
        // Need to create a hidden field to measure the text
        var field = new Ext.form.field.Text({fieldLabel: 'Testing', value: 'whateves', renderTo: Ext.getBody(), hidden: true});
        var metrics = new Ext.util.TextMetrics(field.labelEl);
        var widths = Ext.Array.map(this.items, function(item) {
            // Need to acount for the : 
            return metrics.getWidth(item.fieldLabel + ":");
        });
        var maxWidth = Math.max.apply(Math, widths);
        for (var i = 0; i < this.items.length; i++) {
            this.items[i].labelWidth = maxWidth;
        }
        this.callParent();
    }
} 
```

作为一个插件，这可能会更好，但它会告诉你需要做什么

# javascript - 如何使特定按钮保持活动状态？CSS, Javascript

> ID：14586091
> 
> 赞同：0
> 
> 时间：2013-01-29T15:13:29.373
> 
> 标签：javascript, css, button

遇到问题，我在页面上有一个 javascript 内容切换器，但我似乎无法让一件事正常工作 - 如何使单击的按钮在单击后保持活动状态？

这是一个代码： **JS**

```
<script type="text/javascript">
function switch1(div) {
var option=['one','two','three'];
for(var i=0; i<option.length; i++) {
if (document.getElementById(option[i])) {
obj=document.getElementById(option[i]);
obj.style.display=(option[i]==div)? "block" : "none";
}
}
}

window.onload=function () {switch1('one');}
</script> 
```

**CSS**

```
#switchables li a {
    color: #262626;
    text-decoration: none;
    display: inline-block;
    padding-top: 14px;
    padding-right: 34px;
    padding-bottom: 10px;
    padding-left: 33px;
    background-image: url(img/catButBcgr.jpg);
    border-right-width: 1px;
    border-left-width: 1px;
    border-right-style: solid;
    border-left-style: none;
    border-right-color: #E1E1E1;
    border-left-color: #FFF;
}
#switchables li a:hover {
    background-image: url(img/catButBcgrH.jpg);
}
#switchables li a:active {
    background-image: url(img/catButBcgrA.jpg);
} 
```

**HTML**

```
 <ul id="switchables">
   <li><a class="active" href="javascript:void[0];" onclick="switch1('one');">OVERVIEW</a></li>
   <li><a class="active" href="javascript:void[0];" onclick="switch1('two');">CATEGORY</a></li>
   <li><a class="active" href="javascript:void[0];" onclick="switch1('three');">CATEGORY</a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:24:22.847

您需要创建一个“活动”类并在单击时将其添加到按钮中。

```
#switchables a:active, #switchables a.active {
    background-image: url(img/catButBcgrA.jpg);
} 
```

使用 jQuery 很容易：

```
$(document).ready(function() {
    myInit()
})

function myInit() {
    $('#switchables a').click(function() {
        $('#switchables a').removeClass('active')
        $(this).addClass('active')
    })
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-07T03:13:25.020

这是一个很好的学习机会。Diodeus 的回答完全正确，但他的 jQuery 代码在后台做了可怕的事情，请参阅评论：

```
$(document).ready(function() {
    myInit()
})

function myInit() {
  // on the following line, jQuery creates an array of objects (a tags)
  // (costly operation!) and adds click listener to each of them
  $('#switchables a').click(function() {
    // on the following line, jQuery creates the crazy God object again
    // and throws it off after this command
    // for each a tag and tries to remove class active from it
    // in only one case it actually does something - mere class removal
    // btw removeClass is ridiculous function if you dig into jQuery 1.10 source  
    $('#switchables a').removeClass('active')
    // this = the source of click event, not jQuery object
    $(this).addClass('active')
  })
} 
```

这只是一个非常短的代码，现在想象一下你用这种风格编写整个网络。它会明显变慢，消耗更多的资源。

如果您坚持使用 jQuery，请尝试编写一些可重用的代码：

```
function myInit() {
  // jQuery object is created only once
  var $anchors = $('#switchables a');
  $anchors.click(function() {
    // ...and reused here
    $anchors.removeClass('active')
    $(this).addClass('active')
  });
} 
```

但是使用本机 javascript 会做得更好

```
var items = document.querySelectorAll("#switchables a");
var prev = items[0];
[].forEach.call(items,function(item) {
  item.addEventListener("click",function() {
    // no need to loop every a tag here
    prev.classList.remove("active");
    item.classList.add("active");
    // remember previous active a tag
    prev = item;
  });
}); 
```

`document.querySelectorAll`是一个[实时集合](https://developer.mozilla.org/en-US/docs/Web/API/NodeList)，这是任何 javascript 库都无法实现的，它是在浏览器的底层和更有效的代码中实现的。

**建议**在您熟悉 Javascript 之前不要使用 jQuery。如果没有这些知识，您将只能实现基本动画、复制和粘贴一些插件，仅此而已。而且，当您在某种程度上了解 Javascript 时，您可能会发现很少有理由再使用 jQuery。

在上面的代码中，可以很容易地删除 jQuery：

1：`$(document).ready(handler)`->`document.addEventListener("readystatechange",handler);`

2：`$('#switchables a')`->`document.querySelectorAll("#switchables a");`

3：`$(nodeList).click(handler)`->

```
[].forEach.call(nodeList,function(node) {
  // you can reuse node here, unlike the jQuery
  node.addEventListener("click",handler);
}); 
```

4：`$(node).removeClass(className)`->`node.classList.remove(className)`

5：`$(node).addClass(className)`->`node.classList.add(className)`

它长了几个字符。但它更具可重用性、可读性和有效性，而且它不是上帝的对象或 Cargo 邪教编程。

上面的本机代码是 javascript 标准，任何体面的浏览器都支持。三年前，当 Diodeus 提供他的答案时，IE8 在这里是个问题。但它现在已经死了（根据 gs.statcounter，全球不到 2%）。通过不支持它来帮助它彻底死去。

# javascript - 使用嵌入的对象数组填充 Javascript 对象数组

> ID：14586094
> 
> 赞同：1
> 
> 时间：2013-01-29T15:13:37.330
> 
> 标签：javascript, arrays

我是 Javascript 新手（熟悉 C/C++），我正在尝试解析 XML 文件并将其存储在对象数组中。该结构类似于一个项目符号列表，其中有一个主列表项和可能的多个列表子项：

```
var MenuLine =
[{
    label : "null",
    icon : "null",
    Subitem:
    [{
        label : "null",
        icon : "null"
    }]
}]; 
```

这允许我使用以下语法：

```
var someRandomSubitemText = MenuLine[2].Subitem[4].label; 
```

我尝试使用 .push 方法填充这个数组：

```
var tempMenuLine = [];
var tempSubitem = [];

$(xml).find("item").each(function()
{
    tempMenuLine.label = $(xml).children("label").text();
    tempMenuLine.icon = $(xml).children("icon").text();

    $(this).children("subitem").each(function()
    {
    tempSubitem.label = $(this).children("label").text();
    tempSubitem.icon = $(this).children("icon").text();
    tempMenuLine.Subitem.push(tempSubitem);
    });
    MenuLine.push(tempMenuLine);
}); 
```

但是，这不起作用，因为 .push 方法传递了对 tempMenuLine 的引用，并且我在每次迭代时都覆盖了 tempMenuLine。有没有一种方法可以使用类似于以下语法的方式直接写入 MenuLine 数组？

```
$(xml).find("item").each(function(index1)
{
    MenuLine[index1].label = $(xml).children("label").text();
    MenuLine[index1].icon = $(xml).children("icon").text();

    $(this).children("subitem").each(function(index2)
    {

        MenuLine[index1].Subitem[index2].label = $(this).children("label").text();
        MenuLine[index1].Subitem[index2].icon = $(this).children("icon").text();
});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:22:07.087

将你的 temp var 声明移到你的循环中：

```
$(xml).find("item").each(function() {
    var tempMenuLine = [];
    tempMenuLine[0].label = $(xml).children("label").text();
    tempMenuLine[0].icon = $(xml).children("icon").text();
    tempMenuLine[0].Subitem = []

    $(this).children("subitem").each(function(){
        var tempSubitem = [];
        tempSubitem[0].label = $(this).children("label").text();
        tempSubitem[0].icon = $(this).children("icon").text();
        tempMenuLine[0].Subitem.push(tempSubitem);
    });
    MenuLine.push(tempMenuLine);
}); 
```

这样，您将为循环的每次迭代初始化一个新项目，删除它与前一个项目的“链接”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:17:21.017

一个递归解决方案只是为了好玩。

```
var MenuLine = Xml2Array(xmlText, 'item');

function Xml2Array(xmlDocument, itemName) {
  if (!$(itemName, xmlDocument).length) {
    return;
  }  
  var tmpArray = [];
  $(itemName, xmlDocument).each(function() {
    tmpArray.push({
      label: $('label', this).first().text(),
      icon: $('icon', this).first().text(),
      Subitem: Xml2Array(this, 'subitem')
    });
  });
  return tmpArray;
} 
```

# regex - 为什么这个正则表达式不匹配

> ID：14586095
> 
> 赞同：2
> 
> 时间：2013-01-29T15:13:38.177
> 
> 标签：regex

我想知道为什么以下正则表达式适用于某些字符串而不适用于其他一些字符串：

```
/^([0-3]+)(?!4|.*5)[0-9]+$/ 
```

1151 -> 这不匹配

1141 -> 这确实匹配，但为什么呢？因为我可以将 .* 视为空并且正则表达式变为`/^([0-3]+)(?!4|5)[0-9]+$/`

我认为我误解了前瞻的工作方式......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T16:34:31.960

让我们一步一步地看看正则表达式如何解析你的字符串。

```
^([0-3]+)(?!4|.*5)[0-9]+$ 
```

首先，一些澄清。`(?!4|.*5)`是一个否定的前瞻，检查是否`4`或`.*5`跟随最后一个消费的字符。如果是这样，则当前匹配失败并后退。也可以这样写，就`(?!(4|.*5))`好像您希望它更清楚地了解它究竟是如何`|`影响它的。

**让我们从看看`1141`**

首先，`[0-3]+`消耗尽可能多的字符，因此它将消耗最多并包括`11`in `1141`。剩下的是`41`. 正则表达式现在检查是否`4`在当前字符之后，并且由于`?!`是负前瞻，如果找到匹配将失败。由于`4`follow `11`，匹配失败，正则表达式倒退并再次尝试。

现在，它不再匹配两个`1`s，而是尝试一个 match 和 matches `1`，`141`剩下的。`?!4`检查以确保`4`是下一个字符，你知道什么，它不存在。由于不匹配，正则表达式会留下负前瞻，并继续处理正则表达式的其余部分。`141`由 final 匹配`[0-9]+`，因此匹配整个**`1141`字符串**。请记住，环顾四周不消耗字符。

**现在让我们看看`1151`**

和上次一样，`11`被消耗掉了，我们`51`剩下了。现在我们看一下负前瞻，并评估其余的字符串。显然，`4`is no 在这个字符串中，所以我们可以忽略它，所以让我们看一下`.*5`.

因此，前瞻`.*5`尝试匹配`51`。如果它最终匹配，就像之前匹配将失败并且正则表达式将后退。现在，如果您完全知道任何正则表达式，很明显将匹配since`.*5`的开头可以评估为空。`51``.*`

所以我们退后一步，现在我们已经匹配了一个`1`而不是两个，我们再次处于负前瞻状态。

我们目前已经消费了`1`，仍然有待`151`匹配，并且是`(?!4|.*5)`正则表达式的一部分。在这里，`4`显然我们的字符串中不存在，所以它不会匹配，所以让我们`.*5`再看一遍。

`.*5`将匹配一部分`151`since`.*`将消耗第一个`1`，并且`5`将通过匹配结束`5`。如果您知道正则表达式，这也应该很明显。

所以我们再次在否定前瞻中进行了匹配，这很糟糕......所以我们再次退后。我们没有更多的整数可以尝试与 [0-3] 匹配，并且由于您无法将 0 个整数与 a 匹配`+`，**因此整个字符串无法匹配正则表达式。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:22:35.743

`1141`匹配，因为正则表达式引擎可以从匹配 回溯`11`到`[0-3]+`仅匹配第一个`1`，剩下的数字由 匹配`[0-9]+`。

由于第一个字符之后的下一个字符`1`is`1`和 not `4`，因此仅查看下一个字符的负前瞻不会阻止匹配。

`1151`不匹配，因为添加的负前瞻阻止`.*`了它。

在前瞻之前添加`.*`put`5`现在意味着'如果下一个字符是 ' 则不匹配`4`，或者在任意数量的任何字符之后下一个字符是`5`' （忽略换行符）。

因此，即使引擎回溯以`[0-3]+`仅匹配 中的第`1`一个，字符串`1151`中仍然存在前导，因此会阻止匹配。`5`

请记住，look-aheads 和look-behinds 是*零宽度*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:19:43.047

那是什么正则表达式的味道？

/^([0-3]+) **(?!4|.*5)** [0-9]+$/

老实说，我看到它匹配 1141 而不是 1151 的唯一方法是，如果正则表达式的突出显示部分将被评估为`NOT 4 or .* followed by 5`. 如果是这种情况，那么正则表达式引擎将找不到匹配项，`1141`因为它会匹配 4 但会错过 5 以完成内部匹配。

但是，通常交替将被理解为`4`或`.*5`- 这仍然不等于 4 或 5，因为`.*`当引擎想要进行匹配时，表达式可以证明非常强大。

你在用什么测试表达式？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T15:18:45.167

如果你想让它匹配 4 或 5 最好的选择是

```
/^[0-3]+[45][0-9]+$/ 
```

但是如果没有更好地解释它应该做什么，就很难提出更多的建议......

# regex - 清理 ASCII 码的十六进制转储

> ID：14586097
> 
> 赞同：2
> 
> 时间：2013-01-29T15:13:45.327
> 
> 标签：regex, ascii, hexdump

我有一个简单的十六进制转储格式的 PDF 文件，行如下所示：

```
00000000:  25  50  44  46  2d  31  2e  34  0d  0a  25  e2  e3  cf  d3  0d  %PDF-1.4..%.....
00000010:  0a  31  20  30  20  6f  62  6a  0d  0a  3c  3c  20  2f  46  69  .1 0 obj..<< /Fi
00000020:  6c  74  65  72  20  2f  46  6c  61  74  65  44  65  63  6f  64  lter /FlateDecod
00000030:  65  20  2f  4c  65  6e  67  74  68  20  31  38  34  30  36  20  e /Length 18406 
00000040:  3e  3e  0d  0a  73  74  72  65  61  6d  0d  0a  2b  2c  9c  77  >>..stream..+,.w 
```

我怎样才能清理文件，所以我只剩下十六进制值？我猜是正则表达式，但我未能在编辑器中成功应用它。我在 Windows 机器上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:25:24.963

记事本++

Ctrl+F -> Replace - 勾选左下角的*正则表达式*

寻找：`^(.{73}).*$`

用。。。来代替：`\1`

或*Alt+Drag*用于列选择和复制/粘贴。

# javascript - jQuery $.ajax - 从成功函数调用错误函数？

> ID：14586098
> 
> 赞同：0
> 
> 时间：2013-01-29T15:13:47.260
> 
> 标签：javascript, php, jquery, error-handling

在 php 脚本中，在尝试插入数据库后，我将返回到调用 $.ajax() 函数的新记录的 id 或错误消息：

```
if ($newID > 0) {
    // Successfully added new record
    echo $newID;
} else {
    // No new record was inserted
    echo 'Error: ' . mysqli_error($dbc);
} 
```

我的问题是：如果 php else 子句被触发并且我通过 echo 传递一个字符串，那么 $.ajax 函数中不会调用 success() 函数吗？有没有办法根据从 php 脚本传递的内容以某种方式“触发” $.ajax error() 函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:18:19.223

$.ajax.error() 不应该真的被解雇，因为 AJAX 调用是成功的。但是，我想如果你真的想要的话，你可以返回一个不同的标题：

```
header("HTTP/1.0 404 Not Found"); 
```

请参阅[http://php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)和[http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

# html - 放置 3 个 div 但有额外的空白空间

> ID：14586102
> 
> 赞同：0
> 
> 时间：2013-01-29T15:13:54.277
> 
> 标签：html, css

我有一个项目，其中包含 3 个 div，使用 css 中的 z 索引将它们层叠在一起，但是当我将它应用于三个并调整顶部位置时，在另外两个 div 之前的位置留下了一个很大的空白空间. 任何人都遇到过这个并想出如何解决它？

继承人的html

```
<div id="kit" data-role="page" data-theme="a">
    <div data-role="header">
        <h1>HI 9829 Kit</h1>
    </div>

    <div class="kit edgeLoad-EDGE-1809939789" style="margin: auto;"></div>

    <div class="container edgeLoad-EDGE-1809939789"></div>

    <div class="buttons edgeLoad-EDGE-1809939789">
        <a href="#a1" class="dot edgeLoad-EDGE-1809939789" style="top: 138px; left: 28px"></a>
        <a href="#a18" class="dot edgeLoad-EDGE-1809939789" style="top: 45px; left: 261px"></a>
    </div>

      <div data-role="footer" data-position="fixed">
          <h3>©2013</h3>
      </div>
 </div> 
```

继承人的CSS

```
#kit .kit{
    width:700px;
    height:670px;
    background-image:url(../img/9829-Kit_2.png);
    z-index:1;
}   

#kit .buttons{
    position: relative;
    margin: auto;
    height: 670px;
    width: 700px;
    z-index:3;
}

#kit .container {
    position: relative;
    margin: auto;
    background-image: url(../img/9829-Kit.png);
    background-repeat: no-repeat;
    height: 670px;
    width: 700px;
    z-index:2;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:23:04.717

为了使 z-index 正常运行，应该设置位置属性，不管它是设置为绝对、相对还是固定。

# google-maps - 如何确定 Google Maps Api v3 中是否不存在地址

> ID：14586105
> 
> 赞同：1
> 
> 时间：2013-01-29T15:14:12.047
> 
> 标签：google-maps, google-geocoding-api

您好我正在尝试使用谷歌的地图 API v3 地理编码网络服务来确定某个城市+省+国家中是否存在地址。我看到谷歌总是返回一些东西。例如，如果我尝试使用[http://maps.googleapis.com/maps/api/geocode/json?address=Colon%20100%20 查找现有地址：“Colon 100, Córdoba, Córdoba, Argentina”， C%C3%B3rdoba,C%C3%B3rdoba,Argentina&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=Colon%20100%20,C%C3%B3rdoba,C%C3%B3rdoba,Argentina&sensor=false)我得到了一些东西。但是，当我尝试使用以下方式查找不存在的地址时，例如“nonexistingaddres 2, Córdoba, Córdoba, Argentina”：[http ://maps.googleapis.com/maps/api/geocode/json?address=nonexistingaddress%20100,C% C3%B3rdoba,C%C3%B3rdoba,Argentina&sensor=false](http://maps.googleapis.com/maps/api/geocode/json?address=nonexistingaddress%20100,C%C3%B3rdoba,C%C3%B3rdoba,Argentina&sensor=false)我也得到一个结果。我不知道如何仅通过分析谷歌的响应来找出“不存在”的街道是否存在。在此先感谢，单声道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-17T22:28:37.683

我知道这个问题很老，但我想我还是会为仍在寻找的人回答这个问题。根据我的经验，处理此问题的最佳方法是查看 API 响应。我不使用谷歌地图进行地址验证，只是为了查找坐标，但如果某人提供的地址无效（至少就谷歌而言），我需要正确失败，因为它不会返回可用我的应用程序使用的纬度/经度。

在 PHP 中，我做这样的事情：

```
 public static function  latlong($location) {

        if ($location!='') {
            try {
                $json = file_get_contents('http://maps.googleapis.com/maps/api/geocode/json?address='.urlencode($location));
                $parsedjson = json_decode($json, true);

                if (key_exists(0,$parsedjson['results'])) {
                    $lat_long_array = $parsedjson['results'][0]['geometry']['location'];
                    return $lat_long_array;
                } else {
                    return false;
                }
            } catch (Exception $e) {
                //echo 'Caught exception: ',  $e->getMessage(), "\n";
                return false;
            }
        }

    } 
```

希望对最终来到这里的任何 Google 员工有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:14:43.823

[Google Maps API v3 地理编码](https://developers.google.com/maps/documentation/javascript/geocoding)器不是地址验证器。其目的是找到给定（邮政）地址的最佳坐标。

这并不能阻止人们[尝试使用它](https://www.google.com/search?q=google+maps+API+3+address+validation)

# asp.net - ASP.NET 如何在它的通用错误处理程序中获取行号

> ID：14586107
> 
> 赞同：2
> 
> 时间：2013-01-29T15:14:29.070
> 
> 标签：asp.net, exception-handling

每个人都熟悉 ASP.NET 的默认错误处理程序。黄色框包含源错误（发生错误的 5 行代码）和源文件（文件名和行号），如下所示：

```
Source Error:

Line 48:         public ActionResult TriggerException()
Line 49:         {
Line 50:            throw new SystemException("This is a generated exception to test the global error handler.");
Line 51:         }
Line 52:         

Source File: c:\MyApp\Controllers\TestToolsController.cs    Line: 50 
```

我正在构建一个自定义错误处理程序并希望获得这些相同的信息，但它们不包含在异常对象中。有谁知道我如何检索这些物品。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T15:17:41.053

行号在 Exception 本身中不可用，但在 StackTrace 中可用，如下所示：

```
try
{
    // code that throws an Exception here
}
catch (Exception exc)
{
    var frame = new StackTrace(exc, true).GetFrame(0); // where the error originated
    var lineNumber = frame.GetFileLineNumber();
    // Handle line numbers etc. here
} 
```

# azure - 使用网络代理时禁止 Azure 服务管理 api 403

> ID：14586112
> 
> 赞同：0
> 
> 时间：2013-01-29T15:14:43.117
> 
> 标签：azure, http-status-code-403, azure-api-management

我使用 azure service management rest API 做了一个控制台应用程序来管理 azure 服务器。我按照[http://msdn.microsoft.com/en-us/library/windowsazure/gg651127.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/gg651127.aspx)的说明创建证书，在订阅级别上传到 azure。导入到本地我的（个人）文件夹。一切正常。我可以获得托管服务。创建新的主机服务。

但是当我在我的机器上使用网络代理时。响应始终是 403 Forbidden。我试图在 HttpWebRequest 中设置代理，但仍然是同样的错误。

另外，我在 aws EC2 中运行这个控制台应用程序并且有相同的 403 Forbidden 错误（也许 EC2 也使用代理？）。

假设代理服务器应该将 Web 请求转发到带有证书的 azure management rest API 服务器，但我想不是。有人告诉我，这个证书可能只是自己生成的并且无效。所以代理服务器拒绝了它。不确定这是否是原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T23:20:47.980

Azure 管理 API 需要签名标头。一些代理会更改（添加/修改）标头标签，这会使签名无效并导致 403。

wrt EC2 - 您是否在 VM 上安装了管理证书？没有它，请求将失败并返回 403。

建议之一是使用 Fiddler 比较代理前后的请求。这会告诉你什么（如果有的话）正在改变。

# android - 具有重复模式的 BitmapDrawable 的圆角

> ID：14586113
> 
> 赞同：1
> 
> 时间：2013-01-29T15:14:45.110
> 
> 标签：android, android-drawable

我想将背景设置为可绘制的 LinearLayout。

我可以用[形状和渐变来完成它的角落吗？](https://stackoverflow.com/questions/1683185/android-listview-with-rounded-corners)

主要问题是我需要重复位图以匹配视图的大小

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:16:04.630

试试这个并将其作为免费添加到您的 Xml 项目中：

```
<?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android" >
          <solid android:color="#dadada"/> 
                 <corners
                       android:topLeftRadius="13dip"
                       android:topRightRadius="13dip"
                       android:bottomLeftRadius="13dip"
                       android:bottomRightRadius="13dip"/>
         <stroke android:width="1dip" android:color="#ff000000"/>
   </shape> 
```

**编辑：**你可以在你的 LinearLayout 中定义一个 ImageView 然后你可以将它的背景设置为你的圆形

```
ImageView IV=(ImageView)findViewById(R.id.imageView);
IV.setBackgroundResource(R.drawable.round_border); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T10:56:07.320

这是一种解决方法，只要您有单色背景 #000000 应该是背景颜色，它就可以完美地工作：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item>
        <bitmap android:src="@drawable/action_bar_background" android:tileMode="repeat"/>        
    </item>    
    <item>
        <shape
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:shape="rectangle" >
            <stroke
                android:width="5dp"
                android:color="#000000" />

            <solid android:color="#00000000"/>

            <corners android:radius="7dp" >
            </corners>
        </shape>
    </item>    
        <item>
        <shape
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:shape="rectangle" >
            <stroke
                android:width="5dp"
                android:color="#000000" />

            <solid android:color="#00000000"/>

        </shape>
    </item>
</layer-list> 
```

# php - Codeigniter 框架的 XAMPP 数据库连接问题

> ID：14586121
> 
> 赞同：0
> 
> 时间：2013-01-29T15:15:11.367
> 
> 标签：php, mysql, codeigniter, phpmyadmin, xampp

我遇到了 XAMPP / phpMyAdmin 的问题并收到以下错误消息，

“phpMyAdmin 尝试连接 MySQL 服务器，但服务器拒绝连接。您应该检查配置中的主机、用户名和密码，并确保它们与 MySQL 服务器管理员提供的信息相对应。”

所以我在谷歌搜索并得到了解决方案，我改变了 /phpmyadmin/config.inc.php 中的值，如下所示，

从 :`$cfg['Servers'][$i]['auth_type'] = 'config';` 到 :`$cfg['Servers'][$i]['auth_type'] = 'http';`

最后我与 xampp / phpMyAdmin 建立了联系。

但是当我在 XAMPP 中访问我的项目时，我得到了如下所示的数据库连接错误，

```
Unable to connect to your database server using the provided settings.

Filename: C:\xampp\htdocs\instagram\system\database\DB_driver.php

Line Number: 124 
```

将 phpMyAdmin 中的“auth_type”从“config”更改为“http”。会影响 Codeigniter 中的数据库问题吗？

请就上述问题提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:22:21.903

您的基于 Codeigniter 的应用程序和 phpMyAdmin 都有单独的文件来连接到数据库。

请编辑文件：

```
C:\xampp\htdocs\instagram\application\config\database.php 
```

并将适当的值放在以下几行：

```
$db['default']['hostname'] = 'YOUR_HOST';
$db['default']['username'] = 'user';
$db['default']['password'] = 'password';
$db['default']['database'] = 'database'; 
```

不要忘记先创建数据库、用户，然后在 mysql 中赋予该用户权限。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-10-05T12:48:16.173

只要去`http://localhost/`：

1.  从左窗格中选择安全。
2.  设置 USERNAME（默认设置为`root`）和 PASSWORD（默认为空）。

输入密码两次以确认。在 XAMPP 中重新启动 MySQL。

# android - Android SDK Manager，默认浏览器不显示图片

> ID：14586126
> 
> 赞同：1
> 
> 时间：2013-01-29T15:15:30.370
> 
> 标签：android, image

我正在使用 Xampp 和 localhost（如 10.0.2.2）将我的网页加载到 Android 模拟器中的默认浏览器中。页面加载正常，但没有显示图像。

在浏览器设置中，在带宽管理下，“加载图像已打勾”。如果我进行图像搜索，Google 会显示图像。

关闭防病毒和防火墙没有任何区别。

感谢任何建议，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-14T10:32:58.610

为了其他遇到此问题的人的利益，在我的情况下，问题是由于 .htaccess 中旨在防止图像热链接的以下代码行：

```
RewriteCond %{HTTP_REFERER} !^http(s)?://(www.)?mydomain.com [NC] 
```

我创建了一个进一步的规则，以便图像在我的本地主机上可用，如下所示：

```
RewriteCond %{HTTP_REFERER} !^http(s)?://localhost/etc [NC] 
```

但我没有为运行 Android 模拟器的端口 10.0.2.2 创建规则。

# windows-7 - 执行“mingw32-make”命令时，Windows 7 64 位上的 libnfc 构建问题

> ID：14586127
> 
> 赞同：0
> 
> 时间：2013-01-29T15:15:33.207
> 
> 标签：windows-7, cmake, nfc

尝试在 64 位 Windows 7 操作系统上构建 libnfc-1.6.0-rc1 时，我收到未定义的参考错误。

我正在使用以下依赖项：

1.  视窗 7 64 位
2.  libusb-win32-bin-1.2.6.0
3.  cmake-2.8.10.2-win32-x86
4.  tdm64-gcc-4.7.1-3

从`cmake-gui`命令成功生成输出后，执行命令时出现以下错误`mingw32-make VERBOSE=1`：

```
D:\libNFC\libnfc-build 1>mingw32-make VERBOSE=1
"C:\Program Files (x86)\CMake 2.8\bin\cmake.exe" -H"D:\libNFC\libnfc-1.6.0-rc1" -B"D:\libNFC\libnfc-build 1" --check-build-system CMakeFiles\Makefile.cmake 0
"C:\Program Files (x86)\CMake 2.8\bin\cmake.exe" -E cmake_progress_start "D:\libNFC\libnfc-build 1\CMakeFiles" "D:\libNFC\libnfc-build 1\CMakeFiles\progress.marks"
mingw32-make -f CMakeFiles\Makefile2 all
mingw32-make[1]: Entering directory `D:/Software development/nfc/libnfc.org/libnfc-build 1'
mingw32-make -f libnfc\CMakeFiles\nfc.dir\build.make libnfc/CMakeFiles/nfc.dir/depend
mingw32-make[2]: Entering directory `D:/Software development/nfc/libnfc.org/libnfc-build 1'
"C:\Program Files (x86)\CMake 2.8\bin\cmake.exe" -E cmake_depends "MinGW Makefiles" "D:\libNFC\libnfc-1.6.0-rc1" "D:\libNFC\libnfc-1.6.0-rc1\libnfc" "D:\libNFC\libnfc-build 1" "D:\libNFC\libnfc-build 1\libnfc" "D:\libNFC\libnfc-build 1\libnfc\CMakeFiles\nfc.dir\DependInfo.cmake" --color=Dependee "D:\libNFC\libnfc-build 1\libnfc\CMakeFiles\nfc.dir\DependInfo.cmake" is newer than depender "D:/Software development/nfc/libnfc.org/libnfc-build 1/libnfc/CMakeFiles/nfc.dir/depend.internal".
Dependee "D:/Software development/nfc/libnfc.org/libnfc-build 1/libnfc/CMakeFiles/CMakeDirectoryInformation.cmake" is newer than depender "D:/Software development/nfc/libnfc.org/libnfc-build 1/libnfc/CMakeFiles/nfc.dir/depend.internal".
Scanning dependencies of target nfc
mingw32-make[2]: Leaving directory `D:/Software development/nfc/libnfc.org/libnfc-build 1'
mingw32-make -f libnfc\CMakeFiles\nfc.dir\build.make libnfc/CMakeFiles/nfc.dir/build
mingw32-make[2]: Entering directory `D:/Software development/nfc/libnfc.org/libnfc-build 1'
"C:\Program Files (x86)\CMake 2.8\bin\cmake.exe" -E cmake_progress_report "D:\libNFC\libnfc-build 1\CMakeFiles" 1
[  3%] Building C object libnfc/CMakeFiles/nfc.dir/nfc.c.obj
cd /d D:\SOFTWA~1\nfc\libnfc.org\LIBNFC~2\libnfc && c:\MinGW64\bin\gcc.exe  -DDRIVER_ACR122_ENABLED -DDRIVER_ARYGON_ENABLED -DDRIVER_PN53X_USB_ENABLED -DHAVE_CONFIG_H -Dnfc_EXPORTS -Du_int16_t=uint16_t -Du_int8_t=uint8_t @CMakeFiles/nfc.dir/includes_C.rsp   -Wall -pedantic -std=c99 -m32 -o CMakeFiles\nfc.dir\nfc.c.obj
  -c "D:\libNFC\libnfc-1.6.0-rc1\libnfc\nfc.c"
"C:\Program Files (x86)\CMake 2.8\bin\cmake.exe" -E cmake_progress_report "D:\libNFC\libnfc-build 1\CMakeFiles" 2
[  6%] Building C object libnfc/CMakeFiles/nfc.dir/nfc-device.c.obj
cd /d D:\SOFTWA~1\nfc\libnfc.org\LIBNFC~2\libnfc && c:\MinGW64\bin\gcc.exe  -DDRIVER_ACR122_ENABLED -DDRIVER_ARYGON_ENABLED -DDRIVER_PN53X_USB_ENABLED -DHAVE_CONFIG_H -Dnfc_EXPORTS -Du_int16_t=uint16_t -Du_int8_t=uint8_t @CMakeFiles/nfc.dir/includes_C.rsp   -Wall -pedantic -std=c99 -m32 -o CMakeFiles\nfc.dir\nfc-device.c.obj   -c "D:\libNFC\libnfc-1.6.0-rc1\libnfc\nfc-device.c"
"C:\Program Files (x86)\CMake 2.8\bin\cmake.exe" -E cmake_progress_report "D:\libNFC\libnfc-build 1\CMakeFiles" 3
[ 10%] Building C object libnfc/CMakeFiles/nfc.dir/nfc-emulation.c.obj
cd /d D:\SOFTWA~1\nfc\libnfc.org\LIBNFC~2\libnfc && c:\MinGW64\bin\gcc.exe  -DDRIVER_ACR122_ENABLED -DDRIVER_ARYGON_ENABLED -DDRIVER_PN53X_USB_ENABLED -DHAVE_CONFIG_H -Dnfc_EXPORTS -Du_int16_t=uint16_t -Du_int8_t=uint8_t @CMakeFiles/nfc.dir/includes_C.rsp   -Wall -pedantic -std=c99 -m32 -o CMakeFiles\nfc.dir\nfc-emulation.c.obj   -c "D:\libNFC\libnfc-1.6.0-rc1\libnfc\nfc-emulation.c"
"C:\Program Files (x86)\CMake 2.8\bin\cmake.exe" -E cmake_progress_report "D:\libNFC\libnfc-build 1\CMakeFiles" 4
[ 13%] Building C object libnfc/CMakeFiles/nfc.dir/nfc-internal.c.obj
cd /d D:\SOFTWA~1\nfc\libnfc.org\LIBNFC~2\libnfc && c:\MinGW64\bin\gcc.exe  -DDRIVER_ACR122_ENABLED -DDRIVER_ARYGON_ENABLED -DDRIVER_PN53X_USB_ENABLED -DHAVE_CONFIG_H -Dnfc_EXPORTS -Du_int16_t=uint16_t -Du_int8_t=uint8_t @CMakeFiles/nfc.dir/includes_C.rsp   -Wall -pedantic -std=c99 -m32 -o CMakeFiles\nfc.dir\nfc-internal.c.obj   -c "D:\libNFC\libnfc-1.6.0-rc1\libnfc\nfc-internal.c"
"C:\Program Files (x86)\CMake 2.8\bin\cmake.exe" -E cmake_progress_report "D:\libNFC\libnfc-build 1\CMakeFiles" 5
[ 16%] Building C object libnfc/CMakeFiles/nfc.dir/iso14443-subr.c.obj
cd /d D:\SOFTWA~1\nfc\libnfc.org\LIBNFC~2\libnfc && c:\MinGW64\bin\gcc.exe  -DDRIVER_ACR122_ENABLED -DDRIVER_ARYGON_ENABLED -DDRIVER_PN53X_USB_ENABLED -DHAVE_CONFIG_H -Dnfc_EXPORTS -Du_int16_t=uint16_t -Du_int8_t=uint8_t @CMakeFiles/nfc.dir/includes_C.rsp   -Wall -pedantic -std=c99 -m32 -o CMakeFiles\nfc.dir\iso14443-subr.c.obj   -c "D:\libNFC\libnfc-1.6.0-rc1\libnfc\iso14443-subr.c"
"C:\Program Files (x86)\CMake 2.8\bin\cmake.exe" -E cmake_progress_report "D:\libNFC\libnfc-build 1\CMakeFiles" 6
[ 20%] Building C object libnfc/CMakeFiles/nfc.dir/mirror-subr.c.obj
cd /d D:\SOFTWA~1\nfc\libnfc.org\LIBNFC~2\libnfc && c:\MinGW64\bin\gcc.exe  -DDRIVER_ACR122_ENABLED -DDRIVER_ARYGON_ENABLED -DDRIVER_PN53X_USB_ENABLED -DHAVE_CONFIG_H -Dnfc_EXPORTS -Du_int16_t=uint16_t -Du_int8_t=uint8_t @CMakeFiles/nfc.dir/includes_C.rsp   -Wall -pedantic -std=c99 -m32 -o CMakeFiles\nfc.dir\mirror-subr.c.obj   -c "D:\libNFC\libnfc-1.6.0-rc1\libnfc\mirror-subr.c"
"C:\Program Files (x86)\CMake 2.8\bin\cmake.exe" -E cmake_progress_report "D:\libNFC\libnfc-build 1\CMakeFiles" 7
[ 23%] Building C object libnfc/CMakeFiles/nfc.dir/drivers/acr122.c.obj
cd /d D:\SOFTWA~1\nfc\libnfc.org\LIBNFC~2\libnfc && c:\MinGW64\bin\gcc.exe  -DDRIVER_ACR122_ENABLED -DDRIVER_ARYGON_ENABLED -DDRIVER_PN53X_USB_ENABLED -DHAVE_CONFIG_H -Dnfc_EXPORTS -Du_int16_t=uint16_t -Du_int8_t=uint8_t @CMakeFiles/nfc.dir/includes_C.rsp   -Wall -pedantic -std=c99 -m32 -o CMakeFiles\nfc.dir\drivers\acr122.c.obj   -c "D:\libNFC\libnfc-1.6.0-rc1\libnfc\drivers\acr122.c"
"C:\Program Files (x86)\CMake 2.8\bin\cmake.exe" -E cmake_progress_report "D:\libNFC\libnfc-build 1\CMakeFiles" 8
[ 26%] Building C object libnfc/CMakeFiles/nfc.dir/drivers/pn53x_usb.c.obj
cd /d D:\SOFTWA~1\nfc\libnfc.org\LIBNFC~2\libnfc && c:\MinGW64\bin\gcc.exe  -DDRIVER_ACR122_ENABLED -DDRIVER_ARYGON_ENABLED -DDRIVER_PN53X_USB_ENABLED -DHAVE_CONFIG_H -Dnfc_EXPORTS -Du_int16_t=uint16_t -Du_int8_t=uint8_t @CMakeFiles/nfc.dir/includes_C.rsp   -Wall -pedantic -std=c99 -m32 -o CMakeFiles\nfc.dir\drivers\pn53x_usb.c.obj   -c "D:\libNFC\libnfc-1.6.0-rc1\libnfc\drivers\pn53x_usb.c"
"C:\Program Files (x86)\CMake 2.8\bin\cmake.exe" -E cmake_progress_report "D:\libNFC\libnfc-build 1\CMakeFiles" 9
[ 30%] Building C object libnfc/CMakeFiles/nfc.dir/drivers/arygon.c.obj
cd /d D:\SOFTWA~1\nfc\libnfc.org\LIBNFC~2\libnfc && c:\MinGW64\bin\gcc.exe  -DDRIVER_ACR122_ENABLED -DDRIVER_ARYGON_ENABLED -DDRIVER_PN53X_USB_ENABLED -DHAVE_CONFIG_H -Dnfc_EXPORTS -Du_int16_t=uint16_t -Du_int8_t=uint8_t @CMakeFiles/nfc.dir/includes_C.rsp   -Wall -pedantic -std=c99 -m32 -o CMakeFiles\nfc.dir\drivers\arygon.c.obj   -c "D:\libNFC\libnfc-1.6.0-rc1\libnfc\drivers\arygon.c"
"C:\Program Files (x86)\CMake 2.8\bin\cmake.exe" -E cmake_progress_report "D:\libNFC\libnfc-build 1\CMakeFiles" 10
[ 33%] Building C object libnfc/CMakeFiles/nfc.dir/buses/uart.c.obj
cd /d D:\SOFTWA~1\nfc\libnfc.org\LIBNFC~2\libnfc && c:\MinGW64\bin\gcc.exe  -DDRIVER_ACR122_ENABLED -DDRIVER_ARYGON_ENABLED -DDRIVER_PN53X_USB_ENABLED -DHAVE_CONFIG_H -Dnfc_EXPORTS -Du_int16_t=uint16_t -Du_int8_t=uint8_t @CMakeFiles/nfc.dir/includes_C.rsp   -Wall -pedantic -std=c99 -m32 -o CMakeFiles\nfc.dir\buses\uart.c.obj   -c "D:\libNFC\libnfc-1.6.0-rc1\libnfc\buses\uart.c"
In file included from D:\libNFC\libnfc-1.6.0-rc1\libnfc\buses\uart.c:41:0:
D:\libNFC\libnfc-1.6.0-rc1\libnfc\buses\uart_win32.c: In function 'uart_receive':
D:\libNFC\libnfc-1.6.0-rc1\libnfc\buses\uart_win32.c:159:87: warning: ISO C99 requires rest arguments to be used [enabled by default]
D:\libNFC\libnfc-1.6.0-rc1\libnfc\buses\uart_win32.c:168:58: warning: ISO C99 requires rest arguments to be used [enabled by default]
In file included from D:/Software development/nfc/libnfc.org/libnfc-1.6.0-rc1/contrib/windows.h:31:0,
                 from D:/Software development/nfc/libnfc.org/libnfc-1.6.0-rc1/config.h:1,
                 from D:\libNFC\libnfc-1.6.0-rc1\libnfc\buses\uart.c:27:
D:/Software development/nfc/libnfc.org/libnfc-1.6.0-rc1/contrib/win32/err.h:17:13: warning: unused variable 'errx' [-Wunused-variable]
In file included from D:\libNFC\libnfc-1.6.0-rc1\libnfc\buses\uart.c:41:0:
D:\libNFC\libnfc-1.6.0-rc1\libnfc\buses\uart_win32.c: In function 'uart_send':
D:\libNFC\libnfc-1.6.0-rc1\libnfc\buses\uart_win32.c:209:87: warning: ISO C99 requires rest arguments to be used [enabled by default]
"C:\Program Files (x86)\CMake 2.8\bin\cmake.exe" -E cmake_progress_report "D:\libNFC\libnfc-build 1\CMakeFiles" 11
[ 36%] Building C object libnfc/CMakeFiles/nfc.dir/chips/pn53x.c.obj
cd /d D:\SOFTWA~1\nfc\libnfc.org\LIBNFC~2\libnfc && c:\MinGW64\bin\gcc.exe  -DDRIVER_ACR122_ENABLED -DDRIVER_ARYGON_ENABLED -DDRIVER_PN53X_USB_ENABLED -DHAVE_CONFIG_H -Dnfc_EXPORTS -Du_int16_t=uint16_t -Du_int8_t=uint8_t @CMakeFiles/nfc.dir/includes_C.rsp   -Wall -pedantic -std=c99 -m32 -o CMakeFiles\nfc.dir\chips\pn53x.c.obj   -c "D:\libNFC\libnfc-1.6.0-rc1\libnfc\chips\pn53x.c"
Linking C shared library libnfc.dll
cd /d D:\SOFTWA~1\nfc\libnfc.org\LIBNFC~2\libnfc && "C:\Program Files (x86)\CMake 2.8\bin\cmake.exe" -E cmake_link_script CMakeFiles\nfc.dir\link.txt --verbose=1
"C:\Program Files (x86)\CMake 2.8\bin\cmake.exe" -E remove -f CMakeFiles\nfc.dir/objects.a
c:\MinGW64\bin\ar.exe cr CMakeFiles\nfc.dir/objects.a @CMakeFiles\nfc.dir\objects1.rsp
c:\MinGW64\bin\gcc.exe   -m32 -shared -o libnfc.dll -Wl,--out-implib,libnfc.dll.a -Wl,--major-image-version,0,--minor-image-version,0 -Wl,--whole-archive CMakeFiles\nfc.dir/objects.a -Wl,--no-whole-archive c:\MinGW64\x86_64-w64-mingw32\lib32\libwinscard.a "D:\Software development\usb\libusb\libusb-win32-bin-1.2.6.0\lib\msvc_x64\libusb.lib" -lwsock32 -lkernel32 -luser32 -lgdi32 -lwinspool -lshell32 -lole32 -loleaut32 -luuid -lcomdlg32 -ladvapi32
CMakeFiles\nfc.dir/objects.a(pn53x_usb.c.obj):pn53x_usb.c:(.text+0x31): undefined reference to `usb_bulk_read'
CMakeFiles\nfc.dir/objects.a(pn53x_usb.c.obj):pn53x_usb.c:(.text+0x72): undefined reference to `usb_bulk_write'
:::
CMakeFiles\nfc.dir/objects.a(pn53x_usb.c.obj):pn53x_usb.c:(.text+0x9f2): undefined reference to `usb_close'
c:/mingw64/bin/../lib/gcc/x86_64-w64-mingw32/4.7.1/../../../../x86_64-w64-mingw32/bin/ld.exe: CMakeFiles\nfc.dir/objects.a(pn53x_usb.c.obj): bad relocaddress 0x4c in section `.rdata'
collect2.exe: error: ld returned 1 exit status
mingw32-make[2]: *** [libnfc/libnfc.dll] Error 1
mingw32-make[2]: Leaving directory `D:/Software development/nfc/libnfc.org/libnfc-build 1'
mingw32-make[1]: *** [libnfc/CMakeFiles/nfc.dir/all] Error 2
mingw32-make[1]: Leaving directory `D:/Software development/nfc/libnfc.org/libnfc-build 1'
mingw32-make: *** [all] Error 2 
```

可能是什么问题呢？任何人都可以提供帮助。我是 NFC 开发的新手，您的及时帮助将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T13:07:05.473

而不是`..\msvc_x64\libusb.lib`，尝试`..\msvc\libusb.lib`在您的 cmake-gui 配置期间使用然后生成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-03T16:17:40.013

这是我在 Windows 上运行 acr122 和 libnfc 的解决方案：

[https://huseyincakir.wordpress.com/2014/12/02/libnfc-with-acr122-on-windows-8-1/](https://huseyincakir.wordpress.com/2014/12/02/libnfc-with-acr122-on-windows-8-1/)

# ant - Ant：如何（以编程方式）检查 schemavalidate 是否成功

> ID：14586129
> 
> 赞同：1
> 
> 时间：2013-01-29T15:15:35.367
> 
> 标签：ant, xsd-validation, ant-contrib

我想知道是否可以检查/捕获“schemavalidate”/“xmlvalidate”操作的结果？

这个想法是解析文件夹中的文件，尝试针对 XSD 验证每个文件并在属性中获取操作状态（最终，在日志文件中输出状态和操作结果）。

然后可以检查验证的状态，以了解是否应该对那个特定的 XML 文件执行一些其他任务。

例如：

```
<target name="convert-user-folder">
    <echo>${user.folder}</echo>

    <!-- Iterate all XML files in the folder -->
    <foreach target="validate-xml-file" param="user.input.xml">
      <path>
        <fileset dir="${user.folder}">
          <include name="*.xml" />
        </fileset>
      </path>
    </foreach>
</target>       

<target name="validate-xml-file">
   <echo message="Validating ${user.input.xml}"/>

   <!-- Checking if XML is well formed -->
   <echo message="Checking if ${user.input.xml} is well formed"/>
   <xmlvalidate file="${user.input.xml}" failonerror="false" lenient="true"/>

   <!-- HOW WE COULD CHECK THE RESULT OF THE VALIDATION OPERATIONS 
        WITHOUT EXITING ?-->

   <!-- Checking if file validates against XSD -->
   <echo message="Checking if ${user.input.xml} validates against schema"/>
   <schemavalidate noNamespaceFile="${xsds.dir}/userInput.xsd" 
        file="${user.input.xml}" failonerror="false"/>

   <!-- HOW WE COULD CHECK THE RESULT OF THE VALIDATION OPERATIONS 
        WITHOUT EXITING? -->

   <!-- HERE WE SHOULD GET IN A PROPERTY THE STATUS OF THE OPERATION AND WRITE 
        IN A FILE SOMETHING LIKE : "OPERATION STATUS: SUCCESS/FAILURE: The reason 
        was: something from the schemavalidate output" -->

    <!-- IF THE OPERATION WAS SUCCESSFUL WE SHOULD CALL SOME TASKS OTHERWISE 
         CALL OTHER TASKS -->
 </target> 
```

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T08:56:18.670

我实际上需要的是来自 antcontrib 的[trycatch](http://ant-contrib.sourceforge.net/tasks/tasks/trycatch.html)。这解决了我的问题，如下面的片段所示。

```
<target name="validate-xml-file">
<echo message="Validating ${user.input.xml}"/>

<!-- Checking if XML is well formed -->
<echo message="Checking if ${user.input.xml} is well formed"/>
<trycatch property="xml.well.formed.result">
  <try>
      <xmlvalidate file="${user.input.xml}" failonerror="true" lenient="true"/>
  </try>
  <catch/>
  <finally/>
</trycatch>

<!-- Checking if file validates against XSD -->
<echo message="Checking if ${user.input.xml} validates against schema"/>
<trycatch property="schema.validation.result">
  <try>
     <schemavalidate noNamespaceFile="${xsds.dir}/userInput.xsd"              
          file="${user.input.xml}" failonerror="true"/>
  </try>
  <catch/>
  <finally/>
</trycatch>

<!-- Create two properties for the results of the validation -->
<condition property="xml.well.formed.result.set" else="false">
      <isset property="xml.well.formed.result"/>
</condition>
<condition property="schema.validation.result.set" else="false">
      <isset property="schema.validation.result"/>
</condition>
    <!-- Here we can write into a HTML format the result of the operation according 
         to the xml.well.formed.result, schema.validation.result a.s.o.) -->

<!-- Also, perform something according to the validation or not of the XML -->
<if>
    <or>
        <equals arg1="${xml.well.formed.result.set}" arg2="true"/>
        <equals arg1="${schema.validation.result.set}" arg2="true"/>
    </or>
    <then>
        <!-- Here we call some task -->
    </then>
    <else>
        <!-- Here we call some other task or just fail to fw the failure -->
    </else>
</if> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:17:25.257

为什么不通过使用文件集来简化解决方案（而不是使用第 3 方[ant-contrib](http://ant-contrib.sourceforge.net/) “foreach” 任务）。

```
<xmlvalidate failonerror="false" ..>
   <fileset dir="${user.folder}" includes="*.xml"/>
</xmlvalidate>

<schemavalidate failonerror="false" ..>
   <fileset dir="${user.folder}" includes="*.xml"/>
</schemavalidate> 
```

我刚刚测试了一个类似的解决方案，并收到以下消息，告诉我文件和行抛出验证问题：

```
[schemavalidate] /path/to/file/file.xml:119:18: cvc-complex-type.2.4.a: Invalid content was found starting with element 'helloworld'. One of '???' is expected. 
```

# java - Java中的LCM（最小公倍数）

> ID：14586131
> 
> 赞同：0
> 
> 时间：2013-01-29T15:15:38.873
> 
> 标签：java

我需要这个循环的帮助。我的课程任务之一是制作 LCM 程序。

```
Sample output:
(8,12) LCM is 24
(4,3) LCM is 12
(5,10,20) LCM is 20
(18,24,52) LCM is 936
(12,10,26) LCM is 780
(99,63,24) LCM is 5544
(62,16,24) LCM is 1488 
```

到目前为止，我有 2 个数字，但我不确定如何做 3 个数字。我们应该在其他类上使用方法，所以这就是我为 LCM 类所拥有的。

```
public class LCM {
    private int n, x, s = 1, t = 1;

    public LCM()
    {
        n = 0;
        x = 0;
        s = 1;
        t = 1;
    }
    public int lcmFind(int i, int y) {
        for (n = 1;; n++) {
            s = i * n;
            for (x = 1; t < s; x++) {
                t = y * x;
            }
            if (s == t)
                break;
        }
        return (s);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:20:20.023

如果您想获得 3+ 号码的 LCM，您可以通过`lcmFind`以下方式使用您的方法：

```
int a = 2;
int b = 3;
int c = 5;
LCM l = new LCM();
int lcm = l.lcmFind(l.lcmFind(a, b), c); 
```

建议：

*   使`n`、`x`和变量局部`s`化。因为您仅在方法中需要它们，并且您需要在每次调用.`t``lcmFind``lcmFind``lcmFind`
*   使您的`lcmFind`方法静态。您无需实例化新对象即可计算 lcm。这样您就可以像使用它一样使用它`LCM.lcmFind(3,4)`，或者甚至更好地使用 rename 方法并使用类似`LCM.find(3,4)`.

**编辑**
如果您需要制作采用可变数量参数的方法，您应该检查[varargs](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)。所以你会得到类似的东西：

```
public int lcmFind(int.. args) {
    // args is actually array of ints.
    // calculate lcm of all values in array.
    // usage: lcmFind(1,4) or lcmFind(1,5,6,3)
} 
```

您可以使用`lcmFind`带有 2 个参数的第一个版本并使用它计算许多值的 lcm。

**编辑 2**
如果您只需要 2 和 3-args 版本，`lcmFind`则可以添加 3-arg 版本：

```
public int lcmFind(int a, int b, int c) {
    return lcmFind(lcmFind(a, b), c); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-20T14:54:16.067

我找到了这个[链接](http://javarevisited.blogspot.in/2016/07/how-to-calculate-gcf-and-lcm-of-two-numbers-in-java-example.html)，我想这是最简单和干净的解决方案：

```
/**
* Calculate Lowest Common Multiplier
*/
public static int LCM(int a, int b) {
    return (a * b) / GCF(a, b);
}

/**
* Calculate Greatest Common Factor
*/
public static int GCF(int a, int b) {
    if (b == 0) {
        return a;
    } else {
        return (GCF(b, a % b));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T15:31:29.953

尝试

```
public int lcm(int... a) {
    for (int m = 1;; m++) {
        int n = a.length;
        for (int i : a) {
            if (m % i != 0) {
                break;
            }
            if (--n == 0) {
                return m;
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-11-30T00:11:13.940

```
public static int gcd(int a, int b){
    return (b == 0) ? a : gcd(b, a % b);
}

public static int gcd(int... args){
    int r = args[0];
    int i = 0;
    while(i < args.length - 1)
        r = gcd(r,args[++i]);
    return r;
}

public static int lcm(int a, int b){
    return a * b / gcd(a,b);
}

public static int lcm(int... args){
    int r = args[0];
    int i = 0;
    while(i < args.length - 1)
        r = lcm(r,args[++i]);
    return r;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-21T13:27:03.660

```
static int  getLCM(int a,int b)
{
    int x;
    int y;
    if(a<b)
    {
        x=a;
         y=b;   
    }
    else
    {
         x=b;
         y=a;   
    }
    int i=1;
    while(true)
    {

        int x1=x*i;
        int y1=y*i;
        for(int j=1;j<=i;j++)
        {
        if(x1==y*j)
        {
            return x1;
        }
        }

        i++;
    }

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-03T17:20:10.430

我想你已经有了答案，因为它是一个旧帖子。仍然发布我的答案。下面是查找数组的 LCM 的代码：

```
 import java.util.Arrays;
 import java.util.Scanner;

public class ArrayEqualAmz {
    static int lcm =1;
    public static void main(String[] args) {
    Scanner sc = new Scanner(System.in);
    int n = sc.nextInt();
    int [] arr = new int[n];

    for(int i=0; i<n; i++){
        arr[i] = sc.nextInt();
    }
    System.out.println("lcm = "+lcm(arr));

    }

    // find the factor
    public static int divisor(int x[]){
        Arrays.sort(x);
        int num=0;
        for(int i=x.length-1; i>=0; i--){
            if(x[i] != 1 )
            num=x[i];
        }
        for(int j=2; j<=num; j++){
            if(num%j==0){
            return j;}
        }
        return num;
    }

    //finding the lcm
    public static int lcm(int arr[]){
        while(true){

        int j = divisor(arr);
        if(j==0){break;}
        lcm = lcm*j;
        for(int i=0; i<arr.length; i++){
            if(arr[i]%j==0){
            arr[i] = arr[i]/j;}
        System.out.print(arr[i]+",");
        }
        System.out.println( " factor= "+lcm);
        return lcm(arr);
        }
        return lcm;
    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-05-29T05:22:16.890

尝试这个

```
 int n1 = 72, n2 = 120, lcm;

    // maximum number between n1 and n2 is stored in lcm
    lcm = (n1 > n2) ? n1 : n2;

    // Always true
    while(true)
    {
        if( lcm % n1 == 0 && lcm % n2 == 0 )
        {
            System.out.printf("The LCM of %d and %d is %d.", n1, n2, lcm);
            break;
        }
        ++lcm;
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-17T08:24:45.040

您可以重复使用为两个数字的 lcm 编写的相同函数。只需传递以下参数之一：

功能代码可以是这样的：

```
public static int lcm(int num1,int num2) {
        boolean flag = false;
        int lcm = 0;
        for(int i= 1;!flag; i++){
           flag = (num1 < num2)?(num2*i)%num1==0:(num1*i)%num2==0;
           lcm = num1<num2?num2*i:num1*i;
        }
        return lcm;
    } 
```

像这样调用函数：

```
 public static void main(String[] args) {
        System.out.println("lcm "+lcm(lcm(20,80),40));
    } 
```

# mfc - 每次显示前如何更新 ToolTip 文本？

> ID：14586137
> 
> 赞同：5
> 
> 时间：2013-01-29T15:16:19.327
> 
> 标签：mfc, dialog, runtime, tooltip

**每次（即将）显示工具提示时，如何使工具提示文本自我更新？**

我有一个*`CDialog`*派生对话框，它*`CToolTipCtrl`*以通常的方式使用工具提示，它工作得很好：

*   *`CToolTipCtrl`**`CDialog`*我班级 的成员变量。
*   创建工具提示并添加到工具中*`CDialog::OnInitDialog`*
*   消息转发到*`CToolTipCtrl`*in*`CDialog::PreTranslateMessage`*

我也知道如何在代码的各个地方使用*`CToolTipCtrl::UpdateTipText`*和更新工具提示文本*`CToolTipCtrl::Update`*

但是，我想要并且尚未完成的是： **我希望在显示相应的工具提示之前每次鼠标悬停在工具上时更新工具提示**的文本，即显示的文本取决于工具提示时的情况- 显示文本。

到目前为止我的工作代码（截断到相关行）：

```
class CmyDialog : public CDialog
{
  virtual BOOL OnInitDialog();
  virtual BOOL PreTranslateMessage(MSG* pMsg);
  virtual void RefreshToolTipText();        // Want to call this prior each display

  CToolTipCtrl m_toolTip;
}

BOOL CmyDialog::OnInitDialog()
{
  CDialog::OnInitDialog();
  m_toolTip.Create(this);
  m_toolTip.AddTool( GetDlgItem(IDC_SOMECONTROLID), "Sometext" );
  m_toolTip.Activate( TRUE );
}

BOOL CmyDialog::PreTranslateMessage(MSG* pMsg)
{
  if(IsWindow(m_toolTip.m_hWnd)) 
     m_toolTip.RelayEvent(pMsg); 
}

void CmyDialog::RefreshToolTipText()
{
  m_toolTip.UpdateTipText( "updated runtime text",  GetDlgItem(IDC_SOMECONTROLID) );
  m_toolTip.Update();   
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T22:28:04.997

调用时`CToolTipCtrl::AddTool`使用“特殊”值`LPSTR_TEXTCALLBACK`作为工具提示的文本。这将导致工具提示向您要为其添加工具提示的窗口的*父*`TTN_NEEDTEXT`级发布通知。然后，父母可以相应地设置文本。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T07:35:53.440

我似乎已经自己弄清楚了。由于我在网上找不到解决方案，所以我将在此处发布以供参考。如果有任何评论，我仍然会很感激。

我在*CmyDialog*类的消息映射中添加了以下行：

```
BEGIN_MESSAGE_MAP(CmyDialog, CDialog)
   ON_NOTIFY( TTN_SHOW, 0, OnToolTipTextAboutToShow )   
END_MESSAGE_MAP() 
```

我在 CmyDialog 中添加了以下成员函数：

```
void CmyDialog::OnToolTipTextAboutToShow(NMHDR * pNotifyStruct, LRESULT* result)
{
   if ( pNotifyStruct->hwndFrom == m_toolTip.m_hWnd )
       RefreshToolTipText();
} 
```

显然，每次将要显示工具提示时，都会通过 WM_NOTIFY 发送 TTN_SHOW 通知代码。我的函数中的 if-check 检查工具提示是否来自特定的 CToolTipCtrl。*

# xml - 针对 XSD 的 XML 验证：schemaLocation 值必须具有偶数个 URI

> ID：14586139
> 
> 赞同：0
> 
> 时间：2013-01-29T15:16:23.723
> 
> 标签：xml, validation, xsd, xsd-validation

我有一个**blog.xml**和一个**Blog.xsd**来验证 XML 文件。我正在使用[http://www.xmlvalidation.com/?L=0](http://www.xmlvalidation.com/?L=0)来验证这两个文件，但出现错误。

你能告诉我有什么问题吗？

**错误：** ![在此处输入图像描述](../Images/2452c8bae77acd6206fa1e61e2c18c4e.png)

**博客.xml：**

[http://pastebin.com/He3xCxxC](http://pastebin.com/He3xCxxC)（抱歉不得不将它发布到pastebin（由于SO的字数限制）

**博客.xsd：**

```
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="blog">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="post" maxOccurs="unbounded" minOccurs="0">
          <xs:complexType>
            <xs:sequence>
              <xs:element type="xs:string" name="ptitle"/>
              <xs:element type="xs:string" name="psubtitle"/>
              <xs:element type="xs:anyURI" name="image"/>
              <xs:element type="xs:string" name="author"/>
              <xs:element type="xs:string" name="date"/>
              <xs:element type="xs:string" name="par"/>
              <xs:element type="xs:anyURI" name="source"/>
              <xs:element type="xs:string" name="comments"/>
            </xs:sequence>
            <xs:attribute type="xs:byte" name="id" use="optional"/>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:18:01.760

您尚未设置模式的`targetNamespace`（即“ [http://www.w3schools.com](http://www.w3schools.com) ”）。

```
<xs:schema attributeFormDefault="unqualified" targetNamespace="http://www.w3schools.com" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema"> 
```

并且`schemalocation`必须指定命名空间和架构。这就是为什么你必须有偶数个元素`schemaLocation`。

```
<a:blog xmlns:a="http://www.w3schools.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.w3schools.com ./Blog.xsd"> 
```

# html - 小容器中的自动绝对块宽度

> ID：14586140
> 
> 赞同：-1
> 
> 时间：2013-01-29T15:16:24.503
> 
> 标签：html, css

然后我在我的绝对块内部 div 中添加一些文本，它不会扩展。

我知道扩展禁止父容器宽度：`<div class="main_wrap"></div>`。

但我无法从他身上删除它。所以我想找到一个解决方案，如何在没有 js 的情况下纠正它。我怎样才能做到这一点？它必须在宽度上扩展，而不是在高度上，谈论这个元素：`<div class="abs">`。如果您从`.main_wrap`正确的视图中删除宽度，但我需要在不删除宽度的情况下达到这样的结果，因为它只是巨大网格的一小部分。

HTML：

```
<div class="block">
  <div class="abs">
      <table class="whf table">
          <tr>
              <td>
                <div class="image">
                  <div class="shadow"></div>
                  <img src="http://boardingarea.com/blogs/deltapoints/files/2012/07/test.jpg" width="77" />
                </div>
              </td>
              <td class="vamid">
                  <div class="text">
                      Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum  Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum Lorem ipsum
                  </div>
              </td>
          </tr>
      </table>
  </div> 
```

这是完整的示例：

[http://jsbin.com/uqafuq/6/edit](http://jsbin.com/uqafuq/6/edit)

将来谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:23:24.980

我不知道我对你的理解是否正确，你的结构看起来很奇怪，但这是你想要实现的吗？[http://jsbin.com/uqafuq/11/edit](http://jsbin.com/uqafuq/11/edit)

只需`height: 100%`从`.abs`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:24:44.117

只需从根本没有高度的元素父级中删除您`height: 100%`的`.abs`设置高度

添加`display: inline-block;`到`.block`

# php - 如何使用 PHP 将 ANSI 扩展 ASCII (Windows) 转换为 UTF-8 或 html 实体？

> ID：14586141
> 
> 赞同：0
> 
> 时间：2013-01-29T15:16:28.957
> 
> 标签：php, str-replace, ansi

> **可能重复：**
> [PHP Ansi 到 UTF-8](https://stackoverflow.com/questions/6481092/php-ansi-to-utf-8)

我的数据偶尔包含各种 ANSI Windows ASCII 字符（即 x99 代表 TM，xA9 代表版权，xAE 代表注册商标等）。这些字符无法在网页中正确显示。

PHP中有一个函数可以让我自动正确转换它们吗？或者，我是否必须有大量的 str_replace() 调用分别进行每个替换？如果我必须使用 str_replace()，匹配 ANSI 代码的正确方法是什么？我在想类似的事情：

```
$str = str_replace('/\x99','&trade;',$str); // trademark symbol 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:20:39.727

看看 htmlentities

[http://php.net/manual/en/function.htmlentities.php](http://php.net/manual/en/function.htmlentities.php)

它转换`<`为`&lt;`,等...`ö``&ouml;`

# asp.net-mvc-4 - 将 .Where(expression) 上的数据丢失到 list()

> ID：14586142
> 
> 赞同：1
> 
> 时间：2013-01-29T15:16:30.017
> 
> 标签：asp.net-mvc-4, entity-framework-5

```
Func<View_Album_Search, bool> expressionAlbum = Al => Al.name.Contains(text) || Al.soundName.Contains(text) || Al.artist.Contains(text);

var query = view_Album_SearchRepository.Where(expressionAlbum); 

var b = query.Count(); (*Count = 1440*)
                        (*Lose data *)
var a = query.ToList(); (*Count = 154*)

           /***************************************************\

 public IEnumerable<TEntity> Where(Func<TEntity, bool> predicate)
    {
        return _context.Set<TEntity>().Where(predicate);
    } 
```

模型

```
 public partial class View_Album_Search
{
    public string name { get; set; }
    public decimal id_album { get; set; }
    public string soundName { get; set; }
    public string artist { get; set; }
    public byte feature { get; set; }
    public Nullable<System.DateTime> album_date { get; set; }
    public Nullable<decimal> hits { get; set; }
    public string artist_twitter { get; set; }
    public Nullable<int> feature_order { get; set; }
    public string video_url { get; set; }
} 
```

我不明白，如果我这样做，一切正常。 *附加信息* 在调试模式下，当他执行 .toList() 时，他再次执行 exrpessionAlbum

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T16:11:37.073

```
Func<View_Album_Search, bool> expressionAlbum = Al => Al.name.ToLower().Contains(text.ToLower()) || Al.artist.ToLower().Contains(text.ToLower()); 
```

# java - 以编程方式读取 android:scheme 的值

> ID：14586146
> 
> 赞同：6
> 
> 时间：2013-01-29T15:16:38.643
> 
> 标签：java, android, manifest

我想知道是否可以以编程方式从 Android 清单文件（下面的示例）中读取 android:scheme 的值。

```
<intent-filter>
    <action android:name="android.intent.action.VIEW" />
    <category android:name="android.intent.category.DEFAULT" />
    <category android:name="android.intent.category.BROWSABLE" />
    <data android:scheme="zxtest" />
</intent-filter> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-04T10:18:53.767

您应该能够从以下位置获取此信息`PackageManager`：

```
PackageManager pm = getPackageManager();
ActivityInfo activityInfo = pm.getActivityInfo(component,
        PackageManager.GET_INTENT_FILTERS); 
```

**然而不幸的是，你不能:-(这个调用应该返回意图过滤器（根据文档），但似乎Android开发人员还没有开始实际实现它:-(**

请参阅[无法从包中获取意图过滤器](http://stackoverflow.com/questions/18739243/unable-to-get-intent-filters-from-a-package)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:09:29.323

我假设您的意思是已经调用了意图并且您正试图从您的活动代码中找到该方案？

在您的活动的 onCreate 方法中，您可以执行以下操作：

```
Intent intent = getIntent();
Uri data = intent.getData();
String scheme = data.getScheme(); // "zxtest" 
```

# actionscript-3 - AS3：如何使用图像作为颜色？

> ID：14586148
> 
> 赞同：-1
> 
> 时间：2013-01-29T15:16:49.683
> 
> 标签：actionscript-3

在 Flash 中的“填充和描边”选项下，您可以将形状着色为库中的纹理之一。示例：http: [//i1.minus.com/iban9aRUCI7UTf.png](http://i1.minus.com/iban9aRUCI7UTf.png)

如何使用 AS3 代码执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:45:48.923

如果您使用`Graphics`API 绘图，则可以使用[beginBitmapFill](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Graphics.html#beginBitmapFill%28%29)。

打开库中图像的属性，然后选中 ActionScript 选项卡上的“ *Export for ActionScript* ”。给它一个类名，例如“ *MyTexture* ”，然后你可以像这样使用它：

```
var texturedCircle:Sprite = new Sprite();
texturedCircle.graphics.beginBitmapFill(new MyTexture());
texturedCircle.graphics.drawCircle(0, 0, 100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:44:07.203

您可以分两步解决此问题。

1.  根据位图值计算平均颜色。下面的函数（由[Soulwire](http://blog.soulwire.co.uk/code/actionscript-3/extract-average-colours-from-bitmapdata)编写）通过循环遍历 BitmapData 对象中的像素，将所有红色、绿色和蓝色值相加，将它们除以像素总数，然后从结果中创建新颜色来执行此操作。”

 `````
function averageColour(source:BitmapData):uint {
    var red:Number = 0;
    var green:Number = 0;
    var blue:Number = 0;
    var count:Number = 0;
    var pixel:Number;

    for (var x:int = 0; x < source.width; x++) {
        for (var y:int = 0; y < source.height; y++) {
            pixel = source.getPixel(x, y);

            red += pixel >> 16 & 0xFF;
            green += pixel >> 8 & 0xFF;
            blue += pixel & 0xFF;

            count++
        }
    }

    red /= count;
    green /= count;
    blue /= count;

    return red << 16 | green << 8 | blue;
} 
````  `1.  使用[ColorTransform](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/ColorTransform.html#ColorTransform%28%29)来应用它。

 `````
function setColor(obj:Object, color:uint, alpha:Number = 1):void {
    /* Colors the object using uint */

    // Pull the individual primaries
    var r:Number = (color >> 16 ) & 0xFF;
    var g:Number = (color >> 8) & 0xFF;
    var b:Number = color & 0xFF;

    obj.transform.colorTransform = new ColorTransform(0,0,0,alpha,r,g,b,0);
} 
```````

# c++ - 查找系统的行终止符

> ID：14586154
> 
> 赞同：5
> 
> 时间：2013-01-29T15:17:20.007
> 
> 标签：c++, c, header, newline

是否有一个头文件存储系统的行终止字符/s（以便没有任何`#ifdef`s 它将在所有平台、MAC、Windows、Linux 等上工作）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T15:21:34.857

您应该以“文本模式”（即“不使用二进制”）打开文件，并且换行始终是`'\n'`，无论本机文件是什么。C 库将在适当的时候将任何表示换行符的本机字符转换为`'\n'`[即读/写文本文件]。请注意，这也意味着您不能依赖“计算读取的字符数并使用它来“返回此位置”。

如果文件是二进制文件，那么换行符无论如何都不是换行符。

除非你打算在真正古老的系统上运行，并且你真的想这样做，否则我会这样做：

```
#ifdef __WINDOWS__    // Or something like that
#define END_LINE    "\r\n"
#else
#define END_LINE    "\n"
#endif 
```

这不适用于 MacOS X 之前的 MacOS，但肯定没有人再使用 MacOS X 之前的硬件了吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T15:19:23.990

不，因为它`\n`无处不在。当您将其写入文本文件时，它会扩展为正确的换行符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T15:28:04.213

看起来标准库中没有任何东西可以获取当前平台的行终止符。

最接近的 API 是

```
char_type  std::basic_ios::widen(char c); 
```

它“将字符 c 转换为当前语言环境中的等效字符”（[cppreference](http://en.cppreference.com/w/cpp/io/basic_ios/widen)）。我在文档中指出了这一点，该文档`std::endl`“将结束符插入输出序列 os 并刷新它，就好像通过调用`os.put(os.widen('\n'))`后跟`os.flush()`”（[cppreference](http://en.cppreference.com/w/cpp/io/manip/endl)）一样。

在 Posix 上，

*   `widen('\n')`返回`'\n'`（作为 a `char`, for`char`基于流）；
*   `endl`插入 a`'\n'`并刷新缓冲区。

在 Windows 上，它们的作用完全相同。实际上

```
#include <iostream>
#include <fstream>
using namespace std;
int main() {
    ofstream f;
    f.open("aaa.txt", ios_base::out | ios_base::binary);
    f << "aaa" << endl << "bbb";
    f.close();
    return 0;
} 
```

将生成一个仅`'\n'`作为行终止符的文件。

正如其他人所建议的那样，当文件以*文本模式*（默认）打开时，`'\n'`将自动转换为`'\r' '\n'`Windows。

（我已经重写了这个答案，因为我错误地假设在 Windows上`std::endl`翻译为）`"\r\n"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T15:56:30.807

Posix 要求它是\n。所以如果定义了_POSIX_VERSION，它就是\n。否则，特殊情况下唯一的非 POSIX 操作系统，windows，你就完成了。

# c# - PHP 服务到 C#

> ID：14586155
> 
> 赞同：0
> 
> 时间：2013-01-29T15:17:26.200
> 
> 标签：c#, php, service

在php中我发布了一个请求

```
$.post("/service.php?cat=c1", {
     group: $this.attr('href'),
}) 
```

其中组-> #$!/mycat/year,2012

现在我想在 c# 中做同样的请求

```
var httpWebRequest = (HttpWebRequest)WebRequest.Create( url);
httpWebRequest.ContentType = "text/json";
httpWebRequest.Method = "POST";

var httpResponse = (HttpWebResponse)httpWebRequest.GetResponse();
using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
{
      result = streamReader.ReadToEnd();
} 
```

我试过

```
String url = domain + "./service.php?cat=c1&group=%22#$!/mycat/year,2012%22"; 
```

和

```
String url = domain + "./service.php?cat=c1&group=mycat&year=2012"; 
```

但是“消息”总是返回空 这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:43:33.957

您可以使用`WebClient`该类，因为它更易于使用。

将值作为`NameValueCollection`对象传递

```
 var client = new WebClient();

var nameValueCollection = HttpUtility.ParseQueryString("cat=c1&group=mycat&year=2012");

var response = client.UploadValues(domain + "/service.php","POST",nameValueCollection);

  var responseStr = Encoding.ASCII.GetString(response); 
```

# caching - DataNucleus - 插件，L2 缓存错误

> ID：14586157
> 
> 赞同：0
> 
> 时间：2013-01-29T15:17:29.483
> 
> 标签：caching, jpa, datanucleus

我的项目基于 GWT(2.4)，我的目标是实现 ReqyestFactory（JPA、Datanucleus、Postgresql）。我遇到的最后一个问题是二级缓存。我想使用 EHcache，但是当我创建 EMF 时出现此错误：

```
Level 2 Cache "ehcache" is registered to use class "org.datanucleus.cache.ehcache.EhcacheLevel2Cache" yet this is not found. Please check your CLASSPATH and plugin specification. 
```

在我的 /war/WEB-INF/lib 我有：

```
datanucleus-api-jpa-3.2.0-m2.jar
datanucleus-cache-3.1.1.jar
datanucleus-core-3.2.0-m2.jar
datanucleus-rdbms-3.2.0-m2.jar
ehcache-core-2.2.0.jar
geronimo-jpa_2.0_spec-1.1.jar
geronimo-jta_1.1_spec-1.1.jar
gwt-servlet-deps.jar
gwt-servlet.jar
hibernate-validator-4.3.1.Final.jar
jboss-logging-3.1.0.GA.jar
jdo-api-3.0.1.jar
log4j-1.2.17.jar
postgresql-9.2-1002.jdbc4.jar
requestfactory-apt.jar
requestfactory-client+src.jar
requestfactory-server+src.jar
validation-api-1.0.0.GA.jar
validation-api-1.0.0.GA-sources.jar 
```

持久性.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
    http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd" version="2.0">

<persistence-unit name="DBStorage">
    <provider>org.datanucleus.api.jpa.PersistenceProviderImpl</provider>
    <class>com.test.domain.Myobj</class>
    <exclude-unlisted-classes/>
    <properties>
        <property name="datanucleus.ConnectionDriverName" value="org.postgresql.Driver" />
        <property name="datanucleus.ConnectionURL" value="jdbc:postgresql://localhost:5432/test" />
        <property name="datanucleus.ConnectionUserName" value="test" />
        <property name="datanucleus.ConnectionPassword" value="123" />
        <property name="datanucleus.autoCreateTables" value="true" />
        <property name="datanucleus.identifier.case" value="LowerCase" />
        <property name="datanucleus.jmxType" value="default" />

        <property name="datanucleus.cache.level2.type" value="ehcache" />
        <property name="datanucleus.cache.level2.cacheName" value="TestEHcache" />
        <!--  property name="datanucleus.cache.level2.configurationFile" value="ehcache.xml" / -->

    </properties>
</persistence-unit> 
```

我错过了什么？我的问题在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:55:04.460

我通过添加解决了这个问题：

```
slf4j-api-1.5.6.jar
slf4j-log4j12-1.5.6.jar 
```

现在效果很好。

# facebook - 语言 og:locale:alternate 基本原理是什么 - 这似乎很重要？

> ID：14586159
> 
> 赞同：8
> 
> 时间：2013-01-29T15:17:39.513
> 
> 标签：facebook, seo, facebook-opengraph, meta-tags

谷歌肯定会使用这些元标签。[我在这里](http://www.google.com/webmasters/tools/richsnippets)测试了一个页面，添加后，该工具获取了数据.....因此 og（开放图）标签对于 Google 搜索非常重要。

因此，我们需要彻底了解它们。但是，访问 ogp.me 并加载他们的[规范页面](http://openwebfoundation.org/legal/the-0-9-agreements---necessary-claims)会产生一个空白页面（我想知道那里发生了什么）？

他们的单一信息网页告诉我们：

```
The following properties are optional for any object and are generally recommended:

og:locale - The locale these tags are marked up in.  
Of the format language_TERRITORY. Default is en_US.   
og:locale:alternate - An array of other locales this page is available in. 
```

他们给我们举了一个例子：

```
<meta property="og:locale" content="en_GB" />  
<meta property="og:locale:alternate" content="fr_FR" />  
<meta property="og:locale:alternate" content="es_ES" /> 
```

网络上的理论是“区域设置”确定文档适用的区域（*在 中可用*），“替代”提供其他文档适用区域。

然而，对于大量网站来说，这似乎是一场等待中的灾难。Bing SEO 上的一个小伙声称，对于“语言环境”，除 en_US 之外的任何内容都会扼杀您的文档分发（全球），但法语、西班牙语、德语、日语等的情况如何。我的网站启用了翻译，其内容真正适用于全球观众。我是否要列出整个语言数组....这样做会冒着被指控“垃圾邮件区域”的风险吗？

我们对这些标签没有深入的解释，但它们似乎太重要了，无法猜测。有没有人了解基础知识，以便我们可以正确编码我们的网站？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:19:55.907

这些标签仅适用于*Facebook*。这对谷歌没有影响。他们有自己的推荐用于处理语言环境和语言。

1.  [http://googlewebmastercentral.blogspot.com/2011/12/new-markup-for-multilingual-content.html](http://googlewebmastercentral.blogspot.com/2011/12/new-markup-for-multilingual-content.html)
2.  [http://googlewebmastercentral.blogspot.com/2010/03/working-with-multi-regional-websites.html](http://googlewebmastercentral.blogspot.com/2010/03/working-with-multi-regional-websites.html)
3.  [http://support.google.com/webmasters/bin/answer.py?hl=en&answer=182192](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=182192)

# asp.net - 我的代码中的逻辑错误

> ID：14586160
> 
> 赞同：1
> 
> 时间：2013-01-29T15:17:40.310
> 
> 标签：asp.net, web-applications

在页面加载下拉列表的默认值时，告诉用户选择可能的值。
是男性还是女性。如果用户没有选择以下任何一个值：男性或女性，则应禁用生成患者编号按钮。
否则，根据选择的值生成患者性别。目前，如果下拉列表为默认值，我仍然可以生成患者编号。
有人帮我找出错误的原因。我更喜欢正确的代码。

```
protected void patient_num_Click(object sender, EventArgs e)
    {
        String gender = drl_gender.Text.ToString();
        string patientNumber = " ";
        RegistrationNumber Register_patient = new RegistrationNumber();
        patient_num.Enabled = false;
        if (gender=="Select Gender")
        {
            patient_num.Enabled = false;

        }
        else if (gender=="Male")
        {
            patient_num.Enabled = true;
            patientNumber = Register_patient.GeneratePatientNumber(Gender.Male).ToString();
            patientNumber = patientNumber.Replace("/", "-");
            txtpatientNum.Text = patientNumber;

        }
        else
        {
            patient_num.Enabled = true;
            patientNumber = Register_patient.GeneratePatientNumber(Gender.Female).ToString();
            patientNumber = patientNumber.Replace("/", "-");
            txtpatientNum.Text = patientNumber;

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:20:44.310

您的代码中的问题是您正在使用 的`Text`属性`DropDownList`来确定用户选择了什么（`SelectedValue`改用）。该`Text`属性返回当前选定项目的文本，**但`""`如果没有**选择项目：

[**MSDN**](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.text.aspx)：

> Text 属性获取和设置与 SelectedValuee 属性相同的值。SelectedValue 属性通常用于确定 ListControl 控件中选定项的值。如果未选择任何项目，**则返回一个空字符串 ("")**。

现在看看你的代码（记住`String.Empty`什么都没有选择）：

```
if (gender=="Select Gender")
{
    patient_num.Enabled = false;
}
....
else
{
    patient_num.Enabled = true;
    // here we are!
    patientNumber = Register_patient.GeneratePatientNumber(Gender.Female).ToString();
    patientNumber = patientNumber.Replace("/", "-");
    txtpatientNum.Text = patientNumber;
} 
```

* * *

解决方案：

使用 a[`RequiredFieldValidator`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.requiredfieldvalidator%28v=vs.80%29.aspx)来确保用户选择了性别。您可以使用该[`InitialValue`](http://msdn.microsoft.com/en-US/library/system.web.ui.webcontrols.requiredfieldvalidator.initialvalue%28v=vs.80%29.aspx)属性告诉它您的`"-- please select --"`项目的价值。

```
 <asp:DropDownList id="DdlGender" runat="server" >
        <asp:ListItem Text="-- please select --" Value="-1"></asp:ListItem>
        <asp:ListItem Text="female" Value="1"></asp:ListItem>
        <asp:ListItem Text="male" Value="2"></asp:ListItem>
    </asp:DropDownList>

  <asp:RequiredFieldValidator id="RequiredGender" 
       InitialValue="-1" 
       ControlToValidate="DdlGender"
       ErrorMessage="Please select gender!"
       runat="server"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:19:48.853

我会切换您的逻辑，以便您明确检查男性，女性，然后再检查。

```
if (gender=="Male")
{
    ...    
}
else if (gender=="Female")
{
    ...
}
else
{
    ...
} 
```

要回答您的实际问题，您的下拉列表的值可能不正确。也许是外壳或杂散的字符空间。你可以尝试类似的东西

```
String gender = drl_gender.Text.Trim().ToLower(); 
```

并检查小写的男性、女性。在线上放一个断点或添加一个手表，看看实际值是多少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T15:23:37.507

您要做的是将按钮`disabled`默认设置为。
然后你应该有一个与 DropDownList 挂钩的事件：

```
protected void DropDownList_IndexChanged(object sender, EventArgs e)
{
  var dd = (DropDownList) sender;
  patient_num.Enabled = dd.SelectedIndex > 0;
} 
```

# windows - 不使用 CALL 或 START 调用批处理脚本

> ID：14586164
> 
> 赞同：1
> 
> 时间：2013-01-29T15:17:47.920
> 
> 标签：windows, batch-file

`CALL`当我从没有or的批处理脚本中调用批处理脚本时，这是什么意思`START`？

例子。我有两个脚本 a.bat 和 b.bat

**一个.bat**：

```
echo I am A >> log
b.bat
echo end of A >> log 
```

**b.bat**：

```
echo I am B >> log
sleep 1
echo end of B >> log 
```

执行 a.bat 后，我​​在**日志**中看到：

```
I am A 
I am B 
end of B 
```

消息“A 结束”在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:22:31.993

永远不会到达消息的结尾，`a.bat`因为当您调用另一个批处理文件时没有`start`或`call`它将控制权转移到该批处理，并且永远不会返回。

如果您希望它返回到调用批处理，您将使用`call`，或者您可以使用`start`但会启动另一个 cmd 实例（除非您使用`/b`开关）。

# ssis - SSIS包SQL 2012网络访问

> ID：14586169
> 
> 赞同：1
> 
> 时间：2013-01-29T15:18:07.770
> 
> 标签：ssis, sql-server-2012

我们有一个执行 .bat 文件的 SSIS 包。

bat 文件执行以下操作：

```
dir \\someserver\done\ > d:\scratch\ssisdir.txt 
```

我们有一个使用 start_execution 启动 SSIS 包的[存储过程](http://thinknook.com/execute-ssis-via-stored-procedure-ssis-2012-2012-08-13/)。

如果我们从 Microsoft SQL Server Management Studio (SSMS) 调用该存储过程，它就可以正常工作。

如果我们使用与 SSMS 相同的凭据从 Web 服务 (C# MVC) 调用存储过程，则 SSIS 报告它无权访问路径（网络文件夹）。

我们已通过 SQL Profiler 确认该网站实际上使用相同的凭据调用存储过程。

此外，我们添加了来自 Web 服务的调用来执行以下操作：

```
xp_cmdshell 'dir \\someserver\done\ > d:\scratch\testfromcmdshell.txt' 
```

这很好用。它是调用 SSIS 的同一连接，但是，SSIS 没有权限。

不确定缺少什么或我们可以检查什么。

谢谢您的帮助。

# python - Python 和 ControlDesk 交互

> ID：14586171
> 
> 赞同：1
> 
> 时间：2013-01-29T15:18:08.903
> 
> 标签：python, matlab, simulink

我希望有人能帮助我们。我们正在使用来自 Simulink/Matlab 和 ControlDesk 的 dSpace 1103。

我想知道的是，是否可以在 ControlDesk 中使用 python 将数据从网络传输到 dSpace？我的意思是，在 python 中编写一个 UDP 侦听器并使用该脚本来更新 Simulink/Matlab 模型中的变量？或者是否有任何其他好机会将数据从程序传输到 ControlDesk，以便将更改发送到 dSpace？

另一个问题是，如果我在 ControlDesk 中更改一个在 dSpace（1-2 毫秒）内完成的变量，通常需要多长时间？这是完全随机的还是或多或少是一个恒定值？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:13:42.313

是的，这很有可能。您应该查看可在 dSPACE 安装目录中找到的“实时测试”文档。

# python - matplotlib 中可以使用 Oreo 彩色文本吗？

> ID：14586173
> 
> 赞同：11
> 
> 时间：2013-01-29T15:18:11.400
> 
> 标签：python, matplotlib

有没有一种简单的方法让文本（特别是轴标签文本）具有白色轮廓颜色，但黑色填充颜色。我的轴标签落在图表的某些部分上，这些部分在某些区域是亮的，而在其他区域是暗的，因此某些标签被遮盖了。

解决此问题的一种简单方法是设置轴标签文本对象的背景颜色。

我发现方形框会分散注意力，如果可能的话，我希望文本本身具有反奥利奥着色。

在用这个进入兔子洞之前，我想我会问是否有人知道一个简单的方法来做到这一点。

谢谢你的任何想法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-03T19:20:44.837

您应该能够使用`PathEffects`, 和`ax.(x/y)axis.label`or`ax.get_(x/y)ticklabels()`来获取`txt`对象。

请参阅此处的示例：http: [//matplotlib.org/examples/pylab_examples/patheffect_demo.html](http://matplotlib.org/examples/pylab_examples/patheffect_demo.html)

# java - 如何在服务中检测/读取 NFC 标签

> ID：14586174
> 
> 赞同：2
> 
> 时间：2013-01-29T15:18:12.877
> 
> 标签：java, android, nfc

如何通过服务在后台读取 NFC 标签？我已经可以在活动中阅读它（我找到了一些源代码，但我并不真正了解它是如何工作的），但我找不到任何关于在服务或可运行中阅读它的信息。

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T14:14:23.090

最后我想出了如何解决它。我必须在 AndroidManifest.xml 中使用这些意图过滤器才能正确运行我的活动。

```
<intent-filter>
    <action android:name="android.nfc.action.TECH_DISCOVERED"/>
    <meta-data android:name="android.nfc.action.TECH_DISCOVERED" />
</intent-filter>

<intent-filter>
    <action android:name="android.nfc.action.TAG_DISCOVERED" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

# r - knitr 生成 pdf 输出文件

> ID：14586177
> 
> 赞同：2
> 
> 时间：2013-01-29T15:18:21.090
> 
> 标签：r, knitr

我希望能够用来`knitr`生成结构化的 PDF 文件。`Sweave`除非输入文件是格式，否则我什么也没看到。这个问题可能太模糊了，但我真的很想知道`knitr`，是否可以在不使用任何`Sweave`或的情况下创建结构化的 PDF 输出文件`LaTeX`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:48:30.600

如果您还没有，请尝试使用命令 knit2pdf。

# python - 在 Flask WTF 的复选框选择表单中使用 python 列表

> ID：14586178
> 
> 赞同：1
> 
> 时间：2013-01-29T15:18:22.720
> 
> 标签：python, python-2.7, flask, flask-wtforms

我想使用 python 列表作为复选框选择表单的选项。因此，您可以在列表中选择您想要的项目并提交表单以使用这些值。

我在表单中使用哪个表单域？

我的 html 文件会是什么样子？

我认为 .html 页面应该是这样的。

```
 <form>
        {% for item in list %}
            <input type="checkbox" name="modList" value={{item}}>{{item}}<br>
        {% endfor %}
    </form> 
```

但我不知道在forms.py中制作表单字段是什么。

[http://packages.python.org/Flask-WTF/](http://packages.python.org/Flask-WTF/)

该页面上没有复选框表单。

我可以用

```
 {{form.modList(formdata = list)}} 
```

但它只显示一个没有文本的空复选框

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:18:16.890

我不确定你为什么要这样做。如果您使用复选框，我假设您希望返回每个复选框的值。如果是这样，那么每个都应该是您正在使用的 WTForm 实例的不同属性。

如果您只想返回检查的值，WTForms 提供[`wtforms.fields.SelectMultipleField`](http://wtforms.simplecodes.com/docs/1.0.3/fields.html#wtforms.fields.SelectMultipleField). 这将打印一个下拉框，用户可以在其中选择 0、1 或更多选项。

如果您必须有复选框，并且您必须在表单定义中使用列表，那么您唯一的选择似乎是创建一个自定义字段。[您可以在此处](http://wtforms.simplecodes.com/docs/1.0.3/fields.html#custom-fields)找到有关如何执行此操作的文档。

事实上 - 这个用例是 WTForms 文档的[自定义小部件](http://wtforms.simplecodes.com/docs/1.0.3/widgets.html#custom-widgets)部分中的示例。

# jsf - 超过 1 行带有 h:selectmanyCheckbox

> ID：14586179
> 
> 赞同：0
> 
> 时间：2013-01-29T15:18:24.637
> 
> 标签：jsf, jsf-2, selectmanycheckbox

我有一个 16 个项目的列表，应该像这样显示

```
1 2 3 4
5 6 7 8
etc. 
```

连续 4 个项目，然后它应该添加另一行。

我的问题是您只允许显示类似的信息

```
1 2 3 4 5 6 7 8 9 10 etc 
```

或者

```
1
2
3
4
etc. 
```

我的代码如下所示：

```
<h:selectManyCheckbox value="#{main.selectedStates}">
  <f:selectItems value="#{main.stateOutput}" />
</h:selectManyCheckbox> 
```

我完全不知道这应该如何工作。我现在花了大约 2 个小时在 Google 上搜索它。

PS：请不要因为我的英语而责备我：P

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:10:28.037

一个非侵入式的解决方案是在加载 DOM 树后使用一些 JavaScript 来修改 HTML DOM。类似的东西，伪代码：

```
someSelectorForCheckboxDiv.forEach( if ... then ...set css or insert dom element ); 
```

Luiggi 提出了另一种方式，可能更接近 JSF 精神。

# cocos2d-iphone - 创建一个做一些动画的类并在屏幕上显示它

> ID：14586180
> 
> 赞同：1
> 
> 时间：2013-01-29T15:18:37.880
> 
> 标签：cocos2d-iphone

我正在尝试创建一个上面有许多精灵的新类，它们一个接一个地执行一些动作，并在屏幕上做一些其他很酷的事情。

整个“表演”将在某个课程中，当我需要时出现在屏幕上。

在我的主类`Main`a 上`CCScene`，我希望能够随时调用该动画类，并将其添加到我的主屏幕并执行其“显示”。

```
some class :
 //FADE ACTIONS
    fadeInAction=[CCFadeIn actionWithDuration:0.5];
    fadeOutAction=[CCFadeOut actionWithDuration:0.5];
    fadeOutFastAction=[CCFadeOut actionWithDuration:0.1];

    //circle animation parts
    for (int i=0;i<12;i++)
    {
        circlePartsArray[i]=[CCSprite spriteWithFile:[NSString stringWithFormat:@"c%d.png",i+1]];
        circlePartsArray[i].position=ccp(winSize.width/2,winSize.height/2);
        [self addChild:circlePartsArray[i]];

    } 
```

然后从我的主要课程中，我想在我的屏幕上看到所有的表现`someClass`——添加的精灵，而不是它们会褪色等。

我将如何定义该类，并将其添加到我的主场景中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:12:47.060

Extend the CCNode class. Overwrite the CCNode Class' onEnter method, which you will use to create and add the child sprites, and start the animation. This way whenever you add the Node to your scene, it will begin the animation (probably using action sequences). Your animation action sequences should end with a CCCallBlock action, which you will use to clean up and remove the Node from its parent.

# apache - 第一个重写规则覆盖其余规则

> ID：14586182
> 
> 赞同：0
> 
> 时间：2013-01-29T15:18:45.547
> 
> 标签：apache, .htaccess, mod-rewrite

对于那些比我了解更多关于 mod-rewrite 的人的快速问题：

我有一些按顺序编写的规则，如下所示：

```
RewriteRule ^(en|fr) index.php?page=home&lang=$1 [L]
RewriteRule ^(en|fr)/home index.php?page=home&lang=$1 [L]
RewriteRule ^(en|fr)/terms index.php?page=terms&lang=$1 [L] 
```

然而，第一个似乎压倒了其余的。

我试过取消，`[L]`但这并没有达到我的预期，它永远不会显示“条款”页面。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:28:59.133

如果您希望`http://www.example.com/en`或`http://www.example.com/fr/`（带有或不带有斜杠）重定向到第一项，请将第一条规则更改为：

`RewriteRule ^(en|fr)/?$ index.php?page=home&lang=$1 [L]`

`/?`匹配是否有尾部斜杠，意思`$`是“匹配 URL 的结尾”（如果 URL 继续，则不匹配）。

# ios - 将 XML 从 Web 服务解析到 iOS iPhone 应用程序？

> ID：14586186
> 
> 赞同：-1
> 
> 时间：2013-01-29T15:18:51.137
> 
> 标签：ios, objective-c, xml, xcode, web-services

我有一个网络服务，它提供了我想在用户进行选择时显示的各种数据（一个例子可能是当地医生搜索医生时的列表）。

问题是，Web 服务较旧且基于 XML，而不是 JSON，而且我在 Internet 上的 iOS 应用程序中找不到太多关于解析和显示 xml 输出的信息。

我发现的只是`NSURL`/的一个简短示例`NSURLConnection`，以及几个与 JSON 相关的解析器，但我不知道在显示来自 Web 服务的大格式有序数据列表的情况下，从头开始使用 NSURL 会变得多么复杂?

有没有人不得不做这样的事情？我确信它在过去已经完成，我只是想看看如何证明......我可以研究的插件或类的任何示例？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:34:12.633

iOS 包括`NSXMLParserDelegate`

然后，你实现它的方法：

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
     //Do something when you start a new element
}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    //Do something with the character inside an element
}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
     //Do something when you finish an element
} 
```

使用这些方法很容易解析 xml

# gnuplot - Gnuplot：混合 dgrid3d 和点模式

> ID：14586188
> 
> 赞同：1
> 
> 时间：2013-01-29T15:18:53.213
> 
> 标签：gnuplot

我正在绘制一个 3d 值图，并将它们与一个点进行比较。我想在图表中清楚地标出这一点。由于 dgrid3d 我相信，我尝试过的一切都会创建一个与该点相交的平面。

我想我可以通过重叠两个情节来做到这一点，但我觉得必须有一个更简单的方法。

这是我的脚本：

```
reset

set dgrid3d 10,10,10
set hidden3d
unset key
set xrange [0:550]
set yrange [0:550]

splot 'CAPS_data.dat' using 2:1:3 with linespoints 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:36:49.163

如果您只比较几个静态点，您可以通过标签添加点：

```
set label 1 "" at X,Y,Z point 
```

否则，正如您所说，`dgrid3d`会将那个单点变成一个曲面。这种事情的解决方法是使用 a`table`并将您的 dgrid3d 表面绘制到表格中。然后您可以关闭 dgrid3d 并使用不同的绘图样式（例如`pm3d`）绘制曲面。

```
 set table "grid_data.dat"
 set dgrid3d 100,100
 splot "datafile.dat" u 1:2:3
 unset table
 unset dgrid3d

 set term <whatever>
 set output <whatever>
 splot 'grid_data.dat' u 1:2:3 w pm3d,\
       'point_data.dat' u 1:2:3 w points 
```

# php - 创建自定义菜单时在 Magento 上检索类别的 Url

> ID：14586189
> 
> 赞同：0
> 
> 时间：2013-01-29T15:18:54.277
> 
> 标签：php, magento, drop-down-menu, magento-1.7

我正在尝试创建一个自定义下拉菜单，其中只有几个特定类别及其各自的子类别。到目前为止，我设法检索了子类别的名称，但链接不起作用。

我还需要让主类别自动检索自己的名称和 URL，以防它在 Magento 的后端发生更改。在这种情况下，类别 ID 为 265。

我正在开发的网站是 www.personalproducts4u.co.uk

```
<li class="eight"><a href="<?php echo $this->getUrl() ?>index.php/contacts">Hotel Products</a>
 <?php $children = Mage::getModel('catalog/category')->getCategories(265); ?>
 <ul>
 <?php foreach ($children as $category): ?>
 <li>
 <a href="<?php echo $category->getUrl ?>">
 <?php echo $category->getName(); ?>
 </a>
 </li>
 <?php endforeach; ?>
 </ul>
 </li> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:30:13.100

问题是`$children`集合是 type `Varien_Data_Tree_Node_Collection`，它的元素分别是 type `Varien_Data_Tree_Node`。调用`getUrl()`它们将返回 null，它们不是`Mage_Catalog_Model_Category`对象。但是，您可以通过调用来检索他们的请求路径（url）：

```
$category->getRequestPath(); 
```

或者，您可以通过调用加载类别对象：

```
$cat = Mage::getModel('catalog/category')->load($category->getEntityId()); 
```

然后使用`$cat->getUrl()`调用。不过，这种加载会增加额外的开销。

# android - 在 android 中自动清除应用更新时的用户缓存

> ID：14586191
> 
> 赞同：9
> 
> 时间：2013-01-29T15:18:56.670
> 
> 标签：android

android API（理想情况下适用于 2.3.6 及更高版本）中是否有任何方法可以在用户下载新版本的应用程序时清除用户缓存？环顾四周似乎没有任何提及 - 或者我是否完全脱离了球并且在安装新版本时缓存被清空？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T18:55:40.823

如果没有别的，请将文件与您`android:versionCode`的缓存一起存储，并在启动时检查它，如果需要，清除您自己的缓存 -`@CommonsWare`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-31T14:26:34.230

使用 BroadcastReceiver 通过意图过滤器 android.intent.action.PACKAGE_REPLACED 接收应用程序的更新通知。在更新接收器的 onReceive 方法中，将意图操作验证为 Intent.ACTION_PACKAGE_REPLACED 。然后做任何你需要做的事情来做你的旧缓存。

# ios - 确认有人下载了 iOS 应用

> ID：14586195
> 
> 赞同：1
> 
> 时间：2013-01-29T15:19:12.923
> 
> 标签：ios, objective-c

我希望有人在网站上完成注册过程，然后从 Apple App Store 下载应用程序，但是我不确定我们如何跟踪有人确实下载了应用程序并将下载绑定回注册。

我希望通过此实现的最佳目标是什么，我将如何实施它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:22:33.123

让他们输入某种注册码或网站上创建的用户名/密码组合。据我所知，没有其他方法，因为您无法从 App Store 访问此类信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:25:28.663

听起来您希望每次注册都进行分析跟踪。为此，您可能会考虑 B2B 应用程序，这意味着当您搜索它时它在应用程序商店中不可见，您可以将用户指向自定义 iTunes url 以下载该应用程序。之后，您可以下载 iTunes Connect 以查看活动安装。

[http://www.apple.com/business/vpp/](http://www.apple.com/business/vpp/)

[https://itunesconnect.apple.com/WebObjects/iTunesConnect.woa](https://itunesconnect.apple.com/WebObjects/iTunesConnect.woa)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:00:29.423

你可以看看 Taps.io - [http://blog.tapstream.com/post/40781681789/made-for-apps-taps-io-shortener](http://blog.tapstream.com/post/40781681789/made-for-apps-taps-io-shortener)

用他们自己的话来说：

> Taps.io 是一个通用的 URL 缩短器，可将网络访问者发送到您的应用程序或网站。它还回答了这个问题：有多少访问者下载并运行了您的应用程序？
> 
> 就像 Bit.ly 一样，它会跟踪点击次数 - 但与普通的缩短器不同的是，它会显示您从该链接获得的应用用户数量及其整体转化率。因此，使用它来代替裸露的 iTunes 链接，用于推文、电子邮件签名、广告以及您共享应用程序的任何其他地方。您甚至可以将 LinkShare 与 taps.io 一起使用来重新获得会​​员佣金。
> 
> Taps.io 对独立开发者免费，您创建的 taps.io 链接数量或产生的点击次数没有上限。

# javascript - jquery手风琴动画没有方法

> ID：14586205
> 
> 赞同：1
> 
> 时间：2013-01-29T15:19:37.993
> 
> 标签：javascript, jquery, jquery-ui, accordion, jquery-easing

我有以下代码，

```
$("#nav").accordion({
                event: "mouseover",
                autoHeight: false,
                collapsible: false,
                animate: 'bounceslide',
                <?php
                //  Checks for active page and opens the related tab
                    $uri = $_SERVER['REQUEST_URI'];
                    switch($uri):
                        case '/anti-social-behavior-logging':
                            echo('active: 0,'); break;
                        case '/telehealth-services':
                            echo('active: 1,'); break;
                        case '/telecare-services':
                            echo('active: 2,'); break;
                        case '/lone-worker-safety-services':
                            echo('active: 3,'); break;
                        case '/repairs-reporting-services':
                            echo('active: 4,'); break;
                        default:
                            echo('active: 5,');
                    endswitch;
                ?>              
            }); 
```

但是我收到以下错误，

未捕获的类型错误：对象 # 没有方法 'bounceslide'

为什么是这样？[你可以在http://www.astraline.co.uk](http://www.astraline.co.uk)看到这个问题——据我所知，我有所有我需要的库来工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:58:03.703

看起来你需要把`animated`而不是`animate`.

请参阅：[http ://docs.jquery.com/UI/Accordion/accordion#option-animated](http://docs.jquery.com/UI/Accordion/accordion#option-animated)

# wordpress - 自定义重写永久链接 WordPress

> ID：14586206
> 
> 赞同：0
> 
> 时间：2013-01-29T15:19:42.707
> 
> 标签：wordpress, url-rewriting, permalinks

我有一个页面模板，它在 url 的末尾添加了一些变量，因此我可以根据传递的内容显示数据。

即：mysite.com/search-listins/listing/?address=123+The+Street&mls-number=00000

我需要把它转换成一个漂亮的永久链接。像这样的东西：

mysite.com/search-listings/listing/123-The-Street 或 mysite.com/search-listings/listing/00000-123-The-Street

我尝试使用此功能。但似乎没有任何效果。有什么想法吗？这些不是来自自定义帖子类型。如您所见，这些不是自定义帖子类型。这些是位于 wp_ 表之外的 MLS 项目。

功能：

```
 function setup_filter_rewrites(){
     add_rewrite_rule('search-listings/listing/([^/]*)/?', 'index.php?pagename=search-     listings/listing/?address=$matches[1]&mls-number=$matches[2]', 'top');
 }
 add_action( 'init', 'setup_filter_rewrites' );

 function setup_filter_query_vars( $query_vars ){
     $query_vars[] = 'listing';
     return $query_vars;
 }
 add_filter( 'query_vars', 'setup_filter_query_vars' );` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:08:29.823

我总是使用这段代码而不是 add_rewrite_rule() 函数：

```
add_filter( 'query_vars', 'my_query_vars' );
function dlouhavidea_query_vars( $vars ) {
    $vars[] = 'address';
    $vars[] = 'miles';    
    return $vars;
}

add_action( 'generate_rewrite_rules', 'my_rewrite_rules' );
function ,y_rewrite_rules( $wp_rewrite )
{
    $wp_rewrite->rules = array(
        'search-listings/listing/address/?([^/]*)/?$' => $wp_rewrite->index . '?pagename=search-listings&address=' . $wp_rewrite->preg_index( 1 ),
        'search-listings/listing/miles/?([0-9]{1,})/?$' => $wp_rewrite->index . '?pagename=search-listings&miles=' . $wp_rewrite->preg_index( 1 )       
    ) + $wp_rewrite->rules;
} 
```

你会在 get_query_var('address') 和 get_query_var('miles'); 中找到你的变量。

# wpf - 将字符串放入 radChart 的 Xaxis

> ID：14586213
> 
> 赞同：0
> 
> 时间：2013-01-29T15:20:13.807
> 
> 标签：wpf, telerik, radchart

当我的 X 轴是时间 int 时，它工作得很好。但是当我把它作为一个字符串时，就会发生错误

我的 XAML 是这样的

```
<telerik:RadChart Name="radChartCAMois">
                    <telerik:RadChart.SeriesMappings>
                        <telerik:SeriesMapping LegendLabel="Chiffre d'affaire en DT">
                            <telerik:SeriesMapping.SeriesDefinition>
                                <telerik:Area3DSeriesDefinition/>
                            </telerik:SeriesMapping.SeriesDefinition>
                            <telerik:SeriesMapping.ItemMappings>
                                <telerik:ItemMapping DataPointMember="XValue" FieldName="IntValue"></telerik:ItemMapping>
                                <telerik:ItemMapping DataPointMember="YValue" FieldName="StringValue"></telerik:ItemMapping>
                            </telerik:SeriesMapping.ItemMappings>
                        </telerik:SeriesMapping>
                    </telerik:RadChart.SeriesMappings>
                </telerik:RadChart> 
```

我的代码是这样的

```
List<MyClass> a = new List<MyClass>{new MyClass{intValue = 1,stringValue = "s1"},new MyClass{intValue = 2,stringValue = "s2"}}; 
```

radChartCAMois.ItemsSource = a;

MyClass 在哪里

```
class MyClass
{
    public int intValue;
    public string stringValue;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:53:01.750

XValue 和 YValue DataPointMember-s 要求它们对应的 FieldName 是 double 类型。这就是不能将字符串设置为 XValue 的原因。相反，您应该在类别图中使用 XCategory ..

[http://www.telerik.com/help/wpf/radchart-features-categorical-charts.html](http://www.telerik.com/help/wpf/radchart-features-categorical-charts.html)

# mysql - CentOS 上的 sqoop 导出

> ID：14586214
> 
> 赞同：0
> 
> 时间：2013-01-29T15:20:13.603
> 
> 标签：mysql, sqoop

我想使用来自 Hive => MySQL 的 sqoop-export 我在下面执行的命令有效：

```
sqoop-export --connect jdbc:mysql://localhost/mydb --table tbl_1 --export-dir /user/hive/warehouse/tbl_1 --username test --password test123 
```

当我在本地机器上执行命令时，它可以工作。但是当我在服务器上尝试它时它没有。

本地机器：Ubuntu 12.10 和 MySQL 5.5.28-0ubuntu0.12.10.2

服务器：CentOS 5.6 和 MySQL 5.0.95-log

Hadoop/Hive/Sqoop 的版本相同。

我将 hadoop/hive/sqoop 从我的电脑复制到服务器，并且两者都在服务器上运行良好。

创建表操作正确。

但是为什么sqoop会出错呢？

日志如下。

```
 sqoop-export --connect jdbc:mysql://localhost/honeybee --table tbl_1 --export-dir /user/hive/warehouse/tbl_1 --username test --password test123
Warning: /usr/lib/hbase does not exist! HBase imports will fail.
Please set $HBASE_HOME to the root of your HBase installation.
13/01/30 07:57:05 WARN tool.BaseSqoopTool: Setting your password on the command-line is insecure. Consider using -P instead.
13/01/30 07:57:05 INFO manager.MySQLManager: Preparing to use a MySQL streaming resultset.
13/01/30 07:57:05 INFO tool.CodeGenTool: Beginning code generation
13/01/30 07:57:05 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM `tbl_1` AS t LIMIT 1
13/01/30 07:57:05 INFO manager.SqlManager: Executing SQL statement: SELECT t.* FROM `tbl_1` AS t LIMIT 1
13/01/30 07:57:05 INFO orm.CompilationManager: HADOOP_HOME is /home/hadoop-1.1.1/libexec/..
Note: /tmp/sqoop-root/compile/26876fd02da2baebf0e2db4e7ddb6ddd/tbl_1.java uses or overrides a deprecated API.
Note: Recompile with -Xlint:deprecation for details.
13/01/30 07:57:07 INFO orm.CompilationManager: Writing jar file: /tmp/sqoop-root/compile/26876fd02da2baebf0e2db4e7ddb6ddd/tbl_1.jar
13/01/30 07:57:07 INFO mapreduce.ExportJobBase: Beginning export of tbl_1
13/01/30 07:57:08 INFO input.FileInputFormat: Total input paths to process : 1
13/01/30 07:57:08 INFO input.FileInputFormat: Total input paths to process : 1
13/01/30 07:57:08 INFO mapred.JobClient: Running job: job_201301300430_0033
13/01/30 07:57:09 INFO mapred.JobClient:  map 0% reduce 0%
13/01/30 07:57:16 INFO mapred.JobClient: Task Id : attempt_201301300430_0033_m_000000_0, Status : FAILED
java.io.IOException: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
    at org.apache.sqoop.mapreduce.ExportOutputFormat.getRecordWriter(ExportOutputFormat.java:79)
    at org.apache.hadoop.mapred.MapTask$NewDirectOutputCollector.<init>(MapTask.java:628)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:753)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1136)
    at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1117)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:350)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2408)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2445)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2230)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:813)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:399)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:334)
    at java.sql.DriverManager.getConnection(DriverManager.java:579)
    at java.sql.DriverManager.getConnection(DriverManager.java:221)
    at org.apache.sqoop.mapreduce.db.DBConfiguration.getConnection(DBConfiguration.java:184)
    at org.apache.sqoop.mapreduce.AsyncSqlRecordWriter.<init>(AsyncSqlRecordWriter.java:76)
    at org.apache.sqoop.mapreduce.ExportOutputFormat$ExportRecordWriter.<init>(ExportOutputFormat.java:95)
    at org.apache.sqoop.mapreduce.ExportOutputFormat.getRecordWriter(ExportOutputFormat.java:77)
    ... 8 more
Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.<init>(Socket.java:425)
    at java.net.Socket.<init>(Socket.java:241)
    at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:259)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:300)
    ... 26 more

13/01/30 07:57:21 INFO mapred.JobClient: Task Id : attempt_201301300430_0033_m_000000_1, Status : FAILED
java.io.IOException: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
    at org.apache.sqoop.mapreduce.ExportOutputFormat.getRecordWriter(ExportOutputFormat.java:79)
    at org.apache.hadoop.mapred.MapTask$NewDirectOutputCollector.<init>(MapTask.java:628)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:753)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1136)
    at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1117)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:350)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2408)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2445)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2230)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:813)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:399)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:334)
    at java.sql.DriverManager.getConnection(DriverManager.java:579)
    at java.sql.DriverManager.getConnection(DriverManager.java:221)
    at org.apache.sqoop.mapreduce.db.DBConfiguration.getConnection(DBConfiguration.java:184)
    at org.apache.sqoop.mapreduce.AsyncSqlRecordWriter.<init>(AsyncSqlRecordWriter.java:76)
    at org.apache.sqoop.mapreduce.ExportOutputFormat$ExportRecordWriter.<init>(ExportOutputFormat.java:95)
    at org.apache.sqoop.mapreduce.ExportOutputFormat.getRecordWriter(ExportOutputFormat.java:77)
    ... 8 more
Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.<init>(Socket.java:425)
    at java.net.Socket.<init>(Socket.java:241)
    at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:259)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:300)
    ... 26 more

13/01/30 07:57:27 INFO mapred.JobClient: Task Id : attempt_201301300430_0033_m_000000_2, Status : FAILED
java.io.IOException: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
    at org.apache.sqoop.mapreduce.ExportOutputFormat.getRecordWriter(ExportOutputFormat.java:79)
    at org.apache.hadoop.mapred.MapTask$NewDirectOutputCollector.<init>(MapTask.java:628)
    at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:753)
    at org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)
    at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
    at java.security.AccessController.doPrivileged(Native Method)
    at javax.security.auth.Subject.doAs(Subject.java:415)
    at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1136)
    at org.apache.hadoop.mapred.Child.main(Child.java:249)
Caused by: com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure

The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.SQLError.createCommunicationsException(SQLError.java:1117)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:350)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2408)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2445)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2230)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:813)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:399)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:334)
    at java.sql.DriverManager.getConnection(DriverManager.java:579)
    at java.sql.DriverManager.getConnection(DriverManager.java:221)
    at org.apache.sqoop.mapreduce.db.DBConfiguration.getConnection(DBConfiguration.java:184)
    at org.apache.sqoop.mapreduce.AsyncSqlRecordWriter.<init>(AsyncSqlRecordWriter.java:76)
    at org.apache.sqoop.mapreduce.ExportOutputFormat$ExportRecordWriter.<init>(ExportOutputFormat.java:95)
    at org.apache.sqoop.mapreduce.ExportOutputFormat.getRecordWriter(ExportOutputFormat.java:77)
    ... 8 more
Caused by: java.net.ConnectException: Connection refused
    at java.net.PlainSocketImpl.socketConnect(Native Method)
    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:339)
    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:200)
    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:182)
    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:391)
    at java.net.Socket.connect(Socket.java:579)
    at java.net.Socket.connect(Socket.java:528)
    at java.net.Socket.<init>(Socket.java:425)
    at java.net.Socket.<init>(Socket.java:241)
    at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:259)
    at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:300)
    ... 26 more

13/01/30 07:57:35 INFO mapred.JobClient: Job complete: job_201301300430_0033
13/01/30 07:57:35 INFO mapred.JobClient: Counters: 7
13/01/30 07:57:35 INFO mapred.JobClient:   Job Counters 
13/01/30 07:57:35 INFO mapred.JobClient:     SLOTS_MILLIS_MAPS=22142
13/01/30 07:57:35 INFO mapred.JobClient:     Total time spent by all reduces waiting after reserving slots (ms)=0
13/01/30 07:57:35 INFO mapred.JobClient:     Total time spent by all maps waiting after reserving slots (ms)=0
13/01/30 07:57:35 INFO mapred.JobClient:     Rack-local map tasks=4
13/01/30 07:57:35 INFO mapred.JobClient:     Launched map tasks=4
13/01/30 07:57:35 INFO mapred.JobClient:     SLOTS_MILLIS_REDUCES=0
13/01/30 07:57:35 INFO mapred.JobClient:     Failed map tasks=1
13/01/30 07:57:35 INFO mapreduce.ExportJobBase: Transferred 0 bytes in 28.2556 seconds (0 bytes/sec)
13/01/30 07:57:35 INFO mapreduce.ExportJobBase: Exported 0 records.
13/01/30 07:57:35 ERROR tool.ExportTool: Error during export: Export job failed! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T06:54:28.140

我解决了这个问题。

问题是 MySQL 远程连接。

我用了

```
sqoop-export --connect jdbc:mysql://localhost/mydb --table tbl_1 --export-dir /user/hive/warehouse/tbl_1 --username test --password test123 
```

但这是错误的。

我应该使用主机名而不是 localhost。

我通过这个问题学到了关于sqoop的一件事。

Sqoop 运行 MapReduce。

所以数据节点必须能够访问服务器上的 MySQL。（我在名称节点上安装了 MySQL。）

另外，/etc/my.cnf

我注释掉 'bind-address=127.0.0.1' & skip-networking

然后它运行良好。

# php - 究竟是什么让 PDO 安全？

> ID：14586221
> 
> 赞同：8
> 
> 时间：2013-01-29T15:20:40.110
> 
> 标签：php, pdo, sanitization

> **可能重复：**
> [准备好的语句如何防止 SQL 注入攻击？](https://stackoverflow.com/questions/8263371/how-prepared-statements-can-protect-from-sql-injection-attacks)

对于我们这些刚接触 PDO 的人来说，我们知道它更安全，而且使用起来更好，但我无法思考的是，它是如何安全的？

```
<?php
$db = new PDO('mysql:host=localhost;dbname=testdb;charset=UTF-8', 'username', 'password');
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
try {
    //connect as appropriate as above
    $db->query('hi'); //invalid query!
} catch(PDOException $ex) {
    echo "An Error occured!"; //user friendly message
    some_logging_function($ex->getMessage());
}
foreach($db->query('SELECT * FROM table') as $row) {
    echo $row['field1'].' '.$row['field2']; //etc...
}
?> 
```

请注意，我确实了解它的作用，但它究竟是做什么来清理输入的呢？我知道`mysql_*`use `mysql_real_escape_string`which 只是把文字`\`. PDO 是否使用相同的系统？如果没有，就卫生而言，我们依靠什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T15:25:24.700

虽然您的查询中似乎没有任何内容可以作为输入进行清理。此外，如果您只是输入查询，它不会对它做任何事情。

但它确实具有称为[prepared statements](http://en.wikipedia.org/wiki/Prepared_statement)的魔力，它*确实*对您有所帮助。您可以查看@yourcommonsense 的链接以获取更多信息：

[准备好的语句如何防止 SQL 注入攻击？](https://stackoverflow.com/questions/8263371/how-prepared-statements-can-protect-from-sql-injection-attacks/8265319#8265319)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T16:13:24.820

PDO 具有`PDO::Quote()`与`mysql_real_escape_string()`. 这提供了基本相同的功能和 sme 级别的安全性。

更好的选择是“Prepared Statements”功能，您可以在其中将标记而不是变量放入查询中`PDO::prepare()`，然后使用`PDO::execute()`将变量传递给查询。

这更安全，因为它使用数据库引擎的内部机制将变量推送到查询中。通过准备好的语句进行 SQL 注入攻击的可能性为零（除非数据库引擎本身存在错误，但通过保持 MySQL 版本更新可以缓解这种情况；与您自己的代码无关）。

准备好的语句还有一个好处是它们可以被数据库引擎缓存。这意味着，如果您使用相同的查询但使用不同的变量值进行多次调用，那么与使用旧的基于字符串的机制进行相同的查询相比，您将获得性能提升。

注意：有些 DB 本身可能不支持预处理语句，在这种情况下 PHP 会模拟它们。在这种情况下，它与 using 基本相同`PDO::Quote`，并且您不会获得上面列出的好处。大多数数据库确实支持它们，但即使那样它也有可能被禁用，所以请确保你关闭`ATTR_EMULATE_PREPARES`。

最后，使用 PDO 更安全，因为旧的 mysql 扩展在其核心存在一些基本的安全问题。例如，旧 API 不加密 PHP 和 MySQL 数据库之间的通信。这意味着理论上存在窃听者攻击的风险，尤其是当数据库与 PHP 不在同一台服务器上时。PDO 使用更新版本的 MySQL 通信协议，因此能够加密此流量，因此更安全（这也是 PDO 不支持真正古老版本的 MySQL 的原因）。旧 API 还存在一些其他类似的隐藏风险，这些风险在代码中根深蒂固，无法消除。这就是为什么`mysqli`扩展被编写为直接替代它的原因。

# matlab - 如何在 MATLAB 中忽略 NaN？

> ID：14586222
> 
> 赞同：1
> 
> 时间：2013-01-29T15:20:40.507
> 
> 标签：matlab

我正在寻找一种方法来忽略矩阵中的特定条目，以便在 MATLAB 中进行后续线性回归

我有两个矩阵：y =

```
 9.3335    7.8105    5.8969    3.5928
    23.1580   19.6043   15.3085    8.2010
    40.1067   35.2643   28.9378   16.6753
    56.4697   51.8224   44.5587   29.3674
    70.7238   66.5842   58.8909   42.7623
    83.0253   78.4561   71.1924   53.8532 
```

和 x =

```
 300   300   300   300
    400   400   400   400
    500   500   500   500
    600   600   600   600
    700   700   700   700
    800   800   800   800 
```

我需要对 y 介于 20 到 80 之间的点进行线性回归，因此我需要一种方法来完全自动化该过程。我尝试制作离群的 y 值 [及其相应的 x 值] NaN，但在线性回归期间，matlab 将 NaN 包含在计算中，因此我得到了 NaN 输出。任何人都可以提出一个忽略这些条目或完全忽略 NaN 计算的好方法吗？（注意：y 中的列通常会有不同的值组合，所以我不能消除整行）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:33:04.053

如果 NaN 出现在 X 和 Y 矩阵中的相同位置，则可以使用如下函数调用`your_function( X(~isnan(X)), Y(~isnan(X)) )`。如果 NaN 没有出现在相同的位置，您必须首先通过类似 `X(~isnan(X)| isnan(Y))' 的方式找到有效索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:03:11.893

由于您分别对每一列执行回归，因此您可以简单地将索引形成为具有有效 y 值的行：

```
nCols = size(x,2);

results = zeros(2,nCols);
validY = y>20 & y<80; %# a logical array the size of y with valid entries
nValid = sum(validY,1);

for c = 1:nCols
    % results is [slope;intercept] in each column
    results(:,c) = [x(validY(:,c),c),ones(nValid(c),1)]\y(validY(:,c),c);

end 
```

# multithreading - Visual C++/CLI，带有函数指针的 ThreadStart

> ID：14586225
> 
> 赞同：1
> 
> 时间：2013-01-29T15:20:45.850
> 
> 标签：multithreading, visual-studio-2010, c++-cli, managed-c++

我正在研究托管 C++ 或 C++/CLI。我正在尝试启动一个 CLI 线程来执行一个函数。但是，当我尝试构建时，我收到错误“Microsoft (R) C/C++ 优化编译器已停止工作”。在输出窗口中。“Foo.cpp(8)：致命错误 C1001：编译器发生内部错误。”

```
//the class which holds the function to run 
ref class Foo
{
    void handleEvent();
    void (*func)(void);
};

void Foo::handleEvent()
{
    ThreadStart ^ param = gcnew ThreadStart(func); //line 8
    Thread ^ thread = gcnew Thread(param);
    thread.Start();
} 
```

ThreadStart 不能处理本机函数指针吗？如果没有，是否有另一种方法可以从 C++/CLI 运行正则 C 函数指针？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:30:28.740

尝试将第 8 行替换为

```
ThreadStart^ param = (ThreadStart^) System::Runtime::InteropServices::Marshal::GetDelegateForFunctionPointer((IntPtr)func, ThreadStart::typeid); 
```

# asp.net - 为什么安装方法会影响 .NET 服务？

> ID：14586226
> 
> 赞同：1
> 
> 时间：2013-01-29T15:20:47.897
> 
> 标签：asp.net, wcf, multicast, advanced-installer

在这篇文章之后，我构建了一个托管在 Windows 服务中的 WCF 服务：http: [//msdn.microsoft.com/en-us/library/ms733069.aspx](http://msdn.microsoft.com/en-us/library/ms733069.aspx)。服务中的代码所做的部分工作是加入多播组并侦听广播到该组的数据。然后它处理它。我发现当我使用 InstallUtil 手动安装服务时，它工作正常。要手动安装它，我执行以下操作：

*   在 Visual Studio 中构建 MyService 项目。
*   右键单击 Visual Studio 命令提示符并选择以管理员身份运行
*   导航到包含 MyService.exe 文件的文件夹
*   运行 InstallUtil 命令，如下所示： installutil.exe MyService.exe

该服务可以很好地安装在 Windows 中，然后我启动它。然后我运行我的 ASP.NET 应用程序，它是服务的客户端，它运行良好。该服务可以很好地接收和处理数据。

但是，我正在尝试使用[Advanced Installer](http://www.advancedinstaller.com)来构建一个 MSI 或 EXE，它将同时安装服务和 ASP.NET 应用程序，因此不必手动完成。我能够成功创建执行此操作的 Advanced Installer 项目，它实际上安装了 ASP.NET 应用程序和 Windows 服务都很好，它也启动了我的 Windows 服务。然而真正奇怪的是，当我运行应用程序时，我发现我的服务代码无法接收任何多播数据。它似乎阻止了那行代码，我从来没有得到任何数据。有谁知道为什么会发生这种情况？在进行高级安装程序安装时，我尝试使用 EXE 并使用“以管理员身份运行”。这是我的服务中的代码。

```
_groupAddress = IPAddress.Parse(_myIPAddress);
_listener = new UdpClient(_myPort);
_groupEP = new IPEndPoint(_groupAddress, _myPort);

_listener.JoinMulticastGroup(_groupAddress);
byte[] _bytes = _listener.Receive(ref _groupEP); 
```

它似乎阻止了最后一行代码，并且它从不接收任何数据。这只发生在我使用 Advanced Installer 安装时。当我手动安装时，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:43:12.440

服务被配置为以用户身份运行。当您使用不同的方法安装时，这会有所不同吗？

你在这两种情况下使用相同的端口号吗，如果不是，它可能是防火墙。

99% 确定你已经检查过了，但是在使用高级安装程序安装后检查服务是否正在运行。

检查事件日志以了解服务问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:11:32.867

我最初认为这些家伙说这是用户凭据的问题。但是，由于您在这两种情况下都说服务安装在 LocalSystem 下，所以问题似乎出在其他地方。

我建议您首先检查系统“事件查看器”是否有任何有关您的消息无法启动的消息，也许在那里您可以找到有关失败案例的更多信息。

如果您在那里找不到更详细的信息，我建议您进行一些逆向工程，看看 InstallUtil 做什么而 Advanced Installer 不做什么，或者反过来。高级安装程序随[Repackager 工具](http://www.advancedinstaller.com/user-guide/tutorial-repackager.html)一起提供。您可以使用此工具来捕获运行“InstallUtil”时执行的系统更改，方法是在 Repackager 要求安装包（例如记事本）时向它提供一个虚拟可执行文件。

当 Repackager 启动 Notepad 时，将其保持打开状态并运行服务的安装命令，在服务完成安装后，关闭 Notepad 并让 repackager 继续其工作。然后分析它生成的新项目，看看捕获了哪些资源，比如文件、注册表、服务等...

您还可以捕获 Advanced Installer 创建的安装包，以查看从中安装的服务是否为您的服务创建了更少或更多的注册信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T15:46:43.440

可能是您的 Windows 服务运行时没有足够的凭据来执行此操作。为了测试这一点，我建议尝试更改用于服务的用户帐户，看看是否有任何不同。

为此，请转到服务小程序（启动、运行、键入*services.msc*）。找到您的服务，右键单击，属性，“登录”选项卡，选择“此帐户”并选择可以运行该服务的管理员用户帐户。

# javascript - 从所有检查值jQuery创建字符串

> ID：14586227
> 
> 赞同：2
> 
> 时间：2013-01-29T15:20:49.223
> 
> 标签：javascript, jquery

好的，所以我这样做：

```
<input type="checkbox" class="checkBoxClass" value="0" />
<input type="checkbox" class="checkBoxClass" value="1" />
<input type="checkbox" class="checkBoxClass" value="2" /> 
```

然后在 javascript/jquery 我试图做这样的事情：

```
$('#btnHtml').click(function(){
for( var checks=''; $('.checkBoxClass:checked').val() ){
    var checks = checks+', ';
}
}); 
```

假设所有这些复选框都被选中，我怎样才能`var checks`成为一个字符串`'0, 1, 2'`？

仍在尝试习惯 JS 中的 for()，这可能是完全错误的做法。不知道该怎么做。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-29T15:23:38.840

函数式编程：

```
var str = $('.checkBoxClass:checked').map(function() {
    return this.value;
}).get().join(); 
```

**参考**：[`.map`](http://api.jquery.com/map/)，，，[`.get`](http://api.jquery.com/get/)_[`.join`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/join)

# iphone - 如何做与刮掉图像效果相反的事情

> ID：14586230
> 
> 赞同：0
> 
> 时间：2013-01-29T15:20:52.923
> 
> 标签：iphone, xcode, ccsprite, glblendfunc

我复制了这里找到的代码：

[http://www.cocos2d-iphone.org/forum/topic/12557](http://www.cocos2d-iphone.org/forum/topic/12557)

为了创建一个成功的“刮掉”效果，即当我的burnsprite 访问顶层图像时，它在burnsprite 所在的位置使其透明，露出它下面的底层。

我想做相反的事情。我希望顶层从透明开始，并让它在 Burnsprite 访问的地方变得可见。

下面我列出了我尝试做的事情：

我将 Burnsprite 混合功能更改为`{GL_ZERO, GL_ONE}`. 我认为这是正确的做法。我不知道它是否有效，因为我的顶层开始时不是透明的。

我换 `[topLayer clear:0.0f g:0.0f b:0.0f a:1.0f]`了 `[topLayer clear:0.0f g:0.0f b:0.0f a:0.0f]`，什么也没发生。它不透明。

然后我做了`topLayer.sprite.opacity = 0.0;` 然后似乎只是部分透明。仍然不是我想要的。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T07:52:59.387

您想要的场景似乎与“scratch-off”场景完全相同，但“scratch”层位于下方而不是上方。

如果你切换图层，你会得到你想要的效果。

# cuda - GPGPU 能效相对于 CPU 的解释？

> ID：14586233
> 
> 赞同：2
> 
> 时间：2013-01-29T15:21:04.013
> 
> 标签：cuda, opencl, gpgpu, energy

我听说对于许多应用程序来说，GPU 比多核 CPU 更节能，尤其是在图形硬件得到充分利用的情况下。我很难找到描述导致该声明的特定架构特征的论文、文章或任何内容，或者在一组基准测试中直接比较 GPU 与 CPU 的能耗的科学研究。谁能提供更多关于这一主张的支持的见解，或者向我指出一些显示证据的研究？

如果我不得不猜测，我会说它主要源于 GPU 时钟的较低频率。此外，本文：

[http://accel.cs.vt.edu/sites/default/files/paper/huang-hppac09-gpu.pdf](http://accel.cs.vt.edu/sites/default/files/paper/huang-hppac09-gpu.pdf)

表明这部分是因为 GPU 只是更快地解决了问题，因此即使 GPU 的峰值功耗更高，它们在该级别上花费的时间也比 CPU 短得多（同样，对于正确的问题）。任何人都可以添加更多内容吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:09:41.620

TL；DR 回答：gpu 中的晶体管实际上比 cpu 中的更多。

当今 CPU 的最大功率效率杀手是允许在芯片上进行一般计算的权衡。无论是 RISC、x86 还是其他 cpu 架构，都有专门用于 cpu 通用用途的额外硬件。这些晶体管需要电力，尽管它们没有做任何实际的数学运算。

快速 CPU 需要先进的分支预测硬件和大容量缓存，以避免冗长的处理，这些处理可能会在流水线的后期被丢弃。在大多数情况下，cpus 一次执行一条指令（每个 cpu 核心，SIMD 也有助于 cpus ......），并且处理条件非常好。Gpus 依赖于对多条数据执行相同的操作（SIMD/向量操作），并且在 'if' 和 'for' 语句中发现的简单条件受到很大影响。

还有很多硬件用于获取、解码和调度指令——cpus 和 gpus 都是如此。这个很大的区别在于，对于 gpu，获取 + 解码 + 调度晶体管与计算晶体管的比率往往要高得多。

Here is an AMD presentation (2011) about how their gpus have changed over time, but this really applies to most gpus in general. [PDF link.](http://amddevcentral.com/afds/assets/keynotes/6-Demers-FINAL.pdf) It helped me understand the power advantage of gpus by knowing a bit of the history behind how gpus got to be so good at certain computations.

I gave an answer to a similar question a while ago. [SO Link.](https://stackoverflow.com/questions/9205915/opencl-cpu-device-vs-gpu-device/9210146#9210146)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:20:57.233

通常，这些声明是通过比较 GFLOP 性能和估计每个浮点运算的功率来支持的，如[本文](http://fhtr.blogspot.de/2010/03/gazing-at-cpu-gpu-crystal-ball.html)所示。但这基本上就是你在最后一句话中写的。

您还必须考虑 CPU 和 GPU 架构针对不同的问题。CPU 内核（至少在 x86 上）具有深管道、大型指令集和非常复杂的缓存策略来解决各种问题，而 GPU 内核相当简单，因此消耗的功率要少得多。为了弥补这一点，GPU 中的计算核心比 CPU 中的多得多。但你可能已经知道了。

# facebook - 适用于不同浏览器的 Facebook 元标签

> ID：14586235
> 
> 赞同：1
> 
> 时间：2013-01-29T15:21:18.143
> 
> 标签：facebook, meta-tags, jwplayer, html5-video

我正在尝试从 facebook 应用程序发布视频，我需要它适用于所有浏览器和 HTML5（如果可用）。

我为此使用了这 3 种视频格式：flv、mp4 和 webm。

以下是我正在使用的标签：

```
<meta property="og:title" content="My title" />
<meta property="og:description" content="My description" />
<meta property="og:type" content="video" />
<meta property="og:image" content="my_url_image.png" />
<meta property="og:url" content="my_url_video" />
<meta property="fb:app_id" content="my_app_id" />
<meta property="og:video:width" content="640" />
<meta property="og:video:height" content="480" />

<meta property="og:video" content="my_url_video.mp4" />
<meta property="og:video:type" content="video/mp4" />

<meta property="og:video" content="my_url_video.webm" />
<meta property="og:video:type" content="video/webm" />

<meta property="og:video" content="my_url_video.flv" />
<meta property="og:video:type" content="application/x-shockwave-flash" /> 
```

另外，为了使用 jwplayer，我在同一个 php 视图中有这个脚本：

```
<script type='text/javascript'>
    jwplayer('container').setup({
        height: 480,
        width: 640,
        playlist:[{
            sources: [
                 { file: "my_url_video.webm" },
                 { file: "my_url_video.mp4" }, 
                 { file: "my_url_video.flv" } 
            ]
        }]
    });
</script> 
```

问题是当我发布视频时，只能在所有浏览器中使用 flash，我无法在 Mozilla 上使用 HTML5、平板电脑或 ipad 上观看。

我不知道元标记是否正常或可能是什么问题？

# multithreading - EndDialog 不能在线程中调用？

> ID：14586240
> 
> 赞同：3
> 
> 时间：2013-01-29T15:21:21.487
> 
> 标签：multithreading, winapi

我想在线程结束时关闭模态对话框。我知道怎么用`PostMessage`or `SendMessage`，但是为什么不能直接调用`EndDialog`成员函数呢？如果我这样做，它会导致应用程序异常。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T16:21:49.737

EndDialog 需要从创建模态对话框的线程中调用，特别是对话框过程。听起来你想从另一个线程调用它。要从另一个线程关闭对话框，您需要发布一条消息，因为跨线程支持该消息。然后对话框可以响应消息并自行关闭。调用线程在销毁线程之前需要等待对话框关闭。

如果您想知道为什么会这样，那么大多数 USER API 函数都具有线程关联性。它们最初是以这种方式实现的，并不是为了支持跨线程使用而设计的。

# highcharts - 加载后的 HighStock chart.rangeSelector

> ID：14586241
> 
> 赞同：4
> 
> 时间：2013-01-29T15:21:30.080
> 
> 标签：highcharts, highstock

我知道如何在使用定义新图表时设置默认范围选择器

```
rangeSelector: {
    selected:0,
}, 
```

通过javascript加载新数据后是否可以更改此设置？

例如：

```
chart.series[0].setData(new data);
somethinghere rangeselector selected = 2; 
```

我可以使用范围极值来设置它，但这并没有突出显示按钮以向用户显示选择的日期范围，并且它会（我认为）为设置日期提供了一种更简洁的方式。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-30T14:51:27.723

可以通过捕获按钮事件并添加状态来实现。

[http://jsfiddle.net/jGALb/](http://jsfiddle.net/jGALb/)

```
 chart.rangeSelector.buttons[4].setState(2);
 chart.rangeSelector.clickButton(4,4,true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-11T17:42:13.753

我对这个答案有一些问题。查看 Highstock 最新稳定版本的源代码，这里是 clickButton 签名的参数文档，

```
@param {Number} i The index of the button
@param {Object} rangeOptions
@param {Boolean} redraw 
```

我的示例是用于显示过去 12 小时的自定义按钮。

```
var rangeOptions = {
    type: "hour",
    count: 12
};

chart.rangeSelector.clickButton(2,rangeOptions,true); 
```

注意，我也不需要设置按钮状态。

# ruby-on-rails - 如何反转轨道生成 ：安装？

> ID：14586244
> 
> 赞同：1
> 
> 时间：2013-01-29T15:21:35.530
> 
> 标签：ruby-on-rails, gem

运行此命令行时，会创建许多文件有什么想法可以扭转这种情况吗？回到以前的提交将是一个解决方案，但这也会删除其他文件......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:25:46.787

```
rails destroy <gemname>:install 
```

通常有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:32:41.457

您卸载 gem 也可以，或者您可以从 Gemfile 中删除 gem 名称并进行捆绑安装

# ios - 从 django web 应用程序下载 sqllite 数据库并在 iOS 中使用？

> ID：14586247
> 
> 赞同：1
> 
> 时间：2013-01-29T15:21:42.627
> 
> 标签：ios, django, sqlite

我正在为办公室大厅开发一个特定于站点的安装，它将在 6 个 iPad 上显示内容。安装有几兆字节的数据，这些数据将由 django webapp 管理。我正在考虑从网络应用程序获取内容数据的不同策略。到目前为止，我只是将数据转储为 xml 格式，并通过从 iPad 到内容服务器的单个 http 请求获取它。然后我将所有内容加载到 iPad 上的内存中。

我开始担心随着内容量的增加我可能会遇到内存问题，并且将整个数据库存储在内存中将无法正常工作。下一步自然是考虑 iPad 上的数据库。我将 sqllite 用于内容服务器。在我看来，简单地下载整个数据库文件本身并直接从 iPad 查询它可能是可行的。

**建议的方法**

每晚从 django 内容服务器下载实际的 sqllite 数据库文件到办公室大厅安装中使用的六台 iPad 中的每台。

**我喜欢这种方法的地方：**

*   这可能真的很简单。它从系统中删除了整个 Web 服务层。
*   它很好地防止了网络问题。如果网络不可用，最糟糕的问题是 iPad 显示陈旧数据，而如果系统依赖于网络，则没有内容。

**我不喜欢这种方法的事情**

*   我不确定如何安全地下载文件。如何确保我正在下载的文件处于有效状态，并且在有人更新它时我没有下载？
*   我从来没有听说过有人这样做，甚至没有考虑过这样做。似乎它远非尝试和真实。

**我的问题**

*   谁能想到为什么这是一个坏主意的原因？
*   如何安全地下载 sqllite 文件并确信它处于有效状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:28:30.727

你为什么不创建一个同步系统——也许用 JSON。

我以前做过这样的事情——我在站点上有一个中央存储库服务器，它正在运行我的 Django Web 应用程序。不同的 iPad 会定期与 Web 应用程序的数据库同步，以确保它们的本地数据与服务器数据匹配，如果不匹配，它将通过 json 更新。

在 iPad 本身上，我使用了 phonegap 的 SQLITE 语法，它非常适合存储客户端数据。但关键是通过 json 将此数据库同步到中央存储库的数据库 - 而不是将 SQLite db 物理移动到 ipad。

# c++ - c ++使用ASCII将字符转换为整数

> ID：14586248
> 
> 赞同：1
> 
> 时间：2013-01-29T15:21:45.120
> 
> 标签：c++, ascii

我正在开发一个小 c++ 项目，该项目接收来自用户的 char 数组输入。根据值，我将其转换为 int。我知道有更好的方法可以做到这一点，但我想我会尝试通过 ASCII 将它转换为以后允许其他用途。我当前的转换代码是：-

```
int ctoi(char *item){
    int ascii, num = 0;
    ascii = static_cast<int>(item[0]);
    if(ascii >= 49 && ascii <=57){
        num = ascii - 48;
    }else{
        return 0;
    }

    ascii = static_cast<int>(item[1]);
    if(ascii >= 48 && ascii <=57){
        num = num * 10;
        num = num + (ascii - 48);
    }else{
        return 0;
    }
    return num;
} 
```

它在 main 函数中接收到 char 数组 item[2] 的输入，并将其传递给上面的转换函数。该函数将第一个字符转换为 ASCII，然后将 ASCII 的十进制值转换为 num，如果它在 1 到 9 之间，然后将第二个字符转换为 ASCII，如果它在 0 到 9 之间，它将 num 中的值乘以 10 (移动一个单位）并添加 ASCII 值的十进制值。在任何时候它都可能失败，而是返回值 0。

当我在收到一个值后计算函数并在控制台中运行此代码时，它适用于单个数字（1 - 9），但是当我尝试使用两位数时，它会重复数字，例如 23，它将输出 2233。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T23:05:00.483

我想知道您如何将输入读入两个字符的数组。请注意，习惯上以空字符来终止此类字符串，从而只留下一个用于实际输入。为了在 C++ 中读取字符串，请使用以下代码：

```
std::string s;
std::cin >> s; 
```

或者，对于整行，使用这个：

```
std::string line;
getline(std::cin, line); 
```

无论如何，这些都是任何 C++ 文本中解释的基础知识。去读一读，这是不可避免的！

# angularjs - 在指令中使用 ngOptions

> ID：14586249
> 
> 赞同：6
> 
> 时间：2013-01-29T15:21:47.383
> 
> 标签：angularjs, angularjs-directive

我有以下穿梭箱指令：

```
<shuttle-boxes ng-options="item for item in itemList" ng-model="myModel" /> 
```

我的模板如下所示：

```
template: '<div class="shuttle-boxes">' +
        '<select multiple="multiple" class="shuttle-boxes-left"></select>' +
        '<button class="shuttle-boxes-btn" type="button"><i class="icon icon-arrow-right"></i></button>' +
        '<button class="shuttle-boxes-btn" type="button"><i class="icon icon-arrow-left"></i></button>' +
        '<select multiple="multiple" class="shuttle-boxes-right"></select>' +
        '</div>' 
```

我想要做的是从 ng-options 中继器中获取`<shuttle-boxes>`并使用它来填充`<select class="shuttle-boxes-left">`.

我试图做到这一点的方法不起作用只是将 ng-options 属性复制到选择列表中，如下所示：

```
var availableList = cElement.find('.shuttle-boxes-left'),
        repeater = cAttrs.ngOptions;

    availableList.attr('ng-options', repeater); 
```

这是小提琴：http: [//jsfiddle.net/dkrotts/tHTAY/1/](http://jsfiddle.net/dkrotts/tHTAY/1/)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T15:50:44.717

我建议您只将 itemList 传递给指令（和 myModel）并将 ng-options 放入模板中：

```
 <shuttle-boxes items="itemList" ng-model="myModel"></shuttle-boxes> 
```

指示：

```
myApp.directive('shuttleBoxes', function($timeout) {
    return {
        restrict: 'E',
        scope: { items: '=', ngModel: '='},
        template: '<div class="shuttle-boxes">' +
            '<select multiple="multiple" class="shuttle-boxes-left" 
               ng-options="item for item in items" ng-model="ngModel"></select>' +
            '<button class="shuttle-boxes-btn" type="button">' +
            '<i class="icon icon-arrow-right"></i></button>' +
            '<button class="shuttle-boxes-btn" type="button">' +
            '<i class="icon icon-arrow-left"></i></button>' +
            '<select multiple="multiple" class="shuttle-boxes-right"></select>' +
            '</div>',
        replace: true
    }
}); 
```

[小提琴](http://jsfiddle.net/mrajcok/qUhVm/)。

# oracle - 如何从 Pl/SQL 中的存储函数返回临时 CLOB 实例？

> ID：14586253
> 
> 赞同：4
> 
> 时间：2013-01-29T15:21:53.063
> 
> 标签：oracle, plsql, clob

我的存储函数使用以下方法创建临时 LOB 实例：`Dbms_Lob.CreateTemporary(BUFFER, TRUE, Dbms_Lob.SESSION);`where `BUFFER`is a local `CLOB`variable。之后，该函数会填充`BUFFER`一些数据并将其返回。

`Dbms_Lob.CreateTemporary`在我的情况下，持续时间参数是`Dbms_Lob.SESSION`，但根据[oracle 文档](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_lob.htm#i1015757)：

> **传递给 dbms_lob.createtemporary()**的持续时间参数****是一个提示**。新临时 LOB 的持续时间与 PL/SQL 中定位器变量的持续时间相同。例如，在前面的程序块中，程序变量a具有驻留帧的持续时间。因此，在块结束时， a 的内存将在函数结束时被释放。**

 **所以`BUFFER CLOB`离开功能块后可能会被Oracle破坏。我可以看到，在某些情况下，当 BUFFER 超过 32K 时，我无法读取从 Java（JDBC）端以这种方式返回的值。

有没有其他方法可以从函数返回临时 CLOB 实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T13:01:23.047

你在评论中说：

> `clob.getSubString(0, clob.length())`throws: `java.sql.SQLException: Invalid argument(s) in call at oracle.sql.CLOB.getSubString(CLOB.java:236)`while`clob.length()` 返回我的 clob 的实际长度

的文件[`getSubString`](http://docs.oracle.com/javase/6/docs/api/java/sql/Clob.html#getSubString%28long,%20int%29)指出：

> pos - 要提取的子字符串的第一个字符。第一个字符位于位置 1。

使用一个简单的函数来生成和返回一个 CLOB，我可以通过 JDBC ( `ojdbc5`or `ojdbc6`) 毫无问题地检索它，无论是使用`getCLOB()`or `getString()`。但是，如果我尝试将`Oracle.sql.CLOB`检索到的 with分配`getCLOB`给`String`using

```
String x = getSubString(0, clob.length()); 
```

然后我也得到了`Invalid argument(s) in call`错误。只需将其更改为：

```
String x = getSubString(1, clob.length()); 
```

作品。所以它似乎与函数中的临时分配或CLOB大小无关。我不明白为什么你对较小的 CLOB 没有问题 - 如果它们很小，也许你的逻辑没有达到这个目标？

与此同时，您已经解决了这个问题`clob.getCharacterStream().read()`，所以现在这可能有点无关紧要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T11:34:02.357

我创建了一个函数来返回一个带有随机生成数据的 clob，长度为 200k 个字符。

```
create function f_clob
return clob is
   l_clob      CLOB := EMPTY_CLOB;
   l_len       BINARY_INTEGER;
   l_content   VARCHAR2(32000);
BEGIN
   dbms_lob.createtemporary(l_clob, TRUE);
   dbms_lob.open(l_clob, dbms_lob.lob_readwrite);
   --
   for i in 1..100
   loop
      l_content := dbms_random.string('A', 2000);
      l_len := length(l_content);
      dbms_lob.writeappend(l_clob, l_len, l_content);
   end loop;
   dbms_lob.close(l_clob);
   --
   return l_clob;
end f_clob; 
```

然后我调用函数：

```
select to_char(substr(f_clob, 1, 200)) clob_chunk
from  (
   select 1
   from dual
   union
   select 2
   from dual) 
```

结果我总是把数据拿出来。我想知道为什么你的函数没有返回数据。**

# c# - ActiveX VLC 播放器事件不起作用

> ID：14586257
> 
> 赞同：8
> 
> 时间：2013-01-29T15:22:00.207
> 
> 标签：c#, .net, wpf, activex, vlc

[我已将**ActiveX VLC 插件合并到 WPF 应用程序**中。](http://zahidakbar.wordpress.com/2011/06/27/using-the-vlc-activex-control-in-wpf/)VLC 插件工作正常。

```
AxVLCPlugin   vlc = new AxVLCPlugin();
vlc.MediaPlayerEncounteredError += vlc_MediaPlayerEncounteredError;
vlc.MediaPlayerOpening += vlc_MediaPlayerOpening;
vlc.MediaPlayerBuffering += vlc_MediaPlayerBuffering;
vlc.MediaPlayerEndReached += vlc_MediaPlayerEndReached;
 //
// Other code 
// like    windowsFormsHost1.Child = vlc; and etc
vlc.addTarget(videoURL, null, AXVLC.VLCPlaylistMode.VLCPlayListReplace, 1);
vlc.play(); 
```

但是有些 VLC 的所有事件根本不起作用。

我的意思是这些事件：

```
vlc.MediaPlayerEncounteredError += vlc_MediaPlayerEncounteredError;
vlc.MediaPlayerOpening += vlc_MediaPlayerOpening;
vlc.MediaPlayerBuffering += vlc_MediaPlayerBuffering;
vlc.MediaPlayerEndReached += vlc_MediaPlayerEndReached;

 void vlc_MediaPlayerEndReached(object sender, EventArgs e)
        {
            Debug.WriteLine("[P] - StreamingVideo -  END REACHED + " + DateTime.Now);
        }

        void vlc_MediaPlayerBuffering(object sender, DVLCEvents_MediaPlayerBufferingEvent e)
        {
            Debug.WriteLine("[P] - StreamingVideo -  BUFFERING + " + DateTime.Now);
        }

        void vlc_MediaPlayerOpening(object sender, EventArgs e)
        {
            Debug.WriteLine("[P] - StreamingVideo -  OPENING + " + DateTime.Now);
        }

        void vlc_MediaPlayerEncounteredError(object sender, EventArgs e)
        {
            Debug.WriteLine("[P] - StreamingVideo -  ERROR + " + DateTime.Now);
        } 
```

他们没有开火。（当然，我在这些方法中设置了断点。）

我真正需要的是捕获流错误并再次重新应用*videoURL*。所以我正在试验一些事件，看看我可以使用哪些事件来实现这个目标。

任何线索为什么？

PS此链接也无助[于VLC播放器事件捕获](https://stackoverflow.com/questions/2911088/vlc-player-event-catch)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T17:57:50.320

我不认为你做错了什么。它似乎; 由于某种原因（即使在最新版本的 activeX 中），这些事件未实现（或未实现）。我已经[**读到**](http://forum.videolan.org/viewtopic.php?f=16&t=77515&start=20)这些事件在某些浏览器插件版本中要么太错误要么根本没有触发。

但是，它仍然有 3 个您可以信赖的有用且有效的事件。
**Events Firing:** `playEvent`和`pauseEvent`Events `stopEvent`
**Not Firing:**`MediaPlayer`所有以...开头的事件

无论如何，下面的代码适用于我提到的事件：

```
 AxVLCPlugin vlc;
    public MainWindow()
    {
        InitializeComponent();

        vlc = new AxVLCPlugin();
        windowsFormsHost1.Child = vlc;

        vlc.pauseEvent += new EventHandler(vlc_pauseEvent);
        vlc.playEvent += new EventHandler(vlc_playEvent);
        vlc.stopEvent += new EventHandler(vlc_stopEvent);
    }

    void vlc_playEvent(object sender, EventArgs e)
    {
        Debug.WriteLine("playEvent fired!");
    }

    void vlc_pauseEvent(object sender, EventArgs e)
    {
        Debug.WriteLine("pauseEvent fired!");
    }

    void vlc_stopEvent(object sender, EventArgs e)
    {
        Debug.WriteLine("stopEvent fired!");
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        OpenFileDialog ofd = new OpenFileDialog();
        ofd.ShowDialog();
        if (ofd.FileName != "")
        {
            Debug.WriteLine(ofd.FileName);
            vlc.addTarget("file:///" + ofd.FileName, null, AXVLC.VLCPlaylistMode.VLCPlayListReplaceAndGo, 0);
            vlc.play();
        }
    } 
```

不过，这些事件不会通知您任何流式传输错误。IMO，你唯一能做的就是；try-catch 你执行的地方`vlc.addTarget(...)`和`vlc.play()`. 事先检查 URL 是否有效（也不要忘记`"file:///"`在最新版本的插件中包含文件路径的前面）。并且仅当捕获的错误与不存在的文件或无效路径等有关时才重新应用 videoURL（如您所愿）。

**或者**您可以尝试其他一些包装器/自定义库：

*   [用于 WinForm 和 WPF 的 VLC DotNet](http://vlcdotnet.codeplex.com/)
*   [更多在这个页面](http://wiki.videolan.org/C_Sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T15:46:07.000

不应该是这样的：

```
vlc.MediaPlayerEncounteredError += new MediaPlayerEncounteredErrorEventHandler(vlc_MediaPlayerEncounteredError); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-17T01:28:10.940

右键单击 VLC，从设计 → 属性 → 事件（Thunder 图标） →选择`axVLCPlugin21_MediaPlayerend`。`MediaPlayerEndReached`

有关更多详细信息，请参见图片：

[![](../Images/81a24257225699d04eb659f667f9ec50.png)](https://i.stack.imgur.com/9ch9l.jpg)

# macos - gcc 不想在 mac 上使用 AVX

> ID：14586258
> 
> 赞同：2
> 
> 时间：2013-01-29T15:22:03.053
> 
> 标签：macos, gcc, osx-mountain-lion, avx

所以我有这个全新的带有英特尔酷睿 I7 处理器的 mac book `sysctl machdep.cpu.features`pro

machdep.cpu.features：FPU VME DE PSE TSC MSR PAE MCE CX8 APIC SEP MTRR PGE MCA CMOV PAT PSE36 CLFSH DS ACPI MMX FXSR SSE SSE2 SS HTT TM PBE SSE3 PCLMULQDQ DTES64 MON DSCPL VMX SMX EST TM2 SSSE3 CX16 TPR PDCM SSE4.1 SSE4.2 xAPIC POPCNT AES PCID XSAVE OSXSAVE TSCTMR AVX1.0 RDRAND F16C

然而，当我运行 gcc (4.7.2 macports) 时，它没有 #define `__AVX__`。怎么了？(Mac OS X 10.8.2)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:46:22.417

I depends on the compiler flags you are using wether `__AVX__` and `__SSEx__` will be defined.

So if you are using `g++ -march=corei7avx` the macro will be defined. `-march=native` should also suffice, if gcc is able to detect you cpu correctly (it usually is).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T08:32:39.393

在运行 10.6.8 的 i7 MBP 13"（2010 年中）上，当前的 MacPorts gcc 4.7.3 和 4.8.2在指定 -mavx 时确实定义了**AVX** 。但是，它们使用 boost::simd（可通过 www. metascale.org). Macports clang-3.3 没有这样的问题，但编译时间更长（有或没有 -mavx，与没有 -mavx 的 gcc >= 4.7 相比）。

# java - JSF：a4j：轮询和性能损失

> ID：14586259
> 
> 赞同：1
> 
> 时间：2013-01-29T15:22:03.577
> 
> 标签：java, performance, jsf, jboss, richfaces

我有一个应用程序，它显示多个数据网格（在同一屏幕上）构建在 JSF 2.0 和 EJB 上，在 JBoss 7.1 上运行。每个网格使用`<a4j:poll>`RichFaces 4.2 中的标签每 2.5 秒刷新一次。页面加载后一切正常。但是，几分钟后，应用程序的性能急剧下降。我的意思是应用程序对操作的反应越来越慢，这会触发对服务器的 JSF ajax 请求。无论浏览器如何，都会发生这种情况（但是，在 Chrome 中它比其他浏览器更晚）。我想知道问题可能出在哪里：在浏览器中、在 JSF 实现中还是在应用程序本身中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:06:05.593

好的，我找到了这种行为的原因。这是由 JSF 的 AJAX 请求队列引起的。轮询请求的处理时间足以与其他轮询下一个请求重叠。结果，未决的 AJAX 请求堆积在队列中，因此阻塞了下一个请求 - 依此类推。我通过使用一个庞大的请求来刷新需要刷新的所有内容来解决这个问题。

无论如何 - 感谢您的建议和您的时间。

# android - android - 如何通过代码在果冻豆中创建多个用户配置文件？

> ID：14586265
> 
> 赞同：2
> 
> 时间：2013-01-29T15:22:23.017
> 
> 标签：android, profile, android-4.2-jelly-bean

现在在 Jelly beans 中，您可以添加多个用户配置文件，我希望在我的应用程序中使用此功能，但想以编程方式创建/添加多个配置文件。

可能吗？

帮助我摆脱困境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:25:07.387

是的，这是可能的，前提是设备已植根并且仅运行 4.1。即使这样，它也是一种依赖于在 root shell 中执行终端命令的非官方方法。

最初发现此功能时，我编写了用户管理应用程序，后来为了帮助他人而将其开源。[你可以在这里](https://github.com/RaghavSood/UserManagement)找到 GitHub 上的代码。

除了在 r​​oot shell 中执行命令之外，没有其他方法可以实现此 AFAIK。Android SDK 不提供任何用于创建额外用户的 API。

# ruby-on-rails - Rails - 为 JS Flot Graphs 自定义 RABL JSON 输出

> ID：14586268
> 
> 赞同：0
> 
> 时间：2013-01-29T15:22:31.970
> 
> 标签：ruby-on-rails, json, api, flot, rabl

我正在为我的应用程序创建一个 API。为了创建我的 API，我使用 RABL，并且我计划将我的 API 数据用于[JS Flot Charts](http://www.flotcharts.orgs)。Flot的输入结构如下：

```
{
        "label":"Total Orders",
        "dataBar":[
            [
                1325376000000,
                45023
            ],
            [
               1325462400000,
                23090
            ],
            [
                1325548800000,
                49002
            ],
            [
                1325635200000 ,
                32909
            ],
            [
                1325721600000,
                80211
            ]
        ]
    } 
```

但是 RABL 输出以下 JSON：

```
[{"order":{"total":"120.0","store_id":244234563,"completed_at":1358432510000}},{"order":{"total":"120.0","store_id":244234563,"completed_at":1358432513000}},{"order":{"total":"120.0","store_id":244234563,"completed_at":1358432515000}}] 
```

我应该如何修改 RABL 的结构以便在 Flot 中使用它？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:25:40.387

我对 RABL 一无所知，但它是 javascript 方面的 jquery 单行代码：

```
var data = [{"order":{"total":"120.0","store_id":244234563,"completed_at":1358432510000}},{"order":{"total":"120.0","store_id":244234563,"completed_at":1358432513000}},{"order":{"total":"120.0","store_id":244234563,"completed_at":1358432515000}}]
var flotData = $.map(data, function(i){ return [[i.order.completed_at, parseInt(i.order.total)]] }); 
```

# vb.net - 富文本框在另存为txt文件时将所有行合二为一？

> ID：14586270
> 
> 赞同：0
> 
> 时间：2013-01-29T15:22:36.703
> 
> 标签：vb.net, text, line, richtextbox

我在 vb.net 中有一个富文本框，其中包含几行文本，但是当我尝试将文本保存到 .txt 文件时，所有行都合并为一个？？？

我该如何克服呢？

我所做的尝试是：

```
 Dim MYLINES As Object

        For Each MYLINES In RichTextBox1.Text
        objWriter.WriteLine(MYLINES.ToString & Environment.NewLine)
    Next

objWriter.Close() 
```

然而，这只是将每个字符放在不同的行上......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:30:24.167

将其保存为 .RTF 文件（而不是 .TXT），它可以直接处理换行符。那是一个选择。

或者您可以单独编写这些行：

```
Dim sw As New System.IO.StreamWriter(sFileName)

For Each sLine as String in TextBox1.Lines
    sw.WriteLine(sLine)
Next

sw.Close() 
```

该方法`WriteLine`已经在末尾添加了换行符。它或多或少与：

```
 .Write(sLine & Enviroment.NewLine()) 
```

# repeater - 如何在 asp:Repeater 中插入 asp:TabPanel？

> ID：14586275
> 
> 赞同：0
> 
> 时间：2013-01-29T15:22:49.657
> 
> 标签：repeater, tabpanel

当我尝试执行下面的代码时，它给了我错误“呈现控件时出错。检查以确保所有属性都有效”。内部中继器在选项卡容器内工作正常。但是外部不允许在其中有一个选项卡面板。

选项卡容器在 asp.net 工具箱中不可用，因此我安装了 Ajax 工具包并将其添加到 Visual Studio 并按如下方式引用该程序集。

```
<%@ Register Assembly="AjaxControlToolkit, Version=1.0.11119.25966, Culture=neutral,PublicKeyToken=28f01b0e84b6d53e" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>
<asp:Repeater ID="ProjectRepeater" runat="server">
   <ItemTemplate>

    <cc1:TabContainer ID="TestTabContainer" runat="server">
            <cc1:TabPanel ID="TestTabPanel" HeaderText="technologies" runat="server">
             <ContentTemplate>
                <asp:Repeater id="SkillsRepeater" runat="server">
                        <ItemTemplate>
                            <div class="project-technologies" id="SkillZone" runat="server">
                                <a id="skill" href='<%# "http://vingo/Pages/projectresults.aspx?k="+DataBinder.Eval(Container.DataItem, "Skill")%>' target="_blank"><%# DataBinder.Eval(Container.DataItem, "Skill")%></a>
                            </div>
                        </ItemTemplate> 
                    </asp:Repeater>
             </ContentTemplate>
            </cc1:TabPanel>
          </cc1:TabContainer> 
```

**编辑：**外部中继器代码

```
<asp:Repeater ID="P" runat="server"> 
   <ItemTemplate> 
      <cc1:TabContainer ID="TTC" runat="server"> 
         <cc1:TabPanel ID="TTP" HeaderText="t" runat="server"> 
            <ContentTemplate> 
               <asp:Repeater id="A" runat="server">
                  <ItemTemplate>
                     <%--Code--%> 
                  </ItemTemplate> 
               </asp:Repeater> 
            </ContentTemplate> 
         </cc1:TabPanel> 
      </cc1:TabContainer> 
   </ItemTemplate> 
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T05:36:03.897

我可以使用下面的代码代替 asp.net 中继器，它完成了 asp.net 中继器的预期工作，并且灵活性比使用 asp:Repeaters 时高得多

```
function JsonPCallBack(result) {

for (var technology in result) {
    $('body').append('<div OuterDiv id=OuterDivId><div class=project-technologies id=SkillZone><a id=skill href=http://vingo/Pages/projectresults.aspx?k=' +        technology + 'target=_blank></a></div>');

}
} 
```

# iphone - 是否可以多次启动 NSURLConnection ？

> ID：14586282
> 
> 赞同：0
> 
> 时间：2013-01-29T15:23:19.563
> 
> 标签：iphone, objective-c, nsurlconnection

我正在设置一个类来管理一些数据的下载。由于规范，它必须多次下载（因为它可能会改变）。我无法改变这一点，但我有一个问题。

如果我创建一个专门用于下载数据的类，那么它就是一个`NSURLConnectionDataDelegate`等......

我可以将其存储`NSURLConnection`为属性并将其设置在 init 中，然后每次都重用相同的连接吗？

或者我应该`NSURLRequest`每次都在新连接中存储并使用相同的请求？

我问的原因是`NSURLConnection`国家的文档......

```
"You cannot reschedule a connection after it has started." 
```

我不是 100% 确定这意味着什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:26:55.330

是的，只要您每次都有一个创建 NSURLConnection 的唯一对象。这只是说明您不能让相同的对象“重新安排”连接，中间连接。

运行一个简单的测试永远不会受到伤害。

# asp.net - Active Directory 搜索以获取用户域

> ID：14586288
> 
> 赞同：1
> 
> 时间：2013-01-29T15:23:34.263
> 
> 标签：asp.net, vb.net, active-directory, ldap, vb.net-2010

我正在尝试查询用户的活动目录以获取详细信息列表：1.名字/姓氏2.电子邮件3.用户名4.域

我能够得到除域名之外的所有内容。这是我的代码：

```
 Dim oroot As DirectoryEntry = New DirectoryEntry("GC://ldap.someCompany.com")
    Dim osearcher As DirectorySearcher = New DirectorySearcher(oroot)
    Dim result As SearchResult

    osearcher.Filter = String.Format("(&(SAMAccountName={0}))", "myUsername")
    osearcher.PropertiesToLoad.Add("cn")
    osearcher.PropertiesToLoad.Add("SAMAccountName")   'Users login name  
    osearcher.PropertiesToLoad.Add("givenName")    'Users first name  
    osearcher.PropertiesToLoad.Add("sn")   'Users sur name  
    osearcher.PropertiesToLoad.Add("mail")   'Email address

    result = osearcher.FindOne

    Try
        myUser.UserID = result.Properties("cn").Item(0)
        myUser.Domain = ""
        myUser.EmailAddress = result.Properties("mail").Item(0)
        myUser.FirstName = result.Properties("givenName").Item(0)
        myUser.LastName = result.Properties("sn").Item(0)
        myUser.Domain = result.Properties("displayName").Item(0)

    Catch ex As Exception
        Return Nothing
    End Try 
```

这将返回此字符串：GC://ldap.someCompany.com/CN=FirstName M LastName,OU=Employees,OU=Domain Users,DC=val1,DC=val2,DC=com

所以，我有两个问题。一、如何获取用户的域名？它似乎在 DC= （我有 val1 的地方） 其次，有没有办法加快搜索速度？现在，运行查询大约需要 10 秒。

我正在使用 .net 4.0 和 Visual Studio 2010 感谢您的帮助

杰森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:30:36.587

从右侧开始并阅读 DC 组件，然后您就拥有了该帐户的领域/域。请参阅[RFC2247](http://www.ietf.org/rfc/rfc2247.txt)。

# objective-c - 在 Cocoa 中设置所有 Spaces 的桌面背景

> ID：14586289
> 
> 赞同：16
> 
> 时间：2013-01-29T15:23:35.370
> 
> 标签：objective-c, cocoa, desktop

我正在编写一个小应用程序来更改您的桌面背景。如果用户只使用一个空间，那么一切都很好，但是当他有多个空间时，应用程序只能在当前活动空间上运行。

我正在使用此代码

```
[[NSWorkspace sharedWorkspace] setDesktopImageURL:currentImageURL 
                                        forScreen:screenToChange 
                                          options:screenOptions 
                                            error:&error] 
```

改变桌面背景，看起来没有办法改变另一个空间的背景。

我只找到了几年前的答案，没有人问过这个具体的问题。有没有办法在objective-c中做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-30T08:36:50.653

尽管没有用于更改空间背景的公共 API，但有一些方法可以做到这一点。您正在寻找的关键字是`com.apple.desktop.plist`which is inside`~/Library/Preferences/`那是存储所有当前空间的所有当前背景的 plist。如果您想使用objective-c，您可以根据自己的喜好更改此文件，或者您可以使用[此处](https://web.archive.org/web/20130307194450/https://arfore.com/2012/07/05/changing-wallpaper-on-all-spaces-in-mac-os-x-10-7/)和[此处](https://apple.stackexchange.com/questions/98224/changing-the-background-image-in-all-spaces)建议的解决方案之一。如果您的目标是 Mavericks，壁纸数据在这里：`~/Library/Application\ Support/Dock/desktoppicture.db"`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-06T06:06:23.257

```
Setting the desktop background on all Spaces in Cocoa 
```

如果用户想为多个空间设置桌面背景，请尝试以下代码：-

有关更多信息，[请参阅此](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/UserDefaults/Introduction/Introduction.html#//apple_ref/doc/uid/10000059i)

```
NSString* path = @"/Users/abc/Desktop/yourImg.png";

NSUserDefaults* def = [NSUserDefaults standardUserDefaults];
NSMutableDictionary* desktopDict = [NSMutableDictionary dictionaryWithDictionary:[def persistentDomainForName:@"com.apple.desktop"]];
NSMutableDictionary* bgDict = [desktopDict objectForKey:@"Background"];
NSMutableDictionary* spaces = [bgDict objectForKey:@"spaces"];
[spaces enumerateKeysAndObjectsUsingBlock:^(NSString* key, NSMutableDictionary* obj, BOOL *stop) {
    [obj enumerateKeysAndObjectsUsingBlock:^(id key, NSMutableDictionary* prefs, BOOL *stop) {
        [prefs setObject:path forKey:@"ImageFilePath"];
        [prefs setObject:path forKey:@"NewImageFilePath"];
        [prefs setObject:@"Never" forKey:@"Change"];
    }];
}];
[def setPersistentDomain:desktopDict forName:@"com.apple.desktop"]; 
```

# android - 将 Microchip 卡连接到 Android 平板电脑的最佳方式

> ID：14586291
> 
> 赞同：1
> 
> 时间：2013-01-29T15:23:37.760
> 
> 标签：android, bluetooth, usb, microchip, wifi-direct

我使用[Anothem](http://www.anothem.net/archives/2010/10/15/android-usb-connection-to-pc/)的指南通过 ADB 将安卓平板电脑 USB 连接到 Windows。现在我需要进行下一步并将微芯片卡连接到平板电脑。

我得到了这 2 张卡用于 USB 测试：
[1\. Microcip FS USB](http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=1406&dDocName=en021940)
[2\. 适用于 Android 的 Microcip PIC24F 附件开发入门套件](http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=1406&dDocName=en553673)

我可以将它们连接到计算机并测试 LED、开关等，但是当涉及到 android 平板电脑时，事情并不顺利。当我连接 2 号卡时，平板电脑注意到插入了一些 USB，但 Microchip 提供的软件无法识别驱动器，因此它失败了。当我连接 1 号（FS USB）时，什么也没有发生。它应该与电源有关，即使我为 FS USB 使用外部电源。

无论如何，我的问题是：将电子卡连接到 Android 平板电脑的“最佳（最安全）”方式是什么。据我所知，有 3 个选项：
**1\. USB：**存在库和兼容性问题
**2\. 蓝牙：**卡和平板电脑都需要外部蓝牙适配器
**3\. WiFi（直接）：**可能需要购买带 WiFi 的昂贵平板电脑直接在卡上也有一个 WiFi 适配器

你能告诉我将卡连接到平板电脑的最安全方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:16:57.923

USB：
+ 可以通过模拟器进行测试
+ 电缆总是比无线更安全
+ 更快
- 需要保持在 USB 电缆范围内
- 库和兼容性问题

蓝牙：
+ 没有电线
- 电池消耗
- 慢
- android 活动有很多问题 - 服务 - 客户端连接

所以我要使用USB（现在）

# asp.net - 将 combobox.selectedvalue 与字符串进行比较是一种好习惯吗？

> ID：14586295
> 
> 赞同：0
> 
> 时间：2013-01-29T15:23:40.923
> 
> 标签：asp.net, combobox, selectedvalue

我的网页中有一个组合框和几个文本框，根据组合框的选定值，我会将焦点设置到特定的文本框。以下是我的代码：

```
 if (cbo1.SelectedValue == "01")
            txt1.Focus();
        else
            txt2.Focus(); 
```

即使刚刚加载组合框并且没有选定项目，这也可以工作。我的问题是“这是一个好习惯吗？” 因为 SelectedValue 实际上是一个对象。通常我使用 cob1.SelectedValue.ToString()，但是当没有选中项时出现异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:26:37.617

好的做法是声明一个字符串常量：

```
private const string FIRST_FIELD_VALUE = "01";

(...)

    if (cbo1.SelectedValue.Equals(FIRST_FIELD_VALUE))
        txt1.Focus();
    else
        txt2.Focus(); 
```

否则，是的。我认为将字符串与字符串进行比较是一种很好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:27:36.647

添加这个条件

```
 if( cbo1.SelectedIndex > 0)
 {
       if (cbo1.SelectedValue == "01")
            txt1.Focus();
        else
            txt2.Focus();
 } 
```

# python - 强制转换为 Unicode：需要字符串或缓冲区，找到 xml.etree._ElementTree

> ID：14586296
> 
> 赞同：0
> 
> 时间：2013-01-29T15:23:41.857
> 
> 标签：python, xml-parsing, lxml

我是 python 新手，我收到以下错误。

```
$ python testrun.py 
Traceback (most recent call last):
  File "testrun.py", line 13, in <module>
    with open(tree, 'w') as file_handle:
TypeError: coercing to Unicode: need string or buffer, lxml.etree._ElementTree found 
```

使用此代码：

```
from lxml import etree
tree = etree.parse('testregression_config.xml')

for elem in tree.findall('.//xmpp'):
    #assert elem.attrib['name'] == 'test02'
    elem.attrib['name'] == 'test03'

for elem in tree.findall('.//xmpp-config'):
    #assert elem.text == 'QA'
    elem.text = 'Prod'

with open(tree, 'w') as file_handle:
    file_handle.write(etree.tostring(tree, pretty_print=True, encoding='utf8'))

<config>
  <logging/>
  <test-mode>false</test-mode>
  <test name="test02">
    <mail/>
    <test-system>0</test-system>
    <system id="0" name="suite1" type="regression">
      <temp-config>Prod</temp-config>
      <rpm>0.5</rpm>
      <cycles>3</cycles>
    </system>
    <system id="1" name="suite2" type="regression">
      <temp-config>Prod</temp-config>
      <rpm>0.5</rpm>
      <cycles>3</cycles>
    </system>
    <system id="2" name="suite3" type="regression">
      <temp-config>Prod</temp-config>
      <rpm>0.5</rpm>
      <cycles>3</cycles>
    </system>
    <system id="3" name="suite4" type="regression">
      <temp-config>Prod</temp-config>
      <rpm>0.5</rpm>
      <cycles>3</cycles>
    </system>
    <system id="4" name="suite5" type="regression">
      <temp-config>Prod</temp-config>
      <rpm>0.5</rpm>
      <cycles>3</cycles>
    </system>
  </test>
</config> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:27:04.603

在这一行

```
with open(tree, 'w') as file_handle: 
```

您将 lxml.etree._ElementTree 对象作为文件名传递。您可能错过了报价并打算

```
with open('tree', 'w') as file_handle: 
```

错误消息和回溯是不言自明的

**错误位置**：`with open(tree, 'w') as file_handle:`所以它与`open`语句有关

**错误信息**：`TypeError: coercing to Unicode: need string or buffer, lxml.etree._ElementTree found`

所以看起来我们正在传递`lxml.etree._ElementTree`而不是一个字符串到`open`. 当然，我们正在这样做，我们传递`tree`的不是字符串，而是`tree = etree.parse('testregression_config.xml')`，根据您文件中的第二条语句

# c# - 如何使用 iTextSharp PdfReader 从 PdfFile 获取 UserUnit 属性

> ID：14586315
> 
> 赞同：3
> 
> 时间：2013-01-29T15:25:05.763
> 
> 标签：c#, .net, pdf, itextsharp

我有一堆 PDF 文件——我按照要求将这些文件读入字节数组，然后将其传递给 iTextSharp PdfReader 实例。然后我想获取每个页面的尺寸（以像素为单位）。从我目前所读的内容来看，PDF 文件似乎是按点工作的——一个点是一个可配置的单元，存储在名为 UserUnit 的元素中的某种字典中。

将我的 PDF 文件加载到 PdfReader 中，我需要做些什么来获取每个页面的 UserUnit（显然它可能因页面而异），所以我可以获取以像素为单位的页面尺寸。

目前我有这个代码，它以“点”的形式获取每个页面的尺寸——猜想我只需要 UerUnit，然后可以将这些尺寸乘以得到像素或类似的东西。

```
//Create an object to read the PDF
PdfReader reader = new iTextSharp.text.pdf.PdfReader(file_content);

for (int i = 1; i <= reader.NumberOfPages; i++)
{
  Rectangle dim = reader.GetPageSize(i);
  int[] xy = new int[] { (int)dim.Width, (int)dim.Height };  // returns page size in "points"
  page_data[objectid + '-' + i] = xy;
} 
```

干杯!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T17:26:32.367

请允许我引用我的书：

iText in Action - 第二版，第 9 页：

> **常见问题解答** *PDF 文档中的度量单位是什么？*PDF 中的大多数度量都以用户空间单位表示。ISO-32000-1（第 8.3.2.3 节）告诉我们“默认用户空间（1/72 英寸）中单位大小的默认值与点 (pt) 大致相同，这是打印中广泛使用的单位行业。不完全相同；一点没有普遍的定义。” 简而言之，1 in. = 25.4 mm = 72 个用户单位（大致相当于 72 pt）。

在下一页中，我解释了可以更改用户单位的默认值，并添加了一个示例，说明如何使用具有不同用户单位的页面创建文档。

现在问你的问题：假设你有一个现有的 PDF，你如何找到使用了哪个用户单元？在回答这个问题之前，我们需要看一下 ISO-32000-1。

在 7.7.3.3 页面对象部分，您将在表 30，“页面对象中的条目”中找到 UserUnit 的描述：

> （可选；PDF 1.6）一个正数，应给出默认用户空间单位的大小，以 1⁄72 英寸的倍数表示。支持值的范围应取决于实现。默认值：1.0（用户空间单位为 1⁄72 英寸）。

此密钥在 PDF 1.6 中引入；你不会在旧文件中找到它。它是可选的，因此您不会总是在每页词典中都能找到它。在我的书中，我还解释了 UserUnit 键的最大值是 75,000。

**现在如何用 iTextSharp 检索这个值？**

您已经拥有`Rectangle dim = reader.GetPageSize(i);`返回 MediaBox。这可能不是页面可视部分的大小。如果为页面定义了 CropBox，查看器将显示比您所拥有的要小得多的尺寸`xy`（但您可能已经知道这一点）。

您现在需要的是页面字典，以便您可以检索 UserUnit 键的值：

```
PdfDictionary pageDict = reader.GetPageN(i);
PdfNumber userUnit = pageDict.GetAsNumber(PdfName.USERUNIT); 
```

大多数时候 userUnit 将是`null`，但如果不是，您可以使用`userUnit.FloatValue`.

# zope - Zope/Plone If 语句评估

> ID：14586317
> 
> 赞同：0
> 
> 时间：2013-01-29T15:25:09.920
> 
> 标签：zope, dtml

我的页面有两个非常不同的区域，我想根据 dtml-var 的设置在它们之间进行交换。

该变量在页面构建时加载，称为 GENDER_DESC。我可以用 显示内容`<dtml-var GENDER_DESC>`，GENDER_DESC 对象将是 null、Female 或 Male。

我想做的是有一个 dtml-if 语句，它根据该 GENDER_DESC 变量的状态切换内容。

我尝试过这样的事情：

```
<dtml-if expr="GENDER_DESC = 'Female'">
    <img src="student_photo?key=&dtml-SID;" style="height:140px; width:190px; border:5px solid black "/>
</dtml-if> 
```

以及该概念的其他一些变体，但我无法使语法正确。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:00:02.597

DTML 表达式必须是有效的 Python。在 Python 中，“=”是赋值运算符。您可能想测试相等性；运算符是“==”。

# arrays - 如果一组值不适合数组怎么办？

> ID：14586325
> 
> 赞同：0
> 
> 时间：2013-01-29T15:25:30.637
> 
> 标签：arrays, memory, vector, average, allocation

我正在用 C++ 编程。有一组很长的数字（超过 80 亿个元素）。所有数字都是实数（双精度型）。例如，我必须计算所有这些元素的平均值。如此多的数字不适合任何数组或向量。如何解决问题？可以解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T21:47:23.070

我猜你的号码在文件中或通过流访问。例如，通过一次读取 1024 个元素来一点一点地或逐块地进行计算。我认为您不需要将它们全部放入堆中。

# jquery - 在不同的项目（跨域）中通过 AJAX 调用在 jQuery 中使用 WCF 服务

> ID：14586328
> 
> 赞同：3
> 
> 时间：2013-01-29T15:25:37.790
> 
> 标签：jquery, ajax, json, wcf

我正在使用已下载的 WCF jQuery AJAX 调用示例。我可以运行它并让它在同一个项目中工作。当我从同一解决方案中的不同项目访问相同内容时，它什么也不做。以下是我正在调用的方法。

```
 function WCFJSON() {

        var parameter = "1234567890 (Cross Domain)";
        Type = "GET";
        Url = "http://localhost:52729/jQueryWebSite/Service.svc/Test?Id=" + parameter;
        Data = '{"Id": "' + parameter + '"}';
        ContentType = "application/json; charset=utf-8";
        DataType = "jsonp"; ProcessData = false;
        CallService();
    }

    $(document).ready(function () {
        WCFJSON();
    }); 
```

我在成功和失败方法中有 alert()。

当我直接在浏览器中运行 URL 时，它会返回结果。但如果我从另一个项目运行它，它什么也不做。没有警报，没有结果。

以下是我的服务正在运行的项目的 Web.Config；

```
<?xml version="1.0"?>
<configuration>
<appSettings/>
<connectionStrings/>
<system.web>
    <compilation debug="true">
        <assemblies>
            <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
            <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
            <add assembly="System.Data.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/></assemblies>
    </compilation>
    <authentication mode="Windows"/>
</system.web>
<system.codedom>
    <compilers>
      <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4" type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <providerOption name="CompilerVersion" value="v3.5"/>
        <providerOption name="WarnAsError" value="false"/>
      </compiler>
    </compilers>
  </system.codedom>
    <system.serviceModel>
        <behaviors>
            <serviceBehaviors>
                <behavior name="ServiceBehavior">
                    <serviceMetadata httpGetEnabled="true"/>
                    <serviceDebug includeExceptionDetailInFaults="true"/>
                </behavior>
            </serviceBehaviors>
            <endpointBehaviors>
                <behavior name="EndpBehavior">
                    <webHttp/>
                </behavior>
            </endpointBehaviors>
        </behaviors>
        <services>
            <service behaviorConfiguration="ServiceBehavior" name="Service">
                <endpoint address="" binding="webHttpBinding" contract="IService" behaviorConfiguration="EndpBehavior"/>
            </service>
        </services>
    </system.serviceModel>
</configuration> 
```

是否与 Web.config 或脚本中的任何错误有关？我遵循了许多方法并尝试了各种方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T06:16:27.407

我找不到跨域 WCF jQuery AJAX 调用的任何解决方案。因此，我在这里发布我是如何解决这个问题的。

在 AJAX 调用中使用 GET 方法时无需提供数据。

在 jQuery AJAX 调用（跨域）中使用 WCF 时必须考虑的事项；

1.  在 Visual Studio 的单独实例中运行 WCF 服务项目。不要将 WCF 服务项目和消费项目混合在一个实例中并立即运行。运行使用项目时，WCF 项目必须已经启动并运行。
2.  使用 DataType`jsonp`代替`json`.
3.  `crossDomainScriptAccessEnabled="true"`在 WCF 项目的 web.config中，确保您`<binding>`在`<system.serviceModel>\<bindings>\<webHttpBinding>`. 还将绑定名称设置为标记`bindingConfiguration`中的属性`<endpoint>`。

有关更多信息，以下是我的 jQuery AJAX 调用；

```
$.ajax({
   cache: false,
   type: "GET",
   async: false,
   processData: true,
   data: "",
   url: "http://localhost:64973/Account.svc/GetAccountByID/2000",
   contentType: "application/json",
   dataType: "jsonp",
   success: function (result) {
       alert(result);
       alert(result.GetAccountByIDResult);
   }
}); 
```

以下是我的 web.config；

```
<?xml version="1.0"?>
<configuration>
  <appSettings>
    <add key="aspnet:UseTaskFriendlySynchronizationContext" value="true" />
  </appSettings>
  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5"/>
  </system.web>
  <system.serviceModel>
    <bindings>
      <webHttpBinding>
        <binding name="crossDomain" crossDomainScriptAccessEnabled="true" />
      </webHttpBinding>
    </bindings>
    <behaviors>
      <endpointBehaviors>
        <behavior name="tSeyvaWCFEndPointBehavior">
          <webHttp />
        </behavior>
      </endpointBehaviors>
      <serviceBehaviors>
        <behavior name="tSeyvaServiceBehavior">
          <serviceMetadata httpGetEnabled="true" httpsGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <protocolMapping>
      <add binding="basicHttpsBinding" scheme="https" />
    </protocolMapping>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
    <services>
      <service name="tSeyva.WCF.Account" behaviorConfiguration="tSeyvaServiceBehavior">
        <endpoint address=""
                  behaviorConfiguration="tSeyvaWCFEndPointBehavior"
                  bindingConfiguration="crossDomain"
                  binding="webHttpBinding"
                  contract="tSeyva.WCF.IAccount">
        </endpoint>
      </service>
    </services>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
    <!--
        To browse web app root directory during debugging, set the value below to true.
        Set to false before deployment to avoid disclosing web app folder information.
      -->
    <directoryBrowse enabled="true"/>
  </system.webServer>
</configuration> 
```

# ios - iPhone 更新排队

> ID：14586332
> 
> 赞同：0
> 
> 时间：2013-01-29T15:25:47.787
> 
> 标签：ios, iphone, itunes

我计划在明年根据季节、事件等发布应用程序的多个更新。我知道您可以发布带有可用日期的更新，但我无法找到的是您可以在一年中将多个更新与单独的发布日期一起排队。

每个当然都具有最后一个的功能。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:28:28.363

对您的问题的简单回答是否定的。

原因是您无法将新版本添加到您的应用程序，直到您的应用程序状态为“准备出售”。

希望这些信息对你有帮助..

# sql - 如何在空表字段中放置“NULL”？

> ID：14586333
> 
> 赞同：-1
> 
> 时间：2013-01-29T15:25:51.820
> 
> 标签：sql

我正在连接到 SQL DB 以从表中获取一些信息并将其显示在我的一个网页上。SQL 表中的某些字段为*NULL*，但是当数据显示在我的页面上时，它只显示一个没有表边框等的空字段。

我想在那些空白字段中添加“ *NULL* ”这个词，但不知道你是怎么做的。我敢肯定这很简单，但我找不到任何东西可以告诉我如何做。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:27:08.060

假设您使用的是 MySQL，您可以使用[`COALESCE()`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)：

```
SELECT COALESCE(columnname, 'NULL') AS alias 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:33:30.147

另外的选择：

```
SELECT
  CASE when columnname is NULL then 'NULL' else columnname end AS alias
... 
```

# python - 如何从烧瓶（而不是模板）访问块？

> ID：14586335
> 
> 赞同：0
> 
> 时间：2013-01-29T15:25:56.363
> 
> 标签：python, flask, jinja2

这是我的笼统问题：

base.html：

```
<html>
  <head>
    {% if title %}
    <title>{{title}}</title>
    {% else %}
    <title>test</title>
    {% endif %}
  </head>
  <body>
    {% block content %} {% endblock %}
  </body>
</html> 
```

如何编写可以直接创建块的函数？也许是这样的：

```
@app.route("/foo")
def foo():
    content = "<h1>this is foo page</h1>"
    return render_html("base.html", content = content) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:52:51.603

您正试图在您的[Jinja2](http://jinja.pocoo.org/)模板中呈现 HTML**而不进行** [HTML 转义](http://jinja.pocoo.org/docs/templates/#html-escaping)。默认情况下，Jinja2 配置为自动转义您插入的所有变量。

这意味着

```
<h1>this is foo page</h1> 
```

实际上呈现为

```
&lt;h1&gt;this is foo page&lt;/h1&gt; 
```

这样您就不会在您无意的页面中意外使用 HTML。这对于防止[跨站点脚本 (XSS)](http://en.wikipedia.org/wiki/Cross-site_scripting)攻击**非常重要。**

如果您打算绕过这种自动转义，并故意将 HTML 插入到您的模板中，您必须确保您知道自己在做什么——永远不要让未转义的用户输入进入这些变量。

有了背景课程和安全警告，如果您确实知道自己在做什么，您*可以*在模板中明确地将值标记为“安全”，这样它们就不会被转义。只需使用 Jinja2 的内置过滤器[safe](http://jinja.pocoo.org/docs/templates/#safe)，如下所示：

```
 <body>
    {{ content | safe }}
  </body> 
```

在你的情况下，我认为你也想要一个块，所以你可以用[模板继承](http://jinja.pocoo.org/docs/templates/#template-inheritance)覆盖。例如，使用这个完整的示例应用程序

测试.py：

```
import flask

app = flask.Flask(__name__)

@app.route("/foo")
def foo():
    content = "<h1>this is foo content</h1>"
    return flask.render_template("base.html", content=content)

@app.route("/bar")
def bar():
    content = "<h1>this is bar content</h1>"
    return flask.render_template("child.html", content=content)

if __name__ == "__main__":
    app.run(debug=True) 
```

模板/base.html：

```
<html>
  <head>
    {% if title %}
    <title>{{title}}</title>
    {% else %}
    <title>test</title>
    {% endif %}
  </head>
  <body>
    {% block content %}{{ content | safe }}{% endblock %}
  </body>
</html> 
```

模板/child.html：

```
{% extends "base.html" %}
{% block content %}
  {{ super() }}
  <h2>And this bit comes from the child template</h2>
{% endblock %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:48:22.033

看法 ：

```
@app.route("/foo")
def foo():
content = "<h1>this is foo page</h1>"
return render_template("base.html", content = content) 
```

base.html：

```
<html>
<head>
{% if title %}
<title>{{title}}</title>
{% else %}
<title>test</title>
{% endif %}
</head>
<body>
{% block content %} 
{% if content %}
{{ content | safe }}
{% else %}
No content provided
{% endif %}
{% endblock %}
</body>
</html> 
```

# perl - perl 进行字节交换

> ID：14586336
> 
> 赞同：1
> 
> 时间：2013-01-29T15:25:56.900
> 
> 标签：perl

我正在读取一个文件，其中包含使用“33441122”字节顺序的整数。如何将文件转换为“11223344”（大端）字节顺序？我尝试了几件事，但我真的迷路了。

我已经阅读了很多关于 Perl 的内容，但是当谈到交换字节时，我一无所知。我怎样才能转换这个：

```
33 44 11 22 
```

进入这个：

```
11 22 33 44 
```

使用 Perl。

任何投入将不胜感激 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:49:04.127

您可以一次读取 4 个字节，将其拆分为单独的字节，交换它们并再次写出

```
#! /usr/bin/perl

use strict;
use warnings;

open(my $fin, '<', $ARGV[0]) or die "Cannot open $ARGV[0]: $!";
binmode($fin);
open(my $fout, '>', $ARGV[1]) or die "Cannot create $ARGV[1]: $!";
binmode($fout);

my $hexin;
my $n;
while (($n = read($fin, $bytes_in, 4)) == 4) {
    my @c = split('', $bytes_in);
    my $bytes_out = join('', $c[2], $c[3], $c[0], $c[1]);
    print $fout $bytes_out;
}

if ($n > 0) {
    print $fout $bytes_in;
}

close($fout);
close($fin); 
```

这将在命令行上调用为

```
perl script.pl infile.bin outfile.bin 
```

`outfile.bin`将被覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:14:12.913

我认为最好的方法是一次读取两个字节并在输出它们之前对其进行 dwap。

该程序创建一个数据文件`test.bin`，然后将其读入，如所述交换字节。

```
use strict;
use warnings;

use autodie;

open my $fh, '>:raw', 'test.bin';
print $fh "\x34\x12\x78\x56";

open my $out, '>:raw', 'new.bin';
open $fh, '<:raw', 'test.bin';

while (my $n = read $fh, my $buff, 2) {
  $buff = reverse $buff if $n == 2;
  print $out $buff;
} 
```

# c - 在 for 循环中使用 cos() 函数会获得对 cos 错误的未定义引用

> ID：14586338
> 
> 赞同：0
> 
> 时间：2013-01-29T15:25:59.630
> 
> 标签：c, math, trigonometry

> **可能重复：**
> [获取 sin() 的值时出现 C 构建错误](https://stackoverflow.com/questions/7509925/c-build-error-when-getting-the-value-of-sin)

我正在尝试在该期间使用 100 个间隔来集成一个函数，所以我使用了一个 for 循环。该函数包含 cos(stuff here)，但由于某种原因它不会在 for 循环中运行。如果我将它移出 for 循环，它工作正常。我有 #include ，所以我不明白。任何帮助表示赞赏。谢谢。

```
#include <stdio.h>
#include <math.h>
//float t = 0.000000;
double T = .001;
int n = 100;
double pi = 3.141592654;
double a[5];
double b[5];
double function_results[100];
double anfunction_results[100];
double bnfunction_results[100];
double final = 0.000000000000;
double anfinal = 0.000000000;
double k = 0.000000;
double function(float t){
double f = 3*pow(t,2);
return f;
}

int main()
{   

//double w = 2*pi/T;
double h = T/n;
int i = 1;

for(; i<100; i++){
    double iterate = -T/2 + h*i;
    function_results[i] = function(iterate);
    final = final + function_results[i];
}

a[0] = (h/3)*(function(-T/2) + final+function(T/2))/T;
printf("%.12f \n",a[0]);

int p = 1;
int l = 1;
for(; l<=5; l++){
for(; p<100; p++){
    double iteration = -T/2 + h*p;
    k = l+.0000001;
    anfunction_results[p] =     3*pow(iteration,2)*cos(k*iteration*2.00000*pi/T*pi/180.00000);
    anfinal = anfunction_results[p] + anfinal;
}
a[l] = (2/T)*(h/3)*(3*pow(-T/2,2)*cos(-T/2.0000) + anfinal + 3*pow(T/2,2)*cos(k*T/2.00000*2.00000*pi/T*pi/180.00000));
}

//printf("%.12f \n",a[1]);
//printf("%.12f \n",a[2]);
//printf("%.12f \n",a[3]);
//printf("%.12f \n",a[4]);
//printf("%.12f \n",a[5]);
return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T15:27:55.797

您可能没有链接到数学库。添加`-lm`到您的链接器选项。

（我不知道为什么它会在`cos()`退出`for`循环后“运行良好”，但这个解释对你来说不是很清楚。如果你`cos()`在程序的某个部分得到未定义的引用，你应该把它放进去如果两种情况下的编译器选项相同，则也是不同的部分。）

# objective-c - NSMutableArray 没有正确保存 UIImages？

> ID：14586340
> 
> 赞同：0
> 
> 时间：2013-01-29T15:26:06.703
> 
> 标签：objective-c, cocoa-touch, uiimage, nsmutablearray

我已经让我的 Cocoa Touch 应用程序可以通过向左或向右滑动来改变历史位置来导航。动画有点像 Android 的“卡片”风格。向左滑动 (<--) 只是将当前屏幕图像移开，同时在其下方显示上一个视图。

这很好用，但是当我想以另一种方式（-->）滑动时，要返回，我需要获取上一个图像，并将其移动到当前视图上。现在，如果我只存储以前的图像，我就有了这个工作，但是如果我去 <-- 几次，那么我将没有足够的图像。

因此，解决方案很明显，使用 NSMutableArray 并将最新的图像扔到数组的前面，当你以其他方式滑动时，只需使用数组中的第一个图像。但是，当我开始动画时，图像永远不会显示。它什么也没显示。这是您应该看到的所需方法：

```
-(void)animateBack {
    CGRect screenRect = [self.view bounds];

    UIImage *screen = [self captureScreen];

    [imageArray insertObject:screen atIndex:0]; //Insert the screenshot at the first index
    imgView = [[UIImageView alloc] initWithFrame:screenRect];
    imgView.image = screen;
    [imgView setHidden:NO];
    NSLog(@"Center of imgView is x = %f, y = %f", imgView.center.x, imgView.center.y);
    CGFloat startPointX = imgView.center.x;
    CGFloat width = screenRect.size.width;
    NSLog(@"Width = %f", width);
    imgView.center = CGPointMake(imgView.center.x, imgView.center.y);

    [self.view addSubview: imgView];
    [self navigateBackInHistory];

    [UIView animateWithDuration:.3 animations:^{
        isSwiping = 1;
        imgView.center = CGPointMake(startPointX - width, imgView.center.y);

    } completion:^(BOOL finished){
        // Your animation is finished
        [self clearImage];
        isSwiping = 0;
    }];
}

-(void)animateForward {
    CGRect screenRect = [self.view bounds];

    //UIImage *screen = [self captureScreen];
    UIImage *screen = [imageArray objectAtIndex:0]; //Get the latest image
    imgView = [[UIImageView alloc] initWithFrame:screenRect];
    imgView.image = screen;
    [imgView setHidden:NO];
    NSLog(@"Center of imgView is x = %f, y = %f", imgView.center.x, imgView.center.y);
    CGFloat startPointX = imgView.center.x;
    CGFloat width = screenRect.size.width;
    NSLog(@"Width = %f", width);
    imgView.center = CGPointMake(imgView.center.x - width, imgView.center.y);

    [self.view addSubview: imgView];

    [UIView animateWithDuration:.3 animations:^{
        isSwiping = 1;
        imgView.center = CGPointMake(startPointX, imgView.center.y);

    } completion:^(BOOL finished){
        // Your animation is finished
        [self navigateForwardInHistory];
        [self clearImage];
        isSwiping = 0;
    }];

}

-(void)clearImage {
    [imgView setHidden:YES];
    imgView.image = nil;
}

-(void)navigateBackInHistory {
    [self saveItems:self];
    [self alterIndexBack];
    item = [[[LEItemStore sharedStore] allItems] objectAtIndex:currentHistoryIndex];
    [self loadItems:self];
}

-(void)navigateForwardInHistory {
    [imageArray removeObjectAtIndex:0]; //Remove the latest image, since we just finished swiping this way.
    [self saveItems:self];
    [self alterIndexForward];
    item = [[[LEItemStore sharedStore] allItems] objectAtIndex:currentHistoryIndex];
    [self loadItems:self];
} 
```

请注意，imgView 是类级别的 UIImageView，而 imageArray 是类级别的数组。

有任何想法吗？谢谢。

## 编辑

这是我的 .m 顶部的代码来初始化它。还是不行。

```
.....
NSMutableArray *imageArray;

- (void)viewDidLoad
{
    [super viewDidLoad];
    imageArray = [imageArray initWithObjects:nil]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:43:25.987

看起来您忘记创建数组了。在适当的时候这样的事情会做（假设 ARC）：

```
imageArray = [NSMutableArray array]; 
```

很高兴这成功了。

# android - 如何在android的不同类中使用sharedPreference值

> ID：14586345
> 
> 赞同：0
> 
> 时间：2013-01-29T15:26:20.877
> 
> 标签：android, sharedpreferences

在主要活动中，我有以下内容：

```
((TextView)findViewById(R.id.TextView02)).setText(getSharedPreferences("FearAlert", 1).getString("contactName", "Tap to select an Emergency Contact."));
    ((TextView)findViewById(R.id.TextView03)).setText(getSharedPreferences("FearAlert", 1).getString("contactNumber", "")); 
```

现在我想在另一个 Activty 中使用 contactNumber 值说 Activty2 中的 activity2 是：

```
 SmsManager.getDefault().sendTextMessage(??, null, "message",null, null, null);
return null; 
```

我应该写什么来代替？？以上..请帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:30:29.060

在 Java 中，有... 没关系，在编程语言中，有一些变量，您可以在其中为变量赋值。像 x=1; 然后使用可以使用 x+x=?; 会给你2个；

在这里你可以做

```
SharedPreferences sPrefs=getSharedPreferences("FearAlert", 1);
TextView tv=(TextView)findViewById(R.id.TextView02);
String YOUR_INTRESTING_STRING=sPrefs.getString("contactName", "Tap to select an Emergency Contact."); 
```

并将其传递给另一个 Activity；你可以把它放在一个Bundle中

```
Intent i = new Intent(getApplicationContext(), YOUR_ANOTHER_ACTIVITY.class);
i.putExtra("name_of_value",YOUR_INTRESTING_STRING);
startActivity(i); 
```

并在您的 AnotherActivity 中检索它

```
Bundle extras = getIntent().getExtras();
String value = extras.getString("name_of_value"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:30:53.230

首选项通常是名称值对。它们可以在应用程序中的各种活动中存储为“共享首选项”（注意目前它不能跨进程共享）。或者它可能是需要存储特定于活动的东西（这里不讨论）。

上下文对象允许您通过方法检索 SharedPreferences

```
Context.getSharedPreferences(). 

getSharedPreferences("FearAlert", 1).getString("contactNumber", "");

OR 

 SharedPreferences myPrefs = this.getSharedPreferences("FearAlert", 1);
        String contactNumber = myPrefs.getString(contactNumber, "nothing"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T15:32:52.660

您可以在应用程序的任何地方访问您的首选项，例如使用以下方法：

```
/**
 * Get a string preference by its key from the apps preferences file
 * 
 * @param key of preference
 * @return value of preference
 */
public String getStringPreference(String key) {
    SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
    return pref.getString(key, "");
} 
```

只需设置您的密钥，例如“contactName”作为参数。首选项管理器通过 getApplicationContext() 需要应用程序上下文。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T15:35:06.407

假设您已正确创建 SharedPreferences：

```
SharedPreferences settings = getSharedPreferences("MY_APP", MODE_PRIVATE); 
```

您可以通过以下方式在您的方法中检索首选项：

```
SmsManager.getDefault().sendTextMessage(settings.getString("contactNumber"), null, "message", null, null, null); 
```

假设您已使用“MY_APP”共享首选项标签对其进行设置。

```
settings.edit().putString("contactNumber", "XXX-XXX-XXXX").commit(); 
```

# php - 使用 PHP 中的会话找出谁在线。这是一个好方法吗？

> ID：14586346
> 
> 赞同：0
> 
> 时间：2013-01-29T15:26:25.337
> 
> 标签：php, performance, session-state

我的 PHP Web 应用程序中有一个基于文件的会话机制。我想弄清楚用户是在线、空闲还是注销。目前我有两种解决方案，但不知道哪个更好。另外我不知道是否有比这两个更好的替代方法。我的主要观点是，我不想在数据库中存储会话，所以我想要一个使用文件基础会话的解决方案。

**解决方案 1：**我根据唯一的 user_id 创建会话文件，然后每次用户执行某项操作时，我都会更新会话上的时间戳，然后导致会话文件再次更新/写入磁盘。当我想知道一个用户是否在线时，我使用他的 user_id 读取会话文件的最后一个时间戳，如果小于 5 分钟，我假设他在线，如果超过 5 分钟且小于 10 分钟，我假设他是闲置，除此之外我认为用户已经退出。

**解决方案 2：**我通过在用户表中有一个 last_login 字段来做同样的事情，每次用户在网站上执行某些操作或查看某些页面时，我都会使用最新的时间戳更新该字段，现在如果我想看到该用户在线，我只是检查他的 last_login 时间戳，看看他的时间是否适合我在解决方案 1 中解释的在线、空闲或注销状态

所以我的问题是，哪一个会更快，开销更少。我的网站有 5000 个会员，每天大概有 700 到 1200 个登录会员。我有一个 VPS，但很快就会转移到专用服务器。那么除了这两个解决方案之外还有什么建议吗？你选择哪一个？

非常感谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:31:20.993

使用 cookie 怎么样？

使用 cookie 来识别唯一用户，然后只跟踪上次访问 PHP 页面的时间。然后想出一个超时机制——例如，如果他们在 15 分钟内没有访问过一个页面，那么他们就会被从计数中删除。

如何设置cookie：

```
<?php
//Set a cookie which will expire when the browser is closed
setcookie('mycookie', 'myvalue');

//Set a cookie which expires in about a year
setcookie('longtime', 'nextyear', time() + (60 * 60 * 24 * 365));
?> 
```

您需要的一个很好的例子：

```
<?php
//First we need to check if the user has visited before
//Let's use 'visittime' as the name for our cookie

if(isset($_COOKIE['visittime']))
{
  echo 'Welcome back!<br>';

  //Calculate how long is since the users last visit
  //We can do this simply by subtracting the last visit
  //time from the current time
  $timeElapsed = time() - $_COOKIE['visittime'];

  echo 'It has been ' . $timeElapsed . ' seconds since your last visit.';
}
else
{
  echo 'I see you are new here';
}

//Set the current time as a cookie and make it expire much later.
$nextYear = time() + (60 * 60 * 24 * 365);
setcookie('visittime', time(), $nextYear);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:28:13.010

跟踪数据库中的会话以及正常的会话处理程序。如果您不需要永久存储任何内容，可以在内存表中完成。

# java - 无法访问另一个方法的结果

> ID：14586348
> 
> 赞同：0
> 
> 时间：2013-01-29T15:26:34.713
> 
> 标签：java, scope

我的范围有问题，我不知道如何解决。这是一个简单的程序来说明我的问题：

```
public class testing {

    public static void main(String args[]) {
        test(1,2);
        System.out.println(answer);
    }

    public static int test(int x, int y) {
        int answer = x + y;
        return answer;
    }
} 
```

所以我将几个参数传递给测试方法并返回答案，所以我不应该能够在我的主要方法中访问答案的结果吗？但我不能，我得到一个错误。我究竟做错了什么？Java 告诉我我无法访问答案，即使我将 return 语句放在测试方法中，范围也不会扩展到 main 方法。那么我还能如何返回答案（不将其作为参数传递）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T15:28:08.027

您没有将 存储`return value`在任何变量中。此外，该变量在方法中*本地*`answer`定义，并且在方法中不可见。因此，您的代码中会出现*编译器错误*。*`test``main`*

 **您需要在 main 方法中包含此代码：-

```
int result = test(1,2);
System.out.println(result); 
```

现在，这里发生的是，它将`return value`of存储`test(1, 2)`在一个*局部变量* 中，这与方法中定义`result`的变量无关。然后你只需打印背面。`answer``test``result`

此外，您可以将`test`方法更改为： -

```
public static int test(int x, int y) {
    // int answer = x + y; // No need to define a local variable.
    return x + y;
} 
```

并且您的主要方法可以修改为：-

```
public static void main(String[] args) {
    System.out.println(test(1, 2));
} 
```

请注意，这消除了声明局部变量（在`main`或`test`方法中）的需要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T15:28:42.343

> 所以我将几个参数传递给测试方法并返回答案，所以我不应该能够在我的主要方法中访问答案的结果吗？

不，因为您没有在`main`方法中声明它。对于您的方法来说，它完全是本地的`test`。你可以用不同的方法创建无数不同`answer`的变量，它们都是完全独立的。

相反，您需要在调用该方法时使用该方法的返回值。例如：

```
int result = test(1, 2);
System.out.println(result); 
```

这故意使用不同的变量名称来强调变量 in`main`与in 的独立性`test`，但它们*可以*具有相同的名称，结果完全相同。

或者根本不使用局部变量`main`：

```
System.out.println(test(1, 2)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T15:31:48.447

试试这个

```
public static void main(String args[]) {
    int answer = test(1,2);
    System.out.println(answer);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T15:29:35.933

`test()`如果您希望打印您需要编写的答案值，则答案的范围仅在方法内：

```
public static void main(String args[]) {
System.out.println(test(1,2)); 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T15:28:25.227

您需要捕获返回值：

```
public static void main(String args[]) {
    int answer = test(1,2);
    System.out.println(answer);
} 
```

`answer`方法中声明的局部变量在方法`test`外是不可见的。另一种方法是将声明移动`answer`到类范围（在这种情况下`test`，根本不需要返回值）：

```
public class testing {
    static int answer;

    public static void main(String args[]) {
        test(1,2);
        System.out.println(answer);
    }

    public static void test(int x, int y) {
        answer = x + y;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T15:28:57.130

您正在调用方法并忽略结果：

```
public static void main(String args[]) {
   test(1,2);
   System.out.println(answer); 
```

}

将其更改为：

```
public static void main(String args[]) {
  int answer = test(1,2);
  System.out.println(answer);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-29T15:29:33.530

该`answer`变量是静态`test`方法中的局部变量。它从外部不可见，并且在您调用该方法时作为结果返回，但您没有将其保存在任何地方。

你应该做的是声明另一个变量来存储你的结果

`int answer = test(1, 2)`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-29T15:48:41.430

要回答您的第二个问题 - 如何在`test`不返回参数的情况下使结果可访问，您可以声明`answer`为私有实例字段 ( `private static int answer;`)。然后它将可以通过 main 方法访问，但不能在类之外访问。取决于应用程序这是否比将其作为返回值传回更有用。我建议您熟悉关键字`static`、等`private`，`public`以了解方法、类和变量的不同组合。**

# knockout.js - 多行敲除 JS 数据绑定值 - HTML5 验证警告

> ID：14586355
> 
> 赞同：0
> 
> 时间：2013-01-29T15:27:04.960
> 
> 标签：knockout.js, visual-studio-2012

在 VS2012 中收到警告：

```
Validation (HTML5): If this attribute value is enclosed in quotation marks, the quotation marks must match. 
```

将数据绑定参数值拆分为多行时，似乎只有当其中一个包含特定条件时，例如[http://jsfiddle.net/rniemeyer/gZC5k/](http://jsfiddle.net/rniemeyer/gZC5k/) - 将第 37 行拆分为两行...

从：`<button data-bind='click: save, enable: contacts().length > 0'>Save to JSON</button>`

至： `<button data-bind='click: save,`

`enable: contacts().length > 0'>Save to JSON</button>`

知道为什么会触发这个吗？

如果我切换到 HTML4 验证，我会收到有关数据绑定的警告，与此处相同：[Knockout.js 数据绑定属性导致 html 验证警告](https://stackoverflow.com/questions/9431767/knockout-js-data-bind-attribute-causes-html-validation-warning)

我要么有一些非常长的 HTML 行，要么有这个警告。我还能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:29:03.007

如果你把整个属性放在一行上呢？

```
<button
    data-bind='click: save, enable: contacts().length > 0'>
    Save to JSON
</button> 
```

这是一个进步，虽然不多！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-27T07:12:02.107

虽然 VS 通知毫无意义，但有时敲除可能会抱怨它无法解析绑定。在这种情况下，将标识符 ( 等) 括`click`在`enable`单引号中，即：

```
<button
    data-bind="
        'click': save, 
        'enable': contacts().length > 0
    ">
    Save to JSON
</button> 
```

# mysql - MySQL 2 left join 没有返回数据

> ID：14586356
> 
> 赞同：1
> 
> 时间：2013-01-29T15:27:06.740
> 
> 标签：mysql, left-join

我使用以下 SQL 来获取一些我想要翻译的键：

```
SELECT * FROM translate_keys 

LEFT JOIN translations 

ON translate_keys.id = translations.translate_key_id 

LEFT JOIN  languages 

ON languages.id = translations.language_id 

WHERE languages.is_default = 1; 
```

如果一个键的翻译是空的，我不会得到任何结果（语言有内容）！我知道这是因为语言与翻译无关。我能做些什么？我认为左连接就足够了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:29:08.273

你加入的方向错误。您希望 Language 表成为您的主表。尝试这个：

```
SELECT * 
FROM languages  
  LEFT JOIN translations ON languages.id = translations.language_id 
  LEFT JOIN translate_keys ON translate_keys.id = translations.translate_key_id 
WHERE languages.is_default = 1; 
```

或者，如果您尝试返回所有键并且没有收到任何结果，那是因为您的 WHERE 标准 - 正如@Oswald 正确指出的那样，将其移至您的 JOIN 并且您应该获得记录（显然没有翻译或语言）：

```
SELECT * 
FROM translate_keys 
   LEFT JOIN translations ON translate_keys.id = translations.translate_key_id 
   LEFT JOIN  languages ON languages.id = translations.language_id AND languages.is_default = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:29:41.487

问题是`WHERE`条件`languages.is_default = 1`。这消除了左连接添加的所有虚拟记录，因为`languages.is_default`如果`NULL`不存在翻译。

# c# - Cyber Ark .NETPasswordSDK 无法连接

> ID：14586358
> 
> 赞同：2
> 
> 时间：2013-01-29T15:27:09.433
> 
> 标签：c#, cyber-ark

我在 Cyber​​Ark 的 .NET SDK 上找不到任何好的文档。

我正在尝试使用以下代码集成 Cyber​​Ark 密码管理系统以获取 Outlook 帐户的密码

```
PSDKPasswordRequest passReq = new PSDKPasswordRequest();
PSDKPassword password = null;

// What is the purpose of CredFile??
passReq.CredFilePath = "F:\\CredFiles\\AppUser.cred";

passReq.Safe = "SAFE_NAME";
passReq.Folder = "root";

passReq.Object = userName;
passReq.Reason = "Get some stuff done.";

// Sending the request to get the password
password = CyberArk.AIM.NetPasswordSDK.PasswordSDK.GetPassword(passReq); 
```

但是我无法连接并收到以下错误

```
"PDKTC006E Failed to connect to provider (Reason=[connect command failed])"\ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T22:35:42.413

据我了解，API (NetPasswordSDK) 实际上是位于您和 Cyber​​Ark 设备之间的缓存服务。因此，您必须在安装过程中正确配置服务，因为它处理与 Cyber​​Ark 设备的连接。

指示：

1.  记下 Cyber​​Ark 管理员帐户的用户名/密码
2.  记下 Cyber​​Ark IP 地址。这不是 Web 访问 IP 地址 (PVWA)。它是设备的 IP 地址。
3.  在您的开发机器上，运行 Cyber​​Ark SDK 安装程序并输入步骤 #1 和 #2 中的 IP 地址和管理员用户名/密码

    假设安装程序成功完成，它将创建一个名为“Prov_MACHINENAME”的用户。（MACHINENAME 将等于您的 NetBIOS 主机名）在 Cyber​​Ark 设备上。

4.  在您的开发机器上，打开 C:\Program Files (x86)\Cyber​​Ark\ApplicationPasswordProvider\Vault\AppProviderUser.cred 并记下安装期间生成的名称。

5.  以管理员身份登录 Cyber​​Ark 设备
6.  创建一个名为 MySafe 的保险箱
7.  将步骤 #1 中的管理员帐户添加为 MySafe 的成员
8.  将第 5 步中的 Prov_MACHINENAME 帐户作为成员添加到 MySafe
9.  创建一个名为 MyApp 的应用程序
10.  将应用程序添加为成员 MySafe
11.  创建一个名为 MyAccount 的帐户并将其分配给 MySafe

您现在可以使用以下代码进行连接：

```
PSDKPasswordRequest objPasswordRequest;
PSDKPassword objPassword;

objPasswordRequest = new PSDKPasswordRequest();
objPasswordRequest.AppID = "MyApp";
objPasswordRequest.Safe = "MySafe";
objPasswordRequest.Object = "MyAccount";

objPassword = PasswordSDK.GetPassword(objPasswordRequest);
password = objPassword.Content;
username = objPassword.UserName; 
```

# python - 将“子”模块导入为自己的“子”模块

> ID：14586366
> 
> 赞同：2
> 
> 时间：2013-01-29T15:27:27.083
> 
> 标签：python, import, module

假设您有一个包含`foo`以下内容的包`__init__.py`：

```
from bar import * 
```

作为`bar`任何安装了`pip install bar`.

现在，当您可以导入时，什么总是有效的`bar`：

```
from bar import submodule #works
import bar.submodule      #works, too 
```

现在我会假设以下事情**都可以**正常工作：

```
from foo import submodule     # a) is possible
import foo.submodule          # b) not possible ("no module named submodule")
from foo.bar import submodule # c) also impossible ("no module named submodule") 
```

为什么他们不可能？从维护者的角度来看，我需要做什么才能使它们成为可能`foo`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:34:58.663

`submodule`并且`bar`是`foo`模块对象的成员，而不是它的子模块。因此，它们的行为与 的任何其他成员属性一样`foo`。您可以使用表单将它们带入第三个模块的模块命名空间`from foo import ...`，但不能直接`import`将它们相对于`foo`. 我想如果你`sys.modules`手动将它们入侵到所需的名称下你可以，但你真的不应该做这样的事情......

为了说明问题：

`foo.py`

```
# x and y are values in the foo namespace, available as member attributes
# of the foo module object when foo is imported elsewhere
x = 'x'
y = 'y' 
```

`bar.py`

```
# the foo module object is added as a member attribute of bar on import
# with the name foo in the bar namespace
import foo
# the same foo object is aliased within the bar namespace with the name
# fooy
import foo as fooy
# foo.x and foo.y are referenced from the bar namespace as x and y,
# available as member attributes of the bar module object
from foo import x, y
# z is a member attribute of the bar module object
z = 'z' 
```

`baz.py`

```
# brings a reference to the x, y, and z attributes of bar (x and y
# come in turn from foo, though that's not relevant to the import;
# it just cares that bar has x, y, and z attributes), in to the
# namespace of baz
from bar import x, y, z
# won't work, because foo is a member of bar, not a submodule
import bar.foo
# will work, for the same reason that importing x, y, and z work
from bar import foo 
```

# ruby-on-rails - 如何将开发模式切换到生产模式？

> ID：14586367
> 
> 赞同：0
> 
> 时间：2013-01-29T15:27:27.910
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我所做的是，

1.  我像这样更改了/etc/httpd/conf/httpd/conf

    `RailsEnv development`=>`RailsEnv production`

2.  cmd $ bundle exec rake db:create RAILS_ENV="production"

3.  cmd $ bundle exec rake db:migrate RAILS_ENV="production"

4.  我重新启动了服务器，并试图访问，但它得到了这个错误。

> 我们很抱歉，但有些不对劲

配置/环境/production.rb

```
Sample::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  # Code is not reloaded between requests
  config.cache_classes = true

  # Full error reports are disabled and caching is turned on
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true

  # Disable Rails's static asset server (Apache or nginx will already do this)
  config.serve_static_assets = false

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = false

  # Generate digests for assets URLs
  config.assets.digest = true

  # Defaults to nil and saved in location specified by config.assets.prefix
  # config.assets.manifest = YOUR_PATH

  # Specifies the header that your server uses for sending files
   config.action_dispatch.x_sendfile_header = "X-Sendfile" # for apache
  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx

  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.
  # config.force_ssl = true

  # See everything in the log (default is :info)
  config.log_level = :debug

  # Prepend all log lines with the following tags
  # config.log_tags = [ :subdomain, :uuid ]

  # Use a different logger for distributed setups
  # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)

  # Use a different cache store in production
  # config.cache_store = :mem_cache_store

  # Enable serving of images, stylesheets, and JavaScripts from an asset server
  # config.action_controller.asset_host = "http://assets.example.com"

  # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
  # config.assets.precompile += %w( search.js )

  # Disable delivery errors, bad email addresses will be ignored
  config.action_mailer.raise_delivery_errors = false

  # Enable threaded mode
  # config.threadsafe!

  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
  # the I18n.default_locale when a translation can not be found)
  config.i18n.fallbacks = true

  # Send deprecation notices to registered listeners
  config.active_support.deprecation = :notify

  # Log the query plan for queries taking more than this (works
  # with SQLite, MySQL, and PostgreSQL)
  # config.active_record.auto_explain_threshold_in_seconds = 0.5

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:31:14.063

如果你想让任何东西在生产模式下运行，它的另一种方式是 RAILS_ENV=production rake db:migrate Prefix RAILS_ENV=production。

# windows - 删除窗口别名

> ID：14586369
> 
> 赞同：-3
> 
> 时间：2013-01-29T15:27:32.550
> 
> 标签：windows, iis, windows-server-2003

最近，我给一些文件夹取了一个别名，用于网络共享。这些文件夹被剪切并粘贴到其原始位置，然后恢复。别名在此过程中丢失了，但是当我尝试为它们重新分配相同的别名时，它抱怨别名被采用。没有其他文件夹只有他们有这些别名，但在剪切和粘贴中丢失了。某处是否有系统文件或注册表我可以编辑以删除它们以便我可以重新应用它们？别名是敏感的。操作系统是 Windows Server 2003。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:12:41.410

我从 IIS 中删除了网站，刷新后我能够再次创建别名。

# mysql - 如何根据城市、州和国家（并按此顺序）显示他们所在地区的用户？

> ID：14586370
> 
> 赞同：0
> 
> 时间：2013-01-29T15:27:34.603
> 
> 标签：mysql, sql-order-by, union, case

在我的一个网站上，我想向我们的用户展示他们所在地区的人。理想情况下，这将是他们所在城市的用户。但是，有些城市几乎没有用户，所以我也想展示一下他们所在州的用户。但是，有些州几乎没有用户，所以我也想展示一下他们国家的用户。

我该怎么做呢？

大声思考，这就是我想出的：

1）首先向他们展示他们所在城市的用户，

2）第二个用户在他们的状态，和

3) 在其国家/地区的其余用户中排名第三

所有结果都在同一组结果中，上面的每个子集都按注册日期排序。这样，如果他们所在的城市有很多用户，他们会首先看到他们。如果没有很多，那么他们会自动看到处于他们状态的用户。如果他们所在州的用户不多，他们会自动看到他们所在国家/地区的用户。因此，无论他们所在的城市或州是否有很多用户，他们都会看到很多结果。

如果那是正确的方法，那么我将如何进行查询？我会`UNION`根据注册日期对上述每个问题进行 3 个不同的查询吗？我是否会使用`CASE`声明先按城市、州、国家/地区排序，每个子集按注册日期排序？还有什么办法？

如果以上不是最好的方法，那么请描述一个更好的算法以及我将如何查询它。

# c# - 可以在自定义模型绑定器中绑定另一种类型吗？

> ID：14586383
> 
> 赞同：1
> 
> 时间：2013-01-29T15:28:04.250
> 
> 标签：c#, asp.net-mvc, model-binding

我有一个针对特定数据类型的自定义数据绑定器，并且一切正常。但是我想知道是否可以更改绑定上下文并为另一种类型调用 BindModel 而不是被绑定的类型。

例如：

```
public class CustomModelBinder : DefaultModelBinder
{
    public override object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var otherTypeObject = BindModel(controllerContext, [other-binding-context]);
        return wizard;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:30:23.270

是的，有可能，只需使用您的配置创建另一个绑定上下文：

```
var otherBindingContext = new ModelBindingContext {
    ModelMetadata = ModelMetadataProviders.Current.GetMetadataForType(() => [object_instance], [object_type]),
    ModelState = bindingContext.ModelState,
    PropertyFilter = bindingContext.PropertyFilter,
    ValueProvider = bindingContext.ValueProvider
}; 
```

然后你调用`base.BindModel`上面的上下文。

# jenkins - 从 Jenkins 将多个 Gradle 工件上传到 Artifactory

> ID：14586388
> 
> 赞同：2
> 
> 时间：2013-01-29T15:28:13.730
> 
> 标签：jenkins, gradle, artifactory

我的环境使用 Gradle 构建，Jenkins 用于 CI，Artifactory 用于存储库。我使用 Jenkins 的 Artifactory 插件。

Jenkins 成功构建了我的主 jar 文件并将其上传到 Artifactory。构建脚本有第二个目标，用于在 build/distributions 下创建分发 zip 文件。Jenkins 成功创建了 zip 文件，但我不知道如何告诉它将该工件也上传到 Artifactory。

这是我应该能够在 Jenkins Artifactory 插件配置中指定的东西，还是我应该在 Gradle 构建脚本中定义的东西？感谢您的任何指示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-30T08:33:44.923

您应该按照[Gradle 的用户手册](http://www.gradle.org/docs/current/userguide/userguide_single.html#artifact_management)`archives`中的说明配置配置以包含您打算发布的所有存档。不仅 Artifactory 会选择所有要自动部署的文件（不会弄乱*Published Artifacts*配置），您甚至不需要运行第二个任务。所有档案都将通过运行任务来创建。*`build`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:06:12.047

我假设您已在*Manage Jenkins*部分正确配置了工件服务器；您的工作也设置为*Freestyle Project*。

选择您的工作并单击*配置*。检查**Build Environment**中的*Generic Artifactory Integration*。从下拉列表中选择您的*Artifactory Server*和*Target Repository* ，如果需要，选中*Override default deployer credentials 。*在*Published Artifacts*中，您输入要发布的 zip 文件的模式，例如（*WORKSPACE*是 jenkins 当前项目的工作区，而*distr/*.zip*是您的分发 zip 文件）。检查是否需要*捕获和发布构建信息*，*包括环境变量*******`${WORKSPACE}/distr/*.zip`****等。保存你的工作。当您下次构建它时，该 zip 文件将被上传，并且将在 artifactory的*Builds部分中可用。************

# android - Android：拍照并将图片保存在 SD 卡上

> ID：14586398
> 
> 赞同：2
> 
> 时间：2013-01-29T15:28:59.260
> 
> 标签：android, eclipse, android-camera

我想通过应用程序用手机拍照并将图像保存在手机上。我已经尝试了许多关于stackoverflow问题的解决方案，但它没有标记，所以我构建了一个用正确名称保存文件的方法......但文件是空的（0kb）！

这是我的代码

```
public class GameActivity extends Activity implements SurfaceHolder.Callback/*,Camera.PictureCallback*/ {

private Camera camera;
private SurfaceView surfaceCamera;
public Handler handler = new Handler(); 
private boolean isPreview=false;
private SurfaceHolder holder;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gameactivity);
    surfaceCamera = (SurfaceView) findViewById(R.id.surfaceViewCamera);
    getWindow().setFormat(PixelFormat.UNKNOWN);
    holder = surfaceCamera.getHolder();
    holder.addCallback(this);
    holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    ImageView image = (ImageView) findViewById(R.id.imageView3);
    image.setOnTouchListener(new OnTouchListener(){

        @Override
        public boolean onTouch(View arg0, MotionEvent arg1) {
   camera.takePicture(myShutterCallback, myPictureCallback_RAW, myPictureCallback_JPG);     
            return false;

}

Camera.ShutterCallback myShutterCallback = new Camera.ShutterCallback() {
    public void onShutter() {
      // TODO bl
    }
  };

PictureCallback myPictureCallback_RAW = new PictureCallback() {

    public void onPictureTaken(byte[] arg0, Camera arg1) {
        // TODO Auto-generated method stub

    }
};

PictureCallback myPictureCallback_JPG = new PictureCallback(){

    @Override
    public void onPictureTaken(byte[] data, Camera camera) {
            File imagesFolder = new File(Environment.getExternalStorageDirectory(), "/KersplattFolder");
            imagesFolder.mkdirs(); 
            String fileName = "image.jpg";
            File output = new File(imagesFolder, fileName);
            try {
                FileOutputStream fos = new FileOutputStream(output);
                fos.write(data[0]);
                fos.close();
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

                Toast.makeText(GameActivity.this, 
                        "Image saved: ", 
                        Toast.LENGTH_LONG).show();
            camera.startPreview();
            }
};

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width,
        int height) {
    if (isPreview) {
        camera.stopPreview();
    }
    Camera.Parameters p = camera.getParameters();
    p.setPreviewSize(width,height);
    camera.setParameters(p);
    try {
        camera.setPreviewDisplay(holder);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    camera.startPreview();
    isPreview=true;
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    camera = Camera.open();

}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    camera.stopPreview();
    isPreview=false;
    camera.release();

} 
```

**EDIT1**：当我放置数据而不是数据 [0] 时，我也保存了一张黑色图像，但文件有重量，所以我猜真实图像在某处......

**EDIT2** 我已经添加了代码

```
 File output = new File(imagesFolder, fileName);
            Uri outputFileUri = Uri.fromFile(output);
            String filePath = outputFileUri.getPath();
            File file= new File(filePath);
            try {
                FileOutputStream fos = new FileOutputStream(file,true);
                fos.write(data);
                fos.close();
            } 
```

仍然有黑色图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:37:43.237

您是否在您的 Android 清单中定义了所需的权限，如此处[所述](http://developer.android.com/training/camera/photobasics.html)？

```
<manifest ... >
    <uses-feature android:name="android.hardware.camera" />
    ...
</manifest ... > 
```

**更新：** 好的，删除数据后的括号：数据而不是数据 []。然后它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:51:53.873

您的代码： fos.write(data[0]); 是错的。我很惊讶你没有得到例外

这是我拍照后用来保存字节数组的代码。“数据”是字节数组。

```
String filePath = outputFileUri.getPath(); // .getEncodedPath();
    File file = new File(filePath);
    FileOutputStream os;
    try {
        os = new FileOutputStream(file, true);
        os.write(data);
        os.close();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

# php - 如何从只有 1 个子值的多维数组中获取子值

> ID：14586403
> 
> 赞同：0
> 
> 时间：2013-01-29T15:29:13.173
> 
> 标签：php, arrays

```
$gpph_array=
    Array ( 
    [0] => Array ( [product_id] => 83 [GPPH] => 18.80 ) 
    [1] => Array ( [product_id] => 93 [GPPH] => 20.55 ) 
    [2] => Array ( [product_id] => 94 [GPPH] => 30.75 ) 
    [3] => Array ( [product_id] => 109 [GPPH] => 5.60 ) 
    ) 
```

假设我的 product_id 为 109，如何使用 php 仅提取 5.60 的关联 GPPH 值？

```
<?php 
echo '[GPPH] where [product_id)=>109';
?> 
```

我读过很多关于多维数组的帖子，但只看到人们循环遍历结果。很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:40:08.223

谢谢 Vulcan，这对我想要完成的工作来说是非常有远见的。

我正在使用这种方法来创建我的数组：

```
$gpph_array=array();
  while($grow=mysql_fetch_assoc($gquery)) {
  $gpph_array[] = $grow;
    } 
```

它正在创建多维数组，例如

```
Array ( 
[0] => Array ( [product_id] => 83 [GPPH] => 18.80 ) 
[1] => Array ( [product_id] => 93 [GPPH] => 20.55 ) 
[2] => Array ( [product_id] => 94 [GPPH] => 30.75 ) 
[3] => Array ( [product_id] => 109 [GPPH] => 5.60 ) 
) 
```

通过更改为

```
$gpph_array=array();
   while($grow=mysql_fetch_assoc($gquery)) {
   $gpph_array[$grow['product_id']]=$grow['GPPH']; 
            } 
```

我得到了一个数组，因为我知道产品 ID，所以更容易从中提取值。

```
Array ( [83] => 18.80 [93] => 20.55 [94] => 30.75 [109] => 5.60) 
```

伟大的思想火神

# string - 硬编码多行字符串的最佳方法是什么？

> ID：14586404
> 
> 赞同：35
> 
> 时间：2013-01-29T15:29:16.950
> 
> 标签：string, f#, multilinestring

在单元测试中，我想将一行行硬编码为字符串。

在 C# 中我会做

```
var sb = new StringBuilder();
sb.AppendLine("myline1");
sb.AppendLine("myline2");
sb.AppendLine("myline3"); 
```

自从我转换为 F# 后，我尝试通过使用来尽量减少 .Net 方法的使用`bprintf`，但不知何故，没有`bprintfn`支持，这对我来说似乎很奇怪。

`\r\n`在每一行的末尾手动添加是很乏味的。

或者有什么比这更好的方法`StringBuilder`吗？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2013-01-30T08:44:52.110

鲜为人知的功能：您确实可以缩进字符串内容 - 通过以反斜杠结束每一行。以下行的前导空格被删除：

```
let poem = "The lesser world was daubed\n\
            By a colorist of modest skill\n\
            A master limned you in the finest inks\n\
            And with a fresh-cut quill.\n" 
```

如果您希望将这些嵌入到最终字符串中，您仍然需要包含`\n`或在行尾（如上面示例中所做的那样）。`\n\r`

编辑以回答@MiloDCs 问题：

要与 sprintf 一起使用：

```
let buildPoem character =
    sprintf "The lesser world was daubed\n\
             By a colorist of modest skill\n\
             A master limned %s in the finest inks\n\
             And with a fresh-cut quill.\n" character

buildPoem "you"            
buildPoem "her"
buildPoem "him" 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2013-01-29T15:36:25.673

如果您在 F# 3.0 下，三引号字符串可能是答案：

```
let x = """
myline1
myline2
myline3""" 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-01-31T17:45:54.083

我很惊讶没有人提到这一点：

```
[ "My first line"
  "second line"
  "another line" ]
|> String.concat "\n" 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-01-29T15:34:43.037

您可以在 F# 中直接创建多行字符串文字：

```
let multiLineStr = 
  "myline1
myline2
myline3" 
```

和 C#：

```
var multiLineStr =
  @"myline1
myline2
myline3"; 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-01-29T15:44:55.580

`StringBuilder`我认为像你一样在 F# 中使用没有问题。

[Printf 模块](http://msdn.microsoft.com/en-us/library/ee370560.aspx)`fprintfn`中有一个函数，因此您可以将其与对象一起使用：`StringWriter`

```
let sw = new StringWriter()
fprintfn sw "myline1"
fprintfn sw "myline2"
fprintfn sw "myline3"
sw.ToString() 
```

我喜欢`fprintf`，`fprintfn`因为它们很灵活。您可以通过提供来写入控制台输出`stdout`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-29T15:34:30.587

您可以定义自己的`bprintfn`功能：

```
let bprintfn bldr fmt =
  (bldr, fmt) ||> Printf.kbprintf bldr.AppendLine 
```

或者，要定义多行文字，您可以使用三引号作为 bytebuster 建议或以开头的“逐字文字” `@`（请参阅[​​ MSDN 上的字符串](http://msdn.microsoft.com/en-us/library/dd323829.aspx)）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-29T15:39:13.223

我与 F# 脱节，但你也许可以适应我的正常方法：

```
['line1', 'line2', 'line3'].join('\n'); //javascript

StringUtils.join(Arrays.asList("line1", "line2", "line3"), "\n")); // java, using Apache Commons Lang 
```

# jquery - jQuery在文本框按键事件中检测重音

> ID：14586407
> 
> 赞同：1
> 
> 时间：2013-01-29T15:29:21.973
> 
> 标签：jquery, events

我想知道是否可以在 jQuery 键盘事件中检测重音（á、ő、ű、ö 等）。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:36:34.950

尝试使用正则表达式...

```
$('#input').on('keyup', function(){
    var myRegex = /[^a-zA-Z0-9]/;
    var text = $(this).val();
    if(myRegex.test(text)){
        alert('accent detected');
    }
}); 
```

请参阅此[jsFiddle 示例](http://jsfiddle.net/A3A5d/)

问候...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:36:00.537

在按键事件中，您可以使用此 ASCII 表[http://www.asciitable.com/index/extend.gif查看字符的 ASCII 码](http://www.asciitable.com/index/extend.gif)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T14:15:27.587

对不起@MG_Bautista，但你的答案是错误的。在您的示例中，如果您尝试使用一些字符，例如！，？，它会说“检测到重音”。但是@sada 只需要重音字符您必须更改正则表达式：

```
var MyRegex = /[^a-zA-Z0-9!"'\.,{}\[\]\(\)\\=|°#$%&/?¿¡´+*-_]/; 
```

也许我忘记了一些“特殊”角色。因此，**真正的解决方案**需要仅检测您需要的字符而不是不需要的字符。

```
var MyRegex = /[áéíóúÁÉÍÓÚâêîôû]/; //and all the ones you need to detect
if (MyRegex.test(text)){
    alert("accent detected");
} 
```

Important: If you need to test every character, you have to iterate over the string.

I hope this helps, Bye.

# asp.net - 奇怪的 .NET 进程标志

> ID：14586408
> 
> 赞同：0
> 
> 时间：2013-01-29T15:29:25.520
> 
> 标签：asp.net, .net, iis

正在调查 Web 应用程序中的内存泄漏。并且在 Process Explorer (Sysinternals) 中找到了进程标志，HoardGC（附截图）。HoardGC 谷歌搜索没有给出任何结果。有人能解释一下这是什么意思吗？非常有意思

![](../Images/9e0a91f9a38711a0b3960d5806e16234.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:47:29.933

是的，为什么这没有被谷歌索引？:)
[http://blogs.msdn.com/b/maoni/archive/2005/10/03/476750.aspx](http://blogs.msdn.com/b/maoni/archive/2005/10/03/476750.aspx)
[http://msdn.microsoft.com/en-us/library/ms231027%28v=VS.80 %29.aspx](http://msdn.microsoft.com/en-us/library/ms231027%28v=VS.80%29.aspx)

# c# - 在 windows server 2008 上运行应用程序时无法连接到远程服务器

> ID：14586409
> 
> 赞同：1
> 
> 时间：2013-01-29T15:29:27.387
> 
> 标签：c#, webclient

```
 WebClient zzz = new WebClient();
            WebProxy wp = new WebProxy("62.162.6.11:3128");
            wp.Credentials = CredentialCache.DefaultCredentials;
            zzz.Proxy = wp;

            zzz.Headers.Add("user-agent", "Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)");
            Byte[] BytesMessage;
            BytesMessage = zzz.DownloadData("http://www.google.com");
            System.Text.UTF8Encoding UTF8 = new System.Text.UTF8Encoding();

            StringMessage = UTF8.GetString(BytesMessage);
            Console.WriteLine(StringMessage); 
```

我上面有简单的代码，在本地运行时一切正常，我可以检索 html 代码并做人员，但是当我编译并放置在服务器上时，我总是收到无法连接到远程服务器错误。程序在管理员帐户下启动，服务器浏览器（IE，FF）可以打开我在控制台应用程序中请求的页面，我也尝试关闭防火墙，再次出现同样的错误。我不确定是什么权限造成了问题，我想我已经尝试了我能做的一切......任何建议......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:37:46.477

在这种情况下，问题似乎是服务器上的互联网连接缓慢/不良。如果发生无法连接到服务器的错误，我只是将代码置于循环中，然后再次运行相同的代码（2 到 5 次），通常 2 到 3 次代码将连接到服务器接收数据并完成其余工作。谢谢您的帮助。

# java - zookeeper 作为服务注册中心

> ID：14586410
> 
> 赞同：5
> 
> 时间：2013-01-29T15:29:33.013
> 
> 标签：java, registry, apache-zookeeper, uddi

我想将 ZooKeeper 用作服务注册表，它复制相同的服务可以自己注册，客户端可能会发现可用服务的 url 来调用它们。作为 ZooKeeper 的初学者，我需要基本的 Java 代码来注册和发现 ZooKeeper 上的服务。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T20:05:53.950

Check out [Curator Discovery](https://github.com/Netflix/curator/wiki/Service-Discovery) (part of [Apache Curator](http://curator.apache.org/)), a Zookeeper-based service registry written in Java.

> In SOA/distributed systems, services need to find each other. i.e. a web service might need to find a caching service, etc. DNS can be used for this but it is nowhere near flexible enough for services that are constantly changing. A Service Discovery system provides a mechanism for:
> 
> *   Services to register their availability
> *   Locating a single instance of a particular service
> *   Notifying when the instances of a service change

# javascript - 使用 JavaScript 在 Google 地图上打印乘法标记

> ID：14586417
> 
> 赞同：-1
> 
> 时间：2013-01-29T15:29:47.320
> 
> 标签：javascript, google-maps-api-3

我尝试在谷歌地图（v3）乘法标记上打印。我对一般记录使用集群和蓝色标记。商店位置的红色标记。我的代码如下：

```
function initialize(){

          //some code here
      //....
          //....

    var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

    var markers = [];

    for (var i = 0; i < <?= $total_records ?>; i++) {
       var latLng = new google.maps.LatLng(geo_data.records[i].lat, geo_data.records[i].lng);
       var marker = new google.maps.Marker({
                                           position: latLng,
                                           draggable: true,
                                           icon: markerImage
                                         });
       markers.push(marker);
    }

    var imageUrl2 = 'http://chart.apis.google.com/chart?cht=mm&chs=24x32&chco=AAAAA,008CFF,000000&ext=.png';
    var markerImage2 = new google.maps.MarkerImage(imageUrl2,new google.maps.Size(24, 32));     
    for (var i = 0; i < <?= $store_records ?>; i++) {
       var latLng = new google.maps.LatLng(store_data.storeRecords[i].lat, store_data.storeRecords[i].lng);
       var marker = new google.maps.Marker({
                                           position: latLng,
                                           draggable: true,
                                           icon: markerImage2
                                         });
       markers.push(marker);
    }

    var zoom = 14;
    var size = 60;

    var markerClusterer = new MarkerClusterer(map, markers, {
                                              maxZoom: zoom,
                                              gridSize: size
                                             });

} 
```

但是现在我有两个有线错误：

1.  未捕获的 SyntaxError：意外的标识符 jquery-1.5.1.min.js:16

2.  未捕获的 ReferenceError：未定义初始化

我认为问题在于我不能两次使用 Marker 类的函数，但我不确定。谁能告诉我如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:35:00.213

出色地。jQuery 现在是 v1.9.0，所以我可能会从使用更新版本的 jQuery 开始。您可以根据需要在性能允许的情况下初始化任意数量的标记。

我注意到您使用的是 document.getElementId 而不是 jQuery 选择器。您的页面中是否需要 jQuery？您是否已注释掉行以找出导致每个错误的行？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:36:02.707

对于＃1，由于您的代码中没有初始化对象或方法，我不得不假设错误来自您应用程序的另一部分。这个方法是从哪里调用的？您可以在调试工具中“中断所有错误”来查看。您是否可能复制并粘贴了一些具有 onload 事件初始化程序的代码？寻找这样的东西：

```
<body onload="initialize()"> 
```

至于 #2，在 jQuery 验证库中似乎存在[类似的错误](https://stackoverflow.com/a/5276966/317937)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-06T18:18:01.107

Prueba esto（试试这个）

HTML 文件

```
ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js
maps.google.com/maps/api/js?sensor=false&language=es
google-maps-utility-library-v3.googlecode.com/svn/tags/markermanager/1.0/src/markermanager.js
google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer_compiled.js 
```

JS文件

```
...onload....
.
.
var markers = [];
.
.
/* esto hace el truco */
var marcador = new google.maps.Marker({
position: new google.maps.LatLng(lat, lng),
map: map,
title: sede,
enter code here`icon: 'https://chart.googleapis.com/chart?chst=d_bubble_text_small&chld=bb|'+num+'|FFFF00|000000',
});
markers.push(marcador);

var markerclusterer = new MarkerClusterer(map, markers, { zoomOnClick: true }); 
```

# php - 如果用户来自重定向站点，则使用 PHP 回显消息

> ID：14586431
> 
> 赞同：4
> 
> 时间：2013-01-29T15:30:38.333
> 
> 标签：php, http-referer

我正在使用全新的 URL（更名）启动一个新站点。当用户访问旧 URL 时，他们将被重定向到新 URL。我想向这些用户显示一条消息，欢迎他们访问新站点。此消息只会显示给已被重定向的用户。

使用 PHP`$_SERVER['HTTP_REFERER']`我相信我可以做到这一点，但我遇到了障碍。

如果用户来自 Google，则以下代码非常有用：

```
<?php $referral = $_SERVER['HTTP_REFERER'];
      $referral = strtolower($referral);
      $referral = explode ("/", $referral);
      $referral = $referral[2];
        if ( $referral == 'www.google.com'){ ?>
            <div style="font-weight:bold; position:absolute; top:200px; left:50%; width:300px; margin-left:-200px; background:white; padding:50px; color:black; text-align:center; font-size:17px">
                You Came From: 
                <?php echo $referral; ?>
            </div>
<?php }; ?> 
```

这基本上存储了 的 URL `HTTP_REFERER`，使其漂亮，并且只有当用户来自 Google 时，它​​们才会回显它。我想用旧网站的 URL 来做这件事，但它似乎不起作用。我正在使用 cpanel 中的永久 301 重定向设置重定向。`HTTP_REFERER`可以使用这些重定向吗？`$referral`照原样，当来自重定向站点时，没有任何内容存储在变量中。

我想使用与上面代码相​​同的概念，但使用 301 重定向。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:41:53.210

我认为使用 301 重定向可能会出现一些问题——我建议只是从旧网站重定向到一个特殊的 URL——这使它变得非常简单和干净。

所以而不是：

```
http://oldurl.tld -> http://newurl.tld 
```

你可以做：

```
http://oldurl.tld -> http://newurl.tld/specialwelcome 
```

# ajax - Wicket - 如何正确重新加载/刷新可重用组件？

> ID：14586432
> 
> 赞同：3
> 
> 时间：2013-01-29T15:30:40.107
> 
> 标签：ajax, refresh, wicket, panel, reusability

1.  我有一个java类：

    ```
    public Task {

        private int id;
        private Company sender;
        private Company receiver;

        //Getter and Setter
        ...
    } 
    ```

    如您所见，我在任务类中还有另外 2 个自定义类。一家公司有例如地址和目录。

2.  我有一个可在页面上重复使用的 CompanyPanel。这是面板中的一些代码。

    ```
    public class CompanyPanel extends Panel {

        protected List<Company> companies;

        public CompanyPanel(String id, IModel<Company> model) {

        super(id,new CompoundPropertyModel<Company>(model));
        companies = new ArrayList<Company>();

        Company company_1 = new Company();
            //Setting default predefined values for the company, so I can select it from the dropdown and to set fields automatically

        company_1.setFtpAdress("adress1.com");
        company_1.setFtpDir("/MusterDir/");
        companies.add(company_1);

        //SAME for another company
                ...
        companies.add(comany_2);
                ...

        final DropDownChoice<Company> companyList = new DropDownChoice<Company>("companies", model,
            new LoadableDetachableModel<List<Company>>() {
        @Override
        protected List<Company> load() { 
            return companies;
        }
        }){
            protected boolean wantOnSelectionChangedNotifications() {
            return true;
            }
        };
        add(companyList);

        final TextField<String> ftpAdress = new TextField<String>("ftpAdress");
        ftpAdress.setOutputMarkupId(true);
        add(ftpAdress);

        final TextField<String> ftpDir = new TextField<String>("ftpDir");
        ftpDir.setOutputMarkupId(true);
        add(ftpDir);

         //added Ajax to dropdown to update textfields automatically, based on selection of dropdown
        companyList.add(new AjaxFormComponentUpdatingBehavior("onchange")
        {
        @Override
        protected void onUpdate(AjaxRequestTarget target)
        {
            target.add(ftpAdress);
            target.add(ftpDir);
        }
        });
      }
    } 
    ```

3.  在页面中，我使用可重用的 CompanyPanel。

    ```
    ...
    CompanyPanel senderPanel = new CompanyPanel("senderPanel", new PropertyModel(task,"sender"));
    senderPanel.setOutputMarkupId(true);
    form.add(senderPanel);

    CompanyPanel receiverPanel = new CompanyPanel("receiverPanel", new PropertyModel(task,"receiver"));
    receiverPanel.setOutputMarkupId(true);
    form.add(receiverPanel);
    ... 
    ```

4.  当我提交表格时，我会：

    ```
    public void onSubmit(AjaxRequestTarget target, Form<?> form) {

        //doSomething
        target.add(senderPanel);
        target.add(receiverPanel);

    } 
    ```

问题：公司面板没有被重新渲染。我真的不知道为什么。

工作流程：

1.  我从下拉面板中选择一家公司
2.  将根据下拉菜单正确设置 TextFields（位于 companyPanel 内）
3.  我修改了一个文本字段（属于一家公司）
4.  我提交表格
5.  我从下拉列表中更改公司
6.  我改回第一家公司-> 问题：修改后的文本字段仍然显示里面修改后的文本。它没有重置为默认值。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-31T17:40:19.310

当然，它们会显示修改后的值。在 CompanyPanel 构造函数中创建公司列表。当您修改公司的数据时，会在该列表中修改对象。

解决此问题的一种快速方法是在 onSubmit 方法中将 CompanyPanel 面板替换为 CompanyPanel 的新实例。这将使用您的默认值重新创建公司列表。您当然会丢失修改后的值。

另一个可能更好的解决方法是将公司列表创建移动到可加载的可拆卸模型中：

```
final DropDownChoice<Company> companyList = new DropDownChoice<Company>("companies", model,
    new LoadableDetachableModel<List<Company>>() {
@Override
protected List<Company> load() { 
    List<Company>companies = new ArrayList<Company>();

    Company company_1 = new Company();
    //Setting default predefined values for the company, so I can select it from the dropdown and to set fields automatically

    company_1.setFtpAdress("adress1.com");
    company_1.setFtpDir("/MusterDir/");
    companies.add(company_1);

//SAME for another company
        ...
    companies.add(comany_2);
        ...

    return companies;
} 
```

这样，每个请求都会使用默认值重新创建公司列表。

确保您在 Company 中实现了正确的 equals() 和 hashCode() 方法，但 DropDownChoice 可以显示正确的选定元素 - 因为在这种情况下，模型中的对象和列表中的对象可能永远不会是 ==。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T19:00:04.043

您必须提供更多代码。如果您提交正确以便模型更改尝试：

```
senderPanel.modelChanged();
receiverPanel.modelChanged();
target.add(senderPanel);
target.add(receiverPanel); 
```

# node.js - MongoDB auto_reconnect 不起作用

> ID：14586433
> 
> 赞同：1
> 
> 时间：2013-01-29T15:30:41.490
> 
> 标签：node.js, mongodb, node-mongodb-native, mongoskin

我使用 mongoskin 作为本机 mongodb 驱动程序的包装器，auto_reconnect 似乎不起作用。

我正在创建数据库：

```
var db = mongo.db(serverUrl, {
    database: database,
    auto_reconnect: true,
    safe: true
}); 
```

我添加了一个关于连接关闭的查询来测试它：

```
db.on('close', function(err) {
    setTimeout(function() {
        db.collection('users').findOne({short_id: '123'}, console.log);
    }, 5000)
}); 
```

在运行节点进程后立即我正在杀死并启动 mongod，我得到“[错误：没有打开的连接]”作为查询结果。

它不应该在连接丢失时自动重新连接吗？或者它试图在连接关闭时立即自动重新连接但 mongod 还没有启动？

我可以手动重新连接还是需要创建一个新服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:36:24.847

确保您使用的是最新的 node-mongodb-native (1.2.11) 驱动程序，它应该可以按预期工作。

# javascript - 在 qt 应用程序中集成 Svg 和 Javascript

> ID：14586437
> 
> 赞同：1
> 
> 时间：2013-01-29T15:30:57.037
> 
> 标签：javascript, c++, qt, svg

我已经看到Qt集成了svg，也集成了javascript，但是我还没有找到一种方法来执行嵌入在.svg中的JavaScript

有谁知道如何在 Qt 应用程序中加入这两个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:06:11.270

您需要使用 QtWebKit 来显示您的 SVG 文件。它的 SVG 实现可以使用 WebKit JavaScript 引擎。QtSvg 不能。

最简单的方法是创建一个[QWebView](http://qt-project.org/doc/qt-5.0/qtwebkit/qwebview.html)小部件。如果您只是想验证这是否有效，请编译 Qt 源代码中包含的“fancybrowser”示例。我确认“fancybrowser”可以在Matthew Bystedt 的博客中使用 Qt 5.0.0 在 Windows 上执行[示例 SVG 文件中的内联 JavaScript。](http://apike.ca/media/svg/exampleJavascript.svg)我猜 Qt 4.8.4 也支持它，但我自己没有尝试过。

# android - 父级中的中心覆盖底部元素

> ID：14586438
> 
> 赞同：1
> 
> 时间：2013-01-29T15:30:58.257
> 
> 标签：android, android-layout

我确实有一个用户界面，以及这个用户界面中的一些元素。我希望元素始终*垂直居中*。问题是，当我设置`layout_centerInParent`它时，它会居中但**会覆盖**底部元素。我不想要它。这是它现在的样子：

![在此处输入图像描述](../Images/d450f968bbd729c439fa54481b996e48.png)

xml文件是：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="#FFFFFF"     >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginTop="@dimen/top_mr_image"
    android:src="@drawable/temp" />
<LinearLayout 
    android:id="@+id/r1"
    android:layout_width="match_parent"
    android:layout_height="80dp"
    android:layout_alignParentLeft="true"
    android:layout_centerInParent="true"
    android:background="@drawable/r1bg"
    android:layout_marginRight="35dp"
    android:layout_marginBottom="10dp"
    > 
    <TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    android:text="Start"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="@dimen/txt_r4_size" />
 </LinearLayout>
 <LinearLayout 
    android:id="@+id/r2"
    android:layout_width="match_parent"
    android:layout_height="80dp"
    android:layout_alignParentLeft="true"
    android:layout_centerInParent="true"
    android:layout_below="@+id/r1"
    android:background="@drawable/r2bg"
    android:layout_marginRight="25dp"
    android:layout_marginBottom="10dp"
    > 
    <TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    android:text="HOW TO"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="@dimen/txt_r4_size" />
    </LinearLayout>
   <LinearLayout 
    android:id="@+id/r3"
    android:layout_width="match_parent"
android:layout_height="80dp"
    android:layout_alignParentLeft="true"
    android:layout_centerInParent="true"
    android:layout_below="@+id/r2"
    android:background="@drawable/r3bg"
    android:layout_marginRight="15dp"
    android:layout_marginBottom="10dp"
    > 
    <TextView
    android:id="@+id/textView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    android:text="Support"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="@dimen/txt_r4_size" />
 </LinearLayout>

<RelativeLayout
    android:layout_marginTop="20dp"
    android:id="@+id/r4"
    android:layout_width="fill_parent"
    android:layout_height="55dp"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:background="@drawable/r4bg"
    android:clickable="true"
    android:onClick="onClick" >

<TextView
    android:id="@+id/textView11"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_centerVertical="true"
    android:layout_marginLeft="10dp"
    android:text="You have:"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:textSize="@dimen/txt_r4_size" />

    <TextView
        android:id="@+id/textView12"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_toRightOf="@id/textView11"
        android:layout_marginLeft="20dp"
        android:text="0"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="30dp" />
    <TextView
        android:id="@+id/textView13"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_toRightOf="@id/textView12"
        android:layout_marginLeft="20dp"
        android:text="CCCCCC"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="@dimen/txt_r4_size" />
</RelativeLayout> 
```

我希望它始终*垂直居中*，而**不是覆盖**一些顶部和底部元素。如何做到这一点？我不想针对不同的屏幕分辨率对其进行硬编码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:45:26.173

如果您不希望底部项目重叠，则需要使它们相对于垂直居中的最高视图。设置下方对齐，这样它们就不会重叠。

# css - 如何在不透明度：0.5 div 中有不透明度：1 文本

> ID：14586439
> 
> 赞同：3
> 
> 时间：2013-01-29T15:31:00.267
> 
> 标签：css, opacity

我有`div`一个`a`标签。然后我给`opacity:0.5`了`div`不透明度里面的文本也是0.5我不想使用背景图片，那么我怎么能`opacity:1`在我的div里面有一个文本呢`opacity:0.5` ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T15:33:26.893

使用 rgba 设置父级的背景颜色（包括 alpha 透明度）。例子：

```
.Container {
    background-color:rgb(0,0,0); /* fallback for IE 8 and below */
    background-color:rgba(0,0,0,0.5);
}
.Text {
    color:rgb(255,255,255);
} 
```

这会在使用颜色时设置容器背景的不透明度，但不会设置子对象的不透明度。如果您需要这样做，请将孩子的不透明度设置为您想要的其他课程：

```
.OtherChildItem {
    opacity:0.5;
    filter:alpha(opacity=50); /* IE 8 and below */
} 
```

如果要使用背景图像，只需在图像本身上设置不透明度（使用 PNG）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T15:32:22.413

你不能。在 HTML 渲染模型中，真正的子不透明度不能大于其父不透明度。

从[文档](http://www.w3.org/TR/css3-color/#opacity)（强调我的）：

> 不透明度可以被认为是一种后处理操作。从概念上讲，在将元素**（包括其后代）**渲染为 RGBA 离屏图像后，不透明度设置指定如何将离屏渲染混合到当前的复合渲染中。

您必须将您的子 div 放在父 div 之外。这通常使用与静态定位不同的定位来实现。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T15:34:25.487

使用完全不同`<div>`的文本。

```
<div id="parentDiv">
    <div id="mainDiv">
    </div>
    <div id="childDiv">
       Hello
    </div>
</div> 
```

**CSS**

```
#parentDiv
{
    position:relative;

}
#childDiv
{
    position:absolute;
    top:45px;
    left:45px;
    opacity:1;
}
#mainDiv
{
    width:100px;
    height:100px;
    opacity:0.5;
} 
```

检查一下：http: [//jsfiddle.net/AliBassam/aH9HC/](http://jsfiddle.net/AliBassam/aH9HC/)我添加了背景颜色，所以你可以注意到结果。

既然是逼你用`absolute`，我不希望你对文字定位有问题，所以做一些数学计算得到最好的位置：

```
top = ( Height of Div Opacity(0.5) - Height of Div Opacity(1) ) / 2
left = ( Width of Div Opacity(0.5) - Width of Div Opacity(1) ) / 2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T15:35:33.850

a 标签从父 div 获取不透明度。您可以在 div rgba(0, 0, 0, 0.5) 和标签 rgba(255, 0, 0, 1.0) 上使用 rgba CSS 属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T15:49:06.133

就像上面的答案一样，你需要一个单独的文本 div，绝对定位以适应不透明的 div。您可能还想将 z-index 设置为较高的值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-19T09:50:37.370

警告：仅当您希望外部元素完全透明时，此解决方案才有效。

代替`opacity: 0`and`opacity: 1`使用`visibility: hidden`and`visibility: visible`

在我的情况下工作（可能不适用于你的情况，但值得一试）:)

# .net - 列出“order by”故障

> ID：14586443
> 
> 赞同：2
> 
> 时间：2013-01-29T15:31:13.330
> 
> 标签：.net, string

我有一堂课，就像学生坐的那样。我有像 B6 B7 B8 B9 B10 B11 这样的位置，如果我在某些类中使用 FindAll（一个 oops 版本），我会按照这个顺序得到它，一切都很好，直到我这样做

```
 someclass.OrderBy(r => r.location); 
```

在该位置变为 B10 B11 B6 B7 B8 B9 之后，这里出了什么问题。那时我不使用 orderBY 会更好，但有人能告诉我我遇到问题的原因吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T15:44:34.580

您可以实现自己的自定义比较器...

```
class CustomCompare : IComparer<string>
{
    private static readonly char[] _digits = "0123456789".ToArray();

    public int Compare(string a, string b)
    {
        //assuming alpha start, numeric end
        var alphaA = a.TrimEnd(_digits);
        var alphaB = b.TrimEnd(_digits);
        var alphaCompareTo = alphaA.CompareTo(alphaB);

        if (alphaCompareTo != 0)
        {
            return alphaCompareTo;
        }

        var numericA = int.Parse(a.Substring(alphaA.Length));
        var numericB = int.Parse(b.Substring(alphaB.Length));

        return numericA.CompareTo(numericB);
    }
} 
```

...并像这样使用它...

```
someclass.OrderBy(r => r.location, new CustomCompare()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T15:33:41.167

这是因为字符串被比较为......嗯，字符串。 `'1'`小于`'6'`，因此词法比较将在该字符处停止。

听起来您想要[自然排序](http://www.interact-sw.co.uk/iangblog/2007/12/13/natural-sorting)而不是词汇排序。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T16:05:22.097

我想你的`location`属性（或字段）是一个字符串？

你可以**写**一个`Comparer<>`like：

```
sealed class LocationComparer : Comparer<string>
{
  // expect strings like "B3" or "C26"
  public override int Compare(string x, string y)
  {
    int result = x[0].CompareTo(y[0]);
    if (result != 0)
      return result;
    result = ushort.Parse(x.Substring(1)).CompareTo(ushort.Parse(y.Substring(1)));
    return result;
  }
} 
```

像使用它`sorted = someclass.OrderBy(r => r.location, new LocationComparer());`。

**或者**您可以将您的类型更改为`location`以下样式的类：

```
// this class inherits the IComparable implementation of Tuple`2
sealed class Location : Tuple<char, ushort>
{
  public Location(char letter, ushort number)
    : base(char.ToUpper(letter), number)
  {
  }

  public Location(string locationString)
    : this(letter: locationString[0], number: ushort.Parse(locationString.Substring(1)))
  {
  }

  public override string ToString()
  {
    return Item1.ToString() + Item2.ToString();
  }
} 
```

在`Someclass`类里面`location`有类型`Location`。然后你的原件`sorted = someclass.OrderBy(r => r.location);`就可以了。

两种解决方案都只是草图。我猜你会想要添加一些健全性检查。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T15:32:57.283

Order by 使用字符串排序，而不是数字排序。

```
'B10' < 'B6' 
```

逐个字符地比较每个条目：

```
'B10'
'B6'
  ^ 
```

这是重要的字符（因为 B 是相同的）。“6”>“1”。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T15:33:51.103

orderby 工作正常，请注意字符串 B10 在字符串 B11 之前，而 B11 又在 B6 之前

请注意，您正在尝试订购一个`List<string>`（或者这就是我的想法）而不是`List<int>`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-29T15:35:14.140

为了使字符串中的数字按字典顺序呈现，它们需要被填充，即 B01 < B06 < B10 因为 B6 是 > B10，因为它是从左到右完成的。因此，如果您知道上限，您的简单选择是填充，否则您将不得不重新考虑一下。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-29T15:42:58.870

它们总是采用“X###”的形式吗？如果是这样，您可以使用：

```
yourListObject.OrderBy(r => int.Parse(r.location.SubString(1))); 
```

这是一种解决方法。如果情况要复杂得多，那么您还需要为新创建的 Location 类创建一个比较器对象。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-29T15:46:26.897

你需要一个自然的排序算法。从伊恩那里拿走[这个](http://www.interact-sw.co.uk/iangblog/2007/12/13/natural-sorting)并称之为：

```
someclass.OrderBy(r => r.location, new EnumerableComparer<String>()); 
```

# ruby-on-rails - 设计如何包含生成器

> ID：14586448
> 
> 赞同：1
> 
> 时间：2013-01-29T15:31:28.120
> 
> 标签：ruby-on-rails, ruby, devise

`devise:install`如何在没有创建`lib/generator`Rails 项目的情况下包含他们的生成器？

我的意思是，这里有什么魔力？是`require_paths = ["lib"]`谁在做这个把戏，包括发电机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:39:07.013

在 gem 中，有一个 rails 寻找的“生成器”文件夹结构

```
lib/generators/devise... 
```

在`devise.gemspec`中，将`lib`dir 添加到 require 路径中：

```
s.require_paths = ["lib"] 
```

这意味着一旦您将设计添加到您的`Gemfile`, rails 现在可以访问它的生成器，因为它们遵循 rails 期望的结构和命名约定。

这是[安装生成器](https://github.com/plataformatec/devise/blob/master/lib/generators/devise/install_generator.rb)供您参考。如果您将该文件重命名为`installer_generator.rb`并将类名更改为，则devise `InstallerGenerator`install 命令将变为`rails g devise:installer``rails g devise:install`

希望这有助于澄清问题。

# xslt - 将 Mule 选择路由器与 XSLT 一起使用的推荐方法是什么

> ID：14586449
> 
> 赞同：1
> 
> 时间：2013-01-29T15:31:29.690
> 
> 标签：xslt, mule

我`choice`在我的 Mule 3.3 流程中使用下面显示的元素片段。`XSL Transformer`提供选择元素。XSL Transformer 应该返回一个`String`（实体名称），并且基于字符串值，我使用选择路由器将其推送到不同的 jms 队列。

```
<flow name="ProcessOrder">
    .
    .  
    <xm:xslt-transformer xsl-file="xsl/getEntity.xslt" returnClass="java.lang.String"/>
    <choice>
        <when expression="payload.contains('ABC')">             
            <jms:outbound-endpoint queue="order.queue1" />
        </when>
        <when>
        </when>
        <otherwise>         
        </otherwise>
    </choice>
</flow> 
```

XSL 转换器返回此有效负载 `<?xml version="1.0" encoding="UTF-8"?>ABC`

我的问题是如何比较`String`返回的。我认为这不是`payload.contains()`最好的方法，虽然它解决了我的目的，而且我们不会返回匹配的实体，`ABCxy`但仍然不是一个完整的证明解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:48:19.560

在您的 xslt 中添加 omit-xml-declaration 部分，如下所示。这将为您提供没有序言的原始字符串。

```
<xsl:stylesheet version="2.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
xmlns:xsd="http://www.w3.org/2001/XMLSchema"    >

<xsl:output omit-xml-declaration="yes" indent="yes" />

<xsl:template match="/">
...
... 
```

这会给

```
"ABC" as output instead of     "<?xml version="1.0" encoding="UTF-8"?>ABC" 
```

然后在表达式中使用它

```
<when expression="#[message.payload.contains('ABC')]"> 
```

这样它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:37:58.270

也许这就是你正在寻找的：

```
<when evaluator="xpath" expression="/result/" ... 
```

显然，您的 XSLT 将需要返回一个格式良好的 XML 文档，并在 XPath 可轻松访问的 XML 元素中返回所需的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T15:49:23.293

在 Mule 网站上，他们建议使用`expression-splitter-router`评估器，这是 mule 网站上的一个示例，说明如何使用它：

FruitBowl 包含一个苹果、一个橙子和两个香蕉。当 Mule 收到这个对象时，我们希望将水果路由到不同的位置：AppleService、BananaService 和 OrangeService。

```
<service name="Distributor">
    <inbound>
       <jms:inbound-endpoint queue="distributor.queue"/>
    </inbound>
    <outbound>
        <!-- FruitBowl.getFruit() List -->
        <expression-splitter-router evaluator="bean" expression="fruit">
            <vm:outbound-endpoint path="apple.service.queue">
                <payload-type-filter expectedType="org.mule.tck.testmodels.fruit.Apple"/>
            </vm:outbound-endpoint>
            <vm:outbound-endpoint path="banana.service.queue">
                <payload-type-filter expectedType="org.mule.tck.testmodels.fruit.Banana"/>
            </vm:outbound-endpoint>
            <vm:outbound-endpoint path="orange.service.queue">
                <payload-type-filter expectedType="org.mule.tck.testmodels.fruit.Orange"/>
            </vm:outbound-endpoint>
        </expression-splitter-router>
    </outbound>
</service> 
```

希望有帮助

# linux - 服务器在线配置

> ID：14586451
> 
> 赞同：0
> 
> 时间：2013-01-29T15:31:38.430
> 
> 标签：linux, report, pentaho

我正在尝试在我的在线服务器上设置 pentaho，如下所示：

[http://demo.pentaho.com/pentaho/Home](http://demo.pentaho.com/pentaho/Home)

我想在我的在线网络服务器上运行报告（使报告可以在全球范围内访问），所以我将 Pentaho-BI-Server 上传到我的域。报表设计器的用户通常会发布到 BI 服务器以让他们的报表在 Web 上运行。我无法弄清楚如何配置它，因为文档帮助对于将 Pentaho 设置为在线服务器并不生动。请让我知道我该怎么做？

有没有可用的教程？任何帮助将非常感激。

*   BI-服务器：http: [//sourceforge.net/projects/pent.../4.8.0-stable/](http://sourceforge.net/projects/pent.../4.8.0-stable/)
*   BI-Server 的文档：[http ://wiki.pentaho.com/display/Serv...+Documentation](http://wiki.pentaho.com/display/Serv...+Documentation)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:45:30.387

网上有几个教程，或多或少是最新的。在 Google 上快速搜索会发现以下内容：

[http://kirk.webfinish.com/2012/06/how-to-configure-pentaho-bi-server-ce-manual-with-postgresql-9-1/](http://kirk.webfinish.com/2012/06/how-to-configure-pentaho-bi-server-ce-manual-with-postgresql-9-1/) [http://interestingittips.wordpress.com/2011/ 04/27/complete-pentaho-installation-on-ubuntu-part-1/](http://interestingittips.wordpress.com/2011/04/27/complete-pentaho-installation-on-ubuntu-part-1/)

这应该很简单。下载、解压、设置并运行。也许更具体的问题可以带来更详细的答案。

# mysql - SQL 多个 IINNER JOIN 和 GROUP BY

> ID：14586455
> 
> 赞同：0
> 
> 时间：2013-01-29T15:32:03.770
> 
> 标签：mysql, sql, relational-database

我要查询的三个表是：

**数据库结构：**

`roles_permissions: id, role_id, permission_id`

`user_roles: id, name, user_id`

`permissions: id, name`

**SQL 查询**

```
SELECT ur.name AS role_name,perm.name AS perm_name FROM user_roles AS ur
    INNER JOIN roles_permissions as p
    ON ur.id=p.role_id
    INNER JOIN permissions AS perm
    ON p.permission_id = perm.id
    WHERE ur.user_id='$account_id' 
```

**上述查询的结果**

```
 array(11) {
  [0]=>
  array(2) {
    ["role_name"]=>
    string(5) "Owner"
    ["perm_name"]=>
    string(12) "view project"
  }
  [1]=>
  array(2) {
    ["role_name"]=>
    string(5) "Admin"
    ["perm_name"]=>
    string(12) "edit project"
  }
  [2]=>
  array(2) {
    ["role_name"]=>
    string(6) "Editor"
    ["perm_name"]=>
    string(14) "create project"
  }
  [3]=>
  array(2) {
    ["role_name"]=>
    string(5) "Owner"
    ["perm_name"]=>
    string(12) "view project"
  }
  [4]=>
  array(2) {
    ["role_name"]=>
    string(5) "Admin"
    ["perm_name"]=>
    string(12) "edit project"
  }
  [5]=>
  array(2) {
    ["role_name"]=>
    string(6) "Editor"
    ["perm_name"]=>
    string(14) "create project"
  }
  [6]=>
  array(2) {
    ["role_name"]=>
    string(5) "Owner"
    ["perm_name"]=>
    string(12) "view project"
  }
  [7]=>
  array(2) {
    ["role_name"]=>
    string(6) "Editor"
    ["perm_name"]=>
    string(12) "edit project"
  }
  [8]=>
  array(2) {
    ["role_name"]=>
    string(5) "Owner"
    ["perm_name"]=>
    string(12) "view project"
  }
  [9]=>
  array(2) {
    ["role_name"]=>
    string(5) "Admin"
    ["perm_name"]=>
    string(12) "edit project"
  }
  [10]=>
  array(2) {
    ["role_name"]=>
    string(6) "Editor"
    ["perm_name"]=>
    string(14) "create project"
  }
} 
```

我要做的是选择`user_roles`分配给特定 user_id 的所有内容，然后从中获取分配给该角色的权限 ID `roles_permissions`，然后从表中获取每个权限的名称`permissions`。我想分组`user_roles.name`

所以结果数组将是

```
 array(3) {
  ["Owner"]=>
  array(3) {
    ["perm_name"]=>
    string(12) "view project"
    ["perm_name"]=>
    string(12) "create project"
    ["perm_name"]=>
    string(12) "edit project"
  }
  ["Editor"]=>
  array(2) {
    ["perm_name"]=>
    string(12) "view project"
    ["perm_name"]=>
    string(12) "edit project"
  }
   ["Admin"]=>
  array(3) {
    ["perm_name"]=>
    string(12) "view project"
    ["perm_name"]=>
    string(12) "create project"
    ["perm_name"]=>
    string(12) "edit project"
  }

} 
```

因此，如果有人可以提供帮助，那就太好了，也希望从中学习，所以如果你能为我解释一下，那就太棒了。

谢谢

SQL FIDDLE：[http ://sqlfiddle.com/#!2/a7954/1](http://sqlfiddle.com/#!2/a7954/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:15:38.477

这不会直接解决您的问题，但您的架构有许多问题。其中最主要的是元组`(role_id, permission_id)`in`roles_permissions`不是唯一的。以下是我重组事物的方式：

```
role
==========
id  -- autoincrement
name  -- varchar

user_role
===========
role_id  -- fk to role.id
user_id  -- fk to user.id (not listed here, but you obviously have one)

permission
===========
id  -- autoincrement
name  -- varchar

role_permission
===================
role_id  -- fk to role.id
permission_id  -- fk to permission.id 
```

（请注意，如果您尝试创建权限组或角色层次结构，这将变得更加复杂）

[修改后的示例小提琴](http://sqlfiddle.com/#!2/edf35/9)显示设置，带有示例数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:24:08.633

您的测试数据是错误的，即 user_role.id = 1 (name = owner, user_id = 1) in table role_permission for role_id = 1 只有 permission_id = 1 (ie view) ；

检查您更新的示例[http://sqlfiddle.com/#!2/41b7b/2](http://sqlfiddle.com/#!2/41b7b/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T15:51:50.863

如果没有看到表结构，很难对此进行测试，但您是否尝试过添加：

```
group by ur.name, perm.name
order by ur.name 
```

在 where 子句之后？

# android - 无效的切片缓存

> ID：14586457
> 
> 赞同：1
> 
> 时间：2013-01-29T15:32:09.073
> 
> 标签：android, tiles, osmdroid, openstreetmap

我正在制作一个使用 osmdroid 的应用程序。

应用程序连接到的服务器上的地图数据可能随时更改，因此我希望能够使 osmdroid 的切片缓存无效，以便它使用正确的数据重新渲染地图视图。

有没有办法做到这一点？理想情况下仅适用于地图的特定区域。

谢谢

# c++ - 调整 wxFileDialog 大小时应用程序崩溃

> ID：14586460
> 
> 赞同：-1
> 
> 时间：2013-01-29T15:32:15.123
> 
> 标签：c++, windows, wxwidgets

我维护一个使用 Visual Studio 2010 和 wxWidgets 版本 2.8.10 编写的应用程序。有人向我报告说，在 windows vista 下，当显示正在查看网络驱动器并调整大小的 wxFileDialog 时，应用程序将崩溃。使用以下代码调用对话：

```
 wxFileDialog file_chooser(
        this,
        make_wxString(my_strings[strid_file_choose_caption]),
        make_wxString(frame->get_config()->get_last_os_dir()),
        wxT(""),            // default file
        make_wxString(loader->get_file_extension()),
        wxOPEN);
     int rcd = file_chooser.ShowModal(); 
```

有没有人见过类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:39:38.117

标准文件对话框内的崩溃几乎总是由于系统上存在一些错误的 shell 扩展。要说更多，您需要在崩溃时获取小型转储（或至少是堆栈跟踪）并对其进行调试。

# ios - iCloud + 预加载的 CoreData

> ID：14586462
> 
> 赞同：0
> 
> 时间：2013-01-29T15:32:19.447
> 
> 标签：ios, core-data, icloud

我有一些默认内容的数据库。如何使用 iCloud 在不同设备上同步数据库中的更改？如果 CoreData 首先是空的，我知道如何同步设备，并且我可以从外部 sqlite 文件迁移到 CoreData。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:58:11.657

如果您有现有的 Core Data 存储并且想要添加 iCloud 支持，则需要将所有现有数据传输到新的数据存储并保存结果。这是必要的，因为 iCloud 仅在您保存更改时生成事务——因此您需要有效地保存*所有*更改以启动同步过程。

`NSPersistentStoreCoordinator`在大多数情况下，您可以使用's一步完成此操作`migratePersistentStore:toURL:options:withType:error:`。传入调用时使用的相同 iCloud 选项`addPersistentStoreWithType:configuration:URL:options:error:`。仅当从非 iCloud 数据存储移动到使用 iCloud 的数据存储时才使用这种替代方法。

此外，**请注意**将 iCloud 与 Core Data 一起使用。它没有赢得可靠性的声誉。密切关注 Apple 的文档和示例项目，即便如此，也要做好准备，让它有时无法正常工作。

# ruby - 在 Mac OS 中从 ri（ruby 文档查看器）退出

> ID：14586466
> 
> 赞同：2
> 
> 时间：2013-01-29T15:32:30.717
> 
> 标签：ruby, macos, ri

任何时候我想使用 ruby​​ 的`ri`工具（例如，在键入类似`ri GC`的内容之后），在它显示文档之后，我都找不到退出它的方法，并且用于终止命令行命令的常用组合键都不起作用。因此，我被迫关闭整个终端窗口以继续我的工作。

显示文档后如何从 ri 正常退出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:38:03.623

答案是简单地输入`q`，它就会退出。

# php - php数据库到表格显示

> ID：14586470
> 
> 赞同：0
> 
> 时间：2013-01-29T15:32:42.057
> 
> 标签：php, sql, arrays

我正在解决这个问题：我应该使用数据库查询还是数组操作。

我的数据库结构带有一些示例虚拟数据-

```
Name , description , location , datefrom , dateto
1    , description1 , d1,        date1,     date 2
1    , description2 , d2,        date1,     date 2
2    , description3 , d3,        date1,     date 2
2    , description4 , d3,        date1,     date 2
1    , description5 , d1,        date1,     date 2 
```

需要输出。

问题 - 用于从数据库中选择不同名称的 SQL 查询 SQl QUERY 以获取所有不同名称的数组

数组格式：

```
 array (
             [0] = array(
                        [id] => 1,
                        [name] => dummyname,
                        [description] => description1
                        [location] => d1
                        )
             [1] = array(
                        [id] => 2,
                        [name] => dummyname,
                        [description] => description2
                        [location] => d2
                        )
             ) 
```

等等...

如果您愿意，可以分享代码 - 抱歉，它有点令人困惑......如果您有任何问题，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T22:37:35.923

> 问题 - 用于从数据库中选择不同名称的 SQL 查询 SQl QUERY 以获取所有不同名称的数组

不完全确定您的意思，但是，这是我的解释；

查看 SQL 小提琴：[http ://sqlfiddle.com/#!2/96f33/1](http://sqlfiddle.com/#!2/96f33/1)

如您所见，该表有两个相同的值（'John'），但`SELECT DISTINCT`只返回一个。

然后，在 PHP 中执行这个逻辑；

```
<?php
/*
 * Return all distinct values (`name`) from a table
 * Store within an array

 * For demo purposes only, I shall use inferior MySQL - MySQLi is preferred.
 */

$sql = "SELECT DISTINCT username FROM users";
//Run the query
$db = mysql_query($sql);
//Create an array to store the returned values
$return = array();
//Loop through the results
while($r = mysql_fetch_array($db)) {
    //Store them in the array
    $return[] = $r['username'];
}

print_r($return);
?> 
```

对于开发（和代码实践），请不要使用 mysql。采用 PDO 或 MySQLi :) 我希望对您有所帮助，因为这是我对广泛问题/请求的解释

# python-3.x - 在 python 中输入 e 指数

> ID：14586473
> 
> 赞同：-1
> 
> 时间：2013-01-29T15:32:53.157
> 
> 标签：python-3.x, python-2.7

请谁能告诉我如何在python中获得以下输出：

```
9.4605e+12 
```

我是这样打的

```
S_L = "2.998765e+08" 
print "S_L" 
```

但它没有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:38:06.313

[您可以使用字符串格式](http://docs.python.org/2/library/string.html#format-specification-mini-language)打印带有指数符号的数字：

```
>>> my_num = 123456.7890
>>> print my_num
123456.789
>>> print '{0:e}'.format(my_num)
1.234568e+05 
```

在上面的例子中，你可能会得到`S_L`输出，因为你有引号`S_L`，这意味着它被解释为字符串而不是`S_L`变量的内容。在那种特定情况下，您可以这样做：

```
>>> S_L = "2.998765e+08"
>>> print S_L
2.998765e+08 
```

# python - 使用“。”进行相对导入 在 python 中总是有意义的？

> ID：14586479
> 
> 赞同：2
> 
> 时间：2013-01-29T15:33:07.410
> 
> 标签：python, import, python-2.7

当一个模块`mod1.py`和`mod2.py`存在于同一目录中时，我可以直接导入`mod2`为`mod1`

```
import mod2 
```

或相对于

```
from . import mod2 
```

有没有更好的方法来做到这一点？

我问是因为如果`mod1`也导入`mod2`，则相对导入将不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:20:47.097

隐式相对导入[在 Python 3 中消失了](http://docs.python.org/3.0/whatsnew/3.0.html#removed-syntax)。很明显，它们已被弃用，主要是因为它们与绝对导入冲突（即，如果有一个全局模块 mod2，你将如何导入它？）。

你说得对，循环显式相对导入不起作用；[这是一个错误](http://bugs.python.org/issue992389)。因此，最好的方法是避免循环进口。

# r - 如何从 R 中的 netCDF 文件中提取变量名？

> ID：14586482
> 
> 赞同：15
> 
> 时间：2013-01-29T15:33:11.573
> 
> 标签：r, netcdf, variable-names

我正在用 R 编写一个函数来从 netCDF 文件中提取一些空气质量建模数据。我安装了包“ncdf”。

为了允许其他用户或我自己选择从 netCDF 文件中提取哪些变量，我想提取文件中所有变量的名称，以便我可以在一个简单的列表中呈现，而不仅仅是`print.ncdf()`给出的文件很多信息。有什么办法吗？

我尝试了 ncdf 对象`unlist()`的`var`字段，但它似乎也返回了内容......

我用谷歌搜索并搜索了 stack* *overflow* * 但似乎没有找到答案，因此非常感谢您的帮助。

提前谢谢了。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-29T15:47:19.580

如果您的 ncdf 对象被调用`nc`，那么很简单：

```
names(nc$var) 
```

举个例子，例如使用在[这里](ftp://podaac-ftp.jpl.nasa.gov/allData/ghrsst/data/L4/AUS/ABOM/RAMSSA_09km/2013/028/)下载的数据集（因为您没有提供）：

```
nc <- open.ncdf("20130128-ABOM-L4HRfnd-AUS-v01-fv01_0-RAMSSA_09km.nc")
names(nc$var)
[1] "analysed_sst"     "analysis_error"   "sea_ice_fraction" "mask" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-02-08T14:51:36.390

现在是 2016 年。 ncdf 包已弃用。与 SE 用户 plannapus 的答案相同的代码现在是：

```
library(ncdf4)
netcdf.file <- "flux.nc"
nc = ncdf4::nc_open(netcdf.file)
variables = names(nc[['var']])
#print(nc) 
```

文档中的注释：

```
Package: ncdf
Title: Interface to Unidata netCDF Data Files
Maintainer: Brian Ripley <ripley@stats.ox.ac.uk>
Version: 1.6.9
Author: David Pierce <dpierce@ucsd.edu>
Description: This is deprecated and will be removed
   from CRAN in early 2016: use 'RNetCDF' or 'ncdf4' instead.

Newer package "ncdf4" is designed to work with the netcdf library 
version 4, and supports features such as compression and 
chunking.Unfortunately, for various reasons the ncdf4 package must have
a different API than the ncdf package. 
```

维护者主页的注释：

```
Package ncdf4 -- use this for new code

The "ncdf4" package is designed to work with the netcdf library, version 4\. 
It includes the ability to use compression and chunking, 
which seem to be some of the most anticipated benefits of the version 4 
library. Note that the API of ncdf4 has to be different 
from the API of ncdf, unfortunately. New code should use ncdf4, not ncdf. 
```

[http://cirrus.ucsd.edu/~pierce/ncdf/](http://cirrus.ucsd.edu/~pierce/ncdf/)

# java - 除非先选择视图，否则 requestDisallowInterceptTouchEvent 不起作用

> ID：14586488
> 
> 赞同：14
> 
> 时间：2013-01-29T15:33:29.013
> 
> 标签：java, android, ontouchlistener

根据android docs，你可以让你的父母`ViewGroup`打电话`requestDisallowInterceptTouchEvent(true)`给它来阻止其他事情的干扰。这不仅会导致直接父对象，还会导致任何其他可能拦截触摸的父对象在特定事件期间忽略它......

这听起来不错，似乎在较新的设备（我的是 android 4.1）上运行良好，但较旧的设备（即 2.3.3）它不起作用，除非我先点击我的滚动视图然后滚动它，否则其他父可滚动视图可能仍然干扰。

我正在`View.OnTouchListener`为可滚动的孩子发送请求。

知道如何在不借助编写自定义子类来检查运动事件等的命中矩形的情况下自动完成这项工作吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-07T19:35:27.087

我在 2.3 中也遇到了一些问题，不允许它间歇性地工作。

我曾经调用 view.requestDisallowInterceptTouchEvent(true)，而不管 event.getAction()。

然后我试图成为一个好公民，并将 onTouch() 方法中的代码更改为以下内容：

```
switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            v.requestDisallowInterceptTouchEvent(true);
            break;
        case MotionEvent.ACTION_CANCEL:
        case MotionEvent.ACTION_UP:
            v.requestDisallowInterceptTouchEvent(false);
            break;
        default:
            break;
        } 
```

请记住，此方法（或引用视图下的某些其他视图）必须返回 true 才能使父级遵守禁止请求。

不确定这会解决您的问题，但值得一试。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-11-27T11:03:54.963

你可以试试这个：

```
m_parentScrollView.setOnTouchListener(new View.OnTouchListener() 
{
       public boolean onTouch(View p_v, MotionEvent p_event) 
        {
               m_childScrollView.getParent().requestDisallowInterceptTouchEvent(false);
           //  We will have to follow above for all scrollable contents
           return false;
        }
});

                                        **OR**

m_childScrollView.setOnTouchListener(new View.OnTouchListener() 
{
      public boolean onTouch(View p_v, MotionEvent p_event)
       {
          // this will disallow the touch request for parent scroll on touch of child view
           p_v.getParent().requestDisallowInterceptTouchEvent(true);
           return false;
       }
}); 
```

# variables - 如何在 XSLT 中分配一个变量，然后在 OSB 中的消息流/管道对中使用它

> ID：14586494
> 
> 赞同：0
> 
> 时间：2013-01-29T15:33:42.863
> 
> 标签：variables, xslt, xquery, soa, osb

此查询与 OSB 和 xslt 相关。我想在 xslt 中做一些复杂的逻辑，然后将结果值赋给一个变量。现在我想在 xslt 转换 action/stage 之后使用这个变量。所以换句话说，如何在 XSLT 中分配一个变量，然后在 OSB 的消息流/管道对中使用它。请帮助我...在此先感谢。..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:19:54.053

使用分配操作。在 xpath/xquery/xslt 部分调用您的 XSLT。它的结果将自动分配给在分配操作中定义的变量。

# python - 带有 json 文档协议的 spyne 客户端是什么？

> ID：14586496
> 
> 赞同：2
> 
> 时间：2013-01-29T15:33:47.873
> 
> 标签：python, json, rpc, spyne

我正在尝试使用[spyne hello world 示例](http://spyne.io/docs/manual/02_helloworld.html)，代码基本上是：

```
class HelloWorldService(ServiceBase):
    @srpc(Unicode, Integer, _returns=Array(Unicode))
    def say_hello(name, times):
        for i in range(times):
            yield 'Hello, %s' % name

application = Application([HelloWorldService],
              tns='spyne.examples.hello',
              in_protocol=JsonDocument(validator='soft'),
              out_protocol=JsonDocument()
          )

if __name__ == '__main__':
    from wsgiref.simple_server import make_server
    wsgi_app = WsgiApplication(application)
    server = make_server('0.0.0.0', 7789, wsgi_app)
    print "rpc server start"
    server.serve_forever() 
```

我正在尝试通过以下[请求](http://docs.python-requests.org/en/latest/)连接到它：

```
url = "http://127.0.0.1:7789/sayhello"
data = { "name": "World", "times": 4 }
headers = { 'content-type': 'application/json' }
r = requests.post(url, data=json.dumps(data), headers=headers) 
```

它返回 404。

但是如果我使用的是 HttpRpc 协议，那么请求方式就可以了。

那么我如何实现一个客户端来使用 Json Document 协议。`requests`首选使用 lib 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:15:49.880

如果你想使用 JsonDocument 作为 in_protocol，你应该使用这个符号来发送数据......

```
data = { "say_hello" : { "name": "World", "times": 4 } } 
```

这意味着您应该将函数名称作为 json 中的主键传递，其内容应该是带有函数参数的 json。

并且您的网址应该相同，但没有函数名称，即：

```
url = "http://127.0.0.1:7789/" 
```

如果您想查看更多内容，可以阅读[http://spyne.io/blog/上的 spyne 博客](http://spyne.io/blog/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:35:40.297

我刚刚通过 JsonDocument 协议示例向[http://spyne.io](http://spyne.io)添加了请求。

看看：[http ://spyne.io/#inprot=JsonDocument&outprot=JsonDocument&s=rpc&tpt=WsgiApplication&validator=true](http://spyne.io/#inprot=JsonDocument&outprot=JsonDocument&s=rpc&tpt=WsgiApplication&validator=true)

以供参考; 你可以同时做：

```
curl http://localhost:7789 -d '{ "say_hello" : { "name": "World", "times": 4 } }' 
```

或者

```
curl http://localhost:7789 -d '{ "say_hello" : ["World", 4]}' 
```

参数顺序与 Python 端的参数顺序相同。

# javascript - 在另一个 json 对象（不是数组）中获取 json 对象

> ID：14586501
> 
> 赞同：1
> 
> 时间：2013-01-29T15:34:08.913
> 
> 标签：javascript, json, parent, names

我得到了这个结构：

```
{
"parent": {
      "child-parent-1": {
            "att1": null,
            "att2": null,
      },
      "child-parent-2": {
            "att1": null,
            "att2": null,
      }
 }} 
```

我需要得到的是“child-parent-1”和“child-parent-2”名称而不知道他们的名字......因为它们是动态生成的，就像一个哈希码（askdl1km2lkaskjdnzkj2138）。

尝试迭代，但我无法使其工作。我总是得到子属性（键/值对）。或包含所有对象的整个父对象。需要得到我上面提到的父母名字。

我怎样才能做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T15:36:35.717

迭代对象应该可以工作：

```
var parents = {
    "parent": {
        "child-parent-1": {
            "att1": null,
            "att2": null,
        },
        "child-parent-2": {
            "att1": null,
            "att2": null,
        }
    }
}

for(var key in parents.parent){       // parents.parent because the children are in a object in `parents`
    console.log(key);                 // child-parent-1 / child-parent-2
    console.log(parents.parent[key]); // The objects themselves.
} 
```

对我来说，这记录：

```
// child-parent-1
// Object {att1: null, att2: null}
// child-parent-2
// Object {att1: null, att2: null} 
```

# sqlite - SQLite 是否足以用于统计？

> ID：14586503
> 
> 赞同：2
> 
> 时间：2013-01-29T15:34:14.677
> 
> 标签：sqlite, statistics

'Sqlite' 适合统计吗？我想在android上堆叠数据并使用触发器。我可能会使用加入、联合操作。

是否还有其他数据库（mongodb 或图形数据库）和其他语言或 sqlite 就足够了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:40:10.333

您可以使用`R`Sqlite 进行统计。鉴于 R 是为统计而设计的。`R`查看数据库支持的文档， [http://cran.r-project.org/doc/manuals/R-data.html#Overview-of-RDBMSs](http://cran.r-project.org/doc/manuals/R-data.html#Overview-of-RDBMSs)

# ios - 动态改变 UIImage 宽度

> ID：14586507
> 
> 赞同：0
> 
> 时间：2013-01-29T15:34:26.017
> 
> 标签：ios, objective-c, uiimageview, uiimage

我有这样的 UIImage，在左侧红线之间的空闲空白处放置 UITextField： ![例子](../Images/4a7c41f5d003c8d37776c8444b0203dd.png)

UIImage 实际边框比可见部分大，因为手势识别器链接到此图像，它需要更大才能更舒适地使用手势。

文本字段中的文本对齐设置为右侧。因此，任务是在输入文本后关闭键盘时，根据输入的文本长度从左侧裁剪图像帧。我使用了这段代码：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
            ruleImage.layer.anchorPoint = CGPointMake(1,1);
            [ruleImage setFrame:CGRectMake(0, 0, 120 + ruleTextfield.text.length * 15 , ruleImage.frame.size.height)];
} 
```

但是这段代码水平压缩图像，没有裁剪，从左到右。所以问题：

*   如何将锚点设置为右上角（或下角）？
*   我可以使用什么属性来裁剪图像？

PS我也试过

```
ruleImage.autoresizingMask = UIViewAutoresizingFlexibleRightMargin;
ruleImage.contentMode = UIViewContentModeTopRight; 
```

但是这个属性并没有解决我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:39:17.933

尝试

```
ruleImage.contentMode = UIViewContentModeScaleAspectFill; 
```

# java - 有关 github 上此幻灯片菜单库的更多信息

> ID：14586508
> 
> 赞同：1
> 
> 时间：2013-01-29T15:34:26.233
> 
> 标签：java, android, slidingmenu

我昨天问[了这个](https://stackoverflow.com/questions/14566549/using-slidingmenu-for-android/14566592#14566592)关于以编程方式从 github 上的库中打开幻灯片菜单的问题，并得到了回答。但是，我对这个主题有更多疑问，但由于我不同意的原因，这个问题被关闭了。

我的后续问题是 toggle() 方法确实显示了您的菜单，但与 setBehindContentView() 不同。我使用 java 类成功地将布局添加到我的 setBehindContentView 中，因此我可以操作 onlistclick 事件，但不能用于 setMenu() 方法。

所以我得到了这个代码：

```
setBehindContentView(R.layout.menu_frame);
        getSupportFragmentManager()
        .beginTransaction()
        .add(R.id.menu_frame, new MenuFragment())
        .commit(); 
```

如果我向右滑动屏幕并显示底层视图，这将起作用。但由于我的整个地图是 Google MapView，我想以编程方式使用 toggle() 显示菜单。我这样设置布局：

```
 menu.setMenu(R.layout.menu); 
```

但这仅显示布局，但不会运行相应的代码来扩展此布局并创建列表项。有谁知道如何以编程方式显示 backcontentview 或让 setMenu() 方法与 java 类一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:16:39.043

固定的：

```
setBehindContentView(R.layout.menu_frame);

        menu.setMenu(R.layout.menu_frame);
        getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.menu_frame, new MenuFragment())
        .commit();

        menu.setSecondaryMenu(R.layout.menu_frame_two);
        menu.setSecondaryShadowDrawable(R.drawable.shadowright);
        getSupportFragmentManager()
        .beginTransaction()
        .replace(R.id.menu_frame_two, new MenuTwoFragment())
        .commit(); 
```

如果有人需要更多代码，请随时与我联系

# c# - Autofac 为使用 RegisterAssemblyTypes 加载的类型传递命名参数

> ID：14586511
> 
> 赞同：0
> 
> 时间：2013-01-29T15:34:31.007
> 
> 标签：c#, autofac

我正在使用这样的命名参数在 Autofac 中注册某些类型

```
 builder.Register<LogRequest>((c, p) =>
    {
        var param = p.Named<TenantConfigurations>("myparam");
        if (param is MyClass)
        {
            return new LogRequest(param as MyClass);
        }
        return null;
    }); 
```

我怎样才能对我用`builder.RegisterAssemblyTypes`方法注册的类型做同样的事情。假设所有类型的构造函数都采用相同的参数`param`

**更新**

这就是我最终做的

```
Assembly.GetAssembly(CustomType)
                    .GetTypes()
                    .Where(t => t.IsSubclassOf(CustomType) && !t.IsAbstract)
                    .ToList().ForEach(t =>
                                        {
                                            builder.Register((c, p) =>
                                            {
                                                var param = p.Named<TenantConfigurations>("myparam");
                                                if (param is MyClass)
                                                {
                                                    return t.GetConstructor(new Type[] { typeof(TenantConfigurations) }).Invoke(new object[] { config });
                                                }
                                            });
                                        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T18:11:04.583

是的，您可以使用“WithParameter”扩展轻松做到这一点。例子：

```
builder.RegisterAssemblyTypes(assembly).WithParameter("param", "value"); 
```

**更新：**

此外，您可以使用["LifetimeEvents"](http://code.google.com/p/autofac/wiki/LifetimeEvents)来做到这一点。简单的使用示例：

```
builder.RegisterAssemblyTypes(assembly).OnActivating(args =>
{
    var param = args.Parameters.Named<string>("param");
    args.ReplaceInstance(new HelloWorld(param));
}); 
```

# android - 如何改善 android 编程环境（工作环境），例如 windows 7

> ID：14586519
> 
> 赞同：2
> 
> 时间：2013-01-29T15:34:55.750
> 
> 标签：android, eclipse, eclipse-juno

每个 Android 开发人员都看到了与版本无关的 eclipse 问题。当你确定它不应该出现错误时，它可能会出现错误，项目可能需要大量清理才能让你运行它，并且在`xml`编辑器中会出现很多这样的问题以及更多问题。仅使用最新版本的 eclipse 无济于事。

所以我需要什么。

*任何人都可以提出一些建议如何改善android开发环境，不生气也不浪费时间荒谬吗？*

提前感谢，对不起英语

# c# - 从 DataTemplate 中的 LongListSelector 将 ViewModel 绑定到 Item

> ID：14586521
> 
> 赞同：1
> 
> 时间：2013-01-29T15:34:58.200
> 
> 标签：c#, xaml, data-binding, windows-phone-8

我想在 LongListSelector 中显示对象列表，并使用 DataTemplate 对其进行格式化。为了正确使用 MVVM，我想在这个 DataTemplate 中有一个 ViewModel。

创建这个 ViewModel 没有问题，但是如何将 Item 传递给 ViewModel？

我正在使用这段代码：

```
<Controls:LongListSelector 
     ItemsSource="{Binding MyItems}" Margin="0" HorizontalAlignment="Stretch" 
                           HorizontalContentAlignment="Stretch" >
    <Controls:LongListSelector.DataContext>
        <viewmodel:MyListOfItemsViewModel />
    </Controls:LongListSelector.DataContext>
 <Controls:LongListSelector.ItemTemplate>
        <DataTemplate>
            <StackPanel x:Name="CurTemplate">
                <Grid Margin="10" >
                    <Grid.DataContext>
                        <viewmodel:MyViewModel MyItem="{Binding Path=DataContext,ElementName=CurTemplate}" />
                    </Grid.DataContext> 
```

但是很遗憾，为 MyItem 设置的唯一内容是`null`，并且永远不会更新为实际值。我发现在这个过程的后期（在`MyItem`CurTemplate 的初始设置确实有一个有效的 DataContext 之后，但这并没有发送到我的 ViewModel。我在这里遗漏了什么吗？

为了完整起见，MyViewModel 的代码：

```
public static DependencyProperty MyItemProperty = DependencyProperty.Register("MyItem", typeof(object), typeof(MyViewModel), new PropertyMetadata("asd", ItemChanged));

    private static void ItemChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
       System.Diagnostics.Debugger.Break(); // to set when something is set
       // called once, NewValue is null
    }

    public object MyItem
    {
        get
        {
            return (object)GetValue(MyItemProperty);
        }
        set
        {
            SetValue(MyItemProperty, value);
            RaisePropChangeEvent("MyItem");
        }
    } 
```

我做了很多搜索和摆弄，但我很确定这只是这里缺少的一件小事。如果你能在这里帮助我，我会很高兴...

**编辑：解决**

我通过使用`{Binding Path=Content,RelativeSource={RelativeSource Mode=TemplatedParent}}`作为视图模型的绑定解决了我的问题。我不知道为什么这适用于`Content`，但不适用于`DataContext`...

感谢您的帮助，robertftw，您的链接帖子使我走上了正轨！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:27:00.793

好像我前几天遇到的问题： [Binding does not update usercontrol property correct MVVM](https://stackoverflow.com/questions/14497344/binding-does-not-update-usercontrol-property-correctly-mvvm)

```
public static DependencyProperty MyItemProperty = DependencyProperty.Register("MyItem", typeof(object), typeof(MyViewModel), new PropertyMetadata(string.Empty, ItemChanged));
 private static void ItemChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
        var obj = d as MyViewModel;
        obj.RaisePropChangeEvent("MyItem");
} 
```

我遇到的问题是 MyItem 的集合实际上没有被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T09:04:42.247

你想做什么？您是否只想与选择更改进行交互并将 LongListSelector 中的选定项目推送到 ViewModel？

如果是这样...我正在为这种情况使用扩展程序。这种扩展唯一的事情是从 ViewModel 设置当前项目不会移植回视图（但不需要那个）。

ViewModel 的变化是

```
public RelayCommand<MyItemType> ViewModelCommand 
```

XAML 更改是

```
<phone:LongListSelector extensions:LongListSelectorExtension.Command="{Binding ViewModelCommand}" /> 
```

扩展名

```
public static class LongListSelectorExtension
{
public static readonly DependencyProperty CommandProperty =
    DependencyProperty.RegisterAttached("Command",
        typeof(ICommand), typeof(LongListSelectorExtension),
        new PropertyMetadata(null, OnCommandChanged));

public static ICommand GetCommand(LongListSelector selector)
{
    return (ICommand)selector.GetValue(CommandProperty);
}

public static void SetCommand(LongListSelector selector, ICommand value)
{
    selector.SetValue(CommandProperty, value);
}

private static void OnCommandChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    var selector = d as LongListSelector;
    if (selector == null)
    {
        throw new ArgumentException(
            "You must set the Command attached property on an element that derives from LongListSelector.");
    }

    var oldCommand = e.OldValue as ICommand;
    if (oldCommand != null)
    {
        selector.SelectionChanged -= OnSelectionChanged;
    }

    var newCommand = e.NewValue as ICommand;
    if (newCommand != null)
    {
        selector.SelectionChanged += OnSelectionChanged;
    }
}

private static void OnSelectionChanged(object sender, SelectionChangedEventArgs e)
{
    var selector = sender as LongListSelector;
    var command = GetCommand(selector);

    if (command != null && selector.SelectedItem != null)
    {
        command.Execute(selector.SelectedItem);
    }

    selector.SelectedItem = null;
}
} 
```

# ruby-on-rails - Rails 转义所有 URL

> ID：14586524
> 
> 赞同：2
> 
> 时间：2013-01-29T15:35:10.913
> 
> 标签：ruby-on-rails, url, encoding, utf-8

在 Rails 中，我希望能够全面转义我`link_to`的所有 URL。做这个的最好方式是什么？

目前，永久链接以 UTF-8 存储。例如它被存储为：水-水

我正在运行 Spree，所以我想避免使用 CGI.escapes 覆盖所有模板文件以实现相同的目的。

其他注意事项：

*   将转义的 url 存储在永久链接列中？（params 将其编码为 UTF-8，然后续集找不到它，因为它以转义形式存储在数据库中）

提前致谢！贾斯汀

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T03:54:14.150

没关系，link_to 已经正确地转义了 UTF-8。是浏览器已经在解释它让我认为它是未转义的。

使用原始 HTTP 查看器，例如：[http ://www.rexswain.com/httpview.html](http://www.rexswain.com/httpview.html)

帮助看到了。

# git - Git Assembla 在不同空间的解决方案中使用项目

> ID：14586529
> 
> 赞同：0
> 
> 时间：2013-01-29T15:35:19.880
> 
> 标签：git, assembla

我是 git assembla 的新手，所以请以正确的方式解释 :)
我的 assembla 帐户中有 2 个空格，一个空格用于我的解决方案，一个空格用于我在解决方案中使用的记录器项目。
我使用 2 个空格的原因是因为日志记录项目与其他用户共享，因此他们也可以在他们的解决方案中使用它。
那我想做什么？我需要在我的解决方案中添加项目。
打开visual studio，选择使用现有项目并加载项目（它已经在我的磁盘上，因为我是第一次创建和推送的人）。
这是正确的方法吗？如果是这样，现在当我在解决方案中编辑文件并尝试提交和推送时，会出现错误消息：

```
error: failed to push some refs to 'git@git.assembla.com:XXXX.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.
Done 
```

这是什么意思？
谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:33:19.447

您的遥控器上存在非本地更改，您需要先将这些更改合并到本地存储库中。您可以执行 git pull 或获得 rebase 以获取远程更改。

我建议您先进行拉动，这将导致合并提交。

另一种方法是存储您当前的工作，然后在提取后重新申请。

# java - 小程序中的图像未正确显示

> ID：14586531
> 
> 赞同：0
> 
> 时间：2013-01-29T15:35:21.520
> 
> 标签：java, image, swing, applet, java-2d

我想在我的小程序中添加 615,50 的图像。图片名称是 logo1.jpg 。但以下代码仅打印 d 图像.. 当我编译然后使用小程序查看器运行时。只有图像 logo1 显示在 d 点。其余代码不起作用。但是，如果我删除图像。然后代码工作正常。我认为paint() 函数存在一些问题。如果我使用 ImageIcon 然后将其添加到标签中并将该标签设置为该位置，那么它在 appletviewer 中可以正常工作，但是一旦我在网络浏览器中打开它，就会出现 IO 错误 `"access denied("java.io.FilePermission" "logo1.jpg" "read" )`。请帮忙。图像大小为 126,126。

```
import java.applet.*;
import java.awt.event.*;
import javax.swing.*;
import java.net.*;
import java.awt.*;
import java.io.*;

public class site extends Applet implements MouseListener, Runnable
{
  JLabel l1;
  JLabel l2;
  JLabel l3;
  JLabel l4;
  JLabel l5;
  JLabel l6;
  JLabel l21;
  String str;
  String s1;
  String s2;
  String s3;
  Thread th;
  int x;
  int vt;
  int hr;
  int yx=75;
  ImageIcon I;
  Image image;

public void init()
{
    setLayout(null);
        addMouseListener(this);
    loadImage();

    //I=new ImageIcon("logo1.jpg");

        l1 = new JLabel("2");
    l1.setBounds(433, yx, 50, 50);
        l1.setFont(new Font("Sketch Block", Font.PLAIN, 50));
    l1.setForeground(Color.red);
        add(l1);

    l21=new JLabel(I);
    l21.setBounds(630,50,126,126);;
    add(l21);

        l2 = new JLabel("0");
        l2.setBounds(483, yx, 50, 50);
        l2.setFont(new Font("Sketch Block", 0, 50));
    l2.setForeground(Color.blue);
        add(l2);

        l3 = new JLabel("1");
        l3.setBounds(543, yx, 50, 50);
        l3.setFont(new Font("Sketch Block", 0, 50));
    l3.setForeground(Color.magenta);
        add(l3);

        l4 = new JLabel("3");
        l4.setBounds(583, yx, 50, 50);
        l4.setFont(new Font("Sketch Block", 0, 50));
    l4.setForeground(Color.cyan);
        add(l4);

        l5 = new JLabel("Impressions");
        l5.setBounds(770, yx, 400, 50);
        l5.setFont(new Font("Sketch Block", 0, 50));
    l5.setForeground(Color.black);
        add(l5);

        l6 = new JLabel("March");
        l6.setBounds(683, yx, 200, 50);
        l6.setFont(new Font("Sketch Block", 0, 50));
    l6.setForeground(Color.black);
        th = new Thread(this);

  }

public void loadImage() 
{

URL url = getClass().getResource("logo1.jpg");
image = getToolkit().getImage(url);

}

public void paint(Graphics g) 
{
g.drawImage(image, 615,50, this);
}

public void mouseClicked(MouseEvent me)
{

    vt=me.getY();
    hr=me.getX();

try
{
    final URI uri = new URI("file:///E:/site/1.html");
    final URI uri1 = new URI("file:///E:/site/2.html");
    final URI uri2 = new URI("file:///E:/site/3.html");

    if(hr<=468 && hr>=427)
    {   

             if (Desktop.isDesktopSupported())
             {
                Desktop desktop = Desktop.getDesktop();
                try 
                {
                    desktop.browse(uri);

                }

                catch (Exception ex) 
                {
                                }

            }

    }

    if(hr>=468 && hr<=527)
    {   

             if (Desktop.isDesktopSupported())
             {
                Desktop desktop = Desktop.getDesktop();
                try 
                {
                    desktop.browse(uri1);

                }

                catch (Exception ex) 
                {
                                }

            }

    }

    if(hr<=577 && hr>=527)
    {   

             if (Desktop.isDesktopSupported())
             {
                Desktop desktop = Desktop.getDesktop();
                try 
                {
                    desktop.browse(uri2);

                }

                catch (Exception ex) 
                {
                                }

            }

    }
}
catch(Exception e)
{
}   

}

public void mouseEntered(MouseEvent me)
{
    th = new Thread(this);
        th.start();
}

public void mousePressed(MouseEvent me) 
{
}

public void mouseReleased(MouseEvent me) 
{
}

public void mouseExited(MouseEvent me) {
        th.stop();
        l1.setText(" ");
        l2.setText(" ");
        l3.setText(" ");
        l4.setText(" ");
        l5.setText(" ");
        l6.setText(" ");

        l1.setText("2");
        l1.setBounds(433, yx, 40, 50);

        l2.setText("0");
        l2.setBounds(483, yx, 40, 50);

        l3.setText("1");
        l3.setBounds(533, yx, 40, 50);

        l4.setText("3");
        l4.setBounds(583, yx, 40, 50);

        l5.setText("Impressions");
        l5.setBounds(770, yx, 400, 50);
    l21.setBounds(630,50,126,126);

}

public void run()
{
        try
        {
            l2.setText(" ");
            for (x = 0; x < 200; x += 1)
            {
                Thread.sleep(1L);
                l3.setText("1");
                l3.setBounds(533 - x / 2, yx, 40, 50);
                l1.setText("2");
                l1.setBounds(433 + x / 4, yx, 40, 50);
                l4.setText("3");
                l4.setBounds(583 - x / 4, yx, 40, 50);
                l5.setBounds(770, yx-(6*x)/8, 400, 50);
            l21.setBounds(630,50-x,126,126);
            l6.setText("March");
                l6.setBounds(650, 200 - (5 * x)/8, 200, 50);
                add(l6);
            }       

            l3.setText("<html>1<sup><font size=3>st</font></sup></html>");
            l1.setText("<html>2<sup><font size=3>st</font></sup></html>");
            l4.setText("<html>3<sup><font size=3>rd</font></sup></html>");
    }

     catch (Exception e)
     {
     }
         }

         } 
```

每次我使用paint方法时，只有paint方法有效，其余代码无法正常工作。即使我使用paint() 方法画一条线。然后也会发生同样的情况。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-29T15:52:00.767

Toolkit 的图像加载有时无法正常工作。我不知道为什么，但这是我所经历的。请改用 ImageIcon 类。

```
img = new ImageIcon(getClass().getResource("logo.png")).getImage(); 
```

# asp.net-mvc - 如果 mvc 模型视图控制器有参数，$.post() 不起作用

> ID：14586535
> 
> 赞同：0
> 
> 时间：2013-01-29T15:35:36.233
> 
> 标签：asp.net-mvc, json, jquery

我是 MVC 的新手。我正在使用 MVC4。我遇到了回调问题。如果我在 post() 调用之前和之后发出警报，则两个警报都会显示，但呼叫不会触发。

```
[HttpGet]
[Authorize]
public ActionResult Dashboard(int Menu)
{
 //some code
 return View("Dashboard");
}

<script>
    $(document).ready(function () {
        $.post("../Client/GetFact", {},
        function (data) {  
          //some code
        });
    });
</script> 

[HttpPost]
[Authorize]
public JsonResult GetFact()
{
    //some code to fill object_data

    var data = object_data;

    return Json(data);
} 
```

只要我在没有参数的情况下离开 ActionResult Dashboard 就可以了。如果我向 Dashboard(int Menu) 添加参数，则对 GetFact 的回调不起作用。我搜索并找到了一个类似的帖子并按照你们给出的说明进行操作，但仍然不起作用（查看：getJSON not working if the mvc model view controller has a parameter）。我不知道我做错了什么。你能帮我吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:40:26.657

这是一个简写的 Ajax 函数，相当于：

```
$.ajax({  type: "POST",
           url: url,  
          data: data,
       success: success,// -> call alert here  
      dataType: dataType}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:57:35.467

我对 $.get 做了类似的事情，使用带有 @Url.Action 而不是 url 的 jquery。

除了使用 FormContext 传递给我的 Action ：

就在@using (Html.BeginForm()) 之前

```
@{ ViewContext.FormContext = new FormContext(); } 
```

例子 ：

```
$.get('@Url.Action("ActionName", "ControllerName")', { IDName: $('#IdName').val() }, function (data) {
                    //Do Something here with the data
                }); 
```

我想表格帖子会是

```
$.post('@Url.Ation("ActionName", "ControllerName")', function (data) {
                     //Do Something here with the data
              }); 
```

# scala - 使用Scala中的函数初始化类参数

> ID：14586539
> 
> 赞同：1
> 
> 时间：2013-01-29T15:35:53.467
> 
> 标签：scala

是否可以在 Scala 中使用函数初始化类参数？

例子：

```
def square(x: Int) = x*x

class Foo(val x: Int = square(x)) 
```

这不会编译，但我希望你明白这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T18:00:16.100

很难猜出您要达到的目标，但让我试一试：

```
class Foo private (val x: Int)

object Foo {
  def apply(x: Int) = new Foo(square(x))
} 
```

请注意，如果您在 REPL 中尝试此操作，则必须同时输入类及其伴随对象（在粘贴模式下，通过`:pa`），否则`object Foo`将无法访问私有类构造函数。

这在创建实例之前将`square`函数应用于参数：`x``Foo`

```
scala> Foo(3).x
res1: Int = 9 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T15:50:14.523

这是不可能的，因为您尝试`x`根据`x`（没有任何基本情况）进行计算。您可以执行以下操作：

```
class Foo(_x: Int) {
  val x = square(_x)
}

println(new Foo(10).x) // 100 
```

**编辑**

您还可以概括这一点并隐式将函数传递给转换的类构造函数`x`：

```
implicit val square = (x: Int) => x*x

class Foo(private val _x: Int)(implicit f: Int => Int) {
  val x = f(_x)
}

println(new Foo(10).x) // 100 
```

不幸的是，这**不能按原样编译**（Scala 2.9.2、2.10.0），因为作用域（`Predef.conforms`）中还有另一个隐式。我不知道如何克服这种歧义，但它肯定是可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T17:39:14.930

在这里..你可以用一个函数初始化一个类！:)

```
 class Foo(f : Int => Int)

  def square(x : Int) = x*x                     

  val foo = new Foo(square) 
```

或者可能你一定在寻找这个。

```
 class Foo(f : Int => Int, _p1 : Int){
   val p1 = f(_p1)
  }

  def square(x : Int) = x*x                       //> square: (x: Int)Int
  def add2(x : Int) = x+2                         //> add2: (x: Int)Int

  val fooSqr = new Foo(square,5)                  
  fooSqr.p1                                       //> res0: Int = 25

  val fooAdd2 =  new Foo(add2,5)                 
  fooAdd2.p1                                      //> res1: Int = 7 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T15:59:51.363

[通常，您可以在定义默认值 ( source](http://www.artima.com/scalazine/articles/named_and_default_parameters_in_scala.html) )时使用任意表达式。

您的问题是您不能在初始化的右侧使用 x ，因为此时 x 可能既没有声明也没有初始化。

# nsis - NSIS - 关闭当前窗口

> ID：14586545
> 
> 赞同：1
> 
> 时间：2013-01-29T15:36:04.327
> 
> 标签：nsis

我正在使用 NSIS 创建安装程序。当用户再次单击可执行文件时，我将再次进行安装并从用户那里获得描述。这会导致安装同一应用程序的多个实例。

在此页面上，我显示了一个取消按钮以退出设置，但我无法关闭当前的安装程序应用程序。如果用户单击取消按钮以中止应用程序，我想关闭设置。

我该怎么做才能使取消按钮取消当前安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:23:52.917

我只能想象你的取消按钮不起作用的原因......也许你已经定义了一个虚假的`.onUserAbort`回调函数？如果您执行`Abort`内部 .onUserAbort，则会阻止用户关闭安装程序...

# java - 如果不指定泛型类型，方法不会返回元素列表，而只是返回一个列表

> ID：14586547
> 
> 赞同：4
> 
> 时间：2013-01-29T15:36:18.603
> 
> 标签：java, generics

在 Java 中使用泛型时，我遇到了一些不便。请考虑以下代码：

```
/**
 * MyElement class is simply a wrapper for a generic object.
 */

public static class MyElement<T> {
    public final T OBJ;

    public MyElement(T obj) {
        this.OBJ = obj;
    }
}

/**
 * MyElementList contains an array list of MyElements of the given type, T.
 * This represents a class that uses a list of MyElements of a certain type,
 * and this list can be accessed in an unmodifiable format.
 */

public static class MyElementList<T> {

    //Properties
    private List<MyElement<T>> elementList = new ArrayList();

    //CTOR
    public MyElementList(List<MyElement<T>> initElements) {
        elementList.addAll(initElements);
    }

    //Getter
    public List<MyElement<T>> getElements() {
        return Collections.unmodifiableList(elementList);
    }

}

public static void main(String[] args) {
    //New list of elements
    //Notice that I did not explicitly specify the type for 'MyElement'
    List<MyElement> theElements = new ArrayList(Arrays.asList(
                new MyElement[] {
                    new MyElement("E 1"),
                    new MyElement("E 2"),
                    new MyElement("E 3")
                }
            ));

    //Also notice I did not explicitly specify the type for 'MyElementList'
    MyElementList theList = new MyElementList(theElements);

    //The following does not work.
    //It seems to not work because theList.getElements() returns a 'List'
    //not necessarily a 'List<MyElement>' which is what I would expect it to
    //return...
    //Why???

    for(MyElement e : theList.getElements()) {
        System.out.println(e.OBJ.toString());
    }

    //Currently my work around is to do the following, but I do not like 
    //having to introduce another variable, and I would rather just do the 
    //one above

    List<MyElement> listOfElements = theList.getElements();
    for(MyElement e : listOfElements) {
        System.out.println(e.OBJ.toString());
    }

    //How come the first 'for-each' loop method does not work?
    //Is there anyway I could get it to work?
    //THANK YOU!
} 
```

在 main 方法中，如果我没有为“MyElementList”指定类型参数，那么“getElements()”方法只返回一个“List”，而不是一个“List<MyElement>”。这很不方便，因为如果我想遍历每个“MyElement”，我需要引入另一个变量作为临时列表，如代码所示。

*   为什么“getElements()”方法不返回“List<MyElement>”？
*   在不对“MyElementList”进行重大更改的情况下，我能做些什么来解决这个问题吗？
*   这是一个糟糕的设计实践吗？

我使用的 IDE 是 Netbeans 7.2

提前致谢！

**编辑**

谢谢大家的快速回复。我对这里的社区印象深刻。我得出以下结论：

*   如果没有指定泛型提示，Java 会忽略一个类的所有其他相关的泛型提示——这有点蹩脚，但我可以忍受。
*   使用泛型时，最佳实践是在创建类的实例时实际指定泛型类型。这似乎是最面向对象的解决方案。

再次感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:47:13.433

如果你改变`MyElementList`看起来像

```
public static class MyElementList<T extends MyElement> {

  //Properties
  private List<T> elementList = new ArrayList<T>();

  //CTOR
  public MyElementList(List<T> initElements) {
      elementList.addAll(initElements);
  }

  //Getter
  public List<T> getElements() {
      return Collections.unmodifiableList(elementList);
  }
} 
```

它应该工作。

**编辑**泛型可以看作是 Java 中的编译时提示，因为 Java 擦除会将泛型转换为 Object。如上所述更新您的类将告诉编译器仅扩展`MyElement`适合列表并且`for(MyElement e : theList.getElements())`可以工作的元素。

**编辑 2**正如其他人所指出的（对不起，我乍一看没有看到）也将原始声明更改为：

```
MyElementList<MyElement> theList = new MyElementList<MyElement>(theElements); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:52:08.313

而不是使用

```
for(MyElement e : theList.getElements()) {
    System.out.println(e.OBJ.toString());
} 
```

你可以使用

```
for (Iterator<MyElement> it = theList.getElements().iterator(); it.hasNext();) {
    MyElement e = it.next();
    System.out.println(e.next().OBJ.toString());
} 
```

这使您的编译器兼容。

但我更愿意指定你的类在实例化/访问它们时需要的类型（我猜你的编译器也是如此`;)`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T15:53:25.017

Te first 不起作用，因为`getElements`返回`List<?>`原始类型的 a

第二个有效，因为您将其分配给 a `List<MyElement>`，而忽略了警告。忽略是可以的，因为你知道它包含什么，但编译器不知道。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T16:00:37.043

> 为什么该`getElements()`方法不返回a`List<MyElement>`

因为`MyElement`是打字！

> 在不进行重大更改的情况下，`MyElementList`我可以做些什么来解决这个问题吗？

您可能可以使用通配符：

```
List<MyElement<?>> someList = getElements(); 
```

# c# - 尝试在发生异常后重新加载 XML

> ID：14586549
> 
> 赞同：0
> 
> 时间：2013-01-29T15:36:25.683
> 
> 标签：c#, xml, try-catch, linq-to-xml

我在一个恒定的循环中访问一个 web 服务，但是在几个请求之后，服务器返回一个 503 错误，我认为这可能是由重复请求的数量引起的。（你同意我的观点吗？）

我想做的是，根据下面的链接问题，创建一个重试函数，尝试多次加载 xml，每次尝试等待几秒钟。

[“C# 编写重试逻辑的最简洁方式？”](https://stackoverflow.com/questions/1665660/ideal-class-name-for-static-class-for-misc-functionalities)

```
foreach (var item in ListofItems){
XDocument.Load(URL) //this returns 
.... //handle xml data
} 
```

上面的代码可能会返回描述的异常（503），我想重新调整定义为我链接到这篇文章的问题的答案的扩展方法。

如果成功完成，它应该返回请求的 XmlDocument 结果。

这是我的尝试。

```
static XDocument RetryXMLLoadAction(Action action, int numRetries, int retryTimeout)
        {
            if (action == null)
                throw new ArgumentNullException("action"); // slightly safer...

            do
            {
                try { XDocument result = action(); return result; }
                catch
                {
                    if (numRetries <= 0) throw;  // improved to avoid silent failure
                    else Thread.Sleep(retryTimeout);
                }
            } while (numRetries-- > 0);
        } 
```

# android - Android 4.2 的 ADT 版本是多少？

> ID：14586550
> 
> 赞同：1
> 
> 时间：2013-01-29T15:36:34.360
> 
> 标签：android

我的问题是：ADT 是否与特定的 android 版本相关？我的意思是，当我们说 exp android 4.2 时，这是否意味着我们正在使用（插件）ADT 21.0.1？还是Android版本和ADT版本没有关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:39:07.897

> ADT 是否与特定的 android 版本相关？

不。

> 还是Android版本和ADT版本没有关联？

正确的。通常有一个 ADT 版本大约与 Android SDK 版本同时发布，但 ADT 也会在 SDK 版本之间进行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:44:16.920

听起来您正在寻找 Android [API 级别](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html#ApiLevels)。

# php - PDO fetch 给出一般错误子查询

> ID：14586553
> 
> 赞同：1
> 
> 时间：2013-01-29T15:36:35.857
> 
> 标签：php, mysql, database, pdo

我有一个带有子查询的查询，以根据 tune_value 获取每行的排名。如果我尝试获取结果，我会从 PDOStatement::fetchAll(); 中得到一般错误。准备语句的执行似乎没有引发任何错误。

我有以下查询

```
SET @rank := 0;
SELECT * FROM 
(
  SELECT *,
         (UNIX_TIMESTAMP(NOW()) - UNIX_TIMESTAMP(tunes.creation_date)) as age,
         @rank := @rank + 1 as rank
  FROM tunes
  ORDER BY tune_value DESC
) as t
LEFT JOIN artists ON artists.id = t.artists_id
ORDER BY age 
```

我使用以下简化的 php 代码准备语句。

```
 $pdo->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
   $stmt = $pdo->prepare($sql);
   $stmt->execute();
   $stmt->fetchAll(\PDO::FETCH_ASSOC); 
```

用php做这个子查询是不可能的吗？我在考虑也许可以查看子查询。

编辑：澄清查询在 phpmyadmin 中工作正常

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:43:02.673

PDO 不支持一次调用中的多个查询。
（意思是PDO支持子查询没问题，只是**不支持用分号分隔的多个查询**）
你必须一一调用。
要从 PDO 获取错误，请设置此属性

```
$pdo->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION ); 
```

编辑：这意味着这`SET @rank := 0;`是一个单独的查询，应该在单独的调用中查询

# php - wp数据库查询上的foreach循环

> ID：14586561
> 
> 赞同：2
> 
> 时间：2013-01-29T15:36:58.947
> 
> 标签：php, wordpress

我使用 WordPress 作为我最喜欢的 cms 软件。使用过不同的 WordPress 特定查询，如`WP_Query`、`get_posts`、`query_posts`等。

我的问题是关于编程方面的。如果我需要`foreach`在特定的 WordPress 查询->循环中使用例如循环怎么办？我想，有时不需要在另一个 wp 循环中使用 wp 循环，建议使用简单的 php 循环？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:39:19.493

你是对的。在某些情况下，不需要在现有循环中执行另一个数据库查询。在这种情况下，您可以使用`foreach`循环。

*例子：*

```
$childrens = query_posts('showposts=10&&post_type=post');
foreach ( $childrens as $children ) {
    // dos tuff here
} 
```

要查看存储在 中的数据`$children`，请使用`print_r()`：

```
print_r( $childrens ); 
```

`$children->ID`是对象属性的示例。

让我知道。

**编辑：**更多关于的文档`foreach`，这里：[php-net foreach loops](http://www.php.net/manual/en/control-structures.foreach.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:44:26.747

您可以在另一个循环中循环：

```
<?php while(have_posts()): the_post() ?>

    <h2><?php the_title() ?></h2>
    <?php
        // preserve global post variable
        global $post; $temp = $post;
        $args = array('posts_per_page'=>3);
        $args['tax_query'] = array(
            array(
                'taxonomy' => 'category',
                'terms' => array('featured'),
                'field' => 'slug',
            )
        );
        $new_query = new WP_Query($args);
        while($new_query->have_posts()): $new_query->the_post();
    ?>
    <h3>Featured: <?php the_title() ?></h2>
    <?php endwhile; $post = $temp; wp_reset_query(); ?>

<?php endwhile; ?> 
```

上面的代码显示了“精选”类别中的 3 个最新帖子。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T15:44:35.020

您*不需要*使用`foreach`，但如果您愿意，可以使用。

当前版本的 WordPress（3.5 及更低版本）没有实现[interators](http://php.net/manual/en/class.iterator.php)，但它提供了一些具有迭代器功能的方法。

例如`$query->`[`have_posts()`](http://codex.wordpress.org/Class_Reference/WP_Query)将前进到下一篇文章。[但是在使用“循环](http://codex.wordpress.org/The_Loop)`$query->the_post()`”中有效的函数之前，您仍然需要设置 WP 全局变量，因为这些函数依赖于全局变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T15:45:08.397

`The Loop`虽然完全取决于您如何构建页面，但在 WordPress中肯定有内部循环的用例。

假设您有一个包含帖子列表的索引页面，并且您希望在每个帖子下列出“相关帖子”。例如，您可以循环浏览您的帖子，然后使用`WP_Query`to`foreach`浏览具有相同标签的最近帖子。

# asp.net - 让 Styles.Render() 保留 Razor 模板的缩进？

> ID：14586562
> 
> 赞同：4
> 
> 时间：2013-01-29T15:37:01.753
> 
> 标签：asp.net, razor, asp.net-mvc-4, indentation, bundling-and-minification

我对所有标记的可读性（以及缩进）有点着迷。

当我调用`@Styles.Render("~/content/css")`ASP.NET MVC4 项目时，**只有第一行维护**我的 Razor 模板的缩进。

这是输出：

```
 <link href="/Content/css/ie.css" rel="stylesheet"/>
<link href="/Content/css/1140.css" rel="stylesheet"/>
<link href="/Content/css/screen.css" rel="stylesheet"/>
<link href="/Content/css/compatibility.css" rel="stylesheet"/> 
```

我希望所有生成的标记都具有与`@Styles.Render()`调用相同的缩进。

这很容易做到吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-30T00:06:54.607

理想情况下，渲染的 HTML 会被缩小。格式化标记在开发时非常有用，但如果这是您为用户提供的内容，则会生成更大的文件。

您看到四个样式表的唯一原因是您在调试环境中运行，该环境已禁用您的捆绑。正如我在“[使用过时的 javascript 文件的 Scripts.Render](https://stackoverflow.com/questions/14570171/scripts-render-using-outdated-javascript-file/14570455#14570455) ”一文中解释的那样，如果您添加`BundleTable.EnableOptimizations = true;`到您`RegisterBundles`的`BundleConfig`.

```
 <link href="/Content/css/ie.css" rel="stylesheet"/>
<link href="/Content/css/1140.css" rel="stylesheet"/>
<link href="/Content/css/screen.css" rel="stylesheet"/>
<link href="/Content/css/compatibility.css" rel="stylesheet"/> 
```

现在呈现为：

```
 <link href="/Content/css?v=Sn3f8Vf56Sr9k0EreIZnouVoGt2cfrd41" rel="stylesheet"/> 
```

所以是的，在开发过程中，它不会保持你的缩进，但是一旦你发布它就会是你想要的。

# android - InputStream 不通过蓝牙读取

> ID：14586563
> 
> 赞同：2
> 
> 时间：2013-01-29T15:37:04.483
> 
> 标签：android, bluetooth, inputstream

我有两个通过蓝牙连接的设备。我想将更多字符串从一个设备发送到另一个设备，但方法 read() 无法正常工作（仅当我想读取最后一个字符串时）。

奇怪的是，它适用于：

```
inStream.read(keyRead);
outStream.write(answer.getBytes(charsetCod));
inStream.read(sizeRead);
inStream.read(messageRead);
inStream.read(timeSent); 
```

但它仅在应用程序执行以下操作时才起作用：

```
int byteRead = inStream.read(alreadyReceived); 
```

有人可以帮助我理解为什么它不读？（对不起，我的英语不好）

这是代码：

当我从 InputStream 中读取时：

```
public void run(BluetoothDevice device)  {
    Log.i(TAG, "Sono nel run del ConnectedThread");
    dev_recipient = btAdapter.getName();    // se sto per leggere, il destinatario sono io
    dev_sender = device.getName();

    Log.i(TAG, "il mittente è: " + dev_sender);
    Log.i(TAG, "Il destinatario è " + dev_recipient);
    mac_sender = device.getAddress();
    mac_recipient = btAdapter.getAddress();

    byte[] keyRead = new byte[50];
    byte[] sizeRead = new byte[10];
    byte[] timeSent = new byte[100];
    byte[] alreadyReceived = new byte[500];
    String message;
    String sentTime;

    while (true) {                  // finchè è connesso
        try {
            messDB = new MessagesDatabase(context);
            messDB.getWritableDatabase();

            Log.i(TAG, "Destinatario: Ricevo la chiave del messaggio");
            inStream.read(keyRead);
            String keyS = new String(keyRead);
            int indkeyS = keyS.indexOf("#end", 0);
            String key = keyS.substring(0, indkeyS);
            Log.i(TAG, "Stringa chiave del messaggio: " + key);

            Log.i(TAG, "Controllo se ho già ricevuto il messaggio");

            if(messDB.existsMess(key)){
                Log.i(TAG, "Destinatario: Il messaggio è già stato ricevuto");
                Log.i(TAG, "Destinatario: Informa il mittente di non inviare");
                answer = "NO#end";
                outStream.write(answer.getBytes(charsetCod));
                outStream.flush();
                run(device);

            }
            else {
                Log.i(TAG, "Destinatario: Il messaggio non è stato mai ricevuto");
                Log.i(TAG, "Destinatario: Informa il mittente di inviare");
                answer = "YES#end";
                outStream.write(answer.getBytes(charsetCod));
                outStream.flush();

                Log.i(TAG, "Destinatario: Ricevi la grandezza del messaggio");
                inStream.read(sizeRead);
                String s =  new String(sizeRead);
                int ss = s.indexOf("#end", 0);
                Log.i(TAG, "indice di #end: " + ss);
                String sz = s.substring(0, ss);
                Log.i(TAG, sz);
                int size = Integer.parseInt(sz);
                Log.i(TAG, "La grandezza del messaggio è " + size);
                byte[] messageRead = new byte[size];

                Log.i(TAG, "Destinatario: Ricevi il messaggio");
                inStream.read(messageRead);
                message = new String(messageRead);      // converte i bytes in String
                Log.i(TAG, "Ricevuto messaggio dall'inputStream: " + message);

                Log.i(TAG, "Destinatario: ottengo data e ora di ricezione messaggio");
                long receivedTime = System.currentTimeMillis();
                DateFormat df = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss:SSS");
                Date dt = new Date(receivedTime);
                String receivedTimeString = df.format(dt);
                Log.i(TAG, "Il messaggio è stato ricevuto alle " + receivedTimeString);

                Log.i(TAG, "Destinatario: Ricevo ora e data di invio messaggio");
                inStream.read(timeSent);
                sentTime = new String(timeSent);
                int senInd = sentTime.indexOf("#end", 0);
                String sentTimeSender = sentTime.substring(0, senInd);
                Log.i(TAG, "Il messaggio è stato inviato il: " + sentTimeSender);

                Log.i(TAG, "Destinatario: Ricevo gli already received");
                int byteRead = inStream.read(alreadyReceived);
                Log.i(TAG, "sono stati letti " + byteRead + " byte");
                String ar = new String(alreadyReceived);
                Log.i(TAG, ar);
                int arInd = ar.indexOf("#end", 0);
                String myAr = ar.substring(0, arInd);
                Log.i(TAG, myAr);
                String allReceived = myAr.concat(";mac_recipient");
                Log.i(TAG, "AlreadyReceived: " + allReceived);

                Log.i(TAG, "Destinatario: Informo il mittente che ho ricevuto il messaggio");
                String answOk = "OK#end";
                outStream.write(answOk.getBytes(charsetCod));

                String path = saveMessageAsFile(key, message);

                Log.i(TAG, "Destinatario: Invio l'intent per mostrare all'utente il messaggio ricevuto");
                Intent intent = new Intent(ACTION_MESS_READ);
                intent.putExtra("key_mess", key);
                intent.putExtra("messRead", message);
                intent.putExtra("sender", dev_sender);
                context.sendBroadcast(intent);
                Log.i(TAG, "Intent concluso");

                addMessageToDb(key, message, dev_sender, dev_recipient, receivedTimeString, sentTime, path, allReceived, size);

                read(device);
            }

        }
        catch (IOException e) {
            Log.e(TAG, "Disconnesso!", e);
            connectionLost();
            ManageConnections.this.start();     // riavvia la connessione
            break;
        }
    }   
} 
```

对于写作：

```
public void write(final String key, final BluetoothDevice device) {
        dev_sender = btAdapter.getName();
        dev_recipient = device.getName();
        mac_sender = btAdapter.getAddress();
        mac_recipient = device.getAddress();

        final byte[] answerClient = new byte[10]; 
        final byte[] ricevuto = new byte[10];

        try {  
            final String keyy = key.concat("#end");
            final byte[] keyWrite = keyy.getBytes(charsetCod);
            outStream.write(keyWrite);        // invia la chiave del messaggio
            outStream.flush();
            Log.i(TAG, "Mittente: ho inviato la chiave del messaggio al destinatario, aspetto la risposta..");
            try {
                inStream.read(answerClient);
                final String answerC = new String(answerClient);
                Log.i(TAG, answerC);
                final int ansInd = answerC.indexOf("#end", 0);
                Log.i(TAG, "indice: " + ansInd);
                answer = answerC.substring(0, ansInd);
                Log.i(TAG, "Mittente: la risposta del dispositivo: " + answer);

                if (answer == "NO") {
                    Log.i(TAG, "Mittente: Il messaggio è già stato ricevuto, non inviare");
                    aggiornaAlreadyReceived(device.getAddress(), key);

                }
                else {
                    Log.i(TAG, "Mittente: Il messaggio non è stato ricevuto, invia..");
                    messDB = new MessagesDatabase(context);
                    messDB.getWritableDatabase();
                    final Messaggio m = messDB.getMessage(key);

                    Log.i(TAG, "Mittente: Invio la grandezza del messaggio");
                    final int size = m.getSize();
                    Log.i(TAG, "La grandezza è " + size);
                    final String sizeString = String.valueOf(size);
                    final String ss = sizeString.concat("#end");
                    Log.i(TAG, ss);
                    final byte[] sizeByte = ss.getBytes(charsetCod);                        
                    outStream.write(sizeByte);
                    outStream.flush();

                    Log.i(TAG, "Mittente: Invio il messaggio");
                    final byte[] message = m.getMessage().getBytes(charsetCod);
                    final long sentTime = System.currentTimeMillis();
                    outStream.write(message);
                    outStream.flush();

                    Log.i(TAG, "Mittente: Invio data e ora in cui il messaggio è stato mandato");                      
                    final DateFormat df = new SimpleDateFormat("dd/MM/yyyy HH:mm:ss:SSS");
                    final Date dt = new Date(sentTime);
                    final String sent = df.format(dt);
                    final String sentime = sent.concat("#end");
                    final byte[] sentTimeByte = sentime.getBytes(charsetCod);                      
                    outStream.write(sentTimeByte);
                    outStream.flush();

                    Log.i(TAG, "Mittente: Invio gli already_received");
                    final String myAlRec = m.getAlreadyReceived();
                    Log.i(TAG, myAlRec);
                    final String myAlreadyRec = myAlRec.concat("#end");
                    Log.i(TAG, myAlreadyRec);
                    final byte[] allReceived = myAlreadyRec.getBytes(charsetCod);
                    outStream.write(allReceived);
                    outStream.flush();

                    Log.i(TAG, "Mittente: Aspetto che il destinatario mi informi dell'arrivo del messaggio");
                    String ric = "";
                    inStream.read(ricevuto);
                    final String ricev = new String(ricevuto);
                    Log.i(TAG, "Il destinatario risponde con " + ricev);
                    final int ricInd = ricev.indexOf("#end", 0);
                    ric = ricev.substring(0, ricInd);
                    Log.i(TAG, ric);
                    if(ric == "OK") {
                        Log.i(TAG, "Mittente: Il destinatario ha ricevuto il messaggio");
                        aggiornaAlreadyReceived(mac_recipient, key);
                    }
                    else Log.i(TAG, "Mittente: Il messaggio non è stato ricevuto");

                    Log.i(TAG, "Mittente: Invio l'intent per informare l'utente che il messaggio è stato inviato");
                    final Intent intent = new Intent(ACTION_MESS_WRITE);
                    intent.putExtra("key_mess", key);
                    intent.putExtra("recipient", dev_recipient);
                    intent.putExtra("ric", ric);
                    context.sendBroadcast(intent);
                    Log.i(TAG, "Mittente: Intent concluso");

                }
            }
            catch (final Exception e) {
                Log.e(TAG, "Errore");
                e.printStackTrace();
            }

        }
        catch (final IOException e) {
            Log.e(TAG, "Eccezione durante la scrittura dell'id del messaggio", e);
            e.printStackTrace();
            final Intent intent = new Intent(ACTION_NO_MESSAGE);
            intent.putExtra("key_mess", key);
            context.sendBroadcast(intent);
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:50:42.893

```
public class BlueTooth
{
    public String tag = "Bluetooth";
    public static final UUID uuid = UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");
    public BluetoothAdapter adapter;
    public BluetoothDevice device = null;
    public BluetoothSocket socket = null;

    //public static final char ESC = (char) 27;
    //public static final char CR = (char) 13;
    //public static final char LF = (char) 10;

    public BlueTooth(String MAC)
    {
        this(MAC,null);
    }

    @TargetApi(Build.VERSION_CODES.GINGERBREAD_MR1)
    public BlueTooth(String MAC, byte[] pin)
    {
        try
        {
            adapter = BluetoothAdapter.getDefaultAdapter();
            // wait for enable this is not very correct
            if (!adapter.isEnabled()) {
                adapter.enable();
                SystemClock.sleep(5000);
                if (!adapter.isEnabled()) throw new IOException("Bluetooth is off");
            }

            if (!BluetoothAdapter.checkBluetoothAddress(MAC)) throw new Exception("Err MAC adress (" + MAC + ")");

            device = adapter.getRemoteDevice(MAC);
            // this is only for testing purpouse i dont use this
            if (pin!=null)
                setPin(pin);
            // i have some trouble with my device on different OS                
            if (android.os.Build.VERSION.SDK_INT > android.os.Build.VERSION_CODES.HONEYCOMB)
                socket = device.createInsecureRfcommSocketToServiceRecord(uuid);
            else
                socket = device.createRfcommSocketToServiceRecord(uuid);

        }
        catch (Exception e)
        {
            throw new RuntimeException(e);
        }
        finally
        {

        }
    }

    public void setPin(byte[] pin)
    {
        try
        {
            Method setPin = device.getClass().getMethod("setPin", byte[].class);
            setPin.invoke(device, pin);
            Log.i("BlueTooth", "PIN is set: "+new String(pin));
        }
        catch (Exception e)
        {
            e.printStackTrace();
        }
    }

    @Override
    protected void finalize() throws Throwable
    {
        disconnect();
        super.finalize();
    }

    // Android REfs recommend to cancel discover
    public boolean connect()
    {
        try
        {
            while (adapter.isDiscovering())
            {
                adapter.cancelDiscovery();
                Thread.sleep(1000);
            }

            socket.connect();
            return true;
        }
        catch(Exception e)
        {
            throw new RuntimeException(e.getMessage(),e);
        }
    }

    // After write is good(only for shure for next write) to clear buffer with flush    
    public void write(byte[] in) throws Exception
    {
        socket.getOutputStream().write(in, 0, in.length);
        socket.getOutputStream().flush();
    }

    // Wait for incomming data
    // if is something in the buffer start count but max 3sec 
    // 3 sec is defined by my device vendor for reply
    //
    // after it we something on buffer.
    // you must realize the reading is on the fly
    // there for you must wait after read to next data sleep(1mxec)
    // until data are available
    // then return
    public byte[] read() throws Exception
    {

        int treshHold = 0;
        while (socket.getInputStream().available()==0 && treshHold<3000)
        {
            Thread.sleep(1);            
            treshHold++;
        }

        ByteArrayOutputStream baos = new ByteArrayOutputStream();
        baos.reset();

        while (socket.getInputStream().available() > 0)
        {            
            baos.write(socket.getInputStream().read());
            Thread.sleep(1);   
        }

        return baos.toByteArray();

    }

    // This is little low
    // after disconnect you must create 
    // new socket
    // so after disconnect you are not able to use connect
    // withous createRFcommSocket
    public void disconnect() throws Exception
    {
        if (socket != null) socket.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:43:05.920

不能说我完全理解您的代码，但有一些提示可能会有所帮助。

请检查[管理连接](http://developer.android.com/guide/topics/connectivity/bluetooth.html#ManagingAConnection)部分。如你看到的;

> 您应该使用*专用线程*进行所有流读取和写入。这很重要，因为*read(byte[])*和*write(byte[])* 方法都是**阻塞调用**。*read(byte[])*将阻塞**，直到有 *东西*可以从流中读取**。*write(byte[])*通常不会阻塞，但如果远程设备没有足够快地调用*read(byte[])并且中间缓冲区已满，则可以阻塞以进行流控制。*因此，您在线程中的主循环应该专门用于从 InputStream 中读取数据。

首先，为了获得更好的设计，您应该使用一个专用线程进行读取，另一个线程用于写入。您应该将形成数据的部分分开，将其写入 OutputStream 并从 InputStream 中读取。

当我开始编写*Reader Thread*时， InputStream 的*read(byte[])*方法将阻止执行，直到有所需的字节数。但事实并非如此。我发现它确实会阻塞，直到从流中读取“某些东西”（我之前错过的部分）。

* * *

您有一个大小为 500 的字节数组。当您“不能”（在这种情况下）部分读取流时，日志中的条目是什么：

```
int byteRead = inStream.read(alreadyReceived);
Log.i(TAG, "sono stati" + byteRead + " byte"); 
```

我的观点是：考虑你的包裹是；0x01 0x02 0x03 0x04 0x05 0x06 0x07 0x08 0x09，您通过 OutputStream 写入发送它并刷新。您仍然可能在一次 read() 调用中**只获得其中的一部分**（甚至 1 字节 -> 0x01），并在下一次 read() 调用中获得其余部分（0x02 和其余部分）。在这种情况下`byteRead`，将等于 1`alreadyReceived[0]`并将为 0x01，其他元素将为 0

# html - Zend 框架：允许 HTML5 Doctype 的元属性（Facebook Open Graph）

> ID：14586564
> 
> 赞同：2
> 
> 时间：2013-01-29T15:37:06.563
> 
> 标签：html, zend-framework, facebook-opengraph, zend-view, rdfa

我`HTML5`在 Zend Framework 应用程序中使用 doctype。如果我使用`XHTML1_RDFA`我的文档类型，`headMeta`视图助手允许我使用该`appendProperty()`功能。我知道元属性在 HTML5 中无效，但我还是想这样做。如何覆盖该行为以便添加这些元标记？

我在 SO 上找到了这些相关的帖子，但他们没有回答这个具体问题：

*   [Zend 框架：元属性集成](https://stackoverflow.com/questions/4457467/zend-framework-meta-property-integration)
*   [HTML5 和 RDFa 支持](https://stackoverflow.com/questions/4177700/html5-and-rdfa-support)
*   [HTML5 的 Opengraph 验证](https://stackoverflow.com/questions/6501189/opengraph-validation-for-html5)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T14:37:19.510

我扩展了 HeadMeta 视图助手以允许它们。它也在[http://validator.w3.org/](http://validator.w3.org/)上验证。

```
class My_View_Helper_HeadMeta extends Zend_View_Helper_HeadMeta
{
    /**
     * Determine if item is valid
     *
     * @param  mixed $item
     * @return boolean
     */
    protected function _isValid($item)
    {
        if ((!$item instanceof stdClass)
            || !isset($item->type)
            || !isset($item->modifiers))
        {
            return false;
        }

        if (!isset($item->content)
        && (! $this->view->doctype()->isHtml5()
        || (! $this->view->doctype()->isHtml5() && $item->type !== 'charset'))) {
            return false;
        }

        // <meta property= ... /> is only supported with doctype RDFa
        if (!$this->view->doctype()->isRdfa()
            && !$this->view->doctype()->isHtml5()
            && $item->type === 'property') {
            return false;
        }

        return true;
    }
} 
```

# sharepoint - 保存 Infopath 表单 w。Sharepoint 2010 库中动态创建的字段

> ID：14586565
> 
> 赞同：1
> 
> 时间：2013-01-29T15:37:07.997
> 
> 标签：sharepoint, sharepoint-2010, infopath

我对 Infopath 很陌生，需要一些架构指南。我的情况如下：

我有一个 Sharepoint 列表，假设它包含啤酒和其中的三个项目：“Kronenbourg”、“Corona”、“Tuborg”。“啤酒”是一种内容类型，源自 Item。

## 我需要做什么 ：

我需要创建一个“动态”信息路径表单，为用户提供每种啤酒的复选框。如果将新啤酒添加到啤酒列表中，则新的复选框应在无需干预的情况下显示在表单上，​​即使在已保存的表单实例上也是如此。我还没有决定删除后会发生什么。

然后，我需要将此信息路径表单（包括选择）保存在共享点表单库中，以便用户可以返回到他们保存的许多啤酒表单之一，并可能更改选择。

我还需要在某个时间点从选择中构建一个字符串，并将该字符串显示在表单库的可见列中，但这超出了本文的范围。

## 到目前为止，我设法汇总的内容：

我有一种工作信息路径表格。我已将共享点数据连接添加到啤酒列表，并将重复表拖到设计区域。这个“有效”，我得到了我的列表项的列表。然后我将虚拟 Y/N 字段添加到我的啤酒内容类型中，在字段中选择它，现在我的记录旁边有一个简洁的复选框。

显然，这似乎不对。我不需要将任何内容保存回 Beer 表，我只需要使用 beer 表进行查找，并将选定的选项保留在已保存的表单实例中。

好的，谢谢你一直陪着我。我在这里做什么，可以说服 Infopath 支持这样的场景，还是我最好构建自定义 webpart？我认为我的主要问题是：

*   我可以将“仅输入”复选框附加到重复列表/部分吗？（以及如何引用这种动态创建的控件）

*   如何让 Infopath 从 db 动态加载选择，但将数据保存在表单的实例中？

*   我应该并且可以将内容类型附加到表单库，代表选择并以某种方式将其附加到表单吗？

感谢您的任何意见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:48:59.497

如果我了解您的要求，我认为这里要做的是使用多选列表框 (MSLB)。这可以从辅助数据源（即列表）填充其值，并且它将绑定到重复字段，该字段将在选择和取消选择值时自动添加和删除值。

至于将选择放入单个字符串中，如果您只想要表单库的列的此值，表单将提交到，您可以将此重复字段用作提升属性，并使用“聚合”将值合并为一个的选项。

另一种选择是创建一个单独的字段来保存字符串并使用“双重评估技巧”（请谷歌）将这些值组合成一个。这里的一个问题是，如果您对 MSLB 使用双重评估技巧，则必须将公式放在 MSLB 字段的规则中，*以及*目标字段的默认值公式中。

# liquibase - 在 includeAll 的情况下设置 Liquibase 变更集 id

> ID：14586566
> 
> 赞同：0
> 
> 时间：2013-01-29T15:37:17.123
> 
> 标签：liquibase

我有一个这样的变更日志文件：

```
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9 http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd">
    <includeAll path="tables" relativeToChangelogFile="true" /> 
    <includeAll path="latest/triggers" relativeToChangelogFile="true" />
    <includeAll path="latest/functions" relativeToChangelogFile="true" />
    <includeAll path="latest/procedures" relativeToChangelogFile="true" />
    <includeAll path="latest/views" relativeToChangelogFile="true" />       
    <changeSet author="myname" id="CHANGESET_ID" />
</databaseChangeLog> 
```

复制[自](http://www.liquibase.org/tutorial-using-oracle)

我只是对设置 CHANGESET_ID 感到困惑`<changeSet author="myname" id="CHANGESET_ID" />`

它应该是最小的变更集数量还是最大的变更集值？

我们需要把它全部收集到这个文件中吗？

我会很感激有人解释如何正确设置变更集值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:19:08.640

你不需要`<changeSet>`那里（但你可以包括任何）。关于命名变更集，[LiquiBase 最佳实践页面](http://www.liquibase.org/bestpractices)指出：

> 选择适合你的。有些使用从 1 开始的序列号并且在变更日志中是唯一的，有些选择描述性名称（例如“新地址表”）。

# templates - CakePHP 在哪里存储平面文件？

> ID：14586569
> 
> 赞同：0
> 
> 时间：2013-01-29T15:37:23.707
> 
> 标签：templates, cakephp, template-engine, flat-file

我正在构建一个允许用户浏览 html 模板的应用程序。html 模板会显示在预览区（源代码会被混淆），虽然模板会包含内联 CSS/JS，但也会有奇怪的链接图片资源。

出于这个原因，我认为最好将它们存储为文件夹库，然后从我的服务器中检索平面文件以进行显示，而不是将 HTML 存储在数据库中并且还必须组织外部资产.

我的问题是：在 CakePHP 目录结构中，这些文件的最佳位置是哪里？我宁愿把它们放在 webroot 之上，我在想*View*。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:17:49.287

我建议您保留所有与*cakephp-framework*相关的文件，存储在 webroot 下。

我的建议是以下用于保存 html 模板以及 css 和 js 相关文件的目录结构。

`/webroot/files/templates/<template-project-name>/<the-actual-file>.html`

任何外部 css，然后将在 `/webroot/css/templates/<template-project-name>/<the-actual-css>.css`

JS库将在 `/webroot/js/templates/<template-project-name>/<the-actual-js>.js`

使用单独的布局文件（调用它`preview_layout.ctp`），它只是按原样呈现模板文件。

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:04:56.017

当它们是公开可见的资产时，为什么要将它们存储在 webroot 之上？我的直觉是它们确实属于 webroot 或数据库。我会选择其中一个。

如果您必须将它们存储在 webroot 之上，我想最好的办法可能是将它们存储为元素。

`app/View/Elements/your_templates/`

这样，您可以使用以下命令将其加载到 View 的预览区域中：

```
echo $this->element('your_templates/template'); 
```

**编辑：**

老实说，元素的建议不是我会推荐的，我只是想为您提供不同的建议。这将是非常糟糕的做法，我认为它会比它的价值更混乱和有问题。

至于图像文件，无论您选择将 HTML 模板存储在何处，都将它们放在 webroot 中。无论如何，一旦人们在浏览器中查看图像，您就无法阻止他们下载图像。

# function - 如何将函数返回的列表设置为记录？

> ID：14586571
> 
> 赞同：1
> 
> 时间：2013-01-29T15:37:26.323
> 
> 标签：function, applescript, record

以下函数返回一个列表 - {1,2,3}

我想将列表中的每个项目输入到具有不同值和键的记录中。

有没有更简单的方法来做到这一点？

```
on somefunc()
    return {1, 2, 3}
end somefunc

set {a, b, c} to somefunc()
set my_record to {a:a, b:b, c:c} 
```

这就是我基本上想要的：

```
{a:1, b:2, c:3} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:33:15.423

处理记录时，我喜欢使用[ASObjC Runner](http://www.macosxautomation.com/applescript/apps/runner_vanilla.html)

这是记录套件中的一个示例：

```
tell application "ASObjC Runner" to link values {1, 2, 3} with labels {"a", "b", "c"} 
```

编辑

您还可以使用运行脚本方法：

```
set myRecord to {}
set listA to {"a", "b", "c"}
set listB to {1, 2, 3}

repeat with i from 1 to count of listA
    set myRecord to myRecord & (run script "return {" & item i of listA & ":" & item i of listB & "}")
end repeat 
```

# ruby-on-rails - 模块内控制器的规格（版本主义者）

> ID：14586573
> 
> 赞同：1
> 
> 时间：2013-01-29T15:37:38.887
> 
> 标签：ruby-on-rails, ruby, rspec, module

我在 Rails 中创建一个 API，并使用[versionist](https://github.com/bploetz/versionist)来处理版本。我想测试 API 控制器，但无法创建有效请求。

我的控制器：

```
 class Api::V1::ItemsController < Api::V1::BaseController    
  def index
    render json:'anything'
  end
end 
```

我的规格：

```
describe Api::V1::ItemsController do
  describe "#create" do
    it "shows items" do
      get :index, format: :json
    end
  end
end 
```

路线.rb：

```
scope '/api' do
  api_version(:module => "Api::V1", :path => {:value => "v1"}, :default => true) do
    resources :items
  end
end 
```

测试不检查任何东西。尽管如此，它还是引发了一个错误：

```
 Failure/Error: get :index, format: :json
 ActionController::RoutingError:
   No route matches {:format=>:json, :controller=>"api/v1/items", :action=>"index"} 
```

我想`:controller`请求中的密钥有问题，但我不知道如何修复它......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T22:39:29.830

我能够在本地重现这个。您需要将此移动到请求规范而不是控制器规范才能使其工作：

```
# spec/requests/api/v1/items_controller_spec.rb
describe Api::V1::ItemsController do
  describe "#index" do
    it "shows items" do
      get '/api/v1/items.json'
      # assert something
    end
  end
end 
```

版本主义文档说在使用 HTTP 标头或请求参数版本控制策略时需要这样做（[https://github.com/bploetz/versionist#a-note-about-testing-when-using-the-http-header- or-request-parameter-strategies](https://github.com/bploetz/versionist#a-note-about-testing-when-using-the-http-header-or-request-parameter-strategies)），但这里显然不是这种情况。我将提出一个问题，以便在文档中澄清您需要为*所有*版本控制策略执行此操作。

# iphone - 带有详细文本的 UIPickerView

> ID：14586576
> 
> 赞同：0
> 
> 时间：2013-01-29T15:37:45.917
> 
> 标签：iphone, uipickerview

伙计们！

我正在寻找如何创建带有标签和详细标签的选择器视图，如下面的链接，但我做不到。

[http://itunes.apple.com/us/app/convert-the-unit-calculator/id325758140?mt=8](http://itunes.apple.com/us/app/convert-the-unit-calculator/id325758140?mt=8)。（对不起，我无法发布图片）。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:45:13.157

我相信在原生 PickerView 中不可能有细节标签。您可以从 UITableView 创建自己的自定义选择器视图，自定义您的单元格。

看看[这里](http://www.cocoacontrols.com/platforms/ios/controls/afpickerview)的 AFPickerView 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:03:48.563

退房[`-[UIPickerViewDelegate pickerView:viewForRow:forComponent:reusingView:]`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIPickerViewDelegate_Protocol/Reference/UIPickerViewDelegate.html#//apple_ref/occ/intfm/UIPickerViewDelegate/pickerView%3aviewForRow%3aforComponent%3areusingView%3a)。

# javascript - jQuery Mobile 单页和多页网站没有过渡和其他问题

> ID：14586578
> 
> 赞同：0
> 
> 时间：2013-01-29T15:37:48.947
> 
> 标签：javascript, jquery, html, cordova, jquery-mobile

我真的很难用 Phonegap 和 jQuery 加载多页模板。

这里我有两个页面（`home`和`1`），但是当我加载页面时，它只显示第二个“页面”div（`1`，不是`home`）并且没有链接更改页面。

将页面作为两个单独的 .html 文件，我无法让转换工作 - 在这里我更落后了一步，因为我什至无法更改页面！

代码：

```
<script type="text/javascript" src="cordova-2.3.0.js"></script>
<script type="text/javascript" src="js/index.js"></script>
<script type="text/javascript" src="js/iscroll.js"></script>    
<script type="text/javascript" src="js/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script>

<body>
    <div data-role="page" id="home">
        <div id="header"><h1>Title</h1></div>
        <div id="wrapper">
            <div id="scroller">
                <div id="content">
                    <a href="#1" data-transition="slide">Link to Page 2</a>
                </div>
            </div>
        </div>
        <div id="footer"><a href="about.html"><div class="footer_abt"></div></a></div>
    </div>

    <div data-role="page" id="1">
        <div id="header"><h1>Tummy Time</h1></div>
        <div id="wrapper">
            <div id="scroller">
                <div id="content">
                    <!-- Content Here -->
                </div>
            </div>
        </div>
        <div id="footer">
            <a href="#home"><div class="footer_home"></div></a>
        </div>
    </div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:29:40.433

据我所知，jQuery Mobile 并不适用于多个静态页面。我的意思是，我想你可以做到这一点，但我怀疑任何转换都行得通。此外，如果您通过 PhoneGap 进行编译，它肯定不会起作用。

如果您想要多个视图，我建议切换到 MVC js 框架，例如 Backbone.js 或 Sencha Touch。

# android - 使用 android:name 的 startActivity

> ID：14586579
> 
> 赞同：1
> 
> 时间：2013-01-29T15:37:49.493
> 
> 标签：android

清单定义：

```
 <activity android:name="com.gannett.democratandchronicle.billstrainingcamp.PlayersActivity" /> 
```

作品：

```
startActivity(new Intent(this, PlayersActivity.class)); 
```

不工作：（未找到活动）

```
startActivity(new Intent("com.gannett.democratandchronicle.billstrainingcamp.PlayersActivity")); 
```

为什么我不能使用完整的 android:name 来启动Activity？字符串参数是否期望有所不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:41:47.623

这是一个[动作](http://developer.android.com/reference/android/content/Intent.html#Intent%28java.lang.String%29)，而不是一个名字。如果您希望能够以这种方式启动您的活动，请添加

```
<intent-filter>
     <action android:name="com.gannett.democratandchronicle.billstrainingcamp.PlayersActivity" />
</intent-filter> 
```

到您的活动，或者您可以为操作使用任何您想要的名称，它不必是类的名称。但是，它确实必须有一个命名空间。

# html - 如何让锚标签居中在 DIV 中？

> ID：14586580
> 
> 赞同：0
> 
> 时间：2013-01-29T15:37:51.273
> 
> 标签：html, css

```
<div style="border: 1px solid rgb(0, 0, 0); height: 30px; width: 30px; background-color: rgb(245, 225, 130);">
  <div style="margin: 5px;">
    <a href="#link">#down2#</a>
  </div>
</div> 
```

这就是我目前正在尝试的代码。目前有点乱。但基本上，我正在努力做到这一点，所以我有一个 25px x 25px 的 div 来存储这些框中的页面编号（分页器的一部分），我想要它，所以数字 1 与数字 100 一样居中. 目前 number1 使盒子在我必须居中的方法中缩小，但是当我创建一个定义的盒子大小时，它只是将数字对齐。有人知道在 div 中居中元素的快速修复方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:39:57.153

```
<a style="display:block; text-align:center"; href="#link#">#down2#</a> 
```

另外，小写你的元素，不再是九十年代了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:40:40.233

使用当前文本，您的 Div 很小。例如，如果仅使用数字“1”，您将得到您正在寻找的东西。

```
<DIV style="border: 1px solid RGB(0, 0, 0); height: 30px;width:30px;  background: RGB(245, 225, 130);">
  <DIV style="margin: 5px;">
    <A href="#link#">1</A>
  </DIV>
</DIV>

a {
    display:block;
    text-align:center;
} 
```

[http://jsfiddle.net/MD2V6/](http://jsfiddle.net/MD2V6/)

**编辑：这是一个更干净的例子。**

HTML：

```
<div>
    <a href="#link#">1</a>
</div> 
```

CSS：

```
div {
    border: 1px solid RGB(0, 0, 0); 
    height: 30px;
    width:30px;
    background: RGB(245, 225, 130);
}
a {
    padding:5px;
    display:block;
    text-align:center;
} 
```

[http://jsfiddle.net/MD2V6/2/](http://jsfiddle.net/MD2V6/2/)

# javascript - 试图在对象数组中实现一个数组

> ID：14586591
> 
> 赞同：0
> 
> 时间：2013-01-29T15:38:32.640
> 
> 标签：javascript, google-apps-script, iife

在 Google Apps JS 中。我想实现一个对象数组，每个对象都有属性和方法。其中一个属性需要是一个对象数组，我希望能够通过使用父数组中的方法来访问这个数组。

到目前为止，我最大的努力是：

```
function myFunction () {
  var teamNo = 3;
  var allNames =["n1","n2","n3","n4"] ;
  var createnames = function () {
    var names = [];            
    for ( var j = 0; j <=3 ; j ++) {      
      (function (j) {
        var localNames = ["local1-names"+j,"local2-names"+j];
        names[j] = (function (player){
          return {
            namArr: localNames,
            name:   allNames[j],         
            addName: (function (player){
              localNames.push(player);
            }) (player),
             team:   teamNo            
          };         
        });
      }) (j);
    }
    return names;
  }
  var myname = createnames();
  var foo = myname[0]().namArr;
  var foo1 = myname[1]().namArr;
  myname[1]().addName("added");
  var foo2 = myname[1]().namArr;
  var foo3 = myname[2]().namArr;
  var debug = true;
} 
```

当我添加代码来实现子数组时，我得到一个运行时错误，说 addName 不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:49:36.640

您正在立即调用它：

```
addName: (function (player) {
    localNames.push(player);
})(player) 
```

而不是分配它：

```
addName: function (player) {
    localNames.push(player);
} 
```

此外，每个`names[]`函数都需要一个`player`，函数也是如此`addPlayer()`，这使得`names[]`参数无法访问。如果您不打算将任何内容传递给`names[]`函数，请删除该参数。

我建议使用命名函数而不是内联 IIFE。

# django - IntegrityError _id 可能不为 NULL

> ID：14586593
> 
> 赞同：2
> 
> 时间：2013-01-29T15:38:35.370
> 
> 标签：django

刚开始使用 Django 并开始创建一个用于测试目的的应用程序。但是，当我将过山车指定为 ManyToMany 并通过管理 UI 添加 Park 的实例时，我得到一个：IntreityError，rollercoasters_id may not be NULL

我刚刚完成了这方面的一本书，并且代码或多或少与书籍一样准确（代码在书中有效）。

我究竟做错了什么？

当我有 ForeignKey 而不是 ManyToMany 时，该应用程序可以工作

```
 from django.db import models

class Company(models.Model):
    name=models.CharField(max_length=30)
    location=models.CharField(max_length=30)
    website=models.URLField()

    def __unicode__(self):
        return self.name

class Constructor(models.Model):
    name=models.CharField(max_length=30)
    location=models.CharField(max_length=30)
    contactnumber=models.CharField(max_length=30)
    website=models.URLField()   

    def __unicode__(self):
        return self.name

class RollerCoasters(models.Model):
    name=models.CharField(max_length=30)
    dateopenned=models.DateField
    type=models.CharField(max_length=30)
    builtby=models.ForeignKey(Constructor)
    dateopenned=models.DateField()

    def __unicode__(self):
        return self.name

class Parks (models.Model):
    name=models.CharField(max_length=30)
    parent=models.ForeignKey(Company)
    location=models.CharField(max_length=1000)
    rollercoasters=models.ManyToManyField(RollerCoasters)
    dateopenned=models.DateField()

    def __unicode__(self):
        return self.name 
```

错误：

```
Environment:

Request Method: POST
Request URL: http://127.0.0.1:8000/admin/Parks/parks/add/

Django Version: 1.4.2
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'Parks',
 'django.contrib.admin',
 'django.contrib.admindocs')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "C:\Python27\lib\site-packages\django\core\handlers\base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "C:\Python27\lib\site-packages\django\contrib\admin\options.py" in wrapper
  366\.                 return self.admin_site.admin_view(view)(*args, **kwargs)
File "C:\Python27\lib\site-packages\django\utils\decorators.py" in _wrapped_view
  91\.                     response = view_func(request, *args, **kwargs)
File "C:\Python27\lib\site-packages\django\views\decorators\cache.py" in _wrapped_view_func
  89\.         response = view_func(request, *args, **kwargs)
File "C:\Python27\lib\site-packages\django\contrib\admin\sites.py" in inner
  196\.             return view(request, *args, **kwargs)
File "C:\Python27\lib\site-packages\django\utils\decorators.py" in _wrapper
  25\.             return bound_func(*args, **kwargs)
File "C:\Python27\lib\site-packages\django\utils\decorators.py" in _wrapped_view
  91\.                     response = view_func(request, *args, **kwargs)
File "C:\Python27\lib\site-packages\django\utils\decorators.py" in bound_func
  21\.                 return func(self, *args2, **kwargs2)
File "C:\Python27\lib\site-packages\django\db\transaction.py" in inner
  209\.                 return func(*args, **kwargs)
File "C:\Python27\lib\site-packages\django\contrib\admin\options.py" in add_view
  955\.                 self.save_model(request, new_object, form, False)
File "C:\Python27\lib\site-packages\django\contrib\admin\options.py" in save_model
  709\.         obj.save()
File "C:\Python27\lib\site-packages\django\db\models\base.py" in save
  463\.         self.save_base(using=using, force_insert=force_insert, force_update=force_update)
File "C:\Python27\lib\site-packages\django\db\models\base.py" in save_base
  551\.                 result = manager._insert([self], fields=fields, return_id=update_pk, using=using, raw=raw)
File "C:\Python27\lib\site-packages\django\db\models\manager.py" in _insert
  203\.         return insert_query(self.model, objs, fields, **kwargs)
File "C:\Python27\lib\site-packages\django\db\models\query.py" in insert_query
  1593\.     return query.get_compiler(using=using).execute_sql(return_id)
File "C:\Python27\lib\site-packages\django\db\models\sql\compiler.py" in execute_sql
  910\.             cursor.execute(sql, params)
File "C:\Python27\lib\site-packages\django\db\backends\util.py" in execute
  40\.             return self.cursor.execute(sql, params)
File "C:\Python27\lib\site-packages\django\db\backends\sqlite3\base.py" in execute
  344\.             return Database.Cursor.execute(self, query, params)

Exception Type: IntegrityError at /admin/Parks/parks/add/
Exception Value: Parks_parks.rollercoasters_id may not be NULL 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T15:52:14.593

您不能只在外键和多对多字段之间进行交换。如果你有一个外键，Django 会创建一个数据库列，例如`rollercoaster_id`. 如果您使用多对多，Django 会创建一个中间连接表。

要从外键切换到多对多字段，您必须执行以下操作之一：

*   删除表，然后运行 ​​syncdb 以便 Django 重新创建它们。您将丢失任何数据。
*   `manage.py sql`使用命令的输出作为指导，自己手动更新数据库模式
*   使用架构迁移工具 South。

# ios - Plist NSFileManager copyItemAtPath:toPath:error:] 源路径为 nil'

> ID：14586596
> 
> 赞同：0
> 
> 时间：2013-01-29T15:38:51.797
> 
> 标签：ios, objective-c, plist, nsfilemanager, info.plist

试图**创建 plist 文件**。但在 **[NSFileManager copyItemAtPath:toPath:error:] 中出错：源路径为 nil**

有人知道为什么会这样吗？非常感谢..

**AppDelegate.h**：

```
NSError*error;
NSArray*pathes=NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString*documentDirectory=[pathes objectAtIndex:0];//first dir in app dir.
NSString*path=[documentDirectory stringByAppendingPathComponent:@"data.plist"];

NSFileManager*filemanager=[NSFileManager defaultManager];
if(![filemanager fileExistsAtPath:path])
{
    NSString*bundle=[[NSBundle mainBundle]pathForResource:@"data" ofType:@"plist"];//check if plist file exist;

    [filemanager copyItemAtPath:bundle toPath:path error:&error];
    NSMutableDictionary*data=[[NSMutableDictionary alloc]initWithContentsOfFile:path];
    NSArray*arr=[[NSArray alloc]init];
    [data setObject:arr forKey:@"arr"];
    [data writeToFile:path atomically:YES];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:42:20.103

`- [NSBundle pathForResource:ofType:]``nil`如果请求的文件不存在则返回。确保应用程序包确实包含`data.plist`.

# git - TortoiseGit 1.8 不要求提供凭据

> ID：14586599
> 
> 赞同：8
> 
> 时间：2013-01-29T15:39:03.527
> 
> 标签：git, tortoisegit

我刚刚将 TortoiseGit 更新到 1.8，从那时起就无法从服务器推送或拉取。在他们要求输入我的密码之前，但他们不再这样做了。相反，他们告诉我：

> 致命：无法从远程存储库中读取。
> 
> 请确保您具有正确的访问权限并且存储库存在。
> 
> git 没有干净地退出（退出代码 128）（1326 ms @ 2013-01-29 10:34:32）

我没有更改设置中的任何内容，我使用 ssh Url 作为远程源 (Vincent@example.com/git/...)

我在 Windows 8 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T09:17:10.320

我从 TortoiseGitPLink.exe 更改为 TortoisePLink.exe 在

Settings > Network > SSH > SSH Client 然后我得到了密码对话框。

TortoiseGitPLink.exe 可能有些不兼容

变更日志说：

...

重命名：TortoisePLink.exe 为 TortoiseGitPLink.exe（出于兼容性原因，TortoisePLink.exe 仍然发货）

...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T02:55:15.273

TortoiseGit 更新可能弄乱了应用程序到 TortoisePLink.exe 的路径。 在设置 > > >[下修改您的设置](http://code.google.com/p/tortoisegit/wiki/FAQ#How_to_make_TortoiseGit_use_OpenSSH_or_plink?)`Network``SSH``SSH Client`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-09T11:43:41.980

我遇到了同样的问题，但现在在 1.8.1 版中已解决。
有关此问题的更多信息：[https ://tortoisegit.org/issue/1617](https://tortoisegit.org/issue/1617)

在此处获取新的固定版本 1.8.1：[https ://tortoisegit.org/download/](https://tortoisegit.org/download/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-04T02:19:47.957

我遇到了同样的问题并解决如下：

1）我把TortoiseGit的SSH客户端改成Git\bin\ssh.exe

2）使用ssh.exe连接到远程服务器：ssh.exe username@address -p port_number

3) 出现无法建立主机真实性以及是否要继续连接的消息，所以我输入“是”。

在这之后 TortoiseGit 开始为我工作。

# windows - netbeans 未找到 Qt 设计器

> ID：14586606
> 
> 赞同：0
> 
> 时间：2013-01-29T15:39:14.147
> 
> 标签：windows, qt, netbeans-7, qt-designer

当我想在**netbeans中打开一个****.ui**文件时，它会提醒：****`Failed to start Qt Designer. Make sure it is installed and added to PATH`****

 **我在 Addr 中使用 win vista 和开源**Qt 4.8.4**和**Qt creator 2.6.1 。**`C:\Qt\qtcreator-2.6.1\bin\qtcreator.exe`
我在 Addr 中有**Qt 设计师。**`C:\Qt\4.8.4o\bin\designer.exe`
我的 netbeans 构建工具选项 qmake 设置在`C:\Qt\4.8.4o\bin\qmake.exe`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:55:52.400

`PATH`是一个 Windows 环境变量。它是操作系统用来查找可执行文件和库的路径列表。

您需要将 Qt Designer 的路径添加到该列表中。右键单击“我的电脑”，点击“属性”，转到“高级系统设置”，然后单击“环境变量”按钮。在系统变量组中找到“路径”（或“路径”），然后单击编辑。路径由分号分隔，将 Qt Designer 路径添加到末尾。**

# python - Pandas DataFrame 到 SqlLite

> ID：14586608
> 
> 赞同：9
> 
> 时间：2013-01-29T15:39:16.180
> 
> 标签：python, sqlite, pandas

我正在学习如何将 pandas 数据帧写入 SQLite 数据库。

我进入了一个示例代码：

```
import pandas as pd
import pandas.io.sql as pd_sql
import sqlite3 as sql

con = sql.connect("/home/msalese/Documents/ipyNotebooks/tmp.db")
df =pd.DataFrame({'TestData':[1,2,3,4,5,6,7,8,9]})
pd_sql.write_frame(df, "tbldata2", con) 
```

但上面的代码引发了一个异常：

```
---------------------------------------------------------------------------
InterfaceError                            Traceback (most recent call last)
<ipython-input-31-c844f7e3f2e6> in <module>()
----> 1 pd_sql.write_frame(df, "tbldata2", con)

/opt/epdFree7.3.2/lib/python2.7/site-packages/pandas-0.10.1-py2.7-linux-x86_64.egg/pandas/io/sql.pyc in write_frame(frame, name, con, flavor, if_exists, **kwargs)
208     if func is None:
209         raise NotImplementedError
--> 210     func(frame, name, safe_names, cur)
211     cur.close()
212     con.commit()

/opt/epdFree7.3.2/lib/python2.7/site-packages/pandas-0.10.1-py2.7-linux-x86_64.egg/pandas/io/sql.pyc in _write_sqlite(frame, table, names, cur)
219         table, col_names, wildcards)
220     data = [tuple(x) for x in frame.values]
--> 221     cur.executemany(insert_query, data)
222 
223 def _write_mysql(frame, table, names, cur):

InterfaceError: Error binding parameter 0 - probably unsupported type. 
```

我认为问题出在代码行 220 上。如果我尝试：

```
[tuple(x) for x in df.values] 
```

结果是：

```
[(1,), (2,), (3,), (4,), (5,), (6,), (7,), (8,), (9,)] 
```

可能是逗号给 sqlite db 带来噪音。

我不确定，有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T15:10:35.450

请参阅评论中@unutbu 的答案。

如果您指定 float dtype，则可以避免该问题。例如，

```
df = pd.DataFrame({'TestData': [1, 2, 3, 4, 5, 6, 7, 8, 9]}, dtype='float') 
```

# ant - 在 Ant 中进行复制时在日志中显示警报消息

> ID：14586610
> 
> 赞同：0
> 
> 时间：2013-01-29T15:39:17.357
> 
> 标签：ant

我有`fromfolder=xxx`它，`one.txt`并且有
`tofolder=yyy`相同的文件`one.txt`

在使用 ant 执行复制操作时，如果发现存在相同名称的文件，则会显示警告消息，如`one.txt`日志中已存在的文件，不应覆盖该文件。

```
 <target name="copyPublicHtml" description="Copy Public_html to output directory" >
     <touch>
     <fileset dir="../html"/>
    </touch>

       <copy todir="../html" failonerror="on" verbose="on" overwrite="false"> 
            <fileset dir="../src">           
       </copy>
  </target> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:12:02.590

您可以使用[groovy 任务](http://groovy.codehaus.org/The+groovy+Ant+Task)来遍历文件：

```
 <target name="copyPublicHtml" depends="init" description="Copy Public_html to output directory">
    <taskdef name="groovy" classname="org.codehaus.groovy.ant.Groovy" classpathref="build.path"/>

    <fileset id="srcFiles" dir="src"/>

    <groovy>
      project.references.srcFiles.each {
        def src = new File(it.toString())
        def trg = new File("html", src.name)

        if (trg.exists()) {
          project.log "File already exists: ${trg}"
        }

        ant.copy(file:it, todir:"html", verbose:"true", overwrite:"false")
      }
    </groovy>
  </target> 
```

# java - 在 JUnit 测试用例中找不到测试方法

> ID：14586612
> 
> 赞同：0
> 
> 时间：2013-01-29T15:39:21.333
> 
> 标签：java, testing, junit, glassfish-3

我目前正在开发一个可以在外部类上执行 JUnit 测试用例的程序。这些外部课程由学生发送，我们希望对其进行评估。

我有以下测试用例

```
import static org.junit.Assert.*;
import org.junit.Test;

public class Task1Test {

    @Test
    public void testAdd() {
        Task1 t = new Task1();
        int a = 5;
        int b = 11;
        assertEquals("Wrong add result", a+b, t.add(a,b));
    }
} 
```

我编译它： `$ javac -cp .:../lib/junit/junit-4.11.jar Task1Test.java`

这`Task1`将是一个学生的课程，但现在它只是一个示例类，其中包含一个`add`返回错误结果的方法。该文件`Task1.java`位于与 相同的文件夹中`Task1Test.java`。

在我的程序中，我加载了测试用例类并尝试使用以下命令运行它`JUnitCore`：

```
String testsPath = "/path/to/classes";
String junitJar = "/path/to/junit-4.11.jar"
URL taskUrl = new File(testsPath).toURI().toURL();
URL[] urls = new URL[] {taskUrl,junitJar};

@SuppressWarnings("resource")
ClassLoader loader = new URLClassLoader(urls);
Class<?> clazz = loader.loadClass(task);

Result res = JUnitCore.runClasses(clazz);

if(!res.wasSuccessful()) {
    for(Failure f : res.getFailures()) {
        System.out.println(f.toString());
    }
} 
```

但是，它没有按预期工作。当我运行此代码时，我收到以下消息： `initializationError(Task1Test): No runnable methods`

当我使用反射查看加载的类时，我可以看到该方法`testAdd`没有注释（即`method.getAnnotation(org.junit.Test.class)`返回`null`）。

有人有想法吗？我是否忘记了编译器开关或其他任何东西？

我正在使用 Java `1.7.0_11`，代码在 Glassfish 3.1.2.2 上的 Web 应用程序中运行

**编辑：**

我可以从命令行运行测试用例： `$ java -cp .:../../code/lib/junit/junit-4.11.jar:../../code/lib/junit/hamcrest-core-1.3.jar org.junit.runner.JUnitCore Task1Test`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:57:09.013

我从[这个答案](https://stackoverflow.com/a/2779148/494428)中找到了一个解决方案， 我没有设置父类加载器，这似乎造成了麻烦。按照另一个答案中的说法设置它现在执行测试。

# python - 如何编写 python 设置脚本以需要特定版本的 pyparsing

> ID：14586613
> 
> 赞同：1
> 
> 时间：2013-01-29T15:39:22.290
> 
> 标签：python, distutils, pyparsing

我有一个 setup.py 脚本，它知道对 pyparsing 的依赖，实际上会安装它。但它正在获取最新版本 2.0.0，它（显然）与 python 2.x 不兼容。看起来我需要能够将安装程序限制为 pyparsing 的 1.5.x 版本，但找不到告诉 setup.py 脚本这种限制的方法，或者是否有可能。

我的 setup.py 正在使用 setuptools.setup，并在 install_requires 部分列出了 pyparsing。

# sql-server - 将数据库从 SQL Server 2012 转移到 SQL Server 2008

> ID：14586616
> 
> 赞同：13
> 
> 时间：2013-01-29T15:39:31.950
> 
> 标签：sql-server, database, sql-server-2008, sql-server-2012, database-migration

我已经有一个 SQL Server 2012 企业版的数据库。

它包含 ：

*   表
*   意见
*   程序
*   对象

现在我想将数据库降级到 SQL Server 2008 企业版。我知道没有直接的选择。我试图在 2012 年备份，然后在 2008 年恢复。不工作。

关于如何完全转移数据库的任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T15:42:29.293

您必须将数据库导出为文本 (.sql) 并将其导入回来。请参阅[运行 SQL Server 导入和导出向导](http://msdn.microsoft.com/en-us/library/ms140052.aspx)。还有 3rd 方工具，例如[SQL Compare](http://www.red-gate.com/products/sql-development/sql-compare/)和[SQL Data Compare](http://www.red-gate.com/products/sql-development/sql-data-compare/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T15:39:31.950

迁移步骤：

1) 获取之前在 SQL Server 2012 中输入的表的列表

2) 在 SQL Server 2012 中生成脚本，并提前选项选择“仅数据”作为导出类型

3) 使用 python 参考 SQL Server 2008 中的步骤 1 插入值列表运行 SQL 语句

# opengl - 将实时网络摄像头纹理添加到 OpenGL

> ID：14586618
> 
> 赞同：2
> 
> 时间：2013-01-29T15:39:42.237
> 
> 标签：opengl, opencv, textures, shader, augmented-reality

[我按照OpenGL Book](http://openglbook.com/blog/)的示例进行了扩展，以显示 .3ds 文件。我还设法使用 OpenCV 从我的网络摄像头中获取图像，将 surf 运算符应用于它并找到给定标记的单应性。然后将找到的变换应用于 3D 模型。但是，我无法在我的程序中使用网络摄像头图片作为纹理背景。遵循一些创建纹理的示例似乎有效，但我无法显示它，因为它似乎破坏了 OpenGL 书籍章节中定义的着色器。当我尝试`glUseProgram`使用预定义的着色器程序时，我尝试返回错误 1282。

着色器代码可以在给定的 OpenGL Book 链接中找到。我创建纹理的代码如下：

```
void setze_hintergrund()
{
    if(gp_DataArray->zugriff_bild == false){
/*gp_DataArray is provided to both threads (opencv & opengl) to exchange data like the webcam picture*/

        return;
    } else {

        // alte Textur löschen
        glDeleteTextures(1, &backgroundid);

        // lade das Bild als Textur
        glGenTextures(1, &backgroundid);
        glBindTexture(GL_TEXTURE_2D, backgroundid);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);

        glPixelStorei(GL_UNPACK_ALIGNMENT, 1);
        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB,
            gp_DataArray->kamerabild->width, gp_DataArray->kamerabild->height,
            0, GL_BGR, GL_UNSIGNED_BYTE, gp_DataArray->kamerabild->imageData);
    }

    return;
}

void zeichne_hintergrund()
{
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    glDisable(GL_DEPTH_TEST);
    glDepthMask(GL_FALSE);

    glOrtho(-1, 1, -1, 1, -1, 1);

    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();   

    glEnable(GL_TEXTURE_2D);
    glBindTexture(GL_TEXTURE_2D, backgroundid);

    glBegin (GL_QUADS);
        glNormal3f(0,0,1);
        glTexCoord2f(1.0, 1.0); glVertex3f(1, -1, -1); // Texturkoordinate rechts oben, Punkt rechts oben hinten setzen
        glTexCoord2f(0.0, 1.0); glVertex3f(-1, -1, -1); // Texturkoordinate links oben, Punkt links oben hinten setzen
        glTexCoord2f(0.0, 0.0); glVertex3f(-1, 1, -1); // Texturkoordinate links unten, Punkt links unten hinten setzen
        glTexCoord2f(1.0, 0.0); glVertex3f(1, 1, -1); // Texturkoordinate rechts unten, Punkt rechts unten hinten setzen
    glEnd ();

    glDisable(GL_TEXTURE_2D);

    glMatrixMode(GL_PROJECTION);
    //glLoadMatrixf(ProjectionMatrix);
    //ProjectionMatrixUniformLocation = glGetUniformLocation(ShaderIds[0], "ProjectionMatrix");
    glUniformMatrix4fv(ProjectionMatrixUniformLocation, 1, GL_FALSE, ProjectionMatrix.m);
    glEnable(GL_DEPTH_TEST);
    glDepthMask(GL_TRUE);

    return;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T09:38:52.590

如前所述，您不应使用已弃用的功能。大多数不推荐使用的代码都可以在 zeichne_hintergrund() 中看到。当您想将网络摄像头图像用作进一步渲染的背景时，您应该使用 FBO（帧缓冲区对象）。在 FBO 的帮助下，您可以将网络摄像头图像加载到缓冲区，然后使用相同的缓冲区进行渲染。然后您可以将此缓冲区加载到纹理并在屏幕上显示它，就像您在 zeichne_hintergrund() 函数中尝试的那样。

我曾经使用过的用于渲染纹理的顶点和片段着色器如下所示：

顶点着色器：

```
#version 430

layout(location=0) in vec4 currentPos;
layout(location=1) in vec2 texPos;
out vec2 ex_TexCoor;

void main(void)
{
    gl_Position = currentPos;
    ex_TexCoor = texPos;
} 
```

currentPos 是顶点的位置，texPos 是关联的 uv 坐标。

片段着色器：

```
#version 430

in vec2 ex_TexCoor;
out vec4 color;

uniform sampler2D texture;

void main(void){
    color = texture2D(texture, ex_TexCoor);
} 
```

ex_TexCoor 是来自顶点着色器的 uv 坐标，而在这种特殊情况下，纹理是带有渲染场景的网络摄像头图像。

# java - 在 mongodb 子文档中查找

> ID：14586620
> 
> 赞同：1
> 
> 时间：2013-01-29T15:39:53.763
> 
> 标签：java, mongodb, nosql

我使用 SpringData。我有带有子文档的文档，它看起来像：

> {“名称”：“MongoDB”，“类型”：“数据库”，“计数”：1，“信息”：{ x：203，y：102 } }

我怎样才能找到（例如）x = 203的所有文件谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-14T19:20:21.477

您无法直接获取子文档。您可以做的是使用下面的查询来匹配子文档中的值。如果子文档的标准成功，这将检索父文档。正如 Rohit 提到的，您可以使用下面的查询，但这会返回您的父文档的类型

```
mongoTemplate.find(new Query(Criteria.where("info.x").is(203))), ParentDocument.class)); 
```

# algorithm - 算法的时间复杂度

> ID：14586625
> 
> 赞同：0
> 
> 时间：2013-01-29T15:40:04.150
> 
> 标签：algorithm, time-complexity

我想知道以下算法的大哦

```
public List<String> getPermutations(String s){
    if(s.length()==1){
        List<String> base = new ArrayList<String>();
        base.add(String.valueOf(s.charAt(0)));
        return base;
    }

    List<String> combos = createPermsForCurrentChar(s.charAt(0),
                                    getPermutations(s.substring(1));

    return combos;
}
 private List<String> createPermsForCurrentChar(char a,List<String> temp){
    List<String> results = new ArrayList<String>();
    for(String tempStr : temp){
        for(int i=0;i<tempStr.length();i++){
            String prefix = tempStr.substring(0, i);

            String suffix = tempStr.substring(i);

            results.add(prefix + a + suffix);
        }

    }
    return results;
} 
```

这就是我认为的 getPermutations 被称为 n 次，其中 n 是字符串的长度。我的理解是 createPermutations 是 O(l * m) 其中 l 是列表 temp 的长度，m 是 temp 中每个字符串的长度。

但是，由于我们正在查看最坏情况分析，因此 m<=n 和 l<= n!。在每次递归调用中，临时列表的长度都会不断增长，temp 中每个字符串中的字符数也会不断增长。

这是否意味着这个算法的时间复杂度是O(n * n! *n)。还是 O(n * n * n) ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T16:20:34.987

好吧，我将把它写下来作为答案，而不是一长串评论。

将 getPerm 在长度为 n 的字符串上的运行时间表示为 T(n)。观察getPerm里面，它调用了getPerm(string length n-1)，很清楚

```
T(n)=T(n-1) + [run time of createPerm] 
```

请注意，createPerm 有 2 个嵌套循环。外部循环遍历 getperm（长度为 n-1 的字符串）的结果大小，内部循环遍历 n-1（单个字符串的长度）。getPerm(string of length n-1) 的结果是 T(n-1) 个字符串的列表。由此，我们得到

```
[run time of createPerm] = (n-1) T(n-1) 
```

将其代入前面的等式给出

```
T(n) = T(n-1) + (n-1) T(n-1) = n T(n-1) 
```

T(1) = 1 从退出条件。我们可以扩展来找到解决方案（或者，或者，使用 Z 变换：[无法计算出这种递归的复杂性](https://stackoverflow.com/questions/14423832/can-not-figure-out-complexity-of-this-recurrence/14424445#14424445)）。由于它是一个简单的方程，因此展开速度更快：

```
 T(n) = n T(n-1)
      = n (n-1) T(n-2)
      = n (n-1) (n-2) T(n-3) ....
      = n (n-1) ... 1
      = n! 
```

所以 T(n) = n!

练习：通过归纳证明这一点！:p

这有意义吗？让我们考虑一下。我们正在创建 n 个字符的排列：[http](http://en.wikipedia.org/wiki/Permutation) ://en.wikipedia.org/wiki/Permutation 。

编辑：注意 T(n)=n! 是 O(n!)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:01:15.363

我不是最好的组合学，但我认为它是 O(n^3) 其中 n 是字符串中的字符数。

我的逻辑是这样的：

```
getPermutations(String) 
```

被调用与调用有关：

```
createPermsForCurrentChar(s.charAt(0),getPermutations(s.substring(1)); 
```

在第一次调用中，您传递参数 (charAt(0)，长度为 s.length-1 的子字符串)，然后 (charAt(1)，长度为 s.length-2) 的子字符串 ... 用于 O(n) 调用。

更重要的是每次我们输入 createPermsForCurrentChar 时 List temp 中的元素数。

首先，让我们将函数作为一个独立的东西来分析：假设 中有 k 个元素`List<String> temp`，它们的长度单调递增，用 L=当前长度表示，从 L=1 开始，以 L=k 结束。

外部for循环将迭代k次，这很容易。内部 for 循环将迭代 L 次。我们的复杂度是 O(k"L")。L 用引号引起来是因为它每次都变，我们看看它长什么样子： 第一次外循环迭代，内循环执行一次。第二次外循环迭代，内循环执行两次，依此类推，直到内循环执行 k 次，得到 1+2+3+4+...k = O(k^2)。

所以 createPermsForCurrentChar 是 O(k^2) 复杂度，其中 k 是元素的数量`List<String> temp`（也是 temp 中最长字符串的大小）。我们现在想知道的是——`List<string> temp`每次调用有多少元素？

当我们最终在递归中达到基本情况时，我们将字符串的倒数第二个字符和字符串的最后一个字符传递给 createPermsForCurrentChar，因此 k=1。它将创建一个长度为 O(k) 的字符串。这允许下一次执行从堆栈中弹出并再次调用 createPermsForCurrentChar，这次 k=2。然后 k=3、k=4、k=5 等。

我们知道由于我们的递归关系，createPermsForCurrentChar 被调用了 O(n) 次，所以 k 最终将 = n。(1 + 2 + 3 + ... + n) = O(n^2)。考虑到 createPermsForCurrentChar 的复杂性，我们得到 (1^2 + 2^2 + 3^2 + ... n^2) = (1/3)n^3 + (1/2)n^2 + ( 1/6)n (来自[http://math2.org/math/expansion/power.htm](http://math2.org/math/expansion/power.htm) )。

由于我们只关心我们的主导值，我们可以说算法是 O(n^3)。

# android - 错误：使用 navigator.camera.getPicture() 时“不允许加载本地资源”

> ID：14586627
> 
> 赞同：2
> 
> 时间：2013-01-29T15:40:05.917
> 
> 标签：android, cordova

我正在使用 Corodva 2.3.0 和 Android 2.3.3 虚拟设备。在我启用 Cordova 的应用程序中，我正在尝试拍照，然后在页面上显示该图片。在我的“拍照”按钮中，我正在运行以下代码：

```
function takePicture()
{
    navigator.camera.getPicture(displayPictureURI, showError, {
        quality: 50, 
        destinationType: Camera.DestinationType.FILE_URI 
    });
}

function displayPictureURI(imageURI)
{
    var imagePanel = document.getElementById('imagePanel').style.display = "";
    document.getElementById("image").src = imageURI;
}

function showError(fail)
{
    alert(fail);
} 
```

相机打开，我拍照，应用程序重新打开，但照片从未显示。在日志中我收到以下错误：“不允许加载本地资源：file:///mnt/sdcard/Android/data/org.apache.cordova.example/cache/1359468575251.jpg at :0”

我不确定我在这里做错了什么。我在清单中有“WRITE_EXTERNAL_STORAGE”权限设置。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:57:41.807

并不是真正的正确解决方案，但我发现如果我使用早期版本的 Phonegap，则不会出现此问题。似乎 1.7.0 有效。

# java - 如何将开源 API 代码添加到 Eclipse 项目？

> ID：14586629
> 
> 赞同：0
> 
> 时间：2013-01-29T15:40:13.300
> 
> 标签：java, eclipse, open-source, project

我必须编写一个使用 eclipse 组合在一起的 java 应用程序，它依赖于开源代码。这个应用程序需要是自包含的，这意味着我应该创建一个没有外部依赖项的 jar 文件。

当我在项目的构建路径中引用 jar 文件时，我可以使用开源代码，但我的想法是让实际的源代码作为 eclipse 项目的一部分，与我的代码并排。

源代码可以在这里找到：http: [//hc.apache.org/](http://hc.apache.org/)，但是当我将一个现有的文件系统导入我的项目时，我不能让事情正常工作。这些包的名称错误，引用中断，我无能为力。请注意，包含源代码的文件夹具有以下结构：

```
 httpcomponents-client-4.2.3\
    src\
    httpmime\
    httpclient-osgi
    httpclient-contrib
    httpclient-cache
    httpclient-benchmark
    httpclient
    fluent-hc 
```

这些子文件夹中的每一个都有 src/main/java/org/apache 子文件夹。

有人可以解释如何做到这一点吗？我应该一次导入一个java文件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:43:02.240

使用[OneJar](http://one-jar.sourceforge.net/)、[FatJar](http://fjep.sourceforge.net/)、[JarJar](http://code.google.com/p/jarjar/)等工具来创建单 jar 应用程序。

正如查理提到的，[Maven Shade 插件](http://maven.apache.org/plugins/maven-shade-plugin/)是另一种选择，特别是如果您已经在使用 Maven。如果不是，请考虑使用它或其他传递依赖管理工具。

^(*应该使用*一些工具，IMO，而且你拥有的依赖项越多，它就越重要。**)

 *或者，您可以使用[jar 类加载器](http://www.jdotsoft.com/JarClassLoader.php)并将 jar 文件包含在您的工件中。

我绝对*不会*在您自己的项目中包含依赖项的*来源*。*

# playframework - 在锡耶纳坚持使用 json

> ID：14586640
> 
> 赞同：0
> 
> 时间：2013-01-29T15:41:01.417
> 
> 标签：playframework, siena

有人坚持在 Sinea 中使用 JSON 格式吗？

[http://www.sienaproject.com/documentation-json.html](http://www.sienaproject.com/documentation-json.html)

我需要保留集合相对较小且仅包含简单类型（如 int、short、long 等）的集合字段...我应该破解该字段并将其设为 String 并为每个字段编写自定义 JSON 代码吗？属性类型是否应该变为 siena.Json 而不是 Collection？

我想理想的情况是为集合添加 JSON 注释（w/最大长度），让 Sinea 知道自动序列化和序列化。

您现在可以推荐一种为此编码的好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:51:46.033

只需`@Embedded`在集合上使用，Siena 就会自动使用 JSON。

请参阅 otherContacts 示例：[http](http://www.sienaproject.com/documentation-getting-started.html) ://www.sienaproject.com/documentation-getting-started.html “2 个字段联系人和其他联系人，其中包含存储在数据库中序列化的 JSON 的嵌入式数据结构”

# ios - 在 iOS 中创建我自己的完成块

> ID：14586641
> 
> 赞同：6
> 
> 时间：2013-01-29T15:41:02.430
> 
> 标签：ios, objective-c, grand-central-dispatch

我有一个对象需要很长时间才能做一些事情（它从服务器下载数据）。

我怎样才能编写自己的完成块，以便我可以运行......

```
[downloader doSomeLongThing:^(void) {
    //do something when it is finished
}]; 
```

我不确定如何将此块保存在下载器对象中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T15:46:30.693

您可以复制该块然后调用它：

```
typedef void (^CallbackBlk)();

@property (copy) CallbackBlk cb;

- (void)doSomething:(CallbackBlk)blk
{
    self.cb = blk;

    // etc.
}

// when finished:
self.cb(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-29T16:44:04.727

由于您没有在回调中使用任何参数，因此您可以只使用标准的 dispatch_block_t 并且由于您只想在长流程完成后回调它，因此无需使用属性来跟踪它。你可以这样做：

```
- (void)doSomeLongThing:(dispatch_block_t)block
{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        // Perform really long process in background queue here.

        // ...

        // Call your block back on the main queue now that the process 
        // has completed.
        dispatch_async(dispatch_get_main_queue(), block);
    });
} 
```

然后你像你指定的那样实现它：

```
[downloader doSomeLongThing:^(void) {
    // do something when it is finished
}]; 
```

# javascript - PDF 到 SVG，SVG 到 Raphael 对象

> ID：14586642
> 
> 赞同：1
> 
> 时间：2013-01-29T15:41:05.910
> 
> 标签：javascript, pdf, svg, raphael, psd

我四处寻找，似乎找不到我要找的东西，所以我希望这里的人可以帮助我找到它，或者只是告诉我这是不可能的，除非我想自己写。我正在尝试导入 PDF 并将该 PDF 转换为 SVG，然后将该 SVG 转换为 Raphael 对象，或者显然只是将 PDF 转换为 Raphael 对象。

设计师还希望能够上传 Adob​​e PSD 和 Adob​​e AI 文档。我用谷歌搜索，很确定这是不可能的，但想看看你们是否对这种情况有任何意见。

我已经有了接收 SVG 文档并将这些对象转换为 Raphael 对象的代码。非常感谢您对此的任何帮助。谢谢大家

# css - 如何使用 Less 自定义 Twitter Bootstrap？（导航栏高度）

> ID：14586643
> 
> 赞同：1
> 
> 时间：2013-01-29T15:41:09.927
> 
> 标签：css, twitter-bootstrap, less

我遇到过诸如[这篇](http://blog.nyaruka.com/customizing-twitter-bootstraps-nav-bar-color)讨论如何使用[LESS修改](http://lesscss.org/)[Twitter Bootstrap](http://twitter.github.com/bootstrap/index.html)组件的文章。但是，我不知道我应该在我的文件中包含什么或应该如何构建它们。

我将如何使用 LESS 来修改导航栏的高度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:47:12.047

首先从github下载less文件，然后查找设置高度的位置。快速浏览文件了解到，高度首先在第 22 行的 navbar.less 中设置：

```
min-height: @navbarHeight; 
```

如您所见，一个变量用于设置高度。仔细查看同一个文件会发现，该变量被使用了几次来设置导航栏中项目的各种高度。最简单的方法是更改​​该变量的值。它应该在 variables.less 文件中。将其设置为您想要的任何值，然后重新编译您的 bootstrap.less。

如果您决定更新您的 bootsrap 版本，您应该能够保留您的 variables.less 文件，并将其余部分更改为新版本。当然，只有当他们不添加任何新变量时才会出现这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:57:13.073

PeterVR 解释了如何在下载并设置 less 后在本地更新。但是，如果您愿意，如果您不想处理重新编译较少的模板等问题，您可以在下载之前在[Twitter 引导程序自定义页面上自定义引导程序分发。](http://twitter.github.com/bootstrap/customize.html#variables)

从长远来看，最好自己下载源文件并管理您对引导默认值所做的覆盖。否则，这可能会满足您快速轻松地覆盖默认设置的需求。

# ruby - Ruby WIN32OLE excel图表系列集合值

> ID：14586645
> 
> 赞同：1
> 
> 时间：2013-01-29T15:41:12.773
> 
> 标签：ruby, arrays, excel, powerpoint, win32ole

我正在尝试更改 Excel（实际上是 PowerPoint）图表的值。我尝试通过传递一个数组来做到这一点，但它似乎不起作用。尽管如本页所述，它应该可以工作......：http: [//msdn.microsoft.com/en-us/library/office/ff746833.aspx](http://msdn.microsoft.com/en-us/library/office/ff746833.aspx)

那么我的代码目前看起来如何：

```
require 'win32ole'
mspp_app = WIN32OLE.new("Powerpoint.Application")
mspp     = mspp_app.Presentations.Open(pathToFile)

slide         = mspp.Slides(1)
shapes        = slide.shapes
chartshape    = shapes(3) #the chart happens to be shape n°3
chart         = chartshape.chart

# now get the seriescollection
sc  = chart.SeriesCollection
sc3 = sc.Item(3)

values = sc3.values #returns the current values as an array example: [1.0, 1.0, 5.0, 2.0]

# now set the values
sc3.values = [2.0, 2.0, 5.0, 1.0] # returns no error

# see if the values are set
values = sc3.values # returns an empty Array [] 
```

以前有人试过吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T13:22:36.897

要操作图表数据，您必须更改基础工作表：

```
ws = myChart.Chart.ChartData.Workbook.Worksheets(1)

ws.Range("A2").Value = "Coffee"
ws.Range("A3").Value = "Soda"
ws.Range("A4").Value = "Tea"
ws.Range("A5").Value = "Water"
ws.Range("B1").Value = "Amount"  # used as label for legend
ws.Range("B2").Value = "1000"
ws.Range("B3").Value = "2500"
ws.Range("B4").Value = "4000"
ws.Range("B5").Value = "3000" 
```

如果维度已更改，更改 SourceData-Range 很重要。注意 Excel 中已知的不同概念：“ **=Tabelle1!A1:B5** ”而不是“A1:B5”。

对于英文办公版本，将“Tabelle1”更改为“Sheet1”

```
myChart.Chart.SetSourceData("=Tabelle1!A1:B5")
myChart.Chart.ChartData.Workbook.Close 
```

之后不要忘记关闭工作表。

# java - 我正在尝试为我的博客制作一个 RSSReader。我做了一个自己的处理程序。但是当我尝试解析它时它不起作用

> ID：14586646
> 
> 赞同：0
> 
> 时间：2013-01-29T15:41:16.877
> 
> 标签：java, android, xml, xml-parsing

**我正在尝试为我的博客制作一个 RSSReader。我做了一个自己的处理程序。但是当我尝试解析它时它不起作用**

这是我的处理程序

```
import java.util.jar.Attributes;

import org.xml.sax.SAXException;

import org.xml.sax.helpers.DefaultHandler;

import android.util.Log;

public class myHandler extends DefaultHandler {

    final private String ENTRY = new String("entry");

    final private String TITLE = new String("title");

    final private String LINK = new String("link");

    final private String LINK_ATTR_HREF = new String("href");

    private boolean entryBoolean;

    private boolean titleBoolean;

    private String contentTitle;

    private Content myContent;

    public myHandler(Content content) {
        myContent = content;
    }

    @Override
    public void startDocument() throws SAXException {

        entryBoolean = false;
        titleBoolean = false;
        contentTitle = "";
    }

    @Override
    public void endDocument() throws SAXException {

    }

    public void startElement(String namespaceURI, String localName, String qName, Attributes atts) throws SAXException {

        if (localName.equalsIgnoreCase(this.ENTRY)) {
            this.entryBoolean = true;
        }
        else if (localName.equalsIgnoreCase(this.TITLE)) {
            this.titleBoolean = true;
        }
        else if (localName.equalsIgnoreCase(this.LINK)) {

            if (entryBoolean) {

                Log.i(myHandler.class.getSimpleName(), atts.getValue(this.LINK_ATTR_HREF));

                myContent.setUrl(atts.getValue(this.LINK_ATTR_HREF));
            }
        }
    }

    @Override
    public void endElement(String namespaceURI, String localName, String qName) throws SAXException {

        if (localName.equalsIgnoreCase(this.ENTRY)) {
            this.entryBoolean = false;
        }
        else if (localName.equalsIgnoreCase(this.TITLE)) {
            this.titleBoolean = false;

            if (this.entryBoolean) {

                Log.i(myHandler.class.getSimpleName(), this.contentTitle);

                myContent.setTitel(this.contentTitle);

                this.contentTitle = "";
            }
        }

    }

    @Override
    public void characters(char ch[], int start, int length) throws SAXException {

        String textBetween = new String(ch, start, length);

        if (this.entryBoolean) {
            // nur Title innerhalb des Entry Element werden ausgelesen
            if (this.titleBoolean) {
                this.contentTitle = this.contentTitle + textBetween;
            }

        }
    }
}

@Override
public void endElement(String namespaceURI, String localName, String qName)throws SAXException {

    if(localName.equalsIgnoreCase(this.ENTRY)){
        this.entryBoolean = false;
    }
    else if(localName.equalsIgnoreCase(this.TITLE)){
        this.titleBoolean = false;

        if(this.entryBoolean){

            Log.i(myHandler.class.getSimpleName(), this.contentTitle);

            myContent.setTitel(this.contentTitle);

            this.contentTitle = "";
        }
    }

}

@Override
public void characters(char ch[], int start, int length)throws SAXException {

    String textBetween = new String(ch, start, length);

    if(this.entryBoolean){
        //nur Title innerhalb des Entry Element werden ausgelesen
        if(this.titleBoolean){
            this.contentTitle = this.contentTitle + textBetween;
         }

        }
    }} 
```

这是我的 RSSMain.java

```
import java.io.IOException;

import javax.xml.parsers.ParserConfigurationException;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.StatusLine;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import org.xml.sax.SAXException;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.os.AsyncTask;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class RSSMain extends Activity {

    private final String tag = RSSMain.class.getSimpleName();

    private final String URL_RSS = "http://www.heise.de/newsticker/heise-top-atom.xml";

    private ListView liste;

    private static Content myContent;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_rssmain);

        liste =(ListView)findViewById(R.id.feedListe);

        myContent = new Content();

        new ReadRssFeedTask(this).execute();

        liste.setOnItemClickListener(new AdapterView.OnItemClickListener() {

            public void onItemClick(AdapterView&lt;?&gt; parent, View view,int position, long    id) {

                Intent intent = new Intent(RSSMain.this,Anzeigen.class);

                intent.putExtra("URL", myContent.getUrl(position));
                startActivity(intent);
            }
        });
    }
    private class ReadRssFeedTask extends AsyncTask&lt;Void,Void,Void&gt; {

        private ProgressDialog dialog;

        private  HttpClient client;

        private HttpGet httpGet;

        private HttpResponse response;

        //Konstruktor
        public ReadRssFeedTask(Activity activity) {

            client = new DefaultHttpClient();

            httpGet = new HttpGet(URL_RSS);

            response = null;

            dialog = new ProgressDialog(activity);
        }

        protected void onPreExecute() {

            dialog.setTitle("Bitte warten!");
            dialog.setMessage("Der RSS Feed wird vom Server geladen.");
            dialog.show();
        }

        @Override
        protected Void doInBackground(Void... tmp){

            try {

                response = client.execute(httpGet);

                } catch (ClientProtocolException e) {
                Log.e(tag,"Falsches Protokol " + e.getMessage());
                } catch (IOException e) {
                Log.e(tag,"URL ist falsch, URL: "+URL_RSS + " " + e.getMessage());
            }

            if(response != null){

                StatusLine statusLine = response.getStatusLine();

                if ( statusLine.getStatusCode() == 200) {

                    HttpEntity entity = response.getEntity();

                    try {

                        SAXParserFactory spf = SAXParserFactory.newInstance();

                        SAXParser sp = null;

                        try {

                            sp = spf.newSAXParser();

                            } catch (ParserConfigurationException e) {
                            Log.e(tag, "Fehler: " + e.getMessage());
                            } catch (SAXException e) {
                            Log.e(tag, "Fehler im Handler: " + e.getMessage());
                        }

                        Handler myHandler = new Handler();

                        try {

                            sp.parse(entity.getContent(), myHandler);

                            } catch (SAXException e) {
                            Log.e(tag,"Fehler beim Parsen. Fehler: " + e.getMessage());
                            } catch (IOException e) {
                            Log.e(tag,"URL: "+ URL_RSS + " konnte nicht geöffnet werde! "+ e.getMessage());
                        }

                        } catch (IllegalStateException e) {
                        e.printStackTrace();
                    }

                    }else{
                    Log.i(RSSMain.class.getSimpleName(),"Der Server antwortet mit anderen Statuscode als 200\. Statuscode: "+statusLine.getStatusCode());
                }
                }else{
                Log.i(RSSMain.class.getSimpleName(),"Keine Internetverbindung.");

            }

            return null;

        }

        @Override
        protected void onPostExecute(Void result){

            if (dialog.isShowing()) {
                dialog.dismiss();
            }

            liste.setAdapter(new ArrayAdapter&lt;String&gt;(RSSMain.this, android.R.layout.simple_list_item_1,myContent.getTitel()));

        }
    }
} 
```

为什么解析器不起作用？我找不到答案。

谢谢您的帮助

# java - 使用 DisplayTag 时如何自定义 paging.banner.some_items_found

> ID：14586647
> 
> 赞同：0
> 
> 时间：2013-01-29T15:41:18.480
> 
> 标签：java, struts, displaytag

我正在尝试自定义中的行`paging.banner.some_items_found`，`displaytag.properties`我想更改或从消息中删除一些单词，例如“项目”，在我的代码中我有：

```
paging.banner.some_items_found={0} {1} found, displaying {2} to {3}. 
```

结果它给了我，例如

> 找到 6000 个项目，显示 106 到 126

如何显示？：

> 找到 6000 个，显示 106 到 206

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T19:25:10.407

找到 {0}，显示 {2} 到 {3}。

# c# - 尝试将磁贴的背景设置为来自互联网的图像

> ID：14586649
> 
> 赞同：0
> 
> 时间：2013-01-29T15:41:19.900
> 
> 标签：c#, windows-phone-7, uri, tile, reddit

当我执行此代码时，磁贴将为空，谁能向我解释为什么以及如何解决它？

```
private void CreateCycleTileWide()
    {
        if (!Mangopollo.Utils.CanUseLiveTiles)
        {
            MessageBox.Show("This feature needs Windows Phone 7.8");
            return;
        }

        try
        { 
```

此代码从 reddit 获取 json 提要，submission.data.thumbnail 看起来像“ [http://someaddress.com/something.png](http://someaddress.com/something.png) ”。

```
 Submission orig;
            for (int cur = 0; cur < App.ViewModel.PicsSubmissionList.Count; cur++)
            {
                orig = App.ViewModel.PicsSubmissionList[cur];
                Submission submission = orig;

                Dispatcher.BeginInvoke(() =>
                {

                    if (!string.IsNullOrEmpty(submission.data.thumbnail))
                    {
                        try
                        {
                            list.Add(new Uri(submission.data.thumbnail));
                        }
                        catch { MessageBox.Show("Can't generate list"); }
                    }
                });
            } 
```

此代码从先前的 URI 列表创建磁贴。

```
 try
            {
                var mytile = new CycleTileData
                {
                    Title = "Reddit /r/Pics",
                    Count = 0,
                    SmallBackgroundImage = new Uri("/images/RedditLogo.png", UriKind.Relative),
                    CycleImages = list
                };
                ShellTileExt.Create(new Uri("/MainPage.xaml?msg=fromwidetile", UriKind.Relative), mytile, true);
            }
            catch { MessageBox.Show("cantcreatetile"); }
        }
        catch
        {
            MessageBox.Show("remove tile before creating it again");
        }
    } 
```

在此先感谢，马克斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:58:16.123

所有类型的图块仅支持本地图像。不支持远程图像（不在设备上）。您应该首先[将远程图像保存到隔离存储](https://stackoverflow.com/questions/5870282/save-a-remote-image-in-to-isolated-storage)中。

# c++ - SIMD：四个压缩整数的翻转符号

> ID：14586651
> 
> 赞同：1
> 
> 时间：2013-01-29T15:41:22.243
> 
> 标签：c++, simd

假设我有四个压缩整数。

```
__m128i val = _mm_set_epi32(42,64,123,456); 
```

翻转val中四个整数的符号（乘以-1）的最快方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T15:59:47.060

您可以从一组`{0,0,0,0}`[这可能是最快的] 中减去您的实际值，您可以使用 {-1,-1,-1,-1} “all one”进行异或，然后添加 {1,1,1,1} . 或者你可以乘以-1。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T16:57:50.937

只需从 0 中减去，例如

```
val = _mm_sub_epi32(_mm_set1_epi32(0), val); 
```

# javascript - 如何在 Handlebars 模板中设置 textarea 值？

> ID：14586652
> 
> 赞同：0
> 
> 时间：2013-01-29T15:41:23.490
> 
> 标签：javascript, jquery, local-storage

我正在尝试在车把模板中从 localStorage 设置 textarea 值，但没有运气。一旦我将其从模板标签中取出，该代码就可以正常工作，但在其中什么也不做。从我读到的文档准备好的设置应该可以工作，但对我来说不是。

我正在尝试在用户离开并登录或注册时存储评论。

这是我的代码：

```
$(document).ready(function () {
  if (localStorage['comment_text']) {
    var user_comment_text = localStorage['comment_text'];
    $('textarea#comment_text').val(user_comment_text);
  }
}); 
```

我在这里做傻事吗？

**编辑**

当登录到控制台时，它会从 localStorage 获取值。只是没有在文本区域中设置它。我猜这与执行 javascript 时“textarea#comment_text”不可用有关。我认为呼吁准备好文件可以解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:07:42.663

您的编辑是一个正确的假设。提供的代码没有任何问题。尝试这个：

```
$(document).ready(function () {
  if (localStorage['comment_text']) {
    var comment_text = $('#comment_text');
    var user_comment_text = localStorage['comment_text'];
    debugger;
    comment_text.val(user_comment_text);
  }
}); 
```

检查 comment_text 并查看您的选择为您提供了什么。

# jboss7.x - system-properties 在standalone-full.xml

> ID：14586657
> 
> 赞同：11
> 
> 时间：2013-01-29T15:41:44.580
> 
> 标签：jboss7.x

Jboss版本：jboss-as-7.1.0.Final

我们可以添加吗

```
<system-properties>
    <property name="x" value="/opt/db/common"/>
</system-properties> 
```

在standalone-full.xml 中？

我收到以下错误：

```
 20:54:35,726 INFO  [org.jboss.modules] JBoss Modules version 1.1.1.GA
 20:54:35,884 INFO  [org.jboss.msc] JBoss MSC version 1.0.2.GA
 20:54:35,942 INFO  [org.jboss.as] JBAS015899: JBoss AS 7.1.0.Final "Thunder" starting
 20:54:36,575 INFO  [org.jboss.as] JBAS015950: JBoss AS 7.1.0.Final "Thunder" stopped in 5ms
 20:54:36,569 ERROR [org.jboss.as.controller] JBAS014601: Error booting the container: java.lang.RuntimeException: org.jboss.as.controller.persistence.ConfigurationPersistenceException: JBAS014676: Failed to parse configuration
    at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:161) [jboss-as-controller-7.1.0.Final.jar:7.1.0.Final]
    at java.lang.Thread.run(Thread.java:662) [rt.jar:1.6.0_23]
 Caused by: org.jboss.as.controller.persistence.ConfigurationPersistenceException: JBAS014676: Failed to parse configuration
    at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:125) [jboss-as-controller-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.as.controller.AbstractControllerService.boot(AbstractControllerService.java:187) [jboss-as-controller-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.as.server.ServerService.boot(ServerService.java:261) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.as.controller.AbstractControllerService$1.run(AbstractControllerService.java:155) [jboss-as-controller-7.1.0.Final.jar:7.1.0.Final]
    ... 1 more
 Caused by: javax.xml.stream.XMLStreamException: ParseError at [row,col]:[479,1]
 Message: JBAS014789: Unexpected element '{urn:jboss:domain:1.1}system-properties' encountered
    at org.jboss.as.controller.parsing.ParseUtils.unexpectedElement(ParseUtils.java:85) [jboss-as-controller-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.as.server.parsing.StandaloneXml.readServerElement_1_1(StandaloneXml.java:350) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:126) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.as.server.parsing.StandaloneXml.readElement(StandaloneXml.java:100) [jboss-as-server-7.1.0.Final.jar:7.1.0.Final]
    at org.jboss.staxmapper.XMLMapperImpl.processNested(XMLMapperImpl.java:110) [staxmapper-1.1.0.Final.jar:1.1.0.Final]
    at org.jboss.staxmapper.XMLMapperImpl.parseDocument(XMLMapperImpl.java:69) [staxmapper-1.1.0.Final.jar:1.1.0.Final]
    at org.jboss.as.controller.persistence.XmlConfigurationPersister.load(XmlConfigurationPersister.java:117) [jboss-as-controller-7.1.0.Final.jar:7.1.0.Final]
    ... 4 more 
```

在 [row,col]:[479,1] 我有以下条目：

```
<system-properties>
    <property name="x" value="/opt/db/common"/>
    <property name="y" value="/opt/db/engine/work/q22222-161-1/engine/info/exye/2.0/files/config.xml"/>
    <property name="z" value="/opt/db/engine/work/q22222-161-1/engine/info/exye/2.0"/>
    <property name="m" value="/opt/db/engine/work/q22222-161-1/engine/info/exye/2.0/log"/>
    <property name="n" value="Member1"/>
    <property name="log4j.ignoreTCL" value="true"/>
    <property name="org.apache.tomcat.util.http.Parameters.MAX_COUNT" value="5000"/>
</system-properties> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-30T16:55:08.743

IIRC 它已在上游修复，但某些版本需要`<system-properties/>`直接位于`<extensions/>`标签下。

尝试类似：

```
<?xml version='1.0' encoding='UTF-8'?>

<server xmlns="urn:jboss:domain:1.1">

    <extensions>
        ...
    </extensions>

    <system-properties>
        <property name="x" value="/opt/db/common"/>
        <property name="y" value="/opt/db/engine/work/q22222-161-1/engine/info/exye/2.0/files/config.xml"/>
        <property name="z" value="/opt/db/engine/work/q22222-161-1/engine/info/exye/2.0"/>
        <property name="m" value="/opt/db/engine/work/q22222-161-1/engine/info/exye/2.0/log"/>
        <property name="n" value="Member1"/>
        <property name="log4j.ignoreTCL" value="true"/>
        <property name="org.apache.tomcat.util.http.Parameters.MAX_COUNT" value="5000"/>
    </system-properties>

    ...
</server> 
```

# java - 加密和解密密码

> ID：14586661
> 
> 赞同：1
> 
> 时间：2013-01-29T15:41:53.990
> 
> 标签：java, password-encryption

我正在使用此代码来加密和解密密码

```
public class SecureDigester
{
    private static final char digits[] =
           { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E',
                 'F' };

           private static String byteArrayToHexString(byte[] b)
           {
              StringBuffer hexString = new StringBuffer(b.length);
              for (int i = 0; i < b.length; i++)
              {
                 hexString.append(digits[(b[i] & 0xF0) >> 4]);
                 hexString.append(digits[b[i] & 0x0F]);
              }
              return hexString.toString();
           }

           public static String digest(String plaintext)
           {
              try
              {
                 MessageDigest md = MessageDigest.getInstance("SHA");
                 md.update(plaintext.getBytes("UTF-8"));
                 byte[] mdBytes = md.digest();
                 String hashString = byteArrayToHexString(mdBytes);
                 return hashString;
              } catch (Exception e)
              {
                 throw new RuntimeException(e);
              }
           }

} 
```

在我的登录中，我使用此代码来解密密码：

```
 String passwordDigest = SecureDigester.digest(password);
        if (!user.getPassword().equals(passwordDigest))
        {
            // authentication failed: bad password
        } 
```

现在我有了 forgot-password.jsp 页面，该页面将用户的用户名和密码发送到他/她指定的电子邮件。但是当我使用下面的代码时，我收到了一个加密密码，它也与我数据库中的加密密码不同。

```
String Email = req.getParameter("email");
User userItem = new UserDAO().findEmail(Email);
SendMailSSL sendEmail = new SendMailSSL();
String password = userItem.getPassword();
String EPassword = SecureDigester.digest(password);
sendEmail.send(userItem.getUsername(), EPassword, userItem.getEmail()); 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T15:49:12.927

SHA 和 MD5 等加密哈希是**单向哈希**。无法反转单向哈希。您可以从任何明文生成加密散列，但您无法确定仅给定散列值的原始明文。

您的“解密”代码实际上并未解密 SHA 哈希。相反，它对用户刚刚输入的密码进行哈希处理，并将该哈希值与之前存储的哈希值进行比较。如果哈希匹配，则意味着密码匹配。

像这样散列密码是一种很好的安全方案，但它的一个后果是您无法通过电子邮件向用户发送密码：您没有他们的密码！你只有不可逆的哈希值。这就是为什么如今安全性高的网站如果忘记了原始密码，就不会通过电子邮件将其发送给您。相反，它们提供了一些方法来**重置**您的密码。如果您遇到一个能够通过电子邮件将您的密码发送给您的网站，那就是一个巨大的危险信号*！*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:50:09.240

看起来您将密码作为 SHA1 哈希值存储在数据库中。这很棒，你应该这样做（绝​​对是最佳实践）。使用 SHA1（或任何其他单向哈希）的“缺点”是您无法将哈希“解密”回原始明文。这意味着以下代码不起作用。

```
String Email = req.getParameter("email");
User userItem = new UserDAO().findEmail(Email);
SendMailSSL sendEmail = new SendMailSSL();
String password = userItem.getPassword(); // the userItem returns an SHA1 hash
String EPassword = SecureDigester.digest(password); // this just rehashes the hash
sendEmail.send(userItem.getUsername(), EPassword, userItem.getEmail()); 
```

问题不在于此代码，而在于方法。由于您没有任何方法可以从 SHA1 哈希中恢复用户的明文密码（这是一个*很好的*），因此您需要向用户发送重置密码的链接，而不是包含密码的电子邮件。电子邮件是一个不安全的渠道，密码（除了必须更改的初始密码）绝不应通过电子邮件发送。

这个问题有两种方法。

*   从随机乱码中为用户生成一个新密码，然后对其进行 SHA1 哈希处理。将此值存储在数据库中。将新的随机密码发送给用户并强制用户在下次登录时更改密码。
*   生成用户可用于重置密码的链接。链接需要难以猜测并在一定时间后过期（即在向用户发送电子邮件后的 5-10 分钟内）。这使得攻击者很难利用“重置窗口”。重置链接每次都应该是随机的，并且尽可能不包含有关用户的识别信息。

# gwt - 使用 RequestBuilder 时设置 User-Agent？

> ID：14586662
> 
> 赞同：0
> 
> 时间：2013-01-29T15:42:06.767
> 
> 标签：gwt

我正在使用 RequestBuilder，有没有办法设置 User-Agent 标头？我正在努力：

```
RequestBuilder request = new RequestBuilder(RequestBuilder.POST, url);
request.setHeader("User-Agent", "myuseragent"); 
```

但不确定这是否正确，浏览器会覆盖它吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:47:16.537

`User-Agent`是不允许设置的保留标头：

[http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader()-方法](http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader()-method)

# android - 布局位置/尺寸在显示之前出现问题

> ID：14586663
> 
> 赞同：2
> 
> 时间：2013-01-29T15:42:07.673
> 
> 标签：android, android-layout

我有一段代码在`Button`图像（全屏）上显示一些图钉（带有图像`ImageView`）。（您可以假设所有引脚都是动态创建的并且具有随机位置）。要求是这些引脚不应重叠。对于创建的每个引脚，我正在检查它是否与任何其他先前创建的引脚重叠。

为此，我试图获取`Rect`这些引脚并检查它们是否重叠使用`Rect.intersects()`。问题是在实际显示视图之前我不能使用像`getRight()`, `getTop()`, `getWidth()`,这样的函数。`getHeight()`它们都返回 0。所以我无法获得矩形的正确数据。我试图将代码放在不同的回调中，例如`onWindowFocusChanged()`or`onResume()`但我仍然遇到同样的问题，所有维度/位置都返回 0。

我正在寻找有关此问题的解决方案/建议。如何在引脚显示之前获得正确的位置和尺寸？

我看了看`View.measure()`，似乎我可以使用`getMeasuredWidth()`and获得一些值，`getMeasuredHeight()`但仍然返回 0。`getRight()``getTop()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T12:52:35.630

首先添加不可见的矩形并检查位置，然后根据要求移动该位置并使其可见。这会成功的。

# visual-studio - 我如何才能在 Visual Studio 中保存时构建 TypeScript

> ID：14586665
> 
> 赞同：0
> 
> 时间：2013-01-29T15:42:18.117
> 
> 标签：visual-studio, typescript

当我构建项目时，尽管我在运行/调试时编译了脚本，但它正在冗余地构建脚本事件。有没有办法让它只建立在保存上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:28:00.360

如果您已经安装了[Web Essentials 2012 扩展](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)，这非常容易。

在 Visual Studio 中，转到工具 -> 选项 -> 选择 Web Essentials，在 TypeScript 下将“Compile TypeScript on Save”设置为 True

![在此处输入图像描述](../Images/fbbefa1e0f8aace7150d2a60a7c707d5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:47:56.893

您可以将构建类型设置为 none 并保存 .ts 文件仍将构建 .js 文件。但是，.js 文件不会签入到 TFS，因此当有人获得项目时，他们必须打开并保存每个文件。这似乎是另一个问题。

# trigger.io - forge.request.ajax 上的 ajaxStart()

> ID：14586668
> 
> 赞同：1
> 
> 时间：2013-01-29T15:42:28.743
> 
> 标签：trigger.io

为了显示加载屏幕，我们通过以下方式监听 jQuery ajaxStart() 事件：

```
 $(document).ajaxStart(function() {
        //show loading screen
    }); 
```

但是，发送 forge.reques.ajax() 请求不会触发此事件（至少看起来如此）。

是否已经有类似 forge 的解决方案，还是我必须手动编写该事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:58:45.593

这目前在 forge 中不存在，但它很容易实现：

```
var onAjaxStart = function () {
    // show loading screen
}
var onAjaxEnd = function () {
    // hide loading screen
}
var myAjax = function (params) {
    onAjaxStart();
    var success = params.success;
    params.success = function () {
        onAjaxEnd();
        success && success();
    };
    forge.request.ajax(params);
} 
```

然后我们使用 myAjax(...) 而不是 forge.request.ajax(...)。

# c# - MVC 内联代码未在 html 标记中呈现

> ID：14586670
> 
> 赞同：2
> 
> 时间：2013-01-29T15:42:37.420
> 
> 标签：c#, asp.net-mvc-3, razor, asp.net-mvc-4

所以，我已经使用 MVC 3、Razor 1 和 Web.Helpers 1 一年多了，但最近转移到了 MVC 4、Razor 2 和 Web.Helpers 2。我注意到任何发生了一些奇怪的事情在 HTML 属性中具有内联代码或 Web 帮助程序的视图。即，代码呈现在属性之外。

示例 1：（MVC 3，Razor 1，Web.Helpers 1）

```
<li class="@{ Write(0 == RowCount % 2 ? "even" : "odd"); }"> 
```

将呈现为：

```
<li class="even"> 
```

或者

```
<li class="odd"> 
```

示例 2：（MVC 3，Razor 1，Web.Helpers 1）

```
<img alt="@item.PlanNumber" title="@item.PlanNumber" src="@{Html.RenderAction("GetHomeImage", new { street = (string)item.AddrStreet, photo = (string)item.ELEV1, type = (string)item.RecordType, plan = (string)item.PlanNumber, elevation = (string)item.PlanElevation, defaultImage = (string)item.HomeImage });}" border="0" style="padding:2px 2px 2px 2px;" /> 
```

将呈现为：

```
<img alt="2473W" title="2473W" src="/Content/_gallery/homes/photos/17411WOODFALLSLANE_S.jpg" border="0" style="padding:2px 2px 2px 2px;" /> 
```

当我将站点更新为 MVC 4、Razor 2、Web.Helpers 2 时，我看到以下内容

示例 1 呈现为：

```
<lieven class=""> 
```

或者

```
<liodd class=""> 
```

示例 2 呈现为：

```
<img alt="2473W" title="2473W" /Content/_gallery/homes/photos/17411WOODFALLSLANE_S.jpg src="" border="0" style="padding:2px 2px 2px 2px;" /> 
```

我已经能够通过将 HTML.RenderAction 更改为 HTML.Action 来解决这个问题，所以我的代码现在是：（MVC 4，Razor 2，Web.Helpers 2）

示例 1：

```
string rowClass = (0 == RowCount % 2) ? "even" : "odd";

                    <li class="@rowClass"> 
```

示例 2：

```
<img src="@Html.Action("GetHomeImage", "FindYourHome", new { street = (string)item.AddrStreet, photo = (string)item.ELEV1, type = (string)item.RecordType, plan = (string)item.PlanNumber, elevation = (string)item.PlanElevation, defaultImage = (string)item.HomeImage })" border="0" style="padding:2px 2px 2px 2px;" alt="@item.PlanNumber" title="@item.PlanNumber" /> 
```

这两个例子都正确呈现，但我不确定为什么？

我非常感谢任何可用的信息，它们将帮助我在我们的站点中找到任何其他实例，并使我对更新到 MVC 4、Razor 2 和 Web.Helpers 2 感觉更好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:01:02.000

现在无法测试，但试试这个：

```
<li class="@(0 == RowCount % 2 ? "even" : "odd")"> 
```

注意括号而不是大括号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T04:41:05.897

作为对“为什么”新`@(....)`语法有效的回应，请注意 MVC4 包括对“条件属性”的支持。

在此处查看更多信息：[http ://www.davidhayden.me/blog/conditional-attributes-in-razor-view-engine-and-asp.net-mvc-4](http://www.davidhayden.me/blog/conditional-attributes-in-razor-view-engine-and-asp.net-mvc-4)

# visual-studio - 在 Visual Studio 中禁用或修复 #ifdef-sensitive 着色和智能感知

> ID：14586672
> 
> 赞同：5
> 
> 时间：2013-01-29T15:42:51.663
> 
> 标签：visual-studio, visual-studio-2005, syntax-highlighting

**问题：**我的语法高亮和 IntelliSense 坏了。我有一个像这样的 C++ 源文件：

```
#include "stdafx.hpp"

#ifdef SOMETHING
do_some_stuff;
#endif 
```

其中`stdafx.hpp`（项目的预编译头文件）包含一个`.h`文件，内容如下：

```
#ifdef DEFINE_SOMETHING
#define SOMETHING
#endif 
```

并`DEFINE_SOMETHING`在项目的项目属性中定义（在 C++ / Preprocessor 下）。

Visual Studio 正在迷失方向，并`do_some_stuff;`以纯灰色显示（实际上是很多行代码）——我既没有语法着色也没有 IntelliSense。

**问题：**我怎样才能让 Visual Studio 做到这一点（不太可能），或者关闭它认为已经失效的灰色代码这一事实`#ifdef`？

（重新排列代码不是一种选择——它是一个庞大而复杂的系统，其文件构建在各种环境中，Visual Studio 只是其中之一。我使用的是 Visual Studio 2005，但我很想知道这是否是在更高版本中已修复或可解决。）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-12-18T07:16:12.827

如果有人仍然感兴趣 - 关闭灰显#ifdef：

*   *转到*工具-> 选项
*   *打开*文本编辑器 -> C/C++ -> 格式化
*   *取消选中*用不同颜色着色非活动代码块

在 VS19 中，它是 Tools / Options / Text Editor / C/C++ / View / Inactive Code / Show Inactive Blocks。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-06-30T20:15:24.267

按照之前 aousov 的回答，我检查了我的 VSCode 并找到了这个设置：

C_Cpp: Dim Inactive Regions 控制非活动预处理器块的颜色是否与活动代码不同。如果禁用 IntelliSense 或使用默认高对比度主题，则此设置无效。

在扩展/C/C++

这可能与您使用的版本有关（在我的情况下为 1.46.1）。

最好的，杰弗里

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T06:01:03.547

您描述的问题与 VS 2005 中的课程相同。由于完全重新设计的 Intellisense 系统，该问题已在 Visual Studio 2010 及更高版本中得到修复。这并不直接适用于您的问题，但这里有一些关于底层架构的信息：http: [//blogs.msdn.com/b/vcblog/archive/2009/05/27/rebuilding-intellisense.aspx](http://blogs.msdn.com/b/vcblog/archive/2009/05/27/rebuilding-intellisense.aspx)

有些事情你可以尝试，有些项目结构的改变可以帮助最小化问题的发生频率，但无论你做什么都会受到打击或错过，问题最终还是会再次出现。唯一真正的解决方案是使用更新的 IDE。

[您可以通过安装 VS 2010 和 Daffodil ( http://daffodil.codeplex.com](http://daffodil.codeplex.com) )继续使用 VS 2005 构建工具，然后使用 VS 2010 中的 v80 平台工具集构建您的项目。这使得迁移相当简单，无需任何源代码更改。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-03T22:02:22.683

由于#define SOMETHING 是在stdafx.hpp 中定义的，表明它始终是定义的，因为DEFINE_SOMETHING 是在项目配置中定义的，那么在项目配置中也显式定义SOMETHING 是不可能的吗？

我曾经在 VS2005 和 2008 中遇到过类似的问题，冗余的显式定义有时会有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-31T20:53:02.557

我通过更改**C_Cpp.default.intelliSenseMode解决了这个问题（在 VSCode 中）**

`"C_Cpp.default.intelliSenseMode": "windows-gcc-x64"`

我正在微控制器上构建一个 ARM 项目。它也不是 64 位的。但这确实可以正确解析指令。

对于科学，我尝试了 Widows-gcc-ARM，它也正确地点亮了真正活跃的区域。我也知道 gcc 是在我的 Windows 机器上设置和配置的，虽然我有 clang 和 msvc，但我不使用它们，也不知道它们是否有效——所以这可能是为什么`gcc`对我来说效果更好。

您可以尝试使用此设置，但我相当确定分辨率位于此选项中。

我不知道等效的VS选项，对不起。

# coffeescript - 在咖啡脚本中有效地减少数组

> ID：14586681
> 
> 赞同：0
> 
> 时间：2013-01-29T15:43:12.787
> 
> 标签：coffeescript

如果我在 var 中有一个对象数组。我想减少这种情况，以便它们按特定属性分组。这是我的代码

```
array = tracks.reduce (x,y,i) ->
    x[y.album] = []
    x
, {}

albums = tracks.reduce (x,y,i) ->
    array[y.album].push {'name':y.name, 'mp3':y.mp3}
    array
, {}

console.log(albums) 
```

它输出我想要的东西，但是我想知道是否有更好的方法来编写它，而不必执行第一个循环来为组创建空数组。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T16:06:30.133

是的，只有在没有初始化的情况下才可以使用`or=`or`?=`运算符进行赋值；`array[y.ambum]`因此只使用一个循环。顺便说一句，我认为`array`变量是一个对象有点令人困惑。另一种使用 CoffeeScript 循环而不是编码的方法`reduce`是：

```
albums = {}
for {album, name, mp3} in tracks
  (albums[album] or= []).push {name, mp3} 
```

请注意，我正在使用[解构](http://coffeescript.org/#destructuring)来一次获取所有轨道属性。

或者，如果您想使用`reduce`：

```
albums = tracks.reduce (albums, {album, name, mp3}) ->
  (albums[album] or= []).push {name, mp3}
  albums
, {} 
```

但我认为 CS-loop 版本读起来更好:)

奖励曲目（双关语）：如果您碰巧有 Underscore.js，我强烈建议您使用[`groupBy`](http://underscorejs.org/#groupBy)，这正是这种分组工作：

```
albums = _.groupBy tracks, (track) -> track.album 
```

请注意，每个专辑名称的曲目`albums`将是“完整的”曲目（不仅仅是名称和 mp3 属性）。

* * *

**更新**：关于性能的评论：当被要求“有效地”做某事时，我将其解释为以最直接和最干净的方式做事（我在考虑程序员在阅读代码时的效率）；但许多人会明确地将效率与绩效联系起来。

关于性能，这三个解决方案都是 O(n)，n 是轨道数，复杂度；所以两者都没有比其他人差得可怕。

[似乎](http://jsperf.com/for-vs-foreach-vs-each/30)原始`for`循环在现代 JS 引擎上的运行速度比其等效的高阶兄弟：`forEach`、、`reduce`等（这让 IMO 感到非常难过 :(...)。所以第一个版本应该比第二个版本运行得更快。

*对于 Underscore 版本，我不会做任何预测，因为 Underscore以大量*使用高阶函数而不是原始`for`循环而闻名，但同时，该版本不会为每个轨道创建一个新对象.

在任何情况下，在将解决方案更改为性能更高但可读性较差的解决方案之前，您都应该始终分析您的代码。如果您注意到该特定循环是一个瓶颈，并且您有一组很好的数据来对其进行基准测试，那么[jsPerf](http://jsperf.com)会非常有用:)

# php - UnixTimestamp 用户上次出现

> ID：14586684
> 
> 赞同：1
> 
> 时间：2013-01-29T15:43:21.707
> 
> 标签：php, timestamp

我正在尝试创建一个查询来获取过去 20 分钟内看到的用户，但它没有获取正确的结果。“last_seen”行包含用户上次加载页面的时间戳。

> mysql_query ("SELECT user,rank,ipaddress FROM `" . SQL_PREFIX . "site_session`WHERE last_seen > ".strtotime("-30 minutes")." order by user desc");

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:53:55.663

尝试：

`mysql_query ("SELECT user,rank,ipaddress FROM " . SQL_PREFIX . "site_session WHERE last_seen > (NOW() - INTERVAL 20 MINUTE) order by user desc");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:44:55.127

尝试这个：

```
SELECT user,rank,ipaddress 
FROM " . SQL_PREFIX . "site_session 
WHERE last_seen > INTERVAL CURRENT_TIMESTAMP - 20 MINUTE
order by user desc 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T15:45:25.487

如果您只是使用 Unix 时间戳，为什么不使用数学？

```
SELECT ... WHERE last_seen > UNIX_TIMESTAMP() - (60*20) 
```

如果你的列是一个`datetime`，那么你是：

```
SELECT ... WHERE last_seen > DATE_SUB(NOW(), INTERVAL 20 MINUTE) 
```

您还需要停止`mysql_`在新代码中使用函数。它们不再被维护[并被正式弃用](http://j.mp/XqV7Lp)。看到[**红框**](http://j.mp/Te9zIL)了吗？改为了解[*准备好的语句*](http://j.mp/T9hLWi)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](http://j.mp/QEx8IB)将帮助您决定使用哪个。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T15:46:18.247

尝试这个

```
mysql_query ("SELECT user,rank,ipaddress FROM " . SQL_PREFIX . "site_session WHERE last_seen > ".time()-1200." order by user desc"); 
```

time() 是一个 php 函数，而不是 mysql

# matlab - 不使用频谱图功能的 STFT 计算！

> ID：14586685
> 
> 赞同：1
> 
> 时间：2013-01-26T03:40:07.963
> 
> 标签：matlab

我试图在 MATLAB 中使用 plot3 绘制 STFT，但失败了。有人可以指导我怎么做吗？我的 MWE 如下所示：

```
%% STFT Computataion
clear; clc; clf;

%% Get input and calculate frame size and overlap/shift
[Y,Fs]=wavread('D_NEHU_F0001_MN_10001');
frame_size=round(20*Fs/1000);         % calculate frame size for 20ms
frame_shift=round(10*Fs/1000);        % calculate frame shift for 10ms

%% Plot the input signal in time domain
t=1/Fs:1/Fs:(length(Y)/Fs);
subplot(2,1,1)
    plot(t,Y);
    title('Speech signal in time domain');
    ylabel('Magnitude of samples');
    xlabel('time in seconds');

%% Calculation of STFT
%NoOfFrames=floor((length(Y)/frame_shift)-1);
NoOfFrames=length(Y)-frame_size;
j=1;
%for i=1:frame_shift:(length(Y)-frame_size)
for i=1:frame_shift:((length(Y)-frame_size))%+frame_shift)
    sp_frame=Y(i:(i+frame_size)).*hamming(frame_size+1);
    sp_frame_dft=abs(fft(sp_frame)); % Compute STFT
    sp_frame_array(:,j)=sp_frame_dft;
    j=j+1;
end

%% Plot the STFT in 3D
[rows,cols]=size(sp_frame_array);
F=linspace(1/Fs,Fs/2000,cols);
T=1/Fs:(frame_shift*Fs/1000):(cols*(frame_shift*Fs/1000));
Z=1:frame_size+1;
subplot(2,1,2)
    %mesh(sp_frame_array);
    %surf(sp_frame_array,'EdgeColor','none');
   plot3(T,F,sp_frame_array); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T21:07:35.147

我不确定你的问题到底是关于什么的，但我想问题是，使用提供的代码，你不会得到一个类似于你得到的情节，比如说，用`surf`.

此外，我也不太清楚你为什么要使用`plot3`，也许是为了得到时间和频率的标签吧？你可以这样做`surf`：

```
surf(T, F, sp_frame_array,'EdgeColor','none'); 
```

事实上，你`plot3`没有给出相同数字的原因是因为 的参数`plot3`必须是三个相同大小的矩阵（检查它`help plot3`）。根据我的测试，您的代码实际上应该在 Matlab 上被破坏，但事实并非如此。好吧，Matlab 又一次允许人们在没有警告的情况下乱搞（*去 Python！*：D）......无论如何，尝试将矩阵设置为更像以下内容：

```
F=linspace(1/Fs,Fs/2000, rows); % note: has to be rows, not cols here!
Fmat = F(:) * ones(1,cols); % or use repmat
T=1/Fs:(frame_shift*Fs/1000):(cols*(frame_shift*Fs/1000));
Tmat = ones(rows,1) * T(:)';

plot3(Tmat,Fmat,sp_frame_array); 
```

虽然这通常会产生更符合我在绘制频谱图时所期望的东西，但我仍然会发表一些评论：

*   由于您填写的方式，您的`F`向量应该上升到。更具体地说，它应该从 0Hz 变为：`Fs``sp_frame_dft``Fs - Fs/rows`

    ```
    F = linspace(0,Fs*(1-1/rows)/1000,rows); % in kHz 
    ```

*   您可能希望以 dB 为单位绘制幅度：

    ```
    plot3(Tmat,Fmat,db(sp_frame_array)); 
    ```

![情节3结果](../Images/76c9cc4ee493d5db7272aa572700b3fc.png)

*   `plot3`每列提供的矩阵绘制一条线。这意味着可能要画很多线！正如@atul-ingle 所问，你确定这是你想要的吗？也许`waterfall`会以更低的成本提供更好的渲染？

    ```
    waterfall(T,F,db(sp_frame_array)); 
    ```

![瀑布结果](../Images/a408ce7606d4f43929745bc028bad73a.png)

好吧，你会得到行的行，而不是列，所以如果后者是你想要的，你可能需要转置。

*   您可能还更喜欢仅可视化矩阵的前半部分（因为高于 Fs/2 的频率只是矩阵另一半的镜像）。

希望有帮助！

# tfs - 最新值 =“未下载”

> ID：14586687
> 
> 赞同：23
> 
> 时间：2013-01-29T15:43:31.067
> 
> 标签：tfs

我在 TFS 中有几个项目，它们在目录层次结构中直观地显示为灰色。当我在 Visual Studio 2010/Source Control/TFS 2010 中浏览项目时，我注意到它们的所有内容都具有“未下载”的最新值。通常，我只看到“是”或“否”的最新值。

*   我已经尝试了所有我知道的“获取最新”的品种，但我总是被提醒“所有文件都是最新的”。
*   如果我尝试“签出以进行编辑”，则不允许。
*   当我观察这些灰显文件的属性时，它们总是说 Workspace Version = “Not applicable”。

如何修复 TFS 以便我可以再次下载和签出项目？我怀疑我的工作区搞砸了，但我不知道如何恢复/重新配置它。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-29T19:16:13.063

我能够重新映射目录以解决我的问题。为此，我

*   选择（右键单击）包含我所有代码的分支，然后选择“删除映射...”
*   重命名了我在 TFS 中映射到的文件夹（您也可以将其删除，但我重命名只是为了在此实验过程中保留它）
*   使用我一开始映射到的分支的原始名称创建了一个新文件夹，并且
*   选择（右键单击）包含我所有代码的分支，然后选择“映射到本地文件夹”。

此过程强制重新下载整个分支。对我来说幸运的是，我的分支只有 2GB，所以我能够在大约 5-10 分钟内重新下载。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-29T18:16:30.720

获得“所有文件都是最新的”的原因是 TFS 服务器上的信息和磁盘上的文件不同步。如果您使用文件资源管理器删除磁盘上的文件 - TFS 服务器仍然认为您在磁盘上有文件。要重新同步，您必须强制进行如下更新：

![获取特定版本...](../Images/0f35a0db54db253596b8996a3e79cc45.png)

选中此对话框上的两个复选框 - 然后单击**Get**：

![获取对话框](../Images/13754400b2ae1d5abb96fefb1c7d8a4b.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-05T12:29:02.287

当我添加现有项目作为对另一个项目的引用时，它也发生在我身上。

当我添加项目引用时，我有一条弹出消息告诉我当前项目已经存在于源代码管理中，但与当前项目的相对路径不同。

我错误地选择了错误的选项，导致不必要的映射。

为了解决这个问题，我从工作区中删除了映射。

只有在删除映射后，我才能获得最新的项目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-07-22T19:38:16.333

我按照这个解决了它 - 删除工作空间，然后 tfs 提示我再次下载所有内容。 [https://msdn.microsoft.com/en-us/library/ms181386(v=vs.100).aspx](https://msdn.microsoft.com/en-us/library/ms181386(v=vs.100).aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T17:44:13.063

听起来 TFS 中的文件夹/文件未映射到工作区中的本地驱动器。

在源代码管理资源管理器中，选择“工作区：”下拉菜单，然后选择“工作区”。

从出现的列表中选择您当前的工作区，然后点击“编辑”。检查 TFS 文件夹`$/blah`是否映射到本地文件夹`c:\tfs\blah`

您现在应该能够获取最新信息、结帐等。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-31T20:19:03.937

之后我对此感到有些奇怪：

*   更新到 TFS2017
*   更新到 VS2017
*   试图将我的 TFS URL 更改为 https（放弃并恢复为 http）

所以在某个地方，这打破了我的工作空间，以至于我的所有项目都显示为未绑定。我能够再次获得最新信息。这不应该覆盖您更改的任何文件，只要它们是可写的，但如果您有任何疑问，请在获取最新版本之前备份您的本地工作区。它会要求您解决冲突 - 因此请确保选择“保留本地副本”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-04-27T10:00:31.973

就我而言，当分支被删除时：右键单击+签入，帮助。

# c# - 在 C# 或 JQuery 中处理 OnClick

> ID：14586689
> 
> 赞同：1
> 
> 时间：2013-01-29T15:43:34.800
> 
> 标签：c#, jquery, asp.net, standards

我正在使用 c#/aspx/jquery 开发一个 webforms 项目。我不确定在哪里处理我的`Onclick`. 两种选择（在 C# 或 jquery 中执行）似乎都是可行的。哪个会更好？

这是场景：

我想构建一个`checkbox`将切换 a `textbox's textmode`，在 Password 和 SingleLine 之间更改它。

目前，我的标记有以下代码，因为我目前正在用 C# 处理它：

```
<asp:Checkbox ID="CheckBox1" OnCheckedChanged="CheckBox1_OnCheckedChanged"/> 
```

编码：

```
protected virtual void OnCheckedChange(EventArgs e)
{
     If (CheckBox1.TextMode == TextMode.Password)
          CheckBox1.TextMode = TextMode.SingleLine;
     else
          CheckBox1.TextMode = TextMode.Password;
} 
```

这个用例是：用户正在输入他的密码。在同一页面上，他可以通过选中复选框来选择是否隐藏密码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:51:37.153

> *哪个会更好？*

你的功能需求是什么？

*   在后面的 asp.net 代码上用 C# 设置这个，你需要一个回发来使它工作。这意味着页面将刷新，文本框将发生变化。
*   在客户端 (JS/JQuery) 上，页面不会刷新。

现在您评估所需的工作与所需的质量。（如果你想要一个好的用户体验并且可以编写 JS 把它放在 JS 中，如果你时间紧迫并且可以刷新然后在 asp.net 上做）。

*我试图从一般意义上回答您关于如何做出这样的决定（以我的拙见）的问题。* **实际上**，这在 javascript 中实现非常简单，您应该在那里实现。

* * *

**现在是代码**（我假设你知道如何把它放在后面的 asp.net 代码中，所以我将编写 JS 方法）：

html:

```
My Password: <input type="password" id="mytext" /> <br />
Hide Chars : <input id="passChk" type="checkbox" checked="true" /> 
```

Javascript：

```
$(function() {
    $("#passChk").change(function(){
        if(this.checked) {
            $("#mytext").attr("type","password");
        } else {
            $("#mytext").attr("type","text");
        }
    });
}); 
```

看到它在这里运行：http: [//jsfiddle.net/rC5NW/2/](http://jsfiddle.net/rC5NW/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T21:57:39.903

After trying to implement the accepted answer, I realized that some browsers (I used Google Chrome) does not allow changing the type attribute. There is a way to bypass this but I don't think it is worth it for my purposes:

Therefore, It might be better to just use C#.

**Relevant Questions**

*   [Does javascript forbid changing the input type from password or to password?](https://stackoverflow.com/questions/8548469/does-javascript-forbid-changing-the-input-type-from-password-or-to-password)
*   [change type of input field with jQuery](https://stackoverflow.com/questions/1544317/jquery-change-type-of-input-field)

# android - ViewPager 中的 PagerTabStrip 位置

> ID：14586690
> 
> 赞同：8
> 
> 时间：2013-01-29T15:43:38.663
> 
> 标签：android, android-layout, android-viewpager

我有以下代码：

```
 <android.support.v4.view.ViewPager
    android:id="@+id/main_pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <android.support.v4.view.PagerTabStrip
        android:id="@+id/pager_tab_strip"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
         />
</android.support.v4.view.ViewPager> 
```

一切都得到了应有的布局。

我现在想要的是**PagerTabStrip 覆盖 ViewPager**。

它应该在不占用任何布局空间的情况下呈现在顶部。基本上 ViewPager 中的片段应该像 PagerTabStrip 一样从 0,0 开始。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-26T16:39:16.197

我终于找到了一种方法来做到这一点。

在`onAttachedToWindow`PagerTitleStrip 中，这会检查父级是否为 ViewPager：

```
final ViewParent parent = getParent();
 if (!(parent instanceof ViewPager)) {
  throw new IllegalStateException("PagerTitleStrip must be a direct child of a ViewPager.");
} 
```

因此，这需要去。

**解决方案：**

我现在通过创建自己的自定义 PagerTitleStrip/PagerTabStrip 解决了这个问题。我删除了上述行为并将其替换为指向 ViewPager 的 PagerTitleStrip 的可样式属性。这是在 values/attrs.xml 中定义的，如下所示：

```
<declare-styleable name="PagerTitleStripCustom">
    <attr name="parentViewPager" format="reference" />
</declare-styleable> 
```

并像这样读入 PagerTitleStrip 构造函数：

```
TypedArray types = context.obtainStyledAttributes(attrs,R.styleable.PagerTitleStripCustom, 0, 0);   
pagerID = types.getResourceId(R.styleable.PagerTitleStripCustom_parentViewPager, 0); 
```

我们`onAttachedToWindow`现在可以检查 mViewPager 变量是否为 null 并将其分配给我们的 pagerID，如下所示：

```
@Override
protected void onAttachedToWindow() {
    super.onAttachedToWindow();

    final ViewParent parent = getParent();

    ViewPager pager = null;

    if (pagerID != 0) {
        View test2 = ((View) parent).findViewById(pagerID);
        pager = (ViewPager) test2;
    } else if (pagerID == 0 && (parent instanceof ViewPager)) {
        pager = (ViewPager) parent;
    } else if (pagerID == 0 && !(parent instanceof ViewPager)) {
        throw new IllegalStateException("PagerTitleStrip is neither a direct child of a ViewPager nor did you assign the ID of the ViewPager.");
    } else {
        throw new IllegalStateException("PagerTitleStrip: Something went completely wrong.");
    }

    final PagerAdapter adapter = pager.getAdapter();

    pager.setInternalPageChangeListener(mPageListener);
    pager.setOnAdapterChangeListener(mPageListener);
    mPager = pager;
    updateAdapter(mWatchingAdapter != null ? mWatchingAdapter.get() : null, adapter);
} 
```

现在 PagerTitleStrip/PagerTabStrip 控件可以像这样在布局中自由定位：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    xmlns:custom="http://schemas.android.com/apk/res/com.YOUR.PATH"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

 <android.support.v4.view.ViewPager
     android:id="@+id/main_pager"
     android:layout_width="match_parent"
     android:layout_height="match_parent" />

 <android.support.v4.view.PagerTabStripCustom
     android:layout_width="match_parent"
     android:layout_height="wrap_content"
     custom:parentViewPager="@id/main_pager" />

</RelativeLayout> 
```

这只是快速而肮脏的概念证明。希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T18:14:59.907

```
<RelativeLayout android:id="@+id/view_pager_container
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

<android.support.v4.view.ViewPager
    android:id="@+id/main_pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

 <android.support.v4.view.PagerTabStrip
        android:id="@+id/pager_tab_strip"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
         />

</android.support.v4.view.ViewPager>

</RelativeLayout> 
```

使用RelativeLayout 时，如果在添加视图时未指定视图应放置的位置，则视图会简单地在RelativeLayout 的左上角（或位置0、0）中相互叠加添加。

# jakarta-ee - Jboss AS 7.1.1 中的 Resteasy JAX-RS 不工作

> ID：14586692
> 
> 赞同：1
> 
> 时间：2013-01-29T15:43:41.880
> 
> 标签：jakarta-ee, jboss7.x, resteasy

我正在尝试在 Jboss AS 7.1.1 下部署一个简单的 Web 应用程序，它使用 Resteasy 公开 JAX-RS 服务。根据 Resteasy 文档（我已将 resteasy 更新为 3.0 beta 2），无需在 web.xml 中放置任何内容，因此我在 eclipse 中创建了一个空的 web 项目并使用了以下 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
</web-app> 
```

我还有一个应用程序类：

```
import javax.ws.rs.ApplicationPath;
import javax.ws.rs.core.Application;

@ApplicationPath("/rest")
public class MyApplication extends Application {

} 
```

和一个实现实际服务的类：

```
import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;
import javax.ws.rs.core.Response;

@Path( "/test" )
public class Login {

   @GET
   @Produces(MediaType.TEXT_HTML)
   public Response login()  {
      return Response.ok( "logged in" ).build();
   }

} 
```

不幸的是，当我启动服务器并尝试访问应用程序时，我看到了 404 错误。

我还尝试`examples/oreilly-workbook-as7/ex03_1`使用 maven 运行与 Resteasy 分发 () 捆绑的示例之一，但是在正确构建和部署战争之后，它无法运行测试：

```
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running com.restfully.shop.test.CustomerResourceTest
*** Create a new Customer ***
Tests run: 1, Failures: 1, Errors: 0, Skipped: 0, Time elapsed: 0.53 sec <<< FAILURE!

Results :

Failed tests:   testCustomerResource(com.restfully.shop.test.CustomerResourceTest): expected:<201> but was:<404>

Tests run: 1, Failures: 1, Errors: 0, Skipped: 0 
```

我无法弄清楚我错过了什么。我的项目有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:27:51.207

我刚刚复制了您的代码，它可以工作（我只是没有任何 web.xml）。

我可以连接`http://localhost:8080/warname/rest/test`并`logged in`返回。

# c# - 使用 LINQ 在 C# 中解析 xml

> ID：14586694
> 
> 赞同：1
> 
> 时间：2013-01-29T15:43:58.727
> 
> 标签：c#, xml, linq, parsing

我有以下xml结构

```
<userlist>
  <user Name="something">
    <function name="funcname">
      <picture name="pictname">
         <curve name="curvename">
          <name>NAME</name>
          ...
         </curve>
      </picture>
     </function>
     <function name="function2">
     ...
     </function>
   </user> 
```

它继续一点。我编写了一个函数来提取“函数”标签，并使用简化为的代码将它们放置在对象中：

```
from function in xmlDoc.Descendants("function")
select new FUNCTIONOBJECT {
 do all the rest...
 }.toList<FUNCTIONOBJECT>(); 
```

我现在正试图做到这一点，以便我只过滤给定用户的功能。所以给出了用户的名称属性。谁能告诉我如何使用 LINQ 进行这项工作？我的尝试是：

```
from user in xmlDoc.Descendants("user")
where user.Attribute("Name").Value == givenusername
select {
   var functions =
     from function in user.Descendants("function")
     select new FUNCTIONOBJECT {
     ... more stuff
     }.toList<FUNCTIONOBJECT>(); 
```

但这是错误的并且不起作用。所有的帮助都是好的。我对 c# 还是很陌生，仍然试图用 LINQ 进行 xml 解析。

编辑：我所拥有的更新版本仍然无法正常工作：

```
XDocument xmlDoc = XDocument.Load(path);

        var functionlist =
            (from user in xmlDoc.Descendants("user")
             where user.Attribute("Name").Value == username
             select(
             (from function in user.Descendants("function")
             select new Function
             {
                 name = function.Attribute("name").Value,
                 pictures =
                    (from picture in function.Descendants("picture")
                     select new Picture
                     {
                         name = picture.Attribute("name").Value,
                         layout = picture.Element("layout").Value,
                         curves =
                            (from curve in picture.Descendants("curve")
                             select new Curve
                             {
                                 name = curve.Attribute("name").Value,
                                 section = curve.Element("section").Value,
                                 run = curve.Element("run").Value,
                                 folder = curve.Element("folder").Value,
                                 drivingpoint = curve.Element("drivingpoint").Value,
                                 display = int.Parse(curve.Element("display").Value),
                                 points =
                                    (from point in curve.Descendants("point")
                                     select new Point
                                     {
                                         id = point.Element("id").Value != null ? point.Element("id").Value : string.Empty,
                                         direction = point.Element("direction").Value != null ? point.Element("direction").Value : string.Empty,
                                     }).ToList<Point>(),
                             }).ToList<Curve>(),
                     }).ToList<Picture>(),
             }).ToList<Function>(),
             ).toList();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T15:46:52.917

只有几个语法错误。否则，内容是正确的。同时学习 C# 和 LINQ 语法（语言中的语言）有点棘手。这是更正后的代码：

```
from user in xmlDoc.Descendants("user")
where user.Attribute("Name").Value == givenusername
select ((from function in user.Descendants("function")  // When you do a "select something" "something" must have a value, so you can't begin with "{ var functions = ..."
         select new FUNCTIONOBJECT 
         {
             // more stuff
         }).ToList();  // You don't have to specify <FUNCTIONOBJECT> because the compiler deduce it from the context (here there a new FUNCTIONOBJECT 
```

但是在这里，您将拥有一个`List<List<FUNCTIONOBJECT>>`. 为什么？因为代码中没有信息表明只有 1 个用户拥有`givenusername`.

如果是这种情况，只需拆分代码：

```
// Gets the user
var user = (from user in xmlDoc.Descendants("user")
            where user.Attribute("Name").Value == givenusername
            select user).Single();  // Get the only user that satisfy the condition (Throw an exception if no user has the given name or if multiple users have the given name)

// Gets its functions
List<FUNCTIONOBJECT> functions = (from function in user.Descendants("function")
                                  select new FUNCTIONOBJECT 
                                  {
                                      // more stuff
                                  }).ToList(); 
```

# c++ - 关闭后提升 asio async_connect 成功

> ID：14586695
> 
> 赞同：1
> 
> 时间：2013-01-29T15:43:59.647
> 
> 标签：c++, sockets, boost, boost-asio

单线程应用程序。

并非每次都会发生，仅在高负载 1.5 小时后才会发生。

1.  tcp::socket::async_connect
2.  tcp::socket::close （通过deadline_timer）
3.  async_connect_handler 给出成功错误代码（一百万次），但套接字由（2）关闭。99.999% 的时间它给出了 errno=125 (ECANCELED)。

套接字实现或提升 asio 是否有可能以某种方式做到这一点：

1.  异步连接
2.  异步成功发布到 io_service
3.  定时器关闭
4.  由我处理的异步成功，不受关闭影响

现在通过在我的变量中保存状态来解决，忽略接受成功。

Linux 2.6 (fedora)。提升 1.46.0

PS：ofcouse可能是我的错误......但如果不是这个，可以顺利运行几天。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T21:19:41.783

正如 Igor 在评论中提到的，完成处理程序已经排队。

这种情况是操作执行和处理程序被调用之间的时间分离的结果。[`io_service::run()`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/io_service/run.html)、[`io_service::run_one()`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/io_service/run_one.html)、[`io_service::poll()`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/io_service/poll.html)和的文档[`io_service::poll_one()`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/io_service/poll_one.html)专门提到处理程序，而不是操作。在场景中，`socket::async_connect()`操作和`deadline_timer::async_wait()`操作在同一个事件循环迭代中完成。这导致两个处理程序都以`io_service`未指定的顺序添加到延迟调用中。

考虑以下强调场景的片段：

```
void handle_wait(const boost::system::error_code& error)
{
  if (error) return;
  socket_.close();
}

timer_.expires_from_now(boost::posix_time::seconds(30));
timer_.async_wait(&handle_wait);
socket_.async_connect(endpoint_, handle_connect);
boost::this_thread::sleep(boost::posix_time::seconds(60));
io_service_.run_one(); 
```

当`io_service_.run_one()`被调用时，`socket::async_connect()`和`deadline_timer::async_wait()`操作可能已经完成，导致`handle_wait`并`handle_connect`准备好以`io_service`未指定的顺序从内部调用。为了正确处理这个未指定的顺序，需要从内部发生额外的逻辑`handle_wait()`来`handle_connect()`查询当前状态，并确定是否调用了其他处理程序，而不是仅仅依赖于`error_code`操作的状态 ()。

确定其他处理程序是否已调用的最简单方法是：

*   在`handle_connect()`中，检查套接字是否仍然通过[`is_open()`](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/reference/basic_stream_socket/is_open.html). 如果套接字仍然打开，那么`handle_timer()`还没有被调用。`handle_timer()`表明已经运行的一种干净方法`handle_connect()`是更新到期时间。
*   在`handle_timer()`中，检查是否过期。如果是这样，那么`handle_connect()`还没有运行，所以关闭套接字。

生成的处理程序可能如下所示：

```
void handle_wait(const boost::system::error_code& error)
{
  // On error, return early.
  if (error) return;

  // If the timer expires in the future, then connect handler must have
  // first.
  if (timer_.expires_at() > deadline_timer::traits_type::now()) return;

  // Timeout has occurred, so close the socket.
  socket_.close();
}

void handle_connect(const boost::system::error_code& error)
{
  // The async_connect() function automatically opens the socket at the start
  // of the asynchronous operation. If the socket is closed at this time then
  // the timeout handler must have run first.
  if (!socket_.is_open()) return;

  // On error, return early.
  if (error) return;

  // Otherwise, a connection has been established.  Update the timer state
  // so that the timeout handler does not close the socket.
  timer_.expires_at(boost::posix_time::pos_infin);
} 
```

Boost.Asio 提供了一些处理超时的[例子](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/example/timeouts/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:56:04.463

我接受 twsansbury 的回答，只是想添加更多信息。

关于关机（）：

```
void async_recv_handler( boost::system::error_code ec_recv, std::size_t count )
{
    if ( !m_socket.is_open() )
        return; // first time don't trust to ec_recv
    if ( ec_recv )
    {
        // oops, we have error
        // log
        // close
        return;
    }
    // seems that we are just fine, no error in ec_recv, we can gracefully shutdown the connection
    // but shutdown may fail! this check is working for me
    boost::system::error_code ec_shutdown;
    // second time don't trusting to ec_recv
    m_socket.shutdown( t, ec_shutdown );
    if ( !ec_shutdown )
        return;
    // this error code is expected
    if ( ec_shutdown == boost::asio::error::not_connected )
       return;
    // other error codes are unexpected for me
    // log << ec_shutdown.message()
    throw boost::system::system_error(ec_shutdown);
} 
```

# wpf - 网格列上的对齐（wpf）

> ID：14586696
> 
> 赞同：1
> 
> 时间：2013-01-29T15:44:00.537
> 
> 标签：wpf, grid

我有一个网格，它的列居中对齐。例如，此网格中某个单元格上的每个图像都以其单元格为中心。网格定义中没有设置 this 。网格定义如下：

```
 <Grid Canvas.Left="16" Canvas.Top="229" Visibility="{Binding Status,
                                     Converter={StaticResource EnumToVisibilityConverter},
                                     ConverterParameter='OK,Processing'}"  IsEnabled="{Binding Status,
                                     Converter={StaticResource EnumToBoolConverter},
                                     ConverterParameter='OK'}" >

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="100"  />
            <ColumnDefinition Width="150" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="40"  />
            <RowDefinition Height="40" />
            <RowDefinition Height="40"/>
            <RowDefinition Height="40"/>
         </Grid.RowDefinitions>
        <Image  Grid.Column="0" Grid.Row="0" Grid.ColumnSpan="2" Source="image1.png" Stretch="Fill" Width="111" Height="20" />

        <Image  Grid.Column="0" Grid.Row="1"  Source="image2.png" Width="49"  Height="17"/>

    </Grid> 
```

上面两张图片都是居中对齐的。

我检查了父画布，没有任何东西可以规定它应该居中。有没有办法将网格列的对齐方式设置为左对齐？

有什么工具可以让我看到每个组件的属性设置在哪里？（类似于开发人员工具栏为 CCS 和 HTML 所做的工作）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T00:38:41.313

如果需要，您可以将 的 设置`HorizontalAlignment`为`Image`左​​侧，因为我很确定`Center`这是默认对齐方式。

```
 <Image HorizontalAlignment="Left" ...... 
```

# ember.js - 如何提交相关模型

> ID：14586706
> 
> 赞同：2
> 
> 时间：2013-01-29T15:44:42.330
> 
> 标签：ember.js, ember-data

我正在使用 ember-pre4 和 ember-data rev 11。

楷模：

```
A = DS.Model.extend({
    //some other fields
    b: DS.hasMany('B')
})
B = DS.Model.extend({
    //some other fields
    a: DS.hasOne('A') 
}) 
```

在我的路由器中，我创建了模型 A 的实例并创建了模型 B 的实例并将它们连接起来。他们都没有 server-side `id`。像这样的东西：

```
var a = A.createRecord();
    b = B.createRecord();
b.set('a', a)
a.get('b').addObject(b) 
```

当我想保存我制作的那些模型时：

```
a.transaction.commit() 
```

我希望看到：

1.  用空 b 保存 a // []
2.  将a pass a的id存入b后保存b
3.  保存 b 后重新获取 a

但不幸的是，ember 并行执行了 2 个请求，而 a 的请求数据为：

```
"{//some fields, b: [/url_to_b//]}" // we dont have b's id 
```

b的请求数据是：

```
"{//some fields } // we dont have a's id 
```

解决这个问题的最佳方法是什么，新的 ember 是否有适合我情况的默认解决方案，或者我应该手动完成所有工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T08:20:51.000

解决方案：我将 createRecord 函数包装在 waitForParents 函数中：

```
waitForParents:function (record, callback, context) {
    var observers = new Em.Set();

    record.eachRelationship(function (name, meta) {
        var relationship = get(record, name);

        if (meta.kind === 'belongsTo' && relationship && get(relationship, 'isNew')) {
            var observer = function () {
                relationship.removeObserver('id', context, observer);
                observers.remove(name);
                finish();
            };

            relationship.addObserver('id', context, observer);
            observers.add(name);
        }
    });

    finish();

    function finish() {
        if (observers.length === 0) {
            callback.call(context);
        }
    }
},

createRecord:function (store, type, record) {
   this.waitForParents(record, function () {   
   // createRecord code here 
   }
} 
```

# asp.net-mvc - 安装 ASP.NET MVC4 框架会影响 MVC3 站点的性能

> ID：14586707
> 
> 赞同：1
> 
> 时间：2013-01-29T15:44:46.353
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我们有一个运行 ASP.NET MVC3 网站的 Win 2008 Web 服务器。

为了**准备**将站点升级到 MVC4，在服务器上安装了 MVC4 框架：

1.  安装 .NET 4.5 框架
2.  安装 .NET 4.5 补丁
3.  安装 ASP.MVC 4 框架

在那之后，我们的 MVC3 站点现在运行非常缓慢（需要几秒钟才能响应）。其他网站（其 AppPools 使用框架的 v2.0）运行良好，但运行 v4.0 的网站却没有。

有什么建议么？

提前致谢

格里夫

# javascript - 在 Chrome 中拖动时锁定鼠标光标

> ID：14586712
> 
> 赞同：6
> 
> 时间：2013-01-29T15:44:55.783
> 
> 标签：javascript, google-chrome

**这与其他所有问题都不一样。** **我已经阻止 Chrome 在拖动时进入文本选择模式。** （编辑：我只想锁定图标/外观，不限制位置或移动，并且只在 mousedown 和 mouseup 之间）我想避免的问题是 Chrome 在拖动时将光标更改为光标下的任何内容（即-i-beam 在文本输入控件上，在超链接上手等）。

IE 和 FireFox/Moz 支持我在 mousedown 事件中调用的 element.setCapture()，它将这些浏览器“锁定”到该元素，以便鼠标光标停留在该元素的光标所在的位置。非常好。Chrome 不支持我所知道的该功能或类似的功能。

通过查看文档对象而不是被单击的元素上的 mousemove 和 mouseup 事件，我仍然能够获得**大部分**setCapture() 行为，因为我可以跟踪发生在元素外部甚至外部的鼠标事件浏览器窗口。但是，我仍然有一个问题，鼠标光标在 Chrome 中发生了变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:49:08.887

我相信您正在寻找[Pointer Control Lock API](https://developer.mozilla.org/en-US/docs/API/Pointer_Lock_API)，这是一种最近推出的用户控制用户输入设备的方法（如果允许）。最大的用例是游戏。

如果没有安全且受支持的 API，允许网站接管用户输入控件将是灾难性的（即点击劫持和强制恶意软件下载），因此如果您希望“锁定”光标，那么这可能是您唯一的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T13:58:43.787

我通常将一个元素放置在其他所有内容上，并将预期的光标放在鼠标按下并在鼠标抬起时将其删除。远非最干净的方法，但它对我有用。

# javascript - JavaScript中的`new`只是`.call`的语法糖吗？

> ID：14586714
> 
> 赞同：7
> 
> 时间：2013-01-29T15:45:00.353
> 
> 标签：javascript

在 JavaScript 中，我想知道是否有什么特别之处，`new`或者它只是`call()`. 如果我有一个像这样的构造函数：

```
function Person ( name, age ){
    this.name = name;
    this.age = age;
} 
```

是

```
var bob = new Person( "Bob", 55 ); 
```

任何不同于

```
var bob;
Person.call( bob = new Object(), "Bob", 55 ); 
```

?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:06:17.573

它们在您的示例中不等效，因为`bob`不继承自`Person.prototype`（它直接继承自`Object.prototype`）。

等效版本是

```
Person.call(bob = Object.create(Person.prototype), "Bob", 55 ); 
```

是语法糖吗？可能取决于你如何定义它。

`Object.create`在早期的 JS 版本中不可用，因此无法设置对象继承`new`（您可以在某些浏览器中覆盖对象的[内部`__proto__`属性](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/Object/proto)，但这确实是一种不好的做法）。

* * *

作为参考，如何`new`工作在[http://es5.github.com/#x11.2.2](http://es5.github.com/#x11.2.2)和[http://es5.github.com/#x13.2.2](http://es5.github.com/#x13.2.2)中定义。`Object.create`在[http://es5.github.com/#x15.2.3.5](http://es5.github.com/#x15.2.3.5)中有描述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T15:46:54.233

不，*不仅仅是*`new`语法糖。相反，可以（并且仅可以）构造一个新实例，因为JavaScript 允许[在某些情况下](https://stackoverflow.com/questions/1928342/javascript-using-constructor-without-operator-new)[不调用构造函数。](https://stackoverflow.com/questions/1928342/javascript-using-constructor-without-operator-new)*`Person.call`[`new`](https://stackoverflow.com/questions/1928342/javascript-using-constructor-without-operator-new)*

 ** * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T15:47:02.083

**不。**

`call()`仅调用一个函数（另请参见`apply()`），而`new`关键字从原型初始化一个对象。

虽然原型构造函数确实是一个函数，但它是一种特殊情况。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-29T15:48:27.267

不，这不对。如果您的第一个示例，您实际上是在创建一个人。

```
bob instanceof Person == true 
```

在另一个例子中......

```
bob instanceof Person == false 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T15:50:13.567

创建一个类型的实例的目的是共享一些行为，通常是通过原型。

假设您添加了一个功能：

```
Person.prototype.doSomething = function(){
   ...
} 
```

然后这个函数将可用于作为`Person`using实例创建的所有对象`new`，但不适用于您创建的对象 using `call`。

MDN 有一个[很好的关于原型使用的介绍文档](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_and_the_prototype_chain)。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-29T15:51:43.887

当您调用 时`new`，您正在调用该函数作为构造函数。这告诉 JavaScript，创建一个“新”`Person`对象，然后调用该新对象设置为的函数`this`。

在您的第二个示例中，您正常调用该函数，并手动设置`this`为 a `new Object`（或只是`{}`）。因此，该函数运行，并设置`this`您发送给它的对象的属性。（尝试只是做`Person( "Bob", 55 );`，然后`console.log(window.name)`）

在第一个例子中，`bob`是一个`Person`对象；但在第二个，它是一个`Object`.

所以，不，一个不是另一个的缩写。它们是不同的。*

# qt - 我如何实现在 qtableview 中更新多行

> ID：14586715
> 
> 赞同：1
> 
> 时间：2013-01-29T15:45:01.933
> 
> 标签：qt, qtableview, qabstracttablemodel

我有一个定制的 qtablemodel 和一个 qtableview。我想添加一个功能，用户可以选择多行并通过更改此行中的一个值。他实际上会在所有行中更改此值。例如，当他选择整个表格时，用户可以将表格中所有人的名字更改为 alice。

你能帮我实现这个目标吗？

我不明白如何为不同的行多次触发模型的 setData。或者你能告诉我在调用模型中的 setData 函数之前 qtableview 向模型发送了哪个信号吗？

提前非常感谢唐尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-21T14:51:56.923

对于同时编辑同一列中所有选定值的问题，我可能有一个稍微更直接的解决方案。与重写 QTableView::edit() 不同，重写 QTableView::commitData(editor) 更容易，它在用户提交编辑后调用。

简而言之：当用户提交他们的编辑时，遍历所有其他选定的行并将完全相同的值更改应用于与编辑单元格具有相同列的单元格。

这是一个 Python 示例，翻译成 C++ 应该很容易（在任何地方添加分号，替换`self`为`this`）：

```
class ImageTableView(QtGui.QTableView):
    def commitData(self, editor):
        # call parent commitData first
        super(ImageTableView, self).commitData(editor)

        # self.currentIndex() is the QModelIndex of the cell just edited
        theModel = self.currentIndex().model()
        # get the value that the user just submitted
        value = theModel.data(self.currentIndex(), QtCore.Qt.EditRole)

        curRow, curCol = self.currentIndex().row(), self.currentIndex().column()

        # selection is a list of QItemSelectionRange instances
        for isr in self.selectionModel().selection():
            rows = range(isr.top(), isr.bottom()+1)
            for row in rows:
                if row != curRow:
                    # row,curCol is also in the selection. make an index:
                    idx = theModel.index(row, curCol)
                    # so we can apply the same value change
                    theModel.setData(idx, value, QtCore.Qt.EditRole) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:19:45.187

根据您实现的模型/视图，您可能能够将[`QAbstractItemModel::dataChanged`](http://qt-project.org/doc/qt-4.8/qabstractitemmodel.html#dataChanged)信号连接到循环遍历每个选定项目的插槽。并非每个版本的 setData 都会发出此信号，但如果您覆盖它，您可以选择这样做。

以 QTableWidgetItem::setData 的源代码为例。它在 qtablewidget.cpp 文件中。

* * *

编辑：或者，您可以键入委托的[closeEditor](http://doc-snapshot.qt-project.org/4.8/qabstractitemdelegate.html#closeEditor)或[commitData](http://doc-snapshot.qt-project.org/4.8/qabstractitemdelegate.html#commitData)信号以拦截编辑器的值并将其应用于每个选定的项目。您必须将 QTableView 子类化才能完成此操作，所以这里有一些示例代码可以让您从[这里](http://www.qtcentre.org/threads/45348-QTableWidget-problem-when-editing-multiple-items)开始获得灵感：

```
class MyTableView : public QTableView {
    Q_OBJECT
public:
    explicit MyTableView(QWidget* parent = 0) : QTableView(parent) {
        connect(this->itemDelegate(), SIGNAL(closeEditor(QWidget*)),
                this, SLOT(editMultipleItems(QWidget*)));
    }

public slots:
    void editMultipleItems(QWidget* editor) {
        QLineEdit* myeditor = qobject_cast<QLineEdit*>(editor);     //recast to whatever widget was actually used
        if(myeditor != 0) {
            foreach(const QModelIndex& index, this->selectionModel()->selectedIndexes()) {
                QVariant v(myeditor->text());
                model()->setData(index, v, Qt::EditRole);
            }
        }
    }
}; 
```

作为第三个选项，您可以使用特殊情况覆盖[QStyledItemDelegate以进行多项选择，然后自定义 setModelData() 以编辑](http://doc-snapshot.qt-project.org/4.8/qstyleditemdelegate.html)*每个*选定的项目，而不仅仅是接收编辑触发器的项目。

您还可以通过让平凡的子类 QStyleItemDelegate::setModelData() 使用新值发出连接到 MyTableView 的 multiItemEdit 插槽的信号来组合第二个和第三个选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T00:11:51.557

你不能从 QTableView::selectedIndexes() 得到一个 QModelList，然后遍历它吗？

# django - 带有 Django 的 pg_dump：需要 -o 标志？

> ID：14586718
> 
> 赞同：1
> 
> 时间：2013-01-29T15:45:13.297
> 
> 标签：django, postgresql

用于`pg_dump`转储用作 Django 应用程序后端的 postgres 数据库时。我需要使用“-o”标志（转储对象标识符）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:04:36.067

假设您使用的是 Postgres 8.1 或更高版本，那么没有 - 除非您以某种方式绑定到您的系统表中。`WITH OIDS`除非在创建用户表时指定，否则 postgres 中的 OID 仅用于系统表。

[postgres 文档中的 OID。](http://www.postgresql.org/docs/9.1/static/datatype-oid.html)

`WITH OIDS`曾经是 Postgres 8.0 及更早版本中的默认设置，但在 Postgres 8.1 中已更改。

# android - Android - Eclipse：跟踪文件

> ID：14586719
> 
> 赞同：3
> 
> 时间：2013-01-29T15:45:13.607
> 
> 标签：android, eclipse, debugging, sd-card, trace

我有两个问题——但首先是：
Dell Inspiron M5030：AMD Athlon II P360
Windows 7 Ultimate 32bit SP 1
Android ADT 21.0.1-543035
org.eclipse.platform.ide 3.8.0-I20120608-1200 模拟器
：
4.0" WVGA (480x800:hdpi)
Android 4.2 (API 17)
armeabi-v7a
RAM:512, VM Heap:16
内部存储: 600MB
SDCard Size 128MB, Use Host GPU

在我的活动的 onCreate 中，我有以下几行：

```
super.onCreate(savedInstanceState);
if (BuildConfig.DEBUG) {
        Log.i(Constants.TAG_ACTSPLASH, "onCreate() Method called.");
        Debug.startMethodTracing("actsplash");
} 
```

在我的活动的 onDestroy 中，我有以下几行：

```
super.onDestroy();
    if (BuildConfig.DEBUG) {
            Log.i(Constants.TAG_ACTSPLASH, "onDestroy()");
            Debug.stopMethodTracing();
    } 
```

问题一：在调试模式下，调用 onCreate 后，Logcat 说：

```
davlikvm: Unable to open trace file '/mnt/sdcard/actsplash.trace': Permission denied 
```

注意：在我的 Epic4G (Android 4.2) 上运行 apk 时，会创建跟踪文件。

问题二：无法处理从 Epic4G 中提取的跟踪文件。(1) 运行 traceview 时出现错误：

```
The standalone version of traceview is deprecated. Please use Android Device Monitor (tools/monitor) instead. trace file './actsplash.trace' not found 
```

(2) 运行 ADM ('%SDK%/tools/monitor.bat') 并加载跟踪文件时，我得到：

```
Failed to read the stack trace. 
```

这篇[文章](http://developer.android.com/tools/debugging/debugging-tracing.html)讲述了一些关于密钥文件的内容......这是缺少的吗？任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:04:05.323

第一个问题可以通过将 WRITE_EXTERNAL_STORAGE 权限添加到您的应用程序来解决，以便它可以写入 /sdcard。或者，在您的私有应用程序数据存储区域中明确指定跟踪文件的文件名，然后从那里提取文件。

第二个问题是“找不到跟踪文件”，这是第一个的直接结果。第三个问题似乎是第二个问题的变体。

跟踪文件本身曾经被拆分为“key”和“data”文件，但很久以前它们被合并为一个 .trace 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T02:39:41.893

问题似乎出在 4.2 模拟器上；4.1 模拟器处理了跟踪文件，并且（与 4.2 模拟器不同）允许我提取文件并将其加载到 ADM（Android 调试监视器）中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-31T13:42:40.430

对于问题 2：Traceview 无法解析相对路径。我必须指定以“C：/”开头的跟踪文件的完整路径（仍然只使用基本名称）

[http://www.talkandroid.com/android-forums/android-games-applications/509-traceview-cant-find-trace-file.html](http://www.talkandroid.com/android-forums/android-games-applications/509-traceview-cant-find-trace-file.html)

# mysql - 在不违反主约束的情况下更新多对多关系表

> ID：14586724
> 
> 赞同：0
> 
> 时间：2013-01-29T15:45:28.060
> 
> 标签：mysql, sql

考虑两个具有多对多关系的表：

```
Company           Speciality
---------         ---------
id                id
---------         ---------
1                 21
2                 22
3                 23
4

CompanySpeciality
--------------------------
company_id | speciality_id
--------------------------
1          | 21
1          | 22
4          | 21
4          | 23 
```

我想删除公司 4，并将其专业与公司 1 相关联。如果我在 CompanySpeciality 上使用简单的 UPDATE 语句来设置“company_id = 1 WHERE company_id=4”，我将面临主要的违规行为，因为对 1| 21 已经存在。

是一种用单个查询更新关系表的方法吗？此查询应该只影响不会重复的行。

结果将是：

```
CompanySpeciality
--------------------------
company_id | speciality_id
--------------------------
1          | 21
1          | 22
1          | 23 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:59:23.547

大意是：

```
UPDATE CompanySpecialty
SET company_id=1
WHERE company_id=4
AND NOT EXISTS (SELECT * FROM CompanySpecialty cs WHERE cs.company_id=1 AND cs.specialty_id=CompanySpecialty.specialty_id); 
```

应该为你工作。（我没有测试确切的语法，但是使用`NOT EXISTS`子句应该可以帮助您消除违反主键限制的问题）。

然后，您必须在单独的查询中删除公司 4 表中留下的额外记录：

```
DELETE FROM CompanySpecialty
WHERE company_id=4; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:57:14.827

你不想`UPDATE`，你想[`INSERT`忽略欺骗](http://dev.mysql.com/doc/refman/5.5/en/insert.html)：

```
INSERT IGNORE INTO CompanySpeciality (company_id, speciality_id)
SELECT 1, speciality_id
FROM CompanySpeciality
WHERE company_id=4 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:00:53.473

您将无法在单个查询中同时更新和删除记录。您可以使用事务：

[mysql：一次查询中选择、插入、删除和更新](https://stackoverflow.com/questions/4089140/mysql-select-insert-delete-and-update-in-one-query)

# fortran - 在 fortran 中处理分层稀疏矩阵

> ID：14586725
> 
> 赞同：1
> 
> 时间：2013-01-29T15:45:28.277
> 
> 标签：fortran, sparse-matrix, blas, intel-mkl

**介绍**

我正在用 Fortran 开发一个代码，通过对线性算子进行预处理来解决 MHD 问题。待反转的稀疏矩阵可以认为是以下层次结构的矩阵。原始矩阵（例如，A_1）是块的带状矩阵。A_1 的每个块都是相同结构（即块带状矩阵）的稀疏矩阵（例如，A_2）。A_2 的每个块又是相同稀疏结构 A_3 的块带状矩阵。最后，A_3 的每个块是一个 5 x 5 的密集矩阵 A_4。我发现这种分层表示对于初始化矩阵的元素非常方便。

**问题**

我想知道是否存在一个库（在 Fortran 中）允许处理这种结构并将其转换为标准稀疏矩阵格式之一（CSR、CSC、BSR、...），因为 Sparse BLAS 或 MKL Pardiso 将用于反转它。让我强调一下，我的意图是仅使用层次结构来初始化矩阵的元素。当然，层次结构可以忽略，矩阵可以硬编码为 CSR 格式，但我发现这太耗时，无法实现和测试。

**注释**

1.  我不期望线性求解器使用分层结构，尽管在 S. Pissanetsky “稀疏矩阵技术”，1984 年，学术出版社，第 27 页（可[在此处](http://enpub.fulton.asu.edu/powerzone/SparseVisual/chapter%201/Chapter%201/1-11.html)在线获得）中提到了此类存储方案，即“超矩阵”和“超稀疏”存储方案，并用于高斯消除。我还没有找到这些方案的可用实现。

2.  块压缩稀疏行 (BSR) 格式（由 MKL 支持）可用于处理两层矩阵，A_3(sparse) + A_4(dense)，仅此而已。

# javascript - jqplot - 如何让轴刻度显示在条形之间的线上？

> ID：14586726
> 
> 赞同：3
> 
> 时间：2013-01-29T15:45:29.070
> 
> 标签：javascript, jqplot

这就是我想做的。

![在此处输入图像描述](../Images/3c2076d52700fb05a3679c8124237a9c.png)

我当前在轴上的选项设置：

```
 axes: {
  xaxis: {
    renderer: $.jqplot.CategoryAxisRenderer,
    ticks: xticks,  
  },
  yaxis: {
    min:0,
    tickOptions: {formatString: '%1.0f'}
  }
}, 
```

`xticks`是一个字符串数组。如果我不使用渲染器和我的自定义刻度，我只能让它工作，但我想使用我自己指定的刻度。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:38:45.177

而不是与`CategoryAxisRenderer`，我会用默认的数字来捏造它：

```
var chartData = [[1.5, 2.61], [2.5, 5.00], [3.5, 6.00]];

var plot2 = $.jqplot('chart1', [chartData], {
    seriesDefaults: {
        renderer: $.jqplot.BarRenderer,
        rendererOptions: {barWidth: 50}
    },
    axes: {
        xaxis: {
            ticks: [[0,"Midnight"],[1,"1 AM"],[2,"2 AM"],[3,"3 AM"],[4,"4 AM"]]
        },
        yaxis: {

        }
    }
}); 
```

产生：

![在此处输入图像描述](../Images/86c82eac1fb0f133a8f7b76b71101353.png)

[在这里](http://jsfiddle.net/RfKYp/)拉小提琴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:07:27.250

一种方法（我认为这不是一个很好的方法）是使用 CSS。由于以下原因，您可以将 xaxis 集团移至左侧`jqplot-xaxis`：

```
.jqplot-xaxis{
     left: -15px;
} 
```

如果有人有更好的方法（在刻度选项中），我想听听。

# actionscript-3 - ActionScript 代码问题

> ID：14586730
> 
> 赞同：0
> 
> 时间：2013-01-29T15:45:32.403
> 
> 标签：actionscript-3, shared-objects, flash-media-server

我最近才开始学习我在 Flash 中练习的 ActionScript 3.0，我遇到了这个问题：

> 场景 1，图层“图层 1”，第 1 帧，第 13 行 1119：通过静态类型 flash.net:SharedObject 的引用访问可能未定义的属性 dosomething。

我要做的是使用 SharedObject.send 方法来发送消息。我在 main.asc 文件中编辑了一些服务器端代码。我正在尝试传入 doSomething 函数，但出现编译错误。对于像我这样的新手，任何建议都将不胜感激。

代码如下：

```
import flash.net.NetConnection;
import flash.net.SharedObject;

var nc:NetConnection = new NetConnection();

nc.connect("rtmp:/exampletest/");

var so:SharedObject = SharedObject.getRemote("foo", nc.uri, true);

so.connect(nc);

so.dosomething = new function(str) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:58:36.847

如果要在 SWF 之间传递函数，请将函数附加到 SharedObject.getLocal/Remote 返回的 SharedObject 的 .data 成员，而不是 SharedObject 本身。

所以：

```
so.data.doSomething = yourFunction 
```

...应该管用。我不确定您要达到的目标，这听起来像是解决方案吗？

# mysql - MySql.Data.MySqlClient.MySqlConfiguration' 不包含“标准”Fluent NHibernate 的定义

> ID：14586733
> 
> 赞同：1
> 
> 时间：2013-01-29T15:45:37.360
> 
> 标签：mysql, asp.net-mvc, nhibernate, asp.net-mvc-4

我正在尝试将我的数据库映射到 NHibernate（来自 EF）。在这段代码之前一切似乎都很好

```
 private static ISessionFactory CreateSessionFactory()
 {
    return Fluently.Configure().Database(
        MySqlConfiguration.Standard.ConnectionString(
        c => c.FromConnectionStringWithKey("ConnectionString")
    )
   )
   .Mappings(m => m.FluentMappings.AddFromAssemblyOf<MyAutofacModule>())
   .BuildSessionFactory();
  } 
```

请原谅格式，此代码的目的是证明 .Standard 类由于某种原因不存在。我也没有找到其他人有这个问题。我可以提供的任何指示或相关信息请告诉我，我会很乐意提供帮助。感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:48:00.737

事实证明，当使用 Fluent NHibernate 时，两者之间存在差异

```
MySqlConfiguration 
```

和

```
MySQLConfiguration 
```

很容易错过，所以如果你遇到同样的问题，这就是你（和我！）做错了。

# jquery - 用于较新 HTML5 输入的 jQuery 选择器不起作用

> ID：14586734
> 
> 赞同：1
> 
> 时间：2013-01-29T15:45:37.443
> 
> 标签：jquery

我有一个输出输入的数组，带有一种数字，但我似乎无法让选择器找到它。不支持吗？

```
$('#container :text').each(...
$('#container input:number').each(...
$('#container :number').each(... 
```

他们都没有找到输入值。我错过了什么？

我还查看了 jQuery 站点上的选择器列表，并没有看到任何新的 HTML5 输入类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:46:52.303

jQuery*目前*不支持某些伪选择器。相反，您需要将查询基于目标元素的属性，如下所示。

```
$("#container input[type=number]"); 
```

从 jQuery 1.9.0 开始，这些是存储在下面的伪选择器`jQuery.expr[":"]`：

```
["animated", "button", "checkbox", "checked", "contains", "disabled", "empty", 
 "enabled", "eq", "even", "file", "first", "focus", "gt", "has", "header", 
 "hidden", "image", "input", "lang", "last", "lt", "not", "nth", "odd", 
 "parent", "password", "radio", "reset", "root", "selected", "submit", "target", 
 "text", "visible"] 
```

如果您愿意，您可以扩展此对象并提供您自己的自定义选择器：

```
$.extend( $.expr[":"], {
    'color': function ( elem ) {
        return /color/.test(elem.type);
    }
}); 
```

# android - Android 应用程序字体大小根据设置中定义的字体大小而变化

> ID：14586735
> 
> 赞同：4
> 
> 时间：2013-01-29T15:45:39.657
> 
> 标签：android, android-ui, android-fonts

我开发了一个 android 应用程序来处理小型、中型和大屏幕尺寸的设备。

但是最近我遇到了以下问题。

当我进入设置并将字体大小更改为**特大**而不是默认的**中等**大小 [设置 --> 显示 --> 字体大小] 时，我的应用程序字体大小也会相应增加，并且布局会变得混乱。

有没有人以前经历过这种情况，并且会感谢任何想法的解决方案，不会继续这种混乱的情况。

**编辑...**

我已经使用“sp”单位来定义应用程序中的所有字体大小......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T15:56:08.377

> 有没有人以前经历过这个

这就是`sp`为您提供的：根据用户选择的字体比例自动缩放字体。

> 并感谢任何想法的解决方案，不会继续这种混乱的情况。

理想情况下，您将修复您的 GUI 实现，以便您可以适应字体比例的变化。如果用户要求更大的字体，你的应用应该支持这个。这与设计一个考虑浏览器字体大小变化的 Web 应用程序没有什么不同。

在紧要关头，停止使用`sp`单位，但如果您的用户抱怨您不遵守他们要求的字体比例，请不要抱怨。

有关更多信息，请参阅我的[这篇博](http://commonsware.com/blog/2012/12/12/think-about-font-scale.html)文。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T09:46:32.540

我自己在一个小部件中遇到了问题。没有空间让用户对字体大小有任何意见。解决方案非常简单：

*   使用 dp 代替 sp。

然后根据不同屏幕上的 dpi 获得正确的缩放比例，但它不会根据用户选择的字体大小而改变。

# emacs - 如何像自动完成一样显示弹出符号文档？

> ID：14586736
> 
> 赞同：4
> 
> 时间：2013-01-29T15:45:39.740
> 
> 标签：emacs, autocomplete, slime

在像 Lisp 一样的 emacs 中编程时，自动完成模式将是弹出候选者，几秒钟后也会出现文档提示。

我的问题是如何直接显示文档提示，方便查看文档但在另一个缓冲区中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:59:49.427

将以下函数绑定到快捷方式。请记住，它需要自动完成和弹出（在旧版本中与自动完成捆绑在一起，在新版本中单独）才能工作。

```
(defun popup-documentation-at-point ()
  (interactive)
  (let* ((position (point))
         (string-under-cursor (buffer-substring-no-properties
                         (progn (skip-syntax-backward "w_") (point))
                         (progn (skip-syntax-forward "w_") (point)))))
    (goto-char position)
    (popup-tip (ac-symbol-documentation (intern string-under-cursor))))) 
```

# python - 安装 Python bigfloat 模块

> ID：14586738
> 
> 赞同：2
> 
> 时间：2013-01-29T15:45:49.897
> 
> 标签：python, macos, bigfloat

我正在尝试将 bigfloat Python 包放到我的 Mac 上，但我不太擅长这种事情。

[我已经下载了这里](http://packages.python.org/bigfloat/#module-bigfloat)描述的最新包。文档说：

```
In order to use the bigfloat package you will need to have both the GMP and MPFR libraries already installed on your system. 
```

我认为 GMP 和 MPFR 库已经安装在我的系统上 - 至少当我搜索它们时，我会看到包含它们的名称和文件的文件夹。

当我尝试通过键入以下内容安装 bigfloat 时：

```
python setup.py install 
```

我收到很多错误消息。第一个是：

```
src/mpfr.c:223:17: error: gmp.h: No such file or directory
src/mpfr.c:224:18: error: mpfr.h: No such file or directory 
```

gmp.h 和 mpfr.h 文件在我的电脑上，但显然我需要做些别的事情。

显然，我不明白整个过程是如何运作的，但是任何朝着正确方向的指针都会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-07T00:41:13.293

首先，您需要安装 GMP 和 MPFR 库。

```
sudo apt-get install libmpfr-dev 
```

然后运行：

```
 sudo pip install bigfloat 
```

问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T20:41:35.807

I'm having the same problem and here's what I've tried as per the readme file in the bigfloat installation directory:

"An example: on Mac OS X, using the system Python, but with MPFR and GMP installed in /opt/local (e.g., by MacPorts), one can do":

```
LIBRARY_PATH=/opt/local/lib CPATH=/opt/local/include python setup.py build 
```

This didn't throw any errors, but when I checked to see if it installed by running this test:

```
python -m bigfloat.test.test_bigfloat 
```

I got the error:

```
/Library/Frameworks/Python.framework/Versions/7.2/Resources/Python.app/Contents/MacOS/Python: No module named mpfr 
```

You can give this a try to see if it works for you, but I'm still lost.

What you should get if it's a successful installation is this:

```
the bigfloat-0.3.0a1/ directory that you created can now be deleted. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-21T06:23:48.400

我在我的 Mac (v10.10.3) 上通过 easy_install 和 pip 安装 python bigfloat 时遇到了问题，并且遇到了类似的错误问题；这是因为 bigfloat 需要几个其他库。

根据这个[答案](https://stackoverflow.com/a/29977244/1637816)

我安装了 gmp & mpfr 库，然后 pip 将正确安装

```
pip install bigfloat 
```

或者

```
pip3.5 install bigfloat 
```

# sql - 检查是否占用了时间段/预订

> ID：14586739
> 
> 赞同：0
> 
> 时间：2013-01-29T15:45:53.763
> 
> 标签：sql, logic

编辑：戈登发布的查询似乎有问题。如果我在 10 点至 12 点之间进行预订，似乎认为所有 12 点之后的预订都无效，但上午 10 点之前的所有预订都有效。

一些快速而简单的想法最终让我创建了以下查询：

```
SELECT serverip 
        FROM   server 
        WHERE  serverip NOT IN (SELECT serverip 
                                FROM   booking 
                                WHERE  startat >= datehere 
                                AND expiresat <= datehere) 
        LIMIT  1; 
```

假设 booking 表存储以下内容：

```
+-----------+-----------+----------+----------+-----------+
| bookingid | serverip  | username | startat  | expiresat |
+-----------+-----------+----------+----------+-----------+
|         1 | 127.0.0.1 | testuser | 10:00    | 12:00     |
+-----------+-----------+----------+----------+-----------+ 
```

如果用户要为预订输入以下数据：

```
startat = 9:59
expiresat = 12:01 
```

他们可以轻松绕过我的检查，根据之前存储的预订查看预订时间是否可用。

关于如何更好地解决这个问题的任何建议？

我**不**希望限制用户输入，并且希望避免对特定时间段进行硬编码，如果这不是问题，但我会坚持我所拥有的。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T15:53:23.690

您需要更改重叠的逻辑。试试这个：

```
SELECT serverip 
FROM  server 
WHERE serverip NOT IN (SELECT serverip 
                       FROM booking 
                       WHERE startat <= USEREXPIREDATE AND
                             expiresat >= USERSTARTDATE
                      ) 
LIMIT  1; 
```

当一个插槽在所需的用户到期日期之前开始并在所需的用户开始日期之后结束时，它会被占用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T18:28:08.153

```
SELECT *
FROM server
WHERE serverip NOT IN
(SELECT serverip 
 FROM booking
 WHERE
   (startat <= '2013-01-30 08:00:00' AND expiresat >= '2013-01-30 08:00:00') OR
   (startat <= '2013-01-30 09:00:00' AND expiresat >= '2013-01-30 09:00:00') OR
   (startat >= '2013-01-30 08:00:00' AND expiresat <= '2013-01-30 09:00:00')) 
```

其中 8:00 是开始时间，9:00 是过期时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-14T23:05:34.040

[正如这张图片所说](https://i.stack.imgur.com/2UCeR.png)，时间有四种可能性，图片中表示的代码是

```
SELECT Id FROM reservations 
WHERE 
((start_at < @start_at AND start_at < @end_at) AND (end_at > @start_at AND end_at < @end_at))
OR((start_at > @start_at AND start_at < @end_at) AND (end_at > @start_at AND end_at > @end_at))
OR((start_at <= @start_at AND start_at <= @end_at) AND (end_at >= @start_at AND end_at >= @end_at))
OR((start_at >= @start_at AND start_at <= @end_at) AND (end_at >= @start_at AND end_at <= @end_at)) 
```

# jquery - 如何使用 jQuery Toggle 显示隐藏的 div？

> ID：14586740
> 
> 赞同：0
> 
> 时间：2013-01-29T15:45:58.287
> 
> 标签：jquery

我在显示图像缩略图的页面上构建了一个投资组合部分。我还有一个隐藏的 div，其中包含有关我想在用户将鼠标悬停在缩略图上时显示的投资组合项目的信息。

这是HTML：

```
<div class="portfolio">
    <a href="#"><img src="photos/work_2.jpg" alt="work_1" width="181" height="180"></a>
    <div class="portfolio-overlay" style="display:none;">
        <p class="client-name">Encore Azalea</p>
        <div class="white-line"></div>
        <p class="services">website redesign +<br />mobile site launch</p>
    </div>
</div> 
```

这是jQuery：

```
<script>
$(".portfolio a").hover(function () {
$(".portfolio-overlay").toggle("slow");
});
</script> 
```

我的意图是当您将鼠标悬停在图像上时显示 .portfolio-overlay 并在鼠标移出时将其隐藏。

我知道 jQuery 缺少一些东西，但是，如果我知道它是什么，我就不会发布这个（你知道它是怎么回事）。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:49:31.150

我想你忘记了文件准备功能，

```
 $(document).ready(function() {
      $(".portfolio a").hover(function () {
        $(".portfolio-overlay").toggle("slow");
      });
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:50:46.793

```
$('.portfolio a:has(>img)').hover(function(e){
  var $overlay = $(this).siblings('.portfolio-overlay');
  $overlay.toggle('slow');
},function(e){
  var $overlay = $(this).siblings('.portfolio-overlay');
  $overlay.toggle('slow');
}); 
```

那可能是什么？由于您从锚点开始，您可以参考`.siblings()`并找到相同的覆盖`.portfolio`，然后相应地切换它。这也使得每个`.portfolio`运行都独立于页面上的其他运行，其中 using`$('.portfolio-overlay')`将切换页面上的所有项目。

这是一个工作示例：http: [//jsfiddle.net/bradchristie/AhnGA/1/](http://jsfiddle.net/bradchristie/AhnGA/1/)

# xaml - 自动完成框中的文本左对齐

> ID：14586744
> 
> 赞同：1
> 
> 时间：2013-01-29T15:46:17.780
> 
> 标签：xaml, silverlight-4.0, autocompletebox

我正在搜索如何将文本左对齐`AutoCompleteBox`

所以我详细介绍，

结果对于与自动完成框关联的文本框来说太长了，因此缺少部分。

如果结果是：“我的自动完成框的结果”，当我单击并选择它时，它会显示在文本框上。

但是部分显示是：“我的自动完成框”，我想要“我的自动完成结果”。

这是我的 xaml：

```
<myControl:AutoCompleteBox x:Name="acp" Grid.Row="0" Grid.Column="1" 
           HorizontalAlignment="Left" VerticalAlignment="Top"  
           IsTabStop="False" 
           MinimumPrefixLength="3" 
           ItemTemplate="{StaticResource ItemTemplate}" 
           ValueMemberBinding="{Binding FullName}"
           ItemsSource="{Binding Data, ElementName=MySource}" 
           Text="{Binding FullName, Mode=TwoWay, NotifyOnValidationError=True, ValidatesOnExceptions=True}" 
           Width="150" 
           IsTextCompletionEnabled="False" 
           FilterMode="None" IsDropDownOpen="True"/> 
```

我希望我很清楚。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T04:31:02.563

你应该试试这个

```
<my:AutoCompleteBox Name="acbNames" ValueMemberBinding="{Binding FullName}">
    <my:AutoCompleteBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding FullName}" TextAlignment="Left"/>
        </DataTemplate>
    </my:AutoCompleteBox.ItemTemplate>
    </my:AutoCompleteBox> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-16T12:48:08.430

请使用 AutoCompleteBox 的 setter 属性设置文本对齐方式，如下所示：

```
<toolkit:AutoCompleteBox.TextBoxStyle>
    <Style TargetType="TextBox">
    <Setter Property="TextAlignment" Value="Center"></Setter>
    </Style>
</toolkit:AutoCompleteBox.TextBoxStyle> 
```

谢谢...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-31T14:26:52.360

看看以下网址[http://social.msdn.microsoft.com/Forums/en-US/silverlightarchieve/thread/d41d201d-834f-4f8a-8b78-122ff08dd830/](http://social.msdn.microsoft.com/Forums/en-US/silverlightarchieve/thread/d41d201d-834f-4f8a-8b78-122ff08dd830/)这可能会有所帮助。

# c# - 存储过程错误“例程的参数 1 ... 不是 BEFORE 触发器中的变量或新伪变量”

> ID：14586745
> 
> 赞同：2
> 
> 时间：2013-01-29T15:46:17.253
> 
> 标签：c#, mysql

```
DELIMITER $$

CREATE DEFINER=`root`@`localhost` PROCEDURE `Get_Next_Processing_Video`(   
    OUT out_IDVideo                   INT ,
    OUT out_YoutubeIDVideo            VARCHAR(15) 
)
BEGIN

    DECLARE a INT;
    DECLARE b VARCHAR(15);

    set a = 0;
    set b = "ciao";

    SELECT  NP.IDVideo, NP.YoutubeIDVideo INTO a, b 
    FROM    next_processing AS NP
    LIMIT 1; 

    UPDATE  Video AS V 
    SET     V.SchedulingFlag = TRUE
    WHERE   IDVideo = a;

SET out_IDVideo = a;
SET out_YoutubeIDVideo = b;

END 
```

MySQL 返回：

> 例程 youtubedb.Get_Next_Processing_Video 的 OUT 或 INOUT 参数 1 不是 BEFORE 触发器中的变量或 NEW 伪变量。

问题是什么？代码似乎正确。

这是我的调用过程的 C# 代码：

```
using (MySqlConnection conn = new MySqlConnection(ConfigurationManager.ConnectionStrings["AxWaveConnection"].ToString()))
        {
            try
            {
                conn.Open();
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.Message);
            }

            MySqlCommand cmd = new MySqlCommand("Get_Next_Processing_Video", conn);
            cmd.CommandType = System.Data.CommandType.StoredProcedure;

            cmd.Parameters.Add(new MySqlParameter("out_IDVideo", idVideo));
            cmd.Parameters.Add(new MySqlParameter("out_YoutubeIDVideo", youtubeId));

            try
            {
                cmd.ExecuteNonQuery();  
            }
            catch (Exception e)
            {

            }

            conn.Close();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T15:58:41.233

我认为问题出在您对程序的调用中。

对于不支持`OUT`参数的 MySQL 连接器版本，正常的解决方法是使用 MySQL 用户变量来保存返回值，然后运行查询以获取这些变量的值。

首先，执行存储过程，并让 MySQL 将 OUT 参数的值放入变量中：

```
CALL `Get_Next_Processing_Video`(@IDVideo, @YoutubeIDVideo); 
```

请注意，这些变量不是命令参数；它们是保存在 MySQL 会话中的变量。要在调用过程后立即使用相同的 MySQL 连接获取这些变量的值：

```
SELECT @IDVideo, @YoutubeIDVideo ; 
```

并处理来自该查询的结果集，就像您希望返回一行的任何其他 SELECT 语句一样。

* * *

## 更新：

对于支持 OUT 参数的 MySQL 连接器的更新版本，我认为您需要通过设置成员属性来指定这些参数是 OUT 参数：

```
cmd.Parameters["out_IDVideo"].Direction = ParameterDirection.Output;
cmd.Parameters["out_YoutubeIDVideo"].Direction = ParameterDirection.Output; 
```

* * *

正如我之前指出的...

在不支持 OUT 参数的旧版本 MySQL 连接器中，解决方法是使用 MySQL 变量作为参数调用过程。从过程调用返回的值保留在 MySQL 会话中。调用该过程后，我们将立即运行 SELECT 来检索用户变量的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-01T15:04:03.003

我修复了将方向添加到所有变量的相同错误：

MySQL SP 参数：

```
OUT P_IDAGENTE_NETWORK int(11),
INOUT P_PROTOCOLO varchar(45) 
```

C#代码：

```
new MySqlParameter("P_IDAGENTE_NETWORK",0){Direction = ParameterDirection.Output},
new MySqlParameter("P_PROTOCOLO", network.Protocol){Direction=ParameterDirection.InputOutput} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-18T18:59:39.983

遇到了同样的问题，从构建器 c++ 调用存储过程以创建批处理记录，其中调用成功而其他调用不成功。

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `article_import`(IN `idclient` INT(11) UNSIGNED, IN `code` VARCHAR(16), IN `shortdesc` VARCHAR(16),
                                        IN `descrip` VARCHAR(32),IN `status` VARCHAR(12), IN `fifo` SMALLINT(1), IN `maxfifo` SMALLINT(3),
                                        IN `flvduration` SMALLINT(3),IN `retendays` SMALLINT(3), IN `maxconserv` SMALLINT(3),
                                        IN `flcduration` SMALLINT(3), IN `flvunits` SMALLINT(1),IN `conservunits` SMALLINT(1),
                                        IN `flcunits` SMALLINT(1), IN `entrymode` SMALLINT(1), IN `exitmode` SMALLINT(1),
                                        IN `section` SMALLINT(1), IN `family` SMALLINT(1), IN `origen` SMALLINT(1), IN `mgroup` SMALLINT(1),
                                        IN `sgroup` SMALLINT(1), IN `invclass` SMALLINT(1), IN `created` DATE, INOUT `result` VARCHAR(64)) 
BEGIN
DECLARE EXIT HANDLER FOR SQLEXCEPTION
  BEGIN
  GET DIAGNOSTICS CONDITION 1 @sqlstate = RETURNED_SQLSTATE, @errno = MYSQL_ERRNO, @text = MESSAGE_TEXT;
  SET result = CONCAT('KO:', @text,':',@errno);
END;

INSERT INTO articles_imp (`idclient`,`code`,`shortdesc`,`descrip`,`status`,`fifo`,`maxfifo`,`flvduration`,`retendays`,`maxconserv`,
                                        `flcduration`,`flvunits`,`conservunits`,`flcunits`,`entrymode`,`exitmode`,`section`,`family`,
                                        `origen`,`mgroup`,`sgroup`,`invclass`,`created`)
      VALUES  (idclient,code,shortdesc,descrip,status,fifo,maxfifo,flvduration,retendays,maxconserv,
                                        flcduration,flvunits,conservunits,flcunits,entrymode,exitmode,section,family,
                                        origen,mgroup,sgroup,invclass,created);
SET result = CONCAT('OK:inserted:',LAST_INSERT_ID());
END 
```

**我查看了通过在 MySql 连接器/ODBC 数据源配置的调试选项卡中将日志查询**设置为...复选框生成的 myodbc.sql，并发现成功和不成功调用之间的区别：

**1418923873：使用准备好的语句；**
1418923873：调用 article_import(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ? , ?) ;
1418923873：ssps已被执行；
1418923873：查询已执行；

1418923873：调用 article_import(355, '20804', '', 'ANCHOAS ACEITE TIRAS90GRS', '', 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 , 0, 0, 0, '2014-12-18', '') ;
**1418923873：使用直接执行；**
1418923873：查询已执行；
1418923873：例程 gedispa.article_import 的 OUT 或 INOUT 参数 24 不是 BEFORE 触发器中的变量或 NEW 伪变量；

在 Builder 中， ADOStoredProc 有一个 Prepared 属性，但将其设置为 true 没有任何区别。最后，我将结果参数声明为 INOUT 参数而不是 OUT 参数并修复了它。

没有日志，我们什么都不是。

# c++ - 如何在 C++ 中操作/旋转 JPEG 图像？

> ID：14586759
> 
> 赞同：-4
> 
> 时间：2013-01-29T15:46:55.887
> 
> 标签：c++, windows, jpeg, libjpeg

我想使用编译的 libjpeg-9 example.c 和 transupp.c 代码和库来旋转 Eclipse 项目中的 .jpg 图像。

从一开始就实现这一目标的工作进展：[Compiling/using libjpeg in Windows for Eclipse](https://stackoverflow.com/q/14593579/1666510)

尝试将 do_rot_180 和读/写功能集成到一个位置：[需要帮助从 libjpeg 编译 jpegtran.c 代码](https://stackoverflow.com/q/14631530/1666510)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T15:56:21.533

`do_rot_180`函数 in `transupp.c`in `libjpeg`（你知道它，因为 Q 有标签）正在做你想要的。

```
LOCAL(void)
do_rot_180 (j_decompress_ptr srcinfo, j_compress_ptr dstinfo,
        jvirt_barray_ptr *src_coef_arrays,
        jvirt_barray_ptr *dst_coef_arrays)
/* 180 degree rotation is equivalent to
 *   1\. Vertical mirroring;
 *   2\. Horizontal mirroring.
 * These two steps are merged into a single processing routine.
 */ 
```

该函数被`jtransform_execute_transformation`/`JXFORM_ROT_180`和有损重新排序 JPEG 的内部以实现旋转效果。[此函数](http://read.pudn.com/downloads151/sourcecode/graph/652797/jpegtran.c__.htm)演示使用和旋转给定文件，并使用指定的变换（角度）写入新的修改文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:56:42.413

你看过[imagemagick 库](http://www.imagemagick.org/Magick++/)吗？它是免费且非常强大的工具

# python - matplotlib savefig 线程安全吗？

> ID：14586764
> 
> 赞同：2
> 
> 时间：2013-01-29T15:47:02.953
> 
> 标签：python, multithreading, matplotlib, plot

我有一个内部分布式计算库，我们一直将其用于并行计算工作。在对进程进行分区后，它们会运行数据加载和计算步骤，然后以“保存”步骤结束。通常这涉及将数据写入数据库表。

但是对于一个特定的任务，我需要每个进程的输出是一个带有一些数据图的 .png 文件。总共有 95 个进程，所以 95 个 .png。

在我的“保存”步骤（在每个进程上执行）中，我有一些非常简单的代码，这些代码使用 matplotlib 的`boxplot`函数制作箱线图，还有一些代码用于将`savefig`其写入 .png 文件，该文件具有基于特定数据的唯一名称在那个过程中使用。

但是，我偶尔会看到输出似乎有两组或多组数据被写入同一个输出文件，尽管名称是唯一的。

matplotlib 在制作箱线图或保存数字时是否使用临时文件保存？如果是这样，它是否总是使用相同的临时文件名（从而导致覆盖冲突）？我已经使用运行我的进程`strace`并且看不到任何明显看起来像从 matplotlib 写入的临时文件的内容。

我如何确保这将是线程安全的？我绝对想并行保存文件，因为我希望大大扩展输出 .png 的数量，所以首先存储所有数据然后只串行执行绘图/保存部分的选项是非常不可取的。

我不可能重现我们正在使用的完整并行基础架构，但下面是调用以创建绘图句柄的函数，然后是调用以保存绘图的函数。为了这个问题，您应该假设线程安全与我们的分布式库无关。我们知道它不是来自我们的代码，它多年来一直用于我们的多处理作业而没有像这样的线程问题（尤其不是我们不能直接控制的东西，比如 matplotlib 中的任何临时文件）。

```
import pandas
import numpy as np
import matplotlib.pyplot as plt

def plot_category_data(betas, category_name):
    """
    Function to organize beta data by date into vectors and pass to box plot
    code for producing a single chart of multi-period box plots.
    """
    beta_vector_list = []
    yms = np.sort(betas.yearmonth.unique())
    for ym in yms:
        beta_vector_list.append(betas[betas.yearmonth==ym].Beta.values.flatten().tolist())
    ###

    plot_output = plt.boxplot(beta_vector_list)
    axs = plt.gcf().gca()
    axs.set_xticklabels(betas.FactorDate.unique(), rotation=40, horizontalalignment='right')
    axs.set_xlabel("Date")
    axs.set_ylabel("Beta")
    axs.set_title("%s Beta to BMI Global"%(category_name))
    axs.set_ylim((-1.0, 3.0))

    return plot_output
### End plot_category_data

def save(self):
    """
    Make calls to store the plot to the desired output file.
    """
    out_file = self.output_path + "%s.png"%(self.category_name)
    fig = plt.gcf()
    fig.set_figheight(6.5)
    fig.set_figwidth(10)
    fig.savefig(out_file, bbox_inches='tight', dpi=150)
    print "Finished and stored output file %s"%(out_file)
    return None
### End save 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:05:15.900

在您的两个功能中，您正在调用`plt.gcf()`. 每次您绘制`plt.figure()`并明确引用该图形时，我都会尝试生成一个新图形，以便您完全避开整个问题。

# ssis - SSIS - 在几个包中找到未使用的变量

> ID：14586773
> 
> 赞同：3
> 
> 时间：2013-01-29T15:47:33.907
> 
> 标签：ssis

在处理包含多个包的大型 SSIS 项目时，这些包可能会开始变得有点混乱，其中包含已创建但从未使用过或因其他更改而变得多余的变量。我需要一些可以扫描几个 SSIS 包并列出所有未使用变量的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T09:23:43.080

我已经设法通过使用一些 Powershell 来回答我自己的问题。下面的脚本使用 xpath 来获取变量名，然后使用正则表达式来查找出现次数，如果它出现一次，那一定是因为它已定义但从未使用过。

唯一需要注意的是，如果您使用的变量名称是 dtsx 文件中自然存在的单词，那么脚本将不会选择它们。我可能需要扩展我的脚本，只对包中的特定节点进行正则表达式搜索。

```
$results = @()
Get-ChildItem -Filter *.dtsx |
% {
    $xml = [xml](Get-Content $_)
    $Package = $_.Name
    $ns = [System.Xml.XmlNamespaceManager]($xml.NameTable)
    $ns.AddNamespace("DTS", "www.microsoft.com/SqlServer/Dts")
    $var_list = @($xml.SelectNodes("//DTS:Variable/DTS:Property[@DTS:Name = 'ObjectName']", $ns) | % {$_.'#text'})
    $var_list | ? {@([Regex]::Matches($xml.InnerXml, "\b$($_)\b")).Count -eq 1} | 
    % { $results += New-Object PSObject -Property @{
         Package = $Package
            Name = $_}
    }
}
$results 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T22:54:52.620

这是一个很好的问题，因为我对一些相当大的 SSIS 包也有同样的担忧。不幸的是，在 SSIS 包之外，没有任何可用的功能可以提供此功能。请参阅附加链接中的讨论：

[CodePlex](http://bidshelper.codeplex.com/workitem/29510)

但是通过打开 SSIS 包，您可以通过应用以下链接中概述的步骤来确定变量的使用情况：

[使用 bi-xpress 查找 ssis 变量依赖项](http://sqldusty.wordpress.com/2011/11/30/find-ssis-variable-dependencies-with-bi-xpress/)

希望这可以帮助。

# matlab - 用其他行的平均值替换 nan 值

> ID：14586779
> 
> 赞同：0
> 
> 时间：2013-01-29T15:47:55.467
> 
> 标签：matlab, nan, mean

考虑以下示例：

```
Jday = datenum('2007-01-01 00:00','yyyy-mm-dd HH:MM'):1:...
    datenum('2009-12-31 23:00','yyyy-mm-dd HH:MM');
Jday2 = datenum('2008-01-01 00:00','yyyy-mm-dd HH:MM'):1:...
    datenum('2010-12-31 23:00','yyyy-mm-dd HH:MM');

Data{1} = [Jday;1+(length(Jday)-1).*rand(1,length(Jday))]';
Data{2} = [Jday2;1+(length(Jday)-1).*rand(1,length(Jday))]';
Data{3} = [Jday;1+(length(Jday)-1).*rand(1,length(Jday))]';

for i = 1:length(Data);
    d_nan{i} = floor(1+(length(Jday)-1).*rand(1,100));
end

for i = 1:length(Data);
    a(i) = length(d_nan{i});
    for ii = 1:a(i);
        Data{i}(d_nan{i}(ii),2) = nan;
    end
end 
```

在此示例中，我有一个单元格数组“数据”，其中包含三个单元格数组，每个单元格数组的第一列包含第二列中值的儒略日期。每个元胞数组中有许多 nan 值。我想用该特定朱利安日期的其他单元格中的值的平均值替换每个单元格数组中的 nan 值。我的问题很复杂，因为三个单元格没有同时显示数据（尽管 Data{1} 和 Data{3} 具有相同的日期。）如果三个单元格之间的儒略日期相同，则可以通过使用来解决此问题isnan 找到 nans 的位置，然后用其他行的 nanmean 替换这些行（在其他单元格中）。

任何人都可以提出解决这个问题的有效方法吗？感谢您的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:37:26.947

一个可能的解决方案是：

1.  连接所有数据并定位`NaN`值：

    ```
    D = [vertcat(Data{:})];
    nanidx = find(isnan(D(:, 2))); 
    ```

2.  对于连接矩阵`k`中此类值的每个索引，查找具有相同日期的其他条目：`NaN``D`

    ```
    entries = find(D(:, 1) == D(k, 1)); 
    ```

3.  从这些条目中过滤掉非值，并用平均值`NaN`替换原来`NaN`的 at 位置：`k`

    ```
    values = D(~isnan(D(entries, 2)) & ~ismember(entries, nanidx), 2);
    D(k, 2) = mean(values); 
    ```

4.  将所有内容转换回元胞数组：

    ```
    Data = mat2cell(D, cellfun('length', Data), 2)'; 
    ```

这是最终的、复制粘贴友好的代码：

```
D = [vertcat(Data{:})];
nanidx = find(isnan(D(:, 2)));
for k = transpose(nanidx(:))
    entries = find(D(:, 1) == D(k, 1));
    values = D(~isnan(D(entries, 2)) & ~ismember(entries, nanidx), 2);
    D(k, 2) = mean(values);
end
Data = mat2cell(D, cellfun('length', Data), 2)'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:15:57.213

这可能会解决您的问题，尽管它并不完全符合您的要求。在每个 NaN 值处，它用当天插值的平均值替换它，并从插值中删除 NaN。

```
for i = 1:3
    for j = 1:length(Jday)
        if isnan(Data{i}(j,2))
            d = Data{i}(j,1);
            Data{i}(j,2) = mean([ ...
                interp1(Data{1}(find(~isnan(Data{1}(:,2))),1),Data{1}(find(~isnan(Data{1}(:,2))),2),d) ...
                interp1(Data{2}(find(~isnan(Data{2}(:,2))),1),Data{2}(find(~isnan(Data{2}(:,2))),2),d) ...
                interp1(Data{3}(find(~isnan(Data{3}(:,2))),1),Data{3}(find(~isnan(Data{3}(:,2))),2),d)]);
        end
    end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T04:56:13.523

不确定您是否看到了编辑（我是新用户，所以仍在学习它是如何工作的），所以这里有一个解决方案，可以满足您的要求，并将 NaN 留在其他两个没有相同日期的地方。

```
for i = 1:3
    for j = 1:length(Jday)
        if isnan(Data{i}(j,2))
            d = Data{i}(j,1);
            if (~isempty(find(Data{:,1}==d,1)) && ...
                ~isempty(find(Data{:,2}==d,1)) && ...
                ~isempty(find(Data{:,3}==d,1)))
                Data{i}(j,2) = nanmean([ ...
                    Data{1}(find(Data{:,1}==d,1),2) ...
                    Data{2}(find(Data{:,2}==d,1),2) ...
                    Data{3}(find(Data{:,3}==d,1),2) ]);
            end
        end
    end
end 
```

# c# - 从 XML 动态创建 WPF 控件并堆叠它们

> ID：14586782
> 
> 赞同：4
> 
> 时间：2013-01-29T15:48:03.053
> 
> 标签：c#, wpf, xml-serialization

我想完成一系列组成完整测试的步骤。其中一些步骤是自动的（因此信息丰富），而其他步骤则需要用户交互。测试步骤在编译时是未知的，它们使用 MEF 来加载。

目前我有类似的东西

```
public abstract class TestRunnerBase
{
    public abstract void Run();
} 
```

使用如下步骤列表：

```
 List<TestRunnerBase> Steps = new List<TestRunnerBase>(); 
```

因此，所有代表测试可序列化的数据到目前为止都可以正常工作。然而，我真正需要的是用户从 XML 加载测试，然后引导他们完成在屏幕上显示信息并收集结果的选项。

但是试图弄清楚如何为编译时未知的数据创建控件最终让我有点卡在最好的方法上。

我正在考虑这样做，我将有一个自定义控件列表（一个步骤），并且 GUI 将显示第一步，等待该控件完成（我在这里认为引发的事件可能有效？）然后如果可用，则显示下一个，依此类推，直到测试完成。

那么在WPF中可以做到这一点吗？您可以在 WPF 中创建一个控件堆栈，每个控件都可以向父容器引发相同的事件，还是有更好的方法来做到这一点？

但是，如果我也使用抽象类，我当然不能从它派生控件，因为在 C# 中也没有多重继承。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:42:02.690

我将使用 MVVM 并创建一个视图模型，该模型了解如何导航步骤列表，提供向导类型结构（上一个/下一个）并公开当前步骤。

我假设虽然您有不同类型的潜在未知步骤，但您有一组具体的输入选项（bool、文本、日期、int 等），那么您可以在 TestRunnerBase 上使用抽象属性来标识需要哪种输入（或无）使用必须覆盖的枚举。

然后，您可以使用数据模板和/或数据触发器来控制测试的每个步骤显示的内容。主视图模型可以检查条件是否适合进行下一步（可能是对您的测试进行验证）。

一些伪代码让你思考：

```
public enum TestInput
{
    None,
    Bool,
    Text
}

public abstract class TestRunnerBase
{
    public abstract TestInput TestInput { get; }
    public bool BoolInput { get; set; }
    public string TextInput { get; set; }
    public abstract bool CanRun()
    public abstract void Run();
}

public class MainViewModel
{
    List<TestRunnerBase> Steps = new List<TestRunnerBase>();
    public TestRunnerBase CurrentStep {get;set;};

    public MainViewModel()
    {
        //loads the Steps
        CurrentStep = Steps
    }

    public Command RunStepCommand
    {
        if (CurrentStep.CanRun())
        {
            CurrentStep.Run();
            CurrentStep = Steps.Next(); //you get the idea
        }
    }
} 
```

对于您的 XAML，您可以将 ContentPresenter 绑定到 CurrentStep 并使用数据模板（可能还有数据触发器）来控制对用户可见的内容（当然也绑定到 UI）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:32:21.183

在 WPF 中，您可以使用 XAML 动态创建控件。只需使用所需的布局创建一个 XAML 片段（以编程方式或手动），然后使用[XamlReader.Parse](http://msdn.microsoft.com/en-us/library/cc663033.aspx)从该片段创建整个树。然后可以将返回的对象插入窗口的可视树中的某个位置。

要从 XamlReader 生成的可视化树中生成事件，您可以使用[路由事件](http://wpftutorial.net/RoutedEvents.html)。

# android - 谷歌地图 v2 动画

> ID：14586788
> 
> 赞同：1
> 
> 时间：2013-01-29T15:48:30.900
> 
> 标签：android, google-maps, android-animation, surfaceview

我的应用程序由从左到右的活动中的三个片段组成。用户可以像滑动抽屉一样向左或向右移动。这在所有情况下都非常有效，除非 MapFragment 可见。

在这两种情况下，MapFragment 已经在 TabHost 中实例化，但在第二张图像中可见。

![正确工作](../Images/fcd9811ffda8cc59c530a6b850835675.png)

![显示的 MapFragment](../Images/096b50d1997c2aed2d8b3d671a2519b1.png)

我以编程方式设置了很多维度，但如果有帮助，这是基本的视图层次结构：

```
<xxxx.xxxx.WideLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/frag_container"
android:layout_width="900dp"
android:layout_height="match_parent"
android:orientation="horizontal" >

<LinearLayout
    android:id="@+id/left_menu"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/login_blackboard" >

    <fragment
        android:id="@+id/left_list"
        android:name="xxxx.xxxx.MenuFragment"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:tag="MENU" />
</LinearLayout>

<LinearLayout
    android:id="@+id/middle_menu"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/main"
        android:layout_width="match_parent"
        android:layout_height="match_parent" >
    </LinearLayout>
</LinearLayout>

<fragment
    android:id="@+id/frag_action"
    android:name="xxx.xxxx.ActionFragment"
    android:layout_width="0dp"
    android:layout_height="match_parent" />
</xxxx.xxxx.WideLayout> 
```

有什么建议可以在动画后将地图保持在其范围内吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T17:38:08.140

显示菜单时，在地图前面放置一个透明布局。我不知道为什么，但这是一个重绘问题。希望有帮助；）

# c# - Windows 8 的 MVVM 模式 - 项目模板？

> ID：14586790
> 
> 赞同：1
> 
> 时间：2013-01-29T15:48:44.870
> 
> 标签：c#, windows, xaml, mvvm, windows-store-apps

是否有适用于使用 MVVM 开箱即用的 Windows 8 应用程序的 Visual Studio 模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:50:43.343

您可以使用`MVVM Light` `Windows 8`

留置权：http: [//msdn.microsoft.com/en-us/magazine/jj651572.aspx](http://msdn.microsoft.com/en-us/magazine/jj651572.aspx)

下载： http: [//mvvmlight.codeplex.com/](http://mvvmlight.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:05:31.777

在 Visual Studio 中，转到创建新项目并搜索 w8mvvm 或仅 mvvm。

模板：[适用于 Windows 8 的 MVVM](http://visualstudiogallery.msdn.microsoft.com/b287f569-7bf9-40d2-80f3-02c9945f1f33)

文档：[http ://w8mvvm.codeplex.com/](http://w8mvvm.codeplex.com/documentation)

# mysql - “如果未找到列值，则插入表”的单个查询

> ID：14586791
> 
> 赞同：0
> 
> 时间：2013-01-29T15:48:44.673
> 
> 标签：mysql, sql, insert

当找不到列值时，如何使用单个查询插入表。例如/我只想在找不到此用户名时插入新用户

我现在做的是发出 1 个查询来检查是否存在，然后如果没有找到现有的另一个查询。共 2 个查询

```
 INSERT INTO friends (memberID) SELECT 1 WHERE NOT EXISTS (SELECT memberID FROM friends WHERE memberID =  1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:07:25.830

这个怎么样：

```
INSERT INTO YourTable (UserName)
SELECT x
FROM (SELECT 'New User Name' AS x) a
      WHERE x NOT IN(SELECT UserName
                     FROM YourTable) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T21:52:09.327

你只需要添加`FROM DUAL`

```
INSERT INTO friends 
            (memberid) 
SELECT 1 
FROM   dual 
WHERE  NOT EXISTS (SELECT memberid 
                   FROM   friends 
                   WHERE  memberid = 1) 
```

[sql小提琴](http://sqlfiddle.com/#!2/1bf46/1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T22:24:47.953

由于您只想要一个具有给定值的行，因此您应该在表上使用 UNIQUE 约束来强制执行它，例如：

```
ALTER TABLE friends ADD UNIQUE (memberID); 
```

完成此操作后，您只需将 IGNORE 关键字添加到您的插入语句中，它就不会报告错误，并且如果它已经存在，它也不会插入重复的行。

```
INSERT IGNORE INTO friends(memberID) VALUES(1); 
```

# python - 测试。如何使用外键（自动）将许多对象添加到数据库中？

> ID：14586794
> 
> 赞同：2
> 
> 时间：2013-01-29T15:48:53.727
> 
> 标签：python, django, testing

如何使用外键（自动）将许多对象添加到数据库中？

我需要这个进行测试（应用程序如何处理多个数据）

```
class Document(models.Model):
    user = models.ForeignKey(User)
    content = models.CharField(max_length=255)
    add_time = models.DateTimeField() 
```

我需要创建 10 个示例用户 ( `User`)，每个用户必须有 50 个文档 ( `Document`)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:57:21.553

听起来像是一项[`FactoryBoy`](https://factoryboy.readthedocs.org/en/latest/#defining-factories)可以[`SubFactories`](https://factoryboy.readthedocs.org/en/latest/#associations)用来轻松创建关联对象的工作。

[此答案中演示](https://stackoverflow.com/a/12365334/630877)的[`post_generation`](https://factoryboy.readthedocs.org/en/latest/post_generation.html#postgenerationhook)钩子也应该很方便。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-07T19:08:30.630

```
I need to create ten sample users (User) and each of them must have fifty documents (Document) 
```

尝试使用[混音器](https://github.com/klen/mixer)

```
from mixer.backend.django import mixer

users = mixer.cycle(10).blend(User)
documents = mixer.cycle(50).blend(Document, user=mixer.sequence(*users)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T15:53:30.670

使用 inline-formset 函数，你可以添加尽可能多的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T15:56:04.030

```
from random import sample
from string import ascii_letters
from datetime import datetime
for i in range(10):
    user = User.objects.create_user(''.join(sample(asci_letters, 5)),
                                    'lennon@thebeatles.com', 'johnpassword')
    for j in range(50):
        doc = Document.objects.create(
            user=user, 
            content=''.join(sample(asci_letters, 100)), 
            add_time=datetime.datetime.now())
        doc.save() 
```

# matlab - 从权重/偏置向量神经网络 Matlab 中分离权重

> ID：14586795
> 
> 赞同：1
> 
> 时间：2013-01-29T15:48:54.410
> 
> 标签：matlab

我已经通过 matlab nntraintool 训练了神经网络，我想要权重和偏差。我已经尝试过这些功能来获取它们

wb = formwb(net,net.b,net.iw,net.lw) [b,iw,lw] = 分离wb(net,wb)

wb =

-28.5243 26.1019 10.2387 23.7000 -12.2929 14.6831 16.7075 -26.4566 9.4643 -24.0166 -26.8963 ...

b =

```
[20x1 double]
[     0.0411] 
```

iw =

```
[20x1 double]
[] 
```

lw =

```
 []    []
[1x20 double]    [] 
```

有人能帮我读一下吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T23:06:25.307

最简单的方法是在执行这两个命令之后：

> > wb = formwb(net,net.b,net.iw,net.lw);
> > 
> > [b,iw,lw] = 分离wb(net,wb);

查看您的工作区，然后双击这些变量中的任何一个（b、iw、lw），然后再次双击那些显示 [# x # double] 的单元格。

# ruby-on-rails - 在 Rails 应用程序的视图或部分视图中使用 binding.pry

> ID：14586799
> 
> 赞同：20
> 
> 时间：2013-01-29T15:49:07.193
> 
> 标签：ruby-on-rails, debugging, view, partial, pry

Pry 在我的 R3 应用程序中非常棒。但我可以利用任何机会

```
<% binding.pry %> 
```

在视图或部分中，就像我之前所做的那样

```
<% debugger %> 
```

这似乎不起作用。谢谢。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-29T15:55:10.093

它总是对我有用......你可能需要它。

```
<% require 'pry'; binding.pry %> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-04-04T11:49:59.887

`<% binding.pry %>`效果很好。

仅当您未在 rails 应用程序中安装**pry-rails** gem 时，它才起作用。

如果使用，请发布您面临的错误，`<% binding.pry %>`以便我可以详细说明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-23T04:01:44.287

我意识到这个问题现在已经过时了，但想在这里提出另一种可能性。您的应用程序也可能在到达您放置的代码行之前就中断了`<%binding.pry%>`。如果您没有点击 pry（并且已确认它在您的 Gemfile 中并且您已经运行`bundle install`），请考虑`<%binding.pry%>`在代码中向上移动几行。如果您仍然没有击中它，请考虑重复此过程。如果您已经按照自己的方式到达视图的第一行，但仍然没有点击 pry，请尝试返回到控制渲染此视图的控制器操作。如果 pry 确实是捆绑的，不点击 pry 的一个常见原因是应用程序崩溃。同样，在这里发布错误总是有帮助的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-06T21:30:26.087

或者更好的是，我喜欢将 PRY 作为环境变量传递，这样我就不必删除所有要求！

```
<% binding.pry %> 
```

&&

```
$ PRY=true rails s 
```

# excel - 使用 VBA 中的替换丢失格式 excel 单元格

> ID：14586802
> 
> 赞同：2
> 
> 时间：2013-01-29T15:49:13.443
> 
> 标签：excel, vba, formatting

我正在使用带有标签的 excel 模板，这些标签必须使用 VBA 替换为输入值。

为此，我使用了：

```
Cells.Replace What:="&/TDT/&", Replacement:="123456987654321456654444", _
        LookAt:=xlPart, SearchOrder:=xlByRows, MatchCase:=False, SearchFormat:= _
        True, ReplaceFormat:=False 
```

但执行此替换后单元格中显示的值为1,23457E+23。我尝试在单元格设置中使用不同的格式，并尝试更改 ReplaceFormat 和 SeachFormat 参数而不改变结果。

任何人都知道为什么excel不尊重单元格的格式？

替换单元格使用的格式是文本，Office 的版本是 2007/2010。我需要的是在替换后在单元格中看到 123456987654321456654444 而不是 1,23457E+23 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T18:04:56.807

您可以做的是结合使用`Value`属性和`Find`方法来实现安全（或更安全）的替换，如下所示：

```
Sub SafeReplace(ByVal What As String, ByVal Replacement As String)
    Set cell = Cells.Find(What:=What, LookAt:=xlPart, MatchCase:=False, SearchFormat:=False)
    Do While Not cell Is Nothing
        cell.Value = Replacement
        Set cell = Cells.FindNext(cell)
    Loop
End Sub 
```

然后使用它

```
SafeReplace "&/TDT/&", "123456987654321456654444" 
```

它应该尊重单元格的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-14T20:25:52.410

`'`可以在值前面使用以将它们视为文本：

```
Cells.Replace What:="&/TDT/&", Replacement:="'123456987654321456654444" 
```

# javascript - require.js 模块加载太晚

> ID：14586808
> 
> 赞同：0
> 
> 时间：2013-01-29T15:49:37.467
> 
> 标签：javascript, requirejs, amd

我正在使用 html5 视频，并且它的 metadataloaded 事件在 require.js 加载需要捕获它的模块之前被触发，我该如何解决这个问题？

我已将 require.js 放在 html 头中。

# ruby-on-rails - 在 Rails 中将任何数字缩短为 3 位人类可读的数字

> ID：14586809
> 
> 赞同：0
> 
> 时间：2013-01-29T15:49:46.637
> 
> 标签：ruby-on-rails, ruby

Rails 中有很多不错的“人类”助手，但在我的情况下，我必须使用点分隔符和一个字母单位（千 - 'k'，百万 - 'm' 等）将数字缩短为 3 位数字。

```
number_to_human(number, strip_insignificant_zeros: true, precision: 2).gsub(/ /,'') 
```

这个助手做得很好，除了我需要 25454 变成 25.5k 而不是 25.45k 。

一般来说，我需要根据点之前的位数将“精度”选项设置为 1 或 2。

我可以用我自己的助手包装 number_to_human 并自己计算精度，但我想知道是否还有其他方法，也许是一些 Ruby 魔法或类似的东西。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:13:23.607

[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_human)说的含义`precision`由 的设置控制`significant`。默认情况下，它是有效位数。如果您设置`significant: false, precision: 1`，您会得到想要的效果，即您只想要小数点后的一位数字。

# java - 在 UIMA 中访问注释

> ID：14586810
> 
> 赞同：6
> 
> 时间：2013-01-29T15:49:48.880
> 
> 标签：java, uima

UIMA 中是否有一种方法可以像在 CAS 调试器 GUI 中那样访问令牌中的注释？您当然可以访问索引存储库中的所有注释，但我想循环标记，并获取每个标记的所有关联注释。

原因很简单，我想检查一些注释并丢弃其他注释，这样更容易。任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-22T08:56:02.127

我是 uimaFIT 开发人员。

如果您想在另一个注释的边界内查找所有注释，您可能更喜欢更短更快的变体

```
JCasUtil.selectCovered(referenceAnnotation, <T extends ANNOTATION>); 
```

请注意，创建具有所需偏移量的“虚拟”注释然后在其边界内搜索并不是一个好主意，因为这会立即在 CAS 中分配内存，除非收集完整的 CAS，否则不会被垃圾收集。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-06T12:33:51.287

经过搜索和询问 cTAKES（Apache 临床文本分析和知识提取系统）的开发人员。您可以使用[http://code.google.com/p/uimafit/](http://code.google.com/p/uimafit/)上的以下库“uimafit” 。可以使用以下代码

```
List list = JCasUtil.selectCovered(jcas, <T extends Annotation>, startIndex, endIndex); 
```

这将返回 2 个索引之间的所有值。

希望这会有所帮助

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-30T13:17:01.987

如果你不想使用 uimaFIT，你可以创建一个过滤迭代器来遍历感兴趣的注解。UIMA 参考文档在这里：[UIMA 参考文档](http://uima.apache.org/downloads/releaseDocs/2.2.2-incubating/docs/html/references/references.html#ugr.ref.cas.index.constraints_and_filtered_iterators)

我最近在一些代码中使用这种方法来查找包含正则表达式注释的句子注释（这种方法对于我们的项目是可以接受的，因为所有正则表达式匹配都比文档中的句子短，并且每个句子只有一个正则表达式匹配。显然，根据索引规则，你的里程可能会有所不同。如果你害怕碰到另一个`shorterAnnotationType`，将内部代码放入一个while循环中）：

```
static ArrayList<annotationsPair> process(Annotation shorterAnnotationType, 
        Annotation longerAnnotationType, JCas aJCas){

    ArrayList<annotationsPair> annotationsList = new ArrayList<annotationsPair>();

    FSIterator it = aJCas.getAnnotationIndex().iterator();
    FSTypeConstraint constraint = aJCas.getConstraintFactory().createTypeConstraint();
    constraint.add(shorterAnnotationType.getType());
    constraint.add(longerAnnotationType.getType());
    it = aJCas.createFilteredIterator(it, constraint);

    Annotation a = null;
    int shorterBegin = -1;
    int shorterEnd = -1;
    it.moveTo((shorterAnnotationType));
    while (it.isValid()) {
        a = (Annotation) it.get();
        if (a.getClass() == shorterAnnotationType.getClass()){
            shorterBegin = a.getBegin();
            shorterEnd = a.getEnd();
            System.out.println("Target annotation from " + shorterBegin 
                    + " to " + shorterEnd);
            //because assume that sentence type is longer than other type, 
            //the sentence gets indexed prior
            it.moveToPrevious(); 
            if(it.isValid()){
                Annotation prevAnnotation = (Annotation) it.get();
                if (prevAnnotation.getClass() == longerAnnotationType.getClass()){
                    int sentBegin = prevAnnotation.getBegin();
                    int sentEnd = prevAnnotation.getEnd();
                    System.out.println("found annotation [" + prevAnnotation.getCoveredText()
                            + "] location: " + sentBegin + ", " + sentEnd);
                    annotationsPair pair = new annotationsPair(a, prevAnnotation);
                    annotationsList.add(pair);
                }
                //return to where you started
                it.moveToNext(); //will not invalidate iter because just came from next
            }
        }
        it.moveToNext();
    }

    return annotationsList;

} 
```

希望这可以帮助！免责声明：我是 UIMA 的新手。

# javascript - jQuery 管理多个 Ajax 调用结果

> ID：14586811
> 
> 赞同：2
> 
> 时间：2013-01-29T15:49:53.657
> 
> 标签：javascript, jquery, ajax, jquery-mobile

我的**jQuery 移动网站**上有一个设置页面当用户单击保存按钮时，我为 3 种不同的用户输入更新服务器，即语言、货币、阈值

为了做到这一点，我进行了 3 个单独的 ajax 调用（使用 PUT）。因此，当一切都成功时，如果其中任何一个失败，我会转到另一个页面，我会留在同一页面上并显示错误消息。

问题是我只想在所有调用都成功的情况下切换页面，如果有任何错误我想显示**一个**包含所有消息的警报（而不是 3 个单独的警报窗口），所以我需要等待所有这些的结果来电。

为了在我使用的所有 3 个 Ajax 调用中实现这一点；

```
async:false 
```

我在**所有**这些调用成功方法中都添加了一个布尔值，例如；

```
 success: function (data){
           languageUpatesuccesful=true;

        } 
```

然后是这样的；

```
 if(languageUpatesuccesful){
   make the next call to update currency..etc
} 
```

...

```
if(allsuccesful(){
  changepage();
} 
```

因此，我可以准确地跟踪一个呼叫何时结束，然后我会拨打下一个电话，如果所有成功切换到另一个页面。

虽然这可行，但我认为这是一个可怕的解决方案，有没有办法通过使用**async:true**来实现？

因为禁用异步 ajac 会冻结页面，我什至不能显示动画，jQuery 也不推荐这样做。但是，我怎么知道这 3 个电话何时完成并根据结果采取行动呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T15:57:32.817

将[延迟对象](http://api.jquery.com/category/deferred-object/)与[`$.when`](http://api.jquery.com/jQuery.when/)：

```
$.when(ajax1(), ajax2(), ajax3()).done(function() {
    // all Ajax calls successful, yay! 
}).fail(function() {
    // oh noes, at least one call failed!
}); 
```

其中`ajaxX`定义为：

```
function ajax1() {
    return $.ajax(...);
} 
```

如果您确实想要链接 Ajax 调用而不是让它们并发，请查看[Bergi 的解决方案](https://stackoverflow.com/a/14586917/218196)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T15:56:56.953

您可以使用 Deferred 接口轻松链接它们：

```
$.ajax({…})
  .then(function(languageUpateResult) {
     return $.ajax({…});
  })
  .then(function(currencyUpdateResult) {
     return $.ajax({…});
  })
  .then(function(thresholdUpdateResult) {
     changePage();
  }); 
```

* * *

*抱歉，我跳过了 ajax 调用是分开*的这一事实。上面的代码按顺序执行它们，如果您只想并行执行它们并等待它们全部完成使用`$.when()`- 请参阅[@FelixKling 的答案](https://stackoverflow.com/a/14586933/1048572)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T15:57:18.507

您可以尝试使用网络工作者在后台线程中进行异步调用。网络工作者有很好的[浏览器支持](http://html5test.com/compare/feature/workers-worker.html)，应该可以解决你的问题。如果你有兴趣，我已经写了一点 web worker 库的抽象来让它们更容易使用（只要给我发邮件）。

# javascript - java脚本按钮不显示

> ID：14586815
> 
> 赞同：1
> 
> 时间：2013-01-29T15:50:07.143
> 
> 标签：javascript, html

好的，我有这段代码（我从 Paul irish 页面获得+一些修改）（它为您提供了您的 ie 版本（标准内容）：

```
 <!--[if lt IE 7 ]> <html class="ie6"> <![endif]-->
 <!--[if IE 7 ]>    <html class="ie7"> <![endif]-->
 <!--[if IE 8 ]>    <html class="ie8"> <![endif]-->
 <!--[if IE 9 ]>    <html class="ie9"> <![endif]-->
 <!--[if (gt IE 9)|!(IE)]><!--> <html class=""> <!--<![endif]-->
<head>
</head>
<body>
<h1>test:</h1>
<script type="text/javascript"> 
$(function test()) {
"use strict";
// Detecting IE
var oldIE
if ($('html').is('.ie6, .ie7, .ie8')) {
    oldIE = true;
}
if (oldIE) == true {
document.write("version<ie9")

} else {
   document.write(" version => ie9")

}
}
</script>
<script type="text/javascript"> 
<button type="button" onclick="test()">testing</button>
</script>
</body>

 </html> 
```

问题是它没有显示测试按钮

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T15:52:36.760

`<button>`元素不应被标签`<script>`包围。毕竟，它是 HTML，而不是 JavaScript。

```
<!DOCTYPE html>
<!--[if lt IE 7 ]> <html class="ie6"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie7"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie8"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class=""> <!--<![endif]-->
<head>
<title>A HTML document needs a title to be valid.</title>
</head>
<body>
    <button id="test">I feel so clickable today.</button>

<!-- You must include jQuery before you can use its methods -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
"use strict";

    (function ($) {
        // Assignment with the ternary operator
        var oldIE = ($('html').is('.ie6, .ie7, .ie8')) ? true : false;

        // You need at least jQuery 1.7 to use .on()
        $('#test').on('click', function() {
            console.log(oldIE);
        });
    }(jQuery));

</script>
</body>
</html> 
```

*注意*我包含 jQuery 是因为我`$`在您的代码中看到了一个符号。

* * *

由于您*应该*在开发过程中使用控制台，因此这里有一个片段可以防止在不提供控制台的浏览器中出现 JS 错误。

```
// Avoid `console` errors in browsers that lack a console
(function(){var e;var t=function(){};var n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];var r=n.length;var i=window.console=window.console||{};while(r--){e=n[r];if(!i[e]){i[e]=t}}})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:04:15.257

但是，如果您想将其保留在脚本标记中，则需要像这样修改代码：

```
<script type="text/javascript"> 
   document.write('<button type="button" onclick="test()">testing</button>');
</script> 
```

# iphone - 在 iPhone 应用程序中打开文件 - NSFileManager isReadableFileAtPath 返回 NO

> ID：14586818
> 
> 赞同：1
> 
> 时间：2013-01-29T15:50:13.563
> 
> 标签：iphone, objective-c, nsfilemanager

这是我的代码：

```
-(BOOL)application:(UIApplication *)application
           openURL:(NSURL *)url
 sourceApplication:(NSString *)sourceApplication
        annotation:(id)annotation {

    if (url != nil && [url isFileURL]) {
        NSString* documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

        if ( [[NSFileManager defaultManager] isReadableFileAtPath:[url absoluteString]] ) {
            NSLog(@"READABLE!");
            [[NSFileManager defaultManager] copyItemAtPath:[url absoluteString] toPath:[documentsPath stringByAppendingString:@"/timecode.xml"] error:nil];
        } else {
            NSLog(@"NOT READABLE!");
        }

        BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:[documentsPath stringByAppendingString:@"/timecode.xml"]];

        if (fileExists) {
            NSLog(@"THERE!");
        } else {
            NSLog(@"NOT THERE!");
        }
    }
} 
```

出于某种原因，当我从邮件应用程序（或任何其他应用程序，包括良好的阅读器）打开一个文件到我的应用程序时，它说它不可读。显然，该文件不存在。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T15:54:17.980

因为 URL 不是路径。

```
[url absoluteString] 
```

好像

```
file:///var/mobile/XXXXXXXX/MyApp.app/Documents/foo.txt 
```

你需要使用

```
[url path] 
```

反而。

另外，有两条评论：

```
url != nil && [url isFileURL] 
```

是非常多余的。

```
[url isFileURL] 
```

`NO`如果 URL 是，无论如何都会返回`nil`（因为消息传递`nil`总是返回零）。

二：

```
[documentsPath stringByAppendingString:@"/timecode.xml"] 
```

不要重新发明轮子/尝试猜测路径分隔符。这条线***应该***是

```
[documentsPath stringByAppendingPathComponent:@"timecode.xml"] 
```

# html - Ul 和 LI 项目前后都水平对齐

> ID：14586820
> 
> 赞同：4
> 
> 时间：2013-01-29T15:50:16.327
> 
> 标签：html, css

我们的网页设计师想要一个垂直的 UL / LI 列表，如下图所示。

![我们试图获得的东西](../Images/dcf3b00304cca106a3c99fdb7d11488f.png)

但是使用我获得的这种风格

![在此处输入图像描述](../Images/c557f98663ace427f30d5080d4600caa.png)

麦粒肿如下

```
 <style type="text/css">
ul {
    list-style: none;

}
ul li:after {
    content: "\25BC \0020";
}

ul li:before {
    content: "\25A0 \0020"; color:#C60;
}
</style> 
```

我要传递给一张桌子，但如果线路溢出，有没有办法获得一个对齐的列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T16:04:00.977

您需要设置 position: relative 的父级、ul 和 position: relative 的 before / after 伪元素。

```
ul {
  list-style: none;
  position: relative;
}

ul li {
  padding-left: 20px;
  padding-right: 20px;
}
ul li:after {
  content: "\25BC \0020";
  position: absolute;
  right: 5px;
}

ul li:before {
  position: absolute;
  left: 5px;
  content: "\25A0 \0020"; color:#C60;
} 
```

JS 小提琴：http: [//jsfiddle.net/QgBvb/](http://jsfiddle.net/QgBvb/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T16:08:12.443

这个[jsfiddle](http://jsfiddle.net/ZP7cZ/3/)工作得很好，注意 li 左边距和文本缩进取决于使用的图标，但是像这样即使改变字体大小，它们也会保持对齐。

CSS

```
ul {
    list-style: none;
    width: 150px;
    font-size: 16px;
    text-transform: uppercase;
}

ul li {
    text-indent: -0.88em;
    margin-left: 0.88em;
    position: relative;
    padding-right: 1em;
}

ul li:before {
    content: "\25A0";
    color: #C60;
    vertical-align: text-bottom;
    margin-right: .25em;
}

ul li:after {
    color: #C60;
    font-size: 0.8em;
    content: "\25BC";
    position: absolute;
    right: 0;
    top: 50%;
    margin-top: -.5em;
} 
```

编辑：`vertical-align: text-bottom;`对我来说，FF 中的图标与文本对齐效果更好。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-29T16:03:00.000

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Untitled Document</title>
</head>
<body>
 <div > 
                    <ul>
                        <li> </li>
                            <li class="first"><a href="f.php">Fragrances</a></li>
                                <li> </li>
                            <li><a href="c.php">Cosmetics</a></li>
                        <li> </li> 
                        <li><a href="s.php">Stuffed Toys</a></li>
                       <li> </li>
                        <li><a href="b.php">Housing</a></li>
                        </ul>
                </div>

</body>
</html> 
```

复制这是一个新文件并查看结果，你必须正确使用 li 和 ul

# android - android Flurry 与 NDK 应用程序集成

> ID：14586821
> 
> 赞同：8
> 
> 时间：2013-01-29T15:50:26.343
> 
> 标签：android, flurry

我的 Android 应用程序包括两部分：用 Java 编写的前端和使用 NativeActivity NDK 东西用 C++ 编写的游戏。我在将 Flurry 集成到我的应用程序时遇到问题。Flurry 在 Java 部分中运行良好，但在 C++ 中崩溃。更具体地说，调用

```
jni_env->FindClass("com/flurry/android/FlurryAgent"); 
```

结果`ClassNotFoundException`。

`jni_env`变量没有被破坏，因为我能够`Intent`使用它获得一些参数。

FlurryAgent.jar 被添加到`libs`dir 和`.classpath`. 我什至检查了 FlurryAgent.jar 的“订购和导出”复选框（尽管我不知道这是什么意思）。没有什么帮助。

更多细节：我的应用程序分为库和应用程序部分。我已将 FlurryAgent.jar 添加到这两个部分并检查了两个部分的“订购和导出”，但它仍然没有帮助。清洁和重建也无济于事。我错过了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-30T14:02:00.530

答案在这里： http: [//archive.is/QzA8](http://archive.is/QzA8)

换句话说，`NativeActivity`找不到第三方类，而不是

```
jni_env->FindClass("com/flurry/android/FlurryAgent"); 
```

应该使用

```
jobject nativeActivity = state->activity->clazz;
jclass acl = jni_env->GetObjectClass(nativeActivity);
jmethodID getClassLoader = jni_env->GetMethodID(acl, "getClassLoader", "()Ljava/lang/ClassLoader;");
jobject cls = jni_env->CallObjectMethod(nativeActivity, getClassLoader);
jclass classLoader = jni_env->FindClass("java/lang/ClassLoader");
jmethodID findClass = jni_env->GetMethodID(classLoader, "loadClass", "(Ljava/lang/String;)Ljava/lang/Class;");
jstring strClassName = jni_env->NewStringUTF("com.flurry.android.FlurryAgent");
jclass flurryClass = (jclass)(jni_env->CallObjectMethod(cls, findClass, strClassName));
jni_env->DeleteLocalRef(strClassName); 
```

# coronasdk - 如何使用隐藏的相机拍照？

> ID：14586822
> 
> 赞同：-3
> 
> 时间：2013-01-29T15:50:33.773
> 
> 标签：coronasdk

在我的应用程序中，我必须从相机拍照。但我需要隐藏的相机视图。如果可以在不调用相机模式的情况下拍照，或者如果有可能与相机视图重叠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T02:33:00.430

Corona 使用本机摄像头/媒体库方法来访问摄像头，并且不提供对摄像头的直接访问。所以这是不可能的，我知道。

# json - 在 WebGet UriTemplate 中将 GUID 作为参数传递

> ID：14586823
> 
> 赞同：0
> 
> 时间：2013-01-29T15:50:39.967
> 
> 标签：json, wcf, http, rest, service

您好，我正在将 WebGets 和 WebInvokes 添加到现有的 SOAP 服务中。这是一个将 GUID 类型变量作为参数的方法。我知道 WebGet 不能将字符串作为其 uritemplate 中的参数以外的任何内容。但是，如果我仍然按照`http://baseaddress/Rest/GetInstitutionFromGuid?guid=106fbb94-34aa-403c-9400-f186e75e4793`Advanced Rest Client chrome 插件中的“”（106fbb94-34aa-403c-9400-f186e75e4793 是示例 Guid）中的方式进行操作，它不会给出错误，而是返回 null。因此我的问题是我可以将 GUID 类型的参数传递给 WebGet 的 UriTemplate，如果我不能发出什么样的 http 请求来从 guid 获取机构？

下面是 GetInstitutionFromGuid 方法的操作契约：

```
 [OperationContract]
            [WebGet(UriTemplate = "Rest/GetInstitutionFromGuid&guid={guid}&format={format}", 
                       RequestFormat = WebMessageFormat.Json, 
                       ResponseFormat = WebMessageFormat.Json, 
                       BodyStyle = WebMessageBodyStyle.Wrapped)]
            [return: MessageParameter(Name = "Institution")] 
            Institution GetInstitutionFromGuid(Guid guid,String format); 
```

这是它的实现：

```
 public Institution GetInstitutionFromGuid(Guid guid,String format)
            {

 if (string.Equals("json", format, StringComparison.OrdinalIgnoreCase))
        {
            WebOperationContext.Current.OutgoingResponse.Format = WebMessageFormat.Json;
        }
                Institution inst = db.Institutions.Where(i => i.Guid == guid).FirstOrDefault();
                return inst;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:04:54.643

不确定这是否正确，但通常第一个查询字符串值以“？”为前缀 不是 ＆。

# c# - 在 32 位和 64 位操作系统上使用 wix 创建事件日志

> ID：14586827
> 
> 赞同：1
> 
> 时间：2013-01-29T15:50:50.697
> 
> 标签：c#, wix, event-log

使用 wix 创建应用程序事件日志的推荐方法似乎是

```
 <Util:EventSource
          Name="BLAH"
          Log="Application"
          EventMessageFile="[NETFRAMEWORK40FULLINSTALLROOTDIR]EventLogMessages.dll"/> 
```

在 64 位操作系统上，您将其 NETFRAMEWORK40FULLINSTALLROOTDIR 替换为 NETFRAMEWORK40FULLINSTALLROOTDIR64。

我注意到，当您在 64 位操作系统上运行 32 位应用程序时，当您使用代码中的 .NET [EventLog.CreateEventSource](http://msdn.microsoft.com/en-us/library/5zbwd3s3.aspx)方法时，它会使用 NETFRAMEWORK40FULLINSTALLROOTDIR 创建一个事件日志。

```
EventMessageFile => C:\Windows\Microsoft.NET\Framework\v4.0.30319\EventLogMessages.dll 
```

如果您运行没有事件日志的 64 位版本的应用程序，它将创建它

```
EventMessageFile => C:\Windows\Microsoft.NET\Framework64\v4.0.30319\EventLogMessages.dll 
```

无论 EventMessageFile 在路径中是否包含 Framework 或 Framework64，应用程序的 32 位和 64 位版本都可以在创建后愉快地对其进行写入。

这是受支持的行为吗？如果要同时允许应用程序的 32 位和 64 位版本，那么创建它的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:13:41.890

Windows 事件日志允许您创建本地化的事件日志消息文件。当 Microsoft 编写作为 Windows 一部分的服务时，他们可能希望能够本地化写入事件日志的内容。然而，几乎所有其他人都希望能够以他们选择的语言将字符串写入事件日志，而这正是 .NET 事件日志包装器所提供的。因此，.NET 提供了一个非常通用的事件日志消息文件，其中不包含本地化消息，而只是带有单个参数占位符的消息，其中插入了提供的字符串参数，使您可以完全控制 .NET 应用程序写入事件日志的内容。

`EventLogMessages.dll`如果.NET (位 DLL。如果我正确理解您的问题，那正是您所看到的行为。

.NET 事件日志消息文件没有真正的“并行”问题。但是，如果您出于某种原因决定创建自己的（可能是本地化的）事件日志消息文件，您可以使用这两个服务安装此文件的两个副本，或者您可以共享一个副本，然后安装到`%CommonProgramFiles%`. 但是，如果一个版本独立于另一个版本进行更新，则不使用两个副本进行并行安装可能会导致问题。

# iphone - 是否可以使用 Watir 在移动设备上自动化移动站点测试？

> ID：14586830
> 
> 赞同：2
> 
> 时间：2013-01-29T15:51:11.623
> 
> 标签：iphone, ios, mobile, safari, watir

我需要在真实设备（iPhone Safari）或模拟器（xCode 模拟器上的 Safari）上测试移动网站。有可能的？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:25:18.230

有可能的。代码示例在这里：[https ://github.com/wikimedia/mediawiki-extensions-MobileFrontend/tree/master/tests/acceptance](https://github.com/wikimedia/mediawiki-extensions-MobileFrontend/tree/master/tests/acceptance)

如果您有具体问题，请提出。

# sockets - 将套接字服务器挂载为驱动器/目录

> ID：14586831
> 
> 赞同：0
> 
> 时间：2013-01-29T15:51:15.903
> 
> 标签：sockets, filesystems, distributed, mount

我正在试验套接字和分布式文件系统......直到现在我在 PC A 上启动了我的套接字服务器并使用 CURL 将我的文件发送到服务器。服务器决定文件是存储在同一台机器上还是另一台服务器上（假设是 PC B）。通过将使用 CURL 发送的文件存储在另一台服务器上，PC A 将文件发送到 PC B。这实际上是有效的，但我正在寻找一种无需 CURL 或其他东西的工作方式......我想要的是我可以使用我的套接字服务器就像一个普通的文件系统。我的想法是我在 PC A 上启动我的服务器，这将挂载目录（比如说 /mnt/myFiles），我可以像使用普通文件系统一样使用该目录（存储、删除或修改我的文件）。通过在 PC B 上启动套接字服务器，这将扩展我在 PC A 上的存储容量。假设我将在 PC A 上保存一个文件，这将决定文件是否存储在 PC A 或 B 上 - 对用户完全透明。有没有机会意识到这样的事情？我已经在许多不同的论坛中搜索了一些主题，但我没有发现这样的......

# c# - MySqlDataAdapter 填写输入字符串格式？

> ID：14586833
> 
> 赞同：1
> 
> 时间：2013-01-29T15:51:35.093
> 
> 标签：c#, mysql

尝试使用适配器使用来自 MySQL 查询的数据填充数据表时出现错误。

VisualStudio 告诉我错误，“**输入字符串格式不正确**”，与`adapter.Fill(myDataTable);`（该过程只是一个基本的选择语句，它返回一些带有文本、varchar 和日期时间值的行。）

该方法是这样调用的：`GetDataTable("CALL SomeProc()");`

```
public static DataTable GetDataTable(string query)
{
    string ConnString = ConfigurationManager.ConnectionStrings["randomconnstr"].ConnectionString.ToString();
    MySqlConnection conn = new MySqlConnection(ConnString);
    MySqlDataAdapter adapter = new MySqlDataAdapter();
    adapter.SelectCommand = new MySqlCommand(query, conn);

    DataTable myDataTable = new DataTable();

    conn.Open();
    try
    {
        adapter.Fill(myDataTable);
    }

    finally
    {
        conn.Close();
    }
    return myDataTable;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:00:53.923

尝试改变这个

```
GetDataTable("CALL SomeProc()"); 
```

对此：

```
GetDataTable("SomeProc"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:18:48.490

您缺少引号，看起来您没有关闭字符串。

```
GetDataTable(@"CALL SomeProc()"); 
```

编辑 **

尝试添加这个：-

```
adapter.SelectCommand.CommandType = CommandType.StoredProcedure; 
```

# matrix - 如何停止詹金斯矩阵作业的父作业中的预构建步骤？

> ID：14586835
> 
> 赞同：1
> 
> 时间：2013-01-29T15:51:37.417
> 
> 标签：matrix, jenkins

有没有其他人注意到一组矩阵构建的父作业似乎仍然在配置中的“构建”部分之前做任何事情？

这意味着像删除工作区和源代码管理这样的事情发生在运行父作业的节点上，即使我看不出你什么时候会想要它以及它有什么用处。

特别是，当使用自定义的共享工作区时，这意味着矩阵的父作业可以压倒使用相同工作区的其他作业。

有人知道为什么吗？更重要的是，我该如何阻止这种情况发生？

# android - Android：保存单选按钮的状态

> ID：14586837
> 
> 赞同：4
> 
> 时间：2013-01-29T15:51:39.287
> 
> 标签：android, radio-button, save

您好我正在尝试为 Android 创建一个应用程序，为了开发它，我需要浏览不同的页面和问题。对于这个任务，我定义了一个带有一些单选按钮的单选组。我想要获得的是每个问题都回答了单选按钮，当用户浏览不同的页面时，可以检索该值。我已经尝试过这段代码，其中包括如果有一个选定的单选按钮，则没有创建新的单选按钮（单选按钮检查为假）。但是，使用此代码，总是有一个选定的答案，因此总是选择相同的单选按钮。我会很感激一些帮助。

```
 radBotA.setOnCheckedChangeListener(radioCheckChangeListener);
            radBotB.setOnCheckedChangeListener(radioCheckChangeListener);
            radBotC.setOnCheckedChangeListener(radioCheckChangeListener);
            radBotD.setOnCheckedChangeListener(radioCheckChangeListener);
            radBotA.setOnClickListener(radioClickListener);
            radBotB.setOnClickListener(radioClickListener);
            radBotC.setOnClickListener(radioClickListener);
            radBotD.setOnClickListener(radioClickListener);
            if (radBotA.isChecked()){
                Answers[position]="A";
                }
            else if(radBotB.isChecked()){
           Answers[position]="B"; }            
            else if(radBotB.isChecked()){
                   Answers[position]="C"; } 
            else if(radBotC.isChecked()){
                   Answers[position]="D"; }     
            else if(radBotD.isChecked()){
                   Answers[position]="D"; } 
            else {
                radBotA.setChecked(false);
                radBotA.setChecked(false);
                radBotA.setChecked(false);
                radBotA.setChecked(false);
            }

        bPrevious.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {

                position = position -1; 
                questions.Previous();
                currentQuestion();

            }
        });
        bNext.setOnClickListener(new View.OnClickListener(){
            @Override

                public void onClick(View v) {
                position = position +1;
                questions.Next();       
                currentQuestion();

            }
        });

    private void currentQuestion() {
            if (position==0){
                bPrevious.setVisibility(View.GONE);
            }else{
                    bPrevious.setVisibility(View.VISIBLE);
                }
            if (position==nPreguntas-1){
                bNext.setVisibility(View.GONE);
            }else{
                bNext.setVisibility(View.VISIBLE);
            } 
            questions.currentQuestion(this, category);
            enunciado.setImageResource(Enunciado[position]);
            pregunta.setText(questions.getPregunta());
            final RadioButton radBotA = new RadioButton(this);
            final RadioButton radBotB = new RadioButton(this);
            final RadioButton radBotC = new RadioButton(this);
            final RadioButton radBotD = new RadioButton(this);

            radBotA.setText("A. " + questions.getRespuestaA());
            radBotB.setText("B. " + questions.getRespuestaB());
            radBotC.setText("C. " + questions.getRespuestaC());
            radBotD.setText("D. " + questions.getRespuestaD());
            String nprueba = "Item " +  questions.getId() + " de "+ nPreguntas;

            NombrePrueba.setText(nprueba);
            if (radBotA.isChecked()){
                Answers[position]="A";
                }
            else if(radBotB.isChecked()){
           Answers[position]="B"; }            
            else if(radBotB.isChecked()){
                   Answers[position]="C"; } 
            else if(radBotC.isChecked()){
                   Answers[position]="D"; }     
            else if(radBotD.isChecked()){
                   Answers[position]="D"; } 
            else {
                radBotA.setChecked(false);
                radBotA.setChecked(false);
                radBotA.setChecked(false);
                radBotA.setChecked(false);
            }
        } 
```

谢谢大家的时间

编辑：

```
public void save(){
            SharedPreferences settings = getSharedPreferences("Answers", 0); 
              SharedPreferences.Editor e = settings.edit();

            e.putBoolean("A0",radBotA.isChecked());
            e.putBoolean("B0",radBotB.isChecked());
            e.putBoolean("C0",radBotC.isChecked());
            e.putBoolean("D0",radBotD.isChecked());
            e.putBoolean("A1",radBotA.isChecked());
            e.putBoolean("B1",radBotB.isChecked());
            e.putBoolean("C1",radBotC.isChecked());
            e.putBoolean("D1",radBotD.isChecked());
            e.putBoolean("A2",radBotA.isChecked());
            e.putBoolean("B2",radBotB.isChecked());
            e.putBoolean("C2",radBotC.isChecked());
            e.putBoolean("D2",radBotD.isChecked());
            e.putBoolean("A3",radBotA.isChecked());
            e.putBoolean("B3",radBotB.isChecked());
            e.putBoolean("C3",radBotC.isChecked());
            e.putBoolean("D3",radBotD.isChecked());
public void load(){
            SharedPreferences settings = getSharedPreferences("Answers", 0);
              boolean answerA0 = settings.getBoolean("A0", false); 
              boolean answerB0 = settings.getBoolean("B0", false);
              boolean answerC0 = settings.getBoolean("C0", false);
              boolean answerD0 = settings.getBoolean("D0", false);
              boolean answerA1 = settings.getBoolean("A1", false); 
              boolean answerB1 = settings.getBoolean("B1", false);
              boolean answerC1 = settings.getBoolean("C1", false);
              boolean answerD1 = settings.getBoolean("D1", false);
              boolean answerA2 = settings.getBoolean("A2", false); 
              boolean answerB2 = settings.getBoolean("B2", false);
              boolean answerC2 = settings.getBoolean("C2", false);
              boolean answerD2 = settings.getBoolean("D2", false);
              boolean answerA3 = settings.getBoolean("A3", false); 
              boolean answerB3 = settings.getBoolean("B3", false);
              boolean answerC3 = settings.getBoolean("C3", false);
              boolean answerD3 = settings.getBoolean("D3", false); 
```

但是我不知道如何继续。我正在考虑以下代码，但它给了我错误，并且位置是“页码”：

```
public void Test(){
        switch(posicion){
            case(0):
                if(answerA0==true){
                    e.putBoolean("A0",radBotA.isChecked());
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T16:05:12.903

如果我理解正确，您想在其他活动中检索一些数据。在这种情况下，最简单的方法是使用`SharedPreferences`.

用户回答问题后（`CheckBox`的检查状态正在更改），您应该`SharedPreferences`像这样存储您的信息：

```
 SharedPreferences settings = getSharedPreferences("Answers", 0); // first argument is just a name of your SharedPreferences which you want to use. It's up to you how you will name it, but you have to use the same name later when you want to retrieve data.
  SharedPreferences.Editor editor = settings.edit();
  editor.putBoolean("questionA", radBotA.isChecked()); // first argument is a name of a data that you will later use to retrieve it and the second argument is a value that will be stored
  editor.putBoolean("questionB", radBotB.isChecked());
  editor.putBoolean("questionC", radBotC.isChecked());
  editor.putBoolean("questionD", radBotD.isChecked());

  editor.commit(); // Commit the changes 
```

因此，现在您将这些信息存储在内部存储器中。在其他活动中，您可以检索此信息：

```
 SharedPreferences settings = getSharedPreferences("Answers", 0);
  boolean answerA = settings.getBoolean("questionA", false); // The second argument is a default value, if value with name "questionA" will not be found
  boolean answerB = settings.getBoolean("questionB", false);
  boolean answerC = settings.getBoolean("questionC", false);
  boolean answerD = settings.getBoolean("questionD", false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T12:41:06.420

我正在开发相同的应用程序，解决方案是您必须根据您的问题编号存储单选按钮的状态，并且每个问题都有不同的键，如下所示：

```
final RadioButton rdSelection=(RadioButton)findViewById(mradioOptGroup.getCheckedRadioButtonId());
int child_index=mradioOptGroup.indexOfChild(rdSelection);

switch(mid)
{
    case 1: 
        sharedpreferences.putint("",child_index);
        break;
    case 2:
       sharedpreferences.putint("",child_index);
       break;
} 
```

对你下一个问题的所有问题都这样做

并且在之前的每个问题上，您都必须存储单选按钮的状态`mid+1`

`mid`你的问题编号在哪里

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T10:50:56.743

我刚刚解决了这个问题，现在我可以在每次下一次单击时保存单选按钮的当前状态，并且在每次上一次单击时，我都会返回单选状态，即使用户通过转到上一个问题或任何问题更改了状态的问题。

# asp.net-mvc - 在 MVC 引用的类库中使用 Ninject 的 InRequestScope

> ID：14586856
> 
> 赞同：0
> 
> 时间：2013-01-29T15:52:02.930
> 
> 标签：asp.net-mvc, entity-framework, ninject

我的解决方案分为如下：

*   数据项目 - 持有实体框架
*   业务逻辑/服务项目 - 包含实现业务逻辑/对数据进行其他工作的类
*   MVC3 项目

我设置的方式是服务类确实涉及实体框架。我正在使用依赖注入来创建存储库包装实体框架。我遇到的问题是，每次通过 ninject 创建存储库时，它都会创建一个新的 EF 上下文，因此并非所有更改都被保存。请注意，我在服务项目和 MVC 项目中都有 Ninject 绑定，我在这里谈论的实例是绑定位于类库中的情况。

根据我所做的研究，似乎建议使用 InRequestScope 以便使用相同的上下文。但是，由于我在类库而不是 MVC 项目/Web 项目中使用它，在类库中使用 Ninject.Web.Common 是否有意义（它去哪里并创建 AppStart 文件夹和所有内容）？

或者我应该有另一种方法来处理这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:50:02.597

我误解了 Ninject.Web.Common 的工作原理，并且对通过 nuget install 自动添加的自动添加的 NinjectWebCommon cs 文件感到困惑，这让我认为它仅适用于入口点项目。我不知道我的类库可以访问 HttpContext 并且通过摆脱 nuget 包“有用”添加的 AppStart 文件夹，我能够在我的类库中使用 InRequestScope。

# html - 更改属性“必需”的默认浏览器值

> ID：14586861
> 
> 赞同：0
> 
> 时间：2013-01-29T15:52:32.523
> 
> 标签：html, browser, default

是否可以更改`required`我们添加到 HTML 中元素的属性的默认值？

例如：

```
<form action="" method="post">
    <input type="email" name="signup-email" id="signup-email" placeholder="enter your email address" required />
    <input type="submit" value="Notify Me" />
</form> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-29T16:00:40.487

我相信您给出的 HTML 代码块应该如下所示：

```
<form action="" method="post">
  <input type="email" name="signup-email" id="signup-email" placeholder="enter your email address" required="required" />
  <input type="submit" value="Notify Me" />
</form> 
```

如果您想完全删除它：

```
<form action="" method="post">
  <input type="email" name="signup-email" id="signup-email" placeholder="enter your email address" />
  <input type="submit" value="Notify Me" />
</form> 
```

显然，由于您在表单的 ACTION 属性中没有 URL 地址，因此表单将 POST 回自身（即表示它所在的页面，因此如果它在您的 contact.aspx 表单上，它将回传给联系人。 aspx)

# php - Codeigniter Datamapper——创建新对象而不释放内存

> ID：14586862
> 
> 赞同：1
> 
> 时间：2013-01-29T15:52:35.573
> 
> 标签：php, codeigniter, codeigniter-datamapper

我正在使用 Datamapper 基本上将一个数据库中的一堆原始数据同步到一个更规范化的数据库。我已经设置了两组模型，每个数据库一组，都扩展了 DM。我遇到的问题是我需要将 gigs 的数据导入到新数据库中，当我在控制器中创建新的 DM 对象时，它们似乎在返回创建它的任何方法时都没有被释放。模型不会自动加载关系。

```
$clients = $this->client->get_iterated();
foreach($clients as $client) {
  $this->addUser($client);
} 
```

并在 addUser() 中创建一个新的 User 对象，保存并返回。当我输出它的内存使用量时，它只会增加，直到耗尽所有内容。起初我认为这是因为 PHP 正在创建传递给 addUser() 的 $client 对象的副本，但只是简单地将“return”作为 addUser() 的第一行显示内存没有增加。只有当我创建新的用户对象并保存它时。

我试过在方法结束之前使用 $user->clear() 无济于事。

值得注意的是，该应用程序最初在原始数据库模型上运行得很好。新模型被创建、保存，然后永远不会被释放。这将在几分钟内真正咀嚼 2 gigs 的内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T22:19:19.537

我也遇到过这个问题，花了很多时间调试。我们发现的唯一解决方法是在模型中使用单例实例来创建许多实例，例如：

```
static function get_utility_instance() {
    if ( !self::$utility_instance ) {
        self::$utility_instance = new User_model() ;
    }
    self::$utility_instance->clear() ;
    return self::$utility_instance ;
} 
```

# android - 具有相同 id 的子视图的自定义视图

> ID：14586864
> 
> 赞同：6
> 
> 时间：2013-01-29T15:52:26.477
> 
> 标签：android, layout

我已经实现了一个自定义视图，其中包含两个由 xml 中的 id 标识的子视图。当在同一布局中使用两个这样的自定义视图时，我遇到了选择哪个自定义视图是随机的问题。

如何编写具有不同视图 ID 的自定义视图，可以在同一布局中多次使用？

这是自定义视图的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

<EditText
    android:id="@+id/clearable_edit"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:inputType="textCapWords"
    android:paddingRight="35dip" />

<Button
    android:id="@+id/clearable_button_clear"
    android:layout_width="30dip"
    android:layout_height="30dip"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"
    android:layout_marginRight="5dip"
    android:background="@drawable/clear_button" />

</RelativeLayout> 
```

EditText 的 id (android:id="@+id/clearable_edit") 是这里的问题。

自定义视图的用法：

```
<LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <com.custom.package.ClearableEditText
                android:id="@+id/arr_location"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                 >
            </com.custom.package.ClearableEditText>
        </LinearLayout>
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <com.custom.package.ClearableEditText
                android:id="@+id/dep_location"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                 >
            </com.custom.package.ClearableEditText>
        </LinearLayout> 
```

在此示例中，“ClearableEditText”类型的视图共享其 EditText 子视图的相同 id。

这是 ClearableEditText 的代码：

```
public class ClearableEditText extends RelativeLayout {

private LayoutInflater inflater = null;
private EditText edit_text;
private Button btn_clear;

public ClearableEditText(Context context, AttributeSet attrs, int defStyle){
    super(context, attrs, defStyle);
    initViews();
}

public ClearableEditText(Context context, AttributeSet attrs){
    super(context, attrs);
    initViews();

}

public ClearableEditText(Context context){
    super(context);
    initViews();
}

private void initViews(){
    inflater = (LayoutInflater) getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View view = inflater.inflate(R.layout.clearable_edittext, this, true);
    edit_text = (EditText) view.findViewById(R.id.clearable_edit);
    btn_clear = (Button) findViewById(R.id.clearable_button_clear);
    btn_clear.setVisibility(RelativeLayout.INVISIBLE);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:59:52.690

首先像这样获取父级`View`：

```
View v1 = findViewById(R.id.arr_location); 
```

进而

```
EditText ed1 = (EditText)v1.findViewById(R.id.clearable_edit); 
```

相似地

```
View v2 = findViewById(R.id.dep_location);
EditText ed2 = (EditText)v2.findViewById(R.id.clearable_edit); 
```

这样，您可以添加任意数量的和`ClearableEditText`具有相同的 id 。只要确保每个人都有不同的 id，例如在这种情况下和.`EditText``Button``ClearableEditText``R.id.arr_location``R.id.dep_location`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T13:11:37.900

我找到了解决方案。

我向 ClearableEditText 添加了一个方法，您可以在其中从对象外部设置底层 EditText 的 id 并使用新 id 设置它。

这是一个代码示例：

```
//inside ClearableEditText
public void setEditId(int id){
    edit_text.setId(id);
}

//somewhere else

departureLocation = (ClearableEditText)view.findViewById(R.id.dep_location);
departureLocation.setEditId(R.id.clearable1);
arrivalLocation = (ClearableEditText)view.findViewById(R.id.arr_location);         
arrivalLocation.setEditId(R.id.clearable2); 
```

Id 是在 values 文件夹中使用“ids.xml”创建的，这会导致 eclipse/ADT 为输入的项目创建一个占位符 id

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
   <!-- This file is used to create unique ids for custom views, which will be used more 
   than once in the same layout file. Using unique ids prevents the custom view from         getting 
   the wrong state. -->
        <item name="clearable1" type="id"></item>
        <item name="clearable2" type="id"></item>
</resources> 
```

# ios - 如何保证密码库应用程序是安全的？

> ID：14586867
> 
> 赞同：3
> 
> 时间：2013-01-29T15:53:01.040
> 
> 标签：ios, password-protection, trust

我有大量的用户名和密码——每个网站、服务都有一个不同的用户名和密码……为了跟踪信息，我有一个声称使用 RSA-256 加密存储信息的 iOS 应用程序；它可以选择在不同设备之间同步“保险库”，因此我可以使用 iPad 或 iPhone 来访问信息。

从本质上讲，我“相信”软件提供商，他们声称他们的软件是安全的是真的。这不仅意味着（1）它写得很好（没有意外的安全漏洞），而且（2）没有“后门”允许他们在同步操作期间拦截或重定向我的文件 - 如果他们这样做了，他们将“拥有一切”。

我想知道是否有解决此问题的“最佳”方法。我能想到几个：

*   自己写。保证 (2)，但不是 (1)
*   有一个开源项目，让“社区”帮助（1）。当然，恶意的人可能会使用开源来发现和利用（而不是修复）弱点
*   供应商软件的第三方认证。现在你必须相信第三方......

对此可能有一个强大的解决方案 - 但我不知道。SO上似乎存在许多“相关”问题，但我找不到真正回答这个问题的问题。

有接盘侠吗？

# ios - 如何在ios中将按钮转换为后退按钮？

> ID：14586868
> 
> 赞同：0
> 
> 时间：2013-01-29T15:52:01.437
> 
> 标签：ios, objective-c, xcode

我正在根据某些操作更改根控制器。这使我无法拥有一个导航控制器来控制我的视图之间的所有交互（拆分视图控制器只能是根控制器，而我需要一个前菜单）。

当我到达拆分视图控制器时，我想回到主菜单（通过更改根控制器再次完成）并且我有一个按钮（名为“主菜单”）。我想要这个“主菜单”按钮看起来像一个后退按钮？可以通过改变按钮的类型来实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:12:34.557

baritems 是不可变的，您可以删除并添加它们。您不能 AFAIK 更改它们...您当然可以使用自定义 UIView 作为按钮的内容使它们可变

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:04:06.220

您必须创建一个自定义`UIButton`并为其分配类似于`UINavigationBar`后退按钮的背景图像，请查看[其他问题](https://stackoverflow.com/questions/227078/creating-a-left-arrow-button-like-uinavigationbars-back-style-on-a-uitoolba)以获取更多详细信息。

# c++ - 将数组传递给外部函数

> ID：14586869
> 
> 赞同：2
> 
> 时间：2013-01-29T15:53:01.400
> 
> 标签：c++, llvm, llvm-c++-api

我是 LLVM 新手，我正在学习如何使用 LLVM 进行分析。我需要将一个数组传递给一个外部方法，并在代码中向该方法插入一条调用指令。我目前正在使用以下代码，该代码在执行时会出现分段错误。

```
std::vector<Value*> Args(1);

//Vector with array values
SmallVector<Constant*, 2> counts;

counts.push_back(ConstantInt::get(Type::getInt32Ty(BB->getContext()),32, false));
                        counts.push_back(ConstantInt::get(Type::getInt32Ty(BB->getContext()),12, false));

//Array with 2 integers
Args[0]= ConstantArray::get(llvm::ArrayType::get(llvm::Type::getInt32Ty(BI->getContext()),2), counts); 
```

这里，外部函数“钩子”定义为`M.getOrInsertFunction("hook", Type::getVoidTy(M.getContext()), llvm::ArrayType::get(llvm::Type::getInt32Ty(BI->getContext()),2) (Type*)0);`

在阅读了一些源文件后，我尝试使用 GetElementPtrInst 来传递数组

```
std::vector<Value*> ids(1);
ids.push_back(ConstantInt::get(Type::getInt32Ty(BB->getContext()),0));
Constant* array = ConstantArray::get(llvm::ArrayType::get(llvm::Type::getInt32Ty(BI->getContext()),2), counts);
Args[0] = ConstantExpr::getGetElementPtr(&(*array), ids, false); 
```

但它失败了

```
7  opt 0x00000000006c59f5 bool llvm::isa<llvm::Constant, llvm::Value*>(llvm::Value* const&) + 24

8  opt 0x00000000006c5a0f llvm::cast_retty<llvm::Constant, llvm::Value*>::ret_type llvm::cast<llvm::Constant, llvm::Value*>(llvm::Value* const&) + 24

9  opt 0x0000000000b2b22f

10 opt 0x0000000000b2a4fe llvm::ConstantFoldGetElementPtr(llvm::Constant*, bool, llvm::ArrayRef<llvm::Value*>) + 55

11 opt 0x0000000000b33df2 llvm::ConstantExpr::getGetElementPtr(llvm::Constant*, llvm::ArrayRef<llvm::Value*>, bool) + 82 
```

此外，在这种情况下，“钩子”定义为 `M.getOrInsertFunction("hook", Type::getVoidTy(M.getContext()), PointerType::get(Type::getInt32PtrTy(M.getContext()),0), //when using GEP (Type*)0);`

有人可以给我一些关于将数组传递给外部函数的指针（比如签名`void hook(int abc[])`）。我可能一直都错了，非常感谢一些帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T16:55:05.147

从“我如何在 LLVM IR 中做类似 c 的事情”问题开始的一个好地方是首先用 C 编写你想要做的事情，然后[通过 Clang 将其编译为 LLVM IR](https://stackoverflow.com/questions/9148890/how-to-make-clang-compile-to-llvm-ir)并查看结果。

在您的特定实例中，该文件：

```
void f(int a[2]);

void g() {
    int x[2];
    x[0] = 1;
    x[1] = 3;
    f(x);
} 
```

将编译为：

```
define void @g() nounwind {
  %x = alloca [2 x i32], align 4
  %1 = getelementptr inbounds [2 x i32]* %x, i32 0, i32 0
  store i32 1, i32* %1, align 4
  %2 = getelementptr inbounds [2 x i32]* %x, i32 0, i32 1
  store i32 3, i32* %2, align 4
  %3 = getelementptr inbounds [2 x i32]* %x, i32 0, i32 0
  call void @f(i32* %3)
  ret void
}

declare void @f(i32*) 
```

所以我们可以看到编译`g`为接收的clang `i32*`，而不是一个数组。这意味着您需要一种从数组本身获取数组第一个元素的地址的方法，而[getelementptr 指令](http://llvm.org/docs/LangRef.html#getelementptr-instruction)是一种直接的方法。

但是请注意，您要生成 GEP（getelementptr 指令），例如通过`GetElementPtrInst::create`. 一个 gep[*常量表达式*](http://llvm.org/docs/LangRef.html#constant-expressions)，这是你试图在这里生成的，是别的东西，并且只适用于编译时常量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:35:21.520

你应该使用 Clang 来编译它。然后，检查数组的边界以及是否定义了所有元素。

# python - 设置每个实例 __call__ 的方法？

> ID：14586871
> 
> 赞同：4
> 
> 时间：2013-01-29T15:52:12.470
> 
> 标签：python

我想做的是：

```
class Foo(object):
    def __init__(self):
        pass
    def f(self):
        print "f"
    def g(self):
        print "g"

# programatically set the "default" operation
fer=Foo()
fer.__call__=fer.f

# a different instance does something else as its
# default operation
ger=Foo()
ger.__call__=ger.g

fer()  # invoke different functions on different
ger()  # objects depending on how they were set up. 
```

但是从 2.7（我目前正在使用）开始，我不能这样做，尝试`fer()` 引发异常。

有没有办法，实际上，设置每个实例的`__call__`方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:03:46.767

不幸的是，正常的东西`types.MethodType`在这里不起作用，因为`__call__`它是一种特殊的方法。

从数据模型：

> 类实例只有在类有`__call__()`方法时才可调用；x(arguments) 是 的简写`x.__call__(arguments)`。

这对于实际调用的内容*有点模棱两可，但很明显您的类**需要*有一个`__call__`方法。

您需要创建某种 hack：

```
class Foo(object):
    def __init__(self):
        pass
    def f(self):
        print "f"
    def g(self):
        print "g"

    def __call__(self):
        return self.__call__()

f = Foo()
f.__call__ = f.f
f()

g = Foo()
g.__call__ = g.g
g() 
```

`__call__`不过要小心，如果在尝试调用它之前没有在实例上设置 a ，它将导致无限递归。

请注意，我实际上不建议调用您 rebind 的魔法属性`__call__`。这里的重点是证明 python 可以转换`f()`为： `f.__class__.__call__(f)`，因此您无法在每个实例的基础上对其进行更改。`__call__`无论您做什么，都会调用该类-您只需要做一些事情来改变该类的`__call__`每个实例的行为，这很容易实现。

* * *

您可以使用 setter 类型的东西在您的类上实际创建方法（而不是简单的函数）——当然这可以变成一个属性：

```
import types
class Foo(object):
    def __init__(self):
        pass
    def f(self):
        print "f"
    def g(self):
        print "g"

    def set_func(self,f):
        self.func = types.MethodType(f,self)

    def __call__(self,*args,**kwargs):
        self.func(*args,**kwargs)

f = Foo()
f.set_func(Foo.f)
f()

def another_func(self,*args):
    print args

f.set_func(another_func)
f(1,2,3,"bar") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:15:29.927

您可能正在尝试解决错误的问题。

由于 python 允许以程序方式创建类，因此您可以编写如下代码：

```
>>> def create_class(cb):
...     class Foo(object):
...         __call__ = cb
...     return Foo
... 
>>> Foo1 = create_class(lambda self: 42)
>>> foo1 = Foo1()
>>> foo1()
>>> Foo2 = create_class(lambda self: self.__class__.__name__)
>>> foo2 = Foo2()
>>> foo2() 
```

请注意，在这种情况下 Foo1 和 Foo2 没有共同的基类。所以`isinstance`并且`issubclass`不会工作。如果您需要它们有一个通用的基类，我会使用以下代码：

```
>>> class Foo(object):
...     @classmethod
...     def create_subclass(cls, cb):
...          class SubFoo(cls):
...               __call__ = cb
...          return SubFoo
... 
>>> Foo1 = Foo.create_subclass(lambda self: 42)
>>> foo1 = Foo1()
>>> foo1()
>>> Foo2 = Foo.create_subclass(lambda self: self.__class__.__name__)
>>> foo1 = Foo2()
>>> foo2()
'Foo'
>>> issubclass(Foo1, Foo)
True
>>> issubclass(Foo2, Foo)
True 
```

我真的很喜欢第二种方式，因为它提供了一个干净的类层次结构并且对我来说看起来很干净。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T16:01:23.013

可能的解决方案：

```
class Foo(object):
    def __init__(self):
        self._callable = lambda s: None
    def f(self):
        print "f"
    def set_callable(self, func):
        self._callable = func
    def g(self):
        print "g"
    def __call__(self):
        return self._callable()
d = Foo()
d.set_callable(d.g) 
```

# php - 页面加载 GIF - 有人可以解释下面的答案吗？

> ID：14586872
> 
> 赞同：0
> 
> 时间：2013-01-29T15:53:15.477
> 
> 标签：php, javascript, ajax, loading, gif

我在此链接上找到了我正在寻找的内容[如何在页面加载时显示 ajax 加载 gif 动画？](https://stackoverflow.com/questions/1305260/how-to-show-ajax-loading-gif-animation-while-the-page-is-loading)但我不知道如何在我的网站上实现这一点。

我希望在页面加载时出现*加载 GIF*，并在页面完全加载 PHP 结果后自行消失。

在网站上，我使用一个页面模板（index.php），并且根据用户的查询动态加载了该页面中的所有数据。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:21:00.527

你会在这里找到你需要的一切

```
http://mycodeprograms.blogspot.ca/2012/10/how-to-add-loader-while-page-load.html 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:57:09.107

当页面完全加载后，首先发生的是`<body>`'`onload`事件。这是您使图像消失的地方。

例如，使`<body>`标签看起来像这样：

```
<body onload="makeLoadingGifDisappear()"> 
```

在页面正文的某处给你的 GIF 一个 ID：

```
<img src="loadinggif.gif" id="myLoadingGif"> 
```

然后在页面的 JavaScript 中，使`makeLoadingGifDisappear`函数隐藏 GIF：

```
function makeLoadingGifDisappear() {
 document.getElementById('myLoadingGif').style.display = 'none';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-30T17:51:09.617

好吧，这是我的解决方案。

1）CSS部分

```
#loadgif {
    padding-top:2px;
    font: 10px #000;
    text-align:center;
    vertical-align:text-top;

    height: 80px;
    width: 130px;

    /* Centering the div to fit any screen resolution */
    top: 50%;
    left: 50%;
    margin-top: -41px; /* Div height divided by 2 including top padding */
    margin-left: -65px; /* Div width divided by 2 */
    position: absolute;
    display:    none; /* JS will change it to block display */
    position:   fixed;
    z-index:    1000;

    /* Loading GIF set as background of the div */
    background: #FFF url('../img/loader.gif') 50% 75% no-repeat;

    /* Misc decoration */
    -webkit-border-radius: 15px;
    -moz-border-radius: 15px;
    border-radius: 15px;
    border:#7580a8 solid 1px;
} 
```

2）HTML部分

将 div 标签放在 body 标签内的任何位置。

```
<!-- With or without text -->
<div id="loadgif">Loading...</div> 
```

3) Javascript 部分

我做了两个功能，一个显示，另一个隐藏 div。

```
<script type="text/javascript">

// Hide function by changing <div> style display attribute back to none
function hideloadgif() {
    document.getElementById('loadgif').style.display = 'none';
}

// Show function by changing <div> style display attribute from none to block.
function showloadgif() {
    document.getElementById('loadgif').style.display = 'block';
}

// Making sure that any other event running in the background isn't affected
if (window.addEventListener) { // Mozilla, Netscape, Firefox
    window.addEventListener('load', WindowLoad, false);
} else if (window.attachEvent) { // IE
    window.attachEvent('onload', WindowLoad);
}

// Call the hideloadgif() function on click event,
// with interval time set to 3 seconds to hide the <div>
function WindowLoad(click) {
    setInterval("hideloadgif()",3000)
}
</script> 
```

4) 显示 div。在任何地方使用 onlick="" 事件调用函数 showloadgif()。

例如

```
<img src="abc/def.jpg" onlick="showloadgif()"> 
```

点击图片后会出现div，同时hideloadgif()会在3秒内触发隐藏div。

```
function WindowLoad(click) {
    setInterval("hideloadgif()",3000)
} 
```

# debugging - Fortran 格式的写入函数在 IF Composer 2013 上触发“已退出代码 408 (0x198)”

> ID：14586874
> 
> 赞同：1
> 
> 时间：2013-01-29T15:53:21.067
> 
> 标签：debugging, fortran, fortran77, formatted

在 Intel Fortran Composer 2013 上执行以下 Fortran 代码时，编译器会在写入函数处触发断点并返回代码 408：

```
 character*20  date_char
       character*10  LADATE

       ...
       if (date_char(3:3) .EQ. "") date_char(3:3)="0"
       if (date_char(7:7) .EQ. "") date_char(7:7)="0"
       write(LADATE,"(2A2,A4)")
     S date_char(3:4),date_char(7:8),date_char(9:12) 
```

它是一种固定的行长格式，S 代表行继续。

date_char 的值为 ' 29 012013 ' 和 LADATE ' '

一旦到达 write 语句，调试器就会触发断点，并且调用堆栈显示正在调用的以下系统函数：

*对于*_issue_diagnostics() _for_emit_diagnostics()

感谢您的时间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T09:19:25.360

问题是 LADATE 变量实际上是一个按引用调用的参数（FORTRAN77 默认传递约定）：

```
 SUBROUTINE MDATE(LADATE)

   character*20  date_char
   character*10  LADATE
   ...
   write(LADATE,"(2A2,A4)")
 S date_char(3:4),date_char(7:8),date_char(9:12)

   RETURN
   END 
```

它作为参数传递给上面的几个子例程，只是一个 8 个字符的字符串。简而言之，调用相当于：

```
 ...
   CHARACTER VAR*20
   ...
   CALL MDATE(VAR(10:17))
   ... 
```

程序已启动，但在尝试通过写入函数访问不可访问的数组地址后，触发了断点。

# playframework-2.0 - 如何在 Play Framework 中创建子项目？（播放#play-java_2.9.2；2.1-RC3：未找到）

> ID：14586875
> 
> 赞同：8
> 
> 时间：2013-01-29T15:53:24.700
> 
> 标签：playframework-2.0, playframework-2.1

我想测试子项目是如何工作的，尤其是`routes`在主项目中如何考虑子项目的（[这在以前是不可见的](https://stackoverflow.com/questions/13424611/playframework-2-0-subproject-and-routes)）。

我在这里阅读了文档： [https ://github.com/playframework/Play20/wiki/SBTSubProjects](https://github.com/playframework/Play20/wiki/SBTSubProjects)

我做了什么：（下载play 2.1 RC3后）

1.  创建新的 Java 项目：`play new MainProject`
2.  在 MainProject 中创建新文件夹：`modules`
3.  创建新的 Java 项目：`play new SubProject`

在这两个项目上：`play eclipse`因为`play eclipsify`不再起作用

在主项目`Build.scala`文件中：

```
import sbt._
import Keys._
import play.Project._

object ApplicationBuild extends Build {

  val appName         = "MainProject"
  val appVersion      = "1.0-SNAPSHOT"

  val appDependencies = Seq(
    // Add your project dependencies here,
    javaCore,
    javaJdbc,
    javaEbean 
  )

  val subProject = Project("subproject", file("modules/SubProject"))

  val main = play.Project(appName, appVersion, appDependencies).settings(
    // Add your own project settings here      
  ).dependsOn(subProject)

} 
```

现在，在我运行的主项目中：

```
play run 
```

我收到以下错误：

```
[error] (MainProject/*:update) sbt.ResolveException: unresolved dependency: play#play_2.9.2;2.1-RC3: not found
[error] unresolved dependency: play#play-java_2.9.2;2.1-RC3: not found
[error] unresolved dependency: play#play-java-jdbc_2.9.2;2.1-RC3: not found
[error] unresolved dependency: play#play-java-ebean_2.9.2;2.1-RC3: not found
[error] unresolved dependency: play#play-test_2.9.2;2.1-RC3: not found 
```

*注意* 我试图`Build.scala`从子项目中删除，但我一直收到这个错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-31T16:07:37.367

终于让它工作了：

*   您不必`Build.scala`从子项目中删除 。

您需要重命名子项目的路由文件。在我的例子中，到`subProject.routes`. 如果您想单独运行您的子项目，您需要声明路由必须解析为您的 subProject.routes。所以在`application.conf`你的子项目中添加这个：

```
application.router=subProject.Routes 
```

在您的主项目中，您需要从子项目中导入路由：

```
->  /subProject               subProject.Routes 
```

主项目的构建文件应该类似于：example is from SCALA but s

```
import sbt._
import Keys._
import play.Project._

object ApplicationBuild extends Build {

  val appName         = "MainProject"
  val appVersion      = "1.0-SNAPSHOT"

  val appDependencies = Seq(
    // Add your project dependencies here,
   javaCore,
   javaJdbc,
   javaEbean 
  )

  val subProject = play.Project(
    appName + "-subProject", appVersion, path = file("modules/SubProject")
  )

  val main = play.Project(appName, appVersion, appDependencies).settings(
    // Add your own project settings here      
  ).dependsOn(subProject)

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T12:21:17.207

我发现我必须将 scala 版本显式设置为 2.10.0，因为子项目导致与 2.9.2 冲突。

```
val main = play.Project(appName, appVersion, appDependencies).settings(
    scalaVersion := "2.10.0"
) 
```

取自[这个问题](https://stackoverflow.com/questions/14365406/sbt-failed-to-precise-play-2-apps-project-dependency)的例子。

# ios - 检测圆圈上的接触点，Cocos2d

> ID：14586876
> 
> 赞同：0
> 
> 时间：2013-01-29T15:52:49.210
> 
> 标签：ios, objective-c, cocos2d-iphone

我`draw`在 cocos2d 中创建了一个带有函数的圆圈，我正在尝试检测圆圈线上的触摸点，假设用户触摸我要打印的圆圈底部 270，如果用户触摸我要打印的圆圈顶部 90 等等。 ..

我看过这个问题，但他们首先检测到一个精灵，然后比较是否在圈内或圈外触摸

[http://www.cocos2d-iphone.org/forum/topic/21629](http://www.cocos2d-iphone.org/forum/topic/21629)

[如何检测圆圈中的触摸](https://stackoverflow.com/questions/7697112/how-to-detect-touch-in-a-circle)

```
- (void) draw
{
    CGSize winSize = [[CCDirector sharedDirector] winSize];
    glLineWidth(10.0f);
    ccDrawColor4F(0.2f, 0.9f, 0.02f, 0.6f);
    CGPoint center = ccp(winSize.width*0.88, winSize.height*0.8);
    CGFloat radius = 100.f;
    CGFloat angle = 0.f;
    NSInteger segments = 100;
    BOOL drawLineToCenter = YES;

    ccDrawCircle(center, radius, angle, segments, drawLineToCenter);
} 
```

如何检测圆线上的触摸点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:30:56.277

您可以添加`ccTouchBegan/Moved/Ended`到您的自定义`CCNode`:::

```
- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
{
    NSLog(@"ccTouchBegan Called");
    if ( ![self containsTouchLocation:touch] ) return NO;
    NSLog(@"ccTouchBegan returns YES");
    return YES;
}

- (void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event
{
    CGPoint touchPoint = [touch locationInView:[touch view]];
    touchPoint = [[CCDirector sharedDirector] convertToGL:touchPoint];

    NSLog(@"ccTouch Moved is called");
}

- (void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event
{
    NSLog(@"ccTouchEnded is called");
} 
```

然后处理`touch`它对a的解释`CCSprite`（即计算触摸与the之间的距离`center`并确定触摸是否属于圆）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:51:03.010

如果您知道中心点和触摸位置，您应该知道它在圆上的位置所需的一切。

我假设您使用的是[如何检测圆圈的代码](https://stackoverflow.com/questions/7697112/how-to-detect-touch-in-a-circle)

如果触摸在圆内，则取圆的中心点和触摸点，然后比较两者以查看 X 和 Y 的偏移量。根据 X/Y 偏移，您应该能够确定单击了圆的哪个部分（顶部、左侧、右侧、底部等）。如果你想要角度，找到两点的斜率。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T18:28:43.227

试试这个，没有测试代码，根据你的需要改进它

```
-(BOOL) ccTouchBegan:(UITouch*)touch withEvent:(UIEvent*)event
{    
    CGSize winSize = [[CCDirector sharedDirector] winSize];
    CGPoint location = [[CCDirector sharedDirector] convertToGL:[touch locationInView:[touch view]]];
    CGPoint center=ccp(winSize.width*0.88, winSize.height*0.8);

    //now test against the distance of the touchpoint from the center change the value acording to your need
    if (ccpDistance(center, location)<100)
    {
        NSLog(@"inside");

        //calculate radians and degrees in circle
        CGPoint diff = ccpSub(center, location);//return ccp(v1.x - v2.x, v1.y - v2.y);
        float rads = atan2f( diff.y, diff.x);
        float degs = -CC_RADIANS_TO_DEGREES(rads);
        switch (degs) 
        {
            case -90:
            //this is bottom
            break;
            case 90:
                //this is top
                break;
            case 0:
                //this is left side
                break;
            case 180:
                //this is right side
                break;
            default:
                break;
        }
    }   
    return YES;
} 
```

# java - 将数据存储在内存中而不是 JPA

> ID：14586879
> 
> 赞同：-1
> 
> 时间：2013-01-29T15:53:35.780
> 
> 标签：java, memory

目前，我使用 JPA 通过 eclipse 链接将数据保存在 DB 中，例如 derby。是否有官方选项将数据存储在内存中而不是持久层中的 java 中？

示例将非常有帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:58:36.057

您可以在内存模式下使用数据库。为此，我更喜欢 H2（[http://www.h2database.com/html/features.html#in_memory_databases ）/](http://www.h2database.com/html/features.html#in_memory_databases)/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:02:59.253

仅用户 Derby[内存模式](http://db.apache.org/derby/docs/10.9/devguide/cdevdvlpinmemdb.html)：

连接网址：

```
jdbc:derby:memory:myDB;create=true 
```

但请记住，数据库根本不会被持久化（这意味着每次运行应用程序时都会从一个空白数据库开始）。要使内存数据库持久化，您需要调用：

```
SYSCS_UTIL.SYSCS_BACKUP_DATABASE 
```

# jquery - 如何在 Jquery 中检测对 div 的长按？

> ID：14586883
> 
> 赞同：35
> 
> 时间：2013-01-29T15:53:44.810
> 
> 标签：jquery, triggers

`2 seconds`当用户按下div时，我想执行一些功能。

可能吗 ？

这是我检测对 div 的点击的代码

```
$('div').mousedown(function() {

}); 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-29T16:00:05.217

添加一个限制，只允许在鼠标按下 2 秒后发生点击。

```
var timer;
$('div').on("mousedown",function(){
    timer = setTimeout(function(){
        alert("WORKY");
    },2*1000);
}).on("mouseup mouseleave",function(){
    clearTimeout(timer);
}); 
```

编辑：我也添加了 mouseleave，因为如果鼠标离开元素然后触发 mouseup，它不会停止计时器。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-01-29T16:01:20.143

只需观察两者`mousedown`并`mouseup`计算差异。[这是一个例子](http://jsfiddle.net/taylorbuley/PdJDe/)。

```
(function() { 

    // how many milliseconds is a long press?
    var longpress = 3000;
    // holds the start time
    var start;

    jQuery( "#pressme" ).on( 'mousedown', function( e ) {
        start = new Date().getTime();
    } );

    jQuery( "#pressme" ).on( 'mouseleave', function( e ) {
        start = 0;
    } );

    jQuery( "#pressme" ).on( 'mouseup', function( e ) {
        if ( new Date().getTime() >= ( start + longpress )  ) {
           alert('long press!');   
        } else {
           alert('short press!');   
        }
    } );

}()); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-09T01:09:25.447

在被问到这个问题后的两年里，发明了一个名为 jQuery Finger 的很棒的插件：

[http://ngryman.sh/jquery.finger/](http://ngryman.sh/jquery.finger/)

```
$('div').on('press', function(e) {
    console.log(this, e);
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-04T01:24:27.000

> 短按和长按事件 - 长按防止短按

```
//from e-OS menu script
var longpress = 800;
var start;
var timer;

//short press - show e-OS system menu
//long press - show e-OS settings
$( "#e-OS-menu" ).on( 'mousedown', function( e ) {
    start = new Date().getTime();
    timer = setTimeout(function(){ console.log('long press!'); }, longpress)
}).on( 'mouseleave', function( e ) {
    start = 0;
    clearTimeout(timer);
}).on( 'mouseup', function( e ) {
    if ( new Date().getTime() < ( start + longpress )  ) {
       clearTimeout(timer);
       console.log('short press!');   
    }
}); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-07T16:33:25.923

我知道这个问题现在已经很老了，但我一直在寻找类似的东西，发现 Buley 的答案接近我所需要的。我想我会发布我用它做的事情，让它在没有鼠标的情况下运行，有点像 Android longtouch。

```
// Set the duration of the long press and declare a couple variables
var longpress = 1000;
var start;
var divMouseDown;                       

// Check for mousedown on the element of choice
$("#element").on('mousedown', function(e){
  // Get the time it was clicked
  start = new Date().getTime();

  // See if mouse is still being held down after the longpress duration
  divMouseDown = setTimeout(function(){
    // What we want to happen when mouse is clicked and held for 1 second
  }, longpress);

  // If the mouse leaves the element or is released before the long touch event, 
  // reset variables and stop the function from triggering          
  $("#element").on('mouseup mouseleave', function(){
    if (divMouseDown) {
      clearTimeout(divMouseDown);
    }
    start = 0;
    e.stopPropagation();
  } );

} ); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-10T01:22:35.283

升级和合并*Editor*和*Kevin B*的回复，您可以拥有一个功能齐全的、多 div、hold-catcher：

```
 // Global delta msec timeout
    var delta = 1500;

    $("#foo").on('mousedown', function(event) {

        var thisElement = $(event.currentTarget);
        var deltaTimer = setTimeout(function(){

            console.log('long press!');
            thisElement.removeData('startTimestamp');
        }, delta);

        thisElement.data('startTimestamp', new Date().getTime());
        thisElement.data('timer', deltaTimer);
    }).on('mouseleave', function(event) {

        var thisElement = $(event.currentTarget);
        clearTimeout(thisElement.data('timer'));

        thisElement.removeData('startTimestamp');
        thisElement.removeData('timer');
    }).on('mouseup', function(event) {

        var thisElement = $(event.currentTarget);
        var startTimestamp = thisElement.data('startTimestamp');
        clearTimeout(thisElement.data('timer'));

        if (startTimestamp !== undefined && !isNaN(parseInt(startTimestamp))) {

            if (new Date().getTime() >= (startTimestamp + delta))
               console.log('long press!');
            else
               console.log('short press!');
        }

        thisElement.removeData('startTimestamp');
        thisElement.removeData('timer');
    }); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-01-29T16:04:44.817

您可以使用以下代码（在[JSFiddle](http://jsfiddle.net/SNmmc/)中测试）：

```
$('#foo').mousedown(function(){
   $(this).data('lastPressed', new Date().getTime());
}).mouseup(function(){
    var lastPressed = $(this).data('lastPressed');
    if (lastPressed){
        var duration = new Date().getTime() - lastPressed;
        $(this).data('lastPressed', false);
        if (duration > 2000) {
            alert('Your click lasted more than 2 seconds.');
        } else {
            alert('Your click lasted less than 2 seconds.');
        }
    }
}).mouseout(function(){
    $(this).data('lastPressed', false);
}); 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-04-18T15:37:02.417

所以这显然在未来还有很长的路要走，但是对于仍然想要这样做的人来说，一个超级简单且非常优雅的方法是将 clearTimeout 函数与 mouseup / mouseout 事件结合起来：

```
$('#button').mousedown(function(){
   var timer = setTimeout(
   	() => {alert('long press occurred');}, 600
   );
}).mouseup(function(){
    clearTimeout(timer);
}).mouseout(function(){
    clearTimeout(timer);
});
```

```
#button {
  width: 50px;
  height: 50px;
  background-color: blue;
  color: white;
  display: flex;
  flex-direction: column;
  text-align: center;
  justify-content: center;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div id="button">press here</div>
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-29T15:59:44.007

当您检测到对 div 的点击时，您可以获得时间戳，这要归功于`mousedown`. 同样，您可以在检测到点击释放时获取时间戳，这要归功于`mouseup`.

然后您需要比较这两个时间戳，如果它们大于 2 秒（或 2000 毫秒），则执行您的函数。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-01-14T14:26:54.363

此解决方案在您设置的时间后执行操作。如果您用鼠标离开按下的元素，它也会取消操作。

```
var longpress={
        pressed:false,
        longpressed:false,
        presstime:1000
    };

$('#element').on( 'mousedown' , function( event ) {
        longpress.longpressed=false;
        longpress.pressed=true;
        longpress.timeout=setTimeout(function() {
            longpress.longpressed=true;
            //Long press action here!
        },longpress.presstime);
    }).on( 'mouseup' , function( event ) {
        clearTimeout(longpress.timeout);
        if (!longpress.longpressed && longpress.pressed) {
            longpress.pressed=false;
            //Short press action here!
        }
    }).on('mouseleave', function( event ) {
        clearTimeout(longpress.timeout);
        longpress.pressed=false;
    }); 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-08-01T16:28:58.040

简单的。无需冗长的不必要的编码。

```
(function(){
    // how many milliseconds is a long press?
    var offset = 500;

    $(".button").on('mousedown', function(e){
        // holds the start time
        $(this).data('start',new Date().getTime());
        $(this).addClass("selected");
    }).on('mouseup', function(e){
        if (new Date().getTime() >= ($(this).data('start') + offset)){
            //alert('ur click lasted for over 2 secs');
            $(this).addClass("selected");
        }else{
            $(this).removeClass("selected");
        }
    }).on('mouseleave', function(e){
        start = 0;
        //you can add destroy lingering functions on mouse leave
    });

}()); 
```

[http://jsfiddle.net/donddoug/8D4nJ/](http://jsfiddle.net/donddoug/8D4nJ/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-08-07T13:19:19.573

我们可以计算鼠标点击离开时的时间差。`timestamp`当您单击并释放 a`button`或`div` 使用`mousedown`and时，我们可以得到`mouseup`

这是一个检测简单点击和`2 seconds`长按的示例。在这里，我已经完成了`button`新闻。同样，您可以使用`div`

```
$(document).ready(function () {

	var pressTime; // store the press time

	$("#pressHere").on('mouseup', function () {

		var holdTime = 2000; //2 milliseconds for long press

		if (new Date().getTime() >= (pressTime + holdTime))
			$("#status").text("It's a Long Press...");
		else
			$("#status").text("It's a Short Press...");

	}).on('mousedown', function () { // When Button Release

    pressTime = new Date().getTime();

	}).on('mouseleave', function () { 	// When Button Leave

    pressTime = 0;

	});

});
```

```
.input-bar-item {
    display: table-cell;
}
.button-item {
margin: 20px;
    width: 30%;
}
.width100 {
  width: 60%;
}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

 <div class="input-bar-item button-item">
      <button class="btn btn-info" id="pressHere">Press Me</button>
</div>
<div class="input-bar-item width100" id="status"></div>
```

# jquery - 如何从外部网页获取数据到 CRM 2011？

> ID：14586885
> 
> 赞同：0
> 
> 时间：2013-01-29T15:53:58.577
> 
> 标签：jquery, dynamics-crm-2011, client-side, crm

我必须创建一个网页，其中包含需要插入特定 CRM 2011 实体的简单数据输入。但是该网页将在一个单独的系统上。换句话说，该网页将位于互联网上的其他机器上。提交后，该页面需要连接到 Internet 上其他地方的 CRM 2011 机器，并将在表单中输入的数据推送到该远程 CRM 应用程序中的适当实体位置。

这最终需要是一个完全基于客户端的解决方案，仅使用 HTML 和 JavaScript/jQuery。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T17:04:11.190

## 在线的

我真的只能根据 On-Premise 的经验发表评论。我发现一些证据表明 CRM Online 专门为潜在客户提供了这一点。OP 不清楚是什么实体——也许这已经/可以扩展。我会将其余的在线选项留给有更多经验的人。

## 本地：

OP 提到了使用仅限客户端技术的约束。我已经看到了几种方法可以做到这一点。主要战斗是跨越网络边界。另一个答案建议使用网络服务来加快/简化数据传输。假设这个选项不在讨论范围内，我已经写了我的回复——尽管如果不是，它会是首选。

1.  如果钱不是一个对象，那么有一些服务可以做到这一点。与邮件发送者表单服务一样，这些工具可让您设计/标记表单，并与它们一起托管，并且当有人填写它时，会安装一个集成以“获取”表单提交。好处：你很快就完成了。缺点：您失去对内容、托管位置的控制，这需要花钱。通常，CRM 是否是面向 Internet 的部署 (IFD) 并不重要。我听说[Scribe](http://www.scribesoft.com/CRM-Integration)很好，但我从未使用过它们，而且我不为它们工作。

2.  如果 CRM 服务器不是 IFD，则可以设计一个表单来发送邮件。此邮件消息可以由您的 CRM 服务器上的队列处理。许多 CMS 工具都提供这些表单作为选项，并且也有提供此功能的服务。电子邮件队列技术的主要缺点是您最终会处理邮件并可能创建工作流扩展以将邮件的详细信息解析到选择的实体。但是传输（假设电子邮件安全是适当的）不是问题。

3.  如果这些都不吸引人并且您想拥有自己的表单，请将其托管在您想要的位置，而不必编写一堆字符串处理扩展——您可以直接发布到 OData / REST 端点。只要 CRM 服务器的网络可访问性可用（因为它的 IFD 或适当的流量过滤允许通过防火墙进入它），您的表单就可以制作适当的 JSON 或 XML 有效负载来创建实体行。只是要警惕[同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。这可以通过[跨域资源共享 (CORS)](http://en.wikipedia.org/wiki/Same_origin_policy#Cross-Origin_Resource_Sharing)和[“选择加入”](http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing) CRM 服务器来接受跨域帖子来克服。

4.  对上述内容略有改动：还考虑如果 CRM 服务器是 IFD，您可以创建表单，将其作为网络资源添加到 CRM 并直接指向该页面。您将回避任何同源策略限制。在表单提交和 REST 端点之间。您大概可以将这种形式的 IFRAME 导入到外部站点中。

一些 oData/REST 端点链接： [示例：使用带有 JavaScript 和 jQuery](http://msdn.microsoft.com/en-us/library/gg309549.aspx) [CRM 的 REST 端点创建、检索、更新和删除 2011 JQuery OData REST 端点创建记录](http://andreaswijayablog.blogspot.com/2011/09/crm-2011-jquery-odata-rest-endpoints.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:01:13.353

根据输入/传输的数据量，您可能希望使用 oData 并使用 REST 与 CRM 服务器进行通信。

但是，恕我直言，一种更可靠和更专业的方法是创建一个为收集的数据提供服务的 Web 服务。然后，您可以让 CRM 在方便时获取它。

*考虑到您正在丢失推送*数据，这似乎是一个更糟糕的解决方案。但是，您需要关注防火墙。特别是如果您不知道您所针对的组织的设置（特别是如果他们有安全意识）。

此外，根据您分配的详细信息，您可能希望设计一个 IFRAME，它可以将点指向外部资源并发挥一些作用。从技术上讲，您将在 CRM 之外，同时仍在考虑 GUI。

目前我没有足够的信息来提供进一步的建议。

# android - 如何从 GCMBaseIntentService 中的 onRegistered() 方法获取 Activity 对象的引用

> ID：14586886
> 
> 赞同：0
> 
> 时间：2013-01-29T15:54:02.890
> 
> 标签：android, service, google-cloud-messaging

我目前在 android 中使用 Google GCM 推送通知服务。我已经完成了 PUSH 并且效果很好。现在我必须向我的服务器发送一些成功注册到 Google 服务器的设备详细信息。所以现在我需要一个 Activity 对象引用。

```
 protected void onRegistered(Context context, String registrationId) {
        Log.i(TAG, "Device registered: regId = " + registrationId);
        displayMessage(context, getString(R.string.gcm_registered));           
        registerToMyServer(context, registrationId); //initiate a rest call
        // the context above returns application context not the activity context
    }

   public void registerToMyServer(Activity activity, String rid){
         //handing REST
   } 
```

任何人都可以在这方面帮助我。我们如何设法从 GCMBaseIntentService 子类的 onRegistered() 方法获取 Activity 引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:07:05.150

为什么需要对 Activity 的引用？如果您不需要用户交互，则不需要 Activity。

> 现在我必须向我的服务器发送一些成功注册的设备详细信息......

这可以在您当前的 onRegistered 方法中完成（但当然您应该创建一个处理此问题的类）。

您必须了解的另一件事是 GCMBaseIntentService 是一项服务......因此，当您完成注册时，您的活动可能存在也可能不存在。因此，请重新考虑设计。

您不需要 Activity 参考来获取电话详细信息 Activity 从 Context 扩展，因此您可以从提供的 Context 中获取它。

```
 ↳  android.content.Context
       ↳    android.content.ContextWrapper
           ↳    android.view.ContextThemeWrapper
               ↳    android.app.Activity 
```

有关更多信息，请查看以下示例：C:\Users\USERNAME\android-sdks\extras\google\gcm\samples\gcm-demo-client\src\com\google\android\gcm\demo\app\ GCMIntentService.java 和 ServerUtilities.java

# google-analytics - Google Analytics 界面 - 将 onLoad 事件添加到目标

> ID：14586894
> 
> 赞同：1
> 
> 时间：2013-01-29T15:54:45.163
> 
> 标签：google-analytics, onload-event

嘿，我在使用 Google Analytics 界面时遇到了一些问题，想知道是否有人遇到过这种情况。

我最近添加了一个 onLoad 事件来跟踪网站的某些页面，但我似乎不明白如何将目标添加到我的 Analytics 帐户。

任何帮助将不胜感激！

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:32:00.563

这里的术语存在问题，因为“事件”含糊不清 - 您是否在页面中添加了 Javascript onload 事件处理程序（这对于 GA 跟踪不是必需的）还是您想使用 Google Analytics 事件跟踪（这是塞拉斯假设）？

在任何情况下，Analytics 目标都是在您帐户的管理部分中创建的，位于配置文件设置-> 目标下。您必须在此处输入唯一名称和类型。

输入“Url destination”表示您的访问者已到达您网站中的特定页面（目标 url）（精确 url（匹配类型“精确”）、以您的目标 url 开头的 url（头部匹配）或匹配的 url给定的模式（正则表达式）。

如果人们在访问目标网址之前应该遵循给定的路径，您可以通过选中“使用渠道”复选框来创建一个渠道，并输入他们在到达目标网址之前必须访问的各个网址。这很有用，特别是如果您有某种结帐流程 - 漏斗可视化报告将显示有多少人在到达您的目标网址之前退出了该流程以及在哪个网址（给定步骤的高退出率意味着存在问题并且您应该优化这个特定的页面）。

以同样的方式，您可以为谷歌分析事件创建目标，只有那些没有渠道（根据定义，事件或多或少只有一个步骤）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:09:28.407

从此处使用此信息并将其放入“目标类型：事件”第 1 节

_gaq.push(['_trackEvent', `'category', 'action', 'opt_label', opt_value`]);

# html - 用与文本不同的背景颜色绘制 HTML5 Canvas？

> ID：14586895
> 
> 赞同：2
> 
> 时间：2013-01-29T15:54:49.367
> 
> 标签：html, canvas, html5-canvas, geometry

我正在寻找带有文本的画布圆圈，但是我希望画布背景颜色与圆圈中文本的颜色不同。我下面的代码对背景和文本使用相同的颜色..

```
<canvas id="circlecanvas" width="50" height="50"></canvas>
<script>
    var canvas = document.getElementById("circlecanvas");
    var context = canvas.getContext("2d");
    var centerX = canvas.width / 2;
    var centerY = canvas.height / 2;
    context.arc(centerX, centerY, 25, 0, Math.PI * 2, false);
    context.fillStyle ="#dbbd7a";
    context.fill()
    context.font = 'bold 20pt Calibri';
    context.textAlign = 'center';
    context.fillText('34', centerX, centerY);
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T15:58:45.400

尝试这个：

```
context.arc(centerX, centerY, 25, 0, Math.PI * 2, false);
context.fillStyle ="#dbbd7a";
context.fill()
context.font = 'bold 20pt Calibri';
context.textAlign = 'center';

context.fillStyle ="#ff0000";  // <-- Text colour here
context.fillText('34', centerX, centerY); 
```

所以，基本上，`context.fillStyle`为文本设置。

# python - python2和python3之间的pandas.DataFrame.load/save：pickle协议问题

> ID：14586898
> 
> 赞同：7
> 
> 时间：2013-01-29T15:55:01.363
> 
> 标签：python, pandas

我还没有弄清楚如何使用 pandas DataFrames 在 python 2 和 3 之间进行泡菜加载/保存。我玩过的pickler中有一个“协议”选项没有成功，但我希望有人有一个快速的想法让我尝试。这是获取错误的代码：

python2.7

```
>>> import pandas; from pylab import *
>>> a = pandas.DataFrame(randn(10,10))
>>> a.save('a2')
>>> a = pandas.DataFrame.load('a2')
>>> a = pandas.DataFrame.load('a3')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/site-packages/pandas-0.10.1-py2.7-linux-x86_64.egg/pandas/core/generic.py", line 30, in load
    return com.load(path)
  File "/usr/local/lib/python2.7/site-packages/pandas-0.10.1-py2.7-linux-x86_64.egg/pandas/core/common.py", line 1107, in load
    return pickle.load(f)
ValueError: unsupported pickle protocol: 3 
```

蟒蛇3

```
>>> import pandas; from pylab import *
>>> a = pandas.DataFrame(randn(10,10))
>>> a.save('a3')
>>> a = pandas.DataFrame.load('a3')
>>> a = pandas.DataFrame.load('a2')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python3.3/site-packages/pandas-0.10.1-py3.3-linux-x86_64.egg/pandas/core/generic.py", line 30, in load
    return com.load(path)
  File "/usr/local/lib/python3.3/site-packages/pandas-0.10.1-py3.3-linux-x86_64.egg/pandas/core/common.py", line 1107, in load
    return pickle.load(f)
UnicodeDecodeError: 'ascii' codec can't decode byte 0xf4 in position 0: ordinal not in range(128) 
```

也许期望pickle在python版本之间工作有点乐观？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-01-15T22:55:06.543

我有同样的问题。您可以在 python3 中使用以下函数更改数据帧 pickle 文件的协议：

```
import pickle
def change_pickle_protocol(filepath,protocol=2):
    with open(filepath,'rb') as f:
        obj = pickle.load(f)
    with open(filepath,'wb') as f:
        pickle.dump(obj,f,protocol=protocol) 
```

然后你应该可以在python2中打开它没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-25T09:41:54.313

如果有人使用[`pandas.DataFrame.to_pickle()`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_pickle.html)然后在源代码中进行以下修改以具有pickle协议设置的能力：

**1）**在源文件中`/pandas/io/pickle.py`（修改前将原始文件复制为`/pandas/io/pickle.py.ori`）搜索以下行：

```
def to_pickle(obj, path):

pkl.dump(obj, f, protocol=pkl.HIGHEST_PROTOCOL) 
```

将这些行更改为：

```
def to_pickle(obj, path, protocol=pkl.HIGHEST_PROTOCOL):

pkl.dump(obj, f, protocol=protocol) 
```

**2）**在源文件中`/pandas/core/generic.py`（修改前将原始文件复制为`/pandas/core/generic.py.ori`）搜索以下行：

```
def to_pickle(self, path):

return to_pickle(self, path) 
```

将这些行更改为：

```
def to_pickle(self, path, protocol=None):

return to_pickle(self, path, protocol) 
```

**3）**如果它运行，则重新启动您的python内核，然后使用任何[可用的pickle协议](https://docs.python.org/3.6/library/pickle.html#data-stream-format)（0、1、2、3、4）保存您的数据帧：

```
# Python 2.x can read this
df.to_pickle('my_dataframe.pck', protocol=2)

# protocol will be the highest (4), Python 2.x can not read this
df.to_pickle('my_dataframe.pck') 
```

**4）**熊猫升级后，重复步骤1和2。

**5）（可选）**要求开发人员在正式版本中具有此功能（因为您的代码将在没有这些更改的任何其他 Python 环境中抛出异常）

美好的一天！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-15T08:40:42.383

您可以覆盖可用于泡菜包的最高协议：

```
import pickle as pkl
import pandas as pd
if __name__ == '__main__':
    # this constant is defined in pickle.py in the pickle package:"
    pkl.HIGHEST_PROTOCOL = 2
    # 'foo.pkl' was saved in pickle protocol 4
    df = pd.read_pickle(r"C:\temp\foo.pkl")

    # 'foo_protocol_2' will be saved in pickle protocol 2 
    # and can be read in pandas with Python 2
    df.to_pickle(r"C:\temp\foo_protocol_2.pkl") 
```

这绝对不是一个优雅的解决方案，但它可以在不直接更改 pandas 代码的情况下完成工作。

**更新：**我发现新版本的熊猫，允许在`.to_pickle`函数中指定泡菜版本： [https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_pickle.html[1]](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_pickle.html[1]) `DataFrame.to_pickle(path, compression='infer', protocol=4)`

# css - 如何创建悬停时显示的菜单？

> ID：14586901
> 
> 赞同：1
> 
> 时间：2013-01-29T15:55:12.150
> 
> 标签：css

我有一个我创建的菜单，我希望将鼠标悬停在图像上。我如何编写 css 来创建它？这是我的菜单：

```
<ul id="options" class="optionsMenu">
    <li>A</li>
    <li>B</li>
    <li>C</li>
    <li>D</li>
    <li>E
        <ul>
            <li>E1</li>
            <li>E2</li>
            <li>E3</li>
            <li>E4</li>
        </ul>
    </li>
    <li>F</li>
    <li>G</li>
   </ul> 
```

我希望它保持隐藏状态，仅当我将鼠标悬停在以下图像上时才会出现：

```
<img src='...image.png' alt='Options Menu' id="optionsMenuTree"/> 
```

我想我需要做这样的事情：

```
#options ul.optionsMenu ul{
    display: none;
    visibility: none;
}
#optionsMenuTree:hover > ul {
    display: block;
} 
```

但我无法让它正常工作。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:04:51.280

只要`optionsMenuTree`和`options`是兄弟姐妹，你就不需要javascript并且可以使用

```
#options {
    display: none;
}

#optionsMenuTree:hover ~ #options {
    display: block;
} 
```

查看更新[的 JSFiddle](http://jsfiddle.net/Pr5ee/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T15:59:50.867

**CSS**

```
#options{
    display: none;
}
#optionsMenuTree:hover + #options {
    display: block;
} 
```

检查这个：http: [//jsfiddle.net/AliBassam/S9cdE/](http://jsfiddle.net/AliBassam/S9cdE/)

但是，当您移开图像的鼠标时，列表将再次隐藏，要保留它，我认为您需要使用 Javascript/JQuery。

**jQuery**

```
$("#optionsMenuTree").hover(function(){    
    $("#options").show();
}, function(){
    $("#options").hide();
}); 
```

**Javascript**

```
<img onmouseover="ShowList()" onmouseout="HideList()"/> 
```

然后：

```
function ShowList()
{
    document.getElementById("options").style.display="block";
}
function HideList()
{
    document.getElementById("options").style.display="none";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T16:11:57.230

首先，您必须隐藏子菜单列表项。然后必须在悬停或主链接上显示..

`ul#options ul {display: none;} ul#options ul li:hover > ul { display: block; }`

# ruby-on-rails - Rails - 跳过一次验证

> ID：14586902
> 
> 赞同：1
> 
> 时间：2013-01-29T15:55:12.613
> 
> 标签：ruby-on-rails, validation

我有一个 Rails 程序，我需要跳过一个验证步骤，但就是这样。有没有办法设置验证，以便我可以发送带有 object.valid 的参数？告诉对象跳过一个验证。

这是我到目前为止所拥有的：

模型：

```
validates :event_id, :presence => true, :unless => :skip_event_id 
```

控制器：

```
 if new_lot.valid(:skip_event_id => :true)?

          .
          .
          .
      end 
```

这给了我 .valid 的语法错误。我只是想知道是否有办法使这项工作。谢谢！

注意：我仍然希望我的所有其他验证继续进行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:06:28.170

您需要事先设置该变量，不能检查它是否有效。同样，当使用带有问号的方法时，您需要将问号放在括号之前。

模型：

```
attr_accessor :skip_event_id 
```

控制器：

```
new_lot.skip_event_id = true
if new_lot.valid?
  # some stuff
end 
```

# wordpress - WordPress 网站中的幻灯片问题 (RoyalSlider & Revolution Slider)

> ID：14586906
> 
> 赞同：0
> 
> 时间：2013-01-29T15:55:22.633
> 
> 标签：wordpress, slide

我在我的 WordPress 网站中插入幻灯片时遇到问题。我尝试了两个插件，Revolution Slider 和 RoyalSlider，但是这两个插件的情况相同，它们生成列表来显示幻灯片，但图像没有出现。

网站链接：http: [//ubsitios.info/silviafotos/gallery/asia/](http://ubsitios.info/silviafotos/gallery/asia/) [http://ubsitios.info/silviafotos/gallery/europa/](http://ubsitios.info/silviafotos/gallery/europa/)

可能是什么问题？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:46:30.607

您有阻止滑块工作的 Javascript 错误。一般来说.js 你有；

```
jQuery( ".featured, .post, .widget, .panel" ).fitVids(); 
```

此方法 fitVids() 未定义，因此会引发错误。修复它并从那里获取它，您可以在 Chrome 的开发人员工具或 Firebug 的控制台中查看 JS 错误。

# jquery - 用于嵌套列表项的 JQuery 选择器，如果它不在链接上，则仅计算点击

> ID：14586907
> 
> 赞同：2
> 
> 时间：2013-01-29T15:55:24.040
> 
> 标签：jquery, jquery-selectors

我在列表中嵌入了几个列表。

*   [X] Top List 项目 1
*   *   [X] 内表项 1
*   *   [X] 内部清单项目 2
*   *   *   [X] 内内表项 1
*   *   *   [X] 内内列表项 2
*   *   [X] 内表项 3
*   [X] Top List 项目 2
*   [X] Top List 项目 3

该列表是按程序构建的，因此这只是一个非常基本的示例，实际上它要大得多。[X] 是一个复选框。这些数字是单击时切换内部列表的链接。因此，单击“顶部列表项 1”上的“1”将使内部列表项 1、2 和 3 显示。

该列表的结构如下：

```
<ul>
     <li> Top List item 1
          <ul>
               <li> Inner List item 1</li>
               <li> Inner List item 2
               <ul>
                    <li> Inner Inner List item 1</li>
                    <li> Inner Inner List item 2</li>
               </ul>
               </li>
               <li> Inner List item 3</li>
          </ul>
     </li>
     <li> Top List item 2</li>
     <li> Top List item 3</li>
</ul> 
```

我想要做的是，当有人单击列表项中的链接时，它将切换（显示/隐藏）内部列表项。

但是现在，当我单击“内部内部列表项 1”时，它会检查顶部列表项 1 及其内部的所有内容。此外，当我单击链接以切换内部列表时，它会检查所有复选框。

这是Jquery。

```
$("li:has(a)").click(function() {
    var checkbox = $("input[type=checkbox]", this);
    checkbox.prop('checked', !checkbox.prop("checked"));

    if(checkbox.data('check')) {
        $("#" + checkbox.id + " input[type=checkbox").each(function(){
            this.prop('checked', !checkbox.prop("checked"));
        });
    }
}); 
```

这是我用来切换它的 Jquery：

```
$("#patterns-data a[data-toggleid]").click(function() {
    var toggleid = $(this).data('toggleid');
    $("#" + toggleid).toggle();
}); 
```

所以我需要的是 jquery，它允许用户单击列表项上的任意位置以检查其复选框。如果列表项中有另一个列表，请选中所有这些复选框。如果用户单击链接以切换列表（标签），则不要检查任何内容，只需切换列表即可。

将这两个点击事件结合起来可能是个好主意，但我不确定最好的方法。感谢您的帮助。

编辑：

好的，我正在研究，发现单击事件被多次调用，每个 li 嵌套一次。所以我更改了我的代码以使用 stopPropagation。它现在只选择单击的项目复选框。我仍然需要它来选择单击列表项内的所有列表项复选框。

$("li:has(a)", "#patterns-data").click(function(e) { e.stopPropagation();

```
 var checkbox = $("> input[type=checkbox]", this);
    checkbox.prop('checked', !checkbox.prop("checked"));

    $("> li", this).each(function(){
        var chkbox = $("> input[type=checkbox]", this);
        chkbox.prop('checked', !checkbox.prop("checked"));
    });
}); 
```

它还需要忽略对标签的点击，以便当用户尝试切换列表时复选框不会检查。

这是 JSFiddle 上的代码[http://jsfiddle.net/683Te/](http://jsfiddle.net/683Te/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:02:25.393

如果我做对了你的任务。比你最好设置一个事件监听器，并自己处理它的目标。某种贬义。

```
$("#list").on("click", function(e){
   var target = e.target,
       targetName = target.tagName.toLowerCase();

   // and do everything by it tagname
   // the behavior is in example
}); 
```

并为复选框设置更改侦听器，并在需要时触发它。

例子：

[http://jsfiddle.net/yj8bv/](http://jsfiddle.net/yj8bv/) 里面的所有评论。

# c# - 单例中的静态/易失性

> ID：14586909
> 
> 赞同：5
> 
> 时间：2013-01-29T15:55:27.883
> 
> 标签：c#

`System.Timers.Timer`成为单例的成员有意义`volatile static`吗？

如果我在单例实例上下文中进行`_fooTimer` `static`and or会有什么不同吗？`volatile`

如果我不做会有什么不同`_instance` `static`吗？

EDIT2：我更正了代码示例，现在使它变得更好单例，没有不必要的静态或易失性字段，并更改为 Interlock.Increment

```
public sealed class Foo
{
   private static readonly object _syncRoot;

   private int _counter; 

   private Timer _fooTimer;

   private static Foo _instance;

   private Foo()
   {
       _counter = 0;
       _syncRoot = new object();
       _fooTimer = new new Timer();
       _fooTimer.Intervall = 3600000;
       _fooTimer.Elapsed += new ElapsedEventHandler(LogFoo);
   }

   public static Foo Instance
   {
        get
        {
            lock(_syncRoot)
            {
                 if (_instance == null)
                 {
                      _instance = new Foo();
                 }
            }
            return _instance;
        }
    }

    private void LogFoo()
    {
         // write a logfile with _counter - then restart timer and set _counter to 0
    }

    public void Increment()
    {
         Interlocked.Increment(_counter);
    }
}

public class UseTheFoo
{         
     // Foo.Instance.Increment()         

     ...
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T15:58:28.283

通常，单例类中*唯一*的静态变量是对单个实例的引用。然后，您将对类型的剩余状态使用*实例*变量。如果您将其设为静态，那么您甚至不需要创建该类的*单个*实例来使用计时器 - 但我*希望*您无论如何都希望这样做。

我也会对使用感到紧张`volatile`......它几乎肯定并不完全意味着你认为它的意思。我可能会改用它[`Interlocked`](http://msdn.microsoft.com/en-us/library/5kczs5b5.aspx)来实现对变量的原子更新。

[（请注意，根据我关于该主题的文章](http://csharpindepth.com/Articles/General/Singleton.aspx)，有很多更好的方法来实现它。）

编辑：现在代码已更改为显示更多成员，这有点令人困惑。有一个*静态*方法可以使用`_counter`（一个实例变量）——大概是通过单例实例。基本上，该类似乎还没有决定是要成为一堆静态方法还是单例实例。我建议您决定并以一种或另一种方式访问*​​所有内容*，但不要混合使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:00:26.070

通过将整个类设为静态，您可以将创建实例期间的任何线程同步问题推送到 CLR：

```
public static class Foo
{
  private static Timer _fooTimer;

  static Foo()
  {
     _fooTimer = new Timer();
  }
} 
```

# c# - 部署预配置的 SQLite 数据库

> ID：14586911
> 
> 赞同：0
> 
> 时间：2013-01-29T15:55:30.667
> 
> 标签：c#, .net, database, sqlite

我们正在尝试将一些非常基本的用户管理功能与我们的软件一起部署。我们将有几个不超过一千行的表 ( `Users`, `Groups`, )。`Rights`数据库将预先配置某些权限，但组和用户将由最终用户使用我们的 GUI 创建。

我的问题是这样的：

*   如何在部署时为此数据库设置“默认值”？
*   我该如何保护这个数据库？（它将是一个离线数据库，因此永远不会 100% 安全，但我更愿意至少在上面输入密码。）
*   我可以将数据库文件设置为“嵌入式资源”，以便它们对 Windows 资源管理器和外行隐藏吗？
*   我应该使用 SQLite Visual Studio Designer 工具来做这件事的任何部分吗？还是我应该将其全部保存在代码中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:18:36.637

对于您的问题，我认为这是我对某些观点的回答：

*   默认值：您是指存储在表中的默认设置吗？您可以拥有一个 default.sql 文件并在安装期间导入该文件。
*   安全性：与 SQLite 出自同一作者的 Fossil-scm 以某种方式处理此问题。Fossil 生成一个项目 ID，一个唯一的长数字，并将此 ID 用作密码 SHA-1 生成的盐。( [Fossil-scm 密码管理](http://www.fossil-scm.org/index.html/doc/trunk/www/password.wiki)) 但是，如果您需要更高的安全级别，这仍然是不够的。
*   嵌入式：就个人而言，我不这么认为。嵌入式资源被编译成程序集文件，因此它在程序集中被赋予了一个固定的偏移量。我不认为它可以重新调整大小。
*   设计工具：我觉得可以，代码也可以。

# mysql - 为什么带有 FORMAT 的 MySQL 会忽略 ORDER？

> ID：14586912
> 
> 赞同：1
> 
> 时间：2013-01-29T15:55:31.887
> 
> 标签：mysql

第一个 MySQL 查询工作正常，但是，它的格式不像钱，而且只有美元。第二个格式正确，但它忽略了 ORDER 并使 average_sales 不在 ORDER 中。使用 CONCACT 和 FORMAT 会不会导致问题？谢谢！

第一个，ORDER 是正确的：

```
select Region,AVG(sales) as 'Average_Sales_by_Region', count(*) as '# of Dist in state'
from dist, Regions_US
where dist.state=Regions_US.State
group by Region
ORDER BY Average_Sales_by_Region DESC;

+--------------------+-------------------------------+-------------------------+
| Region             | Average_Sales_by_Region       | # of Dist in state      |
+--------------------+-------------------------------+-------------------------+
| Mountain           |                    20216.2162 |                      74 |
| West North Central |                    18267.5000 |                      40 |
| South Atlantic     |                    16225.2809 |                     178 |
| East South Central |                    14966.6667 |                      30 |
| West South Central |                    13704.3840 |                     125 |
| East North Central |                    12668.3544 |                      79 |
| New England        |                    11915.6250 |                      32 |
| Pacific            |                    11552.8083 |                     120 |
| Middle Atlantic    |                    10291.6031 |                     131 |
| Alaska-Hawaii      |                     8150.0000 |                       4 |
+--------------------+-------------------------------+-------------------------+ 
```

但是我被要求更改它，以便 Average_Sales_by_Region 显示没有美分的美元金额。所以 20216.2162 的最高数字需要是 20,216 美元。

所以我的第二个虽然正确格式化了钱，但它忽略了订单：

```
select Region,CONCAT('$', FORMAT(AVG(sales), 0)) as 'Average_Sales_by_Region', count(*) as '# of Dist in state'
from dist, Regions_US
where dist.state=Regions_US.State
group by Region
ORDER BY Average_Sales_by_Region DESC;

+--------------------+-------------------------------+-------------------------+
| Region             | Average_Sales_by_Region       | # of Dist in state      |
+--------------------+-------------------------------+-------------------------+
| Alaska-Hawaii      | $8,150                        |                       4 |
| Mountain           | $20,216                       |                      74 |
| West North Central | $18,268                       |                      40 |
| South Atlantic     | $16,225                       |                     178 |
| East South Central | $14,967                       |                      30 |
| West South Central | $13,704                       |                     125 |
| East North Central | $12,668                       |                      79 |
| New England        | $11,916                       |                      32 |
| Pacific            | $11,553                       |                     120 |
| Middle Atlantic    | $10,292                       |                     131 |
+--------------------+-------------------------------+-------------------------+ 
```

我被困在这里，我不知道为什么 ORDER BY Average_Sales_by_Region DESC 在第一个中有效，但在第二个中无效。唯一的区别是使用 CONCAT('$', FORMAT(AVG(sales), 0)) 代替 AVG(sales)。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:00:55.253

尝试使用此查询

```
select Region,CONCAT('$', FORMAT(AVG(sales), 0)) as 'Average_Sales_by_Region', count(*) as '# of Dist in state'
from dist, Regions_US
where dist.state=Regions_US.State
group by Region ORDER BY AVG(sales) DESC 
```

这样您就可以像第一个查询一样订购，但会像第二个查询一样显示结果

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:01:27.490

您仍然可以按未格式化的平均销售额订购。

```
select Region,CONCAT('$', FORMAT(AVG(sales), 0)) as 'Average_Sales_by_Region', count(*) as '# of Dist in state'
from dist, Regions_US
where dist.state=Regions_US.State
group by Region
ORDER BY AVG(sales) DESC; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:02:22.017

它不会忽略您的`ORDER BY`因为`FORMAT()`将数字转换为字符串。所以你看到的是`ORDER BY`基于字符串的格式。

所以你应该做的是基于非格式化值的顺序。我建议这样做：

```
select Region, AVG(sales) as 'Average_Sales_by_Region_NUMERICAL', CONCAT('$', FORMAT(Average_Sales_by_Region_NUMERICAL, 0)) as 'Average_Sales_by_Region', count(*) as '# of Dist in state'
from dist, Regions_US
where dist.state=Regions_US.State
group by Region
ORDER BY Average_Sales_by_Region_NUMERICAL DESC; 
```

那应该行得通。并且不会导致`AVG(sales)`运行两次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T16:05:11.500

尝试这个

```
 select Region,CONCAT('$', FORMAT(AVG(sales), 0)) as 'Average_Sales_by_Region',count(*) as '# of Dist in state'
   from dist, Regions_US
   where dist.state=Regions_US.State
   group by Region
   ORDER BY FORMAT(AVG(sales),0) DESC; 
```

# javascript - 谷歌地图 - 来自用户地理位置的方向

> ID：14586916
> 
> 赞同：6
> 
> 时间：2013-01-29T15:55:46.610
> 
> 标签：javascript, google-maps-api-3, geolocation

我有以下功能可以检查浏览器是否支持地理位置，然后获取用户的地理位置并将其放在地图上。

我需要添加什么才能让我从用户的地理位置向用户提供指向固定位置（这不会改变）的方向？

```
if (navigator.geolocation)
{
  navigator.geolocation.getCurrentPosition(function(position)
  {                                                              
    var latitude = position.coords.latitude;                    
    var longitude = position.coords.longitude;                 
    var coords = new google.maps.LatLng(latitude, longitude);
    var directionsDisplay;
    var directionsService = new google.maps.DirectionsService();
    var mapOptions = 
    {
      zoom: 15,  
      center: coords, 
      mapTypeControl: true, 
      navigationControlOptions:
      {
        style: google.maps.NavigationControlStyle.SMALL
      },
       mapTypeId: google.maps.MapTypeId.ROADMAP
    };
     map = new google.maps.Map(document.getElementById("mapContainer"), mapOptions);
     var marker = new google.maps.Marker( 
       {
         position: coords, 
         map: map,                 
        });
   });
}
else
{
   alert("Geolocation API is not supported in your browser."); 
```

我已将此功能添加到我的代码中：

```
 function calcRoute() {
    var start = position;
    var end = "London";
    var request = {
      origin: start,
      destination: end,
      travelMode: google.maps.TravelMode.DRIVING
    };
    directionsService.route(request, function (result, status) {
      if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(result);
      }
    });
  } 
```

HTML： `<div id="mapContainer" onload="calcRoute()"></div>`

但它似乎仍然没有工作。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-02T15:54:45.547

让它使用以下代码：

```
if (navigator.geolocation) { //Checks if browser supports geolocation
   navigator.geolocation.getCurrentPosition(function (position) {                                                              //This gets the
     var latitude = position.coords.latitude;                    //users current
     var longitude = position.coords.longitude;                 //location
     var coords = new google.maps.LatLng(latitude, longitude); //Creates variable for map coordinates
     var directionsService = new google.maps.DirectionsService();
     var directionsDisplay = new google.maps.DirectionsRenderer();
     var mapOptions = //Sets map options
     {
       zoom: 15,  //Sets zoom level (0-21)
       center: coords, //zoom in on users location
       mapTypeControl: true, //allows you to select map type eg. map or satellite
       navigationControlOptions:
       {
         style: google.maps.NavigationControlStyle.SMALL //sets map controls size eg. zoom
       },
       mapTypeId: google.maps.MapTypeId.ROADMAP //sets type of map Options:ROADMAP, SATELLITE, HYBRID, TERRIAN
     };
     map = new google.maps.Map( /*creates Map variable*/ document.getElementById("map"), mapOptions /*Creates a new map using the passed optional parameters in the mapOptions parameter.*/);
     directionsDisplay.setMap(map);
     directionsDisplay.setPanel(document.getElementById('panel'));
     var request = {
       origin: coords,
       destination: 'BT42 1FL',
       travelMode: google.maps.DirectionsTravelMode.DRIVING
     };

     directionsService.route(request, function (response, status) {
       if (status == google.maps.DirectionsStatus.OK) {
         directionsDisplay.setDirections(response);
       }
     });
   });
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:50:20.517

获得 后`position`，使用方向服务在地图上呈现方向。

您可以在此处找到示例代码 - [https://developers.google.com/maps/documentation/javascript/directions#DisplayingResults](https://developers.google.com/maps/documentation/javascript/directions#DisplayingResults)

# lua - 尝试在 Lua 中使用 MOAICoroutine 索引本地“自我”

> ID：14586920
> 
> 赞同：2
> 
> 时间：2013-01-29T15:56:05.760
> 
> 标签：lua, coroutine, moai

我刚从 MOAI 开始，我正在尝试使用 MOAICoroutine 创建一个传统的游戏循环。问题是，当我将作为使用 30log 构建的“类”的一部分的函数传递给它时，它会返回错误。它似乎继续起作用，但我想修复错误。我的猜测是 MOAICoroutine 使用点符号调用函数，而不是使用冒号的语法糖方法。这是代码：

```
class = require "30log.30log"
GameSystem = class ()

function GameSystem:__init(Name, Title)
  self.Name = Name
  self.Title = Title
  self.Ready = false
end

function GameSystem:Run()
  if self:Init() then
    self.Thread = MOAICoroutine.new ()
    self.Thread:run(self.Start)
    --self:Start()
    return true
  else
    print("Init failed.")
    return false    
  end
end

function GameSystem:Init()
  print("Initializing Game System")
  if not self:InitTimer() then return false end
  if not self:InitWindow(640,480) then return false end
  if not self:InitViewport() then return false end
  if not self:InitGraphics() then return false end
  if not self:InitSound() then return false end
  if not self:InitInput() then return false end
  self.Ready = true
  return true
end

function GameSystem:Start()
  print("Starting Game System")
  while self.Ready do
    self:UpdateTimer()
    self:UpdateGraphics()
    self:UpdateSound()
    self:UpdateInput()
    coroutine.yield()
  end
end

function GameSystem:InitTimer()
  return true
end

function GameSystem:InitWindow(width, height)
  print("Initializing Window")

  return true
end

function GameSystem:InitViewport()
  print("Initializing Viewport")

  return true
end

function GameSystem:InitGraphics()
  print("Initializing Graphics")
  return true
end

function GameSystem:InitSound()
  print("Initializing Sound")
  return true
end

function GameSystem:InitInput()
    print("Initializing Input")
  return true
end

function GameSystem:UpdateTimer()
    --print("Updating Timer")
  return true
end

function GameSystem:UpdateGraphics()
  --print("Updating Graphics")
  return true
end

function GameSystem:UpdateSound()
    --print("Updating Sound")
  return true
end

function GameSystem:UpdateInput()
  --print("Updating Input")
  return true
end 
```

30log 类代码是否会导致此问题？我尝试过各种各样的事情。我很确定它试图访问的 self 是第一个参数，即 mytable.myfunction(self, myarg)。修复此零值参考的任何想法。错误实际上发生在 Start 函数内的第二行（而 self.Ready 做）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:20:07.790

> ```
>  function GameSystem:Run()
>     if self:Init() then
>       self.Thread = MOAICoroutine.new ()
>       self.Thread:run(self.Start) 
> ```
> 
> 我的猜测是 MOAICoroutine 使用点符号调用函数，而不是使用冒号的语法糖方法。

如何使用点表示法（或冒号表示法）调用函数？句号或冒号的左侧是什么？你没有传递给它一个对象，只有一个函数。它的调用者将该函数存储在表中的事实对于它来说是完全未知的。它只是接收一个函数，然后调用它。

如果您希望您的协程以方法调用开始，请在传递给 coroutine.start 的函数中执行此操作：

```
self.Thread = MOAICoroutine.new ()
self.Thread:run(function() self:Start() end) 
```

* * *

重点是：

```
function GameSystem:Start()
end 
```

完全等同于：

```
function GameSystem.Start(self)
end 
```

完全等同于：

```
GameSystem.Start = function(self)
end 
```

相当于：

```
function Foobar(self)
end

GameSystem.Start = Foobar 
```

如果我打电话：

```
print(Foobar)
print(GameSystem.Start)
print(someGameSystemInstance.Start) 
```

`print`接收相同的值。在 Lua 中，一个函数就是一个函数，它不会以某种方式被存储在一个表中而被“污染”，这样引用该函数的第三方就可以知道你希望它作为一个方法被调用到一些特定的'类实例。

# python - 在二维中应用窗口函数

> ID：14586921
> 
> 赞同：1
> 
> 时间：2013-01-29T15:56:45.393
> 
> 标签：python, math, signal-processing

我创建了一个简单的正弦钟变迹函数，在执行 2D FFT 并制作结果的等高线图之前将其应用于我的数据，如下所示。

```
P = 90
apd_fn = np.sin(((np.pi - (np.pi/180.0) * P) / 1024) * np.arange(0, 1024, 1) + (np.pi/180.0) * P)**2

fid_mat = ws_list * apd_fn
jres_spec = abs(fftshift(fft2(fid_mat)))
max_val = (jres_spec[:,400:]).max()
figure()
CS=contour(jres_spec,arange(0,max_val,max_val/30))
xlabel('frequency (ppm)') 
show() 
```

在 x 维度上开窗后，这会生成一个 2D 光谱图像，如下所示： ![在此处输入图像描述](../Images/8cac58082090630ff7d82fb3adbc713c.png)

我现在想在 y 维度上应用相同的过滤器，但我有一点心理障碍，很难弄清楚如何实现它。您能提供的任何帮助将不胜感激。

谢谢。

# php - db 中没有条目会在表单中抛出错误

> ID：14586922
> 
> 赞同：0
> 
> 时间：2013-01-29T15:56:25.860
> 
> 标签：php, symfony, symfony-forms

我在控制器中有以下代码：

```
$form = $this->createFormBuilder()
                ->add('email', 'email', array(
                    'constraints' => array(new MaxLength(array('limit' => 255, 'message' => 'email.maxlength'))),
                    'required' => true,
                    'attr' => array('oninvalid' => "setCustomValidity('" . $this->get('translator')->trans('email.oninvalid', array(), 'validators') . "')",
                        'placeholder' => $this->get('translator')->trans('email.placeholder', array(), 'validators'),)
                ))
                ->getForm();
if ($request->getMethod() == 'POST') {
        $form->bindRequest($request);
        $formData = $form->getData();

        if ($form->isValid()) {
        $formData->getEmail();
                $em = $this->getDoctrine()->getManager();
                $rep = $em->getRepository('FrontendAccountBundle:User');
                $q = $rep->createQueryBuilder('u')
                        ->join('u.state', 's')
                        ->where('u.email = :email')
                        ->andWhere('s.id = :sid')
                        ->setParameters(array('email' => $email))
                        ->getQuery();

                try {
                    $user = $q->getSingleResult();
                } catch (\Doctrine\Orm\NoResultException $e) {
                    //return $this->redirect($this->generateUrl('frontend_account_unknown_email'));
                }
} 
return $this->render('FrontendAccountBundle::send_new_activation_link.html.php', array(
                'form' => $form->createView()
            )); 
```

有没有办法以数据库中未知电子邮件地址的形式抛出错误，而不是创建新操作？

还是我错过了文档中的某些内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:00:33.153

如果你想***抛出一个错误***，那么要么一开始就不要捕获它，要么捕获所有异常并只重新抛出你想要的异常。

如果要向表单添加错误，可以创建一个[FormError](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Form/FormError.php)并将其添加到表单中：

```
use Symfony\Component\Form\FormError;

...

catch (\Doctrine\Orm\NoResultException $e) {
    $form->addError(new FormError('the e-mail was not found'));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:07:26.777

对于那些想要查看完整代码的人。

```
$form->addError(new FormError('the e-mail was not found'));

$templating = $this->container->get('templating');

$response = new Response($templating->render('FrontendAccountBundle::send_new_activation_link.html.php', array(
                         'form' => $form->createView()
                         )));
$response->send(); 
```

# excel - 如何将数据从 Excel 电子表格传输到没有列标题的平面文件？

> ID：14586925
> 
> 赞同：1
> 
> 时间：2013-01-29T15:56:11.190
> 
> 标签：excel, ssis, flat-file

在 SSIS 中获得了一个简单的数据流，其中包含 excel 源和平面文件目标。excel 中的标题位于第一行，而在 SSIS 中，我在 excel 连接管理器中勾选了“第一行有标题”。

在我的平面文件中，数据正在加载，所有数据看起来都正确，除了来自 excel 的标题。

当我设置我的平面文件连接管理器 (ffcm) 时，它使用的是逗号分隔的列设置

签入 ffcm 中的列，所有列都在那里。

几次运行后，我注意到我没有在平面文件连接管理器中勾选“第一个数据行中的列名”。现在我已经这样做了，我有一个错误

> TITLE：包验证错误
> 
> 附加信息：
> 
> 数据流任务 [DTS.Pipeline] 出错：“组件“平面文件目标”(487)”失败 > 验证并返回验证状态“VS_NEEDSNEWMETADATA”。
> 
> 数据流任务 [DTS.Pipeline] 出错：一个或多个组件验证失败。
> 
> 数据流任务出错：任务验证期间出现错误。
> 
> (Microsoft.DataTransformationServices.VsIntegration)

所以再次取消勾选，但没有任何区别。

检查了 ffcm 中的列，它们现在设置为 column0、column1、column2....等。

此外，当我运行它时，它会在 excel 表中的行中显示多行逗号：

> ,,,,,,,,,,,,
> ,,,,,,,,,,,,
> ,,,,,,,,,,,,
> ,,,,,,,,,,,,,

我似乎陷入了困境，需要一些更好的建议来了解问题所在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:34:39.983

自上次配置值以来，您似乎丢失了`Excel Source`和之间的字段映射。`Flat File Destination`

取消选中并选中平面文件连接管理器上的框`Column names in the first data row`已重命名平面文件目标的实际列名。这些新列现在应该重新映射到`Flat File Destination`组件上。

![执行过程中出错](../Images/36c16a3ad881f7b41b4ec7aa3c77d0f2.png)

如果您注意到平面文件目标上的警告标志，请双击平面文件目标。您将收到一条类似于下图所示的消息。

![重新映射列的警告](../Images/35daf3f353c7e200c62e24c934b9c33c.png)

在平面文件目标上，`Map the column on the Mappings page`如果字段映射丢失，您会注意到警告消息。

![平面文件目标](../Images/a1aee6164703c619c9db6cf283d4c5ea.png)

在 Flat File Destination 上，您会注意到字段映射已丢失，您需要单击**Mappings**页面来配置源和目标之间的字段映射。

我相信这是您面临的问题。

![映射页面](../Images/96e34517422384e50e554458afb67a83.png)

# java - Coldfusion jrpp threadID，更高的数字意味着什么吗？

> ID：14586926
> 
> 赞同：0
> 
> 时间：2013-01-29T15:56:13.210
> 
> 标签：java, multithreading, coldfusion, coldfusion-9, connection-timeout

我对CF中的线程了解不多。我正在尝试解决 CF9、Windows Server 2008 中的问题。页面请求开始超时，因此我们将重新启动服务器。我一直在查看日志，并注意到在故障期间 threadID 将在 1000-1250 之间。重启CF服务后，threadID在100以下。

threadID 很高这一事实是否意味着什么？

# android - Phonegap cordova android'项目已存在'或运行时错误

> ID：14586931
> 
> 赞同：12
> 
> 时间：2013-01-29T15:56:28.600
> 
> 标签：android, cordova, path

我在这里发帖是因为这让我发疯。

我正在尝试让 phonegap 正常工作：我安装了 ADT 包（eclipse+adt 插件 + android SDK）-> 顺便说一下，他们真的应该更新 phonegap 入门教程，它仍然告诉你单独安装所有这些但是而不是 android SDK，它为您提供了 ADT 捆绑包的链接......

无论如何，我已经设置了我的环境变量，所以我可以输入 java、javac、android、ant 或任何一切都很好的东西。

现在，当我使用 cmd（我在 Windows 上）进入我的 cordova-android/bin 文件夹并输入“创建”d：/dev/android/phonegaptest““phonegaptest”“phonegaptest”时它告诉我“项目已经存在” . 而目标文件夹只是一个空文件夹。

相反，如果我输入“创建“d:/dev/android/任何尚不存在的文件夹名称”“phonegaptest”“phonegaptest”，它会告诉我“cordova-android\bin\create.js 181,5 MS JScript 运行时错误路径未找到'

我怎样才能让它工作？非常感谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T16:21:08.770

好，我知道了

显然**你必须把 com.something 作为包名**，否则会出现 JS 错误。这对于 Java 开发人员来说似乎很明显，但许多对包一无所知的 Web 开发人员都在使用 PhoneGap。所以应该指定它，再次感谢这个写得不好的文档。该错误没有告诉您有关包名称问题的任何信息，因此它也无济于事。

另一件事：**如果文件夹已经存在，它会告诉你“项目已经存在”**，所以不要手动创建文件夹。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-01T07:13:57.800

我遇到了同样的问题。确保不存在的文件夹已经存在。

D:\phonegap-2.3.0\lib\android\bin>create D:\myprojects\ com.thinkcode Fone2 Microsoft (R) Windows Script Host Version 5.8 版权所有 (C) Microsoft Corporation。版权所有。

项目已经存在！

D:\phonegap-2.3.0\lib\android\bin>create D:\myprojects\Fone com.thinkcode Fone2 Microsoft (R) Windows Script Host Version 5.8 版权所有 (C) Microsoft Corporation。版权所有。

创建新的android项目...复制模板文件...复制js、jar和config.xml文件...复制cordova命令工具...更新AndroidManifest.xml和Main Activity...

D:\phonegap-2.3.0\lib\android\bin>

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-31T09:22:09.217

确保项目路径不包含空格

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-08T02:19:06.250

还不能投票，但对我来说，这是项目路径中的空间问题！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-27T10:47:27.527

在命令提示符中：定位到 phonegap 文件夹

```
E:\phonegap.2.3.0\lib\android\bin>create E:\<name>hrms com.hrms hrms <enter>
Microsoft (R) Windows Script Host Version 5.8
Copyright (C) Microsoft Corporation. All rights reserved.

Creating new android project...
Copying template files...
Copying js, jar & config.xml files...
Copying cordova command tools...
Updating AndroidManifest.xml and Main Activity...

created successfully 
```

如果项目已经存在意味着更改项目名称或包或项目位置`<folder directory>`。

```
cd E:\hrms
cmd3>E:\hrms>dir

Microsoft (R) Windows Script Host Version 5.8
Copyright (C) Microsoft Corporation. All rights reserved.

Creating new android project...
Copying template files...
Copying js, jar & config.xml files...
Copying cordova command tools...
Updating AndroidManifest.xml and Main Activity... 
```

# android - 在与 sql server 的 Android 连接中找不到类“javax.sql.XAConnection”

> ID：14586935
> 
> 赞同：3
> 
> 时间：2013-01-29T15:56:36.290
> 
> 标签：android, sql-server

我尝试在 android app 和 sql server 之间创建连接。我的主要活动是：

```
Connect cn = new Connect();
String connectionUrl = "jdbc:sqlserver://localhost:1433;" +"databaseName=UNIVERSITY;";
cn.dbConnect(connectionUrl,"",""); 
```

Connect 类是：

```
import java.sql.*;
import android.util.Log;
import javax.sql.*;

public class Connect {

 public Connect() {}

    public boolean dbConnect(String db_connect_string,String db_userid, String db_password)
    {
        try
        {
            Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
            Connection conn = DriverManager.getConnection(db_connect_string, db_userid, db_password);
            return true;

        }
        catch (Exception e)
        {
            e.printStackTrace();
            return false;
        }
    }
} 
```

我还添加了 sqljdbc.jar 文件。但我在 logcat 中看到：

```
01-30 19:04:22.747: E/dalvikvm(1618): Could not find class 'javax.sql.XAConnection', referenced from method com.microsoft.sqlserver.jdbc.SQLServerConnection.close
01-30 19:04:22.747: W/dalvikvm(1618): VFY: unable to resolve instanceof 235 (Ljavax/sql/XAConnection;) in Lcom/microsoft/sqlserver/jdbc/SQLServerConnection;
01-30 19:04:22.757: D/dalvikvm(1618): VFY: replacing opcode 0x20 at 0x0037 
```

我谷歌了很多，但没有找到这个错误的原因。请帮助。

# javascript - 在 JavaScript 中访问请求参数

> ID：14586939
> 
> 赞同：0
> 
> 时间：2013-01-29T15:57:13.777
> 
> 标签：javascript, spring, jsp, request

如何在单独的 JavaScript 文件中访问从 Spring Controller 发送的对象/参数？我能够在 JSP 文件中获取参数，但不能在作为单独的*** .js 文件包含在 JSP 中的 JS 文件中。

环境：Tomcat、Spring、JSP、JS

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:06:12.890

您不能直接在 Javascript 中获取参数，只能在 JSP 中。这是因为 Javascript 在客户端执行，而 JSP 在服务器端执行。

但是，您可以做的是让您的 JSP 在 JS 变量中输出请求参数的值。

例如在您的 JSP 文件中：

```
<script type="text/Javascript">

var properties = { }
properties.myParam = <%= request.getParameter("myParam") %>;

</script> 
```

然后你可以在你的 JS 的其他地方访问这些 JS 对象。

我不确定这是否会编译它只是给你一个粗略的想法。

# windows-runtime - 从辅助装配部署支持文件

> ID：14586945
> 
> 赞同：2
> 
> 时间：2013-01-29T15:57:30.977
> 
> 标签：windows-runtime

我正在将使用 MVVMCross 编写的电话应用程序移植到 Windows RT。该应用程序使用 SQLite 并且在部署时有一个不为空的数据库，因此我希望它被打包在安装文件夹中，并在应用程序启动时复制到 LacalFolder。

该数据库确实属于手机和 WinRT 之间共享的“核心”程序集，但如果我将文件放在核心项目中（在名为 Data 的自定义目录中），将其定义为 Content 并设置 Copy Always 标志文件不会被复制到应用程序安装文件夹。

如果我将文件放在 UI 项目下的目录中，则文件将按预期复制。有什么建议可以避免为同一资源保留两个文件（以及这将导致的麻烦）？

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:55:04.900

默认情况下，Windows 8 WinRT 项目使用对文件进行松散打包的 Content 类型（它们不包含在程序集中）。如果您的核心程序集是作为项目的解决方案的一部分 - VS 将正确打包它，将所有内容复制到 appx 的“核心”子文件夹。如果您只是在解决方案中引用了 dll 文件 - 将不会打包资源文件。这种情况下的解决方案是做一些事情来让这些附加文件与 dll 一起部署。[一种选择是将 dll 与 Tim Heuer博客文章](http://timheuer.com/blog/archive/2012/03/07/creating-custom-controls-for-metro-style-apps.aspx)中描述的资产一起打包为 .vsix. 另一种是做你所做的并将文件放入应用程序项目中。您可以将文件添加到应用程序项目“作为链接”以避免拥有文件的副本 - 它使 Visual Studio 为文件创建一种逻辑/符号链接而不是创建副本 - 只需右键单击文件夹中的文件夹解决方案资源管理器/应用程序项目，选择“添加/现有项目”，浏览到文件，而不是点击“添加”按钮 - 使用按钮上的下拉三角形选择“添加为链接”。

# c# - 如何使用 C# 访问其他应用程序中的对象？

> ID：14586946
> 
> 赞同：0
> 
> 时间：2013-01-29T15:57:01.950
> 
> 标签：c#

我想以与自动化工具在其“UI Map”功能中访问它们的方式类似的方式访问对象及其属性。我假设有一个程序集引用可以访问正在运行的进程以及该进程存在的任何对象。

具体来说，我需要在另一个正在运行的应用程序中访问一些标签控件文本属性。

另外，很抱歉，如果这是重复的 - 我环顾四周，但我不确定哪些关键字可以让我得到我需要的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:05:45.593

这不是 C# 中的常见做法。您正在寻找的术语是“窥探”另一个窗口/应用程序/进程。StackOverflow 中有几个资源在这里讨论这个问题。例如：

[如何在我的 C# 应用程序中获得类似于 Spy++ 的功能？](https://stackoverflow.com/questions/1967604/how-can-i-get-functionality-similar-to-spy-in-my-c-sharp-app)

要访问另一个 Win32 窗体中的控件，您需要查找该元素的句柄。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:05:00.960

对于 WPF 应用程序，.NET 4.5 中的 UI 自动化库使这种方式更简单：http: [//msdn.microsoft.com/en-us/library/ms747327.aspx](http://msdn.microsoft.com/en-us/library/ms747327.aspx)

对于较旧的 winforms 应用程序，您必须实际使用 User32 API 上的 pInvoke。皮特在对您的问题的评论中给您的示例链接将帮助您朝着这个方向前进：[http ://www.pinvoke.net/default.aspx/user32.enumwindows](http://www.pinvoke.net/default.aspx/user32.enumwindows)

# php - 如何正确使用 htmlspecialchars()？

> ID：14586949
> 
> 赞同：-2
> 
> 时间：2013-01-29T15:57:36.430
> 
> 标签：php, web

我会做类似的事情吗

```
mysqli_real_escape_string($dbc, htmlspecialchars(trim($_POST['example'])));? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:01:01.827

htmlspecialchars 函数用于对 HTML 语言中具有特殊含义的字符进行编码。因此，这个函数和mysql之间没有直接的联系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:03:21.853

`htmlspecialchars`将HTML 字符（如`<`和）分别`>`转换为“实体”`&lt;`和`&gt;`。

它的用途是让浏览器不解析 HTML 标签，它们只是按字面意思显示在页面上。

在插入数据库之前是否要使用它取决于您要对数据执行的操作。

# php - 如何将 cardCode 值传递给托管 CIM 弹出表单的 createCustomerProfileTransactionRequest

> ID：14586952
> 
> 赞同：0
> 
> 时间：2013-01-29T15:57:41.470
> 
> 标签：php, xml, authorize.net, authorize.net-cim

所以我使用 Authorize.net 上的托管 CIM 来存储客户信息，他们不存储 CCV 卡代码。

如何获取 cardCode（通过 CIM 托管弹出表单输入）以便处理 createCustomerProfileTransactionRequest？

我没有要求提供 CCV 代码，但与需要该代码的银行的交易失败。

我正在使用托管 CIM，我使用以下代码查询客户 ID 并获取付款资料信息：

```
$xml->createCustomerProfileTransactionRequest(array(
        'transaction' => array(
        'profileTransAuthCapture' => array(
            'amount' => $amount_,
            'customerProfileId' => $profile_id,
            'customerPaymentProfileId' => $paymentProfileID,
            'customerShippingAddressId' => $customerShippingAddressId,
            'order' => array(
            'invoiceNumber' => $invNo,
            'description' => 'Subscription'/*,
            'purchaseOrderNumber' => 'PO1'*/
            ),
            'taxExempt' => 'false',
            'recurringBilling' => 'false',
            'cardCode' => '000'
        )
        ),
    )); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T16:32:58.640

这是通过删除 cardCode 字段解决的：

'cardCode' => '000'

它传递了不正确的值：'000' 导致交易失败并出现 cardCode 不匹配错误。

# javascript - Jquery Click 触发另一个 Div - 简单

> ID：14586963
> 
> 赞同：0
> 
> 时间：2013-01-29T15:58:26.530
> 
> 标签：javascript, jquery, wordpress

我认为这可能是一个非常简单的问题，我想我已经盯着这个问题很久了。

基本上，我怎样才能在一个 div 上获得这个“点击”事件来触发另一个 div 移动。

```
$(".button").click(function () {
  $(.green).toggle("slide", { direction: "left" }, 1000);
}); 
```

我知道它是这样工作的

```
$(".button").click(function () {
  $(this).toggle("slide", { direction: "left" }, 1000);
}); 
```

但我不希望 .button 滑动，我希望 .green 在单击 .button 时滑动。

说得通？

[http://jsfiddle.net/Hdern/3/](http://jsfiddle.net/Hdern/3/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T16:01:22.497

这个：

```
$(.green) 
```

应该 ：

```
$('.green') 
```

要按类（或除变量外的任何其他元素）引用元素，请传递带引号的字符串。

[**小提琴**](http://jsfiddle.net/Hdern/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:01:41.087

你忘了引号：

```
$(".button").click(function () {
  $('.green').toggle("slide", { direction: "left" }, 1000);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:02:20.540

```
$(".button").click(function () {
  $(".green").toggle("slide", { direction: "left" }, 1000);//Missing quotes
}); 
```

# asp.net-mvc - 添加到使用 Kendo for ASP.Net 创建的本地网格数据源

> ID：14586964
> 
> 赞同：0
> 
> 时间：2013-01-29T15:58:29.723
> 
> 标签：asp.net-mvc, kendo-ui

添加记录时，我发现与 Kendo for ASP.Net Grid 控件的奇怪交互。

您不能使用 C# 绑定创建真正的本地数据源 - 相反，已发布的建议是使用 ServerOperations 设置为 false 的 Ajax 数据源。

我可以毫无问题地以编程方式将记录添加到此网格中，并且在使用寻呼机的编号部分时分页工作正常。但是，当单击页面上的任何导航按钮（第一个、上一个、下一个、最后一个）时，更改似乎会丢失，并且网格会恢复为显示原始数据。但是，如果我使用 javascript 设置页面，它将显示正确的数据。

如果我将 C# 网格上的数据源替换为通过 javascript 创建的数据源，则不会出现此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:39:44.377

您的“添加记录”代码怎么样。在我的项目中（ASP MVC 4 + kendo Wraper）。我通过这种方式自定义数据源：

//获取数据源对象

```
var dataSource = $('#myGrid').data('kendoGrid').dataSource;
//Pusth new data to Data-Source
dataSource.transport.options.data.Data.push(objNewItem);
//Re-counting number of records
dataSource.transport.options.data.Total = dataSource.transport.options.data.Data.length; 
```

到目前为止，此代码一直运行良好。您可以更改页面，使用“第一个，上一个，下一个，最后一个”功能，或者您可以重新加载数据源/转到特定的页码，如下所示：

```
dataSource.read();
dataSource.page(1); 
```

# sql - 一个 SQL 谜题（查找第一次出现的列值）

> ID：14586967
> 
> 赞同：0
> 
> 时间：2013-01-29T15:58:43.577
> 
> 标签：sql, sql-server-2008-r2

CI 有没有一种简单的方法可以让我找到在列中第一次出现具有特定值的行？例如假设我有这两个表

```
Alphabet
A
B
C
D

Alphabet    Usage
A           Apple
B           Bat
D           Dog
A           Amateur
A           Arsenal
C           Cat
B           Ball
D           Drum 
```

选择第一个表中的所有内容并在第二个表中第一次使用它的简单方法是什么？

预期输出：

```
Alphabet    Usage
A           Apple
B           Bat
C           Cat
D           Dog 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T16:06:47.133

你应该可以申请`row_number()`。但是，使用时`row_number`需要提供订单。

第一个示例使用 order by，`usage`但问题是它不会按表中 first 的顺序，而是按字母顺序：

```
select alphabet, usage
from
(
  select t1.alphabet,
    t2.usage,
    row_number() over(partition by t1.alphabet order by t2.usage) rn
  from table1 t1
  inner join table2 t2
    on t1.alphabet = t2.alphabet
) src
where rn =1 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/d9036/3)。

如果您没有数字 id 字段来保证第一个输入的顺序。您*也许*可以使用：

```
select alphabet, usage
from
(
  select t1.alphabet,
    t2.usage,
    row_number() over(partition by t1.alphabet order by (select 1)) rn
  from table1 t1
  inner join table2 t2
    on t1.alphabet = t2.alphabet
) src
where rn =1 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/d9036/4)。

正如@Aaron 在评论中指出的那样，使用此方法不能保证该顺序，并且行为可能会改变。

**理想情况下，您应该有排序类型的列，可以让您区分数据的第一次出现，即日期时间、id 等。由于表中的数据没有顺序，您可以使用以下方式应用顺序`order by`**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:19:38.143

你不能，除非你在第二张桌子上有一个订单。SQL 表本质上是无序的，因此您需要一个指定插入时间或自动递增 id 的列。

如果您碰巧在没有并行性的情况下运行 SQL Server，并且数据存储在单个文件中，或者如果第二个表中的数据适合一页，那么以下可能会起作用（但不能保证）：

```
select au.*
from (select au.Alphabet, min(seqnum) as minseqnum
      from (select au.*, row_number() over (order by (select NULL)) as seqnum
            from AlphabetUsage au
           ) au
      group by au.Alphabet
     ) ausum join
     (select au.*, row_number() over (order by (select NULL)) as seqnum
      from AlphabetUsage au
     ) au
     on ausum.seqnum = au.seqnum 
```

根据我在 SQL Server 上的经验，`row_number() over (order by (select NULL))`分配行号而不对数据进行排序。但是，这没有记录，也不能保证。

我强烈建议您向表中添加其他列，包括标识每一行的标识列。

# xcode - UIPicker 视图旋转支持

> ID：14586968
> 
> 赞同：0
> 
> 时间：2013-01-29T15:58:43.330
> 
> 标签：xcode, rotation, uipickerview

我有一个支持横向和纵向的通用 iOS 6 应用程序。

我有一个视图，它由底部的 UIPickerView 和顶部附近的标签组成。

在 iPad 或 iPad Mini 上，有足够的空间供 UIPickerView 旋转。但是 UIPickerView 会占用 iPhone 上的整个屏幕区域（4 英寸和 3.5 英寸屏幕）。

我确信它没有帮助我在底部有一个标签栏。

[![示例图片](../Images/5f543e9fcf8edcf8da1f3f18828b106c.png)](https://i.stack.imgur.com/XKTEt.jpg)

无论如何我可以在这个视图中缩短/缩小我的 UIPickerView 或强制仅纵向显示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:58:55.623

`-[UIViewController supportedInterfaceRotations]`您可以通过和的组合强制仅显示纵向`-[UIViewController shouldAutorotate]`。（这在 iOS 5 及更低版本中略有不同，您必须使用`-[UIViewController shouldAutorotateToInterfaceOrientation:]`.

# facebook - 点赞按钮：可以点赞，不分享

> ID：14586970
> 
> 赞同：4
> 
> 时间：2013-01-29T15:58:43.687
> 
> 标签：facebook, button, share, facebook-like

我的网站上有 fb like 按钮。当我单击`like`该站点时，当我向共享添加个性化消息时，我的墙上没有出现任何内容。一开始点赞数增加了，但是我重新加载网站后点赞数又回到了之前的数字。

如果你想检查会发生什么：[http ://www.koosvandeput.nl/heren/elektrische-fietsen/gazelle/gazelle-orange-pure-innergy-2013-82265.html](http://www.koosvandeput.nl/heren/elektrische-fietsen/gazelle/gazelle-orange-pure-innergy-2013-82265.html)

使用“deel fiets”右侧的“赞”按钮

有谁知道为什么会这样？它发生在所有浏览器和操作系统中。

# c# - 在 xaml 窗口上调用 ShowDialog 时，如何防止调用垃圾收集？

> ID：14586975
> 
> 赞同：1
> 
> 时间：2013-01-29T15:59:47.997
> 
> 标签：c#, performance, xaml, memory

我有一个使用大量内存的应用程序，但现在我无法改变这个事实。我的问题是我有一个我想执行的操作并提供一个进度对话框，但似乎显示 xaml 进度窗口导致`GC.Collect`被调用 10 次！有什么想法可以优化打开进度窗口吗？

根据我的 Ants Profiler，导致 GC.Collect 的调用是

```
System.Window.ShowDialog() ->
..
..
System.Windows.Media.Imaging.BitmapSource.CreateCachedBitmap ->
SafeMILHandle.UpdateEstimatedSize ->
SafeMILHandleMemoryPressure.ctor ->
MemoryPressure.Add ->
MemoryPressure.ProcessAdd ->
GC.Collect 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-16T18:43:40.973

还有一个解决方案可以完全禁用与位图图像相关的内存压力和后续的垃圾收集。[这更像是一种 hack，但您可以在此处](https://stackoverflow.com/questions/22774663/elementhost-size-causes-slow-wpf-open-load-with-high-memory-usage)阅读类似的问题。

```
typeof(BitmapImage).Assembly.GetType("MS.Internal.MemoryPressure").GetField("_totalMemory", BindingFlags.NonPublic | BindingFlags.Static).SetValue(null, Int64.MinValue / 2); 
```

这样您就可以避免搜索整个代码来查找和修改 WPF 图标初始化。`System.Windows.Forms.Integration.ElementHost`最重要的是，无论您如何初始化，某些控件都会隐式添加与位图相关的内存压力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T20:46:45.117

您是否检查过与该主题相关的其他 stackoverflow 问题？您可能会使用一些提示：

[如何避免实时 .NET 应用程序中的垃圾收集？](https://stackoverflow.com/questions/85283/how-to-avoid-garbage-collection-in-real-time-net-application)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-02T12:51:46.683

这是 WPF 中的错误/功能：

[https://connect.microsoft.com/VisualStudio/feedback/details/687605/gc-is-forced-when-working-with-small-writeablebitmap](https://connect.microsoft.com/VisualStudio/feedback/details/687605/gc-is-forced-when-working-with-small-writeablebitmap)

[http://referencesource.microsoft.com/#PresentationCore/Core/CSharp/MS/Internal/MemoryPressure.cs](http://referencesource.microsoft.com/#PresentationCore/Core/CSharp/MS/Internal/MemoryPressure.cs)

编辑：自 .NET 4.6.2 以来， MemoryPressure 类已被删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T13:40:08.933

垃圾回收是由 WPF 图标的初始化引起的。当我从 xaml 中删除 icon 属性时：

```
<Window ... Icon="/CommonUI;component/Common/ProgressReporting/MyIcon.ico"> 
```

而是在构造函数中初始化它：

```
public ProgressWindow()
        {
            InitializeComponent();
            Icon = Properties.Resources.MyIcon.ToImageSource();
        } 
```

问题消失了。

`System.Window.UpdateIcon()`期间不再调用的差异`ShowDialog()`。该调用正在为图标文件中的每个图像大小`UpdateIcon()`创建一个，该文件又在调用，并且由于应用程序的高内存使用率正在为创建的每个新位图调用。`CachedBitmap``MemoryPressure.Add``GC.Collect`

当在应用程序中加载大型项目时，这个小改动将我的进度对话框的加载时间减少了 15 秒！

# grails - 调试模式下 grails 2.1 的 ClassCircularityError

> ID：14586977
> 
> 赞同：2
> 
> 时间：2013-01-29T15:58:56.847
> 
> 标签：grails, sts-springsourcetoolsuite

由于将应用程序从 grails 1.3.7 升级到 2.1.0，我在尝试提交（发布）表单时收到以下错误。

它只发生在调试模式下！

我正在使用 Groovy/Grails Tool Suite 3.1.0

```
5:41:13 ERROR [GrailsExceptionResolver] ClassCircularityError occurred when processing request: [POST] /myapp/contextRoot/addItem - parameters:
startTimeDate: 
addcoupon: Add Item
maxRedemptions: 
timeZone: Europe/London
termsAndConditions: 
percentOff: 
title: test
buyX: 
discountType: 
shortDescription: 
redemptionType.id: 
getY: 
categoryKey: 
amountOff: 
org/springframework/beans/PropertyBatchUpdateException. Stacktrace follows:
org.codehaus.groovy.grails.web.servlet.mvc.exceptions.ControllerExecutionException: Executing action [addItem] of controller [com.mastercard.deals.merchant.testController]  caused exception: Runtime error executing action
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.codehaus.groovy.grails.web.servlet.mvc.exceptions.ControllerExecutionException: Runtime error executing action
    ... 3 more
Caused by: java.lang.reflect.InvocationTargetException
    ... 3 more
Caused by: java.lang.ClassCircularityError: org/springframework/beans/PropertyBatchUpdateException
    ... 3 more 
```

我很困惑为什么会这样……有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T14:04:24.440

因此，[以下](http://jira.grails.org/browse/GPSPRINGSECURITYOPENID-19)JIRA 似乎与该问题相似：

我现在在调试模式下使用 -noreloading 参数运行应用程序，它可以工作：

```
-grails-debug -noreloading -Dserver.port=8082 run-app 
```

# javascript - jQuery Mobile 转换根本不起作用

> ID：14586978
> 
> 赞同：1
> 
> 时间：2013-01-29T15:59:02.300
> 
> 标签：javascript, jquery, html, jquery-mobile

我根本无法让 jQuery Mobile 过渡（我只想要“幻灯片”一个！）发生，但这一切都是不可行的。它只是每次正常加载页面。

完整的 HTML 代码在这里：

```
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name="format-detection" content="telephone=no" />
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <link rel="stylesheet" type="text/css" href="css/jquery.mobile-1.2.0-alpha.1.min.css">

        <script type="text/javascript" src="cordova-2.3.0.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript" src="js/iscroll.js"></script>    
        <script type="text/javascript" src="js/jquery-1.9.0.min.js"></script>
        <script type="text/javascript" src="js/jquery.mobile-1.2.0.min.js"></script>
        <title>Parent Guide</title>

        <script>
        //iScroll initiate
            var myScroll;
            function loaded() {
                myScroll = new iScroll('wrapper');
            }
            document.addEventListener('touchmove', function (e) { e.preventDefault(); }, false);
            document.addEventListener('DOMContentLoaded', function () { setTimeout(loaded, 200); }, false);
        </script> 

    </head>

    <body>

        <div data-role="page" id="home">
            <div data-role="header" id="header"><h1>The Parent Guide</h1></div>
            <div data-role="content" id="wrapper">
                <div id="scroller">
                    <div id="content">
                        <a href="grid/1.html">Link</a>                
                    </div>
                </div>
            </div>
            <div data-role="footer" id="footer"><a href="about.html"><div class="footer_abt"></div></a></div>
        </div>

    </body>

</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:47:55.910

只需将 jquery-1.9.0.min.js 更改为 jquery-1.8.2.min.js 版本即可。

# ios6 - ios应用程序之间的通信

> ID：14586982
> 
> 赞同：1
> 
> 时间：2013-01-29T15:59:43.220
> 
> 标签：ios6, url-scheme, openurl

我有两个 ios 应用程序..app1 和 app2。现在我想要的是从 app1 启动 app2。这可以使用 openUrl 方法和 url 方案来完成。但我只想在 app1 进入后台/被挂起时启动 app2。

我能够从 AppDelegate 的 applicationWillEnterForeground 启动 app2 ...但相同的代码在 AppDelegate 的 applicationDidEnterbackground 方法或 applicationWillResignActive 中不起作用。

谁能告诉我当用户离开 app1 时如何从 app1 启动 app2。

在检查日志时，它显示以下内容：

> *：从后台应用程序使用 BOOL _verifyURLEntitlement(mach_port_t, NSURL , SBSApplicationLaunchFromURLFlags, SBApplication ** )所需的权利 com.apple.springboard.openurlinbackground ：LaunchServices：应用程序启动失败 - 收到错误代码 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T22:10:32.473

首先钢铁侠给出了一个很好的链接，这个链接只适用于越狱设备。

其次，没有合法和记录的方式来做到这一点。苹果的口号是用户决定设备应该做什么。在这种情况下，用户按下了 Home 按钮，因此它不应该随机转到其他应用程序。

您可能会找到一些私有 API，它可以让您做类似的事情。但是，它不会在应用商店中被接受。

# ruby-on-rails - 旧版应用程序的 Gem 依赖问题

> ID：14586983
> 
> 赞同：1
> 
> 时间：2013-01-29T15:59:06.367
> 
> 标签：ruby-on-rails, ruby

我继承了一个 rails 2.2 应用程序，但在以允许我工作的方式配置本地环境时遇到了一些麻烦。引导 WEBrick 给我以下错误：

```
./script/server
=> Booting WEBrick...
/Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/rails-2.2.2/lib/rails/gem_dependency.rb:224:in `specification': undefined method `version_requirements=' for #<Gem::Dependency:0x10b1ec6a0> (NoMethodError)
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/rails-2.2.2/lib/rails/plugin/locator.rb:81:in `plugins'
from /Users/swachtma/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:54:in `inject'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/rails-2.2.2/lib/rails/plugin/locator.rb:81:in `each'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/rails-2.2.2/lib/rails/plugin/locator.rb:81:in `inject'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/rails-2.2.2/lib/rails/plugin/locator.rb:81:in `plugins'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/rails-2.2.2/lib/rails/plugin/loader.rb:63:in `locate_plugins'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/rails-2.2.2/lib/rails/plugin/loader.rb:62:in `map'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/rails-2.2.2/lib/rails/plugin/loader.rb:62:in `locate_plugins'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/rails-2.2.2/lib/rails/plugin/loader.rb:27:in `all_plugins'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/rails-2.2.2/lib/rails/plugin/loader.rb:22:in `plugins'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/rails-2.2.2/lib/rails/plugin/loader.rb:45:in `add_plugin_load_paths'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/rails-2.2.2/lib/initializer.rb:269:in `add_plugin_load_paths'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/rails-2.2.2/lib/initializer.rb:135:in `process'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/rails-2.2.2/lib/initializer.rb:112:in `send'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/rails-2.2.2/lib/initializer.rb:112:in `run'
from /Users/swachtma/htdocs/skating_circle/config/environment.rb:20
from /Users/swachtma/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:54:in `gem_original_require'
from /Users/swachtma/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:54:in `require'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/activesupport-2.2.2/lib/active_support/dependencies.rb:153:in `require'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/activesupport-2.2.2/lib/active_support/dependencies.rb:521:in `new_constants_in'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/activesupport-2.2.2/lib/active_support/dependencies.rb:153:in `require'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/rails-2.2.2/lib/commands/servers/webrick.rb:59
from /Users/swachtma/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:54:in `gem_original_require'
from /Users/swachtma/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:54:in `require'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/activesupport-2.2.2/lib/active_support/dependencies.rb:153:in `require'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/activesupport-2.2.2/lib/active_support/dependencies.rb:521:in `new_constants_in'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/activesupport-2.2.2/lib/active_support/dependencies.rb:153:in `require'
from /Users/swachtma/.rvm/gems/ruby-1.8.7-p371@skating/gems/rails-2.2.2/lib/commands/server.rb:49
from /Users/swachtma/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:54:in `gem_original_require'
from /Users/swachtma/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:54:in `require'
from ./script/server:3 
```

我怀疑我可能需要降级我的 ruby​​-gems 版本，但我不知道如何确定和适当的版本。

```
These are my local gems:

*** LOCAL GEMS ***

actionmailer (2.2.2)
actionpack (2.2.2)
activerecord (2.2.2)
activeresource (2.2.2)
activesupport (2.2.2)
aws-s3 (0.6.3)
builder (3.1.4)
bundler (1.2.3)
contacts (1.2.4)
diff-lcs (1.1.3)
fastercsv (1.5.5)
gdata (1.1.1)
heywatch (1.2.0)
highline (1.6.15)
hoptoad_notifier (2.4.11)
hpricot (0.8.6)
json (1.7.6)
mime-types (1.19)
mini_magick (3.4)
net-ssh (2.6.3)
rack (1.5.1)
rails (2.2.2)
rake (10.0.3, 0.8.7)
rest-client (1.6.7)
rspec (2.12.0, 1.3.2)
rspec-core (2.12.2, 2.6.4)
rspec-expectations (2.12.1, 2.6.0)
rspec-mocks (2.12.2, 2.6.0)
rspec-rails (1.3.2)
rubygems-bundler (1.1.0)
rubygems-update (1.4.2)
rvideo (0.9.3)
rvm (1.11.3.6)
subexec (0.2.2)
will_paginate (2.2.2)
xml-simple (1.1.2) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T16:25:31.203

我猜对于 Rails 2.2 gem 版本 1.4.2 有效。尝试降级到 1.4.2

```
 sudo gem update --system 1.4.2 or rvm install rubygems 1.4.2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:30:21.960

试试这个

```
gem install rubygems-update -v='1.4.2'
gem uninstall rubygems-update -v='1.5.0'
update_rubygems 
```

另外，请参考以下问题：

[rails 2.3.4 中的 Gem 依赖错误](https://stackoverflow.com/questions/5065523/gem-dependency-error-in-rails-2-3-4)

[ruby on rails：新安装后尝试启动服务器时未定义的方法“version_requirements”](https://stackoverflow.com/questions/5286474/ruby-on-rails-undefined-method-version-requirements-when-attempting-to-start)

# split - 使用 iTextSharp 垂直平铺 PDF 页面

> ID：14586984
> 
> 赞同：1
> 
> 时间：2013-01-29T15:59:25.173
> 
> 标签：split, itextsharp

我想用 iTextSharp 垂直平铺页面

像这样的东西：

```
---------
| L  |  R | 
--------- 
```

就 PDF 而言，这是 1 页。

我需要将页面垂直拆分为 2 部分页面 R 和页面 L，以便页面的左侧首先出现，然后是页面的右侧。

像这样的东西：第1页：

```
-----
| L |
----- 
```

第2页：

```
-----
| R  |
----- 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:33:57.170

我改变了你的问题，因为拆分 PDF 对我们许多人有不同的含义。例如：您可以将一个 10 页的 PDF 拆分为两个 5 页的 PDF。

您不想拆分 PDF，而是要平铺 PDF。这在我的书的第 6 章中进行了解释：http: [//www.manning.com/lowagie2/samplechapter6.pdf](http://www.manning.com/lowagie2/samplechapter6.pdf)请参阅第 6.2.3 节“N-up 复制和平铺 PDF 文档”。

如果您不熟悉 Java，您可以随时在此处下载示例的 C# 版本：http: [//sourceforge.net/p/itextsharp/code/HEAD/tree/book/iTextExamplesWeb/iTextExamplesWeb/iTextInAction2Ed/](http://sourceforge.net/p/itextsharp/code/HEAD/tree/book/iTextExamplesWeb/iTextExamplesWeb/iTextInAction2Ed/)

例如：http: [//sourceforge.net/p/itextsharp/code/HEAD/tree/book/iTextExamplesWeb/iTextExamplesWeb/iTextInAction2Ed/Chapter06/TilingHero.cs](http://sourceforge.net/p/itextsharp/code/HEAD/tree/book/iTextExamplesWeb/iTextExamplesWeb/iTextInAction2Ed/Chapter06/TilingHero.cs)

您需要修改此示例，因为它将 A0 页面平铺成 16 个 A4 页面，但这是一个简单的数学问题。这将是开发人员论坛上的主题；-)

# objective-c - Interface Builder 中的 AutoLayout 和 UITableViewCell 原型

> ID：14586985
> 
> 赞同：1
> 
> 时间：2013-01-29T15:59:16.747
> 
> 标签：objective-c, uitableview, interface-builder, autolayout

我有一个 UITableViewCell 子类，打开自动布局后，我现在收到此错误：

```
2013-01-29 15:46:15.555 iP2[6690:907] *** Assertion failure in -[MenuTableViewCell layoutSublayersOfLayer:], /SourceCache/UIKit/UIKit-2372/UIView.m:5776
2013-01-29 15:46:30.357 iP2[6690:907] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Auto Layout still required after executing -layoutSubviews. MenuTableViewCell's implementation of -layoutSubviews needs to call super.' 
```

MenuTableViewCell 是我的子类。

我猜这与 IB 如何决定为这个单元自动构建约束有关。这是我为此单元设置的 IB 的屏幕截图：[https ://www.evernote.com/shard/s4/sh/0ec12042-7d37-4770-8d7a-c0c8c1e4e6f0/3192e32e8fde55dfe94c7269c428f73b](https://www.evernote.com/shard/s4/sh/0ec12042-7d37-4770-8d7a-c0c8c1e4e6f0/3192e32e8fde55dfe94c7269c428f73b)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T11:05:31.467

关闭自动布局为我解决了这个问题，似乎`UITableViewCell`不支持自动布局，因此您可以将其子类化并在您的设计中使用自动布局...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:17:58.623

难道是你必须实现 layoutSubviews 方法？看来您也已将此消息发送给 super。例如：

*   (void)layoutSubviews { [super layoutSubviews]; ETC... }

# java - jsp中页面刷新时的Java方法调用

> ID：14586986
> 
> 赞同：1
> 
> 时间：2013-01-29T15:59:23.733
> 
> 标签：java, jsp

我必须根据按钮单击事件调用 Java 方法，但是当我刷新页面时会调用方法。有没有办法只在单击按钮时限制呼叫？请帮我

这是我的jsp代码：

```
 <%@ page language="java" import="sourcejava.*"%>
 <%
 if(request.getParameter("btnsubmit") != null)
 {
    Xmlparse p = new Xmlparse();
    p.parse();
 }
 %> 

<input type="button" id="btnsubmit" name="btnsubmit" value="parse"/> 
```

# sharepoint - 将 SharePoint 中的选定文件复制到本地驱动器

> ID：14586989
> 
> 赞同：0
> 
> 时间：2013-01-29T16:00:03.297
> 
> 标签：sharepoint, sharepoint-2010

我正在尝试将从 SharePoint 文档列表中选择的内容复制到服务器本地驱动器。但我终其一生都无法找到在 SharePoint 2010 中使用 C# 或 JavaScript（最好是 C#）在任何地方执行此操作的方法。这可能吗？如果是的话，任何人都可以提供一些指导，让我朝着正确的方向开始吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T13:09:52.700

您可以使用自定义操作将功能集成到功能区（[请参阅本文](http://www.sharepointnutsandbolts.com/2010/01/adding-ribbon-items-into-existing.html)）。

在代码中添加自定义操作后，您可以：

如果您知道文件服务器的相对 URL，您可以从 Web 获取它

```
SPFile file = YourWebObject.GetFile("FileServerRelativeUrl"); 
```

你有你的 SPFile 对象，你可以使用 .NET IO 库将它保存到磁盘中

```
FileStream fileStreamToSave = YourWebObject.OpenBinaryStream(); 
```

还不如保存...

**重要的！**- 您必须授予对存储文件的文件夹的书面访问权限。

# php - PHP - 从字符串中删除所有选项卡

> ID：14586993
> 
> 赞同：33
> 
> 时间：2013-01-29T16:00:37.903
> 
> 标签：php, tabs

我能够从字符串中删除所有单个选项卡：

```
// Copying and pasting the tab directly
$txt = str_replace("    ", "", $txt); 
```

这只会删除单个标签，但不会删除双标签。然后我尝试了这个，认为“\t”足以找到标签：

```
$txt = preg_replace('/\t/', '', $txt); 
```

但是，它没有用。谁能提供更好的东西？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2013-06-18T19:00:53.560

```
trim(preg_replace('/\t+/', '', $string)) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-29T16:02:12.617

尝试使用这个正则表达式

```
$string = trim(preg_replace('/\t/g', '', $string)); 
```

这将从字符串中删除所有选项卡...

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-09-11T13:48:35.277

这将删除变量 $string 中的所有选项卡

```
preg_replace('/\s+/', '', $string); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-01-19T20:36:29.680

```
trim(preg_replace('/[\t|\s{2,}]/', '', $result)) 
```

删除所有选项卡，包括使用多个空格创建的选项卡

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-05-19T11:35:46.197

`$string = trim(preg_replace('/\t/', '', $string));`

这对我有用。删除`g`@Mr. 外星人回答。

# javascript - 谷歌地图没有加载，只显示一个'

> ID：14586996
> 
> 赞同：0
> 
> 时间：2013-01-29T16:00:44.200
> 
> 标签：javascript, google-maps, google-maps-api-3

因此，我使用 PHP/MySQL 将信息加载到一个可以工作的 XML 中，然后我在下面有这段代码，它应该用来制作地图并加载 xml 并在单击时将其插入标记中。这几乎是 100% 复制粘贴自谷歌教程

[https://developers.google.com/maps/articles/phpsqlajax_v3#createmap](https://developers.google.com/maps/articles/phpsqlajax_v3#createmap)

任何帮助都会很可爱我已经为此苦苦挣扎了好几天

```
<!DOCTYPE html >
   <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PHP/MySQL & Google Maps Example</title>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=my           key&sensor=true"></script>
    <script type="text/javascript">
     //<![CDATA[

    function load() {
      var map = new google.maps.Map(document.getElementById("map"), {
       center: new google.maps.LatLng('34.153471', '-118.432123'),
    zoom: 13,
    mapTypeId: 'roadmap'
  });
  var infoWindow = new google.maps.InfoWindow;

  // Change this depending on the name of your PHP file
  downloadUrl("mapXML2.php", function(data) {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName("marker");
        for (var i = 0; i < markers.length; i++) {
            var name = markers[i].getAttribute("name");
            var address = markers[i].getAttribute("address");
            var desc = markers[i].getAttribute("desc");
            var cap = markers[i].getAttribute("eventcap");
            var cur = markers[i].getAttribute("eventcur");
            var type = markers[i].getAttribute("type");
            var point = new google.maps.LatLng(
                parseFloat(markers[i].getAttribute("lat")),
                parseFloat(markers[i].getAttribute("lng")));
            var html = "<b>" + name + "</b> <br/>" + address + "<br/>" + desc + "<br/>" + "Currently " + cur + "/" + cap;
            //var icon = customIcons[type] || {};
            var marker = new google.maps.Marker({
                map: map,
                position: point
            });
            bindInfoWindow(marker, map, infoWindow, html);
        }
    });

function bindInfoWindow(marker, map, infoWindow, html) {
  google.maps.event.addListener(marker, 'click', function() {
    infoWindow.setContent(html);
    infoWindow.open(map, marker);
  });
}

function downloadUrl(url, callback) {
  var request = window.ActiveXObject ?
      new ActiveXObject('Microsoft.XMLHTTP') :
      new XMLHttpRequest;

  request.onreadystatechange = function() {
    if (request.readyState == 4) {
      request.onreadystatechange = doNothing;
      callback(request, request.status);
    }
  };

  request.open('GET', url, true);
  request.send(null);
}

    function doNothing() {}

    //]]>

  </script>

  </head>

  <body onload="load()">
    <div id="map" style="width: 500px; height: 300px"></div>
  </body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:48:38.360

您缺少 load() 的右括号

```
 }
    });
}//**ADD THIS**
function bindInfoWindow(marker, map, infoWindow, html) { 
```